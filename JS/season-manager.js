const a52n=a52b;function a52a(){const p=['Cg9ZAxrPB24','DMfSDwu','zxjYB3i','mti0oty1m0vZrKLPDq','zg9JCW','mZG5ndi0yxrtsM1o','zw1HAwW','CgXHEwvYCW','igHHCYbIzwvUigfYy2HPDMvKigfUzcbWBgf5zxjZigHHDMuGyMvLBIbYzxnLDc4','BM9Uzq','mtu4mKjAzwPJzG','CMvSB2fK','zgLZCgXHEq','C2v0DxbfDMvUDeXPC3rLBMvYCW','zwXVuMf0Aw5N','mtuYntK2nM5pAvfnsW','C3r5Bgu','y29UzMLYBs1YzxnLDa','mtC1mZG2rKnwCuPU','y2XPy2S','ndKXmtuZnMvbq2DNDq','CMvZzxqTC2vHC29U','nu1rv0PLtG','z2v0rwXLBwvUDej5swq','CMvZzxqTy29UzMLYBwf0Aw9U','C2vHC29Uq291BNq','Bwv0ywrHDge','CMvZzxrtzwfZB24','zxHPC3rZ','nJq5otGYn2TuDfL6tG','ntm0ntzMs3nMDwO','ywrKrxzLBNrmAxn0zw5LCG','yMXVy2S'];a52a=function(){return p;};return a52a();}(function(a,b){const h=a52b,c=a();while(!![]){try{const d=parseInt(h(0x74))/0x1+parseInt(h(0x71))/0x2+parseInt(h(0x86))/0x3+-parseInt(h(0x76))/0x4+-parseInt(h(0x78))/0x5*(parseInt(h(0x88))/0x6)+-parseInt(h(0x6c))/0x7*(-parseInt(h(0x80))/0x8)+-parseInt(h(0x7f))/0x9;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a52a,0xcf88d));import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a52b(a,b){const c=a52a();return a52b=function(d,e){d=d-0x6c;let f=c[d];if(a52b['hMkZvR']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a52b['tsxRYM']=g,a=arguments,a52b['hMkZvR']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a52b['tsxRYM'](f),a[i]=f):f=j,f;},a52b(a,b);}import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){const i=a52b;this[i(0x6f)]();}['setupEventListeners'](){const j=a52b,a=document['getElementById'](j(0x77)),b=document[j(0x79)](j(0x73)),c=document['getElementById']('cancel-reset');a?.[j(0x81)](j(0x75),()=>{const k=j;document['getElementById']('reset-confirmation')[k(0x72)][k(0x6e)]=k(0x82);}),b?.[j(0x81)](j(0x75),async()=>{const l=j,d=document[l(0x79)]('reset-password'),e=auth['currentUser'];if(!e||!d['value']){alert('Please\x20enter\x20your\x20password');return;}try{const f=EmailAuthProvider['credential'](e[l(0x89)],d['value']);await reauthenticateWithCredential(e,f),await this[l(0x7d)](),d[l(0x84)]='',document[l(0x79)](l(0x7a))['style'][l(0x6e)]=l(0x8c);}catch(g){alert('Invalid\x20password\x20or\x20authentication\x20failed'),console['error']('Authentication\x20error:',g);}}),c?.['addEventListener'](j(0x75),()=>{const m=j,d=document[m(0x79)]('reset-password');d[m(0x84)]='',document['getElementById']('reset-confirmation')['style'][m(0x6e)]='none';});}async[a52n(0x7d)](){const o=a52n;try{const a=await getDoc(doc(db,'metadata',o(0x7b)));let b=0x1;a[o(0x7e)]()&&(b=a['data']()['count']+0x1);const c=await getDocs(collection(db,o(0x8a))),d={'players':[],'date':new Date(),'seasonNumber':b};for(const e of c[o(0x87)]){const f=e['data']();d['players']['push']({'username':f['username'],'position':f[o(0x83)],'eloRating':f[o(0x70)]||0x4b0}),await setDoc(doc(db,o(0x8a),e['id']),{...f,'eloRating':0x4b0,'position':f['position']});}await setDoc(doc(db,'seasons','season'+b),d),await setDoc(doc(db,o(0x7c),o(0x7b)),{'count':b}),alert('Season\x20'+b+o(0x8b)),location[o(0x6d)]();}catch(g){console[o(0x85)]('Error\x20resetting\x20season:',g),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}export const seasonManager=new SeasonManager();