const a4_0x1205b9=a4_0x44bf,a4_0x3aa641=(function(){let _0x10682b=!![];return function(_0x178e9,_0x5b5b14){const _0x261894=_0x10682b?function(){const _0xccc1fe=a4_0x44bf;if(_0x5b5b14){const _0x23dcc2=_0x5b5b14[_0xccc1fe(0x110)](_0x178e9,arguments);return _0x5b5b14=null,_0x23dcc2;}}:function(){};return _0x10682b=![],_0x261894;};}()),a4_0xe953d1=a4_0x3aa641(this,function(){const _0xb6a2d7=a4_0x44bf,_0x4b2976=function(){const _0x3c2be7=a4_0x44bf;let _0x28e42e;try{_0x28e42e=Function('return\x20(function()\x20'+_0x3c2be7(0x141)+');')();}catch(_0x2ba188){_0x28e42e=window;}return _0x28e42e;},_0x474c82=_0x4b2976(),_0x6a5f2f=_0x474c82[_0xb6a2d7(0xe0)]=_0x474c82['console']||{},_0x5e12a0=['log','warn',_0xb6a2d7(0xff),_0xb6a2d7(0xbb),'exception',_0xb6a2d7(0x10e),'trace'];for(let _0x3e6fe1=0x0;_0x3e6fe1<_0x5e12a0['length'];_0x3e6fe1++){const _0x37aeef=a4_0x3aa641['constructor']['prototype']['bind'](a4_0x3aa641),_0x5aee69=_0x5e12a0[_0x3e6fe1],_0x4c7e8c=_0x6a5f2f[_0x5aee69]||_0x37aeef;_0x37aeef[_0xb6a2d7(0xe5)]=a4_0x3aa641['bind'](a4_0x3aa641),_0x37aeef['toString']=_0x4c7e8c['toString'][_0xb6a2d7(0x124)](_0x4c7e8c),_0x6a5f2f[_0x5aee69]=_0x37aeef;}});a4_0xe953d1();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date(a4_0x1205b9(0x13f))['getTime']()}];function isUsernameMuted(_0xd53e71,_0x5c35ae){const _0x4d829b=a4_0x1205b9;if(!_0xd53e71)return![];const _0x43c865=mutedUsers['find'](_0x5bb1bf=>_0x5bb1bf[_0x4d829b(0x10a)]===_0xd53e71);if(!_0x43c865)return![];if(!_0x5c35ae)return!![];const _0x283eb3=_0x5c35ae instanceof Date?_0x5c35ae[_0x4d829b(0xf3)]():_0x5c35ae['seconds']?_0x5c35ae['seconds']*0x3e8:Date['now']();return _0x283eb3>=_0x43c865['muteFromDate'];}function filterComment(_0x1ca73e,_0x49b47d,_0x4df361){const _0x2364e7=a4_0x1205b9;if(!_0x1ca73e)return'-';if(isUsernameMuted(_0x49b47d,_0x4df361))return _0x2364e7(0xb1);return _0x1ca73e;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x5ae790,_0x1644bb,_0x5e3791){const _0x2e1b60=a4_0x1205b9,_0x54f9c5='u:'+(_0x5e3791[_0x2e1b60(0x137)]||'');return'previewCache_'+_0x5ae790+'_p'+_0x1644bb+'_'+_0x54f9c5;}function getCachedPage(_0x347460){const _0x142867=a4_0x1205b9,_0x5ba9e5=sessionStorage['getItem'](_0x347460);if(_0x5ba9e5)try{return JSON[_0x142867(0xe7)](_0x5ba9e5);}catch(_0x3533fc){return console['error']('Failed\x20to\x20parse\x20cache:',_0x3533fc),sessionStorage['removeItem'](_0x347460),null;}return null;}function cachePage(_0x2d43a9,_0x502c0e){try{sessionStorage['setItem'](_0x2d43a9,JSON['stringify'](_0x502c0e));}catch(_0x3ea176){console['error']('Failed\x20to\x20cache\x20data:',_0x3ea176);}}function getEloColor(_0x419615){const _0x10a838=a4_0x1205b9,_0x1c4aa1=Number(_0x419615);if(_0x1c4aa1>=0x7d0)return _0x10a838(0xce);else{if(_0x1c4aa1>=0x708)return'#FFD700';else{if(_0x1c4aa1>=0x640)return'#b9f1fc';else{if(_0x1c4aa1>=0x578)return'#CD7F32';else return'#808080';}}}}function formatDate(_0x3b47c8,_0x338ae8=![]){const _0x566333=a4_0x1205b9;if(!_0x3b47c8||!_0x3b47c8['seconds'])return _0x566333(0xd8);const _0x4d8057=new Date(_0x3b47c8['seconds']*0x3e8);return _0x338ae8?_0x4d8057['toLocaleString']():_0x4d8057['toLocaleDateString']();}function truncateComment(_0x12ffb8,_0x9f3b91=0x1e){if(!_0x12ffb8)return'-';if(_0x12ffb8['length']<=_0x9f3b91)return _0x12ffb8;return _0x12ffb8['substring'](0x0,_0x9f3b91)+'...';}function formatCommentDate(_0x2d57af){const _0x3e3702=a4_0x1205b9;if(!_0x2d57af||!_0x2d57af['seconds'])return'';const _0x305543=new Date(_0x2d57af['seconds']*0x3e8),_0x4f8900=new Date(),_0x3b7acc=Math[_0x3e3702(0xbd)](_0x4f8900-_0x305543),_0x59374c=Math['floor'](_0x3b7acc/(0x3e8*0x3c*0x3c*0x18));if(_0x59374c===0x0)return'Today';else{if(_0x59374c===0x1)return'Yesterday';else return _0x59374c<0x7?_0x59374c+_0x3e3702(0x96):_0x305543['toLocaleDateString']();}}function setLoadingIndicator(_0x3769ef){const _0x4b2738=a4_0x1205b9,_0x5e0c60=document['getElementById']('loading-indicator');if(_0x5e0c60)_0x5e0c60['style']['display']=_0x3769ef?_0x4b2738(0x11b):_0x4b2738(0x9e);}export function updatePreviewLadderModeUI(){const _0x31b86e=a4_0x1205b9,_0x16ccfd=document['getElementById']('preview-ladder-mode'),_0x24fbde=document[_0x31b86e(0xfe)]('preview-d1-button'),_0x48b533=document['getElementById'](_0x31b86e(0xc1)),_0x317d9e=document[_0x31b86e(0xfe)](_0x31b86e(0xdb));if(_0x16ccfd)_0x16ccfd['textContent']=previewState[_0x31b86e(0x131)];if(_0x24fbde)_0x24fbde[_0x31b86e(0xd2)][_0x31b86e(0x109)](_0x31b86e(0xcc),previewState['currentMode']==='D1');if(_0x48b533)_0x48b533['classList']['toggle']('active',previewState['currentMode']==='D2');if(_0x317d9e)_0x317d9e['classList']['toggle']('active',previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x5b23d5){const _0x454673=a4_0x1205b9,_0x33fc35=document[_0x454673(0xfe)](_0x454673(0xdf)),_0x315776=document['getElementById']('previewNextPage'),_0x18fe4f=document[_0x454673(0xfe)]('previewPageInfo');if(!_0x33fc35||!_0x315776||!_0x18fe4f)return;_0x18fe4f['textContent']='Page\x20'+previewState[_0x454673(0x112)],_0x33fc35[_0x454673(0x121)]=previewState['currentPage']<=0x1,_0x315776['disabled']=!_0x5b23d5;}function setPreviewLoadingState(_0x447729){const _0x5160d9=a4_0x1205b9;previewState['isLoading']=_0x447729,setLoadingIndicator(_0x447729);const _0x45e1ab=document[_0x5160d9(0xfe)]('recent-matches-preview'),_0x2158c0=_0x45e1ab?_0x45e1ab['querySelector']('.matches-loading'):null,_0x15dff2=document['getElementById']('previewPrevPage'),_0x9fa743=document['getElementById']('previewNextPage'),_0x3f8bc5=document['getElementById'](_0x5160d9(0xf7)),_0x242f35=document['getElementById']('preview-d2-button'),_0x18c708=document[_0x5160d9(0xfe)]('applyFilterBtn'),_0x55125f=document['getElementById']('clearFilterBtn');if(_0x2158c0&&!_0x447729)_0x2158c0['style'][_0x5160d9(0x123)]='none';else _0x2158c0&&_0x447729&&(_0x2158c0['style'][_0x5160d9(0x123)]='block');!_0x447729&&_0x45e1ab&&!_0x45e1ab[_0x5160d9(0x12a)]('.match-card')&&!_0x45e1ab['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x45e1ab['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState[_0x5160d9(0x137)]?_0x5160d9(0x9f):'')+'.</div>');if(_0x15dff2)_0x15dff2['disabled']=_0x447729||previewState['currentPage']<=0x1;if(_0x9fa743)_0x9fa743[_0x5160d9(0x121)]=_0x447729;if(_0x3f8bc5)_0x3f8bc5['disabled']=_0x447729;if(_0x242f35)_0x242f35['disabled']=_0x447729;if(_0x18c708)_0x18c708['disabled']=_0x447729;if(_0x55125f)_0x55125f['disabled']=_0x447729;}function applyClientFilters(_0x215224){const _0x1311d0=a4_0x1205b9;if(!previewState['filterUsername'])return _0x215224;const _0x5e199e=previewState[_0x1311d0(0x137)]['toLowerCase']();return _0x215224['filter'](_0x3ac8e2=>{const _0xd80422=_0x1311d0,_0x4c273c=(_0x3ac8e2['winnerUsername']||'')[_0xd80422(0xe2)](),_0x2edece=(_0x3ac8e2[_0xd80422(0xad)]||'')[_0xd80422(0xe2)]();return _0x4c273c['includes'](_0x5e199e)||_0x2edece['includes'](_0x5e199e);});}function applyEnhancedClientFilters(_0x2e6bc2){const _0xbb1cdd=a4_0x1205b9;if(!hasEnhancedFilters())return _0x2e6bc2;return _0x2e6bc2[_0xbb1cdd(0xb2)](_0x56abac=>{const _0x57644e=_0xbb1cdd;if(previewState['enhancedFilters']['pilots']){const _0x15cced=previewState['enhancedFilters'][_0x57644e(0x12b)]['toLowerCase'](),_0x19a6bf=(_0x56abac[_0x57644e(0xac)]||'')['toLowerCase'](),_0x347194=(_0x56abac['loserUsername']||'')['toLowerCase']();if(!_0x19a6bf['includes'](_0x15cced)&&!_0x347194[_0x57644e(0xa8)](_0x15cced))return![];}if(previewState['enhancedFilters']['levels']){const _0x26331b=previewState[_0x57644e(0x128)]['levels']['toLowerCase'](),_0x59172a=(_0x56abac['mapPlayed']||'')[_0x57644e(0xe2)]();if(!_0x59172a[_0x57644e(0xa8)](_0x26331b))return![];}if(previewState[_0x57644e(0x128)]['subgames']['length']>0x0){const _0x1cfd07=_0x56abac['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames']['includes'](_0x1cfd07))return![];}return!![];});}function hasEnhancedFilters(){const _0x4c0fe1=a4_0x1205b9;return previewState['enhancedFilters']['pilots']||previewState[_0x4c0fe1(0x128)]['levels']||previewState[_0x4c0fe1(0x128)]['subgames']['length']>0x0;}function clearEnhancedFilters(){previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document['getElementById']('filter-pilots')['value']='',document['getElementById']('filter-levels')['value']='';const _0x228577=document['getElementById']('filter-subgames');for(let _0x346c14 of _0x228577['options']){_0x346c14['selected']=![];}}function jumpToPage(_0x5591b1){const _0x5acb5e=a4_0x1205b9,_0x10a56a=document['getElementById']('jump-to-page'),_0x34868b=previewState[_0x5acb5e(0x112)];let _0x267298=_0x34868b;switch(_0x5591b1){case'start':_0x267298=0x1;break;case _0x5acb5e(0x10d):_0x267298=Math[_0x5acb5e(0x118)](_0x34868b+0xa,previewState['totalPages']||_0x34868b+0xa);break;case'+1':_0x267298=_0x34868b+0x1;break;case'+5':_0x267298=_0x34868b+0x5;break;case'+10':_0x267298=_0x34868b+0xa;break;case'-1':_0x267298=Math['max'](0x1,_0x34868b-0x1);break;case'-5':_0x267298=Math['max'](0x1,_0x34868b-0x5);break;case'-10':_0x267298=Math[_0x5acb5e(0x118)](0x1,_0x34868b-0xa);break;case _0x5acb5e(0x148):const _0x533311=parseInt(_0x10a56a['value']);_0x533311&&_0x533311>0x0&&(_0x267298=_0x533311,_0x10a56a['value']='');break;}_0x267298!==_0x34868b&&_0x267298>0x0&&(previewState['currentPage']=_0x267298,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x24725f=a4_0x1205b9(0xc9)){const _0xabef15=a4_0x1205b9,_0x251751=document['getElementById']('recent-matches-preview'),_0x4c5cd=document[_0xabef15(0xfe)]('match-card-template');if(previewState['isLoading']||!_0x251751||!_0x4c5cd)return;_0x24725f==='current'&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)['forEach'](_0x19fcf0=>{const _0x8d3e07=_0xabef15;_0x19fcf0['includes']('previewCache_'+previewState['currentMode'])&&sessionStorage[_0x8d3e07(0x12c)](_0x19fcf0);}));let _0x5c2e03=previewState['currentPage'];if(_0x24725f==='next')_0x5c2e03++;else{if(_0x24725f===_0xabef15(0x13a))_0x5c2e03--;else _0x24725f===_0xabef15(0xc9)&&(_0x5c2e03=0x1,previewState[_0xabef15(0x132)]=null,previewState['lastVisible']=null);}if(_0x5c2e03<0x1)_0x5c2e03=0x1;const _0x162a31=previewState[_0xabef15(0x112)];previewState['currentPage']=_0x5c2e03,updatePreviewPaginationControls(!![]);const _0x319ff4={'filterUsername':previewState['filterUsername']},_0x24f2b1=getCacheKey(previewState['currentMode'],_0x5c2e03,_0x319ff4),_0xbab843=_0x24725f!=='current'?getCachedPage(_0x24f2b1):null;if(_0xbab843){console['log'](_0xabef15(0xea)+_0x5c2e03+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0xbab843['docsData']),updatePreviewPaginationControls(_0xbab843['hasNextPage']),setPreviewLoadingState(![]);return;}console['log']('Cache\x20miss\x20for\x20page\x20'+_0x5c2e03+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0x251751[_0xabef15(0xfb)]='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x3ed0ae=previewState[_0xabef15(0x131)]==='D1'?'approvedMatches':previewState['currentMode']==='D2'?'approvedMatchesD2':_0xabef15(0xd3),_0x24698d=previewState[_0xabef15(0x131)]==='D1'?'createdAt':_0xabef15(0xba);try{const _0x4bb0f6=collection(window['db'],_0x3ed0ae);let _0x118fc2=[orderBy(_0x24698d,_0xabef15(0xe9))];if(_0x5c2e03===0x1)console[_0xabef15(0x10b)](_0xabef15(0xfa)),_0x118fc2['push'](limit(previewState['matchesPerPage']));else{if(_0x24725f==='next'&&previewState['lastVisible'])console['log']('Loading\x20next\x20page\x20using\x20cursor'),_0x118fc2[_0xabef15(0x143)](startAfter(previewState['lastVisible'])),_0x118fc2['push'](limit(previewState[_0xabef15(0xa2)]));else{console[_0xabef15(0x10b)]('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x2aa935=_0x5c2e03*previewState['matchesPerPage'];_0x118fc2['push'](limit(_0x2aa935));}}const _0x31da53=query(_0x4bb0f6,..._0x118fc2),_0x1d83b1=await getDocs(_0x31da53);let _0x4412ea=_0x1d83b1['docs'];if(_0x5c2e03>0x1&&_0x24725f!=='next'){const _0x54500a=(_0x5c2e03-0x1)*previewState['matchesPerPage'];_0x4412ea=_0x4412ea['slice'](_0x54500a,_0x54500a+previewState[_0xabef15(0xa2)]);}if(_0x4412ea['length']===0x0){console[_0xabef15(0x10b)]('No\x20results\x20found\x20for\x20this\x20page');_0x24725f==='next'&&(previewState['currentPage']=_0x162a31,updatePreviewPaginationControls(![]));_0x251751['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?'\x20matching\x20filters':'')+_0xabef15(0xb0),setPreviewLoadingState(![]);return;}previewState[_0xabef15(0x132)]=_0x4412ea[0x0],previewState['lastVisible']=_0x4412ea[_0x4412ea['length']-0x1];const _0x3ba057=_0x4412ea[_0xabef15(0x99)](_0x14eaae=>({'id':_0x14eaae['id'],..._0x14eaae['data']()}));let _0x55e039=![];if(_0x4412ea['length']===previewState[_0xabef15(0xa2)]){const _0x38963b=query(_0x4bb0f6,orderBy(_0x24698d,_0xabef15(0xe9)),startAfter(previewState[_0xabef15(0xf6)]),limit(0x1)),_0x19069e=await getDocs(_0x38963b);_0x55e039=!_0x19069e[_0xabef15(0xe4)];}const _0x349635=applyClientFilters(_0x3ba057),_0x3e6eca={'docsData':_0x3ba057,'hasNextPage':_0x55e039};cachePage(getCacheKey(previewState['currentMode'],previewState[_0xabef15(0x112)],_0x319ff4),_0x3e6eca);if(_0x5c2e03>0x1&&_0x24725f!=='next')for(let _0x5d6d15=0x1;_0x5d6d15<_0x5c2e03;_0x5d6d15++){const _0x1b7c47=(_0x5d6d15-0x1)*previewState[_0xabef15(0xa2)],_0x5fe34d=_0x1b7c47+previewState[_0xabef15(0xa2)],_0x19e134=_0x1d83b1[_0xabef15(0xbc)][_0xabef15(0x138)](_0x1b7c47,_0x5fe34d);if(_0x19e134['length']>0x0){const _0x4dfa5e=_0x19e134['map'](_0x5b4820=>({'id':_0x5b4820['id'],..._0x5b4820[_0xabef15(0xd5)]()})),_0x3bcd39=!![];cachePage(getCacheKey(previewState['currentMode'],_0x5d6d15,_0x319ff4),{'docsData':_0x4dfa5e,'hasNextPage':_0x3bcd39}),console['log']('Cached\x20intermediary\x20page\x20'+_0x5d6d15);}}_0x349635[_0xabef15(0x114)]===0x0&&previewState[_0xabef15(0x137)]?_0x251751['innerHTML']=_0xabef15(0x13e)+previewState['filterUsername']+'\x22</div>':renderMatchCards(_0x349635),updatePreviewPaginationControls(_0x55e039);}catch(_0x28cfaa){console['error'](_0xabef15(0xd6)+previewState['currentMode']+_0xabef15(0x122),_0x28cfaa),_0x251751['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x28cfaa[_0xabef15(0x9c)]+'</div>',updatePreviewPaginationControls(![]),previewState[_0xabef15(0x112)]=_0x162a31;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x3cbfe0){const _0x20655e=a4_0x1205b9,_0x26c288=document[_0x20655e(0xfe)](_0x20655e(0xb6)),_0x1d9305=document['getElementById'](_0x20655e(0x106));if(!_0x26c288||!_0x1d9305)return;!_0x26c288[_0x20655e(0x12a)]('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x26c288['innerHTML']='');if(!_0x3cbfe0||_0x3cbfe0[_0x20655e(0x114)]===0x0){if(!_0x26c288['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const _0xf14aac=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?'\x20matching\x20filters':'';_0x26c288['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0xf14aac+'.</div>';}return;}const _0x14bb25=applyEnhancedClientFilters(_0x3cbfe0);if(_0x14bb25['length']===0x0){_0x26c288[_0x20655e(0xfb)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x253522=_0x14bb25[_0x20655e(0x99)](_0x242707=>getAllCommentsForMatch(_0x242707['id']));let _0x5cce81=[];try{_0x5cce81=await Promise[_0x20655e(0x130)](_0x253522);}catch(_0x33b8a9){console[_0x20655e(0xbb)](_0x20655e(0x11e),_0x33b8a9),_0x5cce81=_0x14bb25[_0x20655e(0x99)](()=>[]);}const _0x2580c2={};_0x5cce81['forEach']((_0x5e818c,_0x5dffc3)=>{_0x2580c2[_0x14bb25[_0x5dffc3]['id']]=_0x5e818c||[];}),_0x14bb25['forEach'](_0x53c2b7=>{const _0x8a84a0=_0x20655e,_0x30249d=_0x1d9305[_0x8a84a0(0x11f)]['cloneNode'](!![]),_0x4ec4b8=_0x30249d['querySelector']('.match-display-wrapper'),_0x35e3c4=_0x30249d['querySelector']('.match-card'),_0x1f3deb=getEloRankClass(_0x53c2b7[_0x8a84a0(0xec)]);_0x35e3c4['classList']['add'](_0x8a84a0(0x107)+_0x1f3deb),_0x35e3c4['querySelector'](_0x8a84a0(0x97))['textContent']=_0x53c2b7['mapPlayed']||'Unknown\x20Map',_0x35e3c4['querySelector'](_0x8a84a0(0x126))['textContent']=formatDate(_0x53c2b7['approvedAt']||_0x53c2b7['createdAt']);const _0x162d25=_0x35e3c4['querySelector']('.player.winner\x20.player-name');_0x162d25['textContent']=_0x53c2b7['winnerUsername']||_0x8a84a0(0xc3),_0x162d25['style']['color']=getEloColor(_0x53c2b7[_0x8a84a0(0xec)]),_0x35e3c4['querySelector'](_0x8a84a0(0xa9))[_0x8a84a0(0xae)]=_0x53c2b7['winnerScore']??0x0;const _0x5cef29=_0x35e3c4[_0x8a84a0(0x12a)]('.player.winner\x20.player-suicides'),_0x585b7b=_0x53c2b7['winnerSuicides']||0x0;_0x5cef29[_0x8a84a0(0xae)]='S:\x20'+_0x585b7b;const _0x346389=_0x35e3c4['querySelector']('.player.loser\x20.player-name');_0x346389['textContent']=_0x53c2b7[_0x8a84a0(0xad)]||_0x8a84a0(0xc3),_0x346389['style']['color']=getEloColor(_0x53c2b7['loserOldElo']),_0x35e3c4['querySelector']('.player.loser\x20.player-score')[_0x8a84a0(0xae)]=_0x53c2b7[_0x8a84a0(0x140)]??0x0;const _0x540595=_0x35e3c4['querySelector'](_0x8a84a0(0x145)),_0x57aefc=_0x53c2b7[_0x8a84a0(0x13d)]||0x0;_0x540595[_0x8a84a0(0xae)]='S:\x20'+_0x57aefc;const _0x53f9be=_0x35e3c4['querySelector']('.match-subgame');if(_0x53f9be){if(_0x53c2b7['subgameType']&&_0x53c2b7[_0x8a84a0(0x129)]['trim']()!==''){_0x53f9be['textContent']=_0x53c2b7[_0x8a84a0(0x129)],_0x53f9be['style']['display']='block';const _0x1ea0c9=getSubgameClass(_0x53c2b7[_0x8a84a0(0x129)]);_0x1ea0c9&&_0x53f9be['classList'][_0x8a84a0(0xe8)](_0x1ea0c9);}else _0x53f9be['textContent']='Standard\x20Match',_0x53f9be[_0x8a84a0(0xc5)]['display']=_0x8a84a0(0x11b),_0x53f9be[_0x8a84a0(0xc5)]['opacity']='0.6';}const _0xc1088f=_0x35e3c4['querySelector'](_0x8a84a0(0x113)),_0x4410b4=_0x35e3c4['querySelector'](_0x8a84a0(0xca)),_0x221ed8=_0x53c2b7[_0x8a84a0(0xc7)]||'',_0x4d7f93=_0x53c2b7[_0x8a84a0(0xd9)]||'',_0x1a7573=_0x53c2b7[_0x8a84a0(0xba)]||_0x53c2b7[_0x8a84a0(0x13c)],_0x5c6902=filterComment(_0x221ed8,_0x53c2b7['winnerUsername'],_0x1a7573),_0x2b222b=filterComment(_0x4d7f93,_0x53c2b7['loserUsername'],_0x1a7573);_0xc1088f['textContent']='\x22'+truncateComment(_0x221ed8)+'\x22',_0x4410b4['textContent']='\x22'+truncateComment(_0x4d7f93)+'\x22';_0x221ed8&&!isUsernameMuted(_0x53c2b7['winnerUsername'],_0x1a7573)?_0xc1088f['onclick']=()=>showPreviewCommentPopup(_0x5c6902,_0x53c2b7[_0x8a84a0(0xac)]||'Winner',getEloColor(_0x53c2b7['winnerOldElo'])):(_0xc1088f['textContent']=_0x5c6902===_0x8a84a0(0xb1)?'Muted.':'-',_0xc1088f['style'][_0x8a84a0(0xf4)]='default',_0xc1088f[_0x8a84a0(0xb3)]=null);_0x4d7f93&&!isUsernameMuted(_0x53c2b7['loserUsername'])?_0x4410b4['onclick']=()=>showPreviewCommentPopup(_0x2b222b,_0x53c2b7['loserUsername']||'Loser',getEloColor(_0x53c2b7['loserOldElo'])):(_0x4410b4['textContent']=_0x2b222b==='Muted.'?'Muted.':'-',_0x4410b4['style'][_0x8a84a0(0xf4)]='default',_0x4410b4[_0x8a84a0(0xb3)]=null);const _0x24509f=_0x4ec4b8?.[_0x8a84a0(0x12a)](_0x8a84a0(0xa1));if(!_0x24509f)console['warn'](_0x8a84a0(0x119));else{const _0x4deeea=_0x24509f['querySelector']('.comments-container'),_0x1175fc=_0x4deeea?.['querySelector']('.no-comments-message'),_0x47f033=_0x24509f['querySelector']('.add-comment-btn');if(_0x4deeea){while(_0x4deeea['firstChild']&&_0x4deeea['firstChild']!==_0x1175fc){_0x4deeea['removeChild'](_0x4deeea['firstChild']);}_0x47f033&&_0x47f033['addEventListener']('click',()=>{showAddCommentPopup(_0x53c2b7['id']);});const _0x55ce31=_0x2580c2[_0x53c2b7['id']]||[];if(_0x55ce31['length']>0x0){if(_0x1175fc)_0x1175fc[_0x8a84a0(0xc5)]['display']='none';const _0x2e8ea1=(_0x16e18f,_0x2c3784)=>{const _0x355e66=_0x16e18f['split']('\x20');if(_0x355e66['length']<=_0x2c3784)return _0x16e18f;return _0x355e66['slice'](0x0,_0x2c3784)['join']('\x20')+'...';};_0x55ce31['forEach'](_0x10f798=>{const _0x41e4e3=_0x8a84a0,_0x189e19=document['createElement']('div');if(_0x10f798['type']==='demo'){_0x189e19['className']='demo-link',_0x189e19[_0x41e4e3(0xfb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x10f798['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x10f798['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x10f798['description']||_0x41e4e3(0x11d))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x699baf=window['auth']['currentUser'],_0x49cf38=_0x699baf&&_0x10f798['userId']===_0x699baf[_0x41e4e3(0x144)];if(_0x49cf38){const _0x36280c=document['createElement']('button');_0x36280c['className']=_0x41e4e3(0xa4),_0x36280c['innerHTML']='×',_0x36280c[_0x41e4e3(0x134)](_0x41e4e3(0xee),'Delete\x20demo'),_0x36280c['addEventListener'](_0x41e4e3(0xa5),_0x4d814b=>{const _0x12a632=_0x41e4e3;_0x4d814b[_0x12a632(0xe1)](),_0x4d814b['stopPropagation'](),deleteComment(_0x10f798['id'],_0x189e19);}),_0x189e19['appendChild'](_0x36280c);}}else{_0x189e19['className']=_0x41e4e3(0x116);const _0x291203=isUsernameMuted(_0x10f798[_0x41e4e3(0x10a)],_0x10f798['timestamp']),_0x39f858=_0x291203?'Muted.':_0x2e8ea1(_0x10f798[_0x41e4e3(0x10c)]||'',0xf),_0x2498fa=_0x10f798['username']||'Anonymous',_0x4aa65c=window[_0x41e4e3(0x12f)]['currentUser'],_0x55419b=_0x4aa65c&&_0x10f798['userId']===_0x4aa65c[_0x41e4e3(0x144)];let _0x4e2da7='';_0x55419b&&(_0x4e2da7='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');_0x189e19['innerHTML']=_0x4e2da7+'<strong>'+_0x2498fa+':</strong>\x20\x22'+_0x39f858+'\x22';if(_0x55419b){const _0x1a57e0=_0x189e19[_0x41e4e3(0x12a)]('.delete-comment-btn');_0x1a57e0&&_0x1a57e0[_0x41e4e3(0xc4)](_0x41e4e3(0xa5),_0x5e7d33=>{const _0x590634=_0x41e4e3;_0x5e7d33[_0x590634(0x108)](),deleteComment(_0x10f798['id'],_0x189e19);});}!_0x291203?_0x189e19[_0x41e4e3(0xc4)]('click',()=>{showFullCommentLightbox(_0x10f798);}):_0x189e19[_0x41e4e3(0xc5)]['cursor']='default';}_0x4deeea['insertBefore'](_0x189e19,_0x4deeea['firstChild']);});}else{if(_0x1175fc)_0x1175fc['style'][_0x8a84a0(0x123)]='block';}}}const _0x5a2dc2=_0x35e3c4['querySelector']('.match-demo-links');if(_0x5a2dc2){const _0x41b16d=_0x35e3c4['querySelector']('.winner-demo-link'),_0x47999d=_0x35e3c4['querySelector']('.loser-demo-link'),_0x1d2797=_0x53c2b7['winnerDemoLink']||null,_0x2a49cb=_0x53c2b7['loserDemoLink']||_0x53c2b7['demoLink']||null;console['log']('Match\x20'+_0x53c2b7['id']+'\x20demo\x20links:',{'winner':_0x1d2797,'loser':_0x2a49cb}),_0x41b16d&&(_0x1d2797?(_0x41b16d['href']=_0x1d2797,_0x41b16d['style'][_0x8a84a0(0x123)]='flex',_0x41b16d[_0x8a84a0(0x115)]=_0x53c2b7['winnerUsername']+'\x27s\x20Demo'):_0x41b16d['style']['display']='none'),_0x47999d&&(_0x2a49cb?(_0x47999d['href']=_0x2a49cb,_0x47999d['style']['display']='flex',_0x47999d['title']=_0x53c2b7['loserUsername']+_0x8a84a0(0xaf)):_0x47999d['style']['display']='none'),_0x1d2797&&_0x41b16d||_0x2a49cb&&_0x47999d?_0x5a2dc2['style'][_0x8a84a0(0x123)]='flex':_0x5a2dc2['style']['display']='none';}_0x26c288['appendChild'](_0x30249d);});}function getSubgameClass(_0xb3156){const _0x34506e=a4_0x1205b9,_0x1f568c={'Fusion\x20Match':'fusion-match','≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':_0x34506e(0x142),'Weapon\x20Imbalance':_0x34506e(0x9d),'Blind\x20Match':'blind-match','Rematch':'rematch','Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':'altered-powerups','Mega\x20Match':'mega-match','Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x1f568c[_0xb3156]||'';}async function deleteComment(_0x72e324,_0x551137){const _0x88837a=a4_0x1205b9,_0x230bb1=window['auth']['currentUser'];if(!_0x230bb1){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x5df2ca=doc(window['db'],'matchComments',_0x72e324),_0x12361c=await getDoc(_0x5df2ca);if(!_0x12361c['exists']()){alert(_0x88837a(0x149));return;}const _0x474fda=_0x12361c['data']();if(_0x474fda['userId']!==_0x230bb1['uid']){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x5df2ca);if(_0x551137&&_0x551137[_0x88837a(0xa0)]){_0x551137['parentNode'][_0x88837a(0x147)](_0x551137);const _0x1323d8=_0x551137['closest'](_0x88837a(0x146));if(_0x1323d8&&!_0x1323d8['querySelector'](_0x88837a(0x120))){const _0x888e5e=_0x1323d8[_0x88837a(0x12a)](_0x88837a(0xc8));if(_0x888e5e)_0x888e5e['style'][_0x88837a(0x123)]='block';}}console[_0x88837a(0x10b)](_0x88837a(0x103));}catch(_0x57d00d){console[_0x88837a(0xbb)](_0x88837a(0x127),_0x57d00d),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x57d00d['message']);}}async function getAllCommentsForMatch(_0x2c0028){const _0x35823a=a4_0x1205b9;if(!_0x2c0028)return[];try{const _0x17b565=collection(window['db'],_0x35823a(0xcd)),_0x86b469=query(_0x17b565,where('matchId','==',_0x2c0028),orderBy('timestamp','desc')),_0x12f006=await getDocs(_0x86b469);if(_0x12f006['empty'])return[];return _0x12f006[_0x35823a(0xbc)]['map'](_0x40418e=>({'id':_0x40418e['id'],..._0x40418e[_0x35823a(0xd5)]()}));}catch(_0x3a2898){return console['error']('Error\x20fetching\x20comments:',_0x3a2898),[];}}function a4_0x2cf8(){const _0x2baa7a=['\x20days\x20ago','.match-map','className','map','Submitting\x20comment\x20as:','commentText','message','weapon-imbalance','none','\x20matching\x20filters','parentNode','.community-comments-section','matchesPerPage','commentMatchId','delete-comment-btn','click','commentAddPopup','commentPopupPreview','includes','.player.winner\x20.player-score','displayName','Option','winnerUsername','loserUsername','textContent','\x27s\x20Demo','.</div>','Muted.','filter','onclick','.jump-btn','userProfiles','recent-matches-preview','commentOverlayPreview','filter-pilots','dataset','approvedAt','error','docs','abs','.popup-actions','key','popup-actions','preview-d2-button','isLoading','Unknown','addEventListener','style','currentUser','winnerComment','.no-comments-message','current','.comment.loser-comment','value','active','matchComments','#50C878','#ff4444','Demo:\x20','.option-content','classList','approvedMatchesD3','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','data','Error\x20fetching\x20','unranked','N/A','loserComment','addCommentForm','preview-d3-button','Report','toLocaleString','.option-tab.active','previewPrevPage','console','preventDefault','toLowerCase','demoLink','empty','__proto__','closeAddCommentPopup','parse','add','desc','Rendering\x20page\x20','closeCommentPopupPreview','winnerOldElo','Demo\x20link','aria-label','required','Comment\x20from\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?','warn','getTime','cursor','reportCommentButton','lastVisible','preview-d1-button','div','commentAddOverlay','Loading\x20first\x20page\x20from\x20Firestore','innerHTML','querySelectorAll','forEach','getElementById','info','selectedOptions','color','#d32f2f','Comment\x20deleted\x20successfully','popup-btn\x20close-btn','comment','match-card-template','winner-','stopPropagation','toggle','username','log','text','end','table','commentPopupTitlePreview','apply','Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.','currentPage','.comment.winner-comment','length','title','comment-item','trim','max','Comments\x20section\x20not\x20found\x20in\x20template','demo','block','appendChild','No\x20description\x20provided','Error\x20fetching\x20comments\x20batch:','content','.comment-item','disabled','\x20matches:','display','bind','popup-btn\x20report-btn','.match-date','Error\x20deleting\x20comment:','enhancedFilters','subgameType','querySelector','pilots','removeItem','Unknown\x20User','body','auth','all','currentMode','firstVisible','Submit','setAttribute','center','removeAttribute','filterUsername','slice','levels','prev','button','createdAt','loserSuicides','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22','2025-07-02','loserScore','{}.constructor(\x22return\x20this\x22)(\x20)','missiles-6plus','push','uid','.player.loser\x20.player-suicides','.comments-container','removeChild','input','Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.'];a4_0x2cf8=function(){return _0x2baa7a;};return a4_0x2cf8();}async function submitComment(_0x4eae68){const _0x26dbd7=a4_0x1205b9;_0x4eae68['preventDefault']();if(!window['auth']||!window['db']){console[_0x26dbd7(0xbb)]('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready');return;}const _0x2751fd=window['auth'][_0x26dbd7(0xc6)];if(!_0x2751fd){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x5d94d3=document[_0x26dbd7(0xfe)](_0x26dbd7(0xa3))?.[_0x26dbd7(0xcb)],_0x183bb1=document['getElementById'](_0x26dbd7(0x9b))?.['value']?.['trim']();if(!_0x5d94d3||!_0x183bb1){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x5aec74=_0x183bb1['split'](/\s+/)['filter'](_0x458486=>_0x458486['length']>0x0)['length'];if(_0x5aec74>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.');return;}const _0x32214b=document[_0x26dbd7(0x12a)]('.submit-comment-btn');_0x32214b&&(_0x32214b[_0x26dbd7(0x121)]=!![],_0x32214b[_0x26dbd7(0xae)]='Submitting...');try{let _0x172960='Anonymous';try{const _0x52479a=doc(window['db'],_0x26dbd7(0xb5),_0x2751fd['uid']),_0x1e1e3e=await getDoc(_0x52479a);if(_0x1e1e3e['exists']()){const _0x28f80d=_0x1e1e3e[_0x26dbd7(0xd5)]();_0x28f80d['username']&&(_0x172960=_0x28f80d[_0x26dbd7(0x10a)]);}_0x172960==='Anonymous'&&_0x2751fd['displayName']&&(_0x172960=_0x2751fd['displayName']);}catch(_0x2a1168){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x2a1168),_0x2751fd['displayName']&&(_0x172960=_0x2751fd[_0x26dbd7(0xaa)]);}const _0x4804d5={'matchId':_0x5d94d3,'userId':_0x2751fd[_0x26dbd7(0x144)],'username':_0x172960,'text':_0x183bb1,'timestamp':serverTimestamp()};console['log'](_0x26dbd7(0x9a),_0x172960);const _0x4d87b6=collection(window['db'],'matchComments');await addDoc(_0x4d87b6,_0x4804d5),console[_0x26dbd7(0x10b)]('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x763189){console['error']('Error\x20submitting\x20comment:',_0x763189),alert('Failed\x20to\x20add\x20comment:\x20'+_0x763189[_0x26dbd7(0x9c)]),_0x32214b&&(_0x32214b['disabled']=![],_0x32214b['textContent']='Submit');}}function closeAddCommentPopup(){const _0x4dc2ba=a4_0x1205b9,_0xd4defe=document['getElementById']('commentAddPopup'),_0x1a8d71=document['getElementById']('commentAddOverlay');if(_0xd4defe)_0xd4defe[_0x4dc2ba(0xc5)]['display']='none';if(_0x1a8d71)_0x1a8d71['style']['display']='none';}function a4_0x44bf(_0x5924d4,_0x5c0d68){const _0xe953d1=a4_0x2cf8();return a4_0x44bf=function(_0x3aa641,_0x38622e){_0x3aa641=_0x3aa641-0x96;let _0x2cf88b=_0xe953d1[_0x3aa641];return _0x2cf88b;},a4_0x44bf(_0x5924d4,_0x5c0d68);}function showAddCommentPopup(_0x220338){const _0x5d8ae5=a4_0x1205b9,_0x262684=window['auth'][_0x5d8ae5(0xc6)];if(!_0x262684){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo');return;}let _0x36040c=document['getElementById'](_0x5d8ae5(0xa6)),_0x5157fe=document['getElementById'](_0x5d8ae5(0xf9));!_0x36040c&&(_0x36040c=document['createElement']('div'),_0x36040c['id']='commentAddPopup',_0x36040c[_0x5d8ae5(0x98)]='comment-popup',document['body']['appendChild'](_0x36040c));!_0x5157fe&&(_0x5157fe=document['createElement'](_0x5d8ae5(0xf8)),_0x5157fe['id']='commentAddOverlay',_0x5157fe['className']='comment-overlay',document[_0x5d8ae5(0x12e)]['appendChild'](_0x5157fe));_0x36040c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x220338+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x36040c['style'][_0x5d8ae5(0x123)]=_0x5d8ae5(0x11b),_0x5157fe['style']['display']='block',document['getElementById'](_0x5d8ae5(0xe6))['addEventListener']('click',closeAddCommentPopup),_0x5157fe['addEventListener']('click',closeAddCommentPopup);const _0x3b9585=_0x36040c['querySelectorAll']('.option-tab');_0x3b9585['forEach'](_0x1a1a4a=>{const _0x14064f=_0x5d8ae5;_0x1a1a4a['addEventListener'](_0x14064f(0xa5),function(){const _0x16df54=_0x14064f;_0x3b9585[_0x16df54(0xfd)](_0x504c31=>_0x504c31['classList']['remove']('active')),document['querySelectorAll'](_0x16df54(0xd1))[_0x16df54(0xfd)](_0x317441=>_0x317441[_0x16df54(0xc5)][_0x16df54(0x123)]=_0x16df54(0x9e)),this['classList']['add']('active');const _0x25d3a9=this['dataset']['option'];document['getElementById'](_0x25d3a9+_0x16df54(0xab))['style']['display']=_0x16df54(0x11b),_0x25d3a9===_0x16df54(0x11a)?(document['getElementById']('demoLink')['setAttribute']('required',''),document['getElementById']('commentText')[_0x16df54(0x136)]('required')):(document['getElementById'](_0x16df54(0xe3))[_0x16df54(0x136)]('required'),document[_0x16df54(0xfe)](_0x16df54(0x9b))['setAttribute'](_0x16df54(0xef),''));});}),document['getElementById']('commentText')['setAttribute'](_0x5d8ae5(0xef),''),document['getElementById']('demoLink')['removeAttribute']('required'),setupWordCounter(_0x5d8ae5(0x9b),'wordCount',0xf),setupWordCounter('demoDescription','demoWordCount',0x14),document['getElementById'](_0x5d8ae5(0xda))[_0x5d8ae5(0xc4)]('submit',submitCommentOrDemo);}function setupWordCounter(_0x13d605,_0x30f1aa,_0x43e1da){const _0x36c03c=a4_0x1205b9,_0x41f5ee=document['getElementById'](_0x13d605),_0x53d592=document[_0x36c03c(0xfe)](_0x30f1aa);if(!_0x41f5ee||!_0x53d592)return;_0x7d5a9d(),_0x41f5ee['addEventListener']('input',_0x7d5a9d);function _0x7d5a9d(){const _0x490aed=_0x36c03c,_0x1929c4=_0x41f5ee['value']['trim'](),_0x3754b7=_0x1929c4?_0x1929c4['split'](/\s+/)['filter'](_0x52b3f0=>_0x52b3f0['length']>0x0)['length']:0x0;_0x53d592['textContent']=_0x3754b7,_0x3754b7>_0x43e1da?_0x53d592['style'][_0x490aed(0x101)]=_0x490aed(0xcf):_0x53d592['style'][_0x490aed(0x101)]='#aaa';}}async function submitCommentOrDemo(_0x2c241d){const _0x5e53ca=a4_0x1205b9;_0x2c241d['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x4292d9=window['auth']['currentUser'];if(!_0x4292d9){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x9c8746=document['getElementById']('commentMatchId')[_0x5e53ca(0xcb)],_0x4ecce9=document['querySelector'](_0x5e53ca(0xde))['dataset']['option'];let _0x48395e='Anonymous';try{const _0x2db05d=doc(window['db'],'userProfiles',_0x4292d9['uid']),_0xd00a35=await getDoc(_0x2db05d);if(_0xd00a35['exists']()){const _0xe502b6=_0xd00a35['data']();_0xe502b6[_0x5e53ca(0x10a)]&&(_0x48395e=_0xe502b6['username']);}_0x48395e==='Anonymous'&&_0x4292d9['displayName']&&(_0x48395e=_0x4292d9[_0x5e53ca(0xaa)]);}catch(_0x198bc6){console[_0x5e53ca(0xf2)]('Failed\x20to\x20fetch\x20username:',_0x198bc6),_0x4292d9['displayName']&&(_0x48395e=_0x4292d9[_0x5e53ca(0xaa)]);}const _0x332bbd=document[_0x5e53ca(0x12a)]('.submit-comment-btn');_0x332bbd&&(_0x332bbd['disabled']=!![],_0x332bbd['textContent']='Submitting...');try{if(_0x4ecce9==='comment'){const _0x2dbff6=document['getElementById']('commentText')['value'][_0x5e53ca(0x117)]();if(!_0x2dbff6){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x332bbd['disabled']=![],_0x332bbd['textContent']='Submit';return;}const _0x7c8ec9=_0x2dbff6['split'](/\s+/)['filter'](_0x3acd7f=>_0x3acd7f[_0x5e53ca(0x114)]>0x0)[_0x5e53ca(0x114)];if(_0x7c8ec9>0xf){alert(_0x5e53ca(0xd4)),_0x332bbd['disabled']=![],_0x332bbd['textContent']='Submit';return;}const _0xf1f61f={'matchId':_0x9c8746,'userId':_0x4292d9['uid'],'username':_0x48395e,'text':_0x2dbff6,'type':_0x5e53ca(0x105),'timestamp':serverTimestamp()},_0x3a0e47=collection(window['db'],'matchComments');await addDoc(_0x3a0e47,_0xf1f61f);}else{const _0x37c423=document['getElementById'](_0x5e53ca(0xe3))[_0x5e53ca(0xcb)]['trim'](),_0x400996=document['getElementById']('demoDescription')['value']['trim']()||_0x5e53ca(0xed);if(!_0x37c423){alert('Please\x20enter\x20a\x20demo\x20link'),_0x332bbd['disabled']=![],_0x332bbd['textContent']=_0x5e53ca(0x133);return;}try{new URL(_0x37c423);}catch(_0x260e39){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x332bbd['disabled']=![],_0x332bbd[_0x5e53ca(0xae)]='Submit';return;}const _0x4bf53e=_0x400996['split'](/\s+/)['filter'](_0x5df488=>_0x5df488['length']>0x0)['length'];if(_0x4bf53e>0x14){alert(_0x5e53ca(0x111)),_0x332bbd['disabled']=![],_0x332bbd[_0x5e53ca(0xae)]='Submit';return;}const _0x13e71f={'matchId':_0x9c8746,'userId':_0x4292d9[_0x5e53ca(0x144)],'username':_0x48395e,'demoLink':_0x37c423,'description':_0x400996,'type':_0x5e53ca(0x11a),'text':_0x5e53ca(0xd0)+_0x400996,'timestamp':serverTimestamp()},_0x9a4f87=collection(window['db'],'matchComments');await addDoc(_0x9a4f87,_0x13e71f);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0xc36f2f){console['error']('Error\x20submitting:',_0xc36f2f),alert('Failed\x20to\x20submit:\x20'+_0xc36f2f['message']),_0x332bbd&&(_0x332bbd['disabled']=![],_0x332bbd[_0x5e53ca(0xae)]=_0x5e53ca(0x133));}}function getEloRankClass(_0x188873){const _0x3d0ab2=a4_0x1205b9,_0x7c2329=Number(_0x188873);if(_0x7c2329>=0x7d0)return'emerald';else{if(_0x7c2329>=0x708)return'gold';else{if(_0x7c2329>=0x640)return'silver';else{if(_0x7c2329>=0x578)return'bronze';else return _0x3d0ab2(0xd7);}}}}function showPreviewCommentPopup(_0x22c91b,_0x1db0ea,_0x176657='#fff'){const _0x2ffd6b=a4_0x1205b9,_0x1fef50=document[_0x2ffd6b(0xfe)]('commentPopupPreview'),_0x2c8a64=document['getElementById']('commentOverlayPreview'),_0x2fc97d=document['getElementById']('commentPopupTitlePreview'),_0x154c57=document[_0x2ffd6b(0xfe)]('commentPopupContentPreview'),_0x41b12a=document['getElementById'](_0x2ffd6b(0xf5));if(!_0x1fef50||!_0x2c8a64||!_0x2fc97d||!_0x154c57||!_0x41b12a)return;_0x1fef50[_0x2ffd6b(0xb9)][_0x2ffd6b(0x9b)]=_0x22c91b,_0x1fef50['dataset']['commentUser']=_0x1db0ea,_0x2fc97d[_0x2ffd6b(0xc5)][_0x2ffd6b(0x101)]=_0x176657,_0x2fc97d[_0x2ffd6b(0xae)]='Comment\x20from\x20'+_0x1db0ea,_0x154c57['textContent']=_0x22c91b,_0x41b12a['onclick']=reportComment,_0x1fef50[_0x2ffd6b(0xc5)][_0x2ffd6b(0x123)]=_0x2ffd6b(0x11b),_0x2c8a64['style']['display']='block';}function closePreviewCommentPopup(){const _0x1c1958=a4_0x1205b9,_0x1d9831=document['getElementById']('commentPopupPreview'),_0x455744=document['getElementById']('commentOverlayPreview');if(_0x1d9831)_0x1d9831['style'][_0x1c1958(0x123)]='none';if(_0x455744)_0x455744['style']['display']='none';}async function reportComment(){const _0x3fc446=a4_0x1205b9,_0x503da1=window['auth']['currentUser'];if(!_0x503da1){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm(_0x3fc446(0xf1)))return;try{const _0x41400a=document['getElementById'](_0x3fc446(0xa7)),_0x463bc8={'commentAuthor':_0x41400a[_0x3fc446(0xb9)]['commentUser']||_0x3fc446(0x12d),'commentText':_0x41400a['dataset']['commentText']||'','matchId':previewState['currentMatchId']||'','reportedBy':_0x503da1['uid'],'reporterUsername':_0x503da1[_0x3fc446(0xaa)]||'Anonymous\x20User','reportedAt':serverTimestamp()},_0x3a397d=collection(window['db'],'badComments');await addDoc(_0x3a397d,_0x463bc8),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x2eb27f){console['error']('Error\x20reporting\x20comment:',_0x2eb27f),alert('Failed\x20to\x20report\x20comment:\x20'+_0x2eb27f[_0x3fc446(0x9c)]);}}function showFullCommentLightbox(_0x527a34){const _0x30d208=a4_0x1205b9;if(isUsernameMuted(_0x527a34[_0x30d208(0x10a)]))return;const _0xe57191=document['getElementById']('commentPopupPreview'),_0x4adf38=document['getElementById'](_0x30d208(0xb7)),_0x2d1f8d=document[_0x30d208(0xfe)](_0x30d208(0x10f)),_0x49bac4=document[_0x30d208(0xfe)]('commentPopupContentPreview');if(!_0xe57191||!_0x4adf38||!_0x2d1f8d||!_0x49bac4)return;_0x2d1f8d[_0x30d208(0xc5)]['color']='#fff',_0x2d1f8d['textContent']=_0x30d208(0xf0)+_0x527a34['username'];if(_0x527a34['timestamp']){const _0x2daaf2=new Date(_0x527a34['timestamp']['seconds']*0x3e8),_0x944f82=_0x2daaf2[_0x30d208(0xdd)]();_0x49bac4[_0x30d208(0xfb)]='<p>'+_0x527a34[_0x30d208(0x10c)]+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x944f82+'</small>';}else _0x49bac4['textContent']=_0x527a34[_0x30d208(0x10c)];_0xe57191['dataset']['commentId']=_0x527a34['id']||'',_0xe57191['dataset']['commentUser']=_0x527a34['username']||'',_0xe57191[_0x30d208(0xb9)][_0x30d208(0x9b)]=_0x527a34[_0x30d208(0x10c)]||'',_0xe57191['dataset']['matchId']=_0x527a34['matchId']||'';const _0x53d69c=_0xe57191['querySelector'](_0x30d208(0xbe))||document['createElement'](_0x30d208(0xf8));!_0xe57191['querySelector'](_0x30d208(0xbe))?(_0x53d69c['className']=_0x30d208(0xc0),_0x53d69c['style'][_0x30d208(0x123)]='flex',_0x53d69c['style']['justifyContent']=_0x30d208(0x135),_0x53d69c[_0x30d208(0xc5)]['gap']='10px',_0x53d69c[_0x30d208(0xc5)]['marginTop']='15px',_0xe57191['appendChild'](_0x53d69c)):_0x53d69c['innerHTML']='';const _0x260db0=document['createElement']('button');_0x260db0[_0x30d208(0xae)]='Close',_0x260db0[_0x30d208(0x98)]=_0x30d208(0x104),_0x260db0['id']=_0x30d208(0xeb),_0x260db0['addEventListener']('click',closePreviewCommentPopup);const _0x4eb72a=document['createElement'](_0x30d208(0x13b));_0x4eb72a['textContent']=_0x30d208(0xdc),_0x4eb72a['className']=_0x30d208(0x125),_0x4eb72a[_0x30d208(0xc5)]['backgroundColor']=_0x30d208(0x102),_0x4eb72a[_0x30d208(0xc4)]('click',reportComment),_0x53d69c[_0x30d208(0x11c)](_0x260db0),_0x53d69c['appendChild'](_0x4eb72a),_0xe57191[_0x30d208(0xc5)]['display']='block',_0x4adf38['style']['display']='block';}export function setupPreviewEventListeners(){const _0x37bbc0=a4_0x1205b9,_0x29d132=document['getElementById'](_0x37bbc0(0xdf)),_0x3f6591=document['getElementById']('previewNextPage'),_0x8a0a3e=document['getElementById']('preview-d1-button'),_0x1e3452=document['getElementById']('preview-d2-button'),_0x2c3965=document['getElementById']('preview-d3-button'),_0x4771af=document[_0x37bbc0(0xfe)]('filter-toggle-button'),_0x553c15=document['getElementById']('enhanced-filter-section');if(!_0x29d132||!_0x3f6591||!_0x8a0a3e||!_0x1e3452||!_0x2c3965||!_0x4771af||!_0x553c15){console['warn']('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}_0x29d132['addEventListener']('click',()=>{const _0x27a14d=_0x37bbc0;if(!_0x29d132[_0x27a14d(0x121)])loadRecentMatchesPreview('prev');}),_0x3f6591[_0x37bbc0(0xc4)](_0x37bbc0(0xa5),()=>{const _0x4839a6=_0x37bbc0;if(!_0x3f6591[_0x4839a6(0x121)])loadRecentMatchesPreview('next');}),_0x8a0a3e['addEventListener'](_0x37bbc0(0xa5),()=>{const _0x57c258=_0x37bbc0;previewState[_0x57c258(0x131)]!=='D1'&&!previewState['isLoading']&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x1e3452[_0x37bbc0(0xc4)]('click',()=>{const _0xe5b24=_0x37bbc0;previewState['currentMode']!=='D2'&&!previewState[_0xe5b24(0xc2)]&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0xe5b24(0xc9)));}),_0x2c3965['addEventListener']('click',()=>{const _0x5142a0=_0x37bbc0;previewState['currentMode']!=='D3'&&!previewState['isLoading']&&(previewState[_0x5142a0(0x131)]='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x4771af&&_0x553c15&&_0x4771af[_0x37bbc0(0xc4)](_0x37bbc0(0xa5),()=>{const _0x53b340=_0x37bbc0,_0x296797=_0x553c15['style'][_0x53b340(0x123)]!=='none';_0x553c15['style']['display']=_0x296797?'none':'block',_0x4771af['classList'][_0x53b340(0x109)](_0x53b340(0xcc),!_0x296797);});const _0x12d138=document['getElementById']('apply-enhanced-filters'),_0x126d56=document['getElementById']('clear-enhanced-filters');_0x12d138&&_0x12d138[_0x37bbc0(0xc4)]('click',()=>{const _0x2238ca=_0x37bbc0;previewState['enhancedFilters']['pilots']=document[_0x2238ca(0xfe)](_0x2238ca(0xb8))['value']['trim'](),previewState['enhancedFilters'][_0x2238ca(0x139)]=document['getElementById']('filter-levels')[_0x2238ca(0xcb)][_0x2238ca(0x117)]();const _0x27427e=document[_0x2238ca(0xfe)]('filter-subgames');previewState[_0x2238ca(0x128)]['subgames']=Array['from'](_0x27427e[_0x2238ca(0x100)])['map'](_0xe791=>_0xe791['value'])['filter'](_0x5c9809=>_0x5c9809!==''),loadRecentMatchesPreview('current');});_0x126d56&&_0x126d56[_0x37bbc0(0xc4)]('click',()=>{const _0x10aeeb=_0x37bbc0;clearEnhancedFilters(),loadRecentMatchesPreview(_0x10aeeb(0xc9));});document[_0x37bbc0(0xfc)](_0x37bbc0(0xb4))['forEach'](_0x347658=>{_0x347658['addEventListener']('click',()=>{const _0x441b11=_0x347658['dataset']['jump'];jumpToPage(_0x441b11);});});const _0xf4ee09=document['getElementById']('jump-to-page');_0xf4ee09&&_0xf4ee09['addEventListener']('keypress',_0x33b051=>{const _0xf27deb=_0x37bbc0;_0x33b051[_0xf27deb(0xbf)]==='Enter'&&jumpToPage('input');});const _0x1a8382=document['getElementById']('closeCommentPopupPreview'),_0x451f30=document[_0x37bbc0(0xfe)]('commentOverlayPreview');if(_0x1a8382)_0x1a8382['addEventListener'](_0x37bbc0(0xa5),closePreviewCommentPopup);if(_0x451f30)_0x451f30['addEventListener'](_0x37bbc0(0xa5),closePreviewCommentPopup);const _0x46b572=document['getElementById']('closeAddCommentPopup'),_0x437f80=document['getElementById']('commentAddOverlay'),_0x325e1f=document[_0x37bbc0(0xfe)]('addCommentForm');if(_0x46b572)_0x46b572['addEventListener'](_0x37bbc0(0xa5),closeAddCommentPopup);if(_0x437f80)_0x437f80[_0x37bbc0(0xc4)](_0x37bbc0(0xa5),closeAddCommentPopup);if(_0x325e1f)_0x325e1f[_0x37bbc0(0xc4)]('submit',submitComment);const _0x56f3bb=document['getElementById']('commentText'),_0x327bfa=document['getElementById']('wordCount');_0x56f3bb&&_0x327bfa&&setupWordCounter('commentText','wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window['submitComment']=submitComment;