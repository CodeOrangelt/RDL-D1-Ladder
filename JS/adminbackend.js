const a2_0xc86709=a2_0x1f9e,a2_0x5d55c5=(function(){let _0x31f8f2=!![];return function(_0x935aab,_0x4d5bdb){const _0x2e9ba8=_0x31f8f2?function(){if(_0x4d5bdb){const _0x4bcc3c=_0x4d5bdb['apply'](_0x935aab,arguments);return _0x4d5bdb=null,_0x4bcc3c;}}:function(){};return _0x31f8f2=![],_0x2e9ba8;};}()),a2_0x5d5267=a2_0x5d55c5(this,function(){const _0x1a9362=a2_0x1f9e;let _0x5a5728;try{const _0x3c09b7=Function(_0x1a9362(0x152)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5a5728=_0x3c09b7();}catch(_0x3fd37a){_0x5a5728=window;}const _0xa0b37f=_0x5a5728['console']=_0x5a5728['console']||{},_0x52ac74=['log','warn','info','error',_0x1a9362(0x19f),'table','trace'];for(let _0x2d377d=0x0;_0x2d377d<_0x52ac74['length'];_0x2d377d++){const _0x373c57=a2_0x5d55c5['constructor']['prototype']['bind'](a2_0x5d55c5),_0x5798b1=_0x52ac74[_0x2d377d],_0x16f15b=_0xa0b37f[_0x5798b1]||_0x373c57;_0x373c57['__proto__']=a2_0x5d55c5['bind'](a2_0x5d55c5),_0x373c57['toString']=_0x16f15b['toString']['bind'](_0x16f15b),_0xa0b37f[_0x5798b1]=_0x373c57;}});a2_0x5d5267();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x13765d){const _0x74d21=a2_0x1f9e;if(!_0x13765d)return'#ffffff';_0x13765d=_0x13765d[_0x74d21(0x2f7)]('#','');_0x13765d[_0x74d21(0x1dc)]===0x3&&(_0x13765d=_0x13765d['split']('')['map'](_0x5a69fd=>_0x5a69fd+_0x5a69fd)['join'](''));if(_0x13765d['length']!==0x6)return _0x74d21(0x22b);const _0x114d86=parseInt(_0x13765d['substring'](0x0,0x2),0x10),_0x5993c9=parseInt(_0x13765d[_0x74d21(0x255)](0x2,0x4),0x10),_0x5632e2=parseInt(_0x13765d[_0x74d21(0x255)](0x4,0x6),0x10),_0x30c7fe=(_0x114d86*0x12b+_0x5993c9*0x24b+_0x5632e2*0x72)/0x3e8;return _0x30c7fe>=0x80?_0x74d21(0x216):'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener'](a2_0xc86709(0x146),()=>{const _0x41b72d=a2_0xc86709;auth[_0x41b72d(0x321)](async _0x6557e5=>{const _0x35e1fc=_0x41b72d;if(!_0x6557e5){window[_0x35e1fc(0x36f)][_0x35e1fc(0x189)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0x2be977){console['error']('Error\x20initializing\x20dashboard:',_0x2be977),showNotification('Error\x20setting\x20up\x20admin\x20dashboard',_0x35e1fc(0x2b6));}});});async function getUserTabPermissions(_0xe417c2){const _0x5f35a2=a2_0xc86709;if(!_0xe417c2)return['dashboard'];console[_0x5f35a2(0x149)]('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0xe417c2+'\x20in\x20all\x20collections...');const _0x382a7e=[{'name':'userProfiles','displayName':_0x5f35a2(0x2c3)},{'name':'players','displayName':_0x5f35a2(0x251)},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':_0x5f35a2(0x19e)},{'name':_0x5f35a2(0x2d6),'displayName':'Non-Participants'}],_0x9654b1=auth['currentUser'];let _0xb5c3a1=null,_0x2404b3=null;for(const _0x1f9df7 of _0x382a7e){try{if(_0x9654b1){const _0x26c050=doc(db,_0x1f9df7['name'],_0x9654b1['uid']),_0x466fd3=await getDoc(_0x26c050);if(_0x466fd3['exists']()){const _0x1a78dd=_0x466fd3['data']();console[_0x5f35a2(0x149)]('Found\x20user\x20in\x20'+_0x1f9df7['displayName']+'\x20by\x20UID:',_0x1a78dd);const _0x5bc8d2=(_0x1a78dd[_0x5f35a2(0x1a5)]||_0x1a78dd['role']||'')['toLowerCase']();if(_0x5bc8d2&&_0x5bc8d2!==_0x5f35a2(0x182)){_0xb5c3a1=_0x5bc8d2,_0x2404b3=_0x1f9df7[_0x5f35a2(0x330)],console['log']('Found\x20specific\x20role:\x20'+_0xb5c3a1+'\x20in\x20'+_0x2404b3);break;}}}if(!_0xb5c3a1){const _0x8eee0=collection(db,_0x1f9df7['name']),_0x52268e=query(_0x8eee0,where(_0x5f35a2(0x371),'==',_0xe417c2)),_0x2d264d=await getDocs(_0x52268e);if(!_0x2d264d[_0x5f35a2(0x2e3)]){const _0x5c7b0f=_0x2d264d['docs'][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0x1f9df7['displayName']+_0x5f35a2(0x373)+_0xe417c2+':',_0x5c7b0f);const _0xf81464=(_0x5c7b0f[_0x5f35a2(0x1a5)]||_0x5c7b0f['role']||'')['toLowerCase']();if(_0xf81464&&_0xf81464!==_0x5f35a2(0x182)){_0xb5c3a1=_0xf81464,_0x2404b3=_0x1f9df7['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0xb5c3a1+'\x20in\x20'+_0x2404b3);break;}}}}catch(_0x199268){console['error']('Error\x20checking\x20'+_0x1f9df7['displayName']+':',_0x199268);}}if(_0xb5c3a1){console['log'](_0x5f35a2(0x17a)+_0xb5c3a1+_0x5f35a2(0x16c)+_0x2404b3+')');const _0x43e4f6={'admin':[_0x5f35a2(0x18f),_0x5f35a2(0x192),'manage-matches','manage-articles','manage-trophies','manage-ranks',_0x5f35a2(0x2c7),'settings','manage-trophies','elo-history',_0x5f35a2(0x317),'user-roles-section',_0x5f35a2(0x2b4),_0x5f35a2(0x362),'manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks',_0x5f35a2(0x2c7),'settings','manage-trophies','elo-history',_0x5f35a2(0x317),_0x5f35a2(0x35b),'manage-matches','manage-points',_0x5f35a2(0x315),'manage-ribbons'],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':['dashboard',_0x5f35a2(0x18c),'manage-trophies','elo-history','manage-highlights']};if(_0x43e4f6[_0xb5c3a1])return console[_0x5f35a2(0x149)]('Role\x20\x27'+_0xb5c3a1+_0x5f35a2(0x2c1),_0x43e4f6[_0xb5c3a1]),_0x43e4f6[_0xb5c3a1];}return console[_0x5f35a2(0x149)]('No\x20specific\x20permissions\x20for\x20user\x20'+_0xe417c2+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0xa7d030=[]){const _0x2bceb3=a2_0xc86709,_0x2acaf6=document[_0x2bceb3(0x312)]('.sidebar-nav\x20.nav-item'),_0xe75eb0=document['querySelectorAll']('.admin-section');(!_0xa7d030||_0xa7d030[_0x2bceb3(0x1dc)]===0x0)&&(_0xa7d030=[_0x2bceb3(0x18f)]);_0x2acaf6['forEach'](_0x5392e1=>{const _0x874ff7=_0x2bceb3,_0x5a14b9=_0x5392e1['getAttribute']('data-section');_0xa7d030['includes'](_0x5a14b9)?_0x5392e1['style']['display']='flex':_0x5392e1['style']['display']=_0x874ff7(0x182),_0x5392e1[_0x874ff7(0x2c6)]('click',()=>{const _0x2a63bc=_0x874ff7,_0x418d62=_0x5392e1['getAttribute']('data-section');if(!_0xa7d030['includes'](_0x418d62)){showNotification(_0x2a63bc(0x35f),'error');return;}_0x2acaf6['forEach'](_0x3aa421=>_0x3aa421[_0x2a63bc(0x2b9)]['remove']('active')),_0x5392e1['classList'][_0x2a63bc(0x1f3)]('active'),_0xe75eb0['forEach'](_0xfabf1d=>{_0xfabf1d['style']['display']='none';});const _0x3e0fa8=document['getElementById'](_0x418d62);_0x3e0fa8&&(_0x3e0fa8['style'][_0x2a63bc(0x1ed)]='block',console[_0x2a63bc(0x149)]('Switched\x20to\x20'+_0x418d62+_0x2a63bc(0x14b)));});});const _0x488ffb=document[_0x2bceb3(0x29c)](_0x2bceb3(0x1b0)+_0xa7d030[0x0]+'\x22]');_0x488ffb&&_0x488ffb['click'](),console['log'](_0x2bceb3(0x227));}function setupTabNavigation(){const _0x312e9e=a2_0xc86709,_0x1ba601=document[_0x312e9e(0x312)]('.nav-item');let _0x341ae7=null,_0x456585=new Set();_0x1ba601[_0x312e9e(0x1e8)](_0x584059=>{_0x584059['addEventListener']('click',function(){const _0x5e468d=a2_0x1f9e,_0x5ee4b0=this['getAttribute']('data-section');if(_0x5ee4b0===_0x341ae7)return;_0x341ae7&&(document['getElementById'](_0x341ae7)['style']['display']='none',_0x1ba601[_0x5e468d(0x1e8)](_0x5f3468=>_0x5f3468['classList'][_0x5e468d(0x14c)]('active'))),document['getElementById'](_0x5ee4b0)['style'][_0x5e468d(0x1ed)]='block',this[_0x5e468d(0x2b9)]['add']('active'),_0x341ae7=_0x5ee4b0;});});}function loadSectionData(_0x5afe16){return;}async function initializeAdminDashboard(){const _0x42a2c5=a2_0xc86709;try{const _0x5e60c3=auth[_0x42a2c5(0x29b)],_0x114f49=await getUserTabPermissions(_0x5e60c3['email']);console['log'](_0x42a2c5(0x165)+_0x5e60c3[_0x42a2c5(0x371)]+'\x20allowed\x20tabs:',_0x114f49),window['userAllowedTabs']=_0x114f49,setupSidebarNavigation(_0x114f49),setupLadderSelector(),setupDashboardSection(),_0x114f49[_0x42a2c5(0x354)]('manage-players')&&setupManagePlayersSection(),_0x114f49['includes']('elo-history')&&setupEloHistorySection(),_0x114f49['includes']('manage-ranks')&&setupRankControls(),_0x114f49['includes']('manage-articles')&&setupManageArticlesSection(),_0x114f49[_0x42a2c5(0x354)]('user-roles-section')&&setupUserRolesSection(),_0x114f49[_0x42a2c5(0x354)]('manage-trophies')&&setupTrophyManagementSection(),_0x114f49['includes'](_0x42a2c5(0x317))&&setupManageHighlightsSection(),_0x114f49['includes']('inactive-players')&&setupInactivePlayersSection(),_0x114f49[_0x42a2c5(0x354)]('manage-matches')&&setupManageMatchesSection(),_0x114f49['includes'](_0x42a2c5(0x362))&&setupManagePointsSection(),_0x114f49['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x114f49);}catch(_0x490ec8){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x490ec8);}}function setupDataLoadButtons(_0x59b7d0=[]){const _0x3791d1=a2_0xc86709;(!_0x59b7d0||_0x59b7d0['length']===0x0)&&(_0x59b7d0=['dashboard']);const _0x287a6d=document['getElementById']('load-dashboard-data');_0x287a6d&&_0x287a6d['addEventListener']('click',function(){const _0x30c5dc=a2_0x1f9e;this['classList']['add'](_0x30c5dc(0x36e)),this['innerHTML']=_0x30c5dc(0x233),loadDashboardOverview()['then'](()=>{const _0x49a5ec=_0x30c5dc;this['classList']['remove'](_0x49a5ec(0x36e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x243c64=>{const _0xa6bd17=_0x30c5dc;console['error']('Error\x20loading\x20dashboard:',_0x243c64),this['classList']['remove'](_0xa6bd17(0x36e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x59b7d0[_0x3791d1(0x354)]('manage-trophies')){const _0x149d6e=document[_0x3791d1(0x226)]('load-trophies-data');_0x149d6e&&_0x149d6e['addEventListener'](_0x3791d1(0x284),function(){const _0x34394b=_0x3791d1;console[_0x34394b(0x149)]('Load\x20trophies\x20data\x20clicked'),this['classList'][_0x34394b(0x1f3)](_0x34394b(0x36e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0xeb54fb=_0x34394b;this[_0xeb54fb(0x2b9)][_0xeb54fb(0x14c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x5c1684=>{const _0x46e5e9=_0x34394b;console['error']('Error\x20loading\x20trophies:',_0x5c1684),this[_0x46e5e9(0x2b9)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x59b7d0[_0x3791d1(0x354)]('manage-players')){const _0xb97b66=document['getElementById']('load-players-data');_0xb97b66&&_0xb97b66[_0x3791d1(0x2c6)](_0x3791d1(0x284),function(){const _0x52f0fa=_0x3791d1;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add'](_0x52f0fa(0x36e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x2bfb5a=>{const _0x6f9562=_0x52f0fa;console['error']('Error\x20loading\x20players:',_0x2bfb5a),this['classList'][_0x6f9562(0x14c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3cf8c3=_0x6f9562;this[_0x3cf8c3(0x15d)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x59b7d0['includes']('elo-history')){const _0x29a9f0=document[_0x3791d1(0x226)]('load-elo-history-data');_0x29a9f0&&_0x29a9f0['addEventListener']('click',function(){const _0x20bd45=_0x3791d1;console['log']('Load\x20history\x20data\x20clicked'),this['classList'][_0x20bd45(0x1f3)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)[_0x20bd45(0x1ae)](()=>{const _0x6c60e8=_0x20bd45;this['classList']['remove']('loading'),this['innerHTML']=_0x6c60e8(0x158);})[_0x20bd45(0x223)](_0x1d7d0b=>{const _0x59f767=_0x20bd45;console['error']('Error\x20loading\x20history:',_0x1d7d0b),this['classList']['remove']('loading'),this[_0x59f767(0x15d)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x59b7d0['includes'](_0x3791d1(0x18c))){const _0x1c93b1=document[_0x3791d1(0x226)]('load-articles-data');_0x1c93b1&&_0x1c93b1['addEventListener']('click',function(){const _0x3d380f=_0x3791d1;console['log'](_0x3d380f(0x2a6)),this[_0x3d380f(0x2b9)]['add'](_0x3d380f(0x36e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x217e36=_0x3d380f;this['classList'][_0x217e36(0x14c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x471bc5=>{const _0x149c6c=_0x3d380f;console[_0x149c6c(0x2b6)]('Error\x20loading\x20articles:',_0x471bc5),this['classList'][_0x149c6c(0x14c)](_0x149c6c(0x36e)),this[_0x149c6c(0x15d)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x55ba39=_0x149c6c;this[_0x55ba39(0x15d)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x59b7d0['includes'](_0x3791d1(0x35b))){const _0x5ecd98=document[_0x3791d1(0x226)]('load-users-data');_0x5ecd98&&_0x5ecd98['addEventListener']('click',function(){const _0x35e7a7=_0x3791d1;console[_0x35e7a7(0x149)]('Load\x20users\x20data\x20clicked'),this['classList']['add'](_0x35e7a7(0x36e)),this['innerHTML']=_0x35e7a7(0x233),loadUsersWithRoles()[_0x35e7a7(0x1ae)](()=>{const _0x493e26=_0x35e7a7;this[_0x493e26(0x2b9)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x35e7a7(0x223)](_0x1d3799=>{const _0x5ea5ef=_0x35e7a7;console['error']('Error\x20loading\x20users:',_0x1d3799),this['classList']['remove']('loading'),this['innerHTML']=_0x5ea5ef(0x376),setTimeout(()=>{const _0x511f13=_0x5ea5ef;this[_0x511f13(0x15d)]=_0x511f13(0x384);},0xbb8);});});}if(_0x59b7d0[_0x3791d1(0x354)](_0x3791d1(0x2c7))){const _0x3f2b4c=document['getElementById']('load-inactive-players-data');_0x3f2b4c&&_0x3f2b4c['addEventListener']('click',function(){const _0x4a885b=_0x3791d1;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this[_0x4a885b(0x2b9)][_0x4a885b(0x1f3)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x58cae7=_0x4a885b;this[_0x58cae7(0x2b9)][_0x58cae7(0x14c)]('loading'),this[_0x58cae7(0x15d)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x51cb7d=>{const _0x449a5f=_0x4a885b;console[_0x449a5f(0x2b6)](_0x449a5f(0x190),_0x51cb7d),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x59b7d0['includes']('manage-highlights')){const _0xf1ac58=document[_0x3791d1(0x226)](_0x3791d1(0x1aa));_0xf1ac58&&_0xf1ac58[_0x3791d1(0x2c6)]('click',function(){const _0x69ee16=_0x3791d1;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add'](_0x69ee16(0x36e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x3ff4cd=_0x69ee16;this['classList'][_0x3ff4cd(0x14c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})[_0x69ee16(0x223)](_0x43efd2=>{const _0x17f9a8=_0x69ee16;console[_0x17f9a8(0x2b6)]('Error\x20loading\x20highlights:',_0x43efd2),this[_0x17f9a8(0x2b9)]['remove']('loading'),this['innerHTML']=_0x17f9a8(0x376),setTimeout(()=>{const _0x35de8c=_0x17f9a8;this['innerHTML']=_0x35de8c(0x1f4);},0xbb8);});});}if(_0x59b7d0['includes']('manage-matches')){const _0x351112=document['getElementById']('load-matches-data');_0x351112&&_0x351112[_0x3791d1(0x2c6)](_0x3791d1(0x284),function(){const _0x84c583=_0x3791d1;console['log']('Load\x20matches\x20data\x20clicked'),this['classList'][_0x84c583(0x1f3)](_0x84c583(0x36e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x84c583(0x1ae)](()=>{const _0x5df4b0=_0x84c583;this[_0x5df4b0(0x2b9)]['remove'](_0x5df4b0(0x36e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})[_0x84c583(0x223)](_0x39eea1=>{const _0x3931a6=_0x84c583;console[_0x3931a6(0x2b6)]('Error\x20loading\x20matches:',_0x39eea1),this['classList'][_0x3931a6(0x14c)]('loading'),this['innerHTML']=_0x3931a6(0x376),setTimeout(()=>{const _0x1c8156=_0x3931a6;this[_0x1c8156(0x15d)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x59b7d0['includes']('manage-ribbons')){const _0xf22852=document['getElementById']('load-ribbons-data');_0xf22852&&_0xf22852[_0x3791d1(0x2c6)]('click',function(){const _0x2142c6=_0x3791d1;console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList'][_0x2142c6(0x1f3)](_0x2142c6(0x36e)),this[_0x2142c6(0x15d)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x3f58c0=_0x2142c6;this['classList'][_0x3f58c0(0x14c)]('loading'),this['innerHTML']=_0x3f58c0(0x316);})['catch'](_0x4028a0=>{console['error']('Error\x20loading\x20ribbons:',_0x4028a0),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console[_0x3791d1(0x149)](_0x3791d1(0x366));}function setupDashboardSection(){const _0x24b423=a2_0xc86709;document['getElementById']('player-count')[_0x24b423(0x2e8)]='-',document['getElementById'](_0x24b423(0x209))['textContent']='-',document['getElementById'](_0x24b423(0x151))['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x5edfd7=document['querySelectorAll']('.ladder-switch\x20input');_0x5edfd7['forEach'](_0xdd2b21=>{const _0xbc51c2=a2_0x1f9e;_0xdd2b21['addEventListener'](_0xbc51c2(0x2f5),()=>{const _0x556e9d=_0xbc51c2;currentLadder=_0xdd2b21[_0x556e9d(0x2d0)],document['body']['setAttribute']('data-ladder',currentLadder);const _0x507838=document['getElementById']('current-ladder-display');_0x507838&&(_0x507838['textContent']=currentLadder),document[_0x556e9d(0x226)](_0x556e9d(0x2fb))['textContent']='-',document['getElementById'](_0x556e9d(0x209))[_0x556e9d(0x2e8)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById'](_0x556e9d(0x1b3))['textContent']='-',charts[_0x556e9d(0x240)]&&(charts['rankDistribution']['destroy'](),charts[_0x556e9d(0x240)]=null),charts[_0x556e9d(0x1f9)]&&(charts['activity'][_0x556e9d(0x1b4)](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+_0x556e9d(0x23d),_0x556e9d(0x36d));});});const _0x25f457=document['getElementById']('current-ladder-display');_0x25f457&&(_0x25f457['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x235403=a2_0xc86709;try{console[_0x235403(0x149)]('Loading\x20dashboard\x20overview\x20data...'),document['getElementById']('player-count')[_0x235403(0x2e8)]='-',document['getElementById']('match-count')[_0x235403(0x2e8)]='-',document['getElementById']('pending-count')[_0x235403(0x2e8)]='-',document['getElementById'](_0x235403(0x1b3))['textContent']='-';const _0x84b242=currentLadder==='D1'?_0x235403(0x28a):currentLadder==='D2'?_0x235403(0x2a3):_0x235403(0x360),_0x3c18c4=currentLadder==='D1'?_0x235403(0x229):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x27a8ab=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x3914a0=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x84b242+',\x20'+_0x3c18c4);const _0x556d75=await getDocs(collection(db,_0x84b242)),_0x498863=_0x556d75['size'],_0x143c4c=await getDocs(collection(db,_0x3c18c4)),_0xcd9d13=_0x143c4c['size'],_0x5d5e5c=await getDocs(collection(db,_0x27a8ab)),_0xe93914=_0x5d5e5c['size'],_0x38941a=await getDocs(collection(db,_0x3914a0)),_0x2c7eb0=_0x38941a['size'];return document[_0x235403(0x226)]('player-count')['textContent']=_0x498863,document['getElementById']('match-count')[_0x235403(0x2e8)]=_0xcd9d13,document[_0x235403(0x226)](_0x235403(0x151))['textContent']=_0xe93914,document['getElementById'](_0x235403(0x1b3))['textContent']=_0x2c7eb0,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x13a742){console['error']('Error\x20loading\x20dashboard\x20data:',_0x13a742);throw _0x13a742;}}async function createRankDistributionChart(){const _0x5c30bd=a2_0xc86709;try{const _0x50ac97=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x155d68=await getDocs(_0x50ac97),_0x233481={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x155d68['forEach'](_0x4efec4=>{const _0x25c88b=a2_0x1f9e,_0x4b3bbd=_0x4efec4[_0x25c88b(0x14f)](),_0xdb4756=_0x4b3bbd['eloRating']||0x4b0;if(_0xdb4756>=0x7d0)_0x233481['Emerald']++;else{if(_0xdb4756>=0x708)_0x233481[_0x25c88b(0x1cf)]++;else{if(_0xdb4756>=0x640)_0x233481['Silver']++;else{if(_0xdb4756>=0x578)_0x233481[_0x25c88b(0x17c)]++;else _0x233481['Unranked']++;}}}});const _0x1a7a54=document[_0x5c30bd(0x226)]('rank-distribution-chart');charts[_0x5c30bd(0x240)]&&charts['rankDistribution'][_0x5c30bd(0x1b4)](),charts[_0x5c30bd(0x240)]=new Chart(_0x1a7a54,{'type':_0x5c30bd(0x328),'data':{'labels':Object['keys'](_0x233481),'datasets':[{'data':Object['values'](_0x233481),'backgroundColor':['#808080','#CD7F32','#C0C0C0',_0x5c30bd(0x2ce),'#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':_0x5c30bd(0x179),'font':{'size':0x10}}}}});}catch(_0x3d7643){console['error'](_0x5c30bd(0x1e5),_0x3d7643),document[_0x5c30bd(0x226)](_0x5c30bd(0x195))['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x57887d=a2_0xc86709;try{const _0x395a06=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x4d4aa7=collection(db,_0x395a06),_0x38ceff=new Date();_0x38ceff['setDate'](_0x38ceff['getDate']()-0x7);const _0x19c07a=query(_0x4d4aa7,where('approvedAt','>=',_0x38ceff),orderBy('approvedAt','asc')),_0x18d0d1=await getDocs(_0x19c07a),_0x3d41fd=['Sunday','Monday',_0x57887d(0x253),'Wednesday','Thursday','Friday',_0x57887d(0x2c4)],_0x3eb262=_0x3d41fd['reduce']((_0x497c4c,_0x16f315)=>({..._0x497c4c,[_0x16f315]:0x0}),{});_0x18d0d1['forEach'](_0x3e8c98=>{const _0x1ffcd5=_0x57887d,_0x3b6a91=_0x3e8c98['data']();if(_0x3b6a91[_0x1ffcd5(0x281)]){const _0x5139e2=_0x3d41fd[new Date(_0x3b6a91['approvedAt'][_0x1ffcd5(0x1b8)]*0x3e8)[_0x1ffcd5(0x2b7)]()];_0x3eb262[_0x5139e2]++;}});const _0xb5e067=document['getElementById']('activity-chart');charts[_0x57887d(0x1f9)]&&charts[_0x57887d(0x1f9)]['destroy'](),charts['activity']=new Chart(_0xb5e067,{'type':'bar','data':{'labels':_0x3d41fd,'datasets':[{'label':'Matches\x20Played','data':_0x3d41fd[_0x57887d(0x1d3)](_0x19c12c=>_0x3eb262[_0x19c12c]),'backgroundColor':currentLadder==='D1'?_0x57887d(0x1e1):_0x57887d(0x208),'borderColor':currentLadder==='D1'?'#d32f2f':_0x57887d(0x305),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x57887d(0x179)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x57887d(0x206),'color':_0x57887d(0x179),'font':{'size':0x10}}}}});}catch(_0x210c7d){console['error']('Error\x20creating\x20activity\x20chart:',_0x210c7d),document[_0x57887d(0x226)]('activity-chart')[_0x57887d(0x15d)]=_0x57887d(0x2dd);}}async function loadPlayersData(){const _0x25ac53=a2_0xc86709,_0x57a604=document['getElementById']('players-table-body');if(!_0x57a604)return;_0x57a604['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x2b829a='players';if(currentLadder==='D2')_0x2b829a='playersD2';else currentLadder==='D3'&&(_0x2b829a=_0x25ac53(0x360));console['log']('Loading\x20players\x20from\x20'+_0x2b829a+'\x20collection...');const _0x33b24d=collection(db,_0x2b829a),_0x7fe51=query(_0x33b24d,orderBy(_0x25ac53(0x2ea),'desc')),_0x4f5872=await getDocs(_0x7fe51);if(_0x4f5872[_0x25ac53(0x2e3)]){_0x57a604[_0x25ac53(0x15d)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x57a604[_0x25ac53(0x15d)]='';let _0x323a07=0x1;_0x4f5872[_0x25ac53(0x1e8)](_0x572c84=>{const _0x54de4d=_0x25ac53,_0x376441=_0x572c84['data'](),_0x1aa274=getRankFromElo(_0x376441['eloRating']||0x4b0),_0x5d816d=getRankStyle(_0x376441['eloRating']||0x4b0),_0x4c9091=document['createElement']('tr');_0x4c9091['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x323a07+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x5d816d['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x376441['username']||_0x54de4d(0x271))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x376441['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x5d816d['color']+_0x54de4d(0x2ef)+_0x1aa274+_0x54de4d(0x1de)+(_0x376441['wins']||0x0)+'W\x20/\x20'+(_0x376441[_0x54de4d(0x2b5)]||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x572c84['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x572c84['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x57a604[_0x54de4d(0x342)](_0x4c9091),_0x323a07++;}),setupPlayerActionButtons();}catch(_0x56a247){console['error'](_0x25ac53(0x288),_0x56a247),_0x57a604['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x56a247['message']+_0x25ac53(0x175);}}function getRankFromElo(_0x44fb63){const _0x19b3b1=a2_0xc86709;if(_0x44fb63>=0x7d0)return'Emerald';if(_0x44fb63>=0x708)return'Gold';if(_0x44fb63>=0x640)return _0x19b3b1(0x276);if(_0x44fb63>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){document['querySelectorAll']('.edit-btn')['forEach'](_0x9e204f=>{const _0x8a4d7d=a2_0x1f9e;_0x9e204f['addEventListener'](_0x8a4d7d(0x284),async _0x3e7dad=>{const _0x19d1c7=_0x8a4d7d,_0x3151cb=_0x3e7dad[_0x19d1c7(0x1ea)]['dataset']['id'];openEditPlayerModal(_0x3151cb);});}),document['querySelectorAll']('.delete-btn')['forEach'](_0x3ae787=>{const _0x3a573c=a2_0x1f9e;_0x3ae787[_0x3a573c(0x2c6)]('click',async _0xaf16a5=>{const _0x1ff585=_0x3a573c,_0x4335e8=_0xaf16a5['currentTarget'][_0x1ff585(0x246)]['id'];confirmDeletePlayer(_0x4335e8);});});}async function openEditPlayerModal(_0x459c4b){const _0x3b8581=a2_0xc86709;try{const _0x1b6e12=currentLadder==='D1'?'players':_0x3b8581(0x2a3),_0x1e5c1e=doc(db,_0x1b6e12,_0x459c4b),_0x209702=await getDoc(_0x1e5c1e);if(!_0x209702['exists']()){showNotification(_0x3b8581(0x1fd),'error');return;}const _0x4344aa=_0x209702['data'](),_0x6ba042=document['getElementById']('edit-player-modal'),_0xca3cfc=document['getElementById']('edit-username'),_0x4b9e18=document['getElementById'](_0x3b8581(0x1ca)),_0x21d34f=document['getElementById']('edit-wins'),_0x51ab62=document['getElementById']('edit-losses');_0xca3cfc[_0x3b8581(0x2d0)]=_0x4344aa['username']||'',_0x4b9e18['value']=_0x4344aa['eloRating']||0x4b0,_0x21d34f['value']=_0x4344aa[_0x3b8581(0x318)]||0x0,_0x51ab62['value']=_0x4344aa['losses']||0x0,_0x6ba042['dataset']['playerId']=_0x459c4b,_0x6ba042['classList']['add']('active');}catch(_0x2ca11f){console['error'](_0x3b8581(0x1be),_0x2ca11f),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x2ac59b=a2_0xc86709;try{const _0x1377da=document['getElementById']('edit-player-modal'),_0xa77f3f=_0x1377da['dataset']['playerId'];if(!_0xa77f3f){showNotification('No\x20player\x20selected',_0x2ac59b(0x2b6));return;}const _0x1c645b=document[_0x2ac59b(0x226)]('edit-username'),_0x17838e=document['getElementById']('edit-elo'),_0x2d25c6=document[_0x2ac59b(0x226)](_0x2ac59b(0x1e4)),_0x10a0ec=document[_0x2ac59b(0x226)](_0x2ac59b(0x171)),_0x57253d=_0x1c645b['value']['trim'](),_0x3a9ed6=parseInt(_0x17838e[_0x2ac59b(0x2d0)]),_0x18b312=parseInt(_0x2d25c6['value']),_0x1148fd=parseInt(_0x10a0ec['value']);if(!_0x57253d||isNaN(_0x3a9ed6)){showNotification(_0x2ac59b(0x31e),'error');return;}const _0x3d4de9=currentLadder==='D1'?_0x2ac59b(0x28a):'playersD2',_0x1c8c68=doc(db,_0x3d4de9,_0xa77f3f),_0x562e59=await getDoc(_0x1c8c68),_0x37afa0=_0x562e59['exists']()?_0x562e59[_0x2ac59b(0x14f)]():{},_0xf3aedc=_0x37afa0[_0x2ac59b(0x2ea)]||0x4b0;await updateDoc(_0x1c8c68,{'username':_0x57253d,'eloRating':_0x3a9ed6,'wins':_0x18b312||0x0,'losses':_0x1148fd||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x3a9ed6!==_0xf3aedc){const _0x1d2e52=currentLadder==='D1'?'eloHistory':_0x2ac59b(0x16a);await addDoc(collection(db,_0x1d2e52),{'player':_0x57253d,'previousElo':_0xf3aedc,'newElo':_0x3a9ed6,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x2ac59b(0x29b)][_0x2ac59b(0x371)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x2ac59b(0x295));}catch(_0xce6c72){console[_0x2ac59b(0x2b6)]('Error\x20updating\x20player:',_0xce6c72),showNotification(_0x2ac59b(0x210)+_0xce6c72['message'],'error');}}function closeEditPlayerModal(){const _0xd0aad2=a2_0xc86709,_0x473445=document[_0xd0aad2(0x226)]('edit-player-modal');_0x473445['classList']['remove']('active'),_0x473445['dataset']['playerId']='';}async function confirmDeletePlayer(_0x45c4b7){const _0xdcb90f=a2_0xc86709;if(confirm(_0xdcb90f(0x381)))try{const _0x4dd817=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x4dd817,_0x45c4b7)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x27c52d){console[_0xdcb90f(0x2b6)](_0xdcb90f(0x287),_0x27c52d),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x27c52d['message'],_0xdcb90f(0x2b6));}}async function setupManagePlayersSection(){const _0x2cc525=a2_0xc86709,_0x5b7054=document['getElementById']('add-player-form');_0x5b7054&&_0x5b7054['addEventListener']('submit',async _0x198a60=>{const _0x50fb7c=a2_0x1f9e;_0x198a60[_0x50fb7c(0x389)](),await addNewPlayer();});const _0x29de4c=document[_0x2cc525(0x226)]('player-search');_0x29de4c&&_0x29de4c[_0x2cc525(0x2c6)](_0x2cc525(0x1ac),debounce(filterPlayerTable,0x12c));const _0x360b65=document['getElementById'](_0x2cc525(0x277));_0x360b65&&_0x360b65['addEventListener'](_0x2cc525(0x284),saveEditedPlayer);const _0x4d5dec=document[_0x2cc525(0x226)]('cancel-edit-btn');_0x4d5dec&&_0x4d5dec['addEventListener']('click',closeEditPlayerModal);const _0x13eab6=document[_0x2cc525(0x226)]('edit-player-modal');_0x13eab6&&_0x13eab6['addEventListener']('click',_0x336ff3=>{_0x336ff3['target']===_0x13eab6&&closeEditPlayerModal();});const _0x2b984a=document['getElementById'](_0x2cc525(0x14a));_0x2b984a&&_0x2b984a['addEventListener']('change',()=>{currentLadder=_0x2b984a['value'],loadPlayersData();});}async function addNewPlayer(){const _0x355947=a2_0xc86709;try{const _0x3aee6a=document['getElementById']('new-player-username'),_0x41ee46=document['getElementById']('new-player-elo'),_0x5a7ea6=_0x3aee6a[_0x355947(0x2d0)][_0x355947(0x2ec)](),_0x2617ff=parseInt(_0x41ee46['value'])||0x4b0;if(!_0x5a7ea6){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0x5a7ea6+_0x355947(0x186)+_0x2617ff+_0x355947(0x32b)+currentLadder+'\x20ladder');let _0x11d4a9='players',_0x38d21f=_0x355947(0x2f4);if(currentLadder==='D2')_0x11d4a9='playersD2',_0x38d21f='eloHistoryD2';else currentLadder==='D3'&&(_0x11d4a9='playersD3',_0x38d21f='eloHistoryD3');const _0x31d430=query(collection(db,_0x11d4a9),where('username','==',_0x5a7ea6)),_0x5ef625=await getDocs(_0x31d430);if(!_0x5ef625['empty']){alert('Username\x20'+_0x5a7ea6+'\x20already\x20exists\x20in\x20'+currentLadder+_0x355947(0x18a));return;}const _0x287825=auth['currentUser'],_0x4caf66={'username':_0x5a7ea6,'eloRating':_0x2617ff,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x287825?_0x287825['email']:_0x355947(0x27e),'gameMode':currentLadder};await addDoc(collection(db,_0x11d4a9),_0x4caf66),await addDoc(collection(db,_0x38d21f),{'player':_0x5a7ea6,'previousElo':0x4b0,'newElo':_0x2617ff,'timestamp':serverTimestamp(),'type':_0x355947(0x2d7),'placedBy':_0x287825?_0x287825['email']:'admin','gameMode':currentLadder}),_0x3aee6a['value']='',_0x41ee46['value']='1200',alert('Player\x20'+_0x5a7ea6+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x355947(0x1f2)),loadPlayersData();}catch(_0x49dcb9){console['error'](_0x355947(0x265),_0x49dcb9),alert('Error\x20adding\x20player:\x20'+_0x49dcb9[_0x355947(0x26b)]);}}document[a2_0xc86709(0x2c6)](a2_0xc86709(0x146),()=>{const _0x4e72da=a2_0xc86709,_0x1d8c95=document['getElementById'](_0x4e72da(0x38c));_0x1d8c95&&_0x1d8c95['addEventListener']('submit',_0x2729be=>{const _0x472898=_0x4e72da;_0x2729be[_0x472898(0x389)](),addNewPlayer();});});function filterPlayerTable(){const _0x201c39=a2_0xc86709,_0x196034=document['getElementById']('player-search')['value']['toLowerCase'](),_0x5c8103=document['querySelectorAll']('#players-table-body\x20tr');let _0x2e82bc=0x0;_0x5c8103['forEach'](_0x258008=>{const _0x2f23ab=a2_0x1f9e,_0x1a10e9=_0x258008[_0x2f23ab(0x29c)]('.username')?.[_0x2f23ab(0x2e8)]['toLowerCase']()||'';_0x1a10e9['includes'](_0x196034)?(_0x258008['style']['display']='',_0x2e82bc++):_0x258008['style']['display']='none';});const _0x5acb0f=document['getElementById']('no-results-message');_0x5acb0f&&(_0x2e82bc===0x0&&_0x196034!==''?_0x5acb0f['style']['display']=_0x201c39(0x35c):_0x5acb0f['style']['display']='none');}function debounce(_0x245d8d,_0x3a616c){let _0xab8111;return function(..._0x5b2b89){clearTimeout(_0xab8111),_0xab8111=setTimeout(()=>_0x245d8d['apply'](this,_0x5b2b89),_0x3a616c);};}async function loadEloHistory(_0x3ee87d=0x1){const _0x3b8c4d=a2_0xc86709,_0x368d2f=document['getElementById'](_0x3b8c4d(0x264)),_0x2ee680=currentLadder['toLowerCase']();if(!_0x368d2f)return;_0x368d2f['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x746ceb=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x28be54=collection(db,_0x746ceb);let _0x366e39;if(_0x3ee87d>eloHistoryPagination[_0x2ee680][_0x3b8c4d(0x231)]&&eloHistoryPagination[_0x2ee680]['lastVisible'])_0x366e39=query(_0x28be54,orderBy('timestamp',_0x3b8c4d(0x2aa)),startAfter(eloHistoryPagination[_0x2ee680]['lastVisible']),limit(PAGE_SIZE));else _0x3ee87d<eloHistoryPagination[_0x2ee680]['page']&&eloHistoryPagination[_0x2ee680]['firstVisible']?_0x366e39=query(_0x28be54,orderBy(_0x3b8c4d(0x2de),'desc'),endBefore(eloHistoryPagination[_0x2ee680]['firstVisible']),limitToLast(PAGE_SIZE)):_0x366e39=query(_0x28be54,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x3d2232=await getDocs(_0x366e39);if(_0x3d2232['empty']){_0x368d2f['innerHTML']=_0x3b8c4d(0x140),document[_0x3b8c4d(0x226)](_0x2ee680+'-page-indicator')[_0x3b8c4d(0x2e8)]='Page\x201';return;}eloHistoryPagination[_0x2ee680]['page']=_0x3ee87d,eloHistoryPagination[_0x2ee680]['firstVisible']=_0x3d2232['docs'][0x0],eloHistoryPagination[_0x2ee680]['lastVisible']=_0x3d2232['docs'][_0x3d2232['docs'][_0x3b8c4d(0x1dc)]-0x1];const _0x4a9fa5=new Map();_0x368d2f['innerHTML']='';const _0x178342=async _0x973cc8=>{const _0x52e84a=_0x3b8c4d;if(typeof _0x973cc8!=='string'||_0x973cc8['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x973cc8))return _0x973cc8;if(_0x4a9fa5['has'](_0x973cc8))return _0x4a9fa5[_0x52e84a(0x183)](_0x973cc8);try{for(const _0x5a48de of[_0x52e84a(0x28a),'playersD2','playersD3','nonParticipants']){const _0x4ce122=await getDoc(doc(db,_0x5a48de,_0x973cc8));if(_0x4ce122[_0x52e84a(0x28b)]()&&_0x4ce122[_0x52e84a(0x14f)]()[_0x52e84a(0x1bb)]){const _0x5373d5=_0x4ce122[_0x52e84a(0x14f)]()['username'];return _0x4a9fa5['set'](_0x973cc8,_0x5373d5),_0x5373d5;}}return _0x973cc8;}catch(_0x3dc45e){return console['warn'](_0x52e84a(0x180)+_0x973cc8+':',_0x3dc45e),_0x973cc8;}};for(const _0x1859f5 of _0x3d2232['docs']){const _0x60cc08=_0x1859f5['data'](),_0x214ae3=document['createElement']('tr'),_0x37ebb2=_0x60cc08[_0x3b8c4d(0x2de)]?new Date(_0x60cc08[_0x3b8c4d(0x2de)][_0x3b8c4d(0x1b8)]*0x3e8)[_0x3b8c4d(0x349)]():'N/A',_0x4610af=_0x60cc08['newElo']-_0x60cc08['previousElo'],_0xab8c02=_0x4610af>0x0?'positive-change':_0x4610af<0x0?'negative-change':'',_0x8aa3a9=_0x4610af>0x0?'+':'',_0x5cd0c7=_0x60cc08['player']||_0x60cc08['username']||_0x60cc08['userId']||'N/A',_0x21d9b7=await _0x178342(_0x5cd0c7);_0x214ae3['innerHTML']=_0x3b8c4d(0x392)+_0x37ebb2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x21d9b7+_0x3b8c4d(0x2db)+(_0x60cc08['previousElo']||_0x3b8c4d(0x34e))+_0x3b8c4d(0x1cc)+(_0x60cc08[_0x3b8c4d(0x22d)]||_0x3b8c4d(0x34e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0xab8c02+'\x22>'+_0x8aa3a9+_0x4610af+_0x3b8c4d(0x21e)+formatHistoryType(_0x60cc08['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x60cc08['modifiedBy']||_0x60cc08[_0x3b8c4d(0x187)]||_0x60cc08['demotedBy']||'System')+_0x3b8c4d(0x33c),_0x368d2f[_0x3b8c4d(0x342)](_0x214ae3);}document['getElementById'](_0x2ee680+_0x3b8c4d(0x155))['textContent']=_0x3b8c4d(0x15e)+_0x3ee87d;const _0x511ffd=document['getElementById'](_0x2ee680+'-prev-page'),_0x4da5fd=document[_0x3b8c4d(0x226)](_0x2ee680+'-next-page');if(_0x511ffd)_0x511ffd['disabled']=_0x3ee87d<=0x1;const _0x47ac81=query(_0x28be54,orderBy('timestamp',_0x3b8c4d(0x2aa)),startAfter(eloHistoryPagination[_0x2ee680]['lastVisible']),limit(0x1)),_0x26d984=await getDocs(_0x47ac81);if(_0x4da5fd)_0x4da5fd[_0x3b8c4d(0x198)]=_0x26d984['empty'];}catch(_0x38401c){console['error']('Error\x20loading\x20ELO\x20history:',_0x38401c),_0x368d2f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x38401c['message']+_0x3b8c4d(0x175);}}function formatHistoryType(_0x42868a){const _0x358799=a2_0xc86709;switch(_0x42868a){case'match_result':return _0x358799(0x1bd);case _0x358799(0x270):return'Promotion';case'demotion':return'Demotion';case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x42868a||_0x358799(0x271);}}function setupEloHistorySection(){const _0x39a99a=a2_0xc86709;document['getElementById']('d1-prev-page')[_0x39a99a(0x2c6)]('click',()=>{const _0x129b3c=_0x39a99a;loadEloHistory(eloHistoryPagination['d1'][_0x129b3c(0x231)]-0x1);}),document['getElementById']('d1-next-page')['addEventListener']('click',()=>{const _0xcd5017=_0x39a99a;loadEloHistory(eloHistoryPagination['d1'][_0xcd5017(0x231)]+0x1);}),document['getElementById'](_0x39a99a(0x386))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x2ac2fc=document['getElementById']('d3-prev-page'),_0x256d0b=document['getElementById']('d3-next-page');_0x2ac2fc&&_0x2ac2fc['addEventListener']('click',()=>{const _0x569fb9=_0x39a99a;loadEloHistory(eloHistoryPagination['d3'][_0x569fb9(0x231)]-0x1);});_0x256d0b&&_0x256d0b['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x46697e=document[_0x39a99a(0x226)](_0x39a99a(0x2e7));_0x46697e&&_0x46697e['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x2906f5=document['getElementById'](_0x39a99a(0x1ad));_0x2906f5&&_0x2906f5['addEventListener']('change',applyEloHistoryFilters);const _0x1c2dfe=document[_0x39a99a(0x226)]('reset-history-filters');_0x1c2dfe&&_0x1c2dfe['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x32f50a=a2_0xc86709,_0x386b46=document['getElementById']('elo-history-search')[_0x32f50a(0x2d0)]['toLowerCase'](),_0x18d810=document[_0x32f50a(0x312)]('#elo-history-table-body\x20tr');let _0x74cbe6=0x0;_0x18d810['forEach'](_0x295e4c=>{const _0x240216=_0x32f50a;if(_0x295e4c['classList']['contains']('loading-cell')||_0x295e4c['classList']['contains'](_0x240216(0x1ef))||_0x295e4c['classList'][_0x240216(0x2cd)]('error-state'))return;const _0xc6ba23=_0x295e4c[_0x240216(0x29c)]('.player')?.['textContent']['toLowerCase']()||'',_0x123b26=_0x295e4c['querySelector']('.type')?.['textContent'][_0x240216(0x35a)]()||'',_0x41a791=_0x295e4c['querySelector']('.admin-action')?.['textContent'][_0x240216(0x35a)]()||'';_0xc6ba23[_0x240216(0x354)](_0x386b46)||_0x123b26['includes'](_0x386b46)||_0x41a791[_0x240216(0x354)](_0x386b46)?(_0x295e4c['style']['display']='',_0x74cbe6++):_0x295e4c[_0x240216(0x178)]['display']='none';});}async function applyEloHistoryFilters(){const _0x223f09=a2_0xc86709,_0x1bf48d=document['getElementById']('history-start-date')[_0x223f09(0x2d0)],_0x1f5680=document['getElementById']('history-end-date')['value'],_0x5e6cce=document['getElementById'](_0x223f09(0x1ad))[_0x223f09(0x2d0)],_0x4fc1b9=currentLadder['toLowerCase']();eloHistoryPagination[_0x4fc1b9]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x73330d=document['getElementById']('elo-history-table-body');_0x73330d[_0x223f09(0x15d)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x2b9561=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x1beaa6=collection(db,_0x2b9561);let _0x2d78f2=[orderBy(_0x223f09(0x2de),'desc')];if(_0x1bf48d){const _0x171a71=new Date(_0x1bf48d);_0x171a71['setHours'](0x0,0x0,0x0,0x0),_0x2d78f2['push'](where('timestamp','>=',_0x171a71));}if(_0x1f5680){const _0x14389d=new Date(_0x1f5680);_0x14389d['setHours'](0x17,0x3b,0x3b,0x3e7),_0x2d78f2['push'](where('timestamp','<=',_0x14389d));}_0x5e6cce&&_0x5e6cce!=='all'&&_0x2d78f2[_0x223f09(0x241)](where('type','==',_0x5e6cce));_0x2d78f2[_0x223f09(0x241)](limit(PAGE_SIZE));const _0x242a8a=query(_0x1beaa6,..._0x2d78f2),_0xc80b9d=await getDocs(_0x242a8a);!_0xc80b9d['empty']&&(eloHistoryPagination[_0x4fc1b9]['firstVisible']=_0xc80b9d['docs'][0x0],eloHistoryPagination[_0x4fc1b9][_0x223f09(0x21a)]=_0xc80b9d['docs'][_0xc80b9d['docs']['length']-0x1]);_0x73330d['innerHTML']='';if(_0xc80b9d[_0x223f09(0x2e3)]){_0x73330d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0xc80b9d['forEach'](_0x434659=>{const _0x4b07d5=_0x223f09,_0x463cb5=_0x434659['data'](),_0x5f42d7=document[_0x4b07d5(0x32c)]('tr'),_0xb5e663=_0x463cb5['timestamp']?new Date(_0x463cb5['timestamp']['seconds']*0x3e8)[_0x4b07d5(0x349)]():'N/A',_0x41369b=_0x463cb5[_0x4b07d5(0x22d)]-_0x463cb5['previousElo'],_0xc200d9=_0x41369b>0x0?'positive-change':_0x41369b<0x0?'negative-change':'',_0x3a854c=_0x41369b>0x0?'+':'',_0x2c853d=_0x463cb5['player']||_0x463cb5[_0x4b07d5(0x1bb)]||_0x463cb5['userId']||'N/A';_0x5f42d7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0xb5e663+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x2c853d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x463cb5['previousElo']||'N/A')+_0x4b07d5(0x1cc)+(_0x463cb5['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0xc200d9+'\x22>'+_0x3a854c+_0x41369b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x463cb5[_0x4b07d5(0x1ff)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x463cb5[_0x4b07d5(0x21d)]||_0x463cb5['promotedBy']||_0x463cb5['demotedBy']||_0x4b07d5(0x26e))+_0x4b07d5(0x33c),_0x73330d[_0x4b07d5(0x342)](_0x5f42d7);}),document[_0x223f09(0x226)](_0x4fc1b9+'-page-indicator')[_0x223f09(0x2e8)]=_0x223f09(0x32e);}catch(_0x7575f2){console['error']('Error\x20applying\x20filters:',_0x7575f2),_0x73330d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x7575f2[_0x223f09(0x26b)]+_0x223f09(0x175);}}function resetEloHistoryFilters(){const _0x1935db=a2_0xc86709;document['getElementById']('history-start-date')[_0x1935db(0x2d0)]='',document['getElementById']('history-end-date')['value']='',document['getElementById']('history-type-filter')['value']='all',document['getElementById']('elo-history-search')[_0x1935db(0x2d0)]='';const _0x4bdb97=currentLadder['toLowerCase']();eloHistoryPagination[_0x4bdb97]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x12cfdf=a2_0xc86709,_0x3ebf04=document['getElementById']('promote-player-btn'),_0x14bc35=document['getElementById']('promote-modal'),_0x372d4d=document[_0x12cfdf(0x226)](_0x12cfdf(0x167));_0x3ebf04&&_0x14bc35&&_0x372d4d&&(_0x3ebf04['addEventListener']('click',()=>{const _0x727684=_0x12cfdf;_0x14bc35['classList'][_0x727684(0x1f3)]('active');}),_0x14bc35['addEventListener']('click',_0x5380bb=>{const _0x7f9e82=_0x12cfdf;_0x5380bb['target']===_0x14bc35&&_0x14bc35[_0x7f9e82(0x2b9)]['remove']('active');}),_0x372d4d[_0x12cfdf(0x2c6)](_0x12cfdf(0x25a),async _0x4a003b=>{const _0x4c5e33=_0x12cfdf;_0x4a003b[_0x4c5e33(0x389)]();const _0x4a9e4a=document[_0x4c5e33(0x226)]('promote-username'),_0x3830aa=document[_0x4c5e33(0x226)]('promote-ladder'),_0x325406=_0x4a9e4a['value']['trim'](),_0x41ef2d=_0x3830aa[_0x4c5e33(0x2d0)];if(!_0x325406){showNotification(_0x4c5e33(0x2b1),'error');return;}try{await promotePlayer(_0x325406,_0x41ef2d),_0x14bc35['classList']['remove'](_0x4c5e33(0x2a0)),_0x4a9e4a['value']='';}catch(_0x703e05){showNotification(_0x703e05['message'],_0x4c5e33(0x2b6));}}),document['getElementById']('cancel-promote-btn')[_0x12cfdf(0x2c6)](_0x12cfdf(0x284),()=>{const _0x154ea6=_0x12cfdf;_0x14bc35['classList'][_0x154ea6(0x14c)](_0x154ea6(0x2a0));}));const _0xeb3084=document['getElementById']('demote-player-btn'),_0xa8c368=document['getElementById'](_0x12cfdf(0x294)),_0x2104cd=document[_0x12cfdf(0x226)]('demote-form');_0xeb3084&&_0xa8c368&&_0x2104cd&&(_0xeb3084['addEventListener']('click',()=>{_0xa8c368['classList']['add']('active');}),_0xa8c368['addEventListener']('click',_0x42af7c=>{const _0x2c4d2f=_0x12cfdf;_0x42af7c['target']===_0xa8c368&&_0xa8c368[_0x2c4d2f(0x2b9)][_0x2c4d2f(0x14c)]('active');}),_0x2104cd['addEventListener']('submit',async _0x40e94b=>{const _0x21c2d7=_0x12cfdf;_0x40e94b[_0x21c2d7(0x389)]();const _0x253447=document[_0x21c2d7(0x226)]('demote-username'),_0x450587=document['getElementById']('demote-ladder'),_0x154139=_0x253447[_0x21c2d7(0x2d0)]['trim'](),_0x4f1267=_0x450587['value'];if(!_0x154139){alert(_0x21c2d7(0x2b1));return;}try{await demotePlayer(_0x154139,_0x4f1267),document[_0x21c2d7(0x226)]('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x557cd0){console['error']('Error\x20in\x20demotion:',_0x557cd0);}}));const _0x2cba00=document['getElementById']('set-elo-btn'),_0xf0bd24=document[_0x12cfdf(0x226)]('set-elo-modal'),_0x117620=document['getElementById'](_0x12cfdf(0x396));_0x2cba00&&_0xf0bd24&&_0x117620&&(_0x2cba00['addEventListener'](_0x12cfdf(0x284),()=>{const _0x54a23b=_0x12cfdf;_0xf0bd24[_0x54a23b(0x2b9)]['add']('active');}),_0xf0bd24['addEventListener']('click',_0x48b107=>{const _0x245ee4=_0x12cfdf;_0x48b107['target']===_0xf0bd24&&_0xf0bd24[_0x245ee4(0x2b9)]['remove']('active');}),_0x117620['addEventListener'](_0x12cfdf(0x25a),async _0x2ae220=>{const _0x56ed1f=_0x12cfdf;_0x2ae220['preventDefault']();const _0x99a5bc=document['getElementById']('set-elo-username'),_0x584f32=document['getElementById'](_0x56ed1f(0x2b2));let _0x2679ab;const _0x1d1031=document[_0x56ed1f(0x226)]('set-elo-ladder'),_0x571649=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x1d1031)_0x2679ab=_0x1d1031['value'];else _0x571649?_0x2679ab=_0x571649[_0x56ed1f(0x2d0)]:_0x2679ab='D1';if(!_0x99a5bc||!_0x584f32){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x4dd57b=_0x99a5bc['value'][_0x56ed1f(0x2ec)](),_0x16290c=parseInt(_0x584f32['value']);if(!_0x4dd57b||isNaN(_0x16290c)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x4dd57b,_0x16290c,_0x2679ab),_0xf0bd24['classList']['remove'](_0x56ed1f(0x2a0)),_0x99a5bc['value']='',_0x584f32[_0x56ed1f(0x2d0)]='';}catch(_0x4b4bb1){showNotification(_0x4b4bb1['message'],'error');}}),document[_0x12cfdf(0x226)]('cancel-set-elo-btn')['addEventListener'](_0x12cfdf(0x284),()=>{_0xf0bd24['classList']['remove']('active');}));const _0x237a31=document['getElementById'](_0x12cfdf(0x308)),_0x4438b9=document['getElementById']('set-role-form');if(_0x237a31&&_0x4438b9){_0x237a31['addEventListener']('click',_0x2be75e=>{_0x2be75e['target']===_0x237a31&&closeModalHandler();}),_0x4438b9['addEventListener']('submit',async _0x272a14=>{const _0x3c25f2=_0x12cfdf;_0x272a14[_0x3c25f2(0x389)]();const _0x231b1a=document['getElementById']('role-username'),_0x5e32c3=document['getElementById'](_0x3c25f2(0x21c)),_0x2d96a9=document['getElementById'](_0x3c25f2(0x199)),_0x2fc89c=_0x231b1a[_0x3c25f2(0x2d0)]['trim'](),_0x1d258f=_0x5e32c3['value']['trim'](),_0x4f0e0a=_0x2d96a9['value'];if(!_0x2fc89c){showNotification('Username\x20is\x20missing',_0x3c25f2(0x2b6));return;}try{await setUserRole(_0x2fc89c,_0x1d258f,_0x4f0e0a),closeModalHandler(),loadUsersWithRoles();}catch(_0x2d4e69){}});const _0x32bf40=document['getElementById']('cancel-role-btn');_0x32bf40&&(_0x32bf40['removeEventListener']('click',closeModalHandler),_0x32bf40['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x49a82e,_0x5088bd){const _0x39d528=a2_0xc86709;try{console[_0x39d528(0x149)]('Attempting\x20to\x20promote\x20'+_0x49a82e+'\x20in\x20'+_0x5088bd+'\x20ladder');const _0x5e8044=auth['currentUser'];if(!_0x5e8044)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0xdaf641=_0x5088bd==='D2'?'playersD2':_0x39d528(0x28a),_0x508384=_0x5088bd==='D2'?'eloHistoryD2':'eloHistory';console['log'](_0x39d528(0x2e9)+_0xdaf641);const _0x2d794b=collection(db,_0xdaf641),_0x18baaf=query(_0x2d794b,where('username','==',_0x49a82e)),_0x2b7449=await getDocs(_0x18baaf);if(_0x2b7449['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x5088bd+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x5088bd+_0x39d528(0x18a));}const _0x1e923b=_0x2b7449['docs'][0x0],_0x3c5c86=_0x1e923b['data'](),_0x2af6f7=_0x3c5c86['eloRating']||0x4b0,_0x1d8a45=_0x1e923b['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x2af6f7);const _0x32b7aa=[{'name':_0x39d528(0x17c),'elo':0x578},{'name':_0x39d528(0x276),'elo':0x640},{'name':'Gold','elo':0x708},{'name':_0x39d528(0x35d),'elo':0x7d0}];let _0x54ccf1=_0x32b7aa['find'](_0x3c2523=>_0x3c2523[_0x39d528(0x286)]>_0x2af6f7);if(!_0x54ccf1){alert(_0x39d528(0x22f)+_0x5088bd+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x5088bd+_0x39d528(0x18a));}console[_0x39d528(0x149)](_0x39d528(0x202)+_0x54ccf1['name']+'\x20('+_0x54ccf1['elo']+')'),await updateDoc(doc(db,_0xdaf641,_0x1e923b['id']),{'eloRating':_0x54ccf1['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x5e8044['email']||_0x39d528(0x27e)}),await addDoc(collection(db,_0x508384),{'player':_0x49a82e,'previousElo':_0x2af6f7,'newElo':_0x54ccf1[_0x39d528(0x286)],'timestamp':serverTimestamp(),'type':_0x39d528(0x270),'rankAchieved':_0x54ccf1[_0x39d528(0x148)],'promotedBy':_0x5e8044['email']||'admin','gameMode':_0x5088bd});try{const {promotionManager:_0x41c040}=await import('./promotions.js'),_0x1ea619=_0x41c040[_0x39d528(0x215)](_0x2af6f7),_0x384691=_0x54ccf1['name'];await _0x41c040['sendPromotionNotification'](_0x1d8a45,_0x49a82e,_0x2af6f7,_0x54ccf1['elo'],_0x1ea619,_0x384691,_0x39d528(0x270),{'displayName':_0x49a82e,'source':'admin','adminUser':_0x5e8044['email'],'ladder':_0x5088bd}),console[_0x39d528(0x149)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x4ebdd5){console[_0x39d528(0x2b6)](_0x39d528(0x274),_0x4ebdd5);}return alert(_0x39d528(0x203)+_0x49a82e+_0x39d528(0x32b)+_0x54ccf1[_0x39d528(0x148)]+'\x20('+_0x54ccf1['elo']+')'),currentLadder===_0x5088bd&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x115a4a){console[_0x39d528(0x2b6)](_0x39d528(0x141),_0x115a4a),alert(_0x39d528(0x260)+_0x115a4a['message']);throw _0x115a4a;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x18b087=document['getElementById']('promote-form');_0x18b087&&_0x18b087['addEventListener']('submit',async _0x49f4f3=>{const _0xf1d43b=a2_0x1f9e;_0x49f4f3['preventDefault']();const _0x725cda=document['getElementById']('promote-username')['value']['trim'](),_0x4fcc68=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x725cda){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x725cda,_0x4fcc68),document['getElementById']('promote-modal')['classList'][_0xf1d43b(0x14c)]('active'),document[_0xf1d43b(0x226)]('promote-username')['value']='';}catch(_0x35c810){console['error']('Error\x20in\x20promotion:',_0x35c810);}});});async function demotePlayer(_0x5a2f1d,_0x595dc1){const _0x1dd5c1=a2_0xc86709;try{console[_0x1dd5c1(0x149)](_0x1dd5c1(0x283)+_0x5a2f1d+'\x20in\x20'+_0x595dc1+'\x20ladder');const _0x1f64aa=auth['currentUser'];if(!_0x1f64aa)throw new Error(_0x1dd5c1(0x181));const _0x1a3243=_0x595dc1==='D2'?'playersD2':_0x1dd5c1(0x28a),_0x55fb5c=_0x595dc1==='D2'?'eloHistoryD2':'eloHistory';console[_0x1dd5c1(0x149)]('Searching\x20for\x20player\x20in\x20'+_0x1a3243);const _0x3e9eaf=collection(db,_0x1a3243),_0x3baedf=query(_0x3e9eaf,where('username','==',_0x5a2f1d)),_0x5e325b=await getDocs(_0x3baedf);if(_0x5e325b[_0x1dd5c1(0x2e3)]){alert(_0x1dd5c1(0x1eb)+_0x595dc1+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x595dc1+'\x20ladder');}const _0x2adaae=_0x5e325b['docs'][0x0],_0x32f09b=_0x2adaae['data'](),_0x198db8=_0x32f09b['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x198db8);const _0x34d411=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x5e00bf=_0x34d411['find'](_0x5318b2=>_0x5318b2['elo']<_0x198db8);if(!_0x5e00bf){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x595dc1+'\x20ladder');throw new Error(_0x1dd5c1(0x397)+_0x595dc1+'\x20ladder');}console['log']('Demoting\x20player\x20to\x20'+_0x5e00bf[_0x1dd5c1(0x148)]+'\x20('+_0x5e00bf['elo']+')'),await updateDoc(doc(db,_0x1a3243,_0x2adaae['id']),{'eloRating':_0x5e00bf['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x1f64aa[_0x1dd5c1(0x371)]||'admin'}),await addDoc(collection(db,_0x55fb5c),{'player':_0x5a2f1d,'previousElo':_0x198db8,'newElo':_0x5e00bf['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x5e00bf[_0x1dd5c1(0x148)],'demotedBy':_0x1f64aa['email']||'admin','gameMode':_0x595dc1});try{const {promotionManager:_0x2f5f6d}=await import('./promotions.js'),_0x497dc0=_0x2f5f6d[_0x1dd5c1(0x215)](_0x198db8),_0x351425=_0x5e00bf['name'];await _0x2f5f6d['sendPromotionNotification'](_0x2adaae['id'],_0x5a2f1d,_0x198db8,_0x5e00bf['elo'],_0x497dc0,_0x351425,'demotion',{'displayName':_0x5a2f1d,'source':'admin','adminUser':_0x1f64aa['email'],'ladder':_0x595dc1}),console[_0x1dd5c1(0x149)]('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x494c61){console['error'](_0x1dd5c1(0x274),_0x494c61);}return alert('Successfully\x20demoted\x20'+_0x5a2f1d+'\x20to\x20'+_0x5e00bf['name']+'\x20('+_0x5e00bf['elo']+')'),currentLadder===_0x595dc1&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x3186ed){console['error']('Error\x20demoting\x20player:',_0x3186ed),alert(_0x1dd5c1(0x164)+_0x3186ed[_0x1dd5c1(0x26b)]);throw _0x3186ed;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x4cd3ed=a2_0xc86709,_0x1f332c=document['getElementById']('demote-form');_0x1f332c&&_0x1f332c[_0x4cd3ed(0x2c6)](_0x4cd3ed(0x25a),async _0x48e69f=>{const _0x461e79=_0x4cd3ed;_0x48e69f['preventDefault']();const _0x106ea3=document['getElementById'](_0x461e79(0x290))[_0x461e79(0x2d0)][_0x461e79(0x2ec)](),_0x58f0f8=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')[_0x461e79(0x2d0)];if(!_0x106ea3){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x106ea3,_0x58f0f8),document['getElementById']('demote-modal')['classList'][_0x461e79(0x14c)]('active'),document['getElementById']('demote-username')[_0x461e79(0x2d0)]='';}catch(_0x18b624){console['error'](_0x461e79(0x2bc),_0x18b624);}});});async function setCustomElo(_0x4dd127,_0x2094e6,_0x45eb34){const _0x5b68f3=a2_0xc86709;try{const _0x139500=auth['currentUser'];if(!_0x139500||!isAdmin(_0x139500['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0xcda3e3=_0x45eb34==='D2'?'playersD2':_0x5b68f3(0x28a),_0x1b9f0f=_0x45eb34==='D2'?_0x5b68f3(0x16a):'eloHistory',_0x4b435e=collection(db,_0xcda3e3),_0x402a0e=query(_0x4b435e,where('username','==',_0x4dd127)),_0x388b5b=await getDocs(_0x402a0e);if(_0x388b5b[_0x5b68f3(0x2e3)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x45eb34+'\x20ladder');const _0xd0c634=_0x388b5b[_0x5b68f3(0x353)][0x0],_0x37bd2b=_0xd0c634['data'](),_0x8a18f1=_0x37bd2b[_0x5b68f3(0x2ea)]||0x4b0,_0x2ff742=writeBatch(db);_0x2ff742['update'](doc(db,_0xcda3e3,_0xd0c634['id']),{'eloRating':_0x2094e6,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x139500['email']});const _0x2a923f=doc(collection(db,_0x1b9f0f));return _0x2ff742['set'](_0x2a923f,{'player':_0x4dd127,'previousElo':_0x8a18f1,'newElo':_0x2094e6,'timestamp':serverTimestamp(),'type':_0x5b68f3(0x242),'modifiedBy':_0x139500['email'],'gameMode':_0x45eb34}),await _0x2ff742['commit'](),showNotification(_0x5b68f3(0x2a1)+_0x4dd127+_0x5b68f3(0x2e4)+_0x8a18f1+_0x5b68f3(0x32b)+_0x2094e6,'success'),currentLadder===_0x45eb34&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x41ffca){console['error'](_0x5b68f3(0x237),_0x41ffca);throw _0x41ffca;}}async function setUserRole(_0x5aaa53,_0x51f4f6,_0xbbd7c5){const _0x353856=a2_0xc86709;try{const _0x17beef=auth['currentUser'];if(!_0x17beef||!isAdmin(_0x17beef[_0x353856(0x371)]))throw new Error(_0x353856(0x33d));const _0x146308=_0x51f4f6?_0x51f4f6[_0x353856(0x2ec)]():null,_0x618754=_0x146308?_0xbbd7c5||'#808080':null,[_0x1981dd,_0x260532]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x5aaa53))),getDocs(query(collection(db,'playersD2'),where(_0x353856(0x1bb),'==',_0x5aaa53)))]),_0x41fab7=[];if(!_0x1981dd['empty'])_0x41fab7['push']({'ref':_0x1981dd['docs'][0x0]['ref'],'source':'D1'});if(!_0x260532[_0x353856(0x2e3)])_0x41fab7['push']({'ref':_0x260532[_0x353856(0x353)][0x0][_0x353856(0x2e1)],'source':'D2'});if(_0x41fab7['length']===0x0){const [_0x3dfdbe,_0x1d3b88]=await Promise[_0x353856(0x343)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x5aaa53))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x5aaa53)))]);if(!_0x3dfdbe['empty'])_0x41fab7[_0x353856(0x241)]({'ref':_0x3dfdbe['docs'][0x0]['ref'],'source':_0x353856(0x1b7)});if(!_0x1d3b88['empty'])_0x41fab7[_0x353856(0x241)]({'ref':_0x1d3b88['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x41fab7['length']===0x0)throw new Error('User\x20\x22'+_0x5aaa53+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x775e3b=writeBatch(db);_0x41fab7['forEach'](_0x5ce37f=>{const _0x52e593=_0x353856;console['log'](_0x52e593(0x37a)+_0x5aaa53+'\x20in\x20'+_0x5ce37f['source']),!_0x146308?_0x775e3b['update'](_0x5ce37f[_0x52e593(0x2e1)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x775e3b['update'](_0x5ce37f['ref'],{'roleName':_0x146308,'roleColor':_0x618754,'roleAssignedBy':_0x17beef[_0x52e593(0x371)],'roleAssignedAt':serverTimestamp()});}),await _0x775e3b['commit']();const _0x20a9fc=_0x146308?'Role\x20\x22'+_0x146308+_0x353856(0x213):'Role\x20removed';return showNotification(_0x20a9fc+'\x20for\x20user\x20\x22'+_0x5aaa53+'\x22',_0x353856(0x295)),!![];}catch(_0x2b6fd9){console['error']('Error\x20setting\x20user\x20role:',_0x2b6fd9),showNotification('Error:\x20'+_0x2b6fd9[_0x353856(0x26b)],'error');throw _0x2b6fd9;}}function showNotification(_0x5a84b5,_0x2e66bb='info'){const _0x53e3ae=a2_0xc86709,_0x565086=document['createElement']('div');_0x565086['className']=_0x53e3ae(0x1e3)+_0x2e66bb,_0x565086['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x2e66bb)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x5a84b5+_0x53e3ae(0x398),document['body']['appendChild'](_0x565086),setTimeout(()=>{const _0x44033f=_0x53e3ae;_0x565086['classList'][_0x44033f(0x1f3)](_0x44033f(0x2a0));},0xa);const _0x481504=setTimeout(()=>{closeNotification(_0x565086);},0x1388);_0x565086['querySelector'](_0x53e3ae(0x163))['addEventListener']('click',()=>{clearTimeout(_0x481504),closeNotification(_0x565086);});}function getNotificationIcon(_0x32c324){const _0xc629f3=a2_0xc86709;switch(_0x32c324){case _0xc629f3(0x295):return _0xc629f3(0x20b);case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case'info':default:return'fa-info-circle';}}function closeNotification(_0x4565c1){_0x4565c1['classList']['remove']('active'),setTimeout(()=>{_0x4565c1['remove']();},0x12c);}function setupUserRolesSection(){const _0x126d4c=a2_0xc86709,_0x4ab6db=document['getElementById']('load-users-data');_0x4ab6db&&_0x4ab6db[_0x126d4c(0x2c6)]('click',function(){const _0x3883a0=_0x126d4c;this['classList'][_0x3883a0(0x1f3)]('loading'),this[_0x3883a0(0x15d)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x1f3a6f=_0x3883a0;this['classList']['remove']('loading'),this['innerHTML']=_0x1f3a6f(0x384);})['catch'](_0x5b1b73=>{const _0x2c1486=_0x3883a0;console['error']('Error\x20loading\x20users:',_0x5b1b73),this['classList'][_0x2c1486(0x14c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x58cccc=document['getElementById']('add-new-role-btn');_0x58cccc&&_0x58cccc[_0x126d4c(0x2c6)]('click',()=>{const _0x23582d=_0x126d4c,_0x2bcd9=document['getElementById']('set-role-modal');_0x2bcd9&&_0x2bcd9[_0x23582d(0x2b9)][_0x23582d(0x1f3)]('active');});const _0xac4724=document[_0x126d4c(0x226)]('user-search');_0xac4724&&_0xac4724[_0x126d4c(0x2c6)]('input',debounce(filterUsersTable,0x12c));const _0x320f2a=document[_0x126d4c(0x226)]('role-filter');_0x320f2a&&_0x320f2a['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x5bcba4=a2_0xc86709,_0x410518=document['getElementById']('users-table-body');if(!_0x410518)return;_0x410518['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x7e8b9f,_0x4a3ae7,_0x2d0fee,_0x2ece5b]=await Promise[_0x5bcba4(0x343)]([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x14e7f5=new Map();function _0x3dc3df(_0x2db696,_0x328c9b){_0x2db696['forEach'](_0x23f025=>{const _0x4f5c30=a2_0x1f9e,_0x3d0e3=_0x23f025['data']();if(!_0x3d0e3['username'])return;if(!_0x14e7f5[_0x4f5c30(0x1a8)](_0x3d0e3[_0x4f5c30(0x1bb)]))_0x14e7f5[_0x4f5c30(0x25e)](_0x3d0e3['username'],{'username':_0x3d0e3[_0x4f5c30(0x1bb)],'roleName':_0x3d0e3[_0x4f5c30(0x1a5)]||null,'roleColor':_0x3d0e3['roleColor']||null,'roleAssignedBy':_0x3d0e3[_0x4f5c30(0x168)]||null,'roleAssignedAt':_0x3d0e3['roleAssignedAt']||null,'sources':[_0x328c9b]});else{const _0x350037=_0x14e7f5['get'](_0x3d0e3['username']);_0x3d0e3['roleName']&&(!_0x350037['roleName']||_0x328c9b==='D1'||_0x328c9b==='D2')&&(_0x350037[_0x4f5c30(0x1a5)]=_0x3d0e3['roleName'],_0x350037['roleColor']=_0x3d0e3['roleColor'],_0x350037['roleAssignedBy']=_0x3d0e3['roleAssignedBy'],_0x350037['roleAssignedAt']=_0x3d0e3['roleAssignedAt']),!_0x350037['sources'][_0x4f5c30(0x354)](_0x328c9b)&&_0x350037['sources']['push'](_0x328c9b);}});}_0x3dc3df(_0x7e8b9f,'D1'),_0x3dc3df(_0x4a3ae7,'D2'),_0x3dc3df(_0x2d0fee,'Non-Participant'),_0x3dc3df(_0x2ece5b,'Profile');const _0x35ab7c=Array['from'](_0x14e7f5['values']())['sort']((_0x1a89ac,_0x3f74f8)=>_0x1a89ac['username']['localeCompare'](_0x3f74f8[_0x5bcba4(0x1bb)]));if(_0x35ab7c[_0x5bcba4(0x1dc)]===0x0){_0x410518['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x410518['innerHTML']='',_0x35ab7c['forEach'](_0x183745=>{const _0x93b1eb=_0x5bcba4,_0x8de4ce=document['createElement']('tr');_0x8de4ce['dataset']['username']=_0x183745[_0x93b1eb(0x1bb)],_0x8de4ce['dataset']['roleName']=_0x183745[_0x93b1eb(0x1a5)]||'',_0x8de4ce[_0x93b1eb(0x246)]['roleColor']=_0x183745['roleColor']||'#808080';const _0x3c68f4=_0x183745['roleAssignedAt']?new Date(_0x183745[_0x93b1eb(0x259)]['seconds']*0x3e8)[_0x93b1eb(0x378)]():_0x93b1eb(0x34e),_0x380adf=_0x183745['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x183745['roleColor']+';\x20color:\x20'+getContrastColor(_0x183745[_0x93b1eb(0x2df)])+_0x93b1eb(0x2f9)+_0x183745['roleName']+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x8de4ce['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x183745[_0x93b1eb(0x1bb)]+'\x20<span\x20class=\x22user-source\x22>('+_0x183745['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x380adf+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x183745['roleAssignedBy']||'N/A')+_0x93b1eb(0x393)+_0x3c68f4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x183745['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x183745['roleName']?_0x93b1eb(0x32f)+_0x183745['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x410518['appendChild'](_0x8de4ce);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x1c6b80=>{const _0x10401b=_0x5bcba4;_0x1c6b80['addEventListener'](_0x10401b(0x284),()=>{const _0xd8a28=_0x10401b,_0x568724=_0x1c6b80['dataset'][_0xd8a28(0x1bb)];openRoleEditModal(_0x568724);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x421f50=>{_0x421f50['addEventListener']('click',()=>{const _0xf0aec4=a2_0x1f9e,_0xa23103=_0x421f50['dataset']['username'];confirm(_0xf0aec4(0x335)+_0xa23103+'?')&&setUserRole(_0xa23103,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x20d0f7=>console[_0xf0aec4(0x2b6)]('Error\x20removing\x20role:',_0x20d0f7));});});}catch(_0x904f28){console['error']('Error\x20loading\x20users:',_0x904f28),_0x410518[_0x5bcba4(0x15d)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x441cc9){const _0x264b70=a2_0xc86709;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x441cc9);const _0xa5096b=document['getElementById']('set-role-modal'),_0x35e618=document[_0x264b70(0x226)]('role-username'),_0x499267=document[_0x264b70(0x226)]('user-role');if(!_0xa5096b){console[_0x264b70(0x2b6)](_0x264b70(0x1b2)),alert(_0x264b70(0x338));return;}console[_0x264b70(0x149)]('Modal\x20element\x20found:',_0xa5096b);_0x35e618?(_0x35e618['value']=_0x441cc9,console['log']('Username\x20input\x20set\x20to:\x20'+_0x441cc9)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x11665d=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x441cc9+'\x22]');if(_0x11665d&&_0x499267){const _0x5e37cb=_0x11665d['dataset']['role'];_0x499267[_0x264b70(0x2d0)]=_0x5e37cb==='none'?'':_0x5e37cb,console['log'](_0x264b70(0x1da)+_0x499267['value']+_0x264b70(0x319)+_0x5e37cb+')');}else{if(!_0x11665d)console[_0x264b70(0x31b)]('Table\x20row\x20for\x20user\x20'+_0x441cc9+'\x20not\x20found.');if(!_0x499267)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x499267)_0x499267['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0xa5096b['classList']['add']('active');const _0x2e491b=document['getElementById']('cancel-role-btn');_0x2e491b?(console[_0x264b70(0x149)](_0x264b70(0x212)),_0x2e491b[_0x264b70(0x249)]('click',closeModalHandler),_0x2e491b['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0xa5096b['removeEventListener'](_0x264b70(0x284),closeModalBackgroundHandler),_0xa5096b['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x210327){const _0x40cada=a2_0xc86709;_0x210327[_0x40cada(0x1a2)]===this&&closeModalHandler();}function closeModalHandler(){const _0x1fe721=a2_0xc86709,_0x117b2b=document[_0x1fe721(0x226)]('set-role-modal');_0x117b2b&&(_0x117b2b['classList']['remove']('active'),_0x117b2b['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x23000f=a2_0xc86709,_0x4c5ebc=document['getElementById'](_0x23000f(0x250))?.['value'][_0x23000f(0x35a)]()||'',_0x22b89c=document['getElementById']('role-filter')?.['value']||'all',_0x22b625=document['querySelectorAll']('#users-table-body\x20tr');let _0x1a5b2d=0x0;_0x22b625[_0x23000f(0x1e8)](_0x173a86=>{const _0x50a97b=_0x23000f;if(_0x173a86['querySelector']('.loading-cell')||_0x173a86[_0x50a97b(0x29c)]('.empty-state')||_0x173a86['querySelector']('.error-state'))return;const _0x94254b=_0x173a86[_0x50a97b(0x246)][_0x50a97b(0x1bb)]?.[_0x50a97b(0x35a)]()||'',_0x1a82bb=_0x173a86['dataset']['role']||_0x50a97b(0x182),_0x153ddd=_0x94254b['includes'](_0x4c5ebc),_0x20d675=_0x22b89c==='all'||_0x1a82bb===_0x22b89c;_0x153ddd&&_0x20d675?(_0x173a86['style']['display']='',_0x1a5b2d++):_0x173a86['style']['display']='none';});if(_0x1a5b2d===0x0&&_0x22b625['length']>0x0){const _0xcff870=document[_0x23000f(0x226)]('users-table-body');if(_0xcff870){if(!_0xcff870[_0x23000f(0x29c)]('.no-results')){const _0x513b1a=document[_0x23000f(0x32c)]('tr');_0x513b1a['classList']['add'](_0x23000f(0x2bd)),_0x513b1a['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0xcff870['appendChild'](_0x513b1a);}}}else{const _0x17a6fe=document['querySelector'](_0x23000f(0x29d));_0x17a6fe&&_0x17a6fe[_0x23000f(0x14c)]();}}function setupManageArticlesSection(){const _0x4695c0=a2_0xc86709,_0x23cfa2=document['getElementById']('load-articles-data');_0x23cfa2&&_0x23cfa2['addEventListener']('click',function(){this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x20a4e8=a2_0x1f9e;this['classList'][_0x20a4e8(0x14c)](_0x20a4e8(0x36e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x1f710c=>{console['error']('Error\x20loading\x20articles:',_0x1f710c),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x38f482=a2_0x1f9e;this[_0x38f482(0x15d)]=_0x38f482(0x2c8);},0xbb8);});});const _0x5eb4da=document['getElementById']('create-new-article-btn');_0x5eb4da?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x5eb4da['style']['display']='block',_0x5eb4da['addEventListener']('click',()=>{openArticleModal();})):console[_0x4695c0(0x2b6)](_0x4695c0(0x33f));const _0xa22ffc=document['getElementById']('article-form');_0xa22ffc&&_0xa22ffc['addEventListener'](_0x4695c0(0x25a),_0x4cf290=>{_0x4cf290['preventDefault'](),saveArticle();});const _0x45ee9d=document['getElementById']('cancel-article-btn');_0x45ee9d&&_0x45ee9d['addEventListener']('click',()=>{closeArticleModal();});const _0x5a10cb=document[_0x4695c0(0x29c)](_0x4695c0(0x2d3));_0x5a10cb&&_0x5a10cb['addEventListener']('click',()=>{closeArticleModal();});const _0x1c283c=document['getElementById']('article-modal');_0x1c283c&&_0x1c283c['addEventListener'](_0x4695c0(0x284),_0x3d2353=>{_0x3d2353['target']===_0x1c283c&&closeArticleModal();});}async function loadArticles(){const _0x101c31=a2_0xc86709,_0x2b7c6b=document['getElementById'](_0x101c31(0x188));if(!_0x2b7c6b)return;_0x2b7c6b['innerHTML']=_0x101c31(0x2bf);try{const _0x2a38dd=collection(db,'articles'),_0x10389a=query(_0x2a38dd,orderBy(_0x101c31(0x24f),'desc')),_0x50d29f=await getDocs(_0x10389a);if(_0x50d29f[_0x101c31(0x2e3)]){_0x2b7c6b['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x2b7c6b['innerHTML']='',_0x50d29f[_0x101c31(0x1e8)](_0xff2bd4=>{const _0x4944af=_0x101c31,_0x4b7827=_0xff2bd4[_0x4944af(0x14f)](),_0x56da6e=document['createElement']('tr'),_0x4df61c=_0x4b7827[_0x4944af(0x24f)]?new Date(_0x4b7827[_0x4944af(0x24f)]['seconds']*0x3e8)['toLocaleString']():'N/A';_0x56da6e[_0x4944af(0x15d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4b7827[_0x4944af(0x369)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4b7827[_0x4944af(0x234)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4df61c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0xff2bd4['id']+_0x4944af(0x358)+_0xff2bd4['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2b7c6b['appendChild'](_0x56da6e);}),setupArticleActionButtons();}catch(_0x26c8f5){console['error']('Error\x20loading\x20articles:',_0x26c8f5),_0x2b7c6b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x26c8f5['message']+_0x101c31(0x175);}}function setupArticleActionButtons(){document['querySelectorAll']('.edit-article-btn')['forEach'](_0x25b9af=>{_0x25b9af['addEventListener']('click',async _0x52d2a4=>{const _0xf5d6cc=_0x52d2a4['currentTarget']['dataset']['id'];openArticleModal(_0xf5d6cc);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x1b7d46=>{const _0x4aa35c=a2_0x1f9e;_0x1b7d46['addEventListener'](_0x4aa35c(0x284),async _0x4b0eff=>{const _0x3f71af=_0x4b0eff['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x3f71af);});});}function openArticleModal(_0x536279=null){const _0x2502a0=a2_0xc86709,_0x5af036=document[_0x2502a0(0x226)]('article-modal'),_0x4d3af7=document[_0x2502a0(0x226)]('article-modal-title'),_0x237e94=document['getElementById']('article-form'),_0x11ff13=document['getElementById']('article-id');_0x237e94[_0x2502a0(0x214)](),_0x11ff13['value']='';if(_0x536279)_0x4d3af7[_0x2502a0(0x2e8)]='Edit\x20Article',_0x11ff13['value']=_0x536279,loadArticleData(_0x536279);else{_0x4d3af7['textContent']='Create\x20Article';const _0x2d29e6=auth[_0x2502a0(0x29b)];if(_0x2d29e6){const _0x398f31=document['getElementById'](_0x2502a0(0x350));if(_0x398f31&&_0x2d29e6['displayName'])_0x398f31['value']=_0x2d29e6['displayName'];else _0x398f31&&(_0x398f31[_0x2502a0(0x2d0)]=_0x2d29e6['email']);}}_0x5af036['classList']['add']('active');}async function loadArticleData(_0x57eba2){const _0x54c16c=a2_0xc86709;try{const _0x58b82b=doc(db,'articles',_0x57eba2),_0x6e802d=await getDoc(_0x58b82b);if(!_0x6e802d['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x1c78f1=_0x6e802d[_0x54c16c(0x14f)]();document[_0x54c16c(0x226)](_0x54c16c(0x27f))['value']=_0x1c78f1['title']||'',document['getElementById'](_0x54c16c(0x350))['value']=_0x1c78f1[_0x54c16c(0x234)]||'',document['getElementById']('article-image-url')['value']=_0x1c78f1['imageUrl']||'',document['getElementById']('article-content')['value']=_0x1c78f1['content']||'';}catch(_0x11afa8){console['error']('Error\x20loading\x20article\x20data:',_0x11afa8),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x1e79d7=a2_0xc86709;try{const _0x5d8c11=document['getElementById']('article-id')['value'],_0x1abed0=document['getElementById']('article-title')['value']['trim'](),_0x4a6822=document['getElementById'](_0x1e79d7(0x350))['value']['trim'](),_0x1c76eb=document['getElementById'](_0x1e79d7(0x1b1))['value']['trim'](),_0x5e9f86=document[_0x1e79d7(0x226)]('article-content')[_0x1e79d7(0x2d0)][_0x1e79d7(0x2ec)]();if(!_0x1abed0||!_0x5e9f86){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x5655c5=auth[_0x1e79d7(0x29b)];if(!_0x5655c5){showNotification(_0x1e79d7(0x2ac),'error');return;}const _0x3a9d71={'title':_0x1abed0,'author':_0x4a6822,'imageUrl':_0x1c76eb||null,'content':_0x5e9f86,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5655c5[_0x1e79d7(0x371)]};!_0x5d8c11?(_0x3a9d71['createdAt']=serverTimestamp(),_0x3a9d71['createdBy']=_0x5655c5['email'],await addDoc(collection(db,'articles'),_0x3a9d71),showNotification(_0x1e79d7(0x166),'success')):(await updateDoc(doc(db,'articles',_0x5d8c11),_0x3a9d71),showNotification(_0x1e79d7(0x219),_0x1e79d7(0x295))),closeArticleModal(),loadArticles();}catch(_0x4dd33c){console['error']('Error\x20saving\x20article:',_0x4dd33c),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x4dd33c['message'],_0x1e79d7(0x2b6));}}function closeArticleModal(){const _0x3234f6=a2_0xc86709,_0x59914c=document['getElementById']('article-modal');_0x59914c&&_0x59914c['classList'][_0x3234f6(0x14c)](_0x3234f6(0x2a0));}async function confirmDeleteArticle(_0x35304f){const _0x5f3f51=a2_0xc86709;if(confirm(_0x5f3f51(0x2a4)))try{await deleteDoc(doc(db,'articles',_0x35304f)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x2d4571){console['error']('Error\x20deleting\x20article:',_0x2d4571),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x2d4571['message'],'error');}}function setupTrophyManagementSection(){const _0x267ce2=a2_0xc86709,_0x5848bd=document['getElementById']('load-trophies-data');_0x5848bd&&_0x5848bd[_0x267ce2(0x2c6)](_0x267ce2(0x284),function(){const _0x1d6834=_0x267ce2;this['classList']['add']('loading'),this['innerHTML']=_0x1d6834(0x233);const _0x4fe812=document[_0x1d6834(0x226)]('assign-trophy-image');_0x4fe812&&(_0x4fe812[_0x1d6834(0x153)]=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x513b9a=>{const _0x214496=_0x1d6834;console[_0x214496(0x2b6)]('Error\x20loading\x20trophies:',_0x513b9a),this['classList'][_0x214496(0x14c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x46f98f=_0x214496;this[_0x46f98f(0x15d)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0xeb700e=document[_0x267ce2(0x226)]('create-new-trophy-btn');_0xeb700e&&_0xeb700e[_0x267ce2(0x2c6)]('click',()=>{openTrophyModal();});const _0x40bf2f=document['getElementById'](_0x267ce2(0x33a));_0x40bf2f&&_0x40bf2f['addEventListener'](_0x267ce2(0x25a),_0x25dcd2=>{_0x25dcd2['preventDefault'](),saveTrophyDefinition();});const _0x4e7b31=document['getElementById']('cancel-trophy-btn');_0x4e7b31&&_0x4e7b31['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')[_0x267ce2(0x1e8)](_0x897b93=>{_0x897b93['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x244a1f=document['getElementById']('trophy-modal');_0x244a1f&&_0x244a1f['addEventListener']('click',_0x56e402=>{_0x56e402['target']===_0x244a1f&&closeTrophyModal();});const _0x46a964=document['getElementById']('assign-trophy-modal');_0x46a964&&_0x46a964['addEventListener']('click',_0x12b6ea=>{_0x12b6ea['target']===_0x46a964&&closeAssignTrophyModal();});const _0x289b52=document[_0x267ce2(0x226)]('assign-trophy-form');_0x289b52&&_0x289b52['addEventListener']('submit',_0x48d4e5=>{_0x48d4e5['preventDefault'](),assignTrophyToPlayer();});const _0x3d16f7=document[_0x267ce2(0x226)]('cancel-assign-btn');_0x3d16f7&&_0x3d16f7[_0x267ce2(0x2c6)]('click',()=>{closeAssignTrophyModal();});const _0x223ca8=document[_0x267ce2(0x226)](_0x267ce2(0x204));_0x223ca8&&(_0x223ca8[_0x267ce2(0x2c6)](_0x267ce2(0x1ac),updateTrophyImagePreview),_0x223ca8['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x46c79a=a2_0xc86709,_0x108fe1=document['getElementById']('trophy-image-url')['value']['trim'](),_0x4b1fa4=document['getElementById'](_0x46c79a(0x177));if(!_0x4b1fa4){const _0xe2db27=document['getElementById'](_0x46c79a(0x204))['closest']('.form-group'),_0x216b7a=document['createElement']('div');_0x216b7a['id']=_0x46c79a(0x177),_0x216b7a['className']='trophy-preview-container',_0xe2db27['appendChild'](_0x216b7a);const _0x5bd617=document[_0x46c79a(0x32c)]('img');_0x5bd617['id']='trophy-preview-img',_0x5bd617['alt']=_0x46c79a(0x2d1),_0x5bd617['onerror']=function(){const _0x1a280a=_0x46c79a;this[_0x1a280a(0x380)]=DEFAULT_TROPHY_IMAGE,this['classList']['add'](_0x1a280a(0x2b6));},_0x216b7a['appendChild'](_0x5bd617);}const _0x4f7092=document['getElementById']('trophy-preview-img');_0x108fe1?(_0x4f7092['src']=_0x108fe1,_0x4f7092['style'][_0x46c79a(0x1ed)]='block',_0x4f7092['classList']['remove'](_0x46c79a(0x2b6))):(_0x4f7092['src']=DEFAULT_TROPHY_IMAGE,_0x4f7092[_0x46c79a(0x178)]['display']='block');}async function loadTrophyDefinitions(){const _0x4f3af5=a2_0xc86709,_0x3731ec=document['getElementById'](_0x4f3af5(0x325));if(!_0x3731ec)return;_0x3731ec['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x265ed4=collection(db,'trophyDefinitions'),_0x4b2284=query(_0x265ed4,orderBy('createdAt',_0x4f3af5(0x2aa))),_0x3bc263=await getDocs(_0x4b2284);if(_0x3bc263[_0x4f3af5(0x2e3)]){_0x3731ec['innerHTML']=_0x4f3af5(0x37e);return;}_0x3731ec['innerHTML']='',_0x3bc263[_0x4f3af5(0x1e8)](_0x575b92=>{const _0x150e18=_0x4f3af5,_0xa6ab03=_0x575b92[_0x150e18(0x14f)](),_0x423fcd=document[_0x150e18(0x32c)]('tr'),_0x1d686f=_0xa6ab03['createdAt']?new Date(_0xa6ab03[_0x150e18(0x24f)]['seconds']*0x3e8)[_0x150e18(0x349)]():'N/A';_0x423fcd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0xa6ab03['image']||DEFAULT_TROPHY_IMAGE)+_0x150e18(0x239)+_0xa6ab03['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+_0x150e18(0x382)+(_0xa6ab03[_0x150e18(0x148)]||'Untitled\x20Trophy')+_0x150e18(0x38a)+(_0xa6ab03['rarity']||'common')+'\x22>'+(_0xa6ab03['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d686f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x575b92['id']+_0x150e18(0x34d)+_0x575b92['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x575b92['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3731ec[_0x150e18(0x342)](_0x423fcd);}),setupTrophyActionButtons();}catch(_0x43a947){console[_0x4f3af5(0x2b6)](_0x4f3af5(0x1af),_0x43a947),_0x3731ec[_0x4f3af5(0x15d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x43a947['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x4e7eb1=a2_0xc86709;document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0xf98399=>{const _0x55da6d=a2_0x1f9e;_0xf98399[_0x55da6d(0x2c6)]('click',_0x46cf01=>{const _0x523a4b=_0x46cf01['currentTarget']['dataset']['id'];openTrophyModal(_0x523a4b);});}),document['querySelectorAll'](_0x4e7eb1(0x2e6))['forEach'](_0x55bd32=>{const _0x48c3f3=_0x4e7eb1;_0x55bd32[_0x48c3f3(0x2c6)]('click',_0x24ee4e=>{const _0x501d0f=_0x48c3f3,_0xb92be=_0x24ee4e['currentTarget'][_0x501d0f(0x246)]['id'];openAssignTrophyModal(_0xb92be);});}),document[_0x4e7eb1(0x312)]('.delete-trophy-btn')['forEach'](_0x75b64b=>{const _0x5b13f0=_0x4e7eb1;_0x75b64b['addEventListener'](_0x5b13f0(0x284),_0x28c3c6=>{const _0x5883f9=_0x5b13f0,_0x1dbe91=_0x28c3c6[_0x5883f9(0x1ea)][_0x5883f9(0x246)]['id'];confirmDeleteTrophy(_0x1dbe91);});});}function openTrophyModal(_0x2e4f2f=null){const _0x4a33b0=a2_0xc86709,_0x570f5e=document['getElementById'](_0x4a33b0(0x17d)),_0x2c3185=document['getElementById']('trophy-modal-title'),_0xe0a81d=document['getElementById']('trophy-form'),_0x32f23b=document[_0x4a33b0(0x226)]('trophy-id');_0xe0a81d['reset'](),_0x32f23b['value']='';const _0x6f1181=document['getElementById'](_0x4a33b0(0x357));_0x6f1181&&(_0x6f1181['src']=DEFAULT_TROPHY_IMAGE,_0x6f1181['classList']['remove']('error')),_0x2e4f2f?(_0x2c3185['textContent']=_0x4a33b0(0x2d2),_0x32f23b['value']=_0x2e4f2f,loadTrophyData(_0x2e4f2f)):_0x2c3185['textContent']='Create\x20New\x20Trophy',_0x570f5e['classList']['add']('active');}async function loadTrophyData(_0x56c6d3){const _0x1dbeb5=a2_0xc86709;try{const _0x517329=doc(db,_0x1dbeb5(0x28e),_0x56c6d3),_0x34247c=await getDoc(_0x517329);if(!_0x34247c[_0x1dbeb5(0x28b)]()){showNotification(_0x1dbeb5(0x157),'error');return;}const _0x2896cd=_0x34247c['data']();document['getElementById'](_0x1dbeb5(0x261))[_0x1dbeb5(0x2d0)]=_0x2896cd['name']||'',document[_0x1dbeb5(0x226)]('trophy-description')[_0x1dbeb5(0x2d0)]=_0x2896cd['description']||'',document['getElementById'](_0x1dbeb5(0x204))['value']=_0x2896cd['image']||'',document[_0x1dbeb5(0x226)](_0x1dbeb5(0x34a))[_0x1dbeb5(0x2d0)]=_0x2896cd['rarity']||'common',updateTrophyImagePreview();}catch(_0x585214){console['error']('Error\x20loading\x20trophy\x20data:',_0x585214),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x4892d8=a2_0xc86709;try{const _0x3176a8=document['getElementById'](_0x4892d8(0x20c))['value'],_0xde849a=document['getElementById']('trophy-name')['value'][_0x4892d8(0x2ec)](),_0x5ea845=document['getElementById']('trophy-description')['value']['trim'](),_0x4dddf0=document['getElementById'](_0x4892d8(0x204))['value']['trim'](),_0x3569f9=document['getElementById']('trophy-rarity')['value'];if(!_0xde849a||!_0x5ea845||!_0x4dddf0){showNotification(_0x4892d8(0x1ee),_0x4892d8(0x2b6));return;}const _0x2fe6a3=auth['currentUser'];if(!_0x2fe6a3){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x1bf74a={'name':_0xde849a,'description':_0x5ea845,'image':_0x4dddf0,'rarity':_0x3569f9,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x2fe6a3['email']};!_0x3176a8?(_0x1bf74a['createdAt']=serverTimestamp(),_0x1bf74a['createdBy']=_0x2fe6a3['email'],await addDoc(collection(db,'trophyDefinitions'),_0x1bf74a),showNotification(_0x4892d8(0x19b),'success')):(await updateDoc(doc(db,'trophyDefinitions',_0x3176a8),_0x1bf74a),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0xf9aa38){console[_0x4892d8(0x2b6)](_0x4892d8(0x24b),_0xf9aa38),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0xf9aa38['message'],_0x4892d8(0x2b6));}}function closeTrophyModal(){const _0x520166=document['getElementById']('trophy-modal');_0x520166&&_0x520166['classList']['remove']('active');}async function confirmDeleteTrophy(_0x217386){const _0x3415fa=a2_0xc86709;if(!_0x217386){console['error'](_0x3415fa(0x2a5));return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0xcef723=auth['currentUser'];if(!_0xcef723){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x217386),await deleteDoc(doc(db,'trophyDefinitions',_0x217386)),showNotification('Trophy\x20definition\x20deleted\x20successfully',_0x3415fa(0x295)),loadTrophyDefinitions();}catch(_0x1957b1){console['error'](_0x3415fa(0x205),_0x1957b1),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x1957b1[_0x3415fa(0x26b)],'error');}}async function openAssignTrophyModal(_0x2f35b0){const _0x39d204=a2_0xc86709;try{const _0x2c1c45=doc(db,'trophyDefinitions',_0x2f35b0),_0x12c64f=await getDoc(_0x2c1c45);if(!_0x12c64f['exists']()){showNotification(_0x39d204(0x157),'error');return;}const _0x1011f9=_0x12c64f[_0x39d204(0x14f)]();document['getElementById'](_0x39d204(0x25f))['value']=_0x2f35b0,document['getElementById']('assign-trophy-name')['value']=_0x1011f9['name'],document['getElementById']('assign-trophy-image')['src']=_0x1011f9['image']||DEFAULT_TROPHY_IMAGE,document[_0x39d204(0x226)]('assign-trophy-title')['textContent']=_0x1011f9['name']||'Unnamed\x20Trophy',document[_0x39d204(0x226)]('assign-trophy-description')['textContent']=_0x1011f9['description']||'No\x20description';const _0x4ffa15=document['getElementById'](_0x39d204(0x324));_0x4ffa15['textContent']=_0x1011f9['rarity']||'common',_0x4ffa15['className']='trophy-rarity\x20'+(_0x1011f9[_0x39d204(0x33b)]||'common');const _0x3dfe0a=document['getElementById'](_0x39d204(0x278));_0x3dfe0a[_0x39d204(0x2b9)]['add'](_0x39d204(0x2a0));}catch(_0x3a6a4a){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x3a6a4a),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x3cb41d=a2_0xc86709,_0x1d7970=document['getElementById']('assign-trophy-modal');_0x1d7970&&_0x1d7970['classList'][_0x3cb41d(0x14c)]('active');}async function assignTrophyToPlayer(){const _0x149dda=a2_0xc86709;try{const _0x240a7e=document[_0x149dda(0x226)]('assign-trophy-id')['value'],_0x8792ef=document['getElementById'](_0x149dda(0x1c4))['value'],_0xb4b6bc=document[_0x149dda(0x226)]('assign-player-username')['value']['trim'](),_0x50910b=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')[_0x149dda(0x2d0)];if(!_0x240a7e||!_0xb4b6bc){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x44f524=auth['currentUser'];if(!_0x44f524){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x4e35f1=null,_0x5a06fb=null,_0x49712e=null;if(_0x50910b==='non-participant'){const _0x497516=collection(db,'nonParticipants'),_0x4c6e84=query(_0x497516,where('username','==',_0xb4b6bc)),_0x31a16e=await getDocs(_0x4c6e84);!_0x31a16e['empty']&&(_0x4e35f1=_0x31a16e['docs'][0x0],_0x5a06fb=_0x4e35f1['id'],_0x49712e=_0x4e35f1['data']());}else{const _0x390bdc=_0x50910b==='D1'?'players':_0x50910b==='D2'?'playersD2':'playersD3',_0x49ab27=collection(db,_0x390bdc),_0x8c33d5=query(_0x49ab27,where('username','==',_0xb4b6bc)),_0x4c01ea=await getDocs(_0x8c33d5);!_0x4c01ea['empty']&&(_0x4e35f1=_0x4c01ea[_0x149dda(0x353)][0x0],_0x5a06fb=_0x4e35f1['id'],_0x49712e=_0x4e35f1[_0x149dda(0x14f)]());}if(!_0x4e35f1){showNotification(_0x149dda(0x327)+_0xb4b6bc+'\x22\x20not\x20found\x20in\x20'+(_0x50910b==='non-participant'?'non-participants':_0x50910b+_0x149dda(0x18a)),'error');return;}const _0x27e7e5=collection(db,_0x149dda(0x14e)),_0x5af2ce=query(_0x27e7e5,where('userId','==',_0x5a06fb),where(_0x149dda(0x1ce),'==',_0x240a7e)),_0x10485c=await getDocs(_0x5af2ce);if(!_0x10485c['empty']){showNotification('Player\x20\x22'+_0xb4b6bc+_0x149dda(0x1c9),_0x149dda(0x370));return;}await addDoc(collection(db,_0x149dda(0x14e)),{'userId':_0x5a06fb,'playerUsername':_0xb4b6bc,'trophyId':_0x240a7e,'awardedAt':serverTimestamp(),'awardedBy':_0x44f524['email'],'ladder':_0x50910b}),showNotification('Trophy\x20\x22'+_0x8792ef+'\x22\x20awarded\x20to\x20'+_0xb4b6bc,_0x149dda(0x295)),closeAssignTrophyModal();}catch(_0x584f93){console['error'](_0x149dda(0x24a),_0x584f93),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x584f93['message'],'error');}}function setupInactivePlayersSection(){const _0x71bd6b=a2_0xc86709,_0x247b23=document['getElementById']('inactive-days-filter');_0x247b23&&_0x247b23['addEventListener']('change',function(){const _0x5f56e5=a2_0x1f9e,_0xaee64b=document[_0x5f56e5(0x226)](_0x5f56e5(0x268));if(_0xaee64b)_0xaee64b['click']();});const _0x274240=document['querySelector'](_0x71bd6b(0x145)),_0x20a479=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x274240&&_0x20a479&&(_0x274240['addEventListener']('change',function(){const _0x4cb857=_0x71bd6b;if(this[_0x4cb857(0x2a7)]){currentLadder='D1';if(document['getElementById']('inactive-players')[_0x4cb857(0x178)][_0x4cb857(0x1ed)]!==_0x4cb857(0x182)){const _0xd20aaf=document['getElementById'](_0x4cb857(0x268));if(_0xd20aaf)_0xd20aaf[_0x4cb857(0x284)]();}}}),_0x20a479['addEventListener'](_0x71bd6b(0x2f5),function(){const _0x39e6e1=_0x71bd6b;if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')['style'][_0x39e6e1(0x1ed)]!=='none'){const _0x289866=document['getElementById']('load-inactive-players-data');if(_0x289866)_0x289866[_0x39e6e1(0x284)]();}}}));const _0x5870bb=document['getElementById'](_0x71bd6b(0x300));_0x5870bb&&_0x5870bb[_0x71bd6b(0x2c6)](_0x71bd6b(0x1ac),debounce(function(){const _0x133330=_0x71bd6b,_0x10a210=_0x5870bb[_0x133330(0x2d0)][_0x133330(0x35a)](),_0xccac56=document['querySelectorAll'](_0x133330(0x19a));_0xccac56[_0x133330(0x1e8)](_0x2df01e=>{const _0x20581b=_0x133330;if(_0x2df01e[_0x20581b(0x29c)]('.loading-cell')||_0x2df01e['querySelector']('.empty-state')||_0x2df01e['querySelector'](_0x20581b(0x263)))return;const _0x46c2c8=_0x2df01e['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x378bbf=_0x2df01e['cells'][0x5]?.[_0x20581b(0x2e8)]['toLowerCase']()||'';_0x46c2c8[_0x20581b(0x354)](_0x10a210)||_0x378bbf[_0x20581b(0x354)](_0x10a210)?_0x2df01e['style']['display']='':_0x2df01e['style']['display']='none';});},0x12c)),document['addEventListener'](_0x71bd6b(0x284),function(_0x36b02a){const _0x3c51d0=_0x71bd6b;if(_0x36b02a['target']['closest']('.view-player-btn')){const _0x72b56b=_0x36b02a[_0x3c51d0(0x1a2)][_0x3c51d0(0x1e9)]('.view-player-btn'),_0x2ac493=_0x72b56b['dataset']['username'];_0x2ac493&&alert(_0x3c51d0(0x2ad)+_0x2ac493+'\x20-\x20Feature\x20coming\x20soon');}}),console['log'](_0x71bd6b(0x32a));}async function loadInactivePlayersData(){const _0x50215e=a2_0xc86709,_0x5aac96=document[_0x50215e(0x226)]('inactive-players-table-body');if(!_0x5aac96)return;_0x5aac96['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x59e0ff=document[_0x50215e(0x226)]('inactive-days-filter'),_0x32a462=_0x59e0ff?parseInt(_0x59e0ff['value'])||0x0:0x0,_0x57f69c=collection(db,currentLadder==='D1'?_0x50215e(0x28a):'playersD2'),_0x3be329=await getDocs(_0x57f69c);if(_0x3be329['empty']){_0x5aac96[_0x50215e(0x15d)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x315c80=[];_0x3be329['forEach'](_0x19cb92=>{const _0x4bbffe=_0x50215e,_0x56ec42=_0x19cb92['data']();_0x315c80['push']({..._0x56ec42,'id':_0x19cb92['id'],'username':_0x56ec42[_0x4bbffe(0x1bb)]||'Unknown\x20Player'});}),console[_0x50215e(0x149)](_0x50215e(0x201)+_0x315c80[_0x50215e(0x1dc)]+_0x50215e(0x150)+currentLadder+'\x20ladder');const _0x5a87f5=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0xe1eaf=_0x315c80['map'](async _0x130de6=>{const _0x2a4317=_0x50215e;try{const _0x2605a4=collection(db,_0x5a87f5),_0x142583=query(_0x2605a4,or(where('winnerUsername','==',_0x130de6['username']),where('loserUsername','==',_0x130de6['username'])),orderBy('approvedAt',_0x2a4317(0x2aa)),limit(0x1)),_0x579bde=await getDocs(_0x142583);if(!_0x579bde['empty']){const _0x4cc47a=_0x579bde['docs'][0x0]['data'](),_0x7c2c5e=_0x4cc47a['approvedAt']?new Date(_0x4cc47a['approvedAt'][_0x2a4317(0x1b8)]*0x3e8):null,_0xc947f5=new Date(),_0x585ba7=_0x7c2c5e?Math[_0x2a4317(0x1f0)]((_0xc947f5-_0x7c2c5e)/(0x3e8*0x3c*0x3c*0x18)):null,_0x181010=_0x4cc47a['winnerUsername']===_0x130de6['username']?_0x4cc47a[_0x2a4317(0x291)]:_0x4cc47a[_0x2a4317(0x37c)],_0x27243e=_0x4cc47a['winnerUsername']===_0x130de6[_0x2a4317(0x1bb)]?'Won':'Lost';return{..._0x130de6,'lastMatch':{'date':_0x7c2c5e?_0x7c2c5e['toLocaleDateString']():'N/A','opponent':_0x181010||'Unknown','result':_0x27243e,'timestamp':_0x7c2c5e||new Date(0x0),'daysSinceMatch':_0x585ba7||Number['MAX_SAFE_INTEGER']}};}else return{..._0x130de6,'lastMatch':{'date':_0x2a4317(0x1c5),'opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x149e7e){return console[_0x2a4317(0x2b6)](_0x2a4317(0x28f)+_0x130de6[_0x2a4317(0x1bb)]+':',_0x149e7e),{..._0x130de6,'lastMatch':{'date':_0x2a4317(0x2dc),'opponent':'Error','result':_0x2a4317(0x2dc),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x456880=await Promise['all'](_0xe1eaf);_0x456880[_0x50215e(0x224)]((_0x38593f,_0x1459fd)=>_0x1459fd['lastMatch']['daysSinceMatch']-_0x38593f['lastMatch'][_0x50215e(0x27a)]);_0x32a462>0x0&&(_0x456880=_0x456880['filter'](_0x4c50d2=>_0x4c50d2[_0x50215e(0x388)]['daysSinceMatch']>=_0x32a462));_0x5aac96['innerHTML']='';if(_0x456880['length']===0x0){_0x5aac96[_0x50215e(0x15d)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x456880[_0x50215e(0x1e8)](_0x307089=>{const _0x4a085a=_0x50215e,_0x4e8fbf=document['createElement']('tr'),_0x5e9b6d=_0x307089['lastMatch']['daysSinceMatch']>0x1e?_0x4a085a(0x247):_0x307089[_0x4a085a(0x388)]['daysSinceMatch']>0xe?_0x4a085a(0x307):'';_0x4e8fbf['className']=_0x5e9b6d,_0x4e8fbf['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x307089['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x307089['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x307089['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x307089['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x307089['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x307089[_0x4a085a(0x388)]['date']==='Never\x20played'?'No\x20matches\x20found':_0x307089['lastMatch']['result']+'\x20vs\x20'+_0x307089[_0x4a085a(0x388)][_0x4a085a(0x38f)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x307089['username']+_0x4a085a(0x1c0),_0x5aac96[_0x4a085a(0x342)](_0x4e8fbf);}),console['log']('Displaying\x20'+_0x456880['length']+_0x50215e(0x29f));}catch(_0x1d09da){console[_0x50215e(0x2b6)]('Error\x20loading\x20inactive\x20players:',_0x1d09da),_0x5aac96[_0x50215e(0x15d)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x1d09da['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x2d4af0=a2_0xc86709;console[_0x2d4af0(0x149)]('Setting\x20up\x20highlight\x20buttons');const _0x516f69=document['getElementById']('create-match-highlight-btn');_0x516f69&&_0x516f69['addEventListener'](_0x2d4af0(0x284),function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x484d5d=document['getElementById'](_0x2d4af0(0x24c));_0x484d5d&&_0x484d5d['addEventListener'](_0x2d4af0(0x284),function(){console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x2024e2=document['getElementById']('create-achievement-highlight-btn');_0x2024e2&&_0x2024e2['addEventListener']('click',function(){const _0x15517a=_0x2d4af0;console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x15517a(0x2a2));});}function openHighlightModal(_0x573884=a2_0xc86709(0x1a6)){const _0x1ac6b8=a2_0xc86709;console['log'](_0x1ac6b8(0x17b)+_0x573884);const _0x36ae4f=document['getElementById']('highlight-modal'),_0x387183=document[_0x1ac6b8(0x226)]('highlight-form'),_0x15ed8c=document['getElementById']('highlight-modal-title'),_0x55d54e=document['getElementById']('highlight-id');if(!_0x36ae4f||!_0x387183||!_0x15ed8c){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x387183['reset'](),_0x55d54e['value']='';const _0xe9a762=[_0x1ac6b8(0x1a6),'creator',_0x1ac6b8(0x2a2)],_0x54a1f2=!_0xe9a762[_0x1ac6b8(0x354)](_0x573884);if(_0x54a1f2){const _0x3fb235=_0x573884;_0x55d54e['value']=_0x3fb235,_0x15ed8c['textContent']='Loading...',loadHighlightDataAdmin(_0x3fb235);}else{const _0x1deb5e=_0x573884;document['getElementById'](_0x1ac6b8(0x2fc))[_0x1ac6b8(0x2d0)]=_0x1deb5e,_0x15ed8c[_0x1ac6b8(0x2e8)]='Create\x20New\x20'+getHighlightTypeName(_0x1deb5e),toggleHighlightFields(_0x1deb5e);const _0x92e6c5=auth['currentUser'];_0x92e6c5&&document['getElementById']('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')['value']=_0x92e6c5['displayName']||_0x92e6c5['email']);}_0x36ae4f[_0x1ac6b8(0x2b9)][_0x1ac6b8(0x1f3)]('active');}function toggleHighlightFields(_0x4aa2be){const _0x1657b4=a2_0xc86709;console[_0x1657b4(0x149)](_0x1657b4(0x1f1)+_0x4aa2be);const _0x4b549c=document[_0x1657b4(0x226)]('highlight-form');if(!_0x4b549c)return;const _0x2a865e=_0x4b549c['querySelectorAll']('.form-group,\x20.form-row');_0x2a865e[_0x1657b4(0x1e8)](_0x31f611=>_0x31f611['style']['display']='none');const _0x402828=document[_0x1657b4(0x226)]('highlight-video-preview-container');if(_0x402828)_0x402828['style']['display']=_0x1657b4(0x182);const _0x3c8f18=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x3c8f18[_0x1657b4(0x1e8)](_0x3f4c42=>{const _0x1ac0d7=_0x1657b4,_0x6270bc=document['getElementById'](_0x3f4c42);if(_0x6270bc)_0x6270bc['style']['display']=_0x1ac0d7(0x35c);});if(_0x4aa2be==='match'){const _0x1616fc=['highlight-video-container','highlight-match-info-container','highlight-map-container','highlight-match-date-container','highlight-players-container',_0x1657b4(0x279)];_0x1616fc['forEach'](_0x210396=>{const _0x1d25a2=document['getElementById'](_0x210396);_0x1d25a2&&(_0x210396==='highlight-players-container'?_0x1d25a2['style']['display']='flex':_0x1d25a2['style']['display']='block');});const _0x2834a6=document[_0x1657b4(0x226)](_0x1657b4(0x1b5));if(_0x2834a6){_0x2834a6[_0x1657b4(0x17e)]=!![];const _0x550baf=_0x2834a6[_0x1657b4(0x196)];if(_0x550baf)_0x550baf['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x402828)_0x402828[_0x1657b4(0x178)]['display']=_0x1657b4(0x35c);updateHighlightVideoPreview();}else{if(_0x4aa2be==='creator'){const _0x410664=['highlight-map-container',_0x1657b4(0x23a),_0x1657b4(0x1f7),'highlight-creator-image-container',_0x1657b4(0x266)];_0x410664['forEach'](_0x72c0f3=>{const _0x2d00aa=_0x1657b4,_0x468311=document['getElementById'](_0x72c0f3);if(_0x468311)_0x468311['style'][_0x2d00aa(0x1ed)]=_0x2d00aa(0x35c);});const _0x446429=document['getElementById']('highlight-video-id');if(_0x446429){_0x446429['required']=![];const _0x1fc9a4=_0x446429['previousElementSibling'];if(_0x1fc9a4)_0x1fc9a4['innerHTML']=_0x1657b4(0x2fe);}}else{if(_0x4aa2be==='achievement'){const _0x4c786b=['highlight-achievement-player-container',_0x1657b4(0x1b9),_0x1657b4(0x243),'highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0x4c786b[_0x1657b4(0x1e8)](_0x210126=>{const _0x10a96e=_0x1657b4,_0x4cca58=document['getElementById'](_0x210126);if(_0x4cca58)_0x4cca58[_0x10a96e(0x178)]['display']='block';});const _0x4ac2d4=document[_0x1657b4(0x226)]('highlight-video-id');if(_0x4ac2d4){_0x4ac2d4['required']=![];const _0x5856a3=_0x4ac2d4[_0x1657b4(0x196)];if(_0x5856a3)_0x5856a3['innerHTML']=_0x1657b4(0x2fe);}}}}}async function loadHighlightDataAdmin(_0x329616){const _0x87a51f=a2_0xc86709;try{const _0x5c24ce=doc(db,'highlights',_0x329616),_0x453ae1=await getDoc(_0x5c24ce);if(!_0x453ae1[_0x87a51f(0x28b)]()){showNotification('Highlight\x20not\x20found','error');return;}const _0x415c41=_0x453ae1['data'](),_0x4ea69e=_0x415c41[_0x87a51f(0x1ff)]||'match';document['getElementById']('highlight-modal-title')['textContent']=_0x87a51f(0x296)+getHighlightTypeName(_0x4ea69e),document[_0x87a51f(0x226)]('highlight-type')[_0x87a51f(0x2d0)]=_0x4ea69e,toggleHighlightFields(_0x4ea69e),document['getElementById']('highlight-title')['value']=_0x415c41['title']||'',document[_0x87a51f(0x226)]('highlight-description')[_0x87a51f(0x2d0)]=_0x415c41['description']||'',document[_0x87a51f(0x226)]('highlight-submitted-by')['value']=_0x415c41['submittedBy']||'';_0x415c41['videoId']&&(document['getElementById'](_0x87a51f(0x1b5))['value']=_0x415c41[_0x87a51f(0x361)],updateHighlightVideoPreview());if(_0x4ea69e==='match'){document['getElementById']('highlight-match-info')['value']=_0x415c41['matchInfo']||'',document[_0x87a51f(0x226)]('highlight-map')[_0x87a51f(0x2d0)]=_0x415c41['map']||'';if(_0x415c41['matchDate']){const _0x417183=new Date(_0x415c41[_0x87a51f(0x37f)][_0x87a51f(0x1b8)]*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x417183[_0x87a51f(0x161)]()['split']('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x415c41[_0x87a51f(0x1ba)]||'',document[_0x87a51f(0x226)](_0x87a51f(0x30d))['value']=_0x415c41['winnerScore']||'',document['getElementById']('highlight-loser-name')['value']=_0x415c41['loserName']||'',document[_0x87a51f(0x226)]('highlight-loser-score')['value']=_0x415c41['loserScore']||'',document['getElementById']('highlight-match-link')[_0x87a51f(0x2d0)]=_0x415c41['matchLink']||'';}else{if(_0x4ea69e==='creator')document['getElementById']('highlight-map')['value']=_0x415c41['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x415c41['mapCreator']||'',document[_0x87a51f(0x226)]('highlight-map-version')[_0x87a51f(0x2d0)]=_0x415c41['mapVersion']||'',document['getElementById'](_0x87a51f(0x1d0))['value']=_0x415c41[_0x87a51f(0x26c)]||'';else _0x4ea69e===_0x87a51f(0x2a2)&&(document['getElementById']('highlight-achievement-player')[_0x87a51f(0x2d0)]=_0x415c41['achievementPlayer']||'',document[_0x87a51f(0x226)]('highlight-achievement-type')['value']=_0x415c41[_0x87a51f(0x30e)]||'',document['getElementById']('highlight-achievement-details')['value']=_0x415c41['achievementDetails']||'',document[_0x87a51f(0x226)]('highlight-player-profile')['value']=_0x415c41['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')['value']=_0x415c41['achievementImageUrl']||'');}}catch(_0x555e6f){console['error']('Error\x20loading\x20highlight:',_0x555e6f),showNotification('Error\x20loading\x20highlight:\x20'+_0x555e6f['message'],'error');}}async function saveHighlight(){const _0x7932b9=a2_0xc86709;try{const _0x4cb648=document['getElementById'](_0x7932b9(0x311))?.['value']||'',_0x396beb=document['getElementById']('highlight-type')?.[_0x7932b9(0x2d0)]||'match',_0xb0a17={'title':document['getElementById']('highlight-title')?.[_0x7932b9(0x2d0)]?.['trim']()||'','description':document[_0x7932b9(0x226)]('highlight-description')?.['value']?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.[_0x7932b9(0x2d0)]?.[_0x7932b9(0x2ec)]()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x396beb};if(!_0xb0a17['title']){showNotification('Title\x20is\x20required',_0x7932b9(0x2b6));return;}if(_0x396beb==='match'){_0xb0a17['matchInfo']=document['getElementById'](_0x7932b9(0x2e2))?.['value']?.['trim']()||'',_0xb0a17[_0x7932b9(0x1d3)]=document['getElementById']('highlight-map')?.['value']?.['trim']()||'';const _0x23c52f=document[_0x7932b9(0x226)](_0x7932b9(0x332)),_0x942f2c=_0x23c52f?.['value']||'';_0xb0a17[_0x7932b9(0x37f)]=_0x942f2c?Timestamp[_0x7932b9(0x211)](new Date(_0x942f2c)):null,_0xb0a17[_0x7932b9(0x1ba)]=document['getElementById']('highlight-winner-name')?.['value']?.[_0x7932b9(0x2ec)]()||'',_0xb0a17['winnerScore']=document[_0x7932b9(0x226)]('highlight-winner-score')?.['value']?.[_0x7932b9(0x2ec)]()||'',_0xb0a17[_0x7932b9(0x16d)]=document['getElementById'](_0x7932b9(0x26d))?.['value']?.[_0x7932b9(0x2ec)]()||'',_0xb0a17[_0x7932b9(0x30f)]=document['getElementById']('highlight-loser-score')?.[_0x7932b9(0x2d0)]?.['trim']()||'',_0xb0a17['matchLink']=document[_0x7932b9(0x226)]('highlight-match-link')?.['value']?.['trim']()||'';if(!_0xb0a17[_0x7932b9(0x361)]){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x396beb===_0x7932b9(0x38e)){_0xb0a17['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0xb0a17['mapCreator']=document['getElementById']('highlight-map-creator')?.[_0x7932b9(0x2d0)]?.[_0x7932b9(0x2ec)]()||'',_0xb0a17['mapVersion']=document[_0x7932b9(0x226)]('highlight-map-version')?.['value']?.['trim']()||'',_0xb0a17[_0x7932b9(0x26c)]=document['getElementById']('highlight-creator-image')?.[_0x7932b9(0x2d0)]?.[_0x7932b9(0x2ec)]()||'';if(!_0xb0a17[_0x7932b9(0x1f8)]){showNotification(_0x7932b9(0x244),'error');return;}}else{if(_0x396beb==='achievement'){_0xb0a17['achievementPlayer']=document[_0x7932b9(0x226)](_0x7932b9(0x36a))?.['value']?.['trim']()||'',_0xb0a17['achievementType']=document['getElementById']('highlight-achievement-type')?.[_0x7932b9(0x2d0)]?.['trim']()||'',_0xb0a17['achievementDetails']=document['getElementById'](_0x7932b9(0x37d))?.[_0x7932b9(0x2d0)]?.['trim']()||'',_0xb0a17['playerProfileUrl']=document['getElementById'](_0x7932b9(0x34c))?.[_0x7932b9(0x2d0)]?.['trim']()||'',_0xb0a17[_0x7932b9(0x340)]=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0xb0a17['achievementPlayer']){showNotification(_0x7932b9(0x2f6),_0x7932b9(0x2b6));return;}}}}_0x4cb648?(_0xb0a17[_0x7932b9(0x2d5)]=serverTimestamp(),await updateDoc(doc(db,_0x7932b9(0x1a1),_0x4cb648),_0xb0a17),showNotification('Highlight\x20updated\x20successfully!','success')):(_0xb0a17['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x7932b9(0x1a1)),_0xb0a17),showNotification(_0x7932b9(0x222),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x51ab02){console['error']('Error\x20saving\x20highlight:',_0x51ab02),showNotification('Error\x20saving\x20highlight:\x20'+_0x51ab02['message'],'error');}}function closeHighlightModal(){const _0x3ea985=a2_0xc86709,_0x1b495b=document['getElementById']('highlight-modal');if(_0x1b495b)_0x1b495b['classList']['remove'](_0x3ea985(0x2a0));}function getHighlightTypeName(_0x285a2a){const _0x31faf4=a2_0xc86709;switch(_0x285a2a){case'match':return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return _0x31faf4(0x15c);}}function updateHighlightVideoPreview(){const _0x4fa730=a2_0xc86709,_0x2a8b65=document['getElementById']('highlight-video-id'),_0x81707f=document['getElementById']('highlight-video-preview-container'),_0x171e62=document['getElementById']('highlight-video-preview');if(!_0x2a8b65||!_0x171e62||!_0x81707f)return;const _0x2d87b8=_0x2a8b65[_0x4fa730(0x2d0)]['trim']();_0x2d87b8&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x2d87b8)?(_0x171e62['src']=_0x4fa730(0x2c9)+_0x2d87b8,_0x81707f[_0x4fa730(0x178)]['display']=_0x4fa730(0x35c)):(_0x171e62['src']='',_0x81707f[_0x4fa730(0x178)]['display']=_0x4fa730(0x182));}async function loadHighlightsAdmin(){const _0x9dfd35=a2_0xc86709,_0x55678=document['getElementById']('highlights-table-body');if(!_0x55678)return;_0x55678['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x3e10a6=query(collection(db,'highlights'),orderBy('createdAt','desc')),_0x2a10b5=await getDocs(_0x3e10a6);if(_0x2a10b5['empty']){_0x55678['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x55678['innerHTML']='',_0x2a10b5['forEach'](_0xa519d=>{const _0x17ec6b=a2_0x1f9e,_0x2e2bb5=_0xa519d[_0x17ec6b(0x14f)](),_0x456698=document[_0x17ec6b(0x32c)]('tr'),_0x64c8d1=_0x2e2bb5['createdAt']?new Date(_0x2e2bb5['createdAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';let _0xe00c33='Unknown',_0x5d5c7c='';switch(_0x2e2bb5[_0x17ec6b(0x1ff)]){case'match':_0xe00c33='Match',_0x5d5c7c='match-type';break;case _0x17ec6b(0x38e):_0xe00c33='Creator',_0x5d5c7c=_0x17ec6b(0x17f);break;case _0x17ec6b(0x2a2):_0xe00c33=_0x17ec6b(0x185),_0x5d5c7c='achievement-type';break;}_0x456698[_0x17ec6b(0x15d)]=_0x17ec6b(0x399)+(_0x2e2bb5['title']||_0x17ec6b(0x1d4))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x5d5c7c+'\x22>'+_0xe00c33+_0x17ec6b(0x36c)+_0x64c8d1+_0x17ec6b(0x393)+(_0x2e2bb5[_0x17ec6b(0x2e5)]||'Unknown')+_0x17ec6b(0x393)+(_0x2e2bb5['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0xa519d['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0xa519d['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x55678[_0x17ec6b(0x342)](_0x456698);}),document[_0x9dfd35(0x312)]('.edit-highlight-btn')['forEach'](_0x5de338=>{_0x5de338['addEventListener']('click',_0x9181=>{const _0xe4b4b2=a2_0x1f9e;openHighlightModal(_0x9181[_0xe4b4b2(0x1ea)][_0xe4b4b2(0x246)]['id']);});}),document['querySelectorAll'](_0x9dfd35(0x20d))['forEach'](_0x1a35bd=>{const _0x466281=_0x9dfd35;_0x1a35bd[_0x466281(0x2c6)]('click',_0xa7a246=>{const _0x579cfd=_0x466281;confirmDeleteHighlight(_0xa7a246['currentTarget'][_0x579cfd(0x246)]['id']);});});}catch(_0x3833d0){console['error'](_0x9dfd35(0x32d),_0x3833d0),_0x55678['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x3833d0['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x333f01){const _0x408971=a2_0xc86709;if(confirm(_0x408971(0x176)))try{await deleteDoc(doc(db,'highlights',_0x333f01)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x989a76){console['error']('Error\x20deleting\x20highlight:',_0x989a76),showNotification(_0x408971(0x289)+_0x989a76[_0x408971(0x26b)],'error');}}function setupCreateTestMatchModal(){const _0x173cbf=a2_0xc86709;console[_0x173cbf(0x149)]('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x39d79a=document['getElementById']('create-test-match-modal'),_0x589e90=document['getElementById'](_0x173cbf(0x2bb));if(!_0x39d79a){console['error'](_0x173cbf(0x252));return;}if(!_0x589e90){console['error'](_0x173cbf(0x2eb));return;}const _0x2e9c52=_0x39d79a['cloneNode'](!![]);_0x39d79a[_0x173cbf(0x24e)]['replaceChild'](_0x2e9c52,_0x39d79a);const _0x5549c1=_0x2e9c52['querySelector']('#create-test-match-form');_0x2e9c52['addEventListener']('click',function(_0x192d36){const _0x2b7d85=_0x173cbf;_0x192d36[_0x2b7d85(0x1a2)]===_0x2e9c52&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x4a7988=_0x2e9c52['querySelector']('.close-btn');_0x4a7988&&_0x4a7988['addEventListener']('click',function(_0x578a85){const _0x548f12=_0x173cbf;_0x578a85[_0x548f12(0x389)](),_0x578a85['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x216b51=_0x2e9c52['querySelector']('#cancel-create-test-match-btn');_0x216b51&&_0x216b51['addEventListener'](_0x173cbf(0x284),function(_0x14849c){const _0x2e33b7=_0x173cbf;_0x14849c[_0x2e33b7(0x389)](),_0x14849c['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x5549c1){_0x5549c1['addEventListener']('submit',function(_0x259577){_0x259577['preventDefault'](),_0x259577['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x6e596c=_0x5549c1['querySelector'](_0x173cbf(0x15f));_0x6e596c&&_0x6e596c['addEventListener']('click',function(_0x5e8498){_0x5e8498['preventDefault'](),_0x5e8498['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x5d82d1=a2_0xc86709;console[_0x5d82d1(0x149)](_0x5d82d1(0x1c3)),setupHighlightButtons();const _0x49743f=document['getElementById']('highlight-form');_0x49743f&&_0x49743f['addEventListener'](_0x5d82d1(0x25a),_0x383857=>{const _0x49ed1f=_0x5d82d1;_0x383857[_0x49ed1f(0x389)](),saveHighlight();});const _0x212b9c=document['getElementById'](_0x5d82d1(0x1ab));_0x212b9c&&_0x212b9c['addEventListener']('click',closeHighlightModal);const _0x5ac773=document['querySelector']('#highlight-modal\x20.close-btn');_0x5ac773&&_0x5ac773['addEventListener']('click',closeHighlightModal);const _0x6c069c=document['getElementById']('highlight-modal');_0x6c069c&&_0x6c069c['addEventListener']('click',_0x1f197a=>{_0x1f197a['target']===_0x6c069c&&closeHighlightModal();});const _0x369e0b=document['getElementById']('highlight-video-id');_0x369e0b&&_0x369e0b['addEventListener'](_0x5d82d1(0x1ac),()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x5f254a=a2_0xc86709;console[_0x5f254a(0x149)]('Setting\x20up\x20Manage\x20Matches\x20section');const _0x3c62d7=document['getElementById']('matches-prev-page'),_0x35a692=document['getElementById']('matches-next-page');_0x3c62d7&&_0x3c62d7['addEventListener'](_0x5f254a(0x284),()=>{const _0x411522=_0x5f254a,_0xe07321=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0xe07321][_0x411522(0x231)]-0x1);});_0x35a692&&_0x35a692['addEventListener']('click',()=>{const _0x17d69f=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x17d69f]['page']+0x1);});const _0x13d0fe=document['getElementById']('apply-matches-filters'),_0x2a8c7b=document[_0x5f254a(0x226)]('reset-matches-filters');_0x13d0fe&&_0x13d0fe['addEventListener']('click',applyMatchesFilters);_0x2a8c7b&&_0x2a8c7b[_0x5f254a(0x2c6)]('click',resetMatchesFilters);const _0x456064=document[_0x5f254a(0x226)]('matches-search');_0x456064&&_0x456064['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x5178ca=document[_0x5f254a(0x226)](_0x5f254a(0x220));_0x5178ca&&_0x5178ca[_0x5f254a(0x2c6)](_0x5f254a(0x284),openResimulateModal);const _0x3f178c=document['getElementById']('resimulate-modal');if(_0x3f178c){const _0x5d5e62=_0x3f178c[_0x5f254a(0x29c)](_0x5f254a(0x322));_0x5d5e62&&_0x5d5e62['addEventListener']('click',closeResimulateModal),_0x3f178c['addEventListener'](_0x5f254a(0x284),_0x519483=>{_0x519483['target']===_0x3f178c&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x5f254a(0x2cb));}function openCreateTestMatchModal(){const _0x24ff79=a2_0xc86709;console['log'](_0x24ff79(0x217));const _0x227a93=document['getElementById'](_0x24ff79(0x2ed)),_0x5de7ce=document['getElementById']('create-test-match-form');if(!_0x227a93){console[_0x24ff79(0x2b6)]('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification(_0x24ff79(0x30c),'error');return;}if(!_0x5de7ce){console[_0x24ff79(0x2b6)]('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x5de7ce[_0x24ff79(0x214)]();const _0x553edd=document[_0x24ff79(0x312)]('input[name=\x22test-match-ladder\x22]');let _0x46f62c=![];_0x553edd['forEach'](_0x27bc08=>{const _0x2326ec=_0x24ff79;console['log'](_0x2326ec(0x2d8),_0x27bc08[_0x2326ec(0x2d0)]),_0x27bc08['value']===currentLadder&&(_0x27bc08['checked']=!![],_0x46f62c=!![],console[_0x2326ec(0x149)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x46f62c){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x525703=document[_0x24ff79(0x29c)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x525703&&(_0x525703['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x125fd7=document['getElementById'](_0x24ff79(0x20a));if(_0x125fd7){const _0x2aba24=new Date()['toISOString']()[_0x24ff79(0x191)]('T')[0x0];_0x125fd7[_0x24ff79(0x2d0)]=_0x2aba24;}_0x227a93['style'][_0x24ff79(0x1ed)]=_0x24ff79(0x23b),_0x227a93['style']['visibility']=_0x24ff79(0x346),_0x227a93['style'][_0x24ff79(0x372)]='1',_0x227a93['classList']['add'](_0x24ff79(0x2a0)),console['log'](_0x24ff79(0x368));const _0x40b02b=document[_0x24ff79(0x226)]('test-match-winner-username');_0x40b02b&&setTimeout(()=>{_0x40b02b['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x315510=a2_0xc86709;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x18542c=document['getElementById']('create-test-match-modal');if(!_0x18542c){console['error'](_0x315510(0x1a0));return;}_0x18542c['classList'][_0x315510(0x14c)]('active'),_0x18542c['style']['opacity']='0',_0x18542c['style']['visibility']='hidden',setTimeout(()=>{!_0x18542c['classList']['contains']('active')&&(_0x18542c['style']['display']='none');},0x12c),console[_0x315510(0x149)]('Modal\x20closed');}async function createTestMatch(){const _0x538c7a=a2_0xc86709;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x54e066=auth['currentUser'];if(!_0x54e066){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x1b160d='D1',_0xed87d='approvedMatches',_0x387182={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x538c7a(0x30b),'winnerDemoLink':null,'loserUsername':_0x538c7a(0x1c6),'loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x54e066['email'],'createdAt':serverTimestamp(),'createdBy':_0x54e066['email'],'isTestMatch':!![],'ladder':_0x1b160d,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x538c7a(0x2fa)+_0x54e066['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0xed87d),_0x387182),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x1a8602){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x1a8602),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x1a8602[_0x538c7a(0x26b)],'error');}}window['testFirebaseConnection']=async function(){const _0x47fd4c=a2_0xc86709;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console['log'](_0x47fd4c(0x2ee),db),console['log']('Current\x20user:',auth[_0x47fd4c(0x29b)]);const _0x1ab2c5=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x1ab2c5);const _0x310ac2=query(_0x1ab2c5,where(_0x47fd4c(0x1bb),'==','nonexistent'));console[_0x47fd4c(0x149)]('Query\x20created:',_0x310ac2);const _0x988534=await getDocs(_0x310ac2);console['log']('Query\x20executed.\x20Empty:',_0x988534['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x536232){console['error'](_0x47fd4c(0x230),_0x536232);}};function setupCreateTestMatchButton(){const _0xf2915c=a2_0xc86709,_0x5b5db9=document['getElementById']('create-test-match-btn');if(!_0x5b5db9){console['error'](_0xf2915c(0x314));return;}console['log'](_0xf2915c(0x273));const _0xd7eedd=_0x5b5db9['cloneNode'](!![]);_0x5b5db9['parentNode'][_0xf2915c(0x1d2)](_0xd7eedd,_0x5b5db9),_0xd7eedd['addEventListener']('click',function(_0x25f0c8){_0x25f0c8['preventDefault'](),_0x25f0c8['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0xf2915c(0x149)](_0xf2915c(0x1dd));}async function loadMatchesData(_0x2066b2=0x1){const _0xc0fe6=a2_0xc86709,_0x3d50b8=document[_0xc0fe6(0x226)]('matches-table-body');if(!_0x3d50b8)return;_0x3d50b8[_0xc0fe6(0x15d)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x41b3ef=currentLadder['toLowerCase'](),_0x49cec0=matchesPagination[_0x41b3ef],_0x452cc4=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0xc0fe6(0x339):_0xc0fe6(0x28c),_0x2f5280=collection(db,_0x452cc4);_0x2066b2<=0x1?(_0x49cec0['page']=0x1,_0x49cec0[_0xc0fe6(0x363)]=null,_0x49cec0['lastVisible']=null):_0x49cec0['page']=_0x2066b2;const _0x3426e8=getMatchesFilters();let _0x301dec=_0x2f5280;if(_0x3426e8['startDate']||_0x3426e8['endDate']||_0x3426e8[_0xc0fe6(0x2cc)]){let _0x1b8289=[];_0x3426e8[_0xc0fe6(0x301)]&&_0x3426e8[_0xc0fe6(0x23c)]?(_0x1b8289['push'](where('approvedAt','>=',_0x3426e8['startDate']),where(_0xc0fe6(0x281),'<=',_0x3426e8['endDate'])),_0x301dec=query(_0x2f5280,..._0x1b8289)):_0x301dec=query(_0x2f5280,orderBy('approvedAt',_0xc0fe6(0x2aa)));}else _0x301dec=query(_0x2f5280,orderBy('approvedAt','desc'));_0x2066b2>0x1&&_0x49cec0['lastVisible']?_0x301dec=query(_0x301dec,startAfter(_0x49cec0['lastVisible']),limit(PAGE_SIZE)):_0x301dec=query(_0x301dec,limit(PAGE_SIZE));const _0x418829=await getDocs(_0x301dec);!_0x418829['empty']&&(_0x49cec0[_0xc0fe6(0x363)]=_0x418829['docs'][0x0],_0x49cec0['lastVisible']=_0x418829['docs'][_0x418829[_0xc0fe6(0x353)][_0xc0fe6(0x1dc)]-0x1]);let _0x3dc5ed=![];if(!_0x418829[_0xc0fe6(0x2e3)]){const _0x13692b=query(_0x301dec,startAfter(_0x49cec0['lastVisible']),limit(0x1)),_0x3485d2=await getDocs(_0x13692b);_0x3dc5ed=!_0x3485d2[_0xc0fe6(0x2e3)];}const _0x550bc1=document[_0xc0fe6(0x226)]('matches-prev-page'),_0x2e829d=document['getElementById']('matches-next-page'),_0xd34366=document['getElementById']('matches-page-indicator');if(_0x550bc1)_0x550bc1[_0xc0fe6(0x198)]=_0x49cec0['page']<=0x1;if(_0x2e829d)_0x2e829d['disabled']=!_0x3dc5ed;if(_0xd34366)_0xd34366['textContent']=_0xc0fe6(0x15e)+_0x49cec0[_0xc0fe6(0x231)];if(_0x418829[_0xc0fe6(0x2e3)]){_0x3d50b8[_0xc0fe6(0x15d)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x3d50b8['innerHTML']='',_0x418829[_0xc0fe6(0x1e8)](_0x1cc0b9=>{const _0x3ad7fb=_0xc0fe6,_0x388ce6=_0x1cc0b9['data'](),_0x2046b8=document['createElement']('tr'),_0x5d6170=_0x388ce6[_0x3ad7fb(0x281)]?new Date(_0x388ce6['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x2046b8[_0x3ad7fb(0x2ab)](_0x3ad7fb(0x1cb),_0x1cc0b9['id']),_0x2046b8['setAttribute']('data-ladder',currentLadder),_0x2046b8[_0x3ad7fb(0x2b9)]['add']('match-row'),_0x2046b8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5d6170+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x388ce6['winnerUsername']||_0x3ad7fb(0x271))+_0x3ad7fb(0x2af)+(_0x388ce6['loserUsername']||'Unknown')+_0x3ad7fb(0x1c7)+(_0x388ce6['winnerScore']||0x0)+'\x20-\x20'+(_0x388ce6['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x388ce6[_0x3ad7fb(0x356)]||'N/A')+_0x3ad7fb(0x200)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x1cc0b9['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x1cc0b9['id']+_0x3ad7fb(0x352),_0x3d50b8[_0x3ad7fb(0x342)](_0x2046b8);}),setupMatchesActionButtons(),_0x3426e8['searchTerm']&&filterMatchesTable(),console[_0xc0fe6(0x149)](_0xc0fe6(0x16e)+_0x418829['size']+_0xc0fe6(0x262)+currentLadder+_0xc0fe6(0x1fb)+_0x49cec0['page']);}catch(_0x491a78){console['error'](_0xc0fe6(0x21f),_0x491a78),_0x3d50b8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x491a78['message']+_0xc0fe6(0x175);}}async function deleteMatch(_0x2081d2,_0x20be78){const _0x3f7734=a2_0xc86709;try{console['log']('Deleting\x20match\x20'+_0x2081d2+'\x20from\x20'+_0x20be78+'\x20ladder');const _0x2866c6=auth['currentUser'];if(!_0x2866c6){showNotification(_0x3f7734(0x1cd),_0x3f7734(0x2b6));return;}const _0x555ebc=_0x20be78==='D1'?'approvedMatches':_0x20be78==='D2'?'approvedMatchesD2':'approvedMatchesD3';console[_0x3f7734(0x149)]('Using\x20collection:\x20'+_0x555ebc),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x555ebc,_0x2081d2)),console[_0x3f7734(0x149)]('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully',_0x3f7734(0x295));const _0x16407a=_0x20be78['toLowerCase']();loadMatchesData(matchesPagination[_0x16407a]['page']);}catch(_0x643704){console[_0x3f7734(0x2b6)]('Error\x20deleting\x20match:',_0x643704),showNotification(_0x3f7734(0x1fc)+_0x643704['message'],'error');}}function setupMatchesActionButtons(){const _0x47b501=a2_0xc86709;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')[_0x47b501(0x1e8)](_0x158ef7=>{_0x158ef7['addEventListener']('click',_0x210206=>{const _0x4d3aa8=a2_0x1f9e;_0x210206['preventDefault'](),_0x210206[_0x4d3aa8(0x1e7)]();const _0x40c100=_0x210206['currentTarget']['dataset']['id'],_0x1a7fd5=_0x210206['currentTarget']['closest']('tr'),_0x4e22d2=_0x1a7fd5[_0x4d3aa8(0x246)][_0x4d3aa8(0x197)];console['log'](_0x4d3aa8(0x1a9),_0x40c100,_0x4e22d2),openEditMatchModal(_0x40c100,_0x4e22d2);});}),document[_0x47b501(0x312)]('.delete-match-btn')['forEach'](_0x22ce16=>{_0x22ce16['addEventListener']('click',_0x345d22=>{const _0x5ad522=a2_0x1f9e;_0x345d22['preventDefault'](),_0x345d22['stopPropagation']();const _0x14cf60=_0x345d22['currentTarget'][_0x5ad522(0x246)]['id'],_0x7be34b=_0x345d22['currentTarget']['closest']('tr'),_0x4534aa=_0x7be34b['dataset']['ladder']||currentLadder;console[_0x5ad522(0x149)]('Delete\x20match\x20clicked:',_0x14cf60,_0x4534aa),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x14cf60,_0x4534aa);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x2d2a51=a2_0xc86709,_0x576159=document['getElementById'](_0x2d2a51(0x37b))['value'][_0x2d2a51(0x35a)](),_0x3a8a73=document['querySelectorAll']('#matches-table-body\x20tr');let _0x5affcd=0x0;_0x3a8a73['forEach'](_0x52fc81=>{const _0x19eafc=_0x2d2a51;if(_0x52fc81[_0x19eafc(0x2b9)]['contains']('loading-cell')||_0x52fc81['classList']['contains'](_0x19eafc(0x1ef))||_0x52fc81['classList'][_0x19eafc(0x2cd)]('error-state'))return;const _0x5536d1=_0x52fc81[_0x19eafc(0x385)][0x1]['textContent']['toLowerCase'](),_0x1a642b=_0x52fc81['cells'][0x2]['textContent'][_0x19eafc(0x35a)](),_0x1398d1=_0x52fc81[_0x19eafc(0x385)][0x4]['textContent']['toLowerCase']();_0x5536d1['includes'](_0x576159)||_0x1a642b['includes'](_0x576159)||_0x1398d1['includes'](_0x576159)?(_0x52fc81['style']['display']='',_0x5affcd++):_0x52fc81['style']['display']=_0x19eafc(0x182);});if(_0x5affcd===0x0&&_0x3a8a73[_0x2d2a51(0x1dc)]>0x0){const _0x923188=document['getElementById']('matches-table-body'),_0x19ddd0=_0x923188['querySelector']('.no-results');if(!_0x19ddd0){const _0x1294fc=document['createElement']('tr');_0x1294fc['className']=_0x2d2a51(0x2bd),_0x1294fc['innerHTML']=_0x2d2a51(0x16f)+_0x576159+_0x2d2a51(0x351),_0x923188['appendChild'](_0x1294fc);}}else{const _0x5557aa=document[_0x2d2a51(0x29c)]('.no-results');_0x5557aa&&_0x5557aa[_0x2d2a51(0x14c)]();}}function getMatchesFilters(){const _0x1b86e9=a2_0xc86709,_0xfcdd16=document['getElementById']('matches-search')['value'][_0x1b86e9(0x35a)](),_0x37d2e6=document['getElementById'](_0x1b86e9(0x31d))[_0x1b86e9(0x2d0)],_0x153756=document[_0x1b86e9(0x226)]('matches-end-date')[_0x1b86e9(0x2d0)];let _0x48f2df=null,_0x14230c=null;return _0x37d2e6&&(_0x48f2df=new Date(_0x37d2e6),_0x48f2df['setHours'](0x0,0x0,0x0,0x0),_0x48f2df=Timestamp['fromDate'](_0x48f2df)),_0x153756&&(_0x14230c=new Date(_0x153756),_0x14230c[_0x1b86e9(0x193)](0x17,0x3b,0x3b,0x3e7),_0x14230c=Timestamp['fromDate'](_0x14230c)),{'searchTerm':_0xfcdd16,'startDate':_0x48f2df,'endDate':_0x14230c};}async function applyMatchesFilters(){const _0x3e21d1=currentLadder['toLowerCase']();matchesPagination[_0x3e21d1]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x2581e5=a2_0xc86709;document['getElementById']('matches-start-date')['value']='',document['getElementById']('matches-end-date')['value']='',document['getElementById']('matches-search')['value']='';const _0x3a266f=currentLadder[_0x2581e5(0x35a)]();matchesPagination[_0x3a266f]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x1fd92d,_0x44d222){const _0x4a7ef2=a2_0xc86709,_0x1f70b3=document['getElementById']('edit-match-modal');if(!_0x1f70b3)return;try{const _0x30bde4=_0x44d222==='D1'?'approvedMatches':_0x44d222==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x48382c=doc(db,_0x30bde4,_0x1fd92d),_0x2476a2=await getDoc(_0x48382c);if(!_0x2476a2['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x2212af=_0x2476a2['data']();document['getElementById'](_0x4a7ef2(0x1bc))['value']=_0x1fd92d,document['getElementById']('edit-match-ladder')['value']=_0x44d222,document['getElementById']('edit-match-winner')[_0x4a7ef2(0x2d0)]=_0x2212af[_0x4a7ef2(0x37c)]||'',document['getElementById']('edit-match-winner-score')['value']=_0x2212af['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')[_0x4a7ef2(0x2d0)]=_0x2212af['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x2212af['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x2212af[_0x4a7ef2(0x291)]||'',document['getElementById'](_0x4a7ef2(0x329))['value']=_0x2212af['loserScore']||0x0,document['getElementById']('edit-match-loser-suicides')[_0x4a7ef2(0x2d0)]=_0x2212af[_0x4a7ef2(0x29a)]||0x0,document[_0x4a7ef2(0x226)]('edit-match-loser-comment')['value']=_0x2212af[_0x4a7ef2(0x2d4)]||'',document['getElementById']('edit-match-map')[_0x4a7ef2(0x2d0)]=_0x2212af['mapPlayed']||'',document['getElementById'](_0x4a7ef2(0x2cf))['value']=_0x2212af['winnerDemoLink']||'',document['getElementById'](_0x4a7ef2(0x238))['value']=_0x2212af[_0x4a7ef2(0x2ca)]||_0x2212af[_0x4a7ef2(0x394)]||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x2212af[_0x4a7ef2(0x37c)]+_0x4a7ef2(0x2b0)+_0x2212af['loserUsername'],_0x1f70b3['classList']['add']('active');}catch(_0x2cdf0d){console['error']('Error\x20loading\x20match\x20data:',_0x2cdf0d),showNotification(_0x4a7ef2(0x298),'error');}}function closeEditMatchModal(){const _0x116afe=a2_0xc86709,_0x5b8bb4=document['getElementById'](_0x116afe(0x344));_0x5b8bb4&&_0x5b8bb4['classList'][_0x116afe(0x14c)](_0x116afe(0x2a0));}async function saveEditedMatch(){const _0x47ebf1=a2_0xc86709;try{const _0x2ebf6f=document[_0x47ebf1(0x226)]('edit-match-id')['value'],_0x15c50c=document['getElementById']('edit-match-ladder')[_0x47ebf1(0x2d0)];if(!_0x2ebf6f||!_0x15c50c){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x524dc5=_0x15c50c==='D1'?'approvedMatches':_0x15c50c==='D2'?'approvedMatchesD2':_0x47ebf1(0x28c),_0x38f688=document['getElementById']('edit-match-winner')['value'][_0x47ebf1(0x2ec)](),_0x2b7e4f=parseInt(document['getElementById']('edit-match-winner-score')[_0x47ebf1(0x2d0)]),_0x4a986c=parseInt(document[_0x47ebf1(0x226)](_0x47ebf1(0x15a))['value']),_0x5df16a=document['getElementById']('edit-match-winner-comment')[_0x47ebf1(0x2d0)]['trim'](),_0x4ed547=document['getElementById']('edit-match-loser')['value'][_0x47ebf1(0x2ec)](),_0x1973db=parseInt(document['getElementById'](_0x47ebf1(0x329))[_0x47ebf1(0x2d0)]),_0x128908=parseInt(document['getElementById']('edit-match-loser-suicides')[_0x47ebf1(0x2d0)]),_0x13f50b=document['getElementById']('edit-match-loser-comment')[_0x47ebf1(0x2d0)]['trim'](),_0x48b141=document['getElementById']('edit-match-map')['value']['trim'](),_0x433422=document['getElementById']('edit-match-winner-demo')[_0x47ebf1(0x2d0)][_0x47ebf1(0x2ec)](),_0x123ec7=document[_0x47ebf1(0x226)](_0x47ebf1(0x238))['value']['trim']();if(!_0x38f688||!_0x4ed547){showNotification(_0x47ebf1(0x302),'error');return;}await updateDoc(doc(db,_0x524dc5,_0x2ebf6f),{'winnerUsername':_0x38f688,'winnerScore':_0x2b7e4f,'winnerSuicides':_0x4a986c,'winnerComment':_0x5df16a,'loserUsername':_0x4ed547,'loserScore':_0x1973db,'loserSuicides':_0x128908,'loserComment':_0x13f50b,'mapPlayed':_0x48b141,'winnerDemoLink':_0x433422||null,'loserDemoLink':_0x123ec7||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x15c50c[_0x47ebf1(0x35a)]()]['page']);}catch(_0x304520){console[_0x47ebf1(0x2b6)]('Error\x20saving\x20match:',_0x304520),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x304520['message'],'error');}}async function openDeleteMatchModal(_0x1309b8,_0x47ff53){const _0x54cacd=a2_0xc86709;try{const _0x43e633=_0x47ff53==='D1'?'approvedMatches':_0x47ff53==='D2'?_0x54cacd(0x339):'approvedMatchesD3',_0x4aeb80=doc(db,_0x43e633,_0x1309b8),_0x33248b=await getDoc(_0x4aeb80);if(!_0x33248b[_0x54cacd(0x28b)]()){showNotification(_0x54cacd(0x31f),'error');return;}const _0x25dc57=_0x33248b['data'](),_0xcbdd33=document['getElementById'](_0x54cacd(0x333));_0xcbdd33['dataset']['matchId']=_0x1309b8,_0xcbdd33['dataset']['ladder']=_0x47ff53;const _0x2d0023=_0x25dc57['approvedAt']?new Date(_0x25dc57['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x4321da=document[_0x54cacd(0x226)]('delete-match-summary');_0x4321da['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x2d0023+_0x54cacd(0x304)+_0x25dc57[_0x54cacd(0x37c)]+_0x54cacd(0x341)+_0x25dc57[_0x54cacd(0x291)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x25dc57[_0x54cacd(0x16b)]||0x0)+'\x20-\x20'+(_0x25dc57[_0x54cacd(0x30f)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x25dc57['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x47ff53+_0x54cacd(0x2f3),_0xcbdd33[_0x54cacd(0x2b9)][_0x54cacd(0x1f3)]('active');}catch(_0x111323){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x111323),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x3a97e4=a2_0xc86709,_0x2e9c89=document[_0x3a97e4(0x226)](_0x3a97e4(0x333));_0x2e9c89&&(_0x2e9c89[_0x3a97e4(0x2b9)]['remove']('active'),_0x2e9c89['removeAttribute'](_0x3a97e4(0x27d)),_0x2e9c89['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x33314a=a2_0xc86709,_0x365d45=document[_0x33314a(0x226)]('delete-match-confirm-modal'),_0x1ff894=_0x365d45['dataset'][_0x33314a(0x248)],_0x53f59d=_0x365d45[_0x33314a(0x246)]['ladder'];if(!_0x1ff894||!_0x53f59d){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x33314a(0x2b6)),closeDeleteMatchModal();return;}try{const _0x58d9ae=_0x53f59d==='D1'?'approvedMatches':_0x53f59d==='D2'?'approvedMatchesD2':_0x33314a(0x28c);await deleteDoc(doc(db,_0x58d9ae,_0x1ff894)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x53f59d['toLowerCase']()][_0x33314a(0x231)]);}catch(_0x1b4d65){console['error'](_0x33314a(0x364),_0x1b4d65),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x1b4d65[_0x33314a(0x26b)],'error');}}async function saveHighlightChanges(){const _0x1b8ad8=a2_0xc86709,_0x35e4a7=document['getElementById']('edit-highlight-id')['value'],_0x16ce36=document['getElementById'](_0x1b8ad8(0x377))['value'];let _0x5b46a0={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x16ce36,'description':document[_0x1b8ad8(0x226)]('edit-highlight-description-input')['value'][_0x1b8ad8(0x2ec)](),'videoId':document['getElementById'](_0x1b8ad8(0x35e))['value'][_0x1b8ad8(0x2ec)](),'submittedBy':auth['currentUser']['email']};if(_0x16ce36===_0x1b8ad8(0x1a6)){_0x5b46a0['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')['value'][_0x1b8ad8(0x2ec)](),_0x5b46a0['map']=document['getElementById'](_0x1b8ad8(0x2ba))['value'][_0x1b8ad8(0x2ec)]();const _0x283129=document[_0x1b8ad8(0x226)]('edit-highlight-matchDate-input')[_0x1b8ad8(0x2d0)];_0x5b46a0['matchDate']=_0x283129?Timestamp[_0x1b8ad8(0x211)](new Date(_0x283129)):null,_0x5b46a0['winnerName']=document['getElementById']('edit-highlight-winnerName-input')['value']['trim'](),_0x5b46a0['winnerScore']=document[_0x1b8ad8(0x226)]('edit-highlight-winnerScore-input')['value']['trim'](),_0x5b46a0['loserName']=document[_0x1b8ad8(0x226)](_0x1b8ad8(0x18d))[_0x1b8ad8(0x2d0)]['trim'](),_0x5b46a0['loserScore']=document['getElementById'](_0x1b8ad8(0x345))['value']['trim'](),_0x5b46a0['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x5b46a0['mapCreator']=null,_0x5b46a0['mapVersion']=null,_0x5b46a0[_0x1b8ad8(0x26c)]=null,_0x5b46a0[_0x1b8ad8(0x184)]=null,_0x5b46a0[_0x1b8ad8(0x30e)]=null,_0x5b46a0[_0x1b8ad8(0x2f2)]=null,_0x5b46a0[_0x1b8ad8(0x390)]=null;}else{if(_0x16ce36==='creator')_0x5b46a0['map']=document['getElementById'](_0x1b8ad8(0x2ba))['value']['trim'](),_0x5b46a0['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x5b46a0['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value'][_0x1b8ad8(0x2ec)](),_0x5b46a0[_0x1b8ad8(0x26c)]=document[_0x1b8ad8(0x226)](_0x1b8ad8(0x2a9))['value']['trim'](),_0x5b46a0[_0x1b8ad8(0x1f5)]=null,_0x5b46a0['matchDate']=null,_0x5b46a0['winnerName']=null,_0x5b46a0[_0x1b8ad8(0x16b)]=null,_0x5b46a0['loserName']=null,_0x5b46a0['loserScore']=null,_0x5b46a0['matchLink']=null,_0x5b46a0['achievementPlayer']=null,_0x5b46a0[_0x1b8ad8(0x30e)]=null,_0x5b46a0['achievementDetails']=null,_0x5b46a0['playerProfileUrl']=null;else _0x16ce36==='achievement'&&(_0x5b46a0['achievementPlayer']=document['getElementById'](_0x1b8ad8(0x19c))[_0x1b8ad8(0x2d0)]['trim'](),_0x5b46a0[_0x1b8ad8(0x30e)]=document['getElementById'](_0x1b8ad8(0x1fa))['value']['trim'](),_0x5b46a0['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')[_0x1b8ad8(0x2d0)][_0x1b8ad8(0x2ec)](),_0x5b46a0['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x5b46a0['matchInfo']=null,_0x5b46a0[_0x1b8ad8(0x1d3)]=null,_0x5b46a0[_0x1b8ad8(0x37f)]=null,_0x5b46a0['winnerName']=null,_0x5b46a0['winnerScore']=null,_0x5b46a0[_0x1b8ad8(0x16d)]=null,_0x5b46a0['loserScore']=null,_0x5b46a0['matchLink']=null,_0x5b46a0['mapCreator']=null,_0x5b46a0[_0x1b8ad8(0x2ae)]=null,_0x5b46a0[_0x1b8ad8(0x26c)]=null);}try{if(_0x35e4a7){_0x5b46a0[_0x1b8ad8(0x2d5)]=serverTimestamp();const _0x117d53=doc(db,'highlights',_0x35e4a7);await updateDoc(_0x117d53,_0x5b46a0),showNotification('Highlight\x20updated\x20successfully!',_0x1b8ad8(0x295));}else _0x5b46a0['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x5b46a0),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x1e14c2){console[_0x1b8ad8(0x2b6)]('Error\x20saving\x20highlight:',_0x1e14c2),showNotification('Error\x20saving\x20highlight:\x20'+_0x1e14c2['message'],'error');}}async function resimulateMatch(){const _0x3ce60e=a2_0xc86709;try{const _0x4033af=document['getElementById'](_0x3ce60e(0x310))['value'];if(!_0x4033af){showNotification(_0x3ce60e(0x1d6),'error');return;}const _0x15f154=auth[_0x3ce60e(0x29b)];if(!_0x15f154){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches',_0x3ce60e(0x2b6));return;}const _0x48531d=currentLadder==='D1'?_0x3ce60e(0x229):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x17f781=doc(db,_0x48531d,_0x4033af),_0x55949b=await getDoc(_0x17f781);if(!_0x55949b['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x54994e=_0x55949b['data'](),_0xb8ae0f=_0x54994e['approvedAt']?_0x54994e['approvedAt']['toDate']()[_0x3ce60e(0x349)]():_0x54994e['matchDate']?_0x54994e['matchDate'][_0x3ce60e(0x29e)]?_0x54994e['matchDate']['toDate']()['toLocaleString']():new Date(_0x54994e['matchDate'])['toLocaleString']():_0x3ce60e(0x271),_0x110f69='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x54994e['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x54994e[_0x3ce60e(0x291)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x54994e[_0x3ce60e(0x16b)]+'-'+_0x54994e['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x54994e['mapPlayed']||_0x54994e[_0x3ce60e(0x22c)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0xb8ae0f+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x4033af+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x3ce60e(0x226)]('match-details-container')[_0x3ce60e(0x15d)]=_0x110f69,document['getElementById']('match-details-container')['style'][_0x3ce60e(0x1ed)]=_0x3ce60e(0x35c),document['getElementById']('confirm-resimulate-btn')['style']['display']='block',window[_0x3ce60e(0x144)]={'matchId':_0x4033af,'matchData':_0x54994e,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x19dd08){console['error']('Error\x20finding\x20match:',_0x19dd08),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x19dd08['message'],_0x3ce60e(0x2b6));}}async function confirmResimulateMatch(){const _0xabcf1d=a2_0xc86709;try{const {matchId:_0x1f44f6,matchData:_0x8cc141,ladder:_0x667212}=window['pendingResimulateData'];if(!_0x1f44f6||!_0x8cc141){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0xabcf1d(0x2b6));return;}const _0x44d199=_0x667212==='D1'?'players':_0x667212==='D2'?_0xabcf1d(0x2a3):'playersD3',_0x2df19e=_0x667212==='D1'?'eloHistory':_0x667212==='D2'?_0xabcf1d(0x16a):'eloHistoryD3',[_0x3b97a3,_0x1dd048]=await Promise[_0xabcf1d(0x343)]([getDocs(query(collection(db,_0x44d199),where('username','==',_0x8cc141['winnerUsername']))),getDocs(query(collection(db,_0x44d199),where('username','==',_0x8cc141['loserUsername'])))]);if(_0x3b97a3['empty']||_0x1dd048['empty']){showNotification(_0xabcf1d(0x169),'error');return;}const _0x481105=_0x3b97a3['docs'][0x0]['id'],_0x1796d8=_0x1dd048[_0xabcf1d(0x353)][0x0]['id'],_0x3247ed=_0x3b97a3['docs'][0x0][_0xabcf1d(0x14f)](),_0x1b0827=_0x1dd048['docs'][0x0]['data'](),[_0x2b2ec7,_0x2cb709]=await Promise['all']([getDocs(query(collection(db,_0x2df19e),where('playerId','==',_0x481105),where(_0xabcf1d(0x248),'==',_0x1f44f6))),getDocs(query(collection(db,_0x2df19e),where('playerId','==',_0x1796d8),where(_0xabcf1d(0x248),'==',_0x1f44f6)))]),_0x1a599d=!_0x2b2ec7['empty'],_0x157cd0=!_0x2cb709['empty'],_0x21945f=_0xabcf1d(0x297)+(_0x1a599d?_0xabcf1d(0x269):'\x20Missing')+_0xabcf1d(0x2c5)+(_0x157cd0?'\x20Exists':'\x20Missing')+_0xabcf1d(0x1db)+(_0x3247ed['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x1b0827['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x3247ed['position']||_0xabcf1d(0x271))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x1b0827['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0xabcf1d(0x226)]('validation-results-container')['innerHTML']=_0x21945f,document[_0xabcf1d(0x226)]('validation-results-container')['style'][_0xabcf1d(0x1ed)]='block';if(_0x1a599d&&_0x157cd0){showNotification(_0xabcf1d(0x228),'warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x3abce7=_0x8cc141['approvedAt']||_0x8cc141[_0xabcf1d(0x37f)]||serverTimestamp(),[_0x10b7ad,_0x23cd08]=await Promise['all']([getPlayerEloAtTime(_0x481105,_0x3abce7,_0x2df19e),getPlayerEloAtTime(_0x1796d8,_0x3abce7,_0x2df19e)]),{calculateElo:_0x1a6104}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x1bed28,newLoserRating:_0x13eb67}=_0x1a6104(_0x10b7ad,_0x23cd08),_0x545da8=_0x3247ed['position']||Number['MAX_SAFE_INTEGER'],_0x4b6685=_0x1b0827[_0xabcf1d(0x1ec)]||Number['MAX_SAFE_INTEGER'];let _0x452b5c=_0x545da8,_0x300a7b=_0x4b6685;_0x545da8>_0x4b6685&&(_0x452b5c=_0x4b6685,_0x300a7b=_0x4b6685+0x1);const _0x591ed8=writeBatch(db),_0x3ffe8f=doc(db,_0x44d199,_0x481105);_0x591ed8['update'](_0x3ffe8f,{'eloRating':_0x1bed28,'position':_0x452b5c,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x36e84c=doc(db,_0x44d199,_0x1796d8);_0x591ed8['update'](_0x36e84c,{'eloRating':_0x13eb67,'position':_0x300a7b,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xabcf1d(0x29b)]['uid']});if(_0x545da8>_0x4b6685){const _0xb0abe=await getDocs(query(collection(db,_0x44d199),where('position','>',_0x4b6685),where('position','<',_0x545da8)));_0xb0abe[_0xabcf1d(0x1e8)](_0xfd5da4=>{const _0x50af12=doc(db,_0x44d199,_0xfd5da4['id']),_0x809ef=_0xfd5da4['data']()['position'];_0x591ed8['update'](_0x50af12,{'position':_0x809ef+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x1a599d){const _0x3da155=doc(collection(db,_0x2df19e));_0x591ed8['set'](_0x3da155,{'playerId':_0x481105,'player':_0x8cc141[_0xabcf1d(0x37c)],'previousElo':_0x10b7ad,'newElo':_0x1bed28,'eloChange':_0x1bed28-_0x10b7ad,'opponentId':_0x1796d8,'opponent':_0x8cc141['loserUsername'],'matchResult':'win','previousPosition':_0x545da8,'newPosition':_0x452b5c,'positionChange':_0x452b5c-_0x545da8,'matchId':_0x1f44f6,'timestamp':_0x3abce7,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x667212,'matchScore':_0x8cc141['winnerScore']+'-'+_0x8cc141['loserScore'],'mapPlayed':_0x8cc141['mapPlayed']||_0x8cc141['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x157cd0){const _0x53a5cb=doc(collection(db,_0x2df19e));_0x591ed8['set'](_0x53a5cb,{'playerId':_0x1796d8,'player':_0x8cc141[_0xabcf1d(0x291)],'previousElo':_0x23cd08,'newElo':_0x13eb67,'eloChange':_0x13eb67-_0x23cd08,'opponentId':_0x481105,'opponent':_0x8cc141[_0xabcf1d(0x37c)],'matchResult':'loss','previousPosition':_0x4b6685,'newPosition':_0x300a7b,'positionChange':_0x300a7b-_0x4b6685,'matchId':_0x1f44f6,'timestamp':_0x3abce7,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x667212,'matchScore':_0x8cc141['winnerScore']+'-'+_0x8cc141['loserScore'],'mapPlayed':_0x8cc141[_0xabcf1d(0x356)]||_0x8cc141['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x17ee6d=_0x667212==='D1'?'approvedMatches':_0x667212==='D2'?_0xabcf1d(0x339):_0xabcf1d(0x28c),_0x5a596c=doc(db,_0x17ee6d,_0x1f44f6);_0x591ed8['update'](_0x5a596c,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x3247ed[_0xabcf1d(0x2ea)],'originalLoserElo':_0x1b0827[_0xabcf1d(0x2ea)],'originalWinnerPosition':_0x545da8,'originalLoserPosition':_0x4b6685,'resimulatedWinnerElo':_0x1bed28,'resimulatedLoserElo':_0x13eb67,'resimulatedWinnerPosition':_0x452b5c,'resimulatedLoserPosition':_0x300a7b}),await _0x591ed8[_0xabcf1d(0x207)]();const _0x66ff4d=(!_0x1a599d?0x1:0x0)+(!_0x157cd0?0x1:0x0),_0x28261e=_0x545da8!==_0x452b5c||_0x4b6685!==_0x300a7b;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x66ff4d+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x10b7ad+''+_0x1bed28+_0xabcf1d(0x20e)+(_0x1bed28-_0x10b7ad)+'),\x20')+('Loser\x20'+_0x23cd08+''+_0x13eb67+'\x20('+(_0x13eb67-_0x23cd08)+').\x20')+(''+(_0x28261e?'Positions\x20updated:\x20Winner\x20'+_0x545da8+''+_0x452b5c+',\x20Loser\x20'+_0x4b6685+''+_0x300a7b:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document[_0xabcf1d(0x29c)]('#players.content-section.active')&&loadPlayersData();}catch(_0x525725){console['error'](_0xabcf1d(0x2ff),_0x525725),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x525725['message'],'error');}}async function getPlayerEloAtTime(_0x518c1f,_0x17fef4,_0xb5cf10){const _0x4c94cd=a2_0xc86709;try{const _0x508bdb=_0x17fef4[_0x4c94cd(0x29e)]?_0x17fef4[_0x4c94cd(0x29e)]():new Date(_0x17fef4),_0x5651a1=query(collection(db,_0xb5cf10),where(_0x4c94cd(0x334),'==',_0x518c1f),where('timestamp','<',_0x17fef4),orderBy(_0x4c94cd(0x2de),'desc'),limit(0x1)),_0x27ffa0=await getDocs(_0x5651a1);if(!_0x27ffa0['empty']){const _0x5a2bdf=_0x27ffa0['docs'][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x518c1f+_0x4c94cd(0x292)+_0x5a2bdf['newElo']),_0x5a2bdf[_0x4c94cd(0x22d)];}else return console['log'](_0x4c94cd(0x28d)+_0x518c1f+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x436a5b){return console['error'](_0x4c94cd(0x235)+_0x518c1f+':',_0x436a5b),0x4b0;}}function openResimulateModal(){const _0x2ceec5=a2_0xc86709;console['log']('openResimulateModal\x20called!');const _0xa7b8f5=document['getElementById']('resimulate-modal');console['log']('Modal\x20element\x20found:',_0xa7b8f5);if(!_0xa7b8f5){console['error']('Modal\x20element\x20not\x20found!');return;}_0xa7b8f5['style']['display']='block',_0xa7b8f5['style']['visibility']=_0x2ceec5(0x346),_0xa7b8f5['style']['opacity']='1',_0xa7b8f5['classList'][_0x2ceec5(0x1f3)]('active'),console['log'](_0x2ceec5(0x368)),console[_0x2ceec5(0x149)](_0x2ceec5(0x1d5),window[_0x2ceec5(0x23e)](_0xa7b8f5)['display']);const _0x2b3992=document['getElementById']('match-details-container'),_0x4963a8=document['getElementById']('validation-results-container'),_0x464117=document['getElementById']('confirm-resimulate-btn'),_0x43aa5a=document['getElementById']('resimulate-match-id');if(_0x2b3992)_0x2b3992['innerHTML']='';if(_0x4963a8)_0x4963a8['innerHTML']='';if(_0x464117)_0x464117['style']['display']=_0x2ceec5(0x182);if(_0x43aa5a)_0x43aa5a['value']='';console[_0x2ceec5(0x149)]('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x46a7e7=a2_0xc86709;document['getElementById']('resimulate-modal')['style'][_0x46a7e7(0x1ed)]='none',window[_0x46a7e7(0x144)]=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x12637d=a2_0xc86709;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x449f14){console[_0x12637d(0x2b6)](_0x12637d(0x1e2),_0x449f14),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x449f14['message'],'error');}}function renderPointsOverview(_0x85e8de){const _0x459f69=document['getElementById']('points-overview-table-body');if(!_0x459f69)return;if(_0x85e8de['length']===0x0){_0x459f69['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x459f69['innerHTML']='',_0x85e8de['forEach'](_0x36e00a=>{const _0x40ba99=a2_0x1f9e,_0x15ff38=document[_0x40ba99(0x32c)]('tr'),_0x481894=_0x36e00a['displayName']||_0x36e00a[_0x40ba99(0x1bb)]||'Unknown\x20User',_0x2a0d73=_0x36e00a['email']||'No\x20email',_0x15edf2=_0x36e00a['points']||0x0,_0x19bc2e=_0x36e00a['lastPointsModified']?new Date(_0x36e00a['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x15ff38[_0x40ba99(0x15d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x481894+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a0d73+_0x40ba99(0x174)+(_0x15edf2>0x3e8?'high-points':_0x15edf2>0x1f4?_0x40ba99(0x245):'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x15edf2['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x19bc2e+_0x40ba99(0x323)+_0x36e00a['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x36e00a['id']+_0x40ba99(0x1a3),_0x459f69['appendChild'](_0x15ff38);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0xb3e5da=a2_0xc86709;console[_0xb3e5da(0x149)](_0xb3e5da(0x285));const _0x474ae7=document[_0xb3e5da(0x312)]('.quick-edit-btn');console[_0xb3e5da(0x149)](_0xb3e5da(0x201)+_0x474ae7[_0xb3e5da(0x1dc)]+_0xb3e5da(0x21b)),_0x474ae7['forEach'](_0xef4f39=>{const _0x446745=_0xb3e5da,_0x5cc4df=_0xef4f39['cloneNode'](!![]);_0xef4f39['parentNode'][_0x446745(0x1d2)](_0x5cc4df,_0xef4f39);});const _0x4a2167=document[_0xb3e5da(0x312)]('.view-history-btn');console[_0xb3e5da(0x149)]('Found\x20'+_0x4a2167[_0xb3e5da(0x1dc)]+'\x20view\x20history\x20buttons'),_0x4a2167['forEach'](_0x6bd2f3=>{const _0x56fc4e=_0xb3e5da,_0x469280=_0x6bd2f3['cloneNode'](!![]);_0x6bd2f3['parentNode'][_0x56fc4e(0x1d2)](_0x469280,_0x6bd2f3);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x2980e1=>{const _0xa62443=_0xb3e5da;_0x2980e1[_0xa62443(0x2c6)]('click',function(_0x45442c){const _0x2fbfbe=_0xa62443;_0x45442c['preventDefault'](),_0x45442c[_0x2fbfbe(0x1e7)]();const _0x1eac3c=this['dataset']['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x1eac3c);if(!_0x1eac3c){console[_0x2fbfbe(0x2b6)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x1eac3c);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0xbb661d=>{_0xbb661d['addEventListener']('click',function(_0x3055fb){const _0x4a7c6f=a2_0x1f9e;_0x3055fb[_0x4a7c6f(0x389)](),_0x3055fb['stopPropagation']();const _0x182ea5=this[_0x4a7c6f(0x246)]['userId'];console[_0x4a7c6f(0x149)]('View\x20history\x20clicked\x20for\x20user:',_0x182ea5);if(!_0x182ea5){console[_0x4a7c6f(0x2b6)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x182ea5);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x505a77){const _0x2683ea=a2_0xc86709;console[_0x2683ea(0x149)](_0x2683ea(0x25c),_0x505a77);const _0x5db4ee=document['getElementById']('quick-edit-points-modal');if(!_0x5db4ee){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification(_0x2683ea(0x27c),'error');return;}try{showNotification(_0x2683ea(0x33e),'info');const _0xd573cf=doc(db,_0x2683ea(0x18b),_0x505a77),_0x415ca7=await getDoc(_0xd573cf);if(!_0x415ca7['exists']()){showNotification(_0x2683ea(0x1d1),_0x2683ea(0x2b6));return;}const _0x5f3fe3=_0x415ca7['data']();console[_0x2683ea(0x149)]('User\x20data\x20loaded:',_0x5f3fe3);const _0x2aed46=document['getElementById']('quick-edit-user-id'),_0x51e773=document['getElementById']('quick-edit-display-name'),_0x36b5fa=document['getElementById'](_0x2683ea(0x347)),_0x5b9068=document['getElementById']('quick-edit-current-points'),_0x428db0=document[_0x2683ea(0x226)]('quick-edit-points-form');if(!_0x2aed46||!_0x51e773||!_0x36b5fa||!_0x5b9068||!_0x428db0){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x2aed46[_0x2683ea(0x2d0)]=_0x505a77,_0x51e773['textContent']=_0x5f3fe3['displayName']||_0x5f3fe3[_0x2683ea(0x1bb)]||_0x2683ea(0x1a7),_0x36b5fa[_0x2683ea(0x2e8)]=_0x5f3fe3['email']||_0x2683ea(0x194),_0x5b9068[_0x2683ea(0x2e8)]=(_0x5f3fe3[_0x2683ea(0x160)]||0x0)['toLocaleString'](),_0x428db0['reset']();const _0x25d1ee=document['getElementById'](_0x2683ea(0x22a));_0x25d1ee&&(_0x25d1ee['checked']=!![]);_0x5db4ee[_0x2683ea(0x2b9)]['add']('active'),console['log']('Modal\x20opened\x20successfully');const _0x5b08bd=document['getElementById']('quick-points-amount');_0x5b08bd&&setTimeout(()=>_0x5b08bd[_0x2683ea(0x348)](),0x64);}catch(_0x275d8f){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x275d8f),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x275d8f['message'],_0x2683ea(0x2b6));}}function closeQuickEditModal(){const _0x4effee=a2_0xc86709,_0x48be39=document['getElementById'](_0x4effee(0x309));_0x48be39&&_0x48be39['classList']['remove']('active');}async function handleQuickEditPoints(_0x508164){const _0x4817db=a2_0xc86709;_0x508164['preventDefault']();const _0xe204e6=document['getElementById']('quick-edit-user-id')['value'],_0x162317=document[_0x4817db(0x29c)](_0x4817db(0x26a))[_0x4817db(0x2d0)],_0x465d52=parseInt(document[_0x4817db(0x226)](_0x4817db(0x26f))[_0x4817db(0x2d0)]),_0x2e2c9f=document['getElementById'](_0x4817db(0x306))['value']['trim']();console[_0x4817db(0x149)]('Processing\x20points\x20edit:',{'userId':_0xe204e6,'action':_0x162317,'amount':_0x465d52,'reason':_0x2e2c9f});if(!_0xe204e6||!_0x465d52||_0x465d52<0x0){showNotification(_0x4817db(0x154),'error');return;}try{await modifyUserPoints(_0xe204e6,_0x162317,_0x465d52,_0x2e2c9f),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log'](_0x4817db(0x225),_0xe204e6);}catch(_0x1c3bfc){console['error']('Error\x20updating\x20points:',_0x1c3bfc),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x1c3bfc['message'],'error');}}async function searchUsersForPoints(){const _0x289c37=a2_0xc86709,_0x44c25=document[_0x289c37(0x226)]('points-user-search')['value'][_0x289c37(0x2ec)]()['toLowerCase'](),_0x52ef20=document['getElementById']('user-search-results');if(!_0x44c25||_0x44c25['length']<0x2){_0x52ef20['innerHTML']='';return;}_0x52ef20['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x19dbe5=collection(db,'userProfiles'),_0x492f0c=await getDocs(_0x19dbe5),_0x37d0d8=[];_0x492f0c[_0x289c37(0x1e8)](_0x483434=>{const _0x52e39a=_0x289c37,_0xfddd9=_0x483434['data'](),_0x54278f=(_0xfddd9['displayName']||_0xfddd9['username']||'')[_0x52e39a(0x35a)](),_0x47530a=(_0xfddd9[_0x52e39a(0x371)]||'')['toLowerCase']();(_0x54278f[_0x52e39a(0x354)](_0x44c25)||_0x47530a[_0x52e39a(0x354)](_0x44c25))&&_0x37d0d8['push']({'id':_0x483434['id'],..._0xfddd9});});if(_0x37d0d8['length']===0x0){_0x52ef20[_0x289c37(0x15d)]=_0x289c37(0x2f1);return;}_0x52ef20[_0x289c37(0x15d)]='',_0x37d0d8[_0x289c37(0x1e8)](_0x2164a0=>{const _0x296d31=_0x289c37,_0x343db1=document['createElement']('div');_0x343db1[_0x296d31(0x15b)]='search-result-item',_0x343db1[_0x296d31(0x15d)]=_0x296d31(0x31c)+(_0x2164a0['displayName']||_0x2164a0[_0x296d31(0x1bb)]||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x2164a0['email']||_0x296d31(0x194))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x2164a0['points']||0x0)[_0x296d31(0x349)]()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x343db1['addEventListener']('click',()=>selectUserForPoints(_0x2164a0)),_0x52ef20['appendChild'](_0x343db1);});}catch(_0x5947f1){console[_0x289c37(0x2b6)]('Error\x20searching\x20users:',_0x5947f1),_0x52ef20['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x438dca){const _0x42c685=a2_0xc86709;document['getElementById']('selected-user-name')['textContent']=_0x438dca['displayName']||_0x438dca['username']||'Unknown\x20User',document[_0x42c685(0x226)]('selected-user-points')['textContent']=(_0x438dca[_0x42c685(0x160)]||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')[_0x42c685(0x2d0)]=_0x438dca['id'],document['getElementById']('selected-user-info')[_0x42c685(0x178)][_0x42c685(0x1ed)]='block',document[_0x42c685(0x226)]('points-management-forms')[_0x42c685(0x178)]['display']='block',document['getElementById']('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')[_0x42c685(0x2d0)]='';}async function handleModifyPoints(_0x37dd1c){const _0x53dd3d=a2_0xc86709;_0x37dd1c[_0x53dd3d(0x389)]();const _0x24dee9=document[_0x53dd3d(0x226)]('selected-user-id')['value'],_0x228dec=document[_0x53dd3d(0x226)]('points-action')[_0x53dd3d(0x2d0)],_0x4d4a73=parseInt(document[_0x53dd3d(0x226)]('points-amount')['value']),_0x365ea5=document[_0x53dd3d(0x226)]('points-reason')['value'][_0x53dd3d(0x2ec)]();if(!_0x24dee9||!_0x4d4a73||_0x4d4a73<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x24dee9,_0x228dec,_0x4d4a73,_0x365ea5),document[_0x53dd3d(0x226)]('modify-points-form')['reset']();const _0x11e2d9=doc(db,_0x53dd3d(0x18b),_0x24dee9),_0x178235=await getDoc(_0x11e2d9);if(_0x178235['exists']()){const _0x2f6b36=_0x178235['data']();document['getElementById']('selected-user-points')['textContent']=(_0x2f6b36[_0x53dd3d(0x160)]||0x0)[_0x53dd3d(0x349)]();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0xa91e39){console['error']('Error\x20modifying\x20points:',_0xa91e39),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0xa91e39['message'],_0x53dd3d(0x2b6));}}async function loadPointsHistory(){const _0x162c39=a2_0xc86709,_0x7cbc5a=document['getElementById']('points-history-table-body');if(!_0x7cbc5a)return;_0x7cbc5a[_0x162c39(0x15d)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x530fd3=collection(db,_0x162c39(0x142)),_0x20bfab=query(_0x530fd3,orderBy(_0x162c39(0x2de),'desc'),limit(0x32)),_0x2aff9c=await getDocs(_0x20bfab);if(_0x2aff9c[_0x162c39(0x2e3)]){_0x7cbc5a['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x7cbc5a[_0x162c39(0x15d)]='',_0x2aff9c['forEach'](_0x1cf29e=>{const _0x15e48d=_0x162c39,_0xa4c162=_0x1cf29e['data'](),_0x6c041b=document['createElement']('tr'),_0x529779=_0xa4c162[_0x15e48d(0x2de)]?new Date(_0xa4c162['timestamp']['seconds']*0x3e8)['toLocaleString']():_0x15e48d(0x271);let _0x352330='';switch(_0xa4c162['action']){case'add':_0x352330='Added\x20'+_0xa4c162['amount']+'\x20points';break;case'subtract':_0x352330=_0x15e48d(0x20f)+_0xa4c162['amount']+'\x20points';break;case'set':_0x352330='Set\x20to\x20'+_0xa4c162[_0x15e48d(0x25b)]+'\x20points';break;default:_0x352330=_0xa4c162['action']+'\x20'+_0xa4c162[_0x15e48d(0x25b)]+_0x15e48d(0x19d);}_0x6c041b['innerHTML']=_0x15e48d(0x399)+_0x529779+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xa4c162[_0x15e48d(0x330)]||_0x15e48d(0x1a7))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x352330+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0xa4c162[_0x15e48d(0x14d)]+_0x15e48d(0x2ef)+(_0xa4c162['previousPoints']||0x0)+'\x20\x20'+(_0xa4c162['newPoints']||0x0)+_0x15e48d(0x1d9)+(_0xa4c162['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xa4c162['adminEmail']||'Unknown\x20Admin')+_0x15e48d(0x387),_0x7cbc5a[_0x15e48d(0x342)](_0x6c041b);});}catch(_0x4a5acd){console['error'](_0x162c39(0x1c1),_0x4a5acd),_0x7cbc5a['innerHTML']=_0x162c39(0x1f6)+_0x4a5acd[_0x162c39(0x26b)]+'</td></tr>';}}function filterPointsOverview(){const _0x93390a=a2_0xc86709,_0x181c3d=document['getElementById'](_0x93390a(0x375))['value']['toLowerCase']();if(!window[_0x93390a(0x2c0)])return;const _0x191c13=window['allUsersPoints']['filter'](_0x49a658=>{const _0x4bf130=_0x93390a,_0x56d572=(_0x49a658['displayName']||_0x49a658['username']||'')['toLowerCase'](),_0x3bce81=(_0x49a658['email']||'')[_0x4bf130(0x35a)]();return _0x56d572['includes'](_0x181c3d)||_0x3bce81['includes'](_0x181c3d);});renderPointsOverview(_0x191c13);}function sortPointsOverview(){const _0x1a5ec6=a2_0xc86709,_0x167194=document['getElementById']('points-sort-order')[_0x1a5ec6(0x2d0)];if(!window['allUsersPoints'])return;const _0x15d697=[...window['allUsersPoints']];switch(_0x167194){case'points-desc':_0x15d697[_0x1a5ec6(0x224)]((_0x2cb276,_0xe2c2f3)=>(_0xe2c2f3['points']||0x0)-(_0x2cb276[_0x1a5ec6(0x160)]||0x0));break;case'points-asc':_0x15d697['sort']((_0x436e88,_0x373b18)=>(_0x436e88['points']||0x0)-(_0x373b18['points']||0x0));break;case'name-asc':_0x15d697[_0x1a5ec6(0x224)]((_0x5e6ad9,_0xd83f6a)=>{const _0x109d0a=(_0x5e6ad9['displayName']||_0x5e6ad9['username']||'')['toLowerCase'](),_0x4aeec9=(_0xd83f6a['displayName']||_0xd83f6a['username']||'')['toLowerCase']();return _0x109d0a['localeCompare'](_0x4aeec9);});break;case _0x1a5ec6(0x355):_0x15d697['sort']((_0x238d1d,_0x5d3d72)=>{const _0x6275c8=_0x1a5ec6,_0x327b04=(_0x238d1d['displayName']||_0x238d1d[_0x6275c8(0x1bb)]||'')[_0x6275c8(0x35a)](),_0x255a7c=(_0x5d3d72['displayName']||_0x5d3d72[_0x6275c8(0x1bb)]||'')['toLowerCase']();return _0x255a7c['localeCompare'](_0x327b04);});break;}renderPointsOverview(_0x15d697);}async function handleAwardItem(_0x4396e1){const _0x21eb29=a2_0xc86709;_0x4396e1['preventDefault']();const _0x95aa96=document['getElementById']('selected-user-id')['value'],_0x100f57=document['getElementById'](_0x21eb29(0x23f))['value'],_0x26c879=document['getElementById']('award-reason')['value']['trim']();if(!_0x95aa96||!_0x100f57){showNotification(_0x21eb29(0x336),'error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')[_0x21eb29(0x214)]();}catch(_0x2060de){console['error'](_0x21eb29(0x313),_0x2060de),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x2060de['message'],'error');}}async function loadUserPointsHistory(_0x1fe7d4){const _0xe8b0e3=a2_0xc86709;try{const _0x2e3849=collection(db,'pointsHistory'),_0x573cd1=query(_0x2e3849,where('userId','==',_0x1fe7d4),orderBy('timestamp','desc')),_0x904675=await getDocs(_0x573cd1);console[_0xe8b0e3(0x149)]('Found\x20'+_0x904675['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x1fe7d4),showNotification(_0xe8b0e3(0x172)+_0x904675['size']+_0xe8b0e3(0x395),'info');}catch(_0x2990f9){console[_0xe8b0e3(0x2b6)]('Error\x20loading\x20user\x20points\x20history:',_0x2990f9),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x22ba05=a2_0xc86709;try{console[_0x22ba05(0x149)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x5f5878=collection(db,'userProfiles'),_0x48171c=await getDocs(_0x5f5878);if(_0x48171c['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x3cb1a1=0x0,_0x2d2d73=0x0;const _0x3050a5=writeBatch(db);let _0x29371c=0x0;return console[_0x22ba05(0x149)]('Found\x20'+_0x48171c['size']+'\x20users\x20to\x20check...'),_0x48171c['forEach'](_0x4566c9=>{const _0x1d0880=_0x22ba05,_0x3b2ba5=_0x4566c9['data']();_0x3b2ba5[_0x1d0880(0x160)]===undefined||_0x3b2ba5['points']===null?(_0x3050a5['update'](_0x4566c9['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x3cb1a1++,_0x29371c++,console['log'](_0x1d0880(0x36b)+(_0x3b2ba5['displayName']||_0x3b2ba5['username']||_0x3b2ba5['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x2d2d73++,console['log']((_0x3b2ba5['displayName']||_0x3b2ba5['username']||_0x3b2ba5['email']||'Unknown')+_0x1d0880(0x218)+_0x3b2ba5['points'])),_0x29371c>=0x1f4&&console[_0x1d0880(0x31b)]('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x3cb1a1>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x3cb1a1+'\x20users...'),await _0x3050a5['commit'](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x3cb1a1+'\x20users')):console[_0x22ba05(0x149)]('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x48171c['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x3cb1a1+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x2d2d73),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x3cb1a1+_0x22ba05(0x367)+_0x2d2d73+_0x22ba05(0x2fd),'success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x48171c['size'],'usersUpdated':_0x3cb1a1,'usersAlreadyHadPoints':_0x2d2d73};}catch(_0x5d673f){console['error']('Error\x20initializing\x20points\x20field:',_0x5d673f),showNotification('Error\x20initializing\x20points:\x20'+_0x5d673f[_0x22ba05(0x26b)],_0x22ba05(0x2b6));throw _0x5d673f;}}function addPointsMigrationButton(){const _0x3ee0ee=a2_0xc86709,_0x290d04=document['getElementById']('manage-points');if(!_0x290d04)return;if(document[_0x3ee0ee(0x226)](_0x3ee0ee(0x365)))return;const _0x21c0ff=document['createElement']('div');_0x21c0ff['className']='migration-section',_0x21c0ff['style']['marginBottom']=_0x3ee0ee(0x1d7),_0x21c0ff['style']['padding']='15px',_0x21c0ff['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x21c0ff[_0x3ee0ee(0x178)]['border']=_0x3ee0ee(0x391),_0x21c0ff['style']['borderRadius']=_0x3ee0ee(0x1b6),_0x21c0ff['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x5ed2c9=_0x290d04['querySelector']('.section-header');_0x5ed2c9&&_0x5ed2c9['insertAdjacentElement']('afterend',_0x21c0ff),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x1cdef2=_0x3ee0ee;if(confirm(_0x1cdef2(0x331))){this[_0x1cdef2(0x198)]=!![],this['innerHTML']=_0x1cdef2(0x170);try{await initializeUserPointsField(),this['innerHTML']=_0x1cdef2(0x156),this['style'][_0x1cdef2(0x147)]='#28a745',setTimeout(()=>{_0x21c0ff['style']['display']='none';},0xbb8);}catch(_0x2d0793){this['innerHTML']=_0x1cdef2(0x254),this['disabled']=![];}}});}function a2_0x1f9e(_0x18644f,_0x304929){const _0x5d5267=a2_0x22f4();return a2_0x1f9e=function(_0x5d55c5,_0x848b5e){_0x5d55c5=_0x5d55c5-0x140;let _0x22f4f9=_0x5d5267[_0x5d55c5];return _0x22f4f9;},a2_0x1f9e(_0x18644f,_0x304929);}function setupManagePointsSection(){const _0x4b08cc=a2_0xc86709;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x11e9a9=document['getElementById']('points-user-search');_0x11e9a9&&_0x11e9a9[_0x4b08cc(0x2c6)]('input',debounce(searchUsersForPoints,0x12c));const _0x22c070=document['getElementById'](_0x4b08cc(0x1e0));_0x22c070&&_0x22c070[_0x4b08cc(0x2c6)]('submit',handleModifyPoints);const _0x2e1f8e=document['getElementById']('award-item-form');_0x2e1f8e&&_0x2e1f8e['addEventListener']('submit',handleAwardItem);const _0x121c96=document['getElementById']('points-overview-search');_0x121c96&&_0x121c96[_0x4b08cc(0x2c6)]('input',debounce(filterPointsOverview,0x12c));const _0x2104e1=document['getElementById']('points-sort-order');_0x2104e1&&_0x2104e1['addEventListener'](_0x4b08cc(0x2f5),sortPointsOverview);const _0x3ec654=document['getElementById']('refresh-points-overview');_0x3ec654&&_0x3ec654[_0x4b08cc(0x2c6)]('click',loadPointsOverview);const _0x41579a=document[_0x4b08cc(0x226)](_0x4b08cc(0x1a4));_0x41579a&&_0x41579a[_0x4b08cc(0x2c6)]('click',async()=>{const _0x4e526d=_0x4b08cc;confirm(_0x4e526d(0x24d))&&(_0x41579a['disabled']=!![],_0x41579a[_0x4e526d(0x15d)]=_0x4e526d(0x22e),await _0x58783b(),_0x41579a['disabled']=![],_0x41579a['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x1047c7=document['getElementById'](_0x4b08cc(0x282));_0x1047c7&&_0x1047c7['addEventListener']('click',awardPointsToAllPilots);async function _0x58783b(){const _0xec97c0=_0x4b08cc;try{showNotification(_0xec97c0(0x173),'info');const _0x39d294={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x369c02=0x0,_0x4efa08=0x0,_0x5ba6c7=0x0,_0x2e54bc=0x0,_0x316ab8=0x0,_0x24ba1e=0x0;const _0x221bce=new Set(),_0x2137a9=collection(db,'pointsHistory'),_0x3e169f=query(_0x2137a9,where('reason','>=','Bulk\x20award:'),where('reason','<=','Bulk\x20award:')),_0x463fed=await getDocs(_0x3e169f);_0x463fed['forEach'](_0x235e5d=>{const _0xa0c6c1=_0xec97c0,_0x548cb3=_0x235e5d['data'](),_0x348bd9=_0x548cb3[_0xa0c6c1(0x359)]||'',_0x14f6af=_0x348bd9['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x14f6af&&_0x14f6af[0x1]&&_0x221bce['add'](_0x14f6af[0x1]);}),console[_0xec97c0(0x149)]('Found\x20'+_0x221bce['size']+_0xec97c0(0x30a));const [_0x325f36,_0x5b3d03,_0x300f10]=await Promise[_0xec97c0(0x343)]([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0x341b47=_0x325f36[_0xec97c0(0x31a)]+_0x5b3d03['size']+_0x300f10['size'];showNotification('Found\x20'+_0x341b47+_0xec97c0(0x2c2),'info');const _0x381a4a=async(_0xe91844,_0x47a9f5)=>{const _0x561191=_0xec97c0;let _0x21309e=writeBatch(db);const _0x21a3be=[];let _0x2322d4=0x0;for(const _0x56e8e9 of _0xe91844['docs']){try{if(_0x221bce['has'](_0x56e8e9['id'])){if(_0x47a9f5==='D1')_0x24ba1e++;if(_0x47a9f5==='D2')_0x24ba1e++;if(_0x47a9f5==='D3')_0x24ba1e++;continue;}const _0x4fa1c7=_0x56e8e9[_0x561191(0x14f)](),_0x164e1e=_0x4fa1c7['subgameType']||_0x561191(0x162),_0x570f93=_0x39d294[_0x164e1e]||0xa;let _0x16aa29=_0x4fa1c7[_0x561191(0x2f0)];if(!_0x16aa29&&_0x4fa1c7['winnerUsername']){const [_0xbcf326,_0x4ebb24,_0x35e3ea]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x561191(0x1bb),'==',_0x4fa1c7['winnerUsername']))),getDocs(query(collection(db,_0x561191(0x2a3)),where(_0x561191(0x1bb),'==',_0x4fa1c7['winnerUsername']))),getDocs(query(collection(db,_0x561191(0x360)),where(_0x561191(0x1bb),'==',_0x4fa1c7['winnerUsername'])))]);if(!_0xbcf326['empty'])_0x16aa29=_0xbcf326['docs'][0x0]['id'];else{if(!_0x4ebb24['empty'])_0x16aa29=_0x4ebb24[_0x561191(0x353)][0x0]['id'];else{if(!_0x35e3ea[_0x561191(0x2e3)])_0x16aa29=_0x35e3ea['docs'][0x0]['id'];}}}let _0x5e891f=_0x4fa1c7[_0x561191(0x303)];if(!_0x5e891f&&_0x4fa1c7['loserUsername']){const [_0x59b30f,_0x75353b,_0x5ded32]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x4fa1c7[_0x561191(0x291)]))),getDocs(query(collection(db,_0x561191(0x2a3)),where('username','==',_0x4fa1c7['loserUsername']))),getDocs(query(collection(db,'playersD3'),where(_0x561191(0x1bb),'==',_0x4fa1c7['loserUsername'])))]);if(!_0x59b30f[_0x561191(0x2e3)])_0x5e891f=_0x59b30f['docs'][0x0]['id'];else{if(!_0x75353b['empty'])_0x5e891f=_0x75353b[_0x561191(0x353)][0x0]['id'];else{if(!_0x5ded32['empty'])_0x5e891f=_0x5ded32['docs'][0x0]['id'];}}}if(_0x16aa29&&_0x5e891f){const _0x2889fa=doc(db,_0x561191(0x18b),_0x16aa29),_0x12c2a6=doc(db,'userProfiles',_0x5e891f),[_0x2ec54f,_0x239f7b]=await Promise['all']([getDoc(_0x2889fa),getDoc(_0x12c2a6)]);if(_0x2ec54f['exists']()){const _0x4be4c2=_0x2ec54f['data'](),_0x42be4e=_0x4be4c2[_0x561191(0x160)]||0x0;_0x21309e['update'](_0x2889fa,{'points':_0x42be4e+_0x570f93,'lastPointsModified':serverTimestamp()}),_0x21a3be[_0x561191(0x241)]({'userId':_0x16aa29,'userEmail':_0x4be4c2['email']||'unknown','displayName':_0x4be4c2['displayName']||_0x4fa1c7['winnerUsername']||'Unknown\x20User','action':'add','amount':_0x570f93,'previousPoints':_0x42be4e,'newPoints':_0x42be4e+_0x570f93,'reason':_0x561191(0x2da)+_0x164e1e+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x56e8e9['id']+'\x20-\x20'+_0x47a9f5,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}if(_0x239f7b['exists']()){const _0x3d313f=_0x239f7b['data'](),_0x5ad21f=_0x3d313f['points']||0x0;_0x21309e['update'](_0x12c2a6,{'points':_0x5ad21f+_0x570f93,'lastPointsModified':serverTimestamp()}),_0x21a3be['push']({'userId':_0x5e891f,'userEmail':_0x3d313f['email']||'unknown','displayName':_0x3d313f[_0x561191(0x330)]||_0x4fa1c7['loserUsername']||'Unknown\x20User','action':_0x561191(0x1f3),'amount':_0x570f93,'previousPoints':_0x5ad21f,'newPoints':_0x5ad21f+_0x570f93,'reason':'Bulk\x20award:\x20'+_0x164e1e+_0x561191(0x320)+_0x56e8e9['id']+_0x561191(0x34b)+_0x47a9f5,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x2e54bc+=_0x570f93*0x2,_0x2322d4+=0x2,_0x221bce[_0x561191(0x1f3)](_0x56e8e9['id']);if(_0x2322d4>=0x190){await _0x21309e['commit']();for(const _0x4d5c19 of _0x21a3be){await addDoc(collection(db,'pointsHistory'),_0x4d5c19);}_0x21309e=writeBatch(db),_0x2322d4=0x0,_0x21a3be[_0x561191(0x1dc)]=0x0;}}}catch(_0x648e6d){console[_0x561191(0x2b6)](_0x561191(0x25d)+_0x47a9f5+_0x561191(0x379)+_0x56e8e9['id']+':',_0x648e6d),_0x316ab8++;}}if(_0x2322d4>0x0){await _0x21309e['commit']();for(const _0x834f92 of _0x21a3be){await addDoc(collection(db,'pointsHistory'),_0x834f92);}}return{'processed':_0x47a9f5==='D1'?_0x369c02:_0x47a9f5==='D2'?_0x4efa08:_0x5ba6c7};};await _0x381a4a(_0x325f36,'D1'),await _0x381a4a(_0x5b3d03,'D2'),await _0x381a4a(_0x300f10,'D3'),showNotification(_0xec97c0(0x2d9)+_0x369c02+'\x20D1\x20matches,\x20'+_0x4efa08+'\x20D2\x20matches,\x20'+_0x5ba6c7+_0xec97c0(0x1df)+('Awarded\x20'+_0x2e54bc+'\x20points.\x20Skipped\x20'+_0x24ba1e+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x316ab8),'success'),document['getElementById'](_0xec97c0(0x374))&&loadPointsOverview();}catch(_0x30eb84){console['error']('Error\x20in\x20bulk\x20award\x20points:',_0x30eb84),showNotification(_0xec97c0(0x27b)+_0x30eb84[_0xec97c0(0x26b)],'error');}}const _0x1ae9e3=document['getElementById']('quick-edit-points-modal');if(_0x1ae9e3){console[_0x4b08cc(0x149)](_0x4b08cc(0x1e6));const _0x4dc422=_0x1ae9e3[_0x4b08cc(0x29c)](_0x4b08cc(0x299));_0x4dc422?_0x4dc422[_0x4b08cc(0x2c6)](_0x4b08cc(0x284),function(){const _0x6b2879=_0x4b08cc;console[_0x6b2879(0x149)](_0x6b2879(0x143)),closeQuickEditModal();}):console[_0x4b08cc(0x31b)](_0x4b08cc(0x1fe));const _0x14d08b=document['getElementById']('cancel-quick-edit');_0x14d08b?_0x14d08b['addEventListener']('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x4b08cc(0x38b));const _0x5827b0=document['getElementById'](_0x4b08cc(0x326));_0x5827b0?_0x5827b0['addEventListener'](_0x4b08cc(0x25a),function(_0x12b7d5){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x12b7d5);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x1ae9e3['addEventListener'](_0x4b08cc(0x284),function(_0x33733d){const _0x5a4e63=_0x4b08cc;_0x33733d['target']===_0x1ae9e3&&(console[_0x5a4e63(0x149)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x485790=a2_0xc86709;try{const _0x7cde6a=parseInt(prompt(_0x485790(0x275),'10'));if(!_0x7cde6a||isNaN(_0x7cde6a)){showNotification('Invalid\x20points\x20amount','error');return;}if(!confirm('This\x20will\x20award\x20'+_0x7cde6a+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification('Starting\x20points\x20award\x20process...',_0x485790(0x36d));const [_0x38bdcf,_0x530454,_0x1e8439]=await Promise[_0x485790(0x343)]([getDocs(collection(db,_0x485790(0x28a))),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x485790(0x360)))]);console['log']('Found\x20'+_0x38bdcf['size']+_0x485790(0x38d)+_0x530454[_0x485790(0x31a)]+'\x20D2\x20pilots,\x20'+_0x1e8439[_0x485790(0x31a)]+'\x20D3\x20pilots');const _0x411b01=_0x38bdcf['size']+_0x530454['size']+_0x1e8439[_0x485790(0x31a)],_0x410433=new Map();_0x38bdcf['forEach'](_0x152904=>{const _0x9dd501=_0x485790,_0xb77814=_0x152904['data']();_0x410433['set'](_0x152904['id'],{'username':_0xb77814[_0x9dd501(0x1bb)],'ladder':'D1'});}),_0x530454['forEach'](_0x1cf13d=>{const _0x490067=_0x1cf13d['data']();_0x410433['set'](_0x1cf13d['id'],{'username':_0x490067['username'],'ladder':'D2'});}),_0x1e8439['forEach'](_0x4ab989=>{const _0x440285=_0x485790,_0xdafbd9=_0x4ab989['data']();_0x410433['set'](_0x4ab989['id'],{'username':_0xdafbd9[_0x440285(0x1bb)],'ladder':'D3'});}),console['log']('Found\x20'+_0x410433['size']+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x315f7e=0x0,_0x1bda12=0x0,_0x2abfb1=0x0;const _0x26250c=Array['from'](_0x410433[_0x485790(0x267)]()),_0x412bbb=0x190;for(let _0x5a5851=0x0;_0x5a5851<_0x26250c['length'];_0x5a5851+=_0x412bbb){const _0x463cf0=writeBatch(db),_0x3e31d5=[],_0x5b02d1=_0x26250c['slice'](_0x5a5851,_0x5a5851+_0x412bbb),_0x8ba857=await Promise[_0x485790(0x343)](_0x5b02d1['map'](_0x92e5ac=>getDoc(doc(db,'userProfiles',_0x92e5ac))));for(let _0x4f2c91=0x0;_0x4f2c91<_0x5b02d1['length'];_0x4f2c91++){try{const _0x1fc1f6=_0x5b02d1[_0x4f2c91],_0x291e51=_0x410433[_0x485790(0x183)](_0x1fc1f6),_0x218cdf=_0x8ba857[_0x4f2c91];if(_0x218cdf['exists']()){const _0x3a16ba=_0x218cdf[_0x485790(0x14f)](),_0x23a381=_0x3a16ba['points']||0x0,_0x17fc65=_0x23a381+_0x7cde6a;_0x463cf0['update'](doc(db,_0x485790(0x18b),_0x1fc1f6),{'points':_0x17fc65,'lastPointsModified':serverTimestamp()}),_0x3e31d5[_0x485790(0x241)]({'userId':_0x1fc1f6,'userEmail':_0x3a16ba[_0x485790(0x371)]||'unknown','displayName':_0x3a16ba[_0x485790(0x330)]||_0x291e51[_0x485790(0x1bb)]||_0x485790(0x1a7),'action':_0x485790(0x1f3),'amount':_0x7cde6a,'previousPoints':_0x23a381,'newPoints':_0x17fc65,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x291e51['ladder']+')','adminEmail':auth['currentUser'][_0x485790(0x371)],'timestamp':serverTimestamp()}),_0x1bda12+=_0x7cde6a,_0x315f7e++;}else _0x2abfb1++,console[_0x485790(0x31b)]('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x291e51[_0x485790(0x1bb)]+'\x20('+_0x1fc1f6+')');}catch(_0x1135cd){_0x2abfb1++,console[_0x485790(0x2b6)](_0x485790(0x221)+pilotInfo?.['username']+':',_0x1135cd);}}await _0x463cf0['commit']();for(const _0x158406 of _0x3e31d5){await addDoc(collection(db,_0x485790(0x142)),_0x158406);}showNotification('Processed\x20'+_0x315f7e+'/'+_0x411b01+'\x20pilots...','info');}showNotification(_0x485790(0x272)+_0x1bda12+'\x20points\x20to\x20'+_0x315f7e+'\x20pilots.\x20Errors:\x20'+_0x2abfb1,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x4cb597){console['error']('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x4cb597),showNotification('Error:\x20'+_0x4cb597['message'],'error');}}function setupManageRibbonsSection(){const _0x188e94=a2_0xc86709;console['log'](_0x188e94(0x18e));const _0x1e8763=document['getElementById']('ribbon-user-search');_0x1e8763&&_0x1e8763['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x2ce061=document['getElementById']('search-ribbon-user-btn');_0x2ce061&&_0x2ce061['addEventListener']('click',searchRibbonUser);const _0x5cd588=document[_0x188e94(0x226)]('add-ribbon-form');_0x5cd588&&_0x5cd588[_0x188e94(0x2c6)]('submit',addRibbon),_0x1e8763&&_0x1e8763[_0x188e94(0x2c6)](_0x188e94(0x2e0),function(_0x8ae60c){const _0x4ede79=_0x188e94;_0x8ae60c['key']==='Enter'&&(_0x8ae60c[_0x4ede79(0x389)](),searchRibbonUser());}),console[_0x188e94(0x149)]('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x4a4a0a,_0x5a9e15,_0x266364,_0x3dcbfa=''){const _0x5dd6f4=a2_0xc86709,_0xb31397=doc(db,'userProfiles',_0x4a4a0a),_0x361d43=await getDoc(_0xb31397);if(!_0x361d43['exists']())throw new Error('User\x20not\x20found');const _0x3aceab=_0x361d43['data'](),_0x351cb9=_0x3aceab['points']!==undefined?_0x3aceab['points']:0x0;_0x3aceab['points']===undefined&&(console[_0x5dd6f4(0x149)](_0x5dd6f4(0x1c8)+(_0x3aceab[_0x5dd6f4(0x330)]||_0x3aceab[_0x5dd6f4(0x371)]||'Unknown')),await updateDoc(_0xb31397,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x2fdad9=_0x351cb9;switch(_0x5a9e15){case'add':_0x2fdad9=_0x351cb9+_0x266364;break;case _0x5dd6f4(0x337):_0x2fdad9=Math['max'](0x0,_0x351cb9-_0x266364);break;case'set':_0x2fdad9=_0x266364;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0xb31397,{'points':_0x2fdad9,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x5dd6f4(0x142)),{'userId':_0x4a4a0a,'userEmail':_0x3aceab['email']||_0x5dd6f4(0x2b3),'displayName':_0x3aceab['displayName']||_0x3aceab[_0x5dd6f4(0x1bb)]||'Unknown\x20User','action':_0x5a9e15,'amount':_0x266364,'previousPoints':_0x351cb9,'newPoints':_0x2fdad9,'reason':_0x3dcbfa,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x1d9580=a2_0xc86709,_0x50d42f=document['getElementById']('points-overview-table-body');if(!_0x50d42f)return;_0x50d42f['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x4b35ac=collection(db,'userProfiles'),_0x12543a=await getDocs(_0x4b35ac);if(_0x12543a['empty']){_0x50d42f['innerHTML']=_0x1d9580(0x257);return;}const _0x408b5d=[];let _0x1c2b19=0x0;_0x12543a[_0x1d9580(0x1e8)](_0x2fd801=>{const _0x31b47e=_0x2fd801['data'](),_0x3b671d=_0x31b47e['points']!==undefined?_0x31b47e['points']:0x0;_0x31b47e['points']===undefined&&_0x1c2b19++,_0x408b5d['push']({'id':_0x2fd801['id'],..._0x31b47e,'points':_0x3b671d});}),_0x1c2b19>0x0&&(console['log']('Found\x20'+_0x1c2b19+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x1c2b19+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.',_0x1d9580(0x36d))),_0x408b5d['sort']((_0x181e13,_0x55fe40)=>(_0x55fe40['points']||0x0)-(_0x181e13['points']||0x0)),window[_0x1d9580(0x2c0)]=_0x408b5d,renderPointsOverview(_0x408b5d);}catch(_0x2ec8fa){console['error']('Error\x20loading\x20points\x20overview:',_0x2ec8fa),_0x50d42f[_0x1d9580(0x15d)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x2ec8fa['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x47448e=a2_0xc86709,_0x31ea59=document['getElementById'](_0x47448e(0x383));if(!_0x31ea59)return;_0x31ea59['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x57a896,_0x1100d7,_0xed0878]=await Promise[_0x47448e(0x343)]([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,_0x47448e(0x236)))]);_0x31ea59['innerHTML']='';const _0x170f3d=(_0x5c821f,_0x1abbc8)=>{_0x5c821f['forEach'](_0x373076=>{const _0xda02f2=a2_0x1f9e,_0x228959=_0x373076['data'](),_0x45f154=_0x228959[_0xda02f2(0x1d8)]||{},_0xdcf683=Object['keys'](_0x45f154)[_0xda02f2(0x1dc)],_0x3ac182=document['createElement']('tr');_0x3ac182['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x228959['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x1abbc8[_0xda02f2(0x35a)]()+'\x22>'+_0x1abbc8+_0xda02f2(0x2a8)+_0xdcf683+_0xda02f2(0x159)+(_0x228959['lastUpdated']?new Date(_0x228959['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():_0xda02f2(0x271))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x228959['username']+'\x22\x20data-ladder=\x22'+_0x1abbc8+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x31ea59['appendChild'](_0x3ac182);});};_0x170f3d(_0x57a896,'D1'),_0x170f3d(_0x1100d7,'D2'),_0x170f3d(_0xed0878,'D3'),document['querySelectorAll']('.edit-ribbons-btn')[_0x47448e(0x1e8)](_0xce9642=>{_0xce9642['addEventListener']('click',function(){const _0x504b67=this['dataset']['username'],_0x29b3a6=this['dataset']['ladder'];editUserRibbons(_0x504b67,_0x29b3a6);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x52888b){console[_0x47448e(0x2b6)]('Error\x20loading\x20ribbons:',_0x52888b),_0x31ea59[_0x47448e(0x15d)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification(_0x47448e(0x258),'error');}}function a2_0x22f4(){const _0x49116d=['<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','Error\x20promoting\x20player:','pointsHistory','Modal\x20close\x20button\x20clicked','pendingResimulateData','.ladder-switch\x20input[value=\x22D1\x22]','DOMContentLoaded','backgroundColor','name','log','players-ladder-selector','\x20section','remove','action','userTrophies','data','\x20total\x20players\x20in\x20the\x20','pending-count','return\x20(function()\x20','onerror','Please\x20enter\x20valid\x20data','-page-indicator','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','Trophy\x20not\x20found','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','edit-match-winner-suicides','className','Highlight','innerHTML','Page\x20','button[type=\x22submit\x22]','points','toISOString','Standard','.close-notification','Error\x20demoting\x20player:\x20','User\x20','Article\x20created\x20successfully','promote-form','roleAssignedBy','Could\x20not\x20find\x20player\x20documents','eloHistoryD2','winnerScore','\x20(from\x20','loserName','Loaded\x20','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','edit-losses','User\x20has\x20','Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','trophy-image-preview','style','#e0e0e0','Setting\x20permissions\x20based\x20on\x20role:\x20','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','Bronze','trophy-modal','required','creator-type','Error\x20resolving\x20username\x20for\x20','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','none','get','achievementPlayer','Achievement','\x20with\x20ELO\x20','promotedBy','articles-table-body','href','\x20ladder','userProfiles','manage-articles','edit-highlight-loserName-input','Setting\x20up\x20Manage\x20Ribbons\x20section','dashboard','Error\x20loading\x20inactive\x20players:','split','manage-players','setHours','No\x20email','rank-distribution-chart','previousElementSibling','ladder','disabled','role-color','#inactive-players-table-body\x20tr','Trophy\x20created\x20successfully','edit-highlight-achievementPlayer-input','\x20points','D3\x20Players','exception','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','highlights','target','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','bulk-award-points-btn','roleName','match','Unknown\x20User','has','Edit\x20match\x20clicked:','load-highlights-data','cancel-highlight-btn','input','history-type-filter','then','Error\x20loading\x20trophy\x20definitions:','.sidebar-nav\x20.nav-item[data-section=\x22','article-image-url','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','rejected-count','destroy','highlight-video-id','5px','NonParticipant','seconds','highlight-achievement-type-container','winnerName','username','edit-match-id','Match\x20Result','Error\x20opening\x20edit\x20modal:','\x20Level\x20','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20points\x20history:','playerRibbons','Setting\x20up\x20Manage\x20Highlights\x20section','assign-trophy-name','Never\x20played','TestLoser','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','Initializing\x20points\x20field\x20for\x20user\x20','\x22\x20already\x20has\x20this\x20trophy','edit-elo','data-id','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','trophyId','Gold','highlight-creator-image','User\x20not\x20found','replaceChild','map','Untitled','Modal\x20computed\x20styles:','Match\x20ID\x20is\x20required','20px','ribbons','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Role\x20select\x20set\x20to:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','length','Create\x20test\x20match\x20button\x20setup\x20complete','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20D3\x20matches.\x20','modify-points-form','rgba(211,\x2047,\x2047,\x200.7)','Error\x20loading\x20points\x20data:','notification\x20','edit-wins','Error\x20creating\x20rank\x20distribution\x20chart:','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','stopPropagation','forEach','closest','currentTarget','Player\x20not\x20found\x20in\x20','position','display','All\x20fields\x20are\x20required','empty-state','floor','Toggling\x20fields\x20for\x20highlight\x20type:\x20','\x20ladder!','add','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','matchInfo','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','highlight-map-version-container','mapCreator','activity','edit-highlight-achievementType-input','\x20ladder,\x20page\x20','Failed\x20to\x20delete\x20match:\x20','Player\x20not\x20found','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','type','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','Found\x20','Promoting\x20player\x20to\x20','Successfully\x20promoted\x20','trophy-image-url','Error\x20deleting\x20trophy\x20definition:','\x20Weekly\x20Activity','commit','rgba(25,\x20118,\x20210,\x200.7)','match-count','test-match-date','fa-check-circle','trophy-id','.delete-highlight-btn','\x20(+','Subtracted\x20','Failed\x20to\x20update\x20player:\x20','fromDate','Attaching\x20cancel\x20button\x20listener.','\x22\x20set','reset','getRankName','#000000','Opening\x20create\x20test\x20match\x20modal','\x20already\x20has\x20points:\x20','Article\x20updated\x20successfully','lastVisible','\x20quick\x20edit\x20buttons','role-name','modifiedBy','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','Error\x20loading\x20matches:','resimulate-match-btn','Error\x20processing\x20pilot\x20','Highlight\x20created\x20successfully!','catch','sort','Points\x20updated\x20successfully\x20for\x20user:','getElementById','Sidebar\x20navigation\x20initialized\x20with\x20permissions','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','approvedMatches','quick-add','#ffffff','mapName','newElo','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','Firebase\x20connection\x20test\x20failed:','page','ribbon','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','author','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','playerRibbonsD3','Error\x20setting\x20custom\x20ELO:','edit-match-loser-demo','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','highlight-map-creator-container','flex','endDate','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','getComputedStyle','store-item-select','rankDistribution','push','admin_modification','highlight-achievement-details-container','Map\x20Creator\x20is\x20required','medium-points','dataset','highly-inactive','matchId','removeEventListener','Error\x20assigning\x20trophy:','Error\x20saving\x20trophy:','create-creator-highlight-btn','This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?','parentNode','createdAt','user-search','D1\x20Players','Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM','Tuesday','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','substring','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','Error\x20loading\x20ribbons\x20data','roleAssignedAt','submit','amount','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','Error\x20processing\x20','set','assign-trophy-id','Error\x20promoting\x20player:\x20','trophy-name','\x20matches\x20for\x20','.error-state','elo-history-table-body','Error\x20adding\x20player:','highlight-video-container','keys','load-inactive-players-data','\x20Exists','input[name=\x22quick-action\x22]:checked','message','creatorImageUrl','highlight-loser-name','System','quick-points-amount','promotion','Unknown','Complete!\x20Awarded\x20','Setting\x20up\x20create\x20test\x20match\x20button','Failed\x20to\x20send\x20Discord\x20notification:','Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','Silver','save-player-btn','assign-trophy-modal','highlight-match-link-container','daysSinceMatch','Error\x20in\x20bulk\x20award\x20process:\x20','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','data-match-id','admin','article-title','ribbon-level','approvedAt','award-all-pilots-btn','Attempting\x20to\x20demote\x20','click','Setting\x20up\x20points\x20action\x20buttons...','elo','Error\x20deleting\x20player:','Error\x20loading\x20players:','Error\x20deleting\x20highlight:\x20','players','exists','approvedMatchesD3','No\x20ELO\x20history\x20found\x20for\x20player\x20','trophyDefinitions','Error\x20fetching\x20matches\x20for\x20','demote-username','loserUsername','\x20before\x20match:\x20','\x20in\x20','demote-modal','success','Edit\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','Failed\x20to\x20load\x20match\x20data','.close-btn','loserSuicides','currentUser','querySelector','.no-results','toDate','\x20inactive\x20players','active','ELO\x20rating\x20for\x20','achievement','playersD2','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','Load\x20articles\x20data\x20clicked','checked','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','edit-highlight-creatorImageUrl-input','desc','setAttribute','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','View\x20player\x20details\x20for\x20','mapVersion','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','\x20vs\x20','Please\x20enter\x20a\x20username','set-elo-value','unknown','manage-matches','losses','error','getDay','Added\x20','classList','edit-highlight-map-input','create-test-match-form','Error\x20in\x20demotion:','no-results','user-ribbon-management','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','allUsersPoints','\x27\x20has\x20permissions:','\x20total\x20matches\x20across\x20all\x20ladders','User\x20Profiles','Saturday','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','addEventListener','inactive-players','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','https://www.youtube.com/embed/','loserDemoLink','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','searchTerm','contains','#FFD700','edit-match-winner-demo','value','Trophy\x20Preview','Edit\x20Trophy','#article-modal\x20.close-btn','loserComment','updatedAt','nonParticipants','initial_placement','Found\x20radio\x20with\x20value:','Completed!\x20Processed\x20','Bulk\x20award:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','Error','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','timestamp','roleColor','keypress','ref','highlight-match-info','empty','\x20was\x20updated\x20from\x20','submittedBy','.assign-trophy-btn','elo-history-search','textContent','Searching\x20for\x20player\x20in\x20','eloRating','Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM','trim','create-test-match-modal','DB:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','winnerId','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','achievementDetails','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','eloHistory','change','Player\x20Name\x20is\x20required','replace','ribbon-type-select',';\x22>','Simple\x20test\x20match\x20created\x20by\x20admin\x20','player-count','highlight-type','\x20users\x20already\x20had\x20points.','YouTube\x20Video\x20ID\x20(Optional)','Error\x20resimulating\x20match:','inactive-players-search','startDate','Winner\x20and\x20loser\x20usernames\x20are\x20required','loserId','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','#1976d2','quick-points-reason','moderately-inactive','set-role-modal','quick-edit-points-modal','\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded','Test\x20match','Create\x20test\x20match\x20modal\x20not\x20found','highlight-winner-score','achievementType','loserScore','resimulate-match-id','highlight-id','querySelectorAll','Error\x20awarding\x20item:','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','manage-levels-ribbons','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','manage-highlights','wins','\x20(based\x20on\x20data-role:\x20','size','warn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','matches-start-date','Please\x20enter\x20valid\x20username\x20and\x20ELO','Match\x20not\x20found','\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20','onAuthStateChanged','.close','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','assign-trophy-rarity','trophies-table-body','quick-edit-points-form','Player\x20\x22','doughnut','edit-match-loser-score','Inactive\x20players\x20section\x20initialized','\x20to\x20','createElement','Error\x20loading\x20highlights:','Page\x201','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','displayName','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','highlight-match-date','delete-match-confirm-modal','playerId','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','Please\x20select\x20a\x20user\x20and\x20store\x20item','subtract','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','approvedMatchesD2','trophy-form','rarity','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Unauthorized:\x20Admin\x20access\x20required','Loading\x20user\x20data...','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','achievementImageUrl','\x20(winner)\x20vs\x20','appendChild','all','edit-match-modal','edit-highlight-loserScore-input','visible','quick-edit-email','focus','toLocaleString','trophy-rarity','\x20-\x20','highlight-player-profile','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22','N/A','Remove\x20','article-author','\x27</td>','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','docs','includes','name-desc','mapPlayed','trophy-preview-img','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','reason','toLowerCase','user-roles-section','block','Emerald','edit-highlight-videoId-input','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','playersD3','videoId','manage-points','firstVisible','Error\x20deleting\x20match:','migrate-points-btn','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','\x20users.\x20','Modal\x20should\x20now\x20be\x20visible','title','highlight-achievement-player','Queued\x20','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','info','loading','location','warning','email','opacity','\x20with\x20email\x20','points-overview-table-body','points-overview-search','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','edit-highlight-type-select','toLocaleDateString','\x20match\x20','Updating\x20role\x20for\x20','matches-search','winnerUsername','highlight-achievement-details','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>','matchDate','src','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','ribbons-overview-table-body','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','cells','d2-prev-page','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','lastMatch','preventDefault','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','Cancel\x20button\x20not\x20found','add-player-form','\x20D1\x20pilots,\x20','creator','opponent','playerProfileUrl','1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','demoLink','\x20points\x20history\x20entries','set-elo-form','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'];a2_0x22f4=function(){return _0x49116d;};return a2_0x22f4();}async function searchRibbonUser(){const _0x3779ea=a2_0xc86709,_0x158731=document['getElementById']('ribbon-user-search')[_0x3779ea(0x2d0)]['trim']();if(!_0x158731){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x16a823,_0x31c0f6,_0x3950e4]=await Promise['all']([getDoc(doc(db,_0x3779ea(0x1c2),_0x158731)),getDoc(doc(db,'playerRibbonsD2',_0x158731)),getDoc(doc(db,'playerRibbonsD3',_0x158731))]);let _0x474e5a=null,_0xc17a9b=null;if(_0x16a823[_0x3779ea(0x28b)]())_0x474e5a='D1',_0xc17a9b=_0x16a823['data']();else{if(_0x31c0f6['exists']())_0x474e5a='D2',_0xc17a9b=_0x31c0f6['data']();else _0x3950e4['exists']()&&(_0x474e5a='D3',_0xc17a9b=_0x3950e4[_0x3779ea(0x14f)]());}_0x474e5a?(document['getElementById']('current-ribbon-user')['textContent']=_0x158731,document['getElementById']('ribbon-target-user')[_0x3779ea(0x2d0)]=_0x158731,document['getElementById']('ribbon-target-ladder')['value']=_0x474e5a,document['getElementById'](_0x3779ea(0x2be))[_0x3779ea(0x178)]['display']='block',displayCurrentRibbons(_0xc17a9b[_0x3779ea(0x1d8)]||{}),showNotification('Found\x20'+_0x158731+_0x3779ea(0x293)+_0x474e5a+_0x3779ea(0x18a),_0x3779ea(0x295))):showNotification('User\x20'+_0x158731+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x4c89d3){console['error']('Error\x20searching\x20user:',_0x4c89d3),showNotification('Error\x20searching\x20for\x20user',_0x3779ea(0x2b6));}}function displayCurrentRibbons(_0x1f2773){const _0x3c8793=a2_0xc86709,_0x4079c7=document[_0x3c8793(0x226)]('current-ribbons-list');if(!_0x4079c7)return;_0x4079c7['innerHTML']='';if(Object['keys'](_0x1f2773)['length']===0x0){_0x4079c7[_0x3c8793(0x15d)]='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0x1f2773)[_0x3c8793(0x1e8)](([_0x3969bf,_0xeffbc3])=>{const _0x26e950=_0x3c8793,_0x30f97f=document['createElement']('div');_0x30f97f[_0x26e950(0x15b)]='ribbon-item',_0x30f97f[_0x26e950(0x15d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x3969bf+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0xeffbc3['level']||0x1)+_0x26e950(0x256)+(_0xeffbc3['awardedAt']?new Date(_0xeffbc3['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x26e950(0x271))+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x3969bf+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4079c7['appendChild'](_0x30f97f);}),document[_0x3c8793(0x312)]('.remove-ribbon-btn')[_0x3c8793(0x1e8)](_0x24b61a=>{const _0x4e0ee5=_0x3c8793;_0x24b61a[_0x4e0ee5(0x2c6)]('click',function(){const _0xa9239f=_0x4e0ee5,_0x1827dc=this['dataset'][_0xa9239f(0x232)];removeRibbon(_0x1827dc);});});}async function addRibbon(_0x20ac66){const _0x42f22a=a2_0xc86709;_0x20ac66['preventDefault']();const _0x2044e8=document['getElementById']('ribbon-target-user')['value'],_0x521d59=document['getElementById']('ribbon-target-ladder')['value'],_0x3a6827=document['getElementById']('ribbon-type-select')['value'],_0x103540=parseInt(document['getElementById'](_0x42f22a(0x280))[_0x42f22a(0x2d0)]);if(!_0x2044e8||!_0x521d59||!_0x3a6827||!_0x103540){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x1a53e0='playerRibbons'+(_0x521d59==='D1'?'':_0x521d59),_0x5398b3=doc(db,_0x1a53e0,_0x2044e8),_0x593d00=await getDoc(_0x5398b3),_0x395143=_0x593d00['exists']()?_0x593d00['data']()['ribbons']||{}:{};_0x395143[_0x3a6827]={'level':_0x103540,'awardedAt':serverTimestamp()},await setDoc(_0x5398b3,{'username':_0x2044e8,'ladder':_0x521d59,'ribbons':_0x395143,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x42f22a(0x2b8)+_0x3a6827+_0x42f22a(0x1bf)+_0x103540+_0x42f22a(0x32b)+_0x2044e8,'success'),displayCurrentRibbons(_0x395143),document['getElementById'](_0x42f22a(0x2f8))[_0x42f22a(0x2d0)]='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x40ed34){console[_0x42f22a(0x2b6)]('Error\x20adding\x20ribbon:',_0x40ed34),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x47d950){const _0x563984=a2_0xc86709,_0x3a5f9e=document[_0x563984(0x226)]('ribbon-target-user')['value'],_0x322b81=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm(_0x563984(0x34f)+_0x47d950+'\x20from\x20'+_0x3a5f9e+'?'))return;try{const _0x3e2acf=_0x563984(0x1c2)+(_0x322b81==='D1'?'':_0x322b81),_0x14df27=doc(db,_0x3e2acf,_0x3a5f9e),_0x1df6d6=await getDoc(_0x14df27),_0x29597f=_0x1df6d6['exists']()?_0x1df6d6[_0x563984(0x14f)]()['ribbons']||{}:{};delete _0x29597f[_0x47d950],await setDoc(_0x14df27,{'username':_0x3a5f9e,'ladder':_0x322b81,'ribbons':_0x29597f,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x47d950+'\x20from\x20'+_0x3a5f9e,'success'),displayCurrentRibbons(_0x29597f);}catch(_0x49ee62){console['error']('Error\x20removing\x20ribbon:',_0x49ee62),showNotification('Error\x20removing\x20ribbon',_0x563984(0x2b6));}}function editUserRibbons(_0x597c7f,_0x2bde12){const _0x4bda43=a2_0xc86709;document[_0x4bda43(0x226)]('ribbon-user-search')['value']=_0x597c7f,searchRibbonUser();}