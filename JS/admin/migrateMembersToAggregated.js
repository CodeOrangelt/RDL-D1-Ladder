(function(_0x514e28,_0xb4af8a){const _0x31f28d=a1_0x3127,_0x4adf49=_0x514e28();while(!![]){try{const _0x4364dd=parseInt(_0x31f28d(0x160))/0x1+parseInt(_0x31f28d(0x16e))/0x2+parseInt(_0x31f28d(0x18c))/0x3+-parseInt(_0x31f28d(0x15f))/0x4*(-parseInt(_0x31f28d(0x195))/0x5)+-parseInt(_0x31f28d(0x170))/0x6*(parseInt(_0x31f28d(0x182))/0x7)+parseInt(_0x31f28d(0x191))/0x8+parseInt(_0x31f28d(0x15e))/0x9*(-parseInt(_0x31f28d(0x196))/0xa);if(_0x4364dd===_0xb4af8a)break;else _0x4adf49['push'](_0x4adf49['shift']());}catch(_0x32d33e){_0x4adf49['push'](_0x4adf49['shift']());}}}(a1_0x6fd0,0x5a958));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a1_0x3127(_0xf03a8,_0xec9de3){const _0x44c5c9=a1_0x6fd0();return a1_0x3127=function(_0x5602b5,_0x3354d9){_0x5602b5=_0x5602b5-0x15c;let _0x627849=_0x44c5c9[_0x5602b5];return _0x627849;},a1_0x3127(_0xf03a8,_0xec9de3);}import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);async function migrateToAggregatedMembers(){const _0xc471c9=a1_0x3127,_0x448c5c=(function(){let _0x23c7cd=!![];return function(_0x2eecb0,_0x5c77c9){const _0x220cce=_0x23c7cd?function(){const _0x59af86=a1_0x3127;if(_0x5c77c9){const _0x9a9000=_0x5c77c9[_0x59af86(0x162)](_0x2eecb0,arguments);return _0x5c77c9=null,_0x9a9000;}}:function(){};return _0x23c7cd=![],_0x220cce;};}()),_0x2f91fe=_0x448c5c(this,function(){const _0x112f1b=a1_0x3127;return _0x2f91fe[_0x112f1b(0x16b)]()[_0x112f1b(0x184)]('(((.+)+)+)+$')['toString']()[_0x112f1b(0x17a)](_0x2f91fe)[_0x112f1b(0x184)](_0x112f1b(0x18d));});_0x2f91fe();const _0x2a05cf=(function(){let _0xd9ee3c=!![];return function(_0x208fa9,_0x295da2){const _0x5b9eb2=_0xd9ee3c?function(){if(_0x295da2){const _0x56d36c=_0x295da2['apply'](_0x208fa9,arguments);return _0x295da2=null,_0x56d36c;}}:function(){};return _0xd9ee3c=![],_0x5b9eb2;};}()),_0x1ec722=_0x2a05cf(this,function(){const _0x2aff2e=a1_0x3127;let _0x8b88ea;try{const _0x559f28=Function('return\x20(function()\x20'+_0x2aff2e(0x198)+');');_0x8b88ea=_0x559f28();}catch(_0x804a68){_0x8b88ea=window;}const _0x88d98a=_0x8b88ea[_0x2aff2e(0x16f)]=_0x8b88ea[_0x2aff2e(0x16f)]||{},_0x3015ce=[_0x2aff2e(0x174),'warn','info',_0x2aff2e(0x18e),_0x2aff2e(0x186),'table','trace'];for(let _0x839796=0x0;_0x839796<_0x3015ce['length'];_0x839796++){const _0x497793=_0x2a05cf[_0x2aff2e(0x17a)][_0x2aff2e(0x15d)][_0x2aff2e(0x180)](_0x2a05cf),_0x1515c8=_0x3015ce[_0x839796],_0x5c89e2=_0x88d98a[_0x1515c8]||_0x497793;_0x497793['__proto__']=_0x2a05cf['bind'](_0x2a05cf),_0x497793[_0x2aff2e(0x16b)]=_0x5c89e2[_0x2aff2e(0x16b)]['bind'](_0x5c89e2),_0x88d98a[_0x1515c8]=_0x497793;}});_0x1ec722(),console[_0xc471c9(0x174)](_0xc471c9(0x167));try{console[_0xc471c9(0x174)](_0xc471c9(0x181));const [_0x2150e9,_0x17188c,_0x360cf4,_0x614746,_0x3f942a]=await Promise['all']([getDocs(collection(db,_0xc471c9(0x161))),getDocs(collection(db,_0xc471c9(0x19b))),getDocs(collection(db,_0xc471c9(0x164))),getDocs(collection(db,'playersD3')),getDocs(collection(db,_0xc471c9(0x17b)))]);console[_0xc471c9(0x174)]('✅\x20Data\x20fetched:\x20'+_0x2150e9[_0xc471c9(0x17d)]+_0xc471c9(0x16c)+_0x17188c[_0xc471c9(0x17d)]+'\x20D1,\x20'+_0x360cf4[_0xc471c9(0x17d)]+_0xc471c9(0x18f)+_0x614746[_0xc471c9(0x17d)]+_0xc471c9(0x192)+_0x3f942a['size']+_0xc471c9(0x185));const _0x594bae=new Map();_0x2150e9[_0xc471c9(0x1a1)](_0x2480c7=>{const _0x2c9b9f=_0xc471c9;_0x594bae['set'](_0x2480c7['id'],_0x2480c7[_0x2c9b9f(0x19a)]());});const _0x5ed6d7=new Map(),_0x4f9f22=(_0x1c2d27,_0x2a802d)=>{const _0x138b4c=_0xc471c9;_0x1c2d27[_0x138b4c(0x1a1)](_0x649117=>{const _0x18229a=_0x138b4c,_0x3c7aab=_0x649117[_0x18229a(0x19a)](),_0x339ea4=_0x649117['id'];!_0x5ed6d7['has'](_0x339ea4)&&_0x5ed6d7[_0x18229a(0x175)](_0x339ea4,{'userId':_0x339ea4,'username':_0x3c7aab['username']||_0x3c7aab[_0x18229a(0x165)]||_0x18229a(0x16a),'ladders':[],'isNonParticipant':![]});const _0x4b62ab=_0x5ed6d7[_0x18229a(0x18a)](_0x339ea4);_0x4b62ab[_0x18229a(0x168)][_0x18229a(0x18b)]({'ladder':_0x2a802d,'elo':_0x3c7aab[_0x18229a(0x19d)]||_0x3c7aab[_0x18229a(0x19e)]||0x4b0,'active':_0x3c7aab[_0x18229a(0x187)]!==![]});});};_0x4f9f22(_0x17188c,'D1'),_0x4f9f22(_0x360cf4,'D2'),_0x4f9f22(_0x614746,'D3'),_0x3f942a[_0xc471c9(0x1a1)](_0x4ea048=>{const _0x544727=_0xc471c9,_0x10caf9=_0x4ea048[_0x544727(0x19a)](),_0x57a4c0=_0x4ea048['id'];!_0x5ed6d7[_0x544727(0x16d)](_0x57a4c0)&&(_0x10caf9['username']||_0x10caf9[_0x544727(0x165)])&&_0x5ed6d7[_0x544727(0x175)](_0x57a4c0,{'userId':_0x57a4c0,'username':_0x10caf9[_0x544727(0x17f)]||_0x10caf9[_0x544727(0x165)],'ladders':[],'isNonParticipant':!![]});}),console['log'](_0xc471c9(0x17c)+_0x5ed6d7[_0xc471c9(0x17d)]+_0xc471c9(0x176)),console[_0xc471c9(0x174)](_0xc471c9(0x17e));const _0x3f66ed=[];let _0x1cf0ea=writeBatch(db),_0x5108d6=0x0,_0x3c2ff2=0x0;_0x5ed6d7[_0xc471c9(0x1a1)]((_0x4c8158,_0x902cd2)=>{const _0x1c2ce3=_0xc471c9,_0xc19afe=_0x594bae[_0x1c2ce3(0x18a)](_0x902cd2)||{};let _0x41bcf3=0x0,_0x1e8a24=null;if(_0x4c8158[_0x1c2ce3(0x168)][_0x1c2ce3(0x194)]>0x0){const _0x4a3f58=_0x4c8158[_0x1c2ce3(0x168)][_0x1c2ce3(0x189)]((_0x524c88,_0x53913b)=>_0x53913b[_0x1c2ce3(0x19e)]-_0x524c88[_0x1c2ce3(0x19e)]);_0x41bcf3=_0x4a3f58[0x0][_0x1c2ce3(0x19e)],_0x1e8a24=_0x4a3f58[0x0][_0x1c2ce3(0x166)];}const _0x2e3b58={'userId':_0x902cd2,'username':_0x4c8158[_0x1c2ce3(0x17f)],'profileImageUrl':_0xc19afe[_0x1c2ce3(0x179)]||null,'country':_0xc19afe[_0x1c2ce3(0x169)]||null,'motto':_0xc19afe['motto']||null,'favoriteMap':_0xc19afe['favoriteMap']||null,'favoriteWeapon':_0xc19afe['favoriteWeapon']||null,'isNonParticipant':_0x4c8158[_0x1c2ce3(0x183)],'ladders':_0x4c8158[_0x1c2ce3(0x168)],'primaryLadder':_0x1e8a24,'highestElo':_0x41bcf3,'rank':getPlayerRank(_0x41bcf3),'lastUpdated':new Date(),'migrationTimestamp':new Date()['toISOString']()},_0x21bb32=doc(collection(db,_0x1c2ce3(0x171)),_0x902cd2);_0x1cf0ea[_0x1c2ce3(0x175)](_0x21bb32,_0x2e3b58),_0x5108d6++,_0x3c2ff2++,_0x5108d6>=0x1c2&&(_0x3f66ed['push'](_0x1cf0ea[_0x1c2ce3(0x1a0)]()),_0x1cf0ea=writeBatch(db),_0x5108d6=0x0,console[_0x1c2ce3(0x174)]('📦\x20Prepared\x20batch\x20'+_0x3f66ed['length']+'\x20('+_0x3c2ff2+_0x1c2ce3(0x177)));}),_0x5108d6>0x0&&_0x3f66ed['push'](_0x1cf0ea['commit']()),console[_0xc471c9(0x174)](_0xc471c9(0x190)+_0x3f66ed[_0xc471c9(0x194)]+_0xc471c9(0x188)),await Promise[_0xc471c9(0x199)](_0x3f66ed),console[_0xc471c9(0x174)](_0xc471c9(0x173)+_0x5ed6d7[_0xc471c9(0x17d)]+_0xc471c9(0x172)),console[_0xc471c9(0x174)](_0xc471c9(0x197));}catch(_0x2d053c){console[_0xc471c9(0x18e)](_0xc471c9(0x19c),_0x2d053c),_0x2d053c['code']===_0xc471c9(0x15c)&&console[_0xc471c9(0x18e)](_0xc471c9(0x19f));}}function a1_0x6fd0(){const _0xac3787=['search','\x20non-participants','exception','active','\x20batches...','sort','get','push','1850250TwSFpm','(((.+)+)+)+$','error','\x20D2,\x20','🚀\x20Executing\x20','5186760ZCrjGL','\x20D3,\x20','gold','length','5aezHfV','30NBmDxH','💡\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!','{}.constructor(\x22return\x20this\x22)(\x20)','all','data','players','❌\x20Migration\x20failed:','eloRating','elo','🔒\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.','commit','forEach','permission-denied','prototype','6619014BnjAso','2051804YAxfoj','669886fhAofN','userProfiles','apply','silver','playersD2','name','ladder','🔄\x20Starting\x20migration\x20to\x20aggregated\x20members...','ladders','country','Unknown','toString','\x20profiles,\x20','has','1220676TTypxf','console','180GPQwgC','aggregatedMembers','\x20members\x20to\x20aggregated\x20collection!','🎉\x20Successfully\x20migrated\x20','log','set','\x20unique\x20members','\x20members\x20processed)','unranked','profileImageUrl','constructor','nonParticipants','⚙️\x20Processed\x20','size','💾\x20Writing\x20aggregated\x20data...','username','bind','📥\x20Fetching\x20all\x20collections...','112210vBSiAd','isNonParticipant'];a1_0x6fd0=function(){return _0xac3787;};return a1_0x6fd0();}function getPlayerRank(_0x496d38){const _0x415718=a1_0x3127;if(_0x496d38>=0x7d0)return'emerald';if(_0x496d38>=0x708)return _0x415718(0x193);if(_0x496d38>=0x640)return _0x415718(0x163);if(_0x496d38>=0x578)return'bronze';return _0x415718(0x178);}migrateToAggregatedMembers();