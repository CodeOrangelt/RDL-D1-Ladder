const a9n=a9b;(function(a,b){const h=a9b,c=a();while(!![]){try{const d=-parseInt(h(0xda))/0x1*(-parseInt(h(0xfe))/0x2)+-parseInt(h(0x106))/0x3*(parseInt(h(0xf5))/0x4)+-parseInt(h(0xc6))/0x5+parseInt(h(0xca))/0x6*(parseInt(h(0xdd))/0x7)+-parseInt(h(0xf9))/0x8*(parseInt(h(0xfb))/0x9)+parseInt(h(0xe6))/0xa*(parseInt(h(0xf7))/0xb)+-parseInt(h(0xc8))/0xc*(parseInt(h(0xfd))/0xd);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a9a,0x187e5));function a9b(a,b){const c=a9a();return a9b=function(d,e){d=d-0xbe;let f=c[d];if(a9b['HciBUG']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a9b['CZilDr']=g,a=arguments,a9b['HciBUG']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a9b['CZilDr'](f),a[i]=f):f=j,f;},a9b(a,b);}import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const i=a9b;this[i(0xe5)]='D1',this['players']=new Map(),this['init']();}['init'](){this['setupEventListeners'](),this['loadPlayers']();}['setupEventListeners'](){const l=a9b;document['querySelectorAll']('.ladder-btn')['forEach'](a=>{const j=a9b;a[j(0x10e)]('click',b=>{const k=j;document[k(0xd2)](k(0xcd))['forEach'](c=>c['classList']['remove']('active')),b[k(0xe7)]['classList'][k(0x10c)](k(0x109)),this[k(0xe5)]=b['target']['dataset'][k(0xee)],this[k(0xe8)]();});}),document[l(0xef)]('refresh-players')['addEventListener'](l(0xcb),()=>{const m=l;this[m(0xe8)]();}),document[l(0xef)]('winner-select')['addEventListener']('change',()=>this[l(0xe2)]()),document['getElementById']('loser-select')['addEventListener'](l(0xf4),()=>this['calculateMatch']());}async[a9n(0xe8)](){const o=a9n;try{this[o(0x113)](o(0x10a));const a=this[o(0xe5)]==='D1'?o(0x100):this['currentLadder']==='D2'?o(0xcf):'playersD3',b=collection(db,a),c=query(b,orderBy('eloRating','desc')),d=await getDocs(c);this[o(0x100)][o(0x10f)](),d[o(0xeb)](e=>{const p=o,f=e[p(0xc7)]();f[p(0xea)]&&this[p(0x100)]['set'](f['username'],{'id':e['id'],'username':f[p(0xea)],'elo':parseInt(f['eloRating'])||0x4b0,'position':f['position']||0x3e7});}),this[o(0x113)](),console['log']('Loaded\x20'+this[o(0x100)][o(0x101)]+'\x20players\x20from\x20'+this[o(0xe5)]+'\x20ladder');}catch(e){console[o(0xfa)]('Error\x20loading\x20players:',e),this['updateDropdowns'](o(0xd5));}}[a9n(0x113)](a=null){const q=a9n,b=document['getElementById']('winner-select'),c=document['getElementById']('loser-select');if(a){b[q(0xbe)]=a,c[q(0xbe)]=a;return;}let d=q(0xf1);const e=Array['from'](this[q(0x100)]['values']())['sort']((f,g)=>g[q(0x110)]-f[q(0x110)]);e['forEach'](f=>{const r=q,g=this['getELORankClass'](f['elo']);d+=r(0xe1)+f['username']+r(0xd8)+f['elo']+'\x22\x20class=\x22'+g+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+f[r(0xea)]+'\x20('+f['elo']+'\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>';}),b[q(0xbe)]=d,c['innerHTML']=d;}[a9n(0xe2)](){const s=a9n,a=document['getElementById'](s(0xc4)),b=document[s(0xef)]('loser-select'),c=a['value'],d=b[s(0x105)];if(!c||!d){document[s(0xef)]('match-result')['style']['display']='none',document[s(0xef)](s(0xf3))[s(0xce)]['display']=s(0xcc);return;}if(c===d){alert(s(0xdf));return;}const e=this['players'][s(0xd4)](c),f=this['players']['get'](d);if(!e||!f){console['error']('Player\x20not\x20found');return;}const g=this['calculateELO'](e['elo'],f['elo']);this['displayMatchResult'](e,f,g),this['displayCalculationDetails'](e,f,g);}[a9n(0xd1)](a,b,c=0x20){const t=a9n,d=0x1/(0x1+Math[t(0xc3)](0xa,(b-a)/0x190)),e=0x1/(0x1+Math['pow'](0xa,(a-b)/0x190)),f=a+c*(0x1-d),g=b+c*(0x0-e);return{'winnerChange':Math['round'](f-a),'loserChange':Math[t(0xd9)](g-b),'newWinnerRating':Math['round'](f),'newLoserRating':Math[t(0xd9)](g),'expectedScoreWinner':d,'expectedScoreLoser':e};}[a9n(0xfc)](a,b,c){const u=a9n;document['getElementById']('winner-name')['textContent']=a[u(0xea)],document[u(0xef)]('winner-current-elo')['textContent']='Current\x20ELO:\x20'+a['elo'],document[u(0xef)]('winner-elo-change')[u(0x103)]='+'+c['winnerChange'],document[u(0xef)](u(0xf2))[u(0x103)]='New\x20ELO:\x20'+c[u(0x112)],document[u(0xef)](u(0xd6))['textContent']=b['username'],document[u(0xef)]('loser-current-elo')[u(0x103)]=u(0xde)+b[u(0x110)],document['getElementById'](u(0x10b))['textContent']=''+c[u(0xe3)],document['getElementById']('loser-new-elo')[u(0x103)]='New\x20ELO:\x20'+c[u(0xe9)];const d=this['getELOColor'](a['elo']),e=this['getELOColor'](b['elo']);document[u(0xef)](u(0xc9))['style']['color']=d,document[u(0xef)]('loser-name')['style'][u(0xdc)]=e,document['getElementById'](u(0xec))['style']['display']=u(0xd7);}['displayCalculationDetails'](a,b,c){const v=a9n,d=v(0xdb)+a[v(0xea)]+':\x20'+a['elo']+v(0xe4)+b['username']+':\x20'+b['elo']+'\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20'+a[v(0xea)]+':\x20'+c['expectedScoreWinner'][v(0xf0)](0x3)+'\x20('+(c[v(0x108)]*0x64)[v(0xf0)](0x1)+v(0x102)+b[v(0xea)]+':\x20'+c[v(0xff)]['toFixed'](0x3)+'\x20('+(c[v(0xff)]*0x64)[v(0xf0)](0x1)+'%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'+a[v(0xea)]+':\x20'+a[v(0x110)]+v(0xbf)+c[v(0xc5)]+'\x20=\x20'+c[v(0x112)]+v(0xe4)+b[v(0xea)]+':\x20'+b['elo']+'\x20+\x20'+c['loserChange']+v(0xed)+c['newLoserRating']+'\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a'+(c[v(0xc5)]>0x14?v(0xe0):'')+'\x0a'+(c[v(0xc5)]<0x5?'Low\x20ELO\x20gain.':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('calculation-text')[v(0x103)]=d,document['getElementById']('calculation-details')[v(0xce)][v(0xd0)]=v(0x10d);}['getELOColor'](a){const w=a9n;if(a>=0x7d0)return w(0x104);else{if(a>=0x708)return w(0xc2);else{if(a>=0x640)return'#C0C0C0';else{if(a>=0x578)return w(0xf8);else return'#808080';}}}}[a9n(0xd3)](a){const x=a9n;if(a>=0x7d0)return'emerald';else{if(a>=0x708)return x(0xc0);else{if(a>=0x640)return x(0x111);else{if(a>=0x578)return x(0xf6);else return'unranked';}}}}}function a9a(){const z=['mtG2DevOtLHU','y2XPy2S','BM9Uzq','lMXHzgrLCI1IDg4','C3r5Bgu','CgXHEwvYC0qY','zgLZCgXHEq','y2fSy3vSyxrLruXp','CxvLCNLtzwXLy3rVCKfSBa','z2v0ruXpuMfUA0nSyxnZ','z2v0','pg9WDgLVBIb2ywX1zt0IiJ5fCNjVCIbSB2fKAw5NihbSyxLLCNm8l29WDgLVBJ4','Bg9ZzxiTBMfTzq','z3jPza','iIbKyxrHlwvSBZ0I','CM91BMq','n21NvNHJrG','cGPjBML0AwfSifjHDgLUz3m6cIaG','y29SB3i','mJC4nJDLrvHVAeK','q3vYCMvUDcbfte86ia','ugXLyxnLihnLBgvJDcbKAwzMzxjLBNqGCgXHEwvYCYbMB3iGD2LUBMvYigfUzcbSB3nLCG','ieHPz2GGruXpigDHAw4','pg9WDgLVBIb2ywX1zt0I','y2fSy3vSyxrLtwf0y2G','Bg9ZzxjdAgfUz2u','cIaG','y3vYCMvUDeXHzgrLCG','mZu5mervt3bKrG','DgfYz2v0','Bg9HzfbSyxLLCNm','BMv3tg9ZzxjsyxrPBMC','DxnLCM5HBwu','zM9YrwfJAa','Bwf0y2GTCMvZDwX0','id0G','BgfKzgvY','z2v0rwXLBwvUDej5swq','Dg9gAxHLza','pg9WDgLVBIb2ywX1zt0IiJ5tzwXLy3qGysbWBgf5zxiUlI48l29WDgLVBJ4','D2LUBMvYlw5LDY1LBg8','y2fSy3vSyxrPB24Tzgv0ywLSCW','y2HHBMDL','mZjUuvzuthy','yNjVBNPL','mZeYneTnu1rrEa','i0nen0yZmG','ody5nKHjr0zQvq','zxjYB3i','ntG1A3LUDufb','zgLZCgXHEu1HDgnOuMvZDwX0','mJzZqxjhqNC','ndy2mdzIzw1Iv24','zxHWzwn0zwrty29YzuXVC2vY','CgXHEwvYCW','C2L6zq','jsbJAgfUy2uGDg8GD2LUkqOGia','Dgv4DenVBNrLBNq','iZuWqZG3oa','DMfSDwu','mty3mJv1C3ffywS','C2fUzgjVEa','zxHWzwn0zwrty29YzvDPBM5LCG','ywn0AxzL','pg9WDgLVBIb2ywX1zt0IiJ5mB2fKAw5NihbSyxLLCNmUlI48l29WDgLVBJ4','Bg9ZzxiTzwXVlwnOyw5Nzq','ywrK','yMXVy2S','ywrKrxzLBNrmAxn0zw5LCG','y2XLyxi','zwXV','C2LSDMvY','BMv3v2LUBMvYuMf0Aw5N','DxbKyxrLrhjVCgrVD25Z','Aw5Uzxjive1m','icSG','z29Sza','re9nq29UDgvUDeXVywrLza','i0zgrdCWma','Cg93','D2LUBMvYlxnLBgvJDa','D2LUBMvYq2HHBMDL','nZa5mZKWrxLwyuzd','zgf0yq','mtG2mtGWA01VAefp','D2LUBMvYlw5HBwu'];a9a=function(){return z;};return a9a();}document[a9n(0x10e)](a9n(0xc1),()=>{const y=a9n;document['getElementById'](y(0x107))&&new ELOCalculator();});