const a11_0x2e52b5=a11_0x58a6,a11_0x3299df=(function(){let _0x443b8c=!![];return function(_0x4de964,_0xd745ea){const _0x23bf33=_0x443b8c?function(){const _0x17500f=a11_0x58a6;if(_0xd745ea){const _0x3ddc94=_0xd745ea[_0x17500f(0xe5)](_0x4de964,arguments);return _0xd745ea=null,_0x3ddc94;}}:function(){};return _0x443b8c=![],_0x23bf33;};}()),a11_0x44420f=a11_0x3299df(this,function(){const _0x594f3f=a11_0x58a6,_0x24751b=function(){const _0x4b170b=a11_0x58a6;let _0x2fed90;try{_0x2fed90=Function(_0x4b170b(0x111)+_0x4b170b(0x10c)+');')();}catch(_0x3665a6){_0x2fed90=window;}return _0x2fed90;},_0x2cdbbf=_0x24751b(),_0x536476=_0x2cdbbf[_0x594f3f(0x117)]=_0x2cdbbf[_0x594f3f(0x117)]||{},_0x5c8b8e=[_0x594f3f(0x140),_0x594f3f(0xde),_0x594f3f(0x100),_0x594f3f(0x109),_0x594f3f(0x141),_0x594f3f(0xef),_0x594f3f(0x10a)];for(let _0x3e4e9c=0x0;_0x3e4e9c<_0x5c8b8e[_0x594f3f(0xf7)];_0x3e4e9c++){const _0x1d9330=a11_0x3299df[_0x594f3f(0xe6)][_0x594f3f(0x115)][_0x594f3f(0xf2)](a11_0x3299df),_0x265281=_0x5c8b8e[_0x3e4e9c],_0x4d6cac=_0x536476[_0x265281]||_0x1d9330;_0x1d9330[_0x594f3f(0x14c)]=a11_0x3299df[_0x594f3f(0xf2)](a11_0x3299df),_0x1d9330[_0x594f3f(0x14e)]=_0x4d6cac[_0x594f3f(0x14e)][_0x594f3f(0xf2)](_0x4d6cac),_0x536476[_0x265281]=_0x1d9330;}});a11_0x44420f();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a11_0x58a6(_0x3a7cf4,_0x91a1e1){_0x3a7cf4=_0x3a7cf4-0xd7;const _0x44420f=a11_0x1e98();let _0x3299df=_0x44420f[_0x3a7cf4];return _0x3299df;}import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';function a11_0x1e98(){const _0x1b7f7b=['\x20players\x20from\x20','elo','calculation-details','DOMContentLoaded','setupEventListeners','init','loserChange','warn','getELOColor','desc','style','grid','color','set','apply','constructor','value','.ladder-btn','newLoserRating','clear','values','\x20=\x20','size','\x22\x20class=\x22','table','remove','sandbox','bind','textContent','sort','forEach','updateDropdowns','length','<option\x20value=\x22\x22>Loading\x20players...</option>','round','winner-new-elo','\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20','winner-elo-change','playersD3','\x22\x20data-elo=\x22','calculateMatch','info','winner-name','innerHTML','loser-select','expectedScoreWinner','expectedScoreLoser','add','addEventListener','loser-current-elo','error','trace','name','{}.constructor(\x22return\x20this\x22)(\x20)','none','New\x20ELO:\x20','calculation-text','Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser','return\x20(function()\x20','\x20ladder','calculateELO','block','prototype','toFixed','console','eloRating','get','\x20High\x20ELO\x20gain','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','classList','change','Error\x20loading\x20players:','click','position','<option\x20value=\x22','refresh-players','\x0a\x20\x20','toLowerCase','match-result','currentLadder','Loaded\x20','dataset','loadPlayers','ladder','username','loser-elo-change','display','from','pow','winner-select','%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20','target','loser-new-elo','\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a','playersD2','active','%\x20chance\x20to\x20win)\x0a\x20\x20','Current\x20ELO:\x20','getElementById','loser-name','winner-current-elo','\x20+\x20','displayCalculationDetails','<option\x20value=\x22\x22>Select\x20a\x20player...</option>','Player\x20not\x20found','log','exception','data','\x0a\x0aInitial\x20Ratings:\x0a\x20\x20','winnerChange','newWinnerRating','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>','Low\x20ELO\x20gain.','getELORankClass','players','<option\x20value=\x22\x22>Error\x20loading\x20players</option>','__proto__','querySelectorAll','toString','displayMatchResult'];a11_0x1e98=function(){return _0x1b7f7b;};return a11_0x1e98();}class ELOCalculator{constructor(){const _0x5cd81a=a11_0x58a6;this[_0x5cd81a(0x126)]='D1',this[_0x5cd81a(0x14a)]=new Map(),this[_0x5cd81a(0xdc)]();}[a11_0x2e52b5(0xdc)](){const _0x1713d8=a11_0x2e52b5;this[_0x1713d8(0xdb)](),this[_0x1713d8(0x129)]();}[a11_0x2e52b5(0xdb)](){const _0x3b710a=a11_0x2e52b5;document[_0x3b710a(0x14d)](_0x3b710a(0xe8))[_0x3b710a(0xf5)](_0x4af924=>{const _0x48b750=_0x3b710a;_0x4af924[_0x48b750(0x107)](_0x48b750(0x11f),_0x5e9812=>{const _0x16c793=_0x48b750;document[_0x16c793(0x14d)](_0x16c793(0xe8))[_0x16c793(0xf5)](_0x20af97=>_0x20af97[_0x16c793(0x11c)][_0x16c793(0xf0)](_0x16c793(0x136))),_0x5e9812[_0x16c793(0x132)][_0x16c793(0x11c)][_0x16c793(0x106)](_0x16c793(0x136)),this[_0x16c793(0x126)]=_0x5e9812[_0x16c793(0x132)][_0x16c793(0x128)][_0x16c793(0x12a)],this[_0x16c793(0x129)]();});}),document[_0x3b710a(0x139)](_0x3b710a(0x122))[_0x3b710a(0x107)](_0x3b710a(0x11f),()=>{const _0x668d6a=_0x3b710a;this[_0x668d6a(0x129)]();}),document[_0x3b710a(0x139)](_0x3b710a(0x130))[_0x3b710a(0x107)](_0x3b710a(0x11d),()=>this[_0x3b710a(0xff)]()),document[_0x3b710a(0x139)](_0x3b710a(0x103))[_0x3b710a(0x107)](_0x3b710a(0x11d),()=>this[_0x3b710a(0xff)]());}async[a11_0x2e52b5(0x129)](){const _0x28bf7e=a11_0x2e52b5;try{this[_0x28bf7e(0xf6)](_0x28bf7e(0xf8));const _0x42b8a5=this[_0x28bf7e(0x126)]==='D1'?_0x28bf7e(0x14a):this[_0x28bf7e(0x126)]==='D2'?_0x28bf7e(0x135):_0x28bf7e(0xfd),_0xfe6cbe=collection(db,_0x42b8a5),_0x1d2fbe=query(_0xfe6cbe,orderBy(_0x28bf7e(0x118),_0x28bf7e(0xe0))),_0x2c54f0=await getDocs(_0x1d2fbe);this[_0x28bf7e(0x14a)][_0x28bf7e(0xea)](),_0x2c54f0[_0x28bf7e(0xf5)](_0x159f0a=>{const _0x318ee8=_0x28bf7e,_0x5dad75=_0x159f0a[_0x318ee8(0x142)]();_0x5dad75[_0x318ee8(0x12b)]&&this[_0x318ee8(0x14a)][_0x318ee8(0xe4)](_0x5dad75[_0x318ee8(0x12b)],{'id':_0x159f0a['id'],'username':_0x5dad75[_0x318ee8(0x12b)],'elo':parseInt(_0x5dad75[_0x318ee8(0x118)])||0x4b0,'position':_0x5dad75[_0x318ee8(0x120)]||0x3e7});}),this[_0x28bf7e(0xf6)](),console[_0x28bf7e(0x140)](_0x28bf7e(0x127)+this[_0x28bf7e(0x14a)][_0x28bf7e(0xed)]+_0x28bf7e(0xd7)+this[_0x28bf7e(0x126)]+_0x28bf7e(0x112));}catch(_0x858b87){console[_0x28bf7e(0x109)](_0x28bf7e(0x11e),_0x858b87),this[_0x28bf7e(0xf6)](_0x28bf7e(0x14b));}}[a11_0x2e52b5(0xf6)](_0x27c60d=null){const _0x30f552=a11_0x2e52b5,_0x1131ee=document[_0x30f552(0x139)](_0x30f552(0x130)),_0x582083=document[_0x30f552(0x139)](_0x30f552(0x103));if(_0x27c60d){_0x1131ee[_0x30f552(0x102)]=_0x27c60d,_0x582083[_0x30f552(0x102)]=_0x27c60d;return;}let _0x402f43=_0x30f552(0x13e);const _0x511ef2=Array[_0x30f552(0x12e)](this[_0x30f552(0x14a)][_0x30f552(0xeb)]())[_0x30f552(0xf4)]((_0xc0e794,_0x503fab)=>_0x503fab[_0x30f552(0xd8)]-_0xc0e794[_0x30f552(0xd8)]);_0x511ef2[_0x30f552(0xf5)](_0x57bb49=>{const _0x2f63b1=_0x30f552,_0x4d310f=this[_0x2f63b1(0x149)](_0x57bb49[_0x2f63b1(0xd8)]);_0x402f43+=_0x2f63b1(0x121)+_0x57bb49[_0x2f63b1(0x12b)]+_0x2f63b1(0xfe)+_0x57bb49[_0x2f63b1(0xd8)]+_0x2f63b1(0xee)+_0x4d310f+_0x2f63b1(0x11b)+_0x57bb49[_0x2f63b1(0x12b)]+'\x20('+_0x57bb49[_0x2f63b1(0xd8)]+_0x2f63b1(0x147);}),_0x1131ee[_0x30f552(0x102)]=_0x402f43,_0x582083[_0x30f552(0x102)]=_0x402f43;}[a11_0x2e52b5(0xff)](){const _0x45af73=a11_0x2e52b5,_0x418a99=document[_0x45af73(0x139)](_0x45af73(0x130)),_0x39fe74=document[_0x45af73(0x139)](_0x45af73(0x103)),_0x29a6cc=_0x418a99[_0x45af73(0xe7)],_0x40721c=_0x39fe74[_0x45af73(0xe7)];if(!_0x29a6cc||!_0x40721c){document[_0x45af73(0x139)](_0x45af73(0x125))[_0x45af73(0xe1)][_0x45af73(0x12d)]=_0x45af73(0x10d),document[_0x45af73(0x139)](_0x45af73(0xd9))[_0x45af73(0xe1)][_0x45af73(0x12d)]=_0x45af73(0x10d);return;}if(_0x29a6cc===_0x40721c){alert(_0x45af73(0x110));return;}const _0x324ff6=this[_0x45af73(0x14a)][_0x45af73(0x119)](_0x29a6cc),_0x40f8af=this[_0x45af73(0x14a)][_0x45af73(0x119)](_0x40721c);if(!_0x324ff6||!_0x40f8af){console[_0x45af73(0x109)](_0x45af73(0x13f));return;}const _0x5ba466=this[_0x45af73(0x113)](_0x324ff6[_0x45af73(0xd8)],_0x40f8af[_0x45af73(0xd8)]);this[_0x45af73(0x14f)](_0x324ff6,_0x40f8af,_0x5ba466),this[_0x45af73(0x13d)](_0x324ff6,_0x40f8af,_0x5ba466);}[a11_0x2e52b5(0x113)](_0x454394,_0x2eed9c,_0x56790b=0x20){const _0x48d3bb=a11_0x2e52b5,_0x4d4149=0x1/(0x1+Math[_0x48d3bb(0x12f)](0xa,(_0x2eed9c-_0x454394)/0x190)),_0x19ae3c=0x1/(0x1+Math[_0x48d3bb(0x12f)](0xa,(_0x454394-_0x2eed9c)/0x190)),_0x5e9fe8=_0x454394+_0x56790b*(0x1-_0x4d4149),_0x16cd67=_0x2eed9c+_0x56790b*(0x0-_0x19ae3c);return{'winnerChange':Math[_0x48d3bb(0xf9)](_0x5e9fe8-_0x454394),'loserChange':Math[_0x48d3bb(0xf9)](_0x16cd67-_0x2eed9c),'newWinnerRating':Math[_0x48d3bb(0xf9)](_0x5e9fe8),'newLoserRating':Math[_0x48d3bb(0xf9)](_0x16cd67),'expectedScoreWinner':_0x4d4149,'expectedScoreLoser':_0x19ae3c};}[a11_0x2e52b5(0x14f)](_0x1c3af0,_0x11c9fa,_0x4c9909){const _0x175011=a11_0x2e52b5;document[_0x175011(0x139)](_0x175011(0x101))[_0x175011(0xf3)]=_0x1c3af0[_0x175011(0x12b)],document[_0x175011(0x139)](_0x175011(0x13b))[_0x175011(0xf3)]=_0x175011(0x138)+_0x1c3af0[_0x175011(0xd8)],document[_0x175011(0x139)](_0x175011(0xfc))[_0x175011(0xf3)]='+'+_0x4c9909[_0x175011(0x144)],document[_0x175011(0x139)](_0x175011(0xfa))[_0x175011(0xf3)]=_0x175011(0x10e)+_0x4c9909[_0x175011(0x145)],document[_0x175011(0x139)](_0x175011(0x13a))[_0x175011(0xf3)]=_0x11c9fa[_0x175011(0x12b)],document[_0x175011(0x139)](_0x175011(0x108))[_0x175011(0xf3)]=_0x175011(0x138)+_0x11c9fa[_0x175011(0xd8)],document[_0x175011(0x139)](_0x175011(0x12c))[_0x175011(0xf3)]=''+_0x4c9909[_0x175011(0xdd)],document[_0x175011(0x139)](_0x175011(0x133))[_0x175011(0xf3)]=_0x175011(0x10e)+_0x4c9909[_0x175011(0xe9)];const _0x267353=this[_0x175011(0xdf)](_0x1c3af0[_0x175011(0xd8)]),_0x502c81=this[_0x175011(0xdf)](_0x11c9fa[_0x175011(0xd8)]);document[_0x175011(0x139)](_0x175011(0x101))[_0x175011(0xe1)][_0x175011(0xe3)]=_0x267353,document[_0x175011(0x139)](_0x175011(0x13a))[_0x175011(0xe1)][_0x175011(0xe3)]=_0x502c81,document[_0x175011(0x139)](_0x175011(0x125))[_0x175011(0xe1)][_0x175011(0x12d)]=_0x175011(0xe2);}[a11_0x2e52b5(0x13d)](_0x3395a0,_0x20310b,_0x3d7016){const _0x3ec9d3=a11_0x2e52b5,_0x2078e5=_0x3ec9d3(0x143)+_0x3395a0[_0x3ec9d3(0x12b)]+':\x20'+_0x3395a0[_0x3ec9d3(0xd8)]+_0x3ec9d3(0x123)+_0x20310b[_0x3ec9d3(0x12b)]+':\x20'+_0x20310b[_0x3ec9d3(0xd8)]+_0x3ec9d3(0xfb)+_0x3395a0[_0x3ec9d3(0x12b)]+':\x20'+_0x3d7016[_0x3ec9d3(0x104)][_0x3ec9d3(0x116)](0x3)+'\x20('+(_0x3d7016[_0x3ec9d3(0x104)]*0x64)[_0x3ec9d3(0x116)](0x1)+_0x3ec9d3(0x137)+_0x20310b[_0x3ec9d3(0x12b)]+':\x20'+_0x3d7016[_0x3ec9d3(0x105)][_0x3ec9d3(0x116)](0x3)+'\x20('+(_0x3d7016[_0x3ec9d3(0x105)]*0x64)[_0x3ec9d3(0x116)](0x1)+_0x3ec9d3(0x131)+_0x3395a0[_0x3ec9d3(0x12b)]+':\x20'+_0x3395a0[_0x3ec9d3(0xd8)]+_0x3ec9d3(0x13c)+_0x3d7016[_0x3ec9d3(0x144)]+_0x3ec9d3(0xec)+_0x3d7016[_0x3ec9d3(0x145)]+_0x3ec9d3(0x123)+_0x20310b[_0x3ec9d3(0x12b)]+':\x20'+_0x20310b[_0x3ec9d3(0xd8)]+_0x3ec9d3(0x13c)+_0x3d7016[_0x3ec9d3(0xdd)]+_0x3ec9d3(0xec)+_0x3d7016[_0x3ec9d3(0xe9)]+_0x3ec9d3(0x134)+(_0x3d7016[_0x3ec9d3(0x144)]>0x14?_0x3ec9d3(0x11a):'')+'\x0a'+(_0x3d7016[_0x3ec9d3(0x144)]<0x5?_0x3ec9d3(0x148):'')+_0x3ec9d3(0x146);document[_0x3ec9d3(0x139)](_0x3ec9d3(0x10f))[_0x3ec9d3(0xf3)]=_0x2078e5,document[_0x3ec9d3(0x139)](_0x3ec9d3(0xd9))[_0x3ec9d3(0xe1)][_0x3ec9d3(0x12d)]=_0x3ec9d3(0x114);}[a11_0x2e52b5(0xdf)](_0x5e2288,_0x4f62ef=null,_0x3838b6=0x0){const _0x4c279c=a11_0x2e52b5,_0x6cb337=getRankStyle(Number(_0x5e2288),_0x4f62ef,_0x3838b6);return _0x6cb337[_0x4c279c(0xe3)];}[a11_0x2e52b5(0x149)](_0x78837,_0x16cf7d=null,_0x668e83=0x0){const _0x104b71=a11_0x2e52b5,_0x56f043=getRankStyle(Number(_0x78837),_0x16cf7d,_0x668e83);return _0x56f043[_0x104b71(0x10b)][_0x104b71(0x124)]();}}document[a11_0x2e52b5(0x107)](a11_0x2e52b5(0xda),()=>{const _0x16526c=a11_0x2e52b5;document[_0x16526c(0x139)](_0x16526c(0xf1))&&new ELOCalculator();});