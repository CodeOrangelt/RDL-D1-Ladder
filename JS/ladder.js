const a27ao=a27d;(function(a,b){const P=a27d,c=a();while(!![]){try{const d=parseInt(P(0x118))/0x1*(-parseInt(P(0x18e))/0x2)+-parseInt(P(0x180))/0x3*(parseInt(P(0x17a))/0x4)+parseInt(P(0x1ba))/0x5+parseInt(P(0x133))/0x6+-parseInt(P(0x18f))/0x7+-parseInt(P(0x154))/0x8*(-parseInt(P(0x17c))/0x9)+parseInt(P(0x11e))/0xa;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a27c,0xa90fc));const a27b=(function(){let a=!![];return function(b,c){const d=a?function(){const Q=a27d;if(c){const e=c[Q(0x126)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a27a=a27b(this,function(){const R=a27d;let a;try{const d=Function(R(0x194)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');a=d();}catch(f){a=window;}const b=a['console']=a['console']||{},c=['log','warn',R(0x16f),'error',R(0x175),R(0x191),R(0x1b6)];for(let g=0x0;g<c[R(0x1be)];g++){const h=a27b['constructor'][R(0x167)][R(0x13a)](a27b),i=c[g],j=b[i]||h;h['__proto__']=a27b[R(0x13a)](a27b),h[R(0x17f)]=j[R(0x17f)][R(0x13a)](j),b[i]=h;}});a27a();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';function a27c(){const aA=['y3jLyxrLrwXLBwvUDa','i0zgrdCWma','tgfKzgvYihrHyMXLigjVzhKGBM90igzVDw5K','ww91j3jLig5VDcbYzwDPC3rLCMvKig9UihrOzsbevu9tigXHzgrLCG','CgfYzw50tM9Kzq','yxbWBhK','i0mWqZbdma','tM8GAwrLywWGB3bWB25LBNqGzM91BMqGzM9YihLVDxiGy3vYCMvUDcbfte8Gka','zw1WDhK','zxHPC3rZ','DgvHBw1HDgu','ruXpigHPC3rVCNKGy29SBgvJDgLVBIbPCYbLBxb0Eq','D2LUCW','DxnLCLbYB2zPBgvZ','Dg90ywXezwf0Ahm','iZuWqZG3oa','zM9YrwfJAa','tM8GyxzHAwXHyMXLihrLyw1TyxrLCYbMB3vUzc4Gtw9YzsbWBgf5zxjZig5LzwrLzcbVBIbevu9tigXHzgrLCIe','nZa1mdyYnhHkt1vrCa','cIaGicaGidXKAxyGy2XHC3m9iNjHBMSIpIm','y3vYCMvUDfvZzxi','CM9Szu5HBwu','zhvVCW','zhvVCY1ZD2L0y2G','cIaGicaGicaGphn0CM9UzZ7WN5ssier1B3mGtgfKzgvYic0GqwrTAw4Gt25SEtWVC3rYB25NpJXICJ4kicaGicaGica8C3bHBIbZDhLSzt0Iy29SB3i6icnJy2m7iJ5dDxjYzw50BhKGAw4GDgvZDgLUzYbWAgfZztWVC3bHBJ4kicaGia','yMLUza','CM9Szq','zgvZyW','z2v0','qMfZzwqGB24GEw91CIbfte8Gka','y2XHC3nmAxn0','zdeTC3DPDgnO','rxjYB3iGzMv0y2HPBMCGruXpigHPC3rVCNK6','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzdm','BgfIzwXBzM9YpsjKDw9Zlxn3AxrJAcjD','y2XPy2S','i2XHzgrLCIb0yM9KEq','yxbWzw5Kq2HPBgq','vxnPBMCGy2fJAgvKieqXigXHzgrLCIbKyxrH','pc90zd4kicaGicaGica8DgqGC3r5Bgu9iNbVC2L0Aw9UoIbYzwXHDgL2ztSIpGOGicaGicaGicaGica8zgL2ihn0EwXLpsjKAxnWBgf5oIbMBgv4oYbHBgLNBI1PDgvTCZOGy2vUDgvYoYbWB3nPDgLVBJOGCMvSyxrPDMu7iJ4kicaGicaGicaGicaGicaGidXHigHYzwy9iNbYB2zPBguUAhrTBd91C2vYBMfTzt0','ywjZ','yMXVy2S','ywn0AxzL','Dg90ywXnyxrJAgvZ','B2XKrwXVuMf0Aw5N','yM9KEq','ChjLDMLVDxnfBg8','Bwf4','iIakicaGicaGicaGicaGicaGicaGicaGicaGy2XHC3m9iNbSyxLLCI1MBgfNiIakicaGicaGicaGicaGicaGicaGicaGicaGC3r5Bgu9iM1HCMDPBI1Szwz0oIa1ChG7ihzLCNrPy2fSlwfSAwDUoIbTAwrKBgu7iGOGicaGicaGicaGicaGicaGicaGicaGicbVBMvYCM9Ypsj0AgLZlNn0EwXLlMrPC3bSyxK9j25VBMuNiJ4','z2v0rwXLBwvUDej5swq','Dgq6BNrOlwnOAwXKkdmP','ntiXmdaWohPKyMTrvG','Cg9PBNrLCG','zw1HAwW','B3bHy2L0Eq','CgXHEwvYCW','y2HHBMDL','Bg9Zzxjty29Yzq','rxjYB3iGzMv0y2HPBMCGyMf0y2GGBwf0y2GGC3rHDhm6','cIaGicaGicaGicaGicaGica8l2e+cIaGicaGicaGicaGicaGica','Aw5Uzxjive1m','AgfZvgvHBq','AgfZ','Bg9ZzxjvC2vYBMfTzq','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzde','zxjYB3i','D2fYBG','i0nen0yZmG','zhvVCY1SywrKzxiTy29UDgfPBMvY','rxjYB3iGy2HLy2TPBMCG','ChjVDg90ExbL','zdeTBgfKzgvYlwnVBNrHAw5LCG','BwfW','CxvLCNLtzwXLy3rVCKfSBa','y2XHC3noyw1L','y2HLy2TLza','tg9VA2LUzYbMB3iGysb0zwfTBwf0zt8Gq29UC2LKzxiGphnWyw4Gy2XHC3m9iNjLy29TBwvUzgf0Aw9UlwHPz2HSAwDODciGC3r5Bgu9iMnVBg9YoIa','CM91BMq','Aw5MBW','pc9KAxy+cIaGicaGidXKAxyGy2XHC3m9iNbSyxLLCI1Uyw1LiJ4','rdiGDg9Nz2XLignSAwnRzwq','Dg9ju09tDhjPBMC','CxvLCNLtzwXLy3rVCG','B25bDxrOu3rHDgvdAgfUz2vK','zxHJzxb0Aw9U','oYi+','C29YDa','Bg9N','zM9UDfDLAwDODa','nZu2mZq0wujKAhrI','Bg9HzgLUzY1PBMrPy2f0B3i','owD4B0X1yW','C3r5Bgu','cIaGicaGicaGCg9ZAxrPB246igzPEgvKoWOGicaGicaGihrVCdOGntaLoWOGicaGicaGigXLzNq6iduWjtSkicaGicaGicb0CMfUC2zVCM06ihrYyw5ZBgf0zsGTntaLlcaTntaLktSkicaGicaGicbIywnRz3jVDw5KoIaJmMeYytjHoWOGicaGicaGigjVCMrLCJOGmNb4ihnVBgLKicnMzJzInMi7cIaGicaGicaGyM9YzgvYlxjHzgL1CZOGohb4oWOGicaGicaGihbHzgrPBMC6ideUnxjLBtSkicaGicaGicb0zxH0lwfSAwDUoIbJzw50zxi7cIaGicaGicaGy29SB3i6icnMzJzInMi7cIaGicaGicaGEI1PBMrLEdOGmtaWmdSkicaGicaGicbIB3GTC2HHzg93oIaWidrWEcaXmNb4ihjNyMeOmcWWldaSmc41ktSkicaGia','Dg9tDhjPBMC','mJfjEMHWz1O','ywrK','ww91j3jLihrLyw1Lzcb3AxrOidXZCgfUignSyxnZpsjYzwnVBw1LBMrHDgLVBI1OAwDOBgLNAhqIpG','BMv3rwXVuMf0Aw5N','r29Sza','Cg9ZAxrPB24','Dg9gAxHLza','z3jHEq','zxjYB3iTBwvZC2fNzq','DxnLCM5HBwu','u2v0ihLVDxiGDxnLCM5HBwuGDg8GC2vLihjLy29TBwvUzgvKig9WCg9Uzw50CW','ywrKrxzLBNrmAxn0zw5LCG','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzdi','D2LUuMf0zq','nZyYodzWyMr6B1u','ntK4nZi1ngD3BMzjtq','zM9UDfnPEMu','DgfIBgu','rxjYB3iGBg9HzgLUzYbSywrKzxi6','zgLZCgXHEq','CMv0DxjUicHMDw5JDgLVBIGPia','C2v0','pc90zd4kicaGicaGica8Dgq+','y2f0y2G','zgL2','CgXHEwvYvxnLCM5HBwu','oYb0zxH0lwrLy29YyxrPB246ig5VBMu7iJ4kicaGicaGicaGicaGicaGicaGica','cGOGicaGicaGicaGica8l2rPDJ4kicaGicaGica8l3rKpGOGicaGicaGidX0zcbZDhLSzt0Iy29SB3i6ia','Dg9mB3DLCKnHC2u','lNbUzYiGcIaGicaGicaGicaGicaGicaGicaGicaGigfSDd0I','CMvTB3zL','C2vJB25KCW','zMLUza','CgXHEwvY','pc9KAxy+cIaGicaGidXKAxyGy2XHC3m9iNbSyxLLCI1LBg8IpG','ChvZAa','pc9KAxy+cIaGicaGidXKAxyGy2XHC3m9iNbSyxLLCI1Hy3rPDML0Esa','y291BNrYEq','jMXHzgrLCJ1KmsiGcIaGicaGicaGicaGicaGicaGicbZDhLSzt0Iy29SB3i6ia','ywrTAw4','BMv3rwXV','zwXV','DwLK','CgXHEwvYC0qZ','igXHzgrLCG','BM9Uzq','mc41','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzhvVCW','rdmGDg9Nz2XLignSAwnRzwq','CMfUAW','pc9ZCgfUpI4Gq2HHBgXLBMDLig90AgvYihrLyw1Ziq','zdiTBgfKzgvYlwnVBNrHAw5LCG','Dg90ywXlAwXSCW','CMvJzw50qwn0AxzPDhK','DhjHy2u','iZrdquy1ma','C2v0rgf0zq','A2rH','mZGWnZG3mfHxAgvfzG','CgXHEwvYC0qY','zg9JCW','DMLZAwjPBgL0Eq','BgvUz3rO','Bg9ZC2vZ','Dgv4DenVBNrLBNq','C2XPy2u','zgLZywjSzwq','rxjYB3iGzMLUzgLUzYbYzwnVBw1LBMrLzcbVChbVBMvUDa','Aw5JBhvKzxm','m3DpEKLnCq','jtWVDgq+cIaGica8l3rYpG','zwXVuMf0Aw5N','DgLTzxn0yw1W','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqT','rxjYB3iGzMLUzgLUzYbIzxn0ig9WCg9Uzw50oG','mZK3otaWmffpteThsW','AM9PBG','zgf0yq'];a27c=function(){return aA;};return a27c();}import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(a=0x1){const S=a27d;try{document[S(0x152)](S(0x17b))['style']['display']='block';const b=await getLadderData(a);b[S(0x177)]((f,g)=>g['elo']-f[S(0x1a9)]);const c=b[S(0x169)](f=>f['id']),d=await getEloHistoryBatch(c,a),e=b[S(0x169)]((f,g)=>{const T=S,h=d[f['id']]||[],i=h[T(0x177)]((j,k)=>new Date(k['date'])-new Date(j['date']))[T(0x114)](0x0,0x5);return{...f,'rank':g+0x1,'lastMatches':i,'recentActivity':i['length']>0x0};});renderLadder(e),setupRealTimeUpdates(a);}catch(f){console['error']('Error\x20loading\x20ladder\x20data:',f),document['getElementById'](S(0x188))['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById'](S(0x17b))[S(0x17d)][S(0x193)]=S(0x1ad);}}function setupRealTimeUpdates(a=0x1){const U=a27d;activeListeners['forEach'](f=>f()),activeListeners=[];const b=a===0x1?U(0x158):'playersD'+a,c=a===0x1?'matches':'matchesD'+a,d=new Date();d[U(0x1b8)](d['getDate']()-0x1);const e=setupEfficientListener(c,[where('date','>=',d[U(0x172)]()),limit(0xa),orderBy('date','desc')],async f=>{f['length']>0x0&&await loadLadderData(a);});activeListeners['push'](e);}export function cleanupListeners(){activeListeners['forEach'](a=>a()),activeListeners=[];}function renderLadder(a){const V=a27d,b=document[V(0x152)]('ladder-container');b['innerHTML']='',a[V(0x131)](c=>{const W=V,d=document[W(0x121)](W(0x198));d[W(0x16b)]='ladder-player',d['innerHTML']=W(0x134)+c[W(0x1b1)]+W(0x170)+(c[W(0x189)]||c['id'])+W(0x1a2)+c['elo']+W(0x1a4)+(c['recentActivity']?'active':'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(c[W(0x1b5)]?'Active':'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',b['appendChild'](d);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(a=![]){const X=a27d,b=document[X(0x173)](X(0x145));if(!b){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}b['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const c=Date['now']();if(!a&&playerCache[X(0x120)]&&c-playerCache['timestamp']<CACHE_DURATION){console[X(0x178)](X(0x147)),updateLadderDisplay(playerCache['data']);return;}const d=collection(db,'players'),e=await getDocs(d),f=[];e['forEach'](l=>{const Y=X,m=l[Y(0x120)]();f[Y(0x1a3)]({...m,'id':l['id'],'elo':m[Y(0x11a)]||0x0,'position':m['position']||Number['MAX_SAFE_INTEGER']});});const g=collection(db,'userProfiles'),h=await getDocs(g),i=new Map();h['forEach'](l=>{const Z=X,m=l['data']();m[Z(0x189)]&&i['set'](m['username'][Z(0x19c)](),m);}),f['forEach'](l=>{const a0=X,m=l[a0(0x189)]?.['toLowerCase']();if(m&&i[a0(0x15f)](m)){const n=i['get'](m);n['country']&&(l[a0(0x1a5)]=n[a0(0x1a5)][a0(0x19c)]());}});const j=f[X(0x169)](l=>l[X(0x189)]),k=await fetchBatchMatchStats(j);f['sort']((l,m)=>{const a1=X,n=k['get'](l['username'])?.['totalMatches']||0x0,o=k[a1(0x13d)](m['username'])?.[a1(0x14c)]||0x0;if(n===0x0!==(o===0x0))return n===0x0?0x1:-0x1;return(l[a1(0x185)]||0x3e7)-(m[a1(0x185)]||0x3e7);}),f['forEach']((l,m)=>{const a2=X;l[a2(0x185)]=m+0x1;}),playerCache['data']=f,playerCache[X(0x11b)]=c,updateLadderDisplay(f,k);}catch(l){console['error'](X(0x192),l),b[X(0x15d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+l['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(a){const a3=a27d,b=new Map();try{a[a3(0x131)](e=>{const a4=a3;b[a4(0x195)](e,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const c=collection(db,'approvedMatches'),d=await getDocs(c);d[a3(0x131)](e=>{const a5=a3,f=e[a5(0x120)](),g=f['winnerUsername'],h=f[a5(0x160)];if(a['includes'](g)){const i=b[a5(0x13d)](g);i[a5(0x12d)]++,i['totalMatches']++,i['totalKills']+=parseInt(f['winnerScore'])||0x0,i['totalDeaths']+=parseInt(f[a5(0x15a)])||0x0;}if(a[a5(0x117)](h)){const j=b['get'](h);j['losses']++,j[a5(0x14c)]++,j[a5(0x1b4)]+=parseInt(f[a5(0x15a)])||0x0,j[a5(0x12f)]+=parseInt(f['winnerScore'])||0x0;}}),a[a3(0x131)](e=>{const a6=a3,f=b[a6(0x13d)](e);f[a6(0x1b9)]=f['totalDeaths']>0x0?(f['totalKills']/f['totalDeaths'])[a6(0x186)](0x2):f['totalKills']['toFixed'](0x2),f['winRate']=f['totalMatches']>0x0?(f['wins']/f['totalMatches']*0x64)[a6(0x186)](0x1):0x0;});}catch(e){console['error'](a3(0x15b),e);}return b;}function createPlayerRow(a,b){const a7=a27d,c=parseFloat(a[a7(0x1a9)])||0x0;let d=a7(0x187);if(c>=0x7d0)d=a7(0x130);else{if(c>=0x708)d=a7(0x122);else{if(c>=0x640)d='#b9f1fc';else c>=0x578&&(d='#CD7F32');}}let e='';return a['country']&&(e='<img\x20src=\x22../images/flags/'+a[a7(0x1a5)][a7(0x19c)]()+a7(0x19d)+a[a7(0x1a5)]+a7(0x151)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+a[a7(0x185)]+a7(0x148)+encodeURIComponent(a[a7(0x189)])+a7(0x1a6)+d+a7(0x19a)+a['username']+a7(0x15c)+e+a7(0x19b)+d+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+c+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+b[a7(0x14c)]+a7(0x196)+b[a7(0x12d)]+a7(0x196)+b[a7(0x1bf)]+a7(0x196)+b[a7(0x1b9)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+b[a7(0x18d)]+a7(0x119);}function getPlayerRankName(a){const a8=a27d;if(a>=0x7d0)return'Emerald';if(a>=0x708)return a8(0x184);if(a>=0x640)return'Silver';if(a>=0x578)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(a){const aa=a27d,b=new Map();a['forEach'](c=>{const a9=a27d;b[a9(0x195)](c,0x0);});try{const c=collection(db,'players'),d=await getDocs(c),e=new Map(),f=new Map();d[aa(0x131)](l=>{const ab=aa,m=l[ab(0x120)]();m['username']&&(e['set'](l['id'],m[ab(0x189)]),f['set'](m['username']['toLowerCase'](),l['id']));});const g=collection(db,'eloHistory'),h=query(g,orderBy('timestamp',aa(0x13c)),limit(0x12c)),i=await getDocs(h);if(i[aa(0x129)])return console[aa(0x178)](aa(0x12c)),b;if(i[aa(0x1bc)][aa(0x1be)]>0x0){const l=i[aa(0x1bc)][0x0][aa(0x120)]();if(l['player']&&e[aa(0x15f)](l['player'])){}}const j=new Map();let k=0x0;i['forEach'](m=>{const ac=aa,n=m['data']();let o=null;if(n[ac(0x1a1)]&&e[ac(0x15f)](n['player']))o=e[ac(0x13d)](n[ac(0x1a1)]);else{if(n[ac(0x189)]&&f['has'](n['username'][ac(0x19c)]()))o=n['username'];else n['playerUsername']&&f['has'](n[ac(0x199)]['toLowerCase']())&&(o=n[ac(0x199)]);}o&&a[ac(0x117)](o)&&(k++,!j[ac(0x15f)](o)&&j[ac(0x195)](o,[]),j[ac(0x13d)](o)[ac(0x1a3)]({...n,'timestamp':n[ac(0x11b)]?.[ac(0x19f)]||0x0}));}),j['forEach']((m,n)=>{const ad=aa;if(m['length']>0x0){m[ad(0x177)]((p,q)=>q['timestamp']-p[ad(0x11b)]);const o=m[ad(0x1a0)](p=>p['change']!==undefined||p[ad(0x1a8)]!==undefined&&p[ad(0x14f)]!==undefined||p[ad(0x183)]!==undefined&&p[ad(0x14d)]!==undefined);if(o){let p;if(o[ad(0x159)]!==undefined)p=parseInt(o['change']);else{if(o['newElo']!==undefined&&entry[ad(0x14f)]!==undefined)p=parseInt(o[ad(0x1a8)])-parseInt(o['previousElo']);else o['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(p=parseInt(o[ad(0x183)])-parseInt(o['oldEloRating']));}!isNaN(p)&&p!==0x0&&b['set'](n,p);}}});}catch(m){console[aa(0x162)](aa(0x141),m);}return b;}async function updateLadderDisplay(a,b=null){const ae=a27d,c=document[ae(0x173)](ae(0x145));if(!c){console['error'](ae(0x123));return;}const d=document['querySelector']('#ladder\x20thead\x20tr');d&&(d[ae(0x15d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const e=a['map'](g=>g['username']);!b&&(b=await fetchBatchMatchStats(e));const f=a['map'](g=>{const h=b['get'](g['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRow(g,h);})[ae(0x11f)]('');c[ae(0x15d)]=f,getPlayersLastEloChanges(e)['then'](g=>{const af=ae,h=new Map();c[af(0x16a)]('tr')['forEach']((i,j)=>{const ag=af;j<e[ag(0x1be)]&&h['set'](e[j],i);}),g[af(0x131)]((i,j)=>{const ah=af,k=h['get'](j);if(k&&i!==0x0){const l=k[ah(0x173)](ah(0x153));if(l){const m=i>0x0?'+'+i:''+i,n=l[ah(0x173)]('.trend-indicator');if(n)n[ah(0x1c0)]=m,n['style']['color']=i>0x0?ah(0x1b7):'#F44336',n[ah(0x17d)][ah(0x179)]='bold',n['style'][ah(0x190)]='0.85em',n[ah(0x17d)][ah(0x193)]='inline',n['style'][ah(0x1bd)]='visible',n['style']['opacity']='1';else{}}}});})[ae(0x197)](g=>console[ae(0x162)]('Error\x20updating\x20ELO\x20trend\x20indicators:',g));}function initLadderToggles(){const ai=a27d,a=document['getElementById'](ai(0x140)),b=document[ai(0x152)]('d2-switch'),c=document['getElementById']('d3-switch'),d=document[ai(0x152)](ai(0x138)),e=document['getElementById'](ai(0x168)),f=document['getElementById'](ai(0x1b3)),g=document['getElementById']('d3-ladder-container'),h=document['getElementById']('duos-ladder-container');function i(){const aj=ai;if(e)e['classList'][aj(0x19e)](aj(0x14b));if(f)f[aj(0x13f)][aj(0x19e)](aj(0x14b));if(g)g['classList']['remove'](aj(0x14b));if(h)h['style'][aj(0x193)]='none';if(e)e[aj(0x17d)]['display']='none';if(f)f['style']['display']='none';if(g)g[aj(0x17d)][aj(0x193)]=aj(0x1ad);}a&&a[ai(0x18b)](ai(0x144),()=>{const ak=ai;console['log']('D1\x20toggle\x20clicked'),i();e&&(e[ak(0x13f)]['add'](ak(0x14b)),e['style'][ak(0x193)]='block');document['getElementById'](ak(0x161))['style']['display']=ak(0x14a),document['getElementById'](ak(0x18c))[ak(0x17d)]['display']='none',document['getElementById']('elo-recommendation-text-d3')[ak(0x17d)][ak(0x193)]=ak(0x1ad);if(a)a[ak(0x13f)][ak(0x181)](ak(0x14b));if(b)b[ak(0x13f)]['remove'](ak(0x14b));if(c)c[ak(0x13f)]['remove'](ak(0x14b));displayLadder(),findBestOpponent('d1');}),b&&b[ai(0x18b)](ai(0x144),()=>{const al=ai;console['log'](al(0x171)),i();f&&(f[al(0x13f)]['add'](al(0x14b)),f['style'][al(0x193)]=al(0x14a));document[al(0x152)](al(0x161))[al(0x17d)][al(0x193)]='none',document[al(0x152)](al(0x18c))['style']['display']='block',document['getElementById'](al(0x142))['style'][al(0x193)]=al(0x1ad);if(b)b['classList']['add']('active');if(a)a['classList'][al(0x19e)](al(0x14b));if(c)c[al(0x13f)][al(0x19e)](al(0x14b));displayLadderD2(),findBestOpponent('d2');}),c&&c['addEventListener'](ai(0x144),()=>{const am=ai;console[am(0x178)](am(0x1b0)),i();g&&(g[am(0x13f)][am(0x181)]('active'),g['style'][am(0x193)]='block');document[am(0x152)](am(0x161))[am(0x17d)]['display']='none',document['getElementById']('elo-recommendation-text-d2')['style'][am(0x193)]='none',document['getElementById'](am(0x142))['style']['display']='block';if(c)c['classList']['add']('active');if(a)a['classList'][am(0x19e)]('active');if(b)b[am(0x13f)][am(0x19e)]('active');displayLadderD3(),findBestOpponent('d3');}),d&&d[ai(0x18b)](ai(0x144),()=>{const an=ai;i();if(h)h['style']['display']=an(0x14a);displayLadderDuos(),findBestOpponent(an(0x137)),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById'](an(0x1af))['style']['display']='block'),document[an(0x152)]('elo-recommendation-text-d1')[an(0x17d)]['display']='none',document[an(0x152)]('elo-recommendation-text-d2')['style'][an(0x193)]='none',document[an(0x152)](an(0x142))[an(0x17d)]['display']=an(0x1ad);});}document[a27ao(0x18b)]('DOMContentLoaded',()=>{const ap=a27ao;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')[ap(0x17d)]['display']='block';});export{displayLadder};async function findBestOpponent(a='d1'){const aq=a27ao,b=aq(0x11c)+a,c=document['getElementById'](b);if(!c){console['error']('Recommendation\x20element\x20for\x20'+a+'\x20not\x20found');return;}const d=auth[aq(0x135)];if(!d){c[aq(0x1c0)]='';return;}try{const e=doc(db,aq(0x12e),d['uid']),f=await getDoc(e);if(!f[aq(0x12a)]()){console[aq(0x178)]('No\x20user\x20profile\x20found'),c[aq(0x1c0)]='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const g=f['data'](),h=g['username'];if(!h){c['textContent']=aq(0x18a);return;}let i;switch(a){case'd1':i='players';break;case'd2':i='playersD2';break;case'd3':i='playersD3';break;case aq(0x137):i='playersDuos';break;default:i=aq(0x158);}if(a==='duos'){const s=collection(db,i),t=query(s,where('username','==',h)),u=await getDocs(t);if(u[aq(0x129)]){c[aq(0x1c0)]=aq(0x124);return;}const v=u[aq(0x1bc)][0x0]['data'](),w=parseInt(v[aq(0x11a)])||0x4b0;if(v[aq(0x15e)]&&v['teammate']){c[aq(0x15d)]=aq(0x182)+v[aq(0x12b)]+aq(0x1b2);return;}const x=await getDocs(s);let y=null,z=-0x1;x[aq(0x131)](A=>{const ar=aq,B=A['data']();if(B[ar(0x189)]===h)return;if(B[ar(0x15e)])return;const C=parseInt(B['eloRating'])||0x4b0,D=Math['abs'](C-w),E=Math[ar(0x150)](0x0,0xc8-D);E>z&&(y=B,z=E);});if(y){const A=parseInt(y[aq(0x11a)])||0x4b0;let B='gray';if(A>=0x7d0)B='#50C878';else{if(A>=0x708)B='#FFD700';else{if(A>=0x640)B=aq(0x127);else A>=0x578&&(B='#CD7F32');}}c[aq(0x15d)]=aq(0x16d)+B+';\x22>'+y[aq(0x189)]+'</span>\x20(ELO:\x20'+A+')';}else c['textContent']=aq(0x132);return;}const j=collection(db,i),k=query(j,where(aq(0x189),'==',h)),l=await getDocs(k);if(l[aq(0x129)]){c['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+a['toUpperCase']()+aq(0x1ac);return;}const m=l['docs'][0x0][aq(0x120)](),n=parseInt(m[aq(0x11a)])||0x5dc,o=await getDocs(j);let p=null,q=-0x1;const r=getPlayerRankName(n);o[aq(0x131)](C=>{const as=aq,D=C[as(0x120)]();if(D['username']===h)return;const E=parseInt(D['eloRating'])||0x5dc,F=getPlayerRankName(E),G=Math[as(0x149)](E-n),H=0x20,I=0x1/(0x1+Math['pow'](0xa,(E-n)/0x190)),J=Math[as(0x16e)](H*(0x1-I));if(J<=0x0)return;let L=0x0;const M=Math[as(0x150)](0x0,0x64-G*0.5),N=J>=0x3&&J<=0x8?0x32:J>0x0&&J<0xf?0x1e:0xa,O=r===F?0x28:0x0;L=M+N+O,L>q&&(p=D,q=L);});if(p){const C=parseInt(p[aq(0x11a)])||0x5dc;let D='gray';if(C>=0x7d0)D=aq(0x130);else{if(C>=0x708)D=aq(0x122);else{if(C>=0x640)D='#b9f1fc';else C>=0x578&&(D=aq(0x164));}}c[aq(0x15d)]=aq(0x13e)+n+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+D+aq(0x176)+p[aq(0x189)]+'</span>';}else c[aq(0x15d)]=aq(0x128)+n+')';}catch(E){console['error'](aq(0x11d),E),c['textContent']=aq(0x116);}}function a27d(a,b){const c=a27c();return a27d=function(d,e){d=d-0x114;let f=c[d];if(a27d['BoQtPq']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a27d['fLvqji']=g,a=arguments,a27d['BoQtPq']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a27d['fLvqji'](f),a[i]=f):f=j,f;},a27d(a,b);}auth['onAuthStateChanged'](a=>{const at=a27ao,b=document[at(0x152)](at(0x168))&&document['getElementById'](at(0x168))[at(0x17d)][at(0x193)]!=='none',c=document['getElementById'](at(0x1b3))&&document['getElementById']('d2-ladder-container')[at(0x17d)][at(0x193)]!==at(0x1ad),d=document['getElementById']('d3-ladder-container')&&document[at(0x152)]('d3-ladder-container')['style']['display']!==at(0x1ad),e=document[at(0x152)](at(0x165))&&document['getElementById']('duos-ladder-container')[at(0x17d)][at(0x193)]!=='none',f=b?'d1':c?'d2':d?'d3':e?'duos':'d1';findBestOpponent(f);}),document[a27ao(0x18b)]('DOMContentLoaded',()=>{const au=a27ao,a=document['getElementById'](au(0x138)),b=document['querySelector'](au(0x143));a&&b&&(a[au(0x18b)](au(0x159),async c=>{const av=au;if(c['target']['checked']){const d=auth?.[av(0x135)],f=await checkIfUserIsAdmin(d);if(!f){c['preventDefault']();const g=document[av(0x152)]('d1-switch');return g&&(g[av(0x16c)]=!![],g['dispatchEvent'](new Event(av(0x159)))),showAdminOnlyMessage(),![];}}}),auth[au(0x174)](async c=>{const aw=au,d=await checkIfUserIsAdmin(c);!d?(a[aw(0x115)]=!![],b['style']['opacity']=aw(0x1ae),b['style']['cursor']='not-allowed',b['title']='Duos\x20ladder\x20is\x20currently\x20admin-only'):(a[aw(0x115)]=![],b['style'][aw(0x157)]='1',b['style']['cursor']=aw(0x155),b['title']='');}));});async function checkIfUserIsAdmin(a){const ax=a27ao;if(!a)return![];try{const b=['admin@ladder.com','brian2af@outlook.com'];if(a[ax(0x156)]&&b['includes'](a['email'][ax(0x19c)]()))return!![];const c=[ax(0x12e),'players',ax(0x1bb),ax(0x1ab)],d=[ax(0x1a7),'owner','council','creative\x20lead'];for(const e of c){try{const f=doc(db,e,a[ax(0x1aa)]),g=await getDoc(f);if(g[ax(0x12a)]()){const h=g['data'](),i=(h[ax(0x136)]||h[ax(0x13b)]||'')['toLowerCase']();if(i&&d['includes'](i))return!![];}}catch(j){console[ax(0x163)](ax(0x166)+e+':',j);}}return![];}catch(k){return console[ax(0x162)]('Error\x20checking\x20admin\x20status:',k),![];}}function showAdminOnlyMessage(){const ay=a27ao,a=document[ay(0x152)]('admin-only-message');a&&a[ay(0x19e)]();const b=document['createElement']('div');b['id']='admin-only-message',b['style']['cssText']=ay(0x17e),b['innerHTML']=ay(0x139),document[ay(0x14e)][ay(0x146)](b),setTimeout(()=>{const az=ay;b[az(0x125)]&&b['remove']();},0xbb8);}