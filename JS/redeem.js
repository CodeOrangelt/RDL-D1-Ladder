const a47_0x284831=a47_0x3183,a47_0x115d4f=(function(){let _0x32e864=!![];return function(_0x2bc23d,_0x36cb58){const _0x30395c=_0x32e864?function(){if(_0x36cb58){const _0x4d1dfb=_0x36cb58['apply'](_0x2bc23d,arguments);return _0x36cb58=null,_0x4d1dfb;}}:function(){};return _0x32e864=![],_0x30395c;};}()),a47_0x2c9a39=a47_0x115d4f(this,function(){const _0xe97c20=a47_0x3183,_0x369b34=function(){let _0x2cb02a;try{_0x2cb02a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x207e9b){_0x2cb02a=window;}return _0x2cb02a;},_0x220d84=_0x369b34(),_0xd50960=_0x220d84['console']=_0x220d84['console']||{},_0x492a6e=['log',_0xe97c20(0xdd),_0xe97c20(0xbe),'error',_0xe97c20(0xda),'table','trace'];for(let _0x167a30=0x0;_0x167a30<_0x492a6e['length'];_0x167a30++){const _0xa61e94=a47_0x115d4f['constructor'][_0xe97c20(0xb1)]['bind'](a47_0x115d4f),_0x4ea639=_0x492a6e[_0x167a30],_0x4a4678=_0xd50960[_0x4ea639]||_0xa61e94;_0xa61e94['__proto__']=a47_0x115d4f[_0xe97c20(0xcc)](a47_0x115d4f),_0xa61e94['toString']=_0x4a4678['toString']['bind'](_0x4a4678),_0xd50960[_0x4ea639]=_0xa61e94;}});function a47_0x3183(_0xcf2fcd,_0x164540){const _0x2c9a39=a47_0x3440();return a47_0x3183=function(_0x115d4f,_0x427b63){_0x115d4f=_0x115d4f-0xa1;let _0x344028=_0x2c9a39[_0x115d4f];return _0x344028;},a47_0x3183(_0xcf2fcd,_0x164540);}a47_0x2c9a39();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':a47_0x284831(0xa4),'description':a47_0x284831(0xcf)},'emerald':{'price':0x3e8,'name':'Emerald','description':a47_0x284831(0xd0)},'gold':{'price':0x320,'name':'Gold','description':'Only\x20the\x20best\x20get\x20this\x20one'},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':'You\x20can\x20see\x20better!'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'volcanic':{'price':0x1f4,'name':a47_0x284831(0xd1),'description':'For\x20the\x20angry\x20type.'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener'](a47_0x284831(0xab),()=>{const _0x5ebb00=a47_0x284831;console[_0x5ebb00(0xad)](_0x5ebb00(0xac)),storeContainer=document['getElementById']('store-content'),pointsDisplay=document['getElementById']('user-points'),authWarning=document[_0x5ebb00(0xeb)]('auth-warning'),initAuthListener(),buildStoreUI();});function a47_0x3440(){const _0x3d56cb=['display','addEventListener','add','Yellow\x20Orange','FREE','div','data','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','price','default','DOMContentLoaded','üè™\x20Redeem\x20store\x20initializing...','log','remove','className','Apply\x20Theme','prototype','User\x20data\x20loaded\x20-\x20Points:\x20','cannot-afford','ThemeSystem','style','switchTheme','Error\x20loading\x20user\x20data:','sign-in-paid','\x20more\x20points.','Not\x20enough\x20points.\x20You\x20need\x20','Purchase\x20failed:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>','points','info','not-allowed','RedeemStore','Theme\x20clicked:\x20','none','success','purchase','theme','name','You\x20need\x20','split','userProfiles','Purchase\x20','querySelector','bind','disabled','Need\x20','This\x20theme\x20makes\x20me\x20happy','Emerald\x20City!','Red','toLocaleString','pointer','‚úÖ\x20User\x20authenticated:','You\x20already\x20own\x20this\x20theme','parentNode','classList','forEach','innerHTML','exception','inventory','You\x20already\x20own\x20the\x20','warn','theme_','textContent','\x20is\x20already\x20your\x20current\x20theme','email','You\x20must\x20purchase\x20this\x20theme\x20first','error','transactions','displayName','New\x20user\x20profile\x20created','currentUser','entries','\x20Points','closest','getElementById','Sign\x20in\x20to\x20Purchase'];a47_0x3440=function(){return _0x3d56cb;};return a47_0x3440();}function initAuthListener(){onAuthStateChanged(auth,async _0x283fce=>{const _0x19428a=a47_0x3183;if(_0x283fce){console[_0x19428a(0xad)](_0x19428a(0xd4),_0x283fce['displayName']||_0x283fce['email']);if(authWarning)authWarning['style']['display']=_0x19428a(0xc2);if(storeContainer)storeContainer[_0x19428a(0xb5)][_0x19428a(0xa1)]='block';await loadUserData(_0x283fce),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style'][_0x19428a(0xa1)]='block';if(storeContainer)storeContainer[_0x19428a(0xb5)]['display']=_0x19428a(0xc2);userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x42110a){const _0x228f9f=a47_0x284831;try{const _0x25f447=doc(db,_0x228f9f(0xc9),_0x42110a['uid']),_0x3a1512=await getDoc(_0x25f447);if(_0x3a1512['exists']()){const _0x1875f5=_0x3a1512[_0x228f9f(0xa7)]();userData={'points':_0x1875f5['points']||0x0,'inventory':_0x1875f5['inventory']||[],'isAdmin':_0x1875f5['isAdmin']||![]},pointsDisplay&&(pointsDisplay[_0x228f9f(0xdf)]=userData['points'][_0x228f9f(0xd2)]()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console[_0x228f9f(0xad)]('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log'](_0x228f9f(0xb2)+userData['points']+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items');}else await setDoc(_0x25f447,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x42110a[_0x228f9f(0xe5)]||_0x42110a['email']?.[_0x228f9f(0xc8)]('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay[_0x228f9f(0xdf)]='0'),window['isUserAdmin']=![],console[_0x228f9f(0xad)](_0x228f9f(0xe6));}catch(_0x1c2fad){console['error'](_0x228f9f(0xb7),_0x1c2fad);}}function userOwnsTheme(_0x4bf78c){const _0x374de3=a47_0x284831;if(THEMES[_0x4bf78c]?.[_0x374de3(0xa9)]===0x0)return!![];return userData[_0x374de3(0xdb)]['includes']('theme_'+_0x4bf78c);}async function purchaseTheme(_0x5c0f56){const _0x4320b7=a47_0x284831,_0x329e84=auth[_0x4320b7(0xe7)];if(!_0x329e84)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x51ecd1=THEMES[_0x5c0f56];if(!_0x51ecd1)return console['error']('Theme\x20'+_0x5c0f56+'\x20not\x20found'),![];if(userData['points']<_0x51ecd1['price'])return showMessage(_0x4320b7(0xba)+(_0x51ecd1['price']-userData['points'])+_0x4320b7(0xb9),'error'),![];if(userOwnsTheme(_0x5c0f56))return showMessage(_0x4320b7(0xdc)+_0x51ecd1['name']+'\x20theme',_0x4320b7(0xbe)),![];try{const _0xbee4e3=doc(db,_0x4320b7(0xc9),_0x329e84['uid']),_0x51cd17=await getDoc(_0xbee4e3);if(!_0x51cd17['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x1a0c3f=_0x51cd17[_0x4320b7(0xa7)](),_0x5b76b3=_0x1a0c3f['points']||0x0,_0x48c8b9=_0x1a0c3f['inventory']||[];if(_0x5b76b3<_0x51ecd1[_0x4320b7(0xa9)])return showMessage('Insufficient\x20points','error'),![];if(_0x48c8b9['includes'](_0x4320b7(0xde)+_0x5c0f56))return showMessage(_0x4320b7(0xd5),_0x4320b7(0xbe)),![];const _0x9de882=_0x5b76b3-_0x51ecd1['price'],_0x431bba=[..._0x48c8b9,'theme_'+_0x5c0f56];return await updateDoc(_0xbee4e3,{'points':_0x9de882,'inventory':_0x431bba,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,_0x4320b7(0xe4)),{'userId':_0x329e84['uid'],'userEmail':_0x329e84[_0x4320b7(0xe1)],'itemId':'theme_'+_0x5c0f56,'itemTitle':_0x51ecd1['name']+'\x20Theme','price':_0x51ecd1[_0x4320b7(0xa9)],'type':_0x4320b7(0xc4),'category':_0x4320b7(0xc5),'timestamp':serverTimestamp()}),userData[_0x4320b7(0xbd)]=_0x9de882,userData[_0x4320b7(0xdb)]=_0x431bba,pointsDisplay&&(pointsDisplay[_0x4320b7(0xdf)]=userData['points']['toLocaleString']()),console[_0x4320b7(0xad)]('‚úÖ\x20Purchased\x20'+_0x51ecd1['name']+'\x20theme\x20for\x20'+_0x51ecd1['price']+'\x20points'),!![];}catch(_0x1b8535){return console[_0x4320b7(0xe3)](_0x4320b7(0xbb),_0x1b8535),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}function applyTheme(_0x146bc2){const _0x241b2a=a47_0x284831;if(!userOwnsTheme(_0x146bc2))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0x241b2a(0xe3)),![];return window[_0x241b2a(0xb4)]?(window['ThemeSystem'][_0x241b2a(0xb6)](_0x146bc2),showMessage((THEMES[_0x146bc2]?.[_0x241b2a(0xc6)]||_0x146bc2)+'\x20theme\x20applied!','success'),!![]):(console[_0x241b2a(0xe3)]('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0x5f0424=a47_0x284831,_0x13bb71=document[_0x5f0424(0xcb)]('.themes-grid');if(!_0x13bb71){console['error']('Themes\x20container\x20not\x20found');return;}_0x13bb71['innerHTML']='',Object[_0x5f0424(0xe8)](THEMES)[_0x5f0424(0xd8)](([_0x24600c,_0x672009])=>{const _0x4f13c8=_0x5f0424,_0x41f44f=document['createElement'](_0x4f13c8(0xa6));_0x41f44f[_0x4f13c8(0xaf)]='store-item',_0x41f44f['dataset']['theme']=_0x24600c,_0x41f44f['dataset']['itemId']='theme_'+_0x24600c,_0x41f44f['dataset'][_0x4f13c8(0xa9)]=_0x672009['price'],_0x41f44f[_0x4f13c8(0xd9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x24600c+_0x4f13c8(0xbc)+(_0x672009['price']===0x0?_0x4f13c8(0xa5):_0x672009['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x672009['name']+_0x4f13c8(0xa8)+_0x672009['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x13bb71['appendChild'](_0x41f44f);}),setupThemeButtons();}function setupThemeButtons(){const _0x95105c=document['querySelectorAll']('.theme-select-btn');_0x95105c['forEach'](_0x2893f2=>{const _0x178fc5=a47_0x3183;_0x2893f2[_0x178fc5(0xa2)]('click',async _0x5cf28f=>{const _0x3dc0bc=_0x178fc5;_0x5cf28f['preventDefault']();const _0x33d481=auth[_0x3dc0bc(0xe7)];if(!_0x33d481){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x2fb496=_0x2893f2['closest']('[data-theme]'),_0x42992a=_0x2fb496['dataset'][_0x3dc0bc(0xc5)],_0x514eaf=THEMES[_0x42992a];if(!_0x514eaf){console['error']('Theme\x20'+_0x42992a+'\x20not\x20found');return;}console['log'](_0x3dc0bc(0xc1)+_0x514eaf[_0x3dc0bc(0xc6)]+'\x20('+_0x42992a+')');if(_0x2893f2['disabled']){_0x514eaf[_0x3dc0bc(0xa9)]>0x0&&showMessage(_0x3dc0bc(0xc7)+_0x514eaf['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x2893f2['textContent']==='Current\x20Theme'){showMessage(_0x514eaf[_0x3dc0bc(0xc6)]+_0x3dc0bc(0xe0),_0x3dc0bc(0xbe));return;}if(_0x2893f2['textContent']==='Apply\x20Theme'){applyTheme(_0x42992a),updateThemeButtons();return;}if(_0x2893f2['textContent']['includes']('Buy')){const _0x589475=window['confirm'](_0x3dc0bc(0xca)+_0x514eaf[_0x3dc0bc(0xc6)]+'\x20theme\x20for\x20'+_0x514eaf['price']+'\x20points?');if(!_0x589475)return;const _0x5bd5be=await purchaseTheme(_0x42992a);_0x5bd5be&&(showMessage(_0x514eaf['name']+'\x20theme\x20purchased!',_0x3dc0bc(0xc3)),applyTheme(_0x42992a),updateThemeButtons());return;}userOwnsTheme(_0x42992a)?applyTheme(_0x42992a):showMessage(_0x3dc0bc(0xe2),'error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x3f1bee=a47_0x284831,_0x52d4a5=window[_0x3f1bee(0xb4)]?window['ThemeSystem']['getCurrentTheme']():'default',_0x3d4717=auth[_0x3f1bee(0xe7)];document['querySelectorAll']('.theme-select-btn')['forEach'](_0x5c4d75=>{const _0xc8b426=_0x3f1bee,_0x315612=_0x5c4d75[_0xc8b426(0xea)]('[data-theme]'),_0x13557b=_0x315612['dataset']['theme'],_0x3e94e9=THEMES[_0x13557b];if(!_0x3e94e9)return;_0x5c4d75[_0xc8b426(0xcd)]=![],_0x5c4d75[_0xc8b426(0xb5)]['opacity']='',_0x5c4d75['style']['cursor']=_0xc8b426(0xd3),_0x5c4d75[_0xc8b426(0xd7)][_0xc8b426(0xae)]('current-theme','apply-theme','can-afford',_0xc8b426(0xb3),'sign-in-free','sign-in-paid');if(!_0x3d4717){_0x3e94e9['price']===0x0?(_0x5c4d75[_0xc8b426(0xdf)]='Sign\x20in\x20to\x20Apply',_0x5c4d75['classList'][_0xc8b426(0xa3)]('sign-in-free')):(_0x5c4d75[_0xc8b426(0xdf)]=_0xc8b426(0xec),_0x5c4d75['disabled']=!![],_0x5c4d75[_0xc8b426(0xb5)]['opacity']='0.7',_0x5c4d75['classList'][_0xc8b426(0xa3)](_0xc8b426(0xb8)));return;}if(_0x13557b===_0x52d4a5){_0x5c4d75[_0xc8b426(0xdf)]='Current\x20Theme',_0x5c4d75['classList']['add']('current-theme'),_0x5c4d75['disabled']=!![],_0x5c4d75['style']['cursor']=_0xc8b426(0xaa);return;}if(userOwnsTheme(_0x13557b)){_0x5c4d75['textContent']=_0xc8b426(0xb0),_0x5c4d75['classList'][_0xc8b426(0xa3)]('apply-theme');return;}if(userData[_0xc8b426(0xbd)]>=_0x3e94e9['price']){_0x5c4d75['textContent']='Buy\x20for\x20'+_0x3e94e9['price']+'\x20Points',_0x5c4d75['classList']['add']('can-afford');return;}_0x5c4d75['textContent']=_0xc8b426(0xce)+_0x3e94e9['price']+_0xc8b426(0xe9),_0x5c4d75['classList']['add'](_0xc8b426(0xb3)),_0x5c4d75[_0xc8b426(0xb5)]['opacity']='0.5',_0x5c4d75['disabled']=!![],_0x5c4d75[_0xc8b426(0xb5)]['cursor']=_0xc8b426(0xbf);});}function showMessage(_0x1da235,_0xc3e23='info'){const _0x2e6b4e=document['getElementById']('store-message');_0x2e6b4e&&_0x2e6b4e['remove']();const _0x33fc0d=document['createElement']('div');_0x33fc0d['id']='store-message',_0x33fc0d['className']='store-message\x20store-message-'+_0xc3e23,_0x33fc0d['textContent']=_0x1da235,document['body']['appendChild'](_0x33fc0d),requestAnimationFrame(()=>{_0x33fc0d['classList']['add']('visible');}),setTimeout(()=>{_0x33fc0d['classList']['remove']('visible'),setTimeout(()=>{const _0x4324da=a47_0x3183;_0x33fc0d[_0x4324da(0xd6)]&&_0x33fc0d['remove']();},0x12c);},0xfa0);}window[a47_0x284831(0xc0)]={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log']('üè™\x20Redeem\x20store\x20loaded');