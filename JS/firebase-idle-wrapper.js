const a19_0x125ea5=a19_0x2ea4,a19_0x111d84=(function(){let _0x14f609=!![];return function(_0x392b02,_0x4fd5ab){const _0x28755d=_0x14f609?function(){if(_0x4fd5ab){const _0x1e1020=_0x4fd5ab['apply'](_0x392b02,arguments);return _0x4fd5ab=null,_0x1e1020;}}:function(){};return _0x14f609=![],_0x28755d;};}()),a19_0x33778a=a19_0x111d84(this,function(){const _0x55de42=a19_0x2ea4,_0x28255a=function(){const _0x330973=a19_0x2ea4;let _0x2347e9;try{_0x2347e9=Function('return\x20(function()\x20'+_0x330973(0x158)+');')();}catch(_0xe886f2){_0x2347e9=window;}return _0x2347e9;},_0x35eb2a=_0x28255a(),_0x3db5fe=_0x35eb2a['console']=_0x35eb2a['console']||{},_0xffcca1=['log','warn','info',_0x55de42(0x15d),'exception','table','trace'];for(let _0x54cd62=0x0;_0x54cd62<_0xffcca1['length'];_0x54cd62++){const _0x197b46=a19_0x111d84['constructor']['prototype']['bind'](a19_0x111d84),_0x1a1ad8=_0xffcca1[_0x54cd62],_0x227d99=_0x3db5fe[_0x1a1ad8]||_0x197b46;_0x197b46['__proto__']=a19_0x111d84['bind'](a19_0x111d84),_0x197b46[_0x55de42(0x131)]=_0x227d99['toString'][_0x55de42(0x150)](_0x227d99),_0x3db5fe[_0x1a1ad8]=_0x197b46;}});a19_0x33778a();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this['debug']=![];}[a19_0x125ea5(0x14c)](){const _0x4561bd=a19_0x125ea5;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0x4561bd(0x139)+this['blockedOperations']+_0x4561bd(0x156)),![];if(window[_0x4561bd(0x14e)]===!![])return console[_0x4561bd(0x130)](_0x4561bd(0x153)),![];return!![];}async['safeOperation'](_0x2c6477,_0xcf6d95,..._0x56acdd){const _0x3c6923=a19_0x125ea5;if(!this['checkSessionActive']()){const _0x3ce84e=_0xcf6d95+'-'+Date['now']()+'-'+Math[_0x3c6923(0x155)]()[_0x3c6923(0x131)](0x24)['substring'](0x2,0x9);return this[_0x3c6923(0x136)]['set'](_0x3ce84e,{'operation':_0x2c6477,'operationType':_0xcf6d95,'args':_0x56acdd}),!this[_0x3c6923(0x14f)]&&(this['pendingTimeout']=setTimeout(()=>{const _0x11ca3a=_0x3c6923;this['pendingOperations']['clear'](),this[_0x11ca3a(0x14f)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x2c6477(..._0x56acdd);}catch(_0x176716){if(_0x176716['code']==='unavailable'||_0x176716[_0x3c6923(0x142)]===_0x3c6923(0x148)||_0x176716['message']&&_0x176716['message']['includes']('network'))return handleNetworkError(),null;throw _0x176716;}}async[a19_0x125ea5(0x141)](_0x4bcd0d){return this['safeOperation'](getDoc,'get',_0x4bcd0d);}async['getDocuments'](_0x377c1d){return this['safeOperation'](getDocs,'query',_0x377c1d);}async['addDocument'](_0x5bdffe,_0x3691b3){return this['safeOperation'](addDoc,'add',_0x5bdffe,_0x3691b3);}async['setDocument'](_0x185fc2,_0x5262c3,_0x2d3886={}){return this['safeOperation'](setDoc,'set',_0x185fc2,_0x5262c3,_0x2d3886);}async['updateDocument'](_0x1fa287,_0x224707){return this['safeOperation'](updateDoc,'update',_0x1fa287,_0x224707);}async['deleteDocument'](_0x52a622){const _0x4d26e6=a19_0x125ea5;return this[_0x4d26e6(0x143)](deleteDoc,'delete',_0x52a622);}[a19_0x125ea5(0x133)](){const _0xde7f3=a19_0x125ea5;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners'][_0xde7f3(0x15f)]),this[_0xde7f3(0x13a)]=new Map(this[_0xde7f3(0x151)]),this[_0xde7f3(0x151)][_0xde7f3(0x138)]((_0xe12c78,_0x14beca)=>{const _0x64ebbe=_0xde7f3;console[_0x64ebbe(0x130)]('[FirebaseIdle]\x20Suspending\x20listener:',_0x14beca);if(typeof _0xe12c78==='function')try{_0xe12c78(),console[_0x64ebbe(0x130)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x14beca);}catch(_0x1801ad){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x14beca,_0x1801ad);}}),this['activeListeners']['clear']();if(this['debug']){const _0x447033=document['createElement']('div');_0x447033['id']='firebase-suspend-indicator',_0x447033['style'][_0xde7f3(0x152)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x447033['textContent']=_0xde7f3(0x160),document['body'][_0xde7f3(0x15c)](_0x447033);}console[_0xde7f3(0x130)](_0xde7f3(0x146));}['resumeAllListeners'](){const _0x1be008=a19_0x125ea5;if(!this['_suspendedListeners']||this['_suspendedListeners'][_0x1be008(0x15f)]===0x0){console[_0x1be008(0x130)]('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this[_0x1be008(0x13a)]['size']),this[_0x1be008(0x13a)]['forEach']((_0x5089a0,_0x385d4e)=>{const _0x1484c0=_0x1be008;console[_0x1484c0(0x130)](_0x1484c0(0x13f),_0x385d4e);try{if(typeof _0x5089a0==='function'){console[_0x1484c0(0x15a)](_0x1484c0(0x147),_0x385d4e);return;}const {query:_0x11a326,callback:_0x51a435,options:_0x53335f}=_0x5089a0;if(_0x11a326&&_0x51a435){const _0x9e5e8b=onSnapshot(_0x11a326,_0x51a435,_0x53335f||{});this['activeListeners']['set'](_0x385d4e,_0x9e5e8b),console[_0x1484c0(0x130)](_0x1484c0(0x13e),_0x385d4e);}}catch(_0x45737a){console[_0x1484c0(0x15d)]('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x385d4e,_0x45737a);}}),this['_suspendedListeners']['clear']();const _0x262b9b=document['getElementById']('firebase-suspend-indicator');_0x262b9b&&_0x262b9b[_0x1be008(0x134)](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x274060,_0x1b0883,_0x187149={},_0x59b067=null){const _0x59362e=a19_0x125ea5,_0x15be05=_0x59b067||_0x59362e(0x14b)+Date['now']()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x15be05);if(!this['checkSessionActive']())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x15be05),()=>{};try{const _0x3894e2=onSnapshot(_0x274060,_0x1b0883,_0x187149);return this['activeListeners'][_0x59362e(0x15e)](_0x15be05,{'unsubscribe':_0x3894e2,'query':_0x274060,'callback':_0x1b0883,'options':_0x187149}),this[_0x59362e(0x135)]&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x15be05),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size'])),()=>{const _0x46390e=_0x59362e;this['debug']&&console[_0x46390e(0x130)]('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x15be05);try{_0x3894e2(),this['activeListeners'][_0x46390e(0x13c)](_0x15be05),this['debug']&&(console['log'](_0x46390e(0x140)+_0x15be05),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x4243de){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x15be05+':',_0x4243de);}};}catch(_0x2e77f1){return console['error'](_0x59362e(0x145)+_0x15be05+':',_0x2e77f1),()=>{};}}['executePendingOperations'](_0x5d9684='all'){const _0x2e6c32=a19_0x125ea5;console['log'](_0x2e6c32(0x13b)+_0x5d9684+'\x20operations:\x20'+this[_0x2e6c32(0x136)][_0x2e6c32(0x15f)]+_0x2e6c32(0x14a));const _0x5f6e9f=new Map(this['pendingOperations']);this[_0x2e6c32(0x136)]['clear'](),_0x5f6e9f['forEach']((_0x12786b,_0x5b68c3)=>{const _0x2e35f2=_0x2e6c32;_0x5d9684==='all'||_0x12786b['operationType']===_0x5d9684?(console[_0x2e35f2(0x130)]('Executing\x20delayed\x20'+_0x12786b['operationType']+'\x20operation'),this[_0x2e35f2(0x143)](_0x12786b['operation'],_0x12786b[_0x2e35f2(0x132)],..._0x12786b['args'])['catch'](_0x22fe6d=>console['error']('Error\x20executing\x20pending\x20operation:',_0x22fe6d))):this[_0x2e35f2(0x136)]['set'](_0x5b68c3,_0x12786b);});}['enableDebug'](_0x594a28=!![]){const _0x27344e=a19_0x125ea5;this['debug']=_0x594a28,console['log'](_0x27344e(0x15b)+(_0x594a28?_0x27344e(0x137):'disabled'));if(_0x594a28){const _0x46f42a=window[_0x27344e(0x149)];window['RDL_SESSION_SUSPENDED']=!![],console['log'](_0x27344e(0x13d)),this[_0x27344e(0x141)](doc(db,'system',_0x27344e(0x144)))[_0x27344e(0x159)](_0x2f80ef=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x2f80ef);})[_0x27344e(0x14d)](_0x492ea3=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x492ea3);})['finally'](()=>{const _0x4370dd=_0x27344e;console[_0x4370dd(0x130)]('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window[_0x4370dd(0x149)]=_0x46f42a;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x1ef593=a19_0x125ea5,_0x3ace15=window['suspendSession']||function(){},_0x40859a=window['resumeSession']||function(){};window['suspendSession']=function(){const _0x33eddc=a19_0x2ea4;_0x3ace15(),firebaseIdle[_0x33eddc(0x133)]();},window[_0x1ef593(0x154)]=function(){const _0x506d23=_0x1ef593;_0x40859a(),firebaseIdle[_0x506d23(0x157)]();};}function a19_0x4bab(){const _0x357eb9=['log','toString','operationType','suspendAllListeners','remove','debug','pendingOperations','enabled','forEach','[FirebaseIdle]\x20Blocked\x20','_suspendedListeners','Executing\x20pending\x20','delete','[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...','[FirebaseIdle]\x20Successfully\x20resumed\x20listener:','[FirebaseIdle]\x20Resuming\x20listener:','[FirebaseIdle]\x20Listener\x20removed:\x20','getDocument','code','safeOperation','test','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','[FirebaseIdle]\x20All\x20listeners\x20suspended','[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:','resource-exhausted','RDL_SESSION_SUSPENDED','\x20total\x20operations','listener_','checkSessionActive','catch','RDL_NETWORK_ERROR','pendingTimeout','bind','activeListeners','cssText','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error','resumeSession','random','\x20operations\x20during\x20idle\x20state','resumeAllListeners','{}.constructor(\x22return\x20this\x22)(\x20)','then','warn','[FirebaseIdle]\x20Debug\x20mode\x20','appendChild','error','set','size','Firebase:\x20Suspended'];a19_0x4bab=function(){return _0x357eb9;};return a19_0x4bab();}function a19_0x2ea4(_0x4924fc,_0x2d8644){const _0x33778a=a19_0x4bab();return a19_0x2ea4=function(_0x111d84,_0x5ce8f7){_0x111d84=_0x111d84-0x130;let _0x4baba9=_0x33778a[_0x111d84];return _0x4baba9;},a19_0x2ea4(_0x4924fc,_0x2d8644);}export default firebaseIdle;