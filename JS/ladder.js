const a25_0x30a361=a25_0x431a,a25_0x4b5518=(function(){let _0x7e387c=!![];return function(_0x4ee93e,_0x2e0c2b){const _0xe1219b=_0x7e387c?function(){if(_0x2e0c2b){const _0x32a2af=_0x2e0c2b['apply'](_0x4ee93e,arguments);return _0x2e0c2b=null,_0x32a2af;}}:function(){};return _0x7e387c=![],_0xe1219b;};}()),a25_0x45f8f8=a25_0x4b5518(this,function(){const _0x19c50b=a25_0x431a;let _0x5b1290;try{const _0x3ea0e9=Function(_0x19c50b(0x182)+_0x19c50b(0x11e)+');');_0x5b1290=_0x3ea0e9();}catch(_0x5a21b0){_0x5b1290=window;}const _0x531c8b=_0x5b1290[_0x19c50b(0x18e)]=_0x5b1290['console']||{},_0xc8e947=['log','warn','info','error',_0x19c50b(0x17c),'table','trace'];for(let _0x1c8a00=0x0;_0x1c8a00<_0xc8e947['length'];_0x1c8a00++){const _0x59dd39=a25_0x4b5518[_0x19c50b(0x173)][_0x19c50b(0x196)][_0x19c50b(0x16c)](a25_0x4b5518),_0x5d170c=_0xc8e947[_0x1c8a00],_0x12e668=_0x531c8b[_0x5d170c]||_0x59dd39;_0x59dd39['__proto__']=a25_0x4b5518[_0x19c50b(0x16c)](a25_0x4b5518),_0x59dd39['toString']=_0x12e668['toString'][_0x19c50b(0x16c)](_0x12e668),_0x531c8b[_0x5d170c]=_0x59dd39;}});a25_0x45f8f8();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];function a25_0x28b7(){const _0xad0306=['d2-switch','Error\x20fetching\x20tokens:','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','{}.constructor(\x22return\x20this\x22)(\x20)','D3\x20toggle\x20clicked','loading-indicator','player','admin-only-message','gray','duos','now','timestamp','active','get','totalKills','fontWeight','addEventListener','#b9f1fc','Silver','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>','forEach','\x20displaying\x20token:\x20','data','join','matches','includes','createElement','opacity','losses','approvedMatches','tokenName','Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','change','creative\x20lead','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','Inactive','),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','classList','click','getElementById','position','then','%</td>\x0a\x20\x20\x20\x20</tr>','loserUsername','error','country','equipped','Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents','#ladder\x20tbody','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','textContent','username','remove','admin@ladder.com','playersD2','sort','innerHTML','Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents','kda','querySelector','title','loserScore','toFixed','docs','none',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','exists','newEloRating',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#CD7F32','(Equipped)','Error\x20finding\x20recommended\x20opponent','winRate','pointer','totalMatches','#ladder\x20thead\x20tr','teammate','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#','d2-ladder-container','bind','role','userProfiles','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','elo-recommendation-text-d2','currentUser','wins','constructor','className','preventDefault','previousElo','abs','Duos\x20ladder\x20is\x20currently\x20admin-only','elo-recommendation-text-d1','email','#50C878','exception','length','elo-recommendation-text-d3','color','Error\x20checking\x20','toLowerCase','return\x20(function()\x20','display','empty','0.5','DOMContentLoaded','max','log','block','players','duos-switch','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','desc','console','function','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20','Based\x20on\x20your\x20ELO\x20(','checked','style','<img\x20src=\x22../images/flags/','prototype','find','totalDeaths','inactive','playersDuos','#FFD700','eloRating','visibility','elo-recommendation-text-duos','cursor'];a25_0x28b7=function(){return _0xad0306;};return a25_0x28b7();}export async function loadLadderData(_0x41c4ea=0x1){const _0x3de81f=a25_0x431a;try{document['getElementById'](_0x3de81f(0x120))['style']['display']='block';const _0x5ef1d0=await getLadderData(_0x41c4ea);_0x5ef1d0[_0x3de81f(0x153)]((_0x3ca017,_0x195d19)=>_0x195d19['elo']-_0x3ca017['elo']);const _0x49cc2c=_0x5ef1d0['map'](_0x3479da=>_0x3479da['id']),_0xfeb786=await getEloHistoryBatch(_0x49cc2c,_0x41c4ea),_0x5e359f=_0x5ef1d0['map']((_0x10ee1d,_0x54d770)=>{const _0x468db2=_0x3de81f,_0x27b368=_0xfeb786[_0x10ee1d['id']]||[],_0x1aa06e=_0x27b368[_0x468db2(0x153)]((_0xc7f8a7,_0x10751c)=>new Date(_0x10751c['date'])-new Date(_0xc7f8a7['date']))['slice'](0x0,0x5);return{..._0x10ee1d,'rank':_0x54d770+0x1,'lastMatches':_0x1aa06e,'recentActivity':_0x1aa06e[_0x468db2(0x17d)]>0x0};});renderLadder(_0x5e359f),setupRealTimeUpdates(_0x41c4ea);}catch(_0x487768){console['error']('Error\x20loading\x20ladder\x20data:',_0x487768),document['getElementById']('error-message')['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document[_0x3de81f(0x142)]('loading-indicator')[_0x3de81f(0x194)]['display']='none';}}function setupRealTimeUpdates(_0x3f5608=0x1){const _0x3b7828=a25_0x431a;activeListeners[_0x3b7828(0x12f)](_0x1469b3=>_0x1469b3()),activeListeners=[];const _0x31475b=_0x3f5608===0x1?'players':'playersD'+_0x3f5608,_0x25c188=_0x3f5608===0x1?_0x3b7828(0x133):'matchesD'+_0x3f5608,_0x4121be=new Date();_0x4121be['setDate'](_0x4121be['getDate']()-0x1);const _0x2011c9=setupEfficientListener(_0x25c188,[where('date','>=',_0x4121be['toISOString']()),limit(0xa),orderBy('date','desc')],async _0x5904fc=>{const _0x52e79b=_0x3b7828;_0x5904fc[_0x52e79b(0x17d)]>0x0&&await loadLadderData(_0x3f5608);});activeListeners['push'](_0x2011c9);}export function cleanupListeners(){activeListeners['forEach'](_0x511b7f=>_0x511b7f()),activeListeners=[];}function renderLadder(_0x27bad4){const _0x191663=a25_0x431a,_0x3db19a=document['getElementById']('ladder-container');_0x3db19a[_0x191663(0x154)]='',_0x27bad4[_0x191663(0x12f)](_0x102fc4=>{const _0x5a5e90=_0x191663,_0x414523=document[_0x5a5e90(0x135)]('div');_0x414523[_0x5a5e90(0x174)]='ladder-player',_0x414523['innerHTML']=_0x5a5e90(0x16a)+_0x102fc4['rank']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x102fc4['username']||_0x102fc4['id'])+_0x5a5e90(0x190)+_0x102fc4['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x102fc4['recentActivity']?'active':_0x5a5e90(0x199))+_0x5a5e90(0x16f)+(_0x102fc4['recentActivity']?'Active':_0x5a5e90(0x13e))+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x3db19a['appendChild'](_0x414523);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x4afbc2=![]){const _0x5de18e=a25_0x431a,_0x2437e7=document[_0x5de18e(0x157)](_0x5de18e(0x14b));if(!_0x2437e7){console[_0x5de18e(0x147)]('Ladder\x20table\x20body\x20not\x20found');return;}_0x2437e7[_0x5de18e(0x154)]=_0x5de18e(0x12e);try{const _0x234d62=Date[_0x5de18e(0x125)]();if(!_0x4afbc2&&playerCache[_0x5de18e(0x131)]&&_0x234d62-playerCache[_0x5de18e(0x126)]<CACHE_DURATION){console[_0x5de18e(0x188)]('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache[_0x5de18e(0x131)]);return;}const _0x5b0404=collection(db,'players'),_0x147d97=await getDocs(_0x5b0404),_0xc1a7c4=[];_0x147d97['forEach'](_0x40d641=>{const _0x2cddd9=_0x5de18e,_0x115921=_0x40d641['data']();_0xc1a7c4['push']({..._0x115921,'id':_0x40d641['id'],'elo':_0x115921['eloRating']||0x0,'position':_0x115921[_0x2cddd9(0x143)]||Number['MAX_SAFE_INTEGER']});});const _0x37ea21=collection(db,_0x5de18e(0x16e)),_0x2adb38=await getDocs(_0x37ea21),_0xda7b7a=new Map();_0x2adb38['forEach'](_0x4d49b9=>{const _0x4cc904=_0x5de18e,_0x5ea8ac=_0x4d49b9['data']();_0x5ea8ac[_0x4cc904(0x14f)]&&_0xda7b7a['set'](_0x5ea8ac[_0x4cc904(0x14f)]['toLowerCase'](),_0x5ea8ac);}),_0xc1a7c4[_0x5de18e(0x12f)](_0x3168df=>{const _0x2e671b=_0x5de18e,_0x52d641=_0x3168df['username']?.['toLowerCase']();if(_0x52d641&&_0xda7b7a['has'](_0x52d641)){const _0x1e547b=_0xda7b7a['get'](_0x52d641);_0x1e547b['country']&&(_0x3168df[_0x2e671b(0x148)]=_0x1e547b['country']['toLowerCase']());}});const _0x1d18f3=_0xc1a7c4['map'](_0x1961a6=>_0x1961a6[_0x5de18e(0x14f)]),_0x3de707=await fetchBatchMatchStats(_0x1d18f3);_0xc1a7c4['sort']((_0x529322,_0x3184a0)=>{const _0x1e79ec=_0x5de18e,_0x3641f3=_0x3de707[_0x1e79ec(0x128)](_0x529322['username'])?.[_0x1e79ec(0x167)]||0x0,_0x9a8f69=_0x3de707['get'](_0x3184a0['username'])?.['totalMatches']||0x0;if(_0x3641f3===0x0!==(_0x9a8f69===0x0))return _0x3641f3===0x0?0x1:-0x1;return(_0x529322['position']||0x3e7)-(_0x3184a0['position']||0x3e7);}),_0xc1a7c4['forEach']((_0x2c2a49,_0x51810f)=>{_0x2c2a49['position']=_0x51810f+0x1;}),playerCache['data']=_0xc1a7c4,playerCache[_0x5de18e(0x126)]=_0x234d62,updateLadderDisplay(_0xc1a7c4,_0x3de707);}catch(_0x5efb65){console['error']('Error\x20loading\x20ladder:',_0x5efb65),_0x2437e7[_0x5de18e(0x154)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x5efb65['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x4c8e69){const _0x2e3d20=a25_0x431a,_0x1c7c22=new Map();try{_0x4c8e69['forEach'](_0x3ae6bb=>{_0x1c7c22['set'](_0x3ae6bb,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x1b424c=collection(db,_0x2e3d20(0x138)),_0x53f7c7=await getDocs(_0x1b424c);_0x53f7c7[_0x2e3d20(0x12f)](_0x5156db=>{const _0x3d6893=_0x2e3d20,_0x1ea533=_0x5156db['data'](),_0x4535f4=_0x1ea533['winnerUsername'],_0x543ede=_0x1ea533[_0x3d6893(0x146)];if(_0x4c8e69[_0x3d6893(0x134)](_0x4535f4)){const _0x68cc33=_0x1c7c22['get'](_0x4535f4);_0x68cc33['wins']++,_0x68cc33[_0x3d6893(0x167)]++,_0x68cc33[_0x3d6893(0x129)]+=parseInt(_0x1ea533['winnerScore'])||0x0,_0x68cc33['totalDeaths']+=parseInt(_0x1ea533[_0x3d6893(0x159)])||0x0;}if(_0x4c8e69['includes'](_0x543ede)){const _0x53f044=_0x1c7c22['get'](_0x543ede);_0x53f044['losses']++,_0x53f044['totalMatches']++,_0x53f044['totalKills']+=parseInt(_0x1ea533['loserScore'])||0x0,_0x53f044['totalDeaths']+=parseInt(_0x1ea533['winnerScore'])||0x0;}}),_0x4c8e69['forEach'](_0x115452=>{const _0x18b2d3=_0x2e3d20,_0x555644=_0x1c7c22['get'](_0x115452);_0x555644[_0x18b2d3(0x156)]=_0x555644['totalDeaths']>0x0?(_0x555644['totalKills']/_0x555644[_0x18b2d3(0x198)])[_0x18b2d3(0x15a)](0x2):_0x555644['totalKills']['toFixed'](0x2),_0x555644[_0x18b2d3(0x165)]=_0x555644[_0x18b2d3(0x167)]>0x0?(_0x555644['wins']/_0x555644['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x1e3542){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x1e3542);}return _0x1c7c22;}function createPlayerRow(_0x4356a3,_0x466329){const _0x313df1=a25_0x431a,_0x2ca8e9=parseFloat(_0x4356a3['elo'])||0x0;let _0x283f81='gray';if(_0x2ca8e9>=0x7d0)_0x283f81=_0x313df1(0x17b);else{if(_0x2ca8e9>=0x708)_0x283f81='#FFD700';else{if(_0x2ca8e9>=0x640)_0x283f81=_0x313df1(0x12c);else _0x2ca8e9>=0x578&&(_0x283f81='#CD7F32');}}let _0x204da6='';return _0x4356a3['country']&&(_0x204da6='<img\x20src=\x22../images/flags/'+_0x4356a3['country']['toLowerCase']()+_0x313df1(0x14c)+_0x4356a3['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x313df1(0x11c)+_0x4356a3['position']+_0x313df1(0x15e)+encodeURIComponent(_0x4356a3[_0x313df1(0x14f)])+_0x313df1(0x11d)+_0x283f81+_0x313df1(0x161)+_0x4356a3['username']+_0x313df1(0x14d)+_0x204da6+_0x313df1(0x13d)+_0x283f81+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x2ca8e9+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x466329['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x466329[_0x313df1(0x172)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x466329['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x466329['kda']+_0x313df1(0x18c)+_0x466329['winRate']+_0x313df1(0x145);}function getPlayerRankName(_0x2033ab){const _0x57ffec=a25_0x431a;if(_0x2033ab>=0x7d0)return'Emerald';if(_0x2033ab>=0x708)return'Gold';if(_0x2033ab>=0x640)return _0x57ffec(0x12d);if(_0x2033ab>=0x578)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x421538){const _0x7794b=a25_0x431a,_0x5f448a=new Map();_0x421538['forEach'](_0x5bf2dd=>{_0x5f448a['set'](_0x5bf2dd,0x0);});try{const _0x348d4a=collection(db,'players'),_0xefd08c=await getDocs(_0x348d4a),_0xc5aebb=new Map(),_0x28827f=new Map();_0xefd08c[_0x7794b(0x12f)](_0x462e50=>{const _0x44abc1=_0x7794b,_0xdbbf37=_0x462e50['data']();_0xdbbf37[_0x44abc1(0x14f)]&&(_0xc5aebb['set'](_0x462e50['id'],_0xdbbf37['username']),_0x28827f['set'](_0xdbbf37[_0x44abc1(0x14f)]['toLowerCase'](),_0x462e50['id']));});const _0x5f1ce8=collection(db,'eloHistory'),_0x3011df=query(_0x5f1ce8,orderBy('timestamp',_0x7794b(0x18d)),limit(0x12c)),_0x5aad43=await getDocs(_0x3011df);if(_0x5aad43[_0x7794b(0x184)])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x5f448a;if(_0x5aad43['docs'][_0x7794b(0x17d)]>0x0){const _0x31f6cc=_0x5aad43[_0x7794b(0x15b)][0x0]['data']();if(_0x31f6cc['player']&&_0xc5aebb['has'](_0x31f6cc['player'])){}}const _0x10ea9c=new Map();let _0x17fe48=0x0;_0x5aad43['forEach'](_0x25a998=>{const _0xca0d26=_0x7794b,_0x1fa41c=_0x25a998['data']();let _0x5b7356=null;if(_0x1fa41c['player']&&_0xc5aebb['has'](_0x1fa41c['player']))_0x5b7356=_0xc5aebb['get'](_0x1fa41c[_0xca0d26(0x121)]);else{if(_0x1fa41c[_0xca0d26(0x14f)]&&_0x28827f['has'](_0x1fa41c['username']['toLowerCase']()))_0x5b7356=_0x1fa41c[_0xca0d26(0x14f)];else _0x1fa41c['playerUsername']&&_0x28827f['has'](_0x1fa41c['playerUsername']['toLowerCase']())&&(_0x5b7356=_0x1fa41c['playerUsername']);}_0x5b7356&&_0x421538['includes'](_0x5b7356)&&(_0x17fe48++,!_0x10ea9c['has'](_0x5b7356)&&_0x10ea9c['set'](_0x5b7356,[]),_0x10ea9c['get'](_0x5b7356)['push']({..._0x1fa41c,'timestamp':_0x1fa41c[_0xca0d26(0x126)]?.['seconds']||0x0}));}),_0x10ea9c[_0x7794b(0x12f)]((_0x2e2fb7,_0x1aea33)=>{const _0x5b224d=_0x7794b;if(_0x2e2fb7[_0x5b224d(0x17d)]>0x0){_0x2e2fb7['sort']((_0x38c90c,_0x7198bf)=>_0x7198bf['timestamp']-_0x38c90c['timestamp']);const _0x1808f1=_0x2e2fb7['find'](_0x27e0db=>_0x27e0db['change']!==undefined||_0x27e0db['newElo']!==undefined&&_0x27e0db['previousElo']!==undefined||_0x27e0db[_0x5b224d(0x160)]!==undefined&&_0x27e0db['oldEloRating']!==undefined);if(_0x1808f1){let _0x358acf;if(_0x1808f1['change']!==undefined)_0x358acf=parseInt(_0x1808f1['change']);else{if(_0x1808f1['newElo']!==undefined&&entry[_0x5b224d(0x176)]!==undefined)_0x358acf=parseInt(_0x1808f1['newElo'])-parseInt(_0x1808f1['previousElo']);else _0x1808f1['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x358acf=parseInt(_0x1808f1[_0x5b224d(0x160)])-parseInt(_0x1808f1['oldEloRating']));}!isNaN(_0x358acf)&&_0x358acf!==0x0&&_0x5f448a['set'](_0x1aea33,_0x358acf);}}});}catch(_0x50762c){console['error']('Error\x20fetching\x20ELO\x20history:',_0x50762c);}return _0x5f448a;}function createPlayerRowWithToken(_0x42b035,_0x3b5e6a,_0xe17f25){const _0x6c01dd=a25_0x431a,_0x4acecd=parseFloat(_0x42b035['elo'])||0x0;let _0xa310c4=_0x6c01dd(0x123);if(_0x4acecd>=0x7d0)_0xa310c4='#50C878';else{if(_0x4acecd>=0x708)_0xa310c4=_0x6c01dd(0x19b);else{if(_0x4acecd>=0x640)_0xa310c4=_0x6c01dd(0x12c);else _0x4acecd>=0x578&&(_0xa310c4='#CD7F32');}}let _0x2b88d4='';_0x42b035['country']&&(_0x2b88d4=_0x6c01dd(0x195)+_0x42b035['country'][_0x6c01dd(0x181)]()+_0x6c01dd(0x14c)+_0x42b035['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x1df049='';return _0xe17f25&&(_0x1df049='<img\x20src=\x22'+_0xe17f25['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0xe17f25[_0x6c01dd(0x139)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0xe17f25['tokenName']+'\x20'+(_0xe17f25['equipped']?_0x6c01dd(0x163):'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x42b035['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x42b035['username'])+_0x6c01dd(0x11d)+_0xa310c4+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x42b035[_0x6c01dd(0x14f)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2b88d4+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1df049+_0x6c01dd(0x13d)+_0xa310c4+_0x6c01dd(0x15d)+_0x4acecd+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b5e6a['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b5e6a['wins']+_0x6c01dd(0x18c)+_0x3b5e6a[_0x6c01dd(0x137)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b5e6a['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b5e6a[_0x6c01dd(0x165)]+_0x6c01dd(0x145);}function a25_0x431a(_0x4d9b6d,_0x399b7e){const _0x45f8f8=a25_0x28b7();return a25_0x431a=function(_0x4b5518,_0x225181){_0x4b5518=_0x4b5518-0x11a;let _0x28b715=_0x45f8f8[_0x4b5518];return _0x28b715;},a25_0x431a(_0x4d9b6d,_0x399b7e);}async function updateLadderDisplay(_0x5cae49,_0x392662=null){const _0x61ff84=a25_0x431a,_0x3be439=document[_0x61ff84(0x157)]('#ladder\x20tbody');if(!_0x3be439){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x696a81=document[_0x61ff84(0x157)](_0x61ff84(0x168));_0x696a81&&(_0x696a81['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x53829b=_0x5cae49['map'](_0x1adca8=>_0x1adca8['username']);!_0x392662&&(_0x392662=await fetchBatchMatchStats(_0x53829b));let _0x34b443=new Map();try{typeof clearTokenCache===_0x61ff84(0x18f)&&clearTokenCache(),_0x34b443=await getTokensByUsernames(_0x53829b),console['log']('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x34b443['size'],'players'),_0x34b443['forEach']((_0x3f5222,_0x1e1bb7)=>{const _0x3ba988=_0x61ff84,_0x45398f=_0x3f5222[_0x3ba988(0x197)](_0x413d9b=>_0x413d9b[_0x3ba988(0x149)]);_0x45398f&&console[_0x3ba988(0x188)]('ðŸŽ¯\x20'+_0x1e1bb7+'\x20has\x20equipped:\x20'+_0x45398f[_0x3ba988(0x139)]);});}catch(_0x3be9fb){console['error'](_0x61ff84(0x11b),_0x3be9fb);}const _0x2bc9a6=_0x5cae49['map'](_0x32d629=>{const _0x1d5c8c=_0x61ff84,_0x5bc39e=_0x392662['get'](_0x32d629['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x23cf75=_0x34b443['get'](_0x32d629['username'])||[],_0x1cd038=getPrimaryDisplayToken(_0x23cf75);return _0x1cd038&&console['log']('ðŸŽ¨\x20'+_0x32d629['username']+_0x1d5c8c(0x130)+_0x1cd038['tokenName']+'\x20(equipped:\x20'+_0x1cd038[_0x1d5c8c(0x149)]+')'),createPlayerRowWithToken(_0x32d629,_0x5bc39e,_0x1cd038);})[_0x61ff84(0x132)]('');_0x3be439['innerHTML']=_0x2bc9a6,getPlayersLastEloChanges(_0x53829b)[_0x61ff84(0x144)](_0x2681bd=>{const _0x3d284e=_0x61ff84,_0x4e385a=new Map();_0x3be439['querySelectorAll']('tr')[_0x3d284e(0x12f)]((_0x38f2b3,_0x3c4ceb)=>{_0x3c4ceb<_0x53829b['length']&&_0x4e385a['set'](_0x53829b[_0x3c4ceb],_0x38f2b3);}),_0x2681bd[_0x3d284e(0x12f)]((_0x53117f,_0x1ee6f4)=>{const _0x58cf9b=_0x3d284e,_0x2727ff=_0x4e385a['get'](_0x1ee6f4);if(_0x2727ff&&_0x53117f!==0x0){const _0x25f633=_0x2727ff['querySelector']('td:nth-child(3)');if(_0x25f633){const _0x4af58a=_0x53117f>0x0?'+'+_0x53117f:''+_0x53117f,_0x23c343=_0x25f633['querySelector']('.trend-indicator');_0x23c343&&(_0x23c343[_0x58cf9b(0x14e)]=_0x4af58a,_0x23c343['style'][_0x58cf9b(0x17f)]=_0x53117f>0x0?'#4CAF50':'#F44336',_0x23c343[_0x58cf9b(0x194)][_0x58cf9b(0x12a)]='bold',_0x23c343['style']['fontSize']='0.85em',_0x23c343['style']['display']='inline',_0x23c343[_0x58cf9b(0x194)][_0x58cf9b(0x19d)]='visible',_0x23c343['style'][_0x58cf9b(0x136)]='1');}}});})['catch'](_0x400763=>console[_0x61ff84(0x147)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x400763));}function initLadderToggles(){const _0xa98c05=a25_0x431a,_0x3044ac=document[_0xa98c05(0x142)]('d1-switch'),_0x33d448=document['getElementById'](_0xa98c05(0x11a)),_0x30d3a5=document['getElementById']('d3-switch'),_0x303936=document['getElementById'](_0xa98c05(0x18b)),_0x3720fa=document['getElementById']('d1-ladder-container'),_0x384475=document['getElementById']('d2-ladder-container'),_0x7ee013=document[_0xa98c05(0x142)]('d3-ladder-container'),_0x458e36=document['getElementById']('duos-ladder-container');function _0x19254f(){const _0x13ca04=_0xa98c05;if(_0x3720fa)_0x3720fa['classList']['remove']('active');if(_0x384475)_0x384475['classList']['remove'](_0x13ca04(0x127));if(_0x7ee013)_0x7ee013[_0x13ca04(0x140)][_0x13ca04(0x150)]('active');if(_0x458e36)_0x458e36['style']['display']='none';if(_0x3720fa)_0x3720fa['style']['display']='none';if(_0x384475)_0x384475['style']['display']='none';if(_0x7ee013)_0x7ee013['style']['display']='none';}_0x3044ac&&_0x3044ac['addEventListener']('click',()=>{const _0x38ca0f=_0xa98c05;console['log']('D1\x20toggle\x20clicked'),_0x19254f();_0x3720fa&&(_0x3720fa['classList']['add']('active'),_0x3720fa[_0x38ca0f(0x194)][_0x38ca0f(0x183)]='block');document['getElementById'](_0x38ca0f(0x179))['style'][_0x38ca0f(0x183)]=_0x38ca0f(0x189),document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x38ca0f(0x15c),document['getElementById']('elo-recommendation-text-d3')[_0x38ca0f(0x194)][_0x38ca0f(0x183)]='none';if(_0x3044ac)_0x3044ac['classList']['add']('active');if(_0x33d448)_0x33d448[_0x38ca0f(0x140)][_0x38ca0f(0x150)](_0x38ca0f(0x127));if(_0x30d3a5)_0x30d3a5['classList']['remove'](_0x38ca0f(0x127));displayLadder(),findBestOpponent('d1');}),_0x33d448&&_0x33d448['addEventListener'](_0xa98c05(0x141),()=>{const _0xa74346=_0xa98c05;console['log']('D2\x20toggle\x20clicked'),_0x19254f();_0x384475&&(_0x384475[_0xa74346(0x140)]['add'](_0xa74346(0x127)),_0x384475['style']['display']=_0xa74346(0x189));document[_0xa74346(0x142)](_0xa74346(0x179))['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')[_0xa74346(0x194)]['display']='block',document['getElementById'](_0xa74346(0x17e))['style'][_0xa74346(0x183)]=_0xa74346(0x15c);if(_0x33d448)_0x33d448['classList']['add']('active');if(_0x3044ac)_0x3044ac['classList'][_0xa74346(0x150)](_0xa74346(0x127));if(_0x30d3a5)_0x30d3a5['classList']['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0x30d3a5&&_0x30d3a5['addEventListener'](_0xa98c05(0x141),()=>{const _0x1457d4=_0xa98c05;console[_0x1457d4(0x188)](_0x1457d4(0x11f)),_0x19254f();_0x7ee013&&(_0x7ee013['classList']['add']('active'),_0x7ee013['style']['display']=_0x1457d4(0x189));document['getElementById'](_0x1457d4(0x179))[_0x1457d4(0x194)]['display']='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x1457d4(0x15c),document['getElementById']('elo-recommendation-text-d3')['style'][_0x1457d4(0x183)]='block';if(_0x30d3a5)_0x30d3a5[_0x1457d4(0x140)]['add']('active');if(_0x3044ac)_0x3044ac[_0x1457d4(0x140)]['remove'](_0x1457d4(0x127));if(_0x33d448)_0x33d448['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x303936&&_0x303936[_0xa98c05(0x12b)]('click',()=>{const _0x3bd260=_0xa98c05;_0x19254f();if(_0x458e36)_0x458e36['style']['display']='block';displayLadderDuos(),findBestOpponent(_0x3bd260(0x124)),document['getElementById'](_0x3bd260(0x19e))&&(document['getElementById'](_0x3bd260(0x19e))['style']['display']=_0x3bd260(0x189)),document[_0x3bd260(0x142)]('elo-recommendation-text-d1')[_0x3bd260(0x194)][_0x3bd260(0x183)]='none',document['getElementById'](_0x3bd260(0x170))[_0x3bd260(0x194)]['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';});}document[a25_0x30a361(0x12b)]('DOMContentLoaded',()=>{const _0x5eb3c2=a25_0x30a361;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')['style']['display']=_0x5eb3c2(0x189);});export{displayLadder};async function findBestOpponent(_0x42b765='d1'){const _0x1f112e=a25_0x30a361,_0x1118be='elo-recommendation-text-'+_0x42b765,_0x51ba5d=document['getElementById'](_0x1118be);if(!_0x51ba5d){console['error']('Recommendation\x20element\x20for\x20'+_0x42b765+'\x20not\x20found');return;}const _0x1a91e8=auth['currentUser'];if(!_0x1a91e8){_0x51ba5d['textContent']='';return;}try{const _0x598fc7=doc(db,'userProfiles',_0x1a91e8['uid']),_0x5c109a=await getDoc(_0x598fc7);if(!_0x5c109a[_0x1f112e(0x15f)]()){console['log']('No\x20user\x20profile\x20found'),_0x51ba5d[_0x1f112e(0x14e)]=_0x1f112e(0x14a);return;}const _0x4decdb=_0x5c109a['data'](),_0xa2c392=_0x4decdb['username'];if(!_0xa2c392){_0x51ba5d['textContent']=_0x1f112e(0x155);return;}let _0x3e1b7f;switch(_0x42b765){case'd1':_0x3e1b7f='players';break;case'd2':_0x3e1b7f=_0x1f112e(0x152);break;case'd3':_0x3e1b7f='playersD3';break;case _0x1f112e(0x124):_0x3e1b7f=_0x1f112e(0x19a);break;default:_0x3e1b7f='players';}if(_0x42b765==='duos'){const _0x282eb5=collection(db,_0x3e1b7f),_0x37a14f=query(_0x282eb5,where('username','==',_0xa2c392)),_0x12eea6=await getDocs(_0x37a14f);if(_0x12eea6['empty']){_0x51ba5d[_0x1f112e(0x14e)]='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x122c0d=_0x12eea6[_0x1f112e(0x15b)][0x0][_0x1f112e(0x131)](),_0x2309c4=parseInt(_0x122c0d['eloRating'])||0x4b0;if(_0x122c0d['hasTeam']&&_0x122c0d[_0x1f112e(0x169)]){_0x51ba5d[_0x1f112e(0x154)]='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x122c0d['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x49c362=await getDocs(_0x282eb5);let _0x4af2b4=null,_0x2a9f43=-0x1;_0x49c362['forEach'](_0xd9946d=>{const _0xb8e9c5=_0x1f112e,_0x16e10f=_0xd9946d[_0xb8e9c5(0x131)]();if(_0x16e10f['username']===_0xa2c392)return;if(_0x16e10f['hasTeam'])return;const _0x525a05=parseInt(_0x16e10f['eloRating'])||0x4b0,_0x175b72=Math['abs'](_0x525a05-_0x2309c4),_0x3edf64=Math['max'](0x0,0xc8-_0x175b72);_0x3edf64>_0x2a9f43&&(_0x4af2b4=_0x16e10f,_0x2a9f43=_0x3edf64);});if(_0x4af2b4){const _0x2e604f=parseInt(_0x4af2b4[_0x1f112e(0x19c)])||0x4b0;let _0xc74dc1='gray';if(_0x2e604f>=0x7d0)_0xc74dc1='#50C878';else{if(_0x2e604f>=0x708)_0xc74dc1=_0x1f112e(0x19b);else{if(_0x2e604f>=0x640)_0xc74dc1='#C0C0C0';else _0x2e604f>=0x578&&(_0xc74dc1=_0x1f112e(0x162));}}_0x51ba5d['innerHTML']=_0x1f112e(0x13a)+_0xc74dc1+';\x22>'+_0x4af2b4[_0x1f112e(0x14f)]+'</span>\x20(ELO:\x20'+_0x2e604f+')';}else _0x51ba5d['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x190391=collection(db,_0x3e1b7f),_0x44beff=query(_0x190391,where('username','==',_0xa2c392)),_0x1f4481=await getDocs(_0x44beff);if(_0x1f4481['empty']){_0x51ba5d['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x42b765['toUpperCase']()+'\x20ladder';return;}const _0x1a391c=_0x1f4481['docs'][0x0]['data'](),_0xd47316=parseInt(_0x1a391c['eloRating'])||0x5dc,_0x49d15f=await getDocs(_0x190391);let _0x55c3d8=null,_0x13c9dd=-0x1;const _0x41d4b2=getPlayerRankName(_0xd47316);_0x49d15f[_0x1f112e(0x12f)](_0x355d1e=>{const _0x4491f5=_0x1f112e,_0x1446cd=_0x355d1e['data']();if(_0x1446cd['username']===_0xa2c392)return;const _0x4291c4=parseInt(_0x1446cd['eloRating'])||0x5dc,_0x203f66=getPlayerRankName(_0x4291c4),_0xa91e00=Math[_0x4491f5(0x177)](_0x4291c4-_0xd47316),_0xebef=0x20,_0x1c2b81=0x1/(0x1+Math['pow'](0xa,(_0x4291c4-_0xd47316)/0x190)),_0x5e79b2=Math['round'](_0xebef*(0x1-_0x1c2b81));if(_0x5e79b2<=0x0)return;let _0x424b13=0x0;const _0x408d7e=Math[_0x4491f5(0x187)](0x0,0x64-_0xa91e00*0.5),_0x1f7c1a=_0x5e79b2>=0x3&&_0x5e79b2<=0x8?0x32:_0x5e79b2>0x0&&_0x5e79b2<0xf?0x1e:0xa,_0x4cd59e=_0x41d4b2===_0x203f66?0x28:0x0;_0x424b13=_0x408d7e+_0x1f7c1a+_0x4cd59e,_0x424b13>_0x13c9dd&&(_0x55c3d8=_0x1446cd,_0x13c9dd=_0x424b13);});if(_0x55c3d8){const _0x1dd715=parseInt(_0x55c3d8[_0x1f112e(0x19c)])||0x5dc;let _0x4db551='gray';if(_0x1dd715>=0x7d0)_0x4db551='#50C878';else{if(_0x1dd715>=0x708)_0x4db551='#FFD700';else{if(_0x1dd715>=0x640)_0x4db551='#b9f1fc';else _0x1dd715>=0x578&&(_0x4db551=_0x1f112e(0x162));}}_0x51ba5d['innerHTML']=_0x1f112e(0x192)+_0xd47316+_0x1f112e(0x13f)+_0x4db551+';\x22>'+_0x55c3d8['username']+'</span>';}else _0x51ba5d['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0xd47316+')';}catch(_0x4879e2){console['error']('Error\x20finding\x20best\x20opponent:',_0x4879e2),_0x51ba5d['textContent']=_0x1f112e(0x164);}}auth['onAuthStateChanged'](_0x19acb6=>{const _0x4690f4=a25_0x30a361,_0x1e0f1f=document['getElementById']('d1-ladder-container')&&document[_0x4690f4(0x142)]('d1-ladder-container')['style'][_0x4690f4(0x183)]!==_0x4690f4(0x15c),_0x3169b9=document['getElementById'](_0x4690f4(0x16b))&&document['getElementById']('d2-ladder-container')[_0x4690f4(0x194)][_0x4690f4(0x183)]!=='none',_0x14db91=document['getElementById']('d3-ladder-container')&&document['getElementById']('d3-ladder-container')['style']['display']!=='none',_0x125d66=document['getElementById']('duos-ladder-container')&&document['getElementById']('duos-ladder-container')['style']['display']!=='none',_0x1045af=_0x1e0f1f?'d1':_0x3169b9?'d2':_0x14db91?'d3':_0x125d66?'duos':'d1';findBestOpponent(_0x1045af);}),document['addEventListener'](a25_0x30a361(0x186),()=>{const _0xa33eab=a25_0x30a361,_0x3ccc0e=document['getElementById']('duos-switch'),_0x4bfe08=document['querySelector']('label[for=\x22duos-switch\x22]');_0x3ccc0e&&_0x4bfe08&&(_0x3ccc0e[_0xa33eab(0x12b)](_0xa33eab(0x13b),async _0xe4379a=>{const _0x45149d=_0xa33eab;if(_0xe4379a['target'][_0x45149d(0x193)]){const _0x28bb47=auth?.[_0x45149d(0x171)],_0x1e5e0e=await checkIfUserIsAdmin(_0x28bb47);if(!_0x1e5e0e){_0xe4379a[_0x45149d(0x175)]();const _0x5b4f1f=document['getElementById']('d1-switch');return _0x5b4f1f&&(_0x5b4f1f['checked']=!![],_0x5b4f1f['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x55396f=>{const _0x126399=_0xa33eab,_0x2a690f=await checkIfUserIsAdmin(_0x55396f);!_0x2a690f?(_0x3ccc0e['disabled']=!![],_0x4bfe08[_0x126399(0x194)]['opacity']=_0x126399(0x185),_0x4bfe08['style']['cursor']='not-allowed',_0x4bfe08[_0x126399(0x158)]=_0x126399(0x178)):(_0x3ccc0e['disabled']=![],_0x4bfe08['style'][_0x126399(0x136)]='1',_0x4bfe08[_0x126399(0x194)][_0x126399(0x19f)]=_0x126399(0x166),_0x4bfe08['title']='');}));});async function checkIfUserIsAdmin(_0x5f210b){const _0xca8b9f=a25_0x30a361;if(!_0x5f210b)return![];try{const _0x1f5c87=[_0xca8b9f(0x151),'brian2af@outlook.com'];if(_0x5f210b[_0xca8b9f(0x17a)]&&_0x1f5c87[_0xca8b9f(0x134)](_0x5f210b['email']['toLowerCase']()))return!![];const _0x153992=[_0xca8b9f(0x16e),_0xca8b9f(0x18a),'playersD2','playersD3'],_0x1653f2=['admin','owner','council',_0xca8b9f(0x13c)];for(const _0x1cfe29 of _0x153992){try{const _0x5a3c82=doc(db,_0x1cfe29,_0x5f210b['uid']),_0x41b789=await getDoc(_0x5a3c82);if(_0x41b789['exists']()){const _0xad0bb3=_0x41b789['data'](),_0x5f0be5=(_0xad0bb3['roleName']||_0xad0bb3[_0xca8b9f(0x16d)]||'')['toLowerCase']();if(_0x5f0be5&&_0x1653f2['includes'](_0x5f0be5))return!![];}}catch(_0x353d08){console['warn'](_0xca8b9f(0x180)+_0x1cfe29+':',_0x353d08);}}return![];}catch(_0x492832){return console[_0xca8b9f(0x147)]('Error\x20checking\x20admin\x20status:',_0x492832),![];}}function showAdminOnlyMessage(){const _0x59c939=a25_0x30a361,_0x557660=document['getElementById'](_0x59c939(0x122));_0x557660&&_0x557660['remove']();const _0x48ade6=document[_0x59c939(0x135)]('div');_0x48ade6['id']=_0x59c939(0x122),_0x48ade6[_0x59c939(0x194)]['cssText']=_0x59c939(0x191),_0x48ade6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x48ade6),setTimeout(()=>{_0x48ade6['parentNode']&&_0x48ade6['remove']();},0xbb8);}