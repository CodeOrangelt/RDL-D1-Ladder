const a22_0x473248=a22_0x1bd3,a22_0x350c52=(function(){let _0x4d3259=!![];return function(_0x39367b,_0x2d0e96){const _0x3a883a=_0x4d3259?function(){if(_0x2d0e96){const _0x56169f=_0x2d0e96['apply'](_0x39367b,arguments);return _0x2d0e96=null,_0x56169f;}}:function(){};return _0x4d3259=![],_0x3a883a;};}()),a22_0x57db4e=a22_0x350c52(this,function(){const _0x10eb1b=a22_0x1bd3,_0x569d6a=function(){const _0x4833a0=a22_0x1bd3;let _0x3f2f63;try{_0x3f2f63=Function(_0x4833a0(0x1ad)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x32d33e){_0x3f2f63=window;}return _0x3f2f63;},_0xa97e30=_0x569d6a(),_0x206b1e=_0xa97e30['console']=_0xa97e30['console']||{},_0x4df7c9=['log',_0x10eb1b(0x1c8),'info',_0x10eb1b(0x1bb),'exception','table','trace'];for(let _0x40ffc0=0x0;_0x40ffc0<_0x4df7c9[_0x10eb1b(0x1b2)];_0x40ffc0++){const _0x3b4653=a22_0x350c52[_0x10eb1b(0x1d7)]['prototype']['bind'](a22_0x350c52),_0x5a3234=_0x4df7c9[_0x40ffc0],_0x261f1c=_0x206b1e[_0x5a3234]||_0x3b4653;_0x3b4653[_0x10eb1b(0x1c6)]=a22_0x350c52['bind'](a22_0x350c52),_0x3b4653['toString']=_0x261f1c['toString']['bind'](_0x261f1c),_0x206b1e[_0x5a3234]=_0x3b4653;}});a22_0x57db4e();import{auth,db}from'./firebase-config.js';function a22_0x1bd3(_0x357dc0,_0x182b27){const _0x57db4e=a22_0x5a1e();return a22_0x1bd3=function(_0x350c52,_0x31a25e){_0x350c52=_0x350c52-0x1a4;let _0x5a1e04=_0x57db4e[_0x350c52];return _0x5a1e04;},a22_0x1bd3(_0x357dc0,_0x182b27);}function a22_0x5a1e(){const _0x364783=['createdAt','getTimeAgo','lastDoc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20â€¢\x20Color:\x20','accept','addEventListener','pending','proposedTeamName','unsubscribe','return\x20(function()\x20','disabled','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','sort','remove','length','none','trim','./login.html','sentInvitations','createElement','renderInvitations','gameInvitations','invitations','error','init','./ladderduos.js','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20','respond','pageSize','To:\x20','teamData','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22','.action-btn','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-','__proto__','currentFilter','warn','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','success','forEach','href','target','toDate','#cancel-response','getElementById','message','updateInvitationStatus','.filter-btn','respondedAt','data','constructor','dataset','textContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20','When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.','active','status','type','floor','setupActionListeners','map','fromUsername','docs','click','hasMore','querySelectorAll'];a22_0x5a1e=function(){return _0x364783;};return a22_0x5a1e();}import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class InboxManager{constructor(){const _0x368fa6=a22_0x1bd3;this[_0x368fa6(0x1c7)]='pending',this['invitations']=[],this['sentInvitations']=[],this['unsubscribe']=null,this['sentUnsubscribe']=null,this['pageSize']=0x14,this[_0x368fa6(0x1a6)]=null,this[_0x368fa6(0x1e5)]=!![],this[_0x368fa6(0x1bc)]();}async[a22_0x473248(0x1bc)](){auth['onAuthStateChanged'](_0x55de7c=>{const _0x561c0c=a22_0x1bd3;_0x55de7c?(this['loadInvitations'](_0x55de7c['uid']),this['setupEventListeners']()):window['location'][_0x561c0c(0x1cd)]=_0x561c0c(0x1b5);});}['setupEventListeners'](){const _0x135e1e=a22_0x473248;document[_0x135e1e(0x1e6)](_0x135e1e(0x1d4))['forEach'](_0x1467b9=>{const _0x38baba=_0x135e1e;_0x1467b9['addEventListener'](_0x38baba(0x1e4),()=>{const _0x2cff1b=_0x38baba;document['querySelectorAll']('.filter-btn')[_0x2cff1b(0x1cc)](_0x251a1e=>_0x251a1e['classList']['remove'](_0x2cff1b(0x1dc))),_0x1467b9['classList']['add'](_0x2cff1b(0x1dc)),this['currentFilter']=_0x1467b9[_0x2cff1b(0x1d8)]['filter'],this[_0x2cff1b(0x1b8)]();});});}['loadInvitations'](_0x36929b){const _0xeaee10=a22_0x473248,_0x3f7b8f=collection(db,_0xeaee10(0x1b9));let _0x37e434=query(_0x3f7b8f,where('toUserId','==',_0x36929b),orderBy('createdAt','desc'),limit(this['pageSize']));this[_0xeaee10(0x1ac)]=onSnapshot(_0x37e434,_0x35763d=>{const _0x53814f=_0xeaee10;this['invitations']=_0x35763d[_0x53814f(0x1e3)]['map'](_0x1ce5bd=>({'id':_0x1ce5bd['id'],..._0x1ce5bd[_0x53814f(0x1d6)]()})),this['renderInvitations'](),this['updateNotificationCount']();});let _0x4df50c=query(_0x3f7b8f,where('fromUserId','==',_0x36929b),orderBy('createdAt','desc'),limit(this[_0xeaee10(0x1c0)]));this['sentUnsubscribe']=onSnapshot(_0x4df50c,_0x197f77=>{const _0x5f5288=_0xeaee10;this[_0x5f5288(0x1b6)]=_0x197f77['docs'][_0x5f5288(0x1e1)](_0x470e21=>({'id':_0x470e21['id'],..._0x470e21['data'](),'isSent':!![]})),this[_0x5f5288(0x1b8)]();});}['renderInvitations'](){const _0x4c0192=a22_0x473248,_0x50251d=document['getElementById']('inbox-content');if(!_0x50251d)return;let _0x27aa14=[];if(this['currentFilter']==='outbox')_0x27aa14=this['sentInvitations'];else this[_0x4c0192(0x1c7)]==='all'?_0x27aa14=[...this['invitations'],...this['sentInvitations']][_0x4c0192(0x1b0)]((_0x38e387,_0xb1d672)=>{const _0x136594=_0x4c0192,_0x3e45d2=_0x38e387[_0x136594(0x1a4)]?.['toDate']?_0x38e387['createdAt']['toDate']():new Date(_0x38e387['createdAt']),_0x485e4a=_0xb1d672['createdAt']?.['toDate']?_0xb1d672[_0x136594(0x1a4)][_0x136594(0x1cf)]():new Date(_0xb1d672['createdAt']);return _0x485e4a-_0x3e45d2;}):_0x27aa14=this['invitations']['filter'](_0x521330=>_0x521330[_0x4c0192(0x1dd)]===this['currentFilter']);if(_0x27aa14['length']===0x0){const _0x410091=this['currentFilter']==='outbox'?'sent':this['currentFilter']==='all'?'':this[_0x4c0192(0x1c7)];_0x50251d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x410091+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this[_0x4c0192(0x1c7)]==='outbox'?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':_0x4c0192(0x1db))+_0x4c0192(0x1af);return;}_0x50251d['innerHTML']=_0x27aa14['map'](_0xe072e8=>this['createInvitationCard'](_0xe072e8))['join'](''),this['setupActionListeners']();}['createInvitationCard'](_0x40be62){const _0x36aba9=a22_0x473248,_0x31a0a6=_0x40be62['createdAt']?.['toDate']?_0x40be62['createdAt']['toDate']():new Date(_0x40be62[_0x36aba9(0x1a4)]),_0x503891=this['getTimeAgo'](_0x31a0a6),_0x1fb423=_0x40be62['isSent']||![];let _0x1eab4c='';return _0x40be62[_0x36aba9(0x1de)]==='team_invite'?_0x1eab4c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x40be62['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20'+_0x40be62['teamData']['teamColor']+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x40be62['teamData']['proposedTeamName']+_0x36aba9(0x1a7)+_0x40be62['teamData']['teamColor']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x1eab4c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x40be62['message']+_0x36aba9(0x1af),_0x36aba9(0x1be)+_0x40be62[_0x36aba9(0x1dd)]+'\x20'+(_0x1fb423?'sent-invitation':'')+'\x22\x20data-invitation-id=\x22'+_0x40be62['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1fb423?_0x36aba9(0x1c1)+_0x40be62['toUsername']:_0x40be62[_0x36aba9(0x1e2)])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1fb423?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x503891+_0x36aba9(0x1c5)+_0x40be62['status']+'\x22>'+_0x40be62['status']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1eab4c+_0x36aba9(0x1ca)+(!_0x1fb423&&_0x40be62['status']===_0x36aba9(0x1aa)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x40be62['id']+_0x36aba9(0x1c3)+_0x40be62['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x40be62['type']!=='team_invite'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x40be62['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x36aba9(0x1ca)+(_0x1fb423&&_0x40be62[_0x36aba9(0x1dd)]===_0x36aba9(0x1aa)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x40be62['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}[a22_0x473248(0x1e0)](){const _0x24fdeb=a22_0x473248;document['querySelectorAll'](_0x24fdeb(0x1c4))['forEach'](_0x2de619=>{const _0x370b0e=_0x24fdeb;_0x2de619[_0x370b0e(0x1a9)](_0x370b0e(0x1e4),async _0x192ea0=>{const _0x3feaa6=_0x370b0e,_0x5c06c8=_0x2de619['dataset']['action'],_0x43b8bf=_0x2de619['dataset']['invitationId'];_0x2de619[_0x3feaa6(0x1ae)]=!![];const _0x123f59=_0x2de619['innerHTML'];_0x2de619['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0x5c06c8){case _0x3feaa6(0x1a8):await this[_0x3feaa6(0x1d3)](_0x43b8bf,'accepted');break;case'decline':await this['updateInvitationStatus'](_0x43b8bf,'declined');break;case'cancel':await this[_0x3feaa6(0x1d3)](_0x43b8bf,'cancelled');break;case _0x3feaa6(0x1bf):this['openResponseModal'](_0x43b8bf);break;}}catch(_0x16f890){console[_0x3feaa6(0x1bb)]('Error\x20performing\x20'+_0x5c06c8+':',_0x16f890),alert('Failed\x20to\x20'+_0x5c06c8+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x2de619[_0x3feaa6(0x1ae)]=![],_0x2de619['innerHTML']=_0x123f59;}});});}async['updateInvitationStatus'](_0x654b3b,_0x3e872e){const _0x390466=a22_0x473248;try{const _0x5a8bbe=this['invitations']['find'](_0x135fa3=>_0x135fa3['id']===_0x654b3b);_0x5a8bbe&&_0x5a8bbe['type']==='team_invite'&&_0x3e872e==='accepted'&&await this['createTeamFromInvitation'](_0x5a8bbe);const _0x4bfaca=doc(db,'gameInvitations',_0x654b3b);await updateDoc(_0x4bfaca,{'status':_0x3e872e,'respondedAt':new Date()}),_0x5a8bbe&&(_0x5a8bbe['status']=_0x3e872e,_0x5a8bbe[_0x390466(0x1d5)]=new Date(),this['renderInvitations']());}catch(_0x29eef0){console[_0x390466(0x1bb)]('Error\x20updating\x20invitation\x20status:',_0x29eef0);throw _0x29eef0;}}['openResponseModal'](_0x1bce8d){const _0x3a4541=a22_0x473248,_0x31c7b7=this['invitations']['find'](_0xb2ee3=>_0xb2ee3['id']===_0x1bce8d);if(!_0x31c7b7)return;const _0x4b2aaa=document[_0x3a4541(0x1b7)]('div');_0x4b2aaa['className']='modal-overlay',_0x4b2aaa['innerHTML']=_0x3a4541(0x1da)+_0x31c7b7['fromUsername']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x31c7b7['value']+_0x3a4541(0x1c9);if(!document['getElementById']('modal-styles')){const _0x481166=document[_0x3a4541(0x1b7)]('style');_0x481166['id']='modal-styles',_0x481166[_0x3a4541(0x1d9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document['head']['appendChild'](_0x481166);}document['body']['appendChild'](_0x4b2aaa),_0x4b2aaa['querySelector']('.modal-close')[_0x3a4541(0x1a9)]('click',()=>_0x4b2aaa['remove']()),_0x4b2aaa['querySelector'](_0x3a4541(0x1d0))[_0x3a4541(0x1a9)]('click',()=>_0x4b2aaa[_0x3a4541(0x1b1)]()),_0x4b2aaa['addEventListener']('click',_0x244c4e=>{const _0x37c402=_0x3a4541;if(_0x244c4e[_0x37c402(0x1ce)]===_0x4b2aaa)_0x4b2aaa['remove']();}),_0x4b2aaa['querySelector']('#send-response')[_0x3a4541(0x1a9)](_0x3a4541(0x1e4),()=>{const _0x2cba91=_0x3a4541,_0x2c0c60=document[_0x2cba91(0x1d1)]('response-message')['value'][_0x2cba91(0x1b4)]();_0x2c0c60&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x4b2aaa[_0x2cba91(0x1b1)]());});}async['createTeamFromInvitation'](_0x50ee91){const _0x2a9288=a22_0x473248;try{const {createTeam:_0x3606f7}=await import(_0x2a9288(0x1bd)),_0xa4cfbb=await _0x3606f7(_0x50ee91[_0x2a9288(0x1e2)],_0x50ee91['toUsername'],_0x50ee91[_0x2a9288(0x1c2)]['proposedTeamName'],_0x50ee91[_0x2a9288(0x1c2)]['teamColor']);if(!_0xa4cfbb[_0x2a9288(0x1cb)])throw new Error(_0xa4cfbb[_0x2a9288(0x1bb)]);alert('Team\x20\x22'+_0x50ee91['teamData'][_0x2a9288(0x1ab)]+'\x22\x20created\x20successfully!');}catch(_0x42215d){console['error']('Error\x20creating\x20team:',_0x42215d);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0x42215d[_0x2a9288(0x1d2)]);}}['updateNotificationCount'](){const _0x1d46ad=a22_0x473248,_0x47c31d=this[_0x1d46ad(0x1ba)]['filter'](_0x20a0e6=>_0x20a0e6['status']==='pending')['length'],_0x510160=document['getElementById']('inbox-notification');_0x510160&&(_0x47c31d>0x0?(_0x510160['style']['display']='inline-block',_0x510160['textContent']=_0x47c31d>0x9?'9+':_0x47c31d):_0x510160['style']['display']=_0x1d46ad(0x1b3));}[a22_0x473248(0x1a5)](_0x52bb3e){const _0x5e4b3d=a22_0x473248,_0x90fd5=new Date(),_0x5cf982=_0x90fd5-_0x52bb3e,_0x38cd98=Math['floor'](_0x5cf982/(0x3e8*0x3c)),_0x33cdb2=Math['floor'](_0x5cf982/(0x3e8*0x3c*0x3c)),_0x416126=Math[_0x5e4b3d(0x1df)](_0x5cf982/(0x3e8*0x3c*0x3c*0x18));if(_0x38cd98<0x1)return'Just\x20now';if(_0x38cd98<0x3c)return _0x38cd98+'m\x20ago';if(_0x33cdb2<0x18)return _0x33cdb2+'h\x20ago';if(_0x416126<0x7)return _0x416126+'d\x20ago';return _0x52bb3e['toLocaleDateString']();}['destroy'](){this['unsubscribe']&&this['unsubscribe'](),this['sentUnsubscribe']&&this['sentUnsubscribe']();}}document['addEventListener']('DOMContentLoaded',()=>{new InboxManager();});