const a33_0x1685bd=a33_0xbd48,a33_0x1fb052=(function(){let _0xe83f0=!![];return function(_0x157f8d,_0x583d59){const _0x557601=_0xe83f0?function(){if(_0x583d59){const _0x3c8bfe=_0x583d59['apply'](_0x157f8d,arguments);return _0x583d59=null,_0x3c8bfe;}}:function(){};return _0xe83f0=![],_0x557601;};}()),a33_0x2698cd=a33_0x1fb052(this,function(){const _0x34a55d=a33_0xbd48;let _0x4e3fe8;try{const _0x5c2502=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4e3fe8=_0x5c2502();}catch(_0x38676b){_0x4e3fe8=window;}const _0x96ce0b=_0x4e3fe8[_0x34a55d(0x11e)]=_0x4e3fe8['console']||{},_0xae795d=[_0x34a55d(0xea),_0x34a55d(0xec),'info','error','exception','table','trace'];for(let _0xfab29e=0x0;_0xfab29e<_0xae795d['length'];_0xfab29e++){const _0x4d4354=a33_0x1fb052['constructor']['prototype'][_0x34a55d(0x120)](a33_0x1fb052),_0x93ea57=_0xae795d[_0xfab29e],_0x1c3fc0=_0x96ce0b[_0x93ea57]||_0x4d4354;_0x4d4354['__proto__']=a33_0x1fb052[_0x34a55d(0x120)](a33_0x1fb052),_0x4d4354['toString']=_0x1c3fc0['toString']['bind'](_0x1c3fc0),_0x96ce0b[_0x93ea57]=_0x4d4354;}});a33_0x2698cd();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x4d246d from'./firebase-idle-wrapper.js';const styleEl=document[a33_0x1685bd(0xf9)]('style');styleEl['textContent']='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document[a33_0x1685bd(0xf3)]['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;function a33_0x2613(){const _0x4dc11f=['forEach','toDate','log','Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:','warn','map','winnerScore','player','totalKills','playersD3','size','head','get','desc','wins','empty','%</td>\x0a\x20\x20\x20\x20</tr>','createElement','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','error','winnerUsername','previousElo','inline','elo','kda','country','innerHTML','eloHistoryD3','Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:','\x20players','abs','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','winRate','totalMatches','entries','set','timestamp','#ladder-d3\x20tbody','filter','has','find','D3:\x20Player\x20ID\x20mappings:','change','includes','textContent','color','push','querySelector','newElo','data','querySelectorAll','username','firstPlaceDate','#CD7F32','console','totalDeaths','bind','position','D3:\x20','pilot','bold','ceil','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>'];a33_0x2613=function(){return _0x4dc11f;};return a33_0x2613();}async function displayLadderD3(_0x41d152=![]){const _0x5617ad=a33_0x1685bd,_0x284941=document['querySelector'](_0x5617ad(0x10d));if(!_0x284941){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x284941['innerHTML']=_0x5617ad(0x126);try{const _0x4771f0=Date['now']();if(!_0x41d152&&playerCacheD3['data']&&_0x4771f0-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x33bc09=collection(db,_0x5617ad(0xf1)),_0x5f3692=await getDocs(_0x33bc09),_0x1fbd7d=[];_0x5f3692['forEach'](_0xd18eba=>{const _0x85dae=_0x5617ad,_0xcdc281=_0xd18eba[_0x85dae(0x119)]();_0xcdc281[_0x85dae(0x11b)]&&_0x1fbd7d['push']({..._0xcdc281,'id':_0xd18eba['id'],'elo':_0xcdc281['eloRating']||0x0,'position':_0xcdc281[_0x85dae(0x121)]||Number['MAX_SAFE_INTEGER']});});const _0xeeffc3=collection(db,'userProfiles'),_0x5df6c9=await getDocs(_0xeeffc3),_0x3cbb55=new Map();_0x5df6c9[_0x5617ad(0xe8)](_0x13eb9c=>{const _0x3f0303=_0x13eb9c['data']();_0x3f0303['username']&&_0x3cbb55['set'](_0x3f0303['username']['toLowerCase'](),_0x3f0303);});for(const _0x851e91 of _0x1fbd7d){const _0x275315=_0x851e91['username']['toLowerCase']();if(_0x3cbb55['has'](_0x275315)){const _0x17e311=_0x3cbb55['get'](_0x275315);_0x17e311['country']&&(_0x851e91[_0x5617ad(0x101)]=_0x17e311['country']['toLowerCase']());}}const _0x27638d=_0x1fbd7d[_0x5617ad(0xed)](_0x286e80=>_0x286e80['username']),_0x537c8f=await fetchBatchMatchStatsD3(_0x27638d);_0x1fbd7d['sort']((_0x1f5629,_0x59ce56)=>{const _0x1fa497=_0x537c8f['get'](_0x1f5629['username'])?.['totalMatches']||0x0,_0x43976e=_0x537c8f['get'](_0x59ce56['username'])?.['totalMatches']||0x0;if(_0x1fa497===0x0!==(_0x43976e===0x0))return _0x1fa497===0x0?0x1:-0x1;return(_0x1f5629['position']||0x3e7)-(_0x59ce56['position']||0x3e7);}),_0x1fbd7d['forEach']((_0x321c23,_0x1a7aea)=>{const _0x34f459=_0x5617ad;_0x321c23[_0x34f459(0x121)]=_0x1a7aea+0x1;}),playerCacheD3['data']=_0x1fbd7d,playerCacheD3[_0x5617ad(0x10c)]=_0x4771f0,updateLadderDisplayD3(_0x1fbd7d);}catch(_0x556fb6){console['error']('Error\x20loading\x20D3\x20ladder:',_0x556fb6),_0x284941[_0x5617ad(0x102)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x556fb6['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x5b602c){const _0x19c84d=a33_0x1685bd;if(!_0x5b602c)return 0x0;const _0x4d4bbe=_0x5b602c[_0x19c84d(0xe9)](),_0x310ce7=new Date(),_0x3d5718=Math[_0x19c84d(0x106)](_0x310ce7-_0x4d4bbe);return Math[_0x19c84d(0x125)](_0x3d5718/(0x3e8*0x3c*0x3c*0x18));}function a33_0xbd48(_0xfe153f,_0xf73bd7){const _0x2698cd=a33_0x2613();return a33_0xbd48=function(_0x1fb052,_0x292781){_0x1fb052=_0x1fb052-0xe8;let _0x261312=_0x2698cd[_0x1fb052];return _0x261312;},a33_0xbd48(_0xfe153f,_0xf73bd7);}async function updatePlayerPositions(_0x103812,_0x37834d){const _0x2728d7=a33_0x1685bd;try{const _0x5aa612=collection(db,'playersD3'),_0x39dd4a=await getDocs(_0x5aa612),_0x2e8da8=[];_0x39dd4a[_0x2728d7(0xe8)](_0x465085=>{const _0x5af8d1=_0x2728d7;_0x2e8da8[_0x5af8d1(0x116)]({'id':_0x465085['id'],..._0x465085['data']()});});const _0xa204a4=_0x2e8da8['find'](_0x33ecee=>_0x33ecee['username']===_0x103812),_0x32a74b=_0x2e8da8[_0x2728d7(0x110)](_0x370c00=>_0x370c00['username']===_0x37834d);if(!_0xa204a4||!_0x32a74b){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0xa204a4['position']>_0x32a74b['position']){const _0x5610da=_0x32a74b['position'];for(const _0x52fc0f of _0x2e8da8){_0x52fc0f['position']>=_0x32a74b['position']&&_0x52fc0f['position']<_0xa204a4['position']&&_0x52fc0f['username']!==_0x103812&&await updateDoc(doc(db,'playersD3',_0x52fc0f['id']),{'position':_0x52fc0f['position']+0x1});}await updateDoc(doc(db,_0x2728d7(0xf1),_0xa204a4['id']),{'position':_0x5610da});if(_0x5610da===0x1){const _0x3576cb=doc(db,_0x2728d7(0xf1),_0xa204a4['id']),_0x33e7d0=await getDoc(_0x3576cb);!_0x33e7d0['data']()[_0x2728d7(0x11c)]&&await updateDoc(_0x3576cb,{'firstPlaceDate':Timestamp['now']()});}if(_0x32a74b[_0x2728d7(0x121)]===0x1){const _0x45b87d=doc(db,'playersD3',_0x32a74b['id']);await updateDoc(_0x45b87d,{'firstPlaceDate':null});}}}catch(_0x1c8b4c){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x1c8b4c);}}async function updateLadderDisplayD3(_0x238857){const _0x4123c5=a33_0x1685bd;_0x238857['sort']((_0x25c0e4,_0x63fd90)=>_0x25c0e4['position']-_0x63fd90['position']);const _0x57f6bb=document['querySelector']('#ladder-d3\x20tbody');if(!_0x57f6bb)return;_0x57f6bb[_0x4123c5(0x102)]='';const _0x18a514=_0x238857[_0x4123c5(0xed)](_0x24764e=>_0x24764e['username']),_0x29b414=await fetchBatchMatchStatsD3(_0x18a514),_0x15575a=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x15575a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0x7da9a5=_0x238857[_0x4123c5(0xed)](_0x8968a=>{const _0xd1e5c7=_0x4123c5,_0x29b508=_0x29b414[_0xd1e5c7(0xf4)](_0x8968a['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x8968a,_0x29b508);})['join']('');_0x57f6bb['innerHTML']=_0x7da9a5,getPlayersLastEloChangesD3(_0x18a514)['then'](_0x289dd9=>{const _0x521dca=_0x4123c5,_0xfc2de3=new Map();_0x57f6bb[_0x521dca(0x11a)]('tr')[_0x521dca(0xe8)]((_0x31be75,_0x5481fd)=>{const _0x4efe80=_0x521dca;_0x5481fd<_0x18a514['length']&&_0xfc2de3[_0x4efe80(0x10b)](_0x18a514[_0x5481fd],_0x31be75);}),_0x289dd9[_0x521dca(0xe8)]((_0x5a86d7,_0x43bdd5)=>{const _0x2591ae=_0x521dca,_0x3eee92=_0xfc2de3['get'](_0x43bdd5);if(_0x3eee92&&_0x5a86d7!==0x0){const _0x3ddd87=_0x3eee92['querySelector']('td:nth-child(3)');if(_0x3ddd87){const _0x16169d=_0x5a86d7>0x0?'+'+_0x5a86d7:''+_0x5a86d7,_0x34d5bc=_0x3ddd87[_0x2591ae(0x117)]('.trend-indicator');_0x34d5bc&&(_0x34d5bc[_0x2591ae(0x114)]=_0x16169d,_0x34d5bc['style'][_0x2591ae(0x115)]=_0x5a86d7>0x0?'#4CAF50':'#F44336',_0x34d5bc['style']['fontWeight']=_0x2591ae(0x124),_0x34d5bc['style']['fontSize']='0.85em',_0x34d5bc['style']['display']=_0x2591ae(0xfe),_0x34d5bc['style']['visibility']='visible',_0x34d5bc['style']['opacity']='1');}}});})['catch'](_0x5e606d=>console['error'](_0x4123c5(0x104),_0x5e606d));}async function fetchBatchMatchStatsD3(_0x590808){const _0x548e0f=a33_0x1685bd,_0x2961ce=new Map();try{const _0x100131=collection(db,'approvedMatchesD3'),_0x4b90cf=await getDocs(_0x100131);_0x4b90cf['forEach'](_0x5b8031=>{const _0x46af05=a33_0xbd48,_0x1c7700=_0x5b8031['data']();if(_0x590808[_0x46af05(0x113)](_0x1c7700['winnerUsername'])){const _0xa43734=_0x1c7700[_0x46af05(0xfc)];!_0x2961ce[_0x46af05(0x10f)](_0xa43734)&&_0x2961ce[_0x46af05(0x10b)](_0xa43734,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0xce1194=_0x2961ce['get'](_0xa43734);_0xce1194['wins']++,_0xce1194[_0x46af05(0x109)]++,_0xce1194['totalKills']+=parseInt(_0x1c7700[_0x46af05(0xee)])||0x0,_0xce1194['totalDeaths']+=parseInt(_0x1c7700['loserScore'])||0x0;}if(_0x590808['includes'](_0x1c7700['loserUsername'])){const _0x3725ce=_0x1c7700['loserUsername'];!_0x2961ce['has'](_0x3725ce)&&_0x2961ce['set'](_0x3725ce,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x377a8d=_0x2961ce['get'](_0x3725ce);_0x377a8d['losses']++,_0x377a8d[_0x46af05(0x109)]++,_0x377a8d['totalKills']+=parseInt(_0x1c7700['loserScore'])||0x0,_0x377a8d[_0x46af05(0x11f)]+=parseInt(_0x1c7700[_0x46af05(0xee)])||0x0;}}),_0x2961ce['forEach'](_0x3838d8=>{const _0x2dffd8=a33_0xbd48;_0x3838d8[_0x2dffd8(0x100)]=_0x3838d8[_0x2dffd8(0x11f)]>0x0?(_0x3838d8[_0x2dffd8(0xf0)]/_0x3838d8['totalDeaths'])['toFixed'](0x2):_0x3838d8['totalKills'],_0x3838d8[_0x2dffd8(0x108)]=_0x3838d8['totalMatches']>0x0?(_0x3838d8[_0x2dffd8(0xf6)]/_0x3838d8['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x4b8c07){console[_0x548e0f(0xfb)](_0x548e0f(0xeb),_0x4b8c07);}return _0x2961ce;}function createPlayerRowD3(_0x4c7257,_0x21b2d7){const _0x26b2da=a33_0x1685bd,_0xc40feb=parseFloat(_0x4c7257[_0x26b2da(0xff)])||0x0;let _0x21b42b='gray';if(_0xc40feb>=0x7d0)_0x21b42b='#50C878';else{if(_0xc40feb>=0x708)_0x21b42b='#FFD700';else{if(_0xc40feb>=0x640)_0x21b42b='#C0C0C0';else _0xc40feb>=0x578&&(_0x21b42b=_0x26b2da(0x11d));}}let _0x3d9c69='';return _0x4c7257['country']&&(_0x3d9c69='<img\x20src=\x22../images/flags/'+_0x4c7257[_0x26b2da(0x101)]['toLowerCase']()+_0x26b2da(0xfa)+_0x4c7257['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4c7257['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x4c7257[_0x26b2da(0x11b)])+_0x26b2da(0x107)+_0x21b42b+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4c7257['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3d9c69+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x21b42b+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0xc40feb+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x21b2d7[_0x26b2da(0x109)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x21b2d7['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x21b2d7['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x21b2d7['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x21b2d7['winRate']+_0x26b2da(0xf8);}async function getPlayersLastEloChangesD3(_0x4d57cc){const _0x1bb64e=a33_0x1685bd,_0x14cfbb=new Map();_0x4d57cc[_0x1bb64e(0xe8)](_0x46e7b7=>_0x14cfbb['set'](_0x46e7b7,0x0));try{console[_0x1bb64e(0xea)]('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x4d57cc);const _0x441056=new Map(),_0x3bbb44=await getDocs(collection(db,_0x1bb64e(0xf1)));_0x3bbb44['forEach'](_0x23d2f0=>{const _0x894477=_0x1bb64e,_0x396d3f=_0x23d2f0['data']();_0x396d3f['username']&&_0x441056['set'](_0x23d2f0['id'],_0x396d3f[_0x894477(0x11b)]);}),console[_0x1bb64e(0xea)](_0x1bb64e(0x111),Array['from'](_0x441056[_0x1bb64e(0x10a)]()));const _0x36a8cb=collection(db,_0x1bb64e(0x103)),_0x151cc7=query(_0x36a8cb,orderBy('timestamp',_0x1bb64e(0xf5)),limit(0x64)),_0x9fb1ff=await getDocs(_0x151cc7);_0x9fb1ff[_0x1bb64e(0xf7)]?console[_0x1bb64e(0xea)]('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console[_0x1bb64e(0xea)]('D3:\x20Found\x20'+_0x9fb1ff['size']+'\x20entries\x20in\x20eloHistoryD3');const _0x2fd6b4=new Map();_0x9fb1ff['forEach'](_0x1d0cd6=>{const _0x5a8eed=_0x1bb64e,_0x3ffed9=_0x1d0cd6['data']();let _0x3ef675=null;if(_0x3ffed9['username'])_0x3ef675=_0x3ffed9['username'];else{if(_0x3ffed9['playerUsername'])_0x3ef675=_0x3ffed9['playerUsername'];else{if(_0x3ffed9['player']&&typeof _0x3ffed9[_0x5a8eed(0xef)]==='string')_0x3ef675=_0x3ffed9['player'];else{if(_0x3ffed9['player']&&_0x441056['has'](_0x3ffed9[_0x5a8eed(0xef)]))_0x3ef675=_0x441056[_0x5a8eed(0xf4)](_0x3ffed9['player']);else _0x3ffed9['playerId']&&_0x441056['has'](_0x3ffed9['playerId'])&&(_0x3ef675=_0x441056[_0x5a8eed(0xf4)](_0x3ffed9['playerId']));}}}(_0x3ffed9[_0x5a8eed(0x11b)]==='pilot'||_0x3ffed9['playerUsername']===_0x5a8eed(0x123)||_0x3ffed9['player']&&_0x441056['get'](_0x3ffed9['player'])==='pilot')&&console['log']('D3:\x20Found\x20pilot\x20entry:',_0x3ffed9),_0x3ef675&&_0x4d57cc[_0x5a8eed(0x113)](_0x3ef675)&&(!_0x2fd6b4['has'](_0x3ef675)&&_0x2fd6b4['set'](_0x3ef675,[]),_0x2fd6b4[_0x5a8eed(0xf4)](_0x3ef675)['push']({..._0x3ffed9,'timestamp':_0x3ffed9['timestamp']?.['seconds']||0x0}));}),console['log']('D3:\x20Found\x20entries\x20for\x20'+_0x2fd6b4[_0x1bb64e(0xf2)]+_0x1bb64e(0x105)),_0x2fd6b4['forEach']((_0x402230,_0x4353d2)=>{const _0x4d9c5f=_0x1bb64e;if(_0x402230['length']>0x0){_0x402230['sort']((_0x42ccdf,_0x4b2c4d)=>_0x4b2c4d['timestamp']-_0x42ccdf['timestamp']);const _0x103872=_0x402230['find'](_0x27dd1d=>_0x27dd1d[_0x4d9c5f(0x112)]!==undefined||_0x27dd1d['newElo']!==undefined&&_0x27dd1d['previousElo']!==undefined);if(_0x103872){let _0xab5e6a;if(_0x103872['change']!==undefined)_0xab5e6a=_0x103872['change'];else _0x103872[_0x4d9c5f(0x118)]!==undefined&&_0x103872[_0x4d9c5f(0xfd)]!==undefined&&(_0xab5e6a=_0x103872['newElo']-_0x103872['previousElo']);_0xab5e6a!==undefined&&(_0x14cfbb['set'](_0x4353d2,_0xab5e6a),console['log'](_0x4d9c5f(0x122)+_0x4353d2+'\x20ELO\x20change:\x20'+_0xab5e6a));}}});if(_0x2fd6b4['size']===0x0){console['log']('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x5dd5f6=collection(db,'eloHistory'),_0x5497d5=query(_0x5dd5f6,where('gameMode','==','D3'),orderBy('timestamp','desc'),limit(0x32));try{const _0x4c3358=await getDocs(_0x5497d5);console['log']('D3:\x20Found\x20'+_0x4c3358['size']+'\x20fallback\x20entries'),_0x4c3358['forEach'](_0x2cff60=>{const _0x53a18f=_0x1bb64e,_0x123a99=_0x2cff60['data']();let _0x3d7d06=_0x123a99[_0x53a18f(0x11b)]||_0x123a99['playerUsername'];!_0x3d7d06&&_0x123a99['player']&&_0x441056['has'](_0x123a99['player'])&&(_0x3d7d06=_0x441056['get'](_0x123a99[_0x53a18f(0xef)]));if(_0x3d7d06&&_0x4d57cc['includes'](_0x3d7d06)){const _0x3577a0=_0x123a99[_0x53a18f(0x112)]||(_0x123a99['newElo']!==undefined&&_0x123a99['previousElo']!==undefined?_0x123a99['newElo']-_0x123a99['previousElo']:0x0);_0x3577a0!==0x0&&(_0x14cfbb['set'](_0x3d7d06,_0x3577a0),console['log']('D3:\x20'+_0x3d7d06+'\x20fallback\x20ELO\x20change:\x20'+_0x3577a0));}});}catch(_0x2650fd){console['log']('D3:\x20Fallback\x20query\x20failed:',_0x2650fd);}}const _0x15ed96=Array['from'](_0x14cfbb['entries']())[_0x1bb64e(0x10e)](([_0x9325ae,_0x55ce74])=>_0x55ce74!==0x0);console['log']('D3:\x20Final\x20ELO\x20changes:',_0x15ed96);}catch(_0x20483c){console['error']('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x20483c);}return _0x14cfbb;}export{displayLadderD3,updatePlayerPositions};