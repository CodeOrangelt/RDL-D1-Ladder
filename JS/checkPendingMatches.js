const a10_0x13037b=(function(){let _0x49be39=!![];return function(_0x3f5870,_0x497de5){const _0x39125a=_0x49be39?function(){if(_0x497de5){const _0x171b73=_0x497de5['apply'](_0x3f5870,arguments);return _0x497de5=null,_0x171b73;}}:function(){};return _0x49be39=![],_0x39125a;};}()),a10_0x39f6d0=a10_0x13037b(this,function(){const _0x19e1a4=a10_0x41c7;let _0x2e37ce;try{const _0x3c7ec1=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2e37ce=_0x3c7ec1();}catch(_0xcc896){_0x2e37ce=window;}const _0x343f51=_0x2e37ce['console']=_0x2e37ce['console']||{},_0x1e7d91=[_0x19e1a4(0x1d7),'warn','info','error','exception','table','trace'];for(let _0x1f06e2=0x0;_0x1f06e2<_0x1e7d91['length'];_0x1f06e2++){const _0x4eea5b=a10_0x13037b['constructor']['prototype']['bind'](a10_0x13037b),_0x24246d=_0x1e7d91[_0x1f06e2],_0x412854=_0x343f51[_0x24246d]||_0x4eea5b;_0x4eea5b[_0x19e1a4(0x1de)]=a10_0x13037b['bind'](a10_0x13037b),_0x4eea5b[_0x19e1a4(0x1e3)]=_0x412854['toString']['bind'](_0x412854),_0x343f51[_0x24246d]=_0x4eea5b;}});a10_0x39f6d0();function a10_0x41c7(_0x345a31,_0x6e6e3d){const _0x39f6d0=a10_0x52bb();return a10_0x41c7=function(_0x13037b,_0x1f0f19){_0x13037b=_0x13037b-0x1c9;let _0x52bb69=_0x39f6d0[_0x13037b];return _0x52bb69;},a10_0x41c7(_0x345a31,_0x6e6e3d);}import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x3cc85b=![]){const _0x54759c=a10_0x41c7,_0xe2c9c=Date['now'](),_0x57a26e=checkNotificationCache();if(_0x57a26e!==null&&!_0x3cc85b){updateNotificationDot(_0x57a26e);if(_0xe2c9c-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0xe2c9c;const _0x2cfd84=auth['currentUser'];if(!_0x2cfd84){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x51423f,_0x51a4e8,_0x5e337f]=await Promise[_0x54759c(0x1d1)]([checkForPendingMatchesInCollection(_0x2cfd84,_0x54759c(0x1da)),checkForPendingMatchesInCollection(_0x2cfd84,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x2cfd84,'pendingMatchesD3')]),_0x338c58=_0x51423f||_0x51a4e8||_0x5e337f;updateNotificationDot(_0x338c58),updateNotificationCache(_0x338c58);}catch(_0x3c899b){console[_0x54759c(0x1d6)](_0x54759c(0x1d8),_0x3c899b);}}async function checkForPendingMatchesInCollection(_0x54094f,_0x594264){const _0x524868=a10_0x41c7,_0x26e5ac=_0x54094f['uid'],_0x20ec39=_0x54094f['email'],_0x249aa4=query(collection(db,_0x594264),where('winnerId','==',_0x26e5ac),where('approved','==',![])),_0x22c207=await getDocs(_0x249aa4);if(!_0x22c207['empty'])return!![];if(_0x20ec39){const _0x39babd=query(collection(db,_0x594264),where(_0x524868(0x1d9),'==',_0x20ec39),where(_0x524868(0x1cd),'==',![])),_0xa3c2e6=await getDocs(_0x39babd);if(!_0xa3c2e6['empty'])return!![];}let _0x6a6882=await getUsernameFromAllSources(_0x54094f);if(_0x6a6882){const _0x47a8cc=query(collection(db,_0x594264),where('winnerUsername','==',_0x6a6882),where('approved','==',![])),_0x5eb791=await getDocs(_0x47a8cc);if(!_0x5eb791[_0x524868(0x1dc)])return!![];}return![];}async function getUsernameFromAllSources(_0x3b9020){const _0x1129ed=a10_0x41c7,_0x1e0537=localStorage['getItem']('currentUsername');if(_0x1e0537)return _0x1e0537;try{const [_0x2fc98c,_0x4dc125,_0x34eb2f]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x3b9020[_0x1129ed(0x1d4)]))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x3b9020['uid']))),getDocs(query(collection(db,'playersD3'),where(_0x1129ed(0x1d0),'==',_0x3b9020['uid'])))]);if(!_0x2fc98c[_0x1129ed(0x1dc)]){const _0x1278e3=_0x2fc98c['docs'][0x0][_0x1129ed(0x1ce)]()[_0x1129ed(0x1e1)];return localStorage['setItem']('currentUsername',_0x1278e3),_0x1278e3;}if(!_0x4dc125['empty']){const _0x3ef36c=_0x4dc125['docs'][0x0][_0x1129ed(0x1ce)]()['username'];return localStorage['setItem'](_0x1129ed(0x1df),_0x3ef36c),_0x3ef36c;}if(!_0x34eb2f[_0x1129ed(0x1dc)]){const _0x18706b=_0x34eb2f['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x18706b),_0x18706b;}const _0x496aa7=await getDoc(doc(db,'users',_0x3b9020['uid']));if(_0x496aa7['exists']()&&_0x496aa7[_0x1129ed(0x1ce)]()[_0x1129ed(0x1e1)]){const _0x3a8af8=_0x496aa7[_0x1129ed(0x1ce)]()['username'];return localStorage['setItem']('currentUsername',_0x3a8af8),_0x3a8af8;}}catch(_0x43d9d7){console['error']('Error\x20fetching\x20username:',_0x43d9d7);}if(_0x3b9020['email'])return _0x3b9020[_0x1129ed(0x1e2)]['split']('@')[0x0];return null;}function updateNotificationCache(_0x378f13){const _0x24f5f1=a10_0x41c7,_0x1a4bdb={'status':_0x378f13,'timestamp':Date['now']()};localStorage[_0x24f5f1(0x1cb)](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x1a4bdb));}function checkNotificationCache(){const _0x48d0d7=a10_0x41c7,_0x2ef55c=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x2ef55c)return null;try{const {status:_0x374f21,timestamp:_0x483fa8}=JSON['parse'](_0x2ef55c),_0x206ee6=Date[_0x48d0d7(0x1e0)]();if(_0x206ee6-_0x483fa8<CACHE_EXPIRY)return _0x374f21;}catch(_0x29f3d4){}return null;}export function updateNotificationDot(_0x3d3224){const _0x2ca311=a10_0x41c7,_0x45a0a4=new MutationObserver((_0x2b95cf,_0x58585c)=>{const _0x338d5b=a10_0x41c7,_0xf30fc3=document['getElementById'](_0x338d5b(0x1dd));_0xf30fc3&&(updateDotStyle(_0xf30fc3,_0x3d3224),_0x58585c['disconnect']());});_0x45a0a4['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x349b04=document[_0x2ca311(0x1cc)]('report-match-notification');_0x349b04&&(updateDotStyle(_0x349b04,_0x3d3224),_0x45a0a4[_0x2ca311(0x1cf)]()),setTimeout(()=>_0x45a0a4['disconnect'](),0x1388);}function a10_0x52bb(){const _0x476b54=['-8px','none','setItem','getElementById','approved','data','disconnect','userId','all','style','width','uid','2px\x20solid\x20white','error','log','Error\x20checking\x20pending\x20matches:','winnerEmail','pendingMatches','height','empty','report-match-notification','__proto__','currentUsername','now','username','email','toString'];a10_0x52bb=function(){return _0x476b54;};return a10_0x52bb();}function updateDotStyle(_0x5ec05c,_0xf56cd7){const _0x21df6d=a10_0x41c7;_0xf56cd7?(_0x5ec05c['style']['display']='block',_0x5ec05c['style']['backgroundColor']='#ff3b30',_0x5ec05c[_0x21df6d(0x1d2)][_0x21df6d(0x1d3)]='10px',_0x5ec05c['style'][_0x21df6d(0x1db)]='10px',_0x5ec05c[_0x21df6d(0x1d2)]['position']='absolute',_0x5ec05c['style']['top']='-5px',_0x5ec05c['style']['right']=_0x21df6d(0x1c9),_0x5ec05c['style']['borderRadius']='50%',_0x5ec05c['style']['border']=_0x21df6d(0x1d5),_0x5ec05c['style']['zIndex']='999'):_0x5ec05c['style']['display']=_0x21df6d(0x1ca);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x2343db=a10_0x41c7;localStorage['removeItem'](_0x2343db(0x1df)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});