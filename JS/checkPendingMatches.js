const a10_0x5dc392=(function(){let _0x1fcc5d=!![];return function(_0x50fa46,_0x32cbea){const _0x496fd3=_0x1fcc5d?function(){if(_0x32cbea){const _0x267f8e=_0x32cbea['apply'](_0x50fa46,arguments);return _0x32cbea=null,_0x267f8e;}}:function(){};return _0x1fcc5d=![],_0x496fd3;};}()),a10_0x1419e2=a10_0x5dc392(this,function(){const _0x1250ed=a10_0x918a,_0x592404=function(){const _0x5175ed=a10_0x918a;let _0x24b96f;try{_0x24b96f=Function(_0x5175ed(0x200)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x466f55){_0x24b96f=window;}return _0x24b96f;},_0x54490e=_0x592404(),_0x144abb=_0x54490e['console']=_0x54490e['console']||{},_0x4bbda2=[_0x1250ed(0x204),'warn','info',_0x1250ed(0x201),'exception','table',_0x1250ed(0x1ea)];for(let _0x4a9700=0x0;_0x4a9700<_0x4bbda2['length'];_0x4a9700++){const _0xc83ecc=a10_0x5dc392[_0x1250ed(0x1fa)]['prototype'][_0x1250ed(0x20f)](a10_0x5dc392),_0x212c76=_0x4bbda2[_0x4a9700],_0x4203d9=_0x144abb[_0x212c76]||_0xc83ecc;_0xc83ecc[_0x1250ed(0x1fc)]=a10_0x5dc392[_0x1250ed(0x20f)](a10_0x5dc392),_0xc83ecc[_0x1250ed(0x1f0)]=_0x4203d9['toString'][_0x1250ed(0x20f)](_0x4203d9),_0x144abb[_0x212c76]=_0xc83ecc;}});a10_0x1419e2();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';function a10_0x918a(_0x3aae11,_0x483434){const _0x1419e2=a10_0x121f();return a10_0x918a=function(_0x5dc392,_0x3ac9ee){_0x5dc392=_0x5dc392-0x1ea;let _0x121fed=_0x1419e2[_0x5dc392];return _0x121fed;},a10_0x918a(_0x3aae11,_0x483434);}let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0xfa63f6=![]){const _0x24cfed=Date['now'](),_0x45c71e=checkNotificationCache();if(_0x45c71e!==null&&!_0xfa63f6){updateNotificationDot(_0x45c71e);if(_0x24cfed-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x24cfed;const _0x2490a9=auth['currentUser'];if(!_0x2490a9){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x323777,_0x1a89e4,_0x316055]=await Promise['all']([checkForPendingMatchesInCollection(_0x2490a9,'pendingMatches'),checkForPendingMatchesInCollection(_0x2490a9,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x2490a9,'pendingMatchesD3')]),_0x24983c=_0x323777||_0x1a89e4||_0x316055;updateNotificationDot(_0x24983c),updateNotificationCache(_0x24983c);}catch(_0x3bfbb3){console['error']('Error\x20checking\x20pending\x20matches:',_0x3bfbb3);}}async function checkForPendingMatchesInCollection(_0x17cbf7,_0x3adbcc){const _0x4e5036=a10_0x918a,_0x89dc48=_0x17cbf7[_0x4e5036(0x1f8)],_0x49c1ac=_0x17cbf7[_0x4e5036(0x202)],_0x2dc7da=query(collection(db,_0x3adbcc),where('winnerId','==',_0x89dc48),where('approved','==',![])),_0x1e1195=await getDocs(_0x2dc7da);if(!_0x1e1195[_0x4e5036(0x1f5)])return!![];if(_0x49c1ac){const _0x27253b=query(collection(db,_0x3adbcc),where('winnerEmail','==',_0x49c1ac),where('approved','==',![])),_0x3e60d5=await getDocs(_0x27253b);if(!_0x3e60d5['empty'])return!![];}let _0x2284cc=await getUsernameFromAllSources(_0x17cbf7);if(_0x2284cc){const _0x240007=query(collection(db,_0x3adbcc),where('winnerUsername','==',_0x2284cc),where('approved','==',![])),_0x527ea2=await getDocs(_0x240007);if(!_0x527ea2[_0x4e5036(0x1f5)])return!![];}return![];}async function getUsernameFromAllSources(_0x2d961c){const _0x36b57e=a10_0x918a,_0x1d8f79=localStorage[_0x36b57e(0x203)](_0x36b57e(0x206));if(_0x1d8f79)return _0x1d8f79;try{const [_0x4f4093,_0x14c055,_0x4991ea]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x36b57e(0x1f1),'==',_0x2d961c[_0x36b57e(0x1f8)]))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x2d961c['uid']))),getDocs(query(collection(db,_0x36b57e(0x1fe)),where('userId','==',_0x2d961c[_0x36b57e(0x1f8)])))]);if(!_0x4f4093['empty']){const _0x4448d2=_0x4f4093['docs'][0x0]['data']()[_0x36b57e(0x208)];return localStorage[_0x36b57e(0x1fd)]('currentUsername',_0x4448d2),_0x4448d2;}if(!_0x14c055['empty']){const _0x4e6a1a=_0x14c055['docs'][0x0]['data']()['username'];return localStorage['setItem'](_0x36b57e(0x206),_0x4e6a1a),_0x4e6a1a;}if(!_0x4991ea['empty']){const _0x5d1109=_0x4991ea['docs'][0x0]['data']()[_0x36b57e(0x208)];return localStorage['setItem']('currentUsername',_0x5d1109),_0x5d1109;}const _0x164152=await getDoc(doc(db,_0x36b57e(0x1ec),_0x2d961c[_0x36b57e(0x1f8)]));if(_0x164152['exists']()&&_0x164152['data']()['username']){const _0x2ae5ad=_0x164152['data']()['username'];return localStorage[_0x36b57e(0x1fd)](_0x36b57e(0x206),_0x2ae5ad),_0x2ae5ad;}}catch(_0x5b25d7){console['error'](_0x36b57e(0x1ee),_0x5b25d7);}if(_0x2d961c['email'])return _0x2d961c['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x16a213){const _0x385e37=a10_0x918a,_0xa013c8={'status':_0x16a213,'timestamp':Date[_0x385e37(0x20b)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0xa013c8));}function a10_0x121f(){const _0x1a453f=['trace','right','users','position','Error\x20fetching\x20username:','2px\x20solid\x20white','toString','userId','#ff3b30','getElementById','999','empty','borderRadius','report-match-notification','uid','top','constructor','10px','__proto__','setItem','playersD3','disconnect','return\x20(function()\x20','error','email','getItem','log','onAuthStateChanged','currentUsername','style','username','none','parse','now','50%','backgroundColor','width','bind'];a10_0x121f=function(){return _0x1a453f;};return a10_0x121f();}function checkNotificationCache(){const _0x2b9518=a10_0x918a,_0x5c1cc0=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x5c1cc0)return null;try{const {status:_0x39fd74,timestamp:_0xf3fca4}=JSON[_0x2b9518(0x20a)](_0x5c1cc0),_0x339c5e=Date['now']();if(_0x339c5e-_0xf3fca4<CACHE_EXPIRY)return _0x39fd74;}catch(_0x5cd20a){}return null;}export function updateNotificationDot(_0x20b003){const _0x1f0b05=a10_0x918a,_0x5dc8f5=new MutationObserver((_0x39010a,_0x3fa737)=>{const _0x28d013=a10_0x918a,_0x5654f5=document['getElementById']('report-match-notification');_0x5654f5&&(updateDotStyle(_0x5654f5,_0x20b003),_0x3fa737[_0x28d013(0x1ff)]());});_0x5dc8f5['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x1419fa=document[_0x1f0b05(0x1f3)](_0x1f0b05(0x1f7));_0x1419fa&&(updateDotStyle(_0x1419fa,_0x20b003),_0x5dc8f5['disconnect']()),setTimeout(()=>_0x5dc8f5['disconnect'](),0x1388);}function updateDotStyle(_0x5eb3d0,_0x36e59b){const _0x181cdb=a10_0x918a;_0x36e59b?(_0x5eb3d0['style']['display']='block',_0x5eb3d0['style'][_0x181cdb(0x20d)]=_0x181cdb(0x1f2),_0x5eb3d0['style'][_0x181cdb(0x20e)]='10px',_0x5eb3d0['style']['height']=_0x181cdb(0x1fb),_0x5eb3d0['style'][_0x181cdb(0x1ed)]='absolute',_0x5eb3d0['style'][_0x181cdb(0x1f9)]='-5px',_0x5eb3d0['style'][_0x181cdb(0x1eb)]='-8px',_0x5eb3d0['style'][_0x181cdb(0x1f6)]=_0x181cdb(0x20c),_0x5eb3d0[_0x181cdb(0x207)]['border']=_0x181cdb(0x1ef),_0x5eb3d0[_0x181cdb(0x207)]['zIndex']=_0x181cdb(0x1f4)):_0x5eb3d0[_0x181cdb(0x207)]['display']=_0x181cdb(0x209);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{const _0x9dd769=a10_0x918a;setTimeout(()=>checkPendingMatches(),0x1f4),auth[_0x9dd769(0x205)](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});