const a33_0x1d0018=a33_0x127b,a33_0xf27596=(function(){let _0x49ebf5=!![];return function(_0x2e9803,_0x6163bc){const _0x5a1479=_0x49ebf5?function(){if(_0x6163bc){const _0x22866f=_0x6163bc['apply'](_0x2e9803,arguments);return _0x6163bc=null,_0x22866f;}}:function(){};return _0x49ebf5=![],_0x5a1479;};}()),a33_0x53c594=a33_0xf27596(this,function(){const _0x413bd3=a33_0x127b,_0x313e0c=function(){const _0x26af33=a33_0x127b;let _0xb7ddac;try{_0xb7ddac=Function('return\x20(function()\x20'+_0x26af33(0x1a8)+');')();}catch(_0x3ae62d){_0xb7ddac=window;}return _0xb7ddac;},_0x2c61c7=_0x313e0c(),_0x1c0dc9=_0x2c61c7['console']=_0x2c61c7[_0x413bd3(0x193)]||{},_0x17c02a=['log','warn','info',_0x413bd3(0x1a6),_0x413bd3(0x19f),'table',_0x413bd3(0x197)];for(let _0x29b933=0x0;_0x29b933<_0x17c02a['length'];_0x29b933++){const _0x38c535=a33_0xf27596['constructor']['prototype'][_0x413bd3(0x1af)](a33_0xf27596),_0x447718=_0x17c02a[_0x29b933],_0x9c3c87=_0x1c0dc9[_0x447718]||_0x38c535;_0x38c535[_0x413bd3(0x1c5)]=a33_0xf27596['bind'](a33_0xf27596),_0x38c535['toString']=_0x9c3c87[_0x413bd3(0x1b5)]['bind'](_0x9c3c87),_0x1c0dc9[_0x447718]=_0x38c535;}});a33_0x53c594();function a33_0x4d1c(){const _0x597f28=['sort','#ladder-d3\x20thead\x20tr','eloRating','length','kda','console','previousElo','\x20entries\x20in\x20eloHistoryD3','data','trace','timestamp','push','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','position','visibility','get','username','exception','country','filter','style','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','log','totalMatches','error','#50C878','{}.constructor(\x22return\x20this\x22)(\x20)','firstPlaceDate','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list','\x20ELO\x20change:\x20','head','ceil','wins','bind','set','change','abs','fontSize','D3:\x20Fallback\x20query\x20failed:','toString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','player','#ladder-d3\x20tbody','has','forEach','playersD3','innerHTML','now','D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...','string','D3:\x20Error\x20fetching\x20ELO\x20history:','toDate','map','losses','totalDeaths','__proto__','querySelector','userProfiles','toFixed','totalKills','find','desc','#F44336','winnerUsername'];a33_0x4d1c=function(){return _0x597f28;};return a33_0x4d1c();}import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x38a2a9 from'./firebase-idle-wrapper.js';function a33_0x127b(_0x191f05,_0x13dbd6){const _0x53c594=a33_0x4d1c();return a33_0x127b=function(_0xf27596,_0x3b12ac){_0xf27596=_0xf27596-0x18e;let _0x4d1c97=_0x53c594[_0xf27596];return _0x4d1c97;},a33_0x127b(_0x191f05,_0x13dbd6);}const styleEl=document['createElement'](a33_0x1d0018(0x1a2));styleEl['textContent']='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document[a33_0x1d0018(0x1ac)]['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x3b7716=![]){const _0x40859e=a33_0x1d0018,_0x4f039a=document[_0x40859e(0x1c6)]('#ladder-d3\x20tbody');if(!_0x4f039a){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x4f039a['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x48daf3=Date['now']();if(!_0x3b7716&&playerCacheD3['data']&&_0x48daf3-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x20f739=collection(db,_0x40859e(0x1bb)),_0x448d92=await getDocs(_0x20f739),_0x4434a3=[];_0x448d92['forEach'](_0x3e8ec9=>{const _0x269682=_0x40859e,_0x2e1cdf=_0x3e8ec9['data']();_0x2e1cdf['username']&&_0x4434a3['push']({..._0x2e1cdf,'id':_0x3e8ec9['id'],'elo':_0x2e1cdf[_0x269682(0x190)]||0x0,'position':_0x2e1cdf[_0x269682(0x19b)]||Number['MAX_SAFE_INTEGER']});});const _0x58810c=collection(db,_0x40859e(0x1c7)),_0x414ccd=await getDocs(_0x58810c),_0x1e531b=new Map();_0x414ccd['forEach'](_0x4232ed=>{const _0x264727=_0x40859e,_0x53a677=_0x4232ed[_0x264727(0x196)]();_0x53a677['username']&&_0x1e531b['set'](_0x53a677['username']['toLowerCase'](),_0x53a677);});for(const _0x26443b of _0x4434a3){const _0x30adf2=_0x26443b[_0x40859e(0x19e)]['toLowerCase']();if(_0x1e531b['has'](_0x30adf2)){const _0x1abc6a=_0x1e531b['get'](_0x30adf2);_0x1abc6a[_0x40859e(0x1a0)]&&(_0x26443b['country']=_0x1abc6a['country']['toLowerCase']());}}const _0x34f43c=_0x4434a3[_0x40859e(0x1c2)](_0x136e28=>_0x136e28['username']),_0x28be2f=await fetchBatchMatchStatsD3(_0x34f43c);_0x4434a3['sort']((_0x444c83,_0x3df5b8)=>{const _0x13d0ed=_0x40859e,_0x43ef77=_0x28be2f[_0x13d0ed(0x19d)](_0x444c83['username'])?.[_0x13d0ed(0x1a5)]||0x0,_0x350047=_0x28be2f['get'](_0x3df5b8['username'])?.['totalMatches']||0x0;if(_0x43ef77===0x0!==(_0x350047===0x0))return _0x43ef77===0x0?0x1:-0x1;return(_0x444c83[_0x13d0ed(0x19b)]||0x3e7)-(_0x3df5b8['position']||0x3e7);}),_0x4434a3[_0x40859e(0x1ba)]((_0xe8402a,_0x5ec304)=>{_0xe8402a['position']=_0x5ec304+0x1;}),playerCacheD3['data']=_0x4434a3,playerCacheD3[_0x40859e(0x198)]=_0x48daf3,updateLadderDisplayD3(_0x4434a3);}catch(_0x4b916c){console['error']('Error\x20loading\x20D3\x20ladder:',_0x4b916c),_0x4f039a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x4b916c['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x4b9ecc){const _0x2d2476=a33_0x1d0018;if(!_0x4b9ecc)return 0x0;const _0x419896=_0x4b9ecc[_0x2d2476(0x1c1)](),_0x2267bb=new Date(),_0x4a7b51=Math[_0x2d2476(0x1b2)](_0x2267bb-_0x419896);return Math[_0x2d2476(0x1ad)](_0x4a7b51/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x1d55b9,_0x15d839){const _0x18353b=a33_0x1d0018;try{const _0x340014=collection(db,_0x18353b(0x1bb)),_0x132165=await getDocs(_0x340014),_0x584610=[];_0x132165['forEach'](_0x56994e=>{const _0x41d7e5=_0x18353b;_0x584610[_0x41d7e5(0x199)]({'id':_0x56994e['id'],..._0x56994e['data']()});});const _0x5c5986=_0x584610[_0x18353b(0x1ca)](_0x3ffb23=>_0x3ffb23['username']===_0x1d55b9),_0x5ea9d3=_0x584610['find'](_0x1612bd=>_0x1612bd['username']===_0x15d839);if(!_0x5c5986||!_0x5ea9d3){console[_0x18353b(0x1a6)](_0x18353b(0x1aa));return;}if(_0x5c5986['position']>_0x5ea9d3['position']){const _0x429803=_0x5ea9d3[_0x18353b(0x19b)];for(const _0x3e40db of _0x584610){_0x3e40db['position']>=_0x5ea9d3['position']&&_0x3e40db['position']<_0x5c5986['position']&&_0x3e40db['username']!==_0x1d55b9&&await updateDoc(doc(db,'playersD3',_0x3e40db['id']),{'position':_0x3e40db[_0x18353b(0x19b)]+0x1});}await updateDoc(doc(db,'playersD3',_0x5c5986['id']),{'position':_0x429803});if(_0x429803===0x1){const _0x511a68=doc(db,'playersD3',_0x5c5986['id']),_0x2867d2=await getDoc(_0x511a68);!_0x2867d2[_0x18353b(0x196)]()[_0x18353b(0x1a9)]&&await updateDoc(_0x511a68,{'firstPlaceDate':Timestamp[_0x18353b(0x1bd)]()});}if(_0x5ea9d3['position']===0x1){const _0x29e440=doc(db,_0x18353b(0x1bb),_0x5ea9d3['id']);await updateDoc(_0x29e440,{'firstPlaceDate':null});}}}catch(_0xeb5d74){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0xeb5d74);}}async function updateLadderDisplayD3(_0x4ba579){const _0x2c1ff5=a33_0x1d0018;_0x4ba579['sort']((_0x526548,_0x55de18)=>_0x526548['position']-_0x55de18[_0x2c1ff5(0x19b)]);const _0x36c52f=document['querySelector'](_0x2c1ff5(0x1b8));if(!_0x36c52f)return;_0x36c52f[_0x2c1ff5(0x1bc)]='';const _0x335804=_0x4ba579[_0x2c1ff5(0x1c2)](_0x466241=>_0x466241['username']),_0x338270=await fetchBatchMatchStatsD3(_0x335804),_0x76ec61=document['querySelector'](_0x2c1ff5(0x18f));_0x76ec61[_0x2c1ff5(0x1bc)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0x42eaf1=_0x4ba579[_0x2c1ff5(0x1c2)](_0x546dc8=>{const _0x26e67d=_0x338270['get'](_0x546dc8['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x546dc8,_0x26e67d);})['join']('');_0x36c52f['innerHTML']=_0x42eaf1,getPlayersLastEloChangesD3(_0x335804)['then'](_0x1a2e46=>{const _0x4834f6=_0x2c1ff5,_0x55d36e=new Map();_0x36c52f['querySelectorAll']('tr')['forEach']((_0x5cf02d,_0x4ca0f3)=>{const _0x15a9ff=a33_0x127b;_0x4ca0f3<_0x335804[_0x15a9ff(0x191)]&&_0x55d36e['set'](_0x335804[_0x4ca0f3],_0x5cf02d);}),_0x1a2e46[_0x4834f6(0x1ba)]((_0x80808,_0x3d1ba4)=>{const _0x3be49e=_0x4834f6,_0x5d57b5=_0x55d36e[_0x3be49e(0x19d)](_0x3d1ba4);if(_0x5d57b5&&_0x80808!==0x0){const _0x5ce6fd=_0x5d57b5['querySelector']('td:nth-child(3)');if(_0x5ce6fd){const _0x14edf8=_0x80808>0x0?'+'+_0x80808:''+_0x80808,_0x15c765=_0x5ce6fd[_0x3be49e(0x1c6)]('.trend-indicator');_0x15c765&&(_0x15c765['textContent']=_0x14edf8,_0x15c765[_0x3be49e(0x1a2)]['color']=_0x80808>0x0?'#4CAF50':_0x3be49e(0x1cc),_0x15c765['style']['fontWeight']='bold',_0x15c765[_0x3be49e(0x1a2)][_0x3be49e(0x1b3)]='0.85em',_0x15c765['style']['display']='inline',_0x15c765['style'][_0x3be49e(0x19c)]='visible',_0x15c765['style']['opacity']='1');}}});})['catch'](_0x347c28=>console[_0x2c1ff5(0x1a6)]('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x347c28));}async function fetchBatchMatchStatsD3(_0x85687e){const _0x14b78d=a33_0x1d0018,_0xf08cee=new Map();try{const _0x578d7f=collection(db,'approvedMatchesD3'),_0x81b5c7=await getDocs(_0x578d7f);_0x81b5c7['forEach'](_0x220042=>{const _0x5c7185=a33_0x127b,_0x19c54a=_0x220042[_0x5c7185(0x196)]();if(_0x85687e['includes'](_0x19c54a['winnerUsername'])){const _0x590a19=_0x19c54a[_0x5c7185(0x1cd)];!_0xf08cee['has'](_0x590a19)&&_0xf08cee['set'](_0x590a19,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x1719f8=_0xf08cee[_0x5c7185(0x19d)](_0x590a19);_0x1719f8['wins']++,_0x1719f8['totalMatches']++,_0x1719f8[_0x5c7185(0x1c9)]+=parseInt(_0x19c54a['winnerScore'])||0x0,_0x1719f8['totalDeaths']+=parseInt(_0x19c54a['loserScore'])||0x0;}if(_0x85687e['includes'](_0x19c54a['loserUsername'])){const _0x386d13=_0x19c54a['loserUsername'];!_0xf08cee['has'](_0x386d13)&&_0xf08cee['set'](_0x386d13,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x218dae=_0xf08cee[_0x5c7185(0x19d)](_0x386d13);_0x218dae['losses']++,_0x218dae[_0x5c7185(0x1a5)]++,_0x218dae[_0x5c7185(0x1c9)]+=parseInt(_0x19c54a['loserScore'])||0x0,_0x218dae[_0x5c7185(0x1c4)]+=parseInt(_0x19c54a['winnerScore'])||0x0;}}),_0xf08cee[_0x14b78d(0x1ba)](_0x4c5007=>{const _0x4b6b41=_0x14b78d;_0x4c5007['kda']=_0x4c5007['totalDeaths']>0x0?(_0x4c5007['totalKills']/_0x4c5007['totalDeaths'])[_0x4b6b41(0x1c8)](0x2):_0x4c5007['totalKills'],_0x4c5007['winRate']=_0x4c5007[_0x4b6b41(0x1a5)]>0x0?(_0x4c5007[_0x4b6b41(0x1ae)]/_0x4c5007['totalMatches']*0x64)[_0x4b6b41(0x1c8)](0x1):0x0;});}catch(_0x20cdf3){console[_0x14b78d(0x1a6)]('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x20cdf3);}return _0xf08cee;}function createPlayerRowD3(_0x260b23,_0x1b016a){const _0x4d354a=a33_0x1d0018,_0x3d1613=parseFloat(_0x260b23['elo'])||0x0;let _0x15e3f6='gray';if(_0x3d1613>=0x7d0)_0x15e3f6=_0x4d354a(0x1a7);else{if(_0x3d1613>=0x708)_0x15e3f6='#FFD700';else{if(_0x3d1613>=0x640)_0x15e3f6='#C0C0C0';else _0x3d1613>=0x578&&(_0x15e3f6='#CD7F32');}}let _0x5e3b31='';return _0x260b23[_0x4d354a(0x1a0)]&&(_0x5e3b31='<img\x20src=\x22../images/flags/'+_0x260b23['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x260b23['country']+_0x4d354a(0x1a3)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x260b23['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x260b23[_0x4d354a(0x19e)])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x15e3f6+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x260b23['username']+_0x4d354a(0x1b6)+_0x5e3b31+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x15e3f6+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3d1613+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b016a[_0x4d354a(0x1a5)]+_0x4d354a(0x19a)+_0x1b016a['wins']+_0x4d354a(0x19a)+_0x1b016a[_0x4d354a(0x1c3)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b016a[_0x4d354a(0x192)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b016a['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD3(_0x470d48){const _0x164a69=a33_0x1d0018,_0x3193e5=new Map();_0x470d48['forEach'](_0xd371ee=>_0x3193e5['set'](_0xd371ee,0x0));try{console['log']('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x470d48);const _0x396c68=new Map(),_0x39d0e1=await getDocs(collection(db,'playersD3'));_0x39d0e1['forEach'](_0x19d5df=>{const _0x395581=a33_0x127b,_0x2d26dd=_0x19d5df['data']();_0x2d26dd[_0x395581(0x19e)]&&_0x396c68[_0x395581(0x1b0)](_0x19d5df['id'],_0x2d26dd['username']);}),console['log']('D3:\x20Player\x20ID\x20mappings:',Array['from'](_0x396c68['entries']()));const _0x581410=collection(db,'eloHistoryD3'),_0x88d87a=query(_0x581410,orderBy('timestamp',_0x164a69(0x1cb)),limit(0x64)),_0x285ded=await getDocs(_0x88d87a);_0x285ded['empty']?console['log'](_0x164a69(0x1be)):console[_0x164a69(0x1a4)]('D3:\x20Found\x20'+_0x285ded['size']+_0x164a69(0x195));const _0x41473c=new Map();_0x285ded['forEach'](_0x5445fa=>{const _0x33b4db=_0x164a69,_0x915c31=_0x5445fa['data']();let _0x536a95=null;if(_0x915c31['username'])_0x536a95=_0x915c31['username'];else{if(_0x915c31['playerUsername'])_0x536a95=_0x915c31['playerUsername'];else{if(_0x915c31['player']&&typeof _0x915c31[_0x33b4db(0x1b7)]===_0x33b4db(0x1bf))_0x536a95=_0x915c31['player'];else{if(_0x915c31['player']&&_0x396c68['has'](_0x915c31['player']))_0x536a95=_0x396c68['get'](_0x915c31['player']);else _0x915c31['playerId']&&_0x396c68[_0x33b4db(0x1b9)](_0x915c31['playerId'])&&(_0x536a95=_0x396c68['get'](_0x915c31['playerId']));}}}(_0x915c31['username']==='pilot'||_0x915c31['playerUsername']==='pilot'||_0x915c31[_0x33b4db(0x1b7)]&&_0x396c68[_0x33b4db(0x19d)](_0x915c31[_0x33b4db(0x1b7)])==='pilot')&&console[_0x33b4db(0x1a4)]('D3:\x20Found\x20pilot\x20entry:',_0x915c31),_0x536a95&&_0x470d48['includes'](_0x536a95)&&(!_0x41473c['has'](_0x536a95)&&_0x41473c['set'](_0x536a95,[]),_0x41473c['get'](_0x536a95)[_0x33b4db(0x199)]({..._0x915c31,'timestamp':_0x915c31['timestamp']?.['seconds']||0x0}));}),console[_0x164a69(0x1a4)]('D3:\x20Found\x20entries\x20for\x20'+_0x41473c['size']+'\x20players'),_0x41473c['forEach']((_0x404fe2,_0x5a6f38)=>{const _0x4833cd=_0x164a69;if(_0x404fe2[_0x4833cd(0x191)]>0x0){_0x404fe2[_0x4833cd(0x18e)]((_0x7e599d,_0x2b9465)=>_0x2b9465[_0x4833cd(0x198)]-_0x7e599d['timestamp']);const _0xbc81c0=_0x404fe2[_0x4833cd(0x1ca)](_0x2843a5=>_0x2843a5[_0x4833cd(0x1b1)]!==undefined||_0x2843a5['newElo']!==undefined&&_0x2843a5['previousElo']!==undefined);if(_0xbc81c0){let _0x3c9dc7;if(_0xbc81c0['change']!==undefined)_0x3c9dc7=_0xbc81c0[_0x4833cd(0x1b1)];else _0xbc81c0['newElo']!==undefined&&_0xbc81c0['previousElo']!==undefined&&(_0x3c9dc7=_0xbc81c0['newElo']-_0xbc81c0[_0x4833cd(0x194)]);_0x3c9dc7!==undefined&&(_0x3193e5['set'](_0x5a6f38,_0x3c9dc7),console[_0x4833cd(0x1a4)]('D3:\x20'+_0x5a6f38+_0x4833cd(0x1ab)+_0x3c9dc7));}}});if(_0x41473c['size']===0x0){console['log']('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x48d90d=collection(db,'eloHistory'),_0x52c280=query(_0x48d90d,where('gameMode','==','D3'),orderBy('timestamp','desc'),limit(0x32));try{const _0x32f4b5=await getDocs(_0x52c280);console['log']('D3:\x20Found\x20'+_0x32f4b5['size']+'\x20fallback\x20entries'),_0x32f4b5[_0x164a69(0x1ba)](_0x598f5b=>{const _0x56dd4d=_0x164a69,_0x195d62=_0x598f5b['data']();let _0x29c8df=_0x195d62['username']||_0x195d62['playerUsername'];!_0x29c8df&&_0x195d62['player']&&_0x396c68['has'](_0x195d62['player'])&&(_0x29c8df=_0x396c68['get'](_0x195d62['player']));if(_0x29c8df&&_0x470d48['includes'](_0x29c8df)){const _0x20bdd4=_0x195d62[_0x56dd4d(0x1b1)]||(_0x195d62['newElo']!==undefined&&_0x195d62[_0x56dd4d(0x194)]!==undefined?_0x195d62['newElo']-_0x195d62['previousElo']:0x0);_0x20bdd4!==0x0&&(_0x3193e5['set'](_0x29c8df,_0x20bdd4),console['log']('D3:\x20'+_0x29c8df+'\x20fallback\x20ELO\x20change:\x20'+_0x20bdd4));}});}catch(_0x4cfaf1){console['log'](_0x164a69(0x1b4),_0x4cfaf1);}}const _0x30baa1=Array['from'](_0x3193e5['entries']())[_0x164a69(0x1a1)](([_0x5369e5,_0x554eb2])=>_0x554eb2!==0x0);console['log']('D3:\x20Final\x20ELO\x20changes:',_0x30baa1);}catch(_0x1293e2){console['error'](_0x164a69(0x1c0),_0x1293e2);}return _0x3193e5;}export{displayLadderD3,updatePlayerPositions};