const a47_0x4daa2b=a47_0xb438,a47_0x38c65c=(function(){let _0x5b4608=!![];return function(_0x54c22a,_0x150f29){const _0xdb53d3=_0x5b4608?function(){const _0x30534c=a47_0xb438;if(_0x150f29){const _0x14d624=_0x150f29[_0x30534c(0xe4)](_0x54c22a,arguments);return _0x150f29=null,_0x14d624;}}:function(){};return _0x5b4608=![],_0xdb53d3;};}()),a47_0x352f2d=a47_0x38c65c(this,function(){const _0x482643=a47_0xb438,_0x1118df=function(){const _0x5e523a=a47_0xb438;let _0x1d7d42;try{_0x1d7d42=Function('return\x20(function()\x20'+_0x5e523a(0xcb)+');')();}catch(_0x4fcb18){_0x1d7d42=window;}return _0x1d7d42;},_0x2a80d0=_0x1118df(),_0x274974=_0x2a80d0['console']=_0x2a80d0['console']||{},_0x1d29b0=['log','warn','info','error','exception','table','trace'];for(let _0x2ba477=0x0;_0x2ba477<_0x1d29b0['length'];_0x2ba477++){const _0x28a8a0=a47_0x38c65c['constructor']['prototype']['bind'](a47_0x38c65c),_0xd63927=_0x1d29b0[_0x2ba477],_0x16a2ff=_0x274974[_0xd63927]||_0x28a8a0;_0x28a8a0['__proto__']=a47_0x38c65c['bind'](a47_0x38c65c),_0x28a8a0[_0x482643(0xe3)]=_0x16a2ff['toString']['bind'](_0x16a2ff),_0x274974[_0xd63927]=_0x28a8a0;}});a47_0x352f2d();function a47_0xe910(){const _0x511349=['Purchase\x20','parentNode','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>','RedeemStore','getElementById','userProfiles','Insufficient\x20points','div','uid','Purchase\x20failed:','error','split','\x20Points','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Please\x20sign\x20in\x20to\x20select\x20themes','\x20theme\x20for\x20','üëë\x20Admin\x20controls\x20enabled','\x20not\x20found','remove','info','appendChild','textContent','createElement','user-points','points','\x20theme\x20applied!','store-message','disabled','You\x20must\x20purchase\x20this\x20theme\x20first','store-content','{}.constructor(\x22return\x20this\x22)(\x20)','name','‚úÖ\x20Purchased\x20','confirm','dataset','none','store-item','.themes-grid','sign-in-paid','[data-theme]','Emerald','forEach','New\x20user\x20profile\x20created','classList','log','\x20points?','transactions','üè™\x20Redeem\x20store\x20initializing...','click','email','toLocaleString','default','querySelectorAll','display','toString','apply','Gold','currentUser','\x20theme','apply-theme','price','block','includes','sign-in-free','opacity','Current\x20Theme','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-','You\x20can\x20see\x20better!','cursor','closest','Please\x20sign\x20in\x20to\x20purchase\x20themes','\x20items','Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer','entries','add','getCurrentTheme','.theme-select-btn','style','visible','success','ThemeSystem','isUserAdmin','Sign\x20in\x20to\x20Apply'];a47_0xe910=function(){return _0x511349;};return a47_0xe910();}import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':a47_0x4daa2b(0xf5)},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':a47_0x4daa2b(0xd5),'description':'Emerald\x20City!'},'gold':{'price':0x320,'name':a47_0x4daa2b(0xe5),'description':'Only\x20the\x20best\x20get\x20this\x20one'},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':a47_0x4daa2b(0xf0)},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x411e77=a47_0x4daa2b;console[_0x411e77(0xd9)](_0x411e77(0xdc)),storeContainer=document['getElementById'](_0x411e77(0xca)),pointsDisplay=document[_0x411e77(0xb1)](_0x411e77(0xc4)),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x2dd126=>{const _0x20519e=a47_0xb438;if(_0x2dd126){console['log']('‚úÖ\x20User\x20authenticated:',_0x2dd126['displayName']||_0x2dd126['email']);if(authWarning)authWarning['style']['display']=_0x20519e(0xd0);if(storeContainer)storeContainer[_0x20519e(0xfa)][_0x20519e(0xe2)]=_0x20519e(0xea);await loadUserData(_0x2dd126),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style']['display']='block';if(storeContainer)storeContainer['style']['display']=_0x20519e(0xd0);userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x277b4f){const _0x680740=a47_0x4daa2b;try{const _0xcf3fb2=doc(db,'userProfiles',_0x277b4f['uid']),_0x3c9802=await getDoc(_0xcf3fb2);if(_0x3c9802['exists']()){const _0x4a2074=_0x3c9802['data']();userData={'points':_0x4a2074[_0x680740(0xc5)]||0x0,'inventory':_0x4a2074['inventory']||[],'isAdmin':_0x4a2074['isAdmin']||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console['log'](_0x680740(0xbd)),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console[_0x680740(0xd9)]('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+',\x20Inventory:\x20'+userData['inventory']['length']+_0x680740(0xf4));}else await setDoc(_0xcf3fb2,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x277b4f['displayName']||_0x277b4f[_0x680740(0xde)]?.[_0x680740(0xb8)]('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay[_0x680740(0xc2)]='0'),window[_0x680740(0xfe)]=![],console[_0x680740(0xd9)](_0x680740(0xd7));}catch(_0x3c3d10){console[_0x680740(0xb7)]('Error\x20loading\x20user\x20data:',_0x3c3d10);}}function userOwnsTheme(_0x4ba5e2){if(THEMES[_0x4ba5e2]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x4ba5e2);}async function purchaseTheme(_0x43fe6d){const _0x41e24d=a47_0x4daa2b,_0x2d557e=auth['currentUser'];if(!_0x2d557e)return showMessage(_0x41e24d(0xf3),'error'),![];const _0x5e0f66=THEMES[_0x43fe6d];if(!_0x5e0f66)return console[_0x41e24d(0xb7)]('Theme\x20'+_0x43fe6d+'\x20not\x20found'),![];if(userData['points']<_0x5e0f66['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x5e0f66['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x43fe6d))return showMessage('You\x20already\x20own\x20the\x20'+_0x5e0f66['name']+_0x41e24d(0xe7),'info'),![];try{const _0x5bf047=doc(db,_0x41e24d(0xb2),_0x2d557e[_0x41e24d(0xb5)]),_0x17a164=await getDoc(_0x5bf047);if(!_0x17a164['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x2dac59=_0x17a164['data'](),_0x4324a7=_0x2dac59['points']||0x0,_0x18d352=_0x2dac59['inventory']||[];if(_0x4324a7<_0x5e0f66['price'])return showMessage(_0x41e24d(0xb3),'error'),![];if(_0x18d352[_0x41e24d(0xeb)]('theme_'+_0x43fe6d))return showMessage('You\x20already\x20own\x20this\x20theme',_0x41e24d(0xc0)),![];const _0x5b2a01=_0x4324a7-_0x5e0f66[_0x41e24d(0xe9)],_0x17c8da=[..._0x18d352,'theme_'+_0x43fe6d];return await updateDoc(_0x5bf047,{'points':_0x5b2a01,'inventory':_0x17c8da,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,_0x41e24d(0xdb)),{'userId':_0x2d557e['uid'],'userEmail':_0x2d557e[_0x41e24d(0xde)],'itemId':'theme_'+_0x43fe6d,'itemTitle':_0x5e0f66['name']+'\x20Theme','price':_0x5e0f66[_0x41e24d(0xe9)],'type':'purchase','category':'theme','timestamp':serverTimestamp()}),userData['points']=_0x5b2a01,userData['inventory']=_0x17c8da,pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x41e24d(0xdf)]()),console['log'](_0x41e24d(0xcd)+_0x5e0f66['name']+'\x20theme\x20for\x20'+_0x5e0f66['price']+'\x20points'),!![];}catch(_0x3492ae){return console['error'](_0x41e24d(0xb6),_0x3492ae),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}function applyTheme(_0x40cca6){const _0x1a0e74=a47_0x4daa2b;if(!userOwnsTheme(_0x40cca6))return showMessage(_0x1a0e74(0xc9),'error'),![];return window['ThemeSystem']?(window['ThemeSystem']['switchTheme'](_0x40cca6),showMessage((THEMES[_0x40cca6]?.['name']||_0x40cca6)+_0x1a0e74(0xc6),'success'),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0x55e9b5=a47_0x4daa2b,_0x3789b3=document['querySelector'](_0x55e9b5(0xd2));if(!_0x3789b3){console[_0x55e9b5(0xb7)]('Themes\x20container\x20not\x20found');return;}_0x3789b3['innerHTML']='',Object[_0x55e9b5(0xf6)](THEMES)[_0x55e9b5(0xd6)](([_0x1869b3,_0x45bdab])=>{const _0x439a56=_0x55e9b5,_0x3b21b7=document[_0x439a56(0xc3)]('div');_0x3b21b7['className']=_0x439a56(0xd1),_0x3b21b7[_0x439a56(0xcf)]['theme']=_0x1869b3,_0x3b21b7['dataset']['itemId']='theme_'+_0x1869b3,_0x3b21b7['dataset'][_0x439a56(0xe9)]=_0x45bdab['price'],_0x3b21b7['innerHTML']=_0x439a56(0xef)+_0x1869b3+_0x439a56(0xaf)+(_0x45bdab['price']===0x0?'FREE':_0x45bdab[_0x439a56(0xe9)]+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x45bdab['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x45bdab['description']+_0x439a56(0xba),_0x3789b3[_0x439a56(0xc1)](_0x3b21b7);}),setupThemeButtons();}function a47_0xb438(_0x409823,_0x1e0282){const _0x352f2d=a47_0xe910();return a47_0xb438=function(_0x38c65c,_0x51ad49){_0x38c65c=_0x38c65c-0xad;let _0xe91066=_0x352f2d[_0x38c65c];return _0xe91066;},a47_0xb438(_0x409823,_0x1e0282);}function setupThemeButtons(){const _0x50154a=a47_0x4daa2b,_0x335754=document[_0x50154a(0xe1)]('.theme-select-btn');_0x335754['forEach'](_0x18dffd=>{const _0x2644bd=_0x50154a;_0x18dffd['addEventListener'](_0x2644bd(0xdd),async _0x58c2a7=>{const _0x33177c=_0x2644bd;_0x58c2a7['preventDefault']();const _0x1a65cb=auth[_0x33177c(0xe6)];if(!_0x1a65cb){showMessage(_0x33177c(0xbb),'error');return;}const _0x308a28=_0x18dffd[_0x33177c(0xf2)]('[data-theme]'),_0xa82872=_0x308a28['dataset']['theme'],_0x4c7b6a=THEMES[_0xa82872];if(!_0x4c7b6a){console[_0x33177c(0xb7)]('Theme\x20'+_0xa82872+_0x33177c(0xbe));return;}console['log']('Theme\x20clicked:\x20'+_0x4c7b6a['name']+'\x20('+_0xa82872+')');if(_0x18dffd[_0x33177c(0xc8)]){_0x4c7b6a[_0x33177c(0xe9)]>0x0&&showMessage('You\x20need\x20'+_0x4c7b6a['price']+'\x20points\x20to\x20purchase\x20this\x20theme',_0x33177c(0xb7));return;}if(_0x18dffd['textContent']==='Current\x20Theme'){showMessage(_0x4c7b6a[_0x33177c(0xcc)]+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x18dffd['textContent']==='Apply\x20Theme'){applyTheme(_0xa82872),updateThemeButtons();return;}if(_0x18dffd[_0x33177c(0xc2)]['includes']('Buy')){const _0x1feffd=window[_0x33177c(0xce)](_0x33177c(0xad)+_0x4c7b6a[_0x33177c(0xcc)]+_0x33177c(0xbc)+_0x4c7b6a[_0x33177c(0xe9)]+_0x33177c(0xda));if(!_0x1feffd)return;const _0x40f140=await purchaseTheme(_0xa82872);_0x40f140&&(showMessage(_0x4c7b6a['name']+'\x20theme\x20purchased!',_0x33177c(0xfc)),applyTheme(_0xa82872),updateThemeButtons());return;}userOwnsTheme(_0xa82872)?applyTheme(_0xa82872):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0x33177c(0xb7));});}),updateThemeButtons();}function updateThemeButtons(){const _0x226af7=a47_0x4daa2b,_0x5522fa=window['ThemeSystem']?window[_0x226af7(0xfd)][_0x226af7(0xf8)]():_0x226af7(0xe0),_0xe27737=auth['currentUser'];document['querySelectorAll'](_0x226af7(0xf9))['forEach'](_0x185836=>{const _0x1fde12=_0x226af7,_0x3d81d5=_0x185836['closest'](_0x1fde12(0xd4)),_0x571100=_0x3d81d5['dataset']['theme'],_0x101f4a=THEMES[_0x571100];if(!_0x101f4a)return;_0x185836[_0x1fde12(0xc8)]=![],_0x185836[_0x1fde12(0xfa)]['opacity']='',_0x185836['style']['cursor']='pointer',_0x185836['classList']['remove']('current-theme','apply-theme','can-afford','cannot-afford',_0x1fde12(0xec),'sign-in-paid');if(!_0xe27737){_0x101f4a['price']===0x0?(_0x185836['textContent']=_0x1fde12(0xff),_0x185836[_0x1fde12(0xd8)]['add']('sign-in-free')):(_0x185836['textContent']='Sign\x20in\x20to\x20Purchase',_0x185836[_0x1fde12(0xc8)]=!![],_0x185836['style']['opacity']='0.7',_0x185836['classList']['add'](_0x1fde12(0xd3)));return;}if(_0x571100===_0x5522fa){_0x185836['textContent']=_0x1fde12(0xee),_0x185836['classList']['add']('current-theme'),_0x185836['disabled']=!![],_0x185836['style'][_0x1fde12(0xf1)]='default';return;}if(userOwnsTheme(_0x571100)){_0x185836[_0x1fde12(0xc2)]='Apply\x20Theme',_0x185836['classList'][_0x1fde12(0xf7)](_0x1fde12(0xe8));return;}if(userData['points']>=_0x101f4a['price']){_0x185836['textContent']='Buy\x20for\x20'+_0x101f4a['price']+_0x1fde12(0xb9),_0x185836['classList']['add']('can-afford');return;}_0x185836['textContent']='Need\x20'+_0x101f4a['price']+'\x20Points',_0x185836[_0x1fde12(0xd8)]['add']('cannot-afford'),_0x185836[_0x1fde12(0xfa)][_0x1fde12(0xed)]='0.5',_0x185836[_0x1fde12(0xc8)]=!![],_0x185836[_0x1fde12(0xfa)]['cursor']='not-allowed';});}function showMessage(_0x597f98,_0x476bf9='info'){const _0x40caec=a47_0x4daa2b,_0x2a1dfe=document['getElementById']('store-message');_0x2a1dfe&&_0x2a1dfe[_0x40caec(0xbf)]();const _0xf71f83=document['createElement'](_0x40caec(0xb4));_0xf71f83['id']=_0x40caec(0xc7),_0xf71f83['className']='store-message\x20store-message-'+_0x476bf9,_0xf71f83[_0x40caec(0xc2)]=_0x597f98,document['body']['appendChild'](_0xf71f83),requestAnimationFrame(()=>{const _0x258448=_0x40caec;_0xf71f83['classList']['add'](_0x258448(0xfb));}),setTimeout(()=>{_0xf71f83['classList']['remove']('visible'),setTimeout(()=>{const _0x48d007=a47_0xb438;_0xf71f83[_0x48d007(0xae)]&&_0xf71f83['remove']();},0x12c);},0xfa0);}window[a47_0x4daa2b(0xb0)]={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log']('üè™\x20Redeem\x20store\x20loaded');