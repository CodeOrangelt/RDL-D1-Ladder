const a4_0x52d11f=a4_0x106c,a4_0x1fd265=(function(){let _0x35069d=!![];return function(_0xe5372c,_0x15b471){const _0x1ed971=_0x35069d?function(){if(_0x15b471){const _0x42c910=_0x15b471['apply'](_0xe5372c,arguments);return _0x15b471=null,_0x42c910;}}:function(){};return _0x35069d=![],_0x1ed971;};}()),a4_0x389b33=a4_0x1fd265(this,function(){const _0x1692fe=a4_0x106c,_0x62d45b=function(){let _0x177522;try{_0x177522=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x8117be){_0x177522=window;}return _0x177522;},_0x38f62c=_0x62d45b(),_0x51a247=_0x38f62c['console']=_0x38f62c['console']||{},_0x25a20c=['log','warn','info','error',_0x1692fe(0x2d7),'table','trace'];for(let _0x4544a8=0x0;_0x4544a8<_0x25a20c[_0x1692fe(0x349)];_0x4544a8++){const _0x2b5495=a4_0x1fd265['constructor'][_0x1692fe(0x2c9)]['bind'](a4_0x1fd265),_0x310ec0=_0x25a20c[_0x4544a8],_0x4f894f=_0x51a247[_0x310ec0]||_0x2b5495;_0x2b5495['__proto__']=a4_0x1fd265[_0x1692fe(0x1f5)](a4_0x1fd265),_0x2b5495['toString']=_0x4f894f['toString'][_0x1692fe(0x1f5)](_0x4f894f),_0x51a247[_0x310ec0]=_0x2b5495;}});a4_0x389b33();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';function a4_0x106c(_0x4b3fb3,_0x419f5d){const _0x389b33=a4_0x4b52();return a4_0x106c=function(_0x1fd265,_0x56692b){_0x1fd265=_0x1fd265-0x1a5;let _0x4b5207=_0x389b33[_0x1fd265];return _0x4b5207;},a4_0x106c(_0x4b3fb3,_0x419f5d);}import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x4d8f45){const _0x309226=a4_0x106c;if(!_0x4d8f45)return _0x309226(0x390);_0x4d8f45=_0x4d8f45['replace']('#','');_0x4d8f45['length']===0x3&&(_0x4d8f45=_0x4d8f45['split']('')['map'](_0x58c78b=>_0x58c78b+_0x58c78b)['join'](''));if(_0x4d8f45['length']!==0x6)return'#ffffff';const _0x479600=parseInt(_0x4d8f45['substring'](0x0,0x2),0x10),_0x1095b0=parseInt(_0x4d8f45['substring'](0x2,0x4),0x10),_0x3f3151=parseInt(_0x4d8f45['substring'](0x4,0x6),0x10),_0x213653=(_0x479600*0x12b+_0x1095b0*0x24b+_0x3f3151*0x72)/0x3e8;return _0x213653>=0x80?_0x309226(0x1ea):'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener'](a4_0x52d11f(0x3b8),()=>{auth['onAuthStateChanged'](async _0x24dd79=>{const _0x298c2f=a4_0x106c;if(!_0x24dd79){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x462d83){console[_0x298c2f(0x23a)]('Error\x20initializing\x20dashboard:',_0x462d83),showNotification(_0x298c2f(0x331),'error');}});});async function getUserTabPermissions(_0x168bf0){const _0x186a92=a4_0x52d11f;if(!_0x168bf0)return[_0x186a92(0x367)];console['log'](_0x186a92(0x242)+_0x168bf0+'\x20in\x20all\x20collections...');const _0x5d4e73=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':_0x186a92(0x294)},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x310af1=auth['currentUser'];let _0x1192b2=null,_0x2a2933=null;for(const _0x345cd8 of _0x5d4e73){try{if(_0x310af1){const _0x5caf3b=doc(db,_0x345cd8[_0x186a92(0x252)],_0x310af1['uid']),_0x8b4dd4=await getDoc(_0x5caf3b);if(_0x8b4dd4[_0x186a92(0x2ac)]()){const _0x48e5ce=_0x8b4dd4[_0x186a92(0x2c6)]();console[_0x186a92(0x29f)]('Found\x20user\x20in\x20'+_0x345cd8['displayName']+'\x20by\x20UID:',_0x48e5ce);const _0x4dcadc=(_0x48e5ce['roleName']||_0x48e5ce['role']||'')[_0x186a92(0x270)]();if(_0x4dcadc&&_0x4dcadc!==_0x186a92(0x1ad)){_0x1192b2=_0x4dcadc,_0x2a2933=_0x345cd8[_0x186a92(0x255)],console['log']('Found\x20specific\x20role:\x20'+_0x1192b2+'\x20in\x20'+_0x2a2933);break;}}}if(!_0x1192b2){const _0x1f020b=collection(db,_0x345cd8['name']),_0x2cda96=query(_0x1f020b,where('email','==',_0x168bf0)),_0x27c513=await getDocs(_0x2cda96);if(!_0x27c513['empty']){const _0x493d59=_0x27c513['docs'][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0x345cd8['displayName']+'\x20with\x20email\x20'+_0x168bf0+':',_0x493d59);const _0x29561c=(_0x493d59[_0x186a92(0x336)]||_0x493d59['role']||'')[_0x186a92(0x270)]();if(_0x29561c&&_0x29561c!=='none'){_0x1192b2=_0x29561c,_0x2a2933=_0x345cd8['displayName'],console[_0x186a92(0x29f)]('Found\x20specific\x20role:\x20'+_0x1192b2+_0x186a92(0x385)+_0x2a2933);break;}}}}catch(_0x7e89e6){console['error'](_0x186a92(0x1aa)+_0x345cd8['displayName']+':',_0x7e89e6);}}if(_0x1192b2){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x1192b2+_0x186a92(0x2db)+_0x2a2933+')');const _0x25e4a3={'admin':[_0x186a92(0x367),_0x186a92(0x3a9),'manage-matches','manage-articles','manage-trophies',_0x186a92(0x35c),'inactive-players',_0x186a92(0x21f),'manage-trophies','elo-history','manage-highlights','user-roles-section',_0x186a92(0x1ab),'manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players','manage-matches',_0x186a92(0x287),'manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history','manage-highlights','user-roles-section','manage-matches',_0x186a92(0x3a6),'manage-levels-ribbons','manage-ribbons'],'council':[_0x186a92(0x367),'manage-players','manage-matches'],'creative\x20lead':['dashboard',_0x186a92(0x287),'manage-trophies','elo-history','manage-highlights']};if(_0x25e4a3[_0x1192b2])return console[_0x186a92(0x29f)](_0x186a92(0x308)+_0x1192b2+'\x27\x20has\x20permissions:',_0x25e4a3[_0x1192b2]),_0x25e4a3[_0x1192b2];}return console['log'](_0x186a92(0x342)+_0x168bf0+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x288898=[]){const _0x361a70=a4_0x52d11f,_0x7be89e=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x2ffa12=document['querySelectorAll'](_0x361a70(0x2f1));(!_0x288898||_0x288898['length']===0x0)&&(_0x288898=['dashboard']);_0x7be89e['forEach'](_0x1b2bdd=>{const _0x320fc8=_0x361a70,_0x5e4fb5=_0x1b2bdd['getAttribute']('data-section');_0x288898['includes'](_0x5e4fb5)?_0x1b2bdd['style']['display']='flex':_0x1b2bdd['style'][_0x320fc8(0x261)]=_0x320fc8(0x1ad),_0x1b2bdd['addEventListener'](_0x320fc8(0x388),()=>{const _0x407614=_0x320fc8,_0x23ca4c=_0x1b2bdd['getAttribute'](_0x407614(0x207));if(!_0x288898['includes'](_0x23ca4c)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x7be89e[_0x407614(0x253)](_0x3e7b9c=>_0x3e7b9c['classList']['remove']('active')),_0x1b2bdd['classList']['add']('active'),_0x2ffa12['forEach'](_0x31a477=>{_0x31a477['style']['display']='none';});const _0x196074=document[_0x407614(0x334)](_0x23ca4c);_0x196074&&(_0x196074['style']['display']='block',console['log']('Switched\x20to\x20'+_0x23ca4c+_0x407614(0x256)));});});const _0xcf66c1=document['querySelector'](_0x361a70(0x1f8)+_0x288898[0x0]+'\x22]');_0xcf66c1&&_0xcf66c1['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x6726d8=document['querySelectorAll']('.nav-item');let _0x117165=null,_0x5cfab1=new Set();_0x6726d8['forEach'](_0x3132f3=>{_0x3132f3['addEventListener']('click',function(){const _0x5b3a29=a4_0x106c,_0x2b330=this['getAttribute'](_0x5b3a29(0x207));if(_0x2b330===_0x117165)return;_0x117165&&(document['getElementById'](_0x117165)['style'][_0x5b3a29(0x261)]='none',_0x6726d8['forEach'](_0x5612f2=>_0x5612f2[_0x5b3a29(0x281)]['remove']('active'))),document['getElementById'](_0x2b330)['style'][_0x5b3a29(0x261)]='block',this['classList']['add']('active'),_0x117165=_0x2b330;});});}function loadSectionData(_0x4813b0){return;}async function initializeAdminDashboard(){const _0x349800=a4_0x52d11f;try{const _0x5e0e61=auth['currentUser'],_0x4d061d=await getUserTabPermissions(_0x5e0e61[_0x349800(0x3d1)]);console[_0x349800(0x29f)](_0x349800(0x39f)+_0x5e0e61['email']+_0x349800(0x2ff),_0x4d061d),window[_0x349800(0x368)]=_0x4d061d,setupSidebarNavigation(_0x4d061d),setupLadderSelector(),setupDashboardSection(),_0x4d061d['includes'](_0x349800(0x3a9))&&setupManagePlayersSection(),_0x4d061d['includes'](_0x349800(0x223))&&setupEloHistorySection(),_0x4d061d['includes'](_0x349800(0x35c))&&setupRankControls(),_0x4d061d['includes']('manage-articles')&&setupManageArticlesSection(),_0x4d061d['includes'](_0x349800(0x381))&&setupUserRolesSection(),_0x4d061d[_0x349800(0x22e)]('manage-trophies')&&setupTrophyManagementSection(),_0x4d061d['includes'](_0x349800(0x24a))&&setupManageHighlightsSection(),_0x4d061d['includes']('inactive-players')&&setupInactivePlayersSection(),_0x4d061d['includes']('manage-matches')&&setupManageMatchesSection(),_0x4d061d['includes'](_0x349800(0x3a6))&&setupManagePointsSection(),_0x4d061d['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x4d061d);}catch(_0x3438c9){console[_0x349800(0x23a)]('Error\x20initializing\x20admin\x20dashboard:',_0x3438c9);}}function setupDataLoadButtons(_0x3f4092=[]){const _0x27e35d=a4_0x52d11f;(!_0x3f4092||_0x3f4092['length']===0x0)&&(_0x3f4092=[_0x27e35d(0x367)]);const _0x2b35a4=document['getElementById'](_0x27e35d(0x24c));_0x2b35a4&&_0x2b35a4['addEventListener'](_0x27e35d(0x388),function(){const _0x452aea=_0x27e35d;this['classList']['add'](_0x452aea(0x2e3)),this[_0x452aea(0x319)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0x715847=_0x452aea;this[_0x715847(0x281)]['remove']('loading'),this['innerHTML']=_0x715847(0x3e7);})['catch'](_0x3085d2=>{const _0x417ddf=_0x452aea;console[_0x417ddf(0x23a)]('Error\x20loading\x20dashboard:',_0x3085d2),this['classList']['remove'](_0x417ddf(0x2e3)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3b8c20=_0x417ddf;this[_0x3b8c20(0x319)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x3f4092['includes'](_0x27e35d(0x2df))){const _0x537f7c=document[_0x27e35d(0x334)](_0x27e35d(0x3b5));_0x537f7c&&_0x537f7c[_0x27e35d(0x1f2)](_0x27e35d(0x388),function(){const _0x13a893=_0x27e35d;console['log']('Load\x20trophies\x20data\x20clicked'),this['classList'][_0x13a893(0x228)]('loading'),this[_0x13a893(0x319)]=_0x13a893(0x2d3),loadTrophyDefinitions()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})[_0x13a893(0x28e)](_0xc42344=>{const _0x168bf9=_0x13a893;console['error']('Error\x20loading\x20trophies:',_0xc42344),this['classList'][_0x168bf9(0x203)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x3f4092['includes'](_0x27e35d(0x3a9))){const _0x3b0080=document['getElementById']('load-players-data');_0x3b0080&&_0x3b0080[_0x27e35d(0x1f2)](_0x27e35d(0x388),function(){const _0x565076=_0x27e35d;console['log']('Load\x20players\x20data\x20clicked'),this[_0x565076(0x281)]['add'](_0x565076(0x2e3)),this['innerHTML']=_0x565076(0x2d3),loadPlayersData()['then'](()=>{const _0x3bb97c=_0x565076;this[_0x3bb97c(0x281)][_0x3bb97c(0x203)](_0x3bb97c(0x2e3)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x3349f9=>{const _0x1cb933=_0x565076;console['error'](_0x1cb933(0x2f0),_0x3349f9),this['classList'][_0x1cb933(0x203)](_0x1cb933(0x2e3)),this['innerHTML']=_0x1cb933(0x1b0),setTimeout(()=>{const _0x550a28=_0x1cb933;this['innerHTML']=_0x550a28(0x37b);},0xbb8);});});}if(_0x3f4092['includes']('elo-history')){const _0x3fbb3a=document['getElementById']('load-elo-history-data');_0x3fbb3a&&_0x3fbb3a['addEventListener']('click',function(){const _0x2e4c52=_0x27e35d;console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add'](_0x2e4c52(0x2e3)),this[_0x2e4c52(0x319)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)[_0x2e4c52(0x2e2)](()=>{const _0x13d244=_0x2e4c52;this['classList']['remove'](_0x13d244(0x2e3)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x2e4c52(0x28e)](_0x277935=>{const _0xb84279=_0x2e4c52;console[_0xb84279(0x23a)]('Error\x20loading\x20history:',_0x277935),this[_0xb84279(0x281)][_0xb84279(0x203)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x45f41b=_0xb84279;this[_0x45f41b(0x319)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x3f4092['includes'](_0x27e35d(0x287))){const _0x50c391=document[_0x27e35d(0x334)]('load-articles-data');_0x50c391&&_0x50c391[_0x27e35d(0x1f2)](_0x27e35d(0x388),function(){const _0x2008c9=_0x27e35d;console['log']('Load\x20articles\x20data\x20clicked'),this[_0x2008c9(0x281)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x772b4c=_0x2008c9;this['classList']['remove']('loading'),this['innerHTML']=_0x772b4c(0x2b8);})['catch'](_0x5a8ae0=>{const _0x1c2d9e=_0x2008c9;console['error'](_0x1c2d9e(0x3bd),_0x5a8ae0),this['classList']['remove']('loading'),this[_0x1c2d9e(0x319)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x483a6d=_0x1c2d9e;this[_0x483a6d(0x319)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x3f4092[_0x27e35d(0x22e)]('user-roles-section')){const _0x52ad45=document[_0x27e35d(0x334)]('load-users-data');_0x52ad45&&_0x52ad45['addEventListener']('click',function(){const _0x1d5850=_0x27e35d;console['log']('Load\x20users\x20data\x20clicked'),this[_0x1d5850(0x281)]['add']('loading'),this[_0x1d5850(0x319)]=_0x1d5850(0x2d3),loadUsersWithRoles()['then'](()=>{const _0x10be9a=_0x1d5850;this['classList']['remove'](_0x10be9a(0x2e3)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x5db831=>{console['error']('Error\x20loading\x20users:',_0x5db831),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x3f4092[_0x27e35d(0x22e)]('inactive-players')){const _0x3ad66e=document['getElementById']('load-inactive-players-data');_0x3ad66e&&_0x3ad66e['addEventListener'](_0x27e35d(0x388),function(){const _0xb2f0ea=_0x27e35d;console[_0xb2f0ea(0x29f)]('Load\x20inactive\x20players\x20data\x20clicked'),this['classList'][_0xb2f0ea(0x228)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x48731a=_0xb2f0ea;this['classList']['remove'](_0x48731a(0x2e3)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x5036d0=>{const _0x1e06c2=_0xb2f0ea;console['error'](_0x1e06c2(0x1a5),_0x5036d0),this['classList']['remove']('loading'),this['innerHTML']=_0x1e06c2(0x1b0),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x3f4092['includes']('manage-highlights')){const _0x417d4c=document['getElementById']('load-highlights-data');_0x417d4c&&_0x417d4c['addEventListener'](_0x27e35d(0x388),function(){const _0x52c6bd=_0x27e35d;console['log']('Load\x20highlights\x20data\x20clicked'),this[_0x52c6bd(0x281)][_0x52c6bd(0x228)](_0x52c6bd(0x2e3)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x52c6bd(0x2e2)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})[_0x52c6bd(0x28e)](_0x3f6a0c=>{const _0x4e0bdb=_0x52c6bd;console['error']('Error\x20loading\x20highlights:',_0x3f6a0c),this['classList']['remove']('loading'),this['innerHTML']=_0x4e0bdb(0x1b0),setTimeout(()=>{const _0x340fc8=_0x4e0bdb;this['innerHTML']=_0x340fc8(0x3e2);},0xbb8);});});}if(_0x3f4092['includes']('manage-matches')){const _0x4d96f9=document['getElementById']('load-matches-data');_0x4d96f9&&_0x4d96f9[_0x27e35d(0x1f2)]('click',function(){const _0x42e52d=_0x27e35d;console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x42e52d(0x319)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x129e5d=_0x42e52d;this[_0x129e5d(0x281)][_0x129e5d(0x203)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x2dc390=>{const _0x14e108=_0x42e52d;console['error']('Error\x20loading\x20matches:',_0x2dc390),this[_0x14e108(0x281)]['remove'](_0x14e108(0x2e3)),this['innerHTML']=_0x14e108(0x1b0),setTimeout(()=>{const _0x59ce0a=_0x14e108;this['innerHTML']=_0x59ce0a(0x3af);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x3f4092[_0x27e35d(0x22e)]('manage-ribbons')){const _0x5ccf49=document['getElementById']('load-ribbons-data');_0x5ccf49&&_0x5ccf49['addEventListener'](_0x27e35d(0x388),function(){const _0x5107ad=_0x27e35d;console['log'](_0x5107ad(0x34d)),this['classList']['add'](_0x5107ad(0x2e3)),this['innerHTML']=_0x5107ad(0x2d3),loadRibbonsData()[_0x5107ad(0x2e2)](()=>{const _0x297247=_0x5107ad;this[_0x297247(0x281)]['remove'](_0x297247(0x2e3)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x32a838=>{const _0x247548=_0x5107ad;console['error'](_0x247548(0x3b2),_0x32a838),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x418f8a=a4_0x52d11f;document['getElementById']('player-count')[_0x418f8a(0x2cf)]='-',document['getElementById'](_0x418f8a(0x35a))['textContent']='-',document[_0x418f8a(0x334)]('pending-count')[_0x418f8a(0x2cf)]='-',document[_0x418f8a(0x334)](_0x418f8a(0x361))['textContent']='-';}function setupLadderSelector(){const _0x2e4387=a4_0x52d11f,_0x628abb=document['querySelectorAll'](_0x2e4387(0x3ca));_0x628abb['forEach'](_0x5063af=>{_0x5063af['addEventListener']('change',()=>{const _0x203f5a=a4_0x106c;currentLadder=_0x5063af['value'],document['body'][_0x203f5a(0x1ee)]('data-ladder',currentLadder);const _0x2be862=document['getElementById']('current-ladder-display');_0x2be862&&(_0x2be862['textContent']=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x203f5a(0x35a))['textContent']='-',document[_0x203f5a(0x334)]('pending-count')['textContent']='-',document['getElementById']('rejected-count')[_0x203f5a(0x2cf)]='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification(_0x203f5a(0x2bd)+currentLadder+_0x203f5a(0x2fb),'info');});});const _0x19c12a=document['getElementById']('current-ladder-display');_0x19c12a&&(_0x19c12a['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x2659b9=a4_0x52d11f;try{console[_0x2659b9(0x29f)]('Loading\x20dashboard\x20overview\x20data...'),document['getElementById']('player-count')[_0x2659b9(0x2cf)]='-',document['getElementById'](_0x2659b9(0x35a))['textContent']='-',document[_0x2659b9(0x334)]('pending-count')['textContent']='-',document[_0x2659b9(0x334)]('rejected-count')['textContent']='-';const _0x359dbc=currentLadder==='D1'?'players':currentLadder==='D2'?_0x2659b9(0x276):'playersD3',_0x27d4da=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0xa7384=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?_0x2659b9(0x3b0):'pendingMatchesD3',_0x3b9a29=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0x2659b9(0x1da):_0x2659b9(0x288);console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x359dbc+',\x20'+_0x27d4da);const _0xbd472c=await getDocs(collection(db,_0x359dbc)),_0x7d45f7=_0xbd472c[_0x2659b9(0x26e)],_0x70471f=await getDocs(collection(db,_0x27d4da)),_0x5934ef=_0x70471f[_0x2659b9(0x26e)],_0x107528=await getDocs(collection(db,_0xa7384)),_0x1f99f1=_0x107528['size'],_0x3a3a5c=await getDocs(collection(db,_0x3b9a29)),_0x78583a=_0x3a3a5c[_0x2659b9(0x26e)];return document[_0x2659b9(0x334)]('player-count')['textContent']=_0x7d45f7,document['getElementById']('match-count')['textContent']=_0x5934ef,document[_0x2659b9(0x334)]('pending-count')['textContent']=_0x1f99f1,document['getElementById'](_0x2659b9(0x361))['textContent']=_0x78583a,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x28f4ba){console['error']('Error\x20loading\x20dashboard\x20data:',_0x28f4ba);throw _0x28f4ba;}}async function createRankDistributionChart(){const _0x410ab5=a4_0x52d11f;try{const _0x1e3e3d=collection(db,currentLadder==='D1'?'players':_0x410ab5(0x276)),_0x93a267=await getDocs(_0x1e3e3d),_0x46ceee={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x93a267['forEach'](_0x2659a2=>{const _0x3ccb1f=_0x410ab5,_0xa9ea52=_0x2659a2[_0x3ccb1f(0x2c6)](),_0x13492f=_0xa9ea52[_0x3ccb1f(0x2d9)]||0x4b0;if(_0x13492f>=0x7d0)_0x46ceee[_0x3ccb1f(0x1d8)]++;else{if(_0x13492f>=0x708)_0x46ceee['Gold']++;else{if(_0x13492f>=0x640)_0x46ceee[_0x3ccb1f(0x389)]++;else{if(_0x13492f>=0x578)_0x46ceee[_0x3ccb1f(0x218)]++;else _0x46ceee['Unranked']++;}}}});const _0x51c40a=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0x51c40a,{'type':'doughnut','data':{'labels':Object[_0x410ab5(0x391)](_0x46ceee),'datasets':[{'data':Object[_0x410ab5(0x3ab)](_0x46ceee),'backgroundColor':['#808080',_0x410ab5(0x2f3),'#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x410ab5(0x2cb),'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x293e93){console[_0x410ab5(0x23a)]('Error\x20creating\x20rank\x20distribution\x20chart:',_0x293e93),document['getElementById'](_0x410ab5(0x233))['innerHTML']=_0x410ab5(0x1f7);}}async function createActivityChart(){const _0x5c3684=a4_0x52d11f;try{const _0xb2802f=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x335f65=collection(db,_0xb2802f),_0x2368e2=new Date();_0x2368e2['setDate'](_0x2368e2['getDate']()-0x7);const _0x1ea6b5=query(_0x335f65,where('approvedAt','>=',_0x2368e2),orderBy('approvedAt','asc')),_0x3def8e=await getDocs(_0x1ea6b5),_0xb3e127=['Sunday','Monday',_0x5c3684(0x3ee),'Wednesday','Thursday',_0x5c3684(0x249),'Saturday'],_0x45d290=_0xb3e127['reduce']((_0x294bce,_0xb04314)=>({..._0x294bce,[_0xb04314]:0x0}),{});_0x3def8e['forEach'](_0x367f87=>{const _0x338364=_0x5c3684,_0x458b09=_0x367f87['data']();if(_0x458b09[_0x338364(0x3d5)]){const _0x1b1b8b=_0xb3e127[new Date(_0x458b09['approvedAt']['seconds']*0x3e8)['getDay']()];_0x45d290[_0x1b1b8b]++;}});const _0x12a73c=document['getElementById'](_0x5c3684(0x26f));charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x12a73c,{'type':_0x5c3684(0x3dc),'data':{'labels':_0xb3e127,'datasets':[{'label':'Matches\x20Played','data':_0xb3e127['map'](_0x2da725=>_0x45d290[_0x2da725]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0x5c3684(0x36c):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x5c3684(0x372)}}},'plugins':{'legend':{'labels':{'color':_0x5c3684(0x3b1)}},'title':{'display':!![],'text':currentLadder+_0x5c3684(0x25f),'color':_0x5c3684(0x3b1),'font':{'size':0x10}}}}});}catch(_0x39e963){console[_0x5c3684(0x23a)]('Error\x20creating\x20activity\x20chart:',_0x39e963),document['getElementById']('activity-chart')[_0x5c3684(0x319)]=_0x5c3684(0x1f7);}}async function loadPlayersData(){const _0x5a5ee8=a4_0x52d11f,_0x1eff89=document['getElementById'](_0x5a5ee8(0x25e));if(!_0x1eff89)return;_0x1eff89['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x28f502=_0x5a5ee8(0x30b);if(currentLadder==='D2')_0x28f502='playersD2';else currentLadder==='D3'&&(_0x28f502='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x28f502+'\x20collection...');const _0x513210=collection(db,_0x28f502),_0x1f4ef4=query(_0x513210,orderBy(_0x5a5ee8(0x2d9),'desc')),_0x4b1208=await getDocs(_0x1f4ef4);if(_0x4b1208[_0x5a5ee8(0x1f4)]){_0x1eff89[_0x5a5ee8(0x319)]=_0x5a5ee8(0x329);return;}_0x1eff89['innerHTML']='';let _0x3d59d1=0x1;_0x4b1208[_0x5a5ee8(0x253)](_0x57ab42=>{const _0x146f63=_0x5a5ee8,_0x2c5954=_0x57ab42['data'](),_0x559dd5=getRankFromElo(_0x2c5954[_0x146f63(0x2d9)]||0x4b0),_0x363274=getRankStyle(_0x2c5954[_0x146f63(0x2d9)]||0x4b0),_0x32ea7a=document['createElement']('tr');_0x32ea7a[_0x146f63(0x319)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x3d59d1+_0x146f63(0x240)+_0x363274['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2c5954['username']||_0x146f63(0x2ee))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x2c5954['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x363274['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x559dd5+_0x146f63(0x30e)+(_0x2c5954['wins']||0x0)+'W\x20/\x20'+(_0x2c5954['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x57ab42['id']+_0x146f63(0x269)+_0x57ab42['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1eff89['appendChild'](_0x32ea7a),_0x3d59d1++;}),setupPlayerActionButtons();}catch(_0x34f3e2){console['error']('Error\x20loading\x20players:',_0x34f3e2),_0x1eff89[_0x5a5ee8(0x319)]=_0x5a5ee8(0x271)+_0x34f3e2[_0x5a5ee8(0x2ae)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0xe27bb1){const _0x4be9be=a4_0x52d11f;if(_0xe27bb1>=0x7d0)return'Emerald';if(_0xe27bb1>=0x708)return'Gold';if(_0xe27bb1>=0x640)return'Silver';if(_0xe27bb1>=0x578)return'Bronze';return _0x4be9be(0x3a1);}function setupPlayerActionButtons(){const _0x2beb3d=a4_0x52d11f;document['querySelectorAll']('.edit-btn')[_0x2beb3d(0x253)](_0x15f871=>{const _0x436505=_0x2beb3d;_0x15f871[_0x436505(0x1f2)]('click',async _0x2a2239=>{const _0x30daaa=_0x2a2239['currentTarget']['dataset']['id'];openEditPlayerModal(_0x30daaa);});}),document['querySelectorAll']('.delete-btn')['forEach'](_0x1df621=>{const _0x34d989=_0x2beb3d;_0x1df621[_0x34d989(0x1f2)](_0x34d989(0x388),async _0xc9f662=>{const _0x1531a7=_0xc9f662['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x1531a7);});});}async function openEditPlayerModal(_0x2040d0){const _0x323cf9=a4_0x52d11f;try{const _0x415d92=currentLadder==='D1'?'players':'playersD2',_0x5aba85=doc(db,_0x415d92,_0x2040d0),_0x578805=await getDoc(_0x5aba85);if(!_0x578805[_0x323cf9(0x2ac)]()){showNotification(_0x323cf9(0x1df),_0x323cf9(0x23a));return;}const _0x1157d3=_0x578805[_0x323cf9(0x2c6)](),_0x52bacf=document['getElementById']('edit-player-modal'),_0x3b61e6=document[_0x323cf9(0x334)](_0x323cf9(0x306)),_0x5c9cd1=document['getElementById']('edit-elo'),_0x4784c0=document[_0x323cf9(0x334)]('edit-wins'),_0x4b4826=document[_0x323cf9(0x334)](_0x323cf9(0x35b));_0x3b61e6['value']=_0x1157d3['username']||'',_0x5c9cd1['value']=_0x1157d3['eloRating']||0x4b0,_0x4784c0['value']=_0x1157d3['wins']||0x0,_0x4b4826[_0x323cf9(0x297)]=_0x1157d3['losses']||0x0,_0x52bacf[_0x323cf9(0x31d)]['playerId']=_0x2040d0,_0x52bacf['classList']['add'](_0x323cf9(0x22d));}catch(_0xcc305c){console['error']('Error\x20opening\x20edit\x20modal:',_0xcc305c),showNotification(_0x323cf9(0x3f9),_0x323cf9(0x23a));}}async function saveEditedPlayer(){const _0x89a2fa=a4_0x52d11f;try{const _0x309b08=document['getElementById'](_0x89a2fa(0x3db)),_0x33e016=_0x309b08['dataset'][_0x89a2fa(0x393)];if(!_0x33e016){showNotification('No\x20player\x20selected','error');return;}const _0x2a0f95=document[_0x89a2fa(0x334)]('edit-username'),_0x30c485=document['getElementById']('edit-elo'),_0x407d53=document['getElementById'](_0x89a2fa(0x2e4)),_0x716608=document[_0x89a2fa(0x334)]('edit-losses'),_0x30520f=_0x2a0f95['value']['trim'](),_0x1b6f16=parseInt(_0x30c485['value']),_0x1ba7f0=parseInt(_0x407d53['value']),_0x225c41=parseInt(_0x716608['value']);if(!_0x30520f||isNaN(_0x1b6f16)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x1d2984=currentLadder==='D1'?_0x89a2fa(0x30b):'playersD2',_0x9ef702=doc(db,_0x1d2984,_0x33e016),_0x5383d3=await getDoc(_0x9ef702),_0x21b407=_0x5383d3[_0x89a2fa(0x2ac)]()?_0x5383d3[_0x89a2fa(0x2c6)]():{},_0x2d19f9=_0x21b407['eloRating']||0x4b0;await updateDoc(_0x9ef702,{'username':_0x30520f,'eloRating':_0x1b6f16,'wins':_0x1ba7f0||0x0,'losses':_0x225c41||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x1b6f16!==_0x2d19f9){const _0x9b11bf=currentLadder==='D1'?_0x89a2fa(0x320):_0x89a2fa(0x289);await addDoc(collection(db,_0x9b11bf),{'player':_0x30520f,'previousElo':_0x2d19f9,'newElo':_0x1b6f16,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x89a2fa(0x3c8)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x89a2fa(0x33c));}catch(_0x3db2ab){console[_0x89a2fa(0x23a)]('Error\x20updating\x20player:',_0x3db2ab),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x3db2ab['message'],'error');}}function closeEditPlayerModal(){const _0x5b09e0=a4_0x52d11f,_0x5584a7=document['getElementById']('edit-player-modal');_0x5584a7['classList']['remove']('active'),_0x5584a7['dataset'][_0x5b09e0(0x393)]='';}async function confirmDeletePlayer(_0x53ab09){const _0x29b2a9=a4_0x52d11f;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0xbef035=currentLadder==='D1'?_0x29b2a9(0x30b):'playersD2';await deleteDoc(doc(db,_0xbef035,_0x53ab09)),loadPlayersData(),showNotification(_0x29b2a9(0x2e6),'success');}catch(_0x26ee65){console['error'](_0x29b2a9(0x396),_0x26ee65),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x26ee65['message'],'error');}}async function setupManagePlayersSection(){const _0x5cc6fc=a4_0x52d11f,_0xecb4a2=document['getElementById']('add-player-form');_0xecb4a2&&_0xecb4a2[_0x5cc6fc(0x1f2)](_0x5cc6fc(0x28c),async _0x4651cd=>{_0x4651cd['preventDefault'](),await addNewPlayer();});const _0x24b1c0=document[_0x5cc6fc(0x334)]('player-search');_0x24b1c0&&_0x24b1c0['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x5580b4=document[_0x5cc6fc(0x334)]('save-player-btn');_0x5580b4&&_0x5580b4[_0x5cc6fc(0x1f2)]('click',saveEditedPlayer);const _0x49d5a0=document[_0x5cc6fc(0x334)]('cancel-edit-btn');_0x49d5a0&&_0x49d5a0['addEventListener']('click',closeEditPlayerModal);const _0x3a837a=document['getElementById']('edit-player-modal');_0x3a837a&&_0x3a837a['addEventListener']('click',_0x2451b5=>{_0x2451b5['target']===_0x3a837a&&closeEditPlayerModal();});const _0x2cf4ce=document['getElementById'](_0x5cc6fc(0x30d));_0x2cf4ce&&_0x2cf4ce[_0x5cc6fc(0x1f2)](_0x5cc6fc(0x2b1),()=>{currentLadder=_0x2cf4ce['value'],loadPlayersData();});}async function addNewPlayer(){const _0x2c55cf=a4_0x52d11f;try{const _0x3a6fe9=document['getElementById']('new-player-username'),_0xb4e24d=document[_0x2c55cf(0x334)](_0x2c55cf(0x244)),_0x14e4af=_0x3a6fe9['value']['trim'](),_0x311784=parseInt(_0xb4e24d['value'])||0x4b0;if(!_0x14e4af){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log'](_0x2c55cf(0x2d6)+_0x14e4af+'\x20with\x20ELO\x20'+_0x311784+'\x20to\x20'+currentLadder+'\x20ladder');let _0x1e5fa3='players',_0x14c8a1='eloHistory';if(currentLadder==='D2')_0x1e5fa3='playersD2',_0x14c8a1='eloHistoryD2';else currentLadder==='D3'&&(_0x1e5fa3='playersD3',_0x14c8a1='eloHistoryD3');const _0x2ed074=query(collection(db,_0x1e5fa3),where(_0x2c55cf(0x324),'==',_0x14e4af)),_0x37fac0=await getDocs(_0x2ed074);if(!_0x37fac0[_0x2c55cf(0x1f4)]){alert(_0x2c55cf(0x355)+_0x14e4af+_0x2c55cf(0x3cc)+currentLadder+_0x2c55cf(0x23c));return;}const _0x1b328d=auth['currentUser'],_0x3a9dbb={'username':_0x14e4af,'eloRating':_0x311784,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x1b328d?_0x1b328d['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x1e5fa3),_0x3a9dbb),await addDoc(collection(db,_0x14c8a1),{'player':_0x14e4af,'previousElo':0x4b0,'newElo':_0x311784,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x1b328d?_0x1b328d[_0x2c55cf(0x3d1)]:'admin','gameMode':currentLadder}),_0x3a6fe9['value']='',_0xb4e24d['value']=_0x2c55cf(0x284),alert(_0x2c55cf(0x34f)+_0x14e4af+_0x2c55cf(0x2fc)+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0xf5b013){console['error']('Error\x20adding\x20player:',_0xf5b013),alert('Error\x20adding\x20player:\x20'+_0xf5b013['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x427161=a4_0x52d11f,_0x1c5ac5=document[_0x427161(0x334)]('add-player-form');_0x1c5ac5&&_0x1c5ac5['addEventListener']('submit',_0x2569d9=>{const _0x4b4afa=_0x427161;_0x2569d9[_0x4b4afa(0x1d5)](),addNewPlayer();});});function filterPlayerTable(){const _0x458095=a4_0x52d11f,_0x111c45=document['getElementById']('player-search')[_0x458095(0x297)]['toLowerCase'](),_0x11cf86=document[_0x458095(0x335)]('#players-table-body\x20tr');let _0x4f8bef=0x0;_0x11cf86['forEach'](_0x51d8e3=>{const _0x4d7f70=_0x458095,_0x201b19=_0x51d8e3[_0x4d7f70(0x265)]('.username')?.['textContent']['toLowerCase']()||'';_0x201b19['includes'](_0x111c45)?(_0x51d8e3['style']['display']='',_0x4f8bef++):_0x51d8e3['style']['display']='none';});const _0x1345d4=document['getElementById']('no-results-message');_0x1345d4&&(_0x4f8bef===0x0&&_0x111c45!==''?_0x1345d4['style'][_0x458095(0x261)]='block':_0x1345d4['style']['display']='none');}function debounce(_0x38f66b,_0xe94fda){let _0x48d018;return function(..._0x5ae67a){const _0x3f5762=a4_0x106c;clearTimeout(_0x48d018),_0x48d018=setTimeout(()=>_0x38f66b[_0x3f5762(0x1fc)](this,_0x5ae67a),_0xe94fda);};}async function loadEloHistory(_0x146fee=0x1){const _0x3ee44f=a4_0x52d11f,_0x348402=document['getElementById']('elo-history-table-body'),_0x3e03b3=currentLadder['toLowerCase']();if(!_0x348402)return;_0x348402[_0x3ee44f(0x319)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x12aa85=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x2b587e=collection(db,_0x12aa85);let _0x48a89f;if(_0x146fee>eloHistoryPagination[_0x3e03b3]['page']&&eloHistoryPagination[_0x3e03b3]['lastVisible'])_0x48a89f=query(_0x2b587e,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x3e03b3]['lastVisible']),limit(PAGE_SIZE));else _0x146fee<eloHistoryPagination[_0x3e03b3]['page']&&eloHistoryPagination[_0x3e03b3]['firstVisible']?_0x48a89f=query(_0x2b587e,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x3e03b3]['firstVisible']),limitToLast(PAGE_SIZE)):_0x48a89f=query(_0x2b587e,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x293465=await getDocs(_0x48a89f);if(_0x293465[_0x3ee44f(0x1f4)]){_0x348402['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x3e03b3+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x3e03b3]['page']=_0x146fee,eloHistoryPagination[_0x3e03b3]['firstVisible']=_0x293465['docs'][0x0],eloHistoryPagination[_0x3e03b3]['lastVisible']=_0x293465[_0x3ee44f(0x1d7)][_0x293465['docs']['length']-0x1];const _0x208f0a=new Map();_0x348402['innerHTML']='';const _0x591f9f=async _0x4fd53a=>{const _0x45064b=_0x3ee44f;if(typeof _0x4fd53a!=='string'||_0x4fd53a[_0x45064b(0x349)]<0x14||/[^a-zA-Z0-9-_]/[_0x45064b(0x2ba)](_0x4fd53a))return _0x4fd53a;if(_0x208f0a['has'](_0x4fd53a))return _0x208f0a['get'](_0x4fd53a);try{for(const _0x287185 of[_0x45064b(0x30b),'playersD2','playersD3','nonParticipants']){const _0xe568bc=await getDoc(doc(db,_0x287185,_0x4fd53a));if(_0xe568bc['exists']()&&_0xe568bc['data']()['username']){const _0x37d6a8=_0xe568bc[_0x45064b(0x2c6)]()[_0x45064b(0x324)];return _0x208f0a[_0x45064b(0x23d)](_0x4fd53a,_0x37d6a8),_0x37d6a8;}}return _0x4fd53a;}catch(_0x5b8fc2){return console[_0x45064b(0x2e0)]('Error\x20resolving\x20username\x20for\x20'+_0x4fd53a+':',_0x5b8fc2),_0x4fd53a;}};for(const _0x359f9f of _0x293465[_0x3ee44f(0x1d7)]){const _0x371498=_0x359f9f['data'](),_0x98b93d=document[_0x3ee44f(0x225)]('tr'),_0x34f0d6=_0x371498['timestamp']?new Date(_0x371498[_0x3ee44f(0x3b4)]['seconds']*0x3e8)['toLocaleString']():'N/A',_0x10d9de=_0x371498[_0x3ee44f(0x383)]-_0x371498['previousElo'],_0xa198f0=_0x10d9de>0x0?_0x3ee44f(0x292):_0x10d9de<0x0?_0x3ee44f(0x29d):'',_0xb5bf82=_0x10d9de>0x0?'+':'',_0x37c090=_0x371498['player']||_0x371498['username']||_0x371498['userId']||_0x3ee44f(0x2e7),_0x2026bf=await _0x591f9f(_0x37c090);_0x98b93d[_0x3ee44f(0x319)]=_0x3ee44f(0x36b)+_0x34f0d6+_0x3ee44f(0x1c5)+_0x2026bf+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x371498[_0x3ee44f(0x3eb)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x371498[_0x3ee44f(0x383)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0xa198f0+'\x22>'+_0xb5bf82+_0x10d9de+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x371498[_0x3ee44f(0x2fd)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x371498[_0x3ee44f(0x3c6)]||_0x371498['promotedBy']||_0x371498['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x348402[_0x3ee44f(0x33f)](_0x98b93d);}document['getElementById'](_0x3e03b3+_0x3ee44f(0x333))['textContent']='Page\x20'+_0x146fee;const _0x152d00=document['getElementById'](_0x3e03b3+'-prev-page'),_0x1ff16f=document['getElementById'](_0x3e03b3+_0x3ee44f(0x2a6));if(_0x152d00)_0x152d00['disabled']=_0x146fee<=0x1;const _0x263b1a=query(_0x2b587e,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x3e03b3]['lastVisible']),limit(0x1)),_0x26cd78=await getDocs(_0x263b1a);if(_0x1ff16f)_0x1ff16f['disabled']=_0x26cd78['empty'];}catch(_0x4134c7){console[_0x3ee44f(0x23a)]('Error\x20loading\x20ELO\x20history:',_0x4134c7),_0x348402[_0x3ee44f(0x319)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x4134c7['message']+_0x3ee44f(0x387);}}function formatHistoryType(_0xbc9ec4){const _0xafaf10=a4_0x52d11f;switch(_0xbc9ec4){case'match_result':return'Match\x20Result';case _0xafaf10(0x346):return'Promotion';case'demotion':return _0xafaf10(0x37f);case'admin_modification':return _0xafaf10(0x25a);case'initial_placement':return'Initial\x20Placement';default:return _0xbc9ec4||_0xafaf10(0x2ee);}}function setupEloHistorySection(){const _0x1808bd=a4_0x52d11f;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')['addEventListener'](_0x1808bd(0x388),()=>{const _0x31e178=_0x1808bd;loadEloHistory(eloHistoryPagination['d1'][_0x31e178(0x337)]+0x1);}),document['getElementById'](_0x1808bd(0x2fa))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById'](_0x1808bd(0x245))['addEventListener'](_0x1808bd(0x388),()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x27d959=document['getElementById']('d3-prev-page'),_0x2d9045=document['getElementById']('d3-next-page');_0x27d959&&_0x27d959['addEventListener'](_0x1808bd(0x388),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x2d9045&&_0x2d9045[_0x1808bd(0x1f2)](_0x1808bd(0x388),()=>{const _0x214e74=_0x1808bd;loadEloHistory(eloHistoryPagination['d3'][_0x214e74(0x337)]+0x1);});const _0x4be7e3=document[_0x1808bd(0x334)]('elo-history-search');_0x4be7e3&&_0x4be7e3['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x3c7849=document[_0x1808bd(0x334)]('history-type-filter');_0x3c7849&&_0x3c7849['addEventListener'](_0x1808bd(0x2b1),applyEloHistoryFilters);const _0xddd21b=document['getElementById'](_0x1808bd(0x302));_0xddd21b&&_0xddd21b['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x2c9720=document['getElementById']('elo-history-search')['value']['toLowerCase'](),_0x126922=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x455df3=0x0;_0x126922['forEach'](_0x5f408a=>{const _0x34c2a2=a4_0x106c;if(_0x5f408a[_0x34c2a2(0x281)]['contains']('loading-cell')||_0x5f408a['classList']['contains']('empty-state')||_0x5f408a['classList']['contains'](_0x34c2a2(0x275)))return;const _0x1a02b7=_0x5f408a[_0x34c2a2(0x265)]('.player')?.[_0x34c2a2(0x2cf)]['toLowerCase']()||'',_0x1a843b=_0x5f408a['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x3f526e=_0x5f408a[_0x34c2a2(0x265)]('.admin-action')?.[_0x34c2a2(0x2cf)]['toLowerCase']()||'';_0x1a02b7['includes'](_0x2c9720)||_0x1a843b['includes'](_0x2c9720)||_0x3f526e[_0x34c2a2(0x22e)](_0x2c9720)?(_0x5f408a['style']['display']='',_0x455df3++):_0x5f408a['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x3966f5=a4_0x52d11f,_0x751d49=document['getElementById'](_0x3966f5(0x307))[_0x3966f5(0x297)],_0x4fabf3=document['getElementById']('history-end-date')['value'],_0x3ab13d=document[_0x3966f5(0x334)]('history-type-filter')['value'],_0x4b50ec=currentLadder['toLowerCase']();eloHistoryPagination[_0x4b50ec]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x3c78e6=document['getElementById'](_0x3966f5(0x1fa));_0x3c78e6[_0x3966f5(0x319)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x30fbdb=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x1a9165=collection(db,_0x30fbdb);let _0x51f4ed=[orderBy('timestamp','desc')];if(_0x751d49){const _0x1cc3a7=new Date(_0x751d49);_0x1cc3a7['setHours'](0x0,0x0,0x0,0x0),_0x51f4ed['push'](where('timestamp','>=',_0x1cc3a7));}if(_0x4fabf3){const _0x5be761=new Date(_0x4fabf3);_0x5be761['setHours'](0x17,0x3b,0x3b,0x3e7),_0x51f4ed[_0x3966f5(0x3d0)](where('timestamp','<=',_0x5be761));}_0x3ab13d&&_0x3ab13d!=='all'&&_0x51f4ed[_0x3966f5(0x3d0)](where('type','==',_0x3ab13d));_0x51f4ed[_0x3966f5(0x3d0)](limit(PAGE_SIZE));const _0x1ca8c2=query(_0x1a9165,..._0x51f4ed),_0x21aa6e=await getDocs(_0x1ca8c2);!_0x21aa6e[_0x3966f5(0x1f4)]&&(eloHistoryPagination[_0x4b50ec]['firstVisible']=_0x21aa6e['docs'][0x0],eloHistoryPagination[_0x4b50ec]['lastVisible']=_0x21aa6e['docs'][_0x21aa6e[_0x3966f5(0x1d7)]['length']-0x1]);_0x3c78e6['innerHTML']='';if(_0x21aa6e[_0x3966f5(0x1f4)]){_0x3c78e6['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x21aa6e['forEach'](_0x3d06d5=>{const _0x1704c0=_0x3966f5,_0x588949=_0x3d06d5['data'](),_0x39ee49=document['createElement']('tr'),_0x43ead3=_0x588949['timestamp']?new Date(_0x588949['timestamp']['seconds']*0x3e8)[_0x1704c0(0x227)]():_0x1704c0(0x2e7),_0x299a15=_0x588949[_0x1704c0(0x383)]-_0x588949['previousElo'],_0x12552a=_0x299a15>0x0?'positive-change':_0x299a15<0x0?'negative-change':'',_0x54f425=_0x299a15>0x0?'+':'',_0x5b8880=_0x588949['player']||_0x588949[_0x1704c0(0x324)]||_0x588949['userId']||'N/A';_0x39ee49['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x43ead3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x5b8880+_0x1704c0(0x273)+(_0x588949['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x588949['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x12552a+'\x22>'+_0x54f425+_0x299a15+_0x1704c0(0x1a8)+formatHistoryType(_0x588949[_0x1704c0(0x2fd)])+_0x1704c0(0x232)+(_0x588949['modifiedBy']||_0x588949[_0x1704c0(0x2af)]||_0x588949[_0x1704c0(0x2c4)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3c78e6['appendChild'](_0x39ee49);}),document['getElementById'](_0x4b50ec+_0x3966f5(0x333))['textContent']=_0x3966f5(0x2c5);}catch(_0x5853d4){console['error']('Error\x20applying\x20filters:',_0x5853d4),_0x3c78e6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x5853d4[_0x3966f5(0x2ae)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x482437=a4_0x52d11f;document['getElementById']('history-start-date')[_0x482437(0x297)]='',document['getElementById']('history-end-date')['value']='',document['getElementById'](_0x482437(0x27d))[_0x482437(0x297)]='all',document['getElementById'](_0x482437(0x28f))[_0x482437(0x297)]='';const _0xce15e0=currentLadder['toLowerCase']();eloHistoryPagination[_0xce15e0]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x38f150=a4_0x52d11f,_0x1fff92=document['getElementById']('promote-player-btn'),_0x87401b=document[_0x38f150(0x334)]('promote-modal'),_0xe3b7be=document['getElementById'](_0x38f150(0x3bb));_0x1fff92&&_0x87401b&&_0xe3b7be&&(_0x1fff92['addEventListener']('click',()=>{const _0x2c9f31=_0x38f150;_0x87401b[_0x2c9f31(0x281)]['add']('active');}),_0x87401b['addEventListener'](_0x38f150(0x388),_0xe2d65a=>{const _0x391fd1=_0x38f150;_0xe2d65a['target']===_0x87401b&&_0x87401b[_0x391fd1(0x281)]['remove']('active');}),_0xe3b7be['addEventListener']('submit',async _0x31e843=>{const _0x413723=_0x38f150;_0x31e843['preventDefault']();const _0x360b87=document['getElementById']('promote-username'),_0x1059bf=document[_0x413723(0x334)]('promote-ladder'),_0x3435a5=_0x360b87['value'][_0x413723(0x251)](),_0x3d6973=_0x1059bf['value'];if(!_0x3435a5){showNotification(_0x413723(0x264),_0x413723(0x23a));return;}try{await promotePlayer(_0x3435a5,_0x3d6973),_0x87401b['classList'][_0x413723(0x203)]('active'),_0x360b87[_0x413723(0x297)]='';}catch(_0x3964b6){showNotification(_0x3964b6['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{const _0x16de06=_0x38f150;_0x87401b[_0x16de06(0x281)]['remove']('active');}));const _0x3f85d9=document['getElementById']('demote-player-btn'),_0x26cfa8=document['getElementById']('demote-modal'),_0x57dfc3=document['getElementById']('demote-form');_0x3f85d9&&_0x26cfa8&&_0x57dfc3&&(_0x3f85d9[_0x38f150(0x1f2)](_0x38f150(0x388),()=>{_0x26cfa8['classList']['add']('active');}),_0x26cfa8['addEventListener']('click',_0x2041d1=>{_0x2041d1['target']===_0x26cfa8&&_0x26cfa8['classList']['remove']('active');}),_0x57dfc3['addEventListener']('submit',async _0x5bcba9=>{const _0x41c336=_0x38f150;_0x5bcba9['preventDefault']();const _0x313c34=document[_0x41c336(0x334)](_0x41c336(0x2c3)),_0x4d7b38=document['getElementById'](_0x41c336(0x38d)),_0x52e226=_0x313c34['value']['trim'](),_0x479299=_0x4d7b38[_0x41c336(0x297)];if(!_0x52e226){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x52e226,_0x479299),document['getElementById'](_0x41c336(0x328))['classList'][_0x41c336(0x203)]('active'),document['getElementById'](_0x41c336(0x2c3))['value']='';}catch(_0x5bc3eb){console[_0x41c336(0x23a)]('Error\x20in\x20demotion:',_0x5bc3eb);}}));const _0x28aee8=document['getElementById'](_0x38f150(0x3c2)),_0x388d19=document['getElementById'](_0x38f150(0x327)),_0x40629d=document['getElementById']('set-elo-form');_0x28aee8&&_0x388d19&&_0x40629d&&(_0x28aee8['addEventListener'](_0x38f150(0x388),()=>{const _0x2930de=_0x38f150;_0x388d19['classList'][_0x2930de(0x228)](_0x2930de(0x22d));}),_0x388d19[_0x38f150(0x1f2)](_0x38f150(0x388),_0x1710f0=>{const _0x766c93=_0x38f150;_0x1710f0['target']===_0x388d19&&_0x388d19[_0x766c93(0x281)]['remove'](_0x766c93(0x22d));}),_0x40629d[_0x38f150(0x1f2)]('submit',async _0xaa152e=>{const _0x19c5c3=_0x38f150;_0xaa152e[_0x19c5c3(0x1d5)]();const _0x56d66d=document['getElementById']('set-elo-username'),_0x4d606e=document['getElementById']('set-elo-value');let _0x39bcd5;const _0x34f399=document['getElementById'](_0x19c5c3(0x216)),_0x4a0a0d=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x34f399)_0x39bcd5=_0x34f399[_0x19c5c3(0x297)];else _0x4a0a0d?_0x39bcd5=_0x4a0a0d[_0x19c5c3(0x297)]:_0x39bcd5='D1';if(!_0x56d66d||!_0x4d606e){showNotification(_0x19c5c3(0x3f6),'error');return;}const _0x56fa18=_0x56d66d['value']['trim'](),_0x52b0e=parseInt(_0x4d606e['value']);if(!_0x56fa18||isNaN(_0x52b0e)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x56fa18,_0x52b0e,_0x39bcd5),_0x388d19['classList']['remove']('active'),_0x56d66d[_0x19c5c3(0x297)]='',_0x4d606e[_0x19c5c3(0x297)]='';}catch(_0x9935f8){showNotification(_0x9935f8['message'],'error');}}),document[_0x38f150(0x334)]('cancel-set-elo-btn')[_0x38f150(0x1f2)](_0x38f150(0x388),()=>{_0x388d19['classList']['remove']('active');}));const _0x21d62c=document['getElementById'](_0x38f150(0x1bf)),_0x7d924=document['getElementById']('set-role-form');if(_0x21d62c&&_0x7d924){_0x21d62c['addEventListener']('click',_0x16e0f4=>{const _0xccbad0=_0x38f150;_0x16e0f4[_0xccbad0(0x215)]===_0x21d62c&&closeModalHandler();}),_0x7d924['addEventListener']('submit',async _0x44f148=>{const _0x8ecd62=_0x38f150;_0x44f148[_0x8ecd62(0x1d5)]();const _0x18b2fc=document['getElementById']('role-username'),_0x2d1c4e=document['getElementById']('role-name'),_0x43083c=document['getElementById']('role-color'),_0x388b0e=_0x18b2fc[_0x8ecd62(0x297)][_0x8ecd62(0x251)](),_0x5e6436=_0x2d1c4e['value']['trim'](),_0x5306d2=_0x43083c['value'];if(!_0x388b0e){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x388b0e,_0x5e6436,_0x5306d2),closeModalHandler(),loadUsersWithRoles();}catch(_0x565f3c){}});const _0x4ab20a=document['getElementById'](_0x38f150(0x1fe));_0x4ab20a&&(_0x4ab20a['removeEventListener']('click',closeModalHandler),_0x4ab20a['addEventListener'](_0x38f150(0x388),closeModalHandler));}}async function promotePlayer(_0x145059,_0x347f69){const _0x5a71e4=a4_0x52d11f;try{console['log']('Attempting\x20to\x20promote\x20'+_0x145059+'\x20in\x20'+_0x347f69+'\x20ladder');const _0x61a85b=auth['currentUser'];if(!_0x61a85b)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x103c2b=_0x347f69==='D2'?'playersD2':'players',_0x27078c=_0x347f69==='D2'?'eloHistoryD2':_0x5a71e4(0x320);console['log']('Searching\x20for\x20player\x20in\x20'+_0x103c2b);const _0x4ab682=collection(db,_0x103c2b),_0xaca2f=query(_0x4ab682,where('username','==',_0x145059)),_0x5ea638=await getDocs(_0xaca2f);if(_0x5ea638['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x347f69+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x347f69+_0x5a71e4(0x23c));}const _0x40815e=_0x5ea638['docs'][0x0],_0xc90a9a=_0x40815e[_0x5a71e4(0x2c6)](),_0x12aded=_0xc90a9a['eloRating']||0x4b0,_0x85a44e=_0x40815e['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x12aded);const _0x5751c1=[{'name':'Bronze','elo':0x578},{'name':_0x5a71e4(0x389),'elo':0x640},{'name':_0x5a71e4(0x23f),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x439185=_0x5751c1[_0x5a71e4(0x311)](_0x260c61=>_0x260c61[_0x5a71e4(0x2cd)]>_0x12aded);if(!_0x439185){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x347f69+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x347f69+_0x5a71e4(0x23c));}console['log'](_0x5a71e4(0x376)+_0x439185[_0x5a71e4(0x252)]+'\x20('+_0x439185['elo']+')'),await updateDoc(doc(db,_0x103c2b,_0x40815e['id']),{'eloRating':_0x439185[_0x5a71e4(0x2cd)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x61a85b['email']||_0x5a71e4(0x316)}),await addDoc(collection(db,_0x27078c),{'player':_0x145059,'previousElo':_0x12aded,'newElo':_0x439185['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x439185['name'],'promotedBy':_0x61a85b['email']||_0x5a71e4(0x316),'gameMode':_0x347f69});try{const {promotionManager:_0xc772d1}=await import(_0x5a71e4(0x241)),_0x598b59=_0xc772d1['getRankName'](_0x12aded),_0x4ba6ef=_0x439185['name'];await _0xc772d1[_0x5a71e4(0x34e)](_0x85a44e,_0x145059,_0x12aded,_0x439185['elo'],_0x598b59,_0x4ba6ef,'promotion',{'displayName':_0x145059,'source':_0x5a71e4(0x316),'adminUser':_0x61a85b['email'],'ladder':_0x347f69}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x3b4b88){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x3b4b88);}return alert('Successfully\x20promoted\x20'+_0x145059+'\x20to\x20'+_0x439185[_0x5a71e4(0x252)]+'\x20('+_0x439185['elo']+')'),currentLadder===_0x347f69&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x5b646d){console['error'](_0x5a71e4(0x1c4),_0x5b646d),alert('Error\x20promoting\x20player:\x20'+_0x5b646d['message']);throw _0x5b646d;}}document[a4_0x52d11f(0x1f2)]('DOMContentLoaded',()=>{const _0x4b45bd=a4_0x52d11f,_0x1bb5ab=document[_0x4b45bd(0x334)](_0x4b45bd(0x3bb));_0x1bb5ab&&_0x1bb5ab['addEventListener'](_0x4b45bd(0x28c),async _0x3c7a5a=>{const _0x4866a3=_0x4b45bd;_0x3c7a5a['preventDefault']();const _0x5c849d=document[_0x4866a3(0x334)]('promote-username')[_0x4866a3(0x297)][_0x4866a3(0x251)](),_0x16ec00=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x5c849d){alert(_0x4866a3(0x264));return;}try{await promotePlayer(_0x5c849d,_0x16ec00),document['getElementById']('promote-modal')[_0x4866a3(0x281)]['remove'](_0x4866a3(0x22d)),document['getElementById']('promote-username')['value']='';}catch(_0x1ac960){console['error']('Error\x20in\x20promotion:',_0x1ac960);}});});async function demotePlayer(_0x294042,_0x7451cb){const _0x32898d=a4_0x52d11f;try{console['log']('Attempting\x20to\x20demote\x20'+_0x294042+'\x20in\x20'+_0x7451cb+'\x20ladder');const _0x391772=auth[_0x32898d(0x3c8)];if(!_0x391772)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x20933f=_0x7451cb==='D2'?_0x32898d(0x276):'players',_0x5bfc3d=_0x7451cb==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x20933f);const _0x309bb0=collection(db,_0x20933f),_0x3d9d96=query(_0x309bb0,where(_0x32898d(0x324),'==',_0x294042)),_0x5bb087=await getDocs(_0x3d9d96);if(_0x5bb087['empty']){alert(_0x32898d(0x236)+_0x7451cb+'\x20ladder');throw new Error(_0x32898d(0x236)+_0x7451cb+'\x20ladder');}const _0x2eab21=_0x5bb087[_0x32898d(0x1d7)][0x0],_0x62eb31=_0x2eab21[_0x32898d(0x2c6)](),_0x3dc370=_0x62eb31['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x3dc370);const _0x1fa325=[{'name':_0x32898d(0x23f),'elo':0x708},{'name':_0x32898d(0x389),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x113276=_0x1fa325['find'](_0x4f6366=>_0x4f6366['elo']<_0x3dc370);if(!_0x113276){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x7451cb+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x7451cb+'\x20ladder');}console['log']('Demoting\x20player\x20to\x20'+_0x113276['name']+'\x20('+_0x113276['elo']+')'),await updateDoc(doc(db,_0x20933f,_0x2eab21['id']),{'eloRating':_0x113276['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x391772['email']||_0x32898d(0x316)}),await addDoc(collection(db,_0x5bfc3d),{'player':_0x294042,'previousElo':_0x3dc370,'newElo':_0x113276['elo'],'timestamp':serverTimestamp(),'type':_0x32898d(0x1b6),'rankAchieved':_0x113276['name'],'demotedBy':_0x391772[_0x32898d(0x3d1)]||'admin','gameMode':_0x7451cb});try{const {promotionManager:_0x569954}=await import(_0x32898d(0x241)),_0x2bd942=_0x569954['getRankName'](_0x3dc370),_0x4f7cbc=_0x113276['name'];await _0x569954[_0x32898d(0x34e)](_0x2eab21['id'],_0x294042,_0x3dc370,_0x113276['elo'],_0x2bd942,_0x4f7cbc,'demotion',{'displayName':_0x294042,'source':'admin','adminUser':_0x391772['email'],'ladder':_0x7451cb}),console[_0x32898d(0x29f)]('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x433cb7){console[_0x32898d(0x23a)](_0x32898d(0x234),_0x433cb7);}return alert('Successfully\x20demoted\x20'+_0x294042+'\x20to\x20'+_0x113276[_0x32898d(0x252)]+'\x20('+_0x113276['elo']+')'),currentLadder===_0x7451cb&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x1ebd29){console['error']('Error\x20demoting\x20player:',_0x1ebd29),alert('Error\x20demoting\x20player:\x20'+_0x1ebd29['message']);throw _0x1ebd29;}}document[a4_0x52d11f(0x1f2)]('DOMContentLoaded',()=>{const _0x49e68a=a4_0x52d11f,_0x5c79ac=document[_0x49e68a(0x334)]('demote-form');_0x5c79ac&&_0x5c79ac['addEventListener'](_0x49e68a(0x28c),async _0x58ab7f=>{const _0x145460=_0x49e68a;_0x58ab7f['preventDefault']();const _0x18e37a=document['getElementById']('demote-username')['value']['trim'](),_0x5d3e86=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x18e37a){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x18e37a,_0x5d3e86),document['getElementById']('demote-modal')[_0x145460(0x281)]['remove']('active'),document['getElementById']('demote-username')[_0x145460(0x297)]='';}catch(_0x97af6d){console['error'](_0x145460(0x1ce),_0x97af6d);}});});async function setCustomElo(_0x5be886,_0x12873a,_0xae37d3){const _0x2ef508=a4_0x52d11f;try{const _0xd1ceaf=auth['currentUser'];if(!_0xd1ceaf||!isAdmin(_0xd1ceaf['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x18ff99=_0xae37d3==='D2'?'playersD2':_0x2ef508(0x30b),_0x9d4cd0=_0xae37d3==='D2'?'eloHistoryD2':_0x2ef508(0x320),_0x2eca29=collection(db,_0x18ff99),_0x1d4170=query(_0x2eca29,where(_0x2ef508(0x324),'==',_0x5be886)),_0x31f4df=await getDocs(_0x1d4170);if(_0x31f4df[_0x2ef508(0x1f4)])throw new Error(_0x2ef508(0x236)+_0xae37d3+'\x20ladder');const _0x26e259=_0x31f4df[_0x2ef508(0x1d7)][0x0],_0x117f02=_0x26e259['data'](),_0xb5513a=_0x117f02['eloRating']||0x4b0,_0x374229=writeBatch(db);_0x374229['update'](doc(db,_0x18ff99,_0x26e259['id']),{'eloRating':_0x12873a,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xd1ceaf['email']});const _0x485912=doc(collection(db,_0x9d4cd0));return _0x374229[_0x2ef508(0x23d)](_0x485912,{'player':_0x5be886,'previousElo':_0xb5513a,'newElo':_0x12873a,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0xd1ceaf['email'],'gameMode':_0xae37d3}),await _0x374229['commit'](),showNotification(_0x2ef508(0x354)+_0x5be886+'\x20was\x20updated\x20from\x20'+_0xb5513a+'\x20to\x20'+_0x12873a,_0x2ef508(0x33c)),currentLadder===_0xae37d3&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x846268){console['error'](_0x2ef508(0x3e0),_0x846268);throw _0x846268;}}async function setUserRole(_0x24c26c,_0x58e985,_0x397d6c){const _0x3b5aa7=a4_0x52d11f;try{const _0x2a2a8b=auth['currentUser'];if(!_0x2a2a8b||!isAdmin(_0x2a2a8b['email']))throw new Error(_0x3b5aa7(0x33d));const _0x9114f7=_0x58e985?_0x58e985['trim']():null,_0x3b3f47=_0x9114f7?_0x397d6c||'#808080':null,[_0x5baddc,_0x4f77c4]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x3b5aa7(0x324),'==',_0x24c26c))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x24c26c)))]),_0x406853=[];if(!_0x5baddc['empty'])_0x406853['push']({'ref':_0x5baddc['docs'][0x0]['ref'],'source':'D1'});if(!_0x4f77c4['empty'])_0x406853['push']({'ref':_0x4f77c4['docs'][0x0]['ref'],'source':'D2'});if(_0x406853['length']===0x0){const [_0x253a14,_0x310a94]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x24c26c))),getDocs(query(collection(db,_0x3b5aa7(0x2a5)),where(_0x3b5aa7(0x324),'==',_0x24c26c)))]);if(!_0x253a14[_0x3b5aa7(0x1f4)])_0x406853[_0x3b5aa7(0x3d0)]({'ref':_0x253a14['docs'][0x0][_0x3b5aa7(0x394)],'source':_0x3b5aa7(0x2bb)});if(!_0x310a94[_0x3b5aa7(0x1f4)])_0x406853['push']({'ref':_0x310a94['docs'][0x0][_0x3b5aa7(0x394)],'source':'UserProfile'});}if(_0x406853['length']===0x0)throw new Error('User\x20\x22'+_0x24c26c+_0x3b5aa7(0x3a2));const _0x1b8d1f=writeBatch(db);_0x406853['forEach'](_0x1384c5=>{const _0xfee793=_0x3b5aa7;console['log'](_0xfee793(0x36d)+_0x24c26c+'\x20in\x20'+_0x1384c5['source']),!_0x9114f7?_0x1b8d1f['update'](_0x1384c5['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x1b8d1f[_0xfee793(0x1e4)](_0x1384c5['ref'],{'roleName':_0x9114f7,'roleColor':_0x3b3f47,'roleAssignedBy':_0x2a2a8b['email'],'roleAssignedAt':serverTimestamp()});}),await _0x1b8d1f['commit']();const _0x4add41=_0x9114f7?'Role\x20\x22'+_0x9114f7+_0x3b5aa7(0x3bf):_0x3b5aa7(0x382);return showNotification(_0x4add41+'\x20for\x20user\x20\x22'+_0x24c26c+'\x22','success'),!![];}catch(_0x49c920){console['error']('Error\x20setting\x20user\x20role:',_0x49c920),showNotification('Error:\x20'+_0x49c920['message'],'error');throw _0x49c920;}}function showNotification(_0x460e35,_0xa2b008='info'){const _0x14163f=a4_0x52d11f,_0x45158c=document['createElement'](_0x14163f(0x33e));_0x45158c['className']='notification\x20'+_0xa2b008,_0x45158c[_0x14163f(0x319)]=_0x14163f(0x363)+getNotificationIcon(_0xa2b008)+_0x14163f(0x31a)+_0x460e35+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x45158c),setTimeout(()=>{_0x45158c['classList']['add']('active');},0xa);const _0x512471=setTimeout(()=>{closeNotification(_0x45158c);},0x1388);_0x45158c['querySelector']('.close-notification')[_0x14163f(0x1f2)]('click',()=>{clearTimeout(_0x512471),closeNotification(_0x45158c);});}function getNotificationIcon(_0xfb174a){const _0x19eaa4=a4_0x52d11f;switch(_0xfb174a){case _0x19eaa4(0x33c):return _0x19eaa4(0x332);case _0x19eaa4(0x23a):return'fa-exclamation-circle';case'warning':return _0x19eaa4(0x3c1);case'info':default:return'fa-info-circle';}}function closeNotification(_0x49983e){const _0x354498=a4_0x52d11f;_0x49983e['classList'][_0x354498(0x203)]('active'),setTimeout(()=>{_0x49983e['remove']();},0x12c);}function setupUserRolesSection(){const _0x25e800=a4_0x52d11f,_0x57fa28=document['getElementById']('load-users-data');_0x57fa28&&_0x57fa28[_0x25e800(0x1f2)]('click',function(){this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x11195e=a4_0x106c;this['classList'][_0x11195e(0x203)]('loading'),this[_0x11195e(0x319)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x3a5678=>{const _0xb58a42=a4_0x106c;console['error']('Error\x20loading\x20users:',_0x3a5678),this[_0xb58a42(0x281)][_0xb58a42(0x203)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x51e426=_0xb58a42;this[_0x51e426(0x319)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0xab74c=document[_0x25e800(0x334)]('add-new-role-btn');_0xab74c&&_0xab74c['addEventListener']('click',()=>{const _0x2c1541=document['getElementById']('set-role-modal');_0x2c1541&&_0x2c1541['classList']['add']('active');});const _0x401f3f=document['getElementById']('user-search');_0x401f3f&&_0x401f3f['addEventListener'](_0x25e800(0x2c2),debounce(filterUsersTable,0x12c));const _0x453d43=document[_0x25e800(0x334)]('role-filter');_0x453d43&&_0x453d43['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x1b4aa8=a4_0x52d11f,_0x1f8f9a=document['getElementById']('users-table-body');if(!_0x1f8f9a)return;_0x1f8f9a['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x3305cd,_0x18c3cb,_0xb027b1,_0x4de4fc]=await Promise[_0x1b4aa8(0x377)]([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x3bcceb=new Map();function _0x31e9ed(_0x25a22b,_0x17cc14){const _0x5621b7=_0x1b4aa8;_0x25a22b[_0x5621b7(0x253)](_0x7312b4=>{const _0x444e4f=_0x5621b7,_0x2751f5=_0x7312b4['data']();if(!_0x2751f5[_0x444e4f(0x324)])return;if(!_0x3bcceb['has'](_0x2751f5['username']))_0x3bcceb[_0x444e4f(0x23d)](_0x2751f5['username'],{'username':_0x2751f5[_0x444e4f(0x324)],'roleName':_0x2751f5[_0x444e4f(0x336)]||null,'roleColor':_0x2751f5['roleColor']||null,'roleAssignedBy':_0x2751f5['roleAssignedBy']||null,'roleAssignedAt':_0x2751f5['roleAssignedAt']||null,'sources':[_0x17cc14]});else{const _0x2e8628=_0x3bcceb[_0x444e4f(0x3fe)](_0x2751f5[_0x444e4f(0x324)]);_0x2751f5[_0x444e4f(0x336)]&&(!_0x2e8628['roleName']||_0x17cc14==='D1'||_0x17cc14==='D2')&&(_0x2e8628[_0x444e4f(0x336)]=_0x2751f5['roleName'],_0x2e8628['roleColor']=_0x2751f5['roleColor'],_0x2e8628['roleAssignedBy']=_0x2751f5['roleAssignedBy'],_0x2e8628['roleAssignedAt']=_0x2751f5[_0x444e4f(0x35f)]),!_0x2e8628['sources']['includes'](_0x17cc14)&&_0x2e8628[_0x444e4f(0x32b)]['push'](_0x17cc14);}});}_0x31e9ed(_0x3305cd,'D1'),_0x31e9ed(_0x18c3cb,'D2'),_0x31e9ed(_0xb027b1,'Non-Participant'),_0x31e9ed(_0x4de4fc,'Profile');const _0x5d4066=Array['from'](_0x3bcceb['values']())['sort']((_0x55be18,_0x5e0850)=>_0x55be18['username']['localeCompare'](_0x5e0850['username']));if(_0x5d4066[_0x1b4aa8(0x349)]===0x0){_0x1f8f9a['innerHTML']=_0x1b4aa8(0x1b1);return;}_0x1f8f9a['innerHTML']='',_0x5d4066['forEach'](_0x663b05=>{const _0x54122c=_0x1b4aa8,_0xffcc8b=document[_0x54122c(0x225)]('tr');_0xffcc8b['dataset'][_0x54122c(0x324)]=_0x663b05['username'],_0xffcc8b['dataset']['roleName']=_0x663b05['roleName']||'',_0xffcc8b[_0x54122c(0x31d)][_0x54122c(0x3ce)]=_0x663b05['roleColor']||'#808080';const _0x4d04e6=_0x663b05['roleAssignedAt']?new Date(_0x663b05[_0x54122c(0x35f)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x3a6353=_0x663b05['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x663b05['roleColor']+';\x20color:\x20'+getContrastColor(_0x663b05['roleColor'])+';\x22>'+_0x663b05['roleName']+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0xffcc8b[_0x54122c(0x319)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x663b05['username']+_0x54122c(0x3c7)+_0x663b05['sources'][_0x54122c(0x28b)](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3a6353+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x663b05['roleAssignedBy']||_0x54122c(0x2e7))+_0x54122c(0x3a4)+_0x4d04e6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x663b05[_0x54122c(0x324)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x663b05[_0x54122c(0x336)]?_0x54122c(0x317)+_0x663b05[_0x54122c(0x324)]+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1f8f9a['appendChild'](_0xffcc8b);}),document[_0x1b4aa8(0x335)]('.edit-role-btn')[_0x1b4aa8(0x253)](_0x6dbd97=>{const _0x36ab19=_0x1b4aa8;_0x6dbd97[_0x36ab19(0x1f2)](_0x36ab19(0x388),()=>{const _0x57f27a=_0x6dbd97['dataset']['username'];openRoleEditModal(_0x57f27a);});}),document['querySelectorAll'](_0x1b4aa8(0x3e5))['forEach'](_0x438c00=>{_0x438c00['addEventListener']('click',()=>{const _0x3346d5=_0x438c00['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x3346d5+'?')&&setUserRole(_0x3346d5,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x24c902=>console['error']('Error\x20removing\x20role:',_0x24c902));});});}catch(_0x3f4221){console[_0x1b4aa8(0x23a)]('Error\x20loading\x20users:',_0x3f4221),_0x1f8f9a[_0x1b4aa8(0x319)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x494acd){const _0x45b46c=a4_0x52d11f;console[_0x45b46c(0x29f)]('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x494acd);const _0x2ec058=document['getElementById']('set-role-modal'),_0x3d2956=document['getElementById']('role-username'),_0x420bb9=document['getElementById']('user-role');if(!_0x2ec058){console['error'](_0x45b46c(0x1a9)),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log'](_0x45b46c(0x3e8),_0x2ec058);_0x3d2956?(_0x3d2956['value']=_0x494acd,console[_0x45b46c(0x29f)](_0x45b46c(0x2e8)+_0x494acd)):console['warn'](_0x45b46c(0x3ad));const _0x96bcda=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x494acd+'\x22]');if(_0x96bcda&&_0x420bb9){const _0x47d34c=_0x96bcda[_0x45b46c(0x31d)][_0x45b46c(0x3d7)];_0x420bb9[_0x45b46c(0x297)]=_0x47d34c==='none'?'':_0x47d34c,console['log'](_0x45b46c(0x22b)+_0x420bb9[_0x45b46c(0x297)]+'\x20(based\x20on\x20data-role:\x20'+_0x47d34c+')');}else{if(!_0x96bcda)console[_0x45b46c(0x2e0)]('Table\x20row\x20for\x20user\x20'+_0x494acd+'\x20not\x20found.');if(!_0x420bb9)console['warn'](_0x45b46c(0x2f8));if(_0x420bb9)_0x420bb9['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x2ec058['classList'][_0x45b46c(0x228)]('active');const _0x3e6d80=document[_0x45b46c(0x334)]('cancel-role-btn');_0x3e6d80?(console[_0x45b46c(0x29f)]('Attaching\x20cancel\x20button\x20listener.'),_0x3e6d80['removeEventListener'](_0x45b46c(0x388),closeModalHandler),_0x3e6d80['addEventListener']('click',closeModalHandler)):console[_0x45b46c(0x2e0)](_0x45b46c(0x293)),console['log']('Attaching\x20background\x20click\x20listener.'),_0x2ec058['removeEventListener']('click',closeModalBackgroundHandler),_0x2ec058['addEventListener'](_0x45b46c(0x388),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x1090ec){_0x1090ec['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x4fbb92=a4_0x52d11f,_0x824b40=document['getElementById']('set-role-modal');_0x824b40&&(_0x824b40['classList']['remove'](_0x4fbb92(0x22d)),_0x824b40['removeEventListener'](_0x4fbb92(0x388),closeModalBackgroundHandler));}function filterUsersTable(){const _0x57f9a0=a4_0x52d11f,_0x15b203=document['getElementById']('user-search')?.[_0x57f9a0(0x297)][_0x57f9a0(0x270)]()||'',_0x4afdb6=document['getElementById']('role-filter')?.[_0x57f9a0(0x297)]||'all',_0x2a1a2d=document[_0x57f9a0(0x335)]('#users-table-body\x20tr');let _0x3c4e2e=0x0;_0x2a1a2d['forEach'](_0x3b45e5=>{const _0x282086=_0x57f9a0;if(_0x3b45e5['querySelector']('.loading-cell')||_0x3b45e5['querySelector']('.empty-state')||_0x3b45e5[_0x282086(0x265)]('.error-state'))return;const _0x29c7fd=_0x3b45e5[_0x282086(0x31d)][_0x282086(0x324)]?.['toLowerCase']()||'',_0x370cd3=_0x3b45e5[_0x282086(0x31d)][_0x282086(0x3d7)]||_0x282086(0x1ad),_0x17c013=_0x29c7fd['includes'](_0x15b203),_0x1fc32d=_0x4afdb6==='all'||_0x370cd3===_0x4afdb6;_0x17c013&&_0x1fc32d?(_0x3b45e5['style']['display']='',_0x3c4e2e++):_0x3b45e5['style']['display']='none';});if(_0x3c4e2e===0x0&&_0x2a1a2d['length']>0x0){const _0x544dc3=document['getElementById']('users-table-body');if(_0x544dc3){if(!_0x544dc3['querySelector']('.no-results')){const _0x53b653=document['createElement']('tr');_0x53b653['classList']['add']('no-results'),_0x53b653['innerHTML']=_0x57f9a0(0x27e),_0x544dc3['appendChild'](_0x53b653);}}}else{const _0x452263=document['querySelector']('.no-results');_0x452263&&_0x452263['remove']();}}function setupManageArticlesSection(){const _0x344a01=a4_0x52d11f,_0x2a2077=document['getElementById'](_0x344a01(0x259));_0x2a2077&&_0x2a2077['addEventListener']('click',function(){const _0x519f97=_0x344a01;this[_0x519f97(0x281)]['add'](_0x519f97(0x2e3)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x25ab34=_0x519f97;this[_0x25ab34(0x281)]['remove']('loading'),this[_0x25ab34(0x319)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x59b4df=>{const _0x3cd718=_0x519f97;console['error'](_0x3cd718(0x3bd),_0x59b4df),this['classList'][_0x3cd718(0x203)]('loading'),this['innerHTML']=_0x3cd718(0x1b0),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x18c783=document[_0x344a01(0x334)]('create-new-article-btn');_0x18c783?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x18c783['style']['display']=_0x344a01(0x1e7),_0x18c783['addEventListener']('click',()=>{openArticleModal();})):console[_0x344a01(0x23a)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x2dbe49=document[_0x344a01(0x334)]('article-form');_0x2dbe49&&_0x2dbe49['addEventListener']('submit',_0x2e926a=>{_0x2e926a['preventDefault'](),saveArticle();});const _0x25440d=document[_0x344a01(0x334)]('cancel-article-btn');_0x25440d&&_0x25440d['addEventListener'](_0x344a01(0x388),()=>{closeArticleModal();});const _0x42fe6d=document['querySelector']('#article-modal\x20.close-btn');_0x42fe6d&&_0x42fe6d['addEventListener']('click',()=>{closeArticleModal();});const _0x4dd255=document['getElementById'](_0x344a01(0x1d3));_0x4dd255&&_0x4dd255['addEventListener']('click',_0xec1a25=>{_0xec1a25['target']===_0x4dd255&&closeArticleModal();});}async function loadArticles(){const _0x160e7a=a4_0x52d11f,_0x290697=document['getElementById'](_0x160e7a(0x1b2));if(!_0x290697)return;_0x290697[_0x160e7a(0x319)]='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x598187=collection(db,'articles'),_0x5ed674=query(_0x598187,orderBy(_0x160e7a(0x38c),'desc')),_0x41ddba=await getDocs(_0x5ed674);if(_0x41ddba['empty']){_0x290697['innerHTML']=_0x160e7a(0x32c);return;}_0x290697[_0x160e7a(0x319)]='',_0x41ddba[_0x160e7a(0x253)](_0x260683=>{const _0x1bd9d4=_0x160e7a,_0x173968=_0x260683['data'](),_0x2b0b15=document[_0x1bd9d4(0x225)]('tr'),_0x46e50e=_0x173968[_0x1bd9d4(0x38c)]?new Date(_0x173968['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x2b0b15['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x173968[_0x1bd9d4(0x2b6)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x173968['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x46e50e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x260683['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x260683['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x290697['appendChild'](_0x2b0b15);}),setupArticleActionButtons();}catch(_0x93b22e){console[_0x160e7a(0x23a)]('Error\x20loading\x20articles:',_0x93b22e),_0x290697['innerHTML']=_0x160e7a(0x20b)+_0x93b22e['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x9dc3a=a4_0x52d11f;document[_0x9dc3a(0x335)]('.edit-article-btn')[_0x9dc3a(0x253)](_0x295f0c=>{const _0x218f0a=_0x9dc3a;_0x295f0c[_0x218f0a(0x1f2)]('click',async _0x3e8cd8=>{const _0x4d90bc=_0x3e8cd8['currentTarget']['dataset']['id'];openArticleModal(_0x4d90bc);});}),document[_0x9dc3a(0x335)](_0x9dc3a(0x3ef))[_0x9dc3a(0x253)](_0x32401c=>{_0x32401c['addEventListener']('click',async _0x3270b4=>{const _0x5c145e=_0x3270b4['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x5c145e);});});}function openArticleModal(_0x5a2229=null){const _0x4c8298=a4_0x52d11f,_0x1743bb=document['getElementById'](_0x4c8298(0x1d3)),_0x4e9964=document['getElementById']('article-modal-title'),_0x46fd31=document[_0x4c8298(0x334)]('article-form'),_0x245765=document['getElementById']('article-id');_0x46fd31['reset'](),_0x245765[_0x4c8298(0x297)]='';if(_0x5a2229)_0x4e9964[_0x4c8298(0x2cf)]=_0x4c8298(0x3fd),_0x245765[_0x4c8298(0x297)]=_0x5a2229,loadArticleData(_0x5a2229);else{_0x4e9964[_0x4c8298(0x2cf)]='Create\x20Article';const _0x4b57af=auth[_0x4c8298(0x3c8)];if(_0x4b57af){const _0x5739ae=document['getElementById'](_0x4c8298(0x3cd));if(_0x5739ae&&_0x4b57af['displayName'])_0x5739ae['value']=_0x4b57af['displayName'];else _0x5739ae&&(_0x5739ae['value']=_0x4b57af['email']);}}_0x1743bb[_0x4c8298(0x281)]['add']('active');}async function loadArticleData(_0x34dd4a){const _0x1f0195=a4_0x52d11f;try{const _0x1591ce=doc(db,_0x1f0195(0x1bd),_0x34dd4a),_0x2c9a6b=await getDoc(_0x1591ce);if(!_0x2c9a6b['exists']()){showNotification(_0x1f0195(0x224),_0x1f0195(0x23a));return;}const _0x4050a1=_0x2c9a6b['data']();document[_0x1f0195(0x334)]('article-title')['value']=_0x4050a1['title']||'',document['getElementById']('article-author')['value']=_0x4050a1['author']||'',document['getElementById']('article-image-url')[_0x1f0195(0x297)]=_0x4050a1['imageUrl']||'',document[_0x1f0195(0x334)]('article-content')['value']=_0x4050a1['content']||'';}catch(_0x436f3b){console['error'](_0x1f0195(0x373),_0x436f3b),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x4415a6=a4_0x52d11f;try{const _0x2f681f=document['getElementById'](_0x4415a6(0x38a))['value'],_0x2f8604=document[_0x4415a6(0x334)](_0x4415a6(0x314))['value']['trim'](),_0x4d79e8=document['getElementById']('article-author')['value'][_0x4415a6(0x251)](),_0x21cd1e=document[_0x4415a6(0x334)]('article-image-url')['value']['trim'](),_0xdd5583=document['getElementById']('article-content')['value'][_0x4415a6(0x251)]();if(!_0x2f8604||!_0xdd5583){showNotification('Title\x20and\x20content\x20are\x20required',_0x4415a6(0x23a));return;}const _0x5893ac=auth['currentUser'];if(!_0x5893ac){showNotification(_0x4415a6(0x3df),_0x4415a6(0x23a));return;}const _0x2c2e66={'title':_0x2f8604,'author':_0x4d79e8,'imageUrl':_0x21cd1e||null,'content':_0xdd5583,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5893ac[_0x4415a6(0x3d1)]};!_0x2f681f?(_0x2c2e66['createdAt']=serverTimestamp(),_0x2c2e66['createdBy']=_0x5893ac['email'],await addDoc(collection(db,'articles'),_0x2c2e66),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,_0x4415a6(0x1bd),_0x2f681f),_0x2c2e66),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x524605){console[_0x4415a6(0x23a)](_0x4415a6(0x374),_0x524605),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x524605['message'],'error');}}function closeArticleModal(){const _0x5eb394=a4_0x52d11f,_0x567ac4=document[_0x5eb394(0x334)]('article-modal');_0x567ac4&&_0x567ac4['classList']['remove'](_0x5eb394(0x22d));}async function confirmDeleteArticle(_0x4da18a){const _0x4c593a=a4_0x52d11f;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x4da18a)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x4c593a(0x33c));}catch(_0x560109){console['error']('Error\x20deleting\x20article:',_0x560109),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x560109[_0x4c593a(0x2ae)],_0x4c593a(0x23a));}}function setupTrophyManagementSection(){const _0x141f0f=a4_0x52d11f,_0x205249=document['getElementById']('load-trophies-data');_0x205249&&_0x205249['addEventListener']('click',function(){const _0x39ed06=a4_0x106c;this['classList'][_0x39ed06(0x228)]('loading'),this['innerHTML']=_0x39ed06(0x2d3);const _0x4a31fd=document['getElementById']('assign-trophy-image');_0x4a31fd&&(_0x4a31fd['onerror']=function(){const _0x11967a=_0x39ed06;this[_0x11967a(0x305)]=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x1307e1=_0x39ed06;this[_0x1307e1(0x281)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x2e2e0c=>{const _0x23c52b=_0x39ed06;console['error']('Error\x20loading\x20trophies:',_0x2e2e0c),this['classList']['remove']('loading'),this['innerHTML']=_0x23c52b(0x1b0),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x3be0ad=document['getElementById'](_0x141f0f(0x22a));_0x3be0ad&&_0x3be0ad[_0x141f0f(0x1f2)]('click',()=>{openTrophyModal();});const _0x3f1b19=document['getElementById'](_0x141f0f(0x208));_0x3f1b19&&_0x3f1b19[_0x141f0f(0x1f2)](_0x141f0f(0x28c),_0x259887=>{_0x259887['preventDefault'](),saveTrophyDefinition();});const _0x4d2fcc=document[_0x141f0f(0x334)](_0x141f0f(0x3f4));_0x4d2fcc&&_0x4d2fcc['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')[_0x141f0f(0x253)](_0x219e28=>{const _0x172fa5=_0x141f0f;_0x219e28[_0x172fa5(0x1f2)]('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x512568=document['getElementById'](_0x141f0f(0x28d));_0x512568&&_0x512568['addEventListener']('click',_0xdd2db9=>{const _0x140bf9=_0x141f0f;_0xdd2db9[_0x140bf9(0x215)]===_0x512568&&closeTrophyModal();});const _0x108732=document['getElementById']('assign-trophy-modal');_0x108732&&_0x108732['addEventListener'](_0x141f0f(0x388),_0x200082=>{const _0x1b904c=_0x141f0f;_0x200082[_0x1b904c(0x215)]===_0x108732&&closeAssignTrophyModal();});const _0x48d5e8=document[_0x141f0f(0x334)]('assign-trophy-form');_0x48d5e8&&_0x48d5e8['addEventListener'](_0x141f0f(0x28c),_0x2a76c9=>{_0x2a76c9['preventDefault'](),assignTrophyToPlayer();});const _0x6cdee7=document[_0x141f0f(0x334)]('cancel-assign-btn');_0x6cdee7&&_0x6cdee7[_0x141f0f(0x1f2)]('click',()=>{closeAssignTrophyModal();});const _0x1a6dba=document['getElementById'](_0x141f0f(0x1ed));_0x1a6dba&&(_0x1a6dba['addEventListener'](_0x141f0f(0x2c2),updateTrophyImagePreview),_0x1a6dba[_0x141f0f(0x1f2)](_0x141f0f(0x3e4),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x5c3fbd=a4_0x52d11f,_0x3f150d=document['getElementById']('trophy-image-url')['value']['trim'](),_0x1e4b4a=document['getElementById']('trophy-image-preview');if(!_0x1e4b4a){const _0x5e0595=document['getElementById']('trophy-image-url')[_0x5c3fbd(0x1bc)]('.form-group'),_0x480a92=document[_0x5c3fbd(0x225)](_0x5c3fbd(0x33e));_0x480a92['id']='trophy-image-preview',_0x480a92[_0x5c3fbd(0x3f3)]=_0x5c3fbd(0x2e5),_0x5e0595['appendChild'](_0x480a92);const _0xe1b7a4=document['createElement'](_0x5c3fbd(0x295));_0xe1b7a4['id']=_0x5c3fbd(0x283),_0xe1b7a4['alt']=_0x5c3fbd(0x2d1),_0xe1b7a4[_0x5c3fbd(0x32d)]=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x480a92['appendChild'](_0xe1b7a4);}const _0x11c4ed=document['getElementById']('trophy-preview-img');_0x3f150d?(_0x11c4ed['src']=_0x3f150d,_0x11c4ed['style'][_0x5c3fbd(0x261)]=_0x5c3fbd(0x1e7),_0x11c4ed[_0x5c3fbd(0x281)]['remove']('error')):(_0x11c4ed['src']=DEFAULT_TROPHY_IMAGE,_0x11c4ed['style'][_0x5c3fbd(0x261)]='block');}async function loadTrophyDefinitions(){const _0x28532b=a4_0x52d11f,_0x26ffc9=document[_0x28532b(0x334)](_0x28532b(0x277));if(!_0x26ffc9)return;_0x26ffc9['innerHTML']=_0x28532b(0x1cf);try{const _0x49e012=collection(db,'trophyDefinitions'),_0x37d94e=query(_0x49e012,orderBy('createdAt','desc')),_0x47a8b4=await getDocs(_0x37d94e);if(_0x47a8b4[_0x28532b(0x1f4)]){_0x26ffc9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x26ffc9['innerHTML']='',_0x47a8b4['forEach'](_0x17238b=>{const _0x261ac2=_0x28532b,_0x258a04=_0x17238b['data'](),_0x43ca8e=document['createElement']('tr'),_0x518cb1=_0x258a04[_0x261ac2(0x38c)]?new Date(_0x258a04['createdAt'][_0x261ac2(0x280)]*0x3e8)[_0x261ac2(0x227)]():'N/A';_0x43ca8e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x258a04['image']||DEFAULT_TROPHY_IMAGE)+_0x261ac2(0x237)+_0x258a04['name']+_0x261ac2(0x1fd)+DEFAULT_TROPHY_IMAGE+_0x261ac2(0x322)+(_0x258a04[_0x261ac2(0x252)]||'Untitled\x20Trophy')+_0x261ac2(0x351)+(_0x258a04['rarity']||'common')+'\x22>'+(_0x258a04['rarity']||_0x261ac2(0x2a9))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x518cb1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x17238b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x17238b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x17238b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x26ffc9[_0x261ac2(0x33f)](_0x43ca8e);}),setupTrophyActionButtons();}catch(_0x5640e9){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x5640e9),_0x26ffc9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x5640e9['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x2e3a25=a4_0x52d11f;document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x3874ba=>{_0x3874ba['addEventListener']('click',_0x14961f=>{const _0x2e60a3=a4_0x106c,_0x14fe95=_0x14961f['currentTarget'][_0x2e60a3(0x31d)]['id'];openTrophyModal(_0x14fe95);});}),document['querySelectorAll']('.assign-trophy-btn')[_0x2e3a25(0x253)](_0x1d1e6c=>{const _0x507a8b=_0x2e3a25;_0x1d1e6c['addEventListener'](_0x507a8b(0x388),_0x575407=>{const _0xcebd33=_0x575407['currentTarget']['dataset']['id'];openAssignTrophyModal(_0xcebd33);});}),document['querySelectorAll']('.delete-trophy-btn')[_0x2e3a25(0x253)](_0x625dd4=>{const _0x45be95=_0x2e3a25;_0x625dd4['addEventListener'](_0x45be95(0x388),_0x33d78f=>{const _0x3cc213=_0x45be95,_0x36c9e0=_0x33d78f[_0x3cc213(0x362)]['dataset']['id'];confirmDeleteTrophy(_0x36c9e0);});});}function openTrophyModal(_0x5aabd9=null){const _0x130813=a4_0x52d11f,_0x3750cb=document['getElementById']('trophy-modal'),_0x29e32c=document[_0x130813(0x334)]('trophy-modal-title'),_0x55a196=document[_0x130813(0x334)](_0x130813(0x208)),_0x1c3107=document['getElementById']('trophy-id');_0x55a196['reset'](),_0x1c3107['value']='';const _0x2ee3c3=document['getElementById']('trophy-preview-img');_0x2ee3c3&&(_0x2ee3c3['src']=DEFAULT_TROPHY_IMAGE,_0x2ee3c3['classList']['remove'](_0x130813(0x23a))),_0x5aabd9?(_0x29e32c['textContent']='Edit\x20Trophy',_0x1c3107['value']=_0x5aabd9,loadTrophyData(_0x5aabd9)):_0x29e32c[_0x130813(0x2cf)]='Create\x20New\x20Trophy',_0x3750cb['classList'][_0x130813(0x228)]('active');}async function loadTrophyData(_0x5f5d2b){const _0x26ff20=a4_0x52d11f;try{const _0x274199=doc(db,'trophyDefinitions',_0x5f5d2b),_0x26abb8=await getDoc(_0x274199);if(!_0x26abb8['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x3914d6=_0x26abb8['data']();document['getElementById'](_0x26ff20(0x27a))[_0x26ff20(0x297)]=_0x3914d6['name']||'',document['getElementById']('trophy-description')['value']=_0x3914d6['description']||'',document['getElementById']('trophy-image-url')['value']=_0x3914d6[_0x26ff20(0x353)]||'',document['getElementById']('trophy-rarity')['value']=_0x3914d6['rarity']||_0x26ff20(0x2a9),updateTrophyImagePreview();}catch(_0x145bb9){console['error']('Error\x20loading\x20trophy\x20data:',_0x145bb9),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x26ff20(0x23a));}}async function saveTrophyDefinition(){const _0x46e2ac=a4_0x52d11f;try{const _0x3cdc31=document['getElementById'](_0x46e2ac(0x2ec))[_0x46e2ac(0x297)],_0x557159=document[_0x46e2ac(0x334)]('trophy-name')['value']['trim'](),_0x24a76d=document['getElementById']('trophy-description')['value'][_0x46e2ac(0x251)](),_0x135b66=document['getElementById'](_0x46e2ac(0x1ed))[_0x46e2ac(0x297)]['trim'](),_0x4b71ed=document[_0x46e2ac(0x334)]('trophy-rarity')['value'];if(!_0x557159||!_0x24a76d||!_0x135b66){showNotification('All\x20fields\x20are\x20required',_0x46e2ac(0x23a));return;}const _0x4addb7=auth['currentUser'];if(!_0x4addb7){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies',_0x46e2ac(0x23a));return;}const _0x2e8697={'name':_0x557159,'description':_0x24a76d,'image':_0x135b66,'rarity':_0x4b71ed,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x4addb7[_0x46e2ac(0x3d1)]};!_0x3cdc31?(_0x2e8697[_0x46e2ac(0x38c)]=serverTimestamp(),_0x2e8697['createdBy']=_0x4addb7['email'],await addDoc(collection(db,'trophyDefinitions'),_0x2e8697),showNotification('Trophy\x20created\x20successfully',_0x46e2ac(0x33c))):(await updateDoc(doc(db,'trophyDefinitions',_0x3cdc31),_0x2e8697),showNotification(_0x46e2ac(0x2a7),_0x46e2ac(0x33c))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x32e246){console['error']('Error\x20saving\x20trophy:',_0x32e246),showNotification(_0x46e2ac(0x395)+_0x32e246['message'],'error');}}function closeTrophyModal(){const _0x805b11=a4_0x52d11f,_0x14d407=document[_0x805b11(0x334)](_0x805b11(0x28d));_0x14d407&&_0x14d407['classList']['remove']('active');}async function confirmDeleteTrophy(_0x59b223){const _0x1e9b0c=a4_0x52d11f;if(!_0x59b223){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm(_0x1e9b0c(0x312)))try{const _0x15f380=auth['currentUser'];if(!_0x15f380){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies',_0x1e9b0c(0x23a));return;}console['log'](_0x1e9b0c(0x366)+_0x59b223),await deleteDoc(doc(db,'trophyDefinitions',_0x59b223)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x382c66){console[_0x1e9b0c(0x23a)](_0x1e9b0c(0x29e),_0x382c66),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x382c66['message'],'error');}}async function openAssignTrophyModal(_0x54a540){const _0x560c52=a4_0x52d11f;try{const _0x48da57=doc(db,'trophyDefinitions',_0x54a540),_0xdfad11=await getDoc(_0x48da57);if(!_0xdfad11[_0x560c52(0x2ac)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x14faed=_0xdfad11['data']();document['getElementById']('assign-trophy-id')['value']=_0x54a540,document['getElementById']('assign-trophy-name')['value']=_0x14faed['name'],document[_0x560c52(0x334)](_0x560c52(0x3d8))[_0x560c52(0x305)]=_0x14faed['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x14faed['name']||'Unnamed\x20Trophy',document[_0x560c52(0x334)]('assign-trophy-description')['textContent']=_0x14faed['description']||_0x560c52(0x1c3);const _0x15562c=document['getElementById']('assign-trophy-rarity');_0x15562c['textContent']=_0x14faed['rarity']||'common',_0x15562c[_0x560c52(0x3f3)]='trophy-rarity\x20'+(_0x14faed['rarity']||'common');const _0x29a2a4=document['getElementById']('assign-trophy-modal');_0x29a2a4['classList']['add']('active');}catch(_0x8ad008){console[_0x560c52(0x23a)]('Error\x20opening\x20assign\x20trophy\x20modal:',_0x8ad008),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x3b7aec=a4_0x52d11f,_0x200cb7=document[_0x3b7aec(0x334)]('assign-trophy-modal');_0x200cb7&&_0x200cb7['classList']['remove']('active');}async function assignTrophyToPlayer(){const _0x3ee5c5=a4_0x52d11f;try{const _0x416cb5=document['getElementById']('assign-trophy-id')[_0x3ee5c5(0x297)],_0x36b73b=document['getElementById'](_0x3ee5c5(0x303))['value'],_0xe2ba28=document['getElementById']('assign-player-username')['value']['trim'](),_0x56c703=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')[_0x3ee5c5(0x297)];if(!_0x416cb5||!_0xe2ba28){showNotification(_0x3ee5c5(0x1a7),'error');return;}const _0x2d5c5d=auth['currentUser'];if(!_0x2d5c5d){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0xf817bf=null,_0x9b73b0=null,_0x29d568=null;if(_0x56c703==='non-participant'){const _0x38bbf0=collection(db,'nonParticipants'),_0x4ddf02=query(_0x38bbf0,where('username','==',_0xe2ba28)),_0x41bd2d=await getDocs(_0x4ddf02);!_0x41bd2d['empty']&&(_0xf817bf=_0x41bd2d[_0x3ee5c5(0x1d7)][0x0],_0x9b73b0=_0xf817bf['id'],_0x29d568=_0xf817bf['data']());}else{const _0x2166b0=_0x56c703==='D1'?'players':_0x56c703==='D2'?_0x3ee5c5(0x276):_0x3ee5c5(0x211),_0x3fb378=collection(db,_0x2166b0),_0x34b378=query(_0x3fb378,where(_0x3ee5c5(0x324),'==',_0xe2ba28)),_0x15fa3e=await getDocs(_0x34b378);!_0x15fa3e['empty']&&(_0xf817bf=_0x15fa3e['docs'][0x0],_0x9b73b0=_0xf817bf['id'],_0x29d568=_0xf817bf['data']());}if(!_0xf817bf){showNotification('Player\x20\x22'+_0xe2ba28+'\x22\x20not\x20found\x20in\x20'+(_0x56c703==='non-participant'?_0x3ee5c5(0x28a):_0x56c703+'\x20ladder'),_0x3ee5c5(0x23a));return;}const _0x3497ba=collection(db,'userTrophies'),_0xe3d64e=query(_0x3497ba,where(_0x3ee5c5(0x2a1),'==',_0x9b73b0),where('trophyId','==',_0x416cb5)),_0x5508fe=await getDocs(_0xe3d64e);if(!_0x5508fe['empty']){showNotification(_0x3ee5c5(0x309)+_0xe2ba28+_0x3ee5c5(0x31b),'warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x9b73b0,'playerUsername':_0xe2ba28,'trophyId':_0x416cb5,'awardedAt':serverTimestamp(),'awardedBy':_0x2d5c5d['email'],'ladder':_0x56c703}),showNotification('Trophy\x20\x22'+_0x36b73b+_0x3ee5c5(0x3a7)+_0xe2ba28,'success'),closeAssignTrophyModal();}catch(_0x500f0d){console['error'](_0x3ee5c5(0x310),_0x500f0d),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x500f0d['message'],'error');}}function setupInactivePlayersSection(){const _0x354957=a4_0x52d11f,_0xfd0fb7=document[_0x354957(0x334)](_0x354957(0x2f7));_0xfd0fb7&&_0xfd0fb7['addEventListener'](_0x354957(0x2b1),function(){const _0x22a02e=document['getElementById']('load-inactive-players-data');if(_0x22a02e)_0x22a02e['click']();});const _0x1e584a=document[_0x354957(0x265)](_0x354957(0x24b)),_0x36df06=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x1e584a&&_0x36df06&&(_0x1e584a[_0x354957(0x1f2)](_0x354957(0x2b1),function(){const _0x1f2b17=_0x354957;if(this[_0x1f2b17(0x380)]){currentLadder='D1';if(document['getElementById'](_0x1f2b17(0x247))[_0x1f2b17(0x32a)][_0x1f2b17(0x261)]!=='none'){const _0xa91377=document['getElementById']('load-inactive-players-data');if(_0xa91377)_0xa91377[_0x1f2b17(0x388)]();}}}),_0x36df06['addEventListener']('change',function(){const _0x56d49d=_0x354957;if(this['checked']){currentLadder='D2';if(document['getElementById'](_0x56d49d(0x247))[_0x56d49d(0x32a)]['display']!=='none'){const _0x21cb46=document['getElementById']('load-inactive-players-data');if(_0x21cb46)_0x21cb46['click']();}}}));const _0xed3c01=document['getElementById']('inactive-players-search');_0xed3c01&&_0xed3c01['addEventListener']('input',debounce(function(){const _0x53bf00=_0x354957,_0x49ade2=_0xed3c01['value'][_0x53bf00(0x270)](),_0x2e5ffa=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x2e5ffa['forEach'](_0x543fa6=>{const _0x4e3f81=_0x53bf00;if(_0x543fa6['querySelector']('.loading-cell')||_0x543fa6[_0x4e3f81(0x265)](_0x4e3f81(0x2b2))||_0x543fa6['querySelector']('.error-state'))return;const _0x3f1012=_0x543fa6['cells'][0x0]?.[_0x4e3f81(0x2cf)][_0x4e3f81(0x270)]()||'',_0x5037d0=_0x543fa6['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x3f1012[_0x4e3f81(0x22e)](_0x49ade2)||_0x5037d0['includes'](_0x49ade2)?_0x543fa6[_0x4e3f81(0x32a)]['display']='':_0x543fa6['style'][_0x4e3f81(0x261)]='none';});},0x12c)),document['addEventListener']('click',function(_0x108cd){const _0x339ff8=_0x354957;if(_0x108cd[_0x339ff8(0x215)]['closest']('.view-player-btn')){const _0x178c86=_0x108cd[_0x339ff8(0x215)]['closest'](_0x339ff8(0x2c0)),_0x32f24a=_0x178c86['dataset']['username'];_0x32f24a&&alert('View\x20player\x20details\x20for\x20'+_0x32f24a+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x92e611=a4_0x52d11f,_0x18fa99=document['getElementById'](_0x92e611(0x39a));if(!_0x18fa99)return;_0x18fa99['innerHTML']=_0x92e611(0x278);try{const _0x30fe0a=document['getElementById'](_0x92e611(0x2f7)),_0x174dc4=_0x30fe0a?parseInt(_0x30fe0a['value'])||0x0:0x0,_0x20b869=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x400414=await getDocs(_0x20b869);if(_0x400414['empty']){_0x18fa99['innerHTML']=_0x92e611(0x318);return;}const _0x5d6443=[];_0x400414['forEach'](_0x4dc9c3=>{const _0xbd4160=_0x92e611,_0x245a37=_0x4dc9c3[_0xbd4160(0x2c6)]();_0x5d6443[_0xbd4160(0x3d0)]({..._0x245a37,'id':_0x4dc9c3['id'],'username':_0x245a37[_0xbd4160(0x324)]||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x5d6443['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x569bad=currentLadder==='D1'?'approvedMatches':_0x92e611(0x1d9),_0x4e3343=_0x5d6443['map'](async _0x2c224e=>{const _0x7b77a4=_0x92e611;try{const _0x430a8f=collection(db,_0x569bad),_0x831eba=query(_0x430a8f,or(where('winnerUsername','==',_0x2c224e['username']),where('loserUsername','==',_0x2c224e['username'])),orderBy('approvedAt',_0x7b77a4(0x27c)),limit(0x1)),_0x506bb9=await getDocs(_0x831eba);if(!_0x506bb9[_0x7b77a4(0x1f4)]){const _0x5cc746=_0x506bb9['docs'][0x0][_0x7b77a4(0x2c6)](),_0x2d95e5=_0x5cc746['approvedAt']?new Date(_0x5cc746[_0x7b77a4(0x3d5)][_0x7b77a4(0x280)]*0x3e8):null,_0x3cdf23=new Date(),_0x14bdf0=_0x2d95e5?Math[_0x7b77a4(0x221)]((_0x3cdf23-_0x2d95e5)/(0x3e8*0x3c*0x3c*0x18)):null,_0x4b5a1=_0x5cc746['winnerUsername']===_0x2c224e[_0x7b77a4(0x324)]?_0x5cc746[_0x7b77a4(0x2fe)]:_0x5cc746[_0x7b77a4(0x38e)],_0x543945=_0x5cc746['winnerUsername']===_0x2c224e[_0x7b77a4(0x324)]?_0x7b77a4(0x3ec):_0x7b77a4(0x3d6);return{..._0x2c224e,'lastMatch':{'date':_0x2d95e5?_0x2d95e5['toLocaleDateString']():'N/A','opponent':_0x4b5a1||'Unknown','result':_0x543945,'timestamp':_0x2d95e5||new Date(0x0),'daysSinceMatch':_0x14bdf0||Number['MAX_SAFE_INTEGER']}};}else return{..._0x2c224e,'lastMatch':{'date':_0x7b77a4(0x230),'opponent':_0x7b77a4(0x2e7),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number[_0x7b77a4(0x254)]}};}catch(_0x41e36a){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x2c224e['username']+':',_0x41e36a),{..._0x2c224e,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x1f275b=await Promise['all'](_0x4e3343);_0x1f275b['sort']((_0x1df1d1,_0x775cf9)=>_0x775cf9['lastMatch']['daysSinceMatch']-_0x1df1d1['lastMatch'][_0x92e611(0x20d)]);_0x174dc4>0x0&&(_0x1f275b=_0x1f275b['filter'](_0x5a64cc=>_0x5a64cc['lastMatch']['daysSinceMatch']>=_0x174dc4));_0x18fa99['innerHTML']='';if(_0x1f275b['length']===0x0){_0x18fa99['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x1f275b[_0x92e611(0x253)](_0x1653b9=>{const _0x1e993b=_0x92e611,_0x3ad9b4=document['createElement']('tr'),_0x370544=_0x1653b9['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x1653b9['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x3ad9b4[_0x1e993b(0x3f3)]=_0x370544,_0x3ad9b4[_0x1e993b(0x319)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1653b9['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1653b9['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1653b9['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1653b9['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x1653b9[_0x1e993b(0x239)]['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1653b9['lastMatch'][_0x1e993b(0x2b5)]==='Never\x20played'?_0x1e993b(0x2c7):_0x1653b9[_0x1e993b(0x239)]['result']+_0x1e993b(0x2a4)+_0x1653b9['lastMatch'][_0x1e993b(0x24d)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x1653b9[_0x1e993b(0x324)]+_0x1e993b(0x350),_0x18fa99['appendChild'](_0x3ad9b4);}),console[_0x92e611(0x29f)]('Displaying\x20'+_0x1f275b['length']+'\x20inactive\x20players');}catch(_0x20d5bd){console['error']('Error\x20loading\x20inactive\x20players:',_0x20d5bd),_0x18fa99['innerHTML']=_0x92e611(0x3be)+_0x20d5bd['message']+_0x92e611(0x3dd);}}function setupHighlightButtons(){const _0x49d98c=a4_0x52d11f;console['log'](_0x49d98c(0x205));const _0x3c4b7e=document['getElementById'](_0x49d98c(0x3ae));_0x3c4b7e&&_0x3c4b7e['addEventListener']('click',function(){const _0x3f7a62=_0x49d98c;console['log'](_0x3f7a62(0x31f)),openHighlightModal(_0x3f7a62(0x285));});const _0x3a35f3=document['getElementById'](_0x49d98c(0x35e));_0x3a35f3&&_0x3a35f3['addEventListener'](_0x49d98c(0x388),function(){const _0x2edb36=_0x49d98c;console['log'](_0x2edb36(0x3cf)),openHighlightModal('creator');});const _0x3ada91=document[_0x49d98c(0x334)]('create-achievement-highlight-btn');_0x3ada91&&_0x3ada91['addEventListener'](_0x49d98c(0x388),function(){const _0x51f59a=_0x49d98c;console[_0x51f59a(0x29f)]('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x51f59a(0x1a6));});}function openHighlightModal(_0x2bca91='match'){const _0x14974c=a4_0x52d11f;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x2bca91);const _0x4e0086=document['getElementById']('highlight-modal'),_0x1d0473=document['getElementById']('highlight-form'),_0x2cfb1c=document['getElementById']('highlight-modal-title'),_0x4f8859=document['getElementById']('highlight-id');if(!_0x4e0086||!_0x1d0473||!_0x2cfb1c){console['error'](_0x14974c(0x2bc));return;}_0x1d0473['reset'](),_0x4f8859['value']='';const _0xf80857=['match',_0x14974c(0x370),'achievement'],_0x32e0b0=!_0xf80857[_0x14974c(0x22e)](_0x2bca91);if(_0x32e0b0){const _0x1b5241=_0x2bca91;_0x4f8859['value']=_0x1b5241,_0x2cfb1c['textContent']='Loading...',loadHighlightDataAdmin(_0x1b5241);}else{const _0x1182a9=_0x2bca91;document['getElementById'](_0x14974c(0x1cc))['value']=_0x1182a9,_0x2cfb1c['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x1182a9),toggleHighlightFields(_0x1182a9);const _0x2f8a09=auth['currentUser'];_0x2f8a09&&document['getElementById']('highlight-submitted-by')&&(document['getElementById'](_0x14974c(0x345))[_0x14974c(0x297)]=_0x2f8a09['displayName']||_0x2f8a09[_0x14974c(0x3d1)]);}_0x4e0086['classList']['add']('active');}function toggleHighlightFields(_0x17ef15){const _0x5e8a2a=a4_0x52d11f;console[_0x5e8a2a(0x29f)]('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x17ef15);const _0x5aeb88=document['getElementById'](_0x5e8a2a(0x2c8));if(!_0x5aeb88)return;const _0x5188a6=_0x5aeb88['querySelectorAll']('.form-group,\x20.form-row');_0x5188a6['forEach'](_0x515bb0=>_0x515bb0[_0x5e8a2a(0x32a)]['display']='none');const _0x51363f=document[_0x5e8a2a(0x334)](_0x5e8a2a(0x2f5));if(_0x51363f)_0x51363f['style']['display']=_0x5e8a2a(0x1ad);const _0x1f5040=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x1f5040['forEach'](_0x2004dc=>{const _0x2fa6c8=document['getElementById'](_0x2004dc);if(_0x2fa6c8)_0x2fa6c8['style']['display']='block';});if(_0x17ef15==='match'){const _0xf97da7=[_0x5e8a2a(0x3c9),'highlight-match-info-container',_0x5e8a2a(0x364),'highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0xf97da7['forEach'](_0x491627=>{const _0x3475f6=_0x5e8a2a,_0x5554a1=document['getElementById'](_0x491627);_0x5554a1&&(_0x491627==='highlight-players-container'?_0x5554a1['style']['display']=_0x3475f6(0x315):_0x5554a1['style'][_0x3475f6(0x261)]='block');});const _0xc3ff6f=document['getElementById']('highlight-video-id');if(_0xc3ff6f){_0xc3ff6f['required']=!![];const _0x1bf5d6=_0xc3ff6f['previousElementSibling'];if(_0x1bf5d6)_0x1bf5d6['innerHTML']=_0x5e8a2a(0x3da);}if(_0x51363f)_0x51363f['style'][_0x5e8a2a(0x261)]='block';updateHighlightVideoPreview();}else{if(_0x17ef15==='creator'){const _0x3107bb=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container',_0x5e8a2a(0x1dd),_0x5e8a2a(0x3c9)];_0x3107bb['forEach'](_0x3fa48c=>{const _0x45be2a=_0x5e8a2a,_0x55c812=document['getElementById'](_0x3fa48c);if(_0x55c812)_0x55c812[_0x45be2a(0x32a)]['display']='block';});const _0x1f34d7=document[_0x5e8a2a(0x334)](_0x5e8a2a(0x398));if(_0x1f34d7){_0x1f34d7['required']=![];const _0xf65453=_0x1f34d7['previousElementSibling'];if(_0xf65453)_0xf65453[_0x5e8a2a(0x319)]=_0x5e8a2a(0x290);}}else{if(_0x17ef15===_0x5e8a2a(0x1a6)){const _0x2bcfe8=['highlight-achievement-player-container','highlight-achievement-type-container','highlight-achievement-details-container',_0x5e8a2a(0x2a3),'highlight-achievement-image-container','highlight-video-container'];_0x2bcfe8['forEach'](_0x381014=>{const _0x484e18=_0x5e8a2a,_0xcfad05=document['getElementById'](_0x381014);if(_0xcfad05)_0xcfad05['style'][_0x484e18(0x261)]=_0x484e18(0x1e7);});const _0x4154bb=document['getElementById']('highlight-video-id');if(_0x4154bb){_0x4154bb['required']=![];const _0x2c965f=_0x4154bb['previousElementSibling'];if(_0x2c965f)_0x2c965f['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x13f241){const _0x46763b=a4_0x52d11f;try{const _0x591669=doc(db,_0x46763b(0x212),_0x13f241),_0x12df72=await getDoc(_0x591669);if(!_0x12df72['exists']()){showNotification(_0x46763b(0x21c),'error');return;}const _0x5f18ed=_0x12df72['data'](),_0x3209f3=_0x5f18ed['type']||'match';document[_0x46763b(0x334)]('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x3209f3),document[_0x46763b(0x334)](_0x46763b(0x1cc))[_0x46763b(0x297)]=_0x3209f3,toggleHighlightFields(_0x3209f3),document[_0x46763b(0x334)]('highlight-title')['value']=_0x5f18ed['title']||'',document['getElementById']('highlight-description')['value']=_0x5f18ed[_0x46763b(0x369)]||'',document['getElementById'](_0x46763b(0x345))['value']=_0x5f18ed['submittedBy']||'';_0x5f18ed[_0x46763b(0x25b)]&&(document['getElementById']('highlight-video-id')[_0x46763b(0x297)]=_0x5f18ed['videoId'],updateHighlightVideoPreview());if(_0x3209f3==='match'){document['getElementById'](_0x46763b(0x22f))['value']=_0x5f18ed['matchInfo']||'',document[_0x46763b(0x334)]('highlight-map')[_0x46763b(0x297)]=_0x5f18ed['map']||'';if(_0x5f18ed[_0x46763b(0x1e6)]){const _0x579f5d=new Date(_0x5f18ed[_0x46763b(0x1e6)]['seconds']*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x579f5d['toISOString']()['split']('T')[0x0];}document[_0x46763b(0x334)]('highlight-winner-name')['value']=_0x5f18ed['winnerName']||'',document['getElementById']('highlight-winner-score')['value']=_0x5f18ed['winnerScore']||'',document['getElementById']('highlight-loser-name')['value']=_0x5f18ed['loserName']||'',document['getElementById'](_0x46763b(0x250))['value']=_0x5f18ed['loserScore']||'',document['getElementById'](_0x46763b(0x3a5))['value']=_0x5f18ed['matchLink']||'';}else{if(_0x3209f3==='creator')document[_0x46763b(0x334)](_0x46763b(0x340))[_0x46763b(0x297)]=_0x5f18ed['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x5f18ed['mapCreator']||'',document[_0x46763b(0x334)](_0x46763b(0x1db))['value']=_0x5f18ed['mapVersion']||'',document['getElementById'](_0x46763b(0x33a))['value']=_0x5f18ed['creatorImageUrl']||'';else _0x3209f3==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0x5f18ed['achievementPlayer']||'',document[_0x46763b(0x334)]('highlight-achievement-type')['value']=_0x5f18ed['achievementType']||'',document['getElementById'](_0x46763b(0x200))['value']=_0x5f18ed[_0x46763b(0x26a)]||'',document[_0x46763b(0x334)]('highlight-player-profile')['value']=_0x5f18ed['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')['value']=_0x5f18ed['achievementImageUrl']||'');}}catch(_0x2fba0c){console['error']('Error\x20loading\x20highlight:',_0x2fba0c),showNotification('Error\x20loading\x20highlight:\x20'+_0x2fba0c[_0x46763b(0x2ae)],'error');}}async function saveHighlight(){const _0x4b4afd=a4_0x52d11f;try{const _0x3a2b7d=document[_0x4b4afd(0x334)]('highlight-id')?.['value']||'',_0xd83219=document['getElementById']('highlight-type')?.[_0x4b4afd(0x297)]||'match',_0x4e0bc6={'title':document['getElementById']('highlight-title')?.[_0x4b4afd(0x297)]?.['trim']()||'','description':document[_0x4b4afd(0x334)]('highlight-description')?.['value']?.['trim']()||'','submittedBy':document['getElementById'](_0x4b4afd(0x345))?.['value']?.['trim']()||'','videoId':document['getElementById'](_0x4b4afd(0x398))?.['value']?.[_0x4b4afd(0x251)]()||null,'type':_0xd83219};if(!_0x4e0bc6['title']){showNotification('Title\x20is\x20required','error');return;}if(_0xd83219==='match'){_0x4e0bc6['matchInfo']=document['getElementById'](_0x4b4afd(0x22f))?.['value']?.[_0x4b4afd(0x251)]()||'',_0x4e0bc6['map']=document['getElementById']('highlight-map')?.['value']?.[_0x4b4afd(0x251)]()||'';const _0xebd39a=document['getElementById'](_0x4b4afd(0x1c8)),_0x488967=_0xebd39a?.[_0x4b4afd(0x297)]||'';_0x4e0bc6['matchDate']=_0x488967?Timestamp['fromDate'](new Date(_0x488967)):null,_0x4e0bc6['winnerName']=document['getElementById']('highlight-winner-name')?.['value']?.['trim']()||'',_0x4e0bc6['winnerScore']=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x4e0bc6['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x4e0bc6['loserScore']=document['getElementById']('highlight-loser-score')?.['value']?.[_0x4b4afd(0x251)]()||'',_0x4e0bc6['matchLink']=document['getElementById']('highlight-match-link')?.[_0x4b4afd(0x297)]?.['trim']()||'';if(!_0x4e0bc6['videoId']){showNotification(_0x4b4afd(0x1c1),_0x4b4afd(0x23a));return;}}else{if(_0xd83219==='creator'){_0x4e0bc6['map']=document[_0x4b4afd(0x334)](_0x4b4afd(0x340))?.['value']?.[_0x4b4afd(0x251)]()||'',_0x4e0bc6[_0x4b4afd(0x3a0)]=document['getElementById']('highlight-map-creator')?.['value']?.['trim']()||'',_0x4e0bc6['mapVersion']=document['getElementById'](_0x4b4afd(0x1db))?.['value']?.['trim']()||'',_0x4e0bc6['creatorImageUrl']=document['getElementById']('highlight-creator-image')?.[_0x4b4afd(0x297)]?.[_0x4b4afd(0x251)]()||'';if(!_0x4e0bc6['mapCreator']){showNotification('Map\x20Creator\x20is\x20required',_0x4b4afd(0x23a));return;}}else{if(_0xd83219==='achievement'){_0x4e0bc6['achievementPlayer']=document['getElementById'](_0x4b4afd(0x39b))?.['value']?.['trim']()||'',_0x4e0bc6['achievementType']=document['getElementById'](_0x4b4afd(0x36e))?.[_0x4b4afd(0x297)]?.[_0x4b4afd(0x251)]()||'',_0x4e0bc6['achievementDetails']=document['getElementById'](_0x4b4afd(0x200))?.[_0x4b4afd(0x297)]?.[_0x4b4afd(0x251)]()||'',_0x4e0bc6['playerProfileUrl']=document[_0x4b4afd(0x334)]('highlight-player-profile')?.[_0x4b4afd(0x297)]?.['trim']()||'',_0x4e0bc6['achievementImageUrl']=document[_0x4b4afd(0x334)]('highlight-achievement-image')?.['value']?.[_0x4b4afd(0x251)]()||'';if(!_0x4e0bc6[_0x4b4afd(0x26d)]){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x3a2b7d?(_0x4e0bc6['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x3a2b7d),_0x4e0bc6),showNotification(_0x4b4afd(0x1cd),_0x4b4afd(0x33c))):(_0x4e0bc6['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x4e0bc6),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x3d268f){console['error']('Error\x20saving\x20highlight:',_0x3d268f),showNotification('Error\x20saving\x20highlight:\x20'+_0x3d268f[_0x4b4afd(0x2ae)],'error');}}function closeHighlightModal(){const _0x5a7a79=a4_0x52d11f,_0x31f6df=document['getElementById'](_0x5a7a79(0x2a0));if(_0x31f6df)_0x31f6df['classList']['remove']('active');}function getHighlightTypeName(_0x43da4c){switch(_0x43da4c){case'match':return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x471762=a4_0x52d11f,_0x5cde7d=document['getElementById']('highlight-video-id'),_0x4778da=document[_0x471762(0x334)]('highlight-video-preview-container'),_0x20e67f=document['getElementById']('highlight-video-preview');if(!_0x5cde7d||!_0x20e67f||!_0x4778da)return;const _0x47340b=_0x5cde7d['value']['trim']();_0x47340b&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x47340b)?(_0x20e67f['src']=_0x471762(0x3de)+_0x47340b,_0x4778da[_0x471762(0x32a)]['display']=_0x471762(0x1e7)):(_0x20e67f['src']='',_0x4778da['style'][_0x471762(0x261)]=_0x471762(0x1ad));}async function loadHighlightsAdmin(){const _0x4d2800=a4_0x52d11f,_0x5cd2e8=document['getElementById']('highlights-table-body');if(!_0x5cd2e8)return;_0x5cd2e8[_0x4d2800(0x319)]=_0x4d2800(0x3f5);try{const _0x393622=query(collection(db,'highlights'),orderBy('createdAt',_0x4d2800(0x27c))),_0x44f543=await getDocs(_0x393622);if(_0x44f543['empty']){_0x5cd2e8['innerHTML']=_0x4d2800(0x3e9);return;}_0x5cd2e8[_0x4d2800(0x319)]='',_0x44f543[_0x4d2800(0x253)](_0x147360=>{const _0x50b02a=_0x4d2800,_0xedee27=_0x147360['data'](),_0x1af0e1=document[_0x50b02a(0x225)]('tr'),_0x4b70a3=_0xedee27['createdAt']?new Date(_0xedee27['createdAt']['seconds']*0x3e8)['toLocaleDateString']():_0x50b02a(0x2e7);let _0x37b3ae='Unknown',_0x52fba3='';switch(_0xedee27['type']){case _0x50b02a(0x285):_0x37b3ae='Match',_0x52fba3='match-type';break;case _0x50b02a(0x370):_0x37b3ae='Creator',_0x52fba3=_0x50b02a(0x214);break;case _0x50b02a(0x1a6):_0x37b3ae='Achievement',_0x52fba3='achievement-type';break;}_0x1af0e1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xedee27['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x52fba3+'\x22>'+_0x37b3ae+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4b70a3+_0x50b02a(0x3a4)+(_0xedee27['submittedBy']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xedee27['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x50b02a(0x2d8))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x147360['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x147360['id']+_0x50b02a(0x36a),_0x5cd2e8['appendChild'](_0x1af0e1);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x139e05=>{const _0x27d38d=_0x4d2800;_0x139e05[_0x27d38d(0x1f2)]('click',_0x118fe0=>{const _0x27dfdf=_0x27d38d;openHighlightModal(_0x118fe0[_0x27dfdf(0x362)]['dataset']['id']);});}),document['querySelectorAll'](_0x4d2800(0x263))['forEach'](_0xae42=>{_0xae42['addEventListener']('click',_0x24d3e9=>{const _0x28010c=a4_0x106c;confirmDeleteHighlight(_0x24d3e9[_0x28010c(0x362)]['dataset']['id']);});});}catch(_0x64dac1){console['error']('Error\x20loading\x20highlights:',_0x64dac1),_0x5cd2e8[_0x4d2800(0x319)]=_0x4d2800(0x2da)+_0x64dac1[_0x4d2800(0x2ae)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0xabf60b){const _0x2d7fda=a4_0x52d11f;if(confirm(_0x2d7fda(0x202)))try{await deleteDoc(doc(db,'highlights',_0xabf60b)),showNotification('Highlight\x20deleted\x20successfully',_0x2d7fda(0x33c)),loadHighlightsAdmin();}catch(_0x393575){console['error']('Error\x20deleting\x20highlight:',_0x393575),showNotification('Error\x20deleting\x20highlight:\x20'+_0x393575['message'],_0x2d7fda(0x23a));}}function setupCreateTestMatchModal(){const _0x59749f=a4_0x52d11f;console['log'](_0x59749f(0x30f));const _0x4eb308=document['getElementById']('create-test-match-modal'),_0x3d64e7=document['getElementById'](_0x59749f(0x34a));if(!_0x4eb308){console[_0x59749f(0x23a)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x3d64e7){console[_0x59749f(0x23a)](_0x59749f(0x3f7));return;}const _0x5b2a99=_0x4eb308['cloneNode'](!![]);_0x4eb308['parentNode']['replaceChild'](_0x5b2a99,_0x4eb308);const _0x43e0d8=_0x5b2a99['querySelector'](_0x59749f(0x1d2));_0x5b2a99['addEventListener']('click',function(_0x50074d){_0x50074d['target']===_0x5b2a99&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x2835d0=_0x5b2a99['querySelector']('.close-btn');_0x2835d0&&_0x2835d0[_0x59749f(0x1f2)]('click',function(_0xfe808d){_0xfe808d['preventDefault'](),_0xfe808d['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x36a86f=_0x5b2a99['querySelector'](_0x59749f(0x2d5));_0x36a86f&&_0x36a86f['addEventListener'](_0x59749f(0x388),function(_0x3db63f){const _0xc705af=_0x59749f;_0x3db63f['preventDefault'](),_0x3db63f['stopPropagation'](),console['log'](_0xc705af(0x2b3)),closeCreateTestMatchModal();});if(_0x43e0d8){_0x43e0d8['addEventListener']('submit',function(_0x294c3f){const _0x24b877=_0x59749f;_0x294c3f[_0x24b877(0x1d5)](),_0x294c3f[_0x24b877(0x1b7)](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x5ad677=_0x43e0d8[_0x59749f(0x265)]('button[type=\x22submit\x22]');_0x5ad677&&_0x5ad677['addEventListener']('click',function(_0x172e44){const _0x5c6b6a=_0x59749f;_0x172e44[_0x5c6b6a(0x1d5)](),_0x172e44[_0x5c6b6a(0x1b7)](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x19eacb=a4_0x52d11f;console[_0x19eacb(0x29f)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x456c7b=document['getElementById']('highlight-form');_0x456c7b&&_0x456c7b['addEventListener'](_0x19eacb(0x28c),_0xb29edf=>{const _0x4dc8ce=_0x19eacb;_0xb29edf[_0x4dc8ce(0x1d5)](),saveHighlight();});const _0x51cc6f=document['getElementById']('cancel-highlight-btn');_0x51cc6f&&_0x51cc6f['addEventListener']('click',closeHighlightModal);const _0x345499=document['querySelector'](_0x19eacb(0x384));_0x345499&&_0x345499['addEventListener'](_0x19eacb(0x388),closeHighlightModal);const _0xd1a114=document['getElementById']('highlight-modal');_0xd1a114&&_0xd1a114['addEventListener']('click',_0x2824a5=>{_0x2824a5['target']===_0xd1a114&&closeHighlightModal();});const _0x411746=document['getElementById']('highlight-video-id');_0x411746&&_0x411746['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log'](_0x19eacb(0x31e));}function a4_0x4b52(){const _0x10d88f=['Error\x20loading\x20inactive\x20players:','achievement','Trophy\x20ID\x20and\x20username\x20are\x20required','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','Error\x20checking\x20','manage-matches','rgba(255,\x20193,\x207,\x200.1)','none','edit-highlight-creatorImageUrl-input','demoLink','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','articles-table-body','.delete-match-btn','edit-highlight-achievementDetails-input','confirm-resimulate-btn','demotion','stopPropagation','Error\x20adding\x20ribbon:','Manage\x20Points\x20section\x20initialized','Error\x20loading\x20ribbons\x20data','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','closest','articles','quick-edit-points-modal','set-role-modal','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','edit-match-map','No\x20description','Error\x20promoting\x20player:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','matches-next-page','winnerComment','highlight-match-date','points','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','Found\x20radio\x20with\x20value:','highlight-type','Highlight\x20updated\x20successfully!','Error\x20in\x20demotion:','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','ribbon-level','#create-test-match-form','article-modal','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','preventDefault','Committing\x20batch\x20update\x20for\x20','docs','Emerald','approvedMatchesD2','RejectedD2','highlight-map-version','Highlight\x20added\x20successfully!','highlight-creator-image-container','Setting\x20up\x20Manage\x20Points\x20section','Player\x20not\x20found','edit-match-ladder','insertAdjacentElement','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','endDate','update','\x20ELO\x20history\x20entries.\x20','matchDate','block','resimulate-match-id','Please\x20enter\x20valid\x20data','#000000','updatedAt','cells','trophy-image-url','setAttribute','\x27</td>','search-result-item','\x20-\x20','addEventListener','Matches\x20action\x20buttons\x20setup\x20complete','empty','bind','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','.sidebar-nav\x20.nav-item[data-section=\x22','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','elo-history-table-body','edit-highlight-videoId-input','apply','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','cancel-role-btn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','highlight-achievement-details','0.6','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','remove','Create\x20test\x20match\x20form\x20not\x20found','Setting\x20up\x20highlight\x20buttons','split','data-section','trophy-form','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','matchId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20','ribbon-user-search','daysSinceMatch','edit-match-loser','Found\x20','edit-highlight-playerProfileUrl-input','playersD3','highlights','\x20users\x20to\x20check...','creator-type','target','set-elo-ladder','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','Bronze','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','resimulate-modal','\x20history\x20entries\x20for\x20user\x20','Highlight\x20not\x20found','TestMap','Setting\x20up\x20Manage\x20Matches\x20section','settings','Error\x20creating\x20simple\x20test\x20match:','floor','View\x20history\x20clicked\x20for\x20user:','elo-history','Article\x20not\x20found','createElement','mapName','toLocaleString','add','Setting\x20up\x20matches\x20action\x20buttons...','create-new-trophy-btn','Role\x20select\x20set\x20to:\x20','pendingResimulateData','active','includes','highlight-match-info','Never\x20played','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','rank-distribution-chart','Failed\x20to\x20send\x20Discord\x20notification:','quick-edit-display-name','Player\x20not\x20found\x20in\x20','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','data-ladder','lastMatch','error','Set\x20to\x20','\x20ladder','set','Unknown\x20User','Gold','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','./promotions.js','Looking\x20for\x20user\x20role\x20information\x20for\x20','winnerScore','new-player-elo','d2-next-page','resimulation','inactive-players','ribbons','Friday','manage-highlights','.ladder-switch\x20input[value=\x22D1\x22]','load-dashboard-data','opponent','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','),\x20','highlight-loser-score','trim','name','forEach','MAX_SAFE_INTEGER','displayName','\x20section','No\x20user\x20ID\x20found\x20on\x20button','matches-search','load-articles-data','Admin\x20Adjustment','videoId','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','playerRibbonsD2','players-table-body','\x20Weekly\x20Activity','5px','display','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','.delete-highlight-btn','Please\x20enter\x20a\x20username','querySelector','Modal\x20computed\x20styles:','points-amount','winnerName','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','achievementDetails','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','no-results','achievementPlayer','size','activity-chart','toLowerCase','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','win','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','Subtracted\x20','error-state','playersD2','trophies-table-body','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>','Found\x20ELO\x20history\x20for\x20player\x20','trophy-name','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','desc','history-type-filter','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','sort','seconds','classList','Error\x20initializing\x20points:\x20','trophy-preview-img','1200','match','matches-page-indicator','manage-articles','RejectedD3','eloHistoryD2','non-participants','join','submit','trophy-modal','catch','elo-history-search','YouTube\x20Video\x20ID\x20(Optional)','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','positive-change','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','D1\x20Players','img','name-desc','value','Failed\x20to\x20resimulate\x20match:\x20','edit-highlight-type-select','Error\x20loading\x20user\x20points\x20history:','test-match-winner-username','name-asc','negative-change','Error\x20deleting\x20trophy\x20definition:','log','highlight-modal','userId','edit-match-loser-suicides','highlight-player-profile-container','\x20vs\x20','userProfiles','-next-page','Trophy\x20updated\x20successfully','mapVersion','common','Firebase\x20connection\x20test\x20successful!','startDate','exists','Processing\x20points\x20edit:','message','promotedBy','keypress','change','.empty-state','Modal\x20cancel\x20button\x20clicked','No\x20reason\x20provided','date','title','Error\x20searching\x20user:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','lastVisible','test','NonParticipant','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','Switched\x20to\x20','openResimulateModal','searchTerm','.view-player-btn','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','input','demote-username','demotedBy','Page\x201','data','No\x20matches\x20found','highlight-form','prototype','matches-table-body','right','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','elo','Error\x20loading\x20points\x20data:','textContent','Initializing\x20points\x20field\x20for\x20user\x20','Trophy\x20Preview','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','selected-user-points','#cancel-create-test-match-btn','Adding\x20player\x20','exception','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','eloRating','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','\x20(from\x20','approvedMatchesD3','parentNode','ribbon-type-select','manage-trophies','warn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','then','loading','edit-wins','trophy-preview-container','Player\x20deleted\x20successfully','N/A','Username\x20input\x20set\x20to:\x20','delete-match-confirm-modal','loss','Set\x20default\x20ladder\x20to:','trophy-id','points-sort-order','Unknown','reason','Error\x20loading\x20players:','.admin-section','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','#CD7F32','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','highlight-video-preview-container','input[name=\x22quick-action\x22]:checked','inactive-days-filter','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','./ladderalgorithm.js','d2-prev-page','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','\x20added\x20successfully\x20to\x20','type','loserUsername','\x20allowed\x20tabs:','Create\x20test\x20match\x20modal\x20not\x20found','Modal\x20should\x20now\x20be\x20visible','reset-history-filters','assign-trophy-name','edit-highlight-mapVersion-input','src','edit-username','history-start-date','Role\x20\x27','Player\x20\x22','quick-edit-points-form','players','edit-match-loser-comment','players-ladder-selector','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','Error\x20assigning\x20trophy:','find','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','reset-matches-filters','article-title','flex','admin','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','innerHTML','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','\x22\x20already\x20has\x20this\x20trophy','low-points','dataset','Manage\x20Highlights\x20section\x20initialized','Match\x20highlight\x20button\x20clicked','eloHistory','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','playerProfileUrl','username','\x20from\x20','migrate-points-btn','set-elo-modal','demote-modal','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>','style','sources','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','onerror','points-user-search','.quick-edit-btn','Manage\x20Ribbons\x20section\x20initialized','Error\x20setting\x20up\x20admin\x20dashboard','fa-check-circle','-page-indicator','getElementById','querySelectorAll','roleName','page','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','edit-highlight-loserScore-input','highlight-creator-image','\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22','success','Unauthorized:\x20Admin\x20access\x20required','div','appendChild','highlight-map','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','No\x20specific\x20permissions\x20for\x20user\x20','edit-highlight-achievementPlayer-input','Match\x20deleted\x20successfully','highlight-submitted-by','promotion','matches-prev-page','playerRibbonsD3','length','create-test-match-form','opacity','ribbon-target-user','Load\x20ribbons\x20data\x20clicked','sendPromotionNotification','Player\x20','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','edit-match-winner-score','image','ELO\x20rating\x20for\x20','Username\x20','\x20points','pointsHistory','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','Error\x20searching\x20for\x20user','match-count','edit-losses','manage-ranks','loserName','create-creator-highlight-btn','roleAssignedAt','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','rejected-count','currentTarget','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','highlight-map-container','Loaded\x20','Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20','dashboard','userAllowedTabs','description','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','#d32f2f','Updating\x20role\x20for\x20','highlight-achievement-type','approvedMatches','creator','creatorImageUrl','rgba(255,\x20255,\x20255,\x200.1)','Error\x20loading\x20article\x20data:','Error\x20saving\x20article:','lastUpdated','Promoting\x20player\x20to\x20','all','user-search-results','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20deleting\x20match:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','create-test-match-modal','Demotion','checked','user-roles-section','Role\x20removed','newElo','#highlight-modal\x20.close-btn','\x20in\x20','disabled','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','click','Silver','article-id','Adding\x20simple\x20test\x20match...','createdAt','demote-ladder','winnerUsername','position','#ffffff','keys','edit-highlight-achievementType-input','playerId','ref','Failed\x20to\x20save\x20trophy:\x20','Error\x20deleting\x20player:','mapPlayed','highlight-video-id','matchLink','inactive-players-table-body','highlight-achievement-player','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','Delete\x20match\x20clicked:','User\x20','mapCreator','Unranked','\x22\x20not\x20found\x20in\x20any\x20collection','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','highlight-match-link','manage-points','\x22\x20awarded\x20to\x20','map','manage-players','Match\x20resimulated\x20successfully!\x20','values','hidden','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','create-match-highlight-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','pendingMatchesD2','#e0e0e0','Error\x20loading\x20ribbons:','test-match-date','timestamp','load-trophies-data','\x20(+','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','DOMContentLoaded','Modal\x20opened\x20successfully','edit-highlight-description-input','promote-form','validation-results-container','Error\x20loading\x20articles:','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','\x22\x20set','store-item-select','fa-exclamation-triangle','set-elo-btn','No\x20users\x20found\x20in\x20userProfiles\x20collection','Failed\x20to\x20load\x20match\x20data','getComputedStyle','modifiedBy','\x20<span\x20class=\x22user-source\x22>(','currentUser','highlight-video-container','.ladder-switch\x20input','visible','\x20already\x20exists\x20in\x20','article-author','roleColor','Creator\x20highlight\x20button\x20clicked','push','email','Failed\x20to\x20delete\x20match:\x20','info','Ribbons\x20data\x20loaded\x20successfully','approvedAt','Lost','role','assign-trophy-image','edit-match-modal','YouTube\x20Video\x20ID*','edit-player-modal','bar','</td></tr>','https://www.youtube.com/embed/','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','Error\x20setting\x20custom\x20ELO:','Enter','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','border','paste','.remove-role-btn','edit-highlight-matchInfo-input','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','Modal\x20element\x20found:','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','setHours','previousElo','Won','loading-cell','Tuesday','.delete-article-btn','fromDate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','edit-match-winner-demo','className','cancel-trophy-btn','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','Form\x20elements\x20are\x20missing','Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM','achievementType','Failed\x20to\x20load\x20player\x20data','allUsersPoints','loserScore','Quick\x20edit\x20form\x20not\x20found!','Edit\x20Article','get','Collection\x20reference\x20created:'];a4_0x4b52=function(){return _0x10d88f;};return a4_0x4b52();}function setupManageMatchesSection(){const _0x46cfce=a4_0x52d11f;console[_0x46cfce(0x29f)](_0x46cfce(0x21e));const _0x29f9ce=document['getElementById'](_0x46cfce(0x347)),_0x2d05e3=document[_0x46cfce(0x334)](_0x46cfce(0x1c6));_0x29f9ce&&_0x29f9ce['addEventListener']('click',()=>{const _0x435317=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x435317]['page']-0x1);});_0x2d05e3&&_0x2d05e3[_0x46cfce(0x1f2)]('click',()=>{const _0x11e630=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x11e630]['page']+0x1);});const _0x59a00f=document[_0x46cfce(0x334)]('apply-matches-filters'),_0x2c7c54=document['getElementById'](_0x46cfce(0x313));_0x59a00f&&_0x59a00f[_0x46cfce(0x1f2)]('click',applyMatchesFilters);_0x2c7c54&&_0x2c7c54[_0x46cfce(0x1f2)]('click',resetMatchesFilters);const _0x1d0ac6=document['getElementById']('matches-search');_0x1d0ac6&&_0x1d0ac6['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x115432=document['getElementById']('resimulate-match-btn');_0x115432&&_0x115432['addEventListener'](_0x46cfce(0x388),openResimulateModal);const _0x4a6da8=document['getElementById'](_0x46cfce(0x21a));if(_0x4a6da8){const _0x545bdb=_0x4a6da8['querySelector']('.close');_0x545bdb&&_0x545bdb['addEventListener'](_0x46cfce(0x388),closeResimulateModal),_0x4a6da8['addEventListener']('click',_0x9b4d15=>{const _0xd1e8ec=_0x46cfce;_0x9b4d15[_0xd1e8ec(0x215)]===_0x4a6da8&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x1b20e7=a4_0x52d11f;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x2d6203=document[_0x1b20e7(0x334)]('create-test-match-modal'),_0x156974=document[_0x1b20e7(0x334)](_0x1b20e7(0x34a));if(!_0x2d6203){console['error'](_0x1b20e7(0x300)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x156974){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification(_0x1b20e7(0x204),'error');return;}_0x156974['reset']();const _0x1e68dd=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x4f4650=![];_0x1e68dd['forEach'](_0x4d3d3a=>{const _0x41780f=_0x1b20e7;console[_0x41780f(0x29f)](_0x41780f(0x1cb),_0x4d3d3a['value']),_0x4d3d3a['value']===currentLadder&&(_0x4d3d3a['checked']=!![],_0x4f4650=!![],console[_0x41780f(0x29f)](_0x41780f(0x2eb),currentLadder));});if(!_0x4f4650){console['warn'](_0x1b20e7(0x3a3),currentLadder);const _0xac8bff=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0xac8bff&&(_0xac8bff['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x2f2d31=document['getElementById'](_0x1b20e7(0x3b3));if(_0x2f2d31){const _0x241ca0=new Date()['toISOString']()[_0x1b20e7(0x206)]('T')[0x0];_0x2f2d31[_0x1b20e7(0x297)]=_0x241ca0;}_0x2d6203['style']['display']='flex',_0x2d6203['style']['visibility']='visible',_0x2d6203['style']['opacity']='1',_0x2d6203['classList'][_0x1b20e7(0x228)](_0x1b20e7(0x22d)),console[_0x1b20e7(0x29f)](_0x1b20e7(0x301));const _0x1f027a=document['getElementById'](_0x1b20e7(0x29b));_0x1f027a&&setTimeout(()=>{_0x1f027a['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x11474c=a4_0x52d11f;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0xb6b737=document['getElementById'](_0x11474c(0x37e));if(!_0xb6b737){console[_0x11474c(0x23a)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0xb6b737[_0x11474c(0x281)]['remove']('active'),_0xb6b737['style'][_0x11474c(0x34b)]='0',_0xb6b737[_0x11474c(0x32a)]['visibility']=_0x11474c(0x3ac),setTimeout(()=>{const _0x4851b2=_0x11474c;!_0xb6b737[_0x4851b2(0x281)]['contains']('active')&&(_0xb6b737['style']['display']=_0x4851b2(0x1ad));},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x364f48=a4_0x52d11f;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x4d9110=auth['currentUser'];if(!_0x4d9110){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x42d340='D1',_0x4df3c8=_0x364f48(0x36f),_0x54ccbd={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x364f48(0x21d),'approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x4d9110['email'],'createdAt':serverTimestamp(),'createdBy':_0x4d9110[_0x364f48(0x3d1)],'isTestMatch':!![],'ladder':_0x42d340,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x4d9110['email']};console['log'](_0x364f48(0x38b)),await addDoc(collection(db,_0x4df3c8),_0x54ccbd),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x3fada0){console['error'](_0x364f48(0x220),_0x3fada0),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x3fada0['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x4b065e=a4_0x52d11f;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console['log']('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x153cd6=collection(db,'players');console['log'](_0x4b065e(0x3ff),_0x153cd6);const _0x1e01fd=query(_0x153cd6,where('username','==','nonexistent'));console[_0x4b065e(0x29f)]('Query\x20created:',_0x1e01fd);const _0xe7038b=await getDocs(_0x1e01fd);console['log']('Query\x20executed.\x20Empty:',_0xe7038b['empty']),console[_0x4b065e(0x29f)](_0x4b065e(0x2aa));}catch(_0x42262c){console['error']('Firebase\x20connection\x20test\x20failed:',_0x42262c);}};function setupCreateTestMatchButton(){const _0x2f0560=a4_0x52d11f,_0x3b3ecd=document['getElementById']('create-test-match-btn');if(!_0x3b3ecd){console[_0x2f0560(0x23a)](_0x2f0560(0x26b));return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x5b42c0=_0x3b3ecd['cloneNode'](!![]);_0x3b3ecd[_0x2f0560(0x2dd)]['replaceChild'](_0x5b42c0,_0x3b3ecd),_0x5b42c0[_0x2f0560(0x1f2)]('click',function(_0x1bcbd6){const _0x5eeab4=_0x2f0560;_0x1bcbd6['preventDefault'](),_0x1bcbd6['stopPropagation'](),console[_0x5eeab4(0x29f)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0x2f0560(0x29f)]('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x4eda53=0x1){const _0x573059=a4_0x52d11f,_0x57f87a=document[_0x573059(0x334)]('matches-table-body');if(!_0x57f87a)return;_0x57f87a[_0x573059(0x319)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x29c0ea=currentLadder['toLowerCase'](),_0x220b3e=matchesPagination[_0x29c0ea],_0x186e13=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x573059(0x1d9):'approvedMatchesD3',_0x18b2dd=collection(db,_0x186e13);_0x4eda53<=0x1?(_0x220b3e['page']=0x1,_0x220b3e['firstVisible']=null,_0x220b3e['lastVisible']=null):_0x220b3e[_0x573059(0x337)]=_0x4eda53;const _0x11f0c4=getMatchesFilters();let _0x3a80e3=_0x18b2dd;if(_0x11f0c4['startDate']||_0x11f0c4['endDate']||_0x11f0c4['searchTerm']){let _0x5d15ac=[];_0x11f0c4[_0x573059(0x2ab)]&&_0x11f0c4[_0x573059(0x1e3)]?(_0x5d15ac['push'](where('approvedAt','>=',_0x11f0c4['startDate']),where('approvedAt','<=',_0x11f0c4['endDate'])),_0x3a80e3=query(_0x18b2dd,..._0x5d15ac)):_0x3a80e3=query(_0x18b2dd,orderBy(_0x573059(0x3d5),'desc'));}else _0x3a80e3=query(_0x18b2dd,orderBy('approvedAt','desc'));_0x4eda53>0x1&&_0x220b3e[_0x573059(0x2b9)]?_0x3a80e3=query(_0x3a80e3,startAfter(_0x220b3e['lastVisible']),limit(PAGE_SIZE)):_0x3a80e3=query(_0x3a80e3,limit(PAGE_SIZE));const _0x51d6a8=await getDocs(_0x3a80e3);!_0x51d6a8['empty']&&(_0x220b3e['firstVisible']=_0x51d6a8[_0x573059(0x1d7)][0x0],_0x220b3e['lastVisible']=_0x51d6a8['docs'][_0x51d6a8['docs'][_0x573059(0x349)]-0x1]);let _0x4adc13=![];if(!_0x51d6a8['empty']){const _0x9cdc88=query(_0x3a80e3,startAfter(_0x220b3e['lastVisible']),limit(0x1)),_0x272369=await getDocs(_0x9cdc88);_0x4adc13=!_0x272369[_0x573059(0x1f4)];}const _0x2ab727=document['getElementById']('matches-prev-page'),_0x2bd3ae=document['getElementById']('matches-next-page'),_0x584002=document['getElementById'](_0x573059(0x286));if(_0x2ab727)_0x2ab727['disabled']=_0x220b3e['page']<=0x1;if(_0x2bd3ae)_0x2bd3ae['disabled']=!_0x4adc13;if(_0x584002)_0x584002['textContent']='Page\x20'+_0x220b3e['page'];if(_0x51d6a8[_0x573059(0x1f4)]){_0x57f87a['innerHTML']=_0x573059(0x217);return;}_0x57f87a[_0x573059(0x319)]='',_0x51d6a8['forEach'](_0x938730=>{const _0x216f62=_0x573059,_0x1ac1e7=_0x938730['data'](),_0x3466=document[_0x216f62(0x225)]('tr'),_0x56f712=_0x1ac1e7[_0x216f62(0x3d5)]?new Date(_0x1ac1e7['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x3466['setAttribute']('data-id',_0x938730['id']),_0x3466['setAttribute'](_0x216f62(0x238),currentLadder),_0x3466[_0x216f62(0x281)]['add']('match-row'),_0x3466['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x56f712+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x1ac1e7[_0x216f62(0x38e)]||_0x216f62(0x2ee))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x1ac1e7['loserUsername']||'Unknown')+_0x216f62(0x2e1)+(_0x1ac1e7[_0x216f62(0x243)]||0x0)+_0x216f62(0x1f1)+(_0x1ac1e7[_0x216f62(0x3fb)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x1ac1e7['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x938730['id']+_0x216f62(0x33b)+_0x938730['id']+_0x216f62(0x219),_0x57f87a['appendChild'](_0x3466);}),setupMatchesActionButtons(),_0x11f0c4[_0x573059(0x2bf)]&&filterMatchesTable(),console[_0x573059(0x29f)](_0x573059(0x365)+_0x51d6a8[_0x573059(0x26e)]+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x220b3e['page']);}catch(_0x401ef2){console['error']('Error\x20loading\x20matches:',_0x401ef2),_0x57f87a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x401ef2['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x197fc6,_0x3ef592){const _0x3d7495=a4_0x52d11f;try{console['log']('Deleting\x20match\x20'+_0x197fc6+_0x3d7495(0x325)+_0x3ef592+'\x20ladder');const _0x44f57c=auth['currentUser'];if(!_0x44f57c){showNotification(_0x3d7495(0x291),'error');return;}const _0x22a0b2=_0x3ef592==='D1'?'approvedMatches':_0x3ef592==='D2'?'approvedMatchesD2':'approvedMatchesD3';console[_0x3d7495(0x29f)]('Using\x20collection:\x20'+_0x22a0b2),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x22a0b2,_0x197fc6)),console[_0x3d7495(0x29f)]('Match\x20deleted\x20successfully'),showNotification(_0x3d7495(0x344),'success');const _0x1de52f=_0x3ef592['toLowerCase']();loadMatchesData(matchesPagination[_0x1de52f]['page']);}catch(_0x53e4ce){console[_0x3d7495(0x23a)](_0x3d7495(0x37a),_0x53e4ce),showNotification(_0x3d7495(0x3d2)+_0x53e4ce['message'],'error');}}function setupMatchesActionButtons(){const _0x5c3fae=a4_0x52d11f;console['log'](_0x5c3fae(0x229)),document['querySelectorAll']('.edit-match-btn')['forEach'](_0xbac371=>{const _0x595fd5=_0x5c3fae;_0xbac371[_0x595fd5(0x1f2)](_0x595fd5(0x388),_0x3b726f=>{const _0x421cc5=_0x595fd5;_0x3b726f[_0x421cc5(0x1d5)](),_0x3b726f['stopPropagation']();const _0xce20d9=_0x3b726f[_0x421cc5(0x362)][_0x421cc5(0x31d)]['id'],_0x399c6=_0x3b726f['currentTarget']['closest']('tr'),_0x37eca2=_0x399c6[_0x421cc5(0x31d)]['ladder'];console[_0x421cc5(0x29f)]('Edit\x20match\x20clicked:',_0xce20d9,_0x37eca2),openEditMatchModal(_0xce20d9,_0x37eca2);});}),document['querySelectorAll'](_0x5c3fae(0x1b3))['forEach'](_0x302c40=>{const _0x5cb03d=_0x5c3fae;_0x302c40['addEventListener'](_0x5cb03d(0x388),_0x4bfe0b=>{const _0x6ee06d=_0x5cb03d;_0x4bfe0b['preventDefault'](),_0x4bfe0b['stopPropagation']();const _0x1722ba=_0x4bfe0b['currentTarget']['dataset']['id'],_0x40b8c5=_0x4bfe0b[_0x6ee06d(0x362)]['closest']('tr'),_0x4ae6c1=_0x40b8c5['dataset']['ladder']||currentLadder;console[_0x6ee06d(0x29f)](_0x6ee06d(0x39e),_0x1722ba,_0x4ae6c1),confirm(_0x6ee06d(0x39d))&&deleteMatch(_0x1722ba,_0x4ae6c1);});}),console['log'](_0x5c3fae(0x1f3));}function filterMatchesTable(){const _0x1ffa50=a4_0x52d11f,_0x47febf=document['getElementById'](_0x1ffa50(0x258))['value'][_0x1ffa50(0x270)](),_0x5d35f3=document['querySelectorAll']('#matches-table-body\x20tr');let _0x26bf57=0x0;_0x5d35f3['forEach'](_0x3eb769=>{const _0x111c92=_0x1ffa50;if(_0x3eb769[_0x111c92(0x281)]['contains'](_0x111c92(0x3ed))||_0x3eb769['classList']['contains']('empty-state')||_0x3eb769['classList']['contains'](_0x111c92(0x275)))return;const _0x546184=_0x3eb769[_0x111c92(0x1ec)][0x1][_0x111c92(0x2cf)]['toLowerCase'](),_0x51293c=_0x3eb769['cells'][0x2][_0x111c92(0x2cf)][_0x111c92(0x270)](),_0x369d16=_0x3eb769['cells'][0x4]['textContent']['toLowerCase']();_0x546184['includes'](_0x47febf)||_0x51293c['includes'](_0x47febf)||_0x369d16[_0x111c92(0x22e)](_0x47febf)?(_0x3eb769['style'][_0x111c92(0x261)]='',_0x26bf57++):_0x3eb769['style']['display']='none';});if(_0x26bf57===0x0&&_0x5d35f3['length']>0x0){const _0x1abdff=document['getElementById'](_0x1ffa50(0x2ca)),_0xeda6aa=_0x1abdff['querySelector']('.no-results');if(!_0xeda6aa){const _0x23a55e=document[_0x1ffa50(0x225)]('tr');_0x23a55e['className']=_0x1ffa50(0x26c),_0x23a55e['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x47febf+_0x1ffa50(0x1ef),_0x1abdff[_0x1ffa50(0x33f)](_0x23a55e);}}else{const _0x2a4ddb=document[_0x1ffa50(0x265)]('.no-results');_0x2a4ddb&&_0x2a4ddb[_0x1ffa50(0x203)]();}}function getMatchesFilters(){const _0x123d78=a4_0x52d11f,_0x12284f=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x440ee7=document[_0x123d78(0x334)]('matches-start-date')['value'],_0x17eb32=document['getElementById']('matches-end-date')['value'];let _0x51d478=null,_0x2c6951=null;return _0x440ee7&&(_0x51d478=new Date(_0x440ee7),_0x51d478[_0x123d78(0x3ea)](0x0,0x0,0x0,0x0),_0x51d478=Timestamp[_0x123d78(0x3f0)](_0x51d478)),_0x17eb32&&(_0x2c6951=new Date(_0x17eb32),_0x2c6951['setHours'](0x17,0x3b,0x3b,0x3e7),_0x2c6951=Timestamp[_0x123d78(0x3f0)](_0x2c6951)),{'searchTerm':_0x12284f,'startDate':_0x51d478,'endDate':_0x2c6951};}async function applyMatchesFilters(){const _0x267259=currentLadder['toLowerCase']();matchesPagination[_0x267259]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x17e833=a4_0x52d11f;document[_0x17e833(0x334)]('matches-start-date')['value']='',document[_0x17e833(0x334)]('matches-end-date')['value']='',document['getElementById'](_0x17e833(0x258))['value']='';const _0x56d14c=currentLadder['toLowerCase']();matchesPagination[_0x56d14c]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x34f06b,_0x53808d){const _0x55bf4b=a4_0x52d11f,_0x5d5c01=document['getElementById'](_0x55bf4b(0x3d9));if(!_0x5d5c01)return;try{const _0x4642da=_0x53808d==='D1'?'approvedMatches':_0x53808d==='D2'?'approvedMatchesD2':_0x55bf4b(0x2dc),_0x38db5f=doc(db,_0x4642da,_0x34f06b),_0x2a5923=await getDoc(_0x38db5f);if(!_0x2a5923[_0x55bf4b(0x2ac)]()){showNotification('Match\x20not\x20found','error');return;}const _0x3135e1=_0x2a5923['data']();document[_0x55bf4b(0x334)]('edit-match-id')[_0x55bf4b(0x297)]=_0x34f06b,document[_0x55bf4b(0x334)]('edit-match-ladder')['value']=_0x53808d,document['getElementById']('edit-match-winner')['value']=_0x3135e1['winnerUsername']||'',document[_0x55bf4b(0x334)](_0x55bf4b(0x352))['value']=_0x3135e1['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0x3135e1['winnerSuicides']||0x0,document[_0x55bf4b(0x334)]('edit-match-winner-comment')[_0x55bf4b(0x297)]=_0x3135e1[_0x55bf4b(0x1c7)]||'',document['getElementById']('edit-match-loser')['value']=_0x3135e1[_0x55bf4b(0x2fe)]||'',document[_0x55bf4b(0x334)]('edit-match-loser-score')[_0x55bf4b(0x297)]=_0x3135e1['loserScore']||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0x3135e1['loserSuicides']||0x0,document['getElementById']('edit-match-loser-comment')['value']=_0x3135e1['loserComment']||'',document[_0x55bf4b(0x334)]('edit-match-map')[_0x55bf4b(0x297)]=_0x3135e1['mapPlayed']||'',document['getElementById'](_0x55bf4b(0x3f2))[_0x55bf4b(0x297)]=_0x3135e1['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0x3135e1['loserDemoLink']||_0x3135e1[_0x55bf4b(0x1af)]||'',document['getElementById']('edit-match-title')[_0x55bf4b(0x2cf)]='Edit\x20Match:\x20'+_0x3135e1['winnerUsername']+_0x55bf4b(0x2a4)+_0x3135e1['loserUsername'],_0x5d5c01['classList']['add']('active');}catch(_0x35256b){console['error']('Error\x20loading\x20match\x20data:',_0x35256b),showNotification('Failed\x20to\x20load\x20match\x20data',_0x55bf4b(0x23a));}}function closeEditMatchModal(){const _0x507f28=a4_0x52d11f,_0x526aca=document['getElementById']('edit-match-modal');_0x526aca&&_0x526aca['classList'][_0x507f28(0x203)]('active');}async function saveEditedMatch(){const _0x256070=a4_0x52d11f;try{const _0x14540d=document['getElementById']('edit-match-id')['value'],_0xb7464=document[_0x256070(0x334)](_0x256070(0x1e0))['value'];if(!_0x14540d||!_0xb7464){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x237006=_0xb7464==='D1'?'approvedMatches':_0xb7464==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x43f56b=document[_0x256070(0x334)]('edit-match-winner')['value']['trim'](),_0x6d5f7c=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x453119=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x50539f=document['getElementById']('edit-match-winner-comment')['value']['trim'](),_0x33ab91=document['getElementById'](_0x256070(0x20e))['value'][_0x256070(0x251)](),_0x3cedda=parseInt(document[_0x256070(0x334)]('edit-match-loser-score')['value']),_0x2fd8db=parseInt(document[_0x256070(0x334)](_0x256070(0x2a2))['value']),_0x25051b=document[_0x256070(0x334)](_0x256070(0x30c))['value']['trim'](),_0x200658=document['getElementById'](_0x256070(0x1c2))['value']['trim'](),_0x105668=document['getElementById'](_0x256070(0x3f2))['value']['trim'](),_0x48d209=document['getElementById']('edit-match-loser-demo')['value']['trim']();if(!_0x43f56b||!_0x33ab91){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x237006,_0x14540d),{'winnerUsername':_0x43f56b,'winnerScore':_0x6d5f7c,'winnerSuicides':_0x453119,'winnerComment':_0x50539f,'loserUsername':_0x33ab91,'loserScore':_0x3cedda,'loserSuicides':_0x2fd8db,'loserComment':_0x25051b,'mapPlayed':_0x200658,'winnerDemoLink':_0x105668||null,'loserDemoLink':_0x48d209||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x256070(0x3d1)],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully',_0x256070(0x33c)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0xb7464['toLowerCase']()]['page']);}catch(_0x2134ef){console['error']('Error\x20saving\x20match:',_0x2134ef),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x2134ef[_0x256070(0x2ae)],'error');}}async function openDeleteMatchModal(_0x28db1b,_0x2e4dde){const _0x52e273=a4_0x52d11f;try{const _0x4f0900=_0x2e4dde==='D1'?'approvedMatches':_0x2e4dde==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5f179d=doc(db,_0x4f0900,_0x28db1b),_0x8a76c9=await getDoc(_0x5f179d);if(!_0x8a76c9['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x2f8013=_0x8a76c9['data'](),_0x367669=document[_0x52e273(0x334)](_0x52e273(0x2e9));_0x367669[_0x52e273(0x31d)]['matchId']=_0x28db1b,_0x367669['dataset']['ladder']=_0x2e4dde;const _0x9ae72b=_0x2f8013['approvedAt']?new Date(_0x2f8013['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x52e273(0x2e7),_0x59a951=document[_0x52e273(0x334)]('delete-match-summary');_0x59a951['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x9ae72b+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x2f8013['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x2f8013[_0x52e273(0x2fe)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x2f8013['winnerScore']||0x0)+'\x20-\x20'+(_0x2f8013['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x2f8013['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x2e4dde+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x367669[_0x52e273(0x281)]['add']('active');}catch(_0x176037){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x176037),showNotification(_0x52e273(0x3c4),'error');}}function closeDeleteMatchModal(){const _0x163445=a4_0x52d11f,_0x5984cf=document['getElementById']('delete-match-confirm-modal');_0x5984cf&&(_0x5984cf[_0x163445(0x281)][_0x163445(0x203)]('active'),_0x5984cf['removeAttribute']('data-match-id'),_0x5984cf['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x4606a0=a4_0x52d11f,_0x4f7d25=document[_0x4606a0(0x334)](_0x4606a0(0x2e9)),_0x3fb315=_0x4f7d25['dataset']['matchId'],_0x192c4f=_0x4f7d25['dataset']['ladder'];if(!_0x3fb315||!_0x192c4f){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x2855f3=_0x192c4f==='D1'?_0x4606a0(0x36f):_0x192c4f==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x2855f3,_0x3fb315)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x192c4f['toLowerCase']()]['page']);}catch(_0x4c8ed4){console[_0x4606a0(0x23a)](_0x4606a0(0x37a),_0x4c8ed4),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x4c8ed4['message'],'error');}}async function saveHighlightChanges(){const _0x489d18=a4_0x52d11f,_0x5cc0c1=document['getElementById']('edit-highlight-id')['value'],_0x50babd=document['getElementById'](_0x489d18(0x299))[_0x489d18(0x297)];let _0x354d67={'title':document['getElementById']('edit-highlight-title-input')[_0x489d18(0x297)]['trim'](),'type':_0x50babd,'description':document['getElementById'](_0x489d18(0x3ba))[_0x489d18(0x297)][_0x489d18(0x251)](),'videoId':document['getElementById'](_0x489d18(0x1fb))['value']['trim'](),'submittedBy':auth['currentUser']['email']};if(_0x50babd===_0x489d18(0x285)){_0x354d67['matchInfo']=document[_0x489d18(0x334)](_0x489d18(0x3e6))[_0x489d18(0x297)]['trim'](),_0x354d67[_0x489d18(0x3a8)]=document['getElementById']('edit-highlight-map-input')['value']['trim']();const _0xa92959=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x354d67['matchDate']=_0xa92959?Timestamp['fromDate'](new Date(_0xa92959)):null,_0x354d67[_0x489d18(0x268)]=document['getElementById']('edit-highlight-winnerName-input')['value']['trim'](),_0x354d67['winnerScore']=document['getElementById']('edit-highlight-winnerScore-input')[_0x489d18(0x297)][_0x489d18(0x251)](),_0x354d67['loserName']=document['getElementById']('edit-highlight-loserName-input')['value']['trim'](),_0x354d67[_0x489d18(0x3fb)]=document['getElementById'](_0x489d18(0x339))['value']['trim'](),_0x354d67[_0x489d18(0x399)]=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x354d67['mapCreator']=null,_0x354d67[_0x489d18(0x2a8)]=null,_0x354d67[_0x489d18(0x371)]=null,_0x354d67['achievementPlayer']=null,_0x354d67['achievementType']=null,_0x354d67[_0x489d18(0x26a)]=null,_0x354d67[_0x489d18(0x323)]=null;}else{if(_0x50babd==='creator')_0x354d67['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x354d67[_0x489d18(0x3a0)]=document['getElementById']('edit-highlight-mapCreator-input')[_0x489d18(0x297)]['trim'](),_0x354d67['mapVersion']=document['getElementById'](_0x489d18(0x304))['value']['trim'](),_0x354d67[_0x489d18(0x371)]=document['getElementById'](_0x489d18(0x1ae))['value']['trim'](),_0x354d67['matchInfo']=null,_0x354d67['matchDate']=null,_0x354d67[_0x489d18(0x268)]=null,_0x354d67['winnerScore']=null,_0x354d67[_0x489d18(0x35d)]=null,_0x354d67['loserScore']=null,_0x354d67[_0x489d18(0x399)]=null,_0x354d67[_0x489d18(0x26d)]=null,_0x354d67[_0x489d18(0x3f8)]=null,_0x354d67['achievementDetails']=null,_0x354d67['playerProfileUrl']=null;else _0x50babd===_0x489d18(0x1a6)&&(_0x354d67['achievementPlayer']=document[_0x489d18(0x334)](_0x489d18(0x343))['value']['trim'](),_0x354d67[_0x489d18(0x3f8)]=document[_0x489d18(0x334)](_0x489d18(0x392))['value']['trim'](),_0x354d67['achievementDetails']=document['getElementById'](_0x489d18(0x1b4))['value'][_0x489d18(0x251)](),_0x354d67['playerProfileUrl']=document['getElementById'](_0x489d18(0x210))['value'][_0x489d18(0x251)](),_0x354d67['matchInfo']=null,_0x354d67[_0x489d18(0x3a8)]=null,_0x354d67[_0x489d18(0x1e6)]=null,_0x354d67['winnerName']=null,_0x354d67['winnerScore']=null,_0x354d67['loserName']=null,_0x354d67['loserScore']=null,_0x354d67[_0x489d18(0x399)]=null,_0x354d67[_0x489d18(0x3a0)]=null,_0x354d67['mapVersion']=null,_0x354d67['creatorImageUrl']=null);}try{if(_0x5cc0c1){_0x354d67[_0x489d18(0x1eb)]=serverTimestamp();const _0x5eaf69=doc(db,'highlights',_0x5cc0c1);await updateDoc(_0x5eaf69,_0x354d67),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x354d67['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x354d67),showNotification(_0x489d18(0x1dc),'success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x512e9d){console['error']('Error\x20saving\x20highlight:',_0x512e9d),showNotification('Error\x20saving\x20highlight:\x20'+_0x512e9d[_0x489d18(0x2ae)],'error');}}async function resimulateMatch(){const _0x2b3e20=a4_0x52d11f;try{const _0x17bf92=document['getElementById'](_0x2b3e20(0x1e8))['value'];if(!_0x17bf92){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x4c00fe=auth['currentUser'];if(!_0x4c00fe){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches',_0x2b3e20(0x23a));return;}const _0x3acdcf=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x38c9d2=doc(db,_0x3acdcf,_0x17bf92),_0x526c15=await getDoc(_0x38c9d2);if(!_0x526c15['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x162c85=_0x526c15[_0x2b3e20(0x2c6)](),_0x55384c=_0x162c85['approvedAt']?_0x162c85['approvedAt']['toDate']()['toLocaleString']():_0x162c85['matchDate']?_0x162c85['matchDate']['toDate']?_0x162c85['matchDate']['toDate']()['toLocaleString']():new Date(_0x162c85['matchDate'])['toLocaleString']():_0x2b3e20(0x2ee),_0x453187=_0x2b3e20(0x2f4)+_0x162c85[_0x2b3e20(0x38e)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x162c85[_0x2b3e20(0x2fe)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x162c85['winnerScore']+'-'+_0x162c85['loserScore']+_0x2b3e20(0x360)+(_0x162c85[_0x2b3e20(0x397)]||_0x162c85[_0x2b3e20(0x226)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x55384c+_0x2b3e20(0x24e)+_0x17bf92+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+_0x2b3e20(0x2f2);document['getElementById']('match-details-container')[_0x2b3e20(0x319)]=_0x453187,document['getElementById']('match-details-container')['style']['display']='block',document['getElementById'](_0x2b3e20(0x1b5))['style']['display']='block',window['pendingResimulateData']={'matchId':_0x17bf92,'matchData':_0x162c85,'ladder':currentLadder},showNotification(_0x2b3e20(0x338),_0x2b3e20(0x3d3));}catch(_0x10c1ef){console['error']('Error\x20finding\x20match:',_0x10c1ef),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x10c1ef['message'],'error');}}async function confirmResimulateMatch(){const _0x3fe70e=a4_0x52d11f;try{const {matchId:_0x5a2de7,matchData:_0x3b1069,ladder:_0x12827a}=window['pendingResimulateData'];if(!_0x5a2de7||!_0x3b1069){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0x3fe70e(0x23a));return;}const _0x2ed526=_0x12827a==='D1'?'players':_0x12827a==='D2'?'playersD2':'playersD3',_0x432bc9=_0x12827a==='D1'?'eloHistory':_0x12827a==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x352e0b,_0x329ab3]=await Promise['all']([getDocs(query(collection(db,_0x2ed526),where('username','==',_0x3b1069['winnerUsername']))),getDocs(query(collection(db,_0x2ed526),where(_0x3fe70e(0x324),'==',_0x3b1069['loserUsername'])))]);if(_0x352e0b[_0x3fe70e(0x1f4)]||_0x329ab3[_0x3fe70e(0x1f4)]){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x285697=_0x352e0b['docs'][0x0]['id'],_0x103a83=_0x329ab3['docs'][0x0]['id'],_0x1b5a96=_0x352e0b['docs'][0x0][_0x3fe70e(0x2c6)](),_0x5d5f71=_0x329ab3['docs'][0x0]['data'](),[_0x2e2d65,_0x3980ca]=await Promise['all']([getDocs(query(collection(db,_0x432bc9),where(_0x3fe70e(0x393),'==',_0x285697),where(_0x3fe70e(0x20a),'==',_0x5a2de7))),getDocs(query(collection(db,_0x432bc9),where('playerId','==',_0x103a83),where(_0x3fe70e(0x20a),'==',_0x5a2de7)))]),_0x188a0f=!_0x2e2d65['empty'],_0x105458=!_0x3980ca['empty'],_0x5c05a3='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x188a0f?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x105458?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x1b5a96['eloRating']||_0x3fe70e(0x2ee))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x5d5f71[_0x3fe70e(0x2d9)]||'Unknown')+_0x3fe70e(0x39c)+(_0x1b5a96[_0x3fe70e(0x38f)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x5d5f71['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x5c05a3,document['getElementById'](_0x3fe70e(0x3bc))['style']['display']='block';if(_0x188a0f&&_0x105458){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...',_0x3fe70e(0x3d3));const _0x17a6ac=_0x3b1069['approvedAt']||_0x3b1069['matchDate']||serverTimestamp(),[_0x128ff8,_0x1080c8]=await Promise[_0x3fe70e(0x377)]([getPlayerEloAtTime(_0x285697,_0x17a6ac,_0x432bc9),getPlayerEloAtTime(_0x103a83,_0x17a6ac,_0x432bc9)]),{calculateElo:_0x3bba0d}=await import(_0x3fe70e(0x2f9)),{newWinnerRating:_0x3b8af4,newLoserRating:_0x5e8b6c}=_0x3bba0d(_0x128ff8,_0x1080c8),_0x7b627f=_0x1b5a96['position']||Number['MAX_SAFE_INTEGER'],_0x461e1e=_0x5d5f71['position']||Number[_0x3fe70e(0x254)];let _0x434563=_0x7b627f,_0x161959=_0x461e1e;_0x7b627f>_0x461e1e&&(_0x434563=_0x461e1e,_0x161959=_0x461e1e+0x1);const _0x4cbafb=writeBatch(db),_0x641b23=doc(db,_0x2ed526,_0x285697);_0x4cbafb['update'](_0x641b23,{'eloRating':_0x3b8af4,'position':_0x434563,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x53c800=doc(db,_0x2ed526,_0x103a83);_0x4cbafb['update'](_0x53c800,{'eloRating':_0x5e8b6c,'position':_0x161959,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x7b627f>_0x461e1e){const _0x3ef46e=await getDocs(query(collection(db,_0x2ed526),where(_0x3fe70e(0x38f),'>',_0x461e1e),where('position','<',_0x7b627f)));_0x3ef46e['forEach'](_0x352ad1=>{const _0x4d779b=_0x3fe70e,_0x4f76e1=doc(db,_0x2ed526,_0x352ad1['id']),_0x51e15c=_0x352ad1['data']()['position'];_0x4cbafb['update'](_0x4f76e1,{'position':_0x51e15c+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x4d779b(0x246),'positionAdjustedAt':serverTimestamp()});});}if(!_0x188a0f){const _0x1f515e=doc(collection(db,_0x432bc9));_0x4cbafb['set'](_0x1f515e,{'playerId':_0x285697,'player':_0x3b1069[_0x3fe70e(0x38e)],'previousElo':_0x128ff8,'newElo':_0x3b8af4,'eloChange':_0x3b8af4-_0x128ff8,'opponentId':_0x103a83,'opponent':_0x3b1069[_0x3fe70e(0x2fe)],'matchResult':_0x3fe70e(0x272),'previousPosition':_0x7b627f,'newPosition':_0x434563,'positionChange':_0x434563-_0x7b627f,'matchId':_0x5a2de7,'timestamp':_0x17a6ac,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x12827a,'matchScore':_0x3b1069['winnerScore']+'-'+_0x3b1069[_0x3fe70e(0x3fb)],'mapPlayed':_0x3b1069['mapPlayed']||_0x3b1069['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x105458){const _0x4cc30f=doc(collection(db,_0x432bc9));_0x4cbafb['set'](_0x4cc30f,{'playerId':_0x103a83,'player':_0x3b1069['loserUsername'],'previousElo':_0x1080c8,'newElo':_0x5e8b6c,'eloChange':_0x5e8b6c-_0x1080c8,'opponentId':_0x285697,'opponent':_0x3b1069['winnerUsername'],'matchResult':_0x3fe70e(0x2ea),'previousPosition':_0x461e1e,'newPosition':_0x161959,'positionChange':_0x161959-_0x461e1e,'matchId':_0x5a2de7,'timestamp':_0x17a6ac,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x12827a,'matchScore':_0x3b1069['winnerScore']+'-'+_0x3b1069['loserScore'],'mapPlayed':_0x3b1069['mapPlayed']||_0x3b1069['mapName']||'Unknown','note':_0x3fe70e(0x341)});}const _0x1d0411=_0x12827a==='D1'?'approvedMatches':_0x12827a==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5a4056=doc(db,_0x1d0411,_0x5a2de7);_0x4cbafb[_0x3fe70e(0x1e4)](_0x5a4056,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x3fe70e(0x3c8)]['uid'],'resimulatedReason':_0x3fe70e(0x1c0),'originalWinnerElo':_0x1b5a96['eloRating'],'originalLoserElo':_0x5d5f71['eloRating'],'originalWinnerPosition':_0x7b627f,'originalLoserPosition':_0x461e1e,'resimulatedWinnerElo':_0x3b8af4,'resimulatedLoserElo':_0x5e8b6c,'resimulatedWinnerPosition':_0x434563,'resimulatedLoserPosition':_0x161959}),await _0x4cbafb['commit']();const _0x587735=(!_0x188a0f?0x1:0x0)+(!_0x105458?0x1:0x0),_0x3c0333=_0x7b627f!==_0x434563||_0x461e1e!==_0x161959;showNotification(_0x3fe70e(0x3aa)+('Created\x20'+_0x587735+_0x3fe70e(0x1e5))+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x128ff8+''+_0x3b8af4+_0x3fe70e(0x3b6)+(_0x3b8af4-_0x128ff8)+_0x3fe70e(0x24f))+('Loser\x20'+_0x1080c8+''+_0x5e8b6c+'\x20('+(_0x5e8b6c-_0x1080c8)+').\x20')+(''+(_0x3c0333?'Positions\x20updated:\x20Winner\x20'+_0x7b627f+''+_0x434563+',\x20Loser\x20'+_0x461e1e+''+_0x161959:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x1da018){console['error']('Error\x20resimulating\x20match:',_0x1da018),showNotification(_0x3fe70e(0x298)+_0x1da018['message'],_0x3fe70e(0x23a));}}async function getPlayerEloAtTime(_0x29f7e4,_0x5e15b5,_0x37f122){const _0x58ecde=a4_0x52d11f;try{const _0x30a31b=_0x5e15b5['toDate']?_0x5e15b5['toDate']():new Date(_0x5e15b5),_0x22393f=query(collection(db,_0x37f122),where('playerId','==',_0x29f7e4),where('timestamp','<',_0x5e15b5),orderBy(_0x58ecde(0x3b4),'desc'),limit(0x1)),_0x1282f6=await getDocs(_0x22393f);if(!_0x1282f6['empty']){const _0x155d1b=_0x1282f6[_0x58ecde(0x1d7)][0x0]['data']();return console['log'](_0x58ecde(0x279)+_0x29f7e4+'\x20before\x20match:\x20'+_0x155d1b['newElo']),_0x155d1b[_0x58ecde(0x383)];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x29f7e4+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x5f28fb){return console['error'](_0x58ecde(0x2d2)+_0x29f7e4+':',_0x5f28fb),0x4b0;}}function openResimulateModal(){const _0x5644a1=a4_0x52d11f;console['log']('openResimulateModal\x20called!');const _0x56f54f=document['getElementById'](_0x5644a1(0x21a));console['log'](_0x5644a1(0x3e8),_0x56f54f);if(!_0x56f54f){console['error']('Modal\x20element\x20not\x20found!');return;}_0x56f54f[_0x5644a1(0x32a)][_0x5644a1(0x261)]='block',_0x56f54f[_0x5644a1(0x32a)]['visibility']=_0x5644a1(0x3cb),_0x56f54f[_0x5644a1(0x32a)][_0x5644a1(0x34b)]='1',_0x56f54f['classList'][_0x5644a1(0x228)]('active'),console[_0x5644a1(0x29f)]('Modal\x20should\x20now\x20be\x20visible'),console[_0x5644a1(0x29f)](_0x5644a1(0x266),window[_0x5644a1(0x3c5)](_0x56f54f)['display']);const _0x38db0f=document['getElementById']('match-details-container'),_0x2a27df=document['getElementById']('validation-results-container'),_0x131d15=document['getElementById']('confirm-resimulate-btn'),_0x3a8621=document['getElementById']('resimulate-match-id');if(_0x38db0f)_0x38db0f['innerHTML']='';if(_0x2a27df)_0x2a27df[_0x5644a1(0x319)]='';if(_0x131d15)_0x131d15['style']['display']='none';if(_0x3a8621)_0x3a8621['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x519039=a4_0x52d11f;document['getElementById'](_0x519039(0x21a))['style']['display']='none',window[_0x519039(0x22c)]=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window[a4_0x52d11f(0x2be)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x543d61=a4_0x52d11f;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x1054dd){console[_0x543d61(0x23a)](_0x543d61(0x2ce),_0x1054dd),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x1054dd['message'],'error');}}function renderPointsOverview(_0x4e6dfc){const _0x58f712=a4_0x52d11f,_0x4280bf=document['getElementById']('points-overview-table-body');if(!_0x4280bf)return;if(_0x4e6dfc[_0x58f712(0x349)]===0x0){_0x4280bf['innerHTML']=_0x58f712(0x1b1);return;}_0x4280bf[_0x58f712(0x319)]='',_0x4e6dfc['forEach'](_0x5545ea=>{const _0x379af4=_0x58f712,_0x471712=document['createElement']('tr'),_0x51ffef=_0x5545ea[_0x379af4(0x255)]||_0x5545ea['username']||'Unknown\x20User',_0x14bfd6=_0x5545ea['email']||'No\x20email',_0x2622c7=_0x5545ea['points']||0x0,_0x4e716c=_0x5545ea['lastPointsModified']?new Date(_0x5545ea['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x471712['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x51ffef+_0x379af4(0x1bb)+_0x14bfd6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x2622c7>0x3e8?'high-points':_0x2622c7>0x1f4?'medium-points':_0x379af4(0x31c))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x2622c7['toLocaleString']()+_0x379af4(0x321)+_0x4e716c+_0x379af4(0x358)+_0x5545ea['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x5545ea['id']+_0x379af4(0x379),_0x4280bf[_0x379af4(0x33f)](_0x471712);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x2ac1e0=a4_0x52d11f;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x3152f3=document['querySelectorAll']('.quick-edit-btn');console['log']('Found\x20'+_0x3152f3[_0x2ac1e0(0x349)]+'\x20quick\x20edit\x20buttons'),_0x3152f3['forEach'](_0xab1049=>{const _0x13757b=_0xab1049['cloneNode'](!![]);_0xab1049['parentNode']['replaceChild'](_0x13757b,_0xab1049);});const _0x290fbf=document[_0x2ac1e0(0x335)]('.view-history-btn');console['log']('Found\x20'+_0x290fbf[_0x2ac1e0(0x349)]+'\x20view\x20history\x20buttons'),_0x290fbf[_0x2ac1e0(0x253)](_0xa62fad=>{const _0x16e2e2=_0xa62fad['cloneNode'](!![]);_0xa62fad['parentNode']['replaceChild'](_0x16e2e2,_0xa62fad);}),document['querySelectorAll'](_0x2ac1e0(0x32f))[_0x2ac1e0(0x253)](_0x408c4f=>{_0x408c4f['addEventListener']('click',function(_0x46dc3e){const _0x262bf1=a4_0x106c;_0x46dc3e['preventDefault'](),_0x46dc3e['stopPropagation']();const _0x5e7bfa=this['dataset']['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x5e7bfa);if(!_0x5e7bfa){console[_0x262bf1(0x23a)](_0x262bf1(0x257));return;}this[_0x262bf1(0x32a)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x5e7bfa);});}),document[_0x2ac1e0(0x335)]('.view-history-btn')[_0x2ac1e0(0x253)](_0x1229a9=>{_0x1229a9['addEventListener']('click',function(_0x4568e7){const _0x1558cf=a4_0x106c;_0x4568e7['preventDefault'](),_0x4568e7['stopPropagation']();const _0x2bcb94=this['dataset']['userId'];console[_0x1558cf(0x29f)](_0x1558cf(0x222),_0x2bcb94);if(!_0x2bcb94){console[_0x1558cf(0x23a)](_0x1558cf(0x257));return;}this['style'][_0x1558cf(0x34b)]=_0x1558cf(0x201),setTimeout(()=>{const _0xd1c37=_0x1558cf;this[_0xd1c37(0x32a)]['opacity']='1';},0xc8),loadUserPointsHistory(_0x2bcb94);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x1867c1){const _0x594ec0=a4_0x52d11f;console[_0x594ec0(0x29f)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x1867c1);const _0x38725a=document[_0x594ec0(0x334)](_0x594ec0(0x1be));if(!_0x38725a){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page',_0x594ec0(0x23a));return;}try{showNotification('Loading\x20user\x20data...','info');const _0x15fabb=doc(db,'userProfiles',_0x1867c1),_0x274911=await getDoc(_0x15fabb);if(!_0x274911['exists']()){showNotification('User\x20not\x20found','error');return;}const _0x2710ba=_0x274911['data']();console[_0x594ec0(0x29f)]('User\x20data\x20loaded:',_0x2710ba);const _0x149685=document[_0x594ec0(0x334)]('quick-edit-user-id'),_0x27e86d=document['getElementById'](_0x594ec0(0x235)),_0x5bbbb9=document['getElementById']('quick-edit-email'),_0x3336ec=document['getElementById']('quick-edit-current-points'),_0x410223=document[_0x594ec0(0x334)]('quick-edit-points-form');if(!_0x149685||!_0x27e86d||!_0x5bbbb9||!_0x3336ec||!_0x410223){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x594ec0(0x27b),'error');return;}_0x149685['value']=_0x1867c1,_0x27e86d[_0x594ec0(0x2cf)]=_0x2710ba['displayName']||_0x2710ba[_0x594ec0(0x324)]||_0x594ec0(0x23e),_0x5bbbb9['textContent']=_0x2710ba['email']||'No\x20email',_0x3336ec['textContent']=(_0x2710ba['points']||0x0)['toLocaleString'](),_0x410223['reset']();const _0x53650a=document[_0x594ec0(0x334)]('quick-add');_0x53650a&&(_0x53650a[_0x594ec0(0x380)]=!![]);_0x38725a['classList'][_0x594ec0(0x228)]('active'),console['log'](_0x594ec0(0x3b9));const _0x1c039f=document['getElementById']('quick-points-amount');_0x1c039f&&setTimeout(()=>_0x1c039f['focus'](),0x64);}catch(_0x8396ff){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x8396ff),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x8396ff[_0x594ec0(0x2ae)],_0x594ec0(0x23a));}}function closeQuickEditModal(){const _0xc8e0bf=a4_0x52d11f,_0xe37d4d=document['getElementById']('quick-edit-points-modal');_0xe37d4d&&_0xe37d4d[_0xc8e0bf(0x281)]['remove']('active');}async function handleQuickEditPoints(_0x1c4415){const _0x12759e=a4_0x52d11f;_0x1c4415[_0x12759e(0x1d5)]();const _0x102f9c=document['getElementById']('quick-edit-user-id')['value'],_0x26dc77=document['querySelector'](_0x12759e(0x2f6))[_0x12759e(0x297)],_0x5cda89=parseInt(document['getElementById']('quick-points-amount')['value']),_0x4ecc20=document['getElementById']('quick-points-reason')['value'][_0x12759e(0x251)]();console['log'](_0x12759e(0x2ad),{'userId':_0x102f9c,'action':_0x26dc77,'amount':_0x5cda89,'reason':_0x4ecc20});if(!_0x102f9c||!_0x5cda89||_0x5cda89<0x0){showNotification(_0x12759e(0x1e9),'error');return;}try{await modifyUserPoints(_0x102f9c,_0x26dc77,_0x5cda89,_0x4ecc20),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully',_0x12759e(0x33c)),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x102f9c);}catch(_0x5777fc){console[_0x12759e(0x23a)]('Error\x20updating\x20points:',_0x5777fc),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x5777fc['message'],'error');}}async function searchUsersForPoints(){const _0x2246a9=a4_0x52d11f,_0x422feb=document['getElementById'](_0x2246a9(0x32e))['value']['trim']()[_0x2246a9(0x270)](),_0x58bb66=document[_0x2246a9(0x334)]('user-search-results');if(!_0x422feb||_0x422feb[_0x2246a9(0x349)]<0x2){_0x58bb66['innerHTML']='';return;}_0x58bb66['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x41e280=collection(db,_0x2246a9(0x2a5)),_0x2256c0=await getDocs(_0x41e280),_0x5702e4=[];_0x2256c0['forEach'](_0x36db83=>{const _0x43e7c8=_0x2246a9,_0x2585a0=_0x36db83['data'](),_0x5ce195=(_0x2585a0['displayName']||_0x2585a0['username']||'')['toLowerCase'](),_0x22a1ec=(_0x2585a0['email']||'')['toLowerCase']();(_0x5ce195['includes'](_0x422feb)||_0x22a1ec[_0x43e7c8(0x22e)](_0x422feb))&&_0x5702e4['push']({'id':_0x36db83['id'],..._0x2585a0});});if(_0x5702e4['length']===0x0){_0x58bb66['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x58bb66['innerHTML']='',_0x5702e4['forEach'](_0x4f0d9b=>{const _0x513181=_0x2246a9,_0x274bde=document['createElement'](_0x513181(0x33e));_0x274bde['className']=_0x513181(0x1f0),_0x274bde['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x4f0d9b[_0x513181(0x255)]||_0x4f0d9b['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x4f0d9b[_0x513181(0x3d1)]||'No\x20email')+_0x513181(0x1ca)+(_0x4f0d9b[_0x513181(0x1c9)]||0x0)['toLocaleString']()+_0x513181(0x2c1),_0x274bde[_0x513181(0x1f2)]('click',()=>selectUserForPoints(_0x4f0d9b)),_0x58bb66['appendChild'](_0x274bde);});}catch(_0x4782ff){console['error']('Error\x20searching\x20users:',_0x4782ff),_0x58bb66['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x51ea95){const _0x472246=a4_0x52d11f;document['getElementById']('selected-user-name')['textContent']=_0x51ea95['displayName']||_0x51ea95[_0x472246(0x324)]||_0x472246(0x23e),document['getElementById']('selected-user-points')['textContent']=(_0x51ea95['points']||0x0)['toLocaleString'](),document[_0x472246(0x334)]('selected-user-id')['value']=_0x51ea95['id'],document[_0x472246(0x334)]('selected-user-info')['style']['display']='block',document['getElementById']('points-management-forms')['style']['display']=_0x472246(0x1e7),document[_0x472246(0x334)](_0x472246(0x378))['innerHTML']='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x1a371a){const _0x53a0ea=a4_0x52d11f;_0x1a371a['preventDefault']();const _0x3a9bb8=document[_0x53a0ea(0x334)]('selected-user-id')['value'],_0x1e5c39=document[_0x53a0ea(0x334)]('points-action')[_0x53a0ea(0x297)],_0x19e71b=parseInt(document[_0x53a0ea(0x334)](_0x53a0ea(0x267))['value']),_0x1043ab=document[_0x53a0ea(0x334)]('points-reason')['value']['trim']();if(!_0x3a9bb8||!_0x19e71b||_0x19e71b<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x53a0ea(0x23a));return;}try{await modifyUserPoints(_0x3a9bb8,_0x1e5c39,_0x19e71b,_0x1043ab),document[_0x53a0ea(0x334)]('modify-points-form')['reset']();const _0x5303c1=doc(db,'userProfiles',_0x3a9bb8),_0x318bb1=await getDoc(_0x5303c1);if(_0x318bb1[_0x53a0ea(0x2ac)]()){const _0xa0a69e=_0x318bb1[_0x53a0ea(0x2c6)]();document['getElementById'](_0x53a0ea(0x2d4))['textContent']=(_0xa0a69e['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x483f6c){console['error']('Error\x20modifying\x20points:',_0x483f6c),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x483f6c['message'],_0x53a0ea(0x23a));}}async function loadPointsHistory(){const _0x1c270f=a4_0x52d11f,_0x39192a=document['getElementById']('points-history-table-body');if(!_0x39192a)return;_0x39192a['innerHTML']=_0x1c270f(0x262);try{const _0x8a1ef9=collection(db,_0x1c270f(0x357)),_0x4540ab=query(_0x8a1ef9,orderBy('timestamp','desc'),limit(0x32)),_0x5932b7=await getDocs(_0x4540ab);if(_0x5932b7['empty']){_0x39192a['innerHTML']=_0x1c270f(0x1f9);return;}_0x39192a[_0x1c270f(0x319)]='',_0x5932b7['forEach'](_0x56d33b=>{const _0x4bc530=_0x1c270f,_0x1ad433=_0x56d33b['data'](),_0x378db3=document['createElement']('tr'),_0x4efac4=_0x1ad433[_0x4bc530(0x3b4)]?new Date(_0x1ad433[_0x4bc530(0x3b4)][_0x4bc530(0x280)]*0x3e8)[_0x4bc530(0x227)]():'Unknown';let _0x1d73b9='';switch(_0x1ad433['action']){case'add':_0x1d73b9='Added\x20'+_0x1ad433['amount']+_0x4bc530(0x356);break;case'subtract':_0x1d73b9=_0x4bc530(0x274)+_0x1ad433['amount']+_0x4bc530(0x356);break;case _0x4bc530(0x23d):_0x1d73b9=_0x4bc530(0x23b)+_0x1ad433['amount']+_0x4bc530(0x356);break;default:_0x1d73b9=_0x1ad433['action']+'\x20'+_0x1ad433['amount']+'\x20points';}_0x378db3[_0x4bc530(0x319)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4efac4+_0x4bc530(0x3a4)+(_0x1ad433['displayName']||'Unknown\x20User')+_0x4bc530(0x3a4)+_0x1d73b9+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x1ad433['action']+_0x4bc530(0x1ff)+(_0x1ad433['previousPoints']||0x0)+'\x20\x20'+(_0x1ad433['newPoints']||0x0)+_0x4bc530(0x2cc)+(_0x1ad433[_0x4bc530(0x2ef)]||_0x4bc530(0x2b4))+_0x4bc530(0x3a4)+(_0x1ad433['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x39192a['appendChild'](_0x378db3);});}catch(_0x2dea80){console['error']('Error\x20loading\x20points\x20history:',_0x2dea80),_0x39192a['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x2dea80[_0x1c270f(0x2ae)]+'</td></tr>';}}function filterPointsOverview(){const _0x52bc24=a4_0x52d11f,_0x1e294f=document['getElementById']('points-overview-search')[_0x52bc24(0x297)][_0x52bc24(0x270)]();if(!window['allUsersPoints'])return;const _0x282eb0=window['allUsersPoints']['filter'](_0x338bae=>{const _0x4a4162=_0x52bc24,_0x2ecaa3=(_0x338bae[_0x4a4162(0x255)]||_0x338bae[_0x4a4162(0x324)]||'')['toLowerCase'](),_0x23d372=(_0x338bae['email']||'')[_0x4a4162(0x270)]();return _0x2ecaa3['includes'](_0x1e294f)||_0x23d372['includes'](_0x1e294f);});renderPointsOverview(_0x282eb0);}function sortPointsOverview(){const _0x4e939d=a4_0x52d11f,_0x359c57=document['getElementById']('points-sort-order')['value'];if(!window[_0x4e939d(0x3fa)])return;const _0x4b53e8=[...window['allUsersPoints']];switch(_0x359c57){case'points-desc':_0x4b53e8['sort']((_0x569517,_0x1b5ad4)=>(_0x1b5ad4['points']||0x0)-(_0x569517['points']||0x0));break;case'points-asc':_0x4b53e8['sort']((_0x28a92c,_0x17c539)=>(_0x28a92c['points']||0x0)-(_0x17c539['points']||0x0));break;case _0x4e939d(0x29c):_0x4b53e8[_0x4e939d(0x27f)]((_0x6d2851,_0x4e92f4)=>{const _0x46c58b=_0x4e939d,_0x29a876=(_0x6d2851[_0x46c58b(0x255)]||_0x6d2851['username']||'')['toLowerCase'](),_0x42182f=(_0x4e92f4[_0x46c58b(0x255)]||_0x4e92f4['username']||'')['toLowerCase']();return _0x29a876['localeCompare'](_0x42182f);});break;case _0x4e939d(0x296):_0x4b53e8['sort']((_0x1dd65a,_0x878f21)=>{const _0x54fb9b=_0x4e939d,_0x32c725=(_0x1dd65a['displayName']||_0x1dd65a['username']||'')['toLowerCase'](),_0x5769a5=(_0x878f21[_0x54fb9b(0x255)]||_0x878f21['username']||'')['toLowerCase']();return _0x5769a5['localeCompare'](_0x32c725);});break;}renderPointsOverview(_0x4b53e8);}async function handleAwardItem(_0x94de){const _0x16dba8=a4_0x52d11f;_0x94de[_0x16dba8(0x1d5)]();const _0x191b6d=document[_0x16dba8(0x334)]('selected-user-id')[_0x16dba8(0x297)],_0x2c2153=document['getElementById'](_0x16dba8(0x3c0))['value'],_0x2760db=document[_0x16dba8(0x334)]('award-reason')['value'][_0x16dba8(0x251)]();if(!_0x191b6d||!_0x2c2153){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x16dba8(0x23a));return;}try{showNotification('Store\x20item\x20awarded\x20successfully',_0x16dba8(0x33c)),document['getElementById']('award-item-form')['reset']();}catch(_0x2213bb){console['error']('Error\x20awarding\x20item:',_0x2213bb),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x2213bb['message'],_0x16dba8(0x23a));}}async function loadUserPointsHistory(_0x3af337){const _0x4378d1=a4_0x52d11f;try{const _0x5a6194=collection(db,'pointsHistory'),_0xa43287=query(_0x5a6194,where('userId','==',_0x3af337),orderBy('timestamp','desc')),_0x25cd11=await getDocs(_0xa43287);console['log'](_0x4378d1(0x20f)+_0x25cd11[_0x4378d1(0x26e)]+_0x4378d1(0x21b)+_0x3af337),showNotification('User\x20has\x20'+_0x25cd11['size']+'\x20points\x20history\x20entries','info');}catch(_0x1844e6){console['error'](_0x4378d1(0x29a),_0x1844e6),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x442a8d=a4_0x52d11f;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x2d60ee=collection(db,'userProfiles'),_0x45db74=await getDocs(_0x2d60ee);if(_0x45db74['empty']){console['log'](_0x442a8d(0x3c3));return;}let _0x1e48fb=0x0,_0x5a7e38=0x0;const _0xc8d2b4=writeBatch(db);let _0x428e34=0x0;return console['log']('Found\x20'+_0x45db74['size']+_0x442a8d(0x213)),_0x45db74[_0x442a8d(0x253)](_0x265872=>{const _0x29981f=_0x442a8d,_0x3c88bf=_0x265872[_0x29981f(0x2c6)]();_0x3c88bf['points']===undefined||_0x3c88bf[_0x29981f(0x1c9)]===null?(_0xc8d2b4['update'](_0x265872['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x1e48fb++,_0x428e34++,console['log']('Queued\x20'+(_0x3c88bf['displayName']||_0x3c88bf[_0x29981f(0x324)]||_0x3c88bf['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x5a7e38++,console[_0x29981f(0x29f)]((_0x3c88bf['displayName']||_0x3c88bf['username']||_0x3c88bf['email']||_0x29981f(0x2ee))+'\x20already\x20has\x20points:\x20'+_0x3c88bf['points'])),_0x428e34>=0x1f4&&console[_0x29981f(0x2e0)](_0x29981f(0x37d));}),_0x1e48fb>0x0?(console['log'](_0x442a8d(0x1d6)+_0x1e48fb+'\x20users...'),await _0xc8d2b4['commit'](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x1e48fb+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log'](_0x442a8d(0x37c)+_0x45db74['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x1e48fb+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x5a7e38),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x1e48fb+'\x20users.\x20'+_0x5a7e38+'\x20users\x20already\x20had\x20points.',_0x442a8d(0x33c)),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x45db74[_0x442a8d(0x26e)],'usersUpdated':_0x1e48fb,'usersAlreadyHadPoints':_0x5a7e38};}catch(_0x487c3c){console['error']('Error\x20initializing\x20points\x20field:',_0x487c3c),showNotification(_0x442a8d(0x282)+_0x487c3c['message'],'error');throw _0x487c3c;}}function addPointsMigrationButton(){const _0x5a111b=a4_0x52d11f,_0x129236=document[_0x5a111b(0x334)]('manage-points');if(!_0x129236)return;if(document[_0x5a111b(0x334)]('migrate-points-btn'))return;const _0x5c8f28=document['createElement']('div');_0x5c8f28['className']='migration-section',_0x5c8f28['style']['marginBottom']='20px',_0x5c8f28['style']['padding']='15px',_0x5c8f28['style']['backgroundColor']=_0x5a111b(0x1ac),_0x5c8f28[_0x5a111b(0x32a)][_0x5a111b(0x3e3)]='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x5c8f28['style']['borderRadius']=_0x5a111b(0x260),_0x5c8f28['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x4bf841=_0x129236['querySelector']('.section-header');_0x4bf841&&_0x4bf841[_0x5a111b(0x1e1)]('afterend',_0x5c8f28),document[_0x5a111b(0x334)](_0x5a111b(0x326))['addEventListener']('click',async function(){const _0x17d193=_0x5a111b;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this[_0x17d193(0x319)]=_0x17d193(0x1f6);try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x560fc0=_0x17d193;_0x5c8f28['style']['display']=_0x560fc0(0x1ad);},0xbb8);}catch(_0x570925){this[_0x17d193(0x319)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x17d193(0x386)]=![];}}});}function setupManagePointsSection(){const _0x44655b=a4_0x52d11f;console['log'](_0x44655b(0x1de)),addPointsMigrationButton();const _0x5bd9e5=document['getElementById'](_0x44655b(0x32e));_0x5bd9e5&&_0x5bd9e5['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x26be51=document['getElementById']('modify-points-form');_0x26be51&&_0x26be51['addEventListener']('submit',handleModifyPoints);const _0x27d3da=document['getElementById']('award-item-form');_0x27d3da&&_0x27d3da['addEventListener']('submit',handleAwardItem);const _0x347554=document['getElementById']('points-overview-search');_0x347554&&_0x347554[_0x44655b(0x1f2)]('input',debounce(filterPointsOverview,0x12c));const _0x15ddf0=document[_0x44655b(0x334)](_0x44655b(0x2ed));_0x15ddf0&&_0x15ddf0[_0x44655b(0x1f2)]('change',sortPointsOverview);const _0x1f2cbc=document['getElementById']('refresh-points-overview');_0x1f2cbc&&_0x1f2cbc['addEventListener'](_0x44655b(0x388),loadPointsOverview);const _0x306ba6=document[_0x44655b(0x334)]('quick-edit-points-modal');if(_0x306ba6){console['log'](_0x44655b(0x1e2));const _0x5d621c=_0x306ba6[_0x44655b(0x265)]('.close-btn');_0x5d621c?_0x5d621c[_0x44655b(0x1f2)](_0x44655b(0x388),function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console[_0x44655b(0x2e0)]('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x305c55=document['getElementById']('cancel-quick-edit');_0x305c55?_0x305c55['addEventListener']('click',function(){const _0x1851f1=_0x44655b;console['log'](_0x1851f1(0x2b3)),closeQuickEditModal();}):console[_0x44655b(0x2e0)]('Cancel\x20button\x20not\x20found');const _0x4a17ec=document['getElementById'](_0x44655b(0x30a));_0x4a17ec?_0x4a17ec[_0x44655b(0x1f2)](_0x44655b(0x28c),function(_0xb53984){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0xb53984);}):console[_0x44655b(0x23a)](_0x44655b(0x3fc)),_0x306ba6[_0x44655b(0x1f2)](_0x44655b(0x388),function(_0x2ed669){const _0x12c4a5=_0x44655b;_0x2ed669['target']===_0x306ba6&&(console[_0x12c4a5(0x29f)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log'](_0x44655b(0x1b9));}function setupManageRibbonsSection(){const _0x5e8c2f=a4_0x52d11f;console[_0x5e8c2f(0x29f)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x2051c=document['getElementById'](_0x5e8c2f(0x20c));_0x2051c&&_0x2051c['addEventListener'](_0x5e8c2f(0x2c2),debounce(searchRibbonUser,0x12c));const _0xb331f3=document['getElementById']('search-ribbon-user-btn');_0xb331f3&&_0xb331f3['addEventListener'](_0x5e8c2f(0x388),searchRibbonUser);const _0x280ce7=document['getElementById']('add-ribbon-form');_0x280ce7&&_0x280ce7['addEventListener']('submit',addRibbon),_0x2051c&&_0x2051c['addEventListener'](_0x5e8c2f(0x2b0),function(_0x37c54f){const _0x33e431=_0x5e8c2f;_0x37c54f['key']===_0x33e431(0x3e1)&&(_0x37c54f[_0x33e431(0x1d5)](),searchRibbonUser());}),console[_0x5e8c2f(0x29f)](_0x5e8c2f(0x330));}async function modifyUserPoints(_0x390a64,_0x436b16,_0x1bf1c2,_0x58df85=''){const _0x135f84=a4_0x52d11f,_0x4e331f=doc(db,'userProfiles',_0x390a64),_0xe6a9d9=await getDoc(_0x4e331f);if(!_0xe6a9d9['exists']())throw new Error('User\x20not\x20found');const _0x2917e3=_0xe6a9d9[_0x135f84(0x2c6)](),_0xacb3e1=_0x2917e3['points']!==undefined?_0x2917e3[_0x135f84(0x1c9)]:0x0;_0x2917e3['points']===undefined&&(console[_0x135f84(0x29f)](_0x135f84(0x2d0)+(_0x2917e3['displayName']||_0x2917e3['email']||'Unknown')),await updateDoc(_0x4e331f,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x2dae96=_0xacb3e1;switch(_0x436b16){case'add':_0x2dae96=_0xacb3e1+_0x1bf1c2;break;case'subtract':_0x2dae96=Math['max'](0x0,_0xacb3e1-_0x1bf1c2);break;case'set':_0x2dae96=_0x1bf1c2;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x4e331f,{'points':_0x2dae96,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x135f84(0x357)),{'userId':_0x390a64,'userEmail':_0x2917e3['email']||'unknown','displayName':_0x2917e3[_0x135f84(0x255)]||_0x2917e3['username']||'Unknown\x20User','action':_0x436b16,'amount':_0x1bf1c2,'previousPoints':_0xacb3e1,'newPoints':_0x2dae96,'reason':_0x58df85,'adminEmail':auth[_0x135f84(0x3c8)][_0x135f84(0x3d1)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x4c7cc0=a4_0x52d11f,_0x17a5bb=document['getElementById']('points-overview-table-body');if(!_0x17a5bb)return;_0x17a5bb['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x548a54=collection(db,'userProfiles'),_0x306b68=await getDocs(_0x548a54);if(_0x306b68['empty']){_0x17a5bb['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x3fbcb0=[];let _0xec21ee=0x0;_0x306b68['forEach'](_0x8b3eb1=>{const _0x500392=a4_0x106c,_0x2ef6c6=_0x8b3eb1[_0x500392(0x2c6)](),_0x51b5b9=_0x2ef6c6[_0x500392(0x1c9)]!==undefined?_0x2ef6c6[_0x500392(0x1c9)]:0x0;_0x2ef6c6['points']===undefined&&_0xec21ee++,_0x3fbcb0['push']({'id':_0x8b3eb1['id'],..._0x2ef6c6,'points':_0x51b5b9});}),_0xec21ee>0x0&&(console['log']('Found\x20'+_0xec21ee+_0x4c7cc0(0x231)),showNotification(_0xec21ee+_0x4c7cc0(0x209),'info')),_0x3fbcb0['sort']((_0x37f1e7,_0x3f0638)=>(_0x3f0638['points']||0x0)-(_0x37f1e7[_0x4c7cc0(0x1c9)]||0x0)),window['allUsersPoints']=_0x3fbcb0,renderPointsOverview(_0x3fbcb0);}catch(_0x41c350){console['error']('Error\x20loading\x20points\x20overview:',_0x41c350),_0x17a5bb[_0x4c7cc0(0x319)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x41c350['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x19ccd9=a4_0x52d11f,_0x5ec1c9=document['getElementById']('ribbons-overview-table-body');if(!_0x5ec1c9)return;_0x5ec1c9['innerHTML']=_0x19ccd9(0x1d4);try{const [_0x4e4f0b,_0x210bce,_0x3f2815]=await Promise[_0x19ccd9(0x377)]([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x19ccd9(0x25d))),getDocs(collection(db,'playerRibbonsD3'))]);_0x5ec1c9[_0x19ccd9(0x319)]='';const _0x4a140f=(_0x2774eb,_0x187aaf)=>{_0x2774eb['forEach'](_0x3103d0=>{const _0x557c8c=a4_0x106c,_0xfa6c4d=_0x3103d0['data'](),_0x341d12=_0xfa6c4d[_0x557c8c(0x248)]||{},_0x489137=Object['keys'](_0x341d12)['length'],_0x3da86f=document['createElement']('tr');_0x3da86f['innerHTML']=_0x557c8c(0x1d0)+(_0xfa6c4d['username']||_0x557c8c(0x2ee))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x187aaf['toLowerCase']()+'\x22>'+_0x187aaf+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x489137+_0x557c8c(0x25c)+(_0xfa6c4d[_0x557c8c(0x375)]?new Date(_0xfa6c4d['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0xfa6c4d[_0x557c8c(0x324)]+'\x22\x20data-ladder=\x22'+_0x187aaf+_0x557c8c(0x3b7),_0x5ec1c9['appendChild'](_0x3da86f);});};_0x4a140f(_0x4e4f0b,'D1'),_0x4a140f(_0x210bce,'D2'),_0x4a140f(_0x3f2815,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x5d4234=>{const _0x5424f9=_0x19ccd9;_0x5d4234['addEventListener'](_0x5424f9(0x388),function(){const _0x42f4ae=_0x5424f9,_0x1005b6=this[_0x42f4ae(0x31d)]['username'],_0x14addd=this[_0x42f4ae(0x31d)]['ladder'];editUserRibbons(_0x1005b6,_0x14addd);});}),showNotification(_0x19ccd9(0x3d4),_0x19ccd9(0x33c));}catch(_0x462504){console['error']('Error\x20loading\x20ribbons:',_0x462504),_0x5ec1c9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification(_0x19ccd9(0x1ba),'error');}}async function searchRibbonUser(){const _0x1fdf95=a4_0x52d11f,_0x43be5b=document[_0x1fdf95(0x334)](_0x1fdf95(0x20c))['value']['trim']();if(!_0x43be5b){showNotification('Please\x20enter\x20a\x20username',_0x1fdf95(0x23a));return;}try{const [_0x312091,_0x126d6e,_0x1e6a37]=await Promise[_0x1fdf95(0x377)]([getDoc(doc(db,'playerRibbons',_0x43be5b)),getDoc(doc(db,_0x1fdf95(0x25d),_0x43be5b)),getDoc(doc(db,_0x1fdf95(0x348),_0x43be5b))]);let _0xb87d69=null,_0x3d569e=null;if(_0x312091['exists']())_0xb87d69='D1',_0x3d569e=_0x312091['data']();else{if(_0x126d6e['exists']())_0xb87d69='D2',_0x3d569e=_0x126d6e['data']();else _0x1e6a37['exists']()&&(_0xb87d69='D3',_0x3d569e=_0x1e6a37['data']());}_0xb87d69?(document[_0x1fdf95(0x334)]('current-ribbon-user')[_0x1fdf95(0x2cf)]=_0x43be5b,document['getElementById']('ribbon-target-user')[_0x1fdf95(0x297)]=_0x43be5b,document['getElementById']('ribbon-target-ladder')['value']=_0xb87d69,document['getElementById']('user-ribbon-management')['style']['display']='block',displayCurrentRibbons(_0x3d569e['ribbons']||{}),showNotification('Found\x20'+_0x43be5b+'\x20in\x20'+_0xb87d69+_0x1fdf95(0x23c),_0x1fdf95(0x33c))):showNotification('User\x20'+_0x43be5b+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x26269a){console['error'](_0x1fdf95(0x2b7),_0x26269a),showNotification(_0x1fdf95(0x359),_0x1fdf95(0x23a));}}function displayCurrentRibbons(_0x2826f5){const _0x1248d7=a4_0x52d11f,_0x4e60bf=document['getElementById']('current-ribbons-list');if(!_0x4e60bf)return;_0x4e60bf['innerHTML']='';if(Object['keys'](_0x2826f5)['length']===0x0){_0x4e60bf[_0x1248d7(0x319)]='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0x2826f5)[_0x1248d7(0x253)](([_0x1b9287,_0x148c3b])=>{const _0x1ef677=_0x1248d7,_0x1f4d0e=document[_0x1ef677(0x225)](_0x1ef677(0x33e));_0x1f4d0e[_0x1ef677(0x3f3)]='ribbon-item',_0x1f4d0e['innerHTML']=_0x1ef677(0x3f1)+_0x1b9287+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x148c3b['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x148c3b['awardedAt']?new Date(_0x148c3b['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x1b9287+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4e60bf['appendChild'](_0x1f4d0e);}),document['querySelectorAll']('.remove-ribbon-btn')[_0x1248d7(0x253)](_0x377e38=>{const _0x3da66b=_0x1248d7;_0x377e38[_0x3da66b(0x1f2)](_0x3da66b(0x388),function(){const _0x34eab9=this['dataset']['ribbon'];removeRibbon(_0x34eab9);});});}async function addRibbon(_0xc5a9ec){const _0x431f79=a4_0x52d11f;_0xc5a9ec[_0x431f79(0x1d5)]();const _0x370e80=document['getElementById'](_0x431f79(0x34c))[_0x431f79(0x297)],_0x5d86a8=document[_0x431f79(0x334)]('ribbon-target-ladder')[_0x431f79(0x297)],_0x1e45fc=document[_0x431f79(0x334)]('ribbon-type-select')[_0x431f79(0x297)],_0x3c6140=parseInt(document['getElementById'](_0x431f79(0x1d1))[_0x431f79(0x297)]);if(!_0x370e80||!_0x5d86a8||!_0x1e45fc||!_0x3c6140){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x2031b7='playerRibbons'+(_0x5d86a8==='D1'?'':_0x5d86a8),_0x1b223c=doc(db,_0x2031b7,_0x370e80),_0x13e93c=await getDoc(_0x1b223c),_0x2f72f4=_0x13e93c['exists']()?_0x13e93c['data']()[_0x431f79(0x248)]||{}:{};_0x2f72f4[_0x1e45fc]={'level':_0x3c6140,'awardedAt':serverTimestamp()},await setDoc(_0x1b223c,{'username':_0x370e80,'ladder':_0x5d86a8,'ribbons':_0x2f72f4,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x1e45fc+'\x20Level\x20'+_0x3c6140+'\x20to\x20'+_0x370e80,'success'),displayCurrentRibbons(_0x2f72f4),document['getElementById'](_0x431f79(0x2de))[_0x431f79(0x297)]='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x3d9183){console[_0x431f79(0x23a)](_0x431f79(0x1b8),_0x3d9183),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x1d1af4){const _0x388b04=a4_0x52d11f,_0x4b363c=document['getElementById']('ribbon-target-user')['value'],_0x57f4bd=document[_0x388b04(0x334)]('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x1d1af4+_0x388b04(0x325)+_0x4b363c+'?'))return;try{const _0x1aad73='playerRibbons'+(_0x57f4bd==='D1'?'':_0x57f4bd),_0x85601b=doc(db,_0x1aad73,_0x4b363c),_0x41db1a=await getDoc(_0x85601b),_0x5498d4=_0x41db1a['exists']()?_0x41db1a['data']()['ribbons']||{}:{};delete _0x5498d4[_0x1d1af4],await setDoc(_0x85601b,{'username':_0x4b363c,'ladder':_0x57f4bd,'ribbons':_0x5498d4,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x1d1af4+'\x20from\x20'+_0x4b363c,'success'),displayCurrentRibbons(_0x5498d4);}catch(_0x1bd516){console['error']('Error\x20removing\x20ribbon:',_0x1bd516),showNotification('Error\x20removing\x20ribbon',_0x388b04(0x23a));}}function editUserRibbons(_0x3f7d6b,_0x4a4781){const _0x458f88=a4_0x52d11f;document['getElementById']('ribbon-user-search')[_0x458f88(0x297)]=_0x3f7d6b,searchRibbonUser();}