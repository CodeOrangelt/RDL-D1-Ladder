const a50w=a50b;(function(a,b){const v=a50b,c=a();while(!![]){try{const d=-parseInt(v(0x1a7))/0x1*(parseInt(v(0x192))/0x2)+parseInt(v(0x11a))/0x3+parseInt(v(0x15e))/0x4*(parseInt(v(0x111))/0x5)+-parseInt(v(0x11b))/0x6+parseInt(v(0x171))/0x7+parseInt(v(0x15a))/0x8+-parseInt(v(0x146))/0x9*(parseInt(v(0x1b0))/0xa);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a50a,0x9742f));import{auth,db}from'./firebase-config.js';import{doc,getDoc,setDoc,collection,query,where,getDocs,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const RIBBON_DEFINITIONS={'Rematch\x20Ribbon':{'description':a50w(0x118),'image':a50w(0x109),'color':'#FF6B6B'},'Overachiever\x20Ribbon':{'description':'Played\x20over\x20100\x20matches','image':'../images/ribbons/Overachiever.png','color':a50w(0x16e),'levels':[0x64,0xc8,0x12c,0x190,0x1f4,0x258,0x2bc,0x320,0x384,0x3e8]},'Brick\x20Wall':{'description':'Amass\x20at\x20least\x2080%\x20overall\x20win\x20rate\x20percentage\x20(minimum\x2050\x20matches)','image':a50w(0x14f),'color':a50w(0x143),'levels':[0x50,0x55,0x5a,0x5f,0x64]},'Collector\x20Ribbon':{'description':a50w(0x164),'image':a50w(0x127),'color':'#6C5CE7','levels':[0x5,0xa,0xf,0x14,0x19,0x1e,0x23,0x28,0x2d,0x32]},'Sub-Gamer\x20Ribbon':{'description':a50w(0x172),'image':a50w(0x1a6),'color':'#A29BFE','levels':[0x32,0x64,0x96,0xc8,0xfa,0x12c,0x15e,0x190,0x1c2,0x1f4]},'Explorer\x20Ribbon':{'description':a50w(0x142),'image':a50w(0x138),'color':a50w(0x136),'levels':[0x14,0x28,0x3c,0x50,0x64,0x78,0x8c,0xa0,0xb4,0xc8]},'Socialite\x20Ribbon':{'description':a50w(0x19e),'image':'../images/ribbons/Socialite.png','color':a50w(0x16c),'levels':[0xa,0xf,0x14,0x19,0x1e,0x23,0x28,0x2d,0x32,0x37]},'Underdog\x20Ribbon':{'description':'Beat\x20a\x20pilot\x20ranked\x20higher\x20than\x20you','image':'../images/ribbons/Underdog.png','color':'#FF9500','levels':[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa]},'Domination\x20Ribbon':{'description':'Beat\x205\x20unique\x20pilots\x20in\x20a\x20rank\x20(including\x20your\x20own)','image':'../images/ribbons/Domination.png','color':a50w(0x1af),'levels':[0x1,0x2,0x3,0x4,0x5]},'Top\x20Bronze\x20Pilot':{'description':a50w(0x174),'image':a50w(0x15b),'color':a50w(0xfc)},'Top\x20Silver\x20Pilot':{'description':a50w(0x103),'image':a50w(0x15b),'color':'#C0C0C0'},'Top\x20Gold\x20Pilot':{'description':'Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Gold\x20rank','image':a50w(0x15b),'color':a50w(0x115)},'Top\x20Emerald\x20Pilot':{'description':'Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Emerald\x20rank','image':'../images/ribbons/toprank.png','color':'#50C878'}};export const RIBBON_CSS=a50w(0x185);class RibbonCacheManager{constructor(){const x=a50w;this['memoryCache']=new Map(),this['CACHE_DURATION']=0x3c*0x3c*0x3e8,this[x(0x180)]='ribbon_cache_',this[x(0x128)]=Date[x(0x18b)](),this['CLEANUP_INTERVAL']=0x1e*0x3c*0x3e8;}[a50w(0x1a1)](a,b){const y=a50w;return''+this[y(0x180)]+a+'_'+b;}[a50w(0x121)](a,b){const z=a50w;this[z(0x173)]();const c=this['getCacheKey'](a,b);if(this['memoryCache']['has'](c)){const f=this['memoryCache'][z(0x160)](c);if(Date['now']()-f['timestamp']<this['CACHE_DURATION'])return console['log'](z(0x1b4)+a),f['data'];this[z(0x1b1)][z(0x13b)](c);}const d=localStorage[z(0x107)](c);if(d)try{const g=JSON[z(0x1a3)](d);if(Date['now']()-g['timestamp']<this[z(0x18d)])return this[z(0x1b1)]['set'](c,{'data':g['ribbons'],'timestamp':g[z(0x16b)],'matchCount':g[z(0x152)]}),console['log'](z(0x110)+a),g[z(0x120)];localStorage[z(0x18c)](c);}catch(h){localStorage['removeItem'](c);}return null;}[a50w(0x13c)](a,b,c,d){const A=a50w,f=this['getCacheKey'](a,b),g=Date[A(0x18b)]();this['memoryCache']['set'](f,{'data':c,'timestamp':g,'matchCount':d});try{const h={'ribbons':c,'matchCount':d,'timestamp':g,'version':0x3};localStorage[A(0x153)](f,JSON[A(0x17c)](h));}catch(i){this[A(0x12f)]();try{localStorage[A(0x153)](f,JSON[A(0x17c)](data));}catch(j){}}}['shouldRefreshCache'](a,b,c){const B=a50w,d=this['getCacheKey'](a,b);if(this['memoryCache'][B(0x11c)](d)){const g=this[B(0x1b1)][B(0x160)](d);return g['matchCount']!==c;}const f=localStorage['getItem'](d);if(f)try{const h=JSON['parse'](f);return h[B(0x152)]!==c;}catch(i){return!![];}return!![];}[a50w(0x158)](a,b){const C=a50w,c=this[C(0x1a1)](a,b);this['memoryCache'][C(0x13b)](c),localStorage['removeItem'](c),console['log']('ðŸ—‘ï¸\x20Invalidated\x20cache\x20for\x20'+a+'\x20('+b+C(0x14c));}[a50w(0x173)](){const D=a50w,a=Date[D(0x18b)]();a-this[D(0x128)]>this['CLEANUP_INTERVAL']&&(this[D(0x14d)](),this['lastCleanup']=a);}[a50w(0x14d)](){const E=a50w,a=Date[E(0x18b)]();let b=0x0,c=0x0;for(const [d,f]of this[E(0x1b1)][E(0x16d)]()){a-f[E(0x16b)]>this['CACHE_DURATION']&&(this['memoryCache']['delete'](d),b++);}for(let g=localStorage['length']-0x1;g>=0x0;g--){const h=localStorage['key'](g);if(h&&h['startsWith'](this[E(0x180)]))try{const j=JSON['parse'](localStorage[E(0x107)](h));a-j[E(0x16b)]>this['CACHE_DURATION']&&(localStorage['removeItem'](h),c++);}catch(k){localStorage[E(0x18c)](h),c++;}}}[a50w(0x12f)](){const F=a50w,a=[];for(let c=0x0;c<localStorage[F(0x14e)];c++){const d=localStorage['key'](c);if(d&&d[F(0x1a4)](this['CACHE_KEY_PREFIX']))try{const f=JSON['parse'](localStorage[F(0x107)](d));a[F(0x194)]({'key':d,'timestamp':f['timestamp']});}catch(g){localStorage['removeItem'](d);}}a['sort']((h,j)=>h['timestamp']-j['timestamp']);const b=Math[F(0x181)](a[F(0x14e)]/0x2);for(let h=0x0;h<b;h++){localStorage[F(0x18c)](a[h][F(0x156)]);}}['getCacheStats'](){const G=a50w;return{'memoryEntries':this['memoryCache'][G(0x125)],'lastCleanup':new Date(this[G(0x128)])['toLocaleTimeString']()};}}class MatchCacheManager{constructor(){const H=a50w;this['matchCache']=new Map(),this['CACHE_DURATION']=0xf*0x3c*0x3e8,this[H(0x128)]=Date['now']();}['getCachedMatches'](a,b){const I=a50w;this['autoCleanup']();const c=a+'_'+b,d=this['matchCache']['get'](c);if(d&&Date[I(0x18b)]()-d['timestamp']<this[I(0x18d)])return console['log'](I(0x10c)+a),d['matches'];return d&&this['matchCache']['delete'](c),null;}['setCachedMatches'](a,b,c){const J=a50w,d=a+'_'+b;this[J(0x10e)]['set'](d,{'matches':c,'timestamp':Date[J(0x18b)]()});}['autoCleanup'](){const K=a50w,a=Date['now']();if(a-this[K(0x128)]>0x5*0x3c*0x3e8){let b=0x0;for(const [c,d]of this[K(0x10e)][K(0x16d)]()){a-d['timestamp']>this['CACHE_DURATION']&&(this[K(0x10e)]['delete'](c),b++);}this['lastCleanup']=a;}}['getCacheStats'](){const L=a50w;return{'entries':this[L(0x10e)][L(0x125)],'lastCleanup':new Date(this['lastCleanup'])[L(0x141)]()};}}function a50a(){const am=['4PQG77Ipie5Vign1CNjLBNqGCgXHEwvYigrHDgeGzM91BMqGzM9Yia','z2v0ugXHEwvYtwf0y2HLC09WDgLTAxPLza','8j+oRYbdywnOzsbOAxqGkg1HDgnOzxmPigzVCIa','zxjYB3i','Bwf0y2HdywnOzq','u29JAwfSAxrLifjPyMjVBG','8j+sVIbdywnOzsbOAxqGkgXVy2fSu3rVCMfNzsKGzM9Yia','nxjuDwLmDa','C2f2zvbSyxLLCLjPyMjVBNnpChrPBwL6zwq','Bgv2zwW','yNvSA0XVywrqBgf5zxjeyxrH','i0zgrdCWma','u3rHBMrHCMq','A2v5CW','qMvHDcbHihbPBg90ihDPDgGGDgHLicjszw1HDgnOiIbZDwjNyw1LihnLBgvJDgvK','z2v0ugXHEwvYrgf0yunHy2HLza','ndqWmZa3v1jiveXM','ntq2odCWqLvQy0XQ','AgfZ','t3zLCMfJAgLLDMvYifjPyMjVBG','z2v0q2fJAgvKtwf0y2HLCW','C3vIz2fTzvr5Cgu','CMLIyM9UCW','z2v0q2fJAgvKrgf0yq','pc9KAxy+','Dw5KzxjKB2DxAw5Z','pc9KAxy+cIaGicaGicaGicaGia','C2L6zq','zgf0yq','lI4VAw1Hz2vZl3jPyMjVBNmVq29SBgvJDg9YlNbUzW','BgfZDenSzwfUDxa','pgKGy2XHC3m9iMzHCYbMys1ZDgfYihjPyMjVBI1KzxzPy2uGyNjVBNPLlxn0yxiIpJWVAt4','CgXHEwvYC0qY','yxbWCM92zwrnyxrJAgvZrdm','Dw5KzwzPBMvK','C3vIz2fTzu1HDgnOzxm','BwfWugXHEwvK','y2XLyxjpBgrdywnOzq','BwLU','zxzHBhvHDgveB21PBMf0Aw9UuMLIyM9UrNjVBvjHBMTZ','zMLUzeLUzgv4','zxzHBhvHDgvpDMvYywnOAwv2zxjsAwjIB25gCM9Tq291BNq','vw5KzxjKB2CGuMLIyM9U','zxzHBhvHDgvcCMLJA1DHBgXsAwjIB25gCM9Tv2LUuMf0zq','iZu1qtngrG','8j+oRYbvtKrfuKrprYbwsunut1jzoIa','lI4VAw1Hz2vZl3jPyMjVBNmVrxHWBg9YzxiUCg5N','r29Sza','D2LUBMvYvxnLCM5HBwu','zgvSzxrL','C2v0q2fJAgvKrgf0yq','C2v0','AxnvBMrLCMrVz1zPy3rVCNLgyxn0','ksbIzwf0ia','zxzHBhvHDgvszw1HDgnOuMLIyM9UrNjVBunVDw50','Dg9mB2nHBgvuAw1Lu3rYAw5N','ugXHEwvKigf0igXLyxn0idiWihvUAxf1zsbTyxbZ','i0yWotmYqG','iJ4kicaGicaGicaGicaGpgrPDIbJBgfZCZ0ICMLIyM9UlwLTywDLlwnVBNrHAw5LCIi+cIaGicaGicaGicaGicaGica8Aw1NihnYyZ0I','z2v0uMLIyM9Uq2fJAgvtDgf0CW','mtaXn09gwfjKsa','Bg9ZzxjvC2vYBMfTzq','zxzHBhvHDgvdB2XSzwn0B3jsAwjIB25gCM9Tq291BNq','CMf0Aw5N','C2v0q2fJAgvKtwf0y2HLCW','ihzZia','ksaTig5LDYbTyxrJAcbKzxrLy3rLza','y2XLyw51Ca','BgvUz3rO','lI4VAw1Hz2vZl3jPyMjVBNmVqNjPy2TxywXSlNbUzW','yxbWCM92zwrnyxrJAgvZ','oYi+cIaGicaGicaGicaGicaGicaGicaG','Bwf0y2HdB3vUDa','C2v0sxrLBq','pgrPDIbJBgfZCZ0ICMLIyM9UlwXLDMvSlwLUzgLJyxrVCIa','ievmtYKSia','A2v5','uMvTyxrJAcbsAwjIB24','Aw52ywXPzgf0zvbSyxLLCKnHy2HL','4P2mievYCM9YigzLDgnOAw5Nig1HDgnOzxm6','nZa5odu3nKnHAMD1Da','lI4VAw1Hz2vZl3jPyMjVBNmVDg9WCMfUAY5WBMC','zw5KC1DPDgG','qNjPy2SGv2fSBa','mJu4mdy2ng1jz0LxDa','CMvTyxrJAfDPBNm','z2v0','ievmtYK','rxjYB3iGC2f2Aw5NihjPyMjVBNm6','Bgv2zwWTmq','sg9SzcbTB3jLihrOyw4GnsbYAwjIB25Zigf0igeGDgLTzq','Bgv2zwWTns1WBhvZ','D2LUBMvYuMf0Aw5N','igjLyxqG','D2LUCW','igfSCMvHzhKGAgfZia','Bgv2zwWTna','DgLTzxn0yw1W','i0zgnZy3nq','zw50CMLLCW','iZK2q0vcna','igLZifvUCMfUA2vKicG','BwfW','mte4nJaZmur1EuTJBq','ugXHEsbVDMvYiduWihn1yMDHBwuGBwf0y2HLCW','yxv0B0nSzwfUDxa','q2XHAw1Lzcb0AguGAgLNAgvZDcbZCg90ig9UihrOzsbSywrKzxiGzM9YiejYB256zsbYyw5R','ifrPzxi6ia','pgKGy2XHC3m9iMzHCYbMys1ZDgfYihjPyMjVBI1KzxzPy2uGC2LSDMvYlxn0yxiIpJWVAt4','Dg90ywXnyxrJAgvZ','8j+oRYbgB3vUzca','zwXVuMf0Aw5N','Aw1Hz2u','yMf0y2HuAw1LCG','C3rYAw5NAwz5','Bgv2zwWTmW','zxzHBhvHDgvvBMrLCMrVz1jPyMjVBKzYB21dB3vUDa','yxnZAwDU','q0fdsevFs0vzx1bsruzjwa','zMXVB3i','C3vIC3rYAw5N','Dw5PCxvLt3bWB25LBNrZ','uMvTyxrJAa','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zwz0oIa1mcu7cIaGicb0CMfUC2zVCM06ihrYyw5ZBgf0zvGOltuWjsK7cIaGicbIywnRz3jVDw5KoIbYz2jHkdaSmcWWldaUotuPoWOGicaGy29SB3i6ihDOAxrLoWOGicaGCgfKzgLUzZOGohb4ideYChG7cIaGicbIB3jKzxiTCMfKAxvZoIa2ChG7cIaGicbMB250lxnPEMu6ideYChG7cIaGicb3AgL0zs1ZCgfJztOGBM93CMfWoWOGicaGB3bHy2L0EtOGmdSkicaGihbVAw50zxiTzxzLBNrZoIbUB25LoWOGicaGDhjHBNnPDgLVBJOGB3bHy2L0EsaWlJnZoWOGicaGEI1PBMrLEdOGmtaWmdSkicaGihrLEhqTywXPz246ignLBNrLCJSkicaGig1HCMDPBI1IB3r0B206idHWEdSkicaGigjVCMrLCJOGmxb4ihnVBgLKihjNyMeOmJu1lcaYntuSidi1nsWGmc4YktSkFqOklM1PBgL0yxj5lxjPyMjVBJPOB3zLCJO6yMvMB3jLihSkicaGig9WywnPDhK6ide7cN0kcI8QifjLC3bVBNnPDMuGywrQDxn0BwvUDhmGkI8kqg1LzgLHicHTyxGTD2LKDgG6ideWmJrWEcKGEWOGicaGlM1PBgL0yxj5lxjPyMjVBIb7cIaGicaGicaGD2LKDgG6ideWmhb4oWOGicaGicaGigHLAwDODdOGmZrWEdSkicaGicaGicbTyxjNAw46idHWEca4ChGGohb4ida7cIaGicb9cIaGicakicaGic5YAwjIB24Tzgv2AwnLihSkicaGicaGicbMB250lxnPEMu6ideYChG7cIaGicb9cIaGicakicaGic5YAwjIB24TBgv2zwWTAw5KAwnHDg9YihSkicaGicaGicb3Awr0AdOGmJbWEdSkicaGicaGicbOzwLNAhq6idiWChG7cIaGicaGicaGzM9UDc1ZAxPLoIaXmhb4oWOGicaGicaGihrVCdOGltzWEdSkicaGicaGicbYAwDODdOGltzWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1YB3C6BNrOlwnOAwXKkgv2zw4PihSkicaGicaGicbTyxjNAw4TBgvMDdOGntjWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1Uyw1LihSkicaGicaGicbMB250lxnPEMu6ideYChG7cIaGicaGicaGyM90Dg9ToIaTmJbWEdSkicaGih0kFqOkqg1LzgLHicHTyxGTD2LKDgG6idC2ohb4ksb7cIaGicaUBwLSAxrHCNKTCMLIyM9UihSkicaGicaGicb3Awr0AdOGodbWEdSkicaGicaGicbOzwLNAhq6idi4ChG7cIaGicaGicaGBwfYz2LUoIa2ChGGnNb4idzWEcaWoWOGicaGFqOGicaGcIaGicaUCMLIyM9UlwrLDMLJzsb7cIaGicaGicaGzM9UDc1ZAxPLoIaXmhb4oWOGicaGFqOGicaGcIaGicaUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCIb7cIaGicaGicaGD2LKDgG6ide4ChG7cIaGicaGicaGAgvPz2H0oIaXohb4oWOGicaGicaGigzVBNqTC2L6ztOGoxb4oWOGicaGicaGihrVCdOGltvWEdSkicaGicaGicbYAwDODdOGltvWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1YB3C6BNrOlwnOAwXKkgv2zw4PihSkicaGicaGicbTyxjNAw4TBgvMDdOGndjWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1Uyw1LihSkicaGicaGicbMB250lxnPEMu6ideXChG7cIaGicaGicaGyM90Dg9ToIaTmtHWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1YywnRlwLUBgLUzsb7cIaGicaGicaGz2fWoIa1ChG7cIaGicb9cN0kcKbTzwrPysaOBwf4lxDPzhrOoIa0odbWEcKGEWOGicaGlM1PBgL0yxj5lxjPyMjVBIb7cIaGicaGicaGD2LKDgG6idCWChG7cIaGicaGicaGAgvPz2H0oIaYnhb4oWOGicaGicaGig1HCMDPBJOGnxb4idvWEca1ChGGmdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1YB3C6BNrOlwnOAwXKkgv2zw4PihSkicaGicaGicbTyxjNAw4TBgvMDdOGmZzWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1YywnRlwLUBgLUzsb7cIaGicaGicaGz2fWoIa0ChG7cIaGicb9cIaGicakicaGic5YAwjIB24TBgv2zwWTAw5KAwnHDg9YihSkicaGicaGicb3Awr0AdOGmtzWEdSkicaGicaGicbOzwLNAhq6ide2ChG7cIaGicaGicaGzM9UDc1ZAxPLoIa4ChG7cIaGicaGicaGDg9WoIaTnhb4oWOGicaGicaGihjPz2H0oIaTnhb4oWOGicaGFqP9cGOUC3rHDhmTz3jPzcaUCMLIyM9UlxnLy3rPB24GEWOGicaGyMfJA2DYB3vUzdOGDhjHBNnWyxjLBNq7cIaGicbIB3jKzxi6ig5VBMu7cIaGicbWywrKAw5NoIaWoWP9cGOUC3rHDhmTz3jPzcaUCMLIyM9Ulxn0yxqTAxrLBsb7cIaGicbIywnRz3jVDw5KlwnVBg9YoIbYz2jHkdaSidaSidaSidaUmYK7cIaGicbWywrKAw5NoIaYnxb4oWOGicaGyM9YzgvYlxjHzgL1CZOGmtbWEdSkicaGihrLEhqTywXPz246ignLBNrLCJSkFqOklNn0yxrZlwDYAwqGlNjPyMjVBI1ZDgf0lwL0zw0GlNn0yxqTBgfIzwWGEWOGicaGzM9UDc1ZAxPLoIaXnNb4oWOGicaGDgv4Dc10CMfUC2zVCM06ihvWCgvYy2fZztSkicaGig9WywnPDhK6idaUotSkicaGig1HCMDPBI1IB3r0B206idiWChG7cIaGicbJB2XVCJOGCMDIysGYntuSidi1nsWGmJu1lcaWlJK1ktSkicaGigzVBNqTD2vPz2H0oIbIB2XKoWP9cGOUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCI5SzxzLBc0XihSGyMfJA2DYB3vUzdOGiZGWoda4mdSGFqOUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCI5SzxzLBc0YihSGyMfJA2DYB3vUzdOGi0nen0yZmJSGFqOUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCI5SzxzLBc0ZihSGyMfJA2DYB3vUzdOGi2i5zJfMyZSGFqOUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCI5SzxzLBc00ihSGyMfJA2DYB3vUzdOGi0zgrdCWmdSGFqOUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCI5SzxzLBc01lxbSDxmGEYbIywnRz3jVDw5KoIaJntbdodC4oYb9cG','zxzHBhvHDgvbBgXsAwjIB25ZrM9YugXHEwvYt3b0Aw1PEMvK','ihvUzgvYzg9NihDPBNmP','iejHzgDL','8j+sVIbtyxzPBMCG','CgXHEwvYrgf0yunHy2HL','BM93','CMvTB3zLsxrLBq','q0fdsevFrfvsqvrjt04','y2HLy2TuB3bsyw5Ru3rHDhvZ','Bwf0y2HLC1bSyxLLza','ifbPBg90','rxjYB3iGy2HLy2TPBMCGDg9WihjHBMSGC3rHDhvZoG','ndzxsMLNzum','zxzHBhvHDgvbBgXsAwjIB25ZrNjVBurHDge','ChvZAa','lcbqB3nPDgLVBIa','vg9Wia','iIakicaGicaGicaGicaGicaGicaGicaGy2XHC3m9iNjPyMjVBI1PBwfNzsikicaGicaGicaGicaGicaGicaGicaGB25LCNjVCJ0IDgHPCY5ZDhLSzs5KAxnWBgf5psDUB25LjZSGDgHPCY5UzxH0rwXLBwvUDfnPyMXPBMCUC3r5BguUzgLZCgXHEt0NyMXVy2SNoYi+cIaGicaGicaGicaGicaGica8zgL2ignSyxnZpsjYAwjIB24TzMfSBgjHy2SIihn0EwXLpsjKAxnWBgf5oIbUB25LoYbIywnRz3jVDw5KoIa','ktOG','u3vIluDHBwvYifjPyMjVBG','rxHWBg9YzxiGuMLIyM9U','Bg9ZzxjsyxrPBMC','ihn0yxr1CYbMB3iG','CgXHEwvYCW','ugXHEwvKigf0igXLyxn0ideWihvUAxf1zsbWAwXVDhm','ihbSyxLLCNmSifrVCdOG','8j+rKsborvCGvg9WifjHBMSGqwnOAwv2zw1LBNq6ia','z2v0q2fJAgvlzxK','iokgKIa','CgfYC2u','C3rHCNrZv2L0Aa','4PQG77IpiejYAwnRifDHBgWGCMLIyM9UihjLCxvPCMvZiduWkYbTyxrJAgvZicHWBgf5zxiGAgfZia','lI4VAw1Hz2vZl3jPyMjVBNmVu3vIz2fTzxiUCg5N','mJC2mJLsy0XouhG','8j+pHIbcCMLJAYbxywXSihjPyMjVBIbHD2fYzgvKoIa','4P2mie5VDcb1BMrLCMrVzZOG','u2LSDMvY','zxzHBhvHDgvtB2nPywXPDgvsAwjIB25gCM9Tq291BNq','AM9PBG','ywrK','z2v0ugXHEwvYuMLIyM9UC0nHy2HLza','iZHfndrbra','ndq0nZbLqLjMDvm','BwvTB3j5q2fJAgu','ihbSyxLLCIbYzwnVCMrZigzVCIb1BMrLCMrVzYbJywXJDwXHDgLVBNmUlI4','ihvUzgvYzg9NihzPy3rVCMLLCYbMB3iG','8j+AGcbdywnOzsbOAxqGkg1LBw9YEsKGzM9Yia','4P2mievYCM9YigLUihjPyMjVBIbLDMfSDwf0Aw9UoG','Bg9N','Bgv2zwXZ','cIaGicaGicaGicaGidXKAxyGy2XHC3m9iNjPyMjVBI1Uyw1LiJ4','cIaGicaGicaGpc9KAxy+cIaGica','zxzHBhvHDgvuB3bsyw5RuMLIyM9U','i0nen0yZmG','rw1LCMfSza','8j+rKsbeB21PBMf0Aw9UifjPyMjVBIbHD2fYzgvKoIbmzxzLBca','4PQG77Ipie1PC3nPBMCGCgXHEwvYigrHDgeGzM9Yia','Dw5PCxvLtwfWCW','zM9YrwfJAa','ywXS','q2XHAw1Lzcb0AguGAgLNAgvZDcbZCg90ig9UihrOzsbSywrKzxiGzM9YifnPBhzLCIbYyw5R','q29SBgvJDg9YifjPyMjVBG','cIaGicaGicaGicaGicaGica8l2rPDJ4kicaGicaGicaGicaGpc9KAxy+cIaGicaGicaGicaGia','8j+tIIa','z2v0sxrLBq','DxnLCM5HBwu','lI4VAw1Hz2vZl3jPyMjVBNmVuMvTyxrJAc5WBMC'];a50a=function(){return am;};return a50a();}class RibbonSystem{constructor(){const M=a50w;this['pendingEvaluations']=new Map(),this[M(0x17b)]=null,this['BATCH_DELAY']=0x32,this[M(0x18a)]=new Map();}async[a50w(0x114)](a,b){const N=a50w,c=b==='D1'?'players':b==='D2'?N(0x12a):'playersD3',d=collection(db,c),e=await getDocs(d),f=new Map();return e['forEach'](g=>{const O=N,h=g['data']();h[O(0x108)]&&(h['eloRating']!==undefined&&(h[O(0x149)]=h['eloRating']),f[O(0x13d)](h[O(0x108)],h));}),console['log']('ðŸ“Š\x20Bulk\x20loaded\x20'+f['size']+'\x20players\x20from\x20'+c),f;}async['evaluateAllRibbonsFromData'](a,b,c,d){const P=a50w,e={},f=b[P(0x108)],g={'totalMatches':a['length'],'wins':0x0,'rematchWins':0x0,'subgameMatches':0x0,'uniqueMaps':new Set(),'uniqueOpponents':new Set(),'underdogWins':0x0,'dominatedRanks':new Set()},h=new Set();a['forEach'](p=>{const Q=P,q=p[Q(0x13a)]===f,r=q?p['loserUsername']:p['winnerUsername'];if(r)h['add'](r);}),console['log']('ðŸš€\x20Bulk\x20loading\x20'+h['size']+P(0x1b2));const i=await this[P(0x114)]([...h,f],d),j=i[P(0x160)](f);!j&&console[P(0xf7)]('âš ï¸\x20No\x20current\x20player\x20data\x20found\x20for\x20'+f);const k={0x0:new Set(),0x1:new Set(),0x2:new Set(),0x3:new Set(),0x4:new Set()};a[P(0x101)](p=>{const R=P,q=p['winnerUsername']===f,r=q?p[R(0x147)]:p[R(0x13a)];if(q){g[R(0x168)]++;p[R(0x11f)]==='Rematch'&&g[R(0x15f)]++;this[R(0x13e)](p,f,j,i)&&g[R(0x123)]++;const s=i['get'](r);if(s){const t=s[R(0x179)]||0x0,u=getPlayerRankTier(t);k[u]['add'](r);}}p['subgameType']&&p['subgameType']!=='Standard'&&g['subgameMatches']++,p[R(0x12e)]&&g['uniqueMaps']['add'](p[R(0x12e)]),r&&g[R(0x183)]['add'](r);}),Object[P(0x117)](k)['forEach'](p=>{const S=P;k[p]['size']>=0x5&&g['dominatedRanks'][S(0x1ad)](parseInt(p));}),console[P(0xf7)](P(0x178)+g['underdogWins']+'\x20underdog\x20victories\x20for\x20'+f),console[P(0xf7)]('ðŸ‘‘\x20Dominated\x20'+g['dominatedRanks'][P(0x125)]+'\x20ranks:\x20['+Array['from'](g['dominatedRanks'])[P(0x170)](p=>getRankTierName(p))['join'](',\x20')+']');const l=g['totalMatches']>0x0?g[P(0x168)]/g['totalMatches']*0x64:0x0,m=[['Overachiever\x20Ribbon',this['evaluateOverachieverRibbonFromCount'](g['totalMatches'],c)],['Rematch\x20Ribbon',this[P(0x140)](g[P(0x15f)],c)],[P(0x199),this['evaluateSubGamerRibbonFromCount'](g[P(0x12d)],c)],[P(0x19a),this['evaluateExplorerRibbonFromCount'](g[P(0x100)]['size'],c)],[P(0x10f),this['evaluateSocialiteRibbonFromCount'](g['uniqueOpponents'][P(0x125)],c)],[P(0x15d),this['evaluateBrickWallRibbonFromWinRate'](l,c,g['totalMatches'])],[P(0x134),this[P(0x17e)](g['underdogWins'],c)],['Domination\x20Ribbon',this['evaluateDominationRibbonFromRanks'](g['dominatedRanks'][P(0x125)],c)]];m['forEach'](([p,q])=>{q&&(e[p]=q);});const n=Object[P(0x117)](c)[P(0x14e)]+Object['keys'](e)['length'],o=this[P(0x148)](n,c);return o&&(e[P(0x104)]=o),e;}[a50w(0x131)](a,b){const T=a50w;if(a===0x0)return null;const c=b['Domination\x20Ribbon']||{'level':0x0};if(a>c[T(0x113)]){const d=[];for(let e=0x0;e<a;e++){d['push'](getRankTierName(e));}return console['log'](T(0xfe)+c['level']+T(0x1a2)+a+'\x20(Dominated:\x20'+d['join'](',\x20')+')'),{'level':a,'awardedAt':new Date(),'dominatedRanks':d};}return null;}async[a50w(0x18e)](a,b){const U=a50w;try{const c=b==='D1'?U(0x19d):b==='D2'?U(0x12a):'playersD3',d=await this[U(0x119)](a,b);if(!d||d['eloRating']===undefined)return console[U(0xf7)]('âŒ\x20No\x20ELO\x20rating\x20data\x20for\x20'+a),null;const e=d['eloRating'],f=getPlayerRankTier(e),g=getRankTierName(f);if(g==='Unranked')return console[U(0xf7)]('âŒ\x20'+a+U(0x16f)+e+U(0x161)),null;console[U(0xf7)]('ðŸ”\x20Checking\x20Top\x20'+g+U(0x19c)+a+'\x20('+e+U(0x161));const h=collection(db,c),i=await getDocs(h);let j=null,k=-0x1,l=0x0;i[U(0x101)](n=>{const V=U,o=n[V(0x126)](),p=o[V(0x179)]||0x0,q=getPlayerRankTier(p);q===f&&(l++,p>k&&(k=p,j=o['username']));});const m=j===a;return console[U(0xf7)](U(0x106)+g+U(0x175)+l+U(0x19f)+j+'\x20('+k+U(0x155)+a+'\x20is\x20#1:\x20'+m),m?g:null;}catch(n){return console[U(0x10d)](U(0x191),n),null;}}async[a50w(0xfb)](a,b,c){const W=a50w,d=await this['checkTopRankStatus'](a,b),e={};if(d){const f=W(0x196)+d+'\x20Pilot';if(RIBBON_DEFINITIONS[f]){const g=c[f];!g?(console['log'](W(0x1a0)+a+'\x20earned\x20'+f+'!'),e[f]={'level':0x1,'awardedAt':new Date(),'rank':d,'achievedAt':new Date()}):console[W(0xf7)]('âœ…\x20'+a+W(0x169)+f+'\x20-\x20No\x20changes\x20needed');}}return Object['keys'](c)['forEach'](h=>{const X=W;h[X(0x1a4)](X(0x196))&&h[X(0x15c)](X(0x190))&&(!e[h]&&console['log']('âœ…\x20Preserving\x20existing\x20'+h));}),e;}async[a50w(0x186)](a,b='D1'){const Y=a50w;try{const c=ribbonCache['getCachedData'](a,b);if(c){const k=await this[Y(0xfb)](a,b,c);if(Object[Y(0x117)](k)[Y(0x14e)]>0x0){console[Y(0xf7)]('ðŸ†•\x20New\x20top\x20rank\x20achievements\x20found\x20for\x20cached\x20player\x20'+a),await this[Y(0x112)](a,k,b);const l={...c,...k};return ribbonCache['setCachedData'](a,b,l,0x0),l;}return c;}const [d,e]=await Promise['all']([this[Y(0x119)](a,b),this[Y(0x1ae)](a,b)]);if(!d)return{};const f=d[Y(0x18f)]||0x0,g=await this['evaluateTopRankRibbon'](a,b,e);if(!ribbonCache['shouldRefreshCache'](a,b,f)){if(Object['keys'](g)[Y(0x14e)]>0x0){await this[Y(0x112)](a,g,b);const m={...e,...g};return ribbonCache['setCachedData'](a,b,m,f),m;}return ribbonCache[Y(0x13c)](a,b,e,f),e;}const h=await this[Y(0x10b)](a,b),i=await this['evaluateAllRibbonsFromData'](h,d,e,b);Object[Y(0x17f)](i,g);Object[Y(0x117)](i)[Y(0x14e)]>0x0&&(console[Y(0xf7)](Y(0x189)+Object[Y(0x117)](i)[Y(0x14e)]+'\x20new/updated\x20ribbons\x20for\x20'+a),await this[Y(0x112)](a,i,b));const j={...e,...i};return ribbonCache['setCachedData'](a,b,j,h[Y(0x14e)]),j;}catch(n){return console['error'](Y(0xf6),n),{};}}async['isUnderdogVictory'](a,b,c){const Z=a50w,d=a['winnerUsername']===b;if(!d)return![];const e=a[Z(0x147)],[f,g]=await Promise['all']([this[Z(0x119)](b,c),this['getPlayerDataCached'](e,c)]);if(!f||!g)return console[Z(0xf7)](Z(0xff)+b+'\x20or\x20'+e),![];const h=f[Z(0x179)]||0x0,i=g[Z(0x179)]||0x0,j=getPlayerRankTier(h),k=getPlayerRankTier(i);console['log']('ðŸ”\x20Checking\x20underdog:\x20Winner('+b+'):\x20'+h+'\x20ELO\x20('+getRankTierName(j)+')\x20vs\x20Loser('+e+Z(0x198)+i+'\x20ELO\x20('+getRankTierName(k)+')');if(k>j)return console[Z(0xf7)](Z(0x137)+getRankTierName(j)+Z(0x167)+getRankTierName(k)+'!'),!![];return console[Z(0xf7)](Z(0x1a9)+getRankTierName(j)+Z(0x14b)+getRankTierName(k)),![];}[a50w(0x13e)](a,b,c,d){const a0=a50w,e=a['winnerUsername']===b;if(!e)return![];const f=a[a0(0x147)],g=d['get'](f);if(!c||!g)return![];const h=c[a0(0x179)]||0x0,i=g[a0(0x179)]||0x0,j=getPlayerRankTier(h),k=getPlayerRankTier(i);if(k>j)return console[a0(0xf7)]('ðŸŽ¯\x20UNDERDOG:\x20'+getRankTierName(j)+'('+h+a0(0x13f)+getRankTierName(k)+'('+i+')'),!![];return![];}async[a50w(0x193)](a,b,c,d){const a1=a50w,e={},f=b[a1(0x108)],g={'totalMatches':a['length'],'wins':0x0,'rematchWins':0x0,'subgameMatches':0x0,'uniqueMaps':new Set(),'uniqueOpponents':new Set(),'underdogWins':0x0},h=new Set();a[a1(0x101)](o=>{const a2=a1,p=o['winnerUsername']===f,q=p?o[a2(0x147)]:o['winnerUsername'];if(q)h['add'](q);}),console['log']('ðŸš€\x20Bulk\x20loading\x20'+h['size']+'\x20player\x20records\x20for\x20underdog\x20calculations...');const i=await this['bulkLoadPlayerData']([...h,f],d),j=i[a1(0x160)](f);!j&&console[a1(0xf7)](a1(0x10a)+f);a[a1(0x101)](o=>{const a3=a1,p=o['winnerUsername']===f,q=p?o[a3(0x147)]:o[a3(0x13a)];p&&(g[a3(0x168)]++,o[a3(0x11f)]===a3(0x184)&&g[a3(0x15f)]++,this[a3(0x13e)](o,f,j,i)&&g['underdogWins']++),o[a3(0x11f)]&&o[a3(0x11f)]!==a3(0x116)&&g['subgameMatches']++,o[a3(0x12e)]&&g[a3(0x100)]['add'](o[a3(0x12e)]),q&&g[a3(0x183)]['add'](q);}),console['log'](a1(0x178)+g[a1(0x123)]+a1(0x1b3)+f);const k=g[a1(0x177)]>0x0?g['wins']/g[a1(0x177)]*0x64:0x0,l=[['Overachiever\x20Ribbon',this[a1(0x133)](g[a1(0x177)],c)],[a1(0x157),this[a1(0x140)](g['rematchWins'],c)],['Sub-Gamer\x20Ribbon',this['evaluateSubGamerRibbonFromCount'](g['subgameMatches'],c)],[a1(0x19a),this['evaluateExplorerRibbonFromCount'](g[a1(0x100)][a1(0x125)],c)],['Socialite\x20Ribbon',this['evaluateSocialiteRibbonFromCount'](g['uniqueOpponents'][a1(0x125)],c)],[a1(0x15d),this[a1(0x135)](k,c,g['totalMatches'])],[a1(0x134),this[a1(0x17e)](g[a1(0x123)],c)]];l['forEach'](([o,p])=>{p&&(e[o]=p);});const m=Object[a1(0x117)](c)[a1(0x14e)]+Object['keys'](e)[a1(0x14e)],n=this[a1(0x148)](m,c);return n&&(e['Collector\x20Ribbon']=n),e;}async['getPlayerMatchesOptimized'](a,b){const a4=a50w,c=matchCache[a4(0x11e)](a,b);if(c)return c;try{const d=b==='D1'?a4(0x150):b==='D2'?'approvedMatchesD2':a4(0x12b),e=collection(db,d),[f,g]=await Promise[a4(0x102)]([getDocs(query(e,where('winnerUsername','==',a))),getDocs(query(e,where('loserUsername','==',a)))]),h=new Set(),i=[];return f[a4(0x101)](j=>{const a5=a4;if(!h['has'](j['id'])){h[a5(0x1ad)](j['id']);const k={'id':j['id'],...j[a5(0x126)]()};if(!k['winnerRating'])k[a5(0x166)]=0x0;if(!k[a5(0x19b)])k[a5(0x19b)]=0x0;i[a5(0x194)](k);}}),g[a4(0x101)](j=>{const a6=a4;if(!h['has'](j['id'])){h['add'](j['id']);const k={'id':j['id'],...j[a6(0x126)]()};if(!k[a6(0x166)])k['winnerRating']=0x0;if(!k['loserRating'])k[a6(0x19b)]=0x0;i[a6(0x194)](k);}}),matchCache[a4(0x14a)](a,b,i),i;}catch(j){return console[a4(0x10d)](a4(0x159),j),[];}}async[a50w(0x119)](a,b){const a7=a50w;try{const c=b==='D1'?'players':b==='D2'?'playersD2':'playersD3',d=collection(db,c),e=query(d,where(a7(0x108),'==',a),limit(0x1)),f=await getDocs(e);if(f['empty'])return console[a7(0xf7)]('âŒ\x20No\x20player\x20data\x20found\x20for\x20'+a+'\x20in\x20'+c),null;const g=f['docs'][0x0]['data']();return g['eloRating']!==undefined&&(g[a7(0x149)]=g[a7(0x179)]),console['log']('âœ…\x20Found\x20player\x20data\x20for\x20'+a+':\x20ELO\x20'+g['eloRating']+a7(0x195)+g['position']),g;}catch(h){return console['error']('Error\x20getting\x20player\x20data\x20for\x20'+a+':',h),null;}}async['getPlayerRibbonsCached'](a,b){const a8=a50w;try{const c='playerRibbons'+(b==='D1'?'':b),d=doc(db,c,a),e=await getDoc(d);return e['exists']()?e[a8(0x126)]()[a8(0x120)]||{}:{};}catch(f){return console['error']('Error\x20getting\x20player\x20ribbons:',f),{};}}async['savePlayerRibbonsOptimized'](a,b,c){const a9=a50w;try{const d='playerRibbons'+(c==='D1'?'':c),e=doc(db,d,a),f=await this['getPlayerRibbonsCached'](a,c),g={...f,...b};await setDoc(e,{'username':a,'ladder':c,'ribbons':g,'lastUpdated':new Date()},{'merge':!![]});}catch(h){console[a9(0x10d)](a9(0x162),h);}}[a50w(0x133)](a,b){const aa=a50w,c=b[aa(0x11d)]||{'level':0x0},d=RIBBON_DEFINITIONS['Overachiever\x20Ribbon'][aa(0xf8)],e=d['findIndex'](g=>a<g),f=e===-0x1?d[aa(0x14e)]:e;if(f>c['level'])return{'level':f,'awardedAt':new Date()};return null;}[a50w(0x140)](a,b){const ab=a50w;if(a===0x0)return null;const c=b[ab(0x157)]||{'level':0x0};if(a>c['level'])return{'level':a,'awardedAt':new Date()};return null;}['evaluateSubGamerRibbonFromCount'](a,b){const ac=a50w,c=b['Sub-Gamer\x20Ribbon']||{'level':0x0},d=RIBBON_DEFINITIONS['Sub-Gamer\x20Ribbon']['levels'],e=d[ac(0x132)](g=>a<g),f=e===-0x1?d['length']:e;if(f>c[ac(0x113)])return{'level':f,'awardedAt':new Date()};return null;}['evaluateExplorerRibbonFromCount'](a,b){const ad=a50w,c=b[ad(0x19a)]||{'level':0x0},d=RIBBON_DEFINITIONS['Explorer\x20Ribbon']['levels'],e=d['findIndex'](g=>a<g),f=e===-0x1?d[ad(0x14e)]:e;if(f>c[ad(0x113)])return{'level':f,'awardedAt':new Date()};return null;}[a50w(0x1ab)](a,b){const ae=a50w,c=b[ae(0x10f)]||{'level':0x0},d=RIBBON_DEFINITIONS['Socialite\x20Ribbon']['levels'],e=d['findIndex'](g=>a<g),f=e===-0x1?d['length']:e;if(f>c['level'])return{'level':f,'awardedAt':new Date()};return null;}[a50w(0x135)](a,b,c){const af=a50w;if(c<0x32)return console[af(0xf7)](af(0x1a5)+c+')'),null;const d=b['Brick\x20Wall']||{'level':0x0},e=RIBBON_DEFINITIONS[af(0x15d)][af(0xf8)],f=e['findIndex'](h=>a<h),g=f===-0x1?e[af(0x14e)]:f;if(g>d[af(0x113)])return console[af(0xf7)](af(0x1a8)+a['toFixed'](0x1)+'%\x20win\x20rate\x20over\x20'+c+'\x20matches'),{'level':g,'awardedAt':new Date(),'winRate':a,'matchesPlayed':c};return null;}[a50w(0x148)](a,b){const ag=a50w,c=b[ag(0x104)]||{'level':0x0},d=RIBBON_DEFINITIONS['Collector\x20Ribbon']['levels'],e=d['findIndex'](g=>a<g),f=e===-0x1?d[ag(0x14e)]:e;if(f>c['level'])return{'level':f,'awardedAt':new Date()};return null;}[a50w(0x17e)](a,b){const ah=a50w;if(a===0x0)return null;const c=b[ah(0x134)]||{'level':0x0},d=RIBBON_DEFINITIONS[ah(0x134)]['levels'];let e=0x0;for(let f=0x0;f<d['length'];f++){if(a>=d[f])e=f+0x1;else break;}if(e>c['level'])return console[ah(0xf7)]('ðŸ†\x20Underdog\x20Ribbon\x20upgrade:\x20Level\x20'+c[ah(0x113)]+'\x20â†’\x20'+e+'\x20('+a+ah(0x187)),{'level':e,'awardedAt':new Date()};return null;}}function getPlayerRankTier(a){if(a===undefined||a===null)return 0x0;const b=Number(a);if(isNaN(b))return 0x0;if(b>=0x7d0)return 0x4;if(b>=0x708)return 0x3;if(b>=0x640)return 0x2;if(b>=0x578)return 0x1;return 0x0;}function getRankTierName(a){const ai=a50w,b=['Unranked','Bronze',ai(0x1aa),ai(0x139),ai(0xfd)];return b[a]||'Unranked';}const ribbonSystem=new RibbonSystem(),ribbonCache=new RibbonCacheManager(),matchCache=new MatchCacheManager();function a50b(a,b){const c=a50a();return a50b=function(d,e){d=d-0xf6;let f=c[d];if(a50b['GvjvCo']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a50b['nbRiln']=g,a=arguments,a50b['GvjvCo']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a50b['nbRiln'](f),a[i]=f):f=j,f;},a50b(a,b);}typeof window!==a50w(0x12c)&&(window[a50w(0x145)]=()=>{return{'ribbon':ribbonCache['getCacheStats'](),'match':matchCache['getCacheStats']()};});export async function evaluatePlayerRibbons(a,b='D1'){return await ribbonSystem['evaluateAllRibbonsForPlayerOptimized'](a,b);}export function getRibbonHTML(a,b){const aj=a50w,c=RIBBON_DEFINITIONS[a];if(!c)return'';const d=b[aj(0x113)]||0x1,e=a['replace']('\x20Ribbon','')['replace'](aj(0x188),''),f=i=>{const ak=aj;if(i<=0x1)return ak(0x163);if(i<=0x2)return'level-2';if(i<=0x3)return ak(0x17d);if(i<=0x4)return ak(0x16a);return ak(0x165);},g=j=>{const al=aj;if(j<=0x1)return'';const k=[];if(j>=0x2&&j<=0x4){const l=Math[al(0x130)](j-0x1,0x3);for(let m=0x0;m<l;m++){k[al(0x194)](al(0x129));}}if(j>=0x5&&j<=0x7){k[al(0x194)](al(0x176));const n=Math[al(0x130)](j-0x5,0x2);for(let o=0x0;o<n;o++){k['push'](al(0x129));}}return j>=0x8&&k[al(0x194)]('<i\x20class=\x22fas\x20fa-star\x20ribbon-device\x20gold-star\x22></i>'),k[al(0x14e)]>0x0?'<div\x20class=\x22ribbon-devices\x22>'+k[al(0x1ac)]('')+'</div>':'';},h=c['description']+'\x20-\x20Level\x20'+d;return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22military-ribbon\x22\x20data-tooltip=\x22'+h+aj(0x144)+c[aj(0x17a)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+a+aj(0x197)+c['color']+aj(0x151)+e[aj(0x182)](0x0,0x6)+aj(0x105)+g(d)+aj(0xf9)+e+aj(0x124)+(d>0x1?aj(0x154)+f(d)+'\x22>'+d+aj(0x122):'')+aj(0xfa);}