const a9n=a9d;function a9c(){const C=['zxHWzwn0zwrty29YzvDPBM5LCG','z2v0rwXLBwvUDej5swq','i0zgrdCWma','odK4ndqZsgvXzgvr','mLHOwuPOqW','DgfIBgu','y2fSy3vSyxrLtwf0y2G','id0G','zwXV','BgvUz3rO','DxnLCM5HBwu','mtv4vMLoELm','DxbKyxrLrhjVCgrVD25Z','ChjVDg90ExbL','mJm3nZzUAKrcqvK','Bg9ZzxiTy3vYCMvUDc1LBg8','zgf0yq','q3vYCMvUDcbfte86ia','z2v0','cGPgB3jTDwXHifvZzwq6cIaGtMv3ifjHDgLUzYa9ie9SzcbsyxrPBMCGkYbllwzHy3rVCIddLYaOqwn0DwfSifnJB3jLic0GrxHWzwn0zwqGu2nVCMuPcIaGsY1Mywn0B3iGpsaZmGOGiefJDhvHBcbty29YztOGv2LUBMvYid0GmsWGtg9ZzxiGpsaWcIaGcG','iIbKyxrHlwvSBZ0I','iIbJBgfZCZ0I','jsbJAgfUy2uGDg8GD2LUkqOGia','ywn0AxzL','mti0mteYn21uAMfIqG','yMXVy2S','zgLZCgXHEunHBgn1Bgf0Aw9Urgv0ywLSCW','D2fYBG','pg9WDgLVBIb2ywX1zt0IiJ5tzwXLy3qGysbWBgf5zxiUlI48l29WDgLVBJ4','zxHJzxb0Aw9U','zM9YrwfJAa','i0nen0yZmG','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','x19WCM90B19F','lMXHzgrLCI1IDg4','Bg9ZzxiTBMv3lwvSBW','z2v0ruXpq29SB3i','DMfSDwu','mJCZmZu0ne5pD2HzEG','CMvTB3zL','Bg9N','zxjYB3i','mJbPzNjXsgq','zNjVBq','y3vYCMvUDeXHzgrLCG','yMLUza','Cg93','ywrK','CgXHEwvYCW','zw1LCMfSza','D2LUBMvYq2HHBMDL','z29Sza','Aw5PDa','Dg9tDhjPBMC','C2L6zq','Aw5Uzxjive1m','CxvLCNLtzwXLy3rVCKfSBa','C2fUzgjVEa','zwXVuMf0Aw5N','cIaGcKv4CgvJDgvKifnJB3jLCZOkica','CgXHEwvYC0qY','BM9Uzq','BMv3v2LUBMvYuMf0Aw5N','BgfKzgvY','y2fSy3vSyxrPB24Tzgv0ywLSCW','CMv0DxjUicHMDw5JDgLVBIGPia','BMv3tg9ZzxjsyxrPBMC','Dgv4DenVBNrLBNq','C3r5Bgu','y2XHC3nmAxn0','Bg9ZzxjdAgfUz2u','y2HHBMDL','D2LUBMvYlwn1CNjLBNqTzwXV','C2v0DxbfDMvUDeXPC3rLBMvYCW','Dw5Yyw5Rzwq','DgfYz2v0','ywrKrxzLBNrmAxn0zw5LCG','mtGWmdv5uMTuwwS','zgvZyW','ndCWodjTtM9IC04','cIaG','Aw5MBW','zgLZCgXHEu1HDgnOuMvZDwX0','tg9HzgvKia','Bg9HzfbSyxLLCNm','mtjTr0fUCNC','CM91BMq','cIaGicaGicaG','tMv3ievmtZOG','mtKYsvvgqMDQ','yxbWBhK','z2v0ruXpuMfUA0nSyxnZ','C29YDa','y29UC29Szq','mJe2mZu3owfrA1DOvW','Bg9ZzxiTBMfTzq','DhjHy2u','ugXHEwvYig5VDcbMB3vUza','ihbSyxLLCNmGzNjVBsa'];a9c=function(){return C;};return a9c();}(function(a,b){const i=a9d,c=a();while(!![]){try{const d=-parseInt(i(0x173))/0x1+parseInt(i(0x18d))/0x2*(parseInt(i(0x18c))/0x3)+parseInt(i(0x197))/0x4*(parseInt(i(0x194))/0x5)+-parseInt(i(0x17f))/0x6*(parseInt(i(0x175))/0x7)+-parseInt(i(0x1af))/0x8+parseInt(i(0x1a1))/0x9*(parseInt(i(0x1b3))/0xa)+-parseInt(i(0x184))/0xb*(-parseInt(i(0x17b))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a9c,0x3475e));const a9b=(function(){let a=!![];return function(b,c){const d=a?function(){const j=a9d;if(c){const e=c[j(0x180)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a9a=a9b(this,function(){const l=a9d,a=function(){const k=a9d;let f;try{f=Function(k(0x167)+k(0x1a9)+');')();}catch(g){f=window;}return f;},b=a(),c=b[l(0x183)]=b[l(0x183)]||{},d=[l(0x1b1),l(0x1a4),l(0x177),l(0x1b2),l(0x1a6),l(0x18e),l(0x186)];for(let e=0x0;e<d[l(0x192)];e++){const f=a9b['constructor'][l(0x196)][l(0x1b6)](a9b),g=d[e],h=c[g]||f;f[l(0x1aa)]=a9b['bind'](a9b),f[l(0x1be)]=h['toString']['bind'](h),c[g]=f;}});a9a();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a9d(a,b){const c=a9c();return a9d=function(d,e){d=d-0x166;let f=c[d];if(a9d['TfKQlC']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a9d['RZEqgH']=g,a=arguments,a9d['TfKQlC']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a9d['RZEqgH'](f),a[i]=f):f=j,f;},a9d(a,b);}class ELOCalculator{constructor(){const m=a9d;this[m(0x1b5)]='D1',this['players']=new Map(),this[m(0x1bd)]();}[a9n(0x1bd)](){this['setupEventListeners'](),this['loadPlayers']();}[a9n(0x16f)](){const o=a9n;document[o(0x1c1)]('.ladder-btn')['forEach'](a=>{const p=o;a[p(0x172)]('click',b=>{const q=p;document[q(0x1c1)](q(0x1ab))[q(0x1a7)](c=>c[q(0x16b)][q(0x1b0)](q(0x1a0))),b[q(0x171)]['classList'][q(0x1b8)](q(0x1a0)),this['currentLadder']=b[q(0x171)]['dataset'][q(0x1c8)],this[q(0x17a)]();});}),document[o(0x18a)]('refresh-players')[o(0x172)]('click',()=>{this['loadPlayers']();}),document['getElementById']('winner-select')[o(0x172)](o(0x16d),()=>this['calculateMatch']()),document['getElementById']('loser-select')[o(0x172)]('change',()=>this[o(0x18f)]());}async['loadPlayers'](){const r=a9n;try{this[r(0x195)]('<option\x20value=\x22\x22>Loading\x20players...</option>');const a=this['currentLadder']==='D1'?'players':this[r(0x1b5)]==='D2'?r(0x1c5):'playersD3',b=collection(db,a),c=query(b,orderBy(r(0x1c3),r(0x174))),d=await getDocs(c);this['players']['clear'](),d['forEach'](e=>{const s=r,f=e[s(0x199)]();f[s(0x193)]&&this[s(0x1b9)]['set'](f['username'],{'id':e['id'],'username':f[s(0x193)],'elo':parseInt(f['eloRating'])||0x4b0,'position':f['position']||0x3e7});}),this[r(0x195)](),console['log'](r(0x179)+this['players'][r(0x1bf)]+r(0x188)+this[r(0x1b5)]+'\x20ladder');}catch(e){console[r(0x1b2)]('Error\x20loading\x20players:',e),this[r(0x195)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}['updateDropdowns'](a=null){const t=a9n,b=document['getElementById']('winner-select'),c=document['getElementById']('loser-select');if(a){b['innerHTML']=a,c[t(0x1c0)]=a;return;}let d=t(0x1a5);const e=Array[t(0x1b4)](this[t(0x1b9)]['values']())[t(0x182)]((f,g)=>g[t(0x191)]-f['elo']);e['forEach'](f=>{const u=t,g=this['getELORankClass'](f['elo']);d+='<option\x20value=\x22'+f['username']+u(0x19d)+f[u(0x191)]+u(0x19e)+g+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+f[u(0x193)]+'\x20('+f[u(0x191)]+'\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>';}),b['innerHTML']=d,c[t(0x1c0)]=d;}['calculateMatch'](){const v=a9n,a=document[v(0x18a)]('winner-select'),b=document[v(0x18a)]('loser-select'),c=a['value'],d=b[v(0x1ae)];if(!c||!d){document['getElementById']('match-result')[v(0x16a)]['display']=v(0x1c6),document[v(0x18a)](v(0x166))['style']['display']='none';return;}if(c===d){alert('Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser');return;}const e=this['players'][v(0x19b)](c),f=this['players'][v(0x19b)](d);if(!e||!f){console[v(0x1b2)](v(0x187));return;}const g=this['calculateELO'](e['elo'],f[v(0x191)]);this['displayMatchResult'](e,f,g),this[v(0x1a3)](e,f,g);}['calculateELO'](a,b,c=0x20){const w=a9n,d=0x1/(0x1+Math['pow'](0xa,(b-a)/0x190)),e=0x1/(0x1+Math[w(0x1b7)](0xa,(a-b)/0x190)),f=a+c*(0x1-d),g=b+c*(0x0-e);return{'winnerChange':Math[w(0x17c)](f-a),'loserChange':Math[w(0x17c)](g-b),'newWinnerRating':Math[w(0x17c)](f),'newLoserRating':Math[w(0x17c)](g),'expectedScoreWinner':d,'expectedScoreLoser':e};}[a9n(0x178)](a,b,c){const x=a9n;document[x(0x18a)]('winner-name')['textContent']=a['username'],document['getElementById'](x(0x16e))[x(0x169)]=x(0x19a)+a[x(0x191)],document[x(0x18a)]('winner-elo-change')['textContent']='+'+c[x(0x1bb)],document['getElementById']('winner-new-elo')['textContent']=x(0x17e)+c[x(0x1c7)],document['getElementById'](x(0x185))[x(0x169)]=b['username'],document['getElementById'](x(0x198))[x(0x169)]=x(0x19a)+b['elo'],document[x(0x18a)]('loser-elo-change')['textContent']=''+c[x(0x16c)],document[x(0x18a)](x(0x1ac))[x(0x169)]='New\x20ELO:\x20'+c['newLoserRating'];const d=this[x(0x1ad)](a['elo']),e=this[x(0x1ad)](b[x(0x191)]);document['getElementById']('winner-name')['style']['color']=d,document[x(0x18a)]('loser-name')[x(0x16a)]['color']=e,document[x(0x18a)]('match-result')['style']['display']='grid';}['displayCalculationDetails'](a,b,c){const y=a9n,d='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+a['username']+':\x20'+a[y(0x191)]+y(0x176)+b[y(0x193)]+':\x20'+b['elo']+y(0x1c4)+a[y(0x193)]+':\x20'+c[y(0x189)]['toFixed'](0x3)+'\x20('+(c[y(0x189)]*0x64)['toFixed'](0x1)+y(0x19f)+b[y(0x193)]+':\x20'+c['expectedScoreLoser']['toFixed'](0x3)+'\x20('+(c['expectedScoreLoser']*0x64)['toFixed'](0x1)+'%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'+a['username']+':\x20'+a[y(0x191)]+'\x20+\x20'+c[y(0x1bb)]+'\x20=\x20'+c[y(0x1c7)]+'\x0a\x20\x20'+b['username']+':\x20'+b[y(0x191)]+'\x20+\x20'+c['loserChange']+y(0x190)+c[y(0x168)]+y(0x19c)+(c[y(0x1bb)]>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(c[y(0x1bb)]<0x5?'Low\x20ELO\x20gain.':'')+y(0x17d);document['getElementById']('calculation-text')[y(0x169)]=d,document['getElementById'](y(0x166))[y(0x16a)]['display']=y(0x1a2);}[a9n(0x1ad)](a){const z=a9n;if(a>=0x7d0)return'#50C878';else{if(a>=0x708)return z(0x18b);else{if(a>=0x640)return'#C0C0C0';else{if(a>=0x578)return z(0x1a8);else return'#808080';}}}}[a9n(0x181)](a){const A=a9n;if(a>=0x7d0)return A(0x1ba);else{if(a>=0x708)return A(0x1bc);else{if(a>=0x640)return'silver';else{if(a>=0x578)return'bronze';else return A(0x170);}}}}}document['addEventListener']('DOMContentLoaded',()=>{const B=a9n;document['getElementById'](B(0x1c2))&&new ELOCalculator();});