const a16_0x81b6bd=a16_0x376d;(function(_0x4633ed,_0x52eb41){const _0x1128b5=a16_0x376d,_0x1e3119=_0x4633ed();while(!![]){try{const _0x3b5cdd=-parseInt(_0x1128b5(0xb5))/0x1+-parseInt(_0x1128b5(0xdb))/0x2+parseInt(_0x1128b5(0xd5))/0x3*(parseInt(_0x1128b5(0xcf))/0x4)+parseInt(_0x1128b5(0xbd))/0x5+parseInt(_0x1128b5(0xbf))/0x6+-parseInt(_0x1128b5(0xb9))/0x7+-parseInt(_0x1128b5(0xb4))/0x8*(-parseInt(_0x1128b5(0xbc))/0x9);if(_0x3b5cdd===_0x52eb41)break;else _0x1e3119['push'](_0x1e3119['shift']());}catch(_0x4d24fd){_0x1e3119['push'](_0x1e3119['shift']());}}}(a16_0x293e,0x30c81));const a16_0xe9571b=(function(){let _0x1b2010=!![];return function(_0x358670,_0x3db252){const _0x45c23c=_0x1b2010?function(){const _0x47709d=a16_0x376d;if(_0x3db252){const _0xcb52f4=_0x3db252[_0x47709d(0xcb)](_0x358670,arguments);return _0x3db252=null,_0xcb52f4;}}:function(){};return _0x1b2010=![],_0x45c23c;};}()),a16_0x49d5b1=a16_0xe9571b(this,function(){const _0x373f12=a16_0x376d;return a16_0x49d5b1[_0x373f12(0xb2)]()[_0x373f12(0xc7)](_0x373f12(0xd0))[_0x373f12(0xb2)]()[_0x373f12(0xda)](a16_0x49d5b1)[_0x373f12(0xc7)](_0x373f12(0xd0));});a16_0x49d5b1();function a16_0x376d(_0x5b8cc1,_0x2def27){const _0x569468=a16_0x293e();return a16_0x376d=function(_0x5e8765,_0x5efe84){_0x5e8765=_0x5e8765-0xae;let _0x400d9a=_0x569468[_0x5e8765];return _0x400d9a;},a16_0x376d(_0x5b8cc1,_0x2def27);}const a16_0x5efe84=(function(){let _0x51623d=!![];return function(_0x1bc361,_0x3e2952){const _0x1b2782=_0x51623d?function(){const _0x26e39a=a16_0x376d;if(_0x3e2952){const _0x416e8b=_0x3e2952[_0x26e39a(0xcb)](_0x1bc361,arguments);return _0x3e2952=null,_0x416e8b;}}:function(){};return _0x51623d=![],_0x1b2782;};}()),a16_0x5e8765=a16_0x5efe84(this,function(){const _0x380e02=a16_0x376d,_0xcdd580=function(){const _0x594956=a16_0x376d;let _0x2656ff;try{_0x2656ff=Function(_0x594956(0xd7)+_0x594956(0xc1)+');')();}catch(_0x151bca){_0x2656ff=window;}return _0x2656ff;},_0x4a3e6a=_0xcdd580(),_0x218139=_0x4a3e6a[_0x380e02(0xc5)]=_0x4a3e6a[_0x380e02(0xc5)]||{},_0x3caf06=['log',_0x380e02(0xdd),_0x380e02(0xb3),_0x380e02(0xd9),'exception',_0x380e02(0xc0),'trace'];for(let _0x212392=0x0;_0x212392<_0x3caf06['length'];_0x212392++){const _0x113007=a16_0x5efe84[_0x380e02(0xda)][_0x380e02(0xc4)][_0x380e02(0xb7)](a16_0x5efe84),_0x7d2d7d=_0x3caf06[_0x212392],_0x2e8c27=_0x218139[_0x7d2d7d]||_0x113007;_0x113007[_0x380e02(0xd2)]=a16_0x5efe84[_0x380e02(0xb7)](a16_0x5efe84),_0x113007['toString']=_0x2e8c27[_0x380e02(0xb2)]['bind'](_0x2e8c27),_0x218139[_0x7d2d7d]=_0x113007;}});a16_0x5e8765();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':a16_0x81b6bd(0xc2),'elo':0x708},{'name':a16_0x81b6bd(0xd1),'elo':0x640},{'name':a16_0x81b6bd(0xae),'elo':0x578},{'name':a16_0x81b6bd(0xdc),'elo':0x4b0}];async function getUsernameById(_0x2248c5){const _0x4517a8=a16_0x81b6bd;try{if(!_0x2248c5)return'Unknown\x20Player';const _0x119838=await getDoc(doc(db,_0x4517a8(0xcc),_0x2248c5));return _0x119838['exists']()?_0x119838[_0x4517a8(0xb6)]()[_0x4517a8(0xce)]:_0x4517a8(0xba);}catch(_0x40cb93){return console['error'](_0x4517a8(0xd8),_0x40cb93),_0x4517a8(0xba);}}function a16_0x293e(){const _0x411193=['Error\x20recording\x20ELO\x20history:','search','Error\x20fetching\x20ELO\x20history:','eloHistory','promotion','apply','players','opponent','username','57748RHOLPI','(((.+)+)+)+$','Silver','__proto__','Emerald','match','18GtmGqV','desc','return\x20(function()\x20','Error\x20fetching\x20username:','error','constructor','225296pFUbXo','Unranked','warn','docs','Bronze','all','demotion','timestamp','toString','info','2674744BWxRKb','193807RvVmab','data','bind','newElo','2581446uYKdTY','Unknown\x20Player','previousElo','18uuQFmM','592175dQepUP','map','7794tEozxt','table','{}.constructor(\x22return\x20this\x22)(\x20)','Gold','log','prototype','console'];a16_0x293e=function(){return _0x411193;};return a16_0x293e();}export async function recordEloChange({playerId:_0x537303,previousElo:_0x1ba67f,newElo:_0x17071d,opponentId:_0x1a8f5c,matchResult:_0x56027d,previousPosition:_0x3652e7,newPosition:_0x5028ad,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x41a8a1}){const _0x36c8c1=a16_0x81b6bd;try{const _0x42432c=doc(collection(db,_0x36c8c1(0xc9)));let _0x574971=_0x36c8c1(0xd4);if(isPromotion)_0x574971=_0x36c8c1(0xca);if(isDemotion)_0x574971=_0x36c8c1(0xb0);let _0xef107b='Unranked';if(_0x17071d>=0x834)_0xef107b=_0x36c8c1(0xd3);else{if(_0x17071d>=0x708)_0xef107b=_0x36c8c1(0xc2);else{if(_0x17071d>=0x640)_0xef107b='Silver';else{if(_0x17071d>=0x578)_0xef107b='Bronze';}}}return await setDoc(_0x42432c,{'type':_0x574971,'player':_0x537303,'opponent':_0x1a8f5c,'previousElo':_0x1ba67f,'newElo':_0x17071d,'change':_0x17071d-_0x1ba67f,'matchResult':_0x56027d,'previousPosition':_0x3652e7,'newPosition':_0x5028ad,'rankAchieved':_0xef107b,'timestamp':_0x41a8a1}),console[_0x36c8c1(0xc3)]('ELO\x20history\x20recorded\x20for\x20'+_0x537303),!![];}catch(_0x3437d0){console[_0x36c8c1(0xd9)](_0x36c8c1(0xc6),_0x3437d0);throw _0x3437d0;}}export async function getEloHistory(){const _0x54b709=a16_0x81b6bd;try{const _0x4837b3=collection(db,_0x54b709(0xc9)),_0x3d812c=query(_0x4837b3,orderBy(_0x54b709(0xb1),_0x54b709(0xd6))),_0x4dc350=await getDocs(_0x3d812c),_0x1efc3e=_0x4dc350[_0x54b709(0xde)][_0x54b709(0xbe)](async _0x5a8c8b=>{const _0x41f080=_0x54b709,_0x3ca118=_0x5a8c8b[_0x41f080(0xb6)](),[_0x50597f,_0x466126]=await Promise[_0x41f080(0xaf)]([getUsernameById(_0x3ca118['player']),getUsernameById(_0x3ca118[_0x41f080(0xcd)])]);return{..._0x3ca118,'playerUsername':_0x50597f,'opponentUsername':_0x466126,'change':_0x3ca118[_0x41f080(0xb8)]-_0x3ca118[_0x41f080(0xbb)],'timestamp':_0x3ca118[_0x41f080(0xb1)]};}),_0x22fbb8=await Promise[_0x54b709(0xaf)](_0x1efc3e);return{'entries':_0x22fbb8};}catch(_0x589db3){console['error'](_0x54b709(0xc8),_0x589db3);throw _0x589db3;}}export function resetPagination(){lastVisible=null;}