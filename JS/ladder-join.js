const a25_0x182fe4=(function(){let _0x39121f=!![];return function(_0x989e91,_0x3553de){const _0x177594=_0x39121f?function(){if(_0x3553de){const _0x7d39e1=_0x3553de['apply'](_0x989e91,arguments);return _0x3553de=null,_0x7d39e1;}}:function(){};return _0x39121f=![],_0x177594;};}()),a25_0x5e2725=a25_0x182fe4(this,function(){const _0x52bfd5=a25_0x4e86,_0x519484=function(){let _0x481d99;try{_0x481d99=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x376711){_0x481d99=window;}return _0x481d99;},_0x336788=_0x519484(),_0x4e7922=_0x336788[_0x52bfd5(0x20b)]=_0x336788['console']||{},_0x5e0859=['log','warn','info',_0x52bfd5(0x20a),_0x52bfd5(0x211),'table','trace'];for(let _0x1e01dd=0x0;_0x1e01dd<_0x5e0859['length'];_0x1e01dd++){const _0x235d6f=a25_0x182fe4['constructor'][_0x52bfd5(0x20c)]['bind'](a25_0x182fe4),_0xdddc09=_0x5e0859[_0x1e01dd],_0x51615f=_0x4e7922[_0xdddc09]||_0x235d6f;_0x235d6f[_0x52bfd5(0x202)]=a25_0x182fe4['bind'](a25_0x182fe4),_0x235d6f['toString']=_0x51615f['toString']['bind'](_0x51615f),_0x4e7922[_0xdddc09]=_0x235d6f;}});a25_0x5e2725();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';function a25_0x4e86(_0x46db4d,_0x198ab8){const _0x5e2725=a25_0x1a5d();return a25_0x4e86=function(_0x182fe4,_0x4b7e5d){_0x182fe4=_0x182fe4-0x1ee;let _0x1a5d79=_0x5e2725[_0x182fe4];return _0x1a5d79;},a25_0x4e86(_0x46db4d,_0x198ab8);}let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x53f57a=a25_0x4e86,_0x9d6fb7=document['getElementById']('d1-switch'),_0x371b50=document['getElementById'](_0x53f57a(0x204));console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x9d6fb7),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x371b50);function _0x1b2283(){const _0x4513ed=_0x53f57a;document[_0x4513ed(0x20d)](_0x4513ed(0x201))[_0x4513ed(0x1fc)](_0x4bfdb7=>{_0x4bfdb7['addEventListener']('change',_0x5d5bbc=>{const _0x293097=a25_0x4e86;_0x5d5bbc['target'][_0x293097(0x217)]&&(currentLadder=_0x5d5bbc['target'][_0x293097(0x1fa)],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x1b2283();const _0x18c738=document['getElementById']('join-ladder-button');_0x18c738&&_0x18c738[_0x53f57a(0x1ee)]('click',handleJoinLadder),onAuthStateChanged(auth,_0x4baa59=>{if(_0x4baa59)checkUserLadderStatus();else{const _0x344f83=document['getElementById']('ladder-join-prompt');_0x344f83&&(_0x344f83['style']['display']='none');}});});function getCollectionName(_0x2e2f10){const _0x1138db=a25_0x4e86;switch(_0x2e2f10?.[_0x1138db(0x1f1)]()){case'D1':return'players';case'D2':return'playersD2';case'D3':return'playersD3';case _0x1138db(0x1ff):case _0x1138db(0x1f0):return'playersDuos';case'CTF':return _0x1138db(0x200);default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x2e2f10+',\x20defaulting\x20to\x20D1');return'players';}}function a25_0x1a5d(){const _0x39427f=['addEventListener','log','DUO','toUpperCase','trim','ladder-join-status\x20success','none','Successfully\x20joined\x20the\x20','Error\x20checking\x20','Please\x20enter\x20your\x20username\x20to\x20confirm.','getElementById','Error\x20joining\x20ladder:','value','location','forEach','className','position','DUOS','playersCTF','input[name=\x22ladder\x22]','__proto__','username','d2-switch','getIdToken','tiny-join-button','join-username-input','Error\x20joining\x20ladder:\x20','display','error','console','prototype','querySelectorAll','disabled','reload','\x22\x20to\x20confirm.','exception','join-ladder-type','block','textContent','uid','style','checked','ladder-join-status\x20error','email'];a25_0x1a5d=function(){return _0x39427f;};return a25_0x1a5d();}async function checkUserLadderStatus(){const _0x3ad5ae=a25_0x4e86;console[_0x3ad5ae(0x1ef)]('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x4d4e69=auth['currentUser'],_0x59170b=document[_0x3ad5ae(0x1f8)]('ladder-join-prompt'),_0x1b1862=document[_0x3ad5ae(0x1f8)](_0x3ad5ae(0x212)),_0x38e5da=document['getElementById'](_0x3ad5ae(0x206));if(!_0x4d4e69||!_0x4d4e69['uid']||!_0x59170b||!_0x1b1862||!_0x38e5da){if(_0x59170b)_0x59170b['style']['display']='none';if(_0x38e5da)_0x38e5da['style'][_0x3ad5ae(0x209)]='none';return;}try{try{await _0x4d4e69[_0x3ad5ae(0x205)](![]);}catch(_0x10a51d){console['error']('Authentication\x20verification\x20failed:',_0x10a51d),_0x59170b[_0x3ad5ae(0x216)]['display']='none',_0x38e5da[_0x3ad5ae(0x216)]['display']='none';return;}const _0x36f7bd=getCollectionName(currentLadder),_0x5a4297=doc(db,_0x36f7bd,_0x4d4e69[_0x3ad5ae(0x215)]),_0x30fc9d=await getDoc(_0x5a4297);if(_0x30fc9d['exists']())_0x59170b['style'][_0x3ad5ae(0x209)]='none',_0x38e5da['style']['display']=_0x3ad5ae(0x1f4);else{_0x59170b[_0x3ad5ae(0x216)][_0x3ad5ae(0x209)]='none',_0x38e5da['style']['display']='block',_0x1b1862[_0x3ad5ae(0x214)]=currentLadder,_0x38e5da['onclick']=()=>{const _0x33b546=_0x3ad5ae;_0x59170b['style']['display']===_0x33b546(0x213)?_0x59170b[_0x33b546(0x216)]['display']=_0x33b546(0x1f4):_0x59170b[_0x33b546(0x216)]['display']='block';};const _0x597e01=document['getElementById'](_0x3ad5ae(0x207)),_0xf44b99=document['getElementById']('ladder-join-status');if(_0x597e01)_0x597e01['value']='';_0xf44b99&&(_0xf44b99[_0x3ad5ae(0x214)]='',_0xf44b99['className']='ladder-join-status');}}catch(_0x456e7a){console['error']('Error\x20checking\x20ladder\x20status:',_0x456e7a),_0x59170b['style']['display']='none',_0x38e5da['style']['display']=_0x3ad5ae(0x1f4);}}async function handleJoinLadder(){const _0x4560d6=a25_0x4e86,_0xcb1129=auth['currentUser'],_0x35731e=document['getElementById']('join-ladder-button'),_0x78e070=document['getElementById']('ladder-join-status'),_0x100874=document['getElementById']('join-username-input');if(!_0xcb1129||!_0xcb1129['uid']){_0x78e070['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x78e070[_0x4560d6(0x1fd)]=_0x4560d6(0x218);return;}try{await _0xcb1129['getIdToken'](!![]);}catch(_0x163d48){console[_0x4560d6(0x20a)]('Authentication\x20error:',_0x163d48),_0x78e070[_0x4560d6(0x214)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x78e070['className']='ladder-join-status\x20error';return;}if(!_0x100874||!_0x100874['value'][_0x4560d6(0x1f2)]()){_0x78e070['textContent']=_0x4560d6(0x1f7),_0x78e070['className']='ladder-join-status\x20error';return;}try{_0x35731e['disabled']=!![],_0x78e070['textContent']='Verifying\x20username...',_0x78e070['className']='ladder-join-status\x20loading';let _0x297b17='',_0x1194a8=null;const _0x3a69f1=['players','playersD2','playersD3','playersDuos','playersCTF','nonParticipants'];for(const _0xa62169 of _0x3a69f1){try{const _0x5e29db=doc(db,_0xa62169,_0xcb1129[_0x4560d6(0x215)]),_0x147fe9=await getDoc(_0x5e29db);if(_0x147fe9['exists']()){_0x1194a8=_0x147fe9['data']();if(_0x1194a8[_0x4560d6(0x203)]){_0x297b17=_0x1194a8['username'];break;}}}catch(_0x3cf554){console['error'](_0x4560d6(0x1f6)+_0xa62169+':',_0x3cf554);}}!_0x297b17&&_0xcb1129[_0x4560d6(0x219)]&&(_0x297b17=_0xcb1129['email']['split']('@')[0x0]);if(!_0x297b17){_0x78e070[_0x4560d6(0x214)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x78e070['className']='ladder-join-status\x20error',_0x35731e['disabled']=![];return;}const _0x5b22fb=_0x100874[_0x4560d6(0x1fa)]['trim']();if(_0x297b17&&_0x5b22fb['toLowerCase']()!==_0x297b17['toLowerCase']()){_0x78e070['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x297b17+_0x4560d6(0x210),_0x78e070['className']=_0x4560d6(0x218),_0x35731e['disabled']=![];return;}_0x78e070['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x19df8c=getCollectionName(currentLadder),_0xac91bd=doc(db,_0x19df8c,_0xcb1129['uid']),_0x56765a=await getDoc(_0xac91bd);if(_0x56765a['exists']()){_0x78e070[_0x4560d6(0x214)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x78e070['className']=_0x4560d6(0x218),_0x35731e[_0x4560d6(0x20e)]=![];return;}try{await _0xcb1129['getIdToken'](!![]);}catch(_0x508f19){_0x78e070['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x78e070[_0x4560d6(0x1fd)]='ladder-join-status\x20error',_0x35731e['disabled']=![];return;}const _0x17cbf3=_0x297b17,_0x11ba4c=collection(db,_0x19df8c),_0x1d9a80=query(_0x11ba4c,orderBy(_0x4560d6(0x1fe),'desc'),limit(0x1)),_0x33f892=await getDocs(_0x1d9a80);let _0x175f27=0x1;if(!_0x33f892['empty']){const _0x5b9fcd=_0x33f892['docs'][0x0]['data']();_0x175f27=(_0x5b9fcd['position']||0x0)+0x1;}const _0x12e1a4={'username':_0x17cbf3,'email':_0xcb1129['email'],'eloRating':0x4b0,'position':_0x175f27,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0xac91bd,_0x12e1a4),currentLadder==='DUOS'?_0x78e070['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x78e070['textContent']=_0x4560d6(0x1f5)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x78e070[_0x4560d6(0x1fd)]=_0x4560d6(0x1f3),setTimeout(()=>{const _0x5d3a5d=_0x4560d6;window[_0x5d3a5d(0x1fb)][_0x5d3a5d(0x20f)]();},0x7d0);}catch(_0x4b7315){console['error'](_0x4560d6(0x1f9),_0x4b7315),_0x78e070['textContent']=_0x4560d6(0x208)+_0x4b7315['message'],_0x78e070['className']='ladder-join-status\x20error',_0x35731e['disabled']=![];}}