const a25_0x3d0c19=a25_0x4629,a25_0xc03323=(function(){let _0x354070=!![];return function(_0x35f393,_0x2fd63f){const _0xfa19b3=_0x354070?function(){if(_0x2fd63f){const _0x5a0384=_0x2fd63f['apply'](_0x35f393,arguments);return _0x2fd63f=null,_0x5a0384;}}:function(){};return _0x354070=![],_0xfa19b3;};}()),a25_0x558cf6=a25_0xc03323(this,function(){const _0xa61733=a25_0x4629;let _0x1b68e8;try{const _0x51c43a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1b68e8=_0x51c43a();}catch(_0x26bf2e){_0x1b68e8=window;}const _0x5d8c7c=_0x1b68e8['console']=_0x1b68e8['console']||{},_0x48a612=['log','warn','info','error',_0xa61733(0x9c),'table',_0xa61733(0xbd)];for(let _0x30e8fc=0x0;_0x30e8fc<_0x48a612[_0xa61733(0xbe)];_0x30e8fc++){const _0xf5cd4c=a25_0xc03323['constructor']['prototype']['bind'](a25_0xc03323),_0x2a68db=_0x48a612[_0x30e8fc],_0x16f53c=_0x5d8c7c[_0x2a68db]||_0xf5cd4c;_0xf5cd4c[_0xa61733(0xe1)]=a25_0xc03323['bind'](a25_0xc03323),_0xf5cd4c['toString']=_0x16f53c['toString'][_0xa61733(0xa8)](_0x16f53c),_0x5d8c7c[_0x2a68db]=_0xf5cd4c;}});a25_0x558cf6();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x51c4d6=0x1){const _0x6ac554=a25_0x4629;try{document['getElementById'](_0x6ac554(0xeb))['style']['display']='block';const _0x2ea997=await getLadderData(_0x51c4d6);_0x2ea997['sort']((_0x3f3b56,_0x3d8b5d)=>_0x3d8b5d['elo']-_0x3f3b56['elo']);const _0x2d1342=_0x2ea997['map'](_0x49d3f7=>_0x49d3f7['id']),_0x145068=await getEloHistoryBatch(_0x2d1342,_0x51c4d6),_0xc9354=_0x2ea997[_0x6ac554(0xf7)]((_0x4b0dba,_0x3e34e6)=>{const _0x42f9ee=_0x6ac554,_0x3c3657=_0x145068[_0x4b0dba['id']]||[],_0x4d7284=_0x3c3657['sort']((_0x4829ac,_0x5bf723)=>new Date(_0x5bf723['date'])-new Date(_0x4829ac['date']))['slice'](0x0,0x5);return{..._0x4b0dba,'rank':_0x3e34e6+0x1,'lastMatches':_0x4d7284,'recentActivity':_0x4d7284[_0x42f9ee(0xbe)]>0x0};});renderLadder(_0xc9354),setupRealTimeUpdates(_0x51c4d6);}catch(_0x59dca4){console['error']('Error\x20loading\x20ladder\x20data:',_0x59dca4),document['getElementById'](_0x6ac554(0xe6))[_0x6ac554(0xb8)]='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById'](_0x6ac554(0xeb))['style'][_0x6ac554(0xe2)]=_0x6ac554(0xc9);}}function setupRealTimeUpdates(_0x30b491=0x1){const _0x1fd6c1=a25_0x4629;activeListeners['forEach'](_0x4da460=>_0x4da460()),activeListeners=[];const _0xd1e7ac=_0x30b491===0x1?'players':'playersD'+_0x30b491,_0x1f24ee=_0x30b491===0x1?'matches':'matchesD'+_0x30b491,_0x3dc24e=new Date();_0x3dc24e['setDate'](_0x3dc24e['getDate']()-0x1);const _0x45f8bb=setupEfficientListener(_0x1f24ee,[where(_0x1fd6c1(0x97),'>=',_0x3dc24e['toISOString']()),limit(0xa),orderBy('date',_0x1fd6c1(0x104))],async _0x2ebafe=>{_0x2ebafe['length']>0x0&&await loadLadderData(_0x30b491);});activeListeners['push'](_0x45f8bb);}export function cleanupListeners(){activeListeners['forEach'](_0x2590c0=>_0x2590c0()),activeListeners=[];}function renderLadder(_0x3cce5e){const _0x4f91b3=a25_0x4629,_0x30b292=document['getElementById']('ladder-container');_0x30b292['innerHTML']='',_0x3cce5e[_0x4f91b3(0xf4)](_0xcc1d18=>{const _0x3dbd05=_0x4f91b3,_0x1ecd5f=document[_0x3dbd05(0x100)](_0x3dbd05(0xad));_0x1ecd5f['className']=_0x3dbd05(0xee),_0x1ecd5f[_0x3dbd05(0x10c)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0xcc1d18[_0x3dbd05(0xb9)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0xcc1d18['username']||_0xcc1d18['id'])+_0x3dbd05(0xff)+_0xcc1d18['elo']+_0x3dbd05(0xbb)+(_0xcc1d18[_0x3dbd05(0xb0)]?'active':_0x3dbd05(0xf3))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xcc1d18['recentActivity']?'Active':'Inactive')+_0x3dbd05(0xaf),_0x30b292['appendChild'](_0x1ecd5f);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x791381=![]){const _0x5a196e=a25_0x4629,_0x22332b=document[_0x5a196e(0xed)](_0x5a196e(0x10b));if(!_0x22332b){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x22332b[_0x5a196e(0x10c)]='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x4bc413=Date['now']();if(!_0x791381&&playerCache[_0x5a196e(0xc2)]&&_0x4bc413-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x272ae2=collection(db,_0x5a196e(0x9a)),_0x3c8bcd=await getDocs(_0x272ae2),_0x1aa604=[];_0x3c8bcd[_0x5a196e(0xf4)](_0x1f37ea=>{const _0x37f00d=_0x5a196e,_0x1f57e0=_0x1f37ea['data']();_0x1aa604[_0x37f00d(0xd1)]({..._0x1f57e0,'id':_0x1f37ea['id'],'elo':_0x1f57e0['eloRating']||0x0,'position':_0x1f57e0['position']||Number['MAX_SAFE_INTEGER']});});const _0x4ef180=collection(db,'userProfiles'),_0x59cd0a=await getDocs(_0x4ef180),_0x58052d=new Map();_0x59cd0a[_0x5a196e(0xf4)](_0x6e092d=>{const _0x1c8c15=_0x5a196e,_0x103cb5=_0x6e092d[_0x1c8c15(0xc2)]();_0x103cb5['username']&&_0x58052d['set'](_0x103cb5[_0x1c8c15(0xf5)][_0x1c8c15(0x96)](),_0x103cb5);}),_0x1aa604['forEach'](_0x1bfc49=>{const _0x1be8cb=_0x5a196e,_0x51a8d7=_0x1bfc49['username']?.['toLowerCase']();if(_0x51a8d7&&_0x58052d['has'](_0x51a8d7)){const _0x2fbf42=_0x58052d['get'](_0x51a8d7);_0x2fbf42[_0x1be8cb(0xe3)]&&(_0x1bfc49['country']=_0x2fbf42['country'][_0x1be8cb(0x96)]());}});const _0x5d54c0=_0x1aa604['map'](_0xee9f0b=>_0xee9f0b['username']),_0xcd2ef5=await fetchBatchMatchStats(_0x5d54c0);_0x1aa604['sort']((_0x3c1cff,_0x17d743)=>{const _0x19d007=_0x5a196e,_0x5d5f89=_0xcd2ef5['get'](_0x3c1cff[_0x19d007(0xf5)])?.[_0x19d007(0x101)]||0x0,_0x27c847=_0xcd2ef5[_0x19d007(0xbf)](_0x17d743['username'])?.['totalMatches']||0x0;if(_0x5d5f89===0x0!==(_0x27c847===0x0))return _0x5d5f89===0x0?0x1:-0x1;return(_0x3c1cff[_0x19d007(0xf8)]||0x3e7)-(_0x17d743['position']||0x3e7);}),_0x1aa604['forEach']((_0x33a70d,_0x15493e)=>{_0x33a70d['position']=_0x15493e+0x1;}),playerCache['data']=_0x1aa604,playerCache['timestamp']=_0x4bc413,updateLadderDisplay(_0x1aa604,_0xcd2ef5);}catch(_0x16e4cf){console['error']('Error\x20loading\x20ladder:',_0x16e4cf),_0x22332b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x16e4cf[_0x5a196e(0x105)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x21ab45){const _0x58d3ec=a25_0x4629,_0x489148=new Map();try{_0x21ab45['forEach'](_0x711e19=>{_0x489148['set'](_0x711e19,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x227486=collection(db,'approvedMatches'),_0x1231b2=await getDocs(_0x227486);_0x1231b2['forEach'](_0x1cf0ff=>{const _0x351453=a25_0x4629,_0x5684eb=_0x1cf0ff[_0x351453(0xc2)](),_0x424c16=_0x5684eb['winnerUsername'],_0x4f527b=_0x5684eb['loserUsername'];if(_0x21ab45['includes'](_0x424c16)){const _0x230783=_0x489148['get'](_0x424c16);_0x230783[_0x351453(0xb5)]++,_0x230783['totalMatches']++,_0x230783['totalKills']+=parseInt(_0x5684eb['winnerScore'])||0x0,_0x230783['totalDeaths']+=parseInt(_0x5684eb['loserScore'])||0x0;}if(_0x21ab45['includes'](_0x4f527b)){const _0x2efea4=_0x489148['get'](_0x4f527b);_0x2efea4[_0x351453(0x107)]++,_0x2efea4[_0x351453(0x101)]++,_0x2efea4['totalKills']+=parseInt(_0x5684eb['loserScore'])||0x0,_0x2efea4['totalDeaths']+=parseInt(_0x5684eb['winnerScore'])||0x0;}}),_0x21ab45[_0x58d3ec(0xf4)](_0x30dc60=>{const _0xa79690=_0x58d3ec,_0x2054be=_0x489148['get'](_0x30dc60);_0x2054be['kda']=_0x2054be['totalDeaths']>0x0?(_0x2054be['totalKills']/_0x2054be['totalDeaths'])['toFixed'](0x2):_0x2054be[_0xa79690(0xcb)]['toFixed'](0x2),_0x2054be['winRate']=_0x2054be[_0xa79690(0x101)]>0x0?(_0x2054be['wins']/_0x2054be['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x434e){console[_0x58d3ec(0xd9)](_0x58d3ec(0xe0),_0x434e);}return _0x489148;}function createPlayerRow(_0x5636a1,_0x519d79){const _0xbb7efb=a25_0x4629,_0x423e2a=parseFloat(_0x5636a1['elo'])||0x0;let _0x31de38='gray';if(_0x423e2a>=0x7d0)_0x31de38='#50C878';else{if(_0x423e2a>=0x708)_0x31de38='#FFD700';else{if(_0x423e2a>=0x640)_0x31de38='#b9f1fc';else _0x423e2a>=0x578&&(_0x31de38='#CD7F32');}}let _0x2543b4='';return _0x5636a1['country']&&(_0x2543b4='<img\x20src=\x22../images/flags/'+_0x5636a1['country'][_0xbb7efb(0x96)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5636a1['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0xbb7efb(0xfa)+_0x5636a1['position']+_0xbb7efb(0xcc)+encodeURIComponent(_0x5636a1[_0xbb7efb(0xf5)])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x31de38+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5636a1['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2543b4+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x31de38+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x423e2a+_0xbb7efb(0x10a)+_0x519d79[_0xbb7efb(0x101)]+_0xbb7efb(0xd3)+_0x519d79[_0xbb7efb(0xb5)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x519d79[_0xbb7efb(0x107)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x519d79['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x519d79['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x1bb012){const _0x3eecba=a25_0x4629;if(_0x1bb012>=0x7d0)return _0x3eecba(0xe8);if(_0x1bb012>=0x708)return'Gold';if(_0x1bb012>=0x640)return'Silver';if(_0x1bb012>=0x578)return _0x3eecba(0xae);return'Unranked';}function a25_0x2911(){const _0x19e1ef=['gray','hasTeam','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toLowerCase','date','active','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','players','Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents','exception','exists','target','equipped','max','d3-ladder-container','owner','warn','click','block','#C0C0C0','</span>\x20(ELO:\x20','bind','userProfiles',';\x22>','You\x27re\x20not\x20registered\x20on\x20the\x20','Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','div','Bronze','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','recentActivity','textContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','playerUsername','teammate','wins','#b9f1fc','newElo','innerText','rank','playersDuos','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20','🪙\x20Loaded\x20fresh\x20tokens\x20for','trace','length','get','d1-switch','change','data','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','body','inline','#50C878','%</td>\x0a\x20\x20\x20\x20</tr>','abs','none','has','totalKills','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','find','timestamp','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','elo-recommendation-text-d1','push',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','addEventListener','set','</span>','join','#ladder\x20thead\x20tr','error','style','),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','add','playersD2','eloRating','admin','Error\x20fetching\x20batch\x20match\x20stats:','__proto__','display','country','remove','uid','error-message','0.85em','Emerald','not-allowed','cursor','loading-indicator','onAuthStateChanged','querySelector','ladder-player','🎨\x20','Error\x20fetching\x20ELO\x20history:','getElementById','classList','inactive','forEach','username','log','map','position','playersD3','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','player','tokenName','docs','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>🔒\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>','createElement','totalMatches','#CD7F32','opacity','desc','message','d1-ladder-container','losses','includes','duos-switch','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','#ladder\x20tbody','innerHTML','pow','DOMContentLoaded'];a25_0x2911=function(){return _0x19e1ef;};return a25_0x2911();}async function getPlayersLastEloChanges(_0x55a00c){const _0x48bd94=a25_0x4629,_0x4f5b5a=new Map();_0x55a00c['forEach'](_0x576d48=>{_0x4f5b5a['set'](_0x576d48,0x0);});try{const _0x1f3967=collection(db,'players'),_0xc9c860=await getDocs(_0x1f3967),_0x1628b3=new Map(),_0x12cd7c=new Map();_0xc9c860[_0x48bd94(0xf4)](_0x4c2903=>{const _0x1e42b2=_0x48bd94,_0x42d952=_0x4c2903['data']();_0x42d952['username']&&(_0x1628b3['set'](_0x4c2903['id'],_0x42d952[_0x1e42b2(0xf5)]),_0x12cd7c[_0x1e42b2(0xd5)](_0x42d952['username']['toLowerCase'](),_0x4c2903['id']));});const _0x3ed9e5=collection(db,'eloHistory'),_0x461a49=query(_0x3ed9e5,orderBy(_0x48bd94(0xce),'desc'),limit(0x12c)),_0x53618b=await getDocs(_0x461a49);if(_0x53618b['empty'])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x4f5b5a;if(_0x53618b['docs']['length']>0x0){const _0x45340b=_0x53618b[_0x48bd94(0xfd)][0x0]['data']();if(_0x45340b[_0x48bd94(0xfb)]&&_0x1628b3['has'](_0x45340b['player'])){}}const _0x18f1ed=new Map();let _0x346f3b=0x0;_0x53618b['forEach'](_0x2b739f=>{const _0x291cd9=_0x48bd94,_0x4fc72b=_0x2b739f['data']();let _0x11deda=null;if(_0x4fc72b['player']&&_0x1628b3[_0x291cd9(0xca)](_0x4fc72b['player']))_0x11deda=_0x1628b3[_0x291cd9(0xbf)](_0x4fc72b[_0x291cd9(0xfb)]);else{if(_0x4fc72b['username']&&_0x12cd7c['has'](_0x4fc72b['username']['toLowerCase']()))_0x11deda=_0x4fc72b['username'];else _0x4fc72b['playerUsername']&&_0x12cd7c['has'](_0x4fc72b[_0x291cd9(0xb3)]['toLowerCase']())&&(_0x11deda=_0x4fc72b['playerUsername']);}_0x11deda&&_0x55a00c['includes'](_0x11deda)&&(_0x346f3b++,!_0x18f1ed[_0x291cd9(0xca)](_0x11deda)&&_0x18f1ed[_0x291cd9(0xd5)](_0x11deda,[]),_0x18f1ed[_0x291cd9(0xbf)](_0x11deda)[_0x291cd9(0xd1)]({..._0x4fc72b,'timestamp':_0x4fc72b['timestamp']?.['seconds']||0x0}));}),_0x18f1ed[_0x48bd94(0xf4)]((_0x5b9c57,_0x440ade)=>{const _0x19f857=_0x48bd94;if(_0x5b9c57['length']>0x0){_0x5b9c57['sort']((_0x23b974,_0x1a0ca5)=>_0x1a0ca5['timestamp']-_0x23b974['timestamp']);const _0x26c20a=_0x5b9c57['find'](_0x1b1a1c=>_0x1b1a1c[_0x19f857(0xc1)]!==undefined||_0x1b1a1c[_0x19f857(0xb7)]!==undefined&&_0x1b1a1c['previousElo']!==undefined||_0x1b1a1c['newEloRating']!==undefined&&_0x1b1a1c['oldEloRating']!==undefined);if(_0x26c20a){let _0x57ba75;if(_0x26c20a['change']!==undefined)_0x57ba75=parseInt(_0x26c20a[_0x19f857(0xc1)]);else{if(_0x26c20a['newElo']!==undefined&&entry['previousElo']!==undefined)_0x57ba75=parseInt(_0x26c20a['newElo'])-parseInt(_0x26c20a['previousElo']);else _0x26c20a['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x57ba75=parseInt(_0x26c20a['newEloRating'])-parseInt(_0x26c20a['oldEloRating']));}!isNaN(_0x57ba75)&&_0x57ba75!==0x0&&_0x4f5b5a['set'](_0x440ade,_0x57ba75);}}});}catch(_0x187a2b){console['error'](_0x48bd94(0xf0),_0x187a2b);}return _0x4f5b5a;}function createPlayerRowWithToken(_0x3732ee,_0x158f5a,_0x40283e){const _0x3dbd46=a25_0x4629,_0x12fb22=parseFloat(_0x3732ee['elo'])||0x0;let _0x572609=_0x3dbd46(0x93);if(_0x12fb22>=0x7d0)_0x572609='#50C878';else{if(_0x12fb22>=0x708)_0x572609='#FFD700';else{if(_0x12fb22>=0x640)_0x572609=_0x3dbd46(0xb6);else _0x12fb22>=0x578&&(_0x572609='#CD7F32');}}let _0x414099='';_0x3732ee['country']&&(_0x414099='<img\x20src=\x22../images/flags/'+_0x3732ee[_0x3dbd46(0xe3)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3732ee[_0x3dbd46(0xe3)]+_0x3dbd46(0x99));let _0x5a8fa2='';return _0x40283e&&(_0x5a8fa2='<img\x20src=\x22'+_0x40283e['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x40283e[_0x3dbd46(0xfc)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x40283e['tokenName']+'\x20'+(_0x40283e['equipped']?'(Equipped)':'')+_0x3dbd46(0xcf)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3732ee['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x3732ee[_0x3dbd46(0xf5)])+_0x3dbd46(0xc3)+_0x572609+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3732ee['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x414099+_0x3dbd46(0x95)+_0x5a8fa2+_0x3dbd46(0xb2)+_0x572609+_0x3dbd46(0xd2)+_0x12fb22+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x158f5a['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x158f5a['wins']+_0x3dbd46(0xd3)+_0x158f5a['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x158f5a['kda']+_0x3dbd46(0xd3)+_0x158f5a['winRate']+_0x3dbd46(0xc7);}async function updateLadderDisplay(_0x5128d,_0x411534=null){const _0x46dac3=a25_0x4629,_0x34135b=document[_0x46dac3(0xed)]('#ladder\x20tbody');if(!_0x34135b){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x4545e3=document['querySelector'](_0x46dac3(0xd8));_0x4545e3&&(_0x4545e3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x376e9b=_0x5128d['map'](_0x495c12=>_0x495c12['username']);!_0x411534&&(_0x411534=await fetchBatchMatchStats(_0x376e9b));let _0x57b2d7=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x57b2d7=await getTokensByUsernames(_0x376e9b),console[_0x46dac3(0xf6)](_0x46dac3(0xbc),_0x57b2d7['size'],'players'),_0x57b2d7[_0x46dac3(0xf4)]((_0x4ece61,_0x1338a4)=>{const _0x4887ae=_0x46dac3,_0x3abcfe=_0x4ece61[_0x4887ae(0xcd)](_0x42557d=>_0x42557d[_0x4887ae(0x9f)]);_0x3abcfe&&console['log']('🎯\x20'+_0x1338a4+'\x20has\x20equipped:\x20'+_0x3abcfe[_0x4887ae(0xfc)]);});}catch(_0x1d0824){console['error']('Error\x20fetching\x20tokens:',_0x1d0824);}const _0x2c0969=_0x5128d['map'](_0x1a2862=>{const _0x5d55f7=_0x46dac3,_0x4a4b32=_0x411534['get'](_0x1a2862[_0x5d55f7(0xf5)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x9f8350=_0x57b2d7[_0x5d55f7(0xbf)](_0x1a2862[_0x5d55f7(0xf5)])||[],_0x4ab2cc=getPrimaryDisplayToken(_0x9f8350);return _0x4ab2cc&&console['log'](_0x5d55f7(0xef)+_0x1a2862['username']+'\x20displaying\x20token:\x20'+_0x4ab2cc['tokenName']+'\x20(equipped:\x20'+_0x4ab2cc['equipped']+')'),createPlayerRowWithToken(_0x1a2862,_0x4a4b32,_0x4ab2cc);})[_0x46dac3(0xd7)]('');_0x34135b['innerHTML']=_0x2c0969,getPlayersLastEloChanges(_0x376e9b)['then'](_0x4d91da=>{const _0x211e16=new Map();_0x34135b['querySelectorAll']('tr')['forEach']((_0x4110a3,_0xa7d027)=>{_0xa7d027<_0x376e9b['length']&&_0x211e16['set'](_0x376e9b[_0xa7d027],_0x4110a3);}),_0x4d91da['forEach']((_0x5b82bb,_0x47a824)=>{const _0x30d7a3=a25_0x4629,_0x20c971=_0x211e16['get'](_0x47a824);if(_0x20c971&&_0x5b82bb!==0x0){const _0x517f20=_0x20c971[_0x30d7a3(0xed)]('td:nth-child(3)');if(_0x517f20){const _0x236993=_0x5b82bb>0x0?'+'+_0x5b82bb:''+_0x5b82bb,_0x5b902a=_0x517f20['querySelector']('.trend-indicator');_0x5b902a&&(_0x5b902a['textContent']=_0x236993,_0x5b902a['style']['color']=_0x5b82bb>0x0?'#4CAF50':'#F44336',_0x5b902a[_0x30d7a3(0xda)]['fontWeight']='bold',_0x5b902a['style']['fontSize']=_0x30d7a3(0xe7),_0x5b902a[_0x30d7a3(0xda)]['display']=_0x30d7a3(0xc5),_0x5b902a['style']['visibility']='visible',_0x5b902a['style'][_0x30d7a3(0x103)]='1');}}});})['catch'](_0xa96497=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0xa96497));}function initLadderToggles(){const _0x4db708=a25_0x4629,_0x1cd153=document[_0x4db708(0xf1)]('d1-switch'),_0x59abd7=document['getElementById']('d2-switch'),_0x27f3e9=document[_0x4db708(0xf1)]('d3-switch'),_0x40c229=document['getElementById'](_0x4db708(0x109)),_0xfb9646=document['getElementById'](_0x4db708(0x106)),_0x1bfdcb=document[_0x4db708(0xf1)]('d2-ladder-container'),_0x3a8e2e=document['getElementById'](_0x4db708(0xa1)),_0x312c6d=document[_0x4db708(0xf1)]('duos-ladder-container');function _0x2f5594(){const _0x186954=_0x4db708;if(_0xfb9646)_0xfb9646['classList'][_0x186954(0xe4)](_0x186954(0x98));if(_0x1bfdcb)_0x1bfdcb['classList']['remove']('active');if(_0x3a8e2e)_0x3a8e2e['classList']['remove']('active');if(_0x312c6d)_0x312c6d[_0x186954(0xda)][_0x186954(0xe2)]=_0x186954(0xc9);if(_0xfb9646)_0xfb9646['style']['display']='none';if(_0x1bfdcb)_0x1bfdcb[_0x186954(0xda)]['display']=_0x186954(0xc9);if(_0x3a8e2e)_0x3a8e2e['style']['display']='none';}_0x1cd153&&_0x1cd153['addEventListener'](_0x4db708(0xa4),()=>{const _0x2e99d6=_0x4db708;console['log']('D1\x20toggle\x20clicked'),_0x2f5594();_0xfb9646&&(_0xfb9646[_0x2e99d6(0xf2)]['add']('active'),_0xfb9646['style']['display']='block');document[_0x2e99d6(0xf1)]('elo-recommendation-text-d1')['style'][_0x2e99d6(0xe2)]='block',document['getElementById']('elo-recommendation-text-d2')['style'][_0x2e99d6(0xe2)]=_0x2e99d6(0xc9),document[_0x2e99d6(0xf1)]('elo-recommendation-text-d3')['style']['display']=_0x2e99d6(0xc9);if(_0x1cd153)_0x1cd153[_0x2e99d6(0xf2)]['add'](_0x2e99d6(0x98));if(_0x59abd7)_0x59abd7['classList']['remove']('active');if(_0x27f3e9)_0x27f3e9['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x59abd7&&_0x59abd7['addEventListener'](_0x4db708(0xa4),()=>{const _0xdabf10=_0x4db708;console['log']('D2\x20toggle\x20clicked'),_0x2f5594();_0x1bfdcb&&(_0x1bfdcb[_0xdabf10(0xf2)][_0xdabf10(0xdc)]('active'),_0x1bfdcb['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')[_0xdabf10(0xda)][_0xdabf10(0xe2)]=_0xdabf10(0xc9),document['getElementById']('elo-recommendation-text-d2')[_0xdabf10(0xda)]['display']='block',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x59abd7)_0x59abd7['classList']['add']('active');if(_0x1cd153)_0x1cd153[_0xdabf10(0xf2)]['remove']('active');if(_0x27f3e9)_0x27f3e9['classList']['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0x27f3e9&&_0x27f3e9['addEventListener']('click',()=>{const _0x103570=_0x4db708;console[_0x103570(0xf6)]('D3\x20toggle\x20clicked'),_0x2f5594();_0x3a8e2e&&(_0x3a8e2e['classList']['add']('active'),_0x3a8e2e[_0x103570(0xda)]['display']='block');document[_0x103570(0xf1)]('elo-recommendation-text-d1')['style'][_0x103570(0xe2)]='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x103570(0xc9),document['getElementById']('elo-recommendation-text-d3')['style'][_0x103570(0xe2)]=_0x103570(0xa5);if(_0x27f3e9)_0x27f3e9['classList']['add']('active');if(_0x1cd153)_0x1cd153['classList']['remove']('active');if(_0x59abd7)_0x59abd7['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x40c229&&_0x40c229['addEventListener'](_0x4db708(0xa4),()=>{const _0x508464=_0x4db708;_0x2f5594();if(_0x312c6d)_0x312c6d['style']['display']='block';displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document[_0x508464(0xf1)]('elo-recommendation-text-duos')['style'][_0x508464(0xe2)]='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document[_0x508464(0xf1)]('elo-recommendation-text-d2')['style']['display']=_0x508464(0xc9),document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';});}function a25_0x4629(_0x2a03a6,_0x197a30){const _0x558cf6=a25_0x2911();return a25_0x4629=function(_0xc03323,_0x2d4aae){_0xc03323=_0xc03323-0x93;let _0x2911f4=_0x558cf6[_0xc03323];return _0x2911f4;},a25_0x4629(_0x2a03a6,_0x197a30);}document['addEventListener'](a25_0x3d0c19(0x10e),()=>{const _0x19b0f8=a25_0x3d0c19;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document[_0x19b0f8(0xf1)](_0x19b0f8(0xd0))['style']['display']=_0x19b0f8(0xa5);});export{displayLadder};async function findBestOpponent(_0x149ee3='d1'){const _0x2021f8=a25_0x3d0c19,_0x3ccd95='elo-recommendation-text-'+_0x149ee3,_0x196eb2=document['getElementById'](_0x3ccd95);if(!_0x196eb2){console['error']('Recommendation\x20element\x20for\x20'+_0x149ee3+'\x20not\x20found');return;}const _0x517110=auth['currentUser'];if(!_0x517110){_0x196eb2['textContent']='';return;}try{const _0x4f37b2=doc(db,_0x2021f8(0xa9),_0x517110['uid']),_0x537edf=await getDoc(_0x4f37b2);if(!_0x537edf[_0x2021f8(0x9d)]()){console['log']('No\x20user\x20profile\x20found'),_0x196eb2[_0x2021f8(0xb1)]=_0x2021f8(0x9b);return;}const _0x58c0d2=_0x537edf['data'](),_0x3bbf15=_0x58c0d2['username'];if(!_0x3bbf15){_0x196eb2['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0xc52a93;switch(_0x149ee3){case'd1':_0xc52a93=_0x2021f8(0x9a);break;case'd2':_0xc52a93=_0x2021f8(0xdd);break;case'd3':_0xc52a93='playersD3';break;case'duos':_0xc52a93=_0x2021f8(0xba);break;default:_0xc52a93=_0x2021f8(0x9a);}if(_0x149ee3==='duos'){const _0xd85d3b=collection(db,_0xc52a93),_0x2ebc20=query(_0xd85d3b,where('username','==',_0x3bbf15)),_0x2b0baa=await getDocs(_0x2ebc20);if(_0x2b0baa['empty']){_0x196eb2[_0x2021f8(0xb1)]='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x1c6c86=_0x2b0baa['docs'][0x0]['data'](),_0x341e41=parseInt(_0x1c6c86['eloRating'])||0x4b0;if(_0x1c6c86['hasTeam']&&_0x1c6c86['teammate']){_0x196eb2[_0x2021f8(0x10c)]='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x1c6c86[_0x2021f8(0xb4)]+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x22acf3=await getDocs(_0xd85d3b);let _0x264be5=null,_0x13df63=-0x1;_0x22acf3['forEach'](_0x51a7f5=>{const _0x2d78ff=_0x2021f8,_0x5a4e68=_0x51a7f5['data']();if(_0x5a4e68['username']===_0x3bbf15)return;if(_0x5a4e68[_0x2d78ff(0x94)])return;const _0x4ac606=parseInt(_0x5a4e68['eloRating'])||0x4b0,_0xa96efc=Math['abs'](_0x4ac606-_0x341e41),_0x126530=Math[_0x2d78ff(0xa0)](0x0,0xc8-_0xa96efc);_0x126530>_0x13df63&&(_0x264be5=_0x5a4e68,_0x13df63=_0x126530);});if(_0x264be5){const _0x29a0e2=parseInt(_0x264be5['eloRating'])||0x4b0;let _0x351c13='gray';if(_0x29a0e2>=0x7d0)_0x351c13=_0x2021f8(0xc6);else{if(_0x29a0e2>=0x708)_0x351c13='#FFD700';else{if(_0x29a0e2>=0x640)_0x351c13=_0x2021f8(0xa6);else _0x29a0e2>=0x578&&(_0x351c13='#CD7F32');}}_0x196eb2['innerHTML']=_0x2021f8(0xac)+_0x351c13+_0x2021f8(0xaa)+_0x264be5['username']+_0x2021f8(0xa7)+_0x29a0e2+')';}else _0x196eb2['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x4e7db6=collection(db,_0xc52a93),_0x36e499=query(_0x4e7db6,where('username','==',_0x3bbf15)),_0x6e1ca8=await getDocs(_0x36e499);if(_0x6e1ca8['empty']){_0x196eb2['textContent']=_0x2021f8(0xab)+_0x149ee3['toUpperCase']()+'\x20ladder';return;}const _0x18bac=_0x6e1ca8['docs'][0x0]['data'](),_0x26723e=parseInt(_0x18bac[_0x2021f8(0xde)])||0x5dc,_0x4fe3ed=await getDocs(_0x4e7db6);let _0x46e642=null,_0x48eb1b=-0x1;const _0x5cbd8c=getPlayerRankName(_0x26723e);_0x4fe3ed[_0x2021f8(0xf4)](_0xc465de=>{const _0x3cc05c=_0x2021f8,_0x2ea10a=_0xc465de['data']();if(_0x2ea10a['username']===_0x3bbf15)return;const _0x2b0056=parseInt(_0x2ea10a['eloRating'])||0x5dc,_0x2fc1df=getPlayerRankName(_0x2b0056),_0x3410ad=Math[_0x3cc05c(0xc8)](_0x2b0056-_0x26723e),_0x4c3060=0x20,_0x5c23d0=0x1/(0x1+Math[_0x3cc05c(0x10d)](0xa,(_0x2b0056-_0x26723e)/0x190)),_0x24d17a=Math['round'](_0x4c3060*(0x1-_0x5c23d0));if(_0x24d17a<=0x0)return;let _0x118ba4=0x0;const _0xa484d0=Math['max'](0x0,0x64-_0x3410ad*0.5),_0x4f372d=_0x24d17a>=0x3&&_0x24d17a<=0x8?0x32:_0x24d17a>0x0&&_0x24d17a<0xf?0x1e:0xa,_0x52f1c6=_0x5cbd8c===_0x2fc1df?0x28:0x0;_0x118ba4=_0xa484d0+_0x4f372d+_0x52f1c6,_0x118ba4>_0x48eb1b&&(_0x46e642=_0x2ea10a,_0x48eb1b=_0x118ba4);});if(_0x46e642){const _0x46187b=parseInt(_0x46e642['eloRating'])||0x5dc;let _0x2db791=_0x2021f8(0x93);if(_0x46187b>=0x7d0)_0x2db791='#50C878';else{if(_0x46187b>=0x708)_0x2db791='#FFD700';else{if(_0x46187b>=0x640)_0x2db791='#b9f1fc';else _0x46187b>=0x578&&(_0x2db791=_0x2021f8(0x102));}}_0x196eb2['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x26723e+_0x2021f8(0xdb)+_0x2db791+_0x2021f8(0xaa)+_0x46e642[_0x2021f8(0xf5)]+_0x2021f8(0xd6);}else _0x196eb2[_0x2021f8(0x10c)]='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x26723e+')';}catch(_0x22047a){console['error']('Error\x20finding\x20best\x20opponent:',_0x22047a),_0x196eb2[_0x2021f8(0xb1)]='Error\x20finding\x20recommended\x20opponent';}}auth[a25_0x3d0c19(0xec)](_0xb8caaf=>{const _0x58826a=a25_0x3d0c19,_0x53fe1f=document['getElementById'](_0x58826a(0x106))&&document['getElementById']('d1-ladder-container')['style']['display']!==_0x58826a(0xc9),_0x106e39=document['getElementById']('d2-ladder-container')&&document['getElementById']('d2-ladder-container')['style']['display']!=='none',_0x23660a=document['getElementById']('d3-ladder-container')&&document[_0x58826a(0xf1)]('d3-ladder-container')['style']['display']!==_0x58826a(0xc9),_0x5fc278=document['getElementById']('duos-ladder-container')&&document['getElementById']('duos-ladder-container')[_0x58826a(0xda)]['display']!==_0x58826a(0xc9),_0x18f84b=_0x53fe1f?'d1':_0x106e39?'d2':_0x23660a?'d3':_0x5fc278?'duos':'d1';findBestOpponent(_0x18f84b);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x726587=a25_0x3d0c19,_0x1aa9c8=document['getElementById']('duos-switch'),_0x30f978=document['querySelector']('label[for=\x22duos-switch\x22]');_0x1aa9c8&&_0x30f978&&(_0x1aa9c8[_0x726587(0xd4)]('change',async _0x116065=>{const _0x2d6c03=_0x726587;if(_0x116065[_0x2d6c03(0x9e)]['checked']){const _0x5e1849=auth?.['currentUser'],_0x488b45=await checkIfUserIsAdmin(_0x5e1849);if(!_0x488b45){_0x116065['preventDefault']();const _0x38bfd7=document['getElementById'](_0x2d6c03(0xc0));return _0x38bfd7&&(_0x38bfd7['checked']=!![],_0x38bfd7['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0xead2a0=>{const _0xb9d513=_0x726587,_0x34c954=await checkIfUserIsAdmin(_0xead2a0);!_0x34c954?(_0x1aa9c8['disabled']=!![],_0x30f978[_0xb9d513(0xda)][_0xb9d513(0x103)]='0.5',_0x30f978['style'][_0xb9d513(0xea)]=_0xb9d513(0xe9),_0x30f978['title']='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x1aa9c8['disabled']=![],_0x30f978['style'][_0xb9d513(0x103)]='1',_0x30f978['style'][_0xb9d513(0xea)]='pointer',_0x30f978['title']='');}));});async function checkIfUserIsAdmin(_0x30ff38){const _0x3224bc=a25_0x3d0c19;if(!_0x30ff38)return![];try{const _0x1c6d3a=['admin@ladder.com','brian2af@outlook.com'];if(_0x30ff38['email']&&_0x1c6d3a[_0x3224bc(0x108)](_0x30ff38['email']['toLowerCase']()))return!![];const _0xd00a86=['userProfiles','players',_0x3224bc(0xdd),_0x3224bc(0xf9)],_0x4cad19=[_0x3224bc(0xdf),_0x3224bc(0xa2),'council','creative\x20lead'];for(const _0x6f69f of _0xd00a86){try{const _0x595690=doc(db,_0x6f69f,_0x30ff38[_0x3224bc(0xe5)]),_0x3ba127=await getDoc(_0x595690);if(_0x3ba127['exists']()){const _0x46bd50=_0x3ba127['data'](),_0x113438=(_0x46bd50['roleName']||_0x46bd50['role']||'')[_0x3224bc(0x96)]();if(_0x113438&&_0x4cad19['includes'](_0x113438))return!![];}}catch(_0x3a4aea){console[_0x3224bc(0xa3)]('Error\x20checking\x20'+_0x6f69f+':',_0x3a4aea);}}return![];}catch(_0x5a9fac){return console['error']('Error\x20checking\x20admin\x20status:',_0x5a9fac),![];}}function showAdminOnlyMessage(){const _0x1b71cb=a25_0x3d0c19,_0x3bde17=document[_0x1b71cb(0xf1)]('admin-only-message');_0x3bde17&&_0x3bde17['remove']();const _0x338d74=document['createElement']('div');_0x338d74['id']='admin-only-message',_0x338d74['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x338d74['innerHTML']=_0x1b71cb(0xfe),document[_0x1b71cb(0xc4)]['appendChild'](_0x338d74),setTimeout(()=>{_0x338d74['parentNode']&&_0x338d74['remove']();},0xbb8);}