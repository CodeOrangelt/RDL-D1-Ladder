const a43_0x14cd9f=a43_0x33d0,a43_0x6918ba=(function(){let _0x41dc29=!![];return function(_0x121a70,_0x325679){const _0x2f499b=_0x41dc29?function(){if(_0x325679){const _0x1395e2=_0x325679['apply'](_0x121a70,arguments);return _0x325679=null,_0x1395e2;}}:function(){};return _0x41dc29=![],_0x2f499b;};}()),a43_0x1c566b=a43_0x6918ba(this,function(){const _0x331dc1=a43_0x33d0,_0x3b6ec0=function(){let _0x1a15f5;try{_0x1a15f5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xbff723){_0x1a15f5=window;}return _0x1a15f5;},_0x4a14b4=_0x3b6ec0(),_0x4597c4=_0x4a14b4['console']=_0x4a14b4[_0x331dc1(0x118)]||{},_0xb96d88=[_0x331dc1(0x11b),_0x331dc1(0x11e),_0x331dc1(0x121),'error',_0x331dc1(0x117),_0x331dc1(0x123),'trace'];for(let _0x50c8b2=0x0;_0x50c8b2<_0xb96d88[_0x331dc1(0x113)];_0x50c8b2++){const _0x1df0f9=a43_0x6918ba['constructor'][_0x331dc1(0x110)]['bind'](a43_0x6918ba),_0x118365=_0xb96d88[_0x50c8b2],_0x35e470=_0x4597c4[_0x118365]||_0x1df0f9;_0x1df0f9['__proto__']=a43_0x6918ba['bind'](a43_0x6918ba),_0x1df0f9['toString']=_0x35e470[_0x331dc1(0x11c)]['bind'](_0x35e470),_0x4597c4[_0x118365]=_0x1df0f9;}});a43_0x1c566b();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a43_0x14cd9f(0x11d)),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function a43_0x33d0(_0x26335f,_0x3d4ea0){const _0x1c566b=a43_0xd498();return a43_0x33d0=function(_0x6918ba,_0x3f1232){_0x6918ba=_0x6918ba-0x10f;let _0xd49894=_0x1c566b[_0x6918ba];return _0xd49894;},a43_0x33d0(_0x26335f,_0x3d4ea0);}function a43_0xd498(){const _0x3d7bef=['Just\x20now','prototype','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','length','toDate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','style','exception','console','username','forEach','log','toString','readyPlayers','warn','queue-container','lastUpdated','info','none','table','block','floor'];a43_0xd498=function(){return _0x3d7bef;};return a43_0xd498();}function updateQueueDisplay(_0xba1b90){const _0x48b0ba=a43_0x14cd9f,_0x2d9e8c=document['getElementById'](_0x48b0ba(0x11f));if(!_0x2d9e8c)return;if(_0xba1b90[_0x48b0ba(0x113)]===0x0){_0x2d9e8c[_0x48b0ba(0x116)]['display']=_0x48b0ba(0x122);return;}_0x2d9e8c['style']['display']=_0x48b0ba(0x124);let _0xe49019=_0x48b0ba(0x112);_0xba1b90[_0x48b0ba(0x11a)](_0x588382=>{const _0x25ea16=_0x48b0ba;_0xe49019+=_0x25ea16(0x115)+(_0x588382['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x588382['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0xe49019+=_0x48b0ba(0x111),_0x2d9e8c['innerHTML']=_0xe49019;}function formatQueueTime(_0x29f4c6){const _0x3a1f6d=a43_0x14cd9f;if(!_0x29f4c6)return'Just\x20now';const _0x1c6165=_0x29f4c6['toDate']?_0x29f4c6['toDate']():new Date(_0x29f4c6),_0x27ef09=new Date(),_0x37efba=Math['floor']((_0x27ef09-_0x1c6165)/0xea60);if(_0x37efba<0x1)return _0x3a1f6d(0x10f);return _0x37efba+'m\x20in\x20queue';}async function checkQueueTimeout(_0x738f2b){const _0x293df8=a43_0x14cd9f;if(!_0x738f2b['lastUpdated'])return;const _0x5798f2=_0x738f2b['lastUpdated'][_0x293df8(0x114)]?_0x738f2b[_0x293df8(0x120)][_0x293df8(0x114)]():new Date(_0x738f2b['lastUpdated']),_0x539b66=new Date(),_0x5c113d=Math[_0x293df8(0x125)]((_0x539b66-_0x5798f2)/0xea60);if(_0x5c113d>=0x1e)try{const _0x2a8ed1=doc(db,'readyPlayers',_0x738f2b['id']);await updateDoc(_0x2a8ed1,{'isReady':![]});}catch(_0x1bcaaf){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x1bcaaf);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x1e70d5=>{const _0x5dee9b=[];_0x1e70d5['forEach'](_0x2f83c1=>{const _0x52dfec=a43_0x33d0,_0x60e27e=_0x2f83c1['data']();if(_0x60e27e['isReady']===!![]){const _0x395f5b={'id':_0x2f83c1['id'],'username':_0x60e27e[_0x52dfec(0x119)],'lastUpdated':_0x60e27e['lastUpdated']||new Date()};_0x5dee9b['push'](_0x395f5b),checkQueueTimeout(_0x395f5b);}}),updateQueueDisplay(_0x5dee9b);},_0x244f90=>{console['error']('Error\x20in\x20queue\x20listener:',_0x244f90);});window['addEventListener']('unload',()=>{unsubscribe();});