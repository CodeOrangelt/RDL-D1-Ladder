function a0_0x2f9b(){const _0x46b408=['bind','#CD7F32','textContent','winner-name','toFixed','trace','expectedScoreWinner','players','set','2058760TwFOPx','18rIkHjt','\x20=\x20','dataset','loser-select','updateDropdowns','querySelectorAll','username','silver','\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20','%\x20chance\x20to\x20win)\x0a\x20\x20','725254UaIPNA','1705645QEkZRG','\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a','\x20+\x20','60ifZSyf','Current\x20ELO:\x20','style','match-result','331765uVKWPJ','\x0a\x0aInitial\x20Ratings:\x0a\x20\x20','2811860qlAfKv','9tSkEDT','forEach','displayMatchResult','constructor','elo','eloRating','ladder','#808080','loser-name','error','277190iIGUbX','88dfFDzs','loserChange','loser-elo-change','active','remove','<option\x20value=\x22\x22>Select\x20a\x20player...</option>','getELOColor','prototype','winner-select','newLoserRating','info','calculation-details','innerHTML','Error\x20loading\x20players:','emerald','addEventListener','Player\x20not\x20found','color','getElementById','\x20High\x20ELO\x20gain','\x20ladder','setupEventListeners','winnerChange','#50C878','56649xWzfqM'];a0_0x2f9b=function(){return _0x46b408;};return a0_0x2f9b();}const a0_0x9e3aa2=a0_0x23b0;(function(_0x31a41e,_0x3c48ba){const _0x16b4ad=a0_0x23b0,_0x5260ca=_0x31a41e();while(!![]){try{const _0x5bfcbf=-parseInt(_0x16b4ad(0x17b))/0x1+parseInt(_0x16b4ad(0x190))/0x2+-parseInt(_0x16b4ad(0x166))/0x3*(parseInt(_0x16b4ad(0x17f))/0x4)+parseInt(_0x16b4ad(0x17c))/0x5*(-parseInt(_0x16b4ad(0x171))/0x6)+-parseInt(_0x16b4ad(0x183))/0x7+-parseInt(_0x16b4ad(0x170))/0x8*(-parseInt(_0x16b4ad(0x186))/0x9)+-parseInt(_0x16b4ad(0x185))/0xa*(-parseInt(_0x16b4ad(0x191))/0xb);if(_0x5bfcbf===_0x3c48ba)break;else _0x5260ca['push'](_0x5260ca['shift']());}catch(_0xafe53d){_0x5260ca['push'](_0x5260ca['shift']());}}}(a0_0x2f9b,0x8a383));const a0_0x58862e=(function(){let _0x1040f3=!![];return function(_0x3c1fa6,_0x4c3826){const _0x9e8fb6=_0x1040f3?function(){if(_0x4c3826){const _0x47ccff=_0x4c3826['apply'](_0x3c1fa6,arguments);return _0x4c3826=null,_0x47ccff;}}:function(){};return _0x1040f3=![],_0x9e8fb6;};}()),a0_0x212cc0=a0_0x58862e(this,function(){const _0xc04db4=a0_0x23b0,_0x39fa48=function(){let _0x4ba0e6;try{_0x4ba0e6=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x297b53){_0x4ba0e6=window;}return _0x4ba0e6;},_0x49dc77=_0x39fa48(),_0x45d249=_0x49dc77['console']=_0x49dc77['console']||{},_0x2f7281=['log','warn',_0xc04db4(0x19b),'error','exception','table',_0xc04db4(0x16c)];for(let _0x2f2243=0x0;_0x2f2243<_0x2f7281['length'];_0x2f2243++){const _0xd84712=a0_0x58862e[_0xc04db4(0x189)][_0xc04db4(0x198)]['bind'](a0_0x58862e),_0x3c71aa=_0x2f7281[_0x2f2243],_0x599824=_0x45d249[_0x3c71aa]||_0xd84712;_0xd84712['__proto__']=a0_0x58862e['bind'](a0_0x58862e),_0xd84712['toString']=_0x599824['toString'][_0xc04db4(0x167)](_0x599824),_0x45d249[_0x3c71aa]=_0xd84712;}});a0_0x212cc0();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a0_0x23b0(_0x358bf8,_0x46ee7e){const _0x59fc8a=a0_0x2f9b();return a0_0x23b0=function(_0x212cc0,_0x58862e){_0x212cc0=_0x212cc0-0x163;let _0x4a9ae2=_0x59fc8a[_0x212cc0];return _0x4a9ae2;},a0_0x23b0(_0x358bf8,_0x46ee7e);}import{db}from'./firebase-config.js';class ELOCalculator{constructor(){this['currentLadder']='D1',this['players']=new Map(),this['init']();}['init'](){this['setupEventListeners'](),this['loadPlayers']();}[a0_0x9e3aa2(0x163)](){const _0x41fea2=a0_0x9e3aa2;document[_0x41fea2(0x176)]('.ladder-btn')[_0x41fea2(0x187)](_0x46c71a=>{const _0xecc245=_0x41fea2;_0x46c71a[_0xecc245(0x1a0)]('click',_0x104456=>{const _0x142c97=_0xecc245;document['querySelectorAll']('.ladder-btn')['forEach'](_0x110b86=>_0x110b86['classList'][_0x142c97(0x195)](_0x142c97(0x194))),_0x104456['target']['classList']['add']('active'),this['currentLadder']=_0x104456['target'][_0x142c97(0x173)][_0x142c97(0x18c)],this['loadPlayers']();});}),document['getElementById']('refresh-players')['addEventListener']('click',()=>{this['loadPlayers']();}),document['getElementById']('winner-select')['addEventListener']('change',()=>this['calculateMatch']()),document[_0x41fea2(0x1a3)]('loser-select')['addEventListener']('change',()=>this['calculateMatch']());}async['loadPlayers'](){const _0x3c13f0=a0_0x9e3aa2;try{this['updateDropdowns']('<option\x20value=\x22\x22>Loading\x20players...</option>');const _0x1f04a2=this['currentLadder']==='D1'?'players':this['currentLadder']==='D2'?'playersD2':'playersD3',_0x4572c7=collection(db,_0x1f04a2),_0x49833f=query(_0x4572c7,orderBy('eloRating','desc')),_0x2e657f=await getDocs(_0x49833f);this['players']['clear'](),_0x2e657f[_0x3c13f0(0x187)](_0x10ba6f=>{const _0x300d04=_0x3c13f0,_0x1c2ab5=_0x10ba6f['data']();_0x1c2ab5['username']&&this['players'][_0x300d04(0x16f)](_0x1c2ab5[_0x300d04(0x177)],{'id':_0x10ba6f['id'],'username':_0x1c2ab5['username'],'elo':parseInt(_0x1c2ab5[_0x300d04(0x18b)])||0x4b0,'position':_0x1c2ab5['position']||0x3e7});}),this['updateDropdowns'](),console['log']('Loaded\x20'+this[_0x3c13f0(0x16e)]['size']+'\x20players\x20from\x20'+this['currentLadder']+_0x3c13f0(0x1a5));}catch(_0x4cef01){console[_0x3c13f0(0x18f)](_0x3c13f0(0x19e),_0x4cef01),this[_0x3c13f0(0x175)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}['updateDropdowns'](_0x212d2e=null){const _0x2da627=a0_0x9e3aa2,_0x47d7f0=document['getElementById']('winner-select'),_0x557889=document['getElementById'](_0x2da627(0x174));if(_0x212d2e){_0x47d7f0[_0x2da627(0x19d)]=_0x212d2e,_0x557889[_0x2da627(0x19d)]=_0x212d2e;return;}let _0x35134d=_0x2da627(0x196);const _0x1cd822=Array['from'](this[_0x2da627(0x16e)]['values']())['sort']((_0x41cf2e,_0x3dc992)=>_0x3dc992['elo']-_0x41cf2e['elo']);_0x1cd822['forEach'](_0x292d2f=>{const _0x23bb28=_0x2da627,_0x1dbb7e=this['getELORankClass'](_0x292d2f['elo']);_0x35134d+='<option\x20value=\x22'+_0x292d2f[_0x23bb28(0x177)]+'\x22\x20data-elo=\x22'+_0x292d2f[_0x23bb28(0x18a)]+'\x22\x20class=\x22'+_0x1dbb7e+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x292d2f['username']+'\x20('+_0x292d2f['elo']+'\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>';}),_0x47d7f0[_0x2da627(0x19d)]=_0x35134d,_0x557889['innerHTML']=_0x35134d;}['calculateMatch'](){const _0x496333=a0_0x9e3aa2,_0x3e3a1d=document[_0x496333(0x1a3)](_0x496333(0x199)),_0x2ae881=document['getElementById'](_0x496333(0x174)),_0xad6392=_0x3e3a1d['value'],_0x11b42b=_0x2ae881['value'];if(!_0xad6392||!_0x11b42b){document[_0x496333(0x1a3)](_0x496333(0x182))['style']['display']='none',document[_0x496333(0x1a3)]('calculation-details')[_0x496333(0x181)]['display']='none';return;}if(_0xad6392===_0x11b42b){alert('Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser');return;}const _0xcef3b3=this['players']['get'](_0xad6392),_0x36388b=this['players']['get'](_0x11b42b);if(!_0xcef3b3||!_0x36388b){console[_0x496333(0x18f)](_0x496333(0x1a1));return;}const _0x4332e4=this['calculateELO'](_0xcef3b3[_0x496333(0x18a)],_0x36388b['elo']);this['displayMatchResult'](_0xcef3b3,_0x36388b,_0x4332e4),this['displayCalculationDetails'](_0xcef3b3,_0x36388b,_0x4332e4);}['calculateELO'](_0x137142,_0x43327e,_0x5474bc=0x20){const _0x625fab=0x1/(0x1+Math['pow'](0xa,(_0x43327e-_0x137142)/0x190)),_0x5740e0=0x1/(0x1+Math['pow'](0xa,(_0x137142-_0x43327e)/0x190)),_0xdd2890=_0x137142+_0x5474bc*(0x1-_0x625fab),_0x1e31b3=_0x43327e+_0x5474bc*(0x0-_0x5740e0);return{'winnerChange':Math['round'](_0xdd2890-_0x137142),'loserChange':Math['round'](_0x1e31b3-_0x43327e),'newWinnerRating':Math['round'](_0xdd2890),'newLoserRating':Math['round'](_0x1e31b3),'expectedScoreWinner':_0x625fab,'expectedScoreLoser':_0x5740e0};}[a0_0x9e3aa2(0x188)](_0x5b27f7,_0x54f481,_0x2f5aa2){const _0x2eca89=a0_0x9e3aa2;document[_0x2eca89(0x1a3)](_0x2eca89(0x16a))['textContent']=_0x5b27f7[_0x2eca89(0x177)],document[_0x2eca89(0x1a3)]('winner-current-elo')['textContent']=_0x2eca89(0x180)+_0x5b27f7['elo'],document['getElementById']('winner-elo-change')['textContent']='+'+_0x2f5aa2['winnerChange'],document['getElementById']('winner-new-elo')['textContent']='New\x20ELO:\x20'+_0x2f5aa2['newWinnerRating'],document[_0x2eca89(0x1a3)]('loser-name')['textContent']=_0x54f481['username'],document['getElementById']('loser-current-elo')['textContent']=_0x2eca89(0x180)+_0x54f481['elo'],document['getElementById'](_0x2eca89(0x193))['textContent']=''+_0x2f5aa2['loserChange'],document[_0x2eca89(0x1a3)]('loser-new-elo')['textContent']='New\x20ELO:\x20'+_0x2f5aa2[_0x2eca89(0x19a)];const _0x4d42a5=this['getELOColor'](_0x5b27f7[_0x2eca89(0x18a)]),_0x169a2e=this[_0x2eca89(0x197)](_0x54f481['elo']);document['getElementById'](_0x2eca89(0x16a))['style'][_0x2eca89(0x1a2)]=_0x4d42a5,document['getElementById'](_0x2eca89(0x18e))['style'][_0x2eca89(0x1a2)]=_0x169a2e,document['getElementById']('match-result')[_0x2eca89(0x181)]['display']='grid';}['displayCalculationDetails'](_0x5a67d7,_0x228283,_0x124d3d){const _0x3c1288=a0_0x9e3aa2,_0x1a5953=_0x3c1288(0x184)+_0x5a67d7['username']+':\x20'+_0x5a67d7['elo']+'\x0a\x20\x20'+_0x228283[_0x3c1288(0x177)]+':\x20'+_0x228283[_0x3c1288(0x18a)]+_0x3c1288(0x179)+_0x5a67d7['username']+':\x20'+_0x124d3d['expectedScoreWinner']['toFixed'](0x3)+'\x20('+(_0x124d3d[_0x3c1288(0x16d)]*0x64)[_0x3c1288(0x16b)](0x1)+_0x3c1288(0x17a)+_0x228283['username']+':\x20'+_0x124d3d['expectedScoreLoser'][_0x3c1288(0x16b)](0x3)+'\x20('+(_0x124d3d['expectedScoreLoser']*0x64)['toFixed'](0x1)+'%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'+_0x5a67d7['username']+':\x20'+_0x5a67d7['elo']+'\x20+\x20'+_0x124d3d['winnerChange']+_0x3c1288(0x172)+_0x124d3d['newWinnerRating']+'\x0a\x20\x20'+_0x228283['username']+':\x20'+_0x228283['elo']+_0x3c1288(0x17e)+_0x124d3d[_0x3c1288(0x192)]+'\x20=\x20'+_0x124d3d[_0x3c1288(0x19a)]+_0x3c1288(0x17d)+(_0x124d3d['winnerChange']>0x14?_0x3c1288(0x1a4):'')+'\x0a'+(_0x124d3d[_0x3c1288(0x164)]<0x5?'Low\x20ELO\x20gain.':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('calculation-text')[_0x3c1288(0x169)]=_0x1a5953,document[_0x3c1288(0x1a3)](_0x3c1288(0x19c))['style']['display']='block';}['getELOColor'](_0x35f49d){const _0x5f52e9=a0_0x9e3aa2;if(_0x35f49d>=0x7d0)return _0x5f52e9(0x165);else{if(_0x35f49d>=0x708)return'#FFD700';else{if(_0x35f49d>=0x640)return'#C0C0C0';else{if(_0x35f49d>=0x578)return _0x5f52e9(0x168);else return _0x5f52e9(0x18d);}}}}['getELORankClass'](_0x1fb1ee){const _0x19664a=a0_0x9e3aa2;if(_0x1fb1ee>=0x7d0)return _0x19664a(0x19f);else{if(_0x1fb1ee>=0x708)return'gold';else{if(_0x1fb1ee>=0x640)return _0x19664a(0x178);else{if(_0x1fb1ee>=0x578)return'bronze';else return'unranked';}}}}}document[a0_0x9e3aa2(0x1a0)]('DOMContentLoaded',()=>{document['getElementById']('sandbox')&&new ELOCalculator();});