const a2_0x27a326=a2_0x4eb2,a2_0x5b5308=(function(){let _0x27fb2a=!![];return function(_0x4200fa,_0x1b4036){const _0x81c7fb=_0x27fb2a?function(){const _0x1d7286=a2_0x4eb2;if(_0x1b4036){const _0x4f5276=_0x1b4036[_0x1d7286(0x1d8)](_0x4200fa,arguments);return _0x1b4036=null,_0x4f5276;}}:function(){};return _0x27fb2a=![],_0x81c7fb;};}()),a2_0x314c49=a2_0x5b5308(this,function(){const _0x5bad3b=a2_0x4eb2,_0x100198=function(){const _0x115ce3=a2_0x4eb2;let _0x1df8d3;try{_0x1df8d3=Function(_0x115ce3(0x2f6)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x28b3bd){_0x1df8d3=window;}return _0x1df8d3;},_0x6f3036=_0x100198(),_0x1ef77a=_0x6f3036['console']=_0x6f3036['console']||{},_0x581c4b=['log','warn','info',_0x5bad3b(0x1a3),'exception',_0x5bad3b(0x27a),_0x5bad3b(0x2a8)];for(let _0x3cf7be=0x0;_0x3cf7be<_0x581c4b['length'];_0x3cf7be++){const _0x53c239=a2_0x5b5308['constructor'][_0x5bad3b(0x2d5)][_0x5bad3b(0x167)](a2_0x5b5308),_0x47a8c1=_0x581c4b[_0x3cf7be],_0xc54ce6=_0x1ef77a[_0x47a8c1]||_0x53c239;_0x53c239['__proto__']=a2_0x5b5308[_0x5bad3b(0x167)](a2_0x5b5308),_0x53c239['toString']=_0xc54ce6['toString']['bind'](_0xc54ce6),_0x1ef77a[_0x47a8c1]=_0x53c239;}});a2_0x314c49();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x3d2400){const _0x67ec55=a2_0x4eb2;if(!_0x3d2400)return _0x67ec55(0x12f);_0x3d2400=_0x3d2400[_0x67ec55(0x122)]('#','');_0x3d2400['length']===0x3&&(_0x3d2400=_0x3d2400[_0x67ec55(0x23e)]('')['map'](_0x48226a=>_0x48226a+_0x48226a)[_0x67ec55(0x294)](''));if(_0x3d2400['length']!==0x6)return'#ffffff';const _0x48f265=parseInt(_0x3d2400['substring'](0x0,0x2),0x10),_0x3329c5=parseInt(_0x3d2400[_0x67ec55(0x2d7)](0x2,0x4),0x10),_0x789353=parseInt(_0x3d2400['substring'](0x4,0x6),0x10),_0x594072=(_0x48f265*0x12b+_0x3329c5*0x24b+_0x789353*0x72)/0x3e8;return _0x594072>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a2_0x27a326(0x2fa)]('DOMContentLoaded',()=>{const _0x31dc9f=a2_0x27a326;auth[_0x31dc9f(0x26e)](async _0x5b3e77=>{const _0x3ba371=_0x31dc9f;if(!_0x5b3e77){window['location']['href']=_0x3ba371(0x2a6);return;}try{await initializeAdminDashboard();}catch(_0x1e12c0){console['error']('Error\x20initializing\x20dashboard:',_0x1e12c0),showNotification('Error\x20setting\x20up\x20admin\x20dashboard',_0x3ba371(0x1a3));}});});async function getUserTabPermissions(_0x17b1f8){const _0x29d027=a2_0x27a326;if(!_0x17b1f8)return['dashboard'];console[_0x29d027(0x1ac)](_0x29d027(0x36f)+_0x17b1f8+'\x20in\x20all\x20collections...');const _0x4728ae=[{'name':'userProfiles','displayName':_0x29d027(0x2e2)},{'name':_0x29d027(0x21c),'displayName':_0x29d027(0x22b)},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0xab374b=auth['currentUser'];let _0x5e611e=null,_0x46d34f=null;for(const _0x519e6b of _0x4728ae){try{if(_0xab374b){const _0x163ab3=doc(db,_0x519e6b['name'],_0xab374b[_0x29d027(0x29e)]),_0x1c1d2a=await getDoc(_0x163ab3);if(_0x1c1d2a['exists']()){const _0x23d6d=_0x1c1d2a[_0x29d027(0x20a)]();console['log'](_0x29d027(0x271)+_0x519e6b['displayName']+_0x29d027(0x35f),_0x23d6d);const _0x4e0386=(_0x23d6d['roleName']||_0x23d6d['role']||'')['toLowerCase']();if(_0x4e0386&&_0x4e0386!=='none'){_0x5e611e=_0x4e0386,_0x46d34f=_0x519e6b['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x5e611e+_0x29d027(0x34c)+_0x46d34f);break;}}}if(!_0x5e611e){const _0x5a920b=collection(db,_0x519e6b['name']),_0x493a15=query(_0x5a920b,where(_0x29d027(0x2d6),'==',_0x17b1f8)),_0x24eb3c=await getDocs(_0x493a15);if(!_0x24eb3c[_0x29d027(0x31c)]){const _0x3af15a=_0x24eb3c['docs'][0x0][_0x29d027(0x20a)]();console['log'](_0x29d027(0x271)+_0x519e6b['displayName']+'\x20with\x20email\x20'+_0x17b1f8+':',_0x3af15a);const _0x83343e=(_0x3af15a['roleName']||_0x3af15a['role']||'')['toLowerCase']();if(_0x83343e&&_0x83343e!==_0x29d027(0x1b7)){_0x5e611e=_0x83343e,_0x46d34f=_0x519e6b['displayName'],console[_0x29d027(0x1ac)](_0x29d027(0x35e)+_0x5e611e+'\x20in\x20'+_0x46d34f);break;}}}}catch(_0xec5674){console[_0x29d027(0x1a3)]('Error\x20checking\x20'+_0x519e6b['displayName']+':',_0xec5674);}}if(_0x5e611e){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x5e611e+'\x20(from\x20'+_0x46d34f+')');const _0x293d18={'admin':['dashboard',_0x29d027(0x2df),_0x29d027(0x1e3),_0x29d027(0x2d4),'manage-trophies','manage-ranks',_0x29d027(0x2bc),'settings','manage-trophies','elo-history','manage-highlights','user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard',_0x29d027(0x2df),'manage-matches','manage-articles',_0x29d027(0x270),'manage-ranks','inactive-players',_0x29d027(0x1f9),'manage-trophies',_0x29d027(0x364),'manage-highlights','user-roles-section','manage-matches',_0x29d027(0x2b7),_0x29d027(0x20c),'manage-ribbons'],'council':[_0x29d027(0x289),'manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x293d18[_0x5e611e])return console['log']('Role\x20\x27'+_0x5e611e+'\x27\x20has\x20permissions:',_0x293d18[_0x5e611e]),_0x293d18[_0x5e611e];}return console['log'](_0x29d027(0x249)+_0x17b1f8+',\x20giving\x20default\x20access'),['dashboard'];}function a2_0x56e7(){const _0x15c305=['unknown','Successfully\x20promoted\x20','Points\x20updated\x20successfully\x20for\x20user:','\x20(winner)\x20vs\x20','edit-username','Error\x20opening\x20edit\x20modal:','match-details-container','position','edit-match-winner-comment','paste','edit-highlight-id','replace','20px','creator','querySelector','Test\x20match','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','DOMContentLoaded','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','Failed\x20to\x20delete\x20match:\x20','Untitled\x20Trophy','userId','Match\x20updated\x20successfully','#ffffff','\x20section','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','Highlight\x20updated\x20successfully!','d2-prev-page','Table\x20row\x20for\x20user\x20','highlight-achievement-player','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','role','cancel-highlight-btn','has','edit-highlight-matchInfo-input','focus','Create\x20New\x20Trophy','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','.close-btn','Winner\x20and\x20loser\x20usernames\x20are\x20required','removeAttribute','highlight-player-profile','all','getElementById','createdAt','rgba(255,\x20193,\x207,\x200.1)','seconds','promotedBy','User\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','contains','creator-type','loserName','common','.error-state','Error\x20loading\x20trophy\x20definitions:','ribbon-type-select','ribbon-level','RejectedD1','Setting\x20up\x20matches\x20action\x20buttons...','eloHistoryD2','achievement','replaceChild','Match\x20deleted\x20successfully','sendPromotionNotification','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','toDate','N/A','eloHistoryD3','mapVersion','edit-highlight-creatorImageUrl-input','player-search','Modal\x20opened\x20successfully','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','load-users-data','points-action','loserDemoLink','bind','block','includes','migration-section','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','Error\x20loading\x20dashboard\x20data:','Failed\x20to\x20delete\x20player:\x20','desc','Processing\x20points\x20edit:','destroy','You\x20must\x20be\x20logged\x20in','mapPlayed','All\x20fields\x20are\x20required','firstVisible','highlight-achievement-details-container','rank-distribution-chart','trophy-rarity','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','Failed\x20to\x20load\x20match\x20data','rejected-count','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','\x20total\x20players\x20in\x20the\x20','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','.close-notification','empty-state','Error\x20loading\x20ribbons:','success','toLocaleDateString','keys','bar','current-ribbon-user','highlight-winner-name','change','No\x20users\x20needed\x20points\x20field\x20initialization','Current\x20user:','Unknown','awardedAt','demotion','Error\x20loading\x20points\x20data:','Title\x20is\x20required','edit-player-modal','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','Edit\x20match\x20clicked:','promotion','input','Please\x20enter\x20a\x20username','winnerUsername','startDate','#808080','current-ladder-display','resimulate-match-id','creatorImageUrl','highlight-achievement-type-container','ladder','highlight-match-date','playersD3','\x22\x20set','YouTube\x20Video\x20ID\x20(Optional)','type','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','error','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches','submittedBy','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','Delete\x20match\x20clicked:','highlight-modal-title','add-new-role-btn','approvedMatchesD2','log','rgba(211,\x2047,\x2047,\x200.7)','rgba(255,\x20255,\x20255,\x200.1)','insertAdjacentElement','title','confirmResimulateMatch','trim','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Achievement','highlight-description-container','none','highlight-form','Error:\x20','history-type-filter','pending-count','highlight-loser-name','quick-edit-user-id','quick-edit-points-form','loserScore','\x20quick\x20edit\x20buttons','d3-next-page','Error\x20updating\x20points:','Set\x20to\x20','removeEventListener','assign-trophy-image','Failed\x20to\x20load\x20trophy\x20data','achievementType','target','approvedMatchesD3','string','Article\x20updated\x20successfully','elo','timestamp','matchDate','trophy-id','highlight-players-container','load-players-data','Error','\x20from\x20','approvedMatches','modify-points-form','matches-search','display','apply','Load\x20ribbons\x20data\x20clicked','Trophy\x20\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','user-search-results','admin','Starting\x20points\x20award\x20process...','quick-edit-points-modal','1200','points-user-search','eloHistory','manage-matches','manage-ranks','closest','Error\x20adding\x20ribbon:','updatedAt','\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','playerId','./promotions.js','reset-history-filters','Error\x20deleting\x20match:','innerHTML','set-role-modal','playerRibbons','View\x20player\x20details\x20for\x20','highlight-achievement-image','demote-ladder','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','assign-trophy-modal','Modal\x20background\x20clicked','newElo','Error\x20searching\x20users:','settings','ribbon','Error\x20opening\x20assign\x20trophy\x20modal:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','points-overview-table-body','Modal\x20computed\x20styles:','Match\x20not\x20found','MAX_SAFE_INTEGER','displayName','stopPropagation','edit-highlight-achievementPlayer-input','Player\x20','match-type','activity','cancel-set-elo-btn','reset','amount','data','highlight-match-date-container','manage-levels-ribbons','assign-trophy-title','Match\x20ID\x20or\x20ladder\x20missing','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','commit','Please\x20enter\x20a\x20valid\x20username','Error\x20saving\x20highlight:','non-participant','demote-username','Failed\x20to\x20assign\x20trophy:\x20','Added\x20','Awarded\x20','filter','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','style','entries','players','setAttribute','Created\x20','page','cancel-edit-btn','push','-page-indicator','nonParticipants','author','set-elo-form','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','apply-matches-filters','Silver','Sunday','Queued\x20','D1\x20Players','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','.view-player-btn','.form-group,\x20.form-row','winnerScore','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','pointsHistory','Role\x20\x22','find','Dashboard\x20data\x20loaded\x20successfully','Error\x20loading\x20matches:','Closing\x20create\x20test\x20match\x20modal','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','\x20D3\x20matches.\x20','Searching\x20for\x20player\x20in\x20','Bulk\x20award\x20to\x20all\x20pilots\x20(','Starting\x20complete\x20match\x20resimulation...','Error\x20initializing\x20admin\x20dashboard:','Error\x20loading\x20highlights:','split','cells','\x20D3\x20pilots','highlight-description','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','Error\x20loading\x20match\x20data:','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','appendChild','No\x20match\x20data\x20found\x20for\x20resimulation','Highlight\x20added\x20successfully!','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','No\x20specific\x20permissions\x20for\x20user\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','highlight-map-version-container','afterend','remove','Load\x20articles\x20data\x20clicked','highlight-video-preview','admin_modification','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','negative-change','roleAssignedBy','\x20users','username','eloRating','className','Create\x20Article','achievementDetails','edit-highlight-type-select','article-author','edit-highlight-winnerName-input','src','\x20to\x20','\x20ELO\x20history\x20entries.\x20','data-match-id','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','NonParticipant','Quick\x20edit\x20form\x20submitted','d3-prev-page','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','.edit-highlight-btn','floor','Load\x20players\x20data\x20clicked','lastVisible','This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?','name','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','onAuthStateChanged','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','manage-trophies','Found\x20user\x20in\x20','ref','Player\x20\x22','newPoints','data-id','no-results-message','</span>','toLowerCase','quick-points-amount','table','active','approvedAt','user-role','Setting\x20up\x20Manage\x20Ribbons\x20section','highlight-submitted-by','Unknown\x20User','currentTarget','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','border','set','Failed\x20to\x20find\x20match:\x20','matches-start-date','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','Failed\x20to\x20load\x20article\x20data','dashboard','\x20collection...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Ribbons\x20data\x20loaded\x20successfully','adminEmail','#e0e0e0','Subtracted\x20','Error\x20finding\x20match:','highlight-modal','matchLink','\x20was\x20updated\x20from\x20','join','Error\x20processing\x20','Error\x20deleting\x20highlight:','demote-modal','#1976d2','Failed\x20to\x20load\x20player\x20data','Failed\x20to\x20send\x20Discord\x20notification:','users-table-body','\x20added\x20successfully\x20to\x20','.quick-edit-btn','uid','dataset','preventDefault','Points\x20updated\x20successfully','Adding\x20player\x20','Error\x20loading\x20dashboard:','set-elo-modal','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','login.html','trophy-preview-img','trace','\x20-\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','edit-match-loser-comment','size','Profile','getAttribute','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','forEach','Unknown\x20Admin','save-player-btn','\x20ladder','highlight-video-id','Points\x20data\x20loaded\x20successfully','submit','manage-points','classList','player-count','selected-user-id','div','inactive-players','rarity',',\x20Loser\x20','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','loading','toISOString','RejectedD2','points-asc','System','trophy-image-preview','selected-user-info','Demoting\x20player\x20to\x20','articles-table-body','allUsersPoints','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','No\x20user\x20ID\x20found\x20on\x20button','visible','Opening\x20create\x20test\x20match\x20modal','input[name=\x22promote-ladder\x22]:checked','points','Bronze','trophy-image-url','warn','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','manage-articles','prototype','email','substring','highlights','modifiedBy','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','flex','\x20(based\x20on\x20data-role:\x20','edit-highlight-matchLink-input','highlight-achievement-type','manage-players','roleAssignedAt','daysSinceMatch','User\x20Profiles','rankDistribution','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','highlight-video-container','articles','edit-match-winner-demo','Inactive\x20players\x20section\x20initialized','message','\x20not\x20found.','date','userProfiles','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','\x20vs\x20','length','edit-elo','Error\x20loading\x20article\x20data:','d2-next-page','Simple\x20test\x20match\x20created\x20by\x20admin\x20','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','return\x20(function()\x20','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','#50C878','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','addEventListener','opacity','Admin\x20Adjustment','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','points-history-table-body','image','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','body','achievementPlayer','exists','Failed\x20to\x20update\x20player:\x20','losses','loserUsername','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','fromDate','win','highlight-map','createElement','Error\x20loading\x20user\x20points\x20history:','Error\x20loading\x20users:','sort','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','lastUpdated','Error\x20promoting\x20player:','description','Username\x20is\x20missing','Page\x20','edit-match-map','disabled','Error\x20loading\x20trophies:','test-match-winner-username','testFirebaseConnection','load-inactive-players-data','empty','Quick\x20edit\x20clicked\x20for\x20user:','low-points','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','Defaulted\x20to\x20D1\x20ladder','\x20for\x20points\x20initialization','Player\x20Achievement','loading-cell','docs','article-modal-title','then','#create-test-match-form','inactive-players-table-body','cancel-role-btn','manage-ribbons','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>','previousPoints','textContent','Saturday','load-dashboard-data','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','currentUser','assign-trophy-form','\x20users\x20already\x20had\x20points.','Never','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>Ã—</button>\x0a\x20\x20\x20\x20','playersD2','demote-player-btn','Create\x20test\x20match\x20modal\x20not\x20found','roleName','demote-form','edit-highlight-videoId-input','playerRibbonsD3','promote-username','Error\x20loading\x20articles:','User\x20not\x20found','add','Article\x20created\x20successfully','matchInfo','article-form','catch','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','elo-history-search','value','Found\x20','Achievement\x20highlight\x20button\x20clicked','non-participants','\x20in\x20','Error\x20loading\x20players:','closeResimulateModal','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','edit-match-winner-score','update','Error\x20resolving\x20username\x20for\x20','edit-highlight-playerProfileUrl-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelectorAll','click','matchId','Creator\x20highlight\x20button\x20clicked','edit-match-winner','videoId','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','setHours','No\x20ELO\x20history\x20found\x20for\x20player\x20','Found\x20specific\x20role:\x20','\x20by\x20UID:','subtract','highlights-table-body','create-test-match-modal','getComputedStyle','elo-history','.sidebar-nav\x20.nav-item','winnerName','lastMatch','cloneNode','points-amount','Testing\x20Firebase\x20connection...','W\x20/\x20','#d32f2f','Username\x20','toLocaleString','Looking\x20for\x20user\x20role\x20information\x20for\x20','validation-results-container','\x20users...','Submit\x20button\x20clicked\x20directly'];a2_0x56e7=function(){return _0x15c305;};return a2_0x56e7();}function setupSidebarNavigation(_0x57cce6=[]){const _0x42f1c6=a2_0x27a326,_0x515497=document['querySelectorAll'](_0x42f1c6(0x365)),_0x14aeda=document['querySelectorAll']('.admin-section');(!_0x57cce6||_0x57cce6[_0x42f1c6(0x2f0)]===0x0)&&(_0x57cce6=['dashboard']);_0x515497[_0x42f1c6(0x2b0)](_0x2f631c=>{const _0x416c1b=_0x42f1c6,_0x1c8aad=_0x2f631c['getAttribute']('data-section');_0x57cce6['includes'](_0x1c8aad)?_0x2f631c['style'][_0x416c1b(0x1d7)]='flex':_0x2f631c['style'][_0x416c1b(0x1d7)]='none',_0x2f631c['addEventListener'](_0x416c1b(0x356),()=>{const _0x3cc121=_0x416c1b,_0x4b3725=_0x2f631c[_0x3cc121(0x2ae)]('data-section');if(!_0x57cce6['includes'](_0x4b3725)){showNotification(_0x3cc121(0x1a7),'error');return;}_0x515497['forEach'](_0x32073c=>_0x32073c['classList']['remove']('active')),_0x2f631c['classList'][_0x3cc121(0x340)]('active'),_0x14aeda['forEach'](_0x17db7f=>{const _0x31bc81=_0x3cc121;_0x17db7f['style'][_0x31bc81(0x1d7)]='none';});const _0x514b0a=document['getElementById'](_0x4b3725);_0x514b0a&&(_0x514b0a[_0x3cc121(0x21a)]['display']='block',console['log']('Switched\x20to\x20'+_0x4b3725+_0x3cc121(0x130)));});});const _0x144f84=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x57cce6[0x0]+'\x22]');_0x144f84&&_0x144f84['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x39ad8a=document['querySelectorAll']('.nav-item');let _0x483613=null,_0x1bbff0=new Set();_0x39ad8a['forEach'](_0x50386c=>{const _0x2d6faa=a2_0x4eb2;_0x50386c[_0x2d6faa(0x2fa)]('click',function(){const _0x10aaa3=_0x2d6faa,_0x407f21=this['getAttribute']('data-section');if(_0x407f21===_0x483613)return;_0x483613&&(document[_0x10aaa3(0x144)](_0x483613)['style']['display']='none',_0x39ad8a['forEach'](_0x3204e0=>_0x3204e0[_0x10aaa3(0x2b8)]['remove'](_0x10aaa3(0x27b)))),document['getElementById'](_0x407f21)['style']['display']='block',this[_0x10aaa3(0x2b8)][_0x10aaa3(0x340)]('active'),_0x483613=_0x407f21;});});}function loadSectionData(_0x2147da){return;}async function initializeAdminDashboard(){const _0x3b7f04=a2_0x27a326;try{const _0x138d23=auth[_0x3b7f04(0x331)],_0x5cf91f=await getUserTabPermissions(_0x138d23[_0x3b7f04(0x2d6)]);console['log']('User\x20'+_0x138d23['email']+'\x20allowed\x20tabs:',_0x5cf91f),window['userAllowedTabs']=_0x5cf91f,setupSidebarNavigation(_0x5cf91f),setupLadderSelector(),setupDashboardSection(),_0x5cf91f['includes']('manage-players')&&setupManagePlayersSection(),_0x5cf91f['includes']('elo-history')&&setupEloHistorySection(),_0x5cf91f[_0x3b7f04(0x169)](_0x3b7f04(0x1e4))&&setupRankControls(),_0x5cf91f['includes'](_0x3b7f04(0x2d4))&&setupManageArticlesSection(),_0x5cf91f['includes']('user-roles-section')&&setupUserRolesSection(),_0x5cf91f['includes'](_0x3b7f04(0x270))&&setupTrophyManagementSection(),_0x5cf91f[_0x3b7f04(0x169)]('manage-highlights')&&setupManageHighlightsSection(),_0x5cf91f['includes']('inactive-players')&&setupInactivePlayersSection(),_0x5cf91f['includes']('manage-matches')&&setupManageMatchesSection(),_0x5cf91f['includes']('manage-points')&&setupManagePointsSection(),_0x5cf91f['includes'](_0x3b7f04(0x32a))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x5cf91f);}catch(_0x163786){console[_0x3b7f04(0x1a3)](_0x3b7f04(0x23c),_0x163786);}}function setupDataLoadButtons(_0x24ef45=[]){const _0x11afb8=a2_0x27a326;(!_0x24ef45||_0x24ef45[_0x11afb8(0x2f0)]===0x0)&&(_0x24ef45=['dashboard']);const _0x289cd1=document[_0x11afb8(0x144)](_0x11afb8(0x32f));_0x289cd1&&_0x289cd1['addEventListener']('click',function(){const _0x3501f3=_0x11afb8;this['classList']['add']('loading'),this[_0x3501f3(0x1ee)]=_0x3501f3(0x17d),loadDashboardOverview()[_0x3501f3(0x326)](()=>{const _0x4faaa5=_0x3501f3;this['classList']['remove'](_0x4faaa5(0x2c0)),this['innerHTML']=_0x4faaa5(0x1f4);})[_0x3501f3(0x344)](_0x58a44b=>{const _0x493d43=_0x3501f3;console['error'](_0x493d43(0x2a3),_0x58a44b),this['classList']['remove']('loading'),this['innerHTML']=_0x493d43(0x237),setTimeout(()=>{const _0x3dc1b9=_0x493d43;this[_0x3dc1b9(0x1ee)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x24ef45['includes']('manage-trophies')){const _0x498bca=document['getElementById']('load-trophies-data');_0x498bca&&_0x498bca['addEventListener']('click',function(){const _0x4ecd4e=_0x11afb8;console['log']('Load\x20trophies\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x4ecd4e(0x1ee)]=_0x4ecd4e(0x17d),loadTrophyDefinitions()['then'](()=>{const _0x12d166=_0x4ecd4e;this['classList']['remove']('loading'),this['innerHTML']=_0x12d166(0x1e9);})['catch'](_0x2d1566=>{const _0x2465a2=_0x4ecd4e;console['error'](_0x2465a2(0x318),_0x2d1566),this['classList']['remove']('loading'),this['innerHTML']=_0x2465a2(0x237),setTimeout(()=>{const _0x568a3f=_0x2465a2;this[_0x568a3f(0x1ee)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x24ef45[_0x11afb8(0x169)]('manage-players')){const _0x5703a2=document['getElementById'](_0x11afb8(0x1d1));_0x5703a2&&_0x5703a2['addEventListener'](_0x11afb8(0x356),function(){const _0x50b88d=_0x11afb8;console['log'](_0x50b88d(0x269)),this['classList']['add']('loading'),this[_0x50b88d(0x1ee)]=_0x50b88d(0x17d),loadPlayersData()['then'](()=>{const _0x1bb3fd=_0x50b88d;this['classList']['remove'](_0x1bb3fd(0x2c0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x2bbd5a=>{const _0x5ed0f2=_0x50b88d;console['error'](_0x5ed0f2(0x34d),_0x2bbd5a),this['classList'][_0x5ed0f2(0x24e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x24ef45['includes'](_0x11afb8(0x364))){const _0x4e3df0=document[_0x11afb8(0x144)]('load-elo-history-data');_0x4e3df0&&_0x4e3df0['addEventListener']('click',function(){const _0xe08977=_0x11afb8;console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)[_0xe08977(0x326)](()=>{const _0x191399=_0xe08977;this['classList'][_0x191399(0x24e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0xe08977(0x344)](_0x5d9d19=>{const _0x3b9998=_0xe08977;console['error']('Error\x20loading\x20history:',_0x5d9d19),this[_0x3b9998(0x2b8)]['remove']('loading'),this['innerHTML']=_0x3b9998(0x237),setTimeout(()=>{const _0x591f2c=_0x3b9998;this[_0x591f2c(0x1ee)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x24ef45['includes']('manage-articles')){const _0x1af5ba=document['getElementById']('load-articles-data');_0x1af5ba&&_0x1af5ba['addEventListener']('click',function(){const _0x10bdd9=_0x11afb8;console['log'](_0x10bdd9(0x24f)),this['classList']['add'](_0x10bdd9(0x2c0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x290b46=_0x10bdd9;this[_0x290b46(0x2b8)][_0x290b46(0x24e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x82834=>{const _0x31154e=_0x10bdd9;console[_0x31154e(0x1a3)]('Error\x20loading\x20articles:',_0x82834),this[_0x31154e(0x2b8)]['remove'](_0x31154e(0x2c0)),this[_0x31154e(0x1ee)]=_0x31154e(0x237),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x24ef45['includes']('user-roles-section')){const _0x51b47f=document['getElementById']('load-users-data');_0x51b47f&&_0x51b47f['addEventListener']('click',function(){const _0x437c8a=_0x11afb8;console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x437c8a(0x17d),loadUsersWithRoles()['then'](()=>{const _0xefa68=_0x437c8a;this[_0xefa68(0x2b8)]['remove']('loading'),this['innerHTML']=_0xefa68(0x252);})['catch'](_0x849e=>{const _0x3fd0fc=_0x437c8a;console['error'](_0x3fd0fc(0x30e),_0x849e),this['classList'][_0x3fd0fc(0x24e)]('loading'),this[_0x3fd0fc(0x1ee)]=_0x3fd0fc(0x237),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x24ef45[_0x11afb8(0x169)](_0x11afb8(0x2bc))){const _0xfb6fba=document[_0x11afb8(0x144)]('load-inactive-players-data');_0xfb6fba&&_0xfb6fba['addEventListener']('click',function(){const _0x5f0bf6=_0x11afb8;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x5f0bf6(0x1ee)]=_0x5f0bf6(0x17d),loadInactivePlayersData()['then'](()=>{const _0x58ca38=_0x5f0bf6;this['classList'][_0x58ca38(0x24e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x1560ce=>{const _0x5432eb=_0x5f0bf6;console['error']('Error\x20loading\x20inactive\x20players:',_0x1560ce),this['classList'][_0x5432eb(0x24e)]('loading'),this[_0x5432eb(0x1ee)]=_0x5432eb(0x237),setTimeout(()=>{const _0x3bcf1c=_0x5432eb;this[_0x3bcf1c(0x1ee)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x24ef45['includes']('manage-highlights')){const _0x42e7d9=document[_0x11afb8(0x144)]('load-highlights-data');_0x42e7d9&&_0x42e7d9[_0x11afb8(0x2fa)]('click',function(){const _0x180f4c=_0x11afb8;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList'][_0x180f4c(0x340)](_0x180f4c(0x2c0)),this[_0x180f4c(0x1ee)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x41f7bc=>{const _0x4e3a6e=_0x180f4c;console['error'](_0x4e3a6e(0x23d),_0x41f7bc),this[_0x4e3a6e(0x2b8)][_0x4e3a6e(0x24e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x24ef45['includes']('manage-matches')){const _0x310710=document['getElementById']('load-matches-data');_0x310710&&_0x310710['addEventListener'](_0x11afb8(0x356),function(){const _0x305ecc=_0x11afb8;console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x305ecc(0x326)](()=>{const _0x2b7f28=_0x305ecc;this['classList']['remove']('loading'),this[_0x2b7f28(0x1ee)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})[_0x305ecc(0x344)](_0x57d7e7=>{const _0x50e354=_0x305ecc;console[_0x50e354(0x1a3)](_0x50e354(0x235),_0x57d7e7),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x24ef45['includes']('manage-ribbons')){const _0x3dee92=document['getElementById']('load-ribbons-data');_0x3dee92&&_0x3dee92['addEventListener'](_0x11afb8(0x356),function(){const _0x4e2d08=_0x11afb8;console['log'](_0x4e2d08(0x1d9)),this[_0x4e2d08(0x2b8)][_0x4e2d08(0x340)]('loading'),this[_0x4e2d08(0x1ee)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x1814ec=_0x4e2d08;this['classList']['remove'](_0x1814ec(0x2c0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x5d0fe1=>{const _0x2729fa=_0x4e2d08;console[_0x2729fa(0x1a3)]('Error\x20loading\x20ribbons:',_0x5d0fe1),this[_0x2729fa(0x2b8)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2044bd=_0x2729fa;this['innerHTML']=_0x2044bd(0x226);},0xbb8);});});}console[_0x11afb8(0x1ac)]('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x573990=a2_0x27a326;document['getElementById']('player-count')['textContent']='-',document[_0x573990(0x144)]('match-count')['textContent']='-',document['getElementById'](_0x573990(0x1bb))['textContent']='-',document[_0x573990(0x144)]('rejected-count')[_0x573990(0x32d)]='-';}function setupLadderSelector(){const _0x5114c9=document['querySelectorAll']('.ladder-switch\x20input');_0x5114c9['forEach'](_0x504faf=>{_0x504faf['addEventListener']('change',()=>{const _0x30ece5=a2_0x4eb2;currentLadder=_0x504faf[_0x30ece5(0x348)],document['body'][_0x30ece5(0x21d)]('data-ladder',currentLadder);const _0x19b217=document['getElementById'](_0x30ece5(0x198));_0x19b217&&(_0x19b217[_0x30ece5(0x32d)]=currentLadder),document[_0x30ece5(0x144)]('player-count')['textContent']='-',document['getElementById']('match-count')[_0x30ece5(0x32d)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById'](_0x30ece5(0x17a))['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts[_0x30ece5(0x2e3)]=null),charts['activity']&&(charts['activity']['destroy'](),charts[_0x30ece5(0x206)]=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x311b95=document['getElementById']('current-ladder-display');_0x311b95&&(_0x311b95['textContent']=currentLadder);}async function loadDashboardOverview(){const _0xb1c340=a2_0x27a326;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document['getElementById'](_0xb1c340(0x2b9))['textContent']='-',document[_0xb1c340(0x144)]('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0x2834d2=currentLadder==='D1'?'players':currentLadder==='D2'?_0xb1c340(0x336):'playersD3',_0x203b48=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0xb1c340(0x1c9),_0x2d61ba=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x187c91=currentLadder==='D1'?_0xb1c340(0x153):currentLadder==='D2'?_0xb1c340(0x2c2):'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x2834d2+',\x20'+_0x203b48);const _0x3c6e0d=await getDocs(collection(db,_0x2834d2)),_0xd6b367=_0x3c6e0d['size'],_0x4cefd3=await getDocs(collection(db,_0x203b48)),_0x50dd34=_0x4cefd3['size'],_0x174e0e=await getDocs(collection(db,_0x2d61ba)),_0x1e5127=_0x174e0e['size'],_0x159e6c=await getDocs(collection(db,_0x187c91)),_0x18d495=_0x159e6c[_0xb1c340(0x2ac)];return document[_0xb1c340(0x144)]('player-count')['textContent']=_0xd6b367,document['getElementById']('match-count')['textContent']=_0x50dd34,document[_0xb1c340(0x144)]('pending-count')['textContent']=_0x1e5127,document['getElementById']('rejected-count')['textContent']=_0x18d495,await createRankDistributionChart(),await createActivityChart(),console['log'](_0xb1c340(0x234)),!![];}catch(_0x15ac6d){console['error'](_0xb1c340(0x16c),_0x15ac6d);throw _0x15ac6d;}}async function createRankDistributionChart(){const _0x10b59b=a2_0x27a326;try{const _0x3e05c9=collection(db,currentLadder==='D1'?_0x10b59b(0x21c):_0x10b59b(0x336)),_0x3ec8e2=await getDocs(_0x3e05c9),_0x59c592={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x3ec8e2[_0x10b59b(0x2b0)](_0x222117=>{const _0x16e953=_0x10b59b,_0x249727=_0x222117['data'](),_0x3e5024=_0x249727['eloRating']||0x4b0;if(_0x3e5024>=0x7d0)_0x59c592['Emerald']++;else{if(_0x3e5024>=0x708)_0x59c592['Gold']++;else{if(_0x3e5024>=0x640)_0x59c592['Silver']++;else{if(_0x3e5024>=0x578)_0x59c592[_0x16e953(0x2d0)]++;else _0x59c592['Unranked']++;}}}});const _0x37f0bb=document['getElementById']('rank-distribution-chart');charts[_0x10b59b(0x2e3)]&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0x37f0bb,{'type':'doughnut','data':{'labels':Object['keys'](_0x59c592),'datasets':[{'data':Object['values'](_0x59c592),'backgroundColor':['#808080','#CD7F32','#C0C0C0','#FFD700',_0x10b59b(0x2f8)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x10b59b(0x28e)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x127b52){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x127b52),document[_0x10b59b(0x144)](_0x10b59b(0x176))['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x56f5f1=a2_0x27a326;try{const _0xdb667e=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x5bbe51=collection(db,_0xdb667e),_0x15fe0e=new Date();_0x15fe0e['setDate'](_0x15fe0e['getDate']()-0x7);const _0x40aba4=query(_0x5bbe51,where('approvedAt','>=',_0x15fe0e),orderBy(_0x56f5f1(0x27c),'asc')),_0x31bc61=await getDocs(_0x40aba4),_0x346365=[_0x56f5f1(0x229),'Monday','Tuesday','Wednesday','Thursday','Friday',_0x56f5f1(0x32e)],_0x32bf48=_0x346365['reduce']((_0x2afdc7,_0x4e6f9e)=>({..._0x2afdc7,[_0x4e6f9e]:0x0}),{});_0x31bc61['forEach'](_0x2eff5b=>{const _0x393c16=_0x56f5f1,_0x44ac1a=_0x2eff5b[_0x393c16(0x20a)]();if(_0x44ac1a['approvedAt']){const _0x4be98f=_0x346365[new Date(_0x44ac1a['approvedAt'][_0x393c16(0x147)]*0x3e8)['getDay']()];_0x32bf48[_0x4be98f]++;}});const _0xfa1a65=document[_0x56f5f1(0x144)]('activity-chart');charts[_0x56f5f1(0x206)]&&charts['activity'][_0x56f5f1(0x170)](),charts['activity']=new Chart(_0xfa1a65,{'type':_0x56f5f1(0x184),'data':{'labels':_0x346365,'datasets':[{'label':'Matches\x20Played','data':_0x346365['map'](_0xf6fa1b=>_0x32bf48[_0xf6fa1b]),'backgroundColor':currentLadder==='D1'?_0x56f5f1(0x1ad):'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0x56f5f1(0x36c):_0x56f5f1(0x298),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x56f5f1(0x28e)},'grid':{'color':_0x56f5f1(0x1ae)}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x56f5f1(0x1ae)}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x3ae00d){console['error']('Error\x20creating\x20activity\x20chart:',_0x3ae00d),document[_0x56f5f1(0x144)]('activity-chart')[_0x56f5f1(0x1ee)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x5ca776=a2_0x27a326,_0x135053=document['getElementById']('players-table-body');if(!_0x135053)return;_0x135053['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x5a2f5d='players';if(currentLadder==='D2')_0x5a2f5d='playersD2';else currentLadder==='D3'&&(_0x5a2f5d=_0x5ca776(0x19e));console['log']('Loading\x20players\x20from\x20'+_0x5a2f5d+_0x5ca776(0x28a));const _0x3ec5b6=collection(db,_0x5a2f5d),_0x55d436=query(_0x3ec5b6,orderBy('eloRating','desc')),_0x4242a5=await getDocs(_0x55d436);if(_0x4242a5[_0x5ca776(0x31c)]){_0x135053[_0x5ca776(0x1ee)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x135053['innerHTML']='';let _0x157750=0x1;_0x4242a5['forEach'](_0xf87880=>{const _0x54fd49=_0x5ca776,_0xf2e63a=_0xf87880['data'](),_0x4a8001=getRankFromElo(_0xf2e63a['eloRating']||0x4b0),_0x433d74=getRankStyle(_0xf2e63a[_0x54fd49(0x257)]||0x4b0),_0x50abe7=document[_0x54fd49(0x30c)]('tr');_0x50abe7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x157750+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x433d74['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xf2e63a['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0xf2e63a['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x433d74['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4a8001+_0x54fd49(0x354)+(_0xf2e63a['wins']||0x0)+_0x54fd49(0x36b)+(_0xf2e63a[_0x54fd49(0x306)]||0x0)+_0x54fd49(0x178)+_0xf87880['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0xf87880['id']+_0x54fd49(0x2a5),_0x135053[_0x54fd49(0x245)](_0x50abe7),_0x157750++;}),setupPlayerActionButtons();}catch(_0x3e602f){console['error'](_0x5ca776(0x34d),_0x3e602f),_0x135053[_0x5ca776(0x1ee)]=_0x5ca776(0x26f)+_0x3e602f['message']+_0x5ca776(0x230);}}function getRankFromElo(_0x40507c){const _0x4ecd6c=a2_0x27a326;if(_0x40507c>=0x7d0)return'Emerald';if(_0x40507c>=0x708)return'Gold';if(_0x40507c>=0x640)return'Silver';if(_0x40507c>=0x578)return _0x4ecd6c(0x2d0);return'Unranked';}function setupPlayerActionButtons(){const _0xe3bd6e=a2_0x27a326;document[_0xe3bd6e(0x355)]('.edit-btn')['forEach'](_0xc59748=>{const _0xc19b4d=_0xe3bd6e;_0xc59748[_0xc19b4d(0x2fa)](_0xc19b4d(0x356),async _0x5a2823=>{const _0x4935ad=_0xc19b4d,_0x190b99=_0x5a2823[_0x4935ad(0x281)]['dataset']['id'];openEditPlayerModal(_0x190b99);});}),document['querySelectorAll']('.delete-btn')['forEach'](_0x5e2949=>{_0x5e2949['addEventListener']('click',async _0x32e856=>{const _0x30d40a=a2_0x4eb2,_0x52927b=_0x32e856[_0x30d40a(0x281)][_0x30d40a(0x29f)]['id'];confirmDeletePlayer(_0x52927b);});});}async function openEditPlayerModal(_0xfd8b2e){const _0xd4e851=a2_0x27a326;try{const _0x585458=currentLadder==='D1'?'players':'playersD2',_0x4fd59b=doc(db,_0x585458,_0xfd8b2e),_0x54114d=await getDoc(_0x4fd59b);if(!_0x54114d['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x33dc90=_0x54114d['data'](),_0x31e4da=document[_0xd4e851(0x144)](_0xd4e851(0x18f)),_0x1e8a3d=document['getElementById']('edit-username'),_0x1a2d62=document['getElementById'](_0xd4e851(0x2f1)),_0x4fe8f=document[_0xd4e851(0x144)]('edit-wins'),_0x484919=document['getElementById']('edit-losses');_0x1e8a3d[_0xd4e851(0x348)]=_0x33dc90['username']||'',_0x1a2d62[_0xd4e851(0x348)]=_0x33dc90[_0xd4e851(0x257)]||0x4b0,_0x4fe8f[_0xd4e851(0x348)]=_0x33dc90['wins']||0x0,_0x484919[_0xd4e851(0x348)]=_0x33dc90['losses']||0x0,_0x31e4da[_0xd4e851(0x29f)]['playerId']=_0xfd8b2e,_0x31e4da[_0xd4e851(0x2b8)]['add'](_0xd4e851(0x27b));}catch(_0x36d899){console['error'](_0xd4e851(0x11c),_0x36d899),showNotification(_0xd4e851(0x299),_0xd4e851(0x1a3));}}async function saveEditedPlayer(){const _0x2616f9=a2_0x27a326;try{const _0x4bdcb1=document['getElementById']('edit-player-modal'),_0x50c958=_0x4bdcb1['dataset']['playerId'];if(!_0x50c958){showNotification('No\x20player\x20selected','error');return;}const _0x214cf0=document[_0x2616f9(0x144)](_0x2616f9(0x11b)),_0x1d35a7=document['getElementById']('edit-elo'),_0x439a78=document['getElementById']('edit-wins'),_0x3839ae=document['getElementById']('edit-losses'),_0x2dfeef=_0x214cf0[_0x2616f9(0x348)]['trim'](),_0x5ce49d=parseInt(_0x1d35a7[_0x2616f9(0x348)]),_0xf0bf0d=parseInt(_0x439a78[_0x2616f9(0x348)]),_0x349102=parseInt(_0x3839ae['value']);if(!_0x2dfeef||isNaN(_0x5ce49d)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x665cb3=currentLadder==='D1'?_0x2616f9(0x21c):'playersD2',_0x5b263b=doc(db,_0x665cb3,_0x50c958),_0x3e1e32=await getDoc(_0x5b263b),_0x397fef=_0x3e1e32['exists']()?_0x3e1e32['data']():{},_0x27cdf6=_0x397fef[_0x2616f9(0x257)]||0x4b0;await updateDoc(_0x5b263b,{'username':_0x2dfeef,'eloRating':_0x5ce49d,'wins':_0xf0bf0d||0x0,'losses':_0x349102||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x2616f9(0x2d6)]});if(_0x5ce49d!==_0x27cdf6){const _0xf943ce=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0xf943ce),{'player':_0x2dfeef,'previousElo':_0x27cdf6,'newElo':_0x5ce49d,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser'][_0x2616f9(0x2d6)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0xfa5211){console['error']('Error\x20updating\x20player:',_0xfa5211),showNotification(_0x2616f9(0x305)+_0xfa5211[_0x2616f9(0x2e9)],'error');}}function closeEditPlayerModal(){const _0x1e4303=a2_0x27a326,_0x4e9aea=document['getElementById'](_0x1e4303(0x18f));_0x4e9aea[_0x1e4303(0x2b8)]['remove'](_0x1e4303(0x27b)),_0x4e9aea['dataset'][_0x1e4303(0x1ea)]='';}async function confirmDeletePlayer(_0x46e04e){const _0x1e75b4=a2_0x27a326;if(confirm(_0x1e75b4(0x17b)))try{const _0x154c6a=currentLadder==='D1'?'players':_0x1e75b4(0x336);await deleteDoc(doc(db,_0x154c6a,_0x46e04e)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x3ea6f4){console[_0x1e75b4(0x1a3)]('Error\x20deleting\x20player:',_0x3ea6f4),showNotification(_0x1e75b4(0x16d)+_0x3ea6f4[_0x1e75b4(0x2e9)],'error');}}async function setupManagePlayersSection(){const _0xd09784=a2_0x27a326,_0xd52f0e=document[_0xd09784(0x144)]('add-player-form');_0xd52f0e&&_0xd52f0e[_0xd09784(0x2fa)]('submit',async _0x55741e=>{const _0x329d60=_0xd09784;_0x55741e[_0x329d60(0x2a0)](),await addNewPlayer();});const _0x3009cb=document['getElementById'](_0xd09784(0x160));_0x3009cb&&_0x3009cb[_0xd09784(0x2fa)]('input',debounce(filterPlayerTable,0x12c));const _0x5e71d8=document[_0xd09784(0x144)](_0xd09784(0x2b2));_0x5e71d8&&_0x5e71d8['addEventListener']('click',saveEditedPlayer);const _0x27294d=document['getElementById'](_0xd09784(0x220));_0x27294d&&_0x27294d['addEventListener']('click',closeEditPlayerModal);const _0x56bac2=document[_0xd09784(0x144)](_0xd09784(0x18f));_0x56bac2&&_0x56bac2[_0xd09784(0x2fa)](_0xd09784(0x356),_0x3d56d2=>{_0x3d56d2['target']===_0x56bac2&&closeEditPlayerModal();});const _0x2cda45=document[_0xd09784(0x144)]('players-ladder-selector');_0x2cda45&&_0x2cda45[_0xd09784(0x2fa)]('change',()=>{currentLadder=_0x2cda45['value'],loadPlayersData();});}async function addNewPlayer(){const _0x49e97f=a2_0x27a326;try{const _0x1b035a=document['getElementById']('new-player-username'),_0x2af991=document['getElementById']('new-player-elo'),_0x569149=_0x1b035a[_0x49e97f(0x348)]['trim'](),_0x43954d=parseInt(_0x2af991['value'])||0x4b0;if(!_0x569149){alert(_0x49e97f(0x211));return;}console['log'](_0x49e97f(0x2a2)+_0x569149+'\x20with\x20ELO\x20'+_0x43954d+'\x20to\x20'+currentLadder+_0x49e97f(0x2b3));let _0x4d8549='players',_0x283782=_0x49e97f(0x1e2);if(currentLadder==='D2')_0x4d8549='playersD2',_0x283782='eloHistoryD2';else currentLadder==='D3'&&(_0x4d8549='playersD3',_0x283782=_0x49e97f(0x15d));const _0x1dd222=query(collection(db,_0x4d8549),where(_0x49e97f(0x256),'==',_0x569149)),_0x1ddd1e=await getDocs(_0x1dd222);if(!_0x1ddd1e['empty']){alert(_0x49e97f(0x36d)+_0x569149+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x2714ed=auth['currentUser'],_0x4aa020={'username':_0x569149,'eloRating':_0x43954d,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x2714ed?_0x2714ed['email']:_0x49e97f(0x1dd),'gameMode':currentLadder};await addDoc(collection(db,_0x4d8549),_0x4aa020),await addDoc(collection(db,_0x283782),{'player':_0x569149,'previousElo':0x4b0,'newElo':_0x43954d,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x2714ed?_0x2714ed['email']:'admin','gameMode':currentLadder}),_0x1b035a['value']='',_0x2af991['value']=_0x49e97f(0x1e0),alert(_0x49e97f(0x204)+_0x569149+_0x49e97f(0x29c)+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x3bc470){console['error']('Error\x20adding\x20player:',_0x3bc470),alert('Error\x20adding\x20player:\x20'+_0x3bc470['message']);}}document['addEventListener'](a2_0x27a326(0x129),()=>{const _0x30fd30=a2_0x27a326,_0x1c47bf=document['getElementById']('add-player-form');_0x1c47bf&&_0x1c47bf['addEventListener'](_0x30fd30(0x2b6),_0x1bd0d4=>{_0x1bd0d4['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x23d801=a2_0x27a326,_0x5b799a=document['getElementById']('player-search')['value']['toLowerCase'](),_0x5aadfc=document['querySelectorAll']('#players-table-body\x20tr');let _0x338ef2=0x0;_0x5aadfc[_0x23d801(0x2b0)](_0x1ad818=>{const _0x1f5d79=_0x23d801,_0x4aefbd=_0x1ad818['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x4aefbd['includes'](_0x5b799a)?(_0x1ad818[_0x1f5d79(0x21a)][_0x1f5d79(0x1d7)]='',_0x338ef2++):_0x1ad818['style']['display']='none';});const _0xef8c90=document[_0x23d801(0x144)](_0x23d801(0x276));_0xef8c90&&(_0x338ef2===0x0&&_0x5b799a!==''?_0xef8c90['style']['display']='block':_0xef8c90['style']['display']='none');}function debounce(_0x37adf0,_0x1c8fb5){let _0x5d8a56;return function(..._0x231ead){const _0x4d6847=a2_0x4eb2;clearTimeout(_0x5d8a56),_0x5d8a56=setTimeout(()=>_0x37adf0[_0x4d6847(0x1d8)](this,_0x231ead),_0x1c8fb5);};}async function loadEloHistory(_0x109859=0x1){const _0x293e4f=a2_0x27a326,_0x191edf=document['getElementById']('elo-history-table-body'),_0x574e83=currentLadder[_0x293e4f(0x278)]();if(!_0x191edf)return;_0x191edf[_0x293e4f(0x1ee)]=_0x293e4f(0x137);try{const _0x1f2777=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':_0x293e4f(0x15d),_0xdf2239=collection(db,_0x1f2777);let _0x243770;if(_0x109859>eloHistoryPagination[_0x574e83]['page']&&eloHistoryPagination[_0x574e83]['lastVisible'])_0x243770=query(_0xdf2239,orderBy(_0x293e4f(0x1cd),'desc'),startAfter(eloHistoryPagination[_0x574e83]['lastVisible']),limit(PAGE_SIZE));else _0x109859<eloHistoryPagination[_0x574e83][_0x293e4f(0x21f)]&&eloHistoryPagination[_0x574e83]['firstVisible']?_0x243770=query(_0xdf2239,orderBy(_0x293e4f(0x1cd),'desc'),endBefore(eloHistoryPagination[_0x574e83][_0x293e4f(0x174)]),limitToLast(PAGE_SIZE)):_0x243770=query(_0xdf2239,orderBy(_0x293e4f(0x1cd),'desc'),limit(PAGE_SIZE));const _0x663d51=await getDocs(_0x243770);if(_0x663d51[_0x293e4f(0x31c)]){_0x191edf['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document[_0x293e4f(0x144)](_0x574e83+'-page-indicator')[_0x293e4f(0x32d)]='Page\x201';return;}eloHistoryPagination[_0x574e83]['page']=_0x109859,eloHistoryPagination[_0x574e83]['firstVisible']=_0x663d51['docs'][0x0],eloHistoryPagination[_0x574e83]['lastVisible']=_0x663d51['docs'][_0x663d51['docs'][_0x293e4f(0x2f0)]-0x1];const _0x7f4c4d=new Map();_0x191edf['innerHTML']='';const _0x3a93c9=async _0x3ec744=>{const _0x47c0b9=_0x293e4f;if(typeof _0x3ec744!==_0x47c0b9(0x1ca)||_0x3ec744['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x3ec744))return _0x3ec744;if(_0x7f4c4d['has'](_0x3ec744))return _0x7f4c4d['get'](_0x3ec744);try{for(const _0x2843f5 of['players','playersD2','playersD3',_0x47c0b9(0x223)]){const _0x5629dd=await getDoc(doc(db,_0x2843f5,_0x3ec744));if(_0x5629dd['exists']()&&_0x5629dd['data']()['username']){const _0x51f3b0=_0x5629dd['data']()[_0x47c0b9(0x256)];return _0x7f4c4d[_0x47c0b9(0x284)](_0x3ec744,_0x51f3b0),_0x51f3b0;}}return _0x3ec744;}catch(_0x53c985){return console['warn'](_0x47c0b9(0x352)+_0x3ec744+':',_0x53c985),_0x3ec744;}};for(const _0x28b33d of _0x663d51['docs']){const _0x49e3f4=_0x28b33d[_0x293e4f(0x20a)](),_0x46ed88=document[_0x293e4f(0x30c)]('tr'),_0x4e035f=_0x49e3f4['timestamp']?new Date(_0x49e3f4['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x40e19f=_0x49e3f4['newElo']-_0x49e3f4['previousElo'],_0x6d62f0=_0x40e19f>0x0?'positive-change':_0x40e19f<0x0?_0x293e4f(0x253):'',_0x52efc4=_0x40e19f>0x0?'+':'',_0xe13ed7=_0x49e3f4['player']||_0x49e3f4['username']||_0x49e3f4['userId']||'N/A',_0x1745a4=await _0x3a93c9(_0xe13ed7);_0x46ed88['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x4e035f+_0x293e4f(0x24b)+_0x1745a4+_0x293e4f(0x2e4)+(_0x49e3f4['previousElo']||_0x293e4f(0x15c))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x49e3f4[_0x293e4f(0x1f7)]||'N/A')+_0x293e4f(0x35b)+_0x6d62f0+'\x22>'+_0x52efc4+_0x40e19f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x49e3f4['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x49e3f4[_0x293e4f(0x2d9)]||_0x49e3f4['promotedBy']||_0x49e3f4['demotedBy']||_0x293e4f(0x2c4))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x191edf['appendChild'](_0x46ed88);}document[_0x293e4f(0x144)](_0x574e83+_0x293e4f(0x222))['textContent']='Page\x20'+_0x109859;const _0x1847c5=document['getElementById'](_0x574e83+'-prev-page'),_0x4c5446=document['getElementById'](_0x574e83+'-next-page');if(_0x1847c5)_0x1847c5['disabled']=_0x109859<=0x1;const _0x5a63d5=query(_0xdf2239,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x574e83]['lastVisible']),limit(0x1)),_0x180b3c=await getDocs(_0x5a63d5);if(_0x4c5446)_0x4c5446[_0x293e4f(0x317)]=_0x180b3c['empty'];}catch(_0xc9adef){console[_0x293e4f(0x1a3)]('Error\x20loading\x20ELO\x20history:',_0xc9adef),_0x191edf['innerHTML']=_0x293e4f(0x1db)+_0xc9adef['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x2cb46f){const _0x597f49=a2_0x27a326;switch(_0x2cb46f){case'match_result':return'Match\x20Result';case'promotion':return'Promotion';case _0x597f49(0x18c):return'Demotion';case _0x597f49(0x251):return _0x597f49(0x2fc);case'initial_placement':return'Initial\x20Placement';default:return _0x2cb46f||_0x597f49(0x18a);}}function setupEloHistorySection(){const _0x28ffab=a2_0x27a326;document['getElementById']('d1-prev-page')['addEventListener'](_0x28ffab(0x356),()=>{const _0x398184=_0x28ffab;loadEloHistory(eloHistoryPagination['d1'][_0x398184(0x21f)]-0x1);}),document['getElementById']('d1-next-page')[_0x28ffab(0x2fa)]('click',()=>{const _0x4be190=_0x28ffab;loadEloHistory(eloHistoryPagination['d1'][_0x4be190(0x21f)]+0x1);}),document['getElementById'](_0x28ffab(0x133))['addEventListener'](_0x28ffab(0x356),()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x28ffab(0x144)](_0x28ffab(0x2f3))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x270f7b=document['getElementById'](_0x28ffab(0x265)),_0x5e2398=document['getElementById'](_0x28ffab(0x1c1));_0x270f7b&&_0x270f7b['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x5e2398&&_0x5e2398[_0x28ffab(0x2fa)]('click',()=>{const _0x32cd7a=_0x28ffab;loadEloHistory(eloHistoryPagination['d3'][_0x32cd7a(0x21f)]+0x1);});const _0x289044=document[_0x28ffab(0x144)]('elo-history-search');_0x289044&&_0x289044['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0xd8c465=document['getElementById']('history-type-filter');_0xd8c465&&_0xd8c465['addEventListener']('change',applyEloHistoryFilters);const _0x3fce6d=document[_0x28ffab(0x144)](_0x28ffab(0x1ec));_0x3fce6d&&_0x3fce6d['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x27972d=a2_0x27a326,_0xc8a880=document['getElementById'](_0x27972d(0x347))[_0x27972d(0x348)][_0x27972d(0x278)](),_0x13ed29=document[_0x27972d(0x355)]('#elo-history-table-body\x20tr');let _0x2c2b27=0x0;_0x13ed29['forEach'](_0x2b6728=>{const _0xf1812d=_0x27972d;if(_0x2b6728[_0xf1812d(0x2b8)]['contains']('loading-cell')||_0x2b6728['classList']['contains'](_0xf1812d(0x17f))||_0x2b6728['classList'][_0xf1812d(0x14b)]('error-state'))return;const _0x503e4b=_0x2b6728['querySelector']('.player')?.['textContent']['toLowerCase']()||'',_0x3bc500=_0x2b6728['querySelector']('.type')?.[_0xf1812d(0x32d)][_0xf1812d(0x278)]()||'',_0x78cd1=_0x2b6728['querySelector']('.admin-action')?.[_0xf1812d(0x32d)][_0xf1812d(0x278)]()||'';_0x503e4b['includes'](_0xc8a880)||_0x3bc500['includes'](_0xc8a880)||_0x78cd1[_0xf1812d(0x169)](_0xc8a880)?(_0x2b6728[_0xf1812d(0x21a)]['display']='',_0x2c2b27++):_0x2b6728['style'][_0xf1812d(0x1d7)]=_0xf1812d(0x1b7);});}async function applyEloHistoryFilters(){const _0x2a4107=a2_0x27a326,_0x3fb6b1=document[_0x2a4107(0x144)]('history-start-date')['value'],_0x2eae28=document[_0x2a4107(0x144)]('history-end-date')[_0x2a4107(0x348)],_0x9a921f=document['getElementById'](_0x2a4107(0x1ba))['value'],_0x282ec9=currentLadder[_0x2a4107(0x278)]();eloHistoryPagination[_0x282ec9]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x31f86f=document[_0x2a4107(0x144)]('elo-history-table-body');_0x31f86f[_0x2a4107(0x1ee)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x3e77f8=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x1adbf2=collection(db,_0x3e77f8);let _0xd2a84d=[orderBy('timestamp',_0x2a4107(0x16e))];if(_0x3fb6b1){const _0x15833f=new Date(_0x3fb6b1);_0x15833f['setHours'](0x0,0x0,0x0,0x0),_0xd2a84d['push'](where('timestamp','>=',_0x15833f));}if(_0x2eae28){const _0xc0d7c2=new Date(_0x2eae28);_0xc0d7c2[_0x2a4107(0x35c)](0x17,0x3b,0x3b,0x3e7),_0xd2a84d['push'](where('timestamp','<=',_0xc0d7c2));}_0x9a921f&&_0x9a921f!=='all'&&_0xd2a84d[_0x2a4107(0x221)](where(_0x2a4107(0x1a1),'==',_0x9a921f));_0xd2a84d['push'](limit(PAGE_SIZE));const _0x2b78cc=query(_0x1adbf2,..._0xd2a84d),_0x680936=await getDocs(_0x2b78cc);!_0x680936['empty']&&(eloHistoryPagination[_0x282ec9]['firstVisible']=_0x680936[_0x2a4107(0x324)][0x0],eloHistoryPagination[_0x282ec9][_0x2a4107(0x26a)]=_0x680936[_0x2a4107(0x324)][_0x680936['docs']['length']-0x1]);_0x31f86f[_0x2a4107(0x1ee)]='';if(_0x680936['empty']){_0x31f86f['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x680936['forEach'](_0x456a6f=>{const _0x1051c6=_0x2a4107,_0x460618=_0x456a6f['data'](),_0x2551ad=document['createElement']('tr'),_0x533942=_0x460618['timestamp']?new Date(_0x460618['timestamp'][_0x1051c6(0x147)]*0x3e8)[_0x1051c6(0x36e)]():'N/A',_0x3f41a5=_0x460618[_0x1051c6(0x1f7)]-_0x460618['previousElo'],_0x55ce82=_0x3f41a5>0x0?'positive-change':_0x3f41a5<0x0?'negative-change':'',_0x5b017c=_0x3f41a5>0x0?'+':'',_0x27701c=_0x460618['player']||_0x460618[_0x1051c6(0x256)]||_0x460618['userId']||'N/A';_0x2551ad[_0x1051c6(0x1ee)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x533942+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x27701c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x460618['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x460618['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x55ce82+'\x22>'+_0x5b017c+_0x3f41a5+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x460618['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x460618['modifiedBy']||_0x460618[_0x1051c6(0x148)]||_0x460618['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x31f86f['appendChild'](_0x2551ad);}),document['getElementById'](_0x282ec9+'-page-indicator')['textContent']='Page\x201';}catch(_0x43b348){console['error']('Error\x20applying\x20filters:',_0x43b348),_0x31f86f[_0x2a4107(0x1ee)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x43b348[_0x2a4107(0x2e9)]+_0x2a4107(0x230);}}function resetEloHistoryFilters(){const _0x267222=a2_0x27a326;document['getElementById']('history-start-date')[_0x267222(0x348)]='',document['getElementById']('history-end-date')[_0x267222(0x348)]='',document['getElementById']('history-type-filter')['value']=_0x267222(0x143),document[_0x267222(0x144)]('elo-history-search')['value']='';const _0x111358=currentLadder[_0x267222(0x278)]();eloHistoryPagination[_0x111358]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x1ba632=a2_0x27a326,_0x31a36f=document['getElementById']('promote-player-btn'),_0x56bb4b=document[_0x1ba632(0x144)]('promote-modal'),_0x243b59=document[_0x1ba632(0x144)]('promote-form');_0x31a36f&&_0x56bb4b&&_0x243b59&&(_0x31a36f[_0x1ba632(0x2fa)]('click',()=>{const _0x515830=_0x1ba632;_0x56bb4b['classList'][_0x515830(0x340)]('active');}),_0x56bb4b['addEventListener']('click',_0x28e909=>{const _0x23485e=_0x1ba632;_0x28e909[_0x23485e(0x1c8)]===_0x56bb4b&&_0x56bb4b['classList']['remove'](_0x23485e(0x27b));}),_0x243b59['addEventListener']('submit',async _0x5425ea=>{const _0x516edd=_0x1ba632;_0x5425ea['preventDefault']();const _0x15197f=document['getElementById']('promote-username'),_0x1f2331=document['getElementById']('promote-ladder'),_0x20dfa6=_0x15197f['value']['trim'](),_0x589ca1=_0x1f2331['value'];if(!_0x20dfa6){showNotification('Please\x20enter\x20a\x20username',_0x516edd(0x1a3));return;}try{await promotePlayer(_0x20dfa6,_0x589ca1),_0x56bb4b['classList'][_0x516edd(0x24e)]('active'),_0x15197f['value']='';}catch(_0x15893b){showNotification(_0x15893b['message'],'error');}}),document['getElementById']('cancel-promote-btn')[_0x1ba632(0x2fa)]('click',()=>{_0x56bb4b['classList']['remove']('active');}));const _0x58a822=document['getElementById'](_0x1ba632(0x337)),_0x14b361=document[_0x1ba632(0x144)]('demote-modal'),_0x2f8afa=document['getElementById'](_0x1ba632(0x33a));_0x58a822&&_0x14b361&&_0x2f8afa&&(_0x58a822[_0x1ba632(0x2fa)]('click',()=>{const _0x54a975=_0x1ba632;_0x14b361[_0x54a975(0x2b8)][_0x54a975(0x340)]('active');}),_0x14b361['addEventListener']('click',_0x3efd3e=>{const _0x43c62f=_0x1ba632;_0x3efd3e[_0x43c62f(0x1c8)]===_0x14b361&&_0x14b361['classList']['remove'](_0x43c62f(0x27b));}),_0x2f8afa['addEventListener']('submit',async _0x4e6596=>{const _0x327855=_0x1ba632;_0x4e6596[_0x327855(0x2a0)]();const _0x349ffb=document['getElementById'](_0x327855(0x214)),_0x3fc712=document['getElementById'](_0x327855(0x1f3)),_0x4a784d=_0x349ffb['value']['trim'](),_0x48eca2=_0x3fc712[_0x327855(0x348)];if(!_0x4a784d){alert(_0x327855(0x194));return;}try{await demotePlayer(_0x4a784d,_0x48eca2),document[_0x327855(0x144)](_0x327855(0x297))[_0x327855(0x2b8)]['remove'](_0x327855(0x27b)),document['getElementById']('demote-username')['value']='';}catch(_0x3c5b6e){console['error']('Error\x20in\x20demotion:',_0x3c5b6e);}}));const _0x331c5f=document['getElementById']('set-elo-btn'),_0x2cbf58=document['getElementById'](_0x1ba632(0x2a4)),_0x12959c=document['getElementById'](_0x1ba632(0x225));_0x331c5f&&_0x2cbf58&&_0x12959c&&(_0x331c5f['addEventListener']('click',()=>{_0x2cbf58['classList']['add']('active');}),_0x2cbf58[_0x1ba632(0x2fa)]('click',_0x18cf9a=>{const _0x321aa2=_0x1ba632;_0x18cf9a['target']===_0x2cbf58&&_0x2cbf58['classList']['remove'](_0x321aa2(0x27b));}),_0x12959c[_0x1ba632(0x2fa)](_0x1ba632(0x2b6),async _0x31f9ae=>{const _0x1da9c4=_0x1ba632;_0x31f9ae['preventDefault']();const _0x5eef16=document['getElementById']('set-elo-username'),_0x541e77=document['getElementById']('set-elo-value');let _0x143dac;const _0x599760=document[_0x1da9c4(0x144)]('set-elo-ladder'),_0x14fb97=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x599760)_0x143dac=_0x599760[_0x1da9c4(0x348)];else _0x14fb97?_0x143dac=_0x14fb97['value']:_0x143dac='D1';if(!_0x5eef16||!_0x541e77){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x59347c=_0x5eef16['value']['trim'](),_0x4bf714=parseInt(_0x541e77['value']);if(!_0x59347c||isNaN(_0x4bf714)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x59347c,_0x4bf714,_0x143dac),_0x2cbf58['classList']['remove']('active'),_0x5eef16[_0x1da9c4(0x348)]='',_0x541e77['value']='';}catch(_0x317bcd){showNotification(_0x317bcd[_0x1da9c4(0x2e9)],'error');}}),document[_0x1ba632(0x144)](_0x1ba632(0x207))[_0x1ba632(0x2fa)]('click',()=>{const _0x30b4a7=_0x1ba632;_0x2cbf58['classList'][_0x30b4a7(0x24e)](_0x30b4a7(0x27b));}));const _0x3ad9d3=document[_0x1ba632(0x144)]('set-role-modal'),_0x259a1d=document['getElementById']('set-role-form');if(_0x3ad9d3&&_0x259a1d){_0x3ad9d3['addEventListener']('click',_0x27dd35=>{_0x27dd35['target']===_0x3ad9d3&&closeModalHandler();}),_0x259a1d[_0x1ba632(0x2fa)]('submit',async _0x547078=>{const _0x23a22e=_0x1ba632;_0x547078['preventDefault']();const _0x300dbb=document['getElementById']('role-username'),_0x7aae00=document['getElementById']('role-name'),_0xed3c60=document[_0x23a22e(0x144)]('role-color'),_0x351d18=_0x300dbb['value'][_0x23a22e(0x1b2)](),_0xc4ccab=_0x7aae00[_0x23a22e(0x348)]['trim'](),_0x54e1ca=_0xed3c60['value'];if(!_0x351d18){showNotification(_0x23a22e(0x314),_0x23a22e(0x1a3));return;}try{await setUserRole(_0x351d18,_0xc4ccab,_0x54e1ca),closeModalHandler(),loadUsersWithRoles();}catch(_0x57cb6d){}});const _0x410500=document['getElementById']('cancel-role-btn');_0x410500&&(_0x410500[_0x1ba632(0x1c4)]('click',closeModalHandler),_0x410500['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x2d9e7d,_0x2220d3){const _0x22afce=a2_0x27a326;try{console['log']('Attempting\x20to\x20promote\x20'+_0x2d9e7d+'\x20in\x20'+_0x2220d3+'\x20ladder');const _0x57b1be=auth['currentUser'];if(!_0x57b1be)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x597d5c=_0x2220d3==='D2'?'playersD2':'players',_0x1c77c2=_0x2220d3==='D2'?_0x22afce(0x155):_0x22afce(0x1e2);console['log'](_0x22afce(0x239)+_0x597d5c);const _0x36e34d=collection(db,_0x597d5c),_0x2a455f=query(_0x36e34d,where('username','==',_0x2d9e7d)),_0x3afe81=await getDocs(_0x2a455f);if(_0x3afe81[_0x22afce(0x31c)]){alert('Player\x20not\x20found\x20in\x20'+_0x2220d3+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x2220d3+_0x22afce(0x2b3));}const _0x3e5d50=_0x3afe81[_0x22afce(0x324)][0x0],_0xaa1588=_0x3e5d50['data'](),_0x52bd8b=_0xaa1588['eloRating']||0x4b0,_0x25489e=_0x3e5d50['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x52bd8b);const _0x141736=[{'name':_0x22afce(0x2d0),'elo':0x578},{'name':_0x22afce(0x228),'elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0xd6abad=_0x141736[_0x22afce(0x233)](_0x2c3305=>_0x2c3305['elo']>_0x52bd8b);if(!_0xd6abad){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x2220d3+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x2220d3+_0x22afce(0x2b3));}console['log']('Promoting\x20player\x20to\x20'+_0xd6abad['name']+'\x20('+_0xd6abad[_0x22afce(0x1cc)]+')'),await updateDoc(doc(db,_0x597d5c,_0x3e5d50['id']),{'eloRating':_0xd6abad['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x57b1be[_0x22afce(0x2d6)]||_0x22afce(0x1dd)}),await addDoc(collection(db,_0x1c77c2),{'player':_0x2d9e7d,'previousElo':_0x52bd8b,'newElo':_0xd6abad['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0xd6abad['name'],'promotedBy':_0x57b1be[_0x22afce(0x2d6)]||_0x22afce(0x1dd),'gameMode':_0x2220d3});try{const {promotionManager:_0x2c5685}=await import(_0x22afce(0x1eb)),_0xcc3c0f=_0x2c5685['getRankName'](_0x52bd8b),_0x3dab28=_0xd6abad['name'];await _0x2c5685[_0x22afce(0x159)](_0x25489e,_0x2d9e7d,_0x52bd8b,_0xd6abad[_0x22afce(0x1cc)],_0xcc3c0f,_0x3dab28,_0x22afce(0x192),{'displayName':_0x2d9e7d,'source':'admin','adminUser':_0x57b1be['email'],'ladder':_0x2220d3}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x2adf0e){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x2adf0e);}return alert(_0x22afce(0x118)+_0x2d9e7d+_0x22afce(0x25f)+_0xd6abad['name']+'\x20('+_0xd6abad['elo']+')'),currentLadder===_0x2220d3&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0xf57dd5){console['error'](_0x22afce(0x312),_0xf57dd5),alert('Error\x20promoting\x20player:\x20'+_0xf57dd5['message']);throw _0xf57dd5;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x48d942=a2_0x27a326,_0x25e226=document['getElementById']('promote-form');_0x25e226&&_0x25e226['addEventListener'](_0x48d942(0x2b6),async _0x49a721=>{const _0x123805=_0x48d942;_0x49a721['preventDefault']();const _0x2706ce=document['getElementById'](_0x123805(0x33d))['value']['trim'](),_0x2e809d=document['querySelector'](_0x123805(0x2ce))[_0x123805(0x348)];if(!_0x2706ce){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x2706ce,_0x2e809d),document['getElementById']('promote-modal')['classList'][_0x123805(0x24e)]('active'),document['getElementById'](_0x123805(0x33d))['value']='';}catch(_0x3530c2){console['error']('Error\x20in\x20promotion:',_0x3530c2);}});});async function demotePlayer(_0x459c91,_0x206f54){const _0x2164dc=a2_0x27a326;try{console[_0x2164dc(0x1ac)]('Attempting\x20to\x20demote\x20'+_0x459c91+'\x20in\x20'+_0x206f54+'\x20ladder');const _0x2cfc4e=auth[_0x2164dc(0x331)];if(!_0x2cfc4e)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x1e25a8=_0x206f54==='D2'?_0x2164dc(0x336):_0x2164dc(0x21c),_0x15d69a=_0x206f54==='D2'?'eloHistoryD2':'eloHistory';console['log'](_0x2164dc(0x239)+_0x1e25a8);const _0x589634=collection(db,_0x1e25a8),_0xc02aff=query(_0x589634,where('username','==',_0x459c91)),_0x270069=await getDocs(_0xc02aff);if(_0x270069['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x206f54+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x206f54+'\x20ladder');}const _0x4f8fe2=_0x270069['docs'][0x0],_0x4a4e1e=_0x4f8fe2['data'](),_0x285757=_0x4a4e1e['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x285757);const _0x8a62b9=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x1ded95=_0x8a62b9[_0x2164dc(0x233)](_0xdf6365=>_0xdf6365['elo']<_0x285757);if(!_0x1ded95){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x206f54+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x206f54+'\x20ladder');}console['log'](_0x2164dc(0x2c7)+_0x1ded95['name']+'\x20('+_0x1ded95['elo']+')'),await updateDoc(doc(db,_0x1e25a8,_0x4f8fe2['id']),{'eloRating':_0x1ded95['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x2cfc4e['email']||'admin'}),await addDoc(collection(db,_0x15d69a),{'player':_0x459c91,'previousElo':_0x285757,'newElo':_0x1ded95['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x1ded95['name'],'demotedBy':_0x2cfc4e[_0x2164dc(0x2d6)]||_0x2164dc(0x1dd),'gameMode':_0x206f54});try{const {promotionManager:_0x395c48}=await import(_0x2164dc(0x1eb)),_0x4bdd5a=_0x395c48['getRankName'](_0x285757),_0x458911=_0x1ded95[_0x2164dc(0x26c)];await _0x395c48[_0x2164dc(0x159)](_0x4f8fe2['id'],_0x459c91,_0x285757,_0x1ded95[_0x2164dc(0x1cc)],_0x4bdd5a,_0x458911,'demotion',{'displayName':_0x459c91,'source':'admin','adminUser':_0x2cfc4e['email'],'ladder':_0x206f54}),console[_0x2164dc(0x1ac)]('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x1d0a50){console['error'](_0x2164dc(0x29a),_0x1d0a50);}return alert('Successfully\x20demoted\x20'+_0x459c91+'\x20to\x20'+_0x1ded95['name']+'\x20('+_0x1ded95[_0x2164dc(0x1cc)]+')'),currentLadder===_0x206f54&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x87bdd1){console[_0x2164dc(0x1a3)]('Error\x20demoting\x20player:',_0x87bdd1),alert('Error\x20demoting\x20player:\x20'+_0x87bdd1['message']);throw _0x87bdd1;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x18e492=a2_0x27a326,_0x12040a=document[_0x18e492(0x144)]('demote-form');_0x12040a&&_0x12040a[_0x18e492(0x2fa)]('submit',async _0x3c0011=>{const _0x3b1b85=_0x18e492;_0x3c0011['preventDefault']();const _0x1daae1=document['getElementById']('demote-username')[_0x3b1b85(0x348)]['trim'](),_0x4ae8fc=document[_0x3b1b85(0x125)]('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x1daae1){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x1daae1,_0x4ae8fc),document['getElementById'](_0x3b1b85(0x297))[_0x3b1b85(0x2b8)]['remove'](_0x3b1b85(0x27b)),document[_0x3b1b85(0x144)](_0x3b1b85(0x214))['value']='';}catch(_0x8912df){console['error']('Error\x20in\x20demotion:',_0x8912df);}});});async function setCustomElo(_0x3b1ef3,_0x34a987,_0x2809c6){const _0x4de14d=a2_0x27a326;try{const _0x125108=auth['currentUser'];if(!_0x125108||!isAdmin(_0x125108[_0x4de14d(0x2d6)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x4e756c=_0x2809c6==='D2'?'playersD2':'players',_0x59a90a=_0x2809c6==='D2'?'eloHistoryD2':_0x4de14d(0x1e2),_0x10099a=collection(db,_0x4e756c),_0x4e0323=query(_0x10099a,where(_0x4de14d(0x256),'==',_0x3b1ef3)),_0x5d02e4=await getDocs(_0x4e0323);if(_0x5d02e4[_0x4de14d(0x31c)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x2809c6+'\x20ladder');const _0x270532=_0x5d02e4[_0x4de14d(0x324)][0x0],_0x309be5=_0x270532['data'](),_0x5afde3=_0x309be5['eloRating']||0x4b0,_0x415eeb=writeBatch(db);_0x415eeb['update'](doc(db,_0x4e756c,_0x270532['id']),{'eloRating':_0x34a987,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x125108['email']});const _0x125315=doc(collection(db,_0x59a90a));return _0x415eeb['set'](_0x125315,{'player':_0x3b1ef3,'previousElo':_0x5afde3,'newElo':_0x34a987,'timestamp':serverTimestamp(),'type':_0x4de14d(0x251),'modifiedBy':_0x125108[_0x4de14d(0x2d6)],'gameMode':_0x2809c6}),await _0x415eeb[_0x4de14d(0x210)](),showNotification('ELO\x20rating\x20for\x20'+_0x3b1ef3+_0x4de14d(0x293)+_0x5afde3+'\x20to\x20'+_0x34a987,'success'),currentLadder===_0x2809c6&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x244d3d){console['error']('Error\x20setting\x20custom\x20ELO:',_0x244d3d);throw _0x244d3d;}}async function setUserRole(_0x161446,_0xcedab,_0x397a1d){const _0x2c5139=a2_0x27a326;try{const _0x5d28e7=auth['currentUser'];if(!_0x5d28e7||!isAdmin(_0x5d28e7['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x3979fb=_0xcedab?_0xcedab['trim']():null,_0x1568f6=_0x3979fb?_0x397a1d||'#808080':null,[_0x405575,_0x43224c]=await Promise[_0x2c5139(0x143)]([getDocs(query(collection(db,'players'),where(_0x2c5139(0x256),'==',_0x161446))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x161446)))]),_0x45fd0a=[];if(!_0x405575['empty'])_0x45fd0a['push']({'ref':_0x405575[_0x2c5139(0x324)][0x0][_0x2c5139(0x272)],'source':'D1'});if(!_0x43224c['empty'])_0x45fd0a['push']({'ref':_0x43224c['docs'][0x0][_0x2c5139(0x272)],'source':'D2'});if(_0x45fd0a[_0x2c5139(0x2f0)]===0x0){const [_0xdb15ef,_0x4dd8fa]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x161446))),getDocs(query(collection(db,_0x2c5139(0x2ec)),where('username','==',_0x161446)))]);if(!_0xdb15ef[_0x2c5139(0x31c)])_0x45fd0a['push']({'ref':_0xdb15ef['docs'][0x0][_0x2c5139(0x272)],'source':_0x2c5139(0x263)});if(!_0x4dd8fa[_0x2c5139(0x31c)])_0x45fd0a['push']({'ref':_0x4dd8fa[_0x2c5139(0x324)][0x0][_0x2c5139(0x272)],'source':'UserProfile'});}if(_0x45fd0a[_0x2c5139(0x2f0)]===0x0)throw new Error('User\x20\x22'+_0x161446+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x44087e=writeBatch(db);_0x45fd0a['forEach'](_0x2eaad1=>{const _0x1a0874=_0x2c5139;console[_0x1a0874(0x1ac)]('Updating\x20role\x20for\x20'+_0x161446+'\x20in\x20'+_0x2eaad1['source']),!_0x3979fb?_0x44087e['update'](_0x2eaad1['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x44087e['update'](_0x2eaad1['ref'],{'roleName':_0x3979fb,'roleColor':_0x1568f6,'roleAssignedBy':_0x5d28e7['email'],'roleAssignedAt':serverTimestamp()});}),await _0x44087e['commit']();const _0x2798ed=_0x3979fb?_0x2c5139(0x232)+_0x3979fb+_0x2c5139(0x19f):'Role\x20removed';return showNotification(_0x2798ed+'\x20for\x20user\x20\x22'+_0x161446+'\x22','success'),!![];}catch(_0x371a64){console['error']('Error\x20setting\x20user\x20role:',_0x371a64),showNotification(_0x2c5139(0x1b9)+_0x371a64['message'],_0x2c5139(0x1a3));throw _0x371a64;}}function showNotification(_0x501403,_0x485fe2='info'){const _0x2782d7=a2_0x27a326,_0x3252f9=document['createElement'](_0x2782d7(0x2bb));_0x3252f9['className']='notification\x20'+_0x485fe2,_0x3252f9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x485fe2)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x501403+_0x2782d7(0x335),document[_0x2782d7(0x302)][_0x2782d7(0x245)](_0x3252f9),setTimeout(()=>{const _0x144d9f=_0x2782d7;_0x3252f9[_0x144d9f(0x2b8)]['add']('active');},0xa);const _0x334eb2=setTimeout(()=>{closeNotification(_0x3252f9);},0x1388);_0x3252f9['querySelector'](_0x2782d7(0x17e))['addEventListener']('click',()=>{clearTimeout(_0x334eb2),closeNotification(_0x3252f9);});}function getNotificationIcon(_0x5cc08d){switch(_0x5cc08d){case'success':return'fa-check-circle';case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case'info':default:return'fa-info-circle';}}function closeNotification(_0x4b7232){const _0x525aae=a2_0x27a326;_0x4b7232[_0x525aae(0x2b8)]['remove'](_0x525aae(0x27b)),setTimeout(()=>{_0x4b7232['remove']();},0x12c);}function setupUserRolesSection(){const _0x31a10b=a2_0x27a326,_0x281a7b=document['getElementById'](_0x31a10b(0x164));_0x281a7b&&_0x281a7b[_0x31a10b(0x2fa)]('click',function(){const _0x5d91a0=_0x31a10b;this['classList']['add']('loading'),this['innerHTML']=_0x5d91a0(0x17d),loadUsersWithRoles()['then'](()=>{const _0x2d46d0=_0x5d91a0;this[_0x2d46d0(0x2b8)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x5d91a0(0x344)](_0x2cbecb=>{const _0x1a68d0=_0x5d91a0;console['error']('Error\x20loading\x20users:',_0x2cbecb),this[_0x1a68d0(0x2b8)][_0x1a68d0(0x24e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2aedb5=_0x1a68d0;this[_0x2aedb5(0x1ee)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0xe8300c=document['getElementById'](_0x31a10b(0x1aa));_0xe8300c&&_0xe8300c[_0x31a10b(0x2fa)]('click',()=>{const _0x2f436e=document['getElementById']('set-role-modal');_0x2f436e&&_0x2f436e['classList']['add']('active');});const _0x76493a=document[_0x31a10b(0x144)]('user-search');_0x76493a&&_0x76493a['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x569462=document['getElementById']('role-filter');_0x569462&&_0x569462['addEventListener'](_0x31a10b(0x187),filterUsersTable);}async function loadUsersWithRoles(){const _0x1d1cad=a2_0x27a326,_0x72f153=document['getElementById'](_0x1d1cad(0x29b));if(!_0x72f153)return;_0x72f153[_0x1d1cad(0x1ee)]=_0x1d1cad(0x22c);try{const [_0x5266b6,_0x1d3268,_0x70b51e,_0x2fe0e6]=await Promise[_0x1d1cad(0x143)]([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x4213ab=new Map();function _0x33f26c(_0x21600b,_0x340bfd){_0x21600b['forEach'](_0x20bc23=>{const _0x3188e1=a2_0x4eb2,_0x3b5f39=_0x20bc23['data']();if(!_0x3b5f39['username'])return;if(!_0x4213ab[_0x3188e1(0x13a)](_0x3b5f39[_0x3188e1(0x256)]))_0x4213ab[_0x3188e1(0x284)](_0x3b5f39['username'],{'username':_0x3b5f39[_0x3188e1(0x256)],'roleName':_0x3b5f39['roleName']||null,'roleColor':_0x3b5f39['roleColor']||null,'roleAssignedBy':_0x3b5f39[_0x3188e1(0x254)]||null,'roleAssignedAt':_0x3b5f39['roleAssignedAt']||null,'sources':[_0x340bfd]});else{const _0x2766fd=_0x4213ab['get'](_0x3b5f39['username']);_0x3b5f39[_0x3188e1(0x339)]&&(!_0x2766fd[_0x3188e1(0x339)]||_0x340bfd==='D1'||_0x340bfd==='D2')&&(_0x2766fd['roleName']=_0x3b5f39['roleName'],_0x2766fd['roleColor']=_0x3b5f39['roleColor'],_0x2766fd['roleAssignedBy']=_0x3b5f39['roleAssignedBy'],_0x2766fd[_0x3188e1(0x2e0)]=_0x3b5f39[_0x3188e1(0x2e0)]),!_0x2766fd['sources']['includes'](_0x340bfd)&&_0x2766fd['sources']['push'](_0x340bfd);}});}_0x33f26c(_0x5266b6,'D1'),_0x33f26c(_0x1d3268,'D2'),_0x33f26c(_0x70b51e,'Non-Participant'),_0x33f26c(_0x2fe0e6,_0x1d1cad(0x2ad));const _0x3a77a4=Array['from'](_0x4213ab['values']())['sort']((_0x469344,_0x10537d)=>_0x469344[_0x1d1cad(0x256)]['localeCompare'](_0x10537d['username']));if(_0x3a77a4[_0x1d1cad(0x2f0)]===0x0){_0x72f153[_0x1d1cad(0x1ee)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x72f153['innerHTML']='',_0x3a77a4[_0x1d1cad(0x2b0)](_0x1717ca=>{const _0x145caa=_0x1d1cad,_0x9440ef=document['createElement']('tr');_0x9440ef['dataset'][_0x145caa(0x256)]=_0x1717ca['username'],_0x9440ef[_0x145caa(0x29f)]['roleName']=_0x1717ca['roleName']||'',_0x9440ef['dataset']['roleColor']=_0x1717ca['roleColor']||_0x145caa(0x197);const _0x12ad6a=_0x1717ca['roleAssignedAt']?new Date(_0x1717ca['roleAssignedAt'][_0x145caa(0x147)]*0x3e8)[_0x145caa(0x182)]():'N/A',_0x16a410=_0x1717ca['roleName']?_0x145caa(0x136)+_0x1717ca['roleColor']+';\x20color:\x20'+getContrastColor(_0x1717ca['roleColor'])+';\x22>'+_0x1717ca['roleName']+_0x145caa(0x277):'<span\x20class=\x22no-role\x22>None</span>';_0x9440ef['innerHTML']=_0x145caa(0x28b)+_0x1717ca[_0x145caa(0x256)]+'\x20<span\x20class=\x22user-source\x22>('+_0x1717ca['sources'][_0x145caa(0x294)](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x16a410+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1717ca['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x12ad6a+_0x145caa(0x2af)+_0x1717ca['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1717ca['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x1717ca['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x145caa(0x1a2),_0x72f153['appendChild'](_0x9440ef);}),document[_0x1d1cad(0x355)]('.edit-role-btn')[_0x1d1cad(0x2b0)](_0x4346b0=>{_0x4346b0['addEventListener']('click',()=>{const _0x3f88f2=_0x4346b0['dataset']['username'];openRoleEditModal(_0x3f88f2);});}),document[_0x1d1cad(0x355)]('.remove-role-btn')['forEach'](_0x1b61ef=>{const _0x537bfb=_0x1d1cad;_0x1b61ef[_0x537bfb(0x2fa)](_0x537bfb(0x356),()=>{const _0x21264d=_0x537bfb,_0x421aad=_0x1b61ef['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x421aad+'?')&&setUserRole(_0x421aad,null,null)[_0x21264d(0x326)](()=>loadUsersWithRoles())['catch'](_0x20cf4b=>console['error']('Error\x20removing\x20role:',_0x20cf4b));});});}catch(_0x5d6340){console['error'](_0x1d1cad(0x30e),_0x5d6340),_0x72f153['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x1df351){const _0x11e289=a2_0x27a326;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x1df351);const _0x25072e=document['getElementById'](_0x11e289(0x1ef)),_0x4b3d2e=document[_0x11e289(0x144)]('role-username'),_0x425afb=document['getElementById'](_0x11e289(0x27d));if(!_0x25072e){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x25072e);_0x4b3d2e?(_0x4b3d2e['value']=_0x1df351,console[_0x11e289(0x1ac)]('Username\x20input\x20set\x20to:\x20'+_0x1df351)):console['warn'](_0x11e289(0x2ca));const _0x3da2fa=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x1df351+'\x22]');if(_0x3da2fa&&_0x425afb){const _0x2580e8=_0x3da2fa['dataset']['role'];_0x425afb['value']=_0x2580e8==='none'?'':_0x2580e8,console[_0x11e289(0x1ac)]('Role\x20select\x20set\x20to:\x20'+_0x425afb['value']+_0x11e289(0x2dc)+_0x2580e8+')');}else{if(!_0x3da2fa)console['warn'](_0x11e289(0x134)+_0x1df351+_0x11e289(0x2ea));if(!_0x425afb)console[_0x11e289(0x2d2)]('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x425afb)_0x425afb['value']='';}console[_0x11e289(0x1ac)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x25072e['classList']['add'](_0x11e289(0x27b));const _0x563808=document[_0x11e289(0x144)](_0x11e289(0x329));_0x563808?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x563808[_0x11e289(0x1c4)]('click',closeModalHandler),_0x563808['addEventListener'](_0x11e289(0x356),closeModalHandler)):console[_0x11e289(0x2d2)](_0x11e289(0x301)),console['log']('Attaching\x20background\x20click\x20listener.'),_0x25072e['removeEventListener']('click',closeModalBackgroundHandler),_0x25072e['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x37b77e){_0x37b77e['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x3b848b=a2_0x27a326,_0x28257c=document['getElementById']('set-role-modal');_0x28257c&&(_0x28257c['classList']['remove'](_0x3b848b(0x27b)),_0x28257c[_0x3b848b(0x1c4)]('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x319bc9=a2_0x27a326,_0x4bd4dd=document['getElementById']('user-search')?.['value']['toLowerCase']()||'',_0xc60fec=document[_0x319bc9(0x144)]('role-filter')?.['value']||'all',_0x468824=document['querySelectorAll']('#users-table-body\x20tr');let _0x49f806=0x0;_0x468824['forEach'](_0x57553d=>{const _0x16272e=_0x319bc9;if(_0x57553d['querySelector']('.loading-cell')||_0x57553d['querySelector']('.empty-state')||_0x57553d['querySelector'](_0x16272e(0x14f)))return;const _0x55ae66=_0x57553d['dataset'][_0x16272e(0x256)]?.['toLowerCase']()||'',_0x4f3003=_0x57553d[_0x16272e(0x29f)][_0x16272e(0x138)]||'none',_0x4d2500=_0x55ae66['includes'](_0x4bd4dd),_0x4fd935=_0xc60fec==='all'||_0x4f3003===_0xc60fec;_0x4d2500&&_0x4fd935?(_0x57553d[_0x16272e(0x21a)]['display']='',_0x49f806++):_0x57553d['style']['display']='none';});if(_0x49f806===0x0&&_0x468824['length']>0x0){const _0x2113f6=document[_0x319bc9(0x144)]('users-table-body');if(_0x2113f6){if(!_0x2113f6['querySelector']('.no-results')){const _0x2c1645=document['createElement']('tr');_0x2c1645[_0x319bc9(0x2b8)]['add']('no-results'),_0x2c1645['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x2113f6['appendChild'](_0x2c1645);}}}else{const _0x512eeb=document[_0x319bc9(0x125)]('.no-results');_0x512eeb&&_0x512eeb['remove']();}}function setupManageArticlesSection(){const _0x23d79b=a2_0x27a326,_0x5d375f=document['getElementById']('load-articles-data');_0x5d375f&&_0x5d375f['addEventListener']('click',function(){const _0x273116=a2_0x4eb2;this['classList'][_0x273116(0x340)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x3d45c0=_0x273116;this['classList'][_0x3d45c0(0x24e)]('loading'),this[_0x3d45c0(0x1ee)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x14ce75=>{const _0x5769f7=_0x273116;console[_0x5769f7(0x1a3)](_0x5769f7(0x33e),_0x14ce75),this[_0x5769f7(0x2b8)][_0x5769f7(0x24e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x53dea8=_0x5769f7;this[_0x53dea8(0x1ee)]=_0x53dea8(0x190);},0xbb8);});});const _0x1042d9=document['getElementById']('create-new-article-btn');_0x1042d9?(console[_0x23d79b(0x1ac)]('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x1042d9['style']['display']='block',_0x1042d9[_0x23d79b(0x2fa)]('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x4e8eeb=document['getElementById'](_0x23d79b(0x343));_0x4e8eeb&&_0x4e8eeb[_0x23d79b(0x2fa)](_0x23d79b(0x2b6),_0x412fe0=>{const _0x3dd1d3=_0x23d79b;_0x412fe0[_0x3dd1d3(0x2a0)](),saveArticle();});const _0x2c0ee0=document[_0x23d79b(0x144)]('cancel-article-btn');_0x2c0ee0&&_0x2c0ee0['addEventListener']('click',()=>{closeArticleModal();});const _0x229e1a=document[_0x23d79b(0x125)]('#article-modal\x20.close-btn');_0x229e1a&&_0x229e1a['addEventListener']('click',()=>{closeArticleModal();});const _0x409a3d=document[_0x23d79b(0x144)]('article-modal');_0x409a3d&&_0x409a3d['addEventListener'](_0x23d79b(0x356),_0xb875d7=>{_0xb875d7['target']===_0x409a3d&&closeArticleModal();});}async function loadArticles(){const _0x15d3a2=a2_0x27a326,_0x37858a=document[_0x15d3a2(0x144)](_0x15d3a2(0x2c8));if(!_0x37858a)return;_0x37858a[_0x15d3a2(0x1ee)]='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x17eff5=collection(db,'articles'),_0x2fa63b=query(_0x17eff5,orderBy('createdAt',_0x15d3a2(0x16e))),_0x57c15e=await getDocs(_0x2fa63b);if(_0x57c15e[_0x15d3a2(0x31c)]){_0x37858a['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x37858a['innerHTML']='',_0x57c15e['forEach'](_0x2ac3c8=>{const _0x1ab750=_0x15d3a2,_0x4ca01b=_0x2ac3c8[_0x1ab750(0x20a)](),_0x10253a=document['createElement']('tr'),_0x1d0334=_0x4ca01b['createdAt']?new Date(_0x4ca01b['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x10253a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4ca01b[_0x1ab750(0x1b0)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4ca01b[_0x1ab750(0x224)]||'Unknown')+_0x1ab750(0x1fc)+_0x1d0334+_0x1ab750(0x15a)+_0x2ac3c8['id']+_0x1ab750(0x128)+_0x2ac3c8['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x37858a[_0x1ab750(0x245)](_0x10253a);}),setupArticleActionButtons();}catch(_0x4c4ddc){console[_0x15d3a2(0x1a3)](_0x15d3a2(0x33e),_0x4c4ddc),_0x37858a[_0x15d3a2(0x1ee)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x4c4ddc['message']+_0x15d3a2(0x230);}}function setupArticleActionButtons(){document['querySelectorAll']('.edit-article-btn')['forEach'](_0x3cd9f4=>{_0x3cd9f4['addEventListener']('click',async _0x2af44a=>{const _0x480a27=a2_0x4eb2,_0x519268=_0x2af44a['currentTarget'][_0x480a27(0x29f)]['id'];openArticleModal(_0x519268);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x199d04=>{const _0x27c980=a2_0x4eb2;_0x199d04[_0x27c980(0x2fa)]('click',async _0x4aaadb=>{const _0x404fe1=_0x27c980,_0x3ced33=_0x4aaadb[_0x404fe1(0x281)]['dataset']['id'];confirmDeleteArticle(_0x3ced33);});});}function openArticleModal(_0x3aadba=null){const _0x166de6=a2_0x27a326,_0x2f0674=document[_0x166de6(0x144)]('article-modal'),_0x313bb4=document['getElementById'](_0x166de6(0x325)),_0x2b3e07=document['getElementById']('article-form'),_0x4537c5=document['getElementById']('article-id');_0x2b3e07['reset'](),_0x4537c5['value']='';if(_0x3aadba)_0x313bb4[_0x166de6(0x32d)]='Edit\x20Article',_0x4537c5['value']=_0x3aadba,loadArticleData(_0x3aadba);else{_0x313bb4['textContent']=_0x166de6(0x259);const _0x1f53fa=auth['currentUser'];if(_0x1f53fa){const _0x5e1389=document[_0x166de6(0x144)](_0x166de6(0x25c));if(_0x5e1389&&_0x1f53fa['displayName'])_0x5e1389[_0x166de6(0x348)]=_0x1f53fa[_0x166de6(0x201)];else _0x5e1389&&(_0x5e1389['value']=_0x1f53fa['email']);}}_0x2f0674[_0x166de6(0x2b8)]['add']('active');}async function loadArticleData(_0x3947cb){const _0x4c9586=a2_0x27a326;try{const _0x70af51=doc(db,_0x4c9586(0x2e6),_0x3947cb),_0x4cc1e7=await getDoc(_0x70af51);if(!_0x4cc1e7['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x51de56=_0x4cc1e7['data']();document['getElementById']('article-title')[_0x4c9586(0x348)]=_0x51de56['title']||'',document['getElementById']('article-author')['value']=_0x51de56['author']||'',document['getElementById']('article-image-url')['value']=_0x51de56['imageUrl']||'',document[_0x4c9586(0x144)]('article-content')['value']=_0x51de56['content']||'';}catch(_0x219dff){console['error'](_0x4c9586(0x2f2),_0x219dff),showNotification(_0x4c9586(0x288),'error');}}async function saveArticle(){const _0xb0140c=a2_0x27a326;try{const _0x2923c3=document[_0xb0140c(0x144)]('article-id')['value'],_0x31b693=document['getElementById']('article-title')['value']['trim'](),_0x4665bc=document['getElementById']('article-author')[_0xb0140c(0x348)][_0xb0140c(0x1b2)](),_0x4c78dc=document['getElementById']('article-image-url')['value'][_0xb0140c(0x1b2)](),_0x485815=document['getElementById']('article-content')['value']['trim']();if(!_0x31b693||!_0x485815){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x7c666b=auth[_0xb0140c(0x331)];if(!_0x7c666b){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles',_0xb0140c(0x1a3));return;}const _0x827c4f={'title':_0x31b693,'author':_0x4665bc,'imageUrl':_0x4c78dc||null,'content':_0x485815,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x7c666b['email']};!_0x2923c3?(_0x827c4f['createdAt']=serverTimestamp(),_0x827c4f['createdBy']=_0x7c666b['email'],await addDoc(collection(db,_0xb0140c(0x2e6)),_0x827c4f),showNotification(_0xb0140c(0x341),_0xb0140c(0x181))):(await updateDoc(doc(db,'articles',_0x2923c3),_0x827c4f),showNotification(_0xb0140c(0x1cb),'success')),closeArticleModal(),loadArticles();}catch(_0x41ef1f){console['error']('Error\x20saving\x20article:',_0x41ef1f),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x41ef1f['message'],'error');}}function closeArticleModal(){const _0x13fec0=a2_0x27a326,_0x5b5124=document[_0x13fec0(0x144)]('article-modal');_0x5b5124&&_0x5b5124['classList'][_0x13fec0(0x24e)]('active');}async function confirmDeleteArticle(_0x4b460f){const _0x1cd7f4=a2_0x27a326;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x1cd7f4(0x2e6),_0x4b460f)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x1cd7f4(0x181));}catch(_0x23c257){console['error']('Error\x20deleting\x20article:',_0x23c257),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x23c257['message'],_0x1cd7f4(0x1a3));}}function setupTrophyManagementSection(){const _0xf49311=a2_0x27a326,_0x1ce444=document['getElementById']('load-trophies-data');_0x1ce444&&_0x1ce444['addEventListener'](_0xf49311(0x356),function(){const _0x4491c7=_0xf49311;this[_0x4491c7(0x2b8)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x4e9fb2=document['getElementById'](_0x4491c7(0x1c5));_0x4e9fb2&&(_0x4e9fb2['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x4fbcfd=_0x4491c7;this['classList'][_0x4fbcfd(0x24e)]('loading'),this[_0x4fbcfd(0x1ee)]=_0x4fbcfd(0x2f9);})['catch'](_0x1e9f00=>{const _0x57e4ec=_0x4491c7;console[_0x57e4ec(0x1a3)](_0x57e4ec(0x318),_0x1e9f00),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4a5a13=_0x57e4ec;this[_0x4a5a13(0x1ee)]=_0x4a5a13(0x2f9);},0xbb8);});});const _0x353a5a=document[_0xf49311(0x144)]('create-new-trophy-btn');_0x353a5a&&_0x353a5a['addEventListener']('click',()=>{openTrophyModal();});const _0x117777=document['getElementById']('trophy-form');_0x117777&&_0x117777[_0xf49311(0x2fa)]('submit',_0x102cc5=>{_0x102cc5['preventDefault'](),saveTrophyDefinition();});const _0x4733da=document['getElementById']('cancel-trophy-btn');_0x4733da&&_0x4733da[_0xf49311(0x2fa)]('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x17527f=>{const _0x18d84f=_0xf49311;_0x17527f['addEventListener'](_0x18d84f(0x356),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x405490=document['getElementById']('trophy-modal');_0x405490&&_0x405490['addEventListener']('click',_0x267179=>{_0x267179['target']===_0x405490&&closeTrophyModal();});const _0xe05fb3=document['getElementById'](_0xf49311(0x1f5));_0xe05fb3&&_0xe05fb3['addEventListener'](_0xf49311(0x356),_0x27d2ab=>{_0x27d2ab['target']===_0xe05fb3&&closeAssignTrophyModal();});const _0x77b2fd=document['getElementById'](_0xf49311(0x332));_0x77b2fd&&_0x77b2fd['addEventListener']('submit',_0x3786b5=>{const _0xd5ea23=_0xf49311;_0x3786b5[_0xd5ea23(0x2a0)](),assignTrophyToPlayer();});const _0x33401d=document['getElementById']('cancel-assign-btn');_0x33401d&&_0x33401d['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x14be70=document[_0xf49311(0x144)](_0xf49311(0x2d1));_0x14be70&&(_0x14be70['addEventListener']('input',updateTrophyImagePreview),_0x14be70['addEventListener'](_0xf49311(0x120),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x1d1217=a2_0x27a326,_0x535ec1=document[_0x1d1217(0x144)]('trophy-image-url')['value'][_0x1d1217(0x1b2)](),_0x527ebf=document['getElementById']('trophy-image-preview');if(!_0x527ebf){const _0x81fb07=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x81b885=document['createElement']('div');_0x81b885['id']=_0x1d1217(0x2c5),_0x81b885[_0x1d1217(0x258)]='trophy-preview-container',_0x81fb07['appendChild'](_0x81b885);const _0x253e81=document['createElement']('img');_0x253e81['id']='trophy-preview-img',_0x253e81['alt']='Trophy\x20Preview',_0x253e81['onerror']=function(){const _0xc51fe7=_0x1d1217;this[_0xc51fe7(0x25e)]=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x81b885[_0x1d1217(0x245)](_0x253e81);}const _0x1a31de=document[_0x1d1217(0x144)](_0x1d1217(0x2a7));_0x535ec1?(_0x1a31de['src']=_0x535ec1,_0x1a31de['style'][_0x1d1217(0x1d7)]='block',_0x1a31de[_0x1d1217(0x2b8)]['remove']('error')):(_0x1a31de[_0x1d1217(0x25e)]=DEFAULT_TROPHY_IMAGE,_0x1a31de['style']['display']='block');}async function loadTrophyDefinitions(){const _0x157077=a2_0x27a326,_0x1ec2a=document['getElementById']('trophies-table-body');if(!_0x1ec2a)return;_0x1ec2a[_0x157077(0x1ee)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x4936a9=collection(db,'trophyDefinitions'),_0x237b42=query(_0x4936a9,orderBy('createdAt',_0x157077(0x16e))),_0x1f7e1d=await getDocs(_0x237b42);if(_0x1f7e1d[_0x157077(0x31c)]){_0x1ec2a['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x1ec2a['innerHTML']='',_0x1f7e1d['forEach'](_0x22450e=>{const _0x394b74=_0x157077,_0x4bd962=_0x22450e['data'](),_0x2acb2d=document[_0x394b74(0x30c)]('tr'),_0x251863=_0x4bd962['createdAt']?new Date(_0x4bd962[_0x394b74(0x145)]['seconds']*0x3e8)[_0x394b74(0x36e)]():'N/A';_0x2acb2d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x4bd962['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4bd962['name']+_0x394b74(0x308)+DEFAULT_TROPHY_IMAGE+_0x394b74(0x13e)+(_0x4bd962['name']||_0x394b74(0x12c))+_0x394b74(0x34f)+(_0x4bd962['rarity']||'common')+'\x22>'+(_0x4bd962[_0x394b74(0x2bd)]||_0x394b74(0x14e))+_0x394b74(0x2aa)+_0x251863+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x22450e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x22450e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x22450e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1ec2a[_0x394b74(0x245)](_0x2acb2d);}),setupTrophyActionButtons();}catch(_0x3e1b96){console['error'](_0x157077(0x150),_0x3e1b96),_0x1ec2a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x3e1b96[_0x157077(0x2e9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x376bcf=>{_0x376bcf['addEventListener']('click',_0x83590f=>{const _0x2c47ac=_0x83590f['currentTarget']['dataset']['id'];openTrophyModal(_0x2c47ac);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x446e27=>{const _0x4c1507=a2_0x4eb2;_0x446e27[_0x4c1507(0x2fa)]('click',_0x2e4c95=>{const _0x408ad3=_0x2e4c95['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x408ad3);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x25fa89=>{const _0x255f8c=a2_0x4eb2;_0x25fa89[_0x255f8c(0x2fa)]('click',_0x409853=>{const _0x1f9c08=_0x409853['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x1f9c08);});});}function openTrophyModal(_0x176409=null){const _0x455f70=a2_0x27a326,_0x54f78d=document['getElementById']('trophy-modal'),_0x1702ca=document['getElementById']('trophy-modal-title'),_0xb2d93c=document['getElementById']('trophy-form'),_0x196fa7=document['getElementById'](_0x455f70(0x1cf));_0xb2d93c['reset'](),_0x196fa7['value']='';const _0x2afceb=document[_0x455f70(0x144)]('trophy-preview-img');_0x2afceb&&(_0x2afceb['src']=DEFAULT_TROPHY_IMAGE,_0x2afceb[_0x455f70(0x2b8)]['remove'](_0x455f70(0x1a3))),_0x176409?(_0x1702ca['textContent']='Edit\x20Trophy',_0x196fa7[_0x455f70(0x348)]=_0x176409,loadTrophyData(_0x176409)):_0x1702ca[_0x455f70(0x32d)]=_0x455f70(0x13d),_0x54f78d[_0x455f70(0x2b8)]['add']('active');}async function loadTrophyData(_0x1cca53){const _0x42a44b=a2_0x27a326;try{const _0x5f9fbc=doc(db,'trophyDefinitions',_0x1cca53),_0x182b59=await getDoc(_0x5f9fbc);if(!_0x182b59[_0x42a44b(0x304)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x169b74=_0x182b59['data']();document[_0x42a44b(0x144)]('trophy-name')[_0x42a44b(0x348)]=_0x169b74['name']||'',document[_0x42a44b(0x144)]('trophy-description')[_0x42a44b(0x348)]=_0x169b74['description']||'',document['getElementById']('trophy-image-url')['value']=_0x169b74[_0x42a44b(0x2ff)]||'',document[_0x42a44b(0x144)]('trophy-rarity')['value']=_0x169b74[_0x42a44b(0x2bd)]||'common',updateTrophyImagePreview();}catch(_0xbc7fa8){console['error']('Error\x20loading\x20trophy\x20data:',_0xbc7fa8),showNotification(_0x42a44b(0x1c6),'error');}}async function saveTrophyDefinition(){const _0x774926=a2_0x27a326;try{const _0x3e10a6=document['getElementById']('trophy-id')['value'],_0x10cfbf=document[_0x774926(0x144)]('trophy-name')['value']['trim'](),_0x452c0f=document['getElementById']('trophy-description')[_0x774926(0x348)][_0x774926(0x1b2)](),_0x3440ca=document['getElementById']('trophy-image-url')['value']['trim'](),_0x2997dd=document['getElementById'](_0x774926(0x177))[_0x774926(0x348)];if(!_0x10cfbf||!_0x452c0f||!_0x3440ca){showNotification(_0x774926(0x173),'error');return;}const _0xc0da52=auth['currentUser'];if(!_0xc0da52){showNotification(_0x774926(0x2f5),'error');return;}const _0x67dba8={'name':_0x10cfbf,'description':_0x452c0f,'image':_0x3440ca,'rarity':_0x2997dd,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xc0da52[_0x774926(0x2d6)]};!_0x3e10a6?(_0x67dba8[_0x774926(0x145)]=serverTimestamp(),_0x67dba8['createdBy']=_0xc0da52['email'],await addDoc(collection(db,'trophyDefinitions'),_0x67dba8),showNotification('Trophy\x20created\x20successfully',_0x774926(0x181))):(await updateDoc(doc(db,'trophyDefinitions',_0x3e10a6),_0x67dba8),showNotification('Trophy\x20updated\x20successfully',_0x774926(0x181))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0xaed5cc){console['error']('Error\x20saving\x20trophy:',_0xaed5cc),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0xaed5cc[_0x774926(0x2e9)],'error');}}function closeTrophyModal(){const _0x319642=a2_0x27a326,_0x3a2cba=document[_0x319642(0x144)]('trophy-modal');_0x3a2cba&&_0x3a2cba['classList']['remove']('active');}async function confirmDeleteTrophy(_0x2f7557){const _0x120293=a2_0x27a326;if(!_0x2f7557){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x1e484c=auth['currentUser'];if(!_0x1e484c){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies',_0x120293(0x1a3));return;}console[_0x120293(0x1ac)]('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x2f7557),await deleteDoc(doc(db,'trophyDefinitions',_0x2f7557)),showNotification('Trophy\x20definition\x20deleted\x20successfully',_0x120293(0x181)),loadTrophyDefinitions();}catch(_0x3c89d1){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x3c89d1),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x3c89d1['message'],'error');}}async function openAssignTrophyModal(_0x10a781){const _0x558f8e=a2_0x27a326;try{const _0x4744f1=doc(db,'trophyDefinitions',_0x10a781),_0x37d35c=await getDoc(_0x4744f1);if(!_0x37d35c[_0x558f8e(0x304)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x12b019=_0x37d35c['data']();document['getElementById']('assign-trophy-id')[_0x558f8e(0x348)]=_0x10a781,document['getElementById']('assign-trophy-name')['value']=_0x12b019['name'],document[_0x558f8e(0x144)](_0x558f8e(0x1c5))[_0x558f8e(0x25e)]=_0x12b019['image']||DEFAULT_TROPHY_IMAGE,document['getElementById'](_0x558f8e(0x20d))['textContent']=_0x12b019[_0x558f8e(0x26c)]||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x12b019[_0x558f8e(0x313)]||'No\x20description';const _0x4f5b63=document['getElementById']('assign-trophy-rarity');_0x4f5b63['textContent']=_0x12b019['rarity']||'common',_0x4f5b63['className']='trophy-rarity\x20'+(_0x12b019[_0x558f8e(0x2bd)]||_0x558f8e(0x14e));const _0xecd471=document['getElementById'](_0x558f8e(0x1f5));_0xecd471[_0x558f8e(0x2b8)][_0x558f8e(0x340)]('active');}catch(_0x2e1891){console[_0x558f8e(0x1a3)](_0x558f8e(0x1fb),_0x2e1891),showNotification(_0x558f8e(0x1c6),_0x558f8e(0x1a3));}}function closeAssignTrophyModal(){const _0x479ec7=a2_0x27a326,_0x2de10f=document['getElementById']('assign-trophy-modal');_0x2de10f&&_0x2de10f['classList']['remove'](_0x479ec7(0x27b));}async function assignTrophyToPlayer(){const _0x2e3580=a2_0x27a326;try{const _0x33bfc5=document['getElementById']('assign-trophy-id')['value'],_0x14859b=document['getElementById']('assign-trophy-name')[_0x2e3580(0x348)],_0x58266f=document['getElementById']('assign-player-username')['value']['trim'](),_0x51c6b3=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')[_0x2e3580(0x348)];if(!_0x33bfc5||!_0x58266f){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x2ed026=auth[_0x2e3580(0x331)];if(!_0x2ed026){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x3a128f=null,_0xfb8734=null,_0x56ca68=null;if(_0x51c6b3==='non-participant'){const _0x4260e6=collection(db,'nonParticipants'),_0x4a7843=query(_0x4260e6,where('username','==',_0x58266f)),_0x311571=await getDocs(_0x4a7843);!_0x311571['empty']&&(_0x3a128f=_0x311571['docs'][0x0],_0xfb8734=_0x3a128f['id'],_0x56ca68=_0x3a128f['data']());}else{const _0x1a871d=_0x51c6b3==='D1'?'players':_0x51c6b3==='D2'?_0x2e3580(0x336):'playersD3',_0x284b9f=collection(db,_0x1a871d),_0x2e6686=query(_0x284b9f,where('username','==',_0x58266f)),_0x16a770=await getDocs(_0x2e6686);!_0x16a770['empty']&&(_0x3a128f=_0x16a770[_0x2e3580(0x324)][0x0],_0xfb8734=_0x3a128f['id'],_0x56ca68=_0x3a128f[_0x2e3580(0x20a)]());}if(!_0x3a128f){showNotification('Player\x20\x22'+_0x58266f+'\x22\x20not\x20found\x20in\x20'+(_0x51c6b3===_0x2e3580(0x213)?_0x2e3580(0x34b):_0x51c6b3+'\x20ladder'),'error');return;}const _0xa46489=collection(db,'userTrophies'),_0x5183a0=query(_0xa46489,where('userId','==',_0xfb8734),where('trophyId','==',_0x33bfc5)),_0x109fec=await getDocs(_0x5183a0);if(!_0x109fec['empty']){showNotification(_0x2e3580(0x273)+_0x58266f+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0xfb8734,'playerUsername':_0x58266f,'trophyId':_0x33bfc5,'awardedAt':serverTimestamp(),'awardedBy':_0x2ed026[_0x2e3580(0x2d6)],'ladder':_0x51c6b3}),showNotification(_0x2e3580(0x1da)+_0x14859b+'\x22\x20awarded\x20to\x20'+_0x58266f,'success'),closeAssignTrophyModal();}catch(_0x2dbf19){console['error']('Error\x20assigning\x20trophy:',_0x2dbf19),showNotification(_0x2e3580(0x215)+_0x2dbf19['message'],_0x2e3580(0x1a3));}}function setupInactivePlayersSection(){const _0x489b65=a2_0x27a326,_0x2ff980=document['getElementById']('inactive-days-filter');_0x2ff980&&_0x2ff980['addEventListener'](_0x489b65(0x187),function(){const _0x4f295e=document['getElementById']('load-inactive-players-data');if(_0x4f295e)_0x4f295e['click']();});const _0x323f98=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x1bee81=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x323f98&&_0x1bee81&&(_0x323f98[_0x489b65(0x2fa)]('change',function(){const _0x19e71f=_0x489b65;if(this['checked']){currentLadder='D1';if(document['getElementById'](_0x19e71f(0x2bc))['style'][_0x19e71f(0x1d7)]!==_0x19e71f(0x1b7)){const _0x883bae=document['getElementById'](_0x19e71f(0x31b));if(_0x883bae)_0x883bae[_0x19e71f(0x356)]();}}}),_0x1bee81['addEventListener']('change',function(){if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')['style']['display']!=='none'){const _0x485ad3=document['getElementById']('load-inactive-players-data');if(_0x485ad3)_0x485ad3['click']();}}}));const _0x4d3b48=document['getElementById']('inactive-players-search');_0x4d3b48&&_0x4d3b48['addEventListener']('input',debounce(function(){const _0x1f5452=_0x489b65,_0x1fc02d=_0x4d3b48[_0x1f5452(0x348)]['toLowerCase'](),_0x5ed89e=document[_0x1f5452(0x355)]('#inactive-players-table-body\x20tr');_0x5ed89e['forEach'](_0x12d7ce=>{const _0x43f796=_0x1f5452;if(_0x12d7ce['querySelector']('.loading-cell')||_0x12d7ce['querySelector']('.empty-state')||_0x12d7ce[_0x43f796(0x125)]('.error-state'))return;const _0x8784b0=_0x12d7ce[_0x43f796(0x23f)][0x0]?.[_0x43f796(0x32d)]['toLowerCase']()||'',_0x1dd5fd=_0x12d7ce['cells'][0x5]?.['textContent'][_0x43f796(0x278)]()||'';_0x8784b0['includes'](_0x1fc02d)||_0x1dd5fd['includes'](_0x1fc02d)?_0x12d7ce['style'][_0x43f796(0x1d7)]='':_0x12d7ce['style'][_0x43f796(0x1d7)]='none';});},0x12c)),document['addEventListener'](_0x489b65(0x356),function(_0x1e73d6){const _0x816fc2=_0x489b65;if(_0x1e73d6[_0x816fc2(0x1c8)]['closest']('.view-player-btn')){const _0x21629f=_0x1e73d6['target']['closest'](_0x816fc2(0x22d)),_0x31355c=_0x21629f['dataset']['username'];_0x31355c&&alert(_0x816fc2(0x1f1)+_0x31355c+'\x20-\x20Feature\x20coming\x20soon');}}),console['log'](_0x489b65(0x2e8));}async function loadInactivePlayersData(){const _0x1d198a=a2_0x27a326,_0x20e2cd=document['getElementById'](_0x1d198a(0x328));if(!_0x20e2cd)return;_0x20e2cd['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x376bd5=document[_0x1d198a(0x144)]('inactive-days-filter'),_0x224cc3=_0x376bd5?parseInt(_0x376bd5[_0x1d198a(0x348)])||0x0:0x0,_0xc2f31c=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x4d2d1e=await getDocs(_0xc2f31c);if(_0x4d2d1e['empty']){_0x20e2cd['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x27174a=[];_0x4d2d1e['forEach'](_0x29715c=>{const _0x20385c=_0x29715c['data']();_0x27174a['push']({..._0x20385c,'id':_0x29715c['id'],'username':_0x20385c['username']||'Unknown\x20Player'});}),console['log'](_0x1d198a(0x349)+_0x27174a['length']+_0x1d198a(0x17c)+currentLadder+'\x20ladder');const _0x22fe69=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x32d859=_0x27174a['map'](async _0x2d7546=>{const _0x41bf82=_0x1d198a;try{const _0x333a3b=collection(db,_0x22fe69),_0x2368a6=query(_0x333a3b,or(where('winnerUsername','==',_0x2d7546['username']),where('loserUsername','==',_0x2d7546[_0x41bf82(0x256)])),orderBy(_0x41bf82(0x27c),_0x41bf82(0x16e)),limit(0x1)),_0x1418be=await getDocs(_0x2368a6);if(!_0x1418be['empty']){const _0x4a2f73=_0x1418be[_0x41bf82(0x324)][0x0]['data'](),_0x275234=_0x4a2f73['approvedAt']?new Date(_0x4a2f73[_0x41bf82(0x27c)][_0x41bf82(0x147)]*0x3e8):null,_0x36fdb7=new Date(),_0x3cbb90=_0x275234?Math[_0x41bf82(0x268)]((_0x36fdb7-_0x275234)/(0x3e8*0x3c*0x3c*0x18)):null,_0xdf215a=_0x4a2f73['winnerUsername']===_0x2d7546['username']?_0x4a2f73['loserUsername']:_0x4a2f73[_0x41bf82(0x195)],_0x2174b3=_0x4a2f73[_0x41bf82(0x195)]===_0x2d7546['username']?'Won':'Lost';return{..._0x2d7546,'lastMatch':{'date':_0x275234?_0x275234[_0x41bf82(0x182)]():'N/A','opponent':_0xdf215a||_0x41bf82(0x18a),'result':_0x2174b3,'timestamp':_0x275234||new Date(0x0),'daysSinceMatch':_0x3cbb90||Number['MAX_SAFE_INTEGER']}};}else return{..._0x2d7546,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number[_0x41bf82(0x200)]}};}catch(_0x167eb2){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x2d7546['username']+':',_0x167eb2),{..._0x2d7546,'lastMatch':{'date':_0x41bf82(0x1d2),'opponent':'Error','result':_0x41bf82(0x1d2),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x40f23d=await Promise['all'](_0x32d859);_0x40f23d['sort']((_0x3f33e2,_0x3dae1d)=>_0x3dae1d['lastMatch']['daysSinceMatch']-_0x3f33e2[_0x1d198a(0x367)][_0x1d198a(0x2e1)]);_0x224cc3>0x0&&(_0x40f23d=_0x40f23d['filter'](_0x2f8da6=>_0x2f8da6['lastMatch']['daysSinceMatch']>=_0x224cc3));_0x20e2cd['innerHTML']='';if(_0x40f23d[_0x1d198a(0x2f0)]===0x0){_0x20e2cd['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x40f23d[_0x1d198a(0x2b0)](_0x563aab=>{const _0x4fbaa8=_0x1d198a,_0x527cf7=document['createElement']('tr'),_0x2264b7=_0x563aab[_0x4fbaa8(0x367)]['daysSinceMatch']>0x1e?'highly-inactive':_0x563aab['lastMatch'][_0x4fbaa8(0x2e1)]>0xe?'moderately-inactive':'';_0x527cf7['className']=_0x2264b7,_0x527cf7[_0x4fbaa8(0x1ee)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x563aab['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x563aab['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x563aab['lastMatch'][_0x4fbaa8(0x2eb)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x563aab[_0x4fbaa8(0x367)][_0x4fbaa8(0x2e1)]===Number['MAX_SAFE_INTEGER']?'N/A':_0x563aab[_0x4fbaa8(0x367)]['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x563aab['lastMatch']['date']==='Never\x20played'?'No\x20matches\x20found':_0x563aab['lastMatch']['result']+_0x4fbaa8(0x2ef)+_0x563aab[_0x4fbaa8(0x367)]['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x563aab['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x20e2cd['appendChild'](_0x527cf7);}),console['log']('Displaying\x20'+_0x40f23d['length']+'\x20inactive\x20players');}catch(_0x1f0d78){console['error']('Error\x20loading\x20inactive\x20players:',_0x1f0d78),_0x20e2cd['innerHTML']=_0x1d198a(0x330)+_0x1f0d78['message']+'</td></tr>';}}function a2_0x4eb2(_0x3a47bf,_0x32c9ba){const _0x314c49=a2_0x56e7();return a2_0x4eb2=function(_0x5b5308,_0x3c4511){_0x5b5308=_0x5b5308-0x117;let _0x56e719=_0x314c49[_0x5b5308];return _0x56e719;},a2_0x4eb2(_0x3a47bf,_0x32c9ba);}function setupHighlightButtons(){const _0xf7b3c3=a2_0x27a326;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x1c517a=document[_0xf7b3c3(0x144)]('create-match-highlight-btn');_0x1c517a&&_0x1c517a['addEventListener']('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x139ec8=document['getElementById']('create-creator-highlight-btn');_0x139ec8&&_0x139ec8['addEventListener'](_0xf7b3c3(0x356),function(){const _0x547df4=_0xf7b3c3;console[_0x547df4(0x1ac)](_0x547df4(0x358)),openHighlightModal('creator');});const _0x46d590=document['getElementById']('create-achievement-highlight-btn');_0x46d590&&_0x46d590['addEventListener'](_0xf7b3c3(0x356),function(){const _0x45e582=_0xf7b3c3;console[_0x45e582(0x1ac)](_0x45e582(0x34a)),openHighlightModal('achievement');});}function openHighlightModal(_0x309e10='match'){const _0x3b63db=a2_0x27a326;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x309e10);const _0x5be601=document['getElementById'](_0x3b63db(0x291)),_0x3cf3f2=document['getElementById'](_0x3b63db(0x1b8)),_0x30a5f8=document['getElementById'](_0x3b63db(0x1a9)),_0x4fbdaa=document['getElementById']('highlight-id');if(!_0x5be601||!_0x3cf3f2||!_0x30a5f8){console[_0x3b63db(0x1a3)]('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x3cf3f2['reset'](),_0x4fbdaa['value']='';const _0x415e38=['match','creator','achievement'],_0x251b0e=!_0x415e38['includes'](_0x309e10);if(_0x251b0e){const _0x49a2fc=_0x309e10;_0x4fbdaa['value']=_0x49a2fc,_0x30a5f8['textContent']='Loading...',loadHighlightDataAdmin(_0x49a2fc);}else{const _0x34b9d0=_0x309e10;document['getElementById']('highlight-type')[_0x3b63db(0x348)]=_0x34b9d0,_0x30a5f8['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x34b9d0),toggleHighlightFields(_0x34b9d0);const _0x137693=auth['currentUser'];_0x137693&&document['getElementById']('highlight-submitted-by')&&(document[_0x3b63db(0x144)](_0x3b63db(0x27f))['value']=_0x137693['displayName']||_0x137693[_0x3b63db(0x2d6)]);}_0x5be601['classList']['add'](_0x3b63db(0x27b));}function toggleHighlightFields(_0x257145){const _0x128079=a2_0x27a326;console[_0x128079(0x1ac)]('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x257145);const _0x30144f=document[_0x128079(0x144)]('highlight-form');if(!_0x30144f)return;const _0x3059b3=_0x30144f['querySelectorAll'](_0x128079(0x22e));_0x3059b3['forEach'](_0xf290e9=>_0xf290e9['style'][_0x128079(0x1d7)]=_0x128079(0x1b7));const _0x131b5d=document['getElementById']('highlight-video-preview-container');if(_0x131b5d)_0x131b5d[_0x128079(0x21a)]['display']=_0x128079(0x1b7);const _0x2435e2=['highlight-title-container',_0x128079(0x1b6),'highlight-submitted-by-container'];_0x2435e2[_0x128079(0x2b0)](_0x2b14c9=>{const _0x1cf310=_0x128079,_0x5c4b09=document[_0x1cf310(0x144)](_0x2b14c9);if(_0x5c4b09)_0x5c4b09[_0x1cf310(0x21a)][_0x1cf310(0x1d7)]=_0x1cf310(0x168);});if(_0x257145==='match'){const _0xf2ab80=['highlight-video-container','highlight-match-info-container','highlight-map-container',_0x128079(0x20b),'highlight-players-container','highlight-match-link-container'];_0xf2ab80['forEach'](_0x19398b=>{const _0x5539a6=_0x128079,_0x476b7a=document['getElementById'](_0x19398b);_0x476b7a&&(_0x19398b===_0x5539a6(0x1d0)?_0x476b7a[_0x5539a6(0x21a)][_0x5539a6(0x1d7)]=_0x5539a6(0x2db):_0x476b7a[_0x5539a6(0x21a)]['display']='block');});const _0x3ba485=document['getElementById']('highlight-video-id');if(_0x3ba485){_0x3ba485['required']=!![];const _0x3fdaf8=_0x3ba485['previousElementSibling'];if(_0x3fdaf8)_0x3fdaf8[_0x128079(0x1ee)]='YouTube\x20Video\x20ID*';}if(_0x131b5d)_0x131b5d['style'][_0x128079(0x1d7)]='block';updateHighlightVideoPreview();}else{if(_0x257145===_0x128079(0x124)){const _0x201264=['highlight-map-container','highlight-map-creator-container',_0x128079(0x24c),'highlight-creator-image-container','highlight-video-container'];_0x201264[_0x128079(0x2b0)](_0x55e1a8=>{const _0x187485=_0x128079,_0x5de7d2=document[_0x187485(0x144)](_0x55e1a8);if(_0x5de7d2)_0x5de7d2['style']['display']='block';});const _0x2c5fe4=document['getElementById'](_0x128079(0x2b4));if(_0x2c5fe4){_0x2c5fe4['required']=![];const _0x527492=_0x2c5fe4['previousElementSibling'];if(_0x527492)_0x527492['innerHTML']=_0x128079(0x1a0);}}else{if(_0x257145==='achievement'){const _0x5b2973=['highlight-achievement-player-container',_0x128079(0x19b),_0x128079(0x175),'highlight-player-profile-container','highlight-achievement-image-container',_0x128079(0x2e5)];_0x5b2973['forEach'](_0x7ce705=>{const _0x18e93e=_0x128079,_0x30e5b6=document['getElementById'](_0x7ce705);if(_0x30e5b6)_0x30e5b6['style'][_0x18e93e(0x1d7)]=_0x18e93e(0x168);});const _0x26db52=document['getElementById']('highlight-video-id');if(_0x26db52){_0x26db52['required']=![];const _0x3a6557=_0x26db52['previousElementSibling'];if(_0x3a6557)_0x3a6557['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x332f9b){const _0x289731=a2_0x27a326;try{const _0x4c425c=doc(db,'highlights',_0x332f9b),_0x49b4f3=await getDoc(_0x4c425c);if(!_0x49b4f3['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x11dcd6=_0x49b4f3[_0x289731(0x20a)](),_0x140021=_0x11dcd6['type']||'match';document[_0x289731(0x144)]('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x140021),document[_0x289731(0x144)]('highlight-type')['value']=_0x140021,toggleHighlightFields(_0x140021),document[_0x289731(0x144)]('highlight-title')['value']=_0x11dcd6['title']||'',document[_0x289731(0x144)](_0x289731(0x241))['value']=_0x11dcd6['description']||'',document['getElementById']('highlight-submitted-by')[_0x289731(0x348)]=_0x11dcd6[_0x289731(0x1a6)]||'';_0x11dcd6['videoId']&&(document[_0x289731(0x144)]('highlight-video-id')['value']=_0x11dcd6['videoId'],updateHighlightVideoPreview());if(_0x140021==='match'){document['getElementById']('highlight-match-info')[_0x289731(0x348)]=_0x11dcd6[_0x289731(0x342)]||'',document[_0x289731(0x144)](_0x289731(0x30b))['value']=_0x11dcd6['map']||'';if(_0x11dcd6['matchDate']){const _0x1382a4=new Date(_0x11dcd6[_0x289731(0x1ce)][_0x289731(0x147)]*0x3e8);document['getElementById'](_0x289731(0x19d))['value']=_0x1382a4[_0x289731(0x2c1)]()['split']('T')[0x0];}document['getElementById'](_0x289731(0x186))['value']=_0x11dcd6['winnerName']||'',document[_0x289731(0x144)]('highlight-winner-score')['value']=_0x11dcd6[_0x289731(0x22f)]||'',document[_0x289731(0x144)]('highlight-loser-name')['value']=_0x11dcd6['loserName']||'',document['getElementById']('highlight-loser-score')[_0x289731(0x348)]=_0x11dcd6[_0x289731(0x1bf)]||'',document[_0x289731(0x144)]('highlight-match-link')['value']=_0x11dcd6['matchLink']||'';}else{if(_0x140021==='creator')document['getElementById'](_0x289731(0x30b))['value']=_0x11dcd6['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x11dcd6['mapCreator']||'',document['getElementById']('highlight-map-version')['value']=_0x11dcd6[_0x289731(0x15e)]||'',document['getElementById']('highlight-creator-image')['value']=_0x11dcd6['creatorImageUrl']||'';else _0x140021===_0x289731(0x156)&&(document['getElementById']('highlight-achievement-player')[_0x289731(0x348)]=_0x11dcd6['achievementPlayer']||'',document[_0x289731(0x144)]('highlight-achievement-type')['value']=_0x11dcd6[_0x289731(0x1c7)]||'',document['getElementById']('highlight-achievement-details')[_0x289731(0x348)]=_0x11dcd6['achievementDetails']||'',document[_0x289731(0x144)]('highlight-player-profile')['value']=_0x11dcd6['playerProfileUrl']||'',document[_0x289731(0x144)]('highlight-achievement-image')['value']=_0x11dcd6['achievementImageUrl']||'');}}catch(_0x52f6e1){console['error']('Error\x20loading\x20highlight:',_0x52f6e1),showNotification('Error\x20loading\x20highlight:\x20'+_0x52f6e1[_0x289731(0x2e9)],_0x289731(0x1a3));}}async function saveHighlight(){const _0x349089=a2_0x27a326;try{const _0x3ff7d8=document[_0x349089(0x144)]('highlight-id')?.[_0x349089(0x348)]||'',_0x3c5fc2=document['getElementById']('highlight-type')?.['value']||'match',_0x2849e2={'title':document['getElementById']('highlight-title')?.['value']?.['trim']()||'','description':document['getElementById']('highlight-description')?.['value']?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.['trim']()||'','videoId':document['getElementById'](_0x349089(0x2b4))?.['value']?.[_0x349089(0x1b2)]()||null,'type':_0x3c5fc2};if(!_0x2849e2[_0x349089(0x1b0)]){showNotification(_0x349089(0x18e),_0x349089(0x1a3));return;}if(_0x3c5fc2==='match'){_0x2849e2['matchInfo']=document['getElementById']('highlight-match-info')?.[_0x349089(0x348)]?.['trim']()||'',_0x2849e2['map']=document['getElementById']('highlight-map')?.[_0x349089(0x348)]?.['trim']()||'';const _0x22156e=document['getElementById']('highlight-match-date'),_0x1659c3=_0x22156e?.['value']||'';_0x2849e2['matchDate']=_0x1659c3?Timestamp['fromDate'](new Date(_0x1659c3)):null,_0x2849e2[_0x349089(0x366)]=document['getElementById']('highlight-winner-name')?.['value']?.[_0x349089(0x1b2)]()||'',_0x2849e2[_0x349089(0x22f)]=document['getElementById']('highlight-winner-score')?.[_0x349089(0x348)]?.['trim']()||'',_0x2849e2[_0x349089(0x14d)]=document['getElementById'](_0x349089(0x1bc))?.['value']?.['trim']()||'',_0x2849e2[_0x349089(0x1bf)]=document['getElementById']('highlight-loser-score')?.[_0x349089(0x348)]?.['trim']()||'',_0x2849e2['matchLink']=document[_0x349089(0x144)]('highlight-match-link')?.['value']?.[_0x349089(0x1b2)]()||'';if(!_0x2849e2[_0x349089(0x35a)]){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x3c5fc2===_0x349089(0x124)){_0x2849e2['map']=document[_0x349089(0x144)]('highlight-map')?.['value']?.['trim']()||'',_0x2849e2['mapCreator']=document['getElementById']('highlight-map-creator')?.['value']?.['trim']()||'',_0x2849e2['mapVersion']=document[_0x349089(0x144)]('highlight-map-version')?.['value']?.[_0x349089(0x1b2)]()||'',_0x2849e2[_0x349089(0x19a)]=document['getElementById']('highlight-creator-image')?.[_0x349089(0x348)]?.['trim']()||'';if(!_0x2849e2['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x3c5fc2==='achievement'){_0x2849e2['achievementPlayer']=document['getElementById'](_0x349089(0x135))?.['value']?.['trim']()||'',_0x2849e2['achievementType']=document[_0x349089(0x144)](_0x349089(0x2de))?.['value']?.[_0x349089(0x1b2)]()||'',_0x2849e2[_0x349089(0x25a)]=document['getElementById']('highlight-achievement-details')?.['value']?.['trim']()||'',_0x2849e2['playerProfileUrl']=document['getElementById'](_0x349089(0x142))?.['value']?.[_0x349089(0x1b2)]()||'',_0x2849e2['achievementImageUrl']=document['getElementById'](_0x349089(0x1f2))?.['value']?.['trim']()||'';if(!_0x2849e2['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x3ff7d8?(_0x2849e2[_0x349089(0x1e7)]=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x3ff7d8),_0x2849e2),showNotification(_0x349089(0x132),'success')):(_0x2849e2[_0x349089(0x145)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x2849e2),showNotification('Highlight\x20created\x20successfully!',_0x349089(0x181))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x5eb58a){console['error']('Error\x20saving\x20highlight:',_0x5eb58a),showNotification('Error\x20saving\x20highlight:\x20'+_0x5eb58a['message'],_0x349089(0x1a3));}}function closeHighlightModal(){const _0x2f90ad=a2_0x27a326,_0x5417da=document['getElementById']('highlight-modal');if(_0x5417da)_0x5417da[_0x2f90ad(0x2b8)]['remove']('active');}function getHighlightTypeName(_0x4587b9){const _0x1d738b=a2_0x27a326;switch(_0x4587b9){case'match':return'Match\x20Highlight';case _0x1d738b(0x124):return'Featured\x20Creator';case'achievement':return _0x1d738b(0x322);default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x4d2ba5=a2_0x27a326,_0x118f6f=document['getElementById']('highlight-video-id'),_0x4f089b=document['getElementById']('highlight-video-preview-container'),_0x25dd31=document['getElementById'](_0x4d2ba5(0x250));if(!_0x118f6f||!_0x25dd31||!_0x4f089b)return;const _0x402beb=_0x118f6f['value']['trim']();_0x402beb&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x402beb)?(_0x25dd31['src']='https://www.youtube.com/embed/'+_0x402beb,_0x4f089b[_0x4d2ba5(0x21a)]['display']='block'):(_0x25dd31['src']='',_0x4f089b['style']['display']='none');}async function loadHighlightsAdmin(){const _0xef2965=a2_0x27a326,_0x2fe8a2=document['getElementById'](_0xef2965(0x361));if(!_0x2fe8a2)return;_0x2fe8a2[_0xef2965(0x1ee)]=_0xef2965(0x266);try{const _0x462f55=query(collection(db,_0xef2965(0x2d8)),orderBy(_0xef2965(0x145),'desc')),_0x242e07=await getDocs(_0x462f55);if(_0x242e07['empty']){_0x2fe8a2['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x2fe8a2['innerHTML']='',_0x242e07[_0xef2965(0x2b0)](_0x27dfe0=>{const _0x227851=_0xef2965,_0xdb9e19=_0x27dfe0['data'](),_0x1423dc=document['createElement']('tr'),_0x4a2315=_0xdb9e19['createdAt']?new Date(_0xdb9e19['createdAt'][_0x227851(0x147)]*0x3e8)['toLocaleDateString']():'N/A';let _0x220a4c=_0x227851(0x18a),_0x4507ea='';switch(_0xdb9e19[_0x227851(0x1a1)]){case'match':_0x220a4c='Match',_0x4507ea=_0x227851(0x205);break;case _0x227851(0x124):_0x220a4c='Creator',_0x4507ea=_0x227851(0x14c);break;case _0x227851(0x156):_0x220a4c=_0x227851(0x1b5),_0x4507ea='achievement-type';break;}_0x1423dc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xdb9e19[_0x227851(0x1b0)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x4507ea+'\x22>'+_0x220a4c+_0x227851(0x127)+_0x4a2315+_0x227851(0x1fc)+(_0xdb9e19['submittedBy']||_0x227851(0x18a))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xdb9e19[_0x227851(0x35a)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x27dfe0['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x27dfe0['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2fe8a2['appendChild'](_0x1423dc);}),document['querySelectorAll'](_0xef2965(0x267))['forEach'](_0x5b58c5=>{_0x5b58c5['addEventListener']('click',_0x6aab84=>{const _0xd6eb8b=a2_0x4eb2;openHighlightModal(_0x6aab84['currentTarget'][_0xd6eb8b(0x29f)]['id']);});}),document['querySelectorAll']('.delete-highlight-btn')[_0xef2965(0x2b0)](_0x184f7d=>{const _0x348821=_0xef2965;_0x184f7d['addEventListener'](_0x348821(0x356),_0x3b5306=>{const _0x37ac78=_0x348821;confirmDeleteHighlight(_0x3b5306[_0x37ac78(0x281)]['dataset']['id']);});});}catch(_0x70fab5){console['error']('Error\x20loading\x20highlights:',_0x70fab5),_0x2fe8a2[_0xef2965(0x1ee)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x70fab5[_0xef2965(0x2e9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x567c71){const _0x52ea68=a2_0x27a326;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x52ea68(0x2d8),_0x567c71)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x4cb55b){console[_0x52ea68(0x1a3)](_0x52ea68(0x296),_0x4cb55b),showNotification('Error\x20deleting\x20highlight:\x20'+_0x4cb55b['message'],'error');}}function setupCreateTestMatchModal(){const _0x288e5b=a2_0x27a326;console[_0x288e5b(0x1ac)]('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x5d469c=document[_0x288e5b(0x144)]('create-test-match-modal'),_0x11129a=document['getElementById']('create-test-match-form');if(!_0x5d469c){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x11129a){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x508e4e=_0x5d469c['cloneNode'](!![]);_0x5d469c['parentNode']['replaceChild'](_0x508e4e,_0x5d469c);const _0xf04c9e=_0x508e4e[_0x288e5b(0x125)](_0x288e5b(0x327));_0x508e4e['addEventListener'](_0x288e5b(0x356),function(_0x3a8308){const _0x1dd1b7=_0x288e5b;_0x3a8308['target']===_0x508e4e&&(console[_0x1dd1b7(0x1ac)](_0x1dd1b7(0x1f6)),closeCreateTestMatchModal());});const _0x39c3c5=_0x508e4e['querySelector'](_0x288e5b(0x13f));_0x39c3c5&&_0x39c3c5[_0x288e5b(0x2fa)](_0x288e5b(0x356),function(_0x1d5bae){const _0x3ca277=_0x288e5b;_0x1d5bae['preventDefault'](),_0x1d5bae['stopPropagation'](),console[_0x3ca277(0x1ac)]('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0xfed555=_0x508e4e['querySelector']('#cancel-create-test-match-btn');_0xfed555&&_0xfed555['addEventListener']('click',function(_0x31e7c1){const _0x4c2b84=_0x288e5b;_0x31e7c1['preventDefault'](),_0x31e7c1['stopPropagation'](),console[_0x4c2b84(0x1ac)]('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0xf04c9e){_0xf04c9e['addEventListener']('submit',function(_0x3582ef){const _0x2a21f3=_0x288e5b;_0x3582ef[_0x2a21f3(0x2a0)](),_0x3582ef['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x223a83=_0xf04c9e[_0x288e5b(0x125)]('button[type=\x22submit\x22]');_0x223a83&&_0x223a83['addEventListener']('click',function(_0x5f044f){const _0x1a8e85=_0x288e5b;_0x5f044f['preventDefault'](),_0x5f044f['stopPropagation'](),console['log'](_0x1a8e85(0x372)),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x2786d5=a2_0x27a326;console[_0x2786d5(0x1ac)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x1540ac=document['getElementById'](_0x2786d5(0x1b8));_0x1540ac&&_0x1540ac['addEventListener']('submit',_0x17baed=>{_0x17baed['preventDefault'](),saveHighlight();});const _0x564053=document[_0x2786d5(0x144)](_0x2786d5(0x139));_0x564053&&_0x564053['addEventListener'](_0x2786d5(0x356),closeHighlightModal);const _0x28d5c3=document[_0x2786d5(0x125)]('#highlight-modal\x20.close-btn');_0x28d5c3&&_0x28d5c3['addEventListener']('click',closeHighlightModal);const _0x13dd92=document[_0x2786d5(0x144)]('highlight-modal');_0x13dd92&&_0x13dd92['addEventListener']('click',_0x113ca8=>{_0x113ca8['target']===_0x13dd92&&closeHighlightModal();});const _0x233ff3=document[_0x2786d5(0x144)](_0x2786d5(0x2b4));_0x233ff3&&_0x233ff3['addEventListener'](_0x2786d5(0x193),()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x2418c3=a2_0x27a326;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x3b0a65=document['getElementById']('matches-prev-page'),_0x56e1d0=document['getElementById']('matches-next-page');_0x3b0a65&&_0x3b0a65[_0x2418c3(0x2fa)]('click',()=>{const _0x3955b2=_0x2418c3,_0x374ede=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x374ede][_0x3955b2(0x21f)]-0x1);});_0x56e1d0&&_0x56e1d0['addEventListener']('click',()=>{const _0x58686a=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x58686a]['page']+0x1);});const _0x11c317=document[_0x2418c3(0x144)](_0x2418c3(0x227)),_0x4edf58=document['getElementById']('reset-matches-filters');_0x11c317&&_0x11c317['addEventListener'](_0x2418c3(0x356),applyMatchesFilters);_0x4edf58&&_0x4edf58[_0x2418c3(0x2fa)]('click',resetMatchesFilters);const _0x5e734b=document[_0x2418c3(0x144)](_0x2418c3(0x1d6));_0x5e734b&&_0x5e734b[_0x2418c3(0x2fa)]('input',debounce(filterMatchesTable,0x12c));const _0x4b5b49=document[_0x2418c3(0x144)]('resimulate-match-btn');_0x4b5b49&&_0x4b5b49['addEventListener']('click',openResimulateModal);const _0xd42940=document[_0x2418c3(0x144)]('resimulate-modal');if(_0xd42940){const _0x1e6b93=_0xd42940[_0x2418c3(0x125)]('.close');_0x1e6b93&&_0x1e6b93['addEventListener']('click',closeResimulateModal),_0xd42940['addEventListener'](_0x2418c3(0x356),_0x70b80c=>{_0x70b80c['target']===_0xd42940&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x1ca3a6=a2_0x27a326;console['log'](_0x1ca3a6(0x2cd));const _0x1c017b=document['getElementById']('create-test-match-modal'),_0x5dde57=document[_0x1ca3a6(0x144)]('create-test-match-form');if(!_0x1c017b){console['error'](_0x1ca3a6(0x338)),showNotification(_0x1ca3a6(0x338),'error');return;}if(!_0x5dde57){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x5dde57['reset']();const _0x280e46=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x21b5cb=![];_0x280e46['forEach'](_0x5b43f4=>{console['log']('Found\x20radio\x20with\x20value:',_0x5b43f4['value']),_0x5b43f4['value']===currentLadder&&(_0x5b43f4['checked']=!![],_0x21b5cb=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x21b5cb){console[_0x1ca3a6(0x2d2)]('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x2891fe=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x2891fe&&(_0x2891fe['checked']=!![],console[_0x1ca3a6(0x1ac)](_0x1ca3a6(0x320)));}const _0x3dfb79=document[_0x1ca3a6(0x144)]('test-match-date');if(_0x3dfb79){const _0x21883b=new Date()['toISOString']()['split']('T')[0x0];_0x3dfb79['value']=_0x21883b;}_0x1c017b['style']['display']='flex',_0x1c017b['style']['visibility']='visible',_0x1c017b[_0x1ca3a6(0x21a)]['opacity']='1',_0x1c017b[_0x1ca3a6(0x2b8)]['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x361b39=document['getElementById'](_0x1ca3a6(0x319));_0x361b39&&setTimeout(()=>{const _0x1a0fe5=_0x1ca3a6;_0x361b39[_0x1a0fe5(0x13c)]();},0x64);}function closeCreateTestMatchModal(){const _0x3a8a48=a2_0x27a326;console['log'](_0x3a8a48(0x236));const _0x35c1be=document[_0x3a8a48(0x144)](_0x3a8a48(0x362));if(!_0x35c1be){console[_0x3a8a48(0x1a3)](_0x3a8a48(0x131));return;}_0x35c1be[_0x3a8a48(0x2b8)]['remove']('active'),_0x35c1be[_0x3a8a48(0x21a)]['opacity']='0',_0x35c1be['style']['visibility']='hidden',setTimeout(()=>{!_0x35c1be['classList']['contains']('active')&&(_0x35c1be['style']['display']='none');},0x12c),console[_0x3a8a48(0x1ac)]('Modal\x20closed');}async function createTestMatch(){const _0x15e834=a2_0x27a326;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x1bb3e6=auth['currentUser'];if(!_0x1bb3e6){showNotification(_0x15e834(0x171),'error');return;}const _0x24945d='D1',_0x74b50f='approvedMatches',_0x5d5674={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x15e834(0x126),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x1bb3e6['email'],'createdAt':serverTimestamp(),'createdBy':_0x1bb3e6['email'],'isTestMatch':!![],'ladder':_0x24945d,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x15e834(0x2f4)+_0x1bb3e6[_0x15e834(0x2d6)]};console[_0x15e834(0x1ac)]('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x74b50f),_0x5d5674),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x51d5ee){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x51d5ee),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x51d5ee['message'],'error');}}window[a2_0x27a326(0x31a)]=async function(){const _0x419bab=a2_0x27a326;try{console['log'](_0x419bab(0x36a)),console['log']('Auth:',auth),console['log']('DB:',db),console['log'](_0x419bab(0x189),auth['currentUser']);const _0x3ac9d8=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x3ac9d8);const _0x5aa01e=query(_0x3ac9d8,where(_0x419bab(0x256),'==','nonexistent'));console['log']('Query\x20created:',_0x5aa01e);const _0x25b8a6=await getDocs(_0x5aa01e);console['log']('Query\x20executed.\x20Empty:',_0x25b8a6['empty']),console[_0x419bab(0x1ac)]('Firebase\x20connection\x20test\x20successful!');}catch(_0x28b49d){console['error']('Firebase\x20connection\x20test\x20failed:',_0x28b49d);}};function setupCreateTestMatchButton(){const _0x6a7290=a2_0x27a326,_0x9a67cb=document['getElementById']('create-test-match-btn');if(!_0x9a67cb){console[_0x6a7290(0x1a3)]('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console[_0x6a7290(0x1ac)]('Setting\x20up\x20create\x20test\x20match\x20button');const _0x5859b2=_0x9a67cb['cloneNode'](!![]);_0x9a67cb['parentNode'][_0x6a7290(0x157)](_0x5859b2,_0x9a67cb),_0x5859b2[_0x6a7290(0x2fa)]('click',function(_0xd5823a){const _0x4ed257=_0x6a7290;_0xd5823a['preventDefault'](),_0xd5823a[_0x4ed257(0x202)](),console[_0x4ed257(0x1ac)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0xbe8207=0x1){const _0x6655b9=a2_0x27a326,_0x18d3a5=document['getElementById']('matches-table-body');if(!_0x18d3a5)return;_0x18d3a5[_0x6655b9(0x1ee)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x2cefe0=currentLadder['toLowerCase'](),_0x43d37e=matchesPagination[_0x2cefe0],_0x480944=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x6655b9(0x1c9),_0x4f1cd9=collection(db,_0x480944);_0xbe8207<=0x1?(_0x43d37e['page']=0x1,_0x43d37e['firstVisible']=null,_0x43d37e[_0x6655b9(0x26a)]=null):_0x43d37e['page']=_0xbe8207;const _0x353488=getMatchesFilters();let _0x5ed475=_0x4f1cd9;if(_0x353488['startDate']||_0x353488['endDate']||_0x353488['searchTerm']){let _0x178c58=[];_0x353488[_0x6655b9(0x196)]&&_0x353488['endDate']?(_0x178c58['push'](where('approvedAt','>=',_0x353488[_0x6655b9(0x196)]),where('approvedAt','<=',_0x353488['endDate'])),_0x5ed475=query(_0x4f1cd9,..._0x178c58)):_0x5ed475=query(_0x4f1cd9,orderBy('approvedAt',_0x6655b9(0x16e)));}else _0x5ed475=query(_0x4f1cd9,orderBy(_0x6655b9(0x27c),'desc'));_0xbe8207>0x1&&_0x43d37e['lastVisible']?_0x5ed475=query(_0x5ed475,startAfter(_0x43d37e['lastVisible']),limit(PAGE_SIZE)):_0x5ed475=query(_0x5ed475,limit(PAGE_SIZE));const _0x1c4543=await getDocs(_0x5ed475);!_0x1c4543[_0x6655b9(0x31c)]&&(_0x43d37e['firstVisible']=_0x1c4543['docs'][0x0],_0x43d37e[_0x6655b9(0x26a)]=_0x1c4543['docs'][_0x1c4543['docs'][_0x6655b9(0x2f0)]-0x1]);let _0x154631=![];if(!_0x1c4543[_0x6655b9(0x31c)]){const _0x384065=query(_0x5ed475,startAfter(_0x43d37e['lastVisible']),limit(0x1)),_0x5ef9bf=await getDocs(_0x384065);_0x154631=!_0x5ef9bf['empty'];}const _0x547ef3=document['getElementById']('matches-prev-page'),_0xd0d39d=document[_0x6655b9(0x144)]('matches-next-page'),_0xe031f3=document[_0x6655b9(0x144)]('matches-page-indicator');if(_0x547ef3)_0x547ef3[_0x6655b9(0x317)]=_0x43d37e[_0x6655b9(0x21f)]<=0x1;if(_0xd0d39d)_0xd0d39d[_0x6655b9(0x317)]=!_0x154631;if(_0xe031f3)_0xe031f3[_0x6655b9(0x32d)]=_0x6655b9(0x315)+_0x43d37e['page'];if(_0x1c4543['empty']){_0x18d3a5['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x18d3a5[_0x6655b9(0x1ee)]='',_0x1c4543['forEach'](_0x6012e4=>{const _0x2ad2ac=_0x6655b9,_0x30047c=_0x6012e4['data'](),_0x151d74=document[_0x2ad2ac(0x30c)]('tr'),_0x5209aa=_0x30047c['approvedAt']?new Date(_0x30047c['approvedAt'][_0x2ad2ac(0x147)]*0x3e8)[_0x2ad2ac(0x182)]():'N/A';_0x151d74['setAttribute'](_0x2ad2ac(0x275),_0x6012e4['id']),_0x151d74['setAttribute']('data-ladder',currentLadder),_0x151d74[_0x2ad2ac(0x2b8)][_0x2ad2ac(0x340)]('match-row'),_0x151d74['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5209aa+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x30047c['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x30047c['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x30047c[_0x2ad2ac(0x22f)]||0x0)+'\x20-\x20'+(_0x30047c['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x30047c['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x2ad2ac(0x163)+_0x6012e4['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x6012e4['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x18d3a5['appendChild'](_0x151d74);}),setupMatchesActionButtons(),_0x353488['searchTerm']&&filterMatchesTable(),console[_0x6655b9(0x1ac)]('Loaded\x20'+_0x1c4543['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x43d37e['page']);}catch(_0x37d7be){console['error']('Error\x20loading\x20matches:',_0x37d7be),_0x18d3a5[_0x6655b9(0x1ee)]=_0x6655b9(0x262)+_0x37d7be[_0x6655b9(0x2e9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x1f6feb,_0x57776c){const _0x2caa4a=a2_0x27a326;try{console['log']('Deleting\x20match\x20'+_0x1f6feb+'\x20from\x20'+_0x57776c+_0x2caa4a(0x2b3));const _0x3d1604=auth[_0x2caa4a(0x331)];if(!_0x3d1604){showNotification(_0x2caa4a(0x300),_0x2caa4a(0x1a3));return;}const _0x468972=_0x57776c==='D1'?'approvedMatches':_0x57776c==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0x468972),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x468972,_0x1f6feb)),console['log']('Match\x20deleted\x20successfully'),showNotification(_0x2caa4a(0x158),_0x2caa4a(0x181));const _0x1a3192=_0x57776c['toLowerCase']();loadMatchesData(matchesPagination[_0x1a3192][_0x2caa4a(0x21f)]);}catch(_0xc378f9){console['error'](_0x2caa4a(0x1ed),_0xc378f9),showNotification(_0x2caa4a(0x12b)+_0xc378f9['message'],'error');}}function setupMatchesActionButtons(){const _0x230f3b=a2_0x27a326;console['log'](_0x230f3b(0x154)),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x485a30=>{_0x485a30['addEventListener']('click',_0x4010bc=>{const _0x35d686=a2_0x4eb2;_0x4010bc[_0x35d686(0x2a0)](),_0x4010bc['stopPropagation']();const _0x426163=_0x4010bc['currentTarget'][_0x35d686(0x29f)]['id'],_0x503a55=_0x4010bc['currentTarget'][_0x35d686(0x1e5)]('tr'),_0x5cbfa3=_0x503a55['dataset']['ladder'];console['log'](_0x35d686(0x191),_0x426163,_0x5cbfa3),openEditMatchModal(_0x426163,_0x5cbfa3);});}),document[_0x230f3b(0x355)]('.delete-match-btn')['forEach'](_0x13e4ee=>{const _0x347bb9=_0x230f3b;_0x13e4ee['addEventListener'](_0x347bb9(0x356),_0xd9c062=>{const _0x44ffc9=_0x347bb9;_0xd9c062['preventDefault'](),_0xd9c062['stopPropagation']();const _0x3f4dd0=_0xd9c062['currentTarget']['dataset']['id'],_0x479ce9=_0xd9c062['currentTarget']['closest']('tr'),_0x93cf89=_0x479ce9['dataset']['ladder']||currentLadder;console[_0x44ffc9(0x1ac)](_0x44ffc9(0x1a8),_0x3f4dd0,_0x93cf89),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x3f4dd0,_0x93cf89);});}),console[_0x230f3b(0x1ac)]('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x35e6e5=a2_0x27a326,_0x154cdf=document[_0x35e6e5(0x144)]('matches-search')['value']['toLowerCase'](),_0x2a56b5=document['querySelectorAll']('#matches-table-body\x20tr');let _0x13ad4d=0x0;_0x2a56b5['forEach'](_0x5a41c0=>{const _0x28bfe0=_0x35e6e5;if(_0x5a41c0['classList']['contains'](_0x28bfe0(0x323))||_0x5a41c0['classList']['contains']('empty-state')||_0x5a41c0['classList'][_0x28bfe0(0x14b)]('error-state'))return;const _0x4af0ea=_0x5a41c0['cells'][0x1][_0x28bfe0(0x32d)]['toLowerCase'](),_0x2bfef4=_0x5a41c0['cells'][0x2]['textContent']['toLowerCase'](),_0x596a9f=_0x5a41c0['cells'][0x4]['textContent']['toLowerCase']();_0x4af0ea[_0x28bfe0(0x169)](_0x154cdf)||_0x2bfef4[_0x28bfe0(0x169)](_0x154cdf)||_0x596a9f[_0x28bfe0(0x169)](_0x154cdf)?(_0x5a41c0['style']['display']='',_0x13ad4d++):_0x5a41c0['style']['display']='none';});if(_0x13ad4d===0x0&&_0x2a56b5['length']>0x0){const _0x51377f=document['getElementById']('matches-table-body'),_0x147a61=_0x51377f['querySelector']('.no-results');if(!_0x147a61){const _0x4d668e=document['createElement']('tr');_0x4d668e['className']='no-results',_0x4d668e['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x154cdf+'\x27</td>',_0x51377f[_0x35e6e5(0x245)](_0x4d668e);}}else{const _0x1fbce1=document[_0x35e6e5(0x125)]('.no-results');_0x1fbce1&&_0x1fbce1[_0x35e6e5(0x24e)]();}}function getMatchesFilters(){const _0x558bda=a2_0x27a326,_0x250027=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x5b2021=document['getElementById']('matches-start-date')['value'],_0x48ac6e=document['getElementById']('matches-end-date')['value'];let _0x59c5f7=null,_0x4b75df=null;return _0x5b2021&&(_0x59c5f7=new Date(_0x5b2021),_0x59c5f7['setHours'](0x0,0x0,0x0,0x0),_0x59c5f7=Timestamp['fromDate'](_0x59c5f7)),_0x48ac6e&&(_0x4b75df=new Date(_0x48ac6e),_0x4b75df[_0x558bda(0x35c)](0x17,0x3b,0x3b,0x3e7),_0x4b75df=Timestamp[_0x558bda(0x309)](_0x4b75df)),{'searchTerm':_0x250027,'startDate':_0x59c5f7,'endDate':_0x4b75df};}async function applyMatchesFilters(){const _0x289085=currentLadder['toLowerCase']();matchesPagination[_0x289085]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x11ccb2=a2_0x27a326;document['getElementById'](_0x11ccb2(0x286))['value']='',document['getElementById']('matches-end-date')['value']='',document['getElementById']('matches-search')['value']='';const _0x93c7af=currentLadder[_0x11ccb2(0x278)]();matchesPagination[_0x93c7af]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x10edb5,_0x5c60f3){const _0xe7a7e2=a2_0x27a326,_0x384f1c=document['getElementById']('edit-match-modal');if(!_0x384f1c)return;try{const _0x243723=_0x5c60f3==='D1'?'approvedMatches':_0x5c60f3==='D2'?_0xe7a7e2(0x1ab):'approvedMatchesD3',_0x5516bd=doc(db,_0x243723,_0x10edb5),_0x40e0fe=await getDoc(_0x5516bd);if(!_0x40e0fe['exists']()){showNotification('Match\x20not\x20found',_0xe7a7e2(0x1a3));return;}const _0x34d132=_0x40e0fe['data']();document['getElementById']('edit-match-id')[_0xe7a7e2(0x348)]=_0x10edb5,document['getElementById']('edit-match-ladder')['value']=_0x5c60f3,document['getElementById'](_0xe7a7e2(0x359))['value']=_0x34d132['winnerUsername']||'',document['getElementById'](_0xe7a7e2(0x350))['value']=_0x34d132['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')[_0xe7a7e2(0x348)]=_0x34d132['winnerSuicides']||0x0,document['getElementById'](_0xe7a7e2(0x11f))['value']=_0x34d132['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x34d132['loserUsername']||'',document['getElementById']('edit-match-loser-score')['value']=_0x34d132[_0xe7a7e2(0x1bf)]||0x0,document[_0xe7a7e2(0x144)]('edit-match-loser-suicides')[_0xe7a7e2(0x348)]=_0x34d132['loserSuicides']||0x0,document['getElementById'](_0xe7a7e2(0x2ab))['value']=_0x34d132['loserComment']||'',document[_0xe7a7e2(0x144)]('edit-match-map')[_0xe7a7e2(0x348)]=_0x34d132['mapPlayed']||'',document[_0xe7a7e2(0x144)]('edit-match-winner-demo')['value']=_0x34d132['winnerDemoLink']||'',document[_0xe7a7e2(0x144)]('edit-match-loser-demo')['value']=_0x34d132[_0xe7a7e2(0x166)]||_0x34d132['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x34d132['winnerUsername']+'\x20vs\x20'+_0x34d132['loserUsername'],_0x384f1c['classList'][_0xe7a7e2(0x340)]('active');}catch(_0x39f06b){console['error'](_0xe7a7e2(0x243),_0x39f06b),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x5b4929=a2_0x27a326,_0xcadf99=document['getElementById']('edit-match-modal');_0xcadf99&&_0xcadf99[_0x5b4929(0x2b8)]['remove']('active');}async function saveEditedMatch(){const _0x184949=a2_0x27a326;try{const _0x4b48ea=document[_0x184949(0x144)]('edit-match-id')['value'],_0x1adadf=document['getElementById']('edit-match-ladder')['value'];if(!_0x4b48ea||!_0x1adadf){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x89f4e3=_0x1adadf==='D1'?_0x184949(0x1d4):_0x1adadf==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x50e509=document[_0x184949(0x144)]('edit-match-winner')['value'][_0x184949(0x1b2)](),_0x2581de=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x248f76=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x20a8ad=document['getElementById']('edit-match-winner-comment')['value']['trim'](),_0x5b62b0=document['getElementById']('edit-match-loser')[_0x184949(0x348)][_0x184949(0x1b2)](),_0x546855=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x2c4c82=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x40ae6b=document['getElementById']('edit-match-loser-comment')[_0x184949(0x348)]['trim'](),_0xb5f686=document['getElementById'](_0x184949(0x316))['value']['trim'](),_0x2ab790=document['getElementById'](_0x184949(0x2e7))['value']['trim'](),_0x26f3dd=document['getElementById']('edit-match-loser-demo')['value']['trim']();if(!_0x50e509||!_0x5b62b0){showNotification(_0x184949(0x140),_0x184949(0x1a3));return;}await updateDoc(doc(db,_0x89f4e3,_0x4b48ea),{'winnerUsername':_0x50e509,'winnerScore':_0x2581de,'winnerSuicides':_0x248f76,'winnerComment':_0x20a8ad,'loserUsername':_0x5b62b0,'loserScore':_0x546855,'loserSuicides':_0x2c4c82,'loserComment':_0x40ae6b,'mapPlayed':_0xb5f686,'winnerDemoLink':_0x2ab790||null,'loserDemoLink':_0x26f3dd||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x184949(0x331)][_0x184949(0x2d6)],'isEdited':!![]}),showNotification(_0x184949(0x12e),_0x184949(0x181)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x1adadf['toLowerCase']()]['page']);}catch(_0x265d66){console['error']('Error\x20saving\x20match:',_0x265d66),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x265d66[_0x184949(0x2e9)],'error');}}async function openDeleteMatchModal(_0x42c6a3,_0x11cc98){const _0x56a8da=a2_0x27a326;try{const _0x3844c8=_0x11cc98==='D1'?'approvedMatches':_0x11cc98==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x328bf6=doc(db,_0x3844c8,_0x42c6a3),_0x1f85bf=await getDoc(_0x328bf6);if(!_0x1f85bf[_0x56a8da(0x304)]()){showNotification(_0x56a8da(0x1ff),'error');return;}const _0x22ff1f=_0x1f85bf['data'](),_0x4f748f=document['getElementById']('delete-match-confirm-modal');_0x4f748f['dataset'][_0x56a8da(0x357)]=_0x42c6a3,_0x4f748f[_0x56a8da(0x29f)][_0x56a8da(0x19c)]=_0x11cc98;const _0x176e18=_0x22ff1f['approvedAt']?new Date(_0x22ff1f[_0x56a8da(0x27c)][_0x56a8da(0x147)]*0x3e8)[_0x56a8da(0x182)]():_0x56a8da(0x15c),_0x5827d3=document['getElementById']('delete-match-summary');_0x5827d3['innerHTML']=_0x56a8da(0x14a)+_0x176e18+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x22ff1f['winnerUsername']+_0x56a8da(0x11a)+_0x22ff1f[_0x56a8da(0x307)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x22ff1f['winnerScore']||0x0)+'\x20-\x20'+(_0x22ff1f[_0x56a8da(0x1bf)]||0x0)+_0x56a8da(0x162)+(_0x22ff1f['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x11cc98+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4f748f['classList'][_0x56a8da(0x340)]('active');}catch(_0x20a0ec){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x20a0ec),showNotification(_0x56a8da(0x179),_0x56a8da(0x1a3));}}function closeDeleteMatchModal(){const _0x4a9617=a2_0x27a326,_0x5a66c8=document[_0x4a9617(0x144)]('delete-match-confirm-modal');_0x5a66c8&&(_0x5a66c8['classList'][_0x4a9617(0x24e)](_0x4a9617(0x27b)),_0x5a66c8[_0x4a9617(0x141)](_0x4a9617(0x261)),_0x5a66c8['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x3b3fcb=a2_0x27a326,_0x666507=document['getElementById']('delete-match-confirm-modal'),_0x7debb0=_0x666507[_0x3b3fcb(0x29f)][_0x3b3fcb(0x357)],_0x3f93d7=_0x666507[_0x3b3fcb(0x29f)]['ladder'];if(!_0x7debb0||!_0x3f93d7){showNotification(_0x3b3fcb(0x20e),_0x3b3fcb(0x1a3)),closeDeleteMatchModal();return;}try{const _0x4c6673=_0x3f93d7==='D1'?'approvedMatches':_0x3f93d7==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x4c6673,_0x7debb0)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x3f93d7['toLowerCase']()]['page']);}catch(_0x33cf72){console[_0x3b3fcb(0x1a3)]('Error\x20deleting\x20match:',_0x33cf72),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x33cf72['message'],'error');}}async function saveHighlightChanges(){const _0x358ef0=a2_0x27a326,_0x142790=document['getElementById'](_0x358ef0(0x121))['value'],_0x2d6473=document['getElementById'](_0x358ef0(0x25b))['value'];let _0x2a47ac={'title':document[_0x358ef0(0x144)]('edit-highlight-title-input')[_0x358ef0(0x348)]['trim'](),'type':_0x2d6473,'description':document['getElementById']('edit-highlight-description-input')['value']['trim'](),'videoId':document['getElementById'](_0x358ef0(0x33b))[_0x358ef0(0x348)]['trim'](),'submittedBy':auth['currentUser'][_0x358ef0(0x2d6)]};if(_0x2d6473==='match'){_0x2a47ac[_0x358ef0(0x342)]=document['getElementById'](_0x358ef0(0x13b))[_0x358ef0(0x348)][_0x358ef0(0x1b2)](),_0x2a47ac['map']=document[_0x358ef0(0x144)]('edit-highlight-map-input')['value']['trim']();const _0x17f258=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x2a47ac['matchDate']=_0x17f258?Timestamp['fromDate'](new Date(_0x17f258)):null,_0x2a47ac['winnerName']=document['getElementById'](_0x358ef0(0x25d))['value']['trim'](),_0x2a47ac[_0x358ef0(0x22f)]=document['getElementById']('edit-highlight-winnerScore-input')['value']['trim'](),_0x2a47ac['loserName']=document['getElementById']('edit-highlight-loserName-input')[_0x358ef0(0x348)]['trim'](),_0x2a47ac['loserScore']=document['getElementById']('edit-highlight-loserScore-input')['value']['trim'](),_0x2a47ac[_0x358ef0(0x292)]=document['getElementById'](_0x358ef0(0x2dd))['value'][_0x358ef0(0x1b2)](),_0x2a47ac['mapCreator']=null,_0x2a47ac[_0x358ef0(0x15e)]=null,_0x2a47ac['creatorImageUrl']=null,_0x2a47ac[_0x358ef0(0x303)]=null,_0x2a47ac['achievementType']=null,_0x2a47ac['achievementDetails']=null,_0x2a47ac['playerProfileUrl']=null;}else{if(_0x2d6473===_0x358ef0(0x124))_0x2a47ac['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x2a47ac['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x2a47ac['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value']['trim'](),_0x2a47ac['creatorImageUrl']=document['getElementById'](_0x358ef0(0x15f))['value'][_0x358ef0(0x1b2)](),_0x2a47ac['matchInfo']=null,_0x2a47ac['matchDate']=null,_0x2a47ac[_0x358ef0(0x366)]=null,_0x2a47ac[_0x358ef0(0x22f)]=null,_0x2a47ac['loserName']=null,_0x2a47ac['loserScore']=null,_0x2a47ac[_0x358ef0(0x292)]=null,_0x2a47ac['achievementPlayer']=null,_0x2a47ac['achievementType']=null,_0x2a47ac['achievementDetails']=null,_0x2a47ac['playerProfileUrl']=null;else _0x2d6473==='achievement'&&(_0x2a47ac[_0x358ef0(0x303)]=document['getElementById'](_0x358ef0(0x203))['value']['trim'](),_0x2a47ac['achievementType']=document[_0x358ef0(0x144)]('edit-highlight-achievementType-input')['value']['trim'](),_0x2a47ac['achievementDetails']=document[_0x358ef0(0x144)]('edit-highlight-achievementDetails-input')['value'][_0x358ef0(0x1b2)](),_0x2a47ac['playerProfileUrl']=document['getElementById'](_0x358ef0(0x353))['value']['trim'](),_0x2a47ac['matchInfo']=null,_0x2a47ac['map']=null,_0x2a47ac['matchDate']=null,_0x2a47ac['winnerName']=null,_0x2a47ac['winnerScore']=null,_0x2a47ac['loserName']=null,_0x2a47ac['loserScore']=null,_0x2a47ac['matchLink']=null,_0x2a47ac['mapCreator']=null,_0x2a47ac['mapVersion']=null,_0x2a47ac[_0x358ef0(0x19a)]=null);}try{if(_0x142790){_0x2a47ac[_0x358ef0(0x1e7)]=serverTimestamp();const _0xb764fb=doc(db,'highlights',_0x142790);await updateDoc(_0xb764fb,_0x2a47ac),showNotification(_0x358ef0(0x132),'success');}else _0x2a47ac['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x358ef0(0x2d8)),_0x2a47ac),showNotification(_0x358ef0(0x247),_0x358ef0(0x181));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x49754e){console['error'](_0x358ef0(0x212),_0x49754e),showNotification('Error\x20saving\x20highlight:\x20'+_0x49754e[_0x358ef0(0x2e9)],_0x358ef0(0x1a3));}}async function resimulateMatch(){const _0x27567b=a2_0x27a326;try{const _0x4fb412=document['getElementById']('resimulate-match-id')['value'];if(!_0x4fb412){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x5ad224=auth['currentUser'];if(!_0x5ad224){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x39ada6=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x27567b(0x1ab):_0x27567b(0x1c9),_0x355e87=doc(db,_0x39ada6,_0x4fb412),_0x5f4815=await getDoc(_0x355e87);if(!_0x5f4815['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x26a62e=_0x5f4815[_0x27567b(0x20a)](),_0x323615=_0x26a62e['approvedAt']?_0x26a62e['approvedAt'][_0x27567b(0x15b)]()[_0x27567b(0x36e)]():_0x26a62e[_0x27567b(0x1ce)]?_0x26a62e[_0x27567b(0x1ce)]['toDate']?_0x26a62e[_0x27567b(0x1ce)]['toDate']()['toLocaleString']():new Date(_0x26a62e['matchDate'])[_0x27567b(0x36e)]():'Unknown',_0x4d236b=_0x27567b(0x287)+_0x26a62e['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x26a62e[_0x27567b(0x307)]+_0x27567b(0x24a)+_0x26a62e['winnerScore']+'-'+_0x26a62e['loserScore']+_0x27567b(0x26d)+(_0x26a62e[_0x27567b(0x172)]||_0x26a62e['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x323615+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x4fb412+_0x27567b(0x12a)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x27567b(0x11d))['innerHTML']=_0x4d236b,document['getElementById']('match-details-container')['style'][_0x27567b(0x1d7)]='block',document['getElementById']('confirm-resimulate-btn')['style'][_0x27567b(0x1d7)]='block',window['pendingResimulateData']={'matchId':_0x4fb412,'matchData':_0x26a62e,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x3f7b53){console['error'](_0x27567b(0x290),_0x3f7b53),showNotification(_0x27567b(0x285)+_0x3f7b53[_0x27567b(0x2e9)],_0x27567b(0x1a3));}}async function confirmResimulateMatch(){const _0x213bb9=a2_0x27a326;try{const {matchId:_0x49d0ee,matchData:_0x2bd87e,ladder:_0x1a252f}=window['pendingResimulateData'];if(!_0x49d0ee||!_0x2bd87e){showNotification(_0x213bb9(0x246),_0x213bb9(0x1a3));return;}const _0x428dc4=_0x1a252f==='D1'?'players':_0x1a252f==='D2'?'playersD2':'playersD3',_0x3f3de3=_0x1a252f==='D1'?_0x213bb9(0x1e2):_0x1a252f==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x34ecd8,_0x3cdf0f]=await Promise['all']([getDocs(query(collection(db,_0x428dc4),where(_0x213bb9(0x256),'==',_0x2bd87e['winnerUsername']))),getDocs(query(collection(db,_0x428dc4),where('username','==',_0x2bd87e[_0x213bb9(0x307)])))]);if(_0x34ecd8[_0x213bb9(0x31c)]||_0x3cdf0f['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x197b15=_0x34ecd8[_0x213bb9(0x324)][0x0]['id'],_0x1e2828=_0x3cdf0f['docs'][0x0]['id'],_0x4e2b90=_0x34ecd8['docs'][0x0]['data'](),_0x512ecb=_0x3cdf0f['docs'][0x0][_0x213bb9(0x20a)](),[_0x4874c0,_0xb33d43]=await Promise[_0x213bb9(0x143)]([getDocs(query(collection(db,_0x3f3de3),where('playerId','==',_0x197b15),where('matchId','==',_0x49d0ee))),getDocs(query(collection(db,_0x3f3de3),where(_0x213bb9(0x1ea),'==',_0x1e2828),where('matchId','==',_0x49d0ee)))]),_0x1112d4=!_0x4874c0['empty'],_0x540c7d=!_0xb33d43['empty'],_0xdcb50='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x1112d4?'âœ…\x20Exists':'âŒ\x20Missing')+_0x213bb9(0x2ee)+(_0x540c7d?'âœ…\x20Exists':'âŒ\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x4e2b90['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x512ecb['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x4e2b90['position']||_0x213bb9(0x18a))+_0x213bb9(0x31f)+(_0x512ecb[_0x213bb9(0x11e)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>âš ï¸\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0xdcb50,document[_0x213bb9(0x144)]('validation-results-container')[_0x213bb9(0x21a)]['display']='block';if(_0x1112d4&&_0x540c7d){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification(_0x213bb9(0x23b),'info');const _0x219227=_0x2bd87e['approvedAt']||_0x2bd87e[_0x213bb9(0x1ce)]||serverTimestamp(),[_0x98bf9e,_0x4af78a]=await Promise['all']([getPlayerEloAtTime(_0x197b15,_0x219227,_0x3f3de3),getPlayerEloAtTime(_0x1e2828,_0x219227,_0x3f3de3)]),{calculateElo:_0x42e077}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x499853,newLoserRating:_0x50f1d8}=_0x42e077(_0x98bf9e,_0x4af78a),_0x5afaf5=_0x4e2b90[_0x213bb9(0x11e)]||Number['MAX_SAFE_INTEGER'],_0x5bbb12=_0x512ecb[_0x213bb9(0x11e)]||Number[_0x213bb9(0x200)];let _0x4055dd=_0x5afaf5,_0x120828=_0x5bbb12;_0x5afaf5>_0x5bbb12&&(_0x4055dd=_0x5bbb12,_0x120828=_0x5bbb12+0x1);const _0x183d8b=writeBatch(db),_0x483e83=doc(db,_0x428dc4,_0x197b15);_0x183d8b['update'](_0x483e83,{'eloRating':_0x499853,'position':_0x4055dd,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x213bb9(0x331)]['uid']});const _0x193d94=doc(db,_0x428dc4,_0x1e2828);_0x183d8b[_0x213bb9(0x351)](_0x193d94,{'eloRating':_0x50f1d8,'position':_0x120828,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x5afaf5>_0x5bbb12){const _0x5d168c=await getDocs(query(collection(db,_0x428dc4),where(_0x213bb9(0x11e),'>',_0x5bbb12),where(_0x213bb9(0x11e),'<',_0x5afaf5)));_0x5d168c['forEach'](_0x9e3477=>{const _0x34f388=_0x213bb9,_0x65919b=doc(db,_0x428dc4,_0x9e3477['id']),_0x22b9f7=_0x9e3477['data']()[_0x34f388(0x11e)];_0x183d8b['update'](_0x65919b,{'position':_0x22b9f7+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x1112d4){const _0x23c810=doc(collection(db,_0x3f3de3));_0x183d8b['set'](_0x23c810,{'playerId':_0x197b15,'player':_0x2bd87e['winnerUsername'],'previousElo':_0x98bf9e,'newElo':_0x499853,'eloChange':_0x499853-_0x98bf9e,'opponentId':_0x1e2828,'opponent':_0x2bd87e['loserUsername'],'matchResult':_0x213bb9(0x30a),'previousPosition':_0x5afaf5,'newPosition':_0x4055dd,'positionChange':_0x4055dd-_0x5afaf5,'matchId':_0x49d0ee,'timestamp':_0x219227,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x1a252f,'matchScore':_0x2bd87e['winnerScore']+'-'+_0x2bd87e['loserScore'],'mapPlayed':_0x2bd87e['mapPlayed']||_0x2bd87e['mapName']||_0x213bb9(0x18a),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x540c7d){const _0x43ec3d=doc(collection(db,_0x3f3de3));_0x183d8b[_0x213bb9(0x284)](_0x43ec3d,{'playerId':_0x1e2828,'player':_0x2bd87e['loserUsername'],'previousElo':_0x4af78a,'newElo':_0x50f1d8,'eloChange':_0x50f1d8-_0x4af78a,'opponentId':_0x197b15,'opponent':_0x2bd87e['winnerUsername'],'matchResult':'loss','previousPosition':_0x5bbb12,'newPosition':_0x120828,'positionChange':_0x120828-_0x5bbb12,'matchId':_0x49d0ee,'timestamp':_0x219227,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x213bb9(0x331)]['uid'],'gameMode':_0x1a252f,'matchScore':_0x2bd87e['winnerScore']+'-'+_0x2bd87e['loserScore'],'mapPlayed':_0x2bd87e['mapPlayed']||_0x2bd87e['mapName']||'Unknown','note':_0x213bb9(0x1b3)});}const _0x223cd5=_0x1a252f==='D1'?'approvedMatches':_0x1a252f==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x493fcd=doc(db,_0x223cd5,_0x49d0ee);_0x183d8b['update'](_0x493fcd,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x213bb9(0x331)]['uid'],'resimulatedReason':_0x213bb9(0x345),'originalWinnerElo':_0x4e2b90[_0x213bb9(0x257)],'originalLoserElo':_0x512ecb['eloRating'],'originalWinnerPosition':_0x5afaf5,'originalLoserPosition':_0x5bbb12,'resimulatedWinnerElo':_0x499853,'resimulatedLoserElo':_0x50f1d8,'resimulatedWinnerPosition':_0x4055dd,'resimulatedLoserPosition':_0x120828}),await _0x183d8b['commit']();const _0x2365b3=(!_0x1112d4?0x1:0x0)+(!_0x540c7d?0x1:0x0),_0x11c375=_0x5afaf5!==_0x4055dd||_0x5bbb12!==_0x120828;showNotification('Match\x20resimulated\x20successfully!\x20'+(_0x213bb9(0x21e)+_0x2365b3+_0x213bb9(0x260))+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x98bf9e+'â†’'+_0x499853+'\x20(+'+(_0x499853-_0x98bf9e)+'),\x20')+('Loser\x20'+_0x4af78a+'â†’'+_0x50f1d8+'\x20('+(_0x50f1d8-_0x4af78a)+').\x20')+(''+(_0x11c375?'Positions\x20updated:\x20Winner\x20'+_0x5afaf5+'â†’'+_0x4055dd+_0x213bb9(0x2be)+_0x5bbb12+'â†’'+_0x120828:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document[_0x213bb9(0x125)]('#players.content-section.active')&&loadPlayersData();}catch(_0xafa10d){console['error']('Error\x20resimulating\x20match:',_0xafa10d),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0xafa10d[_0x213bb9(0x2e9)],'error');}}async function getPlayerEloAtTime(_0x10ed6e,_0x241c7e,_0x30e6f7){const _0x24e247=a2_0x27a326;try{const _0x1330c6=_0x241c7e[_0x24e247(0x15b)]?_0x241c7e[_0x24e247(0x15b)]():new Date(_0x241c7e),_0x589c89=query(collection(db,_0x30e6f7),where('playerId','==',_0x10ed6e),where('timestamp','<',_0x241c7e),orderBy(_0x24e247(0x1cd),'desc'),limit(0x1)),_0x3d947f=await getDocs(_0x589c89);if(!_0x3d947f['empty']){const _0x519bea=_0x3d947f['docs'][0x0]['data']();return console[_0x24e247(0x1ac)]('Found\x20ELO\x20history\x20for\x20player\x20'+_0x10ed6e+'\x20before\x20match:\x20'+_0x519bea['newElo']),_0x519bea['newElo'];}else return console['log'](_0x24e247(0x35d)+_0x10ed6e+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x2c2d56){return console['error'](_0x24e247(0x2ed)+_0x10ed6e+':',_0x2c2d56),0x4b0;}}function openResimulateModal(){const _0xb851c9=a2_0x27a326;console[_0xb851c9(0x1ac)]('openResimulateModal\x20called!');const _0x331ce4=document['getElementById']('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x331ce4);if(!_0x331ce4){console['error']('Modal\x20element\x20not\x20found!');return;}_0x331ce4[_0xb851c9(0x21a)]['display']=_0xb851c9(0x168),_0x331ce4['style']['visibility']=_0xb851c9(0x2cc),_0x331ce4['style']['opacity']='1',_0x331ce4['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console[_0xb851c9(0x1ac)](_0xb851c9(0x1fe),window[_0xb851c9(0x363)](_0x331ce4)['display']);const _0x4638ea=document[_0xb851c9(0x144)]('match-details-container'),_0x8d9f04=document[_0xb851c9(0x144)](_0xb851c9(0x370)),_0x42ab3a=document[_0xb851c9(0x144)]('confirm-resimulate-btn'),_0x38f41d=document['getElementById'](_0xb851c9(0x199));if(_0x4638ea)_0x4638ea['innerHTML']='';if(_0x8d9f04)_0x8d9f04['innerHTML']='';if(_0x42ab3a)_0x42ab3a['style']['display']='none';if(_0x38f41d)_0x38f41d['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x4bf917=a2_0x27a326;document[_0x4bf917(0x144)]('resimulate-modal')['style']['display']=_0x4bf917(0x1b7),window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window[a2_0x27a326(0x1b1)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a2_0x27a326(0x34e)]=closeResimulateModal;async function loadPointsData(){const _0x3180f2=a2_0x27a326;console['log']('Loading\x20points\x20data...');try{await Promise[_0x3180f2(0x143)]([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x3180f2(0x2b5),'success');}catch(_0x3c0c92){console[_0x3180f2(0x1a3)](_0x3180f2(0x18d),_0x3c0c92),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x3c0c92['message'],'error');}}function renderPointsOverview(_0x411e2c){const _0x458161=a2_0x27a326,_0x2d2d07=document['getElementById']('points-overview-table-body');if(!_0x2d2d07)return;if(_0x411e2c['length']===0x0){_0x2d2d07[_0x458161(0x1ee)]=_0x458161(0x2fd);return;}_0x2d2d07['innerHTML']='',_0x411e2c[_0x458161(0x2b0)](_0x2e76f9=>{const _0x20bb38=_0x458161,_0xd178e3=document['createElement']('tr'),_0x544fe3=_0x2e76f9['displayName']||_0x2e76f9['username']||'Unknown\x20User',_0x350239=_0x2e76f9[_0x20bb38(0x2d6)]||'No\x20email',_0x5d4215=_0x2e76f9['points']||0x0,_0x202617=_0x2e76f9['lastPointsModified']?new Date(_0x2e76f9['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():_0x20bb38(0x334);_0xd178e3['innerHTML']=_0x20bb38(0x32b)+_0x544fe3+_0x20bb38(0x244)+_0x350239+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x5d4215>0x3e8?'high-points':_0x5d4215>0x1f4?'medium-points':_0x20bb38(0x31e))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x5d4215[_0x20bb38(0x36e)]()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x202617+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x2e76f9['id']+_0x20bb38(0x20f)+_0x2e76f9['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2d2d07['appendChild'](_0xd178e3);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x4c98bf=a2_0x27a326;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0xe41c82=document[_0x4c98bf(0x355)](_0x4c98bf(0x29d));console['log']('Found\x20'+_0xe41c82['length']+_0x4c98bf(0x1c0)),_0xe41c82['forEach'](_0x59ad52=>{const _0x2b8520=_0x4c98bf,_0x2bfcc2=_0x59ad52['cloneNode'](!![]);_0x59ad52['parentNode'][_0x2b8520(0x157)](_0x2bfcc2,_0x59ad52);});const _0xae6255=document['querySelectorAll']('.view-history-btn');console['log']('Found\x20'+_0xae6255['length']+'\x20view\x20history\x20buttons'),_0xae6255[_0x4c98bf(0x2b0)](_0x412a8a=>{const _0x158293=_0x4c98bf,_0x489e71=_0x412a8a[_0x158293(0x368)](!![]);_0x412a8a['parentNode'][_0x158293(0x157)](_0x489e71,_0x412a8a);}),document[_0x4c98bf(0x355)](_0x4c98bf(0x29d))[_0x4c98bf(0x2b0)](_0x1dd345=>{_0x1dd345['addEventListener']('click',function(_0x29fa9b){const _0x35dfe0=a2_0x4eb2;_0x29fa9b['preventDefault'](),_0x29fa9b[_0x35dfe0(0x202)]();const _0x33fab4=this['dataset'][_0x35dfe0(0x12d)];console['log'](_0x35dfe0(0x31d),_0x33fab4);if(!_0x33fab4){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x35dfe0(0x21a)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x33fab4);});}),document[_0x4c98bf(0x355)]('.view-history-btn')['forEach'](_0x24938c=>{_0x24938c['addEventListener']('click',function(_0x3bdeac){const _0x5a7d63=a2_0x4eb2;_0x3bdeac['preventDefault'](),_0x3bdeac['stopPropagation']();const _0x60b6ee=this[_0x5a7d63(0x29f)]['userId'];console[_0x5a7d63(0x1ac)]('View\x20history\x20clicked\x20for\x20user:',_0x60b6ee);if(!_0x60b6ee){console[_0x5a7d63(0x1a3)](_0x5a7d63(0x2cb));return;}this[_0x5a7d63(0x21a)][_0x5a7d63(0x2fb)]='0.6',setTimeout(()=>{const _0x5dc32c=_0x5a7d63;this[_0x5dc32c(0x21a)]['opacity']='1';},0xc8),loadUserPointsHistory(_0x60b6ee);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x57bdb6){const _0x106bb7=a2_0x27a326;console[_0x106bb7(0x1ac)](_0x106bb7(0x2d3),_0x57bdb6);const _0x50685d=document[_0x106bb7(0x144)]('quick-edit-points-modal');if(!_0x50685d){console[_0x106bb7(0x1a3)]('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...','info');const _0x85665e=doc(db,_0x106bb7(0x2ec),_0x57bdb6),_0x2d2d74=await getDoc(_0x85665e);if(!_0x2d2d74['exists']()){showNotification(_0x106bb7(0x33f),'error');return;}const _0x359d45=_0x2d2d74[_0x106bb7(0x20a)]();console['log']('User\x20data\x20loaded:',_0x359d45);const _0x3b9523=document['getElementById'](_0x106bb7(0x1bd)),_0x29c3f9=document[_0x106bb7(0x144)]('quick-edit-display-name'),_0x29fb60=document['getElementById']('quick-edit-email'),_0x422d1f=document['getElementById']('quick-edit-current-points'),_0x1e191f=document['getElementById']('quick-edit-points-form');if(!_0x3b9523||!_0x29c3f9||!_0x29fb60||!_0x422d1f||!_0x1e191f){console['error'](_0x106bb7(0x2bf)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x3b9523['value']=_0x57bdb6,_0x29c3f9['textContent']=_0x359d45[_0x106bb7(0x201)]||_0x359d45['username']||_0x106bb7(0x280),_0x29fb60['textContent']=_0x359d45['email']||'No\x20email',_0x422d1f['textContent']=(_0x359d45['points']||0x0)[_0x106bb7(0x36e)](),_0x1e191f['reset']();const _0x283a8a=document['getElementById']('quick-add');_0x283a8a&&(_0x283a8a['checked']=!![]);_0x50685d['classList']['add']('active'),console[_0x106bb7(0x1ac)](_0x106bb7(0x161));const _0x2d7a91=document[_0x106bb7(0x144)]('quick-points-amount');_0x2d7a91&&setTimeout(()=>_0x2d7a91['focus'](),0x64);}catch(_0x32a73e){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x32a73e),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x32a73e['message'],_0x106bb7(0x1a3));}}function closeQuickEditModal(){const _0x50d0c9=a2_0x27a326,_0x5512b3=document[_0x50d0c9(0x144)]('quick-edit-points-modal');_0x5512b3&&_0x5512b3['classList']['remove']('active');}async function handleQuickEditPoints(_0x3b44b0){const _0x4585d5=a2_0x27a326;_0x3b44b0[_0x4585d5(0x2a0)]();const _0x367c15=document['getElementById'](_0x4585d5(0x1bd))['value'],_0x446698=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0x548e9e=parseInt(document['getElementById'](_0x4585d5(0x279))['value']),_0x1b08dc=document['getElementById']('quick-points-reason')[_0x4585d5(0x348)]['trim']();console['log'](_0x4585d5(0x16f),{'userId':_0x367c15,'action':_0x446698,'amount':_0x548e9e,'reason':_0x1b08dc});if(!_0x367c15||!_0x548e9e||_0x548e9e<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x367c15,_0x446698,_0x548e9e,_0x1b08dc),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x4585d5(0x2a1),'success'),console['log'](_0x4585d5(0x119),_0x367c15);}catch(_0x13bb83){console['error'](_0x4585d5(0x1c2),_0x13bb83),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x13bb83['message'],'error');}}async function searchUsersForPoints(){const _0x213a57=a2_0x27a326,_0x177e97=document['getElementById'](_0x213a57(0x1e1))[_0x213a57(0x348)]['trim']()['toLowerCase'](),_0x4499f4=document['getElementById']('user-search-results');if(!_0x177e97||_0x177e97[_0x213a57(0x2f0)]<0x2){_0x4499f4[_0x213a57(0x1ee)]='';return;}_0x4499f4['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x4bfd42=collection(db,'userProfiles'),_0x2ae079=await getDocs(_0x4bfd42),_0x5981f8=[];_0x2ae079[_0x213a57(0x2b0)](_0x2d7448=>{const _0x2612ff=_0x213a57,_0x408047=_0x2d7448['data'](),_0x2af9b8=(_0x408047[_0x2612ff(0x201)]||_0x408047['username']||'')[_0x2612ff(0x278)](),_0x472a04=(_0x408047[_0x2612ff(0x2d6)]||'')[_0x2612ff(0x278)]();(_0x2af9b8['includes'](_0x177e97)||_0x472a04['includes'](_0x177e97))&&_0x5981f8['push']({'id':_0x2d7448['id'],..._0x408047});});if(_0x5981f8['length']===0x0){_0x4499f4[_0x213a57(0x1ee)]='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x4499f4[_0x213a57(0x1ee)]='',_0x5981f8[_0x213a57(0x2b0)](_0x5b2209=>{const _0x583329=_0x213a57,_0x2394d1=document[_0x583329(0x30c)]('div');_0x2394d1['className']='search-result-item',_0x2394d1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x5b2209[_0x583329(0x201)]||_0x5b2209[_0x583329(0x256)]||_0x583329(0x18a))+_0x583329(0x346)+(_0x5b2209['email']||'No\x20email')+_0x583329(0x242)+(_0x5b2209[_0x583329(0x2cf)]||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2394d1[_0x583329(0x2fa)]('click',()=>selectUserForPoints(_0x5b2209)),_0x4499f4['appendChild'](_0x2394d1);});}catch(_0x514d85){console['error'](_0x213a57(0x1f8),_0x514d85),_0x4499f4['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x48dcdc){const _0x5c0c93=a2_0x27a326;document['getElementById']('selected-user-name')[_0x5c0c93(0x32d)]=_0x48dcdc['displayName']||_0x48dcdc[_0x5c0c93(0x256)]||'Unknown\x20User',document['getElementById']('selected-user-points')['textContent']=(_0x48dcdc[_0x5c0c93(0x2cf)]||0x0)['toLocaleString'](),document[_0x5c0c93(0x144)]('selected-user-id')['value']=_0x48dcdc['id'],document[_0x5c0c93(0x144)](_0x5c0c93(0x2c6))['style'][_0x5c0c93(0x1d7)]='block',document[_0x5c0c93(0x144)]('points-management-forms')['style']['display']=_0x5c0c93(0x168),document['getElementById'](_0x5c0c93(0x1dc))[_0x5c0c93(0x1ee)]='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x3ce5eb){const _0x22bb06=a2_0x27a326;_0x3ce5eb['preventDefault']();const _0x570a6e=document[_0x22bb06(0x144)](_0x22bb06(0x2ba))['value'],_0x53c18e=document[_0x22bb06(0x144)](_0x22bb06(0x165))['value'],_0x287f08=parseInt(document['getElementById'](_0x22bb06(0x369))['value']),_0x2e87d0=document[_0x22bb06(0x144)]('points-reason')['value'][_0x22bb06(0x1b2)]();if(!_0x570a6e||!_0x287f08||_0x287f08<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x22bb06(0x1a3));return;}try{await modifyUserPoints(_0x570a6e,_0x53c18e,_0x287f08,_0x2e87d0),document['getElementById'](_0x22bb06(0x1d5))[_0x22bb06(0x208)]();const _0x555961=doc(db,'userProfiles',_0x570a6e),_0x520018=await getDoc(_0x555961);if(_0x520018['exists']()){const _0x5ea5e7=_0x520018[_0x22bb06(0x20a)]();document['getElementById']('selected-user-points')['textContent']=(_0x5ea5e7['points']||0x0)[_0x22bb06(0x36e)]();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x384bf4){console['error']('Error\x20modifying\x20points:',_0x384bf4),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x384bf4['message'],'error');}}async function loadPointsHistory(){const _0x2c3b51=a2_0x27a326,_0x10337a=document['getElementById'](_0x2c3b51(0x2fe));if(!_0x10337a)return;_0x10337a['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x3bb8e3=collection(db,_0x2c3b51(0x231)),_0x2651cc=query(_0x3bb8e3,orderBy('timestamp','desc'),limit(0x32)),_0x2c4a82=await getDocs(_0x2651cc);if(_0x2c4a82['empty']){_0x10337a['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x10337a['innerHTML']='',_0x2c4a82['forEach'](_0x1f368=>{const _0x1ecfbf=_0x2c3b51,_0x5005f0=_0x1f368['data'](),_0x12dbd9=document['createElement']('tr'),_0x26d8eb=_0x5005f0[_0x1ecfbf(0x1cd)]?new Date(_0x5005f0[_0x1ecfbf(0x1cd)]['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x2ddb0f='';switch(_0x5005f0['action']){case'add':_0x2ddb0f='Added\x20'+_0x5005f0['amount']+'\x20points';break;case _0x1ecfbf(0x360):_0x2ddb0f=_0x1ecfbf(0x28f)+_0x5005f0[_0x1ecfbf(0x209)]+'\x20points';break;case'set':_0x2ddb0f=_0x1ecfbf(0x1c3)+_0x5005f0['amount']+'\x20points';break;default:_0x2ddb0f=_0x5005f0['action']+'\x20'+_0x5005f0[_0x1ecfbf(0x209)]+'\x20points';}_0x12dbd9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x26d8eb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5005f0['displayName']||_0x1ecfbf(0x280))+_0x1ecfbf(0x1fc)+_0x2ddb0f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x5005f0['action']+_0x1ecfbf(0x2da)+(_0x5005f0[_0x1ecfbf(0x32c)]||0x0)+'\x20â†’\x20'+(_0x5005f0[_0x1ecfbf(0x274)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5005f0['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5005f0[_0x1ecfbf(0x28d)]||_0x1ecfbf(0x2b1))+_0x1ecfbf(0x1b4),_0x10337a[_0x1ecfbf(0x245)](_0x12dbd9);});}catch(_0x70433f){console['error']('Error\x20loading\x20points\x20history:',_0x70433f),_0x10337a['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x70433f['message']+'</td></tr>';}}function filterPointsOverview(){const _0x4a74cb=a2_0x27a326,_0x4b0f71=document['getElementById']('points-overview-search')['value'][_0x4a74cb(0x278)]();if(!window[_0x4a74cb(0x2c9)])return;const _0x253223=window[_0x4a74cb(0x2c9)][_0x4a74cb(0x218)](_0x5b0a7a=>{const _0x5e232a=_0x4a74cb,_0x247cdd=(_0x5b0a7a[_0x5e232a(0x201)]||_0x5b0a7a['username']||'')['toLowerCase'](),_0x14f8e6=(_0x5b0a7a['email']||'')['toLowerCase']();return _0x247cdd['includes'](_0x4b0f71)||_0x14f8e6['includes'](_0x4b0f71);});renderPointsOverview(_0x253223);}function sortPointsOverview(){const _0x6cdc7d=a2_0x27a326,_0x44fca6=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0xec6bb3=[...window['allUsersPoints']];switch(_0x44fca6){case'points-desc':_0xec6bb3['sort']((_0xb62f7f,_0x47da18)=>(_0x47da18['points']||0x0)-(_0xb62f7f['points']||0x0));break;case _0x6cdc7d(0x2c3):_0xec6bb3[_0x6cdc7d(0x30f)]((_0x20e9e0,_0x52daf0)=>(_0x20e9e0[_0x6cdc7d(0x2cf)]||0x0)-(_0x52daf0['points']||0x0));break;case'name-asc':_0xec6bb3['sort']((_0x3e084a,_0x12812c)=>{const _0x9057ac=_0x6cdc7d,_0x353229=(_0x3e084a['displayName']||_0x3e084a[_0x9057ac(0x256)]||'')['toLowerCase'](),_0x5c7330=(_0x12812c[_0x9057ac(0x201)]||_0x12812c[_0x9057ac(0x256)]||'')[_0x9057ac(0x278)]();return _0x353229['localeCompare'](_0x5c7330);});break;case'name-desc':_0xec6bb3['sort']((_0x438377,_0x4e3a50)=>{const _0x309814=_0x6cdc7d,_0xf0b8f7=(_0x438377[_0x309814(0x201)]||_0x438377[_0x309814(0x256)]||'')[_0x309814(0x278)](),_0x898dc5=(_0x4e3a50['displayName']||_0x4e3a50['username']||'')[_0x309814(0x278)]();return _0x898dc5['localeCompare'](_0xf0b8f7);});break;}renderPointsOverview(_0xec6bb3);}async function handleAwardItem(_0x573415){const _0x34e01f=a2_0x27a326;_0x573415[_0x34e01f(0x2a0)]();const _0x343d87=document['getElementById']('selected-user-id')['value'],_0x3eeb6b=document[_0x34e01f(0x144)]('store-item-select')[_0x34e01f(0x348)],_0xa9648b=document['getElementById']('award-reason')['value']['trim']();if(!_0x343d87||!_0x3eeb6b){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x34e01f(0x1a3));return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')['reset']();}catch(_0x333026){console['error']('Error\x20awarding\x20item:',_0x333026),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x333026[_0x34e01f(0x2e9)],'error');}}async function loadUserPointsHistory(_0x417f5c){const _0x14ce2c=a2_0x27a326;try{const _0x34fa5e=collection(db,'pointsHistory'),_0x415c09=query(_0x34fa5e,where(_0x14ce2c(0x12d),'==',_0x417f5c),orderBy('timestamp','desc')),_0x204851=await getDocs(_0x415c09);console['log']('Found\x20'+_0x204851['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x417f5c),showNotification('User\x20has\x20'+_0x204851['size']+'\x20points\x20history\x20entries','info');}catch(_0x3ed843){console['error'](_0x14ce2c(0x30d),_0x3ed843),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x10b2a0=a2_0x27a326;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x3ac6e9=collection(db,_0x10b2a0(0x2ec)),_0x237416=await getDocs(_0x3ac6e9);if(_0x237416['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x53afaa=0x0,_0x6d290e=0x0;const _0x4713e1=writeBatch(db);let _0x202793=0x0;return console[_0x10b2a0(0x1ac)]('Found\x20'+_0x237416['size']+'\x20users\x20to\x20check...'),_0x237416['forEach'](_0x531a0f=>{const _0x3e36be=_0x10b2a0,_0x3f0a63=_0x531a0f['data']();_0x3f0a63[_0x3e36be(0x2cf)]===undefined||_0x3f0a63[_0x3e36be(0x2cf)]===null?(_0x4713e1['update'](_0x531a0f['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x53afaa++,_0x202793++,console[_0x3e36be(0x1ac)](_0x3e36be(0x22a)+(_0x3f0a63[_0x3e36be(0x201)]||_0x3f0a63[_0x3e36be(0x256)]||_0x3f0a63['email']||_0x3e36be(0x18a))+_0x3e36be(0x321))):(_0x6d290e++,console['log']((_0x3f0a63['displayName']||_0x3f0a63[_0x3e36be(0x256)]||_0x3f0a63['email']||_0x3e36be(0x18a))+'\x20already\x20has\x20points:\x20'+_0x3f0a63['points'])),_0x202793>=0x1f4&&console['warn'](_0x3e36be(0x282));}),_0x53afaa>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x53afaa+_0x10b2a0(0x371)),await _0x4713e1['commit'](),console[_0x10b2a0(0x1ac)]('âœ…\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x53afaa+_0x10b2a0(0x255))):console['log'](_0x10b2a0(0x188)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x237416[_0x10b2a0(0x2ac)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x53afaa+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x6d290e),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x53afaa+'\x20users.\x20'+_0x6d290e+_0x10b2a0(0x333),'success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x237416['size'],'usersUpdated':_0x53afaa,'usersAlreadyHadPoints':_0x6d290e};}catch(_0xfb0504){console['error']('Error\x20initializing\x20points\x20field:',_0xfb0504),showNotification('Error\x20initializing\x20points:\x20'+_0xfb0504['message'],'error');throw _0xfb0504;}}function addPointsMigrationButton(){const _0x56dd66=a2_0x27a326,_0x274ab9=document['getElementById']('manage-points');if(!_0x274ab9)return;if(document['getElementById']('migrate-points-btn'))return;const _0x25c54c=document[_0x56dd66(0x30c)](_0x56dd66(0x2bb));_0x25c54c['className']=_0x56dd66(0x16a),_0x25c54c['style']['marginBottom']=_0x56dd66(0x123),_0x25c54c[_0x56dd66(0x21a)]['padding']='15px',_0x25c54c['style']['backgroundColor']=_0x56dd66(0x146),_0x25c54c['style'][_0x56dd66(0x283)]='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x25c54c[_0x56dd66(0x21a)]['borderRadius']='5px',_0x25c54c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x32ea1a=_0x274ab9['querySelector']('.section-header');_0x32ea1a&&_0x32ea1a[_0x56dd66(0x1af)](_0x56dd66(0x24d),_0x25c54c),document['getElementById']('migrate-points-btn')[_0x56dd66(0x2fa)]('click',async function(){const _0x522ca4=_0x56dd66;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x522ca4(0x1ee)]='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0xa7c4cd=_0x522ca4;_0x25c54c['style']['display']=_0xa7c4cd(0x1b7);},0xbb8);}catch(_0x573094){this['innerHTML']=_0x522ca4(0x219),this[_0x522ca4(0x317)]=![];}}});}function setupManagePointsSection(){const _0x1424e6=a2_0x27a326;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x27a029=document[_0x1424e6(0x144)](_0x1424e6(0x1e1));_0x27a029&&_0x27a029['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x4dae60=document['getElementById']('modify-points-form');_0x4dae60&&_0x4dae60['addEventListener'](_0x1424e6(0x2b6),handleModifyPoints);const _0x1cbca7=document['getElementById']('award-item-form');_0x1cbca7&&_0x1cbca7['addEventListener']('submit',handleAwardItem);const _0x41a10c=document['getElementById']('points-overview-search');_0x41a10c&&_0x41a10c['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x52c091=document['getElementById']('points-sort-order');_0x52c091&&_0x52c091['addEventListener']('change',sortPointsOverview);const _0x3fed9a=document[_0x1424e6(0x144)]('refresh-points-overview');_0x3fed9a&&_0x3fed9a['addEventListener'](_0x1424e6(0x356),loadPointsOverview);const _0x21dc75=document['getElementById']('bulk-award-points-btn');_0x21dc75&&_0x21dc75['addEventListener'](_0x1424e6(0x356),async()=>{const _0x3312fb=_0x1424e6;confirm(_0x3312fb(0x26b))&&(_0x21dc75[_0x3312fb(0x317)]=!![],_0x21dc75[_0x3312fb(0x1ee)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x3f72b2(),_0x21dc75['disabled']=![],_0x21dc75['innerHTML']=_0x3312fb(0x1a5));});const _0x6999d8=document[_0x1424e6(0x144)]('award-all-pilots-btn');_0x6999d8&&_0x6999d8['addEventListener']('click',awardPointsToAllPilots);async function _0x3f72b2(){const _0x35ba1e=_0x1424e6;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x5344e3={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'â‰¥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x2759a5=0x0,_0x537316=0x0,_0x1aba06=0x0,_0x47ba03=0x0,_0xe8d653=0x0,_0x158a62=0x0;const _0x492b86=new Set(),_0x22b1c2=collection(db,'pointsHistory'),_0x24449d=query(_0x22b1c2,where('reason','>=','Bulk\x20award:'),where('reason','<=','Bulk\x20award:ï£¿')),_0x4e00b7=await getDocs(_0x24449d);_0x4e00b7['forEach'](_0x5a6020=>{const _0x45daf9=a2_0x4eb2,_0x51e176=_0x5a6020[_0x45daf9(0x20a)](),_0x25cf8f=_0x51e176['reason']||'',_0x2a8208=_0x25cf8f['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x2a8208&&_0x2a8208[0x1]&&_0x492b86[_0x45daf9(0x340)](_0x2a8208[0x1]);}),console['log'](_0x35ba1e(0x349)+_0x492b86['size']+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x6218b5,_0x467ef0,_0x5dccf4]=await Promise['all']([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,_0x35ba1e(0x1ab))),getDocs(collection(db,'approvedMatchesD3'))]),_0x43aeba=_0x6218b5['size']+_0x467ef0['size']+_0x5dccf4['size'];showNotification('Found\x20'+_0x43aeba+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x3a4b0a=async(_0x4faec1,_0x13ed2c)=>{const _0x517bcd=_0x35ba1e;let _0x495103=writeBatch(db);const _0x1fcd08=[];let _0x3b9575=0x0;for(const _0x4470d9 of _0x4faec1[_0x517bcd(0x324)]){try{if(_0x492b86['has'](_0x4470d9['id'])){if(_0x13ed2c==='D1')_0x158a62++;if(_0x13ed2c==='D2')_0x158a62++;if(_0x13ed2c==='D3')_0x158a62++;continue;}const _0x59a4d8=_0x4470d9['data'](),_0x522c5d=_0x59a4d8['subgameType']||'Standard',_0x3b1a6a=_0x5344e3[_0x522c5d]||0xa;let _0x18e89c=_0x59a4d8['winnerId'];if(!_0x18e89c&&_0x59a4d8['winnerUsername']){const [_0x45d75d,_0x14f237,_0x401cd5]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x59a4d8['winnerUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x59a4d8[_0x517bcd(0x195)]))),getDocs(query(collection(db,'playersD3'),where(_0x517bcd(0x256),'==',_0x59a4d8['winnerUsername'])))]);if(!_0x45d75d['empty'])_0x18e89c=_0x45d75d['docs'][0x0]['id'];else{if(!_0x14f237['empty'])_0x18e89c=_0x14f237['docs'][0x0]['id'];else{if(!_0x401cd5['empty'])_0x18e89c=_0x401cd5['docs'][0x0]['id'];}}}let _0x4a2639=_0x59a4d8['loserId'];if(!_0x4a2639&&_0x59a4d8['loserUsername']){const [_0x2e6161,_0x3b157d,_0x4690b3]=await Promise['all']([getDocs(query(collection(db,_0x517bcd(0x21c)),where('username','==',_0x59a4d8['loserUsername']))),getDocs(query(collection(db,_0x517bcd(0x336)),where('username','==',_0x59a4d8['loserUsername']))),getDocs(query(collection(db,_0x517bcd(0x19e)),where(_0x517bcd(0x256),'==',_0x59a4d8[_0x517bcd(0x307)])))]);if(!_0x2e6161['empty'])_0x4a2639=_0x2e6161['docs'][0x0]['id'];else{if(!_0x3b157d['empty'])_0x4a2639=_0x3b157d['docs'][0x0]['id'];else{if(!_0x4690b3['empty'])_0x4a2639=_0x4690b3[_0x517bcd(0x324)][0x0]['id'];}}}if(_0x18e89c&&_0x4a2639){const _0x3808cc=doc(db,_0x517bcd(0x2ec),_0x18e89c),_0x2f3389=doc(db,_0x517bcd(0x2ec),_0x4a2639),[_0x3e262c,_0x5eea58]=await Promise['all']([getDoc(_0x3808cc),getDoc(_0x2f3389)]);if(_0x3e262c['exists']()){const _0x3261a0=_0x3e262c['data'](),_0x1f8ca2=_0x3261a0[_0x517bcd(0x2cf)]||0x0;_0x495103['update'](_0x3808cc,{'points':_0x1f8ca2+_0x3b1a6a,'lastPointsModified':serverTimestamp()}),_0x1fcd08['push']({'userId':_0x18e89c,'userEmail':_0x3261a0['email']||_0x517bcd(0x117),'displayName':_0x3261a0['displayName']||_0x59a4d8['winnerUsername']||_0x517bcd(0x280),'action':_0x517bcd(0x340),'amount':_0x3b1a6a,'previousPoints':_0x1f8ca2,'newPoints':_0x1f8ca2+_0x3b1a6a,'reason':'Bulk\x20award:\x20'+_0x522c5d+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x4470d9['id']+_0x517bcd(0x2a9)+_0x13ed2c,'adminEmail':auth[_0x517bcd(0x331)]['email'],'timestamp':serverTimestamp()});}if(_0x5eea58['exists']()){const _0x4569c9=_0x5eea58['data'](),_0x2b3243=_0x4569c9['points']||0x0;_0x495103['update'](_0x2f3389,{'points':_0x2b3243+_0x3b1a6a,'lastPointsModified':serverTimestamp()}),_0x1fcd08['push']({'userId':_0x4a2639,'userEmail':_0x4569c9['email']||'unknown','displayName':_0x4569c9[_0x517bcd(0x201)]||_0x59a4d8['loserUsername']||'Unknown\x20User','action':'add','amount':_0x3b1a6a,'previousPoints':_0x2b3243,'newPoints':_0x2b3243+_0x3b1a6a,'reason':'Bulk\x20award:\x20'+_0x522c5d+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x4470d9['id']+_0x517bcd(0x2a9)+_0x13ed2c,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x47ba03+=_0x3b1a6a*0x2,_0x3b9575+=0x2,_0x492b86['add'](_0x4470d9['id']);if(_0x3b9575>=0x190){await _0x495103['commit']();for(const _0xb6e873 of _0x1fcd08){await addDoc(collection(db,_0x517bcd(0x231)),_0xb6e873);}_0x495103=writeBatch(db),_0x3b9575=0x0,_0x1fcd08['length']=0x0;}}}catch(_0x187bb0){console['error'](_0x517bcd(0x295)+_0x13ed2c+'\x20match\x20'+_0x4470d9['id']+':',_0x187bb0),_0xe8d653++;}}if(_0x3b9575>0x0){await _0x495103['commit']();for(const _0x217b8c of _0x1fcd08){await addDoc(collection(db,'pointsHistory'),_0x217b8c);}}return{'processed':_0x13ed2c==='D1'?_0x2759a5:_0x13ed2c==='D2'?_0x537316:_0x1aba06};};await _0x3a4b0a(_0x6218b5,'D1'),await _0x3a4b0a(_0x467ef0,'D2'),await _0x3a4b0a(_0x5dccf4,'D3'),showNotification('Completed!\x20Processed\x20'+_0x2759a5+'\x20D1\x20matches,\x20'+_0x537316+'\x20D2\x20matches,\x20'+_0x1aba06+_0x35ba1e(0x238)+(_0x35ba1e(0x217)+_0x47ba03+'\x20points.\x20Skipped\x20'+_0x158a62+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0xe8d653),_0x35ba1e(0x181)),document['getElementById'](_0x35ba1e(0x1fd))&&loadPointsOverview();}catch(_0x1982a6){console['error']('Error\x20in\x20bulk\x20award\x20points:',_0x1982a6),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x1982a6['message'],'error');}}const _0x1d5895=document['getElementById'](_0x1424e6(0x1df));if(_0x1d5895){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x85cf62=_0x1d5895[_0x1424e6(0x125)](_0x1424e6(0x13f));_0x85cf62?_0x85cf62['addEventListener']('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x2e039e=document[_0x1424e6(0x144)]('cancel-quick-edit');_0x2e039e?_0x2e039e['addEventListener']('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x31d6e7=document['getElementById'](_0x1424e6(0x1be));_0x31d6e7?_0x31d6e7[_0x1424e6(0x2fa)](_0x1424e6(0x2b6),function(_0x44563e){const _0x4dd2e5=_0x1424e6;console[_0x4dd2e5(0x1ac)](_0x4dd2e5(0x264)),handleQuickEditPoints(_0x44563e);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x1d5895['addEventListener']('click',function(_0x5f0e09){_0x5f0e09['target']===_0x1d5895&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x292226=a2_0x27a326;try{const _0x154227=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x154227||isNaN(_0x154227)){showNotification('Invalid\x20points\x20amount','error');return;}if(!confirm('This\x20will\x20award\x20'+_0x154227+_0x292226(0x1e8)))return;showNotification(_0x292226(0x1de),'info');const [_0x45672,_0x2dfb13,_0x48fee9]=await Promise[_0x292226(0x143)]([getDocs(collection(db,'players')),getDocs(collection(db,_0x292226(0x336))),getDocs(collection(db,'playersD3'))]);console['log'](_0x292226(0x349)+_0x45672[_0x292226(0x2ac)]+'\x20D1\x20pilots,\x20'+_0x2dfb13['size']+'\x20D2\x20pilots,\x20'+_0x48fee9['size']+_0x292226(0x240));const _0x3c16ce=_0x45672['size']+_0x2dfb13['size']+_0x48fee9[_0x292226(0x2ac)],_0x5c6f32=new Map();_0x45672[_0x292226(0x2b0)](_0x1c71e5=>{const _0x3d72d4=_0x292226,_0x18000a=_0x1c71e5[_0x3d72d4(0x20a)]();_0x5c6f32['set'](_0x1c71e5['id'],{'username':_0x18000a['username'],'ladder':'D1'});}),_0x2dfb13['forEach'](_0x5360f4=>{const _0x32d49b=_0x5360f4['data']();_0x5c6f32['set'](_0x5360f4['id'],{'username':_0x32d49b['username'],'ladder':'D2'});}),_0x48fee9['forEach'](_0x29fd1c=>{const _0x5d7452=_0x292226,_0x58fe2e=_0x29fd1c['data']();_0x5c6f32['set'](_0x29fd1c['id'],{'username':_0x58fe2e[_0x5d7452(0x256)],'ladder':'D3'});}),console['log']('Found\x20'+_0x5c6f32[_0x292226(0x2ac)]+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x15e235=0x0,_0xdc12f9=0x0,_0x483bfc=0x0;const _0x2a8154=Array['from'](_0x5c6f32[_0x292226(0x183)]()),_0x2c7095=0x190;for(let _0x55b9d7=0x0;_0x55b9d7<_0x2a8154['length'];_0x55b9d7+=_0x2c7095){const _0x36d0ea=writeBatch(db),_0x15f92d=[],_0x5f2414=_0x2a8154['slice'](_0x55b9d7,_0x55b9d7+_0x2c7095),_0x42af11=await Promise[_0x292226(0x143)](_0x5f2414['map'](_0x423e15=>getDoc(doc(db,_0x292226(0x2ec),_0x423e15))));for(let _0x105b87=0x0;_0x105b87<_0x5f2414['length'];_0x105b87++){try{const _0x361f70=_0x5f2414[_0x105b87],_0xd6058b=_0x5c6f32['get'](_0x361f70),_0x44452c=_0x42af11[_0x105b87];if(_0x44452c[_0x292226(0x304)]()){const _0x53088f=_0x44452c[_0x292226(0x20a)](),_0x5dff4d=_0x53088f['points']||0x0,_0x33587d=_0x5dff4d+_0x154227;_0x36d0ea['update'](doc(db,'userProfiles',_0x361f70),{'points':_0x33587d,'lastPointsModified':serverTimestamp()}),_0x15f92d['push']({'userId':_0x361f70,'userEmail':_0x53088f['email']||'unknown','displayName':_0x53088f[_0x292226(0x201)]||_0xd6058b['username']||'Unknown\x20User','action':_0x292226(0x340),'amount':_0x154227,'previousPoints':_0x5dff4d,'newPoints':_0x33587d,'reason':_0x292226(0x23a)+_0xd6058b['ladder']+')','adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()}),_0xdc12f9+=_0x154227,_0x15e235++;}else _0x483bfc++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0xd6058b[_0x292226(0x256)]+'\x20('+_0x361f70+')');}catch(_0x47a210){_0x483bfc++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.[_0x292226(0x256)]+':',_0x47a210);}}await _0x36d0ea[_0x292226(0x210)]();for(const _0x7949c7 of _0x15f92d){await addDoc(collection(db,'pointsHistory'),_0x7949c7);}showNotification('Processed\x20'+_0x15e235+'/'+_0x3c16ce+'\x20pilots...','info');}showNotification('Complete!\x20Awarded\x20'+_0xdc12f9+'\x20points\x20to\x20'+_0x15e235+'\x20pilots.\x20Errors:\x20'+_0x483bfc,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0xbf0533){console[_0x292226(0x1a3)]('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0xbf0533),showNotification('Error:\x20'+_0xbf0533['message'],'error');}}function setupManageRibbonsSection(){const _0x4a9127=a2_0x27a326;console[_0x4a9127(0x1ac)](_0x4a9127(0x27e));const _0x1e2824=document['getElementById']('ribbon-user-search');_0x1e2824&&_0x1e2824['addEventListener'](_0x4a9127(0x193),debounce(searchRibbonUser,0x12c));const _0x5750a9=document['getElementById']('search-ribbon-user-btn');_0x5750a9&&_0x5750a9['addEventListener']('click',searchRibbonUser);const _0x549d03=document['getElementById']('add-ribbon-form');_0x549d03&&_0x549d03[_0x4a9127(0x2fa)]('submit',addRibbon),_0x1e2824&&_0x1e2824['addEventListener']('keypress',function(_0x5a9020){const _0x3ba240=_0x4a9127;_0x5a9020['key']==='Enter'&&(_0x5a9020[_0x3ba240(0x2a0)](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x5acdc5,_0x2a717d,_0x6eeb79,_0x3d673e=''){const _0x4aa233=a2_0x27a326,_0x82d1a8=doc(db,'userProfiles',_0x5acdc5),_0x24467d=await getDoc(_0x82d1a8);if(!_0x24467d['exists']())throw new Error(_0x4aa233(0x33f));const _0x38e621=_0x24467d[_0x4aa233(0x20a)](),_0x5f4db0=_0x38e621[_0x4aa233(0x2cf)]!==undefined?_0x38e621[_0x4aa233(0x2cf)]:0x0;_0x38e621['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x38e621[_0x4aa233(0x201)]||_0x38e621['email']||'Unknown')),await updateDoc(_0x82d1a8,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x12695b=_0x5f4db0;switch(_0x2a717d){case'add':_0x12695b=_0x5f4db0+_0x6eeb79;break;case'subtract':_0x12695b=Math['max'](0x0,_0x5f4db0-_0x6eeb79);break;case _0x4aa233(0x284):_0x12695b=_0x6eeb79;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x82d1a8,{'points':_0x12695b,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x5acdc5,'userEmail':_0x38e621['email']||'unknown','displayName':_0x38e621['displayName']||_0x38e621['username']||'Unknown\x20User','action':_0x2a717d,'amount':_0x6eeb79,'previousPoints':_0x5f4db0,'newPoints':_0x12695b,'reason':_0x3d673e,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x5a9a23=a2_0x27a326,_0x33763d=document['getElementById']('points-overview-table-body');if(!_0x33763d)return;_0x33763d['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x51c216=collection(db,_0x5a9a23(0x2ec)),_0x54ec2f=await getDocs(_0x51c216);if(_0x54ec2f[_0x5a9a23(0x31c)]){_0x33763d['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x1150d1=[];let _0x28fc3f=0x0;_0x54ec2f['forEach'](_0x405704=>{const _0x46995b=_0x405704['data'](),_0x4dcba3=_0x46995b['points']!==undefined?_0x46995b['points']:0x0;_0x46995b['points']===undefined&&_0x28fc3f++,_0x1150d1['push']({'id':_0x405704['id'],..._0x46995b,'points':_0x4dcba3});}),_0x28fc3f>0x0&&(console['log']('Found\x20'+_0x28fc3f+_0x5a9a23(0x1a4)),showNotification(_0x28fc3f+_0x5a9a23(0x2f7),'info')),_0x1150d1[_0x5a9a23(0x30f)]((_0x547ade,_0x269378)=>(_0x269378['points']||0x0)-(_0x547ade['points']||0x0)),window[_0x5a9a23(0x2c9)]=_0x1150d1,renderPointsOverview(_0x1150d1);}catch(_0x5ea459){console['error']('Error\x20loading\x20points\x20overview:',_0x5ea459),_0x33763d[_0x5a9a23(0x1ee)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x5ea459['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x42491b=a2_0x27a326,_0x2bf9c9=document['getElementById']('ribbons-overview-table-body');if(!_0x2bf9c9)return;_0x2bf9c9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x3be9c1,_0x2f72b4,_0x320f3f]=await Promise['all']([getDocs(collection(db,_0x42491b(0x1f0))),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x2bf9c9['innerHTML']='';const _0x333975=(_0x47f883,_0x309a7f)=>{_0x47f883['forEach'](_0x5f0bbe=>{const _0x5b2ce4=a2_0x4eb2,_0x34e81d=_0x5f0bbe['data'](),_0x41fe7a=_0x34e81d['ribbons']||{},_0xffa8a6=Object[_0x5b2ce4(0x183)](_0x41fe7a)['length'],_0x20142c=document['createElement']('tr');_0x20142c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x34e81d['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x309a7f['toLowerCase']()+'\x22>'+_0x309a7f+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xffa8a6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x34e81d[_0x5b2ce4(0x311)]?new Date(_0x34e81d['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x34e81d['username']+'\x22\x20data-ladder=\x22'+_0x309a7f+_0x5b2ce4(0x248),_0x2bf9c9['appendChild'](_0x20142c);});};_0x333975(_0x3be9c1,'D1'),_0x333975(_0x2f72b4,'D2'),_0x333975(_0x320f3f,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x5656c9=>{_0x5656c9['addEventListener']('click',function(){const _0x23656d=a2_0x4eb2,_0x401577=this['dataset']['username'],_0x142712=this[_0x23656d(0x29f)]['ladder'];editUserRibbons(_0x401577,_0x142712);});}),showNotification(_0x42491b(0x28c),'success');}catch(_0x1990d0){console['error'](_0x42491b(0x180),_0x1990d0),_0x2bf9c9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x308f7b=a2_0x27a326,_0x1fe7f5=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x1fe7f5){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x25d689,_0x4c3080,_0x307c1d]=await Promise['all']([getDoc(doc(db,_0x308f7b(0x1f0),_0x1fe7f5)),getDoc(doc(db,'playerRibbonsD2',_0x1fe7f5)),getDoc(doc(db,_0x308f7b(0x33c),_0x1fe7f5))]);let _0xdf444e=null,_0x181f2a=null;if(_0x25d689['exists']())_0xdf444e='D1',_0x181f2a=_0x25d689['data']();else{if(_0x4c3080['exists']())_0xdf444e='D2',_0x181f2a=_0x4c3080['data']();else _0x307c1d[_0x308f7b(0x304)]()&&(_0xdf444e='D3',_0x181f2a=_0x307c1d['data']());}_0xdf444e?(document['getElementById'](_0x308f7b(0x185))[_0x308f7b(0x32d)]=_0x1fe7f5,document['getElementById']('ribbon-target-user')[_0x308f7b(0x348)]=_0x1fe7f5,document['getElementById']('ribbon-target-ladder')[_0x308f7b(0x348)]=_0xdf444e,document['getElementById']('user-ribbon-management')[_0x308f7b(0x21a)]['display']='block',displayCurrentRibbons(_0x181f2a['ribbons']||{}),showNotification('Found\x20'+_0x1fe7f5+_0x308f7b(0x34c)+_0xdf444e+'\x20ladder','success')):showNotification(_0x308f7b(0x149)+_0x1fe7f5+'\x20not\x20found\x20in\x20any\x20ladder',_0x308f7b(0x1a3));}catch(_0x3cea97){console['error']('Error\x20searching\x20user:',_0x3cea97),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0xdbee42){const _0x4d48e0=a2_0x27a326,_0xd0e65=document['getElementById']('current-ribbons-list');if(!_0xd0e65)return;_0xd0e65['innerHTML']='';if(Object['keys'](_0xdbee42)[_0x4d48e0(0x2f0)]===0x0){_0xd0e65['innerHTML']=_0x4d48e0(0x310);return;}Object[_0x4d48e0(0x21b)](_0xdbee42)[_0x4d48e0(0x2b0)](([_0xc72b23,_0x115e43])=>{const _0x3bb0cc=_0x4d48e0,_0x315ccb=document['createElement']('div');_0x315ccb['className']='ribbon-item',_0x315ccb[_0x3bb0cc(0x1ee)]=_0x3bb0cc(0x16b)+_0xc72b23+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x115e43['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x115e43['awardedAt']?new Date(_0x115e43[_0x3bb0cc(0x18b)]['seconds']*0x3e8)['toLocaleDateString']():_0x3bb0cc(0x18a))+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0xc72b23+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xd0e65['appendChild'](_0x315ccb);}),document['querySelectorAll']('.remove-ribbon-btn')[_0x4d48e0(0x2b0)](_0x15c877=>{const _0x640165=_0x4d48e0;_0x15c877[_0x640165(0x2fa)]('click',function(){const _0x35151a=_0x640165,_0x1a208f=this['dataset'][_0x35151a(0x1fa)];removeRibbon(_0x1a208f);});});}async function addRibbon(_0x59491f){const _0x4a2f4a=a2_0x27a326;_0x59491f[_0x4a2f4a(0x2a0)]();const _0x4fdf1c=document[_0x4a2f4a(0x144)]('ribbon-target-user')['value'],_0x141db3=document[_0x4a2f4a(0x144)]('ribbon-target-ladder')['value'],_0x52b20d=document['getElementById']('ribbon-type-select')['value'],_0x42e44e=parseInt(document[_0x4a2f4a(0x144)](_0x4a2f4a(0x152))[_0x4a2f4a(0x348)]);if(!_0x4fdf1c||!_0x141db3||!_0x52b20d||!_0x42e44e){showNotification('Please\x20fill\x20all\x20fields',_0x4a2f4a(0x1a3));return;}try{const _0x240395=_0x4a2f4a(0x1f0)+(_0x141db3==='D1'?'':_0x141db3),_0x1aedd1=doc(db,_0x240395,_0x4fdf1c),_0x3409b7=await getDoc(_0x1aedd1),_0x275363=_0x3409b7['exists']()?_0x3409b7['data']()['ribbons']||{}:{};_0x275363[_0x52b20d]={'level':_0x42e44e,'awardedAt':serverTimestamp()},await setDoc(_0x1aedd1,{'username':_0x4fdf1c,'ladder':_0x141db3,'ribbons':_0x275363,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x4a2f4a(0x216)+_0x52b20d+'\x20Level\x20'+_0x42e44e+'\x20to\x20'+_0x4fdf1c,'success'),displayCurrentRibbons(_0x275363),document['getElementById'](_0x4a2f4a(0x151))['value']='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x4ec7ef){console['error'](_0x4a2f4a(0x1e6),_0x4ec7ef),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x240dee){const _0x191bdf=a2_0x27a326,_0x38e82a=document['getElementById']('ribbon-target-user')['value'],_0x101027=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x240dee+_0x191bdf(0x1d3)+_0x38e82a+'?'))return;try{const _0x4fdccf='playerRibbons'+(_0x101027==='D1'?'':_0x101027),_0x30f8cc=doc(db,_0x4fdccf,_0x38e82a),_0x419748=await getDoc(_0x30f8cc),_0x6f0586=_0x419748['exists']()?_0x419748['data']()['ribbons']||{}:{};delete _0x6f0586[_0x240dee],await setDoc(_0x30f8cc,{'username':_0x38e82a,'ladder':_0x101027,'ribbons':_0x6f0586,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x240dee+'\x20from\x20'+_0x38e82a,_0x191bdf(0x181)),displayCurrentRibbons(_0x6f0586);}catch(_0x3bb80d){console['error']('Error\x20removing\x20ribbon:',_0x3bb80d),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x4cfc9e,_0x39bff6){document['getElementById']('ribbon-user-search')['value']=_0x4cfc9e,searchRibbonUser();}