const a48_0x30d304=a48_0x1e14,a48_0x54d413=(function(){let _0x9c3219=!![];return function(_0x263a13,_0x34f3b1){const _0x1d6bfe=_0x9c3219?function(){if(_0x34f3b1){const _0xacf1d3=_0x34f3b1['apply'](_0x263a13,arguments);return _0x34f3b1=null,_0xacf1d3;}}:function(){};return _0x9c3219=![],_0x1d6bfe;};}()),a48_0x3917f7=a48_0x54d413(this,function(){const _0x14f363=a48_0x1e14,_0x16cb9e=function(){const _0x3fbfc4=a48_0x1e14;let _0x36c288;try{_0x36c288=Function('return\x20(function()\x20'+_0x3fbfc4(0x190)+');')();}catch(_0x1c1135){_0x36c288=window;}return _0x36c288;},_0x43db75=_0x16cb9e(),_0x54848d=_0x43db75['console']=_0x43db75['console']||{},_0xac1904=['log','warn',_0x14f363(0x16a),'error',_0x14f363(0x193),'table','trace'];for(let _0xac8eac=0x0;_0xac8eac<_0xac1904['length'];_0xac8eac++){const _0xd1f11e=a48_0x54d413['constructor']['prototype']['bind'](a48_0x54d413),_0x245c69=_0xac1904[_0xac8eac],_0x52e5b3=_0x54848d[_0x245c69]||_0xd1f11e;_0xd1f11e[_0x14f363(0x16d)]=a48_0x54d413['bind'](a48_0x54d413),_0xd1f11e['toString']=_0x52e5b3['toString']['bind'](_0x52e5b3),_0x54848d[_0x245c69]=_0xd1f11e;}});function a48_0x1e14(_0x251555,_0x1a6a5c){const _0x3917f7=a48_0x1904();return a48_0x1e14=function(_0x54d413,_0x5572de){_0x54d413=_0x54d413-0x166;let _0x1904d3=_0x3917f7[_0x54d413];return _0x1904d3;},a48_0x1e14(_0x251555,_0x1a6a5c);}a48_0x3917f7();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':'Gold','description':'Only\x20the\x20best\x20get\x20this\x20one'},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':'You\x20can\x20see\x20better!'},'ocean':{'price':0x12c,'name':a48_0x30d304(0x19e),'description':a48_0x30d304(0x175)},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x42c0aa=a48_0x30d304;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document['getElementById'](_0x42c0aa(0x19b)),pointsDisplay=document['getElementById']('user-points'),authWarning=document[_0x42c0aa(0x17e)]('auth-warning'),initAuthListener(),buildStoreUI();});function a48_0x1904(){const _0x1d78f2=['remove','[data-theme]','disabled','points','info','querySelectorAll','closest','__proto__','User','You\x20need\x20','Theme\x20','sign-in-paid','isAdmin','name','style','This\x20one\x20is\x20really\x20pretty','You\x20already\x20own\x20the\x20','\x20items','isUserAdmin','innerHTML','textContent','Purchase\x20failed:','Need\x20','none','getElementById','\x20not\x20found','displayName','currentUser','description','block','inventory','Purchase\x20failed.\x20Please\x20try\x20again.','uid','.theme-select-btn','cursor','‚úÖ\x20Purchased\x20','store-message','\x20points\x20to\x20purchase\x20this\x20theme','log','Apply\x20Theme','Sign\x20in\x20to\x20Apply','getCurrentTheme','{}.constructor(\x22return\x20this\x22)(\x20)','classList','price','exception','\x20Points','className','div','\x20points','exists','Error\x20loading\x20user\x20data:','opacity','store-content','\x20Theme','add','Blue','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-','default','dataset','error','toLocaleString'];a48_0x1904=function(){return _0x1d78f2;};return a48_0x1904();}function initAuthListener(){onAuthStateChanged(auth,async _0x1f4d3f=>{const _0x53d18f=a48_0x1e14;if(_0x1f4d3f){console['log']('‚úÖ\x20User\x20authenticated:',_0x1f4d3f[_0x53d18f(0x180)]||_0x1f4d3f['email']);if(authWarning)authWarning[_0x53d18f(0x174)]['display']=_0x53d18f(0x17d);if(storeContainer)storeContainer['style']['display']='block';await loadUserData(_0x1f4d3f),updateThemeButtons();}else{console[_0x53d18f(0x18c)]('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style']['display']=_0x53d18f(0x183);if(storeContainer)storeContainer['style']['display']=_0x53d18f(0x17d);userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x26516b){const _0x4faa22=a48_0x30d304;try{const _0x3ab5a0=doc(db,'userProfiles',_0x26516b['uid']),_0x5c2119=await getDoc(_0x3ab5a0);if(_0x5c2119['exists']()){const _0x114b38=_0x5c2119['data']();userData={'points':_0x114b38[_0x4faa22(0x169)]||0x0,'inventory':_0x114b38['inventory']||[],'isAdmin':_0x114b38['isAdmin']||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x4faa22(0x1a3)]()),window[_0x4faa22(0x178)]=userData[_0x4faa22(0x172)],userData['isAdmin']&&(console[_0x4faa22(0x18c)]('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console[_0x4faa22(0x18c)]('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+',\x20Inventory:\x20'+userData[_0x4faa22(0x184)]['length']+_0x4faa22(0x177));}else await setDoc(_0x3ab5a0,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x26516b[_0x4faa22(0x180)]||_0x26516b['email']?.['split']('@')[0x0]||_0x4faa22(0x16e)}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay[_0x4faa22(0x17a)]='0'),window[_0x4faa22(0x178)]=![],console[_0x4faa22(0x18c)]('New\x20user\x20profile\x20created');}catch(_0x288c26){console['error'](_0x4faa22(0x199),_0x288c26);}}function userOwnsTheme(_0x485f1a){if(THEMES[_0x485f1a]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x485f1a);}async function purchaseTheme(_0x481dd7){const _0xb8e829=a48_0x30d304,_0x2a212d=auth['currentUser'];if(!_0x2a212d)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes',_0xb8e829(0x1a2)),![];const _0x5406fa=THEMES[_0x481dd7];if(!_0x5406fa)return console[_0xb8e829(0x1a2)](_0xb8e829(0x170)+_0x481dd7+'\x20not\x20found'),![];if(userData['points']<_0x5406fa['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x5406fa[_0xb8e829(0x192)]-userData[_0xb8e829(0x169)])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x481dd7))return showMessage(_0xb8e829(0x176)+_0x5406fa[_0xb8e829(0x173)]+'\x20theme',_0xb8e829(0x16a)),![];try{const _0x1e6b08=doc(db,'userProfiles',_0x2a212d[_0xb8e829(0x186)]),_0x5f165a=await getDoc(_0x1e6b08);if(!_0x5f165a[_0xb8e829(0x198)]())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x455007=_0x5f165a['data'](),_0x5651a8=_0x455007['points']||0x0,_0x3a8376=_0x455007['inventory']||[];if(_0x5651a8<_0x5406fa['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x3a8376['includes']('theme_'+_0x481dd7))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0x5598ba=_0x5651a8-_0x5406fa['price'],_0x4aa01e=[..._0x3a8376,'theme_'+_0x481dd7];return await updateDoc(_0x1e6b08,{'points':_0x5598ba,'inventory':_0x4aa01e,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,'transactions'),{'userId':_0x2a212d['uid'],'userEmail':_0x2a212d['email'],'itemId':'theme_'+_0x481dd7,'itemTitle':_0x5406fa['name']+_0xb8e829(0x19c),'price':_0x5406fa['price'],'type':'purchase','category':'theme','timestamp':serverTimestamp()}),userData['points']=_0x5598ba,userData['inventory']=_0x4aa01e,pointsDisplay&&(pointsDisplay['textContent']=userData[_0xb8e829(0x169)]['toLocaleString']()),console[_0xb8e829(0x18c)](_0xb8e829(0x189)+_0x5406fa['name']+'\x20theme\x20for\x20'+_0x5406fa['price']+_0xb8e829(0x197)),!![];}catch(_0x10ffb4){return console[_0xb8e829(0x1a2)](_0xb8e829(0x17b),_0x10ffb4),showMessage(_0xb8e829(0x185),_0xb8e829(0x1a2)),![];}}function applyTheme(_0x3cd632){const _0x25965c=a48_0x30d304;if(!userOwnsTheme(_0x3cd632))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window['ThemeSystem']?(window['ThemeSystem']['switchTheme'](_0x3cd632),showMessage((THEMES[_0x3cd632]?.[_0x25965c(0x173)]||_0x3cd632)+'\x20theme\x20applied!','success'),!![]):(console[_0x25965c(0x1a2)]('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0x56542c=a48_0x30d304,_0x348659=document['querySelector']('.themes-grid');if(!_0x348659){console['error']('Themes\x20container\x20not\x20found');return;}_0x348659[_0x56542c(0x179)]='',Object['entries'](THEMES)['forEach'](([_0x47dde1,_0x13e229])=>{const _0x1cbefb=_0x56542c,_0x172ac7=document['createElement'](_0x1cbefb(0x196));_0x172ac7['className']='store-item',_0x172ac7['dataset']['theme']=_0x47dde1,_0x172ac7['dataset']['itemId']='theme_'+_0x47dde1,_0x172ac7[_0x1cbefb(0x1a1)][_0x1cbefb(0x192)]=_0x13e229['price'],_0x172ac7['innerHTML']=_0x1cbefb(0x19f)+_0x47dde1+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x13e229['price']===0x0?'FREE':_0x13e229['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x13e229['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x13e229[_0x1cbefb(0x182)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x348659['appendChild'](_0x172ac7);}),setupThemeButtons();}function setupThemeButtons(){const _0x15856c=a48_0x30d304,_0x5f2be5=document['querySelectorAll'](_0x15856c(0x187));_0x5f2be5['forEach'](_0x424448=>{_0x424448['addEventListener']('click',async _0x431e16=>{const _0x7d3c9b=a48_0x1e14;_0x431e16['preventDefault']();const _0x31e9d5=auth['currentUser'];if(!_0x31e9d5){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x44cb8a=_0x424448[_0x7d3c9b(0x16c)](_0x7d3c9b(0x167)),_0x529629=_0x44cb8a['dataset']['theme'],_0x2d4dba=THEMES[_0x529629];if(!_0x2d4dba){console['error'](_0x7d3c9b(0x170)+_0x529629+_0x7d3c9b(0x17f));return;}console['log']('Theme\x20clicked:\x20'+_0x2d4dba[_0x7d3c9b(0x173)]+'\x20('+_0x529629+')');if(_0x424448[_0x7d3c9b(0x168)]){_0x2d4dba['price']>0x0&&showMessage(_0x7d3c9b(0x16f)+_0x2d4dba['price']+_0x7d3c9b(0x18b),'error');return;}if(_0x424448['textContent']==='Current\x20Theme'){showMessage(_0x2d4dba['name']+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x424448['textContent']===_0x7d3c9b(0x18d)){applyTheme(_0x529629),updateThemeButtons();return;}if(_0x424448['textContent']['includes']('Buy')){const _0x497a4d=window['confirm']('Purchase\x20'+_0x2d4dba['name']+'\x20theme\x20for\x20'+_0x2d4dba[_0x7d3c9b(0x192)]+'\x20points?');if(!_0x497a4d)return;const _0x4d325a=await purchaseTheme(_0x529629);_0x4d325a&&(showMessage(_0x2d4dba['name']+'\x20theme\x20purchased!','success'),applyTheme(_0x529629),updateThemeButtons());return;}userOwnsTheme(_0x529629)?applyTheme(_0x529629):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x17453a=a48_0x30d304,_0x34f3a4=window['ThemeSystem']?window['ThemeSystem'][_0x17453a(0x18f)]():'default',_0x1c2384=auth[_0x17453a(0x181)];document[_0x17453a(0x16b)]('.theme-select-btn')['forEach'](_0x190e63=>{const _0x4246fb=_0x17453a,_0x1eec0=_0x190e63[_0x4246fb(0x16c)]('[data-theme]'),_0x3e24e8=_0x1eec0['dataset']['theme'],_0x20c2e3=THEMES[_0x3e24e8];if(!_0x20c2e3)return;_0x190e63[_0x4246fb(0x168)]=![],_0x190e63['style']['opacity']='',_0x190e63[_0x4246fb(0x174)][_0x4246fb(0x188)]='pointer',_0x190e63['classList'][_0x4246fb(0x166)]('current-theme','apply-theme','can-afford','cannot-afford','sign-in-free',_0x4246fb(0x171));if(!_0x1c2384){_0x20c2e3['price']===0x0?(_0x190e63['textContent']=_0x4246fb(0x18e),_0x190e63['classList'][_0x4246fb(0x19d)]('sign-in-free')):(_0x190e63['textContent']='Sign\x20in\x20to\x20Purchase',_0x190e63['disabled']=!![],_0x190e63['style']['opacity']='0.7',_0x190e63[_0x4246fb(0x191)]['add'](_0x4246fb(0x171)));return;}if(_0x3e24e8===_0x34f3a4){_0x190e63['textContent']='Current\x20Theme',_0x190e63[_0x4246fb(0x191)]['add']('current-theme'),_0x190e63['disabled']=!![],_0x190e63['style']['cursor']=_0x4246fb(0x1a0);return;}if(userOwnsTheme(_0x3e24e8)){_0x190e63['textContent']=_0x4246fb(0x18d),_0x190e63['classList'][_0x4246fb(0x19d)]('apply-theme');return;}if(userData[_0x4246fb(0x169)]>=_0x20c2e3['price']){_0x190e63['textContent']='Buy\x20for\x20'+_0x20c2e3[_0x4246fb(0x192)]+_0x4246fb(0x194),_0x190e63['classList']['add']('can-afford');return;}_0x190e63['textContent']=_0x4246fb(0x17c)+_0x20c2e3['price']+_0x4246fb(0x194),_0x190e63['classList']['add']('cannot-afford'),_0x190e63[_0x4246fb(0x174)][_0x4246fb(0x19a)]='0.5',_0x190e63[_0x4246fb(0x168)]=!![],_0x190e63['style']['cursor']='not-allowed';});}function showMessage(_0x337ae9,_0x3faba0='info'){const _0x25d9ae=a48_0x30d304,_0x25c840=document['getElementById']('store-message');_0x25c840&&_0x25c840['remove']();const _0x3d58cc=document['createElement']('div');_0x3d58cc['id']=_0x25d9ae(0x18a),_0x3d58cc[_0x25d9ae(0x195)]='store-message\x20store-message-'+_0x3faba0,_0x3d58cc[_0x25d9ae(0x17a)]=_0x337ae9,document['body']['appendChild'](_0x3d58cc),requestAnimationFrame(()=>{_0x3d58cc['classList']['add']('visible');}),setTimeout(()=>{_0x3d58cc['classList']['remove']('visible'),setTimeout(()=>{_0x3d58cc['parentNode']&&_0x3d58cc['remove']();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console[a48_0x30d304(0x18c)]('üè™\x20Redeem\x20store\x20loaded');