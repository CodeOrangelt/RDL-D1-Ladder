const a25_0x2ccaad=a25_0xf095,a25_0x26b71f=(function(){let _0x1d6590=!![];return function(_0x19f338,_0x4eede4){const _0x48faf9=_0x1d6590?function(){if(_0x4eede4){const _0x37bf90=_0x4eede4['apply'](_0x19f338,arguments);return _0x4eede4=null,_0x37bf90;}}:function(){};return _0x1d6590=![],_0x48faf9;};}()),a25_0xfc3f41=a25_0x26b71f(this,function(){const _0x5b4f43=a25_0xf095;let _0x3ae097;try{const _0x416222=Function(_0x5b4f43(0x127)+_0x5b4f43(0xd6)+');');_0x3ae097=_0x416222();}catch(_0x12351b){_0x3ae097=window;}const _0x1366b4=_0x3ae097['console']=_0x3ae097['console']||{},_0x43c1b9=['log','warn','info','error','exception','table','trace'];for(let _0xdfd354=0x0;_0xdfd354<_0x43c1b9['length'];_0xdfd354++){const _0x285814=a25_0x26b71f['constructor']['prototype'][_0x5b4f43(0xd4)](a25_0x26b71f),_0x80c26e=_0x43c1b9[_0xdfd354],_0x4ce6ae=_0x1366b4[_0x80c26e]||_0x285814;_0x285814[_0x5b4f43(0xde)]=a25_0x26b71f['bind'](a25_0x26b71f),_0x285814['toString']=_0x4ce6ae['toString']['bind'](_0x4ce6ae),_0x1366b4[_0x80c26e]=_0x285814;}});a25_0xfc3f41();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a25_0x7d1b(){const _0x4a0a6e=['#CD7F32','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>','Active','timestamp','has','none','totalMatches','#FFD700','players','error','#F44336','style','loserScore',';\x22>','No\x20user\x20profile\x20found','d3-switch','#DC143C','querySelectorAll','abs','Gold','Error\x20fetching\x20ELO\x20history:','bind','now','{}.constructor(\x22return\x20this\x22)(\x20)','remove','push','empty','totalKills','losses','toLowerCase','duos','__proto__','winRate','You\x27re\x20not\x20registered\x20on\x20the\x20','matchesD','Recommendation\x20element\x20for\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','querySelector','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','addEventListener','wins','classList','innerText','elo-recommendation-text-duos','Silver','ðŸŽ¨\x20','.trend-indicator','inactive','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','Error\x20checking\x20admin\x20status:','elo','creative\x20lead','getElementById','tokenName','duos-ladder-container','cursor','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','innerHTML','active','parentNode','equipped','ELO\x20history\x20collection\x20is\x20empty','textContent','Error\x20loading\x20ladder\x20data:','owner','country','d1-switch','playersDuos','checked','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20finding\x20best\x20opponent:','\x20has\x20equipped:\x20','length','0.5','player','currentUser','No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!','change','<img\x20src=\x22../images/flags/','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20','add','DOMContentLoaded','Using\x20cached\x20D1\x20ladder\x20data','visible','D2\x20toggle\x20clicked','#ladder\x20tbody','appendChild','td:nth-child(3)','role',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','elo-recommendation-text-d3','createElement','display','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','title','includes','block','data','docs','kda','loading-indicator','log','return\x20(function()\x20','0.85em','#C0C0C0','eloRating','uid','playersD','get','d2-ladder-container','winnerScore','dispatchEvent','playerUsername','ladder-player','d2-switch','elo-recommendation-text-d2','previousElo','position','\x20displaying\x20token:\x20','username','map','#50C878','</span>.\x20Challenge\x20other\x20teams!','oldEloRating'];a25_0x7d1b=function(){return _0x4a0a6e;};return a25_0x7d1b();}import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x39afa6=0x1){const _0xe97075=a25_0xf095;try{document['getElementById'](_0xe97075(0x125))[_0xe97075(0xca)]['display']='block';const _0x206582=await getLadderData(_0x39afa6);_0x206582['sort']((_0x4edb37,_0x1706a2)=>_0x1706a2[_0xe97075(0xf2)]-_0x4edb37['elo']);const _0x1ade62=_0x206582[_0xe97075(0x139)](_0x43a16c=>_0x43a16c['id']),_0x2cdf27=await getEloHistoryBatch(_0x1ade62,_0x39afa6),_0x52cb6e=_0x206582['map']((_0x2744cd,_0x992787)=>{const _0xaae13f=_0xe97075,_0x36f99e=_0x2cdf27[_0x2744cd['id']]||[],_0x1f04c9=_0x36f99e['sort']((_0x45f4b7,_0x46ea49)=>new Date(_0x46ea49['date'])-new Date(_0x45f4b7['date']))['slice'](0x0,0x5);return{..._0x2744cd,'rank':_0x992787+0x1,'lastMatches':_0x1f04c9,'recentActivity':_0x1f04c9[_0xaae13f(0x109)]>0x0};});renderLadder(_0x52cb6e),setupRealTimeUpdates(_0x39afa6);}catch(_0x19d9fc){console[_0xe97075(0xc8)](_0xe97075(0xff),_0x19d9fc),document[_0xe97075(0xf4)]('error-message')[_0xe97075(0xea)]=_0xe97075(0xf0);}finally{document[_0xe97075(0xf4)]('loading-indicator')[_0xe97075(0xca)]['display']='none';}}function setupRealTimeUpdates(_0x462a78=0x1){const _0x495ab0=a25_0xf095;activeListeners[_0x495ab0(0x105)](_0x2152ba=>_0x2152ba()),activeListeners=[];const _0x13fba6=_0x462a78===0x1?'players':_0x495ab0(0x12c)+_0x462a78,_0x1f64dc=_0x462a78===0x1?'matches':_0x495ab0(0xe1)+_0x462a78,_0x3289d0=new Date();_0x3289d0['setDate'](_0x3289d0['getDate']()-0x1);const _0x2c9ee4=setupEfficientListener(_0x1f64dc,[where('date','>=',_0x3289d0['toISOString']()),limit(0xa),orderBy('date','desc')],async _0xb6b5d5=>{_0xb6b5d5['length']>0x0&&await loadLadderData(_0x462a78);});activeListeners['push'](_0x2c9ee4);}export function cleanupListeners(){const _0x238d89=a25_0xf095;activeListeners[_0x238d89(0x105)](_0x244188=>_0x244188()),activeListeners=[];}function renderLadder(_0x4bdcbb){const _0x473da3=a25_0xf095,_0x4374f9=document['getElementById']('ladder-container');_0x4374f9[_0x473da3(0xf9)]='',_0x4bdcbb['forEach'](_0x2af230=>{const _0x256d43=_0x473da3,_0x2baaf2=document[_0x256d43(0x11c)]('div');_0x2baaf2['className']=_0x256d43(0x132),_0x2baaf2[_0x256d43(0xf9)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x2af230['rank']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x2af230['username']||_0x2af230['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x2af230['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x2af230['recentActivity']?'active':_0x256d43(0xef))+_0x256d43(0xe6)+(_0x2af230['recentActivity']?_0x256d43(0xc1):'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x4374f9[_0x256d43(0x117)](_0x2baaf2);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x381c21=![]){const _0x21451d=a25_0xf095,_0x58c4ee=document[_0x21451d(0xe5)](_0x21451d(0x116));if(!_0x58c4ee){console[_0x21451d(0xc8)]('Ladder\x20table\x20body\x20not\x20found');return;}_0x58c4ee[_0x21451d(0xf9)]=_0x21451d(0xc0);try{const _0x245bd8=Date[_0x21451d(0xd5)]();if(!_0x381c21&&playerCache['data']&&_0x245bd8-playerCache[_0x21451d(0xc2)]<CACHE_DURATION){console['log'](_0x21451d(0x113)),updateLadderDisplay(playerCache['data']);return;}const _0x1dac16=collection(db,_0x21451d(0xc7)),_0xf2d68a=await getDocs(_0x1dac16),_0xa2d1a8=[];_0xf2d68a['forEach'](_0x2fc2c2=>{const _0x36051e=_0x21451d,_0x2fe981=_0x2fc2c2[_0x36051e(0x122)]();_0xa2d1a8['push']({..._0x2fe981,'id':_0x2fc2c2['id'],'elo':_0x2fe981[_0x36051e(0x12a)]||0x0,'position':_0x2fe981['position']||Number['MAX_SAFE_INTEGER']});});const _0x26b6bd=collection(db,'userProfiles'),_0x37d59e=await getDocs(_0x26b6bd),_0x42d62d=new Map();_0x37d59e['forEach'](_0x3035ba=>{const _0xc0f6ec=_0x21451d,_0x554171=_0x3035ba['data']();_0x554171['username']&&_0x42d62d['set'](_0x554171['username'][_0xc0f6ec(0xdc)](),_0x554171);}),_0xa2d1a8['forEach'](_0x495618=>{const _0x5a250e=_0x21451d,_0x325874=_0x495618['username']?.['toLowerCase']();if(_0x325874&&_0x42d62d[_0x5a250e(0xc3)](_0x325874)){const _0x58e8a6=_0x42d62d['get'](_0x325874);_0x58e8a6['country']&&(_0x495618[_0x5a250e(0x101)]=_0x58e8a6[_0x5a250e(0x101)][_0x5a250e(0xdc)]()),_0x495618['points']=_0x58e8a6['points']||0x0;}else _0x495618['points']=0x0;});const _0x54a744=_0xa2d1a8['map'](_0x50220d=>_0x50220d['username']),_0x117af9=await fetchBatchMatchStats(_0x54a744);_0xa2d1a8['sort']((_0xb3ce1,_0x4ee1e3)=>{const _0x2e11da=_0x21451d,_0x4303da=_0x117af9['get'](_0xb3ce1['username'])?.['totalMatches']||0x0,_0x4ad3c4=_0x117af9['get'](_0x4ee1e3['username'])?.[_0x2e11da(0xc5)]||0x0;if(_0x4303da===0x0!==(_0x4ad3c4===0x0))return _0x4303da===0x0?0x1:-0x1;return(_0xb3ce1['position']||0x3e7)-(_0x4ee1e3[_0x2e11da(0x136)]||0x3e7);}),_0xa2d1a8['forEach']((_0x414930,_0x3c1990)=>{_0x414930['position']=_0x3c1990+0x1;}),playerCache['data']=_0xa2d1a8,playerCache['timestamp']=_0x245bd8,updateLadderDisplay(_0xa2d1a8,_0x117af9);}catch(_0x3c9476){console['error']('Error\x20loading\x20ladder:',_0x3c9476),_0x58c4ee['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x3c9476['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x24c91a){const _0x520db5=a25_0xf095,_0x2df233=new Map();try{_0x24c91a['forEach'](_0x1719ed=>{_0x2df233['set'](_0x1719ed,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});});const _0x36f279=collection(db,'approvedMatches'),_0x4b7a8f=await getDocs(_0x36f279);_0x4b7a8f['forEach'](_0x119f61=>{const _0x2a5366=a25_0xf095,_0x229438=_0x119f61['data'](),_0x2c8c04=_0x229438['winnerUsername'],_0x561468=_0x229438['loserUsername'];if(_0x24c91a['includes'](_0x2c8c04)){const _0x4118ca=_0x2df233[_0x2a5366(0x12d)](_0x2c8c04);_0x4118ca['wins']++,_0x4118ca['totalMatches']++,_0x4118ca['totalKills']+=parseInt(_0x229438[_0x2a5366(0x12f)])||0x0,_0x4118ca['totalDeaths']+=parseInt(_0x229438['loserScore'])||0x0;}if(_0x24c91a['includes'](_0x561468)){const _0x4151bc=_0x2df233['get'](_0x561468);_0x4151bc[_0x2a5366(0xdb)]++,_0x4151bc['totalMatches']++,_0x4151bc[_0x2a5366(0xda)]+=parseInt(_0x229438[_0x2a5366(0xcb)])||0x0,_0x4151bc['totalDeaths']+=parseInt(_0x229438[_0x2a5366(0x12f)])||0x0;}}),_0x24c91a['forEach'](_0x268f71=>{const _0xba545d=a25_0xf095,_0x37b9d9=_0x2df233['get'](_0x268f71);_0x37b9d9[_0xba545d(0x124)]=_0x37b9d9['totalDeaths']>0x0?(_0x37b9d9['totalKills']/_0x37b9d9['totalDeaths'])['toFixed'](0x2):_0x37b9d9[_0xba545d(0xda)]['toFixed'](0x2),_0x37b9d9['winRate']=_0x37b9d9[_0xba545d(0xc5)]>0x0?(_0x37b9d9[_0xba545d(0xe8)]/_0x37b9d9['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x16a6b2){console[_0x520db5(0xc8)]('Error\x20fetching\x20batch\x20match\x20stats:',_0x16a6b2);}return _0x2df233;}function createPlayerRow(_0x29dcd2,_0x37592d){const _0x3dd4ee=a25_0xf095,_0x1934d3=parseFloat(_0x29dcd2['elo'])||0x0;let _0x54a884='#DC143C';if(_0x37592d[_0x3dd4ee(0xc5)]===0x0)_0x54a884='#DC143C';else{if(_0x37592d[_0x3dd4ee(0xdf)]>=0x50&&_0x37592d['totalMatches']>=0x14)_0x54a884=_0x3dd4ee(0x13a);else{if(_0x1934d3>=0x2bc)_0x54a884='#FFD700';else{if(_0x1934d3>=0x1f4)_0x54a884='#C0C0C0';else _0x1934d3>=0xc8&&(_0x54a884='#CD7F32');}}}let _0x152cb9='';return _0x29dcd2['country']&&(_0x152cb9=_0x3dd4ee(0x10f)+_0x29dcd2['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x29dcd2[_0x3dd4ee(0x101)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x29dcd2['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x29dcd2['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x54a884+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x29dcd2['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x152cb9+_0x3dd4ee(0x11e)+_0x54a884+_0x3dd4ee(0x11a)+_0x1934d3+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x37592d['totalMatches']+_0x3dd4ee(0xe3)+_0x37592d['wins']+_0x3dd4ee(0xe3)+_0x37592d['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x37592d['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x37592d['winRate']+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x37592d['points']+'</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x3b488e,_0x5ceded=0x0,_0x5d5534=0x0){const _0x495eba=a25_0xf095;if(_0x5ceded===0x0)return'Unranked';if(_0x3b488e>=0x3e8&&_0x5d5534>=0x50&&_0x5ceded>=0x14)return'Emerald';if(_0x3b488e>=0x2bc)return _0x495eba(0xd2);if(_0x3b488e>=0x1f4)return _0x495eba(0xec);if(_0x3b488e>=0xc8)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x92879f){const _0x371102=a25_0xf095,_0x49cf72=new Map();_0x92879f['forEach'](_0x3fc13e=>{_0x49cf72['set'](_0x3fc13e,0x0);});try{const _0x41f434=collection(db,'players'),_0xd86618=await getDocs(_0x41f434),_0x175816=new Map(),_0x46bff8=new Map();_0xd86618[_0x371102(0x105)](_0x16fbc2=>{const _0x1c5da5=_0x371102,_0x3dc2c6=_0x16fbc2[_0x1c5da5(0x122)]();_0x3dc2c6['username']&&(_0x175816['set'](_0x16fbc2['id'],_0x3dc2c6[_0x1c5da5(0x138)]),_0x46bff8['set'](_0x3dc2c6['username']['toLowerCase'](),_0x16fbc2['id']));});const _0x452212=collection(db,'eloHistory'),_0x127fbe=query(_0x452212,orderBy('timestamp','desc'),limit(0x12c)),_0x18155c=await getDocs(_0x127fbe);if(_0x18155c[_0x371102(0xd9)])return console[_0x371102(0x126)](_0x371102(0xfd)),_0x49cf72;if(_0x18155c[_0x371102(0x123)][_0x371102(0x109)]>0x0){const _0x35b268=_0x18155c['docs'][0x0]['data']();if(_0x35b268[_0x371102(0x10b)]&&_0x175816[_0x371102(0xc3)](_0x35b268['player'])){}}const _0x2b3cfa=new Map();let _0x53c864=0x0;_0x18155c['forEach'](_0x29000e=>{const _0x14b3d4=_0x371102,_0x157dcd=_0x29000e['data']();let _0x57923a=null;if(_0x157dcd['player']&&_0x175816['has'](_0x157dcd[_0x14b3d4(0x10b)]))_0x57923a=_0x175816[_0x14b3d4(0x12d)](_0x157dcd['player']);else{if(_0x157dcd[_0x14b3d4(0x138)]&&_0x46bff8['has'](_0x157dcd[_0x14b3d4(0x138)][_0x14b3d4(0xdc)]()))_0x57923a=_0x157dcd[_0x14b3d4(0x138)];else _0x157dcd['playerUsername']&&_0x46bff8['has'](_0x157dcd[_0x14b3d4(0x131)]['toLowerCase']())&&(_0x57923a=_0x157dcd[_0x14b3d4(0x131)]);}_0x57923a&&_0x92879f['includes'](_0x57923a)&&(_0x53c864++,!_0x2b3cfa['has'](_0x57923a)&&_0x2b3cfa['set'](_0x57923a,[]),_0x2b3cfa['get'](_0x57923a)[_0x14b3d4(0xd8)]({..._0x157dcd,'timestamp':_0x157dcd[_0x14b3d4(0xc2)]?.['seconds']||0x0}));}),_0x2b3cfa['forEach']((_0x5bf210,_0x57a255)=>{const _0x5c1042=_0x371102;if(_0x5bf210[_0x5c1042(0x109)]>0x0){_0x5bf210['sort']((_0x3ef3e3,_0x286ff8)=>_0x286ff8[_0x5c1042(0xc2)]-_0x3ef3e3['timestamp']);const _0x245700=_0x5bf210['find'](_0x4345b1=>_0x4345b1['change']!==undefined||_0x4345b1['newElo']!==undefined&&_0x4345b1['previousElo']!==undefined||_0x4345b1['newEloRating']!==undefined&&_0x4345b1[_0x5c1042(0x13c)]!==undefined);if(_0x245700){let _0x261621;if(_0x245700['change']!==undefined)_0x261621=parseInt(_0x245700[_0x5c1042(0x10e)]);else{if(_0x245700['newElo']!==undefined&&entry['previousElo']!==undefined)_0x261621=parseInt(_0x245700['newElo'])-parseInt(_0x245700[_0x5c1042(0x135)]);else _0x245700['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x261621=parseInt(_0x245700['newEloRating'])-parseInt(_0x245700['oldEloRating']));}!isNaN(_0x261621)&&_0x261621!==0x0&&_0x49cf72['set'](_0x57a255,_0x261621);}}});}catch(_0x477264){console[_0x371102(0xc8)](_0x371102(0xd3),_0x477264);}return _0x49cf72;}function a25_0xf095(_0x274fa1,_0x3eedaf){const _0xfc3f41=a25_0x7d1b();return a25_0xf095=function(_0x26b71f,_0x1c4ed1){_0x26b71f=_0x26b71f-0xbf;let _0x7d1bbe=_0xfc3f41[_0x26b71f];return _0x7d1bbe;},a25_0xf095(_0x274fa1,_0x3eedaf);}function createPlayerRowWithToken(_0xab7fda,_0x1a6626,_0x4ac1c5){const _0x1e4c10=a25_0xf095,_0x42d3b4=parseFloat(_0xab7fda['elo'])||0x0;let _0x5974f2='#DC143C';if(_0x1a6626[_0x1e4c10(0xc5)]===0x0)_0x5974f2=_0x1e4c10(0xcf);else{if(_0x1a6626['winRate']>=0x50&&_0x1a6626['totalMatches']>=0x14)_0x5974f2='#50C878';else{if(_0x42d3b4>=0x2bc)_0x5974f2='#FFD700';else{if(_0x42d3b4>=0x1f4)_0x5974f2=_0x1e4c10(0x129);else _0x42d3b4>=0xc8&&(_0x5974f2='#CD7F32');}}}let _0x1637b0='';_0xab7fda['country']&&(_0x1637b0='<img\x20src=\x22../images/flags/'+_0xab7fda['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0xab7fda['country']+_0x1e4c10(0xf8));let _0x4a236f='';return _0x4ac1c5&&(_0x4a236f='<img\x20src=\x22'+_0x4ac1c5['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4ac1c5['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x4ac1c5[_0x1e4c10(0xf5)]+'\x20'+(_0x4ac1c5['equipped']?'(Equipped)':'')+_0x1e4c10(0xe4)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xab7fda[_0x1e4c10(0x136)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0xab7fda['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x5974f2+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xab7fda[_0x1e4c10(0x138)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1637b0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4a236f+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x5974f2+_0x1e4c10(0x11a)+_0x42d3b4+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1a6626['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1a6626['wins']+_0x1e4c10(0xe3)+_0x1a6626['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1a6626['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1a6626[_0x1e4c10(0xdf)]+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>'+(_0xab7fda['points']||0x0)+'</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x21b2d0,_0x458638=null){const _0x3a19a8=a25_0xf095,_0xafca96=document['querySelector']('#ladder\x20tbody');if(!_0xafca96){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x3a8c03=document[_0x3a19a8(0xe5)]('#ladder\x20thead\x20tr');_0x3a8c03&&(_0x3a8c03['innerHTML']=_0x3a19a8(0x106));const _0x30f75f=_0x21b2d0[_0x3a19a8(0x139)](_0x361486=>_0x361486['username']);!_0x458638&&(_0x458638=await fetchBatchMatchStats(_0x30f75f));let _0x3676c4=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x3676c4=await getTokensByUsernames(_0x30f75f),console['log']('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x3676c4['size'],'players'),_0x3676c4['forEach']((_0x455813,_0x546071)=>{const _0x609506=_0x3a19a8,_0x297b0e=_0x455813['find'](_0x4f6567=>_0x4f6567['equipped']);_0x297b0e&&console[_0x609506(0x126)]('ðŸŽ¯\x20'+_0x546071+_0x609506(0x108)+_0x297b0e['tokenName']);});}catch(_0x514b22){console[_0x3a19a8(0xc8)]('Error\x20fetching\x20tokens:',_0x514b22);}const _0x2b8cc1=_0x21b2d0['map'](_0xaf5670=>{const _0x473657=_0x3a19a8,_0xddbd63=_0x458638[_0x473657(0x12d)](_0xaf5670['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x37320d=_0x3676c4['get'](_0xaf5670['username'])||[],_0x2faa76=getPrimaryDisplayToken(_0x37320d);return _0x2faa76&&console['log'](_0x473657(0xed)+_0xaf5670[_0x473657(0x138)]+_0x473657(0x137)+_0x2faa76[_0x473657(0xf5)]+'\x20(equipped:\x20'+_0x2faa76[_0x473657(0xfc)]+')'),createPlayerRowWithToken(_0xaf5670,_0xddbd63,_0x2faa76);})['join']('');_0xafca96['innerHTML']=_0x2b8cc1,getPlayersLastEloChanges(_0x30f75f)['then'](_0x326032=>{const _0x5c05d8=_0x3a19a8,_0x1cf7dc=new Map();_0xafca96[_0x5c05d8(0xd0)]('tr')['forEach']((_0x28fbeb,_0x252436)=>{const _0x1ab174=_0x5c05d8;_0x252436<_0x30f75f[_0x1ab174(0x109)]&&_0x1cf7dc['set'](_0x30f75f[_0x252436],_0x28fbeb);}),_0x326032['forEach']((_0x152c52,_0x26ac03)=>{const _0x411b1b=_0x5c05d8,_0x197a6a=_0x1cf7dc['get'](_0x26ac03);if(_0x197a6a&&_0x152c52!==0x0){const _0x472cb1=_0x197a6a[_0x411b1b(0xe5)](_0x411b1b(0x118));if(_0x472cb1){const _0x1923f5=_0x152c52>0x0?'+'+_0x152c52:''+_0x152c52,_0x425082=_0x472cb1['querySelector'](_0x411b1b(0xee));_0x425082&&(_0x425082[_0x411b1b(0xfe)]=_0x1923f5,_0x425082[_0x411b1b(0xca)]['color']=_0x152c52>0x0?'#4CAF50':_0x411b1b(0xc9),_0x425082['style']['fontWeight']='bold',_0x425082[_0x411b1b(0xca)]['fontSize']=_0x411b1b(0x128),_0x425082['style'][_0x411b1b(0x11d)]='inline',_0x425082['style']['visibility']=_0x411b1b(0x114),_0x425082[_0x411b1b(0xca)]['opacity']='1');}}});})['catch'](_0x500718=>console[_0x3a19a8(0xc8)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x500718));}function initLadderToggles(){const _0x81094a=a25_0xf095,_0x3ab2a4=document['getElementById'](_0x81094a(0x102)),_0x1b1eda=document['getElementById'](_0x81094a(0x133)),_0x11bda9=document[_0x81094a(0xf4)](_0x81094a(0xce)),_0x39adfe=document[_0x81094a(0xf4)]('duos-switch'),_0xc5b0e9=document['getElementById']('d1-ladder-container'),_0x541651=document['getElementById']('d2-ladder-container'),_0x447efe=document['getElementById']('d3-ladder-container'),_0x1dfad7=document['getElementById']('duos-ladder-container');function _0x19ebfa(){const _0x312ad5=_0x81094a;if(_0xc5b0e9)_0xc5b0e9['classList'][_0x312ad5(0xd7)]('active');if(_0x541651)_0x541651[_0x312ad5(0xe9)]['remove'](_0x312ad5(0xfa));if(_0x447efe)_0x447efe['classList'][_0x312ad5(0xd7)]('active');if(_0x1dfad7)_0x1dfad7['style'][_0x312ad5(0x11d)]=_0x312ad5(0xc4);if(_0xc5b0e9)_0xc5b0e9['style']['display']=_0x312ad5(0xc4);if(_0x541651)_0x541651['style']['display']=_0x312ad5(0xc4);if(_0x447efe)_0x447efe['style']['display']='none';}_0x3ab2a4&&_0x3ab2a4[_0x81094a(0xe7)]('click',()=>{const _0x5b715a=_0x81094a;console['log']('D1\x20toggle\x20clicked'),_0x19ebfa();_0xc5b0e9&&(_0xc5b0e9['classList']['add']('active'),_0xc5b0e9['style'][_0x5b715a(0x11d)]='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']=_0x5b715a(0x121),document['getElementById']('elo-recommendation-text-d2')['style'][_0x5b715a(0x11d)]='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x3ab2a4)_0x3ab2a4[_0x5b715a(0xe9)]['add'](_0x5b715a(0xfa));if(_0x1b1eda)_0x1b1eda['classList']['remove']('active');if(_0x11bda9)_0x11bda9[_0x5b715a(0xe9)][_0x5b715a(0xd7)]('active');displayLadder(),findBestOpponent('d1');}),_0x1b1eda&&_0x1b1eda[_0x81094a(0xe7)]('click',()=>{const _0xca24b7=_0x81094a;console['log'](_0xca24b7(0x115)),_0x19ebfa();_0x541651&&(_0x541651['classList'][_0xca24b7(0x111)]('active'),_0x541651['style']['display']=_0xca24b7(0x121));document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0xca24b7(0x134))[_0xca24b7(0xca)]['display']=_0xca24b7(0x121),document['getElementById'](_0xca24b7(0x11b))['style'][_0xca24b7(0x11d)]='none';if(_0x1b1eda)_0x1b1eda['classList'][_0xca24b7(0x111)]('active');if(_0x3ab2a4)_0x3ab2a4['classList'][_0xca24b7(0xd7)]('active');if(_0x11bda9)_0x11bda9[_0xca24b7(0xe9)]['remove'](_0xca24b7(0xfa));displayLadderD2(),findBestOpponent('d2');}),_0x11bda9&&_0x11bda9['addEventListener']('click',()=>{const _0x38aacf=_0x81094a;console['log']('D3\x20toggle\x20clicked'),_0x19ebfa();_0x447efe&&(_0x447efe['classList']['add'](_0x38aacf(0xfa)),_0x447efe['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')[_0x38aacf(0xca)]['display']='none',document[_0x38aacf(0xf4)]('elo-recommendation-text-d2')['style']['display']=_0x38aacf(0xc4),document['getElementById']('elo-recommendation-text-d3')['style']['display']='block';if(_0x11bda9)_0x11bda9[_0x38aacf(0xe9)]['add']('active');if(_0x3ab2a4)_0x3ab2a4[_0x38aacf(0xe9)][_0x38aacf(0xd7)]('active');if(_0x1b1eda)_0x1b1eda['classList']['remove'](_0x38aacf(0xfa));displayLadderD3(),findBestOpponent('d3');}),_0x39adfe&&_0x39adfe['addEventListener']('click',()=>{const _0x3b6d8a=_0x81094a;_0x19ebfa();if(_0x1dfad7)_0x1dfad7['style']['display']='block';displayLadderDuos(),findBestOpponent(_0x3b6d8a(0xdd)),document[_0x3b6d8a(0xf4)]('elo-recommendation-text-duos')&&(document['getElementById'](_0x3b6d8a(0xeb))['style'][_0x3b6d8a(0x11d)]='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x3b6d8a(0xc4),document['getElementById']('elo-recommendation-text-d3')[_0x3b6d8a(0xca)][_0x3b6d8a(0x11d)]='none';});}document['addEventListener'](a25_0x2ccaad(0x112),()=>{const _0x4fb1f9=a25_0x2ccaad;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')[_0x4fb1f9(0xca)][_0x4fb1f9(0x11d)]='block';});export{displayLadder};async function findBestOpponent(_0x38270d='d1'){const _0x568e0c=a25_0x2ccaad,_0x1d807a='elo-recommendation-text-'+_0x38270d,_0x4ac0dd=document['getElementById'](_0x1d807a);if(!_0x4ac0dd){console['error'](_0x568e0c(0xe2)+_0x38270d+'\x20not\x20found');return;}const _0x16120f=auth[_0x568e0c(0x10c)];if(!_0x16120f){_0x4ac0dd['textContent']='';return;}try{const _0x1ccba6=doc(db,'userProfiles',_0x16120f[_0x568e0c(0x12b)]),_0x5c0fb6=await getDoc(_0x1ccba6);if(!_0x5c0fb6['exists']()){console[_0x568e0c(0x126)](_0x568e0c(0xcd)),_0x4ac0dd['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x9b7ce7=_0x5c0fb6['data'](),_0x3787b2=_0x9b7ce7[_0x568e0c(0x138)];if(!_0x3787b2){_0x4ac0dd[_0x568e0c(0xfe)]='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x27e547;switch(_0x38270d){case'd1':_0x27e547='players';break;case'd2':_0x27e547='playersD2';break;case'd3':_0x27e547='playersD3';break;case'duos':_0x27e547=_0x568e0c(0x103);break;default:_0x27e547='players';}if(_0x38270d==='duos'){const _0x505d58=collection(db,_0x27e547),_0x48de5c=query(_0x505d58,where(_0x568e0c(0x138),'==',_0x3787b2)),_0x5cd2c2=await getDocs(_0x48de5c);if(_0x5cd2c2[_0x568e0c(0xd9)]){_0x4ac0dd['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x40a8db=_0x5cd2c2['docs'][0x0][_0x568e0c(0x122)](),_0xbc1877=parseInt(_0x40a8db['eloRating'])||0x4b0;if(_0x40a8db['hasTeam']&&_0x40a8db['teammate']){_0x4ac0dd[_0x568e0c(0xf9)]='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x40a8db['teammate']+_0x568e0c(0x13b);return;}const _0x54c046=await getDocs(_0x505d58);let _0x423932=null,_0x68723b=-0x1;_0x54c046['forEach'](_0x39d0b9=>{const _0x48721b=_0x568e0c,_0x2786ec=_0x39d0b9[_0x48721b(0x122)]();if(_0x2786ec['username']===_0x3787b2)return;if(_0x2786ec['hasTeam'])return;const _0x30de9a=parseInt(_0x2786ec['eloRating'])||0x4b0,_0x2cce55=Math['abs'](_0x30de9a-_0xbc1877),_0x28708e=Math['max'](0x0,0xc8-_0x2cce55);_0x28708e>_0x68723b&&(_0x423932=_0x2786ec,_0x68723b=_0x28708e);});if(_0x423932){const _0x28687c=parseInt(_0x423932['eloRating'])||0x4b0;let _0x5d5ad6='gray';if(_0x28687c>=0x7d0)_0x5d5ad6='#50C878';else{if(_0x28687c>=0x708)_0x5d5ad6=_0x568e0c(0xc6);else{if(_0x28687c>=0x640)_0x5d5ad6='#C0C0C0';else _0x28687c>=0x578&&(_0x5d5ad6='#CD7F32');}}_0x4ac0dd[_0x568e0c(0xf9)]='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x5d5ad6+';\x22>'+_0x423932['username']+'</span>\x20(ELO:\x20'+_0x28687c+')';}else _0x4ac0dd['textContent']=_0x568e0c(0x10d);return;}const _0x161b5b=collection(db,_0x27e547),_0x158318=query(_0x161b5b,where('username','==',_0x3787b2)),_0x5d678d=await getDocs(_0x158318);if(_0x5d678d[_0x568e0c(0xd9)]){_0x4ac0dd['textContent']=_0x568e0c(0xe0)+_0x38270d['toUpperCase']()+'\x20ladder';return;}const _0x249f69=_0x5d678d['docs'][0x0][_0x568e0c(0x122)](),_0x37f546=parseInt(_0x249f69['eloRating'])||0x5dc,_0x4d188f=await getDocs(_0x161b5b);let _0x11d61b=null,_0x4504b6=-0x1;const _0x2bc173=getPlayerRankName(_0x37f546);_0x4d188f['forEach'](_0x2079e4=>{const _0x436a28=_0x568e0c,_0x45cd06=_0x2079e4[_0x436a28(0x122)]();if(_0x45cd06[_0x436a28(0x138)]===_0x3787b2)return;const _0x449b59=parseInt(_0x45cd06['eloRating'])||0x5dc,_0x4082af=getPlayerRankName(_0x449b59),_0xa8e112=Math[_0x436a28(0xd1)](_0x449b59-_0x37f546),_0x460388=0x20,_0x5464d9=0x1/(0x1+Math['pow'](0xa,(_0x449b59-_0x37f546)/0x190)),_0x33a89c=Math['round'](_0x460388*(0x1-_0x5464d9));if(_0x33a89c<=0x0)return;let _0x31fd23=0x0;const _0x7f0e46=Math['max'](0x0,0x64-_0xa8e112*0.5),_0x2b9662=_0x33a89c>=0x3&&_0x33a89c<=0x8?0x32:_0x33a89c>0x0&&_0x33a89c<0xf?0x1e:0xa,_0x2362ca=_0x2bc173===_0x4082af?0x28:0x0;_0x31fd23=_0x7f0e46+_0x2b9662+_0x2362ca,_0x31fd23>_0x4504b6&&(_0x11d61b=_0x45cd06,_0x4504b6=_0x31fd23);});if(_0x11d61b){const _0x16f0e6=parseInt(_0x11d61b['eloRating'])||0x5dc;let _0x106980='gray';if(_0x16f0e6>=0x7d0)_0x106980='#50C878';else{if(_0x16f0e6>=0x708)_0x106980=_0x568e0c(0xc6);else{if(_0x16f0e6>=0x640)_0x106980='#b9f1fc';else _0x16f0e6>=0x578&&(_0x106980=_0x568e0c(0xbf));}}_0x4ac0dd['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x37f546+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x106980+_0x568e0c(0xcc)+_0x11d61b['username']+'</span>';}else _0x4ac0dd['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x37f546+')';}catch(_0x2b4b98){console['error'](_0x568e0c(0x107),_0x2b4b98),_0x4ac0dd['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x522cec=>{const _0x136c7e=a25_0x2ccaad,_0x5ab984=document['getElementById']('d1-ladder-container')&&document[_0x136c7e(0xf4)]('d1-ladder-container')['style'][_0x136c7e(0x11d)]!=='none',_0x303226=document['getElementById'](_0x136c7e(0x12e))&&document[_0x136c7e(0xf4)](_0x136c7e(0x12e))[_0x136c7e(0xca)]['display']!=='none',_0x1037f1=document['getElementById']('d3-ladder-container')&&document[_0x136c7e(0xf4)]('d3-ladder-container')[_0x136c7e(0xca)]['display']!=='none',_0x269574=document['getElementById'](_0x136c7e(0xf6))&&document['getElementById'](_0x136c7e(0xf6))['style']['display']!==_0x136c7e(0xc4),_0x47db34=_0x5ab984?'d1':_0x303226?'d2':_0x1037f1?'d3':_0x269574?_0x136c7e(0xdd):'d1';findBestOpponent(_0x47db34);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x396962=a25_0x2ccaad,_0x54da47=document['getElementById']('duos-switch'),_0x165720=document['querySelector']('label[for=\x22duos-switch\x22]');_0x54da47&&_0x165720&&(_0x54da47[_0x396962(0xe7)]('change',async _0x3bc482=>{const _0xb95915=_0x396962;if(_0x3bc482['target']['checked']){const _0x56152b=auth?.['currentUser'],_0x42df66=await checkIfUserIsAdmin(_0x56152b);if(!_0x42df66){_0x3bc482['preventDefault']();const _0x3275b2=document['getElementById'](_0xb95915(0x102));return _0x3275b2&&(_0x3275b2[_0xb95915(0x104)]=!![],_0x3275b2[_0xb95915(0x130)](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x333c8a=>{const _0x49f817=_0x396962,_0x3c45d8=await checkIfUserIsAdmin(_0x333c8a);!_0x3c45d8?(_0x54da47['disabled']=!![],_0x165720['style']['opacity']=_0x49f817(0x10a),_0x165720[_0x49f817(0xca)][_0x49f817(0xf7)]='not-allowed',_0x165720[_0x49f817(0x11f)]='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x54da47['disabled']=![],_0x165720[_0x49f817(0xca)]['opacity']='1',_0x165720['style']['cursor']='pointer',_0x165720['title']='');}));});async function checkIfUserIsAdmin(_0x4257e6){const _0x479ea9=a25_0x2ccaad;if(!_0x4257e6)return![];try{const _0x24334d=['admin@ladder.com','brian2af@outlook.com'];if(_0x4257e6['email']&&_0x24334d[_0x479ea9(0x120)](_0x4257e6['email'][_0x479ea9(0xdc)]()))return!![];const _0x211b1e=['userProfiles','players','playersD2','playersD3'],_0x4d4761=['admin',_0x479ea9(0x100),'council',_0x479ea9(0xf3)];for(const _0x2ba66f of _0x211b1e){try{const _0x2458a9=doc(db,_0x2ba66f,_0x4257e6[_0x479ea9(0x12b)]),_0xfc1ff2=await getDoc(_0x2458a9);if(_0xfc1ff2['exists']()){const _0x4b49bb=_0xfc1ff2['data'](),_0x5b6ec8=(_0x4b49bb['roleName']||_0x4b49bb[_0x479ea9(0x119)]||'')['toLowerCase']();if(_0x5b6ec8&&_0x4d4761['includes'](_0x5b6ec8))return!![];}}catch(_0x55babe){console['warn']('Error\x20checking\x20'+_0x2ba66f+':',_0x55babe);}}return![];}catch(_0x21f12e){return console[_0x479ea9(0xc8)](_0x479ea9(0xf1),_0x21f12e),![];}}function showAdminOnlyMessage(){const _0x569e00=a25_0x2ccaad,_0x21f6a2=document['getElementById']('admin-only-message');_0x21f6a2&&_0x21f6a2[_0x569e00(0xd7)]();const _0x49801e=document['createElement']('div');_0x49801e['id']='admin-only-message',_0x49801e[_0x569e00(0xca)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x49801e[_0x569e00(0xf9)]=_0x569e00(0x110),document['body'][_0x569e00(0x117)](_0x49801e),setTimeout(()=>{const _0x1fc538=_0x569e00;_0x49801e[_0x1fc538(0xfb)]&&_0x49801e['remove']();},0xbb8);}