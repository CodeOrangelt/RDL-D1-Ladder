const a25_0x116dce=a25_0x3cc1,a25_0x268060=(function(){let _0x42b457=!![];return function(_0x53e5f1,_0x44fd68){const _0x3ab958=_0x42b457?function(){if(_0x44fd68){const _0x1b3382=_0x44fd68['apply'](_0x53e5f1,arguments);return _0x44fd68=null,_0x1b3382;}}:function(){};return _0x42b457=![],_0x3ab958;};}()),a25_0x5989a8=a25_0x268060(this,function(){const _0x350668=a25_0x3cc1;let _0x1ab8d4;try{const _0x4ccf9c=Function('return\x20(function()\x20'+_0x350668(0x134)+');');_0x1ab8d4=_0x4ccf9c();}catch(_0x24c987){_0x1ab8d4=window;}const _0x1c355e=_0x1ab8d4['console']=_0x1ab8d4['console']||{},_0x3b45a6=['log','warn','info',_0x350668(0x14d),'exception',_0x350668(0x139),'trace'];for(let _0x1e0c94=0x0;_0x1e0c94<_0x3b45a6['length'];_0x1e0c94++){const _0x466e8c=a25_0x268060['constructor']['prototype']['bind'](a25_0x268060),_0x1a1dba=_0x3b45a6[_0x1e0c94],_0x2fd3cf=_0x1c355e[_0x1a1dba]||_0x466e8c;_0x466e8c['__proto__']=a25_0x268060['bind'](a25_0x268060),_0x466e8c['toString']=_0x2fd3cf['toString'][_0x350668(0x141)](_0x2fd3cf),_0x1c355e[_0x1a1dba]=_0x466e8c;}});function a25_0x3cc1(_0x278185,_0x2ea1ac){const _0x5989a8=a25_0xb8df();return a25_0x3cc1=function(_0x268060,_0x140c86){_0x268060=_0x268060-0x132;let _0xb8df9=_0x5989a8[_0x268060];return _0xb8df9;},a25_0x3cc1(_0x278185,_0x2ea1ac);}function a25_0xb8df(){const _0x4bb99b=['playersCTF','Error\x20joining\x20ladder:\x20','{}.constructor(\x22return\x20this\x22)(\x20)','value','Error\x20checking\x20ladder\x20status:','none','disabled','table','block','warn','getIdToken','email','playersDuos','playersD3','addEventListener','bind','ladder-join-status\x20error','reload','ladder-join-status\x20loading','getElementById','className','ladder-join-status\x20success','Unknown\x20ladder\x20type:\x20','textContent','trim','toLowerCase','Error\x20checking\x20','error','currentUser','Ladder\x20join:\x20D2\x20radio\x20found:','Successfully\x20joined\x20the\x20','playersD2','onclick','log','display','DUOS','d2-switch','CTF','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','tiny-join-button','exists','desc','Please\x20enter\x20your\x20username\x20to\x20confirm.','style','Checking\x20user\x20status\x20for\x20ladder:','checked','d1-switch'];a25_0xb8df=function(){return _0x4bb99b;};return a25_0xb8df();}a25_0x5989a8();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document[a25_0x116dce(0x140)]('DOMContentLoaded',()=>{const _0x48fe40=a25_0x116dce,_0x2ec9a0=document['getElementById'](_0x48fe40(0x160)),_0x2e28a=document['getElementById'](_0x48fe40(0x156));console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x2ec9a0),console['log'](_0x48fe40(0x14f),!!_0x2e28a);function _0x49780c(){document['querySelectorAll']('input[name=\x22ladder\x22]')['forEach'](_0x5a287d=>{_0x5a287d['addEventListener']('change',_0x3637dc=>{const _0x794b02=a25_0x3cc1;_0x3637dc['target'][_0x794b02(0x15f)]&&(currentLadder=_0x3637dc['target'][_0x794b02(0x135)],console[_0x794b02(0x153)]('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x49780c();const _0x3e511a=document['getElementById']('join-ladder-button');_0x3e511a&&_0x3e511a[_0x48fe40(0x140)]('click',handleJoinLadder),onAuthStateChanged(auth,_0xd2146e=>{const _0x427dc6=_0x48fe40;if(_0xd2146e)checkUserLadderStatus();else{const _0x3e9d74=document[_0x427dc6(0x145)]('ladder-join-prompt');_0x3e9d74&&(_0x3e9d74['style']['display']='none');}});});function getCollectionName(_0x18f3e7){const _0x2c96a7=a25_0x116dce;switch(_0x18f3e7?.['toUpperCase']()){case'D1':return'players';case'D2':return _0x2c96a7(0x151);case'D3':return'playersD3';case _0x2c96a7(0x155):case'DUO':return'playersDuos';case _0x2c96a7(0x157):return _0x2c96a7(0x132);default:console[_0x2c96a7(0x13b)](_0x2c96a7(0x148)+_0x18f3e7+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x4c5f1c=a25_0x116dce;console['log'](_0x4c5f1c(0x15e),currentLadder);const _0x1039b9=auth[_0x4c5f1c(0x14e)],_0xfced99=document['getElementById']('ladder-join-prompt'),_0x144bca=document['getElementById']('join-ladder-type'),_0x39d472=document['getElementById'](_0x4c5f1c(0x159));if(!_0x1039b9||!_0x1039b9['uid']||!_0xfced99||!_0x144bca||!_0x39d472){if(_0xfced99)_0xfced99['style']['display']='none';if(_0x39d472)_0x39d472['style']['display']=_0x4c5f1c(0x137);return;}try{try{await _0x1039b9[_0x4c5f1c(0x13c)](![]);}catch(_0x6a31e0){console['error']('Authentication\x20verification\x20failed:',_0x6a31e0),_0xfced99[_0x4c5f1c(0x15d)][_0x4c5f1c(0x154)]=_0x4c5f1c(0x137),_0x39d472[_0x4c5f1c(0x15d)]['display']='none';return;}const _0x5e144e=getCollectionName(currentLadder),_0x1095bc=doc(db,_0x5e144e,_0x1039b9['uid']),_0x417f99=await getDoc(_0x1095bc);if(_0x417f99['exists']())_0xfced99['style']['display']='none',_0x39d472['style']['display']='none';else{_0xfced99['style']['display']='none',_0x39d472['style']['display']=_0x4c5f1c(0x13a),_0x144bca[_0x4c5f1c(0x149)]=currentLadder,_0x39d472[_0x4c5f1c(0x152)]=()=>{const _0x48524b=_0x4c5f1c;_0xfced99['style']['display']==='block'?_0xfced99['style']['display']='none':_0xfced99['style'][_0x48524b(0x154)]=_0x48524b(0x13a);};const _0x3ff588=document['getElementById']('join-username-input'),_0x6f661d=document['getElementById']('ladder-join-status');if(_0x3ff588)_0x3ff588[_0x4c5f1c(0x135)]='';_0x6f661d&&(_0x6f661d['textContent']='',_0x6f661d[_0x4c5f1c(0x146)]='ladder-join-status');}}catch(_0x49f128){console['error'](_0x4c5f1c(0x136),_0x49f128),_0xfced99['style']['display']=_0x4c5f1c(0x137),_0x39d472['style']['display']='none';}}async function handleJoinLadder(){const _0x4f43dd=a25_0x116dce,_0x3da4b5=auth['currentUser'],_0x50d443=document[_0x4f43dd(0x145)]('join-ladder-button'),_0x471e4b=document[_0x4f43dd(0x145)]('ladder-join-status'),_0x25bea2=document['getElementById']('join-username-input');if(!_0x3da4b5||!_0x3da4b5['uid']){_0x471e4b['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x471e4b[_0x4f43dd(0x146)]='ladder-join-status\x20error';return;}try{await _0x3da4b5['getIdToken'](!![]);}catch(_0x31e594){console[_0x4f43dd(0x14d)]('Authentication\x20error:',_0x31e594),_0x471e4b[_0x4f43dd(0x149)]=_0x4f43dd(0x158),_0x471e4b['className']='ladder-join-status\x20error';return;}if(!_0x25bea2||!_0x25bea2[_0x4f43dd(0x135)][_0x4f43dd(0x14a)]()){_0x471e4b['textContent']=_0x4f43dd(0x15c),_0x471e4b['className']=_0x4f43dd(0x142);return;}try{_0x50d443['disabled']=!![],_0x471e4b[_0x4f43dd(0x149)]='Verifying\x20username...',_0x471e4b['className']=_0x4f43dd(0x144);let _0x1ece4b='',_0x86e005=null;const _0x375589=['players','playersD2',_0x4f43dd(0x13f),_0x4f43dd(0x13e),'playersCTF','nonParticipants'];for(const _0x54545b of _0x375589){try{const _0x115953=doc(db,_0x54545b,_0x3da4b5['uid']),_0x580862=await getDoc(_0x115953);if(_0x580862[_0x4f43dd(0x15a)]()){_0x86e005=_0x580862['data']();if(_0x86e005['username']){_0x1ece4b=_0x86e005['username'];break;}}}catch(_0x7826d){console[_0x4f43dd(0x14d)](_0x4f43dd(0x14c)+_0x54545b+':',_0x7826d);}}!_0x1ece4b&&_0x3da4b5['email']&&(_0x1ece4b=_0x3da4b5[_0x4f43dd(0x13d)]['split']('@')[0x0]);if(!_0x1ece4b){_0x471e4b['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x471e4b['className']='ladder-join-status\x20error',_0x50d443[_0x4f43dd(0x138)]=![];return;}const _0x30cb85=_0x25bea2['value']['trim']();if(_0x1ece4b&&_0x30cb85[_0x4f43dd(0x14b)]()!==_0x1ece4b['toLowerCase']()){_0x471e4b['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x1ece4b+'\x22\x20to\x20confirm.',_0x471e4b[_0x4f43dd(0x146)]='ladder-join-status\x20error',_0x50d443['disabled']=![];return;}_0x471e4b[_0x4f43dd(0x149)]='Joining\x20'+currentLadder+'\x20ladder...';const _0x3bf3f4=getCollectionName(currentLadder),_0x3d7f2c=doc(db,_0x3bf3f4,_0x3da4b5['uid']),_0x295fec=await getDoc(_0x3d7f2c);if(_0x295fec['exists']()){_0x471e4b['textContent']='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x471e4b['className']=_0x4f43dd(0x142),_0x50d443['disabled']=![];return;}try{await _0x3da4b5['getIdToken'](!![]);}catch(_0x35a337){_0x471e4b[_0x4f43dd(0x149)]=_0x4f43dd(0x158),_0x471e4b['className']=_0x4f43dd(0x142),_0x50d443['disabled']=![];return;}const _0xd3a343=_0x1ece4b,_0x1c10e6=collection(db,_0x3bf3f4),_0x5cdf4c=query(_0x1c10e6,orderBy('position',_0x4f43dd(0x15b)),limit(0x1)),_0x341688=await getDocs(_0x5cdf4c);let _0x564b8f=0x1;if(!_0x341688['empty']){const _0x47d1fb=_0x341688['docs'][0x0]['data']();_0x564b8f=(_0x47d1fb['position']||0x0)+0x1;}const _0x2c10e8={'username':_0xd3a343,'email':_0x3da4b5['email'],'eloRating':0x4b0,'position':_0x564b8f,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x3d7f2c,_0x2c10e8),currentLadder===_0x4f43dd(0x155)?_0x471e4b['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x471e4b['textContent']=_0x4f43dd(0x150)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x471e4b['className']=_0x4f43dd(0x147),setTimeout(()=>{const _0x470939=_0x4f43dd;window['location'][_0x470939(0x143)]();},0x7d0);}catch(_0x264398){console['error']('Error\x20joining\x20ladder:',_0x264398),_0x471e4b['textContent']=_0x4f43dd(0x133)+_0x264398['message'],_0x471e4b['className']=_0x4f43dd(0x142),_0x50d443['disabled']=![];}}