const a25A=a25b;function a25b(a,b){const c=a25a();return a25b=function(d,e){d=d-0xd4;let f=c[d];if(a25b['qaovAg']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a25b['kDzrEf']=g,a=arguments,a25b['qaovAg']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a25b['kDzrEf'](f),a[i]=f):f=j,f;},a25b(a,b);}function a25a(){const I=['DgfYz2v0','BgfKzgvYlwPVAw4TC3rHDhvZihn1y2nLC3m','DwLK','ww91ig11C3qGyMuGC2LNBMvKigLUihrVigPVAw4GysbSywrKzxiU','q1rg','ugXLyxnLigvUDgvYihLVDxiGDxnLCM5HBwuGDg8Gy29UzMLYBs4','D2fYBG','z2v0rwXLBwvUDej5swq','yMXVy2S','y2XHC3noyw1L','tgfKzgvYigPVAw46ieqXihjHzgLVigzVDw5KoG','re9nq29UDgvUDeXVywrLza','ww91igfYzsbHBhjLywr5ihbHCNqGB2yGDgHLia','BM9UugfYDgLJAxbHBNrZ','zgLZywjSzwq','Bg9N','zgf0yq','mtjvsuT5Chi','BwvZC2fNzq','DhjPBq','mte1mtKZmdrJDK1vqMu','zdiTC3DPDgnO','Dgv4DenVBNrLBNq','y3vYCMvUDfvZzxi','mJmXnZu5meLSC1P3tq','BM9Uzq','AM9PBI1SywrKzxiTyNv0Dg9U','u3vJy2vZC2z1BgX5igPVAw5Lzcb0AguG','nJaXmLPHsgXkyW','zgvZyW','zxjYB3i','CgXHEwvYC0qZ','qxv0AgvUDgLJyxrPB24GzxjYB3i6','AM9PBI11C2vYBMfTzs1PBNb1Da','Cg9ZAxrPB24','nZe0mJqWEvvxu05S','CgXHEwvYC0r1B3m','mta4ntmXqxnLCK9m','nJe0nK1St2zMrq','CgXHEwvYC0qY','rfvpuW','C3r5Bgu','BgfKzgvYlwPVAw4TC3rHDhvZigvYCM9Y','AM9PBI1SywrKzxiTDhLWzq','CgXHEwvYC0nurG','CgXHEwvYCW','rxjYB3iGy2HLy2TPBMCGBgfKzgvYihn0yxr1CZO','mJGZnZyWmdDjz3jty04','zgLZCgXHEq','vMvYAwz5Aw5NihvZzxjUyw1LlI4U','ntHuu2ndteW','iIb0BYbJB25MAxjTlG','z2v0swruB2TLBG','BgfKzgvYlwPVAw4TC3rHDhvZ','rxjYB3iGAM9PBMLUzYbSywrKzxi6ia','zw1HAwW','mtG0mJu3nuv2z0P6Eq','vw5RBM93BIbSywrKzxiGDhLWztOG','DxnLCM5HBwu','Dg9mB3DLCKnHC2u','ntrtDw1OzuC','DMfSDwu','BgfKzgvYlwPVAw4TChjVBxb0','tgfKzgvYigPVAw46ieqYihjHzgLVigzVDw5KoG'];a25a=function(){return I;};return a25a();}(function(a,b){const z=a25b,c=a();while(!![]){try{const d=-parseInt(z(0xf7))/0x1+parseInt(z(0x106))/0x2*(parseInt(z(0xf9))/0x3)+parseInt(z(0xe5))/0x4*(parseInt(z(0x10c))/0x5)+-parseInt(z(0xf0))/0x6*(parseInt(z(0xfa))/0x7)+parseInt(z(0xe8))/0x8+-parseInt(z(0x110))/0x9*(-parseInt(z(0xec))/0xa)+-parseInt(z(0x103))/0xb;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a25a,0xc61f8));import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener'](a25A(0xdf),()=>{const B=a25A,a=document[B(0xdb)]('d1-switch'),b=document['getElementById'](B(0xe9));console[B(0xe3)](B(0xde),!!a),console['log'](B(0x113),!!b);function c(){document['querySelectorAll']('input[name=\x22ladder\x22]')['forEach'](e=>{e['addEventListener']('change',f=>{const C=a25b;f[C(0xd4)]['checked']&&(currentLadder=f[C(0xd4)]['value'],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}c();const d=document[B(0xdb)]('join-ladder-button');d&&d['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,e=>{const D=B;if(e)checkUserLadderStatus();else{const f=document[D(0xdb)](D(0x112));f&&(f[D(0xfd)][D(0x104)]='none');}});});function getCollectionName(a){const E=a25A;switch(a?.['toUpperCase']()){case'D1':return E(0x101);case'D2':return'playersD2';case'D3':return E(0xf3);case E(0xfc):case'DUO':return E(0xf8);case E(0xd8):return'playersCTF';default:console[E(0xda)](E(0x10d)+a+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const F=a25A;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const a=auth[F(0xeb)],b=document['getElementById']('ladder-join-prompt'),c=document['getElementById'](F(0xff)),d=document['getElementById']('tiny-join-button');if(!a||!a[F(0xd6)]||!b||!c||!d){if(b)b[F(0xfd)][F(0x104)]='none';if(d)d['style'][F(0x104)]=F(0xed);return;}try{try{await a[F(0x108)](![]);}catch(h){console[F(0xf2)]('Authentication\x20verification\x20failed:',h),b[F(0xfd)][F(0x104)]='none',d['style']['display']=F(0xed);return;}const e=getCollectionName(currentLadder),f=doc(db,e,a[F(0xd6)]),g=await getDoc(f);if(g['exists']())b[F(0xfd)]['display']=F(0xed),d['style']['display']=F(0xed);else{b[F(0xfd)]['display']='none',d[F(0xfd)][F(0x104)]='block',c[F(0xea)]=currentLadder,d['onclick']=()=>{const G=F;b[G(0xfd)]['display']===G(0xdc)?b[G(0xfd)][G(0x104)]=G(0xed):b[G(0xfd)][G(0x104)]='block';};const i=document['getElementById'](F(0xf5)),j=document['getElementById'](F(0x109));if(i)i['value']='';j&&(j['textContent']='',j['className']=F(0x109));}}catch(k){console['error'](F(0x102),k),b[F(0xfd)][F(0x104)]='none',d[F(0xfd)][F(0x104)]='none';}}async function handleJoinLadder(){const H=a25A,a=auth['currentUser'],b=document['getElementById'](H(0xee)),c=document['getElementById']('ladder-join-status'),d=document['getElementById'](H(0xf5));if(!a||!a[H(0xd6)]){c['textContent']=H(0xd7),c['className']=H(0xfe);return;}try{await a[H(0x108)](!![]);}catch(e){console[H(0xf2)](H(0xf4),e),c['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',c['className']=H(0xfe);return;}if(!d||!d[H(0x111)][H(0xe7)]()){c['textContent']=H(0xd9),c['className']='ladder-join-status\x20error';return;}try{b[H(0xe2)]=!![],c[H(0xea)]=H(0x105),c[H(0xdd)]='ladder-join-status\x20loading';let f='',g=null;const h=['players',H(0xfb),'playersD3','playersDuos',H(0x100),H(0xe1)];for(const s of h){try{const t=doc(db,s,a[H(0xd6)]),u=await getDoc(t);if(u['exists']()){g=u[H(0xe4)]();if(g[H(0x10e)]){f=g[H(0x10e)];break;}}}catch(v){console['error']('Error\x20checking\x20'+s+':',v);}}!f&&a[H(0x10b)]&&(f=a[H(0x10b)]['split']('@')[0x0]);if(!f){c['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',c[H(0xdd)]='ladder-join-status\x20error',b[H(0xe2)]=![];return;}const i=d['value'][H(0xe7)]();if(f&&i[H(0x10f)]()!==f['toLowerCase']()){c['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+f+H(0x107),c[H(0xdd)]=H(0xfe),b['disabled']=![];return;}c['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const j=getCollectionName(currentLadder),k=doc(db,j,a['uid']),l=await getDoc(k);if(l['exists']()){c['textContent']=H(0xe0)+currentLadder+'\x20ladder.',c['className']='ladder-join-status\x20error',b['disabled']=![];return;}try{await a['getIdToken'](!![]);}catch(w){c[H(0xea)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',c[H(0xdd)]=H(0xfe),b[H(0xe2)]=![];return;}const m=f,n=collection(db,j),o=query(n,orderBy('position',H(0xf1)),limit(0x1)),p=await getDocs(o);let q=0x1;if(!p['empty']){const x=p['docs'][0x0]['data']();q=(x[H(0xf6)]||0x0)+0x1;}const r={'username':m,'email':a[H(0x10b)],'eloRating':0x4b0,'position':q,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder===H(0xfc)&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(k,r),currentLadder==='DUOS'?c[H(0xea)]='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':c['textContent']=H(0xef)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',c['className']=H(0xd5),setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(y){console['error']('Error\x20joining\x20ladder:',y),c['textContent']=H(0x10a)+y[H(0xe6)],c['className']='ladder-join-status\x20error',b[H(0xe2)]=![];}}