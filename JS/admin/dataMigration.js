(function(a,b){const q=a0d,c=a();while(!![]){try{const d=parseInt(q(0x17f))/0x1*(parseInt(q(0x15d))/0x2)+-parseInt(q(0x160))/0x3*(-parseInt(q(0x161))/0x4)+parseInt(q(0x176))/0x5+-parseInt(q(0x164))/0x6*(-parseInt(q(0x170))/0x7)+parseInt(q(0x166))/0x8*(parseInt(q(0x181))/0x9)+parseInt(q(0x177))/0xa+-parseInt(q(0x15c))/0xb;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0c,0x2ddce));const a0b=(function(){let a=!![];return function(b,c){const d=a?function(){const r=a0d;if(c){const e=c[r(0x159)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a0a=a0b(this,function(){const s=a0d;let a;try{const d=Function('return\x20(function()\x20'+s(0x15a)+');');a=d();}catch(f){a=window;}const b=a['console']=a[s(0x17d)]||{},c=[s(0x162),'warn','info','error','exception',s(0x169),s(0x16e)];for(let g=0x0;g<c['length'];g++){const h=a0b['constructor']['prototype']['bind'](a0b),i=c[g],j=b[i]||h;h[s(0x16b)]=a0b[s(0x17e)](a0b),h['toString']=j['toString'][s(0x17e)](j),b[i]=h;}});a0a();function a0c(){const x=['ndqWnZzmEhfhs3a','Bwf0y2HLC0qZ','zg9JCW','mteWmZG4vK1wwhnZ','ndbYENfXrwy','Bg9N','BM9UugfYDgLJAxbHBNrZ','ndm0ntHjrMTVwxC','DxnLCLbYB2zPBgvZ','ntzfCxbvz1u','CgXHEwvYCW','C2v0','DgfIBgu','Bwf0y2HLCW','x19WCM90B19F','zwXV','Bwf0y2HLC0qY','DhjHy2u','C3vJy2vZCW','mtG5v2T2v09Z','y3jLyxrLzef0','ChvZAa','zgf0yq','y29TBwL0','CgXHEwvYC0qY','mtCWodiWnvPRwvPZsW','mtiWotG3mhP2Ehr0Ea','ywn0AxzL','CgXHEwvYC0qZ','zw50CMLLCW','DxbKyxrL','BgvUz3rO','y29UC29Szq','yMLUza','mtDuEwfsvKm','z2v0','ndC0nduZDvjIBwnU','yxbWBhK','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','BMfTzq','mtC0mde1nJbpqxblDwm'];a0c=function(){return x;};return a0c();}import{db}from'../firebase-config.js';function a0d(a,b){const c=a0c();return a0d=function(d,e){d=d-0x159;let f=c[d];if(a0d['TEbokl']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0d['KzWGJN']=g,a=arguments,a0d['TEbokl']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0d['KzWGJN'](f),a[i]=f):f=j,f;},a0d(a,b);}import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';export async function migrateUserData(){const t=a0d,a=[t(0x167),t(0x175),'playersD3',t(0x163),'userProfiles'],b=[];let c=writeBatch(db),d=0x0;const e=collection(db,t(0x165)),f=new Map(),g=(i,j)=>{const u=t;d>=0x1f4&&(b[u(0x172)](c),c=writeBatch(db),d=0x0);const k=doc(e,i);c['set'](k,j),d++;};for(const i of a){const j=collection(db,i),k=await getDocs(j);k[t(0x15f)]['forEach'](l=>{const v=t,m=l['id'],n=l[v(0x173)]();!f['has'](m)&&f[v(0x168)](m,{'username':n['username']||n[v(0x15b)]||m,'email':n['email']||null,'discord':n['discord']||null,'createdAt':n[v(0x171)]||new Date()['toISOString'](),'divisions':[]});const o=f[v(0x180)](m);if(i===v(0x167))o['divisions']['push']({'id':0x1,'elo':n[v(0x16c)]||0x5dc,'isActive':n[v(0x178)]!==![]});else{if(i==='playersD2')o['divisions']['push']({'id':0x2,'elo':n['elo']||0x5dc,'isActive':n['active']!==![]});else i===v(0x179)&&o['divisions']['push']({'id':0x3,'elo':n['elo']||0x5dc,'isActive':n[v(0x178)]!==![]});}});}for(const [l,m]of f[t(0x17a)]()){g(l,m);}d>0x0&&b[t(0x172)](c);const h=[];for(const n of b){try{await n[t(0x174)](),h[t(0x172)]({'success':!![]});}catch(o){h['push']({'success':![],'error':o});}}return{'usersProcessed':f['size'],'batchesExecuted':h[t(0x17c)],'success':h['every'](p=>p[t(0x16f)])};}export async function updateMatchReferences(){const w=a0d,a=[w(0x16a),w(0x16d),w(0x15e)];let b=0x0;for(const c of a){const d=collection(db,c),e=await getDocs(d),f=0x1f4;let g=writeBatch(db),h=0x0;for(const i of e['docs']){const j=i['data'](),k=doc(db,c,i['id']);g[w(0x17b)](k,{'isMigrated':!![],'lastModified':new Date()['toISOString']()}),h++,b++,h>=f&&(await g[w(0x174)](),g=writeBatch(db),h=0x0);}h>0x0&&await g[w(0x174)]();}return{'updatedCount':b};}