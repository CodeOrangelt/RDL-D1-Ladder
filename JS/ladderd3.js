const a31_0x57ca23=a31_0x28ba,a31_0x2e88e6=(function(){let _0x107ab2=!![];return function(_0x3b7430,_0x4794ec){const _0xcc7029=_0x107ab2?function(){const _0x1f3f6b=a31_0x28ba;if(_0x4794ec){const _0x4248f7=_0x4794ec[_0x1f3f6b(0x1ea)](_0x3b7430,arguments);return _0x4794ec=null,_0x4248f7;}}:function(){};return _0x107ab2=![],_0xcc7029;};}()),a31_0x594a69=a31_0x2e88e6(this,function(){const _0x25ee00=a31_0x28ba,_0x33bc34=function(){let _0x18f966;try{_0x18f966=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5d033b){_0x18f966=window;}return _0x18f966;},_0x5938b8=_0x33bc34(),_0x4b1819=_0x5938b8[_0x25ee00(0x208)]=_0x5938b8[_0x25ee00(0x208)]||{},_0x491267=['log','warn','info','error','exception',_0x25ee00(0x1fd),'trace'];for(let _0x3c32d3=0x0;_0x3c32d3<_0x491267['length'];_0x3c32d3++){const _0x195686=a31_0x2e88e6[_0x25ee00(0x1fb)]['prototype']['bind'](a31_0x2e88e6),_0x23032e=_0x491267[_0x3c32d3],_0x15436f=_0x4b1819[_0x23032e]||_0x195686;_0x195686['__proto__']=a31_0x2e88e6['bind'](a31_0x2e88e6),_0x195686['toString']=_0x15436f['toString'][_0x25ee00(0x1e9)](_0x15436f),_0x4b1819[_0x23032e]=_0x195686;}});a31_0x594a69();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a31_0x1ad62b from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const styleEl=document['createElement']('style');styleEl['textContent']='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document[a31_0x57ca23(0x1f8)]['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;function a31_0x28ba(_0x104860,_0x27a3d7){const _0x594a69=a31_0x45c9();return a31_0x28ba=function(_0x2e88e6,_0x51df92){_0x2e88e6=_0x2e88e6-0x1e9;let _0x45c953=_0x594a69[_0x2e88e6];return _0x45c953;},a31_0x28ba(_0x104860,_0x27a3d7);}async function displayLadderD3(_0x11397f=![]){const _0x34c9ce=a31_0x57ca23,_0x49d163=document['querySelector']('#ladder-d3\x20tbody');if(!_0x49d163){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x49d163[_0x34c9ce(0x212)]='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x3f7265=Date[_0x34c9ce(0x210)]();if(!_0x11397f&&playerCacheD3['data']&&_0x3f7265-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3[_0x34c9ce(0x201)]);return;}const _0x2d7f5b=collection(db,_0x34c9ce(0x1f7)),_0x20a7e5=await getDocs(_0x2d7f5b),_0x11027d=[];_0x20a7e5[_0x34c9ce(0x202)](_0x1d7538=>{const _0x51612e=_0x34c9ce,_0x4c3055=_0x1d7538[_0x51612e(0x201)]();_0x4c3055['username']&&_0x11027d['push']({..._0x4c3055,'id':_0x1d7538['id'],'elo':_0x4c3055['eloRating']||0x0,'position':_0x4c3055['position']||Number['MAX_SAFE_INTEGER']});});const _0x43a8da=collection(db,_0x34c9ce(0x214)),_0x1933dd=await getDocs(_0x43a8da),_0x17a4aa=new Map();_0x1933dd['forEach'](_0x38b0c6=>{const _0x12faab=_0x34c9ce,_0x12efa0=_0x38b0c6[_0x12faab(0x201)]();_0x12efa0['username']&&_0x17a4aa['set'](_0x12efa0['username']['toLowerCase'](),_0x12efa0);});for(const _0x624ae1 of _0x11027d){const _0x22a58c=_0x624ae1[_0x34c9ce(0x21d)]['toLowerCase']();if(_0x17a4aa[_0x34c9ce(0x219)](_0x22a58c)){const _0xddfe4a=_0x17a4aa[_0x34c9ce(0x206)](_0x22a58c);_0xddfe4a['country']&&(_0x624ae1['country']=_0xddfe4a['country'][_0x34c9ce(0x21f)]());}}const _0x5d3755=_0x11027d['map'](_0x11de26=>_0x11de26['username']),_0x1545bd=await fetchBatchMatchStatsD3(_0x5d3755);_0x11027d['sort']((_0xd35067,_0x43ff05)=>{const _0x248569=_0x34c9ce,_0x11e042=_0x1545bd['get'](_0xd35067['username'])?.['totalMatches']||0x0,_0x4ed4bf=_0x1545bd[_0x248569(0x206)](_0x43ff05['username'])?.['totalMatches']||0x0;if(_0x11e042===0x0!==(_0x4ed4bf===0x0))return _0x11e042===0x0?0x1:-0x1;return(_0xd35067['position']||0x3e7)-(_0x43ff05[_0x248569(0x1fc)]||0x3e7);}),_0x11027d['forEach']((_0x5e12ca,_0x11ae68)=>{_0x5e12ca['position']=_0x11ae68+0x1;}),playerCacheD3[_0x34c9ce(0x201)]=_0x11027d,playerCacheD3[_0x34c9ce(0x225)]=_0x3f7265,updateLadderDisplayD3(_0x11027d);}catch(_0x3a7c9c){console['error']('Error\x20loading\x20D3\x20ladder:',_0x3a7c9c),_0x49d163['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x3a7c9c['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x17b218){if(!_0x17b218)return 0x0;const _0x13aa80=_0x17b218['toDate'](),_0x311ed9=new Date(),_0x4d1b2e=Math['abs'](_0x311ed9-_0x13aa80);return Math['ceil'](_0x4d1b2e/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x1f6e34,_0x4499d5){const _0xa0ecb4=a31_0x57ca23;try{const _0x2bea17=collection(db,'playersD3'),_0x514f96=await getDocs(_0x2bea17),_0x1756d5=[];_0x514f96['forEach'](_0xab55d8=>{const _0x4148c2=a31_0x28ba;_0x1756d5[_0x4148c2(0x20c)]({'id':_0xab55d8['id'],..._0xab55d8['data']()});});const _0x39327c=_0x1756d5[_0xa0ecb4(0x221)](_0x29f127=>_0x29f127['username']===_0x1f6e34),_0x211295=_0x1756d5['find'](_0x5a0089=>_0x5a0089['username']===_0x4499d5);if(!_0x39327c||!_0x211295){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x39327c['position']>_0x211295['position']){const _0x5a7ec5=_0x211295['position'];for(const _0x4df308 of _0x1756d5){_0x4df308['position']>=_0x211295['position']&&_0x4df308['position']<_0x39327c['position']&&_0x4df308[_0xa0ecb4(0x21d)]!==_0x1f6e34&&await updateDoc(doc(db,'playersD3',_0x4df308['id']),{'position':_0x4df308['position']+0x1});}await updateDoc(doc(db,'playersD3',_0x39327c['id']),{'position':_0x5a7ec5});if(_0x5a7ec5===0x1){const _0x210f07=doc(db,'playersD3',_0x39327c['id']),_0x5a97ae=await getDoc(_0x210f07);!_0x5a97ae[_0xa0ecb4(0x201)]()['firstPlaceDate']&&await updateDoc(_0x210f07,{'firstPlaceDate':Timestamp['now']()});}if(_0x211295['position']===0x1){const _0x8d0c8=doc(db,'playersD3',_0x211295['id']);await updateDoc(_0x8d0c8,{'firstPlaceDate':null});}playerCacheD3['timestamp']=0x0;}}catch(_0x6b0357){console[_0xa0ecb4(0x1ed)]('Error\x20updating\x20D3\x20player\x20positions:',_0x6b0357);}}async function updateLadderDisplayD3(_0x22ebe3){const _0x37318d=a31_0x57ca23;_0x22ebe3['sort']((_0x1b3794,_0x150b59)=>_0x1b3794[_0x37318d(0x1fc)]-_0x150b59['position']);const _0x5176ee=document['querySelector']('#ladder-d3\x20tbody');if(!_0x5176ee)return;_0x5176ee[_0x37318d(0x212)]='';const _0x148304=_0x22ebe3['map'](_0x244ba2=>_0x244ba2['username']),_0x3787d2=await fetchBatchMatchStatsD3(_0x148304);let _0x4efca1=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x4efca1=await getTokensByUsernames(_0x148304);}catch(_0x4279f4){console[_0x37318d(0x1ed)]('D3:\x20Error\x20fetching\x20tokens:',_0x4279f4);}const _0x379cc0=document['querySelector'](_0x37318d(0x1f3));_0x379cc0&&(_0x379cc0[_0x37318d(0x212)]=_0x37318d(0x1eb));const _0x248ec3=_0x22ebe3['map'](_0x1ccbd6=>{const _0x17354e=_0x37318d,_0x4ed860=_0x3787d2['get'](_0x1ccbd6[_0x17354e(0x21d)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x69e54a=_0x4efca1['get'](_0x1ccbd6[_0x17354e(0x21d)])||[],_0x4b5ebc=getPrimaryDisplayToken(_0x69e54a);return createPlayerRowD3(_0x1ccbd6,_0x4ed860,_0x4b5ebc);})['join']('');_0x5176ee['innerHTML']=_0x248ec3,getPlayersLastEloChangesD3(_0x148304)['then'](_0x23a21b=>{const _0x334c96=_0x37318d,_0x53556c=new Map();_0x5176ee[_0x334c96(0x203)]('tr')['forEach']((_0x47758f,_0x2129e8)=>{const _0x417fe3=_0x334c96;_0x2129e8<_0x148304[_0x417fe3(0x218)]&&_0x53556c[_0x417fe3(0x215)](_0x148304[_0x2129e8],_0x47758f);}),_0x23a21b['forEach']((_0x3665b2,_0x25e09e)=>{const _0x404d99=_0x334c96,_0x3e6230=_0x53556c[_0x404d99(0x206)](_0x25e09e);if(_0x3e6230&&_0x3665b2!==0x0){const _0x3cb604=_0x3e6230[_0x404d99(0x209)]('td:nth-child(3)');if(_0x3cb604){const _0xa173ef=_0x3665b2>0x0?'+'+_0x3665b2:''+_0x3665b2,_0x4b4f45=_0x3cb604['querySelector']('.trend-indicator');_0x4b4f45&&(_0x4b4f45['textContent']=_0xa173ef,_0x4b4f45['style'][_0x404d99(0x21b)]=_0x3665b2>0x0?'#4CAF50':'#F44336',_0x4b4f45['style']['fontWeight']='bold',_0x4b4f45['style']['fontSize']=_0x404d99(0x224),_0x4b4f45['style'][_0x404d99(0x204)]=_0x404d99(0x1f5),_0x4b4f45[_0x404d99(0x226)][_0x404d99(0x1ef)]='visible',_0x4b4f45['style']['opacity']='1');}}});})[_0x37318d(0x20f)](_0x437020=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x437020));}async function fetchBatchMatchStatsD3(_0x415887){const _0x48510f=a31_0x57ca23,_0x15155e=new Map();try{_0x415887['forEach'](_0x58b6de=>{_0x15155e['set'](_0x58b6de,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x1377b3=collection(db,'approvedMatchesD3'),_0x3ead57=await getDocs(_0x1377b3);_0x3ead57['forEach'](_0x41cc87=>{const _0xf7bde7=a31_0x28ba,_0x19aba6=_0x41cc87['data'](),_0x202d22=_0x19aba6[_0xf7bde7(0x20a)],_0x33f9b4=_0x19aba6[_0xf7bde7(0x1f1)];if(_0x415887[_0xf7bde7(0x1f2)](_0x202d22)){const _0x57d314=_0x15155e[_0xf7bde7(0x206)](_0x202d22);_0x57d314[_0xf7bde7(0x1ec)]++,_0x57d314['totalMatches']++,_0x57d314['totalKills']+=parseInt(_0x19aba6['winnerScore'])||0x0,_0x57d314[_0xf7bde7(0x1f9)]+=parseInt(_0x19aba6['loserScore'])||0x0;}if(_0x415887['includes'](_0x33f9b4)){const _0x3745b7=_0x15155e['get'](_0x33f9b4);_0x3745b7['losses']++,_0x3745b7['totalMatches']++,_0x3745b7[_0xf7bde7(0x21c)]+=parseInt(_0x19aba6['loserScore'])||0x0,_0x3745b7['totalDeaths']+=parseInt(_0x19aba6['winnerScore'])||0x0;}}),_0x415887['forEach'](_0x21b180=>{const _0x4e5c58=a31_0x28ba,_0x477712=_0x15155e['get'](_0x21b180);_0x477712[_0x4e5c58(0x1ff)]=_0x477712['totalDeaths']>0x0?(_0x477712['totalKills']/_0x477712['totalDeaths'])['toFixed'](0x2):_0x477712['totalKills'],_0x477712['winRate']=_0x477712['totalMatches']>0x0?(_0x477712['wins']/_0x477712['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x5270c2){console[_0x48510f(0x1ed)]('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x5270c2);}return _0x15155e;}function createPlayerRowD3(_0x5b21db,_0x4aface,_0x453364){const _0xdb7b08=a31_0x57ca23,_0x2715a5=parseFloat(_0x5b21db['elo'])||0x0;let _0x253a10='gray';if(_0x2715a5>=0x7d0)_0x253a10=_0xdb7b08(0x1ee);else{if(_0x2715a5>=0x708)_0x253a10='#FFD700';else{if(_0x2715a5>=0x640)_0x253a10=_0xdb7b08(0x1f6);else _0x2715a5>=0x578&&(_0x253a10='#CD7F32');}}let _0x21dbfc='';_0x5b21db[_0xdb7b08(0x1fe)]&&(_0x21dbfc='<img\x20src=\x22../images/flags/'+_0x5b21db['country'][_0xdb7b08(0x21f)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5b21db[_0xdb7b08(0x1fe)]+_0xdb7b08(0x20b));let _0x12fa18='';return _0x453364&&(_0x12fa18=_0xdb7b08(0x222)+_0x453364[_0xdb7b08(0x200)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x453364['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x453364['tokenName']+'\x20'+(_0x453364[_0xdb7b08(0x1f4)]?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5b21db['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x5b21db[_0xdb7b08(0x21d)])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x253a10+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5b21db['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x21dbfc+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x12fa18+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x253a10+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x2715a5+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4aface['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4aface['wins']+_0xdb7b08(0x223)+_0x4aface['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4aface['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4aface[_0xdb7b08(0x211)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD3(_0xbfa30a){const _0x43e693=a31_0x57ca23,_0x44e1e1=new Map();_0xbfa30a[_0x43e693(0x202)](_0x4f32c8=>_0x44e1e1['set'](_0x4f32c8,0x0));try{const _0x3774ce=new Map(),_0x18253a=await getDocs(collection(db,'playersD3'));_0x18253a[_0x43e693(0x202)](_0x7e35a8=>{const _0x210a7b=_0x43e693,_0x5d59cc=_0x7e35a8['data']();_0x5d59cc['username']&&_0x3774ce[_0x210a7b(0x215)](_0x7e35a8['id'],_0x5d59cc['username']);});const _0xf32a0b=collection(db,'eloHistoryD3'),_0x4b7171=query(_0xf32a0b,orderBy('timestamp','desc'),limit(0x64)),_0x3824b1=await getDocs(_0x4b7171),_0x5eadf7=new Map();_0x3824b1[_0x43e693(0x202)](_0x720868=>{const _0x3599b7=_0x43e693,_0x3b72f9=_0x720868[_0x3599b7(0x201)]();let _0x47c8e2=null;if(_0x3b72f9['username'])_0x47c8e2=_0x3b72f9['username'];else{if(_0x3b72f9['playerUsername'])_0x47c8e2=_0x3b72f9[_0x3599b7(0x220)];else{if(_0x3b72f9['player']&&typeof _0x3b72f9['player']==='string')_0x47c8e2=_0x3b72f9[_0x3599b7(0x21e)];else{if(_0x3b72f9['player']&&_0x3774ce['has'](_0x3b72f9[_0x3599b7(0x21e)]))_0x47c8e2=_0x3774ce['get'](_0x3b72f9['player']);else _0x3b72f9[_0x3599b7(0x205)]&&_0x3774ce['has'](_0x3b72f9['playerId'])&&(_0x47c8e2=_0x3774ce[_0x3599b7(0x206)](_0x3b72f9[_0x3599b7(0x205)]));}}}_0x47c8e2&&_0xbfa30a['includes'](_0x47c8e2)&&(!_0x5eadf7[_0x3599b7(0x219)](_0x47c8e2)&&_0x5eadf7['set'](_0x47c8e2,[]),_0x5eadf7['get'](_0x47c8e2)[_0x3599b7(0x20c)]({..._0x3b72f9,'timestamp':_0x3b72f9['timestamp']?.[_0x3599b7(0x1f0)]||0x0}));}),_0x5eadf7['forEach']((_0x2bedec,_0x2b8cef)=>{const _0x227347=_0x43e693;if(_0x2bedec['length']>0x0){_0x2bedec['sort']((_0x2d27b4,_0x4e13fd)=>_0x4e13fd[_0x227347(0x225)]-_0x2d27b4['timestamp']);const _0x360458=_0x2bedec['find'](_0x3d9d5a=>_0x3d9d5a[_0x227347(0x207)]!==undefined||_0x3d9d5a['newElo']!==undefined&&_0x3d9d5a[_0x227347(0x20d)]!==undefined);if(_0x360458){let _0x5f32e4;if(_0x360458['change']!==undefined)_0x5f32e4=_0x360458['change'];else _0x360458[_0x227347(0x217)]!==undefined&&_0x360458['previousElo']!==undefined&&(_0x5f32e4=_0x360458['newElo']-_0x360458['previousElo']);_0x5f32e4!==undefined&&_0x44e1e1['set'](_0x2b8cef,_0x5f32e4);}}});if(_0x5eadf7[_0x43e693(0x216)]===0x0){const _0x8e5d24=collection(db,'eloHistory'),_0x502d1f=query(_0x8e5d24,where('gameMode','==','D3'),orderBy(_0x43e693(0x225),_0x43e693(0x21a)),limit(0x32));try{const _0x45daee=await getDocs(_0x502d1f);_0x45daee['forEach'](_0x10a33e=>{const _0x2c0ae0=_0x43e693,_0x2de293=_0x10a33e['data']();let _0x10cd98=_0x2de293['username']||_0x2de293['playerUsername'];!_0x10cd98&&_0x2de293['player']&&_0x3774ce[_0x2c0ae0(0x219)](_0x2de293['player'])&&(_0x10cd98=_0x3774ce['get'](_0x2de293['player']));if(_0x10cd98&&_0xbfa30a['includes'](_0x10cd98)){const _0x35393c=_0x2de293['change']||(_0x2de293['newElo']!==undefined&&_0x2de293['previousElo']!==undefined?_0x2de293['newElo']-_0x2de293['previousElo']:0x0);_0x35393c!==0x0&&_0x44e1e1['set'](_0x10cd98,_0x35393c);}});}catch(_0x51d600){console['error'](_0x43e693(0x20e),_0x51d600);}}}catch(_0x5da122){console['error'](_0x43e693(0x213),_0x5da122);}return _0x44e1e1;}function a31_0x45c9(){const _0x39ff82=['bind','apply','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','wins','error','#50C878','visibility','seconds','loserUsername','includes','#ladder-d3\x20thead\x20tr','equipped','inline','#b9f1fc','playersD3','head','totalDeaths','function','constructor','position','table','country','kda','tokenImage','data','forEach','querySelectorAll','display','playerId','get','change','console','querySelector','winnerUsername','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','push','previousElo','D3:\x20Fallback\x20query\x20failed:','catch','now','winRate','innerHTML','D3:\x20Error\x20fetching\x20ELO\x20history:','userProfiles','set','size','newElo','length','has','desc','color','totalKills','username','player','toLowerCase','playerUsername','find','<img\x20src=\x22','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','0.85em','timestamp','style'];a31_0x45c9=function(){return _0x39ff82;};return a31_0x45c9();}window['refreshLadderDisplayD3']=function(_0x5c548c=!![]){const _0x5ed027=a31_0x57ca23;typeof displayLadderD3===_0x5ed027(0x1fa)?displayLadderD3(_0x5c548c):console['warn']('displayLadderD3\x20function\x20not\x20available');};export{displayLadderD3,updatePlayerPositions};