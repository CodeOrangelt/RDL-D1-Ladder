const a6_0x10d028=a6_0x234b,a6_0x480866=(function(){let _0x579da7=!![];return function(_0x1998b9,_0x38eb9c){const _0xc70fe1=_0x579da7?function(){if(_0x38eb9c){const _0x537be8=_0x38eb9c['apply'](_0x1998b9,arguments);return _0x38eb9c=null,_0x537be8;}}:function(){};return _0x579da7=![],_0xc70fe1;};}()),a6_0x5651bb=a6_0x480866(this,function(){const _0x4e6ac0=a6_0x234b;let _0x5ba059;try{const _0x23aa7f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5ba059=_0x23aa7f();}catch(_0x1f132c){_0x5ba059=window;}const _0x170626=_0x5ba059['console']=_0x5ba059['console']||{},_0x6c5e45=['log',_0x4e6ac0(0x1f8),'info',_0x4e6ac0(0x208),_0x4e6ac0(0x1df),'table','trace'];for(let _0x29c17c=0x0;_0x29c17c<_0x6c5e45[_0x4e6ac0(0x1f6)];_0x29c17c++){const _0xdd9049=a6_0x480866['constructor']['prototype']['bind'](a6_0x480866),_0x4afec9=_0x6c5e45[_0x29c17c],_0x242d05=_0x170626[_0x4afec9]||_0xdd9049;_0xdd9049['__proto__']=a6_0x480866[_0x4e6ac0(0x25f)](a6_0x480866),_0xdd9049['toString']=_0x242d05['toString']['bind'](_0x242d05),_0x170626[_0x4afec9]=_0xdd9049;}});a6_0x5651bb();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date(a6_0x10d028(0x27a))['getTime']()}];function isUsernameMuted(_0x4d8657,_0x269237){const _0x5cad16=a6_0x10d028;if(!_0x4d8657)return![];const _0x3e2a3f=mutedUsers['find'](_0x16755a=>_0x16755a['username']===_0x4d8657);if(!_0x3e2a3f)return![];if(!_0x269237)return!![];const _0x926cc3=_0x269237 instanceof Date?_0x269237[_0x5cad16(0x24d)]():_0x269237['seconds']?_0x269237[_0x5cad16(0x1ea)]*0x3e8:Date[_0x5cad16(0x1db)]();return _0x926cc3>=_0x3e2a3f['muteFromDate'];}function filterComment(_0x225e43,_0x200734,_0x129608){if(!_0x225e43)return'-';if(isUsernameMuted(_0x200734,_0x129608))return'Muted.';return _0x225e43;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x44dc0e,_0x3030fc,_0x535a42){const _0xfc83aa=a6_0x10d028,_0x5ee673='u:'+(_0x535a42['filterUsername']||'');return _0xfc83aa(0x23c)+_0x44dc0e+'_p'+_0x3030fc+'_'+_0x5ee673;}function getCachedPage(_0x4dd4d9){const _0x45f1b0=a6_0x10d028,_0x18fd33=sessionStorage['getItem'](_0x4dd4d9);if(_0x18fd33)try{return JSON['parse'](_0x18fd33);}catch(_0xee6d9b){return console[_0x45f1b0(0x208)]('Failed\x20to\x20parse\x20cache:',_0xee6d9b),sessionStorage['removeItem'](_0x4dd4d9),null;}return null;}function cachePage(_0x2f5bf9,_0x131dc1){const _0x195bb7=a6_0x10d028;try{sessionStorage[_0x195bb7(0x215)](_0x2f5bf9,JSON['stringify'](_0x131dc1));}catch(_0x46176c){console['error']('Failed\x20to\x20cache\x20data:',_0x46176c);}}function getEloColor(_0x596885){const _0x8c9fb4=a6_0x10d028,_0x1974b9=Number(_0x596885);if(_0x1974b9>=0x7d0)return'#50C878';else{if(_0x1974b9>=0x708)return'#FFD700';else{if(_0x1974b9>=0x640)return _0x8c9fb4(0x1d0);else{if(_0x1974b9>=0x578)return'#CD7F32';else return _0x8c9fb4(0x24a);}}}}function formatDate(_0x303bd0,_0x379e9f=![]){const _0x4b4f06=a6_0x10d028;if(!_0x303bd0||!_0x303bd0['seconds'])return _0x4b4f06(0x1c2);const _0x4a98ce=new Date(_0x303bd0['seconds']*0x3e8);return _0x379e9f?_0x4a98ce['toLocaleString']():_0x4a98ce[_0x4b4f06(0x210)]();}function truncateComment(_0x4a1197,_0x4f56e4=0x1e){const _0x419efc=a6_0x10d028;if(!_0x4a1197)return'-';if(_0x4a1197[_0x419efc(0x1f6)]<=_0x4f56e4)return _0x4a1197;return _0x4a1197[_0x419efc(0x20f)](0x0,_0x4f56e4)+'...';}function formatCommentDate(_0xe061a7){const _0x7b3914=a6_0x10d028;if(!_0xe061a7||!_0xe061a7['seconds'])return'';const _0x44c130=new Date(_0xe061a7['seconds']*0x3e8),_0x3352c3=new Date(),_0x1ca5b1=Math[_0x7b3914(0x22c)](_0x3352c3-_0x44c130),_0x5f166e=Math[_0x7b3914(0x1d7)](_0x1ca5b1/(0x3e8*0x3c*0x3c*0x18));if(_0x5f166e===0x0)return _0x7b3914(0x1f9);else{if(_0x5f166e===0x1)return'Yesterday';else return _0x5f166e<0x7?_0x5f166e+'\x20days\x20ago':_0x44c130['toLocaleDateString']();}}function setLoadingIndicator(_0x4880d7){const _0x4499cf=a6_0x10d028,_0x3c00f9=document[_0x4499cf(0x23b)](_0x4499cf(0x260));if(_0x3c00f9)_0x3c00f9['style']['display']=_0x4880d7?_0x4499cf(0x202):_0x4499cf(0x25a);}export function updatePreviewLadderModeUI(){const _0x47bf7f=a6_0x10d028,_0x569c37=document[_0x47bf7f(0x23b)]('preview-ladder-mode'),_0x584828=document[_0x47bf7f(0x23b)]('preview-d1-button'),_0x3627b6=document['getElementById']('preview-d2-button'),_0x4926c2=document['getElementById'](_0x47bf7f(0x216));if(_0x569c37)_0x569c37['textContent']=previewState['currentMode'];if(_0x584828)_0x584828['classList']['toggle'](_0x47bf7f(0x276),previewState['currentMode']==='D1');if(_0x3627b6)_0x3627b6[_0x47bf7f(0x1ca)]['toggle']('active',previewState['currentMode']==='D2');if(_0x4926c2)_0x4926c2['classList'][_0x47bf7f(0x27c)]('active',previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x4c9748){const _0x49c506=a6_0x10d028,_0x9adc56=document['getElementById'](_0x49c506(0x256)),_0xf6b00e=document[_0x49c506(0x23b)]('previewNextPage'),_0x4b8976=document[_0x49c506(0x23b)]('previewPageInfo');if(!_0x9adc56||!_0xf6b00e||!_0x4b8976)return;_0x4b8976['textContent']=_0x49c506(0x1c1)+previewState[_0x49c506(0x214)],_0x9adc56['disabled']=previewState['currentPage']<=0x1,_0xf6b00e['disabled']=!_0x4c9748;}function setPreviewLoadingState(_0x502df8){const _0x3fe0ed=a6_0x10d028;previewState['isLoading']=_0x502df8,setLoadingIndicator(_0x502df8);const _0x435eb9=document[_0x3fe0ed(0x23b)](_0x3fe0ed(0x217)),_0x2f16cf=_0x435eb9?_0x435eb9['querySelector'](_0x3fe0ed(0x255)):null,_0x8a9f40=document['getElementById']('previewPrevPage'),_0x1bbd4f=document['getElementById']('previewNextPage'),_0xc8ad1d=document['getElementById']('preview-d1-button'),_0x1715d0=document[_0x3fe0ed(0x23b)]('preview-d2-button'),_0x540c29=document['getElementById']('applyFilterBtn'),_0x474a4b=document['getElementById']('clearFilterBtn');if(_0x2f16cf&&!_0x502df8)_0x2f16cf['style'][_0x3fe0ed(0x1e4)]='none';else _0x2f16cf&&_0x502df8&&(_0x2f16cf['style'][_0x3fe0ed(0x1e4)]='block');!_0x502df8&&_0x435eb9&&!_0x435eb9['querySelector'](_0x3fe0ed(0x223))&&!_0x435eb9[_0x3fe0ed(0x1bd)](_0x3fe0ed(0x1fb))&&(_0x435eb9['innerHTML']=_0x3fe0ed(0x24c)+(previewState['filterUsername']?_0x3fe0ed(0x235):'')+'.</div>');if(_0x8a9f40)_0x8a9f40['disabled']=_0x502df8||previewState['currentPage']<=0x1;if(_0x1bbd4f)_0x1bbd4f['disabled']=_0x502df8;if(_0xc8ad1d)_0xc8ad1d['disabled']=_0x502df8;if(_0x1715d0)_0x1715d0['disabled']=_0x502df8;if(_0x540c29)_0x540c29['disabled']=_0x502df8;if(_0x474a4b)_0x474a4b[_0x3fe0ed(0x220)]=_0x502df8;}function applyClientFilters(_0x50ffd3){const _0x35b75b=a6_0x10d028;if(!previewState['filterUsername'])return _0x50ffd3;const _0x412376=previewState['filterUsername']['toLowerCase']();return _0x50ffd3[_0x35b75b(0x207)](_0x3399f3=>{const _0x14040b=(_0x3399f3['winnerUsername']||'')['toLowerCase'](),_0x4c379f=(_0x3399f3['loserUsername']||'')['toLowerCase']();return _0x14040b['includes'](_0x412376)||_0x4c379f['includes'](_0x412376);});}function applyEnhancedClientFilters(_0x993cc6){if(!hasEnhancedFilters())return _0x993cc6;return _0x993cc6['filter'](_0x5d0362=>{const _0x3b5ecb=a6_0x234b;if(previewState['enhancedFilters'][_0x3b5ecb(0x27d)]){const _0x3fda8b=previewState[_0x3b5ecb(0x211)]['pilots'][_0x3b5ecb(0x1b8)](),_0x2bf44c=(_0x5d0362[_0x3b5ecb(0x1f1)]||'')['toLowerCase'](),_0x3fbf73=(_0x5d0362['loserUsername']||'')['toLowerCase']();if(!_0x2bf44c[_0x3b5ecb(0x259)](_0x3fda8b)&&!_0x3fbf73['includes'](_0x3fda8b))return![];}if(previewState['enhancedFilters'][_0x3b5ecb(0x272)]){const _0x20feff=previewState['enhancedFilters'][_0x3b5ecb(0x272)][_0x3b5ecb(0x1b8)](),_0xd55f42=(_0x5d0362[_0x3b5ecb(0x22f)]||'')['toLowerCase']();if(!_0xd55f42['includes'](_0x20feff))return![];}if(previewState[_0x3b5ecb(0x211)][_0x3b5ecb(0x273)]['length']>0x0){const _0x49ddde=_0x5d0362['subgameType']||_0x3b5ecb(0x1cd);if(!previewState['enhancedFilters'][_0x3b5ecb(0x273)]['includes'](_0x49ddde))return![];}return!![];});}function hasEnhancedFilters(){const _0x38170b=a6_0x10d028;return previewState['enhancedFilters']['pilots']||previewState[_0x38170b(0x211)][_0x38170b(0x272)]||previewState['enhancedFilters'][_0x38170b(0x273)]['length']>0x0;}function clearEnhancedFilters(){previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document['getElementById']('filter-pilots')['value']='',document['getElementById']('filter-levels')['value']='';const _0x4c7bc6=document['getElementById']('filter-subgames');for(let _0x2ec039 of _0x4c7bc6['options']){_0x2ec039['selected']=![];}}function jumpToPage(_0x5ca72a){const _0x53602a=a6_0x10d028,_0x17f414=document['getElementById']('jump-to-page'),_0x294472=previewState['currentPage'];let _0x5aa447=_0x294472;switch(_0x5ca72a){case _0x53602a(0x264):_0x5aa447=0x1;break;case _0x53602a(0x270):_0x5aa447=Math[_0x53602a(0x1d2)](_0x294472+0xa,previewState[_0x53602a(0x246)]||_0x294472+0xa);break;case'+1':_0x5aa447=_0x294472+0x1;break;case'+5':_0x5aa447=_0x294472+0x5;break;case'+10':_0x5aa447=_0x294472+0xa;break;case'-1':_0x5aa447=Math['max'](0x1,_0x294472-0x1);break;case'-5':_0x5aa447=Math[_0x53602a(0x1d2)](0x1,_0x294472-0x5);break;case'-10':_0x5aa447=Math['max'](0x1,_0x294472-0xa);break;case'input':const _0x486221=parseInt(_0x17f414[_0x53602a(0x206)]);_0x486221&&_0x486221>0x0&&(_0x5aa447=_0x486221,_0x17f414['value']='');break;}_0x5aa447!==_0x294472&&_0x5aa447>0x0&&(previewState['currentPage']=_0x5aa447,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x526c8e='current'){const _0xab79d8=a6_0x10d028,_0xab93ce=document['getElementById']('recent-matches-preview'),_0x5e1981=document[_0xab79d8(0x23b)]('match-card-template');if(previewState['isLoading']||!_0xab93ce||!_0x5e1981)return;_0x526c8e===_0xab79d8(0x22e)&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)[_0xab79d8(0x25d)](_0x5f417f=>{const _0x457f70=_0xab79d8;_0x5f417f['includes']('previewCache_'+previewState[_0x457f70(0x22b)])&&sessionStorage['removeItem'](_0x5f417f);}));let _0x1dfbff=previewState[_0xab79d8(0x214)];if(_0x526c8e==='next')_0x1dfbff++;else{if(_0x526c8e==='prev')_0x1dfbff--;else _0x526c8e===_0xab79d8(0x22e)&&(_0x1dfbff=0x1,previewState['firstVisible']=null,previewState['lastVisible']=null);}if(_0x1dfbff<0x1)_0x1dfbff=0x1;const _0x306686=previewState['currentPage'];previewState['currentPage']=_0x1dfbff,updatePreviewPaginationControls(!![]);const _0x14e47f={'filterUsername':previewState['filterUsername']},_0x3a049d=getCacheKey(previewState['currentMode'],_0x1dfbff,_0x14e47f),_0x160536=_0x526c8e!=='current'?getCachedPage(_0x3a049d):null;if(_0x160536){console[_0xab79d8(0x229)](_0xab79d8(0x21b)+_0x1dfbff+_0xab79d8(0x26e)),setPreviewLoadingState(!![]),renderMatchCards(_0x160536['docsData']),updatePreviewPaginationControls(_0x160536['hasNextPage']),setPreviewLoadingState(![]);return;}console['log']('Cache\x20miss\x20for\x20page\x20'+_0x1dfbff+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0xab93ce['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x3d65c1=previewState['currentMode']==='D1'?_0xab79d8(0x1dc):previewState['currentMode']==='D2'?_0xab79d8(0x1e2):_0xab79d8(0x1c9),_0x55b5f6=previewState[_0xab79d8(0x22b)]==='D1'?'createdAt':'approvedAt';try{const _0x4d9627=collection(window['db'],_0x3d65c1);let _0x593628=[orderBy(_0x55b5f6,'desc')];if(_0x1dfbff===0x1)console['log']('Loading\x20first\x20page\x20from\x20Firestore'),_0x593628[_0xab79d8(0x22d)](limit(previewState[_0xab79d8(0x1ed)]));else{if(_0x526c8e===_0xab79d8(0x1d9)&&previewState[_0xab79d8(0x26b)])console['log']('Loading\x20next\x20page\x20using\x20cursor'),_0x593628['push'](startAfter(previewState['lastVisible'])),_0x593628['push'](limit(previewState['matchesPerPage']));else{console['log'](_0xab79d8(0x1b5));const _0x1f9696=_0x1dfbff*previewState[_0xab79d8(0x1ed)];_0x593628['push'](limit(_0x1f9696));}}const _0x170a24=query(_0x4d9627,..._0x593628),_0xb02896=await getDocs(_0x170a24);let _0x4f820e=_0xb02896[_0xab79d8(0x244)];if(_0x1dfbff>0x1&&_0x526c8e!=='next'){const _0x41878f=(_0x1dfbff-0x1)*previewState['matchesPerPage'];_0x4f820e=_0x4f820e['slice'](_0x41878f,_0x41878f+previewState[_0xab79d8(0x1ed)]);}if(_0x4f820e[_0xab79d8(0x1f6)]===0x0){console[_0xab79d8(0x229)]('No\x20results\x20found\x20for\x20this\x20page');_0x526c8e==='next'&&(previewState['currentPage']=_0x306686,updatePreviewPaginationControls(![]));_0xab93ce['innerHTML']=_0xab79d8(0x257)+(previewState['filterUsername']?'\x20matching\x20filters':'')+'.</div>',setPreviewLoadingState(![]);return;}previewState[_0xab79d8(0x248)]=_0x4f820e[0x0],previewState[_0xab79d8(0x26b)]=_0x4f820e[_0x4f820e['length']-0x1];const _0x4f3e16=_0x4f820e['map'](_0x39ad00=>({'id':_0x39ad00['id'],..._0x39ad00['data']()}));let _0x121ecc=![];if(_0x4f820e['length']===previewState[_0xab79d8(0x1ed)]){const _0x558f8c=query(_0x4d9627,orderBy(_0x55b5f6,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),_0x51ea8c=await getDocs(_0x558f8c);_0x121ecc=!_0x51ea8c['empty'];}const _0x38d76b=applyClientFilters(_0x4f3e16),_0x2da3d2={'docsData':_0x4f3e16,'hasNextPage':_0x121ecc};cachePage(getCacheKey(previewState['currentMode'],previewState['currentPage'],_0x14e47f),_0x2da3d2);if(_0x1dfbff>0x1&&_0x526c8e!=='next')for(let _0xfef6fc=0x1;_0xfef6fc<_0x1dfbff;_0xfef6fc++){const _0x43a2fa=(_0xfef6fc-0x1)*previewState[_0xab79d8(0x1ed)],_0x2d0ef2=_0x43a2fa+previewState['matchesPerPage'],_0x24311c=_0xb02896['docs']['slice'](_0x43a2fa,_0x2d0ef2);if(_0x24311c['length']>0x0){const _0x51b15e=_0x24311c[_0xab79d8(0x251)](_0x1baf2d=>({'id':_0x1baf2d['id'],..._0x1baf2d['data']()})),_0x38961e=!![];cachePage(getCacheKey(previewState[_0xab79d8(0x22b)],_0xfef6fc,_0x14e47f),{'docsData':_0x51b15e,'hasNextPage':_0x38961e}),console['log'](_0xab79d8(0x269)+_0xfef6fc);}}_0x38d76b['length']===0x0&&previewState['filterUsername']?_0xab93ce['innerHTML']=_0xab79d8(0x1f3)+previewState[_0xab79d8(0x242)]+'\x22</div>':renderMatchCards(_0x38d76b),updatePreviewPaginationControls(_0x121ecc);}catch(_0x1e2ad3){console['error'](_0xab79d8(0x24b)+previewState['currentMode']+_0xab79d8(0x205),_0x1e2ad3),_0xab93ce[_0xab79d8(0x237)]='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x1e2ad3['message']+'</div>',updatePreviewPaginationControls(![]),previewState[_0xab79d8(0x214)]=_0x306686;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x659f42){const _0xae35a4=a6_0x10d028,_0x3ca042=document[_0xae35a4(0x23b)]('recent-matches-preview'),_0x8aef83=document['getElementById']('match-card-template');if(!_0x3ca042||!_0x8aef83)return;!_0x3ca042['querySelector'](_0xae35a4(0x1fb))&&(_0x3ca042['innerHTML']='');if(!_0x659f42||_0x659f42['length']===0x0){if(!_0x3ca042[_0xae35a4(0x1bd)]('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x3816f2=hasEnhancedFilters()?_0xae35a4(0x235):previewState[_0xae35a4(0x242)]?_0xae35a4(0x235):'';_0x3ca042['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x3816f2+'.</div>';}return;}const _0x20d924=applyEnhancedClientFilters(_0x659f42);if(_0x20d924[_0xae35a4(0x1f6)]===0x0){_0x3ca042[_0xae35a4(0x237)]=_0xae35a4(0x23e);return;}const _0x1c1571=_0x20d924[_0xae35a4(0x251)](_0x2d937=>getAllCommentsForMatch(_0x2d937['id']));let _0x2e51fb=[];try{_0x2e51fb=await Promise['all'](_0x1c1571);}catch(_0x2ba3f0){console['error']('Error\x20fetching\x20comments\x20batch:',_0x2ba3f0),_0x2e51fb=_0x20d924['map'](()=>[]);}const _0x166b7b={};_0x2e51fb[_0xae35a4(0x25d)]((_0x22aff5,_0x310248)=>{_0x166b7b[_0x20d924[_0x310248]['id']]=_0x22aff5||[];}),_0x20d924['forEach'](_0x15ac01=>{const _0x37a8f0=_0xae35a4,_0x212a68=_0x8aef83[_0x37a8f0(0x245)]['cloneNode'](!![]),_0x22ad75=_0x212a68['querySelector']('.match-display-wrapper'),_0x220d81=_0x212a68['querySelector'](_0x37a8f0(0x223)),_0x244213=getEloRankClass(_0x15ac01[_0x37a8f0(0x1d6)]);_0x220d81[_0x37a8f0(0x1ca)]['add']('winner-'+_0x244213),_0x220d81['querySelector'](_0x37a8f0(0x1c6))['textContent']=_0x15ac01['mapPlayed']||'Unknown\x20Map',_0x220d81['querySelector']('.match-date')['textContent']=formatDate(_0x15ac01['approvedAt']||_0x15ac01['createdAt']);const _0x23faf8=_0x220d81[_0x37a8f0(0x1bd)](_0x37a8f0(0x1f5));_0x23faf8[_0x37a8f0(0x236)]=_0x15ac01['winnerUsername']||'Unknown',_0x23faf8[_0x37a8f0(0x21d)]['color']=getEloColor(_0x15ac01['winnerOldElo']),_0x220d81['querySelector']('.player.winner\x20.player-score')['textContent']=_0x15ac01[_0x37a8f0(0x1fa)]??0x0;const _0x26216e=_0x220d81['querySelector']('.player.winner\x20.player-suicides'),_0x3d01e3=_0x15ac01[_0x37a8f0(0x212)]||0x0;_0x26216e['textContent']='S:\x20'+_0x3d01e3;const _0x4c7a0b=_0x220d81[_0x37a8f0(0x1bd)]('.player.loser\x20.player-name');_0x4c7a0b['textContent']=_0x15ac01[_0x37a8f0(0x240)]||_0x37a8f0(0x247),_0x4c7a0b['style']['color']=getEloColor(_0x15ac01[_0x37a8f0(0x21f)]),_0x220d81['querySelector']('.player.loser\x20.player-score')['textContent']=_0x15ac01[_0x37a8f0(0x1c3)]??0x0;const _0x2df65b=_0x220d81[_0x37a8f0(0x1bd)]('.player.loser\x20.player-suicides'),_0x4eb9ed=_0x15ac01[_0x37a8f0(0x1bf)]||0x0;_0x2df65b['textContent']='S:\x20'+_0x4eb9ed;const _0x28d3a9=_0x220d81[_0x37a8f0(0x1bd)](_0x37a8f0(0x274));if(_0x28d3a9){if(_0x15ac01['subgameType']&&_0x15ac01[_0x37a8f0(0x20a)][_0x37a8f0(0x1c8)]()!==''){_0x28d3a9[_0x37a8f0(0x236)]=_0x15ac01['subgameType'],_0x28d3a9['style'][_0x37a8f0(0x1e4)]='block';const _0x51b7bf=getSubgameClass(_0x15ac01[_0x37a8f0(0x20a)]);_0x51b7bf&&_0x28d3a9['classList'][_0x37a8f0(0x21c)](_0x51b7bf);}else _0x28d3a9['textContent']='Standard\x20Match',_0x28d3a9['style'][_0x37a8f0(0x1e4)]='block',_0x28d3a9['style']['opacity']=_0x37a8f0(0x224);}const _0x5e0200=_0x220d81[_0x37a8f0(0x1bd)]('.comment.winner-comment'),_0x73b5da=_0x220d81['querySelector'](_0x37a8f0(0x1e7)),_0x55f3ee=_0x15ac01['winnerComment']||'',_0x2f32f2=_0x15ac01[_0x37a8f0(0x23f)]||'',_0x4ee251=_0x15ac01['approvedAt']||_0x15ac01[_0x37a8f0(0x23d)],_0x5b6f4f=filterComment(_0x55f3ee,_0x15ac01['winnerUsername'],_0x4ee251),_0x587aba=filterComment(_0x2f32f2,_0x15ac01['loserUsername'],_0x4ee251);_0x5e0200['textContent']='\x22'+truncateComment(_0x55f3ee)+'\x22',_0x73b5da['textContent']='\x22'+truncateComment(_0x2f32f2)+'\x22';_0x55f3ee&&!isUsernameMuted(_0x15ac01['winnerUsername'],_0x4ee251)?_0x5e0200[_0x37a8f0(0x1de)]=()=>showPreviewCommentPopup(_0x5b6f4f,_0x15ac01['winnerUsername']||_0x37a8f0(0x25b),getEloColor(_0x15ac01['winnerOldElo'])):(_0x5e0200['textContent']=_0x5b6f4f==='Muted.'?'Muted.':'-',_0x5e0200[_0x37a8f0(0x21d)]['cursor']=_0x37a8f0(0x1ee),_0x5e0200['onclick']=null);_0x2f32f2&&!isUsernameMuted(_0x15ac01['loserUsername'])?_0x73b5da['onclick']=()=>showPreviewCommentPopup(_0x587aba,_0x15ac01['loserUsername']||'Loser',getEloColor(_0x15ac01['loserOldElo'])):(_0x73b5da['textContent']=_0x587aba==='Muted.'?_0x37a8f0(0x239):'-',_0x73b5da['style'][_0x37a8f0(0x241)]=_0x37a8f0(0x1ee),_0x73b5da[_0x37a8f0(0x1de)]=null);const _0x2e5b1c=_0x22ad75?.[_0x37a8f0(0x1bd)]('.community-comments-section');if(!_0x2e5b1c)console['warn']('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0x1be0af=_0x2e5b1c['querySelector']('.comments-container'),_0x4e9c81=_0x1be0af?.['querySelector']('.no-comments-message'),_0x512d30=_0x2e5b1c[_0x37a8f0(0x1bd)](_0x37a8f0(0x258));if(_0x1be0af){while(_0x1be0af[_0x37a8f0(0x20c)]&&_0x1be0af['firstChild']!==_0x4e9c81){_0x1be0af['removeChild'](_0x1be0af['firstChild']);}_0x512d30&&_0x512d30['addEventListener'](_0x37a8f0(0x250),()=>{showAddCommentPopup(_0x15ac01['id']);});const _0x4d47c7=_0x166b7b[_0x15ac01['id']]||[];if(_0x4d47c7['length']>0x0){if(_0x4e9c81)_0x4e9c81['style']['display']=_0x37a8f0(0x25a);const _0x4b265e=(_0x1d444b,_0x41264e)=>{const _0x409097=_0x37a8f0,_0x3318c0=_0x1d444b['split']('\x20');if(_0x3318c0['length']<=_0x41264e)return _0x1d444b;return _0x3318c0['slice'](0x0,_0x41264e)[_0x409097(0x1c5)]('\x20')+'...';};_0x4d47c7[_0x37a8f0(0x25d)](_0x435e7f=>{const _0x21fb4a=_0x37a8f0,_0x1dfb8f=document['createElement']('div');if(_0x435e7f[_0x21fb4a(0x21a)]===_0x21fb4a(0x226)){_0x1dfb8f['className']='demo-link',_0x1dfb8f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x435e7f['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x435e7f['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x435e7f[_0x21fb4a(0x21e)]||_0x21fb4a(0x252))+_0x21fb4a(0x1d4);const _0x22e83f=window['auth'][_0x21fb4a(0x267)],_0xfaa817=_0x22e83f&&_0x435e7f['userId']===_0x22e83f['uid'];if(_0xfaa817){const _0x44b0c5=document['createElement'](_0x21fb4a(0x209));_0x44b0c5['className']='delete-comment-btn',_0x44b0c5['innerHTML']='×',_0x44b0c5['setAttribute'](_0x21fb4a(0x27b),_0x21fb4a(0x219)),_0x44b0c5[_0x21fb4a(0x20e)]('click',_0x5f1855=>{_0x5f1855['preventDefault'](),_0x5f1855['stopPropagation'](),deleteComment(_0x435e7f['id'],_0x1dfb8f);}),_0x1dfb8f['appendChild'](_0x44b0c5);}}else{_0x1dfb8f['className']='comment-item';const _0x60a112=isUsernameMuted(_0x435e7f['username'],_0x435e7f['timestamp']),_0x17457f=_0x60a112?_0x21fb4a(0x239):_0x4b265e(_0x435e7f['text']||'',0xf),_0x2555a9=_0x435e7f['username']||'Anonymous',_0x24fb22=window['auth'][_0x21fb4a(0x267)],_0x23a2af=_0x24fb22&&_0x435e7f['userId']===_0x24fb22['uid'];let _0x5acb0f='';_0x23a2af&&(_0x5acb0f=_0x21fb4a(0x20d));_0x1dfb8f['innerHTML']=_0x5acb0f+'<strong>'+_0x2555a9+':</strong>\x20\x22'+_0x17457f+'\x22';if(_0x23a2af){const _0x48ec06=_0x1dfb8f['querySelector'](_0x21fb4a(0x204));_0x48ec06&&_0x48ec06[_0x21fb4a(0x20e)](_0x21fb4a(0x250),_0x4ee906=>{_0x4ee906['stopPropagation'](),deleteComment(_0x435e7f['id'],_0x1dfb8f);});}!_0x60a112?_0x1dfb8f['addEventListener']('click',()=>{showFullCommentLightbox(_0x435e7f);}):_0x1dfb8f[_0x21fb4a(0x21d)]['cursor']='default';}_0x1be0af['insertBefore'](_0x1dfb8f,_0x1be0af[_0x21fb4a(0x20c)]);});}else{if(_0x4e9c81)_0x4e9c81['style'][_0x37a8f0(0x1e4)]=_0x37a8f0(0x202);}}}const _0x1426ab=_0x220d81['querySelector'](_0x37a8f0(0x1cc));if(_0x1426ab){const _0x12ff57=_0x220d81['querySelector']('.winner-demo-link'),_0x25522f=_0x220d81[_0x37a8f0(0x1bd)](_0x37a8f0(0x1bc)),_0x215731=_0x15ac01['winnerDemoLink']||null,_0x449914=_0x15ac01['loserDemoLink']||_0x15ac01['demoLink']||null;console['log']('Match\x20'+_0x15ac01['id']+'\x20demo\x20links:',{'winner':_0x215731,'loser':_0x449914}),_0x12ff57&&(_0x215731?(_0x12ff57['href']=_0x215731,_0x12ff57['style']['display']='flex',_0x12ff57['title']=_0x15ac01['winnerUsername']+'\x27s\x20Demo'):_0x12ff57['style']['display']='none'),_0x25522f&&(_0x449914?(_0x25522f['href']=_0x449914,_0x25522f['style'][_0x37a8f0(0x1e4)]='flex',_0x25522f[_0x37a8f0(0x1e5)]=_0x15ac01['loserUsername']+_0x37a8f0(0x1cb)):_0x25522f['style']['display']='none'),_0x215731&&_0x12ff57||_0x449914&&_0x25522f?_0x1426ab['style']['display']='flex':_0x1426ab['style']['display']='none';}_0x3ca042['appendChild'](_0x212a68);});}function getSubgameClass(_0x4aaeaa){const _0x310ddd=a6_0x10d028,_0x1728d0={'Fusion\x20Match':_0x310ddd(0x201),'≥6\x20Missiles':_0x310ddd(0x266),'≥6\x20missiles':_0x310ddd(0x266),'Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':'blind-match','Rematch':'rematch','Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':'altered-powerups','Mega\x20Match':'mega-match','Dogfight':_0x310ddd(0x265),'Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x1728d0[_0x4aaeaa]||'';}async function deleteComment(_0xd333bc,_0x18ebd7){const _0x2173e2=a6_0x10d028,_0x4e7022=window['auth']['currentUser'];if(!_0x4e7022){alert(_0x2173e2(0x1b9));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x568a8b=doc(window['db'],'matchComments',_0xd333bc),_0x19bece=await getDoc(_0x568a8b);if(!_0x19bece['exists']()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x55c26c=_0x19bece[_0x2173e2(0x1e3)]();if(_0x55c26c[_0x2173e2(0x203)]!==_0x4e7022['uid']){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x568a8b);if(_0x18ebd7&&_0x18ebd7[_0x2173e2(0x1cf)]){_0x18ebd7['parentNode']['removeChild'](_0x18ebd7);const _0x525ad1=_0x18ebd7['closest']('.comments-container');if(_0x525ad1&&!_0x525ad1['querySelector']('.comment-item')){const _0x2ceb57=_0x525ad1['querySelector']('.no-comments-message');if(_0x2ceb57)_0x2ceb57[_0x2173e2(0x21d)]['display']='block';}}console[_0x2173e2(0x229)](_0x2173e2(0x249));}catch(_0x15567b){console['error']('Error\x20deleting\x20comment:',_0x15567b),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x15567b[_0x2173e2(0x277)]);}}async function getAllCommentsForMatch(_0x16d22){const _0xa2015b=a6_0x10d028;if(!_0x16d22)return[];try{const _0x107e03=collection(window['db'],_0xa2015b(0x26f)),_0x2918a9=query(_0x107e03,where('matchId','==',_0x16d22),orderBy(_0xa2015b(0x24f),'desc')),_0xc9ea9a=await getDocs(_0x2918a9);if(_0xc9ea9a['empty'])return[];return _0xc9ea9a[_0xa2015b(0x244)]['map'](_0x14464d=>({'id':_0x14464d['id'],..._0x14464d['data']()}));}catch(_0x2af8a5){return console[_0xa2015b(0x208)]('Error\x20fetching\x20comments:',_0x2af8a5),[];}}async function submitComment(_0x13a834){const _0x588b3d=a6_0x10d028;_0x13a834[_0x588b3d(0x227)]();if(!window[_0x588b3d(0x26c)]||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert(_0x588b3d(0x1d3));return;}const _0x56cf35=window['auth']['currentUser'];if(!_0x56cf35){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x3dafed=document['getElementById']('commentMatchId')?.[_0x588b3d(0x206)],_0x383732=document['getElementById']('commentText')?.['value']?.['trim']();if(!_0x3dafed||!_0x383732){alert(_0x588b3d(0x25c));return;}const _0x615b56=_0x383732['split'](/\s+/)['filter'](_0x4d155f=>_0x4d155f['length']>0x0)[_0x588b3d(0x1f6)];if(_0x615b56>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.');return;}const _0x33760b=document['querySelector'](_0x588b3d(0x262));_0x33760b&&(_0x33760b['disabled']=!![],_0x33760b[_0x588b3d(0x236)]='Submitting...');try{let _0x5389c8=_0x588b3d(0x225);try{const _0x438568=doc(window['db'],'userProfiles',_0x56cf35['uid']),_0x281472=await getDoc(_0x438568);if(_0x281472[_0x588b3d(0x26d)]()){const _0x2953ba=_0x281472['data']();_0x2953ba['username']&&(_0x5389c8=_0x2953ba['username']);}_0x5389c8==='Anonymous'&&_0x56cf35['displayName']&&(_0x5389c8=_0x56cf35[_0x588b3d(0x1be)]);}catch(_0x8d6189){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x8d6189),_0x56cf35['displayName']&&(_0x5389c8=_0x56cf35[_0x588b3d(0x1be)]);}const _0x5472a4={'matchId':_0x3dafed,'userId':_0x56cf35['uid'],'username':_0x5389c8,'text':_0x383732,'timestamp':serverTimestamp()};console['log'](_0x588b3d(0x24e),_0x5389c8);const _0x2f776d=collection(window['db'],'matchComments');await addDoc(_0x2f776d,_0x5472a4),console[_0x588b3d(0x229)]('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x1b0ffc){console[_0x588b3d(0x208)](_0x588b3d(0x254),_0x1b0ffc),alert('Failed\x20to\x20add\x20comment:\x20'+_0x1b0ffc[_0x588b3d(0x277)]),_0x33760b&&(_0x33760b['disabled']=![],_0x33760b['textContent']='Submit');}}function closeAddCommentPopup(){const _0x4ae9ea=a6_0x10d028,_0x50fbca=document[_0x4ae9ea(0x23b)](_0x4ae9ea(0x233)),_0x7d0dbe=document[_0x4ae9ea(0x23b)]('commentAddOverlay');if(_0x50fbca)_0x50fbca['style']['display']=_0x4ae9ea(0x25a);if(_0x7d0dbe)_0x7d0dbe['style']['display']='none';}function showAddCommentPopup(_0x516196){const _0x7639fb=a6_0x10d028,_0x57fd80=window[_0x7639fb(0x26c)]['currentUser'];if(!_0x57fd80){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo');return;}let _0x489fb2=document['getElementById']('commentAddPopup'),_0x4bf71f=document['getElementById']('commentAddOverlay');!_0x489fb2&&(_0x489fb2=document['createElement']('div'),_0x489fb2['id']=_0x7639fb(0x233),_0x489fb2['className']='comment-popup',document['body'][_0x7639fb(0x232)](_0x489fb2));!_0x4bf71f&&(_0x4bf71f=document['createElement'](_0x7639fb(0x243)),_0x4bf71f['id']=_0x7639fb(0x268),_0x4bf71f['className']='comment-overlay',document['body']['appendChild'](_0x4bf71f));_0x489fb2['innerHTML']=_0x7639fb(0x230)+_0x516196+_0x7639fb(0x200),_0x489fb2['style']['display']=_0x7639fb(0x202),_0x4bf71f['style']['display']='block',document['getElementById']('closeAddCommentPopup')['addEventListener'](_0x7639fb(0x250),closeAddCommentPopup),_0x4bf71f[_0x7639fb(0x20e)]('click',closeAddCommentPopup);const _0x50b576=_0x489fb2['querySelectorAll'](_0x7639fb(0x25e));_0x50b576['forEach'](_0x1f2275=>{const _0x27756d=_0x7639fb;_0x1f2275[_0x27756d(0x20e)]('click',function(){const _0x3d10eb=_0x27756d;_0x50b576[_0x3d10eb(0x25d)](_0x2f7e95=>_0x2f7e95['classList'][_0x3d10eb(0x1d5)]('active')),document['querySelectorAll']('.option-content')['forEach'](_0x21fad1=>_0x21fad1[_0x3d10eb(0x21d)][_0x3d10eb(0x1e4)]='none'),this['classList'][_0x3d10eb(0x21c)]('active');const _0x2c5005=this['dataset']['option'];document['getElementById'](_0x2c5005+_0x3d10eb(0x1c0))['style']['display']='block',_0x2c5005==='demo'?(document['getElementById']('demoLink')['setAttribute']('required',''),document['getElementById']('commentText')[_0x3d10eb(0x1c7)]('required')):(document['getElementById'](_0x3d10eb(0x279))[_0x3d10eb(0x1c7)]('required'),document['getElementById']('commentText')[_0x3d10eb(0x253)]('required',''));});}),document[_0x7639fb(0x23b)]('commentText')['setAttribute'](_0x7639fb(0x238),''),document['getElementById']('demoLink')['removeAttribute']('required'),setupWordCounter('commentText',_0x7639fb(0x20b),0xf),setupWordCounter('demoDescription',_0x7639fb(0x23a),0x14),document['getElementById'](_0x7639fb(0x1e0))['addEventListener']('submit',submitCommentOrDemo);}function setupWordCounter(_0x3fb7d5,_0x2e490d,_0x543ad6){const _0x21c546=document['getElementById'](_0x3fb7d5),_0x15f4e3=document['getElementById'](_0x2e490d);if(!_0x21c546||!_0x15f4e3)return;_0x537b34(),_0x21c546['addEventListener']('input',_0x537b34);function _0x537b34(){const _0x3ebe8c=a6_0x234b,_0xe620ff=_0x21c546['value'][_0x3ebe8c(0x1c8)](),_0x325090=_0xe620ff?_0xe620ff[_0x3ebe8c(0x1ec)](/\s+/)['filter'](_0x3a988c=>_0x3a988c['length']>0x0)[_0x3ebe8c(0x1f6)]:0x0;_0x15f4e3['textContent']=_0x325090,_0x325090>_0x543ad6?_0x15f4e3['style']['color']='#ff4444':_0x15f4e3['style']['color']='#aaa';}}async function submitCommentOrDemo(_0x345ddf){const _0x77909f=a6_0x10d028;_0x345ddf['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0xf4431c=window['auth']['currentUser'];if(!_0xf4431c){alert(_0x77909f(0x231));return;}const _0x5354d3=document['getElementById']('commentMatchId')[_0x77909f(0x206)],_0x484f09=document['querySelector']('.option-tab.active')[_0x77909f(0x1e1)][_0x77909f(0x234)];let _0xe470b7='Anonymous';try{const _0x4cb0f8=doc(window['db'],'userProfiles',_0xf4431c[_0x77909f(0x1f0)]),_0x2cd579=await getDoc(_0x4cb0f8);if(_0x2cd579[_0x77909f(0x26d)]()){const _0x437489=_0x2cd579[_0x77909f(0x1e3)]();_0x437489['username']&&(_0xe470b7=_0x437489['username']);}_0xe470b7===_0x77909f(0x225)&&_0xf4431c[_0x77909f(0x1be)]&&(_0xe470b7=_0xf4431c[_0x77909f(0x1be)]);}catch(_0x1b2cea){console['warn']('Failed\x20to\x20fetch\x20username:',_0x1b2cea),_0xf4431c['displayName']&&(_0xe470b7=_0xf4431c[_0x77909f(0x1be)]);}const _0x595b28=document['querySelector']('.submit-comment-btn');_0x595b28&&(_0x595b28['disabled']=!![],_0x595b28['textContent']='Submitting...');try{if(_0x484f09==='comment'){const _0x300e7c=document['getElementById']('commentText')[_0x77909f(0x206)]['trim']();if(!_0x300e7c){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x595b28['disabled']=![],_0x595b28[_0x77909f(0x236)]=_0x77909f(0x1e6);return;}const _0x4b34d6=_0x300e7c[_0x77909f(0x1ec)](/\s+/)['filter'](_0x52f77c=>_0x52f77c['length']>0x0)[_0x77909f(0x1f6)];if(_0x4b34d6>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.'),_0x595b28['disabled']=![],_0x595b28['textContent']='Submit';return;}const _0x49c8d0={'matchId':_0x5354d3,'userId':_0xf4431c['uid'],'username':_0xe470b7,'text':_0x300e7c,'type':_0x77909f(0x1fc),'timestamp':serverTimestamp()},_0x458691=collection(window['db'],_0x77909f(0x26f));await addDoc(_0x458691,_0x49c8d0);}else{const _0x21bdbf=document[_0x77909f(0x23b)]('demoLink')['value']['trim'](),_0x5934cf=document['getElementById']('demoDescription')['value'][_0x77909f(0x1c8)]()||_0x77909f(0x22a);if(!_0x21bdbf){alert('Please\x20enter\x20a\x20demo\x20link'),_0x595b28['disabled']=![],_0x595b28[_0x77909f(0x236)]='Submit';return;}try{new URL(_0x21bdbf);}catch(_0x5daaf7){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x595b28['disabled']=![],_0x595b28['textContent']=_0x77909f(0x1e6);return;}const _0xba9b2e=_0x5934cf[_0x77909f(0x1ec)](/\s+/)['filter'](_0x15c85f=>_0x15c85f['length']>0x0)['length'];if(_0xba9b2e>0x14){alert(_0x77909f(0x1fd)),_0x595b28['disabled']=![],_0x595b28['textContent']='Submit';return;}const _0x403c74={'matchId':_0x5354d3,'userId':_0xf4431c['uid'],'username':_0xe470b7,'demoLink':_0x21bdbf,'description':_0x5934cf,'type':'demo','text':_0x77909f(0x1d8)+_0x5934cf,'timestamp':serverTimestamp()},_0x230259=collection(window['db'],_0x77909f(0x26f));await addDoc(_0x230259,_0x403c74);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x3234d5){console['error']('Error\x20submitting:',_0x3234d5),alert('Failed\x20to\x20submit:\x20'+_0x3234d5['message']),_0x595b28&&(_0x595b28['disabled']=![],_0x595b28['textContent']='Submit');}}function a6_0x1d51(){const _0x2b406d=['No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages','keypress','.jump-btn','toLowerCase','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments','matchId','Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.','.loser-demo-link','querySelector','displayName','loserSuicides','Option','Page\x20','N/A','loserScore','flex','join','.match-map','removeAttribute','trim','approvedMatchesD3','classList','\x27s\x20Demo','.match-demo-links','Standard\x20Match','Enter','parentNode','#b9f1fc','Close','max','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','remove','winnerOldElo','floor','Demo:\x20','next','</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20','now','approvedMatches','createElement','onclick','exception','addCommentForm','dataset','approvedMatchesD2','data','display','title','Submit','.comment.loser-comment','commentPopupPreview','apply-enhanced-filters','seconds','commentOverlayPreview','split','matchesPerPage','default','showAddCommentPopup','uid','winnerUsername','justifyContent','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22','commentUser','.player.winner\x20.player-name','length','#d32f2f','warn','Today','winnerScore','.matches-loading[style*=\x22color:\x20red\x22]','comment','Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.','jump','popup-btn\x20report-btn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20','fusion-match','block','userId','.delete-comment-btn','\x20matches:','value','filter','error','button','subgameType','wordCount','firstChild','<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>','addEventListener','substring','toLocaleDateString','enhancedFilters','winnerSuicides','text','currentPage','setItem','preview-d3-button','recent-matches-preview','gold','Delete\x20demo','type','Rendering\x20page\x20','add','style','description','loserOldElo','disabled','#fff','commentText','.match-card','0.6','Anonymous','demo','preventDefault','closeCommentPopupPreview','log','Demo\x20link','currentMode','abs','push','current','mapPlayed','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22','You\x20must\x20be\x20signed\x20in\x20to\x20continue','appendChild','commentAddPopup','option','\x20matching\x20filters','textContent','innerHTML','required','Muted.','demoWordCount','getElementById','previewCache_','createdAt','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>','loserComment','loserUsername','cursor','filterUsername','div','docs','content','totalPages','Unknown','firstVisible','Comment\x20deleted\x20successfully','#808080','Error\x20fetching\x20','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','getTime','Submitting\x20comment\x20as:','timestamp','click','map','No\x20description\x20provided','setAttribute','Error\x20submitting\x20comment:','.matches-loading','previewPrevPage','<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display','.add-comment-btn','includes','none','Winner','Please\x20enter\x20a\x20comment\x20before\x20submitting','forEach','.option-tab','bind','loading-indicator','from','.submit-comment-btn','className','start','dogfight','missiles-6plus','currentUser','commentAddOverlay','Cached\x20intermediary\x20page\x20','</small>','lastVisible','auth','exists','\x20from\x20cache','matchComments','end','marginTop','levels','subgames','.match-subgame','Report','active','message','commentPopupContentPreview','demoLink','2025-07-02','aria-label','toggle','pilots'];a6_0x1d51=function(){return _0x2b406d;};return a6_0x1d51();}function a6_0x234b(_0x15f28c,_0x37ef06){const _0x5651bb=a6_0x1d51();return a6_0x234b=function(_0x480866,_0xb97074){_0x480866=_0x480866-0x1b5;let _0x1d5182=_0x5651bb[_0x480866];return _0x1d5182;},a6_0x234b(_0x15f28c,_0x37ef06);}function getEloRankClass(_0x4c009f){const _0x321ce9=a6_0x10d028,_0x487a32=Number(_0x4c009f);if(_0x487a32>=0x7d0)return'emerald';else{if(_0x487a32>=0x708)return _0x321ce9(0x218);else{if(_0x487a32>=0x640)return'silver';else{if(_0x487a32>=0x578)return'bronze';else return'unranked';}}}}function showPreviewCommentPopup(_0x361c3c,_0x341f09,_0x4badb1=a6_0x10d028(0x221)){const _0x36173=a6_0x10d028,_0x1d48f0=document['getElementById'](_0x36173(0x1e8)),_0x168441=document['getElementById']('commentOverlayPreview'),_0x8031a3=document[_0x36173(0x23b)]('commentPopupTitlePreview'),_0x3e38e5=document['getElementById']('commentPopupContentPreview'),_0x15aef0=document[_0x36173(0x23b)]('reportCommentButton');if(!_0x1d48f0||!_0x168441||!_0x8031a3||!_0x3e38e5||!_0x15aef0)return;_0x1d48f0[_0x36173(0x1e1)][_0x36173(0x222)]=_0x361c3c,_0x1d48f0[_0x36173(0x1e1)]['commentUser']=_0x341f09,_0x8031a3['style']['color']=_0x4badb1,_0x8031a3['textContent']='Comment\x20from\x20'+_0x341f09,_0x3e38e5['textContent']=_0x361c3c,_0x15aef0[_0x36173(0x1de)]=reportComment,_0x1d48f0['style'][_0x36173(0x1e4)]=_0x36173(0x202),_0x168441['style']['display']='block';}function closePreviewCommentPopup(){const _0x33abb1=a6_0x10d028,_0x29a6a8=document['getElementById']('commentPopupPreview'),_0x1702bd=document['getElementById'](_0x33abb1(0x1eb));if(_0x29a6a8)_0x29a6a8[_0x33abb1(0x21d)]['display']='none';if(_0x1702bd)_0x1702bd['style']['display']='none';}async function reportComment(){const _0x31523a=a6_0x10d028,_0x4481c4=window[_0x31523a(0x26c)]['currentUser'];if(!_0x4481c4){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0x396f47=document['getElementById']('commentPopupPreview'),_0x4d2ee5={'commentAuthor':_0x396f47['dataset']['commentUser']||'Unknown\x20User','commentText':_0x396f47['dataset']['commentText']||'','matchId':previewState['currentMatchId']||'','reportedBy':_0x4481c4['uid'],'reporterUsername':_0x4481c4['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},_0x4dbbf9=collection(window['db'],'badComments');await addDoc(_0x4dbbf9,_0x4d2ee5),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x22feff){console['error']('Error\x20reporting\x20comment:',_0x22feff),alert('Failed\x20to\x20report\x20comment:\x20'+_0x22feff['message']);}}function showFullCommentLightbox(_0x50cd13){const _0x375559=a6_0x10d028;if(isUsernameMuted(_0x50cd13['username']))return;const _0x469329=document['getElementById']('commentPopupPreview'),_0x49a904=document['getElementById']('commentOverlayPreview'),_0x5c883b=document[_0x375559(0x23b)]('commentPopupTitlePreview'),_0x17a792=document['getElementById'](_0x375559(0x278));if(!_0x469329||!_0x49a904||!_0x5c883b||!_0x17a792)return;_0x5c883b['style']['color']='#fff',_0x5c883b['textContent']='Comment\x20from\x20'+_0x50cd13['username'];if(_0x50cd13[_0x375559(0x24f)]){const _0x297c25=new Date(_0x50cd13['timestamp']['seconds']*0x3e8),_0x55cd9d=_0x297c25['toLocaleString']();_0x17a792['innerHTML']='<p>'+_0x50cd13['text']+_0x375559(0x1da)+_0x55cd9d+_0x375559(0x26a);}else _0x17a792[_0x375559(0x236)]=_0x50cd13['text'];_0x469329['dataset']['commentId']=_0x50cd13['id']||'',_0x469329[_0x375559(0x1e1)][_0x375559(0x1f4)]=_0x50cd13['username']||'',_0x469329['dataset']['commentText']=_0x50cd13[_0x375559(0x213)]||'',_0x469329['dataset'][_0x375559(0x1ba)]=_0x50cd13['matchId']||'';const _0x3459c2=_0x469329[_0x375559(0x1bd)]('.popup-actions')||document['createElement']('div');!_0x469329['querySelector']('.popup-actions')?(_0x3459c2[_0x375559(0x263)]='popup-actions',_0x3459c2[_0x375559(0x21d)]['display']=_0x375559(0x1c4),_0x3459c2['style'][_0x375559(0x1f2)]='center',_0x3459c2['style']['gap']='10px',_0x3459c2['style'][_0x375559(0x271)]='15px',_0x469329['appendChild'](_0x3459c2)):_0x3459c2[_0x375559(0x237)]='';const _0x1aee3c=document[_0x375559(0x1dd)]('button');_0x1aee3c[_0x375559(0x236)]=_0x375559(0x1d1),_0x1aee3c['className']='popup-btn\x20close-btn',_0x1aee3c['id']=_0x375559(0x228),_0x1aee3c[_0x375559(0x20e)](_0x375559(0x250),closePreviewCommentPopup);const _0x1c1235=document[_0x375559(0x1dd)](_0x375559(0x209));_0x1c1235['textContent']=_0x375559(0x275),_0x1c1235['className']=_0x375559(0x1ff),_0x1c1235['style']['backgroundColor']=_0x375559(0x1f7),_0x1c1235['addEventListener']('click',reportComment),_0x3459c2[_0x375559(0x232)](_0x1aee3c),_0x3459c2['appendChild'](_0x1c1235),_0x469329['style']['display']=_0x375559(0x202),_0x49a904['style']['display']='block';}export function setupPreviewEventListeners(){const _0x558428=a6_0x10d028,_0x916f59=document[_0x558428(0x23b)](_0x558428(0x256)),_0x33e402=document[_0x558428(0x23b)]('previewNextPage'),_0x4dff8c=document[_0x558428(0x23b)]('preview-d1-button'),_0x3d7f57=document['getElementById']('preview-d2-button'),_0x3bcfa5=document[_0x558428(0x23b)](_0x558428(0x216)),_0x51f692=document[_0x558428(0x23b)]('filter-toggle-button'),_0xbdea19=document['getElementById']('enhanced-filter-section');if(!_0x916f59||!_0x33e402||!_0x4dff8c||!_0x3d7f57||!_0x3bcfa5||!_0x51f692||!_0xbdea19){console[_0x558428(0x1f8)](_0x558428(0x1bb));return;}_0x916f59['addEventListener'](_0x558428(0x250),()=>{if(!_0x916f59['disabled'])loadRecentMatchesPreview('prev');}),_0x33e402['addEventListener']('click',()=>{const _0x4e62f0=_0x558428;if(!_0x33e402[_0x4e62f0(0x220)])loadRecentMatchesPreview('next');}),_0x4dff8c[_0x558428(0x20e)]('click',()=>{previewState['currentMode']!=='D1'&&!previewState['isLoading']&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x3d7f57['addEventListener']('click',()=>{const _0x49c53e=_0x558428;previewState['currentMode']!=='D2'&&!previewState['isLoading']&&(previewState[_0x49c53e(0x22b)]='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x3bcfa5['addEventListener']('click',()=>{previewState['currentMode']!=='D3'&&!previewState['isLoading']&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x51f692&&_0xbdea19&&_0x51f692[_0x558428(0x20e)]('click',()=>{const _0x58449c=_0x558428,_0x29da2f=_0xbdea19['style']['display']!=='none';_0xbdea19[_0x58449c(0x21d)]['display']=_0x29da2f?'none':'block',_0x51f692['classList']['toggle']('active',!_0x29da2f);});const _0x470a77=document['getElementById'](_0x558428(0x1e9)),_0x580d8a=document['getElementById']('clear-enhanced-filters');_0x470a77&&_0x470a77['addEventListener']('click',()=>{const _0x166948=_0x558428;previewState['enhancedFilters'][_0x166948(0x27d)]=document['getElementById']('filter-pilots')['value']['trim'](),previewState['enhancedFilters']['levels']=document['getElementById']('filter-levels')[_0x166948(0x206)]['trim']();const _0x38be0e=document['getElementById']('filter-subgames');previewState[_0x166948(0x211)]['subgames']=Array[_0x166948(0x261)](_0x38be0e['selectedOptions'])[_0x166948(0x251)](_0x307dc1=>_0x307dc1['value'])['filter'](_0x432b7a=>_0x432b7a!==''),loadRecentMatchesPreview(_0x166948(0x22e));});_0x580d8a&&_0x580d8a['addEventListener']('click',()=>{const _0x224bc0=_0x558428;clearEnhancedFilters(),loadRecentMatchesPreview(_0x224bc0(0x22e));});document['querySelectorAll'](_0x558428(0x1b7))['forEach'](_0x43a727=>{_0x43a727['addEventListener']('click',()=>{const _0x15e413=a6_0x234b,_0x27ed49=_0x43a727['dataset'][_0x15e413(0x1fe)];jumpToPage(_0x27ed49);});});const _0x4aa668=document[_0x558428(0x23b)]('jump-to-page');_0x4aa668&&_0x4aa668['addEventListener'](_0x558428(0x1b6),_0x2df575=>{const _0x2305bb=_0x558428;_0x2df575['key']===_0x2305bb(0x1ce)&&jumpToPage('input');});const _0x889e69=document['getElementById'](_0x558428(0x228)),_0x5c4a52=document['getElementById'](_0x558428(0x1eb));if(_0x889e69)_0x889e69['addEventListener']('click',closePreviewCommentPopup);if(_0x5c4a52)_0x5c4a52['addEventListener']('click',closePreviewCommentPopup);const _0x18a57a=document['getElementById']('closeAddCommentPopup'),_0x5aa56c=document['getElementById']('commentAddOverlay'),_0x21fba8=document[_0x558428(0x23b)]('addCommentForm');if(_0x18a57a)_0x18a57a[_0x558428(0x20e)](_0x558428(0x250),closeAddCommentPopup);if(_0x5aa56c)_0x5aa56c[_0x558428(0x20e)]('click',closeAddCommentPopup);if(_0x21fba8)_0x21fba8['addEventListener']('submit',submitComment);const _0x27314a=document['getElementById'](_0x558428(0x222)),_0x521fc5=document['getElementById']('wordCount');_0x27314a&&_0x521fc5&&setupWordCounter('commentText','wordCount',0xf);}window[a6_0x10d028(0x1ef)]=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window['submitComment']=submitComment;