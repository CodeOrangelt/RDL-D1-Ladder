const a9_0x1bd865=a9_0x273e;(function(_0xabf93,_0xd422f8){const _0x420bd7=a9_0x273e,_0x4b9cbd=_0xabf93();while(!![]){try{const _0x4f8b29=parseInt(_0x420bd7(0x156))/0x1+-parseInt(_0x420bd7(0x11e))/0x2*(-parseInt(_0x420bd7(0x115))/0x3)+-parseInt(_0x420bd7(0x13c))/0x4+parseInt(_0x420bd7(0x148))/0x5+parseInt(_0x420bd7(0x14d))/0x6+parseInt(_0x420bd7(0x113))/0x7*(parseInt(_0x420bd7(0x152))/0x8)+-parseInt(_0x420bd7(0x11b))/0x9;if(_0x4f8b29===_0xd422f8)break;else _0x4b9cbd['push'](_0x4b9cbd['shift']());}catch(_0x5b3d5d){_0x4b9cbd['push'](_0x4b9cbd['shift']());}}}(a9_0x5074,0x451fb));const a9_0x57a505=(function(){let _0x20d8a4=!![];return function(_0x5e691d,_0x1b3c25){const _0x4413c5=_0x20d8a4?function(){const _0x15f68e=a9_0x273e;if(_0x1b3c25){const _0x3d85a9=_0x1b3c25[_0x15f68e(0x15f)](_0x5e691d,arguments);return _0x1b3c25=null,_0x3d85a9;}}:function(){};return _0x20d8a4=![],_0x4413c5;};}()),a9_0x1e63a7=a9_0x57a505(this,function(){const _0x5d8978=a9_0x273e;return a9_0x1e63a7['toString']()[_0x5d8978(0x10f)](_0x5d8978(0x146))['toString']()[_0x5d8978(0x166)](a9_0x1e63a7)['search']('(((.+)+)+)+$');});a9_0x1e63a7();const a9_0x11d11f=(function(){let _0x57890f=!![];return function(_0x5528b7,_0x509955){const _0x3d7c1d=_0x57890f?function(){const _0xb7bf56=a9_0x273e;if(_0x509955){const _0x1590ed=_0x509955[_0xb7bf56(0x15f)](_0x5528b7,arguments);return _0x509955=null,_0x1590ed;}}:function(){};return _0x57890f=![],_0x3d7c1d;};}()),a9_0x3545a7=a9_0x11d11f(this,function(){const _0x16481a=a9_0x273e,_0xfba1d4=function(){const _0x29fc3a=a9_0x273e;let _0x468ccb;try{_0x468ccb=Function(_0x29fc3a(0x140)+_0x29fc3a(0x11f)+');')();}catch(_0x9ca7e2){_0x468ccb=window;}return _0x468ccb;},_0x48ff84=_0xfba1d4(),_0x46f06e=_0x48ff84[_0x16481a(0x143)]=_0x48ff84[_0x16481a(0x143)]||{},_0x219122=[_0x16481a(0x108),'warn','info','error',_0x16481a(0x172),_0x16481a(0x14a),_0x16481a(0x12f)];for(let _0x25489e=0x0;_0x25489e<_0x219122[_0x16481a(0x12e)];_0x25489e++){const _0x147fc8=a9_0x11d11f[_0x16481a(0x166)][_0x16481a(0x16d)][_0x16481a(0x132)](a9_0x11d11f),_0x3236e7=_0x219122[_0x25489e],_0xed9c90=_0x46f06e[_0x3236e7]||_0x147fc8;_0x147fc8[_0x16481a(0x114)]=a9_0x11d11f[_0x16481a(0x132)](a9_0x11d11f),_0x147fc8[_0x16481a(0x165)]=_0xed9c90[_0x16481a(0x165)][_0x16481a(0x132)](_0xed9c90),_0x46f06e[_0x3236e7]=_0x147fc8;}});a9_0x3545a7();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a9_0x5074(){const _0x463b51=['%\x20chance\x20to\x20win)\x0a\x20\x20','\x22\x20data-elo=\x22','Player\x20not\x20found','dataset','silver','style','updateDropdowns','length','trace','winner-new-elo','toFixed','bind','grid','size','getELOColor','Current\x20ELO:\x20','winnerChange','setupEventListeners','init','classList','\x20players\x20from\x20','424340sdjJrV','addEventListener','loser-new-elo','winner-current-elo','return\x20(function()\x20','ladder','get','console','elo','loserChange','(((.+)+)+)+$','getELORankClass','1939640IQgRTA','players','table','match-result','winner-select','2526654URVuZm','querySelectorAll','click','\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20','winner-elo-change','696jwTLNt','round','value','target','447580uELrmd','Error\x20loading\x20players:','emerald','remove','loser-name','New\x20ELO:\x20','\x0a\x20\x20','username','set','apply','forEach','change','sandbox','#CD7F32','.ladder-btn','toString','constructor','color','\x20+\x20','clear','Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser','display','DOMContentLoaded','prototype','calculation-details','expectedScoreWinner','<option\x20value=\x22','\x20=\x20','exception','eloRating','none','#FFD700','gold','from','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','loser-select','newWinnerRating','getElementById','sort','#808080','\x20High\x20ELO\x20gain','pow','calculateELO','<option\x20value=\x22\x22>Select\x20a\x20player...</option>','\x22\x20class=\x22','log','unranked','displayMatchResult','\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>','currentLadder','loadPlayers','\x20ladder','search','winner-name','displayCalculationDetails','data','33642VRzjkW','__proto__','9TGhmUY','desc','textContent','calculateMatch','calculation-text','%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20','14098122UAnjhR','active','refresh-players','187290qHAwfU','{}.constructor(\x22return\x20this\x22)(\x20)','innerHTML','expectedScoreLoser','loser-elo-change','error','\x0a\x0aInitial\x20Ratings:\x0a\x20\x20','Loaded\x20','#50C878'];a9_0x5074=function(){return _0x463b51;};return a9_0x5074();}function a9_0x273e(_0xa36352,_0x23d319){const _0x41db05=a9_0x5074();return a9_0x273e=function(_0x3545a7,_0x11d11f){_0x3545a7=_0x3545a7-0xfb;let _0x35eddd=_0x41db05[_0x3545a7];return _0x35eddd;},a9_0x273e(_0xa36352,_0x23d319);}import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const _0x1f5861=a9_0x273e;this[_0x1f5861(0x10c)]='D1',this[_0x1f5861(0x149)]=new Map(),this[_0x1f5861(0x139)]();}['init'](){const _0x309a56=a9_0x273e;this[_0x309a56(0x138)](),this['loadPlayers']();}[a9_0x1bd865(0x138)](){const _0x4c5526=a9_0x1bd865;document['querySelectorAll']('.ladder-btn')[_0x4c5526(0x160)](_0x10b243=>{const _0x52a1c6=_0x4c5526;_0x10b243[_0x52a1c6(0x13d)](_0x52a1c6(0x14f),_0x1d5b57=>{const _0x16c3e7=_0x52a1c6;document[_0x16c3e7(0x14e)](_0x16c3e7(0x164))['forEach'](_0x43115d=>_0x43115d[_0x16c3e7(0x13a)][_0x16c3e7(0x159)](_0x16c3e7(0x11c))),_0x1d5b57[_0x16c3e7(0x155)][_0x16c3e7(0x13a)]['add'](_0x16c3e7(0x11c)),this['currentLadder']=_0x1d5b57[_0x16c3e7(0x155)][_0x16c3e7(0x12a)][_0x16c3e7(0x141)],this[_0x16c3e7(0x10d)]();});}),document['getElementById'](_0x4c5526(0x11d))[_0x4c5526(0x13d)](_0x4c5526(0x14f),()=>{const _0x53011d=_0x4c5526;this[_0x53011d(0x10d)]();}),document[_0x4c5526(0x100)](_0x4c5526(0x14c))[_0x4c5526(0x13d)](_0x4c5526(0x161),()=>this[_0x4c5526(0x118)]()),document[_0x4c5526(0x100)]('loser-select')[_0x4c5526(0x13d)](_0x4c5526(0x161),()=>this['calculateMatch']());}async[a9_0x1bd865(0x10d)](){const _0x517618=a9_0x1bd865;try{this['updateDropdowns']('<option\x20value=\x22\x22>Loading\x20players...</option>');const _0x54b95c=this['currentLadder']==='D1'?'players':this[_0x517618(0x10c)]==='D2'?'playersD2':'playersD3',_0x407f9c=collection(db,_0x54b95c),_0x2b71b6=query(_0x407f9c,orderBy('eloRating',_0x517618(0x116))),_0x44474c=await getDocs(_0x2b71b6);this[_0x517618(0x149)][_0x517618(0x169)](),_0x44474c[_0x517618(0x160)](_0x2d9979=>{const _0x106e14=_0x517618,_0x15a0e5=_0x2d9979[_0x106e14(0x112)]();_0x15a0e5['username']&&this[_0x106e14(0x149)][_0x106e14(0x15e)](_0x15a0e5[_0x106e14(0x15d)],{'id':_0x2d9979['id'],'username':_0x15a0e5['username'],'elo':parseInt(_0x15a0e5[_0x106e14(0x173)])||0x4b0,'position':_0x15a0e5['position']||0x3e7});}),this['updateDropdowns'](),console[_0x517618(0x108)](_0x517618(0x125)+this[_0x517618(0x149)][_0x517618(0x134)]+_0x517618(0x13b)+this[_0x517618(0x10c)]+_0x517618(0x10e));}catch(_0x1fc016){console[_0x517618(0x123)](_0x517618(0x157),_0x1fc016),this[_0x517618(0x12d)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}['updateDropdowns'](_0x20395f=null){const _0x307474=a9_0x1bd865,_0x3720c=document[_0x307474(0x100)](_0x307474(0x14c)),_0x20d998=document[_0x307474(0x100)]('loser-select');if(_0x20395f){_0x3720c[_0x307474(0x120)]=_0x20395f,_0x20d998[_0x307474(0x120)]=_0x20395f;return;}let _0xa267a2=_0x307474(0x106);const _0x263fea=Array[_0x307474(0xfc)](this[_0x307474(0x149)]['values']())[_0x307474(0x101)]((_0xe38044,_0x3a016f)=>_0x3a016f[_0x307474(0x144)]-_0xe38044['elo']);_0x263fea[_0x307474(0x160)](_0x4c5e0b=>{const _0x51a1af=_0x307474,_0x3fbb4e=this[_0x51a1af(0x147)](_0x4c5e0b[_0x51a1af(0x144)]);_0xa267a2+=_0x51a1af(0x170)+_0x4c5e0b[_0x51a1af(0x15d)]+_0x51a1af(0x128)+_0x4c5e0b[_0x51a1af(0x144)]+_0x51a1af(0x107)+_0x3fbb4e+_0x51a1af(0xfd)+_0x4c5e0b[_0x51a1af(0x15d)]+'\x20('+_0x4c5e0b[_0x51a1af(0x144)]+_0x51a1af(0x10b);}),_0x3720c[_0x307474(0x120)]=_0xa267a2,_0x20d998[_0x307474(0x120)]=_0xa267a2;}[a9_0x1bd865(0x118)](){const _0x2348d8=a9_0x1bd865,_0x376c3e=document[_0x2348d8(0x100)](_0x2348d8(0x14c)),_0x371495=document[_0x2348d8(0x100)](_0x2348d8(0xfe)),_0x1c68c5=_0x376c3e[_0x2348d8(0x154)],_0x1499b5=_0x371495[_0x2348d8(0x154)];if(!_0x1c68c5||!_0x1499b5){document['getElementById']('match-result')[_0x2348d8(0x12c)][_0x2348d8(0x16b)]=_0x2348d8(0x174),document[_0x2348d8(0x100)]('calculation-details')['style'][_0x2348d8(0x16b)]=_0x2348d8(0x174);return;}if(_0x1c68c5===_0x1499b5){alert(_0x2348d8(0x16a));return;}const _0xa1e30f=this[_0x2348d8(0x149)]['get'](_0x1c68c5),_0x4df99c=this[_0x2348d8(0x149)][_0x2348d8(0x142)](_0x1499b5);if(!_0xa1e30f||!_0x4df99c){console[_0x2348d8(0x123)](_0x2348d8(0x129));return;}const _0x34ce01=this[_0x2348d8(0x105)](_0xa1e30f[_0x2348d8(0x144)],_0x4df99c['elo']);this[_0x2348d8(0x10a)](_0xa1e30f,_0x4df99c,_0x34ce01),this[_0x2348d8(0x111)](_0xa1e30f,_0x4df99c,_0x34ce01);}['calculateELO'](_0x17c125,_0x187362,_0x44aeca=0x20){const _0x4d31b2=a9_0x1bd865,_0x3e5aa5=0x1/(0x1+Math[_0x4d31b2(0x104)](0xa,(_0x187362-_0x17c125)/0x190)),_0x5151a1=0x1/(0x1+Math[_0x4d31b2(0x104)](0xa,(_0x17c125-_0x187362)/0x190)),_0x32b567=_0x17c125+_0x44aeca*(0x1-_0x3e5aa5),_0x32803e=_0x187362+_0x44aeca*(0x0-_0x5151a1);return{'winnerChange':Math[_0x4d31b2(0x153)](_0x32b567-_0x17c125),'loserChange':Math[_0x4d31b2(0x153)](_0x32803e-_0x187362),'newWinnerRating':Math['round'](_0x32b567),'newLoserRating':Math[_0x4d31b2(0x153)](_0x32803e),'expectedScoreWinner':_0x3e5aa5,'expectedScoreLoser':_0x5151a1};}['displayMatchResult'](_0x252a74,_0x20f3d2,_0x355171){const _0x3f03a2=a9_0x1bd865;document['getElementById']('winner-name')[_0x3f03a2(0x117)]=_0x252a74[_0x3f03a2(0x15d)],document[_0x3f03a2(0x100)](_0x3f03a2(0x13f))[_0x3f03a2(0x117)]=_0x3f03a2(0x136)+_0x252a74[_0x3f03a2(0x144)],document[_0x3f03a2(0x100)](_0x3f03a2(0x151))[_0x3f03a2(0x117)]='+'+_0x355171[_0x3f03a2(0x137)],document[_0x3f03a2(0x100)](_0x3f03a2(0x130))[_0x3f03a2(0x117)]='New\x20ELO:\x20'+_0x355171[_0x3f03a2(0xff)],document[_0x3f03a2(0x100)](_0x3f03a2(0x15a))[_0x3f03a2(0x117)]=_0x20f3d2[_0x3f03a2(0x15d)],document['getElementById']('loser-current-elo')[_0x3f03a2(0x117)]=_0x3f03a2(0x136)+_0x20f3d2[_0x3f03a2(0x144)],document['getElementById'](_0x3f03a2(0x122))[_0x3f03a2(0x117)]=''+_0x355171[_0x3f03a2(0x145)],document[_0x3f03a2(0x100)](_0x3f03a2(0x13e))['textContent']=_0x3f03a2(0x15b)+_0x355171['newLoserRating'];const _0x277781=this[_0x3f03a2(0x135)](_0x252a74['elo']),_0x3c56db=this[_0x3f03a2(0x135)](_0x20f3d2[_0x3f03a2(0x144)]);document['getElementById'](_0x3f03a2(0x110))[_0x3f03a2(0x12c)][_0x3f03a2(0x167)]=_0x277781,document['getElementById'](_0x3f03a2(0x15a))[_0x3f03a2(0x12c)][_0x3f03a2(0x167)]=_0x3c56db,document[_0x3f03a2(0x100)](_0x3f03a2(0x14b))['style']['display']=_0x3f03a2(0x133);}[a9_0x1bd865(0x111)](_0x41eb26,_0x32ecc6,_0x3ec0ec){const _0x135c5c=a9_0x1bd865,_0x326735=_0x135c5c(0x124)+_0x41eb26[_0x135c5c(0x15d)]+':\x20'+_0x41eb26[_0x135c5c(0x144)]+_0x135c5c(0x15c)+_0x32ecc6['username']+':\x20'+_0x32ecc6[_0x135c5c(0x144)]+_0x135c5c(0x150)+_0x41eb26[_0x135c5c(0x15d)]+':\x20'+_0x3ec0ec[_0x135c5c(0x16f)][_0x135c5c(0x131)](0x3)+'\x20('+(_0x3ec0ec[_0x135c5c(0x16f)]*0x64)[_0x135c5c(0x131)](0x1)+_0x135c5c(0x127)+_0x32ecc6[_0x135c5c(0x15d)]+':\x20'+_0x3ec0ec[_0x135c5c(0x121)]['toFixed'](0x3)+'\x20('+(_0x3ec0ec[_0x135c5c(0x121)]*0x64)[_0x135c5c(0x131)](0x1)+_0x135c5c(0x11a)+_0x41eb26[_0x135c5c(0x15d)]+':\x20'+_0x41eb26[_0x135c5c(0x144)]+_0x135c5c(0x168)+_0x3ec0ec['winnerChange']+'\x20=\x20'+_0x3ec0ec[_0x135c5c(0xff)]+'\x0a\x20\x20'+_0x32ecc6['username']+':\x20'+_0x32ecc6[_0x135c5c(0x144)]+'\x20+\x20'+_0x3ec0ec[_0x135c5c(0x145)]+_0x135c5c(0x171)+_0x3ec0ec['newLoserRating']+'\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20×\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a'+(_0x3ec0ec[_0x135c5c(0x137)]>0x14?_0x135c5c(0x103):'')+'\x0a'+(_0x3ec0ec[_0x135c5c(0x137)]<0x5?'Low\x20ELO\x20gain.':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x135c5c(0x119))[_0x135c5c(0x117)]=_0x326735,document['getElementById'](_0x135c5c(0x16e))[_0x135c5c(0x12c)][_0x135c5c(0x16b)]='block';}[a9_0x1bd865(0x135)](_0x47b38e){const _0x57a567=a9_0x1bd865;if(_0x47b38e>=0x7d0)return _0x57a567(0x126);else{if(_0x47b38e>=0x708)return _0x57a567(0x175);else{if(_0x47b38e>=0x640)return'#C0C0C0';else{if(_0x47b38e>=0x578)return _0x57a567(0x163);else return _0x57a567(0x102);}}}}['getELORankClass'](_0x49e652){const _0x162da7=a9_0x1bd865;if(_0x49e652>=0x7d0)return _0x162da7(0x158);else{if(_0x49e652>=0x708)return _0x162da7(0xfb);else{if(_0x49e652>=0x640)return _0x162da7(0x12b);else{if(_0x49e652>=0x578)return'bronze';else return _0x162da7(0x109);}}}}}document['addEventListener'](a9_0x1bd865(0x16c),()=>{const _0x3aa2af=a9_0x1bd865;document[_0x3aa2af(0x100)](_0x3aa2af(0x162))&&new ELOCalculator();});