const a6_0x38df41=(function(){let _0x2f2a64=!![];return function(_0xc52860,_0x4fc021){const _0x99cf6=_0x2f2a64?function(){if(_0x4fc021){const _0x7cd34c=_0x4fc021['apply'](_0xc52860,arguments);return _0x4fc021=null,_0x7cd34c;}}:function(){};return _0x2f2a64=![],_0x99cf6;};}()),a6_0x21d48d=a6_0x38df41(this,function(){const _0x294473=a6_0x23a1,_0x4d25e1=function(){const _0x4b732=a6_0x23a1;let _0x1a3929;try{_0x1a3929=Function('return\x20(function()\x20'+_0x4b732(0x179)+');')();}catch(_0x16ed4b){_0x1a3929=window;}return _0x1a3929;},_0x2acb8c=_0x4d25e1(),_0x131a8e=_0x2acb8c['console']=_0x2acb8c['console']||{},_0x53359c=['log',_0x294473(0x1a5),_0x294473(0x177),'error',_0x294473(0x216),_0x294473(0x1f8),'trace'];for(let _0x11709e=0x0;_0x11709e<_0x53359c[_0x294473(0x1ee)];_0x11709e++){const _0x1ce2cf=a6_0x38df41['constructor'][_0x294473(0x1a7)]['bind'](a6_0x38df41),_0x38387d=_0x53359c[_0x11709e],_0x58f0c5=_0x131a8e[_0x38387d]||_0x1ce2cf;_0x1ce2cf['__proto__']=a6_0x38df41[_0x294473(0x211)](a6_0x38df41),_0x1ce2cf[_0x294473(0x1db)]=_0x58f0c5['toString']['bind'](_0x58f0c5),_0x131a8e[_0x38387d]=_0x1ce2cf;}});a6_0x21d48d();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date('2025-07-02')['getTime']()}];function isUsernameMuted(_0x5c3ba2,_0x469c02){const _0x39a2b7=a6_0x23a1;if(!_0x5c3ba2)return![];const _0x1b9f18=mutedUsers['find'](_0x2c6506=>_0x2c6506['username']===_0x5c3ba2);if(!_0x1b9f18)return![];if(!_0x469c02)return!![];const _0x5c15f2=_0x469c02 instanceof Date?_0x469c02['getTime']():_0x469c02[_0x39a2b7(0x21a)]?_0x469c02['seconds']*0x3e8:Date['now']();return _0x5c15f2>=_0x1b9f18['muteFromDate'];}function filterComment(_0x51f0c5,_0x43b412,_0x461a05){if(!_0x51f0c5)return'-';if(isUsernameMuted(_0x43b412,_0x461a05))return'Muted.';return _0x51f0c5;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x257424,_0x571575,_0x5ee541){const _0x57a38b='u:'+(_0x5ee541['filterUsername']||'');return'previewCache_'+_0x257424+'_p'+_0x571575+'_'+_0x57a38b;}function getCachedPage(_0x1c9e04){const _0x5b7617=a6_0x23a1,_0x2b7fa1=sessionStorage['getItem'](_0x1c9e04);if(_0x2b7fa1)try{return JSON['parse'](_0x2b7fa1);}catch(_0x1814ea){return console['error'](_0x5b7617(0x20d),_0x1814ea),sessionStorage['removeItem'](_0x1c9e04),null;}return null;}function cachePage(_0x12e4e7,_0x483116){try{sessionStorage['setItem'](_0x12e4e7,JSON['stringify'](_0x483116));}catch(_0x1a5ab1){console['error']('Failed\x20to\x20cache\x20data:',_0x1a5ab1);}}function getEloColor(_0x11a8e9){const _0x2e0777=a6_0x23a1,_0x52b63c=Number(_0x11a8e9);if(_0x52b63c>=0x7d0)return _0x2e0777(0x21d);else{if(_0x52b63c>=0x708)return _0x2e0777(0x21c);else{if(_0x52b63c>=0x640)return'#b9f1fc';else{if(_0x52b63c>=0x578)return'#CD7F32';else return'#808080';}}}}function formatDate(_0x3ed37e,_0x52df43=![]){const _0xc4a55a=a6_0x23a1;if(!_0x3ed37e||!_0x3ed37e['seconds'])return'N/A';const _0x53522c=new Date(_0x3ed37e['seconds']*0x3e8);return _0x52df43?_0x53522c['toLocaleString']():_0x53522c[_0xc4a55a(0x180)]();}function truncateComment(_0x4a6346,_0x42a2b8=0x1e){if(!_0x4a6346)return'-';if(_0x4a6346['length']<=_0x42a2b8)return _0x4a6346;return _0x4a6346['substring'](0x0,_0x42a2b8)+'...';}function formatCommentDate(_0x35dca5){const _0xc73ca5=a6_0x23a1;if(!_0x35dca5||!_0x35dca5['seconds'])return'';const _0x119554=new Date(_0x35dca5[_0xc73ca5(0x21a)]*0x3e8),_0x526881=new Date(),_0x4550cc=Math['abs'](_0x526881-_0x119554),_0x3d53e9=Math['floor'](_0x4550cc/(0x3e8*0x3c*0x3c*0x18));if(_0x3d53e9===0x0)return _0xc73ca5(0x18f);else{if(_0x3d53e9===0x1)return _0xc73ca5(0x1ad);else return _0x3d53e9<0x7?_0x3d53e9+'\x20days\x20ago':_0x119554['toLocaleDateString']();}}function setLoadingIndicator(_0x687e15){const _0x22221f=a6_0x23a1,_0x4bbfe5=document['getElementById']('loading-indicator');if(_0x4bbfe5)_0x4bbfe5[_0x22221f(0x193)]['display']=_0x687e15?'block':_0x22221f(0x194);}function a6_0x303b(){const _0x285bdf=['disabled','docsData','log','approvedMatchesD3','recent-matches-preview','map','info','onclick','{}.constructor(\x22return\x20this\x22)(\x20)','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20','Failed\x20to\x20report\x20comment:\x20','\x20demo\x20links:','active','Anonymous','add','toLocaleDateString','Submit','Delete\x20demo','Winner','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments','gauss-and-mercs','removeItem','dataset','toLowerCase','currentPage','Unknown','display','aria-label','backgroundColor','classList','Today','matchesPerPage','Submitting...','auth','style','none','desc','commentMatchId','.no-comments-message','\x20matching\x20filters','selectedOptions','preview-d2-button','uid','required','key','currentUser','.matches-loading','levels','previewNextPage','commentText','empty','commentPopupTitlePreview','warn','demo','prototype','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?','commentAddOverlay','\x27s\x20Demo','Please\x20enter\x20a\x20comment\x20before\x20submitting','addEventListener','Yesterday','appendChild','Report','+10','disorientation','.player.winner\x20.player-name','demoDescription','.match-card','subgameType','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','current','.comments-container','createElement','Failed\x20to\x20delete\x20comment:\x20','filter-pilots','commentUser','S:\x20','forEach','username','Comments\x20section\x20not\x20found\x20in\x20template','Failed\x20to\x20submit:\x20','color','className','getElementById','content','flex','popup-btn\x20close-btn','Comment\x20from\x20','split','isLoading','filter','addCommentForm','error','block','commentPopupPreview','</small>','max','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','previewPrevPage','mega-match','Unknown\x20User','preventDefault','matchId','comment-overlay','Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.','filter-levels','toString','Please\x20enter\x20a\x20demo\x20link','.option-tab','firstChild','No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages','commentOverlayPreview','commentAddPopup','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','innerHTML','commentPopupContentPreview','subgames','value','.player.loser\x20.player-name','stopPropagation','textContent','approvedAt',',\x20fetching\x20from\x20Firestore','removeAttribute','prev','length','comment','loserUsername','slice','Loser','currentMode','matchComments','.add-comment-btn','setAttribute','click','table','message','docs','trim','15px','toggle','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','querySelector','filterUsername','demo-link','submit','option','div','Page\x20','end','displayName','cursor','demoLink','.matches-loading[style*=\x22color:\x20red\x22]','ratting','filter-toggle-button','Failed\x20to\x20parse\x20cache:','push','next','.option-tab.active','bind','body','enhancedFilters','includes','href','exception','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','winnerUsername','marginTop','seconds','text','#FFD700','#50C878','closeCommentPopupPreview','data','loserOldElo','lastVisible','Error\x20submitting\x20comment:','fusion-match','Demo:\x20','Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'];a6_0x303b=function(){return _0x285bdf;};return a6_0x303b();}export function updatePreviewLadderModeUI(){const _0x309b0d=a6_0x23a1,_0x5f02dc=document[_0x309b0d(0x1c4)]('preview-ladder-mode'),_0x3e4c24=document['getElementById']('preview-d1-button'),_0x228c70=document['getElementById'](_0x309b0d(0x19a)),_0x2d46e3=document[_0x309b0d(0x1c4)]('preview-d3-button');if(_0x5f02dc)_0x5f02dc['textContent']=previewState['currentMode'];if(_0x3e4c24)_0x3e4c24['classList'][_0x309b0d(0x1fd)]('active',previewState[_0x309b0d(0x1f3)]==='D1');if(_0x228c70)_0x228c70['classList']['toggle'](_0x309b0d(0x17d),previewState['currentMode']==='D2');if(_0x2d46e3)_0x2d46e3[_0x309b0d(0x18e)]['toggle']('active',previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x2a5e5d){const _0x45bf3f=a6_0x23a1,_0x2d2f9a=document[_0x45bf3f(0x1c4)](_0x45bf3f(0x1d3)),_0x257b76=document['getElementById'](_0x45bf3f(0x1a1)),_0x436d90=document['getElementById']('previewPageInfo');if(!_0x2d2f9a||!_0x257b76||!_0x436d90)return;_0x436d90['textContent']=_0x45bf3f(0x205)+previewState['currentPage'],_0x2d2f9a['disabled']=previewState['currentPage']<=0x1,_0x257b76[_0x45bf3f(0x171)]=!_0x2a5e5d;}function setPreviewLoadingState(_0x354113){const _0x29ed7a=a6_0x23a1;previewState[_0x29ed7a(0x1ca)]=_0x354113,setLoadingIndicator(_0x354113);const _0x672b1d=document[_0x29ed7a(0x1c4)]('recent-matches-preview'),_0x3d551b=_0x672b1d?_0x672b1d['querySelector'](_0x29ed7a(0x19f)):null,_0x56e033=document['getElementById']('previewPrevPage'),_0x28d46e=document['getElementById'](_0x29ed7a(0x1a1)),_0x526874=document[_0x29ed7a(0x1c4)]('preview-d1-button'),_0x5b1caa=document['getElementById']('preview-d2-button'),_0x2d8257=document[_0x29ed7a(0x1c4)]('applyFilterBtn'),_0x1663d2=document[_0x29ed7a(0x1c4)]('clearFilterBtn');if(_0x3d551b&&!_0x354113)_0x3d551b['style']['display']='none';else _0x3d551b&&_0x354113&&(_0x3d551b['style'][_0x29ed7a(0x18b)]=_0x29ed7a(0x1ce));!_0x354113&&_0x672b1d&&!_0x672b1d['querySelector']('.match-card')&&!_0x672b1d['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x672b1d['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState['filterUsername']?'\x20matching\x20filters':'')+'.</div>');if(_0x56e033)_0x56e033['disabled']=_0x354113||previewState['currentPage']<=0x1;if(_0x28d46e)_0x28d46e['disabled']=_0x354113;if(_0x526874)_0x526874[_0x29ed7a(0x171)]=_0x354113;if(_0x5b1caa)_0x5b1caa['disabled']=_0x354113;if(_0x2d8257)_0x2d8257['disabled']=_0x354113;if(_0x1663d2)_0x1663d2[_0x29ed7a(0x171)]=_0x354113;}function applyClientFilters(_0x405691){const _0x52581e=a6_0x23a1;if(!previewState[_0x52581e(0x200)])return _0x405691;const _0x2f3714=previewState['filterUsername'][_0x52581e(0x188)]();return _0x405691['filter'](_0x3e70f3=>{const _0x1d05e1=_0x52581e,_0x4d8972=(_0x3e70f3['winnerUsername']||'')[_0x1d05e1(0x188)](),_0x32d2c8=(_0x3e70f3['loserUsername']||'')['toLowerCase']();return _0x4d8972['includes'](_0x2f3714)||_0x32d2c8[_0x1d05e1(0x214)](_0x2f3714);});}function applyEnhancedClientFilters(_0x36cb47){if(!hasEnhancedFilters())return _0x36cb47;return _0x36cb47['filter'](_0x3bf32b=>{const _0x517f34=a6_0x23a1;if(previewState[_0x517f34(0x213)]['pilots']){const _0x56714c=previewState[_0x517f34(0x213)]['pilots'][_0x517f34(0x188)](),_0x366a50=(_0x3bf32b[_0x517f34(0x218)]||'')['toLowerCase'](),_0x43a022=(_0x3bf32b[_0x517f34(0x1f0)]||'')['toLowerCase']();if(!_0x366a50['includes'](_0x56714c)&&!_0x43a022[_0x517f34(0x214)](_0x56714c))return![];}if(previewState[_0x517f34(0x213)]['levels']){const _0x2a7836=previewState[_0x517f34(0x213)]['levels']['toLowerCase'](),_0x116611=(_0x3bf32b['mapPlayed']||'')['toLowerCase']();if(!_0x116611[_0x517f34(0x214)](_0x2a7836))return![];}if(previewState['enhancedFilters']['subgames']['length']>0x0){const _0x149228=_0x3bf32b[_0x517f34(0x1b5)]||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames'][_0x517f34(0x214)](_0x149228))return![];}return!![];});}function hasEnhancedFilters(){const _0x42b4aa=a6_0x23a1;return previewState['enhancedFilters']['pilots']||previewState['enhancedFilters']['levels']||previewState['enhancedFilters'][_0x42b4aa(0x1e5)][_0x42b4aa(0x1ee)]>0x0;}function clearEnhancedFilters(){const _0x5171be=a6_0x23a1;previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document['getElementById']('filter-pilots')['value']='',document['getElementById'](_0x5171be(0x1da))[_0x5171be(0x1e6)]='';const _0x2119fe=document[_0x5171be(0x1c4)]('filter-subgames');for(let _0x2b2ea1 of _0x2119fe['options']){_0x2b2ea1['selected']=![];}}function jumpToPage(_0x286211){const _0x2bd417=a6_0x23a1,_0x5843ae=document['getElementById']('jump-to-page'),_0x3ec7c9=previewState[_0x2bd417(0x189)];let _0x464e59=_0x3ec7c9;switch(_0x286211){case'start':_0x464e59=0x1;break;case _0x2bd417(0x206):_0x464e59=Math['max'](_0x3ec7c9+0xa,previewState['totalPages']||_0x3ec7c9+0xa);break;case'+1':_0x464e59=_0x3ec7c9+0x1;break;case'+5':_0x464e59=_0x3ec7c9+0x5;break;case _0x2bd417(0x1b0):_0x464e59=_0x3ec7c9+0xa;break;case'-1':_0x464e59=Math[_0x2bd417(0x1d1)](0x1,_0x3ec7c9-0x1);break;case'-5':_0x464e59=Math['max'](0x1,_0x3ec7c9-0x5);break;case'-10':_0x464e59=Math[_0x2bd417(0x1d1)](0x1,_0x3ec7c9-0xa);break;case'input':const _0x485bd3=parseInt(_0x5843ae['value']);_0x485bd3&&_0x485bd3>0x0&&(_0x464e59=_0x485bd3,_0x5843ae['value']='');break;}_0x464e59!==_0x3ec7c9&&_0x464e59>0x0&&(previewState[_0x2bd417(0x189)]=_0x464e59,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0xb0d830='current'){const _0x204875=a6_0x23a1,_0x42894c=document['getElementById']('recent-matches-preview'),_0x1f06ac=document['getElementById']('match-card-template');if(previewState[_0x204875(0x1ca)]||!_0x42894c||!_0x1f06ac)return;_0xb0d830==='current'&&(console[_0x204875(0x173)]('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)['forEach'](_0x1de9b8=>{const _0x20e8f4=_0x204875;_0x1de9b8['includes']('previewCache_'+previewState['currentMode'])&&sessionStorage[_0x20e8f4(0x186)](_0x1de9b8);}));let _0x3bfc54=previewState['currentPage'];if(_0xb0d830==='next')_0x3bfc54++;else{if(_0xb0d830===_0x204875(0x1ed))_0x3bfc54--;else _0xb0d830==='current'&&(_0x3bfc54=0x1,previewState['firstVisible']=null,previewState['lastVisible']=null);}if(_0x3bfc54<0x1)_0x3bfc54=0x1;const _0x16989b=previewState['currentPage'];previewState['currentPage']=_0x3bfc54,updatePreviewPaginationControls(!![]);const _0x5b93cd={'filterUsername':previewState['filterUsername']},_0x38e5aa=getCacheKey(previewState[_0x204875(0x1f3)],_0x3bfc54,_0x5b93cd),_0x28f12a=_0xb0d830!=='current'?getCachedPage(_0x38e5aa):null;if(_0x28f12a){console[_0x204875(0x173)]('Rendering\x20page\x20'+_0x3bfc54+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0x28f12a[_0x204875(0x172)]),updatePreviewPaginationControls(_0x28f12a['hasNextPage']),setPreviewLoadingState(![]);return;}console['log']('Cache\x20miss\x20for\x20page\x20'+_0x3bfc54+_0x204875(0x1eb)),setPreviewLoadingState(!![]),_0x42894c['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x4cfff7=previewState['currentMode']==='D1'?'approvedMatches':previewState['currentMode']==='D2'?'approvedMatchesD2':_0x204875(0x174),_0x39d5c4=previewState['currentMode']==='D1'?'createdAt':'approvedAt';try{const _0x54452a=collection(window['db'],_0x4cfff7);let _0x26b447=[orderBy(_0x39d5c4,_0x204875(0x195))];if(_0x3bfc54===0x1)console['log']('Loading\x20first\x20page\x20from\x20Firestore'),_0x26b447[_0x204875(0x20e)](limit(previewState['matchesPerPage']));else{if(_0xb0d830==='next'&&previewState['lastVisible'])console['log']('Loading\x20next\x20page\x20using\x20cursor'),_0x26b447[_0x204875(0x20e)](startAfter(previewState['lastVisible'])),_0x26b447['push'](limit(previewState['matchesPerPage']));else{console['log'](_0x204875(0x1df));const _0xf399f0=_0x3bfc54*previewState['matchesPerPage'];_0x26b447['push'](limit(_0xf399f0));}}const _0x52304e=query(_0x54452a,..._0x26b447),_0x5e9fe0=await getDocs(_0x52304e);let _0x4f5c97=_0x5e9fe0['docs'];if(_0x3bfc54>0x1&&_0xb0d830!==_0x204875(0x20f)){const _0x30d9b8=(_0x3bfc54-0x1)*previewState['matchesPerPage'];_0x4f5c97=_0x4f5c97[_0x204875(0x1f1)](_0x30d9b8,_0x30d9b8+previewState['matchesPerPage']);}if(_0x4f5c97['length']===0x0){console['log']('No\x20results\x20found\x20for\x20this\x20page');_0xb0d830==='next'&&(previewState[_0x204875(0x189)]=_0x16989b,updatePreviewPaginationControls(![]));_0x42894c['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?_0x204875(0x198):'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x4f5c97[0x0],previewState[_0x204875(0x221)]=_0x4f5c97[_0x4f5c97['length']-0x1];const _0x214cc9=_0x4f5c97['map'](_0x353096=>({'id':_0x353096['id'],..._0x353096['data']()}));let _0x3b7e27=![];if(_0x4f5c97['length']===previewState[_0x204875(0x190)]){const _0x6d774b=query(_0x54452a,orderBy(_0x39d5c4,_0x204875(0x195)),startAfter(previewState['lastVisible']),limit(0x1)),_0x183215=await getDocs(_0x6d774b);_0x3b7e27=!_0x183215[_0x204875(0x1a3)];}const _0x46f64f=applyClientFilters(_0x214cc9),_0x9b5ff7={'docsData':_0x214cc9,'hasNextPage':_0x3b7e27};cachePage(getCacheKey(previewState['currentMode'],previewState[_0x204875(0x189)],_0x5b93cd),_0x9b5ff7);if(_0x3bfc54>0x1&&_0xb0d830!=='next')for(let _0x52778f=0x1;_0x52778f<_0x3bfc54;_0x52778f++){const _0x2b376d=(_0x52778f-0x1)*previewState[_0x204875(0x190)],_0x123911=_0x2b376d+previewState[_0x204875(0x190)],_0x3732f9=_0x5e9fe0[_0x204875(0x1fa)]['slice'](_0x2b376d,_0x123911);if(_0x3732f9['length']>0x0){const _0xc275d2=_0x3732f9['map'](_0x32c426=>({'id':_0x32c426['id'],..._0x32c426['data']()})),_0x507611=!![];cachePage(getCacheKey(previewState['currentMode'],_0x52778f,_0x5b93cd),{'docsData':_0xc275d2,'hasNextPage':_0x507611}),console['log']('Cached\x20intermediary\x20page\x20'+_0x52778f);}}_0x46f64f[_0x204875(0x1ee)]===0x0&&previewState[_0x204875(0x200)]?_0x42894c['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState[_0x204875(0x200)]+'\x22</div>':renderMatchCards(_0x46f64f),updatePreviewPaginationControls(_0x3b7e27);}catch(_0x5938fa){console[_0x204875(0x1cd)]('Error\x20fetching\x20'+previewState['currentMode']+'\x20matches:',_0x5938fa),_0x42894c['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x5938fa['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x16989b;}finally{setPreviewLoadingState(![]);}}function a6_0x23a1(_0x2631c9,_0x35c7cb){const _0x21d48d=a6_0x303b();return a6_0x23a1=function(_0x38df41,_0x4381d5){_0x38df41=_0x38df41-0x171;let _0x303bca=_0x21d48d[_0x38df41];return _0x303bca;},a6_0x23a1(_0x2631c9,_0x35c7cb);}async function renderMatchCards(_0x5002ed){const _0x5d70cb=a6_0x23a1,_0x3bbafd=document['getElementById'](_0x5d70cb(0x175)),_0x48c24b=document['getElementById']('match-card-template');if(!_0x3bbafd||!_0x48c24b)return;!_0x3bbafd['querySelector'](_0x5d70cb(0x20a))&&(_0x3bbafd['innerHTML']='');if(!_0x5002ed||_0x5002ed['length']===0x0){if(!_0x3bbafd['querySelector'](_0x5d70cb(0x20a))){const _0x2149ad=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?'\x20matching\x20filters':'';_0x3bbafd['innerHTML']=_0x5d70cb(0x217)+_0x2149ad+'.</div>';}return;}const _0x26704f=applyEnhancedClientFilters(_0x5002ed);if(_0x26704f['length']===0x0){_0x3bbafd['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x13d3ce=_0x26704f[_0x5d70cb(0x176)](_0x12a3a1=>getAllCommentsForMatch(_0x12a3a1['id']));let _0x3a201c=[];try{_0x3a201c=await Promise['all'](_0x13d3ce);}catch(_0x3c86cc){console['error']('Error\x20fetching\x20comments\x20batch:',_0x3c86cc),_0x3a201c=_0x26704f[_0x5d70cb(0x176)](()=>[]);}const _0x2e81c9={};_0x3a201c['forEach']((_0x4efe15,_0x1a4ed0)=>{_0x2e81c9[_0x26704f[_0x1a4ed0]['id']]=_0x4efe15||[];}),_0x26704f['forEach'](_0x5bd228=>{const _0x3fc7d5=_0x5d70cb,_0xefcb29=_0x48c24b[_0x3fc7d5(0x1c5)]['cloneNode'](!![]),_0xf9a390=_0xefcb29['querySelector']('.match-display-wrapper'),_0x536fa3=_0xefcb29[_0x3fc7d5(0x1ff)](_0x3fc7d5(0x1b4)),_0x1867bd=getEloRankClass(_0x5bd228['winnerOldElo']);_0x536fa3['classList'][_0x3fc7d5(0x17f)]('winner-'+_0x1867bd),_0x536fa3[_0x3fc7d5(0x1ff)]('.match-map')['textContent']=_0x5bd228['mapPlayed']||'Unknown\x20Map',_0x536fa3['querySelector']('.match-date')[_0x3fc7d5(0x1e9)]=formatDate(_0x5bd228['approvedAt']||_0x5bd228['createdAt']);const _0x4c05f5=_0x536fa3['querySelector'](_0x3fc7d5(0x1b2));_0x4c05f5['textContent']=_0x5bd228[_0x3fc7d5(0x218)]||'Unknown',_0x4c05f5['style']['color']=getEloColor(_0x5bd228['winnerOldElo']),_0x536fa3[_0x3fc7d5(0x1ff)]('.player.winner\x20.player-score')[_0x3fc7d5(0x1e9)]=_0x5bd228['winnerScore']??0x0;const _0x37ae50=_0x536fa3['querySelector']('.player.winner\x20.player-suicides'),_0x1cdfe4=_0x5bd228['winnerSuicides']||0x0;_0x37ae50['textContent']=_0x3fc7d5(0x1bd)+_0x1cdfe4;const _0x3eb164=_0x536fa3['querySelector'](_0x3fc7d5(0x1e7));_0x3eb164[_0x3fc7d5(0x1e9)]=_0x5bd228[_0x3fc7d5(0x1f0)]||_0x3fc7d5(0x18a),_0x3eb164['style']['color']=getEloColor(_0x5bd228['loserOldElo']),_0x536fa3[_0x3fc7d5(0x1ff)]('.player.loser\x20.player-score')['textContent']=_0x5bd228['loserScore']??0x0;const _0x4392e6=_0x536fa3[_0x3fc7d5(0x1ff)]('.player.loser\x20.player-suicides'),_0x25add9=_0x5bd228['loserSuicides']||0x0;_0x4392e6['textContent']=_0x3fc7d5(0x1bd)+_0x25add9;const _0x16868b=_0x536fa3['querySelector']('.match-subgame');if(_0x16868b){if(_0x5bd228['subgameType']&&_0x5bd228['subgameType'][_0x3fc7d5(0x1fb)]()!==''){_0x16868b['textContent']=_0x5bd228['subgameType'],_0x16868b['style']['display']=_0x3fc7d5(0x1ce);const _0x14a786=getSubgameClass(_0x5bd228['subgameType']);_0x14a786&&_0x16868b['classList'][_0x3fc7d5(0x17f)](_0x14a786);}else _0x16868b['textContent']='Standard\x20Match',_0x16868b[_0x3fc7d5(0x193)][_0x3fc7d5(0x18b)]='block',_0x16868b[_0x3fc7d5(0x193)]['opacity']='0.6';}const _0x5e0b32=_0x536fa3['querySelector']('.comment.winner-comment'),_0x56cd29=_0x536fa3['querySelector']('.comment.loser-comment'),_0x2dc205=_0x5bd228['winnerComment']||'',_0x4fdf42=_0x5bd228['loserComment']||'',_0x16c3a7=_0x5bd228[_0x3fc7d5(0x1ea)]||_0x5bd228['createdAt'],_0x4834e1=filterComment(_0x2dc205,_0x5bd228['winnerUsername'],_0x16c3a7),_0x4ec8d8=filterComment(_0x4fdf42,_0x5bd228['loserUsername'],_0x16c3a7);_0x5e0b32[_0x3fc7d5(0x1e9)]='\x22'+truncateComment(_0x2dc205)+'\x22',_0x56cd29[_0x3fc7d5(0x1e9)]='\x22'+truncateComment(_0x4fdf42)+'\x22';_0x2dc205&&!isUsernameMuted(_0x5bd228[_0x3fc7d5(0x218)],_0x16c3a7)?_0x5e0b32[_0x3fc7d5(0x178)]=()=>showPreviewCommentPopup(_0x4834e1,_0x5bd228[_0x3fc7d5(0x218)]||_0x3fc7d5(0x183),getEloColor(_0x5bd228['winnerOldElo'])):(_0x5e0b32[_0x3fc7d5(0x1e9)]=_0x4834e1==='Muted.'?'Muted.':'-',_0x5e0b32['style'][_0x3fc7d5(0x208)]='default',_0x5e0b32[_0x3fc7d5(0x178)]=null);_0x4fdf42&&!isUsernameMuted(_0x5bd228['loserUsername'])?_0x56cd29['onclick']=()=>showPreviewCommentPopup(_0x4ec8d8,_0x5bd228['loserUsername']||_0x3fc7d5(0x1f2),getEloColor(_0x5bd228[_0x3fc7d5(0x220)])):(_0x56cd29['textContent']=_0x4ec8d8==='Muted.'?'Muted.':'-',_0x56cd29['style']['cursor']='default',_0x56cd29['onclick']=null);const _0x4f0894=_0xf9a390?.['querySelector']('.community-comments-section');if(!_0x4f0894)console[_0x3fc7d5(0x1a5)](_0x3fc7d5(0x1c0));else{const _0x172f37=_0x4f0894[_0x3fc7d5(0x1ff)](_0x3fc7d5(0x1b8)),_0x107f33=_0x172f37?.['querySelector'](_0x3fc7d5(0x197)),_0xdfaa41=_0x4f0894['querySelector'](_0x3fc7d5(0x1f5));if(_0x172f37){while(_0x172f37['firstChild']&&_0x172f37['firstChild']!==_0x107f33){_0x172f37['removeChild'](_0x172f37['firstChild']);}_0xdfaa41&&_0xdfaa41[_0x3fc7d5(0x1ac)]('click',()=>{showAddCommentPopup(_0x5bd228['id']);});const _0x194bc3=_0x2e81c9[_0x5bd228['id']]||[];if(_0x194bc3['length']>0x0){if(_0x107f33)_0x107f33['style'][_0x3fc7d5(0x18b)]='none';const _0x125eaa=(_0x323cb6,_0x181d41)=>{const _0x2f0968=_0x3fc7d5,_0x27cd00=_0x323cb6[_0x2f0968(0x1c9)]('\x20');if(_0x27cd00['length']<=_0x181d41)return _0x323cb6;return _0x27cd00[_0x2f0968(0x1f1)](0x0,_0x181d41)['join']('\x20')+'...';};_0x194bc3['forEach'](_0xdbde4c=>{const _0x4ef3e7=_0x3fc7d5,_0x564bd0=document[_0x4ef3e7(0x1b9)](_0x4ef3e7(0x204));if(_0xdbde4c['type']===_0x4ef3e7(0x1a6)){_0x564bd0[_0x4ef3e7(0x1c3)]=_0x4ef3e7(0x201),_0x564bd0['innerHTML']=_0x4ef3e7(0x1d2)+_0xdbde4c['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0xdbde4c['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0xdbde4c['description']||'No\x20description\x20provided')+_0x4ef3e7(0x1e2);const _0x37c03a=window['auth'][_0x4ef3e7(0x19e)],_0x211e63=_0x37c03a&&_0xdbde4c['userId']===_0x37c03a['uid'];if(_0x211e63){const _0x5aee0f=document['createElement']('button');_0x5aee0f[_0x4ef3e7(0x1c3)]='delete-comment-btn',_0x5aee0f['innerHTML']='×',_0x5aee0f[_0x4ef3e7(0x1f6)](_0x4ef3e7(0x18c),_0x4ef3e7(0x182)),_0x5aee0f['addEventListener']('click',_0x362cef=>{const _0x4e6968=_0x4ef3e7;_0x362cef['preventDefault'](),_0x362cef[_0x4e6968(0x1e8)](),deleteComment(_0xdbde4c['id'],_0x564bd0);}),_0x564bd0['appendChild'](_0x5aee0f);}}else{_0x564bd0[_0x4ef3e7(0x1c3)]='comment-item';const _0x4fc094=isUsernameMuted(_0xdbde4c['username'],_0xdbde4c['timestamp']),_0x59014d=_0x4fc094?'Muted.':_0x125eaa(_0xdbde4c[_0x4ef3e7(0x21b)]||'',0xf),_0x420707=_0xdbde4c[_0x4ef3e7(0x1bf)]||_0x4ef3e7(0x17e),_0x5b9988=window['auth']['currentUser'],_0x2f767e=_0x5b9988&&_0xdbde4c['userId']===_0x5b9988[_0x4ef3e7(0x19b)];let _0x346103='';_0x2f767e&&(_0x346103='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');_0x564bd0['innerHTML']=_0x346103+'<strong>'+_0x420707+':</strong>\x20\x22'+_0x59014d+'\x22';if(_0x2f767e){const _0x45ade3=_0x564bd0['querySelector']('.delete-comment-btn');_0x45ade3&&_0x45ade3['addEventListener']('click',_0x33ddcd=>{_0x33ddcd['stopPropagation'](),deleteComment(_0xdbde4c['id'],_0x564bd0);});}!_0x4fc094?_0x564bd0[_0x4ef3e7(0x1ac)]('click',()=>{showFullCommentLightbox(_0xdbde4c);}):_0x564bd0['style']['cursor']='default';}_0x172f37['insertBefore'](_0x564bd0,_0x172f37[_0x4ef3e7(0x1de)]);});}else{if(_0x107f33)_0x107f33[_0x3fc7d5(0x193)][_0x3fc7d5(0x18b)]=_0x3fc7d5(0x1ce);}}}const _0x12f143=_0x536fa3['querySelector']('.match-demo-links');if(_0x12f143){const _0x349907=_0x536fa3[_0x3fc7d5(0x1ff)]('.winner-demo-link'),_0x21edcc=_0x536fa3['querySelector']('.loser-demo-link'),_0x22fd07=_0x5bd228['winnerDemoLink']||null,_0x17f31f=_0x5bd228['loserDemoLink']||_0x5bd228['demoLink']||null;console[_0x3fc7d5(0x173)]('Match\x20'+_0x5bd228['id']+_0x3fc7d5(0x17c),{'winner':_0x22fd07,'loser':_0x17f31f}),_0x349907&&(_0x22fd07?(_0x349907[_0x3fc7d5(0x215)]=_0x22fd07,_0x349907['style']['display']=_0x3fc7d5(0x1c6),_0x349907['title']=_0x5bd228['winnerUsername']+_0x3fc7d5(0x1aa)):_0x349907['style'][_0x3fc7d5(0x18b)]='none'),_0x21edcc&&(_0x17f31f?(_0x21edcc['href']=_0x17f31f,_0x21edcc['style'][_0x3fc7d5(0x18b)]='flex',_0x21edcc['title']=_0x5bd228['loserUsername']+'\x27s\x20Demo'):_0x21edcc['style']['display']='none'),_0x22fd07&&_0x349907||_0x17f31f&&_0x21edcc?_0x12f143['style']['display']='flex':_0x12f143['style']['display']='none';}_0x3bbafd['appendChild'](_0xefcb29);});}function getSubgameClass(_0x2b0f67){const _0x88df5c=a6_0x23a1,_0x94049a={'Fusion\x20Match':_0x88df5c(0x223),'≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':'blind-match','Rematch':'rematch','Disorientation':_0x88df5c(0x1b1),'Ratting':_0x88df5c(0x20b),'Altered\x20Powerups':'altered-powerups','Mega\x20Match':_0x88df5c(0x1d4),'Dogfight':'dogfight','Gauss\x20and\x20Mercs':_0x88df5c(0x185)};return _0x94049a[_0x2b0f67]||'';}async function deleteComment(_0x1ec5f6,_0x6e30bd){const _0x4c9ba8=a6_0x23a1,_0x4565a2=window['auth'][_0x4c9ba8(0x19e)];if(!_0x4565a2){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm(_0x4c9ba8(0x1a8)))return;try{const _0x39b4f0=doc(window['db'],'matchComments',_0x1ec5f6),_0x38e0f9=await getDoc(_0x39b4f0);if(!_0x38e0f9['exists']()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x30427b=_0x38e0f9['data']();if(_0x30427b['userId']!==_0x4565a2[_0x4c9ba8(0x19b)]){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x39b4f0);if(_0x6e30bd&&_0x6e30bd['parentNode']){_0x6e30bd['parentNode']['removeChild'](_0x6e30bd);const _0x4c426f=_0x6e30bd['closest']('.comments-container');if(_0x4c426f&&!_0x4c426f['querySelector']('.comment-item')){const _0x589425=_0x4c426f[_0x4c9ba8(0x1ff)]('.no-comments-message');if(_0x589425)_0x589425['style']['display']='block';}}console['log']('Comment\x20deleted\x20successfully');}catch(_0x3f0f19){console[_0x4c9ba8(0x1cd)]('Error\x20deleting\x20comment:',_0x3f0f19),alert(_0x4c9ba8(0x1ba)+_0x3f0f19[_0x4c9ba8(0x1f9)]);}}async function getAllCommentsForMatch(_0x129f1a){const _0x163930=a6_0x23a1;if(!_0x129f1a)return[];try{const _0xbcc933=collection(window['db'],'matchComments'),_0x15bfb1=query(_0xbcc933,where('matchId','==',_0x129f1a),orderBy('timestamp','desc')),_0x22a94e=await getDocs(_0x15bfb1);if(_0x22a94e[_0x163930(0x1a3)])return[];return _0x22a94e[_0x163930(0x1fa)][_0x163930(0x176)](_0x537265=>({'id':_0x537265['id'],..._0x537265[_0x163930(0x21f)]()}));}catch(_0x1eea92){return console['error']('Error\x20fetching\x20comments:',_0x1eea92),[];}}async function submitComment(_0x3058a2){const _0x255d6a=a6_0x23a1;_0x3058a2['preventDefault']();if(!window[_0x255d6a(0x192)]||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert(_0x255d6a(0x1fe));return;}const _0x4379c4=window['auth']['currentUser'];if(!_0x4379c4){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x2648df=document['getElementById'](_0x255d6a(0x196))?.[_0x255d6a(0x1e6)],_0x19427f=document['getElementById']('commentText')?.['value']?.['trim']();if(!_0x2648df||!_0x19427f){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x22c854=_0x19427f[_0x255d6a(0x1c9)](/\s+/)['filter'](_0x161863=>_0x161863['length']>0x0)[_0x255d6a(0x1ee)];if(_0x22c854>0xf){alert(_0x255d6a(0x1b6));return;}const _0x4c70b2=document['querySelector']('.submit-comment-btn');_0x4c70b2&&(_0x4c70b2['disabled']=!![],_0x4c70b2['textContent']='Submitting...');try{let _0x45f38e='Anonymous';try{const _0x1475ea=doc(window['db'],'userProfiles',_0x4379c4['uid']),_0x206649=await getDoc(_0x1475ea);if(_0x206649['exists']()){const _0x2c9f3c=_0x206649['data']();_0x2c9f3c['username']&&(_0x45f38e=_0x2c9f3c['username']);}_0x45f38e==='Anonymous'&&_0x4379c4[_0x255d6a(0x207)]&&(_0x45f38e=_0x4379c4[_0x255d6a(0x207)]);}catch(_0x338923){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x338923),_0x4379c4[_0x255d6a(0x207)]&&(_0x45f38e=_0x4379c4['displayName']);}const _0x162fd4={'matchId':_0x2648df,'userId':_0x4379c4[_0x255d6a(0x19b)],'username':_0x45f38e,'text':_0x19427f,'timestamp':serverTimestamp()};console[_0x255d6a(0x173)]('Submitting\x20comment\x20as:',_0x45f38e);const _0x228a20=collection(window['db'],'matchComments');await addDoc(_0x228a20,_0x162fd4),console['log']('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x1bea8f){console[_0x255d6a(0x1cd)](_0x255d6a(0x222),_0x1bea8f),alert('Failed\x20to\x20add\x20comment:\x20'+_0x1bea8f['message']),_0x4c70b2&&(_0x4c70b2['disabled']=![],_0x4c70b2['textContent']=_0x255d6a(0x181));}}function closeAddCommentPopup(){const _0x517fe8=a6_0x23a1,_0x3fcb8b=document['getElementById']('commentAddPopup'),_0x55e4c4=document['getElementById'](_0x517fe8(0x1a9));if(_0x3fcb8b)_0x3fcb8b['style']['display']='none';if(_0x55e4c4)_0x55e4c4['style'][_0x517fe8(0x18b)]='none';}function showAddCommentPopup(_0x1e1e34){const _0x59abec=a6_0x23a1,_0x54043a=window[_0x59abec(0x192)]['currentUser'];if(!_0x54043a){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo');return;}let _0x22a2a4=document[_0x59abec(0x1c4)](_0x59abec(0x1e1)),_0x224bab=document[_0x59abec(0x1c4)]('commentAddOverlay');!_0x22a2a4&&(_0x22a2a4=document[_0x59abec(0x1b9)]('div'),_0x22a2a4['id']=_0x59abec(0x1e1),_0x22a2a4['className']='comment-popup',document[_0x59abec(0x212)]['appendChild'](_0x22a2a4));!_0x224bab&&(_0x224bab=document['createElement']('div'),_0x224bab['id']=_0x59abec(0x1a9),_0x224bab[_0x59abec(0x1c3)]=_0x59abec(0x1d8),document['body'][_0x59abec(0x1ae)](_0x224bab));_0x22a2a4[_0x59abec(0x1e3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x1e1e34+_0x59abec(0x17a),_0x22a2a4['style']['display']='block',_0x224bab[_0x59abec(0x193)]['display']=_0x59abec(0x1ce),document['getElementById']('closeAddCommentPopup')['addEventListener']('click',closeAddCommentPopup),_0x224bab[_0x59abec(0x1ac)]('click',closeAddCommentPopup);const _0x219430=_0x22a2a4['querySelectorAll'](_0x59abec(0x1dd));_0x219430[_0x59abec(0x1be)](_0x23d5cf=>{const _0x1125a0=_0x59abec;_0x23d5cf['addEventListener'](_0x1125a0(0x1f7),function(){const _0xff40ad=_0x1125a0;_0x219430['forEach'](_0x28d49a=>_0x28d49a[_0xff40ad(0x18e)]['remove'](_0xff40ad(0x17d))),document['querySelectorAll']('.option-content')['forEach'](_0x3313a3=>_0x3313a3['style']['display']=_0xff40ad(0x194)),this['classList'][_0xff40ad(0x17f)]('active');const _0x3f0a5f=this['dataset']['option'];document['getElementById'](_0x3f0a5f+'Option')['style'][_0xff40ad(0x18b)]='block',_0x3f0a5f==='demo'?(document[_0xff40ad(0x1c4)]('demoLink')['setAttribute'](_0xff40ad(0x19c),''),document[_0xff40ad(0x1c4)]('commentText')[_0xff40ad(0x1ec)]('required')):(document['getElementById']('demoLink')['removeAttribute']('required'),document['getElementById']('commentText')['setAttribute']('required',''));});}),document[_0x59abec(0x1c4)](_0x59abec(0x1a2))[_0x59abec(0x1f6)]('required',''),document[_0x59abec(0x1c4)](_0x59abec(0x209))['removeAttribute']('required'),setupWordCounter('commentText','wordCount',0xf),setupWordCounter('demoDescription','demoWordCount',0x14),document['getElementById']('addCommentForm')['addEventListener'](_0x59abec(0x202),submitCommentOrDemo);}function setupWordCounter(_0x5298b6,_0x3519ab,_0x3e1e36){const _0x2b90e0=a6_0x23a1,_0xab9504=document['getElementById'](_0x5298b6),_0x5cb528=document[_0x2b90e0(0x1c4)](_0x3519ab);if(!_0xab9504||!_0x5cb528)return;_0x58ea64(),_0xab9504['addEventListener']('input',_0x58ea64);function _0x58ea64(){const _0x392c48=_0x2b90e0,_0x19e118=_0xab9504['value']['trim'](),_0x573252=_0x19e118?_0x19e118['split'](/\s+/)['filter'](_0x33dc2f=>_0x33dc2f['length']>0x0)[_0x392c48(0x1ee)]:0x0;_0x5cb528[_0x392c48(0x1e9)]=_0x573252,_0x573252>_0x3e1e36?_0x5cb528['style']['color']='#ff4444':_0x5cb528[_0x392c48(0x193)][_0x392c48(0x1c2)]='#aaa';}}async function submitCommentOrDemo(_0x5b14df){const _0x16d543=a6_0x23a1;_0x5b14df[_0x16d543(0x1d6)]();if(!window[_0x16d543(0x192)]||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0xb894e6=window['auth']['currentUser'];if(!_0xb894e6){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x33ecb0=document['getElementById']('commentMatchId')['value'],_0x366dee=document['querySelector'](_0x16d543(0x210))['dataset'][_0x16d543(0x203)];let _0x53cc63=_0x16d543(0x17e);try{const _0x596de6=doc(window['db'],'userProfiles',_0xb894e6['uid']),_0xfbd3bf=await getDoc(_0x596de6);if(_0xfbd3bf['exists']()){const _0x273451=_0xfbd3bf['data']();_0x273451['username']&&(_0x53cc63=_0x273451['username']);}_0x53cc63==='Anonymous'&&_0xb894e6['displayName']&&(_0x53cc63=_0xb894e6['displayName']);}catch(_0x17f3fc){console['warn']('Failed\x20to\x20fetch\x20username:',_0x17f3fc),_0xb894e6[_0x16d543(0x207)]&&(_0x53cc63=_0xb894e6['displayName']);}const _0x29a660=document['querySelector']('.submit-comment-btn');_0x29a660&&(_0x29a660['disabled']=!![],_0x29a660['textContent']=_0x16d543(0x191));try{if(_0x366dee==='comment'){const _0x48812a=document['getElementById']('commentText')['value'][_0x16d543(0x1fb)]();if(!_0x48812a){alert(_0x16d543(0x1ab)),_0x29a660['disabled']=![],_0x29a660['textContent']='Submit';return;}const _0x5c425b=_0x48812a['split'](/\s+/)[_0x16d543(0x1cb)](_0xda0c33=>_0xda0c33[_0x16d543(0x1ee)]>0x0)['length'];if(_0x5c425b>0xf){alert(_0x16d543(0x1b6)),_0x29a660['disabled']=![],_0x29a660[_0x16d543(0x1e9)]='Submit';return;}const _0x1fc456={'matchId':_0x33ecb0,'userId':_0xb894e6['uid'],'username':_0x53cc63,'text':_0x48812a,'type':_0x16d543(0x1ef),'timestamp':serverTimestamp()},_0x73638=collection(window['db'],_0x16d543(0x1f4));await addDoc(_0x73638,_0x1fc456);}else{const _0x32d4e0=document['getElementById']('demoLink')['value']['trim'](),_0x2203c4=document[_0x16d543(0x1c4)](_0x16d543(0x1b3))[_0x16d543(0x1e6)]['trim']()||'Demo\x20link';if(!_0x32d4e0){alert(_0x16d543(0x1dc)),_0x29a660['disabled']=![],_0x29a660['textContent']='Submit';return;}try{new URL(_0x32d4e0);}catch(_0x5a7f57){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x29a660[_0x16d543(0x171)]=![],_0x29a660['textContent']='Submit';return;}const _0x1b9818=_0x2203c4['split'](/\s+/)['filter'](_0x51c50e=>_0x51c50e['length']>0x0)['length'];if(_0x1b9818>0x14){alert(_0x16d543(0x1d9)),_0x29a660[_0x16d543(0x171)]=![],_0x29a660['textContent']=_0x16d543(0x181);return;}const _0x561412={'matchId':_0x33ecb0,'userId':_0xb894e6[_0x16d543(0x19b)],'username':_0x53cc63,'demoLink':_0x32d4e0,'description':_0x2203c4,'type':'demo','text':_0x16d543(0x224)+_0x2203c4,'timestamp':serverTimestamp()},_0x345b38=collection(window['db'],'matchComments');await addDoc(_0x345b38,_0x561412);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x3b51d2){console[_0x16d543(0x1cd)]('Error\x20submitting:',_0x3b51d2),alert(_0x16d543(0x1c1)+_0x3b51d2['message']),_0x29a660&&(_0x29a660['disabled']=![],_0x29a660['textContent']='Submit');}}function getEloRankClass(_0xea6060){const _0x432f5c=Number(_0xea6060);if(_0x432f5c>=0x7d0)return'emerald';else{if(_0x432f5c>=0x708)return'gold';else{if(_0x432f5c>=0x640)return'silver';else{if(_0x432f5c>=0x578)return'bronze';else return'unranked';}}}}function showPreviewCommentPopup(_0x4c725e,_0x46c816,_0xb71c9c='#fff'){const _0x4e137f=a6_0x23a1,_0x345b09=document['getElementById'](_0x4e137f(0x1cf)),_0x16327e=document['getElementById']('commentOverlayPreview'),_0x2da120=document[_0x4e137f(0x1c4)](_0x4e137f(0x1a4)),_0x7c37cf=document['getElementById'](_0x4e137f(0x1e4)),_0x5d0af3=document['getElementById']('reportCommentButton');if(!_0x345b09||!_0x16327e||!_0x2da120||!_0x7c37cf||!_0x5d0af3)return;_0x345b09['dataset']['commentText']=_0x4c725e,_0x345b09[_0x4e137f(0x187)][_0x4e137f(0x1bc)]=_0x46c816,_0x2da120[_0x4e137f(0x193)]['color']=_0xb71c9c,_0x2da120['textContent']='Comment\x20from\x20'+_0x46c816,_0x7c37cf[_0x4e137f(0x1e9)]=_0x4c725e,_0x5d0af3[_0x4e137f(0x178)]=reportComment,_0x345b09['style'][_0x4e137f(0x18b)]='block',_0x16327e['style']['display']=_0x4e137f(0x1ce);}function closePreviewCommentPopup(){const _0x1cfad0=a6_0x23a1,_0x1255e5=document['getElementById']('commentPopupPreview'),_0x3cc1a5=document['getElementById'](_0x1cfad0(0x1e0));if(_0x1255e5)_0x1255e5['style']['display']='none';if(_0x3cc1a5)_0x3cc1a5['style'][_0x1cfad0(0x18b)]=_0x1cfad0(0x194);}async function reportComment(){const _0xec661=a6_0x23a1,_0x1d6bdd=window['auth']['currentUser'];if(!_0x1d6bdd){alert(_0xec661(0x184));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0x5e6b3d=document['getElementById'](_0xec661(0x1cf)),_0x45f159={'commentAuthor':_0x5e6b3d['dataset']['commentUser']||_0xec661(0x1d5),'commentText':_0x5e6b3d[_0xec661(0x187)]['commentText']||'','matchId':previewState['currentMatchId']||'','reportedBy':_0x1d6bdd['uid'],'reporterUsername':_0x1d6bdd['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},_0x22fe3a=collection(window['db'],'badComments');await addDoc(_0x22fe3a,_0x45f159),alert(_0xec661(0x225)),closePreviewCommentPopup();}catch(_0x4bba0a){console[_0xec661(0x1cd)]('Error\x20reporting\x20comment:',_0x4bba0a),alert(_0xec661(0x17b)+_0x4bba0a[_0xec661(0x1f9)]);}}function showFullCommentLightbox(_0x116bc5){const _0x5221a2=a6_0x23a1;if(isUsernameMuted(_0x116bc5['username']))return;const _0x157895=document[_0x5221a2(0x1c4)]('commentPopupPreview'),_0x43ec0e=document['getElementById']('commentOverlayPreview'),_0x23310d=document['getElementById'](_0x5221a2(0x1a4)),_0x3c4fdc=document['getElementById']('commentPopupContentPreview');if(!_0x157895||!_0x43ec0e||!_0x23310d||!_0x3c4fdc)return;_0x23310d['style'][_0x5221a2(0x1c2)]='#fff',_0x23310d['textContent']=_0x5221a2(0x1c8)+_0x116bc5[_0x5221a2(0x1bf)];if(_0x116bc5['timestamp']){const _0x5521ed=new Date(_0x116bc5['timestamp'][_0x5221a2(0x21a)]*0x3e8),_0x14f2a1=_0x5521ed['toLocaleString']();_0x3c4fdc['innerHTML']='<p>'+_0x116bc5['text']+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x14f2a1+_0x5221a2(0x1d0);}else _0x3c4fdc[_0x5221a2(0x1e9)]=_0x116bc5['text'];_0x157895['dataset']['commentId']=_0x116bc5['id']||'',_0x157895['dataset'][_0x5221a2(0x1bc)]=_0x116bc5['username']||'',_0x157895['dataset']['commentText']=_0x116bc5['text']||'',_0x157895['dataset'][_0x5221a2(0x1d7)]=_0x116bc5[_0x5221a2(0x1d7)]||'';const _0x1caa58=_0x157895[_0x5221a2(0x1ff)]('.popup-actions')||document['createElement']('div');!_0x157895[_0x5221a2(0x1ff)]('.popup-actions')?(_0x1caa58['className']='popup-actions',_0x1caa58['style']['display']='flex',_0x1caa58[_0x5221a2(0x193)]['justifyContent']='center',_0x1caa58['style']['gap']='10px',_0x1caa58['style'][_0x5221a2(0x219)]=_0x5221a2(0x1fc),_0x157895['appendChild'](_0x1caa58)):_0x1caa58[_0x5221a2(0x1e3)]='';const _0x11a7f6=document[_0x5221a2(0x1b9)]('button');_0x11a7f6[_0x5221a2(0x1e9)]='Close',_0x11a7f6[_0x5221a2(0x1c3)]=_0x5221a2(0x1c7),_0x11a7f6['id']='closeCommentPopupPreview',_0x11a7f6['addEventListener']('click',closePreviewCommentPopup);const _0x57b725=document[_0x5221a2(0x1b9)]('button');_0x57b725['textContent']=_0x5221a2(0x1af),_0x57b725['className']='popup-btn\x20report-btn',_0x57b725['style'][_0x5221a2(0x18d)]='#d32f2f',_0x57b725[_0x5221a2(0x1ac)]('click',reportComment),_0x1caa58['appendChild'](_0x11a7f6),_0x1caa58[_0x5221a2(0x1ae)](_0x57b725),_0x157895['style']['display']='block',_0x43ec0e['style']['display']='block';}export function setupPreviewEventListeners(){const _0x5f2d51=a6_0x23a1,_0x21ced3=document['getElementById']('previewPrevPage'),_0x5abd30=document[_0x5f2d51(0x1c4)]('previewNextPage'),_0x3fc8d2=document['getElementById']('preview-d1-button'),_0x292654=document['getElementById']('preview-d2-button'),_0x35e1e6=document['getElementById']('preview-d3-button'),_0x4c0e66=document[_0x5f2d51(0x1c4)](_0x5f2d51(0x20c)),_0x167dc8=document[_0x5f2d51(0x1c4)]('enhanced-filter-section');if(!_0x21ced3||!_0x5abd30||!_0x3fc8d2||!_0x292654||!_0x35e1e6||!_0x4c0e66||!_0x167dc8){console['warn']('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}_0x21ced3['addEventListener']('click',()=>{const _0x599b04=_0x5f2d51;if(!_0x21ced3['disabled'])loadRecentMatchesPreview(_0x599b04(0x1ed));}),_0x5abd30['addEventListener']('click',()=>{if(!_0x5abd30['disabled'])loadRecentMatchesPreview('next');}),_0x3fc8d2[_0x5f2d51(0x1ac)]('click',()=>{previewState['currentMode']!=='D1'&&!previewState['isLoading']&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x292654['addEventListener']('click',()=>{const _0xe4dc10=_0x5f2d51;previewState['currentMode']!=='D2'&&!previewState['isLoading']&&(previewState[_0xe4dc10(0x1f3)]='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0xe4dc10(0x1b7)));}),_0x35e1e6['addEventListener']('click',()=>{const _0x1377d3=_0x5f2d51;previewState['currentMode']!=='D3'&&!previewState[_0x1377d3(0x1ca)]&&(previewState[_0x1377d3(0x1f3)]='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x1377d3(0x1b7)));});_0x4c0e66&&_0x167dc8&&_0x4c0e66['addEventListener'](_0x5f2d51(0x1f7),()=>{const _0x194a2b=_0x5f2d51,_0x31be8a=_0x167dc8[_0x194a2b(0x193)]['display']!==_0x194a2b(0x194);_0x167dc8['style']['display']=_0x31be8a?'none':'block',_0x4c0e66[_0x194a2b(0x18e)]['toggle']('active',!_0x31be8a);});const _0x416c1a=document['getElementById']('apply-enhanced-filters'),_0x4c1ee9=document['getElementById']('clear-enhanced-filters');_0x416c1a&&_0x416c1a[_0x5f2d51(0x1ac)](_0x5f2d51(0x1f7),()=>{const _0x55377f=_0x5f2d51;previewState[_0x55377f(0x213)]['pilots']=document[_0x55377f(0x1c4)](_0x55377f(0x1bb))[_0x55377f(0x1e6)][_0x55377f(0x1fb)](),previewState['enhancedFilters'][_0x55377f(0x1a0)]=document['getElementById'](_0x55377f(0x1da))['value']['trim']();const _0x126c44=document[_0x55377f(0x1c4)]('filter-subgames');previewState['enhancedFilters']['subgames']=Array['from'](_0x126c44[_0x55377f(0x199)])['map'](_0x4eb597=>_0x4eb597['value'])[_0x55377f(0x1cb)](_0xea980f=>_0xea980f!==''),loadRecentMatchesPreview(_0x55377f(0x1b7));});_0x4c1ee9&&_0x4c1ee9['addEventListener']('click',()=>{const _0x19e448=_0x5f2d51;clearEnhancedFilters(),loadRecentMatchesPreview(_0x19e448(0x1b7));});document['querySelectorAll']('.jump-btn')['forEach'](_0x1f8405=>{const _0x48170b=_0x5f2d51;_0x1f8405[_0x48170b(0x1ac)]('click',()=>{const _0x20d2f2=_0x1f8405['dataset']['jump'];jumpToPage(_0x20d2f2);});});const _0x1b2b8e=document['getElementById']('jump-to-page');_0x1b2b8e&&_0x1b2b8e['addEventListener']('keypress',_0x594ffc=>{const _0x40a792=_0x5f2d51;_0x594ffc[_0x40a792(0x19d)]==='Enter'&&jumpToPage('input');});const _0x2221cd=document[_0x5f2d51(0x1c4)](_0x5f2d51(0x21e)),_0x4c21d3=document['getElementById']('commentOverlayPreview');if(_0x2221cd)_0x2221cd[_0x5f2d51(0x1ac)]('click',closePreviewCommentPopup);if(_0x4c21d3)_0x4c21d3[_0x5f2d51(0x1ac)]('click',closePreviewCommentPopup);const _0x21f21d=document['getElementById']('closeAddCommentPopup'),_0x15aa3a=document['getElementById'](_0x5f2d51(0x1a9)),_0x36e696=document['getElementById'](_0x5f2d51(0x1cc));if(_0x21f21d)_0x21f21d[_0x5f2d51(0x1ac)]('click',closeAddCommentPopup);if(_0x15aa3a)_0x15aa3a['addEventListener']('click',closeAddCommentPopup);if(_0x36e696)_0x36e696['addEventListener']('submit',submitComment);const _0x25e731=document[_0x5f2d51(0x1c4)]('commentText'),_0x23c37d=document['getElementById']('wordCount');_0x25e731&&_0x23c37d&&setupWordCounter(_0x5f2d51(0x1a2),'wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window['submitComment']=submitComment;