(function(_0x4ad72a,_0x36358f){const _0x1f8b0f=a0_0x260b,_0x43defe=_0x4ad72a();while(!![]){try{const _0x219aeb=-parseInt(_0x1f8b0f(0x9d))/0x1+-parseInt(_0x1f8b0f(0x9e))/0x2+parseInt(_0x1f8b0f(0x87))/0x3*(parseInt(_0x1f8b0f(0xaf))/0x4)+-parseInt(_0x1f8b0f(0xb8))/0x5*(parseInt(_0x1f8b0f(0x98))/0x6)+-parseInt(_0x1f8b0f(0xa5))/0x7*(-parseInt(_0x1f8b0f(0xa6))/0x8)+-parseInt(_0x1f8b0f(0x96))/0x9*(-parseInt(_0x1f8b0f(0xa8))/0xa)+parseInt(_0x1f8b0f(0xac))/0xb*(parseInt(_0x1f8b0f(0xb3))/0xc);if(_0x219aeb===_0x36358f)break;else _0x43defe['push'](_0x43defe['shift']());}catch(_0x1a5455){_0x43defe['push'](_0x43defe['shift']());}}}(a0_0x55e7,0x9c030));const a0_0x260ace=(function(){let _0x3bfa58=!![];return function(_0x5f4b3f,_0x352eb3){const _0x12db21=_0x3bfa58?function(){const _0x5e096e=a0_0x260b;if(_0x352eb3){const _0x4a0ea7=_0x352eb3[_0x5e096e(0xa3)](_0x5f4b3f,arguments);return _0x352eb3=null,_0x4a0ea7;}}:function(){};return _0x3bfa58=![],_0x12db21;};}()),a0_0x2c3f8f=a0_0x260ace(this,function(){const _0x5445fc=a0_0x260b;return a0_0x2c3f8f[_0x5445fc(0xa9)]()[_0x5445fc(0x95)](_0x5445fc(0x8c))[_0x5445fc(0xa9)]()[_0x5445fc(0x86)](a0_0x2c3f8f)[_0x5445fc(0x95)](_0x5445fc(0x8c));});function a0_0x260b(_0x44aee4,_0xf1ba7e){const _0x109f86=a0_0x55e7();return a0_0x260b=function(_0x555354,_0x4f1042){_0x555354=_0x555354-0x85;let _0x1813af=_0x109f86[_0x555354];return _0x1813af;},a0_0x260b(_0x44aee4,_0xf1ba7e);}a0_0x2c3f8f();const a0_0x4f1042=(function(){let _0x1bb264=!![];return function(_0x895aad,_0x3fe193){const _0xef4f87=_0x1bb264?function(){if(_0x3fe193){const _0x4698bc=_0x3fe193['apply'](_0x895aad,arguments);return _0x3fe193=null,_0x4698bc;}}:function(){};return _0x1bb264=![],_0xef4f87;};}()),a0_0x555354=a0_0x4f1042(this,function(){const _0x51630c=a0_0x260b;let _0x2fa395;try{const _0xa7cfb8=Function(_0x51630c(0xb2)+_0x51630c(0x8e)+');');_0x2fa395=_0xa7cfb8();}catch(_0x4a8e82){_0x2fa395=window;}const _0x3daf51=_0x2fa395[_0x51630c(0x92)]=_0x2fa395[_0x51630c(0x92)]||{},_0x5f1192=[_0x51630c(0x99),_0x51630c(0x9f),_0x51630c(0xa7),_0x51630c(0x85),'exception','table',_0x51630c(0x88)];for(let _0x17355f=0x0;_0x17355f<_0x5f1192[_0x51630c(0xa0)];_0x17355f++){const _0x51de69=a0_0x4f1042[_0x51630c(0x86)][_0x51630c(0x9c)][_0x51630c(0x90)](a0_0x4f1042),_0x500738=_0x5f1192[_0x17355f],_0x3a3827=_0x3daf51[_0x500738]||_0x51de69;_0x51de69['__proto__']=a0_0x4f1042['bind'](a0_0x4f1042),_0x51de69[_0x51630c(0xa9)]=_0x3a3827['toString'][_0x51630c(0x90)](_0x3a3827),_0x3daf51[_0x500738]=_0x51de69;}});a0_0x555354();import{db}from'../firebase-config.js';import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';export async function migrateUserData(){const _0x53a826=a0_0x260b,_0x1f4f54=[_0x53a826(0x8a),_0x53a826(0xa2),_0x53a826(0xa4),_0x53a826(0xb1),_0x53a826(0x89)],_0x5e4c3=[];let _0x37d3d9=writeBatch(db),_0x3f91bb=0x0;const _0x217e38=collection(db,_0x53a826(0x89)),_0x44a57f=new Map(),_0x30582d=(_0x37184f,_0x3181b0)=>{const _0x32b757=_0x53a826;_0x3f91bb>=0x1f4&&(_0x5e4c3[_0x32b757(0x9a)](_0x37d3d9),_0x37d3d9=writeBatch(db),_0x3f91bb=0x0);const _0x2dc58a=doc(_0x217e38,_0x37184f);_0x37d3d9['set'](_0x2dc58a,_0x3181b0),_0x3f91bb++;};for(const _0x28a809 of _0x1f4f54){const _0x32b6ef=collection(db,_0x28a809),_0x4d170b=await getDocs(_0x32b6ef);_0x4d170b[_0x53a826(0x93)][_0x53a826(0x94)](_0x5f2618=>{const _0x24264=_0x53a826,_0x11cc2d=_0x5f2618['id'],_0x5bc319=_0x5f2618[_0x24264(0xab)]();!_0x44a57f['has'](_0x11cc2d)&&_0x44a57f['set'](_0x11cc2d,{'username':_0x5bc319['username']||_0x5bc319[_0x24264(0xb6)]||_0x11cc2d,'email':_0x5bc319['email']||null,'discord':_0x5bc319[_0x24264(0x8f)]||null,'createdAt':_0x5bc319[_0x24264(0xae)]||new Date()['toISOString'](),'divisions':[]});const _0x2d2e8a=_0x44a57f[_0x24264(0xb4)](_0x11cc2d);if(_0x28a809==='players')_0x2d2e8a['divisions']['push']({'id':0x1,'elo':_0x5bc319[_0x24264(0xb0)]||0x5dc,'isActive':_0x5bc319[_0x24264(0x8d)]!==![]});else{if(_0x28a809===_0x24264(0xa2))_0x2d2e8a[_0x24264(0xb7)][_0x24264(0x9a)]({'id':0x2,'elo':_0x5bc319[_0x24264(0xb0)]||0x5dc,'isActive':_0x5bc319[_0x24264(0x8d)]!==![]});else _0x28a809===_0x24264(0xa4)&&_0x2d2e8a[_0x24264(0xb7)][_0x24264(0x9a)]({'id':0x3,'elo':_0x5bc319[_0x24264(0xb0)]||0x5dc,'isActive':_0x5bc319['active']!==![]});}});}for(const [_0x4e56f9,_0x29ef7d]of _0x44a57f[_0x53a826(0x9b)]()){_0x30582d(_0x4e56f9,_0x29ef7d);}_0x3f91bb>0x0&&_0x5e4c3[_0x53a826(0x9a)](_0x37d3d9);const _0x4c85f2=[];for(const _0x4e3215 of _0x5e4c3){try{await _0x4e3215[_0x53a826(0x91)](),_0x4c85f2[_0x53a826(0x9a)]({'success':!![]});}catch(_0x5f58a9){_0x4c85f2[_0x53a826(0x9a)]({'success':![],'error':_0x5f58a9});}}return{'usersProcessed':_0x44a57f[_0x53a826(0xaa)],'batchesExecuted':_0x4c85f2[_0x53a826(0xa0)],'success':_0x4c85f2[_0x53a826(0xb5)](_0x5bd7ab=>_0x5bd7ab['success'])};}function a0_0x55e7(){const _0x572da9=['matchesD3','createdAt','861800NvKZhN','elo','nonParticipants','return\x20(function()\x20','10524sqElIF','get','every','name','divisions','5wdrWgj','error','constructor','12mZrvXi','trace','userProfiles','players','matches','(((.+)+)+)+$','active','{}.constructor(\x22return\x20this\x22)(\x20)','discord','bind','commit','console','docs','forEach','search','36405fBnbyB','toISOString','4199814TZBsZd','log','push','entries','prototype','692645CQrxra','701366dUkGrZ','warn','length','matchesD2','playersD2','apply','playersD3','3773HkCakQ','7056dDwYZc','info','1220NvIoug','toString','size','data','6919vbhQbf'];a0_0x55e7=function(){return _0x572da9;};return a0_0x55e7();}export async function updateMatchReferences(){const _0x3a04b2=a0_0x260b,_0x4594c4=[_0x3a04b2(0x8b),_0x3a04b2(0xa1),_0x3a04b2(0xad)];let _0x140196=0x0;for(const _0x16761e of _0x4594c4){const _0x50464f=collection(db,_0x16761e),_0x4b63ac=await getDocs(_0x50464f),_0x13a4d3=0x1f4;let _0x5cb0c4=writeBatch(db),_0x5cba6f=0x0;for(const _0x455aca of _0x4b63ac['docs']){const _0x581be2=_0x455aca[_0x3a04b2(0xab)](),_0x1ba2ee=doc(db,_0x16761e,_0x455aca['id']);_0x5cb0c4['update'](_0x1ba2ee,{'isMigrated':!![],'lastModified':new Date()[_0x3a04b2(0x97)]()}),_0x5cba6f++,_0x140196++,_0x5cba6f>=_0x13a4d3&&(await _0x5cb0c4[_0x3a04b2(0x91)](),_0x5cb0c4=writeBatch(db),_0x5cba6f=0x0);}_0x5cba6f>0x0&&await _0x5cb0c4[_0x3a04b2(0x91)]();}return{'updatedCount':_0x140196};}