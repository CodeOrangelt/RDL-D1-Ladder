const a55_0x286704=(function(){let _0x1fe39c=!![];return function(_0x2c22a2,_0x979551){const _0x5922d2=_0x1fe39c?function(){if(_0x979551){const _0x96116d=_0x979551['apply'](_0x2c22a2,arguments);return _0x979551=null,_0x96116d;}}:function(){};return _0x1fe39c=![],_0x5922d2;};}()),a55_0x193d84=a55_0x286704(this,function(){const _0x24de57=a55_0x5bff;let _0x524390;try{const _0x576054=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x524390=_0x576054();}catch(_0x3a123c){_0x524390=window;}const _0x1882ee=_0x524390['console']=_0x524390['console']||{},_0x32caa2=['log','warn',_0x24de57(0x152),'error',_0x24de57(0x14e),'table','trace'];for(let _0x4dbd5b=0x0;_0x4dbd5b<_0x32caa2[_0x24de57(0x156)];_0x4dbd5b++){const _0x21a6f9=a55_0x286704['constructor']['prototype']['bind'](a55_0x286704),_0x3f1f63=_0x32caa2[_0x4dbd5b],_0x37ee6b=_0x1882ee[_0x3f1f63]||_0x21a6f9;_0x21a6f9['__proto__']=a55_0x286704['bind'](a55_0x286704),_0x21a6f9['toString']=_0x37ee6b['toString']['bind'](_0x37ee6b),_0x1882ee[_0x3f1f63]=_0x21a6f9;}});a55_0x193d84();import{db}from'./firebase-config.js';function a55_0x485b(){const _0x5dcffd=['Season\x20','value','exists','Please\x20enter\x20your\x20password','Error\x20resetting\x20season.\x20Please\x20try\x20again.','eloRating','Error\x20resetting\x20season:','Invalid\x20password\x20or\x20authentication\x20failed','addEventListener','click','getElementById','position','setupEventListeners','exception','data','error','cancel-reset','info','username','resetSeason','block','length'];a55_0x485b=function(){return _0x5dcffd;};return a55_0x485b();}import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a55_0x5bff(_0x2c5750,_0x59abf7){const _0x193d84=a55_0x485b();return a55_0x5bff=function(_0x286704,_0x24952d){_0x286704=_0x286704-0x141;let _0x485b11=_0x193d84[_0x286704];return _0x485b11;},a55_0x5bff(_0x2c5750,_0x59abf7);}import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){const _0x1a4301=a55_0x5bff;this[_0x1a4301(0x14d)]();}['setupEventListeners'](){const _0x4d8ffb=a55_0x5bff,_0x1fe833=document['getElementById']('reset-season'),_0x1d0b7f=document['getElementById']('confirm-reset'),_0x491fe0=document['getElementById'](_0x4d8ffb(0x151));_0x1fe833?.[_0x4d8ffb(0x149)](_0x4d8ffb(0x14a),()=>{const _0x56dfc8=_0x4d8ffb;document[_0x56dfc8(0x14b)]('reset-confirmation')['style']['display']=_0x56dfc8(0x155);}),_0x1d0b7f?.['addEventListener']('click',async()=>{const _0x31a3eb=_0x4d8ffb,_0x3f0cb9=document['getElementById']('reset-password'),_0x555671=auth['currentUser'];if(!_0x555671||!_0x3f0cb9['value']){alert(_0x31a3eb(0x144));return;}try{const _0x591136=EmailAuthProvider['credential'](_0x555671['email'],_0x3f0cb9['value']);await reauthenticateWithCredential(_0x555671,_0x591136),await this[_0x31a3eb(0x154)](),_0x3f0cb9['value']='',document['getElementById']('reset-confirmation')['style']['display']='none';}catch(_0x428a35){alert(_0x31a3eb(0x148)),console['error']('Authentication\x20error:',_0x428a35);}}),_0x491fe0?.['addEventListener'](_0x4d8ffb(0x14a),()=>{const _0x3c1d0d=_0x4d8ffb,_0x5a150e=document['getElementById']('reset-password');_0x5a150e[_0x3c1d0d(0x142)]='',document['getElementById']('reset-confirmation')['style']['display']='none';});}async['resetSeason'](){const _0x1a2492=a55_0x5bff;try{const _0x4bf9e1=await getDoc(doc(db,'metadata','seasonCount'));let _0x43c4fa=0x1;_0x4bf9e1[_0x1a2492(0x143)]()&&(_0x43c4fa=_0x4bf9e1['data']()['count']+0x1);const _0x411a5d=await getDocs(collection(db,'players')),_0x50c28a={'players':[],'date':new Date(),'seasonNumber':_0x43c4fa};for(const _0x219cb8 of _0x411a5d['docs']){const _0x53089e=_0x219cb8[_0x1a2492(0x14f)]();_0x50c28a['players']['push']({'username':_0x53089e[_0x1a2492(0x153)],'position':_0x53089e[_0x1a2492(0x14c)],'eloRating':_0x53089e[_0x1a2492(0x146)]||0x4b0}),await setDoc(doc(db,'players',_0x219cb8['id']),{..._0x53089e,'eloRating':0x4b0,'position':_0x53089e['position']});}await setDoc(doc(db,'seasons','season'+_0x43c4fa),_0x50c28a),await setDoc(doc(db,'metadata','seasonCount'),{'count':_0x43c4fa}),alert(_0x1a2492(0x141)+_0x43c4fa+'\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.'),location['reload']();}catch(_0xa7567a){console[_0x1a2492(0x150)](_0x1a2492(0x147),_0xa7567a),alert(_0x1a2492(0x145));}}}export const seasonManager=new SeasonManager();