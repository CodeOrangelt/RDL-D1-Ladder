const a16_0x3ddfc1=a16_0x28e8;(function(_0x22f47c,_0x567a03){const _0x2fcea1=a16_0x28e8,_0x15ec28=_0x22f47c();while(!![]){try{const _0x7638ae=-parseInt(_0x2fcea1(0xc5))/0x1+parseInt(_0x2fcea1(0xaf))/0x2*(parseInt(_0x2fcea1(0xc0))/0x3)+parseInt(_0x2fcea1(0xb0))/0x4+-parseInt(_0x2fcea1(0xcb))/0x5+parseInt(_0x2fcea1(0xd7))/0x6*(parseInt(_0x2fcea1(0xca))/0x7)+parseInt(_0x2fcea1(0xb2))/0x8+parseInt(_0x2fcea1(0xce))/0x9;if(_0x7638ae===_0x567a03)break;else _0x15ec28['push'](_0x15ec28['shift']());}catch(_0x116b1a){_0x15ec28['push'](_0x15ec28['shift']());}}}(a16_0x5849,0xc8040));const a16_0x50782c=(function(){let _0x307b50=!![];return function(_0x4f4872,_0x3c593e){const _0x3dc702=_0x307b50?function(){const _0x2a9e00=a16_0x28e8;if(_0x3c593e){const _0x5c0166=_0x3c593e[_0x2a9e00(0xb8)](_0x4f4872,arguments);return _0x3c593e=null,_0x5c0166;}}:function(){};return _0x307b50=![],_0x3dc702;};}()),a16_0x382d41=a16_0x50782c(this,function(){const _0x2313f8=a16_0x28e8;return a16_0x382d41[_0x2313f8(0xc4)]()[_0x2313f8(0xc8)](_0x2313f8(0xcf))[_0x2313f8(0xc4)]()[_0x2313f8(0xac)](a16_0x382d41)[_0x2313f8(0xc8)](_0x2313f8(0xcf));});a16_0x382d41();function a16_0x5849(){const _0x30cba5=['promotion','trace','constructor','previousElo','opponent','34630CYAEwZ','1891016JCWwYg','desc','3040176KHmxGB','Gold','data','{}.constructor(\x22return\x20this\x22)(\x20)','demotion','warn','apply','Emerald','newElo','table','map','exists','error','Error\x20recording\x20ELO\x20history:','219FITjYU','Error\x20fetching\x20username:','players','length','toString','1048474fzLbJV','docs','console','search','bind','8099uXqBAX','5975595nkJqUU','Error\x20fetching\x20ELO\x20history:','player','882045dPpRJw','(((.+)+)+)+$','return\x20(function()\x20','timestamp','Bronze','log','Unknown\x20Player','Unranked','Silver','4398dwzUJg','eloHistory'];a16_0x5849=function(){return _0x30cba5;};return a16_0x5849();}const a16_0x2de6f1=(function(){let _0x5bc7f9=!![];return function(_0x5a2973,_0x187693){const _0x4a23ff=_0x5bc7f9?function(){const _0x58ce15=a16_0x28e8;if(_0x187693){const _0x47c766=_0x187693[_0x58ce15(0xb8)](_0x5a2973,arguments);return _0x187693=null,_0x47c766;}}:function(){};return _0x5bc7f9=![],_0x4a23ff;};}()),a16_0x2f1969=a16_0x2de6f1(this,function(){const _0x29880e=a16_0x28e8,_0x2bc949=function(){const _0x112aac=a16_0x28e8;let _0x95a4d3;try{_0x95a4d3=Function(_0x112aac(0xd0)+_0x112aac(0xb5)+');')();}catch(_0x3e8237){_0x95a4d3=window;}return _0x95a4d3;},_0x4e1e56=_0x2bc949(),_0x34b82f=_0x4e1e56[_0x29880e(0xc7)]=_0x4e1e56[_0x29880e(0xc7)]||{},_0x10d600=[_0x29880e(0xd3),_0x29880e(0xb7),'info',_0x29880e(0xbe),'exception',_0x29880e(0xbb),_0x29880e(0xab)];for(let _0x4f0141=0x0;_0x4f0141<_0x10d600[_0x29880e(0xc3)];_0x4f0141++){const _0x48ea61=a16_0x2de6f1[_0x29880e(0xac)]['prototype'][_0x29880e(0xc9)](a16_0x2de6f1),_0x3cd2f2=_0x10d600[_0x4f0141],_0x554c4f=_0x34b82f[_0x3cd2f2]||_0x48ea61;_0x48ea61['__proto__']=a16_0x2de6f1[_0x29880e(0xc9)](a16_0x2de6f1),_0x48ea61[_0x29880e(0xc4)]=_0x554c4f[_0x29880e(0xc4)]['bind'](_0x554c4f),_0x34b82f[_0x3cd2f2]=_0x48ea61;}});a16_0x2f1969();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':a16_0x3ddfc1(0xb3),'elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':a16_0x3ddfc1(0xd5),'elo':0x4b0}];async function getUsernameById(_0x26d6e1){const _0x596979=a16_0x3ddfc1;try{if(!_0x26d6e1)return _0x596979(0xd4);const _0x2208eb=await getDoc(doc(db,_0x596979(0xc2),_0x26d6e1));return _0x2208eb[_0x596979(0xbd)]()?_0x2208eb['data']()['username']:_0x596979(0xd4);}catch(_0x44d463){return console[_0x596979(0xbe)](_0x596979(0xc1),_0x44d463),_0x596979(0xd4);}}export async function recordEloChange({playerId:_0xc5aebe,previousElo:_0x6e59fc,newElo:_0x2880f0,opponentId:_0x408187,matchResult:_0x5f491f,previousPosition:_0x4cb8cb,newPosition:_0x4b1c86,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0xe8485e}){const _0x56bfbc=a16_0x3ddfc1;try{const _0x281185=doc(collection(db,_0x56bfbc(0xd8)));let _0x1d6d9a='match';if(isPromotion)_0x1d6d9a=_0x56bfbc(0xd9);if(isDemotion)_0x1d6d9a=_0x56bfbc(0xb6);let _0x2eb886=_0x56bfbc(0xd5);if(_0x2880f0>=0x834)_0x2eb886=_0x56bfbc(0xb9);else{if(_0x2880f0>=0x708)_0x2eb886=_0x56bfbc(0xb3);else{if(_0x2880f0>=0x640)_0x2eb886=_0x56bfbc(0xd6);else{if(_0x2880f0>=0x578)_0x2eb886=_0x56bfbc(0xd2);}}}return await setDoc(_0x281185,{'type':_0x1d6d9a,'player':_0xc5aebe,'opponent':_0x408187,'previousElo':_0x6e59fc,'newElo':_0x2880f0,'change':_0x2880f0-_0x6e59fc,'matchResult':_0x5f491f,'previousPosition':_0x4cb8cb,'newPosition':_0x4b1c86,'rankAchieved':_0x2eb886,'timestamp':_0xe8485e}),console[_0x56bfbc(0xd3)]('ELO\x20history\x20recorded\x20for\x20'+_0xc5aebe),!![];}catch(_0x54d4e5){console[_0x56bfbc(0xbe)](_0x56bfbc(0xbf),_0x54d4e5);throw _0x54d4e5;}}export async function getEloHistory(){const _0x34fe2b=a16_0x3ddfc1;try{const _0x1bacb7=collection(db,'eloHistory'),_0x2550a4=query(_0x1bacb7,orderBy(_0x34fe2b(0xd1),_0x34fe2b(0xb1))),_0xc14eb1=await getDocs(_0x2550a4),_0x105747=_0xc14eb1[_0x34fe2b(0xc6)][_0x34fe2b(0xbc)](async _0x497f5d=>{const _0x232373=_0x34fe2b,_0x7c6cdd=_0x497f5d[_0x232373(0xb4)](),[_0x42eb02,_0x498397]=await Promise['all']([getUsernameById(_0x7c6cdd[_0x232373(0xcd)]),getUsernameById(_0x7c6cdd[_0x232373(0xae)])]);return{..._0x7c6cdd,'playerUsername':_0x42eb02,'opponentUsername':_0x498397,'change':_0x7c6cdd[_0x232373(0xba)]-_0x7c6cdd[_0x232373(0xad)],'timestamp':_0x7c6cdd[_0x232373(0xd1)]};}),_0x1be9c5=await Promise['all'](_0x105747);return{'entries':_0x1be9c5};}catch(_0x54c2d2){console[_0x34fe2b(0xbe)](_0x34fe2b(0xcc),_0x54c2d2);throw _0x54c2d2;}}function a16_0x28e8(_0x16bb1d,_0x489947){const _0x2c38d7=a16_0x5849();return a16_0x28e8=function(_0x2f1969,_0x2de6f1){_0x2f1969=_0x2f1969-0xab;let _0x3cdacc=_0x2c38d7[_0x2f1969];return _0x3cdacc;},a16_0x28e8(_0x16bb1d,_0x489947);}export function resetPagination(){lastVisible=null;}