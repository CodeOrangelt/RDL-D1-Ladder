const a46_0x5bbafe=a46_0x2779,a46_0x4253c6=(function(){let _0x233d52=!![];return function(_0x48b2a7,_0x25c315){const _0x36974f=_0x233d52?function(){const _0x37c45d=a46_0x2779;if(_0x25c315){const _0x425c00=_0x25c315[_0x37c45d(0xcf)](_0x48b2a7,arguments);return _0x25c315=null,_0x425c00;}}:function(){};return _0x233d52=![],_0x36974f;};}()),a46_0x1743f0=a46_0x4253c6(this,function(){const _0x3739ac=a46_0x2779;let _0x429e4f;try{const _0x4d2749=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x429e4f=_0x4d2749();}catch(_0x459905){_0x429e4f=window;}const _0x3a239b=_0x429e4f['console']=_0x429e4f['console']||{},_0x423084=['log','warn',_0x3739ac(0xf9),'error','exception',_0x3739ac(0xfd),'trace'];for(let _0x5589fb=0x0;_0x5589fb<_0x423084['length'];_0x5589fb++){const _0x1d8236=a46_0x4253c6['constructor']['prototype']['bind'](a46_0x4253c6),_0x4424b1=_0x423084[_0x5589fb],_0x389c9c=_0x3a239b[_0x4424b1]||_0x1d8236;_0x1d8236['__proto__']=a46_0x4253c6[_0x3739ac(0xf4)](a46_0x4253c6),_0x1d8236['toString']=_0x389c9c[_0x3739ac(0xd9)]['bind'](_0x389c9c),_0x3a239b[_0x4424b1]=_0x1d8236;}});function a46_0x4c3b(){const _0x95b2f3=['\x20token\x20for\x20','none','store-message','.theme-select-btn','sign-in','refreshUI','../images/tokens/Fan.gif','confirm','R/Y/B\x20Keys','apply-theme','Cloaking\x20Device','A\x20cunning\x20explosive\x20device.','disabled','sign-in-free','You\x20already\x20own\x20the\x20','You\x20need\x20','Please\x20sign\x20in\x20to\x20equip\x20tokens','style','message','RedeemStore','‚úÖ\x20User\x20authenticated:','../images/tokens/cloak.gif','Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer','You\x20must\x20purchase\x20this\x20theme\x20first','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20(','getElementById','Lock\x20in\x20your\x20victory.','email','Buy','Fiery\x20phoenix\x20cannon\x20token.','forEach','Purchase','block','includes','Need\x20','The\x20iconic\x20Pyro-GX\x20ship.','userProfiles','log','theme','A\x20mysterious\x20purple\x20blob\x20token','../images/tokens/Extralife.gif','‚úÖ\x20Purchased\x20','[data-theme]','Phoenix\x20Cannon','.themes-grid','Equipped','\x20for\x20','textContent','function','name','Emerald\x20City!','../images/tokens/subgame/pwr01.gif','üîÑ\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token','permission-denied','createElement','equipped','üîÑ\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token','../images/tokens/Smartmine.gif','Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','dataset','warn','purchase','\x20token','Shield\x20Orb','code','Not\x20enough\x20points.\x20You\x20need\x20','addEventListener','Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:','sign-in-paid','cursor','Purchase\x20failed.\x20Please\x20try\x20again.','User\x20data\x20loaded\x20-\x20Points:\x20','parentNode','map','Failed\x20to\x20equip\x20token:\x20','\x20points?','remove','\x20points\x20(50%\x20refund)','Buy\x20for\x20','querySelector','[data-token]','equipment','unauthenticated','length','apply','Please\x20sign\x20in\x20to\x20purchase\x20themes','equippedToken','opacity','token','success','../images/tokens/Hostage.gif','\x20not\x20found','weapon','isAdmin','toString','className','Token\x20','0.7','error','This\x20theme\x20makes\x20me\x20happy','uid','exists','owned','0.5','querySelectorAll','appendChild','closest','can-afford','Blob\x20Token\x201','display','Mega\x20Missile','inventory','not-allowed','floor','Please\x20sign\x20in\x20to\x20purchase\x20tokens','price','Please\x20sign\x20in\x20to\x20unequip\x20tokens','add','\x20more\x20points.','\x20Points','getCurrentTheme','bind','points','background','Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.','innerHTML','info','Blue','Plasma\x20Blob','Monitor\x20your\x20ship\x27s\x20energy\x20levels','table','powerup','Smart\x20Missile','visible','token_','tokens','switchTheme','fun','Purchase\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','classList','currentUser','../images/tokens/subgame/fusion.gif','special','cannot-afford'];a46_0x4c3b=function(){return _0x95b2f3;};return a46_0x4c3b();}a46_0x1743f0();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':a46_0x5bbafe(0x91)},'contrast':{'price':0x0,'name':'Nightlight','description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':a46_0x5bbafe(0xfa),'description':'This\x20one\x20is\x20really\x20pretty'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':a46_0x5bbafe(0xde)},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'},'gold':{'price':0x320,'name':'Gold','description':'Only\x20the\x20best\x20get\x20this\x20one'},'emerald':{'price':0x3e8,'name':'Emerald','description':a46_0x5bbafe(0xad)},'cockpit':{'price':0x4b0,'name':'Cockpit','description':'is\x20that...\x20Pfunk?'}},TOKENS={'pwr01':{'price':0x64,'name':'Energy','description':'Enhanced\x20energy\x20generation\x20unit','image':a46_0x5bbafe(0xae),'category':a46_0x5bbafe(0xfe)},'fan':{'price':0x96,'name':'Fan','description':'Show\x20your\x20support\x20with\x20this\x20fan\x20token.','image':a46_0x5bbafe(0x81),'category':a46_0x5bbafe(0x104)},'marker':{'price':0xfa,'name':'Marker','description':a46_0x5bbafe(0xb5),'image':'../images/tokens/Marker.gif','category':'fun'},'laser':{'price':0x12c,'name':'Laser','description':'Classic\x20laser\x20weapon\x20token.','image':'../images/tokens/Laser.gif','category':'weapon'},'pbomb':{'price':0x15e,'name':'Proximity\x20Bomb','description':'Strategic\x20explosive\x20device','image':'../images/tokens/subgame/pbomb.gif','category':'weapon'},'fusion':{'price':0x15e,'name':'Fusion\x20Cannon','description':'Devastating\x20fusion\x20weapon\x20technology','image':a46_0x5bbafe(0x109),'category':'weapon'},'lock':{'price':0x1c2,'name':'Lock','description':a46_0x5bbafe(0x95),'image':'../images/tokens/Lock.gif','category':'fun'},'blob01':{'price':0x1f4,'name':a46_0x5bbafe(0xe7),'description':a46_0x5bbafe(0xa2),'image':'../images/tokens/blob01.gif','category':'blob'},'plasma':{'price':0x1f4,'name':'Plasma\x20Cannon','description':'High-powered\x20plasma\x20cannon\x20token.','image':'../images/tokens/Plasma.gif','category':'weapon'},'cloak':{'price':0x1f4,'name':a46_0x5bbafe(0x85),'description':'Become\x20one\x20with\x20the\x20shadows','image':a46_0x5bbafe(0x90),'category':a46_0x5bbafe(0x10a)},'pwr02':{'price':0x258,'name':a46_0x5bbafe(0xba),'description':'Advanced\x20energy\x20storage\x20system','image':'../images/tokens/subgame/pwr02.gif','category':a46_0x5bbafe(0xfe)},'mercury':{'price':0x258,'name':'Mercury\x20Missile','description':'Fast\x20and\x20furious\x20missile\x20token.','image':'../images/tokens/Mercury.gif','category':'weapon'},'plasmablobl':{'price':0x258,'name':a46_0x5bbafe(0xfb),'description':'A\x20mysterious\x20plasma\x20blob.','image':'../images/tokens/Plasmablobl.gif','category':'blob'},'smissile':{'price':0x28a,'name':a46_0x5bbafe(0xff),'description':'Intelligent\x20targeting\x20system','image':'../images/tokens/subgame/smissile.gif','category':a46_0x5bbafe(0xd7)},'smartmine':{'price':0x2ee,'name':'Smart\x20Mine','description':a46_0x5bbafe(0x86),'image':a46_0x5bbafe(0xb4),'category':a46_0x5bbafe(0xd7)},'mmissile':{'price':0x320,'name':a46_0x5bbafe(0xe9),'description':'Heavy\x20ordinance\x20for\x20tough\x20situations','image':'../images/tokens/subgame/mmissile.gif','category':a46_0x5bbafe(0xd7)},'gauge18':{'price':0x320,'name':a46_0x5bbafe(0x83),'description':a46_0x5bbafe(0xfc),'image':'../images/tokens/gauge18.gif','category':a46_0x5bbafe(0xcc)},'extralife':{'price':0x320,'name':'Extra\x20Life','description':'A\x20rare\x20extra\x20life\x20token.','image':a46_0x5bbafe(0xa3),'category':'special'},'hostage':{'price':0x3b6,'name':'Hostage','description':'Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','image':a46_0x5bbafe(0xd5),'category':a46_0x5bbafe(0x10a)},'phoenix':{'price':0x3b6,'name':a46_0x5bbafe(0xa6),'description':a46_0x5bbafe(0x98),'image':'../images/tokens/Phoenix.gif','category':'weapon'},'blob02':{'price':0x3e8,'name':'Blob\x20Token\x202','description':'Another\x20enigmatic\x20blob\x20creature','image':'../images/tokens/blob02.gif','category':'blob'},'invuln':{'price':0x5dc,'name':'Invulnerability','description':'Become\x20invincible\x20for\x20a\x20short\x20time.','image':'../images/tokens/Invuln.gif','category':'powerup'},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':'The\x20final\x20blob\x20in\x20the\x20collection','image':'../images/tokens/blob03.gif','category':'blob'},'reactor':{'price':0x7d0,'name':'Reactor','description':'The\x20heart\x20of\x20every\x20mine.','image':'../images/tokens/Reactor.gif','category':'special'},'pyro':{'price':0xbb8,'name':'Pyro','description':a46_0x5bbafe(0x9e),'image':'../images/tokens/Pyro.gif','category':'ship'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;function a46_0x2779(_0x2bad1c,_0x3ed67d){const _0x1743f0=a46_0x4c3b();return a46_0x2779=function(_0x4253c6,_0x201d08){_0x4253c6=_0x4253c6-0x7b;let _0x4c3b85=_0x1743f0[_0x4253c6];return _0x4c3b85;},a46_0x2779(_0x2bad1c,_0x3ed67d);}document['addEventListener']('DOMContentLoaded',()=>{const _0x2879fc=a46_0x5bbafe;console[_0x2879fc(0xa0)]('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document['getElementById']('store-content'),pointsDisplay=document['getElementById']('user-points'),authWarning=document[_0x2879fc(0x94)]('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x5b1c69=>{const _0x35d2eb=a46_0x2779;if(_0x5b1c69){console['log'](_0x35d2eb(0x8f),_0x5b1c69['displayName']||_0x5b1c69['email']);if(authWarning)authWarning['style']['display']='none';if(storeContainer)storeContainer['style'][_0x35d2eb(0xe8)]=_0x35d2eb(0x9b);await loadUserData(_0x5b1c69),updateThemeButtons(),updateTokenButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style'][_0x35d2eb(0xe8)]='block';if(storeContainer)storeContainer['style']['display']=_0x35d2eb(0x7c);userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x2813e1){const _0x418500=a46_0x5bbafe;try{const _0x5874fb=doc(db,'userProfiles',_0x2813e1['uid']),_0x51fd59=await getDoc(_0x5874fb);if(_0x51fd59['exists']()){const _0x3966f0=_0x51fd59['data']();userData={'points':_0x3966f0['points']||0x0,'inventory':_0x3966f0['inventory']||[],'isAdmin':_0x3966f0['isAdmin']||![],'equippedToken':_0x3966f0[_0x418500(0xd1)]||null},pointsDisplay&&(pointsDisplay[_0x418500(0xaa)]=userData[_0x418500(0xf5)]['toLocaleString']()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log'](_0x418500(0xc2)+userData['points']+',\x20Inventory:\x20'+userData[_0x418500(0xea)][_0x418500(0xce)]+'\x20items,\x20Equipped:\x20'+(userData['equippedToken']||'none'));}else await setDoc(_0x5874fb,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x2813e1['displayName']||_0x2813e1[_0x418500(0x96)]?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay[_0x418500(0xaa)]='0'),window['isUserAdmin']=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x300a0e){console[_0x418500(0xdd)]('Error\x20loading\x20user\x20data:',_0x300a0e);}}function userOwnsTheme(_0x3c579c){if(THEMES[_0x3c579c]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x3c579c);}function userOwnsToken(_0x494f87){const _0x1cdf58=a46_0x5bbafe;return userData['inventory']['includes'](_0x1cdf58(0x101)+_0x494f87);}function userHasTokenEquipped(_0x25fe92){return userData['equippedToken']===_0x25fe92;}function getEquippedToken(){return userData['equippedToken']||null;}async function purchaseTheme(_0xd8c9e2){const _0xb2d62c=a46_0x5bbafe,_0x3a1b2e=auth['currentUser'];if(!_0x3a1b2e)return showMessage(_0xb2d62c(0xd0),'error'),![];const _0x65e89=THEMES[_0xd8c9e2];if(!_0x65e89)return console['error']('Theme\x20'+_0xd8c9e2+_0xb2d62c(0xd6)),![];if(userData['points']<_0x65e89[_0xb2d62c(0xee)])return showMessage(_0xb2d62c(0xbc)+(_0x65e89['price']-userData['points'])+_0xb2d62c(0xf1),'error'),![];if(userOwnsTheme(_0xd8c9e2))return showMessage('You\x20already\x20own\x20the\x20'+_0x65e89[_0xb2d62c(0xac)]+'\x20theme','info'),![];try{return await processPurchase(_0xd8c9e2,_0x65e89,_0xb2d62c(0xa1));}catch(_0x4ff597){return console['error']('Theme\x20purchase\x20failed:',_0x4ff597),showMessage(_0xb2d62c(0xc1),_0xb2d62c(0xdd)),![];}}async function purchaseToken(_0x5d1a6d){const _0x3b3d7e=a46_0x5bbafe,_0x4e7401=auth[_0x3b3d7e(0x108)];if(!_0x4e7401)return showMessage(_0x3b3d7e(0xed),'error'),![];const _0x299250=TOKENS[_0x5d1a6d];if(!_0x299250)return console['error'](_0x3b3d7e(0xdb)+_0x5d1a6d+'\x20not\x20found'),![];if(userData['points']<_0x299250['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x299250['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsToken(_0x5d1a6d))return showMessage(_0x3b3d7e(0x89)+_0x299250['name']+'\x20token',_0x3b3d7e(0xf9)),![];try{return await processPurchase(_0x5d1a6d,_0x299250,_0x3b3d7e(0xd3));}catch(_0x14bf56){return console['error']('Token\x20purchase\x20failed:',_0x14bf56),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x3b3d7e(0xdd)),![];}}async function processPurchase(_0x30c5a2,_0x42b574,_0x3e5c78){const _0x58a657=a46_0x5bbafe,_0xe51730=auth['currentUser'];try{const _0x5c9713=doc(db,_0x58a657(0x9f),_0xe51730['uid']),_0x1c5ebf=await getDoc(_0x5c9713);if(!_0x1c5ebf['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x2a0aea=_0x1c5ebf['data'](),_0x498984=_0x2a0aea['points']||0x0,_0x160f88=_0x2a0aea['inventory']||[];if(_0x498984<_0x42b574[_0x58a657(0xee)])return showMessage('Insufficient\x20points','error'),![];if(_0x160f88[_0x58a657(0x9c)](_0x3e5c78+'_'+_0x30c5a2))return showMessage('You\x20already\x20own\x20this\x20'+_0x3e5c78,'info'),![];const _0x47ac27=_0x498984-_0x42b574['price'],_0x2d74b8=[..._0x160f88,_0x3e5c78+'_'+_0x30c5a2];await updateDoc(_0x5c9713,{'points':_0x47ac27,'inventory':_0x2d74b8,'lastPurchase':serverTimestamp()});if(_0x3e5c78==='token')try{const _0x463a75=doc(db,'userTokens',_0xe51730['uid']),_0x4919e7=await getDoc(_0x463a75);let _0x337ed8=[];_0x4919e7[_0x58a657(0xe0)]()&&(_0x337ed8=_0x4919e7['data']()['tokens']||[]);const _0x5643dd=new Date();_0x337ed8['push']({'tokenId':_0x30c5a2,'tokenName':_0x42b574['name'],'tokenImage':_0x42b574['image'],'category':_0x42b574['category'],'purchasedAt':_0x5643dd,'price':_0x42b574['price'],'equipped':![]}),await setDoc(_0x463a75,{'userId':_0xe51730['uid'],'username':_0x2a0aea['username']||_0xe51730['displayName']||'Unknown','tokens':_0x337ed8,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache==='function'&&clearTokenCache(_0xe51730['uid']),console[_0x58a657(0xa0)]('‚úÖ\x20Token\x20'+_0x30c5a2+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0x4a1338){console['warn'](_0x58a657(0xbe),_0x4a1338),_0x4a1338['code']==='permission-denied'?console['log']('üîß\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console['error']('Unexpected\x20token\x20error:',_0x4a1338);}try{await addDoc(collection(db,'transactions'),{'userId':_0xe51730['uid'],'userEmail':_0xe51730['email'],'itemId':_0x3e5c78+'_'+_0x30c5a2,'itemTitle':_0x42b574['name'],'price':_0x42b574['price'],'type':_0x58a657(0xb8),'category':_0x3e5c78,'timestamp':serverTimestamp()});}catch(_0x30dff3){console['warn']('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x30dff3);}return userData['points']=_0x47ac27,userData['inventory']=_0x2d74b8,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),updateTokenButtons(),_0x3e5c78==='theme'&&updateThemeButtons(),console['log'](_0x58a657(0xa4)+_0x42b574[_0x58a657(0xac)]+_0x58a657(0xa9)+_0x42b574['price']+'\x20points'),showMessage('Successfully\x20purchased\x20'+_0x42b574['name']+'!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','success'),!![];}catch(_0x507ccd){console['error']('Purchase\x20processing\x20error:',_0x507ccd);if(_0x507ccd['code']===_0x58a657(0xb0))showMessage(_0x58a657(0xf7),'error');else{if(_0x507ccd['code']==='unavailable')showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.',_0x58a657(0xdd));else _0x507ccd[_0x58a657(0xbb)]===_0x58a657(0xcd)?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.',_0x58a657(0xdd)):showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error');}return![];}}async function equipToken(_0x59dec1){const _0x325fd4=a46_0x5bbafe,_0x13650f=auth['currentUser'];if(!_0x13650f)return showMessage(_0x325fd4(0x8b),_0x325fd4(0xdd)),![];const _0x102594=TOKENS[_0x59dec1];if(!_0x102594)return console['error']('Token\x20'+_0x59dec1+'\x20not\x20found'),![];if(!userOwnsToken(_0x59dec1))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it','error'),![];try{const _0x544e0d=doc(db,_0x325fd4(0x9f),_0x13650f['uid']);await updateDoc(_0x544e0d,{'equippedToken':_0x59dec1,'lastTokenEquip':serverTimestamp()});try{const _0x1a08d9=doc(db,'userTokens',_0x13650f['uid']),_0xa69d38=await getDoc(_0x1a08d9);if(_0xa69d38['exists']()){const _0x91f2c9=_0xa69d38['data'](),_0x2020e8=_0x91f2c9[_0x325fd4(0x102)]||[],_0x7ed8ea=_0x2020e8[_0x325fd4(0xc4)](_0x2d649f=>({..._0x2d649f,'equipped':_0x2d649f['tokenId']===_0x59dec1}));await updateDoc(_0x1a08d9,{'tokens':_0x7ed8ea,'equippedToken':_0x59dec1,'lastUpdated':serverTimestamp()});}}catch(_0x4757b7){console[_0x325fd4(0xb7)]('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0x4757b7);}return userData['equippedToken']=_0x59dec1,typeof clearTokenCache==='function'&&(clearTokenCache(_0x13650f['uid']),clearTokenCache()),setTimeout(()=>{const _0x2c07d1=_0x325fd4;window['displayLadder']&&typeof window['displayLadder']==='function'&&(console['log'](_0x2c07d1(0xaf)),window['displayLadder'](!![])),window[_0x2c07d1(0x8e)]&&typeof window['RedeemStore']['refreshUI']==='function'&&window['RedeemStore'][_0x2c07d1(0x80)]();},0x1f4),console['log']('‚úÖ\x20Equipped\x20token:\x20'+_0x102594['name']),showMessage(_0x102594[_0x325fd4(0xac)]+'\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x541e83){return console[_0x325fd4(0xdd)]('Token\x20equip\x20failed:',_0x541e83),_0x541e83[_0x325fd4(0xbb)]===_0x325fd4(0xb0)?showMessage('Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.','warning'):showMessage(_0x325fd4(0xc5)+_0x541e83['message'],'error'),![];}}async function unequipToken(){const _0x12ccf2=a46_0x5bbafe,_0x1a468a=auth['currentUser'];if(!_0x1a468a)return showMessage(_0x12ccf2(0xef),'error'),![];if(!userData[_0x12ccf2(0xd1)])return showMessage('No\x20token\x20is\x20currently\x20equipped','info'),![];try{const _0x25ceca=doc(db,'userProfiles',_0x1a468a['uid']);await updateDoc(_0x25ceca,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x4dc53a=doc(db,'userTokens',_0x1a468a['uid']),_0x1a40bc=await getDoc(_0x4dc53a);if(_0x1a40bc[_0x12ccf2(0xe0)]()){const _0x4017b0=_0x1a40bc['data'](),_0x371630=_0x4017b0[_0x12ccf2(0x102)]||[],_0x69eb25=_0x371630['map'](_0x1c7e55=>({..._0x1c7e55,'equipped':![]}));await updateDoc(_0x4dc53a,{'tokens':_0x69eb25,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData['equippedToken']=null,typeof clearTokenCache===_0x12ccf2(0xab)&&(clearTokenCache(_0x1a468a[_0x12ccf2(0xdf)]),clearTokenCache()),setTimeout(()=>{const _0x29223b=_0x12ccf2;window['displayLadder']&&typeof window['displayLadder']===_0x29223b(0xab)&&(console['log'](_0x29223b(0xb3)),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x29223b(0x8e)]['refreshUI']==='function'&&window['RedeemStore']['refreshUI']();},0x1f4),console['log']('‚úÖ\x20Token\x20unequipped'),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x98bba7){return console[_0x12ccf2(0xdd)]('Token\x20unequip\x20failed:',_0x98bba7),showMessage('Failed\x20to\x20unequip\x20token:\x20'+_0x98bba7[_0x12ccf2(0x8d)],_0x12ccf2(0xdd)),![];}}async function sellToken(_0x4ce119){const _0x5aaa3f=a46_0x5bbafe,_0x2231c8=auth[_0x5aaa3f(0x108)];if(!_0x2231c8)return showMessage('Please\x20sign\x20in\x20to\x20sell\x20tokens','error'),![];if(!userData['isAdmin'])return showMessage('Only\x20admins\x20can\x20sell\x20tokens',_0x5aaa3f(0xdd)),![];const _0x31981b=TOKENS[_0x4ce119];if(!_0x31981b)return console[_0x5aaa3f(0xdd)]('Token\x20'+_0x4ce119+'\x20not\x20found'),![];if(!userOwnsToken(_0x4ce119))return showMessage('You\x20don\x27t\x20own\x20this\x20token','error'),![];try{const _0x4ddba7=doc(db,'userProfiles',_0x2231c8['uid']),_0x2989ff=await getDoc(_0x4ddba7),_0x130baa=_0x2989ff['data'](),_0x57fa46=Math['floor'](_0x31981b[_0x5aaa3f(0xee)]*0.5),_0x1ec136=(_0x130baa['points']||0x0)+_0x57fa46,_0x270ef6=(_0x130baa['inventory']||[])['filter'](_0x16f40f=>_0x16f40f!=='token_'+_0x4ce119),_0x682ced=_0x130baa['equippedToken']===_0x4ce119?null:_0x130baa[_0x5aaa3f(0xd1)];await updateDoc(_0x4ddba7,{'points':_0x1ec136,'inventory':_0x270ef6,'equippedToken':_0x682ced,'lastSale':serverTimestamp()});const _0x3f440b=doc(db,'userTokens',_0x2231c8['uid']),_0x5a4a4a=await getDoc(_0x3f440b);if(_0x5a4a4a['exists']()){const _0x54ff36=_0x5a4a4a['data'](),_0x51d1da=_0x54ff36['tokens']||[],_0x3523b2=_0x51d1da['filter'](_0x459c13=>_0x459c13['tokenId']!==_0x4ce119);await updateDoc(_0x3f440b,{'tokens':_0x3523b2,'equippedToken':_0x682ced,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0x2231c8['uid'],'userEmail':_0x2231c8['email'],'itemId':'token_'+_0x4ce119,'itemTitle':_0x31981b['name'],'refund':_0x57fa46,'originalPrice':_0x31981b[_0x5aaa3f(0xee)],'type':'sale','category':'token','timestamp':serverTimestamp()}),userData['points']=_0x1ec136,userData['inventory']=_0x270ef6,userData[_0x5aaa3f(0xd1)]=_0x682ced,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x5aaa3f(0xf5)]['toLocaleString']()),typeof clearTokenCache==='function'&&clearTokenCache(_0x2231c8['uid']),console['log']('‚úÖ\x20Sold\x20token\x20'+_0x31981b[_0x5aaa3f(0xac)]+'\x20for\x20'+_0x57fa46+'\x20points'),showMessage('Sold\x20'+_0x31981b['name']+'\x20for\x20'+_0x57fa46+_0x5aaa3f(0xc8),'success'),!![];}catch(_0x3316e8){return console[_0x5aaa3f(0xdd)]('Token\x20sale\x20failed:',_0x3316e8),showMessage('Failed\x20to\x20sell\x20token:\x20'+_0x3316e8['message'],'error'),![];}}function applyTheme(_0x50a6bc){const _0x3c9816=a46_0x5bbafe;if(!userOwnsTheme(_0x50a6bc))return showMessage(_0x3c9816(0x92),'error'),![];return window['ThemeSystem']?(window['ThemeSystem'][_0x3c9816(0x103)](_0x50a6bc),showMessage((THEMES[_0x50a6bc]?.['name']||_0x50a6bc)+'\x20theme\x20applied!','success'),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x3491d7=a46_0x5bbafe,_0x493b1c=document[_0x3491d7(0xca)](_0x3491d7(0xa7));if(!_0x493b1c){console['error']('Themes\x20container\x20not\x20found');return;}_0x493b1c['innerHTML']='',Object['entries'](THEMES)['forEach'](([_0x1018a3,_0x1c3d1b])=>{const _0x2f743b=_0x3491d7,_0x208b19=document['createElement']('div');_0x208b19['className']='store-item',_0x208b19['dataset']['theme']=_0x1018a3,_0x208b19[_0x2f743b(0xb6)]['itemId']='theme_'+_0x1018a3,_0x208b19['dataset'][_0x2f743b(0xee)]=_0x1c3d1b['price'],_0x208b19[_0x2f743b(0xf8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x1018a3+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x1c3d1b['price']===0x0?'FREE':_0x1c3d1b['price']+_0x2f743b(0xf2))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x1c3d1b[_0x2f743b(0xac)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x1c3d1b['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x493b1c[_0x2f743b(0xe4)](_0x208b19);}),setupThemeButtons();}function buildTokenItems(){const _0x29c007=a46_0x5bbafe,_0x4333d7=document['querySelector']('.tokens-grid');if(!_0x4333d7){console['error']('Tokens\x20container\x20not\x20found');return;}_0x4333d7['innerHTML']='',Object['entries'](TOKENS)[_0x29c007(0x99)](([_0x452a39,_0x4af701])=>{const _0x32fe63=_0x29c007,_0x27abe4=document[_0x32fe63(0xb1)]('div');_0x27abe4['className']='store-item\x20token-item',_0x27abe4[_0x32fe63(0xb6)][_0x32fe63(0xd3)]=_0x452a39,_0x27abe4['dataset']['itemId']='token_'+_0x452a39,_0x27abe4['dataset']['price']=_0x4af701['price'];const _0x1d5e15=userData['isAdmin']&&userOwnsToken(_0x452a39)?_0x32fe63(0x93)+Math[_0x32fe63(0xec)](_0x4af701['price']*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x27abe4[_0x32fe63(0xf8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x4af701['image']+'\x22\x20alt=\x22'+_0x4af701[_0x32fe63(0xac)]+'\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+_0x4af701[_0x32fe63(0xee)]+'\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1d5e15+_0x32fe63(0x106),_0x4333d7['appendChild'](_0x27abe4);}),setupTokenButtons();}function setupThemeButtons(){const _0x4d8d72=a46_0x5bbafe,_0x5963ee=document[_0x4d8d72(0xe3)]('.theme-select-btn');_0x5963ee['forEach'](_0x38764f=>{const _0xd71a48=_0x4d8d72;_0x38764f[_0xd71a48(0xbd)]('click',async _0x25bb62=>{const _0x53b8ab=_0xd71a48;_0x25bb62['preventDefault']();const _0x4c652b=auth[_0x53b8ab(0x108)];if(!_0x4c652b){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x2d8ee1=_0x38764f['closest']('[data-theme]'),_0x13f5f5=_0x2d8ee1[_0x53b8ab(0xb6)][_0x53b8ab(0xa1)],_0x3117f3=THEMES[_0x13f5f5];if(!_0x3117f3){console['error']('Theme\x20'+_0x13f5f5+'\x20not\x20found');return;}console[_0x53b8ab(0xa0)]('Theme\x20clicked:\x20'+_0x3117f3['name']+'\x20('+_0x13f5f5+')');if(_0x38764f[_0x53b8ab(0x87)]){_0x3117f3[_0x53b8ab(0xee)]>0x0&&showMessage(_0x53b8ab(0x8a)+_0x3117f3[_0x53b8ab(0xee)]+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x38764f[_0x53b8ab(0xaa)]==='Current\x20Theme'){showMessage(_0x3117f3['name']+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x38764f[_0x53b8ab(0xaa)]==='Apply\x20Theme'){applyTheme(_0x13f5f5),updateThemeButtons();return;}if(_0x38764f['textContent']['includes'](_0x53b8ab(0x97))){const _0x5e8310=window['confirm']('Purchase\x20'+_0x3117f3['name']+'\x20theme\x20for\x20'+_0x3117f3['price']+_0x53b8ab(0xc6));if(!_0x5e8310)return;const _0x50b784=await purchaseTheme(_0x13f5f5);_0x50b784&&(showMessage(_0x3117f3['name']+'\x20theme\x20purchased!',_0x53b8ab(0xd4)),applyTheme(_0x13f5f5),updateThemeButtons());return;}userOwnsTheme(_0x13f5f5)?applyTheme(_0x13f5f5):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function setupTokenButtons(){const _0x3231ca=a46_0x5bbafe,_0x17ee32=document[_0x3231ca(0xe3)]('.token-select-btn'),_0x439705=document[_0x3231ca(0xe3)]('.token-equip-btn'),_0x1e35b9=document[_0x3231ca(0xe3)]('.token-sell-btn');_0x17ee32[_0x3231ca(0x99)](_0x1a54a8=>{_0x1a54a8['addEventListener']('click',async _0x35f28d=>{const _0x106ded=a46_0x2779;_0x35f28d['preventDefault']();const _0x2870f0=auth['currentUser'];if(!_0x2870f0){showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error');return;}const _0x5af32f=_0x1a54a8[_0x106ded(0xe5)](_0x106ded(0xcb)),_0x4c771b=_0x5af32f[_0x106ded(0xb6)]['token'],_0x7a343f=TOKENS[_0x4c771b];if(!_0x7a343f){console[_0x106ded(0xdd)](_0x106ded(0xdb)+_0x4c771b+'\x20not\x20found');return;}console['log']('Token\x20clicked:\x20'+_0x7a343f['name']+'\x20('+_0x4c771b+')');if(_0x1a54a8[_0x106ded(0x87)]){showMessage(_0x106ded(0x8a)+_0x7a343f['price']+'\x20points\x20to\x20purchase\x20this\x20token','error');return;}if(_0x1a54a8[_0x106ded(0xaa)]==='Owned'){showMessage('You\x20already\x20own\x20the\x20'+_0x7a343f[_0x106ded(0xac)]+_0x106ded(0xb9),'info');return;}if(_0x1a54a8['textContent'][_0x106ded(0x9c)](_0x106ded(0x9a))||_0x1a54a8['textContent'][_0x106ded(0x9c)]('Buy')){const _0x4c892c=window[_0x106ded(0x82)](_0x106ded(0x105)+_0x7a343f[_0x106ded(0xac)]+_0x106ded(0x7b)+_0x7a343f['price']+'\x20points?');if(!_0x4c892c)return;const _0x51c77d=await purchaseToken(_0x4c771b);_0x51c77d&&updateTokenButtons();return;}});}),_0x439705['forEach'](_0x4c6293=>{const _0x1978f7=_0x3231ca;_0x4c6293[_0x1978f7(0xbd)]('click',async _0x4085fa=>{const _0x53a521=_0x1978f7;_0x4085fa['preventDefault']();const _0x2109da=_0x4c6293['closest']('[data-token]'),_0x2c7925=_0x2109da[_0x53a521(0xb6)]['token'],_0xb2e8e5=TOKENS[_0x2c7925];if(_0x4c6293[_0x53a521(0xaa)]==='Equipped'){const _0x24d1d4=window[_0x53a521(0x82)]('Unequip\x20'+_0xb2e8e5[_0x53a521(0xac)]+'?');if(!_0x24d1d4)return;const _0x1c0876=await unequipToken();_0x1c0876&&updateTokenButtons();}else{const _0x33e855=window['confirm']('Equip\x20'+_0xb2e8e5[_0x53a521(0xac)]+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0x33e855)return;const _0x144318=await equipToken(_0x2c7925);_0x144318&&updateTokenButtons();}});}),_0x1e35b9['forEach'](_0xb46ca8=>{_0xb46ca8['addEventListener']('click',async _0x3683f2=>{const _0x29f1f1=a46_0x2779;_0x3683f2['preventDefault']();const _0x4df09e=_0xb46ca8['closest']('[data-token]'),_0x41ee9b=_0x4df09e['dataset']['token'],_0x5d0a18=TOKENS[_0x41ee9b],_0x11eba5=Math['floor'](_0x5d0a18['price']*0.5),_0x418905=window['confirm']('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x5d0a18['name']+_0x29f1f1(0xa9)+_0x11eba5+'\x20points?\x20This\x20cannot\x20be\x20undone.');if(!_0x418905)return;const _0x2c7ee8=await sellToken(_0x41ee9b);_0x2c7ee8&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0x2631c0=a46_0x5bbafe,_0xe37317=window['ThemeSystem']?window['ThemeSystem'][_0x2631c0(0xf3)]():'default',_0x17cb0a=auth['currentUser'];document[_0x2631c0(0xe3)](_0x2631c0(0x7e))['forEach'](_0x14d4f0=>{const _0x1c008a=_0x2631c0,_0xb50cca=_0x14d4f0['closest'](_0x1c008a(0xa5)),_0x3a4e49=_0xb50cca['dataset'][_0x1c008a(0xa1)],_0x467b93=THEMES[_0x3a4e49];if(!_0x467b93)return;_0x14d4f0['disabled']=![],_0x14d4f0['style']['opacity']='',_0x14d4f0['style']['cursor']='pointer',_0x14d4f0[_0x1c008a(0x107)][_0x1c008a(0xc7)]('current-theme',_0x1c008a(0x84),'can-afford',_0x1c008a(0x10b),_0x1c008a(0x88),'sign-in-paid');if(!_0x17cb0a){_0x467b93['price']===0x0?(_0x14d4f0['textContent']='Sign\x20in\x20to\x20Apply',_0x14d4f0[_0x1c008a(0x107)]['add'](_0x1c008a(0x88))):(_0x14d4f0['textContent']='Sign\x20in\x20to\x20Purchase',_0x14d4f0['disabled']=!![],_0x14d4f0['style'][_0x1c008a(0xd2)]='0.7',_0x14d4f0['classList'][_0x1c008a(0xf0)](_0x1c008a(0xbf)));return;}if(_0x3a4e49===_0xe37317){_0x14d4f0[_0x1c008a(0xaa)]='Current\x20Theme',_0x14d4f0['classList']['add']('current-theme'),_0x14d4f0['disabled']=!![],_0x14d4f0['style'][_0x1c008a(0xc0)]='default';return;}if(userOwnsTheme(_0x3a4e49)){_0x14d4f0['textContent']='Apply\x20Theme',_0x14d4f0['classList']['add']('apply-theme');return;}if(userData[_0x1c008a(0xf5)]>=_0x467b93['price']){_0x14d4f0['textContent']='Buy\x20for\x20'+_0x467b93['price']+'\x20Points',_0x14d4f0['classList']['add']('can-afford');return;}_0x14d4f0['textContent']=_0x1c008a(0x9d)+_0x467b93['price']+'\x20Points',_0x14d4f0['classList']['add'](_0x1c008a(0x10b)),_0x14d4f0['style'][_0x1c008a(0xd2)]='0.5',_0x14d4f0['disabled']=!![],_0x14d4f0['style']['cursor']=_0x1c008a(0xeb);});}function updateTokenButtons(){const _0x5081f7=a46_0x5bbafe,_0x572f49=auth[_0x5081f7(0x108)];document['querySelectorAll']('.token-select-btn')['forEach'](_0x5ffdac=>{const _0x5aceee=_0x5081f7,_0x4559d1=_0x5ffdac[_0x5aceee(0xe5)]('[data-token]'),_0x2e8b6f=_0x4559d1['dataset']['token'],_0x1ea322=TOKENS[_0x2e8b6f],_0x314ddc=_0x4559d1['querySelector']('.token-equip-btn'),_0x30c4b5=_0x4559d1[_0x5aceee(0xca)]('.token-sell-btn');if(!_0x1ea322)return;_0x5ffdac['disabled']=![],_0x5ffdac[_0x5aceee(0x8c)]['opacity']='',_0x5ffdac['style']['cursor']='pointer';_0x314ddc&&(_0x314ddc['style']['display']='none',_0x314ddc[_0x5aceee(0x87)]=![],_0x314ddc['style']['opacity']='',_0x314ddc['classList']['remove'](_0x5aceee(0xb2),'can-equip'));_0x30c4b5&&(_0x30c4b5[_0x5aceee(0x8c)]['display']='none');_0x5ffdac[_0x5aceee(0x107)][_0x5aceee(0xc7)](_0x5aceee(0xe1),_0x5aceee(0xe6),'cannot-afford','sign-in');if(!_0x572f49){_0x5ffdac[_0x5aceee(0xaa)]='Sign\x20in\x20to\x20Purchase',_0x5ffdac[_0x5aceee(0x87)]=!![],_0x5ffdac['style']['opacity']=_0x5aceee(0xdc),_0x5ffdac['classList']['add'](_0x5aceee(0x7f));return;}if(userOwnsToken(_0x2e8b6f)){_0x5ffdac['textContent']='Owned',_0x5ffdac[_0x5aceee(0x107)]['add'](_0x5aceee(0xe1)),_0x5ffdac[_0x5aceee(0x87)]=!![],_0x5ffdac['style'][_0x5aceee(0xc0)]='default',_0x5ffdac[_0x5aceee(0x8c)]['background']='var(--success-color,\x20#4CAF50)';_0x314ddc&&(_0x314ddc[_0x5aceee(0x8c)]['display']='block',userHasTokenEquipped(_0x2e8b6f)?(_0x314ddc['textContent']=_0x5aceee(0xa8),_0x314ddc['classList']['add']('equipped'),_0x314ddc[_0x5aceee(0x8c)]['background']='var(--accent-color,\x20#2196F3)',_0x314ddc['style']['cursor']='pointer'):(_0x314ddc['textContent']='Equip',_0x314ddc['classList']['add']('can-equip'),_0x314ddc[_0x5aceee(0x8c)][_0x5aceee(0xf6)]='var(--info-color,\x20#17a2b8)',_0x314ddc[_0x5aceee(0x8c)]['cursor']='pointer'));_0x30c4b5&&userData[_0x5aceee(0xd8)]&&(_0x30c4b5['style'][_0x5aceee(0xe8)]='block');return;}if(userData[_0x5aceee(0xf5)]>=_0x1ea322['price']){_0x5ffdac[_0x5aceee(0xaa)]=_0x5aceee(0xc9)+_0x1ea322[_0x5aceee(0xee)]+_0x5aceee(0xf2),_0x5ffdac['classList']['add']('can-afford'),_0x5ffdac['style']['background']='';return;}_0x5ffdac['textContent']='Need\x20'+_0x1ea322['price']+'\x20Points',_0x5ffdac['classList']['add']('cannot-afford'),_0x5ffdac['style']['opacity']=_0x5aceee(0xe2),_0x5ffdac['disabled']=!![],_0x5ffdac['style']['cursor']='not-allowed',_0x5ffdac[_0x5aceee(0x8c)]['background']='var(--muted-color,\x20#757575)';});}function showMessage(_0x32abcc,_0x526678='info'){const _0x35d47a=a46_0x5bbafe,_0x18ea7a=document[_0x35d47a(0x94)]('store-message');_0x18ea7a&&_0x18ea7a[_0x35d47a(0xc7)]();const _0x1cfec4=document['createElement']('div');_0x1cfec4['id']=_0x35d47a(0x7d),_0x1cfec4[_0x35d47a(0xda)]='store-message\x20store-message-'+_0x526678,_0x1cfec4['textContent']=_0x32abcc,document['body']['appendChild'](_0x1cfec4),requestAnimationFrame(()=>{const _0x524582=_0x35d47a;_0x1cfec4['classList'][_0x524582(0xf0)](_0x524582(0x100));}),setTimeout(()=>{const _0x18ba3c=_0x35d47a;_0x1cfec4[_0x18ba3c(0x107)]['remove']('visible'),setTimeout(()=>{const _0x4b19df=_0x18ba3c;_0x1cfec4[_0x4b19df(0xc3)]&&_0x1cfec4['remove']();},0x12c);},0xfa0);}window[a46_0x5bbafe(0x8e)]={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console[a46_0x5bbafe(0xa0)]('üè™\x20Redeem\x20store\x20loaded');