const a0_0x59c637=a0_0x2c9d;(function(_0x405b0c,_0x2781b4){const _0x404973=a0_0x2c9d,_0x156d62=_0x405b0c();while(!![]){try{const _0x2e2e03=parseInt(_0x404973(0x1b4))/0x1+parseInt(_0x404973(0x19a))/0x2*(-parseInt(_0x404973(0x1a5))/0x3)+-parseInt(_0x404973(0x1a7))/0x4*(parseInt(_0x404973(0x1b3))/0x5)+-parseInt(_0x404973(0x18d))/0x6*(-parseInt(_0x404973(0x1a0))/0x7)+parseInt(_0x404973(0x189))/0x8+parseInt(_0x404973(0x184))/0x9+-parseInt(_0x404973(0x1ac))/0xa;if(_0x2e2e03===_0x2781b4)break;else _0x156d62['push'](_0x156d62['shift']());}catch(_0x4dcbce){_0x156d62['push'](_0x156d62['shift']());}}}(a0_0x5962,0xf2836));const a0_0x5dff26=(function(){let _0x4fbab7=!![];return function(_0x1a34ee,_0x15f92a){const _0x3c67c5=_0x4fbab7?function(){const _0x576e5b=a0_0x2c9d;if(_0x15f92a){const _0x26c69f=_0x15f92a[_0x576e5b(0x185)](_0x1a34ee,arguments);return _0x15f92a=null,_0x26c69f;}}:function(){};return _0x4fbab7=![],_0x3c67c5;};}()),a0_0x28a47=a0_0x5dff26(this,function(){const _0x45b415=a0_0x2c9d;let _0x575092;try{const _0x3c0ff6=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x575092=_0x3c0ff6();}catch(_0x246a20){_0x575092=window;}const _0x5df90e=_0x575092['console']=_0x575092[_0x45b415(0x1a1)]||{},_0xe40a18=['log','warn','info','error',_0x45b415(0x1aa),'table',_0x45b415(0x1b8)];for(let _0x558069=0x0;_0x558069<_0xe40a18[_0x45b415(0x1b5)];_0x558069++){const _0x34a96e=a0_0x5dff26[_0x45b415(0x1a2)]['prototype']['bind'](a0_0x5dff26),_0x41f80c=_0xe40a18[_0x558069],_0x3d81fa=_0x5df90e[_0x41f80c]||_0x34a96e;_0x34a96e['__proto__']=a0_0x5dff26['bind'](a0_0x5dff26),_0x34a96e['toString']=_0x3d81fa['toString']['bind'](_0x3d81fa),_0x5df90e[_0x41f80c]=_0x34a96e;}});a0_0x28a47();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener'](a0_0x59c637(0x19e),()=>{const _0x384d76=a0_0x59c637,_0x5f2928=document[_0x384d76(0x1a6)]('d1-switch'),_0xfab807=document['getElementById']('d2-switch');console[_0x384d76(0x199)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x5f2928),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0xfab807);function _0x346169(){document['querySelectorAll']('input[name=\x22ladder\x22]')['forEach'](_0x57aaa2=>{_0x57aaa2['addEventListener']('change',_0x36d6ed=>{const _0x22263b=a0_0x2c9d;_0x36d6ed[_0x22263b(0x191)]['checked']&&(currentLadder=_0x36d6ed[_0x22263b(0x191)]['value'],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x346169();const _0x1db856=document['getElementById']('join-ladder-button');_0x1db856&&_0x1db856['addEventListener'](_0x384d76(0x194),handleJoinLadder),onAuthStateChanged(auth,_0x3d2fc7=>{const _0x2aeec2=_0x384d76;if(_0x3d2fc7)checkUserLadderStatus();else{const _0x2027c4=document['getElementById']('ladder-join-prompt');_0x2027c4&&(_0x2027c4[_0x2aeec2(0x1a8)]['display']=_0x2aeec2(0x1a4));}});});function getCollectionName(_0x56be62){const _0x168be0=a0_0x59c637;switch(_0x56be62?.['toUpperCase']()){case'D1':return'players';case'D2':return'playersD2';case'D3':return _0x168be0(0x1b2);case'DUOS':case _0x168be0(0x193):return'playersDuos';case'CTF':return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x56be62+',\x20defaulting\x20to\x20D1');return'players';}}function a0_0x2c9d(_0x15ff29,_0x4b19a7){const _0x5a6b4f=a0_0x5962();return a0_0x2c9d=function(_0x28a47,_0x5dff26){_0x28a47=_0x28a47-0x183;let _0x113116=_0x5a6b4f[_0x28a47];return _0x113116;},a0_0x2c9d(_0x15ff29,_0x4b19a7);}async function checkUserLadderStatus(){const _0x28c34a=a0_0x59c637;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x3011c0=auth['currentUser'],_0x4104d2=document[_0x28c34a(0x1a6)]('ladder-join-prompt'),_0x1e1f05=document[_0x28c34a(0x1a6)](_0x28c34a(0x18c)),_0x598f37=document[_0x28c34a(0x1a6)]('tiny-join-button');if(!_0x3011c0||!_0x3011c0['uid']||!_0x4104d2||!_0x1e1f05||!_0x598f37){if(_0x4104d2)_0x4104d2['style']['display']='none';if(_0x598f37)_0x598f37['style']['display']='none';return;}try{try{await _0x3011c0[_0x28c34a(0x196)](![]);}catch(_0xe2c94f){console[_0x28c34a(0x1ab)](_0x28c34a(0x197),_0xe2c94f),_0x4104d2[_0x28c34a(0x1a8)][_0x28c34a(0x1b9)]='none',_0x598f37[_0x28c34a(0x1a8)]['display']=_0x28c34a(0x1a4);return;}const _0x4811a3=getCollectionName(currentLadder),_0x4d7f62=doc(db,_0x4811a3,_0x3011c0['uid']),_0x158bb6=await getDoc(_0x4d7f62);if(_0x158bb6['exists']())_0x4104d2[_0x28c34a(0x1a8)]['display']=_0x28c34a(0x1a4),_0x598f37['style']['display']='none';else{_0x4104d2['style']['display']='none',_0x598f37['style'][_0x28c34a(0x1b9)]='block',_0x1e1f05['textContent']=currentLadder,_0x598f37['onclick']=()=>{const _0x11d4c4=_0x28c34a;_0x4104d2['style']['display']==='block'?_0x4104d2['style']['display']=_0x11d4c4(0x1a4):_0x4104d2['style']['display']='block';};const _0x238870=document[_0x28c34a(0x1a6)](_0x28c34a(0x192)),_0x4a6f31=document[_0x28c34a(0x1a6)]('ladder-join-status');if(_0x238870)_0x238870['value']='';_0x4a6f31&&(_0x4a6f31['textContent']='',_0x4a6f31['className']=_0x28c34a(0x18e));}}catch(_0x3f58a4){console['error']('Error\x20checking\x20ladder\x20status:',_0x3f58a4),_0x4104d2[_0x28c34a(0x1a8)]['display']=_0x28c34a(0x1a4),_0x598f37[_0x28c34a(0x1a8)][_0x28c34a(0x1b9)]='none';}}function a0_0x5962(){const _0x171b82=['target','join-username-input','DUO','click','ladder-join-status\x20error','getIdToken','Authentication\x20verification\x20failed:','players','log','206966psrqqU','ladder-join-status\x20loading','Error\x20joining\x20ladder:\x20','username','DOMContentLoaded','join-ladder-button','7567kpvYjk','console','constructor','DUOS','none','33MaeAgL','getElementById','156NLNOCP','style','Verifying\x20username...','exception','error','5949940kykVey','textContent','\x20ladder...','location','className','Please\x20enter\x20your\x20username\x20to\x20confirm.','playersD3','62255XPfSEu','844599MuRbwr','length','\x22\x20to\x20confirm.','currentUser','trace','display','email','718290Lakqsh','apply','disabled','docs','exists','11133376HSSXKD','split','nonParticipants','join-ladder-type','4974MRVBub','ladder-join-status','value','uid'];a0_0x5962=function(){return _0x171b82;};return a0_0x5962();}async function handleJoinLadder(){const _0x1e6dc1=a0_0x59c637,_0x7c4d87=auth[_0x1e6dc1(0x1b7)],_0x58d27b=document['getElementById'](_0x1e6dc1(0x19f)),_0x5564b1=document['getElementById']('ladder-join-status'),_0x572fad=document['getElementById']('join-username-input');if(!_0x7c4d87||!_0x7c4d87['uid']){_0x5564b1['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x5564b1['className']='ladder-join-status\x20error';return;}try{await _0x7c4d87['getIdToken'](!![]);}catch(_0x358763){console['error']('Authentication\x20error:',_0x358763),_0x5564b1['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x5564b1['className']='ladder-join-status\x20error';return;}if(!_0x572fad||!_0x572fad[_0x1e6dc1(0x18f)]['trim']()){_0x5564b1['textContent']=_0x1e6dc1(0x1b1),_0x5564b1['className']=_0x1e6dc1(0x195);return;}try{_0x58d27b['disabled']=!![],_0x5564b1['textContent']=_0x1e6dc1(0x1a9),_0x5564b1['className']=_0x1e6dc1(0x19b);let _0xae0a87='',_0x3e02c7=null;const _0x9a92f9=[_0x1e6dc1(0x198),'playersD2',_0x1e6dc1(0x1b2),'playersDuos','playersCTF',_0x1e6dc1(0x18b)];for(const _0x1f9552 of _0x9a92f9){try{const _0xe725f1=doc(db,_0x1f9552,_0x7c4d87[_0x1e6dc1(0x190)]),_0x391325=await getDoc(_0xe725f1);if(_0x391325['exists']()){_0x3e02c7=_0x391325['data']();if(_0x3e02c7[_0x1e6dc1(0x19d)]){_0xae0a87=_0x3e02c7['username'];break;}}}catch(_0x110031){console['error']('Error\x20checking\x20'+_0x1f9552+':',_0x110031);}}!_0xae0a87&&_0x7c4d87[_0x1e6dc1(0x183)]&&(_0xae0a87=_0x7c4d87['email'][_0x1e6dc1(0x18a)]('@')[0x0]);if(!_0xae0a87){_0x5564b1['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x5564b1['className']='ladder-join-status\x20error',_0x58d27b[_0x1e6dc1(0x186)]=![];return;}const _0x1ec445=_0x572fad['value']['trim']();if(_0xae0a87&&_0x1ec445['toLowerCase']()!==_0xae0a87['toLowerCase']()){_0x5564b1['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0xae0a87+_0x1e6dc1(0x1b6),_0x5564b1[_0x1e6dc1(0x1b0)]='ladder-join-status\x20error',_0x58d27b['disabled']=![];return;}_0x5564b1['textContent']='Joining\x20'+currentLadder+_0x1e6dc1(0x1ae);const _0x262a96=getCollectionName(currentLadder),_0x2780e9=doc(db,_0x262a96,_0x7c4d87['uid']),_0x4e3921=await getDoc(_0x2780e9);if(_0x4e3921[_0x1e6dc1(0x188)]()){_0x5564b1[_0x1e6dc1(0x1ad)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x5564b1[_0x1e6dc1(0x1b0)]=_0x1e6dc1(0x195),_0x58d27b['disabled']=![];return;}try{await _0x7c4d87[_0x1e6dc1(0x196)](!![]);}catch(_0x2aa214){_0x5564b1[_0x1e6dc1(0x1ad)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x5564b1[_0x1e6dc1(0x1b0)]='ladder-join-status\x20error',_0x58d27b['disabled']=![];return;}const _0x502a52=_0xae0a87,_0x45800f=collection(db,_0x262a96),_0x96ee74=query(_0x45800f,orderBy('position','desc'),limit(0x1)),_0x4cd7f1=await getDocs(_0x96ee74);let _0x258f45=0x1;if(!_0x4cd7f1['empty']){const _0x4e4c42=_0x4cd7f1[_0x1e6dc1(0x187)][0x0]['data']();_0x258f45=(_0x4e4c42['position']||0x0)+0x1;}const _0x2fc628={'username':_0x502a52,'email':_0x7c4d87['email'],'eloRating':0x4b0,'position':_0x258f45,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder===_0x1e6dc1(0x1a3)&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x2780e9,_0x2fc628),currentLadder==='DUOS'?_0x5564b1['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x5564b1[_0x1e6dc1(0x1ad)]='Successfully\x20joined\x20the\x20'+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x5564b1[_0x1e6dc1(0x1b0)]='ladder-join-status\x20success',setTimeout(()=>{const _0x509883=_0x1e6dc1;window[_0x509883(0x1af)]['reload']();},0x7d0);}catch(_0x141e16){console['error']('Error\x20joining\x20ladder:',_0x141e16),_0x5564b1[_0x1e6dc1(0x1ad)]=_0x1e6dc1(0x19c)+_0x141e16['message'],_0x5564b1['className']='ladder-join-status\x20error',_0x58d27b['disabled']=![];}}