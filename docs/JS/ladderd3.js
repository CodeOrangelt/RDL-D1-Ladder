const a0_0x81a83f=a0_0x1dbd;(function(_0x1f331a,_0x2af935){const _0x3aeffa=a0_0x1dbd,_0x36fa8a=_0x1f331a();while(!![]){try{const _0x5d11f9=parseInt(_0x3aeffa(0xc6))/0x1+parseInt(_0x3aeffa(0xd9))/0x2*(parseInt(_0x3aeffa(0xc0))/0x3)+-parseInt(_0x3aeffa(0xff))/0x4+-parseInt(_0x3aeffa(0xe1))/0x5*(parseInt(_0x3aeffa(0xcb))/0x6)+parseInt(_0x3aeffa(0xbf))/0x7*(-parseInt(_0x3aeffa(0xe9))/0x8)+-parseInt(_0x3aeffa(0xec))/0x9+-parseInt(_0x3aeffa(0xc2))/0xa*(-parseInt(_0x3aeffa(0xf1))/0xb);if(_0x5d11f9===_0x2af935)break;else _0x36fa8a['push'](_0x36fa8a['shift']());}catch(_0x369c66){_0x36fa8a['push'](_0x36fa8a['shift']());}}}(a0_0x5970,0xb6ce6));const a0_0x286e86=(function(){let _0x568575=!![];return function(_0x215781,_0x3d0daf){const _0x5f4fca=_0x568575?function(){if(_0x3d0daf){const _0x4dc3a0=_0x3d0daf['apply'](_0x215781,arguments);return _0x3d0daf=null,_0x4dc3a0;}}:function(){};return _0x568575=![],_0x5f4fca;};}()),a0_0x3e310e=a0_0x286e86(this,function(){const _0x215c0c=a0_0x1dbd;let _0xe70954;try{const _0xb2e9a5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xe70954=_0xb2e9a5();}catch(_0x3cf3af){_0xe70954=window;}const _0x2c9148=_0xe70954['console']=_0xe70954['console']||{},_0x50d74d=[_0x215c0c(0xc1),_0x215c0c(0xd5),'info','error','exception','table','trace'];for(let _0x4a4a5e=0x0;_0x4a4a5e<_0x50d74d['length'];_0x4a4a5e++){const _0x184d92=a0_0x286e86[_0x215c0c(0xc7)]['prototype']['bind'](a0_0x286e86),_0x5e65ba=_0x50d74d[_0x4a4a5e],_0x2975a4=_0x2c9148[_0x5e65ba]||_0x184d92;_0x184d92['__proto__']=a0_0x286e86['bind'](a0_0x286e86),_0x184d92['toString']=_0x2975a4['toString'][_0x215c0c(0xd1)](_0x2975a4),_0x2c9148[_0x5e65ba]=_0x184d92;}});function a0_0x5970(){const _0x520300=['bind','losses','find','gameMode','warn','D3:\x20Fallback\x20query\x20failed:','then','error','7854MKbFkf','D3:\x20Error\x20fetching\x20tokens:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20','playersD3','desc','set','<img\x20src=\x22','(Equipped)','5GzTmUp','style','previousElo','userProfiles','totalKills','querySelector','</td>\x0a\x20\x20\x20\x20</tr>','forEach','2776cVxslS','innerHTML','#50C878','13231899zbfbNX','display','tokenName','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','join','19074792VdiCOP','newElo','push','totalMatches','loserScore','approvedMatchesD3','playerUsername','createElement','message','country','winRate','wins','head','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','3429400RfIwpi','totalDeaths','#F44336','has','size','includes','data','7931jTKOOo','585EjHgOr','log','20euPwPz','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','timestamp','Error\x20loading\x20D3\x20ladder:','394584uVAxrq','constructor','position','visible','playerId','6954042XdhhfF','toLowerCase','username','Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:','displayLadderD3\x20function\x20not\x20available','get'];a0_0x5970=function(){return _0x520300;};return a0_0x5970();}a0_0x3e310e();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a0_0x1dbd(_0x48dc28,_0x217bc1){const _0xa4d14b=a0_0x5970();return a0_0x1dbd=function(_0x3e310e,_0x286e86){_0x3e310e=_0x3e310e-0xbe;let _0x340118=_0xa4d14b[_0x3e310e];return _0x340118;},a0_0x1dbd(_0x48dc28,_0x217bc1);}import{db}from'./firebase-config.js';import a0_0x1434a1 from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const styleEl=document[a0_0x81a83f(0xf8)]('style');styleEl['textContent']='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document[a0_0x81a83f(0xfd)]['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x84d43f=![]){const _0x306627=a0_0x81a83f,_0x19544b=document['querySelector']('#ladder-d3\x20tbody');if(!_0x19544b){console[_0x306627(0xd8)]('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x19544b['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x278cfe=Date['now']();if(!_0x84d43f&&playerCacheD3['data']&&_0x278cfe-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x4bf153=collection(db,'playersD3'),_0x5ae88c=await getDocs(_0x4bf153),_0x3c3a14=[];_0x5ae88c['forEach'](_0x12eda6=>{const _0x407419=_0x306627,_0x29a3cc=_0x12eda6['data']();_0x29a3cc['username']&&_0x3c3a14[_0x407419(0xf3)]({..._0x29a3cc,'id':_0x12eda6['id'],'elo':_0x29a3cc['eloRating']||0x0,'position':_0x29a3cc['position']||Number['MAX_SAFE_INTEGER']});});const _0x72473d=collection(db,_0x306627(0xe4)),_0x1e2a17=await getDocs(_0x72473d),_0x291436=new Map();_0x1e2a17['forEach'](_0xa2d29d=>{const _0x460730=_0xa2d29d['data']();_0x460730['username']&&_0x291436['set'](_0x460730['username']['toLowerCase'](),_0x460730);});for(const _0x3c1a2c of _0x3c3a14){const _0x2f618e=_0x3c1a2c['username']['toLowerCase']();if(_0x291436['has'](_0x2f618e)){const _0x1be7eb=_0x291436['get'](_0x2f618e);_0x1be7eb[_0x306627(0xfa)]&&(_0x3c1a2c[_0x306627(0xfa)]=_0x1be7eb['country'][_0x306627(0xcc)]()),_0x3c1a2c['points']=_0x1be7eb['points']||0x0;}else _0x3c1a2c['points']=0x0;}const _0xd7f4f5=_0x3c3a14['map'](_0x5a8a8e=>_0x5a8a8e['username']),_0x50e278=await fetchBatchMatchStatsD3(_0xd7f4f5);_0x3c3a14['sort']((_0x154979,_0x684836)=>{const _0x55633b=_0x306627,_0x48991b=_0x50e278[_0x55633b(0xd0)](_0x154979['username'])?.[_0x55633b(0xf4)]||0x0,_0x3befe1=_0x50e278['get'](_0x684836['username'])?.['totalMatches']||0x0;if(_0x48991b===0x0!==(_0x3befe1===0x0))return _0x48991b===0x0?0x1:-0x1;return(_0x154979[_0x55633b(0xc8)]||0x3e7)-(_0x684836[_0x55633b(0xc8)]||0x3e7);}),_0x3c3a14['forEach']((_0x4d87e4,_0x5d0011)=>{const _0x21c2e3=_0x306627;_0x4d87e4[_0x21c2e3(0xc8)]=_0x5d0011+0x1;}),playerCacheD3[_0x306627(0xbe)]=_0x3c3a14,playerCacheD3[_0x306627(0xc4)]=_0x278cfe,updateLadderDisplayD3(_0x3c3a14);}catch(_0x5a7fa1){console['error'](_0x306627(0xc5),_0x5a7fa1),_0x19544b['innerHTML']=_0x306627(0xdb)+_0x5a7fa1[_0x306627(0xf9)]+_0x306627(0xc3);}}function calculateStreakDays(_0x22f2f3){if(!_0x22f2f3)return 0x0;const _0x1fb5c5=_0x22f2f3['toDate'](),_0x27fd3a=new Date(),_0x163572=Math['abs'](_0x27fd3a-_0x1fb5c5);return Math['ceil'](_0x163572/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x5b4c0f,_0x43724b){const _0x2d6579=a0_0x81a83f;try{const _0x48a3b3=collection(db,'playersD3'),_0x5cc352=await getDocs(_0x48a3b3),_0x5c5cee=[];_0x5cc352['forEach'](_0x2e20d9=>{const _0x25179d=a0_0x1dbd;_0x5c5cee['push']({'id':_0x2e20d9['id'],..._0x2e20d9[_0x25179d(0xbe)]()});});const _0x2fc4dd=_0x5c5cee[_0x2d6579(0xd3)](_0x7c3961=>_0x7c3961[_0x2d6579(0xcd)]===_0x5b4c0f),_0x1ead29=_0x5c5cee['find'](_0x23496f=>_0x23496f['username']===_0x43724b);if(!_0x2fc4dd||!_0x1ead29){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x2fc4dd['position']>_0x1ead29['position']){const _0x5c730d=_0x1ead29[_0x2d6579(0xc8)];for(const _0x12975e of _0x5c5cee){_0x12975e['position']>=_0x1ead29['position']&&_0x12975e['position']<_0x2fc4dd[_0x2d6579(0xc8)]&&_0x12975e['username']!==_0x5b4c0f&&await updateDoc(doc(db,'playersD3',_0x12975e['id']),{'position':_0x12975e[_0x2d6579(0xc8)]+0x1});}await updateDoc(doc(db,_0x2d6579(0xdc),_0x2fc4dd['id']),{'position':_0x5c730d});if(_0x5c730d===0x1){const _0x5ab949=doc(db,_0x2d6579(0xdc),_0x2fc4dd['id']),_0x49458b=await getDoc(_0x5ab949);!_0x49458b[_0x2d6579(0xbe)]()['firstPlaceDate']&&await updateDoc(_0x5ab949,{'firstPlaceDate':Timestamp['now']()});}if(_0x1ead29['position']===0x1){const _0x50b203=doc(db,'playersD3',_0x1ead29['id']);await updateDoc(_0x50b203,{'firstPlaceDate':null});}playerCacheD3['timestamp']=0x0;}}catch(_0x22e4a5){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x22e4a5);}}async function updateLadderDisplayD3(_0x51c35f){const _0xd668fa=a0_0x81a83f;_0x51c35f['sort']((_0x3e6af7,_0x3c0aea)=>_0x3e6af7[_0xd668fa(0xc8)]-_0x3c0aea['position']);const _0x420568=document['querySelector']('#ladder-d3\x20tbody');if(!_0x420568)return;_0x420568['innerHTML']='';const _0x2d0b09=_0x51c35f['map'](_0x415ae7=>_0x415ae7['username']),_0x255b55=await fetchBatchMatchStatsD3(_0x2d0b09);let _0x24215e=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x24215e=await getTokensByUsernames(_0x2d0b09);}catch(_0x4414b5){console['error'](_0xd668fa(0xda),_0x4414b5);}const _0x2a7d0b=document[_0xd668fa(0xe6)]('#ladder-d3\x20thead\x20tr');_0x2a7d0b&&(_0x2a7d0b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x7465ee=_0x51c35f['map'](_0x413e99=>{const _0x16faa8=_0x255b55['get'](_0x413e99['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x48ad1f=_0x24215e['get'](_0x413e99['username'])||[],_0x307c08=getPrimaryDisplayToken(_0x48ad1f);return createPlayerRowD3(_0x413e99,_0x16faa8,_0x307c08);})[_0xd668fa(0xf0)]('');_0x420568[_0xd668fa(0xea)]=_0x7465ee,getPlayersLastEloChangesD3(_0x2d0b09)[_0xd668fa(0xd7)](_0x21b36a=>{const _0x24c59c=_0xd668fa,_0x1e1e88=new Map();_0x420568['querySelectorAll']('tr')[_0x24c59c(0xe8)]((_0x56157f,_0x58e757)=>{_0x58e757<_0x2d0b09['length']&&_0x1e1e88['set'](_0x2d0b09[_0x58e757],_0x56157f);}),_0x21b36a['forEach']((_0x1b773d,_0xae2c02)=>{const _0x3ecb10=_0x24c59c,_0x3f2b45=_0x1e1e88['get'](_0xae2c02);if(_0x3f2b45&&_0x1b773d!==0x0){const _0xb30e02=_0x3f2b45[_0x3ecb10(0xe6)]('td:nth-child(3)');if(_0xb30e02){const _0xcf82e=_0x1b773d>0x0?'+'+_0x1b773d:''+_0x1b773d,_0x54bfaf=_0xb30e02['querySelector']('.trend-indicator');_0x54bfaf&&(_0x54bfaf['textContent']=_0xcf82e,_0x54bfaf['style']['color']=_0x1b773d>0x0?'#4CAF50':_0x3ecb10(0x101),_0x54bfaf['style']['fontWeight']='bold',_0x54bfaf['style']['fontSize']='0.85em',_0x54bfaf['style'][_0x3ecb10(0xed)]='inline',_0x54bfaf['style']['visibility']=_0x3ecb10(0xc9),_0x54bfaf[_0x3ecb10(0xe2)]['opacity']='1');}}});})['catch'](_0xcc6727=>console['error'](_0xd668fa(0xce),_0xcc6727));}async function fetchBatchMatchStatsD3(_0x381fa3){const _0x1d4bde=a0_0x81a83f,_0x3e9c74=new Map();try{_0x381fa3['forEach'](_0x2b169a=>{const _0x2f4449=a0_0x1dbd;_0x3e9c74[_0x2f4449(0xde)](_0x2b169a,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x11e3e7=collection(db,_0x1d4bde(0xf6)),_0x48c206=await getDocs(_0x11e3e7);_0x48c206['forEach'](_0x5348a5=>{const _0x5e7041=_0x1d4bde,_0x51bb11=_0x5348a5[_0x5e7041(0xbe)](),_0xeca132=_0x51bb11['winnerUsername'],_0x23050a=_0x51bb11['loserUsername'];if(_0x381fa3['includes'](_0xeca132)){const _0x32ed14=_0x3e9c74['get'](_0xeca132);_0x32ed14['wins']++,_0x32ed14['totalMatches']++,_0x32ed14[_0x5e7041(0xe5)]+=parseInt(_0x51bb11['winnerScore'])||0x0,_0x32ed14[_0x5e7041(0x100)]+=parseInt(_0x51bb11[_0x5e7041(0xf5)])||0x0;}if(_0x381fa3['includes'](_0x23050a)){const _0x1bba4f=_0x3e9c74[_0x5e7041(0xd0)](_0x23050a);_0x1bba4f['losses']++,_0x1bba4f['totalMatches']++,_0x1bba4f[_0x5e7041(0xe5)]+=parseInt(_0x51bb11['loserScore'])||0x0,_0x1bba4f['totalDeaths']+=parseInt(_0x51bb11['winnerScore'])||0x0;}}),_0x381fa3[_0x1d4bde(0xe8)](_0x4f67e8=>{const _0x25be68=_0x1d4bde,_0x127c01=_0x3e9c74['get'](_0x4f67e8);_0x127c01['kda']=_0x127c01[_0x25be68(0x100)]>0x0?(_0x127c01[_0x25be68(0xe5)]/_0x127c01[_0x25be68(0x100)])['toFixed'](0x2):_0x127c01['totalKills'],_0x127c01['winRate']=_0x127c01[_0x25be68(0xf4)]>0x0?(_0x127c01['wins']/_0x127c01[_0x25be68(0xf4)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x24929d){console[_0x1d4bde(0xd8)]('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x24929d);}return _0x3e9c74;}function createPlayerRowD3(_0x5ed951,_0x594259,_0x1dc876){const _0x331ee3=a0_0x81a83f,_0x1b25d7=parseFloat(_0x5ed951['elo'])||0x0;let _0x44de2c='#DC143C';if(_0x594259[_0x331ee3(0xf4)]===0x0)_0x44de2c='#DC143C';else{if(_0x1b25d7>=0x3e8&&_0x594259[_0x331ee3(0xfb)]>=0x50&&_0x594259['totalMatches']>=0x14)_0x44de2c=_0x331ee3(0xeb);else{if(_0x1b25d7>=0x2bc)_0x44de2c='#FFD700';else{if(_0x1b25d7>=0x1f4)_0x44de2c='#C0C0C0';else _0x1b25d7>=0xc8&&(_0x44de2c='#CD7F32');}}}let _0x4cef8c='';_0x5ed951['country']&&(_0x4cef8c='<img\x20src=\x22../images/flags/'+_0x5ed951[_0x331ee3(0xfa)][_0x331ee3(0xcc)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5ed951[_0x331ee3(0xfa)]+_0x331ee3(0xef));let _0x8d5bf2='';return _0x1dc876&&(_0x8d5bf2=_0x331ee3(0xdf)+_0x1dc876['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x1dc876['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x1dc876[_0x331ee3(0xee)]+'\x20'+(_0x1dc876['equipped']?_0x331ee3(0xe0):'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x331ee3(0xfe)+_0x5ed951['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x5ed951['username'])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x44de2c+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5ed951[_0x331ee3(0xcd)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4cef8c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x8d5bf2+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x44de2c+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x1b25d7+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x594259['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x594259[_0x331ee3(0xfc)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x594259[_0x331ee3(0xd2)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x594259['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x594259['winRate']+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>'+(_0x5ed951['points']||0x0)+_0x331ee3(0xe7);}async function getPlayersLastEloChangesD3(_0x2e2a08){const _0x4b4484=a0_0x81a83f,_0x45e1f2=new Map();_0x2e2a08['forEach'](_0x2c642c=>_0x45e1f2['set'](_0x2c642c,0x0));try{const _0xd1f098=new Map(),_0x64f22a=await getDocs(collection(db,_0x4b4484(0xdc)));_0x64f22a['forEach'](_0x217971=>{const _0x67dc8e=_0x217971['data']();_0x67dc8e['username']&&_0xd1f098['set'](_0x217971['id'],_0x67dc8e['username']);});const _0x2156c7=collection(db,'eloHistoryD3'),_0xd03543=query(_0x2156c7,orderBy('timestamp',_0x4b4484(0xdd)),limit(0x64)),_0x539123=await getDocs(_0xd03543),_0x1693a1=new Map();_0x539123['forEach'](_0x3f99bc=>{const _0x45001b=_0x4b4484,_0x185606=_0x3f99bc['data']();let _0x3334f3=null;if(_0x185606[_0x45001b(0xcd)])_0x3334f3=_0x185606['username'];else{if(_0x185606['playerUsername'])_0x3334f3=_0x185606[_0x45001b(0xf7)];else{if(_0x185606['player']&&typeof _0x185606['player']==='string')_0x3334f3=_0x185606['player'];else{if(_0x185606['player']&&_0xd1f098[_0x45001b(0x102)](_0x185606['player']))_0x3334f3=_0xd1f098['get'](_0x185606['player']);else _0x185606[_0x45001b(0xca)]&&_0xd1f098['has'](_0x185606['playerId'])&&(_0x3334f3=_0xd1f098['get'](_0x185606['playerId']));}}}_0x3334f3&&_0x2e2a08['includes'](_0x3334f3)&&(!_0x1693a1['has'](_0x3334f3)&&_0x1693a1['set'](_0x3334f3,[]),_0x1693a1[_0x45001b(0xd0)](_0x3334f3)['push']({..._0x185606,'timestamp':_0x185606['timestamp']?.['seconds']||0x0}));}),_0x1693a1[_0x4b4484(0xe8)]((_0x497840,_0x50f76c)=>{const _0x11629d=_0x4b4484;if(_0x497840['length']>0x0){_0x497840['sort']((_0x312451,_0x41997a)=>_0x41997a[_0x11629d(0xc4)]-_0x312451['timestamp']);const _0x489b6a=_0x497840['find'](_0x3611f9=>_0x3611f9['change']!==undefined||_0x3611f9['newElo']!==undefined&&_0x3611f9['previousElo']!==undefined);if(_0x489b6a){let _0x3377fa;if(_0x489b6a['change']!==undefined)_0x3377fa=_0x489b6a['change'];else _0x489b6a['newElo']!==undefined&&_0x489b6a[_0x11629d(0xe3)]!==undefined&&(_0x3377fa=_0x489b6a[_0x11629d(0xf2)]-_0x489b6a[_0x11629d(0xe3)]);_0x3377fa!==undefined&&_0x45e1f2['set'](_0x50f76c,_0x3377fa);}}});if(_0x1693a1[_0x4b4484(0x103)]===0x0){const _0x1043ac=collection(db,'eloHistory'),_0x427d1b=query(_0x1043ac,where(_0x4b4484(0xd4),'==','D3'),orderBy(_0x4b4484(0xc4),_0x4b4484(0xdd)),limit(0x32));try{const _0x39fd4a=await getDocs(_0x427d1b);_0x39fd4a[_0x4b4484(0xe8)](_0x394592=>{const _0x2d90bf=_0x4b4484,_0xf90092=_0x394592['data']();let _0x4bd7bd=_0xf90092['username']||_0xf90092['playerUsername'];!_0x4bd7bd&&_0xf90092['player']&&_0xd1f098['has'](_0xf90092['player'])&&(_0x4bd7bd=_0xd1f098['get'](_0xf90092['player']));if(_0x4bd7bd&&_0x2e2a08[_0x2d90bf(0x104)](_0x4bd7bd)){const _0xe380a=_0xf90092['change']||(_0xf90092['newElo']!==undefined&&_0xf90092['previousElo']!==undefined?_0xf90092['newElo']-_0xf90092['previousElo']:0x0);_0xe380a!==0x0&&_0x45e1f2['set'](_0x4bd7bd,_0xe380a);}});}catch(_0x32fb78){console[_0x4b4484(0xd8)](_0x4b4484(0xd6),_0x32fb78);}}}catch(_0x244be1){console['error']('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x244be1);}return _0x45e1f2;}window['refreshLadderDisplayD3']=function(_0x65e585=!![]){const _0x237a34=a0_0x81a83f;typeof displayLadderD3==='function'?displayLadderD3(_0x65e585):console['warn'](_0x237a34(0xcf));};export{displayLadderD3,updatePlayerPositions};