function a33_0x4d51(){const _0x3fd013=['get','error','tokenName','style','size','toLowerCase','#FFD700','D3:\x20Error\x20fetching\x20tokens:','fontWeight','visibility','change','D3:\x20Found\x20','totalMatches','playerId','gray','apply','losses','innerHTML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20','previousElo','forEach','\x20fallback\x20entries','catch','string','gameMode','display','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','pilot','\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a','\x20entries\x20in\x20eloHistoryD3','bind','color','%</td>\x0a\x20\x20\x20\x20</tr>','firstPlaceDate','eloHistory','function','warn','exception','length','abs','country','has','#4CAF50','#F44336','info','constructor','find','Error\x20updating\x20D3\x20player\x20positions:','wins','#C0C0C0','player','td:nth-child(3)','playerUsername','(Equipped)','ðŸª™\x20D3:\x20Loaded\x20fresh\x20tokens\x20for','inline','equipped','prototype','kda','winRate','.trend-indicator','set','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','sort','position','players','filter','playersD3','username','entries','now','Error\x20loading\x20D3\x20ladder:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20','timestamp','newElo','log','data','D3:\x20','push','totalDeaths'];a33_0x4d51=function(){return _0x3fd013;};return a33_0x4d51();}const a33_0xe04049=a33_0xd233,a33_0x17a7b2=(function(){let _0x528b81=!![];return function(_0x288693,_0x1d606b){const _0xc79d61=_0x528b81?function(){const _0x909122=a33_0xd233;if(_0x1d606b){const _0xf4be9f=_0x1d606b[_0x909122(0x17d)](_0x288693,arguments);return _0x1d606b=null,_0xf4be9f;}}:function(){};return _0x528b81=![],_0xc79d61;};}()),a33_0x57678f=a33_0x17a7b2(this,function(){const _0x17eeff=a33_0xd233,_0x1b8d8a=function(){let _0x49c72d;try{_0x49c72d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1fbc87){_0x49c72d=window;}return _0x49c72d;},_0x487df6=_0x1b8d8a(),_0x4677b5=_0x487df6['console']=_0x487df6['console']||{},_0x2118c0=['log',_0x17eeff(0x192),_0x17eeff(0x19a),'error',_0x17eeff(0x193),'table','trace'];for(let _0x2d6503=0x0;_0x2d6503<_0x2118c0[_0x17eeff(0x194)];_0x2d6503++){const _0x4f7258=a33_0x17a7b2[_0x17eeff(0x19b)][_0x17eeff(0x1a7)][_0x17eeff(0x18c)](a33_0x17a7b2),_0x1929e2=_0x2118c0[_0x2d6503],_0x56f3e7=_0x4677b5[_0x1929e2]||_0x4f7258;_0x4f7258['__proto__']=a33_0x17a7b2['bind'](a33_0x17a7b2),_0x4f7258['toString']=_0x56f3e7['toString'][_0x17eeff(0x18c)](_0x56f3e7),_0x4677b5[_0x1929e2]=_0x4f7258;}});a33_0x57678f();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a33_0xd233(_0x2676c1,_0x4f86c2){const _0x57678f=a33_0x4d51();return a33_0xd233=function(_0x17a7b2,_0x3e0d86){_0x17a7b2=_0x17a7b2-0x16e;let _0x4d510b=_0x57678f[_0x17a7b2];return _0x4d510b;},a33_0xd233(_0x2676c1,_0x4f86c2);}import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x47c38c from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const styleEl=document['createElement'](a33_0xe04049(0x171));styleEl['textContent']=a33_0xe04049(0x18a),document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x145a7a=![]){const _0x28bfbf=a33_0xe04049,_0xe96870=document['querySelector']('#ladder-d3\x20tbody');if(!_0xe96870){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0xe96870['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x1b7431=Date['now']();if(!_0x145a7a&&playerCacheD3['data']&&_0x1b7431-playerCacheD3[_0x28bfbf(0x1b7)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x1b0634=collection(db,'playersD3'),_0x3fc601=await getDocs(_0x1b0634),_0x174703=[];_0x3fc601[_0x28bfbf(0x182)](_0x2747f9=>{const _0x4f40d4=_0x2747f9['data']();_0x4f40d4['username']&&_0x174703['push']({..._0x4f40d4,'id':_0x2747f9['id'],'elo':_0x4f40d4['eloRating']||0x0,'position':_0x4f40d4['position']||Number['MAX_SAFE_INTEGER']});});const _0x4734f5=collection(db,'userProfiles'),_0x396868=await getDocs(_0x4734f5),_0x5a3a01=new Map();_0x396868['forEach'](_0x48d239=>{const _0x2a9403=_0x28bfbf,_0x4a2067=_0x48d239['data']();_0x4a2067['username']&&_0x5a3a01[_0x2a9403(0x1ab)](_0x4a2067['username']['toLowerCase'](),_0x4a2067);});for(const _0x543828 of _0x174703){const _0x3192b4=_0x543828[_0x28bfbf(0x1b2)]['toLowerCase']();if(_0x5a3a01['has'](_0x3192b4)){const _0xaea663=_0x5a3a01['get'](_0x3192b4);_0xaea663['country']&&(_0x543828['country']=_0xaea663['country'][_0x28bfbf(0x173)]());}}const _0x168056=_0x174703['map'](_0x4687c5=>_0x4687c5['username']),_0x1441d5=await fetchBatchMatchStatsD3(_0x168056);_0x174703['sort']((_0x6f4b40,_0x5b62b2)=>{const _0x557113=_0x28bfbf,_0x13efa2=_0x1441d5['get'](_0x6f4b40['username'])?.['totalMatches']||0x0,_0x10fb32=_0x1441d5['get'](_0x5b62b2[_0x557113(0x1b2)])?.['totalMatches']||0x0;if(_0x13efa2===0x0!==(_0x10fb32===0x0))return _0x13efa2===0x0?0x1:-0x1;return(_0x6f4b40['position']||0x3e7)-(_0x5b62b2['position']||0x3e7);}),_0x174703[_0x28bfbf(0x182)]((_0x525f42,_0x392437)=>{_0x525f42['position']=_0x392437+0x1;}),playerCacheD3[_0x28bfbf(0x1ba)]=_0x174703,playerCacheD3['timestamp']=_0x1b7431,updateLadderDisplayD3(_0x174703);}catch(_0x39d155){console['error'](_0x28bfbf(0x1b5),_0x39d155),_0xe96870['innerHTML']=_0x28bfbf(0x1b6)+_0x39d155['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x3d46f4){const _0x5e30e5=a33_0xe04049;if(!_0x3d46f4)return 0x0;const _0x578693=_0x3d46f4['toDate'](),_0x16bea4=new Date(),_0xe81cd7=Math[_0x5e30e5(0x195)](_0x16bea4-_0x578693);return Math['ceil'](_0xe81cd7/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x184bc2,_0x5ede33){const _0x28eb83=a33_0xe04049;try{const _0x2c42af=collection(db,_0x28eb83(0x1b1)),_0x4e244c=await getDocs(_0x2c42af),_0x1746a3=[];_0x4e244c[_0x28eb83(0x182)](_0x52f39=>{_0x1746a3['push']({'id':_0x52f39['id'],..._0x52f39['data']()});});const _0xfa1f69=_0x1746a3[_0x28eb83(0x19c)](_0x29f822=>_0x29f822['username']===_0x184bc2),_0x1e6c3a=_0x1746a3['find'](_0x5763ec=>_0x5763ec['username']===_0x5ede33);if(!_0xfa1f69||!_0x1e6c3a){console[_0x28eb83(0x16f)]('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0xfa1f69[_0x28eb83(0x1ae)]>_0x1e6c3a['position']){const _0x1d02a6=_0x1e6c3a[_0x28eb83(0x1ae)];for(const _0x3630d4 of _0x1746a3){_0x3630d4['position']>=_0x1e6c3a[_0x28eb83(0x1ae)]&&_0x3630d4['position']<_0xfa1f69['position']&&_0x3630d4['username']!==_0x184bc2&&await updateDoc(doc(db,_0x28eb83(0x1b1),_0x3630d4['id']),{'position':_0x3630d4[_0x28eb83(0x1ae)]+0x1});}await updateDoc(doc(db,'playersD3',_0xfa1f69['id']),{'position':_0x1d02a6});if(_0x1d02a6===0x1){const _0x290a11=doc(db,'playersD3',_0xfa1f69['id']),_0x5c38f0=await getDoc(_0x290a11);!_0x5c38f0['data']()[_0x28eb83(0x18f)]&&await updateDoc(_0x290a11,{'firstPlaceDate':Timestamp[_0x28eb83(0x1b4)]()});}if(_0x1e6c3a['position']===0x1){const _0xc20a8c=doc(db,'playersD3',_0x1e6c3a['id']);await updateDoc(_0xc20a8c,{'firstPlaceDate':null});}}}catch(_0x2d2b52){console[_0x28eb83(0x16f)](_0x28eb83(0x19d),_0x2d2b52);}}async function updateLadderDisplayD3(_0x21c9db){const _0xb121d4=a33_0xe04049;_0x21c9db['sort']((_0x10aa76,_0x1c2b73)=>_0x10aa76['position']-_0x1c2b73[_0xb121d4(0x1ae)]);const _0x1f1c5b=document['querySelector']('#ladder-d3\x20tbody');if(!_0x1f1c5b)return;_0x1f1c5b['innerHTML']='';const _0x2e9b41=_0x21c9db['map'](_0x346ad7=>_0x346ad7['username']),_0x1b4e60=await fetchBatchMatchStatsD3(_0x2e9b41);let _0x408d19=new Map();try{typeof clearTokenCache===_0xb121d4(0x191)&&clearTokenCache(),_0x408d19=await getTokensByUsernames(_0x2e9b41),console[_0xb121d4(0x1b9)](_0xb121d4(0x1a4),_0x408d19['size'],_0xb121d4(0x1af)),_0x408d19['forEach']((_0x52b42b,_0xd57435)=>{const _0x265bb9=_0xb121d4,_0x50b696=_0x52b42b[_0x265bb9(0x19c)](_0x4b5e06=>_0x4b5e06[_0x265bb9(0x1a6)]);_0x50b696&&console[_0x265bb9(0x1b9)]('ðŸŽ¯\x20D3:\x20'+_0xd57435+'\x20has\x20equipped:\x20'+_0x50b696['tokenName']);});}catch(_0x5636bc){console['error'](_0xb121d4(0x175),_0x5636bc);}const _0x54c690=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x54c690['innerHTML']=_0xb121d4(0x180);const _0x49dc02=_0x21c9db['map'](_0x45ae2c=>{const _0x53c41f=_0xb121d4,_0x1789ac=_0x1b4e60['get'](_0x45ae2c['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x3ab22a=_0x408d19['get'](_0x45ae2c[_0x53c41f(0x1b2)])||[],_0x48dcf6=getPrimaryDisplayToken(_0x3ab22a);return _0x48dcf6&&console[_0x53c41f(0x1b9)]('ðŸŽ¨\x20D3:\x20'+_0x45ae2c[_0x53c41f(0x1b2)]+'\x20displaying\x20token:\x20'+_0x48dcf6['tokenName']+'\x20(equipped:\x20'+_0x48dcf6[_0x53c41f(0x1a6)]+')'),createPlayerRowD3(_0x45ae2c,_0x1789ac,_0x48dcf6);})['join']('');_0x1f1c5b[_0xb121d4(0x17f)]=_0x49dc02,getPlayersLastEloChangesD3(_0x2e9b41)['then'](_0x4d156c=>{const _0x4ea668=_0xb121d4,_0x4135a7=new Map();_0x1f1c5b['querySelectorAll']('tr')[_0x4ea668(0x182)]((_0x2e3713,_0x4d4644)=>{const _0x1d93e0=_0x4ea668;_0x4d4644<_0x2e9b41['length']&&_0x4135a7[_0x1d93e0(0x1ab)](_0x2e9b41[_0x4d4644],_0x2e3713);}),_0x4d156c['forEach']((_0x2fc532,_0x4da02b)=>{const _0x5dec50=_0x4ea668,_0x406877=_0x4135a7['get'](_0x4da02b);if(_0x406877&&_0x2fc532!==0x0){const _0x135869=_0x406877['querySelector'](_0x5dec50(0x1a1));if(_0x135869){const _0x19d5e5=_0x2fc532>0x0?'+'+_0x2fc532:''+_0x2fc532,_0x2e5128=_0x135869['querySelector'](_0x5dec50(0x1aa));_0x2e5128&&(_0x2e5128['textContent']=_0x19d5e5,_0x2e5128['style'][_0x5dec50(0x18d)]=_0x2fc532>0x0?_0x5dec50(0x198):_0x5dec50(0x199),_0x2e5128['style'][_0x5dec50(0x176)]='bold',_0x2e5128['style']['fontSize']='0.85em',_0x2e5128['style'][_0x5dec50(0x187)]=_0x5dec50(0x1a5),_0x2e5128[_0x5dec50(0x171)][_0x5dec50(0x177)]='visible',_0x2e5128['style']['opacity']='1');}}});})[_0xb121d4(0x184)](_0x33f302=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x33f302));}async function fetchBatchMatchStatsD3(_0x78c77c){const _0x3ab1d7=new Map();try{const _0x42825e=collection(db,'approvedMatchesD3'),_0xbc5349=await getDocs(_0x42825e);_0xbc5349['forEach'](_0x47309d=>{const _0xc17790=a33_0xd233,_0x3a09cc=_0x47309d['data']();if(_0x78c77c['includes'](_0x3a09cc['winnerUsername'])){const _0x442410=_0x3a09cc['winnerUsername'];!_0x3ab1d7['has'](_0x442410)&&_0x3ab1d7['set'](_0x442410,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x52f36d=_0x3ab1d7[_0xc17790(0x16e)](_0x442410);_0x52f36d['wins']++,_0x52f36d['totalMatches']++,_0x52f36d['totalKills']+=parseInt(_0x3a09cc['winnerScore'])||0x0,_0x52f36d['totalDeaths']+=parseInt(_0x3a09cc['loserScore'])||0x0;}if(_0x78c77c['includes'](_0x3a09cc['loserUsername'])){const _0x22c8b9=_0x3a09cc['loserUsername'];!_0x3ab1d7['has'](_0x22c8b9)&&_0x3ab1d7[_0xc17790(0x1ab)](_0x22c8b9,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x5d62cc=_0x3ab1d7[_0xc17790(0x16e)](_0x22c8b9);_0x5d62cc[_0xc17790(0x17e)]++,_0x5d62cc[_0xc17790(0x17a)]++,_0x5d62cc['totalKills']+=parseInt(_0x3a09cc['loserScore'])||0x0,_0x5d62cc[_0xc17790(0x1bd)]+=parseInt(_0x3a09cc['winnerScore'])||0x0;}}),_0x3ab1d7['forEach'](_0x3e56c8=>{const _0x14fe4f=a33_0xd233;_0x3e56c8['kda']=_0x3e56c8['totalDeaths']>0x0?(_0x3e56c8['totalKills']/_0x3e56c8['totalDeaths'])['toFixed'](0x2):_0x3e56c8['totalKills'],_0x3e56c8[_0x14fe4f(0x1a9)]=_0x3e56c8['totalMatches']>0x0?(_0x3e56c8[_0x14fe4f(0x19e)]/_0x3e56c8[_0x14fe4f(0x17a)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x1705bc){console['error']('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x1705bc);}return _0x3ab1d7;}function createPlayerRowD3(_0x3fb4a6,_0x10fb14,_0x1dd9c3){const _0x3f5ae0=a33_0xe04049,_0x55451f=parseFloat(_0x3fb4a6['elo'])||0x0;let _0x71b44e=_0x3f5ae0(0x17c);if(_0x55451f>=0x7d0)_0x71b44e='#50C878';else{if(_0x55451f>=0x708)_0x71b44e=_0x3f5ae0(0x174);else{if(_0x55451f>=0x640)_0x71b44e=_0x3f5ae0(0x19f);else _0x55451f>=0x578&&(_0x71b44e='#CD7F32');}}let _0x120782='';_0x3fb4a6['country']&&(_0x120782='<img\x20src=\x22../images/flags/'+_0x3fb4a6['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3fb4a6[_0x3f5ae0(0x196)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x28d73c='';return _0x1dd9c3&&(_0x28d73c='<img\x20src=\x22'+_0x1dd9c3['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x1dd9c3['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x1dd9c3[_0x3f5ae0(0x170)]+'\x20'+(_0x1dd9c3['equipped']?_0x3f5ae0(0x1a3):'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3fb4a6['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x3fb4a6['username'])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x71b44e+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3fb4a6['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x120782+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x28d73c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x71b44e+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x55451f+_0x3f5ae0(0x188)+_0x10fb14[_0x3f5ae0(0x17a)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x10fb14['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x10fb14['losses']+_0x3f5ae0(0x1ac)+_0x10fb14[_0x3f5ae0(0x1a8)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x10fb14[_0x3f5ae0(0x1a9)]+_0x3f5ae0(0x18e);}async function getPlayersLastEloChangesD3(_0x59b7d5){const _0x28882e=a33_0xe04049,_0x51d431=new Map();_0x59b7d5['forEach'](_0x1fc6f8=>_0x51d431[_0x28882e(0x1ab)](_0x1fc6f8,0x0));try{console['log']('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x59b7d5);const _0x3b9d55=new Map(),_0x3f58e0=await getDocs(collection(db,'playersD3'));_0x3f58e0['forEach'](_0x2874c6=>{const _0x418787=_0x28882e,_0x54ee75=_0x2874c6['data']();_0x54ee75[_0x418787(0x1b2)]&&_0x3b9d55[_0x418787(0x1ab)](_0x2874c6['id'],_0x54ee75['username']);}),console['log']('D3:\x20Player\x20ID\x20mappings:',Array['from'](_0x3b9d55['entries']()));const _0x4834a2=collection(db,'eloHistoryD3'),_0x364690=query(_0x4834a2,orderBy(_0x28882e(0x1b7),'desc'),limit(0x64)),_0x11fc0b=await getDocs(_0x364690);_0x11fc0b['empty']?console['log']('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console[_0x28882e(0x1b9)](_0x28882e(0x179)+_0x11fc0b[_0x28882e(0x172)]+_0x28882e(0x18b));const _0x3115cf=new Map();_0x11fc0b['forEach'](_0x18546f=>{const _0x28e6ee=_0x28882e,_0x12fe01=_0x18546f['data']();let _0x5f584f=null;if(_0x12fe01['username'])_0x5f584f=_0x12fe01[_0x28e6ee(0x1b2)];else{if(_0x12fe01[_0x28e6ee(0x1a2)])_0x5f584f=_0x12fe01['playerUsername'];else{if(_0x12fe01['player']&&typeof _0x12fe01['player']===_0x28e6ee(0x185))_0x5f584f=_0x12fe01['player'];else{if(_0x12fe01['player']&&_0x3b9d55['has'](_0x12fe01['player']))_0x5f584f=_0x3b9d55[_0x28e6ee(0x16e)](_0x12fe01['player']);else _0x12fe01[_0x28e6ee(0x17b)]&&_0x3b9d55[_0x28e6ee(0x197)](_0x12fe01['playerId'])&&(_0x5f584f=_0x3b9d55['get'](_0x12fe01['playerId']));}}}(_0x12fe01['username']==='pilot'||_0x12fe01['playerUsername']===_0x28e6ee(0x189)||_0x12fe01['player']&&_0x3b9d55[_0x28e6ee(0x16e)](_0x12fe01['player'])===_0x28e6ee(0x189))&&console['log']('D3:\x20Found\x20pilot\x20entry:',_0x12fe01),_0x5f584f&&_0x59b7d5['includes'](_0x5f584f)&&(!_0x3115cf[_0x28e6ee(0x197)](_0x5f584f)&&_0x3115cf['set'](_0x5f584f,[]),_0x3115cf['get'](_0x5f584f)[_0x28e6ee(0x1bc)]({..._0x12fe01,'timestamp':_0x12fe01['timestamp']?.['seconds']||0x0}));}),console['log']('D3:\x20Found\x20entries\x20for\x20'+_0x3115cf['size']+'\x20players'),_0x3115cf['forEach']((_0x38247c,_0x3da737)=>{const _0x50328b=_0x28882e;if(_0x38247c[_0x50328b(0x194)]>0x0){_0x38247c[_0x50328b(0x1ad)]((_0x188cb2,_0x4133b9)=>_0x4133b9['timestamp']-_0x188cb2[_0x50328b(0x1b7)]);const _0x2ad41f=_0x38247c['find'](_0x57d306=>_0x57d306['change']!==undefined||_0x57d306[_0x50328b(0x1b8)]!==undefined&&_0x57d306[_0x50328b(0x181)]!==undefined);if(_0x2ad41f){let _0x19c76d;if(_0x2ad41f[_0x50328b(0x178)]!==undefined)_0x19c76d=_0x2ad41f['change'];else _0x2ad41f[_0x50328b(0x1b8)]!==undefined&&_0x2ad41f[_0x50328b(0x181)]!==undefined&&(_0x19c76d=_0x2ad41f['newElo']-_0x2ad41f['previousElo']);_0x19c76d!==undefined&&(_0x51d431['set'](_0x3da737,_0x19c76d),console['log'](_0x50328b(0x1bb)+_0x3da737+'\x20ELO\x20change:\x20'+_0x19c76d));}}});if(_0x3115cf['size']===0x0){console[_0x28882e(0x1b9)]('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x173772=collection(db,_0x28882e(0x190)),_0x15c5f5=query(_0x173772,where(_0x28882e(0x186),'==','D3'),orderBy('timestamp','desc'),limit(0x32));try{const _0x336777=await getDocs(_0x15c5f5);console[_0x28882e(0x1b9)](_0x28882e(0x179)+_0x336777['size']+_0x28882e(0x183)),_0x336777['forEach'](_0x3ea966=>{const _0x4f021b=_0x28882e,_0x12d9e7=_0x3ea966[_0x4f021b(0x1ba)]();let _0x4260e2=_0x12d9e7[_0x4f021b(0x1b2)]||_0x12d9e7['playerUsername'];!_0x4260e2&&_0x12d9e7['player']&&_0x3b9d55[_0x4f021b(0x197)](_0x12d9e7['player'])&&(_0x4260e2=_0x3b9d55['get'](_0x12d9e7[_0x4f021b(0x1a0)]));if(_0x4260e2&&_0x59b7d5['includes'](_0x4260e2)){const _0x5bd994=_0x12d9e7['change']||(_0x12d9e7['newElo']!==undefined&&_0x12d9e7['previousElo']!==undefined?_0x12d9e7[_0x4f021b(0x1b8)]-_0x12d9e7[_0x4f021b(0x181)]:0x0);_0x5bd994!==0x0&&(_0x51d431[_0x4f021b(0x1ab)](_0x4260e2,_0x5bd994),console['log']('D3:\x20'+_0x4260e2+'\x20fallback\x20ELO\x20change:\x20'+_0x5bd994));}});}catch(_0x28c27e){console['log']('D3:\x20Fallback\x20query\x20failed:',_0x28c27e);}}const _0x31d453=Array['from'](_0x51d431[_0x28882e(0x1b3)]())[_0x28882e(0x1b0)](([_0x84c7d0,_0x3146f5])=>_0x3146f5!==0x0);console['log']('D3:\x20Final\x20ELO\x20changes:',_0x31d453);}catch(_0x42ef19){console[_0x28882e(0x16f)]('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x42ef19);}return _0x51d431;}export{displayLadderD3,updatePlayerPositions};