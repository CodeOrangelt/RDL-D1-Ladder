(function(_0x571599,_0x43e56d){const _0x34cd1c=a0_0x418e,_0x1eb71c=_0x571599();while(!![]){try{const _0x5f5db6=-parseInt(_0x34cd1c(0x149))/0x1+parseInt(_0x34cd1c(0x151))/0x2*(-parseInt(_0x34cd1c(0x15f))/0x3)+-parseInt(_0x34cd1c(0x16d))/0x4+-parseInt(_0x34cd1c(0x163))/0x5*(-parseInt(_0x34cd1c(0x161))/0x6)+parseInt(_0x34cd1c(0x15c))/0x7*(parseInt(_0x34cd1c(0x14a))/0x8)+-parseInt(_0x34cd1c(0x168))/0x9*(parseInt(_0x34cd1c(0x160))/0xa)+parseInt(_0x34cd1c(0x16b))/0xb;if(_0x5f5db6===_0x43e56d)break;else _0x1eb71c['push'](_0x1eb71c['shift']());}catch(_0x511282){_0x1eb71c['push'](_0x1eb71c['shift']());}}}(a0_0x5386,0xa7f91));function a0_0x418e(_0x3a82e9,_0x38e341){const _0x1e5ec3=a0_0x5386();return a0_0x418e=function(_0x43ba91,_0x52476b){_0x43ba91=_0x43ba91-0x146;let _0x400979=_0x1e5ec3[_0x43ba91];return _0x400979;},a0_0x418e(_0x3a82e9,_0x38e341);}const a0_0x52476b=(function(){let _0x5b2deb=!![];return function(_0x2d10f6,_0x1e6ebe){const _0x3b872a=_0x5b2deb?function(){if(_0x1e6ebe){const _0x368685=_0x1e6ebe['apply'](_0x2d10f6,arguments);return _0x1e6ebe=null,_0x368685;}}:function(){};return _0x5b2deb=![],_0x3b872a;};}()),a0_0x43ba91=a0_0x52476b(this,function(){const _0x1c0780=a0_0x418e,_0x3eef50=function(){const _0x1e47e5=a0_0x418e;let _0x35cc41;try{_0x35cc41=Function(_0x1e47e5(0x169)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x127d87){_0x35cc41=window;}return _0x35cc41;},_0x22bb08=_0x3eef50(),_0xadab19=_0x22bb08['console']=_0x22bb08['console']||{},_0xb4a869=[_0x1c0780(0x16a),_0x1c0780(0x164),_0x1c0780(0x14e),_0x1c0780(0x159),'exception',_0x1c0780(0x158),'trace'];for(let _0x2faf8e=0x0;_0x2faf8e<_0xb4a869['length'];_0x2faf8e++){const _0x15434f=a0_0x52476b['constructor']['prototype']['bind'](a0_0x52476b),_0x2abf21=_0xb4a869[_0x2faf8e],_0x45a67e=_0xadab19[_0x2abf21]||_0x15434f;_0x15434f['__proto__']=a0_0x52476b['bind'](a0_0x52476b),_0x15434f['toString']=_0x45a67e[_0x1c0780(0x150)]['bind'](_0x45a67e),_0xadab19[_0x2abf21]=_0x15434f;}});a0_0x43ba91();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x4b0441=![]){const _0x296597=a0_0x418e,_0x3ff507=Date['now'](),_0x30ee31=checkNotificationCache();if(_0x30ee31!==null&&!_0x4b0441){updateNotificationDot(_0x30ee31);if(_0x3ff507-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x3ff507;const _0x5bbbef=auth['currentUser'];if(!_0x5bbbef){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x748e84,_0x530835,_0x746e8c]=await Promise['all']([checkForPendingMatchesInCollection(_0x5bbbef,'pendingMatches'),checkForPendingMatchesInCollection(_0x5bbbef,_0x296597(0x155)),checkForPendingMatchesInCollection(_0x5bbbef,_0x296597(0x162))]),_0x435bd5=_0x748e84||_0x530835||_0x746e8c;updateNotificationDot(_0x435bd5),updateNotificationCache(_0x435bd5);}catch(_0x18f047){console[_0x296597(0x159)]('Error\x20checking\x20pending\x20matches:',_0x18f047);}}async function checkForPendingMatchesInCollection(_0x5056dd,_0x6adb0d){const _0xa75691=a0_0x418e,_0x3d8472=_0x5056dd['uid'],_0xfd9717=_0x5056dd['email'],_0x3a290b=query(collection(db,_0x6adb0d),where('winnerId','==',_0x3d8472),where('approved','==',![])),_0x467c62=await getDocs(_0x3a290b);if(!_0x467c62['empty'])return!![];if(_0xfd9717){const _0x394d3f=query(collection(db,_0x6adb0d),where('winnerEmail','==',_0xfd9717),where(_0xa75691(0x166),'==',![])),_0x561908=await getDocs(_0x394d3f);if(!_0x561908[_0xa75691(0x165)])return!![];}let _0x4ade8f=await getUsernameFromAllSources(_0x5056dd);if(_0x4ade8f){const _0xca354c=query(collection(db,_0x6adb0d),where('winnerUsername','==',_0x4ade8f),where('approved','==',![])),_0x367f99=await getDocs(_0xca354c);if(!_0x367f99['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0xda7e2){const _0x4b89be=a0_0x418e,_0x1b83e1=localStorage['getItem'](_0x4b89be(0x16f));if(_0x1b83e1)return _0x1b83e1;try{const [_0x8a7244,_0x180483,_0x5204ba]=await Promise[_0x4b89be(0x156)]([getDocs(query(collection(db,'players'),where('userId','==',_0xda7e2[_0x4b89be(0x14d)]))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0xda7e2['uid']))),getDocs(query(collection(db,'playersD3'),where(_0x4b89be(0x15b),'==',_0xda7e2['uid'])))]);if(!_0x8a7244['empty']){const _0x1ba1e5=_0x8a7244['docs'][0x0]['data']()[_0x4b89be(0x146)];return localStorage['setItem']('currentUsername',_0x1ba1e5),_0x1ba1e5;}if(!_0x180483['empty']){const _0x532252=_0x180483['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x532252),_0x532252;}if(!_0x5204ba['empty']){const _0x4800d7=_0x5204ba['docs'][0x0]['data']()['username'];return localStorage['setItem'](_0x4b89be(0x16f),_0x4800d7),_0x4800d7;}const _0x5335b3=await getDoc(doc(db,'users',_0xda7e2['uid']));if(_0x5335b3[_0x4b89be(0x15d)]()&&_0x5335b3[_0x4b89be(0x14b)]()[_0x4b89be(0x146)]){const _0x5e7610=_0x5335b3[_0x4b89be(0x14b)]()['username'];return localStorage[_0x4b89be(0x14c)]('currentUsername',_0x5e7610),_0x5e7610;}}catch(_0x1df609){console['error']('Error\x20fetching\x20username:',_0x1df609);}if(_0xda7e2[_0x4b89be(0x154)])return _0xda7e2['email']['split']('@')[0x0];return null;}function a0_0x5386(){const _0x457bc5=['table','error','999','userId','653793BuwkXg','exists','now','3ynQsIm','896840kWmKqQ','114UhYiXB','pendingMatchesD3','17835pkknSP','warn','empty','approved','2px\x20solid\x20white','81BokPqx','return\x20(function()\x20','log','31957024gEQuFQ','none','1840128FUOkPe','right','currentUsername','username','style','disconnect','53283lcHLCM','24MSkozu','data','setItem','uid','info','10px','toString','2489332smzBnr','display','report-match-notification','email','pendingMatchesD2','all','onAuthStateChanged'];a0_0x5386=function(){return _0x457bc5;};return a0_0x5386();}function updateNotificationCache(_0x229e4e){const _0x45ec1e=a0_0x418e,_0x32ffc1={'status':_0x229e4e,'timestamp':Date[_0x45ec1e(0x15e)]()};localStorage[_0x45ec1e(0x14c)](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x32ffc1));}function checkNotificationCache(){const _0x75e318=a0_0x418e,_0x44e130=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x44e130)return null;try{const {status:_0x3b29c3,timestamp:_0x5985d8}=JSON['parse'](_0x44e130),_0x452b50=Date[_0x75e318(0x15e)]();if(_0x452b50-_0x5985d8<CACHE_EXPIRY)return _0x3b29c3;}catch(_0x1d57ef){}return null;}export function updateNotificationDot(_0x333fa3){const _0x1c02e4=a0_0x418e,_0x3e4179=new MutationObserver((_0x438caa,_0x1aac65)=>{const _0x33a35d=a0_0x418e,_0x8b5e1f=document['getElementById'](_0x33a35d(0x153));_0x8b5e1f&&(updateDotStyle(_0x8b5e1f,_0x333fa3),_0x1aac65[_0x33a35d(0x148)]());});_0x3e4179['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x93a4a7=document['getElementById']('report-match-notification');_0x93a4a7&&(updateDotStyle(_0x93a4a7,_0x333fa3),_0x3e4179['disconnect']()),setTimeout(()=>_0x3e4179[_0x1c02e4(0x148)](),0x1388);}function updateDotStyle(_0x5634f7,_0x471e96){const _0x171835=a0_0x418e;_0x471e96?(_0x5634f7[_0x171835(0x147)][_0x171835(0x152)]='block',_0x5634f7['style']['backgroundColor']='#ff3b30',_0x5634f7[_0x171835(0x147)]['width']='10px',_0x5634f7['style']['height']=_0x171835(0x14f),_0x5634f7['style']['position']='absolute',_0x5634f7['style']['top']='-5px',_0x5634f7[_0x171835(0x147)][_0x171835(0x16e)]='-8px',_0x5634f7['style']['borderRadius']='50%',_0x5634f7[_0x171835(0x147)]['border']=_0x171835(0x167),_0x5634f7['style']['zIndex']=_0x171835(0x15a)):_0x5634f7['style']['display']=_0x171835(0x16c);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{const _0x33e6fb=a0_0x418e;setTimeout(()=>checkPendingMatches(),0x1f4),auth[_0x33e6fb(0x157)](()=>{const _0x12a5b2=_0x33e6fb;localStorage['removeItem'](_0x12a5b2(0x16f)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});