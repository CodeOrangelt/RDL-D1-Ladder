const a50_0x325a90=a50_0x1423,a50_0x3bd40d=(function(){let _0x18eb3d=!![];return function(_0x4042b6,_0x5cf618){const _0x1c52c6=_0x18eb3d?function(){if(_0x5cf618){const _0x580b49=_0x5cf618['apply'](_0x4042b6,arguments);return _0x5cf618=null,_0x580b49;}}:function(){};return _0x18eb3d=![],_0x1c52c6;};}()),a50_0x5db29d=a50_0x3bd40d(this,function(){const _0xb75fc6=a50_0x1423,_0x354021=function(){const _0xfa7ddf=a50_0x1423;let _0x72ace6;try{_0x72ace6=Function('return\x20(function()\x20'+_0xfa7ddf(0xbf)+');')();}catch(_0x402e73){_0x72ace6=window;}return _0x72ace6;},_0x432738=_0x354021(),_0x4d1d93=_0x432738[_0xb75fc6(0xb2)]=_0x432738['console']||{},_0x51411f=[_0xb75fc6(0xd0),_0xb75fc6(0x9b),'info','error',_0xb75fc6(0x9a),'table','trace'];for(let _0x5e1179=0x0;_0x5e1179<_0x51411f['length'];_0x5e1179++){const _0x3a1084=a50_0x3bd40d[_0xb75fc6(0x9d)]['prototype']['bind'](a50_0x3bd40d),_0x5b4019=_0x51411f[_0x5e1179],_0x115389=_0x4d1d93[_0x5b4019]||_0x3a1084;_0x3a1084['__proto__']=a50_0x3bd40d['bind'](a50_0x3bd40d),_0x3a1084['toString']=_0x115389['toString']['bind'](_0x115389),_0x4d1d93[_0x5b4019]=_0x3a1084;}});function a50_0x3928(){const _0x12ee3e=['exception','warn','adminStatusChanged','constructor','points','exists','innerHTML','current-theme','store-message','purchase','entries','Only\x20the\x20best\x20get\x20this\x20one','error','Sign\x20in\x20to\x20Apply','‚úÖ\x20Purchased\x20','email','disabled','\x20theme\x20purchased!','info','You\x20already\x20own\x20the\x20','inventory','\x20Points','isUserAdmin','Buy','console','forEach','closest','dataset','Theme\x20','toLocaleString','Gold','Yellow\x20Orange','createElement','add','\x20theme','name','\x20not\x20found','{}.constructor(\x22return\x20this\x22)(\x20)','opacity','Please\x20sign\x20in\x20to\x20select\x20themes','theme',',\x20Inventory:\x20','isAdmin','visible','transactions','success','display','Not\x20enough\x20points.\x20You\x20need\x20','includes','classList','textContent','Blue','price','0.7','log','\x20is\x20already\x20your\x20current\x20theme','ThemeSystem','Apply\x20Theme','üè™\x20Redeem\x20store\x20loaded','div','default','getElementById','cursor','Current\x20Theme','This\x20one\x20is\x20really\x20pretty','length','Buy\x20for\x20','body','parentNode','Black\x20&\x20White','className','.theme-select-btn'];a50_0x3928=function(){return _0x12ee3e;};return a50_0x3928();}a50_0x5db29d();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':a50_0x325a90(0xb9),'description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':a50_0x325a90(0xb8),'description':a50_0x325a90(0xa5)},'contrast':{'price':0x0,'name':a50_0x325a90(0xdf),'description':'You\x20can\x20see\x20better!'},'ocean':{'price':0x12c,'name':a50_0x325a90(0xcd),'description':a50_0x325a90(0xda)},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x4310e6=a50_0x325a90;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document[_0x4310e6(0xd7)]('store-content'),pointsDisplay=document['getElementById']('user-points'),authWarning=document[_0x4310e6(0xd7)]('auth-warning'),initAuthListener(),buildStoreUI();});function a50_0x1423(_0x8d92ac,_0x68a6fd){const _0x5db29d=a50_0x3928();return a50_0x1423=function(_0x3bd40d,_0x3d4b34){_0x3bd40d=_0x3bd40d-0x9a;let _0x3928e8=_0x5db29d[_0x3bd40d];return _0x3928e8;},a50_0x1423(_0x8d92ac,_0x68a6fd);}function initAuthListener(){onAuthStateChanged(auth,async _0x207138=>{const _0x248bc3=a50_0x1423;if(_0x207138){console[_0x248bc3(0xd0)]('‚úÖ\x20User\x20authenticated:',_0x207138['displayName']||_0x207138['email']);if(authWarning)authWarning['style'][_0x248bc3(0xc8)]='none';if(storeContainer)storeContainer['style'][_0x248bc3(0xc8)]='block';await loadUserData(_0x207138),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style'][_0x248bc3(0xc8)]='block';if(storeContainer)storeContainer['style'][_0x248bc3(0xc8)]='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x248bc3(0xb0)]=![];}});}async function loadUserData(_0x3b485e){const _0x1f1808=a50_0x325a90;try{const _0x33ba1c=doc(db,'userProfiles',_0x3b485e['uid']),_0x5e6c3f=await getDoc(_0x33ba1c);if(_0x5e6c3f['exists']()){const _0x2676dd=_0x5e6c3f['data']();userData={'points':_0x2676dd[_0x1f1808(0x9e)]||0x0,'inventory':_0x2676dd['inventory']||[],'isAdmin':_0x2676dd['isAdmin']||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window['isUserAdmin']=userData['isAdmin'],userData[_0x1f1808(0xc4)]&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent(_0x1f1808(0x9c),{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData[_0x1f1808(0x9e)]+_0x1f1808(0xc3)+userData[_0x1f1808(0xae)][_0x1f1808(0xdb)]+'\x20items');}else await setDoc(_0x33ba1c,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x3b485e['displayName']||_0x3b485e[_0x1f1808(0xa9)]?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window['isUserAdmin']=![],console[_0x1f1808(0xd0)]('New\x20user\x20profile\x20created');}catch(_0x477e6a){console['error']('Error\x20loading\x20user\x20data:',_0x477e6a);}}function userOwnsTheme(_0xda7a81){const _0x1ec6b4=a50_0x325a90;if(THEMES[_0xda7a81]?.['price']===0x0)return!![];return userData['inventory'][_0x1ec6b4(0xca)]('theme_'+_0xda7a81);}async function purchaseTheme(_0x3c5e19){const _0x33e108=a50_0x325a90,_0x1a7070=auth['currentUser'];if(!_0x1a7070)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x2ac49d=THEMES[_0x3c5e19];if(!_0x2ac49d)return console['error'](_0x33e108(0xb6)+_0x3c5e19+_0x33e108(0xbe)),![];if(userData['points']<_0x2ac49d['price'])return showMessage(_0x33e108(0xc9)+(_0x2ac49d['price']-userData[_0x33e108(0x9e)])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x3c5e19))return showMessage(_0x33e108(0xad)+_0x2ac49d[_0x33e108(0xbd)]+_0x33e108(0xbc),_0x33e108(0xac)),![];try{const _0x2b683f=doc(db,'userProfiles',_0x1a7070['uid']),_0x51cb47=await getDoc(_0x2b683f);if(!_0x51cb47[_0x33e108(0x9f)]())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x474f3e=_0x51cb47['data'](),_0x392d50=_0x474f3e['points']||0x0,_0x5d888f=_0x474f3e['inventory']||[];if(_0x392d50<_0x2ac49d['price'])return showMessage('Insufficient\x20points',_0x33e108(0xa6)),![];if(_0x5d888f['includes']('theme_'+_0x3c5e19))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0x1bfa56=_0x392d50-_0x2ac49d[_0x33e108(0xce)],_0x3ac52b=[..._0x5d888f,'theme_'+_0x3c5e19];return await updateDoc(_0x2b683f,{'points':_0x1bfa56,'inventory':_0x3ac52b,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,_0x33e108(0xc6)),{'userId':_0x1a7070['uid'],'userEmail':_0x1a7070[_0x33e108(0xa9)],'itemId':'theme_'+_0x3c5e19,'itemTitle':_0x2ac49d[_0x33e108(0xbd)]+'\x20Theme','price':_0x2ac49d['price'],'type':_0x33e108(0xa3),'category':'theme','timestamp':serverTimestamp()}),userData['points']=_0x1bfa56,userData['inventory']=_0x3ac52b,pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x33e108(0xb7)]()),console['log'](_0x33e108(0xa8)+_0x2ac49d[_0x33e108(0xbd)]+'\x20theme\x20for\x20'+_0x2ac49d['price']+'\x20points'),!![];}catch(_0x72aa9d){return console[_0x33e108(0xa6)]('Purchase\x20failed:',_0x72aa9d),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}function applyTheme(_0x15c5fc){const _0x8fac2a=a50_0x325a90;if(!userOwnsTheme(_0x15c5fc))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window['ThemeSystem']?(window['ThemeSystem']['switchTheme'](_0x15c5fc),showMessage((THEMES[_0x15c5fc]?.['name']||_0x15c5fc)+'\x20theme\x20applied!',_0x8fac2a(0xc7)),!![]):(console[_0x8fac2a(0xa6)]('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0xf005ef=a50_0x325a90,_0x5019be=document['querySelector']('.themes-grid');if(!_0x5019be){console['error']('Themes\x20container\x20not\x20found');return;}_0x5019be['innerHTML']='',Object[_0xf005ef(0xa4)](THEMES)['forEach'](([_0x46e411,_0x268fc6])=>{const _0x2ad881=_0xf005ef,_0x118cc8=document[_0x2ad881(0xba)](_0x2ad881(0xd5));_0x118cc8['className']='store-item',_0x118cc8['dataset'][_0x2ad881(0xc2)]=_0x46e411,_0x118cc8['dataset']['itemId']='theme_'+_0x46e411,_0x118cc8['dataset']['price']=_0x268fc6[_0x2ad881(0xce)],_0x118cc8[_0x2ad881(0xa0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x46e411+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x268fc6['price']===0x0?'FREE':_0x268fc6['price']+_0x2ad881(0xaf))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x268fc6['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x268fc6['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x5019be['appendChild'](_0x118cc8);}),setupThemeButtons();}function setupThemeButtons(){const _0x449931=a50_0x325a90,_0x221e37=document['querySelectorAll']('.theme-select-btn');_0x221e37[_0x449931(0xb3)](_0x7d5623=>{_0x7d5623['addEventListener']('click',async _0x2650bb=>{const _0x16d80d=a50_0x1423;_0x2650bb['preventDefault']();const _0x7d1c3e=auth['currentUser'];if(!_0x7d1c3e){showMessage(_0x16d80d(0xc1),'error');return;}const _0x91a9e6=_0x7d5623['closest']('[data-theme]'),_0x2e3535=_0x91a9e6[_0x16d80d(0xb5)]['theme'],_0x542519=THEMES[_0x2e3535];if(!_0x542519){console[_0x16d80d(0xa6)]('Theme\x20'+_0x2e3535+'\x20not\x20found');return;}console[_0x16d80d(0xd0)]('Theme\x20clicked:\x20'+_0x542519['name']+'\x20('+_0x2e3535+')');if(_0x7d5623[_0x16d80d(0xaa)]){_0x542519['price']>0x0&&showMessage('You\x20need\x20'+_0x542519[_0x16d80d(0xce)]+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x7d5623['textContent']==='Current\x20Theme'){showMessage(_0x542519[_0x16d80d(0xbd)]+_0x16d80d(0xd1),'info');return;}if(_0x7d5623['textContent']===_0x16d80d(0xd3)){applyTheme(_0x2e3535),updateThemeButtons();return;}if(_0x7d5623['textContent']['includes'](_0x16d80d(0xb1))){const _0x329f6d=window['confirm']('Purchase\x20'+_0x542519['name']+'\x20theme\x20for\x20'+_0x542519['price']+'\x20points?');if(!_0x329f6d)return;const _0x4dc52a=await purchaseTheme(_0x2e3535);_0x4dc52a&&(showMessage(_0x542519['name']+_0x16d80d(0xab),_0x16d80d(0xc7)),applyTheme(_0x2e3535),updateThemeButtons());return;}userOwnsTheme(_0x2e3535)?applyTheme(_0x2e3535):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0x16d80d(0xa6));});}),updateThemeButtons();}function updateThemeButtons(){const _0x4a2922=a50_0x325a90,_0x5b4560=window['ThemeSystem']?window[_0x4a2922(0xd2)]['getCurrentTheme']():_0x4a2922(0xd6),_0x334e00=auth['currentUser'];document['querySelectorAll'](_0x4a2922(0xe1))['forEach'](_0x1f5768=>{const _0x232a3d=_0x4a2922,_0x41fbdb=_0x1f5768[_0x232a3d(0xb4)]('[data-theme]'),_0x519461=_0x41fbdb['dataset']['theme'],_0x34cee4=THEMES[_0x519461];if(!_0x34cee4)return;_0x1f5768[_0x232a3d(0xaa)]=![],_0x1f5768['style'][_0x232a3d(0xc0)]='',_0x1f5768['style'][_0x232a3d(0xd8)]='pointer',_0x1f5768[_0x232a3d(0xcb)]['remove'](_0x232a3d(0xa1),'apply-theme','can-afford','cannot-afford','sign-in-free','sign-in-paid');if(!_0x334e00){_0x34cee4[_0x232a3d(0xce)]===0x0?(_0x1f5768[_0x232a3d(0xcc)]=_0x232a3d(0xa7),_0x1f5768['classList']['add']('sign-in-free')):(_0x1f5768['textContent']='Sign\x20in\x20to\x20Purchase',_0x1f5768[_0x232a3d(0xaa)]=!![],_0x1f5768['style']['opacity']=_0x232a3d(0xcf),_0x1f5768['classList']['add']('sign-in-paid'));return;}if(_0x519461===_0x5b4560){_0x1f5768[_0x232a3d(0xcc)]=_0x232a3d(0xd9),_0x1f5768['classList'][_0x232a3d(0xbb)]('current-theme'),_0x1f5768['disabled']=!![],_0x1f5768['style']['cursor']='default';return;}if(userOwnsTheme(_0x519461)){_0x1f5768['textContent']='Apply\x20Theme',_0x1f5768[_0x232a3d(0xcb)]['add']('apply-theme');return;}if(userData[_0x232a3d(0x9e)]>=_0x34cee4['price']){_0x1f5768['textContent']=_0x232a3d(0xdc)+_0x34cee4['price']+'\x20Points',_0x1f5768['classList']['add']('can-afford');return;}_0x1f5768[_0x232a3d(0xcc)]='Need\x20'+_0x34cee4['price']+'\x20Points',_0x1f5768[_0x232a3d(0xcb)]['add']('cannot-afford'),_0x1f5768['style']['opacity']='0.5',_0x1f5768['disabled']=!![],_0x1f5768['style']['cursor']='not-allowed';});}function showMessage(_0x5b5843,_0x411215='info'){const _0x265903=a50_0x325a90,_0x1514ec=document[_0x265903(0xd7)]('store-message');_0x1514ec&&_0x1514ec['remove']();const _0x3e323a=document['createElement']('div');_0x3e323a['id']=_0x265903(0xa2),_0x3e323a[_0x265903(0xe0)]='store-message\x20store-message-'+_0x411215,_0x3e323a['textContent']=_0x5b5843,document[_0x265903(0xdd)]['appendChild'](_0x3e323a),requestAnimationFrame(()=>{const _0x352113=_0x265903;_0x3e323a[_0x352113(0xcb)][_0x352113(0xbb)](_0x352113(0xc5));}),setTimeout(()=>{_0x3e323a['classList']['remove']('visible'),setTimeout(()=>{const _0x3b6930=a50_0x1423;_0x3e323a[_0x3b6930(0xde)]&&_0x3e323a['remove']();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log'](a50_0x325a90(0xd4));