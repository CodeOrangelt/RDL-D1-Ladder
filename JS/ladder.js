const a27ar=a27b;(function(a,b){const P=a27b,c=a();while(!![]){try{const d=-parseInt(P(0x208))/0x1+parseInt(P(0x217))/0x2+-parseInt(P(0x20b))/0x3+parseInt(P(0x205))/0x4+parseInt(P(0x236))/0x5+parseInt(P(0x204))/0x6*(parseInt(P(0x243))/0x7)+-parseInt(P(0x25e))/0x8;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a27a,0xc678e));import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';function a27a(){const ay=['Bg9ZC2vZ','BM93','cIaGicaGicaGicaGicaGica8l2e+cIaGicaGicaGicaGicaGica','y2HHBMDL','yMXVy2S','nJy0nZbmuMDkuwi','pc9ZCgfUpG','oYb0zxH0lwrLy29YyxrPB246ig5VBMu7iJ4kicaGicaGicaGicaGicaGicaGica','tufyx1nbrKvFsu5uruDfuG','Dg90ywXlAwXSCW','Cg9ZAxrPB24','i0mWqZbdma','Aw5Uzxjive1m','phrYpJX0zcbJB2XZCgfUpsi4iIbJBgfZCZ0IBg9HzgLUzY1JzwXSiJ5mB2fKAw5NigXHzgrLCIbKyxrHlI4Upc90zd48l3rYpG','zgf0yq','zhvVCY1ZD2L0y2G','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzhvVCW','rxjYB3iGy2HLy2TPBMCGywrTAw4GC3rHDhvZoG','mtG1nJe5yKXcywvs','oYi+','u2v0ihLVDxiGDxnLCM5HBwuGDg8GC2vLihjLy29TBwvUzgvKig9WCg9Uzw50CW','zgLZCgXHEq','pc90zd4kicaGicaGica8DgqGC3r5Bgu9iNbVC2L0Aw9UoIbYzwXHDgL2ztSIpGOGicaGicaGicaGica8zgL2ihn0EwXLpsjKAxnWBgf5oIbMBgv4oYbHBgLNBI1PDgvTCZOGy2vUDgvYoYbWB3nPDgLVBJOGCMvSyxrPDMu7iJ4kicaGicaGicaGicaGicaGidXHigHYzwy9iNbYB2zPBguUAhrTBd91C2vYBMfTzt0','AgfZ','Bg9HzgLUzY1PBMrPy2f0B3i','zdmTBgfKzgvYlwnVBNrHAw5LCG','cIaGicaGidXKAxyGy2XHC3m9iNjHBMSIpIm','pc90zd4kicaGicaGica8Dgq+','zxjYB3i','Dg9ju09tDhjPBMC','rhvVCYbSywrKzxiGAxmGy3vYCMvUDgX5igfKBwLUlw9UBhK','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzde','CxvLCNLtzwXLy3rVCKfSBa','qMfZzwqGB24GEw91CIbfte8Gka','D2LUBMvYu2nVCMu','CMvTB3zL','zgf0zq','r29Sza','CxvLCNLtzwXLy3rVCG','i2XHzgrLCIb0AgvHzcb0CG','rxjYB3iGzMv0y2HPBMCGyMf0y2GGBwf0y2GGC3rHDhm6','DMLZAwjSzq','sw5Hy3rPDMu','BMv3rwXV','BwfW','nJu2mdq4BeHjtuHJ','ywrK','iIakicaGicaGicaGicaGicaGicaGicaGicaGy2XHC3m9iNbSyxLLCI1MBgfNiIakicaGicaGicaGicaGicaGicaGicaGicaGC3r5Bgu9iM1HCMDPBI1Szwz0oIa1ChG7ihzLCNrPy2fSlwfSAwDUoIbTAwrKBgu7iGOGicaGicaGicaGicaGicaGicaGicaGicbVBMvYCM9Ypsj0AgLZlNn0EwXLlMrPC3bSyxK9j25VBMuNiJ4','DwLK','B2XKrwXVuMf0Aw5N','C29YDa','Dg90ywXezwf0Ahm','DgvHBw1HDgu','CgXHEwvYC0q','Dg9vChbLCKnHC2u','zdeTBgfKzgvYlwnVBNrHAw5LCG','ruXpigHPC3rVCNKGy29SBgvJDgLVBIbPCYbLBxb0Eq','y3vYC29Y','zw1WDhK','y291BNrYEq','ywrKrxzLBNrmAxn0zw5LCG','Dgv4DenVBNrLBNq','yM9Sza','cIaGicaGicaGicaGidX0CJ4kicaGicaGicaGicaGicaGidX0zcbJB2XZCgfUpsi4iIbZDhLSzt0IDgv4Dc1HBgLNBJOGy2vUDgvYoYbJB2XVCJOGCMvKoYi+cIaGicaGicaGicaGicaGicaGicaGrxjYB3iGBg9HzgLUzYbSywrKzxiGzgf0ytOG','z2v0rgf0zq','yxbWzw5Kq2HPBgq','C2v0','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzdi','cIaGicaGicaGicaGicaGica8l3rKpGOGicaGicaGicaGica8l3rYpGOGicaGicaGia','i0y0ndmZnG','Cg93','jMXHzgrLCJ1KmsiGcIaGicaGicaGicaGicaGicaGicbZDhLSzt0Iy29SB3i6ia','CgXHEwvYC0qY','zhvVCW','Dg9gAxHLza','C2v0rgf0zq','pgLTzYbZCMm9iI4Ul2LTywDLCY9MBgfNCY8','y2XPy2S','rxjYB3iGBg9HzgLUzYbSywrKzxiGzgf0ytO','Aw5JBhvKzxm','ywn0AxzL','CgXHEwvYC0r1B3m','DgLTzxn0yw1W','ywrTAw4','tgfKzgvYihrHyMXLigjVzhKGBM90igzVDw5K','D2fYBG','vxnPBMCGy2fJAgvKieqXigXHzgrLCIbKyxrH','y29SB3i','C3r5Bgu','zgL2','zgLZCgf0y2HfDMvUDa','CM9Szq','zdiTBgfKzgvYlwnVBNrHAw5LCG','ChjLDMvUDerLzMf1Bhq','rxjYB3iGzMLUzgLUzYbYzwnVBw1LBMrLzcbVChbVBMvUDa','igXHzgrLCG','zxHPC3rZ','zwXVuMf0Aw5N','y3vYCMvUDfvZzxi','Aw5SAw5L','z3jHEq','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzdm','z2v0rwXLBwvUDej5swq','DxnLCM5HBwu','y3jLyxrLrwXLBwvUDa','vw5Yyw5Rzwq','ChvZAa','B25bDxrOu3rHDgvdAgfUz2vK','iZuWqZG3oa','BM9Uzq','oYbWB3nPDgLVBJOGCMvSyxrPDMu7iJ4kicaGicaGicaGicaGpgrPDIbJBgfZCZ0IzwXVlwnVBNrHAw5LCIiGC3r5Bgu9iMrPC3bSyxK6igzSzxG7igfSAwDUlwL0zw1ZoIbJzw50zxi7iJ4kicaGicaGicaGicaGicaGidXZCgfUignSyxnZpsjLBg8TDMfSDwuIpG','CMvJzw50qwn0AxzPDhK','pc9KAxy+cIaGicaGidXKAxyGy2XHC3m9iNbSyxLLCI1Uyw1LiJ4','zM9UDfnPEMu','i0nen0yZmG','zM9UDfDLAwDODa','otzfzLLfu3u','ntG5otG2mhDsuhvZCW','pc9ZCgfUpIaOruXpoIa','rxjYB3iGBg9HzgLUzYbSywrKzxi6','mte4mJeWnenirwjiyG','ksWGEw91ihnOB3vSzcbIzsbWBgf5Aw5NidXZCgfUignSyxnZpsjYzwnVBw1LBMrHDgLVBI1OAwDOBgLNAhqIihn0EwXLpsjJB2XVCJOG','CM9Szu5HBwu','mtu3mJK5mejZu21ABa','BgfKzgvYlxbSyxLLCG','zdmTC3DPDgnO','ig5VDcbMB3vUza','zM9YrwfJAa','BgfKzgvYlwnVBNrHAw5LCG','zwXV','Dg9mB3DLCKnHC2u','z2v0','Dg90ywXnyxrJAgvZ','Dgq6BNrOlwnOAwXKkdmP','C2vJB25KCW','mtm3nZCWmKr5B1DluW','y2HLy2TLza','BgvUz3rO','tM8GAwrLywWGB3bWB25LBNqGzM91BMqGzM9YihLVDxiGy3vYCMvUDcbfte8Gka','CgXHEwvYCW','CgfYzw50tM9Kzq','CgXHEwvYC0qZ','DgHLBG','B3bHy2L0Eq','y2XHC3noyw1L','i2XHzgrLCIb0yM9KEq','BMv3rwXVuMf0Aw5N','cIaGica8Dhi+cIaGicaGicaGphrKpG','AgfZvgvHBq','DxnLCLbYB2zPBgvZ','D2LUCW','Bg9N','Bwf0y2HLCW','zhvVCY1SywrKzxiTy29UDgfPBMvY','ywrTAw5aBgfKzgvYlMnVBq','pc9ZCgfUpGOGicaGicaGicaGicaGicaGphnWyw4Gy2XHC3m9iNrYzw5KlwLUzgLJyxrVCIiGC3r5Bgu9iM1HCMDPBI1Szwz0oIa1ChG7iJ48l3nWyw4+cIaGicaGicaGicaGidWVzgL2pGOGicaGicaGidWVDgq+cIaGicaGicaGphrKpG','zg9JCW','ww91j3jLihrLyw1Lzcb3AxrOidXZCgfUignSyxnZpsjYzwnVBw1LBMrHDgLVBI1OAwDOBgLNAhqIpG','y2XHC3nmAxn0','zw1HAwW','C2XPy2u'];a27a=function(){return ay;};return a27a();}const auth=getAuth();let activeListeners=[];export async function loadLadderData(a=0x1){const Q=a27b;try{document[Q(0x1f6)](Q(0x249))[Q(0x289)][Q(0x246)]='block';const b=await getLadderData(a);b['sort']((f,g)=>g['elo']-f[Q(0x211)]);const c=b[Q(0x25d)](f=>f['id']),d=await getEloHistoryBatch(c,a),e=b['map']((f,g)=>{const R=Q,h=d[f['id']]||[],i=h[R(0x263)]((j,k)=>new Date(k[R(0x255)])-new Date(j['date']))[R(0x230)](0x0,0x5);return{...f,'rank':g+0x1,'lastMatches':i,'recentActivity':i[R(0x219)]>0x0};});renderLadder(e),setupRealTimeUpdates(a);}catch(f){console[Q(0x24d)](Q(0x27f),f),document['getElementById']('error-message')['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById']('loading-indicator')[Q(0x289)][Q(0x246)]=Q(0x1fd);}}function setupRealTimeUpdates(a=0x1){const S=a27b;activeListeners[S(0x20f)](f=>f()),activeListeners=[];const b=a===0x1?'players':S(0x266)+a,c=a===0x1?S(0x228):'matchesD'+a,d=new Date();d[S(0x27c)](d[S(0x271)]()-0x1);const e=setupEfficientListener(c,[where('date','>=',d[S(0x24e)]()),limit(0xa),orderBy(S(0x255),'desc')],async f=>{const T=S;f[T(0x219)]>0x0&&await loadLadderData(a);});activeListeners[S(0x1fa)](e);}export function cleanupListeners(){activeListeners['forEach'](a=>a()),activeListeners=[];}function renderLadder(a){const U=a27b,b=document[U(0x1f6)](U(0x210));b[U(0x23d)]='',a['forEach'](c=>{const V=U,d=document[V(0x1f8)](V(0x28a));d[V(0x220)]=V(0x20c),d[V(0x23d)]=V(0x24b)+c['rank']+V(0x200)+(c[V(0x1f7)]||c['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+c[V(0x211)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(c[V(0x1ff)]?'active':'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(c[V(0x1ff)]?'Active':V(0x25b))+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',b['appendChild'](d);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(a=![]){const W=a27b,b=document['querySelector']('#ladder\x20tbody');if(!b){console['error'](W(0x285));return;}b['innerHTML']=W(0x23e);try{const c=Date[W(0x232)]();if(!a&&playerCache['data']&&c-playerCache['timestamp']<CACHE_DURATION){console[W(0x227)](W(0x287)),updateLadderDisplay(playerCache['data']);return;}const d=collection(db,W(0x21b)),e=await getDocs(d),f=[];e[W(0x20f)](l=>{const X=W,m=l['data']();f['push']({...m,'id':l['id'],'elo':m[X(0x1f1)]||0x0,'position':m[X(0x23b)]||Number[X(0x239)]});});const g=collection(db,'userProfiles'),h=await getDocs(g),i=new Map();h['forEach'](l=>{const Y=W,m=l['data']();m['username']&&i['set'](m[Y(0x1f7)]['toLowerCase'](),m);}),f[W(0x20f)](l=>{const Z=W,m=l[Z(0x1f7)]?.[Z(0x212)]();if(m&&i[Z(0x248)](m)){const n=i[Z(0x213)](m);n[Z(0x26c)]&&(l[Z(0x26c)]=n['country']['toLowerCase']());}});const j=f[W(0x25d)](l=>l[W(0x1f7)]),k=await fetchBatchMatchStats(j);f[W(0x263)]((l,m)=>{const a0=W,n=k[a0(0x213)](l[a0(0x1f7)])?.[a0(0x214)]||0x0,o=k['get'](m['username'])?.['totalMatches']||0x0;if(n===0x0!==(o===0x0))return n===0x0?0x1:-0x1;return(l['position']||0x3e7)-(m[a0(0x23b)]||0x3e7);}),f['forEach']((l,m)=>{l['position']=m+0x1;}),playerCache[W(0x23f)]=f,playerCache[W(0x283)]=c,updateLadderDisplay(f,k);}catch(l){console[W(0x24d)](W(0x207),l),b[W(0x23d)]=W(0x270)+l['message']+W(0x275);}}async function fetchBatchMatchStats(a){const a1=a27b,b=new Map();try{a[a1(0x20f)](e=>{const a2=a1;b[a2(0x273)](e,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const c=collection(db,'approvedMatches'),d=await getDocs(c);d['forEach'](e=>{const a3=a1,f=e[a3(0x23f)](),g=f['winnerUsername'],h=f['loserUsername'];if(a['includes'](g)){const i=b[a3(0x213)](g);i[a3(0x226)]++,i['totalMatches']++,i[a3(0x23a)]+=parseInt(f[a3(0x253)])||0x0,i[a3(0x264)]+=parseInt(f['loserScore'])||0x0;}if(a[a3(0x280)](h)){const j=b['get'](h);j[a3(0x231)]++,j['totalMatches']++,j['totalKills']+=parseInt(f['loserScore'])||0x0,j[a3(0x264)]+=parseInt(f['winnerScore'])||0x0;}}),a[a1(0x20f)](e=>{const a4=a1,f=b[a4(0x213)](e);f['kda']=f[a4(0x264)]>0x0?(f['totalKills']/f[a4(0x264)])[a4(0x27b)](0x2):f[a4(0x23a)]['toFixed'](0x2),f['winRate']=f[a4(0x214)]>0x0?(f['wins']/f[a4(0x214)]*0x64)[a4(0x27b)](0x1):0x0;});}catch(e){console['error'](a1(0x259),e);}return b;}function a27b(a,b){const c=a27a();return a27b=function(d,e){d=d-0x1ee;let f=c[d];if(a27b['WiOThP']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a27b['xNJeTX']=g,a=arguments,a27b['WiOThP']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a27b['xNJeTX'](f),a[i]=f):f=j,f;},a27b(a,b);}function createPlayerRow(a,b){const a5=a27b,c=parseFloat(a[a5(0x211)])||0x0;let d=a5(0x1f4);if(c>=0x7d0)d=a5(0x1fc);else{if(c>=0x708)d='#FFD700';else{if(c>=0x640)d='#b9f1fc';else c>=0x578&&(d='#CD7F32');}}let e='';return a[a5(0x26c)]&&(e=a5(0x27d)+a['country'][a5(0x212)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+a['country']+a5(0x260)),a5(0x223)+a['position']+a5(0x247)+encodeURIComponent(a[a5(0x1f7)])+a5(0x278)+d+a5(0x238)+a['username']+a5(0x233)+e+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+d+a5(0x1fe)+c+a5(0x22b)+b['totalMatches']+a5(0x24c)+b['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+b[a5(0x231)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+b['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+b['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(a){const a6=a27b;if(a>=0x7d0)return'Emerald';if(a>=0x708)return a6(0x256);if(a>=0x640)return'Silver';if(a>=0x578)return'Bronze';return a6(0x1f9);}async function getPlayersLastEloChanges(a){const a7=a27b,b=new Map();a[a7(0x20f)](c=>{const a8=a7;b[a8(0x273)](c,0x0);});try{const c=collection(db,a7(0x21b)),d=await getDocs(c),e=new Map(),f=new Map();d[a7(0x20f)](l=>{const a9=a7,m=l[a9(0x23f)]();m['username']&&(e['set'](l['id'],m[a9(0x1f7)]),f[a9(0x273)](m['username']['toLowerCase'](),l['id']));});const g=collection(db,'eloHistory'),h=query(g,orderBy(a7(0x283),'desc'),limit(0x12c)),i=await getDocs(h);if(i['empty'])return console['log'](a7(0x269)),b;if(i[a7(0x22c)][a7(0x219)]>0x0){const l=i[a7(0x22c)][0x0]['data']();if(l['player']&&e[a7(0x248)](l['player'])){}}const j=new Map();let k=0x0;i['forEach'](m=>{const aa=a7,n=m[aa(0x23f)]();let o=null;if(n['player']&&e[aa(0x248)](n['player']))o=e['get'](n['player']);else{if(n['username']&&f['has'](n[aa(0x1f7)]['toLowerCase']()))o=n[aa(0x1f7)];else n['playerUsername']&&f['has'](n['playerUsername']['toLowerCase']())&&(o=n['playerUsername']);}o&&a[aa(0x280)](o)&&(k++,!j[aa(0x248)](o)&&j[aa(0x273)](o,[]),j['get'](o)[aa(0x1fa)]({...n,'timestamp':n[aa(0x283)]?.[aa(0x216)]||0x0}));}),j[a7(0x20f)]((m,n)=>{const ab=a7;if(m['length']>0x0){m['sort']((p,q)=>q['timestamp']-p['timestamp']);const o=m['find'](p=>p[ab(0x234)]!==undefined||p[ab(0x25c)]!==undefined&&p['previousElo']!==undefined||p[ab(0x222)]!==undefined&&p['oldEloRating']!==undefined);if(o){let p;if(o['change']!==undefined)p=parseInt(o['change']);else{if(o['newElo']!==undefined&&entry['previousElo']!==undefined)p=parseInt(o[ab(0x25c)])-parseInt(o['previousElo']);else o['newEloRating']!==undefined&&entry[ab(0x262)]!==undefined&&(p=parseInt(o['newEloRating'])-parseInt(o[ab(0x262)]));}!isNaN(p)&&p!==0x0&&b[ab(0x273)](n,p);}}});}catch(m){console['error']('Error\x20fetching\x20ELO\x20history:',m);}return b;}async function updateLadderDisplay(a,b=null){const ac=a27b,c=document[ac(0x257)](ac(0x221));if(!c){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const d=document[ac(0x257)](ac(0x258));d&&(d[ac(0x23d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const e=a['map'](g=>g['username']);!b&&(b=await fetchBatchMatchStats(e));const f=a['map'](g=>{const ad=ac,h=b[ad(0x213)](g[ad(0x1f7)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRow(g,h);})['join']('');c[ac(0x23d)]=f,getPlayersLastEloChanges(e)[ac(0x21e)](g=>{const ae=ac,h=new Map();c[ae(0x251)]('tr')['forEach']((i,j)=>{j<e['length']&&h['set'](e[j],i);}),g[ae(0x20f)]((i,j)=>{const af=ae,k=h['get'](j);if(k&&i!==0x0){const l=k['querySelector'](af(0x215));if(l){const m=i>0x0?'+'+i:''+i,n=l['querySelector']('.trend-indicator');if(n)n[af(0x26e)]=m,n['style'][af(0x288)]=i>0x0?'#4CAF50':af(0x276),n[af(0x289)][af(0x203)]=af(0x26f),n['style'][af(0x201)]='0.85em',n[af(0x289)][af(0x246)]=af(0x1f3),n['style']['visibility']=af(0x25a),n['style'][af(0x21f)]='1';else{}}}});})['catch'](g=>console[ac(0x24d)]('Error\x20updating\x20ELO\x20trend\x20indicators:',g));}function initLadderToggles(){const ag=a27b,a=document['getElementById']('d1-switch'),b=document['getElementById']('d2-switch'),c=document['getElementById'](ag(0x20d)),d=document['getElementById'](ag(0x240)),e=document['getElementById'](ag(0x268)),f=document['getElementById'](ag(0x28d)),g=document['getElementById'](ag(0x24a)),h=document[ag(0x1f6)](ag(0x229));function i(){const ah=ag;if(e)e[ah(0x22e)][ah(0x254)]('active');if(f)f['classList']['remove']('active');if(g)g[ah(0x22e)]['remove']('active');if(h)h['style']['display']=ah(0x1fd);if(e)e['style']['display']='none';if(f)f[ah(0x289)][ah(0x246)]='none';if(g)g[ah(0x289)][ah(0x246)]='none';}a&&a['addEventListener'](ag(0x27e),()=>{const ai=ag;console['log']('D1\x20toggle\x20clicked'),i();e&&(e['classList'][ai(0x25f)]('active'),e['style']['display']=ai(0x235));document['getElementById'](ai(0x250))[ai(0x289)][ai(0x246)]=ai(0x235),document['getElementById'](ai(0x274))[ai(0x289)]['display']='none',document['getElementById']('elo-recommendation-text-d3')['style'][ai(0x246)]='none';if(a)a[ai(0x22e)][ai(0x25f)](ai(0x281));if(b)b['classList']['remove']('active');if(c)c[ai(0x22e)]['remove'](ai(0x281));displayLadder(),findBestOpponent('d1');}),b&&b[ag(0x26d)]('click',()=>{const aj=ag;console[aj(0x227)]('D2\x20toggle\x20clicked'),i();f&&(f[aj(0x22e)][aj(0x25f)](aj(0x281)),f[aj(0x289)]['display']=aj(0x235));document[aj(0x1f6)](aj(0x250))[aj(0x289)][aj(0x246)]='none',document['getElementById']('elo-recommendation-text-d2')[aj(0x289)]['display']=aj(0x235),document['getElementById']('elo-recommendation-text-d3')[aj(0x289)]['display']=aj(0x1fd);if(b)b['classList']['add'](aj(0x281));if(a)a['classList'][aj(0x254)](aj(0x281));if(c)c[aj(0x22e)]['remove']('active');displayLadderD2(),findBestOpponent('d2');}),c&&c['addEventListener']('click',()=>{const ak=ag;console[ak(0x227)]('D3\x20toggle\x20clicked'),i();g&&(g['classList'][ak(0x25f)]('active'),g[ak(0x289)][ak(0x246)]='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']=ak(0x1fd),document['getElementById']('elo-recommendation-text-d2')[ak(0x289)][ak(0x246)]=ak(0x1fd),document[ak(0x1f6)]('elo-recommendation-text-d3')[ak(0x289)]['display']='block';if(c)c['classList'][ak(0x25f)]('active');if(a)a[ak(0x22e)]['remove'](ak(0x281));if(b)b['classList'][ak(0x254)]('active');displayLadderD3(),findBestOpponent('d3');}),d&&d['addEventListener']('click',()=>{const al=ag;i();if(h)h[al(0x289)]['display']=al(0x235);displayLadderDuos(),findBestOpponent('duos'),document[al(0x1f6)](al(0x241))&&(document[al(0x1f6)]('elo-recommendation-text-duos')['style']['display']=al(0x235)),document[al(0x1f6)]('elo-recommendation-text-d1')[al(0x289)]['display']=al(0x1fd),document[al(0x1f6)](al(0x274))['style'][al(0x246)]=al(0x1fd),document[al(0x1f6)](al(0x1f5))[al(0x289)][al(0x246)]='none';});}document['addEventListener']('DOMContentLoaded',()=>{const am=a27b;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')['style']['display']=am(0x235);});export{displayLadder};async function findBestOpponent(a='d1'){const an=a27b,b='elo-recommendation-text-'+a,c=document['getElementById'](b);if(!c){console['error']('Recommendation\x20element\x20for\x20'+a+an(0x20e));return;}const d=auth['currentUser'];if(!d){c[an(0x26e)]='';return;}try{const e=doc(db,'userProfiles',d['uid']),f=await getDoc(e);if(!f[an(0x1f0)]()){console['log']('No\x20user\x20profile\x20found'),c['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const g=f[an(0x23f)](),h=g['username'];if(!h){c['textContent']=an(0x245);return;}let i;switch(a){case'd1':i='players';break;case'd2':i=an(0x279);break;case'd3':i=an(0x21d);break;case an(0x27a):i=an(0x282);break;default:i='players';}if(a==='duos'){const s=collection(db,i),t=query(s,where('username','==',h)),u=await getDocs(t);if(u[an(0x26b)]){c['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const v=u[an(0x22c)][0x0]['data'](),w=parseInt(v[an(0x1f1)])||0x4b0;if(v[an(0x224)]&&v['teammate']){c[an(0x23d)]=an(0x22d)+v[an(0x265)]+'</span>.\x20Challenge\x20other\x20teams!';return;}const x=await getDocs(s);let y=null,z=-0x1;x[an(0x20f)](A=>{const ao=an,B=A[ao(0x23f)]();if(B[ao(0x1f7)]===h)return;if(B[ao(0x224)])return;const C=parseInt(B[ao(0x1f1)])||0x4b0,D=Math['abs'](C-w),E=Math['max'](0x0,0xc8-D);E>z&&(y=B,z=E);});if(y){const A=parseInt(y['eloRating'])||0x4b0;let B='gray';if(A>=0x7d0)B='#50C878';else{if(A>=0x708)B='#FFD700';else{if(A>=0x640)B=an(0x23c);else A>=0x578&&(B='#CD7F32');}}c['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+B+an(0x244)+y[an(0x1f7)]+an(0x206)+A+')';}else c['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const j=collection(db,i),k=query(j,where('username','==',h)),l=await getDocs(k);if(l[an(0x26b)]){c[an(0x26e)]='You\x27re\x20not\x20registered\x20on\x20the\x20'+a[an(0x267)]()+an(0x1ef);return;}const m=l[an(0x22c)][0x0]['data'](),n=parseInt(m[an(0x1f1)])||0x5dc,o=await getDocs(j);let p=null,q=-0x1;const r=getPlayerRankName(n);o['forEach'](C=>{const ap=an,D=C[ap(0x23f)]();if(D[ap(0x1f7)]===h)return;const E=parseInt(D['eloRating'])||0x5dc,F=getPlayerRankName(E),G=Math['abs'](E-n),H=0x20,I=0x1/(0x1+Math[ap(0x277)](0xa,(E-n)/0x190)),J=Math['round'](H*(0x1-I));if(J<=0x0)return;let L=0x0;const M=Math['max'](0x0,0x64-G*0.5),N=J>=0x3&&J<=0x8?0x32:J>0x0&&J<0xf?0x1e:0xa,O=r===F?0x28:0x0;L=M+N+O,L>q&&(p=D,q=L);});if(p){const C=parseInt(p[an(0x1f1)])||0x5dc;let D='gray';if(C>=0x7d0)D=an(0x1fc);else{if(C>=0x708)D='#FFD700';else{if(C>=0x640)D='#b9f1fc';else C>=0x578&&(D=an(0x202));}}c['innerHTML']=an(0x252)+n+an(0x209)+D+an(0x244)+p['username']+an(0x237);}else c[an(0x23d)]=an(0x21a)+n+')';}catch(E){console[an(0x24d)]('Error\x20finding\x20best\x20opponent:',E),c['textContent']=an(0x1ee);}}auth['onAuthStateChanged'](a=>{const aq=a27b,b=document['getElementById']('d1-ladder-container')&&document['getElementById']('d1-ladder-container')[aq(0x289)][aq(0x246)]!==aq(0x1fd),c=document['getElementById']('d2-ladder-container')&&document[aq(0x1f6)](aq(0x28d))[aq(0x289)][aq(0x246)]!=='none',d=document[aq(0x1f6)](aq(0x24a))&&document['getElementById'](aq(0x24a))['style'][aq(0x246)]!==aq(0x1fd),e=document['getElementById']('duos-ladder-container')&&document[aq(0x1f6)]('duos-ladder-container')[aq(0x289)]['display']!==aq(0x1fd),f=b?'d1':c?'d2':d?'d3':e?aq(0x27a):'d1';findBestOpponent(f);}),document[a27ar(0x26d)]('DOMContentLoaded',()=>{const as=a27ar,a=document['getElementById'](as(0x240)),b=document[as(0x257)]('label[for=\x22duos-switch\x22]');a&&b&&(a['addEventListener']('change',async c=>{const at=as;if(c['target'][at(0x218)]){const d=auth?.[at(0x1f2)],f=await checkIfUserIsAdmin(d);if(!f){c[at(0x28e)]();const g=document[at(0x1f6)]('d1-switch');return g&&(g['checked']=!![],g[at(0x28b)](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth[as(0x1fb)](async c=>{const au=as,d=await checkIfUserIsAdmin(c);!d?(a['disabled']=!![],b['style'][au(0x21f)]='0.5',b['style'][au(0x26a)]='not-allowed',b['title']=au(0x24f)):(a['disabled']=![],b['style'][au(0x21f)]='1',b[au(0x289)][au(0x26a)]='pointer',b['title']='');}));});async function checkIfUserIsAdmin(a){const av=a27ar;if(!a)return![];try{const b=[av(0x22a),'brian2af@outlook.com'];if(a[av(0x22f)]&&b[av(0x280)](a['email'][av(0x212)]()))return!![];const c=[av(0x225),av(0x21b),av(0x279),av(0x21d)],d=[av(0x284),'owner','council','creative\x20lead'];for(const e of c){try{const f=doc(db,e,a[av(0x261)]),g=await getDoc(f);if(g['exists']()){const h=g[av(0x23f)](),i=(h[av(0x20a)]||h[av(0x28c)]||'')['toLowerCase']();if(i&&d['includes'](i))return!![];}}catch(j){console[av(0x286)]('Error\x20checking\x20'+e+':',j);}}return![];}catch(k){return console['error'](av(0x242),k),![];}}function showAdminOnlyMessage(){const aw=a27ar,a=document['getElementById']('admin-only-message');a&&a['remove']();const b=document[aw(0x1f8)]('div');b['id']='admin-only-message',b[aw(0x289)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body'][aw(0x272)](b),setTimeout(()=>{const ax=aw;b[ax(0x21c)]&&b[ax(0x254)]();},0xbb8);}