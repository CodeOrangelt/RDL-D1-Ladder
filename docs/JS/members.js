function a0_0x11a9(_0x4dc152,_0x530685){const _0xdcfeff=a0_0x1b86();return a0_0x11a9=function(_0x3f88c2,_0x5e3d15){_0x3f88c2=_0x3f88c2-0x1ad;let _0x42007d=_0xdcfeff[_0x3f88c2];return _0x42007d;},a0_0x11a9(_0x4dc152,_0x530685);}const a0_0xc11c9e=a0_0x11a9;(function(_0x197821,_0x595ac7){const _0x2730dd=a0_0x11a9,_0x39077c=_0x197821();while(!![]){try{const _0xbf55ca=parseInt(_0x2730dd(0x1ad))/0x1+parseInt(_0x2730dd(0x1d6))/0x2+parseInt(_0x2730dd(0x1ca))/0x3+-parseInt(_0x2730dd(0x1c4))/0x4*(-parseInt(_0x2730dd(0x1af))/0x5)+-parseInt(_0x2730dd(0x1da))/0x6*(parseInt(_0x2730dd(0x1bd))/0x7)+parseInt(_0x2730dd(0x1bf))/0x8+-parseInt(_0x2730dd(0x1b5))/0x9*(parseInt(_0x2730dd(0x1b8))/0xa);if(_0xbf55ca===_0x595ac7)break;else _0x39077c['push'](_0x39077c['shift']());}catch(_0x3b3de7){_0x39077c['push'](_0x39077c['shift']());}}}(a0_0x1b86,0xac821));function a0_0x1b86(){const _0xa2ca61=['prototype','push','7873098psoHAW','elo','log','motto','1026665clTSyI','Error\x20rebuilding\x20members\x20list','25laAlfu','all','docId','commit','Error\x20updating\x20members\x20list:','active','18ByLpPp','userProfiles','Unknown','7025880BnattF','trace','__proto__','collection','updateMembersList','7hcbGRQ','get','1064360vZEada','delete','onWrite','warn','ladders','350044tFjvEb','isNonParticipant','forEach','length','table','constructor','3675711lYFdCd','Error\x20rebuilding\x20members\x20list:','set','console','has','data','{}.constructor(\x22return\x20this\x22)(\x20)','toString','params','playersD2','playersD3','{collection}/{docId}','1202900XdnejK','userId'];a0_0x1b86=function(){return _0xa2ca61;};return a0_0x1b86();}const a0_0x5e3d15=(function(){let _0x1dbbfb=!![];return function(_0x22b28a,_0x1bedba){const _0x171907=_0x1dbbfb?function(){if(_0x1bedba){const _0x4080b8=_0x1bedba['apply'](_0x22b28a,arguments);return _0x1bedba=null,_0x4080b8;}}:function(){};return _0x1dbbfb=![],_0x171907;};}()),a0_0x3f88c2=a0_0x5e3d15(this,function(){const _0x4121cd=a0_0x11a9,_0x148980=function(){const _0x2168da=a0_0x11a9;let _0x5f5ffb;try{_0x5f5ffb=Function('return\x20(function()\x20'+_0x2168da(0x1d0)+');')();}catch(_0xf54cb2){_0x5f5ffb=window;}return _0x5f5ffb;},_0x4a4e6b=_0x148980(),_0x56ebfc=_0x4a4e6b['console']=_0x4a4e6b[_0x4121cd(0x1cd)]||{},_0x29c659=[_0x4121cd(0x1dc),_0x4121cd(0x1c2),'info','error','exception',_0x4121cd(0x1c8),_0x4121cd(0x1b9)];for(let _0x44e65f=0x0;_0x44e65f<_0x29c659[_0x4121cd(0x1c7)];_0x44e65f++){const _0x19ca75=a0_0x5e3d15[_0x4121cd(0x1c9)][_0x4121cd(0x1d8)]['bind'](a0_0x5e3d15),_0x445512=_0x29c659[_0x44e65f],_0x21c87d=_0x56ebfc[_0x445512]||_0x19ca75;_0x19ca75[_0x4121cd(0x1ba)]=a0_0x5e3d15['bind'](a0_0x5e3d15),_0x19ca75['toString']=_0x21c87d[_0x4121cd(0x1d1)]['bind'](_0x21c87d),_0x56ebfc[_0x445512]=_0x19ca75;}});a0_0x3f88c2();const functions=require('firebase-functions'),admin=require('firebase-admin');admin['initializeApp']();const db=admin['firestore']();exports[a0_0xc11c9e(0x1bc)]=functions['firestore']['document'](a0_0xc11c9e(0x1d5))[a0_0xc11c9e(0x1c1)](async(_0x2ccf4e,_0x25d16a)=>{const _0x3f54a2=a0_0xc11c9e,_0x174cc9=_0x25d16a[_0x3f54a2(0x1d2)][_0x3f54a2(0x1bb)],_0x606e41=_0x25d16a['params'][_0x3f54a2(0x1b1)];if(!['players',_0x3f54a2(0x1d3),_0x3f54a2(0x1d4),'userProfiles','nonParticipants']['includes'](_0x174cc9))return null;try{await rebuildMembersList(),console['log']('Successfully\x20updated\x20aggregated\x20members\x20list');}catch(_0x3c5afc){console['error'](_0x3f54a2(0x1b3),_0x3c5afc);}});async function rebuildMembersList(){const _0x487794=a0_0xc11c9e,_0x2c92ec=db['batch'](),[_0x53c386,_0x300aa3,_0x36e0fa,_0x493ff0,_0x4fe6ee]=await Promise['all']([db['collection'](_0x487794(0x1b6))[_0x487794(0x1be)](),db['collection']('players')['get'](),db['collection']('playersD2')['get'](),db[_0x487794(0x1bb)]('playersD3')['get'](),db['collection']('nonParticipants')['get']()]),_0x3f55d0=new Map();_0x53c386[_0x487794(0x1c6)](_0x2a6784=>{const _0x5b3d82=_0x487794;_0x3f55d0[_0x5b3d82(0x1cc)](_0x2a6784['id'],_0x2a6784[_0x5b3d82(0x1cf)]());});const _0x44f878=new Map(),_0x29d85f=(_0x46b4eb,_0x2ca1f1)=>{const _0x16f797=_0x487794;_0x46b4eb[_0x16f797(0x1c6)](_0x3c2012=>{const _0x524d35=_0x16f797,_0x1f132c=_0x3c2012[_0x524d35(0x1cf)](),_0x4792eb=_0x3c2012['id'];!_0x44f878['has'](_0x4792eb)&&_0x44f878['set'](_0x4792eb,{'userId':_0x4792eb,'username':_0x1f132c['username']||_0x524d35(0x1b7),'ladders':[],'isNonParticipant':![]});const _0x531f17=_0x44f878['get'](_0x4792eb);_0x531f17['ladders']['push']({'ladder':_0x2ca1f1,'elo':_0x1f132c['eloRating']||0x4b0,'active':_0x1f132c[_0x524d35(0x1b4)]!==![]});});};_0x29d85f(_0x300aa3,'D1'),_0x29d85f(_0x36e0fa,'D2'),_0x29d85f(_0x493ff0,'D3'),_0x4fe6ee[_0x487794(0x1c6)](_0x3adfcd=>{const _0x211487=_0x487794,_0x52d6e2=_0x3adfcd[_0x211487(0x1cf)](),_0x1e6fe9=_0x3adfcd['id'];!_0x44f878[_0x211487(0x1ce)](_0x1e6fe9)&&_0x52d6e2['username']&&_0x44f878[_0x211487(0x1cc)](_0x1e6fe9,{'userId':_0x1e6fe9,'username':_0x52d6e2['username'],'ladders':[],'isNonParticipant':!![]});});const _0x2d11e8=[];_0x44f878['forEach']((_0x3c5c35,_0x47f7e9)=>{const _0x351705=_0x487794,_0xee8e5b=_0x3f55d0['get'](_0x47f7e9)||{};let _0x28886c=0x0,_0x367b7b=null;if(_0x3c5c35['ladders'][_0x351705(0x1c7)]>0x0){const _0x233290=_0x3c5c35['ladders']['sort']((_0x3f45e0,_0x2df136)=>_0x2df136[_0x351705(0x1db)]-_0x3f45e0['elo']);_0x28886c=_0x233290[0x0]['elo'],_0x367b7b=_0x233290[0x0]['ladder'];}const _0x1caabd={'userId':_0x47f7e9,'username':_0x3c5c35['username'],'profileImageUrl':_0xee8e5b['profileImageUrl']||null,'country':_0xee8e5b['country']||null,'motto':_0xee8e5b[_0x351705(0x1dd)]||null,'favoriteMap':_0xee8e5b['favoriteMap']||null,'favoriteWeapon':_0xee8e5b['favoriteWeapon']||null,'isNonParticipant':_0x3c5c35[_0x351705(0x1c5)],'ladders':_0x3c5c35[_0x351705(0x1c3)],'primaryLadder':_0x367b7b,'highestElo':_0x28886c,'rank':getPlayerRank(_0x28886c),'lastUpdated':admin['firestore']['FieldValue']['serverTimestamp']()};_0x2d11e8[_0x351705(0x1d9)](_0x1caabd);});const _0x2ffba3=db['collection']('aggregatedMembers'),_0x5e7e4d=await _0x2ffba3[_0x487794(0x1be)](),_0x30047e=[];_0x5e7e4d['forEach'](_0x524e08=>{const _0x496bde=_0x487794;_0x30047e['push'](_0x524e08['ref'][_0x496bde(0x1c0)]());}),await Promise['all'](_0x30047e);const _0x276940=0x1f4,_0x15346b=[];for(let _0x50772a=0x0;_0x50772a<_0x2d11e8['length'];_0x50772a+=_0x276940){const _0x2f8b0c=db['batch'](),_0x22334e=_0x2d11e8['slice'](_0x50772a,_0x50772a+_0x276940);_0x22334e['forEach'](_0x5d028c=>{const _0xc3228b=_0x487794,_0x2545ef=_0x2ffba3['doc'](_0x5d028c[_0xc3228b(0x1d7)]);_0x2f8b0c['set'](_0x2545ef,_0x5d028c);}),_0x15346b['push'](_0x2f8b0c[_0x487794(0x1b2)]());}await Promise[_0x487794(0x1b0)](_0x15346b);}function getPlayerRank(_0x5ef3ff){if(_0x5ef3ff>=0x7d0)return'emerald';if(_0x5ef3ff>=0x708)return'gold';if(_0x5ef3ff>=0x640)return'silver';if(_0x5ef3ff>=0x578)return'bronze';return'unranked';}exports['rebuildMembersListManual']=functions['https']['onRequest'](async(_0x5ddfe6,_0x5bc0c9)=>{const _0x5752fc=a0_0xc11c9e;try{await rebuildMembersList(),_0x5bc0c9['status'](0xc8)['send']('Members\x20list\x20rebuilt\x20successfully');}catch(_0x216498){console['error'](_0x5752fc(0x1cb),_0x216498),_0x5bc0c9['status'](0x1f4)['send'](_0x5752fc(0x1ae));}});