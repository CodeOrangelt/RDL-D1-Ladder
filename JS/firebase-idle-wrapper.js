const a19_0x2ee96=a19_0x1aa2,a19_0x3458ea=(function(){let _0x2b1468=!![];return function(_0x38c95f,_0x40099e){const _0x20e95f=_0x2b1468?function(){if(_0x40099e){const _0xd78ee6=_0x40099e['apply'](_0x38c95f,arguments);return _0x40099e=null,_0xd78ee6;}}:function(){};return _0x2b1468=![],_0x20e95f;};}()),a19_0x2eca2e=a19_0x3458ea(this,function(){const _0xe377dd=a19_0x1aa2;let _0x50be6b;try{const _0x4fd1ac=Function('return\x20(function()\x20'+_0xe377dd(0x119)+');');_0x50be6b=_0x4fd1ac();}catch(_0x2aa1f5){_0x50be6b=window;}const _0x50e7f9=_0x50be6b['console']=_0x50be6b['console']||{},_0x127cad=[_0xe377dd(0x118),'warn',_0xe377dd(0x12e),'error','exception',_0xe377dd(0x140),'trace'];for(let _0x4db3be=0x0;_0x4db3be<_0x127cad[_0xe377dd(0x11c)];_0x4db3be++){const _0x558414=a19_0x3458ea['constructor']['prototype']['bind'](a19_0x3458ea),_0x380eaa=_0x127cad[_0x4db3be],_0x831adc=_0x50e7f9[_0x380eaa]||_0x558414;_0x558414['__proto__']=a19_0x3458ea['bind'](a19_0x3458ea),_0x558414[_0xe377dd(0x125)]=_0x831adc['toString']['bind'](_0x831adc),_0x50e7f9[_0x380eaa]=_0x558414;}});a19_0x2eca2e();import{auth,db}from'./firebase-config.js';function a19_0x1aa2(_0x20dfcb,_0x4a5f04){const _0x2eca2e=a19_0x3b30();return a19_0x1aa2=function(_0x3458ea,_0x2b0278){_0x3458ea=_0x3458ea-0x110;let _0x3b30d7=_0x2eca2e[_0x3458ea];return _0x3b30d7;},a19_0x1aa2(_0x20dfcb,_0x4a5f04);}function a19_0x3b30(){const _0x883378=['[FirebaseIdle]\x20Error\x20resuming\x20listener:','random','enabled','[FirebaseIdle]\x20Resuming\x20listeners:','all','pendingOperations','substr','textContent','log','{}.constructor(\x22return\x20this\x22)(\x20)','[FirebaseIdle]\x20Active\x20listeners:\x20','now','length','code','[FirebaseIdle]\x20Suspending\x20listener:','Error\x20executing\x20pending\x20operation:','activeListeners','debug','RDL_SESSION_SUSPENDED','safeOperation','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toString','\x20operations:\x20','disabled','operationType','[FirebaseIdle]\x20Suspension\x20test\x20complete','Executing\x20delayed\x20','resumeAllListeners','blockedOperations','[FirebaseIdle]\x20Listener\x20created:\x20','info','test','message','catch','checkSessionActive','set','[FirebaseIdle]\x20Listeners\x20resumed','then','[FirebaseIdle]\x20Blocked\x20','createElement','error','[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:','warn','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','function','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','[FirebaseIdle]\x20Listener\x20removed:\x20','updateDocument','table','_suspendedListeners','clear','system','createListener'];a19_0x3b30=function(){return _0x883378;};return a19_0x3b30();}import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x2f5f26=a19_0x1aa2;this[_0x2f5f26(0x120)]=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this[_0x2f5f26(0x12c)]=0x0,this['debug']=![];}['checkSessionActive'](){const _0x4fa0d0=a19_0x1aa2;if(window[_0x4fa0d0(0x122)]===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console[_0x4fa0d0(0x13a)](_0x4fa0d0(0x136)+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x3462f4,_0x4ede34,..._0x5b09a3){const _0x381fa3=a19_0x1aa2;if(!this['checkSessionActive']()){const _0x22f578=_0x4ede34+'-'+Date['now']()+'-'+Math[_0x381fa3(0x111)]()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x22f578,{'operation':_0x3462f4,'operationType':_0x4ede34,'args':_0x5b09a3}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{this['pendingOperations']['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x3462f4(..._0x5b09a3);}catch(_0x3bfd1d){if(_0x3bfd1d[_0x381fa3(0x11d)]==='unavailable'||_0x3bfd1d[_0x381fa3(0x11d)]==='resource-exhausted'||_0x3bfd1d[_0x381fa3(0x130)]&&_0x3bfd1d['message']['includes']('network'))return handleNetworkError(),null;throw _0x3bfd1d;}}async['getDocument'](_0x39fced){return this['safeOperation'](getDoc,'get',_0x39fced);}async['getDocuments'](_0x308eab){return this['safeOperation'](getDocs,'query',_0x308eab);}async['addDocument'](_0x49745f,_0x547be1){return this['safeOperation'](addDoc,'add',_0x49745f,_0x547be1);}async['setDocument'](_0x2dee01,_0x361bf8,_0x151220={}){const _0x4cf2ab=a19_0x1aa2;return this['safeOperation'](setDoc,_0x4cf2ab(0x133),_0x2dee01,_0x361bf8,_0x151220);}async[a19_0x2ee96(0x13f)](_0x597197,_0x6ebd2a){const _0x4f5e56=a19_0x2ee96;return this[_0x4f5e56(0x123)](updateDoc,'update',_0x597197,_0x6ebd2a);}async['deleteDocument'](_0x25e961){const _0x2f31de=a19_0x2ee96;return this[_0x2f31de(0x123)](deleteDoc,'delete',_0x25e961);}['suspendAllListeners'](){const _0x2e6b4e=a19_0x2ee96;console[_0x2e6b4e(0x118)]('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this[_0x2e6b4e(0x120)]['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this['activeListeners']['forEach']((_0x4d0655,_0x3f805f)=>{const _0x35cab1=_0x2e6b4e;console['log'](_0x35cab1(0x11e),_0x3f805f);if(typeof _0x4d0655==='function')try{_0x4d0655(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x3f805f);}catch(_0x532eff){console[_0x35cab1(0x138)]('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x3f805f,_0x532eff);}}),this[_0x2e6b4e(0x120)]['clear']();if(this['debug']){const _0x426633=document[_0x2e6b4e(0x137)]('div');_0x426633['id']='firebase-suspend-indicator',_0x426633['style']['cssText']=_0x2e6b4e(0x124),_0x426633[_0x2e6b4e(0x117)]='Firebase:\x20Suspended',document['body']['appendChild'](_0x426633);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}[a19_0x2ee96(0x12b)](){const _0xe94687=a19_0x2ee96;if(!this[_0xe94687(0x141)]||this['_suspendedListeners']['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log'](_0xe94687(0x113),this['_suspendedListeners']['size']),this['_suspendedListeners']['forEach']((_0x2a9e6a,_0x150a71)=>{const _0xaae4c0=_0xe94687;console[_0xaae4c0(0x118)]('[FirebaseIdle]\x20Resuming\x20listener:',_0x150a71);try{if(typeof _0x2a9e6a===_0xaae4c0(0x13c)){console['warn'](_0xaae4c0(0x139),_0x150a71);return;}const {query:_0x4f3b60,callback:_0x1b3879,options:_0x3819f2}=_0x2a9e6a;if(_0x4f3b60&&_0x1b3879){const _0xc77f7=onSnapshot(_0x4f3b60,_0x1b3879,_0x3819f2||{});this[_0xaae4c0(0x120)]['set'](_0x150a71,_0xc77f7),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x150a71);}}catch(_0x3ed42a){console['error'](_0xaae4c0(0x110),_0x150a71,_0x3ed42a);}}),this['_suspendedListeners']['clear']();const _0x2bae6d=document['getElementById']('firebase-suspend-indicator');_0x2bae6d&&_0x2bae6d['remove'](),console['log'](_0xe94687(0x134));}[a19_0x2ee96(0x144)](_0x377e60,_0x6a1423,_0xfb4d8a={},_0x3b729a=null){const _0x12728b=a19_0x2ee96,_0x4a182a=_0x3b729a||'listener_'+Date[_0x12728b(0x11b)]()+'_'+Math['random']()['toString'](0x24)[_0x12728b(0x116)](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x4a182a);if(!this[_0x12728b(0x132)]())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x4a182a),()=>{};try{const _0x204ff2=onSnapshot(_0x377e60,_0x6a1423,_0xfb4d8a);return this['activeListeners'][_0x12728b(0x133)](_0x4a182a,{'unsubscribe':_0x204ff2,'query':_0x377e60,'callback':_0x6a1423,'options':_0xfb4d8a}),this[_0x12728b(0x121)]&&(console['log'](_0x12728b(0x12d)+_0x4a182a),console['log'](_0x12728b(0x11a)+this[_0x12728b(0x120)]['size'])),()=>{const _0x4254b5=_0x12728b;this[_0x4254b5(0x121)]&&console[_0x4254b5(0x118)]('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x4a182a);try{_0x204ff2(),this['activeListeners']['delete'](_0x4a182a),this[_0x4254b5(0x121)]&&(console['log'](_0x4254b5(0x13e)+_0x4a182a),console[_0x4254b5(0x118)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this[_0x4254b5(0x120)]['size']));}catch(_0x25dfe8){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x4a182a+':',_0x25dfe8);}};}catch(_0x2356ca){return console['error'](_0x12728b(0x13b)+_0x4a182a+':',_0x2356ca),()=>{};}}['executePendingOperations'](_0xdecd7e=a19_0x2ee96(0x114)){const _0xde4224=a19_0x2ee96;console['log']('Executing\x20pending\x20'+_0xdecd7e+_0xde4224(0x126)+this[_0xde4224(0x115)]['size']+'\x20total\x20operations');const _0x32c1e9=new Map(this['pendingOperations']);this['pendingOperations'][_0xde4224(0x142)](),_0x32c1e9['forEach']((_0x352ec4,_0x5eef7b)=>{const _0x29f11e=_0xde4224;_0xdecd7e===_0x29f11e(0x114)||_0x352ec4[_0x29f11e(0x128)]===_0xdecd7e?(console[_0x29f11e(0x118)](_0x29f11e(0x12a)+_0x352ec4['operationType']+'\x20operation'),this['safeOperation'](_0x352ec4['operation'],_0x352ec4['operationType'],..._0x352ec4['args'])['catch'](_0x45c9a4=>console['error'](_0x29f11e(0x11f),_0x45c9a4))):this['pendingOperations']['set'](_0x5eef7b,_0x352ec4);});}['enableDebug'](_0x39d31e=!![]){const _0x3d2ddb=a19_0x2ee96;this['debug']=_0x39d31e,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x39d31e?_0x3d2ddb(0x112):_0x3d2ddb(0x127)));if(_0x39d31e){const _0xc136e5=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console[_0x3d2ddb(0x118)]('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,_0x3d2ddb(0x143),_0x3d2ddb(0x12f)))[_0x3d2ddb(0x135)](_0x50a72f=>{const _0x138a85=_0x3d2ddb;console[_0x138a85(0x118)]('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x50a72f);})[_0x3d2ddb(0x131)](_0xf644e4=>{const _0xcedb69=_0x3d2ddb;console['log'](_0xcedb69(0x13d),_0xf644e4);})['finally'](()=>{const _0x1aa586=_0x3d2ddb;console[_0x1aa586(0x118)](_0x1aa586(0x129)),window['RDL_SESSION_SUSPENDED']=_0xc136e5;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x3fd101=window['suspendSession']||function(){},_0x3f09bf=window['resumeSession']||function(){};window['suspendSession']=function(){_0x3fd101(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){_0x3f09bf(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;