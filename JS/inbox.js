const a24_0x21792b=a24_0x208c,a24_0x52c3fd=(function(){let _0x47864b=!![];return function(_0x42688f,_0x1623fc){const _0x4e5ef4=_0x47864b?function(){const _0x151845=a24_0x208c;if(_0x1623fc){const _0x5456ed=_0x1623fc[_0x151845(0x15b)](_0x42688f,arguments);return _0x1623fc=null,_0x5456ed;}}:function(){};return _0x47864b=![],_0x4e5ef4;};}()),a24_0x42a016=a24_0x52c3fd(this,function(){const _0x2254c8=a24_0x208c;let _0x25b110;try{const _0x1b3db6=Function(_0x2254c8(0x180)+_0x2254c8(0x13c)+');');_0x25b110=_0x1b3db6();}catch(_0x5b3cfe){_0x25b110=window;}const _0x1bd26a=_0x25b110[_0x2254c8(0x172)]=_0x25b110[_0x2254c8(0x172)]||{},_0x21cbbe=['log','warn','info','error',_0x2254c8(0x13d),'table',_0x2254c8(0x17c)];for(let _0x118dce=0x0;_0x118dce<_0x21cbbe['length'];_0x118dce++){const _0x4e9abf=a24_0x52c3fd['constructor']['prototype']['bind'](a24_0x52c3fd),_0x64b5c4=_0x21cbbe[_0x118dce],_0x259f15=_0x1bd26a[_0x64b5c4]||_0x4e9abf;_0x4e9abf[_0x2254c8(0x15e)]=a24_0x52c3fd['bind'](a24_0x52c3fd),_0x4e9abf[_0x2254c8(0x147)]=_0x259f15['toString']['bind'](_0x259f15),_0x1bd26a[_0x64b5c4]=_0x4e9abf;}});a24_0x42a016();function a24_0x1e90(){const _0x5a60b8=['respond','createTeamFromInvitation','openResponseModal','message','{}.constructor(\x22return\x20this\x22)(\x20)','exception','remove','unsubscribe','display','loadInvitations','active','outbox','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22','team_invite','lastDoc','toString','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','join','toDate','updateNotificationCount','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','value','data','innerHTML','pageSize','currentFilter','filter','length','fromUsername','docs','updateInvitationStatus','#send-response','.filter-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>','apply','appendChild','createElement','__proto__','createdAt','setupActionListeners','desc','Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)','querySelectorAll','floor','getTimeAgo','response-message','action','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','renderInvitations','Error\x20performing\x20','modal-styles','setupEventListeners','addEventListener','textContent','div','sentUnsubscribe','all','console','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','status','add','teamColor','toUserId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20','teamData','inline-block','invitationId','trace','cancelled','h\x20ago','type','return\x20(function()\x20','invitations','error'];a24_0x1e90=function(){return _0x5a60b8;};return a24_0x1e90();}import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a24_0x208c(_0x11b1b4,_0x2edce6){const _0x42a016=a24_0x1e90();return a24_0x208c=function(_0x52c3fd,_0xb3e0b3){_0x52c3fd=_0x52c3fd-0x138;let _0x1e9055=_0x42a016[_0x52c3fd];return _0x1e9055;},a24_0x208c(_0x11b1b4,_0x2edce6);}class InboxManager{constructor(){const _0x1a4c02=a24_0x208c;this['currentFilter']='pending',this['invitations']=[],this['sentInvitations']=[],this['unsubscribe']=null,this['sentUnsubscribe']=null,this['pageSize']=0x14,this[_0x1a4c02(0x146)]=null,this['hasMore']=!![],this['init']();}async['init'](){auth['onAuthStateChanged'](_0x2f4a0b=>{const _0x376063=a24_0x208c;_0x2f4a0b?(this[_0x376063(0x141)](_0x2f4a0b['uid']),this[_0x376063(0x16c)]()):window['location']['href']='./login.html';});}['setupEventListeners'](){const _0x39fb2d=a24_0x208c;document[_0x39fb2d(0x163)](_0x39fb2d(0x158))['forEach'](_0x3e27ba=>{const _0x30aeee=_0x39fb2d;_0x3e27ba[_0x30aeee(0x16d)]('click',()=>{const _0x43f621=_0x30aeee;document['querySelectorAll'](_0x43f621(0x158))['forEach'](_0x4ddead=>_0x4ddead['classList'][_0x43f621(0x13e)](_0x43f621(0x142))),_0x3e27ba['classList'][_0x43f621(0x175)]('active'),this['currentFilter']=_0x3e27ba['dataset'][_0x43f621(0x152)],this['renderInvitations']();});});}['loadInvitations'](_0x43050a){const _0x21b8e0=a24_0x208c,_0x4f0623=collection(db,'gameInvitations');let _0x2a7464=query(_0x4f0623,where(_0x21b8e0(0x177),'==',_0x43050a),orderBy(_0x21b8e0(0x15f),'desc'),limit(this[_0x21b8e0(0x150)]));this[_0x21b8e0(0x13f)]=onSnapshot(_0x2a7464,_0x3b3411=>{const _0x56041d=_0x21b8e0;this['invitations']=_0x3b3411[_0x56041d(0x155)]['map'](_0x408c0c=>({'id':_0x408c0c['id'],..._0x408c0c['data']()})),this['renderInvitations'](),this[_0x56041d(0x14b)]();});let _0x3ded53=query(_0x4f0623,where('fromUserId','==',_0x43050a),orderBy('createdAt',_0x21b8e0(0x161)),limit(this['pageSize']));this[_0x21b8e0(0x170)]=onSnapshot(_0x3ded53,_0x4d069b=>{const _0x140511=_0x21b8e0;this['sentInvitations']=_0x4d069b['docs']['map'](_0x25e558=>({'id':_0x25e558['id'],..._0x25e558[_0x140511(0x14e)](),'isSent':!![]})),this['renderInvitations']();});}['renderInvitations'](){const _0x445f8f=a24_0x208c,_0x2a9a62=document['getElementById']('inbox-content');if(!_0x2a9a62)return;let _0x33d1c5=[];if(this[_0x445f8f(0x151)]===_0x445f8f(0x143))_0x33d1c5=this['sentInvitations'];else this['currentFilter']==='all'?_0x33d1c5=[...this[_0x445f8f(0x181)],...this['sentInvitations']]['sort']((_0x2bc7c1,_0x917581)=>{const _0x31c73f=_0x445f8f,_0x2dbd07=_0x2bc7c1['createdAt']?.['toDate']?_0x2bc7c1[_0x31c73f(0x15f)]['toDate']():new Date(_0x2bc7c1[_0x31c73f(0x15f)]),_0x2dd8b7=_0x917581[_0x31c73f(0x15f)]?.[_0x31c73f(0x14a)]?_0x917581['createdAt']['toDate']():new Date(_0x917581['createdAt']);return _0x2dd8b7-_0x2dbd07;}):_0x33d1c5=this['invitations']['filter'](_0xf87542=>_0xf87542['status']===this['currentFilter']);if(_0x33d1c5['length']===0x0){const _0x3b9363=this['currentFilter']===_0x445f8f(0x143)?'sent':this[_0x445f8f(0x151)]===_0x445f8f(0x171)?'':this['currentFilter'];_0x2a9a62[_0x445f8f(0x14f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x3b9363+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this[_0x445f8f(0x151)]==='outbox'?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return;}_0x2a9a62['innerHTML']=_0x33d1c5['map'](_0x37fc67=>this['createInvitationCard'](_0x37fc67))[_0x445f8f(0x149)](''),this[_0x445f8f(0x160)]();}['createInvitationCard'](_0x5777b4){const _0x309446=a24_0x208c,_0x4a3739=_0x5777b4[_0x309446(0x15f)]?.['toDate']?_0x5777b4['createdAt']['toDate']():new Date(_0x5777b4['createdAt']),_0x169bf2=this[_0x309446(0x165)](_0x4a3739),_0x3a85c1=_0x5777b4['isSent']||![];let _0x44da22='';return _0x5777b4['type']==='team_invite'?_0x44da22='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x5777b4[_0x309446(0x13b)]+_0x309446(0x148)+_0x5777b4[_0x309446(0x179)][_0x309446(0x176)]+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5777b4['teamData']['proposedTeamName']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20•\x20Color:\x20'+_0x5777b4['teamData']['teamColor']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x44da22='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x5777b4[_0x309446(0x13b)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20'+_0x5777b4['status']+'\x20'+(_0x3a85c1?'sent-invitation':'')+'\x22\x20data-invitation-id=\x22'+_0x5777b4['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3a85c1?'To:\x20'+_0x5777b4['toUsername']:_0x5777b4['fromUsername'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3a85c1?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x169bf2+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x5777b4[_0x309446(0x174)]+'\x22>'+_0x5777b4[_0x309446(0x174)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x44da22+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(!_0x3a85c1&&_0x5777b4['status']==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x5777b4['id']+_0x309446(0x144)+_0x5777b4['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5777b4['type']!==_0x309446(0x145)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x5777b4['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x309446(0x159):'')+_0x309446(0x168)+(_0x3a85c1&&_0x5777b4[_0x309446(0x174)]==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x5777b4['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x309446(0x14c);}[a24_0x21792b(0x160)](){const _0x560d8d=a24_0x21792b;document[_0x560d8d(0x163)]('.action-btn')['forEach'](_0x12f0fb=>{const _0x458272=_0x560d8d;_0x12f0fb[_0x458272(0x16d)]('click',async _0x1f70f9=>{const _0x379040=_0x458272,_0x91e1e7=_0x12f0fb['dataset'][_0x379040(0x167)],_0x4c483f=_0x12f0fb['dataset'][_0x379040(0x17b)];_0x12f0fb['disabled']=!![];const _0x4f6d85=_0x12f0fb[_0x379040(0x14f)];_0x12f0fb['innerHTML']=_0x379040(0x15a);try{switch(_0x91e1e7){case'accept':await this[_0x379040(0x156)](_0x4c483f,'accepted');break;case'decline':await this['updateInvitationStatus'](_0x4c483f,'declined');break;case'cancel':await this[_0x379040(0x156)](_0x4c483f,_0x379040(0x17d));break;case _0x379040(0x138):this['openResponseModal'](_0x4c483f);break;}}catch(_0x3a4a8b){console['error'](_0x379040(0x16a)+_0x91e1e7+':',_0x3a4a8b),alert('Failed\x20to\x20'+_0x91e1e7+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x12f0fb['disabled']=![],_0x12f0fb['innerHTML']=_0x4f6d85;}});});}async[a24_0x21792b(0x156)](_0x639939,_0x4aa778){const _0x13e5c0=a24_0x21792b;try{const _0x26bec5=this[_0x13e5c0(0x181)]['find'](_0x27eff9=>_0x27eff9['id']===_0x639939);_0x26bec5&&_0x26bec5[_0x13e5c0(0x17f)]==='team_invite'&&_0x4aa778==='accepted'&&await this['createTeamFromInvitation'](_0x26bec5);const _0x2f525e=doc(db,'gameInvitations',_0x639939);await updateDoc(_0x2f525e,{'status':_0x4aa778,'respondedAt':new Date()}),_0x26bec5&&(_0x26bec5['status']=_0x4aa778,_0x26bec5['respondedAt']=new Date(),this[_0x13e5c0(0x169)]());}catch(_0x44da1a){console['error']('Error\x20updating\x20invitation\x20status:',_0x44da1a);throw _0x44da1a;}}[a24_0x21792b(0x13a)](_0x42b583){const _0x3a7ce8=a24_0x21792b,_0x269157=this[_0x3a7ce8(0x181)]['find'](_0x5683cd=>_0x5683cd['id']===_0x42b583);if(!_0x269157)return;const _0x211ce4=document[_0x3a7ce8(0x15d)](_0x3a7ce8(0x16f));_0x211ce4['className']='modal-overlay',_0x211ce4['innerHTML']=_0x3a7ce8(0x178)+_0x269157[_0x3a7ce8(0x154)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x269157[_0x3a7ce8(0x14d)]+_0x3a7ce8(0x173);if(!document['getElementById'](_0x3a7ce8(0x16b))){const _0x34c612=document['createElement']('style');_0x34c612['id']='modal-styles',_0x34c612['textContent']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document['head']['appendChild'](_0x34c612);}document['body'][_0x3a7ce8(0x15c)](_0x211ce4),_0x211ce4['querySelector']('.modal-close')['addEventListener']('click',()=>_0x211ce4['remove']()),_0x211ce4['querySelector']('#cancel-response')['addEventListener']('click',()=>_0x211ce4['remove']()),_0x211ce4['addEventListener']('click',_0x2b33fc=>{if(_0x2b33fc['target']===_0x211ce4)_0x211ce4['remove']();}),_0x211ce4['querySelector'](_0x3a7ce8(0x157))['addEventListener']('click',()=>{const _0x3052ed=_0x3a7ce8,_0x3b2eed=document['getElementById'](_0x3052ed(0x166))[_0x3052ed(0x14d)]['trim']();_0x3b2eed&&(alert(_0x3052ed(0x162)),_0x211ce4[_0x3052ed(0x13e)]());});}async[a24_0x21792b(0x139)](_0x21ee7a){const _0x26a8bb=a24_0x21792b;try{const {createTeam:_0x3c8f6d}=await import('./ladderduos.js'),_0x3dc979=await _0x3c8f6d(_0x21ee7a['fromUsername'],_0x21ee7a['toUsername'],_0x21ee7a['teamData']['proposedTeamName'],_0x21ee7a[_0x26a8bb(0x179)]['teamColor']);if(!_0x3dc979['success'])throw new Error(_0x3dc979['error']);alert('Team\x20\x22'+_0x21ee7a[_0x26a8bb(0x179)]['proposedTeamName']+'\x22\x20created\x20successfully!');}catch(_0x539201){console[_0x26a8bb(0x182)]('Error\x20creating\x20team:',_0x539201);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0x539201['message']);}}['updateNotificationCount'](){const _0x40809f=a24_0x21792b,_0x5a58af=this['invitations'][_0x40809f(0x152)](_0x5ea14a=>_0x5ea14a['status']==='pending')[_0x40809f(0x153)],_0x4f8688=document['getElementById']('inbox-notification');_0x4f8688&&(_0x5a58af>0x0?(_0x4f8688['style'][_0x40809f(0x140)]=_0x40809f(0x17a),_0x4f8688[_0x40809f(0x16e)]=_0x5a58af>0x9?'9+':_0x5a58af):_0x4f8688['style'][_0x40809f(0x140)]='none');}['getTimeAgo'](_0x3c21e3){const _0x1c05b6=a24_0x21792b,_0x5430da=new Date(),_0x1cd0e7=_0x5430da-_0x3c21e3,_0x48b79d=Math['floor'](_0x1cd0e7/(0x3e8*0x3c)),_0x2005e4=Math[_0x1c05b6(0x164)](_0x1cd0e7/(0x3e8*0x3c*0x3c)),_0x32b3c6=Math['floor'](_0x1cd0e7/(0x3e8*0x3c*0x3c*0x18));if(_0x48b79d<0x1)return'Just\x20now';if(_0x48b79d<0x3c)return _0x48b79d+'m\x20ago';if(_0x2005e4<0x18)return _0x2005e4+_0x1c05b6(0x17e);if(_0x32b3c6<0x7)return _0x32b3c6+'d\x20ago';return _0x3c21e3['toLocaleDateString']();}['destroy'](){this['unsubscribe']&&this['unsubscribe'](),this['sentUnsubscribe']&&this['sentUnsubscribe']();}}document[a24_0x21792b(0x16d)]('DOMContentLoaded',()=>{new InboxManager();});