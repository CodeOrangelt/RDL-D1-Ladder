const a4_0x131698=a4_0x2b62,a4_0x14003a=(function(){let _0x2d4016=!![];return function(_0x3e93cf,_0x3e35bf){const _0x5a6aa5=_0x2d4016?function(){if(_0x3e35bf){const _0x463055=_0x3e35bf['apply'](_0x3e93cf,arguments);return _0x3e35bf=null,_0x463055;}}:function(){};return _0x2d4016=![],_0x5a6aa5;};}()),a4_0x441ffd=a4_0x14003a(this,function(){const _0x4ee1a5=a4_0x2b62;let _0x29017d;try{const _0x84c267=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x29017d=_0x84c267();}catch(_0x1776ab){_0x29017d=window;}const _0x501ed1=_0x29017d['console']=_0x29017d[_0x4ee1a5(0x320)]||{},_0x3603bd=['log','warn','info','error','exception','table',_0x4ee1a5(0x227)];for(let _0x2e23c4=0x0;_0x2e23c4<_0x3603bd[_0x4ee1a5(0x398)];_0x2e23c4++){const _0x2c31d6=a4_0x14003a[_0x4ee1a5(0x3b6)][_0x4ee1a5(0x32a)]['bind'](a4_0x14003a),_0x83c8b3=_0x3603bd[_0x2e23c4],_0x296248=_0x501ed1[_0x83c8b3]||_0x2c31d6;_0x2c31d6[_0x4ee1a5(0x353)]=a4_0x14003a[_0x4ee1a5(0x27b)](a4_0x14003a),_0x2c31d6['toString']=_0x296248['toString']['bind'](_0x296248),_0x501ed1[_0x83c8b3]=_0x2c31d6;}});a4_0x441ffd();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x4e4c1c){const _0x2c532a=a4_0x2b62;if(!_0x4e4c1c)return _0x2c532a(0x1ff);_0x4e4c1c=_0x4e4c1c[_0x2c532a(0x23a)]('#','');_0x4e4c1c['length']===0x3&&(_0x4e4c1c=_0x4e4c1c['split']('')['map'](_0x504a7c=>_0x504a7c+_0x504a7c)[_0x2c532a(0x3f8)](''));if(_0x4e4c1c['length']!==0x6)return _0x2c532a(0x1ff);const _0x442cf8=parseInt(_0x4e4c1c[_0x2c532a(0x236)](0x0,0x2),0x10),_0x18e082=parseInt(_0x4e4c1c['substring'](0x2,0x4),0x10),_0x520e6f=parseInt(_0x4e4c1c['substring'](0x4,0x6),0x10),_0xdb66fc=(_0x442cf8*0x12b+_0x18e082*0x24b+_0x520e6f*0x72)/0x3e8;return _0xdb66fc>=0x80?'#000000':_0x2c532a(0x1ff);}const DEFAULT_TROPHY_IMAGE=a4_0x131698(0x2d1),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x284814=>{const _0x3979ea=a4_0x2b62;if(!_0x284814){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x1ad087){console[_0x3979ea(0x285)]('Error\x20initializing\x20dashboard:',_0x1ad087),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0xd4315){const _0x5d040c=a4_0x131698;if(!_0xd4315)return['dashboard'];console['log'](_0x5d040c(0x404)+_0xd4315+'\x20in\x20all\x20collections...');const _0x667780=[{'name':_0x5d040c(0x2b8),'displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':_0x5d040c(0x3a5),'displayName':'D2\x20Players'},{'name':_0x5d040c(0x33f),'displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x21224b=auth[_0x5d040c(0x31a)];let _0xeecb0f=null,_0x583878=null;for(const _0xe936b7 of _0x667780){try{if(_0x21224b){const _0x26e427=doc(db,_0xe936b7['name'],_0x21224b['uid']),_0x2cb6cc=await getDoc(_0x26e427);if(_0x2cb6cc['exists']()){const _0x2a1664=_0x2cb6cc['data']();console[_0x5d040c(0x24d)]('Found\x20user\x20in\x20'+_0xe936b7['displayName']+'\x20by\x20UID:',_0x2a1664);const _0x46c864=(_0x2a1664['roleName']||_0x2a1664['role']||'')[_0x5d040c(0x35e)]();if(_0x46c864&&_0x46c864!=='none'){_0xeecb0f=_0x46c864,_0x583878=_0xe936b7['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0xeecb0f+_0x5d040c(0x395)+_0x583878);break;}}}if(!_0xeecb0f){const _0x47d7e7=collection(db,_0xe936b7['name']),_0x32b5e5=query(_0x47d7e7,where(_0x5d040c(0x33d),'==',_0xd4315)),_0x1a4f26=await getDocs(_0x32b5e5);if(!_0x1a4f26['empty']){const _0x73123e=_0x1a4f26[_0x5d040c(0x276)][0x0][_0x5d040c(0x379)]();console['log']('Found\x20user\x20in\x20'+_0xe936b7[_0x5d040c(0x2aa)]+_0x5d040c(0x29c)+_0xd4315+':',_0x73123e);const _0x363101=(_0x73123e['roleName']||_0x73123e['role']||'')['toLowerCase']();if(_0x363101&&_0x363101!=='none'){_0xeecb0f=_0x363101,_0x583878=_0xe936b7['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0xeecb0f+_0x5d040c(0x395)+_0x583878);break;}}}}catch(_0x48b428){console['error'](_0x5d040c(0x3fc)+_0xe936b7['displayName']+':',_0x48b428);}}if(_0xeecb0f){console[_0x5d040c(0x24d)]('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0xeecb0f+'\x20(from\x20'+_0x583878+')');const _0x120208={'admin':[_0x5d040c(0x1db),_0x5d040c(0x367),'manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players',_0x5d040c(0x2d2),_0x5d040c(0x3ec),'elo-history',_0x5d040c(0x3bd),'user-roles-section','manage-matches','manage-points',_0x5d040c(0x40b),'manage-ribbons'],'owner':[_0x5d040c(0x1db),_0x5d040c(0x367),'manage-matches',_0x5d040c(0x317),'manage-trophies','manage-ranks',_0x5d040c(0x3aa),'settings',_0x5d040c(0x3ec),_0x5d040c(0x3af),'manage-highlights','user-roles-section','manage-matches','manage-points',_0x5d040c(0x40b),'manage-ribbons'],'council':[_0x5d040c(0x1db),'manage-players',_0x5d040c(0x295)],'creative\x20lead':[_0x5d040c(0x1db),_0x5d040c(0x317),'manage-trophies',_0x5d040c(0x3af),'manage-highlights']};if(_0x120208[_0xeecb0f])return console[_0x5d040c(0x24d)]('Role\x20\x27'+_0xeecb0f+'\x27\x20has\x20permissions:',_0x120208[_0xeecb0f]),_0x120208[_0xeecb0f];}return console['log'](_0x5d040c(0x2d7)+_0xd4315+_0x5d040c(0x341)),[_0x5d040c(0x1db)];}function setupSidebarNavigation(_0x1ec72e=[]){const _0x5e6a1f=a4_0x131698,_0xd148ac=document['querySelectorAll'](_0x5e6a1f(0x26d)),_0x3ffe00=document[_0x5e6a1f(0x35f)](_0x5e6a1f(0x345));(!_0x1ec72e||_0x1ec72e['length']===0x0)&&(_0x1ec72e=[_0x5e6a1f(0x1db)]);_0xd148ac['forEach'](_0x210b11=>{const _0x24d263=_0x5e6a1f,_0x4149ca=_0x210b11['getAttribute'](_0x24d263(0x1eb));_0x1ec72e['includes'](_0x4149ca)?_0x210b11['style'][_0x24d263(0x26a)]='flex':_0x210b11[_0x24d263(0x217)]['display']='none',_0x210b11['addEventListener']('click',()=>{const _0x5b6a11=_0x24d263,_0x1590df=_0x210b11['getAttribute'](_0x5b6a11(0x1eb));if(!_0x1ec72e[_0x5b6a11(0x30c)](_0x1590df)){showNotification(_0x5b6a11(0x2d8),_0x5b6a11(0x285));return;}_0xd148ac['forEach'](_0x57fb48=>_0x57fb48['classList'][_0x5b6a11(0x3c0)](_0x5b6a11(0x216))),_0x210b11['classList'][_0x5b6a11(0x390)](_0x5b6a11(0x216)),_0x3ffe00['forEach'](_0x5b9eb3=>{_0x5b9eb3['style']['display']='none';});const _0x2ffaa6=document['getElementById'](_0x1590df);_0x2ffaa6&&(_0x2ffaa6[_0x5b6a11(0x217)][_0x5b6a11(0x26a)]=_0x5b6a11(0x1fe),console['log']('Switched\x20to\x20'+_0x1590df+'\x20section'));});});const _0x7a8147=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x1ec72e[0x0]+'\x22]');_0x7a8147&&_0x7a8147['click'](),console['log'](_0x5e6a1f(0x1cb));}function setupTabNavigation(){const _0x50f4f0=document['querySelectorAll']('.nav-item');let _0x3bfa6d=null,_0xd6577e=new Set();_0x50f4f0['forEach'](_0x2278eb=>{const _0x3c976c=a4_0x2b62;_0x2278eb[_0x3c976c(0x3f5)]('click',function(){const _0x2a04d6=_0x3c976c,_0x12e8c3=this['getAttribute'](_0x2a04d6(0x1eb));if(_0x12e8c3===_0x3bfa6d)return;_0x3bfa6d&&(document['getElementById'](_0x3bfa6d)['style']['display']='none',_0x50f4f0['forEach'](_0xc5a25e=>_0xc5a25e[_0x2a04d6(0x3e9)]['remove'](_0x2a04d6(0x216)))),document['getElementById'](_0x12e8c3)['style'][_0x2a04d6(0x26a)]='block',this['classList']['add']('active'),_0x3bfa6d=_0x12e8c3;});});}function loadSectionData(_0x580bc5){return;}async function initializeAdminDashboard(){const _0xa0899e=a4_0x131698;try{const _0xb115d6=auth['currentUser'],_0x3ea528=await getUserTabPermissions(_0xb115d6['email']);console[_0xa0899e(0x24d)]('User\x20'+_0xb115d6['email']+_0xa0899e(0x290),_0x3ea528),window[_0xa0899e(0x2e5)]=_0x3ea528,setupSidebarNavigation(_0x3ea528),setupLadderSelector(),setupDashboardSection(),_0x3ea528['includes']('manage-players')&&setupManagePlayersSection(),_0x3ea528['includes'](_0xa0899e(0x3af))&&setupEloHistorySection(),_0x3ea528['includes']('manage-ranks')&&setupRankControls(),_0x3ea528['includes'](_0xa0899e(0x317))&&setupManageArticlesSection(),_0x3ea528['includes'](_0xa0899e(0x35c))&&setupUserRolesSection(),_0x3ea528['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x3ea528['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x3ea528['includes']('inactive-players')&&setupInactivePlayersSection(),_0x3ea528[_0xa0899e(0x30c)](_0xa0899e(0x295))&&setupManageMatchesSection(),_0x3ea528['includes'](_0xa0899e(0x3f6))&&setupManagePointsSection(),_0x3ea528['includes'](_0xa0899e(0x1dd))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x3ea528);}catch(_0x1c5ee5){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x1c5ee5);}}function setupDataLoadButtons(_0x4d1b8b=[]){const _0xf5b70a=a4_0x131698;(!_0x4d1b8b||_0x4d1b8b[_0xf5b70a(0x398)]===0x0)&&(_0x4d1b8b=[_0xf5b70a(0x1db)]);const _0x5ca393=document['getElementById']('load-dashboard-data');_0x5ca393&&_0x5ca393[_0xf5b70a(0x3f5)]('click',function(){const _0x22412b=_0xf5b70a;this[_0x22412b(0x3e9)]['add'](_0x22412b(0x246)),this[_0x22412b(0x3f9)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x5b0b73=>{const _0x20c143=_0x22412b;console['error'](_0x20c143(0x2a8),_0x5b0b73),this['classList']['remove']('loading'),this['innerHTML']=_0x20c143(0x2b5),setTimeout(()=>{const _0xfe5414=_0x20c143;this['innerHTML']=_0xfe5414(0x2b1);},0xbb8);});});if(_0x4d1b8b['includes']('manage-trophies')){const _0x1bad2a=document['getElementById']('load-trophies-data');_0x1bad2a&&_0x1bad2a[_0xf5b70a(0x3f5)]('click',function(){const _0x189d53=_0xf5b70a;console[_0x189d53(0x24d)](_0x189d53(0x2bb)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x17ce69=_0x189d53;this['classList']['remove'](_0x17ce69(0x246)),this[_0x17ce69(0x3f9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x37e685=>{console['error']('Error\x20loading\x20trophies:',_0x37e685),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4e3ce8=a4_0x2b62;this[_0x4e3ce8(0x3f9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x4d1b8b['includes']('manage-players')){const _0x1cce66=document['getElementById']('load-players-data');_0x1cce66&&_0x1cce66['addEventListener']('click',function(){const _0x518239=_0xf5b70a;console['log']('Load\x20players\x20data\x20clicked'),this['classList'][_0x518239(0x390)]('loading'),this['innerHTML']=_0x518239(0x296),loadPlayersData()['then'](()=>{const _0x5d8a57=_0x518239;this['classList']['remove']('loading'),this['innerHTML']=_0x5d8a57(0x21e);})['catch'](_0x5e92d2=>{const _0x29f186=_0x518239;console['error'](_0x29f186(0x226),_0x5e92d2),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x52462e=_0x29f186;this[_0x52462e(0x3f9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x4d1b8b['includes']('elo-history')){const _0x2f3ec9=document[_0xf5b70a(0x1e2)]('load-elo-history-data');_0x2f3ec9&&_0x2f3ec9['addEventListener']('click',function(){console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x47a154=a4_0x2b62;this['classList']['remove']('loading'),this['innerHTML']=_0x47a154(0x319);})['catch'](_0x1fef65=>{const _0xf358ff=a4_0x2b62;console[_0xf358ff(0x285)]('Error\x20loading\x20history:',_0x1fef65),this['classList'][_0xf358ff(0x3c0)](_0xf358ff(0x246)),this['innerHTML']=_0xf358ff(0x2b5),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x4d1b8b['includes']('manage-articles')){const _0x4f19db=document['getElementById'](_0xf5b70a(0x40a));_0x4f19db&&_0x4f19db[_0xf5b70a(0x3f5)]('click',function(){const _0x5f305c=_0xf5b70a;console['log'](_0x5f305c(0x3ea)),this[_0x5f305c(0x3e9)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0xab3c18=_0x5f305c;this[_0xab3c18(0x3e9)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x540a1b=>{console['error']('Error\x20loading\x20articles:',_0x540a1b),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x4d1b8b['includes']('user-roles-section')){const _0x22bda3=document['getElementById'](_0xf5b70a(0x20d));_0x22bda3&&_0x22bda3['addEventListener']('click',function(){const _0x305067=_0xf5b70a;console['log']('Load\x20users\x20data\x20clicked'),this['classList'][_0x305067(0x390)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x305067(0x2a1)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x305067(0x2e3)](_0x44bde1=>{const _0x961959=_0x305067;console['error']('Error\x20loading\x20users:',_0x44bde1),this[_0x961959(0x3e9)][_0x961959(0x3c0)](_0x961959(0x246)),this[_0x961959(0x3f9)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4a2a31=_0x961959;this[_0x4a2a31(0x3f9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x4d1b8b[_0xf5b70a(0x30c)](_0xf5b70a(0x3aa))){const _0x2eed60=document[_0xf5b70a(0x1e2)]('load-inactive-players-data');_0x2eed60&&_0x2eed60[_0xf5b70a(0x3f5)]('click',function(){const _0x3b0d92=_0xf5b70a;console['log'](_0x3b0d92(0x2a5)),this[_0x3b0d92(0x3e9)][_0x3b0d92(0x390)](_0x3b0d92(0x246)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()[_0x3b0d92(0x2a1)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})[_0x3b0d92(0x2e3)](_0x457754=>{const _0x5be019=_0x3b0d92;console['error']('Error\x20loading\x20inactive\x20players:',_0x457754),this[_0x5be019(0x3e9)][_0x5be019(0x3c0)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x4d1b8b['includes']('manage-highlights')){const _0x17ef07=document['getElementById']('load-highlights-data');_0x17ef07&&_0x17ef07['addEventListener']('click',function(){const _0x4b2999=_0xf5b70a;console[_0x4b2999(0x24d)]('Load\x20highlights\x20data\x20clicked'),this['classList']['add'](_0x4b2999(0x246)),this[_0x4b2999(0x3f9)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x13c204=_0x4b2999;this[_0x13c204(0x3e9)][_0x13c204(0x3c0)]('loading'),this[_0x13c204(0x3f9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x246820=>{const _0x2dee76=_0x4b2999;console['error'](_0x2dee76(0x287),_0x246820),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x56660e=_0x2dee76;this[_0x56660e(0x3f9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x4d1b8b['includes']('manage-matches')){const _0x5bd7ef=document['getElementById']('load-matches-data');_0x5bd7ef&&_0x5bd7ef['addEventListener'](_0xf5b70a(0x389),function(){const _0x1c5fd7=_0xf5b70a;console['log']('Load\x20matches\x20data\x20clicked'),this[_0x1c5fd7(0x3e9)]['add'](_0x1c5fd7(0x246)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x4330ee=_0x1c5fd7;this['classList']['remove'](_0x4330ee(0x246)),this['innerHTML']=_0x4330ee(0x1c2);})['catch'](_0x163043=>{const _0x4aec7c=_0x1c5fd7;console['error']('Error\x20loading\x20matches:',_0x163043),this['classList'][_0x4aec7c(0x3c0)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x4d1b8b[_0xf5b70a(0x30c)](_0xf5b70a(0x1dd))){const _0x2d51a5=document['getElementById'](_0xf5b70a(0x382));_0x2d51a5&&_0x2d51a5['addEventListener']('click',function(){const _0x50e19b=_0xf5b70a;console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList']['add'](_0x50e19b(0x246)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()[_0x50e19b(0x2a1)](()=>{const _0x5074b7=_0x50e19b;this[_0x5074b7(0x3e9)]['remove']('loading'),this[_0x5074b7(0x3f9)]=_0x5074b7(0x39d);})['catch'](_0x5e7bbc=>{const _0x233a33=_0x50e19b;console['error'](_0x233a33(0x3c9),_0x5e7bbc),this['classList'][_0x233a33(0x3c0)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5afdd9=_0x233a33;this['innerHTML']=_0x5afdd9(0x39d);},0xbb8);});});}console[_0xf5b70a(0x24d)]('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x2537a2=a4_0x131698;document['getElementById'](_0x2537a2(0x2f2))['textContent']='-',document['getElementById']('match-count')[_0x2537a2(0x3ae)]='-',document[_0x2537a2(0x1e2)]('pending-count')['textContent']='-',document['getElementById'](_0x2537a2(0x29e))['textContent']='-';}function setupLadderSelector(){const _0x52f97e=a4_0x131698,_0x48e478=document['querySelectorAll'](_0x52f97e(0x393));_0x48e478['forEach'](_0x3a7a76=>{_0x3a7a76['addEventListener']('change',()=>{const _0x58fa27=a4_0x2b62;currentLadder=_0x3a7a76['value'],document[_0x58fa27(0x396)]['setAttribute']('data-ladder',currentLadder);const _0x440d0a=document['getElementById'](_0x58fa27(0x2a4));_0x440d0a&&(_0x440d0a[_0x58fa27(0x3ae)]=currentLadder),document['getElementById']('player-count')['textContent']='-',document[_0x58fa27(0x1e2)]('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x58fa27(0x1e2)]('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts[_0x58fa27(0x2ad)]=null),showNotification(_0x58fa27(0x3a7)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x58fa27(0x3a2));});});const _0x49a765=document['getElementById']('current-ladder-display');_0x49a765&&(_0x49a765['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x5dc364=a4_0x131698;try{console[_0x5dc364(0x24d)](_0x5dc364(0x39a)),document['getElementById'](_0x5dc364(0x2f2))['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x5dc364(0x394))['textContent']='-',document['getElementById'](_0x5dc364(0x29e))[_0x5dc364(0x3ae)]='-';const _0x5d2176=currentLadder==='D1'?_0x5dc364(0x27a):currentLadder==='D2'?_0x5dc364(0x3a5):_0x5dc364(0x33f),_0x46cfab=currentLadder==='D1'?_0x5dc364(0x3cb):currentLadder==='D2'?'approvedMatchesD2':_0x5dc364(0x30a),_0x546afa=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?_0x5dc364(0x23c):_0x5dc364(0x2f1),_0x116573=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0x5dc364(0x25c):'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x5d2176+',\x20'+_0x46cfab);const _0x5f36de=await getDocs(collection(db,_0x5d2176)),_0x237ac4=_0x5f36de[_0x5dc364(0x3e1)],_0xc8bf1d=await getDocs(collection(db,_0x46cfab)),_0x44d794=_0xc8bf1d[_0x5dc364(0x3e1)],_0xe8a9ad=await getDocs(collection(db,_0x546afa)),_0x43856b=_0xe8a9ad['size'],_0x288beb=await getDocs(collection(db,_0x116573)),_0x58a717=_0x288beb['size'];return document[_0x5dc364(0x1e2)]('player-count')['textContent']=_0x237ac4,document[_0x5dc364(0x1e2)]('match-count')['textContent']=_0x44d794,document[_0x5dc364(0x1e2)]('pending-count')[_0x5dc364(0x3ae)]=_0x43856b,document['getElementById']('rejected-count')['textContent']=_0x58a717,await createRankDistributionChart(),await createActivityChart(),console[_0x5dc364(0x24d)](_0x5dc364(0x3c7)),!![];}catch(_0x3fcb08){console[_0x5dc364(0x285)]('Error\x20loading\x20dashboard\x20data:',_0x3fcb08);throw _0x3fcb08;}}async function createRankDistributionChart(){const _0x1ee1b3=a4_0x131698;try{const _0xbc10db=collection(db,currentLadder==='D1'?_0x1ee1b3(0x27a):'playersD2'),_0x2e7e7c=await getDocs(_0xbc10db),_0xb3ce11={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x2e7e7c['forEach'](_0x498151=>{const _0x429a66=_0x1ee1b3,_0x578976=_0x498151[_0x429a66(0x379)](),_0xfeb292=_0x578976['eloRating']||0x4b0;if(_0xfeb292>=0x7d0)_0xb3ce11['Emerald']++;else{if(_0xfeb292>=0x708)_0xb3ce11[_0x429a66(0x408)]++;else{if(_0xfeb292>=0x640)_0xb3ce11['Silver']++;else{if(_0xfeb292>=0x578)_0xb3ce11[_0x429a66(0x3b5)]++;else _0xb3ce11['Unranked']++;}}}});const _0x3c68ff=document[_0x1ee1b3(0x1e2)](_0x1ee1b3(0x350));charts['rankDistribution']&&charts[_0x1ee1b3(0x2a7)]['destroy'](),charts['rankDistribution']=new Chart(_0x3c68ff,{'type':'doughnut','data':{'labels':Object['keys'](_0xb3ce11),'datasets':[{'data':Object[_0x1ee1b3(0x315)](_0xb3ce11),'backgroundColor':['#808080',_0x1ee1b3(0x2ed),_0x1ee1b3(0x1d6),'#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x1ee1b3(0x2e0)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x466d69){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x466d69),document['getElementById']('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x3693a8=a4_0x131698;try{const _0x2d209d=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x2e2139=collection(db,_0x2d209d),_0x241c89=new Date();_0x241c89['setDate'](_0x241c89[_0x3693a8(0x24e)]()-0x7);const _0x4d389a=query(_0x2e2139,where('approvedAt','>=',_0x241c89),orderBy('approvedAt','asc')),_0x4c985b=await getDocs(_0x4d389a),_0x3d9fec=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],_0x2f659c=_0x3d9fec[_0x3693a8(0x3dc)]((_0x518531,_0x54df9b)=>({..._0x518531,[_0x54df9b]:0x0}),{});_0x4c985b['forEach'](_0x27203a=>{const _0x216ecd=_0x3693a8,_0x3edced=_0x27203a[_0x216ecd(0x379)]();if(_0x3edced['approvedAt']){const _0x2c8b52=_0x3d9fec[new Date(_0x3edced['approvedAt'][_0x216ecd(0x347)]*0x3e8)[_0x216ecd(0x1d0)]()];_0x2f659c[_0x2c8b52]++;}});const _0x4c1f4a=document['getElementById']('activity-chart');charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x4c1f4a,{'type':'bar','data':{'labels':_0x3d9fec,'datasets':[{'label':'Matches\x20Played','data':_0x3d9fec['map'](_0x343644=>_0x2f659c[_0x343644]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0x3693a8(0x2f4):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x3693a8(0x2e0)},'grid':{'color':_0x3693a8(0x373)}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x3e3b30){console['error']('Error\x20creating\x20activity\x20chart:',_0x3e3b30),document[_0x3693a8(0x1e2)]('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x413e75=a4_0x131698,_0x20f74f=document['getElementById']('players-table-body');if(!_0x20f74f)return;_0x20f74f['innerHTML']=_0x413e75(0x3ab);try{let _0x11e338='players';if(currentLadder==='D2')_0x11e338='playersD2';else currentLadder==='D3'&&(_0x11e338=_0x413e75(0x33f));console['log'](_0x413e75(0x309)+_0x11e338+_0x413e75(0x251));const _0x1532eb=collection(db,_0x11e338),_0x5b5e65=query(_0x1532eb,orderBy(_0x413e75(0x361),_0x413e75(0x2fe))),_0x4b57b8=await getDocs(_0x5b5e65);if(_0x4b57b8[_0x413e75(0x3b9)]){_0x20f74f['innerHTML']=_0x413e75(0x303);return;}_0x20f74f[_0x413e75(0x3f9)]='';let _0x2ba6f2=0x1;_0x4b57b8[_0x413e75(0x206)](_0x16f815=>{const _0x347ab4=_0x413e75,_0x5e7fb1=_0x16f815[_0x347ab4(0x379)](),_0x4c5a56=getRankFromElo(_0x5e7fb1[_0x347ab4(0x361)]||0x4b0),_0x17c361=getRankStyle(_0x5e7fb1[_0x347ab4(0x361)]||0x4b0),_0x4ae00e=document['createElement']('tr');_0x4ae00e[_0x347ab4(0x3f9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x2ba6f2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x17c361['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5e7fb1['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x5e7fb1['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x17c361[_0x347ab4(0x1c1)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4c5a56+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5e7fb1['wins']||0x0)+_0x347ab4(0x237)+(_0x5e7fb1['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x16f815['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x16f815['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x20f74f['appendChild'](_0x4ae00e),_0x2ba6f2++;}),setupPlayerActionButtons();}catch(_0x4b10bd){console['error']('Error\x20loading\x20players:',_0x4b10bd),_0x20f74f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x4b10bd[_0x413e75(0x3c2)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x474abb){const _0x2b997=a4_0x131698;if(_0x474abb>=0x7d0)return'Emerald';if(_0x474abb>=0x708)return _0x2b997(0x408);if(_0x474abb>=0x640)return _0x2b997(0x302);if(_0x474abb>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x4ee5f3=a4_0x131698;document[_0x4ee5f3(0x35f)]('.edit-btn')['forEach'](_0xd59e5e=>{_0xd59e5e['addEventListener']('click',async _0x17abb2=>{const _0x3b5c99=a4_0x2b62,_0x6a5503=_0x17abb2[_0x3b5c99(0x352)]['dataset']['id'];openEditPlayerModal(_0x6a5503);});}),document['querySelectorAll'](_0x4ee5f3(0x2ec))['forEach'](_0x41d95a=>{const _0x159273=_0x4ee5f3;_0x41d95a['addEventListener'](_0x159273(0x389),async _0x465e56=>{const _0x1d05cf=_0x465e56['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x1d05cf);});});}async function openEditPlayerModal(_0x22c170){const _0x51d08d=a4_0x131698;try{const _0x299a9f=currentLadder==='D1'?'players':'playersD2',_0x2fb7dc=doc(db,_0x299a9f,_0x22c170),_0x2c3ea3=await getDoc(_0x2fb7dc);if(!_0x2c3ea3['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x5d2152=_0x2c3ea3['data'](),_0x1eb4b7=document['getElementById'](_0x51d08d(0x1be)),_0xc6c77b=document['getElementById']('edit-username'),_0x47b4f0=document[_0x51d08d(0x1e2)]('edit-elo'),_0xb41c3f=document['getElementById']('edit-wins'),_0x337071=document['getElementById']('edit-losses');_0xc6c77b['value']=_0x5d2152['username']||'',_0x47b4f0['value']=_0x5d2152[_0x51d08d(0x361)]||0x4b0,_0xb41c3f['value']=_0x5d2152['wins']||0x0,_0x337071['value']=_0x5d2152['losses']||0x0,_0x1eb4b7['dataset']['playerId']=_0x22c170,_0x1eb4b7[_0x51d08d(0x3e9)]['add']('active');}catch(_0x3e4aa4){console['error']('Error\x20opening\x20edit\x20modal:',_0x3e4aa4),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x412af0=a4_0x131698;try{const _0x174354=document['getElementById'](_0x412af0(0x1be)),_0x41b344=_0x174354[_0x412af0(0x283)][_0x412af0(0x337)];if(!_0x41b344){showNotification('No\x20player\x20selected',_0x412af0(0x285));return;}const _0x85bc9f=document['getElementById']('edit-username'),_0x385f51=document['getElementById']('edit-elo'),_0x396500=document['getElementById']('edit-wins'),_0x60d23f=document['getElementById']('edit-losses'),_0x4fbf74=_0x85bc9f[_0x412af0(0x270)]['trim'](),_0x31e6de=parseInt(_0x385f51['value']),_0x4255b1=parseInt(_0x396500[_0x412af0(0x270)]),_0x3e653e=parseInt(_0x60d23f['value']);if(!_0x4fbf74||isNaN(_0x31e6de)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x3725b3=currentLadder==='D1'?'players':'playersD2',_0x1816cf=doc(db,_0x3725b3,_0x41b344),_0x8d3047=await getDoc(_0x1816cf),_0x22604e=_0x8d3047['exists']()?_0x8d3047[_0x412af0(0x379)]():{},_0x2126cc=_0x22604e[_0x412af0(0x361)]||0x4b0;await updateDoc(_0x1816cf,{'username':_0x4fbf74,'eloRating':_0x31e6de,'wins':_0x4255b1||0x0,'losses':_0x3e653e||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x31e6de!==_0x2126cc){const _0x21dc11=currentLadder==='D1'?'eloHistory':_0x412af0(0x377);await addDoc(collection(db,_0x21dc11),{'player':_0x4fbf74,'previousElo':_0x2126cc,'newElo':_0x31e6de,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x3163c7){console['error']('Error\x20updating\x20player:',_0x3163c7),showNotification(_0x412af0(0x265)+_0x3163c7['message'],'error');}}function closeEditPlayerModal(){const _0x3f3bc8=a4_0x131698,_0x2526a1=document[_0x3f3bc8(0x1e2)](_0x3f3bc8(0x1be));_0x2526a1['classList']['remove']('active'),_0x2526a1['dataset']['playerId']='';}async function confirmDeletePlayer(_0x1ff4f8){const _0xd1be46=a4_0x131698;if(confirm(_0xd1be46(0x37f)))try{const _0x31ec4c=currentLadder==='D1'?_0xd1be46(0x27a):_0xd1be46(0x3a5);await deleteDoc(doc(db,_0x31ec4c,_0x1ff4f8)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully',_0xd1be46(0x2dd));}catch(_0x4c6dca){console['error']('Error\x20deleting\x20player:',_0x4c6dca),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x4c6dca[_0xd1be46(0x3c2)],_0xd1be46(0x285));}}async function setupManagePlayersSection(){const _0x343ab8=a4_0x131698,_0x41beb8=document['getElementById'](_0x343ab8(0x300));_0x41beb8&&_0x41beb8['addEventListener'](_0x343ab8(0x328),async _0xb8de0=>{_0xb8de0['preventDefault'](),await addNewPlayer();});const _0x27251b=document['getElementById']('player-search');_0x27251b&&_0x27251b[_0x343ab8(0x3f5)]('input',debounce(filterPlayerTable,0x12c));const _0x1209cd=document[_0x343ab8(0x1e2)]('save-player-btn');_0x1209cd&&_0x1209cd['addEventListener'](_0x343ab8(0x389),saveEditedPlayer);const _0x524ad0=document[_0x343ab8(0x1e2)]('cancel-edit-btn');_0x524ad0&&_0x524ad0[_0x343ab8(0x3f5)]('click',closeEditPlayerModal);const _0x52ee1d=document['getElementById']('edit-player-modal');_0x52ee1d&&_0x52ee1d['addEventListener']('click',_0x57abf2=>{_0x57abf2['target']===_0x52ee1d&&closeEditPlayerModal();});const _0x1d0f1b=document['getElementById']('players-ladder-selector');_0x1d0f1b&&_0x1d0f1b['addEventListener']('change',()=>{currentLadder=_0x1d0f1b['value'],loadPlayersData();});}async function addNewPlayer(){const _0x437765=a4_0x131698;try{const _0x9c58ef=document[_0x437765(0x1e2)]('new-player-username'),_0x292500=document[_0x437765(0x1e2)]('new-player-elo'),_0x1bd08e=_0x9c58ef['value']['trim'](),_0x58911c=parseInt(_0x292500[_0x437765(0x270)])||0x4b0;if(!_0x1bd08e){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log'](_0x437765(0x1de)+_0x1bd08e+_0x437765(0x2a6)+_0x58911c+'\x20to\x20'+currentLadder+_0x437765(0x38e));let _0x3ca525='players',_0x4886ec='eloHistory';if(currentLadder==='D2')_0x3ca525='playersD2',_0x4886ec=_0x437765(0x377);else currentLadder==='D3'&&(_0x3ca525='playersD3',_0x4886ec=_0x437765(0x218));const _0x129d00=query(collection(db,_0x3ca525),where('username','==',_0x1bd08e)),_0xd7b8a1=await getDocs(_0x129d00);if(!_0xd7b8a1['empty']){alert('Username\x20'+_0x1bd08e+_0x437765(0x370)+currentLadder+'\x20ladder');return;}const _0x1fcecf=auth[_0x437765(0x31a)],_0xd94009={'username':_0x1bd08e,'eloRating':_0x58911c,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x1fcecf?_0x1fcecf['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x3ca525),_0xd94009),await addDoc(collection(db,_0x4886ec),{'player':_0x1bd08e,'previousElo':0x4b0,'newElo':_0x58911c,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x1fcecf?_0x1fcecf['email']:_0x437765(0x203),'gameMode':currentLadder}),_0x9c58ef['value']='',_0x292500[_0x437765(0x270)]=_0x437765(0x3df),alert(_0x437765(0x29d)+_0x1bd08e+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x429a90){console[_0x437765(0x285)](_0x437765(0x342),_0x429a90),alert('Error\x20adding\x20player:\x20'+_0x429a90['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x5b48c9=a4_0x131698,_0x47b137=document['getElementById']('add-player-form');_0x47b137&&_0x47b137[_0x5b48c9(0x3f5)]('submit',_0x4847d5=>{_0x4847d5['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x13cab9=a4_0x131698,_0x2aac1d=document[_0x13cab9(0x1e2)]('player-search')['value']['toLowerCase'](),_0x40df84=document['querySelectorAll'](_0x13cab9(0x1bf));let _0x349241=0x0;_0x40df84['forEach'](_0xeff7c7=>{const _0x266a8b=_0x13cab9,_0x5e1317=_0xeff7c7['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x5e1317[_0x266a8b(0x30c)](_0x2aac1d)?(_0xeff7c7['style']['display']='',_0x349241++):_0xeff7c7['style'][_0x266a8b(0x26a)]='none';});const _0x1769a5=document['getElementById']('no-results-message');_0x1769a5&&(_0x349241===0x0&&_0x2aac1d!==''?_0x1769a5['style']['display']='block':_0x1769a5[_0x13cab9(0x217)]['display']='none');}function debounce(_0x513983,_0x17bf60){let _0x7ef4a;return function(..._0x2cb526){clearTimeout(_0x7ef4a),_0x7ef4a=setTimeout(()=>_0x513983['apply'](this,_0x2cb526),_0x17bf60);};}async function loadEloHistory(_0x28f44c=0x1){const _0x7b2576=a4_0x131698,_0x56a2df=document['getElementById']('elo-history-table-body'),_0x57ed2d=currentLadder['toLowerCase']();if(!_0x56a2df)return;_0x56a2df[_0x7b2576(0x3f9)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x39b577=currentLadder==='D1'?_0x7b2576(0x242):currentLadder==='D2'?'eloHistoryD2':_0x7b2576(0x218),_0x5b2874=collection(db,_0x39b577);let _0x56f787;if(_0x28f44c>eloHistoryPagination[_0x57ed2d][_0x7b2576(0x262)]&&eloHistoryPagination[_0x57ed2d]['lastVisible'])_0x56f787=query(_0x5b2874,orderBy(_0x7b2576(0x2c9),_0x7b2576(0x2fe)),startAfter(eloHistoryPagination[_0x57ed2d]['lastVisible']),limit(PAGE_SIZE));else _0x28f44c<eloHistoryPagination[_0x57ed2d]['page']&&eloHistoryPagination[_0x57ed2d]['firstVisible']?_0x56f787=query(_0x5b2874,orderBy(_0x7b2576(0x2c9),_0x7b2576(0x2fe)),endBefore(eloHistoryPagination[_0x57ed2d][_0x7b2576(0x26f)]),limitToLast(PAGE_SIZE)):_0x56f787=query(_0x5b2874,orderBy('timestamp',_0x7b2576(0x2fe)),limit(PAGE_SIZE));const _0x1792ca=await getDocs(_0x56f787);if(_0x1792ca['empty']){_0x56a2df['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x57ed2d+'-page-indicator')[_0x7b2576(0x3ae)]=_0x7b2576(0x1e7);return;}eloHistoryPagination[_0x57ed2d]['page']=_0x28f44c,eloHistoryPagination[_0x57ed2d]['firstVisible']=_0x1792ca['docs'][0x0],eloHistoryPagination[_0x57ed2d]['lastVisible']=_0x1792ca[_0x7b2576(0x276)][_0x1792ca[_0x7b2576(0x276)][_0x7b2576(0x398)]-0x1];const _0x4ffc3a=new Map();_0x56a2df['innerHTML']='';const _0x80e3fe=async _0x16070e=>{const _0x8f81c5=_0x7b2576;if(typeof _0x16070e!=='string'||_0x16070e['length']<0x14||/[^a-zA-Z0-9-_]/[_0x8f81c5(0x3f7)](_0x16070e))return _0x16070e;if(_0x4ffc3a['has'](_0x16070e))return _0x4ffc3a['get'](_0x16070e);try{for(const _0x1aeb60 of[_0x8f81c5(0x27a),'playersD2','playersD3','nonParticipants']){const _0x5925b8=await getDoc(doc(db,_0x1aeb60,_0x16070e));if(_0x5925b8[_0x8f81c5(0x293)]()&&_0x5925b8['data']()['username']){const _0x16662e=_0x5925b8['data']()['username'];return _0x4ffc3a['set'](_0x16070e,_0x16662e),_0x16662e;}}return _0x16070e;}catch(_0x48c37a){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x16070e+':',_0x48c37a),_0x16070e;}};for(const _0x492805 of _0x1792ca['docs']){const _0x408249=_0x492805[_0x7b2576(0x379)](),_0x153f52=document['createElement']('tr'),_0x337350=_0x408249[_0x7b2576(0x2c9)]?new Date(_0x408249['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x3e5030=_0x408249['newElo']-_0x408249['previousElo'],_0x4391a3=_0x3e5030>0x0?'positive-change':_0x3e5030<0x0?_0x7b2576(0x330):'',_0x4a24d0=_0x3e5030>0x0?'+':'',_0x171121=_0x408249[_0x7b2576(0x28a)]||_0x408249['username']||_0x408249['userId']||'N/A',_0x3e942a=await _0x80e3fe(_0x171121);_0x153f52['innerHTML']=_0x7b2576(0x2b4)+_0x337350+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x3e942a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x408249['previousElo']||_0x7b2576(0x25f))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x408249[_0x7b2576(0x1e8)]||_0x7b2576(0x25f))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4391a3+'\x22>'+_0x4a24d0+_0x3e5030+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x408249['type'])+_0x7b2576(0x211)+(_0x408249['modifiedBy']||_0x408249['promotedBy']||_0x408249[_0x7b2576(0x2da)]||_0x7b2576(0x3c1))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x56a2df['appendChild'](_0x153f52);}document['getElementById'](_0x57ed2d+_0x7b2576(0x3e3))[_0x7b2576(0x3ae)]='Page\x20'+_0x28f44c;const _0x360024=document['getElementById'](_0x57ed2d+'-prev-page'),_0x127657=document['getElementById'](_0x57ed2d+'-next-page');if(_0x360024)_0x360024['disabled']=_0x28f44c<=0x1;const _0x48c334=query(_0x5b2874,orderBy('timestamp',_0x7b2576(0x2fe)),startAfter(eloHistoryPagination[_0x57ed2d]['lastVisible']),limit(0x1)),_0x240c8c=await getDocs(_0x48c334);if(_0x127657)_0x127657['disabled']=_0x240c8c['empty'];}catch(_0x513bf1){console['error']('Error\x20loading\x20ELO\x20history:',_0x513bf1),_0x56a2df['innerHTML']=_0x7b2576(0x29a)+_0x513bf1['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x339581){const _0x39836f=a4_0x131698;switch(_0x339581){case'match_result':return'Match\x20Result';case _0x39836f(0x31f):return'Promotion';case'demotion':return'Demotion';case'admin_modification':return'Admin\x20Adjustment';case _0x39836f(0x1fa):return _0x39836f(0x3a4);default:return _0x339581||_0x39836f(0x3bc);}}function setupEloHistorySection(){const _0x2bb824=a4_0x131698;document[_0x2bb824(0x1e2)](_0x2bb824(0x1fc))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document[_0x2bb824(0x1e2)](_0x2bb824(0x1f2))['addEventListener'](_0x2bb824(0x389),()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document[_0x2bb824(0x1e2)]('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x2bb824(0x1e2)]('d2-next-page')['addEventListener']('click',()=>{const _0x4feff3=_0x2bb824;loadEloHistory(eloHistoryPagination['d2'][_0x4feff3(0x262)]+0x1);});const _0x277fdc=document[_0x2bb824(0x1e2)]('d3-prev-page'),_0x4e85dc=document[_0x2bb824(0x1e2)](_0x2bb824(0x32b));_0x277fdc&&_0x277fdc['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x4e85dc&&_0x4e85dc['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x38836c=document['getElementById']('elo-history-search');_0x38836c&&_0x38836c[_0x2bb824(0x3f5)](_0x2bb824(0x335),debounce(filterEloHistoryTable,0x12c));const _0x3e22c4=document['getElementById']('history-type-filter');_0x3e22c4&&_0x3e22c4['addEventListener'](_0x2bb824(0x1e6),applyEloHistoryFilters);const _0x43b4f7=document['getElementById']('reset-history-filters');_0x43b4f7&&_0x43b4f7[_0x2bb824(0x3f5)](_0x2bb824(0x389),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0xf15d9a=document['getElementById']('elo-history-search')['value']['toLowerCase'](),_0x440cde=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x1ec599=0x0;_0x440cde['forEach'](_0x5998ed=>{const _0x560c47=a4_0x2b62;if(_0x5998ed['classList'][_0x560c47(0x3c3)](_0x560c47(0x1c9))||_0x5998ed['classList']['contains']('empty-state')||_0x5998ed['classList']['contains']('error-state'))return;const _0xf88b3d=_0x5998ed['querySelector']('.player')?.[_0x560c47(0x3ae)]['toLowerCase']()||'',_0x28e7fb=_0x5998ed['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0xc4177f=_0x5998ed['querySelector']('.admin-action')?.['textContent'][_0x560c47(0x35e)]()||'';_0xf88b3d['includes'](_0xf15d9a)||_0x28e7fb[_0x560c47(0x30c)](_0xf15d9a)||_0xc4177f['includes'](_0xf15d9a)?(_0x5998ed[_0x560c47(0x217)][_0x560c47(0x26a)]='',_0x1ec599++):_0x5998ed['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x46023f=a4_0x131698,_0x5ea958=document['getElementById']('history-start-date')['value'],_0x2544b5=document[_0x46023f(0x1e2)]('history-end-date')['value'],_0x17c577=document['getElementById']('history-type-filter')['value'],_0x41a226=currentLadder['toLowerCase']();eloHistoryPagination[_0x41a226]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x1d06e2=document[_0x46023f(0x1e2)]('elo-history-table-body');_0x1d06e2['innerHTML']=_0x46023f(0x348);try{const _0x18725e=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x4d1d67=collection(db,_0x18725e);let _0x4fef12=[orderBy('timestamp',_0x46023f(0x2fe))];if(_0x5ea958){const _0x2a90fd=new Date(_0x5ea958);_0x2a90fd['setHours'](0x0,0x0,0x0,0x0),_0x4fef12['push'](where(_0x46023f(0x2c9),'>=',_0x2a90fd));}if(_0x2544b5){const _0x51d978=new Date(_0x2544b5);_0x51d978['setHours'](0x17,0x3b,0x3b,0x3e7),_0x4fef12['push'](where('timestamp','<=',_0x51d978));}_0x17c577&&_0x17c577!==_0x46023f(0x27c)&&_0x4fef12[_0x46023f(0x2ff)](where(_0x46023f(0x360),'==',_0x17c577));_0x4fef12[_0x46023f(0x2ff)](limit(PAGE_SIZE));const _0x44c374=query(_0x4d1d67,..._0x4fef12),_0x3354c0=await getDocs(_0x44c374);!_0x3354c0[_0x46023f(0x3b9)]&&(eloHistoryPagination[_0x41a226][_0x46023f(0x26f)]=_0x3354c0[_0x46023f(0x276)][0x0],eloHistoryPagination[_0x41a226][_0x46023f(0x392)]=_0x3354c0['docs'][_0x3354c0['docs']['length']-0x1]);_0x1d06e2['innerHTML']='';if(_0x3354c0['empty']){_0x1d06e2[_0x46023f(0x3f9)]=_0x46023f(0x25e);return;}_0x3354c0['forEach'](_0x175681=>{const _0x5570dc=_0x46023f,_0x404e3f=_0x175681['data'](),_0x51a3ee=document['createElement']('tr'),_0x24d4a2=_0x404e3f['timestamp']?new Date(_0x404e3f['timestamp'][_0x5570dc(0x347)]*0x3e8)['toLocaleString']():'N/A',_0x3143a1=_0x404e3f['newElo']-_0x404e3f['previousElo'],_0x54c98a=_0x3143a1>0x0?_0x5570dc(0x1f4):_0x3143a1<0x0?'negative-change':'',_0x3a15e4=_0x3143a1>0x0?'+':'',_0x433fa6=_0x404e3f['player']||_0x404e3f['username']||_0x404e3f[_0x5570dc(0x403)]||'N/A';_0x51a3ee['innerHTML']=_0x5570dc(0x2b4)+_0x24d4a2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x433fa6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x404e3f['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x404e3f['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x54c98a+'\x22>'+_0x3a15e4+_0x3143a1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x404e3f['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x404e3f['modifiedBy']||_0x404e3f['promotedBy']||_0x404e3f['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1d06e2[_0x5570dc(0x3b8)](_0x51a3ee);}),document['getElementById'](_0x41a226+'-page-indicator')['textContent']='Page\x201';}catch(_0x34280f){console['error']('Error\x20applying\x20filters:',_0x34280f),_0x1d06e2[_0x46023f(0x3f9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x34280f['message']+_0x46023f(0x3b1);}}function resetEloHistoryFilters(){const _0x131bf6=a4_0x131698;document['getElementById']('history-start-date')[_0x131bf6(0x270)]='',document[_0x131bf6(0x1e2)]('history-end-date')[_0x131bf6(0x270)]='',document['getElementById']('history-type-filter')['value']=_0x131bf6(0x27c),document[_0x131bf6(0x1e2)]('elo-history-search')['value']='';const _0x50b35f=currentLadder[_0x131bf6(0x35e)]();eloHistoryPagination[_0x50b35f]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x532404=a4_0x131698,_0x256856=document['getElementById']('promote-player-btn'),_0x2c2438=document['getElementById']('promote-modal'),_0x5627b5=document[_0x532404(0x1e2)](_0x532404(0x409));_0x256856&&_0x2c2438&&_0x5627b5&&(_0x256856['addEventListener']('click',()=>{const _0x2036f9=_0x532404;_0x2c2438[_0x2036f9(0x3e9)][_0x2036f9(0x390)]('active');}),_0x2c2438['addEventListener']('click',_0x255c41=>{const _0x4dee45=_0x532404;_0x255c41['target']===_0x2c2438&&_0x2c2438['classList'][_0x4dee45(0x3c0)](_0x4dee45(0x216));}),_0x5627b5['addEventListener'](_0x532404(0x328),async _0x5abf1e=>{const _0x35bfe5=_0x532404;_0x5abf1e[_0x35bfe5(0x2f6)]();const _0x3e1195=document['getElementById']('promote-username'),_0x237845=document['getElementById']('promote-ladder'),_0x57cfb1=_0x3e1195[_0x35bfe5(0x270)]['trim'](),_0xb21ee4=_0x237845['value'];if(!_0x57cfb1){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x57cfb1,_0xb21ee4),_0x2c2438['classList'][_0x35bfe5(0x3c0)](_0x35bfe5(0x216)),_0x3e1195['value']='';}catch(_0x1ee327){showNotification(_0x1ee327['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{_0x2c2438['classList']['remove']('active');}));const _0xa171e3=document['getElementById'](_0x532404(0x24b)),_0x1ed3cb=document['getElementById']('demote-modal'),_0x300c4c=document['getElementById']('demote-form');_0xa171e3&&_0x1ed3cb&&_0x300c4c&&(_0xa171e3['addEventListener']('click',()=>{_0x1ed3cb['classList']['add']('active');}),_0x1ed3cb['addEventListener']('click',_0x495793=>{const _0x4aff58=_0x532404;_0x495793['target']===_0x1ed3cb&&_0x1ed3cb['classList'][_0x4aff58(0x3c0)]('active');}),_0x300c4c['addEventListener']('submit',async _0x384c2e=>{const _0x4e2c6e=_0x532404;_0x384c2e['preventDefault']();const _0x41b102=document['getElementById'](_0x4e2c6e(0x378)),_0x2c58d4=document['getElementById']('demote-ladder'),_0x2fefd8=_0x41b102['value']['trim'](),_0x2dd759=_0x2c58d4['value'];if(!_0x2fefd8){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x2fefd8,_0x2dd759),document[_0x4e2c6e(0x1e2)]('demote-modal')[_0x4e2c6e(0x3e9)]['remove']('active'),document['getElementById']('demote-username')[_0x4e2c6e(0x270)]='';}catch(_0x3803a0){console[_0x4e2c6e(0x285)]('Error\x20in\x20demotion:',_0x3803a0);}}));const _0x42eb0e=document['getElementById']('set-elo-btn'),_0x283890=document[_0x532404(0x1e2)](_0x532404(0x3e5)),_0x1e7f69=document[_0x532404(0x1e2)](_0x532404(0x1fb));_0x42eb0e&&_0x283890&&_0x1e7f69&&(_0x42eb0e['addEventListener'](_0x532404(0x389),()=>{const _0x24ee00=_0x532404;_0x283890['classList']['add'](_0x24ee00(0x216));}),_0x283890['addEventListener']('click',_0x24441b=>{const _0x2e46d9=_0x532404;_0x24441b['target']===_0x283890&&_0x283890[_0x2e46d9(0x3e9)]['remove']('active');}),_0x1e7f69['addEventListener'](_0x532404(0x328),async _0x4a1445=>{const _0x39f9ad=_0x532404;_0x4a1445['preventDefault']();const _0xa47471=document['getElementById']('set-elo-username'),_0x531a1c=document[_0x39f9ad(0x1e2)]('set-elo-value');let _0x43ed7f;const _0x1f68be=document[_0x39f9ad(0x1e2)]('set-elo-ladder'),_0x55005d=document['querySelector'](_0x39f9ad(0x3d6));if(_0x1f68be)_0x43ed7f=_0x1f68be['value'];else _0x55005d?_0x43ed7f=_0x55005d[_0x39f9ad(0x270)]:_0x43ed7f='D1';if(!_0xa47471||!_0x531a1c){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x5e7f9d=_0xa47471[_0x39f9ad(0x270)]['trim'](),_0x2b525b=parseInt(_0x531a1c['value']);if(!_0x5e7f9d||isNaN(_0x2b525b)){showNotification(_0x39f9ad(0x22c),'error');return;}try{await setCustomElo(_0x5e7f9d,_0x2b525b,_0x43ed7f),_0x283890[_0x39f9ad(0x3e9)][_0x39f9ad(0x3c0)]('active'),_0xa47471[_0x39f9ad(0x270)]='',_0x531a1c['value']='';}catch(_0x8ca010){showNotification(_0x8ca010['message'],'error');}}),document[_0x532404(0x1e2)]('cancel-set-elo-btn')['addEventListener'](_0x532404(0x389),()=>{const _0x126bf0=_0x532404;_0x283890['classList']['remove'](_0x126bf0(0x216));}));const _0x6dcc9=document['getElementById'](_0x532404(0x31b)),_0x4f5164=document['getElementById']('set-role-form');if(_0x6dcc9&&_0x4f5164){_0x6dcc9['addEventListener']('click',_0x291c58=>{_0x291c58['target']===_0x6dcc9&&closeModalHandler();}),_0x4f5164[_0x532404(0x3f5)]('submit',async _0x537d0f=>{const _0x411fd1=_0x532404;_0x537d0f['preventDefault']();const _0x517f5b=document['getElementById']('role-username'),_0x18f23f=document['getElementById'](_0x411fd1(0x35b)),_0x47cbb6=document['getElementById']('role-color'),_0x1c04c6=_0x517f5b['value'][_0x411fd1(0x32c)](),_0x4eaab7=_0x18f23f['value']['trim'](),_0x2592de=_0x47cbb6[_0x411fd1(0x270)];if(!_0x1c04c6){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x1c04c6,_0x4eaab7,_0x2592de),closeModalHandler(),loadUsersWithRoles();}catch(_0x4c2d27){}});const _0x19c4a7=document[_0x532404(0x1e2)]('cancel-role-btn');_0x19c4a7&&(_0x19c4a7['removeEventListener']('click',closeModalHandler),_0x19c4a7[_0x532404(0x3f5)](_0x532404(0x389),closeModalHandler));}}async function promotePlayer(_0x32bcae,_0x423383){const _0x2625b3=a4_0x131698;try{console['log'](_0x2625b3(0x278)+_0x32bcae+_0x2625b3(0x395)+_0x423383+_0x2625b3(0x38e));const _0x358d60=auth['currentUser'];if(!_0x358d60)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x57d107=_0x423383==='D2'?'playersD2':_0x2625b3(0x27a),_0x4d65dd=_0x423383==='D2'?_0x2625b3(0x377):_0x2625b3(0x242);console['log'](_0x2625b3(0x2fb)+_0x57d107);const _0x29afdd=collection(db,_0x57d107),_0x36fae9=query(_0x29afdd,where('username','==',_0x32bcae)),_0x3939db=await getDocs(_0x36fae9);if(_0x3939db['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x423383+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x423383+_0x2625b3(0x38e));}const _0x2c8df8=_0x3939db['docs'][0x0],_0x14522b=_0x2c8df8['data'](),_0x44720f=_0x14522b['eloRating']||0x4b0,_0x21ae68=_0x2c8df8['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x44720f);const _0x32c948=[{'name':'Bronze','elo':0x578},{'name':_0x2625b3(0x302),'elo':0x640},{'name':_0x2625b3(0x408),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x28f022=_0x32c948['find'](_0xf93fc8=>_0xf93fc8['elo']>_0x44720f);if(!_0x28f022){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x423383+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x423383+_0x2625b3(0x38e));}console['log'](_0x2625b3(0x2c5)+_0x28f022['name']+'\x20('+_0x28f022['elo']+')'),await updateDoc(doc(db,_0x57d107,_0x2c8df8['id']),{'eloRating':_0x28f022['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x358d60['email']||'admin'}),await addDoc(collection(db,_0x4d65dd),{'player':_0x32bcae,'previousElo':_0x44720f,'newElo':_0x28f022[_0x2625b3(0x2ab)],'timestamp':serverTimestamp(),'type':_0x2625b3(0x31f),'rankAchieved':_0x28f022['name'],'promotedBy':_0x358d60['email']||'admin','gameMode':_0x423383});try{const {promotionManager:_0x4cec4d}=await import('./promotions.js'),_0x483ec4=_0x4cec4d[_0x2625b3(0x28e)](_0x44720f),_0x2cf149=_0x28f022['name'];await _0x4cec4d['sendPromotionNotification'](_0x21ae68,_0x32bcae,_0x44720f,_0x28f022['elo'],_0x483ec4,_0x2cf149,'promotion',{'displayName':_0x32bcae,'source':'admin','adminUser':_0x358d60['email'],'ladder':_0x423383}),console['log'](_0x2625b3(0x2d4));}catch(_0x28a4c9){console[_0x2625b3(0x285)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x28a4c9);}return alert('Successfully\x20promoted\x20'+_0x32bcae+_0x2625b3(0x35d)+_0x28f022['name']+'\x20('+_0x28f022['elo']+')'),currentLadder===_0x423383&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x3ac037){console['error']('Error\x20promoting\x20player:',_0x3ac037),alert('Error\x20promoting\x20player:\x20'+_0x3ac037['message']);throw _0x3ac037;}}document['addEventListener'](a4_0x131698(0x234),()=>{const _0x442416=a4_0x131698,_0x2fffa9=document['getElementById']('promote-form');_0x2fffa9&&_0x2fffa9[_0x442416(0x3f5)](_0x442416(0x328),async _0xb18eb9=>{const _0x26499c=_0x442416;_0xb18eb9['preventDefault']();const _0x58d972=document[_0x26499c(0x1e2)]('promote-username')['value']['trim'](),_0x16b44d=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x58d972){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x58d972,_0x16b44d),document[_0x26499c(0x1e2)](_0x26499c(0x1ea))['classList'][_0x26499c(0x3c0)](_0x26499c(0x216)),document['getElementById'](_0x26499c(0x375))['value']='';}catch(_0x437953){console['error']('Error\x20in\x20promotion:',_0x437953);}});});async function demotePlayer(_0x15e0e7,_0x38b8da){const _0x1f4d24=a4_0x131698;try{console['log'](_0x1f4d24(0x3b2)+_0x15e0e7+'\x20in\x20'+_0x38b8da+'\x20ladder');const _0x3474cd=auth['currentUser'];if(!_0x3474cd)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x2c695a=_0x38b8da==='D2'?_0x1f4d24(0x3a5):'players',_0x30e3e4=_0x38b8da==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x2c695a);const _0x4f4034=collection(db,_0x2c695a),_0x1c70d8=query(_0x4f4034,where(_0x1f4d24(0x213),'==',_0x15e0e7)),_0x15875f=await getDocs(_0x1c70d8);if(_0x15875f['empty']){alert(_0x1f4d24(0x2fa)+_0x38b8da+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x38b8da+_0x1f4d24(0x38e));}const _0x14159f=_0x15875f['docs'][0x0],_0x5a28d9=_0x14159f['data'](),_0x3d51ec=_0x5a28d9['eloRating']||0x4b0;console['log'](_0x1f4d24(0x27d)+_0x3d51ec);const _0xc4b12=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x1f4d24(0x3b5),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x4ed710=_0xc4b12['find'](_0x452bae=>_0x452bae['elo']<_0x3d51ec);if(!_0x4ed710){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x38b8da+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x38b8da+'\x20ladder');}console['log'](_0x1f4d24(0x3ad)+_0x4ed710['name']+'\x20('+_0x4ed710['elo']+')'),await updateDoc(doc(db,_0x2c695a,_0x14159f['id']),{'eloRating':_0x4ed710['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x3474cd[_0x1f4d24(0x33d)]||'admin'}),await addDoc(collection(db,_0x30e3e4),{'player':_0x15e0e7,'previousElo':_0x3d51ec,'newElo':_0x4ed710[_0x1f4d24(0x2ab)],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x4ed710['name'],'demotedBy':_0x3474cd['email']||'admin','gameMode':_0x38b8da});try{const {promotionManager:_0x1b7b91}=await import('./promotions.js'),_0x4a2964=_0x1b7b91['getRankName'](_0x3d51ec),_0x395f6b=_0x4ed710[_0x1f4d24(0x3db)];await _0x1b7b91['sendPromotionNotification'](_0x14159f['id'],_0x15e0e7,_0x3d51ec,_0x4ed710[_0x1f4d24(0x2ab)],_0x4a2964,_0x395f6b,'demotion',{'displayName':_0x15e0e7,'source':'admin','adminUser':_0x3474cd['email'],'ladder':_0x38b8da}),console[_0x1f4d24(0x24d)]('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0xf22c5f){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0xf22c5f);}return alert('Successfully\x20demoted\x20'+_0x15e0e7+_0x1f4d24(0x35d)+_0x4ed710['name']+'\x20('+_0x4ed710['elo']+')'),currentLadder===_0x38b8da&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x128013){console['error']('Error\x20demoting\x20player:',_0x128013),alert(_0x1f4d24(0x3a1)+_0x128013[_0x1f4d24(0x3c2)]);throw _0x128013;}}document['addEventListener'](a4_0x131698(0x234),()=>{const _0x1b7af7=a4_0x131698,_0xfa08a5=document['getElementById'](_0x1b7af7(0x33b));_0xfa08a5&&_0xfa08a5['addEventListener']('submit',async _0x15f40a=>{const _0x56c31f=_0x1b7af7;_0x15f40a[_0x56c31f(0x2f6)]();const _0x54050d=document[_0x56c31f(0x1e2)]('demote-username')['value'][_0x56c31f(0x32c)](),_0x2b75d3=document[_0x56c31f(0x3bb)](_0x56c31f(0x2cd))['value'];if(!_0x54050d){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x54050d,_0x2b75d3),document['getElementById']('demote-modal')['classList']['remove']('active'),document[_0x56c31f(0x1e2)]('demote-username')[_0x56c31f(0x270)]='';}catch(_0x1b60ee){console[_0x56c31f(0x285)]('Error\x20in\x20demotion:',_0x1b60ee);}});});async function setCustomElo(_0x45bac6,_0x13b129,_0x4a370c){const _0x4b79a0=a4_0x131698;try{const _0x4f4463=auth[_0x4b79a0(0x31a)];if(!_0x4f4463||!isAdmin(_0x4f4463[_0x4b79a0(0x33d)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x22c7fd=_0x4a370c==='D2'?'playersD2':_0x4b79a0(0x27a),_0x57bff7=_0x4a370c==='D2'?_0x4b79a0(0x377):'eloHistory',_0x2e0cdd=collection(db,_0x22c7fd),_0x36321b=query(_0x2e0cdd,where('username','==',_0x45bac6)),_0x138e5f=await getDocs(_0x36321b);if(_0x138e5f['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x4a370c+'\x20ladder');const _0xb2ca7e=_0x138e5f[_0x4b79a0(0x276)][0x0],_0x81cd3c=_0xb2ca7e['data'](),_0x5bb2d6=_0x81cd3c['eloRating']||0x4b0,_0x3271a8=writeBatch(db);_0x3271a8['update'](doc(db,_0x22c7fd,_0xb2ca7e['id']),{'eloRating':_0x13b129,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x4f4463['email']});const _0x373665=doc(collection(db,_0x57bff7));return _0x3271a8['set'](_0x373665,{'player':_0x45bac6,'previousElo':_0x5bb2d6,'newElo':_0x13b129,'timestamp':serverTimestamp(),'type':_0x4b79a0(0x33c),'modifiedBy':_0x4f4463['email'],'gameMode':_0x4a370c}),await _0x3271a8['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x45bac6+'\x20was\x20updated\x20from\x20'+_0x5bb2d6+_0x4b79a0(0x35d)+_0x13b129,'success'),currentLadder===_0x4a370c&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x2c5ac1){console['error']('Error\x20setting\x20custom\x20ELO:',_0x2c5ac1);throw _0x2c5ac1;}}async function setUserRole(_0x320c20,_0x4571cc,_0xdf7e62){const _0xc962aa=a4_0x131698;try{const _0x2d66f3=auth[_0xc962aa(0x31a)];if(!_0x2d66f3||!isAdmin(_0x2d66f3['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x335128=_0x4571cc?_0x4571cc['trim']():null,_0x3bc61f=_0x335128?_0xdf7e62||'#808080':null,[_0x3a5bf1,_0x2751d7]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x320c20))),getDocs(query(collection(db,_0xc962aa(0x3a5)),where('username','==',_0x320c20)))]),_0x2d1c16=[];if(!_0x3a5bf1[_0xc962aa(0x3b9)])_0x2d1c16['push']({'ref':_0x3a5bf1['docs'][0x0]['ref'],'source':'D1'});if(!_0x2751d7['empty'])_0x2d1c16[_0xc962aa(0x2ff)]({'ref':_0x2751d7[_0xc962aa(0x276)][0x0]['ref'],'source':'D2'});if(_0x2d1c16[_0xc962aa(0x398)]===0x0){const [_0x254bc8,_0x5ae0ea]=await Promise[_0xc962aa(0x27c)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x320c20))),getDocs(query(collection(db,'userProfiles'),where(_0xc962aa(0x213),'==',_0x320c20)))]);if(!_0x254bc8['empty'])_0x2d1c16[_0xc962aa(0x2ff)]({'ref':_0x254bc8['docs'][0x0][_0xc962aa(0x380)],'source':'NonParticipant'});if(!_0x5ae0ea['empty'])_0x2d1c16['push']({'ref':_0x5ae0ea['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x2d1c16['length']===0x0)throw new Error('User\x20\x22'+_0x320c20+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x371e61=writeBatch(db);_0x2d1c16['forEach'](_0x4a8ea1=>{const _0x3d8cde=_0xc962aa;console['log']('Updating\x20role\x20for\x20'+_0x320c20+'\x20in\x20'+_0x4a8ea1[_0x3d8cde(0x230)]),!_0x335128?_0x371e61['update'](_0x4a8ea1['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x371e61['update'](_0x4a8ea1[_0x3d8cde(0x380)],{'roleName':_0x335128,'roleColor':_0x3bc61f,'roleAssignedBy':_0x2d66f3[_0x3d8cde(0x33d)],'roleAssignedAt':serverTimestamp()});}),await _0x371e61['commit']();const _0x542bc9=_0x335128?_0xc962aa(0x241)+_0x335128+'\x22\x20set':'Role\x20removed';return showNotification(_0x542bc9+'\x20for\x20user\x20\x22'+_0x320c20+'\x22',_0xc962aa(0x2dd)),!![];}catch(_0x18b4fa){console['error']('Error\x20setting\x20user\x20role:',_0x18b4fa),showNotification('Error:\x20'+_0x18b4fa[_0xc962aa(0x3c2)],'error');throw _0x18b4fa;}}function showNotification(_0x313a91,_0x423f84='info'){const _0x4bb09a=a4_0x131698,_0x3aca26=document[_0x4bb09a(0x3c4)]('div');_0x3aca26['className']='notification\x20'+_0x423f84,_0x3aca26['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x423f84)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x313a91+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20',document['body'][_0x4bb09a(0x3b8)](_0x3aca26),setTimeout(()=>{const _0x582e49=_0x4bb09a;_0x3aca26['classList']['add'](_0x582e49(0x216));},0xa);const _0x25aa6d=setTimeout(()=>{closeNotification(_0x3aca26);},0x1388);_0x3aca26[_0x4bb09a(0x3bb)]('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x25aa6d),closeNotification(_0x3aca26);});}function getNotificationIcon(_0x423d3e){const _0x3cfb70=a4_0x131698;switch(_0x423d3e){case'success':return _0x3cfb70(0x366);case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case _0x3cfb70(0x3a2):default:return'fa-info-circle';}}function closeNotification(_0x4b3a8e){const _0x5db9dc=a4_0x131698;_0x4b3a8e['classList'][_0x5db9dc(0x3c0)]('active'),setTimeout(()=>{_0x4b3a8e['remove']();},0x12c);}function setupUserRolesSection(){const _0x47a279=a4_0x131698,_0x41cfcd=document['getElementById']('load-users-data');_0x41cfcd&&_0x41cfcd['addEventListener'](_0x47a279(0x389),function(){const _0x5a503e=_0x47a279;this['classList']['add']('loading'),this[_0x5a503e(0x3f9)]=_0x5a503e(0x296),loadUsersWithRoles()['then'](()=>{const _0x5b7151=_0x5a503e;this['classList'][_0x5b7151(0x3c0)]('loading'),this['innerHTML']=_0x5b7151(0x259);})['catch'](_0x129401=>{const _0x61a73a=_0x5a503e;console['error'](_0x61a73a(0x261),_0x129401),this['classList']['remove']('loading'),this[_0x61a73a(0x3f9)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x15cacd=document['getElementById']('add-new-role-btn');_0x15cacd&&_0x15cacd[_0x47a279(0x3f5)]('click',()=>{const _0x1779a0=_0x47a279,_0x4b6c6d=document['getElementById']('set-role-modal');_0x4b6c6d&&_0x4b6c6d['classList'][_0x1779a0(0x390)](_0x1779a0(0x216));});const _0x5cbf23=document['getElementById'](_0x47a279(0x223));_0x5cbf23&&_0x5cbf23['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x248758=document['getElementById']('role-filter');_0x248758&&_0x248758['addEventListener'](_0x47a279(0x1e6),filterUsersTable);}async function loadUsersWithRoles(){const _0x1b4962=a4_0x131698,_0x4a8147=document['getElementById']('users-table-body');if(!_0x4a8147)return;_0x4a8147['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x5d72a9,_0x32488b,_0x51c8ef,_0x13bd5b]=await Promise['all']([getDocs(collection(db,_0x1b4962(0x27a))),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x2b7b5d=new Map();function _0xe7c4e8(_0x5334bf,_0x4f30e1){_0x5334bf['forEach'](_0x3f88ce=>{const _0x38a3db=a4_0x2b62,_0x8fcd=_0x3f88ce['data']();if(!_0x8fcd['username'])return;if(!_0x2b7b5d['has'](_0x8fcd['username']))_0x2b7b5d['set'](_0x8fcd['username'],{'username':_0x8fcd['username'],'roleName':_0x8fcd['roleName']||null,'roleColor':_0x8fcd['roleColor']||null,'roleAssignedBy':_0x8fcd['roleAssignedBy']||null,'roleAssignedAt':_0x8fcd['roleAssignedAt']||null,'sources':[_0x4f30e1]});else{const _0x391f4f=_0x2b7b5d['get'](_0x8fcd[_0x38a3db(0x213)]);_0x8fcd['roleName']&&(!_0x391f4f['roleName']||_0x4f30e1==='D1'||_0x4f30e1==='D2')&&(_0x391f4f['roleName']=_0x8fcd[_0x38a3db(0x298)],_0x391f4f['roleColor']=_0x8fcd['roleColor'],_0x391f4f['roleAssignedBy']=_0x8fcd['roleAssignedBy'],_0x391f4f['roleAssignedAt']=_0x8fcd['roleAssignedAt']),!_0x391f4f['sources'][_0x38a3db(0x30c)](_0x4f30e1)&&_0x391f4f['sources']['push'](_0x4f30e1);}});}_0xe7c4e8(_0x5d72a9,'D1'),_0xe7c4e8(_0x32488b,'D2'),_0xe7c4e8(_0x51c8ef,'Non-Participant'),_0xe7c4e8(_0x13bd5b,'Profile');const _0x122b28=Array['from'](_0x2b7b5d[_0x1b4962(0x315)]())[_0x1b4962(0x3a0)]((_0x25d065,_0x106a1f)=>_0x25d065['username']['localeCompare'](_0x106a1f[_0x1b4962(0x213)]));if(_0x122b28['length']===0x0){_0x4a8147[_0x1b4962(0x3f9)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x4a8147['innerHTML']='',_0x122b28[_0x1b4962(0x206)](_0x38b571=>{const _0xda1d79=_0x1b4962,_0x2530ce=document[_0xda1d79(0x3c4)]('tr');_0x2530ce['dataset'][_0xda1d79(0x213)]=_0x38b571['username'],_0x2530ce[_0xda1d79(0x283)]['roleName']=_0x38b571['roleName']||'',_0x2530ce[_0xda1d79(0x283)]['roleColor']=_0x38b571['roleColor']||'#808080';const _0xb3cb7c=_0x38b571['roleAssignedAt']?new Date(_0x38b571['roleAssignedAt'][_0xda1d79(0x347)]*0x3e8)['toLocaleDateString']():'N/A',_0x4fb7a8=_0x38b571['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x38b571['roleColor']+';\x20color:\x20'+getContrastColor(_0x38b571[_0xda1d79(0x3c5)])+_0xda1d79(0x402)+_0x38b571['roleName']+_0xda1d79(0x40f):'<span\x20class=\x22no-role\x22>None</span>';_0x2530ce['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x38b571['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x38b571['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4fb7a8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x38b571['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xb3cb7c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x38b571['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x38b571[_0xda1d79(0x298)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x38b571['username']+_0xda1d79(0x2c2):'')+_0xda1d79(0x3e7),_0x4a8147['appendChild'](_0x2530ce);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x2172eb=>{_0x2172eb['addEventListener']('click',()=>{const _0x44fb92=a4_0x2b62,_0x57b344=_0x2172eb[_0x44fb92(0x283)]['username'];openRoleEditModal(_0x57b344);});}),document['querySelectorAll']('.remove-role-btn')[_0x1b4962(0x206)](_0x44f7ec=>{const _0x232a2c=_0x1b4962;_0x44f7ec[_0x232a2c(0x3f5)](_0x232a2c(0x389),()=>{const _0x321d25=_0x232a2c,_0x256660=_0x44f7ec['dataset'][_0x321d25(0x213)];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x256660+'?')&&setUserRole(_0x256660,null,null)['then'](()=>loadUsersWithRoles())[_0x321d25(0x2e3)](_0x49d429=>console['error']('Error\x20removing\x20role:',_0x49d429));});});}catch(_0x268a5d){console[_0x1b4962(0x285)]('Error\x20loading\x20users:',_0x268a5d),_0x4a8147[_0x1b4962(0x3f9)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x18607b){const _0xaf8227=a4_0x131698;console[_0xaf8227(0x24d)](_0xaf8227(0x2f5),_0x18607b);const _0x2ea235=document['getElementById']('set-role-modal'),_0x322681=document['getElementById']('role-username'),_0x5abddd=document['getElementById']('user-role');if(!_0x2ea235){console[_0xaf8227(0x285)](_0xaf8227(0x25a)),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console[_0xaf8227(0x24d)](_0xaf8227(0x386),_0x2ea235);_0x322681?(_0x322681[_0xaf8227(0x270)]=_0x18607b,console['log']('Username\x20input\x20set\x20to:\x20'+_0x18607b)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x2d8a42=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x18607b+'\x22]');if(_0x2d8a42&&_0x5abddd){const _0x2c3347=_0x2d8a42['dataset']['role'];_0x5abddd['value']=_0x2c3347==='none'?'':_0x2c3347,console['log']('Role\x20select\x20set\x20to:\x20'+_0x5abddd['value']+'\x20(based\x20on\x20data-role:\x20'+_0x2c3347+')');}else{if(!_0x2d8a42)console['warn'](_0xaf8227(0x1d3)+_0x18607b+_0xaf8227(0x1e0));if(!_0x5abddd)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x5abddd)_0x5abddd['value']='';}console[_0xaf8227(0x24d)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x2ea235['classList'][_0xaf8227(0x390)](_0xaf8227(0x216));const _0x910266=document['getElementById']('cancel-role-btn');_0x910266?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x910266[_0xaf8227(0x40e)]('click',closeModalHandler),_0x910266['addEventListener'](_0xaf8227(0x389),closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x2ea235['removeEventListener']('click',closeModalBackgroundHandler),_0x2ea235['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x5c8ecf){_0x5c8ecf['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x2c9017=a4_0x131698,_0x1f4d15=document['getElementById'](_0x2c9017(0x31b));_0x1f4d15&&(_0x1f4d15['classList'][_0x2c9017(0x3c0)]('active'),_0x1f4d15['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x32739c=a4_0x131698,_0x109cc3=document[_0x32739c(0x1e2)]('user-search')?.['value']['toLowerCase']()||'',_0x3fa219=document['getElementById']('role-filter')?.[_0x32739c(0x270)]||'all',_0x434406=document['querySelectorAll']('#users-table-body\x20tr');let _0x29a5c1=0x0;_0x434406[_0x32739c(0x206)](_0x4e6e5d=>{const _0x56571a=_0x32739c;if(_0x4e6e5d['querySelector'](_0x56571a(0x2ac))||_0x4e6e5d['querySelector']('.empty-state')||_0x4e6e5d[_0x56571a(0x3bb)](_0x56571a(0x253)))return;const _0x586164=_0x4e6e5d['dataset']['username']?.['toLowerCase']()||'',_0x33dc21=_0x4e6e5d['dataset']['role']||'none',_0x50732c=_0x586164[_0x56571a(0x30c)](_0x109cc3),_0x4ce902=_0x3fa219===_0x56571a(0x27c)||_0x33dc21===_0x3fa219;_0x50732c&&_0x4ce902?(_0x4e6e5d['style'][_0x56571a(0x26a)]='',_0x29a5c1++):_0x4e6e5d['style'][_0x56571a(0x26a)]='none';});if(_0x29a5c1===0x0&&_0x434406[_0x32739c(0x398)]>0x0){const _0x3bdea0=document['getElementById']('users-table-body');if(_0x3bdea0){if(!_0x3bdea0[_0x32739c(0x3bb)]('.no-results')){const _0x1ff21f=document[_0x32739c(0x3c4)]('tr');_0x1ff21f[_0x32739c(0x3e9)]['add'](_0x32739c(0x263)),_0x1ff21f[_0x32739c(0x3f9)]=_0x32739c(0x359),_0x3bdea0['appendChild'](_0x1ff21f);}}}else{const _0x4c4a0f=document['querySelector']('.no-results');_0x4c4a0f&&_0x4c4a0f['remove']();}}function setupManageArticlesSection(){const _0x36dc83=a4_0x131698,_0x134463=document['getElementById']('load-articles-data');_0x134463&&_0x134463['addEventListener']('click',function(){this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x473ca9=a4_0x2b62;this['classList']['remove'](_0x473ca9(0x246)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x36af04=>{const _0xbc8da7=a4_0x2b62;console['error']('Error\x20loading\x20articles:',_0x36af04),this['classList']['remove'](_0xbc8da7(0x246)),this[_0xbc8da7(0x3f9)]=_0xbc8da7(0x2b5),setTimeout(()=>{const _0x2a6bbd=_0xbc8da7;this[_0x2a6bbd(0x3f9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x548152=document['getElementById'](_0x36dc83(0x200));_0x548152?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x548152[_0x36dc83(0x217)]['display']='block',_0x548152['addEventListener']('click',()=>{openArticleModal();})):console[_0x36dc83(0x285)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x21df8f=document['getElementById']('article-form');_0x21df8f&&_0x21df8f['addEventListener']('submit',_0x3c8060=>{_0x3c8060['preventDefault'](),saveArticle();});const _0x3d2abe=document['getElementById'](_0x36dc83(0x304));_0x3d2abe&&_0x3d2abe['addEventListener'](_0x36dc83(0x389),()=>{closeArticleModal();});const _0x5c511b=document['querySelector']('#article-modal\x20.close-btn');_0x5c511b&&_0x5c511b['addEventListener'](_0x36dc83(0x389),()=>{closeArticleModal();});const _0x96c00f=document['getElementById']('article-modal');_0x96c00f&&_0x96c00f['addEventListener']('click',_0x558f5b=>{_0x558f5b['target']===_0x96c00f&&closeArticleModal();});}async function loadArticles(){const _0x477249=a4_0x131698,_0x13b1c1=document[_0x477249(0x1e2)]('articles-table-body');if(!_0x13b1c1)return;_0x13b1c1[_0x477249(0x3f9)]=_0x477249(0x2b7);try{const _0x30104c=collection(db,'articles'),_0x819b67=query(_0x30104c,orderBy(_0x477249(0x391),'desc')),_0x125f7f=await getDocs(_0x819b67);if(_0x125f7f['empty']){_0x13b1c1[_0x477249(0x3f9)]='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x13b1c1[_0x477249(0x3f9)]='',_0x125f7f['forEach'](_0x345883=>{const _0x141188=_0x477249,_0x7b2833=_0x345883['data'](),_0x3edcb4=document['createElement']('tr'),_0x2dfdcb=_0x7b2833['createdAt']?new Date(_0x7b2833['createdAt'][_0x141188(0x347)]*0x3e8)[_0x141188(0x3f3)]():'N/A';_0x3edcb4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x7b2833['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x7b2833[_0x141188(0x36a)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2dfdcb+_0x141188(0x37a)+_0x345883['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x345883['id']+_0x141188(0x1f1),_0x13b1c1['appendChild'](_0x3edcb4);}),setupArticleActionButtons();}catch(_0x1e4c94){console['error']('Error\x20loading\x20articles:',_0x1e4c94),_0x13b1c1['innerHTML']=_0x477249(0x2bc)+_0x1e4c94['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x18587a=a4_0x131698;document['querySelectorAll']('.edit-article-btn')[_0x18587a(0x206)](_0x148321=>{_0x148321['addEventListener']('click',async _0x2d1660=>{const _0x45880d=_0x2d1660['currentTarget']['dataset']['id'];openArticleModal(_0x45880d);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x2a637d=>{const _0x5140f7=_0x18587a;_0x2a637d[_0x5140f7(0x3f5)]('click',async _0x1ef76d=>{const _0x48f709=_0x1ef76d['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x48f709);});});}function openArticleModal(_0x18353b=null){const _0x49676b=a4_0x131698,_0x1e864e=document['getElementById'](_0x49676b(0x1f6)),_0x3c116e=document[_0x49676b(0x1e2)]('article-modal-title'),_0xe0864d=document['getElementById'](_0x49676b(0x2b9)),_0x29e446=document['getElementById']('article-id');_0xe0864d['reset'](),_0x29e446[_0x49676b(0x270)]='';if(_0x18353b)_0x3c116e[_0x49676b(0x3ae)]='Edit\x20Article',_0x29e446['value']=_0x18353b,loadArticleData(_0x18353b);else{_0x3c116e['textContent']=_0x49676b(0x338);const _0x1901fd=auth['currentUser'];if(_0x1901fd){const _0x2fb851=document['getElementById']('article-author');if(_0x2fb851&&_0x1901fd['displayName'])_0x2fb851['value']=_0x1901fd['displayName'];else _0x2fb851&&(_0x2fb851['value']=_0x1901fd['email']);}}_0x1e864e[_0x49676b(0x3e9)]['add']('active');}async function loadArticleData(_0xf6c29f){const _0x17f9dc=a4_0x131698;try{const _0x49a7f8=doc(db,'articles',_0xf6c29f),_0x53666a=await getDoc(_0x49a7f8);if(!_0x53666a['exists']()){showNotification('Article\x20not\x20found',_0x17f9dc(0x285));return;}const _0x309ad1=_0x53666a['data']();document['getElementById'](_0x17f9dc(0x3ba))['value']=_0x309ad1['title']||'',document['getElementById']('article-author')['value']=_0x309ad1['author']||'',document['getElementById'](_0x17f9dc(0x31e))[_0x17f9dc(0x270)]=_0x309ad1[_0x17f9dc(0x1c0)]||'',document[_0x17f9dc(0x1e2)]('article-content')['value']=_0x309ad1['content']||'';}catch(_0x538399){console['error'](_0x17f9dc(0x34f),_0x538399),showNotification('Failed\x20to\x20load\x20article\x20data',_0x17f9dc(0x285));}}async function saveArticle(){const _0x81be58=a4_0x131698;try{const _0x45920d=document[_0x81be58(0x1e2)]('article-id')['value'],_0x33c699=document[_0x81be58(0x1e2)]('article-title')['value']['trim'](),_0x30dcd0=document[_0x81be58(0x1e2)]('article-author')['value']['trim'](),_0x38b73c=document[_0x81be58(0x1e2)]('article-image-url')['value']['trim'](),_0x46de19=document['getElementById']('article-content')['value']['trim']();if(!_0x33c699||!_0x46de19){showNotification('Title\x20and\x20content\x20are\x20required',_0x81be58(0x285));return;}const _0x25af58=auth['currentUser'];if(!_0x25af58){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles',_0x81be58(0x285));return;}const _0xa3de57={'title':_0x33c699,'author':_0x30dcd0,'imageUrl':_0x38b73c||null,'content':_0x46de19,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x25af58[_0x81be58(0x33d)]};!_0x45920d?(_0xa3de57[_0x81be58(0x391)]=serverTimestamp(),_0xa3de57['createdBy']=_0x25af58[_0x81be58(0x33d)],await addDoc(collection(db,'articles'),_0xa3de57),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x45920d),_0xa3de57),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x530d62){console['error'](_0x81be58(0x256),_0x530d62),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x530d62['message'],_0x81be58(0x285));}}function closeArticleModal(){const _0x42c0d7=a4_0x131698,_0x1ed00f=document['getElementById']('article-modal');_0x1ed00f&&_0x1ed00f['classList']['remove'](_0x42c0d7(0x216));}async function confirmDeleteArticle(_0x2d4d7f){const _0x19b858=a4_0x131698;if(confirm(_0x19b858(0x407)))try{await deleteDoc(doc(db,'articles',_0x2d4d7f)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x58f986){console['error']('Error\x20deleting\x20article:',_0x58f986),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x58f986[_0x19b858(0x3c2)],'error');}}function setupTrophyManagementSection(){const _0x1f4ceb=a4_0x131698,_0x2ec121=document['getElementById']('load-trophies-data');_0x2ec121&&_0x2ec121['addEventListener']('click',function(){const _0x212395=a4_0x2b62;this['classList']['add']('loading'),this['innerHTML']=_0x212395(0x296);const _0x27ed06=document[_0x212395(0x1e2)]('assign-trophy-image');_0x27ed06&&(_0x27ed06['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x217fee=_0x212395;this[_0x217fee(0x3e9)]['remove']('loading'),this[_0x217fee(0x3f9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x529bd0=>{const _0x33d38a=_0x212395;console['error']('Error\x20loading\x20trophies:',_0x529bd0),this['classList'][_0x33d38a(0x3c0)]('loading'),this[_0x33d38a(0x3f9)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x166f9c=document[_0x1f4ceb(0x1e2)]('create-new-trophy-btn');_0x166f9c&&_0x166f9c['addEventListener']('click',()=>{openTrophyModal();});const _0x344a27=document['getElementById'](_0x1f4ceb(0x273));_0x344a27&&_0x344a27['addEventListener'](_0x1f4ceb(0x328),_0x3cf379=>{_0x3cf379['preventDefault'](),saveTrophyDefinition();});const _0xa2f32c=document['getElementById']('cancel-trophy-btn');_0xa2f32c&&_0xa2f32c['addEventListener'](_0x1f4ceb(0x389),()=>{closeTrophyModal();});document[_0x1f4ceb(0x35f)]('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x176007=>{const _0x50ae93=_0x1f4ceb;_0x176007[_0x50ae93(0x3f5)]('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x1edc33=document['getElementById'](_0x1f4ceb(0x307));_0x1edc33&&_0x1edc33['addEventListener'](_0x1f4ceb(0x389),_0x26fbf5=>{_0x26fbf5['target']===_0x1edc33&&closeTrophyModal();});const _0x3473f4=document['getElementById'](_0x1f4ceb(0x3d3));_0x3473f4&&_0x3473f4[_0x1f4ceb(0x3f5)]('click',_0x3b8a16=>{_0x3b8a16['target']===_0x3473f4&&closeAssignTrophyModal();});const _0x5489c6=document[_0x1f4ceb(0x1e2)](_0x1f4ceb(0x2a0));_0x5489c6&&_0x5489c6['addEventListener']('submit',_0x51b34c=>{_0x51b34c['preventDefault'](),assignTrophyToPlayer();});const _0x47216e=document['getElementById']('cancel-assign-btn');_0x47216e&&_0x47216e['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x12e403=document['getElementById']('trophy-image-url');_0x12e403&&(_0x12e403['addEventListener']('input',updateTrophyImagePreview),_0x12e403['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x7170a7=a4_0x131698,_0x3a1a23=document[_0x7170a7(0x1e2)]('trophy-image-url')['value']['trim'](),_0x2565b8=document['getElementById'](_0x7170a7(0x2f9));if(!_0x2565b8){const _0x4dc7f7=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x270955=document['createElement'](_0x7170a7(0x222));_0x270955['id']='trophy-image-preview',_0x270955['className']='trophy-preview-container',_0x4dc7f7['appendChild'](_0x270955);const _0x580cb6=document['createElement']('img');_0x580cb6['id']=_0x7170a7(0x308),_0x580cb6['alt']=_0x7170a7(0x306),_0x580cb6['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x270955['appendChild'](_0x580cb6);}const _0x516c81=document[_0x7170a7(0x1e2)](_0x7170a7(0x308));_0x3a1a23?(_0x516c81['src']=_0x3a1a23,_0x516c81['style']['display']='block',_0x516c81[_0x7170a7(0x3e9)][_0x7170a7(0x3c0)]('error')):(_0x516c81['src']=DEFAULT_TROPHY_IMAGE,_0x516c81[_0x7170a7(0x217)]['display']='block');}async function loadTrophyDefinitions(){const _0x5781df=a4_0x131698,_0x2c7ee9=document['getElementById']('trophies-table-body');if(!_0x2c7ee9)return;_0x2c7ee9[_0x5781df(0x3f9)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x49275d=collection(db,'trophyDefinitions'),_0x580200=query(_0x49275d,orderBy('createdAt','desc')),_0x4062c6=await getDocs(_0x580200);if(_0x4062c6['empty']){_0x2c7ee9[_0x5781df(0x3f9)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x2c7ee9['innerHTML']='',_0x4062c6[_0x5781df(0x206)](_0x3b0bc4=>{const _0x3aa7af=_0x5781df,_0x159d63=_0x3b0bc4['data'](),_0x10d503=document[_0x3aa7af(0x3c4)]('tr'),_0x10d9f5=_0x159d63[_0x3aa7af(0x391)]?new Date(_0x159d63['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x10d503['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x159d63['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x159d63[_0x3aa7af(0x3db)]+_0x3aa7af(0x2c8)+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x159d63[_0x3aa7af(0x3db)]||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x159d63[_0x3aa7af(0x2cb)]||_0x3aa7af(0x1ce))+'\x22>'+(_0x159d63['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x10d9f5+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x3b0bc4['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x3b0bc4['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x3b0bc4['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2c7ee9[_0x3aa7af(0x3b8)](_0x10d503);}),setupTrophyActionButtons();}catch(_0x268f11){console[_0x5781df(0x285)](_0x5781df(0x36e),_0x268f11),_0x2c7ee9['innerHTML']=_0x5781df(0x310)+_0x268f11['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x29f6c8=a4_0x131698;document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x1597b8=>{_0x1597b8['addEventListener']('click',_0x25c906=>{const _0x752aae=_0x25c906['currentTarget']['dataset']['id'];openTrophyModal(_0x752aae);});}),document['querySelectorAll'](_0x29f6c8(0x2cf))['forEach'](_0x96629d=>{const _0x8c01f=_0x29f6c8;_0x96629d[_0x8c01f(0x3f5)]('click',_0x88ab0e=>{const _0x54fcd9=_0x8c01f,_0x71f69b=_0x88ab0e[_0x54fcd9(0x352)]['dataset']['id'];openAssignTrophyModal(_0x71f69b);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x5c39fd=>{_0x5c39fd['addEventListener']('click',_0xec91b1=>{const _0x19982b=_0xec91b1['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x19982b);});});}function openTrophyModal(_0x5d2216=null){const _0x9308f4=a4_0x131698,_0x532666=document[_0x9308f4(0x1e2)]('trophy-modal'),_0x4cc237=document[_0x9308f4(0x1e2)]('trophy-modal-title'),_0x51107b=document[_0x9308f4(0x1e2)]('trophy-form'),_0x292b58=document['getElementById']('trophy-id');_0x51107b['reset'](),_0x292b58[_0x9308f4(0x270)]='';const _0x184a0c=document['getElementById'](_0x9308f4(0x308));_0x184a0c&&(_0x184a0c['src']=DEFAULT_TROPHY_IMAGE,_0x184a0c['classList']['remove']('error')),_0x5d2216?(_0x4cc237['textContent']='Edit\x20Trophy',_0x292b58['value']=_0x5d2216,loadTrophyData(_0x5d2216)):_0x4cc237[_0x9308f4(0x3ae)]=_0x9308f4(0x3cc),_0x532666['classList']['add']('active');}async function loadTrophyData(_0x303d6e){const _0xaeb1cf=a4_0x131698;try{const _0x45799c=doc(db,'trophyDefinitions',_0x303d6e),_0x261b5b=await getDoc(_0x45799c);if(!_0x261b5b[_0xaeb1cf(0x293)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0xef488=_0x261b5b['data']();document['getElementById'](_0xaeb1cf(0x214))['value']=_0xef488[_0xaeb1cf(0x3db)]||'',document['getElementById']('trophy-description')['value']=_0xef488['description']||'',document['getElementById']('trophy-image-url')[_0xaeb1cf(0x270)]=_0xef488['image']||'',document['getElementById']('trophy-rarity')[_0xaeb1cf(0x270)]=_0xef488['rarity']||_0xaeb1cf(0x1ce),updateTrophyImagePreview();}catch(_0x575bcd){console['error']('Error\x20loading\x20trophy\x20data:',_0x575bcd),showNotification(_0xaeb1cf(0x356),'error');}}async function saveTrophyDefinition(){const _0x25e16c=a4_0x131698;try{const _0x30a86d=document[_0x25e16c(0x1e2)]('trophy-id')[_0x25e16c(0x270)],_0x2a341e=document[_0x25e16c(0x1e2)]('trophy-name')['value'][_0x25e16c(0x32c)](),_0x40d68a=document['getElementById'](_0x25e16c(0x23e))[_0x25e16c(0x270)]['trim'](),_0x41aaad=document['getElementById']('trophy-image-url')['value'][_0x25e16c(0x32c)](),_0x15d02f=document['getElementById']('trophy-rarity')[_0x25e16c(0x270)];if(!_0x2a341e||!_0x40d68a||!_0x41aaad){showNotification(_0x25e16c(0x271),_0x25e16c(0x285));return;}const _0x54b5e2=auth['currentUser'];if(!_0x54b5e2){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies',_0x25e16c(0x285));return;}const _0xad1420={'name':_0x2a341e,'description':_0x40d68a,'image':_0x41aaad,'rarity':_0x15d02f,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x54b5e2['email']};!_0x30a86d?(_0xad1420['createdAt']=serverTimestamp(),_0xad1420[_0x25e16c(0x343)]=_0x54b5e2['email'],await addDoc(collection(db,'trophyDefinitions'),_0xad1420),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x30a86d),_0xad1420),showNotification(_0x25e16c(0x291),_0x25e16c(0x2dd))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x276264){console['error']('Error\x20saving\x20trophy:',_0x276264),showNotification(_0x25e16c(0x2fc)+_0x276264[_0x25e16c(0x3c2)],'error');}}function closeTrophyModal(){const _0x283ee6=a4_0x131698,_0x2ae117=document[_0x283ee6(0x1e2)](_0x283ee6(0x307));_0x2ae117&&_0x2ae117['classList']['remove'](_0x283ee6(0x216));}async function confirmDeleteTrophy(_0x30cac2){const _0x301b37=a4_0x131698;if(!_0x30cac2){console[_0x301b37(0x285)](_0x301b37(0x3d9));return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x25b2fd=auth['currentUser'];if(!_0x25b2fd){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x30cac2),await deleteDoc(doc(db,_0x301b37(0x346),_0x30cac2)),showNotification(_0x301b37(0x288),'success'),loadTrophyDefinitions();}catch(_0x136f9c){console[_0x301b37(0x285)]('Error\x20deleting\x20trophy\x20definition:',_0x136f9c),showNotification(_0x301b37(0x301)+_0x136f9c['message'],'error');}}async function openAssignTrophyModal(_0x28f5c1){const _0x315f9c=a4_0x131698;try{const _0x570327=doc(db,'trophyDefinitions',_0x28f5c1),_0x30f39e=await getDoc(_0x570327);if(!_0x30f39e['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x38c486=_0x30f39e[_0x315f9c(0x379)]();document['getElementById']('assign-trophy-id')['value']=_0x28f5c1,document['getElementById']('assign-trophy-name')['value']=_0x38c486[_0x315f9c(0x3db)],document['getElementById']('assign-trophy-image')[_0x315f9c(0x228)]=_0x38c486['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x38c486[_0x315f9c(0x3db)]||'Unnamed\x20Trophy',document[_0x315f9c(0x1e2)]('assign-trophy-description')['textContent']=_0x38c486['description']||'No\x20description';const _0x47391b=document['getElementById']('assign-trophy-rarity');_0x47391b['textContent']=_0x38c486['rarity']||'common',_0x47391b[_0x315f9c(0x3bf)]='trophy-rarity\x20'+(_0x38c486['rarity']||'common');const _0x30fdde=document[_0x315f9c(0x1e2)](_0x315f9c(0x3d3));_0x30fdde['classList']['add']('active');}catch(_0x4f7692){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x4f7692),showNotification(_0x315f9c(0x356),'error');}}function closeAssignTrophyModal(){const _0x535967=a4_0x131698,_0x44e3aa=document['getElementById']('assign-trophy-modal');_0x44e3aa&&_0x44e3aa[_0x535967(0x3e9)][_0x535967(0x3c0)]('active');}async function assignTrophyToPlayer(){const _0x2c947d=a4_0x131698;try{const _0x47ae69=document['getElementById']('assign-trophy-id')[_0x2c947d(0x270)],_0x596736=document['getElementById']('assign-trophy-name')[_0x2c947d(0x270)],_0x38ed13=document['getElementById'](_0x2c947d(0x326))[_0x2c947d(0x270)][_0x2c947d(0x32c)](),_0x275a88=document[_0x2c947d(0x3bb)]('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x47ae69||!_0x38ed13){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required',_0x2c947d(0x285));return;}const _0x1e5af7=auth['currentUser'];if(!_0x1e5af7){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x5ede62=null,_0x3cfba5=null,_0x1ff412=null;if(_0x275a88==='non-participant'){const _0x5d72fb=collection(db,_0x2c947d(0x385)),_0x80cbb5=query(_0x5d72fb,where('username','==',_0x38ed13)),_0x3cd54e=await getDocs(_0x80cbb5);!_0x3cd54e[_0x2c947d(0x3b9)]&&(_0x5ede62=_0x3cd54e['docs'][0x0],_0x3cfba5=_0x5ede62['id'],_0x1ff412=_0x5ede62[_0x2c947d(0x379)]());}else{const _0x1ac383=_0x275a88==='D1'?'players':_0x275a88==='D2'?_0x2c947d(0x3a5):'playersD3',_0x4ae35e=collection(db,_0x1ac383),_0x353f1b=query(_0x4ae35e,where('username','==',_0x38ed13)),_0xb450b3=await getDocs(_0x353f1b);!_0xb450b3['empty']&&(_0x5ede62=_0xb450b3['docs'][0x0],_0x3cfba5=_0x5ede62['id'],_0x1ff412=_0x5ede62[_0x2c947d(0x379)]());}if(!_0x5ede62){showNotification(_0x2c947d(0x224)+_0x38ed13+'\x22\x20not\x20found\x20in\x20'+(_0x275a88==='non-participant'?'non-participants':_0x275a88+'\x20ladder'),_0x2c947d(0x285));return;}const _0x3586f6=collection(db,_0x2c947d(0x21f)),_0x211d48=query(_0x3586f6,where('userId','==',_0x3cfba5),where('trophyId','==',_0x47ae69)),_0x425e94=await getDocs(_0x211d48);if(!_0x425e94[_0x2c947d(0x3b9)]){showNotification('Player\x20\x22'+_0x38ed13+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x3cfba5,'playerUsername':_0x38ed13,'trophyId':_0x47ae69,'awardedAt':serverTimestamp(),'awardedBy':_0x1e5af7['email'],'ladder':_0x275a88}),showNotification('Trophy\x20\x22'+_0x596736+'\x22\x20awarded\x20to\x20'+_0x38ed13,'success'),closeAssignTrophyModal();}catch(_0x319630){console[_0x2c947d(0x285)]('Error\x20assigning\x20trophy:',_0x319630),showNotification(_0x2c947d(0x249)+_0x319630['message'],'error');}}function setupInactivePlayersSection(){const _0x5c398d=a4_0x131698,_0x45941f=document['getElementById'](_0x5c398d(0x358));_0x45941f&&_0x45941f[_0x5c398d(0x3f5)](_0x5c398d(0x1e6),function(){const _0x29c7fe=document['getElementById']('load-inactive-players-data');if(_0x29c7fe)_0x29c7fe['click']();});const _0x48aacc=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x800630=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x48aacc&&_0x800630&&(_0x48aacc[_0x5c398d(0x3f5)](_0x5c398d(0x1e6),function(){const _0x3cd979=_0x5c398d;if(this['checked']){currentLadder='D1';if(document['getElementById']('inactive-players')[_0x3cd979(0x217)]['display']!==_0x3cd979(0x3de)){const _0x139b9a=document['getElementById']('load-inactive-players-data');if(_0x139b9a)_0x139b9a['click']();}}}),_0x800630['addEventListener']('change',function(){const _0x4e1331=_0x5c398d;if(this[_0x4e1331(0x3f0)]){currentLadder='D2';if(document[_0x4e1331(0x1e2)](_0x4e1331(0x3aa))['style']['display']!=='none'){const _0x2d5f79=document[_0x4e1331(0x1e2)](_0x4e1331(0x281));if(_0x2d5f79)_0x2d5f79['click']();}}}));const _0x449640=document['getElementById'](_0x5c398d(0x2cc));_0x449640&&_0x449640['addEventListener']('input',debounce(function(){const _0x387a5a=_0x5c398d,_0x1077f7=_0x449640['value']['toLowerCase'](),_0x39f0d8=document['querySelectorAll'](_0x387a5a(0x215));_0x39f0d8['forEach'](_0x6a31ba=>{const _0x18524a=_0x387a5a;if(_0x6a31ba['querySelector']('.loading-cell')||_0x6a31ba['querySelector']('.empty-state')||_0x6a31ba['querySelector'](_0x18524a(0x253)))return;const _0x3f167a=_0x6a31ba['cells'][0x0]?.[_0x18524a(0x3ae)][_0x18524a(0x35e)]()||'',_0x55379c=_0x6a31ba['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x3f167a['includes'](_0x1077f7)||_0x55379c['includes'](_0x1077f7)?_0x6a31ba[_0x18524a(0x217)][_0x18524a(0x26a)]='':_0x6a31ba[_0x18524a(0x217)]['display']='none';});},0x12c)),document['addEventListener']('click',function(_0x20b18c){const _0x376d34=_0x5c398d;if(_0x20b18c['target']['closest']('.view-player-btn')){const _0x547fbc=_0x20b18c['target']['closest']('.view-player-btn'),_0x362ed9=_0x547fbc['dataset']['username'];_0x362ed9&&alert('View\x20player\x20details\x20for\x20'+_0x362ed9+_0x376d34(0x2ce));}}),console['log'](_0x5c398d(0x38c));}async function loadInactivePlayersData(){const _0x5f5514=a4_0x131698,_0x188cb2=document['getElementById'](_0x5f5514(0x334));if(!_0x188cb2)return;_0x188cb2['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x39d3c3=document['getElementById']('inactive-days-filter'),_0x135450=_0x39d3c3?parseInt(_0x39d3c3['value'])||0x0:0x0,_0x420d7d=collection(db,currentLadder==='D1'?'players':'playersD2'),_0xd9fff4=await getDocs(_0x420d7d);if(_0xd9fff4['empty']){_0x188cb2[_0x5f5514(0x3f9)]=_0x5f5514(0x371);return;}const _0x30308e=[];_0xd9fff4['forEach'](_0x329934=>{const _0x1c3549=_0x5f5514,_0x5848a6=_0x329934['data']();_0x30308e['push']({..._0x5848a6,'id':_0x329934['id'],'username':_0x5848a6['username']||_0x1c3549(0x3fd)});}),console[_0x5f5514(0x24d)](_0x5f5514(0x248)+_0x30308e[_0x5f5514(0x398)]+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x128481=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x3f0484=_0x30308e['map'](async _0xbd2653=>{const _0x491e95=_0x5f5514;try{const _0x57b291=collection(db,_0x128481),_0x28c0f8=query(_0x57b291,or(where('winnerUsername','==',_0xbd2653[_0x491e95(0x213)]),where('loserUsername','==',_0xbd2653['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0x2fd85b=await getDocs(_0x28c0f8);if(!_0x2fd85b['empty']){const _0x333d77=_0x2fd85b['docs'][0x0]['data'](),_0x516376=_0x333d77[_0x491e95(0x349)]?new Date(_0x333d77['approvedAt']['seconds']*0x3e8):null,_0x2182da=new Date(),_0x5b6427=_0x516376?Math['floor']((_0x2182da-_0x516376)/(0x3e8*0x3c*0x3c*0x18)):null,_0x39cad3=_0x333d77[_0x491e95(0x340)]===_0xbd2653['username']?_0x333d77['loserUsername']:_0x333d77['winnerUsername'],_0x17a742=_0x333d77[_0x491e95(0x340)]===_0xbd2653['username']?'Won':'Lost';return{..._0xbd2653,'lastMatch':{'date':_0x516376?_0x516376[_0x491e95(0x2a9)]():'N/A','opponent':_0x39cad3||_0x491e95(0x3bc),'result':_0x17a742,'timestamp':_0x516376||new Date(0x0),'daysSinceMatch':_0x5b6427||Number['MAX_SAFE_INTEGER']}};}else return{..._0xbd2653,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x1a0d7a){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0xbd2653['username']+':',_0x1a0d7a),{..._0xbd2653,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x2c9093=await Promise['all'](_0x3f0484);_0x2c9093['sort']((_0x443b3c,_0x13b803)=>_0x13b803['lastMatch']['daysSinceMatch']-_0x443b3c['lastMatch'][_0x5f5514(0x235)]);_0x135450>0x0&&(_0x2c9093=_0x2c9093['filter'](_0x612e60=>_0x612e60[_0x5f5514(0x400)]['daysSinceMatch']>=_0x135450));_0x188cb2['innerHTML']='';if(_0x2c9093[_0x5f5514(0x398)]===0x0){_0x188cb2[_0x5f5514(0x3f9)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x2c9093['forEach'](_0x1999f7=>{const _0x153740=_0x5f5514,_0x2ad358=document['createElement']('tr'),_0x4b07e7=_0x1999f7['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x1999f7['lastMatch']['daysSinceMatch']>0xe?_0x153740(0x22b):'';_0x2ad358['className']=_0x4b07e7,_0x2ad358['innerHTML']=_0x153740(0x26e)+_0x1999f7['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1999f7[_0x153740(0x361)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1999f7['lastMatch'][_0x153740(0x40d)]+_0x153740(0x286)+(_0x1999f7[_0x153740(0x400)]['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?_0x153740(0x25f):_0x1999f7['lastMatch'][_0x153740(0x235)])+_0x153740(0x286)+currentLadder+_0x153740(0x286)+(_0x1999f7['lastMatch']['date']===_0x153740(0x233)?'No\x20matches\x20found':_0x1999f7['lastMatch']['result']+'\x20vs\x20'+_0x1999f7['lastMatch'][_0x153740(0x21a)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x1999f7['username']+_0x153740(0x32d),_0x188cb2['appendChild'](_0x2ad358);}),console['log']('Displaying\x20'+_0x2c9093['length']+'\x20inactive\x20players');}catch(_0x28426f){console['error'](_0x5f5514(0x1da),_0x28426f),_0x188cb2['innerHTML']=_0x5f5514(0x2c7)+_0x28426f[_0x5f5514(0x3c2)]+'</td></tr>';}}function setupHighlightButtons(){const _0x4c9ba1=a4_0x131698;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x512d43=document['getElementById']('create-match-highlight-btn');_0x512d43&&_0x512d43['addEventListener']('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x4759e6=document['getElementById']('create-creator-highlight-btn');_0x4759e6&&_0x4759e6['addEventListener']('click',function(){const _0x4a36e1=a4_0x2b62;console['log'](_0x4a36e1(0x21c)),openHighlightModal('creator');});const _0x1c2f6f=document['getElementById'](_0x4c9ba1(0x34c));_0x1c2f6f&&_0x1c2f6f['addEventListener']('click',function(){const _0x556f9f=_0x4c9ba1;console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x556f9f(0x2e1));});}function openHighlightModal(_0xbd2e22='match'){const _0x3dd5cd=a4_0x131698;console[_0x3dd5cd(0x24d)](_0x3dd5cd(0x3f1)+_0xbd2e22);const _0x3415be=document['getElementById']('highlight-modal'),_0x38e6e1=document['getElementById']('highlight-form'),_0x5e9eb7=document['getElementById']('highlight-modal-title'),_0x54b9b5=document['getElementById']('highlight-id');if(!_0x3415be||!_0x38e6e1||!_0x5e9eb7){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x38e6e1['reset'](),_0x54b9b5[_0x3dd5cd(0x270)]='';const _0x221516=[_0x3dd5cd(0x3f4),'creator','achievement'],_0x11b201=!_0x221516['includes'](_0xbd2e22);if(_0x11b201){const _0x361f70=_0xbd2e22;_0x54b9b5['value']=_0x361f70,_0x5e9eb7['textContent']='Loading...',loadHighlightDataAdmin(_0x361f70);}else{const _0x4a22d2=_0xbd2e22;document[_0x3dd5cd(0x1e2)](_0x3dd5cd(0x229))[_0x3dd5cd(0x270)]=_0x4a22d2,_0x5e9eb7[_0x3dd5cd(0x3ae)]=_0x3dd5cd(0x32e)+getHighlightTypeName(_0x4a22d2),toggleHighlightFields(_0x4a22d2);const _0x1cce4a=auth[_0x3dd5cd(0x31a)];_0x1cce4a&&document['getElementById'](_0x3dd5cd(0x1e3))&&(document['getElementById'](_0x3dd5cd(0x1e3))[_0x3dd5cd(0x270)]=_0x1cce4a['displayName']||_0x1cce4a[_0x3dd5cd(0x33d)]);}_0x3415be[_0x3dd5cd(0x3e9)][_0x3dd5cd(0x390)]('active');}function toggleHighlightFields(_0x58d613){const _0x346f5d=a4_0x131698;console['log'](_0x346f5d(0x245)+_0x58d613);const _0x3c4729=document['getElementById']('highlight-form');if(!_0x3c4729)return;const _0x4b7556=_0x3c4729['querySelectorAll']('.form-group,\x20.form-row');_0x4b7556['forEach'](_0x51af64=>_0x51af64['style']['display']='none');const _0x5ba594=document['getElementById'](_0x346f5d(0x2eb));if(_0x5ba594)_0x5ba594['style']['display']='none';const _0x44a434=['highlight-title-container',_0x346f5d(0x279),'highlight-submitted-by-container'];_0x44a434['forEach'](_0x3bf177=>{const _0x5f564b=_0x346f5d,_0x5e4ddf=document['getElementById'](_0x3bf177);if(_0x5e4ddf)_0x5e4ddf[_0x5f564b(0x217)][_0x5f564b(0x26a)]='block';});if(_0x58d613==='match'){const _0xeb656e=['highlight-video-container','highlight-match-info-container','highlight-map-container',_0x346f5d(0x272),_0x346f5d(0x24a),_0x346f5d(0x297)];_0xeb656e['forEach'](_0x1939d5=>{const _0x1c2229=_0x346f5d,_0x2f5a23=document['getElementById'](_0x1939d5);_0x2f5a23&&(_0x1939d5===_0x1c2229(0x24a)?_0x2f5a23['style']['display']='flex':_0x2f5a23['style']['display']='block');});const _0x1911e3=document['getElementById']('highlight-video-id');if(_0x1911e3){_0x1911e3['required']=!![];const _0x204248=_0x1911e3['previousElementSibling'];if(_0x204248)_0x204248['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x5ba594)_0x5ba594[_0x346f5d(0x217)][_0x346f5d(0x26a)]=_0x346f5d(0x1fe);updateHighlightVideoPreview();}else{if(_0x58d613===_0x346f5d(0x268)){const _0x2ba269=['highlight-map-container',_0x346f5d(0x305),'highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x2ba269['forEach'](_0x2fb4e2=>{const _0x1efeb9=_0x346f5d,_0x18cd56=document[_0x1efeb9(0x1e2)](_0x2fb4e2);if(_0x18cd56)_0x18cd56['style']['display']=_0x1efeb9(0x1fe);});const _0x1a6462=document['getElementById']('highlight-video-id');if(_0x1a6462){_0x1a6462[_0x346f5d(0x29b)]=![];const _0x45bc8e=_0x1a6462[_0x346f5d(0x321)];if(_0x45bc8e)_0x45bc8e['innerHTML']=_0x346f5d(0x36c);}}else{if(_0x58d613==='achievement'){const _0x4ba8c7=[_0x346f5d(0x257),'highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container',_0x346f5d(0x275),'highlight-video-container'];_0x4ba8c7['forEach'](_0x321408=>{const _0x385319=_0x346f5d,_0x7046a8=document['getElementById'](_0x321408);if(_0x7046a8)_0x7046a8[_0x385319(0x217)]['display']='block';});const _0x5ca362=document['getElementById']('highlight-video-id');if(_0x5ca362){_0x5ca362['required']=![];const _0x5d59fd=_0x5ca362['previousElementSibling'];if(_0x5d59fd)_0x5d59fd['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x51875e){const _0x4e661c=a4_0x131698;try{const _0x1e2583=doc(db,'highlights',_0x51875e),_0x4f1d18=await getDoc(_0x1e2583);if(!_0x4f1d18['exists']()){showNotification(_0x4e661c(0x1d4),'error');return;}const _0x2a700b=_0x4f1d18['data'](),_0x3df547=_0x2a700b['type']||'match';document[_0x4e661c(0x1e2)]('highlight-modal-title')['textContent']=_0x4e661c(0x318)+getHighlightTypeName(_0x3df547),document['getElementById']('highlight-type')[_0x4e661c(0x270)]=_0x3df547,toggleHighlightFields(_0x3df547),document[_0x4e661c(0x1e2)]('highlight-title')[_0x4e661c(0x270)]=_0x2a700b['title']||'',document['getElementById']('highlight-description')[_0x4e661c(0x270)]=_0x2a700b['description']||'',document[_0x4e661c(0x1e2)]('highlight-submitted-by')['value']=_0x2a700b[_0x4e661c(0x368)]||'';_0x2a700b['videoId']&&(document['getElementById']('highlight-video-id')[_0x4e661c(0x270)]=_0x2a700b[_0x4e661c(0x1f0)],updateHighlightVideoPreview());if(_0x3df547==='match'){document['getElementById']('highlight-match-info')[_0x4e661c(0x270)]=_0x2a700b['matchInfo']||'',document['getElementById']('highlight-map')['value']=_0x2a700b[_0x4e661c(0x2de)]||'';if(_0x2a700b[_0x4e661c(0x384)]){const _0x323f02=new Date(_0x2a700b[_0x4e661c(0x384)]['seconds']*0x3e8);document['getElementById'](_0x4e661c(0x2e7))['value']=_0x323f02[_0x4e661c(0x3fb)]()['split']('T')[0x0];}document[_0x4e661c(0x1e2)](_0x4e661c(0x252))['value']=_0x2a700b['winnerName']||'',document[_0x4e661c(0x1e2)](_0x4e661c(0x3b0))['value']=_0x2a700b['winnerScore']||'',document[_0x4e661c(0x1e2)]('highlight-loser-name')['value']=_0x2a700b['loserName']||'',document['getElementById']('highlight-loser-score')['value']=_0x2a700b[_0x4e661c(0x1f5)]||'',document['getElementById']('highlight-match-link')['value']=_0x2a700b['matchLink']||'';}else{if(_0x3df547==='creator')document[_0x4e661c(0x1e2)]('highlight-map')['value']=_0x2a700b[_0x4e661c(0x2de)]||'',document['getElementById'](_0x4e661c(0x29f))['value']=_0x2a700b[_0x4e661c(0x205)]||'',document[_0x4e661c(0x1e2)]('highlight-map-version')[_0x4e661c(0x270)]=_0x2a700b['mapVersion']||'',document['getElementById'](_0x4e661c(0x289))['value']=_0x2a700b[_0x4e661c(0x258)]||'';else _0x3df547==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0x2a700b[_0x4e661c(0x3d5)]||'',document['getElementById'](_0x4e661c(0x21d))['value']=_0x2a700b[_0x4e661c(0x37e)]||'',document[_0x4e661c(0x1e2)]('highlight-achievement-details')['value']=_0x2a700b['achievementDetails']||'',document['getElementById']('highlight-player-profile')[_0x4e661c(0x270)]=_0x2a700b[_0x4e661c(0x1ec)]||'',document['getElementById']('highlight-achievement-image')['value']=_0x2a700b[_0x4e661c(0x244)]||'');}}catch(_0xf9380){console[_0x4e661c(0x285)](_0x4e661c(0x3d0),_0xf9380),showNotification('Error\x20loading\x20highlight:\x20'+_0xf9380[_0x4e661c(0x3c2)],'error');}}async function saveHighlight(){const _0x3ff38d=a4_0x131698;try{const _0x5e9806=document[_0x3ff38d(0x1e2)]('highlight-id')?.['value']||'',_0x17c964=document[_0x3ff38d(0x1e2)]('highlight-type')?.['value']||_0x3ff38d(0x3f4),_0x1a1039={'title':document['getElementById']('highlight-title')?.[_0x3ff38d(0x270)]?.['trim']()||'','description':document[_0x3ff38d(0x1e2)]('highlight-description')?.['value']?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x17c964};if(!_0x1a1039['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x17c964==='match'){_0x1a1039['matchInfo']=document['getElementById']('highlight-match-info')?.[_0x3ff38d(0x270)]?.['trim']()||'',_0x1a1039['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'';const _0x4e15f9=document[_0x3ff38d(0x1e2)](_0x3ff38d(0x2e7)),_0x485a96=_0x4e15f9?.['value']||'';_0x1a1039[_0x3ff38d(0x384)]=_0x485a96?Timestamp['fromDate'](new Date(_0x485a96)):null,_0x1a1039[_0x3ff38d(0x247)]=document['getElementById'](_0x3ff38d(0x252))?.[_0x3ff38d(0x270)]?.['trim']()||'',_0x1a1039[_0x3ff38d(0x1e9)]=document[_0x3ff38d(0x1e2)]('highlight-winner-score')?.['value']?.[_0x3ff38d(0x32c)]()||'',_0x1a1039['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.[_0x3ff38d(0x32c)]()||'',_0x1a1039['loserScore']=document[_0x3ff38d(0x1e2)]('highlight-loser-score')?.['value']?.[_0x3ff38d(0x32c)]()||'',_0x1a1039['matchLink']=document['getElementById']('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x1a1039[_0x3ff38d(0x1f0)]){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x17c964===_0x3ff38d(0x268)){_0x1a1039['map']=document['getElementById']('highlight-map')?.[_0x3ff38d(0x270)]?.[_0x3ff38d(0x32c)]()||'',_0x1a1039['mapCreator']=document[_0x3ff38d(0x1e2)](_0x3ff38d(0x29f))?.['value']?.['trim']()||'',_0x1a1039[_0x3ff38d(0x325)]=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x1a1039[_0x3ff38d(0x258)]=document['getElementById']('highlight-creator-image')?.['value']?.[_0x3ff38d(0x32c)]()||'';if(!_0x1a1039[_0x3ff38d(0x205)]){showNotification(_0x3ff38d(0x1d7),'error');return;}}else{if(_0x17c964===_0x3ff38d(0x2e1)){_0x1a1039['achievementPlayer']=document[_0x3ff38d(0x1e2)](_0x3ff38d(0x31c))?.['value']?.[_0x3ff38d(0x32c)]()||'',_0x1a1039['achievementType']=document['getElementById']('highlight-achievement-type')?.['value']?.['trim']()||'',_0x1a1039['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.['trim']()||'',_0x1a1039['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.[_0x3ff38d(0x270)]?.['trim']()||'',_0x1a1039['achievementImageUrl']=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x1a1039[_0x3ff38d(0x3d5)]){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x5e9806?(_0x1a1039['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x5e9806),_0x1a1039),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x1a1039['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x1a1039),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x16ed17){console['error']('Error\x20saving\x20highlight:',_0x16ed17),showNotification(_0x3ff38d(0x3cf)+_0x16ed17['message'],'error');}}function closeHighlightModal(){const _0x271297=a4_0x131698,_0x38a7ac=document[_0x271297(0x1e2)]('highlight-modal');if(_0x38a7ac)_0x38a7ac['classList']['remove']('active');}function getHighlightTypeName(_0x15e53a){const _0x2b6318=a4_0x131698;switch(_0x15e53a){case'match':return _0x2b6318(0x201);case _0x2b6318(0x268):return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x1c9fa4=a4_0x131698,_0x58b842=document[_0x1c9fa4(0x1e2)]('highlight-video-id'),_0x27dc2a=document['getElementById']('highlight-video-preview-container'),_0x27b776=document[_0x1c9fa4(0x1e2)](_0x1c9fa4(0x1df));if(!_0x58b842||!_0x27b776||!_0x27dc2a)return;const _0x626a82=_0x58b842[_0x1c9fa4(0x270)]['trim']();_0x626a82&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x626a82)?(_0x27b776['src']='https://www.youtube.com/embed/'+_0x626a82,_0x27dc2a['style']['display']='block'):(_0x27b776['src']='',_0x27dc2a['style']['display']='none');}async function loadHighlightsAdmin(){const _0x218408=a4_0x131698,_0x1b4357=document['getElementById'](_0x218408(0x220));if(!_0x1b4357)return;_0x1b4357['innerHTML']=_0x218408(0x3ca);try{const _0xeb2dc0=query(collection(db,'highlights'),orderBy(_0x218408(0x391),'desc')),_0x257cc3=await getDocs(_0xeb2dc0);if(_0x257cc3['empty']){_0x1b4357['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x1b4357['innerHTML']='',_0x257cc3['forEach'](_0x544dee=>{const _0x24e8f3=_0x218408,_0x2d564f=_0x544dee['data'](),_0x14155a=document[_0x24e8f3(0x3c4)]('tr'),_0x3519ab=_0x2d564f['createdAt']?new Date(_0x2d564f['createdAt']['seconds']*0x3e8)[_0x24e8f3(0x2a9)]():'N/A';let _0x150ead='Unknown',_0x56970c='';switch(_0x2d564f['type']){case _0x24e8f3(0x3f4):_0x150ead='Match',_0x56970c='match-type';break;case _0x24e8f3(0x268):_0x150ead='Creator',_0x56970c='creator-type';break;case'achievement':_0x150ead='Achievement',_0x56970c='achievement-type';break;}_0x14155a['innerHTML']=_0x24e8f3(0x26e)+(_0x2d564f['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x56970c+'\x22>'+_0x150ead+_0x24e8f3(0x1bd)+_0x3519ab+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2d564f['submittedBy']||_0x24e8f3(0x3bc))+_0x24e8f3(0x286)+(_0x2d564f['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+_0x24e8f3(0x266)+_0x544dee['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x544dee['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1b4357[_0x24e8f3(0x3b8)](_0x14155a);}),document[_0x218408(0x35f)](_0x218408(0x327))['forEach'](_0x5897e4=>{const _0x4c8272=_0x218408;_0x5897e4[_0x4c8272(0x3f5)]('click',_0x3945af=>{const _0x54d40e=_0x4c8272;openHighlightModal(_0x3945af['currentTarget'][_0x54d40e(0x283)]['id']);});}),document['querySelectorAll'](_0x218408(0x1ed))['forEach'](_0x3efa58=>{_0x3efa58['addEventListener']('click',_0x5612c9=>{const _0x27b024=a4_0x2b62;confirmDeleteHighlight(_0x5612c9[_0x27b024(0x352)][_0x27b024(0x283)]['id']);});});}catch(_0x3f654f){console['error']('Error\x20loading\x20highlights:',_0x3f654f),_0x1b4357['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x3f654f['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x61d902){const _0x129836=a4_0x131698;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x61d902)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x39497c){console[_0x129836(0x285)]('Error\x20deleting\x20highlight:',_0x39497c),showNotification('Error\x20deleting\x20highlight:\x20'+_0x39497c['message'],'error');}}function setupCreateTestMatchModal(){const _0x12f74c=a4_0x131698;console[_0x12f74c(0x24d)]('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x5deb65=document[_0x12f74c(0x1e2)]('create-test-match-modal'),_0x71c274=document['getElementById']('create-test-match-form');if(!_0x5deb65){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x71c274){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x16c8a3=_0x5deb65['cloneNode'](!![]);_0x5deb65[_0x12f74c(0x284)][_0x12f74c(0x3d7)](_0x16c8a3,_0x5deb65);const _0xce1a1f=_0x16c8a3['querySelector']('#create-test-match-form');_0x16c8a3['addEventListener'](_0x12f74c(0x389),function(_0x465f25){const _0x516493=_0x12f74c;_0x465f25[_0x516493(0x3b3)]===_0x16c8a3&&(console[_0x516493(0x24d)](_0x516493(0x3e8)),closeCreateTestMatchModal());});const _0x5c274e=_0x16c8a3['querySelector'](_0x12f74c(0x1c6));_0x5c274e&&_0x5c274e['addEventListener']('click',function(_0x53876f){const _0x56296b=_0x12f74c;_0x53876f['preventDefault'](),_0x53876f[_0x56296b(0x299)](),console[_0x56296b(0x24d)](_0x56296b(0x406)),closeCreateTestMatchModal();});const _0x309667=_0x16c8a3['querySelector'](_0x12f74c(0x21b));_0x309667&&_0x309667[_0x12f74c(0x3f5)]('click',function(_0x30a042){const _0x3ea8e3=_0x12f74c;_0x30a042[_0x3ea8e3(0x2f6)](),_0x30a042['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0xce1a1f){_0xce1a1f['addEventListener']('submit',function(_0x521087){const _0x1bc57b=_0x12f74c;_0x521087['preventDefault'](),_0x521087[_0x1bc57b(0x299)](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x4c41ce=_0xce1a1f['querySelector']('button[type=\x22submit\x22]');_0x4c41ce&&_0x4c41ce['addEventListener']('click',function(_0x19848b){const _0x33cffd=_0x12f74c;_0x19848b['preventDefault'](),_0x19848b['stopPropagation'](),console[_0x33cffd(0x24d)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log'](_0x12f74c(0x264));}function setupManageHighlightsSection(){const _0x35b717=a4_0x131698;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x530b7b=document['getElementById']('highlight-form');_0x530b7b&&_0x530b7b['addEventListener'](_0x35b717(0x328),_0x2647ad=>{_0x2647ad['preventDefault'](),saveHighlight();});const _0x4da4fe=document['getElementById']('cancel-highlight-btn');_0x4da4fe&&_0x4da4fe[_0x35b717(0x3f5)]('click',closeHighlightModal);const _0x245078=document['querySelector']('#highlight-modal\x20.close-btn');_0x245078&&_0x245078['addEventListener']('click',closeHighlightModal);const _0x31efba=document['getElementById'](_0x35b717(0x34b));_0x31efba&&_0x31efba['addEventListener']('click',_0x24dac9=>{const _0x239fff=_0x35b717;_0x24dac9[_0x239fff(0x3b3)]===_0x31efba&&closeHighlightModal();});const _0x85b24a=document['getElementById']('highlight-video-id');_0x85b24a&&_0x85b24a['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log'](_0x35b717(0x2ae));}function setupManageMatchesSection(){const _0x2eaa96=a4_0x131698;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x39c18a=document['getElementById'](_0x2eaa96(0x30d)),_0x73f3d3=document['getElementById']('matches-next-page');_0x39c18a&&_0x39c18a[_0x2eaa96(0x3f5)]('click',()=>{const _0x14843c=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x14843c]['page']-0x1);});_0x73f3d3&&_0x73f3d3[_0x2eaa96(0x3f5)]('click',()=>{const _0x571565=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x571565]['page']+0x1);});const _0x1d0830=document['getElementById']('apply-matches-filters'),_0xd06b0d=document['getElementById']('reset-matches-filters');_0x1d0830&&_0x1d0830['addEventListener'](_0x2eaa96(0x389),applyMatchesFilters);_0xd06b0d&&_0xd06b0d['addEventListener']('click',resetMatchesFilters);const _0x26fd92=document['getElementById']('matches-search');_0x26fd92&&_0x26fd92['addEventListener'](_0x2eaa96(0x335),debounce(filterMatchesTable,0x12c));const _0x1eec4c=document['getElementById']('resimulate-match-btn');_0x1eec4c&&_0x1eec4c['addEventListener'](_0x2eaa96(0x389),openResimulateModal);const _0x43071f=document['getElementById']('resimulate-modal');if(_0x43071f){const _0x2462f0=_0x43071f['querySelector']('.close');_0x2462f0&&_0x2462f0['addEventListener'](_0x2eaa96(0x389),closeResimulateModal),_0x43071f['addEventListener']('click',_0x57890b=>{const _0x366a7b=_0x2eaa96;_0x57890b[_0x366a7b(0x3b3)]===_0x43071f&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x5c3ef7=a4_0x131698;console[_0x5c3ef7(0x24d)](_0x5c3ef7(0x28b));const _0x3c45e6=document[_0x5c3ef7(0x1e2)]('create-test-match-modal'),_0xfc0efb=document['getElementById']('create-test-match-form');if(!_0x3c45e6){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found',_0x5c3ef7(0x285));return;}if(!_0xfc0efb){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0xfc0efb[_0x5c3ef7(0x202)]();const _0x2ff817=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x1f2794=![];_0x2ff817['forEach'](_0x4e3e31=>{const _0x5c423d=_0x5c3ef7;console['log']('Found\x20radio\x20with\x20value:',_0x4e3e31['value']),_0x4e3e31[_0x5c423d(0x270)]===currentLadder&&(_0x4e3e31[_0x5c423d(0x3f0)]=!![],_0x1f2794=!![],console['log'](_0x5c423d(0x24f),currentLadder));});if(!_0x1f2794){console[_0x5c3ef7(0x2b0)]('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x403ff3=document[_0x5c3ef7(0x3bb)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x403ff3&&(_0x403ff3['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x1a99a7=document['getElementById'](_0x5c3ef7(0x24c));if(_0x1a99a7){const _0x1bf5c0=new Date()['toISOString']()[_0x5c3ef7(0x3a3)]('T')[0x0];_0x1a99a7[_0x5c3ef7(0x270)]=_0x1bf5c0;}_0x3c45e6[_0x5c3ef7(0x217)]['display']='flex',_0x3c45e6[_0x5c3ef7(0x217)]['visibility']='visible',_0x3c45e6[_0x5c3ef7(0x217)]['opacity']='1',_0x3c45e6[_0x5c3ef7(0x3e9)]['add']('active'),console[_0x5c3ef7(0x24d)](_0x5c3ef7(0x294));const _0x510166=document['getElementById']('test-match-winner-username');_0x510166&&setTimeout(()=>{_0x510166['focus']();},0x64);}function closeCreateTestMatchModal(){const _0xee952f=a4_0x131698;console['log'](_0xee952f(0x2db));const _0x1229b8=document['getElementById'](_0xee952f(0x209));if(!_0x1229b8){console[_0xee952f(0x285)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x1229b8['classList']['remove'](_0xee952f(0x216)),_0x1229b8['style']['opacity']='0',_0x1229b8[_0xee952f(0x217)]['visibility']=_0xee952f(0x210),setTimeout(()=>{const _0x57da41=_0xee952f;!_0x1229b8['classList'][_0x57da41(0x3c3)]('active')&&(_0x1229b8[_0x57da41(0x217)][_0x57da41(0x26a)]='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x179d8e=a4_0x131698;console['log'](_0x179d8e(0x250));try{const _0xf932ef=auth['currentUser'];if(!_0xf932ef){showNotification('You\x20must\x20be\x20logged\x20in',_0x179d8e(0x285));return;}const _0x28c319='D1',_0x2ccd3e=_0x179d8e(0x3cb),_0x51c096={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x179d8e(0x36b),'loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x179d8e(0x2f7),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp[_0x179d8e(0x1f7)](new Date()),'approvedBy':_0xf932ef['email'],'createdAt':serverTimestamp(),'createdBy':_0xf932ef[_0x179d8e(0x33d)],'isTestMatch':!![],'ladder':_0x28c319,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0xf932ef[_0x179d8e(0x33d)]};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x2ccd3e),_0x51c096),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x209453){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x209453),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x209453[_0x179d8e(0x3c2)],'error');}}window[a4_0x131698(0x1f3)]=async function(){const _0x4e0c29=a4_0x131698;try{console[_0x4e0c29(0x24d)]('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console[_0x4e0c29(0x24d)]('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x1e6eb5=collection(db,_0x4e0c29(0x27a));console['log']('Collection\x20reference\x20created:',_0x1e6eb5);const _0x591b22=query(_0x1e6eb5,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x591b22);const _0x353f7d=await getDocs(_0x591b22);console[_0x4e0c29(0x24d)]('Query\x20executed.\x20Empty:',_0x353f7d['empty']),console['log'](_0x4e0c29(0x207));}catch(_0x182295){console[_0x4e0c29(0x285)]('Firebase\x20connection\x20test\x20failed:',_0x182295);}};function a4_0x3ddc(){const _0x4f8e3b=['</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','edit-player-modal','#players-table-body\x20tr','imageUrl','color','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','ribbon-user-search','matchId','points','.close-btn','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','edit-highlight-map-input','loading-cell','Using\x20collection:\x20','Sidebar\x20navigation\x20initialized\x20with\x20permissions','No\x20users\x20needed\x20points\x20field\x20initialization','matches-start-date','common','insertAdjacentElement','getDay','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','user-search-results','Table\x20row\x20for\x20user\x20','Highlight\x20not\x20found','Create\x20test\x20match\x20button\x20setup\x20complete','#C0C0C0','Map\x20Creator\x20is\x20required','.view-history-btn','points-overview-search','Error\x20loading\x20inactive\x20players:','dashboard','low-points','manage-ribbons','Adding\x20player\x20','highlight-video-preview','\x20not\x20found.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','getElementById','highlight-submitted-by','MAX_SAFE_INTEGER','edit-match-map','change','Page\x201','newElo','winnerScore','promote-modal','data-section','playerProfileUrl','.delete-highlight-btn','Removed\x20','edit-highlight-type-select','videoId','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','d1-next-page','testFirebaseConnection','positive-change','loserScore','article-modal','fromDate','afterend','edit-match-loser','initial_placement','set-elo-form','d1-prev-page','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','block','#ffffff','create-new-article-btn','Match\x20Highlight','reset','admin','.no-results','mapCreator','forEach','Firebase\x20connection\x20test\x20successful!','Edit\x20match\x20clicked:','create-test-match-modal','padding','name-asc','matchLink','load-users-data','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','resimulate-match-id','hidden','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-highlight-videoId-input','username','trophy-name','#inactive-players-table-body\x20tr','active','style','eloHistoryD3','User\x20not\x20found','opponent','#cancel-create-test-match-btn','Creator\x20highlight\x20button\x20clicked','highlight-achievement-type','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','userTrophies','highlights-table-body','Error\x20updating\x20points:','div','user-search','Player\x20\x22','edit-match-loser-score','Error\x20loading\x20players:','trace','src','highlight-type','matches-table-body','moderately-inactive','Please\x20enter\x20valid\x20username\x20and\x20ELO','.remove-ribbon-btn','\x20(winner)\x20vs\x20','Modal\x20setup\x20complete','source','uid','edit-match-title','Never\x20played','DOMContentLoaded','daysSinceMatch','substring','W\x20/\x20','search-result-item','Modal\x20cancel\x20button\x20clicked','replace','allUsersPoints','pendingMatchesD2','Loading\x20user\x20data...','trophy-description','Points\x20data\x20loaded\x20successfully','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20','Role\x20\x22','eloHistory','position','achievementImageUrl','Toggling\x20fields\x20for\x20highlight\x20type:\x20','loading','winnerName','Found\x20','Failed\x20to\x20assign\x20trophy:\x20','highlight-players-container','demote-player-btn','test-match-date','log','getDate','Set\x20default\x20ladder\x20to:','Creating\x20test\x20match\x20without\x20player\x20validation...','\x20collection...','highlight-winner-name','.error-state','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20saving\x20article:','highlight-achievement-player-container','creatorImageUrl','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22','RejectedD2','5px','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','N/A','points-overview-table-body','Error\x20loading\x20users:','page','no-results','Create\x20test\x20match\x20modal\x20setup\x20complete','Failed\x20to\x20update\x20player:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','creator','Failed\x20to\x20delete\x20match:\x20','display','quick-edit-points-form','Modal\x20computed\x20styles:','.sidebar-nav\x20.nav-item','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','firstVisible','value','All\x20fields\x20are\x20required','highlight-match-date-container','trophy-form','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','highlight-achievement-image-container','docs','Failed\x20to\x20resimulate\x20match:\x20','Attempting\x20to\x20promote\x20','highlight-description-container','players','bind','all','Found\x20player\x20with\x20current\x20ELO:\x20','migration-section','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','edit-match-loser-comment','load-inactive-players-data','Highlight\x20added\x20successfully!','dataset','parentNode','error','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20loading\x20highlights:','Trophy\x20definition\x20deleted\x20successfully','highlight-creator-image','player','Opening\x20create\x20test\x20match\x20modal','startDate','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','getRankName','Error\x20modifying\x20points:','\x20allowed\x20tabs:','Trophy\x20updated\x20successfully','action','exists','Modal\x20should\x20now\x20be\x20visible','manage-matches','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','highlight-match-link-container','roleName','stopPropagation','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','required','\x20with\x20email\x20','Player\x20','rejected-count','highlight-map-creator','assign-trophy-form','then','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','current-ladder-display','Load\x20inactive\x20players\x20data\x20clicked','\x20with\x20ELO\x20','rankDistribution','Error\x20loading\x20dashboard:','toLocaleDateString','displayName','elo','.loading-cell','activity','Manage\x20Highlights\x20section\x20initialized','Initializing\x20points\x20field\x20for\x20user\x20','warn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','edit-match-loser-suicides','amount','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','ribbon-target-user','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','userProfiles','article-form','Quick\x20edit\x20form\x20not\x20found!','Load\x20trophies\x20data\x20clicked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','Failed\x20to\x20award\x20item:\x20','backgroundColor','localeCompare','edit-match-winner-demo','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','disabled','confirm-resimulate-btn','Promoting\x20player\x20to\x20','Added\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','timestamp','mapName','rarity','inactive-players-search','input[name=\x22demote-ladder\x22]:checked','\x20-\x20Feature\x20coming\x20soon','.assign-trophy-btn','edit-match-modal','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','settings','set','Promotion\x20notification\x20sent\x20to\x20Discord\x20bot','openResimulateModal','\x20users.\x20','No\x20specific\x20permissions\x20for\x20user\x20','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','edit-highlight-playerProfileUrl-input','demotedBy','Closing\x20create\x20test\x20match\x20modal','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','success','map','Error\x20initializing\x20points\x20field:','#e0e0e0','achievement','match-details-container','catch','update','userAllowedTabs','points-management-forms','highlight-match-date','\x20(+','matches-search','.quick-edit-btn','highlight-video-preview-container','.delete-btn','#CD7F32','loss','Committing\x20batch\x20update\x20for\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','pendingMatchesD3','player-count','edit-highlight-mapVersion-input','#d32f2f','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','preventDefault','Test\x20match','Match\x20not\x20found','trophy-image-preview','Player\x20not\x20found\x20in\x20','Searching\x20for\x20player\x20in\x20','Failed\x20to\x20save\x20trophy:\x20','0.6','desc','push','add-player-form','Failed\x20to\x20delete\x20trophy:\x20','Silver','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>','cancel-article-btn','highlight-map-creator-container','Trophy\x20Preview','trophy-modal','trophy-preview-img','Loading\x20players\x20from\x20','approvedMatchesD3','getComputedStyle','includes','matches-prev-page','playerRibbons','Error\x20loading\x20points\x20data:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','winnerDemoLink','Error\x20saving\x20match:','Error\x20removing\x20ribbon:','Subtracted\x20','values','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','manage-articles','Edit\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','currentUser','set-role-modal','highlight-achievement-player','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','article-image-url','promotion','console','previousElementSibling','ribbons','playerRibbonsD3','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','mapVersion','assign-player-username','.edit-highlight-btn','submit','playerRibbonsD2','prototype','d3-next-page','trim','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Create\x20New\x20','#28a745','negative-change',',\x20Loser\x20','loserName','</td></tr>','inactive-players-table-body','input','mapPlayed','playerId','Create\x20Article','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','Remove\x20','demote-form','admin_modification','email','resimulate-modal','playersD3','winnerUsername',',\x20giving\x20default\x20access','Error\x20adding\x20player:','createdBy','\x20not\x20found\x20in\x20any\x20ladder','.admin-section','trophyDefinitions','seconds','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','approvedAt','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','highlight-modal','create-achievement-highlight-btn','Enter','unknown','Error\x20loading\x20article\x20data:','rank-distribution-chart','win','currentTarget','__proto__','points-desc','edit-match-winner-suicides','Failed\x20to\x20load\x20trophy\x20data','approvedMatchesD2','inactive-days-filter','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','award-reason','role-name','user-roles-section','\x20to\x20','toLowerCase','querySelectorAll','type','eloRating','closest','Manage\x20Points\x20section\x20initialized','matchInfo','\x20matches\x20for\x20','fa-check-circle','manage-players','submittedBy','quick-edit-points-modal','author','TestLoser','YouTube\x20Video\x20ID\x20(Optional)','edit-highlight-matchLink-input','Error\x20loading\x20trophy\x20definitions:','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','\x20already\x20exists\x20in\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','border','rgba(255,\x20255,\x20255,\x200.1)','edit-match-winner-score','promote-username','winnerComment','eloHistoryD2','demote-username','data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','points-amount','.edit-match-btn','achievementType','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','ref','loserUsername','load-ribbons-data','cells','matchDate','nonParticipants','Modal\x20element\x20found:','selected-user-id','opacity','click','❌\x20Missing','pointsHistory','Inactive\x20players\x20section\x20initialized','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','\x20ladder','Points\x20updated\x20successfully','add','createdAt','lastVisible','.ladder-switch\x20input','pending-count','\x20in\x20','body','matches-end-date','length','subtract','Loading\x20dashboard\x20overview\x20data...','delete-match-confirm-modal','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','match-row','Match\x20deleted\x20successfully','sort','Error\x20demoting\x20player:\x20','info','split','Initial\x20Placement','playersD2','toDate','Switched\x20to\x20','ribbons-overview-table-body','\x20ladder,\x20page\x20','inactive-players','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>','Never','Demoting\x20player\x20to\x20','textContent','elo-history','highlight-winner-score','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Attempting\x20to\x20demote\x20','target','award-item-form','Bronze','constructor','current-ribbons-list','appendChild','empty','article-title','querySelector','Unknown','manage-highlights','Deleting\x20match\x20','className','remove','System','message','contains','createElement','roleColor','ribbon-target-ladder','Dashboard\x20data\x20loaded\x20successfully','#matches-table-body\x20tr','Error\x20loading\x20ribbons:','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','approvedMatches','Create\x20New\x20Trophy','\x20already\x20has\x20points:\x20','Delete\x20match\x20clicked:','Error\x20saving\x20highlight:\x20','Error\x20loading\x20highlight:','Unknown\x20User','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','assign-trophy-modal','focus','achievementPlayer','input[name=\x22set-elo-ladder\x22]:checked','replaceChild','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','modify-points-form','name','reduce','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','none','1200','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','size','Cancel\x20button\x20not\x20found','-page-indicator','max','set-elo-modal','setAttribute','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Modal\x20background\x20clicked','classList','Load\x20articles\x20data\x20clicked','Error\x20searching\x20user:','manage-trophies','ribbon-type-select','highlights','View\x20history\x20clicked\x20for\x20user:','checked','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','15px','toLocaleString','match','addEventListener','manage-points','test','join','innerHTML','achievementDetails','toISOString','Error\x20checking\x20','Unknown\x20Player','selected-user-info','pendingResimulateData','lastMatch','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>',';\x22>','userId','Looking\x20for\x20user\x20role\x20information\x20for\x20','Loading\x20points\x20data...','Modal\x20close\x20button\x20clicked','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','Gold','promote-form','load-articles-data','manage-levels-ribbons','\x20points','date','removeEventListener','</span>'];a4_0x3ddc=function(){return _0x4f8e3b;};return a4_0x3ddc();}function setupCreateTestMatchButton(){const _0x151ba4=a4_0x131698,_0x30bdb6=document['getElementById']('create-test-match-btn');if(!_0x30bdb6){console[_0x151ba4(0x285)]('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x1bc079=_0x30bdb6['cloneNode'](!![]);_0x30bdb6[_0x151ba4(0x284)]['replaceChild'](_0x1bc079,_0x30bdb6),_0x1bc079['addEventListener']('click',function(_0x3a6d39){_0x3a6d39['preventDefault'](),_0x3a6d39['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log'](_0x151ba4(0x1d5));}async function loadMatchesData(_0x1ad0a4=0x1){const _0xbd1574=a4_0x131698,_0x442037=document['getElementById'](_0xbd1574(0x22a));if(!_0x442037)return;_0x442037[_0xbd1574(0x3f9)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x96d4=currentLadder['toLowerCase'](),_0x40be19=matchesPagination[_0x96d4],_0x447cec=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0xbd1574(0x357):'approvedMatchesD3',_0x894327=collection(db,_0x447cec);_0x1ad0a4<=0x1?(_0x40be19['page']=0x1,_0x40be19['firstVisible']=null,_0x40be19[_0xbd1574(0x392)]=null):_0x40be19['page']=_0x1ad0a4;const _0x383482=getMatchesFilters();let _0x394633=_0x894327;if(_0x383482[_0xbd1574(0x28c)]||_0x383482['endDate']||_0x383482['searchTerm']){let _0x351e0b=[];_0x383482[_0xbd1574(0x28c)]&&_0x383482['endDate']?(_0x351e0b[_0xbd1574(0x2ff)](where('approvedAt','>=',_0x383482['startDate']),where(_0xbd1574(0x349),'<=',_0x383482['endDate'])),_0x394633=query(_0x894327,..._0x351e0b)):_0x394633=query(_0x894327,orderBy(_0xbd1574(0x349),'desc'));}else _0x394633=query(_0x894327,orderBy('approvedAt','desc'));_0x1ad0a4>0x1&&_0x40be19['lastVisible']?_0x394633=query(_0x394633,startAfter(_0x40be19['lastVisible']),limit(PAGE_SIZE)):_0x394633=query(_0x394633,limit(PAGE_SIZE));const _0x57988a=await getDocs(_0x394633);!_0x57988a['empty']&&(_0x40be19[_0xbd1574(0x26f)]=_0x57988a['docs'][0x0],_0x40be19[_0xbd1574(0x392)]=_0x57988a['docs'][_0x57988a['docs']['length']-0x1]);let _0x3fb5e3=![];if(!_0x57988a['empty']){const _0x3b2e67=query(_0x394633,startAfter(_0x40be19['lastVisible']),limit(0x1)),_0x38e341=await getDocs(_0x3b2e67);_0x3fb5e3=!_0x38e341['empty'];}const _0x1d61c7=document['getElementById']('matches-prev-page'),_0xaa33c=document[_0xbd1574(0x1e2)]('matches-next-page'),_0x36006d=document['getElementById']('matches-page-indicator');if(_0x1d61c7)_0x1d61c7['disabled']=_0x40be19['page']<=0x1;if(_0xaa33c)_0xaa33c['disabled']=!_0x3fb5e3;if(_0x36006d)_0x36006d[_0xbd1574(0x3ae)]='Page\x20'+_0x40be19['page'];if(_0x57988a['empty']){_0x442037[_0xbd1574(0x3f9)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x442037['innerHTML']='',_0x57988a['forEach'](_0x356a0f=>{const _0x53c559=_0xbd1574,_0x14dcb9=_0x356a0f['data'](),_0x4f0350=document['createElement']('tr'),_0x505c12=_0x14dcb9['approvedAt']?new Date(_0x14dcb9['approvedAt'][_0x53c559(0x347)]*0x3e8)['toLocaleDateString']():'N/A';_0x4f0350[_0x53c559(0x3e6)]('data-id',_0x356a0f['id']),_0x4f0350['setAttribute']('data-ladder',currentLadder),_0x4f0350[_0x53c559(0x3e9)][_0x53c559(0x390)](_0x53c559(0x39e)),_0x4f0350['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x505c12+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x14dcb9['winnerUsername']||_0x53c559(0x3bc))+_0x53c559(0x28d)+(_0x14dcb9['loserUsername']||'Unknown')+_0x53c559(0x3d8)+(_0x14dcb9['winnerScore']||0x0)+'\x20-\x20'+(_0x14dcb9['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x14dcb9['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x356a0f['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x356a0f['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x442037['appendChild'](_0x4f0350);}),setupMatchesActionButtons(),_0x383482['searchTerm']&&filterMatchesTable(),console['log']('Loaded\x20'+_0x57988a['size']+_0xbd1574(0x365)+currentLadder+_0xbd1574(0x3a9)+_0x40be19['page']);}catch(_0x5e8d53){console['error']('Error\x20loading\x20matches:',_0x5e8d53),_0x442037['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x5e8d53['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x4df71,_0x23f508){const _0x109bff=a4_0x131698;try{console['log'](_0x109bff(0x3be)+_0x4df71+'\x20from\x20'+_0x23f508+'\x20ladder');const _0x280a2d=auth[_0x109bff(0x31a)];if(!_0x280a2d){showNotification(_0x109bff(0x339),'error');return;}const _0xa290ec=_0x23f508==='D1'?'approvedMatches':_0x23f508==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log'](_0x109bff(0x1ca)+_0xa290ec),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0xa290ec,_0x4df71)),console[_0x109bff(0x24d)](_0x109bff(0x39f)),showNotification(_0x109bff(0x39f),'success');const _0xeb83e7=_0x23f508['toLowerCase']();loadMatchesData(matchesPagination[_0xeb83e7]['page']);}catch(_0x20cfd6){console['error']('Error\x20deleting\x20match:',_0x20cfd6),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x20cfd6['message'],_0x109bff(0x285));}}function setupMatchesActionButtons(){const _0x3018c6=a4_0x131698;console[_0x3018c6(0x24d)]('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll'](_0x3018c6(0x37d))['forEach'](_0x1ad102=>{const _0x307a41=_0x3018c6;_0x1ad102['addEventListener'](_0x307a41(0x389),_0x56c4a7=>{const _0x32673b=_0x307a41;_0x56c4a7['preventDefault'](),_0x56c4a7['stopPropagation']();const _0x1c9042=_0x56c4a7['currentTarget']['dataset']['id'],_0x5e6d9a=_0x56c4a7['currentTarget']['closest']('tr'),_0x4f2a94=_0x5e6d9a['dataset']['ladder'];console['log'](_0x32673b(0x208),_0x1c9042,_0x4f2a94),openEditMatchModal(_0x1c9042,_0x4f2a94);});}),document[_0x3018c6(0x35f)]('.delete-match-btn')[_0x3018c6(0x206)](_0x50d825=>{_0x50d825['addEventListener']('click',_0x69213a=>{const _0x5534c9=a4_0x2b62;_0x69213a['preventDefault'](),_0x69213a['stopPropagation']();const _0x4c152f=_0x69213a['currentTarget']['dataset']['id'],_0xe4764c=_0x69213a['currentTarget'][_0x5534c9(0x362)]('tr'),_0x34f0a9=_0xe4764c[_0x5534c9(0x283)]['ladder']||currentLadder;console[_0x5534c9(0x24d)](_0x5534c9(0x3ce),_0x4c152f,_0x34f0a9),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x4c152f,_0x34f0a9);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function a4_0x2b62(_0x20e870,_0x460f87){const _0x441ffd=a4_0x3ddc();return a4_0x2b62=function(_0x14003a,_0x53e4b8){_0x14003a=_0x14003a-0x1bd;let _0x3ddc90=_0x441ffd[_0x14003a];return _0x3ddc90;},a4_0x2b62(_0x20e870,_0x460f87);}function filterMatchesTable(){const _0xdc505d=a4_0x131698,_0x49ca5f=document['getElementById'](_0xdc505d(0x2e9))['value']['toLowerCase'](),_0x1a47a3=document['querySelectorAll'](_0xdc505d(0x3c8));let _0x1324fe=0x0;_0x1a47a3['forEach'](_0xdfe8e4=>{const _0x5452c0=_0xdc505d;if(_0xdfe8e4['classList']['contains']('loading-cell')||_0xdfe8e4['classList']['contains']('empty-state')||_0xdfe8e4['classList']['contains']('error-state'))return;const _0xcf38e6=_0xdfe8e4['cells'][0x1]['textContent']['toLowerCase'](),_0x3f2205=_0xdfe8e4[_0x5452c0(0x383)][0x2]['textContent'][_0x5452c0(0x35e)](),_0x296639=_0xdfe8e4[_0x5452c0(0x383)][0x4]['textContent']['toLowerCase']();_0xcf38e6['includes'](_0x49ca5f)||_0x3f2205['includes'](_0x49ca5f)||_0x296639[_0x5452c0(0x30c)](_0x49ca5f)?(_0xdfe8e4[_0x5452c0(0x217)]['display']='',_0x1324fe++):_0xdfe8e4[_0x5452c0(0x217)]['display']='none';});if(_0x1324fe===0x0&&_0x1a47a3[_0xdc505d(0x398)]>0x0){const _0x2f297a=document['getElementById'](_0xdc505d(0x22a)),_0xe9adfa=_0x2f297a['querySelector'](_0xdc505d(0x204));if(!_0xe9adfa){const _0x5b96ee=document[_0xdc505d(0x3c4)]('tr');_0x5b96ee[_0xdc505d(0x3bf)]='no-results',_0x5b96ee['innerHTML']=_0xdc505d(0x27f)+_0x49ca5f+'\x27</td>',_0x2f297a[_0xdc505d(0x3b8)](_0x5b96ee);}}else{const _0xcbf40a=document[_0xdc505d(0x3bb)]('.no-results');_0xcbf40a&&_0xcbf40a['remove']();}}function getMatchesFilters(){const _0x6cdda9=a4_0x131698,_0x572230=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x5a5d49=document['getElementById'](_0x6cdda9(0x1cd))['value'],_0x21f3b6=document['getElementById']('matches-end-date')['value'];let _0x23753e=null,_0x200038=null;return _0x5a5d49&&(_0x23753e=new Date(_0x5a5d49),_0x23753e['setHours'](0x0,0x0,0x0,0x0),_0x23753e=Timestamp['fromDate'](_0x23753e)),_0x21f3b6&&(_0x200038=new Date(_0x21f3b6),_0x200038['setHours'](0x17,0x3b,0x3b,0x3e7),_0x200038=Timestamp[_0x6cdda9(0x1f7)](_0x200038)),{'searchTerm':_0x572230,'startDate':_0x23753e,'endDate':_0x200038};}async function applyMatchesFilters(){const _0x24bd40=currentLadder['toLowerCase']();matchesPagination[_0x24bd40]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x4a3277=a4_0x131698;document['getElementById']('matches-start-date')['value']='',document['getElementById'](_0x4a3277(0x397))['value']='',document['getElementById']('matches-search')['value']='';const _0x425058=currentLadder['toLowerCase']();matchesPagination[_0x425058]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x12a773,_0x5bdf58){const _0x1431a1=a4_0x131698,_0x46cb31=document[_0x1431a1(0x1e2)](_0x1431a1(0x2d0));if(!_0x46cb31)return;try{const _0x4ad41e=_0x5bdf58==='D1'?_0x1431a1(0x3cb):_0x5bdf58==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2a60cc=doc(db,_0x4ad41e,_0x12a773),_0x3beaff=await getDoc(_0x2a60cc);if(!_0x3beaff['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x40f7e8=_0x3beaff['data']();document['getElementById']('edit-match-id')[_0x1431a1(0x270)]=_0x12a773,document['getElementById']('edit-match-ladder')['value']=_0x5bdf58,document['getElementById']('edit-match-winner')[_0x1431a1(0x270)]=_0x40f7e8['winnerUsername']||'',document[_0x1431a1(0x1e2)](_0x1431a1(0x374))['value']=_0x40f7e8['winnerScore']||0x0,document['getElementById'](_0x1431a1(0x355))['value']=_0x40f7e8['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x40f7e8[_0x1431a1(0x376)]||'',document[_0x1431a1(0x1e2)](_0x1431a1(0x1f9))['value']=_0x40f7e8['loserUsername']||'',document['getElementById']('edit-match-loser-score')[_0x1431a1(0x270)]=_0x40f7e8['loserScore']||0x0,document[_0x1431a1(0x1e2)](_0x1431a1(0x2b2))['value']=_0x40f7e8['loserSuicides']||0x0,document['getElementById'](_0x1431a1(0x280))['value']=_0x40f7e8['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0x40f7e8['mapPlayed']||'',document['getElementById'](_0x1431a1(0x2c1))['value']=_0x40f7e8[_0x1431a1(0x311)]||'',document[_0x1431a1(0x1e2)]('edit-match-loser-demo')['value']=_0x40f7e8['loserDemoLink']||_0x40f7e8['demoLink']||'',document['getElementById'](_0x1431a1(0x232))[_0x1431a1(0x3ae)]='Edit\x20Match:\x20'+_0x40f7e8['winnerUsername']+'\x20vs\x20'+_0x40f7e8['loserUsername'],_0x46cb31['classList'][_0x1431a1(0x390)]('active');}catch(_0x522fbb){console['error']('Error\x20loading\x20match\x20data:',_0x522fbb),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x12f747=a4_0x131698,_0x572caa=document['getElementById'](_0x12f747(0x2d0));_0x572caa&&_0x572caa['classList']['remove']('active');}async function saveEditedMatch(){const _0x22ee46=a4_0x131698;try{const _0x3d75b3=document[_0x22ee46(0x1e2)]('edit-match-id')['value'],_0x2c17d9=document['getElementById']('edit-match-ladder')['value'];if(!_0x3d75b3||!_0x2c17d9){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x22ee46(0x285));return;}const _0x246721=_0x2c17d9==='D1'?'approvedMatches':_0x2c17d9==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x58ac16=document['getElementById']('edit-match-winner')['value']['trim'](),_0x4e7a0e=parseInt(document['getElementById']('edit-match-winner-score')[_0x22ee46(0x270)]),_0x443128=parseInt(document[_0x22ee46(0x1e2)]('edit-match-winner-suicides')[_0x22ee46(0x270)]),_0x5e6ddd=document[_0x22ee46(0x1e2)]('edit-match-winner-comment')['value']['trim'](),_0x389b67=document['getElementById']('edit-match-loser')['value']['trim'](),_0x22f64a=parseInt(document['getElementById'](_0x22ee46(0x225))[_0x22ee46(0x270)]),_0x48310f=parseInt(document[_0x22ee46(0x1e2)](_0x22ee46(0x2b2))[_0x22ee46(0x270)]),_0xad2059=document['getElementById']('edit-match-loser-comment')['value']['trim'](),_0x13ca62=document['getElementById'](_0x22ee46(0x1e5))['value']['trim'](),_0x107617=document[_0x22ee46(0x1e2)](_0x22ee46(0x2c1))['value'][_0x22ee46(0x32c)](),_0x576dd3=document['getElementById']('edit-match-loser-demo')[_0x22ee46(0x270)][_0x22ee46(0x32c)]();if(!_0x58ac16||!_0x389b67){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x246721,_0x3d75b3),{'winnerUsername':_0x58ac16,'winnerScore':_0x4e7a0e,'winnerSuicides':_0x443128,'winnerComment':_0x5e6ddd,'loserUsername':_0x389b67,'loserScore':_0x22f64a,'loserSuicides':_0x48310f,'loserComment':_0xad2059,'mapPlayed':_0x13ca62,'winnerDemoLink':_0x107617||null,'loserDemoLink':_0x576dd3||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x22ee46(0x33d)],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully',_0x22ee46(0x2dd)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x2c17d9[_0x22ee46(0x35e)]()]['page']);}catch(_0x31c112){console['error'](_0x22ee46(0x312),_0x31c112),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x31c112[_0x22ee46(0x3c2)],_0x22ee46(0x285));}}async function openDeleteMatchModal(_0x4c87d7,_0x5a79af){const _0x355266=a4_0x131698;try{const _0x7aa112=_0x5a79af==='D1'?'approvedMatches':_0x5a79af==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x491f15=doc(db,_0x7aa112,_0x4c87d7),_0x21336d=await getDoc(_0x491f15);if(!_0x21336d[_0x355266(0x293)]()){showNotification(_0x355266(0x2f8),'error');return;}const _0x3fdd03=_0x21336d[_0x355266(0x379)](),_0x3db25f=document['getElementById'](_0x355266(0x39b));_0x3db25f['dataset']['matchId']=_0x4c87d7,_0x3db25f[_0x355266(0x283)]['ladder']=_0x5a79af;const _0x3d9f8a=_0x3fdd03['approvedAt']?new Date(_0x3fdd03[_0x355266(0x349)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x3023c3=document[_0x355266(0x1e2)]('delete-match-summary');_0x3023c3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x3d9f8a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x3fdd03[_0x355266(0x340)]+_0x355266(0x22e)+_0x3fdd03[_0x355266(0x381)]+_0x355266(0x34a)+(_0x3fdd03['winnerScore']||0x0)+'\x20-\x20'+(_0x3fdd03['loserScore']||0x0)+_0x355266(0x274)+(_0x3fdd03['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x5a79af+_0x355266(0x255),_0x3db25f['classList']['add']('active');}catch(_0x1f1833){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x1f1833),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x34a565=a4_0x131698,_0x33a296=document['getElementById'](_0x34a565(0x39b));_0x33a296&&(_0x33a296['classList']['remove']('active'),_0x33a296['removeAttribute']('data-match-id'),_0x33a296['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x139ac7=a4_0x131698,_0x444186=document['getElementById']('delete-match-confirm-modal'),_0x4e19c8=_0x444186['dataset'][_0x139ac7(0x1c4)],_0x116527=_0x444186[_0x139ac7(0x283)]['ladder'];if(!_0x4e19c8||!_0x116527){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x139ac7(0x285)),closeDeleteMatchModal();return;}try{const _0x4d4d10=_0x116527==='D1'?_0x139ac7(0x3cb):_0x116527==='D2'?'approvedMatchesD2':_0x139ac7(0x30a);await deleteDoc(doc(db,_0x4d4d10,_0x4e19c8)),showNotification(_0x139ac7(0x39f),_0x139ac7(0x2dd)),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x116527['toLowerCase']()][_0x139ac7(0x262)]);}catch(_0x2d4817){console['error']('Error\x20deleting\x20match:',_0x2d4817),showNotification(_0x139ac7(0x269)+_0x2d4817[_0x139ac7(0x3c2)],'error');}}async function saveHighlightChanges(){const _0x5d4af6=a4_0x131698,_0x5695bf=document['getElementById']('edit-highlight-id')['value'],_0x396375=document[_0x5d4af6(0x1e2)](_0x5d4af6(0x1ef))['value'];let _0x26daad={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x396375,'description':document[_0x5d4af6(0x1e2)]('edit-highlight-description-input')[_0x5d4af6(0x270)]['trim'](),'videoId':document[_0x5d4af6(0x1e2)](_0x5d4af6(0x212))[_0x5d4af6(0x270)][_0x5d4af6(0x32c)](),'submittedBy':auth['currentUser'][_0x5d4af6(0x33d)]};if(_0x396375==='match'){_0x26daad[_0x5d4af6(0x364)]=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x26daad[_0x5d4af6(0x2de)]=document['getElementById'](_0x5d4af6(0x1c8))['value'][_0x5d4af6(0x32c)]();const _0x7c682e=document['getElementById']('edit-highlight-matchDate-input')[_0x5d4af6(0x270)];_0x26daad['matchDate']=_0x7c682e?Timestamp['fromDate'](new Date(_0x7c682e)):null,_0x26daad['winnerName']=document['getElementById']('edit-highlight-winnerName-input')['value']['trim'](),_0x26daad[_0x5d4af6(0x1e9)]=document[_0x5d4af6(0x1e2)]('edit-highlight-winnerScore-input')[_0x5d4af6(0x270)]['trim'](),_0x26daad['loserName']=document[_0x5d4af6(0x1e2)]('edit-highlight-loserName-input')['value']['trim'](),_0x26daad[_0x5d4af6(0x1f5)]=document['getElementById']('edit-highlight-loserScore-input')['value'][_0x5d4af6(0x32c)](),_0x26daad[_0x5d4af6(0x20c)]=document[_0x5d4af6(0x1e2)](_0x5d4af6(0x36d))['value']['trim'](),_0x26daad['mapCreator']=null,_0x26daad['mapVersion']=null,_0x26daad['creatorImageUrl']=null,_0x26daad['achievementPlayer']=null,_0x26daad['achievementType']=null,_0x26daad[_0x5d4af6(0x3fa)]=null,_0x26daad['playerProfileUrl']=null;}else{if(_0x396375==='creator')_0x26daad['map']=document['getElementById'](_0x5d4af6(0x1c8))[_0x5d4af6(0x270)]['trim'](),_0x26daad[_0x5d4af6(0x205)]=document['getElementById']('edit-highlight-mapCreator-input')['value'][_0x5d4af6(0x32c)](),_0x26daad[_0x5d4af6(0x325)]=document[_0x5d4af6(0x1e2)](_0x5d4af6(0x2f3))[_0x5d4af6(0x270)]['trim'](),_0x26daad[_0x5d4af6(0x258)]=document['getElementById']('edit-highlight-creatorImageUrl-input')[_0x5d4af6(0x270)]['trim'](),_0x26daad[_0x5d4af6(0x364)]=null,_0x26daad['matchDate']=null,_0x26daad['winnerName']=null,_0x26daad[_0x5d4af6(0x1e9)]=null,_0x26daad['loserName']=null,_0x26daad['loserScore']=null,_0x26daad[_0x5d4af6(0x20c)]=null,_0x26daad['achievementPlayer']=null,_0x26daad[_0x5d4af6(0x37e)]=null,_0x26daad[_0x5d4af6(0x3fa)]=null,_0x26daad['playerProfileUrl']=null;else _0x396375==='achievement'&&(_0x26daad[_0x5d4af6(0x3d5)]=document[_0x5d4af6(0x1e2)]('edit-highlight-achievementPlayer-input')['value'][_0x5d4af6(0x32c)](),_0x26daad['achievementType']=document['getElementById']('edit-highlight-achievementType-input')['value'][_0x5d4af6(0x32c)](),_0x26daad['achievementDetails']=document[_0x5d4af6(0x1e2)]('edit-highlight-achievementDetails-input')['value']['trim'](),_0x26daad['playerProfileUrl']=document['getElementById'](_0x5d4af6(0x2d9))['value'][_0x5d4af6(0x32c)](),_0x26daad[_0x5d4af6(0x364)]=null,_0x26daad['map']=null,_0x26daad['matchDate']=null,_0x26daad['winnerName']=null,_0x26daad['winnerScore']=null,_0x26daad[_0x5d4af6(0x332)]=null,_0x26daad['loserScore']=null,_0x26daad['matchLink']=null,_0x26daad['mapCreator']=null,_0x26daad[_0x5d4af6(0x325)]=null,_0x26daad['creatorImageUrl']=null);}try{if(_0x5695bf){_0x26daad['updatedAt']=serverTimestamp();const _0x7d1c8c=doc(db,_0x5d4af6(0x3ee),_0x5695bf);await updateDoc(_0x7d1c8c,_0x26daad),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x26daad[_0x5d4af6(0x391)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x26daad),showNotification(_0x5d4af6(0x282),'success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x247289){console['error']('Error\x20saving\x20highlight:',_0x247289),showNotification('Error\x20saving\x20highlight:\x20'+_0x247289['message'],_0x5d4af6(0x285));}}async function resimulateMatch(){const _0x4e9a02=a4_0x131698;try{const _0x192a5e=document['getElementById'](_0x4e9a02(0x20f))['value'];if(!_0x192a5e){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x35d008=auth['currentUser'];if(!_0x35d008){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches',_0x4e9a02(0x285));return;}const _0x3edc25=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x4e9a02(0x30a),_0x2bd722=doc(db,_0x3edc25,_0x192a5e),_0x48d32d=await getDoc(_0x2bd722);if(!_0x48d32d[_0x4e9a02(0x293)]()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x5b495d=_0x48d32d['data'](),_0x4bd7ff=_0x5b495d['approvedAt']?_0x5b495d['approvedAt']['toDate']()[_0x4e9a02(0x3f3)]():_0x5b495d[_0x4e9a02(0x384)]?_0x5b495d['matchDate']['toDate']?_0x5b495d[_0x4e9a02(0x384)]['toDate']()[_0x4e9a02(0x3f3)]():new Date(_0x5b495d['matchDate'])['toLocaleString']():_0x4e9a02(0x3bc),_0x233926='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x5b495d[_0x4e9a02(0x340)]+_0x4e9a02(0x240)+_0x5b495d['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x5b495d['winnerScore']+'-'+_0x5b495d['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x5b495d['mapPlayed']||_0x5b495d[_0x4e9a02(0x2ca)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x4bd7ff+_0x4e9a02(0x316)+_0x192a5e+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x4e9a02(0x1e2)](_0x4e9a02(0x2e2))[_0x4e9a02(0x3f9)]=_0x233926,document['getElementById']('match-details-container')[_0x4e9a02(0x217)]['display']='block',document['getElementById'](_0x4e9a02(0x2c4))['style']['display']='block',window['pendingResimulateData']={'matchId':_0x192a5e,'matchData':_0x5b495d,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x3f393e){console['error']('Error\x20finding\x20match:',_0x3f393e),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x3f393e['message'],'error');}}async function confirmResimulateMatch(){const _0x373adb=a4_0x131698;try{const {matchId:_0x1a8310,matchData:_0x2055bf,ladder:_0x2af5d1}=window['pendingResimulateData'];if(!_0x1a8310||!_0x2055bf){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x37703b=_0x2af5d1==='D1'?'players':_0x2af5d1==='D2'?'playersD2':'playersD3',_0x2d7df9=_0x2af5d1==='D1'?'eloHistory':_0x2af5d1==='D2'?_0x373adb(0x377):_0x373adb(0x218),[_0x2bd062,_0x5930fb]=await Promise['all']([getDocs(query(collection(db,_0x37703b),where(_0x373adb(0x213),'==',_0x2055bf['winnerUsername']))),getDocs(query(collection(db,_0x37703b),where('username','==',_0x2055bf[_0x373adb(0x381)])))]);if(_0x2bd062['empty']||_0x5930fb['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x1f541f=_0x2bd062['docs'][0x0]['id'],_0x4d1c8a=_0x5930fb['docs'][0x0]['id'],_0x4c626d=_0x2bd062['docs'][0x0]['data'](),_0x3c688b=_0x5930fb['docs'][0x0]['data'](),[_0x2b292f,_0x1bbb49]=await Promise[_0x373adb(0x27c)]([getDocs(query(collection(db,_0x2d7df9),where('playerId','==',_0x1f541f),where('matchId','==',_0x1a8310))),getDocs(query(collection(db,_0x2d7df9),where('playerId','==',_0x4d1c8a),where(_0x373adb(0x1c4),'==',_0x1a8310)))]),_0x3cf4a2=!_0x2b292f[_0x373adb(0x3b9)],_0x587c26=!_0x1bbb49[_0x373adb(0x3b9)],_0x1a9e1b='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x3cf4a2?'✅\x20Exists':_0x373adb(0x38a))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x587c26?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x4c626d['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x3c688b['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x4c626d['position']||_0x373adb(0x3bc))+_0x373adb(0x267)+(_0x3c688b['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')[_0x373adb(0x3f9)]=_0x1a9e1b,document[_0x373adb(0x1e2)]('validation-results-container')['style']['display']=_0x373adb(0x1fe);if(_0x3cf4a2&&_0x587c26){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...',_0x373adb(0x3a2));const _0x10bf34=_0x2055bf['approvedAt']||_0x2055bf[_0x373adb(0x384)]||serverTimestamp(),[_0x5a34c5,_0x278079]=await Promise[_0x373adb(0x27c)]([getPlayerEloAtTime(_0x1f541f,_0x10bf34,_0x2d7df9),getPlayerEloAtTime(_0x4d1c8a,_0x10bf34,_0x2d7df9)]),{calculateElo:_0x3d0847}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x36adf9,newLoserRating:_0x3c759a}=_0x3d0847(_0x5a34c5,_0x278079),_0x26aef7=_0x4c626d['position']||Number[_0x373adb(0x1e4)],_0x480cd3=_0x3c688b['position']||Number[_0x373adb(0x1e4)];let _0x4d74ab=_0x26aef7,_0x9f7a7f=_0x480cd3;_0x26aef7>_0x480cd3&&(_0x4d74ab=_0x480cd3,_0x9f7a7f=_0x480cd3+0x1);const _0x12a93b=writeBatch(db),_0x17ca90=doc(db,_0x37703b,_0x1f541f);_0x12a93b[_0x373adb(0x2e4)](_0x17ca90,{'eloRating':_0x36adf9,'position':_0x4d74ab,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x373adb(0x31a)]['uid']});const _0x55a18a=doc(db,_0x37703b,_0x4d1c8a);_0x12a93b[_0x373adb(0x2e4)](_0x55a18a,{'eloRating':_0x3c759a,'position':_0x9f7a7f,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x373adb(0x231)]});if(_0x26aef7>_0x480cd3){const _0x2e8208=await getDocs(query(collection(db,_0x37703b),where('position','>',_0x480cd3),where('position','<',_0x26aef7)));_0x2e8208['forEach'](_0x58dbe6=>{const _0x215388=_0x373adb,_0x2f5079=doc(db,_0x37703b,_0x58dbe6['id']),_0x56270f=_0x58dbe6[_0x215388(0x379)]()[_0x215388(0x243)];_0x12a93b[_0x215388(0x2e4)](_0x2f5079,{'position':_0x56270f+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x3cf4a2){const _0x159c32=doc(collection(db,_0x2d7df9));_0x12a93b[_0x373adb(0x2d3)](_0x159c32,{'playerId':_0x1f541f,'player':_0x2055bf[_0x373adb(0x340)],'previousElo':_0x5a34c5,'newElo':_0x36adf9,'eloChange':_0x36adf9-_0x5a34c5,'opponentId':_0x4d1c8a,'opponent':_0x2055bf[_0x373adb(0x381)],'matchResult':_0x373adb(0x351),'previousPosition':_0x26aef7,'newPosition':_0x4d74ab,'positionChange':_0x4d74ab-_0x26aef7,'matchId':_0x1a8310,'timestamp':_0x10bf34,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x2af5d1,'matchScore':_0x2055bf['winnerScore']+'-'+_0x2055bf['loserScore'],'mapPlayed':_0x2055bf['mapPlayed']||_0x2055bf['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x587c26){const _0x3f43d8=doc(collection(db,_0x2d7df9));_0x12a93b['set'](_0x3f43d8,{'playerId':_0x4d1c8a,'player':_0x2055bf['loserUsername'],'previousElo':_0x278079,'newElo':_0x3c759a,'eloChange':_0x3c759a-_0x278079,'opponentId':_0x1f541f,'opponent':_0x2055bf['winnerUsername'],'matchResult':_0x373adb(0x2ee),'previousPosition':_0x480cd3,'newPosition':_0x9f7a7f,'positionChange':_0x9f7a7f-_0x480cd3,'matchId':_0x1a8310,'timestamp':_0x10bf34,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x2af5d1,'matchScore':_0x2055bf[_0x373adb(0x1e9)]+'-'+_0x2055bf[_0x373adb(0x1f5)],'mapPlayed':_0x2055bf[_0x373adb(0x336)]||_0x2055bf['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x5566b7=_0x2af5d1==='D1'?_0x373adb(0x3cb):_0x2af5d1==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x38c1b5=doc(db,_0x5566b7,_0x1a8310);_0x12a93b['update'](_0x38c1b5,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':_0x373adb(0x2a2),'originalWinnerElo':_0x4c626d['eloRating'],'originalLoserElo':_0x3c688b['eloRating'],'originalWinnerPosition':_0x26aef7,'originalLoserPosition':_0x480cd3,'resimulatedWinnerElo':_0x36adf9,'resimulatedLoserElo':_0x3c759a,'resimulatedWinnerPosition':_0x4d74ab,'resimulatedLoserPosition':_0x9f7a7f}),await _0x12a93b['commit']();const _0xfe56b4=(!_0x3cf4a2?0x1:0x0)+(!_0x587c26?0x1:0x0),_0x38121a=_0x26aef7!==_0x4d74ab||_0x480cd3!==_0x9f7a7f;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0xfe56b4+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x5a34c5+'→'+_0x36adf9+_0x373adb(0x2e8)+(_0x36adf9-_0x5a34c5)+'),\x20')+('Loser\x20'+_0x278079+'→'+_0x3c759a+'\x20('+(_0x3c759a-_0x278079)+').\x20')+(''+(_0x38121a?'Positions\x20updated:\x20Winner\x20'+_0x26aef7+'→'+_0x4d74ab+_0x373adb(0x331)+_0x480cd3+'→'+_0x9f7a7f:'No\x20position\x20changes\x20needed.')),_0x373adb(0x2dd)),closeResimulateModal(),document[_0x373adb(0x3bb)]('#players.content-section.active')&&loadPlayersData();}catch(_0x43c5a0){console['error']('Error\x20resimulating\x20match:',_0x43c5a0),showNotification(_0x373adb(0x277)+_0x43c5a0[_0x373adb(0x3c2)],'error');}}async function getPlayerEloAtTime(_0x4c3f94,_0xcef743,_0x402b8e){const _0x2d3969=a4_0x131698;try{const _0x210b3e=_0xcef743[_0x2d3969(0x3a6)]?_0xcef743['toDate']():new Date(_0xcef743),_0x49be0f=query(collection(db,_0x402b8e),where(_0x2d3969(0x337),'==',_0x4c3f94),where('timestamp','<',_0xcef743),orderBy(_0x2d3969(0x2c9),'desc'),limit(0x1)),_0x57f47f=await getDocs(_0x49be0f);if(!_0x57f47f['empty']){const _0x4962c=_0x57f47f[_0x2d3969(0x276)][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x4c3f94+'\x20before\x20match:\x20'+_0x4962c['newElo']),_0x4962c[_0x2d3969(0x1e8)];}else return console[_0x2d3969(0x24d)]('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x4c3f94+_0x2d3969(0x39c)),0x4b0;}catch(_0x52da3e){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x4c3f94+':',_0x52da3e),0x4b0;}}function openResimulateModal(){const _0x3efe93=a4_0x131698;console[_0x3efe93(0x24d)]('openResimulateModal\x20called!');const _0x225550=document[_0x3efe93(0x1e2)](_0x3efe93(0x33e));console['log']('Modal\x20element\x20found:',_0x225550);if(!_0x225550){console['error']('Modal\x20element\x20not\x20found!');return;}_0x225550['style'][_0x3efe93(0x26a)]='block',_0x225550['style']['visibility']='visible',_0x225550['style']['opacity']='1',_0x225550['classList']['add']('active'),console['log'](_0x3efe93(0x294)),console['log'](_0x3efe93(0x26c),window[_0x3efe93(0x30b)](_0x225550)[_0x3efe93(0x26a)]);const _0x185ee5=document[_0x3efe93(0x1e2)]('match-details-container'),_0x356f00=document[_0x3efe93(0x1e2)]('validation-results-container'),_0x3ec42e=document['getElementById'](_0x3efe93(0x2c4)),_0x1ebb7c=document['getElementById']('resimulate-match-id');if(_0x185ee5)_0x185ee5[_0x3efe93(0x3f9)]='';if(_0x356f00)_0x356f00['innerHTML']='';if(_0x3ec42e)_0x3ec42e['style'][_0x3efe93(0x26a)]='none';if(_0x1ebb7c)_0x1ebb7c['value']='';console[_0x3efe93(0x24d)](_0x3efe93(0x22f));}function closeResimulateModal(){const _0x52e6e1=a4_0x131698;document[_0x52e6e1(0x1e2)]('resimulate-modal')['style']['display']=_0x52e6e1(0x3de),window[_0x52e6e1(0x3ff)]=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window[a4_0x131698(0x2d5)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x5e1bcc=a4_0x131698;console[_0x5e1bcc(0x24d)](_0x5e1bcc(0x405));try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x5e1bcc(0x23f),'success');}catch(_0x68c81f){console['error'](_0x5e1bcc(0x30f),_0x68c81f),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x68c81f['message'],'error');}}function renderPointsOverview(_0x3be7bb){const _0x447159=a4_0x131698,_0x54853e=document['getElementById']('points-overview-table-body');if(!_0x54853e)return;if(_0x3be7bb[_0x447159(0x398)]===0x0){_0x54853e['innerHTML']=_0x447159(0x3dd);return;}_0x54853e['innerHTML']='',_0x3be7bb[_0x447159(0x206)](_0x3268f5=>{const _0x2082d1=_0x447159,_0x3f354b=document[_0x2082d1(0x3c4)]('tr'),_0x3c09ef=_0x3268f5[_0x2082d1(0x2aa)]||_0x3268f5['username']||_0x2082d1(0x3d1),_0x319482=_0x3268f5[_0x2082d1(0x33d)]||'No\x20email',_0xaf9fb2=_0x3268f5[_0x2082d1(0x1c5)]||0x0,_0x5d1857=_0x3268f5['lastPointsModified']?new Date(_0x3268f5['lastPointsModified']['seconds']*0x3e8)[_0x2082d1(0x2a9)]():_0x2082d1(0x3ac);_0x3f354b[_0x2082d1(0x3f9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x3c09ef+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x319482+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0xaf9fb2>0x3e8?'high-points':_0xaf9fb2>0x1f4?'medium-points':_0x2082d1(0x1dc))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0xaf9fb2['toLocaleString']()+_0x2082d1(0x1fd)+_0x5d1857+_0x2082d1(0x38d)+_0x3268f5['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x3268f5['id']+_0x2082d1(0x20e),_0x54853e['appendChild'](_0x3f354b);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x14d8cf=a4_0x131698;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x1226e4=document['querySelectorAll'](_0x14d8cf(0x2ea));console[_0x14d8cf(0x24d)](_0x14d8cf(0x248)+_0x1226e4['length']+'\x20quick\x20edit\x20buttons'),_0x1226e4['forEach'](_0x36e0d4=>{const _0x1c2fcb=_0x14d8cf,_0x1860c1=_0x36e0d4['cloneNode'](!![]);_0x36e0d4[_0x1c2fcb(0x284)]['replaceChild'](_0x1860c1,_0x36e0d4);});const _0x11d1bb=document[_0x14d8cf(0x35f)]('.view-history-btn');console['log']('Found\x20'+_0x11d1bb['length']+'\x20view\x20history\x20buttons'),_0x11d1bb[_0x14d8cf(0x206)](_0x4058de=>{const _0x58393c=_0x14d8cf,_0x58fa6c=_0x4058de['cloneNode'](!![]);_0x4058de[_0x58393c(0x284)][_0x58393c(0x3d7)](_0x58fa6c,_0x4058de);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x3f8015=>{const _0x4661a3=_0x14d8cf;_0x3f8015[_0x4661a3(0x3f5)](_0x4661a3(0x389),function(_0x2678a0){const _0x340a2e=_0x4661a3;_0x2678a0[_0x340a2e(0x2f6)](),_0x2678a0['stopPropagation']();const _0x50b901=this['dataset']['userId'];console[_0x340a2e(0x24d)]('Quick\x20edit\x20clicked\x20for\x20user:',_0x50b901);if(!_0x50b901){console[_0x340a2e(0x285)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x340a2e(0x217)][_0x340a2e(0x388)]='0.6',setTimeout(()=>{const _0x29bde8=_0x340a2e;this['style'][_0x29bde8(0x388)]='1';},0xc8),openQuickEditModal(_0x50b901);});}),document[_0x14d8cf(0x35f)](_0x14d8cf(0x1d8))['forEach'](_0x27c9f8=>{_0x27c9f8['addEventListener']('click',function(_0x4af74e){const _0xdccacd=a4_0x2b62;_0x4af74e['preventDefault'](),_0x4af74e['stopPropagation']();const _0x3e4f6e=this['dataset']['userId'];console[_0xdccacd(0x24d)](_0xdccacd(0x3ef),_0x3e4f6e);if(!_0x3e4f6e){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']=_0xdccacd(0x2fd),setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x3e4f6e);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x454a5a){const _0xf1f63f=a4_0x131698;console[_0xf1f63f(0x24d)](_0xf1f63f(0x324),_0x454a5a);const _0x5f55c0=document['getElementById']('quick-edit-points-modal');if(!_0x5f55c0){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification(_0xf1f63f(0x254),_0xf1f63f(0x285));return;}try{showNotification(_0xf1f63f(0x23d),'info');const _0x45ad4c=doc(db,'userProfiles',_0x454a5a),_0x5d850e=await getDoc(_0x45ad4c);if(!_0x5d850e[_0xf1f63f(0x293)]()){showNotification(_0xf1f63f(0x219),'error');return;}const _0x3477c7=_0x5d850e['data']();console[_0xf1f63f(0x24d)]('User\x20data\x20loaded:',_0x3477c7);const _0x3b3a46=document['getElementById']('quick-edit-user-id'),_0x52d016=document['getElementById']('quick-edit-display-name'),_0x3d6931=document[_0xf1f63f(0x1e2)]('quick-edit-email'),_0x29338f=document['getElementById']('quick-edit-current-points'),_0x29a709=document['getElementById'](_0xf1f63f(0x26b));if(!_0x3b3a46||!_0x52d016||!_0x3d6931||!_0x29338f||!_0x29a709){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x3b3a46[_0xf1f63f(0x270)]=_0x454a5a,_0x52d016['textContent']=_0x3477c7[_0xf1f63f(0x2aa)]||_0x3477c7['username']||_0xf1f63f(0x3d1),_0x3d6931['textContent']=_0x3477c7[_0xf1f63f(0x33d)]||'No\x20email',_0x29338f['textContent']=(_0x3477c7[_0xf1f63f(0x1c5)]||0x0)[_0xf1f63f(0x3f3)](),_0x29a709['reset']();const _0x2614b2=document['getElementById']('quick-add');_0x2614b2&&(_0x2614b2['checked']=!![]);_0x5f55c0['classList'][_0xf1f63f(0x390)]('active'),console[_0xf1f63f(0x24d)]('Modal\x20opened\x20successfully');const _0x17f10d=document['getElementById']('quick-points-amount');_0x17f10d&&setTimeout(()=>_0x17f10d[_0xf1f63f(0x3d4)](),0x64);}catch(_0x1a2a58){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x1a2a58),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x1a2a58['message'],'error');}}function closeQuickEditModal(){const _0x260998=a4_0x131698,_0x2eba42=document['getElementById'](_0x260998(0x369));_0x2eba42&&_0x2eba42['classList']['remove']('active');}async function handleQuickEditPoints(_0x5cdb3c){const _0x3bee77=a4_0x131698;_0x5cdb3c['preventDefault']();const _0x217a5a=document[_0x3bee77(0x1e2)]('quick-edit-user-id')[_0x3bee77(0x270)],_0xbeb590=document[_0x3bee77(0x3bb)]('input[name=\x22quick-action\x22]:checked')['value'],_0x33699e=parseInt(document[_0x3bee77(0x1e2)]('quick-points-amount')['value']),_0x4aae2d=document['getElementById']('quick-points-reason')['value'][_0x3bee77(0x32c)]();console[_0x3bee77(0x24d)]('Processing\x20points\x20edit:',{'userId':_0x217a5a,'action':_0xbeb590,'amount':_0x33699e,'reason':_0x4aae2d});if(!_0x217a5a||!_0x33699e||_0x33699e<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x217a5a,_0xbeb590,_0x33699e,_0x4aae2d),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x3bee77(0x38f),_0x3bee77(0x2dd)),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x217a5a);}catch(_0x308012){console['error'](_0x3bee77(0x221),_0x308012),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x308012['message'],_0x3bee77(0x285));}}async function searchUsersForPoints(){const _0x14c46b=a4_0x131698,_0x4b87fa=document[_0x14c46b(0x1e2)]('points-user-search')[_0x14c46b(0x270)][_0x14c46b(0x32c)]()['toLowerCase'](),_0x11ae53=document['getElementById']('user-search-results');if(!_0x4b87fa||_0x4b87fa['length']<0x2){_0x11ae53['innerHTML']='';return;}_0x11ae53['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x49c720=collection(db,_0x14c46b(0x2b8)),_0x40971d=await getDocs(_0x49c720),_0x34b453=[];_0x40971d['forEach'](_0x4f931a=>{const _0x473723=_0x14c46b,_0x570039=_0x4f931a['data'](),_0x367256=(_0x570039['displayName']||_0x570039['username']||'')['toLowerCase'](),_0x581ac3=(_0x570039['email']||'')['toLowerCase']();(_0x367256[_0x473723(0x30c)](_0x4b87fa)||_0x581ac3[_0x473723(0x30c)](_0x4b87fa))&&_0x34b453[_0x473723(0x2ff)]({'id':_0x4f931a['id'],..._0x570039});});if(_0x34b453[_0x14c46b(0x398)]===0x0){_0x11ae53['innerHTML']=_0x14c46b(0x401);return;}_0x11ae53['innerHTML']='',_0x34b453['forEach'](_0x252f3e=>{const _0x5a9082=_0x14c46b,_0x3c3945=document[_0x5a9082(0x3c4)]('div');_0x3c3945['className']=_0x5a9082(0x238),_0x3c3945['innerHTML']=_0x5a9082(0x2a3)+(_0x252f3e['displayName']||_0x252f3e[_0x5a9082(0x213)]||_0x5a9082(0x3bc))+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x252f3e[_0x5a9082(0x33d)]||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x252f3e['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3c3945['addEventListener']('click',()=>selectUserForPoints(_0x252f3e)),_0x11ae53['appendChild'](_0x3c3945);});}catch(_0x456682){console['error']('Error\x20searching\x20users:',_0x456682),_0x11ae53[_0x14c46b(0x3f9)]='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x19772b){const _0x572208=a4_0x131698;document['getElementById']('selected-user-name')['textContent']=_0x19772b['displayName']||_0x19772b[_0x572208(0x213)]||_0x572208(0x3d1),document['getElementById']('selected-user-points')['textContent']=(_0x19772b[_0x572208(0x1c5)]||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')[_0x572208(0x270)]=_0x19772b['id'],document['getElementById'](_0x572208(0x3fe))['style']['display']='block',document['getElementById'](_0x572208(0x2e6))['style']['display']=_0x572208(0x1fe),document['getElementById'](_0x572208(0x1d2))[_0x572208(0x3f9)]='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x72f4c0){const _0x33aeba=a4_0x131698;_0x72f4c0[_0x33aeba(0x2f6)]();const _0x15a815=document['getElementById'](_0x33aeba(0x387))['value'],_0x44d64a=document['getElementById']('points-action')['value'],_0x6cc795=parseInt(document['getElementById'](_0x33aeba(0x37c))['value']),_0x42c593=document['getElementById']('points-reason')['value'][_0x33aeba(0x32c)]();if(!_0x15a815||!_0x6cc795||_0x6cc795<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x15a815,_0x44d64a,_0x6cc795,_0x42c593),document[_0x33aeba(0x1e2)](_0x33aeba(0x3da))['reset']();const _0x203331=doc(db,_0x33aeba(0x2b8),_0x15a815),_0x36ad16=await getDoc(_0x203331);if(_0x36ad16['exists']()){const _0x331e79=_0x36ad16['data']();document[_0x33aeba(0x1e2)]('selected-user-points')['textContent']=(_0x331e79['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully',_0x33aeba(0x2dd)),loadPointsHistory();}catch(_0x3452f8){console['error'](_0x33aeba(0x28f),_0x3452f8),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x3452f8['message'],'error');}}async function loadPointsHistory(){const _0x4b9825=a4_0x131698,_0x52faa1=document['getElementById']('points-history-table-body');if(!_0x52faa1)return;_0x52faa1[_0x4b9825(0x3f9)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x1b6690=collection(db,_0x4b9825(0x38b)),_0x2f57d8=query(_0x1b6690,orderBy('timestamp','desc'),limit(0x32)),_0x5c36d8=await getDocs(_0x2f57d8);if(_0x5c36d8[_0x4b9825(0x3b9)]){_0x52faa1[_0x4b9825(0x3f9)]=_0x4b9825(0x2bd);return;}_0x52faa1['innerHTML']='',_0x5c36d8['forEach'](_0x2c21e6=>{const _0xea15ae=_0x4b9825,_0x336ea7=_0x2c21e6[_0xea15ae(0x379)](),_0x41ace1=document['createElement']('tr'),_0x59c1de=_0x336ea7[_0xea15ae(0x2c9)]?new Date(_0x336ea7['timestamp'][_0xea15ae(0x347)]*0x3e8)['toLocaleString']():_0xea15ae(0x3bc);let _0x2d9a88='';switch(_0x336ea7[_0xea15ae(0x292)]){case'add':_0x2d9a88=_0xea15ae(0x2c6)+_0x336ea7[_0xea15ae(0x2b3)]+'\x20points';break;case _0xea15ae(0x399):_0x2d9a88=_0xea15ae(0x314)+_0x336ea7['amount']+_0xea15ae(0x40c);break;case'set':_0x2d9a88='Set\x20to\x20'+_0x336ea7[_0xea15ae(0x2b3)]+'\x20points';break;default:_0x2d9a88=_0x336ea7['action']+'\x20'+_0x336ea7['amount']+_0xea15ae(0x40c);}_0x41ace1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x59c1de+_0xea15ae(0x286)+(_0x336ea7['displayName']||'Unknown\x20User')+_0xea15ae(0x286)+_0x2d9a88+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x336ea7[_0xea15ae(0x292)]+_0xea15ae(0x3d2)+(_0x336ea7['previousPoints']||0x0)+'\x20→\x20'+(_0x336ea7['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x336ea7['reason']||'No\x20reason\x20provided')+_0xea15ae(0x286)+(_0x336ea7['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x52faa1['appendChild'](_0x41ace1);});}catch(_0x3ae407){console['error']('Error\x20loading\x20points\x20history:',_0x3ae407),_0x52faa1['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x3ae407['message']+_0x4b9825(0x333);}}function filterPointsOverview(){const _0x4c2bcb=a4_0x131698,_0x2f0dc3=document['getElementById']('points-overview-search')[_0x4c2bcb(0x270)]['toLowerCase']();if(!window['allUsersPoints'])return;const _0x4302ce=window['allUsersPoints']['filter'](_0x3563cf=>{const _0x5f464c=_0x4c2bcb,_0x397f71=(_0x3563cf['displayName']||_0x3563cf['username']||'')['toLowerCase'](),_0x5b835=(_0x3563cf['email']||'')[_0x5f464c(0x35e)]();return _0x397f71[_0x5f464c(0x30c)](_0x2f0dc3)||_0x5b835[_0x5f464c(0x30c)](_0x2f0dc3);});renderPointsOverview(_0x4302ce);}function sortPointsOverview(){const _0x4558b0=a4_0x131698,_0x1ba764=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0xb03e8f=[...window[_0x4558b0(0x23b)]];switch(_0x1ba764){case _0x4558b0(0x354):_0xb03e8f['sort']((_0x1956ef,_0x13cddc)=>(_0x13cddc[_0x4558b0(0x1c5)]||0x0)-(_0x1956ef['points']||0x0));break;case'points-asc':_0xb03e8f['sort']((_0x49044b,_0x402a47)=>(_0x49044b[_0x4558b0(0x1c5)]||0x0)-(_0x402a47['points']||0x0));break;case _0x4558b0(0x20b):_0xb03e8f['sort']((_0x29c43c,_0x11a0a6)=>{const _0x4ff3ae=_0x4558b0,_0x4030c7=(_0x29c43c['displayName']||_0x29c43c['username']||'')['toLowerCase'](),_0x1fb7ae=(_0x11a0a6['displayName']||_0x11a0a6['username']||'')['toLowerCase']();return _0x4030c7[_0x4ff3ae(0x2c0)](_0x1fb7ae);});break;case'name-desc':_0xb03e8f[_0x4558b0(0x3a0)]((_0x426077,_0x7a456a)=>{const _0x5e13a8=(_0x426077['displayName']||_0x426077['username']||'')['toLowerCase'](),_0x350179=(_0x7a456a['displayName']||_0x7a456a['username']||'')['toLowerCase']();return _0x350179['localeCompare'](_0x5e13a8);});break;}renderPointsOverview(_0xb03e8f);}async function handleAwardItem(_0x1fc5d1){const _0x3c2e29=a4_0x131698;_0x1fc5d1['preventDefault']();const _0x27c007=document['getElementById']('selected-user-id')[_0x3c2e29(0x270)],_0x516759=document['getElementById']('store-item-select')['value'],_0x1cc791=document[_0x3c2e29(0x1e2)](_0x3c2e29(0x35a))[_0x3c2e29(0x270)]['trim']();if(!_0x27c007||!_0x516759){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x3c2e29(0x285));return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById'](_0x3c2e29(0x3b4))[_0x3c2e29(0x202)]();}catch(_0x3bd3d4){console['error']('Error\x20awarding\x20item:',_0x3bd3d4),showNotification(_0x3c2e29(0x2be)+_0x3bd3d4['message'],'error');}}async function loadUserPointsHistory(_0x41b320){const _0x34ecf7=a4_0x131698;try{const _0x1927e7=collection(db,_0x34ecf7(0x38b)),_0x3fb378=query(_0x1927e7,where('userId','==',_0x41b320),orderBy(_0x34ecf7(0x2c9),'desc')),_0x58e8e4=await getDocs(_0x3fb378);console['log']('Found\x20'+_0x58e8e4[_0x34ecf7(0x3e1)]+'\x20history\x20entries\x20for\x20user\x20'+_0x41b320),showNotification('User\x20has\x20'+_0x58e8e4['size']+'\x20points\x20history\x20entries',_0x34ecf7(0x3a2));}catch(_0x559403){console[_0x34ecf7(0x285)]('Error\x20loading\x20user\x20points\x20history:',_0x559403),showNotification('Failed\x20to\x20load\x20user\x20history',_0x34ecf7(0x285));}}async function initializeUserPointsField(){const _0x3b5263=a4_0x131698;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x5b7f92=collection(db,'userProfiles'),_0x291d64=await getDocs(_0x5b7f92);if(_0x291d64[_0x3b5263(0x3b9)]){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x4c6a9d=0x0,_0x4e1998=0x0;const _0x448aad=writeBatch(db);let _0x1aa63c=0x0;return console[_0x3b5263(0x24d)]('Found\x20'+_0x291d64['size']+'\x20users\x20to\x20check...'),_0x291d64[_0x3b5263(0x206)](_0x18ad2c=>{const _0x3cfa8e=_0x3b5263,_0x1d0523=_0x18ad2c['data']();_0x1d0523['points']===undefined||_0x1d0523[_0x3cfa8e(0x1c5)]===null?(_0x448aad[_0x3cfa8e(0x2e4)](_0x18ad2c['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x4c6a9d++,_0x1aa63c++,console['log']('Queued\x20'+(_0x1d0523[_0x3cfa8e(0x2aa)]||_0x1d0523['username']||_0x1d0523['email']||_0x3cfa8e(0x3bc))+'\x20for\x20points\x20initialization')):(_0x4e1998++,console['log']((_0x1d0523[_0x3cfa8e(0x2aa)]||_0x1d0523['username']||_0x1d0523[_0x3cfa8e(0x33d)]||'Unknown')+_0x3cfa8e(0x3cd)+_0x1d0523[_0x3cfa8e(0x1c5)])),_0x1aa63c>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x4c6a9d>0x0?(console['log'](_0x3b5263(0x2ef)+_0x4c6a9d+'\x20users...'),await _0x448aad['commit'](),console['log']('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x4c6a9d+'\x20users')):console[_0x3b5263(0x24d)](_0x3b5263(0x1cc)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x291d64['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x4c6a9d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x4e1998),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x4c6a9d+_0x3b5263(0x2d6)+_0x4e1998+'\x20users\x20already\x20had\x20points.',_0x3b5263(0x2dd)),window[_0x3b5263(0x23b)]&&loadPointsOverview(),{'totalUsers':_0x291d64['size'],'usersUpdated':_0x4c6a9d,'usersAlreadyHadPoints':_0x4e1998};}catch(_0x468051){console['error'](_0x3b5263(0x2df),_0x468051),showNotification('Error\x20initializing\x20points:\x20'+_0x468051['message'],'error');throw _0x468051;}}function addPointsMigrationButton(){const _0x306b59=a4_0x131698,_0x2be31e=document[_0x306b59(0x1e2)]('manage-points');if(!_0x2be31e)return;if(document['getElementById']('migrate-points-btn'))return;const _0x480866=document['createElement']('div');_0x480866[_0x306b59(0x3bf)]=_0x306b59(0x27e),_0x480866[_0x306b59(0x217)]['marginBottom']='20px',_0x480866[_0x306b59(0x217)][_0x306b59(0x20a)]=_0x306b59(0x3f2),_0x480866['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x480866['style'][_0x306b59(0x372)]='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x480866['style']['borderRadius']=_0x306b59(0x25d),_0x480866[_0x306b59(0x3f9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x4c6eea=_0x2be31e[_0x306b59(0x3bb)]('.section-header');_0x4c6eea&&_0x4c6eea[_0x306b59(0x1cf)](_0x306b59(0x1f8),_0x480866),document['getElementById']('migrate-points-btn')[_0x306b59(0x3f5)]('click',async function(){const _0x2084b5=_0x306b59;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this[_0x2084b5(0x2c3)]=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x2084b5(0x3f9)]=_0x2084b5(0x3e0),this['style'][_0x2084b5(0x2bf)]=_0x2084b5(0x32f),setTimeout(()=>{const _0x11a16e=_0x2084b5;_0x480866[_0x11a16e(0x217)]['display']='none';},0xbb8);}catch(_0x4c759b){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x13945c=a4_0x131698;console[_0x13945c(0x24d)]('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x737eec=document['getElementById']('points-user-search');_0x737eec&&_0x737eec[_0x13945c(0x3f5)]('input',debounce(searchUsersForPoints,0x12c));const _0x599030=document[_0x13945c(0x1e2)](_0x13945c(0x3da));_0x599030&&_0x599030['addEventListener']('submit',handleModifyPoints);const _0x4c76fa=document['getElementById'](_0x13945c(0x3b4));_0x4c76fa&&_0x4c76fa['addEventListener']('submit',handleAwardItem);const _0x331591=document[_0x13945c(0x1e2)](_0x13945c(0x1d9));_0x331591&&_0x331591['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x3f8a7b=document['getElementById']('points-sort-order');_0x3f8a7b&&_0x3f8a7b[_0x13945c(0x3f5)](_0x13945c(0x1e6),sortPointsOverview);const _0x4edf77=document['getElementById']('refresh-points-overview');_0x4edf77&&_0x4edf77['addEventListener']('click',loadPointsOverview);const _0x257f61=document['getElementById']('quick-edit-points-modal');if(_0x257f61){console[_0x13945c(0x24d)]('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x243d3a=_0x257f61['querySelector']('.close-btn');_0x243d3a?_0x243d3a['addEventListener'](_0x13945c(0x389),function(){const _0x25e4de=_0x13945c;console['log'](_0x25e4de(0x406)),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x20947b=document[_0x13945c(0x1e2)]('cancel-quick-edit');_0x20947b?_0x20947b[_0x13945c(0x3f5)](_0x13945c(0x389),function(){const _0x37affc=_0x13945c;console['log'](_0x37affc(0x239)),closeQuickEditModal();}):console['warn'](_0x13945c(0x3e2));const _0x216449=document['getElementById']('quick-edit-points-form');_0x216449?_0x216449['addEventListener'](_0x13945c(0x328),function(_0x2433c7){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x2433c7);}):console['error'](_0x13945c(0x2ba)),_0x257f61[_0x13945c(0x3f5)](_0x13945c(0x389),function(_0x5b0e32){_0x5b0e32['target']===_0x257f61&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log'](_0x13945c(0x363));}function setupManageRibbonsSection(){const _0x3eec52=a4_0x131698;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x1f477c=document[_0x3eec52(0x1e2)]('ribbon-user-search');_0x1f477c&&_0x1f477c['addEventListener'](_0x3eec52(0x335),debounce(searchRibbonUser,0x12c));const _0xcf3efa=document['getElementById']('search-ribbon-user-btn');_0xcf3efa&&_0xcf3efa['addEventListener'](_0x3eec52(0x389),searchRibbonUser);const _0x257642=document['getElementById']('add-ribbon-form');_0x257642&&_0x257642['addEventListener']('submit',addRibbon),_0x1f477c&&_0x1f477c[_0x3eec52(0x3f5)]('keypress',function(_0x1c48ef){const _0x54ce0f=_0x3eec52;_0x1c48ef['key']===_0x54ce0f(0x34d)&&(_0x1c48ef['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x3775f0,_0x19d2bf,_0x19b630,_0x2b6bc2=''){const _0x1e6311=a4_0x131698,_0x449819=doc(db,_0x1e6311(0x2b8),_0x3775f0),_0xf0f05=await getDoc(_0x449819);if(!_0xf0f05[_0x1e6311(0x293)]())throw new Error('User\x20not\x20found');const _0x51c5a7=_0xf0f05[_0x1e6311(0x379)](),_0x14d7a8=_0x51c5a7['points']!==undefined?_0x51c5a7['points']:0x0;_0x51c5a7[_0x1e6311(0x1c5)]===undefined&&(console['log'](_0x1e6311(0x2af)+(_0x51c5a7[_0x1e6311(0x2aa)]||_0x51c5a7['email']||'Unknown')),await updateDoc(_0x449819,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x5c3d97=_0x14d7a8;switch(_0x19d2bf){case _0x1e6311(0x390):_0x5c3d97=_0x14d7a8+_0x19b630;break;case'subtract':_0x5c3d97=Math[_0x1e6311(0x3e4)](0x0,_0x14d7a8-_0x19b630);break;case _0x1e6311(0x2d3):_0x5c3d97=_0x19b630;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x449819,{'points':_0x5c3d97,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x3775f0,'userEmail':_0x51c5a7[_0x1e6311(0x33d)]||_0x1e6311(0x34e),'displayName':_0x51c5a7[_0x1e6311(0x2aa)]||_0x51c5a7[_0x1e6311(0x213)]||'Unknown\x20User','action':_0x19d2bf,'amount':_0x19b630,'previousPoints':_0x14d7a8,'newPoints':_0x5c3d97,'reason':_0x2b6bc2,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x142574=a4_0x131698,_0x25f173=document['getElementById'](_0x142574(0x260));if(!_0x25f173)return;_0x25f173['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x5988c7=collection(db,'userProfiles'),_0x452578=await getDocs(_0x5988c7);if(_0x452578['empty']){_0x25f173['innerHTML']=_0x142574(0x3dd);return;}const _0x5bb99f=[];let _0x3379d7=0x0;_0x452578['forEach'](_0x172f5e=>{const _0x295167=_0x142574,_0x210efa=_0x172f5e[_0x295167(0x379)](),_0x2b54e4=_0x210efa['points']!==undefined?_0x210efa['points']:0x0;_0x210efa['points']===undefined&&_0x3379d7++,_0x5bb99f['push']({'id':_0x172f5e['id'],..._0x210efa,'points':_0x2b54e4});}),_0x3379d7>0x0&&(console['log'](_0x142574(0x248)+_0x3379d7+_0x142574(0x1c7)),showNotification(_0x3379d7+_0x142574(0x1d1),_0x142574(0x3a2))),_0x5bb99f['sort']((_0x252219,_0x11f90e)=>(_0x11f90e['points']||0x0)-(_0x252219['points']||0x0)),window[_0x142574(0x23b)]=_0x5bb99f,renderPointsOverview(_0x5bb99f);}catch(_0x4d48ab){console['error']('Error\x20loading\x20points\x20overview:',_0x4d48ab),_0x25f173['innerHTML']=_0x142574(0x2dc)+_0x4d48ab['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x5d4679=a4_0x131698,_0x347fcc=document[_0x5d4679(0x1e2)](_0x5d4679(0x3a8));if(!_0x347fcc)return;_0x347fcc['innerHTML']=_0x5d4679(0x37b);try{const [_0x1700a5,_0x46919f,_0x4177e0]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x5d4679(0x329))),getDocs(collection(db,'playerRibbonsD3'))]);_0x347fcc['innerHTML']='';const _0x44a2e9=(_0xd7f8fc,_0x5a32e4)=>{_0xd7f8fc['forEach'](_0x1b4861=>{const _0x1927ea=a4_0x2b62,_0x4693fc=_0x1b4861['data'](),_0x236fe3=_0x4693fc['ribbons']||{},_0x541af0=Object['keys'](_0x236fe3)['length'],_0x3ddab7=document['createElement']('tr');_0x3ddab7[_0x1927ea(0x3f9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4693fc['username']||_0x1927ea(0x3bc))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x5a32e4['toLowerCase']()+'\x22>'+_0x5a32e4+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x541af0+_0x1927ea(0x2f0)+(_0x4693fc['lastUpdated']?new Date(_0x4693fc['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x4693fc['username']+'\x22\x20data-ladder=\x22'+_0x5a32e4+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x347fcc['appendChild'](_0x3ddab7);});};_0x44a2e9(_0x1700a5,'D1'),_0x44a2e9(_0x46919f,'D2'),_0x44a2e9(_0x4177e0,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x1ea019=>{const _0x355d30=_0x5d4679;_0x1ea019[_0x355d30(0x3f5)]('click',function(){const _0x4f3c20=this['dataset']['username'],_0x370104=this['dataset']['ladder'];editUserRibbons(_0x4f3c20,_0x370104);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully',_0x5d4679(0x2dd));}catch(_0x89bbd5){console['error']('Error\x20loading\x20ribbons:',_0x89bbd5),_0x347fcc['innerHTML']=_0x5d4679(0x31d),showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x1ca66f=a4_0x131698,_0x8c553c=document['getElementById'](_0x1ca66f(0x1c3))[_0x1ca66f(0x270)][_0x1ca66f(0x32c)]();if(!_0x8c553c){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x548bb8,_0x3a4d32,_0x1113ff]=await Promise[_0x1ca66f(0x27c)]([getDoc(doc(db,_0x1ca66f(0x30e),_0x8c553c)),getDoc(doc(db,'playerRibbonsD2',_0x8c553c)),getDoc(doc(db,_0x1ca66f(0x323),_0x8c553c))]);let _0x219c09=null,_0x2064b5=null;if(_0x548bb8['exists']())_0x219c09='D1',_0x2064b5=_0x548bb8[_0x1ca66f(0x379)]();else{if(_0x3a4d32[_0x1ca66f(0x293)]())_0x219c09='D2',_0x2064b5=_0x3a4d32['data']();else _0x1113ff['exists']()&&(_0x219c09='D3',_0x2064b5=_0x1113ff[_0x1ca66f(0x379)]());}_0x219c09?(document['getElementById']('current-ribbon-user')['textContent']=_0x8c553c,document['getElementById'](_0x1ca66f(0x2b6))['value']=_0x8c553c,document['getElementById']('ribbon-target-ladder')['value']=_0x219c09,document['getElementById']('user-ribbon-management')['style']['display']=_0x1ca66f(0x1fe),displayCurrentRibbons(_0x2064b5[_0x1ca66f(0x322)]||{}),showNotification('Found\x20'+_0x8c553c+'\x20in\x20'+_0x219c09+'\x20ladder',_0x1ca66f(0x2dd))):showNotification('User\x20'+_0x8c553c+_0x1ca66f(0x344),_0x1ca66f(0x285));}catch(_0x216279){console['error'](_0x1ca66f(0x3eb),_0x216279),showNotification('Error\x20searching\x20for\x20user',_0x1ca66f(0x285));}}function displayCurrentRibbons(_0x47dd91){const _0x2884b2=a4_0x131698,_0x36df0a=document['getElementById'](_0x2884b2(0x3b7));if(!_0x36df0a)return;_0x36df0a['innerHTML']='';if(Object['keys'](_0x47dd91)['length']===0x0){_0x36df0a['innerHTML']=_0x2884b2(0x36f);return;}Object['entries'](_0x47dd91)[_0x2884b2(0x206)](([_0x5273a0,_0x4d7044])=>{const _0x4e262f=_0x2884b2,_0xb19a4d=document[_0x4e262f(0x3c4)]('div');_0xb19a4d['className']='ribbon-item',_0xb19a4d['innerHTML']=_0x4e262f(0x1e1)+_0x5273a0+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x4d7044['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x4d7044['awardedAt']?new Date(_0x4d7044['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+_0x4e262f(0x25b)+_0x5273a0+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x36df0a['appendChild'](_0xb19a4d);}),document['querySelectorAll'](_0x2884b2(0x22d))[_0x2884b2(0x206)](_0x1ad530=>{const _0x24779a=_0x2884b2;_0x1ad530[_0x24779a(0x3f5)](_0x24779a(0x389),function(){const _0xbc612d=this['dataset']['ribbon'];removeRibbon(_0xbc612d);});});}async function addRibbon(_0x10dbb7){const _0x1df84e=a4_0x131698;_0x10dbb7['preventDefault']();const _0x1deb14=document['getElementById']('ribbon-target-user')[_0x1df84e(0x270)],_0x38414b=document['getElementById']('ribbon-target-ladder')[_0x1df84e(0x270)],_0x10a94b=document['getElementById'](_0x1df84e(0x3ed))['value'],_0x551e95=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x1deb14||!_0x38414b||!_0x10a94b||!_0x551e95){showNotification('Please\x20fill\x20all\x20fields',_0x1df84e(0x285));return;}try{const _0x546526=_0x1df84e(0x30e)+(_0x38414b==='D1'?'':_0x38414b),_0x8f9087=doc(db,_0x546526,_0x1deb14),_0x5a79ea=await getDoc(_0x8f9087),_0x5e7231=_0x5a79ea['exists']()?_0x5a79ea['data']()['ribbons']||{}:{};_0x5e7231[_0x10a94b]={'level':_0x551e95,'awardedAt':serverTimestamp()},await setDoc(_0x8f9087,{'username':_0x1deb14,'ladder':_0x38414b,'ribbons':_0x5e7231,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x1df84e(0x2c6)+_0x10a94b+'\x20Level\x20'+_0x551e95+'\x20to\x20'+_0x1deb14,_0x1df84e(0x2dd)),displayCurrentRibbons(_0x5e7231),document['getElementById'](_0x1df84e(0x3ed))[_0x1df84e(0x270)]='',document['getElementById']('ribbon-level')[_0x1df84e(0x270)]='1';}catch(_0x196c54){console[_0x1df84e(0x285)]('Error\x20adding\x20ribbon:',_0x196c54),showNotification('Error\x20adding\x20ribbon',_0x1df84e(0x285));}}async function removeRibbon(_0x23b31c){const _0x48c417=a4_0x131698,_0x4e0083=document['getElementById']('ribbon-target-user')[_0x48c417(0x270)],_0x11596d=document['getElementById'](_0x48c417(0x3c6))['value'];if(!confirm(_0x48c417(0x33a)+_0x23b31c+'\x20from\x20'+_0x4e0083+'?'))return;try{const _0x5bc9c8='playerRibbons'+(_0x11596d==='D1'?'':_0x11596d),_0x150773=doc(db,_0x5bc9c8,_0x4e0083),_0x3c49de=await getDoc(_0x150773),_0x555c78=_0x3c49de[_0x48c417(0x293)]()?_0x3c49de[_0x48c417(0x379)]()[_0x48c417(0x322)]||{}:{};delete _0x555c78[_0x23b31c],await setDoc(_0x150773,{'username':_0x4e0083,'ladder':_0x11596d,'ribbons':_0x555c78,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x48c417(0x1ee)+_0x23b31c+'\x20from\x20'+_0x4e0083,'success'),displayCurrentRibbons(_0x555c78);}catch(_0x46c608){console['error'](_0x48c417(0x313),_0x46c608),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x47f3bb,_0x463fc4){document['getElementById']('ribbon-user-search')['value']=_0x47f3bb,searchRibbonUser();}