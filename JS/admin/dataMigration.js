const a0_0x2e7b42=(function(){let _0x3093e1=!![];return function(_0x279e18,_0x389425){const _0x563957=_0x3093e1?function(){if(_0x389425){const _0x7f4a47=_0x389425['apply'](_0x279e18,arguments);return _0x389425=null,_0x7f4a47;}}:function(){};return _0x3093e1=![],_0x563957;};}()),a0_0x240c78=a0_0x2e7b42(this,function(){const _0x42e105=a0_0x38cb;let _0x50ca1b;try{const _0x1ea1a3=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x50ca1b=_0x1ea1a3();}catch(_0x1e975d){_0x50ca1b=window;}const _0x504c01=_0x50ca1b[_0x42e105(0x18b)]=_0x50ca1b['console']||{},_0x4f35c2=[_0x42e105(0x198),'warn','info',_0x42e105(0x199),_0x42e105(0x190),_0x42e105(0x19a),_0x42e105(0x186)];for(let _0x4ffa58=0x0;_0x4ffa58<_0x4f35c2[_0x42e105(0x19d)];_0x4ffa58++){const _0x41d208=a0_0x2e7b42[_0x42e105(0x18c)][_0x42e105(0x19c)]['bind'](a0_0x2e7b42),_0x51da0d=_0x4f35c2[_0x4ffa58],_0x1a49d5=_0x504c01[_0x51da0d]||_0x41d208;_0x41d208['__proto__']=a0_0x2e7b42[_0x42e105(0x19f)](a0_0x2e7b42),_0x41d208[_0x42e105(0x185)]=_0x1a49d5[_0x42e105(0x185)]['bind'](_0x1a49d5),_0x504c01[_0x51da0d]=_0x41d208;}});a0_0x240c78();import{db}from'../firebase-config.js';function a0_0x38cb(_0xb3aa10,_0x1d1606){const _0x240c78=a0_0x4353();return a0_0x38cb=function(_0x2e7b42,_0x261390){_0x2e7b42=_0x2e7b42-0x184;let _0x43538b=_0x240c78[_0x2e7b42];return _0x43538b;},a0_0x38cb(_0xb3aa10,_0x1d1606);}import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';export async function migrateUserData(){const _0x3aa44f=a0_0x38cb,_0xa5ac72=[_0x3aa44f(0x194),'playersD2','playersD3','nonParticipants','userProfiles'],_0xb6831c=[];let _0x5408ed=writeBatch(db),_0x364cca=0x0;const _0x483a09=collection(db,_0x3aa44f(0x197)),_0x4a34e4=new Map(),_0x48db50=(_0x15f0b7,_0x551ae6)=>{const _0x4d926f=_0x3aa44f;_0x364cca>=0x1f4&&(_0xb6831c['push'](_0x5408ed),_0x5408ed=writeBatch(db),_0x364cca=0x0);const _0x542395=doc(_0x483a09,_0x15f0b7);_0x5408ed[_0x4d926f(0x18f)](_0x542395,_0x551ae6),_0x364cca++;};for(const _0x1b7d5e of _0xa5ac72){const _0x9213ac=collection(db,_0x1b7d5e),_0x3c9d1c=await getDocs(_0x9213ac);_0x3c9d1c[_0x3aa44f(0x188)]['forEach'](_0x4dcfb0=>{const _0x3258ce=_0x3aa44f,_0x35b133=_0x4dcfb0['id'],_0x3977a1=_0x4dcfb0['data']();!_0x4a34e4[_0x3258ce(0x18a)](_0x35b133)&&_0x4a34e4['set'](_0x35b133,{'username':_0x3977a1[_0x3258ce(0x19e)]||_0x3977a1['name']||_0x35b133,'email':_0x3977a1[_0x3258ce(0x187)]||null,'discord':_0x3977a1['discord']||null,'createdAt':_0x3977a1['createdAt']||new Date()[_0x3258ce(0x195)](),'divisions':[]});const _0x38e567=_0x4a34e4[_0x3258ce(0x18e)](_0x35b133);if(_0x1b7d5e===_0x3258ce(0x194))_0x38e567['divisions']['push']({'id':0x1,'elo':_0x3977a1['elo']||0x5dc,'isActive':_0x3977a1['active']!==![]});else{if(_0x1b7d5e===_0x3258ce(0x184))_0x38e567['divisions'][_0x3258ce(0x196)]({'id':0x2,'elo':_0x3977a1[_0x3258ce(0x191)]||0x5dc,'isActive':_0x3977a1[_0x3258ce(0x18d)]!==![]});else _0x1b7d5e===_0x3258ce(0x193)&&_0x38e567['divisions']['push']({'id':0x3,'elo':_0x3977a1['elo']||0x5dc,'isActive':_0x3977a1[_0x3258ce(0x18d)]!==![]});}});}for(const [_0x264374,_0x576e56]of _0x4a34e4[_0x3aa44f(0x19b)]()){_0x48db50(_0x264374,_0x576e56);}_0x364cca>0x0&&_0xb6831c[_0x3aa44f(0x196)](_0x5408ed);const _0x8adb90=[];for(const _0xca7ec0 of _0xb6831c){try{await _0xca7ec0[_0x3aa44f(0x192)](),_0x8adb90['push']({'success':!![]});}catch(_0x27ada3){_0x8adb90['push']({'success':![],'error':_0x27ada3});}}return{'usersProcessed':_0x4a34e4['size'],'batchesExecuted':_0x8adb90['length'],'success':_0x8adb90['every'](_0x37567a=>_0x37567a['success'])};}export async function updateMatchReferences(){const _0x4118b2=a0_0x38cb,_0x5a8076=[_0x4118b2(0x189),'matchesD2','matchesD3'];let _0x51a4a0=0x0;for(const _0x592302 of _0x5a8076){const _0x5eb7ed=collection(db,_0x592302),_0x457442=await getDocs(_0x5eb7ed),_0x6a2e76=0x1f4;let _0x3f2d6d=writeBatch(db),_0x5e61c5=0x0;for(const _0xa9efb1 of _0x457442['docs']){const _0x4a66be=_0xa9efb1['data'](),_0x5ea42a=doc(db,_0x592302,_0xa9efb1['id']);_0x3f2d6d['update'](_0x5ea42a,{'isMigrated':!![],'lastModified':new Date()['toISOString']()}),_0x5e61c5++,_0x51a4a0++,_0x5e61c5>=_0x6a2e76&&(await _0x3f2d6d['commit'](),_0x3f2d6d=writeBatch(db),_0x5e61c5=0x0);}_0x5e61c5>0x0&&await _0x3f2d6d[_0x4118b2(0x192)]();}return{'updatedCount':_0x51a4a0};}function a0_0x4353(){const _0x5ac372=['playersD2','toString','trace','email','docs','matches','has','console','constructor','active','get','set','exception','elo','commit','playersD3','players','toISOString','push','userProfiles','log','error','table','entries','prototype','length','username','bind'];a0_0x4353=function(){return _0x5ac372;};return a0_0x4353();}