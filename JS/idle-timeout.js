const a20_0x225701=a20_0x194a;import a20_0x1251d7,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;function a20_0x194a(_0x1fc5d5,_0x4ab5fd){const _0x19eef8=a20_0x995c();return a20_0x194a=function(_0x385f87,_0x108dad){_0x385f87=_0x385f87-0x11a;let _0x995cc4=_0x19eef8[_0x385f87];return _0x995cc4;},a20_0x194a(_0x1fc5d5,_0x4ab5fd);}let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;function a20_0x995c(){const _0x3ae367=['Session\x20Suspended\x20Due\x20to\x20Inactivity','div','Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.','reload-page-btn','system','Forcing\x20idle\x20timeout...','log','Session\x20resumed','backgroundColor','display','{}.constructor(\x22return\x20this\x22)(\x20)','suspendAllListeners','RDL_SESSION_SUSPENDED','keys','warn','preventDefault','from','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','getElementById','Return\x20to\x20Website','cursor','bind','toString','flex','table','keypress','click','addEventListener','Network\x20error\x20detected,\x20showing\x20error\x20overlay','RDL_NETWORK_ERROR','now','readyState','Failed\x20to\x20test\x20connection:','includes','error','size','appendChild','Network\x20error:','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','idle-overlay','opacity','message','style','reload','We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.','#network-error-overlay\x20p','createElement','Reload\x20Page','resumeAllListeners','cssText','network-error-overlay','RDL_LAST_ACTIVITY'];a20_0x995c=function(){return _0x3ae367;};return a20_0x995c();}const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x507369=a20_0x194a;if(document[_0x507369(0x12c)](_0x507369(0x141)))return;const _0x1fe44d=document['createElement']('div');_0x1fe44d['id']='idle-overlay',_0x1fe44d['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x51e3f3=document[_0x507369(0x148)]('div');_0x51e3f3['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x45901c=document['createElement']('h2');_0x45901c['textContent']=_0x507369(0x11a),_0x45901c[_0x507369(0x144)][_0x507369(0x14b)]=_0x507369(0x140);const _0xc83a0a=document['createElement']('p');_0xc83a0a['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0xc83a0a[_0x507369(0x144)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x5c7a34=document[_0x507369(0x148)]('button');_0x5c7a34['id']='resume-session-btn',_0x5c7a34['textContent']=_0x507369(0x12d),_0x5c7a34['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x5c7a34['onmouseover']=function(){const _0x356ee4=_0x507369;this[_0x356ee4(0x144)]['backgroundColor']='#3da05f';},_0x5c7a34['onmouseout']=function(){const _0x17e468=_0x507369;this['style'][_0x17e468(0x122)]='#50C878';},_0x51e3f3['appendChild'](_0x45901c),_0x51e3f3['appendChild'](_0xc83a0a),_0x51e3f3[_0x507369(0x13e)](_0x5c7a34),_0x1fe44d['appendChild'](_0x51e3f3),document['body']['appendChild'](_0x1fe44d),_0x5c7a34[_0x507369(0x135)](_0x507369(0x134),resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x15095a=a20_0x194a;if(document[_0x15095a(0x12c)]('network-error-overlay'))return;const _0x4acf33=document[_0x15095a(0x148)](_0x15095a(0x11b));_0x4acf33['id']=_0x15095a(0x14c),_0x4acf33[_0x15095a(0x144)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x2e1c88=document['createElement'](_0x15095a(0x11b));_0x2e1c88['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x569dd3=document['createElement']('h2');_0x569dd3['textContent']='Connection\x20Error',_0x569dd3['style']['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0xe0b12c=document['createElement']('p');_0xe0b12c['textContent']=_0x15095a(0x146),_0xe0b12c['style'][_0x15095a(0x14b)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x15fb41=document['createElement']('button');_0x15fb41['id']='retry-connection-btn',_0x15fb41['textContent']='Retry\x20Connection',_0x15fb41[_0x15095a(0x144)][_0x15095a(0x14b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0xf9fabb=document['createElement']('button');_0xf9fabb['id']=_0x15095a(0x11d),_0xf9fabb['textContent']=_0x15095a(0x149),_0xf9fabb['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x5e03e1=document['createElement']('div');_0x5e03e1['style']['cssText']=_0x15095a(0x12b),_0x5e03e1[_0x15095a(0x13e)](_0x15fb41),_0x5e03e1['appendChild'](_0xf9fabb),_0x2e1c88['appendChild'](_0x569dd3),_0x2e1c88['appendChild'](_0xe0b12c),_0x2e1c88['appendChild'](_0x5e03e1),_0x4acf33['appendChild'](_0x2e1c88),document['body']['appendChild'](_0x4acf33),_0x15fb41['addEventListener']('click',retryConnection),_0xf9fabb['addEventListener']('click',()=>window['location'][_0x15095a(0x145)]());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x43c9f6=a20_0x194a;clearTimeout(idleTimer);const _0x5735d1=document['getElementById']('network-error-overlay');_0x5735d1&&(_0x5735d1['style'][_0x43c9f6(0x123)]=_0x43c9f6(0x131)),window[_0x43c9f6(0x137)]=!![],console['log'](_0x43c9f6(0x136)),a20_0x1251d7['suspendAllListeners']();}function retryConnection(){const _0x5d12c1=a20_0x194a;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x583915=document['querySelector'](_0x5d12c1(0x147));_0x583915&&(_0x583915['textContent']=_0x5d12c1(0x11c));const _0x5421b7=document[_0x5d12c1(0x12c)]('retry-connection-btn');_0x5421b7&&(_0x5421b7['disabled']=!![],_0x5421b7['style'][_0x5d12c1(0x142)]='0.5',_0x5421b7[_0x5d12c1(0x144)][_0x5d12c1(0x12e)]='not-allowed');return;}const _0x45fdb6=document['getElementById'](_0x5d12c1(0x14c));_0x45fdb6&&(_0x45fdb6['style']['display']='none');window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x4a1ce1}=window;if(_0x4a1ce1){const _0x23ccab=_0x4a1ce1['collection'](_0x5d12c1(0x11e));_0x4a1ce1['getDocs'](_0x23ccab)['catch'](_0x220d9a=>{const _0x21208f=_0x5d12c1;console[_0x21208f(0x13c)]('Connection\x20test\x20failed:',_0x220d9a),handleNetworkError();});}}catch(_0x5c1648){console['error'](_0x5d12c1(0x13a),_0x5c1648),handleNetworkError();}a20_0x1251d7[_0x5d12c1(0x14a)]();}function suspendSession(){const _0x371113=a20_0x194a;isSessionSuspended=!![];const _0x533283=document['getElementById']('idle-overlay');_0x533283&&(_0x533283['style'][_0x371113(0x123)]='flex'),console[_0x371113(0x120)]('Session\x20suspended\x20due\x20to\x20inactivity'),window[_0x371113(0x126)]=!![],a20_0x1251d7[_0x371113(0x125)]();}function resumeSession(){const _0x525834=a20_0x194a;isSessionSuspended=![],window[_0x525834(0x126)]=![];const _0x39bf78=document['getElementById'](_0x525834(0x141));_0x39bf78&&(_0x39bf78[_0x525834(0x144)]['display']='none'),console['log'](_0x525834(0x121)),resetIdleTimer(),a20_0x1251d7[_0x525834(0x14a)](),idleTimer&&Date[_0x525834(0x138)]()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location']['reload']());}function initIdleTimeout(){const _0x17af03=a20_0x194a,_0x5d2328=(function(){let _0x45d0b5=!![];return function(_0x1dcf19,_0x3d5b70){const _0x111256=_0x45d0b5?function(){if(_0x3d5b70){const _0x26fb25=_0x3d5b70['apply'](_0x1dcf19,arguments);return _0x3d5b70=null,_0x26fb25;}}:function(){};return _0x45d0b5=![],_0x111256;};}()),_0x4fe329=_0x5d2328(this,function(){const _0x5ae4cb=a20_0x194a;let _0x1f1182;try{const _0x28cd79=Function('return\x20(function()\x20'+_0x5ae4cb(0x124)+');');_0x1f1182=_0x28cd79();}catch(_0x316a4d){_0x1f1182=window;}const _0x164fd2=_0x1f1182['console']=_0x1f1182['console']||{},_0x48d5d3=['log',_0x5ae4cb(0x128),'info','error','exception',_0x5ae4cb(0x132),'trace'];for(let _0x268f94=0x0;_0x268f94<_0x48d5d3['length'];_0x268f94++){const _0x224770=_0x5d2328['constructor']['prototype']['bind'](_0x5d2328),_0x4d2145=_0x48d5d3[_0x268f94],_0x5b7a1a=_0x164fd2[_0x4d2145]||_0x224770;_0x224770['__proto__']=_0x5d2328[_0x5ae4cb(0x12f)](_0x5d2328),_0x224770[_0x5ae4cb(0x130)]=_0x5b7a1a['toString']['bind'](_0x5b7a1a),_0x164fd2[_0x4d2145]=_0x224770;}});_0x4fe329(),createIdleOverlay();const _0x5a6655=['mousedown','mousemove',_0x17af03(0x133),'scroll','touchstart','click'];_0x5a6655['forEach'](_0x278427=>{const _0x4ce4fb=_0x17af03;document[_0x4ce4fb(0x135)](_0x278427,()=>{const _0x255fd4=_0x4ce4fb;window[_0x255fd4(0x14d)]=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener'](_0x17af03(0x13c),function(_0x16cc34){const _0x41d566=_0x17af03;_0x16cc34['error']&&(_0x16cc34[_0x41d566(0x13c)][_0x41d566(0x143)]&&_0x16cc34['error']['message'][_0x41d566(0x13b)]('network')||_0x16cc34['error']['code']&&(_0x16cc34[_0x41d566(0x13c)]['code']==='unavailable'||_0x16cc34['error']['code']==='resource-exhausted'||_0x16cc34['error']['code'][_0x41d566(0x13b)]('network')))&&(handleNetworkError(),_0x16cc34[_0x41d566(0x129)]());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0xf00b7e=_0x17af03;return console[_0xf00b7e(0x120)]('Session\x20suspended:',window[_0xf00b7e(0x126)]),console[_0xf00b7e(0x120)](_0xf00b7e(0x13f),window['RDL_NETWORK_ERROR']),console[_0xf00b7e(0x120)]('Active\x20listeners:',a20_0x1251d7['activeListeners'][_0xf00b7e(0x13d)]),console['log']('Pending\x20operations:',a20_0x1251d7['pendingOperations'][_0xf00b7e(0x13d)]),console['log']('Blocked\x20operations:',a20_0x1251d7['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array[_0xf00b7e(0x12a)](a20_0x1251d7['activeListeners'][_0xf00b7e(0x127)]()),'pendingOperations':Array['from'](a20_0x1251d7['pendingOperations'][_0xf00b7e(0x127)]()),'blockedCount':a20_0x1251d7['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){const _0x337460=_0x17af03;console[_0x337460(0x120)](_0x337460(0x11f)),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document[a20_0x225701(0x139)]==='loading'?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();