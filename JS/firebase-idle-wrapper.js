const a17_0x35e48c=a17_0x249b,a17_0x4c88f4=(function(){let _0x2696b1=!![];return function(_0x506689,_0x375027){const _0x385631=_0x2696b1?function(){if(_0x375027){const _0x339cee=_0x375027['apply'](_0x506689,arguments);return _0x375027=null,_0x339cee;}}:function(){};return _0x2696b1=![],_0x385631;};}()),a17_0x2035a3=a17_0x4c88f4(this,function(){const _0x664fc5=a17_0x249b,_0x33efbf=function(){let _0x5a84d4;try{_0x5a84d4=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5ea0cd){_0x5a84d4=window;}return _0x5a84d4;},_0x989402=_0x33efbf(),_0x4a6f8a=_0x989402['console']=_0x989402['console']||{},_0x2ff715=['log','warn','info','error','exception','table',_0x664fc5(0x10f)];for(let _0x1b46e0=0x0;_0x1b46e0<_0x2ff715['length'];_0x1b46e0++){const _0x5c803f=a17_0x4c88f4['constructor'][_0x664fc5(0x114)]['bind'](a17_0x4c88f4),_0x4f5efa=_0x2ff715[_0x1b46e0],_0x356a84=_0x4a6f8a[_0x4f5efa]||_0x5c803f;_0x5c803f['__proto__']=a17_0x4c88f4['bind'](a17_0x4c88f4),_0x5c803f['toString']=_0x356a84['toString'][_0x664fc5(0x125)](_0x356a84),_0x4a6f8a[_0x4f5efa]=_0x5c803f;}});a17_0x2035a3();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a17_0x249b(_0x580fee,_0x222512){const _0x2035a3=a17_0x285a();return a17_0x249b=function(_0x4c88f4,_0x490328){_0x4c88f4=_0x4c88f4-0xfd;let _0x285a30=_0x2035a3[_0x4c88f4];return _0x285a30;},a17_0x249b(_0x580fee,_0x222512);}class FirebaseIdleWrapper{constructor(){const _0x48d75d=a17_0x249b;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this[_0x48d75d(0x11b)]=![];}['checkSessionActive'](){const _0x3e3b76=a17_0x249b;if(window[_0x3e3b76(0x117)]===!![])return console[_0x3e3b76(0x110)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this[_0x3e3b76(0x106)]=(this[_0x3e3b76(0x106)]||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0x3e3b76(0x10c)+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async[a17_0x35e48c(0x108)](_0x51406d,_0x394259,..._0x489f99){const _0x32baad=a17_0x35e48c;if(!this['checkSessionActive']()){const _0x226060=_0x394259+'-'+Date['now']()+'-'+Math[_0x32baad(0xff)]()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x226060,{'operation':_0x51406d,'operationType':_0x394259,'args':_0x489f99}),!this['pendingTimeout']&&(this[_0x32baad(0x10a)]=setTimeout(()=>{const _0x4fb818=_0x32baad;this[_0x4fb818(0x11d)]['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x51406d(..._0x489f99);}catch(_0x4ea48b){if(_0x4ea48b['code']===_0x32baad(0x124)||_0x4ea48b['code']===_0x32baad(0x121)||_0x4ea48b['message']&&_0x4ea48b['message']['includes']('network'))return handleNetworkError(),null;throw _0x4ea48b;}}async['getDocument'](_0x2736b1){const _0x41d6b0=a17_0x35e48c;return this[_0x41d6b0(0x108)](getDoc,'get',_0x2736b1);}async['getDocuments'](_0x45fc99){return this['safeOperation'](getDocs,'query',_0x45fc99);}async['addDocument'](_0x5d4361,_0x3b26d6){return this['safeOperation'](addDoc,'add',_0x5d4361,_0x3b26d6);}async['setDocument'](_0x5cbdde,_0x47ece4,_0x21cac7={}){const _0x267a11=a17_0x35e48c;return this[_0x267a11(0x108)](setDoc,'set',_0x5cbdde,_0x47ece4,_0x21cac7);}async['updateDocument'](_0x435df3,_0x187e2a){return this['safeOperation'](updateDoc,'update',_0x435df3,_0x187e2a);}async['deleteDocument'](_0x226f59){const _0xeb318d=a17_0x35e48c;return this['safeOperation'](deleteDoc,_0xeb318d(0x11a),_0x226f59);}['suspendAllListeners'](){const _0x10af96=a17_0x35e48c;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners']['size']),this[_0x10af96(0x11c)]=new Map(this[_0x10af96(0x109)]),this[_0x10af96(0x109)]['forEach']((_0x12e43a,_0x30a3ad)=>{const _0x3da812=_0x10af96;console[_0x3da812(0x110)]('[FirebaseIdle]\x20Suspending\x20listener:',_0x30a3ad);if(typeof _0x12e43a==='function')try{_0x12e43a(),console[_0x3da812(0x110)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x30a3ad);}catch(_0x123539){console[_0x3da812(0x101)](_0x3da812(0x118),_0x30a3ad,_0x123539);}else{if(_0x12e43a&&typeof _0x12e43a['unsubscribe']==='function')try{_0x12e43a[_0x3da812(0x10e)](),console['log'](_0x3da812(0x113),_0x30a3ad);}catch(_0xda1552){console[_0x3da812(0x101)]('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x30a3ad,_0xda1552);}}}),this['activeListeners']['clear']();if(this['debug']){const _0x2c2275=document[_0x10af96(0x112)]('div');_0x2c2275['id']=_0x10af96(0x102),_0x2c2275[_0x10af96(0x115)][_0x10af96(0x126)]=_0x10af96(0x10d),_0x2c2275[_0x10af96(0x116)]=_0x10af96(0x100),document['body'][_0x10af96(0x128)](_0x2c2275);}console['log'](_0x10af96(0x127));}[a17_0x35e48c(0x103)](){const _0x111677=a17_0x35e48c;if(!this['_suspendedListeners']||this['_suspendedListeners'][_0x111677(0xfd)]===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console[_0x111677(0x110)]('[FirebaseIdle]\x20Resuming\x20listeners:',this[_0x111677(0x11c)][_0x111677(0xfd)]),this[_0x111677(0x11c)]['forEach']((_0x2ab6d1,_0xe8271d)=>{const _0x50c069=_0x111677;console['log'](_0x50c069(0x122),_0xe8271d);try{if(typeof _0x2ab6d1===_0x50c069(0x111)){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0xe8271d);return;}const {query:_0x292693,callback:_0x148cdd,options:_0x1d09c3}=_0x2ab6d1;if(_0x292693&&_0x148cdd){const _0x38c875=onSnapshot(_0x292693,_0x148cdd,_0x1d09c3||{});this['activeListeners']['set'](_0xe8271d,_0x38c875),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0xe8271d);}}catch(_0xb72f21){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0xe8271d,_0xb72f21);}}),this['_suspendedListeners']['clear']();const _0x36d824=document['getElementById'](_0x111677(0x102));_0x36d824&&_0x36d824['remove'](),console[_0x111677(0x110)]('[FirebaseIdle]\x20Listeners\x20resumed');}[a17_0x35e48c(0x120)](_0x53ac9d,_0xf7271a,_0x5a9581={},_0x1263d2=null){const _0x5b0422=a17_0x35e48c,_0x262de8=_0x1263d2||_0x5b0422(0x105)+Date['now']()+'_'+Math[_0x5b0422(0xff)]()[_0x5b0422(0x11f)](0x24)[_0x5b0422(0x12a)](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x262de8);if(!this['checkSessionActive']())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x262de8),()=>{};try{const _0x4be534=onSnapshot(_0x53ac9d,_0xf7271a,_0x5a9581);return this['activeListeners']['set'](_0x262de8,{'unsubscribe':_0x4be534,'query':_0x53ac9d,'callback':_0xf7271a,'options':_0x5a9581}),this[_0x5b0422(0x11b)]&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x262de8),console[_0x5b0422(0x110)](_0x5b0422(0x104)+this['activeListeners']['size'])),()=>{const _0x1f5650=_0x5b0422;this['debug']&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x262de8);try{_0x4be534(),this[_0x1f5650(0x109)]['delete'](_0x262de8),this[_0x1f5650(0x11b)]&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x262de8),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x233211){console[_0x1f5650(0x101)]('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x262de8+':',_0x233211);}};}catch(_0x5b8345){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x262de8+':',_0x5b8345),()=>{};}}['executePendingOperations'](_0x5c1506='all'){const _0x17b062=a17_0x35e48c;console[_0x17b062(0x110)](_0x17b062(0x123)+_0x5c1506+'\x20operations:\x20'+this['pendingOperations'][_0x17b062(0xfd)]+'\x20total\x20operations');const _0x164fa5=new Map(this['pendingOperations']);this[_0x17b062(0x11d)]['clear'](),_0x164fa5[_0x17b062(0x10b)]((_0x17e4ab,_0x552a94)=>{const _0x55eb8e=_0x17b062;_0x5c1506==='all'||_0x17e4ab['operationType']===_0x5c1506?(console['log'](_0x55eb8e(0x119)+_0x17e4ab['operationType']+'\x20operation'),this['safeOperation'](_0x17e4ab['operation'],_0x17e4ab['operationType'],..._0x17e4ab['args'])['catch'](_0xc8b942=>console[_0x55eb8e(0x101)](_0x55eb8e(0xfe),_0xc8b942))):this['pendingOperations'][_0x55eb8e(0x11e)](_0x552a94,_0x17e4ab);});}[a17_0x35e48c(0x107)](_0x18a7e0=!![]){const _0xa542c7=a17_0x35e48c;this['debug']=_0x18a7e0,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x18a7e0?'enabled':'disabled'));if(_0x18a7e0){const _0x1e4260=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log'](_0xa542c7(0x129)),this['getDocument'](doc(db,'system','test'))['then'](_0x1821c4=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x1821c4);})['catch'](_0x98d08=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x98d08);})['finally'](()=>{const _0x415216=_0xa542c7;console[_0x415216(0x110)]('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x1e4260;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x3906cc=window['suspendSession']||function(){},_0x4963e5=window['resumeSession']||function(){};window['suspendSession']=function(){_0x3906cc(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){_0x4963e5(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;function a17_0x285a(){const _0x43f61a=['size','Error\x20executing\x20pending\x20operation:','random','Firebase:\x20Suspended','error','firebase-suspend-indicator','resumeAllListeners','[FirebaseIdle]\x20Active\x20listeners:\x20','listener_','blockedOperations','enableDebug','safeOperation','activeListeners','pendingTimeout','forEach','[FirebaseIdle]\x20Blocked\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','unsubscribe','trace','log','function','createElement','[FirebaseIdle]\x20Successfully\x20suspended\x20listener:','prototype','style','textContent','RDL_SESSION_SUSPENDED','[FirebaseIdle]\x20Error\x20suspending\x20listener:','Executing\x20delayed\x20','delete','debug','_suspendedListeners','pendingOperations','set','toString','createListener','resource-exhausted','[FirebaseIdle]\x20Resuming\x20listener:','Executing\x20pending\x20','unavailable','bind','cssText','[FirebaseIdle]\x20All\x20listeners\x20suspended','appendChild','[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...','substr'];a17_0x285a=function(){return _0x43f61a;};return a17_0x285a();}