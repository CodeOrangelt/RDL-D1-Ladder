const a33_0x1dfa10=a33_0x535e;(function(_0x135b79,_0x3ba45b){const _0x351a33=a33_0x535e,_0x591186=_0x135b79();while(!![]){try{const _0x253fa5=-parseInt(_0x351a33(0x13d))/0x1*(parseInt(_0x351a33(0x135))/0x2)+-parseInt(_0x351a33(0xf6))/0x3+-parseInt(_0x351a33(0xee))/0x4*(-parseInt(_0x351a33(0xd0))/0x5)+parseInt(_0x351a33(0xfa))/0x6*(parseInt(_0x351a33(0x14b))/0x7)+parseInt(_0x351a33(0xe4))/0x8*(-parseInt(_0x351a33(0xe1))/0x9)+parseInt(_0x351a33(0xdf))/0xa+parseInt(_0x351a33(0xd1))/0xb;if(_0x253fa5===_0x3ba45b)break;else _0x591186['push'](_0x591186['shift']());}catch(_0x3e485a){_0x591186['push'](_0x591186['shift']());}}}(a33_0x1b51,0x1b014));const a33_0x4fa06a=(function(){let _0x5077e0=!![];return function(_0x193eea,_0x141aa2){const _0x538750=_0x5077e0?function(){const _0x22833c=a33_0x535e;if(_0x141aa2){const _0x2f9496=_0x141aa2[_0x22833c(0xe9)](_0x193eea,arguments);return _0x141aa2=null,_0x2f9496;}}:function(){};return _0x5077e0=![],_0x538750;};}()),a33_0x388b87=a33_0x4fa06a(this,function(){const _0x4a7d11=a33_0x535e;return a33_0x388b87[_0x4a7d11(0x14e)]()['search'](_0x4a7d11(0xcf))[_0x4a7d11(0x14e)]()[_0x4a7d11(0xfc)](a33_0x388b87)[_0x4a7d11(0xef)](_0x4a7d11(0xcf));});a33_0x388b87();const a33_0x1ea268=(function(){let _0x5cea95=!![];return function(_0x28bae6,_0x47ed88){const _0x1b1678=_0x5cea95?function(){const _0x35f8ec=a33_0x535e;if(_0x47ed88){const _0x231e37=_0x47ed88[_0x35f8ec(0xe9)](_0x28bae6,arguments);return _0x47ed88=null,_0x231e37;}}:function(){};return _0x5cea95=![],_0x1b1678;};}()),a33_0x260a47=a33_0x1ea268(this,function(){const _0x51c12c=a33_0x535e,_0x1c7e9e=function(){const _0x5454a5=a33_0x535e;let _0x1cfa31;try{_0x1cfa31=Function('return\x20(function()\x20'+_0x5454a5(0xe3)+');')();}catch(_0x5795a8){_0x1cfa31=window;}return _0x1cfa31;},_0x40847b=_0x1c7e9e(),_0x2b8e0d=_0x40847b[_0x51c12c(0x121)]=_0x40847b[_0x51c12c(0x121)]||{},_0x571b9e=[_0x51c12c(0x14a),_0x51c12c(0x10e),_0x51c12c(0x100),_0x51c12c(0x122),_0x51c12c(0xf9),_0x51c12c(0xd5),'trace'];for(let _0x5ad2fa=0x0;_0x5ad2fa<_0x571b9e[_0x51c12c(0x139)];_0x5ad2fa++){const _0x465444=a33_0x1ea268[_0x51c12c(0xfc)]['prototype']['bind'](a33_0x1ea268),_0x51c15a=_0x571b9e[_0x5ad2fa],_0x4918c0=_0x2b8e0d[_0x51c15a]||_0x465444;_0x465444[_0x51c12c(0xd8)]=a33_0x1ea268['bind'](a33_0x1ea268),_0x465444['toString']=_0x4918c0[_0x51c12c(0x14e)][_0x51c12c(0x120)](_0x4918c0),_0x2b8e0d[_0x51c15a]=_0x465444;}});function a33_0x1b51(){const _0x3b2985=['exception','1076022uMEsfd','inline','constructor','size','previousElo','change','info','totalKills','#FFD700','toFixed','firstPlaceDate','kda','color','desc','winRate','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>','find','filter','td:nth-child(3)','has','warn','string','style','message','#ladder-d3\x20thead\x20tr','D3:\x20','gray','loserScore','#50C878',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20entries\x20in\x20eloHistoryD3','D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:','includes','timestamp','.trend-indicator','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','seconds','\x20fallback\x20entries','bind','console','error','userProfiles','username','player','data','\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a','innerHTML','now','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','from','set','wins','catch','toLowerCase','newElo','D3:\x20Found\x20entries\x20for\x20','toDate','loserUsername','\x20players','2rUYXdF','opacity','gameMode','push','length','D3:\x20Player\x20ID\x20mappings:','totalDeaths','forEach','176395QXoccM','querySelectorAll','D3:\x20Fallback\x20query\x20failed:','empty',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','createElement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','ceil','playerId','map','losses','eloHistory','position','log','7CpAApy','eloHistoryD3','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','toString','pilot','querySelector','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','%</td>\x0a\x20\x20\x20\x20</tr>','appendChild','D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...','(((.+)+)+)+$','53990dSlime','3235936PGVXLH','#CD7F32','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','playerUsername','table','playersD3','Error\x20loading\x20D3\x20ladder:','__proto__','country','#4CAF50','winnerScore','sort','#C0C0C0','Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:','42840LqYkej','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','18yYfgeo','fontSize','{}.constructor(\x22return\x20this\x22)(\x20)','130104HHRzcL','totalMatches','entries','D3\x20Ladder\x20table\x20body\x20not\x20found','textContent','apply','D3:\x20Found\x20','D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...','then','get','8zYrKCi','search','eloRating','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20','\x20ELO\x20change:\x20','<img\x20src=\x22../images/flags/','elo','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list','539580aKbZkG','D3:\x20Found\x20pilot\x20entry:','MAX_SAFE_INTEGER'];a33_0x1b51=function(){return _0x3b2985;};return a33_0x1b51();}a33_0x260a47();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x180470 from'./firebase-idle-wrapper.js';function a33_0x535e(_0x4f061b,_0x139105){const _0x200019=a33_0x1b51();return a33_0x535e=function(_0x260a47,_0x1ea268){_0x260a47=_0x260a47-0xcf;let _0x35c02f=_0x200019[_0x260a47];return _0x35c02f;},a33_0x535e(_0x4f061b,_0x139105);}const styleEl=document[a33_0x1dfa10(0x142)](a33_0x1dfa10(0x110));styleEl[a33_0x1dfa10(0xe8)]=a33_0x1dfa10(0x127),document['head'][a33_0x1dfa10(0x153)](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0xacbbea=![]){const _0x3418e6=a33_0x1dfa10,_0x54d315=document['querySelector']('#ladder-d3\x20tbody');if(!_0x54d315){console[_0x3418e6(0x122)](_0x3418e6(0xe7));return;}_0x54d315[_0x3418e6(0x128)]=_0x3418e6(0x109);try{const _0xe7c992=Date[_0x3418e6(0x129)]();if(!_0xacbbea&&playerCacheD3['data']&&_0xe7c992-playerCacheD3[_0x3418e6(0x11b)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3[_0x3418e6(0x126)]);return;}const _0x4f0080=collection(db,_0x3418e6(0xd6)),_0x12a85b=await getDocs(_0x4f0080),_0x34519e=[];_0x12a85b[_0x3418e6(0x13c)](_0x47acd7=>{const _0x3411ab=_0x3418e6,_0x48ff1f=_0x47acd7[_0x3411ab(0x126)]();_0x48ff1f[_0x3411ab(0x124)]&&_0x34519e[_0x3411ab(0x138)]({..._0x48ff1f,'id':_0x47acd7['id'],'elo':_0x48ff1f[_0x3411ab(0xf0)]||0x0,'position':_0x48ff1f[_0x3411ab(0x149)]||Number[_0x3411ab(0xf8)]});});const _0x11864a=collection(db,_0x3418e6(0x123)),_0x46a28e=await getDocs(_0x11864a),_0x3d08b2=new Map();_0x46a28e[_0x3418e6(0x13c)](_0x36ea46=>{const _0x44b0fc=_0x3418e6,_0x448dbc=_0x36ea46[_0x44b0fc(0x126)]();_0x448dbc['username']&&_0x3d08b2[_0x44b0fc(0x12c)](_0x448dbc[_0x44b0fc(0x124)][_0x44b0fc(0x12f)](),_0x448dbc);});for(const _0x2c0b7a of _0x34519e){const _0x3ac4e5=_0x2c0b7a[_0x3418e6(0x124)][_0x3418e6(0x12f)]();if(_0x3d08b2['has'](_0x3ac4e5)){const _0x2bbefe=_0x3d08b2[_0x3418e6(0xed)](_0x3ac4e5);_0x2bbefe[_0x3418e6(0xd9)]&&(_0x2c0b7a[_0x3418e6(0xd9)]=_0x2bbefe['country']['toLowerCase']());}}const _0x4ab3da=_0x34519e['map'](_0x58114a=>_0x58114a[_0x3418e6(0x124)]),_0x245abd=await fetchBatchMatchStatsD3(_0x4ab3da);_0x34519e[_0x3418e6(0xdc)]((_0x31c1e1,_0x3e0d0b)=>{const _0xe1054d=_0x3418e6,_0x5f0de4=_0x245abd[_0xe1054d(0xed)](_0x31c1e1[_0xe1054d(0x124)])?.[_0xe1054d(0xe5)]||0x0,_0x4689cc=_0x245abd[_0xe1054d(0xed)](_0x3e0d0b[_0xe1054d(0x124)])?.[_0xe1054d(0xe5)]||0x0;if(_0x5f0de4===0x0!==(_0x4689cc===0x0))return _0x5f0de4===0x0?0x1:-0x1;return(_0x31c1e1['position']||0x3e7)-(_0x3e0d0b[_0xe1054d(0x149)]||0x3e7);}),_0x34519e[_0x3418e6(0x13c)]((_0x123b99,_0x53bc52)=>{const _0x20938f=_0x3418e6;_0x123b99[_0x20938f(0x149)]=_0x53bc52+0x1;}),playerCacheD3['data']=_0x34519e,playerCacheD3[_0x3418e6(0x11b)]=_0xe7c992,updateLadderDisplayD3(_0x34519e);}catch(_0xea0f9e){console[_0x3418e6(0x122)](_0x3418e6(0xd7),_0xea0f9e),_0x54d315['innerHTML']=_0x3418e6(0xf1)+_0xea0f9e[_0x3418e6(0x111)]+_0x3418e6(0x151);}}function calculateStreakDays(_0x7a8160){const _0x2cdfad=a33_0x1dfa10;if(!_0x7a8160)return 0x0;const _0x450f23=_0x7a8160[_0x2cdfad(0x132)](),_0x386ef6=new Date(),_0x2fa894=Math['abs'](_0x386ef6-_0x450f23);return Math[_0x2cdfad(0x144)](_0x2fa894/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x3d0938,_0x45c6f4){const _0x318982=a33_0x1dfa10;try{const _0x574041=collection(db,'playersD3'),_0x4b9e86=await getDocs(_0x574041),_0x58d8b8=[];_0x4b9e86[_0x318982(0x13c)](_0x296f6f=>{const _0x40b08d=_0x318982;_0x58d8b8[_0x40b08d(0x138)]({'id':_0x296f6f['id'],..._0x296f6f[_0x40b08d(0x126)]()});});const _0x21d0f6=_0x58d8b8[_0x318982(0x10a)](_0x15f785=>_0x15f785[_0x318982(0x124)]===_0x3d0938),_0x28e7f3=_0x58d8b8[_0x318982(0x10a)](_0x3f617b=>_0x3f617b[_0x318982(0x124)]===_0x45c6f4);if(!_0x21d0f6||!_0x28e7f3){console[_0x318982(0x122)](_0x318982(0xf5));return;}if(_0x21d0f6[_0x318982(0x149)]>_0x28e7f3[_0x318982(0x149)]){const _0x38fc52=_0x28e7f3['position'];for(const _0x2f5068 of _0x58d8b8){_0x2f5068[_0x318982(0x149)]>=_0x28e7f3['position']&&_0x2f5068[_0x318982(0x149)]<_0x21d0f6[_0x318982(0x149)]&&_0x2f5068[_0x318982(0x124)]!==_0x3d0938&&await updateDoc(doc(db,_0x318982(0xd6),_0x2f5068['id']),{'position':_0x2f5068[_0x318982(0x149)]+0x1});}await updateDoc(doc(db,_0x318982(0xd6),_0x21d0f6['id']),{'position':_0x38fc52});if(_0x38fc52===0x1){const _0x337df8=doc(db,_0x318982(0xd6),_0x21d0f6['id']),_0x58a764=await getDoc(_0x337df8);!_0x58a764['data']()[_0x318982(0x104)]&&await updateDoc(_0x337df8,{'firstPlaceDate':Timestamp[_0x318982(0x129)]()});}if(_0x28e7f3['position']===0x1){const _0x2dd02c=doc(db,_0x318982(0xd6),_0x28e7f3['id']);await updateDoc(_0x2dd02c,{'firstPlaceDate':null});}}}catch(_0x26fe65){console[_0x318982(0x122)]('Error\x20updating\x20D3\x20player\x20positions:',_0x26fe65);}}async function updateLadderDisplayD3(_0x519f97){const _0x57a794=a33_0x1dfa10;_0x519f97[_0x57a794(0xdc)]((_0x1f4ac6,_0x193080)=>_0x1f4ac6[_0x57a794(0x149)]-_0x193080['position']);const _0x17b888=document['querySelector']('#ladder-d3\x20tbody');if(!_0x17b888)return;_0x17b888[_0x57a794(0x128)]='';const _0x45c2da=_0x519f97[_0x57a794(0x146)](_0xbe7f75=>_0xbe7f75[_0x57a794(0x124)]),_0x81cbe=await fetchBatchMatchStatsD3(_0x45c2da),_0x1c2e01=document[_0x57a794(0x150)](_0x57a794(0x112));_0x1c2e01[_0x57a794(0x128)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0x3ba823=_0x519f97[_0x57a794(0x146)](_0x6cab87=>{const _0x3510d7=_0x57a794,_0xf3fbf9=_0x81cbe[_0x3510d7(0xed)](_0x6cab87[_0x3510d7(0x124)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x6cab87,_0xf3fbf9);})['join']('');_0x17b888[_0x57a794(0x128)]=_0x3ba823,getPlayersLastEloChangesD3(_0x45c2da)[_0x57a794(0xec)](_0x44c824=>{const _0x421260=_0x57a794,_0x48107d=new Map();_0x17b888[_0x421260(0x13e)]('tr')[_0x421260(0x13c)]((_0x4cace0,_0x93ac97)=>{const _0x5ca021=_0x421260;_0x93ac97<_0x45c2da[_0x5ca021(0x139)]&&_0x48107d[_0x5ca021(0x12c)](_0x45c2da[_0x93ac97],_0x4cace0);}),_0x44c824['forEach']((_0x4eb9f6,_0x2d841e)=>{const _0x46cf02=_0x421260,_0x33cf2a=_0x48107d[_0x46cf02(0xed)](_0x2d841e);if(_0x33cf2a&&_0x4eb9f6!==0x0){const _0x464be7=_0x33cf2a[_0x46cf02(0x150)](_0x46cf02(0x10c));if(_0x464be7){const _0x4d03cc=_0x4eb9f6>0x0?'+'+_0x4eb9f6:''+_0x4eb9f6,_0x34f74a=_0x464be7[_0x46cf02(0x150)](_0x46cf02(0x11c));_0x34f74a&&(_0x34f74a[_0x46cf02(0xe8)]=_0x4d03cc,_0x34f74a[_0x46cf02(0x110)][_0x46cf02(0x106)]=_0x4eb9f6>0x0?_0x46cf02(0xda):'#F44336',_0x34f74a[_0x46cf02(0x110)]['fontWeight']='bold',_0x34f74a[_0x46cf02(0x110)][_0x46cf02(0xe2)]='0.85em',_0x34f74a[_0x46cf02(0x110)]['display']=_0x46cf02(0xfb),_0x34f74a[_0x46cf02(0x110)]['visibility']='visible',_0x34f74a[_0x46cf02(0x110)][_0x46cf02(0x136)]='1');}}});})[_0x57a794(0x12e)](_0x36f1a7=>console['error'](_0x57a794(0xde),_0x36f1a7));}async function fetchBatchMatchStatsD3(_0x4e939d){const _0x191d9c=a33_0x1dfa10,_0x59d496=new Map();try{const _0x2fed71=collection(db,'approvedMatchesD3'),_0x3d0838=await getDocs(_0x2fed71);_0x3d0838['forEach'](_0x3c400d=>{const _0x8a2340=a33_0x535e,_0x4a1c8d=_0x3c400d[_0x8a2340(0x126)]();if(_0x4e939d[_0x8a2340(0x11a)](_0x4a1c8d['winnerUsername'])){const _0x50f657=_0x4a1c8d['winnerUsername'];!_0x59d496[_0x8a2340(0x10d)](_0x50f657)&&_0x59d496[_0x8a2340(0x12c)](_0x50f657,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x4cbed3=_0x59d496[_0x8a2340(0xed)](_0x50f657);_0x4cbed3[_0x8a2340(0x12d)]++,_0x4cbed3[_0x8a2340(0xe5)]++,_0x4cbed3[_0x8a2340(0x101)]+=parseInt(_0x4a1c8d[_0x8a2340(0xdb)])||0x0,_0x4cbed3[_0x8a2340(0x13b)]+=parseInt(_0x4a1c8d['loserScore'])||0x0;}if(_0x4e939d['includes'](_0x4a1c8d['loserUsername'])){const _0x4d521b=_0x4a1c8d[_0x8a2340(0x133)];!_0x59d496[_0x8a2340(0x10d)](_0x4d521b)&&_0x59d496[_0x8a2340(0x12c)](_0x4d521b,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x3ebb70=_0x59d496[_0x8a2340(0xed)](_0x4d521b);_0x3ebb70[_0x8a2340(0x147)]++,_0x3ebb70['totalMatches']++,_0x3ebb70[_0x8a2340(0x101)]+=parseInt(_0x4a1c8d[_0x8a2340(0x115)])||0x0,_0x3ebb70[_0x8a2340(0x13b)]+=parseInt(_0x4a1c8d['winnerScore'])||0x0;}}),_0x59d496['forEach'](_0x55c97c=>{const _0x21dcb5=a33_0x535e;_0x55c97c['kda']=_0x55c97c[_0x21dcb5(0x13b)]>0x0?(_0x55c97c[_0x21dcb5(0x101)]/_0x55c97c[_0x21dcb5(0x13b)])[_0x21dcb5(0x103)](0x2):_0x55c97c[_0x21dcb5(0x101)],_0x55c97c[_0x21dcb5(0x108)]=_0x55c97c[_0x21dcb5(0xe5)]>0x0?(_0x55c97c[_0x21dcb5(0x12d)]/_0x55c97c['totalMatches']*0x64)[_0x21dcb5(0x103)](0x1):0x0;});}catch(_0x33ebad){console[_0x191d9c(0x122)]('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x33ebad);}return _0x59d496;}function createPlayerRowD3(_0x356d35,_0x4e1db3){const _0x542230=a33_0x1dfa10,_0x7dfb31=parseFloat(_0x356d35[_0x542230(0xf4)])||0x0;let _0x3dde1c=_0x542230(0x114);if(_0x7dfb31>=0x7d0)_0x3dde1c=_0x542230(0x116);else{if(_0x7dfb31>=0x708)_0x3dde1c=_0x542230(0x102);else{if(_0x7dfb31>=0x640)_0x3dde1c=_0x542230(0xdd);else _0x7dfb31>=0x578&&(_0x3dde1c=_0x542230(0xd2));}}let _0x1fe05d='';return _0x356d35[_0x542230(0xd9)]&&(_0x1fe05d=_0x542230(0xf3)+_0x356d35['country'][_0x542230(0x12f)]()+_0x542230(0xd3)+_0x356d35[_0x542230(0xd9)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x356d35[_0x542230(0x149)]+_0x542230(0x12a)+encodeURIComponent(_0x356d35[_0x542230(0x124)])+_0x542230(0x14d)+_0x3dde1c+_0x542230(0x117)+_0x356d35['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1fe05d+_0x542230(0x143)+_0x3dde1c+_0x542230(0x141)+_0x7dfb31+_0x542230(0xe0)+_0x4e1db3[_0x542230(0xe5)]+_0x542230(0x11d)+_0x4e1db3[_0x542230(0x12d)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4e1db3[_0x542230(0x147)]+_0x542230(0x11d)+_0x4e1db3[_0x542230(0x105)]+_0x542230(0x11d)+_0x4e1db3[_0x542230(0x108)]+_0x542230(0x152);}async function getPlayersLastEloChangesD3(_0x3db814){const _0xe7bb01=a33_0x1dfa10,_0x154a3a=new Map();_0x3db814[_0xe7bb01(0x13c)](_0x59ee7c=>_0x154a3a[_0xe7bb01(0x12c)](_0x59ee7c,0x0));try{console[_0xe7bb01(0x14a)](_0xe7bb01(0x119),_0x3db814);const _0x46b1ea=new Map(),_0x5923c2=await getDocs(collection(db,'playersD3'));_0x5923c2[_0xe7bb01(0x13c)](_0x21838=>{const _0xfa165c=_0xe7bb01,_0x162797=_0x21838[_0xfa165c(0x126)]();_0x162797[_0xfa165c(0x124)]&&_0x46b1ea['set'](_0x21838['id'],_0x162797[_0xfa165c(0x124)]);}),console[_0xe7bb01(0x14a)](_0xe7bb01(0x13a),Array[_0xe7bb01(0x12b)](_0x46b1ea['entries']()));const _0x72ba45=collection(db,_0xe7bb01(0x14c)),_0x253b5a=query(_0x72ba45,orderBy(_0xe7bb01(0x11b),'desc'),limit(0x64)),_0x1529cd=await getDocs(_0x253b5a);_0x1529cd[_0xe7bb01(0x140)]?console[_0xe7bb01(0x14a)](_0xe7bb01(0xeb)):console['log']('D3:\x20Found\x20'+_0x1529cd['size']+_0xe7bb01(0x118));const _0x2e2c49=new Map();_0x1529cd['forEach'](_0xe5a449=>{const _0xb501d3=_0xe7bb01,_0x2ff2dd=_0xe5a449[_0xb501d3(0x126)]();let _0x3990eb=null;if(_0x2ff2dd[_0xb501d3(0x124)])_0x3990eb=_0x2ff2dd[_0xb501d3(0x124)];else{if(_0x2ff2dd['playerUsername'])_0x3990eb=_0x2ff2dd[_0xb501d3(0xd4)];else{if(_0x2ff2dd[_0xb501d3(0x125)]&&typeof _0x2ff2dd[_0xb501d3(0x125)]===_0xb501d3(0x10f))_0x3990eb=_0x2ff2dd['player'];else{if(_0x2ff2dd[_0xb501d3(0x125)]&&_0x46b1ea[_0xb501d3(0x10d)](_0x2ff2dd[_0xb501d3(0x125)]))_0x3990eb=_0x46b1ea[_0xb501d3(0xed)](_0x2ff2dd[_0xb501d3(0x125)]);else _0x2ff2dd[_0xb501d3(0x145)]&&_0x46b1ea['has'](_0x2ff2dd[_0xb501d3(0x145)])&&(_0x3990eb=_0x46b1ea[_0xb501d3(0xed)](_0x2ff2dd[_0xb501d3(0x145)]));}}}(_0x2ff2dd[_0xb501d3(0x124)]==='pilot'||_0x2ff2dd['playerUsername']===_0xb501d3(0x14f)||_0x2ff2dd['player']&&_0x46b1ea['get'](_0x2ff2dd[_0xb501d3(0x125)])===_0xb501d3(0x14f))&&console[_0xb501d3(0x14a)](_0xb501d3(0xf7),_0x2ff2dd),_0x3990eb&&_0x3db814[_0xb501d3(0x11a)](_0x3990eb)&&(!_0x2e2c49['has'](_0x3990eb)&&_0x2e2c49['set'](_0x3990eb,[]),_0x2e2c49[_0xb501d3(0xed)](_0x3990eb)['push']({..._0x2ff2dd,'timestamp':_0x2ff2dd[_0xb501d3(0x11b)]?.[_0xb501d3(0x11e)]||0x0}));}),console[_0xe7bb01(0x14a)](_0xe7bb01(0x131)+_0x2e2c49['size']+_0xe7bb01(0x134)),_0x2e2c49[_0xe7bb01(0x13c)]((_0x287a54,_0x7a15b4)=>{const _0xa7dd98=_0xe7bb01;if(_0x287a54['length']>0x0){_0x287a54['sort']((_0x181437,_0x3cfc11)=>_0x3cfc11[_0xa7dd98(0x11b)]-_0x181437['timestamp']);const _0x51b531=_0x287a54[_0xa7dd98(0x10a)](_0x1276ac=>_0x1276ac['change']!==undefined||_0x1276ac[_0xa7dd98(0x130)]!==undefined&&_0x1276ac['previousElo']!==undefined);if(_0x51b531){let _0x20fb3e;if(_0x51b531[_0xa7dd98(0xff)]!==undefined)_0x20fb3e=_0x51b531[_0xa7dd98(0xff)];else _0x51b531[_0xa7dd98(0x130)]!==undefined&&_0x51b531[_0xa7dd98(0xfe)]!==undefined&&(_0x20fb3e=_0x51b531[_0xa7dd98(0x130)]-_0x51b531['previousElo']);_0x20fb3e!==undefined&&(_0x154a3a[_0xa7dd98(0x12c)](_0x7a15b4,_0x20fb3e),console[_0xa7dd98(0x14a)](_0xa7dd98(0x113)+_0x7a15b4+_0xa7dd98(0xf2)+_0x20fb3e));}}});if(_0x2e2c49[_0xe7bb01(0xfd)]===0x0){console[_0xe7bb01(0x14a)](_0xe7bb01(0x154));const _0x5763fd=collection(db,_0xe7bb01(0x148)),_0x42f2b5=query(_0x5763fd,where(_0xe7bb01(0x137),'==','D3'),orderBy('timestamp',_0xe7bb01(0x107)),limit(0x32));try{const _0x215fa8=await getDocs(_0x42f2b5);console[_0xe7bb01(0x14a)](_0xe7bb01(0xea)+_0x215fa8[_0xe7bb01(0xfd)]+_0xe7bb01(0x11f)),_0x215fa8[_0xe7bb01(0x13c)](_0x1b7894=>{const _0x331628=_0xe7bb01,_0x48d556=_0x1b7894[_0x331628(0x126)]();let _0x20a351=_0x48d556[_0x331628(0x124)]||_0x48d556[_0x331628(0xd4)];!_0x20a351&&_0x48d556[_0x331628(0x125)]&&_0x46b1ea['has'](_0x48d556[_0x331628(0x125)])&&(_0x20a351=_0x46b1ea[_0x331628(0xed)](_0x48d556[_0x331628(0x125)]));if(_0x20a351&&_0x3db814[_0x331628(0x11a)](_0x20a351)){const _0xedc3a3=_0x48d556[_0x331628(0xff)]||(_0x48d556[_0x331628(0x130)]!==undefined&&_0x48d556[_0x331628(0xfe)]!==undefined?_0x48d556[_0x331628(0x130)]-_0x48d556['previousElo']:0x0);_0xedc3a3!==0x0&&(_0x154a3a['set'](_0x20a351,_0xedc3a3),console['log'](_0x331628(0x113)+_0x20a351+'\x20fallback\x20ELO\x20change:\x20'+_0xedc3a3));}});}catch(_0xab422c){console[_0xe7bb01(0x14a)](_0xe7bb01(0x13f),_0xab422c);}}const _0x52287c=Array['from'](_0x154a3a[_0xe7bb01(0xe6)]())[_0xe7bb01(0x10b)](([_0xfddb0b,_0xa3e69e])=>_0xa3e69e!==0x0);console['log']('D3:\x20Final\x20ELO\x20changes:',_0x52287c);}catch(_0x32bb49){console['error']('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x32bb49);}return _0x154a3a;}export{displayLadderD3,updatePlayerPositions};