const a45_0x10cf21=(function(){let _0x1ce552=!![];return function(_0x2ca636,_0x5201e2){const _0x1c77c6=_0x1ce552?function(){if(_0x5201e2){const _0x1624e4=_0x5201e2['apply'](_0x2ca636,arguments);return _0x5201e2=null,_0x1624e4;}}:function(){};return _0x1ce552=![],_0x1c77c6;};}()),a45_0x40060d=a45_0x10cf21(this,function(){const _0x51cda4=a45_0x3b18,_0x222199=function(){let _0x26d17f;try{_0x26d17f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xe02ad2){_0x26d17f=window;}return _0x26d17f;},_0x2ce64b=_0x222199(),_0x1a85d5=_0x2ce64b['console']=_0x2ce64b['console']||{},_0x17cc95=['log',_0x51cda4(0x134),'info','error','exception',_0x51cda4(0x136),'trace'];for(let _0x2b84aa=0x0;_0x2b84aa<_0x17cc95[_0x51cda4(0x135)];_0x2b84aa++){const _0x32901c=a45_0x10cf21['constructor']['prototype'][_0x51cda4(0x12c)](a45_0x10cf21),_0x48bc20=_0x17cc95[_0x2b84aa],_0x2317c0=_0x1a85d5[_0x48bc20]||_0x32901c;_0x32901c['__proto__']=a45_0x10cf21['bind'](a45_0x10cf21),_0x32901c[_0x51cda4(0x139)]=_0x2317c0['toString'][_0x51cda4(0x12c)](_0x2317c0),_0x1a85d5[_0x48bc20]=_0x32901c;}});a45_0x40060d();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x41e9cd){const _0x1a1522=a45_0x3b18,_0x31a4b1=document['getElementById']('queue-container');if(!_0x31a4b1)return;if(_0x41e9cd['length']===0x0){_0x31a4b1['style'][_0x1a1522(0x132)]='none';return;}_0x31a4b1[_0x1a1522(0x13b)][_0x1a1522(0x132)]='block';let _0x5bd7e9='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x41e9cd[_0x1a1522(0x13c)](_0x145ab4=>{const _0x50f595=_0x1a1522;_0x5bd7e9+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x145ab4['username']||_0x50f595(0x130))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x145ab4['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x5bd7e9+=_0x1a1522(0x12f),_0x31a4b1[_0x1a1522(0x133)]=_0x5bd7e9;}function formatQueueTime(_0x347705){const _0x594be3=a45_0x3b18;if(!_0x347705)return _0x594be3(0x12d);const _0x3744a8=_0x347705[_0x594be3(0x12e)]?_0x347705['toDate']():new Date(_0x347705),_0x1c4cbf=new Date(),_0x5d87e8=Math['floor']((_0x1c4cbf-_0x3744a8)/0xea60);if(_0x5d87e8<0x1)return'Just\x20now';return _0x5d87e8+'m\x20in\x20queue';}async function checkQueueTimeout(_0x45a4f3){const _0x3a9d6b=a45_0x3b18;if(!_0x45a4f3['lastUpdated'])return;const _0x29582b=_0x45a4f3[_0x3a9d6b(0x138)]['toDate']?_0x45a4f3['lastUpdated'][_0x3a9d6b(0x12e)]():new Date(_0x45a4f3['lastUpdated']),_0x3a12c2=new Date(),_0x4e2b65=Math['floor']((_0x3a12c2-_0x29582b)/0xea60);if(_0x4e2b65>=0x1e)try{const _0x4badb8=doc(db,_0x3a9d6b(0x131),_0x45a4f3['id']);await updateDoc(_0x4badb8,{'isReady':![]});}catch(_0x21479e){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x21479e);}}function a45_0x5f0f(){const _0x10063f=['bind','Just\x20now','toDate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','Unknown\x20Player','readyPlayers','display','innerHTML','warn','length','table','isReady','lastUpdated','toString','push','style','forEach','error'];a45_0x5f0f=function(){return _0x10063f;};return a45_0x5f0f();}const unsubscribe=onSnapshot(readyPlayersRef,_0xb27071=>{const _0x2a1e29=a45_0x3b18,_0x5f56a8=[];_0xb27071[_0x2a1e29(0x13c)](_0x3b9ae1=>{const _0x2b3a50=_0x2a1e29,_0x2ecfd3=_0x3b9ae1['data']();if(_0x2ecfd3[_0x2b3a50(0x137)]===!![]){const _0x5e94ae={'id':_0x3b9ae1['id'],'username':_0x2ecfd3['username'],'lastUpdated':_0x2ecfd3[_0x2b3a50(0x138)]||new Date()};_0x5f56a8[_0x2b3a50(0x13a)](_0x5e94ae),checkQueueTimeout(_0x5e94ae);}}),updateQueueDisplay(_0x5f56a8);},_0x48b427=>{const _0x208f62=a45_0x3b18;console[_0x208f62(0x13d)]('Error\x20in\x20queue\x20listener:',_0x48b427);});function a45_0x3b18(_0x5bba76,_0x5bb230){const _0x40060d=a45_0x5f0f();return a45_0x3b18=function(_0x10cf21,_0x350a63){_0x10cf21=_0x10cf21-0x12c;let _0x5f0f7b=_0x40060d[_0x10cf21];return _0x5f0f7b;},a45_0x3b18(_0x5bba76,_0x5bb230);}window['addEventListener']('unload',()=>{unsubscribe();});