const a20_0x1f8e84=a20_0x2384;import a20_0x3cf481,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x344bfa=a20_0x2384;if(document['getElementById']('idle-overlay'))return;const _0x3b18c3=document['createElement']('div');_0x3b18c3['id']='idle-overlay',_0x3b18c3[_0x344bfa(0x1f5)][_0x344bfa(0x1db)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x322c70=document['createElement']('div');_0x322c70['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x19759f=document['createElement']('h2');_0x19759f['textContent']=_0x344bfa(0x1cd),_0x19759f['style'][_0x344bfa(0x1db)]=_0x344bfa(0x1d2);const _0x1f4376=document[_0x344bfa(0x1f9)]('p');_0x1f4376['textContent']=_0x344bfa(0x1d3),_0x1f4376[_0x344bfa(0x1f5)][_0x344bfa(0x1db)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x13514a=document['createElement'](_0x344bfa(0x1c8));_0x13514a['id']='resume-session-btn',_0x13514a[_0x344bfa(0x1cc)]='Return\x20to\x20Website',_0x13514a['style'][_0x344bfa(0x1db)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x13514a[_0x344bfa(0x1ed)]=function(){const _0x353cf9=_0x344bfa;this['style'][_0x353cf9(0x1ef)]='#3da05f';},_0x13514a['onmouseout']=function(){const _0x4c1589=_0x344bfa;this[_0x4c1589(0x1f5)][_0x4c1589(0x1ef)]='#50C878';},_0x322c70[_0x344bfa(0x1c5)](_0x19759f),_0x322c70['appendChild'](_0x1f4376),_0x322c70[_0x344bfa(0x1c5)](_0x13514a),_0x3b18c3['appendChild'](_0x322c70),document['body']['appendChild'](_0x3b18c3),_0x13514a[_0x344bfa(0x1ea)]('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x34e0a9=a20_0x2384;if(document[_0x34e0a9(0x1e2)]('network-error-overlay'))return;const _0x38fe7a=document['createElement']('div');_0x38fe7a['id']=_0x34e0a9(0x1d0),_0x38fe7a['style']['cssText']=_0x34e0a9(0x1d9);const _0x13117e=document['createElement']('div');_0x13117e[_0x34e0a9(0x1f5)][_0x34e0a9(0x1db)]=_0x34e0a9(0x1fb);const _0x17fad8=document['createElement']('h2');_0x17fad8['textContent']='Connection\x20Error',_0x17fad8['style'][_0x34e0a9(0x1db)]='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x87d3ad=document['createElement']('p');_0x87d3ad['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x87d3ad['style'][_0x34e0a9(0x1db)]=_0x34e0a9(0x1f0);const _0x30599e=document['createElement']('button');_0x30599e['id']='retry-connection-btn',_0x30599e['textContent']=_0x34e0a9(0x1ca),_0x30599e['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x6988b0=document[_0x34e0a9(0x1f9)]('button');_0x6988b0['id']=_0x34e0a9(0x1fa),_0x6988b0['textContent']='Reload\x20Page',_0x6988b0['style']['cssText']=_0x34e0a9(0x1e5);const _0x22c74a=document['createElement']('div');_0x22c74a[_0x34e0a9(0x1f5)][_0x34e0a9(0x1db)]=_0x34e0a9(0x1e6),_0x22c74a['appendChild'](_0x30599e),_0x22c74a[_0x34e0a9(0x1c5)](_0x6988b0),_0x13117e['appendChild'](_0x17fad8),_0x13117e['appendChild'](_0x87d3ad),_0x13117e[_0x34e0a9(0x1c5)](_0x22c74a),_0x38fe7a[_0x34e0a9(0x1c5)](_0x13117e),document['body']['appendChild'](_0x38fe7a),_0x30599e['addEventListener'](_0x34e0a9(0x1eb),retryConnection),_0x6988b0['addEventListener']('click',()=>window['location'][_0x34e0a9(0x1d5)]());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x13d726=a20_0x2384;clearTimeout(idleTimer);const _0x1a2b6e=document[_0x13d726(0x1e2)]('network-error-overlay');_0x1a2b6e&&(_0x1a2b6e['style']['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a20_0x3cf481['suspendAllListeners']();}function retryConnection(){const _0x3bba90=a20_0x2384;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x389def=document[_0x3bba90(0x1f7)]('#network-error-overlay\x20p');_0x389def&&(_0x389def['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x4eea29=document['getElementById']('retry-connection-btn');_0x4eea29&&(_0x4eea29['disabled']=!![],_0x4eea29['style']['opacity']='0.5',_0x4eea29['style']['cursor']='not-allowed');return;}const _0x5752a5=document['getElementById']('network-error-overlay');_0x5752a5&&(_0x5752a5['style'][_0x3bba90(0x1f2)]=_0x3bba90(0x1f6));window[_0x3bba90(0x1ec)]=![],resetIdleTimer(),console['log'](_0x3bba90(0x1fd));try{const {rdlFirestore:_0x48fac4}=window;if(_0x48fac4){const _0x3726fd=_0x48fac4['collection']('system');_0x48fac4[_0x3bba90(0x1e3)](_0x3726fd)['catch'](_0x5489a6=>{const _0x3e62c9=_0x3bba90;console[_0x3e62c9(0x1e4)](_0x3e62c9(0x1cf),_0x5489a6),handleNetworkError();});}}catch(_0xe9dd3d){console['error'](_0x3bba90(0x1c6),_0xe9dd3d),handleNetworkError();}a20_0x3cf481[_0x3bba90(0x1f8)]();}function suspendSession(){const _0x4c7913=a20_0x2384;isSessionSuspended=!![];const _0x5d59b5=document[_0x4c7913(0x1e2)]('idle-overlay');_0x5d59b5&&(_0x5d59b5[_0x4c7913(0x1f5)][_0x4c7913(0x1f2)]='flex'),console[_0x4c7913(0x1d4)]('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a20_0x3cf481['suspendAllListeners']();}function a20_0x2384(_0x4ec182,_0x15a16f){const _0x483082=a20_0xa4c4();return a20_0x2384=function(_0xf66452,_0x4b9502){_0xf66452=_0xf66452-0x1c5;let _0xa4c444=_0x483082[_0xf66452];return _0xa4c444;},a20_0x2384(_0x4ec182,_0x15a16f);}function a20_0xa4c4(){const _0x453ddb=['appendChild','Failed\x20to\x20test\x20connection:','{}.constructor(\x22return\x20this\x22)(\x20)','button','forceIdleTimeout','Retry\x20Connection','keys','textContent','Session\x20Suspended\x20Due\x20to\x20Inactivity','trace','Connection\x20test\x20failed:','network-error-overlay','Session\x20resumed','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.','log','reload','forEach','constructor','console','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20','checkFirebaseIdleStatus','cssText','location','now','unavailable','exception','idle-overlay','message','getElementById','getDocs','error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','scroll','info','Active\x20listeners:','addEventListener','click','RDL_NETWORK_ERROR','onmouseover','Blocked\x20operations:','backgroundColor','color:\x20#fff;\x20margin-bottom:\x2030px;','pendingOperations','display','network','Forcing\x20idle\x20timeout...','style','none','querySelector','resumeAllListeners','createElement','reload-page-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','RDL_SESSION_SUSPENDED','Retrying\x20connection...','toString'];a20_0xa4c4=function(){return _0x453ddb;};return a20_0xa4c4();}function resumeSession(){const _0x216d9f=a20_0x2384;isSessionSuspended=![],window[_0x216d9f(0x1fc)]=![];const _0x58292f=document['getElementById'](_0x216d9f(0x1e0));_0x58292f&&(_0x58292f['style']['display']='none'),console['log'](_0x216d9f(0x1d1)),resetIdleTimer(),a20_0x3cf481['resumeAllListeners'](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window[_0x216d9f(0x1dc)]['reload']());}function initIdleTimeout(){const _0x3a9e48=a20_0x2384,_0x1191bc=(function(){let _0x44b112=!![];return function(_0x5d7291,_0x5bd0f1){const _0x146f1f=_0x44b112?function(){if(_0x5bd0f1){const _0x323d30=_0x5bd0f1['apply'](_0x5d7291,arguments);return _0x5bd0f1=null,_0x323d30;}}:function(){};return _0x44b112=![],_0x146f1f;};}()),_0x2dd7da=_0x1191bc(this,function(){const _0x417169=a20_0x2384,_0x477198=function(){const _0x15afea=a20_0x2384;let _0x5eb12b;try{_0x5eb12b=Function('return\x20(function()\x20'+_0x15afea(0x1c7)+');')();}catch(_0x5c0736){_0x5eb12b=window;}return _0x5eb12b;},_0x1d715f=_0x477198(),_0x42882f=_0x1d715f['console']=_0x1d715f[_0x417169(0x1d8)]||{},_0x2607e1=['log','warn',_0x417169(0x1e8),_0x417169(0x1e4),_0x417169(0x1df),'table',_0x417169(0x1ce)];for(let _0xb23c9e=0x0;_0xb23c9e<_0x2607e1['length'];_0xb23c9e++){const _0xe3f36a=_0x1191bc[_0x417169(0x1d7)]['prototype']['bind'](_0x1191bc),_0x38cb7f=_0x2607e1[_0xb23c9e],_0x66fa22=_0x42882f[_0x38cb7f]||_0xe3f36a;_0xe3f36a['__proto__']=_0x1191bc['bind'](_0x1191bc),_0xe3f36a['toString']=_0x66fa22[_0x417169(0x1fe)]['bind'](_0x66fa22),_0x42882f[_0x38cb7f]=_0xe3f36a;}});_0x2dd7da(),createIdleOverlay();const _0x1964e8=['mousedown','mousemove','keypress',_0x3a9e48(0x1e7),'touchstart','click'];_0x1964e8[_0x3a9e48(0x1d6)](_0x471dfe=>{document['addEventListener'](_0x471dfe,()=>{const _0x1866e8=a20_0x2384;window['RDL_LAST_ACTIVITY']=Date[_0x1866e8(0x1dd)](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x803dee){const _0x159e4d=_0x3a9e48;_0x803dee[_0x159e4d(0x1e4)]&&(_0x803dee[_0x159e4d(0x1e4)]['message']&&_0x803dee[_0x159e4d(0x1e4)][_0x159e4d(0x1e1)]['includes'](_0x159e4d(0x1f3))||_0x803dee['error']['code']&&(_0x803dee[_0x159e4d(0x1e4)]['code']===_0x159e4d(0x1de)||_0x803dee[_0x159e4d(0x1e4)]['code']==='resource-exhausted'||_0x803dee['error']['code']['includes']('network')))&&(handleNetworkError(),_0x803dee['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window[_0x3a9e48(0x1da)]=function(){const _0xbb8cdf=_0x3a9e48;return console['log']('Session\x20suspended:',window[_0xbb8cdf(0x1fc)]),console['log']('Network\x20error:',window['RDL_NETWORK_ERROR']),console['log'](_0xbb8cdf(0x1e9),a20_0x3cf481['activeListeners']['size']),console['log']('Pending\x20operations:',a20_0x3cf481['pendingOperations']['size']),console['log'](_0xbb8cdf(0x1ee),a20_0x3cf481['blockedOperations']||0x0),{'suspended':window[_0xbb8cdf(0x1fc)],'networkError':window[_0xbb8cdf(0x1ec)],'activeListeners':Array['from'](a20_0x3cf481['activeListeners']['keys']()),'pendingOperations':Array['from'](a20_0x3cf481[_0xbb8cdf(0x1f1)][_0xbb8cdf(0x1cb)]()),'blockedCount':a20_0x3cf481['blockedOperations']||0x0};},window[_0x3a9e48(0x1c9)]=function(){const _0x464ee0=_0x3a9e48;console['log'](_0x464ee0(0x1f4)),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document[a20_0x1f8e84(0x1ea)]('DOMContentLoaded',initIdleTimeout):initIdleTimeout();