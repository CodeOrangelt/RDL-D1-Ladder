const a8_0x5d1623=a8_0x53a6,a8_0x41e12a=(function(){let _0xa25887=!![];return function(_0xdc0eb2,_0x19dee5){const _0xb2804d=_0xa25887?function(){if(_0x19dee5){const _0x1fb6a1=_0x19dee5['apply'](_0xdc0eb2,arguments);return _0x19dee5=null,_0x1fb6a1;}}:function(){};return _0xa25887=![],_0xb2804d;};}()),a8_0x2e25e7=a8_0x41e12a(this,function(){const _0x5bfb69=a8_0x53a6;let _0x4371c3;try{const _0x217cc0=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4371c3=_0x217cc0();}catch(_0x298b62){_0x4371c3=window;}const _0x40dfc3=_0x4371c3['console']=_0x4371c3[_0x5bfb69(0x1c3)]||{},_0x211707=['log','warn','info','error',_0x5bfb69(0x1bf),_0x5bfb69(0x1ba),_0x5bfb69(0x1b0)];for(let _0x1b6af8=0x0;_0x1b6af8<_0x211707['length'];_0x1b6af8++){const _0x5cb39e=a8_0x41e12a[_0x5bfb69(0x1c4)][_0x5bfb69(0x1b4)]['bind'](a8_0x41e12a),_0x520fae=_0x211707[_0x1b6af8],_0x12de64=_0x40dfc3[_0x520fae]||_0x5cb39e;_0x5cb39e['__proto__']=a8_0x41e12a['bind'](a8_0x41e12a),_0x5cb39e['toString']=_0x12de64[_0x5bfb69(0x1c0)]['bind'](_0x12de64),_0x40dfc3[_0x520fae]=_0x5cb39e;}});a8_0x2e25e7();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x54e72e=![]){const _0x382b5e=Date['now'](),_0x2ab3e4=checkNotificationCache();if(_0x2ab3e4!==null&&!_0x54e72e){updateNotificationDot(_0x2ab3e4);if(_0x382b5e-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x382b5e;const _0x58bf01=auth['currentUser'];if(!_0x58bf01){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x1e7910,_0x1bd5f7,_0x317234]=await Promise['all']([checkForPendingMatchesInCollection(_0x58bf01,'pendingMatches'),checkForPendingMatchesInCollection(_0x58bf01,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x58bf01,'pendingMatchesD3')]),_0x113bb0=_0x1e7910||_0x1bd5f7||_0x317234;updateNotificationDot(_0x113bb0),updateNotificationCache(_0x113bb0);}catch(_0x2dd724){console['error']('Error\x20checking\x20pending\x20matches:',_0x2dd724);}}function a8_0x53a6(_0x4ea7de,_0x419764){const _0x2e25e7=a8_0x8ab6();return a8_0x53a6=function(_0x41e12a,_0xf7c51d){_0x41e12a=_0x41e12a-0x1a7;let _0x8ab613=_0x2e25e7[_0x41e12a];return _0x8ab613;},a8_0x53a6(_0x4ea7de,_0x419764);}async function checkForPendingMatchesInCollection(_0xe8d186,_0x271931){const _0x3b7567=a8_0x53a6,_0x3a39c6=_0xe8d186['uid'],_0x52faa1=_0xe8d186['email'],_0xec825c=query(collection(db,_0x271931),where(_0x3b7567(0x1ae),'==',_0x3a39c6),where(_0x3b7567(0x1bb),'==',![])),_0x106313=await getDocs(_0xec825c);if(!_0x106313['empty'])return!![];if(_0x52faa1){const _0x3a495a=query(collection(db,_0x271931),where('winnerEmail','==',_0x52faa1),where('approved','==',![])),_0x59c812=await getDocs(_0x3a495a);if(!_0x59c812[_0x3b7567(0x1a8)])return!![];}let _0x21b273=await getUsernameFromAllSources(_0xe8d186);if(_0x21b273){const _0x2e35e4=query(collection(db,_0x271931),where('winnerUsername','==',_0x21b273),where(_0x3b7567(0x1bb),'==',![])),_0x309857=await getDocs(_0x2e35e4);if(!_0x309857['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x352280){const _0x3bee87=a8_0x53a6,_0x5eadb7=localStorage['getItem']('currentUsername');if(_0x5eadb7)return _0x5eadb7;try{const [_0x47f1ed,_0x5a81c5,_0x45efc7]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x352280[_0x3bee87(0x1b1)]))),getDocs(query(collection(db,'playersD2'),where(_0x3bee87(0x1c1),'==',_0x352280['uid']))),getDocs(query(collection(db,'playersD3'),where(_0x3bee87(0x1c1),'==',_0x352280['uid'])))]);if(!_0x47f1ed[_0x3bee87(0x1a8)]){const _0xd91f23=_0x47f1ed[_0x3bee87(0x1b9)][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0xd91f23),_0xd91f23;}if(!_0x5a81c5['empty']){const _0x58a4d7=_0x5a81c5['docs'][0x0][_0x3bee87(0x1a7)]()[_0x3bee87(0x1be)];return localStorage[_0x3bee87(0x1bc)]('currentUsername',_0x58a4d7),_0x58a4d7;}if(!_0x45efc7['empty']){const _0x389b4=_0x45efc7['docs'][0x0][_0x3bee87(0x1a7)]()[_0x3bee87(0x1be)];return localStorage['setItem']('currentUsername',_0x389b4),_0x389b4;}const _0x42a834=await getDoc(doc(db,'users',_0x352280['uid']));if(_0x42a834['exists']()&&_0x42a834[_0x3bee87(0x1a7)]()['username']){const _0x2eb071=_0x42a834[_0x3bee87(0x1a7)]()['username'];return localStorage['setItem']('currentUsername',_0x2eb071),_0x2eb071;}}catch(_0x4b23f7){console['error']('Error\x20fetching\x20username:',_0x4b23f7);}if(_0x352280['email'])return _0x352280[_0x3bee87(0x1ac)][_0x3bee87(0x1aa)]('@')[0x0];return null;}function updateNotificationCache(_0x2ce1d2){const _0x774623=a8_0x53a6,_0x20a145={'status':_0x2ce1d2,'timestamp':Date[_0x774623(0x1af)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x20a145));}function checkNotificationCache(){const _0x1db07c=a8_0x53a6,_0x27c4d9=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x27c4d9)return null;try{const {status:_0x59e7e8,timestamp:_0x5dd25b}=JSON[_0x1db07c(0x1b7)](_0x27c4d9),_0x11d56e=Date['now']();if(_0x11d56e-_0x5dd25b<CACHE_EXPIRY)return _0x59e7e8;}catch(_0x3e051b){}return null;}export function updateNotificationDot(_0x4ed3eb){const _0x587918=a8_0x53a6,_0x3a1bb0=new MutationObserver((_0x5e807f,_0x469575)=>{const _0x26b1e9=a8_0x53a6,_0x50c7f0=document['getElementById'](_0x26b1e9(0x1b6));_0x50c7f0&&(updateDotStyle(_0x50c7f0,_0x4ed3eb),_0x469575['disconnect']());});_0x3a1bb0[_0x587918(0x1ad)](document[_0x587918(0x1bd)],{'childList':!![],'subtree':!![]});const _0x4e9727=document[_0x587918(0x1b5)]('report-match-notification');_0x4e9727&&(updateDotStyle(_0x4e9727,_0x4ed3eb),_0x3a1bb0['disconnect']()),setTimeout(()=>_0x3a1bb0['disconnect'](),0x1388);}function updateDotStyle(_0x44a0d6,_0x2ab27e){const _0xf51ad3=a8_0x53a6;_0x2ab27e?(_0x44a0d6['style']['display']=_0xf51ad3(0x1b2),_0x44a0d6[_0xf51ad3(0x1c2)]['backgroundColor']='#ff3b30',_0x44a0d6['style']['width']='10px',_0x44a0d6[_0xf51ad3(0x1c2)]['height']='10px',_0x44a0d6[_0xf51ad3(0x1c2)]['position']='absolute',_0x44a0d6['style']['top']='-5px',_0x44a0d6['style']['right']=_0xf51ad3(0x1ab),_0x44a0d6[_0xf51ad3(0x1c2)]['borderRadius']='50%',_0x44a0d6['style'][_0xf51ad3(0x1b3)]='2px\x20solid\x20white',_0x44a0d6['style']['zIndex']='999'):_0x44a0d6['style'][_0xf51ad3(0x1a9)]='none';}function a8_0x8ab6(){const _0x48769d=['data','empty','display','split','-8px','email','observe','winnerId','now','trace','uid','block','border','prototype','getElementById','report-match-notification','parse','addEventListener','docs','table','approved','setItem','body','username','exception','toString','userId','style','console','constructor'];a8_0x8ab6=function(){return _0x48769d;};return a8_0x8ab6();}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a8_0x5d1623(0x1b8)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});