function a24_0xee70(){const _0x596f42=['invitations','Error\x20performing\x20','team_invite','apply','active','warn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','createdAt','sentInvitations','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','forEach','setupEventListeners','teamData','filter','renderInvitations','constructor','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-','lastDoc','Error\x20updating\x20invitation\x20status:','display','classList','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20','To:\x20','sentUnsubscribe','data','unsubscribe','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22','m\x20ago','hasMore','join','all','.action-btn','type','length','value','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Team\x20\x22','error','h\x20ago','loadInvitations','remove','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22','fromUsername','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20â€¢\x20Color:\x20','cancel','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','dataset','prototype','floor','getTimeAgo','inbox-content','accepted','disabled','message','#send-response','toDate','createTeamFromInvitation','modal-overlay','style','updateInvitationStatus','outbox','click','status','addEventListener','pending','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','currentFilter'];a24_0xee70=function(){return _0x596f42;};return a24_0xee70();}const a24_0x4d83f0=a24_0x43dc,a24_0x5bd2e5=(function(){let _0x13a689=!![];return function(_0x122019,_0x4c5756){const _0x3d96f9=_0x13a689?function(){const _0x83cffc=a24_0x43dc;if(_0x4c5756){const _0x1b2f5a=_0x4c5756[_0x83cffc(0x1ae)](_0x122019,arguments);return _0x4c5756=null,_0x1b2f5a;}}:function(){};return _0x13a689=![],_0x3d96f9;};}()),a24_0x57f719=a24_0x5bd2e5(this,function(){const _0x277485=a24_0x43dc;let _0x3ad9d4;try{const _0x351a2e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3ad9d4=_0x351a2e();}catch(_0x509d70){_0x3ad9d4=window;}const _0xcb0ae5=_0x3ad9d4['console']=_0x3ad9d4['console']||{},_0x3e3913=['log',_0x277485(0x1b0),'info','error','exception','table','trace'];for(let _0x47fad5=0x0;_0x47fad5<_0x3e3913[_0x277485(0x1cc)];_0x47fad5++){const _0x52ece6=a24_0x5bd2e5[_0x277485(0x1ba)][_0x277485(0x1dd)]['bind'](a24_0x5bd2e5),_0x154321=_0x3e3913[_0x47fad5],_0x194631=_0xcb0ae5[_0x154321]||_0x52ece6;_0x52ece6['__proto__']=a24_0x5bd2e5['bind'](a24_0x5bd2e5),_0x52ece6['toString']=_0x194631['toString']['bind'](_0x194631),_0xcb0ae5[_0x154321]=_0x52ece6;}});a24_0x57f719();import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a24_0x43dc(_0x73a386,_0x526b35){const _0x57f719=a24_0xee70();return a24_0x43dc=function(_0x5bd2e5,_0x1ad1e2){_0x5bd2e5=_0x5bd2e5-0x1ab;let _0xee708b=_0x57f719[_0x5bd2e5];return _0xee708b;},a24_0x43dc(_0x73a386,_0x526b35);}class InboxManager{constructor(){const _0x1056f5=a24_0x43dc;this[_0x1056f5(0x1f0)]='pending',this['invitations']=[],this['sentInvitations']=[],this['unsubscribe']=null,this[_0x1056f5(0x1c2)]=null,this['pageSize']=0x14,this[_0x1056f5(0x1bc)]=null,this[_0x1056f5(0x1c7)]=!![],this['init']();}async['init'](){auth['onAuthStateChanged'](_0xa3405f=>{_0xa3405f?(this['loadInvitations'](_0xa3405f['uid']),this['setupEventListeners']()):window['location']['href']='./login.html';});}[a24_0x4d83f0(0x1b6)](){const _0x4cc65f=a24_0x4d83f0;document['querySelectorAll']('.filter-btn')[_0x4cc65f(0x1b5)](_0xa53ad0=>{const _0x33bf28=_0x4cc65f;_0xa53ad0[_0x33bf28(0x1ed)](_0x33bf28(0x1eb),()=>{const _0x1b9e56=_0x33bf28;document['querySelectorAll']('.filter-btn')['forEach'](_0x235255=>_0x235255['classList']['remove']('active')),_0xa53ad0[_0x1b9e56(0x1bf)]['add'](_0x1b9e56(0x1af)),this['currentFilter']=_0xa53ad0[_0x1b9e56(0x1dc)][_0x1b9e56(0x1b8)],this[_0x1b9e56(0x1b9)]();});});}[a24_0x4d83f0(0x1d2)](_0x45328f){const _0x55c199=a24_0x4d83f0,_0x4a4e03=collection(db,'gameInvitations');let _0x3b0c3a=query(_0x4a4e03,where('toUserId','==',_0x45328f),orderBy('createdAt','desc'),limit(this['pageSize']));this[_0x55c199(0x1c4)]=onSnapshot(_0x3b0c3a,_0x3abb45=>{const _0x4f33c9=_0x55c199;this['invitations']=_0x3abb45['docs']['map'](_0x54d08a=>({'id':_0x54d08a['id'],..._0x54d08a[_0x4f33c9(0x1c3)]()})),this['renderInvitations'](),this['updateNotificationCount']();});let _0x76ad5e=query(_0x4a4e03,where('fromUserId','==',_0x45328f),orderBy('createdAt','desc'),limit(this['pageSize']));this['sentUnsubscribe']=onSnapshot(_0x76ad5e,_0x36ba79=>{this['sentInvitations']=_0x36ba79['docs']['map'](_0x2b9be4=>({'id':_0x2b9be4['id'],..._0x2b9be4['data'](),'isSent':!![]})),this['renderInvitations']();});}['renderInvitations'](){const _0x2c43f6=a24_0x4d83f0,_0x3d832f=document['getElementById'](_0x2c43f6(0x1e0));if(!_0x3d832f)return;let _0x2fbd53=[];if(this['currentFilter']==='outbox')_0x2fbd53=this[_0x2c43f6(0x1b3)];else this['currentFilter']===_0x2c43f6(0x1c9)?_0x2fbd53=[...this['invitations'],...this['sentInvitations']]['sort']((_0x11711c,_0x5a8725)=>{const _0x272068=_0x2c43f6,_0x534269=_0x11711c['createdAt']?.['toDate']?_0x11711c[_0x272068(0x1b2)]['toDate']():new Date(_0x11711c['createdAt']),_0x5c5d01=_0x5a8725[_0x272068(0x1b2)]?.[_0x272068(0x1e5)]?_0x5a8725['createdAt']['toDate']():new Date(_0x5a8725['createdAt']);return _0x5c5d01-_0x534269;}):_0x2fbd53=this['invitations'][_0x2c43f6(0x1b8)](_0x51ea0f=>_0x51ea0f[_0x2c43f6(0x1ec)]===this['currentFilter']);if(_0x2fbd53[_0x2c43f6(0x1cc)]===0x0){const _0x6c0a37=this[_0x2c43f6(0x1f0)]==='outbox'?'sent':this[_0x2c43f6(0x1f0)]==='all'?'':this['currentFilter'];_0x3d832f['innerHTML']=_0x2c43f6(0x1c0)+_0x6c0a37+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this[_0x2c43f6(0x1f0)]===_0x2c43f6(0x1ea)?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return;}_0x3d832f['innerHTML']=_0x2fbd53['map'](_0x5d0d34=>this['createInvitationCard'](_0x5d0d34))[_0x2c43f6(0x1c8)](''),this['setupActionListeners']();}['createInvitationCard'](_0x185e60){const _0x9f506e=a24_0x4d83f0,_0x3ece62=_0x185e60['createdAt']?.[_0x9f506e(0x1e5)]?_0x185e60['createdAt'][_0x9f506e(0x1e5)]():new Date(_0x185e60[_0x9f506e(0x1b2)]),_0x321fe8=this['getTimeAgo'](_0x3ece62),_0xeddd09=_0x185e60['isSent']||![];let _0x30cc95='';return _0x185e60[_0x9f506e(0x1cb)]===_0x9f506e(0x1ad)?_0x30cc95=_0x9f506e(0x1b4)+_0x185e60[_0x9f506e(0x1e3)]+_0x9f506e(0x1db)+_0x185e60[_0x9f506e(0x1b7)]['teamColor']+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x185e60['teamData']['proposedTeamName']+_0x9f506e(0x1d9)+_0x185e60['teamData']['teamColor']+_0x9f506e(0x1ef):_0x30cc95='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x185e60['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20'+_0x185e60[_0x9f506e(0x1ec)]+'\x20'+(_0xeddd09?'sent-invitation':'')+'\x22\x20data-invitation-id=\x22'+_0x185e60['id']+_0x9f506e(0x1b1)+(_0xeddd09?_0x9f506e(0x1c1)+_0x185e60['toUsername']:_0x185e60['fromUsername'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xeddd09?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x321fe8+_0x9f506e(0x1bb)+_0x185e60['status']+'\x22>'+_0x185e60[_0x9f506e(0x1ec)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x30cc95+_0x9f506e(0x1d4)+(!_0xeddd09&&_0x185e60['status']===_0x9f506e(0x1ee)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x185e60['id']+_0x9f506e(0x1d6)+_0x185e60['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x185e60['type']!==_0x9f506e(0x1ad)?_0x9f506e(0x1c5)+_0x185e60['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xeddd09&&_0x185e60['status']==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x185e60['id']+_0x9f506e(0x1ce):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}['setupActionListeners'](){const _0x2c5c58=a24_0x4d83f0;document['querySelectorAll'](_0x2c5c58(0x1ca))[_0x2c5c58(0x1b5)](_0x16ea5a=>{_0x16ea5a['addEventListener']('click',async _0x525924=>{const _0x1b8ba5=a24_0x43dc,_0x957c83=_0x16ea5a['dataset']['action'],_0x7a98b2=_0x16ea5a['dataset']['invitationId'];_0x16ea5a[_0x1b8ba5(0x1e2)]=!![];const _0x3a4128=_0x16ea5a['innerHTML'];_0x16ea5a['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0x957c83){case'accept':await this['updateInvitationStatus'](_0x7a98b2,_0x1b8ba5(0x1e1));break;case'decline':await this['updateInvitationStatus'](_0x7a98b2,'declined');break;case _0x1b8ba5(0x1da):await this[_0x1b8ba5(0x1e9)](_0x7a98b2,'cancelled');break;case'respond':this['openResponseModal'](_0x7a98b2);break;}}catch(_0x35d2e3){console['error'](_0x1b8ba5(0x1ac)+_0x957c83+':',_0x35d2e3),alert('Failed\x20to\x20'+_0x957c83+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x16ea5a['disabled']=![],_0x16ea5a['innerHTML']=_0x3a4128;}});});}async['updateInvitationStatus'](_0x388033,_0x686767){const _0x3b1eb0=a24_0x4d83f0;try{const _0x593dfc=this[_0x3b1eb0(0x1ab)]['find'](_0x2bbe2c=>_0x2bbe2c['id']===_0x388033);_0x593dfc&&_0x593dfc['type']==='team_invite'&&_0x686767==='accepted'&&await this['createTeamFromInvitation'](_0x593dfc);const _0x2ad5e3=doc(db,'gameInvitations',_0x388033);await updateDoc(_0x2ad5e3,{'status':_0x686767,'respondedAt':new Date()}),_0x593dfc&&(_0x593dfc[_0x3b1eb0(0x1ec)]=_0x686767,_0x593dfc['respondedAt']=new Date(),this['renderInvitations']());}catch(_0x1cc1f7){console['error'](_0x3b1eb0(0x1bd),_0x1cc1f7);throw _0x1cc1f7;}}['openResponseModal'](_0x5a609f){const _0x5d432a=a24_0x4d83f0,_0x4303bd=this[_0x5d432a(0x1ab)]['find'](_0x5e786a=>_0x5e786a['id']===_0x5a609f);if(!_0x4303bd)return;const _0x1ad8f4=document['createElement']('div');_0x1ad8f4['className']=_0x5d432a(0x1e7),_0x1ad8f4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x4303bd[_0x5d432a(0x1d7)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x4303bd['value']+'</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';if(!document['getElementById']('modal-styles')){const _0x1914f0=document['createElement']('style');_0x1914f0['id']='modal-styles',_0x1914f0['textContent']=_0x5d432a(0x1d8),document['head']['appendChild'](_0x1914f0);}document['body']['appendChild'](_0x1ad8f4),_0x1ad8f4['querySelector']('.modal-close')['addEventListener']('click',()=>_0x1ad8f4['remove']()),_0x1ad8f4['querySelector']('#cancel-response')['addEventListener']('click',()=>_0x1ad8f4[_0x5d432a(0x1d3)]()),_0x1ad8f4['addEventListener']('click',_0x235f40=>{if(_0x235f40['target']===_0x1ad8f4)_0x1ad8f4['remove']();}),_0x1ad8f4['querySelector'](_0x5d432a(0x1e4))['addEventListener']('click',()=>{const _0x5925f4=_0x5d432a,_0x1d24a3=document['getElementById']('response-message')[_0x5925f4(0x1cd)]['trim']();_0x1d24a3&&(alert(_0x5925f4(0x1d5)),_0x1ad8f4['remove']());});}async[a24_0x4d83f0(0x1e6)](_0x3ec806){const _0x239187=a24_0x4d83f0;try{const {createTeam:_0x493dab}=await import('./ladderduos.js'),_0x38727b=await _0x493dab(_0x3ec806[_0x239187(0x1d7)],_0x3ec806['toUsername'],_0x3ec806['teamData']['proposedTeamName'],_0x3ec806[_0x239187(0x1b7)]['teamColor']);if(!_0x38727b['success'])throw new Error(_0x38727b['error']);alert(_0x239187(0x1cf)+_0x3ec806['teamData']['proposedTeamName']+'\x22\x20created\x20successfully!');}catch(_0x5b4019){console[_0x239187(0x1d0)]('Error\x20creating\x20team:',_0x5b4019);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0x5b4019['message']);}}['updateNotificationCount'](){const _0x4f0b15=a24_0x4d83f0,_0x3601f4=this[_0x4f0b15(0x1ab)]['filter'](_0x4b2f6a=>_0x4b2f6a['status']==='pending')[_0x4f0b15(0x1cc)],_0x391eea=document['getElementById']('inbox-notification');_0x391eea&&(_0x3601f4>0x0?(_0x391eea[_0x4f0b15(0x1e8)][_0x4f0b15(0x1be)]='inline-block',_0x391eea['textContent']=_0x3601f4>0x9?'9+':_0x3601f4):_0x391eea[_0x4f0b15(0x1e8)]['display']='none');}[a24_0x4d83f0(0x1df)](_0x38d0a0){const _0x2bae16=a24_0x4d83f0,_0x12afcb=new Date(),_0x36868a=_0x12afcb-_0x38d0a0,_0x53500=Math[_0x2bae16(0x1de)](_0x36868a/(0x3e8*0x3c)),_0x250ff4=Math[_0x2bae16(0x1de)](_0x36868a/(0x3e8*0x3c*0x3c)),_0xaa851b=Math['floor'](_0x36868a/(0x3e8*0x3c*0x3c*0x18));if(_0x53500<0x1)return'Just\x20now';if(_0x53500<0x3c)return _0x53500+_0x2bae16(0x1c6);if(_0x250ff4<0x18)return _0x250ff4+_0x2bae16(0x1d1);if(_0xaa851b<0x7)return _0xaa851b+'d\x20ago';return _0x38d0a0['toLocaleDateString']();}['destroy'](){const _0x7f9b=a24_0x4d83f0;this[_0x7f9b(0x1c4)]&&this[_0x7f9b(0x1c4)](),this['sentUnsubscribe']&&this['sentUnsubscribe']();}}document[a24_0x4d83f0(0x1ed)]('DOMContentLoaded',()=>{new InboxManager();});