const a27_0x492649=a27_0x323e,a27_0x496225=(function(){let _0x176001=!![];return function(_0x63db94,_0x2c1aa4){const _0x2bf076=_0x176001?function(){if(_0x2c1aa4){const _0x58d7cf=_0x2c1aa4['apply'](_0x63db94,arguments);return _0x2c1aa4=null,_0x58d7cf;}}:function(){};return _0x176001=![],_0x2bf076;};}()),a27_0x475abf=a27_0x496225(this,function(){const _0x58719f=a27_0x323e;let _0x57b917;try{const _0x1a44ce=Function('return\x20(function()\x20'+_0x58719f(0x1da)+');');_0x57b917=_0x1a44ce();}catch(_0x4a2e3d){_0x57b917=window;}const _0x1d050c=_0x57b917[_0x58719f(0x1fe)]=_0x57b917['console']||{},_0xb99791=['log','warn',_0x58719f(0x1eb),'error',_0x58719f(0x1d7),'table','trace'];for(let _0x1427d7=0x0;_0x1427d7<_0xb99791[_0x58719f(0x1be)];_0x1427d7++){const _0xdf6701=a27_0x496225['constructor']['prototype']['bind'](a27_0x496225),_0x3bd033=_0xb99791[_0x1427d7],_0x12a841=_0x1d050c[_0x3bd033]||_0xdf6701;_0xdf6701['__proto__']=a27_0x496225['bind'](a27_0x496225),_0xdf6701['toString']=_0x12a841[_0x58719f(0x1d3)][_0x58719f(0x1fd)](_0x12a841),_0x1d050c[_0x3bd033]=_0xdf6701;}});a27_0x475abf();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a27_0x323e(_0x159900,_0x37abcd){const _0x475abf=a27_0x13c5();return a27_0x323e=function(_0x496225,_0x522627){_0x496225=_0x496225-0x1be;let _0x13c5c2=_0x475abf[_0x496225];return _0x13c5c2;},a27_0x323e(_0x159900,_0x37abcd);}import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x2e4813=0x1){const _0x1a4c22=a27_0x323e;try{document[_0x1a4c22(0x1d5)]('loading-indicator')[_0x1a4c22(0x1d6)]['display']=_0x1a4c22(0x1cd);const _0x1932e8=await getLadderData(_0x2e4813);_0x1932e8[_0x1a4c22(0x1e2)]((_0x5044ec,_0x479aa6)=>_0x479aa6[_0x1a4c22(0x21d)]-_0x5044ec[_0x1a4c22(0x21d)]);const _0x2c85b0=_0x1932e8[_0x1a4c22(0x234)](_0x5634ec=>_0x5634ec['id']),_0x2d2fe9=await getEloHistoryBatch(_0x2c85b0,_0x2e4813),_0x57cc05=_0x1932e8[_0x1a4c22(0x234)]((_0x15b5d4,_0x380230)=>{const _0x5f556a=_0x2d2fe9[_0x15b5d4['id']]||[],_0x2c2855=_0x5f556a['sort']((_0xe1e53d,_0x7e90de)=>new Date(_0x7e90de['date'])-new Date(_0xe1e53d['date']))['slice'](0x0,0x5);return{..._0x15b5d4,'rank':_0x380230+0x1,'lastMatches':_0x2c2855,'recentActivity':_0x2c2855['length']>0x0};});renderLadder(_0x57cc05),setupRealTimeUpdates(_0x2e4813);}catch(_0x1a6eb3){console['error']('Error\x20loading\x20ladder\x20data:',_0x1a6eb3),document[_0x1a4c22(0x1d5)]('error-message')['innerText']=_0x1a4c22(0x1f1);}finally{document['getElementById']('loading-indicator')['style']['display']='none';}}function setupRealTimeUpdates(_0x547391=0x1){const _0x2d8e94=a27_0x323e;activeListeners['forEach'](_0x381a2c=>_0x381a2c()),activeListeners=[];const _0x2fdd27=_0x547391===0x1?'players':_0x2d8e94(0x206)+_0x547391,_0x29bd80=_0x547391===0x1?_0x2d8e94(0x1db):'matchesD'+_0x547391,_0x12a881=new Date();_0x12a881['setDate'](_0x12a881['getDate']()-0x1);const _0x46be10=setupEfficientListener(_0x29bd80,[where('date','>=',_0x12a881['toISOString']()),limit(0xa),orderBy(_0x2d8e94(0x22d),'desc')],async _0x2a7b03=>{_0x2a7b03['length']>0x0&&await loadLadderData(_0x547391);});activeListeners['push'](_0x46be10);}function a27_0x13c5(){const _0x14300b=['length','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','empty','addEventListener','wins','toLowerCase','ðŸŽ¨\x20','\x20not\x20found','No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!','inline','find','d1-ladder-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','data','d3-switch','block','td:nth-child(3)','visible','ELO\x20history\x20collection\x20is\x20empty','MAX_SAFE_INTEGER','country','toString','none','getElementById','style','exception','winnerUsername','You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder','{}.constructor(\x22return\x20this\x22)(\x20)','matches','D2\x20toggle\x20clicked','cursor','d2-switch','set','You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>','timestamp','sort','has','totalMatches','brian2af@outlook.com','textContent','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','elo-recommendation-text-d1','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','info','log','elo-recommendation-text-d2','players','click','teammate','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','desc','tokenImage','elo-recommendation-text-d3','Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents','#50C878','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#','oldEloRating','toUpperCase','fontWeight','message','Inactive','bind','console','Ladder\x20table\x20body\x20not\x20found','#FFD700','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','change','newEloRating','div','#4CAF50','playersD','D3\x20toggle\x20clicked','exists','position','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toFixed','innerHTML','d3-ladder-container','remove','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','newElo','includes','querySelectorAll','You\x27re\x20not\x20registered\x20on\x20the\x20','player','fontSize','Error\x20checking\x20','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','active','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#ladder\x20thead\x20tr','eloRating','elo','previousElo','inactive','duos-ladder-container','approvedMatches','username','Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents','ladder-player','classList','visibility','Error\x20finding\x20best\x20opponent:','add','forEach','Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','playersD2','error','date','playersD3','display','totalKills','className','get','abs','map','ðŸŽ¯\x20','#CD7F32','duos','losses'];a27_0x13c5=function(){return _0x14300b;};return a27_0x13c5();}export function cleanupListeners(){activeListeners['forEach'](_0x55c624=>_0x55c624()),activeListeners=[];}function renderLadder(_0x130e53){const _0x489d32=a27_0x323e,_0x3d3c6e=document[_0x489d32(0x1d5)]('ladder-container');_0x3d3c6e[_0x489d32(0x20d)]='',_0x130e53['forEach'](_0x29ff2d=>{const _0x249825=_0x489d32,_0x18539f=document['createElement']('div');_0x18539f[_0x249825(0x231)]=_0x249825(0x224),_0x18539f[_0x249825(0x20d)]=_0x249825(0x1f7)+_0x29ff2d['rank']+_0x249825(0x1bf)+(_0x29ff2d['username']||_0x29ff2d['id'])+_0x249825(0x20a)+_0x29ff2d['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x29ff2d['recentActivity']?'active':_0x249825(0x21f))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x29ff2d['recentActivity']?'Active':_0x249825(0x1fc))+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x3d3c6e['appendChild'](_0x18539f);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x846dc4=![]){const _0xc1461b=a27_0x323e,_0x5a50c5=document['querySelector']('#ladder\x20tbody');if(!_0x5a50c5){console[_0xc1461b(0x22c)](_0xc1461b(0x1ff));return;}_0x5a50c5['innerHTML']=_0xc1461b(0x1e9);try{const _0x300598=Date['now']();if(!_0x846dc4&&playerCache['data']&&_0x300598-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache[_0xc1461b(0x1cb)]);return;}const _0x2e1997=collection(db,'players'),_0x36ecdc=await getDocs(_0x2e1997),_0x216487=[];_0x36ecdc['forEach'](_0x45d18b=>{const _0x2f434c=_0xc1461b,_0x36117a=_0x45d18b['data']();_0x216487['push']({..._0x36117a,'id':_0x45d18b['id'],'elo':_0x36117a[_0x2f434c(0x21c)]||0x0,'position':_0x36117a[_0x2f434c(0x209)]||Number[_0x2f434c(0x1d1)]});});const _0x157923=collection(db,'userProfiles'),_0xa0ea11=await getDocs(_0x157923),_0x330f02=new Map();_0xa0ea11['forEach'](_0x547cf7=>{const _0x490d4e=_0xc1461b,_0x1304bc=_0x547cf7['data']();_0x1304bc[_0x490d4e(0x222)]&&_0x330f02['set'](_0x1304bc[_0x490d4e(0x222)]['toLowerCase'](),_0x1304bc);}),_0x216487['forEach'](_0x505ae9=>{const _0x244455=_0xc1461b,_0x573685=_0x505ae9['username']?.['toLowerCase']();if(_0x573685&&_0x330f02[_0x244455(0x1e3)](_0x573685)){const _0x2ac1ba=_0x330f02['get'](_0x573685);_0x2ac1ba['country']&&(_0x505ae9['country']=_0x2ac1ba['country']['toLowerCase']());}});const _0x3ba1e5=_0x216487['map'](_0xfd6444=>_0xfd6444['username']),_0x4f924d=await fetchBatchMatchStats(_0x3ba1e5);_0x216487['sort']((_0x1dea33,_0x58341f)=>{const _0x1995e2=_0xc1461b,_0x19fb3d=_0x4f924d['get'](_0x1dea33['username'])?.['totalMatches']||0x0,_0x1052bd=_0x4f924d['get'](_0x58341f[_0x1995e2(0x222)])?.['totalMatches']||0x0;if(_0x19fb3d===0x0!==(_0x1052bd===0x0))return _0x19fb3d===0x0?0x1:-0x1;return(_0x1dea33['position']||0x3e7)-(_0x58341f['position']||0x3e7);}),_0x216487[_0xc1461b(0x229)]((_0x39a4be,_0x3f7191)=>{const _0x2605f5=_0xc1461b;_0x39a4be[_0x2605f5(0x209)]=_0x3f7191+0x1;}),playerCache['data']=_0x216487,playerCache['timestamp']=_0x300598,updateLadderDisplay(_0x216487,_0x4f924d);}catch(_0x5829bf){console['error']('Error\x20loading\x20ladder:',_0x5829bf),_0x5a50c5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x5829bf[_0xc1461b(0x1fb)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x27a0f1){const _0xe7f209=a27_0x323e,_0x557b3a=new Map();try{_0x27a0f1['forEach'](_0x481425=>{_0x557b3a['set'](_0x481425,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x1f1d46=collection(db,_0xe7f209(0x221)),_0x84b19f=await getDocs(_0x1f1d46);_0x84b19f['forEach'](_0x1635a5=>{const _0xb600ac=_0xe7f209,_0x35a87d=_0x1635a5['data'](),_0x167313=_0x35a87d[_0xb600ac(0x1d8)],_0x518d56=_0x35a87d['loserUsername'];if(_0x27a0f1['includes'](_0x167313)){const _0x5913de=_0x557b3a[_0xb600ac(0x232)](_0x167313);_0x5913de[_0xb600ac(0x1c2)]++,_0x5913de['totalMatches']++,_0x5913de[_0xb600ac(0x230)]+=parseInt(_0x35a87d['winnerScore'])||0x0,_0x5913de['totalDeaths']+=parseInt(_0x35a87d['loserScore'])||0x0;}if(_0x27a0f1['includes'](_0x518d56)){const _0x1e5760=_0x557b3a['get'](_0x518d56);_0x1e5760['losses']++,_0x1e5760[_0xb600ac(0x1e4)]++,_0x1e5760['totalKills']+=parseInt(_0x35a87d['loserScore'])||0x0,_0x1e5760['totalDeaths']+=parseInt(_0x35a87d['winnerScore'])||0x0;}}),_0x27a0f1['forEach'](_0x1a2f07=>{const _0x3a917d=_0xe7f209,_0x143521=_0x557b3a['get'](_0x1a2f07);_0x143521['kda']=_0x143521['totalDeaths']>0x0?(_0x143521['totalKills']/_0x143521['totalDeaths'])['toFixed'](0x2):_0x143521['totalKills'][_0x3a917d(0x20c)](0x2),_0x143521['winRate']=_0x143521['totalMatches']>0x0?(_0x143521['wins']/_0x143521['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0xda33f4){console[_0xe7f209(0x22c)]('Error\x20fetching\x20batch\x20match\x20stats:',_0xda33f4);}return _0x557b3a;}function createPlayerRow(_0x157799,_0x388009){const _0x248450=a27_0x323e,_0x47eb68=parseFloat(_0x157799['elo'])||0x0;let _0x52d6ad='gray';if(_0x47eb68>=0x7d0)_0x52d6ad='#50C878';else{if(_0x47eb68>=0x708)_0x52d6ad='#FFD700';else{if(_0x47eb68>=0x640)_0x52d6ad='#b9f1fc';else _0x47eb68>=0x578&&(_0x52d6ad='#CD7F32');}}let _0x1150ba='';return _0x157799['country']&&(_0x1150ba='<img\x20src=\x22../images/flags/'+_0x157799['country'][_0x248450(0x1c3)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x157799['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x157799['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x157799['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x52d6ad+_0x248450(0x20b)+_0x157799['username']+_0x248450(0x21a)+_0x1150ba+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x52d6ad+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x47eb68+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x388009['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x388009['wins']+_0x248450(0x1ea)+_0x388009[_0x248450(0x238)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x388009['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x388009['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x5d60bf){if(_0x5d60bf>=0x7d0)return'Emerald';if(_0x5d60bf>=0x708)return'Gold';if(_0x5d60bf>=0x640)return'Silver';if(_0x5d60bf>=0x578)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x4db3d2){const _0x46d5ff=a27_0x323e,_0x4f0cfe=new Map();_0x4db3d2['forEach'](_0x58521b=>{_0x4f0cfe['set'](_0x58521b,0x0);});try{const _0x1eaf5b=collection(db,'players'),_0x2ba690=await getDocs(_0x1eaf5b),_0x2a33a8=new Map(),_0xb8d92e=new Map();_0x2ba690['forEach'](_0x552a8b=>{const _0x4c2f77=a27_0x323e,_0x577a33=_0x552a8b[_0x4c2f77(0x1cb)]();_0x577a33['username']&&(_0x2a33a8['set'](_0x552a8b['id'],_0x577a33['username']),_0xb8d92e[_0x4c2f77(0x1df)](_0x577a33[_0x4c2f77(0x222)]['toLowerCase'](),_0x552a8b['id']));});const _0x482db0=collection(db,'eloHistory'),_0x4dcebf=query(_0x482db0,orderBy('timestamp',_0x46d5ff(0x1f2)),limit(0x12c)),_0x3f5a7a=await getDocs(_0x4dcebf);if(_0x3f5a7a['empty'])return console['log'](_0x46d5ff(0x1d0)),_0x4f0cfe;if(_0x3f5a7a['docs'][_0x46d5ff(0x1be)]>0x0){const _0x3998a6=_0x3f5a7a['docs'][0x0]['data']();if(_0x3998a6['player']&&_0x2a33a8['has'](_0x3998a6['player'])){}}const _0x1e6d51=new Map();let _0x12f3b7=0x0;_0x3f5a7a['forEach'](_0x5eeb12=>{const _0x440c87=_0x46d5ff,_0x2ab9a9=_0x5eeb12['data']();let _0x5b3e01=null;if(_0x2ab9a9[_0x440c87(0x215)]&&_0x2a33a8['has'](_0x2ab9a9['player']))_0x5b3e01=_0x2a33a8['get'](_0x2ab9a9['player']);else{if(_0x2ab9a9['username']&&_0xb8d92e['has'](_0x2ab9a9['username']['toLowerCase']()))_0x5b3e01=_0x2ab9a9[_0x440c87(0x222)];else _0x2ab9a9['playerUsername']&&_0xb8d92e[_0x440c87(0x1e3)](_0x2ab9a9['playerUsername']['toLowerCase']())&&(_0x5b3e01=_0x2ab9a9['playerUsername']);}_0x5b3e01&&_0x4db3d2['includes'](_0x5b3e01)&&(_0x12f3b7++,!_0x1e6d51[_0x440c87(0x1e3)](_0x5b3e01)&&_0x1e6d51['set'](_0x5b3e01,[]),_0x1e6d51['get'](_0x5b3e01)['push']({..._0x2ab9a9,'timestamp':_0x2ab9a9['timestamp']?.['seconds']||0x0}));}),_0x1e6d51['forEach']((_0x105196,_0x318b8a)=>{const _0x101997=_0x46d5ff;if(_0x105196['length']>0x0){_0x105196['sort']((_0x9db608,_0xd8d9b0)=>_0xd8d9b0[_0x101997(0x1e1)]-_0x9db608['timestamp']);const _0x5a50ee=_0x105196[_0x101997(0x1c8)](_0x5872a6=>_0x5872a6['change']!==undefined||_0x5872a6['newElo']!==undefined&&_0x5872a6['previousElo']!==undefined||_0x5872a6['newEloRating']!==undefined&&_0x5872a6['oldEloRating']!==undefined);if(_0x5a50ee){let _0x58caf8;if(_0x5a50ee['change']!==undefined)_0x58caf8=parseInt(_0x5a50ee[_0x101997(0x202)]);else{if(_0x5a50ee['newElo']!==undefined&&entry[_0x101997(0x21e)]!==undefined)_0x58caf8=parseInt(_0x5a50ee[_0x101997(0x211)])-parseInt(_0x5a50ee[_0x101997(0x21e)]);else _0x5a50ee['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x58caf8=parseInt(_0x5a50ee[_0x101997(0x203)])-parseInt(_0x5a50ee[_0x101997(0x1f8)]));}!isNaN(_0x58caf8)&&_0x58caf8!==0x0&&_0x4f0cfe['set'](_0x318b8a,_0x58caf8);}}});}catch(_0x965f76){console['error']('Error\x20fetching\x20ELO\x20history:',_0x965f76);}return _0x4f0cfe;}function createPlayerRowWithToken(_0x3767c7,_0x4c25a3,_0x320471){const _0xd0853f=a27_0x323e,_0x592493=parseFloat(_0x3767c7['elo'])||0x0;let _0x1dcdf1='gray';if(_0x592493>=0x7d0)_0x1dcdf1='#50C878';else{if(_0x592493>=0x708)_0x1dcdf1=_0xd0853f(0x200);else{if(_0x592493>=0x640)_0x1dcdf1='#b9f1fc';else _0x592493>=0x578&&(_0x1dcdf1=_0xd0853f(0x236));}}let _0x2eabef='';_0x3767c7[_0xd0853f(0x1d2)]&&(_0x2eabef='<img\x20src=\x22../images/flags/'+_0x3767c7['country'][_0xd0853f(0x1c3)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3767c7[_0xd0853f(0x1d2)]+_0xd0853f(0x210));let _0x6ced50='';return _0x320471&&(_0x6ced50='<img\x20src=\x22'+_0x320471[_0xd0853f(0x1f3)]+_0xd0853f(0x201)+_0x320471['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x320471['tokenName']+'\x20'+(_0x320471['equipped']?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0xd0853f(0x218)+_0x3767c7['position']+_0xd0853f(0x1e7)+encodeURIComponent(_0x3767c7[_0xd0853f(0x222)])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x1dcdf1+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3767c7['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2eabef+_0xd0853f(0x1ca)+_0x6ced50+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x1dcdf1+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x592493+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4c25a3['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4c25a3['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4c25a3['losses']+_0xd0853f(0x1ea)+_0x4c25a3['kda']+_0xd0853f(0x1ea)+_0x4c25a3['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x711a11,_0x5f2806=null){const _0x358d06=a27_0x323e,_0x39ed9a=document['querySelector']('#ladder\x20tbody');if(!_0x39ed9a){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x91e971=document['querySelector'](_0x358d06(0x21b));_0x91e971&&(_0x91e971['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x1d4a9b=_0x711a11[_0x358d06(0x234)](_0x20c4a6=>_0x20c4a6['username']);!_0x5f2806&&(_0x5f2806=await fetchBatchMatchStats(_0x1d4a9b));let _0x3da2c4=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x3da2c4=await getTokensByUsernames(_0x1d4a9b),console[_0x358d06(0x1ec)]('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x3da2c4['size'],_0x358d06(0x1ee)),_0x3da2c4[_0x358d06(0x229)]((_0x56d5ea,_0x32ea1b)=>{const _0x1c1a08=_0x358d06,_0x4da8f6=_0x56d5ea['find'](_0xd71dad=>_0xd71dad['equipped']);_0x4da8f6&&console['log'](_0x1c1a08(0x235)+_0x32ea1b+'\x20has\x20equipped:\x20'+_0x4da8f6['tokenName']);});}catch(_0x1268a4){console['error']('Error\x20fetching\x20tokens:',_0x1268a4);}const _0x37b85e=_0x711a11['map'](_0x1383cb=>{const _0x263325=_0x358d06,_0x3957d5=_0x5f2806['get'](_0x1383cb['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x1fb971=_0x3da2c4['get'](_0x1383cb['username'])||[],_0x1af852=getPrimaryDisplayToken(_0x1fb971);return _0x1af852&&console['log'](_0x263325(0x1c4)+_0x1383cb['username']+'\x20displaying\x20token:\x20'+_0x1af852['tokenName']+'\x20(equipped:\x20'+_0x1af852['equipped']+')'),createPlayerRowWithToken(_0x1383cb,_0x3957d5,_0x1af852);})['join']('');_0x39ed9a['innerHTML']=_0x37b85e,getPlayersLastEloChanges(_0x1d4a9b)['then'](_0x2a31e6=>{const _0x2d29d5=_0x358d06,_0x589831=new Map();_0x39ed9a[_0x2d29d5(0x213)]('tr')['forEach']((_0x2afb0c,_0x1006fa)=>{const _0xbcc213=_0x2d29d5;_0x1006fa<_0x1d4a9b['length']&&_0x589831[_0xbcc213(0x1df)](_0x1d4a9b[_0x1006fa],_0x2afb0c);}),_0x2a31e6['forEach']((_0x440e31,_0x173ee0)=>{const _0x4b5a10=_0x2d29d5,_0x302e83=_0x589831['get'](_0x173ee0);if(_0x302e83&&_0x440e31!==0x0){const _0x2c6059=_0x302e83['querySelector'](_0x4b5a10(0x1ce));if(_0x2c6059){const _0x595f43=_0x440e31>0x0?'+'+_0x440e31:''+_0x440e31,_0x3de86b=_0x2c6059['querySelector']('.trend-indicator');_0x3de86b&&(_0x3de86b['textContent']=_0x595f43,_0x3de86b['style']['color']=_0x440e31>0x0?_0x4b5a10(0x205):'#F44336',_0x3de86b['style'][_0x4b5a10(0x1fa)]='bold',_0x3de86b['style'][_0x4b5a10(0x216)]='0.85em',_0x3de86b['style']['display']=_0x4b5a10(0x1c7),_0x3de86b['style'][_0x4b5a10(0x226)]=_0x4b5a10(0x1cf),_0x3de86b['style']['opacity']='1');}}});})['catch'](_0x16c1a1=>console[_0x358d06(0x22c)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x16c1a1));}function initLadderToggles(){const _0x386980=a27_0x323e,_0x4d12a1=document['getElementById']('d1-switch'),_0x2e1b26=document[_0x386980(0x1d5)](_0x386980(0x1de)),_0x2fb1c5=document[_0x386980(0x1d5)](_0x386980(0x1cc)),_0x205819=document['getElementById']('duos-switch'),_0x2a8145=document[_0x386980(0x1d5)](_0x386980(0x1c9)),_0x1ce4aa=document['getElementById']('d2-ladder-container'),_0x4adde4=document[_0x386980(0x1d5)]('d3-ladder-container'),_0x4dbe61=document[_0x386980(0x1d5)](_0x386980(0x220));function _0x11354a(){const _0x2a4239=_0x386980;if(_0x2a8145)_0x2a8145['classList'][_0x2a4239(0x20f)](_0x2a4239(0x219));if(_0x1ce4aa)_0x1ce4aa['classList']['remove'](_0x2a4239(0x219));if(_0x4adde4)_0x4adde4['classList']['remove']('active');if(_0x4dbe61)_0x4dbe61['style'][_0x2a4239(0x22f)]='none';if(_0x2a8145)_0x2a8145['style']['display']=_0x2a4239(0x1d4);if(_0x1ce4aa)_0x1ce4aa[_0x2a4239(0x1d6)][_0x2a4239(0x22f)]='none';if(_0x4adde4)_0x4adde4['style']['display']='none';}_0x4d12a1&&_0x4d12a1['addEventListener']('click',()=>{const _0x4c14d5=_0x386980;console['log']('D1\x20toggle\x20clicked'),_0x11354a();_0x2a8145&&(_0x2a8145['classList']['add'](_0x4c14d5(0x219)),_0x2a8145[_0x4c14d5(0x1d6)][_0x4c14d5(0x22f)]='block');document[_0x4c14d5(0x1d5)]('elo-recommendation-text-d1')['style']['display']='block',document[_0x4c14d5(0x1d5)]('elo-recommendation-text-d2')[_0x4c14d5(0x1d6)][_0x4c14d5(0x22f)]='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x4d12a1)_0x4d12a1['classList']['add']('active');if(_0x2e1b26)_0x2e1b26['classList'][_0x4c14d5(0x20f)]('active');if(_0x2fb1c5)_0x2fb1c5['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x2e1b26&&_0x2e1b26[_0x386980(0x1c1)]('click',()=>{const _0xe6fe64=_0x386980;console['log'](_0xe6fe64(0x1dc)),_0x11354a();_0x1ce4aa&&(_0x1ce4aa['classList'][_0xe6fe64(0x228)](_0xe6fe64(0x219)),_0x1ce4aa['style'][_0xe6fe64(0x22f)]='block');document['getElementById']('elo-recommendation-text-d1')[_0xe6fe64(0x1d6)]['display']='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0xe6fe64(0x1cd),document['getElementById'](_0xe6fe64(0x1f4))[_0xe6fe64(0x1d6)][_0xe6fe64(0x22f)]='none';if(_0x2e1b26)_0x2e1b26['classList']['add']('active');if(_0x4d12a1)_0x4d12a1['classList']['remove']('active');if(_0x2fb1c5)_0x2fb1c5[_0xe6fe64(0x225)][_0xe6fe64(0x20f)]('active');displayLadderD2(),findBestOpponent('d2');}),_0x2fb1c5&&_0x2fb1c5['addEventListener'](_0x386980(0x1ef),()=>{const _0x1736dc=_0x386980;console[_0x1736dc(0x1ec)](_0x1736dc(0x207)),_0x11354a();_0x4adde4&&(_0x4adde4['classList'][_0x1736dc(0x228)](_0x1736dc(0x219)),_0x4adde4[_0x1736dc(0x1d6)]['display']='block');document[_0x1736dc(0x1d5)](_0x1736dc(0x1e8))[_0x1736dc(0x1d6)]['display']='none',document['getElementById']('elo-recommendation-text-d2')[_0x1736dc(0x1d6)]['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']='block';if(_0x2fb1c5)_0x2fb1c5['classList']['add'](_0x1736dc(0x219));if(_0x4d12a1)_0x4d12a1['classList'][_0x1736dc(0x20f)]('active');if(_0x2e1b26)_0x2e1b26['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x205819&&_0x205819['addEventListener'](_0x386980(0x1ef),()=>{const _0x19d1ec=_0x386980;_0x11354a();if(_0x4dbe61)_0x4dbe61['style'][_0x19d1ec(0x22f)]='block';displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0x19d1ec(0x1ed))['style']['display']=_0x19d1ec(0x1d4),document['getElementById'](_0x19d1ec(0x1f4))['style'][_0x19d1ec(0x22f)]=_0x19d1ec(0x1d4);});}document['addEventListener']('DOMContentLoaded',()=>{const _0x5a6f2f=a27_0x323e;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document[_0x5a6f2f(0x1d5)]('elo-recommendation-text-d1')[_0x5a6f2f(0x1d6)]['display']='block';});export{displayLadder};async function findBestOpponent(_0x180b16='d1'){const _0x3e834d=a27_0x323e,_0x2d1176='elo-recommendation-text-'+_0x180b16,_0x586e4f=document['getElementById'](_0x2d1176);if(!_0x586e4f){console[_0x3e834d(0x22c)]('Recommendation\x20element\x20for\x20'+_0x180b16+_0x3e834d(0x1c5));return;}const _0x22e1e5=auth['currentUser'];if(!_0x22e1e5){_0x586e4f[_0x3e834d(0x1e6)]='';return;}try{const _0x467937=doc(db,'userProfiles',_0x22e1e5['uid']),_0x364653=await getDoc(_0x467937);if(!_0x364653['exists']()){console['log']('No\x20user\x20profile\x20found'),_0x586e4f['textContent']=_0x3e834d(0x1f5);return;}const _0x5ed095=_0x364653[_0x3e834d(0x1cb)](),_0x51ce96=_0x5ed095[_0x3e834d(0x222)];if(!_0x51ce96){_0x586e4f['textContent']=_0x3e834d(0x223);return;}let _0xc3eca;switch(_0x180b16){case'd1':_0xc3eca=_0x3e834d(0x1ee);break;case'd2':_0xc3eca=_0x3e834d(0x22b);break;case'd3':_0xc3eca='playersD3';break;case'duos':_0xc3eca='playersDuos';break;default:_0xc3eca='players';}if(_0x180b16==='duos'){const _0x4602a1=collection(db,_0xc3eca),_0x298f38=query(_0x4602a1,where('username','==',_0x51ce96)),_0x4eb665=await getDocs(_0x298f38);if(_0x4eb665['empty']){_0x586e4f['textContent']=_0x3e834d(0x1d9);return;}const _0x18e9cd=_0x4eb665['docs'][0x0][_0x3e834d(0x1cb)](),_0x4aa3d2=parseInt(_0x18e9cd['eloRating'])||0x4b0;if(_0x18e9cd['hasTeam']&&_0x18e9cd['teammate']){_0x586e4f['innerHTML']=_0x3e834d(0x1e0)+_0x18e9cd[_0x3e834d(0x1f0)]+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x443222=await getDocs(_0x4602a1);let _0x424c04=null,_0x174adb=-0x1;_0x443222['forEach'](_0x294cc3=>{const _0x1d408e=_0x3e834d,_0x568788=_0x294cc3['data']();if(_0x568788[_0x1d408e(0x222)]===_0x51ce96)return;if(_0x568788['hasTeam'])return;const _0x4bb59a=parseInt(_0x568788[_0x1d408e(0x21c)])||0x4b0,_0x11f3aa=Math[_0x1d408e(0x233)](_0x4bb59a-_0x4aa3d2),_0x44f302=Math['max'](0x0,0xc8-_0x11f3aa);_0x44f302>_0x174adb&&(_0x424c04=_0x568788,_0x174adb=_0x44f302);});if(_0x424c04){const _0x59fb59=parseInt(_0x424c04[_0x3e834d(0x21c)])||0x4b0;let _0x13e878='gray';if(_0x59fb59>=0x7d0)_0x13e878='#50C878';else{if(_0x59fb59>=0x708)_0x13e878=_0x3e834d(0x200);else{if(_0x59fb59>=0x640)_0x13e878='#C0C0C0';else _0x59fb59>=0x578&&(_0x13e878='#CD7F32');}}_0x586e4f['innerHTML']=_0x3e834d(0x22a)+_0x13e878+';\x22>'+_0x424c04['username']+'</span>\x20(ELO:\x20'+_0x59fb59+')';}else _0x586e4f['textContent']=_0x3e834d(0x1c6);return;}const _0x28d412=collection(db,_0xc3eca),_0x53ec9f=query(_0x28d412,where('username','==',_0x51ce96)),_0x457887=await getDocs(_0x53ec9f);if(_0x457887[_0x3e834d(0x1c0)]){_0x586e4f['textContent']=_0x3e834d(0x214)+_0x180b16[_0x3e834d(0x1f9)]()+'\x20ladder';return;}const _0x4b7814=_0x457887['docs'][0x0]['data'](),_0x2cb8ad=parseInt(_0x4b7814['eloRating'])||0x5dc,_0x264bcd=await getDocs(_0x28d412);let _0x461dfb=null,_0x49c2a3=-0x1;const _0x2648c3=getPlayerRankName(_0x2cb8ad);_0x264bcd['forEach'](_0x47fe76=>{const _0x1208b0=_0x47fe76['data']();if(_0x1208b0['username']===_0x51ce96)return;const _0x3a8469=parseInt(_0x1208b0['eloRating'])||0x5dc,_0x248bbf=getPlayerRankName(_0x3a8469),_0x3bb5ce=Math['abs'](_0x3a8469-_0x2cb8ad),_0x13591f=0x20,_0x195c92=0x1/(0x1+Math['pow'](0xa,(_0x3a8469-_0x2cb8ad)/0x190)),_0x1b00f4=Math['round'](_0x13591f*(0x1-_0x195c92));if(_0x1b00f4<=0x0)return;let _0x3e4a0d=0x0;const _0x3ede4c=Math['max'](0x0,0x64-_0x3bb5ce*0.5),_0x390fef=_0x1b00f4>=0x3&&_0x1b00f4<=0x8?0x32:_0x1b00f4>0x0&&_0x1b00f4<0xf?0x1e:0xa,_0x364f4b=_0x2648c3===_0x248bbf?0x28:0x0;_0x3e4a0d=_0x3ede4c+_0x390fef+_0x364f4b,_0x3e4a0d>_0x49c2a3&&(_0x461dfb=_0x1208b0,_0x49c2a3=_0x3e4a0d);});if(_0x461dfb){const _0x17b4b5=parseInt(_0x461dfb['eloRating'])||0x5dc;let _0x12c653='gray';if(_0x17b4b5>=0x7d0)_0x12c653=_0x3e834d(0x1f6);else{if(_0x17b4b5>=0x708)_0x12c653=_0x3e834d(0x200);else{if(_0x17b4b5>=0x640)_0x12c653='#b9f1fc';else _0x17b4b5>=0x578&&(_0x12c653='#CD7F32');}}_0x586e4f['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x2cb8ad+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x12c653+';\x22>'+_0x461dfb['username']+'</span>';}else _0x586e4f[_0x3e834d(0x20d)]='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x2cb8ad+')';}catch(_0x375339){console['error'](_0x3e834d(0x227),_0x375339),_0x586e4f[_0x3e834d(0x1e6)]='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x51ee5f=>{const _0x5247f9=a27_0x323e,_0x19dd3f=document['getElementById']('d1-ladder-container')&&document[_0x5247f9(0x1d5)]('d1-ladder-container')[_0x5247f9(0x1d6)][_0x5247f9(0x22f)]!==_0x5247f9(0x1d4),_0x3be186=document['getElementById']('d2-ladder-container')&&document['getElementById']('d2-ladder-container')['style'][_0x5247f9(0x22f)]!=='none',_0x200e94=document['getElementById']('d3-ladder-container')&&document['getElementById'](_0x5247f9(0x20e))['style']['display']!=='none',_0xe53735=document[_0x5247f9(0x1d5)](_0x5247f9(0x220))&&document[_0x5247f9(0x1d5)](_0x5247f9(0x220))[_0x5247f9(0x1d6)][_0x5247f9(0x22f)]!=='none',_0x2d5185=_0x19dd3f?'d1':_0x3be186?'d2':_0x200e94?'d3':_0xe53735?_0x5247f9(0x237):'d1';findBestOpponent(_0x2d5185);}),document[a27_0x492649(0x1c1)]('DOMContentLoaded',()=>{const _0x237c16=document['getElementById']('duos-switch'),_0xf8ec68=document['querySelector']('label[for=\x22duos-switch\x22]');_0x237c16&&_0xf8ec68&&(_0x237c16['addEventListener']('change',async _0x10afe8=>{const _0xc864d3=a27_0x323e;if(_0x10afe8['target']['checked']){const _0xa825e0=auth?.['currentUser'],_0x20e4be=await checkIfUserIsAdmin(_0xa825e0);if(!_0x20e4be){_0x10afe8['preventDefault']();const _0x21e4f1=document['getElementById']('d1-switch');return _0x21e4f1&&(_0x21e4f1['checked']=!![],_0x21e4f1['dispatchEvent'](new Event(_0xc864d3(0x202)))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x3b65ca=>{const _0x59a57b=a27_0x323e,_0xe1bf3b=await checkIfUserIsAdmin(_0x3b65ca);!_0xe1bf3b?(_0x237c16['disabled']=!![],_0xf8ec68[_0x59a57b(0x1d6)]['opacity']='0.5',_0xf8ec68[_0x59a57b(0x1d6)][_0x59a57b(0x1dd)]='not-allowed',_0xf8ec68['title']='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x237c16['disabled']=![],_0xf8ec68['style']['opacity']='1',_0xf8ec68['style']['cursor']='pointer',_0xf8ec68['title']='');}));});async function checkIfUserIsAdmin(_0xc4bca9){const _0x423d7a=a27_0x492649;if(!_0xc4bca9)return![];try{const _0x40a512=['admin@ladder.com',_0x423d7a(0x1e5)];if(_0xc4bca9['email']&&_0x40a512[_0x423d7a(0x212)](_0xc4bca9['email'][_0x423d7a(0x1c3)]()))return!![];const _0x4be934=['userProfiles','players','playersD2',_0x423d7a(0x22e)],_0x537016=['admin','owner','council','creative\x20lead'];for(const _0x53e97d of _0x4be934){try{const _0x16a98c=doc(db,_0x53e97d,_0xc4bca9['uid']),_0x1bda83=await getDoc(_0x16a98c);if(_0x1bda83[_0x423d7a(0x208)]()){const _0x4c8cf5=_0x1bda83[_0x423d7a(0x1cb)](),_0x445a79=(_0x4c8cf5['roleName']||_0x4c8cf5['role']||'')[_0x423d7a(0x1c3)]();if(_0x445a79&&_0x537016[_0x423d7a(0x212)](_0x445a79))return!![];}}catch(_0xc9bdfc){console['warn'](_0x423d7a(0x217)+_0x53e97d+':',_0xc9bdfc);}}return![];}catch(_0x398423){return console['error']('Error\x20checking\x20admin\x20status:',_0x398423),![];}}function showAdminOnlyMessage(){const _0x110597=a27_0x492649,_0x2cc255=document['getElementById']('admin-only-message');_0x2cc255&&_0x2cc255['remove']();const _0x4fa864=document['createElement'](_0x110597(0x204));_0x4fa864['id']='admin-only-message',_0x4fa864['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x4fa864[_0x110597(0x20d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x4fa864),setTimeout(()=>{const _0x1ed993=_0x110597;_0x4fa864['parentNode']&&_0x4fa864[_0x1ed993(0x20f)]();},0xbb8);}