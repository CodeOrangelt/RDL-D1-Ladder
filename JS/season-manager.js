const a55_0x2f432b=(function(){let _0x4ed233=!![];return function(_0x10dbe6,_0x588a0b){const _0x2f63a4=_0x4ed233?function(){if(_0x588a0b){const _0x51082c=_0x588a0b['apply'](_0x10dbe6,arguments);return _0x588a0b=null,_0x51082c;}}:function(){};return _0x4ed233=![],_0x2f63a4;};}()),a55_0x237d57=a55_0x2f432b(this,function(){const _0x1c7809=a55_0x1eb5;let _0x48599b;try{const _0x4f2919=Function(_0x1c7809(0xf7)+_0x1c7809(0x102)+');');_0x48599b=_0x4f2919();}catch(_0x463c54){_0x48599b=window;}const _0x44642d=_0x48599b[_0x1c7809(0xfb)]=_0x48599b['console']||{},_0x1d20f4=[_0x1c7809(0x109),'warn','info','error',_0x1c7809(0x105),'table','trace'];for(let _0x522978=0x0;_0x522978<_0x1d20f4['length'];_0x522978++){const _0x543640=a55_0x2f432b[_0x1c7809(0xf2)][_0x1c7809(0xf4)]['bind'](a55_0x2f432b),_0xd655c4=_0x1d20f4[_0x522978],_0x2c0833=_0x44642d[_0xd655c4]||_0x543640;_0x543640['__proto__']=a55_0x2f432b['bind'](a55_0x2f432b),_0x543640['toString']=_0x2c0833['toString'][_0x1c7809(0x100)](_0x2c0833),_0x44642d[_0xd655c4]=_0x543640;}});a55_0x237d57();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a55_0x1eb5(_0x333805,_0x46b0fc){const _0x237d57=a55_0x55f0();return a55_0x1eb5=function(_0x2f432b,_0xf3b779){_0x2f432b=_0x2f432b-0xf1;let _0x55f077=_0x237d57[_0x2f432b];return _0x55f077;},a55_0x1eb5(_0x333805,_0x46b0fc);}function a55_0x55f0(){const _0x7fd605=['data','constructor','style','prototype','docs','resetSeason','return\x20(function()\x20','reset-confirmation','metadata','seasonCount','console','display','reload','click','getElementById','bind','setupEventListeners','{}.constructor(\x22return\x20this\x22)(\x20)','Error\x20resetting\x20season.\x20Please\x20try\x20again.','cancel-reset','exception','exists','season','value','log'];a55_0x55f0=function(){return _0x7fd605;};return a55_0x55f0();}import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){const _0x48fb48=a55_0x1eb5;this[_0x48fb48(0x101)]();}['setupEventListeners'](){const _0x2fc153=a55_0x1eb5,_0x31104a=document['getElementById']('reset-season'),_0x19dfdc=document['getElementById']('confirm-reset'),_0x49467e=document[_0x2fc153(0xff)](_0x2fc153(0x104));_0x31104a?.['addEventListener'](_0x2fc153(0xfe),()=>{const _0x4f28e5=_0x2fc153;document['getElementById'](_0x4f28e5(0xf8))[_0x4f28e5(0xf3)][_0x4f28e5(0xfc)]='block';}),_0x19dfdc?.['addEventListener']('click',async()=>{const _0xfc768d=_0x2fc153,_0x5ef9fb=document[_0xfc768d(0xff)]('reset-password'),_0x477744=auth['currentUser'];if(!_0x477744||!_0x5ef9fb[_0xfc768d(0x108)]){alert('Please\x20enter\x20your\x20password');return;}try{const _0x53f8cf=EmailAuthProvider['credential'](_0x477744['email'],_0x5ef9fb[_0xfc768d(0x108)]);await reauthenticateWithCredential(_0x477744,_0x53f8cf),await this[_0xfc768d(0xf6)](),_0x5ef9fb[_0xfc768d(0x108)]='',document[_0xfc768d(0xff)](_0xfc768d(0xf8))['style'][_0xfc768d(0xfc)]='none';}catch(_0x2e8989){alert('Invalid\x20password\x20or\x20authentication\x20failed'),console['error']('Authentication\x20error:',_0x2e8989);}}),_0x49467e?.['addEventListener']('click',()=>{const _0x5600ca=_0x2fc153,_0x4a9576=document['getElementById']('reset-password');_0x4a9576['value']='',document[_0x5600ca(0xff)]('reset-confirmation')['style'][_0x5600ca(0xfc)]='none';});}async['resetSeason'](){const _0x15c1f9=a55_0x1eb5;try{const _0x3cf5ab=await getDoc(doc(db,_0x15c1f9(0xf9),_0x15c1f9(0xfa)));let _0x5405f9=0x1;_0x3cf5ab[_0x15c1f9(0x106)]()&&(_0x5405f9=_0x3cf5ab[_0x15c1f9(0xf1)]()['count']+0x1);const _0x1b87da=await getDocs(collection(db,'players')),_0x2d98b8={'players':[],'date':new Date(),'seasonNumber':_0x5405f9};for(const _0x576d56 of _0x1b87da[_0x15c1f9(0xf5)]){const _0x2b2f40=_0x576d56[_0x15c1f9(0xf1)]();_0x2d98b8['players']['push']({'username':_0x2b2f40['username'],'position':_0x2b2f40['position'],'eloRating':_0x2b2f40['eloRating']||0x4b0}),await setDoc(doc(db,'players',_0x576d56['id']),{..._0x2b2f40,'eloRating':0x4b0,'position':_0x2b2f40['position']});}await setDoc(doc(db,'seasons',_0x15c1f9(0x107)+_0x5405f9),_0x2d98b8),await setDoc(doc(db,'metadata','seasonCount'),{'count':_0x5405f9}),alert('Season\x20'+_0x5405f9+'\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.'),location[_0x15c1f9(0xfd)]();}catch(_0x3ada58){console['error']('Error\x20resetting\x20season:',_0x3ada58),alert(_0x15c1f9(0x103));}}}export const seasonManager=new SeasonManager();