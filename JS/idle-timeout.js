import a22_0x322cb2,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0xebbb9=a22_0x5715;if(document['getElementById']('idle-overlay'))return;const _0x14f247=document[_0xebbb9(0x8d)]('div');_0x14f247['id']='idle-overlay',_0x14f247['style'][_0xebbb9(0x91)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x4cfb30=document[_0xebbb9(0x8d)]('div');_0x4cfb30[_0xebbb9(0x85)]['cssText']=_0xebbb9(0x99);const _0x48cd9c=document['createElement']('h2');_0x48cd9c['textContent']=_0xebbb9(0x7c),_0x48cd9c['style'][_0xebbb9(0x91)]=_0xebbb9(0x9e);const _0x5cceca=document['createElement']('p');_0x5cceca['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x5cceca['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0xa1f58=document['createElement']('button');_0xa1f58['id']='resume-session-btn',_0xa1f58['textContent']='Return\x20to\x20Website',_0xa1f58['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0xa1f58['onmouseover']=function(){const _0x48f52d=_0xebbb9;this[_0x48f52d(0x85)]['backgroundColor']='#3da05f';},_0xa1f58['onmouseout']=function(){const _0x5cf1ea=_0xebbb9;this['style']['backgroundColor']=_0x5cf1ea(0x7d);},_0x4cfb30[_0xebbb9(0xa3)](_0x48cd9c),_0x4cfb30['appendChild'](_0x5cceca),_0x4cfb30['appendChild'](_0xa1f58),_0x14f247['appendChild'](_0x4cfb30),document['body']['appendChild'](_0x14f247),_0xa1f58[_0xebbb9(0x9c)]('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x3535a9=a22_0x5715;if(document['getElementById']('network-error-overlay'))return;const _0x4b776a=document['createElement']('div');_0x4b776a['id']='network-error-overlay',_0x4b776a['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x3de269=document['createElement'](_0x3535a9(0x98));_0x3de269[_0x3535a9(0x85)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x2cb933=document[_0x3535a9(0x8d)]('h2');_0x2cb933['textContent']=_0x3535a9(0x84),_0x2cb933[_0x3535a9(0x85)]['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x262c94=document['createElement']('p');_0x262c94['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x262c94[_0x3535a9(0x85)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x19c117=document['createElement']('button');_0x19c117['id']='retry-connection-btn',_0x19c117['textContent']='Retry\x20Connection',_0x19c117['style'][_0x3535a9(0x91)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x58649f=document['createElement']('button');_0x58649f['id']='reload-page-btn',_0x58649f[_0x3535a9(0xaa)]=_0x3535a9(0x9b),_0x58649f['style'][_0x3535a9(0x91)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x58f5c9=document['createElement']('div');_0x58f5c9['style'][_0x3535a9(0x91)]='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x58f5c9[_0x3535a9(0xa3)](_0x19c117),_0x58f5c9['appendChild'](_0x58649f),_0x3de269['appendChild'](_0x2cb933),_0x3de269['appendChild'](_0x262c94),_0x3de269[_0x3535a9(0xa3)](_0x58f5c9),_0x4b776a['appendChild'](_0x3de269),document[_0x3535a9(0x89)][_0x3535a9(0xa3)](_0x4b776a),_0x19c117['addEventListener']('click',retryConnection),_0x58649f['addEventListener']('click',()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x31374e=a22_0x5715;clearTimeout(idleTimer);const _0xf10b31=document['getElementById']('network-error-overlay');_0xf10b31&&(_0xf10b31['style'][_0x31374e(0x80)]=_0x31374e(0xab)),window['RDL_NETWORK_ERROR']=!![],console['log'](_0x31374e(0x81)),a22_0x322cb2['suspendAllListeners']();}function retryConnection(){const _0x417e54=a22_0x5715;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x5928ce=document['querySelector'](_0x417e54(0xa6));_0x5928ce&&(_0x5928ce['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0xbb824b=document['getElementById']('retry-connection-btn');_0xbb824b&&(_0xbb824b['disabled']=!![],_0xbb824b[_0x417e54(0x85)]['opacity']=_0x417e54(0xa9),_0xbb824b['style']['cursor']=_0x417e54(0x88));return;}const _0x573dd9=document['getElementById'](_0x417e54(0xa2));_0x573dd9&&(_0x573dd9['style'][_0x417e54(0x80)]='none');window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x32d710}=window;if(_0x32d710){const _0xd3f53c=_0x32d710['collection'](_0x417e54(0x8b));_0x32d710[_0x417e54(0x7e)](_0xd3f53c)['catch'](_0x454917=>{console['error']('Connection\x20test\x20failed:',_0x454917),handleNetworkError();});}}catch(_0x23e618){console['error']('Failed\x20to\x20test\x20connection:',_0x23e618),handleNetworkError();}a22_0x322cb2['resumeAllListeners']();}function suspendSession(){const _0xe05805=a22_0x5715;isSessionSuspended=!![];const _0x33eae7=document[_0xe05805(0xa1)]('idle-overlay');_0x33eae7&&(_0x33eae7['style']['display']='flex'),console[_0xe05805(0x9f)]('Session\x20suspended\x20due\x20to\x20inactivity'),window[_0xe05805(0xa5)]=!![],a22_0x322cb2[_0xe05805(0x87)]();}function resumeSession(){const _0x469af0=a22_0x5715;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x30594a=document['getElementById']('idle-overlay');_0x30594a&&(_0x30594a['style']['display']=_0x469af0(0x94)),console[_0x469af0(0x9f)]('Session\x20resumed'),resetIdleTimer(),a22_0x322cb2[_0x469af0(0x97)](),idleTimer&&Date[_0x469af0(0x8f)]()-(window[_0x469af0(0xa4)]||0x0)>IDLE_TIMEOUT*0x2&&(console['log'](_0x469af0(0x7f)),window['location']['reload']());}function initIdleTimeout(){const _0x40bb1c=a22_0x5715,_0x4f1efe=(function(){let _0x13503c=!![];return function(_0x4cb6b8,_0x45eb33){const _0x5ec9e0=_0x13503c?function(){if(_0x45eb33){const _0x21957f=_0x45eb33['apply'](_0x4cb6b8,arguments);return _0x45eb33=null,_0x21957f;}}:function(){};return _0x13503c=![],_0x5ec9e0;};}()),_0x14dc72=_0x4f1efe(this,function(){const _0x4d11a=a22_0x5715;let _0x42809f;try{const _0x2a2967=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x42809f=_0x2a2967();}catch(_0xa315fa){_0x42809f=window;}const _0x47422c=_0x42809f[_0x4d11a(0x90)]=_0x42809f[_0x4d11a(0x90)]||{},_0x5c2651=['log',_0x4d11a(0x83),'info','error',_0x4d11a(0xa7),'table','trace'];for(let _0x2cb6f6=0x0;_0x2cb6f6<_0x5c2651['length'];_0x2cb6f6++){const _0x136136=_0x4f1efe['constructor'][_0x4d11a(0x7b)]['bind'](_0x4f1efe),_0x2ed5cd=_0x5c2651[_0x2cb6f6],_0x37cb1a=_0x47422c[_0x2ed5cd]||_0x136136;_0x136136['__proto__']=_0x4f1efe['bind'](_0x4f1efe),_0x136136['toString']=_0x37cb1a['toString'][_0x4d11a(0x8e)](_0x37cb1a),_0x47422c[_0x2ed5cd]=_0x136136;}});_0x14dc72(),createIdleOverlay();const _0x3cfcd4=['mousedown','mousemove','keypress','scroll','touchstart','click'];_0x3cfcd4['forEach'](_0x3cc95b=>{const _0x199f17=a22_0x5715;document[_0x199f17(0x9c)](_0x3cc95b,()=>{const _0x34a0c0=_0x199f17;window[_0x34a0c0(0xa4)]=Date[_0x34a0c0(0x8f)](),resetIdleTimer();},!![]);}),window[_0x40bb1c(0x9c)](_0x40bb1c(0xa0),function(_0x3f8550){const _0x4c22c2=_0x40bb1c;_0x3f8550['error']&&(_0x3f8550['error']['message']&&_0x3f8550['error']['message']['includes']('network')||_0x3f8550['error']['code']&&(_0x3f8550['error']['code']==='unavailable'||_0x3f8550[_0x4c22c2(0xa0)]['code']==='resource-exhausted'||_0x3f8550[_0x4c22c2(0xa0)][_0x4c22c2(0x9d)]['includes'](_0x4c22c2(0x8c))))&&(handleNetworkError(),_0x3f8550['preventDefault']());}),resetIdleTimer(),console['log'](_0x40bb1c(0x92),IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window[_0x40bb1c(0x8a)]=resumeSession,enhanceIdleTimeout(),window[_0x40bb1c(0xa8)]=function(){const _0x5e17b7=_0x40bb1c;return console[_0x5e17b7(0x9f)]('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console[_0x5e17b7(0x9f)]('Network\x20error:',window['RDL_NETWORK_ERROR']),console[_0x5e17b7(0x9f)]('Active\x20listeners:',a22_0x322cb2[_0x5e17b7(0x95)]['size']),console['log'](_0x5e17b7(0x86),a22_0x322cb2['pendingOperations']['size']),console['log']('Blocked\x20operations:',a22_0x322cb2['blockedOperations']||0x0),{'suspended':window[_0x5e17b7(0xa5)],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array[_0x5e17b7(0x9a)](a22_0x322cb2['activeListeners']['keys']()),'pendingOperations':Array['from'](a22_0x322cb2[_0x5e17b7(0x82)][_0x5e17b7(0x7a)]()),'blockedCount':a22_0x322cb2['blockedOperations']||0x0};},window[_0x40bb1c(0x93)]=function(){const _0x27a40b=_0x40bb1c;console[_0x27a40b(0x9f)](_0x27a40b(0x96)),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();function a22_0x5715(_0x17a93a,_0x5e20c0){const _0x3a190e=a22_0x2eb1();return a22_0x5715=function(_0x5c693e,_0x15c692){_0x5c693e=_0x5c693e-0x7a;let _0x2eb13d=_0x3a190e[_0x5c693e];return _0x2eb13d;},a22_0x5715(_0x17a93a,_0x5e20c0);}function a22_0x2eb1(){const _0x2211fe=['keys','prototype','Session\x20Suspended\x20Due\x20to\x20Inactivity','#50C878','getDocs','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','display','Network\x20error\x20detected,\x20showing\x20error\x20overlay','pendingOperations','warn','Connection\x20Error','style','Pending\x20operations:','suspendAllListeners','not-allowed','body','resumeSession','system','network','createElement','bind','now','console','cssText','Idle\x20timeout\x20initialized:','forceIdleTimeout','none','activeListeners','Forcing\x20idle\x20timeout...','resumeAllListeners','div','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','from','Reload\x20Page','addEventListener','code','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','log','error','getElementById','network-error-overlay','appendChild','RDL_LAST_ACTIVITY','RDL_SESSION_SUSPENDED','#network-error-overlay\x20p','exception','checkFirebaseIdleStatus','0.5','textContent','flex'];a22_0x2eb1=function(){return _0x2211fe;};return a22_0x2eb1();}