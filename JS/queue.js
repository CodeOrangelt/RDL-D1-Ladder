const a44h=a44b;function a44b(a,b){const c=a44a();return a44b=function(d,e){d=d-0x6b;let f=c[d];if(a44b['cpDgci']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a44b['IOGFTs']=g,a=arguments,a44b['cpDgci']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a44b['IOGFTs'](f),a[i]=f):f=j,f;},a44b(a,b);}function a44a(){const o=['otqYndy1s2LJEun2','odu2otyYBe1OBfrZ','CxvLDwuTy29UDgfPBMvY','Aw5Uzxjive1m','AxnszwfKEq','cIaGicaGicaGicaGidWVzgL2pGOGicaGicaGidWVzgL2pGOGicaG','zM9YrwfJAa','mZbntfnSsxu','pc9ZCgfUpGOGicaGicaGicaGicaGicaGphnWyw4Gy2XHC3m9iNf1zxvLlxrPBwuIpG','mtiWmZGWntH2DLHKzgq','odiZnJiZA1bcrLHd','cIaGicaGicaGicaGidXKAxyGy2XHC3m9iNbSyxLLCI1JyxjKiJ4kicaGicaGicaGicaGicaGidXZCgfUignSyxnZpsjWBgf5zxiTBMfTzsi+','zxjYB3i','sNvZDcbUB3C','z2v0rwXLBwvUDej5swq','ntmXotqWwfbPt1Pi','yMXVy2S','vw5RBM93BIbqBgf5zxi','ChvZAa','nZC5mZC2ohzTCMrHwG','BgfZDfvWzgf0zwq','n3z1EejMBa','Dw5SB2fK','C3r5Bgu','mteXnde0ntrWsNf1A0W','CMvHzhLqBgf5zxjZ','zMXVB3i','ogLgBhzpsG','Dg9eyxrL','BsbPBIbXDwv1zq','zgf0yq'];a44a=function(){return o;};return a44a();}(function(a,b){const g=a44b,c=a();while(!![]){try{const d=-parseInt(g(0x82))/0x1+parseInt(g(0x71))/0x2+-parseInt(g(0x6c))/0x3*(-parseInt(g(0x7d))/0x4)+-parseInt(g(0x81))/0x5+-parseInt(g(0x7a))/0x6+parseInt(g(0x77))/0x7*(-parseInt(g(0x75))/0x8)+parseInt(g(0x6b))/0x9*(parseInt(g(0x88))/0xa);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a44a,0xe8371));import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a44h(0x7b)),activePlayersQuery=query(readyPlayersRef,where(a44h(0x85),'==',!![]));function updateQueueDisplay(a){const i=a44h,b=document[i(0x70)](i(0x83));if(!b)return;if(a['length']===0x0){b['style']['display']='none';return;}b[i(0x79)]['display']=i(0x72);let c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';a[i(0x87)](d=>{const j=i;c+=j(0x6d)+(d['username']||j(0x73))+j(0x89)+formatQueueTime(d[j(0x76)])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),c+=i(0x86),b[i(0x84)]=c;}function formatQueueTime(a){const k=a44h;if(!a)return k(0x6f);const b=a[k(0x7e)]?a['toDate']():new Date(a),c=new Date(),d=Math[k(0x7c)]((c-b)/0xea60);if(d<0x1)return'Just\x20now';return d+k(0x7f);}async function checkQueueTimeout(a){const l=a44h;if(!a[l(0x76)])return;const b=a['lastUpdated']['toDate']?a[l(0x76)][l(0x7e)]():new Date(a['lastUpdated']),c=new Date(),d=Math['floor']((c-b)/0xea60);if(d>=0x1e)try{const e=doc(db,l(0x7b),a['id']);await updateDoc(e,{'isReady':![]});}catch(f){console['error']('Error\x20removing\x20player\x20from\x20queue:',f);}}const unsubscribe=onSnapshot(readyPlayersRef,a=>{const b=[];a['forEach'](c=>{const m=a44b,d=c[m(0x80)]();if(d[m(0x85)]===!![]){const e={'id':c['id'],'username':d['username'],'lastUpdated':d['lastUpdated']||new Date()};b[m(0x74)](e),checkQueueTimeout(e);}}),updateQueueDisplay(b);},a=>{const n=a44h;console[n(0x6e)]('Error\x20in\x20queue\x20listener:',a);});window['addEventListener'](a44h(0x78),()=>{unsubscribe();});