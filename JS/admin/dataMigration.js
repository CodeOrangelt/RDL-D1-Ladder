(function(_0x286f00,_0x688293){const _0x254d2f=a0_0x20de,_0x3a8c5a=_0x286f00();while(!![]){try{const _0x15e4ef=-parseInt(_0x254d2f(0x198))/0x1+-parseInt(_0x254d2f(0x19a))/0x2*(parseInt(_0x254d2f(0x1c4))/0x3)+-parseInt(_0x254d2f(0x1a9))/0x4*(-parseInt(_0x254d2f(0x1bd))/0x5)+parseInt(_0x254d2f(0x1b8))/0x6*(-parseInt(_0x254d2f(0x1bc))/0x7)+-parseInt(_0x254d2f(0x1c8))/0x8*(-parseInt(_0x254d2f(0x1b3))/0x9)+-parseInt(_0x254d2f(0x1af))/0xa*(parseInt(_0x254d2f(0x1a0))/0xb)+-parseInt(_0x254d2f(0x1b4))/0xc*(-parseInt(_0x254d2f(0x196))/0xd);if(_0x15e4ef===_0x688293)break;else _0x3a8c5a['push'](_0x3a8c5a['shift']());}catch(_0x2a7f16){_0x3a8c5a['push'](_0x3a8c5a['shift']());}}}(a0_0x27de,0xdd8f8));const a0_0x131315=(function(){let _0x81bb71=!![];return function(_0x4e7eb6,_0x5329c7){const _0x38f714=_0x81bb71?function(){const _0xd60068=a0_0x20de;if(_0x5329c7){const _0x171bdb=_0x5329c7[_0xd60068(0x194)](_0x4e7eb6,arguments);return _0x5329c7=null,_0x171bdb;}}:function(){};return _0x81bb71=![],_0x38f714;};}()),a0_0x2d799f=a0_0x131315(this,function(){const _0x1a5317=a0_0x20de;return a0_0x2d799f[_0x1a5317(0x1c6)]()['search']('(((.+)+)+)+$')[_0x1a5317(0x1c6)]()[_0x1a5317(0x1c7)](a0_0x2d799f)[_0x1a5317(0x1a7)]('(((.+)+)+)+$');});a0_0x2d799f();function a0_0x20de(_0x953beb,_0x297941){const _0x38689d=a0_0x27de();return a0_0x20de=function(_0x2df063,_0x1e7cf1){_0x2df063=_0x2df063-0x193;let _0x3a131a=_0x38689d[_0x2df063];return _0x3a131a;},a0_0x20de(_0x953beb,_0x297941);}const a0_0x1e7cf1=(function(){let _0x436236=!![];return function(_0x527efd,_0x505517){const _0x5e748a=_0x436236?function(){const _0x33abb3=a0_0x20de;if(_0x505517){const _0x12951a=_0x505517[_0x33abb3(0x194)](_0x527efd,arguments);return _0x505517=null,_0x12951a;}}:function(){};return _0x436236=![],_0x5e748a;};}()),a0_0x2df063=a0_0x1e7cf1(this,function(){const _0x2206fa=a0_0x20de,_0x228287=function(){const _0x2979e8=a0_0x20de;let _0x3085d3;try{_0x3085d3=Function(_0x2979e8(0x19c)+_0x2979e8(0x1aa)+');')();}catch(_0x5f7695){_0x3085d3=window;}return _0x3085d3;},_0x1539ff=_0x228287(),_0x303289=_0x1539ff[_0x2206fa(0x1c2)]=_0x1539ff[_0x2206fa(0x1c2)]||{},_0x36c3bf=[_0x2206fa(0x1a4),_0x2206fa(0x19f),_0x2206fa(0x1b1),_0x2206fa(0x1ab),_0x2206fa(0x19e),'table',_0x2206fa(0x1c0)];for(let _0x3324ee=0x0;_0x3324ee<_0x36c3bf[_0x2206fa(0x1b0)];_0x3324ee++){const _0x5a78ed=a0_0x1e7cf1[_0x2206fa(0x1c7)][_0x2206fa(0x19d)][_0x2206fa(0x193)](a0_0x1e7cf1),_0x4109a4=_0x36c3bf[_0x3324ee],_0xdba0b7=_0x303289[_0x4109a4]||_0x5a78ed;_0x5a78ed[_0x2206fa(0x19b)]=a0_0x1e7cf1[_0x2206fa(0x193)](a0_0x1e7cf1),_0x5a78ed['toString']=_0xdba0b7['toString'][_0x2206fa(0x193)](_0xdba0b7),_0x303289[_0x4109a4]=_0x5a78ed;}});a0_0x2df063();import{db}from'../firebase-config.js';import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';export async function migrateUserData(){const _0x48ffa1=a0_0x20de,_0x584f2e=[_0x48ffa1(0x1ba),_0x48ffa1(0x1a3),_0x48ffa1(0x1a8),_0x48ffa1(0x1b6),_0x48ffa1(0x1bf)],_0x1a3b99=[];let _0x3081d0=writeBatch(db),_0x167341=0x0;const _0x3d06d1=collection(db,_0x48ffa1(0x1bf)),_0x536766=new Map(),_0x5998cb=(_0x44eb7c,_0x2707f6)=>{const _0x3a63de=_0x48ffa1;_0x167341>=0x1f4&&(_0x1a3b99[_0x3a63de(0x199)](_0x3081d0),_0x3081d0=writeBatch(db),_0x167341=0x0);const _0xf5d9a4=doc(_0x3d06d1,_0x44eb7c);_0x3081d0['set'](_0xf5d9a4,_0x2707f6),_0x167341++;};for(const _0x2b4852 of _0x584f2e){const _0x30079f=collection(db,_0x2b4852),_0x37e8d0=await getDocs(_0x30079f);_0x37e8d0[_0x48ffa1(0x1ae)]['forEach'](_0x722a58=>{const _0x38a5e8=_0x48ffa1,_0x106849=_0x722a58['id'],_0x53421c=_0x722a58[_0x38a5e8(0x195)]();!_0x536766[_0x38a5e8(0x197)](_0x106849)&&_0x536766[_0x38a5e8(0x1a2)](_0x106849,{'username':_0x53421c[_0x38a5e8(0x1c1)]||_0x53421c['name']||_0x106849,'email':_0x53421c['email']||null,'discord':_0x53421c['discord']||null,'createdAt':_0x53421c[_0x38a5e8(0x1ad)]||new Date()[_0x38a5e8(0x1bb)](),'divisions':[]});const _0x657c68=_0x536766[_0x38a5e8(0x1c5)](_0x106849);if(_0x2b4852==='players')_0x657c68[_0x38a5e8(0x1b2)][_0x38a5e8(0x199)]({'id':0x1,'elo':_0x53421c[_0x38a5e8(0x1ac)]||0x5dc,'isActive':_0x53421c['active']!==![]});else{if(_0x2b4852===_0x38a5e8(0x1a3))_0x657c68['divisions']['push']({'id':0x2,'elo':_0x53421c['elo']||0x5dc,'isActive':_0x53421c[_0x38a5e8(0x1be)]!==![]});else _0x2b4852===_0x38a5e8(0x1a8)&&_0x657c68['divisions']['push']({'id':0x3,'elo':_0x53421c[_0x38a5e8(0x1ac)]||0x5dc,'isActive':_0x53421c['active']!==![]});}});}for(const [_0x18eb2a,_0x362bed]of _0x536766[_0x48ffa1(0x1b9)]()){_0x5998cb(_0x18eb2a,_0x362bed);}_0x167341>0x0&&_0x1a3b99[_0x48ffa1(0x199)](_0x3081d0);const _0x2f97b1=[];for(const _0x595988 of _0x1a3b99){try{await _0x595988[_0x48ffa1(0x1a5)](),_0x2f97b1[_0x48ffa1(0x199)]({'success':!![]});}catch(_0x1e2131){_0x2f97b1[_0x48ffa1(0x199)]({'success':![],'error':_0x1e2131});}}return{'usersProcessed':_0x536766[_0x48ffa1(0x1b7)],'batchesExecuted':_0x2f97b1[_0x48ffa1(0x1b0)],'success':_0x2f97b1['every'](_0x16929b=>_0x16929b[_0x48ffa1(0x1a1)])};}function a0_0x27de(){const _0x75e8aa=['constructor','7992UnaUIS','bind','apply','data','523484QAiMmR','has','1650672bagETZ','push','589008xosLCZ','__proto__','return\x20(function()\x20','prototype','exception','warn','648395DxVMrP','success','set','playersD2','log','commit','matches','search','playersD3','88136UsPqpZ','{}.constructor(\x22return\x20this\x22)(\x20)','error','elo','createdAt','docs','70TkyAmc','length','info','divisions','13302woeIlT','672BlhfQC','matchesD2','nonParticipants','size','1614aBXcSr','entries','players','toISOString','399pDOqyD','165IbIUwP','active','userProfiles','trace','username','console','matchesD3','15wcXooS','get','toString'];a0_0x27de=function(){return _0x75e8aa;};return a0_0x27de();}export async function updateMatchReferences(){const _0xf47815=a0_0x20de,_0x3aead3=[_0xf47815(0x1a6),_0xf47815(0x1b5),_0xf47815(0x1c3)];let _0xa8f4df=0x0;for(const _0x5aadc0 of _0x3aead3){const _0x316e51=collection(db,_0x5aadc0),_0x51c1f3=await getDocs(_0x316e51),_0x16ef4a=0x1f4;let _0x348186=writeBatch(db),_0x3294b3=0x0;for(const _0x28dc5e of _0x51c1f3[_0xf47815(0x1ae)]){const _0x18ae63=_0x28dc5e[_0xf47815(0x195)](),_0x13e546=doc(db,_0x5aadc0,_0x28dc5e['id']);_0x348186['update'](_0x13e546,{'isMigrated':!![],'lastModified':new Date()[_0xf47815(0x1bb)]()}),_0x3294b3++,_0xa8f4df++,_0x3294b3>=_0x16ef4a&&(await _0x348186[_0xf47815(0x1a5)](),_0x348186=writeBatch(db),_0x3294b3=0x0);}_0x3294b3>0x0&&await _0x348186[_0xf47815(0x1a5)]();}return{'updatedCount':_0xa8f4df};}