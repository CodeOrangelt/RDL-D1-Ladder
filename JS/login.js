const a36J=a36b;(function(a,b){const v=a36b,c=a();while(!![]){try{const d=parseInt(v(0x104))/0x1+parseInt(v(0xed))/0x2+-parseInt(v(0x13a))/0x3*(-parseInt(v(0x123))/0x4)+parseInt(v(0x12a))/0x5*(parseInt(v(0x12e))/0x6)+parseInt(v(0xe6))/0x7*(parseInt(v(0x12f))/0x8)+parseInt(v(0xe5))/0x9+parseInt(v(0xe4))/0xa*(-parseInt(v(0xf1))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a36a,0x50060));import{createUserWithEmailAndPassword,signInWithEmailAndPassword,sendEmailVerification,signOut}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{doc,setDoc,collection,getDocs,query,where,getDoc,updateDoc,deleteDoc,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';function setupVerificationListener(a,b){const y=a36b;console['log']('Setting\x20up\x20email\x20verification\x20listener\x20for:',a);const c=setInterval(async()=>{const w=a36b;try{console['log'](w(0x120));const d=await signInWithEmailAndPassword(auth,a,b),e=d['user'];await e[w(0x11b)](!![]),e[w(0x10c)]?(console['log']('Email\x20has\x20been\x20verified!\x20Redirecting\x20to\x20login\x20page...'),clearInterval(c),document['getElementById'](w(0xfc))['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Email\x20verified\x20successfully!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth),setTimeout(()=>{const x=w;document[x(0x102)]('register-container')['style'][x(0xec)]='none',document[x(0x102)](x(0x115))['style']['display']=x(0x127),document['getElementById'](x(0x119))[x(0x11f)]=a,document['getElementById']('login-error')['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Your\x20account\x20has\x20been\x20verified!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';},0x7d0)):(console[w(0x13d)](w(0xff)),await signOut(auth));}catch(f){console['error']('Error\x20checking\x20verification\x20status:',f),clearInterval(c);}},0x1388);window[y(0x10e)]=c,setTimeout(()=>{const z=y;window[z(0x10e)]&&(clearInterval(window[z(0x10e)]),window['verificationCheckInterval']=null,console[z(0x13d)](z(0xe9)));},0x5*0x3c*0x3e8);}async function isUsernameAvailable(a){const A=a36b;if(!a||typeof a!==A(0x134)||a[A(0xf4)]()['length']<0x3)return document['getElementById']('register-error')['textContent']='Username\x20must\x20be\x20at\x20least\x203\x20characters\x20long',![];const b=a['trim']();try{const c=/^[a-zA-Z0-9_-]{3,20}$/;if(!c[A(0x116)](b))return document['getElementById'](A(0xfc))['textContent']='Username\x20can\x20only\x20contain\x20letters,\x20numbers,\x20underscores\x20and\x20hyphens',![];const [d,e,f]=await Promise['all']([getDocs(query(collection(db,'players'),where(A(0xf0),'==',b))),getDocs(query(collection(db,A(0x118)),where('username','==',b))),getDocs(query(collection(db,'nonParticipants'),where('username','==',b)))]);if(!d[A(0xef)]||!e[A(0xef)]||!f['empty'])return document[A(0x102)](A(0xfc))[A(0x101)]=A(0x107),![];return!![];}catch(g){return console['error'](A(0xf2),g),document['getElementById']('register-error')['textContent']=A(0x133),![];}}async function handleRegister(a){const B=a36b;a[B(0xf8)]();const b=document[B(0x102)](B(0xfc));b['textContent']='';const c=document['getElementById']('register-email')['value'],d=document[B(0x102)](B(0x11a))[B(0x11f)],f=document[B(0x102)]('register-username')[B(0x11f)],g=document[B(0x102)](B(0x113))[B(0x11f)][B(0xee)](),h=document['getElementById']('register-mode')['value'],i=document['getElementById']('non-participant')?.['checked']||![];if(i&&h!==''){b['textContent']=B(0x129);return;}if(!i&&h===''){b['textContent']='Please\x20select\x20a\x20game\x20mode\x20or\x20check\x20Non-Participant.';return;}try{const j=['purple','magenta'];if(!j['includes'](g)){b['textContent']=B(0x13c);return;}const k=await isUsernameAvailable(f);if(!k)return;const l=await createUserWithEmailAndPassword(auth,c,d),m=l['user'];await sendEmailVerification(m),await setDoc(doc(db,'pendingRegistrations',m['uid']),{'username':f['trim'](),'email':c,'gameMode':h,'nonParticipant':i,'createdAt':new Date(),'verified':![]}),b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Registration\x20pending!\x20Please\x20check\x20your\x20email\x20to\x20verify\x20your\x20account.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resendVerificationEmail(\x27'+c+B(0x10f),await signOut(auth),setupVerificationListener(c,d);}catch(n){console['error'](B(0x11e),n),b['textContent']=n['code']===B(0xfe)?'Email\x20address\x20is\x20already\x20registered':B(0x126);}}async function handleLogin(a){const C=a36b;a[C(0xf8)]();const b=document[C(0x102)](C(0x119))[C(0x11f)],c=document['getElementById']('login-password')['value'],d=document[C(0x102)]('login-error');console[C(0x13d)]('Login\x20attempt\x20started\x20for:',b),d['textContent']='';try{console['log']('Attempting\x20Firebase\x20signInWithEmailAndPassword...');const f=await signInWithEmailAndPassword(auth,b,c),g=f[C(0xfa)];console[C(0x13d)]('User\x20signed\x20in:',g['uid']);const h=[C(0x103),'playersD2',C(0xfb),C(0x114),'playersCTF','nonParticipants'];console['log'](C(0x124));let j=![],k=await Promise[C(0x137)](h['map'](l=>getDoc(doc(db,l,g[C(0xfd)]))));for(let l=0x0;l<k['length'];l++){if(k[l]['exists']()){j=!![],console[C(0x13d)](C(0x12c)+h[l]+'\x20collection');break;}}if(!j){console['log']('User\x20not\x20found\x20in\x20any\x20collection,\x20checking\x20pending\x20registration');const m=doc(db,C(0x118),g[C(0xfd)]),n=await getDoc(m);if(n['exists']()){const o=n[C(0xf5)]();console['log'](C(0x138),o);if(g[C(0x10c)]){console[C(0x13d)]('Email\x20is\x20verified,\x20processing\x20registration'),d[C(0x111)]=C(0x10b);if(o['nonParticipant'])console[C(0x13d)](C(0x135)),await setDoc(doc(db,C(0x136),g['uid']),{'username':o['username'],'email':g['email'],'createdAt':serverTimestamp(),'isNonParticipant':!![]}),console['log']('User\x20'+o[C(0xf0)]+'\x20added\x20to\x20nonParticipants\x20collection');else{let p;switch(o['gameMode']){case'D1':p='players';break;case'D2':p='playersD2';break;case'D3':p=C(0xfb);break;case C(0xe8):p=C(0x114);break;case'CTF':p='playersCTF';break;default:p='players';}console[C(0x13d)](C(0x108)+o[C(0x13b)]+C(0x130)+p);const q=collection(db,p),r=query(q,orderBy(C(0x12d),C(0x132)),limit(0x1)),s=await getDocs(r),t=s['empty']?0x1:s[C(0xe2)][0x0]['data']()['position']+0x1;await setDoc(doc(db,p,g['uid']),{'username':o[C(0xf0)],'email':g['email'],'eloRating':0x4b0,'position':t,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':o['gameMode']}),console[C(0x13d)](C(0xe7)+o[C(0xf0)]+C(0x128)+p+C(0x13e)+t);}await deleteDoc(m),setTimeout(()=>{const D=C;window['location'][D(0xf7)]='../index.html';},0x7d0);return;}else{d[C(0x111)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22warning-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20verify\x20your\x20email\x20to\x20complete\x20your\x20registration.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20id=\x22resend-button\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',document['getElementById']('resend-button')[C(0x121)](C(0x10d),()=>{resendVerificationEmail(b);}),await signOut(auth);return;}}}window['location']['href']='../index.html';}catch(u){console[C(0x122)](C(0xe1),u),d[C(0x101)]=C(0x10a)+u[C(0x106)];}}function loginFormHandler(a){const E=a36b;a[E(0xf8)]();const b=document[E(0x102)](E(0x119))['value'][E(0xf4)](),c=document['getElementById']('login-password')['value'],d=document[E(0x102)](E(0x12b));signInWithEmailAndPassword(auth,b,c)[E(0xf6)](e=>{const F=E;console['log']('User\x20signed\x20in:',e['user']),window['location']['href']=F(0x109);})['catch'](e=>{const G=E;console['error'](G(0xe1),e),d['textContent']=G(0x139)+e['message'],d['style'][G(0xec)]=G(0x127);});}function a36a(){const O=['C3rYAw5N','uhjVy2vZC2LUzYbUB24TCgfYDgLJAxbHBNqGCMvNAxn0CMf0Aw9U','BM9UugfYDgLJAxbHBNrZ','ywXS','rM91BMqGCgvUzgLUzYbYzwDPC3rYyxrPB246','tg9NAw4GzxjYB3i6ia','mZbbvMnTqNy','z2fTzu1Vzgu','sw5JB3jYzwn0igfUC3DLCIb0BYb2zxjPzMLJyxrPB24GCxvLC3rPB24','Bg9N','igf0ihbVC2L0Aw9Uia','CMvNAxn0zxiTy29UDgfPBMvY','tg9NAw4GzxjYB3i6','zg9JCW','BM9UlxbHCNrPy2LWyw50','ntbLu253qwG','mtC1nZeXnxPpEeHLEG','mtrUDe9sC3K','tMv3ihbSyxLLCIa','rhvVCW','u3rVChbLzcbJAgvJA2LUzYbMB3iGzw1HAwWGDMvYAwzPy2f0Aw9UicH0Aw1LB3v0ihjLywnOzwqP','Bg9NAw4TCgfZC3DVCMq','y2HHBMDL','zgLZCgXHEq','oteXmZy4rxHAt1zA','Dg9mB3DLCKnHC2u','zw1WDhK','DxnLCM5HBwu','ndi4mZq5ovPgthrntq','rxjYB3iGy2HLy2TPBMCGDxnLCM5HBwu6','vxnLCIbZAwDUzwqGAw4GzM9YihzLCMLMAwnHDgLVBIbLBwfPBdO','DhjPBq','zgf0yq','DgHLBG','AhjLzG','ChjLDMvUDerLzMf1Bhq','CMvNAxn0zxiTzM9YBq','DxnLCG','CgXHEwvYC0qZ','CMvNAxn0zxiTzxjYB3i','DwLK','yxv0Ac9LBwfPBc1HBhjLywr5lwLUlxvZzq','rw1HAwWGBM90ihLLDcb2zxjPzMLLzcWGD2fPDgLUzY4UlG','C2HVDY1YzwDPC3rLCG','Dgv4DenVBNrLBNq','z2v0rwXLBwvUDej5swq','CgXHEwvYCW','nJiYnde3uerQvhHh','BM9Uzq','BwvZC2fNzq','vxnLCM5HBwuGAxmGywXYzwfKEsb0ywTLBG','uhjVy2vZC2LUzYa','lI4VAw5KzxGUAhrTBa','tg9NAw4GzMfPBgvKoIa','cIaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicbtzxr0Aw5NihvWihLVDxiGywnJB3vUDc4UlGOGicaGicaGicaGicaGicaGicaGicaGica8l2rPDJ4','zw1HAwXwzxjPzMLLza','y2XPy2S','DMvYAwzPy2f0Aw9Uq2HLy2TjBNrLCNzHBa','jYKIignSyxnZpsjYzxnLBMqTyNv0Dg9UiJ4kicaGicaGicaGicaGicaGicaGicbszxnLBMqGvMvYAwzPy2f0Aw9UievTywLScIaGicaGicaGicaGicaGica8l2j1DhrVBJ4kicaGicaGicaGicaGpc9KAxy+','vMvYAwzPy2f0Aw9UigvTywLSihnLBNq','Aw5Uzxjive1m','rxjYB3iGCMvZzw5KAw5NihzLCMLMAwnHDgLVBIbLBwfPBdO','DMvYAwzPy2f0Aw9UlwfUC3DLCG','CgXHEwvYC0r1B3m','Bg9NAw4Ty29UDgfPBMvY','DgvZDa','lIbqBgvHC2uGy2HLy2SGEw91CIbPBMjVEc4kicaGicaGicaGicaGpc9KAxy+','CgvUzgLUz1jLz2LZDhjHDgLVBNm','Bg9NAw4Tzw1HAwW','CMvNAxn0zxiTCgfZC3DVCMq','z2v0swruB2TLBG','qxr0zw1WDgLUzYb0BYbYzxnLBMqGDMvYAwzPy2f0Aw9UigvTywLSihrVoG','C3r5Bgu','uMvNAxn0CMf0Aw9UigvYCM9YoG','DMfSDwu','q2HLy2TPBMCGAwyGzw1HAwWGAgfZigjLzw4GDMvYAwzPzwqUlI4','ywrKrxzLBNrmAxn0zw5LCG','zxjYB3i','ndCWmZjTweXArLC','q2HLy2TPBMCGAwyGDxnLCIbLEgLZDhmGAw4Gyw55ignVBgXLy3rPB24UlI4','CMvNAxn0zxiTBw9Kzq','uMvNAxn0CMf0Aw9UigzHAwXLzc4GugXLyxnLihrYEsbHz2fPBIbSyxrLCI4','yMXVy2S','igfKzgvKihrVia','ugXLyxnLihvUC2vSzwn0igeGz2fTzsbTB2rLigLMihLVDsbJAg9VC2uGtM9UlvbHCNrPy2LWyw50lG','mtm5nuHgrhPKBq','Bg9NAw4TzxjYB3i','vxnLCIbMB3vUzcbPBIa','Cg9ZAxrPB24','nJa2nKLkCfP2rG','mJqWnZm0nhnUvLDxAa','ihbSyxLLCIbYzwDPC3rYyxrPB24GDg8G','v2LUzg93lNjLC2vUzfzLCMLMAwnHDgLVBKvTywLSignHBgXLzcb3AxrOoG','zgvZyW','vw5HyMXLihrVihzLCMLMEsb1C2vYBMfTzsbHDMfPBgfIAwXPDhKUifbSzwfZzsb0CNKGywDHAw4GBgf0zxiU'];a36a=function(){return O;};return a36a();}function a36b(a,b){const c=a36a();return a36b=function(d,e){d=d-0xe1;let f=c[d];if(a36b['XPTuba']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a36b['vBtlgC']=g,a=arguments,a36b['XPTuba']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a36b['vBtlgC'](f),a[i]=f):f=j,f;},a36b(a,b);}async function resendVerificationEmail(a){const H=a36b;console['log'](H(0x11c),a);try{const b=document[H(0x102)](H(0xea))?.[H(0x11f)];if(!b){console[H(0x122)]('Password\x20not\x20available\x20for\x20resending\x20verification'),document[H(0x102)]('login-error')['textContent']='Please\x20enter\x20your\x20password\x20to\x20resend\x20verification\x20email';return;}const c=await signInWithEmailAndPassword(auth,a,b),d=c[H(0xfa)];console['log'](H(0xf3),d['uid']),await sendEmailVerification(d),console['log'](H(0x110)),document[H(0x102)]('login-error')['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Verification\x20email\x20has\x20been\x20resent\x20to\x20'+a+H(0x117),await signOut(auth);}catch(e){console['error'](H(0x112),e),document['getElementById'](H(0x12b))['textContent']='Error\x20sending\x20verification\x20email:\x20'+e['message'];}}window['resendVerificationEmail']=function(a){const I=a36b;console[I(0x13d)](I(0x131),a),resendVerificationEmail(a);},document[a36J(0x121)]('DOMContentLoaded',()=>{const K=a36J,a=document['getElementById'](K(0xe3)),b=document[K(0x102)](K(0x125));a&&b&&a[K(0x121)](K(0xeb),function(){const L=K;this['checked']?(b[L(0x11f)]='',b['disabled']=!![]):b['disabled']=![];});const c=document['getElementById'](K(0xf9)),d=document[K(0x102)]('login-form');c&&c[K(0x121)]('submit',handleRegister);d&&d[K(0x121)]('submit',handleLogin);const e=document[K(0x102)](K(0x100)),f=document[K(0x102)]('show-login');e&&e[K(0x121)](K(0x10d),g=>{const M=K;g['preventDefault'](),document['getElementById']('login-container')['style'][M(0xec)]=M(0x105),document['getElementById']('register-container')[M(0x11d)][M(0xec)]='block';}),f&&f[K(0x121)]('click',g=>{const N=K;g[N(0xf8)](),document['getElementById'](N(0x13f))['style'][N(0xec)]='none',document['getElementById'](N(0x115))['style'][N(0xec)]=N(0x127);});});