const a2_0x279dcd=a2_0x256f,a2_0x3d85d2=(function(){let _0x4cb135=!![];return function(_0xe4cb4e,_0x564998){const _0x23584e=_0x4cb135?function(){const _0x582c74=a2_0x256f;if(_0x564998){const _0x31307d=_0x564998[_0x582c74(0xdc)](_0xe4cb4e,arguments);return _0x564998=null,_0x31307d;}}:function(){};return _0x4cb135=![],_0x23584e;};}()),a2_0x109e98=a2_0x3d85d2(this,function(){const _0x150c6d=a2_0x256f;let _0x14a2f9;try{const _0x1ccb1a=Function(_0x150c6d(0x1ba)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x14a2f9=_0x1ccb1a();}catch(_0x346c30){_0x14a2f9=window;}const _0x14ed72=_0x14a2f9['console']=_0x14a2f9['console']||{},_0x4e661c=['log',_0x150c6d(0x198),'info','error','exception',_0x150c6d(0x27c),'trace'];for(let _0x4c5d34=0x0;_0x4c5d34<_0x4e661c['length'];_0x4c5d34++){const _0x2d9008=a2_0x3d85d2['constructor'][_0x150c6d(0x27d)]['bind'](a2_0x3d85d2),_0x41b455=_0x4e661c[_0x4c5d34],_0x2e9250=_0x14ed72[_0x41b455]||_0x2d9008;_0x2d9008[_0x150c6d(0x1e1)]=a2_0x3d85d2['bind'](a2_0x3d85d2),_0x2d9008['toString']=_0x2e9250[_0x150c6d(0xb5)]['bind'](_0x2e9250),_0x14ed72[_0x41b455]=_0x2d9008;}});a2_0x109e98();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x139453){const _0x5bbdd2=a2_0x256f;if(!_0x139453)return'#ffffff';_0x139453=_0x139453['replace']('#','');_0x139453[_0x5bbdd2(0xc6)]===0x3&&(_0x139453=_0x139453['split']('')[_0x5bbdd2(0x29b)](_0x59a8a7=>_0x59a8a7+_0x59a8a7)['join'](''));if(_0x139453['length']!==0x6)return'#ffffff';const _0x32fbcb=parseInt(_0x139453['substring'](0x0,0x2),0x10),_0x56c2a4=parseInt(_0x139453['substring'](0x2,0x4),0x10),_0x40a513=parseInt(_0x139453[_0x5bbdd2(0xf8)](0x4,0x6),0x10),_0x4a9ed7=(_0x32fbcb*0x12b+_0x56c2a4*0x24b+_0x40a513*0x72)/0x3e8;return _0x4a9ed7>=0x80?_0x5bbdd2(0xaf):'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener'](a2_0x279dcd(0x16b),()=>{const _0x3b3f3f=a2_0x279dcd;auth[_0x3b3f3f(0x20d)](async _0x5892be=>{const _0xc73adb=_0x3b3f3f;if(!_0x5892be){window['location']['href']=_0xc73adb(0x1bf);return;}try{await initializeAdminDashboard();}catch(_0x1c8dae){console['error'](_0xc73adb(0x2ab),_0x1c8dae),showNotification(_0xc73adb(0x263),_0xc73adb(0x221));}});});async function getUserTabPermissions(_0x86bd0c){const _0x550039=a2_0x279dcd;if(!_0x86bd0c)return['dashboard'];console[_0x550039(0x175)](_0x550039(0x172)+_0x86bd0c+_0x550039(0x2c9));const _0x21d353=[{'name':_0x550039(0x188),'displayName':'User\x20Profiles'},{'name':_0x550039(0x97),'displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':_0x550039(0xcd),'displayName':'D3\x20Players'},{'name':_0x550039(0xc3),'displayName':_0x550039(0x1da)}],_0x43ffec=auth['currentUser'];let _0x3bee12=null,_0x5aa738=null;for(const _0x2f6a73 of _0x21d353){try{if(_0x43ffec){const _0x2746a9=doc(db,_0x2f6a73['name'],_0x43ffec['uid']),_0x8d5ba6=await getDoc(_0x2746a9);if(_0x8d5ba6[_0x550039(0x122)]()){const _0x4e8d57=_0x8d5ba6[_0x550039(0x270)]();console['log']('Found\x20user\x20in\x20'+_0x2f6a73[_0x550039(0x125)]+'\x20by\x20UID:',_0x4e8d57);const _0x1d41ad=(_0x4e8d57[_0x550039(0x274)]||_0x4e8d57['role']||'')[_0x550039(0xbb)]();if(_0x1d41ad&&_0x1d41ad!=='none'){_0x3bee12=_0x1d41ad,_0x5aa738=_0x2f6a73[_0x550039(0x125)],console[_0x550039(0x175)]('Found\x20specific\x20role:\x20'+_0x3bee12+'\x20in\x20'+_0x5aa738);break;}}}if(!_0x3bee12){const _0x68c832=collection(db,_0x2f6a73['name']),_0x4ad592=query(_0x68c832,where('email','==',_0x86bd0c)),_0x103e20=await getDocs(_0x4ad592);if(!_0x103e20['empty']){const _0x28ac08=_0x103e20[_0x550039(0x28c)][0x0]['data']();console['log'](_0x550039(0x15a)+_0x2f6a73['displayName']+'\x20with\x20email\x20'+_0x86bd0c+':',_0x28ac08);const _0x49233e=(_0x28ac08['roleName']||_0x28ac08[_0x550039(0x210)]||'')['toLowerCase']();if(_0x49233e&&_0x49233e!=='none'){_0x3bee12=_0x49233e,_0x5aa738=_0x2f6a73['displayName'],console['log'](_0x550039(0xa9)+_0x3bee12+'\x20in\x20'+_0x5aa738);break;}}}}catch(_0x1df8ed){console['error']('Error\x20checking\x20'+_0x2f6a73['displayName']+':',_0x1df8ed);}}if(_0x3bee12){console[_0x550039(0x175)]('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x3bee12+'\x20(from\x20'+_0x5aa738+')');const _0x2042a8={'admin':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks',_0x550039(0xd4),'settings',_0x550039(0x2d5),_0x550039(0x141),'manage-highlights','user-roles-section',_0x550039(0x2d3),_0x550039(0x2d2),_0x550039(0x1a2),_0x550039(0x14a)],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies',_0x550039(0x235),'inactive-players','settings','manage-trophies',_0x550039(0x141),_0x550039(0xe2),_0x550039(0x161),'manage-matches','manage-points',_0x550039(0x1a2),'manage-ribbons'],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x2042a8[_0x3bee12])return console['log'](_0x550039(0x89)+_0x3bee12+'\x27\x20has\x20permissions:',_0x2042a8[_0x3bee12]),_0x2042a8[_0x3bee12];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x86bd0c+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0xd57424=[]){const _0x1bdc5e=a2_0x279dcd,_0x2d252d=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x396aa4=document[_0x1bdc5e(0x2c4)](_0x1bdc5e(0xca));(!_0xd57424||_0xd57424['length']===0x0)&&(_0xd57424=['dashboard']);_0x2d252d['forEach'](_0x50bb76=>{const _0x39dac6=_0x1bdc5e,_0xb738f8=_0x50bb76['getAttribute']('data-section');_0xd57424['includes'](_0xb738f8)?_0x50bb76[_0x39dac6(0x20b)][_0x39dac6(0x24d)]='flex':_0x50bb76[_0x39dac6(0x20b)]['display']='none',_0x50bb76[_0x39dac6(0x29c)]('click',()=>{const _0x780293=_0x39dac6,_0x12e7b3=_0x50bb76['getAttribute']('data-section');if(!_0xd57424[_0x780293(0x1f5)](_0x12e7b3)){showNotification(_0x780293(0x299),'error');return;}_0x2d252d['forEach'](_0x15dd81=>_0x15dd81['classList']['remove']('active')),_0x50bb76['classList']['add']('active'),_0x396aa4[_0x780293(0x257)](_0x5f5844=>{_0x5f5844['style']['display']='none';});const _0x1e6db2=document[_0x780293(0x16a)](_0x12e7b3);_0x1e6db2&&(_0x1e6db2[_0x780293(0x20b)]['display']=_0x780293(0x21c),console['log']('Switched\x20to\x20'+_0x12e7b3+_0x780293(0x1ab)));});});const _0x37b393=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0xd57424[0x0]+'\x22]');_0x37b393&&_0x37b393['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x31fbb1=a2_0x279dcd,_0x2a5830=document['querySelectorAll']('.nav-item');let _0x1c9f94=null,_0x114285=new Set();_0x2a5830[_0x31fbb1(0x257)](_0x287be9=>{const _0x10f15e=_0x31fbb1;_0x287be9[_0x10f15e(0x29c)](_0x10f15e(0x1b8),function(){const _0xe9d53f=_0x10f15e,_0x2217f7=this['getAttribute']('data-section');if(_0x2217f7===_0x1c9f94)return;_0x1c9f94&&(document[_0xe9d53f(0x16a)](_0x1c9f94)['style']['display']='none',_0x2a5830[_0xe9d53f(0x257)](_0x25d4de=>_0x25d4de['classList']['remove'](_0xe9d53f(0x8f)))),document['getElementById'](_0x2217f7)['style'][_0xe9d53f(0x24d)]=_0xe9d53f(0x21c),this['classList'][_0xe9d53f(0x18e)](_0xe9d53f(0x8f)),_0x1c9f94=_0x2217f7;});});}function loadSectionData(_0x665e97){return;}async function initializeAdminDashboard(){const _0x49b826=a2_0x279dcd;try{const _0x10ebac=auth['currentUser'],_0x21a2fe=await getUserTabPermissions(_0x10ebac['email']);console['log']('User\x20'+_0x10ebac['email']+_0x49b826(0x251),_0x21a2fe),window['userAllowedTabs']=_0x21a2fe,setupSidebarNavigation(_0x21a2fe),setupLadderSelector(),setupDashboardSection(),_0x21a2fe['includes']('manage-players')&&setupManagePlayersSection(),_0x21a2fe['includes']('elo-history')&&setupEloHistorySection(),_0x21a2fe['includes']('manage-ranks')&&setupRankControls(),_0x21a2fe[_0x49b826(0x1f5)]('manage-articles')&&setupManageArticlesSection(),_0x21a2fe['includes']('user-roles-section')&&setupUserRolesSection(),_0x21a2fe['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x21a2fe['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x21a2fe[_0x49b826(0x1f5)]('inactive-players')&&setupInactivePlayersSection(),_0x21a2fe[_0x49b826(0x1f5)]('manage-matches')&&setupManageMatchesSection(),_0x21a2fe['includes']('manage-points')&&setupManagePointsSection(),_0x21a2fe['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x21a2fe);}catch(_0x3d61e0){console['error'](_0x49b826(0x2af),_0x3d61e0);}}function setupDataLoadButtons(_0x3b4c8c=[]){const _0x2aad6d=a2_0x279dcd;(!_0x3b4c8c||_0x3b4c8c['length']===0x0)&&(_0x3b4c8c=['dashboard']);const _0x566686=document['getElementById']('load-dashboard-data');_0x566686&&_0x566686[_0x2aad6d(0x29c)](_0x2aad6d(0x1b8),function(){this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x5de89b=>{const _0x8f4ad8=a2_0x256f;console['error']('Error\x20loading\x20dashboard:',_0x5de89b),this[_0x8f4ad8(0x22c)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x50c7c1=_0x8f4ad8;this['innerHTML']=_0x50c7c1(0xc5);},0xbb8);});});if(_0x3b4c8c['includes'](_0x2aad6d(0x2d5))){const _0x37aae6=document['getElementById']('load-trophies-data');_0x37aae6&&_0x37aae6['addEventListener']('click',function(){const _0x53e058=_0x2aad6d;console['log'](_0x53e058(0x211)),this['classList']['add'](_0x53e058(0x28f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x2eccd8=_0x53e058;this['classList'][_0x2eccd8(0x1ad)]('loading'),this['innerHTML']=_0x2eccd8(0x170);})['catch'](_0x50af11=>{const _0x59c225=_0x53e058;console[_0x59c225(0x221)]('Error\x20loading\x20trophies:',_0x50af11),this[_0x59c225(0x22c)]['remove'](_0x59c225(0x28f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x3b4c8c[_0x2aad6d(0x1f5)]('manage-players')){const _0x341806=document[_0x2aad6d(0x16a)]('load-players-data');_0x341806&&_0x341806['addEventListener']('click',function(){const _0x48d3b3=_0x2aad6d;console['log']('Load\x20players\x20data\x20clicked'),this[_0x48d3b3(0x22c)]['add']('loading'),this[_0x48d3b3(0x20a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x48d3b3(0x2d9)](()=>{const _0xafd431=_0x48d3b3;this['classList']['remove'](_0xafd431(0x28f)),this[_0xafd431(0x20a)]=_0xafd431(0x200);})['catch'](_0x2fa3af=>{const _0x4cfb8f=_0x48d3b3;console['error']('Error\x20loading\x20players:',_0x2fa3af),this['classList']['remove'](_0x4cfb8f(0x28f)),this[_0x4cfb8f(0x20a)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3c3c35=_0x4cfb8f;this[_0x3c3c35(0x20a)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x3b4c8c['includes']('elo-history')){const _0x414a2b=document[_0x2aad6d(0x16a)]('load-elo-history-data');_0x414a2b&&_0x414a2b['addEventListener']('click',function(){const _0x30dfd9=_0x2aad6d;console[_0x30dfd9(0x175)]('Load\x20history\x20data\x20clicked'),this[_0x30dfd9(0x22c)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x5a3216=_0x30dfd9;this['classList'][_0x5a3216(0x1ad)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x30dfd9(0x9c)](_0x40576c=>{const _0x5075a0=_0x30dfd9;console[_0x5075a0(0x221)]('Error\x20loading\x20history:',_0x40576c),this[_0x5075a0(0x22c)][_0x5075a0(0x1ad)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x46c228=_0x5075a0;this[_0x46c228(0x20a)]=_0x46c228(0x135);},0xbb8);});});}if(_0x3b4c8c['includes']('manage-articles')){const _0x3662b4=document['getElementById']('load-articles-data');_0x3662b4&&_0x3662b4[_0x2aad6d(0x29c)]('click',function(){const _0x10e669=_0x2aad6d;console[_0x10e669(0x175)]('Load\x20articles\x20data\x20clicked'),this[_0x10e669(0x22c)][_0x10e669(0x18e)]('loading'),this['innerHTML']=_0x10e669(0x201),loadArticles()[_0x10e669(0x2d9)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x4f0a31=>{const _0x42724d=_0x10e669;console['error'](_0x42724d(0x10e),_0x4f0a31),this['classList'][_0x42724d(0x1ad)]('loading'),this['innerHTML']=_0x42724d(0x1e0),setTimeout(()=>{const _0x54560c=_0x42724d;this[_0x54560c(0x20a)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x3b4c8c['includes'](_0x2aad6d(0x161))){const _0x136dad=document[_0x2aad6d(0x16a)]('load-users-data');_0x136dad&&_0x136dad['addEventListener']('click',function(){const _0x53a3a1=_0x2aad6d;console[_0x53a3a1(0x175)](_0x53a3a1(0x224)),this['classList']['add']('loading'),this[_0x53a3a1(0x20a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x53a3a1(0x2d9)](()=>{const _0x3744d3=_0x53a3a1;this['classList'][_0x3744d3(0x1ad)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x24facd=>{console['error']('Error\x20loading\x20users:',_0x24facd),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x3b4c8c['includes'](_0x2aad6d(0xd4))){const _0x1ff563=document['getElementById']('load-inactive-players-data');_0x1ff563&&_0x1ff563['addEventListener']('click',function(){const _0x12ce9b=_0x2aad6d;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x12ce9b(0x201),loadInactivePlayersData()['then'](()=>{const _0xd5da72=_0x12ce9b;this[_0xd5da72(0x22c)][_0xd5da72(0x1ad)](_0xd5da72(0x28f)),this['innerHTML']=_0xd5da72(0x1bd);})['catch'](_0x293a11=>{const _0x48eea9=_0x12ce9b;console[_0x48eea9(0x221)]('Error\x20loading\x20inactive\x20players:',_0x293a11),this['classList']['remove'](_0x48eea9(0x28f)),this[_0x48eea9(0x20a)]=_0x48eea9(0x1e0),setTimeout(()=>{const _0x2b4a52=_0x48eea9;this['innerHTML']=_0x2b4a52(0x1bd);},0xbb8);});});}if(_0x3b4c8c['includes']('manage-highlights')){const _0x2d1c55=document['getElementById']('load-highlights-data');_0x2d1c55&&_0x2d1c55[_0x2aad6d(0x29c)](_0x2aad6d(0x1b8),function(){const _0xd4ae1f=_0x2aad6d;console[_0xd4ae1f(0x175)]('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this[_0xd4ae1f(0x20a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x381245=_0xd4ae1f;this['classList'][_0x381245(0x1ad)](_0x381245(0x28f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})[_0xd4ae1f(0x9c)](_0x40694a=>{const _0x3ae3b3=_0xd4ae1f;console['error']('Error\x20loading\x20highlights:',_0x40694a),this[_0x3ae3b3(0x22c)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2b0bc9=_0x3ae3b3;this['innerHTML']=_0x2b0bc9(0x164);},0xbb8);});});}if(_0x3b4c8c['includes']('manage-matches')){const _0x3183cc=document['getElementById']('load-matches-data');_0x3183cc&&_0x3183cc['addEventListener']('click',function(){const _0x3a9a9d=_0x2aad6d;console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x3a9a9d(0x20a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x14b904=_0x3a9a9d;this['classList'][_0x14b904(0x1ad)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x152d7a=>{const _0x218636=_0x3a9a9d;console[_0x218636(0x221)]('Error\x20loading\x20matches:',_0x152d7a),this[_0x218636(0x22c)]['remove']('loading'),this['innerHTML']=_0x218636(0x1e0),setTimeout(()=>{const _0x1a4273=_0x218636;this[_0x1a4273(0x20a)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x3b4c8c['includes'](_0x2aad6d(0x14a))){const _0x188088=document['getElementById']('load-ribbons-data');_0x188088&&_0x188088['addEventListener']('click',function(){const _0x24dd76=_0x2aad6d;console[_0x24dd76(0x175)](_0x24dd76(0xa1)),this['classList']['add'](_0x24dd76(0x28f)),this[_0x24dd76(0x20a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()[_0x24dd76(0x2d9)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x5b1cf9=>{const _0x4df84a=_0x24dd76;console['error'](_0x4df84a(0x1c1),_0x5b1cf9),this['classList'][_0x4df84a(0x1ad)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x53d786=_0x4df84a;this['innerHTML']=_0x53d786(0xe1);},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x2c288c=a2_0x279dcd;document['getElementById']('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document[_0x2c288c(0x16a)](_0x2c288c(0x268))['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0xb09768=a2_0x279dcd,_0x2491db=document['querySelectorAll']('.ladder-switch\x20input');_0x2491db['forEach'](_0x94073a=>{_0x94073a['addEventListener']('change',()=>{const _0x57fd91=a2_0x256f;currentLadder=_0x94073a[_0x57fd91(0x1fb)],document[_0x57fd91(0x184)]['setAttribute']('data-ladder',currentLadder);const _0xa65646=document['getElementById']('current-ladder-display');_0xa65646&&(_0xa65646[_0x57fd91(0x290)]=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x57fd91(0x16a)]('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution'][_0x57fd91(0x2a8)](),charts[_0x57fd91(0x8c)]=null),charts['activity']&&(charts['activity'][_0x57fd91(0x2a8)](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x46d65c=document[_0xb09768(0x16a)]('current-ladder-display');_0x46d65c&&(_0x46d65c['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x14eec8=a2_0x279dcd;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x14eec8(0x1af))['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0x8b3aa=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x1d5f75=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x14eec8(0x2d6):_0x14eec8(0x1d5),_0x590860=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':_0x14eec8(0x29e),_0x344128=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0x14eec8(0x203):'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x8b3aa+',\x20'+_0x1d5f75);const _0x43ed2e=await getDocs(collection(db,_0x8b3aa)),_0x4cf746=_0x43ed2e['size'],_0xf71d6a=await getDocs(collection(db,_0x1d5f75)),_0x1ba01a=_0xf71d6a['size'],_0x318609=await getDocs(collection(db,_0x590860)),_0x488bce=_0x318609['size'],_0x2f8a76=await getDocs(collection(db,_0x344128)),_0x3359c2=_0x2f8a76['size'];return document['getElementById']('player-count')[_0x14eec8(0x290)]=_0x4cf746,document['getElementById'](_0x14eec8(0x1af))['textContent']=_0x1ba01a,document['getElementById']('pending-count')[_0x14eec8(0x290)]=_0x488bce,document['getElementById']('rejected-count')['textContent']=_0x3359c2,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x290f91){console['error']('Error\x20loading\x20dashboard\x20data:',_0x290f91);throw _0x290f91;}}async function createRankDistributionChart(){const _0x579e50=a2_0x279dcd;try{const _0x1470ba=collection(db,currentLadder==='D1'?_0x579e50(0x97):'playersD2'),_0x1021a8=await getDocs(_0x1470ba),_0x1a15a7={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x1021a8['forEach'](_0x5e502f=>{const _0x4c6fc4=_0x579e50,_0x4d3209=_0x5e502f['data'](),_0x4ea891=_0x4d3209['eloRating']||0x4b0;if(_0x4ea891>=0x7d0)_0x1a15a7[_0x4c6fc4(0xd3)]++;else{if(_0x4ea891>=0x708)_0x1a15a7['Gold']++;else{if(_0x4ea891>=0x640)_0x1a15a7['Silver']++;else{if(_0x4ea891>=0x578)_0x1a15a7[_0x4c6fc4(0x16c)]++;else _0x1a15a7[_0x4c6fc4(0x16d)]++;}}}});const _0x4cdf24=document[_0x579e50(0x16a)]('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts[_0x579e50(0x8c)]=new Chart(_0x4cdf24,{'type':'doughnut','data':{'labels':Object['keys'](_0x1a15a7),'datasets':[{'data':Object['values'](_0x1a15a7),'backgroundColor':['#808080','#CD7F32',_0x579e50(0x23a),'#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x924822){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x924822),document['getElementById'](_0x579e50(0x13f))['innerHTML']=_0x579e50(0xf7);}}async function createActivityChart(){const _0x4a2306=a2_0x279dcd;try{const _0x24a585=currentLadder==='D1'?'approvedMatches':_0x4a2306(0x2d6),_0x339d20=collection(db,_0x24a585),_0x478553=new Date();_0x478553['setDate'](_0x478553[_0x4a2306(0x92)]()-0x7);const _0x522052=query(_0x339d20,where(_0x4a2306(0x27f),'>=',_0x478553),orderBy('approvedAt',_0x4a2306(0x17b))),_0x5bff89=await getDocs(_0x522052),_0x4acf7f=['Sunday','Monday',_0x4a2306(0x214),'Wednesday','Thursday','Friday','Saturday'],_0x5f8e22=_0x4acf7f[_0x4a2306(0x26d)]((_0x439585,_0x12599d)=>({..._0x439585,[_0x12599d]:0x0}),{});_0x5bff89['forEach'](_0x21c3a4=>{const _0x5cd88a=_0x4a2306,_0x327ea8=_0x21c3a4['data']();if(_0x327ea8['approvedAt']){const _0x198690=_0x4acf7f[new Date(_0x327ea8[_0x5cd88a(0x27f)]['seconds']*0x3e8)['getDay']()];_0x5f8e22[_0x198690]++;}});const _0x10a867=document['getElementById']('activity-chart');charts['activity']&&charts[_0x4a2306(0xb1)]['destroy'](),charts['activity']=new Chart(_0x10a867,{'type':_0x4a2306(0x127),'data':{'labels':_0x4acf7f,'datasets':[{'label':'Matches\x20Played','data':_0x4acf7f['map'](_0xc82f59=>_0x5f8e22[_0xc82f59]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':_0x4a2306(0x207),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x4a2306(0x2d7)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x4a2306(0x2d7)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':_0x4a2306(0x2d7)}},'title':{'display':!![],'text':currentLadder+_0x4a2306(0xf3),'color':_0x4a2306(0x2d7),'font':{'size':0x10}}}}});}catch(_0x10afa4){console[_0x4a2306(0x221)]('Error\x20creating\x20activity\x20chart:',_0x10afa4),document[_0x4a2306(0x16a)]('activity-chart')['innerHTML']=_0x4a2306(0xf7);}}async function loadPlayersData(){const _0x1c5621=a2_0x279dcd,_0x1c43ce=document['getElementById'](_0x1c5621(0x293));if(!_0x1c43ce)return;_0x1c43ce['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x2bfefc=_0x1c5621(0x97);if(currentLadder==='D2')_0x2bfefc='playersD2';else currentLadder==='D3'&&(_0x2bfefc='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x2bfefc+_0x1c5621(0x1f8));const _0x94835f=collection(db,_0x2bfefc),_0x3ff5ad=query(_0x94835f,orderBy('eloRating','desc')),_0x38bf5f=await getDocs(_0x3ff5ad);if(_0x38bf5f['empty']){_0x1c43ce['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x1c43ce[_0x1c5621(0x20a)]='';let _0x4712b6=0x1;_0x38bf5f['forEach'](_0x19239c=>{const _0x4feb94=_0x1c5621,_0x5bd7e5=_0x19239c['data'](),_0x2de40c=getRankFromElo(_0x5bd7e5['eloRating']||0x4b0),_0x34c103=getRankStyle(_0x5bd7e5[_0x4feb94(0x1ae)]||0x4b0),_0x19311c=document['createElement']('tr');_0x19311c[_0x4feb94(0x20a)]=_0x4feb94(0xe9)+_0x4712b6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x34c103['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5bd7e5[_0x4feb94(0x278)]||_0x4feb94(0x2b1))+_0x4feb94(0x2bb)+(_0x5bd7e5['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x34c103[_0x4feb94(0x21d)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2de40c+_0x4feb94(0x2d4)+(_0x5bd7e5['wins']||0x0)+'W\x20/\x20'+(_0x5bd7e5[_0x4feb94(0x1b9)]||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x19239c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x19239c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1c43ce['appendChild'](_0x19311c),_0x4712b6++;}),setupPlayerActionButtons();}catch(_0x3e12d7){console['error']('Error\x20loading\x20players:',_0x3e12d7),_0x1c43ce['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x3e12d7['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x18dcff){const _0x3daf59=a2_0x279dcd;if(_0x18dcff>=0x7d0)return _0x3daf59(0xd3);if(_0x18dcff>=0x708)return'Gold';if(_0x18dcff>=0x640)return'Silver';if(_0x18dcff>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x57aa00=a2_0x279dcd;document['querySelectorAll']('.edit-btn')[_0x57aa00(0x257)](_0x1d73e6=>{const _0x25a34b=_0x57aa00;_0x1d73e6[_0x25a34b(0x29c)]('click',async _0x4dfeb1=>{const _0x240bbd=_0x4dfeb1['currentTarget']['dataset']['id'];openEditPlayerModal(_0x240bbd);});}),document['querySelectorAll']('.delete-btn')['forEach'](_0x34d53a=>{const _0x38cf17=_0x57aa00;_0x34d53a[_0x38cf17(0x29c)]('click',async _0x1b209a=>{const _0x14a9f8=_0x1b209a['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x14a9f8);});});}async function openEditPlayerModal(_0x511241){const _0x4142a1=a2_0x279dcd;try{const _0x15b246=currentLadder==='D1'?'players':'playersD2',_0x249221=doc(db,_0x15b246,_0x511241),_0x11c06d=await getDoc(_0x249221);if(!_0x11c06d['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x497e1a=_0x11c06d[_0x4142a1(0x270)](),_0x3c56b7=document[_0x4142a1(0x16a)]('edit-player-modal'),_0x3703d6=document['getElementById']('edit-username'),_0xd079c6=document[_0x4142a1(0x16a)](_0x4142a1(0x248)),_0x271d3a=document['getElementById']('edit-wins'),_0xf405cd=document['getElementById'](_0x4142a1(0xff));_0x3703d6['value']=_0x497e1a['username']||'',_0xd079c6['value']=_0x497e1a[_0x4142a1(0x1ae)]||0x4b0,_0x271d3a[_0x4142a1(0x1fb)]=_0x497e1a['wins']||0x0,_0xf405cd['value']=_0x497e1a[_0x4142a1(0x1b9)]||0x0,_0x3c56b7['dataset']['playerId']=_0x511241,_0x3c56b7['classList']['add']('active');}catch(_0x431410){console['error']('Error\x20opening\x20edit\x20modal:',_0x431410),showNotification('Failed\x20to\x20load\x20player\x20data',_0x4142a1(0x221));}}async function saveEditedPlayer(){const _0x408b3f=a2_0x279dcd;try{const _0x3a05ad=document['getElementById']('edit-player-modal'),_0x5df01c=_0x3a05ad['dataset']['playerId'];if(!_0x5df01c){showNotification('No\x20player\x20selected','error');return;}const _0x199596=document['getElementById'](_0x408b3f(0x2df)),_0x2e3ebc=document['getElementById']('edit-elo'),_0x2224be=document['getElementById']('edit-wins'),_0x2f26fe=document['getElementById'](_0x408b3f(0xff)),_0x38246a=_0x199596[_0x408b3f(0x1fb)]['trim'](),_0x19a8ce=parseInt(_0x2e3ebc['value']),_0x3e6610=parseInt(_0x2224be['value']),_0x106ed5=parseInt(_0x2f26fe['value']);if(!_0x38246a||isNaN(_0x19a8ce)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x4fdcb4=currentLadder==='D1'?'players':'playersD2',_0x4ca991=doc(db,_0x4fdcb4,_0x5df01c),_0x6d6dcf=await getDoc(_0x4ca991),_0x5589b3=_0x6d6dcf['exists']()?_0x6d6dcf[_0x408b3f(0x270)]():{},_0x40359a=_0x5589b3[_0x408b3f(0x1ae)]||0x4b0;await updateDoc(_0x4ca991,{'username':_0x38246a,'eloRating':_0x19a8ce,'wins':_0x3e6610||0x0,'losses':_0x106ed5||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x408b3f(0xe0)]['email']});if(_0x19a8ce!==_0x40359a){const _0x111fc6=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x111fc6),{'player':_0x38246a,'previousElo':_0x40359a,'newElo':_0x19a8ce,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x408b3f(0xe0)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x408b3f(0xf4),'success');}catch(_0x3f180a){console['error'](_0x408b3f(0x8d),_0x3f180a),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x3f180a['message'],_0x408b3f(0x221));}}function closeEditPlayerModal(){const _0x29d9f4=a2_0x279dcd,_0x2dfc24=document['getElementById']('edit-player-modal');_0x2dfc24[_0x29d9f4(0x22c)]['remove']('active'),_0x2dfc24['dataset'][_0x29d9f4(0x2dc)]='';}async function confirmDeletePlayer(_0x27c69d){const _0x14db4d=a2_0x279dcd;if(confirm(_0x14db4d(0x9d)))try{const _0x151529=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x151529,_0x27c69d)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x29b7dc){console[_0x14db4d(0x221)]('Error\x20deleting\x20player:',_0x29b7dc),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x29b7dc['message'],_0x14db4d(0x221));}}async function setupManagePlayersSection(){const _0xfed019=a2_0x279dcd,_0x71b83=document[_0xfed019(0x16a)]('add-player-form');_0x71b83&&_0x71b83['addEventListener']('submit',async _0x5333e0=>{_0x5333e0['preventDefault'](),await addNewPlayer();});const _0x2fac3e=document['getElementById'](_0xfed019(0x17e));_0x2fac3e&&_0x2fac3e['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x207bb3=document[_0xfed019(0x16a)](_0xfed019(0x298));_0x207bb3&&_0x207bb3['addEventListener']('click',saveEditedPlayer);const _0x17eb94=document[_0xfed019(0x16a)]('cancel-edit-btn');_0x17eb94&&_0x17eb94['addEventListener'](_0xfed019(0x1b8),closeEditPlayerModal);const _0x26862a=document['getElementById']('edit-player-modal');_0x26862a&&_0x26862a[_0xfed019(0x29c)]('click',_0x544655=>{_0x544655['target']===_0x26862a&&closeEditPlayerModal();});const _0x4b0c1d=document[_0xfed019(0x16a)]('players-ladder-selector');_0x4b0c1d&&_0x4b0c1d['addEventListener']('change',()=>{currentLadder=_0x4b0c1d['value'],loadPlayersData();});}async function addNewPlayer(){const _0x6b6100=a2_0x279dcd;try{const _0x1149ef=document[_0x6b6100(0x16a)](_0x6b6100(0xd1)),_0x44a8b3=document['getElementById']('new-player-elo'),_0x4b87ed=_0x1149ef['value']['trim'](),_0x13107c=parseInt(_0x44a8b3['value'])||0x4b0;if(!_0x4b87ed){alert(_0x6b6100(0x291));return;}console['log']('Adding\x20player\x20'+_0x4b87ed+'\x20with\x20ELO\x20'+_0x13107c+'\x20to\x20'+currentLadder+_0x6b6100(0x230));let _0x30f6b6='players',_0x4d4040='eloHistory';if(currentLadder==='D2')_0x30f6b6='playersD2',_0x4d4040='eloHistoryD2';else currentLadder==='D3'&&(_0x30f6b6='playersD3',_0x4d4040=_0x6b6100(0x2ce));const _0x4e6a77=query(collection(db,_0x30f6b6),where(_0x6b6100(0x278),'==',_0x4b87ed)),_0x30cf95=await getDocs(_0x4e6a77);if(!_0x30cf95[_0x6b6100(0x260)]){alert(_0x6b6100(0xad)+_0x4b87ed+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x48f1d9=auth['currentUser'],_0x32fa96={'username':_0x4b87ed,'eloRating':_0x13107c,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x48f1d9?_0x48f1d9[_0x6b6100(0x1b5)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x30f6b6),_0x32fa96),await addDoc(collection(db,_0x4d4040),{'player':_0x4b87ed,'previousElo':0x4b0,'newElo':_0x13107c,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x48f1d9?_0x48f1d9['email']:_0x6b6100(0x2a5),'gameMode':currentLadder}),_0x1149ef['value']='',_0x44a8b3[_0x6b6100(0x1fb)]=_0x6b6100(0x24a),alert(_0x6b6100(0xc4)+_0x4b87ed+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x460770){console['error']('Error\x20adding\x20player:',_0x460770),alert(_0x6b6100(0x139)+_0x460770['message']);}}document[a2_0x279dcd(0x29c)]('DOMContentLoaded',()=>{const _0x500976=a2_0x279dcd,_0x3159ee=document['getElementById'](_0x500976(0x22b));_0x3159ee&&_0x3159ee['addEventListener'](_0x500976(0x1fa),_0x29a11f=>{_0x29a11f['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x41cfdc=a2_0x279dcd,_0x3e2302=document['getElementById'](_0x41cfdc(0x17e))['value']['toLowerCase'](),_0x10691e=document['querySelectorAll']('#players-table-body\x20tr');let _0x35643f=0x0;_0x10691e['forEach'](_0x4586fb=>{const _0x27e0da=_0x41cfdc,_0x2dfafc=_0x4586fb[_0x27e0da(0x23e)]('.username')?.['textContent']['toLowerCase']()||'';_0x2dfafc['includes'](_0x3e2302)?(_0x4586fb[_0x27e0da(0x20b)]['display']='',_0x35643f++):_0x4586fb['style'][_0x27e0da(0x24d)]='none';});const _0x2a71cd=document['getElementById']('no-results-message');_0x2a71cd&&(_0x35643f===0x0&&_0x3e2302!==''?_0x2a71cd['style']['display']='block':_0x2a71cd['style']['display']='none');}function debounce(_0x23f2ce,_0x5a5426){let _0x385ca9;return function(..._0x2e6b81){clearTimeout(_0x385ca9),_0x385ca9=setTimeout(()=>_0x23f2ce['apply'](this,_0x2e6b81),_0x5a5426);};}async function loadEloHistory(_0x123650=0x1){const _0x14133f=a2_0x279dcd,_0x412e90=document['getElementById']('elo-history-table-body'),_0x201157=currentLadder[_0x14133f(0xbb)]();if(!_0x412e90)return;_0x412e90['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x291e9d=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x4bf7bf=collection(db,_0x291e9d);let _0xfea8c4;if(_0x123650>eloHistoryPagination[_0x201157]['page']&&eloHistoryPagination[_0x201157]['lastVisible'])_0xfea8c4=query(_0x4bf7bf,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x201157]['lastVisible']),limit(PAGE_SIZE));else _0x123650<eloHistoryPagination[_0x201157][_0x14133f(0xf6)]&&eloHistoryPagination[_0x201157]['firstVisible']?_0xfea8c4=query(_0x4bf7bf,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x201157][_0x14133f(0x9e)]),limitToLast(PAGE_SIZE)):_0xfea8c4=query(_0x4bf7bf,orderBy('timestamp',_0x14133f(0x2b3)),limit(PAGE_SIZE));const _0xd73c61=await getDocs(_0xfea8c4);if(_0xd73c61[_0x14133f(0x260)]){_0x412e90['innerHTML']=_0x14133f(0x1d2),document['getElementById'](_0x201157+_0x14133f(0x279))[_0x14133f(0x290)]='Page\x201';return;}eloHistoryPagination[_0x201157][_0x14133f(0xf6)]=_0x123650,eloHistoryPagination[_0x201157]['firstVisible']=_0xd73c61[_0x14133f(0x28c)][0x0],eloHistoryPagination[_0x201157][_0x14133f(0x83)]=_0xd73c61['docs'][_0xd73c61[_0x14133f(0x28c)][_0x14133f(0xc6)]-0x1];const _0xa2efdb=new Map();_0x412e90['innerHTML']='';const _0x1dbcaf=async _0x11b73e=>{const _0x5d2c95=_0x14133f;if(typeof _0x11b73e!=='string'||_0x11b73e[_0x5d2c95(0xc6)]<0x14||/[^a-zA-Z0-9-_]/[_0x5d2c95(0x269)](_0x11b73e))return _0x11b73e;if(_0xa2efdb['has'](_0x11b73e))return _0xa2efdb['get'](_0x11b73e);try{for(const _0x40edff of['players','playersD2','playersD3','nonParticipants']){const _0x3d5684=await getDoc(doc(db,_0x40edff,_0x11b73e));if(_0x3d5684['exists']()&&_0x3d5684['data']()['username']){const _0x2d1b67=_0x3d5684['data']()[_0x5d2c95(0x278)];return _0xa2efdb[_0x5d2c95(0x240)](_0x11b73e,_0x2d1b67),_0x2d1b67;}}return _0x11b73e;}catch(_0xed2e0a){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x11b73e+':',_0xed2e0a),_0x11b73e;}};for(const _0x198660 of _0xd73c61[_0x14133f(0x28c)]){const _0x2f3f5d=_0x198660['data'](),_0x4ad76a=document[_0x14133f(0xce)]('tr'),_0x48568c=_0x2f3f5d['timestamp']?new Date(_0x2f3f5d['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x61f8e9=_0x2f3f5d['newElo']-_0x2f3f5d['previousElo'],_0xa5de4b=_0x61f8e9>0x0?'positive-change':_0x61f8e9<0x0?'negative-change':'',_0xbb515b=_0x61f8e9>0x0?'+':'',_0x3654bd=_0x2f3f5d['player']||_0x2f3f5d['username']||_0x2f3f5d[_0x14133f(0x123)]||_0x14133f(0x236),_0x138527=await _0x1dbcaf(_0x3654bd);_0x4ad76a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x48568c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x138527+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x2f3f5d[_0x14133f(0x111)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x2f3f5d[_0x14133f(0x1a8)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0xa5de4b+'\x22>'+_0xbb515b+_0x61f8e9+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x2f3f5d['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2f3f5d[_0x14133f(0x100)]||_0x2f3f5d['promotedBy']||_0x2f3f5d['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x412e90['appendChild'](_0x4ad76a);}document['getElementById'](_0x201157+_0x14133f(0x279))['textContent']=_0x14133f(0x173)+_0x123650;const _0x3176a9=document['getElementById'](_0x201157+'-prev-page'),_0x1fb4c8=document[_0x14133f(0x16a)](_0x201157+'-next-page');if(_0x3176a9)_0x3176a9[_0x14133f(0x99)]=_0x123650<=0x1;const _0x822145=query(_0x4bf7bf,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x201157]['lastVisible']),limit(0x1)),_0x2b3f70=await getDocs(_0x822145);if(_0x1fb4c8)_0x1fb4c8[_0x14133f(0x99)]=_0x2b3f70['empty'];}catch(_0x514181){console['error']('Error\x20loading\x20ELO\x20history:',_0x514181),_0x412e90[_0x14133f(0x20a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x514181['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x430d65){const _0x5903dc=a2_0x279dcd;switch(_0x430d65){case _0x5903dc(0xae):return'Match\x20Result';case'promotion':return'Promotion';case'demotion':return'Demotion';case'admin_modification':return _0x5903dc(0xeb);case'initial_placement':return'Initial\x20Placement';default:return _0x430d65||'Unknown';}}function setupEloHistorySection(){const _0x2ee77d=a2_0x279dcd;document[_0x2ee77d(0x16a)](_0x2ee77d(0x1a4))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document[_0x2ee77d(0x16a)](_0x2ee77d(0x2a3))['addEventListener'](_0x2ee77d(0x1b8),()=>{const _0x5a41f4=_0x2ee77d;loadEloHistory(eloHistoryPagination['d1'][_0x5a41f4(0xf6)]+0x1);}),document['getElementById']('d2-prev-page')['addEventListener'](_0x2ee77d(0x1b8),()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener'](_0x2ee77d(0x1b8),()=>{const _0xb8a8c6=_0x2ee77d;loadEloHistory(eloHistoryPagination['d2'][_0xb8a8c6(0xf6)]+0x1);});const _0x21d869=document['getElementById'](_0x2ee77d(0x13e)),_0x4c56e0=document[_0x2ee77d(0x16a)]('d3-next-page');_0x21d869&&_0x21d869['addEventListener'](_0x2ee77d(0x1b8),()=>{const _0x241421=_0x2ee77d;loadEloHistory(eloHistoryPagination['d3'][_0x241421(0xf6)]-0x1);});_0x4c56e0&&_0x4c56e0[_0x2ee77d(0x29c)]('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0xfe1393=document['getElementById']('elo-history-search');_0xfe1393&&_0xfe1393['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x1def6f=document[_0x2ee77d(0x16a)]('history-type-filter');_0x1def6f&&_0x1def6f['addEventListener']('change',applyEloHistoryFilters);const _0x593e46=document['getElementById']('reset-history-filters');_0x593e46&&_0x593e46[_0x2ee77d(0x29c)]('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x72d11=a2_0x279dcd,_0x520803=document['getElementById']('elo-history-search')[_0x72d11(0x1fb)][_0x72d11(0xbb)](),_0x3256db=document[_0x72d11(0x2c4)]('#elo-history-table-body\x20tr');let _0x28c2d5=0x0;_0x3256db['forEach'](_0x308a94=>{const _0x4bd450=_0x72d11;if(_0x308a94['classList'][_0x4bd450(0x25d)]('loading-cell')||_0x308a94['classList']['contains']('empty-state')||_0x308a94['classList']['contains']('error-state'))return;const _0x3e8618=_0x308a94['querySelector']('.player')?.[_0x4bd450(0x290)]['toLowerCase']()||'',_0x7ce8cb=_0x308a94['querySelector'](_0x4bd450(0x107))?.['textContent']['toLowerCase']()||'',_0x3960ba=_0x308a94['querySelector']('.admin-action')?.['textContent'][_0x4bd450(0xbb)]()||'';_0x3e8618['includes'](_0x520803)||_0x7ce8cb[_0x4bd450(0x1f5)](_0x520803)||_0x3960ba[_0x4bd450(0x1f5)](_0x520803)?(_0x308a94['style']['display']='',_0x28c2d5++):_0x308a94['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x289201=a2_0x279dcd,_0x5271cb=document['getElementById']('history-start-date')['value'],_0x320440=document['getElementById'](_0x289201(0x21f))['value'],_0x662a23=document['getElementById']('history-type-filter')[_0x289201(0x1fb)],_0x42db23=currentLadder[_0x289201(0xbb)]();eloHistoryPagination[_0x42db23]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x1e68da=document['getElementById']('elo-history-table-body');_0x1e68da[_0x289201(0x20a)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x1e1a00=currentLadder==='D1'?'eloHistory':_0x289201(0x16e),_0xf8d8b0=collection(db,_0x1e1a00);let _0x1bc876=[orderBy('timestamp','desc')];if(_0x5271cb){const _0x11e524=new Date(_0x5271cb);_0x11e524['setHours'](0x0,0x0,0x0,0x0),_0x1bc876['push'](where('timestamp','>=',_0x11e524));}if(_0x320440){const _0x147e1c=new Date(_0x320440);_0x147e1c['setHours'](0x17,0x3b,0x3b,0x3e7),_0x1bc876['push'](where('timestamp','<=',_0x147e1c));}_0x662a23&&_0x662a23!=='all'&&_0x1bc876['push'](where('type','==',_0x662a23));_0x1bc876['push'](limit(PAGE_SIZE));const _0x4ba418=query(_0xf8d8b0,..._0x1bc876),_0x5c8c03=await getDocs(_0x4ba418);!_0x5c8c03['empty']&&(eloHistoryPagination[_0x42db23]['firstVisible']=_0x5c8c03['docs'][0x0],eloHistoryPagination[_0x42db23]['lastVisible']=_0x5c8c03['docs'][_0x5c8c03['docs']['length']-0x1]);_0x1e68da['innerHTML']='';if(_0x5c8c03['empty']){_0x1e68da[_0x289201(0x20a)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x5c8c03['forEach'](_0x1d6ec9=>{const _0x253fc6=_0x289201,_0x98db13=_0x1d6ec9['data'](),_0x19d3c7=document['createElement']('tr'),_0x44325e=_0x98db13['timestamp']?new Date(_0x98db13[_0x253fc6(0x27a)][_0x253fc6(0x239)]*0x3e8)[_0x253fc6(0x126)]():'N/A',_0x3a4d48=_0x98db13[_0x253fc6(0x1a8)]-_0x98db13[_0x253fc6(0x111)],_0x1c3004=_0x3a4d48>0x0?'positive-change':_0x3a4d48<0x0?'negative-change':'',_0xe6754b=_0x3a4d48>0x0?'+':'',_0x17623e=_0x98db13[_0x253fc6(0x13d)]||_0x98db13['username']||_0x98db13['userId']||'N/A';_0x19d3c7['innerHTML']=_0x253fc6(0x109)+_0x44325e+_0x253fc6(0x2d0)+_0x17623e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x98db13[_0x253fc6(0x111)]||'N/A')+_0x253fc6(0x2b2)+(_0x98db13['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x1c3004+'\x22>'+_0xe6754b+_0x3a4d48+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x98db13['type'])+_0x253fc6(0xda)+(_0x98db13['modifiedBy']||_0x98db13['promotedBy']||_0x98db13['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1e68da[_0x253fc6(0x182)](_0x19d3c7);}),document[_0x289201(0x16a)](_0x42db23+_0x289201(0x279))['textContent']='Page\x201';}catch(_0x43788){console[_0x289201(0x221)]('Error\x20applying\x20filters:',_0x43788),_0x1e68da['innerHTML']=_0x289201(0x27e)+_0x43788[_0x289201(0x144)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x2a186c=a2_0x279dcd;document['getElementById']('history-start-date')['value']='',document['getElementById']('history-end-date')['value']='',document[_0x2a186c(0x16a)](_0x2a186c(0xd8))[_0x2a186c(0x1fb)]='all',document['getElementById']('elo-history-search')['value']='';const _0x235fe6=currentLadder['toLowerCase']();eloHistoryPagination[_0x235fe6]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x3d5905=a2_0x279dcd,_0x373a26=document['getElementById'](_0x3d5905(0x280)),_0x50de6f=document['getElementById']('promote-modal'),_0x36947b=document['getElementById'](_0x3d5905(0x1e8));_0x373a26&&_0x50de6f&&_0x36947b&&(_0x373a26['addEventListener'](_0x3d5905(0x1b8),()=>{_0x50de6f['classList']['add']('active');}),_0x50de6f['addEventListener']('click',_0x347416=>{_0x347416['target']===_0x50de6f&&_0x50de6f['classList']['remove']('active');}),_0x36947b[_0x3d5905(0x29c)](_0x3d5905(0x1fa),async _0x15cfa7=>{const _0x159184=_0x3d5905;_0x15cfa7[_0x159184(0x166)]();const _0x245445=document['getElementById'](_0x159184(0x202)),_0x1edcb4=document['getElementById']('promote-ladder'),_0x30583d=_0x245445[_0x159184(0x1fb)]['trim'](),_0x29c1ce=_0x1edcb4['value'];if(!_0x30583d){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x30583d,_0x29c1ce),_0x50de6f['classList']['remove']('active'),_0x245445['value']='';}catch(_0x5ae859){showNotification(_0x5ae859[_0x159184(0x144)],_0x159184(0x221));}}),document['getElementById']('cancel-promote-btn')[_0x3d5905(0x29c)](_0x3d5905(0x1b8),()=>{const _0x5f0f4f=_0x3d5905;_0x50de6f['classList'][_0x5f0f4f(0x1ad)]('active');}));const _0xcf409c=document['getElementById']('demote-player-btn'),_0x32b891=document['getElementById'](_0x3d5905(0x176)),_0x353d20=document['getElementById']('demote-form');_0xcf409c&&_0x32b891&&_0x353d20&&(_0xcf409c[_0x3d5905(0x29c)]('click',()=>{const _0x6ae4fb=_0x3d5905;_0x32b891[_0x6ae4fb(0x22c)][_0x6ae4fb(0x18e)]('active');}),_0x32b891['addEventListener']('click',_0x482286=>{const _0x548ac4=_0x3d5905;_0x482286[_0x548ac4(0x137)]===_0x32b891&&_0x32b891['classList']['remove'](_0x548ac4(0x8f));}),_0x353d20[_0x3d5905(0x29c)]('submit',async _0x241abf=>{const _0x3c1723=_0x3d5905;_0x241abf['preventDefault']();const _0x16f6bc=document['getElementById'](_0x3c1723(0x177)),_0x30b953=document['getElementById']('demote-ladder'),_0x12e333=_0x16f6bc['value'][_0x3c1723(0x232)](),_0x5aa80b=_0x30b953[_0x3c1723(0x1fb)];if(!_0x12e333){alert(_0x3c1723(0x19a));return;}try{await demotePlayer(_0x12e333,_0x5aa80b),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById'](_0x3c1723(0x177))['value']='';}catch(_0x5a81e6){console[_0x3c1723(0x221)](_0x3c1723(0x2cd),_0x5a81e6);}}));const _0x8ae95=document['getElementById']('set-elo-btn'),_0x3de767=document['getElementById']('set-elo-modal'),_0x4d3605=document[_0x3d5905(0x16a)]('set-elo-form');_0x8ae95&&_0x3de767&&_0x4d3605&&(_0x8ae95['addEventListener']('click',()=>{_0x3de767['classList']['add']('active');}),_0x3de767['addEventListener']('click',_0x46e00a=>{const _0x12d545=_0x3d5905;_0x46e00a['target']===_0x3de767&&_0x3de767[_0x12d545(0x22c)]['remove']('active');}),_0x4d3605['addEventListener']('submit',async _0x4fc573=>{const _0x2a6034=_0x3d5905;_0x4fc573['preventDefault']();const _0x1bf239=document['getElementById'](_0x2a6034(0x2ae)),_0x19fb83=document['getElementById']('set-elo-value');let _0x31cbb0;const _0x15e407=document[_0x2a6034(0x16a)]('set-elo-ladder'),_0xb22e54=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x15e407)_0x31cbb0=_0x15e407[_0x2a6034(0x1fb)];else _0xb22e54?_0x31cbb0=_0xb22e54['value']:_0x31cbb0='D1';if(!_0x1bf239||!_0x19fb83){showNotification('Form\x20elements\x20are\x20missing',_0x2a6034(0x221));return;}const _0x4564ca=_0x1bf239[_0x2a6034(0x1fb)]['trim'](),_0x3dae2a=parseInt(_0x19fb83['value']);if(!_0x4564ca||isNaN(_0x3dae2a)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x4564ca,_0x3dae2a,_0x31cbb0),_0x3de767[_0x2a6034(0x22c)]['remove']('active'),_0x1bf239['value']='',_0x19fb83['value']='';}catch(_0x3e6338){showNotification(_0x3e6338['message'],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{const _0x476947=_0x3d5905;_0x3de767[_0x476947(0x22c)]['remove']('active');}));const _0x3b480a=document[_0x3d5905(0x16a)](_0x3d5905(0x2a0)),_0x1d46db=document[_0x3d5905(0x16a)](_0x3d5905(0x28d));if(_0x3b480a&&_0x1d46db){_0x3b480a['addEventListener']('click',_0x4b5ca7=>{_0x4b5ca7['target']===_0x3b480a&&closeModalHandler();}),_0x1d46db['addEventListener']('submit',async _0x566186=>{const _0x5c16ca=_0x3d5905;_0x566186['preventDefault']();const _0x1850d4=document['getElementById']('role-username'),_0x4145a3=document['getElementById']('role-name'),_0x571e30=document['getElementById']('role-color'),_0x17c8f0=_0x1850d4['value'][_0x5c16ca(0x232)](),_0x4f1d54=_0x4145a3['value'][_0x5c16ca(0x232)](),_0x5babc2=_0x571e30['value'];if(!_0x17c8f0){showNotification(_0x5c16ca(0x28b),'error');return;}try{await setUserRole(_0x17c8f0,_0x4f1d54,_0x5babc2),closeModalHandler(),loadUsersWithRoles();}catch(_0x574bbb){}});const _0x13e552=document[_0x3d5905(0x16a)](_0x3d5905(0x134));_0x13e552&&(_0x13e552['removeEventListener'](_0x3d5905(0x1b8),closeModalHandler),_0x13e552[_0x3d5905(0x29c)]('click',closeModalHandler));}}async function promotePlayer(_0x41b62c,_0x1d44cb){const _0x2b12f7=a2_0x279dcd;try{console[_0x2b12f7(0x175)](_0x2b12f7(0x1e7)+_0x41b62c+_0x2b12f7(0xfc)+_0x1d44cb+'\x20ladder');const _0xe43b0f=auth[_0x2b12f7(0xe0)];if(!_0xe43b0f)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x32fb0b=_0x1d44cb==='D2'?'playersD2':'players',_0x418e3a=_0x1d44cb==='D2'?_0x2b12f7(0x16e):'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x32fb0b);const _0xe943bc=collection(db,_0x32fb0b),_0x206e99=query(_0xe943bc,where('username','==',_0x41b62c)),_0x5e401e=await getDocs(_0x206e99);if(_0x5e401e['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x1d44cb+'\x20ladder');throw new Error(_0x2b12f7(0x244)+_0x1d44cb+'\x20ladder');}const _0x37ee2c=_0x5e401e['docs'][0x0],_0x4026da=_0x37ee2c['data'](),_0x833eb5=_0x4026da['eloRating']||0x4b0,_0x23185f=_0x37ee2c['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x833eb5);const _0x462130=[{'name':_0x2b12f7(0x16c),'elo':0x578},{'name':'Silver','elo':0x640},{'name':_0x2b12f7(0x1c2),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x138c53=_0x462130[_0x2b12f7(0x142)](_0x33a065=>_0x33a065['elo']>_0x833eb5);if(!_0x138c53){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x1d44cb+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x1d44cb+'\x20ladder');}console['log'](_0x2b12f7(0x1be)+_0x138c53['name']+'\x20('+_0x138c53['elo']+')'),await updateDoc(doc(db,_0x32fb0b,_0x37ee2c['id']),{'eloRating':_0x138c53['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0xe43b0f[_0x2b12f7(0x1b5)]||_0x2b12f7(0x2a5)}),await addDoc(collection(db,_0x418e3a),{'player':_0x41b62c,'previousElo':_0x833eb5,'newElo':_0x138c53['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x138c53['name'],'promotedBy':_0xe43b0f['email']||'admin','gameMode':_0x1d44cb});try{const {promotionManager:_0x49589d}=await import(_0x2b12f7(0x1f6)),_0x2b39d1=_0x49589d['getRankName'](_0x833eb5),_0x6dd69d=_0x138c53[_0x2b12f7(0x18c)];await _0x49589d['sendPromotionNotification'](_0x23185f,_0x41b62c,_0x833eb5,_0x138c53['elo'],_0x2b39d1,_0x6dd69d,_0x2b12f7(0x157),{'displayName':_0x41b62c,'source':_0x2b12f7(0x2a5),'adminUser':_0xe43b0f['email'],'ladder':_0x1d44cb}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x379fab){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x379fab);}return alert('Successfully\x20promoted\x20'+_0x41b62c+'\x20to\x20'+_0x138c53['name']+'\x20('+_0x138c53[_0x2b12f7(0xf9)]+')'),currentLadder===_0x1d44cb&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0xf2c449){console[_0x2b12f7(0x221)]('Error\x20promoting\x20player:',_0xf2c449),alert('Error\x20promoting\x20player:\x20'+_0xf2c449['message']);throw _0xf2c449;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x440b29=a2_0x279dcd,_0x1e37aa=document['getElementById']('promote-form');_0x1e37aa&&_0x1e37aa['addEventListener'](_0x440b29(0x1fa),async _0x3d875a=>{const _0x21e9b1=_0x440b29;_0x3d875a['preventDefault']();const _0x52cb7b=document['getElementById'](_0x21e9b1(0x202))['value']['trim'](),_0x5ce8a7=document['querySelector'](_0x21e9b1(0x91))['value'];if(!_0x52cb7b){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x52cb7b,_0x5ce8a7),document['getElementById']('promote-modal')['classList']['remove']('active'),document['getElementById']('promote-username')['value']='';}catch(_0x98505a){console['error']('Error\x20in\x20promotion:',_0x98505a);}});});async function demotePlayer(_0x29c3e7,_0x16ed1e){const _0x44d427=a2_0x279dcd;try{console['log'](_0x44d427(0xc1)+_0x29c3e7+_0x44d427(0xfc)+_0x16ed1e+'\x20ladder');const _0x568339=auth[_0x44d427(0xe0)];if(!_0x568339)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x2684bd=_0x16ed1e==='D2'?'playersD2':_0x44d427(0x97),_0x3d2748=_0x16ed1e==='D2'?'eloHistoryD2':_0x44d427(0x192);console['log'](_0x44d427(0x86)+_0x2684bd);const _0x4ac2e7=collection(db,_0x2684bd),_0x331a4d=query(_0x4ac2e7,where('username','==',_0x29c3e7)),_0x2c12dc=await getDocs(_0x331a4d);if(_0x2c12dc['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x16ed1e+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x16ed1e+'\x20ladder');}const _0x43c419=_0x2c12dc['docs'][0x0],_0x4b3835=_0x43c419[_0x44d427(0x270)](),_0x13b35c=_0x4b3835['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x13b35c);const _0x591493=[{'name':'Gold','elo':0x708},{'name':_0x44d427(0x2da),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':_0x44d427(0x16d),'elo':0x4b0}];let _0xe99370=_0x591493[_0x44d427(0x142)](_0x2e2aa4=>_0x2e2aa4['elo']<_0x13b35c);if(!_0xe99370){alert(_0x44d427(0x10a)+_0x16ed1e+_0x44d427(0x230));throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x16ed1e+_0x44d427(0x230));}console[_0x44d427(0x175)]('Demoting\x20player\x20to\x20'+_0xe99370['name']+'\x20('+_0xe99370[_0x44d427(0xf9)]+')'),await updateDoc(doc(db,_0x2684bd,_0x43c419['id']),{'eloRating':_0xe99370['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x568339['email']||'admin'}),await addDoc(collection(db,_0x3d2748),{'player':_0x29c3e7,'previousElo':_0x13b35c,'newElo':_0xe99370['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0xe99370[_0x44d427(0x18c)],'demotedBy':_0x568339['email']||'admin','gameMode':_0x16ed1e});try{const {promotionManager:_0x394e4c}=await import('./promotions.js'),_0x5b8977=_0x394e4c['getRankName'](_0x13b35c),_0x4670bd=_0xe99370['name'];await _0x394e4c['sendPromotionNotification'](_0x43c419['id'],_0x29c3e7,_0x13b35c,_0xe99370[_0x44d427(0xf9)],_0x5b8977,_0x4670bd,_0x44d427(0x2c3),{'displayName':_0x29c3e7,'source':'admin','adminUser':_0x568339['email'],'ladder':_0x16ed1e}),console['log'](_0x44d427(0x17d));}catch(_0xf0a34b){console[_0x44d427(0x221)]('Failed\x20to\x20send\x20Discord\x20notification:',_0xf0a34b);}return alert(_0x44d427(0x88)+_0x29c3e7+'\x20to\x20'+_0xe99370['name']+'\x20('+_0xe99370['elo']+')'),currentLadder===_0x16ed1e&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x2f5eba){console[_0x44d427(0x221)]('Error\x20demoting\x20player:',_0x2f5eba),alert(_0x44d427(0x1d3)+_0x2f5eba['message']);throw _0x2f5eba;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x2e7a17=a2_0x279dcd,_0x3cfa11=document[_0x2e7a17(0x16a)]('demote-form');_0x3cfa11&&_0x3cfa11['addEventListener']('submit',async _0x20fb1b=>{const _0x21db77=_0x2e7a17;_0x20fb1b['preventDefault']();const _0x1dffb5=document['getElementById']('demote-username')['value']['trim'](),_0x237c88=document['querySelector'](_0x21db77(0x212))['value'];if(!_0x1dffb5){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x1dffb5,_0x237c88),document[_0x21db77(0x16a)](_0x21db77(0x176))['classList']['remove'](_0x21db77(0x8f)),document['getElementById']('demote-username')['value']='';}catch(_0x591fef){console[_0x21db77(0x221)]('Error\x20in\x20demotion:',_0x591fef);}});});async function setCustomElo(_0x7c9148,_0x2b8672,_0x3e6d67){const _0x4ff066=a2_0x279dcd;try{const _0x9ddff1=auth['currentUser'];if(!_0x9ddff1||!isAdmin(_0x9ddff1['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x4c47a4=_0x3e6d67==='D2'?'playersD2':'players',_0x2845e6=_0x3e6d67==='D2'?_0x4ff066(0x16e):'eloHistory',_0x199996=collection(db,_0x4c47a4),_0x535a48=query(_0x199996,where(_0x4ff066(0x278),'==',_0x7c9148)),_0x3c51af=await getDocs(_0x535a48);if(_0x3c51af[_0x4ff066(0x260)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x3e6d67+'\x20ladder');const _0x568a36=_0x3c51af[_0x4ff066(0x28c)][0x0],_0x224819=_0x568a36['data'](),_0x2b94db=_0x224819['eloRating']||0x4b0,_0x1c3b76=writeBatch(db);_0x1c3b76[_0x4ff066(0xb8)](doc(db,_0x4c47a4,_0x568a36['id']),{'eloRating':_0x2b8672,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x9ddff1['email']});const _0x26bfd2=doc(collection(db,_0x2845e6));return _0x1c3b76['set'](_0x26bfd2,{'player':_0x7c9148,'previousElo':_0x2b94db,'newElo':_0x2b8672,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x9ddff1['email'],'gameMode':_0x3e6d67}),await _0x1c3b76['commit'](),showNotification(_0x4ff066(0x2b4)+_0x7c9148+_0x4ff066(0x25c)+_0x2b94db+'\x20to\x20'+_0x2b8672,_0x4ff066(0x1f7)),currentLadder===_0x3e6d67&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x23d3fa){console['error']('Error\x20setting\x20custom\x20ELO:',_0x23d3fa);throw _0x23d3fa;}}async function setUserRole(_0xa8943f,_0x592415,_0x141717){const _0x429b1e=a2_0x279dcd;try{const _0x2989b1=auth[_0x429b1e(0xe0)];if(!_0x2989b1||!isAdmin(_0x2989b1[_0x429b1e(0x1b5)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x5f2214=_0x592415?_0x592415['trim']():null,_0x2afb44=_0x5f2214?_0x141717||'#808080':null,[_0x13783e,_0x28e72e]=await Promise[_0x429b1e(0x191)]([getDocs(query(collection(db,_0x429b1e(0x97)),where('username','==',_0xa8943f))),getDocs(query(collection(db,'playersD2'),where('username','==',_0xa8943f)))]),_0xfb57ab=[];if(!_0x13783e['empty'])_0xfb57ab[_0x429b1e(0x8b)]({'ref':_0x13783e['docs'][0x0]['ref'],'source':'D1'});if(!_0x28e72e[_0x429b1e(0x260)])_0xfb57ab['push']({'ref':_0x28e72e['docs'][0x0]['ref'],'source':'D2'});if(_0xfb57ab['length']===0x0){const [_0x17e2ae,_0x31cd22]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where(_0x429b1e(0x278),'==',_0xa8943f))),getDocs(query(collection(db,_0x429b1e(0x188)),where(_0x429b1e(0x278),'==',_0xa8943f)))]);if(!_0x17e2ae['empty'])_0xfb57ab[_0x429b1e(0x8b)]({'ref':_0x17e2ae[_0x429b1e(0x28c)][0x0]['ref'],'source':'NonParticipant'});if(!_0x31cd22['empty'])_0xfb57ab['push']({'ref':_0x31cd22['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0xfb57ab[_0x429b1e(0xc6)]===0x0)throw new Error('User\x20\x22'+_0xa8943f+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x15c6bb=writeBatch(db);_0xfb57ab['forEach'](_0x160eed=>{const _0x34d39f=_0x429b1e;console['log'](_0x34d39f(0x115)+_0xa8943f+_0x34d39f(0xfc)+_0x160eed['source']),!_0x5f2214?_0x15c6bb['update'](_0x160eed['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x15c6bb[_0x34d39f(0xb8)](_0x160eed[_0x34d39f(0xdd)],{'roleName':_0x5f2214,'roleColor':_0x2afb44,'roleAssignedBy':_0x2989b1[_0x34d39f(0x1b5)],'roleAssignedAt':serverTimestamp()});}),await _0x15c6bb[_0x429b1e(0x12b)]();const _0x4e4c2c=_0x5f2214?_0x429b1e(0x266)+_0x5f2214+_0x429b1e(0xb3):'Role\x20removed';return showNotification(_0x4e4c2c+'\x20for\x20user\x20\x22'+_0xa8943f+'\x22','success'),!![];}catch(_0x4c9598){console['error']('Error\x20setting\x20user\x20role:',_0x4c9598),showNotification('Error:\x20'+_0x4c9598['message'],'error');throw _0x4c9598;}}function showNotification(_0x40e2b2,_0x3fb0ae=a2_0x279dcd(0x165)){const _0x6c2ad9=a2_0x279dcd,_0x4ff9d9=document[_0x6c2ad9(0xce)]('div');_0x4ff9d9['className']='notification\x20'+_0x3fb0ae,_0x4ff9d9['innerHTML']=_0x6c2ad9(0x185)+getNotificationIcon(_0x3fb0ae)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x40e2b2+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x4ff9d9),setTimeout(()=>{const _0x3e375f=_0x6c2ad9;_0x4ff9d9[_0x3e375f(0x22c)]['add']('active');},0xa);const _0x288fc2=setTimeout(()=>{closeNotification(_0x4ff9d9);},0x1388);_0x4ff9d9['querySelector']('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x288fc2),closeNotification(_0x4ff9d9);});}function getNotificationIcon(_0x506ddd){const _0x24abc6=a2_0x279dcd;switch(_0x506ddd){case _0x24abc6(0x1f7):return _0x24abc6(0x1c9);case'error':return _0x24abc6(0x21e);case'warning':return _0x24abc6(0x1f3);case'info':default:return'fa-info-circle';}}function closeNotification(_0x55200e){const _0xecc5f3=a2_0x279dcd;_0x55200e['classList']['remove'](_0xecc5f3(0x8f)),setTimeout(()=>{_0x55200e['remove']();},0x12c);}function setupUserRolesSection(){const _0x3de0e3=a2_0x279dcd,_0x416c31=document['getElementById']('load-users-data');_0x416c31&&_0x416c31['addEventListener'](_0x3de0e3(0x1b8),function(){const _0x5c3c83=_0x3de0e3;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x545cbe=a2_0x256f;this['classList']['remove'](_0x545cbe(0x28f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x5c3c83(0x9c)](_0x485d2f=>{const _0x2e2e52=_0x5c3c83;console['error']('Error\x20loading\x20users:',_0x485d2f),this['classList']['remove'](_0x2e2e52(0x28f)),this[_0x2e2e52(0x20a)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x11edfd=_0x2e2e52;this['innerHTML']=_0x11edfd(0x163);},0xbb8);});});const _0x478067=document['getElementById']('add-new-role-btn');_0x478067&&_0x478067['addEventListener']('click',()=>{const _0xbb1b0a=_0x3de0e3,_0x577b6f=document['getElementById']('set-role-modal');_0x577b6f&&_0x577b6f[_0xbb1b0a(0x22c)]['add']('active');});const _0x95d604=document['getElementById']('user-search');_0x95d604&&_0x95d604['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x375619=document['getElementById'](_0x3de0e3(0x195));_0x375619&&_0x375619['addEventListener'](_0x3de0e3(0x1df),filterUsersTable);}async function loadUsersWithRoles(){const _0x4353ca=a2_0x279dcd,_0xdea5a7=document['getElementById']('users-table-body');if(!_0xdea5a7)return;_0xdea5a7['innerHTML']=_0x4353ca(0x2a1);try{const [_0x1b8d95,_0x5019f9,_0x3877b2,_0x18077a]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x1b5e9f=new Map();function _0x46ea4e(_0x373d4b,_0x39c13b){const _0x5d0ad0=_0x4353ca;_0x373d4b[_0x5d0ad0(0x257)](_0x1b10d0=>{const _0x2a7e57=_0x5d0ad0,_0x14ee5e=_0x1b10d0['data']();if(!_0x14ee5e[_0x2a7e57(0x278)])return;if(!_0x1b5e9f['has'](_0x14ee5e[_0x2a7e57(0x278)]))_0x1b5e9f['set'](_0x14ee5e['username'],{'username':_0x14ee5e['username'],'roleName':_0x14ee5e[_0x2a7e57(0x274)]||null,'roleColor':_0x14ee5e['roleColor']||null,'roleAssignedBy':_0x14ee5e['roleAssignedBy']||null,'roleAssignedAt':_0x14ee5e[_0x2a7e57(0x218)]||null,'sources':[_0x39c13b]});else{const _0x3cbf6e=_0x1b5e9f['get'](_0x14ee5e['username']);_0x14ee5e[_0x2a7e57(0x274)]&&(!_0x3cbf6e['roleName']||_0x39c13b==='D1'||_0x39c13b==='D2')&&(_0x3cbf6e['roleName']=_0x14ee5e['roleName'],_0x3cbf6e[_0x2a7e57(0x12c)]=_0x14ee5e['roleColor'],_0x3cbf6e['roleAssignedBy']=_0x14ee5e[_0x2a7e57(0x82)],_0x3cbf6e[_0x2a7e57(0x218)]=_0x14ee5e['roleAssignedAt']),!_0x3cbf6e['sources']['includes'](_0x39c13b)&&_0x3cbf6e['sources']['push'](_0x39c13b);}});}_0x46ea4e(_0x1b8d95,'D1'),_0x46ea4e(_0x5019f9,'D2'),_0x46ea4e(_0x3877b2,'Non-Participant'),_0x46ea4e(_0x18077a,_0x4353ca(0x262));const _0x4b45df=Array['from'](_0x1b5e9f[_0x4353ca(0x267)]())[_0x4353ca(0xf2)]((_0x718ef3,_0x29b36c)=>_0x718ef3['username']['localeCompare'](_0x29b36c['username']));if(_0x4b45df['length']===0x0){_0xdea5a7[_0x4353ca(0x20a)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0xdea5a7['innerHTML']='',_0x4b45df['forEach'](_0x5ed40b=>{const _0x1d2461=_0x4353ca,_0x32afbc=document['createElement']('tr');_0x32afbc['dataset']['username']=_0x5ed40b['username'],_0x32afbc['dataset']['roleName']=_0x5ed40b['roleName']||'',_0x32afbc['dataset']['roleColor']=_0x5ed40b['roleColor']||'#808080';const _0x1b2bab=_0x5ed40b['roleAssignedAt']?new Date(_0x5ed40b['roleAssignedAt'][_0x1d2461(0x239)]*0x3e8)['toLocaleDateString']():'N/A',_0x4e2587=_0x5ed40b[_0x1d2461(0x274)]?_0x1d2461(0x2b0)+_0x5ed40b['roleColor']+';\x20color:\x20'+getContrastColor(_0x5ed40b['roleColor'])+_0x1d2461(0xa0)+_0x5ed40b['roleName']+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x32afbc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5ed40b['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x5ed40b['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4e2587+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5ed40b['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b2bab+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x5ed40b['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5ed40b[_0x1d2461(0x274)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x5ed40b['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x1d2461(0x11c),_0xdea5a7['appendChild'](_0x32afbc);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x4ed8ed=>{const _0x1c832f=_0x4353ca;_0x4ed8ed[_0x1c832f(0x29c)]('click',()=>{const _0x525cd6=_0x1c832f,_0x2b4138=_0x4ed8ed['dataset'][_0x525cd6(0x278)];openRoleEditModal(_0x2b4138);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x2e9900=>{_0x2e9900['addEventListener']('click',()=>{const _0x5154f9=a2_0x256f,_0x2f899b=_0x2e9900['dataset']['username'];confirm(_0x5154f9(0x238)+_0x2f899b+'?')&&setUserRole(_0x2f899b,null,null)[_0x5154f9(0x2d9)](()=>loadUsersWithRoles())['catch'](_0x4231f5=>console['error']('Error\x20removing\x20role:',_0x4231f5));});});}catch(_0x59fcd0){console[_0x4353ca(0x221)](_0x4353ca(0x1a1),_0x59fcd0),_0xdea5a7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x1f9646){const _0x441937=a2_0x279dcd;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x1f9646);const _0x289463=document['getElementById'](_0x441937(0x2a0)),_0x3d9dd3=document['getElementById']('role-username'),_0xaf1323=document[_0x441937(0x16a)](_0x441937(0x222));if(!_0x289463){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x289463);_0x3d9dd3?(_0x3d9dd3['value']=_0x1f9646,console['log'](_0x441937(0x1fd)+_0x1f9646)):console[_0x441937(0x198)]('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0xc212cc=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x1f9646+'\x22]');if(_0xc212cc&&_0xaf1323){const _0x39ce79=_0xc212cc['dataset'][_0x441937(0x210)];_0xaf1323['value']=_0x39ce79==='none'?'':_0x39ce79,console['log'](_0x441937(0xc8)+_0xaf1323['value']+_0x441937(0x23f)+_0x39ce79+')');}else{if(!_0xc212cc)console['warn']('Table\x20row\x20for\x20user\x20'+_0x1f9646+'\x20not\x20found.');if(!_0xaf1323)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0xaf1323)_0xaf1323[_0x441937(0x1fb)]='';}console[_0x441937(0x175)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x289463['classList'][_0x441937(0x18e)](_0x441937(0x8f));const _0x57f0f1=document[_0x441937(0x16a)]('cancel-role-btn');_0x57f0f1?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x57f0f1[_0x441937(0x1e5)]('click',closeModalHandler),_0x57f0f1['addEventListener'](_0x441937(0x1b8),closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x289463['removeEventListener']('click',closeModalBackgroundHandler),_0x289463[_0x441937(0x29c)]('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0xebcce2){_0xebcce2['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x276054=a2_0x279dcd,_0x414c73=document['getElementById'](_0x276054(0x2a0));_0x414c73&&(_0x414c73[_0x276054(0x22c)]['remove'](_0x276054(0x8f)),_0x414c73[_0x276054(0x1e5)](_0x276054(0x1b8),closeModalBackgroundHandler));}function filterUsersTable(){const _0x4f1a38=a2_0x279dcd,_0x55fc6a=document['getElementById']('user-search')?.[_0x4f1a38(0x1fb)]['toLowerCase']()||'',_0x1ed985=document[_0x4f1a38(0x16a)]('role-filter')?.['value']||'all',_0x92edad=document['querySelectorAll'](_0x4f1a38(0x233));let _0x5520f6=0x0;_0x92edad[_0x4f1a38(0x257)](_0x258041=>{const _0x283618=_0x4f1a38;if(_0x258041[_0x283618(0x23e)]('.loading-cell')||_0x258041[_0x283618(0x23e)](_0x283618(0x234))||_0x258041['querySelector']('.error-state'))return;const _0x1a6748=_0x258041[_0x283618(0xde)]['username']?.['toLowerCase']()||'',_0x1cc9a5=_0x258041['dataset'][_0x283618(0x210)]||_0x283618(0x18a),_0x25065e=_0x1a6748['includes'](_0x55fc6a),_0x10334a=_0x1ed985===_0x283618(0x191)||_0x1cc9a5===_0x1ed985;_0x25065e&&_0x10334a?(_0x258041['style']['display']='',_0x5520f6++):_0x258041['style']['display']='none';});if(_0x5520f6===0x0&&_0x92edad['length']>0x0){const _0x429dd7=document['getElementById'](_0x4f1a38(0x1b3));if(_0x429dd7){if(!_0x429dd7['querySelector']('.no-results')){const _0x263b89=document['createElement']('tr');_0x263b89['classList']['add']('no-results'),_0x263b89[_0x4f1a38(0x20a)]=_0x4f1a38(0x2ad),_0x429dd7['appendChild'](_0x263b89);}}}else{const _0xbcfba7=document[_0x4f1a38(0x23e)]('.no-results');_0xbcfba7&&_0xbcfba7['remove']();}}function setupManageArticlesSection(){const _0x375a20=a2_0x279dcd,_0x47bbd9=document['getElementById']('load-articles-data');_0x47bbd9&&_0x47bbd9['addEventListener'](_0x375a20(0x1b8),function(){const _0x148dc7=_0x375a20;this[_0x148dc7(0x22c)]['add']('loading'),this[_0x148dc7(0x20a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x4ba39b=_0x148dc7;this['classList'][_0x4ba39b(0x1ad)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})[_0x148dc7(0x9c)](_0x14f125=>{console['error']('Error\x20loading\x20articles:',_0x14f125),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3042be=a2_0x256f;this[_0x3042be(0x20a)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x512007=document['getElementById']('create-new-article-btn');_0x512007?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x512007[_0x375a20(0x20b)][_0x375a20(0x24d)]='block',_0x512007['addEventListener']('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x46452c=document['getElementById'](_0x375a20(0x217));_0x46452c&&_0x46452c['addEventListener']('submit',_0x319ba2=>{_0x319ba2['preventDefault'](),saveArticle();});const _0x5c4c64=document['getElementById']('cancel-article-btn');_0x5c4c64&&_0x5c4c64[_0x375a20(0x29c)]('click',()=>{closeArticleModal();});const _0x4b5b5a=document['querySelector'](_0x375a20(0x26c));_0x4b5b5a&&_0x4b5b5a['addEventListener']('click',()=>{closeArticleModal();});const _0x11024e=document['getElementById'](_0x375a20(0x25e));_0x11024e&&_0x11024e[_0x375a20(0x29c)](_0x375a20(0x1b8),_0x48be42=>{_0x48be42['target']===_0x11024e&&closeArticleModal();});}async function loadArticles(){const _0x3d7ace=a2_0x279dcd,_0x37785c=document['getElementById']('articles-table-body');if(!_0x37785c)return;_0x37785c['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x344093=collection(db,'articles'),_0x8f04bf=query(_0x344093,orderBy('createdAt','desc')),_0x1b56b6=await getDocs(_0x8f04bf);if(_0x1b56b6['empty']){_0x37785c[_0x3d7ace(0x20a)]='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x37785c[_0x3d7ace(0x20a)]='',_0x1b56b6['forEach'](_0x6d9a6=>{const _0xf8e9a9=_0x3d7ace,_0x5c7617=_0x6d9a6[_0xf8e9a9(0x270)](),_0x34961f=document['createElement']('tr'),_0x16f8ce=_0x5c7617['createdAt']?new Date(_0x5c7617[_0xf8e9a9(0x12e)]['seconds']*0x3e8)['toLocaleString']():'N/A';_0x34961f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5c7617['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5c7617['author']||'Unknown')+_0xf8e9a9(0x19e)+_0x16f8ce+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x6d9a6['id']+_0xf8e9a9(0x16f)+_0x6d9a6['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x37785c['appendChild'](_0x34961f);}),setupArticleActionButtons();}catch(_0x39045d){console[_0x3d7ace(0x221)]('Error\x20loading\x20articles:',_0x39045d),_0x37785c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x39045d['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){document['querySelectorAll']('.edit-article-btn')['forEach'](_0x4c87c0=>{const _0x4476b2=a2_0x256f;_0x4c87c0['addEventListener'](_0x4476b2(0x1b8),async _0x40e1a2=>{const _0x4b1b11=_0x4476b2,_0x470ad2=_0x40e1a2[_0x4b1b11(0x288)]['dataset']['id'];openArticleModal(_0x470ad2);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x396a2a=>{const _0x3f5078=a2_0x256f;_0x396a2a['addEventListener'](_0x3f5078(0x1b8),async _0x5c0b20=>{const _0xd455e1=_0x3f5078,_0x283cbd=_0x5c0b20['currentTarget'][_0xd455e1(0xde)]['id'];confirmDeleteArticle(_0x283cbd);});});}function openArticleModal(_0x41f271=null){const _0x188760=a2_0x279dcd,_0x185cd1=document['getElementById'](_0x188760(0x25e)),_0x86026a=document[_0x188760(0x16a)]('article-modal-title'),_0x231deb=document['getElementById']('article-form'),_0x2e692e=document['getElementById']('article-id');_0x231deb['reset'](),_0x2e692e['value']='';if(_0x41f271)_0x86026a[_0x188760(0x290)]='Edit\x20Article',_0x2e692e[_0x188760(0x1fb)]=_0x41f271,loadArticleData(_0x41f271);else{_0x86026a[_0x188760(0x290)]='Create\x20Article';const _0x4eb391=auth[_0x188760(0xe0)];if(_0x4eb391){const _0x42f566=document[_0x188760(0x16a)]('article-author');if(_0x42f566&&_0x4eb391['displayName'])_0x42f566[_0x188760(0x1fb)]=_0x4eb391['displayName'];else _0x42f566&&(_0x42f566[_0x188760(0x1fb)]=_0x4eb391['email']);}}_0x185cd1[_0x188760(0x22c)]['add']('active');}async function loadArticleData(_0xc0bd99){const _0x9293d5=a2_0x279dcd;try{const _0x4f3c24=doc(db,'articles',_0xc0bd99),_0xf40194=await getDoc(_0x4f3c24);if(!_0xf40194['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x4c7664=_0xf40194['data']();document['getElementById']('article-title')['value']=_0x4c7664[_0x9293d5(0x1a9)]||'',document['getElementById'](_0x9293d5(0x1de))[_0x9293d5(0x1fb)]=_0x4c7664['author']||'',document[_0x9293d5(0x16a)]('article-image-url')['value']=_0x4c7664['imageUrl']||'',document['getElementById']('article-content')[_0x9293d5(0x1fb)]=_0x4c7664[_0x9293d5(0x124)]||'';}catch(_0x105821){console[_0x9293d5(0x221)]('Error\x20loading\x20article\x20data:',_0x105821),showNotification(_0x9293d5(0xb2),_0x9293d5(0x221));}}async function saveArticle(){const _0x1fa824=a2_0x279dcd;try{const _0x6a9532=document['getElementById']('article-id')['value'],_0x514663=document['getElementById']('article-title')['value']['trim'](),_0x5845db=document[_0x1fa824(0x16a)]('article-author')['value']['trim'](),_0x34e911=document['getElementById']('article-image-url')['value']['trim'](),_0x1c56e7=document['getElementById']('article-content')['value'][_0x1fa824(0x232)]();if(!_0x514663||!_0x1c56e7){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x4343a2=auth['currentUser'];if(!_0x4343a2){showNotification(_0x1fa824(0x17a),'error');return;}const _0x70e07f={'title':_0x514663,'author':_0x5845db,'imageUrl':_0x34e911||null,'content':_0x1c56e7,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x4343a2['email']};!_0x6a9532?(_0x70e07f['createdAt']=serverTimestamp(),_0x70e07f['createdBy']=_0x4343a2['email'],await addDoc(collection(db,'articles'),_0x70e07f),showNotification(_0x1fa824(0x206),'success')):(await updateDoc(doc(db,_0x1fa824(0xec),_0x6a9532),_0x70e07f),showNotification(_0x1fa824(0x249),'success')),closeArticleModal(),loadArticles();}catch(_0x2307eb){console[_0x1fa824(0x221)](_0x1fa824(0x2bc),_0x2307eb),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x2307eb[_0x1fa824(0x144)],'error');}}function closeArticleModal(){const _0x35d282=a2_0x279dcd,_0x549207=document['getElementById']('article-modal');_0x549207&&_0x549207[_0x35d282(0x22c)]['remove']('active');}async function confirmDeleteArticle(_0x436d45){const _0x27286e=a2_0x279dcd;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x436d45)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0xb0f610){console[_0x27286e(0x221)]('Error\x20deleting\x20article:',_0xb0f610),showNotification(_0x27286e(0xac)+_0xb0f610[_0x27286e(0x144)],'error');}}function setupTrophyManagementSection(){const _0x19c4e8=a2_0x279dcd,_0x2e7cdc=document[_0x19c4e8(0x16a)]('load-trophies-data');_0x2e7cdc&&_0x2e7cdc['addEventListener'](_0x19c4e8(0x1b8),function(){const _0x2fc048=_0x19c4e8;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x31cfcb=document[_0x2fc048(0x16a)]('assign-trophy-image');_0x31cfcb&&(_0x31cfcb['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x443c8a=>{const _0x3cc980=_0x2fc048;console['error']('Error\x20loading\x20trophies:',_0x443c8a),this['classList'][_0x3cc980(0x1ad)]('loading'),this[_0x3cc980(0x20a)]=_0x3cc980(0x1e0),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x1aab76=document['getElementById'](_0x19c4e8(0x1a3));_0x1aab76&&_0x1aab76['addEventListener'](_0x19c4e8(0x1b8),()=>{openTrophyModal();});const _0x3cd88a=document['getElementById'](_0x19c4e8(0x18d));_0x3cd88a&&_0x3cd88a['addEventListener']('submit',_0x92f9a5=>{const _0x18c277=_0x19c4e8;_0x92f9a5[_0x18c277(0x166)](),saveTrophyDefinition();});const _0x436279=document['getElementById']('cancel-trophy-btn');_0x436279&&_0x436279['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')[_0x19c4e8(0x257)](_0x85f03e=>{const _0x4ccfed=_0x19c4e8;_0x85f03e['addEventListener'](_0x4ccfed(0x1b8),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x36d283=document['getElementById']('trophy-modal');_0x36d283&&_0x36d283['addEventListener']('click',_0x2c0aae=>{_0x2c0aae['target']===_0x36d283&&closeTrophyModal();});const _0x502037=document['getElementById']('assign-trophy-modal');_0x502037&&_0x502037['addEventListener']('click',_0x3c965f=>{_0x3c965f['target']===_0x502037&&closeAssignTrophyModal();});const _0x35191a=document['getElementById'](_0x19c4e8(0x1b7));_0x35191a&&_0x35191a[_0x19c4e8(0x29c)]('submit',_0x4248fc=>{const _0x27484c=_0x19c4e8;_0x4248fc[_0x27484c(0x166)](),assignTrophyToPlayer();});const _0x404420=document['getElementById'](_0x19c4e8(0x179));_0x404420&&_0x404420[_0x19c4e8(0x29c)](_0x19c4e8(0x1b8),()=>{closeAssignTrophyModal();});const _0x4523fc=document[_0x19c4e8(0x16a)]('trophy-image-url');_0x4523fc&&(_0x4523fc['addEventListener']('input',updateTrophyImagePreview),_0x4523fc['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x4e32e5=a2_0x279dcd,_0x464593=document['getElementById'](_0x4e32e5(0x283))[_0x4e32e5(0x1fb)]['trim'](),_0x143e1f=document['getElementById']('trophy-image-preview');if(!_0x143e1f){const _0x3b3af3=document['getElementById'](_0x4e32e5(0x283))['closest']('.form-group'),_0x322a80=document['createElement']('div');_0x322a80['id']='trophy-image-preview',_0x322a80[_0x4e32e5(0xfa)]='trophy-preview-container',_0x3b3af3['appendChild'](_0x322a80);const _0x227c9b=document[_0x4e32e5(0xce)]('img');_0x227c9b['id']='trophy-preview-img',_0x227c9b[_0x4e32e5(0x259)]=_0x4e32e5(0x146),_0x227c9b[_0x4e32e5(0x21b)]=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x322a80['appendChild'](_0x227c9b);}const _0x45a857=document[_0x4e32e5(0x16a)]('trophy-preview-img');_0x464593?(_0x45a857['src']=_0x464593,_0x45a857[_0x4e32e5(0x20b)]['display']='block',_0x45a857['classList']['remove']('error')):(_0x45a857['src']=DEFAULT_TROPHY_IMAGE,_0x45a857[_0x4e32e5(0x20b)]['display']=_0x4e32e5(0x21c));}async function loadTrophyDefinitions(){const _0x4692fe=a2_0x279dcd,_0x4ca645=document['getElementById']('trophies-table-body');if(!_0x4ca645)return;_0x4ca645['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x448d94=collection(db,_0x4692fe(0x265)),_0x5e0884=query(_0x448d94,orderBy(_0x4692fe(0x12e),_0x4692fe(0x2b3))),_0xb8e955=await getDocs(_0x5e0884);if(_0xb8e955['empty']){_0x4ca645['innerHTML']=_0x4692fe(0x11b);return;}_0x4ca645['innerHTML']='',_0xb8e955['forEach'](_0x49e498=>{const _0x5ad1b9=_0x4692fe,_0xa27e15=_0x49e498['data'](),_0x2545b0=document['createElement']('tr'),_0x215f5d=_0xa27e15['createdAt']?new Date(_0xa27e15['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x2545b0[_0x5ad1b9(0x20a)]=_0x5ad1b9(0x1f9)+(_0xa27e15['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0xa27e15['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0xa27e15['name']||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0xa27e15[_0x5ad1b9(0x2dd)]||_0x5ad1b9(0xef))+'\x22>'+(_0xa27e15['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x215f5d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x49e498['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x49e498['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x49e498['id']+_0x5ad1b9(0x118),_0x4ca645['appendChild'](_0x2545b0);}),setupTrophyActionButtons();}catch(_0x3bf94f){console[_0x4692fe(0x221)](_0x4692fe(0x23c),_0x3bf94f),_0x4ca645[_0x4692fe(0x20a)]=_0x4692fe(0x130)+_0x3bf94f[_0x4692fe(0x144)]+_0x4692fe(0x2ca);}}function setupTrophyActionButtons(){const _0x5a2a11=a2_0x279dcd;document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x111544=>{_0x111544['addEventListener']('click',_0x5b3897=>{const _0x3a5337=_0x5b3897['currentTarget']['dataset']['id'];openTrophyModal(_0x3a5337);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x371f64=>{const _0x5595a4=a2_0x256f;_0x371f64['addEventListener'](_0x5595a4(0x1b8),_0x38e177=>{const _0x5f148e=_0x5595a4,_0x405209=_0x38e177['currentTarget'][_0x5f148e(0xde)]['id'];openAssignTrophyModal(_0x405209);});}),document[_0x5a2a11(0x2c4)](_0x5a2a11(0x1d0))['forEach'](_0x4859fc=>{const _0x3e7f37=_0x5a2a11;_0x4859fc[_0x3e7f37(0x29c)](_0x3e7f37(0x1b8),_0x5e0393=>{const _0x19d424=_0x5e0393['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x19d424);});});}function openTrophyModal(_0x4ab76a=null){const _0x155c54=a2_0x279dcd,_0x5ef5fe=document[_0x155c54(0x16a)]('trophy-modal'),_0x1df9eb=document['getElementById']('trophy-modal-title'),_0x4f3669=document['getElementById']('trophy-form'),_0x55b1a6=document['getElementById'](_0x155c54(0x150));_0x4f3669['reset'](),_0x55b1a6['value']='';const _0x1928d6=document[_0x155c54(0x16a)](_0x155c54(0xe8));_0x1928d6&&(_0x1928d6[_0x155c54(0x2ba)]=DEFAULT_TROPHY_IMAGE,_0x1928d6['classList']['remove']('error')),_0x4ab76a?(_0x1df9eb[_0x155c54(0x290)]='Edit\x20Trophy',_0x55b1a6[_0x155c54(0x1fb)]=_0x4ab76a,loadTrophyData(_0x4ab76a)):_0x1df9eb['textContent']='Create\x20New\x20Trophy',_0x5ef5fe['classList']['add'](_0x155c54(0x8f));}async function loadTrophyData(_0x180fc8){const _0x204cb2=a2_0x279dcd;try{const _0x67a88e=doc(db,'trophyDefinitions',_0x180fc8),_0x25cc3e=await getDoc(_0x67a88e);if(!_0x25cc3e[_0x204cb2(0x122)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x141703=_0x25cc3e['data']();document[_0x204cb2(0x16a)](_0x204cb2(0x9a))['value']=_0x141703['name']||'',document['getElementById'](_0x204cb2(0xee))[_0x204cb2(0x1fb)]=_0x141703['description']||'',document['getElementById']('trophy-image-url')[_0x204cb2(0x1fb)]=_0x141703['image']||'',document['getElementById'](_0x204cb2(0x12d))['value']=_0x141703[_0x204cb2(0x2dd)]||'common',updateTrophyImagePreview();}catch(_0x2ae4b5){console['error']('Error\x20loading\x20trophy\x20data:',_0x2ae4b5),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x8409f1=a2_0x279dcd;try{const _0x2f0c33=document['getElementById'](_0x8409f1(0x150))['value'],_0x20d851=document['getElementById'](_0x8409f1(0x9a))['value']['trim'](),_0x546dcd=document[_0x8409f1(0x16a)](_0x8409f1(0xee))['value'][_0x8409f1(0x232)](),_0x1365bc=document[_0x8409f1(0x16a)]('trophy-image-url')['value']['trim'](),_0x196b5c=document['getElementById']('trophy-rarity')['value'];if(!_0x20d851||!_0x546dcd||!_0x1365bc){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x115ead=auth[_0x8409f1(0xe0)];if(!_0x115ead){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x5c87c2={'name':_0x20d851,'description':_0x546dcd,'image':_0x1365bc,'rarity':_0x196b5c,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x115ead['email']};!_0x2f0c33?(_0x5c87c2['createdAt']=serverTimestamp(),_0x5c87c2['createdBy']=_0x115ead['email'],await addDoc(collection(db,'trophyDefinitions'),_0x5c87c2),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x2f0c33),_0x5c87c2),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x7f4e36){console[_0x8409f1(0x221)]('Error\x20saving\x20trophy:',_0x7f4e36),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x7f4e36[_0x8409f1(0x144)],_0x8409f1(0x221));}}function closeTrophyModal(){const _0x409be2=a2_0x279dcd,_0x3f4c2c=document['getElementById']('trophy-modal');_0x3f4c2c&&_0x3f4c2c['classList'][_0x409be2(0x1ad)]('active');}async function confirmDeleteTrophy(_0x521e1b){const _0x32e507=a2_0x279dcd;if(!_0x521e1b){console[_0x32e507(0x221)]('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm(_0x32e507(0x261)))try{const _0x33729d=auth[_0x32e507(0xe0)];if(!_0x33729d){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x521e1b),await deleteDoc(doc(db,_0x32e507(0x265),_0x521e1b)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x4a9b36){console[_0x32e507(0x221)]('Error\x20deleting\x20trophy\x20definition:',_0x4a9b36),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x4a9b36['message'],'error');}}async function openAssignTrophyModal(_0x10b969){const _0x5021e2=a2_0x279dcd;try{const _0x2f659b=doc(db,'trophyDefinitions',_0x10b969),_0x594770=await getDoc(_0x2f659b);if(!_0x594770['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x4ede5b=_0x594770['data']();document[_0x5021e2(0x16a)]('assign-trophy-id')[_0x5021e2(0x1fb)]=_0x10b969,document['getElementById']('assign-trophy-name')[_0x5021e2(0x1fb)]=_0x4ede5b['name'],document['getElementById']('assign-trophy-image')['src']=_0x4ede5b['image']||DEFAULT_TROPHY_IMAGE,document[_0x5021e2(0x16a)]('assign-trophy-title')['textContent']=_0x4ede5b['name']||_0x5021e2(0xd9),document[_0x5021e2(0x16a)](_0x5021e2(0x12a))['textContent']=_0x4ede5b['description']||'No\x20description';const _0x339f90=document['getElementById']('assign-trophy-rarity');_0x339f90['textContent']=_0x4ede5b[_0x5021e2(0x2dd)]||_0x5021e2(0xef),_0x339f90[_0x5021e2(0xfa)]='trophy-rarity\x20'+(_0x4ede5b[_0x5021e2(0x2dd)]||_0x5021e2(0xef));const _0x5dbd1d=document['getElementById']('assign-trophy-modal');_0x5dbd1d[_0x5021e2(0x22c)]['add']('active');}catch(_0x45ca61){console['error'](_0x5021e2(0x2a9),_0x45ca61),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x58b9fc=a2_0x279dcd,_0x5aba22=document['getElementById']('assign-trophy-modal');_0x5aba22&&_0x5aba22['classList'][_0x58b9fc(0x1ad)]('active');}async function assignTrophyToPlayer(){const _0x5a0275=a2_0x279dcd;try{const _0x5c9b66=document['getElementById']('assign-trophy-id')[_0x5a0275(0x1fb)],_0x400a79=document[_0x5a0275(0x16a)]('assign-trophy-name')['value'],_0x4676f5=document['getElementById'](_0x5a0275(0x286))['value']['trim'](),_0x8a087f=document[_0x5a0275(0x23e)]('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x5c9b66||!_0x4676f5){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x5e27ff=auth['currentUser'];if(!_0x5e27ff){showNotification(_0x5a0275(0x2a6),'error');return;}let _0x57fd76=null,_0x329dcc=null,_0x4c481f=null;if(_0x8a087f==='non-participant'){const _0x4c5b73=collection(db,_0x5a0275(0xc3)),_0x724bc8=query(_0x4c5b73,where(_0x5a0275(0x278),'==',_0x4676f5)),_0xdde96f=await getDocs(_0x724bc8);!_0xdde96f[_0x5a0275(0x260)]&&(_0x57fd76=_0xdde96f['docs'][0x0],_0x329dcc=_0x57fd76['id'],_0x4c481f=_0x57fd76['data']());}else{const _0x3980f2=_0x8a087f==='D1'?'players':_0x8a087f==='D2'?_0x5a0275(0x13c):_0x5a0275(0xcd),_0x13a5aa=collection(db,_0x3980f2),_0x290a66=query(_0x13a5aa,where(_0x5a0275(0x278),'==',_0x4676f5)),_0x49ca21=await getDocs(_0x290a66);!_0x49ca21['empty']&&(_0x57fd76=_0x49ca21['docs'][0x0],_0x329dcc=_0x57fd76['id'],_0x4c481f=_0x57fd76['data']());}if(!_0x57fd76){showNotification('Player\x20\x22'+_0x4676f5+'\x22\x20not\x20found\x20in\x20'+(_0x8a087f==='non-participant'?_0x5a0275(0xfb):_0x8a087f+_0x5a0275(0x230)),'error');return;}const _0x246045=collection(db,'userTrophies'),_0x4798c4=query(_0x246045,where('userId','==',_0x329dcc),where('trophyId','==',_0x5c9b66)),_0x59d430=await getDocs(_0x4798c4);if(!_0x59d430[_0x5a0275(0x260)]){showNotification('Player\x20\x22'+_0x4676f5+'\x22\x20already\x20has\x20this\x20trophy',_0x5a0275(0x1db));return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x329dcc,'playerUsername':_0x4676f5,'trophyId':_0x5c9b66,'awardedAt':serverTimestamp(),'awardedBy':_0x5e27ff['email'],'ladder':_0x8a087f}),showNotification(_0x5a0275(0x23b)+_0x400a79+'\x22\x20awarded\x20to\x20'+_0x4676f5,_0x5a0275(0x1f7)),closeAssignTrophyModal();}catch(_0x17dcf5){console['error'](_0x5a0275(0xfe),_0x17dcf5),showNotification(_0x5a0275(0x14e)+_0x17dcf5['message'],_0x5a0275(0x221));}}function setupInactivePlayersSection(){const _0x2d16f4=a2_0x279dcd,_0x115661=document['getElementById']('inactive-days-filter');_0x115661&&_0x115661[_0x2d16f4(0x29c)](_0x2d16f4(0x1df),function(){const _0x3660dc=document['getElementById']('load-inactive-players-data');if(_0x3660dc)_0x3660dc['click']();});const _0x314bfb=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x2d22ee=document['querySelector'](_0x2d16f4(0x250));_0x314bfb&&_0x2d22ee&&(_0x314bfb['addEventListener']('change',function(){const _0x155345=_0x2d16f4;if(this['checked']){currentLadder='D1';if(document['getElementById']('inactive-players')['style'][_0x155345(0x24d)]!=='none'){const _0x416756=document[_0x155345(0x16a)](_0x155345(0x2b7));if(_0x416756)_0x416756['click']();}}}),_0x2d22ee['addEventListener']('change',function(){const _0xd1c2ec=_0x2d16f4;if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')['style'][_0xd1c2ec(0x24d)]!=='none'){const _0x262d49=document['getElementById']('load-inactive-players-data');if(_0x262d49)_0x262d49['click']();}}}));const _0x61462b=document['getElementById']('inactive-players-search');_0x61462b&&_0x61462b[_0x2d16f4(0x29c)](_0x2d16f4(0x1d6),debounce(function(){const _0x384964=_0x2d16f4,_0xb8034d=_0x61462b[_0x384964(0x1fb)][_0x384964(0xbb)](),_0x35e079=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x35e079[_0x384964(0x257)](_0x273ad8=>{const _0x446d04=_0x384964;if(_0x273ad8['querySelector'](_0x446d04(0x11f))||_0x273ad8['querySelector']('.empty-state')||_0x273ad8['querySelector'](_0x446d04(0x110)))return;const _0x2a2ec3=_0x273ad8['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x3169e9=_0x273ad8['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x2a2ec3['includes'](_0xb8034d)||_0x3169e9['includes'](_0xb8034d)?_0x273ad8[_0x446d04(0x20b)]['display']='':_0x273ad8['style'][_0x446d04(0x24d)]='none';});},0x12c)),document['addEventListener']('click',function(_0x4cf418){const _0x2250ac=_0x2d16f4;if(_0x4cf418['target'][_0x2250ac(0x1aa)]('.view-player-btn')){const _0x559940=_0x4cf418[_0x2250ac(0x137)]['closest'](_0x2250ac(0x90)),_0x47fb83=_0x559940['dataset']['username'];_0x47fb83&&alert('View\x20player\x20details\x20for\x20'+_0x47fb83+'\x20-\x20Feature\x20coming\x20soon');}}),console['log'](_0x2d16f4(0x117));}async function loadInactivePlayersData(){const _0x1b89e9=a2_0x279dcd,_0x2d3486=document['getElementById'](_0x1b89e9(0x247));if(!_0x2d3486)return;_0x2d3486[_0x1b89e9(0x20a)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x593a94=document['getElementById']('inactive-days-filter'),_0xc6bab7=_0x593a94?parseInt(_0x593a94[_0x1b89e9(0x1fb)])||0x0:0x0,_0x420cb6=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x466411=await getDocs(_0x420cb6);if(_0x466411[_0x1b89e9(0x260)]){_0x2d3486['innerHTML']=_0x1b89e9(0x10d);return;}const _0x584ed8=[];_0x466411['forEach'](_0x1da242=>{const _0x6a90e9=_0x1b89e9,_0x52f72f=_0x1da242['data']();_0x584ed8[_0x6a90e9(0x8b)]({..._0x52f72f,'id':_0x1da242['id'],'username':_0x52f72f['username']||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x584ed8['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x4b699a=currentLadder==='D1'?_0x1b89e9(0x277):'approvedMatchesD2',_0x4010c9=_0x584ed8['map'](async _0x1c3960=>{const _0x15feb7=_0x1b89e9;try{const _0x2348c7=collection(db,_0x4b699a),_0x44454e=query(_0x2348c7,or(where('winnerUsername','==',_0x1c3960['username']),where('loserUsername','==',_0x1c3960['username'])),orderBy('approvedAt',_0x15feb7(0x2b3)),limit(0x1)),_0x2cf970=await getDocs(_0x44454e);if(!_0x2cf970[_0x15feb7(0x260)]){const _0x3e3625=_0x2cf970['docs'][0x0][_0x15feb7(0x270)](),_0x3636a2=_0x3e3625['approvedAt']?new Date(_0x3e3625['approvedAt']['seconds']*0x3e8):null,_0x2d443c=new Date(),_0x11a423=_0x3636a2?Math['floor']((_0x2d443c-_0x3636a2)/(0x3e8*0x3c*0x3c*0x18)):null,_0x30644a=_0x3e3625['winnerUsername']===_0x1c3960['username']?_0x3e3625['loserUsername']:_0x3e3625['winnerUsername'],_0x4e0863=_0x3e3625['winnerUsername']===_0x1c3960['username']?_0x15feb7(0xf0):_0x15feb7(0x29d);return{..._0x1c3960,'lastMatch':{'date':_0x3636a2?_0x3636a2['toLocaleDateString']():_0x15feb7(0x236),'opponent':_0x30644a||'Unknown','result':_0x4e0863,'timestamp':_0x3636a2||new Date(0x0),'daysSinceMatch':_0x11a423||Number['MAX_SAFE_INTEGER']}};}else return{..._0x1c3960,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x3ee2ac){return console['error'](_0x15feb7(0x106)+_0x1c3960['username']+':',_0x3ee2ac),{..._0x1c3960,'lastMatch':{'date':'Error','opponent':_0x15feb7(0x1a5),'result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x431119=await Promise['all'](_0x4010c9);_0x431119['sort']((_0x1ab0da,_0x37811d)=>_0x37811d['lastMatch']['daysSinceMatch']-_0x1ab0da[_0x1b89e9(0xd7)][_0x1b89e9(0x282)]);_0xc6bab7>0x0&&(_0x431119=_0x431119['filter'](_0x15525d=>_0x15525d[_0x1b89e9(0xd7)][_0x1b89e9(0x282)]>=_0xc6bab7));_0x2d3486['innerHTML']='';if(_0x431119['length']===0x0){_0x2d3486[_0x1b89e9(0x20a)]=_0x1b89e9(0x10b);return;}_0x431119['forEach'](_0x413a1b=>{const _0x39c33f=_0x1b89e9,_0xdace04=document['createElement']('tr'),_0x334c76=_0x413a1b['lastMatch']['daysSinceMatch']>0x1e?_0x39c33f(0x15d):_0x413a1b[_0x39c33f(0xd7)][_0x39c33f(0x282)]>0xe?'moderately-inactive':'';_0xdace04['className']=_0x334c76,_0xdace04['innerHTML']=_0x39c33f(0x258)+_0x413a1b['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x413a1b['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x413a1b[_0x39c33f(0xd7)]['date']+_0x39c33f(0x19e)+(_0x413a1b[_0x39c33f(0xd7)]['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x413a1b[_0x39c33f(0xd7)]['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x413a1b[_0x39c33f(0xd7)]['date']==='Never\x20played'?'No\x20matches\x20found':_0x413a1b[_0x39c33f(0xd7)]['result']+'\x20vs\x20'+_0x413a1b['lastMatch'][_0x39c33f(0x116)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x413a1b[_0x39c33f(0x278)]+_0x39c33f(0x9b),_0x2d3486['appendChild'](_0xdace04);}),console['log']('Displaying\x20'+_0x431119[_0x1b89e9(0xc6)]+'\x20inactive\x20players');}catch(_0x333e21){console['error'](_0x1b89e9(0x162),_0x333e21),_0x2d3486[_0x1b89e9(0x20a)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x333e21['message']+'</td></tr>';}}function setupHighlightButtons(){const _0xf93a9c=a2_0x279dcd;console['log']('Setting\x20up\x20highlight\x20buttons');const _0xcccdc4=document['getElementById'](_0xf93a9c(0x1cf));_0xcccdc4&&_0xcccdc4['addEventListener']('click',function(){const _0x2dd0fd=_0xf93a9c;console[_0x2dd0fd(0x175)]('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x40e107=document[_0xf93a9c(0x16a)](_0xf93a9c(0xbe));_0x40e107&&_0x40e107[_0xf93a9c(0x29c)]('click',function(){console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x41ab4d=document['getElementById']('create-achievement-highlight-btn');_0x41ab4d&&_0x41ab4d['addEventListener'](_0xf93a9c(0x1b8),function(){const _0x50d35d=_0xf93a9c;console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x50d35d(0x2cf));});}function openHighlightModal(_0x3eef7e='match'){const _0x3eaf94=a2_0x279dcd;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x3eef7e);const _0x2d8a39=document['getElementById'](_0x3eaf94(0x189)),_0x444f8f=document['getElementById']('highlight-form'),_0x14da30=document['getElementById']('highlight-modal-title'),_0xa98bf2=document['getElementById']('highlight-id');if(!_0x2d8a39||!_0x444f8f||!_0x14da30){console[_0x3eaf94(0x221)](_0x3eaf94(0x19b));return;}_0x444f8f['reset'](),_0xa98bf2[_0x3eaf94(0x1fb)]='';const _0x3a4960=['match','creator','achievement'],_0x1f2ff0=!_0x3a4960['includes'](_0x3eef7e);if(_0x1f2ff0){const _0xbafd92=_0x3eef7e;_0xa98bf2['value']=_0xbafd92,_0x14da30['textContent']='Loading...',loadHighlightDataAdmin(_0xbafd92);}else{const _0x19d566=_0x3eef7e;document[_0x3eaf94(0x16a)]('highlight-type')[_0x3eaf94(0x1fb)]=_0x19d566,_0x14da30['textContent']=_0x3eaf94(0xe3)+getHighlightTypeName(_0x19d566),toggleHighlightFields(_0x19d566);const _0x17bfb8=auth['currentUser'];_0x17bfb8&&document['getElementById']('highlight-submitted-by')&&(document[_0x3eaf94(0x16a)]('highlight-submitted-by')['value']=_0x17bfb8['displayName']||_0x17bfb8[_0x3eaf94(0x1b5)]);}_0x2d8a39['classList'][_0x3eaf94(0x18e)]('active');}function toggleHighlightFields(_0x81db99){const _0x14402b=a2_0x279dcd;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x81db99);const _0x46f24d=document[_0x14402b(0x16a)]('highlight-form');if(!_0x46f24d)return;const _0x3cfac1=_0x46f24d[_0x14402b(0x2c4)](_0x14402b(0x1bb));_0x3cfac1[_0x14402b(0x257)](_0x2344e6=>_0x2344e6['style']['display']='none');const _0x4d4a65=document['getElementById']('highlight-video-preview-container');if(_0x4d4a65)_0x4d4a65['style']['display']=_0x14402b(0x18a);const _0x1bcce4=[_0x14402b(0x1e6),_0x14402b(0xaa),'highlight-submitted-by-container'];_0x1bcce4['forEach'](_0x51d551=>{const _0x12d1af=_0x14402b,_0x4a85c1=document[_0x12d1af(0x16a)](_0x51d551);if(_0x4a85c1)_0x4a85c1['style']['display']='block';});if(_0x81db99==='match'){const _0x59d319=['highlight-video-container','highlight-match-info-container',_0x14402b(0x2bf),_0x14402b(0xa8),'highlight-players-container','highlight-match-link-container'];_0x59d319['forEach'](_0x65da8e=>{const _0x231885=_0x14402b,_0x2d8546=document[_0x231885(0x16a)](_0x65da8e);_0x2d8546&&(_0x65da8e==='highlight-players-container'?_0x2d8546['style']['display']='flex':_0x2d8546[_0x231885(0x20b)]['display']=_0x231885(0x21c));});const _0x1b4235=document[_0x14402b(0x16a)]('highlight-video-id');if(_0x1b4235){_0x1b4235['required']=!![];const _0x546ed4=_0x1b4235['previousElementSibling'];if(_0x546ed4)_0x546ed4['innerHTML']=_0x14402b(0x2b9);}if(_0x4d4a65)_0x4d4a65['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x81db99==='creator'){const _0x4814ac=[_0x14402b(0x2bf),'highlight-map-creator-container','highlight-map-version-container',_0x14402b(0xed),'highlight-video-container'];_0x4814ac['forEach'](_0x14f2de=>{const _0x2ff577=_0x14402b,_0x5f4763=document['getElementById'](_0x14f2de);if(_0x5f4763)_0x5f4763[_0x2ff577(0x20b)]['display']=_0x2ff577(0x21c);});const _0x35c859=document[_0x14402b(0x16a)](_0x14402b(0x1ee));if(_0x35c859){_0x35c859['required']=![];const _0x38c511=_0x35c859['previousElementSibling'];if(_0x38c511)_0x38c511['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x81db99==='achievement'){const _0x13d2d6=[_0x14402b(0x181),'highlight-achievement-type-container','highlight-achievement-details-container',_0x14402b(0x2be),'highlight-achievement-image-container','highlight-video-container'];_0x13d2d6[_0x14402b(0x257)](_0x401607=>{const _0x567d41=_0x14402b,_0x4f279e=document['getElementById'](_0x401607);if(_0x4f279e)_0x4f279e[_0x567d41(0x20b)]['display']='block';});const _0x37e457=document[_0x14402b(0x16a)]('highlight-video-id');if(_0x37e457){_0x37e457['required']=![];const _0x3eae08=_0x37e457['previousElementSibling'];if(_0x3eae08)_0x3eae08['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x1a0483){const _0x456d5e=a2_0x279dcd;try{const _0x538557=doc(db,'highlights',_0x1a0483),_0x3a944c=await getDoc(_0x538557);if(!_0x3a944c['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x1f8aae=_0x3a944c['data'](),_0x112957=_0x1f8aae['type']||_0x456d5e(0x18f);document['getElementById'](_0x456d5e(0xbc))[_0x456d5e(0x290)]='Edit\x20'+getHighlightTypeName(_0x112957),document[_0x456d5e(0x16a)]('highlight-type')['value']=_0x112957,toggleHighlightFields(_0x112957),document[_0x456d5e(0x16a)](_0x456d5e(0x94))[_0x456d5e(0x1fb)]=_0x1f8aae[_0x456d5e(0x1a9)]||'',document[_0x456d5e(0x16a)](_0x456d5e(0x151))['value']=_0x1f8aae['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x1f8aae['submittedBy']||'';_0x1f8aae[_0x456d5e(0x1ac)]&&(document[_0x456d5e(0x16a)]('highlight-video-id')[_0x456d5e(0x1fb)]=_0x1f8aae[_0x456d5e(0x1ac)],updateHighlightVideoPreview());if(_0x112957==='match'){document['getElementById']('highlight-match-info')['value']=_0x1f8aae[_0x456d5e(0x2d8)]||'',document['getElementById']('highlight-map')['value']=_0x1f8aae['map']||'';if(_0x1f8aae['matchDate']){const _0x1abf94=new Date(_0x1f8aae['matchDate']['seconds']*0x3e8);document[_0x456d5e(0x16a)](_0x456d5e(0x1a6))['value']=_0x1abf94[_0x456d5e(0x252)]()['split']('T')[0x0];}document[_0x456d5e(0x16a)](_0x456d5e(0x15b))[_0x456d5e(0x1fb)]=_0x1f8aae['winnerName']||'',document['getElementById'](_0x456d5e(0x1bc))[_0x456d5e(0x1fb)]=_0x1f8aae['winnerScore']||'',document['getElementById'](_0x456d5e(0x2c8))['value']=_0x1f8aae['loserName']||'',document[_0x456d5e(0x16a)]('highlight-loser-score')[_0x456d5e(0x1fb)]=_0x1f8aae['loserScore']||'',document['getElementById']('highlight-match-link')['value']=_0x1f8aae['matchLink']||'';}else{if(_0x112957==='creator')document['getElementById']('highlight-map')[_0x456d5e(0x1fb)]=_0x1f8aae['map']||'',document['getElementById'](_0x456d5e(0xea))['value']=_0x1f8aae[_0x456d5e(0x143)]||'',document[_0x456d5e(0x16a)]('highlight-map-version')['value']=_0x1f8aae['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x1f8aae['creatorImageUrl']||'';else _0x112957==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0x1f8aae[_0x456d5e(0x289)]||'',document[_0x456d5e(0x16a)](_0x456d5e(0x209))[_0x456d5e(0x1fb)]=_0x1f8aae['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x1f8aae[_0x456d5e(0x2b6)]||'',document[_0x456d5e(0x16a)](_0x456d5e(0x22d))['value']=_0x1f8aae[_0x456d5e(0x2a4)]||'',document[_0x456d5e(0x16a)](_0x456d5e(0x1f4))['value']=_0x1f8aae['achievementImageUrl']||'');}}catch(_0x2ef17e){console['error'](_0x456d5e(0x255),_0x2ef17e),showNotification(_0x456d5e(0x11d)+_0x2ef17e['message'],_0x456d5e(0x221));}}async function saveHighlight(){const _0x1ebe70=a2_0x279dcd;try{const _0x23dc95=document['getElementById'](_0x1ebe70(0x1d1))?.['value']||'',_0x1305d9=document[_0x1ebe70(0x16a)]('highlight-type')?.['value']||'match',_0x2d1711={'title':document['getElementById']('highlight-title')?.[_0x1ebe70(0x1fb)]?.[_0x1ebe70(0x232)]()||'','description':document['getElementById'](_0x1ebe70(0x151))?.[_0x1ebe70(0x1fb)]?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x1305d9};if(!_0x2d1711[_0x1ebe70(0x1a9)]){showNotification('Title\x20is\x20required','error');return;}if(_0x1305d9==='match'){_0x2d1711['matchInfo']=document['getElementById']('highlight-match-info')?.['value']?.[_0x1ebe70(0x232)]()||'',_0x2d1711['map']=document['getElementById'](_0x1ebe70(0x25f))?.[_0x1ebe70(0x1fb)]?.[_0x1ebe70(0x232)]()||'';const _0x3b488a=document[_0x1ebe70(0x16a)]('highlight-match-date'),_0x105d78=_0x3b488a?.['value']||'';_0x2d1711['matchDate']=_0x105d78?Timestamp['fromDate'](new Date(_0x105d78)):null,_0x2d1711['winnerName']=document['getElementById']('highlight-winner-name')?.['value']?.[_0x1ebe70(0x232)]()||'',_0x2d1711['winnerScore']=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x2d1711['loserName']=document[_0x1ebe70(0x16a)]('highlight-loser-name')?.['value']?.[_0x1ebe70(0x232)]()||'',_0x2d1711[_0x1ebe70(0x26e)]=document['getElementById']('highlight-loser-score')?.['value']?.[_0x1ebe70(0x232)]()||'',_0x2d1711['matchLink']=document['getElementById']('highlight-match-link')?.['value']?.[_0x1ebe70(0x232)]()||'';if(!_0x2d1711['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x1305d9===_0x1ebe70(0x254)){_0x2d1711['map']=document[_0x1ebe70(0x16a)]('highlight-map')?.['value']?.[_0x1ebe70(0x232)]()||'',_0x2d1711['mapCreator']=document[_0x1ebe70(0x16a)]('highlight-map-creator')?.[_0x1ebe70(0x1fb)]?.['trim']()||'',_0x2d1711['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.[_0x1ebe70(0x232)]()||'',_0x2d1711['creatorImageUrl']=document['getElementById']('highlight-creator-image')?.['value']?.[_0x1ebe70(0x232)]()||'';if(!_0x2d1711[_0x1ebe70(0x143)]){showNotification('Map\x20Creator\x20is\x20required',_0x1ebe70(0x221));return;}}else{if(_0x1305d9==='achievement'){_0x2d1711[_0x1ebe70(0x289)]=document['getElementById'](_0x1ebe70(0x19d))?.[_0x1ebe70(0x1fb)]?.['trim']()||'',_0x2d1711[_0x1ebe70(0x26a)]=document['getElementById']('highlight-achievement-type')?.['value']?.['trim']()||'',_0x2d1711['achievementDetails']=document['getElementById'](_0x1ebe70(0x1b2))?.[_0x1ebe70(0x1fb)]?.[_0x1ebe70(0x232)]()||'',_0x2d1711['playerProfileUrl']=document[_0x1ebe70(0x16a)]('highlight-player-profile')?.['value']?.['trim']()||'',_0x2d1711[_0x1ebe70(0x1e4)]=document['getElementById'](_0x1ebe70(0x1f4))?.[_0x1ebe70(0x1fb)]?.[_0x1ebe70(0x232)]()||'';if(!_0x2d1711['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x23dc95?(_0x2d1711['updatedAt']=serverTimestamp(),await updateDoc(doc(db,_0x1ebe70(0x24f),_0x23dc95),_0x2d1711),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x2d1711[_0x1ebe70(0x12e)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x2d1711),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x56e7ec){console[_0x1ebe70(0x221)](_0x1ebe70(0x145),_0x56e7ec),showNotification('Error\x20saving\x20highlight:\x20'+_0x56e7ec[_0x1ebe70(0x144)],'error');}}function closeHighlightModal(){const _0x266cfc=a2_0x279dcd,_0xddbff5=document['getElementById']('highlight-modal');if(_0xddbff5)_0xddbff5[_0x266cfc(0x22c)][_0x266cfc(0x1ad)](_0x266cfc(0x8f));}function getHighlightTypeName(_0x39b69d){const _0x1d5f9b=a2_0x279dcd;switch(_0x39b69d){case _0x1d5f9b(0x18f):return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case _0x1d5f9b(0x2cf):return _0x1d5f9b(0x102);default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x2e1229=a2_0x279dcd,_0x1e7c0a=document[_0x2e1229(0x16a)]('highlight-video-id'),_0x2f3dfc=document['getElementById'](_0x2e1229(0x17f)),_0x47a262=document[_0x2e1229(0x16a)]('highlight-video-preview');if(!_0x1e7c0a||!_0x47a262||!_0x2f3dfc)return;const _0x2f163d=_0x1e7c0a['value']['trim']();_0x2f163d&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x2f163d)?(_0x47a262['src']='https://www.youtube.com/embed/'+_0x2f163d,_0x2f3dfc[_0x2e1229(0x20b)]['display']='block'):(_0x47a262['src']='',_0x2f3dfc[_0x2e1229(0x20b)]['display']='none');}async function loadHighlightsAdmin(){const _0x505225=a2_0x279dcd,_0x4962fb=document[_0x505225(0x16a)]('highlights-table-body');if(!_0x4962fb)return;_0x4962fb[_0x505225(0x20a)]=_0x505225(0xdb);try{const _0x5d7171=query(collection(db,'highlights'),orderBy(_0x505225(0x12e),_0x505225(0x2b3))),_0x4ee82d=await getDocs(_0x5d7171);if(_0x4ee82d[_0x505225(0x260)]){_0x4962fb['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x4962fb['innerHTML']='',_0x4ee82d['forEach'](_0x20ec51=>{const _0x28f2da=_0x505225,_0x470738=_0x20ec51[_0x28f2da(0x270)](),_0x29d80f=document['createElement']('tr'),_0x26614b=_0x470738['createdAt']?new Date(_0x470738['createdAt']['seconds']*0x3e8)['toLocaleDateString']():_0x28f2da(0x236);let _0x3d8423=_0x28f2da(0x2b1),_0xca982c='';switch(_0x470738[_0x28f2da(0x121)]){case'match':_0x3d8423=_0x28f2da(0x22f),_0xca982c='match-type';break;case'creator':_0x3d8423='Creator',_0xca982c='creator-type';break;case _0x28f2da(0x2cf):_0x3d8423=_0x28f2da(0x228),_0xca982c=_0x28f2da(0x285);break;}_0x29d80f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x470738[_0x28f2da(0x1a9)]||_0x28f2da(0xa3))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0xca982c+'\x22>'+_0x3d8423+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x26614b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x470738['submittedBy']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x470738[_0x28f2da(0x1ac)]?_0x28f2da(0x128):_0x28f2da(0x96))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x20ec51['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x20ec51['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4962fb[_0x28f2da(0x182)](_0x29d80f);}),document[_0x505225(0x2c4)](_0x505225(0x1d9))['forEach'](_0x395b6b=>{_0x395b6b['addEventListener']('click',_0x514dbe=>{openHighlightModal(_0x514dbe['currentTarget']['dataset']['id']);});}),document[_0x505225(0x2c4)](_0x505225(0xa2))['forEach'](_0x48b1ee=>{_0x48b1ee['addEventListener']('click',_0x13c68d=>{const _0x11b51f=a2_0x256f;confirmDeleteHighlight(_0x13c68d[_0x11b51f(0x288)][_0x11b51f(0xde)]['id']);});});}catch(_0x300307){console[_0x505225(0x221)]('Error\x20loading\x20highlights:',_0x300307),_0x4962fb['innerHTML']=_0x505225(0xe4)+_0x300307['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x4c233c){const _0x359471=a2_0x279dcd;if(confirm(_0x359471(0x1b6)))try{await deleteDoc(doc(db,'highlights',_0x4c233c)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x4f3ed1){console['error']('Error\x20deleting\x20highlight:',_0x4f3ed1),showNotification('Error\x20deleting\x20highlight:\x20'+_0x4f3ed1['message'],'error');}}function setupCreateTestMatchModal(){const _0x190a2e=a2_0x279dcd;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x59b10a=document['getElementById']('create-test-match-modal'),_0x31c858=document[_0x190a2e(0x16a)]('create-test-match-form');if(!_0x59b10a){console[_0x190a2e(0x221)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x31c858){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x3cf3be=_0x59b10a['cloneNode'](!![]);_0x59b10a['parentNode']['replaceChild'](_0x3cf3be,_0x59b10a);const _0x11cf57=_0x3cf3be[_0x190a2e(0x23e)]('#create-test-match-form');_0x3cf3be['addEventListener']('click',function(_0x5d1646){_0x5d1646['target']===_0x3cf3be&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x423e0c=_0x3cf3be['querySelector'](_0x190a2e(0x1e9));_0x423e0c&&_0x423e0c['addEventListener'](_0x190a2e(0x1b8),function(_0x2be21c){const _0x2ca323=_0x190a2e;_0x2be21c[_0x2ca323(0x166)](),_0x2be21c['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x3ce482=_0x3cf3be[_0x190a2e(0x23e)]('#cancel-create-test-match-btn');_0x3ce482&&_0x3ce482['addEventListener']('click',function(_0x369ba7){_0x369ba7['preventDefault'](),_0x369ba7['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x11cf57){_0x11cf57['addEventListener']('submit',function(_0x1eba44){const _0x2fca8b=_0x190a2e;_0x1eba44[_0x2fca8b(0x166)](),_0x1eba44['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x3f57af=_0x11cf57['querySelector']('button[type=\x22submit\x22]');_0x3f57af&&_0x3f57af['addEventListener']('click',function(_0x6afd8f){_0x6afd8f['preventDefault'](),_0x6afd8f['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x190a2e(0x175)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x427444=a2_0x279dcd;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x35eaeb=document['getElementById']('highlight-form');_0x35eaeb&&_0x35eaeb['addEventListener'](_0x427444(0x1fa),_0x57111f=>{_0x57111f['preventDefault'](),saveHighlight();});const _0x199b6f=document['getElementById']('cancel-highlight-btn');_0x199b6f&&_0x199b6f[_0x427444(0x29c)](_0x427444(0x1b8),closeHighlightModal);const _0xb0b656=document['querySelector']('#highlight-modal\x20.close-btn');_0xb0b656&&_0xb0b656['addEventListener']('click',closeHighlightModal);const _0x447767=document['getElementById']('highlight-modal');_0x447767&&_0x447767['addEventListener']('click',_0x1678d5=>{_0x1678d5['target']===_0x447767&&closeHighlightModal();});const _0x40d7d6=document['getElementById'](_0x427444(0x1ee));_0x40d7d6&&_0x40d7d6['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x16ec77=a2_0x279dcd;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x394621=document['getElementById']('matches-prev-page'),_0x5a57bb=document['getElementById']('matches-next-page');_0x394621&&_0x394621['addEventListener']('click',()=>{const _0x14c1fc=a2_0x256f,_0x31e7d3=currentLadder[_0x14c1fc(0xbb)]();loadMatchesData(matchesPagination[_0x31e7d3]['page']-0x1);});_0x5a57bb&&_0x5a57bb['addEventListener']('click',()=>{const _0x4317b6=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x4317b6]['page']+0x1);});const _0x610365=document[_0x16ec77(0x16a)](_0x16ec77(0x169)),_0x34df78=document['getElementById'](_0x16ec77(0x24e));_0x610365&&_0x610365[_0x16ec77(0x29c)](_0x16ec77(0x1b8),applyMatchesFilters);_0x34df78&&_0x34df78['addEventListener']('click',resetMatchesFilters);const _0x5cda09=document['getElementById'](_0x16ec77(0x186));_0x5cda09&&_0x5cda09['addEventListener'](_0x16ec77(0x1d6),debounce(filterMatchesTable,0x12c));const _0x50dcab=document['getElementById']('resimulate-match-btn');_0x50dcab&&_0x50dcab['addEventListener'](_0x16ec77(0x1b8),openResimulateModal);const _0xbfa942=document['getElementById'](_0x16ec77(0xa5));if(_0xbfa942){const _0x101a5e=_0xbfa942['querySelector'](_0x16ec77(0x226));_0x101a5e&&_0x101a5e['addEventListener']('click',closeResimulateModal),_0xbfa942[_0x16ec77(0x29c)]('click',_0x1d6972=>{_0x1d6972['target']===_0xbfa942&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x5d5516=a2_0x279dcd;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x5b4e8f=document[_0x5d5516(0x16a)](_0x5d5516(0x292)),_0x448eaa=document['getElementById']('create-test-match-form');if(!_0x5b4e8f){console['error'](_0x5d5516(0x23d)),showNotification(_0x5d5516(0x23d),_0x5d5516(0x221));return;}if(!_0x448eaa){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification(_0x5d5516(0x2a7),'error');return;}_0x448eaa[_0x5d5516(0x178)]();const _0x1aadd9=document[_0x5d5516(0x2c4)](_0x5d5516(0x1c7));let _0x1eaa33=![];_0x1aadd9['forEach'](_0x16b7f0=>{const _0x17b18b=_0x5d5516;console['log'](_0x17b18b(0x231),_0x16b7f0['value']),_0x16b7f0['value']===currentLadder&&(_0x16b7f0[_0x17b18b(0x2c5)]=!![],_0x1eaa33=!![],console['log'](_0x17b18b(0xc9),currentLadder));});if(!_0x1eaa33){console['warn'](_0x5d5516(0xe5),currentLadder);const _0x13b33a=document[_0x5d5516(0x23e)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x13b33a&&(_0x13b33a[_0x5d5516(0x2c5)]=!![],console[_0x5d5516(0x175)]('Defaulted\x20to\x20D1\x20ladder'));}const _0x159f6c=document['getElementById'](_0x5d5516(0x264));if(_0x159f6c){const _0x249794=new Date()['toISOString']()['split']('T')[0x0];_0x159f6c[_0x5d5516(0x1fb)]=_0x249794;}_0x5b4e8f[_0x5d5516(0x20b)]['display']='flex',_0x5b4e8f['style']['visibility']=_0x5d5516(0x1c5),_0x5b4e8f[_0x5d5516(0x20b)][_0x5d5516(0x227)]='1',_0x5b4e8f[_0x5d5516(0x22c)][_0x5d5516(0x18e)]('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x55f282=document['getElementById']('test-match-winner-username');_0x55f282&&setTimeout(()=>{_0x55f282['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x41f66b=a2_0x279dcd;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x208aed=document[_0x41f66b(0x16a)]('create-test-match-modal');if(!_0x208aed){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x208aed['classList']['remove']('active'),_0x208aed[_0x41f66b(0x20b)]['opacity']='0',_0x208aed['style']['visibility']=_0x41f66b(0xa7),setTimeout(()=>{const _0x309d3d=_0x41f66b;!_0x208aed['classList']['contains']('active')&&(_0x208aed[_0x309d3d(0x20b)]['display']='none');},0x12c),console[_0x41f66b(0x175)]('Modal\x20closed');}async function createTestMatch(){const _0x2a7cae=a2_0x279dcd;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x56f7b4=auth['currentUser'];if(!_0x56f7b4){showNotification('You\x20must\x20be\x20logged\x20in',_0x2a7cae(0x221));return;}const _0x21fef6='D1',_0x1ca826='approvedMatches',_0x5ac79e={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x2a7cae(0x187),'loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x56f7b4[_0x2a7cae(0x1b5)],'createdAt':serverTimestamp(),'createdBy':_0x56f7b4['email'],'isTestMatch':!![],'ladder':_0x21fef6,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x56f7b4['email']};console['log'](_0x2a7cae(0x2c7)),await addDoc(collection(db,_0x1ca826),_0x5ac79e),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0xe2b3cd){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0xe2b3cd),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0xe2b3cd[_0x2a7cae(0x144)],'error');}}window['testFirebaseConnection']=async function(){const _0x5f3566=a2_0x279dcd;try{console['log']('Testing\x20Firebase\x20connection...'),console['log'](_0x5f3566(0x2c2),auth),console['log']('DB:',db),console['log'](_0x5f3566(0x213),auth['currentUser']);const _0x117916=collection(db,'players');console['log'](_0x5f3566(0x15f),_0x117916);const _0x5b8be3=query(_0x117916,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x5b8be3);const _0x1dbdde=await getDocs(_0x5b8be3);console['log']('Query\x20executed.\x20Empty:',_0x1dbdde[_0x5f3566(0x260)]),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0xbdfc07){console['error'](_0x5f3566(0x8e),_0xbdfc07);}};function setupCreateTestMatchButton(){const _0x68dcab=a2_0x279dcd,_0xa136c8=document['getElementById']('create-test-match-btn');if(!_0xa136c8){console['error'](_0x68dcab(0x245));return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x35a89f=_0xa136c8[_0x68dcab(0x220)](!![]);_0xa136c8['parentNode']['replaceChild'](_0x35a89f,_0xa136c8),_0x35a89f['addEventListener'](_0x68dcab(0x1b8),function(_0x5ab72){_0x5ab72['preventDefault'](),_0x5ab72['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x456e2d=0x1){const _0x218ba2=a2_0x279dcd,_0x31773a=document['getElementById']('matches-table-body');if(!_0x31773a)return;_0x31773a['innerHTML']=_0x218ba2(0x1cd);try{const _0x2520d3=currentLadder[_0x218ba2(0xbb)](),_0x52177d=matchesPagination[_0x2520d3],_0x3635aa=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x83d98f=collection(db,_0x3635aa);_0x456e2d<=0x1?(_0x52177d['page']=0x1,_0x52177d['firstVisible']=null,_0x52177d['lastVisible']=null):_0x52177d['page']=_0x456e2d;const _0x3af161=getMatchesFilters();let _0x3ff2dc=_0x83d98f;if(_0x3af161['startDate']||_0x3af161['endDate']||_0x3af161['searchTerm']){let _0x4a8701=[];_0x3af161['startDate']&&_0x3af161['endDate']?(_0x4a8701['push'](where('approvedAt','>=',_0x3af161['startDate']),where(_0x218ba2(0x27f),'<=',_0x3af161['endDate'])),_0x3ff2dc=query(_0x83d98f,..._0x4a8701)):_0x3ff2dc=query(_0x83d98f,orderBy('approvedAt','desc'));}else _0x3ff2dc=query(_0x83d98f,orderBy(_0x218ba2(0x27f),_0x218ba2(0x2b3)));_0x456e2d>0x1&&_0x52177d['lastVisible']?_0x3ff2dc=query(_0x3ff2dc,startAfter(_0x52177d['lastVisible']),limit(PAGE_SIZE)):_0x3ff2dc=query(_0x3ff2dc,limit(PAGE_SIZE));const _0x121aa6=await getDocs(_0x3ff2dc);!_0x121aa6['empty']&&(_0x52177d['firstVisible']=_0x121aa6[_0x218ba2(0x28c)][0x0],_0x52177d['lastVisible']=_0x121aa6['docs'][_0x121aa6[_0x218ba2(0x28c)][_0x218ba2(0xc6)]-0x1]);let _0x50e86a=![];if(!_0x121aa6['empty']){const _0x5c0526=query(_0x3ff2dc,startAfter(_0x52177d[_0x218ba2(0x83)]),limit(0x1)),_0x37cb1b=await getDocs(_0x5c0526);_0x50e86a=!_0x37cb1b['empty'];}const _0x2be6ed=document['getElementById'](_0x218ba2(0x14c)),_0x486c6b=document[_0x218ba2(0x16a)]('matches-next-page'),_0x2669b5=document[_0x218ba2(0x16a)]('matches-page-indicator');if(_0x2be6ed)_0x2be6ed['disabled']=_0x52177d['page']<=0x1;if(_0x486c6b)_0x486c6b['disabled']=!_0x50e86a;if(_0x2669b5)_0x2669b5['textContent']='Page\x20'+_0x52177d['page'];if(_0x121aa6[_0x218ba2(0x260)]){_0x31773a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x31773a['innerHTML']='',_0x121aa6[_0x218ba2(0x257)](_0x446738=>{const _0x43c0e6=_0x218ba2,_0x329e5b=_0x446738['data'](),_0x3fe9e8=document[_0x43c0e6(0xce)]('tr'),_0x42f47f=_0x329e5b['approvedAt']?new Date(_0x329e5b['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x3fe9e8['setAttribute'](_0x43c0e6(0x1dc),_0x446738['id']),_0x3fe9e8['setAttribute'](_0x43c0e6(0xb7),currentLadder),_0x3fe9e8[_0x43c0e6(0x22c)][_0x43c0e6(0x18e)]('match-row'),_0x3fe9e8[_0x43c0e6(0x20a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x42f47f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x329e5b['winnerUsername']||_0x43c0e6(0x2b1))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x329e5b['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x329e5b['winnerScore']||0x0)+'\x20-\x20'+(_0x329e5b['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x329e5b[_0x43c0e6(0xd6)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x446738['id']+_0x43c0e6(0x219)+_0x446738['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x31773a[_0x43c0e6(0x182)](_0x3fe9e8);}),setupMatchesActionButtons(),_0x3af161[_0x218ba2(0x19f)]&&filterMatchesTable(),console['log']('Loaded\x20'+_0x121aa6['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x52177d['page']);}catch(_0x46a162){console[_0x218ba2(0x221)](_0x218ba2(0x15c),_0x46a162),_0x31773a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x46a162[_0x218ba2(0x144)]+_0x218ba2(0x2ca);}}function a2_0x3c36(){const _0x23abf1=['roleAssignedBy','lastVisible','winnerScore','winnerName','Searching\x20for\x20player\x20in\x20','fromDate','Successfully\x20demoted\x20','Role\x20\x27','points-asc','push','rankDistribution','Error\x20updating\x20player:','Firebase\x20connection\x20test\x20failed:','active','.view-player-btn','input[name=\x22promote-ladder\x22]:checked','getDate','points-overview-search','highlight-title','Setting\x20up\x20points\x20action\x20buttons...','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','players','winnerUsername','disabled','trophy-name','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','catch','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','firstVisible','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.',';\x22>','Load\x20ribbons\x20data\x20clicked','.delete-highlight-btn','Untitled','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','resimulate-modal','No\x20reason\x20provided','hidden','highlight-match-date-container','Found\x20specific\x20role:\x20','highlight-description-container','lastPointsModified','Failed\x20to\x20delete\x20article:\x20','Username\x20','match_result','#000000','No\x20users\x20found\x20in\x20userProfiles\x20collection','activity','Failed\x20to\x20load\x20article\x20data','\x22\x20set','div','toString','Initializing\x20points\x20field\x20for\x20user\x20','data-ladder','update','Error\x20searching\x20for\x20user','Error\x20awarding\x20item:','toLowerCase','highlight-modal-title','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','create-creator-highlight-btn','\x20total\x20matches\x20across\x20all\x20ladders','ribbon-item','Attempting\x20to\x20demote\x20','\x22\x20data-ladder=\x22','nonParticipants','Player\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','length','subtract','Role\x20select\x20set\x20to:\x20','Set\x20default\x20ladder\x20to:','.admin-section','name-desc','Failed\x20to\x20find\x20match:\x20','playersD3','createElement','#players.content-section.active','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','new-player-username','No\x20email','Emerald','inactive-players','No\x20position\x20changes\x20needed.','mapPlayed','lastMatch','history-type-filter','Unnamed\x20Trophy','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','apply','ref','dataset','delete-match-summary','currentUser','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','manage-highlights','Create\x20New\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','edit-match-loser-comment','match-details-container','trophy-preview-img','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','highlight-map-creator','Admin\x20Adjustment','articles','highlight-creator-image-container','trophy-description','common','Won','Removed\x20','sort','\x20Weekly\x20Activity','Player\x20updated\x20successfully','size','page','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','substring','elo','className','non-participants','\x20in\x20','uid','Error\x20assigning\x20trophy:','edit-losses','modifiedBy','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Player\x20Achievement','matches-end-date','Points\x20updated\x20successfully\x20for\x20user:','no-results','Error\x20fetching\x20matches\x20for\x20','.type','.edit-ribbons-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','ribbon-level','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','Error\x20loading\x20articles:','\x20vs\x20','.error-state','previousElo','\x20D3\x20pilots','ribbon-user-search','Manage\x20Points\x20section\x20initialized','Updating\x20role\x20for\x20','opponent','Inactive\x20players\x20section\x20initialized','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Delete\x20match\x20clicked:','matchLink','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20highlight:\x20','edit-highlight-winnerScore-input','.loading-cell','\x20users\x20already\x20had\x20points.','type','exists','userId','content','displayName','toLocaleString','bar','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','loserUsername','assign-trophy-description','commit','roleColor','trophy-rarity','createdAt','.view-history-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','Subtracted\x20','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','cancel-role-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20','target','Error\x20in\x20bulk\x20award\x20points:','Error\x20adding\x20player:\x20','\x20(winner)\x20vs\x20','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','playersD2','player','d3-prev-page','rank-distribution-chart','Error\x20saving\x20highlight:\x20','elo-history','find','mapCreator','message','Error\x20saving\x20highlight:','Trophy\x20Preview','quick-points-amount','medium-points','updatedAt','manage-ribbons','Starting\x20complete\x20match\x20resimulation...','matches-prev-page','matchId','Failed\x20to\x20assign\x20trophy:\x20','selected-user-points','trophy-id','highlight-description','reason','user-search-results','level','confirm-resimulate-btn','Match\x20ID\x20is\x20required','promotion','Failed\x20to\x20delete\x20match:\x20','ribbon-target-ladder','Found\x20user\x20in\x20','highlight-winner-name','Error\x20loading\x20matches:','highly-inactive','Error\x20removing\x20ribbon','Collection\x20reference\x20created:','toDate','user-roles-section','Error\x20loading\x20inactive\x20players:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','info','preventDefault','Error\x20loading\x20match\x20for\x20deletion:','Awarded\x20','apply-matches-filters','getElementById','DOMContentLoaded','Bronze','Unranked','eloHistoryD2','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','\x20history\x20entries\x20for\x20user\x20','Looking\x20for\x20user\x20role\x20information\x20for\x20','Page\x20','.edit-match-btn','log','demote-modal','demote-username','reset','cancel-assign-btn','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','asc','),\x20','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','player-search','highlight-video-preview-container','amount','highlight-achievement-player-container','appendChild','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','body','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','matches-search','TestLoser','userProfiles','highlight-modal','none','quick-edit-user-id','name','trophy-form','add','match','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','all','eloHistory','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','Match\x20not\x20found\x20in\x20approved\x20matches','role-filter','winnerSuicides','Deleting\x20match...','warn','stopPropagation','Please\x20enter\x20a\x20username','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','\x20view\x20history\x20buttons','highlight-achievement-player','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','searchTerm','keys','Error\x20loading\x20users:','manage-levels-ribbons','create-new-trophy-btn','d1-prev-page','Error','highlight-match-date','award-item-form','newElo','title','closest','\x20section','videoId','remove','eloRating','match-count','points-desc','selected-user-id','highlight-achievement-details','users-table-body','removeAttribute','email','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','assign-trophy-form','click','losses','return\x20(function()\x20','.form-group,\x20.form-row','highlight-winner-score','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','Promoting\x20player\x20to\x20','login.html','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','Error\x20loading\x20ribbons:','Gold','edit-highlight-matchInfo-input','edit-highlight-loserName-input','visible','cancel-quick-edit','input[name=\x22test-match-ladder\x22]','No\x20user\x20ID\x20found\x20on\x20button','fa-check-circle','ribbon-target-user','\x20Exists','unknown','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','create-match-highlight-btn','.delete-trophy-btn','highlight-id','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','Error\x20demoting\x20player:\x20','points','approvedMatchesD3','input','Error\x20loading\x20user\x20points\x20history:','focus','.edit-highlight-btn','Non-Participants','warning','data-id','Failed\x20to\x20load\x20user\x20data:\x20','article-author','change','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','__proto__','\x20for\x20points\x20initialization','Found\x20','achievementImageUrl','removeEventListener','highlight-title-container','Attempting\x20to\x20promote\x20','promote-form','.close-btn','\x20pilots.\x20Errors:\x20','Never','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','playerRibbons','highlight-video-id','edit-highlight-mapVersion-input','award-all-pilots-btn','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','position','fa-exclamation-triangle','highlight-achievement-image','includes','./promotions.js','success','\x20collection...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','submit','value','quick-edit-points-form','Username\x20input\x20set\x20to:\x20','Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','promote-username','RejectedD2','\x20points','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','Article\x20created\x20successfully','#1976d2','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20','highlight-achievement-type','innerHTML','style','openResimulateModal','onAuthStateChanged','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...','role','Load\x20trophies\x20data\x20clicked','input[name=\x22demote-ladder\x22]:checked','Current\x20user:','Tuesday','.quick-edit-btn','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','article-form','roleAssignedAt','\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22','Error\x20adding\x20ribbon:','onerror','block','color','fa-exclamation-circle','history-end-date','cloneNode','error','user-role','Match\x20ID\x20or\x20ladder\x20missing','Load\x20users\x20data\x20clicked','0.6','.close','opacity','Achievement','Found\x20ELO\x20history\x20for\x20player\x20','Please\x20fill\x20all\x20fields','add-player-form','classList','highlight-player-profile','\x20points\x20history\x20entries','Match','\x20ladder','Found\x20radio\x20with\x20value:','trim','#users-table-body\x20tr','.empty-state','manage-ranks','N/A','matchDate','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','seconds','#C0C0C0','Trophy\x20\x22','Error\x20loading\x20trophy\x20definitions:','Create\x20test\x20match\x20modal\x20not\x20found','querySelector','\x20(based\x20on\x20data-role:\x20','set','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>','allUsersPoints','selected-user-info','Player\x20not\x20found\x20in\x20','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','inactive-players-table-body','edit-elo','Article\x20updated\x20successfully','1200','Setting\x20up\x20Manage\x20Ribbons\x20section','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','display','reset-matches-filters','highlights','.ladder-switch\x20input[value=\x22D2\x22]','\x20allowed\x20tabs:','toISOString','.section-header','creator','Error\x20loading\x20highlight:','Loading\x20user\x20data...','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','alt','Could\x20not\x20find\x20player\x20documents',').\x20','\x20was\x20updated\x20from\x20','contains','article-modal','highlight-map','empty','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','Profile','Error\x20setting\x20up\x20admin\x20dashboard','test-match-date','trophyDefinitions','Role\x20\x22','values','pending-count','test','achievementType','input[name=\x22quick-action\x22]:checked','#article-modal\x20.close-btn','reduce','loserScore','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','data','points-user-search','ribbon','edit-match-loser-demo','roleName','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20loading\x20match\x20data:','approvedMatches','username','-page-indicator','timestamp','ladder','table','prototype','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','approvedAt','promote-player-btn','\x20match\x20','daysSinceMatch','trophy-image-url','.remove-ribbon-btn','achievement-type','assign-player-username','points-overview-table-body','currentTarget','achievementPlayer','User\x20not\x20found','Username\x20is\x20missing','docs','set-role-form','This\x20will\x20award\x20','loading','textContent','Please\x20enter\x20a\x20valid\x20username','create-test-match-modal','players-table-body','Error\x20processing\x20pilot\x20','win','localeCompare','edit-match-winner','save-player-btn','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','Error\x20in\x20award\x20points\x20to\x20all\x20pilots:','map','addEventListener','Lost','pendingMatchesD3','ribbon-type-select','set-role-modal','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','Match\x20resimulated\x20successfully!\x20','d1-next-page','playerProfileUrl','admin','You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','Create\x20test\x20match\x20form\x20not\x20found','destroy','Error\x20opening\x20assign\x20trophy\x20modal:','Failed\x20to\x20load\x20match\x20data','Error\x20initializing\x20dashboard:','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','set-elo-username','Error\x20initializing\x20admin\x20dashboard:','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','Unknown','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','desc','ELO\x20rating\x20for\x20','has','achievementDetails','load-inactive-players-data','loserName','YouTube\x20Video\x20ID*','src','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','Error\x20saving\x20article:','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','highlight-player-profile-container','highlight-map-container','error-state','Error\x20opening\x20quick\x20edit\x20modal:','Auth:','demotion','querySelectorAll','checked','quick-edit-points-modal','Adding\x20simple\x20test\x20match...','highlight-loser-name','\x20in\x20all\x20collections...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x27</td>','loserDemoLink','Error\x20in\x20demotion:','eloHistoryD3','achievement','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','ribbons','manage-points','manage-matches','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','manage-trophies','approvedMatchesD2','#e0e0e0','matchInfo','then','Silver','user-ribbon-management','playerId','rarity','Unknown\x20User','edit-username','points-amount','\x20quick\x20edit\x20buttons'];a2_0x3c36=function(){return _0x23abf1;};return a2_0x3c36();}async function deleteMatch(_0x1eff1d,_0x4bc273){const _0x4d679d=a2_0x279dcd;try{console['log']('Deleting\x20match\x20'+_0x1eff1d+'\x20from\x20'+_0x4bc273+_0x4d679d(0x230));const _0x3d18b6=auth[_0x4d679d(0xe0)];if(!_0x3d18b6){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches',_0x4d679d(0x221));return;}const _0x483d15=_0x4bc273==='D1'?'approvedMatches':_0x4bc273==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0x483d15),showNotification(_0x4d679d(0x197),'info'),await deleteDoc(doc(db,_0x483d15,_0x1eff1d)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x32df96=_0x4bc273[_0x4d679d(0xbb)]();loadMatchesData(matchesPagination[_0x32df96]['page']);}catch(_0x45f0ae){console['error']('Error\x20deleting\x20match:',_0x45f0ae),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x45f0ae[_0x4d679d(0x144)],_0x4d679d(0x221));}}function setupMatchesActionButtons(){const _0x556c76=a2_0x279dcd;console[_0x556c76(0x175)]('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll'](_0x556c76(0x174))[_0x556c76(0x257)](_0x95873f=>{const _0x2e3bba=_0x556c76;_0x95873f[_0x2e3bba(0x29c)]('click',_0x299643=>{const _0x437f21=_0x2e3bba;_0x299643['preventDefault'](),_0x299643['stopPropagation']();const _0x54c5b5=_0x299643['currentTarget']['dataset']['id'],_0x590862=_0x299643['currentTarget']['closest']('tr'),_0x4a22e2=_0x590862[_0x437f21(0xde)][_0x437f21(0x27b)];console['log']('Edit\x20match\x20clicked:',_0x54c5b5,_0x4a22e2),openEditMatchModal(_0x54c5b5,_0x4a22e2);});}),document['querySelectorAll']('.delete-match-btn')['forEach'](_0x186d3a=>{const _0x13e5da=_0x556c76;_0x186d3a['addEventListener'](_0x13e5da(0x1b8),_0x229cf1=>{const _0xc3bba7=_0x13e5da;_0x229cf1['preventDefault'](),_0x229cf1[_0xc3bba7(0x199)]();const _0x28b590=_0x229cf1['currentTarget']['dataset']['id'],_0x42933e=_0x229cf1['currentTarget']['closest']('tr'),_0x36df07=_0x42933e['dataset']['ladder']||currentLadder;console[_0xc3bba7(0x175)](_0xc3bba7(0x119),_0x28b590,_0x36df07),confirm(_0xc3bba7(0x9f))&&deleteMatch(_0x28b590,_0x36df07);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x12ce88=a2_0x279dcd,_0x448f90=document['getElementById'](_0x12ce88(0x186))['value']['toLowerCase'](),_0x557555=document['querySelectorAll']('#matches-table-body\x20tr');let _0x257544=0x0;_0x557555['forEach'](_0x15da17=>{const _0x36cb66=_0x12ce88;if(_0x15da17['classList']['contains']('loading-cell')||_0x15da17['classList']['contains']('empty-state')||_0x15da17['classList']['contains'](_0x36cb66(0x2c0)))return;const _0x3b297e=_0x15da17['cells'][0x1]['textContent']['toLowerCase'](),_0x566ca2=_0x15da17['cells'][0x2]['textContent']['toLowerCase'](),_0x56fe38=_0x15da17['cells'][0x4]['textContent'][_0x36cb66(0xbb)]();_0x3b297e['includes'](_0x448f90)||_0x566ca2['includes'](_0x448f90)||_0x56fe38['includes'](_0x448f90)?(_0x15da17[_0x36cb66(0x20b)]['display']='',_0x257544++):_0x15da17['style']['display']='none';});if(_0x257544===0x0&&_0x557555['length']>0x0){const _0x55683a=document['getElementById']('matches-table-body'),_0x1d6928=_0x55683a['querySelector']('.no-results');if(!_0x1d6928){const _0x1d798c=document[_0x12ce88(0xce)]('tr');_0x1d798c[_0x12ce88(0xfa)]=_0x12ce88(0x105),_0x1d798c[_0x12ce88(0x20a)]='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x448f90+_0x12ce88(0x2cb),_0x55683a[_0x12ce88(0x182)](_0x1d798c);}}else{const _0x27e2d1=document['querySelector']('.no-results');_0x27e2d1&&_0x27e2d1['remove']();}}function getMatchesFilters(){const _0x1699f7=a2_0x279dcd,_0x537e7f=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x45b3d2=document[_0x1699f7(0x16a)]('matches-start-date')['value'],_0x2fea41=document[_0x1699f7(0x16a)](_0x1699f7(0x103))[_0x1699f7(0x1fb)];let _0x3321e5=null,_0x869ea3=null;return _0x45b3d2&&(_0x3321e5=new Date(_0x45b3d2),_0x3321e5['setHours'](0x0,0x0,0x0,0x0),_0x3321e5=Timestamp[_0x1699f7(0x87)](_0x3321e5)),_0x2fea41&&(_0x869ea3=new Date(_0x2fea41),_0x869ea3['setHours'](0x17,0x3b,0x3b,0x3e7),_0x869ea3=Timestamp['fromDate'](_0x869ea3)),{'searchTerm':_0x537e7f,'startDate':_0x3321e5,'endDate':_0x869ea3};}async function applyMatchesFilters(){const _0x36b94e=currentLadder['toLowerCase']();matchesPagination[_0x36b94e]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x38b175=a2_0x279dcd;document['getElementById']('matches-start-date')['value']='',document['getElementById'](_0x38b175(0x103))[_0x38b175(0x1fb)]='',document['getElementById']('matches-search')['value']='';const _0x27cca7=currentLadder['toLowerCase']();matchesPagination[_0x27cca7]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x22e765,_0x36931a){const _0x559d35=a2_0x279dcd,_0x3682d1=document['getElementById']('edit-match-modal');if(!_0x3682d1)return;try{const _0x5a06ab=_0x36931a==='D1'?'approvedMatches':_0x36931a==='D2'?_0x559d35(0x2d6):_0x559d35(0x1d5),_0x1259a9=doc(db,_0x5a06ab,_0x22e765),_0x28a66b=await getDoc(_0x1259a9);if(!_0x28a66b[_0x559d35(0x122)]()){showNotification('Match\x20not\x20found','error');return;}const _0x2a4b67=_0x28a66b[_0x559d35(0x270)]();document['getElementById']('edit-match-id')[_0x559d35(0x1fb)]=_0x22e765,document['getElementById']('edit-match-ladder')[_0x559d35(0x1fb)]=_0x36931a,document['getElementById']('edit-match-winner')['value']=_0x2a4b67['winnerUsername']||'',document['getElementById']('edit-match-winner-score')[_0x559d35(0x1fb)]=_0x2a4b67['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0x2a4b67[_0x559d35(0x196)]||0x0,document[_0x559d35(0x16a)]('edit-match-winner-comment')['value']=_0x2a4b67['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x2a4b67['loserUsername']||'',document['getElementById']('edit-match-loser-score')['value']=_0x2a4b67[_0x559d35(0x26e)]||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0x2a4b67['loserSuicides']||0x0,document[_0x559d35(0x16a)](_0x559d35(0xe6))['value']=_0x2a4b67['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0x2a4b67['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')['value']=_0x2a4b67['winnerDemoLink']||'',document['getElementById'](_0x559d35(0x273))['value']=_0x2a4b67[_0x559d35(0x2cc)]||_0x2a4b67['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x2a4b67['winnerUsername']+_0x559d35(0x10f)+_0x2a4b67['loserUsername'],_0x3682d1[_0x559d35(0x22c)]['add'](_0x559d35(0x8f));}catch(_0x36bc57){console['error'](_0x559d35(0x276),_0x36bc57),showNotification('Failed\x20to\x20load\x20match\x20data',_0x559d35(0x221));}}function closeEditMatchModal(){const _0x46d2f2=a2_0x279dcd,_0x5f3316=document[_0x46d2f2(0x16a)]('edit-match-modal');_0x5f3316&&_0x5f3316['classList']['remove']('active');}async function saveEditedMatch(){const _0x3fef3d=a2_0x279dcd;try{const _0x30d20b=document['getElementById']('edit-match-id')[_0x3fef3d(0x1fb)],_0x273274=document['getElementById']('edit-match-ladder')['value'];if(!_0x30d20b||!_0x273274){showNotification(_0x3fef3d(0x223),_0x3fef3d(0x221));return;}const _0x496e42=_0x273274==='D1'?'approvedMatches':_0x273274==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5d4fee=document['getElementById'](_0x3fef3d(0x297))['value'][_0x3fef3d(0x232)](),_0x3478e1=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x5a679e=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x3e4803=document[_0x3fef3d(0x16a)]('edit-match-winner-comment')[_0x3fef3d(0x1fb)]['trim'](),_0x3b8d5d=document['getElementById']('edit-match-loser')['value'][_0x3fef3d(0x232)](),_0x2214f7=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x207ba9=parseInt(document['getElementById']('edit-match-loser-suicides')[_0x3fef3d(0x1fb)]),_0x197505=document['getElementById'](_0x3fef3d(0xe6))['value']['trim'](),_0x4d21ee=document['getElementById']('edit-match-map')['value']['trim'](),_0x4335e9=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x578767=document['getElementById'](_0x3fef3d(0x273))[_0x3fef3d(0x1fb)]['trim']();if(!_0x5d4fee||!_0x3b8d5d){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x496e42,_0x30d20b),{'winnerUsername':_0x5d4fee,'winnerScore':_0x3478e1,'winnerSuicides':_0x5a679e,'winnerComment':_0x3e4803,'loserUsername':_0x3b8d5d,'loserScore':_0x2214f7,'loserSuicides':_0x207ba9,'loserComment':_0x197505,'mapPlayed':_0x4d21ee,'winnerDemoLink':_0x4335e9||null,'loserDemoLink':_0x578767||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x273274['toLowerCase']()]['page']);}catch(_0x1db1a1){console['error']('Error\x20saving\x20match:',_0x1db1a1),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x1db1a1[_0x3fef3d(0x144)],'error');}}async function openDeleteMatchModal(_0x2fb836,_0x2047be){const _0x4ab3d3=a2_0x279dcd;try{const _0x17c40f=_0x2047be==='D1'?'approvedMatches':_0x2047be==='D2'?'approvedMatchesD2':_0x4ab3d3(0x1d5),_0xd3d9a5=doc(db,_0x17c40f,_0x2fb836),_0x2c2150=await getDoc(_0xd3d9a5);if(!_0x2c2150['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x50127f=_0x2c2150[_0x4ab3d3(0x270)](),_0x4a750b=document['getElementById']('delete-match-confirm-modal');_0x4a750b['dataset']['matchId']=_0x2fb836,_0x4a750b['dataset'][_0x4ab3d3(0x27b)]=_0x2047be;const _0x2db0c8=_0x50127f['approvedAt']?new Date(_0x50127f['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x47209d=document['getElementById'](_0x4ab3d3(0xdf));_0x47209d['innerHTML']=_0x4ab3d3(0x246)+_0x2db0c8+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x50127f['winnerUsername']+_0x4ab3d3(0x13a)+_0x50127f[_0x4ab3d3(0x129)]+_0x4ab3d3(0x13b)+(_0x50127f[_0x4ab3d3(0x84)]||0x0)+'\x20-\x20'+(_0x50127f[_0x4ab3d3(0x26e)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x50127f['mapPlayed']||_0x4ab3d3(0x236))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x2047be+_0x4ab3d3(0x24c),_0x4a750b['classList'][_0x4ab3d3(0x18e)]('active');}catch(_0x338caf){console['error'](_0x4ab3d3(0x167),_0x338caf),showNotification(_0x4ab3d3(0x2aa),'error');}}function closeDeleteMatchModal(){const _0x4161ec=a2_0x279dcd,_0x534c82=document[_0x4161ec(0x16a)]('delete-match-confirm-modal');_0x534c82&&(_0x534c82['classList'][_0x4161ec(0x1ad)]('active'),_0x534c82[_0x4161ec(0x1b4)]('data-match-id'),_0x534c82['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x11ccb1=a2_0x279dcd,_0x17e0b9=document['getElementById']('delete-match-confirm-modal'),_0x3deed4=_0x17e0b9['dataset']['matchId'],_0x2f51c3=_0x17e0b9['dataset']['ladder'];if(!_0x3deed4||!_0x2f51c3){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x4450f1=_0x2f51c3==='D1'?_0x11ccb1(0x277):_0x2f51c3==='D2'?_0x11ccb1(0x2d6):'approvedMatchesD3';await deleteDoc(doc(db,_0x4450f1,_0x3deed4)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x2f51c3['toLowerCase']()]['page']);}catch(_0x3f2f37){console['error']('Error\x20deleting\x20match:',_0x3f2f37),showNotification(_0x11ccb1(0x158)+_0x3f2f37['message'],'error');}}async function saveHighlightChanges(){const _0x5d6ff0=a2_0x279dcd,_0x3a4cb4=document['getElementById']('edit-highlight-id')['value'],_0xc48aff=document[_0x5d6ff0(0x16a)]('edit-highlight-type-select')['value'];let _0x59dbc6={'title':document['getElementById']('edit-highlight-title-input')[_0x5d6ff0(0x1fb)]['trim'](),'type':_0xc48aff,'description':document['getElementById']('edit-highlight-description-input')[_0x5d6ff0(0x1fb)][_0x5d6ff0(0x232)](),'videoId':document[_0x5d6ff0(0x16a)]('edit-highlight-videoId-input')['value'][_0x5d6ff0(0x232)](),'submittedBy':auth[_0x5d6ff0(0xe0)][_0x5d6ff0(0x1b5)]};if(_0xc48aff==='match'){_0x59dbc6['matchInfo']=document['getElementById'](_0x5d6ff0(0x1c3))['value']['trim'](),_0x59dbc6['map']=document['getElementById']('edit-highlight-map-input')['value']['trim']();const _0x1c9750=document[_0x5d6ff0(0x16a)]('edit-highlight-matchDate-input')['value'];_0x59dbc6[_0x5d6ff0(0x237)]=_0x1c9750?Timestamp['fromDate'](new Date(_0x1c9750)):null,_0x59dbc6[_0x5d6ff0(0x85)]=document[_0x5d6ff0(0x16a)]('edit-highlight-winnerName-input')['value'][_0x5d6ff0(0x232)](),_0x59dbc6['winnerScore']=document['getElementById'](_0x5d6ff0(0x11e))['value']['trim'](),_0x59dbc6[_0x5d6ff0(0x2b8)]=document[_0x5d6ff0(0x16a)](_0x5d6ff0(0x1c4))['value'][_0x5d6ff0(0x232)](),_0x59dbc6['loserScore']=document['getElementById']('edit-highlight-loserScore-input')[_0x5d6ff0(0x1fb)]['trim'](),_0x59dbc6[_0x5d6ff0(0x11a)]=document[_0x5d6ff0(0x16a)]('edit-highlight-matchLink-input')['value']['trim'](),_0x59dbc6['mapCreator']=null,_0x59dbc6['mapVersion']=null,_0x59dbc6['creatorImageUrl']=null,_0x59dbc6['achievementPlayer']=null,_0x59dbc6['achievementType']=null,_0x59dbc6[_0x5d6ff0(0x2b6)]=null,_0x59dbc6['playerProfileUrl']=null;}else{if(_0xc48aff==='creator')_0x59dbc6['map']=document[_0x5d6ff0(0x16a)]('edit-highlight-map-input')['value']['trim'](),_0x59dbc6['mapCreator']=document[_0x5d6ff0(0x16a)]('edit-highlight-mapCreator-input')['value']['trim'](),_0x59dbc6['mapVersion']=document['getElementById'](_0x5d6ff0(0x1ef))['value'][_0x5d6ff0(0x232)](),_0x59dbc6['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')['value'][_0x5d6ff0(0x232)](),_0x59dbc6[_0x5d6ff0(0x2d8)]=null,_0x59dbc6['matchDate']=null,_0x59dbc6['winnerName']=null,_0x59dbc6['winnerScore']=null,_0x59dbc6[_0x5d6ff0(0x2b8)]=null,_0x59dbc6['loserScore']=null,_0x59dbc6['matchLink']=null,_0x59dbc6['achievementPlayer']=null,_0x59dbc6['achievementType']=null,_0x59dbc6['achievementDetails']=null,_0x59dbc6[_0x5d6ff0(0x2a4)]=null;else _0xc48aff===_0x5d6ff0(0x2cf)&&(_0x59dbc6['achievementPlayer']=document[_0x5d6ff0(0x16a)]('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x59dbc6['achievementType']=document[_0x5d6ff0(0x16a)]('edit-highlight-achievementType-input')['value']['trim'](),_0x59dbc6[_0x5d6ff0(0x2b6)]=document['getElementById']('edit-highlight-achievementDetails-input')['value']['trim'](),_0x59dbc6[_0x5d6ff0(0x2a4)]=document[_0x5d6ff0(0x16a)]('edit-highlight-playerProfileUrl-input')[_0x5d6ff0(0x1fb)]['trim'](),_0x59dbc6['matchInfo']=null,_0x59dbc6[_0x5d6ff0(0x29b)]=null,_0x59dbc6['matchDate']=null,_0x59dbc6[_0x5d6ff0(0x85)]=null,_0x59dbc6['winnerScore']=null,_0x59dbc6['loserName']=null,_0x59dbc6['loserScore']=null,_0x59dbc6['matchLink']=null,_0x59dbc6[_0x5d6ff0(0x143)]=null,_0x59dbc6['mapVersion']=null,_0x59dbc6['creatorImageUrl']=null);}try{if(_0x3a4cb4){_0x59dbc6[_0x5d6ff0(0x149)]=serverTimestamp();const _0x290f40=doc(db,'highlights',_0x3a4cb4);await updateDoc(_0x290f40,_0x59dbc6),showNotification('Highlight\x20updated\x20successfully!',_0x5d6ff0(0x1f7));}else _0x59dbc6['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x59dbc6),showNotification('Highlight\x20added\x20successfully!',_0x5d6ff0(0x1f7));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x3b3fe6){console['error'](_0x5d6ff0(0x145),_0x3b3fe6),showNotification(_0x5d6ff0(0x140)+_0x3b3fe6['message'],_0x5d6ff0(0x221));}}async function resimulateMatch(){const _0x33c44c=a2_0x279dcd;try{const _0x4a573a=document[_0x33c44c(0x16a)]('resimulate-match-id')['value'];if(!_0x4a573a){showNotification(_0x33c44c(0x156),_0x33c44c(0x221));return;}const _0x3c4fe6=auth[_0x33c44c(0xe0)];if(!_0x3c4fe6){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x6f0b74=currentLadder==='D1'?_0x33c44c(0x277):currentLadder==='D2'?_0x33c44c(0x2d6):'approvedMatchesD3',_0x16e978=doc(db,_0x6f0b74,_0x4a573a),_0x4e9066=await getDoc(_0x16e978);if(!_0x4e9066[_0x33c44c(0x122)]()){showNotification(_0x33c44c(0x194),_0x33c44c(0x221));return;}const _0xbeabc3=_0x4e9066['data'](),_0x975427=_0xbeabc3['approvedAt']?_0xbeabc3['approvedAt']['toDate']()['toLocaleString']():_0xbeabc3['matchDate']?_0xbeabc3['matchDate'][_0x33c44c(0x160)]?_0xbeabc3['matchDate'][_0x33c44c(0x160)]()['toLocaleString']():new Date(_0xbeabc3[_0x33c44c(0x237)])['toLocaleString']():'Unknown',_0x1b4d1b='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0xbeabc3[_0x33c44c(0x98)]+_0x33c44c(0x208)+_0xbeabc3['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0xbeabc3['winnerScore']+'-'+_0xbeabc3[_0x33c44c(0x26e)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0xbeabc3['mapPlayed']||_0xbeabc3['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x975427+_0x33c44c(0xa4)+_0x4a573a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')['innerHTML']=_0x1b4d1b,document[_0x33c44c(0x16a)]('match-details-container')['style']['display']='block',document[_0x33c44c(0x16a)]('confirm-resimulate-btn')[_0x33c44c(0x20b)]['display']='block',window['pendingResimulateData']={'matchId':_0x4a573a,'matchData':_0xbeabc3,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x8474f2){console['error']('Error\x20finding\x20match:',_0x8474f2),showNotification(_0x33c44c(0xcc)+_0x8474f2[_0x33c44c(0x144)],'error');}}async function confirmResimulateMatch(){const _0x55c756=a2_0x279dcd;try{const {matchId:_0x35bbea,matchData:_0x3a3e7e,ladder:_0x33b74b}=window['pendingResimulateData'];if(!_0x35bbea||!_0x3a3e7e){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x443fad=_0x33b74b==='D1'?_0x55c756(0x97):_0x33b74b==='D2'?'playersD2':'playersD3',_0x82443e=_0x33b74b==='D1'?'eloHistory':_0x33b74b==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x5af188,_0x214c98]=await Promise['all']([getDocs(query(collection(db,_0x443fad),where('username','==',_0x3a3e7e[_0x55c756(0x98)]))),getDocs(query(collection(db,_0x443fad),where('username','==',_0x3a3e7e['loserUsername'])))]);if(_0x5af188['empty']||_0x214c98[_0x55c756(0x260)]){showNotification(_0x55c756(0x25a),'error');return;}const _0x14a77f=_0x5af188['docs'][0x0]['id'],_0x43944e=_0x214c98[_0x55c756(0x28c)][0x0]['id'],_0x21efe4=_0x5af188['docs'][0x0]['data'](),_0x48cdb0=_0x214c98['docs'][0x0]['data'](),[_0x1f180a,_0x5ae12f]=await Promise[_0x55c756(0x191)]([getDocs(query(collection(db,_0x82443e),where('playerId','==',_0x14a77f),where(_0x55c756(0x14d),'==',_0x35bbea))),getDocs(query(collection(db,_0x82443e),where('playerId','==',_0x43944e),where('matchId','==',_0x35bbea)))]),_0x62fda0=!_0x1f180a[_0x55c756(0x260)],_0x34ab7d=!_0x5ae12f[_0x55c756(0x260)],_0x22d9f0='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x62fda0?_0x55c756(0x1cb):'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x34ab7d?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x21efe4['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x48cdb0[_0x55c756(0x1ae)]||'Unknown')+_0x55c756(0x183)+(_0x21efe4['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x48cdb0[_0x55c756(0x1f2)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x22d9f0,document['getElementById']('validation-results-container')[_0x55c756(0x20b)]['display']=_0x55c756(0x21c);if(_0x62fda0&&_0x34ab7d){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification(_0x55c756(0x14b),_0x55c756(0x165));const _0x3fe63c=_0x3a3e7e['approvedAt']||_0x3a3e7e['matchDate']||serverTimestamp(),[_0x5a54be,_0x5945b3]=await Promise['all']([getPlayerEloAtTime(_0x14a77f,_0x3fe63c,_0x82443e),getPlayerEloAtTime(_0x43944e,_0x3fe63c,_0x82443e)]),{calculateElo:_0x321ab1}=await import('./ladderalgorithm.js'),{newWinnerRating:_0xa4d1ef,newLoserRating:_0x4d8547}=_0x321ab1(_0x5a54be,_0x5945b3),_0x49850b=_0x21efe4[_0x55c756(0x1f2)]||Number['MAX_SAFE_INTEGER'],_0x23d0b6=_0x48cdb0['position']||Number['MAX_SAFE_INTEGER'];let _0x2be988=_0x49850b,_0x324dfa=_0x23d0b6;_0x49850b>_0x23d0b6&&(_0x2be988=_0x23d0b6,_0x324dfa=_0x23d0b6+0x1);const _0x1dae0a=writeBatch(db),_0x2ce3be=doc(db,_0x443fad,_0x14a77f);_0x1dae0a[_0x55c756(0xb8)](_0x2ce3be,{'eloRating':_0xa4d1ef,'position':_0x2be988,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x31c04d=doc(db,_0x443fad,_0x43944e);_0x1dae0a['update'](_0x31c04d,{'eloRating':_0x4d8547,'position':_0x324dfa,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x49850b>_0x23d0b6){const _0x5e6544=await getDocs(query(collection(db,_0x443fad),where('position','>',_0x23d0b6),where('position','<',_0x49850b)));_0x5e6544['forEach'](_0x4e3717=>{const _0x73b158=_0x55c756,_0x9ec4c=doc(db,_0x443fad,_0x4e3717['id']),_0xbd755d=_0x4e3717[_0x73b158(0x270)]()[_0x73b158(0x1f2)];_0x1dae0a[_0x73b158(0xb8)](_0x9ec4c,{'position':_0xbd755d+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x62fda0){const _0x4e56f8=doc(collection(db,_0x82443e));_0x1dae0a['set'](_0x4e56f8,{'playerId':_0x14a77f,'player':_0x3a3e7e[_0x55c756(0x98)],'previousElo':_0x5a54be,'newElo':_0xa4d1ef,'eloChange':_0xa4d1ef-_0x5a54be,'opponentId':_0x43944e,'opponent':_0x3a3e7e[_0x55c756(0x129)],'matchResult':_0x55c756(0x295),'previousPosition':_0x49850b,'newPosition':_0x2be988,'positionChange':_0x2be988-_0x49850b,'matchId':_0x35bbea,'timestamp':_0x3fe63c,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x55c756(0xfd)],'gameMode':_0x33b74b,'matchScore':_0x3a3e7e[_0x55c756(0x84)]+'-'+_0x3a3e7e[_0x55c756(0x26e)],'mapPlayed':_0x3a3e7e['mapPlayed']||_0x3a3e7e['mapName']||'Unknown','note':_0x55c756(0x190)});}if(!_0x34ab7d){const _0x4c80e8=doc(collection(db,_0x82443e));_0x1dae0a['set'](_0x4c80e8,{'playerId':_0x43944e,'player':_0x3a3e7e['loserUsername'],'previousElo':_0x5945b3,'newElo':_0x4d8547,'eloChange':_0x4d8547-_0x5945b3,'opponentId':_0x14a77f,'opponent':_0x3a3e7e['winnerUsername'],'matchResult':'loss','previousPosition':_0x23d0b6,'newPosition':_0x324dfa,'positionChange':_0x324dfa-_0x23d0b6,'matchId':_0x35bbea,'timestamp':_0x3fe63c,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x55c756(0xe0)]['uid'],'gameMode':_0x33b74b,'matchScore':_0x3a3e7e['winnerScore']+'-'+_0x3a3e7e['loserScore'],'mapPlayed':_0x3a3e7e[_0x55c756(0xd6)]||_0x3a3e7e['mapName']||'Unknown','note':_0x55c756(0x190)});}const _0x58a801=_0x33b74b==='D1'?'approvedMatches':_0x33b74b==='D2'?'approvedMatchesD2':_0x55c756(0x1d5),_0x20706a=doc(db,_0x58a801,_0x35bbea);_0x1dae0a['update'](_0x20706a,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x21efe4[_0x55c756(0x1ae)],'originalLoserElo':_0x48cdb0['eloRating'],'originalWinnerPosition':_0x49850b,'originalLoserPosition':_0x23d0b6,'resimulatedWinnerElo':_0xa4d1ef,'resimulatedLoserElo':_0x4d8547,'resimulatedWinnerPosition':_0x2be988,'resimulatedLoserPosition':_0x324dfa}),await _0x1dae0a['commit']();const _0x20ac62=(!_0x62fda0?0x1:0x0)+(!_0x34ab7d?0x1:0x0),_0x52c922=_0x49850b!==_0x2be988||_0x23d0b6!==_0x324dfa;showNotification(_0x55c756(0x2a2)+('Created\x20'+_0x20ac62+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x5a54be+''+_0xa4d1ef+'\x20(+'+(_0xa4d1ef-_0x5a54be)+_0x55c756(0x17c))+('Loser\x20'+_0x5945b3+''+_0x4d8547+'\x20('+(_0x4d8547-_0x5945b3)+_0x55c756(0x25b))+(''+(_0x52c922?'Positions\x20updated:\x20Winner\x20'+_0x49850b+''+_0x2be988+',\x20Loser\x20'+_0x23d0b6+''+_0x324dfa:_0x55c756(0xd5))),_0x55c756(0x1f7)),closeResimulateModal(),document['querySelector'](_0x55c756(0xcf))&&loadPlayersData();}catch(_0x1beb93){console['error']('Error\x20resimulating\x20match:',_0x1beb93),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x1beb93['message'],_0x55c756(0x221));}}async function getPlayerEloAtTime(_0x26416e,_0x998b4e,_0x18c5fd){const _0x3d9fb0=a2_0x279dcd;try{const _0x27bfe5=_0x998b4e[_0x3d9fb0(0x160)]?_0x998b4e[_0x3d9fb0(0x160)]():new Date(_0x998b4e),_0xff5107=query(collection(db,_0x18c5fd),where('playerId','==',_0x26416e),where('timestamp','<',_0x998b4e),orderBy('timestamp','desc'),limit(0x1)),_0x3c6db6=await getDocs(_0xff5107);if(!_0x3c6db6['empty']){const _0x36aed2=_0x3c6db6['docs'][0x0]['data']();return console['log'](_0x3d9fb0(0x229)+_0x26416e+'\x20before\x20match:\x20'+_0x36aed2['newElo']),_0x36aed2[_0x3d9fb0(0x1a8)];}else return console[_0x3d9fb0(0x175)]('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x26416e+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x141213){return console[_0x3d9fb0(0x221)](_0x3d9fb0(0x205)+_0x26416e+':',_0x141213),0x4b0;}}function openResimulateModal(){const _0xb56520=a2_0x279dcd;console['log']('openResimulateModal\x20called!');const _0xa28cd1=document['getElementById']('resimulate-modal');console[_0xb56520(0x175)]('Modal\x20element\x20found:',_0xa28cd1);if(!_0xa28cd1){console['error']('Modal\x20element\x20not\x20found!');return;}_0xa28cd1['style'][_0xb56520(0x24d)]='block',_0xa28cd1[_0xb56520(0x20b)]['visibility']='visible',_0xa28cd1['style'][_0xb56520(0x227)]='1',_0xa28cd1['classList'][_0xb56520(0x18e)](_0xb56520(0x8f)),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window['getComputedStyle'](_0xa28cd1)['display']);const _0xfa5d7c=document[_0xb56520(0x16a)](_0xb56520(0xe7)),_0x33ab94=document[_0xb56520(0x16a)]('validation-results-container'),_0x18b4b2=document['getElementById'](_0xb56520(0x155)),_0x4f0fb4=document['getElementById']('resimulate-match-id');if(_0xfa5d7c)_0xfa5d7c[_0xb56520(0x20a)]='';if(_0x33ab94)_0x33ab94['innerHTML']='';if(_0x18b4b2)_0x18b4b2['style'][_0xb56520(0x24d)]='none';if(_0x4f0fb4)_0x4f0fb4[_0xb56520(0x1fb)]='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x46a847=a2_0x279dcd;document['getElementById']('resimulate-modal')[_0x46a847(0x20b)]['display']=_0x46a847(0x18a),window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window[a2_0x279dcd(0x20c)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x5a6ba5=a2_0x279dcd;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x542db9){console['error']('Error\x20loading\x20points\x20data:',_0x542db9),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x542db9[_0x5a6ba5(0x144)],_0x5a6ba5(0x221));}}function renderPointsOverview(_0x2c0b4f){const _0xc94b6a=a2_0x279dcd,_0x139381=document['getElementById']('points-overview-table-body');if(!_0x139381)return;if(_0x2c0b4f['length']===0x0){_0x139381[_0xc94b6a(0x20a)]=_0xc94b6a(0x193);return;}_0x139381[_0xc94b6a(0x20a)]='',_0x2c0b4f['forEach'](_0x1ef8f8=>{const _0xeae292=_0xc94b6a,_0x2c45b1=document['createElement']('tr'),_0x190ed7=_0x1ef8f8[_0xeae292(0x125)]||_0x1ef8f8['username']||_0xeae292(0x2de),_0x4fffac=_0x1ef8f8['email']||'No\x20email',_0x3c65cc=_0x1ef8f8['points']||0x0,_0x11d05c=_0x1ef8f8['lastPointsModified']?new Date(_0x1ef8f8[_0xeae292(0xab)]['seconds']*0x3e8)['toLocaleDateString']():_0xeae292(0x1eb);_0x2c45b1[_0xeae292(0x20a)]=_0xeae292(0x241)+_0x190ed7+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4fffac+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x3c65cc>0x3e8?'high-points':_0x3c65cc>0x1f4?_0xeae292(0x148):'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x3c65cc['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x11d05c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x1ef8f8['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x1ef8f8['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x139381[_0xeae292(0x182)](_0x2c45b1);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x4b51e2=a2_0x279dcd;console['log'](_0x4b51e2(0x95));const _0x121a55=document[_0x4b51e2(0x2c4)]('.quick-edit-btn');console['log']('Found\x20'+_0x121a55['length']+_0x4b51e2(0x2e1)),_0x121a55['forEach'](_0x1cf2b1=>{const _0x2a3578=_0x1cf2b1['cloneNode'](!![]);_0x1cf2b1['parentNode']['replaceChild'](_0x2a3578,_0x1cf2b1);});const _0x35ae7a=document['querySelectorAll'](_0x4b51e2(0x12f));console[_0x4b51e2(0x175)]('Found\x20'+_0x35ae7a['length']+_0x4b51e2(0x19c)),_0x35ae7a['forEach'](_0x222993=>{const _0x4f03b1=_0x222993['cloneNode'](!![]);_0x222993['parentNode']['replaceChild'](_0x4f03b1,_0x222993);}),document['querySelectorAll'](_0x4b51e2(0x215))['forEach'](_0x57f194=>{_0x57f194['addEventListener']('click',function(_0x4e2061){const _0x445bd7=a2_0x256f;_0x4e2061['preventDefault'](),_0x4e2061['stopPropagation']();const _0x2f7fb3=this[_0x445bd7(0xde)][_0x445bd7(0x123)];console[_0x445bd7(0x175)]('Quick\x20edit\x20clicked\x20for\x20user:',_0x2f7fb3);if(!_0x2f7fb3){console[_0x445bd7(0x221)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']=_0x445bd7(0x225),setTimeout(()=>{const _0x4abb06=_0x445bd7;this[_0x4abb06(0x20b)][_0x4abb06(0x227)]='1';},0xc8),openQuickEditModal(_0x2f7fb3);});}),document[_0x4b51e2(0x2c4)]('.view-history-btn')['forEach'](_0x1a4f92=>{const _0x3a218a=_0x4b51e2;_0x1a4f92['addEventListener'](_0x3a218a(0x1b8),function(_0x22c76f){const _0x82febb=_0x3a218a;_0x22c76f[_0x82febb(0x166)](),_0x22c76f[_0x82febb(0x199)]();const _0x4b97c4=this[_0x82febb(0xde)][_0x82febb(0x123)];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x4b97c4);if(!_0x4b97c4){console['error'](_0x82febb(0x1c8));return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x4b97c4);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x5be405){const _0x122bbf=a2_0x279dcd;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x5be405);const _0xbd60ff=document['getElementById'](_0x122bbf(0x2c6));if(!_0xbd60ff){console[_0x122bbf(0x221)](_0x122bbf(0x132)),showNotification(_0x122bbf(0x1ce),_0x122bbf(0x221));return;}try{showNotification(_0x122bbf(0x256),'info');const _0x429085=doc(db,'userProfiles',_0x5be405),_0xad1fd=await getDoc(_0x429085);if(!_0xad1fd['exists']()){showNotification(_0x122bbf(0x28a),'error');return;}const _0x281625=_0xad1fd['data']();console['log']('User\x20data\x20loaded:',_0x281625);const _0x2b18d2=document['getElementById']('quick-edit-user-id'),_0x2d6e73=document[_0x122bbf(0x16a)]('quick-edit-display-name'),_0x1d3fba=document[_0x122bbf(0x16a)]('quick-edit-email'),_0x1562ee=document['getElementById']('quick-edit-current-points'),_0x191dd3=document[_0x122bbf(0x16a)]('quick-edit-points-form');if(!_0x2b18d2||!_0x2d6e73||!_0x1d3fba||!_0x1562ee||!_0x191dd3){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x122bbf(0x20e),_0x122bbf(0x221));return;}_0x2b18d2[_0x122bbf(0x1fb)]=_0x5be405,_0x2d6e73['textContent']=_0x281625['displayName']||_0x281625['username']||'Unknown\x20User',_0x1d3fba[_0x122bbf(0x290)]=_0x281625['email']||_0x122bbf(0xd2),_0x1562ee[_0x122bbf(0x290)]=(_0x281625[_0x122bbf(0x1d4)]||0x0)[_0x122bbf(0x126)](),_0x191dd3['reset']();const _0x397e05=document['getElementById']('quick-add');_0x397e05&&(_0x397e05['checked']=!![]);_0xbd60ff['classList']['add']('active'),console['log']('Modal\x20opened\x20successfully');const _0x7d5cdc=document['getElementById'](_0x122bbf(0x147));_0x7d5cdc&&setTimeout(()=>_0x7d5cdc[_0x122bbf(0x1d8)](),0x64);}catch(_0x16fc68){console[_0x122bbf(0x221)](_0x122bbf(0x2c1),_0x16fc68),showNotification(_0x122bbf(0x1dd)+_0x16fc68['message'],'error');}}function closeQuickEditModal(){const _0x270a55=a2_0x279dcd,_0xe98d48=document[_0x270a55(0x16a)]('quick-edit-points-modal');_0xe98d48&&_0xe98d48['classList']['remove'](_0x270a55(0x8f));}async function handleQuickEditPoints(_0x9edc82){const _0x156a44=a2_0x279dcd;_0x9edc82[_0x156a44(0x166)]();const _0x5a8d57=document['getElementById'](_0x156a44(0x18b))['value'],_0xf5ad60=document['querySelector'](_0x156a44(0x26b))[_0x156a44(0x1fb)],_0x111204=parseInt(document['getElementById']('quick-points-amount')['value']),_0x7aedab=document['getElementById']('quick-points-reason')['value'][_0x156a44(0x232)]();console['log']('Processing\x20points\x20edit:',{'userId':_0x5a8d57,'action':_0xf5ad60,'amount':_0x111204,'reason':_0x7aedab});if(!_0x5a8d57||!_0x111204||_0x111204<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x5a8d57,_0xf5ad60,_0x111204,_0x7aedab),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log'](_0x156a44(0x104),_0x5a8d57);}catch(_0x347e65){console[_0x156a44(0x221)]('Error\x20updating\x20points:',_0x347e65),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x347e65[_0x156a44(0x144)],'error');}}function a2_0x256f(_0x1887a6,_0x15e8fa){const _0x109e98=a2_0x3c36();return a2_0x256f=function(_0x3d85d2,_0x19ed72){_0x3d85d2=_0x3d85d2-0x82;let _0x3c366d=_0x109e98[_0x3d85d2];return _0x3c366d;},a2_0x256f(_0x1887a6,_0x15e8fa);}async function searchUsersForPoints(){const _0x312419=a2_0x279dcd,_0x330acc=document['getElementById'](_0x312419(0x271))['value'][_0x312419(0x232)]()['toLowerCase'](),_0x2bdcd5=document['getElementById'](_0x312419(0x153));if(!_0x330acc||_0x330acc['length']<0x2){_0x2bdcd5['innerHTML']='';return;}_0x2bdcd5['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x8ec157=collection(db,'userProfiles'),_0x47eed5=await getDocs(_0x8ec157),_0x2b17df=[];_0x47eed5['forEach'](_0x40931a=>{const _0x3292ee=_0x312419,_0x304709=_0x40931a['data'](),_0x2045f2=(_0x304709[_0x3292ee(0x125)]||_0x304709[_0x3292ee(0x278)]||'')['toLowerCase'](),_0x309f0b=(_0x304709['email']||'')['toLowerCase']();(_0x2045f2['includes'](_0x330acc)||_0x309f0b['includes'](_0x330acc))&&_0x2b17df['push']({'id':_0x40931a['id'],..._0x304709});});if(_0x2b17df[_0x312419(0xc6)]===0x0){_0x2bdcd5[_0x312419(0x20a)]='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x2bdcd5['innerHTML']='',_0x2b17df['forEach'](_0x289e80=>{const _0x5cc326=_0x312419,_0x3e38f8=document['createElement']('div');_0x3e38f8['className']='search-result-item',_0x3e38f8[_0x5cc326(0x20a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x289e80[_0x5cc326(0x125)]||_0x289e80[_0x5cc326(0x278)]||_0x5cc326(0x2b1))+_0x5cc326(0x2bd)+(_0x289e80[_0x5cc326(0x1b5)]||_0x5cc326(0xd2))+_0x5cc326(0x1ec)+(_0x289e80['points']||0x0)['toLocaleString']()+_0x5cc326(0x101),_0x3e38f8['addEventListener']('click',()=>selectUserForPoints(_0x289e80)),_0x2bdcd5['appendChild'](_0x3e38f8);});}catch(_0x43b382){console['error']('Error\x20searching\x20users:',_0x43b382),_0x2bdcd5['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x52700c){const _0x47c3b6=a2_0x279dcd;document['getElementById']('selected-user-name')['textContent']=_0x52700c['displayName']||_0x52700c['username']||'Unknown\x20User',document[_0x47c3b6(0x16a)](_0x47c3b6(0x14f))['textContent']=(_0x52700c['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x52700c['id'],document['getElementById'](_0x47c3b6(0x243))['style']['display']='block',document['getElementById']('points-management-forms')['style']['display']='block',document[_0x47c3b6(0x16a)]('user-search-results')['innerHTML']='',document['getElementById'](_0x47c3b6(0x271))['value']='';}async function handleModifyPoints(_0x3a14b5){const _0x1b9f97=a2_0x279dcd;_0x3a14b5[_0x1b9f97(0x166)]();const _0x38916e=document['getElementById']('selected-user-id')[_0x1b9f97(0x1fb)],_0x490134=document['getElementById']('points-action')['value'],_0x456393=parseInt(document['getElementById'](_0x1b9f97(0x2e0))['value']),_0x939657=document[_0x1b9f97(0x16a)]('points-reason')[_0x1b9f97(0x1fb)]['trim']();if(!_0x38916e||!_0x456393||_0x456393<0x0){showNotification(_0x1b9f97(0x1ff),_0x1b9f97(0x221));return;}try{await modifyUserPoints(_0x38916e,_0x490134,_0x456393,_0x939657),document[_0x1b9f97(0x16a)]('modify-points-form')[_0x1b9f97(0x178)]();const _0x470b3e=doc(db,_0x1b9f97(0x188),_0x38916e),_0x4a95e7=await getDoc(_0x470b3e);if(_0x4a95e7['exists']()){const _0x4416a4=_0x4a95e7[_0x1b9f97(0x270)]();document['getElementById']('selected-user-points')['textContent']=(_0x4416a4['points']||0x0)[_0x1b9f97(0x126)]();}showNotification('Points\x20modified\x20successfully',_0x1b9f97(0x1f7)),loadPointsHistory();}catch(_0x697835){console['error']('Error\x20modifying\x20points:',_0x697835),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x697835['message'],'error');}}async function loadPointsHistory(){const _0x5edb21=a2_0x279dcd,_0xac92f6=document['getElementById']('points-history-table-body');if(!_0xac92f6)return;_0xac92f6[_0x5edb21(0x20a)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x59ab3d=collection(db,'pointsHistory'),_0x44cbd4=query(_0x59ab3d,orderBy('timestamp','desc'),limit(0x32)),_0x505cf1=await getDocs(_0x44cbd4);if(_0x505cf1[_0x5edb21(0x260)]){_0xac92f6['innerHTML']=_0x5edb21(0x1f1);return;}_0xac92f6['innerHTML']='',_0x505cf1['forEach'](_0x1b2f4e=>{const _0x5381e3=_0x5edb21,_0x49a9de=_0x1b2f4e[_0x5381e3(0x270)](),_0x572cfa=document['createElement']('tr'),_0x480c09=_0x49a9de[_0x5381e3(0x27a)]?new Date(_0x49a9de[_0x5381e3(0x27a)]['seconds']*0x3e8)[_0x5381e3(0x126)]():'Unknown';let _0x575c86='';switch(_0x49a9de['action']){case'add':_0x575c86='Added\x20'+_0x49a9de[_0x5381e3(0x180)]+'\x20points';break;case _0x5381e3(0xc7):_0x575c86=_0x5381e3(0x131)+_0x49a9de['amount']+'\x20points';break;case'set':_0x575c86='Set\x20to\x20'+_0x49a9de['amount']+_0x5381e3(0x204);break;default:_0x575c86=_0x49a9de['action']+'\x20'+_0x49a9de['amount']+'\x20points';}_0x572cfa['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x480c09+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x49a9de['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x575c86+_0x5381e3(0xd0)+_0x49a9de['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x49a9de['previousPoints']||0x0)+'\x20\x20'+(_0x49a9de['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x49a9de['reason']||_0x5381e3(0xa6))+_0x5381e3(0x19e)+(_0x49a9de['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xac92f6['appendChild'](_0x572cfa);});}catch(_0x122fa7){console['error']('Error\x20loading\x20points\x20history:',_0x122fa7),_0xac92f6['innerHTML']=_0x5edb21(0x216)+_0x122fa7['message']+'</td></tr>';}}function filterPointsOverview(){const _0x58e396=document['getElementById']('points-overview-search')['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x2f4f1c=window['allUsersPoints']['filter'](_0x59045a=>{const _0x3e1e17=a2_0x256f,_0x24bac4=(_0x59045a['displayName']||_0x59045a['username']||'')['toLowerCase'](),_0x41160a=(_0x59045a[_0x3e1e17(0x1b5)]||'')['toLowerCase']();return _0x24bac4['includes'](_0x58e396)||_0x41160a['includes'](_0x58e396);});renderPointsOverview(_0x2f4f1c);}function sortPointsOverview(){const _0x2c8fac=a2_0x279dcd,_0x2adf58=document['getElementById']('points-sort-order')[_0x2c8fac(0x1fb)];if(!window[_0x2c8fac(0x242)])return;const _0x5cf3ee=[...window['allUsersPoints']];switch(_0x2adf58){case _0x2c8fac(0x1b0):_0x5cf3ee[_0x2c8fac(0xf2)]((_0x7a20e9,_0x3b322e)=>(_0x3b322e['points']||0x0)-(_0x7a20e9['points']||0x0));break;case _0x2c8fac(0x8a):_0x5cf3ee[_0x2c8fac(0xf2)]((_0x214943,_0x2b7797)=>(_0x214943['points']||0x0)-(_0x2b7797['points']||0x0));break;case'name-asc':_0x5cf3ee[_0x2c8fac(0xf2)]((_0x4db0ff,_0x15b9b3)=>{const _0x2c53ad=_0x2c8fac,_0x8a8618=(_0x4db0ff[_0x2c53ad(0x125)]||_0x4db0ff['username']||'')[_0x2c53ad(0xbb)](),_0x493723=(_0x15b9b3['displayName']||_0x15b9b3['username']||'')['toLowerCase']();return _0x8a8618['localeCompare'](_0x493723);});break;case _0x2c8fac(0xcb):_0x5cf3ee['sort']((_0x41db4a,_0x116a33)=>{const _0x49420b=_0x2c8fac,_0x47e516=(_0x41db4a['displayName']||_0x41db4a['username']||'')['toLowerCase'](),_0x55e182=(_0x116a33['displayName']||_0x116a33['username']||'')[_0x49420b(0xbb)]();return _0x55e182[_0x49420b(0x296)](_0x47e516);});break;}renderPointsOverview(_0x5cf3ee);}async function handleAwardItem(_0x3a432a){const _0x5dae37=a2_0x279dcd;_0x3a432a['preventDefault']();const _0x27fe77=document['getElementById'](_0x5dae37(0x1b1))['value'],_0x204547=document['getElementById']('store-item-select')['value'],_0x4a7d4f=document[_0x5dae37(0x16a)]('award-reason')[_0x5dae37(0x1fb)]['trim']();if(!_0x27fe77||!_0x204547){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById'](_0x5dae37(0x1a7))['reset']();}catch(_0x4b3f41){console[_0x5dae37(0x221)](_0x5dae37(0xba),_0x4b3f41),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x4b3f41['message'],'error');}}async function loadUserPointsHistory(_0x5e7e97){const _0x242f20=a2_0x279dcd;try{const _0x1dcc9b=collection(db,'pointsHistory'),_0x57f6d3=query(_0x1dcc9b,where(_0x242f20(0x123),'==',_0x5e7e97),orderBy(_0x242f20(0x27a),'desc')),_0x6e436e=await getDocs(_0x57f6d3);console[_0x242f20(0x175)](_0x242f20(0x1e3)+_0x6e436e[_0x242f20(0xf5)]+_0x242f20(0x171)+_0x5e7e97),showNotification('User\x20has\x20'+_0x6e436e['size']+_0x242f20(0x22e),'info');}catch(_0x4bba90){console[_0x242f20(0x221)](_0x242f20(0x1d7),_0x4bba90),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x111d15=a2_0x279dcd;try{console['log'](_0x111d15(0x20f));const _0x54aeb4=collection(db,'userProfiles'),_0x413423=await getDocs(_0x54aeb4);if(_0x413423['empty']){console[_0x111d15(0x175)](_0x111d15(0xb0));return;}let _0x317988=0x0,_0x25abf4=0x0;const _0xee5501=writeBatch(db);let _0x4f4f8d=0x0;return console['log']('Found\x20'+_0x413423['size']+'\x20users\x20to\x20check...'),_0x413423[_0x111d15(0x257)](_0x44dcff=>{const _0x5db1b5=_0x111d15,_0x4227c0=_0x44dcff['data']();_0x4227c0[_0x5db1b5(0x1d4)]===undefined||_0x4227c0['points']===null?(_0xee5501['update'](_0x44dcff['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x317988++,_0x4f4f8d++,console['log']('Queued\x20'+(_0x4227c0['displayName']||_0x4227c0['username']||_0x4227c0['email']||'Unknown')+_0x5db1b5(0x1e2))):(_0x25abf4++,console[_0x5db1b5(0x175)]((_0x4227c0['displayName']||_0x4227c0[_0x5db1b5(0x278)]||_0x4227c0[_0x5db1b5(0x1b5)]||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x4227c0['points'])),_0x4f4f8d>=0x1f4&&console[_0x5db1b5(0x198)](_0x5db1b5(0x1c0));}),_0x317988>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x317988+'\x20users...'),await _0xee5501['commit'](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x317988+'\x20users')):console[_0x111d15(0x175)]('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x413423['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x317988+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x25abf4),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x317988+'\x20users.\x20'+_0x25abf4+_0x111d15(0x120),_0x111d15(0x1f7)),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x413423[_0x111d15(0xf5)],'usersUpdated':_0x317988,'usersAlreadyHadPoints':_0x25abf4};}catch(_0x37d147){console[_0x111d15(0x221)]('Error\x20initializing\x20points\x20field:',_0x37d147),showNotification('Error\x20initializing\x20points:\x20'+_0x37d147[_0x111d15(0x144)],'error');throw _0x37d147;}}function addPointsMigrationButton(){const _0x51c3ea=a2_0x279dcd,_0xec67f0=document['getElementById'](_0x51c3ea(0x2d2));if(!_0xec67f0)return;if(document[_0x51c3ea(0x16a)]('migrate-points-btn'))return;const _0x3126e2=document[_0x51c3ea(0xce)]('div');_0x3126e2['className']='migration-section',_0x3126e2['style']['marginBottom']='20px',_0x3126e2[_0x51c3ea(0x20b)]['padding']='15px',_0x3126e2['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x3126e2['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x3126e2[_0x51c3ea(0x20b)]['borderRadius']='5px',_0x3126e2[_0x51c3ea(0x20a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x5700cb=_0xec67f0['querySelector'](_0x51c3ea(0x253));_0x5700cb&&_0x5700cb['insertAdjacentElement']('afterend',_0x3126e2),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0xb9cdd=_0x51c3ea;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']=_0xb9cdd(0x26f);try{await initializeUserPointsField(),this['innerHTML']=_0xb9cdd(0xbd),this['style']['backgroundColor']='#28a745',setTimeout(()=>{_0x3126e2['style']['display']='none';},0xbb8);}catch(_0x22134c){this[_0xb9cdd(0x20a)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x2e614c=a2_0x279dcd;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x21b643=document['getElementById']('points-user-search');_0x21b643&&_0x21b643['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x21f54f=document['getElementById']('modify-points-form');_0x21f54f&&_0x21f54f['addEventListener']('submit',handleModifyPoints);const _0x5cc5a3=document[_0x2e614c(0x16a)]('award-item-form');_0x5cc5a3&&_0x5cc5a3[_0x2e614c(0x29c)]('submit',handleAwardItem);const _0x450fc9=document['getElementById'](_0x2e614c(0x93));_0x450fc9&&_0x450fc9['addEventListener'](_0x2e614c(0x1d6),debounce(filterPointsOverview,0x12c));const _0x468228=document['getElementById']('points-sort-order');_0x468228&&_0x468228[_0x2e614c(0x29c)](_0x2e614c(0x1df),sortPointsOverview);const _0x7ee3c=document[_0x2e614c(0x16a)]('refresh-points-overview');_0x7ee3c&&_0x7ee3c['addEventListener']('click',loadPointsOverview);const _0x435d6e=document[_0x2e614c(0x16a)]('bulk-award-points-btn');_0x435d6e&&_0x435d6e['addEventListener']('click',async()=>{const _0x40f4f3=_0x2e614c;confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x435d6e['disabled']=!![],_0x435d6e['innerHTML']=_0x40f4f3(0x2ac),await _0x41a25b(),_0x435d6e[_0x40f4f3(0x99)]=![],_0x435d6e['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x27bf6e=document['getElementById'](_0x2e614c(0x1f0));_0x27bf6e&&_0x27bf6e['addEventListener']('click',awardPointsToAllPilots);async function _0x41a25b(){const _0x3456c7=_0x2e614c;try{showNotification(_0x3456c7(0x1fe),'info');const _0x238f83={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x3dc393=0x0,_0x567ecf=0x0,_0x1f695e=0x0,_0x1d66a0=0x0,_0x1a226e=0x0,_0x35f447=0x0;const _0x455376=new Set(),_0x3f5c9d=collection(db,'pointsHistory'),_0x440969=query(_0x3f5c9d,where('reason','>=','Bulk\x20award:'),where(_0x3456c7(0x152),'<=','Bulk\x20award:')),_0x1ae965=await getDocs(_0x440969);_0x1ae965['forEach'](_0x178477=>{const _0x37b354=_0x3456c7,_0x1e0d94=_0x178477[_0x37b354(0x270)](),_0x5421a7=_0x1e0d94['reason']||'',_0x218938=_0x5421a7['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x218938&&_0x218938[0x1]&&_0x455376['add'](_0x218938[0x1]);}),console['log']('Found\x20'+_0x455376['size']+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x47f6ad,_0x22b79a,_0x3f6922]=await Promise['all']([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0x18ebb1=_0x47f6ad['size']+_0x22b79a[_0x3456c7(0xf5)]+_0x3f6922['size'];showNotification(_0x3456c7(0x1e3)+_0x18ebb1+_0x3456c7(0xbf),'info');const _0x3fc7e0=async(_0x4eb771,_0x3c0ca3)=>{const _0x738832=_0x3456c7;let _0x52bdbd=writeBatch(db);const _0xbc8812=[];let _0x1037b8=0x0;for(const _0x3a7888 of _0x4eb771['docs']){try{if(_0x455376[_0x738832(0x2b5)](_0x3a7888['id'])){if(_0x3c0ca3==='D1')_0x35f447++;if(_0x3c0ca3==='D2')_0x35f447++;if(_0x3c0ca3==='D3')_0x35f447++;continue;}const _0x185fb6=_0x3a7888[_0x738832(0x270)](),_0xe80c01=_0x185fb6['subgameType']||'Standard',_0xf47f6f=_0x238f83[_0xe80c01]||0xa;let _0x23dfc6=_0x185fb6['winnerId'];if(!_0x23dfc6&&_0x185fb6['winnerUsername']){const [_0x2d4e85,_0x35a6d3,_0x4be192]=await Promise['all']([getDocs(query(collection(db,_0x738832(0x97)),where(_0x738832(0x278),'==',_0x185fb6[_0x738832(0x98)]))),getDocs(query(collection(db,_0x738832(0x13c)),where('username','==',_0x185fb6[_0x738832(0x98)]))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x185fb6['winnerUsername'])))]);if(!_0x2d4e85['empty'])_0x23dfc6=_0x2d4e85['docs'][0x0]['id'];else{if(!_0x35a6d3['empty'])_0x23dfc6=_0x35a6d3['docs'][0x0]['id'];else{if(!_0x4be192['empty'])_0x23dfc6=_0x4be192[_0x738832(0x28c)][0x0]['id'];}}}let _0x39011d=_0x185fb6['loserId'];if(!_0x39011d&&_0x185fb6[_0x738832(0x129)]){const [_0x40393b,_0x2b89d3,_0x3fc3ae]=await Promise['all']([getDocs(query(collection(db,_0x738832(0x97)),where('username','==',_0x185fb6['loserUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x185fb6[_0x738832(0x129)]))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x185fb6[_0x738832(0x129)])))]);if(!_0x40393b['empty'])_0x39011d=_0x40393b['docs'][0x0]['id'];else{if(!_0x2b89d3[_0x738832(0x260)])_0x39011d=_0x2b89d3['docs'][0x0]['id'];else{if(!_0x3fc3ae['empty'])_0x39011d=_0x3fc3ae['docs'][0x0]['id'];}}}if(_0x23dfc6&&_0x39011d){const _0x15ae6d=doc(db,'userProfiles',_0x23dfc6),_0x372cb5=doc(db,'userProfiles',_0x39011d),[_0x1ab067,_0x400189]=await Promise['all']([getDoc(_0x15ae6d),getDoc(_0x372cb5)]);if(_0x1ab067['exists']()){const _0x2a989c=_0x1ab067['data'](),_0x24e7d2=_0x2a989c['points']||0x0;_0x52bdbd[_0x738832(0xb8)](_0x15ae6d,{'points':_0x24e7d2+_0xf47f6f,'lastPointsModified':serverTimestamp()}),_0xbc8812['push']({'userId':_0x23dfc6,'userEmail':_0x2a989c['email']||'unknown','displayName':_0x2a989c['displayName']||_0x185fb6[_0x738832(0x98)]||'Unknown\x20User','action':_0x738832(0x18e),'amount':_0xf47f6f,'previousPoints':_0x24e7d2,'newPoints':_0x24e7d2+_0xf47f6f,'reason':'Bulk\x20award:\x20'+_0xe80c01+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x3a7888['id']+'\x20-\x20'+_0x3c0ca3,'adminEmail':auth['currentUser'][_0x738832(0x1b5)],'timestamp':serverTimestamp()});}if(_0x400189[_0x738832(0x122)]()){const _0x272e1b=_0x400189[_0x738832(0x270)](),_0x39a915=_0x272e1b[_0x738832(0x1d4)]||0x0;_0x52bdbd['update'](_0x372cb5,{'points':_0x39a915+_0xf47f6f,'lastPointsModified':serverTimestamp()}),_0xbc8812['push']({'userId':_0x39011d,'userEmail':_0x272e1b['email']||_0x738832(0x1cc),'displayName':_0x272e1b['displayName']||_0x185fb6[_0x738832(0x129)]||'Unknown\x20User','action':'add','amount':_0xf47f6f,'previousPoints':_0x39a915,'newPoints':_0x39a915+_0xf47f6f,'reason':'Bulk\x20award:\x20'+_0xe80c01+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x3a7888['id']+'\x20-\x20'+_0x3c0ca3,'adminEmail':auth['currentUser'][_0x738832(0x1b5)],'timestamp':serverTimestamp()});}_0x1d66a0+=_0xf47f6f*0x2,_0x1037b8+=0x2,_0x455376[_0x738832(0x18e)](_0x3a7888['id']);if(_0x1037b8>=0x190){await _0x52bdbd['commit']();for(const _0x14ecf3 of _0xbc8812){await addDoc(collection(db,'pointsHistory'),_0x14ecf3);}_0x52bdbd=writeBatch(db),_0x1037b8=0x0,_0xbc8812['length']=0x0;}}}catch(_0x550534){console['error']('Error\x20processing\x20'+_0x3c0ca3+_0x738832(0x281)+_0x3a7888['id']+':',_0x550534),_0x1a226e++;}}if(_0x1037b8>0x0){await _0x52bdbd['commit']();for(const _0x408372 of _0xbc8812){await addDoc(collection(db,'pointsHistory'),_0x408372);}}return{'processed':_0x3c0ca3==='D1'?_0x3dc393:_0x3c0ca3==='D2'?_0x567ecf:_0x1f695e};};await _0x3fc7e0(_0x47f6ad,'D1'),await _0x3fc7e0(_0x22b79a,'D2'),await _0x3fc7e0(_0x3f6922,'D3'),showNotification('Completed!\x20Processed\x20'+_0x3dc393+'\x20D1\x20matches,\x20'+_0x567ecf+'\x20D2\x20matches,\x20'+_0x1f695e+'\x20D3\x20matches.\x20'+(_0x3456c7(0x168)+_0x1d66a0+'\x20points.\x20Skipped\x20'+_0x35f447+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x1a226e),'success'),document['getElementById'](_0x3456c7(0x287))&&loadPointsOverview();}catch(_0x2ae907){console[_0x3456c7(0x221)](_0x3456c7(0x138),_0x2ae907),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x2ae907['message'],_0x3456c7(0x221));}}const _0x2b8129=document[_0x2e614c(0x16a)](_0x2e614c(0x2c6));if(_0x2b8129){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x3dd12=_0x2b8129['querySelector'](_0x2e614c(0x1e9));_0x3dd12?_0x3dd12[_0x2e614c(0x29c)]('click',function(){const _0x1c063e=_0x2e614c;console[_0x1c063e(0x175)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x2092ae=document['getElementById'](_0x2e614c(0x1c6));_0x2092ae?_0x2092ae[_0x2e614c(0x29c)]('click',function(){const _0x3d719d=_0x2e614c;console[_0x3d719d(0x175)]('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x200ee6=document[_0x2e614c(0x16a)](_0x2e614c(0x1fc));_0x200ee6?_0x200ee6['addEventListener'](_0x2e614c(0x1fa),function(_0x1d008f){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x1d008f);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x2b8129[_0x2e614c(0x29c)]('click',function(_0x46425a){_0x46425a['target']===_0x2b8129&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log'](_0x2e614c(0x114));}async function awardPointsToAllPilots(){const _0x36ce01=a2_0x279dcd;try{const _0x362a64=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x362a64||isNaN(_0x362a64)){showNotification('Invalid\x20points\x20amount','error');return;}if(!confirm(_0x36ce01(0x28e)+_0x362a64+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification('Starting\x20points\x20award\x20process...','info');const [_0x141eb6,_0x570d32,_0x2bf239]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,_0x36ce01(0x13c))),getDocs(collection(db,'playersD3'))]);console['log']('Found\x20'+_0x141eb6['size']+'\x20D1\x20pilots,\x20'+_0x570d32['size']+'\x20D2\x20pilots,\x20'+_0x2bf239[_0x36ce01(0xf5)]+_0x36ce01(0x112));const _0x9c2e2f=_0x141eb6[_0x36ce01(0xf5)]+_0x570d32[_0x36ce01(0xf5)]+_0x2bf239['size'],_0x150d24=new Map();_0x141eb6[_0x36ce01(0x257)](_0x17459d=>{const _0x306754=_0x17459d['data']();_0x150d24['set'](_0x17459d['id'],{'username':_0x306754['username'],'ladder':'D1'});}),_0x570d32['forEach'](_0x12bfe5=>{const _0x35786e=_0x36ce01,_0xafdfb2=_0x12bfe5[_0x35786e(0x270)]();_0x150d24['set'](_0x12bfe5['id'],{'username':_0xafdfb2[_0x35786e(0x278)],'ladder':'D2'});}),_0x2bf239['forEach'](_0x4bb9c5=>{const _0x177e04=_0x36ce01,_0x20a0f6=_0x4bb9c5['data']();_0x150d24[_0x177e04(0x240)](_0x4bb9c5['id'],{'username':_0x20a0f6['username'],'ladder':'D3'});}),console['log']('Found\x20'+_0x150d24['size']+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x2544de=0x0,_0x4bf297=0x0,_0x46b693=0x0;const _0x1c3b4e=Array['from'](_0x150d24['keys']()),_0x3f2c8c=0x190;for(let _0x3942b9=0x0;_0x3942b9<_0x1c3b4e[_0x36ce01(0xc6)];_0x3942b9+=_0x3f2c8c){const _0x4d91d8=writeBatch(db),_0x142d1f=[],_0xb7c776=_0x1c3b4e['slice'](_0x3942b9,_0x3942b9+_0x3f2c8c),_0x35618c=await Promise[_0x36ce01(0x191)](_0xb7c776['map'](_0x5cd644=>getDoc(doc(db,'userProfiles',_0x5cd644))));for(let _0x48fef1=0x0;_0x48fef1<_0xb7c776['length'];_0x48fef1++){try{const _0x1be7fc=_0xb7c776[_0x48fef1],_0x225cd0=_0x150d24['get'](_0x1be7fc),_0x1922ba=_0x35618c[_0x48fef1];if(_0x1922ba['exists']()){const _0x33131a=_0x1922ba['data'](),_0x43ff0a=_0x33131a['points']||0x0,_0x1c714f=_0x43ff0a+_0x362a64;_0x4d91d8[_0x36ce01(0xb8)](doc(db,'userProfiles',_0x1be7fc),{'points':_0x1c714f,'lastPointsModified':serverTimestamp()}),_0x142d1f[_0x36ce01(0x8b)]({'userId':_0x1be7fc,'userEmail':_0x33131a['email']||'unknown','displayName':_0x33131a['displayName']||_0x225cd0['username']||'Unknown\x20User','action':'add','amount':_0x362a64,'previousPoints':_0x43ff0a,'newPoints':_0x1c714f,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x225cd0[_0x36ce01(0x27b)]+')','adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()}),_0x4bf297+=_0x362a64,_0x2544de++;}else _0x46b693++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x225cd0['username']+'\x20('+_0x1be7fc+')');}catch(_0xabdbed){_0x46b693++,console['error'](_0x36ce01(0x294)+pilotInfo?.['username']+':',_0xabdbed);}}await _0x4d91d8[_0x36ce01(0x12b)]();for(const _0x5c0f0e of _0x142d1f){await addDoc(collection(db,'pointsHistory'),_0x5c0f0e);}showNotification('Processed\x20'+_0x2544de+'/'+_0x9c2e2f+'\x20pilots...','info');}showNotification('Complete!\x20Awarded\x20'+_0x4bf297+'\x20points\x20to\x20'+_0x2544de+_0x36ce01(0x1ea)+_0x46b693,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x3d79e3){console['error'](_0x36ce01(0x29a),_0x3d79e3),showNotification('Error:\x20'+_0x3d79e3['message'],'error');}}function setupManageRibbonsSection(){const _0x2ac820=a2_0x279dcd;console[_0x2ac820(0x175)](_0x2ac820(0x24b));const _0x4884b9=document[_0x2ac820(0x16a)](_0x2ac820(0x113));_0x4884b9&&_0x4884b9['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x121ce9=document['getElementById']('search-ribbon-user-btn');_0x121ce9&&_0x121ce9[_0x2ac820(0x29c)]('click',searchRibbonUser);const _0x59b32c=document[_0x2ac820(0x16a)]('add-ribbon-form');_0x59b32c&&_0x59b32c[_0x2ac820(0x29c)]('submit',addRibbon),_0x4884b9&&_0x4884b9[_0x2ac820(0x29c)]('keypress',function(_0x2e3d95){_0x2e3d95['key']==='Enter'&&(_0x2e3d95['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x3f349d,_0x38620b,_0x5d891a,_0x2ace2f=''){const _0x123d9a=a2_0x279dcd,_0x52cfc9=doc(db,_0x123d9a(0x188),_0x3f349d),_0x2bff01=await getDoc(_0x52cfc9);if(!_0x2bff01['exists']())throw new Error('User\x20not\x20found');const _0x26f0a3=_0x2bff01['data'](),_0x4eb2a5=_0x26f0a3['points']!==undefined?_0x26f0a3['points']:0x0;_0x26f0a3['points']===undefined&&(console[_0x123d9a(0x175)](_0x123d9a(0xb6)+(_0x26f0a3['displayName']||_0x26f0a3['email']||_0x123d9a(0x2b1))),await updateDoc(_0x52cfc9,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x47273c=_0x4eb2a5;switch(_0x38620b){case'add':_0x47273c=_0x4eb2a5+_0x5d891a;break;case'subtract':_0x47273c=Math['max'](0x0,_0x4eb2a5-_0x5d891a);break;case _0x123d9a(0x240):_0x47273c=_0x5d891a;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x52cfc9,{'points':_0x47273c,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x3f349d,'userEmail':_0x26f0a3['email']||'unknown','displayName':_0x26f0a3[_0x123d9a(0x125)]||_0x26f0a3[_0x123d9a(0x278)]||'Unknown\x20User','action':_0x38620b,'amount':_0x5d891a,'previousPoints':_0x4eb2a5,'newPoints':_0x47273c,'reason':_0x2ace2f,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x10d109=a2_0x279dcd,_0x389061=document['getElementById']('points-overview-table-body');if(!_0x389061)return;_0x389061['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x1c640d=collection(db,'userProfiles'),_0x11643d=await getDocs(_0x1c640d);if(_0x11643d['empty']){_0x389061['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x394704=[];let _0x341b7c=0x0;_0x11643d['forEach'](_0x26da0f=>{const _0x2683a8=a2_0x256f,_0x27d220=_0x26da0f['data'](),_0x496c06=_0x27d220[_0x2683a8(0x1d4)]!==undefined?_0x27d220[_0x2683a8(0x1d4)]:0x0;_0x27d220['points']===undefined&&_0x341b7c++,_0x394704[_0x2683a8(0x8b)]({'id':_0x26da0f['id'],..._0x27d220,'points':_0x496c06});}),_0x341b7c>0x0&&(console['log']('Found\x20'+_0x341b7c+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x341b7c+_0x10d109(0x133),_0x10d109(0x165))),_0x394704['sort']((_0x36e9bf,_0x14db85)=>(_0x14db85['points']||0x0)-(_0x36e9bf['points']||0x0)),window[_0x10d109(0x242)]=_0x394704,renderPointsOverview(_0x394704);}catch(_0x101fd3){console['error']('Error\x20loading\x20points\x20overview:',_0x101fd3),_0x389061['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x101fd3['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x3968b2=a2_0x279dcd,_0x4066d7=document['getElementById']('ribbons-overview-table-body');if(!_0x4066d7)return;_0x4066d7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x18de3a,_0x400eb5,_0xee2e5c]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x4066d7[_0x3968b2(0x20a)]='';const _0x4c42d7=(_0x2e4270,_0x64b6db)=>{_0x2e4270['forEach'](_0x109f87=>{const _0x486244=a2_0x256f,_0x2dad8d=_0x109f87['data'](),_0x48e3b1=_0x2dad8d['ribbons']||{},_0x1ff9e9=Object['keys'](_0x48e3b1)[_0x486244(0xc6)],_0x1fcfa7=document[_0x486244(0xce)]('tr');_0x1fcfa7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2dad8d['username']||_0x486244(0x2b1))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x64b6db['toLowerCase']()+'\x22>'+_0x64b6db+_0x486244(0x275)+_0x1ff9e9+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2dad8d['lastUpdated']?new Date(_0x2dad8d['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x2dad8d['username']+_0x486244(0xc2)+_0x64b6db+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4066d7['appendChild'](_0x1fcfa7);});};_0x4c42d7(_0x18de3a,'D1'),_0x4c42d7(_0x400eb5,'D2'),_0x4c42d7(_0xee2e5c,'D3'),document['querySelectorAll'](_0x3968b2(0x108))['forEach'](_0x15463f=>{const _0x46b65f=_0x3968b2;_0x15463f[_0x46b65f(0x29c)]('click',function(){const _0x49ebba=_0x46b65f,_0xf1de6c=this['dataset'][_0x49ebba(0x278)],_0x369b5d=this['dataset']['ladder'];editUserRibbons(_0xf1de6c,_0x369b5d);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x10d8d7){console['error']('Error\x20loading\x20ribbons:',_0x10d8d7),_0x4066d7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data',_0x3968b2(0x221));}}async function searchRibbonUser(){const _0x31eb4d=a2_0x279dcd,_0x236826=document[_0x31eb4d(0x16a)](_0x31eb4d(0x113))['value'][_0x31eb4d(0x232)]();if(!_0x236826){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0xab83d6,_0x20dc32,_0x49d398]=await Promise['all']([getDoc(doc(db,_0x31eb4d(0x1ed),_0x236826)),getDoc(doc(db,'playerRibbonsD2',_0x236826)),getDoc(doc(db,'playerRibbonsD3',_0x236826))]);let _0x38397a=null,_0x3b801a=null;if(_0xab83d6['exists']())_0x38397a='D1',_0x3b801a=_0xab83d6['data']();else{if(_0x20dc32['exists']())_0x38397a='D2',_0x3b801a=_0x20dc32['data']();else _0x49d398[_0x31eb4d(0x122)]()&&(_0x38397a='D3',_0x3b801a=_0x49d398['data']());}_0x38397a?(document[_0x31eb4d(0x16a)]('current-ribbon-user')['textContent']=_0x236826,document['getElementById']('ribbon-target-user')[_0x31eb4d(0x1fb)]=_0x236826,document[_0x31eb4d(0x16a)]('ribbon-target-ladder')[_0x31eb4d(0x1fb)]=_0x38397a,document[_0x31eb4d(0x16a)](_0x31eb4d(0x2db))['style'][_0x31eb4d(0x24d)]=_0x31eb4d(0x21c),displayCurrentRibbons(_0x3b801a['ribbons']||{}),showNotification('Found\x20'+_0x236826+_0x31eb4d(0xfc)+_0x38397a+_0x31eb4d(0x230),'success')):showNotification('User\x20'+_0x236826+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0xfb9b30){console['error']('Error\x20searching\x20user:',_0xfb9b30),showNotification(_0x31eb4d(0xb9),'error');}}function displayCurrentRibbons(_0x479336){const _0x2d1bec=a2_0x279dcd,_0x131fb9=document[_0x2d1bec(0x16a)]('current-ribbons-list');if(!_0x131fb9)return;_0x131fb9[_0x2d1bec(0x20a)]='';if(Object[_0x2d1bec(0x1a0)](_0x479336)['length']===0x0){_0x131fb9[_0x2d1bec(0x20a)]='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0x479336)['forEach'](([_0x4798d3,_0x361b87])=>{const _0x1e7909=_0x2d1bec,_0x3be617=document['createElement'](_0x1e7909(0xb4));_0x3be617['className']=_0x1e7909(0xc0),_0x3be617[_0x1e7909(0x20a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x4798d3+_0x1e7909(0x136)+(_0x361b87[_0x1e7909(0x154)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x361b87['awardedAt']?new Date(_0x361b87['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x1e7909(0x2b1))+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x4798d3+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x131fb9[_0x1e7909(0x182)](_0x3be617);}),document[_0x2d1bec(0x2c4)](_0x2d1bec(0x284))['forEach'](_0x16b87c=>{const _0xb353e4=_0x2d1bec;_0x16b87c['addEventListener'](_0xb353e4(0x1b8),function(){const _0x24af14=_0xb353e4,_0x1c68a0=this['dataset'][_0x24af14(0x272)];removeRibbon(_0x1c68a0);});});}async function addRibbon(_0x37c4f8){const _0x2be756=a2_0x279dcd;_0x37c4f8['preventDefault']();const _0x38f084=document[_0x2be756(0x16a)](_0x2be756(0x1ca))['value'],_0x2d8b99=document[_0x2be756(0x16a)](_0x2be756(0x159))['value'],_0x5e18e5=document['getElementById'](_0x2be756(0x29f))['value'],_0x423df7=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x38f084||!_0x2d8b99||!_0x5e18e5||!_0x423df7){showNotification(_0x2be756(0x22a),'error');return;}try{const _0x2a5826='playerRibbons'+(_0x2d8b99==='D1'?'':_0x2d8b99),_0x1781dd=doc(db,_0x2a5826,_0x38f084),_0x167849=await getDoc(_0x1781dd),_0xc49ad2=_0x167849['exists']()?_0x167849['data']()[_0x2be756(0x2d1)]||{}:{};_0xc49ad2[_0x5e18e5]={'level':_0x423df7,'awardedAt':serverTimestamp()},await setDoc(_0x1781dd,{'username':_0x38f084,'ladder':_0x2d8b99,'ribbons':_0xc49ad2,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x5e18e5+'\x20Level\x20'+_0x423df7+'\x20to\x20'+_0x38f084,'success'),displayCurrentRibbons(_0xc49ad2),document[_0x2be756(0x16a)]('ribbon-type-select')['value']='',document['getElementById'](_0x2be756(0x10c))['value']='1';}catch(_0x304f26){console['error'](_0x2be756(0x21a),_0x304f26),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x11436e){const _0x2931ee=a2_0x279dcd,_0x47230f=document['getElementById']('ribbon-target-user')[_0x2931ee(0x1fb)],_0x29ffd7=document[_0x2931ee(0x16a)]('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x11436e+'\x20from\x20'+_0x47230f+'?'))return;try{const _0x3d4098='playerRibbons'+(_0x29ffd7==='D1'?'':_0x29ffd7),_0x2ead6a=doc(db,_0x3d4098,_0x47230f),_0x2ceac5=await getDoc(_0x2ead6a),_0xe97320=_0x2ceac5['exists']()?_0x2ceac5[_0x2931ee(0x270)]()['ribbons']||{}:{};delete _0xe97320[_0x11436e],await setDoc(_0x2ead6a,{'username':_0x47230f,'ladder':_0x29ffd7,'ribbons':_0xe97320,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x2931ee(0xf1)+_0x11436e+'\x20from\x20'+_0x47230f,'success'),displayCurrentRibbons(_0xe97320);}catch(_0x179ef9){console['error']('Error\x20removing\x20ribbon:',_0x179ef9),showNotification(_0x2931ee(0x15e),_0x2931ee(0x221));}}function editUserRibbons(_0x1a2147,_0x32a666){const _0xf7ad91=a2_0x279dcd;document[_0xf7ad91(0x16a)](_0xf7ad91(0x113))['value']=_0x1a2147,searchRibbonUser();}