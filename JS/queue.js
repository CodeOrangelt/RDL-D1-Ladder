function a44_0x152c(){const _0x7fb067=['warn','Error\x20in\x20queue\x20listener:','toDate','lastUpdated','Just\x20now','display','toString','prototype','floor','table'];a44_0x152c=function(){return _0x7fb067;};return a44_0x152c();}const a44_0x2704a2=(function(){let _0x6bd994=!![];return function(_0x4bc74f,_0x132130){const _0x598606=_0x6bd994?function(){if(_0x132130){const _0x5f45da=_0x132130['apply'](_0x4bc74f,arguments);return _0x132130=null,_0x5f45da;}}:function(){};return _0x6bd994=![],_0x598606;};}()),a44_0x8486e4=a44_0x2704a2(this,function(){const _0x1628f4=a44_0x4ac1;let _0x3669d8;try{const _0x1a6277=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3669d8=_0x1a6277();}catch(_0x49b0b7){_0x3669d8=window;}const _0x10b657=_0x3669d8['console']=_0x3669d8['console']||{},_0x5640e1=['log',_0x1628f4(0xda),'info','error','exception',_0x1628f4(0xe3),'trace'];for(let _0x469533=0x0;_0x469533<_0x5640e1['length'];_0x469533++){const _0x27d30a=a44_0x2704a2['constructor'][_0x1628f4(0xe1)]['bind'](a44_0x2704a2),_0x33d13f=_0x5640e1[_0x469533],_0xfd7cae=_0x10b657[_0x33d13f]||_0x27d30a;_0x27d30a['__proto__']=a44_0x2704a2['bind'](a44_0x2704a2),_0x27d30a[_0x1628f4(0xe0)]=_0xfd7cae['toString']['bind'](_0xfd7cae),_0x10b657[_0x33d13f]=_0x27d30a;}});a44_0x8486e4();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x52a2f5){const _0x17be63=a44_0x4ac1,_0x27950e=document['getElementById']('queue-container');if(!_0x27950e)return;if(_0x52a2f5['length']===0x0){_0x27950e['style'][_0x17be63(0xdf)]='none';return;}_0x27950e['style']['display']='block';let _0x502810='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x52a2f5['forEach'](_0x2f2d0d=>{_0x502810+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x2f2d0d['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x2f2d0d['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x502810+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x27950e['innerHTML']=_0x502810;}function formatQueueTime(_0x47aa28){const _0x42d9ef=a44_0x4ac1;if(!_0x47aa28)return _0x42d9ef(0xde);const _0x496a65=_0x47aa28[_0x42d9ef(0xdc)]?_0x47aa28['toDate']():new Date(_0x47aa28),_0x188811=new Date(),_0x22ecb4=Math['floor']((_0x188811-_0x496a65)/0xea60);if(_0x22ecb4<0x1)return'Just\x20now';return _0x22ecb4+'m\x20in\x20queue';}async function checkQueueTimeout(_0x3f01bc){const _0x4bc01e=a44_0x4ac1;if(!_0x3f01bc[_0x4bc01e(0xdd)])return;const _0xae0197=_0x3f01bc['lastUpdated']['toDate']?_0x3f01bc['lastUpdated']['toDate']():new Date(_0x3f01bc['lastUpdated']),_0x94bd90=new Date(),_0x36337c=Math[_0x4bc01e(0xe2)]((_0x94bd90-_0xae0197)/0xea60);if(_0x36337c>=0x1e)try{const _0x1173de=doc(db,'readyPlayers',_0x3f01bc['id']);await updateDoc(_0x1173de,{'isReady':![]});}catch(_0x1046d2){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x1046d2);}}function a44_0x4ac1(_0x32e017,_0x178e34){const _0x8486e4=a44_0x152c();return a44_0x4ac1=function(_0x2704a2,_0x1dc6eb){_0x2704a2=_0x2704a2-0xda;let _0x152caa=_0x8486e4[_0x2704a2];return _0x152caa;},a44_0x4ac1(_0x32e017,_0x178e34);}const unsubscribe=onSnapshot(readyPlayersRef,_0x4789bf=>{const _0x5b03da=[];_0x4789bf['forEach'](_0x59f51b=>{const _0x13df34=_0x59f51b['data']();if(_0x13df34['isReady']===!![]){const _0x51a627={'id':_0x59f51b['id'],'username':_0x13df34['username'],'lastUpdated':_0x13df34['lastUpdated']||new Date()};_0x5b03da['push'](_0x51a627),checkQueueTimeout(_0x51a627);}}),updateQueueDisplay(_0x5b03da);},_0x2df659=>{const _0x2a3800=a44_0x4ac1;console['error'](_0x2a3800(0xdb),_0x2df659);});window['addEventListener']('unload',()=>{unsubscribe();});