const a42_0x369f86=a42_0x3c8d,a42_0x1ad64f=(function(){let _0x272db9=!![];return function(_0x50a5b2,_0xd6d197){const _0x198d38=_0x272db9?function(){const _0x444a9a=a42_0x3c8d;if(_0xd6d197){const _0x6264b1=_0xd6d197[_0x444a9a(0x10d)](_0x50a5b2,arguments);return _0xd6d197=null,_0x6264b1;}}:function(){};return _0x272db9=![],_0x198d38;};}()),a42_0x463a3c=a42_0x1ad64f(this,function(){const _0x2cced1=a42_0x3c8d;let _0x49134d;try{const _0x29289f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x49134d=_0x29289f();}catch(_0x2afb06){_0x49134d=window;}const _0x37fe28=_0x49134d['console']=_0x49134d[_0x2cced1(0x11e)]||{},_0x4f4585=['log','warn','info','error','exception','table',_0x2cced1(0x12c)];for(let _0x2d7b13=0x0;_0x2d7b13<_0x4f4585['length'];_0x2d7b13++){const _0x36eeb1=a42_0x1ad64f[_0x2cced1(0x121)]['prototype']['bind'](a42_0x1ad64f),_0x5bc88e=_0x4f4585[_0x2d7b13],_0x2a111e=_0x37fe28[_0x5bc88e]||_0x36eeb1;_0x36eeb1['__proto__']=a42_0x1ad64f['bind'](a42_0x1ad64f),_0x36eeb1['toString']=_0x2a111e['toString']['bind'](_0x2a111e),_0x37fe28[_0x5bc88e]=_0x36eeb1;}});function a42_0x1fcf(){const _0x5a01e1=['winnerUsername','pfpPreview','apply','all','Stats\x20calculated:','handleSubmit','pfpInput','favorite-map','getElementById','motto','preventDefault','loadProfile','Please\x20sign\x20in\x20to\x20save\x20your\x20profile','handleImageUpload','profile-pictures/','size','matches','nickname','uid','console','DOMContentLoaded','forEach','constructor','error','textContent','Error\x20saving\x20profile.\x20Please\x20try\x20again.','stats-losses','Error\x20saving\x20profile:','files','toISOString','pfp-upload','pfpUrl','form','trace','data','Profile\x20saved\x20successfully!','loserScore','get','winnerScore','Error\x20loading\x20player\x20stats:'];a42_0x1fcf=function(){return _0x5a01e1;};return a42_0x1fcf();}function a42_0x3c8d(_0xee2a0b,_0x5571c4){const _0x463a3c=a42_0x1fcf();return a42_0x3c8d=function(_0x1ad64f,_0x2e03fc){_0x1ad64f=_0x1ad64f-0x10b;let _0x1fcfb6=_0x463a3c[_0x1ad64f];return _0x1fcfb6;},a42_0x3c8d(_0xee2a0b,_0x5571c4);}a42_0x463a3c();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x491778=a42_0x3c8d;this['form']=document['getElementById']('profile-form'),this[_0x491778(0x111)]=document['getElementById'](_0x491778(0x129)),this['pfpPreview']=document['getElementById']('profile-preview'),this['statsContainer']=document['getElementById']('player-stats'),this['setupEventListeners'](),this[_0x491778(0x116)]();}['setupEventListeners'](){const _0x1b6104=a42_0x3c8d;this['pfpInput']['addEventListener']('change',_0x2e1f97=>this[_0x1b6104(0x118)](_0x2e1f97)),this[_0x1b6104(0x12b)]['addEventListener']('submit',_0x121ca7=>this['handleSubmit'](_0x121ca7));}async['handleImageUpload'](_0x7db030){const _0x1c7639=_0x7db030['target']['files'][0x0];if(_0x1c7639){const _0x312ab9=new FileReader();_0x312ab9['onload']=_0x12b770=>{this['pfpPreview']['src']=_0x12b770['target']['result'];},_0x312ab9['readAsDataURL'](_0x1c7639);}}async[a42_0x369f86(0x110)](_0xbc34e2){const _0x502fae=a42_0x369f86;_0xbc34e2[_0x502fae(0x115)]();const _0xed5500=auth['currentUser'];if(!_0xed5500){alert(_0x502fae(0x117));return;}try{const _0x4dfb61=new FormData(this[_0x502fae(0x12b)]),_0x30e2ad={'nickname':_0x4dfb61[_0x502fae(0x130)]('nickname'),'motto':_0x4dfb61['get'](_0x502fae(0x114)),'favoriteMap':_0x4dfb61['get'](_0x502fae(0x112)),'favoriteWeapon':_0x4dfb61['get']('favorite-weapon'),'updatedAt':new Date()[_0x502fae(0x128)]()},_0x17dc0c=this['pfpInput'][_0x502fae(0x127)][0x0];if(_0x17dc0c){const _0x5174f8=ref(storage,_0x502fae(0x119)+_0xed5500[_0x502fae(0x11d)]);await uploadBytes(_0x5174f8,_0x17dc0c),_0x30e2ad['pfpUrl']=await getDownloadURL(_0x5174f8);}await setDoc(doc(db,'profiles',_0xed5500['uid']),_0x30e2ad),alert(_0x502fae(0x12e));}catch(_0x42a9d0){console['error'](_0x502fae(0x126),_0x42a9d0),alert(_0x502fae(0x124));}}async['loadProfile'](){onAuthStateChanged(auth,async _0x29f03f=>{const _0x62146e=a42_0x3c8d;if(_0x29f03f)try{const _0x2d38a1=await getDoc(doc(db,'profiles',_0x29f03f['uid']));if(_0x2d38a1['exists']()){const _0x5e54b1=_0x2d38a1[_0x62146e(0x12d)]();document[_0x62146e(0x113)]('nickname')['value']=_0x5e54b1[_0x62146e(0x11c)]||'',document[_0x62146e(0x113)](_0x62146e(0x114))['value']=_0x5e54b1[_0x62146e(0x114)]||'',document['getElementById']('favorite-map')['value']=_0x5e54b1['favoriteMap']||'',document[_0x62146e(0x113)]('favorite-weapon')['value']=_0x5e54b1['favoriteWeapon']||'',_0x5e54b1['pfpUrl']&&(this[_0x62146e(0x10c)]['src']=_0x5e54b1[_0x62146e(0x12a)]),await this['loadPlayerStats'](_0x5e54b1['nickname']);}}catch(_0x137aa6){console['error']('Error\x20loading\x20profile:',_0x137aa6);}});}async['loadPlayerStats'](_0xc53f40){const _0x4790d1=a42_0x369f86;if(!_0xc53f40)return;try{const _0x361216=collection(db,'approvedMatches'),[_0x5bdb15,_0x1666b2]=await Promise[_0x4790d1(0x10e)]([getDocs(query(_0x361216,where(_0x4790d1(0x10b),'==',_0xc53f40))),getDocs(query(_0x361216,where('loserUsername','==',_0xc53f40)))]),_0x37c7ec=_0x5bdb15[_0x4790d1(0x11a)],_0x5a824f=_0x1666b2['size'],_0x16f6b7=_0x37c7ec+_0x5a824f;let _0x5d2cc8=0x0,_0x350eb9=0x0;_0x5bdb15['forEach'](_0x4e504d=>{const _0x4c3faa=_0x4790d1,_0x385abd=_0x4e504d['data']();if(_0x385abd['winnerScore'])_0x5d2cc8+=parseInt(_0x385abd[_0x4c3faa(0x131)]);if(_0x385abd['loserScore'])_0x350eb9+=parseInt(_0x385abd[_0x4c3faa(0x12f)]);}),_0x1666b2['forEach'](_0x12a82c=>{const _0x362a2a=_0x4790d1,_0x4e5724=_0x12a82c['data']();if(_0x4e5724[_0x362a2a(0x12f)])_0x5d2cc8+=parseInt(_0x4e5724[_0x362a2a(0x12f)]);if(_0x4e5724['winnerScore'])_0x350eb9+=parseInt(_0x4e5724[_0x362a2a(0x131)]);});const _0xa989dc=_0x350eb9===0x0?_0x5d2cc8['toFixed'](0x2):(_0x5d2cc8/_0x350eb9)['toFixed'](0x2),_0x5125f3=_0x16f6b7===0x0?'0':(_0x37c7ec/_0x16f6b7*0x64)['toFixed'](0x1);console['log'](_0x4790d1(0x10f),{'totalMatches':_0x16f6b7,'wins':_0x37c7ec,'losses':_0x5a824f,'totalKills':_0x5d2cc8,'totalDeaths':_0x350eb9,'kdRatio':_0xa989dc,'winRate':_0x5125f3}),document['getElementById']('stats-matches')[_0x4790d1(0x123)]=_0x16f6b7,document['getElementById']('stats-wins')['textContent']=_0x37c7ec,document['getElementById'](_0x4790d1(0x125))['textContent']=_0x5a824f,document[_0x4790d1(0x113)]('stats-kd')['textContent']=_0xa989dc,document['getElementById']('stats-winrate')['textContent']=_0x5125f3+'%';}catch(_0x191c21){console[_0x4790d1(0x122)](_0x4790d1(0x132),_0x191c21),[_0x4790d1(0x11b),'wins','losses','kd','winrate'][_0x4790d1(0x120)](_0x510057=>{const _0x21c51f=_0x4790d1;document[_0x21c51f(0x113)]('stats-'+_0x510057)[_0x21c51f(0x123)]='-';});}}}document['addEventListener'](a42_0x369f86(0x11f),()=>{new ProfileManager();});