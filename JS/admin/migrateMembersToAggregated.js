(function(_0x251a4c,_0x28d332){const _0x63df96=a1_0x11fe,_0x63e828=_0x251a4c();while(!![]){try{const _0x1ed929=parseInt(_0x63df96(0x187))/0x1*(parseInt(_0x63df96(0x164))/0x2)+parseInt(_0x63df96(0x192))/0x3+parseInt(_0x63df96(0x171))/0x4*(parseInt(_0x63df96(0x173))/0x5)+parseInt(_0x63df96(0x15d))/0x6+parseInt(_0x63df96(0x181))/0x7*(parseInt(_0x63df96(0x195))/0x8)+-parseInt(_0x63df96(0x15b))/0x9*(-parseInt(_0x63df96(0x198))/0xa)+-parseInt(_0x63df96(0x17b))/0xb;if(_0x1ed929===_0x28d332)break;else _0x63e828['push'](_0x63e828['shift']());}catch(_0x3aaf60){_0x63e828['push'](_0x63e828['shift']());}}}(a1_0x2350,0xc1f58));function a1_0x11fe(_0x51f0f7,_0x418993){const _0x197102=a1_0x2350();return a1_0x11fe=function(_0x3b870f,_0x20ebb4){_0x3b870f=_0x3b870f-0x15b;let _0x1f0b1e=_0x197102[_0x3b870f];return _0x1f0b1e;},a1_0x11fe(_0x51f0f7,_0x418993);}import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);async function migrateToAggregatedMembers(){const _0x506caa=a1_0x11fe,_0x1b8a86=(function(){let _0x5c56b7=!![];return function(_0x170636,_0x1c37e8){const _0xa522e7=_0x5c56b7?function(){const _0x273221=a1_0x11fe;if(_0x1c37e8){const _0x244c73=_0x1c37e8[_0x273221(0x162)](_0x170636,arguments);return _0x1c37e8=null,_0x244c73;}}:function(){};return _0x5c56b7=![],_0xa522e7;};}()),_0x36bc54=_0x1b8a86(this,function(){const _0x2deaa5=a1_0x11fe;return _0x36bc54[_0x2deaa5(0x19a)]()[_0x2deaa5(0x170)]('(((.+)+)+)+$')[_0x2deaa5(0x19a)]()[_0x2deaa5(0x19e)](_0x36bc54)['search'](_0x2deaa5(0x16b));});_0x36bc54();const _0x5cfb99=(function(){let _0xc1dd62=!![];return function(_0x1fcfeb,_0x2f30b3){const _0x103abb=_0xc1dd62?function(){const _0x35bb08=a1_0x11fe;if(_0x2f30b3){const _0x586bd5=_0x2f30b3[_0x35bb08(0x162)](_0x1fcfeb,arguments);return _0x2f30b3=null,_0x586bd5;}}:function(){};return _0xc1dd62=![],_0x103abb;};}()),_0x2823aa=_0x5cfb99(this,function(){const _0x23a5a9=a1_0x11fe;let _0x32f3e1;try{const _0x486429=Function(_0x23a5a9(0x163)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x32f3e1=_0x486429();}catch(_0x43b2b9){_0x32f3e1=window;}const _0x1b8123=_0x32f3e1[_0x23a5a9(0x17d)]=_0x32f3e1[_0x23a5a9(0x17d)]||{},_0x37fc01=[_0x23a5a9(0x182),_0x23a5a9(0x16f),_0x23a5a9(0x16a),_0x23a5a9(0x16c),'exception',_0x23a5a9(0x17a),_0x23a5a9(0x178)];for(let _0x18f0e4=0x0;_0x18f0e4<_0x37fc01[_0x23a5a9(0x188)];_0x18f0e4++){const _0x3907d4=_0x5cfb99[_0x23a5a9(0x19e)][_0x23a5a9(0x18e)][_0x23a5a9(0x199)](_0x5cfb99),_0x4aefc1=_0x37fc01[_0x18f0e4],_0x3cc547=_0x1b8123[_0x4aefc1]||_0x3907d4;_0x3907d4[_0x23a5a9(0x15f)]=_0x5cfb99[_0x23a5a9(0x199)](_0x5cfb99),_0x3907d4['toString']=_0x3cc547[_0x23a5a9(0x19a)][_0x23a5a9(0x199)](_0x3cc547),_0x1b8123[_0x4aefc1]=_0x3907d4;}});_0x2823aa(),console[_0x506caa(0x182)](_0x506caa(0x19f));try{console[_0x506caa(0x182)](_0x506caa(0x180));const [_0x221c6c,_0x35164f,_0x3fa0d6,_0x3ddaa7,_0x54d8d]=await Promise[_0x506caa(0x161)]([getDocs(collection(db,_0x506caa(0x16d))),getDocs(collection(db,_0x506caa(0x179))),getDocs(collection(db,_0x506caa(0x177))),getDocs(collection(db,_0x506caa(0x1a5))),getDocs(collection(db,_0x506caa(0x17f)))]);console[_0x506caa(0x182)](_0x506caa(0x169)+_0x221c6c['size']+'\x20profiles,\x20'+_0x35164f['size']+'\x20D1,\x20'+_0x3fa0d6['size']+'\x20D2,\x20'+_0x3ddaa7['size']+_0x506caa(0x17e)+_0x54d8d[_0x506caa(0x15e)]+_0x506caa(0x185));const _0x403084=new Map();_0x221c6c[_0x506caa(0x190)](_0x50c726=>{const _0x4d6452=_0x506caa;_0x403084['set'](_0x50c726['id'],_0x50c726[_0x4d6452(0x168)]());});const _0x252788=new Map(),_0x49f9d3=(_0x3353dd,_0x3f9d4a)=>{const _0x399b47=_0x506caa;_0x3353dd[_0x399b47(0x190)](_0x48b866=>{const _0xd3b775=_0x399b47,_0x417c77=_0x48b866[_0xd3b775(0x168)](),_0x377a01=_0x48b866['id'];!_0x252788[_0xd3b775(0x18d)](_0x377a01)&&_0x252788[_0xd3b775(0x176)](_0x377a01,{'userId':_0x377a01,'username':_0x417c77[_0xd3b775(0x18a)]||_0x417c77[_0xd3b775(0x19d)]||_0xd3b775(0x1a2),'ladders':[],'isNonParticipant':![]});const _0x5be21a=_0x252788['get'](_0x377a01);_0x5be21a[_0xd3b775(0x174)]['push']({'ladder':_0x3f9d4a,'elo':_0x417c77[_0xd3b775(0x189)]||_0x417c77[_0xd3b775(0x193)]||0x4b0,'active':_0x417c77[_0xd3b775(0x19c)]!==![]});});};_0x49f9d3(_0x35164f,'D1'),_0x49f9d3(_0x3fa0d6,'D2'),_0x49f9d3(_0x3ddaa7,'D3'),_0x54d8d[_0x506caa(0x190)](_0x49b75f=>{const _0x540688=_0x506caa,_0x1f1c08=_0x49b75f[_0x540688(0x168)](),_0x5374b7=_0x49b75f['id'];!_0x252788['has'](_0x5374b7)&&(_0x1f1c08['username']||_0x1f1c08[_0x540688(0x19d)])&&_0x252788[_0x540688(0x176)](_0x5374b7,{'userId':_0x5374b7,'username':_0x1f1c08[_0x540688(0x18a)]||_0x1f1c08[_0x540688(0x19d)],'ladders':[],'isNonParticipant':!![]});}),console[_0x506caa(0x182)](_0x506caa(0x17c)+_0x252788[_0x506caa(0x15e)]+_0x506caa(0x18c)),console[_0x506caa(0x182)](_0x506caa(0x16e));const _0x1684e5=[];let _0x15aa88=writeBatch(db),_0x153690=0x0,_0x42f2f3=0x0;_0x252788[_0x506caa(0x190)]((_0x48eeff,_0x37c549)=>{const _0x31be2c=_0x506caa,_0xec0ee5=_0x403084[_0x31be2c(0x15c)](_0x37c549)||{};let _0xdb88db=0x0,_0x175126=null;if(_0x48eeff[_0x31be2c(0x174)]['length']>0x0){const _0x38368d=_0x48eeff[_0x31be2c(0x174)][_0x31be2c(0x18f)]((_0x2d5084,_0x59d554)=>_0x59d554['elo']-_0x2d5084[_0x31be2c(0x193)]);_0xdb88db=_0x38368d[0x0]['elo'],_0x175126=_0x38368d[0x0][_0x31be2c(0x175)];}const _0x49c7c9={'userId':_0x37c549,'username':_0x48eeff[_0x31be2c(0x18a)],'profileImageUrl':_0xec0ee5[_0x31be2c(0x191)]||null,'country':_0xec0ee5[_0x31be2c(0x1a0)]||null,'motto':_0xec0ee5['motto']||null,'favoriteMap':_0xec0ee5[_0x31be2c(0x196)]||null,'favoriteWeapon':_0xec0ee5[_0x31be2c(0x18b)]||null,'isNonParticipant':_0x48eeff[_0x31be2c(0x172)],'ladders':_0x48eeff['ladders'],'primaryLadder':_0x175126,'highestElo':_0xdb88db,'rank':getPlayerRank(_0xdb88db),'lastUpdated':new Date(),'migrationTimestamp':new Date()['toISOString']()},_0x4ff653=doc(collection(db,_0x31be2c(0x1a3)),_0x37c549);_0x15aa88[_0x31be2c(0x176)](_0x4ff653,_0x49c7c9),_0x153690++,_0x42f2f3++,_0x153690>=0x1c2&&(_0x1684e5[_0x31be2c(0x197)](_0x15aa88[_0x31be2c(0x165)]()),_0x15aa88=writeBatch(db),_0x153690=0x0,console[_0x31be2c(0x182)](_0x31be2c(0x1a4)+_0x1684e5[_0x31be2c(0x188)]+'\x20('+_0x42f2f3+_0x31be2c(0x167)));}),_0x153690>0x0&&_0x1684e5[_0x506caa(0x197)](_0x15aa88[_0x506caa(0x165)]()),console[_0x506caa(0x182)]('üöÄ\x20Executing\x20'+_0x1684e5['length']+_0x506caa(0x19b)),await Promise[_0x506caa(0x161)](_0x1684e5),console[_0x506caa(0x182)](_0x506caa(0x194)+_0x252788[_0x506caa(0x15e)]+'\x20members\x20to\x20aggregated\x20collection!'),console['log']('üí°\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!');}catch(_0x302dc4){console['error'](_0x506caa(0x186),_0x302dc4),_0x302dc4[_0x506caa(0x183)]===_0x506caa(0x184)&&console[_0x506caa(0x16c)]('üîí\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.');}}function getPlayerRank(_0x4b0098){const _0x53da0c=a1_0x11fe;if(_0x4b0098>=0x7d0)return _0x53da0c(0x160);if(_0x4b0098>=0x708)return _0x53da0c(0x166);if(_0x4b0098>=0x640)return _0x53da0c(0x1a1);if(_0x4b0098>=0x578)return'bronze';return'unranked';}migrateToAggregatedMembers();function a1_0x2350(){const _0x570303=['2706252DlUBQF','elo','üéâ\x20Successfully\x20migrated\x20','72xbjPWF','favoriteMap','push','20kxnsBF','bind','toString','\x20batches...','active','name','constructor','üîÑ\x20Starting\x20migration\x20to\x20aggregated\x20members...','country','silver','Unknown','aggregatedMembers','üì¶\x20Prepared\x20batch\x20','playersD3','838611MgGJlW','get','7510062SAOazZ','size','__proto__','emerald','all','apply','return\x20(function()\x20','585334WjDNfj','commit','gold','\x20members\x20processed)','data','‚úÖ\x20Data\x20fetched:\x20','info','(((.+)+)+)+$','error','userProfiles','üíæ\x20Writing\x20aggregated\x20data...','warn','search','8ACsIHJ','isNonParticipant','2453390aobbsE','ladders','ladder','set','playersD2','trace','players','table','39411757FBoWMm','‚öôÔ∏è\x20Processed\x20','console','\x20D3,\x20','nonParticipants','üì•\x20Fetching\x20all\x20collections...','138341oHVtRS','log','code','permission-denied','\x20non-participants','‚ùå\x20Migration\x20failed:','3qSykKE','length','eloRating','username','favoriteWeapon','\x20unique\x20members','has','prototype','sort','forEach','profileImageUrl'];a1_0x2350=function(){return _0x570303;};return a1_0x2350();}