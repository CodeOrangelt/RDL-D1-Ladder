const a52n=a52d;(function(a,b){const k=a52d,c=a();while(!![]){try{const d=-parseInt(k(0x19e))/0x1*(-parseInt(k(0x178))/0x2)+parseInt(k(0x190))/0x3+parseInt(k(0x18c))/0x4*(parseInt(k(0x19d))/0x5)+parseInt(k(0x175))/0x6+-parseInt(k(0x172))/0x7*(-parseInt(k(0x1a0))/0x8)+-parseInt(k(0x18b))/0x9+parseInt(k(0x17d))/0xa*(-parseInt(k(0x18e))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a52c,0xeb463));const a52b=(function(){let a=!![];return function(b,c){const d=a?function(){if(c){const e=c['apply'](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a52a=a52b(this,function(){const l=a52d;let a;try{const d=Function(l(0x196)+l(0x180)+');');a=d();}catch(f){a=window;}const b=a['console']=a[l(0x177)]||{},c=[l(0x186),l(0x194),'info','error',l(0x192),l(0x199),l(0x173)];for(let g=0x0;g<c[l(0x17b)];g++){const h=a52b[l(0x183)][l(0x19f)][l(0x17e)](a52b),i=c[g],j=b[i]||h;h['__proto__']=a52b[l(0x17e)](a52b),h[l(0x197)]=j['toString']['bind'](j),b[i]=h;}});a52a();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a52c(){const t=['zw1HAwW','DgfIBgu','BM9Uzq','qxv0AgvUDgLJyxrPB24GzxjYB3i6','zg9JCW','odKYmeHtyLHABG','mtDXuu1iB1q','ChjVDg90ExbL','mZy4EeT1D2nR','CMvSB2fK','mZa3ntffCuDSDuO','DhjHy2u','C2vHC29UCW','mJC1odCXnMXmvhnzAW','y291BNq','y29UC29Szq','mtu1mtq0ELPYqNni','CMvZzxqTCgfZC3DVCMq','zwXVuMf0Aw5N','BgvUz3rO','C3r5Bgu','mtbIDKfiDu8','yMLUza','z2v0rwXLBwvUDej5swq','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','DMfSDwu','C2vHC29Uq291BNq','y29UC3rYDwn0B3i','igHHCYbIzwvUigfYy2HPDMvKigfUzcbWBgf5zxjZigHHDMuGyMvLBIbYzxnLDc4','zgLZCgXHEq','Bg9N','ywrKrxzLBNrmAxn0zw5LCG','CMvZzxqTy29UzMLYBwf0Aw9U','Bwv0ywrHDge','CMvZzxrtzwfZB24','mtK4odmWn3v4vu9UsG','mJC2ELjrqu5A','zxHPC3rZ','mtGYotq4odfxAwvSC28','y2XPy2S','mJiZmJi3oxDdse9iqq','ChvZAa','zxHJzxb0Aw9U','C2v0DxbfDMvUDeXPC3rLBMvYCW','D2fYBG','CgXHEwvYCW','CMv0DxjUicHMDw5JDgLVBIGPia','Dg9tDhjPBMC'];a52c=function(){return t;};return a52c();}function a52d(a,b){const c=a52c();return a52d=function(d,e){d=d-0x171;let f=c[d];if(a52d['yQrAgI']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a52d['YrxxEB']=g,a=arguments,a52d['yQrAgI']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a52d['YrxxEB'](f),a[i]=f):f=j,f;},a52d(a,b);}import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){const m=a52d;this[m(0x193)]();}[a52n(0x193)](){const o=a52n,a=document['getElementById']('reset-season'),b=document['getElementById']('confirm-reset'),c=document['getElementById']('cancel-reset');a?.[o(0x187)]('click',()=>{const p=o;document[p(0x17f)](p(0x188))[p(0x17c)]['display']='block';}),b?.[o(0x187)]('click',async()=>{const q=o,d=document['getElementById'](q(0x179)),e=auth['currentUser'];if(!e||!d['value']){alert('Please\x20enter\x20your\x20password');return;}try{const f=EmailAuthProvider['credential'](e[q(0x198)],d[q(0x181)]);await reauthenticateWithCredential(e,f),await this[q(0x18a)](),d['value']='',document[q(0x17f)]('reset-confirmation')[q(0x17c)][q(0x185)]=q(0x19a);}catch(g){alert('Invalid\x20password\x20or\x20authentication\x20failed'),console['error'](q(0x19b),g);}}),c?.['addEventListener'](o(0x18f),()=>{const r=o,d=document[r(0x17f)](r(0x179));d['value']='',document[r(0x17f)](r(0x188))['style']['display']=r(0x19a);});}async[a52n(0x18a)](){const s=a52n;try{const a=await getDoc(doc(db,'metadata',s(0x182)));let b=0x1;a[s(0x18d)]()&&(b=a['data']()[s(0x176)]+0x1);const c=await getDocs(collection(db,'players')),d={'players':[],'date':new Date(),'seasonNumber':b};for(const e of c[s(0x19c)]){const f=e['data']();d['players'][s(0x191)]({'username':f['username'],'position':f['position'],'eloRating':f[s(0x17a)]||0x4b0}),await setDoc(doc(db,s(0x195),e['id']),{...f,'eloRating':0x4b0,'position':f['position']});}await setDoc(doc(db,s(0x174),'season'+b),d),await setDoc(doc(db,s(0x189),'seasonCount'),{'count':b}),alert('Season\x20'+b+s(0x184)),location[s(0x171)]();}catch(g){console['error']('Error\x20resetting\x20season:',g),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}export const seasonManager=new SeasonManager();