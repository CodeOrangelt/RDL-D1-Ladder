const a0_0x3aa75c=a0_0x150f;(function(_0x43d649,_0x2a0b59){const _0x5ee599=a0_0x150f,_0x15154c=_0x43d649();while(!![]){try{const _0x30c8ac=-parseInt(_0x5ee599(0x1f6))/0x1+parseInt(_0x5ee599(0x1dd))/0x2*(parseInt(_0x5ee599(0x163))/0x3)+parseInt(_0x5ee599(0x1fd))/0x4+-parseInt(_0x5ee599(0x246))/0x5*(-parseInt(_0x5ee599(0x1c9))/0x6)+parseInt(_0x5ee599(0x2ae))/0x7*(-parseInt(_0x5ee599(0x17d))/0x8)+parseInt(_0x5ee599(0x29e))/0x9*(parseInt(_0x5ee599(0x1b1))/0xa)+-parseInt(_0x5ee599(0x2b5))/0xb;if(_0x30c8ac===_0x2a0b59)break;else _0x15154c['push'](_0x15154c['shift']());}catch(_0x154998){_0x15154c['push'](_0x15154c['shift']());}}}(a0_0xa225,0x22709));const a0_0x1ffe74=(function(){let _0x2616e2=!![];return function(_0x491d5f,_0x136fee){const _0x4b1208=_0x2616e2?function(){const _0x2c8571=a0_0x150f;if(_0x136fee){const _0x5d1f2e=_0x136fee[_0x2c8571(0x37a)](_0x491d5f,arguments);return _0x136fee=null,_0x5d1f2e;}}:function(){};return _0x2616e2=![],_0x4b1208;};}()),a0_0xc188c2=a0_0x1ffe74(this,function(){const _0x5d7bb0=a0_0x150f,_0x260b4d=function(){let _0x4defce;try{_0x4defce=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4280a9){_0x4defce=window;}return _0x4defce;},_0x51e200=_0x260b4d(),_0x5b531a=_0x51e200['console']=_0x51e200['console']||{},_0x466e5b=['log','warn','info','error','exception','table','trace'];for(let _0x1f68c7=0x0;_0x1f68c7<_0x466e5b['length'];_0x1f68c7++){const _0x1143b2=a0_0x1ffe74['constructor']['prototype'][_0x5d7bb0(0x14c)](a0_0x1ffe74),_0x594069=_0x466e5b[_0x1f68c7],_0x5f2c62=_0x5b531a[_0x594069]||_0x1143b2;_0x1143b2['__proto__']=a0_0x1ffe74[_0x5d7bb0(0x14c)](a0_0x1ffe74),_0x1143b2['toString']=_0x5f2c62[_0x5d7bb0(0x1a5)]['bind'](_0x5f2c62),_0x5b531a[_0x594069]=_0x1143b2;}});a0_0xc188c2();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x3a55f2){const _0x40d439=a0_0x150f;if(!_0x3a55f2)return'#ffffff';_0x3a55f2=_0x3a55f2['replace']('#','');_0x3a55f2['length']===0x3&&(_0x3a55f2=_0x3a55f2['split']('')['map'](_0x37fb8d=>_0x37fb8d+_0x37fb8d)['join'](''));if(_0x3a55f2[_0x40d439(0x218)]!==0x6)return'#ffffff';const _0x381c8b=parseInt(_0x3a55f2['substring'](0x0,0x2),0x10),_0x15f338=parseInt(_0x3a55f2['substring'](0x2,0x4),0x10),_0x16aa15=parseInt(_0x3a55f2['substring'](0x4,0x6),0x10),_0x388766=(_0x381c8b*0x12b+_0x15f338*0x24b+_0x16aa15*0x72)/0x3e8;return _0x388766>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE=a0_0x3aa75c(0x174),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x261c33=>{const _0x76e154=a0_0x150f;if(!_0x261c33){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x96be58){console[_0x76e154(0x18d)](_0x76e154(0x38c),_0x96be58),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x419448){const _0x11c251=a0_0x3aa75c;if(!_0x419448)return['dashboard'];console['log'](_0x11c251(0x37b)+_0x419448+'\x20in\x20all\x20collections...');const _0x16b03e=[{'name':_0x11c251(0x27c),'displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':_0x11c251(0x317),'displayName':'D2\x20Players'},{'name':'playersD3','displayName':_0x11c251(0x14b)},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x3c3bc2=auth['currentUser'];let _0x4404b9=null,_0x4eecb2=null;for(const _0x20fd9e of _0x16b03e){try{if(_0x3c3bc2){const _0x4b737d=doc(db,_0x20fd9e['name'],_0x3c3bc2['uid']),_0x56ca84=await getDoc(_0x4b737d);if(_0x56ca84['exists']()){const _0x109c09=_0x56ca84[_0x11c251(0x1cb)]();console['log']('Found\x20user\x20in\x20'+_0x20fd9e['displayName']+'\x20by\x20UID:',_0x109c09);const _0xd7b44=(_0x109c09[_0x11c251(0x25d)]||_0x109c09['role']||'')['toLowerCase']();if(_0xd7b44&&_0xd7b44!=='none'){_0x4404b9=_0xd7b44,_0x4eecb2=_0x20fd9e['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x4404b9+_0x11c251(0x367)+_0x4eecb2);break;}}}if(!_0x4404b9){const _0x14a85b=collection(db,_0x20fd9e['name']),_0x271884=query(_0x14a85b,where('email','==',_0x419448)),_0x119a1d=await getDocs(_0x271884);if(!_0x119a1d['empty']){const _0x35f692=_0x119a1d[_0x11c251(0x337)][0x0]['data']();console['log'](_0x11c251(0x1c0)+_0x20fd9e['displayName']+_0x11c251(0x17c)+_0x419448+':',_0x35f692);const _0xc7b23f=(_0x35f692['roleName']||_0x35f692['role']||'')['toLowerCase']();if(_0xc7b23f&&_0xc7b23f!=='none'){_0x4404b9=_0xc7b23f,_0x4eecb2=_0x20fd9e[_0x11c251(0x182)],console[_0x11c251(0x181)]('Found\x20specific\x20role:\x20'+_0x4404b9+_0x11c251(0x367)+_0x4eecb2);break;}}}}catch(_0x38ab4b){console['error']('Error\x20checking\x20'+_0x20fd9e['displayName']+':',_0x38ab4b);}}if(_0x4404b9){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x4404b9+'\x20(from\x20'+_0x4eecb2+')');const _0x2fda70={'admin':[_0x11c251(0x2c0),'manage-players','manage-matches','manage-articles','manage-trophies',_0x11c251(0x2d1),'inactive-players',_0x11c251(0x312),'manage-trophies','elo-history','manage-highlights',_0x11c251(0x195),'manage-matches',_0x11c251(0x36b),_0x11c251(0x348),_0x11c251(0x240)],'owner':['dashboard','manage-players','manage-matches','manage-articles',_0x11c251(0x23c),'manage-ranks','inactive-players','settings','manage-trophies',_0x11c251(0x374),_0x11c251(0x2be),'user-roles-section','manage-matches','manage-points',_0x11c251(0x348),_0x11c251(0x240)],'council':[_0x11c251(0x2c0),'manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x2fda70[_0x4404b9])return console['log']('Role\x20\x27'+_0x4404b9+_0x11c251(0x1f8),_0x2fda70[_0x4404b9]),_0x2fda70[_0x4404b9];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x419448+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x5148c2=[]){const _0x289ac5=a0_0x3aa75c,_0x235922=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0xbdb23c=document['querySelectorAll']('.admin-section');(!_0x5148c2||_0x5148c2['length']===0x0)&&(_0x5148c2=['dashboard']);_0x235922['forEach'](_0x4e079b=>{const _0x233189=a0_0x150f,_0x251c1a=_0x4e079b['getAttribute']('data-section');_0x5148c2[_0x233189(0x262)](_0x251c1a)?_0x4e079b['style']['display']='flex':_0x4e079b['style']['display']='none',_0x4e079b['addEventListener'](_0x233189(0x247),()=>{const _0x26a486=_0x233189,_0x44a989=_0x4e079b['getAttribute']('data-section');if(!_0x5148c2[_0x26a486(0x262)](_0x44a989)){showNotification(_0x26a486(0x272),'error');return;}_0x235922['forEach'](_0x2fa382=>_0x2fa382[_0x26a486(0x288)][_0x26a486(0x2db)]('active')),_0x4e079b['classList']['add']('active'),_0xbdb23c[_0x26a486(0x311)](_0x628534=>{const _0x45c644=_0x26a486;_0x628534['style']['display']=_0x45c644(0x207);});const _0x419b36=document['getElementById'](_0x44a989);_0x419b36&&(_0x419b36['style']['display']='block',console['log'](_0x26a486(0x23e)+_0x44a989+'\x20section'));});});const _0xc9f581=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x5148c2[0x0]+'\x22]');_0xc9f581&&_0xc9f581[_0x289ac5(0x247)](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x45b872=a0_0x3aa75c,_0x35e988=document['querySelectorAll'](_0x45b872(0x316));let _0x38011c=null,_0x1cbe12=new Set();_0x35e988[_0x45b872(0x311)](_0x2081db=>{_0x2081db['addEventListener']('click',function(){const _0x533205=a0_0x150f,_0x376193=this['getAttribute']('data-section');if(_0x376193===_0x38011c)return;_0x38011c&&(document[_0x533205(0x351)](_0x38011c)['style']['display']=_0x533205(0x207),_0x35e988['forEach'](_0x2fc63a=>_0x2fc63a['classList']['remove'](_0x533205(0x320)))),document['getElementById'](_0x376193)['style']['display']='block',this['classList'][_0x533205(0x20f)](_0x533205(0x320)),_0x38011c=_0x376193;});});}function loadSectionData(_0x4a6d6a){return;}async function initializeAdminDashboard(){const _0x16fa31=a0_0x3aa75c;try{const _0x3254ed=auth[_0x16fa31(0x2a9)],_0x140329=await getUserTabPermissions(_0x3254ed['email']);console[_0x16fa31(0x181)]('User\x20'+_0x3254ed[_0x16fa31(0x1fe)]+'\x20allowed\x20tabs:',_0x140329),window['userAllowedTabs']=_0x140329,setupSidebarNavigation(_0x140329),setupLadderSelector(),setupDashboardSection(),_0x140329[_0x16fa31(0x262)]('manage-players')&&setupManagePlayersSection(),_0x140329['includes']('elo-history')&&setupEloHistorySection(),_0x140329[_0x16fa31(0x262)]('manage-ranks')&&setupRankControls(),_0x140329['includes'](_0x16fa31(0x303))&&setupManageArticlesSection(),_0x140329['includes']('user-roles-section')&&setupUserRolesSection(),_0x140329[_0x16fa31(0x262)](_0x16fa31(0x23c))&&setupTrophyManagementSection(),_0x140329[_0x16fa31(0x262)]('manage-highlights')&&setupManageHighlightsSection(),_0x140329['includes']('inactive-players')&&setupInactivePlayersSection(),_0x140329['includes'](_0x16fa31(0x171))&&setupManageMatchesSection(),_0x140329['includes']('manage-points')&&setupManagePointsSection(),_0x140329['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x140329);}catch(_0xcdbb4c){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0xcdbb4c);}}function setupDataLoadButtons(_0x17c7cf=[]){const _0x409477=a0_0x3aa75c;(!_0x17c7cf||_0x17c7cf['length']===0x0)&&(_0x17c7cf=[_0x409477(0x2c0)]);const _0x270a97=document['getElementById']('load-dashboard-data');_0x270a97&&_0x270a97[_0x409477(0x271)]('click',function(){const _0x33e509=_0x409477;this['classList'][_0x33e509(0x20f)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()[_0x33e509(0x2bb)](()=>{const _0x4f8412=_0x33e509;this[_0x4f8412(0x288)][_0x4f8412(0x2db)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x5e114e=>{const _0x220081=_0x33e509;console['error']('Error\x20loading\x20dashboard:',_0x5e114e),this['classList'][_0x220081(0x2db)](_0x220081(0x254)),this[_0x220081(0x1ae)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x17c7cf[_0x409477(0x262)]('manage-trophies')){const _0x81387f=document['getElementById']('load-trophies-data');_0x81387f&&_0x81387f[_0x409477(0x271)]('click',function(){const _0x555c96=_0x409477;console[_0x555c96(0x181)]('Load\x20trophies\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0x555c96(0x2bb)](()=>{const _0xc6279c=_0x555c96;this['classList'][_0xc6279c(0x2db)]('loading'),this[_0xc6279c(0x1ae)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x15b7cf=>{const _0x49b103=_0x555c96;console['error'](_0x49b103(0x368),_0x15b7cf),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x315901=_0x49b103;this[_0x315901(0x1ae)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x17c7cf['includes']('manage-players')){const _0x108c30=document['getElementById']('load-players-data');_0x108c30&&_0x108c30['addEventListener']('click',function(){const _0x4a9b22=_0x409477;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x4a9b22(0x1ae)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0xb9ff20=_0x4a9b22;this['classList']['remove'](_0xb9ff20(0x254)),this['innerHTML']=_0xb9ff20(0x1e5);})['catch'](_0x158249=>{const _0xe1c565=_0x4a9b22;console['error'](_0xe1c565(0x1f3),_0x158249),this['classList']['remove']('loading'),this[_0xe1c565(0x1ae)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x17c7cf['includes']('elo-history')){const _0x1a69f7=document[_0x409477(0x351)](_0x409477(0x20a));_0x1a69f7&&_0x1a69f7['addEventListener'](_0x409477(0x247),function(){const _0x583792=_0x409477;console[_0x583792(0x181)]('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x583792(0x306),loadEloHistory(0x1)[_0x583792(0x2bb)](()=>{const _0x3b2a15=_0x583792;this['classList']['remove']('loading'),this[_0x3b2a15(0x1ae)]=_0x3b2a15(0x200);})[_0x583792(0x156)](_0xfd7bf3=>{console['error']('Error\x20loading\x20history:',_0xfd7bf3),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x17c7cf['includes']('manage-articles')){const _0x30081c=document['getElementById']('load-articles-data');_0x30081c&&_0x30081c['addEventListener']('click',function(){const _0x1a58f9=_0x409477;console['log'](_0x1a58f9(0x1b8)),this['classList'][_0x1a58f9(0x20f)](_0x1a58f9(0x254)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x575257=_0x1a58f9;this['classList'][_0x575257(0x2db)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x4b8bb9=>{const _0x205251=_0x1a58f9;console['error']('Error\x20loading\x20articles:',_0x4b8bb9),this['classList']['remove']('loading'),this[_0x205251(0x1ae)]=_0x205251(0x23a),setTimeout(()=>{const _0x4fe68b=_0x205251;this['innerHTML']=_0x4fe68b(0x1ba);},0xbb8);});});}if(_0x17c7cf['includes']('user-roles-section')){const _0x4b40ce=document['getElementById']('load-users-data');_0x4b40ce&&_0x4b40ce['addEventListener']('click',function(){const _0x9d4678=_0x409477;console['log']('Load\x20users\x20data\x20clicked'),this['classList'][_0x9d4678(0x20f)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x9d4678(0x2bb)](()=>{const _0xb677b0=_0x9d4678;this['classList'][_0xb677b0(0x2db)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x471d18=>{const _0x1d6104=_0x9d4678;console['error']('Error\x20loading\x20users:',_0x471d18),this[_0x1d6104(0x288)][_0x1d6104(0x2db)]('loading'),this['innerHTML']=_0x1d6104(0x23a),setTimeout(()=>{const _0xad761e=_0x1d6104;this[_0xad761e(0x1ae)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x17c7cf['includes'](_0x409477(0x166))){const _0x39542e=document['getElementById'](_0x409477(0x26b));_0x39542e&&_0x39542e['addEventListener']('click',function(){const _0x2e8f1e=_0x409477;console['log'](_0x2e8f1e(0x1e1)),this['classList']['add'](_0x2e8f1e(0x254)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x22fa04=_0x2e8f1e;this['classList'][_0x22fa04(0x2db)]('loading'),this[_0x22fa04(0x1ae)]=_0x22fa04(0x1e3);})['catch'](_0x1bdbb7=>{console['error']('Error\x20loading\x20inactive\x20players:',_0x1bdbb7),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x17c7cf['includes']('manage-highlights')){const _0xb7fb88=document['getElementById']('load-highlights-data');_0xb7fb88&&_0xb7fb88['addEventListener']('click',function(){const _0x5b68d0=_0x409477;console['log'](_0x5b68d0(0x260)),this['classList']['add'](_0x5b68d0(0x254)),this[_0x5b68d0(0x1ae)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x5b68d0(0x2bb)](()=>{const _0x373c4c=_0x5b68d0;this['classList']['remove']('loading'),this['innerHTML']=_0x373c4c(0x392);})[_0x5b68d0(0x156)](_0x5df888=>{const _0x687f8e=_0x5b68d0;console['error']('Error\x20loading\x20highlights:',_0x5df888),this['classList']['remove'](_0x687f8e(0x254)),this[_0x687f8e(0x1ae)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x8efee6=_0x687f8e;this['innerHTML']=_0x8efee6(0x392);},0xbb8);});});}if(_0x17c7cf['includes']('manage-matches')){const _0xa2bb2b=document['getElementById']('load-matches-data');_0xa2bb2b&&_0xa2bb2b['addEventListener']('click',function(){const _0x273231=_0x409477;console[_0x273231(0x181)]('Load\x20matches\x20data\x20clicked'),this['classList']['add'](_0x273231(0x254)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x35cf7e=_0x273231;this[_0x35cf7e(0x288)][_0x35cf7e(0x2db)]('loading'),this[_0x35cf7e(0x1ae)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x4c95d9=>{const _0x530eef=_0x273231;console[_0x530eef(0x18d)](_0x530eef(0x1f9),_0x4c95d9),this[_0x530eef(0x288)]['remove']('loading'),this[_0x530eef(0x1ae)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5c816b=_0x530eef;this[_0x5c816b(0x1ae)]=_0x5c816b(0x24a);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x17c7cf['includes']('manage-ribbons')){const _0x18b3ce=document['getElementById']('load-ribbons-data');_0x18b3ce&&_0x18b3ce['addEventListener']('click',function(){const _0x4dc7d3=_0x409477;console[_0x4dc7d3(0x181)](_0x4dc7d3(0x327)),this['classList']['add']('loading'),this[_0x4dc7d3(0x1ae)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x2d0b9b=_0x4dc7d3;this[_0x2d0b9b(0x288)][_0x2d0b9b(0x2db)]('loading'),this[_0x2d0b9b(0x1ae)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})[_0x4dc7d3(0x156)](_0x54bc99=>{const _0x4d9508=_0x4dc7d3;console[_0x4d9508(0x18d)]('Error\x20loading\x20ribbons:',_0x54bc99),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x54f43b=_0x4d9508;this[_0x54f43b(0x1ae)]=_0x54f43b(0x2aa);},0xbb8);});});}console['log'](_0x409477(0x22b));}function setupDashboardSection(){const _0x2a4745=a0_0x3aa75c;document[_0x2a4745(0x351)](_0x2a4745(0x2ce))['textContent']='-',document[_0x2a4745(0x351)]('match-count')['textContent']='-',document[_0x2a4745(0x351)](_0x2a4745(0x318))['textContent']='-',document['getElementById'](_0x2a4745(0x21f))['textContent']='-';}function setupLadderSelector(){const _0x584d68=a0_0x3aa75c,_0x4638df=document[_0x584d68(0x361)]('.ladder-switch\x20input');_0x4638df['forEach'](_0x56c83f=>{const _0x1f846b=_0x584d68;_0x56c83f['addEventListener'](_0x1f846b(0x198),()=>{const _0x2b2587=_0x1f846b;currentLadder=_0x56c83f['value'],document[_0x2b2587(0x395)]['setAttribute']('data-ladder',currentLadder);const _0x48cac8=document['getElementById']('current-ladder-display');_0x48cac8&&(_0x48cac8['textContent']=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x2b2587(0x15b))[_0x2b2587(0x37f)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-',charts[_0x2b2587(0x32c)]&&(charts['rankDistribution']['destroy'](),charts[_0x2b2587(0x32c)]=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x439c56=document['getElementById'](_0x584d68(0x35b));_0x439c56&&(_0x439c56[_0x584d68(0x37f)]=currentLadder);}async function loadDashboardOverview(){const _0x44dc65=a0_0x3aa75c;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x44dc65(0x351)](_0x44dc65(0x2ce))[_0x44dc65(0x37f)]='-',document['getElementById']('match-count')['textContent']='-',document[_0x44dc65(0x351)](_0x44dc65(0x318))['textContent']='-',document['getElementById']('rejected-count')[_0x44dc65(0x37f)]='-';const _0x1b534c=currentLadder==='D1'?'players':currentLadder==='D2'?_0x44dc65(0x317):_0x44dc65(0x2a7),_0x386c9e=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x12bdde=currentLadder==='D1'?_0x44dc65(0x341):currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0xdedefb=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console[_0x44dc65(0x181)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x1b534c+',\x20'+_0x386c9e);const _0x5c5564=await getDocs(collection(db,_0x1b534c)),_0x48053a=_0x5c5564['size'],_0x5867c0=await getDocs(collection(db,_0x386c9e)),_0x29dda9=_0x5867c0['size'],_0x31724c=await getDocs(collection(db,_0x12bdde)),_0x39d4e0=_0x31724c[_0x44dc65(0x376)],_0x365c73=await getDocs(collection(db,_0xdedefb)),_0x28ca96=_0x365c73['size'];return document['getElementById']('player-count')[_0x44dc65(0x37f)]=_0x48053a,document[_0x44dc65(0x351)]('match-count')[_0x44dc65(0x37f)]=_0x29dda9,document[_0x44dc65(0x351)]('pending-count')['textContent']=_0x39d4e0,document['getElementById'](_0x44dc65(0x21f))['textContent']=_0x28ca96,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x333c0b){console['error']('Error\x20loading\x20dashboard\x20data:',_0x333c0b);throw _0x333c0b;}}async function createRankDistributionChart(){const _0x359961=a0_0x3aa75c;try{const _0x1a5eb7=collection(db,currentLadder==='D1'?_0x359961(0x24b):'playersD2'),_0x2402a5=await getDocs(_0x1a5eb7),_0x4f40ba={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x2402a5['forEach'](_0x2146c9=>{const _0x4c6c61=_0x359961,_0x14ab5f=_0x2146c9['data'](),_0x2b4202=_0x14ab5f[_0x4c6c61(0x235)]||0x4b0;if(_0x2b4202>=0x7d0)_0x4f40ba['Emerald']++;else{if(_0x2b4202>=0x708)_0x4f40ba['Gold']++;else{if(_0x2b4202>=0x640)_0x4f40ba['Silver']++;else{if(_0x2b4202>=0x578)_0x4f40ba['Bronze']++;else _0x4f40ba['Unranked']++;}}}});const _0x5d7cfb=document['getElementById']('rank-distribution-chart');charts[_0x359961(0x32c)]&&charts['rankDistribution']['destroy'](),charts[_0x359961(0x32c)]=new Chart(_0x5d7cfb,{'type':'doughnut','data':{'labels':Object['keys'](_0x4f40ba),'datasets':[{'data':Object['values'](_0x4f40ba),'backgroundColor':['#808080','#CD7F32','#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x359961(0x32b)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x3ef89e){console['error'](_0x359961(0x28f),_0x3ef89e),document[_0x359961(0x351)]('rank-distribution-chart')[_0x359961(0x1ae)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x39aeef=a0_0x3aa75c;try{const _0x355c8d=currentLadder==='D1'?_0x39aeef(0x335):'approvedMatchesD2',_0x269676=collection(db,_0x355c8d),_0x179b6e=new Date();_0x179b6e['setDate'](_0x179b6e['getDate']()-0x7);const _0x555dbc=query(_0x269676,where('approvedAt','>=',_0x179b6e),orderBy(_0x39aeef(0x314),'asc')),_0x248f43=await getDocs(_0x555dbc),_0x246644=[_0x39aeef(0x35d),'Monday','Tuesday',_0x39aeef(0x1cd),_0x39aeef(0x36e),_0x39aeef(0x225),'Saturday'],_0x374543=_0x246644[_0x39aeef(0x296)]((_0x24ba43,_0x52e675)=>({..._0x24ba43,[_0x52e675]:0x0}),{});_0x248f43[_0x39aeef(0x311)](_0x30fa7c=>{const _0x1f7f1c=_0x39aeef,_0x25ff59=_0x30fa7c['data']();if(_0x25ff59['approvedAt']){const _0x42be22=_0x246644[new Date(_0x25ff59['approvedAt'][_0x1f7f1c(0x32f)]*0x3e8)['getDay']()];_0x374543[_0x42be22]++;}});const _0x530894=document['getElementById'](_0x39aeef(0x2c5));charts[_0x39aeef(0x1ed)]&&charts['activity'][_0x39aeef(0x30e)](),charts['activity']=new Chart(_0x530894,{'type':_0x39aeef(0x27f),'data':{'labels':_0x246644,'datasets':[{'label':_0x39aeef(0x15e),'data':_0x246644['map'](_0x493609=>_0x374543[_0x493609]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x39aeef(0x238)}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x39aeef(0x32e),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x4bcd04){console['error']('Error\x20creating\x20activity\x20chart:',_0x4bcd04),document['getElementById'](_0x39aeef(0x2c5))['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x17b890=a0_0x3aa75c,_0x31dd7b=document['getElementById']('players-table-body');if(!_0x31dd7b)return;_0x31dd7b['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x44a8a3='players';if(currentLadder==='D2')_0x44a8a3='playersD2';else currentLadder==='D3'&&(_0x44a8a3=_0x17b890(0x2a7));console['log']('Loading\x20players\x20from\x20'+_0x44a8a3+_0x17b890(0x2de));const _0x3459bc=collection(db,_0x44a8a3),_0x5350a1=query(_0x3459bc,orderBy('eloRating',_0x17b890(0x33b))),_0x1947ec=await getDocs(_0x5350a1);if(_0x1947ec[_0x17b890(0x2ac)]){_0x31dd7b['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x31dd7b['innerHTML']='';let _0x4c48cb=0x1;_0x1947ec['forEach'](_0x84707b=>{const _0xffb49c=_0x17b890,_0x5a88db=_0x84707b['data'](),_0x3af1d5=getRankFromElo(_0x5a88db['eloRating']||0x4b0),_0x356fdb=getRankStyle(_0x5a88db['eloRating']||0x4b0),_0x5b393e=document['createElement']('tr');_0x5b393e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x4c48cb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x356fdb['color']+_0xffb49c(0x364)+(_0x5a88db['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x5a88db['eloRating']||0x4b0)+_0xffb49c(0x30b)+_0x356fdb['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3af1d5+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5a88db['wins']||0x0)+_0xffb49c(0x369)+(_0x5a88db['losses']||0x0)+_0xffb49c(0x326)+_0x84707b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x84707b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x31dd7b['appendChild'](_0x5b393e),_0x4c48cb++;}),setupPlayerActionButtons();}catch(_0xc4672b){console['error'](_0x17b890(0x1f3),_0xc4672b),_0x31dd7b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0xc4672b['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x296b03){if(_0x296b03>=0x7d0)return'Emerald';if(_0x296b03>=0x708)return'Gold';if(_0x296b03>=0x640)return'Silver';if(_0x296b03>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x178e20=a0_0x3aa75c;document['querySelectorAll']('.edit-btn')['forEach'](_0x52c3bf=>{_0x52c3bf['addEventListener']('click',async _0x136853=>{const _0x3b6e83=_0x136853['currentTarget']['dataset']['id'];openEditPlayerModal(_0x3b6e83);});}),document['querySelectorAll']('.delete-btn')[_0x178e20(0x311)](_0x42ce6e=>{_0x42ce6e['addEventListener']('click',async _0x5c0613=>{const _0x5aebf7=a0_0x150f,_0xc42dbd=_0x5c0613['currentTarget'][_0x5aebf7(0x1bc)]['id'];confirmDeletePlayer(_0xc42dbd);});});}async function openEditPlayerModal(_0x4f7fcc){const _0x51f88a=a0_0x3aa75c;try{const _0x25ab54=currentLadder==='D1'?_0x51f88a(0x24b):_0x51f88a(0x317),_0x5ad853=doc(db,_0x25ab54,_0x4f7fcc),_0x20beb1=await getDoc(_0x5ad853);if(!_0x20beb1['exists']()){showNotification('Player\x20not\x20found',_0x51f88a(0x18d));return;}const _0x4dd1b6=_0x20beb1['data'](),_0x11d2f2=document['getElementById'](_0x51f88a(0x30c)),_0x4b5210=document['getElementById']('edit-username'),_0x19ac3a=document['getElementById']('edit-elo'),_0x441235=document['getElementById'](_0x51f88a(0x2f2)),_0x2b524d=document['getElementById']('edit-losses');_0x4b5210['value']=_0x4dd1b6['username']||'',_0x19ac3a['value']=_0x4dd1b6['eloRating']||0x4b0,_0x441235[_0x51f88a(0x19c)]=_0x4dd1b6['wins']||0x0,_0x2b524d['value']=_0x4dd1b6['losses']||0x0,_0x11d2f2['dataset']['playerId']=_0x4f7fcc,_0x11d2f2['classList']['add'](_0x51f88a(0x320));}catch(_0x3d0ac7){console['error'](_0x51f88a(0x1df),_0x3d0ac7),showNotification(_0x51f88a(0x17b),'error');}}async function saveEditedPlayer(){const _0x4230db=a0_0x3aa75c;try{const _0x80f86a=document['getElementById']('edit-player-modal'),_0x48ca8f=_0x80f86a['dataset']['playerId'];if(!_0x48ca8f){showNotification(_0x4230db(0x286),'error');return;}const _0x548abe=document['getElementById']('edit-username'),_0x376aa0=document['getElementById']('edit-elo'),_0x4d582c=document['getElementById'](_0x4230db(0x2f2)),_0x6d1d90=document[_0x4230db(0x351)](_0x4230db(0x215)),_0x113642=_0x548abe['value'][_0x4230db(0x284)](),_0x735017=parseInt(_0x376aa0[_0x4230db(0x19c)]),_0x42bb30=parseInt(_0x4d582c['value']),_0x142ecd=parseInt(_0x6d1d90['value']);if(!_0x113642||isNaN(_0x735017)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x4230db(0x18d));return;}const _0x3bfd82=currentLadder==='D1'?'players':_0x4230db(0x317),_0x2526e3=doc(db,_0x3bfd82,_0x48ca8f),_0x55632d=await getDoc(_0x2526e3),_0x1c4e43=_0x55632d[_0x4230db(0x27e)]()?_0x55632d['data']():{},_0x55bfb7=_0x1c4e43['eloRating']||0x4b0;await updateDoc(_0x2526e3,{'username':_0x113642,'eloRating':_0x735017,'wins':_0x42bb30||0x0,'losses':_0x142ecd||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x4230db(0x1fe)]});if(_0x735017!==_0x55bfb7){const _0x32d9fd=currentLadder==='D1'?_0x4230db(0x1e7):'eloHistoryD2';await addDoc(collection(db,_0x32d9fd),{'player':_0x113642,'previousElo':_0x55bfb7,'newElo':_0x735017,'timestamp':serverTimestamp(),'type':_0x4230db(0x1d2),'modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x4230db(0x170));}catch(_0x4b9302){console[_0x4230db(0x18d)]('Error\x20updating\x20player:',_0x4b9302),showNotification(_0x4230db(0x2d8)+_0x4b9302[_0x4230db(0x186)],'error');}}function closeEditPlayerModal(){const _0x1973b8=a0_0x3aa75c,_0x4efec0=document['getElementById'](_0x1973b8(0x30c));_0x4efec0[_0x1973b8(0x288)]['remove']('active'),_0x4efec0['dataset']['playerId']='';}async function confirmDeletePlayer(_0x3014c2){const _0x506d7d=a0_0x3aa75c;if(confirm(_0x506d7d(0x226)))try{const _0x44829a=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x44829a,_0x3014c2)),loadPlayersData(),showNotification(_0x506d7d(0x2ab),'success');}catch(_0x3a92a8){console[_0x506d7d(0x18d)]('Error\x20deleting\x20player:',_0x3a92a8),showNotification(_0x506d7d(0x153)+_0x3a92a8['message'],_0x506d7d(0x18d));}}async function setupManagePlayersSection(){const _0xf96939=a0_0x3aa75c,_0x5cfd8b=document[_0xf96939(0x351)](_0xf96939(0x2da));_0x5cfd8b&&_0x5cfd8b['addEventListener']('submit',async _0x26d322=>{const _0x23eada=_0xf96939;_0x26d322[_0x23eada(0x233)](),await addNewPlayer();});const _0x17e68a=document['getElementById']('player-search');_0x17e68a&&_0x17e68a['addEventListener'](_0xf96939(0x2e1),debounce(filterPlayerTable,0x12c));const _0x4ae8fc=document['getElementById']('save-player-btn');_0x4ae8fc&&_0x4ae8fc[_0xf96939(0x271)](_0xf96939(0x247),saveEditedPlayer);const _0x1cd926=document[_0xf96939(0x351)](_0xf96939(0x37d));_0x1cd926&&_0x1cd926['addEventListener'](_0xf96939(0x247),closeEditPlayerModal);const _0x4bf762=document[_0xf96939(0x351)]('edit-player-modal');_0x4bf762&&_0x4bf762['addEventListener']('click',_0x2e8d48=>{const _0xe4ed89=_0xf96939;_0x2e8d48[_0xe4ed89(0x1b2)]===_0x4bf762&&closeEditPlayerModal();});const _0x371d07=document[_0xf96939(0x351)]('players-ladder-selector');_0x371d07&&_0x371d07['addEventListener']('change',()=>{currentLadder=_0x371d07['value'],loadPlayersData();});}async function addNewPlayer(){const _0x490f85=a0_0x3aa75c;try{const _0x245f2f=document['getElementById']('new-player-username'),_0x116263=document['getElementById']('new-player-elo'),_0xf884e8=_0x245f2f[_0x490f85(0x19c)][_0x490f85(0x284)](),_0x517db3=parseInt(_0x116263['value'])||0x4b0;if(!_0xf884e8){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0xf884e8+_0x490f85(0x1d9)+_0x517db3+'\x20to\x20'+currentLadder+'\x20ladder');let _0x129ff6='players',_0x11103a='eloHistory';if(currentLadder==='D2')_0x129ff6='playersD2',_0x11103a='eloHistoryD2';else currentLadder==='D3'&&(_0x129ff6='playersD3',_0x11103a=_0x490f85(0x362));const _0x2c027f=query(collection(db,_0x129ff6),where('username','==',_0xf884e8)),_0x4a6f99=await getDocs(_0x2c027f);if(!_0x4a6f99[_0x490f85(0x2ac)]){alert(_0x490f85(0x2b9)+_0xf884e8+_0x490f85(0x2ad)+currentLadder+'\x20ladder');return;}const _0x3968d3=auth[_0x490f85(0x2a9)],_0x24c3d5={'username':_0xf884e8,'eloRating':_0x517db3,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x3968d3?_0x3968d3[_0x490f85(0x1fe)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x129ff6),_0x24c3d5),await addDoc(collection(db,_0x11103a),{'player':_0xf884e8,'previousElo':0x4b0,'newElo':_0x517db3,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x3968d3?_0x3968d3[_0x490f85(0x1fe)]:'admin','gameMode':currentLadder}),_0x245f2f['value']='',_0x116263['value']='1200',alert('Player\x20'+_0xf884e8+_0x490f85(0x2e0)+currentLadder+_0x490f85(0x1af)),loadPlayersData();}catch(_0x376f3b){console['error']('Error\x20adding\x20player:',_0x376f3b),alert('Error\x20adding\x20player:\x20'+_0x376f3b[_0x490f85(0x186)]);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x483bfb=a0_0x3aa75c,_0x27c681=document['getElementById']('add-player-form');_0x27c681&&_0x27c681['addEventListener'](_0x483bfb(0x277),_0x1d3c70=>{_0x1d3c70['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x678101=a0_0x3aa75c,_0x587d15=document['getElementById']('player-search')['value']['toLowerCase'](),_0x226804=document[_0x678101(0x361)](_0x678101(0x322));let _0x583351=0x0;_0x226804[_0x678101(0x311)](_0xbd2678=>{const _0x41dc17=_0x678101,_0xfb9c64=_0xbd2678['querySelector']('.username')?.[_0x41dc17(0x37f)][_0x41dc17(0x1e6)]()||'';_0xfb9c64['includes'](_0x587d15)?(_0xbd2678['style']['display']='',_0x583351++):_0xbd2678['style']['display']='none';});const _0xce986d=document['getElementById']('no-results-message');_0xce986d&&(_0x583351===0x0&&_0x587d15!==''?_0xce986d['style'][_0x678101(0x221)]='block':_0xce986d['style']['display']='none');}function debounce(_0xb6d9d1,_0xf4c9da){let _0x478916;return function(..._0x53ffcd){clearTimeout(_0x478916),_0x478916=setTimeout(()=>_0xb6d9d1['apply'](this,_0x53ffcd),_0xf4c9da);};}async function loadEloHistory(_0xd4bf05=0x1){const _0x51eeff=a0_0x3aa75c,_0x4a7a5e=document[_0x51eeff(0x351)]('elo-history-table-body'),_0xca529f=currentLadder['toLowerCase']();if(!_0x4a7a5e)return;_0x4a7a5e[_0x51eeff(0x1ae)]=_0x51eeff(0x1d4);try{const _0x57a565=currentLadder==='D1'?_0x51eeff(0x1e7):currentLadder==='D2'?'eloHistoryD2':_0x51eeff(0x362),_0x4ff6f8=collection(db,_0x57a565);let _0x2ea8b6;if(_0xd4bf05>eloHistoryPagination[_0xca529f]['page']&&eloHistoryPagination[_0xca529f][_0x51eeff(0x36a)])_0x2ea8b6=query(_0x4ff6f8,orderBy('timestamp',_0x51eeff(0x33b)),startAfter(eloHistoryPagination[_0xca529f]['lastVisible']),limit(PAGE_SIZE));else _0xd4bf05<eloHistoryPagination[_0xca529f]['page']&&eloHistoryPagination[_0xca529f]['firstVisible']?_0x2ea8b6=query(_0x4ff6f8,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0xca529f]['firstVisible']),limitToLast(PAGE_SIZE)):_0x2ea8b6=query(_0x4ff6f8,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x370def=await getDocs(_0x2ea8b6);if(_0x370def[_0x51eeff(0x2ac)]){_0x4a7a5e['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0xca529f+_0x51eeff(0x17e))['textContent']=_0x51eeff(0x372);return;}eloHistoryPagination[_0xca529f]['page']=_0xd4bf05,eloHistoryPagination[_0xca529f]['firstVisible']=_0x370def['docs'][0x0],eloHistoryPagination[_0xca529f]['lastVisible']=_0x370def['docs'][_0x370def['docs']['length']-0x1];const _0xc21894=new Map();_0x4a7a5e[_0x51eeff(0x1ae)]='';const _0x351f26=async _0xe7c65b=>{const _0x31cd49=_0x51eeff;if(typeof _0xe7c65b!==_0x31cd49(0x2d4)||_0xe7c65b[_0x31cd49(0x218)]<0x14||/[^a-zA-Z0-9-_]/['test'](_0xe7c65b))return _0xe7c65b;if(_0xc21894[_0x31cd49(0x302)](_0xe7c65b))return _0xc21894['get'](_0xe7c65b);try{for(const _0x4a3b7 of['players','playersD2','playersD3','nonParticipants']){const _0x27a6c3=await getDoc(doc(db,_0x4a3b7,_0xe7c65b));if(_0x27a6c3['exists']()&&_0x27a6c3['data']()['username']){const _0x5d8d8c=_0x27a6c3[_0x31cd49(0x1cb)]()[_0x31cd49(0x389)];return _0xc21894['set'](_0xe7c65b,_0x5d8d8c),_0x5d8d8c;}}return _0xe7c65b;}catch(_0x3034e2){return console[_0x31cd49(0x274)]('Error\x20resolving\x20username\x20for\x20'+_0xe7c65b+':',_0x3034e2),_0xe7c65b;}};for(const _0x57bbcf of _0x370def['docs']){const _0x323ae3=_0x57bbcf['data'](),_0x238ec2=document[_0x51eeff(0x324)]('tr'),_0x36f912=_0x323ae3['timestamp']?new Date(_0x323ae3[_0x51eeff(0x382)][_0x51eeff(0x32f)]*0x3e8)['toLocaleString']():'N/A',_0x47bf19=_0x323ae3['newElo']-_0x323ae3['previousElo'],_0x4cc015=_0x47bf19>0x0?'positive-change':_0x47bf19<0x0?'negative-change':'',_0x46b8b3=_0x47bf19>0x0?'+':'',_0x6f6522=_0x323ae3['player']||_0x323ae3['username']||_0x323ae3[_0x51eeff(0x33f)]||'N/A',_0x4c27a6=await _0x351f26(_0x6f6522);_0x238ec2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x36f912+_0x51eeff(0x353)+_0x4c27a6+_0x51eeff(0x143)+(_0x323ae3['previousElo']||_0x51eeff(0x173))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x323ae3['newElo']||'N/A')+_0x51eeff(0x2ed)+_0x4cc015+'\x22>'+_0x46b8b3+_0x47bf19+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x323ae3['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x323ae3['modifiedBy']||_0x323ae3[_0x51eeff(0x224)]||_0x323ae3['demotedBy']||'System')+_0x51eeff(0x23d),_0x4a7a5e['appendChild'](_0x238ec2);}document['getElementById'](_0xca529f+'-page-indicator')['textContent']=_0x51eeff(0x18c)+_0xd4bf05;const _0x3fd186=document[_0x51eeff(0x351)](_0xca529f+'-prev-page'),_0x523f0d=document['getElementById'](_0xca529f+'-next-page');if(_0x3fd186)_0x3fd186['disabled']=_0xd4bf05<=0x1;const _0x374564=query(_0x4ff6f8,orderBy('timestamp',_0x51eeff(0x33b)),startAfter(eloHistoryPagination[_0xca529f]['lastVisible']),limit(0x1)),_0x38b0de=await getDocs(_0x374564);if(_0x523f0d)_0x523f0d['disabled']=_0x38b0de['empty'];}catch(_0x33ffcf){console['error']('Error\x20loading\x20ELO\x20history:',_0x33ffcf),_0x4a7a5e['innerHTML']=_0x51eeff(0x308)+_0x33ffcf[_0x51eeff(0x186)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x5223cd){const _0x2b3a2c=a0_0x3aa75c;switch(_0x5223cd){case'match_result':return'Match\x20Result';case'promotion':return'Promotion';case'demotion':return _0x2b3a2c(0x21b);case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x5223cd||'Unknown';}}function setupEloHistorySection(){const _0x46c989=a0_0x3aa75c;document['getElementById']('d1-prev-page')['addEventListener'](_0x46c989(0x247),()=>{const _0x1e3c31=_0x46c989;loadEloHistory(eloHistoryPagination['d1'][_0x1e3c31(0x29f)]-0x1);}),document[_0x46c989(0x351)]('d1-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')[_0x46c989(0x271)]('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x1b268e=document['getElementById'](_0x46c989(0x343)),_0x25521e=document['getElementById']('d3-next-page');_0x1b268e&&_0x1b268e['addEventListener']('click',()=>{const _0x266188=_0x46c989;loadEloHistory(eloHistoryPagination['d3'][_0x266188(0x29f)]-0x1);});_0x25521e&&_0x25521e[_0x46c989(0x271)](_0x46c989(0x247),()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x3e08ab=document['getElementById'](_0x46c989(0x340));_0x3e08ab&&_0x3e08ab['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x484e23=document['getElementById']('history-type-filter');_0x484e23&&_0x484e23['addEventListener']('change',applyEloHistoryFilters);const _0x8f5d39=document[_0x46c989(0x351)]('reset-history-filters');_0x8f5d39&&_0x8f5d39['addEventListener'](_0x46c989(0x247),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x505e22=a0_0x3aa75c,_0x5eedfd=document[_0x505e22(0x351)]('elo-history-search')['value']['toLowerCase'](),_0x2624bd=document[_0x505e22(0x361)]('#elo-history-table-body\x20tr');let _0xe374b7=0x0;_0x2624bd['forEach'](_0x21f03d=>{const _0xa442c2=_0x505e22;if(_0x21f03d[_0xa442c2(0x288)]['contains']('loading-cell')||_0x21f03d['classList'][_0xa442c2(0x165)]('empty-state')||_0x21f03d['classList']['contains']('error-state'))return;const _0x15d89b=_0x21f03d['querySelector'](_0xa442c2(0x315))?.['textContent'][_0xa442c2(0x1e6)]()||'',_0x24ea72=_0x21f03d['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x36252d=_0x21f03d['querySelector'](_0xa442c2(0x1aa))?.['textContent']['toLowerCase']()||'';_0x15d89b['includes'](_0x5eedfd)||_0x24ea72['includes'](_0x5eedfd)||_0x36252d['includes'](_0x5eedfd)?(_0x21f03d['style']['display']='',_0xe374b7++):_0x21f03d[_0xa442c2(0x2f7)]['display']='none';});}async function applyEloHistoryFilters(){const _0x553e62=a0_0x3aa75c,_0x7b50b5=document[_0x553e62(0x351)](_0x553e62(0x16f))[_0x553e62(0x19c)],_0x1e73af=document['getElementById']('history-end-date')['value'],_0x11d17f=document['getElementById'](_0x553e62(0x1b7))[_0x553e62(0x19c)],_0x317d97=currentLadder[_0x553e62(0x1e6)]();eloHistoryPagination[_0x317d97]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x28481c=document['getElementById']('elo-history-table-body');_0x28481c['innerHTML']=_0x553e62(0x1ff);try{const _0x258764=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x219759=collection(db,_0x258764);let _0x5cb583=[orderBy(_0x553e62(0x382),'desc')];if(_0x7b50b5){const _0x34d4b9=new Date(_0x7b50b5);_0x34d4b9[_0x553e62(0x352)](0x0,0x0,0x0,0x0),_0x5cb583['push'](where('timestamp','>=',_0x34d4b9));}if(_0x1e73af){const _0x174c00=new Date(_0x1e73af);_0x174c00['setHours'](0x17,0x3b,0x3b,0x3e7),_0x5cb583['push'](where('timestamp','<=',_0x174c00));}_0x11d17f&&_0x11d17f!=='all'&&_0x5cb583[_0x553e62(0x2f5)](where('type','==',_0x11d17f));_0x5cb583[_0x553e62(0x2f5)](limit(PAGE_SIZE));const _0x4c9bfe=query(_0x219759,..._0x5cb583),_0x318acf=await getDocs(_0x4c9bfe);!_0x318acf['empty']&&(eloHistoryPagination[_0x317d97]['firstVisible']=_0x318acf['docs'][0x0],eloHistoryPagination[_0x317d97]['lastVisible']=_0x318acf[_0x553e62(0x337)][_0x318acf['docs'][_0x553e62(0x218)]-0x1]);_0x28481c['innerHTML']='';if(_0x318acf['empty']){_0x28481c[_0x553e62(0x1ae)]=_0x553e62(0x331);return;}_0x318acf['forEach'](_0x17b618=>{const _0x10e693=_0x553e62,_0x584d82=_0x17b618[_0x10e693(0x1cb)](),_0x291d40=document['createElement']('tr'),_0x20578e=_0x584d82[_0x10e693(0x382)]?new Date(_0x584d82['timestamp'][_0x10e693(0x32f)]*0x3e8)[_0x10e693(0x1ec)]():'N/A',_0xb439d6=_0x584d82['newElo']-_0x584d82['previousElo'],_0x28d7b6=_0xb439d6>0x0?_0x10e693(0x1a1):_0xb439d6<0x0?'negative-change':'',_0x24e41e=_0xb439d6>0x0?'+':'',_0x5c914d=_0x584d82['player']||_0x584d82['username']||_0x584d82[_0x10e693(0x33f)]||'N/A';_0x291d40[_0x10e693(0x1ae)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x20578e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x5c914d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x584d82[_0x10e693(0x2f3)]||_0x10e693(0x173))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x584d82['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x28d7b6+'\x22>'+_0x24e41e+_0xb439d6+_0x10e693(0x222)+formatHistoryType(_0x584d82[_0x10e693(0x15c)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x584d82['modifiedBy']||_0x584d82['promotedBy']||_0x584d82['demotedBy']||_0x10e693(0x248))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x28481c['appendChild'](_0x291d40);}),document['getElementById'](_0x317d97+'-page-indicator')['textContent']='Page\x201';}catch(_0x2176cf){console[_0x553e62(0x18d)]('Error\x20applying\x20filters:',_0x2176cf),_0x28481c[_0x553e62(0x1ae)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x2176cf['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x30d703=a0_0x3aa75c;document['getElementById']('history-start-date')['value']='',document['getElementById'](_0x30d703(0x1ee))['value']='',document[_0x30d703(0x351)]('history-type-filter')[_0x30d703(0x19c)]='all',document[_0x30d703(0x351)]('elo-history-search')['value']='';const _0x509f94=currentLadder[_0x30d703(0x1e6)]();eloHistoryPagination[_0x509f94]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x3e3af6=a0_0x3aa75c,_0xe33f35=document[_0x3e3af6(0x351)]('promote-player-btn'),_0x811def=document['getElementById']('promote-modal'),_0x2208e9=document[_0x3e3af6(0x351)]('promote-form');_0xe33f35&&_0x811def&&_0x2208e9&&(_0xe33f35['addEventListener']('click',()=>{_0x811def['classList']['add']('active');}),_0x811def['addEventListener']('click',_0x4e4a4c=>{const _0x5b6377=_0x3e3af6;_0x4e4a4c[_0x5b6377(0x1b2)]===_0x811def&&_0x811def['classList'][_0x5b6377(0x2db)](_0x5b6377(0x320));}),_0x2208e9[_0x3e3af6(0x271)](_0x3e3af6(0x277),async _0x4c5d9d=>{const _0x30b22c=_0x3e3af6;_0x4c5d9d['preventDefault']();const _0x49ed28=document['getElementById']('promote-username'),_0x386fb1=document[_0x30b22c(0x351)](_0x30b22c(0x2b1)),_0x5a9a6c=_0x49ed28['value']['trim'](),_0x54c8f0=_0x386fb1['value'];if(!_0x5a9a6c){showNotification(_0x30b22c(0x257),_0x30b22c(0x18d));return;}try{await promotePlayer(_0x5a9a6c,_0x54c8f0),_0x811def['classList']['remove']('active'),_0x49ed28['value']='';}catch(_0x5cd0c4){showNotification(_0x5cd0c4['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{const _0x5a9aee=_0x3e3af6;_0x811def['classList']['remove'](_0x5a9aee(0x320));}));const _0x5ec508=document['getElementById'](_0x3e3af6(0x13f)),_0x3d140c=document['getElementById']('demote-modal'),_0x443ac0=document['getElementById']('demote-form');_0x5ec508&&_0x3d140c&&_0x443ac0&&(_0x5ec508[_0x3e3af6(0x271)](_0x3e3af6(0x247),()=>{_0x3d140c['classList']['add']('active');}),_0x3d140c['addEventListener']('click',_0x543233=>{const _0x6b8130=_0x3e3af6;_0x543233[_0x6b8130(0x1b2)]===_0x3d140c&&_0x3d140c['classList'][_0x6b8130(0x2db)]('active');}),_0x443ac0['addEventListener']('submit',async _0x4eca30=>{const _0x5aa309=_0x3e3af6;_0x4eca30[_0x5aa309(0x233)]();const _0x12d8fb=document['getElementById'](_0x5aa309(0x24e)),_0x5d9b47=document['getElementById']('demote-ladder'),_0x3fa0da=_0x12d8fb[_0x5aa309(0x19c)]['trim'](),_0x218b30=_0x5d9b47[_0x5aa309(0x19c)];if(!_0x3fa0da){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x3fa0da,_0x218b30),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById'](_0x5aa309(0x24e))[_0x5aa309(0x19c)]='';}catch(_0x27d015){console['error'](_0x5aa309(0x34d),_0x27d015);}}));const _0x458f9c=document[_0x3e3af6(0x351)](_0x3e3af6(0x16b)),_0x47fad7=document[_0x3e3af6(0x351)]('set-elo-modal'),_0x1bd0b0=document['getElementById'](_0x3e3af6(0x25c));_0x458f9c&&_0x47fad7&&_0x1bd0b0&&(_0x458f9c['addEventListener']('click',()=>{const _0x3fdebe=_0x3e3af6;_0x47fad7[_0x3fdebe(0x288)]['add']('active');}),_0x47fad7['addEventListener']('click',_0x4dcee6=>{_0x4dcee6['target']===_0x47fad7&&_0x47fad7['classList']['remove']('active');}),_0x1bd0b0['addEventListener'](_0x3e3af6(0x277),async _0x3cf4ca=>{const _0x5e605f=_0x3e3af6;_0x3cf4ca[_0x5e605f(0x233)]();const _0x388fb0=document['getElementById']('set-elo-username'),_0x379713=document['getElementById']('set-elo-value');let _0x3e5709;const _0x41ef6d=document['getElementById']('set-elo-ladder'),_0x12d078=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x41ef6d)_0x3e5709=_0x41ef6d['value'];else _0x12d078?_0x3e5709=_0x12d078[_0x5e605f(0x19c)]:_0x3e5709='D1';if(!_0x388fb0||!_0x379713){showNotification('Form\x20elements\x20are\x20missing',_0x5e605f(0x18d));return;}const _0x3238c2=_0x388fb0[_0x5e605f(0x19c)][_0x5e605f(0x284)](),_0xf5ae9b=parseInt(_0x379713[_0x5e605f(0x19c)]);if(!_0x3238c2||isNaN(_0xf5ae9b)){showNotification(_0x5e605f(0x204),_0x5e605f(0x18d));return;}try{await setCustomElo(_0x3238c2,_0xf5ae9b,_0x3e5709),_0x47fad7['classList']['remove']('active'),_0x388fb0[_0x5e605f(0x19c)]='',_0x379713['value']='';}catch(_0x2c20f0){showNotification(_0x2c20f0[_0x5e605f(0x186)],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener'](_0x3e3af6(0x247),()=>{const _0x4f3a74=_0x3e3af6;_0x47fad7['classList'][_0x4f3a74(0x2db)](_0x4f3a74(0x320));}));const _0x315f46=document[_0x3e3af6(0x351)](_0x3e3af6(0x149)),_0x3c32aa=document[_0x3e3af6(0x351)]('set-role-form');if(_0x315f46&&_0x3c32aa){_0x315f46['addEventListener']('click',_0x634fa6=>{_0x634fa6['target']===_0x315f46&&closeModalHandler();}),_0x3c32aa['addEventListener']('submit',async _0x308c30=>{const _0x33aaf3=_0x3e3af6;_0x308c30[_0x33aaf3(0x233)]();const _0x2fc2e8=document['getElementById'](_0x33aaf3(0x162)),_0xcad4ab=document[_0x33aaf3(0x351)]('role-name'),_0x3f3359=document['getElementById']('role-color'),_0x2871ba=_0x2fc2e8['value']['trim'](),_0x2776a=_0xcad4ab['value']['trim'](),_0x2ed1c1=_0x3f3359['value'];if(!_0x2871ba){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x2871ba,_0x2776a,_0x2ed1c1),closeModalHandler(),loadUsersWithRoles();}catch(_0x136cba){}});const _0x18da32=document['getElementById']('cancel-role-btn');_0x18da32&&(_0x18da32['removeEventListener']('click',closeModalHandler),_0x18da32[_0x3e3af6(0x271)]('click',closeModalHandler));}}async function promotePlayer(_0x92af33,_0x3d2310){const _0x539271=a0_0x3aa75c;try{console['log'](_0x539271(0x1ac)+_0x92af33+'\x20in\x20'+_0x3d2310+'\x20ladder');const _0x9c4ef1=auth[_0x539271(0x2a9)];if(!_0x9c4ef1)throw new Error(_0x539271(0x373));const _0x248301=_0x3d2310==='D2'?'playersD2':'players',_0x509d38=_0x3d2310==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x248301);const _0xe64c19=collection(db,_0x248301),_0xaf6349=query(_0xe64c19,where(_0x539271(0x389),'==',_0x92af33)),_0x3d9ce4=await getDocs(_0xaf6349);if(_0x3d9ce4['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x3d2310+_0x539271(0x189));throw new Error(_0x539271(0x154)+_0x3d2310+_0x539271(0x189));}const _0x12d506=_0x3d9ce4['docs'][0x0],_0x341741=_0x12d506[_0x539271(0x1cb)](),_0x40ece1=_0x341741[_0x539271(0x235)]||0x4b0,_0x4485e4=_0x12d506['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x40ece1);const _0x1cfbe4=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':_0x539271(0x313),'elo':0x708},{'name':_0x539271(0x377),'elo':0x7d0}];let _0x2f3fc8=_0x1cfbe4[_0x539271(0x2e3)](_0x205cbd=>_0x205cbd['elo']>_0x40ece1);if(!_0x2f3fc8){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x3d2310+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x3d2310+_0x539271(0x189));}console['log']('Promoting\x20player\x20to\x20'+_0x2f3fc8[_0x539271(0x2b8)]+'\x20('+_0x2f3fc8['elo']+')'),await updateDoc(doc(db,_0x248301,_0x12d506['id']),{'eloRating':_0x2f3fc8[_0x539271(0x35e)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x9c4ef1['email']||'admin'}),await addDoc(collection(db,_0x509d38),{'player':_0x92af33,'previousElo':_0x40ece1,'newElo':_0x2f3fc8['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x2f3fc8[_0x539271(0x2b8)],'promotedBy':_0x9c4ef1[_0x539271(0x1fe)]||'admin','gameMode':_0x3d2310});try{const {promotionManager:_0x12d520}=await import('./promotions.js'),_0x23635d=_0x12d520['getRankName'](_0x40ece1),_0x5acf97=_0x2f3fc8['name'];await _0x12d520['sendPromotionNotification'](_0x4485e4,_0x92af33,_0x40ece1,_0x2f3fc8['elo'],_0x23635d,_0x5acf97,_0x539271(0x1ca),{'displayName':_0x92af33,'source':'admin','adminUser':_0x9c4ef1[_0x539271(0x1fe)],'ladder':_0x3d2310}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x49fc7d){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x49fc7d);}return alert('Successfully\x20promoted\x20'+_0x92af33+_0x539271(0x37c)+_0x2f3fc8['name']+'\x20('+_0x2f3fc8['elo']+')'),currentLadder===_0x3d2310&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x56caf4){console['error'](_0x539271(0x1b4),_0x56caf4),alert(_0x539271(0x20e)+_0x56caf4['message']);throw _0x56caf4;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x2559de=a0_0x3aa75c,_0x3a2038=document['getElementById']('promote-form');_0x3a2038&&_0x3a2038[_0x2559de(0x271)]('submit',async _0x3ba7d2=>{const _0xb081ed=_0x2559de;_0x3ba7d2[_0xb081ed(0x233)]();const _0x4f575c=document['getElementById']('promote-username')['value']['trim'](),_0x2970a5=document[_0xb081ed(0x147)]('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x4f575c){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x4f575c,_0x2970a5),document['getElementById']('promote-modal')['classList']['remove'](_0xb081ed(0x320)),document['getElementById']('promote-username')[_0xb081ed(0x19c)]='';}catch(_0x203e12){console['error']('Error\x20in\x20promotion:',_0x203e12);}});});async function demotePlayer(_0x472b7f,_0x484860){const _0x229369=a0_0x3aa75c;try{console[_0x229369(0x181)]('Attempting\x20to\x20demote\x20'+_0x472b7f+_0x229369(0x367)+_0x484860+'\x20ladder');const _0x13b5d9=auth['currentUser'];if(!_0x13b5d9)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x258d93=_0x484860==='D2'?'playersD2':_0x229369(0x24b),_0x3d4ef5=_0x484860==='D2'?_0x229369(0x2c3):'eloHistory';console[_0x229369(0x181)]('Searching\x20for\x20player\x20in\x20'+_0x258d93);const _0x405418=collection(db,_0x258d93),_0x5f41e5=query(_0x405418,where('username','==',_0x472b7f)),_0x10f491=await getDocs(_0x5f41e5);if(_0x10f491['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x484860+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x484860+'\x20ladder');}const _0x5499e0=_0x10f491['docs'][0x0],_0x14982a=_0x5499e0['data'](),_0x4f212e=_0x14982a['eloRating']||0x4b0;console['log'](_0x229369(0x168)+_0x4f212e);const _0x4e1f75=[{'name':_0x229369(0x313),'elo':0x708},{'name':_0x229369(0x2fe),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x112a25=_0x4e1f75['find'](_0x2ee907=>_0x2ee907[_0x229369(0x35e)]<_0x4f212e);if(!_0x112a25){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x484860+_0x229369(0x189));throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x484860+'\x20ladder');}console['log'](_0x229369(0x13e)+_0x112a25['name']+'\x20('+_0x112a25['elo']+')'),await updateDoc(doc(db,_0x258d93,_0x5499e0['id']),{'eloRating':_0x112a25['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x13b5d9['email']||_0x229369(0x304)}),await addDoc(collection(db,_0x3d4ef5),{'player':_0x472b7f,'previousElo':_0x4f212e,'newElo':_0x112a25['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x112a25['name'],'demotedBy':_0x13b5d9['email']||'admin','gameMode':_0x484860});try{const {promotionManager:_0x5dd87c}=await import(_0x229369(0x2d0)),_0x107947=_0x5dd87c['getRankName'](_0x4f212e),_0x59e858=_0x112a25[_0x229369(0x2b8)];await _0x5dd87c[_0x229369(0x366)](_0x5499e0['id'],_0x472b7f,_0x4f212e,_0x112a25['elo'],_0x107947,_0x59e858,_0x229369(0x1c8),{'displayName':_0x472b7f,'source':_0x229369(0x304),'adminUser':_0x13b5d9[_0x229369(0x1fe)],'ladder':_0x484860}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x1b13a3){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x1b13a3);}return alert(_0x229369(0x18f)+_0x472b7f+_0x229369(0x37c)+_0x112a25['name']+'\x20('+_0x112a25['elo']+')'),currentLadder===_0x484860&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0xd4a8f7){console['error']('Error\x20demoting\x20player:',_0xd4a8f7),alert('Error\x20demoting\x20player:\x20'+_0xd4a8f7['message']);throw _0xd4a8f7;}}document[a0_0x3aa75c(0x271)]('DOMContentLoaded',()=>{const _0x54c592=document['getElementById']('demote-form');_0x54c592&&_0x54c592['addEventListener']('submit',async _0x28590b=>{const _0x5e4742=a0_0x150f;_0x28590b[_0x5e4742(0x233)]();const _0x39530d=document['getElementById']('demote-username')[_0x5e4742(0x19c)]['trim'](),_0x290018=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x39530d){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x39530d,_0x290018),document['getElementById']('demote-modal')['classList']['remove'](_0x5e4742(0x320)),document[_0x5e4742(0x351)]('demote-username')['value']='';}catch(_0x5b7561){console[_0x5e4742(0x18d)](_0x5e4742(0x34d),_0x5b7561);}});});async function setCustomElo(_0x397f2f,_0x1b0433,_0x246c0d){const _0x4a6583=a0_0x3aa75c;try{const _0x5d1c55=auth['currentUser'];if(!_0x5d1c55||!isAdmin(_0x5d1c55['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x996fc1=_0x246c0d==='D2'?'playersD2':'players',_0x5781a9=_0x246c0d==='D2'?'eloHistoryD2':'eloHistory',_0x4e384b=collection(db,_0x996fc1),_0x2bf04c=query(_0x4e384b,where('username','==',_0x397f2f)),_0x506203=await getDocs(_0x2bf04c);if(_0x506203[_0x4a6583(0x2ac)])throw new Error(_0x4a6583(0x154)+_0x246c0d+'\x20ladder');const _0x5e38e6=_0x506203['docs'][0x0],_0x3f6892=_0x5e38e6['data'](),_0x490381=_0x3f6892['eloRating']||0x4b0,_0x4433f0=writeBatch(db);_0x4433f0['update'](doc(db,_0x996fc1,_0x5e38e6['id']),{'eloRating':_0x1b0433,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5d1c55['email']});const _0x42678e=doc(collection(db,_0x5781a9));return _0x4433f0['set'](_0x42678e,{'player':_0x397f2f,'previousElo':_0x490381,'newElo':_0x1b0433,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x5d1c55[_0x4a6583(0x1fe)],'gameMode':_0x246c0d}),await _0x4433f0['commit'](),showNotification(_0x4a6583(0x1c1)+_0x397f2f+'\x20was\x20updated\x20from\x20'+_0x490381+_0x4a6583(0x37c)+_0x1b0433,'success'),currentLadder===_0x246c0d&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x1453f9){console['error']('Error\x20setting\x20custom\x20ELO:',_0x1453f9);throw _0x1453f9;}}async function setUserRole(_0x127c0f,_0x16c483,_0x47867c){const _0x37924d=a0_0x3aa75c;try{const _0x26c919=auth['currentUser'];if(!_0x26c919||!isAdmin(_0x26c919[_0x37924d(0x1fe)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x3b1816=_0x16c483?_0x16c483['trim']():null,_0x95031a=_0x3b1816?_0x47867c||'#808080':null,[_0x318ef5,_0x1b2a5c]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x37924d(0x389),'==',_0x127c0f))),getDocs(query(collection(db,_0x37924d(0x317)),where('username','==',_0x127c0f)))]),_0x4a73f2=[];if(!_0x318ef5[_0x37924d(0x2ac)])_0x4a73f2['push']({'ref':_0x318ef5['docs'][0x0]['ref'],'source':'D1'});if(!_0x1b2a5c[_0x37924d(0x2ac)])_0x4a73f2[_0x37924d(0x2f5)]({'ref':_0x1b2a5c['docs'][0x0]['ref'],'source':'D2'});if(_0x4a73f2['length']===0x0){const [_0x5cfcd6,_0xcab8cc]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x127c0f))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x127c0f)))]);if(!_0x5cfcd6[_0x37924d(0x2ac)])_0x4a73f2['push']({'ref':_0x5cfcd6['docs'][0x0]['ref'],'source':'NonParticipant'});if(!_0xcab8cc['empty'])_0x4a73f2['push']({'ref':_0xcab8cc['docs'][0x0][_0x37924d(0x167)],'source':_0x37924d(0x19d)});}if(_0x4a73f2['length']===0x0)throw new Error('User\x20\x22'+_0x127c0f+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x4cba47=writeBatch(db);_0x4a73f2['forEach'](_0x1cfea6=>{const _0xd6217b=_0x37924d;console['log']('Updating\x20role\x20for\x20'+_0x127c0f+'\x20in\x20'+_0x1cfea6['source']),!_0x3b1816?_0x4cba47['update'](_0x1cfea6['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x4cba47['update'](_0x1cfea6[_0xd6217b(0x167)],{'roleName':_0x3b1816,'roleColor':_0x95031a,'roleAssignedBy':_0x26c919['email'],'roleAssignedAt':serverTimestamp()});}),await _0x4cba47['commit']();const _0x235ee0=_0x3b1816?_0x37924d(0x192)+_0x3b1816+'\x22\x20set':'Role\x20removed';return showNotification(_0x235ee0+'\x20for\x20user\x20\x22'+_0x127c0f+'\x22','success'),!![];}catch(_0xad71cb){console['error']('Error\x20setting\x20user\x20role:',_0xad71cb),showNotification('Error:\x20'+_0xad71cb['message'],'error');throw _0xad71cb;}}function showNotification(_0x8d65ce,_0x4815bb='info'){const _0x415f2c=a0_0x3aa75c,_0x38f414=document['createElement']('div');_0x38f414['className']=_0x415f2c(0x38f)+_0x4815bb,_0x38f414['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x4815bb)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x8d65ce+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x38f414),setTimeout(()=>{const _0x3e6c5c=_0x415f2c;_0x38f414[_0x3e6c5c(0x288)]['add']('active');},0xa);const _0x3f15fc=setTimeout(()=>{closeNotification(_0x38f414);},0x1388);_0x38f414['querySelector'](_0x415f2c(0x319))['addEventListener']('click',()=>{clearTimeout(_0x3f15fc),closeNotification(_0x38f414);});}function getNotificationIcon(_0x12342c){const _0x4870f7=a0_0x3aa75c;switch(_0x12342c){case'success':return'fa-check-circle';case _0x4870f7(0x18d):return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case _0x4870f7(0x35a):default:return'fa-info-circle';}}function closeNotification(_0x196bec){const _0xfa2866=a0_0x3aa75c;_0x196bec[_0xfa2866(0x288)]['remove']('active'),setTimeout(()=>{const _0x475232=_0xfa2866;_0x196bec[_0x475232(0x2db)]();},0x12c);}function setupUserRolesSection(){const _0x35a29a=a0_0x3aa75c,_0x1e3a65=document[_0x35a29a(0x351)](_0x35a29a(0x138));_0x1e3a65&&_0x1e3a65[_0x35a29a(0x271)](_0x35a29a(0x247),function(){const _0x2c2457=_0x35a29a;this[_0x2c2457(0x288)][_0x2c2457(0x20f)]('loading'),this[_0x2c2457(0x1ae)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0xa41bbf=_0x2c2457;this['classList']['remove'](_0xa41bbf(0x254)),this[_0xa41bbf(0x1ae)]=_0xa41bbf(0x380);})[_0x2c2457(0x156)](_0x1227cb=>{const _0x1f4c07=_0x2c2457;console['error'](_0x1f4c07(0x33d),_0x1227cb),this[_0x1f4c07(0x288)]['remove'](_0x1f4c07(0x254)),this['innerHTML']=_0x1f4c07(0x23a),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x581398=document['getElementById']('add-new-role-btn');_0x581398&&_0x581398[_0x35a29a(0x271)](_0x35a29a(0x247),()=>{const _0x43e3ad=_0x35a29a,_0x251b1d=document['getElementById']('set-role-modal');_0x251b1d&&_0x251b1d[_0x43e3ad(0x288)]['add']('active');});const _0x1c6b48=document[_0x35a29a(0x351)](_0x35a29a(0x210));_0x1c6b48&&_0x1c6b48['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x459c7a=document['getElementById']('role-filter');_0x459c7a&&_0x459c7a['addEventListener'](_0x35a29a(0x198),filterUsersTable);}async function loadUsersWithRoles(){const _0x5a39e8=a0_0x3aa75c,_0x74a52e=document['getElementById'](_0x5a39e8(0x2b7));if(!_0x74a52e)return;_0x74a52e['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x9b6d2e,_0x4b536c,_0x5a25c0,_0x483e28]=await Promise['all']([getDocs(collection(db,_0x5a39e8(0x24b))),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,_0x5a39e8(0x27c)))]),_0x107bbb=new Map();function _0x40a82d(_0x36261b,_0x20c487){_0x36261b['forEach'](_0x3a140f=>{const _0x9dbac0=a0_0x150f,_0x21f592=_0x3a140f['data']();if(!_0x21f592[_0x9dbac0(0x389)])return;if(!_0x107bbb[_0x9dbac0(0x302)](_0x21f592[_0x9dbac0(0x389)]))_0x107bbb['set'](_0x21f592['username'],{'username':_0x21f592[_0x9dbac0(0x389)],'roleName':_0x21f592['roleName']||null,'roleColor':_0x21f592['roleColor']||null,'roleAssignedBy':_0x21f592[_0x9dbac0(0x26f)]||null,'roleAssignedAt':_0x21f592['roleAssignedAt']||null,'sources':[_0x20c487]});else{const _0x31142b=_0x107bbb[_0x9dbac0(0x359)](_0x21f592[_0x9dbac0(0x389)]);_0x21f592['roleName']&&(!_0x31142b[_0x9dbac0(0x25d)]||_0x20c487==='D1'||_0x20c487==='D2')&&(_0x31142b['roleName']=_0x21f592['roleName'],_0x31142b['roleColor']=_0x21f592['roleColor'],_0x31142b[_0x9dbac0(0x26f)]=_0x21f592[_0x9dbac0(0x26f)],_0x31142b['roleAssignedAt']=_0x21f592['roleAssignedAt']),!_0x31142b[_0x9dbac0(0x1c7)]['includes'](_0x20c487)&&_0x31142b['sources'][_0x9dbac0(0x2f5)](_0x20c487);}});}_0x40a82d(_0x9b6d2e,'D1'),_0x40a82d(_0x4b536c,'D2'),_0x40a82d(_0x5a25c0,'Non-Participant'),_0x40a82d(_0x483e28,'Profile');const _0x6a4329=Array[_0x5a39e8(0x1b3)](_0x107bbb['values']())['sort']((_0x1a0b5e,_0x15937d)=>_0x1a0b5e[_0x5a39e8(0x389)]['localeCompare'](_0x15937d[_0x5a39e8(0x389)]));if(_0x6a4329[_0x5a39e8(0x218)]===0x0){_0x74a52e['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x74a52e['innerHTML']='',_0x6a4329['forEach'](_0x52b64c=>{const _0x486b6a=_0x5a39e8,_0x5c7f14=document['createElement']('tr');_0x5c7f14['dataset']['username']=_0x52b64c['username'],_0x5c7f14['dataset']['roleName']=_0x52b64c[_0x486b6a(0x25d)]||'',_0x5c7f14['dataset']['roleColor']=_0x52b64c['roleColor']||_0x486b6a(0x29c);const _0xdd930e=_0x52b64c[_0x486b6a(0x2b6)]?new Date(_0x52b64c[_0x486b6a(0x2b6)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x4356b6=_0x52b64c['roleName']?_0x486b6a(0x375)+_0x52b64c['roleColor']+';\x20color:\x20'+getContrastColor(_0x52b64c['roleColor'])+';\x22>'+_0x52b64c['roleName']+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x5c7f14['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x52b64c['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x52b64c[_0x486b6a(0x1c7)][_0x486b6a(0x1b9)](',\x20')+_0x486b6a(0x2b0)+_0x4356b6+_0x486b6a(0x26c)+(_0x52b64c['roleAssignedBy']||_0x486b6a(0x173))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xdd930e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x52b64c['username']+_0x486b6a(0x19f)+(_0x52b64c['roleName']?_0x486b6a(0x280)+_0x52b64c['username']+_0x486b6a(0x24f):'')+_0x486b6a(0x23d),_0x74a52e['appendChild'](_0x5c7f14);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x1c79eb=>{_0x1c79eb['addEventListener']('click',()=>{const _0x2d733a=a0_0x150f,_0x1adcbb=_0x1c79eb[_0x2d733a(0x1bc)]['username'];openRoleEditModal(_0x1adcbb);});}),document[_0x5a39e8(0x361)]('.remove-role-btn')['forEach'](_0x5ad432=>{const _0x33358e=_0x5a39e8;_0x5ad432['addEventListener'](_0x33358e(0x247),()=>{const _0x4fad01=_0x33358e,_0x3f9ff6=_0x5ad432[_0x4fad01(0x1bc)][_0x4fad01(0x389)];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x3f9ff6+'?')&&setUserRole(_0x3f9ff6,null,null)['then'](()=>loadUsersWithRoles())[_0x4fad01(0x156)](_0x7e1b5f=>console['error']('Error\x20removing\x20role:',_0x7e1b5f));});});}catch(_0x1b01c4){console[_0x5a39e8(0x18d)]('Error\x20loading\x20users:',_0x1b01c4),_0x74a52e['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0xdee6e2){const _0x15f59c=a0_0x3aa75c;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0xdee6e2);const _0x3cec3b=document['getElementById'](_0x15f59c(0x149)),_0x47dac3=document['getElementById']('role-username'),_0x47bc86=document['getElementById']('user-role');if(!_0x3cec3b){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert(_0x15f59c(0x205));return;}console['log'](_0x15f59c(0x1e2),_0x3cec3b);_0x47dac3?(_0x47dac3['value']=_0xdee6e2,console['log']('Username\x20input\x20set\x20to:\x20'+_0xdee6e2)):console[_0x15f59c(0x274)](_0x15f59c(0x279));const _0x2b2bc7=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0xdee6e2+'\x22]');if(_0x2b2bc7&&_0x47bc86){const _0x42cf48=_0x2b2bc7['dataset']['role'];_0x47bc86[_0x15f59c(0x19c)]=_0x42cf48==='none'?'':_0x42cf48,console[_0x15f59c(0x181)](_0x15f59c(0x2bd)+_0x47bc86[_0x15f59c(0x19c)]+'\x20(based\x20on\x20data-role:\x20'+_0x42cf48+')');}else{if(!_0x2b2bc7)console['warn']('Table\x20row\x20for\x20user\x20'+_0xdee6e2+_0x15f59c(0x283));if(!_0x47bc86)console[_0x15f59c(0x274)]('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x47bc86)_0x47bc86[_0x15f59c(0x19c)]='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x3cec3b[_0x15f59c(0x288)][_0x15f59c(0x20f)]('active');const _0x2dcabc=document['getElementById']('cancel-role-btn');_0x2dcabc?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x2dcabc['removeEventListener']('click',closeModalHandler),_0x2dcabc[_0x15f59c(0x271)]('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x3cec3b['removeEventListener']('click',closeModalBackgroundHandler),_0x3cec3b['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x4b1892){_0x4b1892['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x418b7d=a0_0x3aa75c,_0x2b5111=document['getElementById']('set-role-modal');_0x2b5111&&(_0x2b5111[_0x418b7d(0x288)][_0x418b7d(0x2db)]('active'),_0x2b5111['removeEventListener'](_0x418b7d(0x247),closeModalBackgroundHandler));}function filterUsersTable(){const _0x15cf0d=a0_0x3aa75c,_0x9ad2c1=document['getElementById']('user-search')?.[_0x15cf0d(0x19c)]['toLowerCase']()||'',_0x146630=document['getElementById']('role-filter')?.['value']||_0x15cf0d(0x256),_0xaef4a5=document['querySelectorAll']('#users-table-body\x20tr');let _0x3ba49f=0x0;_0xaef4a5[_0x15cf0d(0x311)](_0x4aa0d5=>{const _0x3c03f7=_0x15cf0d;if(_0x4aa0d5[_0x3c03f7(0x147)]('.loading-cell')||_0x4aa0d5['querySelector']('.empty-state')||_0x4aa0d5['querySelector'](_0x3c03f7(0x251)))return;const _0x15c6d5=_0x4aa0d5['dataset']['username']?.['toLowerCase']()||'',_0x43b5b3=_0x4aa0d5[_0x3c03f7(0x1bc)][_0x3c03f7(0x13c)]||'none',_0x1adeab=_0x15c6d5['includes'](_0x9ad2c1),_0x50aea6=_0x146630===_0x3c03f7(0x256)||_0x43b5b3===_0x146630;_0x1adeab&&_0x50aea6?(_0x4aa0d5['style']['display']='',_0x3ba49f++):_0x4aa0d5[_0x3c03f7(0x2f7)]['display']=_0x3c03f7(0x207);});if(_0x3ba49f===0x0&&_0xaef4a5['length']>0x0){const _0x210eee=document[_0x15cf0d(0x351)]('users-table-body');if(_0x210eee){if(!_0x210eee['querySelector'](_0x15cf0d(0x333))){const _0x3d63f2=document['createElement']('tr');_0x3d63f2['classList']['add']('no-results'),_0x3d63f2['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x210eee['appendChild'](_0x3d63f2);}}}else{const _0x1ea2c1=document['querySelector'](_0x15cf0d(0x333));_0x1ea2c1&&_0x1ea2c1[_0x15cf0d(0x2db)]();}}function setupManageArticlesSection(){const _0x431d52=a0_0x3aa75c,_0x177de5=document['getElementById'](_0x431d52(0x2fd));_0x177de5&&_0x177de5[_0x431d52(0x271)](_0x431d52(0x247),function(){const _0x56c4e8=_0x431d52;this['classList']['add'](_0x56c4e8(0x254)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x572e21=_0x56c4e8;this['classList']['remove']('loading'),this[_0x572e21(0x1ae)]=_0x572e21(0x356);})['catch'](_0x416a3f=>{const _0xe46fc=_0x56c4e8;console[_0xe46fc(0x18d)]('Error\x20loading\x20articles:',_0x416a3f),this[_0xe46fc(0x288)]['remove'](_0xe46fc(0x254)),this['innerHTML']=_0xe46fc(0x23a),setTimeout(()=>{const _0x464ede=_0xe46fc;this[_0x464ede(0x1ae)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x548df1=document['getElementById'](_0x431d52(0x394));_0x548df1?(console[_0x431d52(0x181)]('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x548df1[_0x431d52(0x2f7)]['display']='block',_0x548df1['addEventListener']('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x3db885=document['getElementById'](_0x431d52(0x1d7));_0x3db885&&_0x3db885['addEventListener'](_0x431d52(0x277),_0x5a34c8=>{_0x5a34c8['preventDefault'](),saveArticle();});const _0x4e2630=document['getElementById'](_0x431d52(0x2c1));_0x4e2630&&_0x4e2630['addEventListener']('click',()=>{closeArticleModal();});const _0x11db39=document[_0x431d52(0x147)]('#article-modal\x20.close-btn');_0x11db39&&_0x11db39['addEventListener']('click',()=>{closeArticleModal();});const _0x5ece8a=document['getElementById'](_0x431d52(0x211));_0x5ece8a&&_0x5ece8a[_0x431d52(0x271)]('click',_0x1f8000=>{_0x1f8000['target']===_0x5ece8a&&closeArticleModal();});}async function loadArticles(){const _0x239f8f=a0_0x3aa75c,_0xc7efdc=document['getElementById']('articles-table-body');if(!_0xc7efdc)return;_0xc7efdc['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x4d23c7=collection(db,'articles'),_0x319aea=query(_0x4d23c7,orderBy('createdAt',_0x239f8f(0x33b))),_0xf85498=await getDocs(_0x319aea);if(_0xf85498['empty']){_0xc7efdc[_0x239f8f(0x1ae)]=_0x239f8f(0x241);return;}_0xc7efdc['innerHTML']='',_0xf85498['forEach'](_0x1958ac=>{const _0x5285f3=_0x239f8f,_0x360f85=_0x1958ac['data'](),_0x20336b=document['createElement']('tr'),_0x513e22=_0x360f85['createdAt']?new Date(_0x360f85['createdAt'][_0x5285f3(0x32f)]*0x3e8)['toLocaleString']():_0x5285f3(0x173);_0x20336b['innerHTML']=_0x5285f3(0x38e)+(_0x360f85['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x360f85['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x513e22+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x1958ac['id']+_0x5285f3(0x2c6)+_0x1958ac['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xc7efdc['appendChild'](_0x20336b);}),setupArticleActionButtons();}catch(_0x4d9c5d){console[_0x239f8f(0x18d)]('Error\x20loading\x20articles:',_0x4d9c5d),_0xc7efdc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x4d9c5d['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x4b4adb=a0_0x3aa75c;document['querySelectorAll']('.edit-article-btn')[_0x4b4adb(0x311)](_0x1c81b3=>{_0x1c81b3['addEventListener']('click',async _0x129c8e=>{const _0x3926de=_0x129c8e['currentTarget']['dataset']['id'];openArticleModal(_0x3926de);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x57e018=>{const _0x129fe6=_0x4b4adb;_0x57e018['addEventListener'](_0x129fe6(0x247),async _0x4d0452=>{const _0x4d4783=_0x4d0452['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x4d4783);});});}function openArticleModal(_0xc51ae5=null){const _0x5258ed=a0_0x3aa75c,_0x5f57b3=document['getElementById'](_0x5258ed(0x211)),_0x3c5faa=document['getElementById'](_0x5258ed(0x2fb)),_0x423a1f=document['getElementById'](_0x5258ed(0x1d7)),_0x49f7cd=document['getElementById']('article-id');_0x423a1f['reset'](),_0x49f7cd['value']='';if(_0xc51ae5)_0x3c5faa['textContent']=_0x5258ed(0x355),_0x49f7cd[_0x5258ed(0x19c)]=_0xc51ae5,loadArticleData(_0xc51ae5);else{_0x3c5faa[_0x5258ed(0x37f)]=_0x5258ed(0x1c4);const _0x73383=auth[_0x5258ed(0x2a9)];if(_0x73383){const _0x386fe9=document['getElementById']('article-author');if(_0x386fe9&&_0x73383['displayName'])_0x386fe9['value']=_0x73383[_0x5258ed(0x182)];else _0x386fe9&&(_0x386fe9[_0x5258ed(0x19c)]=_0x73383['email']);}}_0x5f57b3['classList']['add']('active');}async function loadArticleData(_0x1b0fc5){const _0x41d80c=a0_0x3aa75c;try{const _0x1e784a=doc(db,_0x41d80c(0x1a2),_0x1b0fc5),_0x2a969a=await getDoc(_0x1e784a);if(!_0x2a969a[_0x41d80c(0x27e)]()){showNotification('Article\x20not\x20found',_0x41d80c(0x18d));return;}const _0x3b4f85=_0x2a969a[_0x41d80c(0x1cb)]();document['getElementById']('article-title')[_0x41d80c(0x19c)]=_0x3b4f85[_0x41d80c(0x387)]||'',document['getElementById'](_0x41d80c(0x15f))['value']=_0x3b4f85['author']||'',document['getElementById']('article-image-url')['value']=_0x3b4f85['imageUrl']||'',document['getElementById']('article-content')['value']=_0x3b4f85[_0x41d80c(0x33e)]||'';}catch(_0x510c9c){console['error'](_0x41d80c(0x344),_0x510c9c),showNotification(_0x41d80c(0x2f8),_0x41d80c(0x18d));}}async function saveArticle(){const _0xff195b=a0_0x3aa75c;try{const _0x4a5985=document[_0xff195b(0x351)]('article-id')['value'],_0x38053f=document['getElementById']('article-title')['value']['trim'](),_0x31b935=document['getElementById']('article-author')['value']['trim'](),_0x1f8941=document['getElementById']('article-image-url')['value'][_0xff195b(0x284)](),_0x239aa0=document[_0xff195b(0x351)](_0xff195b(0x22e))['value']['trim']();if(!_0x38053f||!_0x239aa0){showNotification(_0xff195b(0x2e4),'error');return;}const _0x294293=auth['currentUser'];if(!_0x294293){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x1fa85a={'title':_0x38053f,'author':_0x31b935,'imageUrl':_0x1f8941||null,'content':_0x239aa0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x294293['email']};!_0x4a5985?(_0x1fa85a['createdAt']=serverTimestamp(),_0x1fa85a['createdBy']=_0x294293['email'],await addDoc(collection(db,'articles'),_0x1fa85a),showNotification(_0xff195b(0x329),'success')):(await updateDoc(doc(db,'articles',_0x4a5985),_0x1fa85a),showNotification('Article\x20updated\x20successfully',_0xff195b(0x170))),closeArticleModal(),loadArticles();}catch(_0x217244){console['error']('Error\x20saving\x20article:',_0x217244),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x217244['message'],_0xff195b(0x18d));}}function closeArticleModal(){const _0x44bc47=a0_0x3aa75c,_0x51a989=document['getElementById']('article-modal');_0x51a989&&_0x51a989['classList'][_0x44bc47(0x2db)](_0x44bc47(0x320));}async function confirmDeleteArticle(_0x1f3652){const _0x20be37=a0_0x3aa75c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x1f3652)),loadArticles(),showNotification(_0x20be37(0x185),'success');}catch(_0xf9920a){console['error']('Error\x20deleting\x20article:',_0xf9920a),showNotification(_0x20be37(0x1b5)+_0xf9920a['message'],'error');}}function setupTrophyManagementSection(){const _0x1415d5=a0_0x3aa75c,_0x4312a6=document['getElementById']('load-trophies-data');_0x4312a6&&_0x4312a6['addEventListener']('click',function(){const _0x2c83f8=a0_0x150f;this[_0x2c83f8(0x288)]['add'](_0x2c83f8(0x254)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x119b48=document['getElementById']('assign-trophy-image');_0x119b48&&(_0x119b48['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()[_0x2c83f8(0x2bb)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})[_0x2c83f8(0x156)](_0x27081f=>{console['error']('Error\x20loading\x20trophies:',_0x27081f),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x1ced4a=document[_0x1415d5(0x351)]('create-new-trophy-btn');_0x1ced4a&&_0x1ced4a[_0x1415d5(0x271)](_0x1415d5(0x247),()=>{openTrophyModal();});const _0x52fa34=document[_0x1415d5(0x351)](_0x1415d5(0x385));_0x52fa34&&_0x52fa34['addEventListener']('submit',_0xe646a2=>{const _0x330aae=_0x1415d5;_0xe646a2[_0x330aae(0x233)](),saveTrophyDefinition();});const _0x216ec5=document[_0x1415d5(0x351)]('cancel-trophy-btn');_0x216ec5&&_0x216ec5['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x59a23d=>{_0x59a23d['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x57fae8=document[_0x1415d5(0x351)]('trophy-modal');_0x57fae8&&_0x57fae8[_0x1415d5(0x271)]('click',_0x51bbe7=>{const _0x1c2c9d=_0x1415d5;_0x51bbe7[_0x1c2c9d(0x1b2)]===_0x57fae8&&closeTrophyModal();});const _0x3d90c6=document['getElementById']('assign-trophy-modal');_0x3d90c6&&_0x3d90c6['addEventListener']('click',_0x3307de=>{_0x3307de['target']===_0x3d90c6&&closeAssignTrophyModal();});const _0x2e9287=document[_0x1415d5(0x351)]('assign-trophy-form');_0x2e9287&&_0x2e9287['addEventListener'](_0x1415d5(0x277),_0x14e154=>{_0x14e154['preventDefault'](),assignTrophyToPlayer();});const _0x40f0fb=document[_0x1415d5(0x351)](_0x1415d5(0x2f4));_0x40f0fb&&_0x40f0fb['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x197110=document[_0x1415d5(0x351)](_0x1415d5(0x281));_0x197110&&(_0x197110['addEventListener']('input',updateTrophyImagePreview),_0x197110[_0x1415d5(0x271)]('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x113f66=a0_0x3aa75c,_0x1b54ea=document['getElementById']('trophy-image-url')['value']['trim'](),_0x23ea07=document['getElementById']('trophy-image-preview');if(!_0x23ea07){const _0x3fe6d0=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x454546=document['createElement']('div');_0x454546['id']='trophy-image-preview',_0x454546[_0x113f66(0x25e)]=_0x113f66(0x1ab),_0x3fe6d0['appendChild'](_0x454546);const _0x2eb32e=document[_0x113f66(0x324)](_0x113f66(0x34c));_0x2eb32e['id']='trophy-preview-img',_0x2eb32e['alt']=_0x113f66(0x2fc),_0x2eb32e['onerror']=function(){const _0x53d39e=_0x113f66;this['src']=DEFAULT_TROPHY_IMAGE,this['classList'][_0x53d39e(0x20f)]('error');},_0x454546['appendChild'](_0x2eb32e);}const _0x259db9=document['getElementById']('trophy-preview-img');_0x1b54ea?(_0x259db9[_0x113f66(0x360)]=_0x1b54ea,_0x259db9['style'][_0x113f66(0x221)]='block',_0x259db9['classList'][_0x113f66(0x2db)]('error')):(_0x259db9[_0x113f66(0x360)]=DEFAULT_TROPHY_IMAGE,_0x259db9['style']['display']=_0x113f66(0x253));}async function loadTrophyDefinitions(){const _0x467b95=a0_0x3aa75c,_0x533d18=document['getElementById']('trophies-table-body');if(!_0x533d18)return;_0x533d18[_0x467b95(0x1ae)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x13fed6=collection(db,_0x467b95(0x1bf)),_0x2a103c=query(_0x13fed6,orderBy('createdAt','desc')),_0x4da63d=await getDocs(_0x2a103c);if(_0x4da63d['empty']){_0x533d18['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x533d18['innerHTML']='',_0x4da63d[_0x467b95(0x311)](_0x2ab215=>{const _0xb17951=_0x467b95,_0x5bbea4=_0x2ab215[_0xb17951(0x1cb)](),_0x42a627=document['createElement']('tr'),_0xc938ca=_0x5bbea4['createdAt']?new Date(_0x5bbea4['createdAt'][_0xb17951(0x32f)]*0x3e8)[_0xb17951(0x1ec)]():_0xb17951(0x173);_0x42a627[_0xb17951(0x1ae)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x5bbea4[_0xb17951(0x2c8)]||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5bbea4['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+_0xb17951(0x223)+(_0x5bbea4['name']||'Untitled\x20Trophy')+_0xb17951(0x2b4)+(_0x5bbea4['rarity']||_0xb17951(0x1a8))+'\x22>'+(_0x5bbea4[_0xb17951(0x16c)]||_0xb17951(0x1a8))+_0xb17951(0x31b)+_0xc938ca+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x2ab215['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x2ab215['id']+_0xb17951(0x244)+_0x2ab215['id']+_0xb17951(0x38b),_0x533d18[_0xb17951(0x188)](_0x42a627);}),setupTrophyActionButtons();}catch(_0x3fd983){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x3fd983),_0x533d18[_0x467b95(0x1ae)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x3fd983['message']+_0x467b95(0x1eb);}}function setupTrophyActionButtons(){const _0x206757=a0_0x3aa75c;document[_0x206757(0x361)]('.edit-trophy-btn')['forEach'](_0x55ab8a=>{_0x55ab8a['addEventListener']('click',_0x313276=>{const _0x9ee946=a0_0x150f,_0x42f9ef=_0x313276[_0x9ee946(0x38a)]['dataset']['id'];openTrophyModal(_0x42f9ef);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x2cca12=>{_0x2cca12['addEventListener']('click',_0x295d8d=>{const _0x538add=a0_0x150f,_0x5e132e=_0x295d8d['currentTarget'][_0x538add(0x1bc)]['id'];openAssignTrophyModal(_0x5e132e);});}),document[_0x206757(0x361)]('.delete-trophy-btn')[_0x206757(0x311)](_0x4ad758=>{const _0x5a4b9c=_0x206757;_0x4ad758[_0x5a4b9c(0x271)]('click',_0x1a05d7=>{const _0x37c755=_0x5a4b9c,_0x85e4ff=_0x1a05d7['currentTarget'][_0x37c755(0x1bc)]['id'];confirmDeleteTrophy(_0x85e4ff);});});}function openTrophyModal(_0x2fd335=null){const _0x17f10a=a0_0x3aa75c,_0x17ba79=document['getElementById']('trophy-modal'),_0x41a8bc=document['getElementById'](_0x17f10a(0x250)),_0x2cb56c=document['getElementById']('trophy-form'),_0x34b149=document['getElementById'](_0x17f10a(0x1a9));_0x2cb56c['reset'](),_0x34b149[_0x17f10a(0x19c)]='';const _0xdc2ebe=document[_0x17f10a(0x351)](_0x17f10a(0x1ce));_0xdc2ebe&&(_0xdc2ebe['src']=DEFAULT_TROPHY_IMAGE,_0xdc2ebe['classList'][_0x17f10a(0x2db)](_0x17f10a(0x18d))),_0x2fd335?(_0x41a8bc['textContent']='Edit\x20Trophy',_0x34b149['value']=_0x2fd335,loadTrophyData(_0x2fd335)):_0x41a8bc[_0x17f10a(0x37f)]='Create\x20New\x20Trophy',_0x17ba79[_0x17f10a(0x288)][_0x17f10a(0x20f)](_0x17f10a(0x320));}async function loadTrophyData(_0x1bf55c){const _0x34a7ac=a0_0x3aa75c;try{const _0x52ef63=doc(db,'trophyDefinitions',_0x1bf55c),_0x4ecf01=await getDoc(_0x52ef63);if(!_0x4ecf01[_0x34a7ac(0x27e)]()){showNotification(_0x34a7ac(0x2f0),_0x34a7ac(0x18d));return;}const _0x6bdac2=_0x4ecf01[_0x34a7ac(0x1cb)]();document['getElementById'](_0x34a7ac(0x292))['value']=_0x6bdac2[_0x34a7ac(0x2b8)]||'',document['getElementById']('trophy-description')['value']=_0x6bdac2[_0x34a7ac(0x2a6)]||'',document[_0x34a7ac(0x351)]('trophy-image-url')['value']=_0x6bdac2['image']||'',document['getElementById']('trophy-rarity')['value']=_0x6bdac2['rarity']||'common',updateTrophyImagePreview();}catch(_0x1247f5){console['error']('Error\x20loading\x20trophy\x20data:',_0x1247f5),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x34a7ac(0x18d));}}async function saveTrophyDefinition(){const _0x17bb67=a0_0x3aa75c;try{const _0x463689=document[_0x17bb67(0x351)]('trophy-id')[_0x17bb67(0x19c)],_0x2da04c=document['getElementById']('trophy-name')['value']['trim'](),_0x1a351a=document['getElementById']('trophy-description')[_0x17bb67(0x19c)][_0x17bb67(0x284)](),_0x1587e6=document['getElementById']('trophy-image-url')['value']['trim'](),_0x337386=document[_0x17bb67(0x351)]('trophy-rarity')[_0x17bb67(0x19c)];if(!_0x2da04c||!_0x1a351a||!_0x1587e6){showNotification(_0x17bb67(0x34b),_0x17bb67(0x18d));return;}const _0x10c6a3=auth['currentUser'];if(!_0x10c6a3){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x5e4715={'name':_0x2da04c,'description':_0x1a351a,'image':_0x1587e6,'rarity':_0x337386,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x10c6a3['email']};!_0x463689?(_0x5e4715['createdAt']=serverTimestamp(),_0x5e4715['createdBy']=_0x10c6a3['email'],await addDoc(collection(db,'trophyDefinitions'),_0x5e4715),showNotification(_0x17bb67(0x1c2),_0x17bb67(0x170))):(await updateDoc(doc(db,'trophyDefinitions',_0x463689),_0x5e4715),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x49ba61){console['error'](_0x17bb67(0x202),_0x49ba61),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x49ba61[_0x17bb67(0x186)],'error');}}function closeTrophyModal(){const _0x254f8c=a0_0x3aa75c,_0x189b7c=document[_0x254f8c(0x351)](_0x254f8c(0x1e4));_0x189b7c&&_0x189b7c[_0x254f8c(0x288)]['remove']('active');}async function confirmDeleteTrophy(_0x481808){const _0x3b2962=a0_0x3aa75c;if(!_0x481808){console['error'](_0x3b2962(0x282));return;}if(confirm(_0x3b2962(0x2a1)))try{const _0x46e18b=auth[_0x3b2962(0x2a9)];if(!_0x46e18b){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console[_0x3b2962(0x181)]('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x481808),await deleteDoc(doc(db,'trophyDefinitions',_0x481808)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x37bc11){console[_0x3b2962(0x18d)](_0x3b2962(0x249),_0x37bc11),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x37bc11['message'],_0x3b2962(0x18d));}}async function openAssignTrophyModal(_0x272e8b){const _0x48ead7=a0_0x3aa75c;try{const _0x58d0e2=doc(db,'trophyDefinitions',_0x272e8b),_0x3849f7=await getDoc(_0x58d0e2);if(!_0x3849f7[_0x48ead7(0x27e)]()){showNotification('Trophy\x20not\x20found',_0x48ead7(0x18d));return;}const _0x1b662e=_0x3849f7['data']();document[_0x48ead7(0x351)]('assign-trophy-id')['value']=_0x272e8b,document[_0x48ead7(0x351)]('assign-trophy-name')[_0x48ead7(0x19c)]=_0x1b662e['name'],document['getElementById'](_0x48ead7(0x1f7))['src']=_0x1b662e['image']||DEFAULT_TROPHY_IMAGE,document[_0x48ead7(0x351)](_0x48ead7(0x294))['textContent']=_0x1b662e['name']||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x1b662e[_0x48ead7(0x2a6)]||'No\x20description';const _0x410123=document['getElementById'](_0x48ead7(0x339));_0x410123['textContent']=_0x1b662e['rarity']||'common',_0x410123['className']=_0x48ead7(0x175)+(_0x1b662e['rarity']||'common');const _0x4957dc=document[_0x48ead7(0x351)]('assign-trophy-modal');_0x4957dc['classList'][_0x48ead7(0x20f)]('active');}catch(_0x246966){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x246966),showNotification(_0x48ead7(0x321),'error');}}function closeAssignTrophyModal(){const _0x28651d=document['getElementById']('assign-trophy-modal');_0x28651d&&_0x28651d['classList']['remove']('active');}async function assignTrophyToPlayer(){const _0x365c22=a0_0x3aa75c;try{const _0x2c721c=document[_0x365c22(0x351)]('assign-trophy-id')[_0x365c22(0x19c)],_0x6265d0=document['getElementById']('assign-trophy-name')['value'],_0x5dc665=document['getElementById']('assign-player-username')[_0x365c22(0x19c)]['trim'](),_0x12847d=document['querySelector'](_0x365c22(0x2eb))[_0x365c22(0x19c)];if(!_0x2c721c||!_0x5dc665){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x4e82a5=auth['currentUser'];if(!_0x4e82a5){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x83e018=null,_0x354e63=null,_0x1529a5=null;if(_0x12847d===_0x365c22(0x242)){const _0x1be47b=collection(db,'nonParticipants'),_0x151456=query(_0x1be47b,where('username','==',_0x5dc665)),_0x417db4=await getDocs(_0x151456);!_0x417db4['empty']&&(_0x83e018=_0x417db4['docs'][0x0],_0x354e63=_0x83e018['id'],_0x1529a5=_0x83e018['data']());}else{const _0x227a9c=_0x12847d==='D1'?'players':_0x12847d==='D2'?'playersD2':_0x365c22(0x2a7),_0x24fe41=collection(db,_0x227a9c),_0x3fca3b=query(_0x24fe41,where('username','==',_0x5dc665)),_0x2e9d60=await getDocs(_0x3fca3b);!_0x2e9d60[_0x365c22(0x2ac)]&&(_0x83e018=_0x2e9d60[_0x365c22(0x337)][0x0],_0x354e63=_0x83e018['id'],_0x1529a5=_0x83e018['data']());}if(!_0x83e018){showNotification(_0x365c22(0x2c2)+_0x5dc665+'\x22\x20not\x20found\x20in\x20'+(_0x12847d===_0x365c22(0x242)?'non-participants':_0x12847d+'\x20ladder'),_0x365c22(0x18d));return;}const _0x10d3da=collection(db,'userTrophies'),_0x5d4a29=query(_0x10d3da,where(_0x365c22(0x33f),'==',_0x354e63),where('trophyId','==',_0x2c721c)),_0x36dfbf=await getDocs(_0x5d4a29);if(!_0x36dfbf['empty']){showNotification('Player\x20\x22'+_0x5dc665+_0x365c22(0x2a2),'warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x354e63,'playerUsername':_0x5dc665,'trophyId':_0x2c721c,'awardedAt':serverTimestamp(),'awardedBy':_0x4e82a5[_0x365c22(0x1fe)],'ladder':_0x12847d}),showNotification('Trophy\x20\x22'+_0x6265d0+'\x22\x20awarded\x20to\x20'+_0x5dc665,_0x365c22(0x170)),closeAssignTrophyModal();}catch(_0x4c59c8){console['error'](_0x365c22(0x27a),_0x4c59c8),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x4c59c8[_0x365c22(0x186)],'error');}}function setupInactivePlayersSection(){const _0x37803b=a0_0x3aa75c,_0x589538=document['getElementById']('inactive-days-filter');_0x589538&&_0x589538['addEventListener'](_0x37803b(0x198),function(){const _0x4c0276=document['getElementById']('load-inactive-players-data');if(_0x4c0276)_0x4c0276['click']();});const _0x5768fd=document[_0x37803b(0x147)]('.ladder-switch\x20input[value=\x22D1\x22]'),_0x4a9885=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x5768fd&&_0x4a9885&&(_0x5768fd['addEventListener']('change',function(){const _0x3cc90b=_0x37803b;if(this[_0x3cc90b(0x2dd)]){currentLadder='D1';if(document['getElementById']('inactive-players')['style']['display']!=='none'){const _0x29c13a=document['getElementById']('load-inactive-players-data');if(_0x29c13a)_0x29c13a['click']();}}}),_0x4a9885['addEventListener']('change',function(){const _0x244693=_0x37803b;if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')['style'][_0x244693(0x221)]!=='none'){const _0x46f680=document[_0x244693(0x351)](_0x244693(0x26b));if(_0x46f680)_0x46f680['click']();}}}));const _0x6f87ff=document['getElementById']('inactive-players-search');_0x6f87ff&&_0x6f87ff['addEventListener'](_0x37803b(0x2e1),debounce(function(){const _0x42581f=_0x37803b,_0x3e56a0=_0x6f87ff['value'][_0x42581f(0x1e6)](),_0x439ced=document[_0x42581f(0x361)]('#inactive-players-table-body\x20tr');_0x439ced['forEach'](_0x55e3f8=>{const _0x3ff775=_0x42581f;if(_0x55e3f8['querySelector']('.loading-cell')||_0x55e3f8['querySelector']('.empty-state')||_0x55e3f8['querySelector']('.error-state'))return;const _0xbe30be=_0x55e3f8[_0x3ff775(0x1f1)][0x0]?.['textContent'][_0x3ff775(0x1e6)]()||'',_0x3b8d7c=_0x55e3f8[_0x3ff775(0x1f1)][0x5]?.[_0x3ff775(0x37f)]['toLowerCase']()||'';_0xbe30be[_0x3ff775(0x262)](_0x3e56a0)||_0x3b8d7c[_0x3ff775(0x262)](_0x3e56a0)?_0x55e3f8['style'][_0x3ff775(0x221)]='':_0x55e3f8['style'][_0x3ff775(0x221)]=_0x3ff775(0x207);});},0x12c)),document['addEventListener'](_0x37803b(0x247),function(_0x44d51a){const _0x3714f2=_0x37803b;if(_0x44d51a['target'][_0x3714f2(0x230)]('.view-player-btn')){const _0xe43e4c=_0x44d51a['target']['closest']('.view-player-btn'),_0x5bdb9b=_0xe43e4c['dataset'][_0x3714f2(0x389)];_0x5bdb9b&&alert('View\x20player\x20details\x20for\x20'+_0x5bdb9b+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x1a4747=a0_0x3aa75c,_0x5cfd46=document['getElementById']('inactive-players-table-body');if(!_0x5cfd46)return;_0x5cfd46['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x3ff3df=document['getElementById']('inactive-days-filter'),_0x4525f6=_0x3ff3df?parseInt(_0x3ff3df['value'])||0x0:0x0,_0x17b9f4=collection(db,currentLadder==='D1'?_0x1a4747(0x24b):_0x1a4747(0x317)),_0x3a0db1=await getDocs(_0x17b9f4);if(_0x3a0db1['empty']){_0x5cfd46['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0xe1dc01=[];_0x3a0db1['forEach'](_0x45cd60=>{const _0x60c1d8=_0x1a4747,_0x4abc6a=_0x45cd60['data']();_0xe1dc01[_0x60c1d8(0x2f5)]({..._0x4abc6a,'id':_0x45cd60['id'],'username':_0x4abc6a['username']||'Unknown\x20Player'});}),console['log'](_0x1a4747(0x33a)+_0xe1dc01['length']+_0x1a4747(0x2a3)+currentLadder+'\x20ladder');const _0x3fa102=currentLadder==='D1'?_0x1a4747(0x335):'approvedMatchesD2',_0x8030b4=_0xe1dc01['map'](async _0x23453c=>{const _0x5b6a03=_0x1a4747;try{const _0x237a55=collection(db,_0x3fa102),_0x51d459=query(_0x237a55,or(where(_0x5b6a03(0x206),'==',_0x23453c[_0x5b6a03(0x389)]),where('loserUsername','==',_0x23453c['username'])),orderBy(_0x5b6a03(0x314),_0x5b6a03(0x33b)),limit(0x1)),_0x2efdbf=await getDocs(_0x51d459);if(!_0x2efdbf['empty']){const _0x187e1b=_0x2efdbf['docs'][0x0]['data'](),_0x590d02=_0x187e1b[_0x5b6a03(0x314)]?new Date(_0x187e1b[_0x5b6a03(0x314)]['seconds']*0x3e8):null,_0x4779c2=new Date(),_0x3115f9=_0x590d02?Math['floor']((_0x4779c2-_0x590d02)/(0x3e8*0x3c*0x3c*0x18)):null,_0x52b5d5=_0x187e1b['winnerUsername']===_0x23453c['username']?_0x187e1b[_0x5b6a03(0x16e)]:_0x187e1b['winnerUsername'],_0x2ccc27=_0x187e1b['winnerUsername']===_0x23453c['username']?'Won':'Lost';return{..._0x23453c,'lastMatch':{'date':_0x590d02?_0x590d02[_0x5b6a03(0x26d)]():'N/A','opponent':_0x52b5d5||'Unknown','result':_0x2ccc27,'timestamp':_0x590d02||new Date(0x0),'daysSinceMatch':_0x3115f9||Number['MAX_SAFE_INTEGER']}};}else return{..._0x23453c,'lastMatch':{'date':'Never\x20played','opponent':_0x5b6a03(0x173),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number[_0x5b6a03(0x146)]}};}catch(_0x426fd9){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x23453c['username']+':',_0x426fd9),{..._0x23453c,'lastMatch':{'date':_0x5b6a03(0x1dc),'opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x26175e=await Promise['all'](_0x8030b4);_0x26175e[_0x1a4747(0x323)]((_0x39e7aa,_0x494a5)=>_0x494a5[_0x1a4747(0x245)][_0x1a4747(0x1be)]-_0x39e7aa['lastMatch'][_0x1a4747(0x1be)]);_0x4525f6>0x0&&(_0x26175e=_0x26175e['filter'](_0x2e12cf=>_0x2e12cf['lastMatch']['daysSinceMatch']>=_0x4525f6));_0x5cfd46['innerHTML']='';if(_0x26175e['length']===0x0){_0x5cfd46['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x26175e['forEach'](_0x343272=>{const _0x475b1c=_0x1a4747,_0x3c6bfd=document['createElement']('tr'),_0x2f28e3=_0x343272['lastMatch']['daysSinceMatch']>0x1e?_0x475b1c(0x28a):_0x343272[_0x475b1c(0x245)][_0x475b1c(0x1be)]>0xe?'moderately-inactive':'';_0x3c6bfd[_0x475b1c(0x25e)]=_0x2f28e3,_0x3c6bfd[_0x475b1c(0x1ae)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x343272['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x343272['eloRating']||0x4b0)+_0x475b1c(0x26c)+_0x343272['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x343272[_0x475b1c(0x245)]['daysSinceMatch']===Number[_0x475b1c(0x146)]?'N/A':_0x343272['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x343272['lastMatch']['date']==='Never\x20played'?'No\x20matches\x20found':_0x343272['lastMatch']['result']+_0x475b1c(0x266)+_0x343272[_0x475b1c(0x245)]['opponent'])+_0x475b1c(0x1a4)+_0x343272['username']+_0x475b1c(0x354),_0x5cfd46['appendChild'](_0x3c6bfd);}),console['log']('Displaying\x20'+_0x26175e['length']+'\x20inactive\x20players');}catch(_0x2d2eee){console['error']('Error\x20loading\x20inactive\x20players:',_0x2d2eee),_0x5cfd46[_0x1a4747(0x1ae)]=_0x1a4747(0x393)+_0x2d2eee[_0x1a4747(0x186)]+'</td></tr>';}}function setupHighlightButtons(){const _0xc05156=a0_0x3aa75c;console['log'](_0xc05156(0x1d0));const _0xf4fd6a=document[_0xc05156(0x351)]('create-match-highlight-btn');_0xf4fd6a&&_0xf4fd6a['addEventListener']('click',function(){const _0x442864=_0xc05156;console[_0x442864(0x181)]('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x354a90=document['getElementById']('create-creator-highlight-btn');_0x354a90&&_0x354a90[_0xc05156(0x271)]('click',function(){const _0xe5ca82=_0xc05156;console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal(_0xe5ca82(0x201));});const _0xcca8c3=document[_0xc05156(0x351)](_0xc05156(0x36d));_0xcca8c3&&_0xcca8c3['addEventListener']('click',function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x19a04b='match'){const _0x268ed4=a0_0x3aa75c;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x19a04b);const _0x56e56a=document['getElementById']('highlight-modal'),_0x480371=document[_0x268ed4(0x351)](_0x268ed4(0x18a)),_0xcb7a4a=document[_0x268ed4(0x351)](_0x268ed4(0x345)),_0xc2f4f=document['getElementById'](_0x268ed4(0x301));if(!_0x56e56a||!_0x480371||!_0xcb7a4a){console['error'](_0x268ed4(0x328));return;}_0x480371['reset'](),_0xc2f4f['value']='';const _0x389623=['match','creator',_0x268ed4(0x383)],_0x987f05=!_0x389623[_0x268ed4(0x262)](_0x19a04b);if(_0x987f05){const _0x42adeb=_0x19a04b;_0xc2f4f['value']=_0x42adeb,_0xcb7a4a['textContent']='Loading...',loadHighlightDataAdmin(_0x42adeb);}else{const _0x46a110=_0x19a04b;document['getElementById']('highlight-type')['value']=_0x46a110,_0xcb7a4a[_0x268ed4(0x37f)]='Create\x20New\x20'+getHighlightTypeName(_0x46a110),toggleHighlightFields(_0x46a110);const _0x559f1f=auth['currentUser'];_0x559f1f&&document['getElementById']('highlight-submitted-by')&&(document['getElementById'](_0x268ed4(0x184))[_0x268ed4(0x19c)]=_0x559f1f[_0x268ed4(0x182)]||_0x559f1f[_0x268ed4(0x1fe)]);}_0x56e56a['classList']['add']('active');}function toggleHighlightFields(_0x531f03){const _0x1178ec=a0_0x3aa75c;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x531f03);const _0x1fd187=document['getElementById'](_0x1178ec(0x18a));if(!_0x1fd187)return;const _0x520b62=_0x1fd187['querySelectorAll']('.form-group,\x20.form-row');_0x520b62['forEach'](_0x2d8e8c=>_0x2d8e8c['style']['display']=_0x1178ec(0x207));const _0x2326ee=document['getElementById'](_0x1178ec(0x1c5));if(_0x2326ee)_0x2326ee['style'][_0x1178ec(0x221)]='none';const _0x18dd7a=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x18dd7a['forEach'](_0x54327c=>{const _0x4b55d3=_0x1178ec,_0x2a3f97=document['getElementById'](_0x54327c);if(_0x2a3f97)_0x2a3f97['style'][_0x4b55d3(0x221)]='block';});if(_0x531f03==='match'){const _0x58fb9a=['highlight-video-container',_0x1178ec(0x1b6),_0x1178ec(0x2e6),_0x1178ec(0x305),_0x1178ec(0x2bf),'highlight-match-link-container'];_0x58fb9a['forEach'](_0x22a5f7=>{const _0x5927b7=_0x1178ec,_0xf4a948=document['getElementById'](_0x22a5f7);_0xf4a948&&(_0x22a5f7==='highlight-players-container'?_0xf4a948[_0x5927b7(0x2f7)][_0x5927b7(0x221)]=_0x5927b7(0x227):_0xf4a948['style']['display']='block');});const _0x75cdf6=document['getElementById'](_0x1178ec(0x2ef));if(_0x75cdf6){_0x75cdf6[_0x1178ec(0x25f)]=!![];const _0x3acba4=_0x75cdf6['previousElementSibling'];if(_0x3acba4)_0x3acba4['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x2326ee)_0x2326ee[_0x1178ec(0x2f7)]['display']='block';updateHighlightVideoPreview();}else{if(_0x531f03===_0x1178ec(0x201)){const _0x16126a=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container',_0x1178ec(0x371)];_0x16126a[_0x1178ec(0x311)](_0x3525c2=>{const _0x5337b2=document['getElementById'](_0x3525c2);if(_0x5337b2)_0x5337b2['style']['display']='block';});const _0x11af3f=document[_0x1178ec(0x351)](_0x1178ec(0x2ef));if(_0x11af3f){_0x11af3f['required']=![];const _0x4ff315=_0x11af3f['previousElementSibling'];if(_0x4ff315)_0x4ff315['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x531f03==='achievement'){const _0x17c19f=[_0x1178ec(0x159),'highlight-achievement-type-container',_0x1178ec(0x213),_0x1178ec(0x378),'highlight-achievement-image-container',_0x1178ec(0x371)];_0x17c19f[_0x1178ec(0x311)](_0x26a6d0=>{const _0x2d3221=_0x1178ec,_0x3cea3e=document['getElementById'](_0x26a6d0);if(_0x3cea3e)_0x3cea3e['style']['display']=_0x2d3221(0x253);});const _0x2e1119=document['getElementById'](_0x1178ec(0x2ef));if(_0x2e1119){_0x2e1119['required']=![];const _0x126d79=_0x2e1119['previousElementSibling'];if(_0x126d79)_0x126d79['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x4de0b7){const _0x41739a=a0_0x3aa75c;try{const _0x719423=doc(db,'highlights',_0x4de0b7),_0xbde1=await getDoc(_0x719423);if(!_0xbde1['exists']()){showNotification(_0x41739a(0x263),_0x41739a(0x18d));return;}const _0x3457b6=_0xbde1['data'](),_0x179027=_0x3457b6['type']||'match';document['getElementById'](_0x41739a(0x345))['textContent']='Edit\x20'+getHighlightTypeName(_0x179027),document['getElementById'](_0x41739a(0x287))['value']=_0x179027,toggleHighlightFields(_0x179027),document[_0x41739a(0x351)]('highlight-title')['value']=_0x3457b6['title']||'',document['getElementById']('highlight-description')['value']=_0x3457b6['description']||'',document['getElementById']('highlight-submitted-by')[_0x41739a(0x19c)]=_0x3457b6['submittedBy']||'';_0x3457b6['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x3457b6[_0x41739a(0x14a)],updateHighlightVideoPreview());if(_0x179027===_0x41739a(0x2df)){document['getElementById']('highlight-match-info')['value']=_0x3457b6['matchInfo']||'',document['getElementById']('highlight-map')['value']=_0x3457b6['map']||'';if(_0x3457b6[_0x41739a(0x1ef)]){const _0x16b989=new Date(_0x3457b6['matchDate'][_0x41739a(0x32f)]*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x16b989['toISOString']()['split']('T')[0x0];}document['getElementById']('highlight-winner-name')[_0x41739a(0x19c)]=_0x3457b6[_0x41739a(0x386)]||'',document[_0x41739a(0x351)](_0x41739a(0x20d))['value']=_0x3457b6['winnerScore']||'',document[_0x41739a(0x351)]('highlight-loser-name')['value']=_0x3457b6[_0x41739a(0x334)]||'',document[_0x41739a(0x351)]('highlight-loser-score')['value']=_0x3457b6['loserScore']||'',document['getElementById']('highlight-match-link')['value']=_0x3457b6[_0x41739a(0x23f)]||'';}else{if(_0x179027===_0x41739a(0x201))document['getElementById']('highlight-map')[_0x41739a(0x19c)]=_0x3457b6['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x3457b6['mapCreator']||'',document['getElementById']('highlight-map-version')['value']=_0x3457b6['mapVersion']||'',document['getElementById']('highlight-creator-image')[_0x41739a(0x19c)]=_0x3457b6[_0x41739a(0x150)]||'';else _0x179027==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0x3457b6[_0x41739a(0x29a)]||'',document[_0x41739a(0x351)]('highlight-achievement-type')['value']=_0x3457b6[_0x41739a(0x1bd)]||'',document['getElementById']('highlight-achievement-details')['value']=_0x3457b6['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x3457b6['playerProfileUrl']||'',document[_0x41739a(0x351)]('highlight-achievement-image')[_0x41739a(0x19c)]=_0x3457b6['achievementImageUrl']||'');}}catch(_0x336815){console[_0x41739a(0x18d)]('Error\x20loading\x20highlight:',_0x336815),showNotification('Error\x20loading\x20highlight:\x20'+_0x336815['message'],'error');}}async function saveHighlight(){const _0x565fc7=a0_0x3aa75c;try{const _0xdeb8f5=document['getElementById']('highlight-id')?.[_0x565fc7(0x19c)]||'',_0x248c65=document['getElementById']('highlight-type')?.['value']||'match',_0x42f023={'title':document['getElementById']('highlight-title')?.[_0x565fc7(0x19c)]?.[_0x565fc7(0x284)]()||'','description':document['getElementById']('highlight-description')?.['value']?.[_0x565fc7(0x284)]()||'','submittedBy':document['getElementById'](_0x565fc7(0x184))?.['value']?.['trim']()||'','videoId':document[_0x565fc7(0x351)]('highlight-video-id')?.['value']?.[_0x565fc7(0x284)]()||null,'type':_0x248c65};if(!_0x42f023['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x248c65===_0x565fc7(0x2df)){_0x42f023['matchInfo']=document[_0x565fc7(0x351)]('highlight-match-info')?.[_0x565fc7(0x19c)]?.['trim']()||'',_0x42f023['map']=document[_0x565fc7(0x351)]('highlight-map')?.['value']?.[_0x565fc7(0x284)]()||'';const _0x414020=document['getElementById']('highlight-match-date'),_0x512ca5=_0x414020?.[_0x565fc7(0x19c)]||'';_0x42f023[_0x565fc7(0x1ef)]=_0x512ca5?Timestamp['fromDate'](new Date(_0x512ca5)):null,_0x42f023['winnerName']=document['getElementById']('highlight-winner-name')?.[_0x565fc7(0x19c)]?.[_0x565fc7(0x284)]()||'',_0x42f023['winnerScore']=document[_0x565fc7(0x351)]('highlight-winner-score')?.['value']?.[_0x565fc7(0x284)]()||'',_0x42f023[_0x565fc7(0x334)]=document[_0x565fc7(0x351)]('highlight-loser-name')?.[_0x565fc7(0x19c)]?.[_0x565fc7(0x284)]()||'',_0x42f023['loserScore']=document['getElementById']('highlight-loser-score')?.[_0x565fc7(0x19c)]?.['trim']()||'',_0x42f023['matchLink']=document[_0x565fc7(0x351)]('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x42f023['videoId']){showNotification(_0x565fc7(0x29d),_0x565fc7(0x18d));return;}}else{if(_0x248c65==='creator'){_0x42f023['map']=document['getElementById']('highlight-map')?.[_0x565fc7(0x19c)]?.['trim']()||'',_0x42f023['mapCreator']=document['getElementById']('highlight-map-creator')?.[_0x565fc7(0x19c)]?.['trim']()||'',_0x42f023['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x42f023['creatorImageUrl']=document['getElementById']('highlight-creator-image')?.['value']?.['trim']()||'';if(!_0x42f023['mapCreator']){showNotification(_0x565fc7(0x38d),'error');return;}}else{if(_0x248c65==='achievement'){_0x42f023['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.[_0x565fc7(0x19c)]?.['trim']()||'',_0x42f023['achievementType']=document['getElementById'](_0x565fc7(0x19e))?.[_0x565fc7(0x19c)]?.['trim']()||'',_0x42f023['achievementDetails']=document[_0x565fc7(0x351)]('highlight-achievement-details')?.['value']?.[_0x565fc7(0x284)]()||'',_0x42f023[_0x565fc7(0x309)]=document['getElementById']('highlight-player-profile')?.[_0x565fc7(0x19c)]?.[_0x565fc7(0x284)]()||'',_0x42f023[_0x565fc7(0x191)]=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x42f023['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0xdeb8f5?(_0x42f023['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0xdeb8f5),_0x42f023),showNotification('Highlight\x20updated\x20successfully!',_0x565fc7(0x170))):(_0x42f023['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x42f023),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x56dc55){console[_0x565fc7(0x18d)](_0x565fc7(0x151),_0x56dc55),showNotification('Error\x20saving\x20highlight:\x20'+_0x56dc55['message'],'error');}}function closeHighlightModal(){const _0x55fc30=a0_0x3aa75c,_0x502215=document[_0x55fc30(0x351)]('highlight-modal');if(_0x502215)_0x502215[_0x55fc30(0x288)]['remove']('active');}function getHighlightTypeName(_0x546ec3){const _0x43df4e=a0_0x3aa75c;switch(_0x546ec3){case _0x43df4e(0x2df):return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return _0x43df4e(0x1a7);default:return _0x43df4e(0x291);}}function updateHighlightVideoPreview(){const _0x98caac=a0_0x3aa75c,_0x4cc1f9=document['getElementById']('highlight-video-id'),_0xe85667=document['getElementById'](_0x98caac(0x1c5)),_0x2b3e6d=document[_0x98caac(0x351)]('highlight-video-preview');if(!_0x4cc1f9||!_0x2b3e6d||!_0xe85667)return;const _0x228f81=_0x4cc1f9['value'][_0x98caac(0x284)]();_0x228f81&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x228f81)?(_0x2b3e6d['src']='https://www.youtube.com/embed/'+_0x228f81,_0xe85667['style']['display']=_0x98caac(0x253)):(_0x2b3e6d[_0x98caac(0x360)]='',_0xe85667['style']['display']=_0x98caac(0x207));}async function loadHighlightsAdmin(){const _0xabfa68=a0_0x3aa75c,_0x582e11=document[_0xabfa68(0x351)](_0xabfa68(0x1d8));if(!_0x582e11)return;_0x582e11['innerHTML']=_0xabfa68(0x157);try{const _0x575838=query(collection(db,_0xabfa68(0x391)),orderBy('createdAt','desc')),_0x119959=await getDocs(_0x575838);if(_0x119959[_0xabfa68(0x2ac)]){_0x582e11['innerHTML']=_0xabfa68(0x27d);return;}_0x582e11['innerHTML']='',_0x119959[_0xabfa68(0x311)](_0x2828a6=>{const _0x2962ee=_0xabfa68,_0x64a22b=_0x2828a6['data'](),_0x57572b=document['createElement']('tr'),_0x4e21d3=_0x64a22b['createdAt']?new Date(_0x64a22b['createdAt']['seconds']*0x3e8)[_0x2962ee(0x26d)]():'N/A';let _0x1f90a5='Unknown',_0x3328f0='';switch(_0x64a22b[_0x2962ee(0x15c)]){case'match':_0x1f90a5='Match',_0x3328f0='match-type';break;case'creator':_0x1f90a5='Creator',_0x3328f0='creator-type';break;case'achievement':_0x1f90a5='Achievement',_0x3328f0='achievement-type';break;}_0x57572b[_0x2962ee(0x1ae)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x64a22b['title']||_0x2962ee(0x2d2))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x3328f0+'\x22>'+_0x1f90a5+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4e21d3+_0x2962ee(0x26c)+(_0x64a22b['submittedBy']||'Unknown')+_0x2962ee(0x26c)+(_0x64a22b['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x2828a6['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x2828a6['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x582e11['appendChild'](_0x57572b);}),document['querySelectorAll'](_0xabfa68(0x2cc))[_0xabfa68(0x311)](_0x34dc10=>{const _0x243e6e=_0xabfa68;_0x34dc10['addEventListener'](_0x243e6e(0x247),_0x4f05b1=>{const _0x483211=_0x243e6e;openHighlightModal(_0x4f05b1[_0x483211(0x38a)][_0x483211(0x1bc)]['id']);});}),document['querySelectorAll']('.delete-highlight-btn')[_0xabfa68(0x311)](_0x1c9ac8=>{const _0x351cdc=_0xabfa68;_0x1c9ac8[_0x351cdc(0x271)](_0x351cdc(0x247),_0xf2f874=>{const _0x1047d2=_0x351cdc;confirmDeleteHighlight(_0xf2f874['currentTarget'][_0x1047d2(0x1bc)]['id']);});});}catch(_0x5c5050){console['error'](_0xabfa68(0x298),_0x5c5050),_0x582e11['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x5c5050['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function a0_0x150f(_0x1c1f69,_0x3273f0){const _0x17eca4=a0_0xa225();return a0_0x150f=function(_0xc188c2,_0x1ffe74){_0xc188c2=_0xc188c2-0x138;let _0x53bb44=_0x17eca4[_0xc188c2];return _0x53bb44;},a0_0x150f(_0x1c1f69,_0x3273f0);}async function confirmDeleteHighlight(_0x36caff){const _0x5423ca=a0_0x3aa75c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x36caff)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x21f082){console[_0x5423ca(0x18d)](_0x5423ca(0x31c),_0x21f082),showNotification(_0x5423ca(0x381)+_0x21f082['message'],_0x5423ca(0x18d));}}function setupCreateTestMatchModal(){const _0x191b46=a0_0x3aa75c;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x1babc8=document[_0x191b46(0x351)]('create-test-match-modal'),_0x2da223=document[_0x191b46(0x351)](_0x191b46(0x164));if(!_0x1babc8){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x2da223){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x7a23c3=_0x1babc8['cloneNode'](!![]);_0x1babc8[_0x191b46(0x17f)]['replaceChild'](_0x7a23c3,_0x1babc8);const _0x3b7a88=_0x7a23c3['querySelector']('#create-test-match-form');_0x7a23c3['addEventListener']('click',function(_0x2dfaa3){const _0x13cecb=_0x191b46;_0x2dfaa3['target']===_0x7a23c3&&(console[_0x13cecb(0x181)]('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x39a845=_0x7a23c3['querySelector']('.close-btn');_0x39a845&&_0x39a845['addEventListener'](_0x191b46(0x247),function(_0x159b96){_0x159b96['preventDefault'](),_0x159b96['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x241bac=_0x7a23c3['querySelector']('#cancel-create-test-match-btn');_0x241bac&&_0x241bac['addEventListener']('click',function(_0x52dddd){const _0x3f0386=_0x191b46;_0x52dddd[_0x3f0386(0x233)](),_0x52dddd[_0x3f0386(0x17a)](),console[_0x3f0386(0x181)](_0x3f0386(0x20c)),closeCreateTestMatchModal();});if(_0x3b7a88){_0x3b7a88[_0x191b46(0x271)]('submit',function(_0xcd39e7){const _0x2978a6=_0x191b46;_0xcd39e7[_0x2978a6(0x233)](),_0xcd39e7[_0x2978a6(0x17a)](),console[_0x2978a6(0x181)](_0x2978a6(0x2c7)),createTestMatch();});const _0x27a160=_0x3b7a88[_0x191b46(0x147)]('button[type=\x22submit\x22]');_0x27a160&&_0x27a160[_0x191b46(0x271)]('click',function(_0x3a9ea5){const _0x148c4f=_0x191b46;_0x3a9ea5['preventDefault'](),_0x3a9ea5['stopPropagation'](),console[_0x148c4f(0x181)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x191b46(0x181)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x54b432=a0_0x3aa75c;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x886935=document[_0x54b432(0x351)]('highlight-form');_0x886935&&_0x886935['addEventListener']('submit',_0x55037a=>{_0x55037a['preventDefault'](),saveHighlight();});const _0x4a21b2=document['getElementById']('cancel-highlight-btn');_0x4a21b2&&_0x4a21b2[_0x54b432(0x271)]('click',closeHighlightModal);const _0x1f7779=document['querySelector']('#highlight-modal\x20.close-btn');_0x1f7779&&_0x1f7779['addEventListener']('click',closeHighlightModal);const _0x551fa1=document['getElementById']('highlight-modal');_0x551fa1&&_0x551fa1['addEventListener'](_0x54b432(0x247),_0x501394=>{_0x501394['target']===_0x551fa1&&closeHighlightModal();});const _0x237222=document['getElementById']('highlight-video-id');_0x237222&&_0x237222['addEventListener'](_0x54b432(0x2e1),()=>{updateHighlightVideoPreview();}),console[_0x54b432(0x181)](_0x54b432(0x194));}function setupManageMatchesSection(){const _0x34d630=a0_0x3aa75c;console['log'](_0x34d630(0x273));const _0x500d89=document['getElementById'](_0x34d630(0x27b)),_0x42ee22=document['getElementById']('matches-next-page');_0x500d89&&_0x500d89[_0x34d630(0x271)](_0x34d630(0x247),()=>{const _0x51938c=_0x34d630,_0x1fe2c9=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x1fe2c9][_0x51938c(0x29f)]-0x1);});_0x42ee22&&_0x42ee22['addEventListener']('click',()=>{const _0x566167=_0x34d630,_0x4faa3e=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x4faa3e][_0x566167(0x29f)]+0x1);});const _0x5666ee=document['getElementById'](_0x34d630(0x1d6)),_0x113842=document['getElementById']('reset-matches-filters');_0x5666ee&&_0x5666ee['addEventListener']('click',applyMatchesFilters);_0x113842&&_0x113842['addEventListener']('click',resetMatchesFilters);const _0x57309c=document['getElementById']('matches-search');_0x57309c&&_0x57309c['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x1f64b9=document['getElementById'](_0x34d630(0x31d));_0x1f64b9&&_0x1f64b9[_0x34d630(0x271)](_0x34d630(0x247),openResimulateModal);const _0x2a740c=document[_0x34d630(0x351)]('resimulate-modal');if(_0x2a740c){const _0x4f2d98=_0x2a740c['querySelector'](_0x34d630(0x169));_0x4f2d98&&_0x4f2d98['addEventListener'](_0x34d630(0x247),closeResimulateModal),_0x2a740c['addEventListener']('click',_0x274033=>{_0x274033['target']===_0x2a740c&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x1b5649=a0_0x3aa75c;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x581c21=document[_0x1b5649(0x351)](_0x1b5649(0x365)),_0x4c8b92=document['getElementById']('create-test-match-form');if(!_0x581c21){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification(_0x1b5649(0x158),'error');return;}if(!_0x4c8b92){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x4c8b92['reset']();const _0x2def83=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x8ccf7f=![];_0x2def83['forEach'](_0x355287=>{const _0x5f4efb=_0x1b5649;console['log'](_0x5f4efb(0x269),_0x355287['value']),_0x355287['value']===currentLadder&&(_0x355287[_0x5f4efb(0x2dd)]=!![],_0x8ccf7f=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x8ccf7f){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x41ef32=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x41ef32&&(_0x41ef32['checked']=!![],console[_0x1b5649(0x181)](_0x1b5649(0x1ad)));}const _0x3766fa=document['getElementById']('test-match-date');if(_0x3766fa){const _0x2350a9=new Date()[_0x1b5649(0x358)]()['split']('T')[0x0];_0x3766fa['value']=_0x2350a9;}_0x581c21[_0x1b5649(0x2f7)]['display']=_0x1b5649(0x227),_0x581c21['style']['visibility']='visible',_0x581c21[_0x1b5649(0x2f7)]['opacity']='1',_0x581c21['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x4c9141=document[_0x1b5649(0x351)]('test-match-winner-username');_0x4c9141&&setTimeout(()=>{_0x4c9141['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x77c77a=a0_0x3aa75c;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x2d0639=document['getElementById'](_0x77c77a(0x365));if(!_0x2d0639){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x2d0639['classList']['remove']('active'),_0x2d0639[_0x77c77a(0x2f7)]['opacity']='0',_0x2d0639['style'][_0x77c77a(0x199)]='hidden',setTimeout(()=>{const _0x5d8445=_0x77c77a;!_0x2d0639['classList']['contains'](_0x5d8445(0x320))&&(_0x2d0639['style'][_0x5d8445(0x221)]='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x67f445=a0_0x3aa75c;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x3b273a=auth['currentUser'];if(!_0x3b273a){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x1b84e7='D1',_0x333cbd='approvedMatches',_0x12220a={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x3b273a[_0x67f445(0x1fe)],'createdAt':serverTimestamp(),'createdBy':_0x3b273a[_0x67f445(0x1fe)],'isTestMatch':!![],'ladder':_0x1b84e7,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x3b273a['email']};console['log'](_0x67f445(0x219)),await addDoc(collection(db,_0x333cbd),_0x12220a),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x4db2f3){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x4db2f3),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x4db2f3['message'],_0x67f445(0x18d));}}window['testFirebaseConnection']=async function(){const _0x16fa74=a0_0x3aa75c;try{console['log']('Testing\x20Firebase\x20connection...'),console[_0x16fa74(0x181)]('Auth:',auth),console[_0x16fa74(0x181)](_0x16fa74(0x2e5),db),console['log'](_0x16fa74(0x144),auth[_0x16fa74(0x2a9)]);const _0x415588=collection(db,'players');console['log'](_0x16fa74(0x1a6),_0x415588);const _0x116036=query(_0x415588,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x116036);const _0x1dd1f5=await getDocs(_0x116036);console['log']('Query\x20executed.\x20Empty:',_0x1dd1f5[_0x16fa74(0x2ac)]),console['log'](_0x16fa74(0x14d));}catch(_0x368134){console['error']('Firebase\x20connection\x20test\x20failed:',_0x368134);}};function setupCreateTestMatchButton(){const _0x264770=a0_0x3aa75c,_0x37256a=document['getElementById'](_0x264770(0x180));if(!_0x37256a){console[_0x264770(0x18d)]('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x48a8c8=_0x37256a[_0x264770(0x276)](!![]);_0x37256a['parentNode'][_0x264770(0x243)](_0x48a8c8,_0x37256a),_0x48a8c8['addEventListener'](_0x264770(0x247),function(_0x5ef886){_0x5ef886['preventDefault'](),_0x5ef886['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log'](_0x264770(0x13a));}async function loadMatchesData(_0x4e464e=0x1){const _0x4fe2aa=a0_0x3aa75c,_0x4487e4=document['getElementById']('matches-table-body');if(!_0x4487e4)return;_0x4487e4[_0x4fe2aa(0x1ae)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x3b7d8e=currentLadder['toLowerCase'](),_0x1ec00=matchesPagination[_0x3b7d8e],_0x8093fa=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x4fe2aa(0x1da):'approvedMatchesD3',_0x502eae=collection(db,_0x8093fa);_0x4e464e<=0x1?(_0x1ec00['page']=0x1,_0x1ec00['firstVisible']=null,_0x1ec00['lastVisible']=null):_0x1ec00['page']=_0x4e464e;const _0x1b92b0=getMatchesFilters();let _0x17beee=_0x502eae;if(_0x1b92b0['startDate']||_0x1b92b0['endDate']||_0x1b92b0['searchTerm']){let _0xb006bc=[];_0x1b92b0[_0x4fe2aa(0x278)]&&_0x1b92b0[_0x4fe2aa(0x2e9)]?(_0xb006bc['push'](where(_0x4fe2aa(0x314),'>=',_0x1b92b0[_0x4fe2aa(0x278)]),where('approvedAt','<=',_0x1b92b0[_0x4fe2aa(0x2e9)])),_0x17beee=query(_0x502eae,..._0xb006bc)):_0x17beee=query(_0x502eae,orderBy(_0x4fe2aa(0x314),'desc'));}else _0x17beee=query(_0x502eae,orderBy('approvedAt','desc'));_0x4e464e>0x1&&_0x1ec00['lastVisible']?_0x17beee=query(_0x17beee,startAfter(_0x1ec00['lastVisible']),limit(PAGE_SIZE)):_0x17beee=query(_0x17beee,limit(PAGE_SIZE));const _0x44dae8=await getDocs(_0x17beee);!_0x44dae8['empty']&&(_0x1ec00[_0x4fe2aa(0x15d)]=_0x44dae8['docs'][0x0],_0x1ec00['lastVisible']=_0x44dae8['docs'][_0x44dae8[_0x4fe2aa(0x337)]['length']-0x1]);let _0x517ec7=![];if(!_0x44dae8['empty']){const _0xef1ccb=query(_0x17beee,startAfter(_0x1ec00['lastVisible']),limit(0x1)),_0x45e549=await getDocs(_0xef1ccb);_0x517ec7=!_0x45e549['empty'];}const _0x22a3e9=document['getElementById'](_0x4fe2aa(0x27b)),_0x56110f=document['getElementById']('matches-next-page'),_0x344e68=document[_0x4fe2aa(0x351)](_0x4fe2aa(0x338));if(_0x22a3e9)_0x22a3e9['disabled']=_0x1ec00[_0x4fe2aa(0x29f)]<=0x1;if(_0x56110f)_0x56110f[_0x4fe2aa(0x2a5)]=!_0x517ec7;if(_0x344e68)_0x344e68['textContent']='Page\x20'+_0x1ec00[_0x4fe2aa(0x29f)];if(_0x44dae8[_0x4fe2aa(0x2ac)]){_0x4487e4['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x4487e4['innerHTML']='',_0x44dae8['forEach'](_0x33e038=>{const _0x1559cd=_0x4fe2aa,_0x105ca6=_0x33e038['data'](),_0x563284=document['createElement']('tr'),_0x18d8bb=_0x105ca6[_0x1559cd(0x314)]?new Date(_0x105ca6[_0x1559cd(0x314)]['seconds']*0x3e8)['toLocaleDateString']():_0x1559cd(0x173);_0x563284['setAttribute'](_0x1559cd(0x190),_0x33e038['id']),_0x563284[_0x1559cd(0x2bc)]('data-ladder',currentLadder),_0x563284['classList'][_0x1559cd(0x20f)]('match-row'),_0x563284['innerHTML']=_0x1559cd(0x38e)+_0x18d8bb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x105ca6['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x105ca6['loserUsername']||_0x1559cd(0x2ee))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x105ca6['winnerScore']||0x0)+'\x20-\x20'+(_0x105ca6['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x105ca6['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x33e038['id']+_0x1559cd(0x2a0)+_0x33e038['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4487e4[_0x1559cd(0x188)](_0x563284);}),setupMatchesActionButtons(),_0x1b92b0['searchTerm']&&filterMatchesTable(),console['log']('Loaded\x20'+_0x44dae8['size']+'\x20matches\x20for\x20'+currentLadder+_0x4fe2aa(0x2d3)+_0x1ec00['page']);}catch(_0x17b08a){console['error']('Error\x20loading\x20matches:',_0x17b08a),_0x4487e4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x17b08a[_0x4fe2aa(0x186)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x2acf94,_0x70caf0){const _0x3f7726=a0_0x3aa75c;try{console['log']('Deleting\x20match\x20'+_0x2acf94+'\x20from\x20'+_0x70caf0+'\x20ladder');const _0x49fbc8=auth[_0x3f7726(0x2a9)];if(!_0x49fbc8){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches',_0x3f7726(0x18d));return;}const _0x55739d=_0x70caf0==='D1'?_0x3f7726(0x335):_0x70caf0==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log'](_0x3f7726(0x2b3)+_0x55739d),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x55739d,_0x2acf94)),console['log']('Match\x20deleted\x20successfully'),showNotification(_0x3f7726(0x1a3),_0x3f7726(0x170));const _0x23ba9b=_0x70caf0[_0x3f7726(0x1e6)]();loadMatchesData(matchesPagination[_0x23ba9b]['page']);}catch(_0x205da5){console['error']('Error\x20deleting\x20match:',_0x205da5),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x205da5[_0x3f7726(0x186)],'error');}}function setupMatchesActionButtons(){const _0x1a6d31=a0_0x3aa75c;console[_0x1a6d31(0x181)]('Setting\x20up\x20matches\x20action\x20buttons...'),document[_0x1a6d31(0x361)]('.edit-match-btn')['forEach'](_0x50a2b5=>{_0x50a2b5['addEventListener']('click',_0x125e35=>{const _0x48c277=a0_0x150f;_0x125e35[_0x48c277(0x233)](),_0x125e35['stopPropagation']();const _0x1e740f=_0x125e35[_0x48c277(0x38a)]['dataset']['id'],_0x16ff24=_0x125e35['currentTarget']['closest']('tr'),_0x488e06=_0x16ff24['dataset']['ladder'];console['log']('Edit\x20match\x20clicked:',_0x1e740f,_0x488e06),openEditMatchModal(_0x1e740f,_0x488e06);});}),document[_0x1a6d31(0x361)]('.delete-match-btn')['forEach'](_0x220c9a=>{_0x220c9a['addEventListener']('click',_0x1776b3=>{const _0x3a51b1=a0_0x150f;_0x1776b3['preventDefault'](),_0x1776b3[_0x3a51b1(0x17a)]();const _0x3bea8c=_0x1776b3[_0x3a51b1(0x38a)]['dataset']['id'],_0x506f7=_0x1776b3['currentTarget'][_0x3a51b1(0x230)]('tr'),_0x951fbb=_0x506f7['dataset']['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x3bea8c,_0x951fbb),confirm(_0x3a51b1(0x1e9))&&deleteMatch(_0x3bea8c,_0x951fbb);});}),console['log'](_0x1a6d31(0x1f5));}function filterMatchesTable(){const _0x1b5273=a0_0x3aa75c,_0x1e1b9f=document[_0x1b5273(0x351)]('matches-search')[_0x1b5273(0x19c)]['toLowerCase'](),_0x48903d=document[_0x1b5273(0x361)]('#matches-table-body\x20tr');let _0x22c9cd=0x0;_0x48903d['forEach'](_0x3655ec=>{const _0x58fb99=_0x1b5273;if(_0x3655ec[_0x58fb99(0x288)]['contains']('loading-cell')||_0x3655ec['classList'][_0x58fb99(0x165)](_0x58fb99(0x2b2))||_0x3655ec['classList']['contains'](_0x58fb99(0x270)))return;const _0x1b0baa=_0x3655ec['cells'][0x1]['textContent'][_0x58fb99(0x1e6)](),_0x285c53=_0x3655ec[_0x58fb99(0x1f1)][0x2][_0x58fb99(0x37f)]['toLowerCase'](),_0xd90b98=_0x3655ec['cells'][0x4]['textContent']['toLowerCase']();_0x1b0baa[_0x58fb99(0x262)](_0x1e1b9f)||_0x285c53['includes'](_0x1e1b9f)||_0xd90b98[_0x58fb99(0x262)](_0x1e1b9f)?(_0x3655ec['style'][_0x58fb99(0x221)]='',_0x22c9cd++):_0x3655ec['style']['display']=_0x58fb99(0x207);});if(_0x22c9cd===0x0&&_0x48903d[_0x1b5273(0x218)]>0x0){const _0x531153=document['getElementById']('matches-table-body'),_0x525d10=_0x531153[_0x1b5273(0x147)]('.no-results');if(!_0x525d10){const _0x1174c1=document[_0x1b5273(0x324)]('tr');_0x1174c1['className']='no-results',_0x1174c1['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x1e1b9f+_0x1b5273(0x212),_0x531153[_0x1b5273(0x188)](_0x1174c1);}}else{const _0xf66e8=document['querySelector']('.no-results');_0xf66e8&&_0xf66e8['remove']();}}function getMatchesFilters(){const _0x1bb267=a0_0x3aa75c,_0x3b9ce3=document[_0x1bb267(0x351)]('matches-search')['value']['toLowerCase'](),_0xa54d1f=document[_0x1bb267(0x351)]('matches-start-date')['value'],_0x5349aa=document['getElementById'](_0x1bb267(0x234))['value'];let _0x2d330e=null,_0x26db72=null;return _0xa54d1f&&(_0x2d330e=new Date(_0xa54d1f),_0x2d330e['setHours'](0x0,0x0,0x0,0x0),_0x2d330e=Timestamp['fromDate'](_0x2d330e)),_0x5349aa&&(_0x26db72=new Date(_0x5349aa),_0x26db72['setHours'](0x17,0x3b,0x3b,0x3e7),_0x26db72=Timestamp['fromDate'](_0x26db72)),{'searchTerm':_0x3b9ce3,'startDate':_0x2d330e,'endDate':_0x26db72};}async function applyMatchesFilters(){const _0x3c6810=currentLadder['toLowerCase']();matchesPagination[_0x3c6810]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x3e9562=a0_0x3aa75c;document['getElementById']('matches-start-date')['value']='',document['getElementById']('matches-end-date')[_0x3e9562(0x19c)]='',document['getElementById']('matches-search')['value']='';const _0x27df26=currentLadder['toLowerCase']();matchesPagination[_0x27df26]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x3ec5f2,_0x188085){const _0x21e51b=a0_0x3aa75c,_0x16e732=document['getElementById']('edit-match-modal');if(!_0x16e732)return;try{const _0x1f231e=_0x188085==='D1'?'approvedMatches':_0x188085==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2d9b4a=doc(db,_0x1f231e,_0x3ec5f2),_0x2eb4b5=await getDoc(_0x2d9b4a);if(!_0x2eb4b5['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0xb56261=_0x2eb4b5[_0x21e51b(0x1cb)]();document[_0x21e51b(0x351)](_0x21e51b(0x21d))['value']=_0x3ec5f2,document[_0x21e51b(0x351)]('edit-match-ladder')['value']=_0x188085,document[_0x21e51b(0x351)]('edit-match-winner')['value']=_0xb56261[_0x21e51b(0x206)]||'',document[_0x21e51b(0x351)]('edit-match-winner-score')['value']=_0xb56261['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0xb56261['winnerSuicides']||0x0,document[_0x21e51b(0x351)](_0x21e51b(0x379))['value']=_0xb56261['winnerComment']||'',document['getElementById'](_0x21e51b(0x24c))[_0x21e51b(0x19c)]=_0xb56261['loserUsername']||'',document['getElementById'](_0x21e51b(0x148))['value']=_0xb56261['loserScore']||0x0,document['getElementById'](_0x21e51b(0x1f2))['value']=_0xb56261['loserSuicides']||0x0,document[_0x21e51b(0x351)]('edit-match-loser-comment')['value']=_0xb56261['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0xb56261['mapPlayed']||'',document[_0x21e51b(0x351)]('edit-match-winner-demo')['value']=_0xb56261['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0xb56261['loserDemoLink']||_0xb56261['demoLink']||'',document['getElementById']('edit-match-title')['textContent']=_0x21e51b(0x22d)+_0xb56261['winnerUsername']+'\x20vs\x20'+_0xb56261['loserUsername'],_0x16e732['classList']['add']('active');}catch(_0xa7bf32){console['error'](_0x21e51b(0x384),_0xa7bf32),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0xeee946=a0_0x3aa75c,_0xd5f482=document['getElementById']('edit-match-modal');_0xd5f482&&_0xd5f482[_0xeee946(0x288)][_0xeee946(0x2db)]('active');}async function saveEditedMatch(){const _0x22f110=a0_0x3aa75c;try{const _0x5a3f23=document['getElementById'](_0x22f110(0x21d))['value'],_0x3fe537=document['getElementById']('edit-match-ladder')['value'];if(!_0x5a3f23||!_0x3fe537){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x22f110(0x18d));return;}const _0x3a5d0c=_0x3fe537==='D1'?'approvedMatches':_0x3fe537==='D2'?_0x22f110(0x1da):_0x22f110(0x1ea),_0x3d8896=document['getElementById'](_0x22f110(0x1e8))['value']['trim'](),_0x25a3ef=parseInt(document[_0x22f110(0x351)]('edit-match-winner-score')['value']),_0x56d2b3=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x20868f=document['getElementById']('edit-match-winner-comment')['value']['trim'](),_0x364db5=document['getElementById']('edit-match-loser')[_0x22f110(0x19c)]['trim'](),_0xa65ae=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x5f3e6a=parseInt(document['getElementById'](_0x22f110(0x1f2))[_0x22f110(0x19c)]),_0x2841cf=document[_0x22f110(0x351)]('edit-match-loser-comment')[_0x22f110(0x19c)]['trim'](),_0x3a722c=document[_0x22f110(0x351)](_0x22f110(0x265))['value']['trim'](),_0x34cf2c=document['getElementById'](_0x22f110(0x155))['value']['trim'](),_0x1e6ce1=document[_0x22f110(0x351)](_0x22f110(0x31f))['value']['trim']();if(!_0x3d8896||!_0x364db5){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required',_0x22f110(0x18d));return;}await updateDoc(doc(db,_0x3a5d0c,_0x5a3f23),{'winnerUsername':_0x3d8896,'winnerScore':_0x25a3ef,'winnerSuicides':_0x56d2b3,'winnerComment':_0x20868f,'loserUsername':_0x364db5,'loserScore':_0xa65ae,'loserSuicides':_0x5f3e6a,'loserComment':_0x2841cf,'mapPlayed':_0x3a722c,'winnerDemoLink':_0x34cf2c||null,'loserDemoLink':_0x1e6ce1||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x22f110(0x1fe)],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x3fe537[_0x22f110(0x1e6)]()][_0x22f110(0x29f)]);}catch(_0x489368){console['error']('Error\x20saving\x20match:',_0x489368),showNotification(_0x22f110(0x161)+_0x489368[_0x22f110(0x186)],'error');}}async function openDeleteMatchModal(_0x20b18f,_0x26ff70){const _0x1e4a95=a0_0x3aa75c;try{const _0x5b8347=_0x26ff70==='D1'?'approvedMatches':_0x26ff70==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x151b21=doc(db,_0x5b8347,_0x20b18f),_0x5286af=await getDoc(_0x151b21);if(!_0x5286af['exists']()){showNotification(_0x1e4a95(0x350),_0x1e4a95(0x18d));return;}const _0x5caa40=_0x5286af['data'](),_0x133116=document['getElementById']('delete-match-confirm-modal');_0x133116['dataset']['matchId']=_0x20b18f,_0x133116[_0x1e4a95(0x1bc)][_0x1e4a95(0x35c)]=_0x26ff70;const _0x22b7f3=_0x5caa40[_0x1e4a95(0x314)]?new Date(_0x5caa40[_0x1e4a95(0x314)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x1fec52=document[_0x1e4a95(0x351)](_0x1e4a95(0x172));_0x1fec52['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x22b7f3+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x5caa40[_0x1e4a95(0x206)]+'\x20(winner)\x20vs\x20'+_0x5caa40['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x5caa40[_0x1e4a95(0x32a)]||0x0)+'\x20-\x20'+(_0x5caa40[_0x1e4a95(0x258)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x5caa40['mapPlayed']||'N/A')+_0x1e4a95(0x23b)+_0x26ff70+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x133116['classList']['add']('active');}catch(_0xf3c868){console[_0x1e4a95(0x18d)]('Error\x20loading\x20match\x20for\x20deletion:',_0xf3c868),showNotification(_0x1e4a95(0x25a),'error');}}function closeDeleteMatchModal(){const _0x23f2e5=a0_0x3aa75c,_0x2c0b63=document['getElementById'](_0x23f2e5(0x310));_0x2c0b63&&(_0x2c0b63['classList'][_0x23f2e5(0x2db)]('active'),_0x2c0b63[_0x23f2e5(0x31a)]('data-match-id'),_0x2c0b63[_0x23f2e5(0x31a)](_0x23f2e5(0x16a)));}async function confirmDeleteMatch(){const _0x4429a8=a0_0x3aa75c,_0x25fada=document['getElementById']('delete-match-confirm-modal'),_0x43c67a=_0x25fada['dataset']['matchId'],_0x1d8127=_0x25fada['dataset'][_0x4429a8(0x35c)];if(!_0x43c67a||!_0x1d8127){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x4429a8(0x18d)),closeDeleteMatchModal();return;}try{const _0x531dc3=_0x1d8127==='D1'?'approvedMatches':_0x1d8127==='D2'?_0x4429a8(0x1da):'approvedMatchesD3';await deleteDoc(doc(db,_0x531dc3,_0x43c67a)),showNotification(_0x4429a8(0x1a3),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x1d8127['toLowerCase']()]['page']);}catch(_0x198ac9){console['error']('Error\x20deleting\x20match:',_0x198ac9),showNotification(_0x4429a8(0x28c)+_0x198ac9['message'],'error');}}async function saveHighlightChanges(){const _0x1c4b1e=a0_0x3aa75c,_0x583784=document['getElementById']('edit-highlight-id')[_0x1c4b1e(0x19c)],_0x5b568c=document['getElementById']('edit-highlight-type-select')['value'];let _0x5905a2={'title':document['getElementById']('edit-highlight-title-input')[_0x1c4b1e(0x19c)]['trim'](),'type':_0x5b568c,'description':document['getElementById']('edit-highlight-description-input')['value'][_0x1c4b1e(0x284)](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth[_0x1c4b1e(0x2a9)]['email']};if(_0x5b568c===_0x1c4b1e(0x2df)){_0x5905a2['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')[_0x1c4b1e(0x19c)]['trim'](),_0x5905a2['map']=document[_0x1c4b1e(0x351)]('edit-highlight-map-input')['value']['trim']();const _0x327fa6=document[_0x1c4b1e(0x351)]('edit-highlight-matchDate-input')[_0x1c4b1e(0x19c)];_0x5905a2['matchDate']=_0x327fa6?Timestamp['fromDate'](new Date(_0x327fa6)):null,_0x5905a2[_0x1c4b1e(0x386)]=document['getElementById']('edit-highlight-winnerName-input')[_0x1c4b1e(0x19c)]['trim'](),_0x5905a2['winnerScore']=document[_0x1c4b1e(0x351)]('edit-highlight-winnerScore-input')[_0x1c4b1e(0x19c)]['trim'](),_0x5905a2['loserName']=document['getElementById']('edit-highlight-loserName-input')['value']['trim'](),_0x5905a2[_0x1c4b1e(0x258)]=document[_0x1c4b1e(0x351)]('edit-highlight-loserScore-input')['value']['trim'](),_0x5905a2['matchLink']=document[_0x1c4b1e(0x351)]('edit-highlight-matchLink-input')['value'][_0x1c4b1e(0x284)](),_0x5905a2[_0x1c4b1e(0x140)]=null,_0x5905a2[_0x1c4b1e(0x349)]=null,_0x5905a2['creatorImageUrl']=null,_0x5905a2['achievementPlayer']=null,_0x5905a2['achievementType']=null,_0x5905a2['achievementDetails']=null,_0x5905a2[_0x1c4b1e(0x309)]=null;}else{if(_0x5b568c==='creator')_0x5905a2['map']=document['getElementById'](_0x1c4b1e(0x2ff))['value']['trim'](),_0x5905a2['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x5905a2['mapVersion']=document[_0x1c4b1e(0x351)]('edit-highlight-mapVersion-input')[_0x1c4b1e(0x19c)][_0x1c4b1e(0x284)](),_0x5905a2['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')['value'][_0x1c4b1e(0x284)](),_0x5905a2['matchInfo']=null,_0x5905a2[_0x1c4b1e(0x1ef)]=null,_0x5905a2['winnerName']=null,_0x5905a2['winnerScore']=null,_0x5905a2['loserName']=null,_0x5905a2[_0x1c4b1e(0x258)]=null,_0x5905a2['matchLink']=null,_0x5905a2['achievementPlayer']=null,_0x5905a2['achievementType']=null,_0x5905a2['achievementDetails']=null,_0x5905a2[_0x1c4b1e(0x309)]=null;else _0x5b568c==='achievement'&&(_0x5905a2[_0x1c4b1e(0x29a)]=document[_0x1c4b1e(0x351)]('edit-highlight-achievementPlayer-input')[_0x1c4b1e(0x19c)]['trim'](),_0x5905a2['achievementType']=document[_0x1c4b1e(0x351)]('edit-highlight-achievementType-input')[_0x1c4b1e(0x19c)]['trim'](),_0x5905a2['achievementDetails']=document[_0x1c4b1e(0x351)]('edit-highlight-achievementDetails-input')['value'][_0x1c4b1e(0x284)](),_0x5905a2['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x5905a2['matchInfo']=null,_0x5905a2['map']=null,_0x5905a2['matchDate']=null,_0x5905a2['winnerName']=null,_0x5905a2[_0x1c4b1e(0x32a)]=null,_0x5905a2[_0x1c4b1e(0x334)]=null,_0x5905a2[_0x1c4b1e(0x258)]=null,_0x5905a2['matchLink']=null,_0x5905a2['mapCreator']=null,_0x5905a2['mapVersion']=null,_0x5905a2[_0x1c4b1e(0x150)]=null);}try{if(_0x583784){_0x5905a2['updatedAt']=serverTimestamp();const _0x493b48=doc(db,'highlights',_0x583784);await updateDoc(_0x493b48,_0x5905a2),showNotification(_0x1c4b1e(0x2d7),_0x1c4b1e(0x170));}else _0x5905a2['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x5905a2),showNotification('Highlight\x20added\x20successfully!',_0x1c4b1e(0x170));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x386038){console[_0x1c4b1e(0x18d)]('Error\x20saving\x20highlight:',_0x386038),showNotification('Error\x20saving\x20highlight:\x20'+_0x386038['message'],_0x1c4b1e(0x18d));}}async function resimulateMatch(){const _0x4a8a9d=a0_0x3aa75c;try{const _0x1bb05a=document['getElementById'](_0x4a8a9d(0x19b))['value'];if(!_0x1bb05a){showNotification('Match\x20ID\x20is\x20required',_0x4a8a9d(0x18d));return;}const _0x5b0c14=auth['currentUser'];if(!_0x5b0c14){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x1f0b4e=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x4d9dc9=doc(db,_0x1f0b4e,_0x1bb05a),_0x4fa673=await getDoc(_0x4d9dc9);if(!_0x4fa673['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x4a8a9d(0x18d));return;}const _0x5a6c65=_0x4fa673['data'](),_0x94affd=_0x5a6c65['approvedAt']?_0x5a6c65['approvedAt']['toDate']()[_0x4a8a9d(0x1ec)]():_0x5a6c65['matchDate']?_0x5a6c65[_0x4a8a9d(0x1ef)]['toDate']?_0x5a6c65['matchDate'][_0x4a8a9d(0x18e)]()['toLocaleString']():new Date(_0x5a6c65['matchDate'])['toLocaleString']():'Unknown',_0x13aac9=_0x4a8a9d(0x216)+_0x5a6c65['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x5a6c65['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x5a6c65['winnerScore']+'-'+_0x5a6c65['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x5a6c65['mapPlayed']||_0x5a6c65['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x94affd+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x1bb05a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')['innerHTML']=_0x13aac9,document[_0x4a8a9d(0x351)](_0x4a8a9d(0x347))[_0x4a8a9d(0x2f7)]['display']='block',document['getElementById']('confirm-resimulate-btn')['style'][_0x4a8a9d(0x221)]='block',window['pendingResimulateData']={'matchId':_0x1bb05a,'matchData':_0x5a6c65,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation',_0x4a8a9d(0x35a));}catch(_0x3202b9){console[_0x4a8a9d(0x18d)](_0x4a8a9d(0x34a),_0x3202b9),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x3202b9['message'],'error');}}async function confirmResimulateMatch(){const _0x3e28cf=a0_0x3aa75c;try{const {matchId:_0x585f7b,matchData:_0x4f8cad,ladder:_0x51e8a6}=window['pendingResimulateData'];if(!_0x585f7b||!_0x4f8cad){showNotification(_0x3e28cf(0x2ec),'error');return;}const _0x4b71f0=_0x51e8a6==='D1'?'players':_0x51e8a6==='D2'?'playersD2':'playersD3',_0x434ab1=_0x51e8a6==='D1'?_0x3e28cf(0x1e7):_0x51e8a6==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x4093ee,_0x4ee6c0]=await Promise['all']([getDocs(query(collection(db,_0x4b71f0),where('username','==',_0x4f8cad[_0x3e28cf(0x206)]))),getDocs(query(collection(db,_0x4b71f0),where('username','==',_0x4f8cad['loserUsername'])))]);if(_0x4093ee['empty']||_0x4ee6c0[_0x3e28cf(0x2ac)]){showNotification(_0x3e28cf(0x178),_0x3e28cf(0x18d));return;}const _0x25ba8e=_0x4093ee['docs'][0x0]['id'],_0x2f7ad0=_0x4ee6c0['docs'][0x0]['id'],_0x4c0045=_0x4093ee[_0x3e28cf(0x337)][0x0][_0x3e28cf(0x1cb)](),_0x2ef35c=_0x4ee6c0[_0x3e28cf(0x337)][0x0]['data'](),[_0x2be606,_0x122d78]=await Promise[_0x3e28cf(0x256)]([getDocs(query(collection(db,_0x434ab1),where(_0x3e28cf(0x1a0),'==',_0x25ba8e),where(_0x3e28cf(0x160),'==',_0x585f7b))),getDocs(query(collection(db,_0x434ab1),where(_0x3e28cf(0x1a0),'==',_0x2f7ad0),where('matchId','==',_0x585f7b)))]),_0x39334e=!_0x2be606['empty'],_0x36b9c5=!_0x122d78[_0x3e28cf(0x2ac)],_0x244ed0=_0x3e28cf(0x1fc)+(_0x39334e?_0x3e28cf(0x37e):'❌\x20Missing')+_0x3e28cf(0x139)+(_0x36b9c5?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x4c0045['eloRating']||_0x3e28cf(0x2ee))+_0x3e28cf(0x1c3)+(_0x2ef35c['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x4c0045['position']||'Unknown')+_0x3e28cf(0x193)+(_0x2ef35c[_0x3e28cf(0x325)]||_0x3e28cf(0x2ee))+_0x3e28cf(0x2cb);document['getElementById']('validation-results-container')['innerHTML']=_0x244ed0,document['getElementById'](_0x3e28cf(0x2ba))[_0x3e28cf(0x2f7)]['display']='block';if(_0x39334e&&_0x36b9c5){showNotification(_0x3e28cf(0x30a),'warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x218f61=_0x4f8cad['approvedAt']||_0x4f8cad[_0x3e28cf(0x1ef)]||serverTimestamp(),[_0x1b302f,_0x1ce756]=await Promise['all']([getPlayerEloAtTime(_0x25ba8e,_0x218f61,_0x434ab1),getPlayerEloAtTime(_0x2f7ad0,_0x218f61,_0x434ab1)]),{calculateElo:_0x3602b4}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x56c21d,newLoserRating:_0x1170a}=_0x3602b4(_0x1b302f,_0x1ce756),_0x95a775=_0x4c0045['position']||Number['MAX_SAFE_INTEGER'],_0x6ede75=_0x2ef35c['position']||Number[_0x3e28cf(0x146)];let _0x4227c4=_0x95a775,_0x360ab9=_0x6ede75;_0x95a775>_0x6ede75&&(_0x4227c4=_0x6ede75,_0x360ab9=_0x6ede75+0x1);const _0x208e14=writeBatch(db),_0x2eee14=doc(db,_0x4b71f0,_0x25ba8e);_0x208e14['update'](_0x2eee14,{'eloRating':_0x56c21d,'position':_0x4227c4,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x3e28cf(0x2a9)]['uid']});const _0x16addb=doc(db,_0x4b71f0,_0x2f7ad0);_0x208e14['update'](_0x16addb,{'eloRating':_0x1170a,'position':_0x360ab9,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x95a775>_0x6ede75){const _0x40c9e5=await getDocs(query(collection(db,_0x4b71f0),where('position','>',_0x6ede75),where(_0x3e28cf(0x325),'<',_0x95a775)));_0x40c9e5[_0x3e28cf(0x311)](_0x4fe83e=>{const _0x10cf88=doc(db,_0x4b71f0,_0x4fe83e['id']),_0x38eef9=_0x4fe83e['data']()['position'];_0x208e14['update'](_0x10cf88,{'position':_0x38eef9+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x39334e){const _0x2cf79a=doc(collection(db,_0x434ab1));_0x208e14['set'](_0x2cf79a,{'playerId':_0x25ba8e,'player':_0x4f8cad[_0x3e28cf(0x206)],'previousElo':_0x1b302f,'newElo':_0x56c21d,'eloChange':_0x56c21d-_0x1b302f,'opponentId':_0x2f7ad0,'opponent':_0x4f8cad['loserUsername'],'matchResult':'win','previousPosition':_0x95a775,'newPosition':_0x4227c4,'positionChange':_0x4227c4-_0x95a775,'matchId':_0x585f7b,'timestamp':_0x218f61,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x3e28cf(0x2a9)]['uid'],'gameMode':_0x51e8a6,'matchScore':_0x4f8cad[_0x3e28cf(0x32a)]+'-'+_0x4f8cad['loserScore'],'mapPlayed':_0x4f8cad[_0x3e28cf(0x32d)]||_0x4f8cad['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x36b9c5){const _0x82259=doc(collection(db,_0x434ab1));_0x208e14['set'](_0x82259,{'playerId':_0x2f7ad0,'player':_0x4f8cad['loserUsername'],'previousElo':_0x1ce756,'newElo':_0x1170a,'eloChange':_0x1170a-_0x1ce756,'opponentId':_0x25ba8e,'opponent':_0x4f8cad['winnerUsername'],'matchResult':'loss','previousPosition':_0x6ede75,'newPosition':_0x360ab9,'positionChange':_0x360ab9-_0x6ede75,'matchId':_0x585f7b,'timestamp':_0x218f61,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x51e8a6,'matchScore':_0x4f8cad['winnerScore']+'-'+_0x4f8cad['loserScore'],'mapPlayed':_0x4f8cad[_0x3e28cf(0x32d)]||_0x4f8cad['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x46b048=_0x51e8a6==='D1'?'approvedMatches':_0x51e8a6==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2f9cf1=doc(db,_0x46b048,_0x585f7b);_0x208e14[_0x3e28cf(0x33c)](_0x2f9cf1,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x3e28cf(0x2a9)]['uid'],'resimulatedReason':_0x3e28cf(0x30d),'originalWinnerElo':_0x4c0045[_0x3e28cf(0x235)],'originalLoserElo':_0x2ef35c['eloRating'],'originalWinnerPosition':_0x95a775,'originalLoserPosition':_0x6ede75,'resimulatedWinnerElo':_0x56c21d,'resimulatedLoserElo':_0x1170a,'resimulatedWinnerPosition':_0x4227c4,'resimulatedLoserPosition':_0x360ab9}),await _0x208e14['commit']();const _0xa2f4b2=(!_0x39334e?0x1:0x0)+(!_0x36b9c5?0x1:0x0),_0x52d944=_0x95a775!==_0x4227c4||_0x6ede75!==_0x360ab9;showNotification('Match\x20resimulated\x20successfully!\x20'+(_0x3e28cf(0x203)+_0xa2f4b2+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x1b302f+'→'+_0x56c21d+_0x3e28cf(0x259)+(_0x56c21d-_0x1b302f)+'),\x20')+('Loser\x20'+_0x1ce756+'→'+_0x1170a+'\x20('+(_0x1170a-_0x1ce756)+').\x20')+(''+(_0x52d944?'Positions\x20updated:\x20Winner\x20'+_0x95a775+'→'+_0x4227c4+',\x20Loser\x20'+_0x6ede75+'→'+_0x360ab9:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document[_0x3e28cf(0x147)]('#players.content-section.active')&&loadPlayersData();}catch(_0x123bf){console['error']('Error\x20resimulating\x20match:',_0x123bf),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x123bf['message'],_0x3e28cf(0x18d));}}async function getPlayerEloAtTime(_0x566ede,_0x1dcd4d,_0x4584c5){const _0x249d2a=a0_0x3aa75c;try{const _0x3c39ab=_0x1dcd4d['toDate']?_0x1dcd4d['toDate']():new Date(_0x1dcd4d),_0x3c42ca=query(collection(db,_0x4584c5),where('playerId','==',_0x566ede),where('timestamp','<',_0x1dcd4d),orderBy('timestamp',_0x249d2a(0x33b)),limit(0x1)),_0x26d33f=await getDocs(_0x3c42ca);if(!_0x26d33f['empty']){const _0x107b53=_0x26d33f[_0x249d2a(0x337)][0x0][_0x249d2a(0x1cb)]();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x566ede+'\x20before\x20match:\x20'+_0x107b53['newElo']),_0x107b53['newElo'];}else return console['log'](_0x249d2a(0x2e8)+_0x566ede+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x3b29d2){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x566ede+':',_0x3b29d2),0x4b0;}}function openResimulateModal(){const _0x3cf685=a0_0x3aa75c;console['log'](_0x3cf685(0x2c4));const _0x744d79=document['getElementById'](_0x3cf685(0x228));console['log']('Modal\x20element\x20found:',_0x744d79);if(!_0x744d79){console['error'](_0x3cf685(0x25b));return;}_0x744d79['style'][_0x3cf685(0x221)]='block',_0x744d79['style']['visibility']='visible',_0x744d79['style'][_0x3cf685(0x2f9)]='1',_0x744d79['classList']['add'](_0x3cf685(0x320)),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x744d79)['display']);const _0x27de7f=document['getElementById']('match-details-container'),_0xa216f5=document['getElementById']('validation-results-container'),_0x3230fd=document['getElementById'](_0x3cf685(0x177)),_0xdf45f7=document['getElementById']('resimulate-match-id');if(_0x27de7f)_0x27de7f['innerHTML']='';if(_0xa216f5)_0xa216f5['innerHTML']='';if(_0x3230fd)_0x3230fd[_0x3cf685(0x2f7)]['display']='none';if(_0xdf45f7)_0xdf45f7[_0x3cf685(0x19c)]='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x2377b4=a0_0x3aa75c;document['getElementById']('resimulate-modal')['style']['display']='none',window[_0x2377b4(0x36c)]=null;}window[a0_0x3aa75c(0x2e2)]=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x4c7c87=a0_0x3aa75c;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x4c7c87(0x285),'success');}catch(_0xde44d8){console[_0x4c7c87(0x18d)]('Error\x20loading\x20points\x20data:',_0xde44d8),showNotification(_0x4c7c87(0x342)+_0xde44d8['message'],'error');}}function renderPointsOverview(_0xd8f4f3){const _0x48f2b0=a0_0x3aa75c,_0x54cf91=document[_0x48f2b0(0x351)]('points-overview-table-body');if(!_0x54cf91)return;if(_0xd8f4f3['length']===0x0){_0x54cf91['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x54cf91['innerHTML']='',_0xd8f4f3['forEach'](_0x467a47=>{const _0x1c9b46=_0x48f2b0,_0x12d0b6=document['createElement']('tr'),_0x58a814=_0x467a47[_0x1c9b46(0x182)]||_0x467a47['username']||'Unknown\x20User',_0x192c9b=_0x467a47['email']||'No\x20email',_0x583c30=_0x467a47[_0x1c9b46(0x2d9)]||0x0,_0x5bcdb4=_0x467a47['lastPointsModified']?new Date(_0x467a47['lastPointsModified']['seconds']*0x3e8)[_0x1c9b46(0x26d)]():'Never';_0x12d0b6[_0x1c9b46(0x1ae)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x58a814+_0x1c9b46(0x2a8)+_0x192c9b+_0x1c9b46(0x197)+(_0x583c30>0x3e8?_0x1c9b46(0x261):_0x583c30>0x1f4?_0x1c9b46(0x332):_0x1c9b46(0x217))+_0x1c9b46(0x145)+_0x583c30['toLocaleString']()+_0x1c9b46(0x363)+_0x5bcdb4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x467a47['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x467a47['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x54cf91['appendChild'](_0x12d0b6);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x42820f=a0_0x3aa75c;console['log'](_0x42820f(0x388));const _0x5d77f3=document[_0x42820f(0x361)]('.quick-edit-btn');console[_0x42820f(0x181)](_0x42820f(0x33a)+_0x5d77f3['length']+'\x20quick\x20edit\x20buttons'),_0x5d77f3['forEach'](_0x47f93d=>{const _0x5ad9a0=_0x42820f,_0x9f7a78=_0x47f93d[_0x5ad9a0(0x276)](!![]);_0x47f93d['parentNode'][_0x5ad9a0(0x243)](_0x9f7a78,_0x47f93d);});const _0x5697ea=document['querySelectorAll']('.view-history-btn');console['log']('Found\x20'+_0x5697ea['length']+'\x20view\x20history\x20buttons'),_0x5697ea['forEach'](_0x155d9a=>{const _0x17a25c=_0x155d9a['cloneNode'](!![]);_0x155d9a['parentNode']['replaceChild'](_0x17a25c,_0x155d9a);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x34f4f1=>{const _0xdde865=_0x42820f;_0x34f4f1['addEventListener'](_0xdde865(0x247),function(_0x4dcdc2){const _0x5dcf48=_0xdde865;_0x4dcdc2['preventDefault'](),_0x4dcdc2['stopPropagation']();const _0x5a9c42=this['dataset'][_0x5dcf48(0x33f)];console[_0x5dcf48(0x181)](_0x5dcf48(0x1c6),_0x5a9c42);if(!_0x5a9c42){console[_0x5dcf48(0x18d)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x5dcf48(0x2f7)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x5a9c42);});}),document['querySelectorAll'](_0x42820f(0x28e))[_0x42820f(0x311)](_0x3109e9=>{_0x3109e9['addEventListener']('click',function(_0x2257aa){const _0x13e2e5=a0_0x150f;_0x2257aa['preventDefault'](),_0x2257aa['stopPropagation']();const _0x1c8562=this[_0x13e2e5(0x1bc)]['userId'];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x1c8562);if(!_0x1c8562){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x1c8562);});}),console[_0x42820f(0x181)]('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x22b589){const _0x27461b=a0_0x3aa75c;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x22b589);const _0x1602c5=document['getElementById'](_0x27461b(0x1d3));if(!_0x1602c5){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...','info');const _0x28b611=doc(db,_0x27461b(0x27c),_0x22b589),_0x117a58=await getDoc(_0x28b611);if(!_0x117a58['exists']()){showNotification('User\x20not\x20found','error');return;}const _0x231461=_0x117a58['data']();console['log']('User\x20data\x20loaded:',_0x231461);const _0x2884e8=document[_0x27461b(0x351)](_0x27461b(0x255)),_0x6c47d3=document['getElementById'](_0x27461b(0x187)),_0x12327b=document['getElementById']('quick-edit-email'),_0x48f211=document['getElementById']('quick-edit-current-points'),_0x2663bc=document['getElementById']('quick-edit-points-form');if(!_0x2884e8||!_0x6c47d3||!_0x12327b||!_0x48f211||!_0x2663bc){console[_0x27461b(0x18d)]('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x2884e8[_0x27461b(0x19c)]=_0x22b589,_0x6c47d3['textContent']=_0x231461[_0x27461b(0x182)]||_0x231461['username']||'Unknown\x20User',_0x12327b[_0x27461b(0x37f)]=_0x231461['email']||'No\x20email',_0x48f211[_0x27461b(0x37f)]=(_0x231461['points']||0x0)['toLocaleString'](),_0x2663bc['reset']();const _0x5709e0=document['getElementById']('quick-add');_0x5709e0&&(_0x5709e0['checked']=!![]);_0x1602c5['classList']['add']('active'),console['log']('Modal\x20opened\x20successfully');const _0x466e75=document['getElementById'](_0x27461b(0x232));_0x466e75&&setTimeout(()=>_0x466e75['focus'](),0x64);}catch(_0x505deb){console[_0x27461b(0x18d)]('Error\x20opening\x20quick\x20edit\x20modal:',_0x505deb),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x505deb['message'],'error');}}function closeQuickEditModal(){const _0x4bb05e=a0_0x3aa75c,_0x7dac41=document['getElementById']('quick-edit-points-modal');_0x7dac41&&_0x7dac41['classList'][_0x4bb05e(0x2db)]('active');}async function handleQuickEditPoints(_0x4ae6c3){const _0x38b34b=a0_0x3aa75c;_0x4ae6c3['preventDefault']();const _0x41162d=document[_0x38b34b(0x351)](_0x38b34b(0x255))[_0x38b34b(0x19c)],_0x2a592c=document['querySelector']('input[name=\x22quick-action\x22]:checked')[_0x38b34b(0x19c)],_0x5dd190=parseInt(document['getElementById']('quick-points-amount')['value']),_0x1bbc32=document[_0x38b34b(0x351)]('quick-points-reason')['value'][_0x38b34b(0x284)]();console['log']('Processing\x20points\x20edit:',{'userId':_0x41162d,'action':_0x2a592c,'amount':_0x5dd190,'reason':_0x1bbc32});if(!_0x41162d||!_0x5dd190||_0x5dd190<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x41162d,_0x2a592c,_0x5dd190,_0x1bbc32),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x41162d);}catch(_0x3b14d5){console['error']('Error\x20updating\x20points:',_0x3b14d5),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x3b14d5['message'],'error');}}async function searchUsersForPoints(){const _0x4c24fe=a0_0x3aa75c,_0xaa992a=document['getElementById']('points-user-search')['value'][_0x4c24fe(0x284)]()['toLowerCase'](),_0x291ccb=document['getElementById']('user-search-results');if(!_0xaa992a||_0xaa992a['length']<0x2){_0x291ccb['innerHTML']='';return;}_0x291ccb[_0x4c24fe(0x1ae)]='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x8e444c=collection(db,'userProfiles'),_0x4f5817=await getDocs(_0x8e444c),_0xb5fb45=[];_0x4f5817[_0x4c24fe(0x311)](_0x490773=>{const _0x16d8a9=_0x4c24fe,_0x53fdaa=_0x490773[_0x16d8a9(0x1cb)](),_0x2d3cda=(_0x53fdaa['displayName']||_0x53fdaa['username']||'')['toLowerCase'](),_0x42fe53=(_0x53fdaa['email']||'')[_0x16d8a9(0x1e6)]();(_0x2d3cda[_0x16d8a9(0x262)](_0xaa992a)||_0x42fe53['includes'](_0xaa992a))&&_0xb5fb45[_0x16d8a9(0x2f5)]({'id':_0x490773['id'],..._0x53fdaa});});if(_0xb5fb45[_0x4c24fe(0x218)]===0x0){_0x291ccb[_0x4c24fe(0x1ae)]=_0x4c24fe(0x26a);return;}_0x291ccb['innerHTML']='',_0xb5fb45['forEach'](_0x5b4b7f=>{const _0x207308=_0x4c24fe,_0x2b1cd9=document['createElement']('div');_0x2b1cd9['className']=_0x207308(0x1db),_0x2b1cd9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x5b4b7f[_0x207308(0x182)]||_0x5b4b7f[_0x207308(0x389)]||'Unknown')+_0x207308(0x264)+(_0x5b4b7f['email']||_0x207308(0x2d5))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x5b4b7f['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2b1cd9['addEventListener'](_0x207308(0x247),()=>selectUserForPoints(_0x5b4b7f)),_0x291ccb['appendChild'](_0x2b1cd9);});}catch(_0x3762ba){console['error']('Error\x20searching\x20users:',_0x3762ba),_0x291ccb['innerHTML']=_0x4c24fe(0x336);}}function selectUserForPoints(_0x5f2fb1){const _0xbcda23=a0_0x3aa75c;document['getElementById']('selected-user-name')['textContent']=_0x5f2fb1[_0xbcda23(0x182)]||_0x5f2fb1['username']||'Unknown\x20User',document[_0xbcda23(0x351)]('selected-user-points')['textContent']=(_0x5f2fb1[_0xbcda23(0x2d9)]||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x5f2fb1['id'],document[_0xbcda23(0x351)]('selected-user-info')[_0xbcda23(0x2f7)]['display']=_0xbcda23(0x253),document[_0xbcda23(0x351)]('points-management-forms')['style']['display']=_0xbcda23(0x253),document[_0xbcda23(0x351)]('user-search-results')[_0xbcda23(0x1ae)]='',document[_0xbcda23(0x351)]('points-user-search')[_0xbcda23(0x19c)]='';}async function handleModifyPoints(_0x4940c0){const _0x21c407=a0_0x3aa75c;_0x4940c0[_0x21c407(0x233)]();const _0x20614c=document['getElementById']('selected-user-id')['value'],_0x482792=document['getElementById']('points-action')['value'],_0x102519=parseInt(document['getElementById']('points-amount')['value']),_0x463aff=document[_0x21c407(0x351)](_0x21c407(0x179))['value']['trim']();if(!_0x20614c||!_0x102519||_0x102519<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x21c407(0x18d));return;}try{await modifyUserPoints(_0x20614c,_0x482792,_0x102519,_0x463aff),document['getElementById']('modify-points-form')['reset']();const _0x2e8250=doc(db,'userProfiles',_0x20614c),_0x52cd44=await getDoc(_0x2e8250);if(_0x52cd44['exists']()){const _0xb9c71d=_0x52cd44['data']();document[_0x21c407(0x351)](_0x21c407(0x35f))['textContent']=(_0xb9c71d['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x15ee5b){console[_0x21c407(0x18d)]('Error\x20modifying\x20points:',_0x15ee5b),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x15ee5b[_0x21c407(0x186)],_0x21c407(0x18d));}}async function loadPointsHistory(){const _0x55c41a=a0_0x3aa75c,_0x4e74f1=document['getElementById']('points-history-table-body');if(!_0x4e74f1)return;_0x4e74f1['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x50cfc2=collection(db,'pointsHistory'),_0x30ea42=query(_0x50cfc2,orderBy('timestamp',_0x55c41a(0x33b)),limit(0x32)),_0x518630=await getDocs(_0x30ea42);if(_0x518630['empty']){_0x4e74f1['innerHTML']=_0x55c41a(0x15a);return;}_0x4e74f1[_0x55c41a(0x1ae)]='',_0x518630['forEach'](_0x5b9b33=>{const _0x4b10bc=_0x55c41a,_0x12d350=_0x5b9b33['data'](),_0x2e4308=document['createElement']('tr'),_0x1cf6bb=_0x12d350['timestamp']?new Date(_0x12d350['timestamp']['seconds']*0x3e8)[_0x4b10bc(0x1ec)]():'Unknown';let _0x2746d4='';switch(_0x12d350['action']){case _0x4b10bc(0x20f):_0x2746d4='Added\x20'+_0x12d350['amount']+'\x20points';break;case'subtract':_0x2746d4='Subtracted\x20'+_0x12d350['amount']+'\x20points';break;case'set':_0x2746d4='Set\x20to\x20'+_0x12d350['amount']+'\x20points';break;default:_0x2746d4=_0x12d350[_0x4b10bc(0x346)]+'\x20'+_0x12d350['amount']+'\x20points';}_0x2e4308['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1cf6bb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x12d350['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2746d4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x12d350['action']+_0x4b10bc(0x1fa)+(_0x12d350['previousPoints']||0x0)+_0x4b10bc(0x24d)+(_0x12d350[_0x4b10bc(0x2af)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x12d350['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x12d350[_0x4b10bc(0x1d1)]||_0x4b10bc(0x229))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4e74f1['appendChild'](_0x2e4308);});}catch(_0x546323){console['error']('Error\x20loading\x20points\x20history:',_0x546323),_0x4e74f1['innerHTML']=_0x55c41a(0x183)+_0x546323[_0x55c41a(0x186)]+'</td></tr>';}}function filterPointsOverview(){const _0x1dd17c=a0_0x3aa75c,_0x36525a=document['getElementById'](_0x1dd17c(0x370))[_0x1dd17c(0x19c)][_0x1dd17c(0x1e6)]();if(!window['allUsersPoints'])return;const _0x35aeec=window['allUsersPoints'][_0x1dd17c(0x208)](_0x58b691=>{const _0x18c847=_0x1dd17c,_0x44872e=(_0x58b691[_0x18c847(0x182)]||_0x58b691[_0x18c847(0x389)]||'')[_0x18c847(0x1e6)](),_0x5954ab=(_0x58b691[_0x18c847(0x1fe)]||'')['toLowerCase']();return _0x44872e['includes'](_0x36525a)||_0x5954ab['includes'](_0x36525a);});renderPointsOverview(_0x35aeec);}function sortPointsOverview(){const _0x2f1667=a0_0x3aa75c,_0x233b4b=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x87b7d3=[...window['allUsersPoints']];switch(_0x233b4b){case'points-desc':_0x87b7d3['sort']((_0x1b2a54,_0x5da9ec)=>(_0x5da9ec['points']||0x0)-(_0x1b2a54[_0x2f1667(0x2d9)]||0x0));break;case _0x2f1667(0x1cf):_0x87b7d3[_0x2f1667(0x323)]((_0xb0b271,_0xdae52)=>(_0xb0b271['points']||0x0)-(_0xdae52['points']||0x0));break;case _0x2f1667(0x21c):_0x87b7d3['sort']((_0x75f9c6,_0x4bd6cb)=>{const _0x21c655=(_0x75f9c6['displayName']||_0x75f9c6['username']||'')['toLowerCase'](),_0x2d116d=(_0x4bd6cb['displayName']||_0x4bd6cb['username']||'')['toLowerCase']();return _0x21c655['localeCompare'](_0x2d116d);});break;case'name-desc':_0x87b7d3['sort']((_0x13eac7,_0x15e569)=>{const _0x18812c=_0x2f1667,_0xa04d57=(_0x13eac7['displayName']||_0x13eac7[_0x18812c(0x389)]||'')['toLowerCase'](),_0x34f1b5=(_0x15e569[_0x18812c(0x182)]||_0x15e569[_0x18812c(0x389)]||'')[_0x18812c(0x1e6)]();return _0x34f1b5[_0x18812c(0x22f)](_0xa04d57);});break;}renderPointsOverview(_0x87b7d3);}async function handleAwardItem(_0x442c13){const _0x4e8b0b=a0_0x3aa75c;_0x442c13['preventDefault']();const _0x421126=document['getElementById']('selected-user-id')['value'],_0xea81e2=document[_0x4e8b0b(0x351)]('store-item-select')['value'],_0x2c5dfa=document['getElementById']('award-reason')[_0x4e8b0b(0x19c)]['trim']();if(!_0x421126||!_0xea81e2){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x4e8b0b(0x18d));return;}try{showNotification(_0x4e8b0b(0x2f1),'success'),document[_0x4e8b0b(0x351)]('award-item-form')['reset']();}catch(_0x591216){console['error']('Error\x20awarding\x20item:',_0x591216),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x591216[_0x4e8b0b(0x186)],_0x4e8b0b(0x18d));}}async function loadUserPointsHistory(_0x2b6eb3){const _0x3e24ef=a0_0x3aa75c;try{const _0x22adbf=collection(db,'pointsHistory'),_0x33b6ae=query(_0x22adbf,where('userId','==',_0x2b6eb3),orderBy('timestamp',_0x3e24ef(0x33b))),_0x14881d=await getDocs(_0x33b6ae);console['log']('Found\x20'+_0x14881d['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x2b6eb3),showNotification(_0x3e24ef(0x2ca)+_0x14881d['size']+'\x20points\x20history\x20entries','info');}catch(_0x5835c2){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x5835c2),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x49045f=a0_0x3aa75c;try{console['log'](_0x49045f(0x13b));const _0x5bffb0=collection(db,_0x49045f(0x27c)),_0x46eba0=await getDocs(_0x5bffb0);if(_0x46eba0['empty']){console[_0x49045f(0x181)]('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x200b6e=0x0,_0x5591e1=0x0;const _0x444288=writeBatch(db);let _0x5b0cc2=0x0;return console[_0x49045f(0x181)](_0x49045f(0x33a)+_0x46eba0['size']+'\x20users\x20to\x20check...'),_0x46eba0['forEach'](_0x3864a8=>{const _0x5c8100=_0x49045f,_0x3defe5=_0x3864a8[_0x5c8100(0x1cb)]();_0x3defe5['points']===undefined||_0x3defe5['points']===null?(_0x444288[_0x5c8100(0x33c)](_0x3864a8['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x200b6e++,_0x5b0cc2++,console['log'](_0x5c8100(0x390)+(_0x3defe5['displayName']||_0x3defe5[_0x5c8100(0x389)]||_0x3defe5['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x5591e1++,console['log']((_0x3defe5[_0x5c8100(0x182)]||_0x3defe5['username']||_0x3defe5['email']||_0x5c8100(0x2ee))+_0x5c8100(0x28d)+_0x3defe5['points'])),_0x5b0cc2>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x200b6e>0x0?(console['log'](_0x49045f(0x231)+_0x200b6e+'\x20users...'),await _0x444288['commit'](),console[_0x49045f(0x181)](_0x49045f(0x14f)+_0x200b6e+'\x20users')):console['log'](_0x49045f(0x214)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x46eba0['size']+_0x49045f(0x176)+_0x200b6e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x5591e1),showNotification(_0x49045f(0x307)+_0x200b6e+'\x20users.\x20'+_0x5591e1+'\x20users\x20already\x20had\x20points.','success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x46eba0['size'],'usersUpdated':_0x200b6e,'usersAlreadyHadPoints':_0x5591e1};}catch(_0xcdecb6){console['error']('Error\x20initializing\x20points\x20field:',_0xcdecb6),showNotification(_0x49045f(0x141)+_0xcdecb6['message'],_0x49045f(0x18d));throw _0xcdecb6;}}function addPointsMigrationButton(){const _0x2b15df=a0_0x3aa75c,_0x475938=document['getElementById'](_0x2b15df(0x36b));if(!_0x475938)return;if(document['getElementById']('migrate-points-btn'))return;const _0x2a70db=document['createElement']('div');_0x2a70db['className']='migration-section',_0x2a70db['style']['marginBottom']='20px',_0x2a70db[_0x2b15df(0x2f7)]['padding']=_0x2b15df(0x22a),_0x2a70db['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x2a70db[_0x2b15df(0x2f7)]['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x2a70db['style']['borderRadius']='5px',_0x2a70db['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x139483=_0x475938[_0x2b15df(0x147)]('.section-header');_0x139483&&_0x139483['insertAdjacentElement'](_0x2b15df(0x1e0),_0x2a70db),document['getElementById'](_0x2b15df(0x252))[_0x2b15df(0x271)]('click',async function(){const _0xa13a49=_0x2b15df;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this[_0xa13a49(0x2a5)]=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{_0x2a70db['style']['display']='none';},0xbb8);}catch(_0x1baa93){this['innerHTML']=_0xa13a49(0x237),this['disabled']=![];}}});}function setupManagePointsSection(){const _0x597230=a0_0x3aa75c;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0xaf79aa=document[_0x597230(0x351)](_0x597230(0x220));_0xaf79aa&&_0xaf79aa['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x5df818=document['getElementById'](_0x597230(0x267));_0x5df818&&_0x5df818['addEventListener'](_0x597230(0x277),handleModifyPoints);const _0x562640=document['getElementById']('award-item-form');_0x562640&&_0x562640['addEventListener'](_0x597230(0x277),handleAwardItem);const _0xee3079=document['getElementById']('points-overview-search');_0xee3079&&_0xee3079['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x218652=document['getElementById']('points-sort-order');_0x218652&&_0x218652['addEventListener']('change',sortPointsOverview);const _0x5b5e03=document['getElementById'](_0x597230(0x21a));_0x5b5e03&&_0x5b5e03[_0x597230(0x271)](_0x597230(0x247),loadPointsOverview);const _0x6c6ffd=document[_0x597230(0x351)](_0x597230(0x293));_0x6c6ffd&&_0x6c6ffd['addEventListener']('click',async()=>{const _0x4c65c0=_0x597230;confirm(_0x4c65c0(0x31e))&&(_0x6c6ffd[_0x4c65c0(0x2a5)]=!![],_0x6c6ffd[_0x4c65c0(0x1ae)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x1a4458(),_0x6c6ffd[_0x4c65c0(0x2a5)]=![],_0x6c6ffd['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x5be1ac=document['getElementById'](_0x597230(0x142));_0x5be1ac&&_0x5be1ac['addEventListener']('click',awardPointsToAllPilots);async function _0x1a4458(){const _0x56113a=_0x597230;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x35d454={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'≥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x41f6c8=0x0,_0x4e8594=0x0,_0xbf9c75=0x0,_0x430774=0x0,_0x59657d=0x0,_0x951710=0x0;const _0x29df20=new Set(),_0x93fd0e=collection(db,'pointsHistory'),_0x278fb8=query(_0x93fd0e,where(_0x56113a(0x2ea),'>=','Bulk\x20award:'),where('reason','<=','Bulk\x20award:')),_0x1f9200=await getDocs(_0x278fb8);_0x1f9200[_0x56113a(0x311)](_0x2a3f51=>{const _0x3aa5d5=_0x56113a,_0x54e9f4=_0x2a3f51['data'](),_0x219bc2=_0x54e9f4['reason']||'',_0x2a5d4a=_0x219bc2[_0x3aa5d5(0x2df)](/Match ID: ([a-zA-Z0-9]+)/);_0x2a5d4a&&_0x2a5d4a[0x1]&&_0x29df20[_0x3aa5d5(0x20f)](_0x2a5d4a[0x1]);}),console['log']('Found\x20'+_0x29df20['size']+_0x56113a(0x268));const [_0x64aaf4,_0x20f3db,_0x441ef0]=await Promise['all']([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,_0x56113a(0x1da))),getDocs(collection(db,'approvedMatchesD3'))]),_0x2bb28e=_0x64aaf4['size']+_0x20f3db['size']+_0x441ef0['size'];showNotification('Found\x20'+_0x2bb28e+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x2ac3cd=async(_0x1bb818,_0x208c5c)=>{const _0x474fb6=_0x56113a;let _0xc06dc1=writeBatch(db);const _0x455434=[];let _0x2a6ce2=0x0;for(const _0x5881d3 of _0x1bb818[_0x474fb6(0x337)]){try{if(_0x29df20['has'](_0x5881d3['id'])){if(_0x208c5c==='D1')_0x951710++;if(_0x208c5c==='D2')_0x951710++;if(_0x208c5c==='D3')_0x951710++;continue;}const _0x778f02=_0x5881d3['data'](),_0x29f12c=_0x778f02[_0x474fb6(0x19a)]||'Standard',_0x2c8fad=_0x35d454[_0x29f12c]||0xa;let _0x5ebfe1=_0x778f02['winnerId'];if(!_0x5ebfe1&&_0x778f02['winnerUsername']){const [_0x5c2712,_0x2e27a4,_0x56ca4a]=await Promise[_0x474fb6(0x256)]([getDocs(query(collection(db,_0x474fb6(0x24b)),where('username','==',_0x778f02['winnerUsername']))),getDocs(query(collection(db,_0x474fb6(0x317)),where('username','==',_0x778f02[_0x474fb6(0x206)]))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x778f02[_0x474fb6(0x206)])))]);if(!_0x5c2712[_0x474fb6(0x2ac)])_0x5ebfe1=_0x5c2712[_0x474fb6(0x337)][0x0]['id'];else{if(!_0x2e27a4['empty'])_0x5ebfe1=_0x2e27a4[_0x474fb6(0x337)][0x0]['id'];else{if(!_0x56ca4a[_0x474fb6(0x2ac)])_0x5ebfe1=_0x56ca4a['docs'][0x0]['id'];}}}let _0x420724=_0x778f02[_0x474fb6(0x18b)];if(!_0x420724&&_0x778f02[_0x474fb6(0x16e)]){const [_0x41c9e7,_0x35ab69,_0x3a76e4]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x778f02['loserUsername']))),getDocs(query(collection(db,_0x474fb6(0x317)),where(_0x474fb6(0x389),'==',_0x778f02[_0x474fb6(0x16e)]))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x778f02['loserUsername'])))]);if(!_0x41c9e7['empty'])_0x420724=_0x41c9e7['docs'][0x0]['id'];else{if(!_0x35ab69['empty'])_0x420724=_0x35ab69['docs'][0x0]['id'];else{if(!_0x3a76e4[_0x474fb6(0x2ac)])_0x420724=_0x3a76e4['docs'][0x0]['id'];}}}if(_0x5ebfe1&&_0x420724){const _0x5df6e4=doc(db,'userProfiles',_0x5ebfe1),_0x10e89b=doc(db,'userProfiles',_0x420724),[_0x2e96b8,_0x1e0cdb]=await Promise[_0x474fb6(0x256)]([getDoc(_0x5df6e4),getDoc(_0x10e89b)]);if(_0x2e96b8['exists']()){const _0x472d92=_0x2e96b8['data'](),_0x42c3d2=_0x472d92['points']||0x0;_0xc06dc1['update'](_0x5df6e4,{'points':_0x42c3d2+_0x2c8fad,'lastPointsModified':serverTimestamp()}),_0x455434[_0x474fb6(0x2f5)]({'userId':_0x5ebfe1,'userEmail':_0x472d92['email']||'unknown','displayName':_0x472d92['displayName']||_0x778f02['winnerUsername']||'Unknown\x20User','action':'add','amount':_0x2c8fad,'previousPoints':_0x42c3d2,'newPoints':_0x42c3d2+_0x2c8fad,'reason':_0x474fb6(0x1de)+_0x29f12c+_0x474fb6(0x2cd)+_0x5881d3['id']+'\x20-\x20'+_0x208c5c,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}if(_0x1e0cdb[_0x474fb6(0x27e)]()){const _0x1e49ee=_0x1e0cdb['data'](),_0x43409c=_0x1e49ee['points']||0x0;_0xc06dc1['update'](_0x10e89b,{'points':_0x43409c+_0x2c8fad,'lastPointsModified':serverTimestamp()}),_0x455434['push']({'userId':_0x420724,'userEmail':_0x1e49ee['email']||'unknown','displayName':_0x1e49ee[_0x474fb6(0x182)]||_0x778f02['loserUsername']||'Unknown\x20User','action':'add','amount':_0x2c8fad,'previousPoints':_0x43409c,'newPoints':_0x43409c+_0x2c8fad,'reason':'Bulk\x20award:\x20'+_0x29f12c+_0x474fb6(0x2d6)+_0x5881d3['id']+_0x474fb6(0x275)+_0x208c5c,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x430774+=_0x2c8fad*0x2,_0x2a6ce2+=0x2,_0x29df20['add'](_0x5881d3['id']);if(_0x2a6ce2>=0x190){await _0xc06dc1['commit']();for(const _0x30f052 of _0x455434){await addDoc(collection(db,'pointsHistory'),_0x30f052);}_0xc06dc1=writeBatch(db),_0x2a6ce2=0x0,_0x455434['length']=0x0;}}}catch(_0x31976d){console['error']('Error\x20processing\x20'+_0x208c5c+'\x20match\x20'+_0x5881d3['id']+':',_0x31976d),_0x59657d++;}}if(_0x2a6ce2>0x0){await _0xc06dc1['commit']();for(const _0x4884d4 of _0x455434){await addDoc(collection(db,'pointsHistory'),_0x4884d4);}}return{'processed':_0x208c5c==='D1'?_0x41f6c8:_0x208c5c==='D2'?_0x4e8594:_0xbf9c75};};await _0x2ac3cd(_0x64aaf4,'D1'),await _0x2ac3cd(_0x20f3db,'D2'),await _0x2ac3cd(_0x441ef0,'D3'),showNotification('Completed!\x20Processed\x20'+_0x41f6c8+'\x20D1\x20matches,\x20'+_0x4e8594+'\x20D2\x20matches,\x20'+_0xbf9c75+'\x20D3\x20matches.\x20'+('Awarded\x20'+_0x430774+'\x20points.\x20Skipped\x20'+_0x951710+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x59657d),'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x5145a6){console['error']('Error\x20in\x20bulk\x20award\x20points:',_0x5145a6),showNotification(_0x56113a(0x36f)+_0x5145a6['message'],'error');}}const _0x5ac33e=document['getElementById']('quick-edit-points-modal');if(_0x5ac33e){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x4004ec=_0x5ac33e['querySelector']('.close-btn');_0x4004ec?_0x4004ec[_0x597230(0x271)]('click',function(){const _0x59bd47=_0x597230;console['log'](_0x59bd47(0x152)),closeQuickEditModal();}):console['warn'](_0x597230(0x236));const _0x2014d8=document[_0x597230(0x351)]('cancel-quick-edit');_0x2014d8?_0x2014d8['addEventListener']('click',function(){const _0x198470=_0x597230;console[_0x198470(0x181)]('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x1d1416=document['getElementById'](_0x597230(0x295));_0x1d1416?_0x1d1416['addEventListener']('submit',function(_0xf45487){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0xf45487);}):console[_0x597230(0x18d)]('Quick\x20edit\x20form\x20not\x20found!'),_0x5ac33e['addEventListener']('click',function(_0x5d2f7a){const _0x92844f=_0x597230;_0x5d2f7a['target']===_0x5ac33e&&(console[_0x92844f(0x181)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console[_0x597230(0x18d)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x26bce9=a0_0x3aa75c;try{const _0x562703=parseInt(prompt(_0x26bce9(0x357),'10'));if(!_0x562703||isNaN(_0x562703)){showNotification('Invalid\x20points\x20amount',_0x26bce9(0x18d));return;}if(!confirm(_0x26bce9(0x2c9)+_0x562703+_0x26bce9(0x2fa)))return;showNotification(_0x26bce9(0x1cc),_0x26bce9(0x35a));const [_0x583323,_0x5a85e2,_0x2bc8c3]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'playersD3'))]);console['log']('Found\x20'+_0x583323['size']+'\x20D1\x20pilots,\x20'+_0x5a85e2['size']+'\x20D2\x20pilots,\x20'+_0x2bc8c3['size']+_0x26bce9(0x34f));const _0x405425=_0x583323[_0x26bce9(0x376)]+_0x5a85e2[_0x26bce9(0x376)]+_0x2bc8c3[_0x26bce9(0x376)],_0x21caa6=new Map();_0x583323[_0x26bce9(0x311)](_0x2997a7=>{const _0x3e076e=_0x2997a7['data']();_0x21caa6['set'](_0x2997a7['id'],{'username':_0x3e076e['username'],'ladder':'D1'});}),_0x5a85e2['forEach'](_0x328a62=>{const _0x2dae73=_0x26bce9,_0x56f0c8=_0x328a62['data']();_0x21caa6['set'](_0x328a62['id'],{'username':_0x56f0c8[_0x2dae73(0x389)],'ladder':'D2'});}),_0x2bc8c3[_0x26bce9(0x311)](_0x3db9b7=>{const _0x2b71d2=_0x26bce9,_0x504ea2=_0x3db9b7['data']();_0x21caa6[_0x2b71d2(0x2a4)](_0x3db9b7['id'],{'username':_0x504ea2['username'],'ladder':'D3'});}),console['log'](_0x26bce9(0x33a)+_0x21caa6[_0x26bce9(0x376)]+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x5164a5=0x0,_0xcacb2f=0x0,_0x200729=0x0;const _0xd062c0=Array['from'](_0x21caa6['keys']()),_0x1012cb=0x190;for(let _0x27a628=0x0;_0x27a628<_0xd062c0['length'];_0x27a628+=_0x1012cb){const _0x6039dd=writeBatch(db),_0x4c66f6=[],_0x2570ae=_0xd062c0[_0x26bce9(0x290)](_0x27a628,_0x27a628+_0x1012cb),_0x5bcd4c=await Promise[_0x26bce9(0x256)](_0x2570ae['map'](_0x32fe42=>getDoc(doc(db,'userProfiles',_0x32fe42))));for(let _0x2afa4c=0x0;_0x2afa4c<_0x2570ae['length'];_0x2afa4c++){try{const _0x166601=_0x2570ae[_0x2afa4c],_0x37e97c=_0x21caa6['get'](_0x166601),_0x7cf942=_0x5bcd4c[_0x2afa4c];if(_0x7cf942['exists']()){const _0x488115=_0x7cf942['data'](),_0x30cd73=_0x488115['points']||0x0,_0x33450c=_0x30cd73+_0x562703;_0x6039dd[_0x26bce9(0x33c)](doc(db,'userProfiles',_0x166601),{'points':_0x33450c,'lastPointsModified':serverTimestamp()}),_0x4c66f6['push']({'userId':_0x166601,'userEmail':_0x488115[_0x26bce9(0x1fe)]||_0x26bce9(0x14e),'displayName':_0x488115['displayName']||_0x37e97c['username']||_0x26bce9(0x209),'action':'add','amount':_0x562703,'previousPoints':_0x30cd73,'newPoints':_0x33450c,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x37e97c[_0x26bce9(0x35c)]+')','adminEmail':auth[_0x26bce9(0x2a9)][_0x26bce9(0x1fe)],'timestamp':serverTimestamp()}),_0xcacb2f+=_0x562703,_0x5164a5++;}else _0x200729++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x37e97c['username']+'\x20('+_0x166601+')');}catch(_0x2a0ede){_0x200729++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.[_0x26bce9(0x389)]+':',_0x2a0ede);}}await _0x6039dd['commit']();for(const _0x4bde1c of _0x4c66f6){await addDoc(collection(db,_0x26bce9(0x299)),_0x4bde1c);}showNotification(_0x26bce9(0x297)+_0x5164a5+'/'+_0x405425+'\x20pilots...','info');}showNotification('Complete!\x20Awarded\x20'+_0xcacb2f+'\x20points\x20to\x20'+_0x5164a5+'\x20pilots.\x20Errors:\x20'+_0x200729,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x3bcb8b){console['error']('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x3bcb8b),showNotification(_0x26bce9(0x2cf)+_0x3bcb8b['message'],'error');}}function setupManageRibbonsSection(){const _0x45bd66=a0_0x3aa75c;console[_0x45bd66(0x181)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x2d66de=document['getElementById'](_0x45bd66(0x330));_0x2d66de&&_0x2d66de['addEventListener'](_0x45bd66(0x2e1),debounce(searchRibbonUser,0x12c));const _0x4466b8=document['getElementById']('search-ribbon-user-btn');_0x4466b8&&_0x4466b8[_0x45bd66(0x271)]('click',searchRibbonUser);const _0x5eb296=document['getElementById']('add-ribbon-form');_0x5eb296&&_0x5eb296[_0x45bd66(0x271)]('submit',addRibbon),_0x2d66de&&_0x2d66de['addEventListener']('keypress',function(_0x1f936a){const _0x5c8d61=_0x45bd66;_0x1f936a['key']==='Enter'&&(_0x1f936a[_0x5c8d61(0x233)](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}function a0_0xa225(){const _0x1f1ebc=['manage-highlights','highlight-players-container','dashboard','cancel-article-btn','Player\x20\x22','eloHistoryD2','openResimulateModal\x20called!','activity-chart','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','Create\x20test\x20match\x20form\x20submitted','image','This\x20will\x20award\x20','User\x20has\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','.edit-highlight-btn','\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20','player-count','Error:\x20','./promotions.js','manage-ranks','Untitled','\x20ladder,\x20page\x20','string','No\x20email','\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20','Highlight\x20updated\x20successfully!','Failed\x20to\x20update\x20player:\x20','points','add-player-form','remove','ribbons-overview-table-body','checked','\x20collection...','match','\x20added\x20successfully\x20to\x20','input','resimulateMatch','find','Title\x20and\x20content\x20are\x20required','DB:','highlight-map-container','Error\x20adding\x20ribbon','No\x20ELO\x20history\x20found\x20for\x20player\x20','endDate','reason','input[name=\x22assign-ladder\x22]:checked','No\x20match\x20data\x20found\x20for\x20resimulation','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','Unknown','highlight-video-id','Trophy\x20not\x20found','Store\x20item\x20awarded\x20successfully','edit-wins','previousElo','cancel-assign-btn','push','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','style','Failed\x20to\x20load\x20article\x20data','opacity','\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?','article-modal-title','Trophy\x20Preview','load-articles-data','Silver','edit-highlight-map-input','lastUpdated','highlight-id','has','manage-articles','admin','highlight-match-date-container','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','Points\x20field\x20initialized\x20for\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','playerProfileUrl','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','edit-player-modal','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','destroy','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','delete-match-confirm-modal','forEach','settings','Gold','approvedAt','.player','.nav-item','playersD2','pending-count','.close-notification','removeAttribute','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20deleting\x20highlight:','resimulate-match-btn','This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?','edit-match-loser-demo','active','Failed\x20to\x20load\x20trophy\x20data','#players-table-body\x20tr','sort','createElement','position','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','Load\x20ribbons\x20data\x20clicked','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','Article\x20created\x20successfully','winnerScore','#e0e0e0','rankDistribution','mapPlayed','\x20Weekly\x20Activity','seconds','ribbon-user-search','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','medium-points','.no-results','loserName','approvedMatches','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','docs','matches-page-indicator','assign-trophy-rarity','Found\x20','desc','update','Error\x20loading\x20users:','content','userId','elo-history-search','pendingMatches','Failed\x20to\x20load\x20points\x20data:\x20','d3-prev-page','Error\x20loading\x20article\x20data:','highlight-modal-title','action','match-details-container','manage-levels-ribbons','mapVersion','Error\x20finding\x20match:','All\x20fields\x20are\x20required','img','Error\x20in\x20demotion:','ribbon-target-user','\x20D3\x20pilots','Match\x20not\x20found','getElementById','setHours','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Edit\x20Article','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','toISOString','get','info','current-ladder-display','ladder','Sunday','elo','selected-user-points','src','querySelectorAll','eloHistoryD3','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','create-test-match-modal','sendPromotionNotification','\x20in\x20','Error\x20loading\x20trophies:','W\x20/\x20','lastVisible','manage-points','pendingResimulateData','create-achievement-highlight-btn','Thursday','Error\x20in\x20bulk\x20award\x20process:\x20','points-overview-search','highlight-video-container','Page\x201','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','elo-history','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','size','Emerald','highlight-player-profile-container','edit-match-winner-comment','apply','Looking\x20for\x20user\x20role\x20information\x20for\x20','\x20to\x20','cancel-edit-btn','✅\x20Exists','textContent','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','Error\x20deleting\x20highlight:\x20','timestamp','achievement','Error\x20loading\x20match\x20data:','trophy-form','winnerName','title','Setting\x20up\x20points\x20action\x20buttons...','username','currentTarget','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20initializing\x20dashboard:','Map\x20Creator\x20is\x20required','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','notification\x20','Queued\x20','highlights','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','create-new-article-btn','body','load-users-data','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','Create\x20test\x20match\x20button\x20setup\x20complete','Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...','role','Error\x20loading\x20points\x20overview:','Demoting\x20player\x20to\x20','demote-player-btn','mapCreator','Error\x20initializing\x20points:\x20','award-all-pilots-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','Current\x20user:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','MAX_SAFE_INTEGER','querySelector','edit-match-loser-score','set-role-modal','videoId','D3\x20Players','bind','Firebase\x20connection\x20test\x20successful!','unknown','✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20','creatorImageUrl','Error\x20saving\x20highlight:','Modal\x20close\x20button\x20clicked','Failed\x20to\x20delete\x20player:\x20','Player\x20not\x20found\x20in\x20','edit-match-winner-demo','catch','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','Create\x20test\x20match\x20modal\x20not\x20found','highlight-achievement-player-container','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','match-count','type','firstVisible','Matches\x20Played','article-author','matchId','Failed\x20to\x20save\x20match:\x20','role-username','5757JxOFBh','create-test-match-form','contains','inactive-players','ref','Found\x20player\x20with\x20current\x20ELO:\x20','.close','data-ladder','set-elo-btn','rarity','keys','loserUsername','history-start-date','success','manage-matches','delete-match-summary','N/A','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','trophy-rarity\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','confirm-resimulate-btn','Could\x20not\x20find\x20player\x20documents','points-reason','stopPropagation','Failed\x20to\x20load\x20player\x20data','\x20with\x20email\x20','887160QUiXXl','-page-indicator','parentNode','create-test-match-btn','log','displayName','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','highlight-submitted-by','Article\x20deleted\x20successfully','message','quick-edit-display-name','appendChild','\x20ladder','highlight-form','loserId','Page\x20','error','toDate','Successfully\x20demoted\x20','data-id','achievementImageUrl','Role\x20\x22','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','Manage\x20Highlights\x20section\x20initialized','user-roles-section','playerRibbonsD2','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','change','visibility','subgameType','resimulate-match-id','value','UserProfile','highlight-achievement-type','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','playerId','positive-change','articles','Match\x20deleted\x20successfully','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22','toString','Collection\x20reference\x20created:','Player\x20Achievement','common','trophy-id','.admin-action','trophy-preview-container','Attempting\x20to\x20promote\x20','Defaulted\x20to\x20D1\x20ladder','innerHTML','\x20ladder!','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','95520EIKDwY','target','from','Error\x20promoting\x20player:','Failed\x20to\x20delete\x20article:\x20','highlight-match-info-container','history-type-filter','Load\x20articles\x20data\x20clicked','join','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','entries','dataset','achievementType','daysSinceMatch','trophyDefinitions','Found\x20user\x20in\x20','ELO\x20rating\x20for\x20','Trophy\x20created\x20successfully','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','Create\x20Article','highlight-video-preview-container','Quick\x20edit\x20clicked\x20for\x20user:','sources','demotion','22254pvcxFJ','promotion','data','Starting\x20points\x20award\x20process...','Wednesday','trophy-preview-img','points-asc','Setting\x20up\x20highlight\x20buttons','adminEmail','admin_modification','quick-edit-points-modal','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22','apply-matches-filters','article-form','highlights-table-body','\x20with\x20ELO\x20','approvedMatchesD2','search-result-item','Error','226FRZDQO','Bulk\x20award:\x20','Error\x20opening\x20edit\x20modal:','afterend','Load\x20inactive\x20players\x20data\x20clicked','Modal\x20element\x20found:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','trophy-modal','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','toLowerCase','eloHistory','edit-match-winner','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','approvedMatchesD3','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toLocaleString','activity','history-end-date','matchDate','playerRibbons','cells','edit-match-loser-suicides','Error\x20loading\x20players:','points-overview-table-body','Matches\x20action\x20buttons\x20setup\x20complete','148621lBDvJT','assign-trophy-image','\x27\x20has\x20permissions:','Error\x20loading\x20matches:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','128860gCqmLj','email','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','creator','Error\x20saving\x20trophy:','Created\x20','Please\x20enter\x20valid\x20username\x20and\x20ELO','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','winnerUsername','none','filter','Unknown\x20User','load-elo-history-data','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','Modal\x20cancel\x20button\x20clicked','highlight-winner-score','Error\x20promoting\x20player:\x20','add','user-search','article-modal','\x27</td>','highlight-achievement-details-container','No\x20users\x20needed\x20points\x20field\x20initialization','edit-losses','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','low-points','length','Adding\x20simple\x20test\x20match...','refresh-points-overview','Demotion','name-asc','edit-match-id','ribbons','rejected-count','points-user-search','display','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','promotedBy','Friday','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','flex','resimulate-modal','Unknown\x20Admin','15px','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','ribbon-target-ladder','Edit\x20Match:\x20','article-content','localeCompare','closest','Committing\x20batch\x20update\x20for\x20','quick-points-amount','preventDefault','matches-end-date','eloRating','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','rgba(255,\x20255,\x20255,\x200.1)','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','manage-trophies','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Switched\x20to\x20','matchLink','manage-ribbons','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','non-participant','replaceChild','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','lastMatch','370WzjtPk','click','System','Error\x20deleting\x20trophy\x20definition:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','players','edit-match-loser','\x20→\x20','demote-username','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','trophy-modal-title','.error-state','migrate-points-btn','block','loading','quick-edit-user-id','all','Please\x20enter\x20a\x20username','loserScore','\x20(+','Failed\x20to\x20load\x20match\x20data','Modal\x20element\x20not\x20found!','set-elo-form','roleName','className','required','Load\x20highlights\x20data\x20clicked','high-points','includes','Highlight\x20not\x20found','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','edit-match-map','\x20vs\x20','modify-points-form','\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded','Found\x20radio\x20with\x20value:','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','load-inactive-players-data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','toLocaleDateString','\x20not\x20found\x20in\x20any\x20ladder','roleAssignedBy','error-state','addEventListener','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','Setting\x20up\x20Manage\x20Matches\x20section','warn','\x20-\x20','cloneNode','submit','startDate','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','Error\x20assigning\x20trophy:','matches-prev-page','userProfiles','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','exists','bar','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','trophy-image-url','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','\x20not\x20found.','trim','Points\x20data\x20loaded\x20successfully','No\x20player\x20selected','highlight-type','classList','\x20from\x20','highly-inactive','\x22\x20data-ladder=\x22','Failed\x20to\x20delete\x20match:\x20','\x20already\x20has\x20points:\x20','.view-history-btn','Error\x20creating\x20rank\x20distribution\x20chart:','slice','Highlight','trophy-name','bulk-award-points-btn','assign-trophy-title','quick-edit-points-form','reduce','Processed\x20','Error\x20loading\x20highlights:','pointsHistory','achievementPlayer','.edit-ribbons-btn','#808080','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','18gGMEna','page','\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','\x22\x20already\x20has\x20this\x20trophy','\x20total\x20players\x20in\x20the\x20','set','disabled','description','playersD3','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','currentUser','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','Player\x20deleted\x20successfully','empty','\x20already\x20exists\x20in\x20','7vAeFOu','newPoints',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','promote-ladder','empty-state','Using\x20collection:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','1562561PYfGWz','roleAssignedAt','users-table-body','name','Username\x20','validation-results-container','then','setAttribute','Role\x20select\x20set\x20to:\x20'];a0_0xa225=function(){return _0x1f1ebc;};return a0_0xa225();}async function modifyUserPoints(_0x445587,_0x1f718a,_0x537d37,_0x3702c2=''){const _0x5ff397=a0_0x3aa75c,_0x327624=doc(db,_0x5ff397(0x27c),_0x445587),_0xfadd21=await getDoc(_0x327624);if(!_0xfadd21['exists']())throw new Error('User\x20not\x20found');const _0x40cb21=_0xfadd21['data'](),_0x3ab9fe=_0x40cb21['points']!==undefined?_0x40cb21[_0x5ff397(0x2d9)]:0x0;_0x40cb21['points']===undefined&&(console[_0x5ff397(0x181)]('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x40cb21[_0x5ff397(0x182)]||_0x40cb21[_0x5ff397(0x1fe)]||_0x5ff397(0x2ee))),await updateDoc(_0x327624,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x31a272=_0x3ab9fe;switch(_0x1f718a){case'add':_0x31a272=_0x3ab9fe+_0x537d37;break;case'subtract':_0x31a272=Math['max'](0x0,_0x3ab9fe-_0x537d37);break;case'set':_0x31a272=_0x537d37;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x327624,{'points':_0x31a272,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x5ff397(0x299)),{'userId':_0x445587,'userEmail':_0x40cb21['email']||'unknown','displayName':_0x40cb21['displayName']||_0x40cb21['username']||_0x5ff397(0x209),'action':_0x1f718a,'amount':_0x537d37,'previousPoints':_0x3ab9fe,'newPoints':_0x31a272,'reason':_0x3702c2,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x167157=a0_0x3aa75c,_0x5e73fe=document['getElementById'](_0x167157(0x1f4));if(!_0x5e73fe)return;_0x5e73fe[_0x167157(0x1ae)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x226555=collection(db,'userProfiles'),_0x5725b4=await getDocs(_0x226555);if(_0x5725b4[_0x167157(0x2ac)]){_0x5e73fe['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x26fda3=[];let _0x4e49ce=0x0;_0x5725b4[_0x167157(0x311)](_0x199a49=>{const _0x3faf10=_0x167157,_0x29cd9e=_0x199a49[_0x3faf10(0x1cb)](),_0x216a3d=_0x29cd9e[_0x3faf10(0x2d9)]!==undefined?_0x29cd9e['points']:0x0;_0x29cd9e[_0x3faf10(0x2d9)]===undefined&&_0x4e49ce++,_0x26fda3[_0x3faf10(0x2f5)]({'id':_0x199a49['id'],..._0x29cd9e,'points':_0x216a3d});}),_0x4e49ce>0x0&&(console[_0x167157(0x181)]('Found\x20'+_0x4e49ce+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x4e49ce+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x26fda3['sort']((_0x3a6d1d,_0x43aa8c)=>(_0x43aa8c[_0x167157(0x2d9)]||0x0)-(_0x3a6d1d['points']||0x0)),window['allUsersPoints']=_0x26fda3,renderPointsOverview(_0x26fda3);}catch(_0x301926){console[_0x167157(0x18d)](_0x167157(0x13d),_0x301926),_0x5e73fe['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x301926[_0x167157(0x186)]+'</td></tr>';}}async function loadRibbonsData(){const _0x3de564=a0_0x3aa75c,_0x2620d5=document['getElementById'](_0x3de564(0x2dc));if(!_0x2620d5)return;_0x2620d5['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x40da29,_0x417dfd,_0x39eece]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x3de564(0x196))),getDocs(collection(db,'playerRibbonsD3'))]);_0x2620d5['innerHTML']='';const _0x59432b=(_0x52d750,_0x4cc897)=>{_0x52d750['forEach'](_0x195c2a=>{const _0x1e2688=a0_0x150f,_0x46fa11=_0x195c2a['data'](),_0x2d2c8b=_0x46fa11[_0x1e2688(0x21e)]||{},_0x5046bd=Object[_0x1e2688(0x16d)](_0x2d2c8b)['length'],_0x1aa1de=document['createElement']('tr');_0x1aa1de['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x46fa11[_0x1e2688(0x389)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x4cc897['toLowerCase']()+'\x22>'+_0x4cc897+_0x1e2688(0x30f)+_0x5046bd+_0x1e2688(0x239)+(_0x46fa11[_0x1e2688(0x300)]?new Date(_0x46fa11['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+_0x1e2688(0x1b0)+_0x46fa11['username']+_0x1e2688(0x28b)+_0x4cc897+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2620d5['appendChild'](_0x1aa1de);});};_0x59432b(_0x40da29,'D1'),_0x59432b(_0x417dfd,'D2'),_0x59432b(_0x39eece,'D3'),document['querySelectorAll'](_0x3de564(0x29b))['forEach'](_0x495a64=>{_0x495a64['addEventListener']('click',function(){const _0x9a7e2f=this['dataset']['username'],_0x586b0a=this['dataset']['ladder'];editUserRibbons(_0x9a7e2f,_0x586b0a);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x1d99dd){console[_0x3de564(0x18d)]('Error\x20loading\x20ribbons:',_0x1d99dd),_0x2620d5['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x13b9e5=a0_0x3aa75c,_0x1b480b=document[_0x13b9e5(0x351)](_0x13b9e5(0x330))['value']['trim']();if(!_0x1b480b){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x1f7885,_0x273d1f,_0xb23630]=await Promise[_0x13b9e5(0x256)]([getDoc(doc(db,'playerRibbons',_0x1b480b)),getDoc(doc(db,'playerRibbonsD2',_0x1b480b)),getDoc(doc(db,'playerRibbonsD3',_0x1b480b))]);let _0x430e31=null,_0xf7ed66=null;if(_0x1f7885['exists']())_0x430e31='D1',_0xf7ed66=_0x1f7885[_0x13b9e5(0x1cb)]();else{if(_0x273d1f[_0x13b9e5(0x27e)]())_0x430e31='D2',_0xf7ed66=_0x273d1f['data']();else _0xb23630[_0x13b9e5(0x27e)]()&&(_0x430e31='D3',_0xf7ed66=_0xb23630[_0x13b9e5(0x1cb)]());}_0x430e31?(document['getElementById']('current-ribbon-user')[_0x13b9e5(0x37f)]=_0x1b480b,document['getElementById']('ribbon-target-user')[_0x13b9e5(0x19c)]=_0x1b480b,document['getElementById'](_0x13b9e5(0x22c))[_0x13b9e5(0x19c)]=_0x430e31,document['getElementById']('user-ribbon-management')['style']['display']='block',displayCurrentRibbons(_0xf7ed66['ribbons']||{}),showNotification(_0x13b9e5(0x33a)+_0x1b480b+'\x20in\x20'+_0x430e31+'\x20ladder','success')):showNotification('User\x20'+_0x1b480b+_0x13b9e5(0x26e),'error');}catch(_0x5b3b34){console[_0x13b9e5(0x18d)]('Error\x20searching\x20user:',_0x5b3b34),showNotification('Error\x20searching\x20for\x20user',_0x13b9e5(0x18d));}}function displayCurrentRibbons(_0x43bc57){const _0x2e50a9=a0_0x3aa75c,_0x542c8f=document['getElementById']('current-ribbons-list');if(!_0x542c8f)return;_0x542c8f['innerHTML']='';if(Object['keys'](_0x43bc57)['length']===0x0){_0x542c8f['innerHTML']=_0x2e50a9(0x2f6);return;}Object[_0x2e50a9(0x1bb)](_0x43bc57)[_0x2e50a9(0x311)](([_0x31e8a9,_0x3cd31b])=>{const _0x59d792=_0x2e50a9,_0x15608e=document[_0x59d792(0x324)]('div');_0x15608e[_0x59d792(0x25e)]='ribbon-item',_0x15608e['innerHTML']=_0x59d792(0x20b)+_0x31e8a9+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x3cd31b['level']||0x1)+_0x59d792(0x1fb)+(_0x3cd31b['awardedAt']?new Date(_0x3cd31b['awardedAt'][_0x59d792(0x32f)]*0x3e8)[_0x59d792(0x26d)]():_0x59d792(0x2ee))+_0x59d792(0x1d5)+_0x31e8a9+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x542c8f['appendChild'](_0x15608e);}),document[_0x2e50a9(0x361)]('.remove-ribbon-btn')['forEach'](_0x422edb=>{_0x422edb['addEventListener']('click',function(){const _0x435ae5=a0_0x150f,_0x345ce3=this[_0x435ae5(0x1bc)]['ribbon'];removeRibbon(_0x345ce3);});});}async function addRibbon(_0x37df0d){const _0x3f785a=a0_0x3aa75c;_0x37df0d['preventDefault']();const _0x4dea99=document['getElementById'](_0x3f785a(0x34e))['value'],_0x1a0ed7=document[_0x3f785a(0x351)]('ribbon-target-ladder')['value'],_0x1a7c78=document['getElementById']('ribbon-type-select')['value'],_0x2772f3=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x4dea99||!_0x1a0ed7||!_0x1a7c78||!_0x2772f3){showNotification('Please\x20fill\x20all\x20fields',_0x3f785a(0x18d));return;}try{const _0x1343d9='playerRibbons'+(_0x1a0ed7==='D1'?'':_0x1a0ed7),_0x42a1c4=doc(db,_0x1343d9,_0x4dea99),_0x4f3666=await getDoc(_0x42a1c4),_0x329f53=_0x4f3666['exists']()?_0x4f3666['data']()['ribbons']||{}:{};_0x329f53[_0x1a7c78]={'level':_0x2772f3,'awardedAt':serverTimestamp()},await setDoc(_0x42a1c4,{'username':_0x4dea99,'ladder':_0x1a0ed7,'ribbons':_0x329f53,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x1a7c78+'\x20Level\x20'+_0x2772f3+'\x20to\x20'+_0x4dea99,_0x3f785a(0x170)),displayCurrentRibbons(_0x329f53),document['getElementById']('ribbon-type-select')['value']='',document[_0x3f785a(0x351)]('ribbon-level')['value']='1';}catch(_0x425dd3){console['error']('Error\x20adding\x20ribbon:',_0x425dd3),showNotification(_0x3f785a(0x2e7),_0x3f785a(0x18d));}}async function removeRibbon(_0x519142){const _0x547cd3=a0_0x3aa75c,_0x46a3a8=document['getElementById'](_0x547cd3(0x34e))[_0x547cd3(0x19c)],_0x3708ea=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x519142+'\x20from\x20'+_0x46a3a8+'?'))return;try{const _0xf48b86=_0x547cd3(0x1f0)+(_0x3708ea==='D1'?'':_0x3708ea),_0x18477d=doc(db,_0xf48b86,_0x46a3a8),_0x3ee296=await getDoc(_0x18477d),_0x127f17=_0x3ee296[_0x547cd3(0x27e)]()?_0x3ee296['data']()[_0x547cd3(0x21e)]||{}:{};delete _0x127f17[_0x519142],await setDoc(_0x18477d,{'username':_0x46a3a8,'ladder':_0x3708ea,'ribbons':_0x127f17,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x519142+_0x547cd3(0x289)+_0x46a3a8,'success'),displayCurrentRibbons(_0x127f17);}catch(_0x451c81){console['error']('Error\x20removing\x20ribbon:',_0x451c81),showNotification('Error\x20removing\x20ribbon',_0x547cd3(0x18d));}}function editUserRibbons(_0x1e311f,_0x29fb9e){document['getElementById']('ribbon-user-search')['value']=_0x1e311f,searchRibbonUser();}