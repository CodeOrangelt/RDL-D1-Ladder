const a0_0x6edcb0=a0_0x1f98;(function(_0x30f8e6,_0x1e8c24){const _0x28ad02=a0_0x1f98,_0x56c432=_0x30f8e6();while(!![]){try{const _0x57d162=-parseInt(_0x28ad02(0x1ad))/0x1*(parseInt(_0x28ad02(0x1a4))/0x2)+parseInt(_0x28ad02(0x193))/0x3*(-parseInt(_0x28ad02(0x198))/0x4)+parseInt(_0x28ad02(0x196))/0x5*(-parseInt(_0x28ad02(0x1b8))/0x6)+parseInt(_0x28ad02(0x1b6))/0x7+-parseInt(_0x28ad02(0x1b1))/0x8*(-parseInt(_0x28ad02(0x18f))/0x9)+parseInt(_0x28ad02(0x1a9))/0xa+parseInt(_0x28ad02(0x192))/0xb;if(_0x57d162===_0x1e8c24)break;else _0x56c432['push'](_0x56c432['shift']());}catch(_0x261493){_0x56c432['push'](_0x56c432['shift']());}}}(a0_0x598a,0x99248));const a0_0x57ddb6=(function(){let _0x1508f0=!![];return function(_0x367ab7,_0x4173a9){const _0x470cc4=_0x1508f0?function(){const _0x555c29=a0_0x1f98;if(_0x4173a9){const _0x2f20a1=_0x4173a9[_0x555c29(0x18d)](_0x367ab7,arguments);return _0x4173a9=null,_0x2f20a1;}}:function(){};return _0x1508f0=![],_0x470cc4;};}()),a0_0x11e930=a0_0x57ddb6(this,function(){const _0x3c6f26=a0_0x1f98,_0x3193a5=function(){const _0xb67af7=a0_0x1f98;let _0x355299;try{_0x355299=Function('return\x20(function()\x20'+_0xb67af7(0x1b4)+');')();}catch(_0xd49c19){_0x355299=window;}return _0x355299;},_0x3215d4=_0x3193a5(),_0x194472=_0x3215d4['console']=_0x3215d4[_0x3c6f26(0x19a)]||{},_0x2b48d6=['log','warn','info','error','exception',_0x3c6f26(0x197),_0x3c6f26(0x1a7)];for(let _0x20884e=0x0;_0x20884e<_0x2b48d6['length'];_0x20884e++){const _0x1a71aa=a0_0x57ddb6['constructor'][_0x3c6f26(0x1b3)][_0x3c6f26(0x1a3)](a0_0x57ddb6),_0x166db6=_0x2b48d6[_0x20884e],_0x1bd888=_0x194472[_0x166db6]||_0x1a71aa;_0x1a71aa['__proto__']=a0_0x57ddb6['bind'](a0_0x57ddb6),_0x1a71aa['toString']=_0x1bd888[_0x3c6f26(0x19f)]['bind'](_0x1bd888),_0x194472[_0x166db6]=_0x1a71aa;}});a0_0x11e930();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a0_0x6edcb0(0x1a0),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0xcb33c3=![]){const _0x5ce3c8=a0_0x6edcb0,_0xedff59=Date[_0x5ce3c8(0x1ae)](),_0x7b0083=checkNotificationCache();if(_0x7b0083!==null&&!_0xcb33c3){updateNotificationDot(_0x7b0083);if(_0xedff59-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0xedff59;const _0x353849=auth['currentUser'];if(!_0x353849){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x12d1fd,_0x567429,_0x16b2f9]=await Promise[_0x5ce3c8(0x1a6)]([checkForPendingMatchesInCollection(_0x353849,_0x5ce3c8(0x1aa)),checkForPendingMatchesInCollection(_0x353849,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x353849,'pendingMatchesD3')]),_0x1a3c6c=_0x12d1fd||_0x567429||_0x16b2f9;updateNotificationDot(_0x1a3c6c),updateNotificationCache(_0x1a3c6c);}catch(_0x3ccf22){console[_0x5ce3c8(0x1a8)](_0x5ce3c8(0x190),_0x3ccf22);}}function a0_0x1f98(_0x3ac2c3,_0x2981f6){const _0x54d250=a0_0x598a();return a0_0x1f98=function(_0x11e930,_0x57ddb6){_0x11e930=_0x11e930-0x18c;let _0x439cfc=_0x54d250[_0x11e930];return _0x439cfc;},a0_0x1f98(_0x3ac2c3,_0x2981f6);}async function checkForPendingMatchesInCollection(_0x5e8b00,_0x948e8){const _0x135e93=a0_0x6edcb0,_0xb4bf02=_0x5e8b00[_0x135e93(0x1a1)],_0x3664af=_0x5e8b00['email'],_0x5adc4c=query(collection(db,_0x948e8),where(_0x135e93(0x1b7),'==',_0xb4bf02),where('approved','==',![])),_0xd21bd0=await getDocs(_0x5adc4c);if(!_0xd21bd0['empty'])return!![];if(_0x3664af){const _0x5d6414=query(collection(db,_0x948e8),where('winnerEmail','==',_0x3664af),where(_0x135e93(0x1ac),'==',![])),_0x2d9e9d=await getDocs(_0x5d6414);if(!_0x2d9e9d['empty'])return!![];}let _0x48d960=await getUsernameFromAllSources(_0x5e8b00);if(_0x48d960){const _0x54c5a3=query(collection(db,_0x948e8),where('winnerUsername','==',_0x48d960),where('approved','==',![])),_0x557b32=await getDocs(_0x54c5a3);if(!_0x557b32['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x9ddda3){const _0x31236b=a0_0x6edcb0,_0x2bd993=localStorage['getItem']('currentUsername');if(_0x2bd993)return _0x2bd993;try{const [_0x4bb273,_0x3d09eb,_0x112c0a]=await Promise['all']([getDocs(query(collection(db,_0x31236b(0x19d)),where(_0x31236b(0x194),'==',_0x9ddda3['uid']))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x9ddda3['uid']))),getDocs(query(collection(db,_0x31236b(0x1b0)),where('userId','==',_0x9ddda3[_0x31236b(0x1a1)])))]);if(!_0x4bb273['empty']){const _0x4443db=_0x4bb273['docs'][0x0]['data']()['username'];return localStorage[_0x31236b(0x19c)]('currentUsername',_0x4443db),_0x4443db;}if(!_0x3d09eb['empty']){const _0x410748=_0x3d09eb[_0x31236b(0x1a2)][0x0][_0x31236b(0x1b5)]()['username'];return localStorage['setItem']('currentUsername',_0x410748),_0x410748;}if(!_0x112c0a['empty']){const _0x3014e8=_0x112c0a['docs'][0x0]['data']()['username'];return localStorage['setItem'](_0x31236b(0x19e),_0x3014e8),_0x3014e8;}const _0x572bdc=await getDoc(doc(db,'users',_0x9ddda3['uid']));if(_0x572bdc['exists']()&&_0x572bdc['data']()[_0x31236b(0x18c)]){const _0x1d2b3b=_0x572bdc['data']()['username'];return localStorage[_0x31236b(0x19c)]('currentUsername',_0x1d2b3b),_0x1d2b3b;}}catch(_0x5dc54f){console['error']('Error\x20fetching\x20username:',_0x5dc54f);}if(_0x9ddda3['email'])return _0x9ddda3['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x403103){const _0x3c89e3=a0_0x6edcb0,_0x1c4b31={'status':_0x403103,'timestamp':Date[_0x3c89e3(0x1ae)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x1c4b31));}function checkNotificationCache(){const _0x47913f=a0_0x6edcb0,_0x4dcf2b=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x4dcf2b)return null;try{const {status:_0x2e801e,timestamp:_0x721e38}=JSON[_0x47913f(0x1a5)](_0x4dcf2b),_0xc43840=Date['now']();if(_0xc43840-_0x721e38<CACHE_EXPIRY)return _0x2e801e;}catch(_0x421854){}return null;}export function updateNotificationDot(_0x6d0584){const _0x3e4520=a0_0x6edcb0,_0xbb8552=new MutationObserver((_0x1e8c05,_0x13d590)=>{const _0xc5922c=document['getElementById']('report-match-notification');_0xc5922c&&(updateDotStyle(_0xc5922c,_0x6d0584),_0x13d590['disconnect']());});_0xbb8552['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x58802d=document['getElementById']('report-match-notification');_0x58802d&&(updateDotStyle(_0x58802d,_0x6d0584),_0xbb8552[_0x3e4520(0x19b)]()),setTimeout(()=>_0xbb8552['disconnect'](),0x1388);}function updateDotStyle(_0x58e71a,_0x5f396c){const _0x3eda2f=a0_0x6edcb0;_0x5f396c?(_0x58e71a['style']['display']='block',_0x58e71a[_0x3eda2f(0x199)]['backgroundColor']='#ff3b30',_0x58e71a['style']['width']='10px',_0x58e71a[_0x3eda2f(0x199)]['height']='10px',_0x58e71a['style']['position']=_0x3eda2f(0x195),_0x58e71a[_0x3eda2f(0x199)]['top']='-5px',_0x58e71a['style']['right']='-8px',_0x58e71a['style']['borderRadius']=_0x3eda2f(0x191),_0x58e71a['style']['border']=_0x3eda2f(0x1af),_0x58e71a[_0x3eda2f(0x199)]['zIndex']=_0x3eda2f(0x1ab)):_0x58e71a['style']['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener'](a0_0x6edcb0(0x18e),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x41730d=a0_0x1f98;localStorage[_0x41730d(0x1b2)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});function a0_0x598a(){const _0x18b6ba=['winnerId','666SNkDGH','username','apply','DOMContentLoaded','791487xiBWjL','Error\x20checking\x20pending\x20matches:','50%','4799817bsvHdm','369OCLjUA','userId','absolute','10680ZTWHss','table','23596xMhOUe','style','console','disconnect','setItem','players','currentUsername','toString','pendingMatchesCache','uid','docs','bind','174946HLYCPy','parse','all','trace','error','6490420bwoqYB','pendingMatches','999','approved','13NSrDye','now','2px\x20solid\x20white','playersD3','88LvHQAw','removeItem','prototype','{}.constructor(\x22return\x20this\x22)(\x20)','data','4720324LvPeSQ'];a0_0x598a=function(){return _0x18b6ba;};return a0_0x598a();}