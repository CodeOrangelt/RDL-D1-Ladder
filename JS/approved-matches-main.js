const a6Y=a6b;(function(a,b){const X=a6b,c=a();while(!![]){try{const d=-parseInt(X(0x171))/0x1+parseInt(X(0x1e1))/0x2+parseInt(X(0x1fa))/0x3+-parseInt(X(0x211))/0x4*(parseInt(X(0x1cc))/0x5)+parseInt(X(0x1a9))/0x6+-parseInt(X(0x1ea))/0x7*(parseInt(X(0x184))/0x8)+parseInt(X(0x1e4))/0x9;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a6a,0xb7a04));import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date(a6Y(0x150))[a6Y(0x14d)]()}];function isUsernameMuted(a,b){const Z=a6Y;if(!a)return![];const c=mutedUsers[Z(0x19e)](e=>e[Z(0x20e)]===a);if(!c)return![];if(!b)return!![];const d=b instanceof Date?b['getTime']():b[Z(0x20f)]?b['seconds']*0x3e8:Date['now']();return d>=c[Z(0x181)];}function filterComment(a,b,c){if(!a)return'-';if(isUsernameMuted(b,c))return'Muted.';return a;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(a,b,c){const a0=a6Y,d='u:'+(c['filterUsername']||'');return a0(0x176)+a+'_p'+b+'_'+d;}function getCachedPage(a){const a1=a6Y,b=sessionStorage[a1(0x207)](a);if(b)try{return JSON['parse'](b);}catch(c){return console['error'](a1(0x17d),c),sessionStorage['removeItem'](a),null;}return null;}function cachePage(a,b){const a2=a6Y;try{sessionStorage['setItem'](a,JSON[a2(0x15f)](b));}catch(c){console[a2(0x129)]('Failed\x20to\x20cache\x20data:',c);}}function getEloColor(a){const a3=a6Y,b=Number(a);if(b>=0x7d0)return a3(0x218);else{if(b>=0x708)return a3(0x147);else{if(b>=0x640)return a3(0x17f);else{if(b>=0x578)return'#CD7F32';else return a3(0x140);}}}}function formatDate(a,b=![]){const a4=a6Y;if(!a||!a[a4(0x20f)])return a4(0x16b);const c=new Date(a[a4(0x20f)]*0x3e8);return b?c['toLocaleString']():c['toLocaleDateString']();}function truncateComment(a,b=0x1e){const a5=a6Y;if(!a)return'-';if(a[a5(0x1bd)]<=b)return a;return a[a5(0x1bc)](0x0,b)+'...';}function formatCommentDate(a){const a6=a6Y;if(!a||!a['seconds'])return'';const b=new Date(a[a6(0x20f)]*0x3e8),c=new Date(),d=Math['abs'](c-b),e=Math['floor'](d/(0x3e8*0x3c*0x3c*0x18));if(e===0x0)return'Today';else{if(e===0x1)return a6(0x13b);else return e<0x7?e+a6(0x166):b['toLocaleDateString']();}}function setLoadingIndicator(a){const a7=a6Y,b=document['getElementById'](a7(0x18a));if(b)b[a7(0x20b)][a7(0x1c3)]=a?'block':a7(0x1ae);}export function updatePreviewLadderModeUI(){const a8=a6Y,a=document[a8(0x1b2)](a8(0x148)),b=document[a8(0x1b2)](a8(0x1f1)),c=document[a8(0x1b2)]('preview-d2-button'),d=document[a8(0x1b2)](a8(0x134));if(a)a[a8(0x130)]=previewState[a8(0x16c)];if(b)b[a8(0x1d1)][a8(0x1f5)](a8(0x1fc),previewState['currentMode']==='D1');if(c)c[a8(0x1d1)]['toggle']('active',previewState[a8(0x16c)]==='D2');if(d)d[a8(0x1d1)][a8(0x1f5)]('active',previewState[a8(0x16c)]==='D3');}function updatePreviewPaginationControls(a){const a9=a6Y,b=document['getElementById']('previewPrevPage'),c=document[a9(0x1b2)](a9(0x12b)),d=document['getElementById']('previewPageInfo');if(!b||!c||!d)return;d[a9(0x130)]='Page\x20'+previewState[a9(0x15c)],b[a9(0x1f0)]=previewState[a9(0x15c)]<=0x1,c[a9(0x1f0)]=!a;}function setPreviewLoadingState(a){const aa=a6Y;previewState[aa(0x123)]=a,setLoadingIndicator(a);const b=document[aa(0x1b2)]('recent-matches-preview'),c=b?b[aa(0x1db)](aa(0x1e7)):null,d=document[aa(0x1b2)](aa(0x1b9)),e=document[aa(0x1b2)](aa(0x12b)),f=document[aa(0x1b2)]('preview-d1-button'),g=document[aa(0x1b2)](aa(0x174)),h=document[aa(0x1b2)]('applyFilterBtn'),i=document[aa(0x1b2)]('clearFilterBtn');if(c&&!a)c['style']['display']=aa(0x1ae);else c&&a&&(c['style']['display']='block');!a&&b&&!b['querySelector'](aa(0x1c6))&&!b['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(b['innerHTML']=aa(0x1c7)+(previewState['filterUsername']?'\x20matching\x20filters':'')+'.</div>');if(d)d[aa(0x1f0)]=a||previewState[aa(0x15c)]<=0x1;if(e)e['disabled']=a;if(f)f['disabled']=a;if(g)g['disabled']=a;if(h)h[aa(0x1f0)]=a;if(i)i['disabled']=a;}function applyClientFilters(a){const ab=a6Y;if(!previewState[ab(0x1fb)])return a;const b=previewState[ab(0x1fb)][ab(0x208)]();return a[ab(0x1b4)](c=>{const ac=ab,d=(c[ac(0x178)]||'')[ac(0x208)](),e=(c['loserUsername']||'')['toLowerCase']();return d[ac(0x216)](b)||e[ac(0x216)](b);});}function applyEnhancedClientFilters(a){const ad=a6Y;if(!hasEnhancedFilters())return a;return a[ad(0x1b4)](b=>{const ae=ad;if(previewState[ae(0x19b)][ae(0x188)]){const c=previewState['enhancedFilters']['pilots'][ae(0x208)](),d=(b['winnerUsername']||'')['toLowerCase'](),e=(b['loserUsername']||'')[ae(0x208)]();if(!d[ae(0x216)](c)&&!e['includes'](c))return![];}if(previewState[ae(0x19b)][ae(0x212)]){const f=previewState[ae(0x19b)][ae(0x212)][ae(0x208)](),g=(b['mapPlayed']||'')[ae(0x208)]();if(!g[ae(0x216)](f))return![];}if(previewState[ae(0x19b)]['subgames'][ae(0x1bd)]>0x0){const h=b['subgameType']||ae(0x156);if(!previewState['enhancedFilters']['subgames'][ae(0x216)](h))return![];}return!![];});}function hasEnhancedFilters(){const af=a6Y;return previewState['enhancedFilters'][af(0x188)]||previewState['enhancedFilters'][af(0x212)]||previewState['enhancedFilters'][af(0x168)]['length']>0x0;}function a6b(a,b){const c=a6a();return a6b=function(d,e){d=d-0x11d;let f=c[d];if(a6b['hjPOza']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a6b['nLmSHC']=g,a=arguments,a6b['hjPOza']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a6b['nLmSHC'](f),a[i]=f):f=j,f;},a6b(a,b);}function clearEnhancedFilters(){const ag=a6Y;previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document[ag(0x1b2)](ag(0x1f6))['value']='',document['getElementById'](ag(0x162))[ag(0x1b7)]='';const a=document[ag(0x1b2)](ag(0x1b6));for(let b of a['options']){b['selected']=![];}}function jumpToPage(a){const ah=a6Y,b=document['getElementById'](ah(0x1a1)),c=previewState[ah(0x15c)];let d=c;switch(a){case'start':d=0x1;break;case'end':d=Math['max'](c+0xa,previewState['totalPages']||c+0xa);break;case'+1':d=c+0x1;break;case'+5':d=c+0x5;break;case'+10':d=c+0xa;break;case'-1':d=Math[ah(0x13f)](0x1,c-0x1);break;case'-5':d=Math['max'](0x1,c-0x5);break;case'-10':d=Math[ah(0x13f)](0x1,c-0xa);break;case ah(0x200):const e=parseInt(b[ah(0x1b7)]);e&&e>0x0&&(d=e,b['value']='');break;}d!==c&&d>0x0&&(previewState['currentPage']=d,loadRecentMatchesPreview(ah(0x196)));}export async function loadRecentMatchesPreview(a='current'){const ai=a6Y,b=document[ai(0x1b2)]('recent-matches-preview'),c=document['getElementById'](ai(0x20a));if(previewState['isLoading']||!b||!c)return;a===ai(0x146)&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)[ai(0x1e5)](k=>{const aj=ai;k[aj(0x216)]('previewCache_'+previewState['currentMode'])&&sessionStorage['removeItem'](k);}));let d=previewState['currentPage'];if(a===ai(0x1bb))d++;else{if(a===ai(0x1f7))d--;else a===ai(0x146)&&(d=0x1,previewState[ai(0x197)]=null,previewState[ai(0x1df)]=null);}if(d<0x1)d=0x1;const e=previewState['currentPage'];previewState['currentPage']=d,updatePreviewPaginationControls(!![]);const f={'filterUsername':previewState['filterUsername']},g=getCacheKey(previewState[ai(0x16c)],d,f),h=a!==ai(0x146)?getCachedPage(g):null;if(h){console[ai(0x179)]('Rendering\x20page\x20'+d+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(h['docsData']),updatePreviewPaginationControls(h[ai(0x18d)]),setPreviewLoadingState(![]);return;}console[ai(0x179)]('Cache\x20miss\x20for\x20page\x20'+d+ai(0x157)),setPreviewLoadingState(!![]),b[ai(0x12d)]='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const i=previewState[ai(0x16c)]==='D1'?ai(0x161):previewState[ai(0x16c)]==='D2'?'approvedMatchesD2':'approvedMatchesD3',j=previewState[ai(0x16c)]==='D1'?'createdAt':'approvedAt';try{const k=collection(window['db'],i);let l=[orderBy(j,ai(0x143))];if(d===0x1)console['log'](ai(0x180)),l['push'](limit(previewState[ai(0x1f8)]));else{if(a===ai(0x1bb)&&previewState[ai(0x1df)])console['log']('Loading\x20next\x20page\x20using\x20cursor'),l['push'](startAfter(previewState['lastVisible'])),l[ai(0x126)](limit(previewState['matchesPerPage']));else{console['log'](ai(0x136));const v=d*previewState[ai(0x1f8)];l[ai(0x126)](limit(v));}}const m=query(k,...l),n=await getDocs(m);let o=n[ai(0x17c)];if(d>0x1&&a!=='next'){const w=(d-0x1)*previewState[ai(0x1f8)];o=o['slice'](w,w+previewState['matchesPerPage']);}if(o['length']===0x0){console['log']('No\x20results\x20found\x20for\x20this\x20page');a===ai(0x1bb)&&(previewState[ai(0x15c)]=e,updatePreviewPaginationControls(![]));b['innerHTML']=ai(0x187)+(previewState[ai(0x1fb)]?ai(0x1dc):'')+ai(0x1ed),setPreviewLoadingState(![]);return;}previewState[ai(0x197)]=o[0x0],previewState['lastVisible']=o[o['length']-0x1];const r=o['map'](x=>({'id':x['id'],...x[ai(0x169)]()}));let s=![];if(o['length']===previewState['matchesPerPage']){const x=query(k,orderBy(j,ai(0x143)),startAfter(previewState[ai(0x1df)]),limit(0x1)),y=await getDocs(x);s=!y[ai(0x164)];}const t=applyClientFilters(r),u={'docsData':r,'hasNextPage':s};cachePage(getCacheKey(previewState[ai(0x16c)],previewState[ai(0x15c)],f),u);if(d>0x1&&a!=='next')for(let z=0x1;z<d;z++){const A=(z-0x1)*previewState['matchesPerPage'],B=A+previewState[ai(0x1f8)],C=n[ai(0x17c)]['slice'](A,B);if(C['length']>0x0){const D=C[ai(0x16a)](F=>({'id':F['id'],...F[ai(0x169)]()})),E=!![];cachePage(getCacheKey(previewState['currentMode'],z,f),{'docsData':D,'hasNextPage':E}),console[ai(0x179)]('Cached\x20intermediary\x20page\x20'+z);}}t[ai(0x1bd)]===0x0&&previewState['filterUsername']?b[ai(0x12d)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState[ai(0x1fb)]+'\x22</div>':renderMatchCards(t),updatePreviewPaginationControls(s);}catch(F){console['error']('Error\x20fetching\x20'+previewState[ai(0x16c)]+'\x20matches:',F),b[ai(0x12d)]=ai(0x12a)+F['message']+'</div>',updatePreviewPaginationControls(![]),previewState[ai(0x15c)]=e;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(a){const ak=a6Y,b=document['getElementById'](ak(0x185)),c=document['getElementById']('match-card-template');if(!b||!c)return;!b['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(b['innerHTML']='');if(!a||a['length']===0x0){if(!b[ak(0x1db)]('.matches-loading[style*=\x22color:\x20red\x22]')){const h=hasEnhancedFilters()?ak(0x1dc):previewState['filterUsername']?ak(0x1dc):'';b['innerHTML']=ak(0x1c7)+h+ak(0x1ed);}return;}const d=applyEnhancedClientFilters(a);if(d['length']===0x0){b[ak(0x12d)]=ak(0x120);return;}const e=d[ak(0x16a)](i=>getAllCommentsForMatch(i['id']));let f=[];try{f=await Promise[ak(0x1ce)](e);}catch(i){console['error']('Error\x20fetching\x20comments\x20batch:',i),f=d[ak(0x16a)](()=>[]);}const g={};f['forEach']((j,k)=>{g[d[k]['id']]=j||[];}),d[ak(0x1e5)](j=>{const al=ak,k=c['content']['cloneNode'](!![]),l=k[al(0x1db)]('.match-display-wrapper'),m=k['querySelector']('.match-card'),n=getEloRankClass(j['winnerOldElo']);m[al(0x1d1)][al(0x20c)](al(0x1f3)+n),m[al(0x1db)](al(0x16d))['textContent']=j[al(0x14e)]||al(0x1bf),m['querySelector'](al(0x1be))[al(0x130)]=formatDate(j['approvedAt']||j['createdAt']);const o=m['querySelector'](al(0x1cd));o[al(0x130)]=j['winnerUsername']||'Unknown',o[al(0x20b)]['color']=getEloColor(j['winnerOldElo']),m['querySelector']('.player.winner\x20.player-score')[al(0x130)]=j['winnerScore']??0x0;const p=m['querySelector']('.player.winner\x20.player-suicides'),q=j['winnerSuicides']||0x0;p[al(0x130)]='S:\x20'+q;const r=m['querySelector'](al(0x1cf));r['textContent']=j['loserUsername']||al(0x1a3),r[al(0x20b)]['color']=getEloColor(j['loserOldElo']),m[al(0x1db)](al(0x1ef))['textContent']=j['loserScore']??0x0;const s=m[al(0x1db)](al(0x1aa)),t=j[al(0x15d)]||0x0;s['textContent']='S:\x20'+t;const u=m[al(0x1db)](al(0x16f));if(u){if(j[al(0x14c)]&&j[al(0x14c)]['trim']()!==''){u[al(0x130)]=j['subgameType'],u[al(0x20b)][al(0x1c3)]='block';const E=getSubgameClass(j[al(0x14c)]);E&&u[al(0x1d1)]['add'](E);}else u['textContent']='Standard\x20Match',u[al(0x20b)][al(0x1c3)]=al(0x167),u['style'][al(0x151)]=al(0x1d4);}const v=m['querySelector'](al(0x202)),w=m[al(0x1db)](al(0x1de)),x=j[al(0x17b)]||'',y=j[al(0x125)]||'',z=j[al(0x195)]||j[al(0x15a)],A=filterComment(x,j['winnerUsername'],z),B=filterComment(y,j['loserUsername'],z);v[al(0x130)]='\x22'+truncateComment(x)+'\x22',w[al(0x130)]='\x22'+truncateComment(y)+'\x22';x&&!isUsernameMuted(j['winnerUsername'],z)?v['onclick']=()=>showPreviewCommentPopup(A,j['winnerUsername']||al(0x13e),getEloColor(j[al(0x121)])):(v[al(0x130)]=A==='Muted.'?al(0x170):'-',v[al(0x20b)]['cursor']=al(0x1e0),v[al(0x12c)]=null);y&&!isUsernameMuted(j[al(0x145)])?w[al(0x12c)]=()=>showPreviewCommentPopup(B,j[al(0x145)]||al(0x1fe),getEloColor(j[al(0x1ee)])):(w[al(0x130)]=B==='Muted.'?'Muted.':'-',w[al(0x20b)]['cursor']='default',w[al(0x12c)]=null);const C=l?.[al(0x1db)](al(0x1ba));if(!C)console[al(0x127)](al(0x194));else{const F=C[al(0x1db)](al(0x1c0)),G=F?.[al(0x1db)](al(0x153)),H=C[al(0x1db)]('.add-comment-btn');if(F){while(F[al(0x1a2)]&&F[al(0x1a2)]!==G){F['removeChild'](F[al(0x1a2)]);}H&&H['addEventListener'](al(0x18c),()=>{showAddCommentPopup(j['id']);});const I=g[j['id']]||[];if(I[al(0x1bd)]>0x0){if(G)G['style']['display']='none';const J=(K,L)=>{const am=al,M=K[am(0x142)]('\x20');if(M['length']<=L)return K;return M['slice'](0x0,L)[am(0x1f9)]('\x20')+'...';};I['forEach'](K=>{const an=al,L=document[an(0x13c)](an(0x1b8));if(K[an(0x144)]===an(0x1e9)){L['className']='demo-link',L['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+K['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+K['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(K[an(0x1b1)]||'No\x20description\x20provided')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const M=window['auth']['currentUser'],N=M&&K[an(0x159)]===M[an(0x214)];if(N){const O=document[an(0x13c)](an(0x152));O[an(0x204)]='delete-comment-btn',O[an(0x12d)]='×',O[an(0x191)]('aria-label','Delete\x20demo'),O['addEventListener']('click',P=>{const ao=an;P[ao(0x14f)](),P['stopPropagation'](),deleteComment(K['id'],L);}),L['appendChild'](O);}}else{L[an(0x204)]='comment-item';const P=isUsernameMuted(K[an(0x20e)],K['timestamp']),Q=P?an(0x170):J(K[an(0x12e)]||'',0xf),R=K['username']||'Anonymous',S=window[an(0x17a)][an(0x172)],T=S&&K['userId']===S['uid'];let U='';T&&(U=an(0x139));L[an(0x12d)]=U+'<strong>'+R+':</strong>\x20\x22'+Q+'\x22';if(T){const V=L['querySelector']('.delete-comment-btn');V&&V[an(0x1cb)]('click',W=>{const ap=an;W[ap(0x1e2)](),deleteComment(K['id'],L);});}!P?L['addEventListener'](an(0x18c),()=>{showFullCommentLightbox(K);}):L['style'][an(0x20d)]='default';}F[an(0x198)](L,F[an(0x1a2)]);});}else{if(G)G[al(0x20b)][al(0x1c3)]='block';}}}const D=m[al(0x1db)](al(0x1a5));if(D){const K=m[al(0x1db)]('.winner-demo-link'),L=m['querySelector']('.loser-demo-link'),M=j[al(0x1a0)]||null,N=j['loserDemoLink']||j['demoLink']||null;console['log'](al(0x217)+j['id']+'\x20demo\x20links:',{'winner':M,'loser':N}),K&&(M?(K[al(0x177)]=M,K[al(0x20b)]['display']='flex',K['title']=j['winnerUsername']+'\x27s\x20Demo'):K[al(0x20b)]['display']='none'),L&&(N?(L[al(0x177)]=N,L['style'][al(0x1c3)]=al(0x189),L[al(0x1fd)]=j['loserUsername']+al(0x14a)):L['style'][al(0x1c3)]='none'),M&&K||N&&L?D[al(0x20b)]['display']='flex':D[al(0x20b)]['display']=al(0x1ae);}b['appendChild'](k);});}function getSubgameClass(a){const aq=a6Y,b={'Fusion\x20Match':'fusion-match','≥6\x20Missiles':aq(0x16e),'≥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':aq(0x213),'Rematch':'rematch','Disorientation':'disorientation','Ratting':aq(0x1da),'Altered\x20Powerups':'altered-powerups','Mega\x20Match':'mega-match','Dogfight':aq(0x19a),'Gauss\x20and\x20Mercs':'gauss-and-mercs'};return b[a]||'';}async function deleteComment(a,b){const ar=a6Y,c=window['auth'][ar(0x172)];if(!c){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const d=doc(window['db'],ar(0x154),a),e=await getDoc(d);if(!e[ar(0x215)]()){alert(ar(0x128));return;}const f=e[ar(0x169)]();if(f[ar(0x159)]!==c[ar(0x214)]){alert(ar(0x206));return;}await deleteDoc(d);if(b&&b[ar(0x141)]){b[ar(0x141)]['removeChild'](b);const g=b[ar(0x1d5)]('.comments-container');if(g&&!g[ar(0x1db)](ar(0x1dd))){const h=g['querySelector'](ar(0x153));if(h)h[ar(0x20b)][ar(0x1c3)]=ar(0x167);}}console[ar(0x179)](ar(0x1e3));}catch(i){console[ar(0x129)]('Error\x20deleting\x20comment:',i),alert('Failed\x20to\x20delete\x20comment:\x20'+i['message']);}}async function getAllCommentsForMatch(a){const as=a6Y;if(!a)return[];try{const b=collection(window['db'],'matchComments'),c=query(b,where('matchId','==',a),orderBy('timestamp',as(0x143))),d=await getDocs(c);if(d['empty'])return[];return d[as(0x17c)]['map'](e=>({'id':e['id'],...e['data']()}));}catch(e){return console[as(0x129)]('Error\x20fetching\x20comments:',e),[];}}async function submitComment(a){const at=a6Y;a[at(0x14f)]();if(!window[at(0x17a)]||!window['db']){console[at(0x129)]('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready');return;}const b=window['auth']['currentUser'];if(!b){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const c=document[at(0x1b2)]('commentMatchId')?.['value'],d=document[at(0x1b2)](at(0x122))?.['value']?.['trim']();if(!c||!d){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const e=d['split'](/\s+/)[at(0x1b4)](g=>g['length']>0x0)['length'];if(e>0xf){alert(at(0x1ec));return;}const f=document[at(0x1db)](at(0x1c1));f&&(f[at(0x1f0)]=!![],f[at(0x130)]=at(0x1b5));try{let g=at(0x201);try{const j=doc(window['db'],'userProfiles',b['uid']),k=await getDoc(j);if(k['exists']()){const l=k['data']();l['username']&&(g=l[at(0x20e)]);}g==='Anonymous'&&b[at(0x183)]&&(g=b[at(0x183)]);}catch(m){console[at(0x127)](at(0x1f4),m),b[at(0x183)]&&(g=b['displayName']);}const h={'matchId':c,'userId':b['uid'],'username':g,'text':d,'timestamp':serverTimestamp()};console[at(0x179)](at(0x124),g);const i=collection(window['db'],'matchComments');await addDoc(i,h),console['log']('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(n){console['error']('Error\x20submitting\x20comment:',n),alert('Failed\x20to\x20add\x20comment:\x20'+n['message']),f&&(f[at(0x1f0)]=![],f['textContent']='Submit');}}function closeAddCommentPopup(){const au=a6Y,a=document['getElementById'](au(0x1d2)),b=document[au(0x1b2)](au(0x11d));if(a)a['style']['display']='none';if(b)b[au(0x20b)][au(0x1c3)]=au(0x1ae);}function showAddCommentPopup(a){const av=a6Y,b=window['auth'][av(0x172)];if(!b){alert(av(0x1ad));return;}let c=document[av(0x1b2)]('commentAddPopup'),d=document[av(0x1b2)](av(0x11d));!c&&(c=document[av(0x13c)](av(0x1b8)),c['id']=av(0x1d2),c[av(0x204)]=av(0x1d9),document['body']['appendChild'](c));!d&&(d=document[av(0x13c)]('div'),d['id']='commentAddOverlay',d[av(0x204)]='comment-overlay',document['body']['appendChild'](d));c['innerHTML']=av(0x160)+a+av(0x18f),c['style']['display']=av(0x167),d[av(0x20b)]['display']='block',document[av(0x1b2)]('closeAddCommentPopup')['addEventListener'](av(0x18c),closeAddCommentPopup),d['addEventListener']('click',closeAddCommentPopup);const e=c[av(0x19f)](av(0x186));e[av(0x1e5)](f=>{f['addEventListener']('click',function(){const aw=a6b;e['forEach'](h=>h['classList'][aw(0x13a)]('active')),document['querySelectorAll'](aw(0x1ac))[aw(0x1e5)](h=>h[aw(0x20b)]['display']='none'),this[aw(0x1d1)]['add']('active');const g=this['dataset'][aw(0x1a8)];document[aw(0x1b2)](g+aw(0x1e6))[aw(0x20b)]['display']='block',g==='demo'?(document[aw(0x1b2)]('demoLink')['setAttribute']('required',''),document[aw(0x1b2)]('commentText')[aw(0x137)]('required')):(document[aw(0x1b2)]('demoLink')['removeAttribute']('required'),document[aw(0x1b2)](aw(0x122))['setAttribute'](aw(0x210),''));});}),document[av(0x1b2)](av(0x122))['setAttribute'](av(0x210),''),document[av(0x1b2)](av(0x1ca))['removeAttribute']('required'),setupWordCounter(av(0x122),'wordCount',0xf),setupWordCounter('demoDescription',av(0x1f2),0x14),document[av(0x1b2)](av(0x190))['addEventListener'](av(0x18e),submitCommentOrDemo);}function a6a(){const aP=['zMLSDgvYlxbPBg90CW','ChjLDG','Bwf0y2HLC1bLCLbHz2u','AM9PBG','mJKYndGXn0vpzfnpwG','zMLSDgvYvxnLCM5HBwu','ywn0AxzL','DgL0Bgu','tg9Zzxi','ww91ig5LzwqGDg8GyMuGC2LNBMvKigLUihrVihjLCg9YDcbJB21Tzw50CW','Aw5WDxq','qw5VBNLTB3vZ','lMnVBw1LBNqUD2LUBMvYlwnVBw1LBNq','ww91ig11C3qGyMuGC2LNBMvKigLUihrVignVBNrPBNvL','y2XHC3noyw1L','zgf0yxnLDa','ww91ignHBIbVBMX5igrLBgv0zsb5B3vYig93BIbJB21Tzw50CW','z2v0sxrLBq','Dg9mB3DLCKnHC2u','C3vIBwL0q29TBwvUDa','Bwf0y2GTy2fYzc10zw1WBgf0zq','C3r5Bgu','ywrK','y3vYC29Y','DxnLCM5HBwu','C2vJB25KCW','CMvXDwLYzwq','mJbbDfzMz0O','Bgv2zwXZ','yMXPBMqTBwf0y2G','DwLK','zxHPC3rZ','Aw5JBhvKzxm','twf0y2GG','iZuWqZG3oa','rgvTBYbKzxnJCMLWDgLVBNmGyxjLigXPBwL0zwqGDg8GmJaGD29YzhmGBwf4Aw11Bs4GugXLyxnLihnOB3j0zw4GEw91CIbKzxnJCMLWDgLVBI4','y29TBwvUDefKze92zxjSyxK','yxbWzw5Kq2HPBgq','BwvZC2fNzq','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiJ5oBYbTyxrJAgvZigzVDw5Kig1HDgnOAw5Nign1CNjLBNqGzMLSDgvYCY48l2rPDJ4','D2LUBMvYt2XKrwXV','y29TBwvUDfrLEhq','AxnmB2fKAw5N','u3vIBwL0DgLUzYbJB21Tzw50igfZoG','Bg9ZzxjdB21Tzw50','ChvZAa','D2fYBG','q29TBwvUDcbUB3qGzM91BMqUieL0ig1HEsbOyxzLigfSCMvHzhKGyMvLBIbKzwXLDgvKlG','zxjYB3i','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiIbZDhLSzt0Iy29SB3i6ihjLzdSIpKvYCM9YigXVywrPBMCGBwf0y2HLCZOG','ChjLDMLLD05LEhrqywDL','B25JBgLJAW','Aw5Uzxjive1m','Dgv4Da','y29TBwvUDfbVChvWq29UDgvUDfbYzxzPzxC','Dgv4DenVBNrLBNq','y29TBwvUDa','vgHHBMSGEw91lIbuAguGy29TBwvUDcbOyxmGyMvLBIbYzxbVCNrLzcbHBMqGD2LSBcbIzsbYzxzPzxDLzc4','q29TBwvUDcbMCM9Tia','ChjLDMLLDY1KmY1IDxr0B24','CMvWB3j0q29TBwvUDej1DhrVBG','tM8GDMfSAwqGy3vYC29YlcbMzxrJAgLUzYbMCM9TigjLz2LUBMLUzYbHBMqGC2TPChbPBMCGCgfNzxm','CMvTB3zLqxr0CMLIDxrL','rgvTBYbSAw5R','pgj1DhrVBIbJBgfZCZ0IzgvSzxrLlwnVBw1LBNqTyNrUiIbHCMLHlwXHyMvSpsjezwXLDguGy29TBwvUDci+W5C8l2j1DhrVBJ4','CMvTB3zL','wwvZDgvYzgf5','y3jLyxrLrwXLBwvUDa','y29TBwvUDeLK','v2LUBMvY','Bwf4','iZGWoda4ma','CgfYzw50tM9Kzq','C3bSAxq','zgvZyW','DhLWzq','Bg9ZzxjvC2vYBMfTzq','y3vYCMvUDa','i0zgrdCWma','ChjLDMLLDY1SywrKzxiTBw9Kzq','pc9WpJXZBwfSBcbZDhLSzt0Iy29SB3i6i2fHytSGzgLZCgXHEtPIBg9JAZSGDgv4Dc1HBgLNBJPYAwDODdSGBwfYz2LUlxrVCdOXmhb4oYi+ug9ZDgvKig9Uia','j3mGrgvTBW','yxbWBhKTzw5Oyw5JzwqTzMLSDgvYCW','C3vIz2fTzvr5Cgu','z2v0vgLTzq','BwfWugXHEwvK','ChjLDMvUDerLzMf1Bhq','mJaYns0WnY0WmG','B3bHy2L0Eq','yNv0Dg9U','lM5VlwnVBw1LBNrZlw1LC3nHz2u','Bwf0y2HdB21Tzw50CW','vw5HyMXLihrVihn1yM1PDcaTihn5C3rLBsbUB3qGCMvHzhK','u3rHBMrHCMqGtwf0y2G','lcbMzxrJAgLUzYbMCM9TiezPCMvZDg9Yzq','y2XVC2vdB21Tzw50ug9WDxbqCMv2Awv3','DxnLCKLK','y3jLyxrLzef0','lNbVChvWlwfJDgLVBNm','y3vYCMvUDfbHz2u','Bg9ZzxjtDwLJAwrLCW','DgLTzxn0yw1W','C3rYAw5NAwz5','cIaGicaGicaGpgrPDIbJBgfZCZ0ICg9WDxaTAgvHzgvYiJ4kicaGicaGicaGicaGpgGZpKfKzcbdB21Tzw50ig9YierLBw88l2GZpGOGicaGicaGicaGica8yNv0Dg9UigLKpsjJBg9ZzufKzenVBw1LBNrqB3b1CciGy2XHC3m9iMnSB3nLlwj0BIi+jNrPBwvZoZWVyNv0Dg9UpGOGicaGicaGidWVzgL2pGOGicaGicaGidXMB3jTigLKpsjHzgrdB21Tzw50rM9YBsi+cIaGicaGicaGicaGidXPBNb1Dcb0ExbLpsjOAwrKzw4IigLKpsjJB21Tzw50twf0y2HjzciGBMfTzt0Iy29TBwvUDe1HDgnOswqIihzHBhvLpsi','yxbWCM92zwrnyxrJAgvZ','zMLSDgvYlwXLDMvSCW','yMfKq29TBwvUDhm','zw1WDhK','rMfPBgvKihrVigzLDgnOihvZzxjUyw1LoG','igrHExmGywDV','yMXVy2S','C3vIz2fTzxm','zgf0yq','BwfW','tI9b','y3vYCMvUDe1Vzgu','lM1HDgnOlw1HCa','BwLZC2LSzxmTnNbSDxm','lM1HDgnOlxn1yMDHBwu','txv0zwqU','mte1odiWnKfpvLHnrq','y3vYCMvUDfvZzxi','q2XVC2u','ChjLDMLLDY1KmI1IDxr0B24','y29SB3i','ChjLDMLLD0nHy2HLxW','AhjLzG','D2LUBMvYvxnLCM5HBwu','Bg9N','yxv0Aa','D2LUBMvYq29TBwvUDa','zg9JCW','rMfPBgvKihrVihbHCNnLignHy2HLoG','i2zMndq0na','i2i5zJfMyW','tg9HzgLUzYbMAxjZDcbWywDLigzYB20GrMLYzxn0B3jL','Bxv0zuzYB21eyxrL','zMLSDgvYlxrVz2DSzs1IDxr0B24','zgLZCgXHEu5HBwu','mZKYEgjlrw5k','CMvJzw50lw1HDgnOzxmTChjLDMLLDW','lM9WDgLVBI10ywi','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiJ5oBYbTB3jLig1HDgnOzxmGDg8GzgLZCgXHEq','CgLSB3rZ','zMXLEa','Bg9HzgLUzY1PBMrPy2f0B3i','Cg9WDxaTyNrUignSB3nLlwj0BG','y2XPy2S','AgfZtMv4DfbHz2u','C3vIBwL0','iJ4kicaGicaGicaGicaGcIaGicaGicaGicaGidXKAxyGy2XHC3m9iM9WDgLVBI10ywjZiJ4kicaGicaGicaGicaGicaGidXIDxr0B24GDhLWzt0IyNv0Dg9UiIbJBgfZCZ0IB3b0Aw9UlxrHyIbHy3rPDMuIigrHDgeTB3b0Aw9UpsjJB21Tzw50iJ5bzgqGq29TBwvUDdWVyNv0Dg9UpGOGicaGicaGicaGicaGicaGphnWyw4Gy2XHC3m9iM9WDgLVBI1KAxzPzgvYiJ5puJWVC3bHBJ4kicaGicaGicaGicaGicaGidXIDxr0B24GDhLWzt0IyNv0Dg9UiIbJBgfZCZ0IB3b0Aw9UlxrHyIiGzgf0ys1VChrPB249iMrLBw8IpLnOyxjLierLBw8GtgLUAZWVyNv0Dg9UpGOGicaGicaGicaGica8l2rPDJ4kicaGicaGicaGicaGcIaGicaGicaGicaGidXKAxyGy2XHC3m9iM9WDgLVBI1JB250zw50iIbPzd0Iy29TBwvUDe9WDgLVBIi+cIaGicaGicaGicaGicaGica8zgL2ignSyxnZpsjMB3jTlwDYB3vWiJ4kicaGicaGicaGicaGicaGicaGica8BgfIzwWGzM9YpsjJB21Tzw50vgv4Dci+ww91CIbJB21Tzw50icGXnsb3B3jKCYbTyxGPoJWVBgfIzwW+cIaGicaGicaGicaGicaGicaGicaGphrLEhrHCMvHigLKpsjJB21Tzw50vgv4DciGBMfTzt0Iy29TBwvUDfrLEhqIihjVD3m9iJmIihbSywnLAg9SzgvYpsjtAgfYzsb5B3vYihrOB3vNAhrZlI4UiJ48l3rLEhrHCMvHpGOGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNDVCMqTy291BNrLCIi+phnWyw4GAwq9iNDVCMrdB3vUDci+mdWVC3bHBJ4VmtuGD29Yzhm8l2rPDJ4kicaGicaGicaGicaGicaGidWVzgL2pGOGicaGicaGicaGica8l2rPDJ4kicaGicaGicaGicaGcIaGicaGicaGicaGidXKAxyGy2XHC3m9iM9WDgLVBI1JB250zw50iIbPzd0IzgvTB09WDgLVBIiGC3r5Bgu9iMrPC3bSyxK6ig5VBMu7iJ4kicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iMzVCM0Tz3jVDxaIpGOGicaGicaGicaGicaGicaGicaGidXSywjLBcbMB3i9iMrLBw9mAw5RiJ5ezw1VieXPBMS6pc9SywjLBd4kicaGicaGicaGicaGicaGicaGica8Aw5WDxqGDhLWzt0IDxjSiIbPzd0IzgvTB0XPBMSIig5HBwu9iMrLBw9mAw5RiIbWBgfJzwHVBgrLCJ0IAhr0Chm6lY8UlI4IihjLCxvPCMvKpGOGicaGicaGicaGicaGicaGpc9KAxy+cIaGicaGicaGicaGicaGica8zgL2ignSyxnZpsjMB3jTlwDYB3vWiJ4kicaGicaGicaGicaGicaGicaGica8BgfIzwWGzM9YpsjKzw1VrgvZy3jPChrPB24IpKrLC2nYAxb0Aw9UicGYmcb3B3jKCYbTyxGPoJWVBgfIzwW+cIaGicaGicaGicaGicaGicaGicaGphrLEhrHCMvHigLKpsjKzw1VrgvZy3jPChrPB24Iig5HBwu9iMrLBw9ezxnJCMLWDgLVBIiGCM93CZ0ImIiGCgXHy2vOB2XKzxi9iKrLC2nYAwjLihLVDxiGzgvTBY4UlIi+pc90zxH0yxjLyt4kicaGicaGicaGicaGicaGicaGica8zgL2ignSyxnZpsj3B3jKlwnVDw50zxiIpJXZCgfUigLKpsjKzw1Vv29YzenVDw50iJ4Wpc9ZCgfUpI8Ymcb3B3jKCZWVzgL2pGOGicaGicaGicaGicaGicaGpc9KAxy+cIaGicaGicaGicaGidWVzgL2pGOGicaGicaGicaGicakicaGicaGicaGicaGpgrPDIbJBgfZCZ0IzM9YBs1Hy3rPB25ZiJ4kicaGicaGicaGicaGicaGidXIDxr0B24GDhLWzt0IC3vIBwL0iIbJBgfZCZ0IC3vIBwL0lwnVBw1LBNqTyNrUiJ5tDwjTAxq8l2j1DhrVBJ4kicaGicaGicaGicaGpc9KAxy+cIaGicaGicaGpc9MB3jTpGOGicaG','ywrKq29TBwvUDezVCM0','C2v0qxr0CMLIDxrL','mtvWEa','D29YzenVDw50','q29TBwvUDhmGC2vJDgLVBIbUB3qGzM91BMqGAw4GDgvTCgXHDgu','yxbWCM92zwrbDa','ANvTCa','zMLYC3rwAxnPyMXL','Aw5Zzxj0qMvMB3jL','Cg9WDxaTyNrUihjLCg9YDc1IDg4','zg9NzMLNAhq','zw5Oyw5JzwrgAwX0zxjZ','y29TBwvUDfbVChvWuhjLDMLLDW','rMfPBgvKihrVihn1yM1PDdOG','zMLUza','CxvLCNLtzwXLy3rVCKfSBa','D2LUBMvYrgvTB0XPBMS','ANvTCc10BY1WywDL','zMLYC3rdAgLSza','vw5RBM93BG','zgvTB0rLC2nYAxb0Aw9U','lM1HDgnOlwrLBw8TBgLUA3m','rw50zxi','lM9WDgLVBI10ywiUywn0AxzL','B3b0Aw9U','ntq5mZaWmffiwvzsBq','lNbSyxLLCI5SB3nLCIaUCgXHEwvYlxn1AwnPzgvZ','y29TBwvUDfvZzxi','lM9WDgLVBI1JB250zw50','ww91ig5LzwqGDg8GyMuGC2LNBMvKigLUihrVigXLyxzLigeGy29TBwvUDcbVCIbHzgqGysbKzw1V','BM9Uzq','zw1LCMfSza','rMfPBgvKihrVihjLCg9YDcbJB21Tzw50oIa','zgvZy3jPChrPB24','z2v0rwXLBwvUDej5swq','u3vIBwL0','zMLSDgvY','u3vIBwL0DgLUzY4UlG','zMLSDgvYlxn1yMDHBwvZ','DMfSDwu','zgL2','ChjLDMLLD1bYzxzqywDL','lMnVBw11BML0Es1JB21Tzw50CY1Zzwn0Aw9U','BMv4Da','C3vIC3rYAw5N','BgvUz3rO','lM1HDgnOlwrHDgu','vw5RBM93BIbnyxa','lMnVBw1LBNrZlwnVBNrHAw5LCG','lNn1yM1PDc1JB21Tzw50lwj0BG','A2v5','zgLZCgXHEq','i2zMzG','Bwf0y2Hjza','lM1HDgnOlwnHCMq','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiJ5oBYbYzwnLBNqGBwf0y2HLCYbMB3vUza','A2v5ChjLC3m','y29TBwvUDe92zxjSyxLqCMv2Awv3','zgvTB0XPBMS','ywrKrxzLBNrmAxn0zw5LCG','mtq4mdq5nunSB3frvq','lNbSyxLLCI53Aw5UzxiGlNbSyxLLCI1Uyw1L','ywXS','lNbSyxLLCI5SB3nLCIaUCgXHEwvYlw5HBwu','DhjPBq','y2XHC3nmAxn0','y29TBwvUDefKzfbVChvW','ugXLyxnLigvUDgvYigeGzgvTBYbSAw5R','mc42','y2XVC2vZDa','y2XLyxiTzw5Oyw5JzwqTzMLSDgvYCW','zw5Oyw5JzwqTzMLSDgvYlxnLy3rPB24','y29TBwvUDfbVChvWvgL0BgvqCMv2Awv3','y29TBwvUDc1WB3b1Ca','CMf0DgLUzW','CxvLCNLtzwXLy3rVCG','ig1HDgnOAw5NigzPBhrLCNm','lMnVBw1LBNqTAxrLBq','lMnVBw1LBNqUBg9ZzxiTy29TBwvUDa','BgfZDfzPC2LIBgu','zgvMyxvSDa','otG1otCWBuHfz2PV','C3rVCfbYB3bHz2f0Aw9U','q29TBwvUDcbKzwXLDgvKihn1y2nLC3nMDwXSEq','mtuWmtmXmJvTwg1uwe0','zM9YrwfJAa','t3b0Aw9U','lM1HDgnOzxmTBg9HzgLUzW','ugXLyxnLigvUDgvYigeGy29TBwvUDcbIzwzVCMuGC3vIBwL0DgLUzW','zgvTBW','otqZodHWDvnZr0S','yMfJA2DYB3vUzenVBg9Y','q29TBwvUDhmGyxjLigXPBwL0zwqGDg8GmtuGD29YzhmGBwf4Aw11Bs4GugXLyxnLihnOB3j0zw4GEw91CIbJB21Tzw50lG','lJWVzgL2pG','Bg9ZzxjpBgrfBg8','lNbSyxLLCI5SB3nLCIaUCgXHEwvYlxnJB3jL','zgLZywjSzwq','ChjLDMLLDY1Kms1IDxr0B24','zgvTB1DVCMrdB3vUDa','D2LUBMvYlq','rMfPBgvKihrVigzLDgnOihvZzxiGChjVzMLSztO','Dg9Nz2XL'];a6a=function(){return aP;};return a6a();}function setupWordCounter(a,b,c){const ax=a6Y,d=document['getElementById'](a),e=document[ax(0x1b2)](b);if(!d||!e)return;f(),d[ax(0x1cb)](ax(0x200),f);function f(){const ay=ax,g=d['value']['trim'](),h=g?g[ay(0x142)](/\s+/)[ay(0x1b4)](i=>i[ay(0x1bd)]>0x0)[ay(0x1bd)]:0x0;e[ay(0x130)]=h,h>c?e[ay(0x20b)]['color']=ay(0x17e):e[ay(0x20b)]['color']='#aaa';}}async function submitCommentOrDemo(a){const az=a6Y;a['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert(az(0x155));return;}const b=window[az(0x17a)][az(0x172)];if(!b){alert(az(0x203));return;}const c=document[az(0x1b2)]('commentMatchId')['value'],d=document[az(0x1db)](az(0x1a7))[az(0x205)]['option'];let f='Anonymous';try{const h=doc(window['db'],'userProfiles',b['uid']),i=await getDoc(h);if(i[az(0x215)]()){const j=i[az(0x169)]();j[az(0x20e)]&&(f=j[az(0x20e)]);}f==='Anonymous'&&b['displayName']&&(f=b[az(0x183)]);}catch(k){console['warn'](az(0x165),k),b[az(0x183)]&&(f=b['displayName']);}const g=document[az(0x1db)](az(0x1c1));g&&(g[az(0x1f0)]=!![],g[az(0x130)]='Submitting...');try{if(d===az(0x131)){const l=document['getElementById']('commentText')[az(0x1b7)][az(0x1d0)]();if(!l){alert(az(0x1e8)),g['disabled']=![],g['textContent']=az(0x1b3);return;}const m=l[az(0x142)](/\s+/)[az(0x1b4)](p=>p['length']>0x0)[az(0x1bd)];if(m>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.'),g['disabled']=![],g['textContent']='Submit';return;}const n={'matchId':c,'userId':b['uid'],'username':f,'text':l,'type':az(0x131),'timestamp':serverTimestamp()},o=collection(window['db'],'matchComments');await addDoc(o,n);}else{const p=document[az(0x1b2)]('demoLink')[az(0x1b7)]['trim'](),q=document['getElementById'](az(0x1a4))['value'][az(0x1d0)]()||az(0x138);if(!p){alert(az(0x1d3)),g['disabled']=![],g[az(0x130)]=az(0x1b3);return;}try{new URL(p);}catch(u){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),g[az(0x1f0)]=![],g['textContent']='Submit';return;}const r=q[az(0x142)](/\s+/)['filter'](v=>v['length']>0x0)[az(0x1bd)];if(r>0x14){alert(az(0x219)),g['disabled']=![],g[az(0x130)]=az(0x1b3);return;}const s={'matchId':c,'userId':b['uid'],'username':f,'demoLink':p,'description':q,'type':'demo','text':'Demo:\x20'+q,'timestamp':serverTimestamp()},t=collection(window['db'],'matchComments');await addDoc(t,s);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(v){console[az(0x129)]('Error\x20submitting:',v),alert(az(0x19d)+v[az(0x11f)]),g&&(g['disabled']=![],g['textContent']='Submit');}}function getEloRankClass(a){const aA=a6Y,b=Number(a);if(b>=0x7d0)return aA(0x1af);else{if(b>=0x708)return'gold';else{if(b>=0x640)return'silver';else{if(b>=0x578)return'bronze';else return'unranked';}}}}function showPreviewCommentPopup(a,b,c=a6Y(0x1c4)){const aB=a6Y,d=document['getElementById']('commentPopupPreview'),e=document[aB(0x1b2)](aB(0x1c9)),f=document['getElementById'](aB(0x1d8)),g=document['getElementById'](aB(0x12f)),h=document['getElementById'](aB(0x135));if(!d||!e||!f||!g||!h)return;d['dataset']['commentText']=a,d['dataset']['commentUser']=b,f[aB(0x20b)][aB(0x175)]=c,f['textContent']='Comment\x20from\x20'+b,g[aB(0x130)]=a,h[aB(0x12c)]=reportComment,d[aB(0x20b)]['display']='block',e[aB(0x20b)]['display']=aB(0x167);}function closePreviewCommentPopup(){const aC=a6Y,a=document[aC(0x1b2)]('commentPopupPreview'),b=document['getElementById']('commentOverlayPreview');if(a)a['style']['display']=aC(0x1ae);if(b)b[aC(0x20b)]['display']=aC(0x1ae);}async function reportComment(){const aD=a6Y,a=window['auth'][aD(0x172)];if(!a){alert(aD(0x1ff));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const b=document[aD(0x1b2)]('commentPopupPreview'),c={'commentAuthor':b['dataset'][aD(0x1ab)]||'Unknown\x20User','commentText':b[aD(0x205)][aD(0x122)]||'','matchId':previewState['currentMatchId']||'','reportedBy':a[aD(0x214)],'reporterUsername':a[aD(0x183)]||'Anonymous\x20User','reportedAt':serverTimestamp()},d=collection(window['db'],aD(0x163));await addDoc(d,c),alert(aD(0x132)),closePreviewCommentPopup();}catch(e){console[aD(0x129)]('Error\x20reporting\x20comment:',e),alert(aD(0x1b0)+e['message']);}}function showFullCommentLightbox(a){const aE=a6Y;if(isUsernameMuted(a['username']))return;const b=document['getElementById'](aE(0x19c)),c=document['getElementById'](aE(0x1c9)),d=document['getElementById']('commentPopupTitlePreview'),e=document['getElementById'](aE(0x12f));if(!b||!c||!d||!e)return;d['style']['color']='#fff',d['textContent']=aE(0x133)+a[aE(0x20e)];if(a['timestamp']){const i=new Date(a[aE(0x15e)]['seconds']*0x3e8),j=i['toLocaleString']();e[aE(0x12d)]='<p>'+a['text']+aE(0x149)+j+'</small>';}else e[aE(0x130)]=a['text'];b[aE(0x205)][aE(0x13d)]=a['id']||'',b['dataset'][aE(0x1ab)]=a[aE(0x20e)]||'',b[aE(0x205)][aE(0x122)]=a['text']||'',b['dataset'][aE(0x1c5)]=a['matchId']||'';const f=b[aE(0x1db)]('.popup-actions')||document[aE(0x13c)]('div');!b['querySelector'](aE(0x15b))?(f[aE(0x204)]='popup-actions',f[aE(0x20b)]['display']='flex',f[aE(0x20b)]['justifyContent']='center',f[aE(0x20b)]['gap']='10px',f['style']['marginTop']=aE(0x192),b[aE(0x11e)](f)):f[aE(0x12d)]='';const g=document['createElement'](aE(0x152));g['textContent']=aE(0x173),g['className']=aE(0x18b),g['id']=aE(0x158),g[aE(0x1cb)]('click',closePreviewCommentPopup);const h=document['createElement']('button');h['textContent']='Report',h[aE(0x204)]=aE(0x199),h['style'][aE(0x1eb)]='#d32f2f',h[aE(0x1cb)]('click',reportComment),f['appendChild'](g),f['appendChild'](h),b['style']['display']='block',c['style']['display']='block';}export function setupPreviewEventListeners(){const aF=a6Y,a=document[aF(0x1b2)](aF(0x1b9)),b=document[aF(0x1b2)]('previewNextPage'),c=document[aF(0x1b2)](aF(0x1f1)),d=document[aF(0x1b2)]('preview-d2-button'),e=document[aF(0x1b2)](aF(0x134)),f=document[aF(0x1b2)](aF(0x182)),g=document['getElementById'](aF(0x1d7));if(!a||!b||!c||!d||!e||!f||!g){console['warn']('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}a['addEventListener'](aF(0x18c),()=>{const aG=aF;if(!a[aG(0x1f0)])loadRecentMatchesPreview('prev');}),b[aF(0x1cb)]('click',()=>{const aH=aF;if(!b['disabled'])loadRecentMatchesPreview(aH(0x1bb));}),c[aF(0x1cb)]('click',()=>{const aI=aF;previewState[aI(0x16c)]!=='D1'&&!previewState['isLoading']&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(aI(0x146)));}),d[aF(0x1cb)]('click',()=>{const aJ=aF;previewState['currentMode']!=='D2'&&!previewState[aJ(0x123)]&&(previewState[aJ(0x16c)]='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),e[aF(0x1cb)](aF(0x18c),()=>{const aK=aF;previewState[aK(0x16c)]!=='D3'&&!previewState[aK(0x123)]&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview(aK(0x146)));});f&&g&&f[aF(0x1cb)](aF(0x18c),()=>{const aL=aF,r=g[aL(0x20b)][aL(0x1c3)]!==aL(0x1ae);g[aL(0x20b)]['display']=r?aL(0x1ae):aL(0x167),f[aL(0x1d1)][aL(0x1f5)]('active',!r);});const h=document[aF(0x1b2)](aF(0x14b)),i=document[aF(0x1b2)](aF(0x1d6));h&&h['addEventListener']('click',()=>{const aM=aF;previewState['enhancedFilters'][aM(0x188)]=document['getElementById'](aM(0x1f6))[aM(0x1b7)][aM(0x1d0)](),previewState[aM(0x19b)]['levels']=document[aM(0x1b2)](aM(0x162))[aM(0x1b7)]['trim']();const r=document[aM(0x1b2)](aM(0x1b6));previewState['enhancedFilters']['subgames']=Array['from'](r['selectedOptions'])['map'](s=>s[aM(0x1b7)])['filter'](s=>s!==''),loadRecentMatchesPreview('current');});i&&i['addEventListener']('click',()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document[aF(0x19f)]('.jump-btn')['forEach'](r=>{r['addEventListener']('click',()=>{const aN=a6b,s=r[aN(0x205)][aN(0x196)];jumpToPage(s);});});const j=document['getElementById']('jump-to-page');j&&j[aF(0x1cb)](aF(0x1c8),r=>{const aO=aF;r[aO(0x1c2)]===aO(0x1a6)&&jumpToPage('input');});const k=document['getElementById']('closeCommentPopupPreview'),l=document[aF(0x1b2)]('commentOverlayPreview');if(k)k[aF(0x1cb)](aF(0x18c),closePreviewCommentPopup);if(l)l[aF(0x1cb)](aF(0x18c),closePreviewCommentPopup);const m=document[aF(0x1b2)]('closeAddCommentPopup'),n=document['getElementById'](aF(0x11d)),o=document['getElementById'](aF(0x190));if(m)m['addEventListener']('click',closeAddCommentPopup);if(n)n['addEventListener'](aF(0x18c),closeAddCommentPopup);if(o)o[aF(0x1cb)](aF(0x18e),submitComment);const p=document[aF(0x1b2)](aF(0x122)),q=document['getElementById'](aF(0x193));p&&q&&setupWordCounter(aF(0x122),aF(0x193),0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window[a6Y(0x209)]=submitComment;