const a10_0x42826a=a10_0x36e9,a10_0xbd1508=(function(){let _0x1a7b3a=!![];return function(_0x39011e,_0x13f35e){const _0x4653d8=_0x1a7b3a?function(){if(_0x13f35e){const _0xd65c2f=_0x13f35e['apply'](_0x39011e,arguments);return _0x13f35e=null,_0xd65c2f;}}:function(){};return _0x1a7b3a=![],_0x4653d8;};}()),a10_0xc63fa2=a10_0xbd1508(this,function(){const _0x12aab5=a10_0x36e9,_0x4e6cb9=function(){let _0x3deb40;try{_0x3deb40=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x53acbd){_0x3deb40=window;}return _0x3deb40;},_0x232839=_0x4e6cb9(),_0x3bc60b=_0x232839['console']=_0x232839['console']||{},_0xd59c8f=['log',_0x12aab5(0x1ea),_0x12aab5(0x1ed),'error','exception',_0x12aab5(0x1fb),'trace'];for(let _0x1301d6=0x0;_0x1301d6<_0xd59c8f['length'];_0x1301d6++){const _0x278b60=a10_0xbd1508['constructor']['prototype']['bind'](a10_0xbd1508),_0x104be4=_0xd59c8f[_0x1301d6],_0x3513a9=_0x3bc60b[_0x104be4]||_0x278b60;_0x278b60['__proto__']=a10_0xbd1508['bind'](a10_0xbd1508),_0x278b60[_0x12aab5(0x1f6)]=_0x3513a9['toString'][_0x12aab5(0x1e3)](_0x3513a9),_0x3bc60b[_0x104be4]=_0x278b60;}});a10_0xc63fa2();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x196ad4=![]){const _0x4cfbc7=Date['now'](),_0x49daf8=checkNotificationCache();if(_0x49daf8!==null&&!_0x196ad4){updateNotificationDot(_0x49daf8);if(_0x4cfbc7-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x4cfbc7;const _0x48a716=auth['currentUser'];if(!_0x48a716){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x57892c,_0x105449,_0x4c9e2e]=await Promise['all']([checkForPendingMatchesInCollection(_0x48a716,'pendingMatches'),checkForPendingMatchesInCollection(_0x48a716,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x48a716,'pendingMatchesD3')]),_0x22c2ff=_0x57892c||_0x105449||_0x4c9e2e;updateNotificationDot(_0x22c2ff),updateNotificationCache(_0x22c2ff);}catch(_0x2fd912){console['error']('Error\x20checking\x20pending\x20matches:',_0x2fd912);}}async function checkForPendingMatchesInCollection(_0x5bb027,_0x13c86c){const _0x3b3c3d=a10_0x36e9,_0x3301ec=_0x5bb027['uid'],_0x253994=_0x5bb027['email'],_0x1fa628=query(collection(db,_0x13c86c),where('winnerId','==',_0x3301ec),where('approved','==',![])),_0x20bfab=await getDocs(_0x1fa628);if(!_0x20bfab['empty'])return!![];if(_0x253994){const _0x5579c8=query(collection(db,_0x13c86c),where(_0x3b3c3d(0x1ec),'==',_0x253994),where(_0x3b3c3d(0x1f3),'==',![])),_0x231af6=await getDocs(_0x5579c8);if(!_0x231af6['empty'])return!![];}let _0x5cf770=await getUsernameFromAllSources(_0x5bb027);if(_0x5cf770){const _0x1a5a5e=query(collection(db,_0x13c86c),where('winnerUsername','==',_0x5cf770),where(_0x3b3c3d(0x1f3),'==',![])),_0x142cf0=await getDocs(_0x1a5a5e);if(!_0x142cf0['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x516e9b){const _0x3205c3=a10_0x36e9,_0x1a1652=localStorage[_0x3205c3(0x1e6)](_0x3205c3(0x1e4));if(_0x1a1652)return _0x1a1652;try{const [_0x25c2ba,_0x2bee50,_0x3a09a2]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x516e9b[_0x3205c3(0x1e9)]))),getDocs(query(collection(db,'playersD2'),where(_0x3205c3(0x1ef),'==',_0x516e9b['uid']))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x516e9b[_0x3205c3(0x1e9)])))]);if(!_0x25c2ba[_0x3205c3(0x1fa)]){const _0x35cf26=_0x25c2ba['docs'][0x0][_0x3205c3(0x1eb)]()['username'];return localStorage[_0x3205c3(0x1f7)]('currentUsername',_0x35cf26),_0x35cf26;}if(!_0x2bee50['empty']){const _0x57c165=_0x2bee50['docs'][0x0][_0x3205c3(0x1eb)]()['username'];return localStorage[_0x3205c3(0x1f7)]('currentUsername',_0x57c165),_0x57c165;}if(!_0x3a09a2['empty']){const _0x58a897=_0x3a09a2['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x58a897),_0x58a897;}const _0xfb3b84=await getDoc(doc(db,'users',_0x516e9b['uid']));if(_0xfb3b84['exists']()&&_0xfb3b84['data']()['username']){const _0x46b99a=_0xfb3b84['data']()[_0x3205c3(0x1f2)];return localStorage['setItem']('currentUsername',_0x46b99a),_0x46b99a;}}catch(_0x429160){console['error'](_0x3205c3(0x1f5),_0x429160);}if(_0x516e9b[_0x3205c3(0x1e0)])return _0x516e9b[_0x3205c3(0x1e0)][_0x3205c3(0x1e1)]('@')[0x0];return null;}function updateNotificationCache(_0x1f82cf){const _0x5dc8c8=a10_0x36e9,_0x4ff7b1={'status':_0x1f82cf,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[_0x5dc8c8(0x1df)](_0x4ff7b1));}function checkNotificationCache(){const _0x327526=a10_0x36e9,_0x1a837e=localStorage[_0x327526(0x1e6)](NOTIFICATION_CACHE_KEY);if(!_0x1a837e)return null;try{const {status:_0x83a996,timestamp:_0x5827d6}=JSON['parse'](_0x1a837e),_0x190aa9=Date[_0x327526(0x1de)]();if(_0x190aa9-_0x5827d6<CACHE_EXPIRY)return _0x83a996;}catch(_0x35d65b){}return null;}export function updateNotificationDot(_0xe9abef){const _0x438a57=new MutationObserver((_0x2cf13f,_0x43a7ce)=>{const _0x50f685=document['getElementById']('report-match-notification');_0x50f685&&(updateDotStyle(_0x50f685,_0xe9abef),_0x43a7ce['disconnect']());});_0x438a57['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x19b15c=document['getElementById']('report-match-notification');_0x19b15c&&(updateDotStyle(_0x19b15c,_0xe9abef),_0x438a57['disconnect']()),setTimeout(()=>_0x438a57['disconnect'](),0x1388);}function updateDotStyle(_0x2ff3f4,_0xffe47e){const _0xc0985c=a10_0x36e9;_0xffe47e?(_0x2ff3f4['style'][_0xc0985c(0x1f8)]=_0xc0985c(0x1fc),_0x2ff3f4[_0xc0985c(0x1e2)]['backgroundColor']='#ff3b30',_0x2ff3f4['style'][_0xc0985c(0x1e5)]=_0xc0985c(0x1e8),_0x2ff3f4['style']['height']='10px',_0x2ff3f4['style'][_0xc0985c(0x1ee)]='absolute',_0x2ff3f4['style'][_0xc0985c(0x1f9)]='-5px',_0x2ff3f4[_0xc0985c(0x1e2)]['right']='-8px',_0x2ff3f4[_0xc0985c(0x1e2)]['borderRadius']=_0xc0985c(0x1f4),_0x2ff3f4[_0xc0985c(0x1e2)]['border']=_0xc0985c(0x1f0),_0x2ff3f4[_0xc0985c(0x1e2)][_0xc0985c(0x1e7)]='999'):_0x2ff3f4[_0xc0985c(0x1e2)]['display']='none';}function a10_0x36e9(_0xa9c4f2,_0x5d1bc0){const _0xc63fa2=a10_0x131a();return a10_0x36e9=function(_0xbd1508,_0x448abd){_0xbd1508=_0xbd1508-0x1de;let _0x131ac2=_0xc63fa2[_0xbd1508];return _0x131ac2;},a10_0x36e9(_0xa9c4f2,_0x5d1bc0);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener'](a10_0x42826a(0x1f1),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});function a10_0x131a(){const _0x2ad0f7=['now','stringify','email','split','style','bind','currentUsername','width','getItem','zIndex','10px','uid','warn','data','winnerEmail','info','position','userId','2px\x20solid\x20white','DOMContentLoaded','username','approved','50%','Error\x20fetching\x20username:','toString','setItem','display','top','empty','table','block'];a10_0x131a=function(){return _0x2ad0f7;};return a10_0x131a();}