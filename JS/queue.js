const a46_0x4d940c=a46_0xd1d5,a46_0x58ba45=(function(){let _0x5747a9=!![];return function(_0x4d9af5,_0x5bbd68){const _0x24c31f=_0x5747a9?function(){if(_0x5bbd68){const _0x39e30f=_0x5bbd68['apply'](_0x4d9af5,arguments);return _0x5bbd68=null,_0x39e30f;}}:function(){};return _0x5747a9=![],_0x24c31f;};}()),a46_0x59cbad=a46_0x58ba45(this,function(){const _0x273cbe=a46_0xd1d5;let _0x40db02;try{const _0x2f9e19=Function(_0x273cbe(0x1f3)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x40db02=_0x2f9e19();}catch(_0x1ad4bb){_0x40db02=window;}const _0x4660d9=_0x40db02['console']=_0x40db02['console']||{},_0x3c8314=['log','warn','info','error','exception','table','trace'];for(let _0x410969=0x0;_0x410969<_0x3c8314[_0x273cbe(0x1fe)];_0x410969++){const _0x210c34=a46_0x58ba45[_0x273cbe(0x1fd)][_0x273cbe(0x1f9)][_0x273cbe(0x1f6)](a46_0x58ba45),_0x5f40e4=_0x3c8314[_0x410969],_0x342c3d=_0x4660d9[_0x5f40e4]||_0x210c34;_0x210c34['__proto__']=a46_0x58ba45[_0x273cbe(0x1f6)](a46_0x58ba45),_0x210c34[_0x273cbe(0x1f5)]=_0x342c3d['toString'][_0x273cbe(0x1f6)](_0x342c3d),_0x4660d9[_0x5f40e4]=_0x210c34;}});function a46_0xd1d5(_0x21df60,_0x2f2b95){const _0x59cbad=a46_0x5ccd();return a46_0xd1d5=function(_0x58ba45,_0x2c3ca5){_0x58ba45=_0x58ba45-0x1f2;let _0x5ccd6d=_0x59cbad[_0x58ba45];return _0x5ccd6d;},a46_0xd1d5(_0x21df60,_0x2f2b95);}a46_0x59cbad();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a46_0x4d940c(0x1f4)),activePlayersQuery=query(readyPlayersRef,where(a46_0x4d940c(0x1fb),'==',!![]));function updateQueueDisplay(_0x2e9f65){const _0x53ae94=a46_0x4d940c,_0x2d355b=document['getElementById']('queue-container');if(!_0x2d355b)return;if(_0x2e9f65['length']===0x0){_0x2d355b['style'][_0x53ae94(0x1ff)]='none';return;}_0x2d355b['style']['display']='block';let _0x2df49d=_0x53ae94(0x1fa);_0x2e9f65[_0x53ae94(0x201)](_0x2c3c30=>{const _0x2c93d3=_0x53ae94;_0x2df49d+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x2c3c30['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x2c3c30[_0x2c93d3(0x1fc)])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x2df49d+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2d355b['innerHTML']=_0x2df49d;}function formatQueueTime(_0x1bb1c3){const _0xcf6989=a46_0x4d940c;if(!_0x1bb1c3)return'Just\x20now';const _0x127ebe=_0x1bb1c3['toDate']?_0x1bb1c3['toDate']():new Date(_0x1bb1c3),_0x10a009=new Date(),_0x251c79=Math[_0xcf6989(0x1f8)]((_0x10a009-_0x127ebe)/0xea60);if(_0x251c79<0x1)return'Just\x20now';return _0x251c79+'m\x20in\x20queue';}async function checkQueueTimeout(_0x55e704){const _0x16a0b3=a46_0x4d940c;if(!_0x55e704['lastUpdated'])return;const _0xa2d46d=_0x55e704['lastUpdated']['toDate']?_0x55e704[_0x16a0b3(0x1fc)]['toDate']():new Date(_0x55e704['lastUpdated']),_0x2c7476=new Date(),_0x57639a=Math[_0x16a0b3(0x1f8)]((_0x2c7476-_0xa2d46d)/0xea60);if(_0x57639a>=0x1e)try{const _0x2268b7=doc(db,_0x16a0b3(0x1f4),_0x55e704['id']);await updateDoc(_0x2268b7,{'isReady':![]});}catch(_0x252723){console[_0x16a0b3(0x200)](_0x16a0b3(0x1f2),_0x252723);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x13dc8a=>{const _0x46d2e6=[];_0x13dc8a['forEach'](_0x44e8ac=>{const _0x1d1d42=a46_0xd1d5,_0x3cd358=_0x44e8ac['data']();if(_0x3cd358[_0x1d1d42(0x1fb)]===!![]){const _0x128f03={'id':_0x44e8ac['id'],'username':_0x3cd358['username'],'lastUpdated':_0x3cd358['lastUpdated']||new Date()};_0x46d2e6['push'](_0x128f03),checkQueueTimeout(_0x128f03);}}),updateQueueDisplay(_0x46d2e6);},_0x16d1cc=>{console['error']('Error\x20in\x20queue\x20listener:',_0x16d1cc);});window['addEventListener'](a46_0x4d940c(0x1f7),()=>{unsubscribe();});function a46_0x5ccd(){const _0x758172=['Error\x20removing\x20player\x20from\x20queue:','return\x20(function()\x20','readyPlayers','toString','bind','unload','floor','prototype','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','isReady','lastUpdated','constructor','length','display','error','forEach'];a46_0x5ccd=function(){return _0x758172;};return a46_0x5ccd();}