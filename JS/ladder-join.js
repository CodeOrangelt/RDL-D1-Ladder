const a25_0x299869=a25_0x3e0e,a25_0x312c69=(function(){let _0x3c7a8b=!![];return function(_0x5d30d3,_0x466231){const _0xf86bbd=_0x3c7a8b?function(){if(_0x466231){const _0x5e7057=_0x466231['apply'](_0x5d30d3,arguments);return _0x466231=null,_0x5e7057;}}:function(){};return _0x3c7a8b=![],_0xf86bbd;};}()),a25_0x2af03a=a25_0x312c69(this,function(){const _0x501825=a25_0x3e0e,_0x5b9f28=function(){const _0x642d22=a25_0x3e0e;let _0x1b55cf;try{_0x1b55cf=Function('return\x20(function()\x20'+_0x642d22(0x104)+');')();}catch(_0x109c3b){_0x1b55cf=window;}return _0x1b55cf;},_0xb58415=_0x5b9f28(),_0x21d98d=_0xb58415[_0x501825(0xf1)]=_0xb58415[_0x501825(0xf1)]||{},_0x4a7477=[_0x501825(0xf0),_0x501825(0xf9),'info','error',_0x501825(0xf4),'table','trace'];for(let _0x3e81fa=0x0;_0x3e81fa<_0x4a7477[_0x501825(0xff)];_0x3e81fa++){const _0x45b17f=a25_0x312c69['constructor'][_0x501825(0xf6)]['bind'](a25_0x312c69),_0x2243fd=_0x4a7477[_0x3e81fa],_0x2e63b2=_0x21d98d[_0x2243fd]||_0x45b17f;_0x45b17f['__proto__']=a25_0x312c69['bind'](a25_0x312c69),_0x45b17f['toString']=_0x2e63b2['toString'][_0x501825(0xf3)](_0x2e63b2),_0x21d98d[_0x2243fd]=_0x45b17f;}});a25_0x2af03a();function a25_0x584a(){const _0x35aaba=['ladder-join-status','log','console','Unknown\x20ladder\x20type:\x20','bind','exception','position','prototype','input[name=\x22ladder\x22]','ladder-join-status\x20error','warn','\x20ladder!\x20The\x20page\x20will\x20refresh...','getElementById','playersDuos','addEventListener',',\x20defaulting\x20to\x20D1','length','none','querySelectorAll','textContent','DOMContentLoaded','{}.constructor(\x22return\x20this\x22)(\x20)','toUpperCase','empty','uid','Ladder\x20join:\x20D2\x20radio\x20found:','display','Verifying\x20username...','getIdToken','style','Error\x20checking\x20','value','disabled','Error\x20checking\x20ladder\x20status:','Checking\x20user\x20status\x20for\x20ladder:','className'];a25_0x584a=function(){return _0x35aaba;};return a25_0x584a();}import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a25_0x3e0e(_0x183cab,_0x3750bc){const _0x2af03a=a25_0x584a();return a25_0x3e0e=function(_0x312c69,_0x4cd2a7){_0x312c69=_0x312c69-0xef;let _0x584a09=_0x2af03a[_0x312c69];return _0x584a09;},a25_0x3e0e(_0x183cab,_0x3750bc);}import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener'](a25_0x299869(0x103),()=>{const _0x168e35=a25_0x299869,_0x1002a6=document['getElementById']('d1-switch'),_0x4a41ff=document[_0x168e35(0xfb)]('d2-switch');console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x1002a6),console['log'](_0x168e35(0x108),!!_0x4a41ff);function _0x8e6573(){const _0x331453=_0x168e35;document[_0x331453(0x101)](_0x331453(0xf7))['forEach'](_0xb3d048=>{const _0x148a5e=_0x331453;_0xb3d048[_0x148a5e(0xfd)]('change',_0x134ed5=>{const _0x11a488=_0x148a5e;_0x134ed5['target']['checked']&&(currentLadder=_0x134ed5['target'][_0x11a488(0x10e)],console[_0x11a488(0xf0)]('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x8e6573();const _0x58779a=document['getElementById']('join-ladder-button');_0x58779a&&_0x58779a['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x2e24cc=>{if(_0x2e24cc)checkUserLadderStatus();else{const _0x158ba4=document['getElementById']('ladder-join-prompt');_0x158ba4&&(_0x158ba4['style']['display']='none');}});});function getCollectionName(_0xc25a){const _0x817668=a25_0x299869;switch(_0xc25a?.[_0x817668(0x105)]()){case'D1':return'players';case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case'DUO':return _0x817668(0xfc);case'CTF':return'playersCTF';default:console['warn'](_0x817668(0xf2)+_0xc25a+_0x817668(0xfe));return'players';}}async function checkUserLadderStatus(){const _0x38eca7=a25_0x299869;console[_0x38eca7(0xf0)](_0x38eca7(0x111),currentLadder);const _0x460aeb=auth['currentUser'],_0x5a9e72=document['getElementById']('ladder-join-prompt'),_0x22ed0f=document['getElementById']('join-ladder-type'),_0x1f3ac5=document['getElementById']('tiny-join-button');if(!_0x460aeb||!_0x460aeb['uid']||!_0x5a9e72||!_0x22ed0f||!_0x1f3ac5){if(_0x5a9e72)_0x5a9e72['style'][_0x38eca7(0x109)]='none';if(_0x1f3ac5)_0x1f3ac5['style'][_0x38eca7(0x109)]=_0x38eca7(0x100);return;}try{try{await _0x460aeb[_0x38eca7(0x10b)](![]);}catch(_0xd8fc11){console['error']('Authentication\x20verification\x20failed:',_0xd8fc11),_0x5a9e72['style']['display']='none',_0x1f3ac5['style'][_0x38eca7(0x109)]='none';return;}const _0x579e4c=getCollectionName(currentLadder),_0x3c3507=doc(db,_0x579e4c,_0x460aeb['uid']),_0x173638=await getDoc(_0x3c3507);if(_0x173638['exists']())_0x5a9e72[_0x38eca7(0x10c)]['display']='none',_0x1f3ac5['style']['display']='none';else{_0x5a9e72['style']['display']=_0x38eca7(0x100),_0x1f3ac5[_0x38eca7(0x10c)]['display']='block',_0x22ed0f['textContent']=currentLadder,_0x1f3ac5['onclick']=()=>{const _0x30187b=_0x38eca7;_0x5a9e72['style']['display']==='block'?_0x5a9e72['style'][_0x30187b(0x109)]='none':_0x5a9e72['style']['display']='block';};const _0xc6ce0d=document['getElementById']('join-username-input'),_0xb08e85=document[_0x38eca7(0xfb)](_0x38eca7(0xef));if(_0xc6ce0d)_0xc6ce0d['value']='';_0xb08e85&&(_0xb08e85[_0x38eca7(0x102)]='',_0xb08e85[_0x38eca7(0x112)]='ladder-join-status');}}catch(_0x537946){console['error'](_0x38eca7(0x110),_0x537946),_0x5a9e72['style'][_0x38eca7(0x109)]=_0x38eca7(0x100),_0x1f3ac5['style']['display']=_0x38eca7(0x100);}}async function handleJoinLadder(){const _0x50af0a=a25_0x299869,_0x5e4c68=auth['currentUser'],_0x5491c5=document[_0x50af0a(0xfb)]('join-ladder-button'),_0x188fa8=document[_0x50af0a(0xfb)]('ladder-join-status'),_0x4f5422=document['getElementById']('join-username-input');if(!_0x5e4c68||!_0x5e4c68[_0x50af0a(0x107)]){_0x188fa8[_0x50af0a(0x102)]='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x188fa8['className']='ladder-join-status\x20error';return;}try{await _0x5e4c68['getIdToken'](!![]);}catch(_0x27f0b9){console['error']('Authentication\x20error:',_0x27f0b9),_0x188fa8[_0x50af0a(0x102)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x188fa8['className']='ladder-join-status\x20error';return;}if(!_0x4f5422||!_0x4f5422['value']['trim']()){_0x188fa8['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x188fa8['className']=_0x50af0a(0xf8);return;}try{_0x5491c5['disabled']=!![],_0x188fa8['textContent']=_0x50af0a(0x10a),_0x188fa8['className']='ladder-join-status\x20loading';let _0x311912='',_0x39ab4e=null;const _0x503448=['players','playersD2','playersD3','playersDuos','playersCTF','nonParticipants'];for(const _0x4edf4d of _0x503448){try{const _0x1969db=doc(db,_0x4edf4d,_0x5e4c68[_0x50af0a(0x107)]),_0x3dcb9c=await getDoc(_0x1969db);if(_0x3dcb9c['exists']()){_0x39ab4e=_0x3dcb9c['data']();if(_0x39ab4e['username']){_0x311912=_0x39ab4e['username'];break;}}}catch(_0x26a43c){console['error'](_0x50af0a(0x10d)+_0x4edf4d+':',_0x26a43c);}}!_0x311912&&_0x5e4c68['email']&&(_0x311912=_0x5e4c68['email']['split']('@')[0x0]);if(!_0x311912){_0x188fa8['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x188fa8['className']='ladder-join-status\x20error',_0x5491c5[_0x50af0a(0x10f)]=![];return;}const _0x52c07d=_0x4f5422['value']['trim']();if(_0x311912&&_0x52c07d['toLowerCase']()!==_0x311912['toLowerCase']()){_0x188fa8['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x311912+'\x22\x20to\x20confirm.',_0x188fa8[_0x50af0a(0x112)]=_0x50af0a(0xf8),_0x5491c5['disabled']=![];return;}_0x188fa8[_0x50af0a(0x102)]='Joining\x20'+currentLadder+'\x20ladder...';const _0x2e5365=getCollectionName(currentLadder),_0xf03f04=doc(db,_0x2e5365,_0x5e4c68['uid']),_0x1794bc=await getDoc(_0xf03f04);if(_0x1794bc['exists']()){_0x188fa8[_0x50af0a(0x102)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x188fa8['className']=_0x50af0a(0xf8),_0x5491c5['disabled']=![];return;}try{await _0x5e4c68['getIdToken'](!![]);}catch(_0xab41e3){_0x188fa8[_0x50af0a(0x102)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x188fa8['className']='ladder-join-status\x20error',_0x5491c5['disabled']=![];return;}const _0x442915=_0x311912,_0x5332e8=collection(db,_0x2e5365),_0x54586f=query(_0x5332e8,orderBy('position','desc'),limit(0x1)),_0xc8fb84=await getDocs(_0x54586f);let _0x440155=0x1;if(!_0xc8fb84[_0x50af0a(0x106)]){const _0x2d78dd=_0xc8fb84['docs'][0x0]['data']();_0x440155=(_0x2d78dd[_0x50af0a(0xf5)]||0x0)+0x1;}const _0x36d98f={'username':_0x442915,'email':_0x5e4c68['email'],'eloRating':0x4b0,'position':_0x440155,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0xf03f04,_0x36d98f),currentLadder==='DUOS'?_0x188fa8['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x188fa8['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+_0x50af0a(0xfa),_0x188fa8['className']='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x2fc0ac){console['error']('Error\x20joining\x20ladder:',_0x2fc0ac),_0x188fa8['textContent']='Error\x20joining\x20ladder:\x20'+_0x2fc0ac['message'],_0x188fa8[_0x50af0a(0x112)]='ladder-join-status\x20error',_0x5491c5['disabled']=![];}}