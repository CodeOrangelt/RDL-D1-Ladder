const a2_0x528bb8=a2_0x628c,a2_0x55e073=(function(){let _0x46ef9d=!![];return function(_0x4ecec5,_0x53ac87){const _0x4d1c9c=_0x46ef9d?function(){if(_0x53ac87){const _0x3f760d=_0x53ac87['apply'](_0x4ecec5,arguments);return _0x53ac87=null,_0x3f760d;}}:function(){};return _0x46ef9d=![],_0x4d1c9c;};}()),a2_0x1347d3=a2_0x55e073(this,function(){const _0x4f1834=a2_0x628c;let _0x338f6a;try{const _0x2ac7b2=Function(_0x4f1834(0x1ad)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x338f6a=_0x2ac7b2();}catch(_0xf7db25){_0x338f6a=window;}const _0x21cbc2=_0x338f6a[_0x4f1834(0x248)]=_0x338f6a['console']||{},_0x5a8cfe=[_0x4f1834(0x25c),'warn','info',_0x4f1834(0x391),_0x4f1834(0x1f8),'table','trace'];for(let _0xacb339=0x0;_0xacb339<_0x5a8cfe['length'];_0xacb339++){const _0x2243b5=a2_0x55e073['constructor']['prototype']['bind'](a2_0x55e073),_0x315796=_0x5a8cfe[_0xacb339],_0x2909d9=_0x21cbc2[_0x315796]||_0x2243b5;_0x2243b5['__proto__']=a2_0x55e073[_0x4f1834(0x28c)](a2_0x55e073),_0x2243b5[_0x4f1834(0x195)]=_0x2909d9['toString']['bind'](_0x2909d9),_0x21cbc2[_0x315796]=_0x2243b5;}});a2_0x1347d3();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x3b2457){const _0x40de5c=a2_0x628c;if(!_0x3b2457)return'#ffffff';_0x3b2457=_0x3b2457['replace']('#','');_0x3b2457['length']===0x3&&(_0x3b2457=_0x3b2457['split']('')['map'](_0x539e91=>_0x539e91+_0x539e91)['join'](''));if(_0x3b2457[_0x40de5c(0x199)]!==0x6)return'#ffffff';const _0x3f2268=parseInt(_0x3b2457[_0x40de5c(0x2b5)](0x0,0x2),0x10),_0x532f0c=parseInt(_0x3b2457[_0x40de5c(0x2b5)](0x2,0x4),0x10),_0x334e2c=parseInt(_0x3b2457[_0x40de5c(0x2b5)](0x4,0x6),0x10),_0x1b0f9a=(_0x3f2268*0x12b+_0x532f0c*0x24b+_0x334e2c*0x72)/0x3e8;return _0x1b0f9a>=0x80?_0x40de5c(0x3b4):'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x3159a7=>{const _0x13c1cb=a2_0x628c;if(!_0x3159a7){window['location']['href']=_0x13c1cb(0x3b6);return;}try{await initializeAdminDashboard();}catch(_0x156b5a){console['error']('Error\x20initializing\x20dashboard:',_0x156b5a),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x5b5690){const _0x380118=a2_0x628c;if(!_0x5b5690)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x5b5690+'\x20in\x20all\x20collections...');const _0x390a89=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':_0x380118(0x1d9)},{'name':_0x380118(0x22d),'displayName':'D3\x20Players'},{'name':_0x380118(0x333),'displayName':'Non-Participants'}],_0x23d8c8=auth['currentUser'];let _0x26b13f=null,_0x10b4b9=null;for(const _0x353537 of _0x390a89){try{if(_0x23d8c8){const _0x4744f0=doc(db,_0x353537['name'],_0x23d8c8['uid']),_0xfddcb=await getDoc(_0x4744f0);if(_0xfddcb['exists']()){const _0x451d66=_0xfddcb['data']();console['log'](_0x380118(0x2b1)+_0x353537['displayName']+_0x380118(0x1e4),_0x451d66);const _0x1c49ea=(_0x451d66['roleName']||_0x451d66[_0x380118(0x1fe)]||'')['toLowerCase']();if(_0x1c49ea&&_0x1c49ea!=='none'){_0x26b13f=_0x1c49ea,_0x10b4b9=_0x353537['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x26b13f+'\x20in\x20'+_0x10b4b9);break;}}}if(!_0x26b13f){const _0x258c89=collection(db,_0x353537['name']),_0x64a72e=query(_0x258c89,where('email','==',_0x5b5690)),_0x5dfa3c=await getDocs(_0x64a72e);if(!_0x5dfa3c['empty']){const _0x288d21=_0x5dfa3c['docs'][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0x353537['displayName']+'\x20with\x20email\x20'+_0x5b5690+':',_0x288d21);const _0x25ba91=(_0x288d21['roleName']||_0x288d21['role']||'')['toLowerCase']();if(_0x25ba91&&_0x25ba91!==_0x380118(0x3ba)){_0x26b13f=_0x25ba91,_0x10b4b9=_0x353537['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x26b13f+_0x380118(0x2bc)+_0x10b4b9);break;}}}}catch(_0x4dc2a6){console[_0x380118(0x391)]('Error\x20checking\x20'+_0x353537['displayName']+':',_0x4dc2a6);}}if(_0x26b13f){console[_0x380118(0x25c)](_0x380118(0x2ad)+_0x26b13f+'\x20(from\x20'+_0x10b4b9+')');const _0x2ad6fb={'admin':['dashboard','manage-players',_0x380118(0x188),'manage-articles','manage-trophies',_0x380118(0x3b5),'inactive-players','settings',_0x380118(0x253),_0x380118(0x33a),'manage-highlights','user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies',_0x380118(0x3b5),'inactive-players','settings','manage-trophies',_0x380118(0x33a),_0x380118(0x183),'user-roles-section','manage-matches','manage-points',_0x380118(0x35f),'manage-ribbons'],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':['dashboard',_0x380118(0x264),'manage-trophies','elo-history','manage-highlights']};if(_0x2ad6fb[_0x26b13f])return console[_0x380118(0x25c)]('Role\x20\x27'+_0x26b13f+'\x27\x20has\x20permissions:',_0x2ad6fb[_0x26b13f]),_0x2ad6fb[_0x26b13f];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x5b5690+',\x20giving\x20default\x20access'),[_0x380118(0x1a6)];}function setupSidebarNavigation(_0x3a17b0=[]){const _0x20ca35=a2_0x628c,_0x27dc35=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0xd48c51=document['querySelectorAll'](_0x20ca35(0x1c8));(!_0x3a17b0||_0x3a17b0[_0x20ca35(0x199)]===0x0)&&(_0x3a17b0=[_0x20ca35(0x1a6)]);_0x27dc35['forEach'](_0x14ecb3=>{const _0x2eaecb=_0x20ca35,_0x540c4a=_0x14ecb3[_0x2eaecb(0x18b)]('data-section');_0x3a17b0['includes'](_0x540c4a)?_0x14ecb3['style']['display']=_0x2eaecb(0x1ed):_0x14ecb3[_0x2eaecb(0x184)]['display']='none',_0x14ecb3['addEventListener']('click',()=>{const _0x36996a=_0x2eaecb,_0x311325=_0x14ecb3[_0x36996a(0x18b)]('data-section');if(!_0x3a17b0['includes'](_0x311325)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x27dc35[_0x36996a(0x240)](_0x1fe1ea=>_0x1fe1ea['classList'][_0x36996a(0x3b1)](_0x36996a(0x1c2))),_0x14ecb3['classList'][_0x36996a(0x1fa)]('active'),_0xd48c51['forEach'](_0x1e56ac=>{_0x1e56ac['style']['display']='none';});const _0x44af7f=document['getElementById'](_0x311325);_0x44af7f&&(_0x44af7f[_0x36996a(0x184)]['display']='block',console['log'](_0x36996a(0x251)+_0x311325+'\x20section'));});});const _0x310096=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x3a17b0[0x0]+'\x22]');_0x310096&&_0x310096[_0x20ca35(0x2f3)](),console[_0x20ca35(0x25c)](_0x20ca35(0x206));}function setupTabNavigation(){const _0x1f0a8f=a2_0x628c,_0xacf273=document[_0x1f0a8f(0x2af)]('.nav-item');let _0x2fc0dd=null,_0x2bea81=new Set();_0xacf273['forEach'](_0x147499=>{const _0xb8000e=_0x1f0a8f;_0x147499[_0xb8000e(0x221)](_0xb8000e(0x2f3),function(){const _0x1abe73=_0xb8000e,_0x4b5f1d=this['getAttribute']('data-section');if(_0x4b5f1d===_0x2fc0dd)return;_0x2fc0dd&&(document['getElementById'](_0x2fc0dd)['style']['display']=_0x1abe73(0x3ba),_0xacf273['forEach'](_0x5277fa=>_0x5277fa['classList'][_0x1abe73(0x3b1)](_0x1abe73(0x1c2)))),document['getElementById'](_0x4b5f1d)[_0x1abe73(0x184)]['display']='block',this['classList']['add']('active'),_0x2fc0dd=_0x4b5f1d;});});}function loadSectionData(_0x23bece){return;}async function initializeAdminDashboard(){const _0x50496d=a2_0x628c;try{const _0x4dd1ce=auth['currentUser'],_0x128e35=await getUserTabPermissions(_0x4dd1ce['email']);console[_0x50496d(0x25c)](_0x50496d(0x1f7)+_0x4dd1ce['email']+'\x20allowed\x20tabs:',_0x128e35),window['userAllowedTabs']=_0x128e35,setupSidebarNavigation(_0x128e35),setupLadderSelector(),setupDashboardSection(),_0x128e35[_0x50496d(0x179)](_0x50496d(0x2e3))&&setupManagePlayersSection(),_0x128e35[_0x50496d(0x179)]('elo-history')&&setupEloHistorySection(),_0x128e35[_0x50496d(0x179)]('manage-ranks')&&setupRankControls(),_0x128e35['includes']('manage-articles')&&setupManageArticlesSection(),_0x128e35[_0x50496d(0x179)]('user-roles-section')&&setupUserRolesSection(),_0x128e35['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x128e35[_0x50496d(0x179)](_0x50496d(0x183))&&setupManageHighlightsSection(),_0x128e35['includes']('inactive-players')&&setupInactivePlayersSection(),_0x128e35['includes']('manage-matches')&&setupManageMatchesSection(),_0x128e35['includes']('manage-points')&&setupManagePointsSection(),_0x128e35['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x128e35);}catch(_0x1f377e){console[_0x50496d(0x391)](_0x50496d(0x1cb),_0x1f377e);}}function setupDataLoadButtons(_0x378060=[]){const _0x34879b=a2_0x628c;(!_0x378060||_0x378060['length']===0x0)&&(_0x378060=['dashboard']);const _0x2bedce=document[_0x34879b(0x209)](_0x34879b(0x21f));_0x2bedce&&_0x2bedce[_0x34879b(0x221)]('click',function(){const _0x43d0e6=_0x34879b;this['classList'][_0x43d0e6(0x1fa)](_0x43d0e6(0x2de)),this['innerHTML']=_0x43d0e6(0x379),loadDashboardOverview()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})[_0x43d0e6(0x332)](_0x4a04d2=>{const _0x2d353b=_0x43d0e6;console[_0x2d353b(0x391)](_0x2d353b(0x378),_0x4a04d2),this['classList']['remove'](_0x2d353b(0x2de)),this['innerHTML']=_0x2d353b(0x16c),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x378060['includes']('manage-trophies')){const _0x563c2e=document[_0x34879b(0x209)](_0x34879b(0x1b2));_0x563c2e&&_0x563c2e[_0x34879b(0x221)]('click',function(){const _0x4543a8=_0x34879b;console['log']('Load\x20trophies\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x4543a8(0x379),loadTrophyDefinitions()['then'](()=>{const _0x342732=_0x4543a8;this[_0x342732(0x316)]['remove'](_0x342732(0x2de)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x4c206e=>{const _0x19330b=_0x4543a8;console[_0x19330b(0x391)]('Error\x20loading\x20trophies:',_0x4c206e),this[_0x19330b(0x316)]['remove'](_0x19330b(0x2de)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1cd968=_0x19330b;this[_0x1cd968(0x289)]=_0x1cd968(0x1d6);},0xbb8);});});}if(_0x378060[_0x34879b(0x179)]('manage-players')){const _0x2c1b51=document[_0x34879b(0x209)]('load-players-data');_0x2c1b51&&_0x2c1b51[_0x34879b(0x221)]('click',function(){const _0x436be4=_0x34879b;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add'](_0x436be4(0x2de)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0xec5938=_0x436be4;this['classList']['remove'](_0xec5938(0x2de)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})[_0x436be4(0x332)](_0x371ac5=>{const _0x204678=_0x436be4;console[_0x204678(0x391)](_0x204678(0x281),_0x371ac5),this[_0x204678(0x316)][_0x204678(0x3b1)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4abc90=_0x204678;this[_0x4abc90(0x289)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x378060['includes'](_0x34879b(0x33a))){const _0x43e2d3=document['getElementById']('load-elo-history-data');_0x43e2d3&&_0x43e2d3['addEventListener']('click',function(){const _0x346952=_0x34879b;console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x346952(0x379),loadEloHistory(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x346952(0x332)](_0x7e599c=>{const _0xd6bf74=_0x346952;console['error'](_0xd6bf74(0x364),_0x7e599c),this[_0xd6bf74(0x316)][_0xd6bf74(0x3b1)](_0xd6bf74(0x2de)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x31b613=_0xd6bf74;this[_0x31b613(0x289)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x378060['includes']('manage-articles')){const _0x12bba4=document[_0x34879b(0x209)](_0x34879b(0x218));_0x12bba4&&_0x12bba4['addEventListener'](_0x34879b(0x2f3),function(){const _0x2b5db5=_0x34879b;console['log'](_0x2b5db5(0x397)),this['classList'][_0x2b5db5(0x1fa)]('loading'),this['innerHTML']=_0x2b5db5(0x379),loadArticles()[_0x2b5db5(0x2f4)](()=>{const _0x1e30a6=_0x2b5db5;this['classList'][_0x1e30a6(0x3b1)](_0x1e30a6(0x2de)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x3bf518=>{const _0x4589eb=_0x2b5db5;console['error']('Error\x20loading\x20articles:',_0x3bf518),this['classList']['remove'](_0x4589eb(0x2de)),this['innerHTML']=_0x4589eb(0x16c),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x378060['includes'](_0x34879b(0x325))){const _0x44c7f2=document['getElementById'](_0x34879b(0x27e));_0x44c7f2&&_0x44c7f2['addEventListener']('click',function(){const _0x453251=_0x34879b;console['log']('Load\x20users\x20data\x20clicked'),this['classList'][_0x453251(0x1fa)]('loading'),this['innerHTML']=_0x453251(0x379),loadUsersWithRoles()['then'](()=>{const _0x2120b4=_0x453251;this['classList']['remove']('loading'),this['innerHTML']=_0x2120b4(0x21c);})['catch'](_0x6aa5cb=>{const _0x5222d1=_0x453251;console['error'](_0x5222d1(0x31b),_0x6aa5cb),this[_0x5222d1(0x316)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5182c1=_0x5222d1;this['innerHTML']=_0x5182c1(0x21c);},0xbb8);});});}if(_0x378060['includes'](_0x34879b(0x262))){const _0x490b08=document['getElementById'](_0x34879b(0x265));_0x490b08&&_0x490b08['addEventListener']('click',function(){const _0x4582eb=_0x34879b;console[_0x4582eb(0x25c)]('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add'](_0x4582eb(0x2de)),this['innerHTML']=_0x4582eb(0x379),loadInactivePlayersData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})[_0x4582eb(0x332)](_0x1af0af=>{const _0x324dcf=_0x4582eb;console['error']('Error\x20loading\x20inactive\x20players:',_0x1af0af),this['classList'][_0x324dcf(0x3b1)](_0x324dcf(0x2de)),this['innerHTML']=_0x324dcf(0x16c),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x378060['includes']('manage-highlights')){const _0x104062=document[_0x34879b(0x209)]('load-highlights-data');_0x104062&&_0x104062['addEventListener']('click',function(){const _0x18a84e=_0x34879b;console['log'](_0x18a84e(0x3cf)),this[_0x18a84e(0x316)]['add']('loading'),this[_0x18a84e(0x289)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0xe69fa6=_0x18a84e;this['classList'][_0xe69fa6(0x3b1)]('loading'),this[_0xe69fa6(0x289)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x12c10d=>{const _0x47bc86=_0x18a84e;console['error']('Error\x20loading\x20highlights:',_0x12c10d),this['classList']['remove'](_0x47bc86(0x2de)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x378060['includes']('manage-matches')){const _0x29fb7f=document['getElementById'](_0x34879b(0x230));_0x29fb7f&&_0x29fb7f[_0x34879b(0x221)](_0x34879b(0x2f3),function(){console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x8ed189=a2_0x628c;this['classList']['remove']('loading'),this['innerHTML']=_0x8ed189(0x291);})['catch'](_0xb20e7f=>{const _0x3e3ce2=a2_0x628c;console['error']('Error\x20loading\x20matches:',_0xb20e7f),this['classList']['remove'](_0x3e3ce2(0x2de)),this['innerHTML']=_0x3e3ce2(0x16c),setTimeout(()=>{const _0x2533de=_0x3e3ce2;this['innerHTML']=_0x2533de(0x291);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x378060['includes']('manage-ribbons')){const _0xa32111=document['getElementById']('load-ribbons-data');_0xa32111&&_0xa32111['addEventListener'](_0x34879b(0x2f3),function(){const _0xaca7fc=_0x34879b;console['log']('Load\x20ribbons\x20data\x20clicked'),this[_0xaca7fc(0x316)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0xcd4160=_0xaca7fc;this[_0xcd4160(0x316)]['remove'](_0xcd4160(0x2de)),this[_0xcd4160(0x289)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x22fdbb=>{const _0x58a244=_0xaca7fc;console[_0x58a244(0x391)]('Error\x20loading\x20ribbons:',_0x22fdbb),this['classList']['remove']('loading'),this['innerHTML']=_0x58a244(0x16c),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console[_0x34879b(0x25c)](_0x34879b(0x3ce));}function setupDashboardSection(){const _0x605043=a2_0x628c;document[_0x605043(0x209)]('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x605043(0x34a))['textContent']='-',document['getElementById']('rejected-count')[_0x605043(0x24f)]='-';}function setupLadderSelector(){const _0x5c7c5b=a2_0x628c,_0x37cce7=document['querySelectorAll']('.ladder-switch\x20input');_0x37cce7[_0x5c7c5b(0x240)](_0x2a08e5=>{const _0x50f1b6=_0x5c7c5b;_0x2a08e5[_0x50f1b6(0x221)]('change',()=>{const _0x4680d8=_0x50f1b6;currentLadder=_0x2a08e5[_0x4680d8(0x26d)],document['body']['setAttribute'](_0x4680d8(0x2d1),currentLadder);const _0x4c406b=document['getElementById']('current-ladder-display');_0x4c406b&&(_0x4c406b['textContent']=currentLadder),document['getElementById']('player-count')[_0x4680d8(0x24f)]='-',document[_0x4680d8(0x209)]('match-count')[_0x4680d8(0x24f)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById'](_0x4680d8(0x194))['textContent']='-',charts['rankDistribution']&&(charts[_0x4680d8(0x252)][_0x4680d8(0x2ac)](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification(_0x4680d8(0x251)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x2be8f4=document[_0x5c7c5b(0x209)]('current-ladder-display');_0x2be8f4&&(_0x2be8f4['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x10c814=a2_0x628c;try{console[_0x10c814(0x25c)](_0x10c814(0x1b3)),document['getElementById']('player-count')[_0x10c814(0x24f)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x10c814(0x34a))[_0x10c814(0x24f)]='-',document['getElementById']('rejected-count')['textContent']='-';const _0x546269=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':_0x10c814(0x22d),_0x3e69cf=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x10c814(0x20f):_0x10c814(0x1f3),_0x34c753=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x5ff5b7=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0x10c814(0x1e9):'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x546269+',\x20'+_0x3e69cf);const _0x1f9c75=await getDocs(collection(db,_0x546269)),_0x5665be=_0x1f9c75['size'],_0x3da8be=await getDocs(collection(db,_0x3e69cf)),_0x390e6f=_0x3da8be['size'],_0x37f4ab=await getDocs(collection(db,_0x34c753)),_0x5b35ca=_0x37f4ab['size'],_0x2f4e3c=await getDocs(collection(db,_0x5ff5b7)),_0x2904a6=_0x2f4e3c[_0x10c814(0x20e)];return document['getElementById']('player-count')[_0x10c814(0x24f)]=_0x5665be,document['getElementById']('match-count')['textContent']=_0x390e6f,document['getElementById']('pending-count')['textContent']=_0x5b35ca,document['getElementById']('rejected-count')['textContent']=_0x2904a6,await createRankDistributionChart(),await createActivityChart(),console['log'](_0x10c814(0x1d2)),!![];}catch(_0x35ea33){console['error']('Error\x20loading\x20dashboard\x20data:',_0x35ea33);throw _0x35ea33;}}async function createRankDistributionChart(){const _0x4816e5=a2_0x628c;try{const _0x429d7f=collection(db,currentLadder==='D1'?'players':_0x4816e5(0x342)),_0x5dce27=await getDocs(_0x429d7f),_0x580b70={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x5dce27['forEach'](_0x5ecf05=>{const _0x4ccdc9=_0x4816e5,_0x51e316=_0x5ecf05['data'](),_0x12ba08=_0x51e316['eloRating']||0x4b0;if(_0x12ba08>=0x7d0)_0x580b70['Emerald']++;else{if(_0x12ba08>=0x708)_0x580b70['Gold']++;else{if(_0x12ba08>=0x640)_0x580b70['Silver']++;else{if(_0x12ba08>=0x578)_0x580b70[_0x4ccdc9(0x26f)]++;else _0x580b70[_0x4ccdc9(0x1bf)]++;}}}});const _0x28190c=document['getElementById']('rank-distribution-chart');charts[_0x4816e5(0x252)]&&charts['rankDistribution']['destroy'](),charts[_0x4816e5(0x252)]=new Chart(_0x28190c,{'type':_0x4816e5(0x1ff),'data':{'labels':Object['keys'](_0x580b70),'datasets':[{'data':Object['values'](_0x580b70),'backgroundColor':['#808080','#CD7F32','#C0C0C0','#FFD700',_0x4816e5(0x274)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x4816e5(0x1f2),'color':_0x4816e5(0x2c5),'font':{'size':0x10}}}}});}catch(_0x47db82){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x47db82),document[_0x4816e5(0x209)](_0x4816e5(0x168))['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x428a04=a2_0x628c;try{const _0x10482b=currentLadder==='D1'?'approvedMatches':_0x428a04(0x20f),_0x2bf90e=collection(db,_0x10482b),_0x3c2325=new Date();_0x3c2325['setDate'](_0x3c2325['getDate']()-0x7);const _0x366699=query(_0x2bf90e,where('approvedAt','>=',_0x3c2325),orderBy(_0x428a04(0x320),'asc')),_0x194b8d=await getDocs(_0x366699),_0x1dcf4f=['Sunday','Monday',_0x428a04(0x306),_0x428a04(0x1bc),_0x428a04(0x1db),_0x428a04(0x2d4),_0x428a04(0x2f6)],_0x5677eb=_0x1dcf4f[_0x428a04(0x279)]((_0x131830,_0x120b59)=>({..._0x131830,[_0x120b59]:0x0}),{});_0x194b8d['forEach'](_0x82517a=>{const _0x451ddf=_0x428a04,_0x268b33=_0x82517a[_0x451ddf(0x39d)]();if(_0x268b33['approvedAt']){const _0x3d0380=_0x1dcf4f[new Date(_0x268b33['approvedAt']['seconds']*0x3e8)['getDay']()];_0x5677eb[_0x3d0380]++;}});const _0x11d8a7=document['getElementById'](_0x428a04(0x334));charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x11d8a7,{'type':'bar','data':{'labels':_0x1dcf4f,'datasets':[{'label':'Matches\x20Played','data':_0x1dcf4f['map'](_0x314cea=>_0x5677eb[_0x314cea]),'backgroundColor':currentLadder==='D1'?_0x428a04(0x1dc):'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x428a04(0x1ec)}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x428a04(0x1ec)}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':_0x428a04(0x2c5),'font':{'size':0x10}}}}});}catch(_0x217ae2){console['error'](_0x428a04(0x16a),_0x217ae2),document['getElementById'](_0x428a04(0x334))['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x281f32=a2_0x628c,_0x24b59e=document['getElementById']('players-table-body');if(!_0x24b59e)return;_0x24b59e['innerHTML']=_0x281f32(0x3a4);try{let _0x24f1ef=_0x281f32(0x2d9);if(currentLadder==='D2')_0x24f1ef='playersD2';else currentLadder==='D3'&&(_0x24f1ef='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x24f1ef+_0x281f32(0x23b));const _0xace0e1=collection(db,_0x24f1ef),_0x3caedd=query(_0xace0e1,orderBy('eloRating',_0x281f32(0x1e6))),_0x33cee5=await getDocs(_0x3caedd);if(_0x33cee5[_0x281f32(0x1a5)]){_0x24b59e['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x24b59e[_0x281f32(0x289)]='';let _0x551b8c=0x1;_0x33cee5['forEach'](_0xe9ede5=>{const _0x1bdae9=_0x281f32,_0x279899=_0xe9ede5[_0x1bdae9(0x39d)](),_0x2ff891=getRankFromElo(_0x279899['eloRating']||0x4b0),_0x5b8814=getRankStyle(_0x279899['eloRating']||0x4b0),_0x32721d=document['createElement']('tr');_0x32721d['innerHTML']=_0x1bdae9(0x2df)+_0x551b8c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x5b8814['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x279899['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x279899['eloRating']||0x4b0)+_0x1bdae9(0x32d)+_0x5b8814['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2ff891+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x279899[_0x1bdae9(0x312)]||0x0)+_0x1bdae9(0x2b4)+(_0x279899['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0xe9ede5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0xe9ede5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x24b59e['appendChild'](_0x32721d),_0x551b8c++;}),setupPlayerActionButtons();}catch(_0x54032e){console['error']('Error\x20loading\x20players:',_0x54032e),_0x24b59e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x54032e[_0x281f32(0x25b)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x4e2a87){const _0x385d98=a2_0x628c;if(_0x4e2a87>=0x7d0)return'Emerald';if(_0x4e2a87>=0x708)return'Gold';if(_0x4e2a87>=0x640)return _0x385d98(0x1a7);if(_0x4e2a87>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x3c2f97=a2_0x628c;document['querySelectorAll'](_0x3c2f97(0x213))[_0x3c2f97(0x240)](_0x1035b6=>{_0x1035b6['addEventListener']('click',async _0x41abb2=>{const _0x369a99=a2_0x628c,_0x3e4968=_0x41abb2['currentTarget'][_0x369a99(0x308)]['id'];openEditPlayerModal(_0x3e4968);});}),document[_0x3c2f97(0x2af)]('.delete-btn')['forEach'](_0x397046=>{_0x397046['addEventListener']('click',async _0x5d14b6=>{const _0x5210cd=a2_0x628c,_0xb56736=_0x5d14b6['currentTarget'][_0x5210cd(0x308)]['id'];confirmDeletePlayer(_0xb56736);});});}async function openEditPlayerModal(_0x36b046){const _0x5a063a=a2_0x628c;try{const _0x442221=currentLadder==='D1'?'players':'playersD2',_0x568288=doc(db,_0x442221,_0x36b046),_0x2d29d7=await getDoc(_0x568288);if(!_0x2d29d7[_0x5a063a(0x3d4)]()){showNotification('Player\x20not\x20found','error');return;}const _0x4b1264=_0x2d29d7['data'](),_0x764b34=document[_0x5a063a(0x209)]('edit-player-modal'),_0x1401c9=document['getElementById']('edit-username'),_0x5025de=document['getElementById']('edit-elo'),_0x48cce8=document[_0x5a063a(0x209)](_0x5a063a(0x1e7)),_0x15d919=document['getElementById']('edit-losses');_0x1401c9[_0x5a063a(0x26d)]=_0x4b1264[_0x5a063a(0x187)]||'',_0x5025de['value']=_0x4b1264[_0x5a063a(0x298)]||0x4b0,_0x48cce8['value']=_0x4b1264['wins']||0x0,_0x15d919['value']=_0x4b1264['losses']||0x0,_0x764b34['dataset']['playerId']=_0x36b046,_0x764b34['classList']['add']('active');}catch(_0x29e47e){console['error']('Error\x20opening\x20edit\x20modal:',_0x29e47e),showNotification('Failed\x20to\x20load\x20player\x20data',_0x5a063a(0x391));}}async function saveEditedPlayer(){const _0x55fc13=a2_0x628c;try{const _0x19a1d9=document[_0x55fc13(0x209)]('edit-player-modal'),_0x55f3e0=_0x19a1d9['dataset']['playerId'];if(!_0x55f3e0){showNotification('No\x20player\x20selected','error');return;}const _0x271073=document['getElementById']('edit-username'),_0x3ed1c7=document['getElementById']('edit-elo'),_0x1ad27a=document['getElementById']('edit-wins'),_0x3afd3e=document['getElementById']('edit-losses'),_0x16abe4=_0x271073['value']['trim'](),_0x4ff08a=parseInt(_0x3ed1c7['value']),_0x36aaf8=parseInt(_0x1ad27a['value']),_0xa2a2bb=parseInt(_0x3afd3e['value']);if(!_0x16abe4||isNaN(_0x4ff08a)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x55fc13(0x391));return;}const _0x125bf5=currentLadder==='D1'?_0x55fc13(0x2d9):'playersD2',_0x2594ae=doc(db,_0x125bf5,_0x55f3e0),_0x9ec63c=await getDoc(_0x2594ae),_0x2a8d60=_0x9ec63c['exists']()?_0x9ec63c['data']():{},_0x3d1527=_0x2a8d60['eloRating']||0x4b0;await updateDoc(_0x2594ae,{'username':_0x16abe4,'eloRating':_0x4ff08a,'wins':_0x36aaf8||0x0,'losses':_0xa2a2bb||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x55fc13(0x2a6)]});if(_0x4ff08a!==_0x3d1527){const _0x3d5afd=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x3d5afd),{'player':_0x16abe4,'previousElo':_0x3d1527,'newElo':_0x4ff08a,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x55fc13(0x17d)][_0x55fc13(0x2a6)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x55fc13(0x232),'success');}catch(_0x38c6a0){console['error'](_0x55fc13(0x21b),_0x38c6a0),showNotification(_0x55fc13(0x1fc)+_0x38c6a0[_0x55fc13(0x25b)],'error');}}function closeEditPlayerModal(){const _0x53dffa=a2_0x628c,_0x3381ef=document[_0x53dffa(0x209)](_0x53dffa(0x319));_0x3381ef[_0x53dffa(0x316)]['remove']('active'),_0x3381ef['dataset'][_0x53dffa(0x341)]='';}async function confirmDeletePlayer(_0x4272d0){const _0x7de49b=a2_0x628c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x516da8=currentLadder==='D1'?_0x7de49b(0x2d9):_0x7de49b(0x342);await deleteDoc(doc(db,_0x516da8,_0x4272d0)),loadPlayersData(),showNotification(_0x7de49b(0x2d8),'success');}catch(_0x1baaec){console['error'](_0x7de49b(0x18d),_0x1baaec),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x1baaec[_0x7de49b(0x25b)],'error');}}async function setupManagePlayersSection(){const _0x574ca4=a2_0x628c,_0x30d72b=document[_0x574ca4(0x209)]('add-player-form');_0x30d72b&&_0x30d72b[_0x574ca4(0x221)]('submit',async _0x32ad80=>{_0x32ad80['preventDefault'](),await addNewPlayer();});const _0xe96e86=document[_0x574ca4(0x209)]('player-search');_0xe96e86&&_0xe96e86[_0x574ca4(0x221)]('input',debounce(filterPlayerTable,0x12c));const _0x1554b5=document['getElementById']('save-player-btn');_0x1554b5&&_0x1554b5[_0x574ca4(0x221)]('click',saveEditedPlayer);const _0x25a95a=document['getElementById']('cancel-edit-btn');_0x25a95a&&_0x25a95a[_0x574ca4(0x221)]('click',closeEditPlayerModal);const _0x36ee84=document['getElementById'](_0x574ca4(0x319));_0x36ee84&&_0x36ee84['addEventListener'](_0x574ca4(0x2f3),_0x123546=>{_0x123546['target']===_0x36ee84&&closeEditPlayerModal();});const _0x49e405=document['getElementById']('players-ladder-selector');_0x49e405&&_0x49e405['addEventListener'](_0x574ca4(0x35b),()=>{currentLadder=_0x49e405['value'],loadPlayersData();});}async function addNewPlayer(){const _0x5ea62e=a2_0x628c;try{const _0x2a583b=document[_0x5ea62e(0x209)]('new-player-username'),_0x305465=document['getElementById'](_0x5ea62e(0x387)),_0x254513=_0x2a583b[_0x5ea62e(0x26d)][_0x5ea62e(0x309)](),_0x582ab7=parseInt(_0x305465['value'])||0x4b0;if(!_0x254513){alert(_0x5ea62e(0x29b));return;}console['log']('Adding\x20player\x20'+_0x254513+_0x5ea62e(0x398)+_0x582ab7+'\x20to\x20'+currentLadder+'\x20ladder');let _0x5415a8='players',_0x396a87='eloHistory';if(currentLadder==='D2')_0x5415a8=_0x5ea62e(0x342),_0x396a87='eloHistoryD2';else currentLadder==='D3'&&(_0x5415a8='playersD3',_0x396a87='eloHistoryD3');const _0x3333e3=query(collection(db,_0x5415a8),where('username','==',_0x254513)),_0x123197=await getDocs(_0x3333e3);if(!_0x123197['empty']){alert('Username\x20'+_0x254513+_0x5ea62e(0x1bb)+currentLadder+_0x5ea62e(0x2c2));return;}const _0x442ae0=auth['currentUser'],_0x369ad5={'username':_0x254513,'eloRating':_0x582ab7,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x442ae0?_0x442ae0[_0x5ea62e(0x2a6)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x5415a8),_0x369ad5),await addDoc(collection(db,_0x396a87),{'player':_0x254513,'previousElo':0x4b0,'newElo':_0x582ab7,'timestamp':serverTimestamp(),'type':_0x5ea62e(0x302),'placedBy':_0x442ae0?_0x442ae0[_0x5ea62e(0x2a6)]:'admin','gameMode':currentLadder}),_0x2a583b['value']='',_0x305465['value']='1200',alert(_0x5ea62e(0x3d0)+_0x254513+_0x5ea62e(0x32c)+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x28b9bf){console[_0x5ea62e(0x391)](_0x5ea62e(0x178),_0x28b9bf),alert('Error\x20adding\x20player:\x20'+_0x28b9bf['message']);}}document[a2_0x528bb8(0x221)]('DOMContentLoaded',()=>{const _0x216687=a2_0x528bb8,_0x14ed0b=document['getElementById'](_0x216687(0x1c5));_0x14ed0b&&_0x14ed0b['addEventListener']('submit',_0xf8df91=>{const _0x59522b=_0x216687;_0xf8df91[_0x59522b(0x30b)](),addNewPlayer();});});function filterPlayerTable(){const _0x140385=a2_0x528bb8,_0x1247f5=document['getElementById']('player-search')['value']['toLowerCase'](),_0x53ef93=document['querySelectorAll']('#players-table-body\x20tr');let _0x3b93db=0x0;_0x53ef93['forEach'](_0x59d633=>{const _0x5ecb50=a2_0x628c,_0x5c352d=_0x59d633['querySelector']('.username')?.[_0x5ecb50(0x24f)]['toLowerCase']()||'';_0x5c352d['includes'](_0x1247f5)?(_0x59d633[_0x5ecb50(0x184)]['display']='',_0x3b93db++):_0x59d633['style'][_0x5ecb50(0x287)]='none';});const _0x3a53a8=document['getElementById'](_0x140385(0x3a1));_0x3a53a8&&(_0x3b93db===0x0&&_0x1247f5!==''?_0x3a53a8[_0x140385(0x184)][_0x140385(0x287)]='block':_0x3a53a8[_0x140385(0x184)]['display']='none');}function debounce(_0xcb176f,_0x599c4a){let _0x42f20d;return function(..._0x433724){const _0x283f70=a2_0x628c;clearTimeout(_0x42f20d),_0x42f20d=setTimeout(()=>_0xcb176f[_0x283f70(0x310)](this,_0x433724),_0x599c4a);};}async function loadEloHistory(_0x41580f=0x1){const _0x1ef371=a2_0x528bb8,_0x92af6d=document['getElementById']('elo-history-table-body'),_0x53c6b6=currentLadder[_0x1ef371(0x20b)]();if(!_0x92af6d)return;_0x92af6d[_0x1ef371(0x289)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0xd36e86=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0x1ef371(0x3d1):'eloHistoryD3',_0x39da65=collection(db,_0xd36e86);let _0x2b20dc;if(_0x41580f>eloHistoryPagination[_0x53c6b6]['page']&&eloHistoryPagination[_0x53c6b6]['lastVisible'])_0x2b20dc=query(_0x39da65,orderBy(_0x1ef371(0x1cc),'desc'),startAfter(eloHistoryPagination[_0x53c6b6]['lastVisible']),limit(PAGE_SIZE));else _0x41580f<eloHistoryPagination[_0x53c6b6]['page']&&eloHistoryPagination[_0x53c6b6]['firstVisible']?_0x2b20dc=query(_0x39da65,orderBy(_0x1ef371(0x1cc),_0x1ef371(0x1e6)),endBefore(eloHistoryPagination[_0x53c6b6]['firstVisible']),limitToLast(PAGE_SIZE)):_0x2b20dc=query(_0x39da65,orderBy(_0x1ef371(0x1cc),_0x1ef371(0x1e6)),limit(PAGE_SIZE));const _0x59a09d=await getDocs(_0x2b20dc);if(_0x59a09d['empty']){_0x92af6d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x53c6b6+_0x1ef371(0x2fe))['textContent']='Page\x201';return;}eloHistoryPagination[_0x53c6b6]['page']=_0x41580f,eloHistoryPagination[_0x53c6b6]['firstVisible']=_0x59a09d['docs'][0x0],eloHistoryPagination[_0x53c6b6]['lastVisible']=_0x59a09d[_0x1ef371(0x2ef)][_0x59a09d['docs'][_0x1ef371(0x199)]-0x1];const _0x2f63e7=new Map();_0x92af6d['innerHTML']='';const _0x587b2b=async _0x605c27=>{const _0x123dab=_0x1ef371;if(typeof _0x605c27!=='string'||_0x605c27['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x605c27))return _0x605c27;if(_0x2f63e7['has'](_0x605c27))return _0x2f63e7[_0x123dab(0x1a2)](_0x605c27);try{for(const _0x94c5bf of[_0x123dab(0x2d9),'playersD2','playersD3','nonParticipants']){const _0x379d5c=await getDoc(doc(db,_0x94c5bf,_0x605c27));if(_0x379d5c[_0x123dab(0x3d4)]()&&_0x379d5c['data']()['username']){const _0x40955e=_0x379d5c[_0x123dab(0x39d)]()['username'];return _0x2f63e7['set'](_0x605c27,_0x40955e),_0x40955e;}}return _0x605c27;}catch(_0x58f69f){return console['warn'](_0x123dab(0x31a)+_0x605c27+':',_0x58f69f),_0x605c27;}};for(const _0x5060fb of _0x59a09d[_0x1ef371(0x2ef)]){const _0x5e7a4b=_0x5060fb['data'](),_0x220aef=document[_0x1ef371(0x17b)]('tr'),_0x7d4175=_0x5e7a4b['timestamp']?new Date(_0x5e7a4b['timestamp']['seconds']*0x3e8)['toLocaleString']():_0x1ef371(0x1c4),_0xaf44fd=_0x5e7a4b[_0x1ef371(0x395)]-_0x5e7a4b['previousElo'],_0x1d39e8=_0xaf44fd>0x0?_0x1ef371(0x2d2):_0xaf44fd<0x0?'negative-change':'',_0x13d69b=_0xaf44fd>0x0?'+':'',_0x15365d=_0x5e7a4b[_0x1ef371(0x345)]||_0x5e7a4b['username']||_0x5e7a4b['userId']||'N/A',_0x2b908d=await _0x587b2b(_0x15365d);_0x220aef[_0x1ef371(0x289)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x7d4175+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x2b908d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x5e7a4b[_0x1ef371(0x3d7)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x5e7a4b['newElo']||'N/A')+_0x1ef371(0x371)+_0x1d39e8+'\x22>'+_0x13d69b+_0xaf44fd+_0x1ef371(0x1b0)+formatHistoryType(_0x5e7a4b['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5e7a4b['modifiedBy']||_0x5e7a4b[_0x1ef371(0x36e)]||_0x5e7a4b[_0x1ef371(0x275)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x92af6d['appendChild'](_0x220aef);}document['getElementById'](_0x53c6b6+_0x1ef371(0x2fe))['textContent']=_0x1ef371(0x258)+_0x41580f;const _0x391af5=document['getElementById'](_0x53c6b6+_0x1ef371(0x3d6)),_0x2ebb49=document[_0x1ef371(0x209)](_0x53c6b6+'-next-page');if(_0x391af5)_0x391af5[_0x1ef371(0x205)]=_0x41580f<=0x1;const _0x2f7f68=query(_0x39da65,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x53c6b6][_0x1ef371(0x2cc)]),limit(0x1)),_0x48924c=await getDocs(_0x2f7f68);if(_0x2ebb49)_0x2ebb49['disabled']=_0x48924c['empty'];}catch(_0x1b7ff3){console[_0x1ef371(0x391)]('Error\x20loading\x20ELO\x20history:',_0x1b7ff3),_0x92af6d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x1b7ff3['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x24988b){const _0x3a3601=a2_0x528bb8;switch(_0x24988b){case'match_result':return'Match\x20Result';case _0x3a3601(0x360):return'Promotion';case'demotion':return'Demotion';case'admin_modification':return _0x3a3601(0x1df);case'initial_placement':return _0x3a3601(0x2d0);default:return _0x24988b||'Unknown';}}function setupEloHistorySection(){const _0x2eea32=a2_0x528bb8;document[_0x2eea32(0x209)]('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById'](_0x2eea32(0x2a2))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document[_0x2eea32(0x209)]('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x2eea32(0x209)]('d2-next-page')[_0x2eea32(0x221)](_0x2eea32(0x2f3),()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x3df140=document[_0x2eea32(0x209)]('d3-prev-page'),_0x21f280=document['getElementById']('d3-next-page');_0x3df140&&_0x3df140[_0x2eea32(0x221)](_0x2eea32(0x2f3),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x21f280&&_0x21f280['addEventListener'](_0x2eea32(0x2f3),()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x11e4d1=document['getElementById']('elo-history-search');_0x11e4d1&&_0x11e4d1['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x353f94=document['getElementById'](_0x2eea32(0x257));_0x353f94&&_0x353f94[_0x2eea32(0x221)](_0x2eea32(0x35b),applyEloHistoryFilters);const _0x44599e=document['getElementById'](_0x2eea32(0x18a));_0x44599e&&_0x44599e['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x519d42=a2_0x528bb8,_0x54bb65=document['getElementById']('elo-history-search')['value'][_0x519d42(0x20b)](),_0x357235=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x4f2d0c=0x0;_0x357235['forEach'](_0x4a55d1=>{const _0xe61578=_0x519d42;if(_0x4a55d1['classList']['contains']('loading-cell')||_0x4a55d1['classList'][_0xe61578(0x28a)]('empty-state')||_0x4a55d1[_0xe61578(0x316)]['contains']('error-state'))return;const _0x1ebde8=_0x4a55d1['querySelector']('.player')?.[_0xe61578(0x24f)]['toLowerCase']()||'',_0x36a0a2=_0x4a55d1[_0xe61578(0x2a5)]('.type')?.['textContent']['toLowerCase']()||'',_0x41bcc3=_0x4a55d1['querySelector']('.admin-action')?.['textContent']['toLowerCase']()||'';_0x1ebde8['includes'](_0x54bb65)||_0x36a0a2[_0xe61578(0x179)](_0x54bb65)||_0x41bcc3['includes'](_0x54bb65)?(_0x4a55d1['style']['display']='',_0x4f2d0c++):_0x4a55d1['style']['display']=_0xe61578(0x3ba);});}async function applyEloHistoryFilters(){const _0x335946=a2_0x528bb8,_0x3cffba=document['getElementById'](_0x335946(0x21d))['value'],_0x221aaf=document['getElementById']('history-end-date')['value'],_0x2efa9b=document['getElementById'](_0x335946(0x257))[_0x335946(0x26d)],_0x545001=currentLadder['toLowerCase']();eloHistoryPagination[_0x545001]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x59954e=document['getElementById']('elo-history-table-body');_0x59954e['innerHTML']=_0x335946(0x368);try{const _0x391e72=currentLadder==='D1'?_0x335946(0x36a):_0x335946(0x3d1),_0x330186=collection(db,_0x391e72);let _0x16bf56=[orderBy(_0x335946(0x1cc),'desc')];if(_0x3cffba){const _0x542f32=new Date(_0x3cffba);_0x542f32[_0x335946(0x283)](0x0,0x0,0x0,0x0),_0x16bf56['push'](where(_0x335946(0x1cc),'>=',_0x542f32));}if(_0x221aaf){const _0x41ad84=new Date(_0x221aaf);_0x41ad84['setHours'](0x17,0x3b,0x3b,0x3e7),_0x16bf56['push'](where('timestamp','<=',_0x41ad84));}_0x2efa9b&&_0x2efa9b!=='all'&&_0x16bf56['push'](where(_0x335946(0x386),'==',_0x2efa9b));_0x16bf56['push'](limit(PAGE_SIZE));const _0x4164c5=query(_0x330186,..._0x16bf56),_0x4a28d8=await getDocs(_0x4164c5);!_0x4a28d8['empty']&&(eloHistoryPagination[_0x545001]['firstVisible']=_0x4a28d8[_0x335946(0x2ef)][0x0],eloHistoryPagination[_0x545001]['lastVisible']=_0x4a28d8[_0x335946(0x2ef)][_0x4a28d8['docs']['length']-0x1]);_0x59954e['innerHTML']='';if(_0x4a28d8['empty']){_0x59954e[_0x335946(0x289)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x4a28d8['forEach'](_0x4b35e0=>{const _0x1c6c67=_0x335946,_0x11d12e=_0x4b35e0['data'](),_0x50b084=document['createElement']('tr'),_0x265d61=_0x11d12e[_0x1c6c67(0x1cc)]?new Date(_0x11d12e['timestamp'][_0x1c6c67(0x2d3)]*0x3e8)[_0x1c6c67(0x233)]():'N/A',_0x20d0a3=_0x11d12e['newElo']-_0x11d12e['previousElo'],_0x4f34fc=_0x20d0a3>0x0?'positive-change':_0x20d0a3<0x0?'negative-change':'',_0x1feae7=_0x20d0a3>0x0?'+':'',_0x14064c=_0x11d12e['player']||_0x11d12e['username']||_0x11d12e[_0x1c6c67(0x1e0)]||'N/A';_0x50b084[_0x1c6c67(0x289)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x265d61+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x14064c+_0x1c6c67(0x354)+(_0x11d12e['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x11d12e[_0x1c6c67(0x395)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4f34fc+'\x22>'+_0x1feae7+_0x20d0a3+_0x1c6c67(0x1b0)+formatHistoryType(_0x11d12e[_0x1c6c67(0x386)])+_0x1c6c67(0x241)+(_0x11d12e[_0x1c6c67(0x189)]||_0x11d12e[_0x1c6c67(0x36e)]||_0x11d12e['demotedBy']||'System')+_0x1c6c67(0x204),_0x59954e['appendChild'](_0x50b084);}),document['getElementById'](_0x545001+'-page-indicator')['textContent']='Page\x201';}catch(_0x3f8369){console['error']('Error\x20applying\x20filters:',_0x3f8369),_0x59954e[_0x335946(0x289)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x3f8369['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x1002b4=a2_0x528bb8;document['getElementById']('history-start-date')[_0x1002b4(0x26d)]='',document[_0x1002b4(0x209)](_0x1002b4(0x16e))[_0x1002b4(0x26d)]='',document[_0x1002b4(0x209)]('history-type-filter')['value']='all',document[_0x1002b4(0x209)](_0x1002b4(0x267))['value']='';const _0x31b98b=currentLadder['toLowerCase']();eloHistoryPagination[_0x31b98b]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x16f893=a2_0x528bb8,_0x4d114e=document['getElementById'](_0x16f893(0x1b9)),_0x5a9668=document[_0x16f893(0x209)]('promote-modal'),_0x3aa750=document['getElementById']('promote-form');_0x4d114e&&_0x5a9668&&_0x3aa750&&(_0x4d114e['addEventListener']('click',()=>{const _0x2a4ef6=_0x16f893;_0x5a9668[_0x2a4ef6(0x316)]['add']('active');}),_0x5a9668['addEventListener'](_0x16f893(0x2f3),_0xeb7e46=>{const _0x31be62=_0x16f893;_0xeb7e46['target']===_0x5a9668&&_0x5a9668[_0x31be62(0x316)][_0x31be62(0x3b1)]('active');}),_0x3aa750[_0x16f893(0x221)](_0x16f893(0x28b),async _0x420cc5=>{const _0x28043a=_0x16f893;_0x420cc5['preventDefault']();const _0x3f2d81=document['getElementById'](_0x28043a(0x242)),_0x84ad9f=document['getElementById']('promote-ladder'),_0x167049=_0x3f2d81['value']['trim'](),_0x469b26=_0x84ad9f[_0x28043a(0x26d)];if(!_0x167049){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x167049,_0x469b26),_0x5a9668[_0x28043a(0x316)]['remove']('active'),_0x3f2d81['value']='';}catch(_0xf5912c){showNotification(_0xf5912c['message'],_0x28043a(0x391));}}),document['getElementById']('cancel-promote-btn')[_0x16f893(0x221)]('click',()=>{const _0x209a4d=_0x16f893;_0x5a9668[_0x209a4d(0x316)]['remove']('active');}));const _0x3e2fda=document['getElementById'](_0x16f893(0x3c4)),_0x3b0a73=document['getElementById']('demote-modal'),_0x860a13=document['getElementById']('demote-form');_0x3e2fda&&_0x3b0a73&&_0x860a13&&(_0x3e2fda['addEventListener']('click',()=>{const _0x7415a4=_0x16f893;_0x3b0a73[_0x7415a4(0x316)]['add']('active');}),_0x3b0a73['addEventListener']('click',_0x436ded=>{const _0x1933fd=_0x16f893;_0x436ded[_0x1933fd(0x200)]===_0x3b0a73&&_0x3b0a73['classList'][_0x1933fd(0x3b1)]('active');}),_0x860a13['addEventListener']('submit',async _0x10a591=>{const _0x374abc=_0x16f893;_0x10a591[_0x374abc(0x30b)]();const _0x183084=document[_0x374abc(0x209)]('demote-username'),_0x48aaf1=document['getElementById'](_0x374abc(0x3ae)),_0x4d70fe=_0x183084['value'][_0x374abc(0x309)](),_0x4b4728=_0x48aaf1['value'];if(!_0x4d70fe){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x4d70fe,_0x4b4728),document['getElementById']('demote-modal')['classList'][_0x374abc(0x3b1)]('active'),document['getElementById'](_0x374abc(0x1ba))['value']='';}catch(_0x4f0a30){console[_0x374abc(0x391)]('Error\x20in\x20demotion:',_0x4f0a30);}}));const _0x430a20=document[_0x16f893(0x209)](_0x16f893(0x288)),_0x142785=document[_0x16f893(0x209)](_0x16f893(0x313)),_0x2ea531=document[_0x16f893(0x209)]('set-elo-form');_0x430a20&&_0x142785&&_0x2ea531&&(_0x430a20[_0x16f893(0x221)](_0x16f893(0x2f3),()=>{_0x142785['classList']['add']('active');}),_0x142785[_0x16f893(0x221)]('click',_0x44568e=>{_0x44568e['target']===_0x142785&&_0x142785['classList']['remove']('active');}),_0x2ea531['addEventListener'](_0x16f893(0x28b),async _0x1aa90e=>{const _0x3308c8=_0x16f893;_0x1aa90e[_0x3308c8(0x30b)]();const _0x31d7f0=document['getElementById']('set-elo-username'),_0x75a06f=document[_0x3308c8(0x209)]('set-elo-value');let _0x4a9fe7;const _0x4f0b62=document['getElementById']('set-elo-ladder'),_0x17c1e9=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x4f0b62)_0x4a9fe7=_0x4f0b62[_0x3308c8(0x26d)];else _0x17c1e9?_0x4a9fe7=_0x17c1e9[_0x3308c8(0x26d)]:_0x4a9fe7='D1';if(!_0x31d7f0||!_0x75a06f){showNotification('Form\x20elements\x20are\x20missing',_0x3308c8(0x391));return;}const _0x12f9c3=_0x31d7f0[_0x3308c8(0x26d)]['trim'](),_0x4141e1=parseInt(_0x75a06f['value']);if(!_0x12f9c3||isNaN(_0x4141e1)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x12f9c3,_0x4141e1,_0x4a9fe7),_0x142785['classList']['remove'](_0x3308c8(0x1c2)),_0x31d7f0[_0x3308c8(0x26d)]='',_0x75a06f[_0x3308c8(0x26d)]='';}catch(_0x3ad378){showNotification(_0x3ad378[_0x3308c8(0x25b)],'error');}}),document['getElementById'](_0x16f893(0x1dd))[_0x16f893(0x221)]('click',()=>{_0x142785['classList']['remove']('active');}));const _0x3f4865=document['getElementById']('set-role-modal'),_0x4bd972=document['getElementById']('set-role-form');if(_0x3f4865&&_0x4bd972){_0x3f4865['addEventListener'](_0x16f893(0x2f3),_0xc6ee55=>{_0xc6ee55['target']===_0x3f4865&&closeModalHandler();}),_0x4bd972['addEventListener'](_0x16f893(0x28b),async _0x52f6dc=>{const _0x1c3c28=_0x16f893;_0x52f6dc['preventDefault']();const _0x3b22f4=document[_0x1c3c28(0x209)](_0x1c3c28(0x169)),_0x4cb7cb=document['getElementById'](_0x1c3c28(0x1d0)),_0x1640de=document[_0x1c3c28(0x209)]('role-color'),_0x4303f7=_0x3b22f4['value']['trim'](),_0x46b7c5=_0x4cb7cb['value'][_0x1c3c28(0x309)](),_0x50c749=_0x1640de['value'];if(!_0x4303f7){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x4303f7,_0x46b7c5,_0x50c749),closeModalHandler(),loadUsersWithRoles();}catch(_0x4d527b){}});const _0x4ab3dd=document['getElementById'](_0x16f893(0x323));_0x4ab3dd&&(_0x4ab3dd[_0x16f893(0x2aa)]('click',closeModalHandler),_0x4ab3dd['addEventListener'](_0x16f893(0x2f3),closeModalHandler));}}async function promotePlayer(_0x36a62c,_0x4321f8){const _0x1bc6f1=a2_0x528bb8;try{console[_0x1bc6f1(0x25c)](_0x1bc6f1(0x276)+_0x36a62c+'\x20in\x20'+_0x4321f8+_0x1bc6f1(0x2c2));const _0x3a3bf9=auth['currentUser'];if(!_0x3a3bf9)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x592031=_0x4321f8==='D2'?'playersD2':'players',_0x37b421=_0x4321f8==='D2'?'eloHistoryD2':_0x1bc6f1(0x36a);console['log']('Searching\x20for\x20player\x20in\x20'+_0x592031);const _0x460b71=collection(db,_0x592031),_0x5d4422=query(_0x460b71,where('username','==',_0x36a62c)),_0x5bcb96=await getDocs(_0x5d4422);if(_0x5bcb96['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x4321f8+'\x20ladder');throw new Error(_0x1bc6f1(0x2e9)+_0x4321f8+_0x1bc6f1(0x2c2));}const _0x1c275b=_0x5bcb96['docs'][0x0],_0x516c44=_0x1c275b['data'](),_0x1f1b9f=_0x516c44[_0x1bc6f1(0x298)]||0x4b0,_0x4d0d09=_0x1c275b['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x1f1b9f);const _0x848430=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x4f86e4=_0x848430['find'](_0x31ac11=>_0x31ac11['elo']>_0x1f1b9f);if(!_0x4f86e4){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x4321f8+'\x20ladder');throw new Error(_0x1bc6f1(0x2b9)+_0x4321f8+_0x1bc6f1(0x2c2));}console['log']('Promoting\x20player\x20to\x20'+_0x4f86e4['name']+'\x20('+_0x4f86e4['elo']+')'),await updateDoc(doc(db,_0x592031,_0x1c275b['id']),{'eloRating':_0x4f86e4['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x3a3bf9['email']||'admin'}),await addDoc(collection(db,_0x37b421),{'player':_0x36a62c,'previousElo':_0x1f1b9f,'newElo':_0x4f86e4[_0x1bc6f1(0x394)],'timestamp':serverTimestamp(),'type':_0x1bc6f1(0x360),'rankAchieved':_0x4f86e4[_0x1bc6f1(0x211)],'promotedBy':_0x3a3bf9['email']||_0x1bc6f1(0x2cb),'gameMode':_0x4321f8});try{const {promotionManager:_0x3671fe}=await import('./promotions.js'),_0x515a10=_0x3671fe[_0x1bc6f1(0x286)](_0x1f1b9f),_0x205af8=_0x4f86e4['name'];await _0x3671fe['sendPromotionNotification'](_0x4d0d09,_0x36a62c,_0x1f1b9f,_0x4f86e4['elo'],_0x515a10,_0x205af8,'promotion',{'displayName':_0x36a62c,'source':_0x1bc6f1(0x2cb),'adminUser':_0x3a3bf9['email'],'ladder':_0x4321f8}),console['log'](_0x1bc6f1(0x326));}catch(_0x539a51){console[_0x1bc6f1(0x391)](_0x1bc6f1(0x172),_0x539a51);}return alert('Successfully\x20promoted\x20'+_0x36a62c+'\x20to\x20'+_0x4f86e4[_0x1bc6f1(0x211)]+'\x20('+_0x4f86e4['elo']+')'),currentLadder===_0x4321f8&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x204226){console['error'](_0x1bc6f1(0x219),_0x204226),alert('Error\x20promoting\x20player:\x20'+_0x204226['message']);throw _0x204226;}}document[a2_0x528bb8(0x221)](a2_0x528bb8(0x228),()=>{const _0xa89e60=a2_0x528bb8,_0xfb614f=document['getElementById']('promote-form');_0xfb614f&&_0xfb614f[_0xa89e60(0x221)]('submit',async _0x53f7e6=>{const _0x1b16c7=_0xa89e60;_0x53f7e6['preventDefault']();const _0x3afc93=document['getElementById']('promote-username')['value'][_0x1b16c7(0x309)](),_0x466bed=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x3afc93){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x3afc93,_0x466bed),document['getElementById']('promote-modal')['classList']['remove']('active'),document['getElementById']('promote-username')['value']='';}catch(_0x57e8c7){console['error']('Error\x20in\x20promotion:',_0x57e8c7);}});});async function demotePlayer(_0x18722a,_0x361712){const _0x491ef1=a2_0x528bb8;try{console[_0x491ef1(0x25c)]('Attempting\x20to\x20demote\x20'+_0x18722a+_0x491ef1(0x2bc)+_0x361712+'\x20ladder');const _0x1b9737=auth['currentUser'];if(!_0x1b9737)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x451d3c=_0x361712==='D2'?'playersD2':'players',_0xe785f4=_0x361712==='D2'?_0x491ef1(0x3d1):_0x491ef1(0x36a);console['log'](_0x491ef1(0x34b)+_0x451d3c);const _0x2922ed=collection(db,_0x451d3c),_0x1bfae5=query(_0x2922ed,where('username','==',_0x18722a)),_0x1f68e7=await getDocs(_0x1bfae5);if(_0x1f68e7['empty']){alert(_0x491ef1(0x2e9)+_0x361712+_0x491ef1(0x2c2));throw new Error('Player\x20not\x20found\x20in\x20'+_0x361712+'\x20ladder');}const _0xf64640=_0x1f68e7['docs'][0x0],_0x4a96b9=_0xf64640[_0x491ef1(0x39d)](),_0x330865=_0x4a96b9[_0x491ef1(0x298)]||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x330865);const _0x38a508=[{'name':_0x491ef1(0x1a9),'elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x506707=_0x38a508['find'](_0x11b31f=>_0x11b31f['elo']<_0x330865);if(!_0x506707){alert(_0x491ef1(0x2be)+_0x361712+_0x491ef1(0x2c2));throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x361712+'\x20ladder');}console['log'](_0x491ef1(0x36c)+_0x506707['name']+'\x20('+_0x506707[_0x491ef1(0x394)]+')'),await updateDoc(doc(db,_0x451d3c,_0xf64640['id']),{'eloRating':_0x506707['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x1b9737['email']||_0x491ef1(0x2cb)}),await addDoc(collection(db,_0xe785f4),{'player':_0x18722a,'previousElo':_0x330865,'newElo':_0x506707[_0x491ef1(0x394)],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x506707['name'],'demotedBy':_0x1b9737['email']||'admin','gameMode':_0x361712});try{const {promotionManager:_0x14d673}=await import(_0x491ef1(0x2a3)),_0x407b42=_0x14d673['getRankName'](_0x330865),_0x5aacbe=_0x506707['name'];await _0x14d673['sendPromotionNotification'](_0xf64640['id'],_0x18722a,_0x330865,_0x506707['elo'],_0x407b42,_0x5aacbe,'demotion',{'displayName':_0x18722a,'source':'admin','adminUser':_0x1b9737['email'],'ladder':_0x361712}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0xe6048e){console[_0x491ef1(0x391)]('Failed\x20to\x20send\x20Discord\x20notification:',_0xe6048e);}return alert('Successfully\x20demoted\x20'+_0x18722a+_0x491ef1(0x339)+_0x506707['name']+'\x20('+_0x506707['elo']+')'),currentLadder===_0x361712&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x30746d){console[_0x491ef1(0x391)]('Error\x20demoting\x20player:',_0x30746d),alert('Error\x20demoting\x20player:\x20'+_0x30746d['message']);throw _0x30746d;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x2f14eb=a2_0x528bb8,_0x553e32=document[_0x2f14eb(0x209)](_0x2f14eb(0x1b6));_0x553e32&&_0x553e32['addEventListener']('submit',async _0x510dfe=>{const _0x1a8657=_0x2f14eb;_0x510dfe['preventDefault']();const _0x19ffe4=document['getElementById']('demote-username')[_0x1a8657(0x26d)][_0x1a8657(0x309)](),_0x546a06=document['querySelector'](_0x1a8657(0x331))['value'];if(!_0x19ffe4){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x19ffe4,_0x546a06),document['getElementById']('demote-modal')['classList']['remove']('active'),document[_0x1a8657(0x209)]('demote-username')['value']='';}catch(_0x2f11d7){console['error'](_0x1a8657(0x27c),_0x2f11d7);}});});async function setCustomElo(_0x5c3594,_0x3c78c6,_0x412e08){const _0x45d535=a2_0x528bb8;try{const _0xc33188=auth['currentUser'];if(!_0xc33188||!isAdmin(_0xc33188['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x47c3cd=_0x412e08==='D2'?'playersD2':'players',_0x2b3cf5=_0x412e08==='D2'?_0x45d535(0x3d1):'eloHistory',_0x4916e9=collection(db,_0x47c3cd),_0x140ad5=query(_0x4916e9,where('username','==',_0x5c3594)),_0x3b5cef=await getDocs(_0x140ad5);if(_0x3b5cef['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x412e08+_0x45d535(0x2c2));const _0x27c07a=_0x3b5cef[_0x45d535(0x2ef)][0x0],_0x593589=_0x27c07a['data'](),_0x2a4389=_0x593589['eloRating']||0x4b0,_0x3baf23=writeBatch(db);_0x3baf23[_0x45d535(0x1d7)](doc(db,_0x47c3cd,_0x27c07a['id']),{'eloRating':_0x3c78c6,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xc33188['email']});const _0x955162=doc(collection(db,_0x2b3cf5));return _0x3baf23['set'](_0x955162,{'player':_0x5c3594,'previousElo':_0x2a4389,'newElo':_0x3c78c6,'timestamp':serverTimestamp(),'type':_0x45d535(0x238),'modifiedBy':_0xc33188['email'],'gameMode':_0x412e08}),await _0x3baf23['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x5c3594+'\x20was\x20updated\x20from\x20'+_0x2a4389+'\x20to\x20'+_0x3c78c6,'success'),currentLadder===_0x412e08&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x16a3f8){console['error']('Error\x20setting\x20custom\x20ELO:',_0x16a3f8);throw _0x16a3f8;}}async function setUserRole(_0x1b2698,_0x3d5d6b,_0x7fc197){const _0x183f0e=a2_0x528bb8;try{const _0x12f98a=auth[_0x183f0e(0x17d)];if(!_0x12f98a||!isAdmin(_0x12f98a['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x19cf3d=_0x3d5d6b?_0x3d5d6b['trim']():null,_0x118f48=_0x19cf3d?_0x7fc197||'#808080':null,[_0x52fc46,_0xc691bd]=await Promise[_0x183f0e(0x167)]([getDocs(query(collection(db,'players'),where('username','==',_0x1b2698))),getDocs(query(collection(db,_0x183f0e(0x342)),where(_0x183f0e(0x187),'==',_0x1b2698)))]),_0x1b1369=[];if(!_0x52fc46['empty'])_0x1b1369[_0x183f0e(0x37d)]({'ref':_0x52fc46['docs'][0x0]['ref'],'source':'D1'});if(!_0xc691bd[_0x183f0e(0x1a5)])_0x1b1369['push']({'ref':_0xc691bd[_0x183f0e(0x2ef)][0x0]['ref'],'source':'D2'});if(_0x1b1369[_0x183f0e(0x199)]===0x0){const [_0xe9d6bb,_0x27ad02]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where(_0x183f0e(0x187),'==',_0x1b2698))),getDocs(query(collection(db,'userProfiles'),where(_0x183f0e(0x187),'==',_0x1b2698)))]);if(!_0xe9d6bb['empty'])_0x1b1369['push']({'ref':_0xe9d6bb['docs'][0x0]['ref'],'source':_0x183f0e(0x216)});if(!_0x27ad02[_0x183f0e(0x1a5)])_0x1b1369['push']({'ref':_0x27ad02['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x1b1369[_0x183f0e(0x199)]===0x0)throw new Error(_0x183f0e(0x176)+_0x1b2698+_0x183f0e(0x34f));const _0x43e801=writeBatch(db);_0x1b1369[_0x183f0e(0x240)](_0x599bf6=>{const _0x51aa7d=_0x183f0e;console[_0x51aa7d(0x25c)](_0x51aa7d(0x246)+_0x1b2698+'\x20in\x20'+_0x599bf6['source']),!_0x19cf3d?_0x43e801[_0x51aa7d(0x1d7)](_0x599bf6['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x43e801[_0x51aa7d(0x1d7)](_0x599bf6['ref'],{'roleName':_0x19cf3d,'roleColor':_0x118f48,'roleAssignedBy':_0x12f98a[_0x51aa7d(0x2a6)],'roleAssignedAt':serverTimestamp()});}),await _0x43e801['commit']();const _0x2b965f=_0x19cf3d?'Role\x20\x22'+_0x19cf3d+'\x22\x20set':'Role\x20removed';return showNotification(_0x2b965f+_0x183f0e(0x3a7)+_0x1b2698+'\x22',_0x183f0e(0x1ea)),!![];}catch(_0x27e1ee){console['error'](_0x183f0e(0x322),_0x27e1ee),showNotification('Error:\x20'+_0x27e1ee[_0x183f0e(0x25b)],'error');throw _0x27e1ee;}}function showNotification(_0x1df674,_0x35018e='info'){const _0x353224=a2_0x528bb8,_0x377835=document['createElement'](_0x353224(0x389));_0x377835[_0x353224(0x292)]='notification\x20'+_0x35018e,_0x377835['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x35018e)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x1df674+_0x353224(0x369),document[_0x353224(0x328)][_0x353224(0x1a1)](_0x377835),setTimeout(()=>{_0x377835['classList']['add']('active');},0xa);const _0x15b311=setTimeout(()=>{closeNotification(_0x377835);},0x1388);_0x377835['querySelector']('.close-notification')[_0x353224(0x221)]('click',()=>{clearTimeout(_0x15b311),closeNotification(_0x377835);});}function getNotificationIcon(_0x57a210){const _0x5d0091=a2_0x528bb8;switch(_0x57a210){case'success':return _0x5d0091(0x34d);case'error':return _0x5d0091(0x36b);case'warning':return'fa-exclamation-triangle';case _0x5d0091(0x181):default:return _0x5d0091(0x1e5);}}function closeNotification(_0x4ec7f9){const _0x34563f=a2_0x528bb8;_0x4ec7f9['classList']['remove'](_0x34563f(0x1c2)),setTimeout(()=>{_0x4ec7f9['remove']();},0x12c);}function setupUserRolesSection(){const _0x2e51bb=a2_0x528bb8,_0x59e4e6=document['getElementById']('load-users-data');_0x59e4e6&&_0x59e4e6['addEventListener'](_0x2e51bb(0x2f3),function(){const _0x2f84fc=_0x2e51bb;this['classList']['add'](_0x2f84fc(0x2de)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x2930c2=_0x2f84fc;this['classList'][_0x2930c2(0x3b1)]('loading'),this['innerHTML']=_0x2930c2(0x21c);})[_0x2f84fc(0x332)](_0x3db092=>{const _0x2f1b8a=_0x2f84fc;console['error']('Error\x20loading\x20users:',_0x3db092),this[_0x2f1b8a(0x316)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x170856=_0x2f1b8a;this[_0x170856(0x289)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x392e5c=document['getElementById']('add-new-role-btn');_0x392e5c&&_0x392e5c[_0x2e51bb(0x221)]('click',()=>{const _0x5d1ffc=_0x2e51bb,_0x565126=document['getElementById'](_0x5d1ffc(0x350));_0x565126&&_0x565126['classList']['add'](_0x5d1ffc(0x1c2));});const _0x80518b=document['getElementById']('user-search');_0x80518b&&_0x80518b[_0x2e51bb(0x221)]('input',debounce(filterUsersTable,0x12c));const _0x28819a=document['getElementById']('role-filter');_0x28819a&&_0x28819a['addEventListener'](_0x2e51bb(0x35b),filterUsersTable);}async function loadUsersWithRoles(){const _0x386464=a2_0x528bb8,_0x40fbcb=document['getElementById']('users-table-body');if(!_0x40fbcb)return;_0x40fbcb['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0xaacf85,_0x54e42a,_0x1c1f65,_0x4a8eb8]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,_0x386464(0x342))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x51bef3=new Map();function _0x102be5(_0x36dc93,_0x477acd){_0x36dc93['forEach'](_0x966c1a=>{const _0x19f0c9=a2_0x628c,_0x158eea=_0x966c1a['data']();if(!_0x158eea['username'])return;if(!_0x51bef3['has'](_0x158eea['username']))_0x51bef3['set'](_0x158eea[_0x19f0c9(0x187)],{'username':_0x158eea['username'],'roleName':_0x158eea[_0x19f0c9(0x337)]||null,'roleColor':_0x158eea[_0x19f0c9(0x192)]||null,'roleAssignedBy':_0x158eea['roleAssignedBy']||null,'roleAssignedAt':_0x158eea['roleAssignedAt']||null,'sources':[_0x477acd]});else{const _0x19cd16=_0x51bef3['get'](_0x158eea['username']);_0x158eea['roleName']&&(!_0x19cd16['roleName']||_0x477acd==='D1'||_0x477acd==='D2')&&(_0x19cd16['roleName']=_0x158eea[_0x19f0c9(0x337)],_0x19cd16['roleColor']=_0x158eea['roleColor'],_0x19cd16['roleAssignedBy']=_0x158eea['roleAssignedBy'],_0x19cd16['roleAssignedAt']=_0x158eea['roleAssignedAt']),!_0x19cd16['sources']['includes'](_0x477acd)&&_0x19cd16['sources']['push'](_0x477acd);}});}_0x102be5(_0xaacf85,'D1'),_0x102be5(_0x54e42a,'D2'),_0x102be5(_0x1c1f65,_0x386464(0x2a0)),_0x102be5(_0x4a8eb8,_0x386464(0x3b2));const _0x49035c=Array['from'](_0x51bef3['values']())[_0x386464(0x2c9)]((_0x278fed,_0x5a5bee)=>_0x278fed['username'][_0x386464(0x336)](_0x5a5bee['username']));if(_0x49035c[_0x386464(0x199)]===0x0){_0x40fbcb[_0x386464(0x289)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x40fbcb[_0x386464(0x289)]='',_0x49035c['forEach'](_0xeb12b4=>{const _0xf26384=_0x386464,_0xe95d3=document['createElement']('tr');_0xe95d3['dataset']['username']=_0xeb12b4[_0xf26384(0x187)],_0xe95d3[_0xf26384(0x308)]['roleName']=_0xeb12b4['roleName']||'',_0xe95d3[_0xf26384(0x308)][_0xf26384(0x192)]=_0xeb12b4['roleColor']||_0xf26384(0x222);const _0x2ec77f=_0xeb12b4['roleAssignedAt']?new Date(_0xeb12b4['roleAssignedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x190c0e=_0xeb12b4['roleName']?_0xf26384(0x2da)+_0xeb12b4['roleColor']+';\x20color:\x20'+getContrastColor(_0xeb12b4['roleColor'])+';\x22>'+_0xeb12b4[_0xf26384(0x337)]+_0xf26384(0x344):_0xf26384(0x349);_0xe95d3[_0xf26384(0x289)]=_0xf26384(0x1ca)+_0xeb12b4[_0xf26384(0x187)]+'\x20<span\x20class=\x22user-source\x22>('+_0xeb12b4['sources']['join'](',\x20')+_0xf26384(0x1cf)+_0x190c0e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xeb12b4['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2ec77f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0xeb12b4[_0xf26384(0x187)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xeb12b4[_0xf26384(0x337)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0xeb12b4[_0xf26384(0x187)]+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x40fbcb[_0xf26384(0x1a1)](_0xe95d3);}),document[_0x386464(0x2af)]('.edit-role-btn')['forEach'](_0x17384f=>{_0x17384f['addEventListener']('click',()=>{const _0x19700c=_0x17384f['dataset']['username'];openRoleEditModal(_0x19700c);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x34a471=>{const _0x539b38=_0x386464;_0x34a471[_0x539b38(0x221)]('click',()=>{const _0x21dba2=_0x539b38,_0x281c83=_0x34a471[_0x21dba2(0x308)]['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x281c83+'?')&&setUserRole(_0x281c83,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0xf06dea=>console[_0x21dba2(0x391)]('Error\x20removing\x20role:',_0xf06dea));});});}catch(_0x36cc28){console[_0x386464(0x391)]('Error\x20loading\x20users:',_0x36cc28),_0x40fbcb['innerHTML']=_0x386464(0x3d3);}}function openRoleEditModal(_0x22fe08){const _0x5dcb6c=a2_0x528bb8;console[_0x5dcb6c(0x25c)]('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x22fe08);const _0x292dda=document[_0x5dcb6c(0x209)]('set-role-modal'),_0x3d7e5a=document['getElementById']('role-username'),_0x55a5cd=document['getElementById']('user-role');if(!_0x292dda){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert(_0x5dcb6c(0x19b));return;}console[_0x5dcb6c(0x25c)](_0x5dcb6c(0x2ab),_0x292dda);_0x3d7e5a?(_0x3d7e5a['value']=_0x22fe08,console['log'](_0x5dcb6c(0x1c9)+_0x22fe08)):console[_0x5dcb6c(0x243)]('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x9247ec=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x22fe08+'\x22]');if(_0x9247ec&&_0x55a5cd){const _0x1f95bb=_0x9247ec['dataset']['role'];_0x55a5cd[_0x5dcb6c(0x26d)]=_0x1f95bb==='none'?'':_0x1f95bb,console['log'](_0x5dcb6c(0x367)+_0x55a5cd[_0x5dcb6c(0x26d)]+'\x20(based\x20on\x20data-role:\x20'+_0x1f95bb+')');}else{if(!_0x9247ec)console[_0x5dcb6c(0x243)]('Table\x20row\x20for\x20user\x20'+_0x22fe08+'\x20not\x20found.');if(!_0x55a5cd)console[_0x5dcb6c(0x243)](_0x5dcb6c(0x174));if(_0x55a5cd)_0x55a5cd['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x292dda[_0x5dcb6c(0x316)]['add']('active');const _0x5320f6=document['getElementById']('cancel-role-btn');_0x5320f6?(console['log'](_0x5dcb6c(0x3ac)),_0x5320f6['removeEventListener']('click',closeModalHandler),_0x5320f6['addEventListener'](_0x5dcb6c(0x2f3),closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x292dda[_0x5dcb6c(0x2aa)]('click',closeModalBackgroundHandler),_0x292dda[_0x5dcb6c(0x221)]('click',closeModalBackgroundHandler);}function a2_0x628c(_0x5b7108,_0x5ef86d){const _0x1347d3=a2_0x4322();return a2_0x628c=function(_0x55e073,_0x249893){_0x55e073=_0x55e073-0x164;let _0x43229a=_0x1347d3[_0x55e073];return _0x43229a;},a2_0x628c(_0x5b7108,_0x5ef86d);}function closeModalBackgroundHandler(_0x1ab09a){const _0xa6766e=a2_0x528bb8;_0x1ab09a[_0xa6766e(0x200)]===this&&closeModalHandler();}function closeModalHandler(){const _0x33880e=a2_0x528bb8,_0x2a9f56=document['getElementById']('set-role-modal');_0x2a9f56&&(_0x2a9f56['classList'][_0x33880e(0x3b1)]('active'),_0x2a9f56['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x568c14=a2_0x528bb8,_0x3d7a96=document['getElementById']('user-search')?.[_0x568c14(0x26d)][_0x568c14(0x20b)]()||'',_0x19c9f2=document['getElementById'](_0x568c14(0x2dc))?.['value']||'all',_0x4f2138=document[_0x568c14(0x2af)](_0x568c14(0x3c6));let _0x509ec9=0x0;_0x4f2138['forEach'](_0x1a10ff=>{const _0x52fabf=_0x568c14;if(_0x1a10ff['querySelector']('.loading-cell')||_0x1a10ff[_0x52fabf(0x2a5)]('.empty-state')||_0x1a10ff[_0x52fabf(0x2a5)]('.error-state'))return;const _0x5ed1e1=_0x1a10ff['dataset']['username']?.[_0x52fabf(0x20b)]()||'',_0x396184=_0x1a10ff['dataset'][_0x52fabf(0x1fe)]||_0x52fabf(0x3ba),_0x2f132e=_0x5ed1e1['includes'](_0x3d7a96),_0x2ee88f=_0x19c9f2===_0x52fabf(0x167)||_0x396184===_0x19c9f2;_0x2f132e&&_0x2ee88f?(_0x1a10ff['style']['display']='',_0x509ec9++):_0x1a10ff['style']['display']=_0x52fabf(0x3ba);});if(_0x509ec9===0x0&&_0x4f2138['length']>0x0){const _0x576f80=document['getElementById']('users-table-body');if(_0x576f80){if(!_0x576f80['querySelector'](_0x568c14(0x23e))){const _0x38014b=document['createElement']('tr');_0x38014b['classList'][_0x568c14(0x1fa)](_0x568c14(0x1ac)),_0x38014b['innerHTML']=_0x568c14(0x20c),_0x576f80[_0x568c14(0x1a1)](_0x38014b);}}}else{const _0x4e29a0=document[_0x568c14(0x2a5)]('.no-results');_0x4e29a0&&_0x4e29a0[_0x568c14(0x3b1)]();}}function setupManageArticlesSection(){const _0x25eb8e=a2_0x528bb8,_0x470540=document['getElementById']('load-articles-data');_0x470540&&_0x470540['addEventListener']('click',function(){const _0x2903ba=a2_0x628c;this[_0x2903ba(0x316)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x2903ba(0x2f4)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x4de7fc=>{const _0x4fe5bd=_0x2903ba;console['error']('Error\x20loading\x20articles:',_0x4de7fc),this[_0x4fe5bd(0x316)]['remove']('loading'),this['innerHTML']=_0x4fe5bd(0x16c),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x418e60=document['getElementById']('create-new-article-btn');_0x418e60?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x418e60[_0x25eb8e(0x184)]['display']='block',_0x418e60[_0x25eb8e(0x221)]('click',()=>{openArticleModal();})):console['error'](_0x25eb8e(0x1fd));const _0x335d3b=document['getElementById']('article-form');_0x335d3b&&_0x335d3b[_0x25eb8e(0x221)]('submit',_0x32e6a3=>{_0x32e6a3['preventDefault'](),saveArticle();});const _0x422777=document[_0x25eb8e(0x209)]('cancel-article-btn');_0x422777&&_0x422777[_0x25eb8e(0x221)]('click',()=>{closeArticleModal();});const _0x47ee83=document[_0x25eb8e(0x2a5)]('#article-modal\x20.close-btn');_0x47ee83&&_0x47ee83[_0x25eb8e(0x221)]('click',()=>{closeArticleModal();});const _0x15e498=document[_0x25eb8e(0x209)](_0x25eb8e(0x31f));_0x15e498&&_0x15e498['addEventListener']('click',_0x4d2df3=>{const _0x410a84=_0x25eb8e;_0x4d2df3[_0x410a84(0x200)]===_0x15e498&&closeArticleModal();});}async function loadArticles(){const _0x385f7d=a2_0x528bb8,_0x46cca0=document['getElementById']('articles-table-body');if(!_0x46cca0)return;_0x46cca0['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x20d4f1=collection(db,'articles'),_0x201c3e=query(_0x20d4f1,orderBy('createdAt',_0x385f7d(0x1e6))),_0x1e9255=await getDocs(_0x201c3e);if(_0x1e9255['empty']){_0x46cca0['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x46cca0[_0x385f7d(0x289)]='',_0x1e9255['forEach'](_0x253f98=>{const _0x555695=_0x385f7d,_0x5e2576=_0x253f98['data'](),_0x3bc691=document['createElement']('tr'),_0x1b1a7c=_0x5e2576['createdAt']?new Date(_0x5e2576['createdAt']['seconds']*0x3e8)['toLocaleString']():_0x555695(0x1c4);_0x3bc691['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5e2576['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5e2576['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b1a7c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x253f98['id']+_0x555695(0x3cb)+_0x253f98['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x46cca0['appendChild'](_0x3bc691);}),setupArticleActionButtons();}catch(_0x7a450c){console['error']('Error\x20loading\x20articles:',_0x7a450c),_0x46cca0[_0x385f7d(0x289)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x7a450c['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x581463=a2_0x528bb8;document['querySelectorAll'](_0x581463(0x17e))['forEach'](_0x2d721f=>{_0x2d721f['addEventListener']('click',async _0x291443=>{const _0x274870=_0x291443['currentTarget']['dataset']['id'];openArticleModal(_0x274870);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x3fb854=>{_0x3fb854['addEventListener']('click',async _0x35cd6b=>{const _0x4cca7d=_0x35cd6b['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x4cca7d);});});}function openArticleModal(_0x29b595=null){const _0x491d5e=a2_0x528bb8,_0x1130b6=document['getElementById']('article-modal'),_0x3cff77=document['getElementById']('article-modal-title'),_0x4c07e2=document[_0x491d5e(0x209)](_0x491d5e(0x2fd)),_0x539959=document['getElementById']('article-id');_0x4c07e2['reset'](),_0x539959['value']='';if(_0x29b595)_0x3cff77[_0x491d5e(0x24f)]='Edit\x20Article',_0x539959['value']=_0x29b595,loadArticleData(_0x29b595);else{_0x3cff77['textContent']='Create\x20Article';const _0x2ae943=auth['currentUser'];if(_0x2ae943){const _0x2c6a98=document['getElementById']('article-author');if(_0x2c6a98&&_0x2ae943['displayName'])_0x2c6a98[_0x491d5e(0x26d)]=_0x2ae943['displayName'];else _0x2c6a98&&(_0x2c6a98['value']=_0x2ae943[_0x491d5e(0x2a6)]);}}_0x1130b6['classList'][_0x491d5e(0x1fa)]('active');}async function loadArticleData(_0x52e1d0){const _0x5c4d50=a2_0x528bb8;try{const _0x318aac=doc(db,'articles',_0x52e1d0),_0x3eb3d3=await getDoc(_0x318aac);if(!_0x3eb3d3['exists']()){showNotification(_0x5c4d50(0x260),_0x5c4d50(0x391));return;}const _0x250865=_0x3eb3d3['data']();document['getElementById']('article-title')['value']=_0x250865[_0x5c4d50(0x17f)]||'',document[_0x5c4d50(0x209)]('article-author')[_0x5c4d50(0x26d)]=_0x250865['author']||'',document[_0x5c4d50(0x209)]('article-image-url')['value']=_0x250865[_0x5c4d50(0x27b)]||'',document[_0x5c4d50(0x209)]('article-content')['value']=_0x250865['content']||'';}catch(_0x24d279){console['error']('Error\x20loading\x20article\x20data:',_0x24d279),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x5a1dcf=a2_0x528bb8;try{const _0x415e20=document['getElementById']('article-id')['value'],_0x3fbb37=document['getElementById']('article-title')['value']['trim'](),_0x4df558=document[_0x5a1dcf(0x209)]('article-author')['value']['trim'](),_0x43fbaa=document[_0x5a1dcf(0x209)]('article-image-url')['value'][_0x5a1dcf(0x309)](),_0x203fdc=document[_0x5a1dcf(0x209)](_0x5a1dcf(0x26a))['value']['trim']();if(!_0x3fbb37||!_0x203fdc){showNotification(_0x5a1dcf(0x180),_0x5a1dcf(0x391));return;}const _0x523919=auth[_0x5a1dcf(0x17d)];if(!_0x523919){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x3d1a77={'title':_0x3fbb37,'author':_0x4df558,'imageUrl':_0x43fbaa||null,'content':_0x203fdc,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x523919['email']};!_0x415e20?(_0x3d1a77[_0x5a1dcf(0x245)]=serverTimestamp(),_0x3d1a77['createdBy']=_0x523919['email'],await addDoc(collection(db,_0x5a1dcf(0x347)),_0x3d1a77),showNotification('Article\x20created\x20successfully',_0x5a1dcf(0x1ea))):(await updateDoc(doc(db,'articles',_0x415e20),_0x3d1a77),showNotification('Article\x20updated\x20successfully',_0x5a1dcf(0x1ea))),closeArticleModal(),loadArticles();}catch(_0x5757b6){console[_0x5a1dcf(0x391)]('Error\x20saving\x20article:',_0x5757b6),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x5757b6['message'],'error');}}function closeArticleModal(){const _0x4d6bdf=a2_0x528bb8,_0xffaff5=document['getElementById'](_0x4d6bdf(0x31f));_0xffaff5&&_0xffaff5['classList']['remove']('active');}async function confirmDeleteArticle(_0x3d548e){const _0x8732a2=a2_0x528bb8;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x3d548e)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x8732a2(0x1ea));}catch(_0x554c2f){console[_0x8732a2(0x391)]('Error\x20deleting\x20article:',_0x554c2f),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x554c2f['message'],'error');}}function setupTrophyManagementSection(){const _0x53972e=a2_0x528bb8,_0x3fee1e=document[_0x53972e(0x209)]('load-trophies-data');_0x3fee1e&&_0x3fee1e[_0x53972e(0x221)]('click',function(){const _0x50f1a7=_0x53972e;this[_0x50f1a7(0x316)][_0x50f1a7(0x1fa)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x48a070=document[_0x50f1a7(0x209)]('assign-trophy-image');_0x48a070&&(_0x48a070['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x24dfb4=_0x50f1a7;this['classList'][_0x24dfb4(0x3b1)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x16f13e=>{const _0x3db0f7=_0x50f1a7;console['error']('Error\x20loading\x20trophies:',_0x16f13e),this[_0x3db0f7(0x316)]['remove'](_0x3db0f7(0x2de)),this['innerHTML']=_0x3db0f7(0x16c),setTimeout(()=>{const _0x550af6=_0x3db0f7;this['innerHTML']=_0x550af6(0x351);},0xbb8);});});const _0x353e32=document['getElementById']('create-new-trophy-btn');_0x353e32&&_0x353e32['addEventListener']('click',()=>{openTrophyModal();});const _0x5333c7=document[_0x53972e(0x209)]('trophy-form');_0x5333c7&&_0x5333c7[_0x53972e(0x221)](_0x53972e(0x28b),_0x254ef3=>{const _0x53c5ef=_0x53972e;_0x254ef3[_0x53c5ef(0x30b)](),saveTrophyDefinition();});const _0x1753b2=document['getElementById'](_0x53972e(0x383));_0x1753b2&&_0x1753b2[_0x53972e(0x221)]('click',()=>{closeTrophyModal();});document['querySelectorAll'](_0x53972e(0x2a8))['forEach'](_0x45809e=>{_0x45809e['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x70e25=document['getElementById']('trophy-modal');_0x70e25&&_0x70e25[_0x53972e(0x221)](_0x53972e(0x2f3),_0x16d4de=>{const _0x17923c=_0x53972e;_0x16d4de[_0x17923c(0x200)]===_0x70e25&&closeTrophyModal();});const _0x544ecb=document['getElementById']('assign-trophy-modal');_0x544ecb&&_0x544ecb['addEventListener']('click',_0x8e0f88=>{_0x8e0f88['target']===_0x544ecb&&closeAssignTrophyModal();});const _0x2590da=document[_0x53972e(0x209)](_0x53972e(0x3ab));_0x2590da&&_0x2590da[_0x53972e(0x221)]('submit',_0x2249c3=>{_0x2249c3['preventDefault'](),assignTrophyToPlayer();});const _0x5a27c2=document[_0x53972e(0x209)]('cancel-assign-btn');_0x5a27c2&&_0x5a27c2['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x655bac=document['getElementById']('trophy-image-url');_0x655bac&&(_0x655bac['addEventListener'](_0x53972e(0x3d9),updateTrophyImagePreview),_0x655bac['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x188afa=a2_0x528bb8,_0x581604=document['getElementById']('trophy-image-url')['value']['trim'](),_0x55e316=document[_0x188afa(0x209)]('trophy-image-preview');if(!_0x55e316){const _0x41fd79=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x195bf2=document[_0x188afa(0x17b)]('div');_0x195bf2['id']='trophy-image-preview',_0x195bf2['className']=_0x188afa(0x19f),_0x41fd79['appendChild'](_0x195bf2);const _0x593bd3=document[_0x188afa(0x17b)]('img');_0x593bd3['id']='trophy-preview-img',_0x593bd3['alt']='Trophy\x20Preview',_0x593bd3['onerror']=function(){const _0x4cd2e9=_0x188afa;this[_0x4cd2e9(0x38d)]=DEFAULT_TROPHY_IMAGE,this['classList'][_0x4cd2e9(0x1fa)]('error');},_0x195bf2[_0x188afa(0x1a1)](_0x593bd3);}const _0x473bc2=document['getElementById']('trophy-preview-img');_0x581604?(_0x473bc2[_0x188afa(0x38d)]=_0x581604,_0x473bc2['style']['display']='block',_0x473bc2['classList']['remove'](_0x188afa(0x391))):(_0x473bc2['src']=DEFAULT_TROPHY_IMAGE,_0x473bc2['style']['display']='block');}async function loadTrophyDefinitions(){const _0x5d031c=a2_0x528bb8,_0xce81a1=document['getElementById'](_0x5d031c(0x2b2));if(!_0xce81a1)return;_0xce81a1['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x4af317=collection(db,'trophyDefinitions'),_0x6dc9d7=query(_0x4af317,orderBy('createdAt','desc')),_0x4978a1=await getDocs(_0x6dc9d7);if(_0x4978a1['empty']){_0xce81a1[_0x5d031c(0x289)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0xce81a1['innerHTML']='',_0x4978a1['forEach'](_0x3c0de8=>{const _0x513274=_0x5d031c,_0xfe97d8=_0x3c0de8['data'](),_0x9ddc=document['createElement']('tr'),_0x531dc=_0xfe97d8[_0x513274(0x245)]?new Date(_0xfe97d8[_0x513274(0x245)]['seconds']*0x3e8)['toLocaleString']():'N/A';_0x9ddc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0xfe97d8['image']||DEFAULT_TROPHY_IMAGE)+_0x513274(0x24d)+_0xfe97d8[_0x513274(0x211)]+_0x513274(0x237)+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0xfe97d8['name']||'Untitled\x20Trophy')+_0x513274(0x2e8)+(_0xfe97d8['rarity']||'common')+'\x22>'+(_0xfe97d8['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x531dc+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x3c0de8['id']+_0x513274(0x21a)+_0x3c0de8['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x3c0de8['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xce81a1['appendChild'](_0x9ddc);}),setupTrophyActionButtons();}catch(_0x201628){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x201628),_0xce81a1[_0x5d031c(0x289)]=_0x5d031c(0x2cf)+_0x201628['message']+_0x5d031c(0x2f5);}}function setupTrophyActionButtons(){const _0x2fe656=a2_0x528bb8;document['querySelectorAll']('.edit-trophy-btn')[_0x2fe656(0x240)](_0x310ca4=>{const _0x183ad4=_0x2fe656;_0x310ca4['addEventListener'](_0x183ad4(0x2f3),_0xbff619=>{const _0x5b1480=_0xbff619['currentTarget']['dataset']['id'];openTrophyModal(_0x5b1480);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x54da68=>{_0x54da68['addEventListener']('click',_0x1666e9=>{const _0x4adab5=_0x1666e9['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x4adab5);});}),document['querySelectorAll']('.delete-trophy-btn')[_0x2fe656(0x240)](_0x31fca3=>{const _0x42386c=_0x2fe656;_0x31fca3[_0x42386c(0x221)]('click',_0x445ba5=>{const _0x291e6b=_0x445ba5['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x291e6b);});});}function openTrophyModal(_0x5c551c=null){const _0xae3494=a2_0x528bb8,_0x3a7769=document['getElementById'](_0xae3494(0x3d5)),_0x5a936c=document['getElementById']('trophy-modal-title'),_0x4885b0=document[_0xae3494(0x209)]('trophy-form'),_0x3c92b7=document['getElementById']('trophy-id');_0x4885b0['reset'](),_0x3c92b7[_0xae3494(0x26d)]='';const _0x299738=document[_0xae3494(0x209)]('trophy-preview-img');_0x299738&&(_0x299738['src']=DEFAULT_TROPHY_IMAGE,_0x299738[_0xae3494(0x316)]['remove']('error')),_0x5c551c?(_0x5a936c['textContent']='Edit\x20Trophy',_0x3c92b7['value']=_0x5c551c,loadTrophyData(_0x5c551c)):_0x5a936c[_0xae3494(0x24f)]='Create\x20New\x20Trophy',_0x3a7769['classList']['add']('active');}async function loadTrophyData(_0x317ec8){const _0xd1c1b1=a2_0x528bb8;try{const _0x50b1f6=doc(db,'trophyDefinitions',_0x317ec8),_0xd2490d=await getDoc(_0x50b1f6);if(!_0xd2490d['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x33eb69=_0xd2490d['data']();document['getElementById']('trophy-name')['value']=_0x33eb69['name']||'',document['getElementById'](_0xd1c1b1(0x235))['value']=_0x33eb69['description']||'',document['getElementById']('trophy-image-url')[_0xd1c1b1(0x26d)]=_0x33eb69['image']||'',document[_0xd1c1b1(0x209)](_0xd1c1b1(0x166))[_0xd1c1b1(0x26d)]=_0x33eb69['rarity']||'common',updateTrophyImagePreview();}catch(_0x478bf6){console['error']('Error\x20loading\x20trophy\x20data:',_0x478bf6),showNotification(_0xd1c1b1(0x295),'error');}}async function saveTrophyDefinition(){const _0x1e57e0=a2_0x528bb8;try{const _0x2ef113=document['getElementById']('trophy-id')['value'],_0x38d1cf=document['getElementById']('trophy-name')['value']['trim'](),_0x398598=document['getElementById']('trophy-description')['value']['trim'](),_0x20767e=document['getElementById']('trophy-image-url')[_0x1e57e0(0x26d)][_0x1e57e0(0x309)](),_0x12a25b=document['getElementById'](_0x1e57e0(0x166))[_0x1e57e0(0x26d)];if(!_0x38d1cf||!_0x398598||!_0x20767e){showNotification(_0x1e57e0(0x32a),'error');return;}const _0x3ce36e=auth[_0x1e57e0(0x17d)];if(!_0x3ce36e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x4bed4b={'name':_0x38d1cf,'description':_0x398598,'image':_0x20767e,'rarity':_0x12a25b,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x3ce36e['email']};!_0x2ef113?(_0x4bed4b['createdAt']=serverTimestamp(),_0x4bed4b[_0x1e57e0(0x370)]=_0x3ce36e[_0x1e57e0(0x2a6)],await addDoc(collection(db,'trophyDefinitions'),_0x4bed4b),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x2ef113),_0x4bed4b),showNotification(_0x1e57e0(0x28e),'success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0xc5fafd){console['error'](_0x1e57e0(0x236),_0xc5fafd),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0xc5fafd['message'],'error');}}function closeTrophyModal(){const _0xa3fef0=a2_0x528bb8,_0x5e7495=document[_0xa3fef0(0x209)](_0xa3fef0(0x3d5));_0x5e7495&&_0x5e7495['classList']['remove']('active');}async function confirmDeleteTrophy(_0xe78353){const _0x44217e=a2_0x528bb8;if(!_0xe78353){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x1a07d4=auth['currentUser'];if(!_0x1a07d4){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0xe78353),await deleteDoc(doc(db,_0x44217e(0x270),_0xe78353)),showNotification('Trophy\x20definition\x20deleted\x20successfully',_0x44217e(0x1ea)),loadTrophyDefinitions();}catch(_0x579008){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x579008),showNotification(_0x44217e(0x29c)+_0x579008['message'],'error');}}async function openAssignTrophyModal(_0x403577){const _0x104e01=a2_0x528bb8;try{const _0xf94b54=doc(db,_0x104e01(0x270),_0x403577),_0x429c75=await getDoc(_0xf94b54);if(!_0x429c75[_0x104e01(0x3d4)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x19ee70=_0x429c75['data']();document['getElementById']('assign-trophy-id')[_0x104e01(0x26d)]=_0x403577,document['getElementById']('assign-trophy-name')['value']=_0x19ee70['name'],document[_0x104e01(0x209)](_0x104e01(0x1d4))['src']=_0x19ee70['image']||DEFAULT_TROPHY_IMAGE,document['getElementById'](_0x104e01(0x22f))['textContent']=_0x19ee70['name']||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')[_0x104e01(0x24f)]=_0x19ee70['description']||'No\x20description';const _0x4fc3a2=document['getElementById'](_0x104e01(0x2ee));_0x4fc3a2['textContent']=_0x19ee70['rarity']||'common',_0x4fc3a2['className']='trophy-rarity\x20'+(_0x19ee70[_0x104e01(0x2fb)]||'common');const _0x1a33cc=document['getElementById'](_0x104e01(0x3c0));_0x1a33cc['classList']['add']('active');}catch(_0x1fe1f1){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x1fe1f1),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x25d921=a2_0x528bb8,_0x495c2b=document[_0x25d921(0x209)]('assign-trophy-modal');_0x495c2b&&_0x495c2b[_0x25d921(0x316)]['remove'](_0x25d921(0x1c2));}async function assignTrophyToPlayer(){const _0x22f732=a2_0x528bb8;try{const _0x29e9ba=document['getElementById']('assign-trophy-id')['value'],_0x2cff84=document['getElementById']('assign-trophy-name')['value'],_0x3d375f=document['getElementById']('assign-player-username')['value'][_0x22f732(0x309)](),_0x4ff830=document['querySelector'](_0x22f732(0x29e))['value'];if(!_0x29e9ba||!_0x3d375f){showNotification(_0x22f732(0x33f),'error');return;}const _0x2821ae=auth[_0x22f732(0x17d)];if(!_0x2821ae){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies',_0x22f732(0x391));return;}let _0x1bcbd5=null,_0x2bf268=null,_0x551c25=null;if(_0x4ff830===_0x22f732(0x396)){const _0x1b3a18=collection(db,'nonParticipants'),_0x3283f7=query(_0x1b3a18,where('username','==',_0x3d375f)),_0x502400=await getDocs(_0x3283f7);!_0x502400['empty']&&(_0x1bcbd5=_0x502400[_0x22f732(0x2ef)][0x0],_0x2bf268=_0x1bcbd5['id'],_0x551c25=_0x1bcbd5['data']());}else{const _0x37dfe2=_0x4ff830==='D1'?'players':_0x4ff830==='D2'?'playersD2':'playersD3',_0x37199a=collection(db,_0x37dfe2),_0x3f38ed=query(_0x37199a,where('username','==',_0x3d375f)),_0x4bf787=await getDocs(_0x3f38ed);!_0x4bf787['empty']&&(_0x1bcbd5=_0x4bf787['docs'][0x0],_0x2bf268=_0x1bcbd5['id'],_0x551c25=_0x1bcbd5['data']());}if(!_0x1bcbd5){showNotification('Player\x20\x22'+_0x3d375f+'\x22\x20not\x20found\x20in\x20'+(_0x4ff830==='non-participant'?'non-participants':_0x4ff830+_0x22f732(0x2c2)),'error');return;}const _0x4fc6ff=collection(db,'userTrophies'),_0x5cd0ae=query(_0x4fc6ff,where(_0x22f732(0x1e0),'==',_0x2bf268),where(_0x22f732(0x1a3),'==',_0x29e9ba)),_0x556db8=await getDocs(_0x5cd0ae);if(!_0x556db8['empty']){showNotification('Player\x20\x22'+_0x3d375f+_0x22f732(0x366),'warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x2bf268,'playerUsername':_0x3d375f,'trophyId':_0x29e9ba,'awardedAt':serverTimestamp(),'awardedBy':_0x2821ae['email'],'ladder':_0x4ff830}),showNotification('Trophy\x20\x22'+_0x2cff84+'\x22\x20awarded\x20to\x20'+_0x3d375f,'success'),closeAssignTrophyModal();}catch(_0x31e1ad){console[_0x22f732(0x391)]('Error\x20assigning\x20trophy:',_0x31e1ad),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x31e1ad['message'],'error');}}function setupInactivePlayersSection(){const _0x109976=a2_0x528bb8,_0x3fdc14=document[_0x109976(0x209)]('inactive-days-filter');_0x3fdc14&&_0x3fdc14['addEventListener']('change',function(){const _0x136185=document['getElementById']('load-inactive-players-data');if(_0x136185)_0x136185['click']();});const _0x1b55b3=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0xf4a16a=document[_0x109976(0x2a5)]('.ladder-switch\x20input[value=\x22D2\x22]');_0x1b55b3&&_0xf4a16a&&(_0x1b55b3[_0x109976(0x221)]('change',function(){const _0x355b11=_0x109976;if(this[_0x355b11(0x1c6)]){currentLadder='D1';if(document['getElementById']('inactive-players')['style'][_0x355b11(0x287)]!=='none'){const _0x402a45=document['getElementById']('load-inactive-players-data');if(_0x402a45)_0x402a45['click']();}}}),_0xf4a16a['addEventListener']('change',function(){const _0x5c488a=_0x109976;if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')['style'][_0x5c488a(0x287)]!=='none'){const _0x2e1de6=document[_0x5c488a(0x209)]('load-inactive-players-data');if(_0x2e1de6)_0x2e1de6['click']();}}}));const _0xa48128=document['getElementById']('inactive-players-search');_0xa48128&&_0xa48128['addEventListener']('input',debounce(function(){const _0x487950=_0x109976,_0x5481b0=_0xa48128[_0x487950(0x26d)][_0x487950(0x20b)](),_0x460d56=document[_0x487950(0x2af)](_0x487950(0x3be));_0x460d56[_0x487950(0x240)](_0x533fc9=>{const _0x2f2990=_0x487950;if(_0x533fc9['querySelector']('.loading-cell')||_0x533fc9[_0x2f2990(0x2a5)]('.empty-state')||_0x533fc9['querySelector']('.error-state'))return;const _0x106252=_0x533fc9[_0x2f2990(0x3ca)][0x0]?.['textContent'][_0x2f2990(0x20b)]()||'',_0x4f545e=_0x533fc9[_0x2f2990(0x3ca)][0x5]?.['textContent']['toLowerCase']()||'';_0x106252['includes'](_0x5481b0)||_0x4f545e['includes'](_0x5481b0)?_0x533fc9['style'][_0x2f2990(0x287)]='':_0x533fc9['style']['display']='none';});},0x12c)),document['addEventListener'](_0x109976(0x2f3),function(_0x34ea92){const _0x226ce5=_0x109976;if(_0x34ea92[_0x226ce5(0x200)]['closest']('.view-player-btn')){const _0x4605e8=_0x34ea92['target']['closest'](_0x226ce5(0x256)),_0x2cc2de=_0x4605e8['dataset'][_0x226ce5(0x187)];_0x2cc2de&&alert('View\x20player\x20details\x20for\x20'+_0x2cc2de+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x1277ba=a2_0x528bb8,_0x505fc8=document['getElementById']('inactive-players-table-body');if(!_0x505fc8)return;_0x505fc8['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x371d54=document['getElementById']('inactive-days-filter'),_0x1698fb=_0x371d54?parseInt(_0x371d54['value'])||0x0:0x0,_0x20df4d=collection(db,currentLadder==='D1'?_0x1277ba(0x2d9):'playersD2'),_0x28218d=await getDocs(_0x20df4d);if(_0x28218d[_0x1277ba(0x1a5)]){_0x505fc8['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x4d2453=[];_0x28218d[_0x1277ba(0x240)](_0x48fb4a=>{const _0x3e428c=_0x1277ba,_0x3becc4=_0x48fb4a[_0x3e428c(0x39d)]();_0x4d2453[_0x3e428c(0x37d)]({..._0x3becc4,'id':_0x48fb4a['id'],'username':_0x3becc4['username']||_0x3e428c(0x17c)});}),console[_0x1277ba(0x25c)]('Found\x20'+_0x4d2453['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+_0x1277ba(0x2c2));const _0x16e085=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x1b921e=_0x4d2453[_0x1277ba(0x399)](async _0x274f9a=>{const _0x12db4f=_0x1277ba;try{const _0x10b2ef=collection(db,_0x16e085),_0x6fd708=query(_0x10b2ef,or(where('winnerUsername','==',_0x274f9a['username']),where('loserUsername','==',_0x274f9a[_0x12db4f(0x187)])),orderBy('approvedAt','desc'),limit(0x1)),_0x42a70c=await getDocs(_0x6fd708);if(!_0x42a70c[_0x12db4f(0x1a5)]){const _0x170e39=_0x42a70c[_0x12db4f(0x2ef)][0x0]['data'](),_0x39235e=_0x170e39[_0x12db4f(0x320)]?new Date(_0x170e39['approvedAt'][_0x12db4f(0x2d3)]*0x3e8):null,_0x34ca8c=new Date(),_0x55255e=_0x39235e?Math['floor']((_0x34ca8c-_0x39235e)/(0x3e8*0x3c*0x3c*0x18)):null,_0x1fc911=_0x170e39['winnerUsername']===_0x274f9a['username']?_0x170e39['loserUsername']:_0x170e39['winnerUsername'],_0x2d60b7=_0x170e39['winnerUsername']===_0x274f9a['username']?_0x12db4f(0x357):'Lost';return{..._0x274f9a,'lastMatch':{'date':_0x39235e?_0x39235e[_0x12db4f(0x2a1)]():_0x12db4f(0x1c4),'opponent':_0x1fc911||'Unknown','result':_0x2d60b7,'timestamp':_0x39235e||new Date(0x0),'daysSinceMatch':_0x55255e||Number[_0x12db4f(0x210)]}};}else return{..._0x274f9a,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number[_0x12db4f(0x210)]}};}catch(_0x16d0ab){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x274f9a['username']+':',_0x16d0ab),{..._0x274f9a,'lastMatch':{'date':'Error','opponent':_0x12db4f(0x296),'result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x4d99ae=await Promise['all'](_0x1b921e);_0x4d99ae[_0x1277ba(0x2c9)]((_0x40f9b9,_0x5156de)=>_0x5156de['lastMatch']['daysSinceMatch']-_0x40f9b9['lastMatch'][_0x1277ba(0x393)]);_0x1698fb>0x0&&(_0x4d99ae=_0x4d99ae['filter'](_0x18aade=>_0x18aade[_0x1277ba(0x37a)]['daysSinceMatch']>=_0x1698fb));_0x505fc8['innerHTML']='';if(_0x4d99ae['length']===0x0){_0x505fc8['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x4d99ae[_0x1277ba(0x240)](_0x2784c5=>{const _0x27ea57=_0x1277ba,_0x36dd26=document['createElement']('tr'),_0x68b12c=_0x2784c5['lastMatch']['daysSinceMatch']>0x1e?_0x27ea57(0x356):_0x2784c5[_0x27ea57(0x37a)]['daysSinceMatch']>0xe?'moderately-inactive':'';_0x36dd26[_0x27ea57(0x292)]=_0x68b12c,_0x36dd26['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2784c5[_0x27ea57(0x187)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2784c5['eloRating']||0x4b0)+_0x27ea57(0x380)+_0x2784c5['lastMatch']['date']+_0x27ea57(0x380)+(_0x2784c5['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x2784c5['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2784c5['lastMatch']['date']===_0x27ea57(0x33d)?'No\x20matches\x20found':_0x2784c5['lastMatch']['result']+'\x20vs\x20'+_0x2784c5['lastMatch'][_0x27ea57(0x2ae)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x2784c5['username']+_0x27ea57(0x1da),_0x505fc8[_0x27ea57(0x1a1)](_0x36dd26);}),console[_0x1277ba(0x25c)]('Displaying\x20'+_0x4d99ae['length']+_0x1277ba(0x24b));}catch(_0x4f9357){console[_0x1277ba(0x391)]('Error\x20loading\x20inactive\x20players:',_0x4f9357),_0x505fc8['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x4f9357['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x56acbe=a2_0x528bb8;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x1d476f=document['getElementById'](_0x56acbe(0x3a0));_0x1d476f&&_0x1d476f['addEventListener']('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x5f463e=document['getElementById']('create-creator-highlight-btn');_0x5f463e&&_0x5f463e['addEventListener']('click',function(){console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x197ae2=document['getElementById'](_0x56acbe(0x220));_0x197ae2&&_0x197ae2[_0x56acbe(0x221)]('click',function(){const _0x191f28=_0x56acbe;console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x191f28(0x29f));});}function openHighlightModal(_0x582b70='match'){const _0x586a72=a2_0x528bb8;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x582b70);const _0x1dfded=document['getElementById'](_0x586a72(0x376)),_0x37d55d=document['getElementById'](_0x586a72(0x1f5)),_0x2eb103=document['getElementById']('highlight-modal-title'),_0x5f082b=document[_0x586a72(0x209)](_0x586a72(0x18e));if(!_0x1dfded||!_0x37d55d||!_0x2eb103){console[_0x586a72(0x391)](_0x586a72(0x1c1));return;}_0x37d55d['reset'](),_0x5f082b['value']='';const _0x2713a3=['match','creator','achievement'],_0x56c8f1=!_0x2713a3[_0x586a72(0x179)](_0x582b70);if(_0x56c8f1){const _0x5e6440=_0x582b70;_0x5f082b['value']=_0x5e6440,_0x2eb103['textContent']=_0x586a72(0x1f9),loadHighlightDataAdmin(_0x5e6440);}else{const _0x47da87=_0x582b70;document['getElementById'](_0x586a72(0x2e2))['value']=_0x47da87,_0x2eb103[_0x586a72(0x24f)]='Create\x20New\x20'+getHighlightTypeName(_0x47da87),toggleHighlightFields(_0x47da87);const _0x1c10bf=auth['currentUser'];_0x1c10bf&&document['getElementById'](_0x586a72(0x324))&&(document['getElementById']('highlight-submitted-by')['value']=_0x1c10bf['displayName']||_0x1c10bf['email']);}_0x1dfded[_0x586a72(0x316)]['add']('active');}function toggleHighlightFields(_0xf5cb2a){const _0x23494f=a2_0x528bb8;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0xf5cb2a);const _0x1d1699=document['getElementById']('highlight-form');if(!_0x1d1699)return;const _0x4ed496=_0x1d1699['querySelectorAll']('.form-group,\x20.form-row');_0x4ed496['forEach'](_0x20a1b7=>_0x20a1b7['style']['display']=_0x23494f(0x3ba));const _0x2d3ccb=document[_0x23494f(0x209)]('highlight-video-preview-container');if(_0x2d3ccb)_0x2d3ccb['style']['display']='none';const _0x4668bb=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x4668bb['forEach'](_0x28ad9e=>{const _0x5dbe0e=_0x23494f,_0x4704f3=document['getElementById'](_0x28ad9e);if(_0x4704f3)_0x4704f3['style']['display']=_0x5dbe0e(0x2f1);});if(_0xf5cb2a===_0x23494f(0x23a)){const _0x11f58c=['highlight-video-container',_0x23494f(0x32e),'highlight-map-container',_0x23494f(0x2ec),'highlight-players-container','highlight-match-link-container'];_0x11f58c['forEach'](_0x4936fe=>{const _0x23bf9e=_0x23494f,_0x40ec3a=document[_0x23bf9e(0x209)](_0x4936fe);_0x40ec3a&&(_0x4936fe==='highlight-players-container'?_0x40ec3a['style']['display']=_0x23bf9e(0x1ed):_0x40ec3a[_0x23bf9e(0x184)]['display']='block');});const _0x3f04ac=document['getElementById']('highlight-video-id');if(_0x3f04ac){_0x3f04ac[_0x23494f(0x268)]=!![];const _0xde45d6=_0x3f04ac['previousElementSibling'];if(_0xde45d6)_0xde45d6['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x2d3ccb)_0x2d3ccb['style']['display']='block';updateHighlightVideoPreview();}else{if(_0xf5cb2a===_0x23494f(0x2f2)){const _0x1f6066=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container',_0x23494f(0x1f4)];_0x1f6066['forEach'](_0x477469=>{const _0x36f24a=_0x23494f,_0x5cecb4=document['getElementById'](_0x477469);if(_0x5cecb4)_0x5cecb4['style'][_0x36f24a(0x287)]='block';});const _0x3f84a7=document['getElementById']('highlight-video-id');if(_0x3f84a7){_0x3f84a7[_0x23494f(0x268)]=![];const _0x194ef3=_0x3f84a7['previousElementSibling'];if(_0x194ef3)_0x194ef3['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0xf5cb2a===_0x23494f(0x29f)){const _0x4aa8ff=['highlight-achievement-player-container','highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container',_0x23494f(0x1f4)];_0x4aa8ff['forEach'](_0x43ab38=>{const _0x501298=document['getElementById'](_0x43ab38);if(_0x501298)_0x501298['style']['display']='block';});const _0x1a1fd2=document[_0x23494f(0x209)](_0x23494f(0x343));if(_0x1a1fd2){_0x1a1fd2['required']=![];const _0x20f92b=_0x1a1fd2['previousElementSibling'];if(_0x20f92b)_0x20f92b['innerHTML']=_0x23494f(0x377);}}}}}async function loadHighlightDataAdmin(_0x4abbdb){const _0x2b0eb0=a2_0x528bb8;try{const _0x2a4d71=doc(db,'highlights',_0x4abbdb),_0x36b074=await getDoc(_0x2a4d71);if(!_0x36b074['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x38e2f2=_0x36b074['data'](),_0x386d9d=_0x38e2f2['type']||'match';document['getElementById']('highlight-modal-title')[_0x2b0eb0(0x24f)]='Edit\x20'+getHighlightTypeName(_0x386d9d),document['getElementById']('highlight-type')['value']=_0x386d9d,toggleHighlightFields(_0x386d9d),document['getElementById']('highlight-title')['value']=_0x38e2f2['title']||'',document['getElementById']('highlight-description')['value']=_0x38e2f2['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x38e2f2[_0x2b0eb0(0x2d7)]||'';_0x38e2f2['videoId']&&(document['getElementById']('highlight-video-id')[_0x2b0eb0(0x26d)]=_0x38e2f2['videoId'],updateHighlightVideoPreview());if(_0x386d9d===_0x2b0eb0(0x23a)){document['getElementById']('highlight-match-info')['value']=_0x38e2f2['matchInfo']||'',document[_0x2b0eb0(0x209)](_0x2b0eb0(0x2bb))['value']=_0x38e2f2[_0x2b0eb0(0x399)]||'';if(_0x38e2f2['matchDate']){const _0x3ab5af=new Date(_0x38e2f2[_0x2b0eb0(0x30e)]['seconds']*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x3ab5af['toISOString']()[_0x2b0eb0(0x34c)]('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x38e2f2['winnerName']||'',document[_0x2b0eb0(0x209)]('highlight-winner-score')[_0x2b0eb0(0x26d)]=_0x38e2f2[_0x2b0eb0(0x3dd)]||'',document['getElementById']('highlight-loser-name')[_0x2b0eb0(0x26d)]=_0x38e2f2[_0x2b0eb0(0x2ca)]||'',document['getElementById']('highlight-loser-score')['value']=_0x38e2f2[_0x2b0eb0(0x3b9)]||'',document[_0x2b0eb0(0x209)]('highlight-match-link')['value']=_0x38e2f2[_0x2b0eb0(0x392)]||'';}else{if(_0x386d9d==='creator')document['getElementById']('highlight-map')[_0x2b0eb0(0x26d)]=_0x38e2f2['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x38e2f2['mapCreator']||'',document[_0x2b0eb0(0x209)](_0x2b0eb0(0x1bd))['value']=_0x38e2f2[_0x2b0eb0(0x359)]||'',document['getElementById']('highlight-creator-image')['value']=_0x38e2f2[_0x2b0eb0(0x2b6)]||'';else _0x386d9d==='achievement'&&(document[_0x2b0eb0(0x209)](_0x2b0eb0(0x201))[_0x2b0eb0(0x26d)]=_0x38e2f2['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x38e2f2['achievementType']||'',document['getElementById'](_0x2b0eb0(0x28f))['value']=_0x38e2f2[_0x2b0eb0(0x2eb)]||'',document['getElementById']('highlight-player-profile')['value']=_0x38e2f2['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')[_0x2b0eb0(0x26d)]=_0x38e2f2['achievementImageUrl']||'');}}catch(_0x1d0be1){console[_0x2b0eb0(0x391)]('Error\x20loading\x20highlight:',_0x1d0be1),showNotification('Error\x20loading\x20highlight:\x20'+_0x1d0be1['message'],'error');}}async function saveHighlight(){const _0x1c1d9f=a2_0x528bb8;try{const _0x84dd7e=document['getElementById']('highlight-id')?.[_0x1c1d9f(0x26d)]||'',_0x4add7d=document['getElementById']('highlight-type')?.['value']||'match',_0x50f270={'title':document['getElementById']('highlight-title')?.['value']?.[_0x1c1d9f(0x309)]()||'','description':document[_0x1c1d9f(0x209)]('highlight-description')?.['value']?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.[_0x1c1d9f(0x26d)]?.['trim']()||'','videoId':document[_0x1c1d9f(0x209)](_0x1c1d9f(0x343))?.['value']?.['trim']()||null,'type':_0x4add7d};if(!_0x50f270['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x4add7d==='match'){_0x50f270['matchInfo']=document[_0x1c1d9f(0x209)]('highlight-match-info')?.[_0x1c1d9f(0x26d)]?.['trim']()||'',_0x50f270['map']=document['getElementById'](_0x1c1d9f(0x2bb))?.[_0x1c1d9f(0x26d)]?.['trim']()||'';const _0x34572d=document[_0x1c1d9f(0x209)](_0x1c1d9f(0x280)),_0x18cdc4=_0x34572d?.[_0x1c1d9f(0x26d)]||'';_0x50f270['matchDate']=_0x18cdc4?Timestamp[_0x1c1d9f(0x388)](new Date(_0x18cdc4)):null,_0x50f270['winnerName']=document['getElementById']('highlight-winner-name')?.['value']?.['trim']()||'',_0x50f270[_0x1c1d9f(0x3dd)]=document['getElementById'](_0x1c1d9f(0x26c))?.['value']?.[_0x1c1d9f(0x309)]()||'',_0x50f270['loserName']=document[_0x1c1d9f(0x209)]('highlight-loser-name')?.['value']?.['trim']()||'',_0x50f270['loserScore']=document[_0x1c1d9f(0x209)]('highlight-loser-score')?.['value']?.[_0x1c1d9f(0x309)]()||'',_0x50f270['matchLink']=document[_0x1c1d9f(0x209)]('highlight-match-link')?.['value']?.[_0x1c1d9f(0x309)]()||'';if(!_0x50f270[_0x1c1d9f(0x25d)]){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights',_0x1c1d9f(0x391));return;}}else{if(_0x4add7d==='creator'){_0x50f270['map']=document['getElementById'](_0x1c1d9f(0x2bb))?.[_0x1c1d9f(0x26d)]?.[_0x1c1d9f(0x309)]()||'',_0x50f270['mapCreator']=document['getElementById'](_0x1c1d9f(0x37f))?.['value']?.['trim']()||'',_0x50f270['mapVersion']=document['getElementById']('highlight-map-version')?.[_0x1c1d9f(0x26d)]?.['trim']()||'',_0x50f270['creatorImageUrl']=document['getElementById'](_0x1c1d9f(0x1fb))?.['value']?.['trim']()||'';if(!_0x50f270[_0x1c1d9f(0x3bd)]){showNotification(_0x1c1d9f(0x271),'error');return;}}else{if(_0x4add7d==='achievement'){_0x50f270['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.['value']?.['trim']()||'',_0x50f270['achievementType']=document['getElementById']('highlight-achievement-type')?.[_0x1c1d9f(0x26d)]?.['trim']()||'',_0x50f270[_0x1c1d9f(0x2eb)]=document[_0x1c1d9f(0x209)]('highlight-achievement-details')?.[_0x1c1d9f(0x26d)]?.['trim']()||'',_0x50f270[_0x1c1d9f(0x165)]=document[_0x1c1d9f(0x209)](_0x1c1d9f(0x1ef))?.[_0x1c1d9f(0x26d)]?.['trim']()||'',_0x50f270['achievementImageUrl']=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x50f270['achievementPlayer']){showNotification(_0x1c1d9f(0x177),'error');return;}}}}_0x84dd7e?(_0x50f270['updatedAt']=serverTimestamp(),await updateDoc(doc(db,_0x1c1d9f(0x33c),_0x84dd7e),_0x50f270),showNotification('Highlight\x20updated\x20successfully!',_0x1c1d9f(0x1ea))):(_0x50f270['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x50f270),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x1a57a1){console['error']('Error\x20saving\x20highlight:',_0x1a57a1),showNotification(_0x1c1d9f(0x26b)+_0x1a57a1[_0x1c1d9f(0x25b)],'error');}}function closeHighlightModal(){const _0x42868f=a2_0x528bb8,_0x4e0284=document[_0x42868f(0x209)](_0x42868f(0x376));if(_0x4e0284)_0x4e0284['classList']['remove']('active');}function getHighlightTypeName(_0x10a6ca){const _0x56d923=a2_0x528bb8;switch(_0x10a6ca){case _0x56d923(0x23a):return'Match\x20Highlight';case _0x56d923(0x2f2):return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x2e6b39=a2_0x528bb8,_0xea9157=document['getElementById']('highlight-video-id'),_0x19df76=document['getElementById']('highlight-video-preview-container'),_0x16f4b8=document['getElementById']('highlight-video-preview');if(!_0xea9157||!_0x16f4b8||!_0x19df76)return;const _0x3e7689=_0xea9157['value'][_0x2e6b39(0x309)]();_0x3e7689&&/^[a-zA-Z0-9_-]{11}$/[_0x2e6b39(0x2f8)](_0x3e7689)?(_0x16f4b8['src']=_0x2e6b39(0x190)+_0x3e7689,_0x19df76['style']['display']='block'):(_0x16f4b8['src']='',_0x19df76['style']['display']='none');}async function loadHighlightsAdmin(){const _0x30d46f=a2_0x528bb8,_0x1739e2=document['getElementById']('highlights-table-body');if(!_0x1739e2)return;_0x1739e2['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x2472c7=query(collection(db,'highlights'),orderBy('createdAt','desc')),_0x2ed39d=await getDocs(_0x2472c7);if(_0x2ed39d['empty']){_0x1739e2[_0x30d46f(0x289)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x1739e2['innerHTML']='',_0x2ed39d['forEach'](_0x222906=>{const _0x203fd8=_0x30d46f,_0x4d581b=_0x222906[_0x203fd8(0x39d)](),_0x1c319a=document['createElement']('tr'),_0x27ec06=_0x4d581b['createdAt']?new Date(_0x4d581b['createdAt']['seconds']*0x3e8)['toLocaleDateString']():_0x203fd8(0x1c4);let _0x4be75e='Unknown',_0x4f3dc0='';switch(_0x4d581b['type']){case'match':_0x4be75e=_0x203fd8(0x2e4),_0x4f3dc0='match-type';break;case _0x203fd8(0x2f2):_0x4be75e=_0x203fd8(0x353),_0x4f3dc0='creator-type';break;case'achievement':_0x4be75e=_0x203fd8(0x35c),_0x4f3dc0=_0x203fd8(0x28d);break;}_0x1c319a[_0x203fd8(0x289)]=_0x203fd8(0x1ca)+(_0x4d581b['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x4f3dc0+'\x22>'+_0x4be75e+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x27ec06+_0x203fd8(0x380)+(_0x4d581b['submittedBy']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4d581b['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x222906['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x222906['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1739e2[_0x203fd8(0x1a1)](_0x1c319a);}),document['querySelectorAll'](_0x30d46f(0x3dc))['forEach'](_0x3f06ce=>{const _0x38ab26=_0x30d46f;_0x3f06ce['addEventListener'](_0x38ab26(0x2f3),_0x5635d5=>{const _0x1a7dbb=_0x38ab26;openHighlightModal(_0x5635d5[_0x1a7dbb(0x284)][_0x1a7dbb(0x308)]['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x4b9a19=>{_0x4b9a19['addEventListener']('click',_0x86cf1=>{const _0x27008a=a2_0x628c;confirmDeleteHighlight(_0x86cf1['currentTarget'][_0x27008a(0x308)]['id']);});});}catch(_0x4890c8){console['error'](_0x30d46f(0x1de),_0x4890c8),_0x1739e2[_0x30d46f(0x289)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x4890c8[_0x30d46f(0x25b)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x5d7fff){const _0x597485=a2_0x528bb8;if(confirm(_0x597485(0x191)))try{await deleteDoc(doc(db,'highlights',_0x5d7fff)),showNotification('Highlight\x20deleted\x20successfully',_0x597485(0x1ea)),loadHighlightsAdmin();}catch(_0x47298d){console[_0x597485(0x391)]('Error\x20deleting\x20highlight:',_0x47298d),showNotification(_0x597485(0x1c3)+_0x47298d['message'],'error');}}function setupCreateTestMatchModal(){const _0x527377=a2_0x528bb8;console['log'](_0x527377(0x175));const _0x3398c7=document['getElementById'](_0x527377(0x297)),_0x2b6389=document['getElementById']('create-test-match-form');if(!_0x3398c7){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x2b6389){console[_0x527377(0x391)]('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x20d820=_0x3398c7['cloneNode'](!![]);_0x3398c7[_0x527377(0x3b0)]['replaceChild'](_0x20d820,_0x3398c7);const _0x4edb61=_0x20d820['querySelector']('#create-test-match-form');_0x20d820[_0x527377(0x221)]('click',function(_0x3d04d1){_0x3d04d1['target']===_0x20d820&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x4a2b61=_0x20d820['querySelector'](_0x527377(0x2c7));_0x4a2b61&&_0x4a2b61[_0x527377(0x221)](_0x527377(0x2f3),function(_0x12103f){_0x12103f['preventDefault'](),_0x12103f['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x432468=_0x20d820['querySelector']('#cancel-create-test-match-btn');_0x432468&&_0x432468[_0x527377(0x221)]('click',function(_0x16ccfd){const _0x1dcefc=_0x527377;_0x16ccfd['preventDefault'](),_0x16ccfd[_0x1dcefc(0x22a)](),console[_0x1dcefc(0x25c)](_0x1dcefc(0x27d)),closeCreateTestMatchModal();});if(_0x4edb61){_0x4edb61['addEventListener']('submit',function(_0x4095be){const _0x581ba4=_0x527377;_0x4095be[_0x581ba4(0x30b)](),_0x4095be[_0x581ba4(0x22a)](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x42e6e9=_0x4edb61['querySelector']('button[type=\x22submit\x22]');_0x42e6e9&&_0x42e6e9[_0x527377(0x221)]('click',function(_0x1e8cef){_0x1e8cef['preventDefault'](),_0x1e8cef['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x527377(0x25c)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x13b30f=a2_0x528bb8;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x38eb46=document['getElementById']('highlight-form');_0x38eb46&&_0x38eb46['addEventListener']('submit',_0x27c3db=>{_0x27c3db['preventDefault'](),saveHighlight();});const _0x13c123=document['getElementById']('cancel-highlight-btn');_0x13c123&&_0x13c123['addEventListener']('click',closeHighlightModal);const _0x4b5632=document['querySelector']('#highlight-modal\x20.close-btn');_0x4b5632&&_0x4b5632['addEventListener'](_0x13b30f(0x2f3),closeHighlightModal);const _0x5ad62f=document['getElementById'](_0x13b30f(0x376));_0x5ad62f&&_0x5ad62f[_0x13b30f(0x221)]('click',_0x451c9e=>{_0x451c9e['target']===_0x5ad62f&&closeHighlightModal();});const _0x1db956=document[_0x13b30f(0x209)]('highlight-video-id');_0x1db956&&_0x1db956[_0x13b30f(0x221)]('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x347cb8=a2_0x528bb8;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x35c058=document['getElementById']('matches-prev-page'),_0x36eb4d=document['getElementById']('matches-next-page');_0x35c058&&_0x35c058['addEventListener']('click',()=>{const _0x1ec7bf=a2_0x628c,_0x2ab328=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x2ab328][_0x1ec7bf(0x3c5)]-0x1);});_0x36eb4d&&_0x36eb4d['addEventListener']('click',()=>{const _0x57c328=a2_0x628c,_0x26b177=currentLadder[_0x57c328(0x20b)]();loadMatchesData(matchesPagination[_0x26b177][_0x57c328(0x3c5)]+0x1);});const _0x31421c=document['getElementById']('apply-matches-filters'),_0x557839=document['getElementById'](_0x347cb8(0x18c));_0x31421c&&_0x31421c['addEventListener']('click',applyMatchesFilters);_0x557839&&_0x557839[_0x347cb8(0x221)]('click',resetMatchesFilters);const _0x2c1827=document['getElementById']('matches-search');_0x2c1827&&_0x2c1827['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x5b3424=document['getElementById'](_0x347cb8(0x39e));_0x5b3424&&_0x5b3424[_0x347cb8(0x221)]('click',openResimulateModal);const _0x13f498=document['getElementById']('resimulate-modal');if(_0x13f498){const _0xa5f739=_0x13f498['querySelector'](_0x347cb8(0x2a4));_0xa5f739&&_0xa5f739[_0x347cb8(0x221)]('click',closeResimulateModal),_0x13f498[_0x347cb8(0x221)]('click',_0x35a9bb=>{_0x35a9bb['target']===_0x13f498&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x2b1a3a=a2_0x528bb8;console[_0x2b1a3a(0x25c)](_0x2b1a3a(0x31d));const _0x2d893f=document['getElementById'](_0x2b1a3a(0x297)),_0x5b637e=document['getElementById']('create-test-match-form');if(!_0x2d893f){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x5b637e){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification(_0x2b1a3a(0x20a),_0x2b1a3a(0x391));return;}_0x5b637e['reset']();const _0x5f495b=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0xede8b2=![];_0x5f495b['forEach'](_0x5cf32d=>{const _0x2ebd0b=_0x2b1a3a;console['log']('Found\x20radio\x20with\x20value:',_0x5cf32d['value']),_0x5cf32d['value']===currentLadder&&(_0x5cf32d[_0x2ebd0b(0x1c6)]=!![],_0xede8b2=!![],console[_0x2ebd0b(0x25c)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0xede8b2){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x299d8c=document['querySelector'](_0x2b1a3a(0x164));_0x299d8c&&(_0x299d8c['checked']=!![],console['log'](_0x2b1a3a(0x3a6)));}const _0x33f9e1=document['getElementById'](_0x2b1a3a(0x23d));if(_0x33f9e1){const _0x271efc=new Date()[_0x2b1a3a(0x3a8)]()['split']('T')[0x0];_0x33f9e1[_0x2b1a3a(0x26d)]=_0x271efc;}_0x2d893f['style']['display']='flex',_0x2d893f['style']['visibility']=_0x2b1a3a(0x26e),_0x2d893f['style'][_0x2b1a3a(0x375)]='1',_0x2d893f[_0x2b1a3a(0x316)][_0x2b1a3a(0x1fa)]('active'),console['log'](_0x2b1a3a(0x215));const _0x83c57e=document['getElementById'](_0x2b1a3a(0x2db));_0x83c57e&&setTimeout(()=>{const _0x4d6ecf=_0x2b1a3a;_0x83c57e[_0x4d6ecf(0x1f6)]();},0x64);}function closeCreateTestMatchModal(){const _0x594d57=a2_0x528bb8;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x262f3d=document[_0x594d57(0x209)]('create-test-match-modal');if(!_0x262f3d){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x262f3d['classList'][_0x594d57(0x3b1)]('active'),_0x262f3d['style']['opacity']='0',_0x262f3d['style']['visibility']='hidden',setTimeout(()=>{const _0xbe5041=_0x594d57;!_0x262f3d['classList'][_0xbe5041(0x28a)]('active')&&(_0x262f3d['style']['display']='none');},0x12c),console[_0x594d57(0x25c)]('Modal\x20closed');}async function createTestMatch(){const _0x1acb39=a2_0x528bb8;console[_0x1acb39(0x25c)](_0x1acb39(0x346));try{const _0x69a6f3=auth['currentUser'];if(!_0x69a6f3){showNotification(_0x1acb39(0x2dd),'error');return;}const _0x5782e3='D1',_0x4a1490='approvedMatches',_0x5113da={'winnerUsername':_0x1acb39(0x3bc),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x1acb39(0x1ee),'approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x69a6f3['email'],'createdAt':serverTimestamp(),'createdBy':_0x69a6f3['email'],'isTestMatch':!![],'ladder':_0x5782e3,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x69a6f3['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x4a1490),_0x5113da),showNotification(_0x1acb39(0x340),'success'),closeCreateTestMatchModal();}catch(_0x2737d2){console['error'](_0x1acb39(0x196),_0x2737d2),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x2737d2[_0x1acb39(0x25b)],'error');}}window['testFirebaseConnection']=async function(){const _0x5a7ba0=a2_0x528bb8;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console[_0x5a7ba0(0x25c)]('DB:',db),console[_0x5a7ba0(0x25c)]('Current\x20user:',auth[_0x5a7ba0(0x17d)]);const _0x2371eb=collection(db,_0x5a7ba0(0x2d9));console['log']('Collection\x20reference\x20created:',_0x2371eb);const _0x2480bd=query(_0x2371eb,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x2480bd);const _0x4ee79e=await getDocs(_0x2480bd);console[_0x5a7ba0(0x25c)](_0x5a7ba0(0x38e),_0x4ee79e['empty']),console['log'](_0x5a7ba0(0x19d));}catch(_0x59fe6a){console['error']('Firebase\x20connection\x20test\x20failed:',_0x59fe6a);}};function setupCreateTestMatchButton(){const _0x3e9813=a2_0x528bb8,_0x480233=document['getElementById']('create-test-match-btn');if(!_0x480233){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x17ec3c=_0x480233['cloneNode'](!![]);_0x480233['parentNode'][_0x3e9813(0x3a3)](_0x17ec3c,_0x480233),_0x17ec3c['addEventListener']('click',function(_0x1529be){const _0x4ac6a7=_0x3e9813;_0x1529be['preventDefault'](),_0x1529be['stopPropagation'](),console[_0x4ac6a7(0x25c)](_0x4ac6a7(0x18f)),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x5708ce=0x1){const _0x21a323=a2_0x528bb8,_0x826839=document['getElementById'](_0x21a323(0x37b));if(!_0x826839)return;_0x826839[_0x21a323(0x289)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x52111c=currentLadder['toLowerCase'](),_0x33bf41=matchesPagination[_0x52111c],_0x4eaa9b=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x16151b=collection(db,_0x4eaa9b);_0x5708ce<=0x1?(_0x33bf41['page']=0x1,_0x33bf41['firstVisible']=null,_0x33bf41['lastVisible']=null):_0x33bf41[_0x21a323(0x3c5)]=_0x5708ce;const _0x358ede=getMatchesFilters();let _0x28c3a3=_0x16151b;if(_0x358ede[_0x21a323(0x3aa)]||_0x358ede['endDate']||_0x358ede[_0x21a323(0x31e)]){let _0x9200b6=[];_0x358ede['startDate']&&_0x358ede['endDate']?(_0x9200b6['push'](where('approvedAt','>=',_0x358ede['startDate']),where('approvedAt','<=',_0x358ede['endDate'])),_0x28c3a3=query(_0x16151b,..._0x9200b6)):_0x28c3a3=query(_0x16151b,orderBy('approvedAt','desc'));}else _0x28c3a3=query(_0x16151b,orderBy('approvedAt','desc'));_0x5708ce>0x1&&_0x33bf41['lastVisible']?_0x28c3a3=query(_0x28c3a3,startAfter(_0x33bf41[_0x21a323(0x2cc)]),limit(PAGE_SIZE)):_0x28c3a3=query(_0x28c3a3,limit(PAGE_SIZE));const _0x1e0976=await getDocs(_0x28c3a3);!_0x1e0976['empty']&&(_0x33bf41[_0x21a323(0x311)]=_0x1e0976['docs'][0x0],_0x33bf41['lastVisible']=_0x1e0976['docs'][_0x1e0976['docs']['length']-0x1]);let _0x3c87e1=![];if(!_0x1e0976['empty']){const _0x5e1745=query(_0x28c3a3,startAfter(_0x33bf41[_0x21a323(0x2cc)]),limit(0x1)),_0x36f29=await getDocs(_0x5e1745);_0x3c87e1=!_0x36f29['empty'];}const _0x58026d=document['getElementById']('matches-prev-page'),_0x464248=document[_0x21a323(0x209)]('matches-next-page'),_0x3e3d8b=document['getElementById']('matches-page-indicator');if(_0x58026d)_0x58026d['disabled']=_0x33bf41['page']<=0x1;if(_0x464248)_0x464248[_0x21a323(0x205)]=!_0x3c87e1;if(_0x3e3d8b)_0x3e3d8b[_0x21a323(0x24f)]='Page\x20'+_0x33bf41[_0x21a323(0x3c5)];if(_0x1e0976['empty']){_0x826839[_0x21a323(0x289)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x826839['innerHTML']='',_0x1e0976['forEach'](_0x1d2a87=>{const _0x5ed909=_0x21a323,_0x326f30=_0x1d2a87[_0x5ed909(0x39d)](),_0x4ef644=document[_0x5ed909(0x17b)]('tr'),_0x47b6be=_0x326f30['approvedAt']?new Date(_0x326f30['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x4ef644[_0x5ed909(0x374)](_0x5ed909(0x22c),_0x1d2a87['id']),_0x4ef644['setAttribute'](_0x5ed909(0x2d1),currentLadder),_0x4ef644[_0x5ed909(0x316)]['add']('match-row'),_0x4ef644['innerHTML']=_0x5ed909(0x1ca)+_0x47b6be+_0x5ed909(0x38c)+(_0x326f30[_0x5ed909(0x24a)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x326f30['loserUsername']||_0x5ed909(0x35d))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x326f30['winnerScore']||0x0)+'\x20-\x20'+(_0x326f30['loserScore']||0x0)+_0x5ed909(0x27a)+(_0x326f30['mapPlayed']||_0x5ed909(0x1c4))+_0x5ed909(0x39c)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x1d2a87['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x1d2a87['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x826839['appendChild'](_0x4ef644);}),setupMatchesActionButtons(),_0x358ede['searchTerm']&&filterMatchesTable(),console[_0x21a323(0x25c)]('Loaded\x20'+_0x1e0976['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x33bf41[_0x21a323(0x3c5)]);}catch(_0x21445d){console[_0x21a323(0x391)]('Error\x20loading\x20matches:',_0x21445d),_0x826839['innerHTML']=_0x21a323(0x261)+_0x21445d['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x1c4421,_0x3b3f16){const _0x106eb3=a2_0x528bb8;try{console['log']('Deleting\x20match\x20'+_0x1c4421+'\x20from\x20'+_0x3b3f16+'\x20ladder');const _0x18b022=auth['currentUser'];if(!_0x18b022){showNotification(_0x106eb3(0x34e),'error');return;}const _0x183dd9=_0x3b3f16==='D1'?_0x106eb3(0x29a):_0x3b3f16==='D2'?'approvedMatchesD2':_0x106eb3(0x1f3);console['log'](_0x106eb3(0x2c6)+_0x183dd9),showNotification(_0x106eb3(0x3c8),_0x106eb3(0x181)),await deleteDoc(doc(db,_0x183dd9,_0x1c4421)),console[_0x106eb3(0x25c)]('Match\x20deleted\x20successfully'),showNotification(_0x106eb3(0x3d8),'success');const _0x3e6b81=_0x3b3f16['toLowerCase']();loadMatchesData(matchesPagination[_0x3e6b81][_0x106eb3(0x3c5)]);}catch(_0x47e9a4){console['error']('Error\x20deleting\x20match:',_0x47e9a4),showNotification(_0x106eb3(0x303)+_0x47e9a4['message'],_0x106eb3(0x391));}}function setupMatchesActionButtons(){const _0xb39b3c=a2_0x528bb8;console[_0xb39b3c(0x25c)](_0xb39b3c(0x250)),document['querySelectorAll']('.edit-match-btn')[_0xb39b3c(0x240)](_0x4b7bcf=>{_0x4b7bcf['addEventListener']('click',_0x162918=>{const _0xd18f0d=a2_0x628c;_0x162918[_0xd18f0d(0x30b)](),_0x162918[_0xd18f0d(0x22a)]();const _0x1e78c5=_0x162918['currentTarget']['dataset']['id'],_0x59f6b6=_0x162918['currentTarget']['closest']('tr'),_0x4ba400=_0x59f6b6['dataset']['ladder'];console['log']('Edit\x20match\x20clicked:',_0x1e78c5,_0x4ba400),openEditMatchModal(_0x1e78c5,_0x4ba400);});}),document['querySelectorAll'](_0xb39b3c(0x1e2))[_0xb39b3c(0x240)](_0x35adca=>{_0x35adca['addEventListener']('click',_0x2799d1=>{const _0x2c5011=a2_0x628c;_0x2799d1['preventDefault'](),_0x2799d1['stopPropagation']();const _0x42d797=_0x2799d1['currentTarget'][_0x2c5011(0x308)]['id'],_0x17a637=_0x2799d1[_0x2c5011(0x284)][_0x2c5011(0x1b1)]('tr'),_0x28f59d=_0x17a637[_0x2c5011(0x308)]['ladder']||currentLadder;console[_0x2c5011(0x25c)]('Delete\x20match\x20clicked:',_0x42d797,_0x28f59d),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x42d797,_0x28f59d);});}),console[_0xb39b3c(0x25c)]('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x2f16f1=a2_0x528bb8,_0x43f8e3=document[_0x2f16f1(0x209)]('matches-search')[_0x2f16f1(0x26d)][_0x2f16f1(0x20b)](),_0xc71fa9=document['querySelectorAll'](_0x2f16f1(0x227));let _0x18e2a2=0x0;_0xc71fa9['forEach'](_0x55e169=>{const _0x54de23=_0x2f16f1;if(_0x55e169[_0x54de23(0x316)]['contains'](_0x54de23(0x224))||_0x55e169['classList']['contains']('empty-state')||_0x55e169['classList']['contains']('error-state'))return;const _0x548d7b=_0x55e169['cells'][0x1]['textContent']['toLowerCase'](),_0x27a980=_0x55e169['cells'][0x2]['textContent']['toLowerCase'](),_0x2f6a8f=_0x55e169['cells'][0x4]['textContent']['toLowerCase']();_0x548d7b[_0x54de23(0x179)](_0x43f8e3)||_0x27a980['includes'](_0x43f8e3)||_0x2f6a8f[_0x54de23(0x179)](_0x43f8e3)?(_0x55e169['style']['display']='',_0x18e2a2++):_0x55e169['style']['display']='none';});if(_0x18e2a2===0x0&&_0xc71fa9['length']>0x0){const _0x38580f=document[_0x2f16f1(0x209)]('matches-table-body'),_0x2f53df=_0x38580f['querySelector']('.no-results');if(!_0x2f53df){const _0x4143ce=document['createElement']('tr');_0x4143ce['className']=_0x2f16f1(0x1ac),_0x4143ce['innerHTML']=_0x2f16f1(0x30a)+_0x43f8e3+_0x2f16f1(0x3c2),_0x38580f[_0x2f16f1(0x1a1)](_0x4143ce);}}else{const _0x2dd0ba=document[_0x2f16f1(0x2a5)]('.no-results');_0x2dd0ba&&_0x2dd0ba['remove']();}}function getMatchesFilters(){const _0x4f267c=a2_0x528bb8,_0x922674=document['getElementById']('matches-search')[_0x4f267c(0x26d)]['toLowerCase'](),_0x1385cc=document[_0x4f267c(0x209)]('matches-start-date')['value'],_0x3f4a9f=document['getElementById']('matches-end-date')['value'];let _0x41b6ed=null,_0x9ed540=null;return _0x1385cc&&(_0x41b6ed=new Date(_0x1385cc),_0x41b6ed['setHours'](0x0,0x0,0x0,0x0),_0x41b6ed=Timestamp['fromDate'](_0x41b6ed)),_0x3f4a9f&&(_0x9ed540=new Date(_0x3f4a9f),_0x9ed540['setHours'](0x17,0x3b,0x3b,0x3e7),_0x9ed540=Timestamp[_0x4f267c(0x388)](_0x9ed540)),{'searchTerm':_0x922674,'startDate':_0x41b6ed,'endDate':_0x9ed540};}async function applyMatchesFilters(){const _0x25dd67=currentLadder['toLowerCase']();matchesPagination[_0x25dd67]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){document['getElementById']('matches-start-date')['value']='',document['getElementById']('matches-end-date')['value']='',document['getElementById']('matches-search')['value']='';const _0x2e5a63=currentLadder['toLowerCase']();matchesPagination[_0x2e5a63]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x5a1440,_0x5ac15b){const _0x89ceb3=a2_0x528bb8,_0x5a57a2=document[_0x89ceb3(0x209)](_0x89ceb3(0x39f));if(!_0x5a57a2)return;try{const _0x54503a=_0x5ac15b==='D1'?_0x89ceb3(0x29a):_0x5ac15b==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1093c1=doc(db,_0x54503a,_0x5a1440),_0xc8da50=await getDoc(_0x1093c1);if(!_0xc8da50['exists']()){showNotification(_0x89ceb3(0x3c7),'error');return;}const _0x3acd0a=_0xc8da50['data']();document[_0x89ceb3(0x209)]('edit-match-id')['value']=_0x5a1440,document['getElementById'](_0x89ceb3(0x32b))[_0x89ceb3(0x26d)]=_0x5ac15b,document['getElementById']('edit-match-winner')['value']=_0x3acd0a[_0x89ceb3(0x24a)]||'',document[_0x89ceb3(0x209)]('edit-match-winner-score')[_0x89ceb3(0x26d)]=_0x3acd0a['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0x3acd0a['winnerSuicides']||0x0,document['getElementById'](_0x89ceb3(0x299))['value']=_0x3acd0a[_0x89ceb3(0x330)]||'',document[_0x89ceb3(0x209)]('edit-match-loser')['value']=_0x3acd0a[_0x89ceb3(0x2c8)]||'',document['getElementById']('edit-match-loser-score')[_0x89ceb3(0x26d)]=_0x3acd0a['loserScore']||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0x3acd0a['loserSuicides']||0x0,document['getElementById']('edit-match-loser-comment')['value']=_0x3acd0a['loserComment']||'',document['getElementById'](_0x89ceb3(0x2ba))[_0x89ceb3(0x26d)]=_0x3acd0a['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')['value']=_0x3acd0a['winnerDemoLink']||'',document['getElementById'](_0x89ceb3(0x1b4))['value']=_0x3acd0a[_0x89ceb3(0x226)]||_0x3acd0a[_0x89ceb3(0x2e6)]||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x3acd0a['winnerUsername']+'\x20vs\x20'+_0x3acd0a['loserUsername'],_0x5a57a2['classList'][_0x89ceb3(0x1fa)](_0x89ceb3(0x1c2));}catch(_0x4dc61c){console['error']('Error\x20loading\x20match\x20data:',_0x4dc61c),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x51f92a=a2_0x528bb8,_0x2115a9=document[_0x51f92a(0x209)](_0x51f92a(0x39f));_0x2115a9&&_0x2115a9[_0x51f92a(0x316)]['remove']('active');}async function saveEditedMatch(){const _0x4761ee=a2_0x528bb8;try{const _0x289af0=document['getElementById'](_0x4761ee(0x244))[_0x4761ee(0x26d)],_0x4efa46=document['getElementById']('edit-match-ladder')['value'];if(!_0x289af0||!_0x4efa46){showNotification(_0x4761ee(0x2b3),_0x4761ee(0x391));return;}const _0x4cda43=_0x4efa46==='D1'?_0x4761ee(0x29a):_0x4efa46==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1732e8=document['getElementById']('edit-match-winner')['value']['trim'](),_0x51a98d=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x437444=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x5dded1=document['getElementById'](_0x4761ee(0x299))['value']['trim'](),_0x1763a0=document['getElementById']('edit-match-loser')['value'][_0x4761ee(0x309)](),_0x2dc882=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x4da176=parseInt(document[_0x4761ee(0x209)](_0x4761ee(0x1e1))['value']),_0x442091=document['getElementById'](_0x4761ee(0x38a))['value']['trim'](),_0x5b306e=document[_0x4761ee(0x209)](_0x4761ee(0x2ba))['value']['trim'](),_0x580adc=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x76d0af=document['getElementById']('edit-match-loser-demo')[_0x4761ee(0x26d)]['trim']();if(!_0x1732e8||!_0x1763a0){showNotification(_0x4761ee(0x3c3),'error');return;}await updateDoc(doc(db,_0x4cda43,_0x289af0),{'winnerUsername':_0x1732e8,'winnerScore':_0x51a98d,'winnerSuicides':_0x437444,'winnerComment':_0x5dded1,'loserUsername':_0x1763a0,'loserScore':_0x2dc882,'loserSuicides':_0x4da176,'loserComment':_0x442091,'mapPlayed':_0x5b306e,'winnerDemoLink':_0x580adc||null,'loserDemoLink':_0x76d0af||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification(_0x4761ee(0x318),'success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x4efa46['toLowerCase']()][_0x4761ee(0x3c5)]);}catch(_0x23c0a4){console[_0x4761ee(0x391)](_0x4761ee(0x3cd),_0x23c0a4),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x23c0a4[_0x4761ee(0x25b)],'error');}}async function openDeleteMatchModal(_0x4a8c0d,_0x36da1a){const _0x492a48=a2_0x528bb8;try{const _0x352518=_0x36da1a==='D1'?'approvedMatches':_0x36da1a==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x45f37b=doc(db,_0x352518,_0x4a8c0d),_0x1e2288=await getDoc(_0x45f37b);if(!_0x1e2288['exists']()){showNotification(_0x492a48(0x3c7),_0x492a48(0x391));return;}const _0x3b0acd=_0x1e2288['data'](),_0x163d06=document['getElementById']('delete-match-confirm-modal');_0x163d06[_0x492a48(0x308)]['matchId']=_0x4a8c0d,_0x163d06['dataset'][_0x492a48(0x1e3)]=_0x36da1a;const _0x76ac35=_0x3b0acd['approvedAt']?new Date(_0x3b0acd['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x492a48(0x1c4),_0x23cf81=document['getElementById']('delete-match-summary');_0x23cf81['innerHTML']=_0x492a48(0x3a9)+_0x76ac35+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x3b0acd[_0x492a48(0x24a)]+_0x492a48(0x20d)+_0x3b0acd['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x3b0acd['winnerScore']||0x0)+'\x20-\x20'+(_0x3b0acd[_0x492a48(0x3b9)]||0x0)+_0x492a48(0x24c)+(_0x3b0acd['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x36da1a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x163d06['classList']['add']('active');}catch(_0xa99adb){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0xa99adb),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x18991d=a2_0x528bb8,_0x5865a1=document['getElementById']('delete-match-confirm-modal');_0x5865a1&&(_0x5865a1[_0x18991d(0x316)][_0x18991d(0x3b1)]('active'),_0x5865a1['removeAttribute']('data-match-id'),_0x5865a1['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x63e64e=a2_0x528bb8,_0x13fbb4=document['getElementById'](_0x63e64e(0x1cd)),_0x80b77d=_0x13fbb4['dataset']['matchId'],_0x51d12c=_0x13fbb4['dataset'][_0x63e64e(0x1e3)];if(!_0x80b77d||!_0x51d12c){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x59df32=_0x51d12c==='D1'?'approvedMatches':_0x51d12c==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x59df32,_0x80b77d)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x51d12c['toLowerCase']()]['page']);}catch(_0x285a2b){console['error']('Error\x20deleting\x20match:',_0x285a2b),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x285a2b[_0x63e64e(0x25b)],'error');}}async function saveHighlightChanges(){const _0x5620f0=a2_0x528bb8,_0x10d807=document[_0x5620f0(0x209)](_0x5620f0(0x1ae))['value'],_0x447b50=document['getElementById'](_0x5620f0(0x208))['value'];let _0x4cb003={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x447b50,'description':document['getElementById'](_0x5620f0(0x1d3))[_0x5620f0(0x26d)]['trim'](),'videoId':document['getElementById'](_0x5620f0(0x1f1))['value']['trim'](),'submittedBy':auth['currentUser']['email']};if(_0x447b50==='match'){_0x4cb003[_0x5620f0(0x21e)]=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x4cb003[_0x5620f0(0x399)]=document['getElementById']('edit-highlight-map-input')['value']['trim']();const _0x5e2641=document['getElementById'](_0x5620f0(0x269))['value'];_0x4cb003['matchDate']=_0x5e2641?Timestamp[_0x5620f0(0x388)](new Date(_0x5e2641)):null,_0x4cb003['winnerName']=document['getElementById']('edit-highlight-winnerName-input')['value']['trim'](),_0x4cb003[_0x5620f0(0x3dd)]=document['getElementById']('edit-highlight-winnerScore-input')[_0x5620f0(0x26d)]['trim'](),_0x4cb003[_0x5620f0(0x2ca)]=document[_0x5620f0(0x209)]('edit-highlight-loserName-input')['value'][_0x5620f0(0x309)](),_0x4cb003['loserScore']=document[_0x5620f0(0x209)](_0x5620f0(0x254))['value'][_0x5620f0(0x309)](),_0x4cb003[_0x5620f0(0x392)]=document['getElementById']('edit-highlight-matchLink-input')['value'][_0x5620f0(0x309)](),_0x4cb003['mapCreator']=null,_0x4cb003['mapVersion']=null,_0x4cb003['creatorImageUrl']=null,_0x4cb003['achievementPlayer']=null,_0x4cb003[_0x5620f0(0x327)]=null,_0x4cb003[_0x5620f0(0x2eb)]=null,_0x4cb003['playerProfileUrl']=null;}else{if(_0x447b50==='creator')_0x4cb003['map']=document[_0x5620f0(0x209)]('edit-highlight-map-input')['value'][_0x5620f0(0x309)](),_0x4cb003['mapCreator']=document[_0x5620f0(0x209)]('edit-highlight-mapCreator-input')['value']['trim'](),_0x4cb003['mapVersion']=document[_0x5620f0(0x209)](_0x5620f0(0x171))['value']['trim'](),_0x4cb003['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')[_0x5620f0(0x26d)]['trim'](),_0x4cb003['matchInfo']=null,_0x4cb003['matchDate']=null,_0x4cb003[_0x5620f0(0x2f9)]=null,_0x4cb003['winnerScore']=null,_0x4cb003['loserName']=null,_0x4cb003['loserScore']=null,_0x4cb003['matchLink']=null,_0x4cb003[_0x5620f0(0x2fa)]=null,_0x4cb003[_0x5620f0(0x327)]=null,_0x4cb003['achievementDetails']=null,_0x4cb003[_0x5620f0(0x165)]=null;else _0x447b50==='achievement'&&(_0x4cb003['achievementPlayer']=document['getElementById'](_0x5620f0(0x33e))[_0x5620f0(0x26d)]['trim'](),_0x4cb003[_0x5620f0(0x327)]=document[_0x5620f0(0x209)]('edit-highlight-achievementType-input')['value']['trim'](),_0x4cb003[_0x5620f0(0x2eb)]=document[_0x5620f0(0x209)]('edit-highlight-achievementDetails-input')['value']['trim'](),_0x4cb003[_0x5620f0(0x165)]=document['getElementById']('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x4cb003['matchInfo']=null,_0x4cb003['map']=null,_0x4cb003['matchDate']=null,_0x4cb003['winnerName']=null,_0x4cb003['winnerScore']=null,_0x4cb003['loserName']=null,_0x4cb003['loserScore']=null,_0x4cb003[_0x5620f0(0x392)]=null,_0x4cb003['mapCreator']=null,_0x4cb003['mapVersion']=null,_0x4cb003['creatorImageUrl']=null);}try{if(_0x10d807){_0x4cb003['updatedAt']=serverTimestamp();const _0x35fdba=doc(db,'highlights',_0x10d807);await updateDoc(_0x35fdba,_0x4cb003),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x4cb003['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x4cb003),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x5e3487){console['error'](_0x5620f0(0x381),_0x5e3487),showNotification('Error\x20saving\x20highlight:\x20'+_0x5e3487['message'],'error');}}async function resimulateMatch(){const _0x1c6468=a2_0x528bb8;try{const _0x4214a5=document['getElementById']('resimulate-match-id')[_0x1c6468(0x26d)];if(!_0x4214a5){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x28a54c=auth[_0x1c6468(0x17d)];if(!_0x28a54c){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x2fe74d=currentLadder==='D1'?_0x1c6468(0x29a):currentLadder==='D2'?_0x1c6468(0x20f):'approvedMatchesD3',_0x29044e=doc(db,_0x2fe74d,_0x4214a5),_0x25ffe3=await getDoc(_0x29044e);if(!_0x25ffe3['exists']()){showNotification(_0x1c6468(0x23f),'error');return;}const _0x4288f1=_0x25ffe3['data'](),_0x16538d=_0x4288f1[_0x1c6468(0x320)]?_0x4288f1[_0x1c6468(0x320)]['toDate']()['toLocaleString']():_0x4288f1['matchDate']?_0x4288f1['matchDate'][_0x1c6468(0x1aa)]?_0x4288f1['matchDate']['toDate']()[_0x1c6468(0x233)]():new Date(_0x4288f1['matchDate'])['toLocaleString']():'Unknown',_0x398b6c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x4288f1['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x4288f1['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x4288f1['winnerScore']+'-'+_0x4288f1['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x4288f1[_0x1c6468(0x362)]||_0x4288f1['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x16538d+_0x1c6468(0x1d5)+_0x4214a5+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')['innerHTML']=_0x398b6c,document['getElementById'](_0x1c6468(0x372))['style'][_0x1c6468(0x287)]='block',document['getElementById']('confirm-resimulate-btn')['style']['display']=_0x1c6468(0x2f1),window['pendingResimulateData']={'matchId':_0x4214a5,'matchData':_0x4288f1,'ladder':currentLadder},showNotification(_0x1c6468(0x314),'info');}catch(_0x2bf2e0){console['error'](_0x1c6468(0x197),_0x2bf2e0),showNotification(_0x1c6468(0x3b7)+_0x2bf2e0[_0x1c6468(0x25b)],'error');}}async function confirmResimulateMatch(){const _0x3fb768=a2_0x528bb8;try{const {matchId:_0x563933,matchData:_0x4aa70a,ladder:_0x2872d6}=window['pendingResimulateData'];if(!_0x563933||!_0x4aa70a){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x437c5b=_0x2872d6==='D1'?_0x3fb768(0x2d9):_0x2872d6==='D2'?'playersD2':'playersD3',_0x1ddb07=_0x2872d6==='D1'?'eloHistory':_0x2872d6==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x342662,_0x42ca7e]=await Promise['all']([getDocs(query(collection(db,_0x437c5b),where('username','==',_0x4aa70a['winnerUsername']))),getDocs(query(collection(db,_0x437c5b),where('username','==',_0x4aa70a[_0x3fb768(0x2c8)])))]);if(_0x342662['empty']||_0x42ca7e['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x492ab4=_0x342662['docs'][0x0]['id'],_0xd3d55=_0x42ca7e['docs'][0x0]['id'],_0x299f50=_0x342662['docs'][0x0]['data'](),_0x297041=_0x42ca7e['docs'][0x0]['data'](),[_0x1e1c9d,_0x588530]=await Promise['all']([getDocs(query(collection(db,_0x1ddb07),where(_0x3fb768(0x341),'==',_0x492ab4),where('matchId','==',_0x563933))),getDocs(query(collection(db,_0x1ddb07),where('playerId','==',_0xd3d55),where('matchId','==',_0x563933)))]),_0x3b344b=!_0x1e1c9d['empty'],_0x19e863=!_0x588530['empty'],_0x49c535='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x3b344b?'\x20Exists':'\x20Missing')+_0x3fb768(0x2cd)+(_0x19e863?_0x3fb768(0x30d):_0x3fb768(0x186))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x299f50['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x297041[_0x3fb768(0x298)]||_0x3fb768(0x35d))+_0x3fb768(0x37e)+(_0x299f50[_0x3fb768(0x2e1)]||'Unknown')+_0x3fb768(0x2a7)+(_0x297041['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x3fb768(0x209)](_0x3fb768(0x285))['innerHTML']=_0x49c535,document['getElementById'](_0x3fb768(0x285))[_0x3fb768(0x184)][_0x3fb768(0x287)]=_0x3fb768(0x2f1);if(_0x3b344b&&_0x19e863){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification(_0x3fb768(0x231),'info');const _0x5d381c=_0x4aa70a['approvedAt']||_0x4aa70a[_0x3fb768(0x30e)]||serverTimestamp(),[_0x5be08b,_0x351da1]=await Promise['all']([getPlayerEloAtTime(_0x492ab4,_0x5d381c,_0x1ddb07),getPlayerEloAtTime(_0xd3d55,_0x5d381c,_0x1ddb07)]),{calculateElo:_0x526d66}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x4c84d6,newLoserRating:_0x10de06}=_0x526d66(_0x5be08b,_0x351da1),_0x27084d=_0x299f50['position']||Number['MAX_SAFE_INTEGER'],_0x1c43c1=_0x297041[_0x3fb768(0x2e1)]||Number[_0x3fb768(0x210)];let _0x58ef68=_0x27084d,_0x287a60=_0x1c43c1;_0x27084d>_0x1c43c1&&(_0x58ef68=_0x1c43c1,_0x287a60=_0x1c43c1+0x1);const _0x24b177=writeBatch(db),_0x4e4f23=doc(db,_0x437c5b,_0x492ab4);_0x24b177[_0x3fb768(0x1d7)](_0x4e4f23,{'eloRating':_0x4c84d6,'position':_0x58ef68,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x237337=doc(db,_0x437c5b,_0xd3d55);_0x24b177[_0x3fb768(0x1d7)](_0x237337,{'eloRating':_0x10de06,'position':_0x287a60,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x27084d>_0x1c43c1){const _0x5642e4=await getDocs(query(collection(db,_0x437c5b),where(_0x3fb768(0x2e1),'>',_0x1c43c1),where('position','<',_0x27084d)));_0x5642e4[_0x3fb768(0x240)](_0x263062=>{const _0xc53d70=_0x3fb768,_0x4efa54=doc(db,_0x437c5b,_0x263062['id']),_0x444775=_0x263062[_0xc53d70(0x39d)]()['position'];_0x24b177[_0xc53d70(0x1d7)](_0x4efa54,{'position':_0x444775+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x3b344b){const _0x3c390d=doc(collection(db,_0x1ddb07));_0x24b177['set'](_0x3c390d,{'playerId':_0x492ab4,'player':_0x4aa70a['winnerUsername'],'previousElo':_0x5be08b,'newElo':_0x4c84d6,'eloChange':_0x4c84d6-_0x5be08b,'opponentId':_0xd3d55,'opponent':_0x4aa70a[_0x3fb768(0x2c8)],'matchResult':'win','previousPosition':_0x27084d,'newPosition':_0x58ef68,'positionChange':_0x58ef68-_0x27084d,'matchId':_0x563933,'timestamp':_0x5d381c,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x2872d6,'matchScore':_0x4aa70a['winnerScore']+'-'+_0x4aa70a['loserScore'],'mapPlayed':_0x4aa70a[_0x3fb768(0x362)]||_0x4aa70a['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x19e863){const _0x2cc7dd=doc(collection(db,_0x1ddb07));_0x24b177['set'](_0x2cc7dd,{'playerId':_0xd3d55,'player':_0x4aa70a['loserUsername'],'previousElo':_0x351da1,'newElo':_0x10de06,'eloChange':_0x10de06-_0x351da1,'opponentId':_0x492ab4,'opponent':_0x4aa70a[_0x3fb768(0x24a)],'matchResult':_0x3fb768(0x3a5),'previousPosition':_0x1c43c1,'newPosition':_0x287a60,'positionChange':_0x287a60-_0x1c43c1,'matchId':_0x563933,'timestamp':_0x5d381c,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x2872d6,'matchScore':_0x4aa70a['winnerScore']+'-'+_0x4aa70a['loserScore'],'mapPlayed':_0x4aa70a['mapPlayed']||_0x4aa70a[_0x3fb768(0x16b)]||_0x3fb768(0x35d),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x4a827a=_0x2872d6==='D1'?_0x3fb768(0x29a):_0x2872d6==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5585dd=doc(db,_0x4a827a,_0x563933);_0x24b177['update'](_0x5585dd,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x299f50[_0x3fb768(0x298)],'originalLoserElo':_0x297041['eloRating'],'originalWinnerPosition':_0x27084d,'originalLoserPosition':_0x1c43c1,'resimulatedWinnerElo':_0x4c84d6,'resimulatedLoserElo':_0x10de06,'resimulatedWinnerPosition':_0x58ef68,'resimulatedLoserPosition':_0x287a60}),await _0x24b177[_0x3fb768(0x25e)]();const _0x7550d6=(!_0x3b344b?0x1:0x0)+(!_0x19e863?0x1:0x0),_0x52d1c6=_0x27084d!==_0x58ef68||_0x1c43c1!==_0x287a60;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x7550d6+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x5be08b+''+_0x4c84d6+'\x20(+'+(_0x4c84d6-_0x5be08b)+_0x3fb768(0x2e7))+('Loser\x20'+_0x351da1+''+_0x10de06+'\x20('+(_0x10de06-_0x351da1)+_0x3fb768(0x1a8))+(''+(_0x52d1c6?'Positions\x20updated:\x20Winner\x20'+_0x27084d+''+_0x58ef68+',\x20Loser\x20'+_0x1c43c1+''+_0x287a60:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document[_0x3fb768(0x2a5)]('#players.content-section.active')&&loadPlayersData();}catch(_0x317208){console['error']('Error\x20resimulating\x20match:',_0x317208),showNotification(_0x3fb768(0x355)+_0x317208['message'],'error');}}async function getPlayerEloAtTime(_0x32801e,_0x330fab,_0x338481){const _0x23d648=a2_0x528bb8;try{const _0x177c75=_0x330fab['toDate']?_0x330fab['toDate']():new Date(_0x330fab),_0x8d32a5=query(collection(db,_0x338481),where('playerId','==',_0x32801e),where(_0x23d648(0x1cc),'<',_0x330fab),orderBy('timestamp','desc'),limit(0x1)),_0x314add=await getDocs(_0x8d32a5);if(!_0x314add[_0x23d648(0x1a5)]){const _0x43e924=_0x314add['docs'][0x0][_0x23d648(0x39d)]();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x32801e+'\x20before\x20match:\x20'+_0x43e924['newElo']),_0x43e924['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x32801e+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x2eb5a8){return console['error'](_0x23d648(0x2b0)+_0x32801e+':',_0x2eb5a8),0x4b0;}}function openResimulateModal(){const _0x510789=a2_0x528bb8;console[_0x510789(0x25c)]('openResimulateModal\x20called!');const _0x42ab60=document[_0x510789(0x209)](_0x510789(0x1e8));console['log']('Modal\x20element\x20found:',_0x42ab60);if(!_0x42ab60){console[_0x510789(0x391)]('Modal\x20element\x20not\x20found!');return;}_0x42ab60['style'][_0x510789(0x287)]=_0x510789(0x2f1),_0x42ab60['style']['visibility']='visible',_0x42ab60['style']['opacity']='1',_0x42ab60[_0x510789(0x316)]['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log'](_0x510789(0x37c),window['getComputedStyle'](_0x42ab60)['display']);const _0x22e241=document['getElementById']('match-details-container'),_0x36e12b=document['getElementById']('validation-results-container'),_0x102fa1=document[_0x510789(0x209)]('confirm-resimulate-btn'),_0x4d46da=document[_0x510789(0x209)](_0x510789(0x293));if(_0x22e241)_0x22e241[_0x510789(0x289)]='';if(_0x36e12b)_0x36e12b[_0x510789(0x289)]='';if(_0x102fa1)_0x102fa1['style']['display']='none';if(_0x4d46da)_0x4d46da['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x408c48=a2_0x528bb8;document[_0x408c48(0x209)](_0x408c48(0x1e8))['style']['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x22adcc=a2_0x528bb8;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x22adcc(0x2ff),'success');}catch(_0x3b8a75){console['error'](_0x22adcc(0x22e),_0x3b8a75),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x3b8a75['message'],_0x22adcc(0x391));}}function renderPointsOverview(_0x2eaeb5){const _0x4a295f=a2_0x528bb8,_0x20e972=document['getElementById']('points-overview-table-body');if(!_0x20e972)return;if(_0x2eaeb5['length']===0x0){_0x20e972[_0x4a295f(0x289)]=_0x4a295f(0x29d);return;}_0x20e972['innerHTML']='',_0x2eaeb5[_0x4a295f(0x240)](_0x49e6f1=>{const _0x1d4e41=_0x4a295f,_0x5aad21=document['createElement']('tr'),_0x54fd9b=_0x49e6f1['displayName']||_0x49e6f1['username']||_0x1d4e41(0x1d1),_0x326f26=_0x49e6f1[_0x1d4e41(0x2a6)]||'No\x20email',_0x5912ad=_0x49e6f1[_0x1d4e41(0x266)]||0x0,_0x148140=_0x49e6f1['lastPointsModified']?new Date(_0x49e6f1['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x5aad21['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x54fd9b+_0x1d4e41(0x3d2)+_0x326f26+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x5912ad>0x3e8?_0x1d4e41(0x3da):_0x5912ad>0x1f4?'medium-points':'low-points')+_0x1d4e41(0x1c7)+_0x5912ad['toLocaleString']()+_0x1d4e41(0x35e)+_0x148140+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x49e6f1['id']+_0x1d4e41(0x32f)+_0x49e6f1['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x20e972[_0x1d4e41(0x1a1)](_0x5aad21);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x3365fb=a2_0x528bb8;console['log'](_0x3365fb(0x358));const _0x26ec83=document[_0x3365fb(0x2af)]('.quick-edit-btn');console['log']('Found\x20'+_0x26ec83['length']+_0x3365fb(0x263)),_0x26ec83[_0x3365fb(0x240)](_0x34eeff=>{const _0x19926d=_0x3365fb,_0x7401f1=_0x34eeff[_0x19926d(0x329)](!![]);_0x34eeff['parentNode']['replaceChild'](_0x7401f1,_0x34eeff);});const _0x4165ba=document['querySelectorAll']('.view-history-btn');console[_0x3365fb(0x25c)]('Found\x20'+_0x4165ba[_0x3365fb(0x199)]+'\x20view\x20history\x20buttons'),_0x4165ba['forEach'](_0x40d546=>{const _0x5162aa=_0x40d546['cloneNode'](!![]);_0x40d546['parentNode']['replaceChild'](_0x5162aa,_0x40d546);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x37c074=>{_0x37c074['addEventListener']('click',function(_0x4d5231){const _0x18c233=a2_0x628c;_0x4d5231['preventDefault'](),_0x4d5231['stopPropagation']();const _0x10fc9e=this[_0x18c233(0x308)][_0x18c233(0x1e0)];console[_0x18c233(0x25c)]('Quick\x20edit\x20clicked\x20for\x20user:',_0x10fc9e);if(!_0x10fc9e){console['error'](_0x18c233(0x249));return;}this[_0x18c233(0x184)]['opacity']=_0x18c233(0x3c1),setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x10fc9e);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x51dbfa=>{const _0x2255e1=_0x3365fb;_0x51dbfa['addEventListener'](_0x2255e1(0x2f3),function(_0x216e2c){const _0x3ef28d=_0x2255e1;_0x216e2c['preventDefault'](),_0x216e2c['stopPropagation']();const _0x21c881=this['dataset'][_0x3ef28d(0x1e0)];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x21c881);if(!_0x21c881){console[_0x3ef28d(0x391)](_0x3ef28d(0x249));return;}this['style']['opacity']='0.6',setTimeout(()=>{const _0x31ae95=_0x3ef28d;this['style'][_0x31ae95(0x375)]='1';},0xc8),loadUserPointsHistory(_0x21c881);});}),console['log'](_0x3365fb(0x335));}async function openQuickEditModal(_0x1cbbfc){const _0x33f315=a2_0x528bb8;console[_0x33f315(0x25c)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x1cbbfc);const _0x5486b4=document['getElementById']('quick-edit-points-modal');if(!_0x5486b4){console['error'](_0x33f315(0x229)),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...','info');const _0x2869ad=doc(db,'userProfiles',_0x1cbbfc),_0x2d2601=await getDoc(_0x2869ad);if(!_0x2d2601['exists']()){showNotification('User\x20not\x20found','error');return;}const _0x44019d=_0x2d2601['data']();console['log']('User\x20data\x20loaded:',_0x44019d);const _0x11c533=document['getElementById']('quick-edit-user-id'),_0xcc3b30=document['getElementById'](_0x33f315(0x272)),_0x57d1da=document[_0x33f315(0x209)](_0x33f315(0x234)),_0x50dbf0=document['getElementById'](_0x33f315(0x2ea)),_0x52e454=document['getElementById'](_0x33f315(0x173));if(!_0x11c533||!_0xcc3b30||!_0x57d1da||!_0x50dbf0||!_0x52e454){console[_0x33f315(0x391)](_0x33f315(0x33b)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x11c533['value']=_0x1cbbfc,_0xcc3b30[_0x33f315(0x24f)]=_0x44019d['displayName']||_0x44019d[_0x33f315(0x187)]||'Unknown\x20User',_0x57d1da['textContent']=_0x44019d['email']||'No\x20email',_0x50dbf0['textContent']=(_0x44019d['points']||0x0)['toLocaleString'](),_0x52e454['reset']();const _0x5f0ee6=document['getElementById']('quick-add');_0x5f0ee6&&(_0x5f0ee6['checked']=!![]);_0x5486b4[_0x33f315(0x316)]['add'](_0x33f315(0x1c2)),console['log']('Modal\x20opened\x20successfully');const _0x5a18d4=document[_0x33f315(0x209)]('quick-points-amount');_0x5a18d4&&setTimeout(()=>_0x5a18d4[_0x33f315(0x1f6)](),0x64);}catch(_0x390f3d){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x390f3d),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x390f3d['message'],'error');}}function closeQuickEditModal(){const _0x21d171=a2_0x528bb8,_0x454525=document['getElementById'](_0x21d171(0x24e));_0x454525&&_0x454525[_0x21d171(0x316)]['remove']('active');}async function handleQuickEditPoints(_0x14e234){const _0x4bbfa1=a2_0x528bb8;_0x14e234[_0x4bbfa1(0x30b)]();const _0x1b81c2=document['getElementById']('quick-edit-user-id')['value'],_0x24aae1=document['querySelector'](_0x4bbfa1(0x2bf))['value'],_0x3ba4de=parseInt(document['getElementById']('quick-points-amount')[_0x4bbfa1(0x26d)]),_0x501010=document['getElementById'](_0x4bbfa1(0x273))['value'][_0x4bbfa1(0x309)]();console['log']('Processing\x20points\x20edit:',{'userId':_0x1b81c2,'action':_0x24aae1,'amount':_0x3ba4de,'reason':_0x501010});if(!_0x1b81c2||!_0x3ba4de||_0x3ba4de<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x1b81c2,_0x24aae1,_0x3ba4de,_0x501010),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x4bbfa1(0x361),'success'),console[_0x4bbfa1(0x25c)](_0x4bbfa1(0x2b8),_0x1b81c2);}catch(_0x4ca087){console['error']('Error\x20updating\x20points:',_0x4ca087),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x4ca087['message'],_0x4bbfa1(0x391));}}async function searchUsersForPoints(){const _0x25eca5=a2_0x528bb8,_0x28ebac=document['getElementById'](_0x25eca5(0x290))['value']['trim']()['toLowerCase'](),_0x3caee0=document[_0x25eca5(0x209)]('user-search-results');if(!_0x28ebac||_0x28ebac['length']<0x2){_0x3caee0['innerHTML']='';return;}_0x3caee0[_0x25eca5(0x289)]=_0x25eca5(0x373);try{const _0x5872ce=collection(db,'userProfiles'),_0x292b4f=await getDocs(_0x5872ce),_0x37fb52=[];_0x292b4f['forEach'](_0x4d4d69=>{const _0x55f356=_0x25eca5,_0xe60eec=_0x4d4d69[_0x55f356(0x39d)](),_0xb6c631=(_0xe60eec[_0x55f356(0x1b5)]||_0xe60eec[_0x55f356(0x187)]||'')[_0x55f356(0x20b)](),_0x38be52=(_0xe60eec['email']||'')[_0x55f356(0x20b)]();(_0xb6c631['includes'](_0x28ebac)||_0x38be52['includes'](_0x28ebac))&&_0x37fb52[_0x55f356(0x37d)]({'id':_0x4d4d69['id'],..._0xe60eec});});if(_0x37fb52[_0x25eca5(0x199)]===0x0){_0x3caee0[_0x25eca5(0x289)]='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x3caee0[_0x25eca5(0x289)]='',_0x37fb52['forEach'](_0x145091=>{const _0x2c3408=_0x25eca5,_0x2f13d1=document['createElement'](_0x2c3408(0x389));_0x2f13d1[_0x2c3408(0x292)]='search-result-item',_0x2f13d1[_0x2c3408(0x289)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x145091['displayName']||_0x145091['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x145091[_0x2c3408(0x2a6)]||'No\x20email')+_0x2c3408(0x185)+(_0x145091['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2f13d1['addEventListener']('click',()=>selectUserForPoints(_0x145091)),_0x3caee0['appendChild'](_0x2f13d1);});}catch(_0x25bffc){console[_0x25eca5(0x391)](_0x25eca5(0x1c0),_0x25bffc),_0x3caee0['innerHTML']=_0x25eca5(0x214);}}function selectUserForPoints(_0x41a785){const _0x2b004a=a2_0x528bb8;document['getElementById']('selected-user-name')['textContent']=_0x41a785[_0x2b004a(0x1b5)]||_0x41a785['username']||_0x2b004a(0x1d1),document['getElementById'](_0x2b004a(0x31c))['textContent']=(_0x41a785['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')[_0x2b004a(0x26d)]=_0x41a785['id'],document['getElementById'](_0x2b004a(0x294))['style']['display']='block',document['getElementById']('points-management-forms')['style'][_0x2b004a(0x287)]='block',document['getElementById']('user-search-results')['innerHTML']='',document[_0x2b004a(0x209)](_0x2b004a(0x290))['value']='';}async function handleModifyPoints(_0x4b4494){const _0x1b0675=a2_0x528bb8;_0x4b4494['preventDefault']();const _0x3167ce=document['getElementById']('selected-user-id')['value'],_0x1e5593=document['getElementById']('points-action')['value'],_0xfa4276=parseInt(document[_0x1b0675(0x209)](_0x1b0675(0x3a2))[_0x1b0675(0x26d)]),_0xa49586=document['getElementById']('points-reason')['value'][_0x1b0675(0x309)]();if(!_0x3167ce||!_0xfa4276||_0xfa4276<0x0){showNotification(_0x1b0675(0x2f7),'error');return;}try{await modifyUserPoints(_0x3167ce,_0x1e5593,_0xfa4276,_0xa49586),document['getElementById']('modify-points-form')['reset']();const _0x3bf612=doc(db,_0x1b0675(0x321),_0x3167ce),_0x4af7a2=await getDoc(_0x3bf612);if(_0x4af7a2[_0x1b0675(0x3d4)]()){const _0x59b301=_0x4af7a2['data']();document[_0x1b0675(0x209)](_0x1b0675(0x31c))['textContent']=(_0x59b301[_0x1b0675(0x266)]||0x0)['toLocaleString']();}showNotification(_0x1b0675(0x3db),'success'),loadPointsHistory();}catch(_0x42ed97){console['error']('Error\x20modifying\x20points:',_0x42ed97),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x42ed97['message'],_0x1b0675(0x391));}}async function loadPointsHistory(){const _0x291835=a2_0x528bb8,_0x20745c=document[_0x291835(0x209)](_0x291835(0x247));if(!_0x20745c)return;_0x20745c[_0x291835(0x289)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x2bd45c=collection(db,'pointsHistory'),_0x56a9cd=query(_0x2bd45c,orderBy('timestamp','desc'),limit(0x32)),_0x58685e=await getDocs(_0x56a9cd);if(_0x58685e['empty']){_0x20745c['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x20745c[_0x291835(0x289)]='',_0x58685e['forEach'](_0x101c73=>{const _0x10e362=_0x291835,_0x285970=_0x101c73[_0x10e362(0x39d)](),_0x39fcfb=document['createElement']('tr'),_0x3e8ce6=_0x285970['timestamp']?new Date(_0x285970['timestamp']['seconds']*0x3e8)[_0x10e362(0x233)]():_0x10e362(0x35d);let _0x2760b2='';switch(_0x285970[_0x10e362(0x2a9)]){case'add':_0x2760b2='Added\x20'+_0x285970['amount']+'\x20points';break;case'subtract':_0x2760b2=_0x10e362(0x16f)+_0x285970[_0x10e362(0x301)]+'\x20points';break;case'set':_0x2760b2='Set\x20to\x20'+_0x285970['amount']+'\x20points';break;default:_0x2760b2=_0x285970[_0x10e362(0x2a9)]+'\x20'+_0x285970['amount']+'\x20points';}_0x39fcfb['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3e8ce6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x285970['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2760b2+_0x10e362(0x363)+_0x285970['action']+_0x10e362(0x2e0)+(_0x285970['previousPoints']||0x0)+'\x20\x20'+(_0x285970['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x285970['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x285970[_0x10e362(0x30c)]||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x20745c['appendChild'](_0x39fcfb);});}catch(_0x1dd4f2){console['error']('Error\x20loading\x20points\x20history:',_0x1dd4f2),_0x20745c[_0x291835(0x289)]='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x1dd4f2['message']+'</td></tr>';}}function filterPointsOverview(){const _0x24be14=a2_0x528bb8,_0x204800=document[_0x24be14(0x209)]('points-overview-search')['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x70bdfc=window['allUsersPoints']['filter'](_0x491967=>{const _0x4f431a=_0x24be14,_0x1c8712=(_0x491967[_0x4f431a(0x1b5)]||_0x491967['username']||'')[_0x4f431a(0x20b)](),_0x386a85=(_0x491967['email']||'')['toLowerCase']();return _0x1c8712[_0x4f431a(0x179)](_0x204800)||_0x386a85['includes'](_0x204800);});renderPointsOverview(_0x70bdfc);}function sortPointsOverview(){const _0x557edc=a2_0x528bb8,_0x5a7488=document['getElementById']('points-sort-order')['value'];if(!window[_0x557edc(0x30f)])return;const _0x272359=[...window[_0x557edc(0x30f)]];switch(_0x5a7488){case'points-desc':_0x272359['sort']((_0xa786b3,_0x4b4217)=>(_0x4b4217['points']||0x0)-(_0xa786b3[_0x557edc(0x266)]||0x0));break;case'points-asc':_0x272359[_0x557edc(0x2c9)]((_0xb887b3,_0x7f6908)=>(_0xb887b3[_0x557edc(0x266)]||0x0)-(_0x7f6908['points']||0x0));break;case'name-asc':_0x272359['sort']((_0x5eae89,_0x9c7bfe)=>{const _0x251f23=_0x557edc,_0x526cb1=(_0x5eae89[_0x251f23(0x1b5)]||_0x5eae89['username']||'')['toLowerCase'](),_0x488a38=(_0x9c7bfe['displayName']||_0x9c7bfe['username']||'')[_0x251f23(0x20b)]();return _0x526cb1['localeCompare'](_0x488a38);});break;case'name-desc':_0x272359['sort']((_0x5e8323,_0x11b9c7)=>{const _0x2d183b=(_0x5e8323['displayName']||_0x5e8323['username']||'')['toLowerCase'](),_0x4b01ff=(_0x11b9c7['displayName']||_0x11b9c7['username']||'')['toLowerCase']();return _0x4b01ff['localeCompare'](_0x2d183b);});break;}renderPointsOverview(_0x272359);}async function handleAwardItem(_0xfe780a){const _0x288241=a2_0x528bb8;_0xfe780a[_0x288241(0x30b)]();const _0x313286=document['getElementById']('selected-user-id')['value'],_0x3b1102=document[_0x288241(0x209)]('store-item-select')[_0x288241(0x26d)],_0x5a6804=document['getElementById']('award-reason')[_0x288241(0x26d)][_0x288241(0x309)]();if(!_0x313286||!_0x3b1102){showNotification(_0x288241(0x390),_0x288241(0x391));return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById'](_0x288241(0x212))[_0x288241(0x2bd)]();}catch(_0x55b75c){console[_0x288241(0x391)]('Error\x20awarding\x20item:',_0x55b75c),showNotification(_0x288241(0x278)+_0x55b75c['message'],_0x288241(0x391));}}async function loadUserPointsHistory(_0x3f34db){const _0xb6ead4=a2_0x528bb8;try{const _0x21115d=collection(db,'pointsHistory'),_0x2376a5=query(_0x21115d,where('userId','==',_0x3f34db),orderBy('timestamp','desc')),_0x3a8d96=await getDocs(_0x2376a5);console[_0xb6ead4(0x25c)]('Found\x20'+_0x3a8d96['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x3f34db),showNotification('User\x20has\x20'+_0x3a8d96[_0xb6ead4(0x20e)]+'\x20points\x20history\x20entries','info');}catch(_0xce309c){console[_0xb6ead4(0x391)](_0xb6ead4(0x19c),_0xce309c),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x345538=a2_0x528bb8;try{console['log'](_0x345538(0x239));const _0x1052b5=collection(db,'userProfiles'),_0x380b90=await getDocs(_0x1052b5);if(_0x380b90['empty']){console['log'](_0x345538(0x198));return;}let _0x4af126=0x0,_0x38f377=0x0;const _0x353ab4=writeBatch(db);let _0x7da090=0x0;return console[_0x345538(0x25c)]('Found\x20'+_0x380b90['size']+_0x345538(0x259)),_0x380b90[_0x345538(0x240)](_0x2c4486=>{const _0x2a9850=_0x345538,_0x3f54e2=_0x2c4486['data']();_0x3f54e2['points']===undefined||_0x3f54e2[_0x2a9850(0x266)]===null?(_0x353ab4[_0x2a9850(0x1d7)](_0x2c4486['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x4af126++,_0x7da090++,console[_0x2a9850(0x25c)]('Queued\x20'+(_0x3f54e2['displayName']||_0x3f54e2['username']||_0x3f54e2['email']||_0x2a9850(0x35d))+'\x20for\x20points\x20initialization')):(_0x38f377++,console[_0x2a9850(0x25c)]((_0x3f54e2[_0x2a9850(0x1b5)]||_0x3f54e2['username']||_0x3f54e2['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x3f54e2['points'])),_0x7da090>=0x1f4&&console['warn'](_0x2a9850(0x282));}),_0x4af126>0x0?(console[_0x345538(0x25c)](_0x345538(0x348)+_0x4af126+'\x20users...'),await _0x353ab4['commit'](),console[_0x345538(0x25c)](_0x345538(0x3ad)+_0x4af126+'\x20users')):console['log'](_0x345538(0x384)),console['log'](_0x345538(0x217)+_0x380b90['size']+_0x345538(0x2ed)+_0x4af126+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x38f377),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x4af126+'\x20users.\x20'+_0x38f377+'\x20users\x20already\x20had\x20points.','success'),window[_0x345538(0x30f)]&&loadPointsOverview(),{'totalUsers':_0x380b90['size'],'usersUpdated':_0x4af126,'usersAlreadyHadPoints':_0x38f377};}catch(_0x2ca723){console['error'](_0x345538(0x1a0),_0x2ca723),showNotification('Error\x20initializing\x20points:\x20'+_0x2ca723['message'],'error');throw _0x2ca723;}}function addPointsMigrationButton(){const _0x50b249=a2_0x528bb8,_0x3beb70=document['getElementById']('manage-points');if(!_0x3beb70)return;if(document['getElementById']('migrate-points-btn'))return;const _0x2dff52=document['createElement']('div');_0x2dff52['className']='migration-section',_0x2dff52['style']['marginBottom']='20px',_0x2dff52[_0x50b249(0x184)][_0x50b249(0x1ce)]=_0x50b249(0x2d6),_0x2dff52['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x2dff52[_0x50b249(0x184)]['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x2dff52['style']['borderRadius']=_0x50b249(0x1eb),_0x2dff52[_0x50b249(0x289)]=_0x50b249(0x3c9);const _0x5b8ba7=_0x3beb70[_0x50b249(0x2a5)](_0x50b249(0x36d));_0x5b8ba7&&_0x5b8ba7[_0x50b249(0x317)](_0x50b249(0x1ab),_0x2dff52),document['getElementById'](_0x50b249(0x1a4))['addEventListener'](_0x50b249(0x2f3),async function(){const _0x169843=_0x50b249;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']=_0x169843(0x23c),this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x18c2b9=_0x169843;_0x2dff52[_0x18c2b9(0x184)][_0x18c2b9(0x287)]='none';},0xbb8);}catch(_0x12c2c5){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x1afde0=a2_0x528bb8;console[_0x1afde0(0x25c)]('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x115a45=document['getElementById']('points-user-search');_0x115a45&&_0x115a45[_0x1afde0(0x221)]('input',debounce(searchUsersForPoints,0x12c));const _0x4dacf7=document[_0x1afde0(0x209)]('modify-points-form');_0x4dacf7&&_0x4dacf7['addEventListener']('submit',handleModifyPoints);const _0x271615=document['getElementById']('award-item-form');_0x271615&&_0x271615['addEventListener']('submit',handleAwardItem);const _0x5c5cd0=document[_0x1afde0(0x209)]('points-overview-search');_0x5c5cd0&&_0x5c5cd0['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x355948=document['getElementById']('points-sort-order');_0x355948&&_0x355948['addEventListener']('change',sortPointsOverview);const _0x2d1cd3=document['getElementById']('refresh-points-overview');_0x2d1cd3&&_0x2d1cd3['addEventListener']('click',loadPointsOverview);const _0x4a144e=document['getElementById']('bulk-award-points-btn');_0x4a144e&&_0x4a144e[_0x1afde0(0x221)]('click',async()=>{const _0x260ae5=_0x1afde0;confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x4a144e[_0x260ae5(0x205)]=!![],_0x4a144e[_0x260ae5(0x289)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x52f1b3(),_0x4a144e['disabled']=![],_0x4a144e['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x547424=document[_0x1afde0(0x209)](_0x1afde0(0x307));_0x547424&&_0x547424[_0x1afde0(0x221)]('click',awardPointsToAllPilots);async function _0x52f1b3(){const _0x39527f=_0x1afde0;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...',_0x39527f(0x181));const _0x45aa08={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0xf7eb60=0x0,_0xacfb1e=0x0,_0x524ec3=0x0,_0x14ef6d=0x0,_0xd9a47d=0x0,_0x541e6d=0x0;const _0x14170a=new Set(),_0x2b0890=collection(db,'pointsHistory'),_0x5da6d7=query(_0x2b0890,where('reason','>=','Bulk\x20award:'),where('reason','<=',_0x39527f(0x2c0))),_0x4e4690=await getDocs(_0x5da6d7);_0x4e4690['forEach'](_0x252a2d=>{const _0x53aa6e=_0x39527f,_0xa2d3da=_0x252a2d[_0x53aa6e(0x39d)](),_0x5bc5cc=_0xa2d3da['reason']||'',_0x51fefc=_0x5bc5cc[_0x53aa6e(0x23a)](/Match ID: ([a-zA-Z0-9]+)/);_0x51fefc&&_0x51fefc[0x1]&&_0x14170a[_0x53aa6e(0x1fa)](_0x51fefc[0x1]);}),console['log']('Found\x20'+_0x14170a[_0x39527f(0x20e)]+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x594355,_0x461769,_0x13c833]=await Promise[_0x39527f(0x167)]([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0x3480fa=_0x594355['size']+_0x461769['size']+_0x13c833['size'];showNotification('Found\x20'+_0x3480fa+_0x39527f(0x1b8),'info');const _0xa504f0=async(_0x470daa,_0x3f6b88)=>{const _0x4f059a=_0x39527f;let _0x50b776=writeBatch(db);const _0x242d2d=[];let _0x4de93d=0x0;for(const _0x5c45a8 of _0x470daa['docs']){try{if(_0x14170a['has'](_0x5c45a8['id'])){if(_0x3f6b88==='D1')_0x541e6d++;if(_0x3f6b88==='D2')_0x541e6d++;if(_0x3f6b88==='D3')_0x541e6d++;continue;}const _0xdffe36=_0x5c45a8['data'](),_0x3117e6=_0xdffe36['subgameType']||'Standard',_0x26c44c=_0x45aa08[_0x3117e6]||0xa;let _0x571425=_0xdffe36['winnerId'];if(!_0x571425&&_0xdffe36[_0x4f059a(0x24a)]){const [_0x40b401,_0x197dca,_0x46d6ab]=await Promise[_0x4f059a(0x167)]([getDocs(query(collection(db,'players'),where('username','==',_0xdffe36['winnerUsername']))),getDocs(query(collection(db,'playersD2'),where(_0x4f059a(0x187),'==',_0xdffe36[_0x4f059a(0x24a)]))),getDocs(query(collection(db,'playersD3'),where(_0x4f059a(0x187),'==',_0xdffe36['winnerUsername'])))]);if(!_0x40b401['empty'])_0x571425=_0x40b401['docs'][0x0]['id'];else{if(!_0x197dca[_0x4f059a(0x1a5)])_0x571425=_0x197dca[_0x4f059a(0x2ef)][0x0]['id'];else{if(!_0x46d6ab[_0x4f059a(0x1a5)])_0x571425=_0x46d6ab['docs'][0x0]['id'];}}}let _0x3ec0b2=_0xdffe36[_0x4f059a(0x39b)];if(!_0x3ec0b2&&_0xdffe36['loserUsername']){const [_0x1333bf,_0x2b7e86,_0x2679e1]=await Promise['all']([getDocs(query(collection(db,_0x4f059a(0x2d9)),where('username','==',_0xdffe36[_0x4f059a(0x2c8)]))),getDocs(query(collection(db,'playersD2'),where('username','==',_0xdffe36['loserUsername']))),getDocs(query(collection(db,'playersD3'),where(_0x4f059a(0x187),'==',_0xdffe36[_0x4f059a(0x2c8)])))]);if(!_0x1333bf['empty'])_0x3ec0b2=_0x1333bf['docs'][0x0]['id'];else{if(!_0x2b7e86['empty'])_0x3ec0b2=_0x2b7e86['docs'][0x0]['id'];else{if(!_0x2679e1[_0x4f059a(0x1a5)])_0x3ec0b2=_0x2679e1['docs'][0x0]['id'];}}}if(_0x571425&&_0x3ec0b2){const _0x5b715c=doc(db,'userProfiles',_0x571425),_0x114265=doc(db,_0x4f059a(0x321),_0x3ec0b2),[_0x1430b3,_0x51bc42]=await Promise['all']([getDoc(_0x5b715c),getDoc(_0x114265)]);if(_0x1430b3['exists']()){const _0x33b312=_0x1430b3['data'](),_0x1c8f47=_0x33b312['points']||0x0;_0x50b776['update'](_0x5b715c,{'points':_0x1c8f47+_0x26c44c,'lastPointsModified':serverTimestamp()}),_0x242d2d[_0x4f059a(0x37d)]({'userId':_0x571425,'userEmail':_0x33b312[_0x4f059a(0x2a6)]||'unknown','displayName':_0x33b312[_0x4f059a(0x1b5)]||_0xdffe36['winnerUsername']||'Unknown\x20User','action':'add','amount':_0x26c44c,'previousPoints':_0x1c8f47,'newPoints':_0x1c8f47+_0x26c44c,'reason':_0x4f059a(0x2b7)+_0x3117e6+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x5c45a8['id']+_0x4f059a(0x202)+_0x3f6b88,'adminEmail':auth['currentUser'][_0x4f059a(0x2a6)],'timestamp':serverTimestamp()});}if(_0x51bc42['exists']()){const _0x3dd798=_0x51bc42[_0x4f059a(0x39d)](),_0x187733=_0x3dd798['points']||0x0;_0x50b776['update'](_0x114265,{'points':_0x187733+_0x26c44c,'lastPointsModified':serverTimestamp()}),_0x242d2d['push']({'userId':_0x3ec0b2,'userEmail':_0x3dd798['email']||_0x4f059a(0x19e),'displayName':_0x3dd798[_0x4f059a(0x1b5)]||_0xdffe36[_0x4f059a(0x2c8)]||'Unknown\x20User','action':'add','amount':_0x26c44c,'previousPoints':_0x187733,'newPoints':_0x187733+_0x26c44c,'reason':'Bulk\x20award:\x20'+_0x3117e6+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x5c45a8['id']+'\x20-\x20'+_0x3f6b88,'adminEmail':auth[_0x4f059a(0x17d)][_0x4f059a(0x2a6)],'timestamp':serverTimestamp()});}_0x14ef6d+=_0x26c44c*0x2,_0x4de93d+=0x2,_0x14170a['add'](_0x5c45a8['id']);if(_0x4de93d>=0x190){await _0x50b776['commit']();for(const _0x243719 of _0x242d2d){await addDoc(collection(db,'pointsHistory'),_0x243719);}_0x50b776=writeBatch(db),_0x4de93d=0x0,_0x242d2d['length']=0x0;}}}catch(_0x34b286){console[_0x4f059a(0x391)](_0x4f059a(0x315)+_0x3f6b88+'\x20match\x20'+_0x5c45a8['id']+':',_0x34b286),_0xd9a47d++;}}if(_0x4de93d>0x0){await _0x50b776['commit']();for(const _0x2b7ec7 of _0x242d2d){await addDoc(collection(db,_0x4f059a(0x338)),_0x2b7ec7);}}return{'processed':_0x3f6b88==='D1'?_0xf7eb60:_0x3f6b88==='D2'?_0xacfb1e:_0x524ec3};};await _0xa504f0(_0x594355,'D1'),await _0xa504f0(_0x461769,'D2'),await _0xa504f0(_0x13c833,'D3'),showNotification('Completed!\x20Processed\x20'+_0xf7eb60+'\x20D1\x20matches,\x20'+_0xacfb1e+'\x20D2\x20matches,\x20'+_0x524ec3+_0x39527f(0x2e5)+(_0x39527f(0x255)+_0x14ef6d+_0x39527f(0x365)+_0x541e6d+_0x39527f(0x2c4)+_0xd9a47d),'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x21607e){console[_0x39527f(0x391)](_0x39527f(0x36f),_0x21607e),showNotification(_0x39527f(0x3af)+_0x21607e[_0x39527f(0x25b)],'error');}}const _0x477b6b=document[_0x1afde0(0x209)](_0x1afde0(0x24e));if(_0x477b6b){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0xd812c8=_0x477b6b[_0x1afde0(0x2a5)]('.close-btn');_0xd812c8?_0xd812c8[_0x1afde0(0x221)](_0x1afde0(0x2f3),function(){const _0x393c66=_0x1afde0;console['log'](_0x393c66(0x1af)),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x2e6f35=document['getElementById']('cancel-quick-edit');_0x2e6f35?_0x2e6f35['addEventListener'](_0x1afde0(0x2f3),function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x1fe054=document['getElementById']('quick-edit-points-form');_0x1fe054?_0x1fe054[_0x1afde0(0x221)]('submit',function(_0x2c1aab){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x2c1aab);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x477b6b[_0x1afde0(0x221)]('click',function(_0x317496){const _0x4338a6=_0x1afde0;_0x317496['target']===_0x477b6b&&(console[_0x4338a6(0x25c)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console[_0x1afde0(0x391)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console[_0x1afde0(0x25c)]('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0xec1222=a2_0x528bb8;try{const _0x431c46=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x431c46||isNaN(_0x431c46)){showNotification('Invalid\x20points\x20amount',_0xec1222(0x391));return;}if(!confirm('This\x20will\x20award\x20'+_0x431c46+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification('Starting\x20points\x20award\x20process...','info');const [_0x438989,_0x3bf7ac,_0x147120]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0xec1222(0x22d)))]);console['log'](_0xec1222(0x3bf)+_0x438989['size']+'\x20D1\x20pilots,\x20'+_0x3bf7ac[_0xec1222(0x20e)]+_0xec1222(0x39a)+_0x147120[_0xec1222(0x20e)]+_0xec1222(0x2ce));const _0x55a7cb=_0x438989['size']+_0x3bf7ac[_0xec1222(0x20e)]+_0x147120['size'],_0x1ff66c=new Map();_0x438989[_0xec1222(0x240)](_0x11758d=>{const _0x282955=_0xec1222,_0x6700a4=_0x11758d['data']();_0x1ff66c[_0x282955(0x2f0)](_0x11758d['id'],{'username':_0x6700a4['username'],'ladder':'D1'});}),_0x3bf7ac['forEach'](_0x3b5a14=>{const _0xb5a4a9=_0x3b5a14['data']();_0x1ff66c['set'](_0x3b5a14['id'],{'username':_0xb5a4a9['username'],'ladder':'D2'});}),_0x147120['forEach'](_0x572051=>{const _0x250cce=_0xec1222,_0x10ef3c=_0x572051['data']();_0x1ff66c['set'](_0x572051['id'],{'username':_0x10ef3c[_0x250cce(0x187)],'ladder':'D3'});}),console['log'](_0xec1222(0x3bf)+_0x1ff66c['size']+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0xb6b5cb=0x0,_0xd5e512=0x0,_0x55ddc6=0x0;const _0x39a13b=Array['from'](_0x1ff66c[_0xec1222(0x2c1)]()),_0x3f2f5d=0x190;for(let _0x15d389=0x0;_0x15d389<_0x39a13b['length'];_0x15d389+=_0x3f2f5d){const _0x12a027=writeBatch(db),_0x161790=[],_0x3fefc4=_0x39a13b[_0xec1222(0x25f)](_0x15d389,_0x15d389+_0x3f2f5d),_0x213ef6=await Promise['all'](_0x3fefc4['map'](_0x372613=>getDoc(doc(db,'userProfiles',_0x372613))));for(let _0x343f24=0x0;_0x343f24<_0x3fefc4['length'];_0x343f24++){try{const _0x164c8e=_0x3fefc4[_0x343f24],_0x3ff61a=_0x1ff66c['get'](_0x164c8e),_0x567104=_0x213ef6[_0x343f24];if(_0x567104[_0xec1222(0x3d4)]()){const _0x244073=_0x567104[_0xec1222(0x39d)](),_0x226817=_0x244073[_0xec1222(0x266)]||0x0,_0x4a4757=_0x226817+_0x431c46;_0x12a027['update'](doc(db,_0xec1222(0x321),_0x164c8e),{'points':_0x4a4757,'lastPointsModified':serverTimestamp()}),_0x161790['push']({'userId':_0x164c8e,'userEmail':_0x244073[_0xec1222(0x2a6)]||'unknown','displayName':_0x244073['displayName']||_0x3ff61a[_0xec1222(0x187)]||'Unknown\x20User','action':'add','amount':_0x431c46,'previousPoints':_0x226817,'newPoints':_0x4a4757,'reason':_0xec1222(0x1f0)+_0x3ff61a['ladder']+')','adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()}),_0xd5e512+=_0x431c46,_0xb6b5cb++;}else _0x55ddc6++,console['warn'](_0xec1222(0x277)+_0x3ff61a['username']+'\x20('+_0x164c8e+')');}catch(_0x4afb8b){_0x55ddc6++,console[_0xec1222(0x391)]('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x4afb8b);}}await _0x12a027[_0xec1222(0x25e)]();for(const _0x485f91 of _0x161790){await addDoc(collection(db,_0xec1222(0x338)),_0x485f91);}showNotification(_0xec1222(0x38f)+_0xb6b5cb+'/'+_0x55a7cb+'\x20pilots...',_0xec1222(0x181));}showNotification('Complete!\x20Awarded\x20'+_0xd5e512+_0xec1222(0x2d5)+_0xb6b5cb+'\x20pilots.\x20Errors:\x20'+_0x55ddc6,_0xec1222(0x1ea)),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x1761ec){console['error']('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x1761ec),showNotification('Error:\x20'+_0x1761ec['message'],_0xec1222(0x391));}}function setupManageRibbonsSection(){const _0x5e0ba1=a2_0x528bb8;console['log'](_0x5e0ba1(0x2c3));const _0xa8f31b=document[_0x5e0ba1(0x209)]('ribbon-user-search');_0xa8f31b&&_0xa8f31b['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x2b0f59=document['getElementById']('search-ribbon-user-btn');_0x2b0f59&&_0x2b0f59['addEventListener'](_0x5e0ba1(0x2f3),searchRibbonUser);const _0x559a45=document['getElementById'](_0x5e0ba1(0x19a));_0x559a45&&_0x559a45[_0x5e0ba1(0x221)]('submit',addRibbon),_0xa8f31b&&_0xa8f31b['addEventListener']('keypress',function(_0x45f912){const _0x34204d=_0x5e0ba1;_0x45f912[_0x34204d(0x38b)]==='Enter'&&(_0x45f912[_0x34204d(0x30b)](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x566b27,_0x50b033,_0x88c6a8,_0x391b7e=''){const _0x1b2977=a2_0x528bb8,_0x13492b=doc(db,_0x1b2977(0x321),_0x566b27),_0x30ecac=await getDoc(_0x13492b);if(!_0x30ecac[_0x1b2977(0x3d4)]())throw new Error('User\x20not\x20found');const _0xdac11e=_0x30ecac[_0x1b2977(0x39d)](),_0x5f2672=_0xdac11e['points']!==undefined?_0xdac11e[_0x1b2977(0x266)]:0x0;_0xdac11e[_0x1b2977(0x266)]===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0xdac11e['displayName']||_0xdac11e[_0x1b2977(0x2a6)]||_0x1b2977(0x35d))),await updateDoc(_0x13492b,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x4b82b0=_0x5f2672;switch(_0x50b033){case'add':_0x4b82b0=_0x5f2672+_0x88c6a8;break;case'subtract':_0x4b82b0=Math[_0x1b2977(0x25a)](0x0,_0x5f2672-_0x88c6a8);break;case'set':_0x4b82b0=_0x88c6a8;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x13492b,{'points':_0x4b82b0,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x566b27,'userEmail':_0xdac11e['email']||'unknown','displayName':_0xdac11e[_0x1b2977(0x1b5)]||_0xdac11e['username']||_0x1b2977(0x1d1),'action':_0x50b033,'amount':_0x88c6a8,'previousPoints':_0x5f2672,'newPoints':_0x4b82b0,'reason':_0x391b7e,'adminEmail':auth['currentUser'][_0x1b2977(0x2a6)],'timestamp':serverTimestamp()});}function a2_0x4322(){const _0x4f6330=['input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','playerProfileUrl','trophy-rarity','all','rank-distribution-chart','role-username','Error\x20creating\x20activity\x20chart:','mapName','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','ribbon-user-search','history-end-date','Subtracted\x20','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','edit-highlight-mapVersion-input','Failed\x20to\x20send\x20Discord\x20notification:','quick-edit-points-form','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','User\x20\x22','Player\x20Name\x20is\x20required','Error\x20adding\x20player:','includes','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20','createElement','Unknown\x20Player','currentUser','.edit-article-btn','title','Title\x20and\x20content\x20are\x20required','info','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','manage-highlights','style','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','\x20Missing','username','manage-matches','modifiedBy','reset-history-filters','getAttribute','reset-matches-filters','Error\x20deleting\x20player:','highlight-id','Create\x20test\x20match\x20button\x20clicked','https://www.youtube.com/embed/','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','roleColor','\x20from\x20','rejected-count','toString','Error\x20creating\x20simple\x20test\x20match:','Error\x20finding\x20match:','No\x20users\x20found\x20in\x20userProfiles\x20collection','length','add-ribbon-form','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','Error\x20loading\x20user\x20points\x20history:','Firebase\x20connection\x20test\x20successful!','unknown','trophy-preview-container','Error\x20initializing\x20points\x20field:','appendChild','get','trophyId','migrate-points-btn','empty','dashboard','Silver',').\x20','Gold','toDate','afterend','no-results','return\x20(function()\x20','edit-highlight-id','Modal\x20close\x20button\x20clicked','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','closest','load-trophies-data','Loading\x20dashboard\x20overview\x20data...','edit-match-loser-demo','displayName','demote-form','playerRibbons','\x20total\x20matches\x20across\x20all\x20ladders','promote-player-btn','demote-username','\x20already\x20exists\x20in\x20','Wednesday','highlight-map-version','\x20Level\x20','Unranked','Error\x20searching\x20users:','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','active','Error\x20deleting\x20highlight:\x20','N/A','add-player-form','checked','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','.admin-section','Username\x20input\x20set\x20to:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20initializing\x20admin\x20dashboard:','timestamp','delete-match-confirm-modal','padding',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','role-name','Unknown\x20User','Dashboard\x20data\x20loaded\x20successfully','edit-highlight-description-input','assign-trophy-image','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','update','level','D2\x20Players','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Thursday','rgba(211,\x2047,\x2047,\x200.7)','cancel-set-elo-btn','Error\x20loading\x20highlights:','Admin\x20Adjustment','userId','edit-match-loser-suicides','.delete-match-btn','ladder','\x20by\x20UID:','fa-info-circle','desc','edit-wins','resimulate-modal','RejectedD2','success','5px','rgba(255,\x20255,\x20255,\x200.1)','flex','TestMap','highlight-player-profile','Bulk\x20award\x20to\x20all\x20pilots\x20(','edit-highlight-videoId-input','\x20Rank\x20Distribution','approvedMatchesD3','highlight-video-container','highlight-form','focus','User\x20','exception','Loading...','add','highlight-creator-image','Failed\x20to\x20update\x20player:\x20','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','role','doughnut','target','highlight-achievement-player','\x20-\x20','Remove\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','disabled','Sidebar\x20navigation\x20initialized\x20with\x20permissions','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','edit-highlight-type-select','getElementById','Create\x20test\x20match\x20form\x20not\x20found','toLowerCase','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','\x20(winner)\x20vs\x20','size','approvedMatchesD2','MAX_SAFE_INTEGER','name','award-item-form','.edit-btn','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','Modal\x20should\x20now\x20be\x20visible','NonParticipant','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','load-articles-data','Error\x20promoting\x20player:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22','Error\x20updating\x20player:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','history-start-date','matchInfo','load-dashboard-data','create-achievement-highlight-btn','addEventListener','#808080','Error\x20removing\x20ribbon','loading-cell','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','loserDemoLink','#matches-table-body\x20tr','DOMContentLoaded','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','stopPropagation','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','data-id','playersD3','Error\x20loading\x20points\x20data:','assign-trophy-title','load-matches-data','Starting\x20complete\x20match\x20resimulation...','Player\x20updated\x20successfully','toLocaleString','quick-edit-email','trophy-description','Error\x20saving\x20trophy:','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','admin_modification','Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...','match','\x20collection...','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','test-match-date','.no-results','Match\x20not\x20found\x20in\x20approved\x20matches','forEach','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','promote-username','warn','edit-match-id','createdAt','Updating\x20role\x20for\x20','points-history-table-body','console','No\x20user\x20ID\x20found\x20on\x20button','winnerUsername','\x20inactive\x20players','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','quick-edit-points-modal','textContent','Setting\x20up\x20matches\x20action\x20buttons...','Switched\x20to\x20','rankDistribution','manage-trophies','edit-highlight-loserScore-input','Awarded\x20','.view-player-btn','history-type-filter','Page\x20','\x20users\x20to\x20check...','max','message','log','videoId','commit','slice','Article\x20not\x20found','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','inactive-players','\x20quick\x20edit\x20buttons','manage-articles','load-inactive-players-data','points','elo-history-search','required','edit-highlight-matchDate-input','article-content','Error\x20saving\x20highlight:\x20','highlight-winner-score','value','visible','Bronze','trophyDefinitions','Map\x20Creator\x20is\x20required','quick-edit-display-name','quick-points-reason','#50C878','demotedBy','Attempting\x20to\x20promote\x20','No\x20user\x20profile\x20found\x20for\x20pilot\x20','Failed\x20to\x20award\x20item:\x20','reduce','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','imageUrl','Error\x20in\x20demotion:','Modal\x20cancel\x20button\x20clicked','load-users-data','entries','highlight-match-date','Error\x20loading\x20players:','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','setHours','currentTarget','validation-results-container','getRankName','display','set-elo-btn','innerHTML','contains','submit','bind','achievement-type','Trophy\x20updated\x20successfully','highlight-achievement-details','points-user-search','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','className','resimulate-match-id','selected-user-info','Failed\x20to\x20load\x20trophy\x20data','Error','create-test-match-modal','eloRating','edit-match-winner-comment','approvedMatches','Please\x20enter\x20a\x20valid\x20username','Failed\x20to\x20delete\x20trophy:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','input[name=\x22assign-ladder\x22]:checked','achievement','Non-Participant','toLocaleDateString','d1-next-page','./promotions.js','.close','querySelector','email','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','action','removeEventListener','Modal\x20element\x20found:','destroy','Setting\x20permissions\x20based\x20on\x20role:\x20','opponent','querySelectorAll','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','Found\x20user\x20in\x20','trophies-table-body','Match\x20ID\x20or\x20ladder\x20missing','W\x20/\x20','substring','creatorImageUrl','Bulk\x20award:\x20','Points\x20updated\x20successfully\x20for\x20user:','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','edit-match-map','highlight-map','\x20in\x20','reset','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','input[name=\x22quick-action\x22]:checked','Bulk\x20award:','keys','\x20ladder','Setting\x20up\x20Manage\x20Ribbons\x20section','\x20already\x20processed\x20matches.\x20Errors:\x20','#e0e0e0','Using\x20collection:\x20','.close-btn','loserUsername','sort','loserName','admin','lastVisible','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','\x20D3\x20pilots','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','Initial\x20Placement','data-ladder','positive-change','seconds','Friday','\x20points\x20to\x20','15px','submittedBy','Player\x20deleted\x20successfully','players','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','test-match-winner-username','role-filter','You\x20must\x20be\x20logged\x20in','loading','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','position','highlight-type','manage-players','Match','\x20D3\x20matches.\x20','demoLink','),\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','Player\x20not\x20found\x20in\x20','quick-edit-current-points','achievementDetails','highlight-match-date-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','assign-trophy-rarity','docs','set','block','creator','click','then','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Saturday','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','test','winnerName','achievementPlayer','rarity','awardedAt','article-form','-page-indicator','Points\x20data\x20loaded\x20successfully','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','amount','initial_placement','Failed\x20to\x20delete\x20match:\x20','Removed\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','Tuesday','award-all-pilots-btn','dataset','trim','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','preventDefault','adminEmail','\x20Exists','matchDate','allUsersPoints','apply','firstVisible','wins','set-elo-modal','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','Error\x20processing\x20','classList','insertAdjacentElement','Match\x20updated\x20successfully','edit-player-modal','Error\x20resolving\x20username\x20for\x20','Error\x20loading\x20users:','selected-user-points','Opening\x20create\x20test\x20match\x20modal','searchTerm','article-modal','approvedAt','userProfiles','Error\x20setting\x20user\x20role:','cancel-role-btn','highlight-submitted-by','user-roles-section','Promotion\x20notification\x20sent\x20to\x20Discord\x20bot','achievementType','body','cloneNode','All\x20fields\x20are\x20required','edit-match-ladder','\x20added\x20successfully\x20to\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','highlight-match-info-container','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','winnerComment','input[name=\x22demote-ladder\x22]:checked','catch','nonParticipants','activity-chart','Points\x20action\x20buttons\x20setup\x20complete','localeCompare','roleName','pointsHistory','\x20to\x20','elo-history','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','highlights','Never\x20played','edit-highlight-achievementPlayer-input','Trophy\x20ID\x20and\x20username\x20are\x20required','Simple\x20test\x20match\x20created\x20successfully','playerId','playersD2','highlight-video-id','</span>','player','Creating\x20test\x20match\x20without\x20player\x20validation...','articles','Committing\x20batch\x20update\x20for\x20','<span\x20class=\x22no-role\x22>None</span>','pending-count','Searching\x20for\x20player\x20in\x20','split','fa-check-circle','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','\x22\x20not\x20found\x20in\x20any\x20collection','set-role-modal','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','Error\x20adding\x20ribbon:','Creator','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','Failed\x20to\x20resimulate\x20match:\x20','highly-inactive','Won','Setting\x20up\x20points\x20action\x20buttons...','mapVersion','Error\x20removing\x20ribbon:','change','Achievement','Unknown','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','manage-levels-ribbons','promotion','Points\x20updated\x20successfully','mapPlayed','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','Error\x20loading\x20history:','\x20points.\x20Skipped\x20','\x22\x20already\x20has\x20this\x20trophy','Role\x20select\x20set\x20to:\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20','eloHistory','fa-exclamation-circle','Demoting\x20player\x20to\x20','.section-header','promotedBy','Error\x20in\x20bulk\x20award\x20points:','createdBy','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','match-details-container','<div\x20class=\x22loading\x22>Searching...</div>','setAttribute','opacity','highlight-modal','YouTube\x20Video\x20ID\x20(Optional)','Error\x20loading\x20dashboard:','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','lastMatch','matches-table-body','Modal\x20computed\x20styles:','push','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','highlight-map-creator','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20saving\x20highlight:','lastUpdated','cancel-trophy-btn','No\x20users\x20needed\x20points\x20field\x20initialization','ribbons','type','new-player-elo','fromDate','div','edit-match-loser-comment','key','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','src','Query\x20executed.\x20Empty:','Processed\x20','Please\x20select\x20a\x20user\x20and\x20store\x20item','error','matchLink','daysSinceMatch','elo','newElo','non-participant','Load\x20articles\x20data\x20clicked','\x20with\x20ELO\x20','map','\x20D2\x20pilots,\x20','loserId','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','data','resimulate-match-btn','edit-match-modal','create-match-highlight-btn','no-results-message','points-amount','replaceChild','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>','loss','Defaulted\x20to\x20D1\x20ladder','\x20for\x20user\x20\x22','toISOString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','startDate','assign-trophy-form','Attaching\x20cancel\x20button\x20listener.','\x20Successfully\x20initialized\x20points\x20field\x20for\x20','demote-ladder','Error\x20in\x20bulk\x20award\x20process:\x20','parentNode','remove','Profile','Error\x20loading\x20ribbons\x20data','#000000','manage-ranks','login.html','Failed\x20to\x20find\x20match:\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','loserScore','none','ribbon-target-ladder','TestWinner','mapCreator','#inactive-players-table-body\x20tr','Found\x20','assign-trophy-modal','0.6','\x27</td>','Winner\x20and\x20loser\x20usernames\x20are\x20required','demote-player-btn','page','#users-table-body\x20tr','Match\x20not\x20found','Deleting\x20match...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','cells','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','ribbon-type-select','Error\x20saving\x20match:','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','Load\x20highlights\x20data\x20clicked','Player\x20','eloHistoryD2','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>','exists','trophy-modal','-prev-page','previousElo','Match\x20deleted\x20successfully','input','high-points','Points\x20modified\x20successfully','.edit-highlight-btn','winnerScore'];a2_0x4322=function(){return _0x4f6330;};return a2_0x4322();}async function loadPointsOverview(){const _0x489c7b=a2_0x528bb8,_0x15ecb3=document['getElementById']('points-overview-table-body');if(!_0x15ecb3)return;_0x15ecb3['innerHTML']=_0x489c7b(0x182);try{const _0x26a093=collection(db,'userProfiles'),_0x1ce026=await getDocs(_0x26a093);if(_0x1ce026['empty']){_0x15ecb3[_0x489c7b(0x289)]=_0x489c7b(0x29d);return;}const _0x5667b3=[];let _0x49b60c=0x0;_0x1ce026['forEach'](_0x3de929=>{const _0x2fc301=_0x489c7b,_0x1b5bc6=_0x3de929[_0x2fc301(0x39d)](),_0x118a49=_0x1b5bc6['points']!==undefined?_0x1b5bc6['points']:0x0;_0x1b5bc6['points']===undefined&&_0x49b60c++,_0x5667b3['push']({'id':_0x3de929['id'],..._0x1b5bc6,'points':_0x118a49});}),_0x49b60c>0x0&&(console['log']('Found\x20'+_0x49b60c+_0x489c7b(0x207)),showNotification(_0x49b60c+_0x489c7b(0x170),'info')),_0x5667b3[_0x489c7b(0x2c9)]((_0x1f0f60,_0x32f62b)=>(_0x32f62b['points']||0x0)-(_0x1f0f60['points']||0x0)),window['allUsersPoints']=_0x5667b3,renderPointsOverview(_0x5667b3);}catch(_0x4489a2){console['error']('Error\x20loading\x20points\x20overview:',_0x4489a2),_0x15ecb3['innerHTML']=_0x489c7b(0x22b)+_0x4489a2['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x5bc041=a2_0x528bb8,_0x5ee684=document['getElementById']('ribbons-overview-table-body');if(!_0x5ee684)return;_0x5ee684[_0x5bc041(0x289)]=_0x5bc041(0x300);try{const [_0x325c52,_0x37903a,_0x29d90f]=await Promise['all']([getDocs(collection(db,_0x5bc041(0x1b7))),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x5ee684['innerHTML']='';const _0x521a5b=(_0x14ddea,_0x5ce67d)=>{_0x14ddea['forEach'](_0x13167c=>{const _0x462433=a2_0x628c,_0x5684b3=_0x13167c['data'](),_0x482d16=_0x5684b3['ribbons']||{},_0x4d6d72=Object['keys'](_0x482d16)['length'],_0x3e63ca=document[_0x462433(0x17b)]('tr');_0x3e63ca['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5684b3[_0x462433(0x187)]||'Unknown')+_0x462433(0x17a)+_0x5ce67d['toLowerCase']()+'\x22>'+_0x5ce67d+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4d6d72+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5684b3[_0x462433(0x382)]?new Date(_0x5684b3['lastUpdated']['seconds']*0x3e8)[_0x462433(0x2a1)]():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x5684b3['username']+'\x22\x20data-ladder=\x22'+_0x5ce67d+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5ee684['appendChild'](_0x3e63ca);});};_0x521a5b(_0x325c52,'D1'),_0x521a5b(_0x37903a,'D2'),_0x521a5b(_0x29d90f,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x28ffaa=>{const _0x4ebe1b=_0x5bc041;_0x28ffaa[_0x4ebe1b(0x221)]('click',function(){const _0x4a4e60=_0x4ebe1b,_0x5ff3f7=this['dataset']['username'],_0x44053d=this['dataset'][_0x4a4e60(0x1e3)];editUserRibbons(_0x5ff3f7,_0x44053d);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x1343ee){console['error']('Error\x20loading\x20ribbons:',_0x1343ee),_0x5ee684['innerHTML']=_0x5bc041(0x225),showNotification(_0x5bc041(0x3b3),_0x5bc041(0x391));}}async function searchRibbonUser(){const _0xfb6673=a2_0x528bb8,_0x2514ad=document[_0xfb6673(0x209)](_0xfb6673(0x16d))[_0xfb6673(0x26d)]['trim']();if(!_0x2514ad){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x15162b,_0x24a618,_0xde2f43]=await Promise[_0xfb6673(0x167)]([getDoc(doc(db,'playerRibbons',_0x2514ad)),getDoc(doc(db,'playerRibbonsD2',_0x2514ad)),getDoc(doc(db,'playerRibbonsD3',_0x2514ad))]);let _0x4ce1a6=null,_0x1c6c80=null;if(_0x15162b['exists']())_0x4ce1a6='D1',_0x1c6c80=_0x15162b[_0xfb6673(0x39d)]();else{if(_0x24a618['exists']())_0x4ce1a6='D2',_0x1c6c80=_0x24a618[_0xfb6673(0x39d)]();else _0xde2f43['exists']()&&(_0x4ce1a6='D3',_0x1c6c80=_0xde2f43['data']());}_0x4ce1a6?(document['getElementById']('current-ribbon-user')['textContent']=_0x2514ad,document[_0xfb6673(0x209)]('ribbon-target-user')['value']=_0x2514ad,document['getElementById'](_0xfb6673(0x3bb))['value']=_0x4ce1a6,document[_0xfb6673(0x209)]('user-ribbon-management')['style']['display']='block',displayCurrentRibbons(_0x1c6c80['ribbons']||{}),showNotification('Found\x20'+_0x2514ad+'\x20in\x20'+_0x4ce1a6+'\x20ladder',_0xfb6673(0x1ea))):showNotification('User\x20'+_0x2514ad+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x4e1c87){console['error']('Error\x20searching\x20user:',_0x4e1c87),showNotification('Error\x20searching\x20for\x20user',_0xfb6673(0x391));}}function displayCurrentRibbons(_0x542105){const _0x5eb243=a2_0x528bb8,_0x4e1b33=document[_0x5eb243(0x209)]('current-ribbons-list');if(!_0x4e1b33)return;_0x4e1b33[_0x5eb243(0x289)]='';if(Object['keys'](_0x542105)['length']===0x0){_0x4e1b33[_0x5eb243(0x289)]='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object[_0x5eb243(0x27f)](_0x542105)['forEach'](([_0x440477,_0x10db62])=>{const _0x1c15b8=_0x5eb243,_0x1b524c=document['createElement']('div');_0x1b524c['className']='ribbon-item',_0x1b524c['innerHTML']=_0x1c15b8(0x305)+_0x440477+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x10db62[_0x1c15b8(0x1d8)]||0x1)+_0x1c15b8(0x3b8)+(_0x10db62[_0x1c15b8(0x2fc)]?new Date(_0x10db62[_0x1c15b8(0x2fc)][_0x1c15b8(0x2d3)]*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x440477+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4e1b33['appendChild'](_0x1b524c);}),document[_0x5eb243(0x2af)]('.remove-ribbon-btn')['forEach'](_0x5cad7d=>{_0x5cad7d['addEventListener']('click',function(){const _0x26e0f3=this['dataset']['ribbon'];removeRibbon(_0x26e0f3);});});}async function addRibbon(_0x21b9f4){const _0x102119=a2_0x528bb8;_0x21b9f4['preventDefault']();const _0x12a36d=document['getElementById']('ribbon-target-user')['value'],_0x25fc63=document[_0x102119(0x209)]('ribbon-target-ladder')['value'],_0x13ada4=document[_0x102119(0x209)]('ribbon-type-select')['value'],_0x233251=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x12a36d||!_0x25fc63||!_0x13ada4||!_0x233251){showNotification('Please\x20fill\x20all\x20fields',_0x102119(0x391));return;}try{const _0x1a538a='playerRibbons'+(_0x25fc63==='D1'?'':_0x25fc63),_0x4ad063=doc(db,_0x1a538a,_0x12a36d),_0x2bc85f=await getDoc(_0x4ad063),_0x19748c=_0x2bc85f['exists']()?_0x2bc85f['data']()[_0x102119(0x385)]||{}:{};_0x19748c[_0x13ada4]={'level':_0x233251,'awardedAt':serverTimestamp()},await setDoc(_0x4ad063,{'username':_0x12a36d,'ladder':_0x25fc63,'ribbons':_0x19748c,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x13ada4+_0x102119(0x1be)+_0x233251+'\x20to\x20'+_0x12a36d,'success'),displayCurrentRibbons(_0x19748c),document['getElementById'](_0x102119(0x3cc))['value']='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x11ff21){console[_0x102119(0x391)](_0x102119(0x352),_0x11ff21),showNotification('Error\x20adding\x20ribbon',_0x102119(0x391));}}async function removeRibbon(_0x201e76){const _0x219e06=a2_0x528bb8,_0x41929f=document['getElementById']('ribbon-target-user')[_0x219e06(0x26d)],_0x33dd55=document['getElementById']('ribbon-target-ladder')[_0x219e06(0x26d)];if(!confirm(_0x219e06(0x203)+_0x201e76+'\x20from\x20'+_0x41929f+'?'))return;try{const _0x54aa3d=_0x219e06(0x1b7)+(_0x33dd55==='D1'?'':_0x33dd55),_0x41602e=doc(db,_0x54aa3d,_0x41929f),_0x2c8685=await getDoc(_0x41602e),_0x4d5e4a=_0x2c8685[_0x219e06(0x3d4)]()?_0x2c8685[_0x219e06(0x39d)]()[_0x219e06(0x385)]||{}:{};delete _0x4d5e4a[_0x201e76],await setDoc(_0x41602e,{'username':_0x41929f,'ladder':_0x33dd55,'ribbons':_0x4d5e4a,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x219e06(0x304)+_0x201e76+_0x219e06(0x193)+_0x41929f,'success'),displayCurrentRibbons(_0x4d5e4a);}catch(_0x508898){console['error'](_0x219e06(0x35a),_0x508898),showNotification(_0x219e06(0x223),'error');}}function editUserRibbons(_0x53fae3,_0x203933){const _0x5cfd04=a2_0x528bb8;document[_0x5cfd04(0x209)]('ribbon-user-search')['value']=_0x53fae3,searchRibbonUser();}