const a19_0x1090ce=a19_0x25c5,a19_0x2e26b5=(function(){let _0x205355=!![];return function(_0x355996,_0x4d7155){const _0x39f244=_0x205355?function(){if(_0x4d7155){const _0x2a342e=_0x4d7155['apply'](_0x355996,arguments);return _0x4d7155=null,_0x2a342e;}}:function(){};return _0x205355=![],_0x39f244;};}()),a19_0x588521=a19_0x2e26b5(this,function(){const _0x5a7847=a19_0x25c5,_0x5d466f=function(){let _0xfb865f;try{_0xfb865f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2494fc){_0xfb865f=window;}return _0xfb865f;},_0x3e7e2a=_0x5d466f(),_0x1dfbbf=_0x3e7e2a['console']=_0x3e7e2a['console']||{},_0x4a9062=['log',_0x5a7847(0x1f6),'info','error','exception','table','trace'];for(let _0x4f9f5c=0x0;_0x4f9f5c<_0x4a9062[_0x5a7847(0x1fa)];_0x4f9f5c++){const _0x5cdd7e=a19_0x2e26b5['constructor']['prototype'][_0x5a7847(0x1fd)](a19_0x2e26b5),_0x2730d8=_0x4a9062[_0x4f9f5c],_0x568e6e=_0x1dfbbf[_0x2730d8]||_0x5cdd7e;_0x5cdd7e['__proto__']=a19_0x2e26b5[_0x5a7847(0x1fd)](a19_0x2e26b5),_0x5cdd7e[_0x5a7847(0x1f7)]=_0x568e6e[_0x5a7847(0x1f7)][_0x5a7847(0x1fd)](_0x568e6e),_0x1dfbbf[_0x2730d8]=_0x5cdd7e;}});a19_0x588521();function a19_0x1516(){const _0x22d732=['blockedOperations','[FirebaseIdle]\x20Resuming\x20listeners:','includes','warn','toString','resumeAllListeners','[FirebaseIdle]\x20Listeners\x20resumed','length','[FirebaseIdle]\x20Listener\x20created:\x20','[FirebaseIdle]\x20Debug\x20mode\x20','bind','activeListeners','catch','system','debug','[FirebaseIdle]\x20Blocked\x20','error','resumeSession','pendingTimeout','suspendSession','[FirebaseIdle]\x20Creating\x20listener:\x20','operationType','size','_suspendedListeners','suspendAllListeners','\x20operations:\x20','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','remove','pendingOperations','finally','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','getDocuments','addDocument','resource-exhausted','[FirebaseIdle]\x20Successfully\x20resumed\x20listener:','getElementById','network','random','\x20operation','safeOperation','[FirebaseIdle]\x20Active\x20listeners:\x20','log','RDL_SESSION_SUSPENDED','checkSessionActive','query','set','[FirebaseIdle]\x20Resuming\x20listener:','all','get'];a19_0x1516=function(){return _0x22d732;};return a19_0x1516();}function a19_0x25c5(_0x50721c,_0x2606f9){const _0x588521=a19_0x1516();return a19_0x25c5=function(_0x2e26b5,_0x470435){_0x2e26b5=_0x2e26b5-0x1f3;let _0x15167e=_0x588521[_0x2e26b5];return _0x15167e;},a19_0x25c5(_0x50721c,_0x2606f9);}import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x3cc7ce=a19_0x25c5;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this[_0x3cc7ce(0x201)]=![];}['checkSessionActive'](){const _0x37d6c9=a19_0x25c5;if(window[_0x37d6c9(0x21d)]===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this[_0x37d6c9(0x1f3)]||0x0)+0x1,this[_0x37d6c9(0x1f3)]%0xa===0x0&&console[_0x37d6c9(0x1f6)](_0x37d6c9(0x202)+this[_0x37d6c9(0x1f3)]+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async[a19_0x1090ce(0x21a)](_0x28c35a,_0x1df4c1,..._0x319dc8){const _0x5638e1=a19_0x1090ce;if(!this['checkSessionActive']()){const _0x22664e=_0x1df4c1+'-'+Date['now']()+'-'+Math[_0x5638e1(0x218)]()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x22664e,{'operation':_0x28c35a,'operationType':_0x1df4c1,'args':_0x319dc8}),!this[_0x5638e1(0x205)]&&(this[_0x5638e1(0x205)]=setTimeout(()=>{const _0x11e818=_0x5638e1;this['pendingOperations']['clear'](),this[_0x11e818(0x205)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x28c35a(..._0x319dc8);}catch(_0x353809){if(_0x353809['code']==='unavailable'||_0x353809['code']===_0x5638e1(0x214)||_0x353809['message']&&_0x353809['message'][_0x5638e1(0x1f5)](_0x5638e1(0x217)))return handleNetworkError(),null;throw _0x353809;}}async['getDocument'](_0x288124){const _0x1415c4=a19_0x1090ce;return this['safeOperation'](getDoc,_0x1415c4(0x223),_0x288124);}async[a19_0x1090ce(0x212)](_0x3b849c){const _0x384010=a19_0x1090ce;return this[_0x384010(0x21a)](getDocs,_0x384010(0x21f),_0x3b849c);}async[a19_0x1090ce(0x213)](_0x2acbc9,_0x5ad174){const _0xaa0fd2=a19_0x1090ce;return this[_0xaa0fd2(0x21a)](addDoc,'add',_0x2acbc9,_0x5ad174);}async['setDocument'](_0x4a5c02,_0x1b082d,_0x179c85={}){return this['safeOperation'](setDoc,'set',_0x4a5c02,_0x1b082d,_0x179c85);}async['updateDocument'](_0x417331,_0x2fc5e7){return this['safeOperation'](updateDoc,'update',_0x417331,_0x2fc5e7);}async['deleteDocument'](_0x4e6f6b){return this['safeOperation'](deleteDoc,'delete',_0x4e6f6b);}[a19_0x1090ce(0x20b)](){const _0x303c71=a19_0x1090ce;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners'][_0x303c71(0x209)]),this[_0x303c71(0x20a)]=new Map(this['activeListeners']),this['activeListeners']['forEach']((_0xc3d66f,_0x521900)=>{const _0x50d195=_0x303c71;console[_0x50d195(0x21c)]('[FirebaseIdle]\x20Suspending\x20listener:',_0x521900);if(typeof _0xc3d66f==='function')try{_0xc3d66f(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x521900);}catch(_0x5cef17){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x521900,_0x5cef17);}}),this['activeListeners']['clear']();if(this['debug']){const _0x226ffd=document['createElement']('div');_0x226ffd['id']='firebase-suspend-indicator',_0x226ffd['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x226ffd['textContent']='Firebase:\x20Suspended',document['body']['appendChild'](_0x226ffd);}console[_0x303c71(0x21c)]('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x4632a6=a19_0x1090ce;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log'](_0x4632a6(0x1f4),this['_suspendedListeners']['size']),this['_suspendedListeners']['forEach']((_0xeb7c2a,_0x2f32a6)=>{const _0x279c0a=_0x4632a6;console['log'](_0x279c0a(0x221),_0x2f32a6);try{if(typeof _0xeb7c2a==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x2f32a6);return;}const {query:_0x44bab0,callback:_0x5e7080,options:_0x1c0ad0}=_0xeb7c2a;if(_0x44bab0&&_0x5e7080){const _0x19db80=onSnapshot(_0x44bab0,_0x5e7080,_0x1c0ad0||{});this['activeListeners'][_0x279c0a(0x220)](_0x2f32a6,_0x19db80),console['log'](_0x279c0a(0x215),_0x2f32a6);}}catch(_0x4e21f7){console[_0x279c0a(0x203)]('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x2f32a6,_0x4e21f7);}}),this['_suspendedListeners']['clear']();const _0x134ecc=document[_0x4632a6(0x216)]('firebase-suspend-indicator');_0x134ecc&&_0x134ecc[_0x4632a6(0x20e)](),console['log'](_0x4632a6(0x1f9));}['createListener'](_0x599ff4,_0x48aacb,_0x35b979={},_0x451e58=null){const _0xc5bf1a=a19_0x1090ce,_0x5bf14a=_0x451e58||'listener_'+Date['now']()+'_'+Math['random']()[_0xc5bf1a(0x1f7)](0x24)['substr'](0x2,0x9);this['debug']&&console['log'](_0xc5bf1a(0x207)+_0x5bf14a);if(!this[_0xc5bf1a(0x21e)]())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x5bf14a),()=>{};try{const _0x1bf36a=onSnapshot(_0x599ff4,_0x48aacb,_0x35b979);return this['activeListeners'][_0xc5bf1a(0x220)](_0x5bf14a,{'unsubscribe':_0x1bf36a,'query':_0x599ff4,'callback':_0x48aacb,'options':_0x35b979}),this['debug']&&(console[_0xc5bf1a(0x21c)](_0xc5bf1a(0x1fb)+_0x5bf14a),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners'][_0xc5bf1a(0x209)])),()=>{const _0x52aeac=_0xc5bf1a;this['debug']&&console[_0x52aeac(0x21c)]('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x5bf14a);try{_0x1bf36a(),this[_0x52aeac(0x1fe)]['delete'](_0x5bf14a),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x5bf14a),console['log'](_0x52aeac(0x21b)+this['activeListeners']['size']));}catch(_0x9786dd){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x5bf14a+':',_0x9786dd);}};}catch(_0x38d5d8){return console['error'](_0xc5bf1a(0x211)+_0x5bf14a+':',_0x38d5d8),()=>{};}}['executePendingOperations'](_0x487860=a19_0x1090ce(0x222)){const _0xd4cc12=a19_0x1090ce;console['log']('Executing\x20pending\x20'+_0x487860+_0xd4cc12(0x20c)+this['pendingOperations']['size']+'\x20total\x20operations');const _0x41b7a5=new Map(this['pendingOperations']);this['pendingOperations']['clear'](),_0x41b7a5['forEach']((_0x52060b,_0x21ea1f)=>{const _0x517a55=_0xd4cc12;_0x487860==='all'||_0x52060b['operationType']===_0x487860?(console['log']('Executing\x20delayed\x20'+_0x52060b[_0x517a55(0x208)]+_0x517a55(0x219)),this[_0x517a55(0x21a)](_0x52060b['operation'],_0x52060b['operationType'],..._0x52060b['args'])[_0x517a55(0x1ff)](_0x478ae0=>console[_0x517a55(0x203)]('Error\x20executing\x20pending\x20operation:',_0x478ae0))):this[_0x517a55(0x20f)]['set'](_0x21ea1f,_0x52060b);});}['enableDebug'](_0x2af970=!![]){const _0xb41d14=a19_0x1090ce;this['debug']=_0x2af970,console['log'](_0xb41d14(0x1fc)+(_0x2af970?'enabled':'disabled'));if(_0x2af970){const _0x41ab32=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console[_0xb41d14(0x21c)]('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,_0xb41d14(0x200),'test'))['then'](_0x54ccb3=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x54ccb3);})['catch'](_0x67c005=>{const _0x493296=_0xb41d14;console['log'](_0x493296(0x20d),_0x67c005);})[_0xb41d14(0x210)](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x41ab32;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0xcfcedf=a19_0x1090ce,_0x1d7c23=window[_0xcfcedf(0x206)]||function(){},_0x360a96=window[_0xcfcedf(0x204)]||function(){};window['suspendSession']=function(){_0x1d7c23(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){const _0x4af923=_0xcfcedf;_0x360a96(),firebaseIdle[_0x4af923(0x1f8)]();};}export default firebaseIdle;