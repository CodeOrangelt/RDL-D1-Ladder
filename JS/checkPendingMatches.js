const a10_0x1554b0=a10_0x397a,a10_0x4cff6d=(function(){let _0x5959e0=!![];return function(_0x2ab177,_0x5cde9c){const _0x470eea=_0x5959e0?function(){if(_0x5cde9c){const _0x5eadae=_0x5cde9c['apply'](_0x2ab177,arguments);return _0x5cde9c=null,_0x5eadae;}}:function(){};return _0x5959e0=![],_0x470eea;};}()),a10_0x1638d5=a10_0x4cff6d(this,function(){const _0x5d8076=a10_0x397a;let _0x397ee7;try{const _0x4e4cdf=Function('return\x20(function()\x20'+_0x5d8076(0x1fb)+');');_0x397ee7=_0x4e4cdf();}catch(_0x41eeca){_0x397ee7=window;}const _0x3dc259=_0x397ee7[_0x5d8076(0x1fa)]=_0x397ee7['console']||{},_0x3402ee=[_0x5d8076(0x1f6),'warn','info','error',_0x5d8076(0x210),'table','trace'];for(let _0x11f0b0=0x0;_0x11f0b0<_0x3402ee['length'];_0x11f0b0++){const _0x44f500=a10_0x4cff6d[_0x5d8076(0x1f3)]['prototype']['bind'](a10_0x4cff6d),_0x4f964a=_0x3402ee[_0x11f0b0],_0x3864e1=_0x3dc259[_0x4f964a]||_0x44f500;_0x44f500['__proto__']=a10_0x4cff6d['bind'](a10_0x4cff6d),_0x44f500[_0x5d8076(0x1f4)]=_0x3864e1[_0x5d8076(0x1f4)]['bind'](_0x3864e1),_0x3dc259[_0x4f964a]=_0x44f500;}});a10_0x1638d5();function a10_0x3951(){const _0x1e7ea3=['approved','addEventListener','username','constructor','toString','disconnect','log','display','onAuthStateChanged','top','console','{}.constructor(\x22return\x20this\x22)(\x20)','50%','report-match-notification','uid','absolute','winnerEmail','error','users','borderRadius','pendingMatches','exists','winnerUsername','getItem','all','2px\x20solid\x20white','observe','currentUsername','docs','data','style','10px','exception','setItem','right','stringify','none','currentUser','empty'];a10_0x3951=function(){return _0x1e7ea3;};return a10_0x3951();}import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x3eaff9=![]){const _0x426945=a10_0x397a,_0x2c9410=Date['now'](),_0x367b25=checkNotificationCache();if(_0x367b25!==null&&!_0x3eaff9){updateNotificationDot(_0x367b25);if(_0x2c9410-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x2c9410;const _0x2c6b26=auth[_0x426945(0x215)];if(!_0x2c6b26){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x41e319,_0x3cdcbb,_0x55cd3d]=await Promise[_0x426945(0x208)]([checkForPendingMatchesInCollection(_0x2c6b26,_0x426945(0x204)),checkForPendingMatchesInCollection(_0x2c6b26,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x2c6b26,'pendingMatchesD3')]),_0x1d9b34=_0x41e319||_0x3cdcbb||_0x55cd3d;updateNotificationDot(_0x1d9b34),updateNotificationCache(_0x1d9b34);}catch(_0x66de0a){console[_0x426945(0x201)]('Error\x20checking\x20pending\x20matches:',_0x66de0a);}}function a10_0x397a(_0x3a98b5,_0x35b7dd){const _0x1638d5=a10_0x3951();return a10_0x397a=function(_0x4cff6d,_0x2862b8){_0x4cff6d=_0x4cff6d-0x1f0;let _0x39510d=_0x1638d5[_0x4cff6d];return _0x39510d;},a10_0x397a(_0x3a98b5,_0x35b7dd);}async function checkForPendingMatchesInCollection(_0x20c61b,_0x50633a){const _0x36f1b6=a10_0x397a,_0x3c3946=_0x20c61b[_0x36f1b6(0x1fe)],_0x5e8852=_0x20c61b['email'],_0x3a9b17=query(collection(db,_0x50633a),where('winnerId','==',_0x3c3946),where(_0x36f1b6(0x1f0),'==',![])),_0x3c0849=await getDocs(_0x3a9b17);if(!_0x3c0849[_0x36f1b6(0x216)])return!![];if(_0x5e8852){const _0x339359=query(collection(db,_0x50633a),where(_0x36f1b6(0x200),'==',_0x5e8852),where(_0x36f1b6(0x1f0),'==',![])),_0x1f401e=await getDocs(_0x339359);if(!_0x1f401e[_0x36f1b6(0x216)])return!![];}let _0x57bd4d=await getUsernameFromAllSources(_0x20c61b);if(_0x57bd4d){const _0x5a2959=query(collection(db,_0x50633a),where(_0x36f1b6(0x206),'==',_0x57bd4d),where('approved','==',![])),_0x3cfa71=await getDocs(_0x5a2959);if(!_0x3cfa71['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x5271fa){const _0x512664=a10_0x397a,_0x12c2a8=localStorage[_0x512664(0x207)]('currentUsername');if(_0x12c2a8)return _0x12c2a8;try{const [_0x4881ae,_0x2ff4d4,_0x293fbf]=await Promise[_0x512664(0x208)]([getDocs(query(collection(db,'players'),where('userId','==',_0x5271fa['uid']))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x5271fa['uid']))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x5271fa['uid'])))]);if(!_0x4881ae['empty']){const _0xd8d2ad=_0x4881ae[_0x512664(0x20c)][0x0][_0x512664(0x20d)]()['username'];return localStorage['setItem']('currentUsername',_0xd8d2ad),_0xd8d2ad;}if(!_0x2ff4d4['empty']){const _0x597777=_0x2ff4d4['docs'][0x0][_0x512664(0x20d)]()['username'];return localStorage['setItem']('currentUsername',_0x597777),_0x597777;}if(!_0x293fbf[_0x512664(0x216)]){const _0xb2706e=_0x293fbf[_0x512664(0x20c)][0x0]['data']()[_0x512664(0x1f2)];return localStorage[_0x512664(0x211)](_0x512664(0x20b),_0xb2706e),_0xb2706e;}const _0x2f6b43=await getDoc(doc(db,_0x512664(0x202),_0x5271fa['uid']));if(_0x2f6b43[_0x512664(0x205)]()&&_0x2f6b43['data']()['username']){const _0x44af58=_0x2f6b43['data']()['username'];return localStorage['setItem']('currentUsername',_0x44af58),_0x44af58;}}catch(_0x3bf8af){console['error']('Error\x20fetching\x20username:',_0x3bf8af);}if(_0x5271fa['email'])return _0x5271fa['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x5f064f){const _0x339766=a10_0x397a,_0x1ca2c0={'status':_0x5f064f,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[_0x339766(0x213)](_0x1ca2c0));}function checkNotificationCache(){const _0x38513c=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x38513c)return null;try{const {status:_0x3537ab,timestamp:_0xa90023}=JSON['parse'](_0x38513c),_0xbf685=Date['now']();if(_0xbf685-_0xa90023<CACHE_EXPIRY)return _0x3537ab;}catch(_0x158678){}return null;}export function updateNotificationDot(_0x427522){const _0x2e37e1=a10_0x397a,_0x3eb540=new MutationObserver((_0x16899b,_0x537f13)=>{const _0x59e22c=a10_0x397a,_0x123cac=document['getElementById']('report-match-notification');_0x123cac&&(updateDotStyle(_0x123cac,_0x427522),_0x537f13[_0x59e22c(0x1f5)]());});_0x3eb540[_0x2e37e1(0x20a)](document['body'],{'childList':!![],'subtree':!![]});const _0x30d988=document['getElementById'](_0x2e37e1(0x1fd));_0x30d988&&(updateDotStyle(_0x30d988,_0x427522),_0x3eb540['disconnect']()),setTimeout(()=>_0x3eb540[_0x2e37e1(0x1f5)](),0x1388);}function updateDotStyle(_0x109e24,_0x4bef94){const _0x3ea851=a10_0x397a;_0x4bef94?(_0x109e24['style']['display']='block',_0x109e24[_0x3ea851(0x20e)]['backgroundColor']='#ff3b30',_0x109e24['style']['width']='10px',_0x109e24[_0x3ea851(0x20e)]['height']=_0x3ea851(0x20f),_0x109e24[_0x3ea851(0x20e)]['position']=_0x3ea851(0x1ff),_0x109e24['style'][_0x3ea851(0x1f9)]='-5px',_0x109e24['style'][_0x3ea851(0x212)]='-8px',_0x109e24[_0x3ea851(0x20e)][_0x3ea851(0x203)]=_0x3ea851(0x1fc),_0x109e24['style']['border']=_0x3ea851(0x209),_0x109e24[_0x3ea851(0x20e)]['zIndex']='999'):_0x109e24['style'][_0x3ea851(0x1f7)]=_0x3ea851(0x214);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10_0x1554b0(0x1f1)]('DOMContentLoaded',()=>{const _0xbf0b1c=a10_0x1554b0;setTimeout(()=>checkPendingMatches(),0x1f4),auth[_0xbf0b1c(0x1f8)](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});