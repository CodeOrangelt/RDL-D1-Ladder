const a6_0x13bab5=a6_0x51c6,a6_0x2810a7=(function(){let _0x33e92a=!![];return function(_0x2bc1dd,_0x4a4fcc){const _0xf7dcfb=_0x33e92a?function(){if(_0x4a4fcc){const _0x45c1d4=_0x4a4fcc['apply'](_0x2bc1dd,arguments);return _0x4a4fcc=null,_0x45c1d4;}}:function(){};return _0x33e92a=![],_0xf7dcfb;};}()),a6_0x5aa5ad=a6_0x2810a7(this,function(){const _0x3e7708=a6_0x51c6,_0x2353b9=function(){const _0x271df6=a6_0x51c6;let _0x41dd32;try{_0x41dd32=Function(_0x271df6(0x23b)+_0x271df6(0x1f4)+');')();}catch(_0x589427){_0x41dd32=window;}return _0x41dd32;},_0x15474e=_0x2353b9(),_0x56b32b=_0x15474e['console']=_0x15474e['console']||{},_0x5e48ae=['log','warn','info',_0x3e7708(0x1e5),'exception','table',_0x3e7708(0x239)];for(let _0x53d2e3=0x0;_0x53d2e3<_0x5e48ae['length'];_0x53d2e3++){const _0x13fac6=a6_0x2810a7['constructor'][_0x3e7708(0x1cf)]['bind'](a6_0x2810a7),_0x56dd1f=_0x5e48ae[_0x53d2e3],_0x3176da=_0x56b32b[_0x56dd1f]||_0x13fac6;_0x13fac6['__proto__']=a6_0x2810a7['bind'](a6_0x2810a7),_0x13fac6['toString']=_0x3176da[_0x3e7708(0x1e9)]['bind'](_0x3176da),_0x56b32b[_0x56dd1f]=_0x13fac6;}});a6_0x5aa5ad();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':a6_0x13bab5(0x20d),'muteFromDate':new Date('2025-07-02')['getTime']()}];function isUsernameMuted(_0x2d9beb,_0x222efe){const _0x2ea192=a6_0x13bab5;if(!_0x2d9beb)return![];const _0x3ccafa=mutedUsers[_0x2ea192(0x1de)](_0xc51f1=>_0xc51f1[_0x2ea192(0x226)]===_0x2d9beb);if(!_0x3ccafa)return![];if(!_0x222efe)return!![];const _0x2602ee=_0x222efe instanceof Date?_0x222efe['getTime']():_0x222efe['seconds']?_0x222efe['seconds']*0x3e8:Date['now']();return _0x2602ee>=_0x3ccafa['muteFromDate'];}function filterComment(_0x57192d,_0x42adfc,_0x1e3129){if(!_0x57192d)return'-';if(isUsernameMuted(_0x42adfc,_0x1e3129))return'Muted.';return _0x57192d;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x2e7913,_0x5de21b,_0x5634ce){const _0x212875='u:'+(_0x5634ce['filterUsername']||'');return'previewCache_'+_0x2e7913+'_p'+_0x5de21b+'_'+_0x212875;}function getCachedPage(_0x55486c){const _0x5d2169=sessionStorage['getItem'](_0x55486c);if(_0x5d2169)try{return JSON['parse'](_0x5d2169);}catch(_0x2ce7ba){return console['error']('Failed\x20to\x20parse\x20cache:',_0x2ce7ba),sessionStorage['removeItem'](_0x55486c),null;}return null;}function cachePage(_0x384446,_0x49a141){const _0x1176f7=a6_0x13bab5;try{sessionStorage[_0x1176f7(0x1c8)](_0x384446,JSON['stringify'](_0x49a141));}catch(_0x5dee12){console[_0x1176f7(0x1e5)]('Failed\x20to\x20cache\x20data:',_0x5dee12);}}function getEloColor(_0x5ef036){const _0x5da0ee=a6_0x13bab5,_0x4abe63=Number(_0x5ef036);if(_0x4abe63>=0x7d0)return'#50C878';else{if(_0x4abe63>=0x708)return _0x5da0ee(0x1ac);else{if(_0x4abe63>=0x640)return _0x5da0ee(0x1d6);else{if(_0x4abe63>=0x578)return _0x5da0ee(0x1c6);else return'#808080';}}}}function formatDate(_0x4b2a5d,_0x57373d=![]){const _0x2f022e=a6_0x13bab5;if(!_0x4b2a5d||!_0x4b2a5d[_0x2f022e(0x247)])return'N/A';const _0x12d124=new Date(_0x4b2a5d[_0x2f022e(0x247)]*0x3e8);return _0x57373d?_0x12d124['toLocaleString']():_0x12d124['toLocaleDateString']();}function truncateComment(_0x1f123e,_0x57b0a7=0x1e){const _0x3bae28=a6_0x13bab5;if(!_0x1f123e)return'-';if(_0x1f123e['length']<=_0x57b0a7)return _0x1f123e;return _0x1f123e[_0x3bae28(0x204)](0x0,_0x57b0a7)+'...';}function formatCommentDate(_0x5980b3){const _0x508b8f=a6_0x13bab5;if(!_0x5980b3||!_0x5980b3['seconds'])return'';const _0x5c09e6=new Date(_0x5980b3['seconds']*0x3e8),_0x4b740c=new Date(),_0x395f0a=Math['abs'](_0x4b740c-_0x5c09e6),_0xcb5d8b=Math[_0x508b8f(0x1eb)](_0x395f0a/(0x3e8*0x3c*0x3c*0x18));if(_0xcb5d8b===0x0)return _0x508b8f(0x22c);else{if(_0xcb5d8b===0x1)return'Yesterday';else return _0xcb5d8b<0x7?_0xcb5d8b+_0x508b8f(0x240):_0x5c09e6['toLocaleDateString']();}}function setLoadingIndicator(_0x3b93c6){const _0x1fa4a2=a6_0x13bab5,_0x1ac0c7=document[_0x1fa4a2(0x214)](_0x1fa4a2(0x1d3));if(_0x1ac0c7)_0x1ac0c7[_0x1fa4a2(0x1bb)]['display']=_0x3b93c6?'block':'none';}export function updatePreviewLadderModeUI(){const _0xd0660a=a6_0x13bab5,_0x18ae91=document['getElementById']('preview-ladder-mode'),_0x35ff9f=document['getElementById'](_0xd0660a(0x1df)),_0x2669d6=document['getElementById']('preview-d2-button'),_0x3e4e6f=document['getElementById']('preview-d3-button');if(_0x18ae91)_0x18ae91['textContent']=previewState['currentMode'];if(_0x35ff9f)_0x35ff9f[_0xd0660a(0x234)]['toggle'](_0xd0660a(0x235),previewState['currentMode']==='D1');if(_0x2669d6)_0x2669d6['classList'][_0xd0660a(0x1fa)]('active',previewState[_0xd0660a(0x1b4)]==='D2');if(_0x3e4e6f)_0x3e4e6f['classList'][_0xd0660a(0x1fa)](_0xd0660a(0x235),previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x4352a6){const _0x2f2b76=a6_0x13bab5,_0xb69ffe=document['getElementById'](_0x2f2b76(0x1e4)),_0x2bd81a=document['getElementById']('previewNextPage'),_0x3f4809=document['getElementById']('previewPageInfo');if(!_0xb69ffe||!_0x2bd81a||!_0x3f4809)return;_0x3f4809['textContent']='Page\x20'+previewState['currentPage'],_0xb69ffe['disabled']=previewState['currentPage']<=0x1,_0x2bd81a[_0x2f2b76(0x25d)]=!_0x4352a6;}function setPreviewLoadingState(_0xb218e3){const _0x4bdb51=a6_0x13bab5;previewState['isLoading']=_0xb218e3,setLoadingIndicator(_0xb218e3);const _0x320534=document[_0x4bdb51(0x214)]('recent-matches-preview'),_0x50d19c=_0x320534?_0x320534['querySelector']('.matches-loading'):null,_0x2c0cd5=document['getElementById']('previewPrevPage'),_0x16d510=document['getElementById']('previewNextPage'),_0x4fd2c1=document['getElementById']('preview-d1-button'),_0x5d10eb=document['getElementById']('preview-d2-button'),_0x559f15=document['getElementById'](_0x4bdb51(0x1c7)),_0x43ec81=document['getElementById']('clearFilterBtn');if(_0x50d19c&&!_0xb218e3)_0x50d19c['style']['display']=_0x4bdb51(0x1b0);else _0x50d19c&&_0xb218e3&&(_0x50d19c['style']['display']=_0x4bdb51(0x1f7));!_0xb218e3&&_0x320534&&!_0x320534['querySelector']('.match-card')&&!_0x320534['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x320534['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState['filterUsername']?'\x20matching\x20filters':'')+'.</div>');if(_0x2c0cd5)_0x2c0cd5['disabled']=_0xb218e3||previewState['currentPage']<=0x1;if(_0x16d510)_0x16d510[_0x4bdb51(0x25d)]=_0xb218e3;if(_0x4fd2c1)_0x4fd2c1[_0x4bdb51(0x25d)]=_0xb218e3;if(_0x5d10eb)_0x5d10eb['disabled']=_0xb218e3;if(_0x559f15)_0x559f15[_0x4bdb51(0x25d)]=_0xb218e3;if(_0x43ec81)_0x43ec81['disabled']=_0xb218e3;}function applyClientFilters(_0x20c553){const _0x5242fc=a6_0x13bab5;if(!previewState['filterUsername'])return _0x20c553;const _0x390900=previewState['filterUsername'][_0x5242fc(0x1fd)]();return _0x20c553['filter'](_0x240c8e=>{const _0x41b856=(_0x240c8e['winnerUsername']||'')['toLowerCase'](),_0xc8d229=(_0x240c8e['loserUsername']||'')['toLowerCase']();return _0x41b856['includes'](_0x390900)||_0xc8d229['includes'](_0x390900);});}function applyEnhancedClientFilters(_0x49f1ac){const _0x1abf79=a6_0x13bab5;if(!hasEnhancedFilters())return _0x49f1ac;return _0x49f1ac[_0x1abf79(0x232)](_0x325462=>{const _0x3c2968=_0x1abf79;if(previewState['enhancedFilters'][_0x3c2968(0x24c)]){const _0xe8592c=previewState[_0x3c2968(0x1f9)]['pilots'][_0x3c2968(0x1fd)](),_0x26a3c5=(_0x325462['winnerUsername']||'')[_0x3c2968(0x1fd)](),_0x3eccd8=(_0x325462['loserUsername']||'')[_0x3c2968(0x1fd)]();if(!_0x26a3c5['includes'](_0xe8592c)&&!_0x3eccd8[_0x3c2968(0x1f8)](_0xe8592c))return![];}if(previewState['enhancedFilters'][_0x3c2968(0x24a)]){const _0x527a87=previewState['enhancedFilters']['levels']['toLowerCase'](),_0x181104=(_0x325462['mapPlayed']||'')[_0x3c2968(0x1fd)]();if(!_0x181104[_0x3c2968(0x1f8)](_0x527a87))return![];}if(previewState[_0x3c2968(0x1f9)][_0x3c2968(0x1dd)]['length']>0x0){const _0x472cd0=_0x325462['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames']['includes'](_0x472cd0))return![];}return!![];});}function a6_0x51c6(_0x2e75e4,_0x4276f9){const _0x5aa5ad=a6_0x1baf();return a6_0x51c6=function(_0x2810a7,_0x3d6fd9){_0x2810a7=_0x2810a7-0x1ac;let _0x1baf2f=_0x5aa5ad[_0x2810a7];return _0x1baf2f;},a6_0x51c6(_0x2e75e4,_0x4276f9);}function hasEnhancedFilters(){const _0x273b54=a6_0x13bab5;return previewState[_0x273b54(0x1f9)]['pilots']||previewState[_0x273b54(0x1f9)]['levels']||previewState['enhancedFilters']['subgames']['length']>0x0;}function clearEnhancedFilters(){const _0x22177c=a6_0x13bab5;previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document['getElementById'](_0x22177c(0x1d2))[_0x22177c(0x1ce)]='',document['getElementById'](_0x22177c(0x224))[_0x22177c(0x1ce)]='';const _0x7341b2=document[_0x22177c(0x214)]('filter-subgames');for(let _0x205ae2 of _0x7341b2[_0x22177c(0x21c)]){_0x205ae2[_0x22177c(0x22a)]=![];}}function jumpToPage(_0x3398d8){const _0x262472=a6_0x13bab5,_0x1106ec=document['getElementById'](_0x262472(0x244)),_0x1feab3=previewState['currentPage'];let _0x4e58e1=_0x1feab3;switch(_0x3398d8){case'start':_0x4e58e1=0x1;break;case _0x262472(0x242):_0x4e58e1=Math['max'](_0x1feab3+0xa,previewState[_0x262472(0x1e6)]||_0x1feab3+0xa);break;case'+1':_0x4e58e1=_0x1feab3+0x1;break;case'+5':_0x4e58e1=_0x1feab3+0x5;break;case'+10':_0x4e58e1=_0x1feab3+0xa;break;case'-1':_0x4e58e1=Math['max'](0x1,_0x1feab3-0x1);break;case'-5':_0x4e58e1=Math['max'](0x1,_0x1feab3-0x5);break;case _0x262472(0x209):_0x4e58e1=Math['max'](0x1,_0x1feab3-0xa);break;case _0x262472(0x1db):const _0x4aae5b=parseInt(_0x1106ec['value']);_0x4aae5b&&_0x4aae5b>0x0&&(_0x4e58e1=_0x4aae5b,_0x1106ec[_0x262472(0x1ce)]='');break;}_0x4e58e1!==_0x1feab3&&_0x4e58e1>0x0&&(previewState[_0x262472(0x1e8)]=_0x4e58e1,loadRecentMatchesPreview(_0x262472(0x25a)));}export async function loadRecentMatchesPreview(_0x2981ea=a6_0x13bab5(0x21e)){const _0x3ee344=a6_0x13bab5,_0x1f26fd=document['getElementById']('recent-matches-preview'),_0x2491ad=document['getElementById']('match-card-template');if(previewState[_0x3ee344(0x1c4)]||!_0x1f26fd||!_0x2491ad)return;_0x2981ea==='current'&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object[_0x3ee344(0x208)](sessionStorage)['forEach'](_0x14b107=>{_0x14b107['includes']('previewCache_'+previewState['currentMode'])&&sessionStorage['removeItem'](_0x14b107);}));let _0x2fb016=previewState[_0x3ee344(0x1e8)];if(_0x2981ea==='next')_0x2fb016++;else{if(_0x2981ea==='prev')_0x2fb016--;else _0x2981ea==='current'&&(_0x2fb016=0x1,previewState[_0x3ee344(0x1b8)]=null,previewState['lastVisible']=null);}if(_0x2fb016<0x1)_0x2fb016=0x1;const _0x489ed3=previewState[_0x3ee344(0x1e8)];previewState[_0x3ee344(0x1e8)]=_0x2fb016,updatePreviewPaginationControls(!![]);const _0x1e2749={'filterUsername':previewState['filterUsername']},_0x2a82af=getCacheKey(previewState['currentMode'],_0x2fb016,_0x1e2749),_0x202ae5=_0x2981ea!=='current'?getCachedPage(_0x2a82af):null;if(_0x202ae5){console[_0x3ee344(0x23c)]('Rendering\x20page\x20'+_0x2fb016+_0x3ee344(0x24d)),setPreviewLoadingState(!![]),renderMatchCards(_0x202ae5[_0x3ee344(0x200)]),updatePreviewPaginationControls(_0x202ae5['hasNextPage']),setPreviewLoadingState(![]);return;}console[_0x3ee344(0x23c)]('Cache\x20miss\x20for\x20page\x20'+_0x2fb016+_0x3ee344(0x248)),setPreviewLoadingState(!![]),_0x1f26fd['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x40e0a1=previewState['currentMode']==='D1'?'approvedMatches':previewState['currentMode']==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x12a98e=previewState[_0x3ee344(0x1b4)]==='D1'?_0x3ee344(0x25c):_0x3ee344(0x230);try{const _0x429c6c=collection(window['db'],_0x40e0a1);let _0x4c532a=[orderBy(_0x12a98e,'desc')];if(_0x2fb016===0x1)console['log'](_0x3ee344(0x23f)),_0x4c532a['push'](limit(previewState['matchesPerPage']));else{if(_0x2981ea===_0x3ee344(0x22f)&&previewState['lastVisible'])console['log']('Loading\x20next\x20page\x20using\x20cursor'),_0x4c532a['push'](startAfter(previewState['lastVisible'])),_0x4c532a['push'](limit(previewState['matchesPerPage']));else{console[_0x3ee344(0x23c)]('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x406d0d=_0x2fb016*previewState['matchesPerPage'];_0x4c532a['push'](limit(_0x406d0d));}}const _0x21af85=query(_0x429c6c,..._0x4c532a),_0x735f3e=await getDocs(_0x21af85);let _0x4e91b3=_0x735f3e['docs'];if(_0x2fb016>0x1&&_0x2981ea!==_0x3ee344(0x22f)){const _0x2874e6=(_0x2fb016-0x1)*previewState['matchesPerPage'];_0x4e91b3=_0x4e91b3[_0x3ee344(0x245)](_0x2874e6,_0x2874e6+previewState[_0x3ee344(0x254)]);}if(_0x4e91b3['length']===0x0){console[_0x3ee344(0x23c)](_0x3ee344(0x1b5));_0x2981ea==='next'&&(previewState['currentPage']=_0x489ed3,updatePreviewPaginationControls(![]));_0x1f26fd[_0x3ee344(0x218)]='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?'\x20matching\x20filters':'')+_0x3ee344(0x259),setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x4e91b3[0x0],previewState['lastVisible']=_0x4e91b3[_0x4e91b3['length']-0x1];const _0x45c24d=_0x4e91b3[_0x3ee344(0x1ae)](_0x176b87=>({'id':_0x176b87['id'],..._0x176b87['data']()}));let _0x5344c9=![];if(_0x4e91b3['length']===previewState['matchesPerPage']){const _0x24a46e=query(_0x429c6c,orderBy(_0x12a98e,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),_0x3f75cd=await getDocs(_0x24a46e);_0x5344c9=!_0x3f75cd['empty'];}const _0x598bc9=applyClientFilters(_0x45c24d),_0x349395={'docsData':_0x45c24d,'hasNextPage':_0x5344c9};cachePage(getCacheKey(previewState['currentMode'],previewState[_0x3ee344(0x1e8)],_0x1e2749),_0x349395);if(_0x2fb016>0x1&&_0x2981ea!=='next')for(let _0xd81e95=0x1;_0xd81e95<_0x2fb016;_0xd81e95++){const _0x4d1b74=(_0xd81e95-0x1)*previewState['matchesPerPage'],_0x400d3e=_0x4d1b74+previewState['matchesPerPage'],_0x2f1e76=_0x735f3e['docs'][_0x3ee344(0x245)](_0x4d1b74,_0x400d3e);if(_0x2f1e76[_0x3ee344(0x1d5)]>0x0){const _0x1bc483=_0x2f1e76[_0x3ee344(0x1ae)](_0x46dbae=>({'id':_0x46dbae['id'],..._0x46dbae['data']()})),_0x48cae8=!![];cachePage(getCacheKey(previewState[_0x3ee344(0x1b4)],_0xd81e95,_0x1e2749),{'docsData':_0x1bc483,'hasNextPage':_0x48cae8}),console['log']('Cached\x20intermediary\x20page\x20'+_0xd81e95);}}_0x598bc9[_0x3ee344(0x1d5)]===0x0&&previewState['filterUsername']?_0x1f26fd['innerHTML']=_0x3ee344(0x1ff)+previewState['filterUsername']+'\x22</div>':renderMatchCards(_0x598bc9),updatePreviewPaginationControls(_0x5344c9);}catch(_0x3dd81e){console[_0x3ee344(0x1e5)]('Error\x20fetching\x20'+previewState['currentMode']+_0x3ee344(0x1be),_0x3dd81e),_0x1f26fd['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x3dd81e[_0x3ee344(0x21f)]+'</div>',updatePreviewPaginationControls(![]),previewState[_0x3ee344(0x1e8)]=_0x489ed3;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x11d136){const _0x26ff83=a6_0x13bab5,_0x582c5f=document['getElementById']('recent-matches-preview'),_0x2820ff=document[_0x26ff83(0x214)]('match-card-template');if(!_0x582c5f||!_0x2820ff)return;!_0x582c5f[_0x26ff83(0x215)](_0x26ff83(0x229))&&(_0x582c5f['innerHTML']='');if(!_0x11d136||_0x11d136['length']===0x0){if(!_0x582c5f['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x348095=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?'\x20matching\x20filters':'';_0x582c5f[_0x26ff83(0x218)]='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x348095+'.</div>';}return;}const _0x543270=applyEnhancedClientFilters(_0x11d136);if(_0x543270['length']===0x0){_0x582c5f['innerHTML']=_0x26ff83(0x21d);return;}const _0x2e3321=_0x543270['map'](_0x2abae4=>getAllCommentsForMatch(_0x2abae4['id']));let _0x430864=[];try{_0x430864=await Promise['all'](_0x2e3321);}catch(_0x23dc3d){console['error']('Error\x20fetching\x20comments\x20batch:',_0x23dc3d),_0x430864=_0x543270['map'](()=>[]);}const _0x447b8c={};_0x430864['forEach']((_0x266cde,_0x44c072)=>{_0x447b8c[_0x543270[_0x44c072]['id']]=_0x266cde||[];}),_0x543270['forEach'](_0x4792e8=>{const _0x46287e=_0x26ff83,_0x2f3662=_0x2820ff[_0x46287e(0x255)][_0x46287e(0x207)](!![]),_0x1b48c0=_0x2f3662['querySelector']('.match-display-wrapper'),_0x1ce90c=_0x2f3662['querySelector']('.match-card'),_0x2262e9=getEloRankClass(_0x4792e8['winnerOldElo']);_0x1ce90c['classList']['add']('winner-'+_0x2262e9),_0x1ce90c[_0x46287e(0x215)]('.match-map')[_0x46287e(0x1d0)]=_0x4792e8['mapPlayed']||'Unknown\x20Map',_0x1ce90c['querySelector']('.match-date')['textContent']=formatDate(_0x4792e8['approvedAt']||_0x4792e8['createdAt']);const _0x5d9354=_0x1ce90c['querySelector']('.player.winner\x20.player-name');_0x5d9354[_0x46287e(0x1d0)]=_0x4792e8['winnerUsername']||'Unknown',_0x5d9354[_0x46287e(0x1bb)]['color']=getEloColor(_0x4792e8[_0x46287e(0x249)]),_0x1ce90c['querySelector']('.player.winner\x20.player-score')['textContent']=_0x4792e8['winnerScore']??0x0;const _0x59747e=_0x1ce90c['querySelector']('.player.winner\x20.player-suicides'),_0x449b05=_0x4792e8['winnerSuicides']||0x0;_0x59747e['textContent']=_0x46287e(0x25b)+_0x449b05;const _0x2c8d40=_0x1ce90c['querySelector'](_0x46287e(0x233));_0x2c8d40['textContent']=_0x4792e8[_0x46287e(0x1c1)]||'Unknown',_0x2c8d40[_0x46287e(0x1bb)][_0x46287e(0x253)]=getEloColor(_0x4792e8['loserOldElo']),_0x1ce90c['querySelector']('.player.loser\x20.player-score')['textContent']=_0x4792e8['loserScore']??0x0;const _0xcec6ae=_0x1ce90c[_0x46287e(0x215)]('.player.loser\x20.player-suicides'),_0x4b462c=_0x4792e8[_0x46287e(0x20f)]||0x0;_0xcec6ae[_0x46287e(0x1d0)]=_0x46287e(0x25b)+_0x4b462c;const _0x35c309=_0x1ce90c[_0x46287e(0x215)]('.match-subgame');if(_0x35c309){if(_0x4792e8['subgameType']&&_0x4792e8['subgameType']['trim']()!==''){_0x35c309['textContent']=_0x4792e8['subgameType'],_0x35c309['style'][_0x46287e(0x1b1)]='block';const _0x13a67e=getSubgameClass(_0x4792e8['subgameType']);_0x13a67e&&_0x35c309[_0x46287e(0x234)]['add'](_0x13a67e);}else _0x35c309[_0x46287e(0x1d0)]='Standard\x20Match',_0x35c309['style'][_0x46287e(0x1b1)]='block',_0x35c309[_0x46287e(0x1bb)]['opacity']='0.6';}const _0x32c6d5=_0x1ce90c['querySelector']('.comment.winner-comment'),_0x39b2a3=_0x1ce90c[_0x46287e(0x215)]('.comment.loser-comment'),_0xcefaeb=_0x4792e8[_0x46287e(0x238)]||'',_0x51832c=_0x4792e8[_0x46287e(0x1fb)]||'',_0x484ecf=_0x4792e8[_0x46287e(0x230)]||_0x4792e8['createdAt'],_0x573e80=filterComment(_0xcefaeb,_0x4792e8[_0x46287e(0x251)],_0x484ecf),_0x360060=filterComment(_0x51832c,_0x4792e8['loserUsername'],_0x484ecf);_0x32c6d5['textContent']='\x22'+truncateComment(_0xcefaeb)+'\x22',_0x39b2a3[_0x46287e(0x1d0)]='\x22'+truncateComment(_0x51832c)+'\x22';_0xcefaeb&&!isUsernameMuted(_0x4792e8['winnerUsername'],_0x484ecf)?_0x32c6d5['onclick']=()=>showPreviewCommentPopup(_0x573e80,_0x4792e8['winnerUsername']||'Winner',getEloColor(_0x4792e8['winnerOldElo'])):(_0x32c6d5[_0x46287e(0x1d0)]=_0x573e80==='Muted.'?'Muted.':'-',_0x32c6d5['style']['cursor']=_0x46287e(0x221),_0x32c6d5['onclick']=null);_0x51832c&&!isUsernameMuted(_0x4792e8['loserUsername'])?_0x39b2a3['onclick']=()=>showPreviewCommentPopup(_0x360060,_0x4792e8[_0x46287e(0x1c1)]||'Loser',getEloColor(_0x4792e8['loserOldElo'])):(_0x39b2a3['textContent']=_0x360060==='Muted.'?'Muted.':'-',_0x39b2a3['style'][_0x46287e(0x1f3)]='default',_0x39b2a3[_0x46287e(0x22d)]=null);const _0x2e5923=_0x1b48c0?.['querySelector']('.community-comments-section');if(!_0x2e5923)console[_0x46287e(0x1d7)]('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0x20a023=_0x2e5923[_0x46287e(0x215)]('.comments-container'),_0x1618d1=_0x20a023?.['querySelector']('.no-comments-message'),_0x32f585=_0x2e5923['querySelector']('.add-comment-btn');if(_0x20a023){while(_0x20a023['firstChild']&&_0x20a023['firstChild']!==_0x1618d1){_0x20a023['removeChild'](_0x20a023['firstChild']);}_0x32f585&&_0x32f585[_0x46287e(0x1c0)]('click',()=>{showAddCommentPopup(_0x4792e8['id']);});const _0x539fbb=_0x447b8c[_0x4792e8['id']]||[];if(_0x539fbb['length']>0x0){if(_0x1618d1)_0x1618d1['style']['display']=_0x46287e(0x1b0);const _0x41a590=(_0xcc0144,_0x26fa25)=>{const _0x388c5a=_0x46287e,_0x277fab=_0xcc0144['split']('\x20');if(_0x277fab[_0x388c5a(0x1d5)]<=_0x26fa25)return _0xcc0144;return _0x277fab['slice'](0x0,_0x26fa25)['join']('\x20')+'...';};_0x539fbb['forEach'](_0x4087ae=>{const _0x54f77c=_0x46287e,_0x280923=document['createElement']('div');if(_0x4087ae['type']===_0x54f77c(0x258)){_0x280923[_0x54f77c(0x24f)]='demo-link',_0x280923[_0x54f77c(0x218)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x4087ae['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x4087ae[_0x54f77c(0x226)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x4087ae[_0x54f77c(0x1d8)]||_0x54f77c(0x236))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x5be12a=window['auth']['currentUser'],_0x4fea5c=_0x5be12a&&_0x4087ae['userId']===_0x5be12a[_0x54f77c(0x1dc)];if(_0x4fea5c){const _0x49b04a=document['createElement'](_0x54f77c(0x1d4));_0x49b04a['className']='delete-comment-btn',_0x49b04a['innerHTML']='×',_0x49b04a['setAttribute']('aria-label','Delete\x20demo'),_0x49b04a['addEventListener']('click',_0x31f595=>{const _0x19c42f=_0x54f77c;_0x31f595['preventDefault'](),_0x31f595[_0x19c42f(0x228)](),deleteComment(_0x4087ae['id'],_0x280923);}),_0x280923[_0x54f77c(0x1f2)](_0x49b04a);}}else{_0x280923['className']='comment-item';const _0x32c1b9=isUsernameMuted(_0x4087ae['username'],_0x4087ae['timestamp']),_0x42e670=_0x32c1b9?_0x54f77c(0x1ee):_0x41a590(_0x4087ae['text']||'',0xf),_0x26f48e=_0x4087ae[_0x54f77c(0x226)]||'Anonymous',_0x37fca9=window[_0x54f77c(0x241)]['currentUser'],_0x3a8a1f=_0x37fca9&&_0x4087ae['userId']===_0x37fca9['uid'];let _0x2b6337='';_0x3a8a1f&&(_0x2b6337='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');_0x280923['innerHTML']=_0x2b6337+'<strong>'+_0x26f48e+':</strong>\x20\x22'+_0x42e670+'\x22';if(_0x3a8a1f){const _0x8ad760=_0x280923['querySelector']('.delete-comment-btn');_0x8ad760&&_0x8ad760[_0x54f77c(0x1c0)]('click',_0x34d3ab=>{_0x34d3ab['stopPropagation'](),deleteComment(_0x4087ae['id'],_0x280923);});}!_0x32c1b9?_0x280923['addEventListener'](_0x54f77c(0x1d1),()=>{showFullCommentLightbox(_0x4087ae);}):_0x280923['style']['cursor']=_0x54f77c(0x221);}_0x20a023['insertBefore'](_0x280923,_0x20a023[_0x54f77c(0x1cb)]);});}else{if(_0x1618d1)_0x1618d1['style'][_0x46287e(0x1b1)]='block';}}}const _0x4e492d=_0x1ce90c['querySelector']('.match-demo-links');if(_0x4e492d){const _0x432474=_0x1ce90c['querySelector']('.winner-demo-link'),_0x100ca9=_0x1ce90c['querySelector'](_0x46287e(0x237)),_0x3baafb=_0x4792e8['winnerDemoLink']||null,_0x36c386=_0x4792e8['loserDemoLink']||_0x4792e8[_0x46287e(0x1fe)]||null;console[_0x46287e(0x23c)]('Match\x20'+_0x4792e8['id']+'\x20demo\x20links:',{'winner':_0x3baafb,'loser':_0x36c386}),_0x432474&&(_0x3baafb?(_0x432474['href']=_0x3baafb,_0x432474['style']['display']=_0x46287e(0x201),_0x432474['title']=_0x4792e8['winnerUsername']+'\x27s\x20Demo'):_0x432474['style'][_0x46287e(0x1b1)]='none'),_0x100ca9&&(_0x36c386?(_0x100ca9[_0x46287e(0x22b)]=_0x36c386,_0x100ca9['style'][_0x46287e(0x1b1)]=_0x46287e(0x201),_0x100ca9[_0x46287e(0x243)]=_0x4792e8['loserUsername']+'\x27s\x20Demo'):_0x100ca9[_0x46287e(0x1bb)]['display']='none'),_0x3baafb&&_0x432474||_0x36c386&&_0x100ca9?_0x4e492d['style']['display']='flex':_0x4e492d['style']['display']='none';}_0x582c5f[_0x46287e(0x1f2)](_0x2f3662);});}function getSubgameClass(_0x5a5438){const _0x578c35=a6_0x13bab5,_0xfcb7e6={'Fusion\x20Match':_0x578c35(0x1bf),'≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':_0x578c35(0x1ea),'Blind\x20Match':'blind-match','Rematch':'rematch','Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':'altered-powerups','Mega\x20Match':_0x578c35(0x203),'Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0xfcb7e6[_0x5a5438]||'';}async function deleteComment(_0x4f51ad,_0x506925){const _0x576de1=a6_0x13bab5,_0x279100=window['auth'][_0x576de1(0x1b9)];if(!_0x279100){alert(_0x576de1(0x225));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x29ee29=doc(window['db'],'matchComments',_0x4f51ad),_0x1472b4=await getDoc(_0x29ee29);if(!_0x1472b4['exists']()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x23c812=_0x1472b4['data']();if(_0x23c812[_0x576de1(0x206)]!==_0x279100[_0x576de1(0x1dc)]){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x29ee29);if(_0x506925&&_0x506925['parentNode']){_0x506925['parentNode']['removeChild'](_0x506925);const _0x3d85fc=_0x506925[_0x576de1(0x212)]('.comments-container');if(_0x3d85fc&&!_0x3d85fc['querySelector'](_0x576de1(0x20c))){const _0x2fd52c=_0x3d85fc['querySelector']('.no-comments-message');if(_0x2fd52c)_0x2fd52c['style']['display']=_0x576de1(0x1f7);}}console['log'](_0x576de1(0x205));}catch(_0x10f50c){console['error']('Error\x20deleting\x20comment:',_0x10f50c),alert(_0x576de1(0x1da)+_0x10f50c[_0x576de1(0x21f)]);}}async function getAllCommentsForMatch(_0xcedb5){const _0x4f33f6=a6_0x13bab5;if(!_0xcedb5)return[];try{const _0x1bd063=collection(window['db'],'matchComments'),_0x42943f=query(_0x1bd063,where('matchId','==',_0xcedb5),orderBy('timestamp','desc')),_0x126676=await getDocs(_0x42943f);if(_0x126676[_0x4f33f6(0x1ec)])return[];return _0x126676[_0x4f33f6(0x231)]['map'](_0xaf8590=>({'id':_0xaf8590['id'],..._0xaf8590['data']()}));}catch(_0x1b3ef2){return console['error']('Error\x20fetching\x20comments:',_0x1b3ef2),[];}}async function submitComment(_0x281c3c){const _0x5ec853=a6_0x13bab5;_0x281c3c['preventDefault']();if(!window['auth']||!window['db']){console['error'](_0x5ec853(0x1cd)),alert('Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready');return;}const _0x3ac339=window['auth'][_0x5ec853(0x1b9)];if(!_0x3ac339){alert(_0x5ec853(0x1f6));return;}const _0x4b0024=document['getElementById']('commentMatchId')?.['value'],_0x2f0ab4=document['getElementById']('commentText')?.['value']?.['trim']();if(!_0x4b0024||!_0x2f0ab4){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x52a7b2=_0x2f0ab4['split'](/\s+/)['filter'](_0x87198e=>_0x87198e[_0x5ec853(0x1d5)]>0x0)['length'];if(_0x52a7b2>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.');return;}const _0x32622c=document[_0x5ec853(0x215)]('.submit-comment-btn');_0x32622c&&(_0x32622c['disabled']=!![],_0x32622c['textContent']=_0x5ec853(0x23e));try{let _0x41c9b4='Anonymous';try{const _0xddea44=doc(window['db'],'userProfiles',_0x3ac339['uid']),_0x1e07d1=await getDoc(_0xddea44);if(_0x1e07d1['exists']()){const _0x197468=_0x1e07d1['data']();_0x197468['username']&&(_0x41c9b4=_0x197468['username']);}_0x41c9b4==='Anonymous'&&_0x3ac339['displayName']&&(_0x41c9b4=_0x3ac339[_0x5ec853(0x1bd)]);}catch(_0x3dcf7c){console['warn'](_0x5ec853(0x1b6),_0x3dcf7c),_0x3ac339['displayName']&&(_0x41c9b4=_0x3ac339['displayName']);}const _0x1f084b={'matchId':_0x4b0024,'userId':_0x3ac339['uid'],'username':_0x41c9b4,'text':_0x2f0ab4,'timestamp':serverTimestamp()};console['log']('Submitting\x20comment\x20as:',_0x41c9b4);const _0x599757=collection(window['db'],'matchComments');await addDoc(_0x599757,_0x1f084b),console['log']('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x1a0906){console['error']('Error\x20submitting\x20comment:',_0x1a0906),alert('Failed\x20to\x20add\x20comment:\x20'+_0x1a0906['message']),_0x32622c&&(_0x32622c[_0x5ec853(0x25d)]=![],_0x32622c['textContent']=_0x5ec853(0x1ad));}}function a6_0x1baf(){const _0x200819=['#FFD700','Submit','map','commentUser','none','display','Demo:\x20','.jump-btn','currentMode','No\x20results\x20found\x20for\x20this\x20page','Failed\x20to\x20fetch\x20user\x20profile:','required','firstVisible','currentUser','createElement','style','matchComments','displayName','\x20matches:','fusion-match','addEventListener','loserUsername','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22','Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.','isLoading','commentAddOverlay','#CD7F32','applyFilterBtn','setItem','exists','dataset','firstChild','commentPopupPreview','Firebase\x20not\x20initialized','value','prototype','textContent','click','filter-pilots','loading-indicator','button','length','#b9f1fc','warn','description','demoWordCount','Failed\x20to\x20delete\x20comment:\x20','input','uid','subgames','find','preview-d1-button','addCommentForm','.option-content','Option','comment-popup','previewPrevPage','error','totalPages','enhanced-filter-section','currentPage','toString','weapon-imbalance','floor','empty','#fff','Muted.','previewNextPage','.popup-actions','popup-btn\x20report-btn','appendChild','cursor','{}.constructor(\x22return\x20this\x22)(\x20)','submitComment','You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment','block','includes','enhancedFilters','toggle','loserComment','wordCount','toLowerCase','demoLink','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22','docsData','flex','.option-tab.active','mega-match','substring','Comment\x20deleted\x20successfully','userId','cloneNode','keys','-10','trim','commentText','.comment-item','Daz','Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link','loserSuicides','clear-enhanced-filters','#aaa','closest','comment','getElementById','querySelector','text','matchId','innerHTML','prev','removeAttribute','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo','options','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>','current','message','Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.','default','commentPopupTitlePreview','querySelectorAll','filter-levels','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments','username','Failed\x20to\x20fetch\x20username:','stopPropagation','.matches-loading[style*=\x22color:\x20red\x22]','selected','href','Today','onclick','demoDescription','next','approvedAt','docs','filter','.player.loser\x20.player-name','classList','active','No\x20description\x20provided','.loser-demo-link','winnerComment','trace','forEach','return\x20(function()\x20','log','Anonymous','Submitting...','Loading\x20first\x20page\x20from\x20Firestore','\x20days\x20ago','auth','end','title','jump-to-page','slice','split','seconds',',\x20fetching\x20from\x20Firestore','winnerOldElo','levels','closeAddCommentPopup','pilots','\x20from\x20cache','justifyContent','className','popup-btn\x20close-btn','winnerUsername','apply-enhanced-filters','color','matchesPerPage','content','filter-subgames','Error\x20submitting:','demo','.</div>','jump','S:\x20','createdAt','disabled'];a6_0x1baf=function(){return _0x200819;};return a6_0x1baf();}function closeAddCommentPopup(){const _0x534fe0=a6_0x13bab5,_0x358b79=document['getElementById']('commentAddPopup'),_0x3cd627=document[_0x534fe0(0x214)](_0x534fe0(0x1c5));if(_0x358b79)_0x358b79['style']['display']='none';if(_0x3cd627)_0x3cd627['style'][_0x534fe0(0x1b1)]=_0x534fe0(0x1b0);}function showAddCommentPopup(_0x3282c8){const _0x32b5c4=a6_0x13bab5,_0x11f670=window[_0x32b5c4(0x241)][_0x32b5c4(0x1b9)];if(!_0x11f670){alert(_0x32b5c4(0x21b));return;}let _0x7c7eb6=document['getElementById']('commentAddPopup'),_0x442e9d=document['getElementById'](_0x32b5c4(0x1c5));!_0x7c7eb6&&(_0x7c7eb6=document[_0x32b5c4(0x1ba)]('div'),_0x7c7eb6['id']='commentAddPopup',_0x7c7eb6['className']=_0x32b5c4(0x1e3),document['body'][_0x32b5c4(0x1f2)](_0x7c7eb6));!_0x442e9d&&(_0x442e9d=document['createElement']('div'),_0x442e9d['id']='commentAddOverlay',_0x442e9d[_0x32b5c4(0x24f)]='comment-overlay',document['body'][_0x32b5c4(0x1f2)](_0x442e9d));_0x7c7eb6[_0x32b5c4(0x218)]=_0x32b5c4(0x1c2)+_0x3282c8+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x7c7eb6[_0x32b5c4(0x1bb)]['display']='block',_0x442e9d['style']['display']='block',document['getElementById']('closeAddCommentPopup')[_0x32b5c4(0x1c0)]('click',closeAddCommentPopup),_0x442e9d['addEventListener']('click',closeAddCommentPopup);const _0x4f1031=_0x7c7eb6['querySelectorAll']('.option-tab');_0x4f1031[_0x32b5c4(0x23a)](_0x543082=>{const _0x41ebb4=_0x32b5c4;_0x543082[_0x41ebb4(0x1c0)]('click',function(){const _0x10a9be=_0x41ebb4;_0x4f1031[_0x10a9be(0x23a)](_0x49210e=>_0x49210e[_0x10a9be(0x234)]['remove']('active')),document['querySelectorAll'](_0x10a9be(0x1e1))['forEach'](_0x4852dd=>_0x4852dd['style']['display']='none'),this['classList']['add'](_0x10a9be(0x235));const _0x5c6fc6=this['dataset']['option'];document['getElementById'](_0x5c6fc6+_0x10a9be(0x1e2))['style'][_0x10a9be(0x1b1)]='block',_0x5c6fc6==='demo'?(document['getElementById']('demoLink')['setAttribute']('required',''),document['getElementById']('commentText')['removeAttribute']('required')):(document[_0x10a9be(0x214)]('demoLink')['removeAttribute']('required'),document['getElementById'](_0x10a9be(0x20b))['setAttribute'](_0x10a9be(0x1b7),''));});}),document[_0x32b5c4(0x214)]('commentText')['setAttribute']('required',''),document['getElementById'](_0x32b5c4(0x1fe))[_0x32b5c4(0x21a)](_0x32b5c4(0x1b7)),setupWordCounter('commentText','wordCount',0xf),setupWordCounter(_0x32b5c4(0x22e),_0x32b5c4(0x1d9),0x14),document['getElementById']('addCommentForm')['addEventListener']('submit',submitCommentOrDemo);}function setupWordCounter(_0x138db7,_0x4f4d81,_0x5700a8){const _0x1d0eb5=document['getElementById'](_0x138db7),_0x5cf882=document['getElementById'](_0x4f4d81);if(!_0x1d0eb5||!_0x5cf882)return;_0x25920f(),_0x1d0eb5['addEventListener']('input',_0x25920f);function _0x25920f(){const _0x6294af=a6_0x51c6,_0x5a0a98=_0x1d0eb5['value']['trim'](),_0xab79e0=_0x5a0a98?_0x5a0a98['split'](/\s+/)[_0x6294af(0x232)](_0x3683c3=>_0x3683c3['length']>0x0)['length']:0x0;_0x5cf882[_0x6294af(0x1d0)]=_0xab79e0,_0xab79e0>_0x5700a8?_0x5cf882['style'][_0x6294af(0x253)]='#ff4444':_0x5cf882['style'][_0x6294af(0x253)]=_0x6294af(0x211);}}async function submitCommentOrDemo(_0x38e121){const _0x454d59=a6_0x13bab5;_0x38e121['preventDefault']();if(!window[_0x454d59(0x241)]||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x5211cd=window['auth']['currentUser'];if(!_0x5211cd){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x3fc32a=document['getElementById']('commentMatchId')['value'],_0x2e169d=document['querySelector'](_0x454d59(0x202))['dataset']['option'];let _0x7aee35=_0x454d59(0x23d);try{const _0x448aa2=doc(window['db'],'userProfiles',_0x5211cd['uid']),_0x4c3a83=await getDoc(_0x448aa2);if(_0x4c3a83[_0x454d59(0x1c9)]()){const _0x40661b=_0x4c3a83['data']();_0x40661b['username']&&(_0x7aee35=_0x40661b[_0x454d59(0x226)]);}_0x7aee35===_0x454d59(0x23d)&&_0x5211cd['displayName']&&(_0x7aee35=_0x5211cd[_0x454d59(0x1bd)]);}catch(_0x537175){console['warn'](_0x454d59(0x227),_0x537175),_0x5211cd['displayName']&&(_0x7aee35=_0x5211cd[_0x454d59(0x1bd)]);}const _0x548037=document[_0x454d59(0x215)]('.submit-comment-btn');_0x548037&&(_0x548037['disabled']=!![],_0x548037['textContent']='Submitting...');try{if(_0x2e169d===_0x454d59(0x213)){const _0x214dfa=document['getElementById']('commentText')['value']['trim']();if(!_0x214dfa){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x548037[_0x454d59(0x25d)]=![],_0x548037['textContent']=_0x454d59(0x1ad);return;}const _0xbf1d6b=_0x214dfa['split'](/\s+/)['filter'](_0x12e83a=>_0x12e83a['length']>0x0)[_0x454d59(0x1d5)];if(_0xbf1d6b>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.'),_0x548037['disabled']=![],_0x548037['textContent']=_0x454d59(0x1ad);return;}const _0x4fc7b0={'matchId':_0x3fc32a,'userId':_0x5211cd[_0x454d59(0x1dc)],'username':_0x7aee35,'text':_0x214dfa,'type':_0x454d59(0x213),'timestamp':serverTimestamp()},_0x41b7db=collection(window['db'],_0x454d59(0x1bc));await addDoc(_0x41b7db,_0x4fc7b0);}else{const _0x55b443=document['getElementById']('demoLink')['value']['trim'](),_0x4643bb=document[_0x454d59(0x214)]('demoDescription')[_0x454d59(0x1ce)]['trim']()||'Demo\x20link';if(!_0x55b443){alert('Please\x20enter\x20a\x20demo\x20link'),_0x548037['disabled']=![],_0x548037['textContent']='Submit';return;}try{new URL(_0x55b443);}catch(_0x2319d7){alert(_0x454d59(0x20e)),_0x548037['disabled']=![],_0x548037[_0x454d59(0x1d0)]='Submit';return;}const _0xcfbd25=_0x4643bb[_0x454d59(0x246)](/\s+/)['filter'](_0x36d995=>_0x36d995[_0x454d59(0x1d5)]>0x0)[_0x454d59(0x1d5)];if(_0xcfbd25>0x14){alert(_0x454d59(0x1c3)),_0x548037[_0x454d59(0x25d)]=![],_0x548037['textContent']='Submit';return;}const _0x5ee714={'matchId':_0x3fc32a,'userId':_0x5211cd['uid'],'username':_0x7aee35,'demoLink':_0x55b443,'description':_0x4643bb,'type':'demo','text':_0x454d59(0x1b2)+_0x4643bb,'timestamp':serverTimestamp()},_0xec2800=collection(window['db'],_0x454d59(0x1bc));await addDoc(_0xec2800,_0x5ee714);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x454d59(0x21e));}catch(_0x2f1031){console['error'](_0x454d59(0x257),_0x2f1031),alert('Failed\x20to\x20submit:\x20'+_0x2f1031['message']),_0x548037&&(_0x548037[_0x454d59(0x25d)]=![],_0x548037[_0x454d59(0x1d0)]='Submit');}}function getEloRankClass(_0x51fd14){const _0x2af270=Number(_0x51fd14);if(_0x2af270>=0x7d0)return'emerald';else{if(_0x2af270>=0x708)return'gold';else{if(_0x2af270>=0x640)return'silver';else{if(_0x2af270>=0x578)return'bronze';else return'unranked';}}}}function showPreviewCommentPopup(_0x25c023,_0xdc2507,_0x2b9057='#fff'){const _0x4ad739=a6_0x13bab5,_0x1e96e2=document[_0x4ad739(0x214)]('commentPopupPreview'),_0x31f458=document['getElementById']('commentOverlayPreview'),_0x5cab06=document['getElementById'](_0x4ad739(0x222)),_0x7c0582=document['getElementById']('commentPopupContentPreview'),_0x205438=document['getElementById']('reportCommentButton');if(!_0x1e96e2||!_0x31f458||!_0x5cab06||!_0x7c0582||!_0x205438)return;_0x1e96e2['dataset'][_0x4ad739(0x20b)]=_0x25c023,_0x1e96e2['dataset']['commentUser']=_0xdc2507,_0x5cab06[_0x4ad739(0x1bb)]['color']=_0x2b9057,_0x5cab06['textContent']='Comment\x20from\x20'+_0xdc2507,_0x7c0582['textContent']=_0x25c023,_0x205438['onclick']=reportComment,_0x1e96e2['style'][_0x4ad739(0x1b1)]='block',_0x31f458['style'][_0x4ad739(0x1b1)]=_0x4ad739(0x1f7);}function closePreviewCommentPopup(){const _0x1e7ef2=a6_0x13bab5,_0x1c51da=document['getElementById'](_0x1e7ef2(0x1cc)),_0x2d9c99=document['getElementById']('commentOverlayPreview');if(_0x1c51da)_0x1c51da['style']['display']='none';if(_0x2d9c99)_0x2d9c99['style']['display']='none';}async function reportComment(){const _0x5cbb0c=a6_0x13bab5,_0x1f1c47=window['auth']['currentUser'];if(!_0x1f1c47){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0x16af51=document[_0x5cbb0c(0x214)](_0x5cbb0c(0x1cc)),_0x27db2f={'commentAuthor':_0x16af51['dataset'][_0x5cbb0c(0x1af)]||'Unknown\x20User','commentText':_0x16af51['dataset']['commentText']||'','matchId':previewState['currentMatchId']||'','reportedBy':_0x1f1c47[_0x5cbb0c(0x1dc)],'reporterUsername':_0x1f1c47['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},_0x259b88=collection(window['db'],'badComments');await addDoc(_0x259b88,_0x27db2f),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x4f9142){console['error']('Error\x20reporting\x20comment:',_0x4f9142),alert('Failed\x20to\x20report\x20comment:\x20'+_0x4f9142['message']);}}function showFullCommentLightbox(_0x35c9da){const _0x4b0da3=a6_0x13bab5;if(isUsernameMuted(_0x35c9da['username']))return;const _0x33f4c9=document['getElementById']('commentPopupPreview'),_0x3a6b8d=document['getElementById']('commentOverlayPreview'),_0x36834a=document[_0x4b0da3(0x214)](_0x4b0da3(0x222)),_0x59bc83=document[_0x4b0da3(0x214)]('commentPopupContentPreview');if(!_0x33f4c9||!_0x3a6b8d||!_0x36834a||!_0x59bc83)return;_0x36834a['style'][_0x4b0da3(0x253)]=_0x4b0da3(0x1ed),_0x36834a['textContent']='Comment\x20from\x20'+_0x35c9da[_0x4b0da3(0x226)];if(_0x35c9da['timestamp']){const _0x56e3f9=new Date(_0x35c9da['timestamp']['seconds']*0x3e8),_0x4b600b=_0x56e3f9['toLocaleString']();_0x59bc83['innerHTML']='<p>'+_0x35c9da[_0x4b0da3(0x216)]+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x4b600b+'</small>';}else _0x59bc83['textContent']=_0x35c9da[_0x4b0da3(0x216)];_0x33f4c9[_0x4b0da3(0x1ca)]['commentId']=_0x35c9da['id']||'',_0x33f4c9['dataset']['commentUser']=_0x35c9da[_0x4b0da3(0x226)]||'',_0x33f4c9[_0x4b0da3(0x1ca)][_0x4b0da3(0x20b)]=_0x35c9da['text']||'',_0x33f4c9[_0x4b0da3(0x1ca)]['matchId']=_0x35c9da[_0x4b0da3(0x217)]||'';const _0x3ea0ed=_0x33f4c9[_0x4b0da3(0x215)](_0x4b0da3(0x1f0))||document['createElement']('div');!_0x33f4c9['querySelector']('.popup-actions')?(_0x3ea0ed[_0x4b0da3(0x24f)]='popup-actions',_0x3ea0ed['style']['display']=_0x4b0da3(0x201),_0x3ea0ed[_0x4b0da3(0x1bb)][_0x4b0da3(0x24e)]='center',_0x3ea0ed[_0x4b0da3(0x1bb)]['gap']='10px',_0x3ea0ed[_0x4b0da3(0x1bb)]['marginTop']='15px',_0x33f4c9['appendChild'](_0x3ea0ed)):_0x3ea0ed['innerHTML']='';const _0x8c78df=document['createElement']('button');_0x8c78df['textContent']='Close',_0x8c78df['className']=_0x4b0da3(0x250),_0x8c78df['id']='closeCommentPopupPreview',_0x8c78df['addEventListener']('click',closePreviewCommentPopup);const _0x5ab34f=document['createElement']('button');_0x5ab34f['textContent']='Report',_0x5ab34f[_0x4b0da3(0x24f)]=_0x4b0da3(0x1f1),_0x5ab34f[_0x4b0da3(0x1bb)]['backgroundColor']='#d32f2f',_0x5ab34f['addEventListener']('click',reportComment),_0x3ea0ed['appendChild'](_0x8c78df),_0x3ea0ed[_0x4b0da3(0x1f2)](_0x5ab34f),_0x33f4c9['style'][_0x4b0da3(0x1b1)]=_0x4b0da3(0x1f7),_0x3a6b8d['style']['display']='block';}export function setupPreviewEventListeners(){const _0x298230=a6_0x13bab5,_0x381baa=document['getElementById']('previewPrevPage'),_0x20d54b=document['getElementById'](_0x298230(0x1ef)),_0x153bce=document['getElementById']('preview-d1-button'),_0x2a5585=document['getElementById']('preview-d2-button'),_0x44c038=document[_0x298230(0x214)]('preview-d3-button'),_0x45305e=document['getElementById']('filter-toggle-button'),_0x2b024f=document[_0x298230(0x214)](_0x298230(0x1e7));if(!_0x381baa||!_0x20d54b||!_0x153bce||!_0x2a5585||!_0x44c038||!_0x45305e||!_0x2b024f){console['warn'](_0x298230(0x220));return;}_0x381baa['addEventListener'](_0x298230(0x1d1),()=>{const _0x4a5eb7=_0x298230;if(!_0x381baa['disabled'])loadRecentMatchesPreview(_0x4a5eb7(0x219));}),_0x20d54b['addEventListener']('click',()=>{const _0x577cc7=_0x298230;if(!_0x20d54b['disabled'])loadRecentMatchesPreview(_0x577cc7(0x22f));}),_0x153bce['addEventListener']('click',()=>{const _0x140050=_0x298230;previewState['currentMode']!=='D1'&&!previewState['isLoading']&&(previewState[_0x140050(0x1b4)]='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x140050(0x21e)));}),_0x2a5585['addEventListener']('click',()=>{const _0x283644=_0x298230;previewState['currentMode']!=='D2'&&!previewState['isLoading']&&(previewState[_0x283644(0x1b4)]='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x44c038['addEventListener']('click',()=>{const _0x355a2a=_0x298230;previewState[_0x355a2a(0x1b4)]!=='D3'&&!previewState[_0x355a2a(0x1c4)]&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x45305e&&_0x2b024f&&_0x45305e[_0x298230(0x1c0)]('click',()=>{const _0x4de1db=_0x298230,_0x12e06c=_0x2b024f[_0x4de1db(0x1bb)][_0x4de1db(0x1b1)]!=='none';_0x2b024f['style']['display']=_0x12e06c?'none':'block',_0x45305e[_0x4de1db(0x234)]['toggle']('active',!_0x12e06c);});const _0x3befda=document['getElementById'](_0x298230(0x252)),_0x564131=document[_0x298230(0x214)](_0x298230(0x210));_0x3befda&&_0x3befda['addEventListener'](_0x298230(0x1d1),()=>{const _0x3274a7=_0x298230;previewState[_0x3274a7(0x1f9)][_0x3274a7(0x24c)]=document[_0x3274a7(0x214)]('filter-pilots')['value'][_0x3274a7(0x20a)](),previewState[_0x3274a7(0x1f9)]['levels']=document['getElementById'](_0x3274a7(0x224))[_0x3274a7(0x1ce)]['trim']();const _0x25fe4a=document[_0x3274a7(0x214)](_0x3274a7(0x256));previewState[_0x3274a7(0x1f9)]['subgames']=Array['from'](_0x25fe4a['selectedOptions'])[_0x3274a7(0x1ae)](_0x4c5366=>_0x4c5366[_0x3274a7(0x1ce)])['filter'](_0x2b6512=>_0x2b6512!==''),loadRecentMatchesPreview('current');});_0x564131&&_0x564131[_0x298230(0x1c0)](_0x298230(0x1d1),()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document[_0x298230(0x223)](_0x298230(0x1b3))[_0x298230(0x23a)](_0x10b3a8=>{_0x10b3a8['addEventListener']('click',()=>{const _0x322623=_0x10b3a8['dataset']['jump'];jumpToPage(_0x322623);});});const _0x453eb5=document[_0x298230(0x214)]('jump-to-page');_0x453eb5&&_0x453eb5['addEventListener']('keypress',_0xe7e809=>{_0xe7e809['key']==='Enter'&&jumpToPage('input');});const _0xb16bef=document[_0x298230(0x214)]('closeCommentPopupPreview'),_0x43ca16=document['getElementById']('commentOverlayPreview');if(_0xb16bef)_0xb16bef[_0x298230(0x1c0)]('click',closePreviewCommentPopup);if(_0x43ca16)_0x43ca16['addEventListener']('click',closePreviewCommentPopup);const _0x585540=document[_0x298230(0x214)]('closeAddCommentPopup'),_0x59ff16=document['getElementById']('commentAddOverlay'),_0x35d9ae=document[_0x298230(0x214)](_0x298230(0x1e0));if(_0x585540)_0x585540['addEventListener']('click',closeAddCommentPopup);if(_0x59ff16)_0x59ff16['addEventListener']('click',closeAddCommentPopup);if(_0x35d9ae)_0x35d9ae['addEventListener']('submit',submitComment);const _0x4b7b4d=document['getElementById'](_0x298230(0x20b)),_0x9267ea=document['getElementById'](_0x298230(0x1fc));_0x4b7b4d&&_0x9267ea&&setupWordCounter(_0x298230(0x20b),'wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window[a6_0x13bab5(0x24b)]=closeAddCommentPopup,window[a6_0x13bab5(0x1f5)]=submitComment;