const a32_0x1b2fcc=(function(){let _0x2d77df=!![];return function(_0x26281b,_0x444d99){const _0x5c469e=_0x2d77df?function(){if(_0x444d99){const _0x3626b2=_0x444d99['apply'](_0x26281b,arguments);return _0x444d99=null,_0x3626b2;}}:function(){};return _0x2d77df=![],_0x5c469e;};}()),a32_0x34b290=a32_0x1b2fcc(this,function(){const _0x11388f=a32_0x2322,_0x3984eb=function(){const _0x277568=a32_0x2322;let _0xd77276;try{_0xd77276=Function(_0x277568(0x11b)+_0x277568(0x131)+');')();}catch(_0x5e96c9){_0xd77276=window;}return _0xd77276;},_0x280ba1=_0x3984eb(),_0x48f064=_0x280ba1['console']=_0x280ba1['console']||{},_0x3e1938=[_0x11388f(0x136),'warn',_0x11388f(0x14a),_0x11388f(0x13d),_0x11388f(0x141),'table','trace'];for(let _0x261ffc=0x0;_0x261ffc<_0x3e1938['length'];_0x261ffc++){const _0x5f02a8=a32_0x1b2fcc['constructor']['prototype']['bind'](a32_0x1b2fcc),_0x4e97ac=_0x3e1938[_0x261ffc],_0x499f0e=_0x48f064[_0x4e97ac]||_0x5f02a8;_0x5f02a8['__proto__']=a32_0x1b2fcc['bind'](a32_0x1b2fcc),_0x5f02a8[_0x11388f(0x143)]=_0x499f0e['toString'][_0x11388f(0x135)](_0x499f0e),_0x48f064[_0x4e97ac]=_0x5f02a8;}});function a32_0x2322(_0x2c02fe,_0x3a5dde){const _0x34b290=a32_0x5822();return a32_0x2322=function(_0x1b2fcc,_0x53aae2){_0x1b2fcc=_0x1b2fcc-0x111;let _0x5822ec=_0x34b290[_0x1b2fcc];return _0x5822ec;},a32_0x2322(_0x2c02fe,_0x3a5dde);}function a32_0x5822(){const _0x34b2e1=['totalMatches','join','timestamp','bold','Gold','push','Unranked','gray','change','style','return\x20(function()\x20','#F44336','then','size','toLowerCase','&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','get',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','has','td:nth-child(3)','winnerScore','message','map','totalKills','country','loserScore','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','losses','totalDeaths','#50C878','visible','find','{}.constructor(\x22return\x20this\x22)(\x20)','querySelector','innerHTML','previousElo','bind','log','forEach','loserUsername','data','sort','position','#ladder-d2\x20tbody','error','username','winRate','eloRating','exception','kda','toString','fontWeight','length','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list','wins','player','%</td>\x0a\x20\x20\x20\x20</tr>','info','set','newElo'];a32_0x5822=function(){return _0x34b2e1;};return a32_0x5822();}a32_0x34b290();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0x1776f5 from'./firebase-idle-wrapper.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x24da3b=![]){const _0x41bd63=a32_0x2322,_0x1938f1=document['querySelector']('#ladder-d2\x20tbody');if(!_0x1938f1){console['error']('D2\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x1938f1['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x12cd88=Date['now']();if(!_0x24da3b&&playerCacheD2['data']&&_0x12cd88-playerCacheD2['timestamp']<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0x2937b3=collection(db,'playersD2'),_0x7f8380=query(_0x2937b3,orderBy('position','asc')),_0x57f435=await a32_0x1776f5['getDocuments'](_0x2937b3),_0x2f140a=[];_0x57f435[_0x41bd63(0x137)](_0x2702d3=>{const _0x5305a7=_0x41bd63,_0x233287=_0x2702d3['data']();_0x233287[_0x5305a7(0x13e)]&&_0x2f140a[_0x5305a7(0x116)]({..._0x233287,'id':_0x2702d3['id'],'elo':_0x233287[_0x5305a7(0x140)]||0x0,'position':_0x233287['position']||Number['MAX_SAFE_INTEGER']});});const _0x3b4753=collection(db,'userProfiles'),_0x371bfb=await getDocs(_0x3b4753),_0x2a5813=new Map();_0x371bfb['forEach'](_0x184649=>{const _0x2ddd1a=_0x41bd63,_0x5ba291=_0x184649['data']();_0x5ba291['username']&&_0x2a5813['set'](_0x5ba291['username'][_0x2ddd1a(0x11f)](),_0x5ba291);});for(const _0x5c3f52 of _0x2f140a){const _0x3a193f=_0x5c3f52[_0x41bd63(0x13e)][_0x41bd63(0x11f)]();if(_0x2a5813[_0x41bd63(0x123)](_0x3a193f)){const _0x17656c=_0x2a5813['get'](_0x3a193f);_0x17656c['country']&&(_0x5c3f52['country']=_0x17656c[_0x41bd63(0x129)]['toLowerCase']());}}const _0x61733e=_0x2f140a[_0x41bd63(0x127)](_0x4cb321=>_0x4cb321[_0x41bd63(0x13e)]),_0x2548e7=await fetchBatchMatchStatsD2(_0x61733e);_0x2f140a['sort']((_0x31a5ad,_0x40f11a)=>{const _0x379477=_0x41bd63,_0x325d36=_0x2548e7['get'](_0x31a5ad['username'])?.['totalMatches']||0x0,_0xf98eae=_0x2548e7[_0x379477(0x121)](_0x40f11a['username'])?.['totalMatches']||0x0;if(_0x325d36===0x0!==(_0xf98eae===0x0))return _0x325d36===0x0?0x1:-0x1;return(_0x31a5ad[_0x379477(0x13b)]||0x3e7)-(_0x40f11a[_0x379477(0x13b)]||0x3e7);}),_0x2f140a['forEach']((_0xcdd9b8,_0x56b11d)=>{_0xcdd9b8['position']=_0x56b11d+0x1;}),playerCacheD2[_0x41bd63(0x139)]=_0x2f140a,playerCacheD2['timestamp']=_0x12cd88,updateLadderDisplayD2(_0x2f140a);}catch(_0x4c6318){console['error']('Error\x20loading\x20D2\x20ladder:',_0x4c6318),_0x1938f1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x4c6318[_0x41bd63(0x126)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getNextAvailablePositionD2(_0x20157e){if(_0x20157e['length']===0x0)return 0x1;let _0x565f88=0x0;return _0x20157e['forEach'](_0x5925cb=>{const _0x598ae2=a32_0x2322;_0x5925cb['position']&&typeof _0x5925cb['position']==='number'&&_0x5925cb['position']>_0x565f88&&(_0x565f88=_0x5925cb[_0x598ae2(0x13b)]);}),_0x565f88+0x1;}async function updatePlayerPositions(_0xd27741,_0x5aba1c){const _0x5dc6da=a32_0x2322;try{const _0x1813f3=collection(db,'playersD2'),_0x1fd7f3=await getDocs(_0x1813f3),_0x4e5e1d=[];_0x1fd7f3['forEach'](_0x2c3c48=>{_0x4e5e1d['push']({'id':_0x2c3c48['id'],..._0x2c3c48['data']()});});const _0x5993f6=_0x4e5e1d['find'](_0x5a58ef=>_0x5a58ef['username']===_0xd27741),_0x6c3712=_0x4e5e1d[_0x5dc6da(0x130)](_0x417dbb=>_0x417dbb['username']===_0x5aba1c);if(!_0x5993f6||!_0x6c3712){console['error'](_0x5dc6da(0x146));return;}if(_0x5993f6['position']>_0x6c3712['position']){const _0x3d1eef=_0x6c3712['position'];for(const _0x56e208 of _0x4e5e1d){_0x56e208['position']>=_0x6c3712['position']&&_0x56e208['position']<_0x5993f6['position']&&_0x56e208['username']!==_0xd27741&&await updateDoc(doc(db,'playersD2',_0x56e208['id']),{'position':_0x56e208['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x5993f6['id']),{'position':_0x3d1eef});if(_0x3d1eef===0x1){const _0x3c71b6=doc(db,'playersD2',_0x5993f6['id']),_0x204ec6=await getDoc(_0x3c71b6);!_0x204ec6['data']()['firstPlaceDate']&&await updateDoc(_0x3c71b6,{'firstPlaceDate':Timestamp['now']()});}if(_0x6c3712[_0x5dc6da(0x13b)]===0x1){const _0x1a243d=doc(db,'playersD2',_0x6c3712['id']);await updateDoc(_0x1a243d,{'firstPlaceDate':null});}playerCacheD2[_0x5dc6da(0x113)]=0x0;}}catch(_0x2dd09e){console['error']('Error\x20updating\x20D2\x20player\x20positions:',_0x2dd09e);}}function calculateStreakDays(_0x374fb4){if(!_0x374fb4)return 0x0;const _0x354e3d=_0x374fb4['toDate'](),_0x11f9ec=new Date(),_0x362fcd=Math['abs'](_0x11f9ec-_0x354e3d);return Math['ceil'](_0x362fcd/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x3f8242){const _0x1b001d=a32_0x2322;if(_0x3f8242>=0x834)return'Emerald';if(_0x3f8242>=0x708)return _0x1b001d(0x115);if(_0x3f8242>=0x640)return'Silver';if(_0x3f8242>=0x578)return'Bronze';return _0x1b001d(0x117);}async function updateLadderDisplayD2(_0x317f95){const _0x1a898a=a32_0x2322;_0x317f95['sort']((_0x4a3e49,_0x13aead)=>_0x4a3e49['position']-_0x13aead['position']);const _0x1f677e=document['querySelector'](_0x1a898a(0x13c));if(!_0x1f677e)return;_0x1f677e['innerHTML']='';const _0x429f0b=_0x317f95['map'](_0x593396=>_0x593396['username']),_0x170d5d=await fetchBatchMatchStatsD2(_0x429f0b),_0x2a229d=document['querySelector']('#ladder-d2\x20thead\x20tr');_0x2a229d&&(_0x2a229d[_0x1a898a(0x133)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x443852=_0x317f95[_0x1a898a(0x127)](_0x256b22=>{const _0x571c03=_0x170d5d['get'](_0x256b22['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x256b22,_0x571c03);})[_0x1a898a(0x112)]('');_0x1f677e['innerHTML']=_0x443852,getPlayersLastEloChangesD2(_0x429f0b)[_0x1a898a(0x11d)](_0x15bb6d=>{const _0x48fae2=_0x1a898a,_0x2a9950=new Map();_0x1f677e['querySelectorAll']('tr')['forEach']((_0x524e3b,_0x427d6d)=>{const _0x33a35e=a32_0x2322;_0x427d6d<_0x429f0b[_0x33a35e(0x145)]&&_0x2a9950['set'](_0x429f0b[_0x427d6d],_0x524e3b);}),_0x15bb6d[_0x48fae2(0x137)]((_0x55da77,_0x42062d)=>{const _0x3610fd=_0x48fae2,_0x39539e=_0x2a9950[_0x3610fd(0x121)](_0x42062d);if(_0x39539e&&_0x55da77!==0x0){const _0x525a0c=_0x39539e['querySelector'](_0x3610fd(0x124));if(_0x525a0c){const _0x3a1d43=_0x55da77>0x0?'+'+_0x55da77:''+_0x55da77,_0x3e6603=_0x525a0c[_0x3610fd(0x132)]('.trend-indicator');_0x3e6603&&(_0x3e6603['textContent']=_0x3a1d43,_0x3e6603['style']['color']=_0x55da77>0x0?'#4CAF50':_0x3610fd(0x11c),_0x3e6603['style'][_0x3610fd(0x144)]=_0x3610fd(0x114),_0x3e6603[_0x3610fd(0x11a)]['fontSize']='0.85em',_0x3e6603['style']['display']='inline',_0x3e6603['style']['visibility']=_0x3610fd(0x12f),_0x3e6603['style']['opacity']='1');}}});})['catch'](_0xe332f9=>console[_0x1a898a(0x13d)]('Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:',_0xe332f9));}function createPlayerRowD2(_0x357b0e,_0x45ba26){const _0x5ae08f=a32_0x2322,_0x3f4006=parseFloat(_0x357b0e['elo'])||0x0;let _0x38ea5f=_0x5ae08f(0x118);if(_0x3f4006>=0x7d0)_0x38ea5f=_0x5ae08f(0x12e);else{if(_0x3f4006>=0x708)_0x38ea5f='#FFD700';else{if(_0x3f4006>=0x640)_0x38ea5f='#C0C0C0';else _0x3f4006>=0x578&&(_0x38ea5f='#CD7F32');}}let _0x53784e='';return _0x357b0e['country']&&(_0x53784e='<img\x20src=\x22../images/flags/'+_0x357b0e['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x357b0e['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x357b0e[_0x5ae08f(0x13b)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x357b0e['username'])+_0x5ae08f(0x120)+_0x38ea5f+_0x5ae08f(0x122)+_0x357b0e['username']+_0x5ae08f(0x12b)+_0x53784e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x38ea5f+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3f4006+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x45ba26[_0x5ae08f(0x111)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x45ba26[_0x5ae08f(0x147)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x45ba26['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x45ba26[_0x5ae08f(0x142)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x45ba26['winRate']+_0x5ae08f(0x149);}async function getPlayersLastEloChangesD2(_0x9048f5){const _0x3670d9=a32_0x2322,_0x32691d=new Map();_0x9048f5['forEach'](_0x28c9bb=>_0x32691d[_0x3670d9(0x14b)](_0x28c9bb,0x0));try{const _0x28ab96=collection(db,'eloHistoryD2'),_0x39e7b5=query(_0x28ab96,orderBy('timestamp','desc'),limit(0x64)),_0x3fbee6=await getDocs(_0x39e7b5),_0x3268ef=new Map(),_0x5efad5=await getDocs(collection(db,'playersD2'));_0x5efad5['forEach'](_0x29c998=>{const _0x1db1c2=_0x3670d9,_0x1d67fe=_0x29c998[_0x1db1c2(0x139)]();_0x1d67fe[_0x1db1c2(0x13e)]&&_0x3268ef[_0x1db1c2(0x14b)](_0x29c998['id'],_0x1d67fe['username']);});const _0x552ba1=new Map();_0x3fbee6['forEach'](_0x1f7174=>{const _0x36b40f=_0x3670d9,_0x34fd30=_0x1f7174['data']();let _0xbf8942=_0x34fd30['username']||_0x34fd30['playerUsername'];!_0xbf8942&&_0x34fd30['player']&&_0x3268ef['has'](_0x34fd30['player'])&&(_0xbf8942=_0x3268ef['get'](_0x34fd30[_0x36b40f(0x148)]));if(!_0xbf8942&&_0x34fd30['matchId']){}_0xbf8942&&_0x9048f5['includes'](_0xbf8942)&&(!_0x552ba1['has'](_0xbf8942)&&_0x552ba1[_0x36b40f(0x14b)](_0xbf8942,[]),_0x552ba1[_0x36b40f(0x121)](_0xbf8942)['push']({..._0x34fd30,'timestamp':_0x34fd30[_0x36b40f(0x113)]?.['seconds']||0x0,'username':_0xbf8942}));}),_0x552ba1[_0x3670d9(0x137)]((_0x13ca81,_0x80012)=>{const _0x5c3b06=_0x3670d9;if(_0x13ca81['length']>0x0){_0x13ca81[_0x5c3b06(0x13a)]((_0x2eb4fe,_0x5040f5)=>_0x5040f5[_0x5c3b06(0x113)]-_0x2eb4fe['timestamp']);const _0x1cdd2b=_0x13ca81['find'](_0xe4be0c=>_0xe4be0c[_0x5c3b06(0x119)]!==undefined||_0xe4be0c['newElo']!==undefined&&_0xe4be0c[_0x5c3b06(0x134)]!==undefined);if(_0x1cdd2b){let _0x6718c;if(_0x1cdd2b[_0x5c3b06(0x119)]!==undefined)_0x6718c=_0x1cdd2b[_0x5c3b06(0x119)];else _0x1cdd2b['newElo']!==undefined&&_0x1cdd2b['previousElo']!==undefined&&(_0x6718c=_0x1cdd2b['newElo']-_0x1cdd2b['previousElo']);_0x6718c!==undefined&&_0x32691d['set'](_0x80012,_0x6718c);}}});if(_0x552ba1[_0x3670d9(0x11e)]===0x0){const _0x28307b=collection(db,'eloHistory'),_0x22088d=query(_0x28307b,where('gameMode','==','D2'),orderBy(_0x3670d9(0x113),'desc'),limit(0x32));try{const _0x19f217=await getDocs(_0x22088d);console[_0x3670d9(0x136)]('D2:\x20Found',_0x19f217['size'],'fallback\x20entries'),_0x19f217['forEach'](_0x1a11c3=>{const _0x4fad4b=_0x3670d9,_0x2c68c3=_0x1a11c3['data'](),_0x5b4e71=_0x2c68c3['username']||_0x2c68c3['playerUsername'];if(_0x5b4e71&&_0x9048f5['includes'](_0x5b4e71)){const _0x416cfc=_0x2c68c3[_0x4fad4b(0x119)]||(_0x2c68c3['newElo']!==undefined&&_0x2c68c3['previousElo']!==undefined?_0x2c68c3[_0x4fad4b(0x14c)]-_0x2c68c3[_0x4fad4b(0x134)]:0x0);_0x416cfc!==0x0&&(_0x32691d[_0x4fad4b(0x14b)](_0x5b4e71,_0x416cfc),console[_0x4fad4b(0x136)]('D2:\x20'+_0x5b4e71+'\x20fallback\x20ELO\x20change:\x20'+_0x416cfc));}});}catch(_0x9c7fa4){}}}catch(_0x4a86ba){console[_0x3670d9(0x13d)]('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x4a86ba);}return _0x32691d;}async function fetchBatchMatchStatsD2(_0x57e47e){const _0x483099=a32_0x2322,_0x2a4575=new Map();try{_0x57e47e['forEach'](_0xf41c3d=>{_0x2a4575['set'](_0xf41c3d,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x12fb05=collection(db,'approvedMatchesD2'),_0x2f3681=await getDocs(_0x12fb05);_0x2f3681['forEach'](_0x38e3e4=>{const _0x2df564=a32_0x2322,_0x105dc7=_0x38e3e4[_0x2df564(0x139)](),_0x267436=_0x105dc7['winnerUsername'],_0x4e242e=_0x105dc7[_0x2df564(0x138)];if(_0x57e47e['includes'](_0x267436)){const _0x6908e1=_0x2a4575['get'](_0x267436);_0x6908e1[_0x2df564(0x147)]++,_0x6908e1['totalMatches']++,_0x6908e1['totalKills']+=parseInt(_0x105dc7['winnerScore'])||0x0,_0x6908e1[_0x2df564(0x12d)]+=parseInt(_0x105dc7[_0x2df564(0x12a)])||0x0;}if(_0x57e47e['includes'](_0x4e242e)){const _0x4c021e=_0x2a4575[_0x2df564(0x121)](_0x4e242e);_0x4c021e[_0x2df564(0x12c)]++,_0x4c021e['totalMatches']++,_0x4c021e['totalKills']+=parseInt(_0x105dc7['loserScore'])||0x0,_0x4c021e['totalDeaths']+=parseInt(_0x105dc7[_0x2df564(0x125)])||0x0;}}),_0x57e47e[_0x483099(0x137)](_0x32e740=>{const _0x250a2a=_0x483099,_0x45f5b5=_0x2a4575['get'](_0x32e740);_0x45f5b5['kda']=_0x45f5b5['totalDeaths']>0x0?(_0x45f5b5[_0x250a2a(0x128)]/_0x45f5b5[_0x250a2a(0x12d)])['toFixed'](0x2):_0x45f5b5['totalKills']['toFixed'](0x2),_0x45f5b5[_0x250a2a(0x13f)]=_0x45f5b5['totalMatches']>0x0?(_0x45f5b5['wins']/_0x45f5b5['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0xe8825){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0xe8825);}return _0x2a4575;}export{displayLadderD2,updatePlayerPositions};