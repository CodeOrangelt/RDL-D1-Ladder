const a45_0x132896=a45_0x47cf,a45_0x494977=(function(){let _0x475f66=!![];return function(_0x26c079,_0x178dbc){const _0x40c0e9=_0x475f66?function(){if(_0x178dbc){const _0x432cff=_0x178dbc['apply'](_0x26c079,arguments);return _0x178dbc=null,_0x432cff;}}:function(){};return _0x475f66=![],_0x40c0e9;};}()),a45_0x223c73=a45_0x494977(this,function(){const _0x43f880=a45_0x47cf;let _0x1a2f34;try{const _0x40cc45=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1a2f34=_0x40cc45();}catch(_0x1b660a){_0x1a2f34=window;}const _0x34d530=_0x1a2f34[_0x43f880(0xa2)]=_0x1a2f34['console']||{},_0x2c8023=['log','warn','info','error','exception',_0x43f880(0xbc),'trace'];for(let _0x24cc77=0x0;_0x24cc77<_0x2c8023['length'];_0x24cc77++){const _0x57a8b4=a45_0x494977['constructor']['prototype']['bind'](a45_0x494977),_0x47b644=_0x2c8023[_0x24cc77],_0x5416cc=_0x34d530[_0x47b644]||_0x57a8b4;_0x57a8b4['__proto__']=a45_0x494977['bind'](a45_0x494977),_0x57a8b4['toString']=_0x5416cc[_0x43f880(0xbf)][_0x43f880(0xa7)](_0x5416cc),_0x34d530[_0x47b644]=_0x57a8b4;}});a45_0x223c73();function a45_0x47cf(_0x5209c3,_0x160447){const _0x223c73=a45_0x4e58();return a45_0x47cf=function(_0x494977,_0x401744){_0x494977=_0x494977-0xa2;let _0x4e58ba=_0x223c73[_0x494977];return _0x4e58ba;},a45_0x47cf(_0x5209c3,_0x160447);}import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x10fc00=a45_0x47cf;this['form']=document[_0x10fc00(0xb7)]('profile-form'),this[_0x10fc00(0xa6)]=document['getElementById']('pfp-upload'),this[_0x10fc00(0xa3)]=document['getElementById']('profile-preview'),this[_0x10fc00(0xb2)]=document['getElementById']('player-stats'),this[_0x10fc00(0xae)](),this['loadProfile']();}['setupEventListeners'](){const _0x58e48b=a45_0x47cf;this[_0x58e48b(0xa6)]['addEventListener'](_0x58e48b(0xaf),_0x2d7122=>this['handleImageUpload'](_0x2d7122)),this[_0x58e48b(0xb8)][_0x58e48b(0xc3)]('submit',_0xfb3315=>this['handleSubmit'](_0xfb3315));}async['handleImageUpload'](_0x4bdf42){const _0x5d29f4=a45_0x47cf,_0x35f43c=_0x4bdf42['target']['files'][0x0];if(_0x35f43c){const _0xc66363=new FileReader();_0xc66363[_0x5d29f4(0xb0)]=_0x23b86f=>{const _0x5c0fca=_0x5d29f4;this['pfpPreview'][_0x5c0fca(0xb6)]=_0x23b86f[_0x5c0fca(0xc2)]['result'];},_0xc66363[_0x5d29f4(0xb9)](_0x35f43c);}}async['handleSubmit'](_0x54c31b){const _0x3b2fac=a45_0x47cf;_0x54c31b['preventDefault']();const _0x4ac111=auth[_0x3b2fac(0xb3)];if(!_0x4ac111){alert(_0x3b2fac(0xbb));return;}try{const _0x30565b=new FormData(this[_0x3b2fac(0xb8)]),_0x48cdfa={'nickname':_0x30565b[_0x3b2fac(0xb4)]('nickname'),'motto':_0x30565b[_0x3b2fac(0xb4)]('motto'),'favoriteMap':_0x30565b['get']('favorite-map'),'favoriteWeapon':_0x30565b[_0x3b2fac(0xb4)]('favorite-weapon'),'updatedAt':new Date()['toISOString']()},_0x5046bf=this[_0x3b2fac(0xa6)]['files'][0x0];if(_0x5046bf){const _0x6834c1=ref(storage,'profile-pictures/'+_0x4ac111[_0x3b2fac(0xa5)]);await uploadBytes(_0x6834c1,_0x5046bf),_0x48cdfa['pfpUrl']=await getDownloadURL(_0x6834c1);}await setDoc(doc(db,'profiles',_0x4ac111[_0x3b2fac(0xa5)]),_0x48cdfa),alert(_0x3b2fac(0xad));}catch(_0x3f9970){console['error']('Error\x20saving\x20profile:',_0x3f9970),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async[a45_0x132896(0xc1)](){onAuthStateChanged(auth,async _0x451e32=>{const _0x16a7fa=a45_0x47cf;if(_0x451e32)try{const _0x4370d7=await getDoc(doc(db,'profiles',_0x451e32['uid']));if(_0x4370d7['exists']()){const _0x18d165=_0x4370d7['data']();document[_0x16a7fa(0xb7)](_0x16a7fa(0xab))['value']=_0x18d165['nickname']||'',document['getElementById']('motto')['value']=_0x18d165['motto']||'',document['getElementById']('favorite-map')['value']=_0x18d165['favoriteMap']||'',document[_0x16a7fa(0xb7)](_0x16a7fa(0xa9))[_0x16a7fa(0xa8)]=_0x18d165['favoriteWeapon']||'',_0x18d165['pfpUrl']&&(this['pfpPreview']['src']=_0x18d165['pfpUrl']),await this[_0x16a7fa(0xbd)](_0x18d165['nickname']);}}catch(_0x5a6bc1){console[_0x16a7fa(0xba)](_0x16a7fa(0xb1),_0x5a6bc1);}});}async['loadPlayerStats'](_0x1980cf){const _0x57fa3d=a45_0x132896;if(!_0x1980cf)return;try{const _0x6ce843=collection(db,'approvedMatches'),[_0x3193e6,_0x1dca0b]=await Promise[_0x57fa3d(0xa4)]([getDocs(query(_0x6ce843,where('winnerUsername','==',_0x1980cf))),getDocs(query(_0x6ce843,where('loserUsername','==',_0x1980cf)))]),_0x75c968=_0x3193e6['size'],_0x1c6d90=_0x1dca0b['size'],_0x548180=_0x75c968+_0x1c6d90;let _0x27a6cd=0x0,_0x144930=0x0;_0x3193e6['forEach'](_0x3ccfbf=>{const _0x80ea1f=_0x57fa3d,_0x1e4884=_0x3ccfbf['data']();if(_0x1e4884['winnerScore'])_0x27a6cd+=parseInt(_0x1e4884['winnerScore']);if(_0x1e4884['loserScore'])_0x144930+=parseInt(_0x1e4884[_0x80ea1f(0xb5)]);}),_0x1dca0b['forEach'](_0x56201e=>{const _0x56a7bb=_0x56201e['data']();if(_0x56a7bb['loserScore'])_0x27a6cd+=parseInt(_0x56a7bb['loserScore']);if(_0x56a7bb['winnerScore'])_0x144930+=parseInt(_0x56a7bb['winnerScore']);});const _0x327190=_0x144930===0x0?_0x27a6cd[_0x57fa3d(0xaa)](0x2):(_0x27a6cd/_0x144930)['toFixed'](0x2),_0xa001d7=_0x548180===0x0?'0':(_0x75c968/_0x548180*0x64)[_0x57fa3d(0xaa)](0x1);console['log']('Stats\x20calculated:',{'totalMatches':_0x548180,'wins':_0x75c968,'losses':_0x1c6d90,'totalKills':_0x27a6cd,'totalDeaths':_0x144930,'kdRatio':_0x327190,'winRate':_0xa001d7}),document[_0x57fa3d(0xb7)](_0x57fa3d(0xc0))['textContent']=_0x548180,document[_0x57fa3d(0xb7)]('stats-wins')['textContent']=_0x75c968,document['getElementById']('stats-losses')['textContent']=_0x1c6d90,document['getElementById']('stats-kd')[_0x57fa3d(0xac)]=_0x327190,document[_0x57fa3d(0xb7)]('stats-winrate')['textContent']=_0xa001d7+'%';}catch(_0x5e6d99){console[_0x57fa3d(0xba)]('Error\x20loading\x20player\x20stats:',_0x5e6d99),['matches','wins','losses','kd','winrate']['forEach'](_0x3452d2=>{document['getElementById']('stats-'+_0x3452d2)['textContent']='-';});}}}document[a45_0x132896(0xc3)](a45_0x132896(0xbe),()=>{new ProfileManager();});function a45_0x4e58(){const _0x27d03a=['console','pfpPreview','all','uid','pfpInput','bind','value','favorite-weapon','toFixed','nickname','textContent','Profile\x20saved\x20successfully!','setupEventListeners','change','onload','Error\x20loading\x20profile:','statsContainer','currentUser','get','loserScore','src','getElementById','form','readAsDataURL','error','Please\x20sign\x20in\x20to\x20save\x20your\x20profile','table','loadPlayerStats','DOMContentLoaded','toString','stats-matches','loadProfile','target','addEventListener'];a45_0x4e58=function(){return _0x27d03a;};return a45_0x4e58();}