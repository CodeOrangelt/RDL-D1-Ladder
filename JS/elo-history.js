function a16_0x50e1(){const _0x119be5=['Error\x20fetching\x20username:','apply','demotion','exception','console','newElo','bind','match','timestamp','players','Silver','exists','error','trace','Unknown\x20Player'];a16_0x50e1=function(){return _0x119be5;};return a16_0x50e1();}const a16_0x19d7d5=(function(){let _0x3092fa=!![];return function(_0x21873b,_0x24c1f4){const _0x258986=_0x3092fa?function(){const _0x1abe1e=a16_0x29d9;if(_0x24c1f4){const _0x4b6e0a=_0x24c1f4[_0x1abe1e(0x124)](_0x21873b,arguments);return _0x24c1f4=null,_0x4b6e0a;}}:function(){};return _0x3092fa=![],_0x258986;};}()),a16_0x39e72d=a16_0x19d7d5(this,function(){const _0x59125b=a16_0x29d9;let _0x4dd79a;try{const _0x1ef263=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4dd79a=_0x1ef263();}catch(_0x1ae899){_0x4dd79a=window;}const _0x18898b=_0x4dd79a[_0x59125b(0x127)]=_0x4dd79a['console']||{},_0x437172=['log','warn','info',_0x59125b(0x12f),_0x59125b(0x126),'table',_0x59125b(0x130)];for(let _0x226059=0x0;_0x226059<_0x437172['length'];_0x226059++){const _0x1f0f33=a16_0x19d7d5['constructor']['prototype']['bind'](a16_0x19d7d5),_0x4ea1ab=_0x437172[_0x226059],_0x4bc309=_0x18898b[_0x4ea1ab]||_0x1f0f33;_0x1f0f33['__proto__']=a16_0x19d7d5[_0x59125b(0x129)](a16_0x19d7d5),_0x1f0f33['toString']=_0x4bc309['toString']['bind'](_0x4bc309),_0x18898b[_0x4ea1ab]=_0x1f0f33;}});a16_0x39e72d();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a16_0x29d9(_0x3d0927,_0x12ff95){const _0x39e72d=a16_0x50e1();return a16_0x29d9=function(_0x19d7d5,_0x5b279d){_0x19d7d5=_0x19d7d5-0x123;let _0x50e165=_0x39e72d[_0x19d7d5];return _0x50e165;},a16_0x29d9(_0x3d0927,_0x12ff95);}import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];async function getUsernameById(_0x34bc5b){const _0x1fcf82=a16_0x29d9;try{if(!_0x34bc5b)return _0x1fcf82(0x131);const _0x14883d=await getDoc(doc(db,_0x1fcf82(0x12c),_0x34bc5b));return _0x14883d[_0x1fcf82(0x12e)]()?_0x14883d['data']()['username']:'Unknown\x20Player';}catch(_0x5dbfaf){return console['error'](_0x1fcf82(0x123),_0x5dbfaf),_0x1fcf82(0x131);}}export async function recordEloChange({playerId:_0x28ab87,previousElo:_0x4d9bad,newElo:_0x2e8582,opponentId:_0x4be370,matchResult:_0xbe282b,previousPosition:_0x72f7c,newPosition:_0xfff8c8,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x595b93}){const _0xa78c61=a16_0x29d9;try{const _0x4fde0e=doc(collection(db,'eloHistory'));let _0x327beb=_0xa78c61(0x12a);if(isPromotion)_0x327beb='promotion';if(isDemotion)_0x327beb=_0xa78c61(0x125);let _0x5ec472='Unranked';if(_0x2e8582>=0x834)_0x5ec472='Emerald';else{if(_0x2e8582>=0x708)_0x5ec472='Gold';else{if(_0x2e8582>=0x640)_0x5ec472=_0xa78c61(0x12d);else{if(_0x2e8582>=0x578)_0x5ec472='Bronze';}}}return await setDoc(_0x4fde0e,{'type':_0x327beb,'player':_0x28ab87,'opponent':_0x4be370,'previousElo':_0x4d9bad,'newElo':_0x2e8582,'change':_0x2e8582-_0x4d9bad,'matchResult':_0xbe282b,'previousPosition':_0x72f7c,'newPosition':_0xfff8c8,'rankAchieved':_0x5ec472,'timestamp':_0x595b93}),console['log']('ELO\x20history\x20recorded\x20for\x20'+_0x28ab87),!![];}catch(_0x4a1f9e){console['error']('Error\x20recording\x20ELO\x20history:',_0x4a1f9e);throw _0x4a1f9e;}}export async function getEloHistory(){const _0x321da4=a16_0x29d9;try{const _0x2cb112=collection(db,'eloHistory'),_0xcc72c0=query(_0x2cb112,orderBy(_0x321da4(0x12b),'desc')),_0x503323=await getDocs(_0xcc72c0),_0x4a9d3c=_0x503323['docs']['map'](async _0x1ed0b8=>{const _0x7a7336=_0x321da4,_0x3cb652=_0x1ed0b8['data'](),[_0x3af70c,_0x832c0f]=await Promise['all']([getUsernameById(_0x3cb652['player']),getUsernameById(_0x3cb652['opponent'])]);return{..._0x3cb652,'playerUsername':_0x3af70c,'opponentUsername':_0x832c0f,'change':_0x3cb652[_0x7a7336(0x128)]-_0x3cb652['previousElo'],'timestamp':_0x3cb652['timestamp']};}),_0x4cb424=await Promise['all'](_0x4a9d3c);return{'entries':_0x4cb424};}catch(_0x30810a){console['error']('Error\x20fetching\x20ELO\x20history:',_0x30810a);throw _0x30810a;}}export function resetPagination(){lastVisible=null;}