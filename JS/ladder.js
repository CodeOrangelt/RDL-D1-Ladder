const a27_0x43c94c=a27_0x230a,a27_0x337ed9=(function(){let _0x5ebf7b=!![];return function(_0x1bf733,_0x347fd2){const _0x37d89d=_0x5ebf7b?function(){if(_0x347fd2){const _0xbcf746=_0x347fd2['apply'](_0x1bf733,arguments);return _0x347fd2=null,_0xbcf746;}}:function(){};return _0x5ebf7b=![],_0x37d89d;};}()),a27_0x5360fa=a27_0x337ed9(this,function(){const _0x4a175e=a27_0x230a,_0x3bf62a=function(){let _0x4dc91e;try{_0x4dc91e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x52adab){_0x4dc91e=window;}return _0x4dc91e;},_0x1a2b6a=_0x3bf62a(),_0x42bf03=_0x1a2b6a[_0x4a175e(0x16d)]=_0x1a2b6a['console']||{},_0x3d7553=['log','warn',_0x4a175e(0x187),'error',_0x4a175e(0x1ba),_0x4a175e(0x16e),'trace'];for(let _0x606bde=0x0;_0x606bde<_0x3d7553['length'];_0x606bde++){const _0x1edf6c=a27_0x337ed9['constructor']['prototype']['bind'](a27_0x337ed9),_0xb05a47=_0x3d7553[_0x606bde],_0x54c264=_0x42bf03[_0xb05a47]||_0x1edf6c;_0x1edf6c['__proto__']=a27_0x337ed9['bind'](a27_0x337ed9),_0x1edf6c['toString']=_0x54c264['toString']['bind'](_0x54c264),_0x42bf03[_0xb05a47]=_0x1edf6c;}});a27_0x5360fa();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();function a27_0x230a(_0x36cec3,_0x2da3d7){const _0x5360fa=a27_0x4ec2();return a27_0x230a=function(_0x337ed9,_0x489121){_0x337ed9=_0x337ed9-0x15f;let _0x4ec278=_0x5360fa[_0x337ed9];return _0x4ec278;},a27_0x230a(_0x36cec3,_0x2da3d7);}let activeListeners=[];export async function loadLadderData(_0x52a738=0x1){const _0x55dd09=a27_0x230a;try{document[_0x55dd09(0x188)](_0x55dd09(0x1cc))['style']['display']='block';const _0x58adb7=await getLadderData(_0x52a738);_0x58adb7['sort']((_0x55d38a,_0x30f63c)=>_0x30f63c['elo']-_0x55d38a[_0x55dd09(0x18e)]);const _0x3ac5ba=_0x58adb7[_0x55dd09(0x180)](_0x4f99b2=>_0x4f99b2['id']),_0x470a08=await getEloHistoryBatch(_0x3ac5ba,_0x52a738),_0xa14bad=_0x58adb7['map']((_0x404007,_0x3ab317)=>{const _0x46bd70=_0x470a08[_0x404007['id']]||[],_0xb90045=_0x46bd70['sort']((_0x2a3a92,_0x52e2b5)=>new Date(_0x52e2b5['date'])-new Date(_0x2a3a92['date']))['slice'](0x0,0x5);return{..._0x404007,'rank':_0x3ab317+0x1,'lastMatches':_0xb90045,'recentActivity':_0xb90045['length']>0x0};});renderLadder(_0xa14bad),setupRealTimeUpdates(_0x52a738);}catch(_0x3fb75f){console['error']('Error\x20loading\x20ladder\x20data:',_0x3fb75f),document['getElementById']('error-message')[_0x55dd09(0x1a4)]='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById']('loading-indicator')['style']['display']='none';}}function setupRealTimeUpdates(_0x190c71=0x1){const _0x4c4f3d=a27_0x230a;activeListeners['forEach'](_0x4a73e7=>_0x4a73e7()),activeListeners=[];const _0x5dbe58=_0x190c71===0x1?'players':_0x4c4f3d(0x16f)+_0x190c71,_0x381149=_0x190c71===0x1?'matches':'matchesD'+_0x190c71,_0x3642a3=new Date();_0x3642a3['setDate'](_0x3642a3['getDate']()-0x1);const _0x36b200=setupEfficientListener(_0x381149,[where('date','>=',_0x3642a3['toISOString']()),limit(0xa),orderBy('date','desc')],async _0x53d4df=>{_0x53d4df['length']>0x0&&await loadLadderData(_0x190c71);});activeListeners['push'](_0x36b200);}export function cleanupListeners(){activeListeners['forEach'](_0x5bb1d5=>_0x5bb1d5()),activeListeners=[];}function renderLadder(_0x43a947){const _0x14204e=a27_0x230a,_0x2fa3b7=document[_0x14204e(0x188)]('ladder-container');_0x2fa3b7['innerHTML']='',_0x43a947['forEach'](_0x5ab1f9=>{const _0x57fab0=_0x14204e,_0x13020b=document['createElement']('div');_0x13020b[_0x57fab0(0x1b3)]='ladder-player',_0x13020b[_0x57fab0(0x197)]=_0x57fab0(0x19e)+_0x5ab1f9['rank']+_0x57fab0(0x186)+(_0x5ab1f9['username']||_0x5ab1f9['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x5ab1f9[_0x57fab0(0x18e)]+_0x57fab0(0x1b8)+(_0x5ab1f9['recentActivity']?'active':'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5ab1f9[_0x57fab0(0x1aa)]?'Active':'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2fa3b7['appendChild'](_0x13020b);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x28e95d=![]){const _0x528467=a27_0x230a,_0x2ea8ec=document[_0x528467(0x166)]('#ladder\x20tbody');if(!_0x2ea8ec){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x2ea8ec['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x28a0bd=Date['now']();if(!_0x28e95d&&playerCache['data']&&_0x28a0bd-playerCache[_0x528467(0x176)]<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache[_0x528467(0x17d)]);return;}const _0x42fd41=collection(db,'players'),_0x4f7eca=await getDocs(_0x42fd41),_0x44e9f=[];_0x4f7eca[_0x528467(0x1b5)](_0x42d4ec=>{const _0x26af3e=_0x528467,_0x215c17=_0x42d4ec['data']();_0x44e9f['push']({..._0x215c17,'id':_0x42d4ec['id'],'elo':_0x215c17['eloRating']||0x0,'position':_0x215c17[_0x26af3e(0x191)]||Number['MAX_SAFE_INTEGER']});});const _0x557269=collection(db,_0x528467(0x19b)),_0x53455e=await getDocs(_0x557269),_0x31aef2=new Map();_0x53455e[_0x528467(0x1b5)](_0x14f0ce=>{const _0x107ec9=_0x528467,_0x8a093d=_0x14f0ce['data']();_0x8a093d['username']&&_0x31aef2['set'](_0x8a093d[_0x107ec9(0x1ac)]['toLowerCase'](),_0x8a093d);}),_0x44e9f[_0x528467(0x1b5)](_0x374d59=>{const _0x4950e3=_0x528467,_0x9d9aea=_0x374d59[_0x4950e3(0x1ac)]?.[_0x4950e3(0x169)]();if(_0x9d9aea&&_0x31aef2['has'](_0x9d9aea)){const _0x43f4c2=_0x31aef2['get'](_0x9d9aea);_0x43f4c2[_0x4950e3(0x1ce)]&&(_0x374d59[_0x4950e3(0x1ce)]=_0x43f4c2[_0x4950e3(0x1ce)]['toLowerCase']());}});const _0x52df25=_0x44e9f['map'](_0x3ce752=>_0x3ce752[_0x528467(0x1ac)]),_0x4abdd0=await fetchBatchMatchStats(_0x52df25);_0x44e9f['sort']((_0x31d53f,_0x19a6bd)=>{const _0x4d7c62=_0x528467,_0x1dbc31=_0x4abdd0['get'](_0x31d53f['username'])?.[_0x4d7c62(0x179)]||0x0,_0x5581ab=_0x4abdd0['get'](_0x19a6bd['username'])?.['totalMatches']||0x0;if(_0x1dbc31===0x0!==(_0x5581ab===0x0))return _0x1dbc31===0x0?0x1:-0x1;return(_0x31d53f['position']||0x3e7)-(_0x19a6bd['position']||0x3e7);}),_0x44e9f['forEach']((_0x6d49a4,_0x4073e8)=>{_0x6d49a4['position']=_0x4073e8+0x1;}),playerCache['data']=_0x44e9f,playerCache['timestamp']=_0x28a0bd,updateLadderDisplay(_0x44e9f,_0x4abdd0);}catch(_0x3249e6){console['error']('Error\x20loading\x20ladder:',_0x3249e6),_0x2ea8ec[_0x528467(0x197)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x3249e6['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x4a3a22){const _0x9f63b3=a27_0x230a,_0x20c13f=new Map();try{_0x4a3a22[_0x9f63b3(0x1b5)](_0x4aba2d=>{const _0xaea2f0=_0x9f63b3;_0x20c13f[_0xaea2f0(0x15f)](_0x4aba2d,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x221aed=collection(db,'approvedMatches'),_0x331b3b=await getDocs(_0x221aed);_0x331b3b['forEach'](_0x4d6ef5=>{const _0x3b3a3b=_0x9f63b3,_0x5cf63f=_0x4d6ef5['data'](),_0x3d3a79=_0x5cf63f['winnerUsername'],_0x1a3ce3=_0x5cf63f['loserUsername'];if(_0x4a3a22[_0x3b3a3b(0x185)](_0x3d3a79)){const _0x56f135=_0x20c13f['get'](_0x3d3a79);_0x56f135['wins']++,_0x56f135['totalMatches']++,_0x56f135[_0x3b3a3b(0x19a)]+=parseInt(_0x5cf63f['winnerScore'])||0x0,_0x56f135['totalDeaths']+=parseInt(_0x5cf63f['loserScore'])||0x0;}if(_0x4a3a22[_0x3b3a3b(0x185)](_0x1a3ce3)){const _0x5c700e=_0x20c13f['get'](_0x1a3ce3);_0x5c700e[_0x3b3a3b(0x1c4)]++,_0x5c700e[_0x3b3a3b(0x179)]++,_0x5c700e['totalKills']+=parseInt(_0x5cf63f['loserScore'])||0x0,_0x5c700e['totalDeaths']+=parseInt(_0x5cf63f[_0x3b3a3b(0x178)])||0x0;}}),_0x4a3a22['forEach'](_0x3a4678=>{const _0x33799b=_0x9f63b3,_0x21170d=_0x20c13f[_0x33799b(0x18f)](_0x3a4678);_0x21170d['kda']=_0x21170d['totalDeaths']>0x0?(_0x21170d[_0x33799b(0x19a)]/_0x21170d['totalDeaths'])['toFixed'](0x2):_0x21170d['totalKills'][_0x33799b(0x18c)](0x2),_0x21170d[_0x33799b(0x1a2)]=_0x21170d['totalMatches']>0x0?(_0x21170d['wins']/_0x21170d['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x2df52d){console['error'](_0x9f63b3(0x189),_0x2df52d);}return _0x20c13f;}function a27_0x4ec2(){const _0x49d809=['set','Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','players','gray','admin@ladder.com','abs','click','querySelector','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','toLowerCase','sort','Error\x20fetching\x20ELO\x20history:','tokenImage','console','table','playersD','duos','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','bold','newEloRating','playersD2','Duos\x20ladder\x20is\x20currently\x20admin-only','timestamp','\x20has\x20equipped:\x20','winnerScore','totalMatches','onAuthStateChanged','player','teammate','data','exists','admin','map','ELO\x20history\x20collection\x20is\x20empty','active','label[for=\x22duos-switch\x22]','#4CAF50','includes','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','info','getElementById','Error\x20fetching\x20batch\x20match\x20stats:','classList','tokenName','toFixed',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','elo','get','warn','position','admin-only-message','duos-switch','#CD7F32','none','length','innerHTML','disabled','duos-ladder-container','totalKills','userProfiles','email','remove','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#','style','d2-ladder-container','oldEloRating','winRate','#ladder\x20tbody','innerText','d1-switch','addEventListener','%</td>\x0a\x20\x20\x20\x20</tr>','role','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22','recentActivity','d3-switch','username','</span>\x20(ELO:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','block','cursor','d1-ladder-container','add','className','You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>','forEach','D2\x20toggle\x20clicked','eloRating','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20','elo-recommendation-text-d2','exception','ðŸŽ¨\x20','round','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','elo-recommendation-text-d3','error','display','#b9f1fc','equipped','\x20(equipped:\x20','losses','change','Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents','#C0C0C0','pointer','checked','#FFD700','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','loading-indicator','docs','country'];a27_0x4ec2=function(){return _0x49d809;};return a27_0x4ec2();}function createPlayerRow(_0x580acd,_0x6eaeca){const _0x5d8836=a27_0x230a,_0x4a51a0=parseFloat(_0x580acd[_0x5d8836(0x18e)])||0x0;let _0x6f2403='gray';if(_0x4a51a0>=0x7d0)_0x6f2403='#50C878';else{if(_0x4a51a0>=0x708)_0x6f2403='#FFD700';else{if(_0x4a51a0>=0x640)_0x6f2403=_0x5d8836(0x1c1);else _0x4a51a0>=0x578&&(_0x6f2403=_0x5d8836(0x194));}}let _0x3d35c8='';return _0x580acd['country']&&(_0x3d35c8='<img\x20src=\x22../images/flags/'+_0x580acd['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x580acd['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x5d8836(0x168)+_0x580acd['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x580acd['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x6f2403+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x580acd['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3d35c8+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x6f2403+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x4a51a0+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x6eaeca['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x6eaeca['wins']+_0x5d8836(0x1bd)+_0x6eaeca['losses']+_0x5d8836(0x1bd)+_0x6eaeca['kda']+_0x5d8836(0x1bd)+_0x6eaeca['winRate']+_0x5d8836(0x1a7);}function getPlayerRankName(_0x15f7b3){if(_0x15f7b3>=0x7d0)return'Emerald';if(_0x15f7b3>=0x708)return'Gold';if(_0x15f7b3>=0x640)return'Silver';if(_0x15f7b3>=0x578)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x138455){const _0x48e437=a27_0x230a,_0x57aa2a=new Map();_0x138455[_0x48e437(0x1b5)](_0x9d6710=>{_0x57aa2a['set'](_0x9d6710,0x0);});try{const _0x5cac77=collection(db,'players'),_0x5d4a11=await getDocs(_0x5cac77),_0x564e24=new Map(),_0x2df427=new Map();_0x5d4a11[_0x48e437(0x1b5)](_0x2f8702=>{const _0x56ce2c=_0x48e437,_0x4ee508=_0x2f8702[_0x56ce2c(0x17d)]();_0x4ee508['username']&&(_0x564e24[_0x56ce2c(0x15f)](_0x2f8702['id'],_0x4ee508['username']),_0x2df427[_0x56ce2c(0x15f)](_0x4ee508['username']['toLowerCase'](),_0x2f8702['id']));});const _0x148d04=collection(db,'eloHistory'),_0x482adf=query(_0x148d04,orderBy('timestamp','desc'),limit(0x12c)),_0x421aa2=await getDocs(_0x482adf);if(_0x421aa2['empty'])return console['log'](_0x48e437(0x181)),_0x57aa2a;if(_0x421aa2['docs']['length']>0x0){const _0x263c5a=_0x421aa2['docs'][0x0]['data']();if(_0x263c5a[_0x48e437(0x17b)]&&_0x564e24['has'](_0x263c5a[_0x48e437(0x17b)])){}}const _0x21e1e7=new Map();let _0x545979=0x0;_0x421aa2[_0x48e437(0x1b5)](_0x293431=>{const _0x59edf0=_0x48e437,_0x167da9=_0x293431[_0x59edf0(0x17d)]();let _0x37c01d=null;if(_0x167da9[_0x59edf0(0x17b)]&&_0x564e24['has'](_0x167da9['player']))_0x37c01d=_0x564e24['get'](_0x167da9['player']);else{if(_0x167da9['username']&&_0x2df427['has'](_0x167da9['username']['toLowerCase']()))_0x37c01d=_0x167da9['username'];else _0x167da9['playerUsername']&&_0x2df427['has'](_0x167da9['playerUsername'][_0x59edf0(0x169)]())&&(_0x37c01d=_0x167da9['playerUsername']);}_0x37c01d&&_0x138455['includes'](_0x37c01d)&&(_0x545979++,!_0x21e1e7['has'](_0x37c01d)&&_0x21e1e7[_0x59edf0(0x15f)](_0x37c01d,[]),_0x21e1e7['get'](_0x37c01d)['push']({..._0x167da9,'timestamp':_0x167da9['timestamp']?.['seconds']||0x0}));}),_0x21e1e7['forEach']((_0x527a3c,_0x19a3d8)=>{const _0x43a845=_0x48e437;if(_0x527a3c[_0x43a845(0x196)]>0x0){_0x527a3c[_0x43a845(0x16a)]((_0x49325d,_0x5a65d5)=>_0x5a65d5['timestamp']-_0x49325d['timestamp']);const _0x2226dd=_0x527a3c['find'](_0xf9e4df=>_0xf9e4df['change']!==undefined||_0xf9e4df['newElo']!==undefined&&_0xf9e4df['previousElo']!==undefined||_0xf9e4df[_0x43a845(0x173)]!==undefined&&_0xf9e4df['oldEloRating']!==undefined);if(_0x2226dd){let _0x934b28;if(_0x2226dd['change']!==undefined)_0x934b28=parseInt(_0x2226dd['change']);else{if(_0x2226dd['newElo']!==undefined&&entry['previousElo']!==undefined)_0x934b28=parseInt(_0x2226dd['newElo'])-parseInt(_0x2226dd['previousElo']);else _0x2226dd['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x934b28=parseInt(_0x2226dd['newEloRating'])-parseInt(_0x2226dd[_0x43a845(0x1a1)]));}!isNaN(_0x934b28)&&_0x934b28!==0x0&&_0x57aa2a['set'](_0x19a3d8,_0x934b28);}}});}catch(_0x245fca){console['error'](_0x48e437(0x16b),_0x245fca);}return _0x57aa2a;}function createPlayerRowWithToken(_0x44c97f,_0x30adfc,_0x22d1a1){const _0x10f001=a27_0x230a,_0x59fd0d=parseFloat(_0x44c97f['elo'])||0x0;let _0x19d787='gray';if(_0x59fd0d>=0x7d0)_0x19d787='#50C878';else{if(_0x59fd0d>=0x708)_0x19d787=_0x10f001(0x1ca);else{if(_0x59fd0d>=0x640)_0x19d787='#b9f1fc';else _0x59fd0d>=0x578&&(_0x19d787='#CD7F32');}}let _0x14b963='';_0x44c97f[_0x10f001(0x1ce)]&&(_0x14b963='<img\x20src=\x22../images/flags/'+_0x44c97f[_0x10f001(0x1ce)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x44c97f[_0x10f001(0x1ce)]+_0x10f001(0x171));let _0x2ab5ca='';return _0x22d1a1&&(_0x2ab5ca='<img\x20src=\x22'+_0x22d1a1[_0x10f001(0x16c)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x22d1a1['tokenName']+_0x10f001(0x1a9)+_0x22d1a1['tokenName']+'\x20'+(_0x22d1a1[_0x10f001(0x1c2)]?'(Equipped)':'')+_0x10f001(0x167)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x44c97f['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x44c97f['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x19d787+_0x10f001(0x18d)+_0x44c97f[_0x10f001(0x1ac)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x14b963+_0x10f001(0x1ae)+_0x2ab5ca+_0x10f001(0x1cb)+_0x19d787+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x59fd0d+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x30adfc[_0x10f001(0x179)]+_0x10f001(0x1bd)+_0x30adfc['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x30adfc['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x30adfc['kda']+_0x10f001(0x1bd)+_0x30adfc['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x34c4a7,_0x39332f=null){const _0x5ef2eb=a27_0x230a,_0x66b2e1=document['querySelector'](_0x5ef2eb(0x1a3));if(!_0x66b2e1){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x515396=document[_0x5ef2eb(0x166)]('#ladder\x20thead\x20tr');_0x515396&&(_0x515396['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x2a7ea3=_0x34c4a7[_0x5ef2eb(0x180)](_0x438dba=>_0x438dba['username']);!_0x39332f&&(_0x39332f=await fetchBatchMatchStats(_0x2a7ea3));let _0x3ff1bb=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x3ff1bb=await getTokensByUsernames(_0x2a7ea3),console['log']('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x3ff1bb['size'],_0x5ef2eb(0x161)),_0x3ff1bb[_0x5ef2eb(0x1b5)]((_0x46cc6f,_0x47da34)=>{const _0xe404ec=_0x5ef2eb,_0x5abd5c=_0x46cc6f['find'](_0x168b02=>_0x168b02['equipped']);_0x5abd5c&&console['log']('ðŸŽ¯\x20'+_0x47da34+_0xe404ec(0x177)+_0x5abd5c[_0xe404ec(0x18b)]);});}catch(_0x2f0b2e){console['error']('Error\x20fetching\x20tokens:',_0x2f0b2e);}const _0x1ce11c=_0x34c4a7['map'](_0x54dfd6=>{const _0xbc2b8b=_0x5ef2eb,_0x79f8f0=_0x39332f['get'](_0x54dfd6[_0xbc2b8b(0x1ac)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x7f48e6=_0x3ff1bb['get'](_0x54dfd6[_0xbc2b8b(0x1ac)])||[],_0x2f65c1=getPrimaryDisplayToken(_0x7f48e6);return _0x2f65c1&&console['log'](_0xbc2b8b(0x1bb)+_0x54dfd6['username']+'\x20displaying\x20token:\x20'+_0x2f65c1['tokenName']+_0xbc2b8b(0x1c3)+_0x2f65c1['equipped']+')'),createPlayerRowWithToken(_0x54dfd6,_0x79f8f0,_0x2f65c1);})['join']('');_0x66b2e1[_0x5ef2eb(0x197)]=_0x1ce11c,getPlayersLastEloChanges(_0x2a7ea3)['then'](_0x518d89=>{const _0x495892=new Map();_0x66b2e1['querySelectorAll']('tr')['forEach']((_0xbba111,_0x57ad48)=>{const _0x107185=a27_0x230a;_0x57ad48<_0x2a7ea3[_0x107185(0x196)]&&_0x495892['set'](_0x2a7ea3[_0x57ad48],_0xbba111);}),_0x518d89['forEach']((_0x307ed4,_0x5d21ce)=>{const _0x5f5abc=a27_0x230a,_0x3458ea=_0x495892['get'](_0x5d21ce);if(_0x3458ea&&_0x307ed4!==0x0){const _0x19142b=_0x3458ea['querySelector']('td:nth-child(3)');if(_0x19142b){const _0xeb89f7=_0x307ed4>0x0?'+'+_0x307ed4:''+_0x307ed4,_0xa01547=_0x19142b['querySelector']('.trend-indicator');_0xa01547&&(_0xa01547['textContent']=_0xeb89f7,_0xa01547[_0x5f5abc(0x19f)]['color']=_0x307ed4>0x0?_0x5f5abc(0x184):'#F44336',_0xa01547['style']['fontWeight']=_0x5f5abc(0x172),_0xa01547['style']['fontSize']='0.85em',_0xa01547['style']['display']='inline',_0xa01547['style']['visibility']='visible',_0xa01547[_0x5f5abc(0x19f)]['opacity']='1');}}});})['catch'](_0x42db8a=>console[_0x5ef2eb(0x1bf)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x42db8a));}function initLadderToggles(){const _0x2585d9=a27_0x230a,_0x3093a8=document[_0x2585d9(0x188)](_0x2585d9(0x1a5)),_0xdf95bd=document['getElementById']('d2-switch'),_0xe77634=document['getElementById'](_0x2585d9(0x1ab)),_0x395b2d=document['getElementById']('duos-switch'),_0x1183c7=document['getElementById'](_0x2585d9(0x1b1)),_0x40b404=document['getElementById']('d2-ladder-container'),_0x4edf9f=document[_0x2585d9(0x188)]('d3-ladder-container'),_0x43f9bc=document[_0x2585d9(0x188)]('duos-ladder-container');function _0x549202(){const _0x41fe63=_0x2585d9;if(_0x1183c7)_0x1183c7[_0x41fe63(0x18a)]['remove']('active');if(_0x40b404)_0x40b404['classList'][_0x41fe63(0x19d)](_0x41fe63(0x182));if(_0x4edf9f)_0x4edf9f[_0x41fe63(0x18a)]['remove'](_0x41fe63(0x182));if(_0x43f9bc)_0x43f9bc['style'][_0x41fe63(0x1c0)]=_0x41fe63(0x195);if(_0x1183c7)_0x1183c7[_0x41fe63(0x19f)]['display']=_0x41fe63(0x195);if(_0x40b404)_0x40b404['style'][_0x41fe63(0x1c0)]='none';if(_0x4edf9f)_0x4edf9f['style']['display']=_0x41fe63(0x195);}_0x3093a8&&_0x3093a8['addEventListener']('click',()=>{const _0x1f9611=_0x2585d9;console['log']('D1\x20toggle\x20clicked'),_0x549202();_0x1183c7&&(_0x1183c7['classList']['add']('active'),_0x1183c7['style'][_0x1f9611(0x1c0)]='block');document['getElementById']('elo-recommendation-text-d1')[_0x1f9611(0x19f)]['display']='block',document['getElementById'](_0x1f9611(0x1b9))['style'][_0x1f9611(0x1c0)]='none',document[_0x1f9611(0x188)]('elo-recommendation-text-d3')['style'][_0x1f9611(0x1c0)]=_0x1f9611(0x195);if(_0x3093a8)_0x3093a8['classList']['add'](_0x1f9611(0x182));if(_0xdf95bd)_0xdf95bd[_0x1f9611(0x18a)]['remove'](_0x1f9611(0x182));if(_0xe77634)_0xe77634['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0xdf95bd&&_0xdf95bd[_0x2585d9(0x1a6)](_0x2585d9(0x165),()=>{const _0x24ddf4=_0x2585d9;console['log'](_0x24ddf4(0x1b6)),_0x549202();_0x40b404&&(_0x40b404[_0x24ddf4(0x18a)][_0x24ddf4(0x1b2)](_0x24ddf4(0x182)),_0x40b404[_0x24ddf4(0x19f)][_0x24ddf4(0x1c0)]='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0x24ddf4(0x1b9))['style'][_0x24ddf4(0x1c0)]='block',document['getElementById']('elo-recommendation-text-d3')[_0x24ddf4(0x19f)]['display']='none';if(_0xdf95bd)_0xdf95bd['classList']['add']('active');if(_0x3093a8)_0x3093a8['classList'][_0x24ddf4(0x19d)]('active');if(_0xe77634)_0xe77634[_0x24ddf4(0x18a)]['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0xe77634&&_0xe77634[_0x2585d9(0x1a6)]('click',()=>{const _0x227f96=_0x2585d9;console['log']('D3\x20toggle\x20clicked'),_0x549202();_0x4edf9f&&(_0x4edf9f['classList']['add'](_0x227f96(0x182)),_0x4edf9f['style'][_0x227f96(0x1c0)]=_0x227f96(0x1af));document[_0x227f96(0x188)]('elo-recommendation-text-d1')[_0x227f96(0x19f)]['display']='none',document['getElementById']('elo-recommendation-text-d2')[_0x227f96(0x19f)][_0x227f96(0x1c0)]=_0x227f96(0x195),document['getElementById']('elo-recommendation-text-d3')['style']['display']='block';if(_0xe77634)_0xe77634['classList'][_0x227f96(0x1b2)]('active');if(_0x3093a8)_0x3093a8['classList'][_0x227f96(0x19d)]('active');if(_0xdf95bd)_0xdf95bd['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x395b2d&&_0x395b2d['addEventListener'](_0x2585d9(0x165),()=>{const _0x55d0a0=_0x2585d9;_0x549202();if(_0x43f9bc)_0x43f9bc['style']['display']='block';displayLadderDuos(),findBestOpponent(_0x55d0a0(0x170)),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']='none',document['getElementById'](_0x55d0a0(0x1be))['style'][_0x55d0a0(0x1c0)]='none';});}document['addEventListener']('DOMContentLoaded',()=>{const _0x45d15f=a27_0x230a;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')[_0x45d15f(0x19f)][_0x45d15f(0x1c0)]='block';});export{displayLadder};async function findBestOpponent(_0x269417='d1'){const _0xb50176=a27_0x230a,_0xfba0fb='elo-recommendation-text-'+_0x269417,_0x165a4d=document['getElementById'](_0xfba0fb);if(!_0x165a4d){console[_0xb50176(0x1bf)]('Recommendation\x20element\x20for\x20'+_0x269417+'\x20not\x20found');return;}const _0x2276f3=auth['currentUser'];if(!_0x2276f3){_0x165a4d['textContent']='';return;}try{const _0xe2cee4=doc(db,'userProfiles',_0x2276f3['uid']),_0x14e682=await getDoc(_0xe2cee4);if(!_0x14e682[_0xb50176(0x17e)]()){console['log']('No\x20user\x20profile\x20found'),_0x165a4d['textContent']=_0xb50176(0x1c6);return;}const _0x120415=_0x14e682['data'](),_0x2a1293=_0x120415['username'];if(!_0x2a1293){_0x165a4d['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x1148c3;switch(_0x269417){case'd1':_0x1148c3='players';break;case'd2':_0x1148c3='playersD2';break;case'd3':_0x1148c3='playersD3';break;case'duos':_0x1148c3='playersDuos';break;default:_0x1148c3=_0xb50176(0x161);}if(_0x269417===_0xb50176(0x170)){const _0x5af195=collection(db,_0x1148c3),_0x4ebe12=query(_0x5af195,where('username','==',_0x2a1293)),_0x557ca7=await getDocs(_0x4ebe12);if(_0x557ca7['empty']){_0x165a4d['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x48486b=_0x557ca7['docs'][0x0][_0xb50176(0x17d)](),_0x1f1698=parseInt(_0x48486b['eloRating'])||0x4b0;if(_0x48486b['hasTeam']&&_0x48486b['teammate']){_0x165a4d['innerHTML']=_0xb50176(0x1b4)+_0x48486b[_0xb50176(0x17c)]+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x3f6057=await getDocs(_0x5af195);let _0x2be657=null,_0x1f3a72=-0x1;_0x3f6057['forEach'](_0xd739d=>{const _0x49151c=_0xb50176,_0x565a7a=_0xd739d[_0x49151c(0x17d)]();if(_0x565a7a[_0x49151c(0x1ac)]===_0x2a1293)return;if(_0x565a7a['hasTeam'])return;const _0x593fab=parseInt(_0x565a7a[_0x49151c(0x1b7)])||0x4b0,_0x1878c3=Math['abs'](_0x593fab-_0x1f1698),_0x1b1b79=Math['max'](0x0,0xc8-_0x1878c3);_0x1b1b79>_0x1f3a72&&(_0x2be657=_0x565a7a,_0x1f3a72=_0x1b1b79);});if(_0x2be657){const _0x5a8876=parseInt(_0x2be657[_0xb50176(0x1b7)])||0x4b0;let _0x56cb39='gray';if(_0x5a8876>=0x7d0)_0x56cb39='#50C878';else{if(_0x5a8876>=0x708)_0x56cb39='#FFD700';else{if(_0x5a8876>=0x640)_0x56cb39=_0xb50176(0x1c7);else _0x5a8876>=0x578&&(_0x56cb39='#CD7F32');}}_0x165a4d[_0xb50176(0x197)]=_0xb50176(0x160)+_0x56cb39+';\x22>'+_0x2be657['username']+_0xb50176(0x1ad)+_0x5a8876+')';}else _0x165a4d['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x152d5c=collection(db,_0x1148c3),_0x29c68f=query(_0x152d5c,where(_0xb50176(0x1ac),'==',_0x2a1293)),_0x4cad58=await getDocs(_0x29c68f);if(_0x4cad58['empty']){_0x165a4d['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x269417['toUpperCase']()+'\x20ladder';return;}const _0x56abae=_0x4cad58[_0xb50176(0x1cd)][0x0]['data'](),_0xfb0aa1=parseInt(_0x56abae['eloRating'])||0x5dc,_0x4675fa=await getDocs(_0x152d5c);let _0x4097b0=null,_0x55e42f=-0x1;const _0x65ddd5=getPlayerRankName(_0xfb0aa1);_0x4675fa[_0xb50176(0x1b5)](_0x3df3b1=>{const _0x28b2ed=_0xb50176,_0x29a079=_0x3df3b1[_0x28b2ed(0x17d)]();if(_0x29a079[_0x28b2ed(0x1ac)]===_0x2a1293)return;const _0x546db4=parseInt(_0x29a079[_0x28b2ed(0x1b7)])||0x5dc,_0xef4044=getPlayerRankName(_0x546db4),_0x37fa1f=Math[_0x28b2ed(0x164)](_0x546db4-_0xfb0aa1),_0x4168ae=0x20,_0xa46bce=0x1/(0x1+Math['pow'](0xa,(_0x546db4-_0xfb0aa1)/0x190)),_0x1b8dfa=Math[_0x28b2ed(0x1bc)](_0x4168ae*(0x1-_0xa46bce));if(_0x1b8dfa<=0x0)return;let _0x333136=0x0;const _0x4f89f7=Math['max'](0x0,0x64-_0x37fa1f*0.5),_0x4ae5a3=_0x1b8dfa>=0x3&&_0x1b8dfa<=0x8?0x32:_0x1b8dfa>0x0&&_0x1b8dfa<0xf?0x1e:0xa,_0x1469e5=_0x65ddd5===_0xef4044?0x28:0x0;_0x333136=_0x4f89f7+_0x4ae5a3+_0x1469e5,_0x333136>_0x55e42f&&(_0x4097b0=_0x29a079,_0x55e42f=_0x333136);});if(_0x4097b0){const _0x1c7be2=parseInt(_0x4097b0['eloRating'])||0x5dc;let _0x5811c0=_0xb50176(0x162);if(_0x1c7be2>=0x7d0)_0x5811c0='#50C878';else{if(_0x1c7be2>=0x708)_0x5811c0='#FFD700';else{if(_0x1c7be2>=0x640)_0x5811c0='#b9f1fc';else _0x1c7be2>=0x578&&(_0x5811c0='#CD7F32');}}_0x165a4d['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0xfb0aa1+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x5811c0+';\x22>'+_0x4097b0['username']+'</span>';}else _0x165a4d['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0xfb0aa1+')';}catch(_0x18e4af){console['error']('Error\x20finding\x20best\x20opponent:',_0x18e4af),_0x165a4d['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x6074c9=>{const _0x557a22=a27_0x230a,_0x4d640e=document['getElementById']('d1-ladder-container')&&document['getElementById']('d1-ladder-container')['style']['display']!==_0x557a22(0x195),_0x11fdb2=document['getElementById'](_0x557a22(0x1a0))&&document[_0x557a22(0x188)]('d2-ladder-container')['style']['display']!=='none',_0x1a7d47=document[_0x557a22(0x188)]('d3-ladder-container')&&document['getElementById']('d3-ladder-container')['style'][_0x557a22(0x1c0)]!==_0x557a22(0x195),_0x680c26=document[_0x557a22(0x188)](_0x557a22(0x199))&&document['getElementById']('duos-ladder-container')[_0x557a22(0x19f)]['display']!=='none',_0xb7030a=_0x4d640e?'d1':_0x11fdb2?'d2':_0x1a7d47?'d3':_0x680c26?_0x557a22(0x170):'d1';findBestOpponent(_0xb7030a);}),document[a27_0x43c94c(0x1a6)]('DOMContentLoaded',()=>{const _0x2e4dc0=a27_0x43c94c,_0x11ed65=document['getElementById'](_0x2e4dc0(0x193)),_0x24d739=document['querySelector'](_0x2e4dc0(0x183));_0x11ed65&&_0x24d739&&(_0x11ed65['addEventListener'](_0x2e4dc0(0x1c5),async _0x169e5d=>{const _0x529a6c=_0x2e4dc0;if(_0x169e5d['target'][_0x529a6c(0x1c9)]){const _0x303472=auth?.['currentUser'],_0x2a48bc=await checkIfUserIsAdmin(_0x303472);if(!_0x2a48bc){_0x169e5d['preventDefault']();const _0x18e9ac=document[_0x529a6c(0x188)]('d1-switch');return _0x18e9ac&&(_0x18e9ac['checked']=!![],_0x18e9ac['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth[_0x2e4dc0(0x17a)](async _0x3bae90=>{const _0x20e954=_0x2e4dc0,_0x2e38da=await checkIfUserIsAdmin(_0x3bae90);!_0x2e38da?(_0x11ed65['disabled']=!![],_0x24d739['style']['opacity']='0.5',_0x24d739['style']['cursor']='not-allowed',_0x24d739['title']=_0x20e954(0x175)):(_0x11ed65[_0x20e954(0x198)]=![],_0x24d739['style']['opacity']='1',_0x24d739['style'][_0x20e954(0x1b0)]=_0x20e954(0x1c8),_0x24d739['title']='');}));});async function checkIfUserIsAdmin(_0x4d3bf3){const _0x6ce335=a27_0x43c94c;if(!_0x4d3bf3)return![];try{const _0x548456=[_0x6ce335(0x163),'brian2af@outlook.com'];if(_0x4d3bf3[_0x6ce335(0x19c)]&&_0x548456[_0x6ce335(0x185)](_0x4d3bf3['email']['toLowerCase']()))return!![];const _0x43339f=[_0x6ce335(0x19b),'players',_0x6ce335(0x174),'playersD3'],_0x31151a=[_0x6ce335(0x17f),'owner','council','creative\x20lead'];for(const _0x35fea6 of _0x43339f){try{const _0x595740=doc(db,_0x35fea6,_0x4d3bf3['uid']),_0x2fe79a=await getDoc(_0x595740);if(_0x2fe79a['exists']()){const _0x357d65=_0x2fe79a['data'](),_0x47dca7=(_0x357d65['roleName']||_0x357d65[_0x6ce335(0x1a8)]||'')['toLowerCase']();if(_0x47dca7&&_0x31151a[_0x6ce335(0x185)](_0x47dca7))return!![];}}catch(_0x42c7aa){console[_0x6ce335(0x190)]('Error\x20checking\x20'+_0x35fea6+':',_0x42c7aa);}}return![];}catch(_0x15bac7){return console['error']('Error\x20checking\x20admin\x20status:',_0x15bac7),![];}}function showAdminOnlyMessage(){const _0x5686b6=a27_0x43c94c,_0xa2fbf=document['getElementById']('admin-only-message');_0xa2fbf&&_0xa2fbf['remove']();const _0x2a560b=document['createElement']('div');_0x2a560b['id']=_0x5686b6(0x192),_0x2a560b[_0x5686b6(0x19f)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x2a560b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x2a560b),setTimeout(()=>{_0x2a560b['parentNode']&&_0x2a560b['remove']();},0xbb8);}