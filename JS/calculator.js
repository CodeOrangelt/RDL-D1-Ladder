function a9_0x388a(_0x54819f,_0x126c8d){const _0x3b1471=a9_0x5769();return a9_0x388a=function(_0x58b879,_0xead26a){_0x58b879=_0x58b879-0xe3;let _0x546b98=_0x3b1471[_0x58b879];return _0x546b98;},a9_0x388a(_0x54819f,_0x126c8d);}const a9_0x54a3f9=a9_0x388a;(function(_0x35e2d3,_0x372e24){const _0x5c49d8=a9_0x388a,_0x4a5d0c=_0x35e2d3();while(!![]){try{const _0x51a127=parseInt(_0x5c49d8(0x153))/0x1*(parseInt(_0x5c49d8(0x129))/0x2)+parseInt(_0x5c49d8(0x143))/0x3*(parseInt(_0x5c49d8(0x146))/0x4)+parseInt(_0x5c49d8(0x10a))/0x5+parseInt(_0x5c49d8(0xf1))/0x6+parseInt(_0x5c49d8(0x100))/0x7+-parseInt(_0x5c49d8(0x148))/0x8+-parseInt(_0x5c49d8(0xed))/0x9*(parseInt(_0x5c49d8(0x136))/0xa);if(_0x51a127===_0x372e24)break;else _0x4a5d0c['push'](_0x4a5d0c['shift']());}catch(_0x36dcc4){_0x4a5d0c['push'](_0x4a5d0c['shift']());}}}(a9_0x5769,0x247b8));const a9_0x587fc4=(function(){let _0xd90e06=!![];return function(_0x429ff2,_0x4e3ab6){const _0x24ea76=_0xd90e06?function(){const _0x161850=a9_0x388a;if(_0x4e3ab6){const _0x880f36=_0x4e3ab6[_0x161850(0x115)](_0x429ff2,arguments);return _0x4e3ab6=null,_0x880f36;}}:function(){};return _0xd90e06=![],_0x24ea76;};}()),a9_0x33cb3e=a9_0x587fc4(this,function(){const _0x3e2332=a9_0x388a;return a9_0x33cb3e[_0x3e2332(0xe8)]()[_0x3e2332(0x12e)](_0x3e2332(0x118))[_0x3e2332(0xe8)]()[_0x3e2332(0x13f)](a9_0x33cb3e)[_0x3e2332(0x12e)](_0x3e2332(0x118));});a9_0x33cb3e();const a9_0xead26a=(function(){let _0x35560d=!![];return function(_0x57a5c0,_0x37eea5){const _0x557b45=_0x35560d?function(){if(_0x37eea5){const _0x2e14ef=_0x37eea5['apply'](_0x57a5c0,arguments);return _0x37eea5=null,_0x2e14ef;}}:function(){};return _0x35560d=![],_0x557b45;};}()),a9_0x58b879=a9_0xead26a(this,function(){const _0x48be34=a9_0x388a,_0x5c128c=function(){const _0x6a3405=a9_0x388a;let _0x1b75ad;try{_0x1b75ad=Function(_0x6a3405(0xf3)+_0x6a3405(0x137)+');')();}catch(_0xdfe2e1){_0x1b75ad=window;}return _0x1b75ad;},_0x517cfa=_0x5c128c(),_0x20b666=_0x517cfa[_0x48be34(0xe9)]=_0x517cfa['console']||{},_0x292836=[_0x48be34(0xfa),_0x48be34(0xf5),_0x48be34(0x11c),'error','exception',_0x48be34(0x110),_0x48be34(0x12a)];for(let _0x24d636=0x0;_0x24d636<_0x292836[_0x48be34(0x155)];_0x24d636++){const _0x20fad9=a9_0xead26a[_0x48be34(0x13f)][_0x48be34(0x107)][_0x48be34(0x102)](a9_0xead26a),_0x104242=_0x292836[_0x24d636],_0x2eb283=_0x20b666[_0x104242]||_0x20fad9;_0x20fad9[_0x48be34(0xe5)]=a9_0xead26a[_0x48be34(0x102)](a9_0xead26a),_0x20fad9['toString']=_0x2eb283['toString'][_0x48be34(0x102)](_0x2eb283),_0x20b666[_0x104242]=_0x20fad9;}});function a9_0x5769(){const _0x3b30f4=['innerHTML','getElementById','ladder','none','#50C878','#C0C0C0','89kjqbiE','bronze','length','newLoserRating','expectedScoreLoser','toFixed','\x20High\x20ELO\x20gain','#CD7F32','\x20ladder','winner-new-elo','__proto__','silver','\x20players\x20from\x20','toString','console','set','players','get','9clCJwl','newWinnerRating','clear','\x20=\x20','1769466YSjBGd','playersD3','return\x20(function()\x20','loser-elo-change','warn','DOMContentLoaded','currentLadder','sandbox','display','log','textContent','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','color','values','1602622qcXCit','loadPlayers','bind','<option\x20value=\x22','Loaded\x20','loserChange','Low\x20ELO\x20gain.','prototype','value','calculateMatch','1264545OKORxf','winner-select','error','grid','style','position','table','change','round','target','unranked','apply','pow','#FFD700','(((.+)+)+)+$','sort','winnerChange','expectedScoreWinner','info','match-result','size','displayCalculationDetails','<option\x20value=\x22\x22>Loading\x20players...</option>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.ladder-btn','addEventListener','setupEventListeners','username','refresh-players','loser-current-elo','winner-name','6652ePuOvZ','trace','\x0a\x20\x20','querySelectorAll','Error\x20loading\x20players:','search','from','\x22\x20class=\x22','gold','click','\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20','init','%\x20chance\x20to\x20win)\x0a\x20\x20','10117670NnjJVA','{}.constructor(\x22return\x20this\x22)(\x20)','<option\x20value=\x22\x22>Select\x20a\x20player...</option>','remove','dataset','\x22\x20data-elo=\x22','getELOColor','classList','Current\x20ELO:\x20','constructor','elo','calculateELO','updateDropdowns','780CDOmjM','displayMatchResult','active','4472PlmwMj','loser-select','1618088zwtfBY','eloRating','#808080','\x20+\x20','Player\x20not\x20found'];a9_0x5769=function(){return _0x3b30f4;};return a9_0x5769();}a9_0x58b879();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const _0x2a3264=a9_0x388a;this[_0x2a3264(0xf7)]='D1',this[_0x2a3264(0xeb)]=new Map(),this[_0x2a3264(0x134)]();}[a9_0x54a3f9(0x134)](){this['setupEventListeners'](),this['loadPlayers']();}[a9_0x54a3f9(0x124)](){const _0x50e0ce=a9_0x54a3f9;document['querySelectorAll'](_0x50e0ce(0x122))['forEach'](_0x395466=>{const _0x8e03a4=_0x50e0ce;_0x395466[_0x8e03a4(0x123)](_0x8e03a4(0x132),_0xa4af68=>{const _0x320be8=_0x8e03a4;document[_0x320be8(0x12c)](_0x320be8(0x122))['forEach'](_0x40da9b=>_0x40da9b[_0x320be8(0x13d)][_0x320be8(0x139)]('active')),_0xa4af68[_0x320be8(0x113)][_0x320be8(0x13d)]['add'](_0x320be8(0x145)),this[_0x320be8(0xf7)]=_0xa4af68[_0x320be8(0x113)][_0x320be8(0x13a)][_0x320be8(0x14f)],this[_0x320be8(0x101)]();});}),document[_0x50e0ce(0x14e)](_0x50e0ce(0x126))[_0x50e0ce(0x123)](_0x50e0ce(0x132),()=>{this['loadPlayers']();}),document[_0x50e0ce(0x14e)](_0x50e0ce(0x10b))['addEventListener'](_0x50e0ce(0x111),()=>this[_0x50e0ce(0x109)]()),document[_0x50e0ce(0x14e)](_0x50e0ce(0x147))[_0x50e0ce(0x123)](_0x50e0ce(0x111),()=>this['calculateMatch']());}async['loadPlayers'](){const _0x207d2f=a9_0x54a3f9;try{this[_0x207d2f(0x142)](_0x207d2f(0x120));const _0x5d6256=this[_0x207d2f(0xf7)]==='D1'?_0x207d2f(0xeb):this[_0x207d2f(0xf7)]==='D2'?'playersD2':_0x207d2f(0xf2),_0x3b894a=collection(db,_0x5d6256),_0x5b9959=query(_0x3b894a,orderBy('eloRating','desc')),_0x5ad976=await getDocs(_0x5b9959);this[_0x207d2f(0xeb)][_0x207d2f(0xef)](),_0x5ad976['forEach'](_0x1938a2=>{const _0x7ac560=_0x207d2f,_0x3b13a9=_0x1938a2['data']();_0x3b13a9[_0x7ac560(0x125)]&&this[_0x7ac560(0xeb)][_0x7ac560(0xea)](_0x3b13a9[_0x7ac560(0x125)],{'id':_0x1938a2['id'],'username':_0x3b13a9[_0x7ac560(0x125)],'elo':parseInt(_0x3b13a9[_0x7ac560(0x149)])||0x4b0,'position':_0x3b13a9[_0x7ac560(0x10f)]||0x3e7});}),this['updateDropdowns'](),console[_0x207d2f(0xfa)](_0x207d2f(0x104)+this['players'][_0x207d2f(0x11e)]+_0x207d2f(0xe7)+this['currentLadder']+_0x207d2f(0xe3));}catch(_0x29c113){console[_0x207d2f(0x10c)](_0x207d2f(0x12d),_0x29c113),this[_0x207d2f(0x142)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}[a9_0x54a3f9(0x142)](_0x3db71c=null){const _0x104b4e=a9_0x54a3f9,_0x409f54=document[_0x104b4e(0x14e)](_0x104b4e(0x10b)),_0x1f2894=document['getElementById'](_0x104b4e(0x147));if(_0x3db71c){_0x409f54[_0x104b4e(0x14d)]=_0x3db71c,_0x1f2894[_0x104b4e(0x14d)]=_0x3db71c;return;}let _0x2dd563=_0x104b4e(0x138);const _0x3cc934=Array[_0x104b4e(0x12f)](this['players'][_0x104b4e(0xff)]())[_0x104b4e(0x119)]((_0x32ee0b,_0x1efe14)=>_0x1efe14[_0x104b4e(0x140)]-_0x32ee0b[_0x104b4e(0x140)]);_0x3cc934[_0x104b4e(0xfc)](_0x15b98e=>{const _0x645867=_0x104b4e,_0x3e6ad3=this['getELORankClass'](_0x15b98e[_0x645867(0x140)]);_0x2dd563+=_0x645867(0x103)+_0x15b98e[_0x645867(0x125)]+_0x645867(0x13b)+_0x15b98e[_0x645867(0x140)]+_0x645867(0x130)+_0x3e6ad3+_0x645867(0x121)+_0x15b98e[_0x645867(0x125)]+'\x20('+_0x15b98e[_0x645867(0x140)]+'\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>';}),_0x409f54[_0x104b4e(0x14d)]=_0x2dd563,_0x1f2894[_0x104b4e(0x14d)]=_0x2dd563;}[a9_0x54a3f9(0x109)](){const _0x2ff152=a9_0x54a3f9,_0x31ee8b=document['getElementById'](_0x2ff152(0x10b)),_0x359fe4=document[_0x2ff152(0x14e)]('loser-select'),_0x2179fa=_0x31ee8b[_0x2ff152(0x108)],_0x458ea1=_0x359fe4[_0x2ff152(0x108)];if(!_0x2179fa||!_0x458ea1){document[_0x2ff152(0x14e)](_0x2ff152(0x11d))[_0x2ff152(0x10e)][_0x2ff152(0xf9)]=_0x2ff152(0x150),document[_0x2ff152(0x14e)]('calculation-details')[_0x2ff152(0x10e)]['display']=_0x2ff152(0x150);return;}if(_0x2179fa===_0x458ea1){alert('Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser');return;}const _0x1bab1a=this[_0x2ff152(0xeb)][_0x2ff152(0xec)](_0x2179fa),_0x456eda=this[_0x2ff152(0xeb)]['get'](_0x458ea1);if(!_0x1bab1a||!_0x456eda){console['error'](_0x2ff152(0x14c));return;}const _0x37ccff=this['calculateELO'](_0x1bab1a[_0x2ff152(0x140)],_0x456eda[_0x2ff152(0x140)]);this['displayMatchResult'](_0x1bab1a,_0x456eda,_0x37ccff),this[_0x2ff152(0x11f)](_0x1bab1a,_0x456eda,_0x37ccff);}[a9_0x54a3f9(0x141)](_0x1c302f,_0x3b8f24,_0x1e8ccb=0x20){const _0x2024bf=a9_0x54a3f9,_0x232d3f=0x1/(0x1+Math[_0x2024bf(0x116)](0xa,(_0x3b8f24-_0x1c302f)/0x190)),_0x2585c9=0x1/(0x1+Math[_0x2024bf(0x116)](0xa,(_0x1c302f-_0x3b8f24)/0x190)),_0x1b9814=_0x1c302f+_0x1e8ccb*(0x1-_0x232d3f),_0xf7df6b=_0x3b8f24+_0x1e8ccb*(0x0-_0x2585c9);return{'winnerChange':Math[_0x2024bf(0x112)](_0x1b9814-_0x1c302f),'loserChange':Math[_0x2024bf(0x112)](_0xf7df6b-_0x3b8f24),'newWinnerRating':Math['round'](_0x1b9814),'newLoserRating':Math[_0x2024bf(0x112)](_0xf7df6b),'expectedScoreWinner':_0x232d3f,'expectedScoreLoser':_0x2585c9};}[a9_0x54a3f9(0x144)](_0x536214,_0x30c8be,_0x30183e){const _0x5b9f7d=a9_0x54a3f9;document[_0x5b9f7d(0x14e)](_0x5b9f7d(0x128))[_0x5b9f7d(0xfb)]=_0x536214[_0x5b9f7d(0x125)],document['getElementById']('winner-current-elo')['textContent']='Current\x20ELO:\x20'+_0x536214[_0x5b9f7d(0x140)],document[_0x5b9f7d(0x14e)]('winner-elo-change')['textContent']='+'+_0x30183e[_0x5b9f7d(0x11a)],document[_0x5b9f7d(0x14e)](_0x5b9f7d(0xe4))[_0x5b9f7d(0xfb)]='New\x20ELO:\x20'+_0x30183e[_0x5b9f7d(0xee)],document[_0x5b9f7d(0x14e)]('loser-name')['textContent']=_0x30c8be[_0x5b9f7d(0x125)],document[_0x5b9f7d(0x14e)](_0x5b9f7d(0x127))[_0x5b9f7d(0xfb)]=_0x5b9f7d(0x13e)+_0x30c8be[_0x5b9f7d(0x140)],document[_0x5b9f7d(0x14e)](_0x5b9f7d(0xf4))[_0x5b9f7d(0xfb)]=''+_0x30183e[_0x5b9f7d(0x105)],document[_0x5b9f7d(0x14e)]('loser-new-elo')['textContent']='New\x20ELO:\x20'+_0x30183e[_0x5b9f7d(0x156)];const _0x2e30c9=this[_0x5b9f7d(0x13c)](_0x536214['elo']),_0x4e1849=this[_0x5b9f7d(0x13c)](_0x30c8be['elo']);document['getElementById'](_0x5b9f7d(0x128))[_0x5b9f7d(0x10e)][_0x5b9f7d(0xfe)]=_0x2e30c9,document[_0x5b9f7d(0x14e)]('loser-name')['style'][_0x5b9f7d(0xfe)]=_0x4e1849,document[_0x5b9f7d(0x14e)](_0x5b9f7d(0x11d))[_0x5b9f7d(0x10e)]['display']=_0x5b9f7d(0x10d);}[a9_0x54a3f9(0x11f)](_0x3f95d6,_0x5ecea4,_0x4daacf){const _0xa4309d=a9_0x54a3f9,_0x484857='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+_0x3f95d6[_0xa4309d(0x125)]+':\x20'+_0x3f95d6[_0xa4309d(0x140)]+_0xa4309d(0x12b)+_0x5ecea4[_0xa4309d(0x125)]+':\x20'+_0x5ecea4['elo']+_0xa4309d(0x133)+_0x3f95d6[_0xa4309d(0x125)]+':\x20'+_0x4daacf[_0xa4309d(0x11b)][_0xa4309d(0x158)](0x3)+'\x20('+(_0x4daacf[_0xa4309d(0x11b)]*0x64)[_0xa4309d(0x158)](0x1)+_0xa4309d(0x135)+_0x5ecea4[_0xa4309d(0x125)]+':\x20'+_0x4daacf[_0xa4309d(0x157)][_0xa4309d(0x158)](0x3)+'\x20('+(_0x4daacf[_0xa4309d(0x157)]*0x64)['toFixed'](0x1)+'%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'+_0x3f95d6[_0xa4309d(0x125)]+':\x20'+_0x3f95d6['elo']+_0xa4309d(0x14b)+_0x4daacf[_0xa4309d(0x11a)]+_0xa4309d(0xf0)+_0x4daacf['newWinnerRating']+_0xa4309d(0x12b)+_0x5ecea4['username']+':\x20'+_0x5ecea4['elo']+_0xa4309d(0x14b)+_0x4daacf[_0xa4309d(0x105)]+_0xa4309d(0xf0)+_0x4daacf[_0xa4309d(0x156)]+'\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20×\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a'+(_0x4daacf[_0xa4309d(0x11a)]>0x14?_0xa4309d(0x159):'')+'\x0a'+(_0x4daacf['winnerChange']<0x5?_0xa4309d(0x106):'')+_0xa4309d(0xfd);document[_0xa4309d(0x14e)]('calculation-text')[_0xa4309d(0xfb)]=_0x484857,document['getElementById']('calculation-details')['style']['display']='block';}[a9_0x54a3f9(0x13c)](_0x471af6){const _0xcec58b=a9_0x54a3f9;if(_0x471af6>=0x7d0)return _0xcec58b(0x151);else{if(_0x471af6>=0x708)return _0xcec58b(0x117);else{if(_0x471af6>=0x640)return _0xcec58b(0x152);else{if(_0x471af6>=0x578)return _0xcec58b(0x15a);else return _0xcec58b(0x14a);}}}}['getELORankClass'](_0x562e47){const _0x4b22d5=a9_0x54a3f9;if(_0x562e47>=0x7d0)return'emerald';else{if(_0x562e47>=0x708)return _0x4b22d5(0x131);else{if(_0x562e47>=0x640)return _0x4b22d5(0xe6);else{if(_0x562e47>=0x578)return _0x4b22d5(0x154);else return _0x4b22d5(0x114);}}}}}document['addEventListener'](a9_0x54a3f9(0xf6),()=>{const _0x3cf1ea=a9_0x54a3f9;document[_0x3cf1ea(0x14e)](_0x3cf1ea(0xf8))&&new ELOCalculator();});