const a43_0x4ef46f=a43_0x4fcb,a43_0x4ed6e6=(function(){let _0x99f6b8=!![];return function(_0x96adb0,_0x5eee54){const _0x107940=_0x99f6b8?function(){const _0x6924a8=a43_0x4fcb;if(_0x5eee54){const _0xec9084=_0x5eee54[_0x6924a8(0x141)](_0x96adb0,arguments);return _0x5eee54=null,_0xec9084;}}:function(){};return _0x99f6b8=![],_0x107940;};}()),a43_0x5e0ede=a43_0x4ed6e6(this,function(){const _0x4f420f=a43_0x4fcb;let _0x546a5c;try{const _0x324cba=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x546a5c=_0x324cba();}catch(_0x4e8f29){_0x546a5c=window;}const _0x53a80b=_0x546a5c[_0x4f420f(0x149)]=_0x546a5c['console']||{},_0x52ca97=['log','warn','info','error','exception','table',_0x4f420f(0x145)];for(let _0x5e1aec=0x0;_0x5e1aec<_0x52ca97['length'];_0x5e1aec++){const _0x3ed3fa=a43_0x4ed6e6['constructor']['prototype'][_0x4f420f(0x140)](a43_0x4ed6e6),_0x9737ad=_0x52ca97[_0x5e1aec],_0xb68ff5=_0x53a80b[_0x9737ad]||_0x3ed3fa;_0x3ed3fa['__proto__']=a43_0x4ed6e6['bind'](a43_0x4ed6e6),_0x3ed3fa[_0x4f420f(0x13b)]=_0xb68ff5[_0x4f420f(0x13b)]['bind'](_0xb68ff5),_0x53a80b[_0x9737ad]=_0x3ed3fa;}});a43_0x5e0ede();import{db}from'./firebase-config.js';function a43_0x4fcb(_0x5caecd,_0x313de9){const _0x5e0ede=a43_0x28e6();return a43_0x4fcb=function(_0x4ed6e6,_0x2b344d){_0x4ed6e6=_0x4ed6e6-0x13b;let _0x28e6c1=_0x5e0ede[_0x4ed6e6];return _0x28e6c1;},a43_0x4fcb(_0x5caecd,_0x313de9);}import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x349879){const _0x1bab98=a43_0x4fcb,_0x436ef2=document['getElementById'](_0x1bab98(0x148));if(!_0x436ef2)return;if(_0x349879['length']===0x0){_0x436ef2['style'][_0x1bab98(0x142)]='none';return;}_0x436ef2['style']['display']='block';let _0x50d9d6='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x349879['forEach'](_0x535a11=>{const _0x158f1d=_0x1bab98;_0x50d9d6+=_0x158f1d(0x143)+(_0x535a11[_0x158f1d(0x14a)]||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x535a11['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x50d9d6+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x436ef2['innerHTML']=_0x50d9d6;}function formatQueueTime(_0x1dbc7d){const _0x4a3884=a43_0x4fcb;if(!_0x1dbc7d)return'Just\x20now';const _0x4a9b9a=_0x1dbc7d[_0x4a3884(0x14b)]?_0x1dbc7d['toDate']():new Date(_0x1dbc7d),_0x386a8e=new Date(),_0x3d8c08=Math['floor']((_0x386a8e-_0x4a9b9a)/0xea60);if(_0x3d8c08<0x1)return'Just\x20now';return _0x3d8c08+'m\x20in\x20queue';}async function checkQueueTimeout(_0x40fc89){const _0x4bc05f=a43_0x4fcb;if(!_0x40fc89['lastUpdated'])return;const _0x383758=_0x40fc89[_0x4bc05f(0x13d)]['toDate']?_0x40fc89['lastUpdated'][_0x4bc05f(0x14b)]():new Date(_0x40fc89['lastUpdated']),_0xcba676=new Date(),_0x4c3f89=Math[_0x4bc05f(0x14c)]((_0xcba676-_0x383758)/0xea60);if(_0x4c3f89>=0x1e)try{const _0x716d76=doc(db,'readyPlayers',_0x40fc89['id']);await updateDoc(_0x716d76,{'isReady':![]});}catch(_0x2d6f43){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x2d6f43);}}const unsubscribe=onSnapshot(readyPlayersRef,_0xf672f1=>{const _0x1285e7=a43_0x4fcb,_0xa1b043=[];_0xf672f1[_0x1285e7(0x13c)](_0x5519f9=>{const _0x489b31=_0x1285e7,_0x9bc323=_0x5519f9[_0x489b31(0x14d)]();if(_0x9bc323[_0x489b31(0x13e)]===!![]){const _0x7944de={'id':_0x5519f9['id'],'username':_0x9bc323['username'],'lastUpdated':_0x9bc323['lastUpdated']||new Date()};_0xa1b043[_0x489b31(0x146)](_0x7944de),checkQueueTimeout(_0x7944de);}}),updateQueueDisplay(_0xa1b043);},_0xa5980f=>{const _0x51526a=a43_0x4fcb;console[_0x51526a(0x13f)](_0x51526a(0x147),_0xa5980f);});function a43_0x28e6(){const _0x5c002c=['toString','forEach','lastUpdated','isReady','error','bind','apply','display','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','unload','trace','push','Error\x20in\x20queue\x20listener:','queue-container','console','username','toDate','floor','data'];a43_0x28e6=function(){return _0x5c002c;};return a43_0x28e6();}window['addEventListener'](a43_0x4ef46f(0x144),()=>{unsubscribe();});