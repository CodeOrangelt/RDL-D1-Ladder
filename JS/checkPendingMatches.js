const a10_0x4743f6=a10_0x5e91,a10_0x42f0a7=(function(){let _0x58c4f7=!![];return function(_0x581cd7,_0x4e2710){const _0x237950=_0x58c4f7?function(){const _0xc25054=a10_0x5e91;if(_0x4e2710){const _0x5d3093=_0x4e2710[_0xc25054(0x13b)](_0x581cd7,arguments);return _0x4e2710=null,_0x5d3093;}}:function(){};return _0x58c4f7=![],_0x237950;};}()),a10_0x3dabce=a10_0x42f0a7(this,function(){const _0x1b95cc=a10_0x5e91,_0xf29106=function(){const _0x3c89ee=a10_0x5e91;let _0x4f4b33;try{_0x4f4b33=Function('return\x20(function()\x20'+_0x3c89ee(0x137)+');')();}catch(_0x2be955){_0x4f4b33=window;}return _0x4f4b33;},_0x7844fc=_0xf29106(),_0x5c5602=_0x7844fc[_0x1b95cc(0x12a)]=_0x7844fc['console']||{},_0x36aa07=[_0x1b95cc(0x13a),'warn','info','error','exception','table',_0x1b95cc(0x136)];for(let _0x11f053=0x0;_0x11f053<_0x36aa07['length'];_0x11f053++){const _0x271b24=a10_0x42f0a7[_0x1b95cc(0x134)][_0x1b95cc(0x128)]['bind'](a10_0x42f0a7),_0xf6c09e=_0x36aa07[_0x11f053],_0x2c6fa6=_0x5c5602[_0xf6c09e]||_0x271b24;_0x271b24[_0x1b95cc(0x13d)]=a10_0x42f0a7[_0x1b95cc(0x13f)](a10_0x42f0a7),_0x271b24['toString']=_0x2c6fa6['toString'][_0x1b95cc(0x13f)](_0x2c6fa6),_0x5c5602[_0xf6c09e]=_0x271b24;}});a10_0x3dabce();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x2c4ec6=![]){const _0x5e6427=a10_0x5e91,_0x24b4dc=Date['now'](),_0x11f71e=checkNotificationCache();if(_0x11f71e!==null&&!_0x2c4ec6){updateNotificationDot(_0x11f71e);if(_0x24b4dc-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x24b4dc;const _0x20307b=auth['currentUser'];if(!_0x20307b){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x1fafb7,_0x2a30ce,_0xca3c1b]=await Promise[_0x5e6427(0x133)]([checkForPendingMatchesInCollection(_0x20307b,'pendingMatches'),checkForPendingMatchesInCollection(_0x20307b,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x20307b,'pendingMatchesD3')]),_0x1e838e=_0x1fafb7||_0x2a30ce||_0xca3c1b;updateNotificationDot(_0x1e838e),updateNotificationCache(_0x1e838e);}catch(_0x48c0ad){console['error']('Error\x20checking\x20pending\x20matches:',_0x48c0ad);}}function a10_0xc311(){const _0x50377b=['email','data','playersD3','right','zIndex','DOMContentLoaded','split','prototype','error','console','50%','report-match-notification','addEventListener','borderRadius','10px','style','currentUsername','border','all','constructor','-8px','trace','{}.constructor(\x22return\x20this\x22)(\x20)','disconnect','userId','log','apply','stringify','__proto__','winnerId','bind','setItem','uid'];a10_0xc311=function(){return _0x50377b;};return a10_0xc311();}function a10_0x5e91(_0x4e0625,_0x2c2b6e){const _0x3dabce=a10_0xc311();return a10_0x5e91=function(_0x42f0a7,_0x4bcf97){_0x42f0a7=_0x42f0a7-0x121;let _0xc311b4=_0x3dabce[_0x42f0a7];return _0xc311b4;},a10_0x5e91(_0x4e0625,_0x2c2b6e);}async function checkForPendingMatchesInCollection(_0x2ceeaa,_0x136806){const _0x2e172f=a10_0x5e91,_0x389c50=_0x2ceeaa[_0x2e172f(0x141)],_0x59b155=_0x2ceeaa[_0x2e172f(0x121)],_0x336d73=query(collection(db,_0x136806),where(_0x2e172f(0x13e),'==',_0x389c50),where('approved','==',![])),_0x3c0d38=await getDocs(_0x336d73);if(!_0x3c0d38['empty'])return!![];if(_0x59b155){const _0x2bb3f6=query(collection(db,_0x136806),where('winnerEmail','==',_0x59b155),where('approved','==',![])),_0x22faff=await getDocs(_0x2bb3f6);if(!_0x22faff['empty'])return!![];}let _0x4f66fc=await getUsernameFromAllSources(_0x2ceeaa);if(_0x4f66fc){const _0xfffcdd=query(collection(db,_0x136806),where('winnerUsername','==',_0x4f66fc),where('approved','==',![])),_0x2898ce=await getDocs(_0xfffcdd);if(!_0x2898ce['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x158fff){const _0x5b004b=a10_0x5e91,_0x2f1be0=localStorage['getItem'](_0x5b004b(0x131));if(_0x2f1be0)return _0x2f1be0;try{const [_0x427a81,_0xff6dba,_0x1d8f7f]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x5b004b(0x139),'==',_0x158fff[_0x5b004b(0x141)]))),getDocs(query(collection(db,'playersD2'),where(_0x5b004b(0x139),'==',_0x158fff['uid']))),getDocs(query(collection(db,_0x5b004b(0x123)),where(_0x5b004b(0x139),'==',_0x158fff['uid'])))]);if(!_0x427a81['empty']){const _0xc1cded=_0x427a81['docs'][0x0][_0x5b004b(0x122)]()['username'];return localStorage['setItem'](_0x5b004b(0x131),_0xc1cded),_0xc1cded;}if(!_0xff6dba['empty']){const _0x287200=_0xff6dba['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x287200),_0x287200;}if(!_0x1d8f7f['empty']){const _0x21d4e8=_0x1d8f7f['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x21d4e8),_0x21d4e8;}const _0x3d52f3=await getDoc(doc(db,'users',_0x158fff['uid']));if(_0x3d52f3['exists']()&&_0x3d52f3['data']()['username']){const _0x3d09e5=_0x3d52f3['data']()['username'];return localStorage[_0x5b004b(0x140)]('currentUsername',_0x3d09e5),_0x3d09e5;}}catch(_0x13af9e){console[_0x5b004b(0x129)]('Error\x20fetching\x20username:',_0x13af9e);}if(_0x158fff[_0x5b004b(0x121)])return _0x158fff[_0x5b004b(0x121)][_0x5b004b(0x127)]('@')[0x0];return null;}function updateNotificationCache(_0x2969fe){const _0x516891=a10_0x5e91,_0x2e1d36={'status':_0x2969fe,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[_0x516891(0x13c)](_0x2e1d36));}function checkNotificationCache(){const _0x3cc594=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x3cc594)return null;try{const {status:_0x4d9a90,timestamp:_0x2a965e}=JSON['parse'](_0x3cc594),_0x58b5b6=Date['now']();if(_0x58b5b6-_0x2a965e<CACHE_EXPIRY)return _0x4d9a90;}catch(_0x1c504f){}return null;}export function updateNotificationDot(_0xd4dfb4){const _0x4956e2=a10_0x5e91,_0x457dc1=new MutationObserver((_0x4a1964,_0x59f078)=>{const _0x36cd88=a10_0x5e91,_0x4b2d09=document['getElementById']('report-match-notification');_0x4b2d09&&(updateDotStyle(_0x4b2d09,_0xd4dfb4),_0x59f078[_0x36cd88(0x138)]());});_0x457dc1['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x3dca50=document['getElementById'](_0x4956e2(0x12c));_0x3dca50&&(updateDotStyle(_0x3dca50,_0xd4dfb4),_0x457dc1['disconnect']()),setTimeout(()=>_0x457dc1['disconnect'](),0x1388);}function updateDotStyle(_0x3cec35,_0x55aae9){const _0x1357e2=a10_0x5e91;_0x55aae9?(_0x3cec35['style']['display']='block',_0x3cec35['style']['backgroundColor']='#ff3b30',_0x3cec35['style']['width']=_0x1357e2(0x12f),_0x3cec35['style']['height']=_0x1357e2(0x12f),_0x3cec35['style']['position']='absolute',_0x3cec35['style']['top']='-5px',_0x3cec35['style'][_0x1357e2(0x124)]=_0x1357e2(0x135),_0x3cec35[_0x1357e2(0x130)][_0x1357e2(0x12e)]=_0x1357e2(0x12b),_0x3cec35[_0x1357e2(0x130)][_0x1357e2(0x132)]='2px\x20solid\x20white',_0x3cec35['style'][_0x1357e2(0x125)]='999'):_0x3cec35['style']['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10_0x4743f6(0x12d)](a10_0x4743f6(0x126),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});