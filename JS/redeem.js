const a46_0x169488=a46_0xfb28,a46_0xe18c43=(function(){let _0x3ad8e6=!![];return function(_0x3db44f,_0x132b7e){const _0x23bc1f=_0x3ad8e6?function(){if(_0x132b7e){const _0x13732b=_0x132b7e['apply'](_0x3db44f,arguments);return _0x132b7e=null,_0x13732b;}}:function(){};return _0x3ad8e6=![],_0x23bc1f;};}()),a46_0x5dbd01=a46_0xe18c43(this,function(){const _0x2b0bfc=a46_0xfb28;let _0xae105a;try{const _0x55340d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xae105a=_0x55340d();}catch(_0x4eeeda){_0xae105a=window;}const _0x3cd075=_0xae105a[_0x2b0bfc(0x177)]=_0xae105a['console']||{},_0x1d68d8=['log',_0x2b0bfc(0x1e5),_0x2b0bfc(0x1b8),'error','exception','table','trace'];for(let _0x1a141a=0x0;_0x1a141a<_0x1d68d8['length'];_0x1a141a++){const _0x3b168a=a46_0xe18c43[_0x2b0bfc(0x170)]['prototype']['bind'](a46_0xe18c43),_0x3bdd4d=_0x1d68d8[_0x1a141a],_0x27aae8=_0x3cd075[_0x3bdd4d]||_0x3b168a;_0x3b168a['__proto__']=a46_0xe18c43[_0x2b0bfc(0x1f4)](a46_0xe18c43),_0x3b168a['toString']=_0x27aae8[_0x2b0bfc(0x182)]['bind'](_0x27aae8),_0x3cd075[_0x3bdd4d]=_0x3b168a;}});function a46_0xfb28(_0x3e50e7,_0x309065){const _0x5dbd01=a46_0x56cf();return a46_0xfb28=function(_0xe18c43,_0xc8ca95){_0xe18c43=_0xe18c43-0x163;let _0x56cfb6=_0x5dbd01[_0xe18c43];return _0x56cfb6;},a46_0xfb28(_0x3e50e7,_0x309065);}a46_0x5dbd01();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'contrast':{'price':0x0,'name':'Nightlight','description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':a46_0x169488(0x1f7),'description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':a46_0x169488(0x1b0),'description':'This\x20one\x20is\x20really\x20pretty'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'},'gold':{'price':0x320,'name':'Gold','description':a46_0x169488(0x1c5)},'emerald':{'price':0x3e8,'name':a46_0x169488(0x1bc),'description':a46_0x169488(0x1c2)},'cockpit':{'price':0x4b0,'name':'Cockpit','description':a46_0x169488(0x1b4)}},TOKENS={'pwr01':{'price':0x64,'name':a46_0x169488(0x18c),'description':'Enhanced\x20energy\x20generation\x20unit','image':'../images/tokens/subgame/pwr01.gif','category':a46_0x169488(0x1ba)},'fan':{'price':0x96,'name':'Fan','description':a46_0x169488(0x1af),'image':'../images/tokens/Fan.gif','category':'fun'},'marker':{'price':0xfa,'name':a46_0x169488(0x1ad),'description':'Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','image':'../images/tokens/Marker.gif','category':'fun'},'laser':{'price':0x12c,'name':'Laser','description':'Classic\x20laser\x20weapon\x20token.','image':'../images/tokens/Laser.gif','category':'weapon'},'pbomb':{'price':0x15e,'name':'Proximity\x20Bomb','description':'Strategic\x20explosive\x20device','image':'../images/tokens/subgame/pbomb.gif','category':'weapon'},'fusion':{'price':0x15e,'name':'Fusion\x20Cannon','description':'Devastating\x20fusion\x20weapon\x20technology','image':'../images/tokens/subgame/fusion.gif','category':'weapon'},'lock':{'price':0x1c2,'name':'Lock','description':'Lock\x20in\x20your\x20victory.','image':a46_0x169488(0x183),'category':'fun'},'blob01':{'price':0x1f4,'name':'Blob\x20Token\x201','description':'A\x20mysterious\x20purple\x20blob\x20token','image':'../images/tokens/blob01.gif','category':'blob'},'plasma':{'price':0x1f4,'name':'Plasma\x20Cannon','description':a46_0x169488(0x1c8),'image':'../images/tokens/Plasma.gif','category':'weapon'},'cloak':{'price':0x1f4,'name':a46_0x169488(0x1c7),'description':'Become\x20one\x20with\x20the\x20shadows','image':a46_0x169488(0x16d),'category':'special'},'pwr02':{'price':0x258,'name':'Shield\x20Orb','description':'Advanced\x20energy\x20storage\x20system','image':'../images/tokens/subgame/pwr02.gif','category':a46_0x169488(0x1ba)},'mercury':{'price':0x258,'name':'Mercury\x20Missile','description':a46_0x169488(0x1eb),'image':'../images/tokens/Mercury.gif','category':a46_0x169488(0x1e9)},'plasmablobl':{'price':0x258,'name':a46_0x169488(0x1a0),'description':'A\x20mysterious\x20plasma\x20blob.','image':a46_0x169488(0x18e),'category':'blob'},'smissile':{'price':0x28a,'name':a46_0x169488(0x1e2),'description':a46_0x169488(0x1ae),'image':a46_0x169488(0x1ed),'category':'weapon'},'smartmine':{'price':0x2ee,'name':a46_0x169488(0x1da),'description':a46_0x169488(0x16f),'image':'../images/tokens/Smartmine.gif','category':'weapon'},'mmissile':{'price':0x320,'name':'Mega\x20Missile','description':'Heavy\x20ordinance\x20for\x20tough\x20situations','image':a46_0x169488(0x167),'category':'weapon'},'gauge18':{'price':0x320,'name':'R/Y/B\x20Keys','description':a46_0x169488(0x163),'image':'../images/tokens/gauge18.gif','category':a46_0x169488(0x1ab)},'extralife':{'price':0x320,'name':'Extra\x20Life','description':'A\x20rare\x20extra\x20life\x20token.','image':a46_0x169488(0x1b3),'category':'special'},'hostage':{'price':0x3b6,'name':'Hostage','description':'Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','image':'../images/tokens/Hostage.gif','category':'special'},'phoenix':{'price':0x3b6,'name':'Phoenix\x20Cannon','description':'Fiery\x20phoenix\x20cannon\x20token.','image':'../images/tokens/Phoenix.gif','category':'weapon'},'blob02':{'price':0x3e8,'name':'Blob\x20Token\x202','description':a46_0x169488(0x166),'image':'../images/tokens/blob02.gif','category':a46_0x169488(0x19d)},'invuln':{'price':0x5dc,'name':'Invulnerability','description':'Become\x20invincible\x20for\x20a\x20short\x20time.','image':'../images/tokens/Invuln.gif','category':'powerup'},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':'The\x20final\x20blob\x20in\x20the\x20collection','image':a46_0x169488(0x1c1),'category':a46_0x169488(0x19d)},'reactor':{'price':0x7d0,'name':a46_0x169488(0x181),'description':a46_0x169488(0x17f),'image':a46_0x169488(0x199),'category':a46_0x169488(0x196)},'pyro':{'price':0xbb8,'name':'Pyro','description':'The\x20iconic\x20Pyro-GX\x20ship.','image':a46_0x169488(0x1e0),'category':a46_0x169488(0x17b)}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document[a46_0x169488(0x1de)](a46_0x169488(0x188),()=>{const _0x5cd1ac=a46_0x169488;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document['getElementById'](_0x5cd1ac(0x19c)),pointsDisplay=document['getElementById']('user-points'),authWarning=document[_0x5cd1ac(0x1bd)](_0x5cd1ac(0x179)),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x1f9f4f=>{const _0x47b764=a46_0xfb28;if(_0x1f9f4f){console['log'](_0x47b764(0x1f9),_0x1f9f4f['displayName']||_0x1f9f4f['email']);if(authWarning)authWarning[_0x47b764(0x171)]['display']=_0x47b764(0x1ca);if(storeContainer)storeContainer['style']['display']=_0x47b764(0x173);await loadUserData(_0x1f9f4f),updateThemeButtons(),updateTokenButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style'][_0x47b764(0x190)]='block';if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}function a46_0x56cf(){const _0xcf31ad=['Monitor\x20your\x20ship\x27s\x20energy\x20levels','\x20token','You\x20must\x20purchase\x20this\x20theme\x20first','Another\x20enigmatic\x20blob\x20creature','../images/tokens/subgame/mmissile.gif','dataset','description','sign-in-free','opacity','.token-equip-btn','../images/tokens/cloak.gif','uid','A\x20cunning\x20explosive\x20device.','constructor','style','\x20theme','block','confirm','can-afford','add','console','switchTheme','auth-warning','textContent','ship','name','Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20','Token\x20unequip\x20failed:','The\x20heart\x20of\x20every\x20mine.','current-theme','Reactor','toString','../images/tokens/Lock.gif','displayLadder','var(--muted-color,\x20#757575)','0.7','toLocaleString','DOMContentLoaded','store-message','function','tokens','Energy','store-item\x20token-item','../images/tokens/Plasmablobl.gif','\x20not\x20found','display','username','preventDefault','log','email','Sign\x20in\x20to\x20Purchase','special','createElement','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>','../images/tokens/Reactor.gif','Equipped','closest','store-content','blob','‚úÖ\x20Sold\x20token\x20','cursor','Plasma\x20Blob','üëë\x20Admin\x20controls\x20enabled','remove','disabled','User\x20profile\x20not\x20found','owned','RedeemStore','0.5','split','Need\x20','image','equipment','div','Marker','Intelligent\x20targeting\x20system','Show\x20your\x20support\x20with\x20this\x20fan\x20token.','Blue','sale','data','../images/tokens/Extralife.gif','is\x20that...\x20Pfunk?','inventory','token','No\x20token\x20is\x20currently\x20equipped','info','Sign\x20in\x20to\x20Apply','powerup','forEach','Emerald','getElementById','permission-denied','Purchase\x20failed.\x20Please\x20try\x20again.','price','../images/tokens/blob03.gif','Emerald\x20City!','refreshUI','FREE','Only\x20the\x20best\x20get\x20this\x20one','\x20theme\x20applied!','Cloaking\x20Device','High-powered\x20plasma\x20cannon\x20token.','Theme\x20','none','isAdmin','error','var(--success-color,\x20#4CAF50)','pointer','Error\x20loading\x20user\x20data:','code','theme_','Token\x20clicked:\x20','click','\x20points?','[data-theme]','You\x20already\x20own\x20the\x20','\x20Points','floor','Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.','Smart\x20Mine','cannot-afford','ThemeSystem','Failed\x20to\x20sell\x20token:\x20','addEventListener','points','../images/tokens/Pyro.gif','classList','Smart\x20Missile','Token\x20','Please\x20sign\x20in\x20to\x20select\x20themes','warn','\x20points\x20(50%\x20refund)','isUserAdmin','theme','weapon','\x20for\x20','Fast\x20and\x20furious\x20missile\x20token.','querySelector','../images/tokens/subgame/smissile.gif','‚úÖ\x20Token\x20','userTokens','appendChild','userProfiles','includes','querySelectorAll','bind','.theme-select-btn','success','Purple','background','‚úÖ\x20User\x20authenticated:','Apply\x20Theme','\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','currentUser'];a46_0x56cf=function(){return _0xcf31ad;};return a46_0x56cf();}async function loadUserData(_0x544478){const _0x234137=a46_0x169488;try{const _0x42f7df=doc(db,'userProfiles',_0x544478['uid']),_0x3b65b7=await getDoc(_0x42f7df);if(_0x3b65b7['exists']()){const _0x1d3b64=_0x3b65b7['data']();userData={'points':_0x1d3b64[_0x234137(0x1df)]||0x0,'inventory':_0x1d3b64[_0x234137(0x1b5)]||[],'isAdmin':_0x1d3b64['isAdmin']||![],'equippedToken':_0x1d3b64['equippedToken']||null},pointsDisplay&&(pointsDisplay['textContent']=userData[_0x234137(0x1df)][_0x234137(0x187)]()),window['isUserAdmin']=userData['isAdmin'],userData[_0x234137(0x1cb)]&&(console['log'](_0x234137(0x1a1)),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData[_0x234137(0x1df)]+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items,\x20Equipped:\x20'+(userData['equippedToken']||_0x234137(0x1ca)));}else await setDoc(_0x42f7df,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x544478['displayName']||_0x544478[_0x234137(0x194)]?.[_0x234137(0x1a8)]('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay[_0x234137(0x17a)]='0'),window[_0x234137(0x1e7)]=![],console['log']('New\x20user\x20profile\x20created');}catch(_0xe5da28){console['error'](_0x234137(0x1cf),_0xe5da28);}}function userOwnsTheme(_0x33c4e5){const _0x389bf2=a46_0x169488;if(THEMES[_0x33c4e5]?.[_0x389bf2(0x1c0)]===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x33c4e5);}function userOwnsToken(_0x4a9b03){const _0x58146d=a46_0x169488;return userData[_0x58146d(0x1b5)]['includes']('token_'+_0x4a9b03);}function userHasTokenEquipped(_0x1d1db6){return userData['equippedToken']===_0x1d1db6;}function getEquippedToken(){return userData['equippedToken']||null;}async function purchaseTheme(_0x4ca88e){const _0x4f535e=a46_0x169488,_0x4c4816=auth['currentUser'];if(!_0x4c4816)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x3cb6e8=THEMES[_0x4ca88e];if(!_0x3cb6e8)return console['error']('Theme\x20'+_0x4ca88e+'\x20not\x20found'),![];if(userData['points']<_0x3cb6e8[_0x4f535e(0x1c0)])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x3cb6e8[_0x4f535e(0x1c0)]-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x4ca88e))return showMessage(_0x4f535e(0x1d6)+_0x3cb6e8[_0x4f535e(0x17c)]+_0x4f535e(0x172),'info'),![];try{return await processPurchase(_0x4ca88e,_0x3cb6e8,'theme');}catch(_0x4d0025){return console['error']('Theme\x20purchase\x20failed:',_0x4d0025),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}async function purchaseToken(_0x2fa3aa){const _0x55c724=a46_0x169488,_0x5cf66a=auth['currentUser'];if(!_0x5cf66a)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error'),![];const _0x16d1d3=TOKENS[_0x2fa3aa];if(!_0x16d1d3)return console['error']('Token\x20'+_0x2fa3aa+'\x20not\x20found'),![];if(userData['points']<_0x16d1d3['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x16d1d3['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsToken(_0x2fa3aa))return showMessage('You\x20already\x20own\x20the\x20'+_0x16d1d3['name']+_0x55c724(0x164),'info'),![];try{return await processPurchase(_0x2fa3aa,_0x16d1d3,'token');}catch(_0x3ebaaa){return console[_0x55c724(0x1cc)]('Token\x20purchase\x20failed:',_0x3ebaaa),showMessage(_0x55c724(0x1bf),'error'),![];}}async function processPurchase(_0x25553b,_0x2df85e,_0x184134){const _0x32a7a9=a46_0x169488,_0x5f089e=auth['currentUser'];try{const _0x373384=doc(db,'userProfiles',_0x5f089e['uid']),_0x2ada37=await getDoc(_0x373384);if(!_0x2ada37['exists']())return showMessage(_0x32a7a9(0x1a4),'error'),![];const _0x3ff296=_0x2ada37['data'](),_0x3cdf7f=_0x3ff296[_0x32a7a9(0x1df)]||0x0,_0x2ea48b=_0x3ff296['inventory']||[];if(_0x3cdf7f<_0x2df85e[_0x32a7a9(0x1c0)])return showMessage('Insufficient\x20points','error'),![];if(_0x2ea48b['includes'](_0x184134+'_'+_0x25553b))return showMessage('You\x20already\x20own\x20this\x20'+_0x184134,'info'),![];const _0x5ccf69=_0x3cdf7f-_0x2df85e['price'],_0x2ae7e3=[..._0x2ea48b,_0x184134+'_'+_0x25553b];await updateDoc(_0x373384,{'points':_0x5ccf69,'inventory':_0x2ae7e3,'lastPurchase':serverTimestamp()});if(_0x184134==='token')try{const _0x53db6e=doc(db,'userTokens',_0x5f089e[_0x32a7a9(0x16e)]),_0x32da24=await getDoc(_0x53db6e);let _0x4991e6=[];_0x32da24['exists']()&&(_0x4991e6=_0x32da24['data']()[_0x32a7a9(0x18b)]||[]);const _0x242764=new Date();_0x4991e6['push']({'tokenId':_0x25553b,'tokenName':_0x2df85e[_0x32a7a9(0x17c)],'tokenImage':_0x2df85e[_0x32a7a9(0x1aa)],'category':_0x2df85e['category'],'purchasedAt':_0x242764,'price':_0x2df85e['price'],'equipped':![]}),await setDoc(_0x53db6e,{'userId':_0x5f089e[_0x32a7a9(0x16e)],'username':_0x3ff296[_0x32a7a9(0x191)]||_0x5f089e['displayName']||'Unknown','tokens':_0x4991e6,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache===_0x32a7a9(0x18a)&&clearTokenCache(_0x5f089e[_0x32a7a9(0x16e)]),console['log'](_0x32a7a9(0x1ee)+_0x25553b+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0x480834){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:',_0x480834),_0x480834['code']==='permission-denied'?console['log']('üîß\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console[_0x32a7a9(0x1cc)]('Unexpected\x20token\x20error:',_0x480834);}try{await addDoc(collection(db,'transactions'),{'userId':_0x5f089e[_0x32a7a9(0x16e)],'userEmail':_0x5f089e['email'],'itemId':_0x184134+'_'+_0x25553b,'itemTitle':_0x2df85e['name'],'price':_0x2df85e['price'],'type':'purchase','category':_0x184134,'timestamp':serverTimestamp()});}catch(_0x5df1db){console['warn']('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x5df1db);}return userData['points']=_0x5ccf69,userData['inventory']=_0x2ae7e3,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),updateTokenButtons(),_0x184134===_0x32a7a9(0x1e8)&&updateThemeButtons(),console['log']('‚úÖ\x20Purchased\x20'+_0x2df85e['name']+_0x32a7a9(0x1ea)+_0x2df85e['price']+'\x20points'),showMessage('Successfully\x20purchased\x20'+_0x2df85e['name']+'!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','success'),!![];}catch(_0x41cdc6){console['error']('Purchase\x20processing\x20error:',_0x41cdc6);if(_0x41cdc6['code']===_0x32a7a9(0x1be))showMessage('Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.','error');else{if(_0x41cdc6[_0x32a7a9(0x1d0)]==='unavailable')showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.',_0x32a7a9(0x1cc));else _0x41cdc6[_0x32a7a9(0x1d0)]==='unauthenticated'?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.',_0x32a7a9(0x1cc)):showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x32a7a9(0x1cc));}return![];}}async function equipToken(_0x21d1ca){const _0x4635ed=a46_0x169488,_0x1a3db0=auth['currentUser'];if(!_0x1a3db0)return showMessage('Please\x20sign\x20in\x20to\x20equip\x20tokens',_0x4635ed(0x1cc)),![];const _0x477ef4=TOKENS[_0x21d1ca];if(!_0x477ef4)return console['error']('Token\x20'+_0x21d1ca+'\x20not\x20found'),![];if(!userOwnsToken(_0x21d1ca))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it',_0x4635ed(0x1cc)),![];try{const _0x378862=doc(db,_0x4635ed(0x1f1),_0x1a3db0[_0x4635ed(0x16e)]);await updateDoc(_0x378862,{'equippedToken':_0x21d1ca,'lastTokenEquip':serverTimestamp()});try{const _0xd91ef9=doc(db,'userTokens',_0x1a3db0['uid']),_0xfc1f76=await getDoc(_0xd91ef9);if(_0xfc1f76['exists']()){const _0x25a923=_0xfc1f76['data'](),_0x33b9f0=_0x25a923['tokens']||[],_0x116019=_0x33b9f0['map'](_0x3e4c75=>({..._0x3e4c75,'equipped':_0x3e4c75['tokenId']===_0x21d1ca}));await updateDoc(_0xd91ef9,{'tokens':_0x116019,'equippedToken':_0x21d1ca,'lastUpdated':serverTimestamp()});}}catch(_0x4da470){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0x4da470);}return userData['equippedToken']=_0x21d1ca,typeof clearTokenCache===_0x4635ed(0x18a)&&(clearTokenCache(_0x1a3db0['uid']),clearTokenCache()),setTimeout(()=>{const _0x343c08=_0x4635ed;window[_0x343c08(0x184)]&&typeof window['displayLadder']===_0x343c08(0x18a)&&(console['log']('üîÑ\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token'),window['displayLadder'](!![])),window[_0x343c08(0x1a6)]&&typeof window['RedeemStore']['refreshUI']==='function'&&window['RedeemStore']['refreshUI']();},0x1f4),console['log']('‚úÖ\x20Equipped\x20token:\x20'+_0x477ef4['name']),showMessage(_0x477ef4['name']+'\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.',_0x4635ed(0x1f6)),!![];}catch(_0x1e2659){return console['error']('Token\x20equip\x20failed:',_0x1e2659),_0x1e2659['code']===_0x4635ed(0x1be)?showMessage(_0x4635ed(0x1d9),'warning'):showMessage('Failed\x20to\x20equip\x20token:\x20'+_0x1e2659['message'],_0x4635ed(0x1cc)),![];}}async function unequipToken(){const _0x21267b=a46_0x169488,_0x4fca17=auth['currentUser'];if(!_0x4fca17)return showMessage('Please\x20sign\x20in\x20to\x20unequip\x20tokens',_0x21267b(0x1cc)),![];if(!userData['equippedToken'])return showMessage(_0x21267b(0x1b7),'info'),![];try{const _0x45abc1=doc(db,'userProfiles',_0x4fca17['uid']);await updateDoc(_0x45abc1,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x521606=doc(db,_0x21267b(0x1ef),_0x4fca17['uid']),_0x534375=await getDoc(_0x521606);if(_0x534375['exists']()){const _0x15123d=_0x534375['data'](),_0x25cf50=_0x15123d['tokens']||[],_0x5a07cf=_0x25cf50['map'](_0x33ddcf=>({..._0x33ddcf,'equipped':![]}));await updateDoc(_0x521606,{'tokens':_0x5a07cf,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData['equippedToken']=null,typeof clearTokenCache==='function'&&(clearTokenCache(_0x4fca17['uid']),clearTokenCache()),setTimeout(()=>{const _0x658e92=_0x21267b;window[_0x658e92(0x184)]&&typeof window['displayLadder']==='function'&&(console['log']('üîÑ\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token'),window[_0x658e92(0x184)](!![])),window[_0x658e92(0x1a6)]&&typeof window['RedeemStore']['refreshUI']===_0x658e92(0x18a)&&window['RedeemStore'][_0x658e92(0x1c3)]();},0x1f4),console[_0x21267b(0x193)]('‚úÖ\x20Token\x20unequipped'),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x231409){return console['error'](_0x21267b(0x17e),_0x231409),showMessage('Failed\x20to\x20unequip\x20token:\x20'+_0x231409['message'],'error'),![];}}async function sellToken(_0x54da72){const _0x1342b1=a46_0x169488,_0x2d13e4=auth[_0x1342b1(0x1fc)];if(!_0x2d13e4)return showMessage('Please\x20sign\x20in\x20to\x20sell\x20tokens','error'),![];if(!userData['isAdmin'])return showMessage('Only\x20admins\x20can\x20sell\x20tokens','error'),![];const _0x38a8a7=TOKENS[_0x54da72];if(!_0x38a8a7)return console['error']('Token\x20'+_0x54da72+'\x20not\x20found'),![];if(!userOwnsToken(_0x54da72))return showMessage('You\x20don\x27t\x20own\x20this\x20token','error'),![];try{const _0x1e82fa=doc(db,_0x1342b1(0x1f1),_0x2d13e4['uid']),_0x310cdd=await getDoc(_0x1e82fa),_0x461907=_0x310cdd['data'](),_0x360812=Math['floor'](_0x38a8a7['price']*0.5),_0x29c3d7=(_0x461907[_0x1342b1(0x1df)]||0x0)+_0x360812,_0xad38f5=(_0x461907[_0x1342b1(0x1b5)]||[])['filter'](_0x3b74df=>_0x3b74df!=='token_'+_0x54da72),_0x3f2477=_0x461907['equippedToken']===_0x54da72?null:_0x461907['equippedToken'];await updateDoc(_0x1e82fa,{'points':_0x29c3d7,'inventory':_0xad38f5,'equippedToken':_0x3f2477,'lastSale':serverTimestamp()});const _0x125790=doc(db,'userTokens',_0x2d13e4[_0x1342b1(0x16e)]),_0x9985a1=await getDoc(_0x125790);if(_0x9985a1['exists']()){const _0x56653f=_0x9985a1[_0x1342b1(0x1b2)](),_0x593d6a=_0x56653f['tokens']||[],_0x232511=_0x593d6a['filter'](_0x8c21bb=>_0x8c21bb['tokenId']!==_0x54da72);await updateDoc(_0x125790,{'tokens':_0x232511,'equippedToken':_0x3f2477,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0x2d13e4['uid'],'userEmail':_0x2d13e4['email'],'itemId':'token_'+_0x54da72,'itemTitle':_0x38a8a7['name'],'refund':_0x360812,'originalPrice':_0x38a8a7[_0x1342b1(0x1c0)],'type':_0x1342b1(0x1b1),'category':_0x1342b1(0x1b6),'timestamp':serverTimestamp()}),userData['points']=_0x29c3d7,userData[_0x1342b1(0x1b5)]=_0xad38f5,userData['equippedToken']=_0x3f2477,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),typeof clearTokenCache==='function'&&clearTokenCache(_0x2d13e4['uid']),console['log'](_0x1342b1(0x19e)+_0x38a8a7['name']+'\x20for\x20'+_0x360812+'\x20points'),showMessage('Sold\x20'+_0x38a8a7[_0x1342b1(0x17c)]+_0x1342b1(0x1ea)+_0x360812+_0x1342b1(0x1e6),'success'),!![];}catch(_0x238924){return console['error']('Token\x20sale\x20failed:',_0x238924),showMessage(_0x1342b1(0x1dd)+_0x238924['message'],'error'),![];}}function applyTheme(_0x12d128){const _0x1ef305=a46_0x169488;if(!userOwnsTheme(_0x12d128))return showMessage(_0x1ef305(0x165),'error'),![];return window[_0x1ef305(0x1dc)]?(window['ThemeSystem'][_0x1ef305(0x178)](_0x12d128),showMessage((THEMES[_0x12d128]?.['name']||_0x12d128)+_0x1ef305(0x1c6),'success'),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x284474=a46_0x169488,_0x346c9f=document['querySelector']('.themes-grid');if(!_0x346c9f){console[_0x284474(0x1cc)]('Themes\x20container\x20not\x20found');return;}_0x346c9f['innerHTML']='',Object['entries'](THEMES)['forEach'](([_0x528408,_0x4160d0])=>{const _0x48d09b=_0x284474,_0x557ecd=document['createElement']('div');_0x557ecd['className']='store-item',_0x557ecd['dataset'][_0x48d09b(0x1e8)]=_0x528408,_0x557ecd['dataset']['itemId']=_0x48d09b(0x1d1)+_0x528408,_0x557ecd['dataset'][_0x48d09b(0x1c0)]=_0x4160d0['price'],_0x557ecd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x528408+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x4160d0['price']===0x0?_0x48d09b(0x1c4):_0x4160d0['price']+'\x20Points')+_0x48d09b(0x198)+_0x4160d0['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x4160d0[_0x48d09b(0x169)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x346c9f['appendChild'](_0x557ecd);}),setupThemeButtons();}function buildTokenItems(){const _0x5072a0=document['querySelector']('.tokens-grid');if(!_0x5072a0){console['error']('Tokens\x20container\x20not\x20found');return;}_0x5072a0['innerHTML']='',Object['entries'](TOKENS)['forEach'](([_0x218789,_0x196128])=>{const _0x4ea78f=a46_0xfb28,_0x38aaa4=document['createElement'](_0x4ea78f(0x1ac));_0x38aaa4['className']=_0x4ea78f(0x18d),_0x38aaa4['dataset'][_0x4ea78f(0x1b6)]=_0x218789,_0x38aaa4['dataset']['itemId']='token_'+_0x218789,_0x38aaa4[_0x4ea78f(0x168)]['price']=_0x196128['price'];const _0x26107c=userData[_0x4ea78f(0x1cb)]&&userOwnsToken(_0x218789)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20('+Math[_0x4ea78f(0x1d8)](_0x196128['price']*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x38aaa4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x196128['image']+'\x22\x20alt=\x22'+_0x196128['name']+'\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+_0x196128['price']+_0x4ea78f(0x1fb)+_0x26107c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x5072a0[_0x4ea78f(0x1f0)](_0x38aaa4);}),setupTokenButtons();}function setupThemeButtons(){const _0x1eb72c=a46_0x169488,_0x5867ef=document['querySelectorAll'](_0x1eb72c(0x1f5));_0x5867ef[_0x1eb72c(0x1bb)](_0x3a8ac5=>{_0x3a8ac5['addEventListener']('click',async _0x12e948=>{const _0x42d73d=a46_0xfb28;_0x12e948['preventDefault']();const _0x5760aa=auth['currentUser'];if(!_0x5760aa){showMessage(_0x42d73d(0x1e4),_0x42d73d(0x1cc));return;}const _0x333a9f=_0x3a8ac5['closest']('[data-theme]'),_0x4ca184=_0x333a9f['dataset']['theme'],_0x2b5df1=THEMES[_0x4ca184];if(!_0x2b5df1){console['error'](_0x42d73d(0x1c9)+_0x4ca184+_0x42d73d(0x18f));return;}console[_0x42d73d(0x193)]('Theme\x20clicked:\x20'+_0x2b5df1['name']+'\x20('+_0x4ca184+')');if(_0x3a8ac5['disabled']){_0x2b5df1[_0x42d73d(0x1c0)]>0x0&&showMessage('You\x20need\x20'+_0x2b5df1[_0x42d73d(0x1c0)]+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x3a8ac5['textContent']==='Current\x20Theme'){showMessage(_0x2b5df1['name']+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x3a8ac5['textContent']==='Apply\x20Theme'){applyTheme(_0x4ca184),updateThemeButtons();return;}if(_0x3a8ac5['textContent'][_0x42d73d(0x1f2)]('Buy')){const _0x277afb=window[_0x42d73d(0x174)]('Purchase\x20'+_0x2b5df1['name']+'\x20theme\x20for\x20'+_0x2b5df1['price']+'\x20points?');if(!_0x277afb)return;const _0x34d1d6=await purchaseTheme(_0x4ca184);_0x34d1d6&&(showMessage(_0x2b5df1['name']+'\x20theme\x20purchased!',_0x42d73d(0x1f6)),applyTheme(_0x4ca184),updateThemeButtons());return;}userOwnsTheme(_0x4ca184)?applyTheme(_0x4ca184):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0x42d73d(0x1cc));});}),updateThemeButtons();}function setupTokenButtons(){const _0x4f762f=a46_0x169488,_0x40601c=document['querySelectorAll']('.token-select-btn'),_0x20bf99=document['querySelectorAll'](_0x4f762f(0x16c)),_0x4e56f7=document[_0x4f762f(0x1f3)]('.token-sell-btn');_0x40601c[_0x4f762f(0x1bb)](_0x4b499a=>{_0x4b499a['addEventListener']('click',async _0x417cf9=>{const _0x14de7c=a46_0xfb28;_0x417cf9['preventDefault']();const _0x42bb5d=auth['currentUser'];if(!_0x42bb5d){showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error');return;}const _0x5b62e4=_0x4b499a['closest']('[data-token]'),_0xb5a774=_0x5b62e4['dataset']['token'],_0x5cb6cd=TOKENS[_0xb5a774];if(!_0x5cb6cd){console[_0x14de7c(0x1cc)](_0x14de7c(0x1e3)+_0xb5a774+'\x20not\x20found');return;}console['log'](_0x14de7c(0x1d2)+_0x5cb6cd['name']+'\x20('+_0xb5a774+')');if(_0x4b499a[_0x14de7c(0x1a3)]){showMessage('You\x20need\x20'+_0x5cb6cd['price']+'\x20points\x20to\x20purchase\x20this\x20token','error');return;}if(_0x4b499a['textContent']==='Owned'){showMessage('You\x20already\x20own\x20the\x20'+_0x5cb6cd['name']+'\x20token','info');return;}if(_0x4b499a[_0x14de7c(0x17a)]['includes']('Purchase')||_0x4b499a['textContent']['includes']('Buy')){const _0xcea75b=window[_0x14de7c(0x174)]('Purchase\x20'+_0x5cb6cd[_0x14de7c(0x17c)]+'\x20token\x20for\x20'+_0x5cb6cd[_0x14de7c(0x1c0)]+_0x14de7c(0x1d4));if(!_0xcea75b)return;const _0x1e93d4=await purchaseToken(_0xb5a774);_0x1e93d4&&updateTokenButtons();return;}});}),_0x20bf99['forEach'](_0x57b5ef=>{_0x57b5ef['addEventListener']('click',async _0x536116=>{const _0x516c49=a46_0xfb28;_0x536116['preventDefault']();const _0x50593e=_0x57b5ef['closest']('[data-token]'),_0x3af1c4=_0x50593e['dataset']['token'],_0x248089=TOKENS[_0x3af1c4];if(_0x57b5ef[_0x516c49(0x17a)]==='Equipped'){const _0x1a9c57=window['confirm']('Unequip\x20'+_0x248089[_0x516c49(0x17c)]+'?');if(!_0x1a9c57)return;const _0xe73876=await unequipToken();_0xe73876&&updateTokenButtons();}else{const _0x2de97f=window[_0x516c49(0x174)]('Equip\x20'+_0x248089['name']+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0x2de97f)return;const _0x150483=await equipToken(_0x3af1c4);_0x150483&&updateTokenButtons();}});}),_0x4e56f7['forEach'](_0x26772a=>{const _0x3a425f=_0x4f762f;_0x26772a['addEventListener'](_0x3a425f(0x1d3),async _0x927a07=>{const _0x10c3ae=_0x3a425f;_0x927a07[_0x10c3ae(0x192)]();const _0x2d89f0=_0x26772a[_0x10c3ae(0x19b)]('[data-token]'),_0x4ce16c=_0x2d89f0['dataset']['token'],_0x410b37=TOKENS[_0x4ce16c],_0x47d742=Math[_0x10c3ae(0x1d8)](_0x410b37['price']*0.5),_0x512614=window[_0x10c3ae(0x174)](_0x10c3ae(0x17d)+_0x410b37['name']+'\x20for\x20'+_0x47d742+'\x20points?\x20This\x20cannot\x20be\x20undone.');if(!_0x512614)return;const _0x17ad27=await sellToken(_0x4ce16c);_0x17ad27&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0xf300df=a46_0x169488,_0x24fa6f=window[_0xf300df(0x1dc)]?window[_0xf300df(0x1dc)]['getCurrentTheme']():'default',_0x17fd74=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')[_0xf300df(0x1bb)](_0x41914a=>{const _0x58b4e5=_0xf300df,_0x149952=_0x41914a[_0x58b4e5(0x19b)](_0x58b4e5(0x1d5)),_0x4c415d=_0x149952['dataset'][_0x58b4e5(0x1e8)],_0x38ef18=THEMES[_0x4c415d];if(!_0x38ef18)return;_0x41914a['disabled']=![],_0x41914a['style'][_0x58b4e5(0x16b)]='',_0x41914a[_0x58b4e5(0x171)]['cursor']=_0x58b4e5(0x1ce),_0x41914a['classList']['remove'](_0x58b4e5(0x180),'apply-theme',_0x58b4e5(0x175),'cannot-afford','sign-in-free','sign-in-paid');if(!_0x17fd74){_0x38ef18['price']===0x0?(_0x41914a[_0x58b4e5(0x17a)]=_0x58b4e5(0x1b9),_0x41914a[_0x58b4e5(0x1e1)][_0x58b4e5(0x176)](_0x58b4e5(0x16a))):(_0x41914a['textContent']='Sign\x20in\x20to\x20Purchase',_0x41914a['disabled']=!![],_0x41914a[_0x58b4e5(0x171)][_0x58b4e5(0x16b)]=_0x58b4e5(0x186),_0x41914a['classList']['add']('sign-in-paid'));return;}if(_0x4c415d===_0x24fa6f){_0x41914a['textContent']='Current\x20Theme',_0x41914a['classList']['add'](_0x58b4e5(0x180)),_0x41914a['disabled']=!![],_0x41914a['style'][_0x58b4e5(0x19f)]='default';return;}if(userOwnsTheme(_0x4c415d)){_0x41914a['textContent']=_0x58b4e5(0x1fa),_0x41914a['classList'][_0x58b4e5(0x176)]('apply-theme');return;}if(userData[_0x58b4e5(0x1df)]>=_0x38ef18[_0x58b4e5(0x1c0)]){_0x41914a['textContent']='Buy\x20for\x20'+_0x38ef18['price']+_0x58b4e5(0x1d7),_0x41914a['classList'][_0x58b4e5(0x176)](_0x58b4e5(0x175));return;}_0x41914a['textContent']='Need\x20'+_0x38ef18[_0x58b4e5(0x1c0)]+'\x20Points',_0x41914a['classList']['add'](_0x58b4e5(0x1db)),_0x41914a['style']['opacity']='0.5',_0x41914a['disabled']=!![],_0x41914a['style']['cursor']='not-allowed';});}function updateTokenButtons(){const _0x56f7a8=auth['currentUser'];document['querySelectorAll']('.token-select-btn')['forEach'](_0x2a703a=>{const _0x4c77aa=a46_0xfb28,_0x4115de=_0x2a703a['closest']('[data-token]'),_0x15385f=_0x4115de[_0x4c77aa(0x168)]['token'],_0x3d8451=TOKENS[_0x15385f],_0x449c3d=_0x4115de['querySelector']('.token-equip-btn'),_0x35598b=_0x4115de[_0x4c77aa(0x1ec)]('.token-sell-btn');if(!_0x3d8451)return;_0x2a703a[_0x4c77aa(0x1a3)]=![],_0x2a703a['style'][_0x4c77aa(0x16b)]='',_0x2a703a[_0x4c77aa(0x171)]['cursor']='pointer';_0x449c3d&&(_0x449c3d['style']['display']='none',_0x449c3d['disabled']=![],_0x449c3d['style'][_0x4c77aa(0x16b)]='',_0x449c3d['classList']['remove']('equipped','can-equip'));_0x35598b&&(_0x35598b[_0x4c77aa(0x171)]['display']='none');_0x2a703a['classList']['remove'](_0x4c77aa(0x1a5),'can-afford','cannot-afford','sign-in');if(!_0x56f7a8){_0x2a703a['textContent']=_0x4c77aa(0x195),_0x2a703a[_0x4c77aa(0x1a3)]=!![],_0x2a703a['style']['opacity']=_0x4c77aa(0x186),_0x2a703a['classList'][_0x4c77aa(0x176)]('sign-in');return;}if(userOwnsToken(_0x15385f)){_0x2a703a[_0x4c77aa(0x17a)]='Owned',_0x2a703a['classList']['add']('owned'),_0x2a703a['disabled']=!![],_0x2a703a['style'][_0x4c77aa(0x19f)]='default',_0x2a703a[_0x4c77aa(0x171)][_0x4c77aa(0x1f8)]=_0x4c77aa(0x1cd);_0x449c3d&&(_0x449c3d['style']['display']='block',userHasTokenEquipped(_0x15385f)?(_0x449c3d['textContent']=_0x4c77aa(0x19a),_0x449c3d['classList']['add']('equipped'),_0x449c3d[_0x4c77aa(0x171)]['background']='var(--accent-color,\x20#2196F3)',_0x449c3d['style']['cursor']=_0x4c77aa(0x1ce)):(_0x449c3d['textContent']='Equip',_0x449c3d[_0x4c77aa(0x1e1)][_0x4c77aa(0x176)]('can-equip'),_0x449c3d['style']['background']='var(--info-color,\x20#17a2b8)',_0x449c3d['style']['cursor']='pointer'));_0x35598b&&userData[_0x4c77aa(0x1cb)]&&(_0x35598b['style'][_0x4c77aa(0x190)]='block');return;}if(userData[_0x4c77aa(0x1df)]>=_0x3d8451['price']){_0x2a703a[_0x4c77aa(0x17a)]='Buy\x20for\x20'+_0x3d8451['price']+_0x4c77aa(0x1d7),_0x2a703a['classList']['add'](_0x4c77aa(0x175)),_0x2a703a['style']['background']='';return;}_0x2a703a[_0x4c77aa(0x17a)]=_0x4c77aa(0x1a9)+_0x3d8451[_0x4c77aa(0x1c0)]+'\x20Points',_0x2a703a['classList']['add']('cannot-afford'),_0x2a703a['style']['opacity']=_0x4c77aa(0x1a7),_0x2a703a['disabled']=!![],_0x2a703a['style']['cursor']='not-allowed',_0x2a703a['style'][_0x4c77aa(0x1f8)]=_0x4c77aa(0x185);});}function showMessage(_0x3238e9,_0x4e5b80='info'){const _0x5a2b74=a46_0x169488,_0x5d65f0=document['getElementById']('store-message');_0x5d65f0&&_0x5d65f0['remove']();const _0x901e37=document[_0x5a2b74(0x197)]('div');_0x901e37['id']=_0x5a2b74(0x189),_0x901e37['className']='store-message\x20store-message-'+_0x4e5b80,_0x901e37['textContent']=_0x3238e9,document['body'][_0x5a2b74(0x1f0)](_0x901e37),requestAnimationFrame(()=>{const _0xd74d8=_0x5a2b74;_0x901e37[_0xd74d8(0x1e1)]['add']('visible');}),setTimeout(()=>{const _0x3f6d39=_0x5a2b74;_0x901e37['classList'][_0x3f6d39(0x1a2)]('visible'),setTimeout(()=>{_0x901e37['parentNode']&&_0x901e37['remove']();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console[a46_0x169488(0x193)]('üè™\x20Redeem\x20store\x20loaded');