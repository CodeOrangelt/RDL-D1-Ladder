const a52_0x46424e=a52_0x2085,a52_0x3479f9=(function(){let _0x13d255=!![];return function(_0x2538f9,_0x4b538b){const _0x599f29=_0x13d255?function(){const _0xdfdb26=a52_0x2085;if(_0x4b538b){const _0x4c3d7e=_0x4b538b[_0xdfdb26(0xa4)](_0x2538f9,arguments);return _0x4b538b=null,_0x4c3d7e;}}:function(){};return _0x13d255=![],_0x599f29;};}()),a52_0x1a5042=a52_0x3479f9(this,function(){const _0x50a4c1=a52_0x2085;let _0xf732c5;try{const _0x1da89a=Function(_0x50a4c1(0xb6)+_0x50a4c1(0xb5)+');');_0xf732c5=_0x1da89a();}catch(_0x19f01a){_0xf732c5=window;}const _0x1b4bb6=_0xf732c5['console']=_0xf732c5['console']||{},_0x3d06c7=['log','warn','info','error','exception','table','trace'];for(let _0x45edb9=0x0;_0x45edb9<_0x3d06c7['length'];_0x45edb9++){const _0x193524=a52_0x3479f9['constructor'][_0x50a4c1(0xb2)][_0x50a4c1(0xa1)](a52_0x3479f9),_0x53967b=_0x3d06c7[_0x45edb9],_0x93bfbc=_0x1b4bb6[_0x53967b]||_0x193524;_0x193524[_0x50a4c1(0xb0)]=a52_0x3479f9[_0x50a4c1(0xa1)](a52_0x3479f9),_0x193524['toString']=_0x93bfbc['toString'][_0x50a4c1(0xa1)](_0x93bfbc),_0x1b4bb6[_0x53967b]=_0x193524;}});a52_0x1a5042();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a52_0x2085(_0x54a053,_0x2e1823){const _0x1a5042=a52_0x108d();return a52_0x2085=function(_0x3479f9,_0x1ce93c){_0x3479f9=_0x3479f9-0x9d;let _0x108d29=_0x1a5042[_0x3479f9];return _0x108d29;},a52_0x2085(_0x54a053,_0x2e1823);}import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){this['setupEventListeners']();}['setupEventListeners'](){const _0x1cb48f=document['getElementById']('reset-season'),_0x77d818=document['getElementById']('confirm-reset'),_0x82eb70=document['getElementById']('cancel-reset');_0x1cb48f?.['addEventListener']('click',()=>{const _0x3afd1e=a52_0x2085;document['getElementById']('reset-confirmation')[_0x3afd1e(0xaf)]['display']='block';}),_0x77d818?.['addEventListener']('click',async()=>{const _0x527a89=a52_0x2085,_0x38e041=document['getElementById'](_0x527a89(0xa7)),_0x1be188=auth[_0x527a89(0xb4)];if(!_0x1be188||!_0x38e041[_0x527a89(0xac)]){alert('Please\x20enter\x20your\x20password');return;}try{const _0x11ed9e=EmailAuthProvider[_0x527a89(0xa9)](_0x1be188['email'],_0x38e041['value']);await reauthenticateWithCredential(_0x1be188,_0x11ed9e),await this[_0x527a89(0xab)](),_0x38e041['value']='',document['getElementById'](_0x527a89(0x9d))['style']['display']='none';}catch(_0x4bedad){alert(_0x527a89(0xa6)),console[_0x527a89(0xa0)]('Authentication\x20error:',_0x4bedad);}}),_0x82eb70?.['addEventListener']('click',()=>{const _0x1112bd=a52_0x2085,_0x287458=document[_0x1112bd(0xa8)]('reset-password');_0x287458[_0x1112bd(0xac)]='',document['getElementById']('reset-confirmation')['style']['display']='none';});}async[a52_0x46424e(0xab)](){const _0x1b9afa=a52_0x46424e;try{const _0x4ec916=await getDoc(doc(db,'metadata','seasonCount'));let _0x218a1b=0x1;_0x4ec916['exists']()&&(_0x218a1b=_0x4ec916[_0x1b9afa(0x9e)]()[_0x1b9afa(0xaa)]+0x1);const _0x3a16b3=await getDocs(collection(db,'players')),_0x1b63d5={'players':[],'date':new Date(),'seasonNumber':_0x218a1b};for(const _0x5a53db of _0x3a16b3[_0x1b9afa(0xa5)]){const _0x17c6ff=_0x5a53db['data']();_0x1b63d5['players']['push']({'username':_0x17c6ff['username'],'position':_0x17c6ff['position'],'eloRating':_0x17c6ff[_0x1b9afa(0xa2)]||0x4b0}),await setDoc(doc(db,_0x1b9afa(0xa3),_0x5a53db['id']),{..._0x17c6ff,'eloRating':0x4b0,'position':_0x17c6ff[_0x1b9afa(0xad)]});}await setDoc(doc(db,_0x1b9afa(0xb3),'season'+_0x218a1b),_0x1b63d5),await setDoc(doc(db,'metadata',_0x1b9afa(0xb1)),{'count':_0x218a1b}),alert(_0x1b9afa(0x9f)+_0x218a1b+'\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.'),location['reload']();}catch(_0x39910e){console['error']('Error\x20resetting\x20season:',_0x39910e),alert(_0x1b9afa(0xae));}}}function a52_0x108d(){const _0x33a851=['reset-confirmation','data','Season\x20','error','bind','eloRating','players','apply','docs','Invalid\x20password\x20or\x20authentication\x20failed','reset-password','getElementById','credential','count','resetSeason','value','position','Error\x20resetting\x20season.\x20Please\x20try\x20again.','style','__proto__','seasonCount','prototype','seasons','currentUser','{}.constructor(\x22return\x20this\x22)(\x20)','return\x20(function()\x20'];a52_0x108d=function(){return _0x33a851;};return a52_0x108d();}export const seasonManager=new SeasonManager();