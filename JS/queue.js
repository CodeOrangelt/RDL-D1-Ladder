const a47_0x36a798=a47_0x412f,a47_0x5c7feb=(function(){let _0x4fd7c9=!![];return function(_0x464904,_0x5a8f2d){const _0x2a5692=_0x4fd7c9?function(){if(_0x5a8f2d){const _0x55fb01=_0x5a8f2d['apply'](_0x464904,arguments);return _0x5a8f2d=null,_0x55fb01;}}:function(){};return _0x4fd7c9=![],_0x2a5692;};}()),a47_0x3f08c4=a47_0x5c7feb(this,function(){const _0x5c4fc0=a47_0x412f,_0x2b62bf=function(){let _0x4ca543;try{_0x4ca543=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x23fead){_0x4ca543=window;}return _0x4ca543;},_0x4b1294=_0x2b62bf(),_0xd7c599=_0x4b1294['console']=_0x4b1294['console']||{},_0x2eabca=[_0x5c4fc0(0xc7),_0x5c4fc0(0xce),_0x5c4fc0(0xcb),'error','exception','table','trace'];for(let _0x208ee2=0x0;_0x208ee2<_0x2eabca['length'];_0x208ee2++){const _0x1552c8=a47_0x5c7feb['constructor']['prototype']['bind'](a47_0x5c7feb),_0x57e2b0=_0x2eabca[_0x208ee2],_0x4691a4=_0xd7c599[_0x57e2b0]||_0x1552c8;_0x1552c8[_0x5c4fc0(0xcd)]=a47_0x5c7feb['bind'](a47_0x5c7feb),_0x1552c8['toString']=_0x4691a4['toString'][_0x5c4fc0(0xd2)](_0x4691a4),_0xd7c599[_0x57e2b0]=_0x1552c8;}});a47_0x3f08c4();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a47_0x574a(){const _0x3310c8=['isReady','toDate','Error\x20removing\x20player\x20from\x20queue:','addEventListener','block','lastUpdated','style','log','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','push','Just\x20now','info','display','__proto__','warn','unload','username','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','bind'];a47_0x574a=function(){return _0x3310c8;};return a47_0x574a();}const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where(a47_0x36a798(0xc0),'==',!![]));function updateQueueDisplay(_0x5e15bf){const _0x943f36=a47_0x36a798,_0x113dc6=document['getElementById']('queue-container');if(!_0x113dc6)return;if(_0x5e15bf['length']===0x0){_0x113dc6[_0x943f36(0xc6)]['display']='none';return;}_0x113dc6['style'][_0x943f36(0xcc)]=_0x943f36(0xc4);let _0xd97caa=_0x943f36(0xd1);_0x5e15bf['forEach'](_0x5bff4c=>{_0xd97caa+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x5bff4c['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x5bff4c['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0xd97caa+=_0x943f36(0xc8),_0x113dc6['innerHTML']=_0xd97caa;}function formatQueueTime(_0x17544c){const _0x22f5f3=a47_0x36a798;if(!_0x17544c)return _0x22f5f3(0xca);const _0x1bae40=_0x17544c[_0x22f5f3(0xc1)]?_0x17544c[_0x22f5f3(0xc1)]():new Date(_0x17544c),_0x3e80e2=new Date(),_0x3ab563=Math['floor']((_0x3e80e2-_0x1bae40)/0xea60);if(_0x3ab563<0x1)return'Just\x20now';return _0x3ab563+'m\x20in\x20queue';}function a47_0x412f(_0x3c96ad,_0x147f55){const _0x3f08c4=a47_0x574a();return a47_0x412f=function(_0x5c7feb,_0x42af82){_0x5c7feb=_0x5c7feb-0xc0;let _0x574a6f=_0x3f08c4[_0x5c7feb];return _0x574a6f;},a47_0x412f(_0x3c96ad,_0x147f55);}async function checkQueueTimeout(_0xf37f02){const _0x288662=a47_0x36a798;if(!_0xf37f02[_0x288662(0xc5)])return;const _0x188546=_0xf37f02['lastUpdated']['toDate']?_0xf37f02['lastUpdated']['toDate']():new Date(_0xf37f02[_0x288662(0xc5)]),_0x59d982=new Date(),_0x2b750d=Math['floor']((_0x59d982-_0x188546)/0xea60);if(_0x2b750d>=0x1e)try{const _0x2d6829=doc(db,'readyPlayers',_0xf37f02['id']);await updateDoc(_0x2d6829,{'isReady':![]});}catch(_0x2fb7b2){console['error'](_0x288662(0xc2),_0x2fb7b2);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x100dae=>{const _0x3c8953=[];_0x100dae['forEach'](_0x34bc42=>{const _0x5d96d7=a47_0x412f,_0x5a5769=_0x34bc42['data']();if(_0x5a5769['isReady']===!![]){const _0x2e810d={'id':_0x34bc42['id'],'username':_0x5a5769[_0x5d96d7(0xd0)],'lastUpdated':_0x5a5769[_0x5d96d7(0xc5)]||new Date()};_0x3c8953[_0x5d96d7(0xc9)](_0x2e810d),checkQueueTimeout(_0x2e810d);}}),updateQueueDisplay(_0x3c8953);},_0x10a547=>{console['error']('Error\x20in\x20queue\x20listener:',_0x10a547);});window[a47_0x36a798(0xc3)](a47_0x36a798(0xcf),()=>{unsubscribe();});