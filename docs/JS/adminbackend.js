const a0_0x350bb1=a0_0x531a;(function(_0x7b839c,_0x1186f3){const _0xd4c707=a0_0x531a,_0x34d157=_0x7b839c();while(!![]){try{const _0x306452=-parseInt(_0xd4c707(0x3cb))/0x1*(-parseInt(_0xd4c707(0x206))/0x2)+parseInt(_0xd4c707(0x2f4))/0x3*(-parseInt(_0xd4c707(0x1c5))/0x4)+parseInt(_0xd4c707(0x183))/0x5*(-parseInt(_0xd4c707(0x17b))/0x6)+parseInt(_0xd4c707(0x38f))/0x7*(parseInt(_0xd4c707(0x240))/0x8)+parseInt(_0xd4c707(0x27f))/0x9*(-parseInt(_0xd4c707(0x2c1))/0xa)+-parseInt(_0xd4c707(0x377))/0xb*(-parseInt(_0xd4c707(0x285))/0xc)+-parseInt(_0xd4c707(0x17f))/0xd*(-parseInt(_0xd4c707(0x27b))/0xe);if(_0x306452===_0x1186f3)break;else _0x34d157['push'](_0x34d157['shift']());}catch(_0x2088c2){_0x34d157['push'](_0x34d157['shift']());}}}(a0_0x16d7,0xaee01));const a0_0x25fc88=(function(){let _0x245ea3=!![];return function(_0x152776,_0x2ce03e){const _0x3cae5e=_0x245ea3?function(){if(_0x2ce03e){const _0x410fc2=_0x2ce03e['apply'](_0x152776,arguments);return _0x2ce03e=null,_0x410fc2;}}:function(){};return _0x245ea3=![],_0x3cae5e;};}()),a0_0x46d84d=a0_0x25fc88(this,function(){const _0x138fd7=a0_0x531a,_0x443f0d=function(){const _0x40c2ca=a0_0x531a;let _0x1a2ff3;try{_0x1a2ff3=Function(_0x40c2ca(0x2f9)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3d8b69){_0x1a2ff3=window;}return _0x1a2ff3;},_0x203e5f=_0x443f0d(),_0x337ffb=_0x203e5f['console']=_0x203e5f['console']||{},_0x39e605=['log','warn','info','error','exception','table','trace'];for(let _0x407c7d=0x0;_0x407c7d<_0x39e605['length'];_0x407c7d++){const _0x588bee=a0_0x25fc88['constructor'][_0x138fd7(0x338)]['bind'](a0_0x25fc88),_0x504995=_0x39e605[_0x407c7d],_0x3c4b5e=_0x337ffb[_0x504995]||_0x588bee;_0x588bee['__proto__']=a0_0x25fc88['bind'](a0_0x25fc88),_0x588bee['toString']=_0x3c4b5e['toString']['bind'](_0x3c4b5e),_0x337ffb[_0x504995]=_0x588bee;}});a0_0x46d84d();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x590021){const _0xe028d8=a0_0x531a;if(!_0x590021)return _0xe028d8(0x207);_0x590021=_0x590021[_0xe028d8(0x21e)]('#','');_0x590021[_0xe028d8(0x36e)]===0x3&&(_0x590021=_0x590021[_0xe028d8(0x25f)]('')[_0xe028d8(0x3c5)](_0x1066ce=>_0x1066ce+_0x1066ce)['join'](''));if(_0x590021[_0xe028d8(0x36e)]!==0x6)return'#ffffff';const _0x1f229c=parseInt(_0x590021[_0xe028d8(0x1f6)](0x0,0x2),0x10),_0xb1f383=parseInt(_0x590021['substring'](0x2,0x4),0x10),_0x36ded1=parseInt(_0x590021['substring'](0x4,0x6),0x10),_0x434ce9=(_0x1f229c*0x12b+_0xb1f383*0x24b+_0x36ded1*0x72)/0x3e8;return _0x434ce9>=0x80?'#000000':_0xe028d8(0x207);}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x4e1203=>{const _0x1cc5fa=a0_0x531a;if(!_0x4e1203){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x5a8206){console[_0x1cc5fa(0x381)](_0x1cc5fa(0x256),_0x5a8206),showNotification('Error\x20setting\x20up\x20admin\x20dashboard',_0x1cc5fa(0x381));}});});async function getUserTabPermissions(_0x37f1a3){const _0x473b6a=a0_0x531a;if(!_0x37f1a3)return['dashboard'];console['log'](_0x473b6a(0x216)+_0x37f1a3+'\x20in\x20all\x20collections...');const _0x220127=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':_0x473b6a(0x307),'displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':_0x473b6a(0x1c1)}],_0x537226=auth[_0x473b6a(0x340)];let _0x1980e4=null,_0x379b41=null;for(const _0x105205 of _0x220127){try{if(_0x537226){const _0xdd88a1=doc(db,_0x105205['name'],_0x537226['uid']),_0x511ce7=await getDoc(_0xdd88a1);if(_0x511ce7[_0x473b6a(0x225)]()){const _0x4ca9ff=_0x511ce7[_0x473b6a(0x34e)]();console['log'](_0x473b6a(0x389)+_0x105205['displayName']+'\x20by\x20UID:',_0x4ca9ff);const _0x124a91=(_0x4ca9ff['roleName']||_0x4ca9ff['role']||'')['toLowerCase']();if(_0x124a91&&_0x124a91!=='none'){_0x1980e4=_0x124a91,_0x379b41=_0x105205['displayName'],console[_0x473b6a(0x160)]('Found\x20specific\x20role:\x20'+_0x1980e4+'\x20in\x20'+_0x379b41);break;}}}if(!_0x1980e4){const _0x4d7301=collection(db,_0x105205['name']),_0x5113ef=query(_0x4d7301,where(_0x473b6a(0x2fa),'==',_0x37f1a3)),_0x56be0f=await getDocs(_0x5113ef);if(!_0x56be0f[_0x473b6a(0x179)]){const _0x463d30=_0x56be0f['docs'][0x0][_0x473b6a(0x34e)]();console['log']('Found\x20user\x20in\x20'+_0x105205['displayName']+'\x20with\x20email\x20'+_0x37f1a3+':',_0x463d30);const _0x3d47c2=(_0x463d30['roleName']||_0x463d30['role']||'')['toLowerCase']();if(_0x3d47c2&&_0x3d47c2!=='none'){_0x1980e4=_0x3d47c2,_0x379b41=_0x105205[_0x473b6a(0x368)],console['log']('Found\x20specific\x20role:\x20'+_0x1980e4+_0x473b6a(0x25a)+_0x379b41);break;}}}}catch(_0x14bd4c){console['error']('Error\x20checking\x20'+_0x105205['displayName']+':',_0x14bd4c);}}if(_0x1980e4){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x1980e4+_0x473b6a(0x2ae)+_0x379b41+')');const _0x1bdb08={'admin':['dashboard',_0x473b6a(0x246),'manage-matches',_0x473b6a(0x198),'manage-trophies','manage-ranks',_0x473b6a(0x20d),_0x473b6a(0x328),'manage-trophies','elo-history','manage-highlights',_0x473b6a(0x276),'manage-matches','manage-points','manage-levels-ribbons',_0x473b6a(0x3ac)],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players',_0x473b6a(0x328),'manage-trophies',_0x473b6a(0x1c8),'manage-highlights','user-roles-section','manage-matches',_0x473b6a(0x3a0),'manage-levels-ribbons',_0x473b6a(0x3ac)],'council':['dashboard',_0x473b6a(0x246),_0x473b6a(0x29a)],'creative\x20lead':['dashboard','manage-articles',_0x473b6a(0x243),'elo-history','manage-highlights']};if(_0x1bdb08[_0x1980e4])return console['log']('Role\x20\x27'+_0x1980e4+'\x27\x20has\x20permissions:',_0x1bdb08[_0x1980e4]),_0x1bdb08[_0x1980e4];}return console[_0x473b6a(0x160)](_0x473b6a(0x2fd)+_0x37f1a3+_0x473b6a(0x230)),['dashboard'];}function setupSidebarNavigation(_0x432161=[]){const _0x225bb9=a0_0x531a,_0x3ae2a5=document[_0x225bb9(0x31e)]('.sidebar-nav\x20.nav-item'),_0x24afe3=document['querySelectorAll'](_0x225bb9(0x316));(!_0x432161||_0x432161['length']===0x0)&&(_0x432161=[_0x225bb9(0x2d5)]);_0x3ae2a5[_0x225bb9(0x3ab)](_0x1d56cb=>{const _0x2b0740=_0x225bb9,_0x3efe31=_0x1d56cb[_0x2b0740(0x1d4)]('data-section');_0x432161[_0x2b0740(0x278)](_0x3efe31)?_0x1d56cb['style'][_0x2b0740(0x1b5)]=_0x2b0740(0x371):_0x1d56cb[_0x2b0740(0x202)][_0x2b0740(0x1b5)]=_0x2b0740(0x19d),_0x1d56cb['addEventListener'](_0x2b0740(0x3a3),()=>{const _0x10805c=_0x2b0740,_0x2cab07=_0x1d56cb[_0x10805c(0x1d4)](_0x10805c(0x1be));if(!_0x432161['includes'](_0x2cab07)){showNotification(_0x10805c(0x2a2),'error');return;}_0x3ae2a5['forEach'](_0x508989=>_0x508989[_0x10805c(0x382)][_0x10805c(0x319)]('active')),_0x1d56cb['classList'][_0x10805c(0x1b7)](_0x10805c(0x2ab)),_0x24afe3[_0x10805c(0x3ab)](_0x3ed88c=>{_0x3ed88c['style']['display']='none';});const _0x54c28f=document[_0x10805c(0x345)](_0x2cab07);_0x54c28f&&(_0x54c28f['style']['display']='block',console['log']('Switched\x20to\x20'+_0x2cab07+'\x20section'));});});const _0x5f28d9=document['querySelector'](_0x225bb9(0x291)+_0x432161[0x0]+'\x22]');_0x5f28d9&&_0x5f28d9['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x1ca79c=a0_0x531a,_0x2ec68e=document['querySelectorAll'](_0x1ca79c(0x38c));let _0x3c2735=null,_0xf48761=new Set();_0x2ec68e[_0x1ca79c(0x3ab)](_0x3a84d3=>{const _0xbe9d16=_0x1ca79c;_0x3a84d3['addEventListener'](_0xbe9d16(0x3a3),function(){const _0x5ad7b3=_0xbe9d16,_0x3389ba=this[_0x5ad7b3(0x1d4)]('data-section');if(_0x3389ba===_0x3c2735)return;_0x3c2735&&(document['getElementById'](_0x3c2735)[_0x5ad7b3(0x202)]['display']='none',_0x2ec68e['forEach'](_0x474372=>_0x474372['classList']['remove']('active'))),document['getElementById'](_0x3389ba)[_0x5ad7b3(0x202)]['display']='block',this['classList']['add']('active'),_0x3c2735=_0x3389ba;});});}function loadSectionData(_0x5234db){return;}async function initializeAdminDashboard(){const _0x7abdbb=a0_0x531a;try{const _0x5e5d96=auth['currentUser'],_0x18ebb5=await getUserTabPermissions(_0x5e5d96['email']);console['log']('User\x20'+_0x5e5d96['email']+'\x20allowed\x20tabs:',_0x18ebb5),window['userAllowedTabs']=_0x18ebb5,setupSidebarNavigation(_0x18ebb5),setupLadderSelector(),setupDashboardSection(),_0x18ebb5['includes']('manage-players')&&setupManagePlayersSection(),_0x18ebb5[_0x7abdbb(0x278)](_0x7abdbb(0x1c8))&&setupEloHistorySection(),_0x18ebb5['includes'](_0x7abdbb(0x2a1))&&setupRankControls(),_0x18ebb5[_0x7abdbb(0x278)]('manage-articles')&&setupManageArticlesSection(),_0x18ebb5['includes']('user-roles-section')&&setupUserRolesSection(),_0x18ebb5['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x18ebb5['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x18ebb5['includes']('inactive-players')&&setupInactivePlayersSection(),_0x18ebb5['includes']('manage-matches')&&setupManageMatchesSection(),_0x18ebb5[_0x7abdbb(0x278)]('manage-points')&&setupManagePointsSection(),_0x18ebb5[_0x7abdbb(0x278)]('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x18ebb5);}catch(_0x59881a){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x59881a);}}function setupDataLoadButtons(_0x512420=[]){const _0x2a11ca=a0_0x531a;(!_0x512420||_0x512420['length']===0x0)&&(_0x512420=['dashboard']);const _0x365bb5=document[_0x2a11ca(0x345)]('load-dashboard-data');_0x365bb5&&_0x365bb5['addEventListener']('click',function(){const _0x1ff823=_0x2a11ca;this['classList'][_0x1ff823(0x1b7)](_0x1ff823(0x304)),this[_0x1ff823(0x1e7)]=_0x1ff823(0x2ee),loadDashboardOverview()['then'](()=>{const _0x19886d=_0x1ff823;this['classList'][_0x19886d(0x319)](_0x19886d(0x304)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0xe492a4=>{const _0x37c48b=_0x1ff823;console['error']('Error\x20loading\x20dashboard:',_0xe492a4),this['classList'][_0x37c48b(0x319)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x407c40=_0x37c48b;this[_0x407c40(0x1e7)]=_0x407c40(0x387);},0xbb8);});});if(_0x512420['includes']('manage-trophies')){const _0x976a5f=document[_0x2a11ca(0x345)]('load-trophies-data');_0x976a5f&&_0x976a5f['addEventListener'](_0x2a11ca(0x3a3),function(){const _0x20e183=_0x2a11ca;console['log']('Load\x20trophies\x20data\x20clicked'),this['classList'][_0x20e183(0x1b7)]('loading'),this[_0x20e183(0x1e7)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x534c2b=_0x20e183;this['classList']['remove'](_0x534c2b(0x304)),this[_0x534c2b(0x1e7)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0xa914e3=>{const _0x2f2829=_0x20e183;console[_0x2f2829(0x381)]('Error\x20loading\x20trophies:',_0xa914e3),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x24266d=_0x2f2829;this['innerHTML']=_0x24266d(0x1d2);},0xbb8);});});}if(_0x512420['includes']('manage-players')){const _0x2a04b8=document['getElementById']('load-players-data');_0x2a04b8&&_0x2a04b8['addEventListener']('click',function(){const _0x325564=_0x2a11ca;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add'](_0x325564(0x304)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x325564(0x1a5)](()=>{const _0x1445e5=_0x325564;this['classList']['remove']('loading'),this[_0x1445e5(0x1e7)]=_0x1445e5(0x242);})['catch'](_0x1ef3a1=>{const _0x3bdd27=_0x325564;console['error']('Error\x20loading\x20players:',_0x1ef3a1),this[_0x3bdd27(0x382)]['remove'](_0x3bdd27(0x304)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x512420['includes'](_0x2a11ca(0x1c8))){const _0x429a38=document['getElementById'](_0x2a11ca(0x196));_0x429a38&&_0x429a38['addEventListener'](_0x2a11ca(0x3a3),function(){console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x3e1323=a0_0x531a;this['classList']['remove']('loading'),this[_0x3e1323(0x1e7)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x3de82b=>{const _0x592664=a0_0x531a;console['error']('Error\x20loading\x20history:',_0x3de82b),this['classList'][_0x592664(0x319)](_0x592664(0x304)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x512420['includes']('manage-articles')){const _0x1cb2d9=document['getElementById'](_0x2a11ca(0x317));_0x1cb2d9&&_0x1cb2d9[_0x2a11ca(0x1ec)](_0x2a11ca(0x3a3),function(){const _0x298417=_0x2a11ca;console[_0x298417(0x160)]('Load\x20articles\x20data\x20clicked'),this['classList']['add'](_0x298417(0x304)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x4981be=_0x298417;this['classList']['remove'](_0x4981be(0x304)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x36287c=>{const _0x1b23c1=_0x298417;console['error'](_0x1b23c1(0x333),_0x36287c),this[_0x1b23c1(0x382)][_0x1b23c1(0x319)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1d0867=_0x1b23c1;this[_0x1d0867(0x1e7)]=_0x1d0867(0x37d);},0xbb8);});});}if(_0x512420['includes']('user-roles-section')){const _0x41e487=document['getElementById']('load-users-data');_0x41e487&&_0x41e487['addEventListener']('click',function(){const _0x213405=_0x2a11ca;console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x213405(0x1a5)](()=>{const _0x1694e1=_0x213405;this['classList'][_0x1694e1(0x319)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x5aea26=>{const _0x4d3e81=_0x213405;console['error']('Error\x20loading\x20users:',_0x5aea26),this[_0x4d3e81(0x382)]['remove']('loading'),this[_0x4d3e81(0x1e7)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x512420['includes']('inactive-players')){const _0x52ba68=document['getElementById'](_0x2a11ca(0x186));_0x52ba68&&_0x52ba68['addEventListener']('click',function(){const _0x589fee=_0x2a11ca;console['log'](_0x589fee(0x18b)),this['classList']['add'](_0x589fee(0x304)),this['innerHTML']=_0x589fee(0x2ee),loadInactivePlayersData()[_0x589fee(0x1a5)](()=>{const _0x266a4e=_0x589fee;this['classList'][_0x266a4e(0x319)]('loading'),this['innerHTML']=_0x266a4e(0x36b);})['catch'](_0x269a23=>{const _0x55e545=_0x589fee;console[_0x55e545(0x381)]('Error\x20loading\x20inactive\x20players:',_0x269a23),this[_0x55e545(0x382)]['remove'](_0x55e545(0x304)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x512420['includes']('manage-highlights')){const _0x15f167=document['getElementById']('load-highlights-data');_0x15f167&&_0x15f167['addEventListener']('click',function(){const _0x4bcfe7=_0x2a11ca;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x4bcfe7(0x1e7)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x4bcfe7(0x1a5)](()=>{const _0x2a295a=_0x4bcfe7;this['classList']['remove'](_0x2a295a(0x304)),this[_0x2a295a(0x1e7)]=_0x2a295a(0x38d);})[_0x4bcfe7(0x1ff)](_0x4a222e=>{const _0x49be12=_0x4bcfe7;console['error']('Error\x20loading\x20highlights:',_0x4a222e),this['classList']['remove']('loading'),this[_0x49be12(0x1e7)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x48dae2=_0x49be12;this['innerHTML']=_0x48dae2(0x38d);},0xbb8);});});}if(_0x512420[_0x2a11ca(0x278)]('manage-matches')){const _0x477ce9=document['getElementById']('load-matches-data');_0x477ce9&&_0x477ce9[_0x2a11ca(0x1ec)]('click',function(){const _0x303db5=_0x2a11ca;console['log']('Load\x20matches\x20data\x20clicked'),this['classList'][_0x303db5(0x1b7)]('loading'),this['innerHTML']=_0x303db5(0x2ee),loadMatchesData(0x1)['then'](()=>{const _0x2ba0fb=_0x303db5;this[_0x2ba0fb(0x382)]['remove']('loading'),this[_0x2ba0fb(0x1e7)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x2b6366=>{const _0x17ea3e=_0x303db5;console['error']('Error\x20loading\x20matches:',_0x2b6366),this[_0x17ea3e(0x382)]['remove']('loading'),this[_0x17ea3e(0x1e7)]=_0x17ea3e(0x38e),setTimeout(()=>{const _0xca41bf=_0x17ea3e;this['innerHTML']=_0xca41bf(0x1cb);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x512420['includes']('manage-ribbons')){const _0x19f276=document['getElementById'](_0x2a11ca(0x288));_0x19f276&&_0x19f276['addEventListener']('click',function(){const _0x2c4568=_0x2a11ca;console[_0x2c4568(0x160)](_0x2c4568(0x237)),this[_0x2c4568(0x382)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()[_0x2c4568(0x1a5)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x490f10=>{console['error']('Error\x20loading\x20ribbons:',_0x490f10),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log'](_0x2a11ca(0x217));}function setupDashboardSection(){const _0x33195c=a0_0x531a;document[_0x33195c(0x345)]('player-count')['textContent']='-',document['getElementById']('match-count')[_0x33195c(0x1e2)]='-',document['getElementById'](_0x33195c(0x1f1))['textContent']='-',document[_0x33195c(0x345)](_0x33195c(0x177))[_0x33195c(0x1e2)]='-';}function setupLadderSelector(){const _0x5acaa9=a0_0x531a,_0xbdea9d=document['querySelectorAll']('.ladder-switch\x20input');_0xbdea9d['forEach'](_0x1c8e60=>{const _0x4d867a=a0_0x531a;_0x1c8e60['addEventListener'](_0x4d867a(0x395),()=>{const _0xac7142=_0x4d867a;currentLadder=_0x1c8e60['value'],document['body']['setAttribute']('data-ladder',currentLadder);const _0x248eb1=document['getElementById']('current-ladder-display');_0x248eb1&&(_0x248eb1[_0xac7142(0x1e2)]=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0xac7142(0x345)]('rejected-count')['textContent']='-',charts[_0xac7142(0x2c3)]&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts[_0xac7142(0x2f8)]['destroy'](),charts[_0xac7142(0x2f8)]=null),showNotification(_0xac7142(0x376)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0xac7142(0x2a5));});});const _0x3ee238=document[_0x5acaa9(0x345)]('current-ladder-display');_0x3ee238&&(_0x3ee238['textContent']=currentLadder);}async function loadDashboardOverview(){const _0xe90d69=a0_0x531a;try{console['log'](_0xe90d69(0x168)),document['getElementById'](_0xe90d69(0x21c))['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0xe90d69(0x1f1))['textContent']='-',document['getElementById']('rejected-count')[_0xe90d69(0x1e2)]='-';const _0x52a657=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x52bf50=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0xe90d69(0x3b6),_0x2cb1d3=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x55db85=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0xe90d69(0x289):_0xe90d69(0x351);console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x52a657+',\x20'+_0x52bf50);const _0x2d1df7=await getDocs(collection(db,_0x52a657)),_0x43e754=_0x2d1df7['size'],_0xe4bff5=await getDocs(collection(db,_0x52bf50)),_0x539393=_0xe4bff5['size'],_0x2d0695=await getDocs(collection(db,_0x2cb1d3)),_0x4904b6=_0x2d0695['size'],_0x51fb2c=await getDocs(collection(db,_0x55db85)),_0x3f68e4=_0x51fb2c[_0xe90d69(0x390)];return document['getElementById'](_0xe90d69(0x21c))['textContent']=_0x43e754,document[_0xe90d69(0x345)](_0xe90d69(0x37a))[_0xe90d69(0x1e2)]=_0x539393,document[_0xe90d69(0x345)]('pending-count')['textContent']=_0x4904b6,document[_0xe90d69(0x345)]('rejected-count')[_0xe90d69(0x1e2)]=_0x3f68e4,await createRankDistributionChart(),await createActivityChart(),console[_0xe90d69(0x160)](_0xe90d69(0x272)),!![];}catch(_0x1ce90e){console['error'](_0xe90d69(0x292),_0x1ce90e);throw _0x1ce90e;}}async function createRankDistributionChart(){const _0x905b77=a0_0x531a;try{const _0x2bcb29=collection(db,currentLadder==='D1'?'players':_0x905b77(0x2a0)),_0x5bd0cc=await getDocs(_0x2bcb29),_0x2fa1bd={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x5bd0cc['forEach'](_0x39cadc=>{const _0x39c95f=_0x39cadc['data'](),_0x46e85c=_0x39c95f['eloRating']||0x4b0;if(_0x46e85c>=0x7d0)_0x2fa1bd['Emerald']++;else{if(_0x46e85c>=0x708)_0x2fa1bd['Gold']++;else{if(_0x46e85c>=0x640)_0x2fa1bd['Silver']++;else{if(_0x46e85c>=0x578)_0x2fa1bd['Bronze']++;else _0x2fa1bd['Unranked']++;}}}});const _0x3f384c=document['getElementById']('rank-distribution-chart');charts[_0x905b77(0x2c3)]&&charts[_0x905b77(0x2c3)]['destroy'](),charts['rankDistribution']=new Chart(_0x3f384c,{'type':'doughnut','data':{'labels':Object['keys'](_0x2fa1bd),'datasets':[{'data':Object['values'](_0x2fa1bd),'backgroundColor':['#808080',_0x905b77(0x363),'#C0C0C0',_0x905b77(0x384),_0x905b77(0x1a6)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x905b77(0x374),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x40b6f8){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x40b6f8),document['getElementById'](_0x905b77(0x354))[_0x905b77(0x1e7)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x9179e1=a0_0x531a;try{const _0x4c0a2e=currentLadder==='D1'?_0x9179e1(0x2dc):_0x9179e1(0x2ad),_0x361d89=collection(db,_0x4c0a2e),_0x13745f=new Date();_0x13745f['setDate'](_0x13745f['getDate']()-0x7);const _0x52149d=query(_0x361d89,where('approvedAt','>=',_0x13745f),orderBy('approvedAt','asc')),_0x52508d=await getDocs(_0x52149d),_0xce9b2e=['Sunday','Monday','Tuesday',_0x9179e1(0x286),'Thursday','Friday',_0x9179e1(0x38b)],_0x4beb7c=_0xce9b2e['reduce']((_0x516779,_0x4871a5)=>({..._0x516779,[_0x4871a5]:0x0}),{});_0x52508d['forEach'](_0x4a9447=>{const _0x5749cd=_0x9179e1,_0x53d8d4=_0x4a9447['data']();if(_0x53d8d4['approvedAt']){const _0x286937=_0xce9b2e[new Date(_0x53d8d4[_0x5749cd(0x396)]['seconds']*0x3e8)['getDay']()];_0x4beb7c[_0x286937]++;}});const _0x522154=document['getElementById']('activity-chart');charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x522154,{'type':'bar','data':{'labels':_0xce9b2e,'datasets':[{'label':_0x9179e1(0x1fc),'data':_0xce9b2e['map'](_0x4697e0=>_0x4beb7c[_0x4697e0]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0x9179e1(0x2eb):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x9179e1(0x392)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x647444){console['error']('Error\x20creating\x20activity\x20chart:',_0x647444),document['getElementById']('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0xdedde2=a0_0x531a,_0xf5759b=document['getElementById']('players-table-body');if(!_0xf5759b)return;_0xf5759b['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x5dd7ad=_0xdedde2(0x1ea);if(currentLadder==='D2')_0x5dd7ad=_0xdedde2(0x2a0);else currentLadder==='D3'&&(_0x5dd7ad=_0xdedde2(0x307));console['log']('Loading\x20players\x20from\x20'+_0x5dd7ad+'\x20collection...');const _0x40c978=collection(db,_0x5dd7ad),_0x346735=query(_0x40c978,orderBy(_0xdedde2(0x33a),_0xdedde2(0x232))),_0x59b2d8=await getDocs(_0x346735);if(_0x59b2d8['empty']){_0xf5759b['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0xf5759b[_0xdedde2(0x1e7)]='';let _0x518b3e=0x1;_0x59b2d8['forEach'](_0x438a81=>{const _0x31bb64=_0xdedde2,_0x1313f7=_0x438a81['data'](),_0x17f39d=getRankFromElo(_0x1313f7['eloRating']||0x4b0),_0x218f2a=getRankStyle(_0x1313f7['eloRating']||0x4b0),_0x576799=document[_0x31bb64(0x366)]('tr');_0x576799[_0x31bb64(0x1e7)]=_0x31bb64(0x299)+_0x518b3e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x218f2a[_0x31bb64(0x281)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1313f7['username']||_0x31bb64(0x1c6))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x1313f7['eloRating']||0x4b0)+_0x31bb64(0x3b5)+_0x218f2a['color']+_0x31bb64(0x235)+_0x17f39d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1313f7['wins']||0x0)+'W\x20/\x20'+(_0x1313f7[_0x31bb64(0x312)]||0x0)+_0x31bb64(0x2e3)+_0x438a81['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x438a81['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xf5759b['appendChild'](_0x576799),_0x518b3e++;}),setupPlayerActionButtons();}catch(_0x27cc69){console['error'](_0xdedde2(0x163),_0x27cc69),_0xf5759b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x27cc69[_0xdedde2(0x2fb)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x147d01){const _0x25d7b2=a0_0x531a;if(_0x147d01>=0x7d0)return'Emerald';if(_0x147d01>=0x708)return'Gold';if(_0x147d01>=0x640)return'Silver';if(_0x147d01>=0x578)return'Bronze';return _0x25d7b2(0x3c4);}function setupPlayerActionButtons(){const _0x94b6e9=a0_0x531a;document['querySelectorAll']('.edit-btn')[_0x94b6e9(0x3ab)](_0x4f5e75=>{const _0x2a3898=_0x94b6e9;_0x4f5e75[_0x2a3898(0x1ec)]('click',async _0x4e3f67=>{const _0x2689ba=_0x2a3898,_0x3be457=_0x4e3f67[_0x2689ba(0x318)][_0x2689ba(0x306)]['id'];openEditPlayerModal(_0x3be457);});}),document[_0x94b6e9(0x31e)]('.delete-btn')['forEach'](_0x22feb7=>{_0x22feb7['addEventListener']('click',async _0xf6093d=>{const _0x42f532=a0_0x531a,_0x186e49=_0xf6093d[_0x42f532(0x318)]['dataset']['id'];confirmDeletePlayer(_0x186e49);});});}async function openEditPlayerModal(_0x57c814){const _0x1c4086=a0_0x531a;try{const _0x5bb337=currentLadder==='D1'?'players':'playersD2',_0x15d35a=doc(db,_0x5bb337,_0x57c814),_0x5838ae=await getDoc(_0x15d35a);if(!_0x5838ae['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x54f1b=_0x5838ae['data'](),_0x2b0942=document['getElementById']('edit-player-modal'),_0x588e6b=document['getElementById'](_0x1c4086(0x1e3)),_0x26a80c=document['getElementById'](_0x1c4086(0x358)),_0x4b91b0=document['getElementById']('edit-wins'),_0x10192f=document['getElementById']('edit-losses');_0x588e6b[_0x1c4086(0x180)]=_0x54f1b['username']||'',_0x26a80c['value']=_0x54f1b['eloRating']||0x4b0,_0x4b91b0[_0x1c4086(0x180)]=_0x54f1b['wins']||0x0,_0x10192f['value']=_0x54f1b['losses']||0x0,_0x2b0942['dataset']['playerId']=_0x57c814,_0x2b0942[_0x1c4086(0x382)]['add']('active');}catch(_0xe963cc){console['error']('Error\x20opening\x20edit\x20modal:',_0xe963cc),showNotification('Failed\x20to\x20load\x20player\x20data',_0x1c4086(0x381));}}async function saveEditedPlayer(){const _0x11828e=a0_0x531a;try{const _0x6549ba=document['getElementById']('edit-player-modal'),_0x47e20b=_0x6549ba[_0x11828e(0x306)]['playerId'];if(!_0x47e20b){showNotification('No\x20player\x20selected','error');return;}const _0x1b2fbe=document['getElementById'](_0x11828e(0x1e3)),_0x509bdd=document['getElementById']('edit-elo'),_0x7db3fb=document[_0x11828e(0x345)]('edit-wins'),_0x39769d=document[_0x11828e(0x345)](_0x11828e(0x1ab)),_0x1699aa=_0x1b2fbe['value']['trim'](),_0x360d61=parseInt(_0x509bdd['value']),_0x32811=parseInt(_0x7db3fb[_0x11828e(0x180)]),_0x5e1ae2=parseInt(_0x39769d['value']);if(!_0x1699aa||isNaN(_0x360d61)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x2f2551=currentLadder==='D1'?'players':_0x11828e(0x2a0),_0x11d1d8=doc(db,_0x2f2551,_0x47e20b),_0x40a8bd=await getDoc(_0x11d1d8),_0x55b360=_0x40a8bd['exists']()?_0x40a8bd[_0x11828e(0x34e)]():{},_0x5ed6b7=_0x55b360['eloRating']||0x4b0;await updateDoc(_0x11d1d8,{'username':_0x1699aa,'eloRating':_0x360d61,'wins':_0x32811||0x0,'losses':_0x5e1ae2||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x11828e(0x2fa)]});if(_0x360d61!==_0x5ed6b7){const _0x5d4a70=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x5d4a70),{'player':_0x1699aa,'previousElo':_0x5ed6b7,'newElo':_0x360d61,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x11828e(0x224),'success');}catch(_0x144339){console['error']('Error\x20updating\x20player:',_0x144339),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x144339['message'],_0x11828e(0x381));}}function closeEditPlayerModal(){const _0x254d0c=a0_0x531a,_0x4f8d82=document['getElementById']('edit-player-modal');_0x4f8d82['classList']['remove']('active'),_0x4f8d82[_0x254d0c(0x306)]['playerId']='';}async function confirmDeletePlayer(_0x39a664){const _0x10e7d6=a0_0x531a;if(confirm(_0x10e7d6(0x3b0)))try{const _0x67b060=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x67b060,_0x39a664)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0xd6e679){console[_0x10e7d6(0x381)]('Error\x20deleting\x20player:',_0xd6e679),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0xd6e679[_0x10e7d6(0x2fb)],'error');}}async function setupManagePlayersSection(){const _0x5f12a1=a0_0x531a,_0x2d15e3=document['getElementById']('add-player-form');_0x2d15e3&&_0x2d15e3[_0x5f12a1(0x1ec)]('submit',async _0x2b64ba=>{const _0x42bd55=_0x5f12a1;_0x2b64ba[_0x42bd55(0x2e6)](),await addNewPlayer();});const _0x5529d3=document['getElementById']('player-search');_0x5529d3&&_0x5529d3[_0x5f12a1(0x1ec)]('input',debounce(filterPlayerTable,0x12c));const _0x4db7f1=document['getElementById'](_0x5f12a1(0x2ff));_0x4db7f1&&_0x4db7f1[_0x5f12a1(0x1ec)]('click',saveEditedPlayer);const _0x184995=document[_0x5f12a1(0x345)]('cancel-edit-btn');_0x184995&&_0x184995['addEventListener'](_0x5f12a1(0x3a3),closeEditPlayerModal);const _0x4be6fa=document[_0x5f12a1(0x345)]('edit-player-modal');_0x4be6fa&&_0x4be6fa[_0x5f12a1(0x1ec)]('click',_0x19e5f0=>{_0x19e5f0['target']===_0x4be6fa&&closeEditPlayerModal();});const _0x4a2a95=document['getElementById']('players-ladder-selector');_0x4a2a95&&_0x4a2a95[_0x5f12a1(0x1ec)]('change',()=>{const _0x282930=_0x5f12a1;currentLadder=_0x4a2a95[_0x282930(0x180)],loadPlayersData();});}async function addNewPlayer(){const _0x34e710=a0_0x531a;try{const _0x325639=document['getElementById'](_0x34e710(0x34c)),_0x58f845=document[_0x34e710(0x345)]('new-player-elo'),_0x5c4370=_0x325639['value']['trim'](),_0x67dcdf=parseInt(_0x58f845[_0x34e710(0x180)])||0x4b0;if(!_0x5c4370){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0x5c4370+'\x20with\x20ELO\x20'+_0x67dcdf+'\x20to\x20'+currentLadder+'\x20ladder');let _0x4cb8a4='players',_0x2abcab='eloHistory';if(currentLadder==='D2')_0x4cb8a4='playersD2',_0x2abcab='eloHistoryD2';else currentLadder==='D3'&&(_0x4cb8a4='playersD3',_0x2abcab=_0x34e710(0x24c));const _0x4b09e7=query(collection(db,_0x4cb8a4),where('username','==',_0x5c4370)),_0xdf5b9f=await getDocs(_0x4b09e7);if(!_0xdf5b9f['empty']){alert('Username\x20'+_0x5c4370+_0x34e710(0x34f)+currentLadder+'\x20ladder');return;}const _0x75eba5=auth[_0x34e710(0x340)],_0x13d9c1={'username':_0x5c4370,'eloRating':_0x67dcdf,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x75eba5?_0x75eba5[_0x34e710(0x2fa)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x4cb8a4),_0x13d9c1),await addDoc(collection(db,_0x2abcab),{'player':_0x5c4370,'previousElo':0x4b0,'newElo':_0x67dcdf,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x75eba5?_0x75eba5['email']:'admin','gameMode':currentLadder}),_0x325639[_0x34e710(0x180)]='',_0x58f845['value']='1200',alert('Player\x20'+_0x5c4370+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x34e710(0x3c8)),loadPlayersData();}catch(_0x2cc50e){console['error']('Error\x20adding\x20player:',_0x2cc50e),alert('Error\x20adding\x20player:\x20'+_0x2cc50e['message']);}}document[a0_0x350bb1(0x1ec)](a0_0x350bb1(0x3b4),()=>{const _0x1a2463=a0_0x350bb1,_0x96a9e=document[_0x1a2463(0x345)]('add-player-form');_0x96a9e&&_0x96a9e['addEventListener']('submit',_0x1168a9=>{_0x1168a9['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0xdf34ed=a0_0x350bb1,_0x402a08=document['getElementById']('player-search')[_0xdf34ed(0x180)]['toLowerCase'](),_0x33f7cc=document[_0xdf34ed(0x31e)]('#players-table-body\x20tr');let _0x1d076d=0x0;_0x33f7cc['forEach'](_0x5b719c=>{const _0x265c06=_0xdf34ed,_0x1d11c3=_0x5b719c['querySelector'](_0x265c06(0x245))?.['textContent'][_0x265c06(0x2de)]()||'';_0x1d11c3['includes'](_0x402a08)?(_0x5b719c['style']['display']='',_0x1d076d++):_0x5b719c[_0x265c06(0x202)]['display']=_0x265c06(0x19d);});const _0x2b5d54=document[_0xdf34ed(0x345)](_0xdf34ed(0x2d8));_0x2b5d54&&(_0x1d076d===0x0&&_0x402a08!==''?_0x2b5d54['style']['display']='block':_0x2b5d54['style'][_0xdf34ed(0x1b5)]='none');}function debounce(_0x164ce0,_0x4f36ad){let _0x480c59;return function(..._0xa4b909){clearTimeout(_0x480c59),_0x480c59=setTimeout(()=>_0x164ce0['apply'](this,_0xa4b909),_0x4f36ad);};}async function loadEloHistory(_0x1c51fc=0x1){const _0x22d8e2=a0_0x350bb1,_0x1f9278=document['getElementById']('elo-history-table-body'),_0x3543bc=currentLadder['toLowerCase']();if(!_0x1f9278)return;_0x1f9278['innerHTML']=_0x22d8e2(0x1e1);try{const _0x3b0ed2=currentLadder==='D1'?_0x22d8e2(0x2d6):currentLadder==='D2'?_0x22d8e2(0x30b):'eloHistoryD3',_0x28b2eb=collection(db,_0x3b0ed2);let _0x47abe1;if(_0x1c51fc>eloHistoryPagination[_0x3543bc]['page']&&eloHistoryPagination[_0x3543bc]['lastVisible'])_0x47abe1=query(_0x28b2eb,orderBy(_0x22d8e2(0x36c),'desc'),startAfter(eloHistoryPagination[_0x3543bc]['lastVisible']),limit(PAGE_SIZE));else _0x1c51fc<eloHistoryPagination[_0x3543bc]['page']&&eloHistoryPagination[_0x3543bc][_0x22d8e2(0x282)]?_0x47abe1=query(_0x28b2eb,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x3543bc]['firstVisible']),limitToLast(PAGE_SIZE)):_0x47abe1=query(_0x28b2eb,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x388021=await getDocs(_0x47abe1);if(_0x388021[_0x22d8e2(0x179)]){_0x1f9278['innerHTML']=_0x22d8e2(0x3b2),document[_0x22d8e2(0x345)](_0x3543bc+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x3543bc][_0x22d8e2(0x370)]=_0x1c51fc,eloHistoryPagination[_0x3543bc]['firstVisible']=_0x388021['docs'][0x0],eloHistoryPagination[_0x3543bc][_0x22d8e2(0x26c)]=_0x388021['docs'][_0x388021[_0x22d8e2(0x270)]['length']-0x1];const _0x27d8dd=new Map();_0x1f9278[_0x22d8e2(0x1e7)]='';const _0x9f4466=async _0x183981=>{const _0x204aa2=_0x22d8e2;if(typeof _0x183981!==_0x204aa2(0x205)||_0x183981['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x183981))return _0x183981;if(_0x27d8dd['has'](_0x183981))return _0x27d8dd[_0x204aa2(0x34a)](_0x183981);try{for(const _0x2738be of['players','playersD2','playersD3','nonParticipants']){const _0x1b0407=await getDoc(doc(db,_0x2738be,_0x183981));if(_0x1b0407[_0x204aa2(0x225)]()&&_0x1b0407[_0x204aa2(0x34e)]()[_0x204aa2(0x16c)]){const _0x184b45=_0x1b0407[_0x204aa2(0x34e)]()[_0x204aa2(0x16c)];return _0x27d8dd[_0x204aa2(0x1e6)](_0x183981,_0x184b45),_0x184b45;}}return _0x183981;}catch(_0x41b793){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x183981+':',_0x41b793),_0x183981;}};for(const _0x3bc3ba of _0x388021[_0x22d8e2(0x270)]){const _0xc583f2=_0x3bc3ba['data'](),_0x22b2ec=document[_0x22d8e2(0x366)]('tr'),_0x15c98c=_0xc583f2['timestamp']?new Date(_0xc583f2['timestamp'][_0x22d8e2(0x20f)]*0x3e8)['toLocaleString']():'N/A',_0x3d0315=_0xc583f2['newElo']-_0xc583f2['previousElo'],_0x3bba2a=_0x3d0315>0x0?'positive-change':_0x3d0315<0x0?'negative-change':'',_0x5e9146=_0x3d0315>0x0?'+':'',_0x3d7300=_0xc583f2[_0x22d8e2(0x215)]||_0xc583f2['username']||_0xc583f2['userId']||'N/A',_0x5559b6=await _0x9f4466(_0x3d7300);_0x22b2ec[_0x22d8e2(0x1e7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x15c98c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x5559b6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0xc583f2['previousElo']||_0x22d8e2(0x181))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0xc583f2['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x3bba2a+'\x22>'+_0x5e9146+_0x3d0315+_0x22d8e2(0x3b9)+formatHistoryType(_0xc583f2['type'])+_0x22d8e2(0x176)+(_0xc583f2['modifiedBy']||_0xc583f2['promotedBy']||_0xc583f2[_0x22d8e2(0x2dd)]||'System')+_0x22d8e2(0x2cf),_0x1f9278['appendChild'](_0x22b2ec);}document[_0x22d8e2(0x345)](_0x3543bc+'-page-indicator')[_0x22d8e2(0x1e2)]='Page\x20'+_0x1c51fc;const _0x351c80=document['getElementById'](_0x3543bc+'-prev-page'),_0xd247f6=document[_0x22d8e2(0x345)](_0x3543bc+'-next-page');if(_0x351c80)_0x351c80['disabled']=_0x1c51fc<=0x1;const _0x255103=query(_0x28b2eb,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x3543bc]['lastVisible']),limit(0x1)),_0x1c8d4c=await getDocs(_0x255103);if(_0xd247f6)_0xd247f6[_0x22d8e2(0x2c0)]=_0x1c8d4c['empty'];}catch(_0x9179de){console['error']('Error\x20loading\x20ELO\x20history:',_0x9179de),_0x1f9278['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x9179de[_0x22d8e2(0x2fb)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x5480c6){const _0x2c4f4a=a0_0x350bb1;switch(_0x5480c6){case'match_result':return'Match\x20Result';case _0x2c4f4a(0x1fb):return'Promotion';case'demotion':return'Demotion';case'admin_modification':return'Admin\x20Adjustment';case _0x2c4f4a(0x39a):return'Initial\x20Placement';default:return _0x5480c6||_0x2c4f4a(0x1c6);}}function setupEloHistorySection(){const _0x150c97=a0_0x350bb1;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{const _0x5de108=a0_0x531a;loadEloHistory(eloHistoryPagination['d1'][_0x5de108(0x370)]-0x1);}),document['getElementById'](_0x150c97(0x26e))[_0x150c97(0x1ec)](_0x150c97(0x3a3),()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById'](_0x150c97(0x2a3))['addEventListener'](_0x150c97(0x3a3),()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener'](_0x150c97(0x3a3),()=>{const _0x49bfde=_0x150c97;loadEloHistory(eloHistoryPagination['d2'][_0x49bfde(0x370)]+0x1);});const _0x1bc714=document['getElementById']('d3-prev-page'),_0x46d0ec=document['getElementById'](_0x150c97(0x1e8));_0x1bc714&&_0x1bc714[_0x150c97(0x1ec)]('click',()=>{const _0xed63e7=_0x150c97;loadEloHistory(eloHistoryPagination['d3'][_0xed63e7(0x370)]-0x1);});_0x46d0ec&&_0x46d0ec[_0x150c97(0x1ec)](_0x150c97(0x3a3),()=>{const _0x3dccde=_0x150c97;loadEloHistory(eloHistoryPagination['d3'][_0x3dccde(0x370)]+0x1);});const _0x159d5d=document['getElementById']('elo-history-search');_0x159d5d&&_0x159d5d[_0x150c97(0x1ec)]('input',debounce(filterEloHistoryTable,0x12c));const _0x54ba64=document['getElementById']('history-type-filter');_0x54ba64&&_0x54ba64[_0x150c97(0x1ec)]('change',applyEloHistoryFilters);const _0x507052=document['getElementById'](_0x150c97(0x1f0));_0x507052&&_0x507052[_0x150c97(0x1ec)]('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x4a96d4=a0_0x350bb1,_0x1d3782=document[_0x4a96d4(0x345)]('elo-history-search')['value'][_0x4a96d4(0x2de)](),_0x2df52=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x48c3f8=0x0;_0x2df52['forEach'](_0x1421ce=>{const _0x32d553=_0x4a96d4;if(_0x1421ce['classList']['contains']('loading-cell')||_0x1421ce['classList']['contains'](_0x32d553(0x2ef))||_0x1421ce['classList']['contains'](_0x32d553(0x331)))return;const _0x48c740=_0x1421ce['querySelector'](_0x32d553(0x2c4))?.[_0x32d553(0x1e2)]['toLowerCase']()||'',_0x4e6b36=_0x1421ce['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0xf0ba54=_0x1421ce['querySelector'](_0x32d553(0x279))?.['textContent']['toLowerCase']()||'';_0x48c740['includes'](_0x1d3782)||_0x4e6b36[_0x32d553(0x278)](_0x1d3782)||_0xf0ba54['includes'](_0x1d3782)?(_0x1421ce['style']['display']='',_0x48c3f8++):_0x1421ce['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x52b38e=a0_0x350bb1,_0x2298da=document['getElementById']('history-start-date')['value'],_0x11ffd1=document['getElementById']('history-end-date')['value'],_0x4e776f=document[_0x52b38e(0x345)]('history-type-filter')['value'],_0x4bdc03=currentLadder['toLowerCase']();eloHistoryPagination[_0x4bdc03]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x23033a=document['getElementById']('elo-history-table-body');_0x23033a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x164d37=currentLadder==='D1'?_0x52b38e(0x2d6):'eloHistoryD2',_0x3d0a4c=collection(db,_0x164d37);let _0x4c786b=[orderBy('timestamp','desc')];if(_0x2298da){const _0x1ea353=new Date(_0x2298da);_0x1ea353['setHours'](0x0,0x0,0x0,0x0),_0x4c786b['push'](where('timestamp','>=',_0x1ea353));}if(_0x11ffd1){const _0x2afada=new Date(_0x11ffd1);_0x2afada['setHours'](0x17,0x3b,0x3b,0x3e7),_0x4c786b['push'](where('timestamp','<=',_0x2afada));}_0x4e776f&&_0x4e776f!=='all'&&_0x4c786b['push'](where('type','==',_0x4e776f));_0x4c786b[_0x52b38e(0x3c7)](limit(PAGE_SIZE));const _0x17bfb9=query(_0x3d0a4c,..._0x4c786b),_0x415a5a=await getDocs(_0x17bfb9);!_0x415a5a['empty']&&(eloHistoryPagination[_0x4bdc03]['firstVisible']=_0x415a5a['docs'][0x0],eloHistoryPagination[_0x4bdc03][_0x52b38e(0x26c)]=_0x415a5a['docs'][_0x415a5a[_0x52b38e(0x270)]['length']-0x1]);_0x23033a['innerHTML']='';if(_0x415a5a['empty']){_0x23033a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x415a5a['forEach'](_0x4535cc=>{const _0x494546=_0x52b38e,_0xd8ae7e=_0x4535cc[_0x494546(0x34e)](),_0x4fc913=document[_0x494546(0x366)]('tr'),_0xdfa087=_0xd8ae7e['timestamp']?new Date(_0xd8ae7e['timestamp']['seconds']*0x3e8)[_0x494546(0x3cc)]():'N/A',_0x73ef7=_0xd8ae7e[_0x494546(0x386)]-_0xd8ae7e['previousElo'],_0x24f88f=_0x73ef7>0x0?'positive-change':_0x73ef7<0x0?'negative-change':'',_0x364f0e=_0x73ef7>0x0?'+':'',_0x990d3d=_0xd8ae7e['player']||_0xd8ae7e['username']||_0xd8ae7e[_0x494546(0x391)]||'N/A';_0x4fc913['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0xdfa087+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x990d3d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0xd8ae7e['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0xd8ae7e['newElo']||_0x494546(0x181))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x24f88f+'\x22>'+_0x364f0e+_0x73ef7+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0xd8ae7e[_0x494546(0x33d)])+_0x494546(0x176)+(_0xd8ae7e[_0x494546(0x349)]||_0xd8ae7e['promotedBy']||_0xd8ae7e[_0x494546(0x2dd)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x23033a['appendChild'](_0x4fc913);}),document['getElementById'](_0x4bdc03+'-page-indicator')['textContent']=_0x52b38e(0x2d9);}catch(_0x3a320f){console['error']('Error\x20applying\x20filters:',_0x3a320f),_0x23033a[_0x52b38e(0x1e7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x3a320f['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x53dff2=a0_0x350bb1;document['getElementById']('history-start-date')['value']='',document['getElementById']('history-end-date')['value']='',document[_0x53dff2(0x345)]('history-type-filter')['value']='all',document['getElementById']('elo-history-search')['value']='';const _0x51f1a6=currentLadder['toLowerCase']();eloHistoryPagination[_0x51f1a6]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0xca4f4f=a0_0x350bb1,_0x165222=document['getElementById'](_0xca4f4f(0x2e5)),_0x199e2d=document[_0xca4f4f(0x345)]('promote-modal'),_0x53fb71=document[_0xca4f4f(0x345)]('promote-form');_0x165222&&_0x199e2d&&_0x53fb71&&(_0x165222['addEventListener'](_0xca4f4f(0x3a3),()=>{_0x199e2d['classList']['add']('active');}),_0x199e2d['addEventListener']('click',_0x14076e=>{_0x14076e['target']===_0x199e2d&&_0x199e2d['classList']['remove']('active');}),_0x53fb71['addEventListener'](_0xca4f4f(0x2fe),async _0x3163e2=>{const _0x579c89=_0xca4f4f;_0x3163e2[_0x579c89(0x2e6)]();const _0x3c4fb=document[_0x579c89(0x345)](_0x579c89(0x35c)),_0x2cf7d0=document['getElementById']('promote-ladder'),_0x3d481c=_0x3c4fb['value'][_0x579c89(0x264)](),_0x1ef8c8=_0x2cf7d0['value'];if(!_0x3d481c){showNotification(_0x579c89(0x229),_0x579c89(0x381));return;}try{await promotePlayer(_0x3d481c,_0x1ef8c8),_0x199e2d[_0x579c89(0x382)][_0x579c89(0x319)](_0x579c89(0x2ab)),_0x3c4fb[_0x579c89(0x180)]='';}catch(_0x49961d){showNotification(_0x49961d[_0x579c89(0x2fb)],_0x579c89(0x381));}}),document[_0xca4f4f(0x345)](_0xca4f4f(0x320))['addEventListener'](_0xca4f4f(0x3a3),()=>{_0x199e2d['classList']['remove']('active');}));const _0x47a615=document['getElementById']('demote-player-btn'),_0x46803f=document[_0xca4f4f(0x345)]('demote-modal'),_0xd56d=document['getElementById']('demote-form');_0x47a615&&_0x46803f&&_0xd56d&&(_0x47a615['addEventListener']('click',()=>{_0x46803f['classList']['add']('active');}),_0x46803f['addEventListener']('click',_0x21a1d6=>{const _0x5bf067=_0xca4f4f;_0x21a1d6['target']===_0x46803f&&_0x46803f['classList']['remove'](_0x5bf067(0x2ab));}),_0xd56d['addEventListener']('submit',async _0x2527d1=>{const _0x4cbd14=_0xca4f4f;_0x2527d1['preventDefault']();const _0x3930e9=document[_0x4cbd14(0x345)]('demote-username'),_0x5b2bb1=document[_0x4cbd14(0x345)]('demote-ladder'),_0x5e3c18=_0x3930e9['value'][_0x4cbd14(0x264)](),_0x3fcac2=_0x5b2bb1['value'];if(!_0x5e3c18){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x5e3c18,_0x3fcac2),document[_0x4cbd14(0x345)](_0x4cbd14(0x23b))['classList']['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x3ffb45){console['error']('Error\x20in\x20demotion:',_0x3ffb45);}}));const _0x5a11a9=document['getElementById']('set-elo-btn'),_0x57f23b=document[_0xca4f4f(0x345)]('set-elo-modal'),_0x258d4c=document['getElementById'](_0xca4f4f(0x1d6));_0x5a11a9&&_0x57f23b&&_0x258d4c&&(_0x5a11a9['addEventListener']('click',()=>{const _0x52d119=_0xca4f4f;_0x57f23b[_0x52d119(0x382)]['add']('active');}),_0x57f23b['addEventListener']('click',_0x401085=>{const _0x18870d=_0xca4f4f;_0x401085[_0x18870d(0x364)]===_0x57f23b&&_0x57f23b['classList']['remove'](_0x18870d(0x2ab));}),_0x258d4c['addEventListener']('submit',async _0x124318=>{const _0x5d03de=_0xca4f4f;_0x124318['preventDefault']();const _0x3cb75e=document['getElementById']('set-elo-username'),_0x43d266=document['getElementById']('set-elo-value');let _0x14cef0;const _0x4b9052=document['getElementById']('set-elo-ladder'),_0x11d498=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x4b9052)_0x14cef0=_0x4b9052['value'];else _0x11d498?_0x14cef0=_0x11d498['value']:_0x14cef0='D1';if(!_0x3cb75e||!_0x43d266){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x1ece90=_0x3cb75e['value']['trim'](),_0x21a3c0=parseInt(_0x43d266['value']);if(!_0x1ece90||isNaN(_0x21a3c0)){showNotification(_0x5d03de(0x171),_0x5d03de(0x381));return;}try{await setCustomElo(_0x1ece90,_0x21a3c0,_0x14cef0),_0x57f23b['classList'][_0x5d03de(0x319)](_0x5d03de(0x2ab)),_0x3cb75e['value']='',_0x43d266['value']='';}catch(_0x50eb86){showNotification(_0x50eb86['message'],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{const _0x201f19=_0xca4f4f;_0x57f23b[_0x201f19(0x382)]['remove'](_0x201f19(0x2ab));}));const _0x1447d1=document['getElementById']('set-role-modal'),_0x35a5b6=document[_0xca4f4f(0x345)](_0xca4f4f(0x1b1));if(_0x1447d1&&_0x35a5b6){_0x1447d1['addEventListener']('click',_0x6aa73=>{_0x6aa73['target']===_0x1447d1&&closeModalHandler();}),_0x35a5b6[_0xca4f4f(0x1ec)](_0xca4f4f(0x2fe),async _0x43f1a7=>{const _0x3e0854=_0xca4f4f;_0x43f1a7['preventDefault']();const _0x544178=document['getElementById'](_0x3e0854(0x336)),_0x10443a=document['getElementById']('role-name'),_0x13afcf=document['getElementById'](_0x3e0854(0x1eb)),_0x45a582=_0x544178['value']['trim'](),_0x3a005a=_0x10443a['value']['trim'](),_0x5988fd=_0x13afcf[_0x3e0854(0x180)];if(!_0x45a582){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x45a582,_0x3a005a,_0x5988fd),closeModalHandler(),loadUsersWithRoles();}catch(_0x4bf687){}});const _0x343ff3=document['getElementById']('cancel-role-btn');_0x343ff3&&(_0x343ff3[_0xca4f4f(0x28a)](_0xca4f4f(0x3a3),closeModalHandler),_0x343ff3['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x6e63ed,_0x5e1a64){const _0x4740ab=a0_0x350bb1;try{console['log']('Attempting\x20to\x20promote\x20'+_0x6e63ed+_0x4740ab(0x25a)+_0x5e1a64+'\x20ladder');const _0x594beb=auth[_0x4740ab(0x340)];if(!_0x594beb)throw new Error(_0x4740ab(0x261));const _0x1f503a=_0x5e1a64==='D2'?'playersD2':'players',_0x49e569=_0x5e1a64==='D2'?_0x4740ab(0x30b):_0x4740ab(0x2d6);console['log']('Searching\x20for\x20player\x20in\x20'+_0x1f503a);const _0xc6862c=collection(db,_0x1f503a),_0x3d1874=query(_0xc6862c,where('username','==',_0x6e63ed)),_0x4d216c=await getDocs(_0x3d1874);if(_0x4d216c[_0x4740ab(0x179)]){alert(_0x4740ab(0x30a)+_0x5e1a64+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x5e1a64+'\x20ladder');}const _0x206c23=_0x4d216c['docs'][0x0],_0x135232=_0x206c23['data'](),_0x26b93e=_0x135232['eloRating']||0x4b0,_0x18dc38=_0x206c23['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x26b93e);const _0x173590=[{'name':_0x4740ab(0x341),'elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x2a3749=_0x173590['find'](_0x4b07be=>_0x4b07be['elo']>_0x26b93e);if(!_0x2a3749){alert(_0x4740ab(0x308)+_0x5e1a64+_0x4740ab(0x2e1));throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x5e1a64+'\x20ladder');}console['log']('Promoting\x20player\x20to\x20'+_0x2a3749['name']+'\x20('+_0x2a3749['elo']+')'),await updateDoc(doc(db,_0x1f503a,_0x206c23['id']),{'eloRating':_0x2a3749[_0x4740ab(0x373)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x594beb['email']||'admin'}),await addDoc(collection(db,_0x49e569),{'player':_0x6e63ed,'previousElo':_0x26b93e,'newElo':_0x2a3749[_0x4740ab(0x373)],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x2a3749[_0x4740ab(0x385)],'promotedBy':_0x594beb['email']||_0x4740ab(0x166),'gameMode':_0x5e1a64});try{const {promotionManager:_0x170e76}=await import('./promotions.js'),_0x4a5737=_0x170e76['getRankName'](_0x26b93e),_0x37a752=_0x2a3749[_0x4740ab(0x385)];await _0x170e76[_0x4740ab(0x24f)](_0x18dc38,_0x6e63ed,_0x26b93e,_0x2a3749['elo'],_0x4a5737,_0x37a752,'promotion',{'displayName':_0x6e63ed,'source':'admin','adminUser':_0x594beb['email'],'ladder':_0x5e1a64}),console[_0x4740ab(0x160)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x51ed51){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x51ed51);}return alert(_0x4740ab(0x372)+_0x6e63ed+'\x20to\x20'+_0x2a3749[_0x4740ab(0x385)]+'\x20('+_0x2a3749[_0x4740ab(0x373)]+')'),currentLadder===_0x5e1a64&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x10735f){console['error']('Error\x20promoting\x20player:',_0x10735f),alert('Error\x20promoting\x20player:\x20'+_0x10735f['message']);throw _0x10735f;}}document[a0_0x350bb1(0x1ec)]('DOMContentLoaded',()=>{const _0x2ceced=document['getElementById']('promote-form');_0x2ceced&&_0x2ceced['addEventListener']('submit',async _0x336880=>{const _0x432b36=a0_0x531a;_0x336880[_0x432b36(0x2e6)]();const _0x199846=document['getElementById']('promote-username')[_0x432b36(0x180)]['trim'](),_0x5ec079=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')[_0x432b36(0x180)];if(!_0x199846){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x199846,_0x5ec079),document[_0x432b36(0x345)]('promote-modal')['classList']['remove']('active'),document[_0x432b36(0x345)]('promote-username')['value']='';}catch(_0x35b838){console[_0x432b36(0x381)]('Error\x20in\x20promotion:',_0x35b838);}});});async function demotePlayer(_0x47f421,_0x45e9a5){const _0x419270=a0_0x350bb1;try{console['log']('Attempting\x20to\x20demote\x20'+_0x47f421+'\x20in\x20'+_0x45e9a5+'\x20ladder');const _0x2cf56a=auth['currentUser'];if(!_0x2cf56a)throw new Error(_0x419270(0x261));const _0x2cb0ec=_0x45e9a5==='D2'?'playersD2':'players',_0x44a5b0=_0x45e9a5==='D2'?'eloHistoryD2':'eloHistory';console[_0x419270(0x160)]('Searching\x20for\x20player\x20in\x20'+_0x2cb0ec);const _0x51b1f4=collection(db,_0x2cb0ec),_0x202860=query(_0x51b1f4,where(_0x419270(0x16c),'==',_0x47f421)),_0x18a5f2=await getDocs(_0x202860);if(_0x18a5f2[_0x419270(0x179)]){alert('Player\x20not\x20found\x20in\x20'+_0x45e9a5+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x45e9a5+_0x419270(0x2e1));}const _0xf27e5e=_0x18a5f2['docs'][0x0],_0x68931b=_0xf27e5e['data'](),_0x19167d=_0x68931b[_0x419270(0x33a)]||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x19167d);const _0x4eabcb=[{'name':_0x419270(0x1bd),'elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x581a74=_0x4eabcb['find'](_0x3b16b6=>_0x3b16b6['elo']<_0x19167d);if(!_0x581a74){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x45e9a5+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x45e9a5+_0x419270(0x2e1));}console[_0x419270(0x160)](_0x419270(0x2df)+_0x581a74['name']+'\x20('+_0x581a74[_0x419270(0x373)]+')'),await updateDoc(doc(db,_0x2cb0ec,_0xf27e5e['id']),{'eloRating':_0x581a74['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x2cf56a['email']||'admin'}),await addDoc(collection(db,_0x44a5b0),{'player':_0x47f421,'previousElo':_0x19167d,'newElo':_0x581a74['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x581a74['name'],'demotedBy':_0x2cf56a[_0x419270(0x2fa)]||_0x419270(0x166),'gameMode':_0x45e9a5});try{const {promotionManager:_0x216f75}=await import(_0x419270(0x1c2)),_0x2a85db=_0x216f75[_0x419270(0x234)](_0x19167d),_0x358f32=_0x581a74['name'];await _0x216f75['sendPromotionNotification'](_0xf27e5e['id'],_0x47f421,_0x19167d,_0x581a74['elo'],_0x2a85db,_0x358f32,'demotion',{'displayName':_0x47f421,'source':'admin','adminUser':_0x2cf56a[_0x419270(0x2fa)],'ladder':_0x45e9a5}),console['log'](_0x419270(0x252));}catch(_0x135e0b){console[_0x419270(0x381)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x135e0b);}return alert('Successfully\x20demoted\x20'+_0x47f421+_0x419270(0x26b)+_0x581a74['name']+'\x20('+_0x581a74['elo']+')'),currentLadder===_0x45e9a5&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x2f8535){console['error']('Error\x20demoting\x20player:',_0x2f8535),alert('Error\x20demoting\x20player:\x20'+_0x2f8535['message']);throw _0x2f8535;}}document[a0_0x350bb1(0x1ec)]('DOMContentLoaded',()=>{const _0x48ee40=a0_0x350bb1,_0x4ee5c9=document[_0x48ee40(0x345)](_0x48ee40(0x29c));_0x4ee5c9&&_0x4ee5c9[_0x48ee40(0x1ec)](_0x48ee40(0x2fe),async _0x1eca80=>{const _0x52d99e=_0x48ee40;_0x1eca80[_0x52d99e(0x2e6)]();const _0x511990=document['getElementById']('demote-username')['value']['trim'](),_0x32cd75=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x511990){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x511990,_0x32cd75),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x17e776){console['error'](_0x52d99e(0x1f3),_0x17e776);}});});async function setCustomElo(_0x3c5e85,_0x627370,_0x23efee){const _0x454b5a=a0_0x350bb1;try{const _0x249066=auth['currentUser'];if(!_0x249066||!isAdmin(_0x249066['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x13e96b=_0x23efee==='D2'?_0x454b5a(0x2a0):'players',_0x224809=_0x23efee==='D2'?_0x454b5a(0x30b):'eloHistory',_0x383d53=collection(db,_0x13e96b),_0x47e1c2=query(_0x383d53,where(_0x454b5a(0x16c),'==',_0x3c5e85)),_0x112db1=await getDocs(_0x47e1c2);if(_0x112db1['empty'])throw new Error(_0x454b5a(0x30a)+_0x23efee+'\x20ladder');const _0x1b44df=_0x112db1['docs'][0x0],_0xec8a24=_0x1b44df['data'](),_0x5319a3=_0xec8a24['eloRating']||0x4b0,_0x50cb23=writeBatch(db);_0x50cb23['update'](doc(db,_0x13e96b,_0x1b44df['id']),{'eloRating':_0x627370,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x249066['email']});const _0x7c3fb7=doc(collection(db,_0x224809));return _0x50cb23['set'](_0x7c3fb7,{'player':_0x3c5e85,'previousElo':_0x5319a3,'newElo':_0x627370,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x249066['email'],'gameMode':_0x23efee}),await _0x50cb23['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x3c5e85+'\x20was\x20updated\x20from\x20'+_0x5319a3+'\x20to\x20'+_0x627370,'success'),currentLadder===_0x23efee&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x5c5dc5){console['error'](_0x454b5a(0x383),_0x5c5dc5);throw _0x5c5dc5;}}async function setUserRole(_0x883be1,_0x5b4fa4,_0x213f22){const _0x5b50dd=a0_0x350bb1;try{const _0x8fdbf3=auth[_0x5b50dd(0x340)];if(!_0x8fdbf3||!isAdmin(_0x8fdbf3['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x44737b=_0x5b4fa4?_0x5b4fa4['trim']():null,_0x104bb5=_0x44737b?_0x213f22||_0x5b50dd(0x193):null,[_0x37eaf5,_0x50e6e4]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x883be1))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x883be1)))]),_0x5db0c9=[];if(!_0x37eaf5['empty'])_0x5db0c9['push']({'ref':_0x37eaf5['docs'][0x0][_0x5b50dd(0x210)],'source':'D1'});if(!_0x50e6e4[_0x5b50dd(0x179)])_0x5db0c9['push']({'ref':_0x50e6e4['docs'][0x0]['ref'],'source':'D2'});if(_0x5db0c9[_0x5b50dd(0x36e)]===0x0){const [_0x46a560,_0x1dc165]=await Promise['all']([getDocs(query(collection(db,_0x5b50dd(0x1af)),where('username','==',_0x883be1))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x883be1)))]);if(!_0x46a560['empty'])_0x5db0c9['push']({'ref':_0x46a560[_0x5b50dd(0x270)][0x0][_0x5b50dd(0x210)],'source':'NonParticipant'});if(!_0x1dc165['empty'])_0x5db0c9['push']({'ref':_0x1dc165['docs'][0x0]['ref'],'source':_0x5b50dd(0x1e5)});}if(_0x5db0c9[_0x5b50dd(0x36e)]===0x0)throw new Error(_0x5b50dd(0x31f)+_0x883be1+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x20300a=writeBatch(db);_0x5db0c9['forEach'](_0x887535=>{const _0x4bca5f=_0x5b50dd;console['log']('Updating\x20role\x20for\x20'+_0x883be1+'\x20in\x20'+_0x887535[_0x4bca5f(0x3ae)]),!_0x44737b?_0x20300a[_0x4bca5f(0x253)](_0x887535['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x20300a['update'](_0x887535[_0x4bca5f(0x210)],{'roleName':_0x44737b,'roleColor':_0x104bb5,'roleAssignedBy':_0x8fdbf3['email'],'roleAssignedAt':serverTimestamp()});}),await _0x20300a['commit']();const _0x44ca23=_0x44737b?'Role\x20\x22'+_0x44737b+'\x22\x20set':'Role\x20removed';return showNotification(_0x44ca23+_0x5b50dd(0x1f7)+_0x883be1+'\x22','success'),!![];}catch(_0x295b7d){console['error']('Error\x20setting\x20user\x20role:',_0x295b7d),showNotification(_0x5b50dd(0x36f)+_0x295b7d['message'],_0x5b50dd(0x381));throw _0x295b7d;}}function showNotification(_0x5c6836,_0x39d638='info'){const _0x311bf9=a0_0x350bb1,_0x416c50=document[_0x311bf9(0x366)]('div');_0x416c50['className']=_0x311bf9(0x311)+_0x39d638,_0x416c50[_0x311bf9(0x1e7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x39d638)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x5c6836+_0x311bf9(0x296),document['body']['appendChild'](_0x416c50),setTimeout(()=>{const _0x4cf53c=_0x311bf9;_0x416c50[_0x4cf53c(0x382)]['add'](_0x4cf53c(0x2ab));},0xa);const _0x33aee9=setTimeout(()=>{closeNotification(_0x416c50);},0x1388);_0x416c50[_0x311bf9(0x29f)]('.close-notification')[_0x311bf9(0x1ec)]('click',()=>{clearTimeout(_0x33aee9),closeNotification(_0x416c50);});}function getNotificationIcon(_0x2c65bb){switch(_0x2c65bb){case'success':return'fa-check-circle';case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case'info':default:return'fa-info-circle';}}function closeNotification(_0x2bad19){const _0x17f0c5=a0_0x350bb1;_0x2bad19[_0x17f0c5(0x382)][_0x17f0c5(0x319)]('active'),setTimeout(()=>{const _0x4a6239=_0x17f0c5;_0x2bad19[_0x4a6239(0x319)]();},0x12c);}function setupUserRolesSection(){const _0x3a243f=a0_0x350bb1,_0x5a5de3=document[_0x3a243f(0x345)]('load-users-data');_0x5a5de3&&_0x5a5de3['addEventListener']('click',function(){const _0x2cdc56=_0x3a243f;this[_0x2cdc56(0x382)][_0x2cdc56(0x1b7)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x5f1176=_0x2cdc56;this['classList'][_0x5f1176(0x319)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x6a1a6a=>{const _0x54193a=_0x2cdc56;console[_0x54193a(0x381)]('Error\x20loading\x20users:',_0x6a1a6a),this['classList']['remove'](_0x54193a(0x304)),this[_0x54193a(0x1e7)]=_0x54193a(0x38e),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x11b10e=document['getElementById']('add-new-role-btn');_0x11b10e&&_0x11b10e[_0x3a243f(0x1ec)]('click',()=>{const _0xadb29a=document['getElementById']('set-role-modal');_0xadb29a&&_0xadb29a['classList']['add']('active');});const _0x593f1c=document['getElementById']('user-search');_0x593f1c&&_0x593f1c['addEventListener'](_0x3a243f(0x295),debounce(filterUsersTable,0x12c));const _0x587570=document['getElementById']('role-filter');_0x587570&&_0x587570['addEventListener'](_0x3a243f(0x395),filterUsersTable);}async function loadUsersWithRoles(){const _0x5da580=a0_0x350bb1,_0x352f1a=document['getElementById']('users-table-body');if(!_0x352f1a)return;_0x352f1a[_0x5da580(0x1e7)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0xf788a7,_0x23f246,_0xbb6abb,_0x35d9ef]=await Promise[_0x5da580(0x3aa)]([getDocs(collection(db,_0x5da580(0x1ea))),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x5da580(0x1af))),getDocs(collection(db,_0x5da580(0x1b0)))]),_0xec5454=new Map();function _0x23c7d5(_0xe6c93e,_0x23446d){_0xe6c93e['forEach'](_0x2f48d2=>{const _0x409ce3=a0_0x531a,_0x4d624d=_0x2f48d2['data']();if(!_0x4d624d['username'])return;if(!_0xec5454['has'](_0x4d624d['username']))_0xec5454['set'](_0x4d624d['username'],{'username':_0x4d624d['username'],'roleName':_0x4d624d['roleName']||null,'roleColor':_0x4d624d['roleColor']||null,'roleAssignedBy':_0x4d624d['roleAssignedBy']||null,'roleAssignedAt':_0x4d624d['roleAssignedAt']||null,'sources':[_0x23446d]});else{const _0x25205c=_0xec5454['get'](_0x4d624d['username']);_0x4d624d['roleName']&&(!_0x25205c['roleName']||_0x23446d==='D1'||_0x23446d==='D2')&&(_0x25205c['roleName']=_0x4d624d['roleName'],_0x25205c['roleColor']=_0x4d624d[_0x409ce3(0x297)],_0x25205c['roleAssignedBy']=_0x4d624d[_0x409ce3(0x287)],_0x25205c[_0x409ce3(0x2c9)]=_0x4d624d['roleAssignedAt']),!_0x25205c['sources']['includes'](_0x23446d)&&_0x25205c[_0x409ce3(0x164)]['push'](_0x23446d);}});}_0x23c7d5(_0xf788a7,'D1'),_0x23c7d5(_0x23f246,'D2'),_0x23c7d5(_0xbb6abb,'Non-Participant'),_0x23c7d5(_0x35d9ef,'Profile');const _0x38a9e4=Array['from'](_0xec5454['values']())[_0x5da580(0x254)]((_0xe86ac1,_0x45aa73)=>_0xe86ac1['username']['localeCompare'](_0x45aa73['username']));if(_0x38a9e4['length']===0x0){_0x352f1a['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x352f1a['innerHTML']='',_0x38a9e4['forEach'](_0xd640f0=>{const _0x17e2a0=_0x5da580,_0x2a35d6=document['createElement']('tr');_0x2a35d6[_0x17e2a0(0x306)]['username']=_0xd640f0[_0x17e2a0(0x16c)],_0x2a35d6[_0x17e2a0(0x306)][_0x17e2a0(0x315)]=_0xd640f0['roleName']||'',_0x2a35d6['dataset']['roleColor']=_0xd640f0['roleColor']||_0x17e2a0(0x193);const _0x29a629=_0xd640f0['roleAssignedAt']?new Date(_0xd640f0[_0x17e2a0(0x2c9)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x4d50d3=_0xd640f0['roleName']?_0x17e2a0(0x1b3)+_0xd640f0['roleColor']+';\x20color:\x20'+getContrastColor(_0xd640f0[_0x17e2a0(0x297)])+';\x22>'+_0xd640f0['roleName']+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x2a35d6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xd640f0['username']+'\x20<span\x20class=\x22user-source\x22>('+_0xd640f0['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4d50d3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xd640f0[_0x17e2a0(0x287)]||_0x17e2a0(0x181))+_0x17e2a0(0x265)+_0x29a629+_0x17e2a0(0x255)+_0xd640f0['username']+_0x17e2a0(0x313)+(_0xd640f0[_0x17e2a0(0x315)]?_0x17e2a0(0x1b2)+_0xd640f0['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x352f1a['appendChild'](_0x2a35d6);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x5db6ce=>{_0x5db6ce['addEventListener']('click',()=>{const _0x4aa09b=a0_0x531a,_0x5a2fc5=_0x5db6ce['dataset'][_0x4aa09b(0x16c)];openRoleEditModal(_0x5a2fc5);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x5aed4f=>{const _0x2445ad=_0x5da580;_0x5aed4f['addEventListener'](_0x2445ad(0x3a3),()=>{const _0x416780=_0x5aed4f['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x416780+'?')&&setUserRole(_0x416780,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x5c8a4a=>console['error']('Error\x20removing\x20role:',_0x5c8a4a));});});}catch(_0x1d93ac){console['error'](_0x5da580(0x388),_0x1d93ac),_0x352f1a['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x50f53d){const _0x64666d=a0_0x350bb1;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x50f53d);const _0x2b56a5=document[_0x64666d(0x345)](_0x64666d(0x343)),_0x19879a=document[_0x64666d(0x345)]('role-username'),_0x1d92f0=document['getElementById']('user-role');if(!_0x2b56a5){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x2b56a5);_0x19879a?(_0x19879a[_0x64666d(0x180)]=_0x50f53d,console[_0x64666d(0x160)]('Username\x20input\x20set\x20to:\x20'+_0x50f53d)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x12631c=document['querySelector'](_0x64666d(0x33e)+_0x50f53d+'\x22]');if(_0x12631c&&_0x1d92f0){const _0x114f5c=_0x12631c['dataset']['role'];_0x1d92f0['value']=_0x114f5c===_0x64666d(0x19d)?'':_0x114f5c,console['log']('Role\x20select\x20set\x20to:\x20'+_0x1d92f0[_0x64666d(0x180)]+_0x64666d(0x231)+_0x114f5c+')');}else{if(!_0x12631c)console[_0x64666d(0x348)]('Table\x20row\x20for\x20user\x20'+_0x50f53d+_0x64666d(0x228));if(!_0x1d92f0)console[_0x64666d(0x348)]('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x1d92f0)_0x1d92f0['value']='';}console[_0x64666d(0x160)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x2b56a5['classList']['add'](_0x64666d(0x2ab));const _0x39ec77=document['getElementById']('cancel-role-btn');_0x39ec77?(console['log'](_0x64666d(0x18e)),_0x39ec77['removeEventListener']('click',closeModalHandler),_0x39ec77['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console[_0x64666d(0x160)](_0x64666d(0x2d7)),_0x2b56a5['removeEventListener']('click',closeModalBackgroundHandler),_0x2b56a5['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x2681aa){_0x2681aa['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x346c37=a0_0x350bb1,_0x4fe453=document['getElementById']('set-role-modal');_0x4fe453&&(_0x4fe453[_0x346c37(0x382)]['remove']('active'),_0x4fe453['removeEventListener'](_0x346c37(0x3a3),closeModalBackgroundHandler));}function filterUsersTable(){const _0x33a481=a0_0x350bb1,_0x45c979=document['getElementById']('user-search')?.['value']['toLowerCase']()||'',_0x5b39de=document['getElementById'](_0x33a481(0x344))?.[_0x33a481(0x180)]||'all',_0x152dc6=document['querySelectorAll']('#users-table-body\x20tr');let _0x4c4cca=0x0;_0x152dc6['forEach'](_0x1ae891=>{const _0x277174=_0x33a481;if(_0x1ae891[_0x277174(0x29f)]('.loading-cell')||_0x1ae891['querySelector'](_0x277174(0x369))||_0x1ae891['querySelector']('.error-state'))return;const _0x1a9fe1=_0x1ae891['dataset']['username']?.[_0x277174(0x2de)]()||'',_0x1743b6=_0x1ae891['dataset']['role']||'none',_0x1e2168=_0x1a9fe1[_0x277174(0x278)](_0x45c979),_0x4705cb=_0x5b39de==='all'||_0x1743b6===_0x5b39de;_0x1e2168&&_0x4705cb?(_0x1ae891[_0x277174(0x202)]['display']='',_0x4c4cca++):_0x1ae891['style']['display']='none';});if(_0x4c4cca===0x0&&_0x152dc6['length']>0x0){const _0x59031f=document['getElementById'](_0x33a481(0x38a));if(_0x59031f){if(!_0x59031f['querySelector']('.no-results')){const _0x46abe7=document['createElement']('tr');_0x46abe7['classList'][_0x33a481(0x1b7)]('no-results'),_0x46abe7['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x59031f[_0x33a481(0x212)](_0x46abe7);}}}else{const _0x4c0d72=document['querySelector']('.no-results');_0x4c0d72&&_0x4c0d72[_0x33a481(0x319)]();}}function setupManageArticlesSection(){const _0x346777=a0_0x350bb1,_0x12e8d2=document[_0x346777(0x345)]('load-articles-data');_0x12e8d2&&_0x12e8d2['addEventListener']('click',function(){const _0x3bdd95=_0x346777;this[_0x3bdd95(0x382)][_0x3bdd95(0x1b7)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x295c2f=_0x3bdd95;this[_0x295c2f(0x382)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x416aad=>{const _0x2aace4=_0x3bdd95;console[_0x2aace4(0x381)]('Error\x20loading\x20articles:',_0x416aad),this['classList']['remove']('loading'),this[_0x2aace4(0x1e7)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xa58939=_0x2aace4;this[_0xa58939(0x1e7)]=_0xa58939(0x1ac);},0xbb8);});});const _0x4bbf74=document[_0x346777(0x345)]('create-new-article-btn');_0x4bbf74?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x4bbf74['style']['display']='block',_0x4bbf74['addEventListener']('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x4a0ac6=document['getElementById'](_0x346777(0x21d));_0x4a0ac6&&_0x4a0ac6['addEventListener']('submit',_0x30ab93=>{_0x30ab93['preventDefault'](),saveArticle();});const _0x1d4789=document['getElementById'](_0x346777(0x1d0));_0x1d4789&&_0x1d4789['addEventListener']('click',()=>{closeArticleModal();});const _0x42a0e7=document[_0x346777(0x29f)](_0x346777(0x2a8));_0x42a0e7&&_0x42a0e7['addEventListener']('click',()=>{closeArticleModal();});const _0x2ad263=document[_0x346777(0x345)]('article-modal');_0x2ad263&&_0x2ad263['addEventListener']('click',_0x52f56c=>{const _0x249a1f=_0x346777;_0x52f56c[_0x249a1f(0x364)]===_0x2ad263&&closeArticleModal();});}async function loadArticles(){const _0x230e36=a0_0x350bb1,_0x1732d0=document['getElementById']('articles-table-body');if(!_0x1732d0)return;_0x1732d0['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x100091=collection(db,'articles'),_0x1da8fe=query(_0x100091,orderBy('createdAt','desc')),_0x4766cf=await getDocs(_0x1da8fe);if(_0x4766cf['empty']){_0x1732d0[_0x230e36(0x1e7)]='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x1732d0[_0x230e36(0x1e7)]='',_0x4766cf['forEach'](_0x27abe3=>{const _0xe9836d=_0x230e36,_0x2e9d28=_0x27abe3[_0xe9836d(0x34e)](),_0x3528e3=document['createElement']('tr'),_0x40e786=_0x2e9d28['createdAt']?new Date(_0x2e9d28['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x3528e3['innerHTML']=_0xe9836d(0x357)+(_0x2e9d28[_0xe9836d(0x300)]||_0xe9836d(0x204))+_0xe9836d(0x265)+(_0x2e9d28[_0xe9836d(0x239)]||_0xe9836d(0x1c6))+_0xe9836d(0x265)+_0x40e786+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x27abe3['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x27abe3['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1732d0['appendChild'](_0x3528e3);}),setupArticleActionButtons();}catch(_0x110131){console[_0x230e36(0x381)](_0x230e36(0x333),_0x110131),_0x1732d0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x110131['message']+_0x230e36(0x2a6);}}function setupArticleActionButtons(){document['querySelectorAll']('.edit-article-btn')['forEach'](_0x4feaa6=>{const _0x369361=a0_0x531a;_0x4feaa6[_0x369361(0x1ec)]('click',async _0x2b5afd=>{const _0xb0583=_0x369361,_0x3d29d6=_0x2b5afd['currentTarget'][_0xb0583(0x306)]['id'];openArticleModal(_0x3d29d6);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x3574d2=>{_0x3574d2['addEventListener']('click',async _0x14120f=>{const _0x23f7c4=_0x14120f['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x23f7c4);});});}function openArticleModal(_0x3d54c0=null){const _0x2100a8=a0_0x350bb1,_0x386894=document['getElementById'](_0x2100a8(0x2c8)),_0x34b452=document[_0x2100a8(0x345)]('article-modal-title'),_0x5adad3=document['getElementById']('article-form'),_0x24c4b9=document['getElementById']('article-id');_0x5adad3['reset'](),_0x24c4b9['value']='';if(_0x3d54c0)_0x34b452['textContent']='Edit\x20Article',_0x24c4b9[_0x2100a8(0x180)]=_0x3d54c0,loadArticleData(_0x3d54c0);else{_0x34b452['textContent']='Create\x20Article';const _0x1706a6=auth[_0x2100a8(0x340)];if(_0x1706a6){const _0x1a5fae=document[_0x2100a8(0x345)](_0x2100a8(0x3cf));if(_0x1a5fae&&_0x1706a6['displayName'])_0x1a5fae['value']=_0x1706a6['displayName'];else _0x1a5fae&&(_0x1a5fae['value']=_0x1706a6['email']);}}_0x386894['classList']['add']('active');}async function loadArticleData(_0x2b46f0){const _0x1902a9=a0_0x350bb1;try{const _0x2d9e60=doc(db,'articles',_0x2b46f0),_0x2f4033=await getDoc(_0x2d9e60);if(!_0x2f4033['exists']()){showNotification(_0x1902a9(0x34b),_0x1902a9(0x381));return;}const _0xa1f065=_0x2f4033['data']();document[_0x1902a9(0x345)]('article-title')['value']=_0xa1f065['title']||'',document[_0x1902a9(0x345)]('article-author')['value']=_0xa1f065[_0x1902a9(0x239)]||'',document[_0x1902a9(0x345)]('article-image-url')[_0x1902a9(0x180)]=_0xa1f065['imageUrl']||'',document[_0x1902a9(0x345)](_0x1902a9(0x362))['value']=_0xa1f065['content']||'';}catch(_0xa1d05){console['error']('Error\x20loading\x20article\x20data:',_0xa1d05),showNotification('Failed\x20to\x20load\x20article\x20data',_0x1902a9(0x381));}}async function saveArticle(){const _0x1751bc=a0_0x350bb1;try{const _0x18d044=document['getElementById']('article-id')['value'],_0x3c7425=document['getElementById']('article-title')['value']['trim'](),_0x47a074=document['getElementById']('article-author')[_0x1751bc(0x180)]['trim'](),_0x215929=document['getElementById']('article-image-url')['value']['trim'](),_0x22a85a=document[_0x1751bc(0x345)]('article-content')[_0x1751bc(0x180)][_0x1751bc(0x264)]();if(!_0x3c7425||!_0x22a85a){showNotification(_0x1751bc(0x1dc),'error');return;}const _0x181ae6=auth['currentUser'];if(!_0x181ae6){showNotification(_0x1751bc(0x169),'error');return;}const _0x2c8ac9={'title':_0x3c7425,'author':_0x47a074,'imageUrl':_0x215929||null,'content':_0x22a85a,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x181ae6[_0x1751bc(0x2fa)]};!_0x18d044?(_0x2c8ac9[_0x1751bc(0x219)]=serverTimestamp(),_0x2c8ac9['createdBy']=_0x181ae6['email'],await addDoc(collection(db,_0x1751bc(0x35e)),_0x2c8ac9),showNotification(_0x1751bc(0x195),_0x1751bc(0x398))):(await updateDoc(doc(db,_0x1751bc(0x35e),_0x18d044),_0x2c8ac9),showNotification(_0x1751bc(0x356),'success')),closeArticleModal(),loadArticles();}catch(_0x164230){console[_0x1751bc(0x381)](_0x1751bc(0x2e2),_0x164230),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x164230[_0x1751bc(0x2fb)],'error');}}function closeArticleModal(){const _0x266a61=a0_0x350bb1,_0x328aae=document[_0x266a61(0x345)]('article-modal');_0x328aae&&_0x328aae['classList'][_0x266a61(0x319)](_0x266a61(0x2ab));}async function confirmDeleteArticle(_0x3e0243){const _0x180d2a=a0_0x350bb1;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x180d2a(0x35e),_0x3e0243)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x48c937){console['error']('Error\x20deleting\x20article:',_0x48c937),showNotification(_0x180d2a(0x2e8)+_0x48c937['message'],_0x180d2a(0x381));}}function setupTrophyManagementSection(){const _0x1e9d83=a0_0x350bb1,_0x352c91=document['getElementById'](_0x1e9d83(0x23c));_0x352c91&&_0x352c91[_0x1e9d83(0x1ec)](_0x1e9d83(0x3a3),function(){const _0x592401=_0x1e9d83;this['classList']['add']('loading'),this[_0x592401(0x1e7)]=_0x592401(0x2ee);const _0x5952e1=document['getElementById']('assign-trophy-image');_0x5952e1&&(_0x5952e1['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x74e0b3=_0x592401;this['classList'][_0x74e0b3(0x319)]('loading'),this[_0x74e0b3(0x1e7)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x2db37e=>{const _0x26704d=_0x592401;console[_0x26704d(0x381)]('Error\x20loading\x20trophies:',_0x2db37e),this[_0x26704d(0x382)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1d3590=_0x26704d;this[_0x1d3590(0x1e7)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x1aaaca=document[_0x1e9d83(0x345)]('create-new-trophy-btn');_0x1aaaca&&_0x1aaaca[_0x1e9d83(0x1ec)](_0x1e9d83(0x3a3),()=>{openTrophyModal();});const _0x52671c=document['getElementById']('trophy-form');_0x52671c&&_0x52671c['addEventListener']('submit',_0x270f73=>{_0x270f73['preventDefault'](),saveTrophyDefinition();});const _0x3052e3=document['getElementById']('cancel-trophy-btn');_0x3052e3&&_0x3052e3[_0x1e9d83(0x1ec)](_0x1e9d83(0x3a3),()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')[_0x1e9d83(0x3ab)](_0x5044e8=>{_0x5044e8['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x49be61=document['getElementById']('trophy-modal');_0x49be61&&_0x49be61['addEventListener']('click',_0x1d96df=>{_0x1d96df['target']===_0x49be61&&closeTrophyModal();});const _0x4858a1=document['getElementById']('assign-trophy-modal');_0x4858a1&&_0x4858a1[_0x1e9d83(0x1ec)]('click',_0x416e9e=>{const _0x1bf60f=_0x1e9d83;_0x416e9e[_0x1bf60f(0x364)]===_0x4858a1&&closeAssignTrophyModal();});const _0x306dcc=document['getElementById'](_0x1e9d83(0x2d4));_0x306dcc&&_0x306dcc['addEventListener'](_0x1e9d83(0x2fe),_0x1315ed=>{_0x1315ed['preventDefault'](),assignTrophyToPlayer();});const _0x1c524d=document['getElementById']('cancel-assign-btn');_0x1c524d&&_0x1c524d['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x32944a=document['getElementById']('trophy-image-url');_0x32944a&&(_0x32944a['addEventListener'](_0x1e9d83(0x295),updateTrophyImagePreview),_0x32944a[_0x1e9d83(0x1ec)]('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x192cd9=a0_0x350bb1,_0x5b993f=document['getElementById']('trophy-image-url')[_0x192cd9(0x180)][_0x192cd9(0x264)](),_0x32dd01=document['getElementById']('trophy-image-preview');if(!_0x32dd01){const _0x555791=document['getElementById'](_0x192cd9(0x2f3))['closest']('.form-group'),_0x4ec6aa=document[_0x192cd9(0x366)]('div');_0x4ec6aa['id']=_0x192cd9(0x258),_0x4ec6aa[_0x192cd9(0x2f2)]='trophy-preview-container',_0x555791['appendChild'](_0x4ec6aa);const _0xb9067c=document['createElement']('img');_0xb9067c['id']='trophy-preview-img',_0xb9067c['alt']='Trophy\x20Preview',_0xb9067c['onerror']=function(){const _0x6f42ba=_0x192cd9;this['src']=DEFAULT_TROPHY_IMAGE,this[_0x6f42ba(0x382)][_0x6f42ba(0x1b7)]('error');},_0x4ec6aa['appendChild'](_0xb9067c);}const _0x4807bb=document[_0x192cd9(0x345)]('trophy-preview-img');_0x5b993f?(_0x4807bb[_0x192cd9(0x1b8)]=_0x5b993f,_0x4807bb['style']['display']='block',_0x4807bb['classList']['remove'](_0x192cd9(0x381))):(_0x4807bb['src']=DEFAULT_TROPHY_IMAGE,_0x4807bb['style']['display']='block');}function a0_0x531a(_0x390107,_0x178cb3){const _0x346c70=a0_0x16d7();return a0_0x531a=function(_0x46d84d,_0x25fc88){_0x46d84d=_0x46d84d-0x15d;let _0x310886=_0x346c70[_0x46d84d];return _0x310886;},a0_0x531a(_0x390107,_0x178cb3);}async function loadTrophyDefinitions(){const _0x494f0f=a0_0x350bb1,_0x2b08fa=document[_0x494f0f(0x345)]('trophies-table-body');if(!_0x2b08fa)return;_0x2b08fa['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x3468ac=collection(db,_0x494f0f(0x22e)),_0x3a1577=query(_0x3468ac,orderBy('createdAt','desc')),_0x43441f=await getDocs(_0x3a1577);if(_0x43441f['empty']){_0x2b08fa['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x2b08fa[_0x494f0f(0x1e7)]='',_0x43441f['forEach'](_0x5ba579=>{const _0x19d77f=_0x494f0f,_0x4e8242=_0x5ba579['data'](),_0x374e59=document['createElement']('tr'),_0x1828ad=_0x4e8242['createdAt']?new Date(_0x4e8242['createdAt'][_0x19d77f(0x20f)]*0x3e8)['toLocaleString']():'N/A';_0x374e59['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x4e8242['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4e8242[_0x19d77f(0x385)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+_0x19d77f(0x35d)+(_0x4e8242[_0x19d77f(0x385)]||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x4e8242['rarity']||'common')+'\x22>'+(_0x4e8242['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1828ad+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x5ba579['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x5ba579['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x5ba579['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2b08fa['appendChild'](_0x374e59);}),setupTrophyActionButtons();}catch(_0x88316b){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x88316b),_0x2b08fa['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x88316b['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x27848d=a0_0x350bb1;document[_0x27848d(0x31e)](_0x27848d(0x327))['forEach'](_0x5e1365=>{const _0x2e32ac=_0x27848d;_0x5e1365['addEventListener'](_0x2e32ac(0x3a3),_0x4b4a6a=>{const _0x542e29=_0x4b4a6a['currentTarget']['dataset']['id'];openTrophyModal(_0x542e29);});}),document['querySelectorAll']('.assign-trophy-btn')[_0x27848d(0x3ab)](_0xa59d8=>{_0xa59d8['addEventListener']('click',_0xbb4d62=>{const _0x3d4f75=a0_0x531a,_0x536e0d=_0xbb4d62[_0x3d4f75(0x318)]['dataset']['id'];openAssignTrophyModal(_0x536e0d);});}),document['querySelectorAll'](_0x27848d(0x3c6))['forEach'](_0x295e35=>{const _0x283e81=_0x27848d;_0x295e35[_0x283e81(0x1ec)]('click',_0x5749c0=>{const _0x3bcbc1=_0x5749c0['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x3bcbc1);});});}function openTrophyModal(_0x3374a4=null){const _0x2679e5=a0_0x350bb1,_0x45bab1=document['getElementById']('trophy-modal'),_0x484b55=document['getElementById']('trophy-modal-title'),_0x2245db=document['getElementById']('trophy-form'),_0x19c9a3=document[_0x2679e5(0x345)](_0x2679e5(0x203));_0x2245db[_0x2679e5(0x191)](),_0x19c9a3[_0x2679e5(0x180)]='';const _0x1258aa=document['getElementById'](_0x2679e5(0x360));_0x1258aa&&(_0x1258aa['src']=DEFAULT_TROPHY_IMAGE,_0x1258aa['classList']['remove']('error')),_0x3374a4?(_0x484b55['textContent']='Edit\x20Trophy',_0x19c9a3['value']=_0x3374a4,loadTrophyData(_0x3374a4)):_0x484b55['textContent']='Create\x20New\x20Trophy',_0x45bab1['classList'][_0x2679e5(0x1b7)](_0x2679e5(0x2ab));}async function loadTrophyData(_0xe1d7b7){const _0x474d64=a0_0x350bb1;try{const _0x255a64=doc(db,'trophyDefinitions',_0xe1d7b7),_0x29f1f1=await getDoc(_0x255a64);if(!_0x29f1f1['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x2369c4=_0x29f1f1['data']();document['getElementById'](_0x474d64(0x31d))['value']=_0x2369c4[_0x474d64(0x385)]||'',document['getElementById']('trophy-description')['value']=_0x2369c4['description']||'',document['getElementById']('trophy-image-url')[_0x474d64(0x180)]=_0x2369c4['image']||'',document['getElementById'](_0x474d64(0x1bb))[_0x474d64(0x180)]=_0x2369c4['rarity']||'common',updateTrophyImagePreview();}catch(_0x19ab8d){console['error'](_0x474d64(0x2e7),_0x19ab8d),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function a0_0x16d7(){const _0x2fac16=['edit-highlight-winnerScore-input','highlight-title-container','edit-match-winner','\x20to\x20','lastVisible','validation-results-container','d1-next-page','user-ribbon-management','docs','User\x20','Dashboard\x20data\x20loaded\x20successfully','commit','Error\x20saving\x20highlight:','highlight-modal-title','user-roles-section','migrate-points-btn','includes','.admin-action','Winner\x20and\x20loser\x20usernames\x20are\x20required','182fWnOOL','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','Trophy\x20updated\x20successfully','cloneNode','18EMEyqI','selected-user-name','color','firstVisible','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20','Match\x20deleted\x20successfully','379272ylurJs','Wednesday','roleAssignedBy','load-ribbons-data','RejectedD2','removeEventListener','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22','Failed\x20to\x20modify\x20points:\x20','.quick-edit-btn','\x20not\x20found\x20in\x20any\x20ladder','\x20vs\x20','TestLoser','.sidebar-nav\x20.nav-item[data-section=\x22','Error\x20loading\x20dashboard\x20data:','.loading-cell','create-test-match-modal','input','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20','roleColor','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','manage-matches','quick-edit-points-form','demote-form','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','Creator\x20highlight\x20button\x20clicked','querySelector','playersD2','manage-ranks','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','d2-prev-page','\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22','info','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Collection\x20reference\x20created:','#article-modal\x20.close-btn','You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','active','\x20points','approvedMatchesD2','\x20(from\x20','Create\x20test\x20match\x20form\x20not\x20found','daysSinceMatch','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','award-all-pilots-btn','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','Initializing\x20points\x20field\x20for\x20user\x20','action','edit-match-winner-comment','name-asc','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancel-quick-edit','selected-user-info','loserDemoLink','block','highlight-creator-image-container','highlight-map-version','edit-highlight-playerProfileUrl-input','disabled','6633110fXQNrZ','20px','rankDistribution','.player','keypress','Bulk\x20award\x20to\x20all\x20pilots\x20(','unknown','article-modal','roleAssignedAt','Error\x20awarding\x20item:','edit-match-loser-score','cells','edit-match-map','confirm-resimulate-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','low-points','winnerName','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20','highlight-loser-score','assign-trophy-form','dashboard','eloHistory','Attaching\x20background\x20click\x20listener.','no-results-message','Page\x201','quick-points-reason','Loading...','approvedMatches','demotedBy','toLowerCase','Demoting\x20player\x20to\x20','submittedBy','\x20ladder','Error\x20saving\x20article:','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','Failed\x20to\x20assign\x20trophy:\x20','promote-player-btn','preventDefault','Error\x20loading\x20trophy\x20data:','Failed\x20to\x20delete\x20article:\x20','Modal\x20should\x20now\x20be\x20visible','Displaying\x20','#d32f2f','entries','Subtracted\x20','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','empty-state','\x20points\x20to\x20','loading-cell','className','trophy-image-url','144gVImAt','quick-edit-current-points','searchTerm','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','activity','return\x20(function()\x20','email','message','matchLink','No\x20specific\x20permissions\x20for\x20user\x20','submit','save-player-btn','title','\x20inactive\x20players','description','data-ladder','loading','Loading\x20user\x20data...','dataset','playersD3','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','ribbon-user-search','Player\x20not\x20found\x20in\x20','eloHistoryD2','edit-match-loser-comment','MAX_SAFE_INTEGER','.section-header','allUsersPoints','highlight-winner-name','notification\x20','losses','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Setting\x20up\x20highlight\x20buttons','roleName','.admin-section','load-articles-data','currentTarget','remove','.form-group,\x20.form-row','border','achievementType','trophy-name','querySelectorAll','User\x20\x22','cancel-promote-btn','mapName','playerRibbons','reason','.view-player-btn','.remove-ribbon-btn','edit-match-modal','.edit-trophy-btn','settings','padding','creator','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','mapCreator','inactive-days-filter','No\x20user\x20ID\x20found\x20on\x20button','Trophy\x20definition\x20deleted\x20successfully','highlight-achievement-image','error-state','borderRadius','Error\x20loading\x20articles:','matches-search','highlight-description','role-username','</td></tr>','prototype','Error\x20saving\x20trophy:','eloRating','previousPoints','checked','type','#users-table-body\x20tr[data-username=\x22','matchInfo','currentUser','Bronze','Player\x20\x22','set-role-modal','role-filter','getElementById','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','matches-table-body','warn','modifiedBy','get','Article\x20not\x20found','new-player-username','highlight-map-creator-container','data','\x20already\x20exists\x20in\x20','Failed\x20to\x20load\x20match\x20data','RejectedD3','highlight-players-container','highlight-achievement-player-container','rank-distribution-chart','nonexistent','Article\x20updated\x20successfully','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','edit-elo','Error\x20resimulating\x20match:','\x20D3\x20matches.\x20','Highlight\x20not\x20found','promote-username','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','articles','Trophy\x20created\x20successfully','trophy-preview-img','.delete-match-btn','article-content','#CD7F32','target','matches-end-date','createElement','Trophy\x20\x22','displayName','.empty-state','toDate','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','timestamp','No\x20ELO\x20history\x20found\x20for\x20player\x20','length','Error:\x20','page','flex','Successfully\x20promoted\x20','elo','\x20Rank\x20Distribution','highlight-achievement-details','Switched\x20to\x20','209LIrupH','replaceChild','selected-user-id','match-count','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','No\x20matches\x20found','Test\x20match','Error\x20loading\x20highlight:','error','classList','Error\x20setting\x20custom\x20ELO:','#FFD700','name','newElo','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','Error\x20loading\x20users:','Found\x20user\x20in\x20','users-table-body','Saturday','.nav-item','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','31346lfDZEv','size','userId','#e0e0e0','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','trophy-modal','change','approvedAt','Error\x20loading\x20match\x20data:','success','ladder','initial_placement','highlight-modal','assign-trophy-modal','bulk-award-points-btn','edit-match-title','edit-highlight-creatorImageUrl-input','manage-points','highlight-submitted-by-container','edit-highlight-description-input','click','slice','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','winnerDemoLink','Points\x20action\x20buttons\x20setup\x20complete','resimulation','highlight-type','all','forEach','manage-ribbons','Found\x20','source','matchId','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','\x20users','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','Starting\x20points\x20award\x20process...','DOMContentLoaded','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','approvedMatchesD3','visibility','keys','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','Deleting\x20match\x20','winnerUsername','loserUsername','has','edit-highlight-achievementPlayer-input','YouTube\x20Video\x20ID\x20(Optional)','highlight-achievement-image-container','removeAttribute','highlight-submitted-by','points','Unranked','map','.delete-trophy-btn','push','\x20ladder!','All\x20fields\x20are\x20required','Error\x20removing\x20ribbon:','3JUCaum','toLocaleString','add-ribbon-form','\x27</td>','article-author','lastPointsModified','Setting\x20up\x20Manage\x20Points\x20section','Never','Using\x20collection:\x20','log','Setting\x20up\x20create\x20test\x20match\x20button','Found\x20ELO\x20history\x20for\x20player\x20','Error\x20loading\x20players:','sources','mapPlayed','admin','Error','Loading\x20dashboard\x20overview\x20data...','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','highlights-table-body','quick-points-amount','username','lastUpdated','highlight-map','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','ribbon-level','Please\x20enter\x20valid\x20username\x20and\x20ELO','\x20already\x20processed\x20matches.\x20Errors:\x20','points-desc','backgroundColor','Trophy\x20ID\x20and\x20username\x20are\x20required','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','rejected-count','Error\x20in\x20award\x20points\x20to\x20all\x20pilots:','empty','highlight-id','6SvPBBH','points-overview-table-body','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','1244061FAFxUH','value','N/A','Error\x20finding\x20match:','2848085rzAuTd','endDate','Create\x20test\x20match\x20button\x20setup\x20complete','load-inactive-players-data','edit-match-ladder','#matches-table-body\x20tr','\x20-\x20','stopPropagation','Load\x20inactive\x20players\x20data\x20clicked','Edit\x20','edit-highlight-loserScore-input','Attaching\x20cancel\x20button\x20listener.','toLocaleDateString','points-user-search','reset','View\x20history\x20clicked\x20for\x20user:','#808080','hidden','Article\x20created\x20successfully','load-elo-history-data','required','manage-articles','achievement-type','.error-state','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','points-history-table-body','none','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Quick\x20edit\x20clicked\x20for\x20user:','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','award-item-form','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','current-ribbons-list','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','then','#50C878','highlight-video-preview','localeCompare','highlight-achievement-details-container','Unknown\x20User','edit-losses','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','edit-match-loser-suicides','nonParticipants','userProfiles','set-role-form','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','uid','display','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','add','src','pointsHistory','mapVersion','trophy-rarity','TestWinner','Gold','data-section','\x20(winner)\x20vs\x20','lastMatch','Non-Participants','./promotions.js','confirmResimulateMatch','Error\x20loading\x20ribbons:','72240toQBfz','Unknown','winnerScore','elo-history','quick-edit-display-name','\x20points.\x20Skipped\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','Match\x20ID\x20or\x20ladder\x20missing','highlight-loser-name','Modal\x20cancel\x20button\x20clicked','achievementPlayer','cancel-article-btn','User\x20not\x20found','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','Query\x20executed.\x20Empty:','getAttribute','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','set-elo-form','edit-highlight-map-input','highlight-match-info-container','highlight-video-id','Creator','\x20D1\x20pilots,\x20','Title\x20and\x20content\x20are\x20required','Modal\x20close\x20button\x20clicked','Please\x20fill\x20all\x20fields','ribbons','highlight-video-preview-container','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','textContent','edit-username','Unknown\x20Admin','UserProfile','set','innerHTML','d3-next-page','User\x20has\x20','players','role-color','addEventListener','Title\x20is\x20required','\x20(+','assign-trophy-id','reset-history-filters','pending-count','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','Error\x20in\x20demotion:','\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?','loserName','substring','\x20for\x20user\x20\x22','playerProfileUrl','quick-add','warning','promotion','Matches\x20Played','delete-match-confirm-modal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','catch','highlight-player-profile','parentNode','style','trophy-id','Untitled','string','510734vKaBdD','#ffffff','No\x20users\x20needed\x20points\x20field\x20initialization','amount','creatorImageUrl','1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)','highlight-map-creator','inactive-players','Modal\x20element\x20found:','seconds','ref','edit-match-loser-demo','appendChild','high-points','Player\x20Achievement','player','Looking\x20for\x20user\x20role\x20information\x20for\x20','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','Matches\x20action\x20buttons\x20setup\x20complete','createdAt','videoId','Manage\x20Ribbons\x20section\x20initialized','player-count','article-form','replace','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','resimulate-modal','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','matchDate','Player\x20updated\x20successfully','exists','ribbon-target-user','resimulate-match-id','\x20not\x20found.','Please\x20enter\x20a\x20username','No\x20email','match','startDate','closest','trophyDefinitions','0.6',',\x20giving\x20default\x20access','\x20(based\x20on\x20data-role:\x20','desc','edit-match-winner-suicides','getRankName','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','trophy-rarity\x20','Load\x20ribbons\x20data\x20clicked','Modal\x20opened\x20successfully','author','\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded','demote-modal','load-trophies-data','\x20→\x20','Invalid\x20points\x20amount','loserScore','1552aTILHg','user-search-results','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','manage-trophies','Error\x20loading\x20points\x20data:','.username','manage-players','subtract','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','Match\x20not\x20found\x20in\x20approved\x20matches','achievementImageUrl','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','eloHistoryD3','Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20','Error\x20deleting\x20match:','sendPromotionNotification','Failed\x20to\x20delete\x20trophy:\x20','playerId','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','update','sort','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','Error\x20initializing\x20dashboard:','match-row','trophy-image-preview','highlight-form','\x20in\x20','Match\x20not\x20found','assign-trophy-name','Quick\x20edit\x20form\x20submitted','Invalid\x20action','split','Create\x20test\x20match\x20form\x20submitted','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','Defaulted\x20to\x20D1\x20ladder','trim','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','contains','highlights'];a0_0x16d7=function(){return _0x2fac16;};return a0_0x16d7();}async function saveTrophyDefinition(){const _0x2c1a46=a0_0x350bb1;try{const _0x44c902=document['getElementById']('trophy-id')['value'],_0x59ae0c=document['getElementById'](_0x2c1a46(0x31d))[_0x2c1a46(0x180)][_0x2c1a46(0x264)](),_0x328d4d=document[_0x2c1a46(0x345)]('trophy-description')[_0x2c1a46(0x180)]['trim'](),_0x238038=document[_0x2c1a46(0x345)]('trophy-image-url')['value'][_0x2c1a46(0x264)](),_0x353049=document['getElementById']('trophy-rarity')[_0x2c1a46(0x180)];if(!_0x59ae0c||!_0x328d4d||!_0x238038){showNotification(_0x2c1a46(0x3c9),_0x2c1a46(0x381));return;}const _0x1e3633=auth['currentUser'];if(!_0x1e3633){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x31de8d={'name':_0x59ae0c,'description':_0x328d4d,'image':_0x238038,'rarity':_0x353049,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x1e3633['email']};!_0x44c902?(_0x31de8d['createdAt']=serverTimestamp(),_0x31de8d['createdBy']=_0x1e3633[_0x2c1a46(0x2fa)],await addDoc(collection(db,'trophyDefinitions'),_0x31de8d),showNotification(_0x2c1a46(0x35f),'success')):(await updateDoc(doc(db,'trophyDefinitions',_0x44c902),_0x31de8d),showNotification(_0x2c1a46(0x27d),'success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x5739c1){console['error'](_0x2c1a46(0x339),_0x5739c1),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x5739c1['message'],'error');}}function closeTrophyModal(){const _0x3689df=a0_0x350bb1,_0x1230c0=document[_0x3689df(0x345)](_0x3689df(0x394));_0x1230c0&&_0x1230c0[_0x3689df(0x382)][_0x3689df(0x319)](_0x3689df(0x2ab));}async function confirmDeleteTrophy(_0x21c1df){const _0x55c237=a0_0x350bb1;if(!_0x21c1df){console['error'](_0x55c237(0x2b3));return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x3421c6=auth['currentUser'];if(!_0x3421c6){showNotification(_0x55c237(0x21f),'error');return;}console[_0x55c237(0x160)](_0x55c237(0x24d)+_0x21c1df),await deleteDoc(doc(db,'trophyDefinitions',_0x21c1df)),showNotification(_0x55c237(0x32f),'success'),loadTrophyDefinitions();}catch(_0x413b42){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x413b42),showNotification(_0x55c237(0x250)+_0x413b42['message'],'error');}}async function openAssignTrophyModal(_0x32244b){const _0x7ccc26=a0_0x350bb1;try{const _0x3b1333=doc(db,_0x7ccc26(0x22e),_0x32244b),_0x11dbbe=await getDoc(_0x3b1333);if(!_0x11dbbe['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x779120=_0x11dbbe['data']();document['getElementById'](_0x7ccc26(0x1ef))[_0x7ccc26(0x180)]=_0x32244b,document['getElementById'](_0x7ccc26(0x25c))['value']=_0x779120['name'],document['getElementById']('assign-trophy-image')['src']=_0x779120['image']||DEFAULT_TROPHY_IMAGE,document[_0x7ccc26(0x345)]('assign-trophy-title')['textContent']=_0x779120[_0x7ccc26(0x385)]||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x779120['description']||'No\x20description';const _0xfcb4c7=document['getElementById']('assign-trophy-rarity');_0xfcb4c7[_0x7ccc26(0x1e2)]=_0x779120['rarity']||'common',_0xfcb4c7[_0x7ccc26(0x2f2)]=_0x7ccc26(0x236)+(_0x779120['rarity']||'common');const _0x462630=document['getElementById'](_0x7ccc26(0x39c));_0x462630['classList']['add'](_0x7ccc26(0x2ab));}catch(_0x3b6f0c){console[_0x7ccc26(0x381)]('Error\x20opening\x20assign\x20trophy\x20modal:',_0x3b6f0c),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x1918d6=a0_0x350bb1,_0x1904b1=document[_0x1918d6(0x345)](_0x1918d6(0x39c));_0x1904b1&&_0x1904b1['classList']['remove'](_0x1918d6(0x2ab));}async function assignTrophyToPlayer(){const _0x50bbb0=a0_0x350bb1;try{const _0xe31ff1=document['getElementById']('assign-trophy-id')[_0x50bbb0(0x180)],_0x1bdfaf=document['getElementById'](_0x50bbb0(0x25c))['value'],_0x33d1ad=document[_0x50bbb0(0x345)]('assign-player-username')['value']['trim'](),_0x244f64=document[_0x50bbb0(0x29f)]('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0xe31ff1||!_0x33d1ad){showNotification(_0x50bbb0(0x175),'error');return;}const _0x33e11c=auth['currentUser'];if(!_0x33e11c){showNotification(_0x50bbb0(0x2a9),'error');return;}let _0x2bf68f=null,_0x5c6758=null,_0xb67b77=null;if(_0x244f64==='non-participant'){const _0x10becc=collection(db,'nonParticipants'),_0x1698cf=query(_0x10becc,where('username','==',_0x33d1ad)),_0x1085df=await getDocs(_0x1698cf);!_0x1085df['empty']&&(_0x2bf68f=_0x1085df['docs'][0x0],_0x5c6758=_0x2bf68f['id'],_0xb67b77=_0x2bf68f['data']());}else{const _0x445c1b=_0x244f64==='D1'?'players':_0x244f64==='D2'?'playersD2':_0x50bbb0(0x307),_0xa1866=collection(db,_0x445c1b),_0x58e472=query(_0xa1866,where('username','==',_0x33d1ad)),_0x1019b9=await getDocs(_0x58e472);!_0x1019b9['empty']&&(_0x2bf68f=_0x1019b9['docs'][0x0],_0x5c6758=_0x2bf68f['id'],_0xb67b77=_0x2bf68f['data']());}if(!_0x2bf68f){showNotification(_0x50bbb0(0x342)+_0x33d1ad+'\x22\x20not\x20found\x20in\x20'+(_0x244f64==='non-participant'?'non-participants':_0x244f64+_0x50bbb0(0x2e1)),'error');return;}const _0x5effb6=collection(db,'userTrophies'),_0x337f65=query(_0x5effb6,where('userId','==',_0x5c6758),where('trophyId','==',_0xe31ff1)),_0x2a83bc=await getDocs(_0x337f65);if(!_0x2a83bc[_0x50bbb0(0x179)]){showNotification('Player\x20\x22'+_0x33d1ad+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x5c6758,'playerUsername':_0x33d1ad,'trophyId':_0xe31ff1,'awardedAt':serverTimestamp(),'awardedBy':_0x33e11c['email'],'ladder':_0x244f64}),showNotification(_0x50bbb0(0x367)+_0x1bdfaf+'\x22\x20awarded\x20to\x20'+_0x33d1ad,'success'),closeAssignTrophyModal();}catch(_0x6df352){console['error']('Error\x20assigning\x20trophy:',_0x6df352),showNotification(_0x50bbb0(0x2e4)+_0x6df352['message'],'error');}}function setupInactivePlayersSection(){const _0x502e64=a0_0x350bb1,_0x1694cd=document[_0x502e64(0x345)](_0x502e64(0x32d));_0x1694cd&&_0x1694cd[_0x502e64(0x1ec)]('change',function(){const _0xf43d32=_0x502e64,_0x41f308=document[_0xf43d32(0x345)](_0xf43d32(0x186));if(_0x41f308)_0x41f308['click']();});const _0x1af311=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x4b8032=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x1af311&&_0x4b8032&&(_0x1af311['addEventListener'](_0x502e64(0x395),function(){const _0x4f9c96=_0x502e64;if(this[_0x4f9c96(0x33c)]){currentLadder='D1';if(document[_0x4f9c96(0x345)]('inactive-players')[_0x4f9c96(0x202)][_0x4f9c96(0x1b5)]!==_0x4f9c96(0x19d)){const _0x2f3763=document['getElementById'](_0x4f9c96(0x186));if(_0x2f3763)_0x2f3763['click']();}}}),_0x4b8032['addEventListener']('change',function(){const _0x438bbf=_0x502e64;if(this[_0x438bbf(0x33c)]){currentLadder='D2';if(document['getElementById'](_0x438bbf(0x20d))['style']['display']!=='none'){const _0x312fc3=document[_0x438bbf(0x345)]('load-inactive-players-data');if(_0x312fc3)_0x312fc3['click']();}}}));const _0x3fef2f=document[_0x502e64(0x345)]('inactive-players-search');_0x3fef2f&&_0x3fef2f['addEventListener']('input',debounce(function(){const _0x33b935=_0x3fef2f['value']['toLowerCase'](),_0xb3b770=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0xb3b770['forEach'](_0x2d7fd7=>{const _0x37bec3=a0_0x531a;if(_0x2d7fd7[_0x37bec3(0x29f)](_0x37bec3(0x293))||_0x2d7fd7[_0x37bec3(0x29f)]('.empty-state')||_0x2d7fd7['querySelector'](_0x37bec3(0x19a)))return;const _0x361488=_0x2d7fd7['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x398c16=_0x2d7fd7['cells'][0x5]?.['textContent'][_0x37bec3(0x2de)]()||'';_0x361488['includes'](_0x33b935)||_0x398c16['includes'](_0x33b935)?_0x2d7fd7['style'][_0x37bec3(0x1b5)]='':_0x2d7fd7['style']['display']=_0x37bec3(0x19d);});},0x12c)),document[_0x502e64(0x1ec)](_0x502e64(0x3a3),function(_0x4b256d){const _0xe0f4e5=_0x502e64;if(_0x4b256d['target'][_0xe0f4e5(0x22d)]('.view-player-btn')){const _0x503851=_0x4b256d[_0xe0f4e5(0x364)]['closest'](_0xe0f4e5(0x324)),_0xe89e28=_0x503851[_0xe0f4e5(0x306)]['username'];_0xe89e28&&alert('View\x20player\x20details\x20for\x20'+_0xe89e28+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x3321a1=a0_0x350bb1,_0x687ee9=document['getElementById']('inactive-players-table-body');if(!_0x687ee9)return;_0x687ee9['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x5f5d08=document['getElementById']('inactive-days-filter'),_0x482600=_0x5f5d08?parseInt(_0x5f5d08[_0x3321a1(0x180)])||0x0:0x0,_0x523c1a=collection(db,currentLadder==='D1'?'players':'playersD2'),_0xcbe480=await getDocs(_0x523c1a);if(_0xcbe480['empty']){_0x687ee9['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x28e130=[];_0xcbe480['forEach'](_0x3640ed=>{const _0x5cfbef=_0x3321a1,_0x5b000b=_0x3640ed[_0x5cfbef(0x34e)]();_0x28e130[_0x5cfbef(0x3c7)]({..._0x5b000b,'id':_0x3640ed['id'],'username':_0x5b000b[_0x5cfbef(0x16c)]||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x28e130[_0x3321a1(0x36e)]+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x5ebe18=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x43cad3=_0x28e130['map'](async _0xfef5d=>{const _0x38410c=_0x3321a1;try{const _0x12d613=collection(db,_0x5ebe18),_0x435431=query(_0x12d613,or(where('winnerUsername','==',_0xfef5d['username']),where('loserUsername','==',_0xfef5d['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0x4ebf98=await getDocs(_0x435431);if(!_0x4ebf98['empty']){const _0x510c04=_0x4ebf98['docs'][0x0][_0x38410c(0x34e)](),_0x36e6cb=_0x510c04['approvedAt']?new Date(_0x510c04[_0x38410c(0x396)][_0x38410c(0x20f)]*0x3e8):null,_0x184f9c=new Date(),_0x52b7b1=_0x36e6cb?Math['floor']((_0x184f9c-_0x36e6cb)/(0x3e8*0x3c*0x3c*0x18)):null,_0x59573f=_0x510c04['winnerUsername']===_0xfef5d['username']?_0x510c04['loserUsername']:_0x510c04['winnerUsername'],_0x259353=_0x510c04[_0x38410c(0x3bb)]===_0xfef5d['username']?'Won':'Lost';return{..._0xfef5d,'lastMatch':{'date':_0x36e6cb?_0x36e6cb['toLocaleDateString']():_0x38410c(0x181),'opponent':_0x59573f||_0x38410c(0x1c6),'result':_0x259353,'timestamp':_0x36e6cb||new Date(0x0),'daysSinceMatch':_0x52b7b1||Number['MAX_SAFE_INTEGER']}};}else return{..._0xfef5d,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':_0x38410c(0x181),'timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x428375){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0xfef5d['username']+':',_0x428375),{..._0xfef5d,'lastMatch':{'date':_0x38410c(0x167),'opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x3590cf=await Promise['all'](_0x43cad3);_0x3590cf['sort']((_0x10d8e8,_0x9391eb)=>_0x9391eb['lastMatch']['daysSinceMatch']-_0x10d8e8['lastMatch']['daysSinceMatch']);_0x482600>0x0&&(_0x3590cf=_0x3590cf['filter'](_0x20121c=>_0x20121c['lastMatch']['daysSinceMatch']>=_0x482600));_0x687ee9['innerHTML']='';if(_0x3590cf['length']===0x0){_0x687ee9[_0x3321a1(0x1e7)]=_0x3321a1(0x248);return;}_0x3590cf[_0x3321a1(0x3ab)](_0x2ae342=>{const _0x18a7f3=_0x3321a1,_0x28ad18=document['createElement']('tr'),_0x2dc600=_0x2ae342[_0x18a7f3(0x1c0)][_0x18a7f3(0x2b0)]>0x1e?'highly-inactive':_0x2ae342['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x28ad18['className']=_0x2dc600,_0x28ad18['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2ae342[_0x18a7f3(0x16c)]+_0x18a7f3(0x265)+(_0x2ae342['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2ae342[_0x18a7f3(0x1c0)]['date']+_0x18a7f3(0x265)+(_0x2ae342['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x2ae342[_0x18a7f3(0x1c0)]['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2ae342[_0x18a7f3(0x1c0)]['date']==='Never\x20played'?_0x18a7f3(0x37e):_0x2ae342[_0x18a7f3(0x1c0)]['result']+'\x20vs\x20'+_0x2ae342[_0x18a7f3(0x1c0)]['opponent'])+_0x18a7f3(0x28b)+_0x2ae342['username']+_0x18a7f3(0x2b8),_0x687ee9['appendChild'](_0x28ad18);}),console['log'](_0x3321a1(0x2ea)+_0x3590cf['length']+_0x3321a1(0x301));}catch(_0x346a88){console[_0x3321a1(0x381)]('Error\x20loading\x20inactive\x20players:',_0x346a88),_0x687ee9['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x346a88['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x47c14d=a0_0x350bb1;console['log'](_0x47c14d(0x314));const _0x3c5627=document['getElementById']('create-match-highlight-btn');_0x3c5627&&_0x3c5627['addEventListener']('click',function(){const _0x27c394=_0x47c14d;console[_0x27c394(0x160)]('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x323a0c=document['getElementById']('create-creator-highlight-btn');_0x323a0c&&_0x323a0c[_0x47c14d(0x1ec)]('click',function(){const _0x4cdb94=_0x47c14d;console['log'](_0x4cdb94(0x29e)),openHighlightModal('creator');});const _0x10e63f=document['getElementById']('create-achievement-highlight-btn');_0x10e63f&&_0x10e63f[_0x47c14d(0x1ec)]('click',function(){const _0x129e86=_0x47c14d;console[_0x129e86(0x160)]('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x35200b='match'){const _0x1853c7=a0_0x350bb1;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x35200b);const _0x4141ac=document['getElementById'](_0x1853c7(0x39b)),_0x274e43=document['getElementById']('highlight-form'),_0x4ab226=document['getElementById'](_0x1853c7(0x275)),_0x8c26e6=document['getElementById'](_0x1853c7(0x17a));if(!_0x4141ac||!_0x274e43||!_0x4ab226){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x274e43['reset'](),_0x8c26e6['value']='';const _0x15b142=['match','creator','achievement'],_0x48d9c1=!_0x15b142[_0x1853c7(0x278)](_0x35200b);if(_0x48d9c1){const _0x394f03=_0x35200b;_0x8c26e6['value']=_0x394f03,_0x4ab226['textContent']=_0x1853c7(0x2db),loadHighlightDataAdmin(_0x394f03);}else{const _0x5c0bd3=_0x35200b;document['getElementById'](_0x1853c7(0x3a9))['value']=_0x5c0bd3,_0x4ab226['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x5c0bd3),toggleHighlightFields(_0x5c0bd3);const _0x3996e2=auth[_0x1853c7(0x340)];_0x3996e2&&document['getElementById']('highlight-submitted-by')&&(document[_0x1853c7(0x345)]('highlight-submitted-by')['value']=_0x3996e2['displayName']||_0x3996e2[_0x1853c7(0x2fa)]);}_0x4141ac[_0x1853c7(0x382)]['add'](_0x1853c7(0x2ab));}function toggleHighlightFields(_0x46c3b6){const _0x584fe1=a0_0x350bb1;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x46c3b6);const _0x1c9a54=document['getElementById'](_0x584fe1(0x259));if(!_0x1c9a54)return;const _0x2772aa=_0x1c9a54[_0x584fe1(0x31e)](_0x584fe1(0x31a));_0x2772aa[_0x584fe1(0x3ab)](_0x341014=>_0x341014['style']['display']=_0x584fe1(0x19d));const _0x1e2a27=document[_0x584fe1(0x345)]('highlight-video-preview-container');if(_0x1e2a27)_0x1e2a27['style'][_0x584fe1(0x1b5)]='none';const _0xbff4b=[_0x584fe1(0x269),'highlight-description-container',_0x584fe1(0x3a1)];_0xbff4b['forEach'](_0x3877d7=>{const _0x46d7fc=_0x584fe1,_0x2e711d=document['getElementById'](_0x3877d7);if(_0x2e711d)_0x2e711d[_0x46d7fc(0x202)]['display']='block';});if(_0x46c3b6==='match'){const _0x8b3727=['highlight-video-container',_0x584fe1(0x1d8),'highlight-map-container','highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x8b3727['forEach'](_0x535ad0=>{const _0x238257=_0x584fe1,_0x47704c=document[_0x238257(0x345)](_0x535ad0);_0x47704c&&(_0x535ad0===_0x238257(0x352)?_0x47704c['style']['display']=_0x238257(0x371):_0x47704c['style']['display']='block');});const _0x3905c3=document['getElementById'](_0x584fe1(0x1d9));if(_0x3905c3){_0x3905c3['required']=!![];const _0x322a54=_0x3905c3['previousElementSibling'];if(_0x322a54)_0x322a54['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x1e2a27)_0x1e2a27['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x46c3b6==='creator'){const _0x33ac29=['highlight-map-container',_0x584fe1(0x34d),'highlight-map-version-container',_0x584fe1(0x2bd),'highlight-video-container'];_0x33ac29[_0x584fe1(0x3ab)](_0x5754dd=>{const _0xc0b7ec=_0x584fe1,_0x5a0cd4=document[_0xc0b7ec(0x345)](_0x5754dd);if(_0x5a0cd4)_0x5a0cd4[_0xc0b7ec(0x202)]['display']='block';});const _0x507a45=document['getElementById'](_0x584fe1(0x1d9));if(_0x507a45){_0x507a45[_0x584fe1(0x197)]=![];const _0x5bdfbc=_0x507a45['previousElementSibling'];if(_0x5bdfbc)_0x5bdfbc['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x46c3b6==='achievement'){const _0x37f4cf=[_0x584fe1(0x353),'highlight-achievement-type-container',_0x584fe1(0x1a9),'highlight-player-profile-container',_0x584fe1(0x3c0),'highlight-video-container'];_0x37f4cf[_0x584fe1(0x3ab)](_0xa8bee5=>{const _0x591226=_0x584fe1,_0x14bbdd=document['getElementById'](_0xa8bee5);if(_0x14bbdd)_0x14bbdd['style'][_0x591226(0x1b5)]=_0x591226(0x2bc);});const _0x52734e=document[_0x584fe1(0x345)]('highlight-video-id');if(_0x52734e){_0x52734e['required']=![];const _0x44a152=_0x52734e['previousElementSibling'];if(_0x44a152)_0x44a152['innerHTML']=_0x584fe1(0x3bf);}}}}}async function loadHighlightDataAdmin(_0x53c9fb){const _0xfadcfb=a0_0x350bb1;try{const _0x2a791b=doc(db,'highlights',_0x53c9fb),_0x5d4202=await getDoc(_0x2a791b);if(!_0x5d4202['exists']()){showNotification(_0xfadcfb(0x35b),_0xfadcfb(0x381));return;}const _0x2afdd2=_0x5d4202['data'](),_0x4b9e61=_0x2afdd2['type']||'match';document['getElementById']('highlight-modal-title')['textContent']=_0xfadcfb(0x18c)+getHighlightTypeName(_0x4b9e61),document['getElementById']('highlight-type')['value']=_0x4b9e61,toggleHighlightFields(_0x4b9e61),document['getElementById']('highlight-title')['value']=_0x2afdd2['title']||'',document['getElementById'](_0xfadcfb(0x335))['value']=_0x2afdd2[_0xfadcfb(0x302)]||'',document['getElementById']('highlight-submitted-by')['value']=_0x2afdd2[_0xfadcfb(0x2e0)]||'';_0x2afdd2['videoId']&&(document[_0xfadcfb(0x345)]('highlight-video-id')['value']=_0x2afdd2['videoId'],updateHighlightVideoPreview());if(_0x4b9e61==='match'){document['getElementById']('highlight-match-info')[_0xfadcfb(0x180)]=_0x2afdd2[_0xfadcfb(0x33f)]||'',document[_0xfadcfb(0x345)]('highlight-map')['value']=_0x2afdd2['map']||'';if(_0x2afdd2['matchDate']){const _0x189346=new Date(_0x2afdd2[_0xfadcfb(0x223)]['seconds']*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x189346['toISOString']()['split']('T')[0x0];}document['getElementById'](_0xfadcfb(0x310))['value']=_0x2afdd2[_0xfadcfb(0x2d1)]||'',document['getElementById']('highlight-winner-score')['value']=_0x2afdd2[_0xfadcfb(0x1c7)]||'',document['getElementById']('highlight-loser-name')['value']=_0x2afdd2[_0xfadcfb(0x1f5)]||'',document[_0xfadcfb(0x345)](_0xfadcfb(0x2d3))['value']=_0x2afdd2['loserScore']||'',document['getElementById']('highlight-match-link')[_0xfadcfb(0x180)]=_0x2afdd2[_0xfadcfb(0x2fc)]||'';}else{if(_0x4b9e61===_0xfadcfb(0x32a))document['getElementById'](_0xfadcfb(0x16e))['value']=_0x2afdd2['map']||'',document['getElementById'](_0xfadcfb(0x20c))['value']=_0x2afdd2['mapCreator']||'',document[_0xfadcfb(0x345)](_0xfadcfb(0x2be))['value']=_0x2afdd2['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x2afdd2['creatorImageUrl']||'';else _0x4b9e61==='achievement'&&(document[_0xfadcfb(0x345)]('highlight-achievement-player')['value']=_0x2afdd2['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x2afdd2[_0xfadcfb(0x31c)]||'',document[_0xfadcfb(0x345)]('highlight-achievement-details')['value']=_0x2afdd2['achievementDetails']||'',document[_0xfadcfb(0x345)](_0xfadcfb(0x200))[_0xfadcfb(0x180)]=_0x2afdd2['playerProfileUrl']||'',document[_0xfadcfb(0x345)]('highlight-achievement-image')['value']=_0x2afdd2[_0xfadcfb(0x24a)]||'');}}catch(_0x35cf71){console[_0xfadcfb(0x381)](_0xfadcfb(0x380),_0x35cf71),showNotification('Error\x20loading\x20highlight:\x20'+_0x35cf71['message'],_0xfadcfb(0x381));}}async function saveHighlight(){const _0x1ab7f5=a0_0x350bb1;try{const _0x15f176=document['getElementById']('highlight-id')?.[_0x1ab7f5(0x180)]||'',_0x26c8b5=document['getElementById']('highlight-type')?.['value']||'match',_0x329c06={'title':document[_0x1ab7f5(0x345)]('highlight-title')?.['value']?.[_0x1ab7f5(0x264)]()||'','description':document['getElementById'](_0x1ab7f5(0x335))?.[_0x1ab7f5(0x180)]?.[_0x1ab7f5(0x264)]()||'','submittedBy':document[_0x1ab7f5(0x345)](_0x1ab7f5(0x3c2))?.[_0x1ab7f5(0x180)]?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.[_0x1ab7f5(0x180)]?.[_0x1ab7f5(0x264)]()||null,'type':_0x26c8b5};if(!_0x329c06['title']){showNotification(_0x1ab7f5(0x1ed),_0x1ab7f5(0x381));return;}if(_0x26c8b5===_0x1ab7f5(0x22b)){_0x329c06['matchInfo']=document['getElementById']('highlight-match-info')?.['value']?.[_0x1ab7f5(0x264)]()||'',_0x329c06['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'';const _0x48b25c=document['getElementById']('highlight-match-date'),_0x5cdbd1=_0x48b25c?.['value']||'';_0x329c06[_0x1ab7f5(0x223)]=_0x5cdbd1?Timestamp['fromDate'](new Date(_0x5cdbd1)):null,_0x329c06['winnerName']=document['getElementById']('highlight-winner-name')?.['value']?.[_0x1ab7f5(0x264)]()||'',_0x329c06['winnerScore']=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x329c06[_0x1ab7f5(0x1f5)]=document['getElementById'](_0x1ab7f5(0x1cd))?.[_0x1ab7f5(0x180)]?.['trim']()||'',_0x329c06['loserScore']=document['getElementById']('highlight-loser-score')?.[_0x1ab7f5(0x180)]?.['trim']()||'',_0x329c06['matchLink']=document[_0x1ab7f5(0x345)]('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x329c06[_0x1ab7f5(0x21a)]){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x26c8b5===_0x1ab7f5(0x32a)){_0x329c06['map']=document[_0x1ab7f5(0x345)]('highlight-map')?.['value']?.[_0x1ab7f5(0x264)]()||'',_0x329c06[_0x1ab7f5(0x32c)]=document[_0x1ab7f5(0x345)]('highlight-map-creator')?.[_0x1ab7f5(0x180)]?.['trim']()||'',_0x329c06[_0x1ab7f5(0x1ba)]=document[_0x1ab7f5(0x345)](_0x1ab7f5(0x2be))?.[_0x1ab7f5(0x180)]?.['trim']()||'',_0x329c06[_0x1ab7f5(0x20a)]=document['getElementById']('highlight-creator-image')?.[_0x1ab7f5(0x180)]?.['trim']()||'';if(!_0x329c06['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x26c8b5==='achievement'){_0x329c06[_0x1ab7f5(0x1cf)]=document['getElementById']('highlight-achievement-player')?.['value']?.[_0x1ab7f5(0x264)]()||'',_0x329c06['achievementType']=document[_0x1ab7f5(0x345)]('highlight-achievement-type')?.['value']?.[_0x1ab7f5(0x264)]()||'',_0x329c06['achievementDetails']=document['getElementById'](_0x1ab7f5(0x375))?.['value']?.['trim']()||'',_0x329c06[_0x1ab7f5(0x1f8)]=document['getElementById']('highlight-player-profile')?.[_0x1ab7f5(0x180)]?.['trim']()||'',_0x329c06[_0x1ab7f5(0x24a)]=document[_0x1ab7f5(0x345)](_0x1ab7f5(0x330))?.['value']?.['trim']()||'';if(!_0x329c06['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x15f176?(_0x329c06['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x15f176),_0x329c06),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x329c06['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x329c06),showNotification('Highlight\x20created\x20successfully!',_0x1ab7f5(0x398))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x212c22){console[_0x1ab7f5(0x381)](_0x1ab7f5(0x274),_0x212c22),showNotification('Error\x20saving\x20highlight:\x20'+_0x212c22[_0x1ab7f5(0x2fb)],'error');}}function closeHighlightModal(){const _0x29eec8=document['getElementById']('highlight-modal');if(_0x29eec8)_0x29eec8['classList']['remove']('active');}function getHighlightTypeName(_0x4bcbef){const _0x486b5c=a0_0x350bb1;switch(_0x4bcbef){case'match':return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return _0x486b5c(0x214);default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x49e792=a0_0x350bb1,_0x5d1629=document['getElementById']('highlight-video-id'),_0x38c8bc=document[_0x49e792(0x345)](_0x49e792(0x1e0)),_0x2b09cd=document['getElementById'](_0x49e792(0x1a7));if(!_0x5d1629||!_0x2b09cd||!_0x38c8bc)return;const _0x49b0a2=_0x5d1629['value'][_0x49e792(0x264)]();_0x49b0a2&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x49b0a2)?(_0x2b09cd['src']='https://www.youtube.com/embed/'+_0x49b0a2,_0x38c8bc['style']['display']=_0x49e792(0x2bc)):(_0x2b09cd['src']='',_0x38c8bc[_0x49e792(0x202)]['display']='none');}async function loadHighlightsAdmin(){const _0x37e8d3=a0_0x350bb1,_0x34f833=document['getElementById'](_0x37e8d3(0x16a));if(!_0x34f833)return;_0x34f833['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x247230=query(collection(db,_0x37e8d3(0x267)),orderBy('createdAt','desc')),_0x2b3855=await getDocs(_0x247230);if(_0x2b3855['empty']){_0x34f833['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x34f833['innerHTML']='',_0x2b3855['forEach'](_0x1342e5=>{const _0x447096=_0x37e8d3,_0x30c1e4=_0x1342e5[_0x447096(0x34e)](),_0x50bece=document['createElement']('tr'),_0x586a58=_0x30c1e4['createdAt']?new Date(_0x30c1e4['createdAt']['seconds']*0x3e8)[_0x447096(0x18f)]():_0x447096(0x181);let _0x2246bc='Unknown',_0x309b17='';switch(_0x30c1e4[_0x447096(0x33d)]){case'match':_0x2246bc='Match',_0x309b17='match-type';break;case _0x447096(0x32a):_0x2246bc=_0x447096(0x1da),_0x309b17='creator-type';break;case'achievement':_0x2246bc='Achievement',_0x309b17=_0x447096(0x199);break;}_0x50bece['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x30c1e4[_0x447096(0x300)]||'Untitled')+_0x447096(0x2d2)+_0x309b17+'\x22>'+_0x2246bc+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x586a58+_0x447096(0x265)+(_0x30c1e4['submittedBy']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x30c1e4[_0x447096(0x21a)]?_0x447096(0x19b):'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x1342e5['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x1342e5['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x34f833[_0x447096(0x212)](_0x50bece);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x163fc3=>{_0x163fc3['addEventListener']('click',_0x4f9e33=>{const _0x487d49=a0_0x531a;openHighlightModal(_0x4f9e33[_0x487d49(0x318)]['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x12c9f8=>{const _0x1270b4=_0x37e8d3;_0x12c9f8[_0x1270b4(0x1ec)]('click',_0x1c367b=>{confirmDeleteHighlight(_0x1c367b['currentTarget']['dataset']['id']);});});}catch(_0x9c7bd9){console[_0x37e8d3(0x381)]('Error\x20loading\x20highlights:',_0x9c7bd9),_0x34f833[_0x37e8d3(0x1e7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x9c7bd9['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x2dc8ca){const _0x3de650=a0_0x350bb1;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x2dc8ca)),showNotification('Highlight\x20deleted\x20successfully',_0x3de650(0x398)),loadHighlightsAdmin();}catch(_0x138a6a){console['error']('Error\x20deleting\x20highlight:',_0x138a6a),showNotification('Error\x20deleting\x20highlight:\x20'+_0x138a6a['message'],_0x3de650(0x381));}}function setupCreateTestMatchModal(){const _0x42c538=a0_0x350bb1;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x35052c=document['getElementById']('create-test-match-modal'),_0x2693af=document[_0x42c538(0x345)]('create-test-match-form');if(!_0x35052c){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x2693af){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x6e9e32=_0x35052c['cloneNode'](!![]);_0x35052c[_0x42c538(0x201)]['replaceChild'](_0x6e9e32,_0x35052c);const _0x35dcc6=_0x6e9e32['querySelector']('#create-test-match-form');_0x6e9e32['addEventListener']('click',function(_0x19dbd6){const _0x55eb64=_0x42c538;_0x19dbd6[_0x55eb64(0x364)]===_0x6e9e32&&(console[_0x55eb64(0x160)]('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x4332bd=_0x6e9e32[_0x42c538(0x29f)]('.close-btn');_0x4332bd&&_0x4332bd[_0x42c538(0x1ec)]('click',function(_0x1d15f0){const _0x511ef7=_0x42c538;_0x1d15f0['preventDefault'](),_0x1d15f0[_0x511ef7(0x18a)](),console[_0x511ef7(0x160)](_0x511ef7(0x1dd)),closeCreateTestMatchModal();});const _0xa7ab98=_0x6e9e32['querySelector']('#cancel-create-test-match-btn');_0xa7ab98&&_0xa7ab98['addEventListener']('click',function(_0xc02692){_0xc02692['preventDefault'](),_0xc02692['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x35dcc6){_0x35dcc6['addEventListener']('submit',function(_0x5e4c10){const _0x198c5c=_0x42c538;_0x5e4c10['preventDefault'](),_0x5e4c10[_0x198c5c(0x18a)](),console['log'](_0x198c5c(0x260)),createTestMatch();});const _0x1cf498=_0x35dcc6['querySelector']('button[type=\x22submit\x22]');_0x1cf498&&_0x1cf498['addEventListener']('click',function(_0x35de7d){const _0x40061c=_0x42c538;_0x35de7d['preventDefault'](),_0x35de7d[_0x40061c(0x18a)](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x42c538(0x160)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x26e2a9=a0_0x350bb1;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x3e15b0=document['getElementById']('highlight-form');_0x3e15b0&&_0x3e15b0['addEventListener']('submit',_0x939428=>{_0x939428['preventDefault'](),saveHighlight();});const _0x23d47c=document[_0x26e2a9(0x345)]('cancel-highlight-btn');_0x23d47c&&_0x23d47c[_0x26e2a9(0x1ec)]('click',closeHighlightModal);const _0x160efe=document[_0x26e2a9(0x29f)]('#highlight-modal\x20.close-btn');_0x160efe&&_0x160efe['addEventListener']('click',closeHighlightModal);const _0x11725b=document['getElementById']('highlight-modal');_0x11725b&&_0x11725b['addEventListener'](_0x26e2a9(0x3a3),_0x5091ee=>{const _0x5ae947=_0x26e2a9;_0x5091ee[_0x5ae947(0x364)]===_0x11725b&&closeHighlightModal();});const _0xaacf4b=document[_0x26e2a9(0x345)](_0x26e2a9(0x1d9));_0xaacf4b&&_0xaacf4b['addEventListener'](_0x26e2a9(0x295),()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x2f97ad=a0_0x350bb1;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x588afe=document['getElementById']('matches-prev-page'),_0x35d47c=document['getElementById']('matches-next-page');_0x588afe&&_0x588afe['addEventListener']('click',()=>{const _0x9ae90=a0_0x531a,_0x3b5d73=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x3b5d73][_0x9ae90(0x370)]-0x1);});_0x35d47c&&_0x35d47c['addEventListener'](_0x2f97ad(0x3a3),()=>{const _0x5911ae=_0x2f97ad,_0x4bf09f=currentLadder[_0x5911ae(0x2de)]();loadMatchesData(matchesPagination[_0x4bf09f]['page']+0x1);});const _0xe0f7cb=document['getElementById']('apply-matches-filters'),_0x36985f=document['getElementById']('reset-matches-filters');_0xe0f7cb&&_0xe0f7cb['addEventListener']('click',applyMatchesFilters);_0x36985f&&_0x36985f['addEventListener']('click',resetMatchesFilters);const _0x131cac=document['getElementById'](_0x2f97ad(0x334));_0x131cac&&_0x131cac['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x573854=document['getElementById']('resimulate-match-btn');_0x573854&&_0x573854['addEventListener']('click',openResimulateModal);const _0x9f2f60=document[_0x2f97ad(0x345)]('resimulate-modal');if(_0x9f2f60){const _0x175f22=_0x9f2f60['querySelector']('.close');_0x175f22&&_0x175f22['addEventListener']('click',closeResimulateModal),_0x9f2f60['addEventListener']('click',_0x1ff8c4=>{_0x1ff8c4['target']===_0x9f2f60&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x51ebcf=a0_0x350bb1;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x2f8bc4=document['getElementById'](_0x51ebcf(0x294)),_0x4d2a82=document[_0x51ebcf(0x345)]('create-test-match-form');if(!_0x2f8bc4){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found',_0x51ebcf(0x381));return;}if(!_0x4d2a82){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification(_0x51ebcf(0x2af),'error');return;}_0x4d2a82['reset']();const _0x528799=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x45175d=![];_0x528799['forEach'](_0x79a05a=>{const _0x16ac46=_0x51ebcf;console['log']('Found\x20radio\x20with\x20value:',_0x79a05a['value']),_0x79a05a[_0x16ac46(0x180)]===currentLadder&&(_0x79a05a[_0x16ac46(0x33c)]=!![],_0x45175d=!![],console[_0x16ac46(0x160)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x45175d){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x401e91=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x401e91&&(_0x401e91['checked']=!![],console['log'](_0x51ebcf(0x263)));}const _0xa940d5=document['getElementById']('test-match-date');if(_0xa940d5){const _0x16ef2c=new Date()['toISOString']()['split']('T')[0x0];_0xa940d5['value']=_0x16ef2c;}_0x2f8bc4['style']['display']=_0x51ebcf(0x371),_0x2f8bc4['style'][_0x51ebcf(0x3b7)]='visible',_0x2f8bc4['style']['opacity']='1',_0x2f8bc4[_0x51ebcf(0x382)][_0x51ebcf(0x1b7)]('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0xfff3e6=document['getElementById']('test-match-winner-username');_0xfff3e6&&setTimeout(()=>{_0xfff3e6['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x36e36b=a0_0x350bb1;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x32e431=document[_0x36e36b(0x345)]('create-test-match-modal');if(!_0x32e431){console[_0x36e36b(0x381)](_0x36e36b(0x37c));return;}_0x32e431[_0x36e36b(0x382)]['remove']('active'),_0x32e431['style']['opacity']='0',_0x32e431['style'][_0x36e36b(0x3b7)]=_0x36e36b(0x194),setTimeout(()=>{const _0x1296a1=_0x36e36b;!_0x32e431['classList']['contains']('active')&&(_0x32e431[_0x1296a1(0x202)]['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x44243f=a0_0x350bb1;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x422178=auth['currentUser'];if(!_0x422178){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x3da7df='D1',_0x2afe69=_0x44243f(0x2dc),_0x26e098={'winnerUsername':_0x44243f(0x1bc),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x44243f(0x37f),'winnerDemoLink':null,'loserUsername':_0x44243f(0x290),'loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x422178['email'],'createdAt':serverTimestamp(),'createdBy':_0x422178['email'],'isTestMatch':!![],'ladder':_0x3da7df,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x422178['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x2afe69),_0x26e098),showNotification('Simple\x20test\x20match\x20created\x20successfully',_0x44243f(0x398)),closeCreateTestMatchModal();}catch(_0x3c1d30){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x3c1d30),showNotification(_0x44243f(0x3a5)+_0x3c1d30[_0x44243f(0x2fb)],'error');}}window['testFirebaseConnection']=async function(){const _0xb638e5=a0_0x350bb1;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console['log']('DB:',db),console[_0xb638e5(0x160)]('Current\x20user:',auth[_0xb638e5(0x340)]);const _0x3b7887=collection(db,'players');console['log'](_0xb638e5(0x2a7),_0x3b7887);const _0x482398=query(_0x3b7887,where(_0xb638e5(0x16c),'==',_0xb638e5(0x355)));console['log']('Query\x20created:',_0x482398);const _0x166d86=await getDocs(_0x482398);console['log'](_0xb638e5(0x1d3),_0x166d86[_0xb638e5(0x179)]),console[_0xb638e5(0x160)]('Firebase\x20connection\x20test\x20successful!');}catch(_0x850e8){console[_0xb638e5(0x381)]('Firebase\x20connection\x20test\x20failed:',_0x850e8);}};function setupCreateTestMatchButton(){const _0x3c7969=a0_0x350bb1,_0x1d7de5=document[_0x3c7969(0x345)]('create-test-match-btn');if(!_0x1d7de5){console['error'](_0x3c7969(0x32b));return;}console['log'](_0x3c7969(0x161));const _0x5054be=_0x1d7de5['cloneNode'](!![]);_0x1d7de5['parentNode']['replaceChild'](_0x5054be,_0x1d7de5),_0x5054be[_0x3c7969(0x1ec)](_0x3c7969(0x3a3),function(_0x2082f1){_0x2082f1['preventDefault'](),_0x2082f1['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log'](_0x3c7969(0x185));}async function loadMatchesData(_0x137178=0x1){const _0x12b8af=a0_0x350bb1,_0x2ab5d3=document[_0x12b8af(0x345)]('matches-table-body');if(!_0x2ab5d3)return;_0x2ab5d3[_0x12b8af(0x1e7)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x2e64d8=currentLadder['toLowerCase'](),_0x706ad9=matchesPagination[_0x2e64d8],_0x56150e=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3e82b9=collection(db,_0x56150e);_0x137178<=0x1?(_0x706ad9['page']=0x1,_0x706ad9['firstVisible']=null,_0x706ad9['lastVisible']=null):_0x706ad9[_0x12b8af(0x370)]=_0x137178;const _0x4b4aa2=getMatchesFilters();let _0x57e1c8=_0x3e82b9;if(_0x4b4aa2[_0x12b8af(0x22c)]||_0x4b4aa2['endDate']||_0x4b4aa2['searchTerm']){let _0x8b2e0d=[];_0x4b4aa2['startDate']&&_0x4b4aa2[_0x12b8af(0x184)]?(_0x8b2e0d[_0x12b8af(0x3c7)](where('approvedAt','>=',_0x4b4aa2[_0x12b8af(0x22c)]),where('approvedAt','<=',_0x4b4aa2[_0x12b8af(0x184)])),_0x57e1c8=query(_0x3e82b9,..._0x8b2e0d)):_0x57e1c8=query(_0x3e82b9,orderBy(_0x12b8af(0x396),'desc'));}else _0x57e1c8=query(_0x3e82b9,orderBy(_0x12b8af(0x396),_0x12b8af(0x232)));_0x137178>0x1&&_0x706ad9['lastVisible']?_0x57e1c8=query(_0x57e1c8,startAfter(_0x706ad9[_0x12b8af(0x26c)]),limit(PAGE_SIZE)):_0x57e1c8=query(_0x57e1c8,limit(PAGE_SIZE));const _0x46acea=await getDocs(_0x57e1c8);!_0x46acea['empty']&&(_0x706ad9['firstVisible']=_0x46acea['docs'][0x0],_0x706ad9['lastVisible']=_0x46acea['docs'][_0x46acea[_0x12b8af(0x270)][_0x12b8af(0x36e)]-0x1]);let _0x52ed44=![];if(!_0x46acea['empty']){const _0x470383=query(_0x57e1c8,startAfter(_0x706ad9[_0x12b8af(0x26c)]),limit(0x1)),_0x25d629=await getDocs(_0x470383);_0x52ed44=!_0x25d629['empty'];}const _0x3e3f5a=document['getElementById']('matches-prev-page'),_0x1d5197=document['getElementById']('matches-next-page'),_0xc1a2c9=document['getElementById']('matches-page-indicator');if(_0x3e3f5a)_0x3e3f5a['disabled']=_0x706ad9[_0x12b8af(0x370)]<=0x1;if(_0x1d5197)_0x1d5197[_0x12b8af(0x2c0)]=!_0x52ed44;if(_0xc1a2c9)_0xc1a2c9['textContent']='Page\x20'+_0x706ad9[_0x12b8af(0x370)];if(_0x46acea[_0x12b8af(0x179)]){_0x2ab5d3['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x2ab5d3['innerHTML']='',_0x46acea[_0x12b8af(0x3ab)](_0x24cb30=>{const _0x62518b=_0x12b8af,_0x9105a2=_0x24cb30['data'](),_0x53012f=document['createElement']('tr'),_0x4c5333=_0x9105a2['approvedAt']?new Date(_0x9105a2['approvedAt']['seconds']*0x3e8)[_0x62518b(0x18f)]():'N/A';_0x53012f['setAttribute']('data-id',_0x24cb30['id']),_0x53012f['setAttribute'](_0x62518b(0x303),currentLadder),_0x53012f['classList']['add'](_0x62518b(0x257)),_0x53012f['innerHTML']=_0x62518b(0x357)+_0x4c5333+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x9105a2['winnerUsername']||'Unknown')+_0x62518b(0x262)+(_0x9105a2['loserUsername']||'Unknown')+_0x62518b(0x1b6)+(_0x9105a2['winnerScore']||0x0)+'\x20-\x20'+(_0x9105a2['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x9105a2[_0x62518b(0x165)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x62518b(0x16f)+_0x24cb30['id']+_0x62518b(0x2a4)+_0x24cb30['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2ab5d3[_0x62518b(0x212)](_0x53012f);}),setupMatchesActionButtons(),_0x4b4aa2[_0x12b8af(0x2f6)]&&filterMatchesTable(),console['log']('Loaded\x20'+_0x46acea['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x706ad9['page']);}catch(_0x2c774e){console['error']('Error\x20loading\x20matches:',_0x2c774e),_0x2ab5d3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x2c774e[_0x12b8af(0x2fb)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x57622c,_0x5ca1d5){const _0x47e491=a0_0x350bb1;try{console['log'](_0x47e491(0x3ba)+_0x57622c+'\x20from\x20'+_0x5ca1d5+'\x20ladder');const _0x4fba9e=auth['currentUser'];if(!_0x4fba9e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x2e80e0=_0x5ca1d5==='D1'?_0x47e491(0x2dc):_0x5ca1d5==='D2'?_0x47e491(0x2ad):'approvedMatchesD3';console['log'](_0x47e491(0x15f)+_0x2e80e0),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x2e80e0,_0x57622c)),console[_0x47e491(0x160)]('Match\x20deleted\x20successfully'),showNotification(_0x47e491(0x284),'success');const _0x53e7ed=_0x5ca1d5['toLowerCase']();loadMatchesData(matchesPagination[_0x53e7ed]['page']);}catch(_0x207a39){console['error']('Error\x20deleting\x20match:',_0x207a39),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x207a39['message'],_0x47e491(0x381));}}function setupMatchesActionButtons(){const _0x3cf72a=a0_0x350bb1;console[_0x3cf72a(0x160)]('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0xfd6c71=>{const _0x591dc9=_0x3cf72a;_0xfd6c71['addEventListener'](_0x591dc9(0x3a3),_0x140f15=>{_0x140f15['preventDefault'](),_0x140f15['stopPropagation']();const _0x6c9c0f=_0x140f15['currentTarget']['dataset']['id'],_0xca6c76=_0x140f15['currentTarget']['closest']('tr'),_0x3bb4d5=_0xca6c76['dataset']['ladder'];console['log']('Edit\x20match\x20clicked:',_0x6c9c0f,_0x3bb4d5),openEditMatchModal(_0x6c9c0f,_0x3bb4d5);});}),document['querySelectorAll'](_0x3cf72a(0x361))['forEach'](_0x568722=>{_0x568722['addEventListener']('click',_0x4c5df3=>{const _0x537be2=a0_0x531a;_0x4c5df3['preventDefault'](),_0x4c5df3[_0x537be2(0x18a)]();const _0x59bac5=_0x4c5df3['currentTarget']['dataset']['id'],_0x5b6c45=_0x4c5df3['currentTarget']['closest']('tr'),_0x8b19e5=_0x5b6c45['dataset']['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x59bac5,_0x8b19e5),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x59bac5,_0x8b19e5);});}),console['log'](_0x3cf72a(0x218));}function filterMatchesTable(){const _0x3eff6e=a0_0x350bb1,_0x4dcc93=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x184d98=document['querySelectorAll'](_0x3eff6e(0x188));let _0x47f16a=0x0;_0x184d98['forEach'](_0x3f4d71=>{const _0x43e903=_0x3eff6e;if(_0x3f4d71[_0x43e903(0x382)][_0x43e903(0x266)](_0x43e903(0x2f1))||_0x3f4d71[_0x43e903(0x382)][_0x43e903(0x266)](_0x43e903(0x2ef))||_0x3f4d71[_0x43e903(0x382)]['contains']('error-state'))return;const _0x20c227=_0x3f4d71[_0x43e903(0x2cc)][0x1]['textContent'][_0x43e903(0x2de)](),_0xf9494b=_0x3f4d71['cells'][0x2][_0x43e903(0x1e2)][_0x43e903(0x2de)](),_0x293109=_0x3f4d71['cells'][0x4]['textContent'][_0x43e903(0x2de)]();_0x20c227['includes'](_0x4dcc93)||_0xf9494b['includes'](_0x4dcc93)||_0x293109[_0x43e903(0x278)](_0x4dcc93)?(_0x3f4d71['style'][_0x43e903(0x1b5)]='',_0x47f16a++):_0x3f4d71[_0x43e903(0x202)][_0x43e903(0x1b5)]='none';});if(_0x47f16a===0x0&&_0x184d98['length']>0x0){const _0x5cdde3=document[_0x3eff6e(0x345)](_0x3eff6e(0x347)),_0x476b12=_0x5cdde3['querySelector']('.no-results');if(!_0x476b12){const _0x246250=document['createElement']('tr');_0x246250[_0x3eff6e(0x2f2)]='no-results',_0x246250['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x4dcc93+_0x3eff6e(0x3ce),_0x5cdde3['appendChild'](_0x246250);}}else{const _0x3f5950=document['querySelector']('.no-results');_0x3f5950&&_0x3f5950['remove']();}}function getMatchesFilters(){const _0x26c68f=a0_0x350bb1,_0x1efdf5=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x1ffba5=document['getElementById']('matches-start-date')[_0x26c68f(0x180)],_0x493476=document['getElementById'](_0x26c68f(0x365))['value'];let _0x4e6fe7=null,_0x3ff1f8=null;return _0x1ffba5&&(_0x4e6fe7=new Date(_0x1ffba5),_0x4e6fe7['setHours'](0x0,0x0,0x0,0x0),_0x4e6fe7=Timestamp['fromDate'](_0x4e6fe7)),_0x493476&&(_0x3ff1f8=new Date(_0x493476),_0x3ff1f8['setHours'](0x17,0x3b,0x3b,0x3e7),_0x3ff1f8=Timestamp['fromDate'](_0x3ff1f8)),{'searchTerm':_0x1efdf5,'startDate':_0x4e6fe7,'endDate':_0x3ff1f8};}async function applyMatchesFilters(){const _0x5d3bb1=currentLadder['toLowerCase']();matchesPagination[_0x5d3bb1]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x3e3fc8=a0_0x350bb1;document['getElementById']('matches-start-date')['value']='',document['getElementById']('matches-end-date')[_0x3e3fc8(0x180)]='',document['getElementById'](_0x3e3fc8(0x334))['value']='';const _0x520542=currentLadder['toLowerCase']();matchesPagination[_0x520542]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x34356d,_0x3af9d6){const _0x27248d=a0_0x350bb1,_0x4e2a8a=document[_0x27248d(0x345)]('edit-match-modal');if(!_0x4e2a8a)return;try{const _0x167f6f=_0x3af9d6==='D1'?'approvedMatches':_0x3af9d6==='D2'?_0x27248d(0x2ad):'approvedMatchesD3',_0x3591b1=doc(db,_0x167f6f,_0x34356d),_0xa42ce6=await getDoc(_0x3591b1);if(!_0xa42ce6['exists']()){showNotification(_0x27248d(0x25b),_0x27248d(0x381));return;}const _0xc08dde=_0xa42ce6['data']();document['getElementById']('edit-match-id')['value']=_0x34356d,document[_0x27248d(0x345)](_0x27248d(0x187))[_0x27248d(0x180)]=_0x3af9d6,document['getElementById'](_0x27248d(0x26a))['value']=_0xc08dde['winnerUsername']||'',document[_0x27248d(0x345)]('edit-match-winner-score')['value']=_0xc08dde[_0x27248d(0x1c7)]||0x0,document['getElementById'](_0x27248d(0x233))['value']=_0xc08dde['winnerSuicides']||0x0,document[_0x27248d(0x345)](_0x27248d(0x2b6))['value']=_0xc08dde['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0xc08dde[_0x27248d(0x3bc)]||'',document['getElementById']('edit-match-loser-score')[_0x27248d(0x180)]=_0xc08dde['loserScore']||0x0,document['getElementById'](_0x27248d(0x1ae))[_0x27248d(0x180)]=_0xc08dde['loserSuicides']||0x0,document['getElementById']('edit-match-loser-comment')['value']=_0xc08dde['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0xc08dde['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')['value']=_0xc08dde[_0x27248d(0x3a6)]||'',document[_0x27248d(0x345)]('edit-match-loser-demo')[_0x27248d(0x180)]=_0xc08dde[_0x27248d(0x2bb)]||_0xc08dde['demoLink']||'',document['getElementById'](_0x27248d(0x39e))['textContent']='Edit\x20Match:\x20'+_0xc08dde['winnerUsername']+_0x27248d(0x28f)+_0xc08dde['loserUsername'],_0x4e2a8a[_0x27248d(0x382)]['add']('active');}catch(_0x365d55){console['error'](_0x27248d(0x397),_0x365d55),showNotification(_0x27248d(0x350),_0x27248d(0x381));}}function closeEditMatchModal(){const _0x6fb24d=a0_0x350bb1,_0x2da88e=document[_0x6fb24d(0x345)](_0x6fb24d(0x326));_0x2da88e&&_0x2da88e['classList']['remove']('active');}async function saveEditedMatch(){const _0x6f2f58=a0_0x350bb1;try{const _0x2ee750=document['getElementById']('edit-match-id')['value'],_0xdc8a79=document[_0x6f2f58(0x345)](_0x6f2f58(0x187))['value'];if(!_0x2ee750||!_0xdc8a79){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x6f2f58(0x381));return;}const _0x4de192=_0xdc8a79==='D1'?'approvedMatches':_0xdc8a79==='D2'?'approvedMatchesD2':_0x6f2f58(0x3b6),_0x241ddc=document['getElementById']('edit-match-winner')['value']['trim'](),_0x555b0f=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x54350d=parseInt(document[_0x6f2f58(0x345)]('edit-match-winner-suicides')[_0x6f2f58(0x180)]),_0xa69b2=document[_0x6f2f58(0x345)]('edit-match-winner-comment')['value'][_0x6f2f58(0x264)](),_0x56be2e=document['getElementById']('edit-match-loser')[_0x6f2f58(0x180)][_0x6f2f58(0x264)](),_0xaef15c=parseInt(document[_0x6f2f58(0x345)](_0x6f2f58(0x2cb))['value']),_0x595f41=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x6ee87e=document['getElementById'](_0x6f2f58(0x30c))['value']['trim'](),_0x49cf64=document[_0x6f2f58(0x345)](_0x6f2f58(0x2cd))[_0x6f2f58(0x180)][_0x6f2f58(0x264)](),_0x13f1fe=document['getElementById']('edit-match-winner-demo')[_0x6f2f58(0x180)][_0x6f2f58(0x264)](),_0x352852=document[_0x6f2f58(0x345)](_0x6f2f58(0x211))[_0x6f2f58(0x180)][_0x6f2f58(0x264)]();if(!_0x241ddc||!_0x56be2e){showNotification(_0x6f2f58(0x27a),_0x6f2f58(0x381));return;}await updateDoc(doc(db,_0x4de192,_0x2ee750),{'winnerUsername':_0x241ddc,'winnerScore':_0x555b0f,'winnerSuicides':_0x54350d,'winnerComment':_0xa69b2,'loserUsername':_0x56be2e,'loserScore':_0xaef15c,'loserSuicides':_0x595f41,'loserComment':_0x6ee87e,'mapPlayed':_0x49cf64,'winnerDemoLink':_0x13f1fe||null,'loserDemoLink':_0x352852||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x6f2f58(0x340)][_0x6f2f58(0x2fa)],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0xdc8a79[_0x6f2f58(0x2de)]()][_0x6f2f58(0x370)]);}catch(_0x5cadfb){console['error']('Error\x20saving\x20match:',_0x5cadfb),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x5cadfb[_0x6f2f58(0x2fb)],_0x6f2f58(0x381));}}async function openDeleteMatchModal(_0x2d169a,_0x5ebf97){const _0x2a146d=a0_0x350bb1;try{const _0x19da65=_0x5ebf97==='D1'?'approvedMatches':_0x5ebf97==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x23d998=doc(db,_0x19da65,_0x2d169a),_0x3eea95=await getDoc(_0x23d998);if(!_0x3eea95['exists']()){showNotification('Match\x20not\x20found',_0x2a146d(0x381));return;}const _0x5c3e3f=_0x3eea95['data'](),_0x1212c6=document['getElementById']('delete-match-confirm-modal');_0x1212c6[_0x2a146d(0x306)]['matchId']=_0x2d169a,_0x1212c6[_0x2a146d(0x306)]['ladder']=_0x5ebf97;const _0x25fe55=_0x5c3e3f['approvedAt']?new Date(_0x5c3e3f['approvedAt']['seconds']*0x3e8)[_0x2a146d(0x18f)]():_0x2a146d(0x181),_0x546f63=document[_0x2a146d(0x345)]('delete-match-summary');_0x546f63[_0x2a146d(0x1e7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x25fe55+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x5c3e3f['winnerUsername']+_0x2a146d(0x1bf)+_0x5c3e3f['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x5c3e3f['winnerScore']||0x0)+_0x2a146d(0x189)+(_0x5c3e3f[_0x2a146d(0x23f)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x5c3e3f['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x5ebf97+_0x2a146d(0x17d),_0x1212c6['classList'][_0x2a146d(0x1b7)]('active');}catch(_0x36df6f){console[_0x2a146d(0x381)]('Error\x20loading\x20match\x20for\x20deletion:',_0x36df6f),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0xc3295b=a0_0x350bb1,_0x4f3c16=document[_0xc3295b(0x345)](_0xc3295b(0x1fd));_0x4f3c16&&(_0x4f3c16[_0xc3295b(0x382)]['remove']('active'),_0x4f3c16[_0xc3295b(0x3c1)]('data-match-id'),_0x4f3c16['removeAttribute'](_0xc3295b(0x303)));}async function confirmDeleteMatch(){const _0x76f36c=a0_0x350bb1,_0x5017b7=document['getElementById']('delete-match-confirm-modal'),_0x227cd1=_0x5017b7['dataset']['matchId'],_0x25a15e=_0x5017b7['dataset']['ladder'];if(!_0x227cd1||!_0x25a15e){showNotification(_0x76f36c(0x1cc),'error'),closeDeleteMatchModal();return;}try{const _0x132b72=_0x25a15e==='D1'?_0x76f36c(0x2dc):_0x25a15e==='D2'?_0x76f36c(0x2ad):'approvedMatchesD3';await deleteDoc(doc(db,_0x132b72,_0x227cd1)),showNotification(_0x76f36c(0x284),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x25a15e['toLowerCase']()]['page']);}catch(_0x30fca9){console['error'](_0x76f36c(0x24e),_0x30fca9),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x30fca9['message'],'error');}}async function saveHighlightChanges(){const _0x29273e=a0_0x350bb1,_0x4b5567=document[_0x29273e(0x345)]('edit-highlight-id')['value'],_0x43e85c=document['getElementById']('edit-highlight-type-select')['value'];let _0x231398={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x43e85c,'description':document['getElementById'](_0x29273e(0x3a2))[_0x29273e(0x180)]['trim'](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value'][_0x29273e(0x264)](),'submittedBy':auth['currentUser'][_0x29273e(0x2fa)]};if(_0x43e85c===_0x29273e(0x22b)){_0x231398['matchInfo']=document[_0x29273e(0x345)]('edit-highlight-matchInfo-input')['value']['trim'](),_0x231398['map']=document['getElementById'](_0x29273e(0x1d7))[_0x29273e(0x180)][_0x29273e(0x264)]();const _0xa5d9ab=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x231398[_0x29273e(0x223)]=_0xa5d9ab?Timestamp['fromDate'](new Date(_0xa5d9ab)):null,_0x231398['winnerName']=document['getElementById']('edit-highlight-winnerName-input')['value']['trim'](),_0x231398['winnerScore']=document['getElementById'](_0x29273e(0x268))[_0x29273e(0x180)]['trim'](),_0x231398[_0x29273e(0x1f5)]=document[_0x29273e(0x345)]('edit-highlight-loserName-input')[_0x29273e(0x180)]['trim'](),_0x231398['loserScore']=document['getElementById'](_0x29273e(0x18d))['value']['trim'](),_0x231398[_0x29273e(0x2fc)]=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x231398[_0x29273e(0x32c)]=null,_0x231398[_0x29273e(0x1ba)]=null,_0x231398[_0x29273e(0x20a)]=null,_0x231398[_0x29273e(0x1cf)]=null,_0x231398[_0x29273e(0x31c)]=null,_0x231398['achievementDetails']=null,_0x231398[_0x29273e(0x1f8)]=null;}else{if(_0x43e85c==='creator')_0x231398['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x231398['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x231398['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value'][_0x29273e(0x264)](),_0x231398['creatorImageUrl']=document['getElementById'](_0x29273e(0x39f))['value'][_0x29273e(0x264)](),_0x231398['matchInfo']=null,_0x231398[_0x29273e(0x223)]=null,_0x231398['winnerName']=null,_0x231398['winnerScore']=null,_0x231398['loserName']=null,_0x231398['loserScore']=null,_0x231398['matchLink']=null,_0x231398['achievementPlayer']=null,_0x231398[_0x29273e(0x31c)]=null,_0x231398['achievementDetails']=null,_0x231398['playerProfileUrl']=null;else _0x43e85c==='achievement'&&(_0x231398['achievementPlayer']=document[_0x29273e(0x345)](_0x29273e(0x3be))['value'][_0x29273e(0x264)](),_0x231398['achievementType']=document['getElementById']('edit-highlight-achievementType-input')['value']['trim'](),_0x231398['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')['value'][_0x29273e(0x264)](),_0x231398['playerProfileUrl']=document[_0x29273e(0x345)](_0x29273e(0x2bf))[_0x29273e(0x180)]['trim'](),_0x231398['matchInfo']=null,_0x231398['map']=null,_0x231398[_0x29273e(0x223)]=null,_0x231398['winnerName']=null,_0x231398['winnerScore']=null,_0x231398['loserName']=null,_0x231398[_0x29273e(0x23f)]=null,_0x231398[_0x29273e(0x2fc)]=null,_0x231398[_0x29273e(0x32c)]=null,_0x231398['mapVersion']=null,_0x231398[_0x29273e(0x20a)]=null);}try{if(_0x4b5567){_0x231398['updatedAt']=serverTimestamp();const _0x135d62=doc(db,_0x29273e(0x267),_0x4b5567);await updateDoc(_0x135d62,_0x231398),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x231398['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x231398),showNotification('Highlight\x20added\x20successfully!',_0x29273e(0x398));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x274513){console['error'](_0x29273e(0x274),_0x274513),showNotification('Error\x20saving\x20highlight:\x20'+_0x274513['message'],'error');}}async function resimulateMatch(){const _0x2bd2e7=a0_0x350bb1;try{const _0x3be1e6=document['getElementById'](_0x2bd2e7(0x227))['value'];if(!_0x3be1e6){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x510243=auth['currentUser'];if(!_0x510243){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches',_0x2bd2e7(0x381));return;}const _0x21dbd5=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5007b2=doc(db,_0x21dbd5,_0x3be1e6),_0x125b0f=await getDoc(_0x5007b2);if(!_0x125b0f['exists']()){showNotification(_0x2bd2e7(0x249),'error');return;}const _0x232e9e=_0x125b0f['data'](),_0x5b14cd=_0x232e9e['approvedAt']?_0x232e9e['approvedAt'][_0x2bd2e7(0x36a)]()['toLocaleString']():_0x232e9e[_0x2bd2e7(0x223)]?_0x232e9e[_0x2bd2e7(0x223)]['toDate']?_0x232e9e[_0x2bd2e7(0x223)]['toDate']()['toLocaleString']():new Date(_0x232e9e['matchDate'])[_0x2bd2e7(0x3cc)]():_0x2bd2e7(0x1c6),_0x4c2e8f=_0x2bd2e7(0x1f2)+_0x232e9e[_0x2bd2e7(0x3bb)]+_0x2bd2e7(0x283)+_0x232e9e['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x232e9e['winnerScore']+'-'+_0x232e9e['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x232e9e[_0x2bd2e7(0x165)]||_0x232e9e[_0x2bd2e7(0x321)]||_0x2bd2e7(0x1c6))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x5b14cd+_0x2bd2e7(0x298)+_0x3be1e6+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')[_0x2bd2e7(0x1e7)]=_0x4c2e8f,document[_0x2bd2e7(0x345)]('match-details-container')[_0x2bd2e7(0x202)]['display']=_0x2bd2e7(0x2bc),document['getElementById'](_0x2bd2e7(0x2ce))['style']['display']=_0x2bd2e7(0x2bc),window['pendingResimulateData']={'matchId':_0x3be1e6,'matchData':_0x232e9e,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x4b66b6){console[_0x2bd2e7(0x381)](_0x2bd2e7(0x182),_0x4b66b6),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x4b66b6['message'],_0x2bd2e7(0x381));}}async function confirmResimulateMatch(){const _0x1c7f39=a0_0x350bb1;try{const {matchId:_0xc11363,matchData:_0x3bd31a,ladder:_0x5e8280}=window['pendingResimulateData'];if(!_0xc11363||!_0x3bd31a){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x1c5894=_0x5e8280==='D1'?'players':_0x5e8280==='D2'?'playersD2':'playersD3',_0x5543f0=_0x5e8280==='D1'?'eloHistory':_0x5e8280==='D2'?'eloHistoryD2':_0x1c7f39(0x24c),[_0x5bdbc7,_0x414992]=await Promise[_0x1c7f39(0x3aa)]([getDocs(query(collection(db,_0x1c5894),where('username','==',_0x3bd31a['winnerUsername']))),getDocs(query(collection(db,_0x1c5894),where(_0x1c7f39(0x16c),'==',_0x3bd31a['loserUsername'])))]);if(_0x5bdbc7['empty']||_0x414992['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x4bdf6f=_0x5bdbc7[_0x1c7f39(0x270)][0x0]['id'],_0x5d385f=_0x414992['docs'][0x0]['id'],_0x31d2bb=_0x5bdbc7['docs'][0x0]['data'](),_0x1866da=_0x414992['docs'][0x0]['data'](),[_0x36983e,_0x5c466b]=await Promise[_0x1c7f39(0x3aa)]([getDocs(query(collection(db,_0x5543f0),where('playerId','==',_0x4bdf6f),where(_0x1c7f39(0x3af),'==',_0xc11363))),getDocs(query(collection(db,_0x5543f0),where(_0x1c7f39(0x251),'==',_0x5d385f),where('matchId','==',_0xc11363)))]),_0x3095a6=!_0x36983e[_0x1c7f39(0x179)],_0x27940f=!_0x5c466b['empty'],_0x4e21af=_0x1c7f39(0x1fe)+(_0x3095a6?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x27940f?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x31d2bb[_0x1c7f39(0x33a)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x1866da['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x31d2bb['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x1866da['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x1c7f39(0x345)]('validation-results-container')['innerHTML']=_0x4e21af,document[_0x1c7f39(0x345)](_0x1c7f39(0x26d))['style']['display']='block';if(_0x3095a6&&_0x27940f){showNotification(_0x1c7f39(0x393),_0x1c7f39(0x1fa));return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x1ebdb2=_0x3bd31a[_0x1c7f39(0x396)]||_0x3bd31a['matchDate']||serverTimestamp(),[_0x1f52ea,_0x42d42a]=await Promise['all']([getPlayerEloAtTime(_0x4bdf6f,_0x1ebdb2,_0x5543f0),getPlayerEloAtTime(_0x5d385f,_0x1ebdb2,_0x5543f0)]),{calculateElo:_0x141bcc}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x6b11d5,newLoserRating:_0x1f496d}=_0x141bcc(_0x1f52ea,_0x42d42a),_0x191a14=_0x31d2bb['position']||Number[_0x1c7f39(0x30d)],_0x194f33=_0x1866da['position']||Number[_0x1c7f39(0x30d)];let _0x3f417f=_0x191a14,_0x20a512=_0x194f33;_0x191a14>_0x194f33&&(_0x3f417f=_0x194f33,_0x20a512=_0x194f33+0x1);const _0x573753=writeBatch(db),_0x2f3c14=doc(db,_0x1c5894,_0x4bdf6f);_0x573753['update'](_0x2f3c14,{'eloRating':_0x6b11d5,'position':_0x3f417f,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x41eb21=doc(db,_0x1c5894,_0x5d385f);_0x573753[_0x1c7f39(0x253)](_0x41eb21,{'eloRating':_0x1f496d,'position':_0x20a512,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x1c7f39(0x1b4)]});if(_0x191a14>_0x194f33){const _0x56c2ed=await getDocs(query(collection(db,_0x1c5894),where('position','>',_0x194f33),where('position','<',_0x191a14)));_0x56c2ed['forEach'](_0x4a1446=>{const _0xf0466b=_0x1c7f39,_0x3f167b=doc(db,_0x1c5894,_0x4a1446['id']),_0x1113c3=_0x4a1446['data']()['position'];_0x573753['update'](_0x3f167b,{'position':_0x1113c3+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0xf0466b(0x3a8),'positionAdjustedAt':serverTimestamp()});});}if(!_0x3095a6){const _0x2e20c2=doc(collection(db,_0x5543f0));_0x573753['set'](_0x2e20c2,{'playerId':_0x4bdf6f,'player':_0x3bd31a['winnerUsername'],'previousElo':_0x1f52ea,'newElo':_0x6b11d5,'eloChange':_0x6b11d5-_0x1f52ea,'opponentId':_0x5d385f,'opponent':_0x3bd31a['loserUsername'],'matchResult':'win','previousPosition':_0x191a14,'newPosition':_0x3f417f,'positionChange':_0x3f417f-_0x191a14,'matchId':_0xc11363,'timestamp':_0x1ebdb2,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x1c7f39(0x340)]['uid'],'gameMode':_0x5e8280,'matchScore':_0x3bd31a[_0x1c7f39(0x1c7)]+'-'+_0x3bd31a['loserScore'],'mapPlayed':_0x3bd31a[_0x1c7f39(0x165)]||_0x3bd31a[_0x1c7f39(0x321)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x27940f){const _0x3924da=doc(collection(db,_0x5543f0));_0x573753['set'](_0x3924da,{'playerId':_0x5d385f,'player':_0x3bd31a['loserUsername'],'previousElo':_0x42d42a,'newElo':_0x1f496d,'eloChange':_0x1f496d-_0x42d42a,'opponentId':_0x4bdf6f,'opponent':_0x3bd31a['winnerUsername'],'matchResult':'loss','previousPosition':_0x194f33,'newPosition':_0x20a512,'positionChange':_0x20a512-_0x194f33,'matchId':_0xc11363,'timestamp':_0x1ebdb2,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x5e8280,'matchScore':_0x3bd31a[_0x1c7f39(0x1c7)]+'-'+_0x3bd31a['loserScore'],'mapPlayed':_0x3bd31a['mapPlayed']||_0x3bd31a[_0x1c7f39(0x321)]||_0x1c7f39(0x1c6),'note':_0x1c7f39(0x1d5)});}const _0x5364f8=_0x5e8280==='D1'?'approvedMatches':_0x5e8280==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x493ad3=doc(db,_0x5364f8,_0xc11363);_0x573753['update'](_0x493ad3,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':_0x1c7f39(0x2aa),'originalWinnerElo':_0x31d2bb['eloRating'],'originalLoserElo':_0x1866da['eloRating'],'originalWinnerPosition':_0x191a14,'originalLoserPosition':_0x194f33,'resimulatedWinnerElo':_0x6b11d5,'resimulatedLoserElo':_0x1f496d,'resimulatedWinnerPosition':_0x3f417f,'resimulatedLoserPosition':_0x20a512}),await _0x573753[_0x1c7f39(0x273)]();const _0x521cd0=(!_0x3095a6?0x1:0x0)+(!_0x27940f?0x1:0x0),_0x26b4e4=_0x191a14!==_0x3f417f||_0x194f33!==_0x20a512;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x521cd0+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x1f52ea+'→'+_0x6b11d5+_0x1c7f39(0x1ee)+(_0x6b11d5-_0x1f52ea)+'),\x20')+('Loser\x20'+_0x42d42a+'→'+_0x1f496d+'\x20('+(_0x1f496d-_0x42d42a)+').\x20')+(''+(_0x26b4e4?'Positions\x20updated:\x20Winner\x20'+_0x191a14+'→'+_0x3f417f+',\x20Loser\x20'+_0x194f33+'→'+_0x20a512:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x3e587a){console['error'](_0x1c7f39(0x359),_0x3e587a),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x3e587a['message'],'error');}}async function getPlayerEloAtTime(_0x3be630,_0x11e201,_0x4cf114){const _0x431489=a0_0x350bb1;try{const _0xe91f9d=_0x11e201['toDate']?_0x11e201['toDate']():new Date(_0x11e201),_0x2f7565=query(collection(db,_0x4cf114),where(_0x431489(0x251),'==',_0x3be630),where(_0x431489(0x36c),'<',_0x11e201),orderBy('timestamp',_0x431489(0x232)),limit(0x1)),_0x18c4ef=await getDocs(_0x2f7565);if(!_0x18c4ef[_0x431489(0x179)]){const _0x4dec63=_0x18c4ef[_0x431489(0x270)][0x0]['data']();return console['log'](_0x431489(0x162)+_0x3be630+'\x20before\x20match:\x20'+_0x4dec63[_0x431489(0x386)]),_0x4dec63[_0x431489(0x386)];}else return console['log'](_0x431489(0x36d)+_0x3be630+_0x431489(0x1a2)),0x4b0;}catch(_0x199b62){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x3be630+':',_0x199b62),0x4b0;}}function openResimulateModal(){const _0x51c691=a0_0x350bb1;console[_0x51c691(0x160)]('openResimulateModal\x20called!');const _0x5650a1=document[_0x51c691(0x345)](_0x51c691(0x220));console['log'](_0x51c691(0x20e),_0x5650a1);if(!_0x5650a1){console['error']('Modal\x20element\x20not\x20found!');return;}_0x5650a1[_0x51c691(0x202)]['display']='block',_0x5650a1['style']['visibility']='visible',_0x5650a1['style']['opacity']='1',_0x5650a1['classList']['add']('active'),console['log'](_0x51c691(0x2e9)),console['log']('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x5650a1)['display']);const _0x543e8f=document['getElementById']('match-details-container'),_0x32413b=document['getElementById'](_0x51c691(0x26d)),_0x3f5e54=document[_0x51c691(0x345)]('confirm-resimulate-btn'),_0x6ac84f=document['getElementById'](_0x51c691(0x227));if(_0x543e8f)_0x543e8f['innerHTML']='';if(_0x32413b)_0x32413b['innerHTML']='';if(_0x3f5e54)_0x3f5e54['style']['display']='none';if(_0x6ac84f)_0x6ac84f[_0x51c691(0x180)]='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x5e13fe=a0_0x350bb1;document['getElementById'](_0x5e13fe(0x220))[_0x5e13fe(0x202)][_0x5e13fe(0x1b5)]='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window[a0_0x350bb1(0x1c3)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x413e29=a0_0x350bb1;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0xe8fb42){console[_0x413e29(0x381)](_0x413e29(0x244),_0xe8fb42),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0xe8fb42['message'],'error');}}function renderPointsOverview(_0x1e116c){const _0x31025b=a0_0x350bb1,_0x2765c0=document['getElementById']('points-overview-table-body');if(!_0x2765c0)return;if(_0x1e116c['length']===0x0){_0x2765c0['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x2765c0['innerHTML']='',_0x1e116c[_0x31025b(0x3ab)](_0x2b8c94=>{const _0x3e6762=_0x31025b,_0x17b42a=document[_0x3e6762(0x366)]('tr'),_0x5d7959=_0x2b8c94['displayName']||_0x2b8c94['username']||'Unknown\x20User',_0x5b89ac=_0x2b8c94[_0x3e6762(0x2fa)]||_0x3e6762(0x22a),_0x4162fb=_0x2b8c94['points']||0x0,_0x1d6c29=_0x2b8c94[_0x3e6762(0x3d0)]?new Date(_0x2b8c94['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():_0x3e6762(0x15e);_0x17b42a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x5d7959+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5b89ac+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x4162fb>0x3e8?_0x3e6762(0x213):_0x4162fb>0x1f4?'medium-points':_0x3e6762(0x2d0))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x4162fb['toLocaleString']()+_0x3e6762(0x2b1)+_0x1d6c29+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x2b8c94['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x2b8c94['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2765c0['appendChild'](_0x17b42a);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x5eb6d9=a0_0x350bb1;console[_0x5eb6d9(0x160)]('Setting\x20up\x20points\x20action\x20buttons...');const _0x1249e6=document['querySelectorAll'](_0x5eb6d9(0x28d));console['log']('Found\x20'+_0x1249e6['length']+'\x20quick\x20edit\x20buttons'),_0x1249e6[_0x5eb6d9(0x3ab)](_0x1b7820=>{const _0x482497=_0x5eb6d9,_0xd83461=_0x1b7820['cloneNode'](!![]);_0x1b7820['parentNode'][_0x482497(0x378)](_0xd83461,_0x1b7820);});const _0x4a374e=document[_0x5eb6d9(0x31e)]('.view-history-btn');console['log']('Found\x20'+_0x4a374e[_0x5eb6d9(0x36e)]+'\x20view\x20history\x20buttons'),_0x4a374e[_0x5eb6d9(0x3ab)](_0x49f9d4=>{const _0x8bf491=_0x5eb6d9,_0x19e411=_0x49f9d4[_0x8bf491(0x27e)](!![]);_0x49f9d4['parentNode']['replaceChild'](_0x19e411,_0x49f9d4);}),document[_0x5eb6d9(0x31e)]('.quick-edit-btn')['forEach'](_0xb44881=>{_0xb44881['addEventListener']('click',function(_0x1b4e92){const _0x4a12b0=a0_0x531a;_0x1b4e92['preventDefault'](),_0x1b4e92['stopPropagation']();const _0x5c2a8f=this['dataset'][_0x4a12b0(0x391)];console['log'](_0x4a12b0(0x19f),_0x5c2a8f);if(!_0x5c2a8f){console['error'](_0x4a12b0(0x32e));return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x5c2a8f);});}),document[_0x5eb6d9(0x31e)]('.view-history-btn')[_0x5eb6d9(0x3ab)](_0x4c20f1=>{_0x4c20f1['addEventListener']('click',function(_0x1ce423){const _0x10efb0=a0_0x531a;_0x1ce423[_0x10efb0(0x2e6)](),_0x1ce423[_0x10efb0(0x18a)]();const _0x327d81=this['dataset']['userId'];console['log'](_0x10efb0(0x192),_0x327d81);if(!_0x327d81){console[_0x10efb0(0x381)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']=_0x10efb0(0x22f),setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x327d81);});}),console['log'](_0x5eb6d9(0x3a7));}async function openQuickEditModal(_0x2a8ee9){const _0x339ab2=a0_0x350bb1;console['log'](_0x339ab2(0x1ad),_0x2a8ee9);const _0x5610ad=document[_0x339ab2(0x345)]('quick-edit-points-modal');if(!_0x5610ad){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification(_0x339ab2(0x37b),'error');return;}try{showNotification(_0x339ab2(0x305),_0x339ab2(0x2a5));const _0x3a0f32=doc(db,'userProfiles',_0x2a8ee9),_0x1877e1=await getDoc(_0x3a0f32);if(!_0x1877e1['exists']()){showNotification(_0x339ab2(0x1d1),_0x339ab2(0x381));return;}const _0xe46c9d=_0x1877e1['data']();console[_0x339ab2(0x160)]('User\x20data\x20loaded:',_0xe46c9d);const _0x247186=document['getElementById']('quick-edit-user-id'),_0x1ea0b8=document['getElementById'](_0x339ab2(0x1c9)),_0x2b4cd5=document['getElementById']('quick-edit-email'),_0x2ecb28=document['getElementById'](_0x339ab2(0x2f5)),_0x27417b=document[_0x339ab2(0x345)](_0x339ab2(0x29b));if(!_0x247186||!_0x1ea0b8||!_0x2b4cd5||!_0x2ecb28||!_0x27417b){console[_0x339ab2(0x381)](_0x339ab2(0x1a4)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.',_0x339ab2(0x381));return;}_0x247186['value']=_0x2a8ee9,_0x1ea0b8['textContent']=_0xe46c9d['displayName']||_0xe46c9d[_0x339ab2(0x16c)]||_0x339ab2(0x1aa),_0x2b4cd5['textContent']=_0xe46c9d['email']||'No\x20email',_0x2ecb28[_0x339ab2(0x1e2)]=(_0xe46c9d['points']||0x0)['toLocaleString'](),_0x27417b['reset']();const _0x5d0d5c=document['getElementById'](_0x339ab2(0x1f9));_0x5d0d5c&&(_0x5d0d5c[_0x339ab2(0x33c)]=!![]);_0x5610ad['classList']['add']('active'),console[_0x339ab2(0x160)](_0x339ab2(0x238));const _0xdf31b1=document['getElementById'](_0x339ab2(0x16b));_0xdf31b1&&setTimeout(()=>_0xdf31b1['focus'](),0x64);}catch(_0x54ea53){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x54ea53),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x54ea53[_0x339ab2(0x2fb)],'error');}}function closeQuickEditModal(){const _0x4d4954=a0_0x350bb1,_0xb5afc7=document[_0x4d4954(0x345)]('quick-edit-points-modal');_0xb5afc7&&_0xb5afc7['classList']['remove']('active');}async function handleQuickEditPoints(_0x263d8e){const _0x3df2ed=a0_0x350bb1;_0x263d8e['preventDefault']();const _0xb86870=document['getElementById']('quick-edit-user-id')[_0x3df2ed(0x180)],_0x1d4842=document[_0x3df2ed(0x29f)]('input[name=\x22quick-action\x22]:checked')[_0x3df2ed(0x180)],_0x4eceda=parseInt(document['getElementById'](_0x3df2ed(0x16b))['value']),_0xcb2a0f=document['getElementById'](_0x3df2ed(0x2da))['value']['trim']();console['log']('Processing\x20points\x20edit:',{'userId':_0xb86870,'action':_0x1d4842,'amount':_0x4eceda,'reason':_0xcb2a0f});if(!_0xb86870||!_0x4eceda||_0x4eceda<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0xb86870,_0x1d4842,_0x4eceda,_0xcb2a0f),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0xb86870);}catch(_0x1a4322){console['error']('Error\x20updating\x20points:',_0x1a4322),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x1a4322[_0x3df2ed(0x2fb)],'error');}}async function searchUsersForPoints(){const _0x1fb1fb=a0_0x350bb1,_0x158dac=document['getElementById']('points-user-search')['value']['trim']()['toLowerCase'](),_0x45c860=document['getElementById']('user-search-results');if(!_0x158dac||_0x158dac['length']<0x2){_0x45c860['innerHTML']='';return;}_0x45c860['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x10505f=collection(db,'userProfiles'),_0x176693=await getDocs(_0x10505f),_0x3f952d=[];_0x176693[_0x1fb1fb(0x3ab)](_0x546486=>{const _0x432fe2=_0x1fb1fb,_0x197a6c=_0x546486['data'](),_0x38c425=(_0x197a6c[_0x432fe2(0x368)]||_0x197a6c['username']||'')['toLowerCase'](),_0x2a32ec=(_0x197a6c['email']||'')['toLowerCase']();(_0x38c425['includes'](_0x158dac)||_0x2a32ec[_0x432fe2(0x278)](_0x158dac))&&_0x3f952d['push']({'id':_0x546486['id'],..._0x197a6c});});if(_0x3f952d['length']===0x0){_0x45c860['innerHTML']=_0x1fb1fb(0x1a0);return;}_0x45c860[_0x1fb1fb(0x1e7)]='',_0x3f952d['forEach'](_0x172b0b=>{const _0x114164=_0x1fb1fb,_0x3df912=document['createElement']('div');_0x3df912[_0x114164(0x2f2)]='search-result-item',_0x3df912['innerHTML']=_0x114164(0x346)+(_0x172b0b['displayName']||_0x172b0b['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x172b0b[_0x114164(0x2fa)]||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x172b0b['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3df912['addEventListener'](_0x114164(0x3a3),()=>selectUserForPoints(_0x172b0b)),_0x45c860['appendChild'](_0x3df912);});}catch(_0x362a1b){console['error']('Error\x20searching\x20users:',_0x362a1b),_0x45c860['innerHTML']=_0x1fb1fb(0x17e);}}function selectUserForPoints(_0x23bdae){const _0x5051a1=a0_0x350bb1;document['getElementById'](_0x5051a1(0x280))['textContent']=_0x23bdae['displayName']||_0x23bdae['username']||'Unknown\x20User',document['getElementById']('selected-user-points')['textContent']=(_0x23bdae['points']||0x0)[_0x5051a1(0x3cc)](),document['getElementById'](_0x5051a1(0x379))['value']=_0x23bdae['id'],document['getElementById'](_0x5051a1(0x2ba))['style']['display']=_0x5051a1(0x2bc),document[_0x5051a1(0x345)]('points-management-forms')['style']['display']='block',document['getElementById'](_0x5051a1(0x241))[_0x5051a1(0x1e7)]='',document['getElementById'](_0x5051a1(0x190))['value']='';}async function handleModifyPoints(_0x504963){const _0x154d60=a0_0x350bb1;_0x504963[_0x154d60(0x2e6)]();const _0x236591=document['getElementById']('selected-user-id')['value'],_0x1c7df3=document['getElementById']('points-action')['value'],_0x2906d8=parseInt(document['getElementById']('points-amount')['value']),_0x379783=document['getElementById']('points-reason')['value']['trim']();if(!_0x236591||!_0x2906d8||_0x2906d8<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x154d60(0x381));return;}try{await modifyUserPoints(_0x236591,_0x1c7df3,_0x2906d8,_0x379783),document[_0x154d60(0x345)]('modify-points-form')['reset']();const _0x2ffcab=doc(db,'userProfiles',_0x236591),_0x41b9e7=await getDoc(_0x2ffcab);if(_0x41b9e7['exists']()){const _0x22d11a=_0x41b9e7[_0x154d60(0x34e)]();document['getElementById']('selected-user-points')[_0x154d60(0x1e2)]=(_0x22d11a['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully',_0x154d60(0x398)),loadPointsHistory();}catch(_0x59f7a5){console['error']('Error\x20modifying\x20points:',_0x59f7a5),showNotification(_0x154d60(0x28c)+_0x59f7a5['message'],'error');}}async function loadPointsHistory(){const _0x3ec2ca=a0_0x350bb1,_0x20b5a2=document[_0x3ec2ca(0x345)](_0x3ec2ca(0x19c));if(!_0x20b5a2)return;_0x20b5a2['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x1d4738=collection(db,'pointsHistory'),_0xa8135=query(_0x1d4738,orderBy('timestamp','desc'),limit(0x32)),_0x5356be=await getDocs(_0xa8135);if(_0x5356be[_0x3ec2ca(0x179)]){_0x20b5a2['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x20b5a2['innerHTML']='',_0x5356be[_0x3ec2ca(0x3ab)](_0x4442a8=>{const _0x124a55=_0x3ec2ca,_0x192ecc=_0x4442a8['data'](),_0x65d71b=document[_0x124a55(0x366)]('tr'),_0x289353=_0x192ecc['timestamp']?new Date(_0x192ecc['timestamp'][_0x124a55(0x20f)]*0x3e8)['toLocaleString']():'Unknown';let _0x3d3f02='';switch(_0x192ecc[_0x124a55(0x2b5)]){case'add':_0x3d3f02='Added\x20'+_0x192ecc[_0x124a55(0x209)]+'\x20points';break;case _0x124a55(0x247):_0x3d3f02=_0x124a55(0x2ed)+_0x192ecc['amount']+'\x20points';break;case'set':_0x3d3f02='Set\x20to\x20'+_0x192ecc['amount']+_0x124a55(0x2ac);break;default:_0x3d3f02=_0x192ecc['action']+'\x20'+_0x192ecc['amount']+'\x20points';}_0x65d71b[_0x124a55(0x1e7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x289353+_0x124a55(0x265)+(_0x192ecc[_0x124a55(0x368)]||_0x124a55(0x1aa))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3d3f02+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x192ecc['action']+_0x124a55(0x235)+(_0x192ecc[_0x124a55(0x33b)]||0x0)+_0x124a55(0x23d)+(_0x192ecc['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x192ecc[_0x124a55(0x323)]||'No\x20reason\x20provided')+_0x124a55(0x265)+(_0x192ecc['adminEmail']||_0x124a55(0x1e4))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x20b5a2['appendChild'](_0x65d71b);});}catch(_0x4a810b){console['error']('Error\x20loading\x20points\x20history:',_0x4a810b),_0x20b5a2[_0x3ec2ca(0x1e7)]='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x4a810b['message']+_0x3ec2ca(0x337);}}function filterPointsOverview(){const _0xf23dd9=a0_0x350bb1,_0x33f79a=document['getElementById']('points-overview-search')['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x47a18a=window[_0xf23dd9(0x30f)]['filter'](_0x45ee3e=>{const _0x202dd1=_0xf23dd9,_0x17d9b6=(_0x45ee3e['displayName']||_0x45ee3e['username']||'')['toLowerCase'](),_0x3f010c=(_0x45ee3e[_0x202dd1(0x2fa)]||'')['toLowerCase']();return _0x17d9b6['includes'](_0x33f79a)||_0x3f010c['includes'](_0x33f79a);});renderPointsOverview(_0x47a18a);}function sortPointsOverview(){const _0x147cf4=a0_0x350bb1,_0x2194a2=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x2b48b7=[...window[_0x147cf4(0x30f)]];switch(_0x2194a2){case _0x147cf4(0x173):_0x2b48b7['sort']((_0x118a89,_0x5d2c19)=>(_0x5d2c19['points']||0x0)-(_0x118a89['points']||0x0));break;case'points-asc':_0x2b48b7['sort']((_0x5b2a6f,_0xdcef85)=>(_0x5b2a6f['points']||0x0)-(_0xdcef85[_0x147cf4(0x3c3)]||0x0));break;case _0x147cf4(0x2b7):_0x2b48b7[_0x147cf4(0x254)]((_0x337d7d,_0x4572fb)=>{const _0x311ecb=_0x147cf4,_0x15fc55=(_0x337d7d['displayName']||_0x337d7d['username']||'')['toLowerCase'](),_0x17e503=(_0x4572fb['displayName']||_0x4572fb[_0x311ecb(0x16c)]||'')['toLowerCase']();return _0x15fc55['localeCompare'](_0x17e503);});break;case'name-desc':_0x2b48b7[_0x147cf4(0x254)]((_0x305552,_0x32608c)=>{const _0x1a7baf=_0x147cf4,_0x19e7fd=(_0x305552['displayName']||_0x305552[_0x1a7baf(0x16c)]||'')['toLowerCase'](),_0xcfd0eb=(_0x32608c['displayName']||_0x32608c['username']||'')['toLowerCase']();return _0xcfd0eb[_0x1a7baf(0x1a8)](_0x19e7fd);});break;}renderPointsOverview(_0x2b48b7);}async function handleAwardItem(_0x4c9afe){const _0xda6044=a0_0x350bb1;_0x4c9afe['preventDefault']();const _0x4ecad6=document['getElementById']('selected-user-id')['value'],_0x34285b=document['getElementById']('store-item-select')['value'],_0xcffb68=document['getElementById']('award-reason')['value'][_0xda6044(0x264)]();if(!_0x4ecad6||!_0x34285b){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully',_0xda6044(0x398)),document['getElementById'](_0xda6044(0x1a1))['reset']();}catch(_0x35c62d){console['error'](_0xda6044(0x2ca),_0x35c62d),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x35c62d['message'],'error');}}async function loadUserPointsHistory(_0x4bdfe0){const _0x43a88f=a0_0x350bb1;try{const _0x121292=collection(db,'pointsHistory'),_0xc64852=query(_0x121292,where('userId','==',_0x4bdfe0),orderBy('timestamp','desc')),_0x91c00a=await getDocs(_0xc64852);console['log']('Found\x20'+_0x91c00a[_0x43a88f(0x390)]+'\x20history\x20entries\x20for\x20user\x20'+_0x4bdfe0),showNotification(_0x43a88f(0x1e9)+_0x91c00a['size']+'\x20points\x20history\x20entries','info');}catch(_0x28af45){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x28af45),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x4e238=a0_0x350bb1;try{console[_0x4e238(0x160)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x2fbb8b=collection(db,_0x4e238(0x1b0)),_0x3b8f41=await getDocs(_0x2fbb8b);if(_0x3b8f41['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0xde6ebd=0x0,_0x1c54af=0x0;const _0x4514dc=writeBatch(db);let _0x14aaa1=0x0;return console[_0x4e238(0x160)](_0x4e238(0x3ad)+_0x3b8f41['size']+'\x20users\x20to\x20check...'),_0x3b8f41[_0x4e238(0x3ab)](_0x32611c=>{const _0x182477=_0x4e238,_0x8d1869=_0x32611c[_0x182477(0x34e)]();_0x8d1869['points']===undefined||_0x8d1869[_0x182477(0x3c3)]===null?(_0x4514dc['update'](_0x32611c['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0xde6ebd++,_0x14aaa1++,console['log']('Queued\x20'+(_0x8d1869['displayName']||_0x8d1869['username']||_0x8d1869['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x1c54af++,console['log']((_0x8d1869['displayName']||_0x8d1869[_0x182477(0x16c)]||_0x8d1869['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x8d1869['points'])),_0x14aaa1>=0x1f4&&console[_0x182477(0x348)]('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0xde6ebd>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0xde6ebd+'\x20users...'),await _0x4514dc['commit'](),console['log']('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0xde6ebd+_0x4e238(0x3b1))):console['log'](_0x4e238(0x208)),console['log'](_0x4e238(0x27c)+_0x3b8f41['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0xde6ebd+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x1c54af),showNotification('Points\x20field\x20initialized\x20for\x20'+_0xde6ebd+'\x20users.\x20'+_0x1c54af+'\x20users\x20already\x20had\x20points.',_0x4e238(0x398)),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x3b8f41['size'],'usersUpdated':_0xde6ebd,'usersAlreadyHadPoints':_0x1c54af};}catch(_0x5ed70e){console['error']('Error\x20initializing\x20points\x20field:',_0x5ed70e),showNotification('Error\x20initializing\x20points:\x20'+_0x5ed70e['message'],_0x4e238(0x381));throw _0x5ed70e;}}function addPointsMigrationButton(){const _0x116e0f=a0_0x350bb1,_0x4d9c73=document[_0x116e0f(0x345)](_0x116e0f(0x3a0));if(!_0x4d9c73)return;if(document[_0x116e0f(0x345)](_0x116e0f(0x277)))return;const _0x16cd5b=document['createElement']('div');_0x16cd5b['className']='migration-section',_0x16cd5b['style']['marginBottom']=_0x116e0f(0x2c2),_0x16cd5b['style'][_0x116e0f(0x329)]='15px',_0x16cd5b['style'][_0x116e0f(0x174)]='rgba(255,\x20193,\x207,\x200.1)',_0x16cd5b[_0x116e0f(0x202)][_0x116e0f(0x31b)]=_0x116e0f(0x20b),_0x16cd5b['style'][_0x116e0f(0x332)]='5px',_0x16cd5b[_0x116e0f(0x1e7)]=_0x116e0f(0x29d);const _0xac61a9=_0x4d9c73['querySelector'](_0x116e0f(0x30e));_0xac61a9&&_0xac61a9['insertAdjacentElement']('afterend',_0x16cd5b),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x18eaee=_0x116e0f;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']=_0x18eaee(0x24b);try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x5e3edd=_0x18eaee;_0x16cd5b['style'][_0x5e3edd(0x1b5)]='none';},0xbb8);}catch(_0x513a34){this[_0x18eaee(0x1e7)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x18eaee(0x2c0)]=![];}}});}function setupManagePointsSection(){const _0x5507e7=a0_0x350bb1;console['log'](_0x5507e7(0x15d)),addPointsMigrationButton();const _0x50e1fd=document['getElementById']('points-user-search');_0x50e1fd&&_0x50e1fd[_0x5507e7(0x1ec)]('input',debounce(searchUsersForPoints,0x12c));const _0x234d21=document[_0x5507e7(0x345)]('modify-points-form');_0x234d21&&_0x234d21[_0x5507e7(0x1ec)]('submit',handleModifyPoints);const _0x3690e5=document[_0x5507e7(0x345)]('award-item-form');_0x3690e5&&_0x3690e5[_0x5507e7(0x1ec)](_0x5507e7(0x2fe),handleAwardItem);const _0x35581a=document[_0x5507e7(0x345)]('points-overview-search');_0x35581a&&_0x35581a['addEventListener'](_0x5507e7(0x295),debounce(filterPointsOverview,0x12c));const _0x2fc755=document['getElementById']('points-sort-order');_0x2fc755&&_0x2fc755[_0x5507e7(0x1ec)]('change',sortPointsOverview);const _0x5535c6=document['getElementById']('refresh-points-overview');_0x5535c6&&_0x5535c6[_0x5507e7(0x1ec)]('click',loadPointsOverview);const _0x538bbc=document['getElementById'](_0x5507e7(0x39d));_0x538bbc&&_0x538bbc['addEventListener']('click',async()=>{const _0x29033b=_0x5507e7;confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x538bbc[_0x29033b(0x2c0)]=!![],_0x538bbc['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x4c408c(),_0x538bbc['disabled']=![],_0x538bbc[_0x29033b(0x1e7)]='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x46051c=document['getElementById'](_0x5507e7(0x2b2));_0x46051c&&_0x46051c['addEventListener']('click',awardPointsToAllPilots);async function _0x4c408c(){const _0xc9cd8c=_0x5507e7;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...',_0xc9cd8c(0x2a5));const _0x403fee={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'≥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x574dc3=0x0,_0x50dfcd=0x0,_0x432ee7=0x0,_0x2056fd=0x0,_0x886d45=0x0,_0xf9c688=0x0;const _0x363004=new Set(),_0x198910=collection(db,'pointsHistory'),_0x2ac5b6=query(_0x198910,where('reason','>=','Bulk\x20award:'),where(_0xc9cd8c(0x323),'<=','Bulk\x20award:')),_0x1d15ec=await getDocs(_0x2ac5b6);_0x1d15ec['forEach'](_0x2d7068=>{const _0x5eb9e6=_0x2d7068['data'](),_0xf5bc04=_0x5eb9e6['reason']||'',_0x49fb72=_0xf5bc04['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x49fb72&&_0x49fb72[0x1]&&_0x363004['add'](_0x49fb72[0x1]);}),console[_0xc9cd8c(0x160)](_0xc9cd8c(0x3ad)+_0x363004['size']+_0xc9cd8c(0x23a));const [_0x5cf46e,_0x329569,_0x32d8ed]=await Promise['all']([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,_0xc9cd8c(0x3b6)))]),_0x4d0d1d=_0x5cf46e[_0xc9cd8c(0x390)]+_0x329569['size']+_0x32d8ed[_0xc9cd8c(0x390)];showNotification('Found\x20'+_0x4d0d1d+'\x20total\x20matches\x20across\x20all\x20ladders',_0xc9cd8c(0x2a5));const _0x47ab49=async(_0x3a9332,_0x4eaea7)=>{const _0x1064a2=_0xc9cd8c;let _0x5654b6=writeBatch(db);const _0x560f83=[];let _0x474837=0x0;for(const _0xf0d967 of _0x3a9332['docs']){try{if(_0x363004[_0x1064a2(0x3bd)](_0xf0d967['id'])){if(_0x4eaea7==='D1')_0xf9c688++;if(_0x4eaea7==='D2')_0xf9c688++;if(_0x4eaea7==='D3')_0xf9c688++;continue;}const _0x5e0995=_0xf0d967[_0x1064a2(0x34e)](),_0x27c897=_0x5e0995['subgameType']||'Standard',_0x46bc91=_0x403fee[_0x27c897]||0xa;let _0x570039=_0x5e0995['winnerId'];if(!_0x570039&&_0x5e0995[_0x1064a2(0x3bb)]){const [_0xed6184,_0x249316,_0x379400]=await Promise['all']([getDocs(query(collection(db,_0x1064a2(0x1ea)),where('username','==',_0x5e0995['winnerUsername']))),getDocs(query(collection(db,_0x1064a2(0x2a0)),where(_0x1064a2(0x16c),'==',_0x5e0995['winnerUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x5e0995[_0x1064a2(0x3bb)])))]);if(!_0xed6184[_0x1064a2(0x179)])_0x570039=_0xed6184['docs'][0x0]['id'];else{if(!_0x249316[_0x1064a2(0x179)])_0x570039=_0x249316['docs'][0x0]['id'];else{if(!_0x379400['empty'])_0x570039=_0x379400[_0x1064a2(0x270)][0x0]['id'];}}}let _0x581571=_0x5e0995['loserId'];if(!_0x581571&&_0x5e0995['loserUsername']){const [_0x44e6bb,_0x5c9762,_0x37ff41]=await Promise[_0x1064a2(0x3aa)]([getDocs(query(collection(db,_0x1064a2(0x1ea)),where('username','==',_0x5e0995['loserUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x5e0995[_0x1064a2(0x3bc)]))),getDocs(query(collection(db,'playersD3'),where(_0x1064a2(0x16c),'==',_0x5e0995['loserUsername'])))]);if(!_0x44e6bb[_0x1064a2(0x179)])_0x581571=_0x44e6bb[_0x1064a2(0x270)][0x0]['id'];else{if(!_0x5c9762['empty'])_0x581571=_0x5c9762['docs'][0x0]['id'];else{if(!_0x37ff41['empty'])_0x581571=_0x37ff41[_0x1064a2(0x270)][0x0]['id'];}}}if(_0x570039&&_0x581571){const _0x47b89a=doc(db,'userProfiles',_0x570039),_0x4b2df9=doc(db,'userProfiles',_0x581571),[_0x473d14,_0x53e9a8]=await Promise['all']([getDoc(_0x47b89a),getDoc(_0x4b2df9)]);if(_0x473d14[_0x1064a2(0x225)]()){const _0x52e76c=_0x473d14[_0x1064a2(0x34e)](),_0x27a388=_0x52e76c['points']||0x0;_0x5654b6['update'](_0x47b89a,{'points':_0x27a388+_0x46bc91,'lastPointsModified':serverTimestamp()}),_0x560f83[_0x1064a2(0x3c7)]({'userId':_0x570039,'userEmail':_0x52e76c[_0x1064a2(0x2fa)]||'unknown','displayName':_0x52e76c['displayName']||_0x5e0995[_0x1064a2(0x3bb)]||_0x1064a2(0x1aa),'action':'add','amount':_0x46bc91,'previousPoints':_0x27a388,'newPoints':_0x27a388+_0x46bc91,'reason':'Bulk\x20award:\x20'+_0x27c897+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0xf0d967['id']+'\x20-\x20'+_0x4eaea7,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}if(_0x53e9a8[_0x1064a2(0x225)]()){const _0x532503=_0x53e9a8['data'](),_0x5cc547=_0x532503['points']||0x0;_0x5654b6['update'](_0x4b2df9,{'points':_0x5cc547+_0x46bc91,'lastPointsModified':serverTimestamp()}),_0x560f83['push']({'userId':_0x581571,'userEmail':_0x532503[_0x1064a2(0x2fa)]||_0x1064a2(0x2c7),'displayName':_0x532503[_0x1064a2(0x368)]||_0x5e0995['loserUsername']||'Unknown\x20User','action':'add','amount':_0x46bc91,'previousPoints':_0x5cc547,'newPoints':_0x5cc547+_0x46bc91,'reason':'Bulk\x20award:\x20'+_0x27c897+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0xf0d967['id']+'\x20-\x20'+_0x4eaea7,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x2056fd+=_0x46bc91*0x2,_0x474837+=0x2,_0x363004['add'](_0xf0d967['id']);if(_0x474837>=0x190){await _0x5654b6['commit']();for(const _0x177552 of _0x560f83){await addDoc(collection(db,'pointsHistory'),_0x177552);}_0x5654b6=writeBatch(db),_0x474837=0x0,_0x560f83['length']=0x0;}}}catch(_0x3c1907){console['error']('Error\x20processing\x20'+_0x4eaea7+'\x20match\x20'+_0xf0d967['id']+':',_0x3c1907),_0x886d45++;}}if(_0x474837>0x0){await _0x5654b6['commit']();for(const _0x3b5def of _0x560f83){await addDoc(collection(db,_0x1064a2(0x1b9)),_0x3b5def);}}return{'processed':_0x4eaea7==='D1'?_0x574dc3:_0x4eaea7==='D2'?_0x50dfcd:_0x432ee7};};await _0x47ab49(_0x5cf46e,'D1'),await _0x47ab49(_0x329569,'D2'),await _0x47ab49(_0x32d8ed,'D3'),showNotification('Completed!\x20Processed\x20'+_0x574dc3+'\x20D1\x20matches,\x20'+_0x50dfcd+'\x20D2\x20matches,\x20'+_0x432ee7+_0xc9cd8c(0x35a)+('Awarded\x20'+_0x2056fd+_0xc9cd8c(0x1ca)+_0xf9c688+_0xc9cd8c(0x172)+_0x886d45),_0xc9cd8c(0x398)),document[_0xc9cd8c(0x345)](_0xc9cd8c(0x17c))&&loadPointsOverview();}catch(_0x6f8112){console['error']('Error\x20in\x20bulk\x20award\x20points:',_0x6f8112),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x6f8112['message'],'error');}}const _0x17f1be=document['getElementById']('quick-edit-points-modal');if(_0x17f1be){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x4e8ba2=_0x17f1be['querySelector']('.close-btn');_0x4e8ba2?_0x4e8ba2[_0x5507e7(0x1ec)]('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x44777=document['getElementById'](_0x5507e7(0x2b9));_0x44777?_0x44777['addEventListener'](_0x5507e7(0x3a3),function(){const _0x2bb16c=_0x5507e7;console['log'](_0x2bb16c(0x1ce)),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x9e3ee3=document['getElementById'](_0x5507e7(0x29b));_0x9e3ee3?_0x9e3ee3[_0x5507e7(0x1ec)]('submit',function(_0x4a5647){const _0x250acc=_0x5507e7;console['log'](_0x250acc(0x25d)),handleQuickEditPoints(_0x4a5647);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x17f1be['addEventListener']('click',function(_0x2fd425){const _0x18735b=_0x5507e7;_0x2fd425[_0x18735b(0x364)]===_0x17f1be&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console[_0x5507e7(0x381)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0xc97893=a0_0x350bb1;try{const _0x19c9c5=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x19c9c5||isNaN(_0x19c9c5)){showNotification(_0xc97893(0x23e),'error');return;}if(!confirm('This\x20will\x20award\x20'+_0x19c9c5+_0xc97893(0x1f4)))return;showNotification(_0xc97893(0x3b3),'info');const [_0x480413,_0x395d4a,_0x3df1d6]=await Promise[_0xc97893(0x3aa)]([getDocs(collection(db,'players')),getDocs(collection(db,_0xc97893(0x2a0))),getDocs(collection(db,'playersD3'))]);console[_0xc97893(0x160)]('Found\x20'+_0x480413[_0xc97893(0x390)]+_0xc97893(0x1db)+_0x395d4a[_0xc97893(0x390)]+'\x20D2\x20pilots,\x20'+_0x3df1d6[_0xc97893(0x390)]+'\x20D3\x20pilots');const _0x2fb714=_0x480413['size']+_0x395d4a['size']+_0x3df1d6['size'],_0x204742=new Map();_0x480413['forEach'](_0x59a37a=>{const _0x10f693=_0xc97893,_0x1ef01a=_0x59a37a['data']();_0x204742[_0x10f693(0x1e6)](_0x59a37a['id'],{'username':_0x1ef01a['username'],'ladder':'D1'});}),_0x395d4a[_0xc97893(0x3ab)](_0x26a143=>{const _0x26f02c=_0xc97893,_0x253e0a=_0x26a143[_0x26f02c(0x34e)]();_0x204742[_0x26f02c(0x1e6)](_0x26a143['id'],{'username':_0x253e0a['username'],'ladder':'D2'});}),_0x3df1d6[_0xc97893(0x3ab)](_0x14a546=>{const _0x2a18cc=_0xc97893,_0x4cf73c=_0x14a546['data']();_0x204742['set'](_0x14a546['id'],{'username':_0x4cf73c[_0x2a18cc(0x16c)],'ladder':'D3'});}),console[_0xc97893(0x160)]('Found\x20'+_0x204742['size']+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x4a22f4=0x0,_0x3c5521=0x0,_0x293f57=0x0;const _0x2f54f2=Array['from'](_0x204742['keys']()),_0x2879bb=0x190;for(let _0x2b85d8=0x0;_0x2b85d8<_0x2f54f2['length'];_0x2b85d8+=_0x2879bb){const _0x1aea42=writeBatch(db),_0x9faf9b=[],_0x256fe4=_0x2f54f2[_0xc97893(0x3a4)](_0x2b85d8,_0x2b85d8+_0x2879bb),_0x1c1632=await Promise['all'](_0x256fe4[_0xc97893(0x3c5)](_0x2ad3ac=>getDoc(doc(db,'userProfiles',_0x2ad3ac))));for(let _0x55f671=0x0;_0x55f671<_0x256fe4['length'];_0x55f671++){try{const _0x1f45c7=_0x256fe4[_0x55f671],_0x5595f7=_0x204742['get'](_0x1f45c7),_0xd23866=_0x1c1632[_0x55f671];if(_0xd23866['exists']()){const _0x5e2bd8=_0xd23866['data'](),_0x4fa739=_0x5e2bd8['points']||0x0,_0x56db76=_0x4fa739+_0x19c9c5;_0x1aea42['update'](doc(db,'userProfiles',_0x1f45c7),{'points':_0x56db76,'lastPointsModified':serverTimestamp()}),_0x9faf9b['push']({'userId':_0x1f45c7,'userEmail':_0x5e2bd8[_0xc97893(0x2fa)]||'unknown','displayName':_0x5e2bd8[_0xc97893(0x368)]||_0x5595f7['username']||'Unknown\x20User','action':'add','amount':_0x19c9c5,'previousPoints':_0x4fa739,'newPoints':_0x56db76,'reason':_0xc97893(0x2c6)+_0x5595f7[_0xc97893(0x399)]+')','adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()}),_0x3c5521+=_0x19c9c5,_0x4a22f4++;}else _0x293f57++,console[_0xc97893(0x348)]('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x5595f7[_0xc97893(0x16c)]+'\x20('+_0x1f45c7+')');}catch(_0x462c3f){_0x293f57++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x462c3f);}}await _0x1aea42[_0xc97893(0x273)]();for(const _0x3ebeba of _0x9faf9b){await addDoc(collection(db,_0xc97893(0x1b9)),_0x3ebeba);}showNotification('Processed\x20'+_0x4a22f4+'/'+_0x2fb714+'\x20pilots...','info');}showNotification('Complete!\x20Awarded\x20'+_0x3c5521+_0xc97893(0x2f0)+_0x4a22f4+'\x20pilots.\x20Errors:\x20'+_0x293f57,'success'),document['getElementById'](_0xc97893(0x17c))&&loadPointsOverview();}catch(_0x3ebee4){console['error'](_0xc97893(0x178),_0x3ebee4),showNotification(_0xc97893(0x36f)+_0x3ebee4[_0xc97893(0x2fb)],'error');}}function setupManageRibbonsSection(){const _0x26633c=a0_0x350bb1;console[_0x26633c(0x160)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x246661=document['getElementById'](_0x26633c(0x309));_0x246661&&_0x246661[_0x26633c(0x1ec)](_0x26633c(0x295),debounce(searchRibbonUser,0x12c));const _0x3db595=document[_0x26633c(0x345)]('search-ribbon-user-btn');_0x3db595&&_0x3db595['addEventListener'](_0x26633c(0x3a3),searchRibbonUser);const _0x1c39fc=document['getElementById'](_0x26633c(0x3cd));_0x1c39fc&&_0x1c39fc['addEventListener']('submit',addRibbon),_0x246661&&_0x246661['addEventListener'](_0x26633c(0x2c5),function(_0x4b190a){_0x4b190a['key']==='Enter'&&(_0x4b190a['preventDefault'](),searchRibbonUser());}),console['log'](_0x26633c(0x21b));}async function modifyUserPoints(_0x1de52e,_0x5d49eb,_0x38538e,_0xf3ba6c=''){const _0x3af3df=a0_0x350bb1,_0xee8279=doc(db,'userProfiles',_0x1de52e),_0x2d1c15=await getDoc(_0xee8279);if(!_0x2d1c15['exists']())throw new Error('User\x20not\x20found');const _0x4b45bd=_0x2d1c15[_0x3af3df(0x34e)](),_0x32da51=_0x4b45bd['points']!==undefined?_0x4b45bd['points']:0x0;_0x4b45bd['points']===undefined&&(console['log'](_0x3af3df(0x2b4)+(_0x4b45bd['displayName']||_0x4b45bd['email']||'Unknown')),await updateDoc(_0xee8279,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x5722de=_0x32da51;switch(_0x5d49eb){case _0x3af3df(0x1b7):_0x5722de=_0x32da51+_0x38538e;break;case'subtract':_0x5722de=Math['max'](0x0,_0x32da51-_0x38538e);break;case'set':_0x5722de=_0x38538e;break;default:throw new Error(_0x3af3df(0x25e));}await updateDoc(_0xee8279,{'points':_0x5722de,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x1de52e,'userEmail':_0x4b45bd['email']||_0x3af3df(0x2c7),'displayName':_0x4b45bd['displayName']||_0x4b45bd['username']||_0x3af3df(0x1aa),'action':_0x5d49eb,'amount':_0x38538e,'previousPoints':_0x32da51,'newPoints':_0x5722de,'reason':_0xf3ba6c,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x4fe2c0=a0_0x350bb1,_0x5ab04e=document['getElementById']('points-overview-table-body');if(!_0x5ab04e)return;_0x5ab04e['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x27d197=collection(db,_0x4fe2c0(0x1b0)),_0x2213af=await getDocs(_0x27d197);if(_0x2213af['empty']){_0x5ab04e['innerHTML']=_0x4fe2c0(0x222);return;}const _0x1b07ec=[];let _0x9205c6=0x0;_0x2213af['forEach'](_0x172f29=>{const _0x557533=_0x4fe2c0,_0x26c2e2=_0x172f29['data'](),_0x34526b=_0x26c2e2['points']!==undefined?_0x26c2e2[_0x557533(0x3c3)]:0x0;_0x26c2e2[_0x557533(0x3c3)]===undefined&&_0x9205c6++,_0x1b07ec['push']({'id':_0x172f29['id'],..._0x26c2e2,'points':_0x34526b});}),_0x9205c6>0x0&&(console['log']('Found\x20'+_0x9205c6+_0x4fe2c0(0x2f7)),showNotification(_0x9205c6+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x1b07ec['sort']((_0x17b78a,_0x4ea5b1)=>(_0x4ea5b1['points']||0x0)-(_0x17b78a['points']||0x0)),window[_0x4fe2c0(0x30f)]=_0x1b07ec,renderPointsOverview(_0x1b07ec);}catch(_0x2d8a1c){console['error']('Error\x20loading\x20points\x20overview:',_0x2d8a1c),_0x5ab04e[_0x4fe2c0(0x1e7)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x2d8a1c[_0x4fe2c0(0x2fb)]+_0x4fe2c0(0x337);}}async function loadRibbonsData(){const _0x17a677=a0_0x350bb1,_0x127ed6=document[_0x17a677(0x345)]('ribbons-overview-table-body');if(!_0x127ed6)return;_0x127ed6[_0x17a677(0x1e7)]=_0x17a677(0x221);try{const [_0x329c90,_0x5a14db,_0x55cd44]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x127ed6[_0x17a677(0x1e7)]='';const _0x3c9537=(_0x26c86a,_0x1759a0)=>{_0x26c86a['forEach'](_0x4c41a5=>{const _0x2a5a0e=a0_0x531a,_0x1784cb=_0x4c41a5['data'](),_0x143147=_0x1784cb['ribbons']||{},_0x580089=Object['keys'](_0x143147)['length'],_0x5042bb=document['createElement']('tr');_0x5042bb['innerHTML']=_0x2a5a0e(0x19e)+(_0x1784cb[_0x2a5a0e(0x16c)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x1759a0['toLowerCase']()+'\x22>'+_0x1759a0+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x580089+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1784cb['lastUpdated']?new Date(_0x1784cb[_0x2a5a0e(0x16d)]['seconds']*0x3e8)['toLocaleDateString']():_0x2a5a0e(0x1c6))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x1784cb[_0x2a5a0e(0x16c)]+'\x22\x20data-ladder=\x22'+_0x1759a0+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x127ed6['appendChild'](_0x5042bb);});};_0x3c9537(_0x329c90,'D1'),_0x3c9537(_0x5a14db,'D2'),_0x3c9537(_0x55cd44,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x49ea8a=>{_0x49ea8a['addEventListener']('click',function(){const _0x2f49db=a0_0x531a,_0x2b83bb=this[_0x2f49db(0x306)]['username'],_0x43d82e=this['dataset']['ladder'];editUserRibbons(_0x2b83bb,_0x43d82e);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x6eed6){console[_0x17a677(0x381)](_0x17a677(0x1c4),_0x6eed6),_0x127ed6['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x40577a=a0_0x350bb1,_0x76fcf1=document['getElementById'](_0x40577a(0x309))['value']['trim']();if(!_0x76fcf1){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x23086e,_0x38cf74,_0x42c1e6]=await Promise['all']([getDoc(doc(db,_0x40577a(0x322),_0x76fcf1)),getDoc(doc(db,'playerRibbonsD2',_0x76fcf1)),getDoc(doc(db,'playerRibbonsD3',_0x76fcf1))]);let _0x2526ae=null,_0x3cc38c=null;if(_0x23086e['exists']())_0x2526ae='D1',_0x3cc38c=_0x23086e[_0x40577a(0x34e)]();else{if(_0x38cf74[_0x40577a(0x225)]())_0x2526ae='D2',_0x3cc38c=_0x38cf74['data']();else _0x42c1e6[_0x40577a(0x225)]()&&(_0x2526ae='D3',_0x3cc38c=_0x42c1e6[_0x40577a(0x34e)]());}_0x2526ae?(document['getElementById']('current-ribbon-user')['textContent']=_0x76fcf1,document['getElementById'](_0x40577a(0x226))['value']=_0x76fcf1,document['getElementById']('ribbon-target-ladder')[_0x40577a(0x180)]=_0x2526ae,document[_0x40577a(0x345)](_0x40577a(0x26f))['style']['display']='block',displayCurrentRibbons(_0x3cc38c['ribbons']||{}),showNotification(_0x40577a(0x3ad)+_0x76fcf1+'\x20in\x20'+_0x2526ae+'\x20ladder',_0x40577a(0x398))):showNotification(_0x40577a(0x271)+_0x76fcf1+_0x40577a(0x28e),'error');}catch(_0x52da55){console['error']('Error\x20searching\x20user:',_0x52da55),showNotification('Error\x20searching\x20for\x20user',_0x40577a(0x381));}}function displayCurrentRibbons(_0x119fe1){const _0x81adc6=a0_0x350bb1,_0x391332=document[_0x81adc6(0x345)](_0x81adc6(0x1a3));if(!_0x391332)return;_0x391332[_0x81adc6(0x1e7)]='';if(Object[_0x81adc6(0x3b8)](_0x119fe1)['length']===0x0){_0x391332['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object[_0x81adc6(0x2ec)](_0x119fe1)['forEach'](([_0x7410a0,_0x59d115])=>{const _0x404623=_0x81adc6,_0x452486=document[_0x404623(0x366)]('div');_0x452486['className']='ribbon-item',_0x452486['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x7410a0+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x59d115['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x59d115['awardedAt']?new Date(_0x59d115['awardedAt']['seconds']*0x3e8)[_0x404623(0x18f)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x7410a0+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x391332['appendChild'](_0x452486);}),document['querySelectorAll'](_0x81adc6(0x325))['forEach'](_0x9c1523=>{_0x9c1523['addEventListener']('click',function(){const _0xa08c45=this['dataset']['ribbon'];removeRibbon(_0xa08c45);});});}async function addRibbon(_0x101acd){const _0x24cc0c=a0_0x350bb1;_0x101acd['preventDefault']();const _0x260286=document['getElementById']('ribbon-target-user')[_0x24cc0c(0x180)],_0x36bc5f=document['getElementById']('ribbon-target-ladder')[_0x24cc0c(0x180)],_0x4ad6dc=document[_0x24cc0c(0x345)]('ribbon-type-select')[_0x24cc0c(0x180)],_0x42c0f4=parseInt(document[_0x24cc0c(0x345)](_0x24cc0c(0x170))['value']);if(!_0x260286||!_0x36bc5f||!_0x4ad6dc||!_0x42c0f4){showNotification(_0x24cc0c(0x1de),_0x24cc0c(0x381));return;}try{const _0xadf81e=_0x24cc0c(0x322)+(_0x36bc5f==='D1'?'':_0x36bc5f),_0x3c52b=doc(db,_0xadf81e,_0x260286),_0x25a8d8=await getDoc(_0x3c52b),_0x97aa9a=_0x25a8d8['exists']()?_0x25a8d8['data']()[_0x24cc0c(0x1df)]||{}:{};_0x97aa9a[_0x4ad6dc]={'level':_0x42c0f4,'awardedAt':serverTimestamp()},await setDoc(_0x3c52b,{'username':_0x260286,'ladder':_0x36bc5f,'ribbons':_0x97aa9a,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x4ad6dc+'\x20Level\x20'+_0x42c0f4+_0x24cc0c(0x26b)+_0x260286,'success'),displayCurrentRibbons(_0x97aa9a),document['getElementById']('ribbon-type-select')['value']='',document['getElementById']('ribbon-level')['value']='1';}catch(_0xe47461){console['error']('Error\x20adding\x20ribbon:',_0xe47461),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x131a6c){const _0x42a709=a0_0x350bb1,_0x1db44a=document['getElementById'](_0x42a709(0x226))['value'],_0x147bc6=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x131a6c+'\x20from\x20'+_0x1db44a+'?'))return;try{const _0xeab06a=_0x42a709(0x322)+(_0x147bc6==='D1'?'':_0x147bc6),_0x101b6d=doc(db,_0xeab06a,_0x1db44a),_0x3940fe=await getDoc(_0x101b6d),_0x31a142=_0x3940fe['exists']()?_0x3940fe['data']()['ribbons']||{}:{};delete _0x31a142[_0x131a6c],await setDoc(_0x101b6d,{'username':_0x1db44a,'ladder':_0x147bc6,'ribbons':_0x31a142,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x131a6c+'\x20from\x20'+_0x1db44a,'success'),displayCurrentRibbons(_0x31a142);}catch(_0x376a06){console[_0x42a709(0x381)](_0x42a709(0x3ca),_0x376a06),showNotification('Error\x20removing\x20ribbon',_0x42a709(0x381));}}function editUserRibbons(_0x450c0a,_0x28c61a){const _0x3d3949=a0_0x350bb1;document['getElementById'](_0x3d3949(0x309))[_0x3d3949(0x180)]=_0x450c0a,searchRibbonUser();}