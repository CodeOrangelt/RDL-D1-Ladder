const a50_0x39480c=a50_0xb3f9,a50_0x46d979=(function(){let _0x318c32=!![];return function(_0x1c227d,_0x5d31c7){const _0x550983=_0x318c32?function(){if(_0x5d31c7){const _0x3d6974=_0x5d31c7['apply'](_0x1c227d,arguments);return _0x5d31c7=null,_0x3d6974;}}:function(){};return _0x318c32=![],_0x550983;};}()),a50_0x5a7e32=a50_0x46d979(this,function(){const _0x2af336=a50_0xb3f9;let _0x51de41;try{const _0x256f99=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x51de41=_0x256f99();}catch(_0x12d5a2){_0x51de41=window;}const _0x35cfec=_0x51de41[_0x2af336(0xdc)]=_0x51de41['console']||{},_0x22b236=['log',_0x2af336(0x101),'info',_0x2af336(0xed),'exception','table','trace'];for(let _0x2145aa=0x0;_0x2145aa<_0x22b236[_0x2af336(0xfd)];_0x2145aa++){const _0x5823b1=a50_0x46d979['constructor'][_0x2af336(0xf0)]['bind'](a50_0x46d979),_0x4f6911=_0x22b236[_0x2145aa],_0xa60989=_0x35cfec[_0x4f6911]||_0x5823b1;_0x5823b1['__proto__']=a50_0x46d979[_0x2af336(0x107)](a50_0x46d979),_0x5823b1['toString']=_0xa60989[_0x2af336(0x113)]['bind'](_0xa60989),_0x35cfec[_0x4f6911]=_0x5823b1;}});a50_0x5a7e32();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':a50_0x39480c(0x10f),'description':'Emerald\x20City!'},'gold':{'price':0x320,'name':a50_0x39480c(0xfa),'description':a50_0x39480c(0x10a)},'contrast':{'price':0x0,'name':a50_0x39480c(0xd8),'description':'You\x20can\x20see\x20better!'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'}};function a50_0xa281(){const _0xe81b6e=['store-message','success','innerHTML','isUserAdmin','Sign\x20in\x20to\x20Purchase','createElement','disabled','classList','Not\x20enough\x20points.\x20You\x20need\x20','uid','default','name','.theme-select-btn','You\x20must\x20purchase\x20this\x20theme\x20first','‚úÖ\x20Purchased\x20','Black\x20&\x20White','üè™\x20Redeem\x20store\x20loaded','parentNode','current-theme','console','itemId','add','sign-in-paid','data','theme_','\x20is\x20already\x20your\x20current\x20theme','style','appendChild','points','user-points','transactions','You\x20need\x20','textContent','sign-in-free','split','store-content','error','visible','üëë\x20Admin\x20controls\x20enabled','prototype','displayName','opacity','Need\x20','closest','isAdmin','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','log','dispatchEvent','inventory','Gold','\x20more\x20points.','remove','length','Theme\x20','div','User\x20data\x20loaded\x20-\x20Points:\x20','warn','addEventListener','ThemeSystem','querySelector','Please\x20sign\x20in\x20to\x20select\x20themes','\x20points','bind','getCurrentTheme','Purchase\x20','Only\x20the\x20best\x20get\x20this\x20one','entries','üè™\x20Redeem\x20store\x20initializing...','body','Current\x20Theme','Emerald','\x20Points','display','price','toString','forEach','Purchase\x20failed:','\x20theme','FREE','dataset'];a50_0xa281=function(){return _0xe81b6e;};return a50_0xa281();}let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document[a50_0x39480c(0x102)]('DOMContentLoaded',()=>{const _0x596886=a50_0x39480c;console[_0x596886(0xf7)](_0x596886(0x10c)),storeContainer=document['getElementById'](_0x596886(0xec)),pointsDisplay=document['getElementById'](_0x596886(0xe6)),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x9e18be=>{const _0x204afc=a50_0xb3f9;if(_0x9e18be){console['log']('‚úÖ\x20User\x20authenticated:',_0x9e18be[_0x204afc(0xf1)]||_0x9e18be['email']);if(authWarning)authWarning['style']['display']='none';if(storeContainer)storeContainer['style']['display']='block';await loadUserData(_0x9e18be),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style']['display']='block';if(storeContainer)storeContainer['style'][_0x204afc(0x111)]='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x5239ce){const _0x34b75e=a50_0x39480c;try{const _0x47ad34=doc(db,'userProfiles',_0x5239ce['uid']),_0x153f36=await getDoc(_0x47ad34);if(_0x153f36['exists']()){const _0x4f03e8=_0x153f36[_0x34b75e(0xe0)]();userData={'points':_0x4f03e8['points']||0x0,'inventory':_0x4f03e8['inventory']||[],'isAdmin':_0x4f03e8['isAdmin']||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window['isUserAdmin']=userData['isAdmin'],userData[_0x34b75e(0xf5)]&&(console['log'](_0x34b75e(0xef)),window[_0x34b75e(0xf8)](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log'](_0x34b75e(0x100)+userData['points']+',\x20Inventory:\x20'+userData['inventory'][_0x34b75e(0xfd)]+'\x20items');}else await setDoc(_0x47ad34,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x5239ce['displayName']||_0x5239ce['email']?.[_0x34b75e(0xeb)]('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay[_0x34b75e(0xe9)]='0'),window[_0x34b75e(0xcc)]=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x169c22){console['error']('Error\x20loading\x20user\x20data:',_0x169c22);}}function userOwnsTheme(_0xa29c10){const _0x2fef3c=a50_0x39480c;if(THEMES[_0xa29c10]?.[_0x2fef3c(0x112)]===0x0)return!![];return userData[_0x2fef3c(0xf9)]['includes'](_0x2fef3c(0xe1)+_0xa29c10);}async function purchaseTheme(_0x3e7843){const _0x45e065=a50_0x39480c,_0x26443b=auth['currentUser'];if(!_0x26443b)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes',_0x45e065(0xed)),![];const _0x2aab59=THEMES[_0x3e7843];if(!_0x2aab59)return console[_0x45e065(0xed)]('Theme\x20'+_0x3e7843+'\x20not\x20found'),![];if(userData[_0x45e065(0xe5)]<_0x2aab59[_0x45e065(0x112)])return showMessage(_0x45e065(0xd1)+(_0x2aab59['price']-userData['points'])+_0x45e065(0xfb),'error'),![];if(userOwnsTheme(_0x3e7843))return showMessage('You\x20already\x20own\x20the\x20'+_0x2aab59['name']+_0x45e065(0x116),'info'),![];try{const _0x230411=doc(db,'userProfiles',_0x26443b[_0x45e065(0xd2)]),_0x3c77eb=await getDoc(_0x230411);if(!_0x3c77eb['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x18f98c=_0x3c77eb['data'](),_0x22c49a=_0x18f98c['points']||0x0,_0x44997c=_0x18f98c['inventory']||[];if(_0x22c49a<_0x2aab59['price'])return showMessage('Insufficient\x20points',_0x45e065(0xed)),![];if(_0x44997c['includes']('theme_'+_0x3e7843))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0x344d63=_0x22c49a-_0x2aab59[_0x45e065(0x112)],_0x257f23=[..._0x44997c,'theme_'+_0x3e7843];return await updateDoc(_0x230411,{'points':_0x344d63,'inventory':_0x257f23,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,_0x45e065(0xe7)),{'userId':_0x26443b[_0x45e065(0xd2)],'userEmail':_0x26443b['email'],'itemId':_0x45e065(0xe1)+_0x3e7843,'itemTitle':_0x2aab59[_0x45e065(0xd4)]+'\x20Theme','price':_0x2aab59[_0x45e065(0x112)],'type':'purchase','category':'theme','timestamp':serverTimestamp()}),userData[_0x45e065(0xe5)]=_0x344d63,userData['inventory']=_0x257f23,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x45e065(0xe5)]['toLocaleString']()),console['log'](_0x45e065(0xd7)+_0x2aab59['name']+'\x20theme\x20for\x20'+_0x2aab59[_0x45e065(0x112)]+_0x45e065(0x106)),!![];}catch(_0x394992){return console['error'](_0x45e065(0x115),_0x394992),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}function applyTheme(_0x1840c3){const _0x93fb73=a50_0x39480c;if(!userOwnsTheme(_0x1840c3))return showMessage(_0x93fb73(0xd6),_0x93fb73(0xed)),![];return window[_0x93fb73(0x103)]?(window['ThemeSystem']['switchTheme'](_0x1840c3),showMessage((THEMES[_0x1840c3]?.['name']||_0x1840c3)+'\x20theme\x20applied!',_0x93fb73(0xca)),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0x57bce4=a50_0x39480c,_0x11e990=document[_0x57bce4(0x104)]('.themes-grid');if(!_0x11e990){console[_0x57bce4(0xed)]('Themes\x20container\x20not\x20found');return;}_0x11e990['innerHTML']='',Object[_0x57bce4(0x10b)](THEMES)['forEach'](([_0x504fbe,_0x4740cd])=>{const _0x10cdb0=_0x57bce4,_0x3f107a=document[_0x10cdb0(0xce)]('div');_0x3f107a['className']='store-item',_0x3f107a['dataset']['theme']=_0x504fbe,_0x3f107a[_0x10cdb0(0x118)][_0x10cdb0(0xdd)]='theme_'+_0x504fbe,_0x3f107a['dataset']['price']=_0x4740cd[_0x10cdb0(0x112)],_0x3f107a[_0x10cdb0(0xcb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x504fbe+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x4740cd['price']===0x0?_0x10cdb0(0x117):_0x4740cd[_0x10cdb0(0x112)]+_0x10cdb0(0x110))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x4740cd['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x4740cd['description']+_0x10cdb0(0xf6),_0x11e990[_0x10cdb0(0xe4)](_0x3f107a);}),setupThemeButtons();}function setupThemeButtons(){const _0x501b3f=a50_0x39480c,_0x3c0c41=document['querySelectorAll'](_0x501b3f(0xd5));_0x3c0c41[_0x501b3f(0x114)](_0x119593=>{_0x119593['addEventListener']('click',async _0x3e30d8=>{const _0x7cb06=a50_0xb3f9;_0x3e30d8['preventDefault']();const _0x1f92b4=auth['currentUser'];if(!_0x1f92b4){showMessage(_0x7cb06(0x105),_0x7cb06(0xed));return;}const _0x2b506c=_0x119593['closest']('[data-theme]'),_0x31aacb=_0x2b506c[_0x7cb06(0x118)]['theme'],_0x50b312=THEMES[_0x31aacb];if(!_0x50b312){console['error'](_0x7cb06(0xfe)+_0x31aacb+'\x20not\x20found');return;}console[_0x7cb06(0xf7)]('Theme\x20clicked:\x20'+_0x50b312[_0x7cb06(0xd4)]+'\x20('+_0x31aacb+')');if(_0x119593['disabled']){_0x50b312['price']>0x0&&showMessage(_0x7cb06(0xe8)+_0x50b312['price']+'\x20points\x20to\x20purchase\x20this\x20theme',_0x7cb06(0xed));return;}if(_0x119593[_0x7cb06(0xe9)]==='Current\x20Theme'){showMessage(_0x50b312['name']+_0x7cb06(0xe2),'info');return;}if(_0x119593[_0x7cb06(0xe9)]==='Apply\x20Theme'){applyTheme(_0x31aacb),updateThemeButtons();return;}if(_0x119593[_0x7cb06(0xe9)]['includes']('Buy')){const _0x4bebf3=window['confirm'](_0x7cb06(0x109)+_0x50b312['name']+'\x20theme\x20for\x20'+_0x50b312[_0x7cb06(0x112)]+'\x20points?');if(!_0x4bebf3)return;const _0x495d22=await purchaseTheme(_0x31aacb);_0x495d22&&(showMessage(_0x50b312['name']+'\x20theme\x20purchased!','success'),applyTheme(_0x31aacb),updateThemeButtons());return;}userOwnsTheme(_0x31aacb)?applyTheme(_0x31aacb):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x5bff8a=a50_0x39480c,_0x357f2f=window['ThemeSystem']?window[_0x5bff8a(0x103)][_0x5bff8a(0x108)]():_0x5bff8a(0xd3),_0x2ff686=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')[_0x5bff8a(0x114)](_0x5c9992=>{const _0x345c7a=_0x5bff8a,_0x272682=_0x5c9992[_0x345c7a(0xf4)]('[data-theme]'),_0x547496=_0x272682[_0x345c7a(0x118)]['theme'],_0x233e5b=THEMES[_0x547496];if(!_0x233e5b)return;_0x5c9992[_0x345c7a(0xcf)]=![],_0x5c9992['style']['opacity']='',_0x5c9992['style']['cursor']='pointer',_0x5c9992[_0x345c7a(0xd0)]['remove'](_0x345c7a(0xdb),'apply-theme','can-afford','cannot-afford','sign-in-free',_0x345c7a(0xdf));if(!_0x2ff686){_0x233e5b['price']===0x0?(_0x5c9992['textContent']='Sign\x20in\x20to\x20Apply',_0x5c9992[_0x345c7a(0xd0)][_0x345c7a(0xde)](_0x345c7a(0xea))):(_0x5c9992['textContent']=_0x345c7a(0xcd),_0x5c9992['disabled']=!![],_0x5c9992['style'][_0x345c7a(0xf2)]='0.7',_0x5c9992[_0x345c7a(0xd0)]['add'](_0x345c7a(0xdf)));return;}if(_0x547496===_0x357f2f){_0x5c9992[_0x345c7a(0xe9)]=_0x345c7a(0x10e),_0x5c9992[_0x345c7a(0xd0)][_0x345c7a(0xde)]('current-theme'),_0x5c9992['disabled']=!![],_0x5c9992[_0x345c7a(0xe3)]['cursor']='default';return;}if(userOwnsTheme(_0x547496)){_0x5c9992['textContent']='Apply\x20Theme',_0x5c9992[_0x345c7a(0xd0)]['add']('apply-theme');return;}if(userData[_0x345c7a(0xe5)]>=_0x233e5b[_0x345c7a(0x112)]){_0x5c9992[_0x345c7a(0xe9)]='Buy\x20for\x20'+_0x233e5b[_0x345c7a(0x112)]+'\x20Points',_0x5c9992['classList']['add']('can-afford');return;}_0x5c9992['textContent']=_0x345c7a(0xf3)+_0x233e5b['price']+'\x20Points',_0x5c9992['classList'][_0x345c7a(0xde)]('cannot-afford'),_0x5c9992['style']['opacity']='0.5',_0x5c9992[_0x345c7a(0xcf)]=!![],_0x5c9992['style']['cursor']='not-allowed';});}function showMessage(_0x153c76,_0x5d6c7e='info'){const _0x2b0aca=a50_0x39480c,_0x4e87b9=document['getElementById'](_0x2b0aca(0xc9));_0x4e87b9&&_0x4e87b9[_0x2b0aca(0xfc)]();const _0x38cfaf=document['createElement'](_0x2b0aca(0xff));_0x38cfaf['id']='store-message',_0x38cfaf['className']='store-message\x20store-message-'+_0x5d6c7e,_0x38cfaf['textContent']=_0x153c76,document[_0x2b0aca(0x10d)]['appendChild'](_0x38cfaf),requestAnimationFrame(()=>{const _0x34de6d=_0x2b0aca;_0x38cfaf[_0x34de6d(0xd0)]['add'](_0x34de6d(0xee));}),setTimeout(()=>{_0x38cfaf['classList']['remove']('visible'),setTimeout(()=>{const _0x476615=a50_0xb3f9;_0x38cfaf[_0x476615(0xda)]&&_0x38cfaf[_0x476615(0xfc)]();},0x12c);},0xfa0);}function a50_0xb3f9(_0x110633,_0x3fbae1){const _0x5a7e32=a50_0xa281();return a50_0xb3f9=function(_0x46d979,_0x13ab44){_0x46d979=_0x46d979-0xc9;let _0xa28160=_0x5a7e32[_0x46d979];return _0xa28160;},a50_0xb3f9(_0x110633,_0x3fbae1);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log'](a50_0x39480c(0xd9));