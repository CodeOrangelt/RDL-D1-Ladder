const a6_0x4d8c4d=a6_0x3882,a6_0x16ad25=(function(){let _0x1bc3fc=!![];return function(_0x1f4f73,_0x326d9a){const _0x36617c=_0x1bc3fc?function(){const _0x15c542=a6_0x3882;if(_0x326d9a){const _0x43bc60=_0x326d9a[_0x15c542(0x17b)](_0x1f4f73,arguments);return _0x326d9a=null,_0x43bc60;}}:function(){};return _0x1bc3fc=![],_0x36617c;};}()),a6_0x107d9f=a6_0x16ad25(this,function(){const _0x1c72c8=a6_0x3882;let _0x2be3f6;try{const _0x551c72=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2be3f6=_0x551c72();}catch(_0xa1e155){_0x2be3f6=window;}const _0x594044=_0x2be3f6['console']=_0x2be3f6['console']||{},_0x14a9b6=['log',_0x1c72c8(0x1eb),'info','error','exception','table','trace'];for(let _0x4847d7=0x0;_0x4847d7<_0x14a9b6[_0x1c72c8(0x174)];_0x4847d7++){const _0x574fa1=a6_0x16ad25[_0x1c72c8(0x18f)]['prototype']['bind'](a6_0x16ad25),_0x11ef34=_0x14a9b6[_0x4847d7],_0x54071b=_0x594044[_0x11ef34]||_0x574fa1;_0x574fa1['__proto__']=a6_0x16ad25['bind'](a6_0x16ad25),_0x574fa1['toString']=_0x54071b['toString']['bind'](_0x54071b),_0x594044[_0x11ef34]=_0x574fa1;}});a6_0x107d9f();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date('2025-07-02')['getTime']()}];function isUsernameMuted(_0x55deec,_0x38afba){const _0x59e21b=a6_0x3882;if(!_0x55deec)return![];const _0x432ad4=mutedUsers['find'](_0x1fef0a=>_0x1fef0a['username']===_0x55deec);if(!_0x432ad4)return![];if(!_0x38afba)return!![];const _0x26289b=_0x38afba instanceof Date?_0x38afba['getTime']():_0x38afba[_0x59e21b(0x155)]?_0x38afba['seconds']*0x3e8:Date['now']();return _0x26289b>=_0x432ad4['muteFromDate'];}function filterComment(_0x1ca551,_0x22ddce,_0x483a1d){if(!_0x1ca551)return'-';if(isUsernameMuted(_0x22ddce,_0x483a1d))return'Muted.';return _0x1ca551;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x5c5643,_0x2bf9d8,_0x3b4e90){const _0x5a3c05='u:'+(_0x3b4e90['filterUsername']||'');return'previewCache_'+_0x5c5643+'_p'+_0x2bf9d8+'_'+_0x5a3c05;}function getCachedPage(_0x36d9d4){const _0x10aeeb=a6_0x3882,_0x172cab=sessionStorage['getItem'](_0x36d9d4);if(_0x172cab)try{return JSON['parse'](_0x172cab);}catch(_0x2ab341){return console['error'](_0x10aeeb(0x1d8),_0x2ab341),sessionStorage['removeItem'](_0x36d9d4),null;}return null;}function cachePage(_0x5227e6,_0x41ff6e){try{sessionStorage['setItem'](_0x5227e6,JSON['stringify'](_0x41ff6e));}catch(_0x5cf192){console['error']('Failed\x20to\x20cache\x20data:',_0x5cf192);}}function getEloColor(_0x5f0a2f){const _0x347c99=a6_0x3882,_0x4ca812=Number(_0x5f0a2f);if(_0x4ca812>=0x7d0)return _0x347c99(0x19c);else{if(_0x4ca812>=0x708)return _0x347c99(0x197);else{if(_0x4ca812>=0x640)return'#b9f1fc';else{if(_0x4ca812>=0x578)return _0x347c99(0x1ad);else return'#808080';}}}}function formatDate(_0x4f5644,_0x535c14=![]){if(!_0x4f5644||!_0x4f5644['seconds'])return'N/A';const _0x5d3ef8=new Date(_0x4f5644['seconds']*0x3e8);return _0x535c14?_0x5d3ef8['toLocaleString']():_0x5d3ef8['toLocaleDateString']();}function truncateComment(_0x595b0a,_0x57ab3f=0x1e){const _0x5b9488=a6_0x3882;if(!_0x595b0a)return'-';if(_0x595b0a[_0x5b9488(0x174)]<=_0x57ab3f)return _0x595b0a;return _0x595b0a['substring'](0x0,_0x57ab3f)+'...';}function a6_0x3882(_0x50fdae,_0x197d26){const _0x107d9f=a6_0x26b0();return a6_0x3882=function(_0x16ad25,_0x868f73){_0x16ad25=_0x16ad25-0x13e;let _0x26b005=_0x107d9f[_0x16ad25];return _0x26b005;},a6_0x3882(_0x50fdae,_0x197d26);}function formatCommentDate(_0x1a1416){const _0x1cbc51=a6_0x3882;if(!_0x1a1416||!_0x1a1416[_0x1cbc51(0x155)])return'';const _0x57edb5=new Date(_0x1a1416['seconds']*0x3e8),_0x1c5289=new Date(),_0x4a93c5=Math['abs'](_0x1c5289-_0x57edb5),_0x22c56b=Math[_0x1cbc51(0x1e5)](_0x4a93c5/(0x3e8*0x3c*0x3c*0x18));if(_0x22c56b===0x0)return'Today';else{if(_0x22c56b===0x1)return'Yesterday';else return _0x22c56b<0x7?_0x22c56b+'\x20days\x20ago':_0x57edb5['toLocaleDateString']();}}function setLoadingIndicator(_0x52693c){const _0x476b74=a6_0x3882,_0xe7b34a=document[_0x476b74(0x16e)](_0x476b74(0x1dd));if(_0xe7b34a)_0xe7b34a['style']['display']=_0x52693c?'block':'none';}export function updatePreviewLadderModeUI(){const _0x198d23=a6_0x3882,_0x53e7d5=document[_0x198d23(0x16e)]('preview-ladder-mode'),_0x96405a=document[_0x198d23(0x16e)]('preview-d1-button'),_0xb1add8=document['getElementById']('preview-d2-button'),_0x12dc67=document[_0x198d23(0x16e)]('preview-d3-button');if(_0x53e7d5)_0x53e7d5['textContent']=previewState['currentMode'];if(_0x96405a)_0x96405a['classList']['toggle']('active',previewState['currentMode']==='D1');if(_0xb1add8)_0xb1add8['classList']['toggle']('active',previewState[_0x198d23(0x144)]==='D2');if(_0x12dc67)_0x12dc67[_0x198d23(0x1c2)]['toggle'](_0x198d23(0x1c3),previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x5b371e){const _0x5c0521=a6_0x3882,_0x360747=document['getElementById']('previewPrevPage'),_0x5b2663=document['getElementById']('previewNextPage'),_0x4a7817=document['getElementById']('previewPageInfo');if(!_0x360747||!_0x5b2663||!_0x4a7817)return;_0x4a7817['textContent']=_0x5c0521(0x18b)+previewState['currentPage'],_0x360747['disabled']=previewState[_0x5c0521(0x1b9)]<=0x1,_0x5b2663[_0x5c0521(0x157)]=!_0x5b371e;}function setPreviewLoadingState(_0x53c61a){const _0x4454e7=a6_0x3882;previewState[_0x4454e7(0x1a3)]=_0x53c61a,setLoadingIndicator(_0x53c61a);const _0x24f059=document['getElementById']('recent-matches-preview'),_0x17a5e9=_0x24f059?_0x24f059['querySelector']('.matches-loading'):null,_0x2c1097=document['getElementById'](_0x4454e7(0x165)),_0x16aea3=document[_0x4454e7(0x16e)](_0x4454e7(0x175)),_0x414708=document['getElementById']('preview-d1-button'),_0x2dd780=document['getElementById']('preview-d2-button'),_0x4cd483=document['getElementById']('applyFilterBtn'),_0x5bb50d=document['getElementById'](_0x4454e7(0x1d5));if(_0x17a5e9&&!_0x53c61a)_0x17a5e9['style'][_0x4454e7(0x1a4)]='none';else _0x17a5e9&&_0x53c61a&&(_0x17a5e9[_0x4454e7(0x1e8)]['display']='block');!_0x53c61a&&_0x24f059&&!_0x24f059['querySelector']('.match-card')&&!_0x24f059['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x24f059[_0x4454e7(0x1a7)]='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState['filterUsername']?_0x4454e7(0x1af):'')+'.</div>');if(_0x2c1097)_0x2c1097['disabled']=_0x53c61a||previewState['currentPage']<=0x1;if(_0x16aea3)_0x16aea3['disabled']=_0x53c61a;if(_0x414708)_0x414708[_0x4454e7(0x157)]=_0x53c61a;if(_0x2dd780)_0x2dd780[_0x4454e7(0x157)]=_0x53c61a;if(_0x4cd483)_0x4cd483['disabled']=_0x53c61a;if(_0x5bb50d)_0x5bb50d[_0x4454e7(0x157)]=_0x53c61a;}function applyClientFilters(_0x1e08c0){const _0x4fc319=a6_0x3882;if(!previewState['filterUsername'])return _0x1e08c0;const _0x56b11b=previewState[_0x4fc319(0x1b5)]['toLowerCase']();return _0x1e08c0['filter'](_0x1b5212=>{const _0x3d7012=_0x4fc319,_0x39e96c=(_0x1b5212['winnerUsername']||'')['toLowerCase'](),_0x1c4364=(_0x1b5212[_0x3d7012(0x1e2)]||'')['toLowerCase']();return _0x39e96c[_0x3d7012(0x193)](_0x56b11b)||_0x1c4364[_0x3d7012(0x193)](_0x56b11b);});}function applyEnhancedClientFilters(_0x30ce7d){const _0x23ae9c=a6_0x3882;if(!hasEnhancedFilters())return _0x30ce7d;return _0x30ce7d[_0x23ae9c(0x199)](_0x22badd=>{const _0x12d379=_0x23ae9c;if(previewState['enhancedFilters']['pilots']){const _0x2c7217=previewState[_0x12d379(0x172)]['pilots']['toLowerCase'](),_0x1ddc53=(_0x22badd['winnerUsername']||'')[_0x12d379(0x192)](),_0x293b5c=(_0x22badd['loserUsername']||'')[_0x12d379(0x192)]();if(!_0x1ddc53[_0x12d379(0x193)](_0x2c7217)&&!_0x293b5c[_0x12d379(0x193)](_0x2c7217))return![];}if(previewState[_0x12d379(0x172)]['levels']){const _0x206091=previewState[_0x12d379(0x172)][_0x12d379(0x1e0)]['toLowerCase'](),_0xe8a944=(_0x22badd[_0x12d379(0x14a)]||'')['toLowerCase']();if(!_0xe8a944['includes'](_0x206091))return![];}if(previewState[_0x12d379(0x172)][_0x12d379(0x1a2)]['length']>0x0){const _0x3d88b1=_0x22badd[_0x12d379(0x176)]||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames']['includes'](_0x3d88b1))return![];}return!![];});}function hasEnhancedFilters(){const _0x2416f3=a6_0x3882;return previewState['enhancedFilters']['pilots']||previewState['enhancedFilters']['levels']||previewState[_0x2416f3(0x172)]['subgames']['length']>0x0;}function clearEnhancedFilters(){const _0x1445fe=a6_0x3882;previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document['getElementById']('filter-pilots')['value']='',document['getElementById']('filter-levels')[_0x1445fe(0x13f)]='';const _0x55591d=document[_0x1445fe(0x16e)](_0x1445fe(0x1d6));for(let _0x554d9d of _0x55591d['options']){_0x554d9d['selected']=![];}}function jumpToPage(_0x15104c){const _0x380e96=a6_0x3882,_0xc56de4=document['getElementById']('jump-to-page'),_0x249f9b=previewState['currentPage'];let _0x1dc91d=_0x249f9b;switch(_0x15104c){case'start':_0x1dc91d=0x1;break;case'end':_0x1dc91d=Math['max'](_0x249f9b+0xa,previewState['totalPages']||_0x249f9b+0xa);break;case'+1':_0x1dc91d=_0x249f9b+0x1;break;case'+5':_0x1dc91d=_0x249f9b+0x5;break;case'+10':_0x1dc91d=_0x249f9b+0xa;break;case'-1':_0x1dc91d=Math[_0x380e96(0x1ac)](0x1,_0x249f9b-0x1);break;case'-5':_0x1dc91d=Math['max'](0x1,_0x249f9b-0x5);break;case _0x380e96(0x198):_0x1dc91d=Math['max'](0x1,_0x249f9b-0xa);break;case'input':const _0xc7a0fe=parseInt(_0xc56de4['value']);_0xc7a0fe&&_0xc7a0fe>0x0&&(_0x1dc91d=_0xc7a0fe,_0xc56de4['value']='');break;}_0x1dc91d!==_0x249f9b&&_0x1dc91d>0x0&&(previewState[_0x380e96(0x1b9)]=_0x1dc91d,loadRecentMatchesPreview('jump'));}function a6_0x26b0(){const _0x72ace3=['emerald','value','.player.winner\x20.player-suicides','current','Error\x20fetching\x20comments\x20batch:','next','currentMode','commentAddOverlay','demoWordCount','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?','closeAddCommentPopup','content','mapPlayed','block','.player.winner\x20.player-score','match-card-template','.match-display-wrapper','desc','title','commentPopupPreview','firstVisible','commentText','.match-map','seconds','displayName','disabled','none','userProfiles','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','setAttribute','addCommentForm','className','unranked','.match-subgame','.add-comment-btn','split','querySelector','weapon-imbalance','loserOldElo','previewPrevPage','flex','10px','winner-','insertBefore','appendChild','log','loserSuicides','Submit','getElementById','Please\x20enter\x20a\x20comment\x20before\x20submitting','.player.loser\x20.player-name','Standard\x20Match','enhancedFilters','filter-levels','length','previewNextPage','subgameType','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?','\x20matches:','.match-date','15px','apply','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>','Unknown','commentOverlayPreview','option','username','trim','.matches-loading[style*=\x22color:\x20red\x22]','recent-matches-preview','lastVisible','winnerSuicides','Submitting...','color','userId','You\x20must\x20be\x20signed\x20in\x20to\x20continue','default','Page\x20','matchComments','dataset','commentUser','constructor','div','Loser','toLowerCase','includes','Match\x20','matchesPerPage','popup-actions','#FFD700','-10','filter','commentPopupTitlePreview','createElement','#50C878','onclick','Unknown\x20Map','approvedMatchesD2','enhanced-filter-section','jump-to-page','subgames','isLoading','display','Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.','demoLink','innerHTML','Muted.','hasNextPage','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments','slice','max','#CD7F32','button','\x20matching\x20filters','auth','map','exists','forEach','Failed\x20to\x20fetch\x20username:','filterUsername','clear-enhanced-filters','0.6','uid','currentPage','push','add','removeAttribute','#d32f2f',',\x20fetching\x20from\x20Firestore','docs','.</div>','.popup-actions','classList','active','mega-match','center','parentNode','approvedMatches','required','Winner','.jump-btn','<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20','reportCommentButton','.option-tab.active','textContent','empty','Anonymous','error','Delete\x20demo','wordCount','Unable\x20to\x20submit\x20-\x20system\x20not\x20ready','clearFilterBtn','filter-subgames','<p>','Failed\x20to\x20parse\x20cache:','Error\x20fetching\x20comments:','addEventListener','querySelectorAll','timestamp','loading-indicator','text','.match-demo-links','levels','createdAt','loserUsername','cloneNode','winnerUsername','floor','click','Error\x20submitting\x20comment:','style','message','missiles-6plus','warn','.community-comments-section','matchId','Comments\x20section\x20not\x20found\x20in\x20template'];a6_0x26b0=function(){return _0x72ace3;};return a6_0x26b0();}export async function loadRecentMatchesPreview(_0x25c36f=a6_0x4d8c4d(0x141)){const _0x10f6c7=a6_0x4d8c4d,_0x516429=document['getElementById'](_0x10f6c7(0x183)),_0x11dcf6=document['getElementById']('match-card-template');if(previewState['isLoading']||!_0x516429||!_0x11dcf6)return;_0x25c36f===_0x10f6c7(0x141)&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)['forEach'](_0x2f67c6=>{const _0x25ba16=_0x10f6c7;_0x2f67c6[_0x25ba16(0x193)]('previewCache_'+previewState['currentMode'])&&sessionStorage['removeItem'](_0x2f67c6);}));let _0x36562d=previewState['currentPage'];if(_0x25c36f===_0x10f6c7(0x143))_0x36562d++;else{if(_0x25c36f==='prev')_0x36562d--;else _0x25c36f==='current'&&(_0x36562d=0x1,previewState[_0x10f6c7(0x152)]=null,previewState[_0x10f6c7(0x184)]=null);}if(_0x36562d<0x1)_0x36562d=0x1;const _0x352777=previewState[_0x10f6c7(0x1b9)];previewState['currentPage']=_0x36562d,updatePreviewPaginationControls(!![]);const _0x496e76={'filterUsername':previewState['filterUsername']},_0x169cc0=getCacheKey(previewState['currentMode'],_0x36562d,_0x496e76),_0x3d96e1=_0x25c36f!==_0x10f6c7(0x141)?getCachedPage(_0x169cc0):null;if(_0x3d96e1){console[_0x10f6c7(0x16b)]('Rendering\x20page\x20'+_0x36562d+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0x3d96e1['docsData']),updatePreviewPaginationControls(_0x3d96e1[_0x10f6c7(0x1a9)]),setPreviewLoadingState(![]);return;}console['log']('Cache\x20miss\x20for\x20page\x20'+_0x36562d+_0x10f6c7(0x1be)),setPreviewLoadingState(!![]),_0x516429['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x1fd9a0=previewState[_0x10f6c7(0x144)]==='D1'?_0x10f6c7(0x1c7):previewState['currentMode']==='D2'?_0x10f6c7(0x19f):'approvedMatchesD3',_0xca7341=previewState['currentMode']==='D1'?_0x10f6c7(0x1e1):'approvedAt';try{const _0x5031ed=collection(window['db'],_0x1fd9a0);let _0x1ee609=[orderBy(_0xca7341,_0x10f6c7(0x14f))];if(_0x36562d===0x1)console[_0x10f6c7(0x16b)]('Loading\x20first\x20page\x20from\x20Firestore'),_0x1ee609['push'](limit(previewState[_0x10f6c7(0x195)]));else{if(_0x25c36f==='next'&&previewState['lastVisible'])console['log']('Loading\x20next\x20page\x20using\x20cursor'),_0x1ee609['push'](startAfter(previewState['lastVisible'])),_0x1ee609[_0x10f6c7(0x1ba)](limit(previewState['matchesPerPage']));else{console[_0x10f6c7(0x16b)]('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x37da6e=_0x36562d*previewState[_0x10f6c7(0x195)];_0x1ee609[_0x10f6c7(0x1ba)](limit(_0x37da6e));}}const _0x561d92=query(_0x5031ed,..._0x1ee609),_0x55e845=await getDocs(_0x561d92);let _0x15a026=_0x55e845[_0x10f6c7(0x1bf)];if(_0x36562d>0x1&&_0x25c36f!==_0x10f6c7(0x143)){const _0x415c0e=(_0x36562d-0x1)*previewState[_0x10f6c7(0x195)];_0x15a026=_0x15a026['slice'](_0x415c0e,_0x415c0e+previewState['matchesPerPage']);}if(_0x15a026['length']===0x0){console[_0x10f6c7(0x16b)]('No\x20results\x20found\x20for\x20this\x20page');_0x25c36f==='next'&&(previewState['currentPage']=_0x352777,updatePreviewPaginationControls(![]));_0x516429[_0x10f6c7(0x1a7)]='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?'\x20matching\x20filters':'')+_0x10f6c7(0x1c0),setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x15a026[0x0],previewState[_0x10f6c7(0x184)]=_0x15a026[_0x15a026[_0x10f6c7(0x174)]-0x1];const _0x237fc7=_0x15a026['map'](_0x4d4543=>({'id':_0x4d4543['id'],..._0x4d4543['data']()}));let _0xf9fa9b=![];if(_0x15a026[_0x10f6c7(0x174)]===previewState['matchesPerPage']){const _0x912c37=query(_0x5031ed,orderBy(_0xca7341,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),_0x5a0cda=await getDocs(_0x912c37);_0xf9fa9b=!_0x5a0cda[_0x10f6c7(0x1cf)];}const _0xf9d979=applyClientFilters(_0x237fc7),_0xfebd5={'docsData':_0x237fc7,'hasNextPage':_0xf9fa9b};cachePage(getCacheKey(previewState['currentMode'],previewState['currentPage'],_0x496e76),_0xfebd5);if(_0x36562d>0x1&&_0x25c36f!=='next')for(let _0x5edd56=0x1;_0x5edd56<_0x36562d;_0x5edd56++){const _0x41db92=(_0x5edd56-0x1)*previewState[_0x10f6c7(0x195)],_0xd38d14=_0x41db92+previewState['matchesPerPage'],_0xfdf24=_0x55e845[_0x10f6c7(0x1bf)][_0x10f6c7(0x1ab)](_0x41db92,_0xd38d14);if(_0xfdf24[_0x10f6c7(0x174)]>0x0){const _0xa15bba=_0xfdf24[_0x10f6c7(0x1b1)](_0x3a0153=>({'id':_0x3a0153['id'],..._0x3a0153['data']()})),_0x4ab1f4=!![];cachePage(getCacheKey(previewState['currentMode'],_0x5edd56,_0x496e76),{'docsData':_0xa15bba,'hasNextPage':_0x4ab1f4}),console['log']('Cached\x20intermediary\x20page\x20'+_0x5edd56);}}_0xf9d979['length']===0x0&&previewState['filterUsername']?_0x516429['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState['filterUsername']+'\x22</div>':renderMatchCards(_0xf9d979),updatePreviewPaginationControls(_0xf9fa9b);}catch(_0x18f24d){console['error']('Error\x20fetching\x20'+previewState['currentMode']+_0x10f6c7(0x178),_0x18f24d),_0x516429['innerHTML']=_0x10f6c7(0x1cb)+_0x18f24d['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x352777;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x57aada){const _0x3d740e=a6_0x4d8c4d,_0x5388ed=document['getElementById'](_0x3d740e(0x183)),_0x24b743=document['getElementById'](_0x3d740e(0x14d));if(!_0x5388ed||!_0x24b743)return;!_0x5388ed[_0x3d740e(0x162)]('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x5388ed[_0x3d740e(0x1a7)]='');if(!_0x57aada||_0x57aada[_0x3d740e(0x174)]===0x0){if(!_0x5388ed['querySelector'](_0x3d740e(0x182))){const _0x1a0441=hasEnhancedFilters()?_0x3d740e(0x1af):previewState['filterUsername']?'\x20matching\x20filters':'';_0x5388ed['innerHTML']=_0x3d740e(0x15a)+_0x1a0441+_0x3d740e(0x1c0);}return;}const _0x2d7a4d=applyEnhancedClientFilters(_0x57aada);if(_0x2d7a4d['length']===0x0){_0x5388ed[_0x3d740e(0x1a7)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x59b695=_0x2d7a4d['map'](_0x4e7dfc=>getAllCommentsForMatch(_0x4e7dfc['id']));let _0x4cf05c=[];try{_0x4cf05c=await Promise['all'](_0x59b695);}catch(_0x319f96){console['error'](_0x3d740e(0x142),_0x319f96),_0x4cf05c=_0x2d7a4d['map'](()=>[]);}const _0x5dac25={};_0x4cf05c[_0x3d740e(0x1b3)]((_0x45cb50,_0x4a8c4f)=>{_0x5dac25[_0x2d7a4d[_0x4a8c4f]['id']]=_0x45cb50||[];}),_0x2d7a4d['forEach'](_0x9a01f7=>{const _0x1d1351=_0x3d740e,_0x459efb=_0x24b743[_0x1d1351(0x149)][_0x1d1351(0x1e3)](!![]),_0x184c7c=_0x459efb['querySelector'](_0x1d1351(0x14e)),_0x3a945c=_0x459efb['querySelector']('.match-card'),_0x21a4d9=getEloRankClass(_0x9a01f7['winnerOldElo']);_0x3a945c['classList']['add'](_0x1d1351(0x168)+_0x21a4d9),_0x3a945c['querySelector'](_0x1d1351(0x154))['textContent']=_0x9a01f7['mapPlayed']||_0x1d1351(0x19e),_0x3a945c['querySelector'](_0x1d1351(0x179))['textContent']=formatDate(_0x9a01f7['approvedAt']||_0x9a01f7['createdAt']);const _0x627c08=_0x3a945c[_0x1d1351(0x162)]('.player.winner\x20.player-name');_0x627c08['textContent']=_0x9a01f7[_0x1d1351(0x1e4)]||_0x1d1351(0x17d),_0x627c08['style'][_0x1d1351(0x187)]=getEloColor(_0x9a01f7['winnerOldElo']),_0x3a945c['querySelector'](_0x1d1351(0x14c))[_0x1d1351(0x1ce)]=_0x9a01f7['winnerScore']??0x0;const _0x364ccd=_0x3a945c[_0x1d1351(0x162)](_0x1d1351(0x140)),_0x40226f=_0x9a01f7[_0x1d1351(0x185)]||0x0;_0x364ccd['textContent']='S:\x20'+_0x40226f;const _0xd9dfa1=_0x3a945c['querySelector'](_0x1d1351(0x170));_0xd9dfa1['textContent']=_0x9a01f7['loserUsername']||'Unknown',_0xd9dfa1[_0x1d1351(0x1e8)]['color']=getEloColor(_0x9a01f7[_0x1d1351(0x164)]),_0x3a945c['querySelector']('.player.loser\x20.player-score')['textContent']=_0x9a01f7['loserScore']??0x0;const _0x3b54f6=_0x3a945c[_0x1d1351(0x162)]('.player.loser\x20.player-suicides'),_0x5b6900=_0x9a01f7[_0x1d1351(0x16c)]||0x0;_0x3b54f6['textContent']='S:\x20'+_0x5b6900;const _0x19743f=_0x3a945c[_0x1d1351(0x162)](_0x1d1351(0x15f));if(_0x19743f){if(_0x9a01f7[_0x1d1351(0x176)]&&_0x9a01f7['subgameType']['trim']()!==''){_0x19743f['textContent']=_0x9a01f7['subgameType'],_0x19743f['style']['display']='block';const _0x2a0ecd=getSubgameClass(_0x9a01f7[_0x1d1351(0x176)]);_0x2a0ecd&&_0x19743f['classList']['add'](_0x2a0ecd);}else _0x19743f[_0x1d1351(0x1ce)]=_0x1d1351(0x171),_0x19743f['style']['display']='block',_0x19743f['style']['opacity']=_0x1d1351(0x1b7);}const _0x363553=_0x3a945c['querySelector']('.comment.winner-comment'),_0x392509=_0x3a945c['querySelector']('.comment.loser-comment'),_0x417aa2=_0x9a01f7['winnerComment']||'',_0x552d61=_0x9a01f7['loserComment']||'',_0x2daed1=_0x9a01f7['approvedAt']||_0x9a01f7['createdAt'],_0x192e85=filterComment(_0x417aa2,_0x9a01f7[_0x1d1351(0x1e4)],_0x2daed1),_0x60e01c=filterComment(_0x552d61,_0x9a01f7['loserUsername'],_0x2daed1);_0x363553['textContent']='\x22'+truncateComment(_0x417aa2)+'\x22',_0x392509['textContent']='\x22'+truncateComment(_0x552d61)+'\x22';_0x417aa2&&!isUsernameMuted(_0x9a01f7['winnerUsername'],_0x2daed1)?_0x363553[_0x1d1351(0x19d)]=()=>showPreviewCommentPopup(_0x192e85,_0x9a01f7['winnerUsername']||_0x1d1351(0x1c9),getEloColor(_0x9a01f7['winnerOldElo'])):(_0x363553['textContent']=_0x192e85==='Muted.'?'Muted.':'-',_0x363553['style']['cursor']=_0x1d1351(0x18a),_0x363553[_0x1d1351(0x19d)]=null);_0x552d61&&!isUsernameMuted(_0x9a01f7[_0x1d1351(0x1e2)])?_0x392509[_0x1d1351(0x19d)]=()=>showPreviewCommentPopup(_0x60e01c,_0x9a01f7['loserUsername']||_0x1d1351(0x191),getEloColor(_0x9a01f7[_0x1d1351(0x164)])):(_0x392509['textContent']=_0x60e01c==='Muted.'?_0x1d1351(0x1a8):'-',_0x392509[_0x1d1351(0x1e8)]['cursor']='default',_0x392509['onclick']=null);const _0x260be7=_0x184c7c?.['querySelector'](_0x1d1351(0x1ec));if(!_0x260be7)console['warn'](_0x1d1351(0x1ee));else{const _0x4dfa40=_0x260be7[_0x1d1351(0x162)]('.comments-container'),_0x387f46=_0x4dfa40?.[_0x1d1351(0x162)]('.no-comments-message'),_0x3768e9=_0x260be7['querySelector'](_0x1d1351(0x160));if(_0x4dfa40){while(_0x4dfa40['firstChild']&&_0x4dfa40['firstChild']!==_0x387f46){_0x4dfa40['removeChild'](_0x4dfa40['firstChild']);}_0x3768e9&&_0x3768e9[_0x1d1351(0x1da)]('click',()=>{showAddCommentPopup(_0x9a01f7['id']);});const _0x1f8254=_0x5dac25[_0x9a01f7['id']]||[];if(_0x1f8254['length']>0x0){if(_0x387f46)_0x387f46['style']['display']='none';const _0x598852=(_0x3d7518,_0x201f6f)=>{const _0x2d370e=_0x1d1351,_0x1530f8=_0x3d7518[_0x2d370e(0x161)]('\x20');if(_0x1530f8['length']<=_0x201f6f)return _0x3d7518;return _0x1530f8['slice'](0x0,_0x201f6f)['join']('\x20')+'...';};_0x1f8254['forEach'](_0xd4ab0c=>{const _0x267f80=_0x1d1351,_0x35f702=document[_0x267f80(0x19b)]('div');if(_0xd4ab0c['type']==='demo'){_0x35f702['className']='demo-link',_0x35f702['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0xd4ab0c['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0xd4ab0c['username']+_0x267f80(0x17c)+(_0xd4ab0c['description']||'No\x20description\x20provided')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x3037f2=window[_0x267f80(0x1b0)]['currentUser'],_0x18cd41=_0x3037f2&&_0xd4ab0c['userId']===_0x3037f2['uid'];if(_0x18cd41){const _0x46439f=document[_0x267f80(0x19b)](_0x267f80(0x1ae));_0x46439f['className']='delete-comment-btn',_0x46439f[_0x267f80(0x1a7)]='×',_0x46439f[_0x267f80(0x15b)]('aria-label',_0x267f80(0x1d2)),_0x46439f[_0x267f80(0x1da)]('click',_0x5cf7f2=>{_0x5cf7f2['preventDefault'](),_0x5cf7f2['stopPropagation'](),deleteComment(_0xd4ab0c['id'],_0x35f702);}),_0x35f702[_0x267f80(0x16a)](_0x46439f);}}else{_0x35f702['className']='comment-item';const _0xc9fbd4=isUsernameMuted(_0xd4ab0c['username'],_0xd4ab0c['timestamp']),_0x4675c0=_0xc9fbd4?'Muted.':_0x598852(_0xd4ab0c['text']||'',0xf),_0x103e89=_0xd4ab0c[_0x267f80(0x180)]||_0x267f80(0x1d0),_0x42244f=window['auth']['currentUser'],_0x53392a=_0x42244f&&_0xd4ab0c[_0x267f80(0x188)]===_0x42244f[_0x267f80(0x1b8)];let _0x1cd546='';_0x53392a&&(_0x1cd546='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');_0x35f702[_0x267f80(0x1a7)]=_0x1cd546+'<strong>'+_0x103e89+':</strong>\x20\x22'+_0x4675c0+'\x22';if(_0x53392a){const _0x3cd84b=_0x35f702['querySelector']('.delete-comment-btn');_0x3cd84b&&_0x3cd84b['addEventListener']('click',_0x22c77b=>{_0x22c77b['stopPropagation'](),deleteComment(_0xd4ab0c['id'],_0x35f702);});}!_0xc9fbd4?_0x35f702['addEventListener'](_0x267f80(0x1e6),()=>{showFullCommentLightbox(_0xd4ab0c);}):_0x35f702[_0x267f80(0x1e8)]['cursor']=_0x267f80(0x18a);}_0x4dfa40[_0x267f80(0x169)](_0x35f702,_0x4dfa40['firstChild']);});}else{if(_0x387f46)_0x387f46['style']['display']='block';}}}const _0xed5d8d=_0x3a945c['querySelector'](_0x1d1351(0x1df));if(_0xed5d8d){const _0x1cce18=_0x3a945c[_0x1d1351(0x162)]('.winner-demo-link'),_0x50efa8=_0x3a945c['querySelector']('.loser-demo-link'),_0x5185e0=_0x9a01f7['winnerDemoLink']||null,_0xaf90d=_0x9a01f7['loserDemoLink']||_0x9a01f7['demoLink']||null;console['log'](_0x1d1351(0x194)+_0x9a01f7['id']+'\x20demo\x20links:',{'winner':_0x5185e0,'loser':_0xaf90d}),_0x1cce18&&(_0x5185e0?(_0x1cce18['href']=_0x5185e0,_0x1cce18['style']['display']='flex',_0x1cce18[_0x1d1351(0x150)]=_0x9a01f7[_0x1d1351(0x1e4)]+'\x27s\x20Demo'):_0x1cce18['style'][_0x1d1351(0x1a4)]=_0x1d1351(0x158)),_0x50efa8&&(_0xaf90d?(_0x50efa8['href']=_0xaf90d,_0x50efa8['style']['display']='flex',_0x50efa8['title']=_0x9a01f7['loserUsername']+'\x27s\x20Demo'):_0x50efa8[_0x1d1351(0x1e8)][_0x1d1351(0x1a4)]='none'),_0x5185e0&&_0x1cce18||_0xaf90d&&_0x50efa8?_0xed5d8d[_0x1d1351(0x1e8)][_0x1d1351(0x1a4)]=_0x1d1351(0x166):_0xed5d8d['style'][_0x1d1351(0x1a4)]='none';}_0x5388ed['appendChild'](_0x459efb);});}function getSubgameClass(_0x53ed1d){const _0x376d56=a6_0x4d8c4d,_0xb46318={'Fusion\x20Match':'fusion-match','≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':_0x376d56(0x1ea),'Weapon\x20Imbalance':_0x376d56(0x163),'Blind\x20Match':'blind-match','Rematch':'rematch','Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':'altered-powerups','Mega\x20Match':_0x376d56(0x1c4),'Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0xb46318[_0x53ed1d]||'';}async function deleteComment(_0x33a2b4,_0x14cac7){const _0x3dd29a=a6_0x4d8c4d,_0x3be7ca=window['auth']['currentUser'];if(!_0x3be7ca){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm(_0x3dd29a(0x177)))return;try{const _0x3789e6=doc(window['db'],'matchComments',_0x33a2b4),_0x110cc7=await getDoc(_0x3789e6);if(!_0x110cc7['exists']()){alert(_0x3dd29a(0x1a5));return;}const _0x125df1=_0x110cc7['data']();if(_0x125df1['userId']!==_0x3be7ca[_0x3dd29a(0x1b8)]){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x3789e6);if(_0x14cac7&&_0x14cac7[_0x3dd29a(0x1c6)]){_0x14cac7[_0x3dd29a(0x1c6)]['removeChild'](_0x14cac7);const _0x570c28=_0x14cac7['closest']('.comments-container');if(_0x570c28&&!_0x570c28[_0x3dd29a(0x162)]('.comment-item')){const _0x231ed6=_0x570c28[_0x3dd29a(0x162)]('.no-comments-message');if(_0x231ed6)_0x231ed6['style'][_0x3dd29a(0x1a4)]=_0x3dd29a(0x14b);}}console['log']('Comment\x20deleted\x20successfully');}catch(_0x124453){console['error']('Error\x20deleting\x20comment:',_0x124453),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x124453['message']);}}async function getAllCommentsForMatch(_0x421e81){const _0x2a061a=a6_0x4d8c4d;if(!_0x421e81)return[];try{const _0x89b9c0=collection(window['db'],'matchComments'),_0x38b6c3=query(_0x89b9c0,where(_0x2a061a(0x1ed),'==',_0x421e81),orderBy('timestamp','desc')),_0x59dce0=await getDocs(_0x38b6c3);if(_0x59dce0['empty'])return[];return _0x59dce0['docs']['map'](_0x51531f=>({'id':_0x51531f['id'],..._0x51531f['data']()}));}catch(_0x2cb0e2){return console[_0x2a061a(0x1d1)](_0x2a061a(0x1d9),_0x2cb0e2),[];}}async function submitComment(_0x46315d){const _0x1d414a=a6_0x4d8c4d;_0x46315d['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready');return;}const _0xc26f20=window['auth']['currentUser'];if(!_0xc26f20){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x1d57fc=document['getElementById']('commentMatchId')?.['value'],_0x552717=document['getElementById']('commentText')?.[_0x1d414a(0x13f)]?.['trim']();if(!_0x1d57fc||!_0x552717){alert(_0x1d414a(0x16f));return;}const _0x12906f=_0x552717[_0x1d414a(0x161)](/\s+/)['filter'](_0x12066c=>_0x12066c[_0x1d414a(0x174)]>0x0)['length'];if(_0x12906f>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.');return;}const _0x1618ca=document['querySelector']('.submit-comment-btn');_0x1618ca&&(_0x1618ca['disabled']=!![],_0x1618ca['textContent']=_0x1d414a(0x186));try{let _0x1b260e=_0x1d414a(0x1d0);try{const _0x1c743c=doc(window['db'],_0x1d414a(0x159),_0xc26f20[_0x1d414a(0x1b8)]),_0x44951a=await getDoc(_0x1c743c);if(_0x44951a[_0x1d414a(0x1b2)]()){const _0x22e408=_0x44951a['data']();_0x22e408[_0x1d414a(0x180)]&&(_0x1b260e=_0x22e408[_0x1d414a(0x180)]);}_0x1b260e==='Anonymous'&&_0xc26f20['displayName']&&(_0x1b260e=_0xc26f20['displayName']);}catch(_0x5e00d6){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x5e00d6),_0xc26f20['displayName']&&(_0x1b260e=_0xc26f20[_0x1d414a(0x156)]);}const _0x3b98b2={'matchId':_0x1d57fc,'userId':_0xc26f20[_0x1d414a(0x1b8)],'username':_0x1b260e,'text':_0x552717,'timestamp':serverTimestamp()};console[_0x1d414a(0x16b)]('Submitting\x20comment\x20as:',_0x1b260e);const _0x45a419=collection(window['db'],_0x1d414a(0x18c));await addDoc(_0x45a419,_0x3b98b2),console['log']('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x4dcc50){console['error'](_0x1d414a(0x1e7),_0x4dcc50),alert('Failed\x20to\x20add\x20comment:\x20'+_0x4dcc50[_0x1d414a(0x1e9)]),_0x1618ca&&(_0x1618ca[_0x1d414a(0x157)]=![],_0x1618ca['textContent']='Submit');}}function closeAddCommentPopup(){const _0x2db9ec=a6_0x4d8c4d,_0x235b2b=document['getElementById']('commentAddPopup'),_0xd2b31=document['getElementById'](_0x2db9ec(0x145));if(_0x235b2b)_0x235b2b[_0x2db9ec(0x1e8)]['display']='none';if(_0xd2b31)_0xd2b31['style']['display']='none';}function showAddCommentPopup(_0x572602){const _0x9a5a8=a6_0x4d8c4d,_0x51fd8f=window[_0x9a5a8(0x1b0)]['currentUser'];if(!_0x51fd8f){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo');return;}let _0x42d5a6=document[_0x9a5a8(0x16e)]('commentAddPopup'),_0x36aad0=document['getElementById']('commentAddOverlay');!_0x42d5a6&&(_0x42d5a6=document['createElement']('div'),_0x42d5a6['id']='commentAddPopup',_0x42d5a6['className']='comment-popup',document['body']['appendChild'](_0x42d5a6));!_0x36aad0&&(_0x36aad0=document['createElement'](_0x9a5a8(0x190)),_0x36aad0['id']='commentAddOverlay',_0x36aad0[_0x9a5a8(0x15d)]='comment-overlay',document['body'][_0x9a5a8(0x16a)](_0x36aad0));_0x42d5a6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x572602+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x42d5a6[_0x9a5a8(0x1e8)]['display']='block',_0x36aad0['style']['display']=_0x9a5a8(0x14b),document['getElementById']('closeAddCommentPopup')['addEventListener']('click',closeAddCommentPopup),_0x36aad0['addEventListener']('click',closeAddCommentPopup);const _0x16591e=_0x42d5a6['querySelectorAll']('.option-tab');_0x16591e['forEach'](_0x42c328=>{_0x42c328['addEventListener']('click',function(){const _0x16101a=a6_0x3882;_0x16591e[_0x16101a(0x1b3)](_0x3b9178=>_0x3b9178['classList']['remove']('active')),document['querySelectorAll']('.option-content')['forEach'](_0x13418b=>_0x13418b['style']['display']='none'),this[_0x16101a(0x1c2)][_0x16101a(0x1bb)](_0x16101a(0x1c3));const _0x3972a8=this['dataset']['option'];document['getElementById'](_0x3972a8+'Option')[_0x16101a(0x1e8)]['display']=_0x16101a(0x14b),_0x3972a8==='demo'?(document[_0x16101a(0x16e)]('demoLink')['setAttribute']('required',''),document['getElementById']('commentText')[_0x16101a(0x1bc)](_0x16101a(0x1c8))):(document['getElementById']('demoLink')['removeAttribute'](_0x16101a(0x1c8)),document['getElementById'](_0x16101a(0x153))['setAttribute']('required',''));});}),document['getElementById'](_0x9a5a8(0x153))['setAttribute'](_0x9a5a8(0x1c8),''),document[_0x9a5a8(0x16e)](_0x9a5a8(0x1a6))['removeAttribute']('required'),setupWordCounter('commentText','wordCount',0xf),setupWordCounter('demoDescription',_0x9a5a8(0x146),0x14),document['getElementById']('addCommentForm')['addEventListener']('submit',submitCommentOrDemo);}function setupWordCounter(_0x1a71e8,_0x372296,_0x18fdbf){const _0x165626=a6_0x4d8c4d,_0x392174=document[_0x165626(0x16e)](_0x1a71e8),_0x3d06be=document['getElementById'](_0x372296);if(!_0x392174||!_0x3d06be)return;_0x3dcdbf(),_0x392174['addEventListener']('input',_0x3dcdbf);function _0x3dcdbf(){const _0x149cbc=_0x165626,_0xce0d28=_0x392174['value']['trim'](),_0x449470=_0xce0d28?_0xce0d28['split'](/\s+/)['filter'](_0x492172=>_0x492172['length']>0x0)[_0x149cbc(0x174)]:0x0;_0x3d06be[_0x149cbc(0x1ce)]=_0x449470,_0x449470>_0x18fdbf?_0x3d06be[_0x149cbc(0x1e8)][_0x149cbc(0x187)]='#ff4444':_0x3d06be['style']['color']='#aaa';}}async function submitCommentOrDemo(_0x33e814){const _0x4a8707=a6_0x4d8c4d;_0x33e814['preventDefault']();if(!window[_0x4a8707(0x1b0)]||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert(_0x4a8707(0x1d4));return;}const _0x4d4cd5=window[_0x4a8707(0x1b0)]['currentUser'];if(!_0x4d4cd5){alert(_0x4a8707(0x189));return;}const _0x3b5c43=document[_0x4a8707(0x16e)]('commentMatchId')['value'],_0x5b73f2=document['querySelector'](_0x4a8707(0x1cd))['dataset'][_0x4a8707(0x17f)];let _0x5ad092=_0x4a8707(0x1d0);try{const _0x486fd3=doc(window['db'],'userProfiles',_0x4d4cd5['uid']),_0x56f078=await getDoc(_0x486fd3);if(_0x56f078['exists']()){const _0x5f0254=_0x56f078['data']();_0x5f0254['username']&&(_0x5ad092=_0x5f0254['username']);}_0x5ad092===_0x4a8707(0x1d0)&&_0x4d4cd5['displayName']&&(_0x5ad092=_0x4d4cd5['displayName']);}catch(_0xc858f0){console['warn'](_0x4a8707(0x1b4),_0xc858f0),_0x4d4cd5['displayName']&&(_0x5ad092=_0x4d4cd5[_0x4a8707(0x156)]);}const _0x321842=document['querySelector']('.submit-comment-btn');_0x321842&&(_0x321842[_0x4a8707(0x157)]=!![],_0x321842['textContent']='Submitting...');try{if(_0x5b73f2==='comment'){const _0x58edaf=document[_0x4a8707(0x16e)]('commentText')['value']['trim']();if(!_0x58edaf){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x321842['disabled']=![],_0x321842[_0x4a8707(0x1ce)]='Submit';return;}const _0x220b16=_0x58edaf['split'](/\s+/)[_0x4a8707(0x199)](_0x5761b9=>_0x5761b9['length']>0x0)['length'];if(_0x220b16>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.'),_0x321842['disabled']=![],_0x321842['textContent']='Submit';return;}const _0x128bed={'matchId':_0x3b5c43,'userId':_0x4d4cd5['uid'],'username':_0x5ad092,'text':_0x58edaf,'type':'comment','timestamp':serverTimestamp()},_0x45d9ec=collection(window['db'],'matchComments');await addDoc(_0x45d9ec,_0x128bed);}else{const _0x12d60c=document['getElementById']('demoLink')[_0x4a8707(0x13f)][_0x4a8707(0x181)](),_0x34f0d2=document['getElementById']('demoDescription')['value']['trim']()||'Demo\x20link';if(!_0x12d60c){alert('Please\x20enter\x20a\x20demo\x20link'),_0x321842[_0x4a8707(0x157)]=![],_0x321842['textContent']='Submit';return;}try{new URL(_0x12d60c);}catch(_0x5dc791){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x321842[_0x4a8707(0x157)]=![],_0x321842['textContent']=_0x4a8707(0x16d);return;}const _0xee659e=_0x34f0d2['split'](/\s+/)['filter'](_0x1824bb=>_0x1824bb['length']>0x0)[_0x4a8707(0x174)];if(_0xee659e>0x14){alert('Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.'),_0x321842['disabled']=![],_0x321842['textContent']=_0x4a8707(0x16d);return;}const _0x203791={'matchId':_0x3b5c43,'userId':_0x4d4cd5[_0x4a8707(0x1b8)],'username':_0x5ad092,'demoLink':_0x12d60c,'description':_0x34f0d2,'type':'demo','text':'Demo:\x20'+_0x34f0d2,'timestamp':serverTimestamp()},_0x578ccb=collection(window['db'],'matchComments');await addDoc(_0x578ccb,_0x203791);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x4b7e35){console['error']('Error\x20submitting:',_0x4b7e35),alert('Failed\x20to\x20submit:\x20'+_0x4b7e35['message']),_0x321842&&(_0x321842[_0x4a8707(0x157)]=![],_0x321842[_0x4a8707(0x1ce)]=_0x4a8707(0x16d));}}function getEloRankClass(_0x5839b4){const _0x540257=a6_0x4d8c4d,_0x211f59=Number(_0x5839b4);if(_0x211f59>=0x7d0)return _0x540257(0x13e);else{if(_0x211f59>=0x708)return'gold';else{if(_0x211f59>=0x640)return'silver';else{if(_0x211f59>=0x578)return'bronze';else return _0x540257(0x15e);}}}}function showPreviewCommentPopup(_0x46d295,_0x3f4658,_0x28cb05='#fff'){const _0x32ac6a=a6_0x4d8c4d,_0x2222fc=document['getElementById']('commentPopupPreview'),_0x367e6b=document['getElementById'](_0x32ac6a(0x17e)),_0x76b646=document['getElementById'](_0x32ac6a(0x19a)),_0x4b343c=document['getElementById']('commentPopupContentPreview'),_0x42904b=document['getElementById'](_0x32ac6a(0x1cc));if(!_0x2222fc||!_0x367e6b||!_0x76b646||!_0x4b343c||!_0x42904b)return;_0x2222fc['dataset']['commentText']=_0x46d295,_0x2222fc['dataset'][_0x32ac6a(0x18e)]=_0x3f4658,_0x76b646['style']['color']=_0x28cb05,_0x76b646['textContent']='Comment\x20from\x20'+_0x3f4658,_0x4b343c['textContent']=_0x46d295,_0x42904b['onclick']=reportComment,_0x2222fc['style']['display']='block',_0x367e6b['style']['display']='block';}function closePreviewCommentPopup(){const _0x21f849=a6_0x4d8c4d,_0x3223c9=document['getElementById']('commentPopupPreview'),_0x569811=document['getElementById']('commentOverlayPreview');if(_0x3223c9)_0x3223c9['style']['display']=_0x21f849(0x158);if(_0x569811)_0x569811['style']['display']='none';}async function reportComment(){const _0x2f2d44=a6_0x4d8c4d,_0xa151f1=window['auth']['currentUser'];if(!_0xa151f1){alert(_0x2f2d44(0x1aa));return;}if(!confirm(_0x2f2d44(0x147)))return;try{const _0x1e6596=document[_0x2f2d44(0x16e)]('commentPopupPreview'),_0x2eaaae={'commentAuthor':_0x1e6596[_0x2f2d44(0x18d)]['commentUser']||'Unknown\x20User','commentText':_0x1e6596[_0x2f2d44(0x18d)]['commentText']||'','matchId':previewState['currentMatchId']||'','reportedBy':_0xa151f1['uid'],'reporterUsername':_0xa151f1['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},_0x51520d=collection(window['db'],'badComments');await addDoc(_0x51520d,_0x2eaaae),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x591de9){console[_0x2f2d44(0x1d1)]('Error\x20reporting\x20comment:',_0x591de9),alert('Failed\x20to\x20report\x20comment:\x20'+_0x591de9['message']);}}function showFullCommentLightbox(_0x2a9bb3){const _0x4a06d8=a6_0x4d8c4d;if(isUsernameMuted(_0x2a9bb3['username']))return;const _0x244c27=document['getElementById'](_0x4a06d8(0x151)),_0x1633d5=document['getElementById']('commentOverlayPreview'),_0x31282e=document[_0x4a06d8(0x16e)](_0x4a06d8(0x19a)),_0x5e6557=document['getElementById']('commentPopupContentPreview');if(!_0x244c27||!_0x1633d5||!_0x31282e||!_0x5e6557)return;_0x31282e[_0x4a06d8(0x1e8)][_0x4a06d8(0x187)]='#fff',_0x31282e['textContent']='Comment\x20from\x20'+_0x2a9bb3[_0x4a06d8(0x180)];if(_0x2a9bb3['timestamp']){const _0x7f6af1=new Date(_0x2a9bb3[_0x4a06d8(0x1dc)]['seconds']*0x3e8),_0x42055e=_0x7f6af1['toLocaleString']();_0x5e6557['innerHTML']=_0x4a06d8(0x1d7)+_0x2a9bb3[_0x4a06d8(0x1de)]+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x42055e+'</small>';}else _0x5e6557['textContent']=_0x2a9bb3[_0x4a06d8(0x1de)];_0x244c27['dataset']['commentId']=_0x2a9bb3['id']||'',_0x244c27['dataset']['commentUser']=_0x2a9bb3['username']||'',_0x244c27['dataset']['commentText']=_0x2a9bb3['text']||'',_0x244c27['dataset']['matchId']=_0x2a9bb3['matchId']||'';const _0x1a3c14=_0x244c27[_0x4a06d8(0x162)]('.popup-actions')||document['createElement']('div');!_0x244c27['querySelector'](_0x4a06d8(0x1c1))?(_0x1a3c14['className']=_0x4a06d8(0x196),_0x1a3c14['style'][_0x4a06d8(0x1a4)]=_0x4a06d8(0x166),_0x1a3c14['style']['justifyContent']=_0x4a06d8(0x1c5),_0x1a3c14['style']['gap']=_0x4a06d8(0x167),_0x1a3c14['style']['marginTop']=_0x4a06d8(0x17a),_0x244c27['appendChild'](_0x1a3c14)):_0x1a3c14[_0x4a06d8(0x1a7)]='';const _0x30768d=document['createElement']('button');_0x30768d[_0x4a06d8(0x1ce)]='Close',_0x30768d[_0x4a06d8(0x15d)]='popup-btn\x20close-btn',_0x30768d['id']='closeCommentPopupPreview',_0x30768d[_0x4a06d8(0x1da)]('click',closePreviewCommentPopup);const _0x5a4c93=document['createElement']('button');_0x5a4c93['textContent']='Report',_0x5a4c93['className']='popup-btn\x20report-btn',_0x5a4c93[_0x4a06d8(0x1e8)]['backgroundColor']=_0x4a06d8(0x1bd),_0x5a4c93[_0x4a06d8(0x1da)](_0x4a06d8(0x1e6),reportComment),_0x1a3c14['appendChild'](_0x30768d),_0x1a3c14[_0x4a06d8(0x16a)](_0x5a4c93),_0x244c27['style']['display']='block',_0x1633d5['style']['display']=_0x4a06d8(0x14b);}export function setupPreviewEventListeners(){const _0x38bed6=a6_0x4d8c4d,_0x14db1e=document['getElementById'](_0x38bed6(0x165)),_0x391126=document['getElementById']('previewNextPage'),_0x170cde=document['getElementById']('preview-d1-button'),_0x1b8b6d=document[_0x38bed6(0x16e)]('preview-d2-button'),_0x442ee2=document['getElementById']('preview-d3-button'),_0x1bd561=document['getElementById']('filter-toggle-button'),_0x199bd2=document['getElementById'](_0x38bed6(0x1a0));if(!_0x14db1e||!_0x391126||!_0x170cde||!_0x1b8b6d||!_0x442ee2||!_0x1bd561||!_0x199bd2){console['warn']('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}_0x14db1e['addEventListener']('click',()=>{if(!_0x14db1e['disabled'])loadRecentMatchesPreview('prev');}),_0x391126['addEventListener']('click',()=>{if(!_0x391126['disabled'])loadRecentMatchesPreview('next');}),_0x170cde['addEventListener']('click',()=>{previewState['currentMode']!=='D1'&&!previewState['isLoading']&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x1b8b6d[_0x38bed6(0x1da)]('click',()=>{const _0x3c8b5a=_0x38bed6;previewState[_0x3c8b5a(0x144)]!=='D2'&&!previewState['isLoading']&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x3c8b5a(0x141)));}),_0x442ee2['addEventListener'](_0x38bed6(0x1e6),()=>{const _0x1afe9d=_0x38bed6;previewState['currentMode']!=='D3'&&!previewState[_0x1afe9d(0x1a3)]&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x1afe9d(0x141)));});_0x1bd561&&_0x199bd2&&_0x1bd561[_0x38bed6(0x1da)]('click',()=>{const _0x551f15=_0x38bed6,_0x3417c9=_0x199bd2[_0x551f15(0x1e8)][_0x551f15(0x1a4)]!=='none';_0x199bd2['style']['display']=_0x3417c9?_0x551f15(0x158):'block',_0x1bd561[_0x551f15(0x1c2)]['toggle'](_0x551f15(0x1c3),!_0x3417c9);});const _0xda100a=document[_0x38bed6(0x16e)]('apply-enhanced-filters'),_0x3d2a91=document['getElementById'](_0x38bed6(0x1b6));_0xda100a&&_0xda100a[_0x38bed6(0x1da)](_0x38bed6(0x1e6),()=>{const _0x10edb9=_0x38bed6;previewState[_0x10edb9(0x172)]['pilots']=document['getElementById']('filter-pilots')['value']['trim'](),previewState['enhancedFilters'][_0x10edb9(0x1e0)]=document['getElementById'](_0x10edb9(0x173))['value']['trim']();const _0x6d6b7f=document[_0x10edb9(0x16e)](_0x10edb9(0x1d6));previewState['enhancedFilters']['subgames']=Array['from'](_0x6d6b7f['selectedOptions'])['map'](_0x7633d3=>_0x7633d3['value'])['filter'](_0x4e6c4d=>_0x4e6c4d!==''),loadRecentMatchesPreview('current');});_0x3d2a91&&_0x3d2a91['addEventListener'](_0x38bed6(0x1e6),()=>{const _0x287bf8=_0x38bed6;clearEnhancedFilters(),loadRecentMatchesPreview(_0x287bf8(0x141));});document[_0x38bed6(0x1db)](_0x38bed6(0x1ca))['forEach'](_0x251223=>{const _0x17bffd=_0x38bed6;_0x251223['addEventListener'](_0x17bffd(0x1e6),()=>{const _0xc39304=_0x17bffd,_0x4cdd3e=_0x251223[_0xc39304(0x18d)]['jump'];jumpToPage(_0x4cdd3e);});});const _0x4d608d=document[_0x38bed6(0x16e)](_0x38bed6(0x1a1));_0x4d608d&&_0x4d608d[_0x38bed6(0x1da)]('keypress',_0x1d6a7c=>{_0x1d6a7c['key']==='Enter'&&jumpToPage('input');});const _0x2e0dc8=document['getElementById']('closeCommentPopupPreview'),_0x4f5521=document[_0x38bed6(0x16e)]('commentOverlayPreview');if(_0x2e0dc8)_0x2e0dc8['addEventListener'](_0x38bed6(0x1e6),closePreviewCommentPopup);if(_0x4f5521)_0x4f5521[_0x38bed6(0x1da)]('click',closePreviewCommentPopup);const _0x3abaa3=document['getElementById'](_0x38bed6(0x148)),_0x4ac961=document[_0x38bed6(0x16e)]('commentAddOverlay'),_0x36213e=document['getElementById'](_0x38bed6(0x15c));if(_0x3abaa3)_0x3abaa3[_0x38bed6(0x1da)]('click',closeAddCommentPopup);if(_0x4ac961)_0x4ac961['addEventListener']('click',closeAddCommentPopup);if(_0x36213e)_0x36213e['addEventListener']('submit',submitComment);const _0x57a45e=document['getElementById']('commentText'),_0x1345ed=document['getElementById']('wordCount');_0x57a45e&&_0x1345ed&&setupWordCounter('commentText',_0x38bed6(0x1d3),0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window['submitComment']=submitComment;