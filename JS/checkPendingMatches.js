(function(a,b){const l=a10d,c=a();while(!![]){try{const d=-parseInt(l(0x19a))/0x1+-parseInt(l(0x185))/0x2*(parseInt(l(0x197))/0x3)+-parseInt(l(0x19c))/0x4*(parseInt(l(0x176))/0x5)+parseInt(l(0x196))/0x6+-parseInt(l(0x184))/0x7+parseInt(l(0x194))/0x8+parseInt(l(0x195))/0x9;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a10c,0x72dcf));const a10b=(function(){let a=!![];return function(b,c){const d=a?function(){const m=a10d;if(c){const e=c[m(0x1a7)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a10a=a10b(this,function(){const n=a10d;let a;try{const d=Function(n(0x18d)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');a=d();}catch(f){a=window;}const b=a['console']=a[n(0x187)]||{},c=[n(0x1a5),n(0x1aa),n(0x1ad),n(0x1af),n(0x1a4),n(0x199),'trace'];for(let g=0x0;g<c['length'];g++){const h=a10b['constructor'][n(0x177)][n(0x191)](a10b),i=c[g],j=b[i]||h;h['__proto__']=a10b[n(0x191)](a10b),h['toString']=j['toString'][n(0x191)](j),b[i]=h;}});a10a();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;function a10c(){const x=['CMvTB3zLsxrLBq','yxbWBhK','D2LUBMvYrw1HAwW','i2zMm2iZma','D2fYBG','yM9YzgvYuMfKAxvZ','y3vYCMvUDfvZzxi','Aw5MBW','yM9KEq','zxjYB3i','ywXS','CgvUzgLUz01HDgnOzxnemG','CgvUzgLUz01HDgnOzxm','mJvtsgrfvfm','ChjVDg90ExbL','D2LKDgG','rxjYB3iGy2HLy2TPBMCGCgvUzgLUzYbTyxrJAgvZoG','y3vYCMvUDfvZzxjUyw1L','BM9Uzq','mNb4ihnVBgLKihDOAxrL','z2v0sxrLBq','zw1HAwW','AgvPz2H0','CgXHEwvYC0qY','zg9JCW','Cg9ZAxrPB24','C3r5Bgu','ntq0odu5n0jlAxvpsW','mLP0u0rqsW','ntaL','y29UC29Szq','zgLZy29UBMvJDa','ltHWEa','yM9YzgvY','z2v0rwXLBwvUDej5swq','ltvWEa','CMv0DxjUicHMDw5JDgLVBIGPia','CMvWB3j0lw1HDgnOlw5VDgLMAwnHDgLVBG','zw1WDhK','DxnLCKLK','yMLUza','DwLK','DxnLCM5HBwu','nty3nJKYme9xBxrsuW','nZyXmZiWogjtCuDxtG','ndC1mty5nfLJr1LLtG','ndG3mdGZDLf2DNnH','CgXHEwvYC0qZ','DgfIBgu','oty3mtbQt1vKBvy','yxbWCM92zwq','nJCXnJq0BKPkChzt','D2LUBMvYvxnLCM5HBwu','C2v0sxrLBq','yMXVy2S','zgf0yq','EKLUzgv4','BM93','CgvUzgLUz01HDgnOzxnemW','zxHJzxb0Aw9U','Bg9N'];a10c=function(){return x;};return a10c();}export async function checkPendingMatches(a=![]){const o=a10d,b=Date[o(0x1a2)](),c=checkNotificationCache();if(c!==null&&!a){updateNotificationDot(c);if(b-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=b;const d=auth[o(0x1ac)];if(!d){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [e,f,g]=await Promise[o(0x1b0)]([checkForPendingMatchesInCollection(d,o(0x1b2)),checkForPendingMatchesInCollection(d,o(0x1b1)),checkForPendingMatchesInCollection(d,o(0x1a3))]),h=e||f||g;updateNotificationDot(h),updateNotificationCache(h);}catch(i){console['error'](o(0x179),i);}}async function checkForPendingMatchesInCollection(a,b){const p=a10d,c=a['uid'],d=a['email'],e=query(collection(db,b),where('winnerId','==',c),where('approved','==',![])),f=await getDocs(e);if(!f['empty'])return!![];if(d){const h=query(collection(db,b),where(p(0x1a8),'==',d),where(p(0x19b),'==',![])),i=await getDocs(h);if(!i['empty'])return!![];}let g=await getUsernameFromAllSources(a);if(g){const j=query(collection(db,b),where(p(0x19d),'==',g),where('approved','==',![])),k=await getDocs(j);if(!k['empty'])return!![];}return![];}async function getUsernameFromAllSources(a){const q=a10d,b=localStorage[q(0x17d)](q(0x17a));if(b)return b;try{const [c,d,e]=await Promise['all']([getDocs(query(collection(db,'players'),where(q(0x190),'==',a[q(0x192)]))),getDocs(query(collection(db,q(0x180)),where(q(0x190),'==',a[q(0x192)]))),getDocs(query(collection(db,q(0x198)),where(q(0x190),'==',a['uid'])))]);if(!c['empty']){const g=c['docs'][0x0]['data']()[q(0x193)];return localStorage['setItem'](q(0x17a),g),g;}if(!d[q(0x18f)]){const h=d['docs'][0x0]['data']()[q(0x193)];return localStorage[q(0x19e)](q(0x17a),h),h;}if(!e[q(0x18f)]){const i=e[q(0x181)][0x0]['data']()['username'];return localStorage[q(0x19e)](q(0x17a),i),i;}const f=await getDoc(doc(db,'users',a['uid']));if(f['exists']()&&f[q(0x1a0)]()['username']){const j=f['data']()[q(0x193)];return localStorage['setItem']('currentUsername',j),j;}}catch(k){console[q(0x1af)]('Error\x20fetching\x20username:',k);}if(a['email'])return a[q(0x17e)]['split']('@')[0x0];return null;}function updateNotificationCache(a){const r=a10d,b={'status':a,'timestamp':Date[r(0x1a2)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](b));}function checkNotificationCache(){const s=a10d,a=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!a)return null;try{const {status:b,timestamp:c}=JSON['parse'](a),d=Date[s(0x1a2)]();if(d-c<CACHE_EXPIRY)return b;}catch(f){}return null;}export function updateNotificationDot(a){const u=a10d,b=new MutationObserver((d,e)=>{const t=a10d,f=document['getElementById'](t(0x18e));f&&(updateDotStyle(f,a),e[t(0x188)]());});b['observe'](document[u(0x1ae)],{'childList':!![],'subtree':!![]});const c=document[u(0x18b)]('report-match-notification');c&&(updateDotStyle(c,a),b[u(0x188)]()),setTimeout(()=>b[u(0x188)](),0x1388);}function a10d(a,b){const c=a10c();return a10d=function(d,e){d=d-0x176;let f=c[d];if(a10d['vPNLsT']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a10d['NwocuA']=g,a=arguments,a10d['vPNLsT']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a10d['NwocuA'](f),a[i]=f):f=j,f;},a10d(a,b);}function updateDotStyle(a,b){const v=a10d;b?(a[v(0x183)]['display']=v(0x19f),a[v(0x183)]['backgroundColor']=v(0x1a9),a[v(0x183)][v(0x178)]='10px',a['style'][v(0x17f)]='10px',a[v(0x183)][v(0x182)]='absolute',a['style']['top']=v(0x18c),a['style']['right']=v(0x189),a[v(0x183)][v(0x1ab)]=v(0x186),a[v(0x183)][v(0x18a)]=v(0x17c),a[v(0x183)][v(0x1a1)]='999'):a['style']['display']=v(0x17b);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const w=a10d;localStorage[w(0x1a6)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});