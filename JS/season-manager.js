const a55_0x837a43=(function(){let _0x47d5bd=!![];return function(_0x1aaa22,_0x2c0b2d){const _0x13303d=_0x47d5bd?function(){const _0x2940d8=a55_0x3848;if(_0x2c0b2d){const _0x2f290c=_0x2c0b2d[_0x2940d8(0xb7)](_0x1aaa22,arguments);return _0x2c0b2d=null,_0x2f290c;}}:function(){};return _0x47d5bd=![],_0x13303d;};}()),a55_0x571967=a55_0x837a43(this,function(){const _0x1c2772=a55_0x3848;let _0x55bb60;try{const _0x1075ff=Function(_0x1c2772(0xc1)+_0x1c2772(0xbe)+');');_0x55bb60=_0x1075ff();}catch(_0xb3d02f){_0x55bb60=window;}const _0x2bd6f0=_0x55bb60['console']=_0x55bb60['console']||{},_0x4ec987=[_0x1c2772(0xc3),'warn',_0x1c2772(0xc0),'error',_0x1c2772(0xb5),_0x1c2772(0xcb),_0x1c2772(0xb4)];for(let _0x223c80=0x0;_0x223c80<_0x4ec987[_0x1c2772(0xbb)];_0x223c80++){const _0x2d41ab=a55_0x837a43['constructor'][_0x1c2772(0xbf)]['bind'](a55_0x837a43),_0x1a35d9=_0x4ec987[_0x223c80],_0x3272ed=_0x2bd6f0[_0x1a35d9]||_0x2d41ab;_0x2d41ab['__proto__']=a55_0x837a43['bind'](a55_0x837a43),_0x2d41ab['toString']=_0x3272ed['toString']['bind'](_0x3272ed),_0x2bd6f0[_0x1a35d9]=_0x2d41ab;}});a55_0x571967();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a55_0x3848(_0x24d2b7,_0x3cd645){const _0x571967=a55_0x5364();return a55_0x3848=function(_0x837a43,_0x1e8e5b){_0x837a43=_0x837a43-0xb3;let _0x5364bf=_0x571967[_0x837a43];return _0x5364bf;},a55_0x3848(_0x24d2b7,_0x3cd645);}import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){this['setupEventListeners']();}['setupEventListeners'](){const _0x5c702d=a55_0x3848,_0x255841=document['getElementById']('reset-season'),_0x3410db=document[_0x5c702d(0xc2)]('confirm-reset'),_0x545168=document['getElementById']('cancel-reset');_0x255841?.['addEventListener']('click',()=>{const _0x36b4c3=_0x5c702d;document[_0x36b4c3(0xc2)]('reset-confirmation')['style'][_0x36b4c3(0xb8)]='block';}),_0x3410db?.[_0x5c702d(0xc7)]('click',async()=>{const _0x42cec0=_0x5c702d,_0x4195c2=document[_0x42cec0(0xc2)]('reset-password'),_0x3852c3=auth['currentUser'];if(!_0x3852c3||!_0x4195c2[_0x42cec0(0xba)]){alert('Please\x20enter\x20your\x20password');return;}try{const _0x12c555=EmailAuthProvider['credential'](_0x3852c3[_0x42cec0(0xb6)],_0x4195c2['value']);await reauthenticateWithCredential(_0x3852c3,_0x12c555),await this['resetSeason'](),_0x4195c2['value']='',document['getElementById'](_0x42cec0(0xc8))['style']['display']='none';}catch(_0x3d3814){alert('Invalid\x20password\x20or\x20authentication\x20failed'),console['error']('Authentication\x20error:',_0x3d3814);}}),_0x545168?.['addEventListener']('click',()=>{const _0x23ec76=_0x5c702d,_0x36c1e1=document['getElementById']('reset-password');_0x36c1e1['value']='',document['getElementById']('reset-confirmation')['style'][_0x23ec76(0xb8)]=_0x23ec76(0xc6);});}async['resetSeason'](){const _0x38b476=a55_0x3848;try{const _0xaa5cfe=await getDoc(doc(db,'metadata','seasonCount'));let _0x41880c=0x1;_0xaa5cfe['exists']()&&(_0x41880c=_0xaa5cfe['data']()['count']+0x1);const _0x420743=await getDocs(collection(db,'players')),_0x1e093d={'players':[],'date':new Date(),'seasonNumber':_0x41880c};for(const _0x25bc96 of _0x420743['docs']){const _0x235151=_0x25bc96['data']();_0x1e093d['players'][_0x38b476(0xb3)]({'username':_0x235151['username'],'position':_0x235151[_0x38b476(0xc5)],'eloRating':_0x235151[_0x38b476(0xc9)]||0x4b0}),await setDoc(doc(db,_0x38b476(0xb9),_0x25bc96['id']),{..._0x235151,'eloRating':0x4b0,'position':_0x235151['position']});}await setDoc(doc(db,'seasons','season'+_0x41880c),_0x1e093d),await setDoc(doc(db,_0x38b476(0xc4),'seasonCount'),{'count':_0x41880c}),alert(_0x38b476(0xca)+_0x41880c+'\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.'),location['reload']();}catch(_0x780c8b){console[_0x38b476(0xbd)](_0x38b476(0xbc),_0x780c8b),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}function a55_0x5364(){const _0x157e58=['push','trace','exception','email','apply','display','players','value','length','Error\x20resetting\x20season:','error','{}.constructor(\x22return\x20this\x22)(\x20)','prototype','info','return\x20(function()\x20','getElementById','log','metadata','position','none','addEventListener','reset-confirmation','eloRating','Season\x20','table'];a55_0x5364=function(){return _0x157e58;};return a55_0x5364();}export const seasonManager=new SeasonManager();