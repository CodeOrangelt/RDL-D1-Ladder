const a2_0x31cce1=a2_0x11de,a2_0x4b4b54=(function(){let _0x144cce=!![];return function(_0x5912f6,_0x1d1fb4){const _0x31d94b=_0x144cce?function(){if(_0x1d1fb4){const _0x41eb5d=_0x1d1fb4['apply'](_0x5912f6,arguments);return _0x1d1fb4=null,_0x41eb5d;}}:function(){};return _0x144cce=![],_0x31d94b;};}()),a2_0x1b59cc=a2_0x4b4b54(this,function(){const _0x2e4241=a2_0x11de;let _0xc9598f;try{const _0x467bce=Function('return\x20(function()\x20'+_0x2e4241(0x1b6)+');');_0xc9598f=_0x467bce();}catch(_0x29fe01){_0xc9598f=window;}const _0x5cc081=_0xc9598f[_0x2e4241(0x22c)]=_0xc9598f['console']||{},_0x5d9dbb=[_0x2e4241(0x2ef),'warn',_0x2e4241(0x2b9),'error','exception',_0x2e4241(0x164),_0x2e4241(0x26b)];for(let _0x4a98dc=0x0;_0x4a98dc<_0x5d9dbb[_0x2e4241(0x2fe)];_0x4a98dc++){const _0x56df3e=a2_0x4b4b54['constructor']['prototype'][_0x2e4241(0x18e)](a2_0x4b4b54),_0x1ea05d=_0x5d9dbb[_0x4a98dc],_0x518568=_0x5cc081[_0x1ea05d]||_0x56df3e;_0x56df3e[_0x2e4241(0x2ed)]=a2_0x4b4b54[_0x2e4241(0x18e)](a2_0x4b4b54),_0x56df3e['toString']=_0x518568[_0x2e4241(0x3c0)]['bind'](_0x518568),_0x5cc081[_0x1ea05d]=_0x56df3e;}});a2_0x1b59cc();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x29e7fb){const _0x25dbff=a2_0x11de;if(!_0x29e7fb)return _0x25dbff(0x370);_0x29e7fb=_0x29e7fb['replace']('#','');_0x29e7fb['length']===0x3&&(_0x29e7fb=_0x29e7fb['split']('')[_0x25dbff(0x1b9)](_0x147da1=>_0x147da1+_0x147da1)['join'](''));if(_0x29e7fb['length']!==0x6)return'#ffffff';const _0x3a57a9=parseInt(_0x29e7fb['substring'](0x0,0x2),0x10),_0x5ea63f=parseInt(_0x29e7fb[_0x25dbff(0x2c8)](0x2,0x4),0x10),_0x353330=parseInt(_0x29e7fb['substring'](0x4,0x6),0x10),_0x1ca6e8=(_0x3a57a9*0x12b+_0x5ea63f*0x24b+_0x353330*0x72)/0x3e8;return _0x1ca6e8>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{const _0x1028ed=a2_0x11de;auth[_0x1028ed(0x24f)](async _0x375ec7=>{const _0x48b9a0=_0x1028ed;if(!_0x375ec7){window['location'][_0x48b9a0(0x1e1)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0x1859c4){console['error']('Error\x20initializing\x20dashboard:',_0x1859c4),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x15756c){const _0x1d297d=a2_0x11de;if(!_0x15756c)return['dashboard'];console['log'](_0x1d297d(0x26c)+_0x15756c+'\x20in\x20all\x20collections...');const _0x4fd7b5=[{'name':'userProfiles','displayName':_0x1d297d(0x217)},{'name':_0x1d297d(0x32c),'displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':_0x1d297d(0x211)},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x1fe0f7=auth['currentUser'];let _0x1bb93b=null,_0xcba3dd=null;for(const _0xfcb0db of _0x4fd7b5){try{if(_0x1fe0f7){const _0x1eb1c5=doc(db,_0xfcb0db['name'],_0x1fe0f7[_0x1d297d(0x2a1)]),_0x5d3bb3=await getDoc(_0x1eb1c5);if(_0x5d3bb3['exists']()){const _0x32658e=_0x5d3bb3['data']();console['log'](_0x1d297d(0x1c8)+_0xfcb0db['displayName']+'\x20by\x20UID:',_0x32658e);const _0x3a919a=(_0x32658e['roleName']||_0x32658e[_0x1d297d(0x32d)]||'')['toLowerCase']();if(_0x3a919a&&_0x3a919a!=='none'){_0x1bb93b=_0x3a919a,_0xcba3dd=_0xfcb0db['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x1bb93b+'\x20in\x20'+_0xcba3dd);break;}}}if(!_0x1bb93b){const _0x28f88a=collection(db,_0xfcb0db[_0x1d297d(0x163)]),_0xdcc800=query(_0x28f88a,where(_0x1d297d(0x181),'==',_0x15756c)),_0x150497=await getDocs(_0xdcc800);if(!_0x150497['empty']){const _0x2c08c6=_0x150497['docs'][0x0][_0x1d297d(0x18f)]();console[_0x1d297d(0x2ef)]('Found\x20user\x20in\x20'+_0xfcb0db['displayName']+'\x20with\x20email\x20'+_0x15756c+':',_0x2c08c6);const _0x3a6eed=(_0x2c08c6['roleName']||_0x2c08c6[_0x1d297d(0x32d)]||'')['toLowerCase']();if(_0x3a6eed&&_0x3a6eed!=='none'){_0x1bb93b=_0x3a6eed,_0xcba3dd=_0xfcb0db['displayName'],console['log'](_0x1d297d(0x28a)+_0x1bb93b+_0x1d297d(0x327)+_0xcba3dd);break;}}}}catch(_0x527ce0){console['error']('Error\x20checking\x20'+_0xfcb0db[_0x1d297d(0x387)]+':',_0x527ce0);}}if(_0x1bb93b){console[_0x1d297d(0x2ef)]('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x1bb93b+'\x20(from\x20'+_0xcba3dd+')');const _0x8df7b3={'admin':['dashboard',_0x1d297d(0x35d),_0x1d297d(0x270),'manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history',_0x1d297d(0x240),'user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'owner':[_0x1d297d(0x180),'manage-players','manage-matches','manage-articles',_0x1d297d(0x23e),'manage-ranks','inactive-players','settings',_0x1d297d(0x23e),_0x1d297d(0x372),_0x1d297d(0x240),'user-roles-section','manage-matches','manage-points',_0x1d297d(0x26d),_0x1d297d(0x2c3)],'council':[_0x1d297d(0x180),'manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles',_0x1d297d(0x23e),'elo-history','manage-highlights']};if(_0x8df7b3[_0x1bb93b])return console['log']('Role\x20\x27'+_0x1bb93b+'\x27\x20has\x20permissions:',_0x8df7b3[_0x1bb93b]),_0x8df7b3[_0x1bb93b];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x15756c+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x2ea4de=[]){const _0x31fa55=a2_0x11de,_0x55f3a5=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x1d4ba0=document['querySelectorAll']('.admin-section');(!_0x2ea4de||_0x2ea4de['length']===0x0)&&(_0x2ea4de=['dashboard']);_0x55f3a5['forEach'](_0x1b2418=>{const _0x51be85=a2_0x11de,_0x13a1bb=_0x1b2418['getAttribute'](_0x51be85(0x1b2));_0x2ea4de['includes'](_0x13a1bb)?_0x1b2418['style']['display']='flex':_0x1b2418['style']['display']='none',_0x1b2418[_0x51be85(0x17d)]('click',()=>{const _0x3959ee=_0x51be85,_0x7e72e0=_0x1b2418['getAttribute'](_0x3959ee(0x1b2));if(!_0x2ea4de['includes'](_0x7e72e0)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section',_0x3959ee(0x3b0));return;}_0x55f3a5['forEach'](_0x5a6aff=>_0x5a6aff[_0x3959ee(0x34c)]['remove']('active')),_0x1b2418['classList']['add']('active'),_0x1d4ba0['forEach'](_0x202551=>{const _0x593837=_0x3959ee;_0x202551['style']['display']=_0x593837(0x23c);});const _0x533b7b=document['getElementById'](_0x7e72e0);_0x533b7b&&(_0x533b7b['style']['display']='block',console['log']('Switched\x20to\x20'+_0x7e72e0+'\x20section'));});});const _0x413f0c=document[_0x31fa55(0x1c7)](_0x31fa55(0x3b5)+_0x2ea4de[0x0]+'\x22]');_0x413f0c&&_0x413f0c[_0x31fa55(0x386)](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x1823f8=a2_0x11de,_0x4492b8=document[_0x1823f8(0x17e)](_0x1823f8(0x283));let _0x2bc950=null,_0x659cd5=new Set();_0x4492b8['forEach'](_0x78e237=>{const _0x170bed=_0x1823f8;_0x78e237['addEventListener'](_0x170bed(0x386),function(){const _0x5b65=_0x170bed,_0x2349e4=this['getAttribute'](_0x5b65(0x1b2));if(_0x2349e4===_0x2bc950)return;_0x2bc950&&(document['getElementById'](_0x2bc950)[_0x5b65(0x2e8)]['display']='none',_0x4492b8['forEach'](_0x162103=>_0x162103[_0x5b65(0x34c)]['remove'](_0x5b65(0x1df)))),document['getElementById'](_0x2349e4)['style']['display']='block',this['classList']['add']('active'),_0x2bc950=_0x2349e4;});});}function loadSectionData(_0x513705){return;}async function initializeAdminDashboard(){const _0x6d9445=a2_0x11de;try{const _0x44e3b3=auth['currentUser'],_0x46ff24=await getUserTabPermissions(_0x44e3b3[_0x6d9445(0x181)]);console[_0x6d9445(0x2ef)](_0x6d9445(0x2e7)+_0x44e3b3['email']+_0x6d9445(0x29c),_0x46ff24),window[_0x6d9445(0x249)]=_0x46ff24,setupSidebarNavigation(_0x46ff24),setupLadderSelector(),setupDashboardSection(),_0x46ff24[_0x6d9445(0x3b6)](_0x6d9445(0x35d))&&setupManagePlayersSection(),_0x46ff24['includes']('elo-history')&&setupEloHistorySection(),_0x46ff24['includes']('manage-ranks')&&setupRankControls(),_0x46ff24[_0x6d9445(0x3b6)]('manage-articles')&&setupManageArticlesSection(),_0x46ff24['includes'](_0x6d9445(0x31c))&&setupUserRolesSection(),_0x46ff24['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x46ff24[_0x6d9445(0x3b6)]('manage-highlights')&&setupManageHighlightsSection(),_0x46ff24['includes'](_0x6d9445(0x2ab))&&setupInactivePlayersSection(),_0x46ff24['includes'](_0x6d9445(0x270))&&setupManageMatchesSection(),_0x46ff24[_0x6d9445(0x3b6)]('manage-points')&&setupManagePointsSection(),_0x46ff24['includes'](_0x6d9445(0x2c3))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x46ff24);}catch(_0x17ca2){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x17ca2);}}function setupDataLoadButtons(_0x248ff1=[]){const _0x61e0b2=a2_0x11de;(!_0x248ff1||_0x248ff1[_0x61e0b2(0x2fe)]===0x0)&&(_0x248ff1=['dashboard']);const _0x16ca32=document['getElementById'](_0x61e0b2(0x357));_0x16ca32&&_0x16ca32[_0x61e0b2(0x17d)](_0x61e0b2(0x386),function(){const _0x6b9f49=_0x61e0b2;this[_0x6b9f49(0x34c)][_0x6b9f49(0x1b8)]('loading'),this[_0x6b9f49(0x310)]=_0x6b9f49(0x380),loadDashboardOverview()[_0x6b9f49(0x18a)](()=>{const _0x29d4da=_0x6b9f49;this['classList'][_0x29d4da(0x25a)](_0x29d4da(0x1fd)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})[_0x6b9f49(0x32a)](_0x3baf6c=>{const _0x118863=_0x6b9f49;console['error']('Error\x20loading\x20dashboard:',_0x3baf6c),this[_0x118863(0x34c)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x248ff1['includes']('manage-trophies')){const _0x5eb236=document['getElementById'](_0x61e0b2(0x201));_0x5eb236&&_0x5eb236[_0x61e0b2(0x17d)](_0x61e0b2(0x386),function(){console['log']('Load\x20trophies\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x10adcc=a2_0x11de;this['classList']['remove'](_0x10adcc(0x1fd)),this[_0x10adcc(0x310)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x552a7f=>{console['error']('Error\x20loading\x20trophies:',_0x552a7f),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x248ff1['includes'](_0x61e0b2(0x35d))){const _0x3cda1d=document['getElementById'](_0x61e0b2(0x31e));_0x3cda1d&&_0x3cda1d[_0x61e0b2(0x17d)]('click',function(){const _0x4569d1=_0x61e0b2;console['log'](_0x4569d1(0x274)),this[_0x4569d1(0x34c)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x2da381=_0x4569d1;this['classList'][_0x2da381(0x25a)]('loading'),this['innerHTML']=_0x2da381(0x259);})['catch'](_0x3bd1fa=>{const _0x1929f9=_0x4569d1;console['error']('Error\x20loading\x20players:',_0x3bd1fa),this['classList']['remove']('loading'),this[_0x1929f9(0x310)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x302c05=_0x1929f9;this['innerHTML']=_0x302c05(0x259);},0xbb8);});});}if(_0x248ff1['includes'](_0x61e0b2(0x372))){const _0xfa0eed=document['getElementById']('load-elo-history-data');_0xfa0eed&&_0xfa0eed[_0x61e0b2(0x17d)](_0x61e0b2(0x386),function(){console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x2938fc=a2_0x11de;this[_0x2938fc(0x34c)]['remove'](_0x2938fc(0x1fd)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x1cde02=>{const _0x2b27a9=a2_0x11de;console['error']('Error\x20loading\x20history:',_0x1cde02),this[_0x2b27a9(0x34c)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x61f271=_0x2b27a9;this[_0x61f271(0x310)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x248ff1[_0x61e0b2(0x3b6)]('manage-articles')){const _0x165023=document['getElementById'](_0x61e0b2(0x238));_0x165023&&_0x165023[_0x61e0b2(0x17d)]('click',function(){const _0xc01078=_0x61e0b2;console[_0xc01078(0x2ef)]('Load\x20articles\x20data\x20clicked'),this['classList'][_0xc01078(0x1b8)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x2d728a=>{const _0x4e6267=_0xc01078;console['error'](_0x4e6267(0x374),_0x2d728a),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x248ff1[_0x61e0b2(0x3b6)]('user-roles-section')){const _0x29fb73=document[_0x61e0b2(0x271)]('load-users-data');_0x29fb73&&_0x29fb73[_0x61e0b2(0x17d)]('click',function(){console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x347593=a2_0x11de;this['classList']['remove']('loading'),this[_0x347593(0x310)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x11dea5=>{const _0x458c1a=a2_0x11de;console['error'](_0x458c1a(0x37e),_0x11dea5),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x248ff1['includes']('inactive-players')){const _0x37d3aa=document['getElementById'](_0x61e0b2(0x378));_0x37d3aa&&_0x37d3aa['addEventListener']('click',function(){const _0x35d9a7=_0x61e0b2;console[_0x35d9a7(0x2ef)]('Load\x20inactive\x20players\x20data\x20clicked'),this[_0x35d9a7(0x34c)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x445e8c=>{const _0xdf52a3=_0x35d9a7;console['error']('Error\x20loading\x20inactive\x20players:',_0x445e8c),this['classList']['remove']('loading'),this['innerHTML']=_0xdf52a3(0x1ac),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x248ff1['includes']('manage-highlights')){const _0x4f76ab=document[_0x61e0b2(0x271)]('load-highlights-data');_0x4f76ab&&_0x4f76ab[_0x61e0b2(0x17d)]('click',function(){const _0x8d1140=_0x61e0b2;console[_0x8d1140(0x2ef)](_0x8d1140(0x2ff)),this[_0x8d1140(0x34c)][_0x8d1140(0x1b8)]('loading'),this['innerHTML']=_0x8d1140(0x380),loadHighlightsAdmin()['then'](()=>{const _0x3622a9=_0x8d1140;this[_0x3622a9(0x34c)]['remove']('loading'),this[_0x3622a9(0x310)]=_0x3622a9(0x2da);})['catch'](_0x2707e0=>{const _0x16279f=_0x8d1140;console[_0x16279f(0x3b0)](_0x16279f(0x278),_0x2707e0),this[_0x16279f(0x34c)][_0x16279f(0x25a)](_0x16279f(0x1fd)),this['innerHTML']=_0x16279f(0x1ac),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x248ff1[_0x61e0b2(0x3b6)]('manage-matches')){const _0x59d059=document['getElementById'](_0x61e0b2(0x338));_0x59d059&&_0x59d059[_0x61e0b2(0x17d)]('click',function(){const _0x392b3b=_0x61e0b2;console[_0x392b3b(0x2ef)]('Load\x20matches\x20data\x20clicked'),this['classList']['add'](_0x392b3b(0x1fd)),this['innerHTML']=_0x392b3b(0x380),loadMatchesData(0x1)['then'](()=>{const _0x46407d=_0x392b3b;this['classList']['remove'](_0x46407d(0x1fd)),this['innerHTML']=_0x46407d(0x1f3);})['catch'](_0x4af085=>{const _0x3a9236=_0x392b3b;console['error']('Error\x20loading\x20matches:',_0x4af085),this['classList'][_0x3a9236(0x25a)](_0x3a9236(0x1fd)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x248ff1['includes']('manage-ribbons')){const _0x2f95a8=document['getElementById']('load-ribbons-data');_0x2f95a8&&_0x2f95a8['addEventListener']('click',function(){const _0x4506a8=_0x61e0b2;console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x4506a8(0x310)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()[_0x4506a8(0x18a)](()=>{const _0x2e307c=_0x4506a8;this['classList']['remove']('loading'),this['innerHTML']=_0x2e307c(0x282);})[_0x4506a8(0x32a)](_0x627eaa=>{const _0x1b28ff=_0x4506a8;console['error'](_0x1b28ff(0x2f1),_0x627eaa),this['classList'][_0x1b28ff(0x25a)](_0x1b28ff(0x1fd)),this[_0x1b28ff(0x310)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x4e01a9=a2_0x11de;document[_0x4e01a9(0x271)]('player-count')['textContent']='-',document[_0x4e01a9(0x271)]('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x4e01a9(0x271)]('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x406111=a2_0x11de,_0x2e253e=document[_0x406111(0x17e)](_0x406111(0x35b));_0x2e253e['forEach'](_0x2e00f6=>{_0x2e00f6['addEventListener']('change',()=>{const _0x30794e=a2_0x11de;currentLadder=_0x2e00f6['value'],document['body']['setAttribute'](_0x30794e(0x168),currentLadder);const _0x489002=document[_0x30794e(0x271)]('current-ladder-display');_0x489002&&(_0x489002['textContent']=currentLadder),document['getElementById'](_0x30794e(0x2ae))['textContent']='-',document['getElementById'](_0x30794e(0x190))[_0x30794e(0x2f4)]='-',document['getElementById'](_0x30794e(0x183))['textContent']='-',document[_0x30794e(0x271)]('rejected-count')[_0x30794e(0x2f4)]='-',charts[_0x30794e(0x311)]&&(charts['rankDistribution'][_0x30794e(0x2ee)](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts[_0x30794e(0x156)]=null),showNotification('Switched\x20to\x20'+currentLadder+_0x30794e(0x23d),'info');});});const _0x34fa73=document[_0x406111(0x271)]('current-ladder-display');_0x34fa73&&(_0x34fa73[_0x406111(0x2f4)]=currentLadder);}async function loadDashboardOverview(){const _0x5c20ac=a2_0x11de;try{console[_0x5c20ac(0x2ef)]('Loading\x20dashboard\x20overview\x20data...'),document[_0x5c20ac(0x271)](_0x5c20ac(0x2ae))[_0x5c20ac(0x2f4)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')[_0x5c20ac(0x2f4)]='-',document['getElementById']('rejected-count')[_0x5c20ac(0x2f4)]='-';const _0x35db93=currentLadder==='D1'?_0x5c20ac(0x32c):currentLadder==='D2'?'playersD2':'playersD3',_0x5c1ccd=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2b1cfa=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x31ebc2=currentLadder==='D1'?_0x5c20ac(0x179):currentLadder==='D2'?'RejectedD2':_0x5c20ac(0x392);console['log'](_0x5c20ac(0x2b2)+currentLadder+':\x20'+_0x35db93+',\x20'+_0x5c1ccd);const _0x509c44=await getDocs(collection(db,_0x35db93)),_0x4170c2=_0x509c44['size'],_0xcdbd00=await getDocs(collection(db,_0x5c1ccd)),_0x4fe5ab=_0xcdbd00['size'],_0x17a8b3=await getDocs(collection(db,_0x2b1cfa)),_0x2605ae=_0x17a8b3['size'],_0x246973=await getDocs(collection(db,_0x31ebc2)),_0x1af1d8=_0x246973[_0x5c20ac(0x3bc)];return document['getElementById'](_0x5c20ac(0x2ae))['textContent']=_0x4170c2,document['getElementById']('match-count')[_0x5c20ac(0x2f4)]=_0x4fe5ab,document['getElementById']('pending-count')['textContent']=_0x2605ae,document['getElementById'](_0x5c20ac(0x250))[_0x5c20ac(0x2f4)]=_0x1af1d8,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x45cadf){console['error'](_0x5c20ac(0x2ac),_0x45cadf);throw _0x45cadf;}}async function createRankDistributionChart(){const _0x494c9e=a2_0x11de;try{const _0x13a84f=collection(db,currentLadder==='D1'?'players':_0x494c9e(0x1fc)),_0x182a55=await getDocs(_0x13a84f),_0x17474f={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x182a55['forEach'](_0x8c681a=>{const _0x3e50b9=_0x494c9e,_0x2d07a8=_0x8c681a['data'](),_0x19b587=_0x2d07a8[_0x3e50b9(0x3a5)]||0x4b0;if(_0x19b587>=0x7d0)_0x17474f['Emerald']++;else{if(_0x19b587>=0x708)_0x17474f[_0x3e50b9(0x292)]++;else{if(_0x19b587>=0x640)_0x17474f['Silver']++;else{if(_0x19b587>=0x578)_0x17474f['Bronze']++;else _0x17474f['Unranked']++;}}}});const _0x29de8e=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0x29de8e,{'type':'doughnut','data':{'labels':Object['keys'](_0x17474f),'datasets':[{'data':Object[_0x494c9e(0x322)](_0x17474f),'backgroundColor':['#808080','#CD7F32','#C0C0C0','#FFD700',_0x494c9e(0x3c2)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x58d3a2){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x58d3a2),document['getElementById']('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x3513f4=a2_0x11de;try{const _0x354416=currentLadder==='D1'?'approvedMatches':_0x3513f4(0x1ef),_0x5319de=collection(db,_0x354416),_0x45b9dc=new Date();_0x45b9dc[_0x3513f4(0x21d)](_0x45b9dc['getDate']()-0x7);const _0x3013e4=query(_0x5319de,where('approvedAt','>=',_0x45b9dc),orderBy('approvedAt','asc')),_0x52a00e=await getDocs(_0x3013e4),_0x347ecd=[_0x3513f4(0x20c),'Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],_0x903a04=_0x347ecd['reduce']((_0x449889,_0x136302)=>({..._0x449889,[_0x136302]:0x0}),{});_0x52a00e['forEach'](_0x1c1030=>{const _0x47579c=_0x1c1030['data']();if(_0x47579c['approvedAt']){const _0x26d817=_0x347ecd[new Date(_0x47579c['approvedAt']['seconds']*0x3e8)['getDay']()];_0x903a04[_0x26d817]++;}});const _0x424aa=document['getElementById']('activity-chart');charts['activity']&&charts['activity'][_0x3513f4(0x2ee)](),charts['activity']=new Chart(_0x424aa,{'type':'bar','data':{'labels':_0x347ecd,'datasets':[{'label':'Matches\x20Played','data':_0x347ecd['map'](_0x3443c0=>_0x903a04[_0x3443c0]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0x3513f4(0x1db),'borderColor':currentLadder==='D1'?_0x3513f4(0x214):_0x3513f4(0x365),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x1c3ee6){console[_0x3513f4(0x3b0)]('Error\x20creating\x20activity\x20chart:',_0x1c3ee6),document['getElementById']('activity-chart')[_0x3513f4(0x310)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x2e31d7=a2_0x11de,_0x2141a1=document['getElementById']('players-table-body');if(!_0x2141a1)return;_0x2141a1[_0x2e31d7(0x310)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x336822='players';if(currentLadder==='D2')_0x336822=_0x2e31d7(0x1fc);else currentLadder==='D3'&&(_0x336822='playersD3');console['log'](_0x2e31d7(0x1d4)+_0x336822+'\x20collection...');const _0xd2ca31=collection(db,_0x336822),_0x5cfc2f=query(_0xd2ca31,orderBy(_0x2e31d7(0x3a5),'desc')),_0x4b3180=await getDocs(_0x5cfc2f);if(_0x4b3180[_0x2e31d7(0x318)]){_0x2141a1['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x2141a1['innerHTML']='';let _0x2bda5e=0x1;_0x4b3180['forEach'](_0x33deae=>{const _0x16edfa=_0x2e31d7,_0x354374=_0x33deae[_0x16edfa(0x18f)](),_0x5691f6=getRankFromElo(_0x354374['eloRating']||0x4b0),_0x303d82=getRankStyle(_0x354374['eloRating']||0x4b0),_0x333806=document['createElement']('tr');_0x333806['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x2bda5e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x303d82['color']+_0x16edfa(0x21f)+(_0x354374['username']||_0x16edfa(0x1c6))+_0x16edfa(0x16a)+(_0x354374['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x303d82[_0x16edfa(0x269)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5691f6+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x354374['wins']||0x0)+_0x16edfa(0x1cd)+(_0x354374['losses']||0x0)+_0x16edfa(0x302)+_0x33deae['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x33deae['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2141a1['appendChild'](_0x333806),_0x2bda5e++;}),setupPlayerActionButtons();}catch(_0x1f24d5){console[_0x2e31d7(0x3b0)](_0x2e31d7(0x19f),_0x1f24d5),_0x2141a1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x1f24d5['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x4ac8a7){const _0x36c7a4=a2_0x11de;if(_0x4ac8a7>=0x7d0)return'Emerald';if(_0x4ac8a7>=0x708)return'Gold';if(_0x4ac8a7>=0x640)return'Silver';if(_0x4ac8a7>=0x578)return'Bronze';return _0x36c7a4(0x390);}function setupPlayerActionButtons(){const _0x4a543a=a2_0x11de;document['querySelectorAll']('.edit-btn')['forEach'](_0x3fc658=>{_0x3fc658['addEventListener']('click',async _0x40162f=>{const _0xb56f7c=_0x40162f['currentTarget']['dataset']['id'];openEditPlayerModal(_0xb56f7c);});}),document['querySelectorAll']('.delete-btn')[_0x4a543a(0x186)](_0x5268d9=>{_0x5268d9['addEventListener']('click',async _0x37d8f6=>{const _0x4b7f74=_0x37d8f6['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x4b7f74);});});}async function openEditPlayerModal(_0x27d447){const _0x4afc78=a2_0x11de;try{const _0x54ae7b=currentLadder==='D1'?'players':_0x4afc78(0x1fc),_0x250b7e=doc(db,_0x54ae7b,_0x27d447),_0x3ab2a3=await getDoc(_0x250b7e);if(!_0x3ab2a3['exists']()){showNotification(_0x4afc78(0x295),'error');return;}const _0x5a2239=_0x3ab2a3['data'](),_0x5c81f0=document[_0x4afc78(0x271)](_0x4afc78(0x33c)),_0x2b793e=document['getElementById']('edit-username'),_0x3f705c=document['getElementById']('edit-elo'),_0x317841=document['getElementById']('edit-wins'),_0xcb6a46=document['getElementById']('edit-losses');_0x2b793e[_0x4afc78(0x1ad)]=_0x5a2239['username']||'',_0x3f705c['value']=_0x5a2239['eloRating']||0x4b0,_0x317841['value']=_0x5a2239[_0x4afc78(0x266)]||0x0,_0xcb6a46['value']=_0x5a2239['losses']||0x0,_0x5c81f0['dataset'][_0x4afc78(0x3ba)]=_0x27d447,_0x5c81f0['classList']['add']('active');}catch(_0x251767){console[_0x4afc78(0x3b0)](_0x4afc78(0x24b),_0x251767),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x5a6d96=a2_0x11de;try{const _0x1e40ce=document[_0x5a6d96(0x271)]('edit-player-modal'),_0x240901=_0x1e40ce['dataset']['playerId'];if(!_0x240901){showNotification(_0x5a6d96(0x2bb),'error');return;}const _0x1d0ebd=document['getElementById']('edit-username'),_0x376f49=document['getElementById']('edit-elo'),_0x563706=document[_0x5a6d96(0x271)]('edit-wins'),_0x21c84e=document[_0x5a6d96(0x271)]('edit-losses'),_0x27936b=_0x1d0ebd['value'][_0x5a6d96(0x32f)](),_0x2593b8=parseInt(_0x376f49['value']),_0x5e2917=parseInt(_0x563706['value']),_0x243142=parseInt(_0x21c84e[_0x5a6d96(0x1ad)]);if(!_0x27936b||isNaN(_0x2593b8)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x5a6d96(0x3b0));return;}const _0x570019=currentLadder==='D1'?_0x5a6d96(0x32c):_0x5a6d96(0x1fc),_0x1a7ea5=doc(db,_0x570019,_0x240901),_0x241a10=await getDoc(_0x1a7ea5),_0x50a428=_0x241a10['exists']()?_0x241a10['data']():{},_0x3edd9e=_0x50a428['eloRating']||0x4b0;await updateDoc(_0x1a7ea5,{'username':_0x27936b,'eloRating':_0x2593b8,'wins':_0x5e2917||0x0,'losses':_0x243142||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x2593b8!==_0x3edd9e){const _0x42200a=currentLadder==='D1'?_0x5a6d96(0x23a):'eloHistoryD2';await addDoc(collection(db,_0x42200a),{'player':_0x27936b,'previousElo':_0x3edd9e,'newElo':_0x2593b8,'timestamp':serverTimestamp(),'type':_0x5a6d96(0x21a),'modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x5a6d96(0x2f6),'success');}catch(_0x1dfb20){console['error']('Error\x20updating\x20player:',_0x1dfb20),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x1dfb20['message'],'error');}}function closeEditPlayerModal(){const _0x176d2c=a2_0x11de,_0x5479bf=document[_0x176d2c(0x271)](_0x176d2c(0x33c));_0x5479bf['classList'][_0x176d2c(0x25a)](_0x176d2c(0x1df)),_0x5479bf['dataset']['playerId']='';}async function confirmDeletePlayer(_0x34aa7c){const _0x2bd4fc=a2_0x11de;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0xaa7427=currentLadder==='D1'?'players':_0x2bd4fc(0x1fc);await deleteDoc(doc(db,_0xaa7427,_0x34aa7c)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x14899e){console[_0x2bd4fc(0x3b0)](_0x2bd4fc(0x2cb),_0x14899e),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x14899e['message'],'error');}}async function setupManagePlayersSection(){const _0xe8d2e8=a2_0x11de,_0x57eca1=document['getElementById'](_0xe8d2e8(0x177));_0x57eca1&&_0x57eca1[_0xe8d2e8(0x17d)]('submit',async _0x5dbd85=>{_0x5dbd85['preventDefault'](),await addNewPlayer();});const _0xe372ce=document[_0xe8d2e8(0x271)](_0xe8d2e8(0x2e2));_0xe372ce&&_0xe372ce['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x142412=document['getElementById']('save-player-btn');_0x142412&&_0x142412['addEventListener']('click',saveEditedPlayer);const _0x44a5a8=document['getElementById']('cancel-edit-btn');_0x44a5a8&&_0x44a5a8['addEventListener']('click',closeEditPlayerModal);const _0x48c934=document[_0xe8d2e8(0x271)]('edit-player-modal');_0x48c934&&_0x48c934['addEventListener'](_0xe8d2e8(0x386),_0xdfd3e8=>{_0xdfd3e8['target']===_0x48c934&&closeEditPlayerModal();});const _0x26dd6f=document['getElementById']('players-ladder-selector');_0x26dd6f&&_0x26dd6f['addEventListener'](_0xe8d2e8(0x389),()=>{currentLadder=_0x26dd6f['value'],loadPlayersData();});}async function addNewPlayer(){const _0x2e55e3=a2_0x11de;try{const _0x30314a=document[_0x2e55e3(0x271)]('new-player-username'),_0x4b13a9=document[_0x2e55e3(0x271)](_0x2e55e3(0x1c1)),_0x5ad82a=_0x30314a['value']['trim'](),_0x537276=parseInt(_0x4b13a9[_0x2e55e3(0x1ad)])||0x4b0;if(!_0x5ad82a){alert(_0x2e55e3(0x272));return;}console['log'](_0x2e55e3(0x39e)+_0x5ad82a+_0x2e55e3(0x399)+_0x537276+_0x2e55e3(0x39b)+currentLadder+'\x20ladder');let _0x18a417='players',_0x46a0bb='eloHistory';if(currentLadder==='D2')_0x18a417='playersD2',_0x46a0bb=_0x2e55e3(0x37f);else currentLadder==='D3'&&(_0x18a417=_0x2e55e3(0x348),_0x46a0bb='eloHistoryD3');const _0x174983=query(collection(db,_0x18a417),where('username','==',_0x5ad82a)),_0x4c8c8a=await getDocs(_0x174983);if(!_0x4c8c8a[_0x2e55e3(0x318)]){alert('Username\x20'+_0x5ad82a+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x1b11ee=auth['currentUser'],_0x423e7f={'username':_0x5ad82a,'eloRating':_0x537276,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x1b11ee?_0x1b11ee[_0x2e55e3(0x181)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x18a417),_0x423e7f),await addDoc(collection(db,_0x46a0bb),{'player':_0x5ad82a,'previousElo':0x4b0,'newElo':_0x537276,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x1b11ee?_0x1b11ee[_0x2e55e3(0x181)]:'admin','gameMode':currentLadder}),_0x30314a['value']='',_0x4b13a9[_0x2e55e3(0x1ad)]='1200',alert('Player\x20'+_0x5ad82a+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x1779dc){console['error']('Error\x20adding\x20player:',_0x1779dc),alert('Error\x20adding\x20player:\x20'+_0x1779dc['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x5c0908=document['getElementById']('add-player-form');_0x5c0908&&_0x5c0908['addEventListener']('submit',_0x2236ca=>{const _0x5f105a=a2_0x11de;_0x2236ca[_0x5f105a(0x33b)](),addNewPlayer();});});function filterPlayerTable(){const _0xf4aad5=a2_0x11de,_0x58775e=document['getElementById']('player-search')['value']['toLowerCase'](),_0x4d0fb1=document['querySelectorAll']('#players-table-body\x20tr');let _0xb9d29a=0x0;_0x4d0fb1['forEach'](_0x198a37=>{const _0x12fcb6=a2_0x11de,_0x14cecf=_0x198a37['querySelector']('.username')?.[_0x12fcb6(0x2f4)]['toLowerCase']()||'';_0x14cecf['includes'](_0x58775e)?(_0x198a37[_0x12fcb6(0x2e8)]['display']='',_0xb9d29a++):_0x198a37[_0x12fcb6(0x2e8)][_0x12fcb6(0x30c)]='none';});const _0x35d885=document['getElementById']('no-results-message');_0x35d885&&(_0xb9d29a===0x0&&_0x58775e!==''?_0x35d885['style']['display']='block':_0x35d885[_0xf4aad5(0x2e8)]['display']='none');}function debounce(_0x2733ad,_0x50156c){let _0x22ce3b;return function(..._0x5d2f5d){const _0xcdd2da=a2_0x11de;clearTimeout(_0x22ce3b),_0x22ce3b=setTimeout(()=>_0x2733ad[_0xcdd2da(0x293)](this,_0x5d2f5d),_0x50156c);};}async function loadEloHistory(_0x171ca6=0x1){const _0x585e=a2_0x11de,_0x54ff77=document[_0x585e(0x271)]('elo-history-table-body'),_0x266d39=currentLadder['toLowerCase']();if(!_0x54ff77)return;_0x54ff77['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x3902f4=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x476dca=collection(db,_0x3902f4);let _0x5e8bf0;if(_0x171ca6>eloHistoryPagination[_0x266d39]['page']&&eloHistoryPagination[_0x266d39]['lastVisible'])_0x5e8bf0=query(_0x476dca,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x266d39]['lastVisible']),limit(PAGE_SIZE));else _0x171ca6<eloHistoryPagination[_0x266d39]['page']&&eloHistoryPagination[_0x266d39][_0x585e(0x313)]?_0x5e8bf0=query(_0x476dca,orderBy('timestamp',_0x585e(0x3a4)),endBefore(eloHistoryPagination[_0x266d39]['firstVisible']),limitToLast(PAGE_SIZE)):_0x5e8bf0=query(_0x476dca,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x1cdf86=await getDocs(_0x5e8bf0);if(_0x1cdf86['empty']){_0x54ff77['innerHTML']=_0x585e(0x204),document['getElementById'](_0x266d39+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x266d39][_0x585e(0x187)]=_0x171ca6,eloHistoryPagination[_0x266d39][_0x585e(0x313)]=_0x1cdf86['docs'][0x0],eloHistoryPagination[_0x266d39]['lastVisible']=_0x1cdf86['docs'][_0x1cdf86['docs']['length']-0x1];const _0x4630bc=new Map();_0x54ff77['innerHTML']='';const _0x423add=async _0x4bcae1=>{const _0x3868c4=_0x585e;if(typeof _0x4bcae1!=='string'||_0x4bcae1['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x4bcae1))return _0x4bcae1;if(_0x4630bc['has'](_0x4bcae1))return _0x4630bc[_0x3868c4(0x3c5)](_0x4bcae1);try{for(const _0x37b9b9 of[_0x3868c4(0x32c),'playersD2',_0x3868c4(0x348),'nonParticipants']){const _0x38b787=await getDoc(doc(db,_0x37b9b9,_0x4bcae1));if(_0x38b787['exists']()&&_0x38b787['data']()['username']){const _0x4cb3c8=_0x38b787['data']()['username'];return _0x4630bc['set'](_0x4bcae1,_0x4cb3c8),_0x4cb3c8;}}return _0x4bcae1;}catch(_0x550943){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x4bcae1+':',_0x550943),_0x4bcae1;}};for(const _0x5c3d47 of _0x1cdf86['docs']){const _0x27bc99=_0x5c3d47['data'](),_0x51af5b=document['createElement']('tr'),_0x15ba37=_0x27bc99['timestamp']?new Date(_0x27bc99[_0x585e(0x169)]['seconds']*0x3e8)[_0x585e(0x1bf)]():'N/A',_0x7fab34=_0x27bc99[_0x585e(0x1a2)]-_0x27bc99[_0x585e(0x363)],_0x6f651f=_0x7fab34>0x0?'positive-change':_0x7fab34<0x0?'negative-change':'',_0x4a33fc=_0x7fab34>0x0?'+':'',_0x3e681b=_0x27bc99['player']||_0x27bc99['username']||_0x27bc99['userId']||_0x585e(0x218),_0x26b081=await _0x423add(_0x3e681b);_0x51af5b[_0x585e(0x310)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x15ba37+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x26b081+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x27bc99['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x27bc99[_0x585e(0x1a2)]||'N/A')+_0x585e(0x182)+_0x6f651f+'\x22>'+_0x4a33fc+_0x7fab34+_0x585e(0x27f)+formatHistoryType(_0x27bc99[_0x585e(0x2ec)])+_0x585e(0x224)+(_0x27bc99[_0x585e(0x324)]||_0x27bc99['promotedBy']||_0x27bc99[_0x585e(0x339)]||'System')+_0x585e(0x329),_0x54ff77['appendChild'](_0x51af5b);}document['getElementById'](_0x266d39+'-page-indicator')['textContent']='Page\x20'+_0x171ca6;const _0x4a1827=document['getElementById'](_0x266d39+'-prev-page'),_0xf4ea99=document['getElementById'](_0x266d39+'-next-page');if(_0x4a1827)_0x4a1827[_0x585e(0x231)]=_0x171ca6<=0x1;const _0x444c66=query(_0x476dca,orderBy('timestamp',_0x585e(0x3a4)),startAfter(eloHistoryPagination[_0x266d39]['lastVisible']),limit(0x1)),_0x1ce5db=await getDocs(_0x444c66);if(_0xf4ea99)_0xf4ea99[_0x585e(0x231)]=_0x1ce5db[_0x585e(0x318)];}catch(_0x32773b){console['error'](_0x585e(0x2a7),_0x32773b),_0x54ff77['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x32773b['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x8c6955){const _0x535f9e=a2_0x11de;switch(_0x8c6955){case'match_result':return'Match\x20Result';case'promotion':return'Promotion';case'demotion':return'Demotion';case _0x535f9e(0x21a):return'Admin\x20Adjustment';case _0x535f9e(0x20d):return'Initial\x20Placement';default:return _0x8c6955||_0x535f9e(0x1c6);}}function a2_0x11de(_0x18e3e8,_0x3174cd){const _0x1b59cc=a2_0x5ef7();return a2_0x11de=function(_0x4b4b54,_0x6d7dea){_0x4b4b54=_0x4b4b54-0x155;let _0x5ef7f5=_0x1b59cc[_0x4b4b54];return _0x5ef7f5;},a2_0x11de(_0x18e3e8,_0x3174cd);}function setupEloHistorySection(){const _0x342641=a2_0x11de;document[_0x342641(0x271)]('d1-prev-page')[_0x342641(0x17d)](_0x342641(0x386),()=>{const _0x2cc7e1=_0x342641;loadEloHistory(eloHistoryPagination['d1'][_0x2cc7e1(0x187)]-0x1);}),document[_0x342641(0x271)]('d1-next-page')[_0x342641(0x17d)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById'](_0x342641(0x1fa))[_0x342641(0x17d)]('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x342641(0x271)]('d2-next-page')['addEventListener'](_0x342641(0x386),()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x3f1c85=document[_0x342641(0x271)]('d3-prev-page'),_0x4d6465=document['getElementById']('d3-next-page');_0x3f1c85&&_0x3f1c85['addEventListener'](_0x342641(0x386),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x4d6465&&_0x4d6465['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x2c9261=document['getElementById'](_0x342641(0x264));_0x2c9261&&_0x2c9261[_0x342641(0x17d)]('input',debounce(filterEloHistoryTable,0x12c));const _0xb42b65=document['getElementById']('history-type-filter');_0xb42b65&&_0xb42b65[_0x342641(0x17d)]('change',applyEloHistoryFilters);const _0x2fd8de=document['getElementById']('reset-history-filters');_0x2fd8de&&_0x2fd8de['addEventListener'](_0x342641(0x386),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x3d28dd=a2_0x11de,_0x15e47f=document['getElementById'](_0x3d28dd(0x264))['value'][_0x3d28dd(0x326)](),_0x4cbfb8=document[_0x3d28dd(0x17e)]('#elo-history-table-body\x20tr');let _0x13367c=0x0;_0x4cbfb8[_0x3d28dd(0x186)](_0x4c3213=>{const _0x176f2a=_0x3d28dd;if(_0x4c3213['classList']['contains']('loading-cell')||_0x4c3213[_0x176f2a(0x34c)]['contains'](_0x176f2a(0x15f))||_0x4c3213[_0x176f2a(0x34c)]['contains'](_0x176f2a(0x1f6)))return;const _0x11ca07=_0x4c3213[_0x176f2a(0x1c7)](_0x176f2a(0x1f7))?.[_0x176f2a(0x2f4)]['toLowerCase']()||'',_0x1db1dd=_0x4c3213['querySelector'](_0x176f2a(0x298))?.['textContent'][_0x176f2a(0x326)]()||'',_0x38bbce=_0x4c3213['querySelector'](_0x176f2a(0x37b))?.['textContent']['toLowerCase']()||'';_0x11ca07[_0x176f2a(0x3b6)](_0x15e47f)||_0x1db1dd['includes'](_0x15e47f)||_0x38bbce[_0x176f2a(0x3b6)](_0x15e47f)?(_0x4c3213['style']['display']='',_0x13367c++):_0x4c3213['style']['display']=_0x176f2a(0x23c);});}async function applyEloHistoryFilters(){const _0x48cd68=a2_0x11de,_0x5db371=document['getElementById'](_0x48cd68(0x29a))['value'],_0x278984=document[_0x48cd68(0x271)](_0x48cd68(0x3b4))['value'],_0x569645=document['getElementById']('history-type-filter')['value'],_0x5a97e9=currentLadder['toLowerCase']();eloHistoryPagination[_0x5a97e9]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x5c8c1c=document['getElementById']('elo-history-table-body');_0x5c8c1c['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x1e6909=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x39f45a=collection(db,_0x1e6909);let _0x290f0f=[orderBy('timestamp','desc')];if(_0x5db371){const _0x162a12=new Date(_0x5db371);_0x162a12[_0x48cd68(0x31b)](0x0,0x0,0x0,0x0),_0x290f0f['push'](where(_0x48cd68(0x169),'>=',_0x162a12));}if(_0x278984){const _0x275c7b=new Date(_0x278984);_0x275c7b['setHours'](0x17,0x3b,0x3b,0x3e7),_0x290f0f['push'](where('timestamp','<=',_0x275c7b));}_0x569645&&_0x569645!=='all'&&_0x290f0f['push'](where('type','==',_0x569645));_0x290f0f['push'](limit(PAGE_SIZE));const _0x49897e=query(_0x39f45a,..._0x290f0f),_0x285715=await getDocs(_0x49897e);!_0x285715['empty']&&(eloHistoryPagination[_0x5a97e9][_0x48cd68(0x313)]=_0x285715[_0x48cd68(0x174)][0x0],eloHistoryPagination[_0x5a97e9]['lastVisible']=_0x285715[_0x48cd68(0x174)][_0x285715['docs']['length']-0x1]);_0x5c8c1c['innerHTML']='';if(_0x285715['empty']){_0x5c8c1c['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x285715['forEach'](_0x429d06=>{const _0x2bae58=_0x48cd68,_0x3b9f28=_0x429d06[_0x2bae58(0x18f)](),_0x1da176=document[_0x2bae58(0x1a1)]('tr'),_0x456c80=_0x3b9f28['timestamp']?new Date(_0x3b9f28['timestamp'][_0x2bae58(0x36a)]*0x3e8)[_0x2bae58(0x1bf)]():_0x2bae58(0x218),_0x540c98=_0x3b9f28['newElo']-_0x3b9f28[_0x2bae58(0x363)],_0x1624c4=_0x540c98>0x0?'positive-change':_0x540c98<0x0?'negative-change':'',_0x3c2c43=_0x540c98>0x0?'+':'',_0xcbd2dd=_0x3b9f28['player']||_0x3b9f28['username']||_0x3b9f28['userId']||'N/A';_0x1da176[_0x2bae58(0x310)]=_0x2bae58(0x377)+_0x456c80+_0x2bae58(0x1f1)+_0xcbd2dd+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x3b9f28['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x3b9f28[_0x2bae58(0x1a2)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x1624c4+'\x22>'+_0x3c2c43+_0x540c98+_0x2bae58(0x27f)+formatHistoryType(_0x3b9f28[_0x2bae58(0x2ec)])+_0x2bae58(0x224)+(_0x3b9f28['modifiedBy']||_0x3b9f28['promotedBy']||_0x3b9f28['demotedBy']||_0x2bae58(0x273))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5c8c1c['appendChild'](_0x1da176);}),document['getElementById'](_0x5a97e9+'-page-indicator')[_0x48cd68(0x2f4)]='Page\x201';}catch(_0x3a34b7){console['error'](_0x48cd68(0x2b1),_0x3a34b7),_0x5c8c1c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x3a34b7['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x2b9cbd=a2_0x11de;document['getElementById'](_0x2b9cbd(0x29a))['value']='',document['getElementById']('history-end-date')['value']='',document['getElementById']('history-type-filter')['value']='all',document[_0x2b9cbd(0x271)]('elo-history-search')[_0x2b9cbd(0x1ad)]='';const _0x126914=currentLadder['toLowerCase']();eloHistoryPagination[_0x126914]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x158223=a2_0x11de,_0x5d00a=document['getElementById'](_0x158223(0x26f)),_0x2c81e1=document['getElementById'](_0x158223(0x331)),_0x572b9f=document['getElementById']('promote-form');_0x5d00a&&_0x2c81e1&&_0x572b9f&&(_0x5d00a[_0x158223(0x17d)](_0x158223(0x386),()=>{const _0x2aaa2a=_0x158223;_0x2c81e1['classList']['add'](_0x2aaa2a(0x1df));}),_0x2c81e1[_0x158223(0x17d)]('click',_0x2ef17f=>{const _0x333419=_0x158223;_0x2ef17f['target']===_0x2c81e1&&_0x2c81e1['classList']['remove'](_0x333419(0x1df));}),_0x572b9f['addEventListener']('submit',async _0x5331cd=>{const _0x31ba82=_0x158223;_0x5331cd['preventDefault']();const _0x20dafd=document['getElementById']('promote-username'),_0xb5e1a3=document['getElementById']('promote-ladder'),_0x11accd=_0x20dafd['value'][_0x31ba82(0x32f)](),_0xb26af9=_0xb5e1a3['value'];if(!_0x11accd){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x11accd,_0xb26af9),_0x2c81e1['classList']['remove'](_0x31ba82(0x1df)),_0x20dafd[_0x31ba82(0x1ad)]='';}catch(_0x48c378){showNotification(_0x48c378[_0x31ba82(0x2d4)],_0x31ba82(0x3b0));}}),document['getElementById']('cancel-promote-btn')[_0x158223(0x17d)]('click',()=>{const _0x2dc404=_0x158223;_0x2c81e1['classList']['remove'](_0x2dc404(0x1df));}));const _0x2e4958=document['getElementById']('demote-player-btn'),_0x4eafd3=document['getElementById']('demote-modal'),_0x158b81=document['getElementById'](_0x158223(0x336));_0x2e4958&&_0x4eafd3&&_0x158b81&&(_0x2e4958[_0x158223(0x17d)]('click',()=>{const _0x4b68b9=_0x158223;_0x4eafd3['classList'][_0x4b68b9(0x1b8)](_0x4b68b9(0x1df));}),_0x4eafd3['addEventListener']('click',_0x449837=>{const _0x4bf565=_0x158223;_0x449837['target']===_0x4eafd3&&_0x4eafd3['classList']['remove'](_0x4bf565(0x1df));}),_0x158b81['addEventListener'](_0x158223(0x233),async _0x3fb02b=>{const _0xd9746b=_0x158223;_0x3fb02b['preventDefault']();const _0x29d1f6=document['getElementById']('demote-username'),_0x47bf1c=document['getElementById']('demote-ladder'),_0x3af8c6=_0x29d1f6['value']['trim'](),_0x171e41=_0x47bf1c['value'];if(!_0x3af8c6){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x3af8c6,_0x171e41),document[_0xd9746b(0x271)]('demote-modal')['classList'][_0xd9746b(0x25a)]('active'),document['getElementById']('demote-username')[_0xd9746b(0x1ad)]='';}catch(_0x311975){console['error'](_0xd9746b(0x342),_0x311975);}}));const _0x25004e=document['getElementById']('set-elo-btn'),_0x45d0fb=document['getElementById']('set-elo-modal'),_0x5acb16=document['getElementById']('set-elo-form');_0x25004e&&_0x45d0fb&&_0x5acb16&&(_0x25004e[_0x158223(0x17d)](_0x158223(0x386),()=>{const _0x389244=_0x158223;_0x45d0fb['classList'][_0x389244(0x1b8)]('active');}),_0x45d0fb['addEventListener'](_0x158223(0x386),_0x530875=>{const _0x4502ce=_0x158223;_0x530875['target']===_0x45d0fb&&_0x45d0fb[_0x4502ce(0x34c)][_0x4502ce(0x25a)]('active');}),_0x5acb16['addEventListener'](_0x158223(0x233),async _0x284869=>{const _0x5bd9f6=_0x158223;_0x284869[_0x5bd9f6(0x33b)]();const _0x5a0605=document['getElementById']('set-elo-username'),_0x1098e0=document['getElementById']('set-elo-value');let _0x3341ac;const _0x517caa=document['getElementById']('set-elo-ladder'),_0x30e2e9=document['querySelector'](_0x5bd9f6(0x243));if(_0x517caa)_0x3341ac=_0x517caa[_0x5bd9f6(0x1ad)];else _0x30e2e9?_0x3341ac=_0x30e2e9[_0x5bd9f6(0x1ad)]:_0x3341ac='D1';if(!_0x5a0605||!_0x1098e0){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x4f4b8b=_0x5a0605['value']['trim'](),_0x1b760f=parseInt(_0x1098e0['value']);if(!_0x4f4b8b||isNaN(_0x1b760f)){showNotification(_0x5bd9f6(0x30e),'error');return;}try{await setCustomElo(_0x4f4b8b,_0x1b760f,_0x3341ac),_0x45d0fb['classList']['remove']('active'),_0x5a0605[_0x5bd9f6(0x1ad)]='',_0x1098e0['value']='';}catch(_0x551810){showNotification(_0x551810[_0x5bd9f6(0x2d4)],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{const _0x1187e6=_0x158223;_0x45d0fb['classList'][_0x1187e6(0x25a)]('active');}));const _0x5966cc=document['getElementById']('set-role-modal'),_0x106934=document['getElementById']('set-role-form');if(_0x5966cc&&_0x106934){_0x5966cc[_0x158223(0x17d)](_0x158223(0x386),_0x5bb1d2=>{const _0x18958d=_0x158223;_0x5bb1d2[_0x18958d(0x347)]===_0x5966cc&&closeModalHandler();}),_0x106934['addEventListener']('submit',async _0x66d708=>{const _0x44e908=_0x158223;_0x66d708[_0x44e908(0x33b)]();const _0xcf1955=document['getElementById']('role-username'),_0x5b0de0=document['getElementById']('role-name'),_0x4cf83d=document['getElementById']('role-color'),_0x190d80=_0xcf1955['value']['trim'](),_0x2d9d22=_0x5b0de0['value'][_0x44e908(0x32f)](),_0x4bed24=_0x4cf83d['value'];if(!_0x190d80){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x190d80,_0x2d9d22,_0x4bed24),closeModalHandler(),loadUsersWithRoles();}catch(_0x3f7edc){}});const _0x3aea1c=document['getElementById']('cancel-role-btn');_0x3aea1c&&(_0x3aea1c['removeEventListener']('click',closeModalHandler),_0x3aea1c['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x5c530b,_0xa34bb6){const _0x1311fc=a2_0x11de;try{console['log'](_0x1311fc(0x281)+_0x5c530b+'\x20in\x20'+_0xa34bb6+'\x20ladder');const _0x410d84=auth['currentUser'];if(!_0x410d84)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x26ee63=_0xa34bb6==='D2'?_0x1311fc(0x1fc):'players',_0x45d794=_0xa34bb6==='D2'?_0x1311fc(0x37f):'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x26ee63);const _0x577116=collection(db,_0x26ee63),_0x193238=query(_0x577116,where(_0x1311fc(0x18c),'==',_0x5c530b)),_0x42f2f3=await getDocs(_0x193238);if(_0x42f2f3[_0x1311fc(0x318)]){alert('Player\x20not\x20found\x20in\x20'+_0xa34bb6+_0x1311fc(0x3b9));throw new Error(_0x1311fc(0x3ab)+_0xa34bb6+_0x1311fc(0x3b9));}const _0x7efb75=_0x42f2f3['docs'][0x0],_0x285960=_0x7efb75[_0x1311fc(0x18f)](),_0x5cc9f8=_0x285960['eloRating']||0x4b0,_0x3e01c8=_0x7efb75['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x5cc9f8);const _0x4c9020=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x90d89a=_0x4c9020['find'](_0x34ee97=>_0x34ee97[_0x1311fc(0x2f7)]>_0x5cc9f8);if(!_0x90d89a){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0xa34bb6+'\x20ladder');throw new Error(_0x1311fc(0x1fb)+_0xa34bb6+'\x20ladder');}console[_0x1311fc(0x2ef)]('Promoting\x20player\x20to\x20'+_0x90d89a['name']+'\x20('+_0x90d89a[_0x1311fc(0x2f7)]+')'),await updateDoc(doc(db,_0x26ee63,_0x7efb75['id']),{'eloRating':_0x90d89a['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x410d84['email']||_0x1311fc(0x237)}),await addDoc(collection(db,_0x45d794),{'player':_0x5c530b,'previousElo':_0x5cc9f8,'newElo':_0x90d89a['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x90d89a['name'],'promotedBy':_0x410d84['email']||_0x1311fc(0x237),'gameMode':_0xa34bb6});try{const {promotionManager:_0x2942fb}=await import('./promotions.js'),_0x3f7741=_0x2942fb['getRankName'](_0x5cc9f8),_0x397fe8=_0x90d89a['name'];await _0x2942fb['sendPromotionNotification'](_0x3e01c8,_0x5c530b,_0x5cc9f8,_0x90d89a['elo'],_0x3f7741,_0x397fe8,_0x1311fc(0x25f),{'displayName':_0x5c530b,'source':'admin','adminUser':_0x410d84['email'],'ladder':_0xa34bb6}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x5b3fd3){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x5b3fd3);}return alert('Successfully\x20promoted\x20'+_0x5c530b+_0x1311fc(0x39b)+_0x90d89a['name']+'\x20('+_0x90d89a['elo']+')'),currentLadder===_0xa34bb6&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x358340){console[_0x1311fc(0x3b0)](_0x1311fc(0x3b7),_0x358340),alert('Error\x20promoting\x20player:\x20'+_0x358340['message']);throw _0x358340;}}document['addEventListener']('DOMContentLoaded',()=>{const _0xe7f41e=a2_0x11de,_0x10ffe1=document['getElementById'](_0xe7f41e(0x170));_0x10ffe1&&_0x10ffe1['addEventListener']('submit',async _0x294a81=>{const _0x414199=_0xe7f41e;_0x294a81['preventDefault']();const _0x1d6fc1=document['getElementById']('promote-username')[_0x414199(0x1ad)][_0x414199(0x32f)](),_0x4d7db3=document['querySelector'](_0x414199(0x31d))['value'];if(!_0x1d6fc1){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x1d6fc1,_0x4d7db3),document[_0x414199(0x271)]('promote-modal')[_0x414199(0x34c)]['remove'](_0x414199(0x1df)),document[_0x414199(0x271)]('promote-username')['value']='';}catch(_0x1be427){console[_0x414199(0x3b0)]('Error\x20in\x20promotion:',_0x1be427);}});});async function demotePlayer(_0x158642,_0x517fb1){const _0x4de203=a2_0x11de;try{console['log'](_0x4de203(0x185)+_0x158642+'\x20in\x20'+_0x517fb1+'\x20ladder');const _0x3970b2=auth[_0x4de203(0x178)];if(!_0x3970b2)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x1b6ecc=_0x517fb1==='D2'?_0x4de203(0x1fc):'players',_0x3b0769=_0x517fb1==='D2'?'eloHistoryD2':_0x4de203(0x23a);console['log'](_0x4de203(0x22b)+_0x1b6ecc);const _0x4d88e8=collection(db,_0x1b6ecc),_0x4507f1=query(_0x4d88e8,where(_0x4de203(0x18c),'==',_0x158642)),_0x2806e1=await getDocs(_0x4507f1);if(_0x2806e1['empty']){alert(_0x4de203(0x3ab)+_0x517fb1+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x517fb1+'\x20ladder');}const _0x44c30b=_0x2806e1['docs'][0x0],_0x510113=_0x44c30b[_0x4de203(0x18f)](),_0x3efbeb=_0x510113['eloRating']||0x4b0;console[_0x4de203(0x2ef)](_0x4de203(0x33a)+_0x3efbeb);const _0x4f2205=[{'name':'Gold','elo':0x708},{'name':_0x4de203(0x23b),'elo':0x640},{'name':_0x4de203(0x171),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x2d751d=_0x4f2205['find'](_0x55921a=>_0x55921a[_0x4de203(0x2f7)]<_0x3efbeb);if(!_0x2d751d){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x517fb1+'\x20ladder');throw new Error(_0x4de203(0x34e)+_0x517fb1+_0x4de203(0x3b9));}console['log']('Demoting\x20player\x20to\x20'+_0x2d751d['name']+'\x20('+_0x2d751d['elo']+')'),await updateDoc(doc(db,_0x1b6ecc,_0x44c30b['id']),{'eloRating':_0x2d751d['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x3970b2['email']||_0x4de203(0x237)}),await addDoc(collection(db,_0x3b0769),{'player':_0x158642,'previousElo':_0x3efbeb,'newElo':_0x2d751d['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x2d751d['name'],'demotedBy':_0x3970b2['email']||'admin','gameMode':_0x517fb1});try{const {promotionManager:_0x2a9fad}=await import(_0x4de203(0x223)),_0x2b25d2=_0x2a9fad['getRankName'](_0x3efbeb),_0x44434e=_0x2d751d[_0x4de203(0x163)];await _0x2a9fad['sendPromotionNotification'](_0x44c30b['id'],_0x158642,_0x3efbeb,_0x2d751d['elo'],_0x2b25d2,_0x44434e,'demotion',{'displayName':_0x158642,'source':'admin','adminUser':_0x3970b2['email'],'ladder':_0x517fb1}),console['log'](_0x4de203(0x344));}catch(_0x114797){console[_0x4de203(0x3b0)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x114797);}return alert('Successfully\x20demoted\x20'+_0x158642+'\x20to\x20'+_0x2d751d['name']+'\x20('+_0x2d751d['elo']+')'),currentLadder===_0x517fb1&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x45974c){console['error']('Error\x20demoting\x20player:',_0x45974c),alert(_0x4de203(0x30a)+_0x45974c['message']);throw _0x45974c;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x3696ed=a2_0x11de,_0x1af910=document['getElementById']('demote-form');_0x1af910&&_0x1af910[_0x3696ed(0x17d)]('submit',async _0x1a1949=>{const _0x4a49a5=_0x3696ed;_0x1a1949['preventDefault']();const _0x472707=document['getElementById']('demote-username')['value']['trim'](),_0x17dfaf=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x472707){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x472707,_0x17dfaf),document[_0x4a49a5(0x271)](_0x4a49a5(0x15c))['classList']['remove']('active'),document[_0x4a49a5(0x271)](_0x4a49a5(0x25e))[_0x4a49a5(0x1ad)]='';}catch(_0xca7a5d){console['error']('Error\x20in\x20demotion:',_0xca7a5d);}});});async function setCustomElo(_0x300923,_0x5c7917,_0x4401e8){const _0x1b8e35=a2_0x11de;try{const _0x21f02e=auth['currentUser'];if(!_0x21f02e||!isAdmin(_0x21f02e['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x479036=_0x4401e8==='D2'?'playersD2':'players',_0x5d77f5=_0x4401e8==='D2'?'eloHistoryD2':'eloHistory',_0x1d2539=collection(db,_0x479036),_0x126f19=query(_0x1d2539,where('username','==',_0x300923)),_0x351f3d=await getDocs(_0x126f19);if(_0x351f3d['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x4401e8+'\x20ladder');const _0x35494f=_0x351f3d[_0x1b8e35(0x174)][0x0],_0x1a4f2e=_0x35494f[_0x1b8e35(0x18f)](),_0x2b4a62=_0x1a4f2e['eloRating']||0x4b0,_0x3cd941=writeBatch(db);_0x3cd941['update'](doc(db,_0x479036,_0x35494f['id']),{'eloRating':_0x5c7917,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x21f02e['email']});const _0x569e6b=doc(collection(db,_0x5d77f5));return _0x3cd941['set'](_0x569e6b,{'player':_0x300923,'previousElo':_0x2b4a62,'newElo':_0x5c7917,'timestamp':serverTimestamp(),'type':_0x1b8e35(0x21a),'modifiedBy':_0x21f02e['email'],'gameMode':_0x4401e8}),await _0x3cd941['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x300923+'\x20was\x20updated\x20from\x20'+_0x2b4a62+'\x20to\x20'+_0x5c7917,'success'),currentLadder===_0x4401e8&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0xddc5b8){console[_0x1b8e35(0x3b0)]('Error\x20setting\x20custom\x20ELO:',_0xddc5b8);throw _0xddc5b8;}}async function setUserRole(_0x546198,_0x1e1b04,_0x5e1fbf){const _0x252a98=a2_0x11de;try{const _0x46b3eb=auth['currentUser'];if(!_0x46b3eb||!isAdmin(_0x46b3eb['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x163d27=_0x1e1b04?_0x1e1b04['trim']():null,_0x4746ed=_0x163d27?_0x5e1fbf||'#808080':null,[_0x7146ab,_0x2813fc]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x252a98(0x18c),'==',_0x546198))),getDocs(query(collection(db,_0x252a98(0x1fc)),where('username','==',_0x546198)))]),_0x5bf2b3=[];if(!_0x7146ab[_0x252a98(0x318)])_0x5bf2b3[_0x252a98(0x1c5)]({'ref':_0x7146ab[_0x252a98(0x174)][0x0][_0x252a98(0x1a3)],'source':'D1'});if(!_0x2813fc['empty'])_0x5bf2b3[_0x252a98(0x1c5)]({'ref':_0x2813fc[_0x252a98(0x174)][0x0]['ref'],'source':'D2'});if(_0x5bf2b3['length']===0x0){const [_0x4e3102,_0x292421]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where(_0x252a98(0x18c),'==',_0x546198))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x546198)))]);if(!_0x4e3102['empty'])_0x5bf2b3['push']({'ref':_0x4e3102['docs'][0x0][_0x252a98(0x1a3)],'source':_0x252a98(0x24c)});if(!_0x292421['empty'])_0x5bf2b3['push']({'ref':_0x292421['docs'][0x0][_0x252a98(0x1a3)],'source':'UserProfile'});}if(_0x5bf2b3['length']===0x0)throw new Error(_0x252a98(0x225)+_0x546198+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x38d2c9=writeBatch(db);_0x5bf2b3['forEach'](_0x6b8609=>{const _0x7694a1=_0x252a98;console[_0x7694a1(0x2ef)]('Updating\x20role\x20for\x20'+_0x546198+_0x7694a1(0x327)+_0x6b8609['source']),!_0x163d27?_0x38d2c9[_0x7694a1(0x369)](_0x6b8609[_0x7694a1(0x1a3)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x38d2c9[_0x7694a1(0x369)](_0x6b8609['ref'],{'roleName':_0x163d27,'roleColor':_0x4746ed,'roleAssignedBy':_0x46b3eb['email'],'roleAssignedAt':serverTimestamp()});}),await _0x38d2c9['commit']();const _0x4938e3=_0x163d27?_0x252a98(0x2d2)+_0x163d27+'\x22\x20set':_0x252a98(0x1ee);return showNotification(_0x4938e3+'\x20for\x20user\x20\x22'+_0x546198+'\x22',_0x252a98(0x1d9)),!![];}catch(_0x37a5c3){console['error']('Error\x20setting\x20user\x20role:',_0x37a5c3),showNotification('Error:\x20'+_0x37a5c3['message'],'error');throw _0x37a5c3;}}function showNotification(_0x2d4448,_0x1bbc60=a2_0x31cce1(0x2b9)){const _0x1ed80b=a2_0x31cce1,_0x2546ca=document[_0x1ed80b(0x1a1)]('div');_0x2546ca[_0x1ed80b(0x354)]='notification\x20'+_0x1bbc60,_0x2546ca['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x1bbc60)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x2d4448+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x2546ca),setTimeout(()=>{const _0x1eb694=_0x1ed80b;_0x2546ca['classList'][_0x1eb694(0x1b8)](_0x1eb694(0x1df));},0xa);const _0x3e99f0=setTimeout(()=>{closeNotification(_0x2546ca);},0x1388);_0x2546ca['querySelector'](_0x1ed80b(0x2e6))['addEventListener']('click',()=>{clearTimeout(_0x3e99f0),closeNotification(_0x2546ca);});}function a2_0x5ef7(){const _0x200c4b=['toLocaleDateString','activity','Create\x20New\x20','Error\x20loading\x20points\x20overview:','Found\x20radio\x20with\x20value:','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','demote-modal','Simple\x20test\x20match\x20created\x20by\x20admin\x20','fa-check-circle','empty-state','hidden','Bulk\x20award:\x20','article-id','name','table','unknown','Failed\x20to\x20load\x20user\x20data:\x20','edit-match-map','data-ladder','timestamp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','achievement-type','articles','level','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','\x20history\x20entries\x20for\x20user\x20','promote-form','Bronze','Player\x20Achievement','points-overview-table-body','docs','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','User\x20not\x20found','add-player-form','currentUser','RejectedD1','Loser\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','Article\x20not\x20found','addEventListener','querySelectorAll','Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!','dashboard','email','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','pending-count','No\x20position\x20changes\x20needed.','Attempting\x20to\x20demote\x20','forEach','page','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','then','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','username','subtract','bind','data','match-count','.delete-match-btn','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','Unknown\x20Admin','\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','Error\x20saving\x20highlight:','highlight-match-date','Setting\x20up\x20Manage\x20Highlights\x20section','add-new-role-btn','Simple\x20test\x20match\x20created\x20successfully','Error\x20loading\x20matches:','search-ribbon-user-btn','Error\x20fetching\x20matches\x20for\x20','src','Error\x20loading\x20players:','\x20Exists','createElement','newElo','ref','keys','inactive-players-search','\x22\x20data-ladder=\x22','highlight-video-container','Modal\x20should\x20now\x20be\x20visible','creatorImageUrl','exists','\x20(winner)\x20vs\x20','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','value','image','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','winnerName','No\x20ELO\x20history\x20found\x20for\x20player\x20','data-section','ribbon-user-search','loserName','Firebase\x20connection\x20test\x20failed:','{}.constructor(\x22return\x20this\x22)(\x20)','matches-next-page','add','map','current-ribbons-list','highlight-loser-score','highlight-creator-image','matches-page-indicator','cells','toLocaleString','Create\x20test\x20match\x20form\x20not\x20found','new-player-elo','matchId','match-row','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','push','Unknown','querySelector','Found\x20user\x20in\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20','stopPropagation','rgba(255,\x20193,\x207,\x200.1)','Attaching\x20background\x20click\x20listener.','W\x20/\x20','\x20Missing','.delete-highlight-btn','.close-btn','checked','\x20-\x20Feature\x20coming\x20soon','Error\x20loading\x20article\x20data:','Loading\x20players\x20from\x20','.ladder-switch\x20input[value=\x22D1\x22]','bulk-award-points-btn','no-results','common','success','reason','rgba(25,\x20118,\x20210,\x200.7)','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','confirm-resimulate-btn','Error\x20modifying\x20points:','active','Deleting\x20match\x20','href','roleColor','filter','videoId','daysSinceMatch','points-history-table-body','allUsersPoints','Loading...','matches-end-date','Error\x20loading\x20match\x20data:','Article\x20deleted\x20successfully','matchDate','Points\x20field\x20initialized\x20for\x20','Role\x20removed','approvedMatchesD2','removeEventListener','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','Non-Participant','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','createdAt','error-state','.player','highlight-player-profile','lastVisible','d2-prev-page','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','playersD2','loading','pendingResimulateData','Remove\x20','\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20','load-trophies-data','title','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','highlight-modal-title','lastUpdated','toDate','\x20points\x20history\x20entries','Error\x20loading\x20trophies:','\x20view\x20history\x20buttons','trophy-preview-img','Sunday','initial_placement','match','selected-user-points','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','D3\x20Players','assign-trophy-rarity','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20','#d32f2f','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','User\x20Profiles','N/A','img','admin_modification','onerror','mapVersion','setDate','MAX_SAFE_INTEGER','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','quick-edit-email','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','edit-highlight-matchDate-input','./promotions.js','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','User\x20\x22','cloneNode','\x20total\x20matches\x20across\x20all\x20ladders','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','Found\x20','Searching\x20for\x20player\x20in\x20','console','quick-edit-points-form','add-ribbon-form','TestWinner','#players.content-section.active','disabled','points-asc','submit','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','article-form','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','admin','load-articles-data','from','eloHistory','Silver','none','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','manage-trophies','create-creator-highlight-btn','manage-highlights','position','quick-points-amount','input[name=\x22set-elo-ladder\x22]:checked','loserSuicides','cancel-trophy-btn',').\x20','name-asc','Error\x20updating\x20points:','userAllowedTabs','.view-player-btn','Error\x20opening\x20edit\x20modal:','NonParticipant','.edit-ribbons-btn','Failed\x20to\x20update\x20points:\x20','onAuthStateChanged','rejected-count','#highlight-modal\x20.close-btn','Match\x20ID\x20or\x20ladder\x20missing','role-filter','article-author','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','.quick-edit-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','set','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','remove','lastPointsModified','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','selected-user-id','demote-username','promotion','user-search','test-match-winner-username','achievementImageUrl','Complete!\x20Awarded\x20','elo-history-search','edit-match-loser-comment','wins','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','color','highlight-form','trace','Looking\x20for\x20user\x20role\x20information\x20for\x20','manage-levels-ribbons','users-table-body','promote-player-btn','manage-matches','getElementById','Please\x20enter\x20a\x20valid\x20username','System','Load\x20players\x20data\x20clicked','create-new-article-btn','approvedAt','Error\x20adding\x20ribbon','Error\x20loading\x20highlights:','edit-match-loser-suicides','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','points-action','resimulate-match-btn','article-title','Create\x20test\x20match\x20form\x20submitted','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','matches-start-date','Attempting\x20to\x20promote\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','.nav-item','\x20(based\x20on\x20data-role:\x20','highlight-creator-image-container','demoLink','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','points-reason','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','Found\x20specific\x20role:\x20','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','winnerScore','\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?','achievementDetails','validation-results-container','updatedAt','Awarded\x20','Gold','apply','Featured\x20Creator','Player\x20not\x20found','.loading-cell','roleAssignedAt','.type','trophy-rarity','history-start-date','high-points','\x20allowed\x20tabs:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','assign-trophy-form','winnerSuicides','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>','uid','trophy-modal','Setting\x20up\x20Manage\x20Matches\x20section','\x20not\x20found.','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','matchInfo','Error\x20loading\x20ELO\x20history:','loss','mapCreator','highlight-match-date-container','inactive-players','Error\x20loading\x20dashboard\x20data:','delete-match-confirm-modal','player-count','delete-match-summary','highlight-description','Error\x20applying\x20filters:','Using\x20collections\x20for\x20','#users-table-body\x20tr[data-username=\x22','#create-test-match-form','\x20<span\x20class=\x22user-source\x22>(','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','playerRibbonsD3','split','info','edit-highlight-title-input','No\x20player\x20selected','Edit\x20','fa-info-circle','cancel-quick-edit','visibility','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','edit-highlight-description-input','\x20quick\x20edit\x20buttons','manage-ribbons','rarity','trophy-image-url','dataset','\x20total\x20players\x20in\x20the\x20','substring','highlight-video-id','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','Error\x20deleting\x20player:','Modal\x20closed','imageUrl','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','closest','Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','Error\x20saving\x20highlight:\x20','Role\x20\x22','This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?','message','create-test-match-form','trophyDefinitions','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Points\x20updated\x20successfully','highlight-achievement-player-container','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','Create\x20Article','playerRibbonsD2','highlight-map-container','input','5px','assign-trophy-id','View\x20player\x20details\x20for\x20','player-search','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','openResimulateModal','Bulk\x20award:','.close-notification','User\x20','style','points-amount','block','0.6','type','__proto__','destroy','log','Error\x20removing\x20ribbon:','Error\x20loading\x20ribbons:','achievementType','highlight-title','textContent','highlight-description-container','Player\x20updated\x20successfully','elo','Error\x20resimulating\x20match:','matchLink','points-management-forms','Error','roleAssignedBy','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','length','Load\x20highlights\x20data\x20clicked','Failed\x20to\x20load\x20match\x20data','\x20from\x20','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','Committing\x20batch\x20update\x20for\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','div','lastMatch','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','loserId','Error\x20demoting\x20player:\x20','Unknown\x20Player','display',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Please\x20enter\x20valid\x20username\x20and\x20ELO','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','innerHTML','rankDistribution','assign-trophy-modal','firstVisible','Test\x20match','.edit-role-btn','\x20-\x20','paste','empty','pointsHistory','articles-table-body','setHours','user-roles-section','input[name=\x22promote-ladder\x22]:checked','load-players-data','set-role-modal','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','values','creator','modifiedBy','amount','toLowerCase','\x20in\x20','edit-match-winner-suicides','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','catch','localeCompare','players','role','edit-match-winner-comment','trim','Enter','promote-modal','winnerUsername','15px','mapName','join','demote-form','Create\x20New\x20Trophy','load-matches-data','demotedBy','Found\x20player\x20with\x20current\x20ELO:\x20','preventDefault','edit-player-modal','create-achievement-highlight-btn','.error-state','Query\x20created:','highlight-map-version','achievementPlayer','Error\x20in\x20demotion:','ribbon-type-select','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','roleName','selected-user-info','target','playersD3','\x20vs\x20','edit-highlight-loserName-input','create-new-trophy-btn','classList','edit-highlight-type-select','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','Failed\x20to\x20assign\x20trophy:\x20','startDate','loserUsername','Modal\x20computed\x20styles:','Map\x20Creator\x20is\x20required','className','trophy-modal-title','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','load-dashboard-data','<span\x20class=\x22no-role\x22>None</span>','previousPoints','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','.ladder-switch\x20input','article-content','manage-players','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','edit-highlight-matchInfo-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','Title\x20is\x20required','has','previousElo','quick-edit-points-modal','#1976d2','createdBy','ribbons','Player\x20Name\x20is\x20required','update','seconds','achievement','ladder','You\x20must\x20be\x20logged\x20in','Unknown\x20User','loserScore','#ffffff','assign-trophy-name','elo-history','cancel-assign-btn','Error\x20loading\x20articles:','Store\x20item\x20awarded\x20successfully','highlight-match-link','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','load-inactive-players-data','trophy-id','matches-search','.admin-action','highlight-title-container','warn','Error\x20loading\x20users:','eloHistoryD2','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','\x20D3\x20pilots','highlight-achievement-image','.empty-state','Trophy\x20updated\x20successfully','reset','click','displayName','trophy-rarity\x20','change','newPoints','resimulate-modal','mapPlayed','author','all','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20','Unranked','non-participant','RejectedD3','Error\x20deleting\x20highlight:\x20','test-match-date','currentTarget','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','match-details-container','medium-points','\x20with\x20ELO\x20','highlight-player-profile-container','\x20to\x20','eloHistoryD3','resimulate-match-id','Adding\x20player\x20','approvedMatches','data-match-id','points','\x20points','edit-match-loser','desc','eloRating','\x22\x20not\x20found\x20in\x20','Please\x20fill\x20all\x20fields','highlights','You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','Error\x20searching\x20user:','Player\x20not\x20found\x20in\x20','appendChild','Cancel\x20button\x20not\x20found','edit-match-ladder','highlight-players-container','error','Error\x20opening\x20quick\x20edit\x20modal:','Error\x20loading\x20points\x20data:','userProfiles','history-end-date','.sidebar-nav\x20.nav-item[data-section=\x22','includes','Error\x20promoting\x20player:','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','\x20ladder','playerId','opacity','size','Match\x20deleted\x20successfully','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','approvedMatchesD3','toString','Failed\x20to\x20delete\x20trophy:\x20','#50C878','Achievement\x20highlight\x20button\x20clicked','endDate','get','No\x20description','highlight-submitted-by'];a2_0x5ef7=function(){return _0x200c4b;};return a2_0x5ef7();}function getNotificationIcon(_0x3dfb72){const _0x317453=a2_0x31cce1;switch(_0x3dfb72){case'success':return _0x317453(0x15e);case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case'info':default:return _0x317453(0x2bd);}}function closeNotification(_0x3c4d49){const _0x565111=a2_0x31cce1;_0x3c4d49[_0x565111(0x34c)]['remove'](_0x565111(0x1df)),setTimeout(()=>{_0x3c4d49['remove']();},0x12c);}function setupUserRolesSection(){const _0x3a9b5e=a2_0x31cce1,_0xfb08d3=document['getElementById']('load-users-data');_0xfb08d3&&_0xfb08d3['addEventListener']('click',function(){this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x2cad57=>{const _0x5c01c4=a2_0x11de;console['error']('Error\x20loading\x20users:',_0x2cad57),this[_0x5c01c4(0x34c)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x7c1269=_0x5c01c4;this['innerHTML']=_0x7c1269(0x356);},0xbb8);});});const _0x5ea992=document['getElementById'](_0x3a9b5e(0x199));_0x5ea992&&_0x5ea992['addEventListener']('click',()=>{const _0x5609c2=_0x3a9b5e,_0x970938=document['getElementById'](_0x5609c2(0x31f));_0x970938&&_0x970938['classList']['add'](_0x5609c2(0x1df));});const _0x5047e9=document['getElementById']('user-search');_0x5047e9&&_0x5047e9['addEventListener'](_0x3a9b5e(0x2de),debounce(filterUsersTable,0x12c));const _0x4d18ec=document[_0x3a9b5e(0x271)]('role-filter');_0x4d18ec&&_0x4d18ec[_0x3a9b5e(0x17d)]('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x15fb4f=a2_0x31cce1,_0x7471b9=document[_0x15fb4f(0x271)]('users-table-body');if(!_0x7471b9)return;_0x7471b9[_0x15fb4f(0x310)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x1d0d5f,_0x5a34e0,_0x3b0637,_0x265055]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,_0x15fb4f(0x1fc))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,_0x15fb4f(0x3b3)))]),_0x50bb75=new Map();function _0xf5d686(_0x516df2,_0x132d13){_0x516df2['forEach'](_0x130346=>{const _0x2df10e=a2_0x11de,_0x162619=_0x130346['data']();if(!_0x162619['username'])return;if(!_0x50bb75[_0x2df10e(0x362)](_0x162619['username']))_0x50bb75['set'](_0x162619[_0x2df10e(0x18c)],{'username':_0x162619['username'],'roleName':_0x162619['roleName']||null,'roleColor':_0x162619[_0x2df10e(0x1e2)]||null,'roleAssignedBy':_0x162619[_0x2df10e(0x2fc)]||null,'roleAssignedAt':_0x162619['roleAssignedAt']||null,'sources':[_0x132d13]});else{const _0x2333c6=_0x50bb75['get'](_0x162619['username']);_0x162619['roleName']&&(!_0x2333c6['roleName']||_0x132d13==='D1'||_0x132d13==='D2')&&(_0x2333c6['roleName']=_0x162619[_0x2df10e(0x345)],_0x2333c6['roleColor']=_0x162619['roleColor'],_0x2333c6['roleAssignedBy']=_0x162619[_0x2df10e(0x2fc)],_0x2333c6[_0x2df10e(0x297)]=_0x162619[_0x2df10e(0x297)]),!_0x2333c6['sources']['includes'](_0x132d13)&&_0x2333c6['sources']['push'](_0x132d13);}});}_0xf5d686(_0x1d0d5f,'D1'),_0xf5d686(_0x5a34e0,'D2'),_0xf5d686(_0x3b0637,_0x15fb4f(0x1f2)),_0xf5d686(_0x265055,'Profile');const _0xc6eb66=Array['from'](_0x50bb75['values']())['sort']((_0x464e74,_0x5146ff)=>_0x464e74['username']['localeCompare'](_0x5146ff[_0x15fb4f(0x18c)]));if(_0xc6eb66['length']===0x0){_0x7471b9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x7471b9['innerHTML']='',_0xc6eb66[_0x15fb4f(0x186)](_0x9be941=>{const _0x38030f=_0x15fb4f,_0x1c6d49=document[_0x38030f(0x1a1)]('tr');_0x1c6d49[_0x38030f(0x2c6)][_0x38030f(0x18c)]=_0x9be941[_0x38030f(0x18c)],_0x1c6d49[_0x38030f(0x2c6)]['roleName']=_0x9be941['roleName']||'',_0x1c6d49[_0x38030f(0x2c6)]['roleColor']=_0x9be941['roleColor']||'#808080';const _0x2be850=_0x9be941['roleAssignedAt']?new Date(_0x9be941['roleAssignedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x5e475b=_0x9be941['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x9be941['roleColor']+';\x20color:\x20'+getContrastColor(_0x9be941[_0x38030f(0x1e2)])+';\x22>'+_0x9be941[_0x38030f(0x345)]+'</span>':_0x38030f(0x358);_0x1c6d49['innerHTML']=_0x38030f(0x2d7)+_0x9be941['username']+_0x38030f(0x2b5)+_0x9be941['sources'][_0x38030f(0x335)](',\x20')+_0x38030f(0x30d)+_0x5e475b+_0x38030f(0x188)+(_0x9be941['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2be850+_0x38030f(0x195)+_0x9be941['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x9be941['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x9be941['username']+_0x38030f(0x216):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x7471b9[_0x38030f(0x3ac)](_0x1c6d49);}),document[_0x15fb4f(0x17e)](_0x15fb4f(0x315))['forEach'](_0x2007e0=>{const _0x11f563=_0x15fb4f;_0x2007e0['addEventListener'](_0x11f563(0x386),()=>{const _0x3c2dfc=_0x2007e0['dataset']['username'];openRoleEditModal(_0x3c2dfc);});}),document['querySelectorAll']('.remove-role-btn')[_0x15fb4f(0x186)](_0x1c9d7a=>{_0x1c9d7a['addEventListener']('click',()=>{const _0x37c2e4=_0x1c9d7a['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x37c2e4+'?')&&setUserRole(_0x37c2e4,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x2f5885=>console['error']('Error\x20removing\x20role:',_0x2f5885));});});}catch(_0x370f7d){console[_0x15fb4f(0x3b0)](_0x15fb4f(0x37e),_0x370f7d),_0x7471b9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x186fe8){const _0x211274=a2_0x31cce1;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x186fe8);const _0x22eb05=document['getElementById'](_0x211274(0x31f)),_0x59c393=document[_0x211274(0x271)]('role-username'),_0x568ea1=document['getElementById']('user-role');if(!_0x22eb05){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x22eb05);_0x59c393?(_0x59c393['value']=_0x186fe8,console[_0x211274(0x2ef)]('Username\x20input\x20set\x20to:\x20'+_0x186fe8)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0xd9a5c4=document[_0x211274(0x1c7)](_0x211274(0x2b3)+_0x186fe8+'\x22]');if(_0xd9a5c4&&_0x568ea1){const _0x1be5ac=_0xd9a5c4[_0x211274(0x2c6)]['role'];_0x568ea1['value']=_0x1be5ac==='none'?'':_0x1be5ac,console[_0x211274(0x2ef)]('Role\x20select\x20set\x20to:\x20'+_0x568ea1['value']+_0x211274(0x284)+_0x1be5ac+')');}else{if(!_0xd9a5c4)console['warn']('Table\x20row\x20for\x20user\x20'+_0x186fe8+_0x211274(0x2a4));if(!_0x568ea1)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x568ea1)_0x568ea1['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x22eb05['classList'][_0x211274(0x1b8)]('active');const _0x2786a2=document[_0x211274(0x271)]('cancel-role-btn');_0x2786a2?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x2786a2['removeEventListener']('click',closeModalHandler),_0x2786a2[_0x211274(0x17d)]('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log'](_0x211274(0x1cc)),_0x22eb05[_0x211274(0x1f0)]('click',closeModalBackgroundHandler),_0x22eb05['addEventListener'](_0x211274(0x386),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x100ccb){_0x100ccb['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x1271f8=a2_0x31cce1,_0x227352=document['getElementById'](_0x1271f8(0x31f));_0x227352&&(_0x227352['classList'][_0x1271f8(0x25a)](_0x1271f8(0x1df)),_0x227352[_0x1271f8(0x1f0)](_0x1271f8(0x386),closeModalBackgroundHandler));}function filterUsersTable(){const _0x3a974a=a2_0x31cce1,_0x10c258=document['getElementById'](_0x3a974a(0x260))?.['value'][_0x3a974a(0x326)]()||'',_0x3cd579=document['getElementById'](_0x3a974a(0x253))?.['value']||'all',_0x600934=document[_0x3a974a(0x17e)]('#users-table-body\x20tr');let _0x508c0d=0x0;_0x600934['forEach'](_0x5008eb=>{const _0x5cebc1=_0x3a974a;if(_0x5008eb['querySelector'](_0x5cebc1(0x296))||_0x5008eb['querySelector'](_0x5cebc1(0x383))||_0x5008eb['querySelector'](_0x5cebc1(0x33e)))return;const _0x42315d=_0x5008eb['dataset']['username']?.['toLowerCase']()||'',_0xcc0609=_0x5008eb[_0x5cebc1(0x2c6)]['role']||'none',_0xb95ade=_0x42315d['includes'](_0x10c258),_0xc519f5=_0x3cd579==='all'||_0xcc0609===_0x3cd579;_0xb95ade&&_0xc519f5?(_0x5008eb['style'][_0x5cebc1(0x30c)]='',_0x508c0d++):_0x5008eb['style']['display']='none';});if(_0x508c0d===0x0&&_0x600934[_0x3a974a(0x2fe)]>0x0){const _0x5d45af=document[_0x3a974a(0x271)](_0x3a974a(0x26e));if(_0x5d45af){if(!_0x5d45af['querySelector']('.no-results')){const _0x444ad0=document['createElement']('tr');_0x444ad0['classList']['add']('no-results'),_0x444ad0[_0x3a974a(0x310)]='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x5d45af['appendChild'](_0x444ad0);}}}else{const _0x28f5d7=document[_0x3a974a(0x1c7)]('.no-results');_0x28f5d7&&_0x28f5d7['remove']();}}function setupManageArticlesSection(){const _0x36dc62=a2_0x31cce1,_0x17da11=document[_0x36dc62(0x271)]('load-articles-data');_0x17da11&&_0x17da11['addEventListener']('click',function(){const _0x4b7aae=_0x36dc62;this[_0x4b7aae(0x34c)]['add'](_0x4b7aae(0x1fd)),this['innerHTML']=_0x4b7aae(0x380),loadArticles()['then'](()=>{const _0x42b9d0=_0x4b7aae;this['classList']['remove']('loading'),this[_0x42b9d0(0x310)]=_0x42b9d0(0x210);})['catch'](_0x209d01=>{console['error']('Error\x20loading\x20articles:',_0x209d01),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x35cfb1=a2_0x11de;this[_0x35cfb1(0x310)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x40603c=document[_0x36dc62(0x271)](_0x36dc62(0x275));_0x40603c?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x40603c['style']['display']='block',_0x40603c['addEventListener']('click',()=>{openArticleModal();})):console[_0x36dc62(0x3b0)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x275b4a=document['getElementById'](_0x36dc62(0x235));_0x275b4a&&_0x275b4a[_0x36dc62(0x17d)](_0x36dc62(0x233),_0x372378=>{const _0x227045=_0x36dc62;_0x372378[_0x227045(0x33b)](),saveArticle();});const _0x3c590f=document[_0x36dc62(0x271)]('cancel-article-btn');_0x3c590f&&_0x3c590f['addEventListener'](_0x36dc62(0x386),()=>{closeArticleModal();});const _0x52256a=document['querySelector']('#article-modal\x20.close-btn');_0x52256a&&_0x52256a[_0x36dc62(0x17d)]('click',()=>{closeArticleModal();});const _0x392d17=document['getElementById']('article-modal');_0x392d17&&_0x392d17['addEventListener']('click',_0x4ebaf8=>{_0x4ebaf8['target']===_0x392d17&&closeArticleModal();});}async function loadArticles(){const _0x544f36=a2_0x31cce1,_0x35f065=document['getElementById'](_0x544f36(0x31a));if(!_0x35f065)return;_0x35f065['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x5c3de9=collection(db,'articles'),_0x59b3c1=query(_0x5c3de9,orderBy('createdAt',_0x544f36(0x3a4))),_0x270962=await getDocs(_0x59b3c1);if(_0x270962['empty']){_0x35f065['innerHTML']=_0x544f36(0x2ca);return;}_0x35f065[_0x544f36(0x310)]='',_0x270962['forEach'](_0x204a4b=>{const _0x442096=_0x544f36,_0xa07612=_0x204a4b['data'](),_0xe2082c=document['createElement']('tr'),_0x15338b=_0xa07612[_0x442096(0x1f5)]?new Date(_0xa07612[_0x442096(0x1f5)][_0x442096(0x36a)]*0x3e8)['toLocaleString']():'N/A';_0xe2082c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xa07612['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xa07612[_0x442096(0x38d)]||_0x442096(0x1c6))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x15338b+_0x442096(0x35a)+_0x204a4b['id']+_0x442096(0x2b6)+_0x204a4b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x35f065[_0x442096(0x3ac)](_0xe2082c);}),setupArticleActionButtons();}catch(_0x1cb499){console['error']('Error\x20loading\x20articles:',_0x1cb499),_0x35f065['innerHTML']=_0x544f36(0x1c9)+_0x1cb499[_0x544f36(0x2d4)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){document['querySelectorAll']('.edit-article-btn')['forEach'](_0x38235d=>{_0x38235d['addEventListener']('click',async _0xacf376=>{const _0x522cc9=a2_0x11de,_0x52c238=_0xacf376['currentTarget'][_0x522cc9(0x2c6)]['id'];openArticleModal(_0x52c238);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x55a279=>{const _0x37f298=a2_0x11de;_0x55a279[_0x37f298(0x17d)]('click',async _0x41777a=>{const _0x2e4e48=_0x37f298,_0x44cb2a=_0x41777a['currentTarget'][_0x2e4e48(0x2c6)]['id'];confirmDeleteArticle(_0x44cb2a);});});}function openArticleModal(_0xf4e3c2=null){const _0x9d5737=a2_0x31cce1,_0x2bb1b0=document['getElementById']('article-modal'),_0x294813=document['getElementById']('article-modal-title'),_0x3cecf6=document[_0x9d5737(0x271)](_0x9d5737(0x235)),_0x52ee83=document['getElementById']('article-id');_0x3cecf6['reset'](),_0x52ee83['value']='';if(_0xf4e3c2)_0x294813[_0x9d5737(0x2f4)]='Edit\x20Article',_0x52ee83[_0x9d5737(0x1ad)]=_0xf4e3c2,loadArticleData(_0xf4e3c2);else{_0x294813['textContent']=_0x9d5737(0x2db);const _0x257dc9=auth['currentUser'];if(_0x257dc9){const _0x2fcfdf=document['getElementById'](_0x9d5737(0x254));if(_0x2fcfdf&&_0x257dc9[_0x9d5737(0x387)])_0x2fcfdf[_0x9d5737(0x1ad)]=_0x257dc9['displayName'];else _0x2fcfdf&&(_0x2fcfdf['value']=_0x257dc9['email']);}}_0x2bb1b0['classList']['add']('active');}async function loadArticleData(_0x53a1ee){const _0x41d134=a2_0x31cce1;try{const _0x3d08d8=doc(db,_0x41d134(0x16c),_0x53a1ee),_0x464b2d=await getDoc(_0x3d08d8);if(!_0x464b2d['exists']()){showNotification(_0x41d134(0x17c),_0x41d134(0x3b0));return;}const _0x39bccc=_0x464b2d['data']();document['getElementById'](_0x41d134(0x27d))['value']=_0x39bccc['title']||'',document[_0x41d134(0x271)]('article-author')['value']=_0x39bccc['author']||'',document[_0x41d134(0x271)]('article-image-url')[_0x41d134(0x1ad)]=_0x39bccc[_0x41d134(0x2cd)]||'',document[_0x41d134(0x271)]('article-content')['value']=_0x39bccc['content']||'';}catch(_0x521ed0){console['error'](_0x41d134(0x1d3),_0x521ed0),showNotification('Failed\x20to\x20load\x20article\x20data',_0x41d134(0x3b0));}}async function saveArticle(){const _0x2a6a1f=a2_0x31cce1;try{const _0x899c54=document['getElementById'](_0x2a6a1f(0x162))['value'],_0x421676=document['getElementById']('article-title')[_0x2a6a1f(0x1ad)]['trim'](),_0x10647d=document['getElementById']('article-author')['value'][_0x2a6a1f(0x32f)](),_0x259ce6=document['getElementById']('article-image-url')[_0x2a6a1f(0x1ad)]['trim'](),_0x31f315=document['getElementById'](_0x2a6a1f(0x35c))['value']['trim']();if(!_0x421676||!_0x31f315){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x1bab34=auth['currentUser'];if(!_0x1bab34){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x6350c6={'title':_0x421676,'author':_0x10647d,'imageUrl':_0x259ce6||null,'content':_0x31f315,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x1bab34['email']};!_0x899c54?(_0x6350c6['createdAt']=serverTimestamp(),_0x6350c6['createdBy']=_0x1bab34['email'],await addDoc(collection(db,'articles'),_0x6350c6),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x899c54),_0x6350c6),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x3d2a0d){console[_0x2a6a1f(0x3b0)]('Error\x20saving\x20article:',_0x3d2a0d),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x3d2a0d['message'],'error');}}function closeArticleModal(){const _0x246f63=a2_0x31cce1,_0x459f96=document[_0x246f63(0x271)]('article-modal');_0x459f96&&_0x459f96['classList']['remove'](_0x246f63(0x1df));}async function confirmDeleteArticle(_0x152f60){const _0x170322=a2_0x31cce1;if(confirm(_0x170322(0x1c4)))try{await deleteDoc(doc(db,'articles',_0x152f60)),loadArticles(),showNotification(_0x170322(0x1eb),'success');}catch(_0x48ce9f){console['error']('Error\x20deleting\x20article:',_0x48ce9f),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x48ce9f['message'],'error');}}function setupTrophyManagementSection(){const _0x405def=a2_0x31cce1,_0x386ee0=document['getElementById']('load-trophies-data');_0x386ee0&&_0x386ee0[_0x405def(0x17d)]('click',function(){const _0x69889d=_0x405def;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x45b065=document['getElementById']('assign-trophy-image');_0x45b065&&(_0x45b065[_0x69889d(0x21b)]=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x8c624d=_0x69889d;this['classList'][_0x8c624d(0x25a)]('loading'),this['innerHTML']=_0x8c624d(0x221);})['catch'](_0x300311=>{const _0x365e6a=_0x69889d;console['error'](_0x365e6a(0x209),_0x300311),this[_0x365e6a(0x34c)][_0x365e6a(0x25a)](_0x365e6a(0x1fd)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x332c04=_0x365e6a;this[_0x332c04(0x310)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x5e24d6=document[_0x405def(0x271)](_0x405def(0x34b));_0x5e24d6&&_0x5e24d6['addEventListener']('click',()=>{openTrophyModal();});const _0x50adac=document[_0x405def(0x271)]('trophy-form');_0x50adac&&_0x50adac[_0x405def(0x17d)](_0x405def(0x233),_0x5eb451=>{_0x5eb451['preventDefault'](),saveTrophyDefinition();});const _0x47eac3=document['getElementById'](_0x405def(0x245));_0x47eac3&&_0x47eac3['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')[_0x405def(0x186)](_0x4cd47d=>{_0x4cd47d['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x23f1c4=document['getElementById'](_0x405def(0x2a2));_0x23f1c4&&_0x23f1c4['addEventListener']('click',_0x8e7929=>{_0x8e7929['target']===_0x23f1c4&&closeTrophyModal();});const _0x4ab016=document['getElementById']('assign-trophy-modal');_0x4ab016&&_0x4ab016['addEventListener'](_0x405def(0x386),_0x5de7e3=>{_0x5de7e3['target']===_0x4ab016&&closeAssignTrophyModal();});const _0x221560=document['getElementById'](_0x405def(0x29e));_0x221560&&_0x221560[_0x405def(0x17d)]('submit',_0x3456c6=>{_0x3456c6['preventDefault'](),assignTrophyToPlayer();});const _0x2ac7a3=document['getElementById'](_0x405def(0x373));_0x2ac7a3&&_0x2ac7a3['addEventListener'](_0x405def(0x386),()=>{closeAssignTrophyModal();});const _0x1e4fc0=document['getElementById'](_0x405def(0x2c5));_0x1e4fc0&&(_0x1e4fc0['addEventListener']('input',updateTrophyImagePreview),_0x1e4fc0['addEventListener'](_0x405def(0x317),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0xfb94c7=a2_0x31cce1,_0x538501=document['getElementById']('trophy-image-url')['value']['trim'](),_0x2a21a7=document['getElementById']('trophy-image-preview');if(!_0x2a21a7){const _0x1f527f=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x1178d4=document[_0xfb94c7(0x1a1)](_0xfb94c7(0x305));_0x1178d4['id']='trophy-image-preview',_0x1178d4['className']='trophy-preview-container',_0x1f527f['appendChild'](_0x1178d4);const _0x8b02af=document['createElement'](_0xfb94c7(0x219));_0x8b02af['id']='trophy-preview-img',_0x8b02af['alt']='Trophy\x20Preview',_0x8b02af[_0xfb94c7(0x21b)]=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x1178d4['appendChild'](_0x8b02af);}const _0x166e24=document[_0xfb94c7(0x271)](_0xfb94c7(0x20b));_0x538501?(_0x166e24['src']=_0x538501,_0x166e24['style']['display']=_0xfb94c7(0x2ea),_0x166e24['classList']['remove']('error')):(_0x166e24['src']=DEFAULT_TROPHY_IMAGE,_0x166e24['style']['display']='block');}async function loadTrophyDefinitions(){const _0x49d838=a2_0x31cce1,_0x5a9409=document['getElementById']('trophies-table-body');if(!_0x5a9409)return;_0x5a9409['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x403797=collection(db,'trophyDefinitions'),_0x2ebc64=query(_0x403797,orderBy('createdAt','desc')),_0x5b0b74=await getDocs(_0x2ebc64);if(_0x5b0b74[_0x49d838(0x318)]){_0x5a9409[_0x49d838(0x310)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x5a9409['innerHTML']='',_0x5b0b74['forEach'](_0xf5fdb=>{const _0x7e4d03=_0x49d838,_0x308370=_0xf5fdb['data'](),_0x426720=document['createElement']('tr'),_0x31b491=_0x308370['createdAt']?new Date(_0x308370['createdAt']['seconds']*0x3e8)[_0x7e4d03(0x1bf)]():'N/A';_0x426720['innerHTML']=_0x7e4d03(0x2e3)+(_0x308370[_0x7e4d03(0x1ae)]||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x308370['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x308370['name']||'Untitled\x20Trophy')+_0x7e4d03(0x321)+(_0x308370['rarity']||'common')+'\x22>'+(_0x308370[_0x7e4d03(0x2c4)]||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x31b491+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0xf5fdb['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0xf5fdb['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0xf5fdb['id']+_0x7e4d03(0x228),_0x5a9409['appendChild'](_0x426720);}),setupTrophyActionButtons();}catch(_0x49a8e4){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x49a8e4),_0x5a9409['innerHTML']=_0x49d838(0x29d)+_0x49a8e4['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x4d00aa=>{_0x4d00aa['addEventListener']('click',_0x3eed04=>{const _0x9fba59=_0x3eed04['currentTarget']['dataset']['id'];openTrophyModal(_0x9fba59);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x2925de=>{const _0x614555=a2_0x11de;_0x2925de['addEventListener'](_0x614555(0x386),_0x4c4f05=>{const _0x2ec648=_0x4c4f05['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x2ec648);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x397da2=>{const _0x3658a6=a2_0x11de;_0x397da2['addEventListener'](_0x3658a6(0x386),_0x31098a=>{const _0x529ae5=_0x31098a['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x529ae5);});});}function openTrophyModal(_0x25fd0d=null){const _0x532afd=a2_0x31cce1,_0x4cf525=document['getElementById']('trophy-modal'),_0x3a337c=document['getElementById'](_0x532afd(0x355)),_0x471cd4=document[_0x532afd(0x271)]('trophy-form'),_0xc798a6=document[_0x532afd(0x271)]('trophy-id');_0x471cd4[_0x532afd(0x385)](),_0xc798a6[_0x532afd(0x1ad)]='';const _0x573aba=document['getElementById']('trophy-preview-img');_0x573aba&&(_0x573aba['src']=DEFAULT_TROPHY_IMAGE,_0x573aba[_0x532afd(0x34c)]['remove']('error')),_0x25fd0d?(_0x3a337c['textContent']='Edit\x20Trophy',_0xc798a6['value']=_0x25fd0d,loadTrophyData(_0x25fd0d)):_0x3a337c['textContent']=_0x532afd(0x337),_0x4cf525['classList']['add']('active');}async function loadTrophyData(_0x1ed32d){const _0x2af711=a2_0x31cce1;try{const _0x1dabd4=doc(db,'trophyDefinitions',_0x1ed32d),_0x2cf8d4=await getDoc(_0x1dabd4);if(!_0x2cf8d4['exists']()){showNotification('Trophy\x20not\x20found',_0x2af711(0x3b0));return;}const _0x47f130=_0x2cf8d4[_0x2af711(0x18f)]();document['getElementById']('trophy-name')['value']=_0x47f130['name']||'',document[_0x2af711(0x271)]('trophy-description')[_0x2af711(0x1ad)]=_0x47f130['description']||'',document['getElementById']('trophy-image-url')['value']=_0x47f130[_0x2af711(0x1ae)]||'',document['getElementById']('trophy-rarity')['value']=_0x47f130['rarity']||'common',updateTrophyImagePreview();}catch(_0x112d40){console['error']('Error\x20loading\x20trophy\x20data:',_0x112d40),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x51c22e=a2_0x31cce1;try{const _0x16ae3e=document['getElementById'](_0x51c22e(0x379))['value'],_0x487640=document['getElementById']('trophy-name')['value']['trim'](),_0x2d5d05=document['getElementById']('trophy-description')[_0x51c22e(0x1ad)]['trim'](),_0x1df99d=document[_0x51c22e(0x271)]('trophy-image-url')[_0x51c22e(0x1ad)]['trim'](),_0x23e8d8=document['getElementById'](_0x51c22e(0x299))[_0x51c22e(0x1ad)];if(!_0x487640||!_0x2d5d05||!_0x1df99d){showNotification('All\x20fields\x20are\x20required',_0x51c22e(0x3b0));return;}const _0x9a13dd=auth['currentUser'];if(!_0x9a13dd){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0xb66c58={'name':_0x487640,'description':_0x2d5d05,'image':_0x1df99d,'rarity':_0x23e8d8,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x9a13dd['email']};!_0x16ae3e?(_0xb66c58['createdAt']=serverTimestamp(),_0xb66c58[_0x51c22e(0x366)]=_0x9a13dd['email'],await addDoc(collection(db,'trophyDefinitions'),_0xb66c58),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x16ae3e),_0xb66c58),showNotification(_0x51c22e(0x384),_0x51c22e(0x1d9))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x18cf4e){console['error']('Error\x20saving\x20trophy:',_0x18cf4e),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x18cf4e['message'],'error');}}function closeTrophyModal(){const _0x2c56d0=document['getElementById']('trophy-modal');_0x2c56d0&&_0x2c56d0['classList']['remove']('active');}async function confirmDeleteTrophy(_0x50d4ac){const _0x2a5358=a2_0x31cce1;if(!_0x50d4ac){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x307008=auth[_0x2a5358(0x178)];if(!_0x307008){showNotification(_0x2a5358(0x28b),_0x2a5358(0x3b0));return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x50d4ac),await deleteDoc(doc(db,'trophyDefinitions',_0x50d4ac)),showNotification('Trophy\x20definition\x20deleted\x20successfully',_0x2a5358(0x1d9)),loadTrophyDefinitions();}catch(_0x3dff75){console[_0x2a5358(0x3b0)]('Error\x20deleting\x20trophy\x20definition:',_0x3dff75),showNotification(_0x2a5358(0x3c1)+_0x3dff75['message'],'error');}}async function openAssignTrophyModal(_0x1650cc){const _0x30c060=a2_0x31cce1;try{const _0x2e02ce=doc(db,_0x30c060(0x2d6),_0x1650cc),_0x36ce2a=await getDoc(_0x2e02ce);if(!_0x36ce2a['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x5106a2=_0x36ce2a[_0x30c060(0x18f)]();document['getElementById'](_0x30c060(0x2e0))['value']=_0x1650cc,document[_0x30c060(0x271)](_0x30c060(0x371))[_0x30c060(0x1ad)]=_0x5106a2['name'],document['getElementById']('assign-trophy-image')[_0x30c060(0x19e)]=_0x5106a2['image']||DEFAULT_TROPHY_IMAGE,document[_0x30c060(0x271)]('assign-trophy-title')['textContent']=_0x5106a2['name']||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x5106a2['description']||_0x30c060(0x3c6);const _0x40ea55=document['getElementById'](_0x30c060(0x212));_0x40ea55['textContent']=_0x5106a2['rarity']||_0x30c060(0x1d8),_0x40ea55['className']=_0x30c060(0x388)+(_0x5106a2['rarity']||_0x30c060(0x1d8));const _0x1376bf=document['getElementById'](_0x30c060(0x312));_0x1376bf['classList'][_0x30c060(0x1b8)](_0x30c060(0x1df));}catch(_0x451acd){console[_0x30c060(0x3b0)]('Error\x20opening\x20assign\x20trophy\x20modal:',_0x451acd),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x30c060(0x3b0));}}function closeAssignTrophyModal(){const _0x152b95=a2_0x31cce1,_0x24c1a7=document[_0x152b95(0x271)]('assign-trophy-modal');_0x24c1a7&&_0x24c1a7['classList'][_0x152b95(0x25a)](_0x152b95(0x1df));}async function assignTrophyToPlayer(){const _0x271ee9=a2_0x31cce1;try{const _0x89270a=document['getElementById'](_0x271ee9(0x2e0))['value'],_0x59d997=document[_0x271ee9(0x271)]('assign-trophy-name')['value'],_0x23d9f0=document['getElementById']('assign-player-username')['value']['trim'](),_0x13182a=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x89270a||!_0x23d9f0){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x234990=auth['currentUser'];if(!_0x234990){showNotification(_0x271ee9(0x3a9),'error');return;}let _0x54e165=null,_0x178c97=null,_0x2b9291=null;if(_0x13182a==='non-participant'){const _0x5ec669=collection(db,'nonParticipants'),_0x225eb3=query(_0x5ec669,where('username','==',_0x23d9f0)),_0x337e46=await getDocs(_0x225eb3);!_0x337e46['empty']&&(_0x54e165=_0x337e46['docs'][0x0],_0x178c97=_0x54e165['id'],_0x2b9291=_0x54e165['data']());}else{const _0xc7782b=_0x13182a==='D1'?'players':_0x13182a==='D2'?'playersD2':'playersD3',_0x21918d=collection(db,_0xc7782b),_0xb8a407=query(_0x21918d,where('username','==',_0x23d9f0)),_0x42ae45=await getDocs(_0xb8a407);!_0x42ae45['empty']&&(_0x54e165=_0x42ae45['docs'][0x0],_0x178c97=_0x54e165['id'],_0x2b9291=_0x54e165[_0x271ee9(0x18f)]());}if(!_0x54e165){showNotification('Player\x20\x22'+_0x23d9f0+_0x271ee9(0x3a6)+(_0x13182a===_0x271ee9(0x391)?'non-participants':_0x13182a+'\x20ladder'),_0x271ee9(0x3b0));return;}const _0xeb7a9=collection(db,'userTrophies'),_0x144c25=query(_0xeb7a9,where('userId','==',_0x178c97),where('trophyId','==',_0x89270a)),_0x57fc42=await getDocs(_0x144c25);if(!_0x57fc42['empty']){showNotification('Player\x20\x22'+_0x23d9f0+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x178c97,'playerUsername':_0x23d9f0,'trophyId':_0x89270a,'awardedAt':serverTimestamp(),'awardedBy':_0x234990['email'],'ladder':_0x13182a}),showNotification('Trophy\x20\x22'+_0x59d997+'\x22\x20awarded\x20to\x20'+_0x23d9f0,_0x271ee9(0x1d9)),closeAssignTrophyModal();}catch(_0x360de8){console['error']('Error\x20assigning\x20trophy:',_0x360de8),showNotification(_0x271ee9(0x34f)+_0x360de8['message'],'error');}}function setupInactivePlayersSection(){const _0x4a3299=a2_0x31cce1,_0x716ec5=document[_0x4a3299(0x271)]('inactive-days-filter');_0x716ec5&&_0x716ec5['addEventListener']('change',function(){const _0x51c089=_0x4a3299,_0xe1c9e6=document[_0x51c089(0x271)]('load-inactive-players-data');if(_0xe1c9e6)_0xe1c9e6[_0x51c089(0x386)]();});const _0x23520e=document[_0x4a3299(0x1c7)](_0x4a3299(0x1d5)),_0x37c6af=document[_0x4a3299(0x1c7)]('.ladder-switch\x20input[value=\x22D2\x22]');_0x23520e&&_0x37c6af&&(_0x23520e['addEventListener']('change',function(){const _0x3152cb=_0x4a3299;if(this['checked']){currentLadder='D1';if(document[_0x3152cb(0x271)](_0x3152cb(0x2ab))['style'][_0x3152cb(0x30c)]!=='none'){const _0x5e3114=document['getElementById']('load-inactive-players-data');if(_0x5e3114)_0x5e3114['click']();}}}),_0x37c6af['addEventListener']('change',function(){const _0x5d9337=_0x4a3299;if(this['checked']){currentLadder='D2';if(document[_0x5d9337(0x271)](_0x5d9337(0x2ab))['style']['display']!=='none'){const _0x31fa9f=document['getElementById']('load-inactive-players-data');if(_0x31fa9f)_0x31fa9f[_0x5d9337(0x386)]();}}}));const _0x30ccd=document['getElementById'](_0x4a3299(0x1a5));_0x30ccd&&_0x30ccd['addEventListener']('input',debounce(function(){const _0x1d63d3=_0x4a3299,_0x3042e3=_0x30ccd['value'][_0x1d63d3(0x326)](),_0x2f9272=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x2f9272[_0x1d63d3(0x186)](_0x58d111=>{const _0xc7374e=_0x1d63d3;if(_0x58d111['querySelector'](_0xc7374e(0x296))||_0x58d111['querySelector']('.empty-state')||_0x58d111[_0xc7374e(0x1c7)](_0xc7374e(0x33e)))return;const _0x3457cd=_0x58d111[_0xc7374e(0x1be)][0x0]?.['textContent'][_0xc7374e(0x326)]()||'',_0x272b84=_0x58d111['cells'][0x5]?.[_0xc7374e(0x2f4)]['toLowerCase']()||'';_0x3457cd['includes'](_0x3042e3)||_0x272b84[_0xc7374e(0x3b6)](_0x3042e3)?_0x58d111['style']['display']='':_0x58d111['style']['display']='none';});},0x12c)),document['addEventListener']('click',function(_0x25233e){const _0xf51a0d=_0x4a3299;if(_0x25233e['target']['closest']('.view-player-btn')){const _0x3b3d1d=_0x25233e['target']['closest'](_0xf51a0d(0x24a)),_0x530702=_0x3b3d1d['dataset'][_0xf51a0d(0x18c)];_0x530702&&alert(_0xf51a0d(0x2e1)+_0x530702+_0xf51a0d(0x1d2));}}),console[_0x4a3299(0x2ef)]('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x285441=a2_0x31cce1,_0x167854=document['getElementById']('inactive-players-table-body');if(!_0x167854)return;_0x167854['innerHTML']=_0x285441(0x2a0);try{const _0x44846d=document['getElementById']('inactive-days-filter'),_0x2edfd4=_0x44846d?parseInt(_0x44846d['value'])||0x0:0x0,_0xb8ba6=collection(db,currentLadder==='D1'?_0x285441(0x32c):'playersD2'),_0x436fb3=await getDocs(_0xb8ba6);if(_0x436fb3['empty']){_0x167854['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x28900d=[];_0x436fb3['forEach'](_0xa6a0fe=>{const _0x61d670=_0x285441,_0x3d2150=_0xa6a0fe['data']();_0x28900d['push']({..._0x3d2150,'id':_0xa6a0fe['id'],'username':_0x3d2150['username']||_0x61d670(0x30b)});}),console[_0x285441(0x2ef)]('Found\x20'+_0x28900d['length']+_0x285441(0x2c7)+currentLadder+'\x20ladder');const _0x3ff679=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0xc4cbba=_0x28900d['map'](async _0x2a4158=>{const _0x4f92f9=_0x285441;try{const _0x327947=collection(db,_0x3ff679),_0x5791b=query(_0x327947,or(where(_0x4f92f9(0x332),'==',_0x2a4158['username']),where(_0x4f92f9(0x351),'==',_0x2a4158['username'])),orderBy(_0x4f92f9(0x276),_0x4f92f9(0x3a4)),limit(0x1)),_0xc24ec7=await getDocs(_0x5791b);if(!_0xc24ec7[_0x4f92f9(0x318)]){const _0x1104be=_0xc24ec7['docs'][0x0]['data'](),_0x2bce4d=_0x1104be['approvedAt']?new Date(_0x1104be['approvedAt'][_0x4f92f9(0x36a)]*0x3e8):null,_0x4a4f90=new Date(),_0x57fa56=_0x2bce4d?Math['floor']((_0x4a4f90-_0x2bce4d)/(0x3e8*0x3c*0x3c*0x18)):null,_0x520458=_0x1104be[_0x4f92f9(0x332)]===_0x2a4158['username']?_0x1104be['loserUsername']:_0x1104be[_0x4f92f9(0x332)],_0x189638=_0x1104be[_0x4f92f9(0x332)]===_0x2a4158[_0x4f92f9(0x18c)]?'Won':'Lost';return{..._0x2a4158,'lastMatch':{'date':_0x2bce4d?_0x2bce4d[_0x4f92f9(0x155)]():'N/A','opponent':_0x520458||_0x4f92f9(0x1c6),'result':_0x189638,'timestamp':_0x2bce4d||new Date(0x0),'daysSinceMatch':_0x57fa56||Number[_0x4f92f9(0x21e)]}};}else return{..._0x2a4158,'lastMatch':{'date':'Never\x20played','opponent':_0x4f92f9(0x218),'result':_0x4f92f9(0x218),'timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x215194){return console['error'](_0x4f92f9(0x19d)+_0x2a4158['username']+':',_0x215194),{..._0x2a4158,'lastMatch':{'date':'Error','opponent':_0x4f92f9(0x2fb),'result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x19a114=await Promise['all'](_0xc4cbba);_0x19a114['sort']((_0x4390cf,_0x4f24f1)=>_0x4f24f1['lastMatch']['daysSinceMatch']-_0x4390cf['lastMatch']['daysSinceMatch']);_0x2edfd4>0x0&&(_0x19a114=_0x19a114[_0x285441(0x1e3)](_0x56ab23=>_0x56ab23['lastMatch'][_0x285441(0x1e5)]>=_0x2edfd4));_0x167854['innerHTML']='';if(_0x19a114[_0x285441(0x2fe)]===0x0){_0x167854[_0x285441(0x310)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x19a114['forEach'](_0x2df0cc=>{const _0x20cdf2=_0x285441,_0x13a955=document['createElement']('tr'),_0x179b27=_0x2df0cc['lastMatch'][_0x20cdf2(0x1e5)]>0x1e?'highly-inactive':_0x2df0cc['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x13a955['className']=_0x179b27,_0x13a955['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2df0cc['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2df0cc['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2df0cc[_0x20cdf2(0x306)]['date']+_0x20cdf2(0x188)+(_0x2df0cc['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x2df0cc['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2df0cc['lastMatch']['date']==='Never\x20played'?'No\x20matches\x20found':_0x2df0cc[_0x20cdf2(0x306)]['result']+_0x20cdf2(0x349)+_0x2df0cc['lastMatch']['opponent'])+_0x20cdf2(0x215)+_0x2df0cc['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x167854[_0x20cdf2(0x3ac)](_0x13a955);}),console['log']('Displaying\x20'+_0x19a114[_0x285441(0x2fe)]+'\x20inactive\x20players');}catch(_0x136631){console['error']('Error\x20loading\x20inactive\x20players:',_0x136631),_0x167854[_0x285441(0x310)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x136631['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x372b3c=a2_0x31cce1;console[_0x372b3c(0x2ef)]('Setting\x20up\x20highlight\x20buttons');const _0x1780a9=document['getElementById']('create-match-highlight-btn');_0x1780a9&&_0x1780a9['addEventListener']('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x24aa3f=document[_0x372b3c(0x271)](_0x372b3c(0x23f));_0x24aa3f&&_0x24aa3f['addEventListener'](_0x372b3c(0x386),function(){const _0x2a5ce0=_0x372b3c;console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal(_0x2a5ce0(0x323));});const _0x4f7868=document[_0x372b3c(0x271)](_0x372b3c(0x33d));_0x4f7868&&_0x4f7868[_0x372b3c(0x17d)](_0x372b3c(0x386),function(){const _0x527d93=_0x372b3c;console['log'](_0x527d93(0x3c3)),openHighlightModal('achievement');});}function openHighlightModal(_0x5a3c44=a2_0x31cce1(0x20e)){const _0x4cec19=a2_0x31cce1;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x5a3c44);const _0x27fe13=document['getElementById']('highlight-modal'),_0x4c43ac=document['getElementById'](_0x4cec19(0x26a)),_0x3acd38=document['getElementById']('highlight-modal-title'),_0xc368d=document['getElementById']('highlight-id');if(!_0x27fe13||!_0x4c43ac||!_0x3acd38){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x4c43ac['reset'](),_0xc368d[_0x4cec19(0x1ad)]='';const _0x41f351=[_0x4cec19(0x20e),_0x4cec19(0x323),'achievement'],_0x3d5db8=!_0x41f351['includes'](_0x5a3c44);if(_0x3d5db8){const _0x128de7=_0x5a3c44;_0xc368d[_0x4cec19(0x1ad)]=_0x128de7,_0x3acd38['textContent']=_0x4cec19(0x1e8),loadHighlightDataAdmin(_0x128de7);}else{const _0xc1b5ac=_0x5a3c44;document['getElementById']('highlight-type')[_0x4cec19(0x1ad)]=_0xc1b5ac,_0x3acd38['textContent']=_0x4cec19(0x157)+getHighlightTypeName(_0xc1b5ac),toggleHighlightFields(_0xc1b5ac);const _0x6bea0d=auth[_0x4cec19(0x178)];_0x6bea0d&&document['getElementById']('highlight-submitted-by')&&(document[_0x4cec19(0x271)](_0x4cec19(0x3c7))['value']=_0x6bea0d[_0x4cec19(0x387)]||_0x6bea0d[_0x4cec19(0x181)]);}_0x27fe13[_0x4cec19(0x34c)]['add']('active');}function toggleHighlightFields(_0x494dbe){const _0x47ce92=a2_0x31cce1;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x494dbe);const _0x13aed5=document[_0x47ce92(0x271)]('highlight-form');if(!_0x13aed5)return;const _0x5c32ca=_0x13aed5['querySelectorAll']('.form-group,\x20.form-row');_0x5c32ca[_0x47ce92(0x186)](_0x3b1dc5=>_0x3b1dc5['style']['display']=_0x47ce92(0x23c));const _0x3c8cd7=document['getElementById']('highlight-video-preview-container');if(_0x3c8cd7)_0x3c8cd7[_0x47ce92(0x2e8)]['display']='none';const _0x4c2194=[_0x47ce92(0x37c),_0x47ce92(0x2f5),'highlight-submitted-by-container'];_0x4c2194['forEach'](_0x299807=>{const _0x353d3c=_0x47ce92,_0x2bd1dd=document['getElementById'](_0x299807);if(_0x2bd1dd)_0x2bd1dd['style'][_0x353d3c(0x30c)]='block';});if(_0x494dbe===_0x47ce92(0x20e)){const _0xc1ce66=['highlight-video-container','highlight-match-info-container','highlight-map-container',_0x47ce92(0x2aa),'highlight-players-container','highlight-match-link-container'];_0xc1ce66['forEach'](_0x1ff519=>{const _0x7c22d3=_0x47ce92,_0x1d9ae6=document['getElementById'](_0x1ff519);_0x1d9ae6&&(_0x1ff519===_0x7c22d3(0x3af)?_0x1d9ae6[_0x7c22d3(0x2e8)][_0x7c22d3(0x30c)]='flex':_0x1d9ae6[_0x7c22d3(0x2e8)]['display']='block');});const _0x3ab12a=document['getElementById']('highlight-video-id');if(_0x3ab12a){_0x3ab12a['required']=!![];const _0x1c8a45=_0x3ab12a['previousElementSibling'];if(_0x1c8a45)_0x1c8a45['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x3c8cd7)_0x3c8cd7['style']['display']=_0x47ce92(0x2ea);updateHighlightVideoPreview();}else{if(_0x494dbe===_0x47ce92(0x323)){const _0x15f956=[_0x47ce92(0x2dd),'highlight-map-creator-container','highlight-map-version-container',_0x47ce92(0x285),'highlight-video-container'];_0x15f956['forEach'](_0x537e82=>{const _0x145fc8=_0x47ce92,_0x359ef4=document[_0x145fc8(0x271)](_0x537e82);if(_0x359ef4)_0x359ef4['style'][_0x145fc8(0x30c)]=_0x145fc8(0x2ea);});const _0x58a9f6=document['getElementById']('highlight-video-id');if(_0x58a9f6){_0x58a9f6['required']=![];const _0x1855e6=_0x58a9f6['previousElementSibling'];if(_0x1855e6)_0x1855e6['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x494dbe==='achievement'){const _0x390cc9=[_0x47ce92(0x2d9),'highlight-achievement-type-container','highlight-achievement-details-container',_0x47ce92(0x39a),'highlight-achievement-image-container',_0x47ce92(0x1a7)];_0x390cc9['forEach'](_0x331ee6=>{const _0x5b01d7=_0x47ce92,_0x49e76f=document['getElementById'](_0x331ee6);if(_0x49e76f)_0x49e76f['style'][_0x5b01d7(0x30c)]='block';});const _0x1b782c=document[_0x47ce92(0x271)]('highlight-video-id');if(_0x1b782c){_0x1b782c['required']=![];const _0x2b3308=_0x1b782c['previousElementSibling'];if(_0x2b3308)_0x2b3308['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x2a074e){const _0x216b58=a2_0x31cce1;try{const _0x1155ba=doc(db,_0x216b58(0x3a8),_0x2a074e),_0x22f533=await getDoc(_0x1155ba);if(!_0x22f533['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x1bd595=_0x22f533['data'](),_0x1efad1=_0x1bd595['type']||_0x216b58(0x20e);document['getElementById'](_0x216b58(0x205))[_0x216b58(0x2f4)]=_0x216b58(0x2bc)+getHighlightTypeName(_0x1efad1),document[_0x216b58(0x271)]('highlight-type')[_0x216b58(0x1ad)]=_0x1efad1,toggleHighlightFields(_0x1efad1),document['getElementById'](_0x216b58(0x2f3))[_0x216b58(0x1ad)]=_0x1bd595[_0x216b58(0x202)]||'',document[_0x216b58(0x271)]('highlight-description')['value']=_0x1bd595['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x1bd595['submittedBy']||'';_0x1bd595[_0x216b58(0x1e4)]&&(document['getElementById']('highlight-video-id')[_0x216b58(0x1ad)]=_0x1bd595['videoId'],updateHighlightVideoPreview());if(_0x1efad1==='match'){document['getElementById']('highlight-match-info')[_0x216b58(0x1ad)]=_0x1bd595['matchInfo']||'',document[_0x216b58(0x271)]('highlight-map')['value']=_0x1bd595['map']||'';if(_0x1bd595['matchDate']){const _0x324a6b=new Date(_0x1bd595['matchDate']['seconds']*0x3e8);document['getElementById'](_0x216b58(0x197))['value']=_0x324a6b['toISOString']()[_0x216b58(0x2b8)]('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x1bd595['winnerName']||'',document[_0x216b58(0x271)]('highlight-winner-score')['value']=_0x1bd595[_0x216b58(0x28c)]||'',document['getElementById']('highlight-loser-name')['value']=_0x1bd595['loserName']||'',document['getElementById'](_0x216b58(0x1bb))['value']=_0x1bd595['loserScore']||'',document['getElementById'](_0x216b58(0x376))['value']=_0x1bd595['matchLink']||'';}else{if(_0x1efad1==='creator')document['getElementById']('highlight-map')['value']=_0x1bd595['map']||'',document[_0x216b58(0x271)]('highlight-map-creator')[_0x216b58(0x1ad)]=_0x1bd595[_0x216b58(0x2a9)]||'',document[_0x216b58(0x271)](_0x216b58(0x340))['value']=_0x1bd595['mapVersion']||'',document['getElementById'](_0x216b58(0x1bc))['value']=_0x1bd595['creatorImageUrl']||'';else _0x1efad1===_0x216b58(0x36b)&&(document['getElementById']('highlight-achievement-player')['value']=_0x1bd595['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x1bd595[_0x216b58(0x2f2)]||'',document[_0x216b58(0x271)]('highlight-achievement-details')[_0x216b58(0x1ad)]=_0x1bd595['achievementDetails']||'',document[_0x216b58(0x271)](_0x216b58(0x1f8))['value']=_0x1bd595['playerProfileUrl']||'',document['getElementById'](_0x216b58(0x382))['value']=_0x1bd595[_0x216b58(0x262)]||'');}}catch(_0x32f467){console['error']('Error\x20loading\x20highlight:',_0x32f467),showNotification('Error\x20loading\x20highlight:\x20'+_0x32f467['message'],'error');}}async function saveHighlight(){const _0x47c0a2=a2_0x31cce1;try{const _0x43d385=document[_0x47c0a2(0x271)]('highlight-id')?.['value']||'',_0x408b15=document['getElementById']('highlight-type')?.[_0x47c0a2(0x1ad)]||'match',_0x18838f={'title':document['getElementById']('highlight-title')?.['value']?.['trim']()||'','description':document['getElementById'](_0x47c0a2(0x2b0))?.[_0x47c0a2(0x1ad)]?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.[_0x47c0a2(0x1ad)]?.[_0x47c0a2(0x32f)]()||'','videoId':document[_0x47c0a2(0x271)]('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x408b15};if(!_0x18838f['title']){showNotification(_0x47c0a2(0x361),_0x47c0a2(0x3b0));return;}if(_0x408b15===_0x47c0a2(0x20e)){_0x18838f['matchInfo']=document[_0x47c0a2(0x271)]('highlight-match-info')?.['value']?.['trim']()||'',_0x18838f['map']=document['getElementById']('highlight-map')?.['value']?.[_0x47c0a2(0x32f)]()||'';const _0x59fe1c=document['getElementById']('highlight-match-date'),_0x28058d=_0x59fe1c?.['value']||'';_0x18838f['matchDate']=_0x28058d?Timestamp['fromDate'](new Date(_0x28058d)):null,_0x18838f['winnerName']=document[_0x47c0a2(0x271)]('highlight-winner-name')?.[_0x47c0a2(0x1ad)]?.[_0x47c0a2(0x32f)]()||'',_0x18838f['winnerScore']=document['getElementById']('highlight-winner-score')?.['value']?.[_0x47c0a2(0x32f)]()||'',_0x18838f['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.[_0x47c0a2(0x32f)]()||'',_0x18838f['loserScore']=document['getElementById']('highlight-loser-score')?.['value']?.['trim']()||'',_0x18838f['matchLink']=document[_0x47c0a2(0x271)]('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x18838f['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x408b15==='creator'){_0x18838f['map']=document[_0x47c0a2(0x271)]('highlight-map')?.[_0x47c0a2(0x1ad)]?.['trim']()||'',_0x18838f['mapCreator']=document[_0x47c0a2(0x271)]('highlight-map-creator')?.['value']?.['trim']()||'',_0x18838f['mapVersion']=document['getElementById']('highlight-map-version')?.[_0x47c0a2(0x1ad)]?.['trim']()||'',_0x18838f['creatorImageUrl']=document[_0x47c0a2(0x271)]('highlight-creator-image')?.['value']?.[_0x47c0a2(0x32f)]()||'';if(!_0x18838f['mapCreator']){showNotification(_0x47c0a2(0x353),'error');return;}}else{if(_0x408b15==='achievement'){_0x18838f['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.[_0x47c0a2(0x1ad)]?.['trim']()||'',_0x18838f['achievementType']=document['getElementById']('highlight-achievement-type')?.['value']?.[_0x47c0a2(0x32f)]()||'',_0x18838f['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.[_0x47c0a2(0x32f)]()||'',_0x18838f['playerProfileUrl']=document['getElementById'](_0x47c0a2(0x1f8))?.[_0x47c0a2(0x1ad)]?.[_0x47c0a2(0x32f)]()||'',_0x18838f[_0x47c0a2(0x262)]=document[_0x47c0a2(0x271)]('highlight-achievement-image')?.[_0x47c0a2(0x1ad)]?.['trim']()||'';if(!_0x18838f[_0x47c0a2(0x341)]){showNotification(_0x47c0a2(0x368),_0x47c0a2(0x3b0));return;}}}}_0x43d385?(_0x18838f['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x43d385),_0x18838f),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x18838f['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x18838f),showNotification('Highlight\x20created\x20successfully!',_0x47c0a2(0x1d9))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x448431){console[_0x47c0a2(0x3b0)](_0x47c0a2(0x196),_0x448431),showNotification('Error\x20saving\x20highlight:\x20'+_0x448431['message'],'error');}}function closeHighlightModal(){const _0x4342c7=a2_0x31cce1,_0x2605ac=document[_0x4342c7(0x271)]('highlight-modal');if(_0x2605ac)_0x2605ac['classList'][_0x4342c7(0x25a)]('active');}function getHighlightTypeName(_0x8d092e){const _0x3b92b1=a2_0x31cce1;switch(_0x8d092e){case _0x3b92b1(0x20e):return'Match\x20Highlight';case _0x3b92b1(0x323):return _0x3b92b1(0x294);case'achievement':return _0x3b92b1(0x172);default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x53276f=a2_0x31cce1,_0x1341a1=document['getElementById'](_0x53276f(0x2c9)),_0x1d2f46=document['getElementById']('highlight-video-preview-container'),_0x2d8a01=document['getElementById']('highlight-video-preview');if(!_0x1341a1||!_0x2d8a01||!_0x1d2f46)return;const _0x4148ee=_0x1341a1['value']['trim']();_0x4148ee&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x4148ee)?(_0x2d8a01['src']='https://www.youtube.com/embed/'+_0x4148ee,_0x1d2f46['style']['display']='block'):(_0x2d8a01['src']='',_0x1d2f46['style']['display']='none');}async function loadHighlightsAdmin(){const _0x353d38=a2_0x31cce1,_0x23933c=document[_0x353d38(0x271)]('highlights-table-body');if(!_0x23933c)return;_0x23933c['innerHTML']=_0x353d38(0x396);try{const _0x199f53=query(collection(db,'highlights'),orderBy('createdAt','desc')),_0x5211e3=await getDocs(_0x199f53);if(_0x5211e3['empty']){_0x23933c[_0x353d38(0x310)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x23933c['innerHTML']='',_0x5211e3['forEach'](_0x28bede=>{const _0x1996b4=_0x353d38,_0x220de0=_0x28bede['data'](),_0x4085e7=document['createElement']('tr'),_0x3d3322=_0x220de0[_0x1996b4(0x1f5)]?new Date(_0x220de0['createdAt']['seconds']*0x3e8)[_0x1996b4(0x155)]():'N/A';let _0x566bf7='Unknown',_0x5402ba='';switch(_0x220de0['type']){case'match':_0x566bf7='Match',_0x5402ba='match-type';break;case _0x1996b4(0x323):_0x566bf7='Creator',_0x5402ba='creator-type';break;case _0x1996b4(0x36b):_0x566bf7='Achievement',_0x5402ba=_0x1996b4(0x16b);break;}_0x4085e7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x220de0['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x5402ba+'\x22>'+_0x566bf7+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3d3322+_0x1996b4(0x188)+(_0x220de0['submittedBy']||_0x1996b4(0x1c6))+_0x1996b4(0x188)+(_0x220de0['videoId']?_0x1996b4(0x2c0):'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x28bede['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x28bede['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x23933c[_0x1996b4(0x3ac)](_0x4085e7);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x22f528=>{const _0x139d3d=_0x353d38;_0x22f528[_0x139d3d(0x17d)]('click',_0x3a49ee=>{openHighlightModal(_0x3a49ee['currentTarget']['dataset']['id']);});}),document['querySelectorAll'](_0x353d38(0x1cf))[_0x353d38(0x186)](_0x1b1727=>{const _0xc8c96e=_0x353d38;_0x1b1727['addEventListener'](_0xc8c96e(0x386),_0x3b77c0=>{const _0x2b583b=_0xc8c96e;confirmDeleteHighlight(_0x3b77c0['currentTarget'][_0x2b583b(0x2c6)]['id']);});});}catch(_0x1c0fee){console['error'](_0x353d38(0x278),_0x1c0fee),_0x23933c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x1c0fee[_0x353d38(0x2d4)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x1f1b60){const _0x4b3239=a2_0x31cce1;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x1f1b60)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x23ac9e){console['error']('Error\x20deleting\x20highlight:',_0x23ac9e),showNotification(_0x4b3239(0x393)+_0x23ac9e['message'],_0x4b3239(0x3b0));}}function setupCreateTestMatchModal(){const _0x1336c7=a2_0x31cce1;console['log'](_0x1336c7(0x35e));const _0x18ef95=document['getElementById']('create-test-match-modal'),_0x26d230=document['getElementById']('create-test-match-form');if(!_0x18ef95){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x26d230){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x25ac7c=_0x18ef95[_0x1336c7(0x226)](!![]);_0x18ef95['parentNode']['replaceChild'](_0x25ac7c,_0x18ef95);const _0x210019=_0x25ac7c[_0x1336c7(0x1c7)](_0x1336c7(0x2b4));_0x25ac7c['addEventListener']('click',function(_0x37292c){_0x37292c['target']===_0x25ac7c&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x2737e6=_0x25ac7c['querySelector'](_0x1336c7(0x1d0));_0x2737e6&&_0x2737e6['addEventListener']('click',function(_0x2d2d1e){const _0x575fce=_0x1336c7;_0x2d2d1e[_0x575fce(0x33b)](),_0x2d2d1e['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x36f42a=_0x25ac7c['querySelector']('#cancel-create-test-match-btn');_0x36f42a&&_0x36f42a['addEventListener']('click',function(_0x481854){_0x481854['preventDefault'](),_0x481854['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x210019){_0x210019['addEventListener']('submit',function(_0x57ed99){const _0x423dc3=_0x1336c7;_0x57ed99['preventDefault'](),_0x57ed99[_0x423dc3(0x1ca)](),console['log'](_0x423dc3(0x27e)),createTestMatch();});const _0x3d825a=_0x210019[_0x1336c7(0x1c7)]('button[type=\x22submit\x22]');_0x3d825a&&_0x3d825a['addEventListener']('click',function(_0x2f865b){const _0x14186=_0x1336c7;_0x2f865b['preventDefault'](),_0x2f865b['stopPropagation'](),console[_0x14186(0x2ef)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x667758=a2_0x31cce1;console[_0x667758(0x2ef)](_0x667758(0x198)),setupHighlightButtons();const _0x3c2814=document[_0x667758(0x271)](_0x667758(0x26a));_0x3c2814&&_0x3c2814['addEventListener']('submit',_0x49f9d6=>{_0x49f9d6['preventDefault'](),saveHighlight();});const _0x3f4415=document['getElementById']('cancel-highlight-btn');_0x3f4415&&_0x3f4415[_0x667758(0x17d)](_0x667758(0x386),closeHighlightModal);const _0x1bde57=document['querySelector'](_0x667758(0x251));_0x1bde57&&_0x1bde57[_0x667758(0x17d)]('click',closeHighlightModal);const _0x56d8f3=document['getElementById']('highlight-modal');_0x56d8f3&&_0x56d8f3['addEventListener']('click',_0x240577=>{_0x240577['target']===_0x56d8f3&&closeHighlightModal();});const _0x26b0ba=document['getElementById']('highlight-video-id');_0x26b0ba&&_0x26b0ba['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x49fb3a=a2_0x31cce1;console['log'](_0x49fb3a(0x2a3));const _0xad148a=document[_0x49fb3a(0x271)]('matches-prev-page'),_0x52c3a5=document['getElementById'](_0x49fb3a(0x1b7));_0xad148a&&_0xad148a['addEventListener'](_0x49fb3a(0x386),()=>{const _0xd724e8=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0xd724e8]['page']-0x1);});_0x52c3a5&&_0x52c3a5['addEventListener']('click',()=>{const _0xdba2b3=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0xdba2b3]['page']+0x1);});const _0x41e307=document['getElementById']('apply-matches-filters'),_0x1bdab7=document['getElementById']('reset-matches-filters');_0x41e307&&_0x41e307['addEventListener']('click',applyMatchesFilters);_0x1bdab7&&_0x1bdab7['addEventListener']('click',resetMatchesFilters);const _0x2301ad=document['getElementById'](_0x49fb3a(0x37a));_0x2301ad&&_0x2301ad['addEventListener'](_0x49fb3a(0x2de),debounce(filterMatchesTable,0x12c));const _0x1c3428=document['getElementById'](_0x49fb3a(0x27c));_0x1c3428&&_0x1c3428['addEventListener'](_0x49fb3a(0x386),openResimulateModal);const _0x40518c=document[_0x49fb3a(0x271)](_0x49fb3a(0x38b));if(_0x40518c){const _0x49ed1f=_0x40518c['querySelector']('.close');_0x49ed1f&&_0x49ed1f['addEventListener'](_0x49fb3a(0x386),closeResimulateModal),_0x40518c['addEventListener']('click',_0x2ebf64=>{const _0x773e49=_0x49fb3a;_0x2ebf64[_0x773e49(0x347)]===_0x40518c&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x49fb3a(0x1af));}function openCreateTestMatchModal(){const _0x49b798=a2_0x31cce1;console[_0x49b798(0x2ef)]('Opening\x20create\x20test\x20match\x20modal');const _0x1e5672=document['getElementById']('create-test-match-modal'),_0x4d1d5c=document[_0x49b798(0x271)](_0x49b798(0x2d5));if(!_0x1e5672){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x4d1d5c){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification(_0x49b798(0x1c0),_0x49b798(0x3b0));return;}_0x4d1d5c['reset']();const _0x137534=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x5d08f2=![];_0x137534['forEach'](_0x268675=>{const _0x2abf7e=_0x49b798;console[_0x2abf7e(0x2ef)](_0x2abf7e(0x159),_0x268675[_0x2abf7e(0x1ad)]),_0x268675['value']===currentLadder&&(_0x268675['checked']=!![],_0x5d08f2=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x5d08f2){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x17e441=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x17e441&&(_0x17e441[_0x49b798(0x1d1)]=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x3981b6=document['getElementById'](_0x49b798(0x394));if(_0x3981b6){const _0x798723=new Date()['toISOString']()['split']('T')[0x0];_0x3981b6[_0x49b798(0x1ad)]=_0x798723;}_0x1e5672[_0x49b798(0x2e8)][_0x49b798(0x30c)]='flex',_0x1e5672['style']['visibility']='visible',_0x1e5672['style']['opacity']='1',_0x1e5672['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x42df3c=document[_0x49b798(0x271)](_0x49b798(0x261));_0x42df3c&&setTimeout(()=>{_0x42df3c['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x2669ce=a2_0x31cce1;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x4eb773=document['getElementById']('create-test-match-modal');if(!_0x4eb773){console[_0x2669ce(0x3b0)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x4eb773['classList']['remove']('active'),_0x4eb773['style']['opacity']='0',_0x4eb773['style']['visibility']=_0x2669ce(0x160),setTimeout(()=>{const _0x132efd=_0x2669ce;!_0x4eb773['classList']['contains']('active')&&(_0x4eb773[_0x132efd(0x2e8)][_0x132efd(0x30c)]=_0x132efd(0x23c));},0x12c),console['log'](_0x2669ce(0x2cc));}async function createTestMatch(){const _0xbafb18=a2_0x31cce1;console[_0xbafb18(0x2ef)]('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x333f79=auth[_0xbafb18(0x178)];if(!_0x333f79){showNotification(_0xbafb18(0x36d),'error');return;}const _0x425a28='D1',_0x3eda4e='approvedMatches',_0x281632={'winnerUsername':_0xbafb18(0x22f),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0xbafb18(0x314),'winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x333f79['email'],'createdAt':serverTimestamp(),'createdBy':_0x333f79['email'],'isTestMatch':!![],'ladder':_0x425a28,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0xbafb18(0x15d)+_0x333f79['email']};console[_0xbafb18(0x2ef)]('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x3eda4e),_0x281632),showNotification(_0xbafb18(0x19a),'success'),closeCreateTestMatchModal();}catch(_0x382b2d){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x382b2d),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x382b2d['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x3efb4a=a2_0x31cce1;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console[_0x3efb4a(0x2ef)]('DB:',db),console[_0x3efb4a(0x2ef)]('Current\x20user:',auth[_0x3efb4a(0x178)]);const _0x890e83=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x890e83);const _0x3939ac=query(_0x890e83,where(_0x3efb4a(0x18c),'==','nonexistent'));console[_0x3efb4a(0x2ef)](_0x3efb4a(0x33f),_0x3939ac);const _0x44c412=await getDocs(_0x3939ac);console['log']('Query\x20executed.\x20Empty:',_0x44c412['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x3fff49){console[_0x3efb4a(0x3b0)](_0x3efb4a(0x1b5),_0x3fff49);}};function setupCreateTestMatchButton(){const _0x15d4aa=a2_0x31cce1,_0x4034c6=document['getElementById']('create-test-match-btn');if(!_0x4034c6){console['error'](_0x15d4aa(0x203));return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x4fdf3b=_0x4034c6['cloneNode'](!![]);_0x4034c6['parentNode']['replaceChild'](_0x4fdf3b,_0x4034c6),_0x4fdf3b['addEventListener']('click',function(_0x244a33){const _0x518493=_0x15d4aa;_0x244a33['preventDefault'](),_0x244a33[_0x518493(0x1ca)](),console[_0x518493(0x2ef)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0x15d4aa(0x2ef)]('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x5de82d=0x1){const _0xf13c73=a2_0x31cce1,_0xc5ba96=document['getElementById']('matches-table-body');if(!_0xc5ba96)return;_0xc5ba96[_0xf13c73(0x310)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x34613c=currentLadder[_0xf13c73(0x326)](),_0x2e039d=matchesPagination[_0x34613c],_0x22588f=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x47050f=collection(db,_0x22588f);_0x5de82d<=0x1?(_0x2e039d['page']=0x1,_0x2e039d['firstVisible']=null,_0x2e039d['lastVisible']=null):_0x2e039d['page']=_0x5de82d;const _0x22c599=getMatchesFilters();let _0xa42f1b=_0x47050f;if(_0x22c599['startDate']||_0x22c599[_0xf13c73(0x3c4)]||_0x22c599['searchTerm']){let _0x16b24e=[];_0x22c599['startDate']&&_0x22c599['endDate']?(_0x16b24e['push'](where(_0xf13c73(0x276),'>=',_0x22c599[_0xf13c73(0x350)]),where(_0xf13c73(0x276),'<=',_0x22c599[_0xf13c73(0x3c4)])),_0xa42f1b=query(_0x47050f,..._0x16b24e)):_0xa42f1b=query(_0x47050f,orderBy(_0xf13c73(0x276),'desc'));}else _0xa42f1b=query(_0x47050f,orderBy('approvedAt','desc'));_0x5de82d>0x1&&_0x2e039d['lastVisible']?_0xa42f1b=query(_0xa42f1b,startAfter(_0x2e039d[_0xf13c73(0x1f9)]),limit(PAGE_SIZE)):_0xa42f1b=query(_0xa42f1b,limit(PAGE_SIZE));const _0x1854cf=await getDocs(_0xa42f1b);!_0x1854cf[_0xf13c73(0x318)]&&(_0x2e039d['firstVisible']=_0x1854cf['docs'][0x0],_0x2e039d['lastVisible']=_0x1854cf['docs'][_0x1854cf['docs']['length']-0x1]);let _0x3225dc=![];if(!_0x1854cf['empty']){const _0xafd83e=query(_0xa42f1b,startAfter(_0x2e039d['lastVisible']),limit(0x1)),_0x39e822=await getDocs(_0xafd83e);_0x3225dc=!_0x39e822['empty'];}const _0x17e72c=document['getElementById']('matches-prev-page'),_0x4cdf97=document['getElementById']('matches-next-page'),_0x390713=document['getElementById'](_0xf13c73(0x1bd));if(_0x17e72c)_0x17e72c['disabled']=_0x2e039d['page']<=0x1;if(_0x4cdf97)_0x4cdf97['disabled']=!_0x3225dc;if(_0x390713)_0x390713['textContent']='Page\x20'+_0x2e039d[_0xf13c73(0x187)];if(_0x1854cf[_0xf13c73(0x318)]){_0xc5ba96[_0xf13c73(0x310)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0xc5ba96[_0xf13c73(0x310)]='',_0x1854cf[_0xf13c73(0x186)](_0xf18160=>{const _0x331f64=_0xf13c73,_0x293431=_0xf18160[_0x331f64(0x18f)](),_0x298395=document[_0x331f64(0x1a1)]('tr'),_0x396d28=_0x293431['approvedAt']?new Date(_0x293431['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x298395['setAttribute']('data-id',_0xf18160['id']),_0x298395['setAttribute']('data-ladder',currentLadder),_0x298395[_0x331f64(0x34c)][_0x331f64(0x1b8)](_0x331f64(0x1c3)),_0x298395['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x396d28+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x293431[_0x331f64(0x332)]||'Unknown')+_0x331f64(0x16e)+(_0x293431['loserUsername']||'Unknown')+_0x331f64(0x229)+(_0x293431['winnerScore']||0x0)+'\x20-\x20'+(_0x293431['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x293431['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x331f64(0x189)+_0xf18160['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0xf18160['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xc5ba96[_0x331f64(0x3ac)](_0x298395);}),setupMatchesActionButtons(),_0x22c599['searchTerm']&&filterMatchesTable(),console['log']('Loaded\x20'+_0x1854cf['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x2e039d['page']);}catch(_0x3fa9e4){console['error'](_0xf13c73(0x19b),_0x3fa9e4),_0xc5ba96['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x3fa9e4['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x48a86a,_0x34af0d){const _0x14e378=a2_0x31cce1;try{console['log'](_0x14e378(0x1e0)+_0x48a86a+'\x20from\x20'+_0x34af0d+'\x20ladder');const _0x10d0a8=auth[_0x14e378(0x178)];if(!_0x10d0a8){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches',_0x14e378(0x3b0));return;}const _0x3b223d=_0x34af0d==='D1'?_0x14e378(0x39f):_0x34af0d==='D2'?'approvedMatchesD2':_0x14e378(0x3bf);console['log']('Using\x20collection:\x20'+_0x3b223d),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x3b223d,_0x48a86a)),console['log']('Match\x20deleted\x20successfully'),showNotification(_0x14e378(0x3bd),'success');const _0x1ca29d=_0x34af0d['toLowerCase']();loadMatchesData(matchesPagination[_0x1ca29d][_0x14e378(0x187)]);}catch(_0x428614){console[_0x14e378(0x3b0)]('Error\x20deleting\x20match:',_0x428614),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x428614['message'],'error');}}function setupMatchesActionButtons(){const _0x1a63e7=a2_0x31cce1;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document[_0x1a63e7(0x17e)]('.edit-match-btn')['forEach'](_0x5736c2=>{_0x5736c2['addEventListener']('click',_0x3b21e7=>{const _0x3ca5ff=a2_0x11de;_0x3b21e7[_0x3ca5ff(0x33b)](),_0x3b21e7['stopPropagation']();const _0x474699=_0x3b21e7[_0x3ca5ff(0x395)]['dataset']['id'],_0x4510ee=_0x3b21e7['currentTarget']['closest']('tr'),_0x27596e=_0x4510ee[_0x3ca5ff(0x2c6)]['ladder'];console[_0x3ca5ff(0x2ef)]('Edit\x20match\x20clicked:',_0x474699,_0x27596e),openEditMatchModal(_0x474699,_0x27596e);});}),document['querySelectorAll'](_0x1a63e7(0x191))['forEach'](_0x1107c7=>{const _0xd9d271=_0x1a63e7;_0x1107c7['addEventListener'](_0xd9d271(0x386),_0x2a8b07=>{const _0x265cd5=_0xd9d271;_0x2a8b07['preventDefault'](),_0x2a8b07[_0x265cd5(0x1ca)]();const _0x4b0f52=_0x2a8b07['currentTarget'][_0x265cd5(0x2c6)]['id'],_0x515ecf=_0x2a8b07['currentTarget'][_0x265cd5(0x2cf)]('tr'),_0x32cfc4=_0x515ecf[_0x265cd5(0x2c6)]['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x4b0f52,_0x32cfc4),confirm(_0x265cd5(0x234))&&deleteMatch(_0x4b0f52,_0x32cfc4);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x34028e=a2_0x31cce1,_0x150421=document[_0x34028e(0x271)]('matches-search')['value']['toLowerCase'](),_0x4b7e34=document['querySelectorAll']('#matches-table-body\x20tr');let _0x528181=0x0;_0x4b7e34[_0x34028e(0x186)](_0x4c0420=>{const _0x4049ad=_0x34028e;if(_0x4c0420['classList']['contains']('loading-cell')||_0x4c0420['classList']['contains']('empty-state')||_0x4c0420['classList']['contains']('error-state'))return;const _0x182e88=_0x4c0420['cells'][0x1]['textContent']['toLowerCase'](),_0x1536db=_0x4c0420['cells'][0x2]['textContent']['toLowerCase'](),_0x40a450=_0x4c0420['cells'][0x4][_0x4049ad(0x2f4)]['toLowerCase']();_0x182e88['includes'](_0x150421)||_0x1536db['includes'](_0x150421)||_0x40a450['includes'](_0x150421)?(_0x4c0420['style']['display']='',_0x528181++):_0x4c0420['style']['display']='none';});if(_0x528181===0x0&&_0x4b7e34['length']>0x0){const _0x3e3279=document['getElementById']('matches-table-body'),_0xca779=_0x3e3279[_0x34028e(0x1c7)]('.no-results');if(!_0xca779){const _0x26c6c9=document['createElement']('tr');_0x26c6c9['className']=_0x34028e(0x1d7),_0x26c6c9['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x150421+'\x27</td>',_0x3e3279['appendChild'](_0x26c6c9);}}else{const _0x4c45ba=document['querySelector']('.no-results');_0x4c45ba&&_0x4c45ba['remove']();}}function getMatchesFilters(){const _0x334c03=a2_0x31cce1,_0x1c7d11=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x2e6416=document['getElementById'](_0x334c03(0x280))['value'],_0x3ff77c=document['getElementById']('matches-end-date')['value'];let _0x1e0d9e=null,_0x1328b7=null;return _0x2e6416&&(_0x1e0d9e=new Date(_0x2e6416),_0x1e0d9e['setHours'](0x0,0x0,0x0,0x0),_0x1e0d9e=Timestamp['fromDate'](_0x1e0d9e)),_0x3ff77c&&(_0x1328b7=new Date(_0x3ff77c),_0x1328b7['setHours'](0x17,0x3b,0x3b,0x3e7),_0x1328b7=Timestamp['fromDate'](_0x1328b7)),{'searchTerm':_0x1c7d11,'startDate':_0x1e0d9e,'endDate':_0x1328b7};}async function applyMatchesFilters(){const _0xacc912=a2_0x31cce1,_0x26835f=currentLadder[_0xacc912(0x326)]();matchesPagination[_0x26835f]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x2eb325=a2_0x31cce1;document['getElementById'](_0x2eb325(0x280))['value']='',document[_0x2eb325(0x271)](_0x2eb325(0x1e9))[_0x2eb325(0x1ad)]='',document['getElementById']('matches-search')['value']='';const _0x3185ee=currentLadder[_0x2eb325(0x326)]();matchesPagination[_0x3185ee]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x2d6156,_0x3cc17e){const _0x45d21f=a2_0x31cce1,_0x41b5bf=document['getElementById']('edit-match-modal');if(!_0x41b5bf)return;try{const _0x3adfb2=_0x3cc17e==='D1'?'approvedMatches':_0x3cc17e==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x53ebfe=doc(db,_0x3adfb2,_0x2d6156),_0x29b547=await getDoc(_0x53ebfe);if(!_0x29b547['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x3caa1b=_0x29b547[_0x45d21f(0x18f)]();document['getElementById']('edit-match-id')['value']=_0x2d6156,document['getElementById'](_0x45d21f(0x3ae))[_0x45d21f(0x1ad)]=_0x3cc17e,document['getElementById']('edit-match-winner')['value']=_0x3caa1b['winnerUsername']||'',document[_0x45d21f(0x271)]('edit-match-winner-score')[_0x45d21f(0x1ad)]=_0x3caa1b[_0x45d21f(0x28c)]||0x0,document['getElementById'](_0x45d21f(0x328))['value']=_0x3caa1b[_0x45d21f(0x29f)]||0x0,document['getElementById'](_0x45d21f(0x32e))['value']=_0x3caa1b['winnerComment']||'',document['getElementById'](_0x45d21f(0x3a3))['value']=_0x3caa1b['loserUsername']||'',document['getElementById']('edit-match-loser-score')['value']=_0x3caa1b['loserScore']||0x0,document[_0x45d21f(0x271)]('edit-match-loser-suicides')['value']=_0x3caa1b[_0x45d21f(0x244)]||0x0,document[_0x45d21f(0x271)](_0x45d21f(0x265))['value']=_0x3caa1b['loserComment']||'',document['getElementById'](_0x45d21f(0x167))['value']=_0x3caa1b['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')['value']=_0x3caa1b['winnerDemoLink']||'',document[_0x45d21f(0x271)]('edit-match-loser-demo')['value']=_0x3caa1b['loserDemoLink']||_0x3caa1b[_0x45d21f(0x286)]||'',document[_0x45d21f(0x271)]('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x3caa1b['winnerUsername']+'\x20vs\x20'+_0x3caa1b['loserUsername'],_0x41b5bf[_0x45d21f(0x34c)]['add'](_0x45d21f(0x1df));}catch(_0x21a7e8){console['error'](_0x45d21f(0x1ea),_0x21a7e8),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x794682=a2_0x31cce1,_0x158a63=document['getElementById']('edit-match-modal');_0x158a63&&_0x158a63['classList']['remove'](_0x794682(0x1df));}async function saveEditedMatch(){const _0x362dc8=a2_0x31cce1;try{const _0x28b276=document['getElementById']('edit-match-id')[_0x362dc8(0x1ad)],_0x147592=document['getElementById']('edit-match-ladder')['value'];if(!_0x28b276||!_0x147592){showNotification(_0x362dc8(0x252),'error');return;}const _0x2618b4=_0x147592==='D1'?'approvedMatches':_0x147592==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5639b3=document[_0x362dc8(0x271)]('edit-match-winner')['value']['trim'](),_0x24bd0a=parseInt(document['getElementById']('edit-match-winner-score')[_0x362dc8(0x1ad)]),_0x4eb790=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x5812df=document['getElementById']('edit-match-winner-comment')[_0x362dc8(0x1ad)]['trim'](),_0x3fa754=document[_0x362dc8(0x271)](_0x362dc8(0x3a3))['value']['trim'](),_0x51003a=parseInt(document[_0x362dc8(0x271)]('edit-match-loser-score')['value']),_0x2fb624=parseInt(document['getElementById'](_0x362dc8(0x279))['value']),_0x1beb7b=document['getElementById']('edit-match-loser-comment')['value']['trim'](),_0x187e23=document['getElementById'](_0x362dc8(0x167))[_0x362dc8(0x1ad)]['trim'](),_0x290a70=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x589635=document['getElementById']('edit-match-loser-demo')[_0x362dc8(0x1ad)]['trim']();if(!_0x5639b3||!_0x3fa754){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x2618b4,_0x28b276),{'winnerUsername':_0x5639b3,'winnerScore':_0x24bd0a,'winnerSuicides':_0x4eb790,'winnerComment':_0x5812df,'loserUsername':_0x3fa754,'loserScore':_0x51003a,'loserSuicides':_0x2fb624,'loserComment':_0x1beb7b,'mapPlayed':_0x187e23,'winnerDemoLink':_0x290a70||null,'loserDemoLink':_0x589635||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x147592['toLowerCase']()]['page']);}catch(_0x206597){console[_0x362dc8(0x3b0)]('Error\x20saving\x20match:',_0x206597),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x206597['message'],'error');}}async function openDeleteMatchModal(_0x413093,_0x33cc74){const _0x2bf6b3=a2_0x31cce1;try{const _0x27060a=_0x33cc74==='D1'?_0x2bf6b3(0x39f):_0x33cc74==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3c3168=doc(db,_0x27060a,_0x413093),_0x437f3a=await getDoc(_0x3c3168);if(!_0x437f3a['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x5b5a7d=_0x437f3a['data'](),_0x8aca1b=document['getElementById']('delete-match-confirm-modal');_0x8aca1b['dataset']['matchId']=_0x413093,_0x8aca1b['dataset'][_0x2bf6b3(0x36c)]=_0x33cc74;const _0x447142=_0x5b5a7d['approvedAt']?new Date(_0x5b5a7d['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x2bf6b3(0x218),_0x1d0448=document['getElementById'](_0x2bf6b3(0x2af));_0x1d0448['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x447142+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x5b5a7d['winnerUsername']+_0x2bf6b3(0x1ab)+_0x5b5a7d[_0x2bf6b3(0x351)]+_0x2bf6b3(0x192)+(_0x5b5a7d['winnerScore']||0x0)+'\x20-\x20'+(_0x5b5a7d[_0x2bf6b3(0x36f)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x5b5a7d[_0x2bf6b3(0x38c)]||_0x2bf6b3(0x218))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x33cc74+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x8aca1b['classList']['add']('active');}catch(_0x44a3d4){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x44a3d4),showNotification(_0x2bf6b3(0x300),'error');}}function closeDeleteMatchModal(){const _0x28eedb=a2_0x31cce1,_0x3b3fca=document['getElementById']('delete-match-confirm-modal');_0x3b3fca&&(_0x3b3fca[_0x28eedb(0x34c)]['remove']('active'),_0x3b3fca['removeAttribute'](_0x28eedb(0x3a0)),_0x3b3fca['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x4af37d=a2_0x31cce1,_0x44106e=document['getElementById'](_0x4af37d(0x2ad)),_0xe014ed=_0x44106e['dataset']['matchId'],_0x50c3d4=_0x44106e['dataset'][_0x4af37d(0x36c)];if(!_0xe014ed||!_0x50c3d4){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x5e5dcd=_0x50c3d4==='D1'?_0x4af37d(0x39f):_0x50c3d4==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x5e5dcd,_0xe014ed)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x50c3d4['toLowerCase']()][_0x4af37d(0x187)]);}catch(_0x51a638){console['error']('Error\x20deleting\x20match:',_0x51a638),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x51a638['message'],'error');}}async function saveHighlightChanges(){const _0x50eac3=a2_0x31cce1,_0xed363f=document['getElementById']('edit-highlight-id')['value'],_0x8cf2a2=document['getElementById'](_0x50eac3(0x34d))['value'];let _0x5ea456={'title':document['getElementById'](_0x50eac3(0x2ba))['value']['trim'](),'type':_0x8cf2a2,'description':document['getElementById'](_0x50eac3(0x2c1))['value']['trim'](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth[_0x50eac3(0x178)]['email']};if(_0x8cf2a2===_0x50eac3(0x20e)){_0x5ea456[_0x50eac3(0x2a6)]=document['getElementById'](_0x50eac3(0x35f))[_0x50eac3(0x1ad)][_0x50eac3(0x32f)](),_0x5ea456['map']=document['getElementById']('edit-highlight-map-input')[_0x50eac3(0x1ad)][_0x50eac3(0x32f)]();const _0x1b0a3d=document['getElementById'](_0x50eac3(0x222))[_0x50eac3(0x1ad)];_0x5ea456[_0x50eac3(0x1ec)]=_0x1b0a3d?Timestamp['fromDate'](new Date(_0x1b0a3d)):null,_0x5ea456['winnerName']=document['getElementById']('edit-highlight-winnerName-input')['value'][_0x50eac3(0x32f)](),_0x5ea456[_0x50eac3(0x28c)]=document['getElementById']('edit-highlight-winnerScore-input')[_0x50eac3(0x1ad)][_0x50eac3(0x32f)](),_0x5ea456[_0x50eac3(0x1b4)]=document['getElementById'](_0x50eac3(0x34a))['value']['trim'](),_0x5ea456['loserScore']=document['getElementById']('edit-highlight-loserScore-input')['value']['trim'](),_0x5ea456[_0x50eac3(0x2f9)]=document[_0x50eac3(0x271)]('edit-highlight-matchLink-input')['value']['trim'](),_0x5ea456['mapCreator']=null,_0x5ea456['mapVersion']=null,_0x5ea456['creatorImageUrl']=null,_0x5ea456[_0x50eac3(0x341)]=null,_0x5ea456['achievementType']=null,_0x5ea456[_0x50eac3(0x28e)]=null,_0x5ea456['playerProfileUrl']=null;}else{if(_0x8cf2a2===_0x50eac3(0x323))_0x5ea456['map']=document['getElementById']('edit-highlight-map-input')['value'][_0x50eac3(0x32f)](),_0x5ea456[_0x50eac3(0x2a9)]=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x5ea456[_0x50eac3(0x21c)]=document['getElementById']('edit-highlight-mapVersion-input')['value'][_0x50eac3(0x32f)](),_0x5ea456['creatorImageUrl']=document[_0x50eac3(0x271)]('edit-highlight-creatorImageUrl-input')['value'][_0x50eac3(0x32f)](),_0x5ea456[_0x50eac3(0x2a6)]=null,_0x5ea456['matchDate']=null,_0x5ea456[_0x50eac3(0x1b0)]=null,_0x5ea456['winnerScore']=null,_0x5ea456[_0x50eac3(0x1b4)]=null,_0x5ea456[_0x50eac3(0x36f)]=null,_0x5ea456[_0x50eac3(0x2f9)]=null,_0x5ea456[_0x50eac3(0x341)]=null,_0x5ea456['achievementType']=null,_0x5ea456['achievementDetails']=null,_0x5ea456['playerProfileUrl']=null;else _0x8cf2a2===_0x50eac3(0x36b)&&(_0x5ea456[_0x50eac3(0x341)]=document[_0x50eac3(0x271)]('edit-highlight-achievementPlayer-input')[_0x50eac3(0x1ad)]['trim'](),_0x5ea456[_0x50eac3(0x2f2)]=document['getElementById']('edit-highlight-achievementType-input')['value']['trim'](),_0x5ea456['achievementDetails']=document[_0x50eac3(0x271)]('edit-highlight-achievementDetails-input')['value']['trim'](),_0x5ea456['playerProfileUrl']=document[_0x50eac3(0x271)]('edit-highlight-playerProfileUrl-input')[_0x50eac3(0x1ad)]['trim'](),_0x5ea456['matchInfo']=null,_0x5ea456['map']=null,_0x5ea456['matchDate']=null,_0x5ea456['winnerName']=null,_0x5ea456['winnerScore']=null,_0x5ea456['loserName']=null,_0x5ea456['loserScore']=null,_0x5ea456['matchLink']=null,_0x5ea456['mapCreator']=null,_0x5ea456['mapVersion']=null,_0x5ea456[_0x50eac3(0x1a9)]=null);}try{if(_0xed363f){_0x5ea456[_0x50eac3(0x290)]=serverTimestamp();const _0x5a7433=doc(db,'highlights',_0xed363f);await updateDoc(_0x5a7433,_0x5ea456),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x5ea456[_0x50eac3(0x1f5)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x5ea456),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x20ca09){console['error'](_0x50eac3(0x196),_0x20ca09),showNotification(_0x50eac3(0x2d1)+_0x20ca09['message'],'error');}}async function resimulateMatch(){const _0x105a0b=a2_0x31cce1;try{const _0x1a7969=document[_0x105a0b(0x271)](_0x105a0b(0x39d))['value'];if(!_0x1a7969){showNotification('Match\x20ID\x20is\x20required',_0x105a0b(0x3b0));return;}const _0xc714fd=auth[_0x105a0b(0x178)];if(!_0xc714fd){showNotification(_0x105a0b(0x25c),'error');return;}const _0x131d52=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2ac845=doc(db,_0x131d52,_0x1a7969),_0x451d95=await getDoc(_0x2ac845);if(!_0x451d95['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0xfeec8e=_0x451d95[_0x105a0b(0x18f)](),_0x4a9b6a=_0xfeec8e['approvedAt']?_0xfeec8e['approvedAt']['toDate']()['toLocaleString']():_0xfeec8e[_0x105a0b(0x1ec)]?_0xfeec8e['matchDate']['toDate']?_0xfeec8e[_0x105a0b(0x1ec)][_0x105a0b(0x207)]()['toLocaleString']():new Date(_0xfeec8e['matchDate'])['toLocaleString']():'Unknown',_0x212314='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0xfeec8e['winnerUsername']+_0x105a0b(0x38f)+_0xfeec8e['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0xfeec8e['winnerScore']+'-'+_0xfeec8e['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0xfeec8e['mapPlayed']||_0xfeec8e['mapName']||_0x105a0b(0x1c6))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x4a9b6a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x1a7969+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+_0x105a0b(0x304);document['getElementById'](_0x105a0b(0x397))[_0x105a0b(0x310)]=_0x212314,document['getElementById'](_0x105a0b(0x397))['style'][_0x105a0b(0x30c)]='block',document['getElementById'](_0x105a0b(0x1dd))['style'][_0x105a0b(0x30c)]=_0x105a0b(0x2ea),window[_0x105a0b(0x1fe)]={'matchId':_0x1a7969,'matchData':_0xfeec8e,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x23c9da){console['error']('Error\x20finding\x20match:',_0x23c9da),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x23c9da['message'],_0x105a0b(0x3b0));}}async function confirmResimulateMatch(){const _0xcc071f=a2_0x31cce1;try{const {matchId:_0xf2024e,matchData:_0x48b96d,ladder:_0x5c4140}=window['pendingResimulateData'];if(!_0xf2024e||!_0x48b96d){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x3f9328=_0x5c4140==='D1'?_0xcc071f(0x32c):_0x5c4140==='D2'?'playersD2':'playersD3',_0x49160d=_0x5c4140==='D1'?'eloHistory':_0x5c4140==='D2'?'eloHistoryD2':_0xcc071f(0x39c),[_0x1ac840,_0x496bf0]=await Promise[_0xcc071f(0x38e)]([getDocs(query(collection(db,_0x3f9328),where('username','==',_0x48b96d[_0xcc071f(0x332)]))),getDocs(query(collection(db,_0x3f9328),where('username','==',_0x48b96d[_0xcc071f(0x351)])))]);if(_0x1ac840['empty']||_0x496bf0['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x1fc5aa=_0x1ac840['docs'][0x0]['id'],_0x2cc873=_0x496bf0['docs'][0x0]['id'],_0x2126d5=_0x1ac840['docs'][0x0]['data'](),_0xbae234=_0x496bf0['docs'][0x0]['data'](),[_0x41f0ef,_0x79f720]=await Promise['all']([getDocs(query(collection(db,_0x49160d),where('playerId','==',_0x1fc5aa),where('matchId','==',_0xf2024e))),getDocs(query(collection(db,_0x49160d),where('playerId','==',_0x2cc873),where(_0xcc071f(0x1c2),'==',_0xf2024e)))]),_0x1f6521=!_0x41f0ef['empty'],_0x53676f=!_0x79f720[_0xcc071f(0x318)],_0x495b9b='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x1f6521?'\x20Exists':_0xcc071f(0x1ce))+_0xcc071f(0x30f)+(_0x53676f?_0xcc071f(0x1a0):_0xcc071f(0x1ce))+_0xcc071f(0x236)+(_0x2126d5['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0xbae234['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x2126d5[_0xcc071f(0x241)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0xbae234[_0xcc071f(0x241)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x495b9b,document[_0xcc071f(0x271)](_0xcc071f(0x28f))['style']['display']=_0xcc071f(0x2ea);if(_0x1f6521&&_0x53676f){showNotification(_0xcc071f(0x267),'warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x41e7be=_0x48b96d['approvedAt']||_0x48b96d[_0xcc071f(0x1ec)]||serverTimestamp(),[_0x337d64,_0xf372b7]=await Promise[_0xcc071f(0x38e)]([getPlayerEloAtTime(_0x1fc5aa,_0x41e7be,_0x49160d),getPlayerEloAtTime(_0x2cc873,_0x41e7be,_0x49160d)]),{calculateElo:_0x3ea624}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x1d535b,newLoserRating:_0x223e87}=_0x3ea624(_0x337d64,_0xf372b7),_0x3f44c5=_0x2126d5['position']||Number['MAX_SAFE_INTEGER'],_0x2729fc=_0xbae234['position']||Number[_0xcc071f(0x21e)];let _0x5aad37=_0x3f44c5,_0x410565=_0x2729fc;_0x3f44c5>_0x2729fc&&(_0x5aad37=_0x2729fc,_0x410565=_0x2729fc+0x1);const _0x59f9b8=writeBatch(db),_0x1d5513=doc(db,_0x3f9328,_0x1fc5aa);_0x59f9b8['update'](_0x1d5513,{'eloRating':_0x1d535b,'position':_0x5aad37,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xcc071f(0x178)][_0xcc071f(0x2a1)]});const _0x27f7a7=doc(db,_0x3f9328,_0x2cc873);_0x59f9b8['update'](_0x27f7a7,{'eloRating':_0x223e87,'position':_0x410565,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x3f44c5>_0x2729fc){const _0x16032e=await getDocs(query(collection(db,_0x3f9328),where(_0xcc071f(0x241),'>',_0x2729fc),where(_0xcc071f(0x241),'<',_0x3f44c5)));_0x16032e[_0xcc071f(0x186)](_0x3f4d14=>{const _0x12e4f6=doc(db,_0x3f9328,_0x3f4d14['id']),_0x45ba02=_0x3f4d14['data']()['position'];_0x59f9b8['update'](_0x12e4f6,{'position':_0x45ba02+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x1f6521){const _0x4f8cb6=doc(collection(db,_0x49160d));_0x59f9b8[_0xcc071f(0x258)](_0x4f8cb6,{'playerId':_0x1fc5aa,'player':_0x48b96d[_0xcc071f(0x332)],'previousElo':_0x337d64,'newElo':_0x1d535b,'eloChange':_0x1d535b-_0x337d64,'opponentId':_0x2cc873,'opponent':_0x48b96d['loserUsername'],'matchResult':'win','previousPosition':_0x3f44c5,'newPosition':_0x5aad37,'positionChange':_0x5aad37-_0x3f44c5,'matchId':_0xf2024e,'timestamp':_0x41e7be,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xcc071f(0x178)][_0xcc071f(0x2a1)],'gameMode':_0x5c4140,'matchScore':_0x48b96d['winnerScore']+'-'+_0x48b96d[_0xcc071f(0x36f)],'mapPlayed':_0x48b96d[_0xcc071f(0x38c)]||_0x48b96d[_0xcc071f(0x334)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x53676f){const _0x459d91=doc(collection(db,_0x49160d));_0x59f9b8[_0xcc071f(0x258)](_0x459d91,{'playerId':_0x2cc873,'player':_0x48b96d['loserUsername'],'previousElo':_0xf372b7,'newElo':_0x223e87,'eloChange':_0x223e87-_0xf372b7,'opponentId':_0x1fc5aa,'opponent':_0x48b96d['winnerUsername'],'matchResult':_0xcc071f(0x2a8),'previousPosition':_0x2729fc,'newPosition':_0x410565,'positionChange':_0x410565-_0x2729fc,'matchId':_0xf2024e,'timestamp':_0x41e7be,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xcc071f(0x178)][_0xcc071f(0x2a1)],'gameMode':_0x5c4140,'matchScore':_0x48b96d['winnerScore']+'-'+_0x48b96d['loserScore'],'mapPlayed':_0x48b96d[_0xcc071f(0x38c)]||_0x48b96d[_0xcc071f(0x334)]||'Unknown','note':_0xcc071f(0x1f4)});}const _0x5d0048=_0x5c4140==='D1'?'approvedMatches':_0x5c4140==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2cc5bb=doc(db,_0x5d0048,_0xf2024e);_0x59f9b8['update'](_0x2cc5bb,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xcc071f(0x178)]['uid'],'resimulatedReason':_0xcc071f(0x268),'originalWinnerElo':_0x2126d5['eloRating'],'originalLoserElo':_0xbae234['eloRating'],'originalWinnerPosition':_0x3f44c5,'originalLoserPosition':_0x2729fc,'resimulatedWinnerElo':_0x1d535b,'resimulatedLoserElo':_0x223e87,'resimulatedWinnerPosition':_0x5aad37,'resimulatedLoserPosition':_0x410565}),await _0x59f9b8['commit']();const _0x502cee=(!_0x1f6521?0x1:0x0)+(!_0x53676f?0x1:0x0),_0x56017f=_0x3f44c5!==_0x5aad37||_0x2729fc!==_0x410565;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x502cee+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x337d64+''+_0x1d535b+'\x20(+'+(_0x1d535b-_0x337d64)+'),\x20')+(_0xcc071f(0x17a)+_0xf372b7+''+_0x223e87+'\x20('+(_0x223e87-_0xf372b7)+_0xcc071f(0x246))+(''+(_0x56017f?'Positions\x20updated:\x20Winner\x20'+_0x3f44c5+''+_0x5aad37+',\x20Loser\x20'+_0x2729fc+''+_0x410565:_0xcc071f(0x184))),'success'),closeResimulateModal(),document['querySelector'](_0xcc071f(0x230))&&loadPlayersData();}catch(_0x2476c6){console['error'](_0xcc071f(0x2f8),_0x2476c6),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x2476c6['message'],'error');}}async function getPlayerEloAtTime(_0x183bca,_0x34b9ba,_0x5a1e74){const _0x29e2d2=a2_0x31cce1;try{const _0xf35205=_0x34b9ba[_0x29e2d2(0x207)]?_0x34b9ba[_0x29e2d2(0x207)]():new Date(_0x34b9ba),_0x2776b1=query(collection(db,_0x5a1e74),where('playerId','==',_0x183bca),where('timestamp','<',_0x34b9ba),orderBy(_0x29e2d2(0x169),'desc'),limit(0x1)),_0x17a00c=await getDocs(_0x2776b1);if(!_0x17a00c[_0x29e2d2(0x318)]){const _0x4dda07=_0x17a00c[_0x29e2d2(0x174)][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x183bca+'\x20before\x20match:\x20'+_0x4dda07['newElo']),_0x4dda07['newElo'];}else return console[_0x29e2d2(0x2ef)](_0x29e2d2(0x1b1)+_0x183bca+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x556ff7){return console['error'](_0x29e2d2(0x2fd)+_0x183bca+':',_0x556ff7),0x4b0;}}function openResimulateModal(){const _0x494580=a2_0x31cce1;console[_0x494580(0x2ef)]('openResimulateModal\x20called!');const _0x4e0651=document[_0x494580(0x271)]('resimulate-modal');console[_0x494580(0x2ef)]('Modal\x20element\x20found:',_0x4e0651);if(!_0x4e0651){console['error']('Modal\x20element\x20not\x20found!');return;}_0x4e0651['style']['display']='block',_0x4e0651['style'][_0x494580(0x2bf)]='visible',_0x4e0651['style']['opacity']='1',_0x4e0651[_0x494580(0x34c)]['add']('active'),console['log'](_0x494580(0x1a8)),console['log'](_0x494580(0x352),window['getComputedStyle'](_0x4e0651)['display']);const _0x3ddf14=document['getElementById']('match-details-container'),_0x34716c=document['getElementById'](_0x494580(0x28f)),_0x415e66=document[_0x494580(0x271)]('confirm-resimulate-btn'),_0x25cf74=document['getElementById']('resimulate-match-id');if(_0x3ddf14)_0x3ddf14[_0x494580(0x310)]='';if(_0x34716c)_0x34716c['innerHTML']='';if(_0x415e66)_0x415e66[_0x494580(0x2e8)]['display']='none';if(_0x25cf74)_0x25cf74['value']='';console[_0x494580(0x2ef)]('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x139dd8=a2_0x31cce1;document['getElementById']('resimulate-modal')[_0x139dd8(0x2e8)][_0x139dd8(0x30c)]='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window[a2_0x31cce1(0x2e4)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x2a74b1=a2_0x31cce1;console[_0x2a74b1(0x2ef)]('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x2d15e1){console[_0x2a74b1(0x3b0)](_0x2a74b1(0x3b2),_0x2d15e1),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x2d15e1['message'],'error');}}function renderPointsOverview(_0x4a54ed){const _0x29a4a6=a2_0x31cce1,_0x511d86=document['getElementById'](_0x29a4a6(0x173));if(!_0x511d86)return;if(_0x4a54ed[_0x29a4a6(0x2fe)]===0x0){_0x511d86[_0x29a4a6(0x310)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x511d86[_0x29a4a6(0x310)]='',_0x4a54ed[_0x29a4a6(0x186)](_0x130aea=>{const _0xb5e1e6=_0x29a4a6,_0xa875b5=document['createElement']('tr'),_0x16a276=_0x130aea['displayName']||_0x130aea['username']||_0xb5e1e6(0x36e),_0x5d1905=_0x130aea['email']||'No\x20email',_0x319c06=_0x130aea['points']||0x0,_0xebfe09=_0x130aea[_0xb5e1e6(0x25b)]?new Date(_0x130aea[_0xb5e1e6(0x25b)]['seconds']*0x3e8)['toLocaleDateString']():'Never';_0xa875b5[_0xb5e1e6(0x310)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x16a276+_0xb5e1e6(0x18b)+_0x5d1905+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x319c06>0x3e8?_0xb5e1e6(0x29b):_0x319c06>0x1f4?_0xb5e1e6(0x398):'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x319c06['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xebfe09+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x130aea['id']+_0xb5e1e6(0x1dc)+_0x130aea['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x511d86['appendChild'](_0xa875b5);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x15ad75=a2_0x31cce1;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x30ff62=document[_0x15ad75(0x17e)]('.quick-edit-btn');console['log']('Found\x20'+_0x30ff62['length']+_0x15ad75(0x2c2)),_0x30ff62['forEach'](_0x52b046=>{const _0xf7985e=_0x15ad75,_0x1dd8b5=_0x52b046[_0xf7985e(0x226)](!![]);_0x52b046['parentNode']['replaceChild'](_0x1dd8b5,_0x52b046);});const _0x2a54b2=document['querySelectorAll']('.view-history-btn');console[_0x15ad75(0x2ef)](_0x15ad75(0x22a)+_0x2a54b2[_0x15ad75(0x2fe)]+_0x15ad75(0x20a)),_0x2a54b2[_0x15ad75(0x186)](_0x1309c4=>{const _0x17958a=_0x15ad75,_0x587a3e=_0x1309c4[_0x17958a(0x226)](!![]);_0x1309c4['parentNode']['replaceChild'](_0x587a3e,_0x1309c4);}),document[_0x15ad75(0x17e)](_0x15ad75(0x256))['forEach'](_0x2d6dbe=>{const _0x89a799=_0x15ad75;_0x2d6dbe[_0x89a799(0x17d)](_0x89a799(0x386),function(_0x226ae1){const _0x4140f6=_0x89a799;_0x226ae1['preventDefault'](),_0x226ae1['stopPropagation']();const _0x2e018e=this['dataset']['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x2e018e);if(!_0x2e018e){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x4140f6(0x2e8)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x2e018e);});}),document[_0x15ad75(0x17e)]('.view-history-btn')['forEach'](_0x1747d9=>{_0x1747d9['addEventListener']('click',function(_0x354c15){const _0x4dd338=a2_0x11de;_0x354c15['preventDefault'](),_0x354c15['stopPropagation']();const _0x3d1572=this['dataset']['userId'];console[_0x4dd338(0x2ef)]('View\x20history\x20clicked\x20for\x20user:',_0x3d1572);if(!_0x3d1572){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x4dd338(0x2e8)]['opacity']=_0x4dd338(0x2eb),setTimeout(()=>{const _0x42bc4e=_0x4dd338;this[_0x42bc4e(0x2e8)][_0x42bc4e(0x3bb)]='1';},0xc8),loadUserPointsHistory(_0x3d1572);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x261019){const _0x2d7eb4=a2_0x31cce1;console['log'](_0x2d7eb4(0x15b),_0x261019);const _0x379009=document[_0x2d7eb4(0x271)]('quick-edit-points-modal');if(!_0x379009){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...',_0x2d7eb4(0x2b9));const _0x3acb05=doc(db,_0x2d7eb4(0x3b3),_0x261019),_0x4bb8e7=await getDoc(_0x3acb05);if(!_0x4bb8e7['exists']()){showNotification(_0x2d7eb4(0x176),'error');return;}const _0x11463c=_0x4bb8e7[_0x2d7eb4(0x18f)]();console['log']('User\x20data\x20loaded:',_0x11463c);const _0x417e76=document['getElementById']('quick-edit-user-id'),_0x49cff9=document[_0x2d7eb4(0x271)]('quick-edit-display-name'),_0xa0cd4e=document['getElementById'](_0x2d7eb4(0x220)),_0x279ed6=document['getElementById']('quick-edit-current-points'),_0x10c221=document['getElementById'](_0x2d7eb4(0x22d));if(!_0x417e76||!_0x49cff9||!_0xa0cd4e||!_0x279ed6||!_0x10c221){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x2d7eb4(0x287),_0x2d7eb4(0x3b0));return;}_0x417e76['value']=_0x261019,_0x49cff9[_0x2d7eb4(0x2f4)]=_0x11463c['displayName']||_0x11463c['username']||'Unknown\x20User',_0xa0cd4e['textContent']=_0x11463c[_0x2d7eb4(0x181)]||'No\x20email',_0x279ed6[_0x2d7eb4(0x2f4)]=(_0x11463c['points']||0x0)[_0x2d7eb4(0x1bf)](),_0x10c221[_0x2d7eb4(0x385)]();const _0x2d92d2=document['getElementById']('quick-add');_0x2d92d2&&(_0x2d92d2[_0x2d7eb4(0x1d1)]=!![]);_0x379009['classList']['add']('active'),console[_0x2d7eb4(0x2ef)]('Modal\x20opened\x20successfully');const _0x4ddcc3=document[_0x2d7eb4(0x271)](_0x2d7eb4(0x242));_0x4ddcc3&&setTimeout(()=>_0x4ddcc3['focus'](),0x64);}catch(_0x122d88){console['error'](_0x2d7eb4(0x3b1),_0x122d88),showNotification(_0x2d7eb4(0x166)+_0x122d88['message'],'error');}}function closeQuickEditModal(){const _0x2f2dda=a2_0x31cce1,_0x65c7ca=document[_0x2f2dda(0x271)](_0x2f2dda(0x364));_0x65c7ca&&_0x65c7ca['classList']['remove'](_0x2f2dda(0x1df));}async function handleQuickEditPoints(_0x44ae24){const _0x23801b=a2_0x31cce1;_0x44ae24['preventDefault']();const _0x4a917c=document['getElementById']('quick-edit-user-id')['value'],_0x3f3ec3=document[_0x23801b(0x1c7)]('input[name=\x22quick-action\x22]:checked')['value'],_0x23949a=parseInt(document['getElementById']('quick-points-amount')['value']),_0x24a20e=document['getElementById']('quick-points-reason')['value']['trim']();console[_0x23801b(0x2ef)]('Processing\x20points\x20edit:',{'userId':_0x4a917c,'action':_0x3f3ec3,'amount':_0x23949a,'reason':_0x24a20e});if(!_0x4a917c||!_0x23949a||_0x23949a<0x0){showNotification('Please\x20enter\x20valid\x20data',_0x23801b(0x3b0));return;}try{await modifyUserPoints(_0x4a917c,_0x3f3ec3,_0x23949a,_0x24a20e),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x23801b(0x2d8),_0x23801b(0x1d9)),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x4a917c);}catch(_0x2c8f91){console['error'](_0x23801b(0x248),_0x2c8f91),showNotification(_0x23801b(0x24e)+_0x2c8f91['message'],'error');}}async function searchUsersForPoints(){const _0xee5cb=a2_0x31cce1,_0x2c4f5d=document['getElementById']('points-user-search')[_0xee5cb(0x1ad)]['trim']()['toLowerCase'](),_0x2db09c=document['getElementById']('user-search-results');if(!_0x2c4f5d||_0x2c4f5d['length']<0x2){_0x2db09c['innerHTML']='';return;}_0x2db09c['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x2c4d8b=collection(db,'userProfiles'),_0x4635c4=await getDocs(_0x2c4d8b),_0x1d1a79=[];_0x4635c4[_0xee5cb(0x186)](_0xaa230e=>{const _0x1cc5af=_0xee5cb,_0x47e014=_0xaa230e['data'](),_0x167db4=(_0x47e014['displayName']||_0x47e014[_0x1cc5af(0x18c)]||'')['toLowerCase'](),_0xc27eda=(_0x47e014[_0x1cc5af(0x181)]||'')['toLowerCase']();(_0x167db4['includes'](_0x2c4f5d)||_0xc27eda[_0x1cc5af(0x3b6)](_0x2c4f5d))&&_0x1d1a79[_0x1cc5af(0x1c5)]({'id':_0xaa230e['id'],..._0x47e014});});if(_0x1d1a79['length']===0x0){_0x2db09c['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x2db09c[_0xee5cb(0x310)]='',_0x1d1a79['forEach'](_0x18b045=>{const _0x28c87f=_0xee5cb,_0x2c108b=document['createElement']('div');_0x2c108b['className']='search-result-item',_0x2c108b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x18b045['displayName']||_0x18b045['username']||'Unknown')+_0x28c87f(0x289)+(_0x18b045[_0x28c87f(0x181)]||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x18b045['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2c108b['addEventListener']('click',()=>selectUserForPoints(_0x18b045)),_0x2db09c['appendChild'](_0x2c108b);});}catch(_0xefedf6){console[_0xee5cb(0x3b0)]('Error\x20searching\x20users:',_0xefedf6),_0x2db09c['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x437214){const _0xd53063=a2_0x31cce1;document[_0xd53063(0x271)]('selected-user-name')['textContent']=_0x437214['displayName']||_0x437214['username']||'Unknown\x20User',document['getElementById'](_0xd53063(0x20f))[_0xd53063(0x2f4)]=(_0x437214[_0xd53063(0x3a1)]||0x0)['toLocaleString'](),document['getElementById'](_0xd53063(0x25d))[_0xd53063(0x1ad)]=_0x437214['id'],document[_0xd53063(0x271)](_0xd53063(0x346))[_0xd53063(0x2e8)]['display']='block',document['getElementById'](_0xd53063(0x2fa))['style']['display']=_0xd53063(0x2ea),document['getElementById']('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')[_0xd53063(0x1ad)]='';}async function handleModifyPoints(_0x2b6b29){const _0x283b3a=a2_0x31cce1;_0x2b6b29[_0x283b3a(0x33b)]();const _0x5d00c4=document[_0x283b3a(0x271)](_0x283b3a(0x25d))[_0x283b3a(0x1ad)],_0x44ace1=document['getElementById'](_0x283b3a(0x27b))[_0x283b3a(0x1ad)],_0x5a5163=parseInt(document['getElementById'](_0x283b3a(0x2e9))['value']),_0x14b245=document[_0x283b3a(0x271)](_0x283b3a(0x288))['value']['trim']();if(!_0x5d00c4||!_0x5a5163||_0x5a5163<0x0){showNotification(_0x283b3a(0x255),_0x283b3a(0x3b0));return;}try{await modifyUserPoints(_0x5d00c4,_0x44ace1,_0x5a5163,_0x14b245),document['getElementById']('modify-points-form')['reset']();const _0x1e43e9=doc(db,_0x283b3a(0x3b3),_0x5d00c4),_0xfd6882=await getDoc(_0x1e43e9);if(_0xfd6882[_0x283b3a(0x1aa)]()){const _0x5d738e=_0xfd6882['data']();document['getElementById'](_0x283b3a(0x20f))['textContent']=(_0x5d738e['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x57bf62){console[_0x283b3a(0x3b0)](_0x283b3a(0x1de),_0x57bf62),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x57bf62[_0x283b3a(0x2d4)],'error');}}async function loadPointsHistory(){const _0x1ccd08=a2_0x31cce1,_0x19bde0=document[_0x1ccd08(0x271)](_0x1ccd08(0x1e6));if(!_0x19bde0)return;_0x19bde0['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x540fe4=collection(db,'pointsHistory'),_0x166fcd=query(_0x540fe4,orderBy('timestamp','desc'),limit(0x32)),_0x40f9f6=await getDocs(_0x166fcd);if(_0x40f9f6['empty']){_0x19bde0['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x19bde0['innerHTML']='',_0x40f9f6['forEach'](_0x488670=>{const _0x10f3ee=_0x1ccd08,_0x422a28=_0x488670[_0x10f3ee(0x18f)](),_0x2b7f29=document[_0x10f3ee(0x1a1)]('tr'),_0x26f088=_0x422a28['timestamp']?new Date(_0x422a28['timestamp']['seconds']*0x3e8)[_0x10f3ee(0x1bf)]():'Unknown';let _0x113977='';switch(_0x422a28['action']){case _0x10f3ee(0x1b8):_0x113977='Added\x20'+_0x422a28[_0x10f3ee(0x325)]+_0x10f3ee(0x3a2);break;case'subtract':_0x113977='Subtracted\x20'+_0x422a28['amount']+_0x10f3ee(0x3a2);break;case _0x10f3ee(0x258):_0x113977='Set\x20to\x20'+_0x422a28['amount']+_0x10f3ee(0x3a2);break;default:_0x113977=_0x422a28['action']+'\x20'+_0x422a28[_0x10f3ee(0x325)]+_0x10f3ee(0x3a2);}_0x2b7f29['innerHTML']=_0x10f3ee(0x2d7)+_0x26f088+_0x10f3ee(0x188)+(_0x422a28[_0x10f3ee(0x387)]||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x113977+_0x10f3ee(0x27a)+_0x422a28['action']+_0x10f3ee(0x175)+(_0x422a28[_0x10f3ee(0x359)]||0x0)+'\x20\x20'+(_0x422a28[_0x10f3ee(0x38a)]||0x0)+_0x10f3ee(0x257)+(_0x422a28['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x422a28['adminEmail']||_0x10f3ee(0x193))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x19bde0['appendChild'](_0x2b7f29);});}catch(_0x1ce8c1){console['error']('Error\x20loading\x20points\x20history:',_0x1ce8c1),_0x19bde0['innerHTML']=_0x1ccd08(0x3be)+_0x1ce8c1['message']+'</td></tr>';}}function filterPointsOverview(){const _0x560dbe=a2_0x31cce1,_0x47447b=document['getElementById']('points-overview-search')['value']['toLowerCase']();if(!window[_0x560dbe(0x1e7)])return;const _0x1e3668=window['allUsersPoints']['filter'](_0x289bce=>{const _0x3d8622=_0x560dbe,_0x3380de=(_0x289bce[_0x3d8622(0x387)]||_0x289bce['username']||'')['toLowerCase'](),_0x12494e=(_0x289bce['email']||'')['toLowerCase']();return _0x3380de[_0x3d8622(0x3b6)](_0x47447b)||_0x12494e[_0x3d8622(0x3b6)](_0x47447b);});renderPointsOverview(_0x1e3668);}function sortPointsOverview(){const _0x3b23c5=a2_0x31cce1,_0x111e2c=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x29b04d=[...window[_0x3b23c5(0x1e7)]];switch(_0x111e2c){case'points-desc':_0x29b04d['sort']((_0x4f886d,_0x5dbb08)=>(_0x5dbb08['points']||0x0)-(_0x4f886d['points']||0x0));break;case _0x3b23c5(0x232):_0x29b04d['sort']((_0x53348e,_0x1adcd2)=>(_0x53348e[_0x3b23c5(0x3a1)]||0x0)-(_0x1adcd2['points']||0x0));break;case _0x3b23c5(0x247):_0x29b04d['sort']((_0x529335,_0x7c35fb)=>{const _0x4153b9=_0x3b23c5,_0x224d47=(_0x529335['displayName']||_0x529335[_0x4153b9(0x18c)]||'')['toLowerCase'](),_0x13598d=(_0x7c35fb[_0x4153b9(0x387)]||_0x7c35fb['username']||'')['toLowerCase']();return _0x224d47[_0x4153b9(0x32b)](_0x13598d);});break;case'name-desc':_0x29b04d['sort']((_0x52775e,_0x45970e)=>{const _0x38cf9c=_0x3b23c5,_0x4421af=(_0x52775e[_0x38cf9c(0x387)]||_0x52775e['username']||'')['toLowerCase'](),_0xc5381a=(_0x45970e[_0x38cf9c(0x387)]||_0x45970e[_0x38cf9c(0x18c)]||'')[_0x38cf9c(0x326)]();return _0xc5381a[_0x38cf9c(0x32b)](_0x4421af);});break;}renderPointsOverview(_0x29b04d);}async function handleAwardItem(_0x518909){const _0x2642a1=a2_0x31cce1;_0x518909['preventDefault']();const _0x4224b6=document[_0x2642a1(0x271)](_0x2642a1(0x25d))[_0x2642a1(0x1ad)],_0x1ccc85=document['getElementById']('store-item-select')['value'],_0x4e878c=document['getElementById']('award-reason')['value']['trim']();if(!_0x4224b6||!_0x1ccc85){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification(_0x2642a1(0x375),'success'),document['getElementById']('award-item-form')['reset']();}catch(_0xe87d3a){console[_0x2642a1(0x3b0)]('Error\x20awarding\x20item:',_0xe87d3a),showNotification('Failed\x20to\x20award\x20item:\x20'+_0xe87d3a[_0x2642a1(0x2d4)],'error');}}async function loadUserPointsHistory(_0x897bdb){const _0x3875c5=a2_0x31cce1;try{const _0x1263f6=collection(db,'pointsHistory'),_0x4e36ae=query(_0x1263f6,where('userId','==',_0x897bdb),orderBy('timestamp','desc')),_0x1276bd=await getDocs(_0x4e36ae);console['log'](_0x3875c5(0x22a)+_0x1276bd['size']+_0x3875c5(0x16f)+_0x897bdb),showNotification('User\x20has\x20'+_0x1276bd[_0x3875c5(0x3bc)]+_0x3875c5(0x208),_0x3875c5(0x2b9));}catch(_0x192b02){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x192b02),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x38a656=a2_0x31cce1;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x3a03f2=collection(db,'userProfiles'),_0x34b0a7=await getDocs(_0x3a03f2);if(_0x34b0a7['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x4c41c3=0x0,_0x4e9f2a=0x0;const _0x3cb3ba=writeBatch(db);let _0x47d391=0x0;return console['log']('Found\x20'+_0x34b0a7[_0x38a656(0x3bc)]+'\x20users\x20to\x20check...'),_0x34b0a7['forEach'](_0x21c341=>{const _0x59d1a6=_0x38a656,_0x2c180a=_0x21c341[_0x59d1a6(0x18f)]();_0x2c180a['points']===undefined||_0x2c180a['points']===null?(_0x3cb3ba[_0x59d1a6(0x369)](_0x21c341['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x4c41c3++,_0x47d391++,console['log']('Queued\x20'+(_0x2c180a['displayName']||_0x2c180a['username']||_0x2c180a['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x4e9f2a++,console['log']((_0x2c180a['displayName']||_0x2c180a['username']||_0x2c180a['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x2c180a[_0x59d1a6(0x3a1)])),_0x47d391>=0x1f4&&console[_0x59d1a6(0x37d)]('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x4c41c3>0x0?(console['log'](_0x38a656(0x303)+_0x4c41c3+'\x20users...'),await _0x3cb3ba['commit'](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x4c41c3+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console[_0x38a656(0x2ef)]('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x34b0a7['size']+_0x38a656(0x307)+_0x4c41c3+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x4e9f2a),showNotification(_0x38a656(0x1ed)+_0x4c41c3+'\x20users.\x20'+_0x4e9f2a+'\x20users\x20already\x20had\x20points.','success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x34b0a7[_0x38a656(0x3bc)],'usersUpdated':_0x4c41c3,'usersAlreadyHadPoints':_0x4e9f2a};}catch(_0x4b9eca){console['error']('Error\x20initializing\x20points\x20field:',_0x4b9eca),showNotification('Error\x20initializing\x20points:\x20'+_0x4b9eca['message'],'error');throw _0x4b9eca;}}function addPointsMigrationButton(){const _0x25e4e3=a2_0x31cce1,_0x3832f7=document['getElementById']('manage-points');if(!_0x3832f7)return;if(document[_0x25e4e3(0x271)]('migrate-points-btn'))return;const _0x4a03b2=document['createElement'](_0x25e4e3(0x305));_0x4a03b2['className']='migration-section',_0x4a03b2[_0x25e4e3(0x2e8)]['marginBottom']='20px',_0x4a03b2['style']['padding']=_0x25e4e3(0x333),_0x4a03b2[_0x25e4e3(0x2e8)]['backgroundColor']=_0x25e4e3(0x1cb),_0x4a03b2[_0x25e4e3(0x2e8)]['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x4a03b2[_0x25e4e3(0x2e8)]['borderRadius']=_0x25e4e3(0x2df),_0x4a03b2['innerHTML']=_0x25e4e3(0x360);const _0x48ae52=_0x3832f7['querySelector']('.section-header');_0x48ae52&&_0x48ae52['insertAdjacentElement']('afterend',_0x4a03b2),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x153d72=_0x25e4e3;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this[_0x153d72(0x310)]=_0x153d72(0x3b8);try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{_0x4a03b2['style']['display']='none';},0xbb8);}catch(_0xd4059a){this[_0x153d72(0x310)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x153d72(0x231)]=![];}}});}function setupManagePointsSection(){const _0x3bfc7a=a2_0x31cce1;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x3c243a=document['getElementById']('points-user-search');_0x3c243a&&_0x3c243a['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x10cf9a=document[_0x3bfc7a(0x271)]('modify-points-form');_0x10cf9a&&_0x10cf9a[_0x3bfc7a(0x17d)]('submit',handleModifyPoints);const _0x1a8f5e=document[_0x3bfc7a(0x271)]('award-item-form');_0x1a8f5e&&_0x1a8f5e[_0x3bfc7a(0x17d)]('submit',handleAwardItem);const _0x23c5a8=document['getElementById']('points-overview-search');_0x23c5a8&&_0x23c5a8[_0x3bfc7a(0x17d)]('input',debounce(filterPointsOverview,0x12c));const _0x2968d2=document[_0x3bfc7a(0x271)]('points-sort-order');_0x2968d2&&_0x2968d2['addEventListener']('change',sortPointsOverview);const _0x49a9f7=document['getElementById']('refresh-points-overview');_0x49a9f7&&_0x49a9f7['addEventListener']('click',loadPointsOverview);const _0x3b0a0e=document[_0x3bfc7a(0x271)](_0x3bfc7a(0x1d6));_0x3b0a0e&&_0x3b0a0e['addEventListener']('click',async()=>{const _0x3886e3=_0x3bfc7a;confirm(_0x3886e3(0x2d3))&&(_0x3b0a0e[_0x3886e3(0x231)]=!![],_0x3b0a0e['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x22ef6d(),_0x3b0a0e['disabled']=![],_0x3b0a0e['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x569b88=document['getElementById']('award-all-pilots-btn');_0x569b88&&_0x569b88['addEventListener'](_0x3bfc7a(0x386),awardPointsToAllPilots);async function _0x22ef6d(){const _0x5b931f=_0x3bfc7a;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x2d7ee5={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x57efdc=0x0,_0x794736=0x0,_0x2f850c=0x0,_0x38443e=0x0,_0x3b0ed3=0x0,_0x24921b=0x0;const _0x59d598=new Set(),_0x47f0fb=collection(db,'pointsHistory'),_0x47cd7c=query(_0x47f0fb,where(_0x5b931f(0x1da),'>=',_0x5b931f(0x2e5)),where(_0x5b931f(0x1da),'<=','Bulk\x20award:')),_0x52447f=await getDocs(_0x47cd7c);_0x52447f['forEach'](_0x3912c4=>{const _0x21a3ba=_0x3912c4['data'](),_0x2eee37=_0x21a3ba['reason']||'',_0x798912=_0x2eee37['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x798912&&_0x798912[0x1]&&_0x59d598['add'](_0x798912[0x1]);}),console['log']('Found\x20'+_0x59d598['size']+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x5410d2,_0x40ab76,_0x932e2b]=await Promise['all']([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0xd5b910=_0x5410d2['size']+_0x40ab76[_0x5b931f(0x3bc)]+_0x932e2b[_0x5b931f(0x3bc)];showNotification('Found\x20'+_0xd5b910+_0x5b931f(0x227),_0x5b931f(0x2b9));const _0x45672d=async(_0x11a640,_0x82ee7b)=>{const _0x58bdce=_0x5b931f;let _0x57340b=writeBatch(db);const _0x4c1d30=[];let _0x266eb7=0x0;for(const _0x517182 of _0x11a640['docs']){try{if(_0x59d598[_0x58bdce(0x362)](_0x517182['id'])){if(_0x82ee7b==='D1')_0x24921b++;if(_0x82ee7b==='D2')_0x24921b++;if(_0x82ee7b==='D3')_0x24921b++;continue;}const _0x9f1e4e=_0x517182['data'](),_0x39472a=_0x9f1e4e['subgameType']||'Standard',_0x2b644a=_0x2d7ee5[_0x39472a]||0xa;let _0x2adf0d=_0x9f1e4e['winnerId'];if(!_0x2adf0d&&_0x9f1e4e['winnerUsername']){const [_0x25806d,_0x581dd8,_0x3696d9]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x9f1e4e['winnerUsername']))),getDocs(query(collection(db,'playersD2'),where(_0x58bdce(0x18c),'==',_0x9f1e4e['winnerUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x9f1e4e['winnerUsername'])))]);if(!_0x25806d[_0x58bdce(0x318)])_0x2adf0d=_0x25806d[_0x58bdce(0x174)][0x0]['id'];else{if(!_0x581dd8['empty'])_0x2adf0d=_0x581dd8['docs'][0x0]['id'];else{if(!_0x3696d9['empty'])_0x2adf0d=_0x3696d9['docs'][0x0]['id'];}}}let _0x9bebcb=_0x9f1e4e[_0x58bdce(0x309)];if(!_0x9bebcb&&_0x9f1e4e['loserUsername']){const [_0x5e6bc4,_0x2bb56a,_0x406061]=await Promise[_0x58bdce(0x38e)]([getDocs(query(collection(db,'players'),where('username','==',_0x9f1e4e[_0x58bdce(0x351)]))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x9f1e4e['loserUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x9f1e4e['loserUsername'])))]);if(!_0x5e6bc4['empty'])_0x9bebcb=_0x5e6bc4['docs'][0x0]['id'];else{if(!_0x2bb56a[_0x58bdce(0x318)])_0x9bebcb=_0x2bb56a[_0x58bdce(0x174)][0x0]['id'];else{if(!_0x406061['empty'])_0x9bebcb=_0x406061[_0x58bdce(0x174)][0x0]['id'];}}}if(_0x2adf0d&&_0x9bebcb){const _0xbc4321=doc(db,'userProfiles',_0x2adf0d),_0x42dea7=doc(db,'userProfiles',_0x9bebcb),[_0x1899b4,_0x5133d8]=await Promise['all']([getDoc(_0xbc4321),getDoc(_0x42dea7)]);if(_0x1899b4['exists']()){const _0x4c0048=_0x1899b4['data'](),_0x2655a7=_0x4c0048['points']||0x0;_0x57340b['update'](_0xbc4321,{'points':_0x2655a7+_0x2b644a,'lastPointsModified':serverTimestamp()}),_0x4c1d30[_0x58bdce(0x1c5)]({'userId':_0x2adf0d,'userEmail':_0x4c0048[_0x58bdce(0x181)]||'unknown','displayName':_0x4c0048[_0x58bdce(0x387)]||_0x9f1e4e['winnerUsername']||_0x58bdce(0x36e),'action':'add','amount':_0x2b644a,'previousPoints':_0x2655a7,'newPoints':_0x2655a7+_0x2b644a,'reason':_0x58bdce(0x161)+_0x39472a+_0x58bdce(0x194)+_0x517182['id']+'\x20-\x20'+_0x82ee7b,'adminEmail':auth[_0x58bdce(0x178)]['email'],'timestamp':serverTimestamp()});}if(_0x5133d8['exists']()){const _0x2e9b29=_0x5133d8['data'](),_0x36698b=_0x2e9b29[_0x58bdce(0x3a1)]||0x0;_0x57340b[_0x58bdce(0x369)](_0x42dea7,{'points':_0x36698b+_0x2b644a,'lastPointsModified':serverTimestamp()}),_0x4c1d30['push']({'userId':_0x9bebcb,'userEmail':_0x2e9b29['email']||'unknown','displayName':_0x2e9b29['displayName']||_0x9f1e4e['loserUsername']||_0x58bdce(0x36e),'action':_0x58bdce(0x1b8),'amount':_0x2b644a,'previousPoints':_0x36698b,'newPoints':_0x36698b+_0x2b644a,'reason':_0x58bdce(0x161)+_0x39472a+_0x58bdce(0x200)+_0x517182['id']+_0x58bdce(0x316)+_0x82ee7b,'adminEmail':auth['currentUser'][_0x58bdce(0x181)],'timestamp':serverTimestamp()});}_0x38443e+=_0x2b644a*0x2,_0x266eb7+=0x2,_0x59d598['add'](_0x517182['id']);if(_0x266eb7>=0x190){await _0x57340b['commit']();for(const _0x121510 of _0x4c1d30){await addDoc(collection(db,'pointsHistory'),_0x121510);}_0x57340b=writeBatch(db),_0x266eb7=0x0,_0x4c1d30['length']=0x0;}}}catch(_0x168b5a){console[_0x58bdce(0x3b0)]('Error\x20processing\x20'+_0x82ee7b+'\x20match\x20'+_0x517182['id']+':',_0x168b5a),_0x3b0ed3++;}}if(_0x266eb7>0x0){await _0x57340b['commit']();for(const _0xbb61d8 of _0x4c1d30){await addDoc(collection(db,'pointsHistory'),_0xbb61d8);}}return{'processed':_0x82ee7b==='D1'?_0x57efdc:_0x82ee7b==='D2'?_0x794736:_0x2f850c};};await _0x45672d(_0x5410d2,'D1'),await _0x45672d(_0x40ab76,'D2'),await _0x45672d(_0x932e2b,'D3'),showNotification('Completed!\x20Processed\x20'+_0x57efdc+'\x20D1\x20matches,\x20'+_0x794736+'\x20D2\x20matches,\x20'+_0x2f850c+'\x20D3\x20matches.\x20'+(_0x5b931f(0x291)+_0x38443e+'\x20points.\x20Skipped\x20'+_0x24921b+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x3b0ed3),_0x5b931f(0x1d9)),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x3485ce){console[_0x5b931f(0x3b0)]('Error\x20in\x20bulk\x20award\x20points:',_0x3485ce),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x3485ce[_0x5b931f(0x2d4)],'error');}}const _0x31bb5a=document[_0x3bfc7a(0x271)](_0x3bfc7a(0x364));if(_0x31bb5a){console[_0x3bfc7a(0x2ef)](_0x3bfc7a(0x15a));const _0xcc6c33=_0x31bb5a[_0x3bfc7a(0x1c7)]('.close-btn');_0xcc6c33?_0xcc6c33['addEventListener']('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x48b276=document['getElementById'](_0x3bfc7a(0x2be));_0x48b276?_0x48b276[_0x3bfc7a(0x17d)]('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x3bfc7a(0x3ad));const _0xb498db=document[_0x3bfc7a(0x271)]('quick-edit-points-form');_0xb498db?_0xb498db[_0x3bfc7a(0x17d)]('submit',function(_0x38fa14){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x38fa14);}):console[_0x3bfc7a(0x3b0)]('Quick\x20edit\x20form\x20not\x20found!'),_0x31bb5a['addEventListener'](_0x3bfc7a(0x386),function(_0x7708f9){_0x7708f9['target']===_0x31bb5a&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console[_0x3bfc7a(0x3b0)](_0x3bfc7a(0x17f));console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x1c9da0=a2_0x31cce1;try{const _0x5266cb=parseInt(prompt(_0x1c9da0(0x2d0),'10'));if(!_0x5266cb||isNaN(_0x5266cb)){showNotification('Invalid\x20points\x20amount','error');return;}if(!confirm('This\x20will\x20award\x20'+_0x5266cb+_0x1c9da0(0x28d)))return;showNotification('Starting\x20points\x20award\x20process...','info');const [_0xab548,_0x6c701c,_0x5bf3fa]=await Promise[_0x1c9da0(0x38e)]([getDocs(collection(db,'players')),getDocs(collection(db,_0x1c9da0(0x1fc))),getDocs(collection(db,'playersD3'))]);console['log'](_0x1c9da0(0x22a)+_0xab548[_0x1c9da0(0x3bc)]+'\x20D1\x20pilots,\x20'+_0x6c701c[_0x1c9da0(0x3bc)]+'\x20D2\x20pilots,\x20'+_0x5bf3fa['size']+_0x1c9da0(0x381));const _0x2e0570=_0xab548['size']+_0x6c701c[_0x1c9da0(0x3bc)]+_0x5bf3fa['size'],_0x183890=new Map();_0xab548['forEach'](_0x2be64c=>{const _0x194d8e=_0x2be64c['data']();_0x183890['set'](_0x2be64c['id'],{'username':_0x194d8e['username'],'ladder':'D1'});}),_0x6c701c['forEach'](_0x410d9b=>{const _0x55735f=_0x1c9da0,_0xc9c662=_0x410d9b['data']();_0x183890['set'](_0x410d9b['id'],{'username':_0xc9c662[_0x55735f(0x18c)],'ladder':'D2'});}),_0x5bf3fa['forEach'](_0x537b69=>{const _0x4cb8c3=_0x1c9da0,_0x5c0d99=_0x537b69[_0x4cb8c3(0x18f)]();_0x183890[_0x4cb8c3(0x258)](_0x537b69['id'],{'username':_0x5c0d99[_0x4cb8c3(0x18c)],'ladder':'D3'});}),console['log'](_0x1c9da0(0x22a)+_0x183890['size']+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x17949d=0x0,_0x29f1fc=0x0,_0x3cdeb8=0x0;const _0x19fd63=Array[_0x1c9da0(0x239)](_0x183890['keys']()),_0x730681=0x190;for(let _0x40defa=0x0;_0x40defa<_0x19fd63['length'];_0x40defa+=_0x730681){const _0x28a3cd=writeBatch(db),_0x44b2bf=[],_0x480d64=_0x19fd63['slice'](_0x40defa,_0x40defa+_0x730681),_0x4f6b71=await Promise['all'](_0x480d64['map'](_0x131ed0=>getDoc(doc(db,_0x1c9da0(0x3b3),_0x131ed0))));for(let _0x2fa304=0x0;_0x2fa304<_0x480d64['length'];_0x2fa304++){try{const _0x41c170=_0x480d64[_0x2fa304],_0x1c50af=_0x183890[_0x1c9da0(0x3c5)](_0x41c170),_0x5b2f81=_0x4f6b71[_0x2fa304];if(_0x5b2f81['exists']()){const _0x126b57=_0x5b2f81['data'](),_0x40c201=_0x126b57['points']||0x0,_0x3f7758=_0x40c201+_0x5266cb;_0x28a3cd['update'](doc(db,_0x1c9da0(0x3b3),_0x41c170),{'points':_0x3f7758,'lastPointsModified':serverTimestamp()}),_0x44b2bf['push']({'userId':_0x41c170,'userEmail':_0x126b57['email']||'unknown','displayName':_0x126b57[_0x1c9da0(0x387)]||_0x1c50af[_0x1c9da0(0x18c)]||'Unknown\x20User','action':'add','amount':_0x5266cb,'previousPoints':_0x40c201,'newPoints':_0x3f7758,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x1c50af['ladder']+')','adminEmail':auth[_0x1c9da0(0x178)]['email'],'timestamp':serverTimestamp()}),_0x29f1fc+=_0x5266cb,_0x17949d++;}else _0x3cdeb8++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x1c50af[_0x1c9da0(0x18c)]+'\x20('+_0x41c170+')');}catch(_0x6a76e0){_0x3cdeb8++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x6a76e0);}}await _0x28a3cd['commit']();for(const _0x5d1cea of _0x44b2bf){await addDoc(collection(db,'pointsHistory'),_0x5d1cea);}showNotification('Processed\x20'+_0x17949d+'/'+_0x2e0570+'\x20pilots...',_0x1c9da0(0x2b9));}showNotification(_0x1c9da0(0x263)+_0x29f1fc+'\x20points\x20to\x20'+_0x17949d+'\x20pilots.\x20Errors:\x20'+_0x3cdeb8,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x233998){console['error']('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x233998),showNotification('Error:\x20'+_0x233998[_0x1c9da0(0x2d4)],'error');}}function setupManageRibbonsSection(){const _0x154430=a2_0x31cce1;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x407e0e=document[_0x154430(0x271)]('ribbon-user-search');_0x407e0e&&_0x407e0e['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0xd3fe4=document['getElementById'](_0x154430(0x19c));_0xd3fe4&&_0xd3fe4['addEventListener'](_0x154430(0x386),searchRibbonUser);const _0x3695bd=document[_0x154430(0x271)](_0x154430(0x22e));_0x3695bd&&_0x3695bd[_0x154430(0x17d)]('submit',addRibbon),_0x407e0e&&_0x407e0e[_0x154430(0x17d)]('keypress',function(_0x2f89b9){const _0x41703b=_0x154430;_0x2f89b9['key']===_0x41703b(0x330)&&(_0x2f89b9['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x2f6817,_0x26e124,_0x418c60,_0x26df4f=''){const _0x470f4c=a2_0x31cce1,_0x407b62=doc(db,_0x470f4c(0x3b3),_0x2f6817),_0x539810=await getDoc(_0x407b62);if(!_0x539810['exists']())throw new Error('User\x20not\x20found');const _0x21631e=_0x539810['data'](),_0x326b41=_0x21631e['points']!==undefined?_0x21631e['points']:0x0;_0x21631e['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x21631e['displayName']||_0x21631e[_0x470f4c(0x181)]||_0x470f4c(0x1c6))),await updateDoc(_0x407b62,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x22c8b2=_0x326b41;switch(_0x26e124){case _0x470f4c(0x1b8):_0x22c8b2=_0x326b41+_0x418c60;break;case _0x470f4c(0x18d):_0x22c8b2=Math['max'](0x0,_0x326b41-_0x418c60);break;case'set':_0x22c8b2=_0x418c60;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x407b62,{'points':_0x22c8b2,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x470f4c(0x319)),{'userId':_0x2f6817,'userEmail':_0x21631e['email']||_0x470f4c(0x165),'displayName':_0x21631e['displayName']||_0x21631e['username']||'Unknown\x20User','action':_0x26e124,'amount':_0x418c60,'previousPoints':_0x326b41,'newPoints':_0x22c8b2,'reason':_0x26df4f,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x1a43af=a2_0x31cce1,_0x7ec02c=document['getElementById'](_0x1a43af(0x173));if(!_0x7ec02c)return;_0x7ec02c['innerHTML']=_0x1a43af(0x2ce);try{const _0x42bca8=collection(db,'userProfiles'),_0xce8f3d=await getDocs(_0x42bca8);if(_0xce8f3d[_0x1a43af(0x318)]){_0x7ec02c['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x42d5db=[];let _0x1ac069=0x0;_0xce8f3d[_0x1a43af(0x186)](_0x11a230=>{const _0x579e3d=_0x1a43af,_0x1fe42a=_0x11a230['data'](),_0x1821ac=_0x1fe42a['points']!==undefined?_0x1fe42a[_0x579e3d(0x3a1)]:0x0;_0x1fe42a[_0x579e3d(0x3a1)]===undefined&&_0x1ac069++,_0x42d5db['push']({'id':_0x11a230['id'],..._0x1fe42a,'points':_0x1821ac});}),_0x1ac069>0x0&&(console[_0x1a43af(0x2ef)]('Found\x20'+_0x1ac069+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x1ac069+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x42d5db['sort']((_0x14133e,_0x44f2a8)=>(_0x44f2a8['points']||0x0)-(_0x14133e['points']||0x0)),window['allUsersPoints']=_0x42d5db,renderPointsOverview(_0x42d5db);}catch(_0x490887){console['error'](_0x1a43af(0x158),_0x490887),_0x7ec02c['innerHTML']=_0x1a43af(0x308)+_0x490887['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x576654=a2_0x31cce1,_0x33317d=document['getElementById']('ribbons-overview-table-body');if(!_0x33317d)return;_0x33317d['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x2b1489,_0x31c9dc,_0x265a94]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x33317d['innerHTML']='';const _0x397074=(_0x109074,_0x4d3601)=>{const _0x3b6487=a2_0x11de;_0x109074[_0x3b6487(0x186)](_0xcabc50=>{const _0x136820=_0x3b6487,_0xe45e68=_0xcabc50['data'](),_0x4c7d23=_0xe45e68['ribbons']||{},_0xbf9d52=Object[_0x136820(0x1a4)](_0x4c7d23)[_0x136820(0x2fe)],_0x5a6b5f=document['createElement']('tr');_0x5a6b5f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xe45e68[_0x136820(0x18c)]||_0x136820(0x1c6))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x4d3601['toLowerCase']()+'\x22>'+_0x4d3601+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xbf9d52+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xe45e68[_0x136820(0x206)]?new Date(_0xe45e68[_0x136820(0x206)]['seconds']*0x3e8)['toLocaleDateString']():_0x136820(0x1c6))+_0x136820(0x17b)+_0xe45e68['username']+_0x136820(0x1a6)+_0x4d3601+_0x136820(0x320),_0x33317d['appendChild'](_0x5a6b5f);});};_0x397074(_0x2b1489,'D1'),_0x397074(_0x31c9dc,'D2'),_0x397074(_0x265a94,'D3'),document[_0x576654(0x17e)](_0x576654(0x24d))[_0x576654(0x186)](_0x264dc9=>{const _0x8e457c=_0x576654;_0x264dc9[_0x8e457c(0x17d)]('click',function(){const _0x3d8299=this['dataset']['username'],_0x32bf46=this['dataset']['ladder'];editUserRibbons(_0x3d8299,_0x32bf46);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x5f055b){console['error']('Error\x20loading\x20ribbons:',_0x5f055b),_0x33317d[_0x576654(0x310)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x19eee7=a2_0x31cce1,_0x2b2b75=document[_0x19eee7(0x271)]('ribbon-user-search')[_0x19eee7(0x1ad)]['trim']();if(!_0x2b2b75){showNotification('Please\x20enter\x20a\x20username',_0x19eee7(0x3b0));return;}try{const [_0x5067aa,_0x2348dd,_0x5a673b]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x2b2b75)),getDoc(doc(db,_0x19eee7(0x2dc),_0x2b2b75)),getDoc(doc(db,_0x19eee7(0x2b7),_0x2b2b75))]);let _0x5f3c78=null,_0x207431=null;if(_0x5067aa[_0x19eee7(0x1aa)]())_0x5f3c78='D1',_0x207431=_0x5067aa['data']();else{if(_0x2348dd[_0x19eee7(0x1aa)]())_0x5f3c78='D2',_0x207431=_0x2348dd[_0x19eee7(0x18f)]();else _0x5a673b['exists']()&&(_0x5f3c78='D3',_0x207431=_0x5a673b['data']());}_0x5f3c78?(document[_0x19eee7(0x271)]('current-ribbon-user')[_0x19eee7(0x2f4)]=_0x2b2b75,document['getElementById']('ribbon-target-user')['value']=_0x2b2b75,document[_0x19eee7(0x271)]('ribbon-target-ladder')['value']=_0x5f3c78,document['getElementById']('user-ribbon-management')[_0x19eee7(0x2e8)][_0x19eee7(0x30c)]='block',displayCurrentRibbons(_0x207431['ribbons']||{}),showNotification(_0x19eee7(0x22a)+_0x2b2b75+'\x20in\x20'+_0x5f3c78+_0x19eee7(0x3b9),'success')):showNotification('User\x20'+_0x2b2b75+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x302d7c){console['error'](_0x19eee7(0x3aa),_0x302d7c),showNotification('Error\x20searching\x20for\x20user',_0x19eee7(0x3b0));}}function displayCurrentRibbons(_0x520a3c){const _0x1c424f=a2_0x31cce1,_0x3854e0=document[_0x1c424f(0x271)](_0x1c424f(0x1ba));if(!_0x3854e0)return;_0x3854e0[_0x1c424f(0x310)]='';if(Object['keys'](_0x520a3c)['length']===0x0){_0x3854e0['innerHTML']=_0x1c424f(0x2a5);return;}Object['entries'](_0x520a3c)['forEach'](([_0x25dea4,_0x29b675])=>{const _0x5b73d9=_0x1c424f,_0x411a6c=document['createElement']('div');_0x411a6c[_0x5b73d9(0x354)]='ribbon-item',_0x411a6c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x25dea4+_0x5b73d9(0x213)+(_0x29b675[_0x5b73d9(0x16d)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x29b675['awardedAt']?new Date(_0x29b675['awardedAt']['seconds']*0x3e8)[_0x5b73d9(0x155)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x25dea4+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3854e0['appendChild'](_0x411a6c);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x19cfb6=>{const _0x4e99d1=_0x1c424f;_0x19cfb6['addEventListener'](_0x4e99d1(0x386),function(){const _0x2f7bb2=_0x4e99d1,_0x3c8868=this[_0x2f7bb2(0x2c6)]['ribbon'];removeRibbon(_0x3c8868);});});}async function addRibbon(_0x5893d3){const _0x589c70=a2_0x31cce1;_0x5893d3['preventDefault']();const _0x4b6eb1=document['getElementById']('ribbon-target-user')[_0x589c70(0x1ad)],_0x25781d=document['getElementById']('ribbon-target-ladder')['value'],_0x11a406=document['getElementById'](_0x589c70(0x343))['value'],_0x3a6ac3=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x4b6eb1||!_0x25781d||!_0x11a406||!_0x3a6ac3){showNotification(_0x589c70(0x3a7),'error');return;}try{const _0x1b4f1e='playerRibbons'+(_0x25781d==='D1'?'':_0x25781d),_0x4b2cf3=doc(db,_0x1b4f1e,_0x4b6eb1),_0x1a9f62=await getDoc(_0x4b2cf3),_0x561675=_0x1a9f62['exists']()?_0x1a9f62['data']()[_0x589c70(0x367)]||{}:{};_0x561675[_0x11a406]={'level':_0x3a6ac3,'awardedAt':serverTimestamp()},await setDoc(_0x4b2cf3,{'username':_0x4b6eb1,'ladder':_0x25781d,'ribbons':_0x561675,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x11a406+'\x20Level\x20'+_0x3a6ac3+_0x589c70(0x39b)+_0x4b6eb1,'success'),displayCurrentRibbons(_0x561675),document[_0x589c70(0x271)]('ribbon-type-select')[_0x589c70(0x1ad)]='',document[_0x589c70(0x271)]('ribbon-level')['value']='1';}catch(_0x59852b){console['error']('Error\x20adding\x20ribbon:',_0x59852b),showNotification(_0x589c70(0x277),_0x589c70(0x3b0));}}async function removeRibbon(_0x2f7a67){const _0x387b76=a2_0x31cce1,_0x1144e4=document[_0x387b76(0x271)]('ribbon-target-user')['value'],_0xef53fc=document['getElementById']('ribbon-target-ladder')[_0x387b76(0x1ad)];if(!confirm(_0x387b76(0x1ff)+_0x2f7a67+_0x387b76(0x301)+_0x1144e4+'?'))return;try{const _0x3aae15='playerRibbons'+(_0xef53fc==='D1'?'':_0xef53fc),_0x294ce4=doc(db,_0x3aae15,_0x1144e4),_0x48d85f=await getDoc(_0x294ce4),_0x5ed725=_0x48d85f['exists']()?_0x48d85f['data']()['ribbons']||{}:{};delete _0x5ed725[_0x2f7a67],await setDoc(_0x294ce4,{'username':_0x1144e4,'ladder':_0xef53fc,'ribbons':_0x5ed725,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x2f7a67+'\x20from\x20'+_0x1144e4,'success'),displayCurrentRibbons(_0x5ed725);}catch(_0x42cbf3){console[_0x387b76(0x3b0)](_0x387b76(0x2f0),_0x42cbf3),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x9ddf4b,_0xa09597){const _0x42e949=a2_0x31cce1;document['getElementById'](_0x42e949(0x1b3))['value']=_0x9ddf4b,searchRibbonUser();}