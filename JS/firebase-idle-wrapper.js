const a19_0x2ee45b=a19_0x59df,a19_0x4687f0=(function(){let _0x31212a=!![];return function(_0x582b36,_0x1d7316){const _0x45912b=_0x31212a?function(){if(_0x1d7316){const _0x48627c=_0x1d7316['apply'](_0x582b36,arguments);return _0x1d7316=null,_0x48627c;}}:function(){};return _0x31212a=![],_0x45912b;};}()),a19_0x5e369e=a19_0x4687f0(this,function(){const _0x30ac17=a19_0x59df;let _0x40dd22;try{const _0x517355=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x40dd22=_0x517355();}catch(_0x35e793){_0x40dd22=window;}const _0x171638=_0x40dd22['console']=_0x40dd22[_0x30ac17(0x175)]||{},_0xeb5735=['log','warn','info','error','exception','table','trace'];for(let _0x176b00=0x0;_0x176b00<_0xeb5735['length'];_0x176b00++){const _0x153e6d=a19_0x4687f0['constructor'][_0x30ac17(0x16a)]['bind'](a19_0x4687f0),_0x16f99d=_0xeb5735[_0x176b00],_0x10afed=_0x171638[_0x16f99d]||_0x153e6d;_0x153e6d['__proto__']=a19_0x4687f0['bind'](a19_0x4687f0),_0x153e6d['toString']=_0x10afed[_0x30ac17(0x17f)]['bind'](_0x10afed),_0x171638[_0x16f99d]=_0x153e6d;}});a19_0x5e369e();import{auth,db}from'./firebase-config.js';function a19_0x4add(){const _0x465eae=['random','error','message','[FirebaseIdle]\x20Resuming\x20listener:','debug','Error\x20executing\x20pending\x20operation:','then','resumeAllListeners','set','warn','\x20operations:\x20','pendingTimeout','getDocuments','Executing\x20delayed\x20','[FirebaseIdle]\x20Active\x20listeners:\x20','prototype','blockedOperations','unavailable','clear','RDL_SESSION_SUSPENDED','\x20operations\x20during\x20idle\x20state','setDocument','safeOperation','test','pendingOperations','forEach','console','log','[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:','size','style','Executing\x20pending\x20','suspendSession','operationType','activeListeners','appendChild','toString','body','add','delete','[FirebaseIdle]\x20Error\x20suspending\x20listener:'];a19_0x4add=function(){return _0x465eae;};return a19_0x4add();}import{handleNetworkError}from'./idle-timeout.js';function a19_0x59df(_0x1c602f,_0xd521f8){const _0x5e369e=a19_0x4add();return a19_0x59df=function(_0x4687f0,_0x239bbd){_0x4687f0=_0x4687f0-0x15b;let _0x4addc5=_0x5e369e[_0x4687f0];return _0x4addc5;},a19_0x59df(_0x1c602f,_0xd521f8);}import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0xe8259a=a19_0x59df;this['activeListeners']=new Map(),this[_0xe8259a(0x173)]=new Map(),this[_0xe8259a(0x166)]=null,this['blockedOperations']=0x0,this['debug']=![];}['checkSessionActive'](){const _0x5f4ebb=a19_0x59df;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this[_0x5f4ebb(0x16b)]%0xa===0x0&&console[_0x5f4ebb(0x164)]('[FirebaseIdle]\x20Blocked\x20'+this['blockedOperations']+_0x5f4ebb(0x16f)),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x2f31a3,_0x3fa458,..._0x6a2875){const _0x4eb575=a19_0x59df;if(!this['checkSessionActive']()){const _0xd092b1=_0x3fa458+'-'+Date['now']()+'-'+Math[_0x4eb575(0x15b)]()[_0x4eb575(0x17f)](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0xd092b1,{'operation':_0x2f31a3,'operationType':_0x3fa458,'args':_0x6a2875}),!this['pendingTimeout']&&(this[_0x4eb575(0x166)]=setTimeout(()=>{const _0x39ffa=_0x4eb575;this['pendingOperations'][_0x39ffa(0x16d)](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x2f31a3(..._0x6a2875);}catch(_0x371f1e){if(_0x371f1e['code']===_0x4eb575(0x16c)||_0x371f1e['code']==='resource-exhausted'||_0x371f1e['message']&&_0x371f1e[_0x4eb575(0x15d)]['includes']('network'))return handleNetworkError(),null;throw _0x371f1e;}}async['getDocument'](_0x179d05){return this['safeOperation'](getDoc,'get',_0x179d05);}async[a19_0x2ee45b(0x167)](_0x5cec6f){const _0x348ffd=a19_0x2ee45b;return this[_0x348ffd(0x171)](getDocs,'query',_0x5cec6f);}async['addDocument'](_0x4f4185,_0x228de5){const _0x196c19=a19_0x2ee45b;return this[_0x196c19(0x171)](addDoc,_0x196c19(0x181),_0x4f4185,_0x228de5);}async[a19_0x2ee45b(0x170)](_0x164755,_0x5ed151,_0x472d4a={}){const _0x49fa74=a19_0x2ee45b;return this[_0x49fa74(0x171)](setDoc,_0x49fa74(0x163),_0x164755,_0x5ed151,_0x472d4a);}async['updateDocument'](_0x350da7,_0x554f45){const _0x17db6a=a19_0x2ee45b;return this[_0x17db6a(0x171)](updateDoc,'update',_0x350da7,_0x554f45);}async['deleteDocument'](_0x46a3e8){const _0x303eeb=a19_0x2ee45b;return this[_0x303eeb(0x171)](deleteDoc,_0x303eeb(0x182),_0x46a3e8);}['suspendAllListeners'](){const _0xd022c3=a19_0x2ee45b;console['log'](_0xd022c3(0x177),this['activeListeners']['size']),this['_suspendedListeners']=new Map(this[_0xd022c3(0x17d)]),this['activeListeners']['forEach']((_0x3f9523,_0x142f41)=>{const _0xcd7561=_0xd022c3;console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x142f41);if(typeof _0x3f9523==='function')try{_0x3f9523(),console[_0xcd7561(0x176)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x142f41);}catch(_0x528153){console[_0xcd7561(0x15c)](_0xcd7561(0x183),_0x142f41,_0x528153);}}),this['activeListeners']['clear']();if(this[_0xd022c3(0x15f)]){const _0x313fda=document['createElement']('div');_0x313fda['id']='firebase-suspend-indicator',_0x313fda[_0xd022c3(0x179)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x313fda['textContent']='Firebase:\x20Suspended',document[_0xd022c3(0x180)][_0xd022c3(0x17e)](_0x313fda);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}[a19_0x2ee45b(0x162)](){const _0x1fcd89=a19_0x2ee45b;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console[_0x1fcd89(0x176)]('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners']['size']),this['_suspendedListeners'][_0x1fcd89(0x174)]((_0x46843c,_0x160b8a)=>{const _0x1ed997=_0x1fcd89;console['log'](_0x1ed997(0x15e),_0x160b8a);try{if(typeof _0x46843c==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x160b8a);return;}const {query:_0x1f60ec,callback:_0x1286b8,options:_0xadce9d}=_0x46843c;if(_0x1f60ec&&_0x1286b8){const _0x873bd2=onSnapshot(_0x1f60ec,_0x1286b8,_0xadce9d||{});this['activeListeners']['set'](_0x160b8a,_0x873bd2),console[_0x1ed997(0x176)]('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x160b8a);}}catch(_0x55117a){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x160b8a,_0x55117a);}}),this['_suspendedListeners']['clear']();const _0x2d6b65=document['getElementById']('firebase-suspend-indicator');_0x2d6b65&&_0x2d6b65['remove'](),console[_0x1fcd89(0x176)]('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x1458d1,_0x310dcf,_0x3b2193={},_0x4ef9ab=null){const _0x2721aa=a19_0x2ee45b,_0x459b9d=_0x4ef9ab||'listener_'+Date['now']()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console[_0x2721aa(0x176)]('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x459b9d);if(!this['checkSessionActive']())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x459b9d),()=>{};try{const _0x51e8b6=onSnapshot(_0x1458d1,_0x310dcf,_0x3b2193);return this[_0x2721aa(0x17d)]['set'](_0x459b9d,{'unsubscribe':_0x51e8b6,'query':_0x1458d1,'callback':_0x310dcf,'options':_0x3b2193}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x459b9d),console[_0x2721aa(0x176)](_0x2721aa(0x169)+this['activeListeners'][_0x2721aa(0x178)])),()=>{const _0x5cf0ff=_0x2721aa;this[_0x5cf0ff(0x15f)]&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x459b9d);try{_0x51e8b6(),this['activeListeners']['delete'](_0x459b9d),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x459b9d),console[_0x5cf0ff(0x176)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x548c08){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x459b9d+':',_0x548c08);}};}catch(_0x5b66df){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x459b9d+':',_0x5b66df),()=>{};}}['executePendingOperations'](_0x5d2032='all'){const _0x1f6ddd=a19_0x2ee45b;console['log'](_0x1f6ddd(0x17a)+_0x5d2032+_0x1f6ddd(0x165)+this['pendingOperations'][_0x1f6ddd(0x178)]+'\x20total\x20operations');const _0x37236e=new Map(this['pendingOperations']);this['pendingOperations']['clear'](),_0x37236e['forEach']((_0xd35b24,_0xf769e2)=>{const _0x4ff50c=_0x1f6ddd;_0x5d2032==='all'||_0xd35b24['operationType']===_0x5d2032?(console['log'](_0x4ff50c(0x168)+_0xd35b24[_0x4ff50c(0x17c)]+'\x20operation'),this['safeOperation'](_0xd35b24['operation'],_0xd35b24['operationType'],..._0xd35b24['args'])['catch'](_0x1d4b34=>console['error'](_0x4ff50c(0x160),_0x1d4b34))):this['pendingOperations'][_0x4ff50c(0x163)](_0xf769e2,_0xd35b24);});}['enableDebug'](_0x1db54f=!![]){const _0x4072ca=a19_0x2ee45b;this[_0x4072ca(0x15f)]=_0x1db54f,console[_0x4072ca(0x176)]('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x1db54f?'enabled':'disabled'));if(_0x1db54f){const _0x327b39=window[_0x4072ca(0x16e)];window[_0x4072ca(0x16e)]=!![],console[_0x4072ca(0x176)]('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,'system',_0x4072ca(0x172)))[_0x4072ca(0x161)](_0x2d444d=>{const _0x3f6863=_0x4072ca;console[_0x3f6863(0x176)]('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x2d444d);})['catch'](_0x21d51a=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x21d51a);})['finally'](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x327b39;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x551072=a19_0x2ee45b,_0x285e1d=window[_0x551072(0x17b)]||function(){},_0x86caab=window['resumeSession']||function(){};window['suspendSession']=function(){_0x285e1d(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){_0x86caab(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;