const a10v=a10d;(function(a,b){const l=a10d,c=a();while(!![]){try{const d=-parseInt(l(0x201))/0x1*(parseInt(l(0x1f8))/0x2)+parseInt(l(0x21f))/0x3+parseInt(l(0x202))/0x4*(parseInt(l(0x221))/0x5)+-parseInt(l(0x1fc))/0x6*(parseInt(l(0x209))/0x7)+-parseInt(l(0x207))/0x8*(parseInt(l(0x20d))/0x9)+parseInt(l(0x217))/0xa+-parseInt(l(0x21c))/0xb*(-parseInt(l(0x229))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a10c,0x84bd8));const a10b=(function(){let a=!![];return function(b,c){const d=a?function(){if(c){const e=c['apply'](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a10a=a10b(this,function(){const m=a10d;let a;try{const d=Function('return\x20(function()\x20'+m(0x212)+');');a=d();}catch(f){a=window;}const b=a['console']=a['console']||{},c=['log','warn',m(0x1f5),m(0x1fb),'exception','table','trace'];for(let g=0x0;g<c[m(0x215)];g++){const h=a10b['constructor']['prototype'][m(0x1f6)](a10b),i=c[g],j=b[i]||h;h[m(0x218)]=a10b[m(0x1f6)](a10b),h[m(0x20b)]=j[m(0x20b)][m(0x1f6)](j),b[i]=h;}});a10a();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(a=![]){const n=a10d,b=Date['now'](),c=checkNotificationCache();if(c!==null&&!a){updateNotificationDot(c);if(b-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=b;const d=auth['currentUser'];if(!d){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [e,f,g]=await Promise[n(0x21d)]([checkForPendingMatchesInCollection(d,n(0x210)),checkForPendingMatchesInCollection(d,'pendingMatchesD2'),checkForPendingMatchesInCollection(d,'pendingMatchesD3')]),h=e||f||g;updateNotificationDot(h),updateNotificationCache(h);}catch(i){console['error']('Error\x20checking\x20pending\x20matches:',i);}}async function checkForPendingMatchesInCollection(a,b){const o=a10d,c=a[o(0x20e)],d=a[o(0x20c)],e=query(collection(db,b),where('winnerId','==',c),where('approved','==',![])),f=await getDocs(e);if(!f['empty'])return!![];if(d){const h=query(collection(db,b),where('winnerEmail','==',d),where(o(0x1fe),'==',![])),i=await getDocs(h);if(!i['empty'])return!![];}let g=await getUsernameFromAllSources(a);if(g){const j=query(collection(db,b),where('winnerUsername','==',g),where(o(0x1fe),'==',![])),k=await getDocs(j);if(!k['empty'])return!![];}return![];}async function getUsernameFromAllSources(a){const p=a10d,b=localStorage[p(0x204)](p(0x222));if(b)return b;try{const [c,d,e]=await Promise[p(0x21d)]([getDocs(query(collection(db,p(0x208)),where('userId','==',a[p(0x20e)]))),getDocs(query(collection(db,p(0x21a)),where(p(0x216),'==',a['uid']))),getDocs(query(collection(db,'playersD3'),where(p(0x216),'==',a['uid'])))]);if(!c['empty']){const g=c[p(0x225)][0x0]['data']()[p(0x226)];return localStorage[p(0x203)](p(0x222),g),g;}if(!d[p(0x20f)]){const h=d['docs'][0x0]['data']()[p(0x226)];return localStorage[p(0x203)](p(0x222),h),h;}if(!e['empty']){const i=e[p(0x225)][0x0][p(0x206)]()['username'];return localStorage['setItem']('currentUsername',i),i;}const f=await getDoc(doc(db,'users',a[p(0x20e)]));if(f[p(0x219)]()&&f['data']()['username']){const j=f['data']()[p(0x226)];return localStorage[p(0x203)](p(0x222),j),j;}}catch(k){console['error']('Error\x20fetching\x20username:',k);}if(a[p(0x20c)])return a[p(0x20c)][p(0x1f7)]('@')[0x0];return null;}function updateNotificationCache(a){const q=a10d,b={'status':a,'timestamp':Date[q(0x227)]()};localStorage[q(0x203)](NOTIFICATION_CACHE_KEY,JSON[q(0x21e)](b));}function checkNotificationCache(){const r=a10d,a=localStorage[r(0x204)](NOTIFICATION_CACHE_KEY);if(!a)return null;try{const {status:b,timestamp:c}=JSON[r(0x224)](a),d=Date['now']();if(d-c<CACHE_EXPIRY)return b;}catch(f){}return null;}export function updateNotificationDot(a){const t=a10d,b=new MutationObserver((d,e)=>{const s=a10d,f=document[s(0x211)]('report-match-notification');f&&(updateDotStyle(f,a),e[s(0x223)]());});b['observe'](document[t(0x1f4)],{'childList':!![],'subtree':!![]});const c=document['getElementById']('report-match-notification');c&&(updateDotStyle(c,a),b['disconnect']()),setTimeout(()=>b['disconnect'](),0x1388);}function updateDotStyle(a,b){const u=a10d;b?(a['style'][u(0x20a)]='block',a[u(0x200)][u(0x1f3)]=u(0x1f9),a[u(0x200)][u(0x1fd)]='10px',a['style'][u(0x228)]='10px',a['style'][u(0x220)]='absolute',a[u(0x200)][u(0x21b)]=u(0x1f2),a[u(0x200)]['right']=u(0x1ff),a[u(0x200)]['borderRadius']='50%',a[u(0x200)]['border']=u(0x213),a[u(0x200)][u(0x214)]='999'):a[u(0x200)][u(0x20a)]='none';}function a10d(a,b){const c=a10c();return a10d=function(d,e){d=d-0x1f2;let f=c[d];if(a10d['vrZzlw']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a10d['PWMTNS']=g,a=arguments,a10d['vrZzlw']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a10d['PWMTNS'](f),a[i]=f):f=j,f;},a10d(a,b);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener'](a10v(0x1fa),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const w=a10d;localStorage[w(0x205)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});function a10c(){const x=['zg9JCW','DxnLCM5HBwu','BM93','AgvPz2H0','nZiXmJG0Auzyz0n0','ltvWEa','yMfJA2DYB3vUzenVBg9Y','yM9KEq','Aw5MBW','yMLUza','C3bSAxq','ngj4uvLfrq','i2zMm2iZma','re9nq29UDgvUDeXVywrLza','zxjYB3i','nKLYBMX6DG','D2LKDgG','yxbWCM92zwq','ltHWEa','C3r5Bgu','mJy0mJmZtuLfDe5K','mtaWzNHiqKTW','C2v0sxrLBq','z2v0sxrLBq','CMvTB3zLsxrLBq','zgf0yq','mtG5nZCZnKDXC0j0Bq','CgXHEwvYCW','ndC3otG1oxnOrevMta','zgLZCgXHEq','Dg9tDhjPBMC','zw1HAwW','mtHVvfrnDgi','DwLK','zw1WDhK','CgvUzgLUz01HDgnOzxm','z2v0rwXLBwvUDej5swq','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','mNb4ihnVBgLKihDOAxrL','EKLUzgv4','BgvUz3rO','DxnLCKLK','ntyYmZa5mg5qzxrjBq','x19WCM90B19F','zxHPC3rZ','CgXHEwvYC0qY','Dg9W','mtmYAxr0uwjf','ywXS','C3rYAw5NAwz5','mJi5otu2oxDyCLDfwq','Cg9ZAxrPB24','mZu4nJvNBhDKDuS','y3vYCMvUDfvZzxjUyw1L','zgLZy29UBMvJDa','CgfYC2u'];a10c=function(){return x;};return a10c();}