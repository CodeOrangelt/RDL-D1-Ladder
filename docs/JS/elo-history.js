(function(_0x1ddcbe,_0x3c0c4c){const _0x53c2e5=a0_0x45fe,_0xd7f1c0=_0x1ddcbe();while(!![]){try{const _0x6e8665=parseInt(_0x53c2e5(0x184))/0x1*(-parseInt(_0x53c2e5(0x186))/0x2)+parseInt(_0x53c2e5(0x176))/0x3*(parseInt(_0x53c2e5(0x189))/0x4)+-parseInt(_0x53c2e5(0x18f))/0x5*(parseInt(_0x53c2e5(0x18a))/0x6)+parseInt(_0x53c2e5(0x175))/0x7+-parseInt(_0x53c2e5(0x185))/0x8*(parseInt(_0x53c2e5(0x18c))/0x9)+parseInt(_0x53c2e5(0x179))/0xa+-parseInt(_0x53c2e5(0x178))/0xb*(parseInt(_0x53c2e5(0x174))/0xc);if(_0x6e8665===_0x3c0c4c)break;else _0xd7f1c0['push'](_0xd7f1c0['shift']());}catch(_0x35eab4){_0xd7f1c0['push'](_0xd7f1c0['shift']());}}}(a0_0x5108,0x68b34));const a0_0x4bc173=(function(){let _0x20036b=!![];return function(_0x2f0077,_0x4af592){const _0x44dfc3=_0x20036b?function(){if(_0x4af592){const _0x4aab3e=_0x4af592['apply'](_0x2f0077,arguments);return _0x4af592=null,_0x4aab3e;}}:function(){};return _0x20036b=![],_0x44dfc3;};}()),a0_0x120828=a0_0x4bc173(this,function(){const _0x1e0149=a0_0x45fe;let _0x1d2a15;try{const _0x3d51b7=Function('return\x20(function()\x20'+_0x1e0149(0x180)+');');_0x1d2a15=_0x3d51b7();}catch(_0x245808){_0x1d2a15=window;}const _0x53701b=_0x1d2a15['console']=_0x1d2a15[_0x1e0149(0x17a)]||{},_0x5d3b69=[_0x1e0149(0x181),'warn','info',_0x1e0149(0x17c),'exception','table',_0x1e0149(0x18d)];for(let _0x21a2be=0x0;_0x21a2be<_0x5d3b69['length'];_0x21a2be++){const _0x47ede8=a0_0x4bc173[_0x1e0149(0x188)][_0x1e0149(0x190)]['bind'](a0_0x4bc173),_0x177491=_0x5d3b69[_0x21a2be],_0x45c3c8=_0x53701b[_0x177491]||_0x47ede8;_0x47ede8['__proto__']=a0_0x4bc173[_0x1e0149(0x17f)](a0_0x4bc173),_0x47ede8['toString']=_0x45c3c8[_0x1e0149(0x182)]['bind'](_0x45c3c8),_0x53701b[_0x177491]=_0x47ede8;}});a0_0x120828();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];function a0_0x5108(){const _0x42e17c=['newElo','Unknown\x20Player','199704rgdqVi','3496703TcgpTn','2055819HwaVUg','data','154JmNsWl','5658880Pzgxmu','console','player','error','Bronze','desc','bind','{}.constructor(\x22return\x20this\x22)(\x20)','log','toString','promotion','107YGWoww','432BXoPNU','8628fWjbqA','Emerald','constructor','4FuIcKz','1476eAnfjT','match','19836bFaxZV','trace','exists','10330trwkTs','prototype'];a0_0x5108=function(){return _0x42e17c;};return a0_0x5108();}async function getUsernameById(_0x22c413){const _0x4b1d91=a0_0x45fe;try{if(!_0x22c413)return'Unknown\x20Player';const _0x4de5fb=await getDoc(doc(db,'players',_0x22c413));return _0x4de5fb[_0x4b1d91(0x18e)]()?_0x4de5fb[_0x4b1d91(0x177)]()['username']:_0x4b1d91(0x173);}catch(_0x719601){return console['error']('Error\x20fetching\x20username:',_0x719601),_0x4b1d91(0x173);}}function a0_0x45fe(_0x84118a,_0x5f20cf){const _0x261c8a=a0_0x5108();return a0_0x45fe=function(_0x120828,_0x4bc173){_0x120828=_0x120828-0x173;let _0x12df06=_0x261c8a[_0x120828];return _0x12df06;},a0_0x45fe(_0x84118a,_0x5f20cf);}export async function recordEloChange({playerId:_0x350b34,previousElo:_0x2903d0,newElo:_0x97bc70,opponentId:_0x3186d3,matchResult:_0x593b0f,previousPosition:_0x12887c,newPosition:_0xec22d7,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x1f81b8}){const _0x167fbd=a0_0x45fe;try{const _0x1ae04e=doc(collection(db,'eloHistory'));let _0xd1255c=_0x167fbd(0x18b);if(isPromotion)_0xd1255c=_0x167fbd(0x183);if(isDemotion)_0xd1255c='demotion';let _0x58279d='Unranked';if(_0x97bc70>=0x834)_0x58279d=_0x167fbd(0x187);else{if(_0x97bc70>=0x708)_0x58279d='Gold';else{if(_0x97bc70>=0x640)_0x58279d='Silver';else{if(_0x97bc70>=0x578)_0x58279d=_0x167fbd(0x17d);}}}return await setDoc(_0x1ae04e,{'type':_0xd1255c,'player':_0x350b34,'opponent':_0x3186d3,'previousElo':_0x2903d0,'newElo':_0x97bc70,'change':_0x97bc70-_0x2903d0,'matchResult':_0x593b0f,'previousPosition':_0x12887c,'newPosition':_0xec22d7,'rankAchieved':_0x58279d,'timestamp':_0x1f81b8}),console[_0x167fbd(0x181)]('ELO\x20history\x20recorded\x20for\x20'+_0x350b34),!![];}catch(_0xda9954){console[_0x167fbd(0x17c)]('Error\x20recording\x20ELO\x20history:',_0xda9954);throw _0xda9954;}}export async function getEloHistory(){const _0x264056=a0_0x45fe;try{const _0x2c5bc4=collection(db,'eloHistory'),_0x20362d=query(_0x2c5bc4,orderBy('timestamp',_0x264056(0x17e))),_0x20938d=await getDocs(_0x20362d),_0x988ee2=_0x20938d['docs']['map'](async _0x17e38c=>{const _0x3463ae=_0x264056,_0x44bb46=_0x17e38c['data'](),[_0x1597e1,_0x8e8208]=await Promise['all']([getUsernameById(_0x44bb46[_0x3463ae(0x17b)]),getUsernameById(_0x44bb46['opponent'])]);return{..._0x44bb46,'playerUsername':_0x1597e1,'opponentUsername':_0x8e8208,'change':_0x44bb46[_0x3463ae(0x191)]-_0x44bb46['previousElo'],'timestamp':_0x44bb46['timestamp']};}),_0xd4c56b=await Promise['all'](_0x988ee2);return{'entries':_0xd4c56b};}catch(_0xbb692d){console['error']('Error\x20fetching\x20ELO\x20history:',_0xbb692d);throw _0xbb692d;}}export function resetPagination(){lastVisible=null;}