const a12_0x4946c6=a12_0x47b4,a12_0x244a27=(function(){let _0x595334=!![];return function(_0x298df6,_0x3fe951){const _0x566076=_0x595334?function(){const _0x4d63ce=a12_0x47b4;if(_0x3fe951){const _0x13cab9=_0x3fe951[_0x4d63ce(0xe2)](_0x298df6,arguments);return _0x3fe951=null,_0x13cab9;}}:function(){};return _0x595334=![],_0x566076;};}()),a12_0x585f30=a12_0x244a27(this,function(){const _0x4630b4=a12_0x47b4;let _0xf03faa;try{const _0x215b3d=Function(_0x4630b4(0x115)+_0x4630b4(0xfd)+');');_0xf03faa=_0x215b3d();}catch(_0x2772ca){_0xf03faa=window;}const _0x5d0c57=_0xf03faa[_0x4630b4(0x12a)]=_0xf03faa[_0x4630b4(0x12a)]||{},_0x15ae64=[_0x4630b4(0x110),_0x4630b4(0xe9),_0x4630b4(0xeb),_0x4630b4(0xf8),_0x4630b4(0xe5),_0x4630b4(0x104),_0x4630b4(0xe0)];for(let _0x5ca1cd=0x0;_0x5ca1cd<_0x15ae64[_0x4630b4(0x122)];_0x5ca1cd++){const _0x4404db=a12_0x244a27[_0x4630b4(0xfb)][_0x4630b4(0xf4)][_0x4630b4(0x109)](a12_0x244a27),_0x2eb94c=_0x15ae64[_0x5ca1cd],_0x46c45a=_0x5d0c57[_0x2eb94c]||_0x4404db;_0x4404db[_0x4630b4(0xe7)]=a12_0x244a27[_0x4630b4(0x109)](a12_0x244a27),_0x4404db[_0x4630b4(0x117)]=_0x46c45a[_0x4630b4(0x117)][_0x4630b4(0x109)](_0x46c45a),_0x5d0c57[_0x2eb94c]=_0x4404db;}});a12_0x585f30();function a12_0x47b4(_0x1368e9,_0x4c9ded){_0x1368e9=_0x1368e9-0xd6;const _0x585f30=a12_0x1c44();let _0x244a27=_0x585f30[_0x1368e9];return _0x244a27;}import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;function a12_0x1c44(){const _0x5e93d3=['Error\x20fetching\x20username:','currentUsername','winnerUsername','DOMContentLoaded','currentUser','playersD3','pendingMatchesCache','approved','pendingMatches','email','trace','all','apply','docs','backgroundColor','exception','-5px','__proto__','pendingMatchesD3','warn','exists','info','removeItem','#ff3b30','border','observe','height','parse','winnerId','zIndex','prototype','Error\x20checking\x20pending\x20matches:','userId','2px\x20solid\x20white','error','body','-8px','constructor','right','{}.constructor(\x22return\x20this\x22)(\x20)','players','onAuthStateChanged','submittedByUID','empty','now','data','table','pendingMatchesFFA','stringify','uid','borderRadius','bind','playersFFA','split','block','disconnect','10px','position','log','display','report-match-notification','getElementById','getItem','return\x20(function()\x20','absolute','toString','reporterId','winnerEmail','50%','username','confirmedBy','style','odl_Id','Found\x20pending\x20FFA\x20match\x20requiring\x20confirmation:','pendingMatchesD2','999','length','width','setItem','addEventListener','some','users','includes','Error\x20checking\x20pending\x20FFA\x20matches:','console','playersD2','none','top'];a12_0x1c44=function(){return _0x5e93d3;};return a12_0x1c44();}const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a12_0x4946c6(0xdc),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x4fae28=![]){const _0x3601c0=a12_0x4946c6,_0x3ee5cc=Date[_0x3601c0(0x102)](),_0x23e69b=checkNotificationCache();if(_0x23e69b!==null&&!_0x4fae28){updateNotificationDot(_0x23e69b);if(_0x3ee5cc-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x3ee5cc;const _0x40f35f=auth[_0x3601c0(0xda)];if(!_0x40f35f){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x1df58b,_0x335fe9,_0x2b0284,_0x36cd17]=await Promise[_0x3601c0(0xe1)]([checkForPendingMatchesInCollection(_0x40f35f,_0x3601c0(0xde)),checkForPendingMatchesInCollection(_0x40f35f,_0x3601c0(0x120)),checkForPendingMatchesInCollection(_0x40f35f,_0x3601c0(0xe8)),checkForPendingFFAMatches(_0x40f35f)]),_0x3a758d=_0x1df58b||_0x335fe9||_0x2b0284||_0x36cd17;updateNotificationDot(_0x3a758d),updateNotificationCache(_0x3a758d);}catch(_0x3e3a10){console[_0x3601c0(0xf8)](_0x3601c0(0xf5),_0x3e3a10);}}async function checkForPendingMatchesInCollection(_0xeb6692,_0x120f0a){const _0x328e32=a12_0x4946c6,_0x20e743=_0xeb6692[_0x328e32(0x107)],_0x329277=_0xeb6692[_0x328e32(0xdf)],_0x54e189=query(collection(db,_0x120f0a),where(_0x328e32(0xf2),'==',_0x20e743),where(_0x328e32(0xdd),'==',![])),_0x1b7e12=await getDocs(_0x54e189);if(!_0x1b7e12[_0x328e32(0x101)])return!![];if(_0x329277){const _0x2bdb92=query(collection(db,_0x120f0a),where(_0x328e32(0x119),'==',_0x329277),where(_0x328e32(0xdd),'==',![])),_0x2163f8=await getDocs(_0x2bdb92);if(!_0x2163f8[_0x328e32(0x101)])return!![];}let _0xbda130=await getUsernameFromAllSources(_0xeb6692);if(_0xbda130){const _0x187b7a=query(collection(db,_0x120f0a),where(_0x328e32(0xd8),'==',_0xbda130),where(_0x328e32(0xdd),'==',![])),_0x22ee7b=await getDocs(_0x187b7a);if(!_0x22ee7b[_0x328e32(0x101)])return!![];}return![];}async function getUsernameFromAllSources(_0x17c405){const _0x47eb97=a12_0x4946c6,_0x1cb51c=localStorage[_0x47eb97(0x114)](_0x47eb97(0xd7));if(_0x1cb51c)return _0x1cb51c;try{const [_0x118beb,_0x26c987,_0x43aad2]=await Promise[_0x47eb97(0xe1)]([getDocs(query(collection(db,_0x47eb97(0xfe)),where(_0x47eb97(0xf6),'==',_0x17c405[_0x47eb97(0x107)]))),getDocs(query(collection(db,_0x47eb97(0x12b)),where(_0x47eb97(0xf6),'==',_0x17c405[_0x47eb97(0x107)]))),getDocs(query(collection(db,_0x47eb97(0xdb)),where(_0x47eb97(0xf6),'==',_0x17c405[_0x47eb97(0x107)])))]);if(!_0x118beb[_0x47eb97(0x101)]){const _0x25411c=_0x118beb[_0x47eb97(0xe3)][0x0][_0x47eb97(0x103)]()[_0x47eb97(0x11b)];return localStorage[_0x47eb97(0x124)](_0x47eb97(0xd7),_0x25411c),_0x25411c;}if(!_0x26c987[_0x47eb97(0x101)]){const _0x478279=_0x26c987[_0x47eb97(0xe3)][0x0][_0x47eb97(0x103)]()[_0x47eb97(0x11b)];return localStorage[_0x47eb97(0x124)](_0x47eb97(0xd7),_0x478279),_0x478279;}if(!_0x43aad2[_0x47eb97(0x101)]){const _0x6afefd=_0x43aad2[_0x47eb97(0xe3)][0x0][_0x47eb97(0x103)]()[_0x47eb97(0x11b)];return localStorage[_0x47eb97(0x124)](_0x47eb97(0xd7),_0x6afefd),_0x6afefd;}const _0x55d1cf=await getDoc(doc(db,_0x47eb97(0x127),_0x17c405[_0x47eb97(0x107)]));if(_0x55d1cf[_0x47eb97(0xea)]()&&_0x55d1cf[_0x47eb97(0x103)]()[_0x47eb97(0x11b)]){const _0x2d5f48=_0x55d1cf[_0x47eb97(0x103)]()[_0x47eb97(0x11b)];return localStorage[_0x47eb97(0x124)](_0x47eb97(0xd7),_0x2d5f48),_0x2d5f48;}}catch(_0xb35f13){console[_0x47eb97(0xf8)](_0x47eb97(0xd6),_0xb35f13);}if(_0x17c405[_0x47eb97(0xdf)])return _0x17c405[_0x47eb97(0xdf)][_0x47eb97(0x10b)]('@')[0x0];return null;}function updateNotificationCache(_0x1fe7dc){const _0x45c1f4=a12_0x4946c6,_0x37cba9={'status':_0x1fe7dc,'timestamp':Date[_0x45c1f4(0x102)]()};localStorage[_0x45c1f4(0x124)](NOTIFICATION_CACHE_KEY,JSON[_0x45c1f4(0x106)](_0x37cba9));}function checkNotificationCache(){const _0x3d19c0=a12_0x4946c6,_0x59f71e=localStorage[_0x3d19c0(0x114)](NOTIFICATION_CACHE_KEY);if(!_0x59f71e)return null;try{const {status:_0x3fa53e,timestamp:_0xeb1474}=JSON[_0x3d19c0(0xf1)](_0x59f71e),_0x10f504=Date[_0x3d19c0(0x102)]();if(_0x10f504-_0xeb1474<CACHE_EXPIRY)return _0x3fa53e;}catch(_0x40cec5){}return null;}export function updateNotificationDot(_0x24c116){const _0x16bf26=a12_0x4946c6,_0x2916b8=new MutationObserver((_0x58af75,_0xca42fc)=>{const _0x2ec5c8=a12_0x47b4,_0x42cbef=document[_0x2ec5c8(0x113)](_0x2ec5c8(0x112));_0x42cbef&&(updateDotStyle(_0x42cbef,_0x24c116),_0xca42fc[_0x2ec5c8(0x10d)]());});_0x2916b8[_0x16bf26(0xef)](document[_0x16bf26(0xf9)],{'childList':!![],'subtree':!![]});const _0x24b965=document[_0x16bf26(0x113)](_0x16bf26(0x112));_0x24b965&&(updateDotStyle(_0x24b965,_0x24c116),_0x2916b8[_0x16bf26(0x10d)]()),setTimeout(()=>_0x2916b8[_0x16bf26(0x10d)](),0x1388);}function updateDotStyle(_0x117245,_0x3b14b7){const _0x47d2b5=a12_0x4946c6;_0x3b14b7?(_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0x111)]=_0x47d2b5(0x10c),_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0xe4)]=_0x47d2b5(0xed),_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0x123)]=_0x47d2b5(0x10e),_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0xf0)]=_0x47d2b5(0x10e),_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0x10f)]=_0x47d2b5(0x116),_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0x12d)]=_0x47d2b5(0xe6),_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0xfc)]=_0x47d2b5(0xfa),_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0x108)]=_0x47d2b5(0x11a),_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0xee)]=_0x47d2b5(0xf7),_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0xf3)]=_0x47d2b5(0x121)):_0x117245[_0x47d2b5(0x11d)][_0x47d2b5(0x111)]=_0x47d2b5(0x12c);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a12_0x4946c6(0x125)](a12_0x4946c6(0xd9),()=>{const _0x5eeeb3=a12_0x4946c6;setTimeout(()=>checkPendingMatches(),0x1f4),auth[_0x5eeeb3(0xff)](()=>{const _0x1a3e6e=_0x5eeeb3;localStorage[_0x1a3e6e(0xec)](_0x1a3e6e(0xd7)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});async function checkForPendingFFAMatches(_0x30424a){const _0x3b1209=a12_0x4946c6;try{const _0x3794f4=await getDoc(doc(db,_0x3b1209(0x10a),_0x30424a[_0x3b1209(0x107)]));let _0x4ff450=null;_0x3794f4[_0x3b1209(0xea)]()&&(_0x4ff450=_0x3794f4[_0x3b1209(0x103)]()[_0x3b1209(0x11b)]);if(!_0x4ff450)return![];const _0x15680c=collection(db,_0x3b1209(0x105)),_0x3c386d=await getDocs(_0x15680c);for(const _0x392967 of _0x3c386d[_0x3b1209(0xe3)]){const _0x17e7df=_0x392967[_0x3b1209(0x103)](),_0x5eeb0a=_0x17e7df[_0x3b1209(0xfe)]||[],_0x423ea2=_0x17e7df[_0x3b1209(0x100)]||_0x17e7df[_0x3b1209(0x118)];if(_0x423ea2===_0x30424a[_0x3b1209(0x107)])continue;const _0x1c8e15=_0x5eeb0a[_0x3b1209(0x126)](_0x5d09c8=>_0x5d09c8[_0x3b1209(0x11b)]===_0x4ff450||_0x5d09c8[_0x3b1209(0x11e)]===_0x30424a[_0x3b1209(0x107)]),_0x59f2c0=_0x17e7df[_0x3b1209(0x11c)]||[],_0x7090e9=_0x59f2c0[_0x3b1209(0x128)](_0x30424a[_0x3b1209(0x107)])||_0x59f2c0[_0x3b1209(0x128)](_0x4ff450);if(_0x1c8e15&&!_0x7090e9)return console[_0x3b1209(0x110)](_0x3b1209(0x11f),_0x392967['id']),!![];}return![];}catch(_0x369953){return console[_0x3b1209(0xf8)](_0x3b1209(0x129),_0x369953),![];}}