(function(_0xd0b1ca,_0x397c29){const _0x2413f0=a0_0x3ae9,_0x4dd078=_0xd0b1ca();while(!![]){try{const _0x33d020=-parseInt(_0x2413f0(0x1dc))/0x1+parseInt(_0x2413f0(0x1e3))/0x2*(parseInt(_0x2413f0(0x1d7))/0x3)+parseInt(_0x2413f0(0x1c7))/0x4+-parseInt(_0x2413f0(0x1c2))/0x5+parseInt(_0x2413f0(0x1b9))/0x6*(parseInt(_0x2413f0(0x1c9))/0x7)+parseInt(_0x2413f0(0x1c5))/0x8+parseInt(_0x2413f0(0x1c8))/0x9*(-parseInt(_0x2413f0(0x1ba))/0xa);if(_0x33d020===_0x397c29)break;else _0x4dd078['push'](_0x4dd078['shift']());}catch(_0x479a3b){_0x4dd078['push'](_0x4dd078['shift']());}}}(a0_0x4772,0x67caf));function a0_0x3ae9(_0x4f7024,_0xd5d5c8){const _0x5727d0=a0_0x4772();return a0_0x3ae9=function(_0x4dce3e,_0x58571f){_0x4dce3e=_0x4dce3e-0x1b9;let _0xb4b7b8=_0x5727d0[_0x4dce3e];return _0xb4b7b8;},a0_0x3ae9(_0x4f7024,_0xd5d5c8);}const a0_0x4a3ad8=(function(){let _0x1c884f=!![];return function(_0x112a9e,_0xe5835c){const _0x1640a9=_0x1c884f?function(){if(_0xe5835c){const _0x196063=_0xe5835c['apply'](_0x112a9e,arguments);return _0xe5835c=null,_0x196063;}}:function(){};return _0x1c884f=![],_0x1640a9;};}()),a0_0x39f727=a0_0x4a3ad8(this,function(){const _0x1df086=a0_0x3ae9;return a0_0x39f727[_0x1df086(0x1cf)]()[_0x1df086(0x1bb)]('(((.+)+)+)+$')[_0x1df086(0x1cf)]()[_0x1df086(0x1db)](a0_0x39f727)['search']('(((.+)+)+)+$');});a0_0x39f727();const a0_0x58571f=(function(){let _0x38d64b=!![];return function(_0x5d0b09,_0xa31bb){const _0x188373=_0x38d64b?function(){const _0x11b19c=a0_0x3ae9;if(_0xa31bb){const _0x43aa6e=_0xa31bb[_0x11b19c(0x1da)](_0x5d0b09,arguments);return _0xa31bb=null,_0x43aa6e;}}:function(){};return _0x38d64b=![],_0x188373;};}()),a0_0x4dce3e=a0_0x58571f(this,function(){const _0x4554a3=a0_0x3ae9;let _0xd3786d;try{const _0x18fa2c=Function('return\x20(function()\x20'+_0x4554a3(0x1ca)+');');_0xd3786d=_0x18fa2c();}catch(_0x3142a7){_0xd3786d=window;}const _0x53859f=_0xd3786d[_0x4554a3(0x1c1)]=_0xd3786d[_0x4554a3(0x1c1)]||{},_0x1be4c9=['log',_0x4554a3(0x1df),_0x4554a3(0x1bf),_0x4554a3(0x1bc),_0x4554a3(0x1cb),_0x4554a3(0x1be),'trace'];for(let _0x4717c3=0x0;_0x4717c3<_0x1be4c9[_0x4554a3(0x1e4)];_0x4717c3++){const _0x2b7920=a0_0x58571f[_0x4554a3(0x1db)][_0x4554a3(0x1e5)][_0x4554a3(0x1c4)](a0_0x58571f),_0x503c9c=_0x1be4c9[_0x4717c3],_0x4679c2=_0x53859f[_0x503c9c]||_0x2b7920;_0x2b7920[_0x4554a3(0x1cd)]=a0_0x58571f[_0x4554a3(0x1c4)](a0_0x58571f),_0x2b7920['toString']=_0x4679c2['toString'][_0x4554a3(0x1c4)](_0x4679c2),_0x53859f[_0x503c9c]=_0x2b7920;}});a0_0x4dce3e();import{db}from'../firebase-config.js';import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';function a0_0x4772(){const _0x58eb53=['get','matches','playersD3','1268yKJswm','length','prototype','divisions','matchesD3','set','nonParticipants','email','5050302gVjfUE','3620PcuUxn','search','error','username','table','info','players','console','1722405doPmRn','userProfiles','bind','5863424FdXBrv','every','2099340LICyWA','45270gfxegz','7OJOPsF','{}.constructor(\x22return\x20this\x22)(\x20)','exception','elo','__proto__','entries','toString','commit','createdAt','push','name','data','matchesD2','toISOString','3267dkqxGZ','active','docs','apply','constructor','199430uhLaVr','has','size','warn'];a0_0x4772=function(){return _0x58eb53;};return a0_0x4772();}export async function migrateUserData(){const _0x2bdf86=a0_0x3ae9,_0x34a6fa=[_0x2bdf86(0x1c0),'playersD2',_0x2bdf86(0x1e2),_0x2bdf86(0x1e9),_0x2bdf86(0x1c3)],_0x245dc2=[];let _0x46d27c=writeBatch(db),_0x113a0f=0x0;const _0x4a378c=collection(db,'userProfiles'),_0x3de35f=new Map(),_0x3ad086=(_0x3e13a9,_0x34889d)=>{const _0x3e15ea=_0x2bdf86;_0x113a0f>=0x1f4&&(_0x245dc2['push'](_0x46d27c),_0x46d27c=writeBatch(db),_0x113a0f=0x0);const _0x22a8ab=doc(_0x4a378c,_0x3e13a9);_0x46d27c[_0x3e15ea(0x1e8)](_0x22a8ab,_0x34889d),_0x113a0f++;};for(const _0x32b876 of _0x34a6fa){const _0x5015c0=collection(db,_0x32b876),_0x2c3fbb=await getDocs(_0x5015c0);_0x2c3fbb[_0x2bdf86(0x1d9)]['forEach'](_0x26a583=>{const _0x2b1e89=_0x2bdf86,_0x1c639a=_0x26a583['id'],_0x2ab2f2=_0x26a583[_0x2b1e89(0x1d4)]();!_0x3de35f[_0x2b1e89(0x1dd)](_0x1c639a)&&_0x3de35f[_0x2b1e89(0x1e8)](_0x1c639a,{'username':_0x2ab2f2[_0x2b1e89(0x1bd)]||_0x2ab2f2[_0x2b1e89(0x1d3)]||_0x1c639a,'email':_0x2ab2f2[_0x2b1e89(0x1ea)]||null,'discord':_0x2ab2f2['discord']||null,'createdAt':_0x2ab2f2[_0x2b1e89(0x1d1)]||new Date()[_0x2b1e89(0x1d6)](),'divisions':[]});const _0x1adb10=_0x3de35f[_0x2b1e89(0x1e0)](_0x1c639a);if(_0x32b876===_0x2b1e89(0x1c0))_0x1adb10['divisions'][_0x2b1e89(0x1d2)]({'id':0x1,'elo':_0x2ab2f2[_0x2b1e89(0x1cc)]||0x5dc,'isActive':_0x2ab2f2['active']!==![]});else{if(_0x32b876==='playersD2')_0x1adb10[_0x2b1e89(0x1e6)]['push']({'id':0x2,'elo':_0x2ab2f2[_0x2b1e89(0x1cc)]||0x5dc,'isActive':_0x2ab2f2[_0x2b1e89(0x1d8)]!==![]});else _0x32b876===_0x2b1e89(0x1e2)&&_0x1adb10[_0x2b1e89(0x1e6)][_0x2b1e89(0x1d2)]({'id':0x3,'elo':_0x2ab2f2[_0x2b1e89(0x1cc)]||0x5dc,'isActive':_0x2ab2f2[_0x2b1e89(0x1d8)]!==![]});}});}for(const [_0x18f01e,_0x5464e2]of _0x3de35f[_0x2bdf86(0x1ce)]()){_0x3ad086(_0x18f01e,_0x5464e2);}_0x113a0f>0x0&&_0x245dc2[_0x2bdf86(0x1d2)](_0x46d27c);const _0x16619b=[];for(const _0x4dd726 of _0x245dc2){try{await _0x4dd726[_0x2bdf86(0x1d0)](),_0x16619b[_0x2bdf86(0x1d2)]({'success':!![]});}catch(_0x15414b){_0x16619b[_0x2bdf86(0x1d2)]({'success':![],'error':_0x15414b});}}return{'usersProcessed':_0x3de35f[_0x2bdf86(0x1de)],'batchesExecuted':_0x16619b['length'],'success':_0x16619b[_0x2bdf86(0x1c6)](_0x44dac6=>_0x44dac6['success'])};}export async function updateMatchReferences(){const _0x5a7d94=a0_0x3ae9,_0x552d48=[_0x5a7d94(0x1e1),_0x5a7d94(0x1d5),_0x5a7d94(0x1e7)];let _0x5bf210=0x0;for(const _0xeab08e of _0x552d48){const _0x29d660=collection(db,_0xeab08e),_0x42d9a1=await getDocs(_0x29d660),_0x54c685=0x1f4;let _0xcc42ab=writeBatch(db),_0x157874=0x0;for(const _0x2e7829 of _0x42d9a1[_0x5a7d94(0x1d9)]){const _0x3dd02c=_0x2e7829[_0x5a7d94(0x1d4)](),_0x57361d=doc(db,_0xeab08e,_0x2e7829['id']);_0xcc42ab['update'](_0x57361d,{'isMigrated':!![],'lastModified':new Date()[_0x5a7d94(0x1d6)]()}),_0x157874++,_0x5bf210++,_0x157874>=_0x54c685&&(await _0xcc42ab[_0x5a7d94(0x1d0)](),_0xcc42ab=writeBatch(db),_0x157874=0x0);}_0x157874>0x0&&await _0xcc42ab['commit']();}return{'updatedCount':_0x5bf210};}