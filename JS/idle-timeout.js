const a22_0x73b739=a22_0x1001;import a22_0x24bb53,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x47924b=a22_0x1001;if(document['getElementById']('idle-overlay'))return;const _0x35e85d=document[_0x47924b(0xfa)](_0x47924b(0x116));_0x35e85d['id']='idle-overlay',_0x35e85d['style'][_0x47924b(0x103)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x1c6545=document['createElement']('div');_0x1c6545['style']['cssText']=_0x47924b(0x111);const _0x13a766=document['createElement']('h2');_0x13a766['textContent']=_0x47924b(0xfd),_0x13a766['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x5b3ccf=document['createElement']('p');_0x5b3ccf['textContent']=_0x47924b(0x109),_0x5b3ccf['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x1c73d0=document['createElement']('button');_0x1c73d0['id']='resume-session-btn',_0x1c73d0['textContent']='Return\x20to\x20Website',_0x1c73d0[_0x47924b(0xf7)]['cssText']=_0x47924b(0x10f),_0x1c73d0['onmouseover']=function(){const _0x2bf40f=_0x47924b;this['style']['backgroundColor']=_0x2bf40f(0x118);},_0x1c73d0['onmouseout']=function(){const _0x58a627=_0x47924b;this['style'][_0x58a627(0x117)]='#50C878';},_0x1c6545['appendChild'](_0x13a766),_0x1c6545['appendChild'](_0x5b3ccf),_0x1c6545['appendChild'](_0x1c73d0),_0x35e85d[_0x47924b(0x104)](_0x1c6545),document['body']['appendChild'](_0x35e85d),_0x1c73d0['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function a22_0x22a4(){const _0x80f070=['length','Reload\x20Page','size','message','click','warn','apply','bind','style','collection','Pending\x20operations:','createElement','activeListeners','Forcing\x20idle\x20timeout...','Session\x20Suspended\x20Due\x20to\x20Inactivity','Retry\x20Connection','constructor','RDL_LAST_ACTIVITY','__proto__','network','cssText','appendChild','getElementById','keys','network-error-overlay','resumeAllListeners','Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.','mousedown','suspendSession','flex','log','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','includes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','idle-overlay','Retrying\x20connection...','error','loading','div','backgroundColor','#3da05f','display','button','return\x20(function()\x20','none','RDL_NETWORK_ERROR','suspendAllListeners','textContent'];a22_0x22a4=function(){return _0x80f070;};return a22_0x22a4();}function createNetworkErrorOverlay(){const _0x1884cc=a22_0x1001;if(document['getElementById'](_0x1884cc(0x107)))return;const _0x252213=document['createElement'](_0x1884cc(0x116));_0x252213['id']=_0x1884cc(0x107),_0x252213['style'][_0x1884cc(0x103)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x1349f6=document[_0x1884cc(0xfa)]('div');_0x1349f6['style']['cssText']=_0x1884cc(0x111);const _0x5a8447=document[_0x1884cc(0xfa)]('h2');_0x5a8447['textContent']='Connection\x20Error',_0x5a8447['style']['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x5a2e0c=document['createElement']('p');_0x5a2e0c[_0x1884cc(0x11f)]='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x5a2e0c[_0x1884cc(0xf7)][_0x1884cc(0x103)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x47450c=document[_0x1884cc(0xfa)](_0x1884cc(0x11a));_0x47450c['id']='retry-connection-btn',_0x47450c['textContent']=_0x1884cc(0xfe),_0x47450c['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x4cd71d=document[_0x1884cc(0xfa)]('button');_0x4cd71d['id']='reload-page-btn',_0x4cd71d['textContent']=_0x1884cc(0xf0),_0x4cd71d['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x504c50=document['createElement']('div');_0x504c50['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x504c50['appendChild'](_0x47450c),_0x504c50['appendChild'](_0x4cd71d),_0x1349f6[_0x1884cc(0x104)](_0x5a8447),_0x1349f6['appendChild'](_0x5a2e0c),_0x1349f6['appendChild'](_0x504c50),_0x252213['appendChild'](_0x1349f6),document['body'][_0x1884cc(0x104)](_0x252213),_0x47450c['addEventListener']('click',retryConnection),_0x4cd71d['addEventListener'](_0x1884cc(0xf3),()=>window['location']['reload']());}function a22_0x1001(_0x2f5458,_0x22bbc7){const _0x3934b4=a22_0x22a4();return a22_0x1001=function(_0x59eba6,_0xafe7e5){_0x59eba6=_0x59eba6-0xef;let _0x22a416=_0x3934b4[_0x59eba6];return _0x22a416;},a22_0x1001(_0x2f5458,_0x22bbc7);}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x5089cf=a22_0x1001;clearTimeout(idleTimer);const _0x434cb0=document[_0x5089cf(0x105)]('network-error-overlay');_0x434cb0&&(_0x434cb0['style']['display']=_0x5089cf(0x10c)),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x24bb53[_0x5089cf(0x11e)]();}function retryConnection(){const _0x22bc02=a22_0x1001;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x4ca1f2=document['querySelector']('#network-error-overlay\x20p');_0x4ca1f2&&(_0x4ca1f2[_0x22bc02(0x11f)]='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x4e03a7=document[_0x22bc02(0x105)]('retry-connection-btn');_0x4e03a7&&(_0x4e03a7['disabled']=!![],_0x4e03a7[_0x22bc02(0xf7)]['opacity']='0.5',_0x4e03a7['style']['cursor']='not-allowed');return;}const _0x30d5b5=document['getElementById']('network-error-overlay');_0x30d5b5&&(_0x30d5b5['style'][_0x22bc02(0x119)]=_0x22bc02(0x11c));window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log'](_0x22bc02(0x113));try{const {rdlFirestore:_0x1701a5}=window;if(_0x1701a5){const _0x4adcef=_0x1701a5[_0x22bc02(0xf8)]('system');_0x1701a5['getDocs'](_0x4adcef)['catch'](_0x557778=>{console['error']('Connection\x20test\x20failed:',_0x557778),handleNetworkError();});}}catch(_0xfbb4a0){console['error']('Failed\x20to\x20test\x20connection:',_0xfbb4a0),handleNetworkError();}a22_0x24bb53[_0x22bc02(0x108)]();}function suspendSession(){const _0x5bad63=a22_0x1001;isSessionSuspended=!![];const _0x4288b3=document['getElementById'](_0x5bad63(0x112));_0x4288b3&&(_0x4288b3['style'][_0x5bad63(0x119)]='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a22_0x24bb53['suspendAllListeners']();}function resumeSession(){const _0x103d06=a22_0x1001;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x3f6324=document['getElementById'](_0x103d06(0x112));_0x3f6324&&(_0x3f6324['style'][_0x103d06(0x119)]='none'),console[_0x103d06(0x10d)]('Session\x20resumed'),resetIdleTimer(),a22_0x24bb53['resumeAllListeners'](),idleTimer&&Date['now']()-(window[_0x103d06(0x100)]||0x0)>IDLE_TIMEOUT*0x2&&(console[_0x103d06(0x10d)](_0x103d06(0x10e)),window['location']['reload']());}function initIdleTimeout(){const _0x387209=a22_0x1001,_0x23efeb=(function(){let _0x1e4452=!![];return function(_0x1f2ac0,_0x5545a6){const _0x48f6ce=_0x1e4452?function(){const _0x1be067=a22_0x1001;if(_0x5545a6){const _0x59ce05=_0x5545a6[_0x1be067(0xf5)](_0x1f2ac0,arguments);return _0x5545a6=null,_0x59ce05;}}:function(){};return _0x1e4452=![],_0x48f6ce;};}()),_0x1bde29=_0x23efeb(this,function(){const _0x14af8d=a22_0x1001;let _0xec6390;try{const _0x118d97=Function(_0x14af8d(0x11b)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xec6390=_0x118d97();}catch(_0x2e8a6c){_0xec6390=window;}const _0x3be7c5=_0xec6390['console']=_0xec6390['console']||{},_0x4e859a=[_0x14af8d(0x10d),_0x14af8d(0xf4),'info','error','exception','table','trace'];for(let _0x2ac58c=0x0;_0x2ac58c<_0x4e859a[_0x14af8d(0xef)];_0x2ac58c++){const _0x5c0686=_0x23efeb[_0x14af8d(0xff)]['prototype']['bind'](_0x23efeb),_0x2d1fda=_0x4e859a[_0x2ac58c],_0x1ee985=_0x3be7c5[_0x2d1fda]||_0x5c0686;_0x5c0686[_0x14af8d(0x101)]=_0x23efeb[_0x14af8d(0xf6)](_0x23efeb),_0x5c0686['toString']=_0x1ee985['toString']['bind'](_0x1ee985),_0x3be7c5[_0x2d1fda]=_0x5c0686;}});_0x1bde29(),createIdleOverlay();const _0x3b3daf=[_0x387209(0x10a),'mousemove','keypress','scroll','touchstart','click'];_0x3b3daf['forEach'](_0xab51a1=>{document['addEventListener'](_0xab51a1,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x359fac){const _0x192845=_0x387209;_0x359fac['error']&&(_0x359fac[_0x192845(0x114)][_0x192845(0xf2)]&&_0x359fac[_0x192845(0x114)]['message']['includes']('network')||_0x359fac[_0x192845(0x114)]['code']&&(_0x359fac['error']['code']==='unavailable'||_0x359fac['error']['code']==='resource-exhausted'||_0x359fac['error']['code'][_0x192845(0x110)](_0x192845(0x102))))&&(handleNetworkError(),_0x359fac['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window[_0x387209(0x10b)]=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x228f3d=_0x387209;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log']('Network\x20error:',window[_0x228f3d(0x11d)]),console['log']('Active\x20listeners:',a22_0x24bb53['activeListeners']['size']),console['log'](_0x228f3d(0xf9),a22_0x24bb53['pendingOperations'][_0x228f3d(0xf1)]),console['log']('Blocked\x20operations:',a22_0x24bb53['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a22_0x24bb53[_0x228f3d(0xfb)]['keys']()),'pendingOperations':Array['from'](a22_0x24bb53['pendingOperations'][_0x228f3d(0x106)]()),'blockedCount':a22_0x24bb53['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){const _0x2083ad=_0x387209;console[_0x2083ad(0x10d)](_0x2083ad(0xfc)),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']===a22_0x73b739(0x115)?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();