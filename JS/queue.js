const a43_0x514ec8=a43_0x1975,a43_0xf3b4eb=(function(){let _0x5cc68c=!![];return function(_0x3794b5,_0x29aafb){const _0x5b974c=_0x5cc68c?function(){const _0x27ae94=a43_0x1975;if(_0x29aafb){const _0x17dc37=_0x29aafb[_0x27ae94(0x1df)](_0x3794b5,arguments);return _0x29aafb=null,_0x17dc37;}}:function(){};return _0x5cc68c=![],_0x5b974c;};}()),a43_0x482513=a43_0xf3b4eb(this,function(){const _0x569347=a43_0x1975;let _0x452eb4;try{const _0x1a049b=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x452eb4=_0x1a049b();}catch(_0x5a4840){_0x452eb4=window;}const _0x4dcc1d=_0x452eb4['console']=_0x452eb4['console']||{},_0x41cc01=['log','warn',_0x569347(0x1da),'error',_0x569347(0x1d9),'table',_0x569347(0x1e0)];for(let _0x3dc4d7=0x0;_0x3dc4d7<_0x41cc01[_0x569347(0x1dc)];_0x3dc4d7++){const _0x320c62=a43_0xf3b4eb['constructor']['prototype']['bind'](a43_0xf3b4eb),_0x296195=_0x41cc01[_0x3dc4d7],_0x16b314=_0x4dcc1d[_0x296195]||_0x320c62;_0x320c62['__proto__']=a43_0xf3b4eb['bind'](a43_0xf3b4eb),_0x320c62['toString']=_0x16b314['toString']['bind'](_0x16b314),_0x4dcc1d[_0x296195]=_0x320c62;}});function a43_0x1975(_0x4fbed6,_0x388c73){const _0x482513=a43_0x2775();return a43_0x1975=function(_0xf3b4eb,_0x18373d){_0xf3b4eb=_0xf3b4eb-0x1d8;let _0x277560=_0x482513[_0xf3b4eb];return _0x277560;},a43_0x1975(_0x4fbed6,_0x388c73);}a43_0x482513();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function a43_0x2775(){const _0x15c3a6=['username','exception','info','toDate','length','block','Just\x20now','apply','trace','addEventListener'];a43_0x2775=function(){return _0x15c3a6;};return a43_0x2775();}function updateQueueDisplay(_0x160cd0){const _0x37071d=a43_0x1975,_0x9e21d4=document['getElementById']('queue-container');if(!_0x9e21d4)return;if(_0x160cd0['length']===0x0){_0x9e21d4['style']['display']='none';return;}_0x9e21d4['style']['display']=_0x37071d(0x1dd);let _0x488e86='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x160cd0['forEach'](_0x52821f=>{const _0xe9dc5a=_0x37071d;_0x488e86+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x52821f[_0xe9dc5a(0x1d8)]||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x52821f['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x488e86+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x9e21d4['innerHTML']=_0x488e86;}function formatQueueTime(_0x2f6987){const _0x559686=a43_0x1975;if(!_0x2f6987)return _0x559686(0x1de);const _0x320871=_0x2f6987['toDate']?_0x2f6987['toDate']():new Date(_0x2f6987),_0x5a4bba=new Date(),_0x303e93=Math['floor']((_0x5a4bba-_0x320871)/0xea60);if(_0x303e93<0x1)return _0x559686(0x1de);return _0x303e93+'m\x20in\x20queue';}async function checkQueueTimeout(_0x57e1e5){const _0x428d03=a43_0x1975;if(!_0x57e1e5['lastUpdated'])return;const _0xe3dbff=_0x57e1e5['lastUpdated']['toDate']?_0x57e1e5['lastUpdated'][_0x428d03(0x1db)]():new Date(_0x57e1e5['lastUpdated']),_0xe1b2ec=new Date(),_0x2aacfe=Math['floor']((_0xe1b2ec-_0xe3dbff)/0xea60);if(_0x2aacfe>=0x1e)try{const _0x19478a=doc(db,'readyPlayers',_0x57e1e5['id']);await updateDoc(_0x19478a,{'isReady':![]});}catch(_0x10ed78){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x10ed78);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x1a8bec=>{const _0x1c11c3=[];_0x1a8bec['forEach'](_0xd6ca81=>{const _0x686c28=_0xd6ca81['data']();if(_0x686c28['isReady']===!![]){const _0x3a2f3b={'id':_0xd6ca81['id'],'username':_0x686c28['username'],'lastUpdated':_0x686c28['lastUpdated']||new Date()};_0x1c11c3['push'](_0x3a2f3b),checkQueueTimeout(_0x3a2f3b);}}),updateQueueDisplay(_0x1c11c3);},_0x2a9b13=>{console['error']('Error\x20in\x20queue\x20listener:',_0x2a9b13);});window[a43_0x514ec8(0x1e1)]('unload',()=>{unsubscribe();});