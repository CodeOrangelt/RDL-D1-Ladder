const a33_0x2bace1=a33_0x1440,a33_0x3477db=(function(){let _0x1781cb=!![];return function(_0x49b7f0,_0x125e9d){const _0x46a7de=_0x1781cb?function(){if(_0x125e9d){const _0x2f2540=_0x125e9d['apply'](_0x49b7f0,arguments);return _0x125e9d=null,_0x2f2540;}}:function(){};return _0x1781cb=![],_0x46a7de;};}()),a33_0x252e33=a33_0x3477db(this,function(){const _0x33769a=a33_0x1440,_0xc22004=function(){let _0x4dd635;try{_0x4dd635=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xbb47){_0x4dd635=window;}return _0x4dd635;},_0x5cf821=_0xc22004(),_0x118696=_0x5cf821[_0x33769a(0x1ea)]=_0x5cf821['console']||{},_0x48d11c=['log',_0x33769a(0x1f7),'info','error','exception','table','trace'];for(let _0x14cd11=0x0;_0x14cd11<_0x48d11c['length'];_0x14cd11++){const _0x1b247d=a33_0x3477db['constructor']['prototype']['bind'](a33_0x3477db),_0x2e287b=_0x48d11c[_0x14cd11],_0x266fca=_0x118696[_0x2e287b]||_0x1b247d;_0x1b247d[_0x33769a(0x1e7)]=a33_0x3477db[_0x33769a(0x1bb)](a33_0x3477db),_0x1b247d['toString']=_0x266fca[_0x33769a(0x1f0)][_0x33769a(0x1bb)](_0x266fca),_0x118696[_0x2e287b]=_0x1b247d;}});a33_0x252e33();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x382f01 from'./firebase-idle-wrapper.js';const styleEl=document[a33_0x2bace1(0x1ca)]('style');function a33_0x35f6(){const _0x438aeb=['loserScore','style','#4CAF50','position','wins','sort','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','playerId','appendChild','entries','head','eloHistoryD3','userProfiles','empty','D3:\x20Error\x20fetching\x20ELO\x20history:','losses','%</td>\x0a\x20\x20\x20\x20</tr>','player','desc','bind','elo','innerHTML','Error\x20loading\x20D3\x20ladder:','catch','get','bold','MAX_SAFE_INTEGER','log','includes','timestamp','totalDeaths','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','map','winRate','createElement','kda','textContent','Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:','error','set','find','country','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','#50C878','toLowerCase','0.85em','playerUsername','fontWeight','<img\x20src=\x22../images/flags/','abs','\x20ELO\x20change:\x20','\x20entries\x20in\x20eloHistoryD3','#ladder-d3\x20thead\x20tr','totalKills','previousElo','from','has','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20','D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...','push','gray','__proto__','gameMode',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','console','loserUsername','D3:\x20Found\x20','data','size','playersD3','toString','forEach','#ladder-d3\x20tbody','td:nth-child(3)','querySelector','totalMatches','join','warn','username'];a33_0x35f6=function(){return _0x438aeb;};return a33_0x35f6();}styleEl[a33_0x2bace1(0x1cc)]='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document[a33_0x2bace1(0x1b2)][a33_0x2bace1(0x1b0)](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x482eff=![]){const _0x4b55eb=a33_0x2bace1,_0x5b643d=document['querySelector'](_0x4b55eb(0x1f2));if(!_0x5b643d){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x5b643d['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x4b6111=Date['now']();if(!_0x482eff&&playerCacheD3[_0x4b55eb(0x1ed)]&&_0x4b6111-playerCacheD3[_0x4b55eb(0x1c5)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3[_0x4b55eb(0x1ed)]);return;}const _0x11c908=collection(db,'playersD3'),_0xfd0967=await getDocs(_0x11c908),_0x44b2de=[];_0xfd0967['forEach'](_0x1af7be=>{const _0x1a2ad3=_0x4b55eb,_0x29f2ae=_0x1af7be['data']();_0x29f2ae[_0x1a2ad3(0x1f8)]&&_0x44b2de['push']({..._0x29f2ae,'id':_0x1af7be['id'],'elo':_0x29f2ae['eloRating']||0x0,'position':_0x29f2ae['position']||Number[_0x1a2ad3(0x1c2)]});});const _0x3df399=collection(db,_0x4b55eb(0x1b4)),_0xa80f70=await getDocs(_0x3df399),_0x2929e7=new Map();_0xa80f70['forEach'](_0x19904e=>{const _0x13624c=_0x4b55eb,_0x3984ad=_0x19904e['data']();_0x3984ad[_0x13624c(0x1f8)]&&_0x2929e7['set'](_0x3984ad[_0x13624c(0x1f8)][_0x13624c(0x1d4)](),_0x3984ad);});for(const _0x1e150d of _0x44b2de){const _0x5d99ac=_0x1e150d[_0x4b55eb(0x1f8)]['toLowerCase']();if(_0x2929e7['has'](_0x5d99ac)){const _0x26b495=_0x2929e7['get'](_0x5d99ac);_0x26b495[_0x4b55eb(0x1d1)]&&(_0x1e150d[_0x4b55eb(0x1d1)]=_0x26b495['country']['toLowerCase']());}}const _0x3f89f9=_0x44b2de['map'](_0x212b1e=>_0x212b1e[_0x4b55eb(0x1f8)]),_0x592916=await fetchBatchMatchStatsD3(_0x3f89f9);_0x44b2de[_0x4b55eb(0x1ad)]((_0x1f2333,_0x6d8260)=>{const _0x5c14d9=_0x4b55eb,_0x21433a=_0x592916[_0x5c14d9(0x1c0)](_0x1f2333['username'])?.['totalMatches']||0x0,_0x557174=_0x592916['get'](_0x6d8260[_0x5c14d9(0x1f8)])?.['totalMatches']||0x0;if(_0x21433a===0x0!==(_0x557174===0x0))return _0x21433a===0x0?0x1:-0x1;return(_0x1f2333['position']||0x3e7)-(_0x6d8260['position']||0x3e7);}),_0x44b2de['forEach']((_0x1a0ee1,_0x1d264b)=>{_0x1a0ee1['position']=_0x1d264b+0x1;}),playerCacheD3['data']=_0x44b2de,playerCacheD3[_0x4b55eb(0x1c5)]=_0x4b6111,updateLadderDisplayD3(_0x44b2de);}catch(_0x2ac9ad){console['error'](_0x4b55eb(0x1be),_0x2ac9ad),_0x5b643d['innerHTML']=_0x4b55eb(0x1e3)+_0x2ac9ad['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x24f581){const _0x193050=a33_0x2bace1;if(!_0x24f581)return 0x0;const _0x3e746e=_0x24f581['toDate'](),_0x3d91a8=new Date(),_0x3f0cb6=Math[_0x193050(0x1d9)](_0x3d91a8-_0x3e746e);return Math['ceil'](_0x3f0cb6/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x15fa6f,_0x391ae7){const _0x547047=a33_0x2bace1;try{const _0x1ae5b4=collection(db,'playersD3'),_0x5ba70a=await getDocs(_0x1ae5b4),_0x2713ae=[];_0x5ba70a[_0x547047(0x1f1)](_0x3fffae=>{const _0x2dec08=_0x547047;_0x2713ae[_0x2dec08(0x1e5)]({'id':_0x3fffae['id'],..._0x3fffae[_0x2dec08(0x1ed)]()});});const _0x4c7fee=_0x2713ae[_0x547047(0x1d0)](_0x2160aa=>_0x2160aa[_0x547047(0x1f8)]===_0x15fa6f),_0x36ef6a=_0x2713ae['find'](_0x3594d1=>_0x3594d1[_0x547047(0x1f8)]===_0x391ae7);if(!_0x4c7fee||!_0x36ef6a){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x4c7fee['position']>_0x36ef6a[_0x547047(0x1ab)]){const _0x1f84c0=_0x36ef6a[_0x547047(0x1ab)];for(const _0x19c414 of _0x2713ae){_0x19c414['position']>=_0x36ef6a[_0x547047(0x1ab)]&&_0x19c414['position']<_0x4c7fee[_0x547047(0x1ab)]&&_0x19c414['username']!==_0x15fa6f&&await updateDoc(doc(db,'playersD3',_0x19c414['id']),{'position':_0x19c414[_0x547047(0x1ab)]+0x1});}await updateDoc(doc(db,_0x547047(0x1ef),_0x4c7fee['id']),{'position':_0x1f84c0});if(_0x1f84c0===0x1){const _0x5dbd5c=doc(db,'playersD3',_0x4c7fee['id']),_0x43fe36=await getDoc(_0x5dbd5c);!_0x43fe36[_0x547047(0x1ed)]()['firstPlaceDate']&&await updateDoc(_0x5dbd5c,{'firstPlaceDate':Timestamp['now']()});}if(_0x36ef6a['position']===0x1){const _0xd3dd0=doc(db,'playersD3',_0x36ef6a['id']);await updateDoc(_0xd3dd0,{'firstPlaceDate':null});}}}catch(_0x48e76c){console[_0x547047(0x1ce)]('Error\x20updating\x20D3\x20player\x20positions:',_0x48e76c);}}function a33_0x1440(_0x475814,_0xb03024){const _0x252e33=a33_0x35f6();return a33_0x1440=function(_0x3477db,_0x46b22e){_0x3477db=_0x3477db-0x1a8;let _0x35f68f=_0x252e33[_0x3477db];return _0x35f68f;},a33_0x1440(_0x475814,_0xb03024);}async function updateLadderDisplayD3(_0xb73d10){const _0x5ce36a=a33_0x2bace1;_0xb73d10[_0x5ce36a(0x1ad)]((_0x42eaf0,_0x30d558)=>_0x42eaf0['position']-_0x30d558['position']);const _0x443f7d=document['querySelector']('#ladder-d3\x20tbody');if(!_0x443f7d)return;_0x443f7d['innerHTML']='';const _0x445227=_0xb73d10[_0x5ce36a(0x1c8)](_0x574ba5=>_0x574ba5[_0x5ce36a(0x1f8)]),_0x1c0e00=await fetchBatchMatchStatsD3(_0x445227),_0x3b59df=document[_0x5ce36a(0x1f4)](_0x5ce36a(0x1dc));_0x3b59df[_0x5ce36a(0x1bd)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0x288dc8=_0xb73d10['map'](_0x4e5da4=>{const _0xab87af=_0x1c0e00['get'](_0x4e5da4['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x4e5da4,_0xab87af);})[_0x5ce36a(0x1f6)]('');_0x443f7d['innerHTML']=_0x288dc8,getPlayersLastEloChangesD3(_0x445227)['then'](_0x511b38=>{const _0x2e4666=_0x5ce36a,_0x3a51b3=new Map();_0x443f7d['querySelectorAll']('tr')[_0x2e4666(0x1f1)]((_0x20b2ad,_0xd31896)=>{_0xd31896<_0x445227['length']&&_0x3a51b3['set'](_0x445227[_0xd31896],_0x20b2ad);}),_0x511b38[_0x2e4666(0x1f1)]((_0x567c61,_0x4ba57c)=>{const _0xffed4e=_0x2e4666,_0x2a0c99=_0x3a51b3[_0xffed4e(0x1c0)](_0x4ba57c);if(_0x2a0c99&&_0x567c61!==0x0){const _0x27cac3=_0x2a0c99[_0xffed4e(0x1f4)](_0xffed4e(0x1f3));if(_0x27cac3){const _0x22e4b5=_0x567c61>0x0?'+'+_0x567c61:''+_0x567c61,_0x176f81=_0x27cac3['querySelector']('.trend-indicator');_0x176f81&&(_0x176f81['textContent']=_0x22e4b5,_0x176f81[_0xffed4e(0x1a9)]['color']=_0x567c61>0x0?_0xffed4e(0x1aa):'#F44336',_0x176f81['style'][_0xffed4e(0x1d7)]=_0xffed4e(0x1c1),_0x176f81['style']['fontSize']=_0xffed4e(0x1d5),_0x176f81['style']['display']='inline',_0x176f81[_0xffed4e(0x1a9)]['visibility']='visible',_0x176f81['style']['opacity']='1');}}});})[_0x5ce36a(0x1bf)](_0x3b01fa=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x3b01fa));}async function fetchBatchMatchStatsD3(_0x5808e9){const _0x5646cb=a33_0x2bace1,_0x47a7a5=new Map();try{const _0x4e9410=collection(db,'approvedMatchesD3'),_0x2143d4=await getDocs(_0x4e9410);_0x2143d4['forEach'](_0x2fc55a=>{const _0x326a49=a33_0x1440,_0x321453=_0x2fc55a['data']();if(_0x5808e9[_0x326a49(0x1c4)](_0x321453['winnerUsername'])){const _0x32c8be=_0x321453['winnerUsername'];!_0x47a7a5['has'](_0x32c8be)&&_0x47a7a5['set'](_0x32c8be,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x1670c4=_0x47a7a5['get'](_0x32c8be);_0x1670c4['wins']++,_0x1670c4['totalMatches']++,_0x1670c4['totalKills']+=parseInt(_0x321453['winnerScore'])||0x0,_0x1670c4['totalDeaths']+=parseInt(_0x321453['loserScore'])||0x0;}if(_0x5808e9[_0x326a49(0x1c4)](_0x321453['loserUsername'])){const _0x18010a=_0x321453[_0x326a49(0x1eb)];!_0x47a7a5['has'](_0x18010a)&&_0x47a7a5[_0x326a49(0x1cf)](_0x18010a,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x472f7b=_0x47a7a5['get'](_0x18010a);_0x472f7b[_0x326a49(0x1b7)]++,_0x472f7b[_0x326a49(0x1f5)]++,_0x472f7b[_0x326a49(0x1dd)]+=parseInt(_0x321453[_0x326a49(0x1a8)])||0x0,_0x472f7b[_0x326a49(0x1c6)]+=parseInt(_0x321453['winnerScore'])||0x0;}}),_0x47a7a5[_0x5646cb(0x1f1)](_0xb74a1a=>{const _0x28315b=_0x5646cb;_0xb74a1a['kda']=_0xb74a1a['totalDeaths']>0x0?(_0xb74a1a['totalKills']/_0xb74a1a[_0x28315b(0x1c6)])['toFixed'](0x2):_0xb74a1a['totalKills'],_0xb74a1a[_0x28315b(0x1c9)]=_0xb74a1a['totalMatches']>0x0?(_0xb74a1a[_0x28315b(0x1ac)]/_0xb74a1a['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x3dd15f){console['error'](_0x5646cb(0x1cd),_0x3dd15f);}return _0x47a7a5;}function createPlayerRowD3(_0xf2b0e3,_0x443885){const _0x19aac4=a33_0x2bace1,_0x5ed573=parseFloat(_0xf2b0e3[_0x19aac4(0x1bc)])||0x0;let _0x2f8b34=_0x19aac4(0x1e6);if(_0x5ed573>=0x7d0)_0x2f8b34=_0x19aac4(0x1d3);else{if(_0x5ed573>=0x708)_0x2f8b34='#FFD700';else{if(_0x5ed573>=0x640)_0x2f8b34='#C0C0C0';else _0x5ed573>=0x578&&(_0x2f8b34='#CD7F32');}}let _0x127d6e='';return _0xf2b0e3['country']&&(_0x127d6e=_0x19aac4(0x1d8)+_0xf2b0e3[_0x19aac4(0x1d1)]['toLowerCase']()+_0x19aac4(0x1d2)+_0xf2b0e3[_0x19aac4(0x1d1)]+_0x19aac4(0x1ae)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xf2b0e3['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0xf2b0e3['username'])+_0x19aac4(0x1c7)+_0x2f8b34+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xf2b0e3[_0x19aac4(0x1f8)]+_0x19aac4(0x1e2)+_0x127d6e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x2f8b34+_0x19aac4(0x1e9)+_0x5ed573+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x443885[_0x19aac4(0x1f5)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x443885['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x443885['losses']+_0x19aac4(0x1e1)+_0x443885[_0x19aac4(0x1cb)]+_0x19aac4(0x1e1)+_0x443885[_0x19aac4(0x1c9)]+_0x19aac4(0x1b8);}async function getPlayersLastEloChangesD3(_0x6c44f0){const _0x321ae2=a33_0x2bace1,_0x1c9cc8=new Map();_0x6c44f0['forEach'](_0x39c3db=>_0x1c9cc8['set'](_0x39c3db,0x0));try{console['log']('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x6c44f0);const _0x3db2bd=new Map(),_0x4259c6=await getDocs(collection(db,'playersD3'));_0x4259c6['forEach'](_0x52ce0e=>{const _0x584b2f=a33_0x1440,_0x337458=_0x52ce0e['data']();_0x337458[_0x584b2f(0x1f8)]&&_0x3db2bd['set'](_0x52ce0e['id'],_0x337458[_0x584b2f(0x1f8)]);}),console['log']('D3:\x20Player\x20ID\x20mappings:',Array[_0x321ae2(0x1df)](_0x3db2bd[_0x321ae2(0x1b1)]()));const _0x2288f3=collection(db,_0x321ae2(0x1b3)),_0x587e1e=query(_0x2288f3,orderBy(_0x321ae2(0x1c5),_0x321ae2(0x1ba)),limit(0x64)),_0x273e09=await getDocs(_0x587e1e);_0x273e09[_0x321ae2(0x1b5)]?console['log'](_0x321ae2(0x1e4)):console['log'](_0x321ae2(0x1ec)+_0x273e09[_0x321ae2(0x1ee)]+_0x321ae2(0x1db));const _0x364a96=new Map();_0x273e09['forEach'](_0x7d6496=>{const _0x47ea99=_0x321ae2,_0x5d1ebc=_0x7d6496['data']();let _0x5d7b85=null;if(_0x5d1ebc['username'])_0x5d7b85=_0x5d1ebc['username'];else{if(_0x5d1ebc[_0x47ea99(0x1d6)])_0x5d7b85=_0x5d1ebc['playerUsername'];else{if(_0x5d1ebc[_0x47ea99(0x1b9)]&&typeof _0x5d1ebc['player']==='string')_0x5d7b85=_0x5d1ebc['player'];else{if(_0x5d1ebc[_0x47ea99(0x1b9)]&&_0x3db2bd['has'](_0x5d1ebc[_0x47ea99(0x1b9)]))_0x5d7b85=_0x3db2bd['get'](_0x5d1ebc['player']);else _0x5d1ebc[_0x47ea99(0x1af)]&&_0x3db2bd['has'](_0x5d1ebc['playerId'])&&(_0x5d7b85=_0x3db2bd['get'](_0x5d1ebc[_0x47ea99(0x1af)]));}}}(_0x5d1ebc[_0x47ea99(0x1f8)]==='pilot'||_0x5d1ebc['playerUsername']==='pilot'||_0x5d1ebc[_0x47ea99(0x1b9)]&&_0x3db2bd['get'](_0x5d1ebc[_0x47ea99(0x1b9)])==='pilot')&&console[_0x47ea99(0x1c3)]('D3:\x20Found\x20pilot\x20entry:',_0x5d1ebc),_0x5d7b85&&_0x6c44f0['includes'](_0x5d7b85)&&(!_0x364a96['has'](_0x5d7b85)&&_0x364a96['set'](_0x5d7b85,[]),_0x364a96['get'](_0x5d7b85)['push']({..._0x5d1ebc,'timestamp':_0x5d1ebc[_0x47ea99(0x1c5)]?.['seconds']||0x0}));}),console['log']('D3:\x20Found\x20entries\x20for\x20'+_0x364a96['size']+'\x20players'),_0x364a96['forEach']((_0x4bc27e,_0x241312)=>{const _0x15545f=_0x321ae2;if(_0x4bc27e['length']>0x0){_0x4bc27e['sort']((_0x13719f,_0x2652d1)=>_0x2652d1['timestamp']-_0x13719f['timestamp']);const _0x400e97=_0x4bc27e[_0x15545f(0x1d0)](_0xb73af1=>_0xb73af1['change']!==undefined||_0xb73af1['newElo']!==undefined&&_0xb73af1['previousElo']!==undefined);if(_0x400e97){let _0x398500;if(_0x400e97['change']!==undefined)_0x398500=_0x400e97['change'];else _0x400e97['newElo']!==undefined&&_0x400e97['previousElo']!==undefined&&(_0x398500=_0x400e97['newElo']-_0x400e97[_0x15545f(0x1de)]);_0x398500!==undefined&&(_0x1c9cc8['set'](_0x241312,_0x398500),console['log']('D3:\x20'+_0x241312+_0x15545f(0x1da)+_0x398500));}}});if(_0x364a96['size']===0x0){console[_0x321ae2(0x1c3)]('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x14cdcd=collection(db,'eloHistory'),_0x2be6a3=query(_0x14cdcd,where(_0x321ae2(0x1e8),'==','D3'),orderBy('timestamp','desc'),limit(0x32));try{const _0x31ddcd=await getDocs(_0x2be6a3);console['log'](_0x321ae2(0x1ec)+_0x31ddcd['size']+'\x20fallback\x20entries'),_0x31ddcd[_0x321ae2(0x1f1)](_0x3599f3=>{const _0x462585=_0x321ae2,_0x23e676=_0x3599f3['data']();let _0x3ec8ec=_0x23e676['username']||_0x23e676['playerUsername'];!_0x3ec8ec&&_0x23e676[_0x462585(0x1b9)]&&_0x3db2bd[_0x462585(0x1e0)](_0x23e676['player'])&&(_0x3ec8ec=_0x3db2bd['get'](_0x23e676[_0x462585(0x1b9)]));if(_0x3ec8ec&&_0x6c44f0['includes'](_0x3ec8ec)){const _0x154c2f=_0x23e676['change']||(_0x23e676['newElo']!==undefined&&_0x23e676['previousElo']!==undefined?_0x23e676['newElo']-_0x23e676['previousElo']:0x0);_0x154c2f!==0x0&&(_0x1c9cc8['set'](_0x3ec8ec,_0x154c2f),console['log']('D3:\x20'+_0x3ec8ec+'\x20fallback\x20ELO\x20change:\x20'+_0x154c2f));}});}catch(_0x4ec25a){console['log']('D3:\x20Fallback\x20query\x20failed:',_0x4ec25a);}}const _0x2b8eab=Array['from'](_0x1c9cc8['entries']())['filter'](([_0x522e1c,_0x62ce04])=>_0x62ce04!==0x0);console['log']('D3:\x20Final\x20ELO\x20changes:',_0x2b8eab);}catch(_0x5268a4){console['error'](_0x321ae2(0x1b6),_0x5268a4);}return _0x1c9cc8;}export{displayLadderD3,updatePlayerPositions};