(function(_0x55f008,_0x3a27a6){const _0x15d79a=a0_0x43a8,_0x25a3f5=_0x55f008();while(!![]){try{const _0x13e874=-parseInt(_0x15d79a(0x1ba))/0x1+-parseInt(_0x15d79a(0x1bc))/0x2+-parseInt(_0x15d79a(0x1a3))/0x3+-parseInt(_0x15d79a(0x1b2))/0x4+-parseInt(_0x15d79a(0x1b0))/0x5+parseInt(_0x15d79a(0x1aa))/0x6*(parseInt(_0x15d79a(0x1b5))/0x7)+-parseInt(_0x15d79a(0x1bb))/0x8*(-parseInt(_0x15d79a(0x1b8))/0x9);if(_0x13e874===_0x3a27a6)break;else _0x25a3f5['push'](_0x25a3f5['shift']());}catch(_0x524bcd){_0x25a3f5['push'](_0x25a3f5['shift']());}}}(a0_0xf585,0xefed1));const a0_0xf33481=(function(){let _0x2faf36=!![];return function(_0x5621ef,_0x487e5a){const _0x4bec43=_0x2faf36?function(){const _0x3bfddd=a0_0x43a8;if(_0x487e5a){const _0x210a41=_0x487e5a[_0x3bfddd(0x1ac)](_0x5621ef,arguments);return _0x487e5a=null,_0x210a41;}}:function(){};return _0x2faf36=![],_0x4bec43;};}()),a0_0x5cca0d=a0_0xf33481(this,function(){const _0x17a95a=a0_0x43a8,_0xb28588=function(){const _0x582a3f=a0_0x43a8;let _0xe8afaa;try{_0xe8afaa=Function(_0x582a3f(0x1a8)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5054cd){_0xe8afaa=window;}return _0xe8afaa;},_0x300323=_0xb28588(),_0x577048=_0x300323['console']=_0x300323['console']||{},_0x20fbb4=['log','warn',_0x17a95a(0x1a7),'error','exception','table','trace'];for(let _0x5c9e5c=0x0;_0x5c9e5c<_0x20fbb4['length'];_0x5c9e5c++){const _0x46ff12=a0_0xf33481['constructor']['prototype']['bind'](a0_0xf33481),_0x122eab=_0x20fbb4[_0x5c9e5c],_0x58ddad=_0x577048[_0x122eab]||_0x46ff12;_0x46ff12['__proto__']=a0_0xf33481[_0x17a95a(0x1b4)](a0_0xf33481),_0x46ff12['toString']=_0x58ddad[_0x17a95a(0x1b7)]['bind'](_0x58ddad),_0x577048[_0x122eab]=_0x46ff12;}});a0_0x5cca0d();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a0_0x43a8(_0x507355,_0x57eb71){const _0x577ff9=a0_0xf585();return a0_0x43a8=function(_0x5cca0d,_0xf33481){_0x5cca0d=_0x5cca0d-0x1a3;let _0x44668c=_0x577ff9[_0x5cca0d];return _0x44668c;},a0_0x43a8(_0x507355,_0x57eb71);}const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];async function getUsernameById(_0x4821c0){const _0x7817de=a0_0x43a8;try{if(!_0x4821c0)return'Unknown\x20Player';const _0x37206e=await getDoc(doc(db,_0x7817de(0x1a4),_0x4821c0));return _0x37206e[_0x7817de(0x1b3)]()?_0x37206e['data']()['username']:_0x7817de(0x1a5);}catch(_0x385afc){return console['error']('Error\x20fetching\x20username:',_0x385afc),'Unknown\x20Player';}}export async function recordEloChange({playerId:_0x267132,previousElo:_0x342b32,newElo:_0x1dfcec,opponentId:_0x5c423b,matchResult:_0x21880b,previousPosition:_0x2e3e44,newPosition:_0x270f69,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x36ec69}){const _0x2310c8=a0_0x43a8;try{const _0x18492b=doc(collection(db,'eloHistory'));let _0x543951=_0x2310c8(0x1a9);if(isPromotion)_0x543951='promotion';if(isDemotion)_0x543951='demotion';let _0x8a7955='Unranked';if(_0x1dfcec>=0x834)_0x8a7955='Emerald';else{if(_0x1dfcec>=0x708)_0x8a7955='Gold';else{if(_0x1dfcec>=0x640)_0x8a7955='Silver';else{if(_0x1dfcec>=0x578)_0x8a7955=_0x2310c8(0x1ae);}}}return await setDoc(_0x18492b,{'type':_0x543951,'player':_0x267132,'opponent':_0x5c423b,'previousElo':_0x342b32,'newElo':_0x1dfcec,'change':_0x1dfcec-_0x342b32,'matchResult':_0x21880b,'previousPosition':_0x2e3e44,'newPosition':_0x270f69,'rankAchieved':_0x8a7955,'timestamp':_0x36ec69}),console['log']('ELO\x20history\x20recorded\x20for\x20'+_0x267132),!![];}catch(_0x46abf2){console[_0x2310c8(0x1b6)]('Error\x20recording\x20ELO\x20history:',_0x46abf2);throw _0x46abf2;}}export async function getEloHistory(){const _0x3b6a68=a0_0x43a8;try{const _0x28913e=collection(db,_0x3b6a68(0x1ab)),_0x33ddbb=query(_0x28913e,orderBy('timestamp',_0x3b6a68(0x1b9))),_0x489729=await getDocs(_0x33ddbb),_0x4e29af=_0x489729['docs']['map'](async _0x47b86d=>{const _0x42cd99=_0x3b6a68,_0x40be2c=_0x47b86d[_0x42cd99(0x1af)](),[_0x4f44df,_0x477325]=await Promise[_0x42cd99(0x1ad)]([getUsernameById(_0x40be2c['player']),getUsernameById(_0x40be2c['opponent'])]);return{..._0x40be2c,'playerUsername':_0x4f44df,'opponentUsername':_0x477325,'change':_0x40be2c['newElo']-_0x40be2c['previousElo'],'timestamp':_0x40be2c[_0x42cd99(0x1b1)]};}),_0x4709fe=await Promise['all'](_0x4e29af);return{'entries':_0x4709fe};}catch(_0x1c4dfe){console['error'](_0x3b6a68(0x1a6),_0x1c4dfe);throw _0x1c4dfe;}}function a0_0xf585(){const _0x337c83=['399dtyrGT','error','toString','18GMuiPE','desc','1033174tRpkhR','24138968BnQFOn','1381764uQnNZm','437766PeMjhG','players','Unknown\x20Player','Error\x20fetching\x20ELO\x20history:','info','return\x20(function()\x20','match','54858baqIiL','eloHistory','apply','all','Bronze','data','8841695pJfICa','timestamp','7739356XmxkKu','exists','bind'];a0_0xf585=function(){return _0x337c83;};return a0_0xf585();}export function resetPagination(){lastVisible=null;}