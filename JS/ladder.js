function a25_0x4fec(_0x4fcc34,_0x110135){const _0x1163fc=a25_0x3b94();return a25_0x4fec=function(_0x4edc3e,_0x157358){_0x4edc3e=_0x4edc3e-0x188;let _0x3b9457=_0x1163fc[_0x4edc3e];return _0x3b9457;},a25_0x4fec(_0x4fcc34,_0x110135);}const a25_0x3806e0=a25_0x4fec,a25_0x4edc3e=(function(){let _0x26b8e8=!![];return function(_0x36a98e,_0x260512){const _0x19cae2=_0x26b8e8?function(){if(_0x260512){const _0x542c62=_0x260512['apply'](_0x36a98e,arguments);return _0x260512=null,_0x542c62;}}:function(){};return _0x26b8e8=![],_0x19cae2;};}()),a25_0x1163fc=a25_0x4edc3e(this,function(){const _0x13d1c2=a25_0x4fec;let _0x30f277;try{const _0x50042b=Function('return\x20(function()\x20'+_0x13d1c2(0x1e8)+');');_0x30f277=_0x50042b();}catch(_0x2daa57){_0x30f277=window;}const _0x47953a=_0x30f277[_0x13d1c2(0x1a3)]=_0x30f277[_0x13d1c2(0x1a3)]||{},_0x3e19ac=['log','warn','info','error','exception','table',_0x13d1c2(0x1e9)];for(let _0x78cb5a=0x0;_0x78cb5a<_0x3e19ac['length'];_0x78cb5a++){const _0x1ee795=a25_0x4edc3e[_0x13d1c2(0x18d)]['prototype']['bind'](a25_0x4edc3e),_0x598a1c=_0x3e19ac[_0x78cb5a],_0x169fce=_0x47953a[_0x598a1c]||_0x1ee795;_0x1ee795['__proto__']=a25_0x4edc3e['bind'](a25_0x4edc3e),_0x1ee795['toString']=_0x169fce['toString']['bind'](_0x169fce),_0x47953a[_0x598a1c]=_0x1ee795;}});a25_0x1163fc();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';function a25_0x3b94(){const _0x158ad5=['inline','disabled','Based\x20on\x20your\x20ELO\x20(','forEach','matchesD','constructor','error','position','duos-ladder-container','country','tokenName','set','style','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','pow','add','map','eloRating','Duos\x20ladder\x20is\x20currently\x20admin-only','push','innerText','MAX_SAFE_INTEGER','innerHTML','\x20ladder','duos','textContent','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','console','duos-switch','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20','className','ðŸª™\x20Loaded\x20fresh\x20tokens\x20for','player','display','creative\x20lead','players','#ladder\x20tbody','winRate','d3-ladder-container','data','getElementById','toLowerCase','createElement','elo','wins','getDate','losses','opacity','#CD7F32','elo-recommendation-text-d1','admin@ladder.com','loserScore','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','find','\x20(equipped:\x20','Gold',';\x22>','empty','newElo','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','active','DOMContentLoaded','email','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','tokenImage','teammate','Emerald','playersD3','cursor','username','addEventListener','currentUser','equipped','d1-ladder-container','No\x20user\x20profile\x20found','classList','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','Error\x20fetching\x20tokens:','none','log','dispatchEvent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','has','click','appendChild','length','includes',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20','Ladder\x20table\x20body\x20not\x20found','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','Recommendation\x20element\x20for\x20','inactive','toFixed','totalMatches','winnerScore','{}.constructor(\x22return\x20this\x22)(\x20)','trace','d2-ladder-container','remove','oldEloRating','points','newEloRating','#C0C0C0','userProfiles','totalDeaths','then','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20','now','#DC143C','playersDuos','elo-recommendation-text-d3','#50C878','querySelector','\x20displaying\x20token:\x20','div','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>','uid','recentActivity','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','block'];a25_0x3b94=function(){return _0x158ad5;};return a25_0x3b94();}import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x44e7fa=0x1){const _0x123e12=a25_0x4fec;try{document['getElementById']('loading-indicator')['style']['display']='block';const _0x6c07fb=await getLadderData(_0x44e7fa);_0x6c07fb['sort']((_0x4e59db,_0x5ee3c7)=>_0x5ee3c7['elo']-_0x4e59db['elo']);const _0x2d9bb3=_0x6c07fb[_0x123e12(0x198)](_0x145e69=>_0x145e69['id']),_0x41d521=await getEloHistoryBatch(_0x2d9bb3,_0x44e7fa),_0xcce061=_0x6c07fb['map']((_0x5e7f03,_0x178f13)=>{const _0x46bd0d=_0x123e12,_0x55a094=_0x41d521[_0x5e7f03['id']]||[],_0x30f72f=_0x55a094['sort']((_0xe26c55,_0x139388)=>new Date(_0x139388['date'])-new Date(_0xe26c55['date']))['slice'](0x0,0x5);return{..._0x5e7f03,'rank':_0x178f13+0x1,'lastMatches':_0x30f72f,'recentActivity':_0x30f72f[_0x46bd0d(0x1dd)]>0x0};});renderLadder(_0xcce061),setupRealTimeUpdates(_0x44e7fa);}catch(_0x3522f7){console['error']('Error\x20loading\x20ladder\x20data:',_0x3522f7),document['getElementById']('error-message')[_0x123e12(0x19c)]='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById']('loading-indicator')['style']['display']=_0x123e12(0x1d6);}}function setupRealTimeUpdates(_0x3a7868=0x1){const _0x4e0a4a=a25_0x4fec;activeListeners[_0x4e0a4a(0x18b)](_0x4446c8=>_0x4446c8()),activeListeners=[];const _0x1d207d=_0x3a7868===0x1?'players':'playersD'+_0x3a7868,_0x3fb76d=_0x3a7868===0x1?'matches':_0x4e0a4a(0x18c)+_0x3a7868,_0x4473cd=new Date();_0x4473cd['setDate'](_0x4473cd[_0x4e0a4a(0x1b5)]()-0x1);const _0x4575d0=setupEfficientListener(_0x3fb76d,[where('date','>=',_0x4473cd['toISOString']()),limit(0xa),orderBy('date','desc')],async _0x4182e4=>{_0x4182e4['length']>0x0&&await loadLadderData(_0x3a7868);});activeListeners['push'](_0x4575d0);}export function cleanupListeners(){activeListeners['forEach'](_0x1cafa8=>_0x1cafa8()),activeListeners=[];}function renderLadder(_0x48820b){const _0x2c4a57=a25_0x4fec,_0x5b0aa3=document[_0x2c4a57(0x1b0)]('ladder-container');_0x5b0aa3['innerHTML']='',_0x48820b[_0x2c4a57(0x18b)](_0x57bca0=>{const _0x8079cd=_0x2c4a57,_0x5d66dd=document['createElement'](_0x8079cd(0x1fb));_0x5d66dd[_0x8079cd(0x1a6)]='ladder-player',_0x5d66dd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x57bca0['rank']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x57bca0[_0x8079cd(0x1cd)]||_0x57bca0['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x57bca0[_0x8079cd(0x1b3)]+_0x8079cd(0x1a5)+(_0x57bca0['recentActivity']?'active':_0x8079cd(0x1e4))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x57bca0[_0x8079cd(0x1fe)]?'Active':'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x5b0aa3[_0x8079cd(0x1dc)](_0x5d66dd);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x24e95c=![]){const _0x458ae0=a25_0x4fec,_0x6d9bc0=document['querySelector'](_0x458ae0(0x1ac));if(!_0x6d9bc0){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x6d9bc0['innerHTML']=_0x458ae0(0x1fc);try{const _0x1cbda1=Date[_0x458ae0(0x1f4)]();if(!_0x24e95c&&playerCache['data']&&_0x1cbda1-playerCache['timestamp']<CACHE_DURATION){console[_0x458ae0(0x1d7)]('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x2ee8aa=collection(db,'players'),_0x2e4359=await getDocs(_0x2ee8aa),_0x22342b=[];_0x2e4359[_0x458ae0(0x18b)](_0x2f7847=>{const _0x494b11=_0x458ae0,_0x408e69=_0x2f7847['data']();_0x22342b['push']({..._0x408e69,'id':_0x2f7847['id'],'elo':_0x408e69[_0x494b11(0x199)]||0x0,'position':_0x408e69['position']||Number[_0x494b11(0x19d)]});});const _0x207234=collection(db,_0x458ae0(0x1f0)),_0x5d526e=await getDocs(_0x207234),_0x3cc2d8=new Map();_0x5d526e[_0x458ae0(0x18b)](_0x144d72=>{const _0x307604=_0x144d72['data']();_0x307604['username']&&_0x3cc2d8['set'](_0x307604['username']['toLowerCase'](),_0x307604);}),_0x22342b[_0x458ae0(0x18b)](_0x5d9098=>{const _0x2ebdab=_0x458ae0,_0x310e79=_0x5d9098[_0x2ebdab(0x1cd)]?.[_0x2ebdab(0x1b1)]();if(_0x310e79&&_0x3cc2d8[_0x2ebdab(0x1da)](_0x310e79)){const _0x588162=_0x3cc2d8['get'](_0x310e79);_0x588162['country']&&(_0x5d9098[_0x2ebdab(0x191)]=_0x588162[_0x2ebdab(0x191)]['toLowerCase']()),_0x5d9098['points']=_0x588162[_0x2ebdab(0x1ed)]||0x0;}else _0x5d9098[_0x2ebdab(0x1ed)]=0x0;});const _0x19f5dc=_0x22342b['map'](_0x5c0eb8=>_0x5c0eb8['username']),_0x5d550b=await fetchBatchMatchStats(_0x19f5dc);_0x22342b['sort']((_0x10867f,_0x3197e4)=>{const _0x514949=_0x458ae0,_0x224584=_0x5d550b['get'](_0x10867f['username'])?.['totalMatches']||0x0,_0x4a8721=_0x5d550b['get'](_0x3197e4[_0x514949(0x1cd)])?.['totalMatches']||0x0;if(_0x224584===0x0!==(_0x4a8721===0x0))return _0x224584===0x0?0x1:-0x1;return(_0x10867f['position']||0x3e7)-(_0x3197e4[_0x514949(0x18f)]||0x3e7);}),_0x22342b['forEach']((_0x117e60,_0x6178c9)=>{_0x117e60['position']=_0x6178c9+0x1;}),playerCache['data']=_0x22342b,playerCache['timestamp']=_0x1cbda1,updateLadderDisplay(_0x22342b,_0x5d550b);}catch(_0xd4abcf){console['error']('Error\x20loading\x20ladder:',_0xd4abcf),_0x6d9bc0['innerHTML']=_0x458ae0(0x1f3)+_0xd4abcf['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x2da273){const _0x427f42=new Map();try{_0x2da273['forEach'](_0x52458d=>{_0x427f42['set'](_0x52458d,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});});const _0x22714d=collection(db,'approvedMatches'),_0x36f6c6=await getDocs(_0x22714d);_0x36f6c6['forEach'](_0x5dfe5a=>{const _0x563a8b=a25_0x4fec,_0x470052=_0x5dfe5a['data'](),_0x54b7b6=_0x470052['winnerUsername'],_0x4159f1=_0x470052['loserUsername'];if(_0x2da273[_0x563a8b(0x1de)](_0x54b7b6)){const _0x466c69=_0x427f42['get'](_0x54b7b6);_0x466c69[_0x563a8b(0x1b4)]++,_0x466c69['totalMatches']++,_0x466c69['totalKills']+=parseInt(_0x470052[_0x563a8b(0x1e7)])||0x0,_0x466c69[_0x563a8b(0x1f1)]+=parseInt(_0x470052['loserScore'])||0x0;}if(_0x2da273[_0x563a8b(0x1de)](_0x4159f1)){const _0x30420b=_0x427f42['get'](_0x4159f1);_0x30420b['losses']++,_0x30420b['totalMatches']++,_0x30420b['totalKills']+=parseInt(_0x470052[_0x563a8b(0x1bb)])||0x0,_0x30420b[_0x563a8b(0x1f1)]+=parseInt(_0x470052[_0x563a8b(0x1e7)])||0x0;}}),_0x2da273['forEach'](_0x48ab94=>{const _0x326bde=a25_0x4fec,_0x4048f7=_0x427f42['get'](_0x48ab94);_0x4048f7['kda']=_0x4048f7[_0x326bde(0x1f1)]>0x0?(_0x4048f7['totalKills']/_0x4048f7['totalDeaths'])[_0x326bde(0x1e5)](0x2):_0x4048f7['totalKills']['toFixed'](0x2),_0x4048f7[_0x326bde(0x1ad)]=_0x4048f7['totalMatches']>0x0?(_0x4048f7[_0x326bde(0x1b4)]/_0x4048f7['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x2ce841){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x2ce841);}return _0x427f42;}function createPlayerRow(_0x1b624a,_0x44ab76){const _0x3fd943=a25_0x4fec,_0x15a39a=parseFloat(_0x1b624a['elo'])||0x0;let _0x350e46='#DC143C';if(_0x44ab76['totalMatches']===0x0)_0x350e46='#DC143C';else{if(_0x44ab76['winRate']>=0x50&&_0x44ab76['totalMatches']>=0x14)_0x350e46='#50C878';else{if(_0x15a39a>=0x2bc)_0x350e46='#FFD700';else{if(_0x15a39a>=0x1f4)_0x350e46='#C0C0C0';else _0x15a39a>=0xc8&&(_0x350e46='#CD7F32');}}}let _0x405a49='';return _0x1b624a[_0x3fd943(0x191)]&&(_0x405a49='<img\x20src=\x22../images/flags/'+_0x1b624a['country']['toLowerCase']()+_0x3fd943(0x1d4)+_0x1b624a['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b624a['position']+_0x3fd943(0x1c3)+encodeURIComponent(_0x1b624a['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x350e46+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1b624a['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x405a49+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x350e46+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x15a39a+_0x3fd943(0x1bc)+_0x44ab76['totalMatches']+_0x3fd943(0x1a2)+_0x44ab76[_0x3fd943(0x1b4)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x44ab76[_0x3fd943(0x1b6)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x44ab76['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x44ab76[_0x3fd943(0x1ad)]+_0x3fd943(0x1e2)+_0x44ab76['points']+'</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x477b3a,_0x562b56=0x0,_0x43dc61=0x0){const _0x374b8d=a25_0x4fec;if(_0x562b56===0x0)return'Unranked';if(_0x477b3a>=0x3e8&&_0x43dc61>=0x50&&_0x562b56>=0x14)return _0x374b8d(0x1ca);if(_0x477b3a>=0x2bc)return _0x374b8d(0x1bf);if(_0x477b3a>=0x1f4)return'Silver';if(_0x477b3a>=0xc8)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x43eafb){const _0x342949=a25_0x4fec,_0x39af6c=new Map();_0x43eafb['forEach'](_0x55b70a=>{_0x39af6c['set'](_0x55b70a,0x0);});try{const _0xf6de3d=collection(db,'players'),_0x2ca70a=await getDocs(_0xf6de3d),_0x52bec8=new Map(),_0x44e039=new Map();_0x2ca70a[_0x342949(0x18b)](_0x203bd7=>{const _0x480d1a=_0x342949,_0x554b92=_0x203bd7[_0x480d1a(0x1af)]();_0x554b92['username']&&(_0x52bec8['set'](_0x203bd7['id'],_0x554b92[_0x480d1a(0x1cd)]),_0x44e039['set'](_0x554b92['username']['toLowerCase'](),_0x203bd7['id']));});const _0x47efb1=collection(db,'eloHistory'),_0x56a92a=query(_0x47efb1,orderBy('timestamp','desc'),limit(0x12c)),_0x49163c=await getDocs(_0x56a92a);if(_0x49163c[_0x342949(0x1c1)])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x39af6c;if(_0x49163c['docs']['length']>0x0){const _0x7a95ee=_0x49163c['docs'][0x0]['data']();if(_0x7a95ee['player']&&_0x52bec8[_0x342949(0x1da)](_0x7a95ee['player'])){}}const _0x44a1f5=new Map();let _0x33e878=0x0;_0x49163c['forEach'](_0x258b1a=>{const _0x5d6989=_0x342949,_0x2e2034=_0x258b1a[_0x5d6989(0x1af)]();let _0x59aedf=null;if(_0x2e2034[_0x5d6989(0x1a8)]&&_0x52bec8['has'](_0x2e2034['player']))_0x59aedf=_0x52bec8['get'](_0x2e2034['player']);else{if(_0x2e2034['username']&&_0x44e039[_0x5d6989(0x1da)](_0x2e2034[_0x5d6989(0x1cd)]['toLowerCase']()))_0x59aedf=_0x2e2034[_0x5d6989(0x1cd)];else _0x2e2034['playerUsername']&&_0x44e039[_0x5d6989(0x1da)](_0x2e2034['playerUsername'][_0x5d6989(0x1b1)]())&&(_0x59aedf=_0x2e2034['playerUsername']);}_0x59aedf&&_0x43eafb['includes'](_0x59aedf)&&(_0x33e878++,!_0x44a1f5['has'](_0x59aedf)&&_0x44a1f5[_0x5d6989(0x193)](_0x59aedf,[]),_0x44a1f5['get'](_0x59aedf)[_0x5d6989(0x19b)]({..._0x2e2034,'timestamp':_0x2e2034['timestamp']?.['seconds']||0x0}));}),_0x44a1f5[_0x342949(0x18b)]((_0x159255,_0x2260c7)=>{const _0x21a7bf=_0x342949;if(_0x159255[_0x21a7bf(0x1dd)]>0x0){_0x159255['sort']((_0x36ee1c,_0x466292)=>_0x466292['timestamp']-_0x36ee1c['timestamp']);const _0x20089d=_0x159255['find'](_0x3084c2=>_0x3084c2['change']!==undefined||_0x3084c2[_0x21a7bf(0x1c2)]!==undefined&&_0x3084c2['previousElo']!==undefined||_0x3084c2['newEloRating']!==undefined&&_0x3084c2[_0x21a7bf(0x1ec)]!==undefined);if(_0x20089d){let _0x5e6a5f;if(_0x20089d['change']!==undefined)_0x5e6a5f=parseInt(_0x20089d['change']);else{if(_0x20089d['newElo']!==undefined&&entry['previousElo']!==undefined)_0x5e6a5f=parseInt(_0x20089d['newElo'])-parseInt(_0x20089d['previousElo']);else _0x20089d['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x5e6a5f=parseInt(_0x20089d[_0x21a7bf(0x1ee)])-parseInt(_0x20089d['oldEloRating']));}!isNaN(_0x5e6a5f)&&_0x5e6a5f!==0x0&&_0x39af6c['set'](_0x2260c7,_0x5e6a5f);}}});}catch(_0x8062c1){console['error']('Error\x20fetching\x20ELO\x20history:',_0x8062c1);}return _0x39af6c;}function createPlayerRowWithToken(_0x4ad8b4,_0x1b124e,_0x20ad38){const _0x32ec1d=a25_0x4fec,_0x3b1624=parseFloat(_0x4ad8b4['elo'])||0x0;let _0x5e41cb='#DC143C';if(_0x1b124e[_0x32ec1d(0x1e6)]===0x0)_0x5e41cb=_0x32ec1d(0x1f5);else{if(_0x1b124e['winRate']>=0x50&&_0x1b124e[_0x32ec1d(0x1e6)]>=0x14)_0x5e41cb=_0x32ec1d(0x1f8);else{if(_0x3b1624>=0x2bc)_0x5e41cb='#FFD700';else{if(_0x3b1624>=0x1f4)_0x5e41cb=_0x32ec1d(0x1ef);else _0x3b1624>=0xc8&&(_0x5e41cb='#CD7F32');}}}let _0x2095ea='';_0x4ad8b4['country']&&(_0x2095ea='<img\x20src=\x22../images/flags/'+_0x4ad8b4['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4ad8b4[_0x32ec1d(0x191)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x5edca2='';return _0x20ad38&&(_0x5edca2='<img\x20src=\x22'+_0x20ad38[_0x32ec1d(0x1c8)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x20ad38['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x20ad38[_0x32ec1d(0x192)]+'\x20'+(_0x20ad38['equipped']?'(Equipped)':'')+_0x32ec1d(0x1ff)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4ad8b4['position']+_0x32ec1d(0x1c3)+encodeURIComponent(_0x4ad8b4['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x5e41cb+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4ad8b4['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2095ea+_0x32ec1d(0x195)+_0x5edca2+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x5e41cb+_0x32ec1d(0x1df)+_0x3b1624+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b124e['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b124e[_0x32ec1d(0x1b4)]+_0x32ec1d(0x1a2)+_0x1b124e['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b124e['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b124e['winRate']+_0x32ec1d(0x1c7)+(_0x4ad8b4['points']||0x0)+'</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x4a3dec,_0x58d47e=null){const _0x833fc3=a25_0x4fec,_0x4343ed=document['querySelector'](_0x833fc3(0x1ac));if(!_0x4343ed){console['error'](_0x833fc3(0x1e1));return;}const _0xe454b3=document['querySelector']('#ladder\x20thead\x20tr');_0xe454b3&&(_0xe454b3[_0x833fc3(0x19e)]=_0x833fc3(0x1d9));const _0x15ff95=_0x4a3dec['map'](_0x4c4314=>_0x4c4314['username']);!_0x58d47e&&(_0x58d47e=await fetchBatchMatchStats(_0x15ff95));let _0x2be1aa=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x2be1aa=await getTokensByUsernames(_0x15ff95),console[_0x833fc3(0x1d7)](_0x833fc3(0x1a7),_0x2be1aa['size'],'players'),_0x2be1aa['forEach']((_0x59ea83,_0x1a703f)=>{const _0x4109ba=_0x833fc3,_0x3387a6=_0x59ea83[_0x4109ba(0x1bd)](_0x3b0803=>_0x3b0803[_0x4109ba(0x1d0)]);_0x3387a6&&console['log']('ðŸŽ¯\x20'+_0x1a703f+'\x20has\x20equipped:\x20'+_0x3387a6[_0x4109ba(0x192)]);});}catch(_0x2ad282){console[_0x833fc3(0x18e)](_0x833fc3(0x1d5),_0x2ad282);}const _0x284ef6=_0x4a3dec['map'](_0x371229=>{const _0xb60af8=_0x833fc3,_0x105a4c=_0x58d47e['get'](_0x371229['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x2a6325=_0x2be1aa['get'](_0x371229[_0xb60af8(0x1cd)])||[],_0x30c87c=getPrimaryDisplayToken(_0x2a6325);return _0x30c87c&&console[_0xb60af8(0x1d7)]('ðŸŽ¨\x20'+_0x371229['username']+_0xb60af8(0x1fa)+_0x30c87c['tokenName']+_0xb60af8(0x1be)+_0x30c87c['equipped']+')'),createPlayerRowWithToken(_0x371229,_0x105a4c,_0x30c87c);})['join']('');_0x4343ed['innerHTML']=_0x284ef6,getPlayersLastEloChanges(_0x15ff95)[_0x833fc3(0x1f2)](_0x1dec18=>{const _0x37c74d=new Map();_0x4343ed['querySelectorAll']('tr')['forEach']((_0xc8b21c,_0x1a283f)=>{const _0x5c0172=a25_0x4fec;_0x1a283f<_0x15ff95['length']&&_0x37c74d[_0x5c0172(0x193)](_0x15ff95[_0x1a283f],_0xc8b21c);}),_0x1dec18['forEach']((_0x418262,_0x31c37b)=>{const _0x5af8ff=a25_0x4fec,_0x3dc0f4=_0x37c74d['get'](_0x31c37b);if(_0x3dc0f4&&_0x418262!==0x0){const _0x311152=_0x3dc0f4[_0x5af8ff(0x1f9)]('td:nth-child(3)');if(_0x311152){const _0x19de13=_0x418262>0x0?'+'+_0x418262:''+_0x418262,_0x2c44b9=_0x311152['querySelector']('.trend-indicator');_0x2c44b9&&(_0x2c44b9['textContent']=_0x19de13,_0x2c44b9['style']['color']=_0x418262>0x0?'#4CAF50':'#F44336',_0x2c44b9[_0x5af8ff(0x194)]['fontWeight']='bold',_0x2c44b9['style']['fontSize']='0.85em',_0x2c44b9['style']['display']=_0x5af8ff(0x188),_0x2c44b9[_0x5af8ff(0x194)]['visibility']='visible',_0x2c44b9['style'][_0x5af8ff(0x1b7)]='1');}}});})['catch'](_0x169388=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x169388));}function initLadderToggles(){const _0x307778=a25_0x4fec,_0x11a879=document[_0x307778(0x1b0)]('d1-switch'),_0x1d9cc0=document[_0x307778(0x1b0)]('d2-switch'),_0x597dde=document['getElementById']('d3-switch'),_0x4c8e5d=document['getElementById'](_0x307778(0x1a4)),_0x264613=document['getElementById'](_0x307778(0x1d1)),_0xd0f92a=document[_0x307778(0x1b0)]('d2-ladder-container'),_0x4b0a57=document['getElementById'](_0x307778(0x1ae)),_0x112a73=document[_0x307778(0x1b0)](_0x307778(0x190));function _0x14be06(){const _0x1cf88b=_0x307778;if(_0x264613)_0x264613['classList']['remove'](_0x1cf88b(0x1c4));if(_0xd0f92a)_0xd0f92a['classList']['remove']('active');if(_0x4b0a57)_0x4b0a57['classList']['remove']('active');if(_0x112a73)_0x112a73['style'][_0x1cf88b(0x1a9)]='none';if(_0x264613)_0x264613[_0x1cf88b(0x194)]['display']='none';if(_0xd0f92a)_0xd0f92a['style'][_0x1cf88b(0x1a9)]='none';if(_0x4b0a57)_0x4b0a57['style']['display']='none';}_0x11a879&&_0x11a879['addEventListener'](_0x307778(0x1db),()=>{const _0x3e0b40=_0x307778;console['log']('D1\x20toggle\x20clicked'),_0x14be06();_0x264613&&(_0x264613['classList']['add']('active'),_0x264613['style']['display']='block');document[_0x3e0b40(0x1b0)]('elo-recommendation-text-d1')['style'][_0x3e0b40(0x1a9)]='block',document[_0x3e0b40(0x1b0)]('elo-recommendation-text-d2')['style'][_0x3e0b40(0x1a9)]='none',document[_0x3e0b40(0x1b0)]('elo-recommendation-text-d3')[_0x3e0b40(0x194)][_0x3e0b40(0x1a9)]=_0x3e0b40(0x1d6);if(_0x11a879)_0x11a879['classList'][_0x3e0b40(0x197)]('active');if(_0x1d9cc0)_0x1d9cc0[_0x3e0b40(0x1d3)][_0x3e0b40(0x1eb)]('active');if(_0x597dde)_0x597dde[_0x3e0b40(0x1d3)][_0x3e0b40(0x1eb)]('active');displayLadder(),findBestOpponent('d1');}),_0x1d9cc0&&_0x1d9cc0['addEventListener'](_0x307778(0x1db),()=>{const _0x41480a=_0x307778;console['log']('D2\x20toggle\x20clicked'),_0x14be06();_0xd0f92a&&(_0xd0f92a['classList'][_0x41480a(0x197)](_0x41480a(0x1c4)),_0xd0f92a['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')[_0x41480a(0x194)][_0x41480a(0x1a9)]='none',document[_0x41480a(0x1b0)]('elo-recommendation-text-d2')[_0x41480a(0x194)]['display']='block',document[_0x41480a(0x1b0)](_0x41480a(0x1f7))['style'][_0x41480a(0x1a9)]='none';if(_0x1d9cc0)_0x1d9cc0['classList']['add']('active');if(_0x11a879)_0x11a879['classList']['remove']('active');if(_0x597dde)_0x597dde['classList']['remove'](_0x41480a(0x1c4));displayLadderD2(),findBestOpponent('d2');}),_0x597dde&&_0x597dde[_0x307778(0x1ce)]('click',()=>{const _0x5215ad=_0x307778;console[_0x5215ad(0x1d7)]('D3\x20toggle\x20clicked'),_0x14be06();_0x4b0a57&&(_0x4b0a57[_0x5215ad(0x1d3)][_0x5215ad(0x197)]('active'),_0x4b0a57['style']['display']=_0x5215ad(0x200));document[_0x5215ad(0x1b0)](_0x5215ad(0x1b9))['style']['display']='none',document[_0x5215ad(0x1b0)]('elo-recommendation-text-d2')[_0x5215ad(0x194)]['display']='none',document['getElementById'](_0x5215ad(0x1f7))['style'][_0x5215ad(0x1a9)]=_0x5215ad(0x200);if(_0x597dde)_0x597dde['classList']['add']('active');if(_0x11a879)_0x11a879['classList']['remove']('active');if(_0x1d9cc0)_0x1d9cc0[_0x5215ad(0x1d3)]['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x4c8e5d&&_0x4c8e5d['addEventListener']('click',()=>{const _0x437ab3=_0x307778;_0x14be06();if(_0x112a73)_0x112a73[_0x437ab3(0x194)]['display']='block';displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']='none',document[_0x437ab3(0x1b0)]('elo-recommendation-text-d3')['style']['display']=_0x437ab3(0x1d6);});}document['addEventListener']('DOMContentLoaded',()=>{const _0x21495c=a25_0x4fec;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document[_0x21495c(0x1b0)]('elo-recommendation-text-d1')[_0x21495c(0x194)]['display']='block';});export{displayLadder};async function findBestOpponent(_0x4ae13e='d1'){const _0x5560fd=a25_0x4fec,_0x4de59a='elo-recommendation-text-'+_0x4ae13e,_0x31ccdc=document['getElementById'](_0x4de59a);if(!_0x31ccdc){console['error'](_0x5560fd(0x1e3)+_0x4ae13e+'\x20not\x20found');return;}const _0x2a396b=auth[_0x5560fd(0x1cf)];if(!_0x2a396b){_0x31ccdc['textContent']='';return;}try{const _0x373e91=doc(db,'userProfiles',_0x2a396b['uid']),_0x2f6b8a=await getDoc(_0x373e91);if(!_0x2f6b8a['exists']()){console['log'](_0x5560fd(0x1d2)),_0x31ccdc[_0x5560fd(0x1a1)]='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x171d01=_0x2f6b8a['data'](),_0x4f4755=_0x171d01['username'];if(!_0x4f4755){_0x31ccdc[_0x5560fd(0x1a1)]='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x5bf433;switch(_0x4ae13e){case'd1':_0x5bf433='players';break;case'd2':_0x5bf433='playersD2';break;case'd3':_0x5bf433=_0x5560fd(0x1cb);break;case'duos':_0x5bf433=_0x5560fd(0x1f6);break;default:_0x5bf433=_0x5560fd(0x1ab);}if(_0x4ae13e===_0x5560fd(0x1a0)){const _0x478d19=collection(db,_0x5bf433),_0x3dea77=query(_0x478d19,where(_0x5560fd(0x1cd),'==',_0x4f4755)),_0x451529=await getDocs(_0x3dea77);if(_0x451529[_0x5560fd(0x1c1)]){_0x31ccdc['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x455dc5=_0x451529['docs'][0x0]['data'](),_0x14353c=parseInt(_0x455dc5['eloRating'])||0x4b0;if(_0x455dc5['hasTeam']&&_0x455dc5['teammate']){_0x31ccdc[_0x5560fd(0x19e)]='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x455dc5[_0x5560fd(0x1c9)]+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x2eb204=await getDocs(_0x478d19);let _0x4696fc=null,_0x4a5c4a=-0x1;_0x2eb204[_0x5560fd(0x18b)](_0xc41e75=>{const _0x3c0017=_0x5560fd,_0x13f7aa=_0xc41e75[_0x3c0017(0x1af)]();if(_0x13f7aa['username']===_0x4f4755)return;if(_0x13f7aa['hasTeam'])return;const _0x26fa1d=parseInt(_0x13f7aa['eloRating'])||0x4b0,_0x1fa06b=Math['abs'](_0x26fa1d-_0x14353c),_0x98007f=Math['max'](0x0,0xc8-_0x1fa06b);_0x98007f>_0x4a5c4a&&(_0x4696fc=_0x13f7aa,_0x4a5c4a=_0x98007f);});if(_0x4696fc){const _0x2466ec=parseInt(_0x4696fc[_0x5560fd(0x199)])||0x4b0;let _0xd7f807='gray';if(_0x2466ec>=0x7d0)_0xd7f807=_0x5560fd(0x1f8);else{if(_0x2466ec>=0x708)_0xd7f807='#FFD700';else{if(_0x2466ec>=0x640)_0xd7f807='#C0C0C0';else _0x2466ec>=0x578&&(_0xd7f807='#CD7F32');}}_0x31ccdc['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0xd7f807+';\x22>'+_0x4696fc['username']+'</span>\x20(ELO:\x20'+_0x2466ec+')';}else _0x31ccdc['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x1b3bf7=collection(db,_0x5bf433),_0x41fdf2=query(_0x1b3bf7,where('username','==',_0x4f4755)),_0x58916b=await getDocs(_0x41fdf2);if(_0x58916b['empty']){_0x31ccdc['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x4ae13e['toUpperCase']()+_0x5560fd(0x19f);return;}const _0x5e8d0b=_0x58916b['docs'][0x0]['data'](),_0x52478b=parseInt(_0x5e8d0b['eloRating'])||0x5dc,_0x51861b=await getDocs(_0x1b3bf7);let _0x205629=null,_0x4eca8a=-0x1;const _0x548eb7=getPlayerRankName(_0x52478b);_0x51861b['forEach'](_0x4c159a=>{const _0x203eb3=_0x5560fd,_0x37d10a=_0x4c159a['data']();if(_0x37d10a['username']===_0x4f4755)return;const _0x104721=parseInt(_0x37d10a['eloRating'])||0x5dc,_0x329b0a=getPlayerRankName(_0x104721),_0x2cd46a=Math['abs'](_0x104721-_0x52478b),_0x51209f=0x20,_0x51908e=0x1/(0x1+Math[_0x203eb3(0x196)](0xa,(_0x104721-_0x52478b)/0x190)),_0x2dde61=Math['round'](_0x51209f*(0x1-_0x51908e));if(_0x2dde61<=0x0)return;let _0x1ac683=0x0;const _0xe19520=Math['max'](0x0,0x64-_0x2cd46a*0.5),_0x451dfe=_0x2dde61>=0x3&&_0x2dde61<=0x8?0x32:_0x2dde61>0x0&&_0x2dde61<0xf?0x1e:0xa,_0x2855a2=_0x548eb7===_0x329b0a?0x28:0x0;_0x1ac683=_0xe19520+_0x451dfe+_0x2855a2,_0x1ac683>_0x4eca8a&&(_0x205629=_0x37d10a,_0x4eca8a=_0x1ac683);});if(_0x205629){const _0x191c72=parseInt(_0x205629['eloRating'])||0x5dc;let _0x30a255='gray';if(_0x191c72>=0x7d0)_0x30a255=_0x5560fd(0x1f8);else{if(_0x191c72>=0x708)_0x30a255='#FFD700';else{if(_0x191c72>=0x640)_0x30a255='#b9f1fc';else _0x191c72>=0x578&&(_0x30a255=_0x5560fd(0x1b8));}}_0x31ccdc['innerHTML']=_0x5560fd(0x18a)+_0x52478b+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x30a255+_0x5560fd(0x1c0)+_0x205629[_0x5560fd(0x1cd)]+'</span>';}else _0x31ccdc['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x52478b+')';}catch(_0x2fd9ef){console[_0x5560fd(0x18e)]('Error\x20finding\x20best\x20opponent:',_0x2fd9ef),_0x31ccdc['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x2bf472=>{const _0x9c9eb8=a25_0x4fec,_0x87af65=document[_0x9c9eb8(0x1b0)]('d1-ladder-container')&&document['getElementById'](_0x9c9eb8(0x1d1))[_0x9c9eb8(0x194)]['display']!=='none',_0x3453b9=document['getElementById']('d2-ladder-container')&&document['getElementById'](_0x9c9eb8(0x1ea))[_0x9c9eb8(0x194)][_0x9c9eb8(0x1a9)]!=='none',_0x7ed4c2=document['getElementById']('d3-ladder-container')&&document['getElementById']('d3-ladder-container')['style']['display']!=='none',_0x227a8d=document[_0x9c9eb8(0x1b0)](_0x9c9eb8(0x190))&&document['getElementById']('duos-ladder-container')[_0x9c9eb8(0x194)]['display']!=='none',_0x4e5223=_0x87af65?'d1':_0x3453b9?'d2':_0x7ed4c2?'d3':_0x227a8d?'duos':'d1';findBestOpponent(_0x4e5223);}),document['addEventListener'](a25_0x3806e0(0x1c5),()=>{const _0xa73bed=a25_0x3806e0,_0x248d61=document['getElementById'](_0xa73bed(0x1a4)),_0x322bf7=document['querySelector']('label[for=\x22duos-switch\x22]');_0x248d61&&_0x322bf7&&(_0x248d61[_0xa73bed(0x1ce)]('change',async _0x526d22=>{const _0x3414de=_0xa73bed;if(_0x526d22['target']['checked']){const _0x59ef64=auth?.['currentUser'],_0x383bb7=await checkIfUserIsAdmin(_0x59ef64);if(!_0x383bb7){_0x526d22['preventDefault']();const _0x4028fe=document[_0x3414de(0x1b0)]('d1-switch');return _0x4028fe&&(_0x4028fe['checked']=!![],_0x4028fe[_0x3414de(0x1d8)](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x41a252=>{const _0xa7c65e=_0xa73bed,_0x2c70b5=await checkIfUserIsAdmin(_0x41a252);!_0x2c70b5?(_0x248d61['disabled']=!![],_0x322bf7['style'][_0xa7c65e(0x1b7)]='0.5',_0x322bf7['style']['cursor']='not-allowed',_0x322bf7['title']=_0xa7c65e(0x19a)):(_0x248d61[_0xa7c65e(0x189)]=![],_0x322bf7['style']['opacity']='1',_0x322bf7['style'][_0xa7c65e(0x1cc)]='pointer',_0x322bf7['title']='');}));});async function checkIfUserIsAdmin(_0x3a591a){const _0x4ce172=a25_0x3806e0;if(!_0x3a591a)return![];try{const _0x5e18fe=[_0x4ce172(0x1ba),'brian2af@outlook.com'];if(_0x3a591a[_0x4ce172(0x1c6)]&&_0x5e18fe[_0x4ce172(0x1de)](_0x3a591a['email']['toLowerCase']()))return!![];const _0x56251e=[_0x4ce172(0x1f0),'players','playersD2','playersD3'],_0x5b68f7=['admin','owner','council',_0x4ce172(0x1aa)];for(const _0x2fb4cb of _0x56251e){try{const _0x48fa5e=doc(db,_0x2fb4cb,_0x3a591a[_0x4ce172(0x1fd)]),_0x221d99=await getDoc(_0x48fa5e);if(_0x221d99['exists']()){const _0x288fb1=_0x221d99['data'](),_0x34bf77=(_0x288fb1['roleName']||_0x288fb1['role']||'')['toLowerCase']();if(_0x34bf77&&_0x5b68f7['includes'](_0x34bf77))return!![];}}catch(_0x443992){console['warn']('Error\x20checking\x20'+_0x2fb4cb+':',_0x443992);}}return![];}catch(_0x2b19bd){return console[_0x4ce172(0x18e)]('Error\x20checking\x20admin\x20status:',_0x2b19bd),![];}}function showAdminOnlyMessage(){const _0x4bcb61=a25_0x3806e0,_0x146888=document['getElementById']('admin-only-message');_0x146888&&_0x146888['remove']();const _0x5e257c=document[_0x4bcb61(0x1b2)](_0x4bcb61(0x1fb));_0x5e257c['id']='admin-only-message',_0x5e257c['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x5e257c[_0x4bcb61(0x19e)]=_0x4bcb61(0x1e0),document['body'][_0x4bcb61(0x1dc)](_0x5e257c),setTimeout(()=>{_0x5e257c['parentNode']&&_0x5e257c['remove']();},0xbb8);}