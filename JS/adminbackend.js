const a4_0x1fd11d=a4_0x343e,a4_0x29be46=(function(){let _0x36b89c=!![];return function(_0x812eac,_0x2abacd){const _0x20f70b=_0x36b89c?function(){if(_0x2abacd){const _0x331edc=_0x2abacd['apply'](_0x812eac,arguments);return _0x2abacd=null,_0x331edc;}}:function(){};return _0x36b89c=![],_0x20f70b;};}()),a4_0x2ac0b6=a4_0x29be46(this,function(){const _0x17ae39=a4_0x343e;let _0x549807;try{const _0x351182=Function(_0x17ae39(0x210)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x549807=_0x351182();}catch(_0x542cbf){_0x549807=window;}const _0x4994bb=_0x549807['console']=_0x549807['console']||{},_0x8a264f=['log','warn','info','error','exception','table','trace'];for(let _0x12c5c6=0x0;_0x12c5c6<_0x8a264f[_0x17ae39(0x116)];_0x12c5c6++){const _0x140f8c=a4_0x29be46['constructor'][_0x17ae39(0x11a)][_0x17ae39(0x169)](a4_0x29be46),_0x31c708=_0x8a264f[_0x12c5c6],_0x3c84d9=_0x4994bb[_0x31c708]||_0x140f8c;_0x140f8c[_0x17ae39(0x317)]=a4_0x29be46['bind'](a4_0x29be46),_0x140f8c['toString']=_0x3c84d9['toString']['bind'](_0x3c84d9),_0x4994bb[_0x31c708]=_0x140f8c;}});a4_0x2ac0b6();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x4d98d9){const _0x158558=a4_0x343e;if(!_0x4d98d9)return'#ffffff';_0x4d98d9=_0x4d98d9['replace']('#','');_0x4d98d9['length']===0x3&&(_0x4d98d9=_0x4d98d9['split']('')[_0x158558(0x1f8)](_0x411483=>_0x411483+_0x411483)['join'](''));if(_0x4d98d9['length']!==0x6)return'#ffffff';const _0x34a0d8=parseInt(_0x4d98d9['substring'](0x0,0x2),0x10),_0x2d206e=parseInt(_0x4d98d9['substring'](0x2,0x4),0x10),_0x1fdfdf=parseInt(_0x4d98d9[_0x158558(0x231)](0x4,0x6),0x10),_0x1087a8=(_0x34a0d8*0x12b+_0x2d206e*0x24b+_0x1fdfdf*0x72)/0x3e8;return _0x1087a8>=0x80?_0x158558(0x2aa):'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener'](a4_0x1fd11d(0x2e6),()=>{auth['onAuthStateChanged'](async _0x523562=>{const _0x48f118=a4_0x343e;if(!_0x523562){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x148ea5){console['error']('Error\x20initializing\x20dashboard:',_0x148ea5),showNotification(_0x48f118(0x295),'error');}});});async function getUserTabPermissions(_0x4efae4){const _0x133dc5=a4_0x1fd11d;if(!_0x4efae4)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x4efae4+'\x20in\x20all\x20collections...');const _0x192e52=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':_0x133dc5(0x258)},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':_0x133dc5(0x1e6),'displayName':_0x133dc5(0x30a)}],_0x3a2c8e=auth['currentUser'];let _0x5a5905=null,_0x2daafe=null;for(const _0x214056 of _0x192e52){try{if(_0x3a2c8e){const _0x46e52a=doc(db,_0x214056[_0x133dc5(0x185)],_0x3a2c8e[_0x133dc5(0x119)]),_0xeccfc4=await getDoc(_0x46e52a);if(_0xeccfc4[_0x133dc5(0x24a)]()){const _0x456e63=_0xeccfc4['data']();console['log']('Found\x20user\x20in\x20'+_0x214056['displayName']+'\x20by\x20UID:',_0x456e63);const _0x326079=(_0x456e63[_0x133dc5(0x27f)]||_0x456e63['role']||'')['toLowerCase']();if(_0x326079&&_0x326079!=='none'){_0x5a5905=_0x326079,_0x2daafe=_0x214056['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x5a5905+'\x20in\x20'+_0x2daafe);break;}}}if(!_0x5a5905){const _0x1fa0ab=collection(db,_0x214056['name']),_0x4c9aa8=query(_0x1fa0ab,where(_0x133dc5(0xe8),'==',_0x4efae4)),_0x4d3868=await getDocs(_0x4c9aa8);if(!_0x4d3868[_0x133dc5(0x2f6)]){const _0x18fe14=_0x4d3868['docs'][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0x214056['displayName']+_0x133dc5(0x148)+_0x4efae4+':',_0x18fe14);const _0x524a57=(_0x18fe14['roleName']||_0x18fe14['role']||'')[_0x133dc5(0x2b6)]();if(_0x524a57&&_0x524a57!=='none'){_0x5a5905=_0x524a57,_0x2daafe=_0x214056[_0x133dc5(0x224)],console[_0x133dc5(0xca)](_0x133dc5(0x1fe)+_0x5a5905+'\x20in\x20'+_0x2daafe);break;}}}}catch(_0xab565){console['error'](_0x133dc5(0x114)+_0x214056['displayName']+':',_0xab565);}}if(_0x5a5905){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x5a5905+'\x20(from\x20'+_0x2daafe+')');const _0x168758={'admin':['dashboard','manage-players','manage-matches','manage-articles',_0x133dc5(0x27c),'manage-ranks','inactive-players','settings','manage-trophies','elo-history',_0x133dc5(0x236),'user-roles-section',_0x133dc5(0x2c9),_0x133dc5(0x24c),'manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players','manage-matches','manage-articles',_0x133dc5(0x27c),_0x133dc5(0xde),'inactive-players','settings','manage-trophies','elo-history','manage-highlights','user-roles-section',_0x133dc5(0x2c9),'manage-points','manage-levels-ribbons','manage-ribbons'],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':[_0x133dc5(0x139),'manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x168758[_0x5a5905])return console['log']('Role\x20\x27'+_0x5a5905+'\x27\x20has\x20permissions:',_0x168758[_0x5a5905]),_0x168758[_0x5a5905];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x4efae4+',\x20giving\x20default\x20access'),['dashboard'];}function a4_0x343e(_0x33f26d,_0x3e43e4){const _0x2ac0b6=a4_0x3a9c();return a4_0x343e=function(_0x29be46,_0x2c8b7a){_0x29be46=_0x29be46-0xc3;let _0x3a9c0f=_0x2ac0b6[_0x29be46];return _0x3a9c0f;},a4_0x343e(_0x33f26d,_0x3e43e4);}function setupSidebarNavigation(_0x1a36af=[]){const _0x2a5b04=a4_0x1fd11d,_0x4f51f5=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x4b287c=document['querySelectorAll'](_0x2a5b04(0x2b4));(!_0x1a36af||_0x1a36af['length']===0x0)&&(_0x1a36af=[_0x2a5b04(0x139)]);_0x4f51f5['forEach'](_0x408b45=>{const _0xe50417=_0x2a5b04,_0x46de69=_0x408b45['getAttribute'](_0xe50417(0x270));_0x1a36af['includes'](_0x46de69)?_0x408b45['style']['display']=_0xe50417(0x1c9):_0x408b45['style']['display']='none',_0x408b45['addEventListener'](_0xe50417(0x1ed),()=>{const _0x174f49=_0xe50417,_0x3c1147=_0x408b45['getAttribute']('data-section');if(!_0x1a36af['includes'](_0x3c1147)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section',_0x174f49(0x100));return;}_0x4f51f5[_0x174f49(0x31d)](_0x46316c=>_0x46316c['classList'][_0x174f49(0x11f)]('active')),_0x408b45['classList']['add']('active'),_0x4b287c['forEach'](_0x2a102e=>{_0x2a102e['style']['display']='none';});const _0x3c24c6=document[_0x174f49(0x1e2)](_0x3c1147);_0x3c24c6&&(_0x3c24c6[_0x174f49(0x29d)]['display']='block',console[_0x174f49(0xca)](_0x174f49(0x1bb)+_0x3c1147+'\x20section'));});});const _0x49f299=document['querySelector'](_0x2a5b04(0x26d)+_0x1a36af[0x0]+'\x22]');_0x49f299&&_0x49f299[_0x2a5b04(0x1ed)](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x2085d7=document['querySelectorAll']('.nav-item');let _0x1c81f7=null,_0x58770c=new Set();_0x2085d7['forEach'](_0xe3a82c=>{const _0x41cb2e=a4_0x343e;_0xe3a82c[_0x41cb2e(0x29e)]('click',function(){const _0x59864b=_0x41cb2e,_0x4e1fd8=this['getAttribute']('data-section');if(_0x4e1fd8===_0x1c81f7)return;_0x1c81f7&&(document['getElementById'](_0x1c81f7)[_0x59864b(0x29d)][_0x59864b(0x28b)]='none',_0x2085d7['forEach'](_0x47b4a6=>_0x47b4a6[_0x59864b(0x157)]['remove'](_0x59864b(0x212)))),document['getElementById'](_0x4e1fd8)['style'][_0x59864b(0x28b)]='block',this['classList']['add']('active'),_0x1c81f7=_0x4e1fd8;});});}function loadSectionData(_0x2ba7ca){return;}async function initializeAdminDashboard(){const _0x58cc79=a4_0x1fd11d;try{const _0x4916e2=auth['currentUser'],_0x3724be=await getUserTabPermissions(_0x4916e2['email']);console['log'](_0x58cc79(0xd9)+_0x4916e2[_0x58cc79(0xe8)]+'\x20allowed\x20tabs:',_0x3724be),window['userAllowedTabs']=_0x3724be,setupSidebarNavigation(_0x3724be),setupLadderSelector(),setupDashboardSection(),_0x3724be[_0x58cc79(0x1f5)](_0x58cc79(0x248))&&setupManagePlayersSection(),_0x3724be['includes']('elo-history')&&setupEloHistorySection(),_0x3724be[_0x58cc79(0x1f5)]('manage-ranks')&&setupRankControls(),_0x3724be['includes']('manage-articles')&&setupManageArticlesSection(),_0x3724be['includes'](_0x58cc79(0x147))&&setupUserRolesSection(),_0x3724be['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x3724be['includes'](_0x58cc79(0x236))&&setupManageHighlightsSection(),_0x3724be[_0x58cc79(0x1f5)]('inactive-players')&&setupInactivePlayersSection(),_0x3724be['includes']('manage-matches')&&setupManageMatchesSection(),_0x3724be['includes']('manage-points')&&setupManagePointsSection(),_0x3724be['includes'](_0x58cc79(0x1a9))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x3724be);}catch(_0x6afd7c){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x6afd7c);}}function setupDataLoadButtons(_0xeec42c=[]){const _0x5f258a=a4_0x1fd11d;(!_0xeec42c||_0xeec42c[_0x5f258a(0x116)]===0x0)&&(_0xeec42c=['dashboard']);const _0x55da1d=document['getElementById']('load-dashboard-data');_0x55da1d&&_0x55da1d['addEventListener'](_0x5f258a(0x1ed),function(){const _0x4d7044=_0x5f258a;this[_0x4d7044(0x157)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0x4c24ff=_0x4d7044;this['classList'][_0x4c24ff(0x11f)](_0x4c24ff(0x182)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x159ec2=>{const _0x3d8a4e=_0x4d7044;console['error'](_0x3d8a4e(0x24b),_0x159ec2),this[_0x3d8a4e(0x157)][_0x3d8a4e(0x11f)](_0x3d8a4e(0x182)),this['innerHTML']=_0x3d8a4e(0x215),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0xeec42c['includes']('manage-trophies')){const _0x5baa34=document[_0x5f258a(0x1e2)]('load-trophies-data');_0x5baa34&&_0x5baa34['addEventListener']('click',function(){const _0x3a9b53=_0x5f258a;console['log'](_0x3a9b53(0x204)),this['classList'][_0x3a9b53(0x1d5)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x2cd330=_0x3a9b53;this[_0x2cd330(0x157)]['remove']('loading'),this[_0x2cd330(0xcb)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x53be19=>{const _0x2373c3=_0x3a9b53;console['error']('Error\x20loading\x20trophies:',_0x53be19),this['classList'][_0x2373c3(0x11f)]('loading'),this[_0x2373c3(0xcb)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2a9e9b=_0x2373c3;this[_0x2a9e9b(0xcb)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0xeec42c[_0x5f258a(0x1f5)]('manage-players')){const _0x405b8c=document[_0x5f258a(0x1e2)]('load-players-data');_0x405b8c&&_0x405b8c[_0x5f258a(0x29e)](_0x5f258a(0x1ed),function(){const _0x346ad3=_0x5f258a;console['log'](_0x346ad3(0x299)),this[_0x346ad3(0x157)]['add'](_0x346ad3(0x182)),this[_0x346ad3(0xcb)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x346ad3(0x29b)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})[_0x346ad3(0x246)](_0x581429=>{const _0x16b17b=_0x346ad3;console['error'](_0x16b17b(0x218),_0x581429),this['classList']['remove'](_0x16b17b(0x182)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0xeec42c['includes']('elo-history')){const _0x5afa61=document['getElementById']('load-elo-history-data');_0x5afa61&&_0x5afa61['addEventListener'](_0x5f258a(0x1ed),function(){const _0x31a52a=_0x5f258a;console['log'](_0x31a52a(0x276)),this[_0x31a52a(0x157)][_0x31a52a(0x1d5)](_0x31a52a(0x182)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x44a8a4=_0x31a52a;this['classList'][_0x44a8a4(0x11f)](_0x44a8a4(0x182)),this[_0x44a8a4(0xcb)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x31a52a(0x246)](_0x5667fb=>{const _0x53c8bf=_0x31a52a;console[_0x53c8bf(0x100)]('Error\x20loading\x20history:',_0x5667fb),this['classList'][_0x53c8bf(0x11f)](_0x53c8bf(0x182)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4eaa95=_0x53c8bf;this[_0x4eaa95(0xcb)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0xeec42c['includes'](_0x5f258a(0x226))){const _0x42db3d=document['getElementById']('load-articles-data');_0x42db3d&&_0x42db3d[_0x5f258a(0x29e)](_0x5f258a(0x1ed),function(){const _0x3858b3=_0x5f258a;console['log'](_0x3858b3(0x1ae)),this['classList'][_0x3858b3(0x1d5)]('loading'),this[_0x3858b3(0xcb)]=_0x3858b3(0x190),loadArticles()['then'](()=>{const _0x4b4158=_0x3858b3;this[_0x4b4158(0x157)][_0x4b4158(0x11f)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x1fa85f=>{const _0x1b552e=_0x3858b3;console[_0x1b552e(0x100)]('Error\x20loading\x20articles:',_0x1fa85f),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0xeec42c[_0x5f258a(0x1f5)]('user-roles-section')){const _0x78971d=document['getElementById']('load-users-data');_0x78971d&&_0x78971d['addEventListener'](_0x5f258a(0x1ed),function(){const _0x2eb7fe=_0x5f258a;console['log'](_0x2eb7fe(0x1ce)),this['classList'][_0x2eb7fe(0x1d5)]('loading'),this['innerHTML']=_0x2eb7fe(0x190),loadUsersWithRoles()['then'](()=>{const _0x1c35b5=_0x2eb7fe;this['classList']['remove'](_0x1c35b5(0x182)),this[_0x1c35b5(0xcb)]=_0x1c35b5(0x2a2);})['catch'](_0x4c19e8=>{const _0x2b0d24=_0x2eb7fe;console['error']('Error\x20loading\x20users:',_0x4c19e8),this['classList'][_0x2b0d24(0x11f)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0xeec42c[_0x5f258a(0x1f5)](_0x5f258a(0x202))){const _0x27a4aa=document['getElementById']('load-inactive-players-data');_0x27a4aa&&_0x27a4aa['addEventListener']('click',function(){const _0x1e45e1=_0x5f258a;console['log'](_0x1e45e1(0x13a)),this['classList'][_0x1e45e1(0x1d5)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x30496a=_0x1e45e1;this['classList']['remove'](_0x30496a(0x182)),this['innerHTML']=_0x30496a(0x300);})['catch'](_0x40a53c=>{const _0x1368a1=_0x1e45e1;console[_0x1368a1(0x100)]('Error\x20loading\x20inactive\x20players:',_0x40a53c),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x476fcc=_0x1368a1;this['innerHTML']=_0x476fcc(0x300);},0xbb8);});});}if(_0xeec42c[_0x5f258a(0x1f5)](_0x5f258a(0x236))){const _0x524b6f=document['getElementById']('load-highlights-data');_0x524b6f&&_0x524b6f['addEventListener']('click',function(){const _0x46023b=_0x5f258a;console[_0x46023b(0xca)](_0x46023b(0x1f3)),this[_0x46023b(0x157)][_0x46023b(0x1d5)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x46023b(0x29b)](()=>{const _0x5e4e87=_0x46023b;this['classList'][_0x5e4e87(0x11f)]('loading'),this['innerHTML']=_0x5e4e87(0x188);})['catch'](_0x8592dc=>{const _0xa93d23=_0x46023b;console['error']('Error\x20loading\x20highlights:',_0x8592dc),this['classList']['remove']('loading'),this['innerHTML']=_0xa93d23(0x215),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0xeec42c['includes']('manage-matches')){const _0x3c5e25=document['getElementById']('load-matches-data');_0x3c5e25&&_0x3c5e25['addEventListener'](_0x5f258a(0x1ed),function(){const _0x2e1135=_0x5f258a;console[_0x2e1135(0xca)]('Load\x20matches\x20data\x20clicked'),this['classList']['add'](_0x2e1135(0x182)),this[_0x2e1135(0xcb)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x47cf8d=_0x2e1135;this['classList']['remove'](_0x47cf8d(0x182)),this[_0x47cf8d(0xcb)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})[_0x2e1135(0x246)](_0x578b62=>{const _0x377f20=_0x2e1135;console[_0x377f20(0x100)]('Error\x20loading\x20matches:',_0x578b62),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0xeec42c['includes']('manage-ribbons')){const _0x5382f0=document['getElementById'](_0x5f258a(0x1bc));_0x5382f0&&_0x5382f0['addEventListener']('click',function(){const _0x378e7f=_0x5f258a;console[_0x378e7f(0xca)]('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x378e7f(0x190),loadRibbonsData()[_0x378e7f(0x29b)](()=>{const _0xfbeb32=_0x378e7f;this['classList']['remove']('loading'),this['innerHTML']=_0xfbeb32(0x20a);})['catch'](_0x5a87e2=>{console['error']('Error\x20loading\x20ribbons:',_0x5a87e2),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x367a55=a4_0x343e;this[_0x367a55(0xcb)]=_0x367a55(0x20a);},0xbb8);});});}console[_0x5f258a(0xca)](_0x5f258a(0x1f4));}function setupDashboardSection(){const _0x22154f=a4_0x1fd11d;document['getElementById'](_0x22154f(0xe1))[_0x22154f(0x1c2)]='-',document[_0x22154f(0x1e2)]('match-count')['textContent']='-',document['getElementById'](_0x22154f(0xf6))['textContent']='-',document['getElementById'](_0x22154f(0x32b))[_0x22154f(0x1c2)]='-';}function setupLadderSelector(){const _0x96465f=a4_0x1fd11d,_0xcad7d6=document[_0x96465f(0x117)]('.ladder-switch\x20input');_0xcad7d6['forEach'](_0x53cf7b=>{_0x53cf7b['addEventListener']('change',()=>{const _0x1fed75=a4_0x343e;currentLadder=_0x53cf7b['value'],document['body'][_0x1fed75(0x1bf)](_0x1fed75(0x29a),currentLadder);const _0x566ebc=document['getElementById'](_0x1fed75(0x1b8));_0x566ebc&&(_0x566ebc[_0x1fed75(0x1c2)]=currentLadder),document['getElementById']('player-count')['textContent']='-',document[_0x1fed75(0x1e2)]('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById'](_0x1fed75(0x32b))['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution'][_0x1fed75(0x1d9)](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x584b3a=document['getElementById']('current-ladder-display');_0x584b3a&&(_0x584b3a['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x20397f=a4_0x1fd11d;try{console['log'](_0x20397f(0x15b)),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x20397f(0xdd))['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0x10e461=currentLadder==='D1'?_0x20397f(0x2c8):currentLadder==='D2'?'playersD2':_0x20397f(0xc3),_0x36b163=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x7e1fbf=currentLadder==='D1'?_0x20397f(0x322):currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x5b8575=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x10e461+',\x20'+_0x36b163);const _0x4c7590=await getDocs(collection(db,_0x10e461)),_0x142329=_0x4c7590['size'],_0x4dea16=await getDocs(collection(db,_0x36b163)),_0x9fc1d1=_0x4dea16['size'],_0x5433f4=await getDocs(collection(db,_0x7e1fbf)),_0x80147=_0x5433f4['size'],_0x5ef998=await getDocs(collection(db,_0x5b8575)),_0x483d57=_0x5ef998['size'];return document[_0x20397f(0x1e2)](_0x20397f(0xe1))['textContent']=_0x142329,document['getElementById']('match-count')['textContent']=_0x9fc1d1,document['getElementById'](_0x20397f(0xf6))[_0x20397f(0x1c2)]=_0x80147,document['getElementById']('rejected-count')['textContent']=_0x483d57,await createRankDistributionChart(),await createActivityChart(),console['log'](_0x20397f(0x2be)),!![];}catch(_0x1f97f8){console[_0x20397f(0x100)]('Error\x20loading\x20dashboard\x20data:',_0x1f97f8);throw _0x1f97f8;}}async function createRankDistributionChart(){const _0x53982f=a4_0x1fd11d;try{const _0x3d1c9b=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x39acc9=await getDocs(_0x3d1c9b),_0x40fbe4={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x39acc9[_0x53982f(0x31d)](_0x34503c=>{const _0x15a89a=_0x53982f,_0x58ba84=_0x34503c[_0x15a89a(0xc8)](),_0x2d8bac=_0x58ba84['eloRating']||0x4b0;if(_0x2d8bac>=0x7d0)_0x40fbe4['Emerald']++;else{if(_0x2d8bac>=0x708)_0x40fbe4[_0x15a89a(0x253)]++;else{if(_0x2d8bac>=0x640)_0x40fbe4['Silver']++;else{if(_0x2d8bac>=0x578)_0x40fbe4['Bronze']++;else _0x40fbe4[_0x15a89a(0x289)]++;}}}});const _0x209a78=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts[_0x53982f(0x200)][_0x53982f(0x1d9)](),charts[_0x53982f(0x200)]=new Chart(_0x209a78,{'type':'doughnut','data':{'labels':Object['keys'](_0x40fbe4),'datasets':[{'data':Object['values'](_0x40fbe4),'backgroundColor':['#808080','#CD7F32','#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x3ca9d7){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x3ca9d7),document['getElementById'](_0x53982f(0x1ca))['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x50b00b=a4_0x1fd11d;try{const _0x4af651=currentLadder==='D1'?_0x50b00b(0x1a4):'approvedMatchesD2',_0x170990=collection(db,_0x4af651),_0x731cf1=new Date();_0x731cf1['setDate'](_0x731cf1[_0x50b00b(0x220)]()-0x7);const _0x4d30c6=query(_0x170990,where('approvedAt','>=',_0x731cf1),orderBy('approvedAt','asc')),_0x4c74d3=await getDocs(_0x4d30c6),_0x4636bd=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],_0x7bb4be=_0x4636bd['reduce']((_0x87f1b0,_0x82ad25)=>({..._0x87f1b0,[_0x82ad25]:0x0}),{});_0x4c74d3[_0x50b00b(0x31d)](_0x5ee7bd=>{const _0x34a8ce=_0x50b00b,_0x3bcb75=_0x5ee7bd['data']();if(_0x3bcb75['approvedAt']){const _0x581146=_0x4636bd[new Date(_0x3bcb75['approvedAt']['seconds']*0x3e8)[_0x34a8ce(0x2f2)]()];_0x7bb4be[_0x581146]++;}});const _0x36432e=document['getElementById']('activity-chart');charts['activity']&&charts['activity'][_0x50b00b(0x1d9)](),charts['activity']=new Chart(_0x36432e,{'type':'bar','data':{'labels':_0x4636bd,'datasets':[{'label':'Matches\x20Played','data':_0x4636bd[_0x50b00b(0x1f8)](_0x134ada=>_0x7bb4be[_0x134ada]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0x50b00b(0x14c),'borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x50b00b(0x192)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x50b00b(0x1e1)}}},'plugins':{'legend':{'labels':{'color':_0x50b00b(0x192)}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x238f6e){console['error'](_0x50b00b(0x234),_0x238f6e),document['getElementById']('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x1d5297=a4_0x1fd11d,_0x4a78e9=document['getElementById']('players-table-body');if(!_0x4a78e9)return;_0x4a78e9[_0x1d5297(0xcb)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x2a44ad=_0x1d5297(0x2c8);if(currentLadder==='D2')_0x2a44ad='playersD2';else currentLadder==='D3'&&(_0x2a44ad='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x2a44ad+'\x20collection...');const _0xa702ce=collection(db,_0x2a44ad),_0x57e339=query(_0xa702ce,orderBy('eloRating',_0x1d5297(0x183))),_0x1959b7=await getDocs(_0x57e339);if(_0x1959b7[_0x1d5297(0x2f6)]){_0x4a78e9[_0x1d5297(0xcb)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x4a78e9['innerHTML']='';let _0x53b29e=0x1;_0x1959b7[_0x1d5297(0x31d)](_0x483f00=>{const _0x3a9c88=_0x1d5297,_0x2a03bd=_0x483f00['data'](),_0x26c111=getRankFromElo(_0x2a03bd['eloRating']||0x4b0),_0x5161aa=getRankStyle(_0x2a03bd['eloRating']||0x4b0),_0x511c04=document['createElement']('tr');_0x511c04['innerHTML']=_0x3a9c88(0x1b9)+_0x53b29e+_0x3a9c88(0x2a0)+_0x5161aa[_0x3a9c88(0x28c)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2a03bd['username']||'Unknown')+_0x3a9c88(0x1a2)+(_0x2a03bd[_0x3a9c88(0x16c)]||0x4b0)+_0x3a9c88(0x303)+_0x5161aa['color']+_0x3a9c88(0x21d)+_0x26c111+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2a03bd['wins']||0x0)+'W\x20/\x20'+(_0x2a03bd[_0x3a9c88(0x13e)]||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x483f00['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x483f00['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4a78e9[_0x3a9c88(0x2f5)](_0x511c04),_0x53b29e++;}),setupPlayerActionButtons();}catch(_0x114d8a){console[_0x1d5297(0x100)]('Error\x20loading\x20players:',_0x114d8a),_0x4a78e9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x114d8a['message']+_0x1d5297(0x10b);}}function getRankFromElo(_0x3c29b7){const _0x1e81a5=a4_0x1fd11d;if(_0x3c29b7>=0x7d0)return _0x1e81a5(0x2c7);if(_0x3c29b7>=0x708)return'Gold';if(_0x3c29b7>=0x640)return'Silver';if(_0x3c29b7>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x3b9399=a4_0x1fd11d;document['querySelectorAll'](_0x3b9399(0x2e9))['forEach'](_0x44d04e=>{const _0x3eb84d=_0x3b9399;_0x44d04e[_0x3eb84d(0x29e)]('click',async _0x558b8d=>{const _0x333c1a=_0x558b8d['currentTarget']['dataset']['id'];openEditPlayerModal(_0x333c1a);});}),document[_0x3b9399(0x117)]('.delete-btn')['forEach'](_0x56e96a=>{const _0x2dc2ba=_0x3b9399;_0x56e96a[_0x2dc2ba(0x29e)]('click',async _0x5b36fe=>{const _0x17f674=_0x2dc2ba,_0x408e6d=_0x5b36fe[_0x17f674(0x137)]['dataset']['id'];confirmDeletePlayer(_0x408e6d);});});}async function openEditPlayerModal(_0x24b08c){const _0x32aa97=a4_0x1fd11d;try{const _0x38a81f=currentLadder==='D1'?_0x32aa97(0x2c8):_0x32aa97(0x1f7),_0x20c66b=doc(db,_0x38a81f,_0x24b08c),_0x502804=await getDoc(_0x20c66b);if(!_0x502804[_0x32aa97(0x24a)]()){showNotification('Player\x20not\x20found','error');return;}const _0x1d6795=_0x502804['data'](),_0x1228e3=document['getElementById'](_0x32aa97(0x312)),_0x118cb8=document[_0x32aa97(0x1e2)]('edit-username'),_0x1c6df5=document['getElementById']('edit-elo'),_0x5aba1b=document['getElementById']('edit-wins'),_0x2f49e5=document['getElementById'](_0x32aa97(0x25d));_0x118cb8[_0x32aa97(0x2e0)]=_0x1d6795['username']||'',_0x1c6df5['value']=_0x1d6795[_0x32aa97(0x16c)]||0x4b0,_0x5aba1b['value']=_0x1d6795['wins']||0x0,_0x2f49e5[_0x32aa97(0x2e0)]=_0x1d6795['losses']||0x0,_0x1228e3['dataset']['playerId']=_0x24b08c,_0x1228e3[_0x32aa97(0x157)]['add']('active');}catch(_0x41ea70){console[_0x32aa97(0x100)]('Error\x20opening\x20edit\x20modal:',_0x41ea70),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0xc3ee66=a4_0x1fd11d;try{const _0x2b6f19=document['getElementById'](_0xc3ee66(0x312)),_0x5b1665=_0x2b6f19['dataset'][_0xc3ee66(0x15a)];if(!_0x5b1665){showNotification('No\x20player\x20selected','error');return;}const _0x578770=document['getElementById']('edit-username'),_0x1b1e84=document['getElementById'](_0xc3ee66(0x23a)),_0x3e4e9d=document[_0xc3ee66(0x1e2)]('edit-wins'),_0x1f7de4=document['getElementById'](_0xc3ee66(0x25d)),_0x2ac0df=_0x578770['value']['trim'](),_0x3af60a=parseInt(_0x1b1e84['value']),_0x367a7a=parseInt(_0x3e4e9d['value']),_0x4f7e31=parseInt(_0x1f7de4['value']);if(!_0x2ac0df||isNaN(_0x3af60a)){showNotification(_0xc3ee66(0x1b3),'error');return;}const _0x31f7f2=currentLadder==='D1'?'players':'playersD2',_0x3b0677=doc(db,_0x31f7f2,_0x5b1665),_0x59fd57=await getDoc(_0x3b0677),_0x153f29=_0x59fd57['exists']()?_0x59fd57[_0xc3ee66(0xc8)]():{},_0x2274d1=_0x153f29['eloRating']||0x4b0;await updateDoc(_0x3b0677,{'username':_0x2ac0df,'eloRating':_0x3af60a,'wins':_0x367a7a||0x0,'losses':_0x4f7e31||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x3af60a!==_0x2274d1){const _0x39dd86=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x39dd86),{'player':_0x2ac0df,'previousElo':_0x2274d1,'newElo':_0x3af60a,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0xc3ee66(0xcc)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0xe37faa){console['error']('Error\x20updating\x20player:',_0xe37faa),showNotification(_0xc3ee66(0x142)+_0xe37faa[_0xc3ee66(0x125)],'error');}}function closeEditPlayerModal(){const _0x483caf=a4_0x1fd11d,_0x18ac42=document['getElementById']('edit-player-modal');_0x18ac42['classList']['remove'](_0x483caf(0x212)),_0x18ac42[_0x483caf(0x305)]['playerId']='';}async function confirmDeletePlayer(_0x2aaa6b){const _0x3fd70c=a4_0x1fd11d;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x22857c=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x22857c,_0x2aaa6b)),loadPlayersData(),showNotification(_0x3fd70c(0x14a),'success');}catch(_0x3f89c0){console['error'](_0x3fd70c(0x1ee),_0x3f89c0),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x3f89c0['message'],'error');}}async function setupManagePlayersSection(){const _0x3b8a99=a4_0x1fd11d,_0x260145=document[_0x3b8a99(0x1e2)](_0x3b8a99(0x163));_0x260145&&_0x260145['addEventListener']('submit',async _0x13edc8=>{_0x13edc8['preventDefault'](),await addNewPlayer();});const _0x26f5eb=document['getElementById']('player-search');_0x26f5eb&&_0x26f5eb['addEventListener'](_0x3b8a99(0x222),debounce(filterPlayerTable,0x12c));const _0x2e13c8=document['getElementById']('save-player-btn');_0x2e13c8&&_0x2e13c8['addEventListener'](_0x3b8a99(0x1ed),saveEditedPlayer);const _0x102c45=document[_0x3b8a99(0x1e2)](_0x3b8a99(0x17b));_0x102c45&&_0x102c45['addEventListener'](_0x3b8a99(0x1ed),closeEditPlayerModal);const _0x42a258=document['getElementById']('edit-player-modal');_0x42a258&&_0x42a258['addEventListener']('click',_0x59f846=>{_0x59f846['target']===_0x42a258&&closeEditPlayerModal();});const _0x3dc629=document[_0x3b8a99(0x1e2)](_0x3b8a99(0x1d7));_0x3dc629&&_0x3dc629[_0x3b8a99(0x29e)]('change',()=>{currentLadder=_0x3dc629['value'],loadPlayersData();});}async function addNewPlayer(){const _0x2c02a9=a4_0x1fd11d;try{const _0x35e323=document[_0x2c02a9(0x1e2)](_0x2c02a9(0x133)),_0x165039=document['getElementById'](_0x2c02a9(0xf4)),_0xeac8f1=_0x35e323['value'][_0x2c02a9(0x25c)](),_0x4af9b4=parseInt(_0x165039['value'])||0x4b0;if(!_0xeac8f1){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0xeac8f1+'\x20with\x20ELO\x20'+_0x4af9b4+_0x2c02a9(0x293)+currentLadder+'\x20ladder');let _0x56e1f0=_0x2c02a9(0x2c8),_0x5443a0='eloHistory';if(currentLadder==='D2')_0x56e1f0='playersD2',_0x5443a0=_0x2c02a9(0x2a8);else currentLadder==='D3'&&(_0x56e1f0='playersD3',_0x5443a0='eloHistoryD3');const _0x58e161=query(collection(db,_0x56e1f0),where('username','==',_0xeac8f1)),_0x30ff54=await getDocs(_0x58e161);if(!_0x30ff54['empty']){alert('Username\x20'+_0xeac8f1+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x1f292d=auth[_0x2c02a9(0xcc)],_0x16aeaa={'username':_0xeac8f1,'eloRating':_0x4af9b4,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x1f292d?_0x1f292d['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x56e1f0),_0x16aeaa),await addDoc(collection(db,_0x5443a0),{'player':_0xeac8f1,'previousElo':0x4b0,'newElo':_0x4af9b4,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x1f292d?_0x1f292d['email']:'admin','gameMode':currentLadder}),_0x35e323[_0x2c02a9(0x2e0)]='',_0x165039[_0x2c02a9(0x2e0)]='1200',alert('Player\x20'+_0xeac8f1+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x1c5ac1){console['error']('Error\x20adding\x20player:',_0x1c5ac1),alert('Error\x20adding\x20player:\x20'+_0x1c5ac1['message']);}}document[a4_0x1fd11d(0x29e)]('DOMContentLoaded',()=>{const _0x1cae66=a4_0x1fd11d,_0x24d5ad=document[_0x1cae66(0x1e2)]('add-player-form');_0x24d5ad&&_0x24d5ad[_0x1cae66(0x29e)](_0x1cae66(0x1e5),_0x2fcf82=>{const _0x1a0497=_0x1cae66;_0x2fcf82[_0x1a0497(0x13f)](),addNewPlayer();});});function filterPlayerTable(){const _0x316198=a4_0x1fd11d,_0xb0b65e=document['getElementById']('player-search')['value'][_0x316198(0x2b6)](),_0x840cc7=document[_0x316198(0x117)]('#players-table-body\x20tr');let _0xcc9df3=0x0;_0x840cc7[_0x316198(0x31d)](_0x1048ea=>{const _0xd5257c=_0x316198,_0xda29c=_0x1048ea['querySelector']('.username')?.[_0xd5257c(0x1c2)]['toLowerCase']()||'';_0xda29c['includes'](_0xb0b65e)?(_0x1048ea['style']['display']='',_0xcc9df3++):_0x1048ea['style']['display']=_0xd5257c(0x1c4);});const _0xc18018=document['getElementById']('no-results-message');_0xc18018&&(_0xcc9df3===0x0&&_0xb0b65e!==''?_0xc18018['style']['display']='block':_0xc18018[_0x316198(0x29d)]['display']='none');}function debounce(_0x2d0d40,_0x1d95cc){let _0x3d8503;return function(..._0x259ef9){clearTimeout(_0x3d8503),_0x3d8503=setTimeout(()=>_0x2d0d40['apply'](this,_0x259ef9),_0x1d95cc);};}async function loadEloHistory(_0x1787f6=0x1){const _0x1f3cf1=a4_0x1fd11d,_0x46e70e=document[_0x1f3cf1(0x1e2)]('elo-history-table-body'),_0x1d04a7=currentLadder['toLowerCase']();if(!_0x46e70e)return;_0x46e70e['innerHTML']=_0x1f3cf1(0x1c8);try{const _0x3ddb9a=currentLadder==='D1'?_0x1f3cf1(0x2d9):currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x11f348=collection(db,_0x3ddb9a);let _0x237f2e;if(_0x1787f6>eloHistoryPagination[_0x1d04a7]['page']&&eloHistoryPagination[_0x1d04a7]['lastVisible'])_0x237f2e=query(_0x11f348,orderBy(_0x1f3cf1(0x1ba),_0x1f3cf1(0x183)),startAfter(eloHistoryPagination[_0x1d04a7][_0x1f3cf1(0xe3)]),limit(PAGE_SIZE));else _0x1787f6<eloHistoryPagination[_0x1d04a7]['page']&&eloHistoryPagination[_0x1d04a7]['firstVisible']?_0x237f2e=query(_0x11f348,orderBy(_0x1f3cf1(0x1ba),'desc'),endBefore(eloHistoryPagination[_0x1d04a7]['firstVisible']),limitToLast(PAGE_SIZE)):_0x237f2e=query(_0x11f348,orderBy(_0x1f3cf1(0x1ba),'desc'),limit(PAGE_SIZE));const _0x2072a6=await getDocs(_0x237f2e);if(_0x2072a6['empty']){_0x46e70e['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x1d04a7+_0x1f3cf1(0xf9))['textContent']=_0x1f3cf1(0x18b);return;}eloHistoryPagination[_0x1d04a7][_0x1f3cf1(0x1a7)]=_0x1787f6,eloHistoryPagination[_0x1d04a7]['firstVisible']=_0x2072a6['docs'][0x0],eloHistoryPagination[_0x1d04a7]['lastVisible']=_0x2072a6['docs'][_0x2072a6['docs']['length']-0x1];const _0x47b309=new Map();_0x46e70e['innerHTML']='';const _0x465591=async _0x58a886=>{const _0x227fa0=_0x1f3cf1;if(typeof _0x58a886!==_0x227fa0(0x1da)||_0x58a886['length']<0x14||/[^a-zA-Z0-9-_]/[_0x227fa0(0x201)](_0x58a886))return _0x58a886;if(_0x47b309['has'](_0x58a886))return _0x47b309['get'](_0x58a886);try{for(const _0x3f1490 of['players',_0x227fa0(0x1f7),'playersD3','nonParticipants']){const _0x12fcdc=await getDoc(doc(db,_0x3f1490,_0x58a886));if(_0x12fcdc['exists']()&&_0x12fcdc['data']()[_0x227fa0(0x10c)]){const _0x2a26f2=_0x12fcdc[_0x227fa0(0xc8)]()['username'];return _0x47b309[_0x227fa0(0x2b9)](_0x58a886,_0x2a26f2),_0x2a26f2;}}return _0x58a886;}catch(_0x25b280){return console[_0x227fa0(0x18a)]('Error\x20resolving\x20username\x20for\x20'+_0x58a886+':',_0x25b280),_0x58a886;}};for(const _0x35f7a2 of _0x2072a6['docs']){const _0x133d3b=_0x35f7a2['data'](),_0x35cea7=document['createElement']('tr'),_0x21bbe8=_0x133d3b['timestamp']?new Date(_0x133d3b['timestamp'][_0x1f3cf1(0xd3)]*0x3e8)['toLocaleString']():_0x1f3cf1(0x274),_0x4c6d16=_0x133d3b[_0x1f3cf1(0x28f)]-_0x133d3b['previousElo'],_0x54c3eb=_0x4c6d16>0x0?_0x1f3cf1(0x22b):_0x4c6d16<0x0?_0x1f3cf1(0x1f6):'',_0x5715b5=_0x4c6d16>0x0?'+':'',_0x2beb61=_0x133d3b['player']||_0x133d3b[_0x1f3cf1(0x10c)]||_0x133d3b['userId']||_0x1f3cf1(0x274),_0x1d3156=await _0x465591(_0x2beb61);_0x35cea7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x21bbe8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x1d3156+_0x1f3cf1(0x2bb)+(_0x133d3b['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x133d3b[_0x1f3cf1(0x28f)]||'N/A')+_0x1f3cf1(0x1cd)+_0x54c3eb+'\x22>'+_0x5715b5+_0x4c6d16+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x133d3b['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x133d3b['modifiedBy']||_0x133d3b['promotedBy']||_0x133d3b[_0x1f3cf1(0x14b)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x46e70e['appendChild'](_0x35cea7);}document['getElementById'](_0x1d04a7+'-page-indicator')['textContent']=_0x1f3cf1(0x1cb)+_0x1787f6;const _0x392f6c=document['getElementById'](_0x1d04a7+_0x1f3cf1(0x176)),_0x5f22f9=document['getElementById'](_0x1d04a7+'-next-page');if(_0x392f6c)_0x392f6c['disabled']=_0x1787f6<=0x1;const _0x251d7e=query(_0x11f348,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x1d04a7]['lastVisible']),limit(0x1)),_0x22cbb9=await getDocs(_0x251d7e);if(_0x5f22f9)_0x5f22f9['disabled']=_0x22cbb9[_0x1f3cf1(0x2f6)];}catch(_0x57b063){console['error']('Error\x20loading\x20ELO\x20history:',_0x57b063),_0x46e70e[_0x1f3cf1(0xcb)]=_0x1f3cf1(0x209)+_0x57b063['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x40c7bc){const _0x1975bc=a4_0x1fd11d;switch(_0x40c7bc){case'match_result':return'Match\x20Result';case'promotion':return'Promotion';case'demotion':return _0x1975bc(0x18f);case _0x1975bc(0x127):return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x40c7bc||_0x1975bc(0x120);}}function setupEloHistorySection(){const _0x6b5475=a4_0x1fd11d;document[_0x6b5475(0x1e2)]('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById'](_0x6b5475(0x219))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x6b5475(0x1e2)](_0x6b5475(0x2c0))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x2c8d5e=document['getElementById'](_0x6b5475(0x2e8)),_0x5afa2a=document['getElementById']('d3-next-page');_0x2c8d5e&&_0x2c8d5e['addEventListener'](_0x6b5475(0x1ed),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x5afa2a&&_0x5afa2a[_0x6b5475(0x29e)](_0x6b5475(0x1ed),()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x3b5204=document['getElementById']('elo-history-search');_0x3b5204&&_0x3b5204['addEventListener'](_0x6b5475(0x222),debounce(filterEloHistoryTable,0x12c));const _0x5b576e=document['getElementById']('history-type-filter');_0x5b576e&&_0x5b576e['addEventListener']('change',applyEloHistoryFilters);const _0x171523=document['getElementById']('reset-history-filters');_0x171523&&_0x171523['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x5912ca=a4_0x1fd11d,_0x502274=document['getElementById']('elo-history-search')[_0x5912ca(0x2e0)]['toLowerCase'](),_0x3f58b4=document['querySelectorAll'](_0x5912ca(0x324));let _0x135fc9=0x0;_0x3f58b4['forEach'](_0x49acd3=>{const _0x4a7e0b=_0x5912ca;if(_0x49acd3['classList'][_0x4a7e0b(0x134)](_0x4a7e0b(0x16b))||_0x49acd3['classList']['contains']('empty-state')||_0x49acd3['classList']['contains'](_0x4a7e0b(0x1ef)))return;const _0x3821c7=_0x49acd3['querySelector']('.player')?.['textContent'][_0x4a7e0b(0x2b6)]()||'',_0x15373b=_0x49acd3['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x5ae05f=_0x49acd3['querySelector'](_0x4a7e0b(0x1db))?.[_0x4a7e0b(0x1c2)]['toLowerCase']()||'';_0x3821c7[_0x4a7e0b(0x1f5)](_0x502274)||_0x15373b['includes'](_0x502274)||_0x5ae05f['includes'](_0x502274)?(_0x49acd3['style'][_0x4a7e0b(0x28b)]='',_0x135fc9++):_0x49acd3['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x773006=a4_0x1fd11d,_0x224ab5=document['getElementById']('history-start-date')['value'],_0x31e691=document['getElementById']('history-end-date')[_0x773006(0x2e0)],_0x3c014b=document['getElementById']('history-type-filter')['value'],_0x5a1728=currentLadder['toLowerCase']();eloHistoryPagination[_0x5a1728]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x451307=document['getElementById']('elo-history-table-body');_0x451307['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x1b9638=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0xb8a6fa=collection(db,_0x1b9638);let _0x19be45=[orderBy(_0x773006(0x1ba),_0x773006(0x183))];if(_0x224ab5){const _0x2a20e1=new Date(_0x224ab5);_0x2a20e1['setHours'](0x0,0x0,0x0,0x0),_0x19be45['push'](where('timestamp','>=',_0x2a20e1));}if(_0x31e691){const _0x485e0a=new Date(_0x31e691);_0x485e0a['setHours'](0x17,0x3b,0x3b,0x3e7),_0x19be45['push'](where('timestamp','<=',_0x485e0a));}_0x3c014b&&_0x3c014b!==_0x773006(0x316)&&_0x19be45['push'](where('type','==',_0x3c014b));_0x19be45['push'](limit(PAGE_SIZE));const _0x4a4673=query(_0xb8a6fa,..._0x19be45),_0x1640c8=await getDocs(_0x4a4673);!_0x1640c8[_0x773006(0x2f6)]&&(eloHistoryPagination[_0x5a1728][_0x773006(0x2fe)]=_0x1640c8[_0x773006(0x1ab)][0x0],eloHistoryPagination[_0x5a1728]['lastVisible']=_0x1640c8['docs'][_0x1640c8['docs'][_0x773006(0x116)]-0x1]);_0x451307['innerHTML']='';if(_0x1640c8[_0x773006(0x2f6)]){_0x451307[_0x773006(0xcb)]=_0x773006(0x28d);return;}_0x1640c8['forEach'](_0x26030c=>{const _0x5a6d41=_0x773006,_0x267551=_0x26030c['data'](),_0x13f24a=document['createElement']('tr'),_0x5ee9ab=_0x267551['timestamp']?new Date(_0x267551['timestamp']['seconds']*0x3e8)[_0x5a6d41(0x235)]():'N/A',_0x13eec5=_0x267551['newElo']-_0x267551['previousElo'],_0x5ca288=_0x13eec5>0x0?'positive-change':_0x13eec5<0x0?'negative-change':'',_0xf5da5e=_0x13eec5>0x0?'+':'',_0x37ad62=_0x267551['player']||_0x267551['username']||_0x267551['userId']||'N/A';_0x13f24a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x5ee9ab+_0x5a6d41(0x181)+_0x37ad62+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x267551[_0x5a6d41(0xff)]||_0x5a6d41(0x274))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x267551[_0x5a6d41(0x28f)]||_0x5a6d41(0x274))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x5ca288+'\x22>'+_0xf5da5e+_0x13eec5+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x267551[_0x5a6d41(0x165)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x267551['modifiedBy']||_0x267551[_0x5a6d41(0x228)]||_0x267551['demotedBy']||_0x5a6d41(0x12d))+_0x5a6d41(0x319),_0x451307['appendChild'](_0x13f24a);}),document['getElementById'](_0x5a1728+'-page-indicator')['textContent']='Page\x201';}catch(_0x2d1f3f){console[_0x773006(0x100)](_0x773006(0x10f),_0x2d1f3f),_0x451307['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x2d1f3f[_0x773006(0x125)]+_0x773006(0x10b);}}function resetEloHistoryFilters(){const _0x58389d=a4_0x1fd11d;document[_0x58389d(0x1e2)](_0x58389d(0xdc))['value']='',document[_0x58389d(0x1e2)]('history-end-date')['value']='',document['getElementById'](_0x58389d(0x171))['value']='all',document['getElementById']('elo-history-search')['value']='';const _0x691632=currentLadder['toLowerCase']();eloHistoryPagination[_0x691632]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x44a255=a4_0x1fd11d,_0x4ffe97=document['getElementById']('promote-player-btn'),_0x1b0553=document['getElementById'](_0x44a255(0x124)),_0xbbb62b=document['getElementById']('promote-form');_0x4ffe97&&_0x1b0553&&_0xbbb62b&&(_0x4ffe97['addEventListener']('click',()=>{const _0x4fdca8=_0x44a255;_0x1b0553[_0x4fdca8(0x157)]['add']('active');}),_0x1b0553[_0x44a255(0x29e)](_0x44a255(0x1ed),_0x3f7669=>{_0x3f7669['target']===_0x1b0553&&_0x1b0553['classList']['remove']('active');}),_0xbbb62b[_0x44a255(0x29e)]('submit',async _0x42ec4c=>{const _0x361499=_0x44a255;_0x42ec4c[_0x361499(0x13f)]();const _0x468153=document['getElementById']('promote-username'),_0x59da11=document['getElementById'](_0x361499(0x1ad)),_0x7fb7e9=_0x468153['value'][_0x361499(0x25c)](),_0x44806c=_0x59da11['value'];if(!_0x7fb7e9){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x7fb7e9,_0x44806c),_0x1b0553['classList'][_0x361499(0x11f)]('active'),_0x468153[_0x361499(0x2e0)]='';}catch(_0x426696){showNotification(_0x426696['message'],'error');}}),document[_0x44a255(0x1e2)]('cancel-promote-btn')['addEventListener']('click',()=>{_0x1b0553['classList']['remove']('active');}));const _0x4273e8=document['getElementById']('demote-player-btn'),_0x4e50d1=document['getElementById']('demote-modal'),_0x2b5338=document[_0x44a255(0x1e2)]('demote-form');_0x4273e8&&_0x4e50d1&&_0x2b5338&&(_0x4273e8['addEventListener']('click',()=>{const _0x42ca27=_0x44a255;_0x4e50d1[_0x42ca27(0x157)]['add']('active');}),_0x4e50d1[_0x44a255(0x29e)]('click',_0x3279e3=>{const _0x3d5b9e=_0x44a255;_0x3279e3['target']===_0x4e50d1&&_0x4e50d1['classList'][_0x3d5b9e(0x11f)]('active');}),_0x2b5338[_0x44a255(0x29e)]('submit',async _0xe2bd7b=>{const _0x135e4b=_0x44a255;_0xe2bd7b[_0x135e4b(0x13f)]();const _0xb418e2=document['getElementById'](_0x135e4b(0x1b1)),_0x4dfc67=document[_0x135e4b(0x1e2)]('demote-ladder'),_0x2b2635=_0xb418e2[_0x135e4b(0x2e0)]['trim'](),_0x4c9432=_0x4dfc67[_0x135e4b(0x2e0)];if(!_0x2b2635){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x2b2635,_0x4c9432),document[_0x135e4b(0x1e2)]('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x41262c){console['error']('Error\x20in\x20demotion:',_0x41262c);}}));const _0x4e2ad8=document['getElementById'](_0x44a255(0x154)),_0x2d0b25=document[_0x44a255(0x1e2)](_0x44a255(0x22d)),_0x48431c=document['getElementById']('set-elo-form');_0x4e2ad8&&_0x2d0b25&&_0x48431c&&(_0x4e2ad8[_0x44a255(0x29e)](_0x44a255(0x1ed),()=>{const _0x2cdc40=_0x44a255;_0x2d0b25[_0x2cdc40(0x157)][_0x2cdc40(0x1d5)](_0x2cdc40(0x212));}),_0x2d0b25['addEventListener'](_0x44a255(0x1ed),_0x123b2d=>{const _0x5e3cc5=_0x44a255;_0x123b2d[_0x5e3cc5(0x2d8)]===_0x2d0b25&&_0x2d0b25[_0x5e3cc5(0x157)][_0x5e3cc5(0x11f)]('active');}),_0x48431c[_0x44a255(0x29e)]('submit',async _0x5ee948=>{const _0x87f67f=_0x44a255;_0x5ee948['preventDefault']();const _0x387a2d=document['getElementById'](_0x87f67f(0x281)),_0x15876e=document['getElementById']('set-elo-value');let _0x15f05e;const _0xd8be17=document['getElementById'](_0x87f67f(0x159)),_0x219b50=document['querySelector'](_0x87f67f(0x1a5));if(_0xd8be17)_0x15f05e=_0xd8be17['value'];else _0x219b50?_0x15f05e=_0x219b50['value']:_0x15f05e='D1';if(!_0x387a2d||!_0x15876e){showNotification(_0x87f67f(0x1d1),_0x87f67f(0x100));return;}const _0x27fda2=_0x387a2d['value'][_0x87f67f(0x25c)](),_0x2ddd12=parseInt(_0x15876e['value']);if(!_0x27fda2||isNaN(_0x2ddd12)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x87f67f(0x100));return;}try{await setCustomElo(_0x27fda2,_0x2ddd12,_0x15f05e),_0x2d0b25['classList'][_0x87f67f(0x11f)](_0x87f67f(0x212)),_0x387a2d['value']='',_0x15876e[_0x87f67f(0x2e0)]='';}catch(_0x5254a3){showNotification(_0x5254a3['message'],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{_0x2d0b25['classList']['remove']('active');}));const _0x392aa0=document['getElementById'](_0x44a255(0x1b7)),_0x45b769=document['getElementById']('set-role-form');if(_0x392aa0&&_0x45b769){_0x392aa0['addEventListener']('click',_0x48c8fc=>{const _0x1647dc=_0x44a255;_0x48c8fc[_0x1647dc(0x2d8)]===_0x392aa0&&closeModalHandler();}),_0x45b769['addEventListener']('submit',async _0x2dc859=>{const _0x4c43fe=_0x44a255;_0x2dc859['preventDefault']();const _0x8f38d3=document['getElementById']('role-username'),_0x55e1c1=document[_0x4c43fe(0x1e2)]('role-name'),_0x59a98a=document[_0x4c43fe(0x1e2)]('role-color'),_0x20847a=_0x8f38d3['value']['trim'](),_0x2c2889=_0x55e1c1['value']['trim'](),_0x26ca12=_0x59a98a[_0x4c43fe(0x2e0)];if(!_0x20847a){showNotification(_0x4c43fe(0xe5),'error');return;}try{await setUserRole(_0x20847a,_0x2c2889,_0x26ca12),closeModalHandler(),loadUsersWithRoles();}catch(_0x39d7e8){}});const _0x4a8bb4=document['getElementById']('cancel-role-btn');_0x4a8bb4&&(_0x4a8bb4['removeEventListener']('click',closeModalHandler),_0x4a8bb4[_0x44a255(0x29e)](_0x44a255(0x1ed),closeModalHandler));}}async function promotePlayer(_0x1cbe26,_0x3aeaa3){const _0x4390d3=a4_0x1fd11d;try{console['log']('Attempting\x20to\x20promote\x20'+_0x1cbe26+'\x20in\x20'+_0x3aeaa3+'\x20ladder');const _0x49de66=auth['currentUser'];if(!_0x49de66)throw new Error(_0x4390d3(0x315));const _0xac9925=_0x3aeaa3==='D2'?'playersD2':_0x4390d3(0x2c8),_0xa66205=_0x3aeaa3==='D2'?_0x4390d3(0x2a8):'eloHistory';console['log'](_0x4390d3(0x26f)+_0xac9925);const _0x590f15=collection(db,_0xac9925),_0x4afa0c=query(_0x590f15,where('username','==',_0x1cbe26)),_0x37eacb=await getDocs(_0x4afa0c);if(_0x37eacb['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x3aeaa3+_0x4390d3(0x10a));throw new Error('Player\x20not\x20found\x20in\x20'+_0x3aeaa3+'\x20ladder');}const _0x3b0a8f=_0x37eacb['docs'][0x0],_0x5cb1a8=_0x3b0a8f['data'](),_0x11541c=_0x5cb1a8[_0x4390d3(0x16c)]||0x4b0,_0x220381=_0x3b0a8f['id'];console[_0x4390d3(0xca)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x11541c);const _0x5f37e9=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':_0x4390d3(0x253),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x59cfe7=_0x5f37e9[_0x4390d3(0x193)](_0x15bfbb=>_0x15bfbb[_0x4390d3(0x286)]>_0x11541c);if(!_0x59cfe7){alert(_0x4390d3(0x29f)+_0x3aeaa3+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x3aeaa3+'\x20ladder');}console['log'](_0x4390d3(0x1af)+_0x59cfe7['name']+'\x20('+_0x59cfe7['elo']+')'),await updateDoc(doc(db,_0xac9925,_0x3b0a8f['id']),{'eloRating':_0x59cfe7['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x49de66['email']||'admin'}),await addDoc(collection(db,_0xa66205),{'player':_0x1cbe26,'previousElo':_0x11541c,'newElo':_0x59cfe7['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x59cfe7['name'],'promotedBy':_0x49de66['email']||'admin','gameMode':_0x3aeaa3});try{const {promotionManager:_0x17a4ec}=await import(_0x4390d3(0x264)),_0xac91b9=_0x17a4ec['getRankName'](_0x11541c),_0x2b4d02=_0x59cfe7['name'];await _0x17a4ec[_0x4390d3(0x2fd)](_0x220381,_0x1cbe26,_0x11541c,_0x59cfe7['elo'],_0xac91b9,_0x2b4d02,'promotion',{'displayName':_0x1cbe26,'source':'admin','adminUser':_0x49de66[_0x4390d3(0xe8)],'ladder':_0x3aeaa3}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x2e7b0e){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x2e7b0e);}return alert(_0x4390d3(0x199)+_0x1cbe26+'\x20to\x20'+_0x59cfe7['name']+'\x20('+_0x59cfe7[_0x4390d3(0x286)]+')'),currentLadder===_0x3aeaa3&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x41fb64){console['error']('Error\x20promoting\x20player:',_0x41fb64),alert(_0x4390d3(0x261)+_0x41fb64['message']);throw _0x41fb64;}}document[a4_0x1fd11d(0x29e)]('DOMContentLoaded',()=>{const _0x2a2ad5=document['getElementById']('promote-form');_0x2a2ad5&&_0x2a2ad5['addEventListener']('submit',async _0x27a159=>{const _0x1a5972=a4_0x343e;_0x27a159['preventDefault']();const _0x270ba1=document[_0x1a5972(0x1e2)]('promote-username')['value']['trim'](),_0x2fa180=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x270ba1){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x270ba1,_0x2fa180),document[_0x1a5972(0x1e2)]('promote-modal')[_0x1a5972(0x157)]['remove']('active'),document[_0x1a5972(0x1e2)]('promote-username')['value']='';}catch(_0x4d05cd){console['error'](_0x1a5972(0x249),_0x4d05cd);}});});async function demotePlayer(_0x2a8cb2,_0x1533c1){const _0x43ca77=a4_0x1fd11d;try{console['log']('Attempting\x20to\x20demote\x20'+_0x2a8cb2+_0x43ca77(0x2c5)+_0x1533c1+'\x20ladder');const _0x129abc=auth['currentUser'];if(!_0x129abc)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x3aa3f5=_0x1533c1==='D2'?'playersD2':'players',_0x2e2510=_0x1533c1==='D2'?'eloHistoryD2':'eloHistory';console['log'](_0x43ca77(0x26f)+_0x3aa3f5);const _0x485659=collection(db,_0x3aa3f5),_0x58b686=query(_0x485659,where('username','==',_0x2a8cb2)),_0xe416bb=await getDocs(_0x58b686);if(_0xe416bb[_0x43ca77(0x2f6)]){alert(_0x43ca77(0xc4)+_0x1533c1+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x1533c1+'\x20ladder');}const _0x30abe4=_0xe416bb['docs'][0x0],_0x1d58a7=_0x30abe4[_0x43ca77(0xc8)](),_0x6782ac=_0x1d58a7['eloRating']||0x4b0;console['log'](_0x43ca77(0x265)+_0x6782ac);const _0x3a6877=[{'name':_0x43ca77(0x253),'elo':0x708},{'name':_0x43ca77(0x12b),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x3f4f19=_0x3a6877['find'](_0x42d6b1=>_0x42d6b1['elo']<_0x6782ac);if(!_0x3f4f19){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x1533c1+'\x20ladder');throw new Error(_0x43ca77(0x17d)+_0x1533c1+'\x20ladder');}console['log'](_0x43ca77(0x22c)+_0x3f4f19[_0x43ca77(0x185)]+'\x20('+_0x3f4f19['elo']+')'),await updateDoc(doc(db,_0x3aa3f5,_0x30abe4['id']),{'eloRating':_0x3f4f19['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x129abc['email']||'admin'}),await addDoc(collection(db,_0x2e2510),{'player':_0x2a8cb2,'previousElo':_0x6782ac,'newElo':_0x3f4f19['elo'],'timestamp':serverTimestamp(),'type':_0x43ca77(0x1be),'rankAchieved':_0x3f4f19['name'],'demotedBy':_0x129abc[_0x43ca77(0xe8)]||'admin','gameMode':_0x1533c1});try{const {promotionManager:_0x40c9cd}=await import('./promotions.js'),_0x17ab35=_0x40c9cd['getRankName'](_0x6782ac),_0x3ccdbc=_0x3f4f19[_0x43ca77(0x185)];await _0x40c9cd[_0x43ca77(0x2fd)](_0x30abe4['id'],_0x2a8cb2,_0x6782ac,_0x3f4f19['elo'],_0x17ab35,_0x3ccdbc,'demotion',{'displayName':_0x2a8cb2,'source':_0x43ca77(0x195),'adminUser':_0x129abc['email'],'ladder':_0x1533c1}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x12b2e5){console[_0x43ca77(0x100)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x12b2e5);}return alert('Successfully\x20demoted\x20'+_0x2a8cb2+_0x43ca77(0x293)+_0x3f4f19['name']+'\x20('+_0x3f4f19['elo']+')'),currentLadder===_0x1533c1&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x245e27){console['error'](_0x43ca77(0x2ba),_0x245e27),alert(_0x43ca77(0x129)+_0x245e27['message']);throw _0x245e27;}}document['addEventListener'](a4_0x1fd11d(0x2e6),()=>{const _0x19f170=a4_0x1fd11d,_0x30c01e=document['getElementById']('demote-form');_0x30c01e&&_0x30c01e['addEventListener'](_0x19f170(0x1e5),async _0x5f2bcc=>{const _0x271f80=_0x19f170;_0x5f2bcc['preventDefault']();const _0x19e4d1=document['getElementById'](_0x271f80(0x1b1))['value']['trim'](),_0x5dd860=document[_0x271f80(0x2eb)]('input[name=\x22demote-ladder\x22]:checked')[_0x271f80(0x2e0)];if(!_0x19e4d1){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x19e4d1,_0x5dd860),document[_0x271f80(0x1e2)](_0x271f80(0x20e))[_0x271f80(0x157)]['remove']('active'),document['getElementById']('demote-username')[_0x271f80(0x2e0)]='';}catch(_0xab4988){console['error']('Error\x20in\x20demotion:',_0xab4988);}});});async function setCustomElo(_0x2899ad,_0x478eeb,_0x5170a4){const _0x45cef8=a4_0x1fd11d;try{const _0x468968=auth['currentUser'];if(!_0x468968||!isAdmin(_0x468968[_0x45cef8(0xe8)]))throw new Error(_0x45cef8(0xd2));const _0x442ebc=_0x5170a4==='D2'?'playersD2':_0x45cef8(0x2c8),_0x30279f=_0x5170a4==='D2'?'eloHistoryD2':_0x45cef8(0x2d9),_0x4669aa=collection(db,_0x442ebc),_0x52e88b=query(_0x4669aa,where('username','==',_0x2899ad)),_0x3d6d67=await getDocs(_0x52e88b);if(_0x3d6d67['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x5170a4+'\x20ladder');const _0x1ef7e0=_0x3d6d67['docs'][0x0],_0x28cff7=_0x1ef7e0['data'](),_0xad41c9=_0x28cff7[_0x45cef8(0x16c)]||0x4b0,_0x54fdea=writeBatch(db);_0x54fdea['update'](doc(db,_0x442ebc,_0x1ef7e0['id']),{'eloRating':_0x478eeb,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x468968[_0x45cef8(0xe8)]});const _0x3b4548=doc(collection(db,_0x30279f));return _0x54fdea['set'](_0x3b4548,{'player':_0x2899ad,'previousElo':_0xad41c9,'newElo':_0x478eeb,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x468968['email'],'gameMode':_0x5170a4}),await _0x54fdea['commit'](),showNotification(_0x45cef8(0x22e)+_0x2899ad+'\x20was\x20updated\x20from\x20'+_0xad41c9+'\x20to\x20'+_0x478eeb,_0x45cef8(0x26c)),currentLadder===_0x5170a4&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x11dd1f){console['error']('Error\x20setting\x20custom\x20ELO:',_0x11dd1f);throw _0x11dd1f;}}async function setUserRole(_0x5597c9,_0x52978a,_0x428526){const _0x3ece2c=a4_0x1fd11d;try{const _0x53d5f8=auth[_0x3ece2c(0xcc)];if(!_0x53d5f8||!isAdmin(_0x53d5f8['email']))throw new Error(_0x3ece2c(0xd2));const _0x5a44d6=_0x52978a?_0x52978a[_0x3ece2c(0x25c)]():null,_0x16ead6=_0x5a44d6?_0x428526||'#808080':null,[_0x52be3d,_0x446701]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x5597c9))),getDocs(query(collection(db,_0x3ece2c(0x1f7)),where(_0x3ece2c(0x10c),'==',_0x5597c9)))]),_0x2e808a=[];if(!_0x52be3d['empty'])_0x2e808a['push']({'ref':_0x52be3d['docs'][0x0]['ref'],'source':'D1'});if(!_0x446701['empty'])_0x2e808a['push']({'ref':_0x446701['docs'][0x0]['ref'],'source':'D2'});if(_0x2e808a[_0x3ece2c(0x116)]===0x0){const [_0x43100b,_0x125bbe]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x5597c9))),getDocs(query(collection(db,'userProfiles'),where(_0x3ece2c(0x10c),'==',_0x5597c9)))]);if(!_0x43100b['empty'])_0x2e808a[_0x3ece2c(0x269)]({'ref':_0x43100b['docs'][0x0][_0x3ece2c(0x135)],'source':'NonParticipant'});if(!_0x125bbe['empty'])_0x2e808a['push']({'ref':_0x125bbe['docs'][0x0]['ref'],'source':_0x3ece2c(0x2d7)});}if(_0x2e808a['length']===0x0)throw new Error(_0x3ece2c(0xd5)+_0x5597c9+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x48c46e=writeBatch(db);_0x2e808a['forEach'](_0x19fbc4=>{const _0x1b402d=_0x3ece2c;console['log']('Updating\x20role\x20for\x20'+_0x5597c9+_0x1b402d(0x2c5)+_0x19fbc4['source']),!_0x5a44d6?_0x48c46e[_0x1b402d(0x145)](_0x19fbc4['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x48c46e['update'](_0x19fbc4['ref'],{'roleName':_0x5a44d6,'roleColor':_0x16ead6,'roleAssignedBy':_0x53d5f8['email'],'roleAssignedAt':serverTimestamp()});}),await _0x48c46e['commit']();const _0x1dbeda=_0x5a44d6?_0x3ece2c(0x146)+_0x5a44d6+'\x22\x20set':'Role\x20removed';return showNotification(_0x1dbeda+'\x20for\x20user\x20\x22'+_0x5597c9+'\x22','success'),!![];}catch(_0x4bc5f7){console['error']('Error\x20setting\x20user\x20role:',_0x4bc5f7),showNotification('Error:\x20'+_0x4bc5f7['message'],'error');throw _0x4bc5f7;}}function showNotification(_0x37417b,_0x9cff5b='info'){const _0x51a036=a4_0x1fd11d,_0x1a8250=document['createElement'](_0x51a036(0x30c));_0x1a8250[_0x51a036(0x206)]=_0x51a036(0x12e)+_0x9cff5b,_0x1a8250['innerHTML']=_0x51a036(0x1a0)+getNotificationIcon(_0x9cff5b)+_0x51a036(0x256)+_0x37417b+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x1a8250),setTimeout(()=>{_0x1a8250['classList']['add']('active');},0xa);const _0x412cea=setTimeout(()=>{closeNotification(_0x1a8250);},0x1388);_0x1a8250['querySelector']('.close-notification')[_0x51a036(0x29e)]('click',()=>{clearTimeout(_0x412cea),closeNotification(_0x1a8250);});}function getNotificationIcon(_0x21ab0d){const _0x29c776=a4_0x1fd11d;switch(_0x21ab0d){case _0x29c776(0x26c):return'fa-check-circle';case'error':return _0x29c776(0x16f);case'warning':return'fa-exclamation-triangle';case _0x29c776(0x18c):default:return'fa-info-circle';}}function closeNotification(_0x352b77){const _0x23d0f4=a4_0x1fd11d;_0x352b77[_0x23d0f4(0x157)][_0x23d0f4(0x11f)]('active'),setTimeout(()=>{_0x352b77['remove']();},0x12c);}function setupUserRolesSection(){const _0x2cafc4=a4_0x1fd11d,_0x58da6f=document['getElementById']('load-users-data');_0x58da6f&&_0x58da6f['addEventListener'](_0x2cafc4(0x1ed),function(){const _0x19afff=_0x2cafc4;this[_0x19afff(0x157)]['add'](_0x19afff(0x182)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x10404f=_0x19afff;this['classList'][_0x10404f(0x11f)](_0x10404f(0x182)),this['innerHTML']=_0x10404f(0x2a2);})[_0x19afff(0x246)](_0x10fa4a=>{const _0x15969a=_0x19afff;console['error']('Error\x20loading\x20users:',_0x10fa4a),this['classList']['remove'](_0x15969a(0x182)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x5c4b3a=document['getElementById'](_0x2cafc4(0xec));_0x5c4b3a&&_0x5c4b3a['addEventListener']('click',()=>{const _0x42bd88=_0x2cafc4,_0x10ca19=document['getElementById']('set-role-modal');_0x10ca19&&_0x10ca19[_0x42bd88(0x157)]['add']('active');});const _0xaef31f=document[_0x2cafc4(0x1e2)]('user-search');_0xaef31f&&_0xaef31f['addEventListener'](_0x2cafc4(0x222),debounce(filterUsersTable,0x12c));const _0x3f72ed=document['getElementById']('role-filter');_0x3f72ed&&_0x3f72ed[_0x2cafc4(0x29e)]('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x9a1bf6=a4_0x1fd11d,_0x18f584=document[_0x9a1bf6(0x1e2)](_0x9a1bf6(0x24d));if(!_0x18f584)return;_0x18f584[_0x9a1bf6(0xcb)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x5cf481,_0x25f71c,_0x2a141c,_0x3ee217]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x5b683b=new Map();function _0x421a2c(_0x5624d8,_0x38e9cc){_0x5624d8['forEach'](_0x3003df=>{const _0x423e90=a4_0x343e,_0x1bd435=_0x3003df['data']();if(!_0x1bd435[_0x423e90(0x10c)])return;if(!_0x5b683b[_0x423e90(0x247)](_0x1bd435[_0x423e90(0x10c)]))_0x5b683b['set'](_0x1bd435[_0x423e90(0x10c)],{'username':_0x1bd435[_0x423e90(0x10c)],'roleName':_0x1bd435[_0x423e90(0x27f)]||null,'roleColor':_0x1bd435[_0x423e90(0xe6)]||null,'roleAssignedBy':_0x1bd435['roleAssignedBy']||null,'roleAssignedAt':_0x1bd435['roleAssignedAt']||null,'sources':[_0x38e9cc]});else{const _0x3972f8=_0x5b683b[_0x423e90(0x2e1)](_0x1bd435['username']);_0x1bd435['roleName']&&(!_0x3972f8['roleName']||_0x38e9cc==='D1'||_0x38e9cc==='D2')&&(_0x3972f8['roleName']=_0x1bd435['roleName'],_0x3972f8['roleColor']=_0x1bd435[_0x423e90(0xe6)],_0x3972f8[_0x423e90(0x22f)]=_0x1bd435['roleAssignedBy'],_0x3972f8['roleAssignedAt']=_0x1bd435['roleAssignedAt']),!_0x3972f8['sources'][_0x423e90(0x1f5)](_0x38e9cc)&&_0x3972f8['sources']['push'](_0x38e9cc);}});}_0x421a2c(_0x5cf481,'D1'),_0x421a2c(_0x25f71c,'D2'),_0x421a2c(_0x2a141c,'Non-Participant'),_0x421a2c(_0x3ee217,'Profile');const _0x5c2010=Array['from'](_0x5b683b[_0x9a1bf6(0x1c5)]())['sort']((_0x183359,_0x1e5485)=>_0x183359['username'][_0x9a1bf6(0x11b)](_0x1e5485[_0x9a1bf6(0x10c)]));if(_0x5c2010['length']===0x0){_0x18f584['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x18f584[_0x9a1bf6(0xcb)]='',_0x5c2010['forEach'](_0x446d85=>{const _0x13e6b5=_0x9a1bf6,_0x423b6c=document['createElement']('tr');_0x423b6c[_0x13e6b5(0x305)]['username']=_0x446d85[_0x13e6b5(0x10c)],_0x423b6c['dataset'][_0x13e6b5(0x27f)]=_0x446d85['roleName']||'',_0x423b6c['dataset'][_0x13e6b5(0xe6)]=_0x446d85['roleColor']||_0x13e6b5(0xd4);const _0x1cf3cd=_0x446d85['roleAssignedAt']?new Date(_0x446d85[_0x13e6b5(0x25a)][_0x13e6b5(0xd3)]*0x3e8)['toLocaleDateString']():_0x13e6b5(0x274),_0x96e8e6=_0x446d85['roleName']?_0x13e6b5(0x1d4)+_0x446d85['roleColor']+_0x13e6b5(0x15f)+getContrastColor(_0x446d85[_0x13e6b5(0xe6)])+';\x22>'+_0x446d85[_0x13e6b5(0x27f)]+'</span>':_0x13e6b5(0x2da);_0x423b6c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x446d85['username']+_0x13e6b5(0x311)+_0x446d85[_0x13e6b5(0x216)][_0x13e6b5(0x128)](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x96e8e6+_0x13e6b5(0xed)+(_0x446d85[_0x13e6b5(0x22f)]||'N/A')+_0x13e6b5(0xed)+_0x1cf3cd+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x446d85['username']+_0x13e6b5(0x1ac)+(_0x446d85[_0x13e6b5(0x27f)]?_0x13e6b5(0x245)+_0x446d85['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x18f584['appendChild'](_0x423b6c);}),document['querySelectorAll'](_0x9a1bf6(0x254))['forEach'](_0x192cac=>{_0x192cac['addEventListener']('click',()=>{const _0x990b7b=_0x192cac['dataset']['username'];openRoleEditModal(_0x990b7b);});}),document['querySelectorAll'](_0x9a1bf6(0xe0))[_0x9a1bf6(0x31d)](_0xb7e5b5=>{_0xb7e5b5['addEventListener']('click',()=>{const _0x2d55a8=a4_0x343e,_0x578ce9=_0xb7e5b5[_0x2d55a8(0x305)]['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x578ce9+'?')&&setUserRole(_0x578ce9,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x249b3d=>console['error']('Error\x20removing\x20role:',_0x249b3d));});});}catch(_0x3a53d1){console[_0x9a1bf6(0x100)]('Error\x20loading\x20users:',_0x3a53d1),_0x18f584[_0x9a1bf6(0xcb)]=_0x9a1bf6(0x273);}}function openRoleEditModal(_0x22fe24){const _0x1618cb=a4_0x1fd11d;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x22fe24);const _0x4a44ca=document['getElementById'](_0x1618cb(0x1b7)),_0x37f2c7=document[_0x1618cb(0x1e2)]('role-username'),_0x5658d8=document[_0x1618cb(0x1e2)](_0x1618cb(0x2bc));if(!_0x4a44ca){console['error'](_0x1618cb(0x2ef)),alert(_0x1618cb(0x2ca));return;}console['log'](_0x1618cb(0x2a7),_0x4a44ca);_0x37f2c7?(_0x37f2c7['value']=_0x22fe24,console['log']('Username\x20input\x20set\x20to:\x20'+_0x22fe24)):console['warn'](_0x1618cb(0x115));const _0x29e7b4=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x22fe24+'\x22]');if(_0x29e7b4&&_0x5658d8){const _0x3ecc7e=_0x29e7b4[_0x1618cb(0x305)]['role'];_0x5658d8['value']=_0x3ecc7e===_0x1618cb(0x1c4)?'':_0x3ecc7e,console[_0x1618cb(0xca)](_0x1618cb(0x31f)+_0x5658d8[_0x1618cb(0x2e0)]+'\x20(based\x20on\x20data-role:\x20'+_0x3ecc7e+')');}else{if(!_0x29e7b4)console['warn']('Table\x20row\x20for\x20user\x20'+_0x22fe24+'\x20not\x20found.');if(!_0x5658d8)console[_0x1618cb(0x18a)]('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x5658d8)_0x5658d8[_0x1618cb(0x2e0)]='';}console[_0x1618cb(0xca)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x4a44ca['classList']['add']('active');const _0xa6459b=document[_0x1618cb(0x1e2)](_0x1618cb(0x11d));_0xa6459b?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0xa6459b[_0x1618cb(0x313)]('click',closeModalHandler),_0xa6459b['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x4a44ca['removeEventListener']('click',closeModalBackgroundHandler),_0x4a44ca['addEventListener'](_0x1618cb(0x1ed),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x139af6){const _0x48e286=a4_0x1fd11d;_0x139af6[_0x48e286(0x2d8)]===this&&closeModalHandler();}function closeModalHandler(){const _0x36d191=a4_0x1fd11d,_0x3cf63b=document['getElementById'](_0x36d191(0x1b7));_0x3cf63b&&(_0x3cf63b['classList']['remove'](_0x36d191(0x212)),_0x3cf63b['removeEventListener'](_0x36d191(0x1ed),closeModalBackgroundHandler));}function filterUsersTable(){const _0x3648f1=a4_0x1fd11d,_0x216969=document['getElementById']('user-search')?.['value']['toLowerCase']()||'',_0x1ad86a=document['getElementById']('role-filter')?.['value']||'all',_0x6a7e82=document[_0x3648f1(0x117)](_0x3648f1(0xfd));let _0x1c2aca=0x0;_0x6a7e82['forEach'](_0x7eb156=>{const _0x433f41=_0x3648f1;if(_0x7eb156['querySelector']('.loading-cell')||_0x7eb156['querySelector']('.empty-state')||_0x7eb156[_0x433f41(0x2eb)]('.error-state'))return;const _0xb1b379=_0x7eb156['dataset']['username']?.['toLowerCase']()||'',_0x5f48fb=_0x7eb156['dataset']['role']||'none',_0x29d7a1=_0xb1b379['includes'](_0x216969),_0x2e897e=_0x1ad86a===_0x433f41(0x316)||_0x5f48fb===_0x1ad86a;_0x29d7a1&&_0x2e897e?(_0x7eb156['style']['display']='',_0x1c2aca++):_0x7eb156[_0x433f41(0x29d)]['display']=_0x433f41(0x1c4);});if(_0x1c2aca===0x0&&_0x6a7e82[_0x3648f1(0x116)]>0x0){const _0x1c783b=document[_0x3648f1(0x1e2)](_0x3648f1(0x24d));if(_0x1c783b){if(!_0x1c783b['querySelector']('.no-results')){const _0x2a57be=document['createElement']('tr');_0x2a57be['classList']['add']('no-results'),_0x2a57be['innerHTML']=_0x3648f1(0x1d2),_0x1c783b['appendChild'](_0x2a57be);}}}else{const _0x50d2e7=document['querySelector']('.no-results');_0x50d2e7&&_0x50d2e7['remove']();}}function setupManageArticlesSection(){const _0x3bf3e5=a4_0x1fd11d,_0x398a5a=document[_0x3bf3e5(0x1e2)](_0x3bf3e5(0x2ff));_0x398a5a&&_0x398a5a[_0x3bf3e5(0x29e)]('click',function(){const _0x2bb4eb=_0x3bf3e5;this[_0x2bb4eb(0x157)]['add']('loading'),this['innerHTML']=_0x2bb4eb(0x190),loadArticles()[_0x2bb4eb(0x29b)](()=>{const _0xc18a79=_0x2bb4eb;this['classList'][_0xc18a79(0x11f)]('loading'),this['innerHTML']=_0xc18a79(0x24e);})['catch'](_0x5dccf2=>{const _0x47bc7a=_0x2bb4eb;console[_0x47bc7a(0x100)]('Error\x20loading\x20articles:',_0x5dccf2),this[_0x47bc7a(0x157)]['remove'](_0x47bc7a(0x182)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x2fc156=document[_0x3bf3e5(0x1e2)]('create-new-article-btn');_0x2fc156?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x2fc156['style'][_0x3bf3e5(0x28b)]=_0x3bf3e5(0x255),_0x2fc156['addEventListener']('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x43a488=document['getElementById']('article-form');_0x43a488&&_0x43a488[_0x3bf3e5(0x29e)]('submit',_0x3f7c64=>{const _0x19fa84=_0x3bf3e5;_0x3f7c64[_0x19fa84(0x13f)](),saveArticle();});const _0x432ca8=document['getElementById']('cancel-article-btn');_0x432ca8&&_0x432ca8[_0x3bf3e5(0x29e)](_0x3bf3e5(0x1ed),()=>{closeArticleModal();});const _0x4d419b=document['querySelector']('#article-modal\x20.close-btn');_0x4d419b&&_0x4d419b[_0x3bf3e5(0x29e)]('click',()=>{closeArticleModal();});const _0x3e6345=document[_0x3bf3e5(0x1e2)]('article-modal');_0x3e6345&&_0x3e6345['addEventListener']('click',_0x83f552=>{_0x83f552['target']===_0x3e6345&&closeArticleModal();});}async function loadArticles(){const _0x3eedd4=a4_0x1fd11d,_0x4cfa13=document['getElementById'](_0x3eedd4(0x243));if(!_0x4cfa13)return;_0x4cfa13['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x4fe07a=collection(db,_0x3eedd4(0x308)),_0xa723a=query(_0x4fe07a,orderBy('createdAt','desc')),_0x4b2faf=await getDocs(_0xa723a);if(_0x4b2faf['empty']){_0x4cfa13['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x4cfa13['innerHTML']='',_0x4b2faf['forEach'](_0x1b87ce=>{const _0x4cb709=_0x3eedd4,_0x97ab8a=_0x1b87ce['data'](),_0x1eacaf=document['createElement']('tr'),_0x2a989b=_0x97ab8a['createdAt']?new Date(_0x97ab8a[_0x4cb709(0x21c)][_0x4cb709(0xd3)]*0x3e8)['toLocaleString']():'N/A';_0x1eacaf['innerHTML']=_0x4cb709(0x1b5)+(_0x97ab8a['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x97ab8a['author']||_0x4cb709(0x120))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a989b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x1b87ce['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x1b87ce['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4cfa13[_0x4cb709(0x2f5)](_0x1eacaf);}),setupArticleActionButtons();}catch(_0x553ab4){console[_0x3eedd4(0x100)]('Error\x20loading\x20articles:',_0x553ab4),_0x4cfa13['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x553ab4['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){document['querySelectorAll']('.edit-article-btn')['forEach'](_0x249a0f=>{_0x249a0f['addEventListener']('click',async _0x419130=>{const _0x57a9d9=_0x419130['currentTarget']['dataset']['id'];openArticleModal(_0x57a9d9);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x222d9f=>{const _0x54ea40=a4_0x343e;_0x222d9f[_0x54ea40(0x29e)]('click',async _0x89cc9f=>{const _0x274717=_0x89cc9f['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x274717);});});}function openArticleModal(_0x248bbe=null){const _0x3e06db=a4_0x1fd11d,_0x2b6872=document['getElementById']('article-modal'),_0x1dcf82=document[_0x3e06db(0x1e2)]('article-modal-title'),_0x1c7146=document['getElementById'](_0x3e06db(0x230)),_0x3275dd=document[_0x3e06db(0x1e2)](_0x3e06db(0x1b0));_0x1c7146['reset'](),_0x3275dd['value']='';if(_0x248bbe)_0x1dcf82['textContent']='Edit\x20Article',_0x3275dd['value']=_0x248bbe,loadArticleData(_0x248bbe);else{_0x1dcf82[_0x3e06db(0x1c2)]=_0x3e06db(0x166);const _0x3c601d=auth['currentUser'];if(_0x3c601d){const _0x358c69=document[_0x3e06db(0x1e2)]('article-author');if(_0x358c69&&_0x3c601d['displayName'])_0x358c69[_0x3e06db(0x2e0)]=_0x3c601d[_0x3e06db(0x224)];else _0x358c69&&(_0x358c69['value']=_0x3c601d[_0x3e06db(0xe8)]);}}_0x2b6872['classList'][_0x3e06db(0x1d5)]('active');}async function loadArticleData(_0x21c3ca){const _0x197997=a4_0x1fd11d;try{const _0x59c638=doc(db,_0x197997(0x308),_0x21c3ca),_0x5bc56d=await getDoc(_0x59c638);if(!_0x5bc56d[_0x197997(0x24a)]()){showNotification('Article\x20not\x20found',_0x197997(0x100));return;}const _0x71083f=_0x5bc56d['data']();document['getElementById'](_0x197997(0x2d5))['value']=_0x71083f[_0x197997(0xcd)]||'',document['getElementById']('article-author')[_0x197997(0x2e0)]=_0x71083f['author']||'',document['getElementById']('article-image-url')[_0x197997(0x2e0)]=_0x71083f[_0x197997(0x1f9)]||'',document['getElementById']('article-content')[_0x197997(0x2e0)]=_0x71083f[_0x197997(0x168)]||'';}catch(_0x5a4980){console['error'](_0x197997(0x237),_0x5a4980),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x262165=a4_0x1fd11d;try{const _0x35122b=document['getElementById'](_0x262165(0x1b0))[_0x262165(0x2e0)],_0x1dee72=document[_0x262165(0x1e2)](_0x262165(0x2d5))['value'][_0x262165(0x25c)](),_0x4116d6=document['getElementById']('article-author')['value']['trim'](),_0x21879f=document['getElementById']('article-image-url')[_0x262165(0x2e0)]['trim'](),_0x1956ff=document['getElementById']('article-content')['value']['trim']();if(!_0x1dee72||!_0x1956ff){showNotification('Title\x20and\x20content\x20are\x20required',_0x262165(0x100));return;}const _0x17dc19=auth['currentUser'];if(!_0x17dc19){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x286735={'title':_0x1dee72,'author':_0x4116d6,'imageUrl':_0x21879f||null,'content':_0x1956ff,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x17dc19[_0x262165(0xe8)]};!_0x35122b?(_0x286735['createdAt']=serverTimestamp(),_0x286735['createdBy']=_0x17dc19['email'],await addDoc(collection(db,'articles'),_0x286735),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x35122b),_0x286735),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x2510cc){console['error']('Error\x20saving\x20article:',_0x2510cc),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x2510cc['message'],'error');}}function closeArticleModal(){const _0x2bf201=a4_0x1fd11d,_0x2f53f7=document[_0x2bf201(0x1e2)](_0x2bf201(0x184));_0x2f53f7&&_0x2f53f7[_0x2bf201(0x157)]['remove'](_0x2bf201(0x212));}async function confirmDeleteArticle(_0x83df1a){const _0x3e3b02=a4_0x1fd11d;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x83df1a)),loadArticles(),showNotification(_0x3e3b02(0x10d),_0x3e3b02(0x26c));}catch(_0x43c333){console['error']('Error\x20deleting\x20article:',_0x43c333),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x43c333['message'],'error');}}function setupTrophyManagementSection(){const _0x349103=a4_0x1fd11d,_0x205fe3=document['getElementById'](_0x349103(0x140));_0x205fe3&&_0x205fe3['addEventListener']('click',function(){const _0x4a5da0=_0x349103;this['classList']['add'](_0x4a5da0(0x182)),this['innerHTML']=_0x4a5da0(0x190);const _0x5f3acd=document['getElementById']('assign-trophy-image');_0x5f3acd&&(_0x5f3acd['onerror']=function(){const _0x143b98=_0x4a5da0;this[_0x143b98(0x25b)]=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x17785b=_0x4a5da0;this[_0x17785b(0x157)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x1e4fa1=>{const _0x47244f=_0x4a5da0;console['error'](_0x47244f(0x1a3),_0x1e4fa1),this[_0x47244f(0x157)][_0x47244f(0x11f)](_0x47244f(0x182)),this[_0x47244f(0xcb)]=_0x47244f(0x215),setTimeout(()=>{const _0x245c2e=_0x47244f;this[_0x245c2e(0xcb)]=_0x245c2e(0x172);},0xbb8);});});const _0x114d96=document['getElementById'](_0x349103(0x17e));_0x114d96&&_0x114d96['addEventListener']('click',()=>{openTrophyModal();});const _0x1c1d16=document['getElementById'](_0x349103(0x309));_0x1c1d16&&_0x1c1d16['addEventListener'](_0x349103(0x1e5),_0x845921=>{_0x845921['preventDefault'](),saveTrophyDefinition();});const _0x197d79=document[_0x349103(0x1e2)](_0x349103(0x2d4));_0x197d79&&_0x197d79[_0x349103(0x29e)]('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x15533d=>{_0x15533d['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x15feed=document['getElementById']('trophy-modal');_0x15feed&&_0x15feed['addEventListener']('click',_0x3f3e88=>{_0x3f3e88['target']===_0x15feed&&closeTrophyModal();});const _0x179b3b=document[_0x349103(0x1e2)]('assign-trophy-modal');_0x179b3b&&_0x179b3b[_0x349103(0x29e)]('click',_0x551ce3=>{_0x551ce3['target']===_0x179b3b&&closeAssignTrophyModal();});const _0x59c4a5=document[_0x349103(0x1e2)](_0x349103(0x2de));_0x59c4a5&&_0x59c4a5['addEventListener'](_0x349103(0x1e5),_0x2eeaed=>{_0x2eeaed['preventDefault'](),assignTrophyToPlayer();});const _0xc2cd0=document[_0x349103(0x1e2)]('cancel-assign-btn');_0xc2cd0&&_0xc2cd0[_0x349103(0x29e)]('click',()=>{closeAssignTrophyModal();});const _0x1cd23c=document['getElementById']('trophy-image-url');_0x1cd23c&&(_0x1cd23c['addEventListener'](_0x349103(0x222),updateTrophyImagePreview),_0x1cd23c['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x5e015a=a4_0x1fd11d,_0x5a9b7a=document['getElementById']('trophy-image-url')['value']['trim'](),_0x303b7a=document[_0x5e015a(0x1e2)]('trophy-image-preview');if(!_0x303b7a){const _0x543dbd=document[_0x5e015a(0x1e2)](_0x5e015a(0x161))['closest']('.form-group'),_0x269030=document['createElement']('div');_0x269030['id']='trophy-image-preview',_0x269030['className']='trophy-preview-container',_0x543dbd['appendChild'](_0x269030);const _0x27f425=document['createElement'](_0x5e015a(0x17c));_0x27f425['id']='trophy-preview-img',_0x27f425['alt']='Trophy\x20Preview',_0x27f425['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x269030['appendChild'](_0x27f425);}const _0x1d5606=document['getElementById']('trophy-preview-img');_0x5a9b7a?(_0x1d5606['src']=_0x5a9b7a,_0x1d5606['style']['display']='block',_0x1d5606[_0x5e015a(0x157)]['remove']('error')):(_0x1d5606['src']=DEFAULT_TROPHY_IMAGE,_0x1d5606['style'][_0x5e015a(0x28b)]='block');}async function loadTrophyDefinitions(){const _0x339762=a4_0x1fd11d,_0x16582b=document['getElementById']('trophies-table-body');if(!_0x16582b)return;_0x16582b[_0x339762(0xcb)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x5cd777=collection(db,'trophyDefinitions'),_0x29b517=query(_0x5cd777,orderBy(_0x339762(0x21c),_0x339762(0x183))),_0x529cda=await getDocs(_0x29b517);if(_0x529cda[_0x339762(0x2f6)]){_0x16582b[_0x339762(0xcb)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x16582b['innerHTML']='',_0x529cda['forEach'](_0x1121ce=>{const _0x1a0726=_0x339762,_0x1d61af=_0x1121ce['data'](),_0x3c8d96=document[_0x1a0726(0x2ec)]('tr'),_0x56a469=_0x1d61af['createdAt']?new Date(_0x1d61af['createdAt'][_0x1a0726(0xd3)]*0x3e8)['toLocaleString']():_0x1a0726(0x274);_0x3c8d96['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x1d61af[_0x1a0726(0x27a)]||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x1d61af['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+_0x1a0726(0x143)+(_0x1d61af['name']||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x1d61af['rarity']||_0x1a0726(0x17f))+'\x22>'+(_0x1d61af['rarity']||_0x1a0726(0x17f))+_0x1a0726(0x208)+_0x56a469+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x1121ce['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x1121ce['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x1121ce['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x16582b['appendChild'](_0x3c8d96);}),setupTrophyActionButtons();}catch(_0x39dadd){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x39dadd),_0x16582b[_0x339762(0xcb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x39dadd[_0x339762(0x125)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x200d73=a4_0x1fd11d;document['querySelectorAll'](_0x200d73(0x104))['forEach'](_0xa60fb2=>{const _0x579862=_0x200d73;_0xa60fb2['addEventListener'](_0x579862(0x1ed),_0xab1325=>{const _0x56ace7=_0x579862,_0x4c3344=_0xab1325['currentTarget'][_0x56ace7(0x305)]['id'];openTrophyModal(_0x4c3344);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x322362=>{_0x322362['addEventListener']('click',_0x10766c=>{const _0x4d6cdc=_0x10766c['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x4d6cdc);});}),document['querySelectorAll']('.delete-trophy-btn')[_0x200d73(0x31d)](_0x184c59=>{const _0x81cf05=_0x200d73;_0x184c59['addEventListener'](_0x81cf05(0x1ed),_0x30f3d7=>{const _0x37282c=_0x30f3d7['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x37282c);});});}function openTrophyModal(_0x45d0bb=null){const _0x5c524f=a4_0x1fd11d,_0x53fc16=document['getElementById']('trophy-modal'),_0x582354=document['getElementById'](_0x5c524f(0x1c7)),_0x427c89=document['getElementById'](_0x5c524f(0x309)),_0x1c59d7=document[_0x5c524f(0x1e2)]('trophy-id');_0x427c89[_0x5c524f(0x2dd)](),_0x1c59d7['value']='';const _0xba58f3=document['getElementById']('trophy-preview-img');_0xba58f3&&(_0xba58f3['src']=DEFAULT_TROPHY_IMAGE,_0xba58f3[_0x5c524f(0x157)]['remove'](_0x5c524f(0x100))),_0x45d0bb?(_0x582354['textContent']='Edit\x20Trophy',_0x1c59d7['value']=_0x45d0bb,loadTrophyData(_0x45d0bb)):_0x582354['textContent']='Create\x20New\x20Trophy',_0x53fc16['classList']['add'](_0x5c524f(0x212));}async function loadTrophyData(_0x5048bb){const _0x2eb21=a4_0x1fd11d;try{const _0x33b65b=doc(db,'trophyDefinitions',_0x5048bb),_0x2b8c6d=await getDoc(_0x33b65b);if(!_0x2b8c6d['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x4fddfb=_0x2b8c6d['data']();document['getElementById']('trophy-name')['value']=_0x4fddfb['name']||'',document[_0x2eb21(0x1e2)]('trophy-description')['value']=_0x4fddfb[_0x2eb21(0x2e2)]||'',document['getElementById']('trophy-image-url')[_0x2eb21(0x2e0)]=_0x4fddfb['image']||'',document['getElementById']('trophy-rarity')[_0x2eb21(0x2e0)]=_0x4fddfb['rarity']||'common',updateTrophyImagePreview();}catch(_0x554770){console['error']('Error\x20loading\x20trophy\x20data:',_0x554770),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x47c267=a4_0x1fd11d;try{const _0x5b7f8a=document['getElementById'](_0x47c267(0x17a))['value'],_0x186887=document['getElementById'](_0x47c267(0x327))['value']['trim'](),_0x55fa96=document[_0x47c267(0x1e2)]('trophy-description')['value']['trim'](),_0x27e1c5=document[_0x47c267(0x1e2)]('trophy-image-url')[_0x47c267(0x2e0)]['trim'](),_0x18a8ff=document['getElementById']('trophy-rarity')[_0x47c267(0x2e0)];if(!_0x186887||!_0x55fa96||!_0x27e1c5){showNotification(_0x47c267(0x2e7),'error');return;}const _0x117680=auth['currentUser'];if(!_0x117680){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x13c4cd={'name':_0x186887,'description':_0x55fa96,'image':_0x27e1c5,'rarity':_0x18a8ff,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x117680['email']};!_0x5b7f8a?(_0x13c4cd['createdAt']=serverTimestamp(),_0x13c4cd[_0x47c267(0xf3)]=_0x117680['email'],await addDoc(collection(db,'trophyDefinitions'),_0x13c4cd),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,_0x47c267(0x2fa),_0x5b7f8a),_0x13c4cd),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x2e9ace){console['error'](_0x47c267(0x131),_0x2e9ace),showNotification(_0x47c267(0x2ea)+_0x2e9ace['message'],_0x47c267(0x100));}}function closeTrophyModal(){const _0x279a2f=a4_0x1fd11d,_0x419787=document[_0x279a2f(0x1e2)]('trophy-modal');_0x419787&&_0x419787['classList']['remove'](_0x279a2f(0x212));}async function confirmDeleteTrophy(_0x269ec8){const _0x2b8ccf=a4_0x1fd11d;if(!_0x269ec8){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x51df3b=auth['currentUser'];if(!_0x51df3b){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console[_0x2b8ccf(0xca)]('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x269ec8),await deleteDoc(doc(db,'trophyDefinitions',_0x269ec8)),showNotification(_0x2b8ccf(0x227),'success'),loadTrophyDefinitions();}catch(_0xb955f){console['error'](_0x2b8ccf(0x2ae),_0xb955f),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0xb955f['message'],_0x2b8ccf(0x100));}}async function openAssignTrophyModal(_0x45d8ae){const _0x1cbdeb=a4_0x1fd11d;try{const _0x213890=doc(db,_0x1cbdeb(0x2fa),_0x45d8ae),_0x4ceb73=await getDoc(_0x213890);if(!_0x4ceb73['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x130d3a=_0x4ceb73[_0x1cbdeb(0xc8)]();document['getElementById'](_0x1cbdeb(0x284))[_0x1cbdeb(0x2e0)]=_0x45d8ae,document['getElementById']('assign-trophy-name')['value']=_0x130d3a['name'],document['getElementById']('assign-trophy-image')['src']=_0x130d3a[_0x1cbdeb(0x27a)]||DEFAULT_TROPHY_IMAGE,document[_0x1cbdeb(0x1e2)](_0x1cbdeb(0x2d1))['textContent']=_0x130d3a['name']||_0x1cbdeb(0xdf),document['getElementById']('assign-trophy-description')[_0x1cbdeb(0x1c2)]=_0x130d3a['description']||_0x1cbdeb(0x162);const _0x2e92b8=document[_0x1cbdeb(0x1e2)]('assign-trophy-rarity');_0x2e92b8['textContent']=_0x130d3a['rarity']||'common',_0x2e92b8['className']='trophy-rarity\x20'+(_0x130d3a['rarity']||'common');const _0x4e398b=document['getElementById']('assign-trophy-modal');_0x4e398b['classList']['add'](_0x1cbdeb(0x212));}catch(_0x420449){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x420449),showNotification(_0x1cbdeb(0x10e),'error');}}function closeAssignTrophyModal(){const _0x3bda54=a4_0x1fd11d,_0x8005bf=document['getElementById']('assign-trophy-modal');_0x8005bf&&_0x8005bf['classList'][_0x3bda54(0x11f)]('active');}async function assignTrophyToPlayer(){const _0x41db8d=a4_0x1fd11d;try{const _0x38cd4f=document['getElementById'](_0x41db8d(0x284))[_0x41db8d(0x2e0)],_0x1d01b5=document['getElementById']('assign-trophy-name')[_0x41db8d(0x2e0)],_0x3bc268=document['getElementById']('assign-player-username')[_0x41db8d(0x2e0)]['trim'](),_0x33ad77=document[_0x41db8d(0x2eb)]('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x38cd4f||!_0x3bc268){showNotification(_0x41db8d(0x2a5),'error');return;}const _0x4fb1fc=auth['currentUser'];if(!_0x4fb1fc){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x5c4918=null,_0x23690f=null,_0x53d59d=null;if(_0x33ad77==='non-participant'){const _0x54bba0=collection(db,_0x41db8d(0x1e6)),_0x2ac868=query(_0x54bba0,where('username','==',_0x3bc268)),_0x4302c3=await getDocs(_0x2ac868);!_0x4302c3[_0x41db8d(0x2f6)]&&(_0x5c4918=_0x4302c3[_0x41db8d(0x1ab)][0x0],_0x23690f=_0x5c4918['id'],_0x53d59d=_0x5c4918[_0x41db8d(0xc8)]());}else{const _0x15c5b1=_0x33ad77==='D1'?_0x41db8d(0x2c8):_0x33ad77==='D2'?'playersD2':_0x41db8d(0xc3),_0x193399=collection(db,_0x15c5b1),_0x41655e=query(_0x193399,where(_0x41db8d(0x10c),'==',_0x3bc268)),_0x5d2a44=await getDocs(_0x41655e);!_0x5d2a44['empty']&&(_0x5c4918=_0x5d2a44[_0x41db8d(0x1ab)][0x0],_0x23690f=_0x5c4918['id'],_0x53d59d=_0x5c4918[_0x41db8d(0xc8)]());}if(!_0x5c4918){showNotification(_0x41db8d(0x1c1)+_0x3bc268+_0x41db8d(0x1e7)+(_0x33ad77==='non-participant'?'non-participants':_0x33ad77+'\x20ladder'),'error');return;}const _0x4bef5b=collection(db,_0x41db8d(0x103)),_0x3414e1=query(_0x4bef5b,where(_0x41db8d(0x31c),'==',_0x23690f),where(_0x41db8d(0x1ec),'==',_0x38cd4f)),_0x1e1b0c=await getDocs(_0x3414e1);if(!_0x1e1b0c['empty']){showNotification(_0x41db8d(0x1c1)+_0x3bc268+_0x41db8d(0x221),'warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x23690f,'playerUsername':_0x3bc268,'trophyId':_0x38cd4f,'awardedAt':serverTimestamp(),'awardedBy':_0x4fb1fc['email'],'ladder':_0x33ad77}),showNotification(_0x41db8d(0x27b)+_0x1d01b5+'\x22\x20awarded\x20to\x20'+_0x3bc268,'success'),closeAssignTrophyModal();}catch(_0x4fdac9){console['error']('Error\x20assigning\x20trophy:',_0x4fdac9),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x4fdac9['message'],'error');}}function setupInactivePlayersSection(){const _0x2947f2=a4_0x1fd11d,_0x24c8b0=document['getElementById'](_0x2947f2(0x329));_0x24c8b0&&_0x24c8b0['addEventListener']('change',function(){const _0x4c3233=document['getElementById']('load-inactive-players-data');if(_0x4c3233)_0x4c3233['click']();});const _0x4ea1d7=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0xf7794b=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x4ea1d7&&_0xf7794b&&(_0x4ea1d7[_0x2947f2(0x29e)]('change',function(){const _0x5ba542=_0x2947f2;if(this['checked']){currentLadder='D1';if(document['getElementById']('inactive-players')['style'][_0x5ba542(0x28b)]!==_0x5ba542(0x1c4)){const _0x27c20e=document['getElementById']('load-inactive-players-data');if(_0x27c20e)_0x27c20e['click']();}}}),_0xf7794b['addEventListener']('change',function(){const _0x20a9f0=_0x2947f2;if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')[_0x20a9f0(0x29d)]['display']!=='none'){const _0x480c9e=document['getElementById']('load-inactive-players-data');if(_0x480c9e)_0x480c9e[_0x20a9f0(0x1ed)]();}}}));const _0x398f28=document[_0x2947f2(0x1e2)](_0x2947f2(0x1d0));_0x398f28&&_0x398f28['addEventListener'](_0x2947f2(0x222),debounce(function(){const _0x3a2932=_0x2947f2,_0x30fa2a=_0x398f28['value']['toLowerCase'](),_0x51b95f=document[_0x3a2932(0x117)]('#inactive-players-table-body\x20tr');_0x51b95f['forEach'](_0x198b40=>{const _0xd58c1=_0x3a2932;if(_0x198b40['querySelector']('.loading-cell')||_0x198b40[_0xd58c1(0x2eb)]('.empty-state')||_0x198b40['querySelector']('.error-state'))return;const _0xfbc44b=_0x198b40['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x38e657=_0x198b40['cells'][0x5]?.[_0xd58c1(0x1c2)]['toLowerCase']()||'';_0xfbc44b['includes'](_0x30fa2a)||_0x38e657['includes'](_0x30fa2a)?_0x198b40[_0xd58c1(0x29d)]['display']='':_0x198b40['style']['display']='none';});},0x12c)),document['addEventListener']('click',function(_0x4567c9){const _0x2c5938=_0x2947f2;if(_0x4567c9['target'][_0x2c5938(0x1f1)]('.view-player-btn')){const _0x1248a5=_0x4567c9['target']['closest']('.view-player-btn'),_0x35b2fb=_0x1248a5['dataset']['username'];_0x35b2fb&&alert(_0x2c5938(0x2db)+_0x35b2fb+'\x20-\x20Feature\x20coming\x20soon');}}),console[_0x2947f2(0xca)](_0x2947f2(0x18d));}async function loadInactivePlayersData(){const _0x34c74d=a4_0x1fd11d,_0xbab32a=document['getElementById'](_0x34c74d(0x2a6));if(!_0xbab32a)return;_0xbab32a[_0x34c74d(0xcb)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x4ac918=document['getElementById']('inactive-days-filter'),_0x59f99d=_0x4ac918?parseInt(_0x4ac918['value'])||0x0:0x0,_0x55cf13=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x55b3b8=await getDocs(_0x55cf13);if(_0x55b3b8['empty']){_0xbab32a['innerHTML']=_0x34c74d(0x244);return;}const _0x81fc4a=[];_0x55b3b8[_0x34c74d(0x31d)](_0x45abb8=>{const _0x1e16fe=_0x34c74d,_0x5f2902=_0x45abb8[_0x1e16fe(0xc8)]();_0x81fc4a['push']({..._0x5f2902,'id':_0x45abb8['id'],'username':_0x5f2902['username']||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x81fc4a['length']+_0x34c74d(0x2f7)+currentLadder+'\x20ladder');const _0x38b031=currentLadder==='D1'?'approvedMatches':_0x34c74d(0x287),_0x45fafe=_0x81fc4a['map'](async _0x5097ac=>{const _0x167808=_0x34c74d;try{const _0x14eb56=collection(db,_0x38b031),_0x5971a9=query(_0x14eb56,or(where('winnerUsername','==',_0x5097ac['username']),where('loserUsername','==',_0x5097ac['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0x184011=await getDocs(_0x5971a9);if(!_0x184011['empty']){const _0x1ed732=_0x184011['docs'][0x0]['data'](),_0x739ee5=_0x1ed732[_0x167808(0x141)]?new Date(_0x1ed732['approvedAt']['seconds']*0x3e8):null,_0x51cfc7=new Date(),_0x398e39=_0x739ee5?Math[_0x167808(0x205)]((_0x51cfc7-_0x739ee5)/(0x3e8*0x3c*0x3c*0x18)):null,_0x16f234=_0x1ed732['winnerUsername']===_0x5097ac['username']?_0x1ed732['loserUsername']:_0x1ed732['winnerUsername'],_0x432386=_0x1ed732['winnerUsername']===_0x5097ac['username']?'Won':'Lost';return{..._0x5097ac,'lastMatch':{'date':_0x739ee5?_0x739ee5['toLocaleDateString']():'N/A','opponent':_0x16f234||_0x167808(0x120),'result':_0x432386,'timestamp':_0x739ee5||new Date(0x0),'daysSinceMatch':_0x398e39||Number['MAX_SAFE_INTEGER']}};}else return{..._0x5097ac,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x511836){return console[_0x167808(0x100)](_0x167808(0x326)+_0x5097ac['username']+':',_0x511836),{..._0x5097ac,'lastMatch':{'date':_0x167808(0x1e3),'opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x33c6ab=await Promise['all'](_0x45fafe);_0x33c6ab[_0x34c74d(0xee)]((_0x20fb4c,_0x50657b)=>_0x50657b[_0x34c74d(0x19b)]['daysSinceMatch']-_0x20fb4c['lastMatch']['daysSinceMatch']);_0x59f99d>0x0&&(_0x33c6ab=_0x33c6ab['filter'](_0x183468=>_0x183468['lastMatch']['daysSinceMatch']>=_0x59f99d));_0xbab32a[_0x34c74d(0xcb)]='';if(_0x33c6ab['length']===0x0){_0xbab32a[_0x34c74d(0xcb)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x33c6ab['forEach'](_0x5ab2e0=>{const _0x45d1f3=_0x34c74d,_0x2a1bab=document['createElement']('tr'),_0x528572=_0x5ab2e0['lastMatch'][_0x45d1f3(0xc7)]>0x1e?'highly-inactive':_0x5ab2e0['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x2a1bab['className']=_0x528572,_0x2a1bab['innerHTML']=_0x45d1f3(0x1b5)+_0x5ab2e0['username']+_0x45d1f3(0xed)+(_0x5ab2e0[_0x45d1f3(0x16c)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5ab2e0['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5ab2e0[_0x45d1f3(0x19b)]['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?_0x45d1f3(0x274):_0x5ab2e0[_0x45d1f3(0x19b)]['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+_0x45d1f3(0xed)+(_0x5ab2e0['lastMatch']['date']===_0x45d1f3(0x213)?_0x45d1f3(0x298):_0x5ab2e0[_0x45d1f3(0x19b)][_0x45d1f3(0x2b0)]+'\x20vs\x20'+_0x5ab2e0['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x5ab2e0['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xbab32a['appendChild'](_0x2a1bab);}),console['log']('Displaying\x20'+_0x33c6ab['length']+'\x20inactive\x20players');}catch(_0x5de2a5){console['error'](_0x34c74d(0x323),_0x5de2a5),_0xbab32a[_0x34c74d(0xcb)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x5de2a5['message']+_0x34c74d(0x174);}}function setupHighlightButtons(){const _0x19477d=a4_0x1fd11d;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x2c4851=document['getElementById'](_0x19477d(0x20d));_0x2c4851&&_0x2c4851['addEventListener'](_0x19477d(0x1ed),function(){const _0x38ec24=_0x19477d;console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal(_0x38ec24(0x29c));});const _0x106c65=document['getElementById']('create-creator-highlight-btn');_0x106c65&&_0x106c65[_0x19477d(0x29e)]('click',function(){const _0x4c3533=_0x19477d;console[_0x4c3533(0xca)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal(_0x4c3533(0x2ad));});const _0x4547ce=document['getElementById'](_0x19477d(0x1a6));_0x4547ce&&_0x4547ce[_0x19477d(0x29e)]('click',function(){const _0x1476ab=_0x19477d;console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x1476ab(0x2e3));});}function openHighlightModal(_0x3716dc='match'){const _0x3ab82d=a4_0x1fd11d;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x3716dc);const _0x22e9da=document[_0x3ab82d(0x1e2)](_0x3ab82d(0x28e)),_0x1cddb4=document['getElementById'](_0x3ab82d(0x301)),_0x311e8d=document['getElementById'](_0x3ab82d(0xcf)),_0x369e5e=document['getElementById']('highlight-id');if(!_0x22e9da||!_0x1cddb4||!_0x311e8d){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x1cddb4['reset'](),_0x369e5e['value']='';const _0x2f8648=[_0x3ab82d(0x29c),'creator','achievement'],_0x8f48e=!_0x2f8648['includes'](_0x3716dc);if(_0x8f48e){const _0x44f8fb=_0x3716dc;_0x369e5e['value']=_0x44f8fb,_0x311e8d['textContent']='Loading...',loadHighlightDataAdmin(_0x44f8fb);}else{const _0x2c2fff=_0x3716dc;document[_0x3ab82d(0x1e2)]('highlight-type')['value']=_0x2c2fff,_0x311e8d['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x2c2fff),toggleHighlightFields(_0x2c2fff);const _0x55bebc=auth[_0x3ab82d(0xcc)];_0x55bebc&&document['getElementById']('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')[_0x3ab82d(0x2e0)]=_0x55bebc[_0x3ab82d(0x224)]||_0x55bebc['email']);}_0x22e9da[_0x3ab82d(0x157)]['add']('active');}function toggleHighlightFields(_0xc79ccf){const _0x5c79de=a4_0x1fd11d;console[_0x5c79de(0xca)]('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0xc79ccf);const _0x566dfb=document[_0x5c79de(0x1e2)]('highlight-form');if(!_0x566dfb)return;const _0x3d70c0=_0x566dfb['querySelectorAll'](_0x5c79de(0x156));_0x3d70c0['forEach'](_0xf43e0b=>_0xf43e0b['style']['display']='none');const _0xe55dc7=document['getElementById']('highlight-video-preview-container');if(_0xe55dc7)_0xe55dc7['style'][_0x5c79de(0x28b)]=_0x5c79de(0x1c4);const _0x11fe14=[_0x5c79de(0x175),'highlight-description-container','highlight-submitted-by-container'];_0x11fe14['forEach'](_0x548ad2=>{const _0x19c1f8=_0x5c79de,_0x245d0e=document[_0x19c1f8(0x1e2)](_0x548ad2);if(_0x245d0e)_0x245d0e['style']['display']=_0x19c1f8(0x255);});if(_0xc79ccf==='match'){const _0x40e084=[_0x5c79de(0x27d),_0x5c79de(0x153),'highlight-map-container','highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x40e084[_0x5c79de(0x31d)](_0x2fb24b=>{const _0x5aba58=_0x5c79de,_0xc3c12d=document['getElementById'](_0x2fb24b);_0xc3c12d&&(_0x2fb24b===_0x5aba58(0x2f8)?_0xc3c12d['style']['display']='flex':_0xc3c12d[_0x5aba58(0x29d)]['display']=_0x5aba58(0x255));});const _0x27891b=document['getElementById']('highlight-video-id');if(_0x27891b){_0x27891b['required']=!![];const _0x56fdb4=_0x27891b['previousElementSibling'];if(_0x56fdb4)_0x56fdb4[_0x5c79de(0xcb)]='YouTube\x20Video\x20ID*';}if(_0xe55dc7)_0xe55dc7['style'][_0x5c79de(0x28b)]='block';updateHighlightVideoPreview();}else{if(_0xc79ccf==='creator'){const _0x141d07=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container',_0x5c79de(0x27d)];_0x141d07['forEach'](_0x462dfd=>{const _0x4d06b6=_0x5c79de,_0x5af0c7=document['getElementById'](_0x462dfd);if(_0x5af0c7)_0x5af0c7[_0x4d06b6(0x29d)]['display']='block';});const _0x4eee41=document[_0x5c79de(0x1e2)]('highlight-video-id');if(_0x4eee41){_0x4eee41['required']=![];const _0x3f7bea=_0x4eee41['previousElementSibling'];if(_0x3f7bea)_0x3f7bea[_0x5c79de(0xcb)]='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0xc79ccf==='achievement'){const _0x5a52c4=[_0x5c79de(0x23d),'highlight-achievement-type-container','highlight-achievement-details-container',_0x5c79de(0xf1),'highlight-achievement-image-container','highlight-video-container'];_0x5a52c4[_0x5c79de(0x31d)](_0x40184c=>{const _0x9294d3=_0x5c79de,_0x37de90=document['getElementById'](_0x40184c);if(_0x37de90)_0x37de90[_0x9294d3(0x29d)][_0x9294d3(0x28b)]='block';});const _0x43b8d7=document['getElementById']('highlight-video-id');if(_0x43b8d7){_0x43b8d7[_0x5c79de(0x1a1)]=![];const _0x22cb43=_0x43b8d7[_0x5c79de(0x164)];if(_0x22cb43)_0x22cb43[_0x5c79de(0xcb)]=_0x5c79de(0x152);}}}}}async function loadHighlightDataAdmin(_0x1d7802){const _0x164812=a4_0x1fd11d;try{const _0x3bffd9=doc(db,'highlights',_0x1d7802),_0x548f38=await getDoc(_0x3bffd9);if(!_0x548f38['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x202fc4=_0x548f38[_0x164812(0xc8)](),_0x1680d0=_0x202fc4[_0x164812(0x165)]||'match';document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x1680d0),document['getElementById']('highlight-type')[_0x164812(0x2e0)]=_0x1680d0,toggleHighlightFields(_0x1680d0),document['getElementById']('highlight-title')[_0x164812(0x2e0)]=_0x202fc4[_0x164812(0xcd)]||'',document['getElementById'](_0x164812(0x20b))['value']=_0x202fc4['description']||'',document[_0x164812(0x1e2)]('highlight-submitted-by')[_0x164812(0x2e0)]=_0x202fc4['submittedBy']||'';_0x202fc4['videoId']&&(document['getElementById'](_0x164812(0x189))[_0x164812(0x2e0)]=_0x202fc4['videoId'],updateHighlightVideoPreview());if(_0x1680d0==='match'){document[_0x164812(0x1e2)](_0x164812(0x136))['value']=_0x202fc4['matchInfo']||'',document['getElementById']('highlight-map')['value']=_0x202fc4['map']||'';if(_0x202fc4['matchDate']){const _0x174807=new Date(_0x202fc4[_0x164812(0xd7)]['seconds']*0x3e8);document[_0x164812(0x1e2)](_0x164812(0x252))['value']=_0x174807['toISOString']()['split']('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x202fc4['winnerName']||'',document['getElementById']('highlight-winner-score')[_0x164812(0x2e0)]=_0x202fc4[_0x164812(0xfb)]||'',document['getElementById'](_0x164812(0x12f))['value']=_0x202fc4[_0x164812(0x30d)]||'',document['getElementById']('highlight-loser-score')['value']=_0x202fc4['loserScore']||'',document[_0x164812(0x1e2)]('highlight-match-link')['value']=_0x202fc4[_0x164812(0x260)]||'';}else{if(_0x1680d0==='creator')document['getElementById']('highlight-map')['value']=_0x202fc4['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x202fc4['mapCreator']||'',document[_0x164812(0x1e2)](_0x164812(0x191))['value']=_0x202fc4['mapVersion']||'',document['getElementById'](_0x164812(0x2a4))['value']=_0x202fc4['creatorImageUrl']||'';else _0x1680d0===_0x164812(0x2e3)&&(document[_0x164812(0x1e2)](_0x164812(0x2c1))[_0x164812(0x2e0)]=_0x202fc4['achievementPlayer']||'',document[_0x164812(0x1e2)]('highlight-achievement-type')['value']=_0x202fc4['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x202fc4['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x202fc4['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')['value']=_0x202fc4[_0x164812(0x1fc)]||'');}}catch(_0x1f19bc){console['error']('Error\x20loading\x20highlight:',_0x1f19bc),showNotification(_0x164812(0x232)+_0x1f19bc['message'],'error');}}async function saveHighlight(){const _0x3984ba=a4_0x1fd11d;try{const _0xaf4c6e=document['getElementById']('highlight-id')?.['value']||'',_0x29d074=document['getElementById']('highlight-type')?.['value']||_0x3984ba(0x29c),_0x582a59={'title':document[_0x3984ba(0x1e2)](_0x3984ba(0x110))?.['value']?.['trim']()||'','description':document['getElementById']('highlight-description')?.[_0x3984ba(0x2e0)]?.[_0x3984ba(0x25c)]()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.[_0x3984ba(0x25c)]()||'','videoId':document[_0x3984ba(0x1e2)]('highlight-video-id')?.[_0x3984ba(0x2e0)]?.[_0x3984ba(0x25c)]()||null,'type':_0x29d074};if(!_0x582a59[_0x3984ba(0xcd)]){showNotification('Title\x20is\x20required','error');return;}if(_0x29d074==='match'){_0x582a59['matchInfo']=document[_0x3984ba(0x1e2)]('highlight-match-info')?.['value']?.['trim']()||'',_0x582a59['map']=document['getElementById'](_0x3984ba(0x19c))?.['value']?.[_0x3984ba(0x25c)]()||'';const _0x1d0e61=document['getElementById']('highlight-match-date'),_0x47136b=_0x1d0e61?.[_0x3984ba(0x2e0)]||'';_0x582a59['matchDate']=_0x47136b?Timestamp['fromDate'](new Date(_0x47136b)):null,_0x582a59[_0x3984ba(0x321)]=document[_0x3984ba(0x1e2)]('highlight-winner-name')?.[_0x3984ba(0x2e0)]?.[_0x3984ba(0x25c)]()||'',_0x582a59['winnerScore']=document['getElementById'](_0x3984ba(0x223))?.['value']?.['trim']()||'',_0x582a59['loserName']=document['getElementById'](_0x3984ba(0x12f))?.[_0x3984ba(0x2e0)]?.[_0x3984ba(0x25c)]()||'',_0x582a59['loserScore']=document[_0x3984ba(0x1e2)]('highlight-loser-score')?.[_0x3984ba(0x2e0)]?.['trim']()||'',_0x582a59['matchLink']=document['getElementById'](_0x3984ba(0x1dd))?.['value']?.['trim']()||'';if(!_0x582a59['videoId']){showNotification(_0x3984ba(0x31a),'error');return;}}else{if(_0x29d074===_0x3984ba(0x2ad)){_0x582a59[_0x3984ba(0x1f8)]=document['getElementById'](_0x3984ba(0x19c))?.[_0x3984ba(0x2e0)]?.[_0x3984ba(0x25c)]()||'',_0x582a59['mapCreator']=document['getElementById']('highlight-map-creator')?.['value']?.['trim']()||'',_0x582a59[_0x3984ba(0x290)]=document[_0x3984ba(0x1e2)]('highlight-map-version')?.['value']?.[_0x3984ba(0x25c)]()||'',_0x582a59[_0x3984ba(0x23f)]=document['getElementById']('highlight-creator-image')?.[_0x3984ba(0x2e0)]?.[_0x3984ba(0x25c)]()||'';if(!_0x582a59['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x29d074==='achievement'){_0x582a59['achievementPlayer']=document[_0x3984ba(0x1e2)](_0x3984ba(0x2c1))?.['value']?.['trim']()||'',_0x582a59['achievementType']=document[_0x3984ba(0x1e2)]('highlight-achievement-type')?.['value']?.[_0x3984ba(0x25c)]()||'',_0x582a59['achievementDetails']=document[_0x3984ba(0x1e2)](_0x3984ba(0x272))?.['value']?.['trim']()||'',_0x582a59[_0x3984ba(0xda)]=document['getElementById'](_0x3984ba(0x263))?.[_0x3984ba(0x2e0)]?.['trim']()||'',_0x582a59[_0x3984ba(0x1fc)]=document[_0x3984ba(0x1e2)]('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x582a59[_0x3984ba(0x2dc)]){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0xaf4c6e?(_0x582a59[_0x3984ba(0x1c6)]=serverTimestamp(),await updateDoc(doc(db,_0x3984ba(0x2b1),_0xaf4c6e),_0x582a59),showNotification(_0x3984ba(0xeb),'success')):(_0x582a59['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x582a59),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x4e8493){console['error']('Error\x20saving\x20highlight:',_0x4e8493),showNotification('Error\x20saving\x20highlight:\x20'+_0x4e8493['message'],'error');}}function closeHighlightModal(){const _0x310254=a4_0x1fd11d,_0x34658e=document[_0x310254(0x1e2)](_0x310254(0x28e));if(_0x34658e)_0x34658e['classList']['remove']('active');}function getHighlightTypeName(_0x45559a){const _0x4f2fd2=a4_0x1fd11d;switch(_0x45559a){case _0x4f2fd2(0x29c):return'Match\x20Highlight';case'creator':return _0x4f2fd2(0xea);case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x27015c=a4_0x1fd11d,_0x4e4545=document['getElementById']('highlight-video-id'),_0x295e15=document['getElementById'](_0x27015c(0x1b2)),_0x26244a=document['getElementById']('highlight-video-preview');if(!_0x4e4545||!_0x26244a||!_0x295e15)return;const _0x5253a4=_0x4e4545['value']['trim']();_0x5253a4&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x5253a4)?(_0x26244a['src']=_0x27015c(0x27e)+_0x5253a4,_0x295e15[_0x27015c(0x29d)][_0x27015c(0x28b)]='block'):(_0x26244a['src']='',_0x295e15['style']['display']='none');}async function loadHighlightsAdmin(){const _0x31105a=a4_0x1fd11d,_0x236fbf=document['getElementById']('highlights-table-body');if(!_0x236fbf)return;_0x236fbf[_0x31105a(0xcb)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x353786=query(collection(db,_0x31105a(0x2b1)),orderBy('createdAt',_0x31105a(0x183))),_0x5d2230=await getDocs(_0x353786);if(_0x5d2230[_0x31105a(0x2f6)]){_0x236fbf['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x236fbf[_0x31105a(0xcb)]='',_0x5d2230['forEach'](_0x3f49b2=>{const _0x37eecf=_0x31105a,_0x4e920d=_0x3f49b2['data'](),_0x6e9b7e=document['createElement']('tr'),_0x2d61a5=_0x4e920d['createdAt']?new Date(_0x4e920d[_0x37eecf(0x21c)]['seconds']*0x3e8)['toLocaleDateString']():'N/A';let _0x5af7c7='Unknown',_0x2f3f92='';switch(_0x4e920d['type']){case'match':_0x5af7c7='Match',_0x2f3f92='match-type';break;case'creator':_0x5af7c7='Creator',_0x2f3f92='creator-type';break;case _0x37eecf(0x2e3):_0x5af7c7='Achievement',_0x2f3f92='achievement-type';break;}_0x6e9b7e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4e920d['title']||_0x37eecf(0x158))+_0x37eecf(0xf7)+_0x2f3f92+'\x22>'+_0x5af7c7+_0x37eecf(0x275)+_0x2d61a5+_0x37eecf(0xed)+(_0x4e920d[_0x37eecf(0x1ea)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4e920d['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x3f49b2['id']+_0x37eecf(0x268)+_0x3f49b2['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x236fbf['appendChild'](_0x6e9b7e);}),document['querySelectorAll'](_0x31105a(0x1d8))['forEach'](_0x6626ee=>{_0x6626ee['addEventListener']('click',_0x4ab84f=>{openHighlightModal(_0x4ab84f['currentTarget']['dataset']['id']);});}),document['querySelectorAll'](_0x31105a(0x160))['forEach'](_0x3c4514=>{_0x3c4514['addEventListener']('click',_0x2aba75=>{const _0x4e7367=a4_0x343e;confirmDeleteHighlight(_0x2aba75['currentTarget'][_0x4e7367(0x305)]['id']);});});}catch(_0x579972){console[_0x31105a(0x100)](_0x31105a(0x30b),_0x579972),_0x236fbf[_0x31105a(0xcb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x579972['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x2d7987){const _0x432e9a=a4_0x1fd11d;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x2d7987)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x1c7907){console[_0x432e9a(0x100)]('Error\x20deleting\x20highlight:',_0x1c7907),showNotification('Error\x20deleting\x20highlight:\x20'+_0x1c7907['message'],'error');}}function setupCreateTestMatchModal(){const _0x2d78a2=a4_0x1fd11d;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x14f0c1=document['getElementById'](_0x2d78a2(0x112)),_0x5e6c7e=document['getElementById']('create-test-match-form');if(!_0x14f0c1){console['error'](_0x2d78a2(0x108));return;}if(!_0x5e6c7e){console[_0x2d78a2(0x100)](_0x2d78a2(0x109));return;}const _0x537757=_0x14f0c1['cloneNode'](!![]);_0x14f0c1['parentNode']['replaceChild'](_0x537757,_0x14f0c1);const _0x4dabf0=_0x537757[_0x2d78a2(0x2eb)]('#create-test-match-form');_0x537757['addEventListener']('click',function(_0x5b3360){const _0x1a358=_0x2d78a2;_0x5b3360['target']===_0x537757&&(console[_0x1a358(0xca)](_0x1a358(0x19d)),closeCreateTestMatchModal());});const _0xb36e41=_0x537757[_0x2d78a2(0x2eb)]('.close-btn');_0xb36e41&&_0xb36e41['addEventListener']('click',function(_0x2d42f7){const _0x284676=_0x2d78a2;_0x2d42f7['preventDefault'](),_0x2d42f7['stopPropagation'](),console[_0x284676(0xca)]('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x222570=_0x537757['querySelector']('#cancel-create-test-match-btn');_0x222570&&_0x222570['addEventListener']('click',function(_0x5ee8f6){const _0x4d3909=_0x2d78a2;_0x5ee8f6[_0x4d3909(0x13f)](),_0x5ee8f6[_0x4d3909(0x16a)](),console['log'](_0x4d3909(0x111)),closeCreateTestMatchModal();});if(_0x4dabf0){_0x4dabf0[_0x2d78a2(0x29e)]('submit',function(_0x28649a){const _0x5a700f=_0x2d78a2;_0x28649a['preventDefault'](),_0x28649a['stopPropagation'](),console['log'](_0x5a700f(0x294)),createTestMatch();});const _0x470dbf=_0x4dabf0[_0x2d78a2(0x2eb)]('button[type=\x22submit\x22]');_0x470dbf&&_0x470dbf['addEventListener']('click',function(_0x210360){const _0x34a320=_0x2d78a2;_0x210360['preventDefault'](),_0x210360['stopPropagation'](),console['log'](_0x34a320(0x280)),createTestMatch();});}console[_0x2d78a2(0xca)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x4b8d1b=a4_0x1fd11d;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x234218=document['getElementById']('highlight-form');_0x234218&&_0x234218['addEventListener']('submit',_0x2e72c5=>{const _0x1745d7=a4_0x343e;_0x2e72c5[_0x1745d7(0x13f)](),saveHighlight();});const _0x355d8e=document[_0x4b8d1b(0x1e2)]('cancel-highlight-btn');_0x355d8e&&_0x355d8e[_0x4b8d1b(0x29e)](_0x4b8d1b(0x1ed),closeHighlightModal);const _0x55b67c=document[_0x4b8d1b(0x2eb)]('#highlight-modal\x20.close-btn');_0x55b67c&&_0x55b67c['addEventListener']('click',closeHighlightModal);const _0x14581b=document['getElementById'](_0x4b8d1b(0x28e));_0x14581b&&_0x14581b['addEventListener']('click',_0x25c358=>{_0x25c358['target']===_0x14581b&&closeHighlightModal();});const _0x287de6=document['getElementById']('highlight-video-id');_0x287de6&&_0x287de6['addEventListener'](_0x4b8d1b(0x222),()=>{updateHighlightVideoPreview();}),console[_0x4b8d1b(0xca)]('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x4fb231=a4_0x1fd11d;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x4a624a=document['getElementById']('matches-prev-page'),_0x450b5b=document['getElementById']('matches-next-page');_0x4a624a&&_0x4a624a[_0x4fb231(0x29e)](_0x4fb231(0x1ed),()=>{const _0x444596=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x444596]['page']-0x1);});_0x450b5b&&_0x450b5b[_0x4fb231(0x29e)](_0x4fb231(0x1ed),()=>{const _0x4e02a8=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x4e02a8]['page']+0x1);});const _0x23323d=document['getElementById']('apply-matches-filters'),_0x1cfae8=document['getElementById']('reset-matches-filters');_0x23323d&&_0x23323d['addEventListener'](_0x4fb231(0x1ed),applyMatchesFilters);_0x1cfae8&&_0x1cfae8[_0x4fb231(0x29e)]('click',resetMatchesFilters);const _0x858520=document['getElementById']('matches-search');_0x858520&&_0x858520['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x40644b=document['getElementById']('resimulate-match-btn');_0x40644b&&_0x40644b[_0x4fb231(0x29e)]('click',openResimulateModal);const _0x46c79c=document['getElementById'](_0x4fb231(0x149));if(_0x46c79c){const _0x16298f=_0x46c79c['querySelector']('.close');_0x16298f&&_0x16298f[_0x4fb231(0x29e)]('click',closeResimulateModal),_0x46c79c['addEventListener']('click',_0x1941aa=>{const _0x3757e0=_0x4fb231;_0x1941aa[_0x3757e0(0x2d8)]===_0x46c79c&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x4fb231(0xd8));}function openCreateTestMatchModal(){const _0x4a80aa=a4_0x1fd11d;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x11ad00=document['getElementById'](_0x4a80aa(0x112)),_0x18af6e=document['getElementById']('create-test-match-form');if(!_0x11ad00){console[_0x4a80aa(0x100)](_0x4a80aa(0x194)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x18af6e){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x18af6e['reset']();const _0x205d9a=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x522a84=![];_0x205d9a['forEach'](_0x5aeb2a=>{const _0xae2ea4=_0x4a80aa;console['log']('Found\x20radio\x20with\x20value:',_0x5aeb2a['value']),_0x5aeb2a['value']===currentLadder&&(_0x5aeb2a[_0xae2ea4(0x283)]=!![],_0x522a84=!![],console['log'](_0xae2ea4(0x288),currentLadder));});if(!_0x522a84){console[_0x4a80aa(0x18a)]('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x539f30=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x539f30&&(_0x539f30['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x5f16f2=document['getElementById']('test-match-date');if(_0x5f16f2){const _0x586fc1=new Date()['toISOString']()['split']('T')[0x0];_0x5f16f2[_0x4a80aa(0x2e0)]=_0x586fc1;}_0x11ad00['style']['display']=_0x4a80aa(0x1c9),_0x11ad00['style']['visibility']=_0x4a80aa(0x150),_0x11ad00['style']['opacity']='1',_0x11ad00['classList'][_0x4a80aa(0x1d5)]('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x1d13c3=document['getElementById']('test-match-winner-username');_0x1d13c3&&setTimeout(()=>{const _0x1de0c5=_0x4a80aa;_0x1d13c3[_0x1de0c5(0x13b)]();},0x64);}function closeCreateTestMatchModal(){const _0x37a03c=a4_0x1fd11d;console[_0x37a03c(0xca)]('Closing\x20create\x20test\x20match\x20modal');const _0x77ff97=document[_0x37a03c(0x1e2)](_0x37a03c(0x112));if(!_0x77ff97){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x77ff97['classList']['remove']('active'),_0x77ff97[_0x37a03c(0x29d)]['opacity']='0',_0x77ff97['style']['visibility']='hidden',setTimeout(()=>{const _0x231577=_0x37a03c;!_0x77ff97['classList']['contains']('active')&&(_0x77ff97['style'][_0x231577(0x28b)]=_0x231577(0x1c4));},0x12c),console[_0x37a03c(0xca)]('Modal\x20closed');}async function createTestMatch(){const _0x2539ce=a4_0x1fd11d;console['log'](_0x2539ce(0x21e));try{const _0x5574a4=auth['currentUser'];if(!_0x5574a4){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x404e55='D1',_0x231a2a='approvedMatches',_0xf63ba={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x2539ce(0x318),'winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x5574a4['email'],'createdAt':serverTimestamp(),'createdBy':_0x5574a4['email'],'isTestMatch':!![],'ladder':_0x404e55,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x5574a4[_0x2539ce(0xe8)]};console['log'](_0x2539ce(0x130)),await addDoc(collection(db,_0x231a2a),_0xf63ba),showNotification(_0x2539ce(0x179),'success'),closeCreateTestMatchModal();}catch(_0x5c15b7){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x5c15b7),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x5c15b7['message'],'error');}}window[a4_0x1fd11d(0x126)]=async function(){const _0x5b05bb=a4_0x1fd11d;try{console['log']('Testing\x20Firebase\x20connection...'),console['log'](_0x5b05bb(0x285),auth),console[_0x5b05bb(0xca)]('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x30fc43=collection(db,_0x5b05bb(0x2c8));console[_0x5b05bb(0xca)](_0x5b05bb(0x118),_0x30fc43);const _0x2b8329=query(_0x30fc43,where('username','==','nonexistent'));console['log'](_0x5b05bb(0x267),_0x2b8329);const _0x15116b=await getDocs(_0x2b8329);console['log']('Query\x20executed.\x20Empty:',_0x15116b['empty']),console['log'](_0x5b05bb(0x26e));}catch(_0x33315b){console[_0x5b05bb(0x100)](_0x5b05bb(0x1aa),_0x33315b);}};function setupCreateTestMatchButton(){const _0x15c37d=a4_0x1fd11d,_0x14d53f=document['getElementById']('create-test-match-btn');if(!_0x14d53f){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x46d328=_0x14d53f['cloneNode'](!![]);_0x14d53f['parentNode']['replaceChild'](_0x46d328,_0x14d53f),_0x46d328[_0x15c37d(0x29e)]('click',function(_0x309713){const _0x56bbd0=_0x15c37d;_0x309713[_0x56bbd0(0x13f)](),_0x309713['stopPropagation'](),console[_0x56bbd0(0xca)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x2eafb9=0x1){const _0x31fea6=a4_0x1fd11d,_0x41b3f7=document[_0x31fea6(0x1e2)](_0x31fea6(0x15d));if(!_0x41b3f7)return;_0x41b3f7[_0x31fea6(0xcb)]=_0x31fea6(0x1dc);try{const _0x5b1fd1=currentLadder['toLowerCase'](),_0x48ec90=matchesPagination[_0x5b1fd1],_0x863473=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x31fea6(0x287):_0x31fea6(0x240),_0x10bc94=collection(db,_0x863473);_0x2eafb9<=0x1?(_0x48ec90['page']=0x1,_0x48ec90['firstVisible']=null,_0x48ec90['lastVisible']=null):_0x48ec90['page']=_0x2eafb9;const _0x135039=getMatchesFilters();let _0x4febc6=_0x10bc94;if(_0x135039[_0x31fea6(0x132)]||_0x135039['endDate']||_0x135039['searchTerm']){let _0x15965f=[];_0x135039['startDate']&&_0x135039['endDate']?(_0x15965f[_0x31fea6(0x269)](where('approvedAt','>=',_0x135039['startDate']),where('approvedAt','<=',_0x135039['endDate'])),_0x4febc6=query(_0x10bc94,..._0x15965f)):_0x4febc6=query(_0x10bc94,orderBy(_0x31fea6(0x141),'desc'));}else _0x4febc6=query(_0x10bc94,orderBy('approvedAt','desc'));_0x2eafb9>0x1&&_0x48ec90['lastVisible']?_0x4febc6=query(_0x4febc6,startAfter(_0x48ec90['lastVisible']),limit(PAGE_SIZE)):_0x4febc6=query(_0x4febc6,limit(PAGE_SIZE));const _0x375a60=await getDocs(_0x4febc6);!_0x375a60['empty']&&(_0x48ec90['firstVisible']=_0x375a60['docs'][0x0],_0x48ec90['lastVisible']=_0x375a60[_0x31fea6(0x1ab)][_0x375a60[_0x31fea6(0x1ab)]['length']-0x1]);let _0x2c025e=![];if(!_0x375a60[_0x31fea6(0x2f6)]){const _0xc5fa41=query(_0x4febc6,startAfter(_0x48ec90['lastVisible']),limit(0x1)),_0x1f4363=await getDocs(_0xc5fa41);_0x2c025e=!_0x1f4363['empty'];}const _0x1058ac=document[_0x31fea6(0x1e2)]('matches-prev-page'),_0x803fec=document['getElementById'](_0x31fea6(0x2e4)),_0x28542e=document['getElementById']('matches-page-indicator');if(_0x1058ac)_0x1058ac['disabled']=_0x48ec90['page']<=0x1;if(_0x803fec)_0x803fec['disabled']=!_0x2c025e;if(_0x28542e)_0x28542e[_0x31fea6(0x1c2)]=_0x31fea6(0x1cb)+_0x48ec90['page'];if(_0x375a60['empty']){_0x41b3f7[_0x31fea6(0xcb)]=_0x31fea6(0x2d2);return;}_0x41b3f7['innerHTML']='',_0x375a60['forEach'](_0x46eb6f=>{const _0x1b4d4f=_0x31fea6,_0x40b143=_0x46eb6f['data'](),_0x2c2196=document['createElement']('tr'),_0x39c9a=_0x40b143['approvedAt']?new Date(_0x40b143['approvedAt'][_0x1b4d4f(0xd3)]*0x3e8)['toLocaleDateString']():'N/A';_0x2c2196['setAttribute']('data-id',_0x46eb6f['id']),_0x2c2196['setAttribute']('data-ladder',currentLadder),_0x2c2196['classList']['add']('match-row'),_0x2c2196['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x39c9a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x40b143['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x40b143['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x40b143['winnerScore']||0x0)+'\x20-\x20'+(_0x40b143['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x40b143['mapPlayed']||_0x1b4d4f(0x274))+_0x1b4d4f(0x325)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x46eb6f['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x46eb6f['id']+_0x1b4d4f(0x151),_0x41b3f7[_0x1b4d4f(0x2f5)](_0x2c2196);}),setupMatchesActionButtons(),_0x135039['searchTerm']&&filterMatchesTable(),console['log'](_0x31fea6(0x1e4)+_0x375a60['size']+'\x20matches\x20for\x20'+currentLadder+_0x31fea6(0xd6)+_0x48ec90['page']);}catch(_0x42cf75){console['error']('Error\x20loading\x20matches:',_0x42cf75),_0x41b3f7[_0x31fea6(0xcb)]=_0x31fea6(0x23b)+_0x42cf75['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0xa3cf78,_0x4a6202){const _0x5b396d=a4_0x1fd11d;try{console['log']('Deleting\x20match\x20'+_0xa3cf78+'\x20from\x20'+_0x4a6202+_0x5b396d(0x10a));const _0x4e63bc=auth['currentUser'];if(!_0x4e63bc){showNotification(_0x5b396d(0x2a3),'error');return;}const _0x5190a4=_0x4a6202==='D1'?'approvedMatches':_0x4a6202==='D2'?'approvedMatchesD2':_0x5b396d(0x240);console['log']('Using\x20collection:\x20'+_0x5190a4),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x5190a4,_0xa3cf78)),console['log'](_0x5b396d(0xce)),showNotification('Match\x20deleted\x20successfully','success');const _0x2b1a76=_0x4a6202[_0x5b396d(0x2b6)]();loadMatchesData(matchesPagination[_0x2b1a76][_0x5b396d(0x1a7)]);}catch(_0x5b1acf){console['error']('Error\x20deleting\x20match:',_0x5b1acf),showNotification(_0x5b396d(0xc5)+_0x5b1acf['message'],'error');}}function a4_0x3a9c(){const _0x1c90cd=['playersD3','Player\x20not\x20found\x20in\x20','Failed\x20to\x20delete\x20match:\x20','edit-highlight-videoId-input','daysSinceMatch','data','Edit\x20match\x20clicked:','log','innerHTML','currentUser','title','Match\x20deleted\x20successfully','highlight-modal-title','rgba(255,\x20193,\x207,\x200.1)','delete-match-confirm-modal','Unauthorized:\x20Admin\x20access\x20required','seconds','#808080','User\x20\x22','\x20ladder,\x20page\x20','matchDate','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','User\x20','playerProfileUrl','Unknown\x20User','history-start-date','match-count','manage-ranks','Unnamed\x20Trophy','.remove-role-btn','player-count','.close-btn','lastVisible','Delete\x20match\x20clicked:','Username\x20is\x20missing','roleColor','loserUsername','email','pointsHistory','Featured\x20Creator','Highlight\x20updated\x20successfully!','add-new-role-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','sort','points-action','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','highlight-player-profile-container','userProfiles','createdBy','new-player-elo','achievementDetails','pending-count','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','-page-indicator','achievementType','winnerScore','User\x20not\x20found','#users-table-body\x20tr','No\x20match\x20data\x20found\x20for\x20resimulation','previousElo','error','\x20→\x20','Never','userTrophies','.edit-trophy-btn','edit-match-ladder','Error\x20modifying\x20points:','points-desc','Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM','Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM','\x20ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','username','Article\x20deleted\x20successfully','Failed\x20to\x20load\x20trophy\x20data','Error\x20applying\x20filters:','highlight-title','Modal\x20cancel\x20button\x20clicked','create-test-match-modal','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20checking\x20','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','length','querySelectorAll','Collection\x20reference\x20created:','uid','prototype','localeCompare','Error\x20updating\x20points:','cancel-role-btn','❌\x20Missing','remove','Unknown','.remove-ribbon-btn','Loading\x20points\x20data...','modify-points-form','promote-modal','message','testFirebaseConnection','admin_modification','join','Error\x20demoting\x20player:\x20','data-match-id','Silver','edit-highlight-type-select','System','notification\x20','highlight-loser-name','Adding\x20simple\x20test\x20match...','Error\x20saving\x20trophy:','startDate','new-player-username','contains','ref','highlight-match-info','currentTarget','replaceChild','dashboard','Load\x20inactive\x20players\x20data\x20clicked','focus','\x20view\x20history\x20buttons','No\x20position\x20changes\x20needed.','losses','preventDefault','load-trophies-data','approvedAt','Failed\x20to\x20update\x20player:\x20','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','#matches-table-body\x20tr','update','Role\x20\x22','user-roles-section','\x20with\x20email\x20','resimulate-modal','Player\x20deleted\x20successfully','demotedBy','rgba(25,\x20118,\x20210,\x200.7)','toLocaleDateString','size','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','visible','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','YouTube\x20Video\x20ID\x20(Optional)','highlight-match-info-container','set-elo-btn','Error\x20searching\x20user:','.form-group,\x20.form-row','classList','Untitled','set-elo-ladder','playerId','Loading\x20dashboard\x20overview\x20data...','winnerUsername','matches-table-body','Quick\x20edit\x20form\x20not\x20found!',';\x20color:\x20','.delete-highlight-btn','trophy-image-url','No\x20description','add-player-form','previousElementSibling','type','Create\x20Article','Ribbons\x20data\x20loaded\x20successfully','content','bind','stopPropagation','loading-cell','eloRating','MAX_SAFE_INTEGER','lastUpdated','fa-exclamation-circle','Match\x20not\x20found\x20in\x20approved\x20matches','history-type-filter','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','.view-history-btn','</td></tr>','highlight-title-container','-prev-page','edit-match-winner-comment','edit-match-winner','Simple\x20test\x20match\x20created\x20successfully','trophy-id','cancel-edit-btn','img','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','create-new-trophy-btn','common','selected-user-id','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','loading','desc','article-modal','name','quick-edit-display-name','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','highlight-video-id','warn','Page\x201','info','Inactive\x20players\x20section\x20initialized','current-ribbon-user','Demotion','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','highlight-map-version','#e0e0e0','find','Create\x20test\x20match\x20modal\x20not\x20found','admin','loserComment','\x20from\x20','unknown','Successfully\x20promoted\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20','lastMatch','highlight-map','Modal\x20background\x20clicked','quick-edit-current-points','mapCreator','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','required','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','Error\x20loading\x20trophies:','approvedMatches','input[name=\x22set-elo-ladder\x22]:checked','create-achievement-highlight-btn','page','points-asc','manage-ribbons','Firebase\x20connection\x20test\x20failed:','docs','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','promote-ladder','Load\x20articles\x20data\x20clicked','Promoting\x20player\x20to\x20','article-id','demote-username','highlight-video-preview-container','Please\x20enter\x20valid\x20username\x20and\x20ELO','edit-match-winner-score','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','award-item-form','set-role-modal','current-ladder-display','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','timestamp','Switched\x20to\x20','load-ribbons-data','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','demotion','setAttribute','demoLink','Player\x20\x22','textContent','opacity','none','values','updatedAt','trophy-modal-title','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','flex','rank-distribution-chart','Page\x20','Points\x20data\x20loaded\x20successfully','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','Load\x20users\x20data\x20clicked','Loading\x20user\x20data...','inactive-players-search','Form\x20elements\x20are\x20missing','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','Error\x20saving\x20highlight:','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','add','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','players-ladder-selector','.edit-highlight-btn','destroy','string','.admin-action','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','highlight-match-link','edit-match-loser-comment','selected-user-info','backgroundColor','rgba(255,\x20255,\x20255,\x200.1)','getElementById','Error','Loaded\x20','submit','nonParticipants','\x22\x20not\x20found\x20in\x20','Setting\x20up\x20matches\x20action\x20buttons...','Match\x20ID\x20is\x20required','submittedBy','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','trophyId','click','Error\x20deleting\x20player:','error-state','points','closest','Error\x20awarding\x20item:','Load\x20highlights\x20data\x20clicked','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','includes','negative-change','playersD2','map','imageUrl','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','quick-points-amount','achievementImageUrl','fromDate','Found\x20specific\x20role:\x20','\x20users\x20already\x20had\x20points.','rankDistribution','test','inactive-players','edit-highlight-id','Load\x20trophies\x20data\x20clicked','floor','className','Failed\x20to\x20update\x20points:\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','highlight-description','quick-edit-user-id','create-match-highlight-btn','demote-modal','Failed\x20to\x20find\x20match:\x20','return\x20(function()\x20','borderRadius','active','Never\x20played','Error\x20loading\x20points\x20history:','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','sources','ribbon-target-user','Error\x20loading\x20players:','d1-next-page','migrate-points-btn','Error\x20removing\x20ribbon','createdAt','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Creating\x20test\x20match\x20without\x20player\x20validation...','position','getDate','\x22\x20already\x20has\x20this\x20trophy','input','highlight-winner-score','displayName','\x20Level\x20','manage-articles','Trophy\x20definition\x20deleted\x20successfully','promotedBy','View\x20history\x20clicked\x20for\x20user:','ladder','positive-change','Demoting\x20player\x20to\x20','set-elo-modal','ELO\x20rating\x20for\x20','roleAssignedBy','article-form','substring','Error\x20loading\x20highlight:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','Error\x20creating\x20activity\x20chart:','toLocaleString','manage-highlights','Error\x20loading\x20article\x20data:','Processing\x20points\x20edit:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','edit-elo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','\x20(winner)\x20vs\x20','highlight-achievement-player-container','user-search-results','creatorImageUrl','approvedMatchesD3','level','edit-match-loser-suicides','articles-table-body','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','catch','has','manage-players','Error\x20in\x20promotion:','exists','Error\x20loading\x20dashboard:','manage-points','users-table-body','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','Error\x20loading\x20points\x20data:','visibility','removeAttribute','highlight-match-date','Gold','.edit-role-btn','block','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','Setting\x20up\x20points\x20action\x20buttons...','D1\x20Players','Failed\x20to\x20load\x20match\x20data','roleAssignedAt','src','trim','edit-losses','edit-highlight-map-input','quick-edit-points-form','matchLink','Error\x20promoting\x20player:\x20','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','highlight-player-profile','./promotions.js','Found\x20player\x20with\x20current\x20ELO:\x20','matchInfo','Query\x20created:','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','push','.delete-match-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','success','.sidebar-nav\x20.nav-item[data-section=\x22','Firebase\x20connection\x20test\x20successful!','Searching\x20for\x20player\x20in\x20','data-section','add-ribbon-form','highlight-achievement-details','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>','N/A','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Load\x20history\x20data\x20clicked','edit-match-modal','getComputedStyle','edit-highlight-matchInfo-input','image','Trophy\x20\x22','manage-trophies','highlight-video-container','https://www.youtube.com/embed/','roleName','Submit\x20button\x20clicked\x20directly','set-elo-username','edit-highlight-achievementDetails-input','checked','assign-trophy-id','Auth:','elo','approvedMatchesD2','Set\x20default\x20ladder\x20to:','Unranked','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','display','color','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','highlight-modal','newElo','mapVersion','edit-highlight-matchDate-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x20to\x20','Create\x20test\x20match\x20form\x20submitted','Error\x20setting\x20up\x20admin\x20dashboard','\x20users.\x20','Setting\x20up\x20Manage\x20Points\x20section','No\x20matches\x20found','Load\x20players\x20data\x20clicked','data-ladder','then','match','style','addEventListener','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','No\x20user\x20ID\x20found\x20on\x20button','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','highlight-creator-image','Trophy\x20ID\x20and\x20username\x20are\x20required','inactive-players-table-body','Modal\x20element\x20found:','eloHistoryD2','mapPlayed','#000000','edit-highlight-achievementType-input','\x20points\x20history\x20entries','creator','Error\x20deleting\x20trophy\x20definition:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','result','highlights','Modal\x20opened\x20successfully','Invalid\x20action','.admin-section','points-user-search','toLowerCase','.edit-match-btn','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','set','Error\x20demoting\x20player:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','user-role','lastPointsModified','Dashboard\x20data\x20loaded\x20successfully','quick-points-reason','d2-next-page','highlight-achievement-player','loserDemoLink','matchId','.no-results','\x20in\x20','Error\x20resimulating\x20match:','Emerald','players','manage-matches','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','cloneNode','Error\x20opening\x20quick\x20edit\x20modal:','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','#28a745','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','Committing\x20batch\x20update\x20for\x20','assign-trophy-title','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','loserSuicides','cancel-trophy-btn','article-title','loserScore','UserProfile','target','eloHistory','<span\x20class=\x22no-role\x22>None</span>','View\x20player\x20details\x20for\x20','achievementPlayer','reset','assign-trophy-form','filter','value','get','description','achievement','matches-next-page','\x20points','DOMContentLoaded','All\x20fields\x20are\x20required','d3-prev-page','.edit-btn','Failed\x20to\x20save\x20trophy:\x20','querySelector','createElement','ribbons-overview-table-body','points-overview-table-body','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','points-overview-search','Please\x20enter\x20a\x20username','getDay','Failed\x20to\x20resimulate\x20match:\x20','cells','appendChild','empty','\x20total\x20players\x20in\x20the\x20','highlight-players-container','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','trophyDefinitions','Could\x20not\x20find\x20player\x20documents','Found\x20','sendPromotionNotification','firstVisible','load-articles-data','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','highlight-form','ribbons','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','Initializing\x20points\x20field\x20for\x20user\x20','dataset','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','openResimulateModal','articles','trophy-form','Non-Participants','Error\x20loading\x20highlights:','div','loserName','edit-match-winner-suicides','points-management-forms','refresh-points-overview','\x20<span\x20class=\x22user-source\x22>(','edit-player-modal','removeEventListener','playerRibbons','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','all','__proto__','Test\x20match','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','change','userId','forEach','delete-match-summary','Role\x20select\x20set\x20to:\x20','No\x20users\x20found\x20in\x20userProfiles\x20collection','winnerName','pendingMatches','Error\x20loading\x20inactive\x20players:','#elo-history-table-body\x20tr','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','Error\x20fetching\x20matches\x20for\x20','trophy-name','edit-highlight-mapCreator-input','inactive-days-filter','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','rejected-count','edit-match-loser','quick-edit-points-modal'];a4_0x3a9c=function(){return _0x1c90cd;};return a4_0x3a9c();}function setupMatchesActionButtons(){const _0x3d9561=a4_0x1fd11d;console[_0x3d9561(0xca)](_0x3d9561(0x1e8)),document['querySelectorAll'](_0x3d9561(0x2b7))['forEach'](_0x87d068=>{_0x87d068['addEventListener']('click',_0x44ce8f=>{const _0x2d0e40=a4_0x343e;_0x44ce8f[_0x2d0e40(0x13f)](),_0x44ce8f['stopPropagation']();const _0x505d25=_0x44ce8f['currentTarget'][_0x2d0e40(0x305)]['id'],_0x2b4eeb=_0x44ce8f['currentTarget']['closest']('tr'),_0x4e7696=_0x2b4eeb['dataset']['ladder'];console[_0x2d0e40(0xca)](_0x2d0e40(0xc9),_0x505d25,_0x4e7696),openEditMatchModal(_0x505d25,_0x4e7696);});}),document['querySelectorAll'](_0x3d9561(0x26a))[_0x3d9561(0x31d)](_0x263902=>{const _0x4e9aa8=_0x3d9561;_0x263902[_0x4e9aa8(0x29e)]('click',_0x5e8dd5=>{const _0x4fb825=_0x4e9aa8;_0x5e8dd5[_0x4fb825(0x13f)](),_0x5e8dd5[_0x4fb825(0x16a)]();const _0x3c1c50=_0x5e8dd5['currentTarget']['dataset']['id'],_0x2c52e4=_0x5e8dd5['currentTarget'][_0x4fb825(0x1f1)]('tr'),_0x1356c0=_0x2c52e4['dataset'][_0x4fb825(0x22a)]||currentLadder;console['log'](_0x4fb825(0xe4),_0x3c1c50,_0x1356c0),confirm(_0x4fb825(0x306))&&deleteMatch(_0x3c1c50,_0x1356c0);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x1726a0=a4_0x1fd11d,_0x2c4ee4=document[_0x1726a0(0x1e2)]('matches-search')['value'][_0x1726a0(0x2b6)](),_0x3d042f=document['querySelectorAll'](_0x1726a0(0x144));let _0x5ef50b=0x0;_0x3d042f['forEach'](_0x4df75c=>{const _0x3a87b5=_0x1726a0;if(_0x4df75c[_0x3a87b5(0x157)]['contains'](_0x3a87b5(0x16b))||_0x4df75c['classList'][_0x3a87b5(0x134)]('empty-state')||_0x4df75c['classList']['contains']('error-state'))return;const _0x5f4af3=_0x4df75c[_0x3a87b5(0x2f4)][0x1]['textContent']['toLowerCase'](),_0x2135be=_0x4df75c['cells'][0x2]['textContent']['toLowerCase'](),_0x202295=_0x4df75c[_0x3a87b5(0x2f4)][0x4]['textContent'][_0x3a87b5(0x2b6)]();_0x5f4af3['includes'](_0x2c4ee4)||_0x2135be['includes'](_0x2c4ee4)||_0x202295[_0x3a87b5(0x1f5)](_0x2c4ee4)?(_0x4df75c['style']['display']='',_0x5ef50b++):_0x4df75c['style'][_0x3a87b5(0x28b)]='none';});if(_0x5ef50b===0x0&&_0x3d042f['length']>0x0){const _0x2be2db=document['getElementById']('matches-table-body'),_0x2d88c2=_0x2be2db['querySelector'](_0x1726a0(0x2c4));if(!_0x2d88c2){const _0x56d1f1=document['createElement']('tr');_0x56d1f1['className']='no-results',_0x56d1f1[_0x1726a0(0xcb)]='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x2c4ee4+'\x27</td>',_0x2be2db['appendChild'](_0x56d1f1);}}else{const _0x37dca4=document['querySelector'](_0x1726a0(0x2c4));_0x37dca4&&_0x37dca4['remove']();}}function getMatchesFilters(){const _0x9ca2f=a4_0x1fd11d,_0x382014=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x3dc11e=document[_0x9ca2f(0x1e2)]('matches-start-date')['value'],_0x335bca=document[_0x9ca2f(0x1e2)]('matches-end-date')['value'];let _0x4d7c14=null,_0x4cbd92=null;return _0x3dc11e&&(_0x4d7c14=new Date(_0x3dc11e),_0x4d7c14['setHours'](0x0,0x0,0x0,0x0),_0x4d7c14=Timestamp['fromDate'](_0x4d7c14)),_0x335bca&&(_0x4cbd92=new Date(_0x335bca),_0x4cbd92['setHours'](0x17,0x3b,0x3b,0x3e7),_0x4cbd92=Timestamp['fromDate'](_0x4cbd92)),{'searchTerm':_0x382014,'startDate':_0x4d7c14,'endDate':_0x4cbd92};}async function applyMatchesFilters(){const _0x4d89b4=currentLadder['toLowerCase']();matchesPagination[_0x4d89b4]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x2d580d=a4_0x1fd11d;document['getElementById']('matches-start-date')['value']='',document['getElementById']('matches-end-date')[_0x2d580d(0x2e0)]='',document['getElementById']('matches-search')[_0x2d580d(0x2e0)]='';const _0xd25c61=currentLadder['toLowerCase']();matchesPagination[_0xd25c61]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x24d43d,_0xac4cb0){const _0x33f73e=a4_0x1fd11d,_0x1bbe0b=document['getElementById']('edit-match-modal');if(!_0x1bbe0b)return;try{const _0x5af1e9=_0xac4cb0==='D1'?_0x33f73e(0x1a4):_0xac4cb0==='D2'?_0x33f73e(0x287):_0x33f73e(0x240),_0x9ec549=doc(db,_0x5af1e9,_0x24d43d),_0x1491a5=await getDoc(_0x9ec549);if(!_0x1491a5['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x284387=_0x1491a5[_0x33f73e(0xc8)]();document['getElementById']('edit-match-id')[_0x33f73e(0x2e0)]=_0x24d43d,document['getElementById']('edit-match-ladder')['value']=_0xac4cb0,document['getElementById']('edit-match-winner')[_0x33f73e(0x2e0)]=_0x284387['winnerUsername']||'',document['getElementById']('edit-match-winner-score')[_0x33f73e(0x2e0)]=_0x284387['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')[_0x33f73e(0x2e0)]=_0x284387['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')[_0x33f73e(0x2e0)]=_0x284387['winnerComment']||'',document['getElementById'](_0x33f73e(0x32c))['value']=_0x284387['loserUsername']||'',document[_0x33f73e(0x1e2)]('edit-match-loser-score')[_0x33f73e(0x2e0)]=_0x284387['loserScore']||0x0,document[_0x33f73e(0x1e2)]('edit-match-loser-suicides')[_0x33f73e(0x2e0)]=_0x284387[_0x33f73e(0x2d3)]||0x0,document['getElementById'](_0x33f73e(0x1de))[_0x33f73e(0x2e0)]=_0x284387[_0x33f73e(0x196)]||'',document['getElementById']('edit-match-map')['value']=_0x284387['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')['value']=_0x284387['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0x284387[_0x33f73e(0x2c2)]||_0x284387[_0x33f73e(0x1c0)]||'',document['getElementById']('edit-match-title')[_0x33f73e(0x1c2)]='Edit\x20Match:\x20'+_0x284387['winnerUsername']+'\x20vs\x20'+_0x284387[_0x33f73e(0xe7)],_0x1bbe0b['classList'][_0x33f73e(0x1d5)](_0x33f73e(0x212));}catch(_0xf0f220){console['error']('Error\x20loading\x20match\x20data:',_0xf0f220),showNotification('Failed\x20to\x20load\x20match\x20data',_0x33f73e(0x100));}}function closeEditMatchModal(){const _0x9d8891=a4_0x1fd11d,_0x291075=document['getElementById'](_0x9d8891(0x277));_0x291075&&_0x291075[_0x9d8891(0x157)]['remove']('active');}async function saveEditedMatch(){const _0x1c8001=a4_0x1fd11d;try{const _0x166363=document['getElementById']('edit-match-id')['value'],_0x3e2273=document['getElementById'](_0x1c8001(0x105))['value'];if(!_0x166363||!_0x3e2273){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x5ece99=_0x3e2273==='D1'?_0x1c8001(0x1a4):_0x3e2273==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x166672=document[_0x1c8001(0x1e2)](_0x1c8001(0x178))['value']['trim'](),_0x4fcc8a=parseInt(document[_0x1c8001(0x1e2)](_0x1c8001(0x1b4))['value']),_0x2aa664=parseInt(document['getElementById'](_0x1c8001(0x30e))[_0x1c8001(0x2e0)]),_0x583355=document['getElementById'](_0x1c8001(0x177))['value'][_0x1c8001(0x25c)](),_0x185e71=document['getElementById']('edit-match-loser')['value']['trim'](),_0x36dbaf=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0xb4156c=parseInt(document[_0x1c8001(0x1e2)](_0x1c8001(0x242))['value']),_0x33b516=document[_0x1c8001(0x1e2)](_0x1c8001(0x1de))['value'][_0x1c8001(0x25c)](),_0x1dea00=document['getElementById']('edit-match-map')['value']['trim'](),_0x205c34=document['getElementById']('edit-match-winner-demo')['value'][_0x1c8001(0x25c)](),_0xc57b82=document['getElementById']('edit-match-loser-demo')[_0x1c8001(0x2e0)][_0x1c8001(0x25c)]();if(!_0x166672||!_0x185e71){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x5ece99,_0x166363),{'winnerUsername':_0x166672,'winnerScore':_0x4fcc8a,'winnerSuicides':_0x2aa664,'winnerComment':_0x583355,'loserUsername':_0x185e71,'loserScore':_0x36dbaf,'loserSuicides':_0xb4156c,'loserComment':_0x33b516,'mapPlayed':_0x1dea00,'winnerDemoLink':_0x205c34||null,'loserDemoLink':_0xc57b82||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully',_0x1c8001(0x26c)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x3e2273[_0x1c8001(0x2b6)]()]['page']);}catch(_0x50faed){console['error']('Error\x20saving\x20match:',_0x50faed),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x50faed['message'],_0x1c8001(0x100));}}async function openDeleteMatchModal(_0x200123,_0x5d9685){const _0x9a3908=a4_0x1fd11d;try{const _0x6a1ac3=_0x5d9685==='D1'?'approvedMatches':_0x5d9685==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3bc00c=doc(db,_0x6a1ac3,_0x200123),_0x11a35d=await getDoc(_0x3bc00c);if(!_0x11a35d['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x4fc207=_0x11a35d[_0x9a3908(0xc8)](),_0x5bc35b=document['getElementById'](_0x9a3908(0xd1));_0x5bc35b[_0x9a3908(0x305)][_0x9a3908(0x2c3)]=_0x200123,_0x5bc35b['dataset']['ladder']=_0x5d9685;const _0x348cec=_0x4fc207['approvedAt']?new Date(_0x4fc207[_0x9a3908(0x141)][_0x9a3908(0xd3)]*0x3e8)['toLocaleDateString']():'N/A',_0x5029c1=document['getElementById'](_0x9a3908(0x31e));_0x5029c1[_0x9a3908(0xcb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x348cec+_0x9a3908(0x2b8)+_0x4fc207['winnerUsername']+_0x9a3908(0x23c)+_0x4fc207['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x4fc207['winnerScore']||0x0)+'\x20-\x20'+(_0x4fc207[_0x9a3908(0x2d6)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x4fc207[_0x9a3908(0x2a9)]||_0x9a3908(0x274))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x5d9685+_0x9a3908(0x2f9),_0x5bc35b[_0x9a3908(0x157)]['add']('active');}catch(_0x6359e4){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x6359e4),showNotification(_0x9a3908(0x259),'error');}}function closeDeleteMatchModal(){const _0x476f00=a4_0x1fd11d,_0x18f017=document['getElementById']('delete-match-confirm-modal');_0x18f017&&(_0x18f017['classList'][_0x476f00(0x11f)]('active'),_0x18f017['removeAttribute'](_0x476f00(0x12a)),_0x18f017[_0x476f00(0x251)](_0x476f00(0x29a)));}async function confirmDeleteMatch(){const _0x3d2d2f=a4_0x1fd11d,_0x194180=document['getElementById']('delete-match-confirm-modal'),_0x185246=_0x194180[_0x3d2d2f(0x305)]['matchId'],_0x212e86=_0x194180['dataset'][_0x3d2d2f(0x22a)];if(!_0x185246||!_0x212e86){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x14d9c1=_0x212e86==='D1'?'approvedMatches':_0x212e86==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x14d9c1,_0x185246)),showNotification('Match\x20deleted\x20successfully',_0x3d2d2f(0x26c)),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x212e86['toLowerCase']()]['page']);}catch(_0x9686b1){console['error']('Error\x20deleting\x20match:',_0x9686b1),showNotification(_0x3d2d2f(0xc5)+_0x9686b1['message'],'error');}}async function saveHighlightChanges(){const _0x131241=a4_0x1fd11d,_0x270805=document['getElementById'](_0x131241(0x203))['value'],_0x469d98=document[_0x131241(0x1e2)](_0x131241(0x12c))['value'];let _0x3e8b2a={'title':document[_0x131241(0x1e2)]('edit-highlight-title-input')[_0x131241(0x2e0)][_0x131241(0x25c)](),'type':_0x469d98,'description':document['getElementById']('edit-highlight-description-input')['value'][_0x131241(0x25c)](),'videoId':document[_0x131241(0x1e2)](_0x131241(0xc6))[_0x131241(0x2e0)]['trim'](),'submittedBy':auth['currentUser'][_0x131241(0xe8)]};if(_0x469d98==='match'){_0x3e8b2a['matchInfo']=document[_0x131241(0x1e2)](_0x131241(0x279))['value'][_0x131241(0x25c)](),_0x3e8b2a[_0x131241(0x1f8)]=document['getElementById'](_0x131241(0x25e))['value']['trim']();const _0x442cd3=document['getElementById'](_0x131241(0x291))[_0x131241(0x2e0)];_0x3e8b2a[_0x131241(0xd7)]=_0x442cd3?Timestamp[_0x131241(0x1fd)](new Date(_0x442cd3)):null,_0x3e8b2a[_0x131241(0x321)]=document[_0x131241(0x1e2)]('edit-highlight-winnerName-input')['value']['trim'](),_0x3e8b2a['winnerScore']=document['getElementById']('edit-highlight-winnerScore-input')['value']['trim'](),_0x3e8b2a['loserName']=document[_0x131241(0x1e2)]('edit-highlight-loserName-input')['value']['trim'](),_0x3e8b2a['loserScore']=document[_0x131241(0x1e2)]('edit-highlight-loserScore-input')['value']['trim'](),_0x3e8b2a['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x3e8b2a['mapCreator']=null,_0x3e8b2a[_0x131241(0x290)]=null,_0x3e8b2a[_0x131241(0x23f)]=null,_0x3e8b2a['achievementPlayer']=null,_0x3e8b2a[_0x131241(0xfa)]=null,_0x3e8b2a['achievementDetails']=null,_0x3e8b2a['playerProfileUrl']=null;}else{if(_0x469d98===_0x131241(0x2ad))_0x3e8b2a['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x3e8b2a[_0x131241(0x19f)]=document['getElementById'](_0x131241(0x328))['value'][_0x131241(0x25c)](),_0x3e8b2a['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value']['trim'](),_0x3e8b2a[_0x131241(0x23f)]=document['getElementById']('edit-highlight-creatorImageUrl-input')['value'][_0x131241(0x25c)](),_0x3e8b2a['matchInfo']=null,_0x3e8b2a['matchDate']=null,_0x3e8b2a[_0x131241(0x321)]=null,_0x3e8b2a['winnerScore']=null,_0x3e8b2a[_0x131241(0x30d)]=null,_0x3e8b2a['loserScore']=null,_0x3e8b2a['matchLink']=null,_0x3e8b2a['achievementPlayer']=null,_0x3e8b2a['achievementType']=null,_0x3e8b2a[_0x131241(0xf5)]=null,_0x3e8b2a[_0x131241(0xda)]=null;else _0x469d98==='achievement'&&(_0x3e8b2a['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x3e8b2a['achievementType']=document['getElementById'](_0x131241(0x2ab))[_0x131241(0x2e0)]['trim'](),_0x3e8b2a['achievementDetails']=document['getElementById'](_0x131241(0x282))[_0x131241(0x2e0)]['trim'](),_0x3e8b2a['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x3e8b2a[_0x131241(0x266)]=null,_0x3e8b2a['map']=null,_0x3e8b2a[_0x131241(0xd7)]=null,_0x3e8b2a['winnerName']=null,_0x3e8b2a['winnerScore']=null,_0x3e8b2a[_0x131241(0x30d)]=null,_0x3e8b2a['loserScore']=null,_0x3e8b2a[_0x131241(0x260)]=null,_0x3e8b2a['mapCreator']=null,_0x3e8b2a['mapVersion']=null,_0x3e8b2a[_0x131241(0x23f)]=null);}try{if(_0x270805){_0x3e8b2a[_0x131241(0x1c6)]=serverTimestamp();const _0x489494=doc(db,'highlights',_0x270805);await updateDoc(_0x489494,_0x3e8b2a),showNotification(_0x131241(0xeb),'success');}else _0x3e8b2a[_0x131241(0x21c)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x3e8b2a),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x1f4c5d){console[_0x131241(0x100)](_0x131241(0x1d3),_0x1f4c5d),showNotification('Error\x20saving\x20highlight:\x20'+_0x1f4c5d['message'],_0x131241(0x100));}}async function resimulateMatch(){const _0x576959=a4_0x1fd11d;try{const _0x20b21b=document['getElementById']('resimulate-match-id')['value'];if(!_0x20b21b){showNotification(_0x576959(0x1e9),'error');return;}const _0x672566=auth['currentUser'];if(!_0x672566){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches',_0x576959(0x100));return;}const _0x41a220=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1cb65e=doc(db,_0x41a220,_0x20b21b),_0x320fc2=await getDoc(_0x1cb65e);if(!_0x320fc2['exists']()){showNotification(_0x576959(0x170),'error');return;}const _0x528736=_0x320fc2['data'](),_0x5637ac=_0x528736['approvedAt']?_0x528736['approvedAt']['toDate']()[_0x576959(0x235)]():_0x528736[_0x576959(0xd7)]?_0x528736[_0x576959(0xd7)]['toDate']?_0x528736['matchDate']['toDate']()['toLocaleString']():new Date(_0x528736[_0x576959(0xd7)])['toLocaleString']():'Unknown',_0x501734='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x528736[_0x576959(0x15c)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x528736['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x528736['winnerScore']+'-'+_0x528736['loserScore']+_0x576959(0x1fa)+(_0x528736['mapPlayed']||_0x528736['mapName']||_0x576959(0x120))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x5637ac+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x20b21b+_0x576959(0x1eb)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')[_0x576959(0xcb)]=_0x501734,document['getElementById']('match-details-container')[_0x576959(0x29d)]['display']='block',document[_0x576959(0x1e2)]('confirm-resimulate-btn')[_0x576959(0x29d)]['display']=_0x576959(0x255),window['pendingResimulateData']={'matchId':_0x20b21b,'matchData':_0x528736,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0xba04dc){console[_0x576959(0x100)]('Error\x20finding\x20match:',_0xba04dc),showNotification(_0x576959(0x20f)+_0xba04dc['message'],_0x576959(0x100));}}async function confirmResimulateMatch(){const _0x3648b7=a4_0x1fd11d;try{const {matchId:_0x464a48,matchData:_0x2a84fe,ladder:_0x5e8f30}=window['pendingResimulateData'];if(!_0x464a48||!_0x2a84fe){showNotification(_0x3648b7(0xfe),'error');return;}const _0x2e455a=_0x5e8f30==='D1'?'players':_0x5e8f30==='D2'?'playersD2':'playersD3',_0x163e4a=_0x5e8f30==='D1'?'eloHistory':_0x5e8f30==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x376ca8,_0x5458f6]=await Promise['all']([getDocs(query(collection(db,_0x2e455a),where('username','==',_0x2a84fe[_0x3648b7(0x15c)]))),getDocs(query(collection(db,_0x2e455a),where('username','==',_0x2a84fe['loserUsername'])))]);if(_0x376ca8[_0x3648b7(0x2f6)]||_0x5458f6['empty']){showNotification(_0x3648b7(0x2fb),'error');return;}const _0x1286bc=_0x376ca8[_0x3648b7(0x1ab)][0x0]['id'],_0x158000=_0x5458f6['docs'][0x0]['id'],_0x2a9a57=_0x376ca8['docs'][0x0]['data'](),_0x16bd5c=_0x5458f6['docs'][0x0]['data'](),[_0x315415,_0x346298]=await Promise['all']([getDocs(query(collection(db,_0x163e4a),where(_0x3648b7(0x15a),'==',_0x1286bc),where('matchId','==',_0x464a48))),getDocs(query(collection(db,_0x163e4a),where('playerId','==',_0x158000),where('matchId','==',_0x464a48)))]),_0x9f1fb=!_0x315415['empty'],_0x49217c=!_0x346298[_0x3648b7(0x2f6)],_0x28e25a='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x9f1fb?'✅\x20Exists':_0x3648b7(0x11e))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x49217c?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x2a9a57[_0x3648b7(0x16c)]||_0x3648b7(0x120))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x16bd5c['eloRating']||_0x3648b7(0x120))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x2a9a57['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x16bd5c[_0x3648b7(0x21f)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x28e25a,document['getElementById']('validation-results-container')[_0x3648b7(0x29d)]['display']='block';if(_0x9f1fb&&_0x49217c){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x4ce0ad=_0x2a84fe['approvedAt']||_0x2a84fe[_0x3648b7(0xd7)]||serverTimestamp(),[_0x3d18d6,_0x2b8aba]=await Promise['all']([getPlayerEloAtTime(_0x1286bc,_0x4ce0ad,_0x163e4a),getPlayerEloAtTime(_0x158000,_0x4ce0ad,_0x163e4a)]),{calculateElo:_0x256e29}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x590ef9,newLoserRating:_0x41d37e}=_0x256e29(_0x3d18d6,_0x2b8aba),_0x156bdd=_0x2a9a57['position']||Number['MAX_SAFE_INTEGER'],_0x392367=_0x16bd5c['position']||Number[_0x3648b7(0x16d)];let _0x1bd4a9=_0x156bdd,_0x1648f0=_0x392367;_0x156bdd>_0x392367&&(_0x1bd4a9=_0x392367,_0x1648f0=_0x392367+0x1);const _0x38c0e6=writeBatch(db),_0x987374=doc(db,_0x2e455a,_0x1286bc);_0x38c0e6['update'](_0x987374,{'eloRating':_0x590ef9,'position':_0x1bd4a9,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x3648b7(0x119)]});const _0x42d9de=doc(db,_0x2e455a,_0x158000);_0x38c0e6['update'](_0x42d9de,{'eloRating':_0x41d37e,'position':_0x1648f0,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x3648b7(0x119)]});if(_0x156bdd>_0x392367){const _0x280107=await getDocs(query(collection(db,_0x2e455a),where(_0x3648b7(0x21f),'>',_0x392367),where(_0x3648b7(0x21f),'<',_0x156bdd)));_0x280107[_0x3648b7(0x31d)](_0x5b6bd6=>{const _0x59f940=doc(db,_0x2e455a,_0x5b6bd6['id']),_0x417ed2=_0x5b6bd6['data']()['position'];_0x38c0e6['update'](_0x59f940,{'position':_0x417ed2+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x9f1fb){const _0x551899=doc(collection(db,_0x163e4a));_0x38c0e6['set'](_0x551899,{'playerId':_0x1286bc,'player':_0x2a84fe['winnerUsername'],'previousElo':_0x3d18d6,'newElo':_0x590ef9,'eloChange':_0x590ef9-_0x3d18d6,'opponentId':_0x158000,'opponent':_0x2a84fe['loserUsername'],'matchResult':'win','previousPosition':_0x156bdd,'newPosition':_0x1bd4a9,'positionChange':_0x1bd4a9-_0x156bdd,'matchId':_0x464a48,'timestamp':_0x4ce0ad,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x5e8f30,'matchScore':_0x2a84fe['winnerScore']+'-'+_0x2a84fe['loserScore'],'mapPlayed':_0x2a84fe['mapPlayed']||_0x2a84fe['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x49217c){const _0x46072f=doc(collection(db,_0x163e4a));_0x38c0e6[_0x3648b7(0x2b9)](_0x46072f,{'playerId':_0x158000,'player':_0x2a84fe['loserUsername'],'previousElo':_0x2b8aba,'newElo':_0x41d37e,'eloChange':_0x41d37e-_0x2b8aba,'opponentId':_0x1286bc,'opponent':_0x2a84fe[_0x3648b7(0x15c)],'matchResult':'loss','previousPosition':_0x392367,'newPosition':_0x1648f0,'positionChange':_0x1648f0-_0x392367,'matchId':_0x464a48,'timestamp':_0x4ce0ad,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x3648b7(0xcc)][_0x3648b7(0x119)],'gameMode':_0x5e8f30,'matchScore':_0x2a84fe[_0x3648b7(0xfb)]+'-'+_0x2a84fe['loserScore'],'mapPlayed':_0x2a84fe['mapPlayed']||_0x2a84fe['mapName']||_0x3648b7(0x120),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x2aa52d=_0x5e8f30==='D1'?'approvedMatches':_0x5e8f30==='D2'?'approvedMatchesD2':_0x3648b7(0x240),_0x565872=doc(db,_0x2aa52d,_0x464a48);_0x38c0e6[_0x3648b7(0x145)](_0x565872,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':_0x3648b7(0x28a),'originalWinnerElo':_0x2a9a57[_0x3648b7(0x16c)],'originalLoserElo':_0x16bd5c[_0x3648b7(0x16c)],'originalWinnerPosition':_0x156bdd,'originalLoserPosition':_0x392367,'resimulatedWinnerElo':_0x590ef9,'resimulatedLoserElo':_0x41d37e,'resimulatedWinnerPosition':_0x1bd4a9,'resimulatedLoserPosition':_0x1648f0}),await _0x38c0e6['commit']();const _0x45131f=(!_0x9f1fb?0x1:0x0)+(!_0x49217c?0x1:0x0),_0x1e2af5=_0x156bdd!==_0x1bd4a9||_0x392367!==_0x1648f0;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x45131f+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x3d18d6+'→'+_0x590ef9+'\x20(+'+(_0x590ef9-_0x3d18d6)+'),\x20')+('Loser\x20'+_0x2b8aba+'→'+_0x41d37e+'\x20('+(_0x41d37e-_0x2b8aba)+').\x20')+(''+(_0x1e2af5?'Positions\x20updated:\x20Winner\x20'+_0x156bdd+'→'+_0x1bd4a9+',\x20Loser\x20'+_0x392367+'→'+_0x1648f0:_0x3648b7(0x13d))),_0x3648b7(0x26c)),closeResimulateModal(),document[_0x3648b7(0x2eb)]('#players.content-section.active')&&loadPlayersData();}catch(_0x5dbd97){console['error'](_0x3648b7(0x2c6),_0x5dbd97),showNotification(_0x3648b7(0x2f3)+_0x5dbd97['message'],_0x3648b7(0x100));}}async function getPlayerEloAtTime(_0x21c3b6,_0x1cebdb,_0x24b2b5){try{const _0x5bb6e2=_0x1cebdb['toDate']?_0x1cebdb['toDate']():new Date(_0x1cebdb),_0x243fd3=query(collection(db,_0x24b2b5),where('playerId','==',_0x21c3b6),where('timestamp','<',_0x1cebdb),orderBy('timestamp','desc'),limit(0x1)),_0x29fa36=await getDocs(_0x243fd3);if(!_0x29fa36['empty']){const _0x53f9b3=_0x29fa36['docs'][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x21c3b6+'\x20before\x20match:\x20'+_0x53f9b3['newElo']),_0x53f9b3['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x21c3b6+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x59d30a){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x21c3b6+':',_0x59d30a),0x4b0;}}function openResimulateModal(){const _0x511f02=a4_0x1fd11d;console['log']('openResimulateModal\x20called!');const _0x3eb3a5=document['getElementById']('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x3eb3a5);if(!_0x3eb3a5){console['error']('Modal\x20element\x20not\x20found!');return;}_0x3eb3a5['style']['display']='block',_0x3eb3a5[_0x511f02(0x29d)][_0x511f02(0x250)]='visible',_0x3eb3a5['style']['opacity']='1',_0x3eb3a5[_0x511f02(0x157)]['add']('active'),console[_0x511f02(0xca)]('Modal\x20should\x20now\x20be\x20visible'),console[_0x511f02(0xca)]('Modal\x20computed\x20styles:',window[_0x511f02(0x278)](_0x3eb3a5)['display']);const _0x3902cd=document[_0x511f02(0x1e2)]('match-details-container'),_0x2da719=document[_0x511f02(0x1e2)]('validation-results-container'),_0x3289c3=document['getElementById']('confirm-resimulate-btn'),_0x32503f=document['getElementById']('resimulate-match-id');if(_0x3902cd)_0x3902cd['innerHTML']='';if(_0x2da719)_0x2da719['innerHTML']='';if(_0x3289c3)_0x3289c3['style']['display']='none';if(_0x32503f)_0x32503f['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x59362c=a4_0x1fd11d;document[_0x59362c(0x1e2)](_0x59362c(0x149))['style']['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window[a4_0x1fd11d(0x307)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x394e3f=a4_0x1fd11d;console[_0x394e3f(0xca)](_0x394e3f(0x122));try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x394e3f(0x1cc),'success');}catch(_0x5ce779){console['error'](_0x394e3f(0x24f),_0x5ce779),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x5ce779['message'],_0x394e3f(0x100));}}function renderPointsOverview(_0x46a730){const _0x541836=a4_0x1fd11d,_0x4e46c1=document['getElementById']('points-overview-table-body');if(!_0x4e46c1)return;if(_0x46a730['length']===0x0){_0x4e46c1[_0x541836(0xcb)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x4e46c1[_0x541836(0xcb)]='',_0x46a730['forEach'](_0x55e0a3=>{const _0x410b45=_0x541836,_0x468619=document['createElement']('tr'),_0x33e73d=_0x55e0a3['displayName']||_0x55e0a3['username']||_0x410b45(0xdb),_0x4a8c87=_0x55e0a3['email']||'No\x20email',_0x296e38=_0x55e0a3[_0x410b45(0x1f0)]||0x0,_0xc63697=_0x55e0a3[_0x410b45(0x2bd)]?new Date(_0x55e0a3[_0x410b45(0x2bd)][_0x410b45(0xd3)]*0x3e8)['toLocaleDateString']():_0x410b45(0x102);_0x468619['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x33e73d+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4a8c87+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x296e38>0x3e8?'high-points':_0x296e38>0x1f4?'medium-points':'low-points')+_0x410b45(0x1d6)+_0x296e38['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xc63697+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x55e0a3['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x55e0a3['id']+_0x410b45(0x113),_0x4e46c1[_0x410b45(0x2f5)](_0x468619);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x1f68d1=a4_0x1fd11d;console['log'](_0x1f68d1(0x257));const _0x13266d=document['querySelectorAll']('.quick-edit-btn');console['log'](_0x1f68d1(0x2fc)+_0x13266d['length']+'\x20quick\x20edit\x20buttons'),_0x13266d['forEach'](_0x1e0e57=>{const _0x5153b3=_0x1f68d1,_0x28e991=_0x1e0e57[_0x5153b3(0x2cb)](!![]);_0x1e0e57['parentNode'][_0x5153b3(0x138)](_0x28e991,_0x1e0e57);});const _0x34b45c=document['querySelectorAll'](_0x1f68d1(0x173));console['log']('Found\x20'+_0x34b45c['length']+_0x1f68d1(0x13c)),_0x34b45c[_0x1f68d1(0x31d)](_0x3f7b62=>{const _0x920af0=_0x1f68d1,_0x455d2c=_0x3f7b62[_0x920af0(0x2cb)](!![]);_0x3f7b62['parentNode']['replaceChild'](_0x455d2c,_0x3f7b62);}),document[_0x1f68d1(0x117)]('.quick-edit-btn')['forEach'](_0x2aac16=>{_0x2aac16['addEventListener']('click',function(_0x1ab28f){const _0x33f728=a4_0x343e;_0x1ab28f['preventDefault'](),_0x1ab28f['stopPropagation']();const _0x45e998=this[_0x33f728(0x305)]['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x45e998);if(!_0x45e998){console[_0x33f728(0x100)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style'][_0x33f728(0x1c3)]='0.6',setTimeout(()=>{const _0x590831=_0x33f728;this[_0x590831(0x29d)]['opacity']='1';},0xc8),openQuickEditModal(_0x45e998);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x2669b6=>{_0x2669b6['addEventListener']('click',function(_0x2e7076){const _0x376166=a4_0x343e;_0x2e7076['preventDefault'](),_0x2e7076['stopPropagation']();const _0x4369be=this['dataset']['userId'];console[_0x376166(0xca)](_0x376166(0x229),_0x4369be);if(!_0x4369be){console[_0x376166(0x100)](_0x376166(0x2a1));return;}this['style']['opacity']='0.6',setTimeout(()=>{const _0x3a84d1=_0x376166;this[_0x3a84d1(0x29d)][_0x3a84d1(0x1c3)]='1';},0xc8),loadUserPointsHistory(_0x4369be);});}),console[_0x1f68d1(0xca)]('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x5cb0b8){const _0x3985c9=a4_0x1fd11d;console[_0x3985c9(0xca)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x5cb0b8);const _0x14d263=document[_0x3985c9(0x1e2)]('quick-edit-points-modal');if(!_0x14d263){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification(_0x3985c9(0x1cf),_0x3985c9(0x18c));const _0x30e987=doc(db,'userProfiles',_0x5cb0b8),_0x32e1fe=await getDoc(_0x30e987);if(!_0x32e1fe['exists']()){showNotification(_0x3985c9(0xfc),_0x3985c9(0x100));return;}const _0x5956e2=_0x32e1fe[_0x3985c9(0xc8)]();console[_0x3985c9(0xca)]('User\x20data\x20loaded:',_0x5956e2);const _0x27d5a0=document['getElementById'](_0x3985c9(0x20c)),_0x5ad4db=document[_0x3985c9(0x1e2)](_0x3985c9(0x186)),_0x6949ed=document['getElementById']('quick-edit-email'),_0x509f1b=document[_0x3985c9(0x1e2)](_0x3985c9(0x19e)),_0xacab52=document['getElementById']('quick-edit-points-form');if(!_0x27d5a0||!_0x5ad4db||!_0x6949ed||!_0x509f1b||!_0xacab52){console['error'](_0x3985c9(0xf8)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x27d5a0['value']=_0x5cb0b8,_0x5ad4db['textContent']=_0x5956e2[_0x3985c9(0x224)]||_0x5956e2['username']||'Unknown\x20User',_0x6949ed['textContent']=_0x5956e2['email']||'No\x20email',_0x509f1b[_0x3985c9(0x1c2)]=(_0x5956e2['points']||0x0)[_0x3985c9(0x235)](),_0xacab52[_0x3985c9(0x2dd)]();const _0x2ff111=document['getElementById']('quick-add');_0x2ff111&&(_0x2ff111['checked']=!![]);_0x14d263[_0x3985c9(0x157)]['add']('active'),console['log'](_0x3985c9(0x2b2));const _0x1d0f73=document[_0x3985c9(0x1e2)](_0x3985c9(0x1fb));_0x1d0f73&&setTimeout(()=>_0x1d0f73['focus'](),0x64);}catch(_0xc57879){console[_0x3985c9(0x100)](_0x3985c9(0x2cc),_0xc57879),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0xc57879[_0x3985c9(0x125)],_0x3985c9(0x100));}}function closeQuickEditModal(){const _0x55e680=a4_0x1fd11d,_0x405bc1=document['getElementById'](_0x55e680(0x32d));_0x405bc1&&_0x405bc1[_0x55e680(0x157)]['remove']('active');}async function handleQuickEditPoints(_0xf487ec){const _0x23f1ee=a4_0x1fd11d;_0xf487ec['preventDefault']();const _0xb1112=document[_0x23f1ee(0x1e2)](_0x23f1ee(0x20c))[_0x23f1ee(0x2e0)],_0xc91f07=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0x59de6f=parseInt(document['getElementById']('quick-points-amount')['value']),_0x55df80=document['getElementById'](_0x23f1ee(0x2bf))['value']['trim']();console['log'](_0x23f1ee(0x238),{'userId':_0xb1112,'action':_0xc91f07,'amount':_0x59de6f,'reason':_0x55df80});if(!_0xb1112||!_0x59de6f||_0x59de6f<0x0){showNotification('Please\x20enter\x20valid\x20data',_0x23f1ee(0x100));return;}try{await modifyUserPoints(_0xb1112,_0xc91f07,_0x59de6f,_0x55df80),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console[_0x23f1ee(0xca)]('Points\x20updated\x20successfully\x20for\x20user:',_0xb1112);}catch(_0x414297){console[_0x23f1ee(0x100)](_0x23f1ee(0x11c),_0x414297),showNotification(_0x23f1ee(0x207)+_0x414297['message'],_0x23f1ee(0x100));}}async function searchUsersForPoints(){const _0x8037b1=a4_0x1fd11d,_0xa53e8f=document[_0x8037b1(0x1e2)]('points-user-search')['value'][_0x8037b1(0x25c)]()['toLowerCase'](),_0x574d9c=document['getElementById']('user-search-results');if(!_0xa53e8f||_0xa53e8f['length']<0x2){_0x574d9c[_0x8037b1(0xcb)]='';return;}_0x574d9c['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x13f670=collection(db,'userProfiles'),_0x2c4b51=await getDocs(_0x13f670),_0x5f2247=[];_0x2c4b51['forEach'](_0xf0eaf4=>{const _0x3b6b87=_0xf0eaf4['data'](),_0x32a48a=(_0x3b6b87['displayName']||_0x3b6b87['username']||'')['toLowerCase'](),_0x430aee=(_0x3b6b87['email']||'')['toLowerCase']();(_0x32a48a['includes'](_0xa53e8f)||_0x430aee['includes'](_0xa53e8f))&&_0x5f2247['push']({'id':_0xf0eaf4['id'],..._0x3b6b87});});if(_0x5f2247[_0x8037b1(0x116)]===0x0){_0x574d9c['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x574d9c['innerHTML']='',_0x5f2247['forEach'](_0x1c3718=>{const _0x49f4ba=_0x8037b1,_0x3de73f=document['createElement'](_0x49f4ba(0x30c));_0x3de73f[_0x49f4ba(0x206)]='search-result-item',_0x3de73f['innerHTML']=_0x49f4ba(0x239)+(_0x1c3718['displayName']||_0x1c3718[_0x49f4ba(0x10c)]||_0x49f4ba(0x120))+_0x49f4ba(0x262)+(_0x1c3718['email']||'No\x20email')+_0x49f4ba(0xf0)+(_0x1c3718[_0x49f4ba(0x1f0)]||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3de73f['addEventListener']('click',()=>selectUserForPoints(_0x1c3718)),_0x574d9c['appendChild'](_0x3de73f);});}catch(_0x561e64){console['error']('Error\x20searching\x20users:',_0x561e64),_0x574d9c['innerHTML']=_0x8037b1(0x2cd);}}function selectUserForPoints(_0x5ad04d){const _0x2959d0=a4_0x1fd11d;document[_0x2959d0(0x1e2)]('selected-user-name')['textContent']=_0x5ad04d[_0x2959d0(0x224)]||_0x5ad04d['username']||_0x2959d0(0xdb),document[_0x2959d0(0x1e2)]('selected-user-points')['textContent']=(_0x5ad04d['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x5ad04d['id'],document['getElementById'](_0x2959d0(0x1df))['style'][_0x2959d0(0x28b)]='block',document['getElementById'](_0x2959d0(0x30f))[_0x2959d0(0x29d)]['display']='block',document[_0x2959d0(0x1e2)](_0x2959d0(0x23e))['innerHTML']='',document[_0x2959d0(0x1e2)]('points-user-search')[_0x2959d0(0x2e0)]='';}async function handleModifyPoints(_0x573ddd){const _0x485160=a4_0x1fd11d;_0x573ddd['preventDefault']();const _0x375694=document[_0x485160(0x1e2)](_0x485160(0x180))[_0x485160(0x2e0)],_0x4dacd2=document['getElementById'](_0x485160(0xef))['value'],_0x157d0e=parseInt(document['getElementById']('points-amount')['value']),_0x5a184f=document[_0x485160(0x1e2)]('points-reason')['value']['trim']();if(!_0x375694||!_0x157d0e||_0x157d0e<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x375694,_0x4dacd2,_0x157d0e,_0x5a184f),document['getElementById'](_0x485160(0x123))['reset']();const _0x40f123=doc(db,'userProfiles',_0x375694),_0x2b82cb=await getDoc(_0x40f123);if(_0x2b82cb['exists']()){const _0x40f870=_0x2b82cb['data']();document['getElementById']('selected-user-points')['textContent']=(_0x40f870['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x3a1707){console['error'](_0x485160(0x106),_0x3a1707),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x3a1707['message'],'error');}}async function loadPointsHistory(){const _0x34cb42=a4_0x1fd11d,_0x493b6b=document[_0x34cb42(0x1e2)]('points-history-table-body');if(!_0x493b6b)return;_0x493b6b['innerHTML']=_0x34cb42(0x32a);try{const _0x317816=collection(db,'pointsHistory'),_0x4bb0b6=query(_0x317816,orderBy('timestamp','desc'),limit(0x32)),_0x5a1930=await getDocs(_0x4bb0b6);if(_0x5a1930['empty']){_0x493b6b['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x493b6b['innerHTML']='',_0x5a1930['forEach'](_0x191b74=>{const _0x1a226c=_0x34cb42,_0x508a69=_0x191b74[_0x1a226c(0xc8)](),_0x53ccb4=document[_0x1a226c(0x2ec)]('tr'),_0x211933=_0x508a69['timestamp']?new Date(_0x508a69[_0x1a226c(0x1ba)]['seconds']*0x3e8)[_0x1a226c(0x235)]():'Unknown';let _0x31b2f7='';switch(_0x508a69['action']){case'add':_0x31b2f7='Added\x20'+_0x508a69['amount']+_0x1a226c(0x2e5);break;case'subtract':_0x31b2f7='Subtracted\x20'+_0x508a69['amount']+'\x20points';break;case _0x1a226c(0x2b9):_0x31b2f7='Set\x20to\x20'+_0x508a69['amount']+'\x20points';break;default:_0x31b2f7=_0x508a69['action']+'\x20'+_0x508a69['amount']+_0x1a226c(0x2e5);}_0x53ccb4['innerHTML']=_0x1a226c(0x1b5)+_0x211933+_0x1a226c(0xed)+(_0x508a69['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x31b2f7+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x508a69['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x508a69['previousPoints']||0x0)+_0x1a226c(0x101)+(_0x508a69['newPoints']||0x0)+_0x1a226c(0x292)+(_0x508a69['reason']||'No\x20reason\x20provided')+_0x1a226c(0xed)+(_0x508a69['adminEmail']||'Unknown\x20Admin')+_0x1a226c(0x26b),_0x493b6b[_0x1a226c(0x2f5)](_0x53ccb4);});}catch(_0x328ef6){console['error'](_0x34cb42(0x214),_0x328ef6),_0x493b6b['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x328ef6['message']+'</td></tr>';}}function filterPointsOverview(){const _0x4273b6=a4_0x1fd11d,_0x4cad73=document['getElementById'](_0x4273b6(0x2f0))['value'][_0x4273b6(0x2b6)]();if(!window['allUsersPoints'])return;const _0x552d0e=window['allUsersPoints'][_0x4273b6(0x2df)](_0x583d58=>{const _0x55f9b5=_0x4273b6,_0x2c3a64=(_0x583d58[_0x55f9b5(0x224)]||_0x583d58['username']||'')[_0x55f9b5(0x2b6)](),_0x289fac=(_0x583d58[_0x55f9b5(0xe8)]||'')['toLowerCase']();return _0x2c3a64[_0x55f9b5(0x1f5)](_0x4cad73)||_0x289fac['includes'](_0x4cad73);});renderPointsOverview(_0x552d0e);}function sortPointsOverview(){const _0x1eb9ee=a4_0x1fd11d,_0x3919ff=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x3aafb5=[...window['allUsersPoints']];switch(_0x3919ff){case _0x1eb9ee(0x107):_0x3aafb5['sort']((_0x185349,_0x470a30)=>(_0x470a30['points']||0x0)-(_0x185349['points']||0x0));break;case _0x1eb9ee(0x1a8):_0x3aafb5[_0x1eb9ee(0xee)]((_0x539566,_0x466aa0)=>(_0x539566['points']||0x0)-(_0x466aa0[_0x1eb9ee(0x1f0)]||0x0));break;case'name-asc':_0x3aafb5[_0x1eb9ee(0xee)]((_0x1bc005,_0x3c8b09)=>{const _0x3e7d88=_0x1eb9ee,_0x2de2a7=(_0x1bc005[_0x3e7d88(0x224)]||_0x1bc005['username']||'')[_0x3e7d88(0x2b6)](),_0x56c7ac=(_0x3c8b09[_0x3e7d88(0x224)]||_0x3c8b09[_0x3e7d88(0x10c)]||'')['toLowerCase']();return _0x2de2a7['localeCompare'](_0x56c7ac);});break;case'name-desc':_0x3aafb5[_0x1eb9ee(0xee)]((_0xfdb27f,_0x139228)=>{const _0xb82c65=_0x1eb9ee,_0x5d1995=(_0xfdb27f['displayName']||_0xfdb27f['username']||'')[_0xb82c65(0x2b6)](),_0x40cb63=(_0x139228[_0xb82c65(0x224)]||_0x139228['username']||'')['toLowerCase']();return _0x40cb63['localeCompare'](_0x5d1995);});break;}renderPointsOverview(_0x3aafb5);}async function handleAwardItem(_0x29d9c6){const _0x45c1f6=a4_0x1fd11d;_0x29d9c6['preventDefault']();const _0x180f1a=document['getElementById']('selected-user-id')[_0x45c1f6(0x2e0)],_0xc33fbf=document['getElementById']('store-item-select')['value'],_0x50af59=document['getElementById']('award-reason')['value']['trim']();if(!_0x180f1a||!_0xc33fbf){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')['reset']();}catch(_0x2d9369){console['error'](_0x45c1f6(0x1f2),_0x2d9369),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x2d9369[_0x45c1f6(0x125)],'error');}}async function loadUserPointsHistory(_0x6eaf01){const _0x3098da=a4_0x1fd11d;try{const _0x4999ea=collection(db,'pointsHistory'),_0x12fd41=query(_0x4999ea,where('userId','==',_0x6eaf01),orderBy('timestamp','desc')),_0x1ebd33=await getDocs(_0x12fd41);console['log'](_0x3098da(0x2fc)+_0x1ebd33['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x6eaf01),showNotification('User\x20has\x20'+_0x1ebd33[_0x3098da(0x14e)]+_0x3098da(0x2ac),'info');}catch(_0x895c77){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x895c77),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x586766=a4_0x1fd11d;try{console[_0x586766(0xca)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x4343bc=collection(db,'userProfiles'),_0x3cb2bd=await getDocs(_0x4343bc);if(_0x3cb2bd['empty']){console['log'](_0x586766(0x320));return;}let _0x3ec955=0x0,_0x461882=0x0;const _0x49744c=writeBatch(db);let _0x4292d3=0x0;return console['log']('Found\x20'+_0x3cb2bd['size']+'\x20users\x20to\x20check...'),_0x3cb2bd[_0x586766(0x31d)](_0x3f23f5=>{const _0x173b7a=_0x586766,_0x2ff651=_0x3f23f5['data']();_0x2ff651['points']===undefined||_0x2ff651[_0x173b7a(0x1f0)]===null?(_0x49744c[_0x173b7a(0x145)](_0x3f23f5[_0x173b7a(0x135)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x3ec955++,_0x4292d3++,console['log']('Queued\x20'+(_0x2ff651['displayName']||_0x2ff651[_0x173b7a(0x10c)]||_0x2ff651[_0x173b7a(0xe8)]||_0x173b7a(0x120))+'\x20for\x20points\x20initialization')):(_0x461882++,console[_0x173b7a(0xca)]((_0x2ff651['displayName']||_0x2ff651['username']||_0x2ff651['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x2ff651[_0x173b7a(0x1f0)])),_0x4292d3>=0x1f4&&console[_0x173b7a(0x18a)](_0x173b7a(0x14f));}),_0x3ec955>0x0?(console['log'](_0x586766(0x2d0)+_0x3ec955+'\x20users...'),await _0x49744c['commit'](),console[_0x586766(0xca)]('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x3ec955+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console[_0x586766(0xca)]('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x3cb2bd['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x3ec955+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x461882),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x3ec955+_0x586766(0x296)+_0x461882+_0x586766(0x1ff),'success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x3cb2bd['size'],'usersUpdated':_0x3ec955,'usersAlreadyHadPoints':_0x461882};}catch(_0x3dc63b){console['error']('Error\x20initializing\x20points\x20field:',_0x3dc63b),showNotification('Error\x20initializing\x20points:\x20'+_0x3dc63b[_0x586766(0x125)],_0x586766(0x100));throw _0x3dc63b;}}function addPointsMigrationButton(){const _0x3518dc=a4_0x1fd11d,_0x5b1153=document[_0x3518dc(0x1e2)]('manage-points');if(!_0x5b1153)return;if(document[_0x3518dc(0x1e2)](_0x3518dc(0x21a)))return;const _0x3e14c9=document['createElement']('div');_0x3e14c9['className']='migration-section',_0x3e14c9[_0x3518dc(0x29d)]['marginBottom']='20px',_0x3e14c9[_0x3518dc(0x29d)]['padding']='15px',_0x3e14c9[_0x3518dc(0x29d)]['backgroundColor']=_0x3518dc(0xd0),_0x3e14c9['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x3e14c9['style'][_0x3518dc(0x211)]='5px',_0x3e14c9['innerHTML']=_0x3518dc(0x1bd);const _0x23004f=_0x5b1153[_0x3518dc(0x2eb)]('.section-header');_0x23004f&&_0x23004f['insertAdjacentElement']('afterend',_0x3e14c9),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x1983ec=_0x3518dc;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style'][_0x1983ec(0x1e0)]=_0x1983ec(0x2ce),setTimeout(()=>{const _0x47e29a=_0x1983ec;_0x3e14c9['style']['display']=_0x47e29a(0x1c4);},0xbb8);}catch(_0x5dd8c1){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x33be7b=a4_0x1fd11d;console['log'](_0x33be7b(0x297)),addPointsMigrationButton();const _0x254800=document[_0x33be7b(0x1e2)](_0x33be7b(0x2b5));_0x254800&&_0x254800[_0x33be7b(0x29e)]('input',debounce(searchUsersForPoints,0x12c));const _0x57c63d=document['getElementById'](_0x33be7b(0x123));_0x57c63d&&_0x57c63d['addEventListener']('submit',handleModifyPoints);const _0x54c904=document[_0x33be7b(0x1e2)](_0x33be7b(0x1b6));_0x54c904&&_0x54c904['addEventListener'](_0x33be7b(0x1e5),handleAwardItem);const _0x598e66=document['getElementById']('points-overview-search');_0x598e66&&_0x598e66['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0xbbe73c=document['getElementById']('points-sort-order');_0xbbe73c&&_0xbbe73c['addEventListener'](_0x33be7b(0x31b),sortPointsOverview);const _0x45d38c=document[_0x33be7b(0x1e2)](_0x33be7b(0x310));_0x45d38c&&_0x45d38c[_0x33be7b(0x29e)](_0x33be7b(0x1ed),loadPointsOverview);const _0x3ecfaf=document[_0x33be7b(0x1e2)](_0x33be7b(0x32d));if(_0x3ecfaf){console['log'](_0x33be7b(0x187));const _0x1dc889=_0x3ecfaf[_0x33be7b(0x2eb)](_0x33be7b(0xe2));_0x1dc889?_0x1dc889['addEventListener']('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x2c50ad=document['getElementById']('cancel-quick-edit');_0x2c50ad?_0x2c50ad['addEventListener']('click',function(){const _0x37e4b8=_0x33be7b;console[_0x37e4b8(0xca)]('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x226033=document[_0x33be7b(0x1e2)](_0x33be7b(0x25f));_0x226033?_0x226033[_0x33be7b(0x29e)]('submit',function(_0xa5bc6){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0xa5bc6);}):console['error'](_0x33be7b(0x15e)),_0x3ecfaf['addEventListener'](_0x33be7b(0x1ed),function(_0x3defe2){const _0x2dfa27=_0x33be7b;_0x3defe2['target']===_0x3ecfaf&&(console['log'](_0x2dfa27(0x19d)),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x10c8be=a4_0x1fd11d;console[_0x10c8be(0xca)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x283ba8=document['getElementById']('ribbon-user-search');_0x283ba8&&_0x283ba8['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0xbe401=document['getElementById']('search-ribbon-user-btn');_0xbe401&&_0xbe401['addEventListener']('click',searchRibbonUser);const _0x5ee1cc=document['getElementById'](_0x10c8be(0x271));_0x5ee1cc&&_0x5ee1cc[_0x10c8be(0x29e)]('submit',addRibbon),_0x283ba8&&_0x283ba8['addEventListener']('keypress',function(_0x24368a){_0x24368a['key']==='Enter'&&(_0x24368a['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x44dff2,_0x28219f,_0x8f1d2c,_0x583ce9=''){const _0x35c239=a4_0x1fd11d,_0xfcadff=doc(db,'userProfiles',_0x44dff2),_0x37436c=await getDoc(_0xfcadff);if(!_0x37436c['exists']())throw new Error(_0x35c239(0xfc));const _0x482f91=_0x37436c['data'](),_0x1e084f=_0x482f91['points']!==undefined?_0x482f91['points']:0x0;_0x482f91[_0x35c239(0x1f0)]===undefined&&(console['log'](_0x35c239(0x304)+(_0x482f91['displayName']||_0x482f91['email']||_0x35c239(0x120))),await updateDoc(_0xfcadff,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x3b1f53=_0x1e084f;switch(_0x28219f){case'add':_0x3b1f53=_0x1e084f+_0x8f1d2c;break;case'subtract':_0x3b1f53=Math['max'](0x0,_0x1e084f-_0x8f1d2c);break;case'set':_0x3b1f53=_0x8f1d2c;break;default:throw new Error(_0x35c239(0x2b3));}await updateDoc(_0xfcadff,{'points':_0x3b1f53,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x35c239(0xe9)),{'userId':_0x44dff2,'userEmail':_0x482f91['email']||_0x35c239(0x198),'displayName':_0x482f91['displayName']||_0x482f91[_0x35c239(0x10c)]||'Unknown\x20User','action':_0x28219f,'amount':_0x8f1d2c,'previousPoints':_0x1e084f,'newPoints':_0x3b1f53,'reason':_0x583ce9,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x471284=a4_0x1fd11d,_0x2bd382=document['getElementById'](_0x471284(0x2ee));if(!_0x2bd382)return;_0x2bd382['innerHTML']=_0x471284(0x233);try{const _0x161b96=collection(db,_0x471284(0xf2)),_0x3c0899=await getDocs(_0x161b96);if(_0x3c0899['empty']){_0x2bd382['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x12214c=[];let _0x5bd5d4=0x0;_0x3c0899['forEach'](_0x1f591a=>{const _0x4665ae=_0x1f591a['data'](),_0x5ae23d=_0x4665ae['points']!==undefined?_0x4665ae['points']:0x0;_0x4665ae['points']===undefined&&_0x5bd5d4++,_0x12214c['push']({'id':_0x1f591a['id'],..._0x4665ae,'points':_0x5ae23d});}),_0x5bd5d4>0x0&&(console['log'](_0x471284(0x2fc)+_0x5bd5d4+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x5bd5d4+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.',_0x471284(0x18c))),_0x12214c['sort']((_0x29c1b0,_0x4b3600)=>(_0x4b3600['points']||0x0)-(_0x29c1b0['points']||0x0)),window['allUsersPoints']=_0x12214c,renderPointsOverview(_0x12214c);}catch(_0x5cf110){console['error']('Error\x20loading\x20points\x20overview:',_0x5cf110),_0x2bd382['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x5cf110['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x187c8d=a4_0x1fd11d,_0x42d3a5=document['getElementById'](_0x187c8d(0x2ed));if(!_0x42d3a5)return;_0x42d3a5['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x3165d8,_0x477ae6,_0x2ebaeb]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x42d3a5['innerHTML']='';const _0x1a4158=(_0x44683f,_0x14214e)=>{_0x44683f['forEach'](_0x4b9408=>{const _0x1b4960=a4_0x343e,_0x38bddd=_0x4b9408[_0x1b4960(0xc8)](),_0x5b5f83=_0x38bddd['ribbons']||{},_0x482d1b=Object['keys'](_0x5b5f83)['length'],_0x307324=document['createElement']('tr');_0x307324['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x38bddd['username']||'Unknown')+_0x1b4960(0x19a)+_0x14214e['toLowerCase']()+'\x22>'+_0x14214e+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x482d1b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x38bddd['lastUpdated']?new Date(_0x38bddd[_0x1b4960(0x16e)]['seconds']*0x3e8)['toLocaleDateString']():_0x1b4960(0x120))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x38bddd[_0x1b4960(0x10c)]+'\x22\x20data-ladder=\x22'+_0x14214e+_0x1b4960(0x2af),_0x42d3a5['appendChild'](_0x307324);});};_0x1a4158(_0x3165d8,'D1'),_0x1a4158(_0x477ae6,'D2'),_0x1a4158(_0x2ebaeb,'D3'),document['querySelectorAll']('.edit-ribbons-btn')[_0x187c8d(0x31d)](_0x21f5a3=>{const _0x5a6838=_0x187c8d;_0x21f5a3['addEventListener'](_0x5a6838(0x1ed),function(){const _0x504e26=this['dataset']['username'],_0x2af16b=this['dataset']['ladder'];editUserRibbons(_0x504e26,_0x2af16b);});}),showNotification(_0x187c8d(0x167),'success');}catch(_0x1fb2bf){console['error']('Error\x20loading\x20ribbons:',_0x1fb2bf),_0x42d3a5['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x198fb0=a4_0x1fd11d,_0x20ba4c=document['getElementById']('ribbon-user-search')['value'][_0x198fb0(0x25c)]();if(!_0x20ba4c){showNotification(_0x198fb0(0x2f1),'error');return;}try{const [_0xd23f2d,_0x691a3c,_0x4ef448]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x20ba4c)),getDoc(doc(db,'playerRibbonsD2',_0x20ba4c)),getDoc(doc(db,'playerRibbonsD3',_0x20ba4c))]);let _0x2ceb3d=null,_0x24ee87=null;if(_0xd23f2d[_0x198fb0(0x24a)]())_0x2ceb3d='D1',_0x24ee87=_0xd23f2d['data']();else{if(_0x691a3c['exists']())_0x2ceb3d='D2',_0x24ee87=_0x691a3c['data']();else _0x4ef448['exists']()&&(_0x2ceb3d='D3',_0x24ee87=_0x4ef448['data']());}_0x2ceb3d?(document[_0x198fb0(0x1e2)](_0x198fb0(0x18e))['textContent']=_0x20ba4c,document[_0x198fb0(0x1e2)](_0x198fb0(0x217))[_0x198fb0(0x2e0)]=_0x20ba4c,document[_0x198fb0(0x1e2)]('ribbon-target-ladder')['value']=_0x2ceb3d,document['getElementById']('user-ribbon-management')['style']['display']='block',displayCurrentRibbons(_0x24ee87[_0x198fb0(0x302)]||{}),showNotification('Found\x20'+_0x20ba4c+_0x198fb0(0x2c5)+_0x2ceb3d+'\x20ladder','success')):showNotification(_0x198fb0(0xd9)+_0x20ba4c+'\x20not\x20found\x20in\x20any\x20ladder',_0x198fb0(0x100));}catch(_0x1ccf77){console[_0x198fb0(0x100)](_0x198fb0(0x155),_0x1ccf77),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x5c649e){const _0x59dec7=a4_0x1fd11d,_0x2061a4=document['getElementById']('current-ribbons-list');if(!_0x2061a4)return;_0x2061a4['innerHTML']='';if(Object['keys'](_0x5c649e)['length']===0x0){_0x2061a4['innerHTML']=_0x59dec7(0x2cf);return;}Object['entries'](_0x5c649e)['forEach'](([_0x357237,_0x4011eb])=>{const _0x3946d9=_0x59dec7,_0x5b689f=document['createElement']('div');_0x5b689f[_0x3946d9(0x206)]='ribbon-item',_0x5b689f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x357237+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x4011eb[_0x3946d9(0x241)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x4011eb['awardedAt']?new Date(_0x4011eb['awardedAt']['seconds']*0x3e8)[_0x3946d9(0x14d)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x357237+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2061a4['appendChild'](_0x5b689f);}),document['querySelectorAll'](_0x59dec7(0x121))[_0x59dec7(0x31d)](_0x3810e5=>{const _0xc5ad62=_0x59dec7;_0x3810e5[_0xc5ad62(0x29e)]('click',function(){const _0x76e479=this['dataset']['ribbon'];removeRibbon(_0x76e479);});});}async function addRibbon(_0x463f67){const _0x4d4ac9=a4_0x1fd11d;_0x463f67['preventDefault']();const _0x56ec3d=document[_0x4d4ac9(0x1e2)]('ribbon-target-user')[_0x4d4ac9(0x2e0)],_0x5e95ce=document['getElementById']('ribbon-target-ladder')[_0x4d4ac9(0x2e0)],_0x5d76fe=document['getElementById']('ribbon-type-select')[_0x4d4ac9(0x2e0)],_0x361c77=parseInt(document[_0x4d4ac9(0x1e2)]('ribbon-level')['value']);if(!_0x56ec3d||!_0x5e95ce||!_0x5d76fe||!_0x361c77){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x18d3d5='playerRibbons'+(_0x5e95ce==='D1'?'':_0x5e95ce),_0x17ec8b=doc(db,_0x18d3d5,_0x56ec3d),_0x1697ef=await getDoc(_0x17ec8b),_0x11034f=_0x1697ef['exists']()?_0x1697ef['data']()[_0x4d4ac9(0x302)]||{}:{};_0x11034f[_0x5d76fe]={'level':_0x361c77,'awardedAt':serverTimestamp()},await setDoc(_0x17ec8b,{'username':_0x56ec3d,'ladder':_0x5e95ce,'ribbons':_0x11034f,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x5d76fe+_0x4d4ac9(0x225)+_0x361c77+_0x4d4ac9(0x293)+_0x56ec3d,'success'),displayCurrentRibbons(_0x11034f),document[_0x4d4ac9(0x1e2)]('ribbon-type-select')['value']='',document[_0x4d4ac9(0x1e2)]('ribbon-level')[_0x4d4ac9(0x2e0)]='1';}catch(_0x71fec9){console['error']('Error\x20adding\x20ribbon:',_0x71fec9),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x241eb0){const _0x195593=a4_0x1fd11d,_0x28cbf5=document['getElementById']('ribbon-target-user')['value'],_0x51fecc=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x241eb0+_0x195593(0x197)+_0x28cbf5+'?'))return;try{const _0x1b3900=_0x195593(0x314)+(_0x51fecc==='D1'?'':_0x51fecc),_0xe8c9f6=doc(db,_0x1b3900,_0x28cbf5),_0x3d2de5=await getDoc(_0xe8c9f6),_0xa9730=_0x3d2de5[_0x195593(0x24a)]()?_0x3d2de5['data']()['ribbons']||{}:{};delete _0xa9730[_0x241eb0],await setDoc(_0xe8c9f6,{'username':_0x28cbf5,'ladder':_0x51fecc,'ribbons':_0xa9730,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x241eb0+'\x20from\x20'+_0x28cbf5,'success'),displayCurrentRibbons(_0xa9730);}catch(_0x507502){console['error']('Error\x20removing\x20ribbon:',_0x507502),showNotification(_0x195593(0x21b),'error');}}function editUserRibbons(_0x5914a8,_0x168a98){const _0x2bd583=a4_0x1fd11d;document['getElementById']('ribbon-user-search')[_0x2bd583(0x2e0)]=_0x5914a8,searchRibbonUser();}