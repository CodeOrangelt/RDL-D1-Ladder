const a4_0x302a99=a4_0x4904,a4_0x23b6a6=(function(){let _0x41d743=!![];return function(_0x3718a4,_0x49ab12){const _0x16ed73=_0x41d743?function(){const _0x5e6d41=a4_0x4904;if(_0x49ab12){const _0x589c65=_0x49ab12[_0x5e6d41(0x299)](_0x3718a4,arguments);return _0x49ab12=null,_0x589c65;}}:function(){};return _0x41d743=![],_0x16ed73;};}()),a4_0x265e4e=a4_0x23b6a6(this,function(){const _0x164d30=a4_0x4904;let _0x463fad;try{const _0x5413bb=Function(_0x164d30(0x229)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x463fad=_0x5413bb();}catch(_0x50fb06){_0x463fad=window;}const _0x51d5b6=_0x463fad[_0x164d30(0x280)]=_0x463fad[_0x164d30(0x280)]||{},_0x326e5a=['log','warn','info','error',_0x164d30(0x245),'table','trace'];for(let _0x500b58=0x0;_0x500b58<_0x326e5a['length'];_0x500b58++){const _0x1567e9=a4_0x23b6a6['constructor']['prototype'][_0x164d30(0x17d)](a4_0x23b6a6),_0x4202b9=_0x326e5a[_0x500b58],_0x107f49=_0x51d5b6[_0x4202b9]||_0x1567e9;_0x1567e9[_0x164d30(0x2a7)]=a4_0x23b6a6['bind'](a4_0x23b6a6),_0x1567e9['toString']=_0x107f49['toString']['bind'](_0x107f49),_0x51d5b6[_0x4202b9]=_0x1567e9;}});a4_0x265e4e();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0xbe97c5){const _0x1762fa=a4_0x4904;if(!_0xbe97c5)return _0x1762fa(0x1c7);_0xbe97c5=_0xbe97c5['replace']('#','');_0xbe97c5['length']===0x3&&(_0xbe97c5=_0xbe97c5['split']('')[_0x1762fa(0x107)](_0x4d62d4=>_0x4d62d4+_0x4d62d4)['join'](''));if(_0xbe97c5[_0x1762fa(0xe9)]!==0x6)return'#ffffff';const _0x2e189e=parseInt(_0xbe97c5[_0x1762fa(0x12a)](0x0,0x2),0x10),_0x156a59=parseInt(_0xbe97c5['substring'](0x2,0x4),0x10),_0x3a1a07=parseInt(_0xbe97c5[_0x1762fa(0x12a)](0x4,0x6),0x10),_0x27d23e=(_0x2e189e*0x12b+_0x156a59*0x24b+_0x3a1a07*0x72)/0x3e8;return _0x27d23e>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{const _0x3d5bef=a4_0x4904;auth[_0x3d5bef(0x20e)](async _0x595ac0=>{if(!_0x595ac0){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x1f2e60){console['error']('Error\x20initializing\x20dashboard:',_0x1f2e60),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x195ac8){const _0x6743e1=a4_0x4904;if(!_0x195ac8)return['dashboard'];console[_0x6743e1(0x1d9)]('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x195ac8+'\x20in\x20all\x20collections...');const _0x5db700=[{'name':'userProfiles','displayName':_0x6743e1(0x268)},{'name':_0x6743e1(0x241),'displayName':'D1\x20Players'},{'name':'playersD2','displayName':_0x6743e1(0x127)},{'name':_0x6743e1(0x1f6),'displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x257802=auth['currentUser'];let _0x5578c1=null,_0xb1c5ae=null;for(const _0x5afdcc of _0x5db700){try{if(_0x257802){const _0x399cbe=doc(db,_0x5afdcc['name'],_0x257802['uid']),_0x4c6bce=await getDoc(_0x399cbe);if(_0x4c6bce['exists']()){const _0x203a62=_0x4c6bce['data']();console['log']('Found\x20user\x20in\x20'+_0x5afdcc['displayName']+'\x20by\x20UID:',_0x203a62);const _0x42b006=(_0x203a62['roleName']||_0x203a62['role']||'')['toLowerCase']();if(_0x42b006&&_0x42b006!=='none'){_0x5578c1=_0x42b006,_0xb1c5ae=_0x5afdcc[_0x6743e1(0x159)],console['log']('Found\x20specific\x20role:\x20'+_0x5578c1+_0x6743e1(0x26e)+_0xb1c5ae);break;}}}if(!_0x5578c1){const _0x163c15=collection(db,_0x5afdcc['name']),_0x808d2c=query(_0x163c15,where(_0x6743e1(0x171),'==',_0x195ac8)),_0x3bbde2=await getDocs(_0x808d2c);if(!_0x3bbde2['empty']){const _0x4807a8=_0x3bbde2['docs'][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0x5afdcc[_0x6743e1(0x159)]+'\x20with\x20email\x20'+_0x195ac8+':',_0x4807a8);const _0x499ab1=(_0x4807a8['roleName']||_0x4807a8['role']||'')['toLowerCase']();if(_0x499ab1&&_0x499ab1!=='none'){_0x5578c1=_0x499ab1,_0xb1c5ae=_0x5afdcc['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x5578c1+'\x20in\x20'+_0xb1c5ae);break;}}}}catch(_0x4655ae){console['error']('Error\x20checking\x20'+_0x5afdcc['displayName']+':',_0x4655ae);}}if(_0x5578c1){console['log'](_0x6743e1(0x21a)+_0x5578c1+'\x20(from\x20'+_0xb1c5ae+')');const _0xe2f514={'admin':['dashboard',_0x6743e1(0x2c3),'manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history',_0x6743e1(0x184),'user-roles-section','manage-matches','manage-points',_0x6743e1(0x139),'manage-ribbons'],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies',_0x6743e1(0xf1),'manage-highlights','user-roles-section',_0x6743e1(0x2d7),'manage-points',_0x6743e1(0x139),'manage-ribbons'],'council':[_0x6743e1(0x136),'manage-players','manage-matches'],'creative\x20lead':[_0x6743e1(0x136),'manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0xe2f514[_0x5578c1])return console[_0x6743e1(0x1d9)]('Role\x20\x27'+_0x5578c1+'\x27\x20has\x20permissions:',_0xe2f514[_0x5578c1]),_0xe2f514[_0x5578c1];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x195ac8+',\x20giving\x20default\x20access'),[_0x6743e1(0x136)];}function setupSidebarNavigation(_0x1b21fe=[]){const _0x5ea237=a4_0x4904,_0x576e76=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0xb3c89a=document['querySelectorAll']('.admin-section');(!_0x1b21fe||_0x1b21fe['length']===0x0)&&(_0x1b21fe=['dashboard']);_0x576e76[_0x5ea237(0x217)](_0x461e5b=>{const _0x35c90a=_0x5ea237,_0x23e5e8=_0x461e5b['getAttribute']('data-section');_0x1b21fe[_0x35c90a(0x2b9)](_0x23e5e8)?_0x461e5b[_0x35c90a(0x223)]['display']='flex':_0x461e5b[_0x35c90a(0x223)][_0x35c90a(0x232)]=_0x35c90a(0x197),_0x461e5b['addEventListener'](_0x35c90a(0x112),()=>{const _0x4ae851=_0x35c90a,_0x255eba=_0x461e5b[_0x4ae851(0x1be)]('data-section');if(!_0x1b21fe['includes'](_0x255eba)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section',_0x4ae851(0x248));return;}_0x576e76['forEach'](_0x3924e4=>_0x3924e4['classList']['remove']('active')),_0x461e5b['classList']['add']('active'),_0xb3c89a[_0x4ae851(0x217)](_0x4ef070=>{_0x4ef070['style']['display']='none';});const _0x1edb00=document['getElementById'](_0x255eba);_0x1edb00&&(_0x1edb00['style']['display']='block',console[_0x4ae851(0x1d9)](_0x4ae851(0x28a)+_0x255eba+_0x4ae851(0x195)));});});const _0x42f4a4=document[_0x5ea237(0xe7)]('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x1b21fe[0x0]+'\x22]');_0x42f4a4&&_0x42f4a4['click'](),console['log'](_0x5ea237(0x119));}function setupTabNavigation(){const _0x30f682=a4_0x4904,_0x5de0fe=document['querySelectorAll'](_0x30f682(0x219));let _0x4bae86=null,_0x19ad32=new Set();_0x5de0fe['forEach'](_0x2974b0=>{const _0x4eb86c=_0x30f682;_0x2974b0[_0x4eb86c(0x283)]('click',function(){const _0x50d833=_0x4eb86c,_0x3c8dae=this['getAttribute'](_0x50d833(0x17f));if(_0x3c8dae===_0x4bae86)return;_0x4bae86&&(document['getElementById'](_0x4bae86)[_0x50d833(0x223)][_0x50d833(0x232)]='none',_0x5de0fe['forEach'](_0x4d39f9=>_0x4d39f9['classList'][_0x50d833(0x13e)]('active'))),document[_0x50d833(0x118)](_0x3c8dae)['style']['display']='block',this[_0x50d833(0x2fc)][_0x50d833(0x2c2)](_0x50d833(0x1b4)),_0x4bae86=_0x3c8dae;});});}function a4_0x4904(_0x1ea2e1,_0x5292b5){const _0x265e4e=a4_0x46aa();return a4_0x4904=function(_0x23b6a6,_0x1e5b5b){_0x23b6a6=_0x23b6a6-0xe2;let _0x46aa48=_0x265e4e[_0x23b6a6];return _0x46aa48;},a4_0x4904(_0x1ea2e1,_0x5292b5);}function loadSectionData(_0x1fd0c2){return;}async function initializeAdminDashboard(){const _0x2a9408=a4_0x4904;try{const _0x2f16da=auth['currentUser'],_0x3faa75=await getUserTabPermissions(_0x2f16da[_0x2a9408(0x171)]);console[_0x2a9408(0x1d9)]('User\x20'+_0x2f16da[_0x2a9408(0x171)]+'\x20allowed\x20tabs:',_0x3faa75),window[_0x2a9408(0x185)]=_0x3faa75,setupSidebarNavigation(_0x3faa75),setupLadderSelector(),setupDashboardSection(),_0x3faa75['includes']('manage-players')&&setupManagePlayersSection(),_0x3faa75['includes']('elo-history')&&setupEloHistorySection(),_0x3faa75[_0x2a9408(0x2b9)](_0x2a9408(0x1b6))&&setupRankControls(),_0x3faa75[_0x2a9408(0x2b9)]('manage-articles')&&setupManageArticlesSection(),_0x3faa75['includes']('user-roles-section')&&setupUserRolesSection(),_0x3faa75['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x3faa75[_0x2a9408(0x2b9)](_0x2a9408(0x184))&&setupManageHighlightsSection(),_0x3faa75['includes'](_0x2a9408(0x25e))&&setupInactivePlayersSection(),_0x3faa75['includes']('manage-matches')&&setupManageMatchesSection(),_0x3faa75[_0x2a9408(0x2b9)](_0x2a9408(0x238))&&setupManagePointsSection(),_0x3faa75['includes'](_0x2a9408(0x27d))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x3faa75);}catch(_0x270b4a){console['error'](_0x2a9408(0x113),_0x270b4a);}}function setupDataLoadButtons(_0x597584=[]){const _0xb60116=a4_0x4904;(!_0x597584||_0x597584[_0xb60116(0xe9)]===0x0)&&(_0x597584=['dashboard']);const _0x4d25ab=document[_0xb60116(0x118)]('load-dashboard-data');_0x4d25ab&&_0x4d25ab['addEventListener'](_0xb60116(0x112),function(){const _0x5f58c5=_0xb60116;this['classList']['add']('loading'),this['innerHTML']=_0x5f58c5(0x22e),loadDashboardOverview()['then'](()=>{const _0x16eb4a=_0x5f58c5;this[_0x16eb4a(0x2fc)][_0x16eb4a(0x13e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x404bf0=>{const _0x189bb1=_0x5f58c5;console['error']('Error\x20loading\x20dashboard:',_0x404bf0),this['classList'][_0x189bb1(0x13e)]('loading'),this[_0x189bb1(0x209)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x253bee=_0x189bb1;this[_0x253bee(0x209)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x597584['includes']('manage-trophies')){const _0x270572=document['getElementById']('load-trophies-data');_0x270572&&_0x270572['addEventListener'](_0xb60116(0x112),function(){const _0x16563a=_0xb60116;console[_0x16563a(0x1d9)]('Load\x20trophies\x20data\x20clicked'),this['classList']['add'](_0x16563a(0x20a)),this[_0x16563a(0x209)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0x16563a(0x253)](()=>{const _0x37aac=_0x16563a;this[_0x37aac(0x2fc)]['remove']('loading'),this['innerHTML']=_0x37aac(0x1b7);})[_0x16563a(0x226)](_0x44c2d2=>{const _0x2969bc=_0x16563a;console['error']('Error\x20loading\x20trophies:',_0x44c2d2),this[_0x2969bc(0x2fc)][_0x2969bc(0x13e)]('loading'),this[_0x2969bc(0x209)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x318e8b=_0x2969bc;this[_0x318e8b(0x209)]=_0x318e8b(0x1b7);},0xbb8);});});}if(_0x597584['includes']('manage-players')){const _0x5b6889=document['getElementById']('load-players-data');_0x5b6889&&_0x5b6889[_0xb60116(0x283)]('click',function(){console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x45bca6=a4_0x4904;this['classList']['remove'](_0x45bca6(0x20a)),this[_0x45bca6(0x209)]=_0x45bca6(0xef);})['catch'](_0x3e04ee=>{const _0x55d8a5=a4_0x4904;console[_0x55d8a5(0x248)]('Error\x20loading\x20players:',_0x3e04ee),this['classList']['remove']('loading'),this['innerHTML']=_0x55d8a5(0x20c),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x597584['includes']('elo-history')){const _0x29cc6c=document['getElementById']('load-elo-history-data');_0x29cc6c&&_0x29cc6c['addEventListener'](_0xb60116(0x112),function(){const _0xb7952c=_0xb60116;console['log']('Load\x20history\x20data\x20clicked'),this[_0xb7952c(0x2fc)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x1e64c6=_0xb7952c;this['classList']['remove'](_0x1e64c6(0x20a)),this['innerHTML']=_0x1e64c6(0x151);})['catch'](_0x1fd3c7=>{const _0x27fffd=_0xb7952c;console[_0x27fffd(0x248)]('Error\x20loading\x20history:',_0x1fd3c7),this['classList']['remove'](_0x27fffd(0x20a)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x597584['includes']('manage-articles')){const _0xd28651=document['getElementById']('load-articles-data');_0xd28651&&_0xd28651['addEventListener']('click',function(){const _0x55d0bf=_0xb60116;console['log'](_0x55d0bf(0x101)),this['classList']['add'](_0x55d0bf(0x20a)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x1aa58a=_0x55d0bf;this[_0x1aa58a(0x2fc)]['remove']('loading'),this['innerHTML']=_0x1aa58a(0x2dc);})['catch'](_0x509f33=>{const _0x297c18=_0x55d0bf;console[_0x297c18(0x248)]('Error\x20loading\x20articles:',_0x509f33),this['classList'][_0x297c18(0x13e)](_0x297c18(0x20a)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xbe35df=_0x297c18;this['innerHTML']=_0xbe35df(0x2dc);},0xbb8);});});}if(_0x597584[_0xb60116(0x2b9)]('user-roles-section')){const _0x517582=document['getElementById']('load-users-data');_0x517582&&_0x517582['addEventListener']('click',function(){const _0x438067=_0xb60116;console['log']('Load\x20users\x20data\x20clicked'),this[_0x438067(0x2fc)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x682bf7=_0x438067;this['classList']['remove'](_0x682bf7(0x20a)),this['innerHTML']=_0x682bf7(0x182);})['catch'](_0x8c3360=>{const _0x43f7a9=_0x438067;console[_0x43f7a9(0x248)](_0x43f7a9(0x1b3),_0x8c3360),this[_0x43f7a9(0x2fc)]['remove']('loading'),this[_0x43f7a9(0x209)]=_0x43f7a9(0x20c),setTimeout(()=>{const _0x16db36=_0x43f7a9;this[_0x16db36(0x209)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x597584['includes']('inactive-players')){const _0x2f07ed=document['getElementById']('load-inactive-players-data');_0x2f07ed&&_0x2f07ed[_0xb60116(0x283)]('click',function(){const _0x316364=_0xb60116;console[_0x316364(0x1d9)]('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x556f73=_0x316364;this['classList']['remove'](_0x556f73(0x20a)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x280fa4=>{const _0x3ed312=_0x316364;console['error'](_0x3ed312(0x122),_0x280fa4),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x597584['includes'](_0xb60116(0x184))){const _0x5d6091=document['getElementById']('load-highlights-data');_0x5d6091&&_0x5d6091[_0xb60116(0x283)]('click',function(){const _0x44f361=_0xb60116;console[_0x44f361(0x1d9)]('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x45e61e=_0x44f361;this['classList'][_0x45e61e(0x13e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x3d5967=>{console['error']('Error\x20loading\x20highlights:',_0x3d5967),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3afd99=a4_0x4904;this[_0x3afd99(0x209)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x597584[_0xb60116(0x2b9)]('manage-matches')){const _0xa9befc=document['getElementById'](_0xb60116(0x1c8));_0xa9befc&&_0xa9befc['addEventListener']('click',function(){const _0x5e093b=_0xb60116;console[_0x5e093b(0x1d9)]('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x5e093b(0x209)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x5e093b(0x253)](()=>{const _0x2fffb8=_0x5e093b;this['classList']['remove'](_0x2fffb8(0x20a)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x131d32=>{const _0x1fbae0=_0x5e093b;console[_0x1fbae0(0x248)]('Error\x20loading\x20matches:',_0x131d32),this['classList'][_0x1fbae0(0x13e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x597584['includes']('manage-ribbons')){const _0x12d1dc=document['getElementById']('load-ribbons-data');_0x12d1dc&&_0x12d1dc[_0xb60116(0x283)](_0xb60116(0x112),function(){const _0x5dfe2b=_0xb60116;console[_0x5dfe2b(0x1d9)]('Load\x20ribbons\x20data\x20clicked'),this['classList'][_0x5dfe2b(0x2c2)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x26e083=_0x5dfe2b;this[_0x26e083(0x2fc)]['remove']('loading'),this[_0x26e083(0x209)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x4d6cd7=>{const _0x4d558a=_0x5dfe2b;console['error'](_0x4d558a(0x165),_0x4d6cd7),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x16f219=_0x4d558a;this[_0x16f219(0x209)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console[_0xb60116(0x1d9)]('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x3fa0b0=a4_0x4904;document[_0x3fa0b0(0x118)]('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x3fa0b0(0x2c6))['textContent']='-',document[_0x3fa0b0(0x118)]('rejected-count')[_0x3fa0b0(0x202)]='-';}function setupLadderSelector(){const _0x5dcbd2=a4_0x4904,_0x1ffa6b=document[_0x5dcbd2(0x13c)]('.ladder-switch\x20input');_0x1ffa6b[_0x5dcbd2(0x217)](_0x16600f=>{_0x16600f['addEventListener']('change',()=>{const _0x1c0159=a4_0x4904;currentLadder=_0x16600f[_0x1c0159(0x140)],document['body']['setAttribute']('data-ladder',currentLadder);const _0x1356c4=document[_0x1c0159(0x118)]('current-ladder-display');_0x1356c4&&(_0x1356c4[_0x1c0159(0x202)]=currentLadder),document['getElementById']('player-count')[_0x1c0159(0x202)]='-',document['getElementById'](_0x1c0159(0x1f3))['textContent']='-',document['getElementById']('pending-count')[_0x1c0159(0x202)]='-',document['getElementById'](_0x1c0159(0x1ba))['textContent']='-',charts['rankDistribution']&&(charts[_0x1c0159(0x1fe)]['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts[_0x1c0159(0x11a)]['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+_0x1c0159(0x2fd),'info');});});const _0xc4f55b=document[_0x5dcbd2(0x118)](_0x5dcbd2(0x28d));_0xc4f55b&&(_0xc4f55b[_0x5dcbd2(0x202)]=currentLadder);}async function loadDashboardOverview(){const _0x3e4274=a4_0x4904;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x3e4274(0x1f3))['textContent']='-',document[_0x3e4274(0x118)]('pending-count')['textContent']='-',document[_0x3e4274(0x118)]('rejected-count')['textContent']='-';const _0x4abb22=currentLadder==='D1'?_0x3e4274(0x241):currentLadder==='D2'?_0x3e4274(0x279):'playersD3',_0x4405f4=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x867eae=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x28c74f=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x4abb22+',\x20'+_0x4405f4);const _0x331aa8=await getDocs(collection(db,_0x4abb22)),_0x2e568a=_0x331aa8[_0x3e4274(0x29f)],_0x5c2743=await getDocs(collection(db,_0x4405f4)),_0x2cc051=_0x5c2743[_0x3e4274(0x29f)],_0x358a96=await getDocs(collection(db,_0x867eae)),_0xf3a88e=_0x358a96['size'],_0x1de940=await getDocs(collection(db,_0x28c74f)),_0x2baf06=_0x1de940['size'];return document[_0x3e4274(0x118)]('player-count')[_0x3e4274(0x202)]=_0x2e568a,document[_0x3e4274(0x118)]('match-count')[_0x3e4274(0x202)]=_0x2cc051,document[_0x3e4274(0x118)]('pending-count')['textContent']=_0xf3a88e,document['getElementById'](_0x3e4274(0x1ba))['textContent']=_0x2baf06,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0xdf9350){console['error'](_0x3e4274(0x129),_0xdf9350);throw _0xdf9350;}}async function createRankDistributionChart(){const _0x3f7520=a4_0x4904;try{const _0x4a6af7=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x116319=await getDocs(_0x4a6af7),_0x18b762={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x116319['forEach'](_0x3412a5=>{const _0x29e145=a4_0x4904,_0x441b99=_0x3412a5['data'](),_0x4472b1=_0x441b99[_0x29e145(0x176)]||0x4b0;if(_0x4472b1>=0x7d0)_0x18b762['Emerald']++;else{if(_0x4472b1>=0x708)_0x18b762['Gold']++;else{if(_0x4472b1>=0x640)_0x18b762['Silver']++;else{if(_0x4472b1>=0x578)_0x18b762[_0x29e145(0x234)]++;else _0x18b762['Unranked']++;}}}});const _0x154c34=document['getElementById']('rank-distribution-chart');charts[_0x3f7520(0x1fe)]&&charts[_0x3f7520(0x1fe)]['destroy'](),charts['rankDistribution']=new Chart(_0x154c34,{'type':_0x3f7520(0x281),'data':{'labels':Object['keys'](_0x18b762),'datasets':[{'data':Object['values'](_0x18b762),'backgroundColor':['#808080',_0x3f7520(0x2a5),_0x3f7520(0x1d0),'#FFD700',_0x3f7520(0x27f)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x3f7520(0x1e3),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x2395a7){console['error'](_0x3f7520(0x1b2),_0x2395a7),document['getElementById']('rank-distribution-chart')['innerHTML']=_0x3f7520(0x270);}}async function createActivityChart(){const _0x38ccce=a4_0x4904;try{const _0x20525a=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x10e9c9=collection(db,_0x20525a),_0xbc5fe7=new Date();_0xbc5fe7['setDate'](_0xbc5fe7['getDate']()-0x7);const _0x2ec996=query(_0x10e9c9,where('approvedAt','>=',_0xbc5fe7),orderBy('approvedAt','asc')),_0x315de2=await getDocs(_0x2ec996),_0x2522a6=['Sunday','Monday','Tuesday','Wednesday',_0x38ccce(0x194),_0x38ccce(0x1ab),_0x38ccce(0x200)],_0x1c9829=_0x2522a6[_0x38ccce(0x16f)]((_0x326024,_0x4f1db6)=>({..._0x326024,[_0x4f1db6]:0x0}),{});_0x315de2['forEach'](_0x1928d6=>{const _0x2a2c7b=_0x38ccce,_0x2cceb7=_0x1928d6[_0x2a2c7b(0x1a2)]();if(_0x2cceb7[_0x2a2c7b(0x30c)]){const _0x53e1c7=_0x2522a6[new Date(_0x2cceb7[_0x2a2c7b(0x30c)][_0x2a2c7b(0x1cf)]*0x3e8)[_0x2a2c7b(0x172)]()];_0x1c9829[_0x53e1c7]++;}});const _0x19e386=document[_0x38ccce(0x118)]('activity-chart');charts['activity']&&charts['activity'][_0x38ccce(0xe6)](),charts[_0x38ccce(0x11a)]=new Chart(_0x19e386,{'type':'bar','data':{'labels':_0x2522a6,'datasets':[{'label':'Matches\x20Played','data':_0x2522a6['map'](_0x578a29=>_0x1c9829[_0x578a29]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0x38ccce(0x225),'borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x38ccce(0x278)}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x55ea75){console[_0x38ccce(0x248)]('Error\x20creating\x20activity\x20chart:',_0x55ea75),document[_0x38ccce(0x118)]('activity-chart')[_0x38ccce(0x209)]=_0x38ccce(0x270);}}async function loadPlayersData(){const _0x3ad874=a4_0x4904,_0x5ab940=document['getElementById']('players-table-body');if(!_0x5ab940)return;_0x5ab940['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x4326c3='players';if(currentLadder==='D2')_0x4326c3='playersD2';else currentLadder==='D3'&&(_0x4326c3='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x4326c3+'\x20collection...');const _0x3d1547=collection(db,_0x4326c3),_0x551a1d=query(_0x3d1547,orderBy(_0x3ad874(0x176),_0x3ad874(0x2ea))),_0x283e07=await getDocs(_0x551a1d);if(_0x283e07['empty']){_0x5ab940['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x5ab940[_0x3ad874(0x209)]='';let _0x5da27c=0x1;_0x283e07['forEach'](_0x5546a9=>{const _0x7e6b06=_0x3ad874,_0x15b175=_0x5546a9['data'](),_0x3d6db4=getRankFromElo(_0x15b175[_0x7e6b06(0x176)]||0x4b0),_0x951d05=getRankStyle(_0x15b175['eloRating']||0x4b0),_0x3029e2=document['createElement']('tr');_0x3029e2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x5da27c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x951d05['color']+_0x7e6b06(0x30d)+(_0x15b175['username']||'Unknown')+_0x7e6b06(0x198)+(_0x15b175['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x951d05['color']+_0x7e6b06(0x133)+_0x3d6db4+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x15b175['wins']||0x0)+_0x7e6b06(0x21e)+(_0x15b175['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x5546a9['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x5546a9['id']+_0x7e6b06(0x2ac),_0x5ab940['appendChild'](_0x3029e2),_0x5da27c++;}),setupPlayerActionButtons();}catch(_0x587c69){console['error'](_0x3ad874(0x2fa),_0x587c69),_0x5ab940['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x587c69['message']+_0x3ad874(0x290);}}function getRankFromElo(_0xb30213){const _0x4d4168=a4_0x4904;if(_0xb30213>=0x7d0)return'Emerald';if(_0xb30213>=0x708)return'Gold';if(_0xb30213>=0x640)return _0x4d4168(0x23c);if(_0xb30213>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){document['querySelectorAll']('.edit-btn')['forEach'](_0x35f099=>{const _0x4f6476=a4_0x4904;_0x35f099['addEventListener'](_0x4f6476(0x112),async _0x56af85=>{const _0x5a8537=_0x56af85['currentTarget']['dataset']['id'];openEditPlayerModal(_0x5a8537);});}),document['querySelectorAll']('.delete-btn')['forEach'](_0x1e3d91=>{const _0x141cb8=a4_0x4904;_0x1e3d91['addEventListener'](_0x141cb8(0x112),async _0x42c25b=>{const _0x4c1269=_0x141cb8,_0x3872f3=_0x42c25b['currentTarget'][_0x4c1269(0x215)]['id'];confirmDeletePlayer(_0x3872f3);});});}async function openEditPlayerModal(_0x2b9b5b){const _0x2ffa96=a4_0x4904;try{const _0x832503=currentLadder==='D1'?'players':_0x2ffa96(0x279),_0x100fae=doc(db,_0x832503,_0x2b9b5b),_0x795584=await getDoc(_0x100fae);if(!_0x795584[_0x2ffa96(0xed)]()){showNotification('Player\x20not\x20found','error');return;}const _0x15ce5f=_0x795584[_0x2ffa96(0x1a2)](),_0x4467a2=document['getElementById']('edit-player-modal'),_0x44b194=document['getElementById'](_0x2ffa96(0x1dc)),_0x19f3b1=document['getElementById']('edit-elo'),_0x3ad8b5=document['getElementById']('edit-wins'),_0x2d410f=document['getElementById'](_0x2ffa96(0x25f));_0x44b194['value']=_0x15ce5f['username']||'',_0x19f3b1['value']=_0x15ce5f['eloRating']||0x4b0,_0x3ad8b5['value']=_0x15ce5f[_0x2ffa96(0x203)]||0x0,_0x2d410f['value']=_0x15ce5f['losses']||0x0,_0x4467a2['dataset']['playerId']=_0x2b9b5b,_0x4467a2['classList']['add']('active');}catch(_0x5870d7){console[_0x2ffa96(0x248)](_0x2ffa96(0x1e0),_0x5870d7),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0xbec23c=a4_0x4904;try{const _0xd9c13a=document[_0xbec23c(0x118)]('edit-player-modal'),_0x175fe2=_0xd9c13a['dataset']['playerId'];if(!_0x175fe2){showNotification('No\x20player\x20selected','error');return;}const _0x46f490=document['getElementById']('edit-username'),_0x143058=document['getElementById']('edit-elo'),_0x206f54=document['getElementById']('edit-wins'),_0x40e96f=document['getElementById'](_0xbec23c(0x25f)),_0x1300b6=_0x46f490['value']['trim'](),_0x4171bb=parseInt(_0x143058['value']),_0x5bfc0a=parseInt(_0x206f54[_0xbec23c(0x140)]),_0x615cee=parseInt(_0x40e96f[_0xbec23c(0x140)]);if(!_0x1300b6||isNaN(_0x4171bb)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x3c3b18=currentLadder==='D1'?_0xbec23c(0x241):_0xbec23c(0x279),_0x2c45b3=doc(db,_0x3c3b18,_0x175fe2),_0x356867=await getDoc(_0x2c45b3),_0x3b36cb=_0x356867['exists']()?_0x356867[_0xbec23c(0x1a2)]():{},_0x2c2190=_0x3b36cb['eloRating']||0x4b0;await updateDoc(_0x2c45b3,{'username':_0x1300b6,'eloRating':_0x4171bb,'wins':_0x5bfc0a||0x0,'losses':_0x615cee||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0xbec23c(0x171)]});if(_0x4171bb!==_0x2c2190){const _0x3af569=currentLadder==='D1'?_0xbec23c(0x128):_0xbec23c(0x212);await addDoc(collection(db,_0x3af569),{'player':_0x1300b6,'previousElo':_0x2c2190,'newElo':_0x4171bb,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0xbec23c(0x148)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0xd8b724){console[_0xbec23c(0x248)](_0xbec23c(0x1cd),_0xd8b724),showNotification('Failed\x20to\x20update\x20player:\x20'+_0xd8b724['message'],'error');}}function closeEditPlayerModal(){const _0x50fada=a4_0x4904,_0x2f59ef=document['getElementById'](_0x50fada(0x1cb));_0x2f59ef['classList'][_0x50fada(0x13e)](_0x50fada(0x1b4)),_0x2f59ef['dataset']['playerId']='';}async function confirmDeletePlayer(_0x505237){const _0x1fa1e9=a4_0x4904;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x110859=currentLadder==='D1'?_0x1fa1e9(0x241):'playersD2';await deleteDoc(doc(db,_0x110859,_0x505237)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x1777e5){console['error']('Error\x20deleting\x20player:',_0x1777e5),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x1777e5[_0x1fa1e9(0x106)],_0x1fa1e9(0x248));}}async function setupManagePlayersSection(){const _0x5e290b=a4_0x4904,_0x4dfa83=document[_0x5e290b(0x118)]('add-player-form');_0x4dfa83&&_0x4dfa83['addEventListener'](_0x5e290b(0x282),async _0x27d67c=>{_0x27d67c['preventDefault'](),await addNewPlayer();});const _0xed250b=document['getElementById']('player-search');_0xed250b&&_0xed250b['addEventListener'](_0x5e290b(0x14e),debounce(filterPlayerTable,0x12c));const _0x357975=document['getElementById'](_0x5e290b(0x2c9));_0x357975&&_0x357975['addEventListener']('click',saveEditedPlayer);const _0x88c798=document['getElementById'](_0x5e290b(0x246));_0x88c798&&_0x88c798[_0x5e290b(0x283)]('click',closeEditPlayerModal);const _0x4de727=document['getElementById']('edit-player-modal');_0x4de727&&_0x4de727['addEventListener']('click',_0xd21e93=>{const _0x1618dc=_0x5e290b;_0xd21e93[_0x1618dc(0x286)]===_0x4de727&&closeEditPlayerModal();});const _0x1a07bb=document['getElementById']('players-ladder-selector');_0x1a07bb&&_0x1a07bb[_0x5e290b(0x283)]('change',()=>{const _0x310ab9=_0x5e290b;currentLadder=_0x1a07bb[_0x310ab9(0x140)],loadPlayersData();});}async function addNewPlayer(){const _0x49b3ab=a4_0x4904;try{const _0x1379c2=document[_0x49b3ab(0x118)]('new-player-username'),_0x220af9=document[_0x49b3ab(0x118)]('new-player-elo'),_0x5a81e5=_0x1379c2['value']['trim'](),_0x293604=parseInt(_0x220af9['value'])||0x4b0;if(!_0x5a81e5){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0x5a81e5+'\x20with\x20ELO\x20'+_0x293604+'\x20to\x20'+currentLadder+'\x20ladder');let _0x48724f='players',_0x2d389a=_0x49b3ab(0x128);if(currentLadder==='D2')_0x48724f='playersD2',_0x2d389a=_0x49b3ab(0x212);else currentLadder==='D3'&&(_0x48724f='playersD3',_0x2d389a='eloHistoryD3');const _0x51a39f=query(collection(db,_0x48724f),where(_0x49b3ab(0x29a),'==',_0x5a81e5)),_0x345621=await getDocs(_0x51a39f);if(!_0x345621['empty']){alert(_0x49b3ab(0x213)+_0x5a81e5+_0x49b3ab(0x310)+currentLadder+'\x20ladder');return;}const _0x3bf5e6=auth['currentUser'],_0x5aa385={'username':_0x5a81e5,'eloRating':_0x293604,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x3bf5e6?_0x3bf5e6['email']:_0x49b3ab(0x22d),'gameMode':currentLadder};await addDoc(collection(db,_0x48724f),_0x5aa385),await addDoc(collection(db,_0x2d389a),{'player':_0x5a81e5,'previousElo':0x4b0,'newElo':_0x293604,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x3bf5e6?_0x3bf5e6['email']:'admin','gameMode':currentLadder}),_0x1379c2['value']='',_0x220af9['value']='1200',alert('Player\x20'+_0x5a81e5+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x49b3ab(0x273)),loadPlayersData();}catch(_0x29e0aa){console['error'](_0x49b3ab(0x156),_0x29e0aa),alert('Error\x20adding\x20player:\x20'+_0x29e0aa['message']);}}document[a4_0x302a99(0x283)]('DOMContentLoaded',()=>{const _0xd31c28=a4_0x302a99,_0xb2a859=document[_0xd31c28(0x118)]('add-player-form');_0xb2a859&&_0xb2a859[_0xd31c28(0x283)](_0xd31c28(0x282),_0x1a8535=>{const _0x29a20c=_0xd31c28;_0x1a8535[_0x29a20c(0x302)](),addNewPlayer();});});function filterPlayerTable(){const _0x35ce9d=a4_0x302a99,_0x6810e8=document['getElementById']('player-search')['value']['toLowerCase'](),_0x1b9140=document[_0x35ce9d(0x13c)]('#players-table-body\x20tr');let _0x4ddecc=0x0;_0x1b9140['forEach'](_0x16adeb=>{const _0x335747=_0x35ce9d,_0x40e938=_0x16adeb[_0x335747(0xe7)]('.username')?.[_0x335747(0x202)]['toLowerCase']()||'';_0x40e938['includes'](_0x6810e8)?(_0x16adeb['style']['display']='',_0x4ddecc++):_0x16adeb['style']['display']=_0x335747(0x197);});const _0x522f50=document['getElementById'](_0x35ce9d(0x11f));_0x522f50&&(_0x4ddecc===0x0&&_0x6810e8!==''?_0x522f50['style']['display']='block':_0x522f50['style']['display']='none');}function debounce(_0x21fa8c,_0x200ab7){let _0x3aa41b;return function(..._0xa427ee){clearTimeout(_0x3aa41b),_0x3aa41b=setTimeout(()=>_0x21fa8c['apply'](this,_0xa427ee),_0x200ab7);};}async function loadEloHistory(_0x384eb1=0x1){const _0x4df344=a4_0x302a99,_0x54d2e7=document['getElementById'](_0x4df344(0x2ad)),_0xb1c71f=currentLadder['toLowerCase']();if(!_0x54d2e7)return;_0x54d2e7['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x820135=currentLadder==='D1'?_0x4df344(0x128):currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0xb631ed=collection(db,_0x820135);let _0x2982a1;if(_0x384eb1>eloHistoryPagination[_0xb1c71f]['page']&&eloHistoryPagination[_0xb1c71f][_0x4df344(0x2a3)])_0x2982a1=query(_0xb631ed,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0xb1c71f]['lastVisible']),limit(PAGE_SIZE));else _0x384eb1<eloHistoryPagination[_0xb1c71f][_0x4df344(0x125)]&&eloHistoryPagination[_0xb1c71f]['firstVisible']?_0x2982a1=query(_0xb631ed,orderBy(_0x4df344(0x249),'desc'),endBefore(eloHistoryPagination[_0xb1c71f]['firstVisible']),limitToLast(PAGE_SIZE)):_0x2982a1=query(_0xb631ed,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x48aeb0=await getDocs(_0x2982a1);if(_0x48aeb0['empty']){_0x54d2e7[_0x4df344(0x209)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0xb1c71f+'-page-indicator')['textContent']=_0x4df344(0x2b7);return;}eloHistoryPagination[_0xb1c71f][_0x4df344(0x125)]=_0x384eb1,eloHistoryPagination[_0xb1c71f][_0x4df344(0x29d)]=_0x48aeb0[_0x4df344(0x269)][0x0],eloHistoryPagination[_0xb1c71f]['lastVisible']=_0x48aeb0['docs'][_0x48aeb0[_0x4df344(0x269)][_0x4df344(0xe9)]-0x1];const _0x202be3=new Map();_0x54d2e7['innerHTML']='';const _0x928666=async _0x47f8be=>{const _0x383264=_0x4df344;if(typeof _0x47f8be!=='string'||_0x47f8be[_0x383264(0xe9)]<0x14||/[^a-zA-Z0-9-_]/[_0x383264(0x233)](_0x47f8be))return _0x47f8be;if(_0x202be3[_0x383264(0x16b)](_0x47f8be))return _0x202be3['get'](_0x47f8be);try{for(const _0x42b27d of[_0x383264(0x241),_0x383264(0x279),'playersD3','nonParticipants']){const _0x470810=await getDoc(doc(db,_0x42b27d,_0x47f8be));if(_0x470810['exists']()&&_0x470810['data']()[_0x383264(0x29a)]){const _0x1b331c=_0x470810['data']()[_0x383264(0x29a)];return _0x202be3[_0x383264(0x116)](_0x47f8be,_0x1b331c),_0x1b331c;}}return _0x47f8be;}catch(_0x2301a4){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x47f8be+':',_0x2301a4),_0x47f8be;}};for(const _0xb0ba9d of _0x48aeb0['docs']){const _0x13f66e=_0xb0ba9d['data'](),_0x55be14=document['createElement']('tr'),_0x12bbf1=_0x13f66e['timestamp']?new Date(_0x13f66e[_0x4df344(0x249)]['seconds']*0x3e8)['toLocaleString']():_0x4df344(0x10e),_0x42d42c=_0x13f66e[_0x4df344(0x167)]-_0x13f66e['previousElo'],_0x2a261e=_0x42d42c>0x0?'positive-change':_0x42d42c<0x0?'negative-change':'',_0x29b502=_0x42d42c>0x0?'+':'',_0x1fcbbf=_0x13f66e[_0x4df344(0x191)]||_0x13f66e['username']||_0x13f66e[_0x4df344(0xf5)]||'N/A',_0x165e54=await _0x928666(_0x1fcbbf);_0x55be14['innerHTML']=_0x4df344(0x26a)+_0x12bbf1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x165e54+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x13f66e[_0x4df344(0x259)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x13f66e['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x2a261e+'\x22>'+_0x29b502+_0x42d42c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x13f66e['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x13f66e[_0x4df344(0x2a1)]||_0x13f66e[_0x4df344(0x110)]||_0x13f66e[_0x4df344(0x14c)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x54d2e7[_0x4df344(0x173)](_0x55be14);}document[_0x4df344(0x118)](_0xb1c71f+'-page-indicator')['textContent']='Page\x20'+_0x384eb1;const _0x14ecc1=document[_0x4df344(0x118)](_0xb1c71f+'-prev-page'),_0x400318=document['getElementById'](_0xb1c71f+_0x4df344(0x292));if(_0x14ecc1)_0x14ecc1[_0x4df344(0x230)]=_0x384eb1<=0x1;const _0x57775c=query(_0xb631ed,orderBy(_0x4df344(0x249),'desc'),startAfter(eloHistoryPagination[_0xb1c71f]['lastVisible']),limit(0x1)),_0x3a5494=await getDocs(_0x57775c);if(_0x400318)_0x400318['disabled']=_0x3a5494['empty'];}catch(_0x4f9848){console['error']('Error\x20loading\x20ELO\x20history:',_0x4f9848),_0x54d2e7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x4f9848[_0x4df344(0x106)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0xf82208){const _0x1f3636=a4_0x302a99;switch(_0xf82208){case'match_result':return'Match\x20Result';case'promotion':return _0x1f3636(0x187);case _0x1f3636(0x153):return'Demotion';case _0x1f3636(0x2f7):return _0x1f3636(0x1bd);case'initial_placement':return'Initial\x20Placement';default:return _0xf82208||_0x1f3636(0xec);}}function setupEloHistorySection(){const _0x249596=a4_0x302a99;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document[_0x249596(0x118)]('d1-next-page')[_0x249596(0x283)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')[_0x249596(0x283)](_0x249596(0x112),()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener'](_0x249596(0x112),()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x4438f3=document['getElementById']('d3-prev-page'),_0x312059=document[_0x249596(0x118)]('d3-next-page');_0x4438f3&&_0x4438f3['addEventListener'](_0x249596(0x112),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x312059&&_0x312059[_0x249596(0x283)]('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x2774e8=document[_0x249596(0x118)]('elo-history-search');_0x2774e8&&_0x2774e8['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x6e194d=document['getElementById']('history-type-filter');_0x6e194d&&_0x6e194d['addEventListener'](_0x249596(0x30e),applyEloHistoryFilters);const _0x30a37a=document['getElementById'](_0x249596(0x180));_0x30a37a&&_0x30a37a['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x2b6386=a4_0x302a99,_0x1241eb=document['getElementById']('elo-history-search')[_0x2b6386(0x140)][_0x2b6386(0x27c)](),_0x565862=document['querySelectorAll'](_0x2b6386(0x2cd));let _0x2f0e9e=0x0;_0x565862['forEach'](_0x4a334f=>{const _0x14aada=_0x2b6386;if(_0x4a334f['classList']['contains'](_0x14aada(0x2d6))||_0x4a334f['classList']['contains'](_0x14aada(0x1c1))||_0x4a334f[_0x14aada(0x2fc)]['contains']('error-state'))return;const _0xa6e366=_0x4a334f['querySelector']('.player')?.[_0x14aada(0x202)]['toLowerCase']()||'',_0x474c93=_0x4a334f['querySelector'](_0x14aada(0x16a))?.['textContent']['toLowerCase']()||'',_0x3a9753=_0x4a334f['querySelector']('.admin-action')?.['textContent']['toLowerCase']()||'';_0xa6e366['includes'](_0x1241eb)||_0x474c93['includes'](_0x1241eb)||_0x3a9753['includes'](_0x1241eb)?(_0x4a334f['style'][_0x14aada(0x232)]='',_0x2f0e9e++):_0x4a334f['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x51d98a=a4_0x302a99,_0x4c87a3=document[_0x51d98a(0x118)]('history-start-date')['value'],_0x1db241=document['getElementById'](_0x51d98a(0x2e2))['value'],_0x42227c=document[_0x51d98a(0x118)]('history-type-filter')['value'],_0x215c5f=currentLadder[_0x51d98a(0x27c)]();eloHistoryPagination[_0x215c5f]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x2aa0ab=document[_0x51d98a(0x118)]('elo-history-table-body');_0x2aa0ab[_0x51d98a(0x209)]=_0x51d98a(0x108);try{const _0x4d24ad=currentLadder==='D1'?'eloHistory':_0x51d98a(0x212),_0x11a9e3=collection(db,_0x4d24ad);let _0x415fe5=[orderBy(_0x51d98a(0x249),_0x51d98a(0x2ea))];if(_0x4c87a3){const _0x498fe7=new Date(_0x4c87a3);_0x498fe7['setHours'](0x0,0x0,0x0,0x0),_0x415fe5[_0x51d98a(0x1e2)](where('timestamp','>=',_0x498fe7));}if(_0x1db241){const _0xe8aa3d=new Date(_0x1db241);_0xe8aa3d['setHours'](0x17,0x3b,0x3b,0x3e7),_0x415fe5[_0x51d98a(0x1e2)](where(_0x51d98a(0x249),'<=',_0xe8aa3d));}_0x42227c&&_0x42227c!=='all'&&_0x415fe5['push'](where('type','==',_0x42227c));_0x415fe5['push'](limit(PAGE_SIZE));const _0x170c48=query(_0x11a9e3,..._0x415fe5),_0x73f3d2=await getDocs(_0x170c48);!_0x73f3d2[_0x51d98a(0x160)]&&(eloHistoryPagination[_0x215c5f]['firstVisible']=_0x73f3d2[_0x51d98a(0x269)][0x0],eloHistoryPagination[_0x215c5f][_0x51d98a(0x2a3)]=_0x73f3d2['docs'][_0x73f3d2['docs']['length']-0x1]);_0x2aa0ab['innerHTML']='';if(_0x73f3d2[_0x51d98a(0x160)]){_0x2aa0ab['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x73f3d2['forEach'](_0x660fcd=>{const _0x685f5a=_0x51d98a,_0x543014=_0x660fcd[_0x685f5a(0x1a2)](),_0x1367e0=document['createElement']('tr'),_0x4fa635=_0x543014['timestamp']?new Date(_0x543014['timestamp']['seconds']*0x3e8)[_0x685f5a(0x155)]():'N/A',_0x55c788=_0x543014['newElo']-_0x543014['previousElo'],_0x24af70=_0x55c788>0x0?'positive-change':_0x55c788<0x0?'negative-change':'',_0x256edf=_0x55c788>0x0?'+':'',_0xaf8836=_0x543014[_0x685f5a(0x191)]||_0x543014[_0x685f5a(0x29a)]||_0x543014[_0x685f5a(0xf5)]||_0x685f5a(0x10e);_0x1367e0[_0x685f5a(0x209)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x4fa635+_0x685f5a(0x1dd)+_0xaf8836+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x543014['previousElo']||'N/A')+_0x685f5a(0x1de)+(_0x543014['newElo']||_0x685f5a(0x10e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x24af70+'\x22>'+_0x256edf+_0x55c788+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x543014['type'])+_0x685f5a(0x2d8)+(_0x543014['modifiedBy']||_0x543014['promotedBy']||_0x543014['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2aa0ab['appendChild'](_0x1367e0);}),document['getElementById'](_0x215c5f+'-page-indicator')['textContent']='Page\x201';}catch(_0x3de853){console['error'](_0x51d98a(0xe5),_0x3de853),_0x2aa0ab['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x3de853['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0xc8e4d5=a4_0x302a99;document[_0xc8e4d5(0x118)]('history-start-date')['value']='',document['getElementById'](_0xc8e4d5(0x2e2))[_0xc8e4d5(0x140)]='',document[_0xc8e4d5(0x118)]('history-type-filter')['value']='all',document['getElementById']('elo-history-search')['value']='';const _0x3d4ad0=currentLadder['toLowerCase']();eloHistoryPagination[_0x3d4ad0]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0xde8476=a4_0x302a99,_0x4ed31b=document['getElementById'](_0xde8476(0x287)),_0x425914=document['getElementById']('promote-modal'),_0x39e048=document['getElementById'](_0xde8476(0x12d));_0x4ed31b&&_0x425914&&_0x39e048&&(_0x4ed31b['addEventListener'](_0xde8476(0x112),()=>{const _0x1828b6=_0xde8476;_0x425914[_0x1828b6(0x2fc)][_0x1828b6(0x2c2)]('active');}),_0x425914['addEventListener'](_0xde8476(0x112),_0x2482f7=>{_0x2482f7['target']===_0x425914&&_0x425914['classList']['remove']('active');}),_0x39e048[_0xde8476(0x283)]('submit',async _0x4eb58c=>{const _0x306e21=_0xde8476;_0x4eb58c['preventDefault']();const _0x43ee1f=document['getElementById']('promote-username'),_0x400791=document['getElementById'](_0x306e21(0x1d1)),_0x1133ae=_0x43ee1f['value']['trim'](),_0x42907e=_0x400791[_0x306e21(0x140)];if(!_0x1133ae){showNotification(_0x306e21(0x2ba),'error');return;}try{await promotePlayer(_0x1133ae,_0x42907e),_0x425914['classList']['remove']('active'),_0x43ee1f[_0x306e21(0x140)]='';}catch(_0x18cc82){showNotification(_0x18cc82['message'],'error');}}),document[_0xde8476(0x118)]('cancel-promote-btn')['addEventListener']('click',()=>{const _0x37e774=_0xde8476;_0x425914['classList'][_0x37e774(0x13e)]('active');}));const _0x497563=document['getElementById']('demote-player-btn'),_0x2f4e76=document['getElementById']('demote-modal'),_0x34a085=document['getElementById']('demote-form');_0x497563&&_0x2f4e76&&_0x34a085&&(_0x497563['addEventListener']('click',()=>{const _0x3ae0d0=_0xde8476;_0x2f4e76['classList'][_0x3ae0d0(0x2c2)](_0x3ae0d0(0x1b4));}),_0x2f4e76['addEventListener']('click',_0x2e688c=>{const _0x433fc0=_0xde8476;_0x2e688c['target']===_0x2f4e76&&_0x2f4e76['classList'][_0x433fc0(0x13e)]('active');}),_0x34a085[_0xde8476(0x283)]('submit',async _0x441309=>{const _0x5c7bbb=_0xde8476;_0x441309['preventDefault']();const _0x58db61=document['getElementById'](_0x5c7bbb(0x211)),_0x1840de=document['getElementById']('demote-ladder'),_0x56db38=_0x58db61['value']['trim'](),_0x27f557=_0x1840de['value'];if(!_0x56db38){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x56db38,_0x27f557),document['getElementById'](_0x5c7bbb(0x25d))['classList']['remove'](_0x5c7bbb(0x1b4)),document['getElementById']('demote-username')[_0x5c7bbb(0x140)]='';}catch(_0x627c8c){console[_0x5c7bbb(0x248)]('Error\x20in\x20demotion:',_0x627c8c);}}));const _0x2c1693=document['getElementById']('set-elo-btn'),_0x6b9eff=document[_0xde8476(0x118)]('set-elo-modal'),_0x3ef10c=document[_0xde8476(0x118)](_0xde8476(0xff));_0x2c1693&&_0x6b9eff&&_0x3ef10c&&(_0x2c1693[_0xde8476(0x283)](_0xde8476(0x112),()=>{const _0x1a705d=_0xde8476;_0x6b9eff[_0x1a705d(0x2fc)]['add'](_0x1a705d(0x1b4));}),_0x6b9eff['addEventListener']('click',_0x2237f1=>{const _0x3050b0=_0xde8476;_0x2237f1[_0x3050b0(0x286)]===_0x6b9eff&&_0x6b9eff['classList'][_0x3050b0(0x13e)]('active');}),_0x3ef10c['addEventListener']('submit',async _0x46332a=>{const _0x9194aa=_0xde8476;_0x46332a[_0x9194aa(0x302)]();const _0x25a00b=document['getElementById']('set-elo-username'),_0x21119d=document['getElementById']('set-elo-value');let _0x409da7;const _0x41ad55=document['getElementById']('set-elo-ladder'),_0x4a2d98=document[_0x9194aa(0xe7)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0x41ad55)_0x409da7=_0x41ad55['value'];else _0x4a2d98?_0x409da7=_0x4a2d98['value']:_0x409da7='D1';if(!_0x25a00b||!_0x21119d){showNotification(_0x9194aa(0x23a),'error');return;}const _0x2f4b46=_0x25a00b['value'][_0x9194aa(0x2c0)](),_0x5eb41a=parseInt(_0x21119d[_0x9194aa(0x140)]);if(!_0x2f4b46||isNaN(_0x5eb41a)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x2f4b46,_0x5eb41a,_0x409da7),_0x6b9eff[_0x9194aa(0x2fc)][_0x9194aa(0x13e)]('active'),_0x25a00b['value']='',_0x21119d['value']='';}catch(_0x397354){showNotification(_0x397354['message'],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{const _0x4ee26f=_0xde8476;_0x6b9eff[_0x4ee26f(0x2fc)]['remove']('active');}));const _0x5aa031=document['getElementById']('set-role-modal'),_0x3e7576=document[_0xde8476(0x118)]('set-role-form');if(_0x5aa031&&_0x3e7576){_0x5aa031[_0xde8476(0x283)](_0xde8476(0x112),_0x204d93=>{const _0xab58d8=_0xde8476;_0x204d93[_0xab58d8(0x286)]===_0x5aa031&&closeModalHandler();}),_0x3e7576['addEventListener']('submit',async _0x5ba2a7=>{const _0xe81d74=_0xde8476;_0x5ba2a7[_0xe81d74(0x302)]();const _0x5b582c=document[_0xe81d74(0x118)](_0xe81d74(0x2da)),_0x45d2cf=document['getElementById']('role-name'),_0x51fca7=document['getElementById']('role-color'),_0x46e3f5=_0x5b582c['value']['trim'](),_0x147436=_0x45d2cf['value']['trim'](),_0x2254b1=_0x51fca7[_0xe81d74(0x140)];if(!_0x46e3f5){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x46e3f5,_0x147436,_0x2254b1),closeModalHandler(),loadUsersWithRoles();}catch(_0xbcd9f3){}});const _0x28c81d=document['getElementById']('cancel-role-btn');_0x28c81d&&(_0x28c81d['removeEventListener'](_0xde8476(0x112),closeModalHandler),_0x28c81d['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x478fd9,_0x4345b8){const _0x413a60=a4_0x302a99;try{console['log']('Attempting\x20to\x20promote\x20'+_0x478fd9+'\x20in\x20'+_0x4345b8+'\x20ladder');const _0xe69e67=auth['currentUser'];if(!_0xe69e67)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x2b9778=_0x4345b8==='D2'?'playersD2':'players',_0x1cc870=_0x4345b8==='D2'?'eloHistoryD2':'eloHistory';console[_0x413a60(0x1d9)]('Searching\x20for\x20player\x20in\x20'+_0x2b9778);const _0x59fe39=collection(db,_0x2b9778),_0x90af57=query(_0x59fe39,where(_0x413a60(0x29a),'==',_0x478fd9)),_0x304943=await getDocs(_0x90af57);if(_0x304943[_0x413a60(0x160)]){alert('Player\x20not\x20found\x20in\x20'+_0x4345b8+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x4345b8+'\x20ladder');}const _0x160d14=_0x304943['docs'][0x0],_0x6d35f5=_0x160d14['data'](),_0x4b88bd=_0x6d35f5['eloRating']||0x4b0,_0x175c1b=_0x160d14['id'];console['log'](_0x413a60(0x15f)+_0x4b88bd);const _0x13e6ca=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':_0x413a60(0x21d),'elo':0x7d0}];let _0xcc52d=_0x13e6ca['find'](_0x2168d5=>_0x2168d5['elo']>_0x4b88bd);if(!_0xcc52d){alert(_0x413a60(0x19f)+_0x4345b8+_0x413a60(0xfa));throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x4345b8+'\x20ladder');}console['log']('Promoting\x20player\x20to\x20'+_0xcc52d['name']+'\x20('+_0xcc52d['elo']+')'),await updateDoc(doc(db,_0x2b9778,_0x160d14['id']),{'eloRating':_0xcc52d[_0x413a60(0x2b5)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0xe69e67['email']||_0x413a60(0x22d)}),await addDoc(collection(db,_0x1cc870),{'player':_0x478fd9,'previousElo':_0x4b88bd,'newElo':_0xcc52d[_0x413a60(0x2b5)],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0xcc52d[_0x413a60(0x19a)],'promotedBy':_0xe69e67['email']||_0x413a60(0x22d),'gameMode':_0x4345b8});try{const {promotionManager:_0x176f7d}=await import('./promotions.js'),_0x12d707=_0x176f7d[_0x413a60(0x2b3)](_0x4b88bd),_0x282185=_0xcc52d[_0x413a60(0x19a)];await _0x176f7d['sendPromotionNotification'](_0x175c1b,_0x478fd9,_0x4b88bd,_0xcc52d['elo'],_0x12d707,_0x282185,_0x413a60(0x2db),{'displayName':_0x478fd9,'source':'admin','adminUser':_0xe69e67['email'],'ladder':_0x4345b8}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x2a4b58){console[_0x413a60(0x248)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x2a4b58);}return alert('Successfully\x20promoted\x20'+_0x478fd9+'\x20to\x20'+_0xcc52d['name']+'\x20('+_0xcc52d[_0x413a60(0x2b5)]+')'),currentLadder===_0x4345b8&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x230c5f){console['error']('Error\x20promoting\x20player:',_0x230c5f),alert('Error\x20promoting\x20player:\x20'+_0x230c5f[_0x413a60(0x106)]);throw _0x230c5f;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x1a38b8=a4_0x302a99,_0x2446d9=document['getElementById']('promote-form');_0x2446d9&&_0x2446d9[_0x1a38b8(0x283)]('submit',async _0x5b7ba2=>{const _0x418820=_0x1a38b8;_0x5b7ba2['preventDefault']();const _0xb2857a=document['getElementById']('promote-username')['value']['trim'](),_0x501b89=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')[_0x418820(0x140)];if(!_0xb2857a){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0xb2857a,_0x501b89),document[_0x418820(0x118)](_0x418820(0x308))['classList']['remove']('active'),document['getElementById'](_0x418820(0x1da))[_0x418820(0x140)]='';}catch(_0x2ff595){console['error']('Error\x20in\x20promotion:',_0x2ff595);}});});async function demotePlayer(_0x1f20a4,_0x235abb){const _0x2b629d=a4_0x302a99;try{console['log']('Attempting\x20to\x20demote\x20'+_0x1f20a4+'\x20in\x20'+_0x235abb+'\x20ladder');const _0x12fb45=auth[_0x2b629d(0x148)];if(!_0x12fb45)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x2fad72=_0x235abb==='D2'?'playersD2':'players',_0x1d4523=_0x235abb==='D2'?'eloHistoryD2':_0x2b629d(0x128);console['log'](_0x2b629d(0x297)+_0x2fad72);const _0x3f53e6=collection(db,_0x2fad72),_0x12956a=query(_0x3f53e6,where(_0x2b629d(0x29a),'==',_0x1f20a4)),_0x92ce5=await getDocs(_0x12956a);if(_0x92ce5['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x235abb+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x235abb+'\x20ladder');}const _0x46a5b8=_0x92ce5['docs'][0x0],_0x4f6720=_0x46a5b8['data'](),_0x4db027=_0x4f6720['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x4db027);const _0x353e9d=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x2b629d(0x234),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x3d9610=_0x353e9d[_0x2b629d(0x19e)](_0x2cd8bb=>_0x2cd8bb['elo']<_0x4db027);if(!_0x3d9610){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x235abb+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x235abb+_0x2b629d(0xfa));}console['log']('Demoting\x20player\x20to\x20'+_0x3d9610[_0x2b629d(0x19a)]+'\x20('+_0x3d9610['elo']+')'),await updateDoc(doc(db,_0x2fad72,_0x46a5b8['id']),{'eloRating':_0x3d9610[_0x2b629d(0x2b5)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x12fb45[_0x2b629d(0x171)]||_0x2b629d(0x22d)}),await addDoc(collection(db,_0x1d4523),{'player':_0x1f20a4,'previousElo':_0x4db027,'newElo':_0x3d9610['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x3d9610['name'],'demotedBy':_0x12fb45['email']||'admin','gameMode':_0x235abb});try{const {promotionManager:_0x5f84fa}=await import('./promotions.js'),_0x1bbdd6=_0x5f84fa['getRankName'](_0x4db027),_0x4d1c01=_0x3d9610['name'];await _0x5f84fa['sendPromotionNotification'](_0x46a5b8['id'],_0x1f20a4,_0x4db027,_0x3d9610[_0x2b629d(0x2b5)],_0x1bbdd6,_0x4d1c01,_0x2b629d(0x153),{'displayName':_0x1f20a4,'source':'admin','adminUser':_0x12fb45['email'],'ladder':_0x235abb}),console['log'](_0x2b629d(0x201));}catch(_0x4c1857){console[_0x2b629d(0x248)](_0x2b629d(0x1b1),_0x4c1857);}return alert('Successfully\x20demoted\x20'+_0x1f20a4+_0x2b629d(0xfc)+_0x3d9610['name']+'\x20('+_0x3d9610[_0x2b629d(0x2b5)]+')'),currentLadder===_0x235abb&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x57a73e){console[_0x2b629d(0x248)]('Error\x20demoting\x20player:',_0x57a73e),alert('Error\x20demoting\x20player:\x20'+_0x57a73e['message']);throw _0x57a73e;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x51d8b7=a4_0x302a99,_0x54d23b=document['getElementById'](_0x51d8b7(0x2cf));_0x54d23b&&_0x54d23b['addEventListener']('submit',async _0x214fb6=>{const _0x3d637c=_0x51d8b7;_0x214fb6['preventDefault']();const _0x250e2d=document['getElementById'](_0x3d637c(0x211))['value']['trim'](),_0x4319a7=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')[_0x3d637c(0x140)];if(!_0x250e2d){alert(_0x3d637c(0x2ba));return;}try{await demotePlayer(_0x250e2d,_0x4319a7),document['getElementById']('demote-modal')['classList'][_0x3d637c(0x13e)]('active'),document['getElementById']('demote-username')['value']='';}catch(_0x569c12){console['error']('Error\x20in\x20demotion:',_0x569c12);}});});async function setCustomElo(_0x4c02a4,_0x5cd0e7,_0x53961b){const _0x2e4f5f=a4_0x302a99;try{const _0x1a7854=auth['currentUser'];if(!_0x1a7854||!isAdmin(_0x1a7854['email']))throw new Error(_0x2e4f5f(0x296));const _0x58b889=_0x53961b==='D2'?'playersD2':'players',_0x4c056c=_0x53961b==='D2'?'eloHistoryD2':'eloHistory',_0xec884c=collection(db,_0x58b889),_0x23e3ad=query(_0xec884c,where(_0x2e4f5f(0x29a),'==',_0x4c02a4)),_0x444968=await getDocs(_0x23e3ad);if(_0x444968['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x53961b+'\x20ladder');const _0x332b43=_0x444968['docs'][0x0],_0x8d700f=_0x332b43[_0x2e4f5f(0x1a2)](),_0x3d2309=_0x8d700f['eloRating']||0x4b0,_0x1023f4=writeBatch(db);_0x1023f4['update'](doc(db,_0x58b889,_0x332b43['id']),{'eloRating':_0x5cd0e7,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x1a7854['email']});const _0xda6d1d=doc(collection(db,_0x4c056c));return _0x1023f4['set'](_0xda6d1d,{'player':_0x4c02a4,'previousElo':_0x3d2309,'newElo':_0x5cd0e7,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x1a7854['email'],'gameMode':_0x53961b}),await _0x1023f4[_0x2e4f5f(0xe3)](),showNotification(_0x2e4f5f(0x1f7)+_0x4c02a4+'\x20was\x20updated\x20from\x20'+_0x3d2309+'\x20to\x20'+_0x5cd0e7,'success'),currentLadder===_0x53961b&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x45d30d){console['error'](_0x2e4f5f(0x120),_0x45d30d);throw _0x45d30d;}}async function setUserRole(_0x2cf470,_0x45d2e1,_0x7dadf4){const _0x532b89=a4_0x302a99;try{const _0x201b25=auth[_0x532b89(0x148)];if(!_0x201b25||!isAdmin(_0x201b25['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x272d45=_0x45d2e1?_0x45d2e1[_0x532b89(0x2c0)]():null,_0x33adde=_0x272d45?_0x7dadf4||_0x532b89(0x228):null,[_0xb5dca8,_0x1bf2b8]=await Promise[_0x532b89(0x117)]([getDocs(query(collection(db,'players'),where('username','==',_0x2cf470))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x2cf470)))]),_0x4f5ba9=[];if(!_0xb5dca8['empty'])_0x4f5ba9[_0x532b89(0x1e2)]({'ref':_0xb5dca8[_0x532b89(0x269)][0x0]['ref'],'source':'D1'});if(!_0x1bf2b8[_0x532b89(0x160)])_0x4f5ba9['push']({'ref':_0x1bf2b8['docs'][0x0]['ref'],'source':'D2'});if(_0x4f5ba9['length']===0x0){const [_0x3774d1,_0x2835da]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x2cf470))),getDocs(query(collection(db,'userProfiles'),where(_0x532b89(0x29a),'==',_0x2cf470)))]);if(!_0x3774d1['empty'])_0x4f5ba9['push']({'ref':_0x3774d1['docs'][0x0][_0x532b89(0x145)],'source':'NonParticipant'});if(!_0x2835da['empty'])_0x4f5ba9['push']({'ref':_0x2835da['docs'][0x0][_0x532b89(0x145)],'source':'UserProfile'});}if(_0x4f5ba9['length']===0x0)throw new Error('User\x20\x22'+_0x2cf470+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x698b60=writeBatch(db);_0x4f5ba9['forEach'](_0x294006=>{console['log']('Updating\x20role\x20for\x20'+_0x2cf470+'\x20in\x20'+_0x294006['source']),!_0x272d45?_0x698b60['update'](_0x294006['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x698b60['update'](_0x294006['ref'],{'roleName':_0x272d45,'roleColor':_0x33adde,'roleAssignedBy':_0x201b25['email'],'roleAssignedAt':serverTimestamp()});}),await _0x698b60['commit']();const _0x200721=_0x272d45?'Role\x20\x22'+_0x272d45+'\x22\x20set':_0x532b89(0x272);return showNotification(_0x200721+_0x532b89(0x189)+_0x2cf470+'\x22','success'),!![];}catch(_0x491072){console[_0x532b89(0x248)]('Error\x20setting\x20user\x20role:',_0x491072),showNotification(_0x532b89(0x2d2)+_0x491072['message'],_0x532b89(0x248));throw _0x491072;}}function showNotification(_0x2d47dc,_0x55a2cd=a4_0x302a99(0x22b)){const _0x2e08b8=a4_0x302a99,_0x4bf906=document['createElement']('div');_0x4bf906[_0x2e08b8(0x258)]='notification\x20'+_0x55a2cd,_0x4bf906['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x55a2cd)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x2d47dc+_0x2e08b8(0x26c),document[_0x2e08b8(0xf3)]['appendChild'](_0x4bf906),setTimeout(()=>{_0x4bf906['classList']['add']('active');},0xa);const _0x192854=setTimeout(()=>{closeNotification(_0x4bf906);},0x1388);_0x4bf906['querySelector']('.close-notification')[_0x2e08b8(0x283)]('click',()=>{clearTimeout(_0x192854),closeNotification(_0x4bf906);});}function getNotificationIcon(_0x47476a){const _0x4c0f98=a4_0x302a99;switch(_0x47476a){case'success':return'fa-check-circle';case _0x4c0f98(0x248):return'fa-exclamation-circle';case'warning':return _0x4c0f98(0x179);case _0x4c0f98(0x22b):default:return'fa-info-circle';}}function closeNotification(_0x1dddc7){const _0x1867bf=a4_0x302a99;_0x1dddc7[_0x1867bf(0x2fc)]['remove']('active'),setTimeout(()=>{const _0x896fc5=_0x1867bf;_0x1dddc7[_0x896fc5(0x13e)]();},0x12c);}function setupUserRolesSection(){const _0x214c42=a4_0x302a99,_0x4768bc=document['getElementById']('load-users-data');_0x4768bc&&_0x4768bc[_0x214c42(0x283)](_0x214c42(0x112),function(){const _0x4c757d=_0x214c42;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x4c757d(0x253)](()=>{const _0x777d5=_0x4c757d;this[_0x777d5(0x2fc)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x199ffe=>{const _0x36a9e8=_0x4c757d;console[_0x36a9e8(0x248)]('Error\x20loading\x20users:',_0x199ffe),this['classList'][_0x36a9e8(0x13e)](_0x36a9e8(0x20a)),this[_0x36a9e8(0x209)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x1f7494=document['getElementById']('add-new-role-btn');_0x1f7494&&_0x1f7494['addEventListener']('click',()=>{const _0x5433a9=_0x214c42,_0x2005f9=document[_0x5433a9(0x118)]('set-role-modal');_0x2005f9&&_0x2005f9['classList']['add'](_0x5433a9(0x1b4));});const _0x7bbba4=document['getElementById'](_0x214c42(0x23b));_0x7bbba4&&_0x7bbba4[_0x214c42(0x283)]('input',debounce(filterUsersTable,0x12c));const _0x40ea96=document['getElementById']('role-filter');_0x40ea96&&_0x40ea96['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x26dc1f=a4_0x302a99,_0x266093=document['getElementById']('users-table-body');if(!_0x266093)return;_0x266093['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x299fb9,_0x3555e7,_0x402edc,_0x40b576]=await Promise[_0x26dc1f(0x117)]([getDocs(collection(db,_0x26dc1f(0x241))),getDocs(collection(db,_0x26dc1f(0x279))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x4c97d9=new Map();function _0x1a626d(_0x39e37d,_0x22e279){_0x39e37d['forEach'](_0x32247b=>{const _0x5074b1=a4_0x4904,_0x329a08=_0x32247b['data']();if(!_0x329a08[_0x5074b1(0x29a)])return;if(!_0x4c97d9['has'](_0x329a08['username']))_0x4c97d9[_0x5074b1(0x116)](_0x329a08['username'],{'username':_0x329a08['username'],'roleName':_0x329a08['roleName']||null,'roleColor':_0x329a08[_0x5074b1(0x2b0)]||null,'roleAssignedBy':_0x329a08['roleAssignedBy']||null,'roleAssignedAt':_0x329a08[_0x5074b1(0x132)]||null,'sources':[_0x22e279]});else{const _0x184dc5=_0x4c97d9[_0x5074b1(0x207)](_0x329a08['username']);_0x329a08['roleName']&&(!_0x184dc5[_0x5074b1(0x2ab)]||_0x22e279==='D1'||_0x22e279==='D2')&&(_0x184dc5['roleName']=_0x329a08[_0x5074b1(0x2ab)],_0x184dc5['roleColor']=_0x329a08[_0x5074b1(0x2b0)],_0x184dc5['roleAssignedBy']=_0x329a08['roleAssignedBy'],_0x184dc5['roleAssignedAt']=_0x329a08[_0x5074b1(0x132)]),!_0x184dc5['sources']['includes'](_0x22e279)&&_0x184dc5['sources'][_0x5074b1(0x1e2)](_0x22e279);}});}_0x1a626d(_0x299fb9,'D1'),_0x1a626d(_0x3555e7,'D2'),_0x1a626d(_0x402edc,'Non-Participant'),_0x1a626d(_0x40b576,_0x26dc1f(0x307));const _0x32e57f=Array['from'](_0x4c97d9['values']())['sort']((_0x51574b,_0x587014)=>_0x51574b[_0x26dc1f(0x29a)]['localeCompare'](_0x587014[_0x26dc1f(0x29a)]));if(_0x32e57f['length']===0x0){_0x266093[_0x26dc1f(0x209)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x266093['innerHTML']='',_0x32e57f['forEach'](_0x179c60=>{const _0x4394aa=_0x26dc1f,_0x4ab656=document['createElement']('tr');_0x4ab656[_0x4394aa(0x215)]['username']=_0x179c60['username'],_0x4ab656[_0x4394aa(0x215)][_0x4394aa(0x2ab)]=_0x179c60['roleName']||'',_0x4ab656['dataset']['roleColor']=_0x179c60['roleColor']||'#808080';const _0x24a359=_0x179c60['roleAssignedAt']?new Date(_0x179c60[_0x4394aa(0x132)]['seconds']*0x3e8)[_0x4394aa(0x1a6)]():'N/A',_0x1b7827=_0x179c60['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x179c60['roleColor']+_0x4394aa(0x1d2)+getContrastColor(_0x179c60['roleColor'])+';\x22>'+_0x179c60['roleName']+_0x4394aa(0x1ac):_0x4394aa(0x2f8);_0x4ab656[_0x4394aa(0x209)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x179c60['username']+_0x4394aa(0x2f4)+_0x179c60[_0x4394aa(0x1ca)]['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1b7827+_0x4394aa(0x303)+(_0x179c60['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x24a359+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x179c60['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x179c60['roleName']?_0x4394aa(0x1d8)+_0x179c60['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x266093[_0x4394aa(0x173)](_0x4ab656);}),document[_0x26dc1f(0x13c)](_0x26dc1f(0x1d4))['forEach'](_0xec37f2=>{_0xec37f2['addEventListener']('click',()=>{const _0x4b15ba=_0xec37f2['dataset']['username'];openRoleEditModal(_0x4b15ba);});}),document['querySelectorAll'](_0x26dc1f(0x255))[_0x26dc1f(0x217)](_0x4bde46=>{const _0x55d5b2=_0x26dc1f;_0x4bde46[_0x55d5b2(0x283)](_0x55d5b2(0x112),()=>{const _0x5de4de=_0x55d5b2,_0x4c40b5=_0x4bde46['dataset'][_0x5de4de(0x29a)];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x4c40b5+'?')&&setUserRole(_0x4c40b5,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x5e9f19=>console['error']('Error\x20removing\x20role:',_0x5e9f19));});});}catch(_0x534106){console['error']('Error\x20loading\x20users:',_0x534106),_0x266093['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x530ade){const _0x8097c5=a4_0x302a99;console['log'](_0x8097c5(0x15a),_0x530ade);const _0x1b54b6=document['getElementById']('set-role-modal'),_0x4de28c=document['getElementById']('role-username'),_0x1f2741=document['getElementById'](_0x8097c5(0x1d6));if(!_0x1b54b6){console['error'](_0x8097c5(0x1cc)),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console[_0x8097c5(0x1d9)]('Modal\x20element\x20found:',_0x1b54b6);_0x4de28c?(_0x4de28c[_0x8097c5(0x140)]=_0x530ade,console['log']('Username\x20input\x20set\x20to:\x20'+_0x530ade)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x2e71b0=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x530ade+'\x22]');if(_0x2e71b0&&_0x1f2741){const _0xf3cc4=_0x2e71b0['dataset'][_0x8097c5(0x216)];_0x1f2741['value']=_0xf3cc4==='none'?'':_0xf3cc4,console['log'](_0x8097c5(0x1ed)+_0x1f2741[_0x8097c5(0x140)]+'\x20(based\x20on\x20data-role:\x20'+_0xf3cc4+')');}else{if(!_0x2e71b0)console['warn']('Table\x20row\x20for\x20user\x20'+_0x530ade+_0x8097c5(0x2e9));if(!_0x1f2741)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x1f2741)_0x1f2741[_0x8097c5(0x140)]='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x1b54b6['classList'][_0x8097c5(0x2c2)]('active');const _0x3314d6=document['getElementById'](_0x8097c5(0x251));_0x3314d6?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x3314d6[_0x8097c5(0x130)](_0x8097c5(0x112),closeModalHandler),_0x3314d6['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x1b54b6['removeEventListener'](_0x8097c5(0x112),closeModalBackgroundHandler),_0x1b54b6['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x47f291){_0x47f291['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x247e46=a4_0x302a99,_0x4a956e=document['getElementById'](_0x247e46(0x19c));_0x4a956e&&(_0x4a956e['classList'][_0x247e46(0x13e)]('active'),_0x4a956e['removeEventListener'](_0x247e46(0x112),closeModalBackgroundHandler));}function filterUsersTable(){const _0x5ee4e7=a4_0x302a99,_0x28af42=document['getElementById']('user-search')?.['value']['toLowerCase']()||'',_0x2c143b=document[_0x5ee4e7(0x118)]('role-filter')?.['value']||_0x5ee4e7(0x117),_0x19c418=document[_0x5ee4e7(0x13c)]('#users-table-body\x20tr');let _0x1ce3c2=0x0;_0x19c418['forEach'](_0x12b9b6=>{const _0x2e9c0b=_0x5ee4e7;if(_0x12b9b6['querySelector']('.loading-cell')||_0x12b9b6[_0x2e9c0b(0xe7)](_0x2e9c0b(0x17c))||_0x12b9b6['querySelector'](_0x2e9c0b(0xfe)))return;const _0x13d3b4=_0x12b9b6[_0x2e9c0b(0x215)]['username']?.['toLowerCase']()||'',_0x2f09f8=_0x12b9b6['dataset'][_0x2e9c0b(0x216)]||'none',_0x1ce54d=_0x13d3b4[_0x2e9c0b(0x2b9)](_0x28af42),_0x4e4327=_0x2c143b==='all'||_0x2f09f8===_0x2c143b;_0x1ce54d&&_0x4e4327?(_0x12b9b6['style']['display']='',_0x1ce3c2++):_0x12b9b6['style']['display']='none';});if(_0x1ce3c2===0x0&&_0x19c418[_0x5ee4e7(0xe9)]>0x0){const _0x17387f=document[_0x5ee4e7(0x118)](_0x5ee4e7(0x289));if(_0x17387f){if(!_0x17387f['querySelector']('.no-results')){const _0x51c8e1=document['createElement']('tr');_0x51c8e1[_0x5ee4e7(0x2fc)]['add']('no-results'),_0x51c8e1['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x17387f[_0x5ee4e7(0x173)](_0x51c8e1);}}}else{const _0x14629c=document['querySelector'](_0x5ee4e7(0x30a));_0x14629c&&_0x14629c[_0x5ee4e7(0x13e)]();}}function setupManageArticlesSection(){const _0x55a7f5=a4_0x302a99,_0x4143be=document['getElementById']('load-articles-data');_0x4143be&&_0x4143be['addEventListener']('click',function(){const _0xb8bdc1=a4_0x4904;this['classList']['add'](_0xb8bdc1(0x20a)),this[_0xb8bdc1(0x209)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0xb8bdc1(0x253)](()=>{const _0xe148e=_0xb8bdc1;this['classList']['remove']('loading'),this[_0xe148e(0x209)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x226777=>{const _0x3ab08b=_0xb8bdc1;console['error']('Error\x20loading\x20articles:',_0x226777),this['classList']['remove'](_0x3ab08b(0x20a)),this[_0x3ab08b(0x209)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3cd053=_0x3ab08b;this['innerHTML']=_0x3cd053(0x27a);},0xbb8);});});const _0x2954e1=document[_0x55a7f5(0x118)]('create-new-article-btn');_0x2954e1?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x2954e1[_0x55a7f5(0x223)]['display']='block',_0x2954e1[_0x55a7f5(0x283)]('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x50c757=document['getElementById']('article-form');_0x50c757&&_0x50c757[_0x55a7f5(0x283)]('submit',_0x20935a=>{_0x20935a['preventDefault'](),saveArticle();});const _0x300ab8=document['getElementById'](_0x55a7f5(0x15d));_0x300ab8&&_0x300ab8['addEventListener']('click',()=>{closeArticleModal();});const _0x20325c=document['querySelector'](_0x55a7f5(0x2c7));_0x20325c&&_0x20325c['addEventListener'](_0x55a7f5(0x112),()=>{closeArticleModal();});const _0x241c1d=document['getElementById'](_0x55a7f5(0x20f));_0x241c1d&&_0x241c1d['addEventListener']('click',_0x15795c=>{_0x15795c['target']===_0x241c1d&&closeArticleModal();});}async function loadArticles(){const _0x48830c=a4_0x302a99,_0x3a114d=document['getElementById']('articles-table-body');if(!_0x3a114d)return;_0x3a114d[_0x48830c(0x209)]='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x16c46f=collection(db,_0x48830c(0x1a5)),_0x49cea4=query(_0x16c46f,orderBy(_0x48830c(0x27b),_0x48830c(0x2ea))),_0x14fad8=await getDocs(_0x49cea4);if(_0x14fad8[_0x48830c(0x160)]){_0x3a114d[_0x48830c(0x209)]='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x3a114d['innerHTML']='',_0x14fad8[_0x48830c(0x217)](_0x2e5daf=>{const _0x472bc3=_0x48830c,_0x39d9ae=_0x2e5daf['data'](),_0x5e6f42=document['createElement']('tr'),_0x2b2aaa=_0x39d9ae['createdAt']?new Date(_0x39d9ae[_0x472bc3(0x27b)]['seconds']*0x3e8)[_0x472bc3(0x155)]():'N/A';_0x5e6f42['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x39d9ae['title']||'Untitled')+_0x472bc3(0x303)+(_0x39d9ae['author']||'Unknown')+_0x472bc3(0x303)+_0x2b2aaa+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x2e5daf['id']+_0x472bc3(0x13a)+_0x2e5daf['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3a114d['appendChild'](_0x5e6f42);}),setupArticleActionButtons();}catch(_0xb69180){console['error'](_0x48830c(0x196),_0xb69180),_0x3a114d['innerHTML']=_0x48830c(0x1fa)+_0xb69180['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){document['querySelectorAll']('.edit-article-btn')['forEach'](_0x207277=>{const _0x217399=a4_0x4904;_0x207277['addEventListener'](_0x217399(0x112),async _0x3d66f1=>{const _0x1a27c9=_0x217399,_0x500d5d=_0x3d66f1[_0x1a27c9(0x1ce)]['dataset']['id'];openArticleModal(_0x500d5d);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x245c53=>{_0x245c53['addEventListener']('click',async _0x3446d6=>{const _0x102544=a4_0x4904,_0x2a77e0=_0x3446d6[_0x102544(0x1ce)][_0x102544(0x215)]['id'];confirmDeleteArticle(_0x2a77e0);});});}function openArticleModal(_0xf15dfb=null){const _0x38a596=a4_0x302a99,_0x51c550=document['getElementById']('article-modal'),_0xd0c4a1=document['getElementById']('article-modal-title'),_0xff4b10=document['getElementById']('article-form'),_0x5ad35a=document['getElementById'](_0x38a596(0x22a));_0xff4b10[_0x38a596(0x262)](),_0x5ad35a['value']='';if(_0xf15dfb)_0xd0c4a1['textContent']='Edit\x20Article',_0x5ad35a[_0x38a596(0x140)]=_0xf15dfb,loadArticleData(_0xf15dfb);else{_0xd0c4a1['textContent']='Create\x20Article';const _0x48a475=auth['currentUser'];if(_0x48a475){const _0xa98b29=document['getElementById'](_0x38a596(0x1df));if(_0xa98b29&&_0x48a475['displayName'])_0xa98b29['value']=_0x48a475[_0x38a596(0x159)];else _0xa98b29&&(_0xa98b29['value']=_0x48a475[_0x38a596(0x171)]);}}_0x51c550['classList'][_0x38a596(0x2c2)](_0x38a596(0x1b4));}async function loadArticleData(_0x59f0e4){const _0x491931=a4_0x302a99;try{const _0x3311f9=doc(db,'articles',_0x59f0e4),_0x83958b=await getDoc(_0x3311f9);if(!_0x83958b[_0x491931(0xed)]()){showNotification(_0x491931(0x208),'error');return;}const _0x4abc69=_0x83958b[_0x491931(0x1a2)]();document[_0x491931(0x118)]('article-title')['value']=_0x4abc69[_0x491931(0x24d)]||'',document[_0x491931(0x118)]('article-author')['value']=_0x4abc69[_0x491931(0x102)]||'',document['getElementById'](_0x491931(0xf6))['value']=_0x4abc69[_0x491931(0x26f)]||'',document[_0x491931(0x118)](_0x491931(0x14f))[_0x491931(0x140)]=_0x4abc69['content']||'';}catch(_0x54d946){console['error']('Error\x20loading\x20article\x20data:',_0x54d946),showNotification(_0x491931(0x193),_0x491931(0x248));}}async function saveArticle(){const _0x2d27c6=a4_0x302a99;try{const _0x248db9=document['getElementById'](_0x2d27c6(0x22a))['value'],_0x43d3aa=document['getElementById']('article-title')['value']['trim'](),_0x3885a4=document['getElementById'](_0x2d27c6(0x1df))['value']['trim'](),_0x47493f=document[_0x2d27c6(0x118)](_0x2d27c6(0xf6))[_0x2d27c6(0x140)][_0x2d27c6(0x2c0)](),_0x5c0722=document[_0x2d27c6(0x118)](_0x2d27c6(0x14f))[_0x2d27c6(0x140)]['trim']();if(!_0x43d3aa||!_0x5c0722){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0xa2876=auth['currentUser'];if(!_0xa2876){showNotification(_0x2d27c6(0x16d),_0x2d27c6(0x248));return;}const _0xdccc43={'title':_0x43d3aa,'author':_0x3885a4,'imageUrl':_0x47493f||null,'content':_0x5c0722,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xa2876['email']};!_0x248db9?(_0xdccc43[_0x2d27c6(0x27b)]=serverTimestamp(),_0xdccc43['createdBy']=_0xa2876['email'],await addDoc(collection(db,'articles'),_0xdccc43),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x248db9),_0xdccc43),showNotification(_0x2d27c6(0x2a6),'success')),closeArticleModal(),loadArticles();}catch(_0x30dd40){console['error']('Error\x20saving\x20article:',_0x30dd40),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x30dd40['message'],'error');}}function closeArticleModal(){const _0x4b751c=a4_0x302a99,_0x155db5=document[_0x4b751c(0x118)]('article-modal');_0x155db5&&_0x155db5['classList'][_0x4b751c(0x13e)](_0x4b751c(0x1b4));}async function confirmDeleteArticle(_0xee39c3){const _0x377c24=a4_0x302a99;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0xee39c3)),loadArticles(),showNotification(_0x377c24(0x1f2),'success');}catch(_0xeaa3a6){console[_0x377c24(0x248)]('Error\x20deleting\x20article:',_0xeaa3a6),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0xeaa3a6['message'],'error');}}function setupTrophyManagementSection(){const _0x3c82f4=a4_0x302a99,_0x4f6e52=document['getElementById']('load-trophies-data');_0x4f6e52&&_0x4f6e52['addEventListener'](_0x3c82f4(0x112),function(){const _0x15a70e=_0x3c82f4;this[_0x15a70e(0x2fc)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x20798d=document[_0x15a70e(0x118)](_0x15a70e(0x14a));_0x20798d&&(_0x20798d['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x2c09f5=_0x15a70e;this['classList']['remove'](_0x2c09f5(0x20a)),this['innerHTML']=_0x2c09f5(0x21c);})['catch'](_0x144869=>{const _0x484ec5=_0x15a70e;console['error']('Error\x20loading\x20trophies:',_0x144869),this['classList'][_0x484ec5(0x13e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x5232ca=document[_0x3c82f4(0x118)]('create-new-trophy-btn');_0x5232ca&&_0x5232ca['addEventListener']('click',()=>{openTrophyModal();});const _0x169f3b=document['getElementById']('trophy-form');_0x169f3b&&_0x169f3b['addEventListener'](_0x3c82f4(0x282),_0x598689=>{_0x598689['preventDefault'](),saveTrophyDefinition();});const _0x5e5970=document['getElementById']('cancel-trophy-btn');_0x5e5970&&_0x5e5970['addEventListener']('click',()=>{closeTrophyModal();});document[_0x3c82f4(0x13c)](_0x3c82f4(0x2ff))['forEach'](_0x2641ea=>{const _0x498add=_0x3c82f4;_0x2641ea['addEventListener'](_0x498add(0x112),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x2dfa32=document['getElementById']('trophy-modal');_0x2dfa32&&_0x2dfa32['addEventListener'](_0x3c82f4(0x112),_0x511890=>{_0x511890['target']===_0x2dfa32&&closeTrophyModal();});const _0x301b20=document['getElementById']('assign-trophy-modal');_0x301b20&&_0x301b20[_0x3c82f4(0x283)]('click',_0x56f24e=>{const _0x2319b0=_0x3c82f4;_0x56f24e[_0x2319b0(0x286)]===_0x301b20&&closeAssignTrophyModal();});const _0x2941eb=document['getElementById']('assign-trophy-form');_0x2941eb&&_0x2941eb['addEventListener']('submit',_0x383d82=>{_0x383d82['preventDefault'](),assignTrophyToPlayer();});const _0x21b1e9=document[_0x3c82f4(0x118)]('cancel-assign-btn');_0x21b1e9&&_0x21b1e9['addEventListener'](_0x3c82f4(0x112),()=>{closeAssignTrophyModal();});const _0x49dc6f=document['getElementById']('trophy-image-url');_0x49dc6f&&(_0x49dc6f[_0x3c82f4(0x283)]('input',updateTrophyImagePreview),_0x49dc6f['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x186847=a4_0x302a99,_0x8121e5=document['getElementById']('trophy-image-url')[_0x186847(0x140)]['trim'](),_0x561d2a=document['getElementById']('trophy-image-preview');if(!_0x561d2a){const _0xee5f69=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x4940a8=document['createElement']('div');_0x4940a8['id']='trophy-image-preview',_0x4940a8['className']=_0x186847(0x28f),_0xee5f69[_0x186847(0x173)](_0x4940a8);const _0x3d7e3b=document['createElement']('img');_0x3d7e3b['id']='trophy-preview-img',_0x3d7e3b['alt']=_0x186847(0x1e6),_0x3d7e3b['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x4940a8['appendChild'](_0x3d7e3b);}const _0x198ba8=document['getElementById']('trophy-preview-img');_0x8121e5?(_0x198ba8[_0x186847(0x19b)]=_0x8121e5,_0x198ba8[_0x186847(0x223)]['display']=_0x186847(0x2f1),_0x198ba8[_0x186847(0x2fc)]['remove']('error')):(_0x198ba8[_0x186847(0x19b)]=DEFAULT_TROPHY_IMAGE,_0x198ba8['style']['display']='block');}async function loadTrophyDefinitions(){const _0x14d37e=a4_0x302a99,_0x279e10=document[_0x14d37e(0x118)](_0x14d37e(0x199));if(!_0x279e10)return;_0x279e10['innerHTML']=_0x14d37e(0x24c);try{const _0x296112=collection(db,'trophyDefinitions'),_0xa79b7e=query(_0x296112,orderBy('createdAt','desc')),_0xb7a766=await getDocs(_0xa79b7e);if(_0xb7a766['empty']){_0x279e10['innerHTML']=_0x14d37e(0x1b8);return;}_0x279e10['innerHTML']='',_0xb7a766['forEach'](_0x1997f7=>{const _0x447d76=_0x14d37e,_0x915c04=_0x1997f7[_0x447d76(0x1a2)](),_0x118a75=document['createElement']('tr'),_0x3641a8=_0x915c04['createdAt']?new Date(_0x915c04['createdAt']['seconds']*0x3e8)['toLocaleString']():_0x447d76(0x10e);_0x118a75['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x915c04['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x915c04['name']+_0x447d76(0x24e)+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x915c04['name']||_0x447d76(0x20b))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x915c04['rarity']||'common')+'\x22>'+(_0x915c04[_0x447d76(0x2af)]||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3641a8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x1997f7['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x1997f7['id']+_0x447d76(0x231)+_0x1997f7['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x279e10[_0x447d76(0x173)](_0x118a75);}),setupTrophyActionButtons();}catch(_0x4ef2dc){console[_0x14d37e(0x248)]('Error\x20loading\x20trophy\x20definitions:',_0x4ef2dc),_0x279e10['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x4ef2dc['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x475d99=a4_0x302a99;document[_0x475d99(0x13c)]('.edit-trophy-btn')[_0x475d99(0x217)](_0x28d3b0=>{_0x28d3b0['addEventListener']('click',_0x1da53e=>{const _0x33e5fe=_0x1da53e['currentTarget']['dataset']['id'];openTrophyModal(_0x33e5fe);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x317d09=>{const _0x10381e=_0x475d99;_0x317d09[_0x10381e(0x283)]('click',_0x5c9e1f=>{const _0x4aef7b=_0x5c9e1f['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x4aef7b);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x55104c=>{_0x55104c['addEventListener']('click',_0x894d47=>{const _0x108a04=a4_0x4904,_0x3a6745=_0x894d47[_0x108a04(0x1ce)][_0x108a04(0x215)]['id'];confirmDeleteTrophy(_0x3a6745);});});}function openTrophyModal(_0x51b5b8=null){const _0x383cdf=a4_0x302a99,_0x7f9734=document['getElementById']('trophy-modal'),_0x57d888=document['getElementById']('trophy-modal-title'),_0x37a3eb=document['getElementById']('trophy-form'),_0xc7deab=document['getElementById']('trophy-id');_0x37a3eb[_0x383cdf(0x262)](),_0xc7deab['value']='';const _0x3f380e=document['getElementById']('trophy-preview-img');_0x3f380e&&(_0x3f380e[_0x383cdf(0x19b)]=DEFAULT_TROPHY_IMAGE,_0x3f380e[_0x383cdf(0x2fc)]['remove'](_0x383cdf(0x248))),_0x51b5b8?(_0x57d888['textContent']='Edit\x20Trophy',_0xc7deab[_0x383cdf(0x140)]=_0x51b5b8,loadTrophyData(_0x51b5b8)):_0x57d888[_0x383cdf(0x202)]='Create\x20New\x20Trophy',_0x7f9734['classList'][_0x383cdf(0x2c2)]('active');}async function loadTrophyData(_0x26fd89){const _0x521dc9=a4_0x302a99;try{const _0x384735=doc(db,'trophyDefinitions',_0x26fd89),_0x4aab68=await getDoc(_0x384735);if(!_0x4aab68[_0x521dc9(0xed)]()){showNotification(_0x521dc9(0x137),_0x521dc9(0x248));return;}const _0xe0bb2c=_0x4aab68[_0x521dc9(0x1a2)]();document[_0x521dc9(0x118)]('trophy-name')[_0x521dc9(0x140)]=_0xe0bb2c['name']||'',document['getElementById'](_0x521dc9(0x294))['value']=_0xe0bb2c['description']||'',document['getElementById']('trophy-image-url')[_0x521dc9(0x140)]=_0xe0bb2c['image']||'',document[_0x521dc9(0x118)]('trophy-rarity')['value']=_0xe0bb2c[_0x521dc9(0x2af)]||_0x521dc9(0x141),updateTrophyImagePreview();}catch(_0x577f5e){console[_0x521dc9(0x248)]('Error\x20loading\x20trophy\x20data:',_0x577f5e),showNotification(_0x521dc9(0x142),'error');}}async function saveTrophyDefinition(){const _0x1a2145=a4_0x302a99;try{const _0xe72e93=document['getElementById']('trophy-id')['value'],_0x227c90=document[_0x1a2145(0x118)]('trophy-name')[_0x1a2145(0x140)]['trim'](),_0x370448=document[_0x1a2145(0x118)](_0x1a2145(0x294))['value']['trim'](),_0x402bab=document['getElementById']('trophy-image-url')['value']['trim'](),_0x17ad04=document[_0x1a2145(0x118)]('trophy-rarity')[_0x1a2145(0x140)];if(!_0x227c90||!_0x370448||!_0x402bab){showNotification('All\x20fields\x20are\x20required',_0x1a2145(0x248));return;}const _0x5c52fb=auth['currentUser'];if(!_0x5c52fb){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies',_0x1a2145(0x248));return;}const _0x2f4f62={'name':_0x227c90,'description':_0x370448,'image':_0x402bab,'rarity':_0x17ad04,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5c52fb['email']};!_0xe72e93?(_0x2f4f62['createdAt']=serverTimestamp(),_0x2f4f62['createdBy']=_0x5c52fb['email'],await addDoc(collection(db,'trophyDefinitions'),_0x2f4f62),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,_0x1a2145(0x2b8),_0xe72e93),_0x2f4f62),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x26bb0f){console[_0x1a2145(0x248)]('Error\x20saving\x20trophy:',_0x26bb0f),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x26bb0f['message'],'error');}}function closeTrophyModal(){const _0x32482f=a4_0x302a99,_0x2e2e63=document['getElementById']('trophy-modal');_0x2e2e63&&_0x2e2e63[_0x32482f(0x2fc)]['remove']('active');}async function confirmDeleteTrophy(_0x2fbd2d){const _0x45f8d5=a4_0x302a99;if(!_0x2fbd2d){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x419d79=auth['currentUser'];if(!_0x419d79){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x2fbd2d),await deleteDoc(doc(db,'trophyDefinitions',_0x2fbd2d)),showNotification(_0x45f8d5(0x2a9),_0x45f8d5(0x1c3)),loadTrophyDefinitions();}catch(_0x479c5a){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x479c5a),showNotification(_0x45f8d5(0x17a)+_0x479c5a['message'],'error');}}async function openAssignTrophyModal(_0x135a13){const _0x2b9b52=a4_0x302a99;try{const _0x5538d3=doc(db,'trophyDefinitions',_0x135a13),_0x2353e2=await getDoc(_0x5538d3);if(!_0x2353e2['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x1ee21f=_0x2353e2['data']();document['getElementById']('assign-trophy-id')['value']=_0x135a13,document[_0x2b9b52(0x118)]('assign-trophy-name')['value']=_0x1ee21f['name'],document[_0x2b9b52(0x118)](_0x2b9b52(0x14a))[_0x2b9b52(0x19b)]=_0x1ee21f['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x1ee21f['name']||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x1ee21f['description']||_0x2b9b52(0x2b4);const _0x2296e8=document[_0x2b9b52(0x118)](_0x2b9b52(0x2ce));_0x2296e8['textContent']=_0x1ee21f['rarity']||'common',_0x2296e8[_0x2b9b52(0x258)]='trophy-rarity\x20'+(_0x1ee21f['rarity']||'common');const _0x48b3f5=document[_0x2b9b52(0x118)]('assign-trophy-modal');_0x48b3f5['classList'][_0x2b9b52(0x2c2)](_0x2b9b52(0x1b4));}catch(_0x2cc822){console[_0x2b9b52(0x248)]('Error\x20opening\x20assign\x20trophy\x20modal:',_0x2cc822),showNotification(_0x2b9b52(0x142),'error');}}function closeAssignTrophyModal(){const _0x5b2638=document['getElementById']('assign-trophy-modal');_0x5b2638&&_0x5b2638['classList']['remove']('active');}async function assignTrophyToPlayer(){const _0x30c559=a4_0x302a99;try{const _0x376c08=document['getElementById']('assign-trophy-id')['value'],_0x370146=document['getElementById']('assign-trophy-name')[_0x30c559(0x140)],_0x2a2fa3=document['getElementById']('assign-player-username')[_0x30c559(0x140)][_0x30c559(0x2c0)](),_0x1ad1d8=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x376c08||!_0x2a2fa3){showNotification(_0x30c559(0x2f6),'error');return;}const _0x19101f=auth['currentUser'];if(!_0x19101f){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x4a7b3b=null,_0x54c40a=null,_0xdd9cc7=null;if(_0x1ad1d8===_0x30c559(0x1a4)){const _0x154423=collection(db,'nonParticipants'),_0x505f1e=query(_0x154423,where(_0x30c559(0x29a),'==',_0x2a2fa3)),_0x28fa9e=await getDocs(_0x505f1e);!_0x28fa9e['empty']&&(_0x4a7b3b=_0x28fa9e['docs'][0x0],_0x54c40a=_0x4a7b3b['id'],_0xdd9cc7=_0x4a7b3b[_0x30c559(0x1a2)]());}else{const _0xd9e13d=_0x1ad1d8==='D1'?'players':_0x1ad1d8==='D2'?_0x30c559(0x279):'playersD3',_0x3168f4=collection(db,_0xd9e13d),_0x25581e=query(_0x3168f4,where('username','==',_0x2a2fa3)),_0x3dfaab=await getDocs(_0x25581e);!_0x3dfaab['empty']&&(_0x4a7b3b=_0x3dfaab['docs'][0x0],_0x54c40a=_0x4a7b3b['id'],_0xdd9cc7=_0x4a7b3b['data']());}if(!_0x4a7b3b){showNotification('Player\x20\x22'+_0x2a2fa3+'\x22\x20not\x20found\x20in\x20'+(_0x1ad1d8==='non-participant'?_0x30c559(0x11d):_0x1ad1d8+_0x30c559(0xfa)),'error');return;}const _0x31c4b1=collection(db,'userTrophies'),_0x41f083=query(_0x31c4b1,where('userId','==',_0x54c40a),where('trophyId','==',_0x376c08)),_0x1e69a8=await getDocs(_0x41f083);if(!_0x1e69a8['empty']){showNotification(_0x30c559(0x242)+_0x2a2fa3+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,_0x30c559(0x1b5)),{'userId':_0x54c40a,'playerUsername':_0x2a2fa3,'trophyId':_0x376c08,'awardedAt':serverTimestamp(),'awardedBy':_0x19101f[_0x30c559(0x171)],'ladder':_0x1ad1d8}),showNotification('Trophy\x20\x22'+_0x370146+_0x30c559(0x2b6)+_0x2a2fa3,'success'),closeAssignTrophyModal();}catch(_0x252e61){console[_0x30c559(0x248)]('Error\x20assigning\x20trophy:',_0x252e61),showNotification(_0x30c559(0x2d4)+_0x252e61['message'],_0x30c559(0x248));}}function setupInactivePlayersSection(){const _0x5c8351=a4_0x302a99,_0x40df42=document['getElementById']('inactive-days-filter');_0x40df42&&_0x40df42[_0x5c8351(0x283)]('change',function(){const _0x2e139c=_0x5c8351,_0x44d336=document['getElementById'](_0x2e139c(0x1bb));if(_0x44d336)_0x44d336['click']();});const _0xb73c0=document[_0x5c8351(0xe7)]('.ladder-switch\x20input[value=\x22D1\x22]'),_0x21a489=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0xb73c0&&_0x21a489&&(_0xb73c0['addEventListener']('change',function(){const _0x41a304=_0x5c8351;if(this['checked']){currentLadder='D1';if(document['getElementById'](_0x41a304(0x25e))['style']['display']!=='none'){const _0x334ba1=document['getElementById'](_0x41a304(0x1bb));if(_0x334ba1)_0x334ba1['click']();}}}),_0x21a489['addEventListener']('change',function(){const _0x2a8f6a=_0x5c8351;if(this['checked']){currentLadder='D2';if(document[_0x2a8f6a(0x118)]('inactive-players')['style']['display']!=='none'){const _0x5d2f81=document['getElementById']('load-inactive-players-data');if(_0x5d2f81)_0x5d2f81[_0x2a8f6a(0x112)]();}}}));const _0xc51ad8=document['getElementById']('inactive-players-search');_0xc51ad8&&_0xc51ad8['addEventListener']('input',debounce(function(){const _0x2e39c4=_0x5c8351,_0x39cf73=_0xc51ad8['value'][_0x2e39c4(0x27c)](),_0x326c2c=document[_0x2e39c4(0x13c)](_0x2e39c4(0x311));_0x326c2c[_0x2e39c4(0x217)](_0x4977d5=>{const _0x21725d=_0x2e39c4;if(_0x4977d5['querySelector']('.loading-cell')||_0x4977d5['querySelector']('.empty-state')||_0x4977d5[_0x21725d(0xe7)]('.error-state'))return;const _0x1f83f6=_0x4977d5['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x2be0bf=_0x4977d5['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x1f83f6['includes'](_0x39cf73)||_0x2be0bf['includes'](_0x39cf73)?_0x4977d5[_0x21725d(0x223)]['display']='':_0x4977d5[_0x21725d(0x223)]['display']='none';});},0x12c)),document[_0x5c8351(0x283)](_0x5c8351(0x112),function(_0x5d1a4c){const _0x223e77=_0x5c8351;if(_0x5d1a4c['target'][_0x223e77(0x174)](_0x223e77(0x29c))){const _0x888ab1=_0x5d1a4c['target']['closest']('.view-player-btn'),_0x73a76d=_0x888ab1['dataset']['username'];_0x73a76d&&alert('View\x20player\x20details\x20for\x20'+_0x73a76d+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x23f17e=a4_0x302a99,_0x3c253f=document['getElementById']('inactive-players-table-body');if(!_0x3c253f)return;_0x3c253f['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x31ff52=document[_0x23f17e(0x118)]('inactive-days-filter'),_0x49a12e=_0x31ff52?parseInt(_0x31ff52['value'])||0x0:0x0,_0x4e4324=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x53a699=await getDocs(_0x4e4324);if(_0x53a699['empty']){_0x3c253f['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x3d19d6=[];_0x53a699['forEach'](_0x1c87e4=>{const _0x2b2e71=_0x23f17e,_0xa52b52=_0x1c87e4['data']();_0x3d19d6[_0x2b2e71(0x1e2)]({..._0xa52b52,'id':_0x1c87e4['id'],'username':_0xa52b52[_0x2b2e71(0x29a)]||_0x2b2e71(0x23f)});}),console['log'](_0x23f17e(0x2bf)+_0x3d19d6['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x4c7b82=currentLadder==='D1'?'approvedMatches':_0x23f17e(0x30f),_0x4e0fb6=_0x3d19d6['map'](async _0x3fd03c=>{const _0x25148a=_0x23f17e;try{const _0xeb2b8e=collection(db,_0x4c7b82),_0x4a8e80=query(_0xeb2b8e,or(where(_0x25148a(0x237),'==',_0x3fd03c['username']),where('loserUsername','==',_0x3fd03c['username'])),orderBy(_0x25148a(0x30c),'desc'),limit(0x1)),_0x265e0b=await getDocs(_0x4a8e80);if(!_0x265e0b['empty']){const _0x436b75=_0x265e0b['docs'][0x0][_0x25148a(0x1a2)](),_0x468c46=_0x436b75['approvedAt']?new Date(_0x436b75['approvedAt']['seconds']*0x3e8):null,_0x62e112=new Date(),_0x56de39=_0x468c46?Math['floor']((_0x62e112-_0x468c46)/(0x3e8*0x3c*0x3c*0x18)):null,_0x418530=_0x436b75[_0x25148a(0x237)]===_0x3fd03c['username']?_0x436b75[_0x25148a(0x2bd)]:_0x436b75[_0x25148a(0x237)],_0x4306a0=_0x436b75['winnerUsername']===_0x3fd03c[_0x25148a(0x29a)]?_0x25148a(0x17b):'Lost';return{..._0x3fd03c,'lastMatch':{'date':_0x468c46?_0x468c46['toLocaleDateString']():'N/A','opponent':_0x418530||'Unknown','result':_0x4306a0,'timestamp':_0x468c46||new Date(0x0),'daysSinceMatch':_0x56de39||Number['MAX_SAFE_INTEGER']}};}else return{..._0x3fd03c,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0xa8888c){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x3fd03c[_0x25148a(0x29a)]+':',_0xa8888c),{..._0x3fd03c,'lastMatch':{'date':_0x25148a(0x2c5),'opponent':_0x25148a(0x2c5),'result':_0x25148a(0x2c5),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x3c1b6b=await Promise[_0x23f17e(0x117)](_0x4e0fb6);_0x3c1b6b['sort']((_0x2f1e81,_0x4dd7e1)=>_0x4dd7e1[_0x23f17e(0x2ed)]['daysSinceMatch']-_0x2f1e81['lastMatch']['daysSinceMatch']);_0x49a12e>0x0&&(_0x3c1b6b=_0x3c1b6b['filter'](_0x29bdcc=>_0x29bdcc['lastMatch'][_0x23f17e(0x1f0)]>=_0x49a12e));_0x3c253f['innerHTML']='';if(_0x3c1b6b['length']===0x0){_0x3c253f['innerHTML']=_0x23f17e(0x178);return;}_0x3c1b6b['forEach'](_0x4cca93=>{const _0x5a5a16=_0x23f17e,_0x1fbc03=document[_0x5a5a16(0x1a9)]('tr'),_0x279579=_0x4cca93[_0x5a5a16(0x2ed)][_0x5a5a16(0x1f0)]>0x1e?'highly-inactive':_0x4cca93['lastMatch'][_0x5a5a16(0x1f0)]>0xe?'moderately-inactive':'';_0x1fbc03['className']=_0x279579,_0x1fbc03['innerHTML']=_0x5a5a16(0x24b)+_0x4cca93['username']+_0x5a5a16(0x303)+(_0x4cca93['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4cca93[_0x5a5a16(0x2ed)]['date']+_0x5a5a16(0x303)+(_0x4cca93[_0x5a5a16(0x2ed)]['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?_0x5a5a16(0x10e):_0x4cca93[_0x5a5a16(0x2ed)]['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4cca93[_0x5a5a16(0x2ed)]['date']===_0x5a5a16(0x2be)?'No\x20matches\x20found':_0x4cca93[_0x5a5a16(0x2ed)][_0x5a5a16(0x27e)]+'\x20vs\x20'+_0x4cca93['lastMatch']['opponent'])+_0x5a5a16(0x20d)+_0x4cca93[_0x5a5a16(0x29a)]+_0x5a5a16(0x28b),_0x3c253f['appendChild'](_0x1fbc03);}),console['log']('Displaying\x20'+_0x3c1b6b[_0x23f17e(0xe9)]+'\x20inactive\x20players');}catch(_0x4f34db){console['error']('Error\x20loading\x20inactive\x20players:',_0x4f34db),_0x3c253f['innerHTML']=_0x23f17e(0x2b2)+_0x4f34db[_0x23f17e(0x106)]+'</td></tr>';}}function setupHighlightButtons(){const _0x3b06d6=a4_0x302a99;console[_0x3b06d6(0x1d9)]('Setting\x20up\x20highlight\x20buttons');const _0x2226a0=document['getElementById']('create-match-highlight-btn');_0x2226a0&&_0x2226a0[_0x3b06d6(0x283)]('click',function(){const _0x5e0f6d=_0x3b06d6;console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal(_0x5e0f6d(0x1ef));});const _0x587c0d=document[_0x3b06d6(0x118)]('create-creator-highlight-btn');_0x587c0d&&_0x587c0d['addEventListener']('click',function(){console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x36eb25=document['getElementById'](_0x3b06d6(0x18f));_0x36eb25&&_0x36eb25['addEventListener']('click',function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x48d36a='match'){const _0x27ed1a=a4_0x302a99;console[_0x27ed1a(0x1d9)](_0x27ed1a(0x2e6)+_0x48d36a);const _0x26b9e5=document[_0x27ed1a(0x118)](_0x27ed1a(0x285)),_0x41ad5a=document['getElementById']('highlight-form'),_0x192856=document[_0x27ed1a(0x118)]('highlight-modal-title'),_0x210be6=document['getElementById']('highlight-id');if(!_0x26b9e5||!_0x41ad5a||!_0x192856){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x41ad5a['reset'](),_0x210be6['value']='';const _0x79486b=[_0x27ed1a(0x1ef),'creator','achievement'],_0x490194=!_0x79486b[_0x27ed1a(0x2b9)](_0x48d36a);if(_0x490194){const _0x523ff2=_0x48d36a;_0x210be6['value']=_0x523ff2,_0x192856['textContent']='Loading...',loadHighlightDataAdmin(_0x523ff2);}else{const _0x22fdbe=_0x48d36a;document['getElementById'](_0x27ed1a(0x11c))['value']=_0x22fdbe,_0x192856['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x22fdbe),toggleHighlightFields(_0x22fdbe);const _0x280548=auth[_0x27ed1a(0x148)];_0x280548&&document['getElementById']('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')[_0x27ed1a(0x140)]=_0x280548['displayName']||_0x280548['email']);}_0x26b9e5[_0x27ed1a(0x2fc)]['add']('active');}function toggleHighlightFields(_0x4fe0dd){const _0x3690c4=a4_0x302a99;console[_0x3690c4(0x1d9)]('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x4fe0dd);const _0x5810bb=document['getElementById']('highlight-form');if(!_0x5810bb)return;const _0x2b9e57=_0x5810bb['querySelectorAll']('.form-group,\x20.form-row');_0x2b9e57[_0x3690c4(0x217)](_0x12dace=>_0x12dace[_0x3690c4(0x223)]['display']='none');const _0x3c83ea=document[_0x3690c4(0x118)]('highlight-video-preview-container');if(_0x3c83ea)_0x3c83ea['style'][_0x3690c4(0x232)]='none';const _0x4c87fc=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x4c87fc['forEach'](_0x383a08=>{const _0x4384f1=_0x3690c4,_0x236f1f=document['getElementById'](_0x383a08);if(_0x236f1f)_0x236f1f['style'][_0x4384f1(0x232)]='block';});if(_0x4fe0dd===_0x3690c4(0x1ef)){const _0x4af963=[_0x3690c4(0x1f9),'highlight-match-info-container','highlight-map-container','highlight-match-date-container',_0x3690c4(0x11e),'highlight-match-link-container'];_0x4af963['forEach'](_0x23e3b6=>{const _0x4c4b1b=_0x3690c4,_0x227d1a=document['getElementById'](_0x23e3b6);_0x227d1a&&(_0x23e3b6==='highlight-players-container'?_0x227d1a['style']['display']=_0x4c4b1b(0x266):_0x227d1a['style'][_0x4c4b1b(0x232)]=_0x4c4b1b(0x2f1));});const _0x142fbf=document['getElementById'](_0x3690c4(0x10a));if(_0x142fbf){_0x142fbf['required']=!![];const _0x250cff=_0x142fbf['previousElementSibling'];if(_0x250cff)_0x250cff['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x3c83ea)_0x3c83ea['style'][_0x3690c4(0x232)]='block';updateHighlightVideoPreview();}else{if(_0x4fe0dd==='creator'){const _0x2e52b0=[_0x3690c4(0x214),'highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x2e52b0['forEach'](_0x18ef7b=>{const _0x1537f=document['getElementById'](_0x18ef7b);if(_0x1537f)_0x1537f['style']['display']='block';});const _0x258c88=document['getElementById']('highlight-video-id');if(_0x258c88){_0x258c88['required']=![];const _0x2ce449=_0x258c88['previousElementSibling'];if(_0x2ce449)_0x2ce449['innerHTML']=_0x3690c4(0x2ef);}}else{if(_0x4fe0dd===_0x3690c4(0x2d9)){const _0x8ec519=['highlight-achievement-player-container','highlight-achievement-type-container',_0x3690c4(0x267),'highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0x8ec519[_0x3690c4(0x217)](_0x5275f5=>{const _0x6ea4b8=_0x3690c4,_0x415ffd=document[_0x6ea4b8(0x118)](_0x5275f5);if(_0x415ffd)_0x415ffd['style'][_0x6ea4b8(0x232)]=_0x6ea4b8(0x2f1);});const _0x1ba417=document['getElementById'](_0x3690c4(0x10a));if(_0x1ba417){_0x1ba417[_0x3690c4(0x18a)]=![];const _0x1eb292=_0x1ba417['previousElementSibling'];if(_0x1eb292)_0x1eb292['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x3e558f){const _0x31bd65=a4_0x302a99;try{const _0xdb0ca0=doc(db,'highlights',_0x3e558f),_0x4f1332=await getDoc(_0xdb0ca0);if(!_0x4f1332['exists']()){showNotification(_0x31bd65(0x104),_0x31bd65(0x248));return;}const _0x4a3344=_0x4f1332[_0x31bd65(0x1a2)](),_0x7b6f86=_0x4a3344['type']||_0x31bd65(0x1ef);document[_0x31bd65(0x118)]('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x7b6f86),document['getElementById']('highlight-type')['value']=_0x7b6f86,toggleHighlightFields(_0x7b6f86),document[_0x31bd65(0x118)]('highlight-title')['value']=_0x4a3344['title']||'',document['getElementById']('highlight-description')[_0x31bd65(0x140)]=_0x4a3344['description']||'',document['getElementById'](_0x31bd65(0x1f4))['value']=_0x4a3344['submittedBy']||'';_0x4a3344['videoId']&&(document[_0x31bd65(0x118)](_0x31bd65(0x10a))[_0x31bd65(0x140)]=_0x4a3344[_0x31bd65(0x123)],updateHighlightVideoPreview());if(_0x7b6f86==='match'){document['getElementById']('highlight-match-info')['value']=_0x4a3344['matchInfo']||'',document[_0x31bd65(0x118)]('highlight-map')['value']=_0x4a3344[_0x31bd65(0x107)]||'';if(_0x4a3344['matchDate']){const _0x1174c5=new Date(_0x4a3344[_0x31bd65(0x306)][_0x31bd65(0x1cf)]*0x3e8);document['getElementById']('highlight-match-date')[_0x31bd65(0x140)]=_0x1174c5['toISOString']()[_0x31bd65(0x250)]('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x4a3344['winnerName']||'',document['getElementById']('highlight-winner-score')['value']=_0x4a3344['winnerScore']||'',document['getElementById']('highlight-loser-name')['value']=_0x4a3344[_0x31bd65(0x1a0)]||'',document['getElementById']('highlight-loser-score')['value']=_0x4a3344[_0x31bd65(0x2e5)]||'',document[_0x31bd65(0x118)]('highlight-match-link')[_0x31bd65(0x140)]=_0x4a3344[_0x31bd65(0x2ae)]||'';}else{if(_0x7b6f86===_0x31bd65(0x2c8))document['getElementById']('highlight-map')['value']=_0x4a3344['map']||'',document['getElementById'](_0x31bd65(0x298))['value']=_0x4a3344['mapCreator']||'',document['getElementById']('highlight-map-version')['value']=_0x4a3344['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x4a3344['creatorImageUrl']||'';else _0x7b6f86==='achievement'&&(document[_0x31bd65(0x118)]('highlight-achievement-player')['value']=_0x4a3344[_0x31bd65(0x1c5)]||'',document[_0x31bd65(0x118)]('highlight-achievement-type')[_0x31bd65(0x140)]=_0x4a3344['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x4a3344['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x4a3344['playerProfileUrl']||'',document[_0x31bd65(0x118)](_0x31bd65(0x2c4))['value']=_0x4a3344[_0x31bd65(0x2f5)]||'');}}catch(_0x47027b){console['error'](_0x31bd65(0x2d3),_0x47027b),showNotification(_0x31bd65(0xf2)+_0x47027b['message'],_0x31bd65(0x248));}}async function saveHighlight(){const _0xeecc04=a4_0x302a99;try{const _0x33f3af=document['getElementById']('highlight-id')?.[_0xeecc04(0x140)]||'',_0x2bdc5b=document['getElementById']('highlight-type')?.['value']||_0xeecc04(0x1ef),_0x14ec68={'title':document[_0xeecc04(0x118)]('highlight-title')?.[_0xeecc04(0x140)]?.['trim']()||'','description':document['getElementById']('highlight-description')?.['value']?.[_0xeecc04(0x2c0)]()||'','submittedBy':document['getElementById'](_0xeecc04(0x1f4))?.['value']?.['trim']()||'','videoId':document[_0xeecc04(0x118)]('highlight-video-id')?.[_0xeecc04(0x140)]?.['trim']()||null,'type':_0x2bdc5b};if(!_0x14ec68['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x2bdc5b==='match'){_0x14ec68['matchInfo']=document[_0xeecc04(0x118)]('highlight-match-info')?.['value']?.[_0xeecc04(0x2c0)]()||'',_0x14ec68['map']=document[_0xeecc04(0x118)]('highlight-map')?.[_0xeecc04(0x140)]?.['trim']()||'';const _0x3e38db=document['getElementById']('highlight-match-date'),_0x1f0a5e=_0x3e38db?.['value']||'';_0x14ec68['matchDate']=_0x1f0a5e?Timestamp[_0xeecc04(0x1e9)](new Date(_0x1f0a5e)):null,_0x14ec68[_0xeecc04(0x227)]=document['getElementById']('highlight-winner-name')?.[_0xeecc04(0x140)]?.['trim']()||'',_0x14ec68['winnerScore']=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x14ec68['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x14ec68[_0xeecc04(0x2e5)]=document[_0xeecc04(0x118)]('highlight-loser-score')?.[_0xeecc04(0x140)]?.[_0xeecc04(0x2c0)]()||'',_0x14ec68['matchLink']=document['getElementById']('highlight-match-link')?.[_0xeecc04(0x140)]?.['trim']()||'';if(!_0x14ec68['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights',_0xeecc04(0x248));return;}}else{if(_0x2bdc5b==='creator'){_0x14ec68['map']=document['getElementById']('highlight-map')?.['value']?.[_0xeecc04(0x2c0)]()||'',_0x14ec68['mapCreator']=document['getElementById']('highlight-map-creator')?.['value']?.['trim']()||'',_0x14ec68['mapVersion']=document[_0xeecc04(0x118)]('highlight-map-version')?.['value']?.['trim']()||'',_0x14ec68['creatorImageUrl']=document['getElementById']('highlight-creator-image')?.[_0xeecc04(0x140)]?.['trim']()||'';if(!_0x14ec68['mapCreator']){showNotification(_0xeecc04(0x257),_0xeecc04(0x248));return;}}else{if(_0x2bdc5b==='achievement'){_0x14ec68['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.[_0xeecc04(0x140)]?.['trim']()||'',_0x14ec68['achievementType']=document[_0xeecc04(0x118)]('highlight-achievement-type')?.[_0xeecc04(0x140)]?.['trim']()||'',_0x14ec68['achievementDetails']=document['getElementById'](_0xeecc04(0xf4))?.['value']?.['trim']()||'',_0x14ec68[_0xeecc04(0x15e)]=document['getElementById']('highlight-player-profile')?.[_0xeecc04(0x140)]?.['trim']()||'',_0x14ec68[_0xeecc04(0x2f5)]=document['getElementById']('highlight-achievement-image')?.['value']?.[_0xeecc04(0x2c0)]()||'';if(!_0x14ec68['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required',_0xeecc04(0x248));return;}}}}_0x33f3af?(_0x14ec68['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x33f3af),_0x14ec68),showNotification(_0xeecc04(0x11b),'success')):(_0x14ec68['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x14ec68),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x52c730){console['error'](_0xeecc04(0x18c),_0x52c730),showNotification(_0xeecc04(0x1e5)+_0x52c730[_0xeecc04(0x106)],'error');}}function closeHighlightModal(){const _0xbdd161=a4_0x302a99,_0x382e24=document['getElementById'](_0xbdd161(0x285));if(_0x382e24)_0x382e24['classList']['remove']('active');}function getHighlightTypeName(_0x470292){const _0x57e88c=a4_0x302a99;switch(_0x470292){case _0x57e88c(0x1ef):return _0x57e88c(0xf8);case'creator':return _0x57e88c(0x1ff);case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0xcd2d8f=a4_0x302a99,_0x3179d1=document['getElementById'](_0xcd2d8f(0x10a)),_0x525f1f=document['getElementById']('highlight-video-preview-container'),_0x13efdc=document['getElementById']('highlight-video-preview');if(!_0x3179d1||!_0x13efdc||!_0x525f1f)return;const _0x4fb007=_0x3179d1[_0xcd2d8f(0x140)][_0xcd2d8f(0x2c0)]();_0x4fb007&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x4fb007)?(_0x13efdc['src']='https://www.youtube.com/embed/'+_0x4fb007,_0x525f1f['style'][_0xcd2d8f(0x232)]='block'):(_0x13efdc['src']='',_0x525f1f['style']['display']='none');}async function loadHighlightsAdmin(){const _0x17a0da=a4_0x302a99,_0x5745c2=document['getElementById']('highlights-table-body');if(!_0x5745c2)return;_0x5745c2['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x7d4e01=query(collection(db,_0x17a0da(0x1f5)),orderBy(_0x17a0da(0x27b),_0x17a0da(0x2ea))),_0x83da7c=await getDocs(_0x7d4e01);if(_0x83da7c[_0x17a0da(0x160)]){_0x5745c2[_0x17a0da(0x209)]=_0x17a0da(0x275);return;}_0x5745c2[_0x17a0da(0x209)]='',_0x83da7c['forEach'](_0x597601=>{const _0x4702bd=_0x17a0da,_0x59586f=_0x597601['data'](),_0x352ec3=document['createElement']('tr'),_0x438be9=_0x59586f[_0x4702bd(0x27b)]?new Date(_0x59586f['createdAt']['seconds']*0x3e8)[_0x4702bd(0x1a6)]():_0x4702bd(0x10e);let _0x160874=_0x4702bd(0xec),_0x424648='';switch(_0x59586f[_0x4702bd(0x149)]){case _0x4702bd(0x1ef):_0x160874='Match',_0x424648='match-type';break;case'creator':_0x160874='Creator',_0x424648='creator-type';break;case'achievement':_0x160874=_0x4702bd(0x12e),_0x424648='achievement-type';break;}_0x352ec3[_0x4702bd(0x209)]=_0x4702bd(0x24b)+(_0x59586f['title']||'Untitled')+_0x4702bd(0x15c)+_0x424648+'\x22>'+_0x160874+_0x4702bd(0x243)+_0x438be9+_0x4702bd(0x303)+(_0x59586f['submittedBy']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x59586f[_0x4702bd(0x123)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x597601['id']+_0x4702bd(0x1a1)+_0x597601['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5745c2['appendChild'](_0x352ec3);}),document['querySelectorAll'](_0x17a0da(0x2f0))['forEach'](_0x200732=>{const _0xe99067=_0x17a0da;_0x200732['addEventListener'](_0xe99067(0x112),_0x4cce3c=>{const _0xff27e5=_0xe99067;openHighlightModal(_0x4cce3c[_0xff27e5(0x1ce)][_0xff27e5(0x215)]['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x36a02c=>{_0x36a02c['addEventListener']('click',_0x52860b=>{confirmDeleteHighlight(_0x52860b['currentTarget']['dataset']['id']);});});}catch(_0xe68739){console['error'](_0x17a0da(0x265),_0xe68739),_0x5745c2['innerHTML']=_0x17a0da(0x1f1)+_0xe68739['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x1f240e){const _0x48f794=a4_0x302a99;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x1f240e)),showNotification('Highlight\x20deleted\x20successfully',_0x48f794(0x1c3)),loadHighlightsAdmin();}catch(_0x278b86){console['error'](_0x48f794(0x16e),_0x278b86),showNotification(_0x48f794(0x14d)+_0x278b86[_0x48f794(0x106)],'error');}}function setupCreateTestMatchModal(){const _0x57cb3f=a4_0x302a99;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x4f418f=document['getElementById']('create-test-match-modal'),_0x3309d9=document['getElementById']('create-test-match-form');if(!_0x4f418f){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x3309d9){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0xc93567=_0x4f418f['cloneNode'](!![]);_0x4f418f['parentNode']['replaceChild'](_0xc93567,_0x4f418f);const _0xd965fc=_0xc93567['querySelector']('#create-test-match-form');_0xc93567['addEventListener'](_0x57cb3f(0x112),function(_0x4f6e73){_0x4f6e73['target']===_0xc93567&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x2f1c0e=_0xc93567[_0x57cb3f(0xe7)]('.close-btn');_0x2f1c0e&&_0x2f1c0e['addEventListener']('click',function(_0x147651){const _0x577a43=_0x57cb3f;_0x147651[_0x577a43(0x302)](),_0x147651['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x2b94f2=_0xc93567['querySelector'](_0x57cb3f(0x121));_0x2b94f2&&_0x2b94f2['addEventListener'](_0x57cb3f(0x112),function(_0x45799d){const _0x1d1648=_0x57cb3f;_0x45799d['preventDefault'](),_0x45799d[_0x1d1648(0x2aa)](),console['log'](_0x1d1648(0x247)),closeCreateTestMatchModal();});if(_0xd965fc){_0xd965fc['addEventListener']('submit',function(_0x447249){_0x447249['preventDefault'](),_0x447249['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x8055ca=_0xd965fc['querySelector']('button[type=\x22submit\x22]');_0x8055ca&&_0x8055ca['addEventListener']('click',function(_0x46c2df){_0x46c2df['preventDefault'](),_0x46c2df['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x4044a1=a4_0x302a99;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x60f1a0=document['getElementById']('highlight-form');_0x60f1a0&&_0x60f1a0['addEventListener']('submit',_0x17182d=>{const _0xb81a01=a4_0x4904;_0x17182d[_0xb81a01(0x302)](),saveHighlight();});const _0x1af93a=document['getElementById']('cancel-highlight-btn');_0x1af93a&&_0x1af93a[_0x4044a1(0x283)]('click',closeHighlightModal);const _0x17e455=document['querySelector']('#highlight-modal\x20.close-btn');_0x17e455&&_0x17e455['addEventListener'](_0x4044a1(0x112),closeHighlightModal);const _0x11a9f3=document['getElementById'](_0x4044a1(0x285));_0x11a9f3&&_0x11a9f3['addEventListener'](_0x4044a1(0x112),_0x20a8f6=>{_0x20a8f6['target']===_0x11a9f3&&closeHighlightModal();});const _0x249451=document[_0x4044a1(0x118)]('highlight-video-id');_0x249451&&_0x249451[_0x4044a1(0x283)](_0x4044a1(0x14e),()=>{updateHighlightVideoPreview();}),console[_0x4044a1(0x1d9)]('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x3e6e25=a4_0x302a99;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0xec4d40=document['getElementById']('matches-prev-page'),_0x118382=document['getElementById']('matches-next-page');_0xec4d40&&_0xec4d40['addEventListener']('click',()=>{const _0x4bfc4e=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x4bfc4e]['page']-0x1);});_0x118382&&_0x118382[_0x3e6e25(0x283)](_0x3e6e25(0x112),()=>{const _0xd0c035=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0xd0c035]['page']+0x1);});const _0x3a94c1=document[_0x3e6e25(0x118)]('apply-matches-filters'),_0x2ddfc0=document['getElementById'](_0x3e6e25(0x12b));_0x3a94c1&&_0x3a94c1['addEventListener']('click',applyMatchesFilters);_0x2ddfc0&&_0x2ddfc0[_0x3e6e25(0x283)](_0x3e6e25(0x112),resetMatchesFilters);const _0x132146=document['getElementById'](_0x3e6e25(0x16c));_0x132146&&_0x132146['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0xf1118f=document[_0x3e6e25(0x118)]('resimulate-match-btn');_0xf1118f&&_0xf1118f[_0x3e6e25(0x283)](_0x3e6e25(0x112),openResimulateModal);const _0x3997aa=document['getElementById']('resimulate-modal');if(_0x3997aa){const _0x386c24=_0x3997aa[_0x3e6e25(0xe7)](_0x3e6e25(0x1b9));_0x386c24&&_0x386c24['addEventListener'](_0x3e6e25(0x112),closeResimulateModal),_0x3997aa['addEventListener']('click',_0x511a25=>{_0x511a25['target']===_0x3997aa&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x174ceb=a4_0x302a99;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x3baf77=document['getElementById']('create-test-match-modal'),_0x17020c=document['getElementById']('create-test-match-form');if(!_0x3baf77){console['error'](_0x174ceb(0x1b0)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found',_0x174ceb(0x248));return;}if(!_0x17020c){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x17020c['reset']();const _0x53cafb=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x20fae1=![];_0x53cafb['forEach'](_0x2781ff=>{const _0x2713e9=_0x174ceb;console['log']('Found\x20radio\x20with\x20value:',_0x2781ff['value']),_0x2781ff['value']===currentLadder&&(_0x2781ff['checked']=!![],_0x20fae1=!![],console[_0x2713e9(0x1d9)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x20fae1){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x1ebd57=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x1ebd57&&(_0x1ebd57[_0x174ceb(0x2cc)]=!![],console[_0x174ceb(0x1d9)]('Defaulted\x20to\x20D1\x20ladder'));}const _0x26e440=document['getElementById']('test-match-date');if(_0x26e440){const _0x502bc0=new Date()['toISOString']()[_0x174ceb(0x250)]('T')[0x0];_0x26e440['value']=_0x502bc0;}_0x3baf77[_0x174ceb(0x223)]['display']='flex',_0x3baf77[_0x174ceb(0x223)]['visibility']=_0x174ceb(0x2ee),_0x3baf77['style']['opacity']='1',_0x3baf77['classList'][_0x174ceb(0x2c2)]('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x1f72c7=document['getElementById']('test-match-winner-username');_0x1f72c7&&setTimeout(()=>{_0x1f72c7['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x1d38a0=a4_0x302a99;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x4317c8=document['getElementById'](_0x1d38a0(0x305));if(!_0x4317c8){console['error'](_0x1d38a0(0x206));return;}_0x4317c8['classList']['remove'](_0x1d38a0(0x1b4)),_0x4317c8[_0x1d38a0(0x223)]['opacity']='0',_0x4317c8['style']['visibility']='hidden',setTimeout(()=>{const _0x37210a=_0x1d38a0;!_0x4317c8['classList'][_0x37210a(0x261)]('active')&&(_0x4317c8[_0x37210a(0x223)]['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x256b7b=a4_0x302a99;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x5b9b0b=auth[_0x256b7b(0x148)];if(!_0x5b9b0b){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x5f231a='D1',_0x58c75e='approvedMatches',_0x3617be={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x256b7b(0x190),'approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x5b9b0b[_0x256b7b(0x171)],'createdAt':serverTimestamp(),'createdBy':_0x5b9b0b[_0x256b7b(0x171)],'isTestMatch':!![],'ladder':_0x5f231a,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x256b7b(0x1fc)+_0x5b9b0b['email']};console['log'](_0x256b7b(0x168)),await addDoc(collection(db,_0x58c75e),_0x3617be),showNotification('Simple\x20test\x20match\x20created\x20successfully',_0x256b7b(0x1c3)),closeCreateTestMatchModal();}catch(_0x275353){console[_0x256b7b(0x248)]('Error\x20creating\x20simple\x20test\x20match:',_0x275353),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x275353[_0x256b7b(0x106)],'error');}}window['testFirebaseConnection']=async function(){const _0x44b394=a4_0x302a99;try{console['log'](_0x44b394(0x21f)),console['log']('Auth:',auth),console['log']('DB:',db),console['log'](_0x44b394(0x309),auth['currentUser']);const _0x3ce4ea=collection(db,'players');console[_0x44b394(0x1d9)]('Collection\x20reference\x20created:',_0x3ce4ea);const _0xa1f87f=query(_0x3ce4ea,where('username','==','nonexistent'));console[_0x44b394(0x1d9)]('Query\x20created:',_0xa1f87f);const _0x54fe8e=await getDocs(_0xa1f87f);console['log']('Query\x20executed.\x20Empty:',_0x54fe8e['empty']),console[_0x44b394(0x1d9)](_0x44b394(0x2a4));}catch(_0x5d88db){console['error'](_0x44b394(0x2bb),_0x5d88db);}};function setupCreateTestMatchButton(){const _0x8a44ce=a4_0x302a99,_0x3b1a6b=document['getElementById'](_0x8a44ce(0x124));if(!_0x3b1a6b){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x5453d4=_0x3b1a6b['cloneNode'](!![]);_0x3b1a6b[_0x8a44ce(0x2d5)]['replaceChild'](_0x5453d4,_0x3b1a6b),_0x5453d4[_0x8a44ce(0x283)]('click',function(_0x306a38){const _0x455348=_0x8a44ce;_0x306a38[_0x455348(0x302)](),_0x306a38['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x1ae107=0x1){const _0x436d4c=a4_0x302a99,_0x4ab3c7=document['getElementById']('matches-table-body');if(!_0x4ab3c7)return;_0x4ab3c7['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x2605cd=currentLadder['toLowerCase'](),_0x506a45=matchesPagination[_0x2605cd],_0x32706c=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x436d4c(0x263),_0x4e810f=collection(db,_0x32706c);_0x1ae107<=0x1?(_0x506a45['page']=0x1,_0x506a45[_0x436d4c(0x29d)]=null,_0x506a45['lastVisible']=null):_0x506a45['page']=_0x1ae107;const _0x2a8311=getMatchesFilters();let _0x448608=_0x4e810f;if(_0x2a8311['startDate']||_0x2a8311['endDate']||_0x2a8311[_0x436d4c(0xe2)]){let _0x2b63cb=[];_0x2a8311[_0x436d4c(0x143)]&&_0x2a8311[_0x436d4c(0xfd)]?(_0x2b63cb[_0x436d4c(0x1e2)](where('approvedAt','>=',_0x2a8311['startDate']),where('approvedAt','<=',_0x2a8311['endDate'])),_0x448608=query(_0x4e810f,..._0x2b63cb)):_0x448608=query(_0x4e810f,orderBy('approvedAt',_0x436d4c(0x2ea)));}else _0x448608=query(_0x4e810f,orderBy('approvedAt','desc'));_0x1ae107>0x1&&_0x506a45['lastVisible']?_0x448608=query(_0x448608,startAfter(_0x506a45['lastVisible']),limit(PAGE_SIZE)):_0x448608=query(_0x448608,limit(PAGE_SIZE));const _0x24d4d5=await getDocs(_0x448608);!_0x24d4d5['empty']&&(_0x506a45['firstVisible']=_0x24d4d5[_0x436d4c(0x269)][0x0],_0x506a45['lastVisible']=_0x24d4d5['docs'][_0x24d4d5['docs']['length']-0x1]);let _0x6c934f=![];if(!_0x24d4d5[_0x436d4c(0x160)]){const _0x190f60=query(_0x448608,startAfter(_0x506a45['lastVisible']),limit(0x1)),_0x851e40=await getDocs(_0x190f60);_0x6c934f=!_0x851e40[_0x436d4c(0x160)];}const _0x24ee79=document[_0x436d4c(0x118)](_0x436d4c(0x103)),_0x2d7777=document['getElementById']('matches-next-page'),_0xcb133a=document[_0x436d4c(0x118)]('matches-page-indicator');if(_0x24ee79)_0x24ee79['disabled']=_0x506a45['page']<=0x1;if(_0x2d7777)_0x2d7777['disabled']=!_0x6c934f;if(_0xcb133a)_0xcb133a[_0x436d4c(0x202)]=_0x436d4c(0x295)+_0x506a45[_0x436d4c(0x125)];if(_0x24d4d5['empty']){_0x4ab3c7['innerHTML']=_0x436d4c(0x288);return;}_0x4ab3c7[_0x436d4c(0x209)]='',_0x24d4d5['forEach'](_0x5f5cbc=>{const _0x5e2170=_0x436d4c,_0x2de44e=_0x5f5cbc['data'](),_0x8d3f5e=document[_0x5e2170(0x1a9)]('tr'),_0x5375e3=_0x2de44e['approvedAt']?new Date(_0x2de44e[_0x5e2170(0x30c)]['seconds']*0x3e8)[_0x5e2170(0x1a6)]():'N/A';_0x8d3f5e[_0x5e2170(0x105)](_0x5e2170(0x2bc),_0x5f5cbc['id']),_0x8d3f5e['setAttribute']('data-ladder',currentLadder),_0x8d3f5e['classList'][_0x5e2170(0x2c2)]('match-row'),_0x8d3f5e['innerHTML']=_0x5e2170(0x24b)+_0x5375e3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x2de44e[_0x5e2170(0x237)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x2de44e['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x2de44e[_0x5e2170(0x220)]||0x0)+'\x20-\x20'+(_0x2de44e['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x2de44e['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x5e2170(0x2f2)+_0x5f5cbc['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x5f5cbc['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4ab3c7['appendChild'](_0x8d3f5e);}),setupMatchesActionButtons(),_0x2a8311['searchTerm']&&filterMatchesTable(),console['log']('Loaded\x20'+_0x24d4d5['size']+_0x436d4c(0x164)+currentLadder+'\x20ladder,\x20page\x20'+_0x506a45[_0x436d4c(0x125)]);}catch(_0x436aa7){console['error']('Error\x20loading\x20matches:',_0x436aa7),_0x4ab3c7[_0x436d4c(0x209)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x436aa7['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x190cf6,_0xfc4130){const _0x1a7fcf=a4_0x302a99;try{console['log']('Deleting\x20match\x20'+_0x190cf6+_0x1a7fcf(0x2a8)+_0xfc4130+'\x20ladder');const _0x2fcd65=auth[_0x1a7fcf(0x148)];if(!_0x2fcd65){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x4c7e95=_0xfc4130==='D1'?'approvedMatches':_0xfc4130==='D2'?'approvedMatchesD2':_0x1a7fcf(0x263);console['log']('Using\x20collection:\x20'+_0x4c7e95),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x4c7e95,_0x190cf6)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x1fb8ac=_0xfc4130[_0x1a7fcf(0x27c)]();loadMatchesData(matchesPagination[_0x1fb8ac]['page']);}catch(_0x431431){console[_0x1a7fcf(0x248)]('Error\x20deleting\x20match:',_0x431431),showNotification(_0x1a7fcf(0x205)+_0x431431['message'],_0x1a7fcf(0x248));}}function a4_0x46aa(){const _0x35e442=['searchTerm','commit','Error\x20loading\x20match\x20data:','Error\x20applying\x20filters:','destroy','querySelector','Added\x20','length','.view-history-btn','Removed\x20','Unknown','exists','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','Match\x20not\x20found','elo-history','Error\x20loading\x20highlight:\x20','body','highlight-achievement-details','userId','article-image-url','playerId','Match\x20Highlight','Edit\x20match\x20clicked:','\x20ladder','Setting\x20up\x20Manage\x20Points\x20section','\x20to\x20','endDate','.error-state','set-elo-form','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20','Load\x20articles\x20data\x20clicked','author','matches-prev-page','Highlight\x20not\x20found','setAttribute','message','map','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','uid','highlight-video-id','Error\x20deleting\x20match:','ribbon-target-user','add-ribbon-form','N/A','amount','promotedBy','edit-highlight-matchDate-input','click','Error\x20initializing\x20admin\x20dashboard:','Points\x20updated\x20successfully\x20for\x20user:','points-overview-table-body','set','all','getElementById','Sidebar\x20navigation\x20initialized\x20with\x20permissions','activity','Highlight\x20updated\x20successfully!','highlight-type','non-participants','highlight-players-container','no-results-message','Error\x20setting\x20custom\x20ELO:','#cancel-create-test-match-btn','Error\x20loading\x20inactive\x20players:','videoId','create-test-match-btn','page','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','D2\x20Players','eloHistory','Error\x20loading\x20dashboard\x20data:','substring','reset-matches-filters','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','promote-form','Achievement','confirmResimulateMatch','removeEventListener','mapPlayed','roleAssignedAt','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','User\x20data\x20loaded:','dashboard','Trophy\x20not\x20found','userProfiles','manage-levels-ribbons','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','insertAdjacentElement','querySelectorAll','\x20users\x20to\x20check...','remove','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','value','common','Failed\x20to\x20load\x20trophy\x20data','startDate','afterend','ref','subtract','unknown','currentUser','type','assign-trophy-image','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','demotedBy','Error\x20deleting\x20highlight:\x20','input','article-content','ribbons','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','User\x20not\x20found','demotion','ribbon-item','toLocaleString','Error\x20adding\x20player:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','Loading\x20user\x20data...','displayName','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','Error\x20awarding\x20item:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20','cancel-article-btn','playerProfileUrl','Found\x20player\x20with\x20current\x20ELO:\x20','empty','mapName','20px','Could\x20not\x20find\x20player\x20documents','\x20matches\x20for\x20','Error\x20loading\x20ribbons:','No\x20email','newElo','Adding\x20simple\x20test\x20match...','No\x20position\x20changes\x20needed.','.type','has','matches-search','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','Error\x20deleting\x20highlight:','reduce','Error\x20loading\x20user\x20points\x20history:','email','getDay','appendChild','closest','entries','eloRating','warn','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','fa-exclamation-triangle','Failed\x20to\x20delete\x20trophy:\x20','Won','.empty-state','bind','playerRibbonsD3','data-section','reset-history-filters','quick-edit-display-name','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','matchInfo','manage-highlights','userAllowedTabs','edit-highlight-mapCreator-input','Promotion','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','\x20for\x20user\x20\x22','required','Setting\x20up\x20Manage\x20Ribbons\x20section','Error\x20saving\x20highlight:','newPoints','Match\x20ID\x20or\x20ladder\x20missing','create-achievement-highlight-btn','TestMap','player','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','Failed\x20to\x20load\x20article\x20data','Thursday','\x20section','Error\x20loading\x20articles:','none','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','trophies-table-body','name','src','set-role-modal','achievementDetails','find','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','loserName','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','data','\x20users...','non-participant','articles','toLocaleDateString','awardedAt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','createElement','winnerSuicides','Friday','</span>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','Cancel\x20button\x20not\x20found','Failed\x20to\x20load\x20user\x20data:\x20','Create\x20test\x20match\x20modal\x20not\x20found','Failed\x20to\x20send\x20Discord\x20notification:','Error\x20creating\x20rank\x20distribution\x20chart:','Error\x20loading\x20users:','active','userTrophies','manage-ranks','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>','.close','rejected-count','load-inactive-players-data','\x20ELO\x20history\x20entries.\x20','Admin\x20Adjustment','getAttribute','edit-highlight-winnerName-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>','empty-state','quick-edit-email','success','padding','achievementPlayer','No\x20user\x20ID\x20found\x20on\x20button','#ffffff','load-matches-data','playerRibbons','sources','edit-player-modal','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','Error\x20updating\x20player:','currentTarget','seconds','#C0C0C0','promote-ladder',';\x20color:\x20','cells','.edit-role-btn','edit-match-modal','user-role','ribbon-target-ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','log','promote-username','edit-highlight-map-input','edit-username','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','article-author','Error\x20opening\x20edit\x20modal:','Error\x20loading\x20match\x20for\x20deletion:','push','\x20Rank\x20Distribution','replaceChild','Error\x20saving\x20highlight:\x20','Trophy\x20Preview','edit-match-loser-score','update','fromDate','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','div','store-item-select','Role\x20select\x20set\x20to:\x20','Error\x20modifying\x20points:','match','daysSinceMatch','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','Article\x20deleted\x20successfully','match-count','highlight-submitted-by','highlights','playersD3','ELO\x20rating\x20for\x20','edit-highlight-winnerScore-input','highlight-video-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20','opacity','Simple\x20test\x20match\x20created\x20by\x20admin\x20','points-amount','rankDistribution','Featured\x20Creator','Saturday','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','textContent','wins','Modal\x20opened\x20successfully','Failed\x20to\x20delete\x20match:\x20','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','get','Article\x20not\x20found','innerHTML','loading','Untitled\x20Trophy','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22','onAuthStateChanged','article-modal','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','demote-username','eloHistoryD2','Username\x20','highlight-map-container','dataset','role','forEach','edit-highlight-creatorImageUrl-input','.nav-item','Setting\x20permissions\x20based\x20on\x20role:\x20','rgba(255,\x20193,\x207,\x200.1)','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','Emerald','W\x20/\x20','Testing\x20Firebase\x20connection...','winnerScore','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Subtracted\x20','style','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','rgba(25,\x20118,\x20210,\x200.7)','catch','winnerName','#808080','return\x20(function()\x20','article-id','info','\x20vs\x20','admin','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','edit-highlight-matchLink-input','disabled','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','display','test','Bronze','points','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','winnerUsername','manage-points','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Form\x20elements\x20are\x20missing','user-search','Silver','.quick-edit-btn','Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!','Unknown\x20Player','delete-match-confirm-modal','players','Player\x20\x22','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','No\x20users\x20found\x20in\x20userProfiles\x20collection','exception','cancel-edit-btn','Modal\x20cancel\x20button\x20clicked','error','timestamp','ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','title','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','sort','split','cancel-role-btn','\x20\x20','then','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','.remove-role-btn','confirm-resimulate-btn','Map\x20Creator\x20is\x20required','className','previousElo','Quick\x20edit\x20clicked\x20for\x20user:','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','Error\x20searching\x20user:','demote-modal','inactive-players','edit-losses','pointsHistory','contains','reset','approvedMatchesD3','.delete-match-btn','Error\x20loading\x20highlights:','flex','highlight-achievement-details-container','User\x20Profiles','docs','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','edit-highlight-matchInfo-input','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20','Points\x20modified\x20successfully','\x20in\x20','imageUrl','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','edit-highlight-achievementPlayer-input','Role\x20removed','\x20ladder!','resimulation','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','points-user-search','backgroundColor','rgba(255,\x20255,\x20255,\x200.1)','playersD2','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','createdAt','toLowerCase','manage-ribbons','result','#50C878','console','doughnut','submit','addEventListener','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','highlight-modal','target','promote-player-btn','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','users-table-body','Switched\x20to\x20','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','allUsersPoints','current-ladder-display','\x20users\x20already\x20had\x20points.','trophy-preview-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Unknown\x20User','-next-page','Error\x20resimulating\x20match:','trophy-description','Page\x20','Unauthorized:\x20Admin\x20access\x20required','Searching\x20for\x20player\x20in\x20','highlight-map-creator','apply','username','loss','.view-player-btn','firstVisible','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','size','user-search-results','modifiedBy','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','lastVisible','Firebase\x20connection\x20test\x20successful!','#CD7F32','Article\x20updated\x20successfully','__proto__','\x20from\x20','Trophy\x20definition\x20deleted\x20successfully','stopPropagation','roleName','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','elo-history-table-body','matchLink','rarity','roleColor','\x20Missing','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','getRankName','No\x20description','elo','\x22\x20awarded\x20to\x20','Page\x201','trophyDefinitions','includes','Please\x20enter\x20a\x20username','Firebase\x20connection\x20test\x20failed:','data-id','loserUsername','Never\x20played','Found\x20','trim','Invalid\x20action','add','manage-players','highlight-achievement-image','Error','pending-count','#article-modal\x20.close-btn','creator','save-player-btn','matches-start-date','demoLink','checked','#elo-history-table-body\x20tr','assign-trophy-rarity','demote-form','View\x20history\x20clicked\x20for\x20user:','lastUpdated','Error:\x20','Error\x20loading\x20highlight:','Failed\x20to\x20assign\x20trophy:\x20','parentNode','loading-cell','manage-matches','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','achievement','role-username','promotion','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','No\x20reason\x20provided','edit-match-loser-suicides','edit-match-loser-comment','toDate','points-sort-order','history-end-date','Error\x20opening\x20quick\x20edit\x20modal:','level','loserScore','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','Points\x20updated\x20successfully','resimulate-match-id','\x20not\x20found.','desc','Loser\x20','matchId','lastMatch','visible','YouTube\x20Video\x20ID\x20(Optional)','.edit-highlight-btn','block','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','position','\x20<span\x20class=\x22user-source\x22>(','achievementImageUrl','Trophy\x20ID\x20and\x20username\x20are\x20required','admin_modification','<span\x20class=\x22no-role\x22>None</span>','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','Error\x20loading\x20players:','edit-match-winner-comment','classList','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','creatorImageUrl','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','ribbon-user-search','migration-section','preventDefault','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','lastPointsModified','create-test-match-modal','matchDate','Profile','promote-modal','Current\x20user:','.no-results','loserComment','approvedAt','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','change','approvedMatchesD2','\x20already\x20exists\x20in\x20','#inactive-players-table-body\x20tr'];a4_0x46aa=function(){return _0x35e442;};return a4_0x46aa();}function setupMatchesActionButtons(){const _0x1cf85f=a4_0x302a99;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')[_0x1cf85f(0x217)](_0x151aad=>{_0x151aad['addEventListener']('click',_0x3efb9d=>{const _0x374f51=a4_0x4904;_0x3efb9d['preventDefault'](),_0x3efb9d['stopPropagation']();const _0x4c3f3b=_0x3efb9d[_0x374f51(0x1ce)]['dataset']['id'],_0x4fbe3c=_0x3efb9d['currentTarget']['closest']('tr'),_0x13b3f3=_0x4fbe3c[_0x374f51(0x215)]['ladder'];console['log'](_0x374f51(0xf9),_0x4c3f3b,_0x13b3f3),openEditMatchModal(_0x4c3f3b,_0x13b3f3);});}),document['querySelectorAll'](_0x1cf85f(0x264))['forEach'](_0x52286c=>{const _0x38ac26=_0x1cf85f;_0x52286c[_0x38ac26(0x283)]('click',_0x5c1a71=>{const _0x347a63=_0x38ac26;_0x5c1a71['preventDefault'](),_0x5c1a71['stopPropagation']();const _0x24c63e=_0x5c1a71[_0x347a63(0x1ce)]['dataset']['id'],_0x40d350=_0x5c1a71['currentTarget'][_0x347a63(0x174)]('tr'),_0x40c341=_0x40d350[_0x347a63(0x215)][_0x347a63(0x24a)]||currentLadder;console[_0x347a63(0x1d9)]('Delete\x20match\x20clicked:',_0x24c63e,_0x40c341),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x24c63e,_0x40c341);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x19a647=a4_0x302a99,_0x5173af=document[_0x19a647(0x118)]('matches-search')[_0x19a647(0x140)]['toLowerCase'](),_0x1a4b56=document['querySelectorAll']('#matches-table-body\x20tr');let _0x5e8497=0x0;_0x1a4b56['forEach'](_0x2735e4=>{const _0x5c0712=_0x19a647;if(_0x2735e4[_0x5c0712(0x2fc)]['contains']('loading-cell')||_0x2735e4['classList']['contains']('empty-state')||_0x2735e4[_0x5c0712(0x2fc)]['contains']('error-state'))return;const _0x157030=_0x2735e4['cells'][0x1]['textContent']['toLowerCase'](),_0x7fb6e2=_0x2735e4[_0x5c0712(0x1d3)][0x2][_0x5c0712(0x202)]['toLowerCase'](),_0x269f42=_0x2735e4['cells'][0x4]['textContent']['toLowerCase']();_0x157030[_0x5c0712(0x2b9)](_0x5173af)||_0x7fb6e2['includes'](_0x5173af)||_0x269f42['includes'](_0x5173af)?(_0x2735e4['style']['display']='',_0x5e8497++):_0x2735e4[_0x5c0712(0x223)]['display']='none';});if(_0x5e8497===0x0&&_0x1a4b56[_0x19a647(0xe9)]>0x0){const _0x52cde6=document['getElementById']('matches-table-body'),_0x533987=_0x52cde6[_0x19a647(0xe7)]('.no-results');if(!_0x533987){const _0x485d0f=document['createElement']('tr');_0x485d0f['className']='no-results',_0x485d0f['innerHTML']=_0x19a647(0x134)+_0x5173af+'\x27</td>',_0x52cde6['appendChild'](_0x485d0f);}}else{const _0x114c0a=document['querySelector']('.no-results');_0x114c0a&&_0x114c0a['remove']();}}function getMatchesFilters(){const _0x244b07=a4_0x302a99,_0x501c2c=document[_0x244b07(0x118)]('matches-search')['value']['toLowerCase'](),_0x30e08a=document['getElementById']('matches-start-date')['value'],_0x16b4aa=document['getElementById']('matches-end-date')[_0x244b07(0x140)];let _0x2b1976=null,_0x4112f4=null;return _0x30e08a&&(_0x2b1976=new Date(_0x30e08a),_0x2b1976['setHours'](0x0,0x0,0x0,0x0),_0x2b1976=Timestamp['fromDate'](_0x2b1976)),_0x16b4aa&&(_0x4112f4=new Date(_0x16b4aa),_0x4112f4['setHours'](0x17,0x3b,0x3b,0x3e7),_0x4112f4=Timestamp[_0x244b07(0x1e9)](_0x4112f4)),{'searchTerm':_0x501c2c,'startDate':_0x2b1976,'endDate':_0x4112f4};}async function applyMatchesFilters(){const _0x4bbec1=currentLadder['toLowerCase']();matchesPagination[_0x4bbec1]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x48081b=a4_0x302a99;document[_0x48081b(0x118)](_0x48081b(0x2ca))['value']='',document['getElementById']('matches-end-date')['value']='',document[_0x48081b(0x118)](_0x48081b(0x16c))['value']='';const _0x242166=currentLadder['toLowerCase']();matchesPagination[_0x242166]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x2c96ff,_0x202099){const _0xe6efba=a4_0x302a99,_0x3c05bd=document[_0xe6efba(0x118)](_0xe6efba(0x1d5));if(!_0x3c05bd)return;try{const _0xf9ea15=_0x202099==='D1'?'approvedMatches':_0x202099==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x25d310=doc(db,_0xf9ea15,_0x2c96ff),_0x6ce394=await getDoc(_0x25d310);if(!_0x6ce394['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x513af1=_0x6ce394['data']();document['getElementById']('edit-match-id')['value']=_0x2c96ff,document['getElementById']('edit-match-ladder')['value']=_0x202099,document[_0xe6efba(0x118)]('edit-match-winner')[_0xe6efba(0x140)]=_0x513af1['winnerUsername']||'',document['getElementById']('edit-match-winner-score')[_0xe6efba(0x140)]=_0x513af1['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')[_0xe6efba(0x140)]=_0x513af1[_0xe6efba(0x1aa)]||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x513af1['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x513af1['loserUsername']||'',document[_0xe6efba(0x118)](_0xe6efba(0x1e7))[_0xe6efba(0x140)]=_0x513af1['loserScore']||0x0,document['getElementById'](_0xe6efba(0x2de))['value']=_0x513af1['loserSuicides']||0x0,document['getElementById'](_0xe6efba(0x2df))['value']=_0x513af1[_0xe6efba(0x30b)]||'',document['getElementById']('edit-match-map')['value']=_0x513af1['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')['value']=_0x513af1['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')[_0xe6efba(0x140)]=_0x513af1['loserDemoLink']||_0x513af1[_0xe6efba(0x2cb)]||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x513af1['winnerUsername']+_0xe6efba(0x22c)+_0x513af1['loserUsername'],_0x3c05bd[_0xe6efba(0x2fc)]['add']('active');}catch(_0x42e208){console['error'](_0xe6efba(0xe4),_0x42e208),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x484a7f=a4_0x302a99,_0x580c2a=document['getElementById'](_0x484a7f(0x1d5));_0x580c2a&&_0x580c2a['classList']['remove'](_0x484a7f(0x1b4));}async function saveEditedMatch(){const _0xfcb1f8=a4_0x302a99;try{const _0x3f5063=document['getElementById']('edit-match-id')['value'],_0x3d499a=document['getElementById']('edit-match-ladder')['value'];if(!_0x3f5063||!_0x3d499a){showNotification(_0xfcb1f8(0x18e),'error');return;}const _0x31ef70=_0x3d499a==='D1'?'approvedMatches':_0x3d499a==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3aaf63=document['getElementById']('edit-match-winner')['value']['trim'](),_0x2d6e74=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x4b4041=parseInt(document['getElementById']('edit-match-winner-suicides')[_0xfcb1f8(0x140)]),_0x5312cc=document[_0xfcb1f8(0x118)](_0xfcb1f8(0x2fb))['value'][_0xfcb1f8(0x2c0)](),_0x2c3ea1=document['getElementById']('edit-match-loser')['value'][_0xfcb1f8(0x2c0)](),_0x8087e2=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x111361=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x48900b=document['getElementById']('edit-match-loser-comment')['value'][_0xfcb1f8(0x2c0)](),_0xe1348b=document['getElementById']('edit-match-map')['value']['trim'](),_0x8e783a=document['getElementById']('edit-match-winner-demo')[_0xfcb1f8(0x140)]['trim'](),_0x160b07=document['getElementById']('edit-match-loser-demo')[_0xfcb1f8(0x140)]['trim']();if(!_0x3aaf63||!_0x2c3ea1){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required',_0xfcb1f8(0x248));return;}await updateDoc(doc(db,_0x31ef70,_0x3f5063),{'winnerUsername':_0x3aaf63,'winnerScore':_0x2d6e74,'winnerSuicides':_0x4b4041,'winnerComment':_0x5312cc,'loserUsername':_0x2c3ea1,'loserScore':_0x8087e2,'loserSuicides':_0x111361,'loserComment':_0x48900b,'mapPlayed':_0xe1348b,'winnerDemoLink':_0x8e783a||null,'loserDemoLink':_0x160b07||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x3d499a['toLowerCase']()]['page']);}catch(_0x5a7dbe){console['error']('Error\x20saving\x20match:',_0x5a7dbe),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x5a7dbe['message'],'error');}}async function openDeleteMatchModal(_0x5a289f,_0x1a38d2){const _0x5a15c9=a4_0x302a99;try{const _0x524528=_0x1a38d2==='D1'?'approvedMatches':_0x1a38d2==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0xb5e03c=doc(db,_0x524528,_0x5a289f),_0x27f0e3=await getDoc(_0xb5e03c);if(!_0x27f0e3['exists']()){showNotification(_0x5a15c9(0xf0),'error');return;}const _0x1e0cda=_0x27f0e3[_0x5a15c9(0x1a2)](),_0x55932c=document[_0x5a15c9(0x118)](_0x5a15c9(0x240));_0x55932c['dataset'][_0x5a15c9(0x2ec)]=_0x5a289f,_0x55932c['dataset']['ladder']=_0x1a38d2;const _0xc46159=_0x1e0cda[_0x5a15c9(0x30c)]?new Date(_0x1e0cda[_0x5a15c9(0x30c)]['seconds']*0x3e8)['toLocaleDateString']():_0x5a15c9(0x10e),_0x2cddc1=document['getElementById']('delete-match-summary');_0x2cddc1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0xc46159+_0x5a15c9(0x284)+_0x1e0cda[_0x5a15c9(0x237)]+'\x20(winner)\x20vs\x20'+_0x1e0cda['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x1e0cda['winnerScore']||0x0)+'\x20-\x20'+(_0x1e0cda['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x1e0cda['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x1a38d2+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x55932c[_0x5a15c9(0x2fc)]['add'](_0x5a15c9(0x1b4));}catch(_0x8efe35){console['error'](_0x5a15c9(0x1e1),_0x8efe35),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x442f27=a4_0x302a99,_0x453bc3=document['getElementById'](_0x442f27(0x240));_0x453bc3&&(_0x453bc3['classList'][_0x442f27(0x13e)]('active'),_0x453bc3['removeAttribute']('data-match-id'),_0x453bc3['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x30bca7=a4_0x302a99,_0x3342d2=document['getElementById']('delete-match-confirm-modal'),_0x2f84c7=_0x3342d2['dataset']['matchId'],_0x104bcf=_0x3342d2['dataset']['ladder'];if(!_0x2f84c7||!_0x104bcf){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x30bca7(0x248)),closeDeleteMatchModal();return;}try{const _0xdbc352=_0x104bcf==='D1'?'approvedMatches':_0x104bcf==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0xdbc352,_0x2f84c7)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x104bcf['toLowerCase']()]['page']);}catch(_0x3a0e13){console['error'](_0x30bca7(0x10b),_0x3a0e13),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x3a0e13['message'],_0x30bca7(0x248));}}async function saveHighlightChanges(){const _0x451bc7=a4_0x302a99,_0x2c1659=document[_0x451bc7(0x118)]('edit-highlight-id')['value'],_0x670622=document['getElementById']('edit-highlight-type-select')['value'];let _0x3cc1fa={'title':document['getElementById']('edit-highlight-title-input')['value'][_0x451bc7(0x2c0)](),'type':_0x670622,'description':document['getElementById']('edit-highlight-description-input')['value']['trim'](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth['currentUser'][_0x451bc7(0x171)]};if(_0x670622==='match'){_0x3cc1fa['matchInfo']=document[_0x451bc7(0x118)](_0x451bc7(0x26b))[_0x451bc7(0x140)]['trim'](),_0x3cc1fa[_0x451bc7(0x107)]=document['getElementById'](_0x451bc7(0x1db))[_0x451bc7(0x140)][_0x451bc7(0x2c0)]();const _0x1a9b18=document['getElementById'](_0x451bc7(0x111))['value'];_0x3cc1fa['matchDate']=_0x1a9b18?Timestamp['fromDate'](new Date(_0x1a9b18)):null,_0x3cc1fa['winnerName']=document['getElementById'](_0x451bc7(0x1bf))['value']['trim'](),_0x3cc1fa[_0x451bc7(0x220)]=document['getElementById'](_0x451bc7(0x1f8))[_0x451bc7(0x140)]['trim'](),_0x3cc1fa[_0x451bc7(0x1a0)]=document['getElementById']('edit-highlight-loserName-input')['value'][_0x451bc7(0x2c0)](),_0x3cc1fa[_0x451bc7(0x2e5)]=document['getElementById']('edit-highlight-loserScore-input')[_0x451bc7(0x140)][_0x451bc7(0x2c0)](),_0x3cc1fa['matchLink']=document[_0x451bc7(0x118)](_0x451bc7(0x22f))[_0x451bc7(0x140)][_0x451bc7(0x2c0)](),_0x3cc1fa['mapCreator']=null,_0x3cc1fa['mapVersion']=null,_0x3cc1fa[_0x451bc7(0x2fe)]=null,_0x3cc1fa['achievementPlayer']=null,_0x3cc1fa['achievementType']=null,_0x3cc1fa['achievementDetails']=null,_0x3cc1fa['playerProfileUrl']=null;}else{if(_0x670622==='creator')_0x3cc1fa[_0x451bc7(0x107)]=document['getElementById']('edit-highlight-map-input')['value'][_0x451bc7(0x2c0)](),_0x3cc1fa['mapCreator']=document[_0x451bc7(0x118)](_0x451bc7(0x186))['value']['trim'](),_0x3cc1fa['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value'][_0x451bc7(0x2c0)](),_0x3cc1fa['creatorImageUrl']=document[_0x451bc7(0x118)](_0x451bc7(0x218))['value']['trim'](),_0x3cc1fa['matchInfo']=null,_0x3cc1fa['matchDate']=null,_0x3cc1fa['winnerName']=null,_0x3cc1fa['winnerScore']=null,_0x3cc1fa['loserName']=null,_0x3cc1fa['loserScore']=null,_0x3cc1fa[_0x451bc7(0x2ae)]=null,_0x3cc1fa['achievementPlayer']=null,_0x3cc1fa['achievementType']=null,_0x3cc1fa['achievementDetails']=null,_0x3cc1fa['playerProfileUrl']=null;else _0x670622==='achievement'&&(_0x3cc1fa['achievementPlayer']=document['getElementById'](_0x451bc7(0x271))['value']['trim'](),_0x3cc1fa['achievementType']=document[_0x451bc7(0x118)]('edit-highlight-achievementType-input')['value'][_0x451bc7(0x2c0)](),_0x3cc1fa[_0x451bc7(0x19d)]=document[_0x451bc7(0x118)]('edit-highlight-achievementDetails-input')['value'][_0x451bc7(0x2c0)](),_0x3cc1fa['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x3cc1fa[_0x451bc7(0x183)]=null,_0x3cc1fa['map']=null,_0x3cc1fa[_0x451bc7(0x306)]=null,_0x3cc1fa['winnerName']=null,_0x3cc1fa['winnerScore']=null,_0x3cc1fa['loserName']=null,_0x3cc1fa[_0x451bc7(0x2e5)]=null,_0x3cc1fa['matchLink']=null,_0x3cc1fa['mapCreator']=null,_0x3cc1fa['mapVersion']=null,_0x3cc1fa[_0x451bc7(0x2fe)]=null);}try{if(_0x2c1659){_0x3cc1fa['updatedAt']=serverTimestamp();const _0x29f99a=doc(db,'highlights',_0x2c1659);await updateDoc(_0x29f99a,_0x3cc1fa),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x3cc1fa['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x3cc1fa),showNotification('Highlight\x20added\x20successfully!',_0x451bc7(0x1c3));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x2fa3f9){console[_0x451bc7(0x248)]('Error\x20saving\x20highlight:',_0x2fa3f9),showNotification('Error\x20saving\x20highlight:\x20'+_0x2fa3f9[_0x451bc7(0x106)],'error');}}async function resimulateMatch(){const _0x24cdbe=a4_0x302a99;try{const _0x4c9840=document['getElementById'](_0x24cdbe(0x2e8))[_0x24cdbe(0x140)];if(!_0x4c9840){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x42f2a5=auth['currentUser'];if(!_0x42f2a5){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x46c02d=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x24cdbe(0x30f):'approvedMatchesD3',_0x114873=doc(db,_0x46c02d,_0x4c9840),_0x21e2b5=await getDoc(_0x114873);if(!_0x21e2b5['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x24cdbe(0x248));return;}const _0x2c7e04=_0x21e2b5['data'](),_0x5448c8=_0x2c7e04['approvedAt']?_0x2c7e04['approvedAt']['toDate']()['toLocaleString']():_0x2c7e04[_0x24cdbe(0x306)]?_0x2c7e04[_0x24cdbe(0x306)]['toDate']?_0x2c7e04['matchDate'][_0x24cdbe(0x2e0)]()['toLocaleString']():new Date(_0x2c7e04['matchDate'])['toLocaleString']():_0x24cdbe(0xec),_0x5814df='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x2c7e04['winnerUsername']+_0x24cdbe(0x100)+_0x2c7e04['loserUsername']+_0x24cdbe(0xee)+_0x2c7e04[_0x24cdbe(0x220)]+'-'+_0x2c7e04['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x2c7e04['mapPlayed']||_0x2c7e04[_0x24cdbe(0x161)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x5448c8+_0x24cdbe(0x157)+_0x4c9840+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x24cdbe(0x118)]('match-details-container')['innerHTML']=_0x5814df,document[_0x24cdbe(0x118)]('match-details-container')['style']['display']='block',document['getElementById']('confirm-resimulate-btn')[_0x24cdbe(0x223)]['display']='block',window['pendingResimulateData']={'matchId':_0x4c9840,'matchData':_0x2c7e04,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation',_0x24cdbe(0x22b));}catch(_0x3dc6b5){console['error']('Error\x20finding\x20match:',_0x3dc6b5),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x3dc6b5['message'],_0x24cdbe(0x248));}}async function confirmResimulateMatch(){const _0xd91599=a4_0x302a99;try{const {matchId:_0x75577f,matchData:_0x397890,ladder:_0x45f33c}=window['pendingResimulateData'];if(!_0x75577f||!_0x397890){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0xd91599(0x248));return;}const _0x13503e=_0x45f33c==='D1'?'players':_0x45f33c==='D2'?'playersD2':'playersD3',_0x1d4baf=_0x45f33c==='D1'?_0xd91599(0x128):_0x45f33c==='D2'?_0xd91599(0x212):'eloHistoryD3',[_0x35e8df,_0x1a5c34]=await Promise[_0xd91599(0x117)]([getDocs(query(collection(db,_0x13503e),where(_0xd91599(0x29a),'==',_0x397890[_0xd91599(0x237)]))),getDocs(query(collection(db,_0x13503e),where('username','==',_0x397890['loserUsername'])))]);if(_0x35e8df['empty']||_0x1a5c34['empty']){showNotification(_0xd91599(0x163),_0xd91599(0x248));return;}const _0x4e38b9=_0x35e8df['docs'][0x0]['id'],_0x5b2f96=_0x1a5c34['docs'][0x0]['id'],_0x317647=_0x35e8df['docs'][0x0]['data'](),_0x403428=_0x1a5c34['docs'][0x0][_0xd91599(0x1a2)](),[_0x5358eb,_0x339b29]=await Promise['all']([getDocs(query(collection(db,_0x1d4baf),where('playerId','==',_0x4e38b9),where('matchId','==',_0x75577f))),getDocs(query(collection(db,_0x1d4baf),where(_0xd91599(0xf7),'==',_0x5b2f96),where(_0xd91599(0x2ec),'==',_0x75577f)))]),_0x2dc0b5=!_0x5358eb['empty'],_0x1ab3ed=!_0x339b29['empty'],_0x2bb74c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x2dc0b5?'\x20Exists':_0xd91599(0x2b1))+_0xd91599(0x224)+(_0x1ab3ed?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x317647['eloRating']||_0xd91599(0xec))+_0xd91599(0x1ad)+(_0x403428['eloRating']||_0xd91599(0xec))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x317647[_0xd91599(0x2f3)]||_0xd91599(0xec))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x403428['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')[_0xd91599(0x209)]=_0x2bb74c,document['getElementById']('validation-results-container')['style']['display']='block';if(_0x2dc0b5&&_0x1ab3ed){showNotification(_0xd91599(0x2f9),'warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x3d11a8=_0x397890['approvedAt']||_0x397890['matchDate']||serverTimestamp(),[_0x3e2c93,_0x5dff90]=await Promise['all']([getPlayerEloAtTime(_0x4e38b9,_0x3d11a8,_0x1d4baf),getPlayerEloAtTime(_0x5b2f96,_0x3d11a8,_0x1d4baf)]),{calculateElo:_0x1bb117}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x3fa1c0,newLoserRating:_0x511288}=_0x1bb117(_0x3e2c93,_0x5dff90),_0x455510=_0x317647['position']||Number['MAX_SAFE_INTEGER'],_0x10b0f5=_0x403428['position']||Number['MAX_SAFE_INTEGER'];let _0x3da1d3=_0x455510,_0x196151=_0x10b0f5;_0x455510>_0x10b0f5&&(_0x3da1d3=_0x10b0f5,_0x196151=_0x10b0f5+0x1);const _0x5efca7=writeBatch(db),_0x3f71e7=doc(db,_0x13503e,_0x4e38b9);_0x5efca7[_0xd91599(0x1e8)](_0x3f71e7,{'eloRating':_0x3fa1c0,'position':_0x3da1d3,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x593c40=doc(db,_0x13503e,_0x5b2f96);_0x5efca7[_0xd91599(0x1e8)](_0x593c40,{'eloRating':_0x511288,'position':_0x196151,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x455510>_0x10b0f5){const _0x3957fb=await getDocs(query(collection(db,_0x13503e),where('position','>',_0x10b0f5),where(_0xd91599(0x2f3),'<',_0x455510)));_0x3957fb[_0xd91599(0x217)](_0x3c1f11=>{const _0x51291c=_0xd91599,_0x254ef5=doc(db,_0x13503e,_0x3c1f11['id']),_0x5278d4=_0x3c1f11[_0x51291c(0x1a2)]()[_0x51291c(0x2f3)];_0x5efca7['update'](_0x254ef5,{'position':_0x5278d4+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x51291c(0x274),'positionAdjustedAt':serverTimestamp()});});}if(!_0x2dc0b5){const _0x3c46f5=doc(collection(db,_0x1d4baf));_0x5efca7[_0xd91599(0x116)](_0x3c46f5,{'playerId':_0x4e38b9,'player':_0x397890['winnerUsername'],'previousElo':_0x3e2c93,'newElo':_0x3fa1c0,'eloChange':_0x3fa1c0-_0x3e2c93,'opponentId':_0x5b2f96,'opponent':_0x397890['loserUsername'],'matchResult':'win','previousPosition':_0x455510,'newPosition':_0x3da1d3,'positionChange':_0x3da1d3-_0x455510,'matchId':_0x75577f,'timestamp':_0x3d11a8,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x45f33c,'matchScore':_0x397890['winnerScore']+'-'+_0x397890['loserScore'],'mapPlayed':_0x397890[_0xd91599(0x131)]||_0x397890['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x1ab3ed){const _0x5de20b=doc(collection(db,_0x1d4baf));_0x5efca7['set'](_0x5de20b,{'playerId':_0x5b2f96,'player':_0x397890['loserUsername'],'previousElo':_0x5dff90,'newElo':_0x511288,'eloChange':_0x511288-_0x5dff90,'opponentId':_0x4e38b9,'opponent':_0x397890[_0xd91599(0x237)],'matchResult':_0xd91599(0x29b),'previousPosition':_0x10b0f5,'newPosition':_0x196151,'positionChange':_0x196151-_0x10b0f5,'matchId':_0x75577f,'timestamp':_0x3d11a8,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0xd91599(0x109)],'gameMode':_0x45f33c,'matchScore':_0x397890['winnerScore']+'-'+_0x397890[_0xd91599(0x2e5)],'mapPlayed':_0x397890['mapPlayed']||_0x397890[_0xd91599(0x161)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x3269e1=_0x45f33c==='D1'?'approvedMatches':_0x45f33c==='D2'?'approvedMatchesD2':_0xd91599(0x263),_0x11e0ed=doc(db,_0x3269e1,_0x75577f);_0x5efca7['update'](_0x11e0ed,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xd91599(0x148)]['uid'],'resimulatedReason':_0xd91599(0x210),'originalWinnerElo':_0x317647[_0xd91599(0x176)],'originalLoserElo':_0x403428['eloRating'],'originalWinnerPosition':_0x455510,'originalLoserPosition':_0x10b0f5,'resimulatedWinnerElo':_0x3fa1c0,'resimulatedLoserElo':_0x511288,'resimulatedWinnerPosition':_0x3da1d3,'resimulatedLoserPosition':_0x196151}),await _0x5efca7[_0xd91599(0xe3)]();const _0x1d5df6=(!_0x2dc0b5?0x1:0x0)+(!_0x1ab3ed?0x1:0x0),_0x5e5f2d=_0x455510!==_0x3da1d3||_0x10b0f5!==_0x196151;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x1d5df6+_0xd91599(0x1bc))+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x3e2c93+''+_0x3fa1c0+'\x20(+'+(_0x3fa1c0-_0x3e2c93)+'),\x20')+(_0xd91599(0x2eb)+_0x5dff90+''+_0x511288+'\x20('+(_0x511288-_0x5dff90)+').\x20')+(''+(_0x5e5f2d?'Positions\x20updated:\x20Winner\x20'+_0x455510+''+_0x3da1d3+',\x20Loser\x20'+_0x10b0f5+''+_0x196151:_0xd91599(0x169))),_0xd91599(0x1c3)),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0xb84bb7){console[_0xd91599(0x248)](_0xd91599(0x293),_0xb84bb7),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0xb84bb7['message'],'error');}}async function getPlayerEloAtTime(_0x32fa45,_0x2bb074,_0x4efccf){const _0x23cc5d=a4_0x302a99;try{const _0x247fde=_0x2bb074['toDate']?_0x2bb074['toDate']():new Date(_0x2bb074),_0xaab1a4=query(collection(db,_0x4efccf),where('playerId','==',_0x32fa45),where('timestamp','<',_0x2bb074),orderBy('timestamp',_0x23cc5d(0x2ea)),limit(0x1)),_0x359b9a=await getDocs(_0xaab1a4);if(!_0x359b9a['empty']){const _0x5bd22d=_0x359b9a['docs'][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x32fa45+'\x20before\x20match:\x20'+_0x5bd22d['newElo']),_0x5bd22d[_0x23cc5d(0x167)];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x32fa45+_0x23cc5d(0x126)),0x4b0;}catch(_0x42df4a){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x32fa45+':',_0x42df4a),0x4b0;}}function openResimulateModal(){const _0x466e31=a4_0x302a99;console['log']('openResimulateModal\x20called!');const _0x1db015=document['getElementById']('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x1db015);if(!_0x1db015){console['error']('Modal\x20element\x20not\x20found!');return;}_0x1db015['style']['display']='block',_0x1db015['style']['visibility']='visible',_0x1db015['style'][_0x466e31(0x1fb)]='1',_0x1db015[_0x466e31(0x2fc)]['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x1db015)['display']);const _0x28d5f3=document['getElementById']('match-details-container'),_0xfd8089=document['getElementById']('validation-results-container'),_0x3130c5=document['getElementById'](_0x466e31(0x256)),_0x1fef04=document['getElementById']('resimulate-match-id');if(_0x28d5f3)_0x28d5f3[_0x466e31(0x209)]='';if(_0xfd8089)_0xfd8089['innerHTML']='';if(_0x3130c5)_0x3130c5['style'][_0x466e31(0x232)]='none';if(_0x1fef04)_0x1fef04[_0x466e31(0x140)]='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x1b8044=a4_0x302a99;document['getElementById']('resimulate-modal')[_0x1b8044(0x223)]['display']=_0x1b8044(0x197),window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window[a4_0x302a99(0x12f)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x4ad03f=a4_0x302a99;console[_0x4ad03f(0x1d9)]('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x846c97){console['error']('Error\x20loading\x20points\x20data:',_0x846c97),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x846c97['message'],'error');}}function renderPointsOverview(_0x56c2f9){const _0x12dd4c=document['getElementById']('points-overview-table-body');if(!_0x12dd4c)return;if(_0x56c2f9['length']===0x0){_0x12dd4c['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x12dd4c['innerHTML']='',_0x56c2f9['forEach'](_0x26e455=>{const _0x2512ff=a4_0x4904,_0x51a1a2=document['createElement']('tr'),_0x2b1c6f=_0x26e455['displayName']||_0x26e455[_0x2512ff(0x29a)]||'Unknown\x20User',_0x2aecd2=_0x26e455[_0x2512ff(0x171)]||_0x2512ff(0x166),_0x59c02a=_0x26e455['points']||0x0,_0xd51479=_0x26e455[_0x2512ff(0x304)]?new Date(_0x26e455['lastPointsModified'][_0x2512ff(0x1cf)]*0x3e8)['toLocaleDateString']():'Never';_0x51a1a2['innerHTML']=_0x2512ff(0x1c0)+_0x2b1c6f+_0x2512ff(0x29e)+_0x2aecd2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x59c02a>0x3e8?'high-points':_0x59c02a>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x59c02a['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xd51479+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x26e455['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x26e455['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x12dd4c[_0x2512ff(0x173)](_0x51a1a2);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x294a08=a4_0x302a99;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x2b7b70=document[_0x294a08(0x13c)](_0x294a08(0x23d));console[_0x294a08(0x1d9)]('Found\x20'+_0x2b7b70['length']+'\x20quick\x20edit\x20buttons'),_0x2b7b70['forEach'](_0x45023c=>{const _0x23118c=_0x294a08,_0x3af2a1=_0x45023c['cloneNode'](!![]);_0x45023c['parentNode'][_0x23118c(0x1e4)](_0x3af2a1,_0x45023c);});const _0x360972=document['querySelectorAll']('.view-history-btn');console[_0x294a08(0x1d9)](_0x294a08(0x2bf)+_0x360972[_0x294a08(0xe9)]+'\x20view\x20history\x20buttons'),_0x360972[_0x294a08(0x217)](_0x50cb73=>{const _0x574fcd=_0x294a08,_0x4c5cea=_0x50cb73['cloneNode'](!![]);_0x50cb73[_0x574fcd(0x2d5)]['replaceChild'](_0x4c5cea,_0x50cb73);}),document[_0x294a08(0x13c)]('.quick-edit-btn')['forEach'](_0x4077f3=>{_0x4077f3['addEventListener']('click',function(_0x38427c){const _0x5c8a15=a4_0x4904;_0x38427c['preventDefault'](),_0x38427c['stopPropagation']();const _0x39b116=this['dataset']['userId'];console[_0x5c8a15(0x1d9)](_0x5c8a15(0x25a),_0x39b116);if(!_0x39b116){console['error'](_0x5c8a15(0x1c6));return;}this['style'][_0x5c8a15(0x1fb)]='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x39b116);});}),document['querySelectorAll'](_0x294a08(0xea))[_0x294a08(0x217)](_0x53c90d=>{const _0x5d65fc=_0x294a08;_0x53c90d['addEventListener'](_0x5d65fc(0x112),function(_0x153842){const _0x5c709c=_0x5d65fc;_0x153842['preventDefault'](),_0x153842['stopPropagation']();const _0x335dd3=this[_0x5c709c(0x215)][_0x5c709c(0xf5)];console[_0x5c709c(0x1d9)](_0x5c709c(0x2d0),_0x335dd3);if(!_0x335dd3){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{const _0x2a2351=_0x5c709c;this['style'][_0x2a2351(0x1fb)]='1';},0xc8),loadUserPointsHistory(_0x335dd3);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x36087f){const _0x515e99=a4_0x302a99;console['log'](_0x515e99(0x2a2),_0x36087f);const _0x4cbf52=document[_0x515e99(0x118)]('quick-edit-points-modal');if(!_0x4cbf52){console[_0x515e99(0x248)](_0x515e99(0x188)),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification(_0x515e99(0x158),_0x515e99(0x22b));const _0x27b000=doc(db,_0x515e99(0x138),_0x36087f),_0x484ece=await getDoc(_0x27b000);if(!_0x484ece[_0x515e99(0xed)]()){showNotification('User\x20not\x20found',_0x515e99(0x248));return;}const _0x2f2e76=_0x484ece['data']();console['log'](_0x515e99(0x135),_0x2f2e76);const _0x4f7f62=document['getElementById']('quick-edit-user-id'),_0x2b090c=document['getElementById'](_0x515e99(0x181)),_0xa3b5a7=document['getElementById'](_0x515e99(0x1c2)),_0x58639f=document['getElementById']('quick-edit-current-points'),_0x545c72=document[_0x515e99(0x118)]('quick-edit-points-form');if(!_0x4f7f62||!_0x2b090c||!_0xa3b5a7||!_0x58639f||!_0x545c72){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x515e99(0x14b),'error');return;}_0x4f7f62[_0x515e99(0x140)]=_0x36087f,_0x2b090c[_0x515e99(0x202)]=_0x2f2e76['displayName']||_0x2f2e76['username']||_0x515e99(0x291),_0xa3b5a7['textContent']=_0x2f2e76['email']||'No\x20email',_0x58639f[_0x515e99(0x202)]=(_0x2f2e76['points']||0x0)[_0x515e99(0x155)](),_0x545c72[_0x515e99(0x262)]();const _0x2cccb7=document['getElementById']('quick-add');_0x2cccb7&&(_0x2cccb7['checked']=!![]);_0x4cbf52['classList']['add']('active'),console['log'](_0x515e99(0x204));const _0x5282af=document['getElementById']('quick-points-amount');_0x5282af&&setTimeout(()=>_0x5282af['focus'](),0x64);}catch(_0x202855){console['error'](_0x515e99(0x2e3),_0x202855),showNotification(_0x515e99(0x1af)+_0x202855['message'],_0x515e99(0x248));}}function closeQuickEditModal(){const _0x3dd8f8=a4_0x302a99,_0x5c4c8d=document['getElementById']('quick-edit-points-modal');_0x5c4c8d&&_0x5c4c8d['classList'][_0x3dd8f8(0x13e)](_0x3dd8f8(0x1b4));}async function handleQuickEditPoints(_0x14e4ee){const _0x260289=a4_0x302a99;_0x14e4ee[_0x260289(0x302)]();const _0x49730a=document[_0x260289(0x118)]('quick-edit-user-id')[_0x260289(0x140)],_0x6503a=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0x574607=parseInt(document['getElementById']('quick-points-amount')[_0x260289(0x140)]),_0x4f075e=document['getElementById']('quick-points-reason')['value']['trim']();console['log']('Processing\x20points\x20edit:',{'userId':_0x49730a,'action':_0x6503a,'amount':_0x574607,'reason':_0x4f075e});if(!_0x49730a||!_0x574607||_0x574607<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x49730a,_0x6503a,_0x574607,_0x4f075e),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x260289(0x2e7),_0x260289(0x1c3)),console['log'](_0x260289(0x114),_0x49730a);}catch(_0x5df2bb){console[_0x260289(0x248)]('Error\x20updating\x20points:',_0x5df2bb),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x5df2bb[_0x260289(0x106)],_0x260289(0x248));}}async function searchUsersForPoints(){const _0x39324d=a4_0x302a99,_0x5217d5=document[_0x39324d(0x118)](_0x39324d(0x276))['value'][_0x39324d(0x2c0)]()['toLowerCase'](),_0xa71d0f=document['getElementById'](_0x39324d(0x2a0));if(!_0x5217d5||_0x5217d5['length']<0x2){_0xa71d0f[_0x39324d(0x209)]='';return;}_0xa71d0f['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x4160e=collection(db,'userProfiles'),_0xa9dbd1=await getDocs(_0x4160e),_0xe2613f=[];_0xa9dbd1['forEach'](_0x19c6cc=>{const _0x5894f5=_0x39324d,_0xe9e67f=_0x19c6cc[_0x5894f5(0x1a2)](),_0x2973ef=(_0xe9e67f['displayName']||_0xe9e67f[_0x5894f5(0x29a)]||'')[_0x5894f5(0x27c)](),_0x5c7d75=(_0xe9e67f['email']||'')[_0x5894f5(0x27c)]();(_0x2973ef['includes'](_0x5217d5)||_0x5c7d75['includes'](_0x5217d5))&&_0xe2613f['push']({'id':_0x19c6cc['id'],..._0xe9e67f});});if(_0xe2613f['length']===0x0){_0xa71d0f['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0xa71d0f['innerHTML']='',_0xe2613f['forEach'](_0x3ffe69=>{const _0x44bcc8=_0x39324d,_0x50072e=document['createElement'](_0x44bcc8(0x1eb));_0x50072e['className']='search-result-item',_0x50072e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x3ffe69[_0x44bcc8(0x159)]||_0x3ffe69['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x3ffe69[_0x44bcc8(0x171)]||'No\x20email')+_0x44bcc8(0x236)+(_0x3ffe69['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x50072e['addEventListener'](_0x44bcc8(0x112),()=>selectUserForPoints(_0x3ffe69)),_0xa71d0f['appendChild'](_0x50072e);});}catch(_0x1ad436){console['error']('Error\x20searching\x20users:',_0x1ad436),_0xa71d0f[_0x39324d(0x209)]='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0xcd1366){const _0x55ec6c=a4_0x302a99;document['getElementById']('selected-user-name')[_0x55ec6c(0x202)]=_0xcd1366['displayName']||_0xcd1366['username']||_0x55ec6c(0x291),document['getElementById']('selected-user-points')[_0x55ec6c(0x202)]=(_0xcd1366['points']||0x0)[_0x55ec6c(0x155)](),document['getElementById']('selected-user-id')['value']=_0xcd1366['id'],document['getElementById']('selected-user-info')['style'][_0x55ec6c(0x232)]=_0x55ec6c(0x2f1),document['getElementById']('points-management-forms')['style']['display']='block',document['getElementById']('user-search-results')['innerHTML']='',document[_0x55ec6c(0x118)]('points-user-search')['value']='';}async function handleModifyPoints(_0x38822a){const _0x498d99=a4_0x302a99;_0x38822a[_0x498d99(0x302)]();const _0x363484=document['getElementById']('selected-user-id')['value'],_0xcc25b6=document['getElementById']('points-action')['value'],_0x3a2145=parseInt(document[_0x498d99(0x118)](_0x498d99(0x1fd))['value']),_0x91521d=document['getElementById']('points-reason')['value']['trim']();if(!_0x363484||!_0x3a2145||_0x3a2145<0x0){showNotification(_0x498d99(0x254),'error');return;}try{await modifyUserPoints(_0x363484,_0xcc25b6,_0x3a2145,_0x91521d),document['getElementById']('modify-points-form')['reset']();const _0x3b869c=doc(db,_0x498d99(0x138),_0x363484),_0x53f336=await getDoc(_0x3b869c);if(_0x53f336['exists']()){const _0x1f723=_0x53f336[_0x498d99(0x1a2)]();document[_0x498d99(0x118)]('selected-user-points')['textContent']=(_0x1f723['points']||0x0)['toLocaleString']();}showNotification(_0x498d99(0x26d),'success'),loadPointsHistory();}catch(_0x10abfd){console['error'](_0x498d99(0x1ee),_0x10abfd),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x10abfd[_0x498d99(0x106)],'error');}}async function loadPointsHistory(){const _0x2ff078=a4_0x302a99,_0x358114=document['getElementById']('points-history-table-body');if(!_0x358114)return;_0x358114['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x4ed8ce=collection(db,_0x2ff078(0x260)),_0x16803c=query(_0x4ed8ce,orderBy(_0x2ff078(0x249),'desc'),limit(0x32)),_0x58d78b=await getDocs(_0x16803c);if(_0x58d78b['empty']){_0x358114[_0x2ff078(0x209)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x358114[_0x2ff078(0x209)]='',_0x58d78b['forEach'](_0x222c8e=>{const _0x2e4b1b=_0x2ff078,_0x17aa46=_0x222c8e['data'](),_0x15a656=document[_0x2e4b1b(0x1a9)]('tr'),_0x1f9ecb=_0x17aa46[_0x2e4b1b(0x249)]?new Date(_0x17aa46[_0x2e4b1b(0x249)]['seconds']*0x3e8)[_0x2e4b1b(0x155)]():'Unknown';let _0x2a1408='';switch(_0x17aa46['action']){case'add':_0x2a1408='Added\x20'+_0x17aa46[_0x2e4b1b(0x10f)]+'\x20points';break;case _0x2e4b1b(0x146):_0x2a1408=_0x2e4b1b(0x222)+_0x17aa46['amount']+'\x20points';break;case'set':_0x2a1408='Set\x20to\x20'+_0x17aa46['amount']+'\x20points';break;default:_0x2a1408=_0x17aa46['action']+'\x20'+_0x17aa46['amount']+'\x20points';}_0x15a656['innerHTML']=_0x2e4b1b(0x24b)+_0x1f9ecb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x17aa46[_0x2e4b1b(0x159)]||_0x2e4b1b(0x291))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a1408+_0x2e4b1b(0x192)+_0x17aa46['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x17aa46['previousPoints']||0x0)+_0x2e4b1b(0x252)+(_0x17aa46[_0x2e4b1b(0x18d)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x17aa46['reason']||_0x2e4b1b(0x2dd))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x17aa46['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x358114[_0x2e4b1b(0x173)](_0x15a656);});}catch(_0x25801a){console['error']('Error\x20loading\x20points\x20history:',_0x25801a),_0x358114['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x25801a['message']+'</td></tr>';}}function filterPointsOverview(){const _0x1fc40c=a4_0x302a99,_0x392954=document['getElementById']('points-overview-search')['value'][_0x1fc40c(0x27c)]();if(!window['allUsersPoints'])return;const _0x547aea=window['allUsersPoints']['filter'](_0x1ef0a0=>{const _0x3aebc9=_0x1fc40c,_0x19a455=(_0x1ef0a0['displayName']||_0x1ef0a0['username']||'')['toLowerCase'](),_0x343d93=(_0x1ef0a0['email']||'')['toLowerCase']();return _0x19a455['includes'](_0x392954)||_0x343d93[_0x3aebc9(0x2b9)](_0x392954);});renderPointsOverview(_0x547aea);}function sortPointsOverview(){const _0x35c271=a4_0x302a99,_0x510ab7=document['getElementById']('points-sort-order')['value'];if(!window[_0x35c271(0x28c)])return;const _0x5c7915=[...window['allUsersPoints']];switch(_0x510ab7){case'points-desc':_0x5c7915['sort']((_0x2dc1ae,_0x329738)=>(_0x329738[_0x35c271(0x235)]||0x0)-(_0x2dc1ae[_0x35c271(0x235)]||0x0));break;case'points-asc':_0x5c7915[_0x35c271(0x24f)]((_0x403c38,_0x21ffa0)=>(_0x403c38[_0x35c271(0x235)]||0x0)-(_0x21ffa0[_0x35c271(0x235)]||0x0));break;case'name-asc':_0x5c7915['sort']((_0x2c19bd,_0x2306ea)=>{const _0x20d2c9=_0x35c271,_0x5dc1ff=(_0x2c19bd[_0x20d2c9(0x159)]||_0x2c19bd['username']||'')['toLowerCase'](),_0x1c12cf=(_0x2306ea['displayName']||_0x2306ea['username']||'')['toLowerCase']();return _0x5dc1ff['localeCompare'](_0x1c12cf);});break;case'name-desc':_0x5c7915['sort']((_0x1493f5,_0x3db6b7)=>{const _0x19369c=_0x35c271,_0x632f97=(_0x1493f5['displayName']||_0x1493f5[_0x19369c(0x29a)]||'')['toLowerCase'](),_0x1f0fd1=(_0x3db6b7[_0x19369c(0x159)]||_0x3db6b7['username']||'')['toLowerCase']();return _0x1f0fd1['localeCompare'](_0x632f97);});break;}renderPointsOverview(_0x5c7915);}async function handleAwardItem(_0x5dbc00){const _0x2b3e78=a4_0x302a99;_0x5dbc00['preventDefault']();const _0x225f8b=document['getElementById']('selected-user-id')['value'],_0x388174=document['getElementById'](_0x2b3e78(0x1ec))['value'],_0x341aee=document['getElementById']('award-reason')[_0x2b3e78(0x140)]['trim']();if(!_0x225f8b||!_0x388174){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x2b3e78(0x248));return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')['reset']();}catch(_0xb03f18){console[_0x2b3e78(0x248)](_0x2b3e78(0x15b),_0xb03f18),showNotification('Failed\x20to\x20award\x20item:\x20'+_0xb03f18['message'],_0x2b3e78(0x248));}}async function loadUserPointsHistory(_0x59a68e){const _0x2dddad=a4_0x302a99;try{const _0x23b2ef=collection(db,'pointsHistory'),_0x31a38b=query(_0x23b2ef,where('userId','==',_0x59a68e),orderBy('timestamp',_0x2dddad(0x2ea))),_0x55ee42=await getDocs(_0x31a38b);console['log']('Found\x20'+_0x55ee42[_0x2dddad(0x29f)]+'\x20history\x20entries\x20for\x20user\x20'+_0x59a68e),showNotification('User\x20has\x20'+_0x55ee42['size']+'\x20points\x20history\x20entries','info');}catch(_0x3d721b){console['error'](_0x2dddad(0x170),_0x3d721b),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x327c0a=a4_0x302a99;try{console[_0x327c0a(0x1d9)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0xeaee45=collection(db,_0x327c0a(0x138)),_0x577673=await getDocs(_0xeaee45);if(_0x577673[_0x327c0a(0x160)]){console['log'](_0x327c0a(0x244));return;}let _0x5d84c3=0x0,_0x5288cc=0x0;const _0x1a4812=writeBatch(db);let _0x5eb76a=0x0;return console['log']('Found\x20'+_0x577673['size']+_0x327c0a(0x13d)),_0x577673['forEach'](_0x2599c6=>{const _0x4ccd0d=_0x327c0a,_0x185d8e=_0x2599c6['data']();_0x185d8e[_0x4ccd0d(0x235)]===undefined||_0x185d8e['points']===null?(_0x1a4812['update'](_0x2599c6['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x5d84c3++,_0x5eb76a++,console[_0x4ccd0d(0x1d9)]('Queued\x20'+(_0x185d8e['displayName']||_0x185d8e[_0x4ccd0d(0x29a)]||_0x185d8e['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x5288cc++,console['log']((_0x185d8e['displayName']||_0x185d8e['username']||_0x185d8e['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x185d8e['points'])),_0x5eb76a>=0x1f4&&console[_0x4ccd0d(0x177)]('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x5d84c3>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x5d84c3+_0x327c0a(0x1a3)),await _0x1a4812['commit'](),console[_0x327c0a(0x1d9)]('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x5d84c3+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console[_0x327c0a(0x1d9)]('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x577673[_0x327c0a(0x29f)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x5d84c3+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x5288cc),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x5d84c3+'\x20users.\x20'+_0x5288cc+_0x327c0a(0x28e),_0x327c0a(0x1c3)),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x577673[_0x327c0a(0x29f)],'usersUpdated':_0x5d84c3,'usersAlreadyHadPoints':_0x5288cc};}catch(_0x1f9ac2){console['error']('Error\x20initializing\x20points\x20field:',_0x1f9ac2),showNotification('Error\x20initializing\x20points:\x20'+_0x1f9ac2['message'],'error');throw _0x1f9ac2;}}function addPointsMigrationButton(){const _0x5f49c4=a4_0x302a99,_0x399501=document[_0x5f49c4(0x118)](_0x5f49c4(0x238));if(!_0x399501)return;if(document['getElementById']('migrate-points-btn'))return;const _0x455caa=document[_0x5f49c4(0x1a9)]('div');_0x455caa['className']=_0x5f49c4(0x301),_0x455caa[_0x5f49c4(0x223)]['marginBottom']=_0x5f49c4(0x162),_0x455caa['style'][_0x5f49c4(0x1c4)]='15px',_0x455caa['style']['backgroundColor']=_0x5f49c4(0x21b),_0x455caa['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x455caa['style']['borderRadius']='5px',_0x455caa['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x3c14f5=_0x399501['querySelector']('.section-header');_0x3c14f5&&_0x3c14f5[_0x5f49c4(0x13b)](_0x5f49c4(0x144),_0x455caa),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x2e1c27=_0x5f49c4;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this[_0x2e1c27(0x223)][_0x2e1c27(0x277)]='#28a745',setTimeout(()=>{const _0x16745d=_0x2e1c27;_0x455caa['style'][_0x16745d(0x232)]='none';},0xbb8);}catch(_0x495b70){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x2e1c27(0x230)]=![];}}});}function setupManagePointsSection(){const _0x29db36=a4_0x302a99;console[_0x29db36(0x1d9)](_0x29db36(0xfb)),addPointsMigrationButton();const _0x29eec7=document[_0x29db36(0x118)]('points-user-search');_0x29eec7&&_0x29eec7['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x3dcd57=document['getElementById']('modify-points-form');_0x3dcd57&&_0x3dcd57['addEventListener']('submit',handleModifyPoints);const _0x5a296e=document['getElementById']('award-item-form');_0x5a296e&&_0x5a296e['addEventListener']('submit',handleAwardItem);const _0x37123a=document[_0x29db36(0x118)]('points-overview-search');_0x37123a&&_0x37123a['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x32de77=document[_0x29db36(0x118)](_0x29db36(0x2e1));_0x32de77&&_0x32de77['addEventListener']('change',sortPointsOverview);const _0x5eca43=document[_0x29db36(0x118)]('refresh-points-overview');_0x5eca43&&_0x5eca43[_0x29db36(0x283)]('click',loadPointsOverview);const _0x215b51=document[_0x29db36(0x118)]('quick-edit-points-modal');if(_0x215b51){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x27d3fc=_0x215b51[_0x29db36(0xe7)]('.close-btn');_0x27d3fc?_0x27d3fc[_0x29db36(0x283)]('click',function(){const _0x4bba19=_0x29db36;console[_0x4bba19(0x1d9)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x172630=document['getElementById']('cancel-quick-edit');_0x172630?_0x172630[_0x29db36(0x283)](_0x29db36(0x112),function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console[_0x29db36(0x177)](_0x29db36(0x1ae));const _0x24b172=document['getElementById']('quick-edit-points-form');_0x24b172?_0x24b172[_0x29db36(0x283)]('submit',function(_0x566925){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x566925);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x215b51['addEventListener'](_0x29db36(0x112),function(_0x33512d){_0x33512d['target']===_0x215b51&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console[_0x29db36(0x248)](_0x29db36(0x23e));console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x49f491=a4_0x302a99;console[_0x49f491(0x1d9)](_0x49f491(0x18b));const _0x48872e=document['getElementById']('ribbon-user-search');_0x48872e&&_0x48872e['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0xddaf37=document['getElementById']('search-ribbon-user-btn');_0xddaf37&&_0xddaf37[_0x49f491(0x283)](_0x49f491(0x112),searchRibbonUser);const _0x549a1a=document['getElementById'](_0x49f491(0x10d));_0x549a1a&&_0x549a1a[_0x49f491(0x283)]('submit',addRibbon),_0x48872e&&_0x48872e['addEventListener']('keypress',function(_0x55c791){_0x55c791['key']==='Enter'&&(_0x55c791['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x314ca9,_0x68a896,_0x4026fb,_0x47f413=''){const _0x5d2067=a4_0x302a99,_0x566235=doc(db,'userProfiles',_0x314ca9),_0x21f29f=await getDoc(_0x566235);if(!_0x21f29f['exists']())throw new Error(_0x5d2067(0x152));const _0x1de4ee=_0x21f29f['data'](),_0x58873e=_0x1de4ee['points']!==undefined?_0x1de4ee['points']:0x0;_0x1de4ee['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x1de4ee['displayName']||_0x1de4ee['email']||'Unknown')),await updateDoc(_0x566235,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x2f1f19=_0x58873e;switch(_0x68a896){case'add':_0x2f1f19=_0x58873e+_0x4026fb;break;case'subtract':_0x2f1f19=Math['max'](0x0,_0x58873e-_0x4026fb);break;case _0x5d2067(0x116):_0x2f1f19=_0x4026fb;break;default:throw new Error(_0x5d2067(0x2c1));}await updateDoc(_0x566235,{'points':_0x2f1f19,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x5d2067(0x260)),{'userId':_0x314ca9,'userEmail':_0x1de4ee['email']||_0x5d2067(0x147),'displayName':_0x1de4ee['displayName']||_0x1de4ee['username']||'Unknown\x20User','action':_0x68a896,'amount':_0x4026fb,'previousPoints':_0x58873e,'newPoints':_0x2f1f19,'reason':_0x47f413,'adminEmail':auth['currentUser'][_0x5d2067(0x171)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x192f08=a4_0x302a99,_0x36e466=document['getElementById'](_0x192f08(0x115));if(!_0x36e466)return;_0x36e466[_0x192f08(0x209)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x31058e=collection(db,_0x192f08(0x138)),_0x42ab80=await getDocs(_0x31058e);if(_0x42ab80['empty']){_0x36e466[_0x192f08(0x209)]=_0x192f08(0x25b);return;}const _0x2968ba=[];let _0x399547=0x0;_0x42ab80[_0x192f08(0x217)](_0x5da39a=>{const _0x37de5e=_0x192f08,_0x2893f1=_0x5da39a[_0x37de5e(0x1a2)](),_0x1cd517=_0x2893f1[_0x37de5e(0x235)]!==undefined?_0x2893f1[_0x37de5e(0x235)]:0x0;_0x2893f1['points']===undefined&&_0x399547++,_0x2968ba['push']({'id':_0x5da39a['id'],..._0x2893f1,'points':_0x1cd517});}),_0x399547>0x0&&(console['log']('Found\x20'+_0x399547+_0x192f08(0x1ea)),showNotification(_0x399547+_0x192f08(0x13f),'info')),_0x2968ba['sort']((_0x2f9672,_0x5f1f60)=>(_0x5f1f60[_0x192f08(0x235)]||0x0)-(_0x2f9672['points']||0x0)),window[_0x192f08(0x28c)]=_0x2968ba,renderPointsOverview(_0x2968ba);}catch(_0x3350e0){console[_0x192f08(0x248)]('Error\x20loading\x20points\x20overview:',_0x3350e0),_0x36e466[_0x192f08(0x209)]=_0x192f08(0x12c)+_0x3350e0[_0x192f08(0x106)]+'</td></tr>';}}async function loadRibbonsData(){const _0x518402=a4_0x302a99,_0x2a9dfa=document['getElementById']('ribbons-overview-table-body');if(!_0x2a9dfa)return;_0x2a9dfa['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x4e28ea,_0xebbb72,_0x197a0d]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,_0x518402(0x17e)))]);_0x2a9dfa['innerHTML']='';const _0x13db8e=(_0x46da08,_0x48edf3)=>{_0x46da08['forEach'](_0x124088=>{const _0x5c9d6b=a4_0x4904,_0x1e5b52=_0x124088[_0x5c9d6b(0x1a2)](),_0xc82040=_0x1e5b52['ribbons']||{},_0x4816fa=Object['keys'](_0xc82040)['length'],_0x437f08=document['createElement']('tr');_0x437f08['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1e5b52['username']||_0x5c9d6b(0xec))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x48edf3[_0x5c9d6b(0x27c)]()+'\x22>'+_0x48edf3+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4816fa+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1e5b52[_0x5c9d6b(0x2d1)]?new Date(_0x1e5b52[_0x5c9d6b(0x2d1)]['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x1e5b52['username']+'\x22\x20data-ladder=\x22'+_0x48edf3+_0x5c9d6b(0x221),_0x2a9dfa['appendChild'](_0x437f08);});};_0x13db8e(_0x4e28ea,'D1'),_0x13db8e(_0xebbb72,'D2'),_0x13db8e(_0x197a0d,'D3'),document[_0x518402(0x13c)]('.edit-ribbons-btn')['forEach'](_0x236f71=>{_0x236f71['addEventListener']('click',function(){const _0x393479=a4_0x4904,_0x31d822=this['dataset'][_0x393479(0x29a)],_0x4175a0=this['dataset'][_0x393479(0x24a)];editUserRibbons(_0x31d822,_0x4175a0);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully',_0x518402(0x1c3));}catch(_0x1292e9){console[_0x518402(0x248)]('Error\x20loading\x20ribbons:',_0x1292e9),_0x2a9dfa['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x256b28=a4_0x302a99,_0x518e27=document[_0x256b28(0x118)]('ribbon-user-search')[_0x256b28(0x140)][_0x256b28(0x2c0)]();if(!_0x518e27){showNotification(_0x256b28(0x2ba),'error');return;}try{const [_0x267378,_0x4a4bb0,_0x412da8]=await Promise['all']([getDoc(doc(db,_0x256b28(0x1c9),_0x518e27)),getDoc(doc(db,'playerRibbonsD2',_0x518e27)),getDoc(doc(db,'playerRibbonsD3',_0x518e27))]);let _0x1ffcb4=null,_0x52fba4=null;if(_0x267378['exists']())_0x1ffcb4='D1',_0x52fba4=_0x267378['data']();else{if(_0x4a4bb0['exists']())_0x1ffcb4='D2',_0x52fba4=_0x4a4bb0['data']();else _0x412da8['exists']()&&(_0x1ffcb4='D3',_0x52fba4=_0x412da8['data']());}_0x1ffcb4?(document['getElementById']('current-ribbon-user')['textContent']=_0x518e27,document['getElementById']('ribbon-target-user')[_0x256b28(0x140)]=_0x518e27,document['getElementById'](_0x256b28(0x1d7))[_0x256b28(0x140)]=_0x1ffcb4,document['getElementById']('user-ribbon-management')['style']['display']=_0x256b28(0x2f1),displayCurrentRibbons(_0x52fba4[_0x256b28(0x150)]||{}),showNotification(_0x256b28(0x2bf)+_0x518e27+'\x20in\x20'+_0x1ffcb4+'\x20ladder','success')):showNotification('User\x20'+_0x518e27+'\x20not\x20found\x20in\x20any\x20ladder',_0x256b28(0x248));}catch(_0x1e1260){console[_0x256b28(0x248)](_0x256b28(0x25c),_0x1e1260),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x227e18){const _0x171f67=a4_0x302a99,_0x5208e6=document['getElementById']('current-ribbons-list');if(!_0x5208e6)return;_0x5208e6['innerHTML']='';if(Object['keys'](_0x227e18)[_0x171f67(0xe9)]===0x0){_0x5208e6['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object[_0x171f67(0x175)](_0x227e18)['forEach'](([_0x46fddf,_0x1d34ee])=>{const _0x36c02d=_0x171f67,_0x2ca653=document['createElement']('div');_0x2ca653['className']=_0x36c02d(0x154),_0x2ca653['innerHTML']=_0x36c02d(0x1a8)+_0x46fddf+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x1d34ee[_0x36c02d(0x2e4)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x1d34ee[_0x36c02d(0x1a7)]?new Date(_0x1d34ee[_0x36c02d(0x1a7)][_0x36c02d(0x1cf)]*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x46fddf+_0x36c02d(0x239),_0x5208e6['appendChild'](_0x2ca653);}),document[_0x171f67(0x13c)]('.remove-ribbon-btn')[_0x171f67(0x217)](_0x4e597f=>{_0x4e597f['addEventListener']('click',function(){const _0x20d568=this['dataset']['ribbon'];removeRibbon(_0x20d568);});});}async function addRibbon(_0x31f6f1){const _0x2e97c6=a4_0x302a99;_0x31f6f1[_0x2e97c6(0x302)]();const _0x3c7a14=document[_0x2e97c6(0x118)](_0x2e97c6(0x10c))['value'],_0x2648be=document['getElementById']('ribbon-target-ladder')['value'],_0x1a5511=document['getElementById']('ribbon-type-select')[_0x2e97c6(0x140)],_0x3daf94=parseInt(document['getElementById']('ribbon-level')[_0x2e97c6(0x140)]);if(!_0x3c7a14||!_0x2648be||!_0x1a5511||!_0x3daf94){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x12383c=_0x2e97c6(0x1c9)+(_0x2648be==='D1'?'':_0x2648be),_0x48fd18=doc(db,_0x12383c,_0x3c7a14),_0xb3305b=await getDoc(_0x48fd18),_0x480d8f=_0xb3305b['exists']()?_0xb3305b['data']()[_0x2e97c6(0x150)]||{}:{};_0x480d8f[_0x1a5511]={'level':_0x3daf94,'awardedAt':serverTimestamp()},await setDoc(_0x48fd18,{'username':_0x3c7a14,'ladder':_0x2648be,'ribbons':_0x480d8f,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x2e97c6(0xe8)+_0x1a5511+'\x20Level\x20'+_0x3daf94+'\x20to\x20'+_0x3c7a14,'success'),displayCurrentRibbons(_0x480d8f),document['getElementById']('ribbon-type-select')['value']='',document['getElementById']('ribbon-level')['value']='1';}catch(_0xf8e840){console['error']('Error\x20adding\x20ribbon:',_0xf8e840),showNotification('Error\x20adding\x20ribbon',_0x2e97c6(0x248));}}async function removeRibbon(_0x36aac1){const _0x5d8594=a4_0x302a99,_0x558f18=document['getElementById'](_0x5d8594(0x10c))[_0x5d8594(0x140)],_0x27fa3c=document['getElementById'](_0x5d8594(0x1d7))[_0x5d8594(0x140)];if(!confirm('Remove\x20'+_0x36aac1+'\x20from\x20'+_0x558f18+'?'))return;try{const _0x660006='playerRibbons'+(_0x27fa3c==='D1'?'':_0x27fa3c),_0x3ff674=doc(db,_0x660006,_0x558f18),_0x1524cb=await getDoc(_0x3ff674),_0x4d72a4=_0x1524cb['exists']()?_0x1524cb['data']()[_0x5d8594(0x150)]||{}:{};delete _0x4d72a4[_0x36aac1],await setDoc(_0x3ff674,{'username':_0x558f18,'ladder':_0x27fa3c,'ribbons':_0x4d72a4,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x5d8594(0xeb)+_0x36aac1+'\x20from\x20'+_0x558f18,_0x5d8594(0x1c3)),displayCurrentRibbons(_0x4d72a4);}catch(_0x2837f8){console[_0x5d8594(0x248)]('Error\x20removing\x20ribbon:',_0x2837f8),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x5d9d0e,_0x960866){const _0x4e43a9=a4_0x302a99;document['getElementById'](_0x4e43a9(0x300))[_0x4e43a9(0x140)]=_0x5d9d0e,searchRibbonUser();}