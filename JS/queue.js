const a43_0x3580c7=a43_0x10eb,a43_0x2d9098=(function(){let _0x5af0f7=!![];return function(_0x323df2,_0x2cb0c2){const _0x5b9af9=_0x5af0f7?function(){if(_0x2cb0c2){const _0xaa7351=_0x2cb0c2['apply'](_0x323df2,arguments);return _0x2cb0c2=null,_0xaa7351;}}:function(){};return _0x5af0f7=![],_0x5b9af9;};}()),a43_0x4ad8b4=a43_0x2d9098(this,function(){const _0x499cf4=a43_0x10eb,_0x2b90db=function(){const _0x158647=a43_0x10eb;let _0x5df748;try{_0x5df748=Function('return\x20(function()\x20'+_0x158647(0x170)+');')();}catch(_0x15a6f0){_0x5df748=window;}return _0x5df748;},_0x1435e8=_0x2b90db(),_0x29a5c8=_0x1435e8[_0x499cf4(0x165)]=_0x1435e8['console']||{},_0x20b7ef=['log',_0x499cf4(0x169),'info','error','exception','table',_0x499cf4(0x16a)];for(let _0x2a94d1=0x0;_0x2a94d1<_0x20b7ef['length'];_0x2a94d1++){const _0x28718d=a43_0x2d9098['constructor']['prototype']['bind'](a43_0x2d9098),_0x49585c=_0x20b7ef[_0x2a94d1],_0x5e1a6b=_0x29a5c8[_0x49585c]||_0x28718d;_0x28718d['__proto__']=a43_0x2d9098[_0x499cf4(0x168)](a43_0x2d9098),_0x28718d['toString']=_0x5e1a6b['toString']['bind'](_0x5e1a6b),_0x29a5c8[_0x49585c]=_0x28718d;}});a43_0x4ad8b4();import{db}from'./firebase-config.js';function a43_0x1296(){const _0x3a5b04=['toDate','getElementById','console','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','addEventListener','bind','warn','trace','lastUpdated','Just\x20now','Error\x20in\x20queue\x20listener:','display','floor','{}.constructor(\x22return\x20this\x22)(\x20)','forEach','innerHTML'];a43_0x1296=function(){return _0x3a5b04;};return a43_0x1296();}import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x30040e){const _0x369f06=a43_0x10eb,_0x1ef314=document[_0x369f06(0x164)]('queue-container');if(!_0x1ef314)return;if(_0x30040e['length']===0x0){_0x1ef314['style'][_0x369f06(0x16e)]='none';return;}_0x1ef314['style'][_0x369f06(0x16e)]='block';let _0x4b1e49='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x30040e[_0x369f06(0x171)](_0x141926=>{const _0x3013e1=_0x369f06;_0x4b1e49+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x141926['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x141926[_0x3013e1(0x16b)])+_0x3013e1(0x166);}),_0x4b1e49+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x1ef314[_0x369f06(0x172)]=_0x4b1e49;}function formatQueueTime(_0x1f2cd7){const _0x1c4a36=a43_0x10eb;if(!_0x1f2cd7)return'Just\x20now';const _0xf72ada=_0x1f2cd7['toDate']?_0x1f2cd7[_0x1c4a36(0x163)]():new Date(_0x1f2cd7),_0x10964=new Date(),_0x53a27c=Math['floor']((_0x10964-_0xf72ada)/0xea60);if(_0x53a27c<0x1)return _0x1c4a36(0x16c);return _0x53a27c+'m\x20in\x20queue';}async function checkQueueTimeout(_0x3645a1){const _0x5b5590=a43_0x10eb;if(!_0x3645a1['lastUpdated'])return;const _0x11084b=_0x3645a1['lastUpdated']['toDate']?_0x3645a1['lastUpdated'][_0x5b5590(0x163)]():new Date(_0x3645a1['lastUpdated']),_0x45926f=new Date(),_0xec80b8=Math[_0x5b5590(0x16f)]((_0x45926f-_0x11084b)/0xea60);if(_0xec80b8>=0x1e)try{const _0x373137=doc(db,'readyPlayers',_0x3645a1['id']);await updateDoc(_0x373137,{'isReady':![]});}catch(_0x3b42d0){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x3b42d0);}}function a43_0x10eb(_0x505c9b,_0xdb1542){const _0x4ad8b4=a43_0x1296();return a43_0x10eb=function(_0x2d9098,_0x45d120){_0x2d9098=_0x2d9098-0x163;let _0x129677=_0x4ad8b4[_0x2d9098];return _0x129677;},a43_0x10eb(_0x505c9b,_0xdb1542);}const unsubscribe=onSnapshot(readyPlayersRef,_0x2e8892=>{const _0x424e1a=[];_0x2e8892['forEach'](_0x49f0e5=>{const _0xae97ba=_0x49f0e5['data']();if(_0xae97ba['isReady']===!![]){const _0x3e7976={'id':_0x49f0e5['id'],'username':_0xae97ba['username'],'lastUpdated':_0xae97ba['lastUpdated']||new Date()};_0x424e1a['push'](_0x3e7976),checkQueueTimeout(_0x3e7976);}}),updateQueueDisplay(_0x424e1a);},_0x40ae74=>{const _0xef3ec5=a43_0x10eb;console['error'](_0xef3ec5(0x16d),_0x40ae74);});window[a43_0x3580c7(0x167)]('unload',()=>{unsubscribe();});