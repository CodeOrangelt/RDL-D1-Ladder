const a0_0x1fc40b=a0_0x116e;(function(_0x348c17,_0x19782d){const _0x11e2f4=a0_0x116e,_0x57ee0c=_0x348c17();while(!![]){try{const _0x5015aa=parseInt(_0x11e2f4(0x263))/0x1+parseInt(_0x11e2f4(0x25e))/0x2*(parseInt(_0x11e2f4(0x26a))/0x3)+-parseInt(_0x11e2f4(0x273))/0x4+-parseInt(_0x11e2f4(0x27f))/0x5*(parseInt(_0x11e2f4(0x235))/0x6)+-parseInt(_0x11e2f4(0x277))/0x7*(parseInt(_0x11e2f4(0x1f5))/0x8)+-parseInt(_0x11e2f4(0x267))/0x9*(parseInt(_0x11e2f4(0x1fe))/0xa)+parseInt(_0x11e2f4(0x290))/0xb;if(_0x5015aa===_0x19782d)break;else _0x57ee0c['push'](_0x57ee0c['shift']());}catch(_0x186313){_0x57ee0c['push'](_0x57ee0c['shift']());}}}(a0_0x3d52,0x7b5b6));function a0_0x3d52(){const _0x16383c=['data','pointer','../images/tokens/Hostage.gif','Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.','Only\x20admins\x20can\x20sell\x20tokens','can-equip','email','itemId','includes','cursor','Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>','preventDefault','Token\x20purchase\x20failed:','closest','remove','isUserAdmin','✅\x20User\x20authenticated:','log','theme_','\x20points?\x20This\x20cannot\x20be\x20undone.','🏪\x20Redeem\x20store\x20loaded','\x20Points','1606UMotZW','Red','code','RedeemStore','permission-denied','279573ifusHA','is\x20that...\x20Pfunk?','\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','token','28071FDlwHT','var(--info-color,\x20#17a2b8)','../images/tokens/Laser.gif','927fSDiaN','store-content','You\x20already\x20own\x20the\x20','Sign\x20in\x20to\x20Purchase','error','theme','.token-select-btn','price','✅\x20Purchased\x20','3337584hTZDKA','Buy','Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.','current-theme','1016764agkijm','[data-token]','Purchase','body','Token\x20sale\x20failed:','You\x20need\x20','0.7','Fan','890cSwERk','tokens','User\x20data\x20loaded\x20-\x20Points:\x20','classList','Strategic\x20explosive\x20device','\x20points\x20to\x20purchase\x20this\x20token','prototype','blob','confirm','exists','inventory','ThemeSystem','dataset','Intelligent\x20targeting\x20system','name','exception','auth-warning','23134210lzTwTD','Please\x20sign\x20in\x20to\x20equip\x20tokens','../images/tokens/Plasmablobl.gif','\x20theme','../images/tokens/Phoenix.gif','points','powerup','Please\x20sign\x20in\x20to\x20unequip\x20tokens','innerHTML','✅\x20Sold\x20token\x20','warning','New\x20user\x20profile\x20created','\x20token','A\x20mysterious\x20purple\x20blob\x20token','Emerald\x20City!','Failed\x20to\x20equip\x20token:\x20','Need\x20','querySelector','\x20is\x20already\x20your\x20current\x20theme','\x20for\x20','textContent','equipped','userProfiles','transactions','8mOoLsv','none','currentUser','Smart\x20Missile','add','\x20theme\x20applied!','equippedToken','Failed\x20to\x20sell\x20token:\x20','forEach','1600CuRKKZ','owned','displayName','Mega\x20Missile','Sold\x20','adminStatusChanged','Theme\x20','Failed\x20to\x20unequip\x20token:\x20','\x20points\x20(50%\x20refund)','click','var(--accent-color,\x20#2196F3)','Plasma\x20Cannon','\x22\x20alt=\x22','Become\x20one\x20with\x20the\x20shadows','apply-theme','🔄\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token','displayLadder','../images/tokens/subgame/mmissile.gif','Marker','token_','\x20token\x20for\x20','Unexpected\x20token\x20error:','\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>','\x20points','The\x20iconic\x20Pyro-GX\x20ship.','sign-in-paid','Theme\x20system\x20not\x20found','You\x20don\x27t\x20own\x20this\x20token','weapon','Smart\x20Mine','image','Apply\x20Theme','Please\x20sign\x20in\x20to\x20purchase\x20tokens','Mercury\x20Missile','isAdmin','opacity','switchTheme','Token\x20equip\x20failed:','You\x20must\x20purchase\x20this\x20theme\x20first','[data-theme]','warn','info','disabled','style','function','.tokens-grid','Please\x20sign\x20in\x20to\x20sell\x20tokens','className','No\x20token\x20is\x20currently\x20equipped','Only\x20the\x20best\x20get\x20this\x20one','\x20not\x20found','../images/tokens/Marker.gif','Token\x20','Shield\x20Orb','getElementById','21804GmQwEw','toLocaleString','Plasma\x20Blob','special','div','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-','purchase','.token-equip-btn','createElement','Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.','👑\x20Admin\x20controls\x20enabled','console','querySelectorAll','Buy\x20for\x20','uid','refreshUI','cannot-afford'];a0_0x3d52=function(){return _0x16383c;};return a0_0x3d52();}const a0_0x5bee18=(function(){let _0x277ecb=!![];return function(_0x54ba20,_0x54ba6a){const _0x583cde=_0x277ecb?function(){if(_0x54ba6a){const _0x395b07=_0x54ba6a['apply'](_0x54ba20,arguments);return _0x54ba6a=null,_0x395b07;}}:function(){};return _0x277ecb=![],_0x583cde;};}()),a0_0x329baf=a0_0x5bee18(this,function(){const _0x2016ce=a0_0x116e,_0xbfd57f=function(){let _0x708342;try{_0x708342=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3b764d){_0x708342=window;}return _0x708342;},_0x2b0494=_0xbfd57f(),_0x2d4447=_0x2b0494[_0x2016ce(0x241)]=_0x2b0494['console']||{},_0x4bfd54=['log',_0x2016ce(0x226),'info','error',_0x2016ce(0x28e),'table','trace'];for(let _0x2e0ee0=0x0;_0x2e0ee0<_0x4bfd54[_0x2016ce(0x23a)];_0x2e0ee0++){const _0x3bc043=a0_0x5bee18['constructor'][_0x2016ce(0x285)]['bind'](a0_0x5bee18),_0x567596=_0x4bfd54[_0x2e0ee0],_0xc13076=_0x2d4447[_0x567596]||_0x3bc043;_0x3bc043['__proto__']=a0_0x5bee18['bind'](a0_0x5bee18),_0x3bc043['toString']=_0xc13076['toString']['bind'](_0xc13076),_0x2d4447[_0x567596]=_0x3bc043;}});a0_0x329baf();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a0_0x116e(_0x3529cd,_0x4b2f70){const _0x598b59=a0_0x3d52();return a0_0x116e=function(_0x329baf,_0x5bee18){_0x329baf=_0x329baf-0x1e0;let _0x5146f7=_0x598b59[_0x329baf];return _0x5146f7;},a0_0x116e(_0x3529cd,_0x4b2f70);}import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'contrast':{'price':0x0,'name':'Nightlight','description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':a0_0x1fc40b(0x25f),'description':'For\x20the\x20angry\x20type.'},'gold':{'price':0x320,'name':'Gold','description':a0_0x1fc40b(0x22f)},'emerald':{'price':0x3e8,'name':'Emerald','description':a0_0x1fc40b(0x1eb)},'cockpit':{'price':0x4b0,'name':'Cockpit','description':a0_0x1fc40b(0x264)}},TOKENS={'pwr01':{'price':0x64,'name':'Energy','description':'Enhanced\x20energy\x20generation\x20unit','image':'../images/tokens/subgame/pwr01.gif','category':a0_0x1fc40b(0x1e3)},'fan':{'price':0x96,'name':a0_0x1fc40b(0x27e),'description':'Show\x20your\x20support\x20with\x20this\x20fan\x20token.','image':'../images/tokens/Fan.gif','category':'fun'},'marker':{'price':0xfa,'name':a0_0x1fc40b(0x210),'description':a0_0x1fc40b(0x251),'image':a0_0x1fc40b(0x231),'category':'fun'},'laser':{'price':0x12c,'name':'Laser','description':'Classic\x20laser\x20weapon\x20token.','image':a0_0x1fc40b(0x269),'category':a0_0x1fc40b(0x21a)},'pbomb':{'price':0x15e,'name':'Proximity\x20Bomb','description':a0_0x1fc40b(0x283),'image':'../images/tokens/subgame/pbomb.gif','category':'weapon'},'fusion':{'price':0x15e,'name':'Fusion\x20Cannon','description':'Devastating\x20fusion\x20weapon\x20technology','image':'../images/tokens/subgame/fusion.gif','category':a0_0x1fc40b(0x21a)},'lock':{'price':0x1c2,'name':'Lock','description':'Lock\x20in\x20your\x20victory.','image':'../images/tokens/Lock.gif','category':'fun'},'blob01':{'price':0x1f4,'name':'Blob\x20Token\x201','description':a0_0x1fc40b(0x1ea),'image':'../images/tokens/blob01.gif','category':'blob'},'plasma':{'price':0x1f4,'name':a0_0x1fc40b(0x209),'description':'High-powered\x20plasma\x20cannon\x20token.','image':'../images/tokens/Plasma.gif','category':a0_0x1fc40b(0x21a)},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':a0_0x1fc40b(0x20b),'image':'../images/tokens/cloak.gif','category':'special'},'pwr02':{'price':0x258,'name':a0_0x1fc40b(0x233),'description':'Advanced\x20energy\x20storage\x20system','image':'../images/tokens/subgame/pwr02.gif','category':'powerup'},'mercury':{'price':0x258,'name':a0_0x1fc40b(0x21f),'description':'Fast\x20and\x20furious\x20missile\x20token.','image':'../images/tokens/Mercury.gif','category':a0_0x1fc40b(0x21a)},'plasmablobl':{'price':0x258,'name':a0_0x1fc40b(0x237),'description':'A\x20mysterious\x20plasma\x20blob.','image':a0_0x1fc40b(0x292),'category':'blob'},'smissile':{'price':0x28a,'name':a0_0x1fc40b(0x1f8),'description':a0_0x1fc40b(0x28c),'image':'../images/tokens/subgame/smissile.gif','category':'weapon'},'smartmine':{'price':0x2ee,'name':a0_0x1fc40b(0x21b),'description':'A\x20cunning\x20explosive\x20device.','image':'../images/tokens/Smartmine.gif','category':a0_0x1fc40b(0x21a)},'mmissile':{'price':0x320,'name':a0_0x1fc40b(0x201),'description':'Heavy\x20ordinance\x20for\x20tough\x20situations','image':a0_0x1fc40b(0x20f),'category':'weapon'},'gauge18':{'price':0x320,'name':'R/Y/B\x20Keys','description':'Monitor\x20your\x20ship\x27s\x20energy\x20levels','image':'../images/tokens/gauge18.gif','category':'equipment'},'extralife':{'price':0x320,'name':'Extra\x20Life','description':'A\x20rare\x20extra\x20life\x20token.','image':'../images/tokens/Extralife.gif','category':'special'},'hostage':{'price':0x3b6,'name':'Hostage','description':'Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','image':a0_0x1fc40b(0x249),'category':'special'},'phoenix':{'price':0x3b6,'name':'Phoenix\x20Cannon','description':'Fiery\x20phoenix\x20cannon\x20token.','image':a0_0x1fc40b(0x1e1),'category':a0_0x1fc40b(0x21a)},'blob02':{'price':0x3e8,'name':'Blob\x20Token\x202','description':'Another\x20enigmatic\x20blob\x20creature','image':'../images/tokens/blob02.gif','category':'blob'},'invuln':{'price':0x5dc,'name':'Invulnerability','description':'Become\x20invincible\x20for\x20a\x20short\x20time.','image':'../images/tokens/Invuln.gif','category':'powerup'},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':'The\x20final\x20blob\x20in\x20the\x20collection','image':'../images/tokens/blob03.gif','category':a0_0x1fc40b(0x286)},'reactor':{'price':0x7d0,'name':'Reactor','description':'The\x20heart\x20of\x20every\x20mine.','image':'../images/tokens/Reactor.gif','category':a0_0x1fc40b(0x238)},'pyro':{'price':0xbb8,'name':'Pyro','description':a0_0x1fc40b(0x216),'image':'../images/tokens/Pyro.gif','category':'ship'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x426d00=a0_0x1fc40b;console['log']('🏪\x20Redeem\x20store\x20initializing...'),storeContainer=document[_0x426d00(0x234)](_0x426d00(0x26b)),pointsDisplay=document['getElementById']('user-points'),authWarning=document['getElementById'](_0x426d00(0x28f)),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0xdf139e=>{const _0x34f482=a0_0x116e;if(_0xdf139e){console['log'](_0x34f482(0x258),_0xdf139e[_0x34f482(0x200)]||_0xdf139e['email']);if(authWarning)authWarning[_0x34f482(0x229)]['display']=_0x34f482(0x1f6);if(storeContainer)storeContainer['style']['display']='block';await loadUserData(_0xdf139e),updateThemeButtons(),updateTokenButtons();}else{console['log']('❌\x20User\x20not\x20authenticated');if(authWarning)authWarning['style']['display']='block';if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x34f482(0x257)]=![];}});}async function loadUserData(_0x19f7bb){const _0x2a7b3a=a0_0x1fc40b;try{const _0x7c4e8c=doc(db,_0x2a7b3a(0x1f3),_0x19f7bb['uid']),_0x44cd7f=await getDoc(_0x7c4e8c);if(_0x44cd7f[_0x2a7b3a(0x288)]()){const _0x370ffd=_0x44cd7f[_0x2a7b3a(0x247)]();userData={'points':_0x370ffd['points']||0x0,'inventory':_0x370ffd['inventory']||[],'isAdmin':_0x370ffd['isAdmin']||![],'equippedToken':_0x370ffd[_0x2a7b3a(0x1fb)]||null},pointsDisplay&&(pointsDisplay[_0x2a7b3a(0x1f1)]=userData[_0x2a7b3a(0x1e2)]['toLocaleString']()),window['isUserAdmin']=userData['isAdmin'],userData[_0x2a7b3a(0x220)]&&(console['log'](_0x2a7b3a(0x240)),window['dispatchEvent'](new CustomEvent(_0x2a7b3a(0x203),{'detail':{'isAdmin':!![]}}))),console[_0x2a7b3a(0x259)](_0x2a7b3a(0x281)+userData['points']+',\x20Inventory:\x20'+userData['inventory'][_0x2a7b3a(0x23a)]+'\x20items,\x20Equipped:\x20'+(userData[_0x2a7b3a(0x1fb)]||'none'));}else await setDoc(_0x7c4e8c,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x19f7bb[_0x2a7b3a(0x200)]||_0x19f7bb['email']?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay['textContent']='0'),window['isUserAdmin']=![],console['log'](_0x2a7b3a(0x1e8));}catch(_0x18a419){console['error']('Error\x20loading\x20user\x20data:',_0x18a419);}}function userOwnsTheme(_0x4789d5){const _0x3072b0=a0_0x1fc40b;if(THEMES[_0x4789d5]?.['price']===0x0)return!![];return userData[_0x3072b0(0x289)][_0x3072b0(0x24f)](_0x3072b0(0x25a)+_0x4789d5);}function userOwnsToken(_0x4bb5e0){const _0x487a66=a0_0x1fc40b;return userData[_0x487a66(0x289)]['includes']('token_'+_0x4bb5e0);}function userHasTokenEquipped(_0x4cd1ea){return userData['equippedToken']===_0x4cd1ea;}function getEquippedToken(){const _0x45049c=a0_0x1fc40b;return userData[_0x45049c(0x1fb)]||null;}async function purchaseTheme(_0x1ba819){const _0x385a8d=a0_0x1fc40b,_0x5c39a4=auth['currentUser'];if(!_0x5c39a4)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes',_0x385a8d(0x26e)),![];const _0x1c472c=THEMES[_0x1ba819];if(!_0x1c472c)return console['error']('Theme\x20'+_0x1ba819+'\x20not\x20found'),![];if(userData['points']<_0x1c472c['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x1c472c['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x1ba819))return showMessage(_0x385a8d(0x26c)+_0x1c472c[_0x385a8d(0x28d)]+_0x385a8d(0x1e0),_0x385a8d(0x227)),![];try{return await processPurchase(_0x1ba819,_0x1c472c,'theme');}catch(_0x341903){return console[_0x385a8d(0x26e)]('Theme\x20purchase\x20failed:',_0x341903),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x385a8d(0x26e)),![];}}async function purchaseToken(_0x7f0c13){const _0x547ad9=a0_0x1fc40b,_0x3e7c49=auth['currentUser'];if(!_0x3e7c49)return showMessage(_0x547ad9(0x21e),'error'),![];const _0x2b5ec5=TOKENS[_0x7f0c13];if(!_0x2b5ec5)return console['error'](_0x547ad9(0x232)+_0x7f0c13+_0x547ad9(0x230)),![];if(userData['points']<_0x2b5ec5['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x2b5ec5['price']-userData[_0x547ad9(0x1e2)])+'\x20more\x20points.',_0x547ad9(0x26e)),![];if(userOwnsToken(_0x7f0c13))return showMessage('You\x20already\x20own\x20the\x20'+_0x2b5ec5['name']+_0x547ad9(0x1e9),_0x547ad9(0x227)),![];try{return await processPurchase(_0x7f0c13,_0x2b5ec5,'token');}catch(_0x4f7a60){return console['error'](_0x547ad9(0x254),_0x4f7a60),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x547ad9(0x26e)),![];}}async function processPurchase(_0x43caeb,_0x40a561,_0x31e65b){const _0x2f7674=a0_0x1fc40b,_0x462dc0=auth[_0x2f7674(0x1f7)];try{const _0x9f49ae=doc(db,_0x2f7674(0x1f3),_0x462dc0['uid']),_0x50cfae=await getDoc(_0x9f49ae);if(!_0x50cfae['exists']())return showMessage('User\x20profile\x20not\x20found',_0x2f7674(0x26e)),![];const _0x43dc0d=_0x50cfae[_0x2f7674(0x247)](),_0x1459c4=_0x43dc0d['points']||0x0,_0x35a43d=_0x43dc0d[_0x2f7674(0x289)]||[];if(_0x1459c4<_0x40a561['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x35a43d[_0x2f7674(0x24f)](_0x31e65b+'_'+_0x43caeb))return showMessage('You\x20already\x20own\x20this\x20'+_0x31e65b,_0x2f7674(0x227)),![];const _0x30e7e9=_0x1459c4-_0x40a561['price'],_0x444155=[..._0x35a43d,_0x31e65b+'_'+_0x43caeb];await updateDoc(_0x9f49ae,{'points':_0x30e7e9,'inventory':_0x444155,'lastPurchase':serverTimestamp()});if(_0x31e65b===_0x2f7674(0x266))try{const _0x565eea=doc(db,'userTokens',_0x462dc0[_0x2f7674(0x244)]),_0x2cc786=await getDoc(_0x565eea);let _0x42ae6a=[];_0x2cc786['exists']()&&(_0x42ae6a=_0x2cc786[_0x2f7674(0x247)]()[_0x2f7674(0x280)]||[]);const _0xfe1806=new Date();_0x42ae6a['push']({'tokenId':_0x43caeb,'tokenName':_0x40a561[_0x2f7674(0x28d)],'tokenImage':_0x40a561['image'],'category':_0x40a561['category'],'purchasedAt':_0xfe1806,'price':_0x40a561['price'],'equipped':![]}),await setDoc(_0x565eea,{'userId':_0x462dc0['uid'],'username':_0x43dc0d['username']||_0x462dc0[_0x2f7674(0x200)]||'Unknown','tokens':_0x42ae6a,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache==='function'&&clearTokenCache(_0x462dc0['uid']),console['log']('✅\x20Token\x20'+_0x43caeb+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0x433d46){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:',_0x433d46),_0x433d46[_0x2f7674(0x260)]==='permission-denied'?console['log']('🔧\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console['error'](_0x2f7674(0x213),_0x433d46);}try{await addDoc(collection(db,_0x2f7674(0x1f4)),{'userId':_0x462dc0['uid'],'userEmail':_0x462dc0[_0x2f7674(0x24d)],'itemId':_0x31e65b+'_'+_0x43caeb,'itemTitle':_0x40a561['name'],'price':_0x40a561['price'],'type':_0x2f7674(0x23c),'category':_0x31e65b,'timestamp':serverTimestamp()});}catch(_0x30ec15){console['warn']('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x30ec15);}return userData['points']=_0x30e7e9,userData[_0x2f7674(0x289)]=_0x444155,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x2f7674(0x1e2)]['toLocaleString']()),updateTokenButtons(),_0x31e65b==='theme'&&updateThemeButtons(),console['log'](_0x2f7674(0x272)+_0x40a561[_0x2f7674(0x28d)]+'\x20for\x20'+_0x40a561['price']+'\x20points'),showMessage('Successfully\x20purchased\x20'+_0x40a561['name']+'!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','success'),!![];}catch(_0x5b4da2){console['error']('Purchase\x20processing\x20error:',_0x5b4da2);if(_0x5b4da2['code']===_0x2f7674(0x262))showMessage(_0x2f7674(0x24a),'error');else{if(_0x5b4da2['code']==='unavailable')showMessage(_0x2f7674(0x275),'error');else _0x5b4da2[_0x2f7674(0x260)]==='unauthenticated'?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.',_0x2f7674(0x26e)):showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error');}return![];}}async function equipToken(_0x250e11){const _0x2b924a=a0_0x1fc40b,_0x53cd90=auth[_0x2b924a(0x1f7)];if(!_0x53cd90)return showMessage(_0x2b924a(0x291),'error'),![];const _0x392cda=TOKENS[_0x250e11];if(!_0x392cda)return console['error']('Token\x20'+_0x250e11+'\x20not\x20found'),![];if(!userOwnsToken(_0x250e11))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it','error'),![];try{const _0x450fc2=doc(db,'userProfiles',_0x53cd90['uid']);await updateDoc(_0x450fc2,{'equippedToken':_0x250e11,'lastTokenEquip':serverTimestamp()});try{const _0x4ab7e6=doc(db,'userTokens',_0x53cd90['uid']),_0xdc2707=await getDoc(_0x4ab7e6);if(_0xdc2707['exists']()){const _0x2e65b2=_0xdc2707['data'](),_0x20310e=_0x2e65b2['tokens']||[],_0x50d60d=_0x20310e['map'](_0x4c1cbe=>({..._0x4c1cbe,'equipped':_0x4c1cbe['tokenId']===_0x250e11}));await updateDoc(_0x4ab7e6,{'tokens':_0x50d60d,'equippedToken':_0x250e11,'lastUpdated':serverTimestamp()});}}catch(_0x1e532d){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0x1e532d);}return userData[_0x2b924a(0x1fb)]=_0x250e11,typeof clearTokenCache==='function'&&(clearTokenCache(_0x53cd90[_0x2b924a(0x244)]),clearTokenCache()),setTimeout(()=>{const _0x53865b=_0x2b924a;window[_0x53865b(0x20e)]&&typeof window['displayLadder']==='function'&&(console['log']('🔄\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x53865b(0x261)][_0x53865b(0x245)]==='function'&&window[_0x53865b(0x261)]['refreshUI']();},0x1f4),console['log']('✅\x20Equipped\x20token:\x20'+_0x392cda['name']),showMessage(_0x392cda['name']+_0x2b924a(0x265),'success'),!![];}catch(_0x124d69){return console[_0x2b924a(0x26e)](_0x2b924a(0x223),_0x124d69),_0x124d69['code']===_0x2b924a(0x262)?showMessage(_0x2b924a(0x23f),_0x2b924a(0x1e7)):showMessage(_0x2b924a(0x1ec)+_0x124d69['message'],'error'),![];}}async function unequipToken(){const _0x37fe32=a0_0x1fc40b,_0x10c27a=auth[_0x37fe32(0x1f7)];if(!_0x10c27a)return showMessage(_0x37fe32(0x1e4),_0x37fe32(0x26e)),![];if(!userData[_0x37fe32(0x1fb)])return showMessage(_0x37fe32(0x22e),'info'),![];try{const _0x47444f=doc(db,_0x37fe32(0x1f3),_0x10c27a['uid']);await updateDoc(_0x47444f,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x4f2258=doc(db,'userTokens',_0x10c27a['uid']),_0x500b27=await getDoc(_0x4f2258);if(_0x500b27[_0x37fe32(0x288)]()){const _0x3f118c=_0x500b27['data'](),_0x4b26e0=_0x3f118c['tokens']||[],_0x416124=_0x4b26e0['map'](_0x32eba8=>({..._0x32eba8,'equipped':![]}));await updateDoc(_0x4f2258,{'tokens':_0x416124,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData[_0x37fe32(0x1fb)]=null,typeof clearTokenCache===_0x37fe32(0x22a)&&(clearTokenCache(_0x10c27a['uid']),clearTokenCache()),setTimeout(()=>{const _0x29850d=_0x37fe32;window['displayLadder']&&typeof window['displayLadder']===_0x29850d(0x22a)&&(console['log'](_0x29850d(0x20d)),window[_0x29850d(0x20e)](!![])),window['RedeemStore']&&typeof window['RedeemStore']['refreshUI']===_0x29850d(0x22a)&&window['RedeemStore']['refreshUI']();},0x1f4),console['log']('✅\x20Token\x20unequipped'),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x4802e4){return console['error']('Token\x20unequip\x20failed:',_0x4802e4),showMessage(_0x37fe32(0x205)+_0x4802e4['message'],_0x37fe32(0x26e)),![];}}async function sellToken(_0x1dce6d){const _0x36805b=a0_0x1fc40b,_0x27f984=auth['currentUser'];if(!_0x27f984)return showMessage(_0x36805b(0x22c),'error'),![];if(!userData[_0x36805b(0x220)])return showMessage(_0x36805b(0x24b),'error'),![];const _0x30d960=TOKENS[_0x1dce6d];if(!_0x30d960)return console['error']('Token\x20'+_0x1dce6d+'\x20not\x20found'),![];if(!userOwnsToken(_0x1dce6d))return showMessage(_0x36805b(0x219),'error'),![];try{const _0x36284a=doc(db,'userProfiles',_0x27f984[_0x36805b(0x244)]),_0x2c13dd=await getDoc(_0x36284a),_0x4cd3bb=_0x2c13dd[_0x36805b(0x247)](),_0x2ee08c=Math['floor'](_0x30d960['price']*0.5),_0x2e45d4=(_0x4cd3bb['points']||0x0)+_0x2ee08c,_0x31280f=(_0x4cd3bb['inventory']||[])['filter'](_0x13fd98=>_0x13fd98!=='token_'+_0x1dce6d),_0x19ba25=_0x4cd3bb['equippedToken']===_0x1dce6d?null:_0x4cd3bb['equippedToken'];await updateDoc(_0x36284a,{'points':_0x2e45d4,'inventory':_0x31280f,'equippedToken':_0x19ba25,'lastSale':serverTimestamp()});const _0x404af6=doc(db,'userTokens',_0x27f984[_0x36805b(0x244)]),_0x2bef3a=await getDoc(_0x404af6);if(_0x2bef3a['exists']()){const _0x4cf3c2=_0x2bef3a[_0x36805b(0x247)](),_0x473244=_0x4cf3c2['tokens']||[],_0x44a3fc=_0x473244['filter'](_0x1d83b8=>_0x1d83b8['tokenId']!==_0x1dce6d);await updateDoc(_0x404af6,{'tokens':_0x44a3fc,'equippedToken':_0x19ba25,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,_0x36805b(0x1f4)),{'userId':_0x27f984['uid'],'userEmail':_0x27f984['email'],'itemId':_0x36805b(0x211)+_0x1dce6d,'itemTitle':_0x30d960['name'],'refund':_0x2ee08c,'originalPrice':_0x30d960['price'],'type':'sale','category':'token','timestamp':serverTimestamp()}),userData['points']=_0x2e45d4,userData['inventory']=_0x31280f,userData[_0x36805b(0x1fb)]=_0x19ba25,pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x36805b(0x236)]()),typeof clearTokenCache==='function'&&clearTokenCache(_0x27f984['uid']),console[_0x36805b(0x259)](_0x36805b(0x1e6)+_0x30d960['name']+'\x20for\x20'+_0x2ee08c+_0x36805b(0x215)),showMessage(_0x36805b(0x202)+_0x30d960['name']+_0x36805b(0x1f0)+_0x2ee08c+_0x36805b(0x206),'success'),!![];}catch(_0x1e647){return console[_0x36805b(0x26e)](_0x36805b(0x27b),_0x1e647),showMessage(_0x36805b(0x1fc)+_0x1e647['message'],'error'),![];}}function applyTheme(_0x361d2a){const _0x53cb9b=a0_0x1fc40b;if(!userOwnsTheme(_0x361d2a))return showMessage(_0x53cb9b(0x224),_0x53cb9b(0x26e)),![];return window[_0x53cb9b(0x28a)]?(window['ThemeSystem'][_0x53cb9b(0x222)](_0x361d2a),showMessage((THEMES[_0x361d2a]?.['name']||_0x361d2a)+_0x53cb9b(0x1fa),'success'),!![]):(console['error'](_0x53cb9b(0x218)),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x4b9d49=a0_0x1fc40b,_0xddd792=document[_0x4b9d49(0x1ee)]('.themes-grid');if(!_0xddd792){console['error']('Themes\x20container\x20not\x20found');return;}_0xddd792[_0x4b9d49(0x1e5)]='',Object['entries'](THEMES)['forEach'](([_0x1a2d8b,_0x448da1])=>{const _0x10c55a=_0x4b9d49,_0x130b7d=document['createElement'](_0x10c55a(0x239));_0x130b7d['className']='store-item',_0x130b7d['dataset'][_0x10c55a(0x26f)]=_0x1a2d8b,_0x130b7d['dataset'][_0x10c55a(0x24e)]='theme_'+_0x1a2d8b,_0x130b7d['dataset']['price']=_0x448da1['price'],_0x130b7d['innerHTML']=_0x10c55a(0x23b)+_0x1a2d8b+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x448da1['price']===0x0?'FREE':_0x448da1['price']+'\x20Points')+_0x10c55a(0x252)+_0x448da1['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x448da1['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xddd792['appendChild'](_0x130b7d);}),setupThemeButtons();}function buildTokenItems(){const _0x551a0e=a0_0x1fc40b,_0x42a7ff=document['querySelector'](_0x551a0e(0x22b));if(!_0x42a7ff){console['error']('Tokens\x20container\x20not\x20found');return;}_0x42a7ff[_0x551a0e(0x1e5)]='',Object['entries'](TOKENS)[_0x551a0e(0x1fd)](([_0xeda6d3,_0x4cdab5])=>{const _0x48ed62=_0x551a0e,_0x395064=document[_0x48ed62(0x23e)](_0x48ed62(0x239));_0x395064[_0x48ed62(0x22d)]='store-item\x20token-item',_0x395064['dataset'][_0x48ed62(0x266)]=_0xeda6d3,_0x395064['dataset']['itemId']=_0x48ed62(0x211)+_0xeda6d3,_0x395064['dataset']['price']=_0x4cdab5[_0x48ed62(0x271)];const _0x1695d9=userData['isAdmin']&&userOwnsToken(_0xeda6d3)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20('+Math['floor'](_0x4cdab5['price']*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x395064[_0x48ed62(0x1e5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x4cdab5[_0x48ed62(0x21c)]+_0x48ed62(0x20a)+_0x4cdab5[_0x48ed62(0x28d)]+_0x48ed62(0x214)+_0x4cdab5[_0x48ed62(0x271)]+'\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1695d9+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x42a7ff['appendChild'](_0x395064);}),setupTokenButtons();}function setupThemeButtons(){const _0x553e91=document['querySelectorAll']('.theme-select-btn');_0x553e91['forEach'](_0x5d311d=>{_0x5d311d['addEventListener']('click',async _0x438404=>{const _0x53ed73=a0_0x116e;_0x438404[_0x53ed73(0x253)]();const _0x772f2f=auth['currentUser'];if(!_0x772f2f){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes',_0x53ed73(0x26e));return;}const _0x5139e5=_0x5d311d['closest']('[data-theme]'),_0x152d09=_0x5139e5[_0x53ed73(0x28b)]['theme'],_0xe4558f=THEMES[_0x152d09];if(!_0xe4558f){console[_0x53ed73(0x26e)](_0x53ed73(0x204)+_0x152d09+'\x20not\x20found');return;}console[_0x53ed73(0x259)]('Theme\x20clicked:\x20'+_0xe4558f[_0x53ed73(0x28d)]+'\x20('+_0x152d09+')');if(_0x5d311d['disabled']){_0xe4558f['price']>0x0&&showMessage('You\x20need\x20'+_0xe4558f['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x5d311d['textContent']==='Current\x20Theme'){showMessage(_0xe4558f[_0x53ed73(0x28d)]+_0x53ed73(0x1ef),'info');return;}if(_0x5d311d['textContent']==='Apply\x20Theme'){applyTheme(_0x152d09),updateThemeButtons();return;}if(_0x5d311d['textContent']['includes'](_0x53ed73(0x274))){const _0x16a12a=window[_0x53ed73(0x287)]('Purchase\x20'+_0xe4558f[_0x53ed73(0x28d)]+'\x20theme\x20for\x20'+_0xe4558f['price']+'\x20points?');if(!_0x16a12a)return;const _0xffe820=await purchaseTheme(_0x152d09);_0xffe820&&(showMessage(_0xe4558f[_0x53ed73(0x28d)]+'\x20theme\x20purchased!','success'),applyTheme(_0x152d09),updateThemeButtons());return;}userOwnsTheme(_0x152d09)?applyTheme(_0x152d09):showMessage(_0x53ed73(0x224),'error');});}),updateThemeButtons();}function setupTokenButtons(){const _0x37f7a0=a0_0x1fc40b,_0x511227=document[_0x37f7a0(0x242)](_0x37f7a0(0x270)),_0x57d672=document['querySelectorAll'](_0x37f7a0(0x23d)),_0x34c3d7=document[_0x37f7a0(0x242)]('.token-sell-btn');_0x511227['forEach'](_0x324e43=>{_0x324e43['addEventListener']('click',async _0x208fbb=>{const _0x537964=a0_0x116e;_0x208fbb['preventDefault']();const _0x41bdfa=auth[_0x537964(0x1f7)];if(!_0x41bdfa){showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error');return;}const _0x26c3b6=_0x324e43['closest']('[data-token]'),_0x41a57a=_0x26c3b6['dataset']['token'],_0x13ce07=TOKENS[_0x41a57a];if(!_0x13ce07){console[_0x537964(0x26e)](_0x537964(0x232)+_0x41a57a+_0x537964(0x230));return;}console['log']('Token\x20clicked:\x20'+_0x13ce07['name']+'\x20('+_0x41a57a+')');if(_0x324e43['disabled']){showMessage(_0x537964(0x27c)+_0x13ce07['price']+_0x537964(0x284),'error');return;}if(_0x324e43['textContent']==='Owned'){showMessage(_0x537964(0x26c)+_0x13ce07[_0x537964(0x28d)]+'\x20token','info');return;}if(_0x324e43[_0x537964(0x1f1)]['includes'](_0x537964(0x279))||_0x324e43['textContent']['includes']('Buy')){const _0x4ad60d=window['confirm']('Purchase\x20'+_0x13ce07['name']+_0x537964(0x212)+_0x13ce07[_0x537964(0x271)]+'\x20points?');if(!_0x4ad60d)return;const _0x3895a2=await purchaseToken(_0x41a57a);_0x3895a2&&updateTokenButtons();return;}});}),_0x57d672['forEach'](_0x4b19f3=>{const _0x4839c8=_0x37f7a0;_0x4b19f3['addEventListener'](_0x4839c8(0x207),async _0x4f077b=>{const _0x1eb472=_0x4839c8;_0x4f077b['preventDefault']();const _0x2114c9=_0x4b19f3['closest'](_0x1eb472(0x278)),_0x213b7e=_0x2114c9[_0x1eb472(0x28b)]['token'],_0x2ba1f6=TOKENS[_0x213b7e];if(_0x4b19f3['textContent']==='Equipped'){const _0x10cb66=window[_0x1eb472(0x287)]('Unequip\x20'+_0x2ba1f6['name']+'?');if(!_0x10cb66)return;const _0xe3c68d=await unequipToken();_0xe3c68d&&updateTokenButtons();}else{const _0x43f6f0=window['confirm']('Equip\x20'+_0x2ba1f6['name']+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0x43f6f0)return;const _0xdd1112=await equipToken(_0x213b7e);_0xdd1112&&updateTokenButtons();}});}),_0x34c3d7['forEach'](_0x5cf6ce=>{_0x5cf6ce['addEventListener']('click',async _0xa09920=>{const _0x265113=a0_0x116e;_0xa09920['preventDefault']();const _0x546cd8=_0x5cf6ce[_0x265113(0x255)]('[data-token]'),_0x1101e3=_0x546cd8['dataset']['token'],_0x5af3f2=TOKENS[_0x1101e3],_0x241731=Math['floor'](_0x5af3f2[_0x265113(0x271)]*0.5),_0x3c3d4d=window['confirm']('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x5af3f2['name']+'\x20for\x20'+_0x241731+_0x265113(0x25b));if(!_0x3c3d4d)return;const _0x305151=await sellToken(_0x1101e3);_0x305151&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0x5945d4=a0_0x1fc40b,_0x34923e=window['ThemeSystem']?window[_0x5945d4(0x28a)]['getCurrentTheme']():'default',_0x230266=auth['currentUser'];document[_0x5945d4(0x242)]('.theme-select-btn')['forEach'](_0x129bf4=>{const _0x2a9f8=_0x5945d4,_0x46223a=_0x129bf4['closest'](_0x2a9f8(0x225)),_0x1e181e=_0x46223a[_0x2a9f8(0x28b)][_0x2a9f8(0x26f)],_0x2065df=THEMES[_0x1e181e];if(!_0x2065df)return;_0x129bf4[_0x2a9f8(0x228)]=![],_0x129bf4['style'][_0x2a9f8(0x221)]='',_0x129bf4['style'][_0x2a9f8(0x250)]='pointer',_0x129bf4['classList']['remove'](_0x2a9f8(0x276),_0x2a9f8(0x20c),'can-afford','cannot-afford','sign-in-free','sign-in-paid');if(!_0x230266){_0x2065df['price']===0x0?(_0x129bf4[_0x2a9f8(0x1f1)]='Sign\x20in\x20to\x20Apply',_0x129bf4[_0x2a9f8(0x282)]['add']('sign-in-free')):(_0x129bf4['textContent']=_0x2a9f8(0x26d),_0x129bf4[_0x2a9f8(0x228)]=!![],_0x129bf4[_0x2a9f8(0x229)]['opacity']='0.7',_0x129bf4['classList']['add'](_0x2a9f8(0x217)));return;}if(_0x1e181e===_0x34923e){_0x129bf4['textContent']='Current\x20Theme',_0x129bf4['classList'][_0x2a9f8(0x1f9)]('current-theme'),_0x129bf4[_0x2a9f8(0x228)]=!![],_0x129bf4['style']['cursor']='default';return;}if(userOwnsTheme(_0x1e181e)){_0x129bf4['textContent']=_0x2a9f8(0x21d),_0x129bf4['classList']['add'](_0x2a9f8(0x20c));return;}if(userData['points']>=_0x2065df[_0x2a9f8(0x271)]){_0x129bf4[_0x2a9f8(0x1f1)]=_0x2a9f8(0x243)+_0x2065df['price']+_0x2a9f8(0x25d),_0x129bf4['classList'][_0x2a9f8(0x1f9)]('can-afford');return;}_0x129bf4['textContent']=_0x2a9f8(0x1ed)+_0x2065df['price']+_0x2a9f8(0x25d),_0x129bf4['classList']['add'](_0x2a9f8(0x246)),_0x129bf4[_0x2a9f8(0x229)]['opacity']='0.5',_0x129bf4['disabled']=!![],_0x129bf4['style'][_0x2a9f8(0x250)]='not-allowed';});}function updateTokenButtons(){const _0x2cc9fd=a0_0x1fc40b,_0x5ba753=auth['currentUser'];document['querySelectorAll']('.token-select-btn')[_0x2cc9fd(0x1fd)](_0x25e343=>{const _0x3ccb20=_0x2cc9fd,_0x362d6d=_0x25e343['closest']('[data-token]'),_0x50e342=_0x362d6d['dataset']['token'],_0x31e6f2=TOKENS[_0x50e342],_0xf620cc=_0x362d6d['querySelector']('.token-equip-btn'),_0x4b79ef=_0x362d6d['querySelector']('.token-sell-btn');if(!_0x31e6f2)return;_0x25e343['disabled']=![],_0x25e343['style']['opacity']='',_0x25e343[_0x3ccb20(0x229)][_0x3ccb20(0x250)]=_0x3ccb20(0x248);_0xf620cc&&(_0xf620cc['style']['display']=_0x3ccb20(0x1f6),_0xf620cc['disabled']=![],_0xf620cc['style'][_0x3ccb20(0x221)]='',_0xf620cc['classList']['remove'](_0x3ccb20(0x1f2),'can-equip'));_0x4b79ef&&(_0x4b79ef[_0x3ccb20(0x229)]['display']='none');_0x25e343['classList'][_0x3ccb20(0x256)](_0x3ccb20(0x1ff),'can-afford','cannot-afford','sign-in');if(!_0x5ba753){_0x25e343['textContent']=_0x3ccb20(0x26d),_0x25e343[_0x3ccb20(0x228)]=!![],_0x25e343['style']['opacity']=_0x3ccb20(0x27d),_0x25e343['classList']['add']('sign-in');return;}if(userOwnsToken(_0x50e342)){_0x25e343['textContent']='Owned',_0x25e343[_0x3ccb20(0x282)]['add'](_0x3ccb20(0x1ff)),_0x25e343[_0x3ccb20(0x228)]=!![],_0x25e343['style']['cursor']='default',_0x25e343['style']['background']='var(--success-color,\x20#4CAF50)';_0xf620cc&&(_0xf620cc['style']['display']='block',userHasTokenEquipped(_0x50e342)?(_0xf620cc['textContent']='Equipped',_0xf620cc['classList']['add']('equipped'),_0xf620cc[_0x3ccb20(0x229)]['background']=_0x3ccb20(0x208),_0xf620cc['style']['cursor']='pointer'):(_0xf620cc['textContent']='Equip',_0xf620cc['classList']['add'](_0x3ccb20(0x24c)),_0xf620cc['style']['background']=_0x3ccb20(0x268),_0xf620cc['style']['cursor']='pointer'));_0x4b79ef&&userData['isAdmin']&&(_0x4b79ef['style']['display']='block');return;}if(userData[_0x3ccb20(0x1e2)]>=_0x31e6f2['price']){_0x25e343['textContent']='Buy\x20for\x20'+_0x31e6f2['price']+'\x20Points',_0x25e343['classList']['add']('can-afford'),_0x25e343[_0x3ccb20(0x229)]['background']='';return;}_0x25e343['textContent']='Need\x20'+_0x31e6f2['price']+'\x20Points',_0x25e343[_0x3ccb20(0x282)]['add'](_0x3ccb20(0x246)),_0x25e343['style'][_0x3ccb20(0x221)]='0.5',_0x25e343[_0x3ccb20(0x228)]=!![],_0x25e343['style']['cursor']='not-allowed',_0x25e343['style']['background']='var(--muted-color,\x20#757575)';});}function showMessage(_0x5775cf,_0x30b796='info'){const _0x37349e=a0_0x1fc40b,_0x2b70e8=document[_0x37349e(0x234)]('store-message');_0x2b70e8&&_0x2b70e8[_0x37349e(0x256)]();const _0x292167=document['createElement']('div');_0x292167['id']='store-message',_0x292167[_0x37349e(0x22d)]='store-message\x20store-message-'+_0x30b796,_0x292167['textContent']=_0x5775cf,document[_0x37349e(0x27a)]['appendChild'](_0x292167),requestAnimationFrame(()=>{const _0x435227=_0x37349e;_0x292167['classList'][_0x435227(0x1f9)]('visible');}),setTimeout(()=>{_0x292167['classList']['remove']('visible'),setTimeout(()=>{const _0x46141c=a0_0x116e;_0x292167['parentNode']&&_0x292167[_0x46141c(0x256)]();},0x12c);},0xfa0);}window[a0_0x1fc40b(0x261)]={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console['log'](a0_0x1fc40b(0x25c));