const a24_0x1a0a0c=a24_0x5663,a24_0x50b773=(function(){let _0xafe2bb=!![];return function(_0x2afe11,_0x1e69cd){const _0x511888=_0xafe2bb?function(){const _0x5cc70a=a24_0x5663;if(_0x1e69cd){const _0x237b25=_0x1e69cd[_0x5cc70a(0xf9)](_0x2afe11,arguments);return _0x1e69cd=null,_0x237b25;}}:function(){};return _0xafe2bb=![],_0x511888;};}()),a24_0x716b41=a24_0x50b773(this,function(){const _0x4e90cc=a24_0x5663;let _0x31b39d;try{const _0x330048=Function('return\x20(function()\x20'+_0x4e90cc(0xfc)+');');_0x31b39d=_0x330048();}catch(_0x180154){_0x31b39d=window;}const _0xf38582=_0x31b39d[_0x4e90cc(0xf6)]=_0x31b39d[_0x4e90cc(0xf6)]||{},_0x15b394=[_0x4e90cc(0xf7),_0x4e90cc(0xfb),'info','error','exception','table','trace'];for(let _0x5b86bc=0x0;_0x5b86bc<_0x15b394['length'];_0x5b86bc++){const _0x1108cc=a24_0x50b773['constructor'][_0x4e90cc(0x111)]['bind'](a24_0x50b773),_0x4ac8f2=_0x15b394[_0x5b86bc],_0x40664d=_0xf38582[_0x4ac8f2]||_0x1108cc;_0x1108cc['__proto__']=a24_0x50b773['bind'](a24_0x50b773),_0x1108cc['toString']=_0x40664d['toString']['bind'](_0x40664d),_0xf38582[_0x4ac8f2]=_0x1108cc;}});a24_0x716b41();import{auth,db}from'./firebase-config.js';function a24_0x5663(_0x23d324,_0x225ea5){const _0x716b41=a24_0x50c5();return a24_0x5663=function(_0x50b773,_0x74c702){_0x50b773=_0x50b773-0xdd;let _0x50c5fe=_0x716b41[_0x50b773];return _0x50c5fe;},a24_0x5663(_0x23d324,_0x225ea5);}function a24_0x50c5(){const _0x3132be=['currentFilter','teamData','classList','error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','sent-invitation','type','When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.','createdAt','loadInvitations','sentInvitations','proposedTeamName','accepted','status','querySelectorAll','<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>','success','inbox-content','location','innerHTML','#cancel-response','trim','renderInvitations','declined','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','console','log','remove','apply','textContent','warn','{}.constructor(\x22return\x20this\x22)(\x20)','style','init','respond','DOMContentLoaded','toDate','docs','setupEventListeners','Team\x20\x22','forEach','invitations','destroy','toUserId','click','find','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20','display','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toLocaleDateString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','appendChild','prototype','teamColor','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','pending','team_invite','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','createTeamFromInvitation','querySelector','fromUserId','Failed\x20to\x20','addEventListener','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22','value','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>','desc','sentUnsubscribe','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22','fromUsername'];a24_0x50c5=function(){return _0x3132be;};return a24_0x50c5();}import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class InboxManager{constructor(){const _0x4d466a=a24_0x5663;this[_0x4d466a(0xdd)]='pending',this[_0x4d466a(0x106)]=[],this['sentInvitations']=[],this['unsubscribe']=null,this['sentUnsubscribe']=null,this['pageSize']=0x14,this['lastDoc']=null,this['hasMore']=!![],this[_0x4d466a(0xfe)]();}async['init'](){auth['onAuthStateChanged'](_0x17b542=>{const _0x5e71a3=a24_0x5663;_0x17b542?(this[_0x5e71a3(0xe6)](_0x17b542['uid']),this[_0x5e71a3(0x103)]()):window[_0x5e71a3(0xef)]['href']='./login.html';});}['setupEventListeners'](){const _0x117157=a24_0x5663;document[_0x117157(0xeb)]('.filter-btn')['forEach'](_0x483a8b=>{const _0x2a0d78=_0x117157;_0x483a8b[_0x2a0d78(0x11b)]('click',()=>{const _0x29a90f=_0x2a0d78;document['querySelectorAll']('.filter-btn')['forEach'](_0x543645=>_0x543645['classList'][_0x29a90f(0xf8)]('active')),_0x483a8b[_0x29a90f(0xdf)]['add']('active'),this['currentFilter']=_0x483a8b['dataset']['filter'],this['renderInvitations']();});});}['loadInvitations'](_0x13a47c){const _0x5ad0c8=a24_0x5663,_0x72f338=collection(db,'gameInvitations');let _0x2755f3=query(_0x72f338,where(_0x5ad0c8(0x108),'==',_0x13a47c),orderBy('createdAt',_0x5ad0c8(0x11f)),limit(this['pageSize']));this['unsubscribe']=onSnapshot(_0x2755f3,_0x2b8455=>{this['invitations']=_0x2b8455['docs']['map'](_0x1b5adb=>({'id':_0x1b5adb['id'],..._0x1b5adb['data']()})),this['renderInvitations'](),this['updateNotificationCount']();});let _0x9ac566=query(_0x72f338,where(_0x5ad0c8(0x119),'==',_0x13a47c),orderBy('createdAt','desc'),limit(this['pageSize']));this['sentUnsubscribe']=onSnapshot(_0x9ac566,_0x2214f0=>{const _0x47c440=_0x5ad0c8;this[_0x47c440(0xe7)]=_0x2214f0[_0x47c440(0x102)]['map'](_0x2bbc9d=>({'id':_0x2bbc9d['id'],..._0x2bbc9d['data'](),'isSent':!![]})),this[_0x47c440(0xf3)]();});}[a24_0x1a0a0c(0xf3)](){const _0x49d5d4=a24_0x1a0a0c,_0x3d5bd3=document['getElementById'](_0x49d5d4(0xee));if(!_0x3d5bd3)return;let _0x5bbb81=[];if(this[_0x49d5d4(0xdd)]==='outbox')_0x5bbb81=this['sentInvitations'];else this[_0x49d5d4(0xdd)]==='all'?_0x5bbb81=[...this['invitations'],...this['sentInvitations']]['sort']((_0xf21786,_0x1eeeca)=>{const _0x21ede7=_0x49d5d4,_0x2e7163=_0xf21786['createdAt']?.['toDate']?_0xf21786[_0x21ede7(0xe5)][_0x21ede7(0x101)]():new Date(_0xf21786['createdAt']),_0x3dc525=_0x1eeeca['createdAt']?.['toDate']?_0x1eeeca[_0x21ede7(0xe5)]['toDate']():new Date(_0x1eeeca['createdAt']);return _0x3dc525-_0x2e7163;}):_0x5bbb81=this[_0x49d5d4(0x106)]['filter'](_0x3f47e8=>_0x3f47e8['status']===this['currentFilter']);if(_0x5bbb81['length']===0x0){const _0x54283d=this['currentFilter']==='outbox'?'sent':this['currentFilter']==='all'?'':this['currentFilter'];_0x3d5bd3[_0x49d5d4(0xf0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x54283d+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this['currentFilter']==='outbox'?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':_0x49d5d4(0xe4))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return;}_0x3d5bd3['innerHTML']=_0x5bbb81['map'](_0x191b81=>this['createInvitationCard'](_0x191b81))['join'](''),this['setupActionListeners']();}['createInvitationCard'](_0x178c0c){const _0x5ef1b4=a24_0x1a0a0c,_0x1bc357=_0x178c0c['createdAt']?.['toDate']?_0x178c0c['createdAt'][_0x5ef1b4(0x101)]():new Date(_0x178c0c['createdAt']),_0x7ed5a=this['getTimeAgo'](_0x1bc357),_0x17908c=_0x178c0c['isSent']||![];let _0x49ca49='';return _0x178c0c['type']==='team_invite'?_0x49ca49='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x178c0c['message']+_0x5ef1b4(0x113)+_0x178c0c[_0x5ef1b4(0xde)][_0x5ef1b4(0x112)]+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x178c0c['teamData']['proposedTeamName']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20•\x20Color:\x20'+_0x178c0c[_0x5ef1b4(0xde)]['teamColor']+_0x5ef1b4(0x10d):_0x49ca49='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x178c0c['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5ef1b4(0x10b)+_0x178c0c['status']+'\x20'+(_0x17908c?_0x5ef1b4(0xe2):'')+'\x22\x20data-invitation-id=\x22'+_0x178c0c['id']+_0x5ef1b4(0x116)+(_0x17908c?'To:\x20'+_0x178c0c['toUsername']:_0x178c0c[_0x5ef1b4(0x122)])+_0x5ef1b4(0xe1)+(_0x17908c?_0x5ef1b4(0xec):'')+_0x5ef1b4(0x11e)+_0x7ed5a+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x178c0c['status']+'\x22>'+_0x178c0c['status']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x49ca49+_0x5ef1b4(0x10f)+(!_0x17908c&&_0x178c0c[_0x5ef1b4(0xea)]==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x178c0c['id']+_0x5ef1b4(0x121)+_0x178c0c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x178c0c[_0x5ef1b4(0xe3)]!=='team_invite'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x178c0c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x17908c&&_0x178c0c['status']==='pending'?_0x5ef1b4(0x11c)+_0x178c0c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}['setupActionListeners'](){const _0x1e743e=a24_0x1a0a0c;document['querySelectorAll']('.action-btn')[_0x1e743e(0x105)](_0x50e3c5=>{_0x50e3c5['addEventListener']('click',async _0x179456=>{const _0xf88b3e=a24_0x5663,_0x4ddf6b=_0x50e3c5['dataset']['action'],_0x5a1d9e=_0x50e3c5['dataset']['invitationId'];_0x50e3c5['disabled']=!![];const _0x153a69=_0x50e3c5[_0xf88b3e(0xf0)];_0x50e3c5['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0x4ddf6b){case'accept':await this['updateInvitationStatus'](_0x5a1d9e,_0xf88b3e(0xe9));break;case'decline':await this['updateInvitationStatus'](_0x5a1d9e,_0xf88b3e(0xf4));break;case'cancel':await this['updateInvitationStatus'](_0x5a1d9e,'cancelled');break;case _0xf88b3e(0xff):this['openResponseModal'](_0x5a1d9e);break;}}catch(_0x19046f){console['error']('Error\x20performing\x20'+_0x4ddf6b+':',_0x19046f),alert(_0xf88b3e(0x11a)+_0x4ddf6b+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x50e3c5['disabled']=![],_0x50e3c5[_0xf88b3e(0xf0)]=_0x153a69;}});});}async['updateInvitationStatus'](_0x21309e,_0x1d51c7){const _0x2e8283=a24_0x1a0a0c;try{const _0x274565=this['invitations']['find'](_0x2e36b5=>_0x2e36b5['id']===_0x21309e);_0x274565&&_0x274565['type']===_0x2e8283(0x115)&&_0x1d51c7===_0x2e8283(0xe9)&&await this[_0x2e8283(0x117)](_0x274565);const _0x23c8af=doc(db,'gameInvitations',_0x21309e);await updateDoc(_0x23c8af,{'status':_0x1d51c7,'respondedAt':new Date()}),_0x274565&&(_0x274565['status']=_0x1d51c7,_0x274565['respondedAt']=new Date(),this['renderInvitations']());}catch(_0x233026){console['error']('Error\x20updating\x20invitation\x20status:',_0x233026);throw _0x233026;}}['openResponseModal'](_0x1bf136){const _0x2d2a11=a24_0x1a0a0c,_0x510a2d=this['invitations'][_0x2d2a11(0x10a)](_0x558643=>_0x558643['id']===_0x1bf136);if(!_0x510a2d)return;const _0x1ea438=document['createElement']('div');_0x1ea438['className']='modal-overlay',_0x1ea438[_0x2d2a11(0xf0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x510a2d['fromUsername']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x510a2d['value']+_0x2d2a11(0xf5);if(!document['getElementById']('modal-styles')){const _0x304922=document['createElement']('style');_0x304922['id']='modal-styles',_0x304922[_0x2d2a11(0xfa)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document['head']['appendChild'](_0x304922);}document['body'][_0x2d2a11(0x110)](_0x1ea438),_0x1ea438[_0x2d2a11(0x118)]('.modal-close')[_0x2d2a11(0x11b)]('click',()=>_0x1ea438[_0x2d2a11(0xf8)]()),_0x1ea438['querySelector'](_0x2d2a11(0xf1))['addEventListener']('click',()=>_0x1ea438['remove']()),_0x1ea438['addEventListener']('click',_0x1f5e51=>{if(_0x1f5e51['target']===_0x1ea438)_0x1ea438['remove']();}),_0x1ea438['querySelector']('#send-response')[_0x2d2a11(0x11b)](_0x2d2a11(0x109),()=>{const _0x4e6ccc=_0x2d2a11,_0x237c93=document['getElementById']('response-message')[_0x4e6ccc(0x11d)][_0x4e6ccc(0xf2)]();_0x237c93&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x1ea438['remove']());});}async['createTeamFromInvitation'](_0x2f94b6){const _0x563e41=a24_0x1a0a0c;try{const {createTeam:_0x5df2c2}=await import('./ladderduos.js'),_0x29226c=await _0x5df2c2(_0x2f94b6['fromUsername'],_0x2f94b6['toUsername'],_0x2f94b6['teamData']['proposedTeamName'],_0x2f94b6['teamData']['teamColor']);if(!_0x29226c[_0x563e41(0xed)])throw new Error(_0x29226c[_0x563e41(0xe0)]);alert(_0x563e41(0x104)+_0x2f94b6['teamData'][_0x563e41(0xe8)]+'\x22\x20created\x20successfully!');}catch(_0x13b81e){console['error']('Error\x20creating\x20team:',_0x13b81e);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0x13b81e['message']);}}['updateNotificationCount'](){const _0x20858b=a24_0x1a0a0c,_0x3cd704=this['invitations']['filter'](_0x56c9a8=>_0x56c9a8['status']===_0x20858b(0x114))['length'],_0x5bec11=document['getElementById']('inbox-notification');_0x5bec11&&(_0x3cd704>0x0?(_0x5bec11[_0x20858b(0xfd)]['display']='inline-block',_0x5bec11['textContent']=_0x3cd704>0x9?'9+':_0x3cd704):_0x5bec11['style'][_0x20858b(0x10c)]='none');}['getTimeAgo'](_0x2d44dd){const _0x5e094b=a24_0x1a0a0c,_0x2c0bf5=new Date(),_0x54a00c=_0x2c0bf5-_0x2d44dd,_0x4edea1=Math['floor'](_0x54a00c/(0x3e8*0x3c)),_0x1772ea=Math['floor'](_0x54a00c/(0x3e8*0x3c*0x3c)),_0x4e10ca=Math['floor'](_0x54a00c/(0x3e8*0x3c*0x3c*0x18));if(_0x4edea1<0x1)return'Just\x20now';if(_0x4edea1<0x3c)return _0x4edea1+'m\x20ago';if(_0x1772ea<0x18)return _0x1772ea+'h\x20ago';if(_0x4e10ca<0x7)return _0x4e10ca+'d\x20ago';return _0x2d44dd[_0x5e094b(0x10e)]();}[a24_0x1a0a0c(0x107)](){const _0x30f73e=a24_0x1a0a0c;this['unsubscribe']&&this['unsubscribe'](),this[_0x30f73e(0x120)]&&this['sentUnsubscribe']();}}document[a24_0x1a0a0c(0x11b)](a24_0x1a0a0c(0x100),()=>{new InboxManager();});