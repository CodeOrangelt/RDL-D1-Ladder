const a52_0x2bc947=a52_0x1550;(function(_0x40454c,_0x3f3228){const _0x210b98=a52_0x1550,_0x3a0ffd=_0x40454c();while(!![]){try{const _0x1f1c73=-parseInt(_0x210b98(0x16a))/0x1+parseInt(_0x210b98(0x162))/0x2*(parseInt(_0x210b98(0x137))/0x3)+parseInt(_0x210b98(0x139))/0x4+-parseInt(_0x210b98(0x13f))/0x5+-parseInt(_0x210b98(0x161))/0x6+-parseInt(_0x210b98(0x146))/0x7+-parseInt(_0x210b98(0x164))/0x8*(-parseInt(_0x210b98(0x15a))/0x9);if(_0x1f1c73===_0x3f3228)break;else _0x3a0ffd['push'](_0x3a0ffd['shift']());}catch(_0xe657e1){_0x3a0ffd['push'](_0x3a0ffd['shift']());}}}(a52_0x1742,0x2a2a0));function a52_0x1742(){const _0x5c5672=['push','{}.constructor(\x22return\x20this\x22)(\x20)','cancel-reset','18skxUQe','data','Error\x20resetting\x20season:','position','bind','constructor','season','1249338DDNDQU','32130otbDqu','search','3259912WcAqHB','count','reset-confirmation','prototype','warn','exception','98868hfhMig','Please\x20enter\x20your\x20password','resetSeason','players','info','return\x20(function()\x20','console','18fInOYF','click','320660Nfqeqq','eloRating','Authentication\x20error:','metadata','apply','value','1422990bmkgLt','display','error','table','username','credential','toString','1589980NrELOK','style','reset-password','(((.+)+)+)+$','addEventListener','Season\x20','seasonCount','reload','getElementById','setupEventListeners','email','none','seasons','\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.','length','Invalid\x20password\x20or\x20authentication\x20failed','docs'];a52_0x1742=function(){return _0x5c5672;};return a52_0x1742();}const a52_0x11ef20=(function(){let _0x1e032c=!![];return function(_0xfe3ca1,_0x2cbf7c){const _0xe73308=_0x1e032c?function(){const _0x191322=a52_0x1550;if(_0x2cbf7c){const _0x312e8c=_0x2cbf7c[_0x191322(0x13d)](_0xfe3ca1,arguments);return _0x2cbf7c=null,_0x312e8c;}}:function(){};return _0x1e032c=![],_0xe73308;};}()),a52_0x479ddc=a52_0x11ef20(this,function(){const _0x1970fa=a52_0x1550;return a52_0x479ddc[_0x1970fa(0x145)]()[_0x1970fa(0x163)](_0x1970fa(0x149))[_0x1970fa(0x145)]()[_0x1970fa(0x15f)](a52_0x479ddc)[_0x1970fa(0x163)](_0x1970fa(0x149));});a52_0x479ddc();const a52_0x1e6b86=(function(){let _0x1d41cb=!![];return function(_0x525ad8,_0x1187ba){const _0x1024d9=_0x1d41cb?function(){if(_0x1187ba){const _0x5dff82=_0x1187ba['apply'](_0x525ad8,arguments);return _0x1187ba=null,_0x5dff82;}}:function(){};return _0x1d41cb=![],_0x1024d9;};}()),a52_0x2dfb62=a52_0x1e6b86(this,function(){const _0x3e11ae=a52_0x1550,_0x2a69a3=function(){const _0x3edc3b=a52_0x1550;let _0x520fc9;try{_0x520fc9=Function(_0x3edc3b(0x135)+_0x3edc3b(0x158)+');')();}catch(_0x30c6b){_0x520fc9=window;}return _0x520fc9;},_0x3db3b5=_0x2a69a3(),_0x370daf=_0x3db3b5['console']=_0x3db3b5[_0x3e11ae(0x136)]||{},_0x531cb4=['log',_0x3e11ae(0x168),_0x3e11ae(0x16e),_0x3e11ae(0x141),_0x3e11ae(0x169),_0x3e11ae(0x142),'trace'];for(let _0x15c30d=0x0;_0x15c30d<_0x531cb4[_0x3e11ae(0x154)];_0x15c30d++){const _0x2aa64b=a52_0x1e6b86[_0x3e11ae(0x15f)][_0x3e11ae(0x167)][_0x3e11ae(0x15e)](a52_0x1e6b86),_0x49f8e2=_0x531cb4[_0x15c30d],_0xbe5188=_0x370daf[_0x49f8e2]||_0x2aa64b;_0x2aa64b['__proto__']=a52_0x1e6b86[_0x3e11ae(0x15e)](a52_0x1e6b86),_0x2aa64b[_0x3e11ae(0x145)]=_0xbe5188['toString'][_0x3e11ae(0x15e)](_0xbe5188),_0x370daf[_0x49f8e2]=_0x2aa64b;}});a52_0x2dfb62();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){const _0x2de91d=a52_0x1550;this[_0x2de91d(0x14f)]();}['setupEventListeners'](){const _0x50355a=a52_0x1550,_0x570807=document[_0x50355a(0x14e)]('reset-season'),_0x1b2c0c=document['getElementById']('confirm-reset'),_0x3893af=document['getElementById'](_0x50355a(0x159));_0x570807?.[_0x50355a(0x14a)](_0x50355a(0x138),()=>{const _0x31a980=_0x50355a;document[_0x31a980(0x14e)](_0x31a980(0x166))[_0x31a980(0x147)][_0x31a980(0x140)]='block';}),_0x1b2c0c?.[_0x50355a(0x14a)](_0x50355a(0x138),async()=>{const _0x452ed7=_0x50355a,_0x144917=document[_0x452ed7(0x14e)]('reset-password'),_0x272c16=auth['currentUser'];if(!_0x272c16||!_0x144917[_0x452ed7(0x13e)]){alert(_0x452ed7(0x16b));return;}try{const _0xe4f7a3=EmailAuthProvider[_0x452ed7(0x144)](_0x272c16[_0x452ed7(0x150)],_0x144917[_0x452ed7(0x13e)]);await reauthenticateWithCredential(_0x272c16,_0xe4f7a3),await this[_0x452ed7(0x16c)](),_0x144917[_0x452ed7(0x13e)]='',document['getElementById'](_0x452ed7(0x166))['style']['display']='none';}catch(_0x4d1496){alert(_0x452ed7(0x155)),console[_0x452ed7(0x141)](_0x452ed7(0x13b),_0x4d1496);}}),_0x3893af?.[_0x50355a(0x14a)](_0x50355a(0x138),()=>{const _0x20837d=_0x50355a,_0x63353b=document[_0x20837d(0x14e)](_0x20837d(0x148));_0x63353b[_0x20837d(0x13e)]='',document[_0x20837d(0x14e)]('reset-confirmation')[_0x20837d(0x147)][_0x20837d(0x140)]=_0x20837d(0x151);});}async[a52_0x2bc947(0x16c)](){const _0x27f074=a52_0x2bc947;try{const _0x1ec0bb=await getDoc(doc(db,'metadata',_0x27f074(0x14c)));let _0x234300=0x1;_0x1ec0bb['exists']()&&(_0x234300=_0x1ec0bb['data']()[_0x27f074(0x165)]+0x1);const _0x49d060=await getDocs(collection(db,_0x27f074(0x16d))),_0x33e33d={'players':[],'date':new Date(),'seasonNumber':_0x234300};for(const _0x9094cb of _0x49d060[_0x27f074(0x156)]){const _0x28ae7c=_0x9094cb[_0x27f074(0x15b)]();_0x33e33d[_0x27f074(0x16d)][_0x27f074(0x157)]({'username':_0x28ae7c[_0x27f074(0x143)],'position':_0x28ae7c[_0x27f074(0x15d)],'eloRating':_0x28ae7c[_0x27f074(0x13a)]||0x4b0}),await setDoc(doc(db,'players',_0x9094cb['id']),{..._0x28ae7c,'eloRating':0x4b0,'position':_0x28ae7c[_0x27f074(0x15d)]});}await setDoc(doc(db,_0x27f074(0x152),_0x27f074(0x160)+_0x234300),_0x33e33d),await setDoc(doc(db,_0x27f074(0x13c),_0x27f074(0x14c)),{'count':_0x234300}),alert(_0x27f074(0x14b)+_0x234300+_0x27f074(0x153)),location[_0x27f074(0x14d)]();}catch(_0x31b5a5){console[_0x27f074(0x141)](_0x27f074(0x15c),_0x31b5a5),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}function a52_0x1550(_0x43f3e2,_0x16dca7){const _0x2cde1d=a52_0x1742();return a52_0x1550=function(_0x2dfb62,_0x1e6b86){_0x2dfb62=_0x2dfb62-0x135;let _0x5f2bfb=_0x2cde1d[_0x2dfb62];return _0x5f2bfb;},a52_0x1550(_0x43f3e2,_0x16dca7);}export const seasonManager=new SeasonManager();