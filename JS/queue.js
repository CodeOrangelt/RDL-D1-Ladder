const a47_0x5e8f81=a47_0x250b,a47_0x18f223=(function(){let _0x4810ee=!![];return function(_0x48b90d,_0x4f7b5b){const _0xe1ca35=_0x4810ee?function(){if(_0x4f7b5b){const _0x31f7a2=_0x4f7b5b['apply'](_0x48b90d,arguments);return _0x4f7b5b=null,_0x31f7a2;}}:function(){};return _0x4810ee=![],_0xe1ca35;};}()),a47_0x3cc7d0=a47_0x18f223(this,function(){const _0x3d79c2=a47_0x250b,_0xc88088=function(){const _0x372f4c=a47_0x250b;let _0x32af9f;try{_0x32af9f=Function('return\x20(function()\x20'+_0x372f4c(0x96)+');')();}catch(_0x57d80b){_0x32af9f=window;}return _0x32af9f;},_0x313ae8=_0xc88088(),_0x1eb59c=_0x313ae8[_0x3d79c2(0x90)]=_0x313ae8['console']||{},_0x148769=[_0x3d79c2(0x9f),_0x3d79c2(0xa0),_0x3d79c2(0x97),'error','exception','table','trace'];for(let _0x51b274=0x0;_0x51b274<_0x148769['length'];_0x51b274++){const _0x31c029=a47_0x18f223['constructor']['prototype']['bind'](a47_0x18f223),_0x4c8a8c=_0x148769[_0x51b274],_0x16e3ae=_0x1eb59c[_0x4c8a8c]||_0x31c029;_0x31c029['__proto__']=a47_0x18f223[_0x3d79c2(0x8f)](a47_0x18f223),_0x31c029['toString']=_0x16e3ae['toString']['bind'](_0x16e3ae),_0x1eb59c[_0x4c8a8c]=_0x31c029;}});a47_0x3cc7d0();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a47_0x250b(_0x5f2fbb,_0x312830){const _0x3cc7d0=a47_0xf14a();return a47_0x250b=function(_0x18f223,_0x5629b2){_0x18f223=_0x18f223-0x8b;let _0xf14ab6=_0x3cc7d0[_0x18f223];return _0xf14ab6;},a47_0x250b(_0x5f2fbb,_0x312830);}const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x539609){const _0x3650cd=a47_0x250b,_0x42ac66=document[_0x3650cd(0x9b)](_0x3650cd(0x9d));if(!_0x42ac66)return;if(_0x539609['length']===0x0){_0x42ac66['style']['display']=_0x3650cd(0x9e);return;}_0x42ac66[_0x3650cd(0x8c)][_0x3650cd(0x95)]='block';let _0x37e0c3='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x539609['forEach'](_0x5f0ddf=>{const _0x37e6f3=_0x3650cd;_0x37e0c3+=_0x37e6f3(0x9a)+(_0x5f0ddf['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x5f0ddf['lastUpdated'])+_0x37e6f3(0x98);}),_0x37e0c3+=_0x3650cd(0x8b),_0x42ac66['innerHTML']=_0x37e0c3;}function formatQueueTime(_0xce6b47){const _0x1b1dcb=a47_0x250b;if(!_0xce6b47)return'Just\x20now';const _0x369542=_0xce6b47[_0x1b1dcb(0x8d)]?_0xce6b47['toDate']():new Date(_0xce6b47),_0x59cc28=new Date(),_0x28839a=Math[_0x1b1dcb(0x9c)]((_0x59cc28-_0x369542)/0xea60);if(_0x28839a<0x1)return'Just\x20now';return _0x28839a+'m\x20in\x20queue';}async function checkQueueTimeout(_0x2480ae){const _0xc286d7=a47_0x250b;if(!_0x2480ae[_0xc286d7(0x94)])return;const _0x4b24c7=_0x2480ae['lastUpdated']['toDate']?_0x2480ae[_0xc286d7(0x94)]['toDate']():new Date(_0x2480ae['lastUpdated']),_0x261e7c=new Date(),_0x171743=Math['floor']((_0x261e7c-_0x4b24c7)/0xea60);if(_0x171743>=0x1e)try{const _0x279694=doc(db,'readyPlayers',_0x2480ae['id']);await updateDoc(_0x279694,{'isReady':![]});}catch(_0x58d244){console[_0xc286d7(0x8e)](_0xc286d7(0x93),_0x58d244);}}function a47_0xf14a(){const _0x4c4b51=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','style','toDate','error','bind','console','Error\x20in\x20queue\x20listener:','unload','Error\x20removing\x20player\x20from\x20queue:','lastUpdated','display','{}.constructor(\x22return\x20this\x22)(\x20)','info','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','data','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','getElementById','floor','queue-container','none','log','warn'];a47_0xf14a=function(){return _0x4c4b51;};return a47_0xf14a();}const unsubscribe=onSnapshot(readyPlayersRef,_0x5b9733=>{const _0x5e6b06=[];_0x5b9733['forEach'](_0x1855ee=>{const _0x4d6496=a47_0x250b,_0x21ab01=_0x1855ee[_0x4d6496(0x99)]();if(_0x21ab01['isReady']===!![]){const _0x5374fb={'id':_0x1855ee['id'],'username':_0x21ab01['username'],'lastUpdated':_0x21ab01['lastUpdated']||new Date()};_0x5e6b06['push'](_0x5374fb),checkQueueTimeout(_0x5374fb);}}),updateQueueDisplay(_0x5e6b06);},_0x385ecd=>{const _0x4ceb78=a47_0x250b;console['error'](_0x4ceb78(0x91),_0x385ecd);});window['addEventListener'](a47_0x5e8f81(0x92),()=>{unsubscribe();});