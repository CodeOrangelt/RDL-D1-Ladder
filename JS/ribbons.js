const a51_0x491a3c=a51_0x584c,a51_0x3f0b30=(function(){let _0x563dfd=!![];return function(_0x37bd19,_0x3fca0b){const _0x44d6ee=_0x563dfd?function(){const _0x306541=a51_0x584c;if(_0x3fca0b){const _0x229245=_0x3fca0b[_0x306541(0x10b)](_0x37bd19,arguments);return _0x3fca0b=null,_0x229245;}}:function(){};return _0x563dfd=![],_0x44d6ee;};}()),a51_0x2ebf45=a51_0x3f0b30(this,function(){const _0x17f429=a51_0x584c;let _0x21222c;try{const _0x1f6455=Function(_0x17f429(0x160)+_0x17f429(0x12b)+');');_0x21222c=_0x1f6455();}catch(_0x1af6a0){_0x21222c=window;}const _0xc842a3=_0x21222c[_0x17f429(0x182)]=_0x21222c['console']||{},_0x23b7c8=['log','warn',_0x17f429(0x18c),'error','exception','table',_0x17f429(0x146)];for(let _0x29effd=0x0;_0x29effd<_0x23b7c8[_0x17f429(0x173)];_0x29effd++){const _0xe5df6f=a51_0x3f0b30['constructor']['prototype']['bind'](a51_0x3f0b30),_0x5b1afd=_0x23b7c8[_0x29effd],_0x2ce112=_0xc842a3[_0x5b1afd]||_0xe5df6f;_0xe5df6f['__proto__']=a51_0x3f0b30['bind'](a51_0x3f0b30),_0xe5df6f[_0x17f429(0x188)]=_0x2ce112[_0x17f429(0x188)]['bind'](_0x2ce112),_0xc842a3[_0x5b1afd]=_0xe5df6f;}});a51_0x2ebf45();import{auth,db}from'./firebase-config.js';import{doc,getDoc,setDoc,collection,query,where,getDocs,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const RIBBON_DEFINITIONS={'Rematch\x20Ribbon':{'description':'Beat\x20a\x20pilot\x20with\x20the\x20\x22Rematch\x22\x20subgame\x20selected','image':'../images/ribbons/Rematch.png','color':'#FF6B6B'},'Overachiever\x20Ribbon':{'description':a51_0x491a3c(0x149),'image':'../images/ribbons/Overachiever.png','color':'#96CEB4','levels':[0x64,0xc8,0x12c,0x190,0x1f4,0x258,0x2bc,0x320,0x384,0x3e8]},'Brick\x20Wall':{'description':'Amass\x20at\x20least\x2080%\x20overall\x20win\x20rate\x20percentage\x20(minimum\x2050\x20matches)','image':'../images/ribbons/BrickWall.png','color':a51_0x491a3c(0x14e),'levels':[0x50,0x55,0x5a,0x5f,0x64]},'Collector\x20Ribbon':{'description':'Hold\x20more\x20than\x205\x20ribbons\x20at\x20a\x20time','image':'../images/ribbons/Collector.png','color':a51_0x491a3c(0x148),'levels':[0x5,0xa,0xf,0x14,0x19,0x1e,0x23,0x28,0x2d,0x32]},'Sub-Gamer\x20Ribbon':{'description':'Play\x20over\x2050\x20subgame\x20matches','image':'../images/ribbons/Subgamer.png','color':'#A29BFE','levels':[0x32,0x64,0x96,0xc8,0xfa,0x12c,0x15e,0x190,0x1c2,0x1f4]},'Explorer\x20Ribbon':{'description':a51_0x491a3c(0x13f),'image':a51_0x491a3c(0x180),'color':'#55A3FF','levels':[0x14,0x28,0x3c,0x50,0x64,0x78,0x8c,0xa0,0xb4,0xc8]},'Socialite\x20Ribbon':{'description':'Played\x20at\x20least\x2010\x20unique\x20pilots','image':a51_0x491a3c(0x17a),'color':a51_0x491a3c(0x111),'levels':[0xa,0xf,0x14,0x19,0x1e,0x23,0x28,0x2d,0x32,0x37]},'Underdog\x20Ribbon':{'description':'Beat\x20a\x20pilot\x20ranked\x20higher\x20than\x20you','image':'../images/ribbons/Underdog.png','color':'#FF9500','levels':[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa]},'Domination\x20Ribbon':{'description':'Beat\x205\x20unique\x20pilots\x20in\x20a\x20rank\x20(including\x20your\x20own)','image':'../images/ribbons/Domination.png','color':'#8E44AD','levels':[0x1,0x2,0x3,0x4,0x5]},'Top\x20Bronze\x20Pilot':{'description':a51_0x491a3c(0x14f),'image':a51_0x491a3c(0x12c),'color':'#CD7F32'},'Top\x20Silver\x20Pilot':{'description':'Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Silver\x20rank','image':'../images/ribbons/toprank.png','color':'#C0C0C0'},'Top\x20Gold\x20Pilot':{'description':'Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Gold\x20rank','image':a51_0x491a3c(0x12c),'color':'#FFD700'},'Top\x20Emerald\x20Pilot':{'description':'Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Emerald\x20rank','image':a51_0x491a3c(0x12c),'color':a51_0x491a3c(0x144)}};function a51_0x3f9b(){const _0x301257=['üëë\x20NEW\x20Top\x20Rank\x20Achievement:\x20','Collector\x20Ribbon','totalMatches','evaluateAllRibbonsForPlayerOptimized','memoryCache','log','\x20underdog\x20victories\x20for\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','apply','timestamp','key','eloRating','now','docs','#FF7675','all','level','CACHE_KEY_PREFIX','winnerUsername',')\x20beat\x20','entries','ribbons','playerRibbons','setCachedMatches','evaluateRematchRibbonFromCount','username','dominatedRanks','Explorer\x20Ribbon','\x20ELO)','floor','üîç\x20Checking\x20Top\x20','get','\x20beat\x20','Sub-Gamer\x20Ribbon','removeItem','üìä\x20','assign','matchesPlayed','\x20-\x20No\x20changes\x20needed','CACHE_DURATION','{}.constructor(\x22return\x20this\x22)(\x20)','../images/ribbons/toprank.png','getCacheStats','lastCleanup','evaluateOverachieverRibbonFromCount','evaluateSubGamerRibbonFromCount','\x20or\x20','delete','data','matchCount','undefined','empty','<div\x20class=\x22ribbon-level-indicator\x20','wins','getPlayerDataCached','loserUsername','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22ribbon-image\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27block\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-fallback\x22\x20style=\x22display:\x20none;\x20background:\x20','playersD2','Error\x20getting\x20player\x20ribbons:','Socialite\x20Ribbon','Played\x20at\x20least\x2020\x20unique\x20maps','evaluateDominationRibbonFromRanks','evaluateExplorerRibbonFromCount','matchCache','\x20-\x20Level\x20','#50C878','üéØ\x20Found\x20','trace','clearOldCache','#6C5CE7','Played\x20over\x20100\x20matches','players','toFixed','<i\x20class=\x22fas\x20fa-star\x20ribbon-device\x20bronze-star\x22></i>','Standard','#F0932B','Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Bronze\x20rank','replace','rating','getCachedData','evaluateUnderdogRibbonFromCount','approvedMatchesD2','setItem','Overachiever\x20Ribbon','savePlayerRibbonsOptimized','keys','size','\x20in\x20','add','min','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','findIndex','return\x20(function()\x20','has','üéØ\x20UNDERDOG\x20VICTORY:\x20','isUnderdogVictoryFast','getItem','setCachedData','subgameMatches','BATCH_DELAY','mapPlayed','üìä\x20Bulk\x20loaded\x20','uniqueOpponents','bulkLoadPlayerData','stringify','Silver','%\x20win\x20rate\x20over\x20','startsWith',';\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','invalidatePlayerCache','evaluateAllRibbonsFromData','length','üéØ\x20UNDERDOG:\x20','levels','üíæ\x20Saving\x20','uniqueMaps','push','endsWith','../images/ribbons/Socialite.png','underdogWins','Rematch','isUnderdogVictory','Brick\x20Wall','subgameType','../images/ribbons/Explorer.png','Rematch\x20Ribbon','console','approvedMatchesD3','error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','üéØ\x20Cache\x20hit\x20(matches)\x20for\x20','batchTimer','toString','Underdog\x20Ribbon','rematchWins','‚ùå\x20Error\x20fetching\x20matches:','info','Bronze','parse'];a51_0x3f9b=function(){return _0x301257;};return a51_0x3f9b();}export const RIBBON_CSS='\x0a/*\x20Stats\x20integration\x20styles\x20*/\x0a.ribbon-section\x20{\x0a\x20\x20\x20\x20grid-column:\x201\x20/\x20-1;\x0a\x20\x20\x20\x20margin-top:\x201rem;\x0a}\x0a\x0a.ribbon-stat-item.full-width\x20{\x0a\x20\x20\x20\x20grid-column:\x201\x20/\x20-1;\x0a\x20\x20\x20\x20margin-bottom:\x200;\x0a}\x0a\x0a/*\x20Military\x20Ribbon\x20Rack\x20Styling\x20-\x20NO\x20OUTER\x20CONTAINER\x20*/\x0a.ribbon-rack-inline\x20{\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20gap:\x208px;\x0a\x20\x20\x20\x20padding:\x200;\x0a\x20\x20\x20\x20background:\x20transparent;\x0a\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20box-shadow:\x20none;\x0a\x20\x20\x20\x20margin-top:\x2020px;\x0a\x20\x20\x20\x20max-width:\x20100%;\x0a\x20\x20\x20\x20align-items:\x20flex-start;\x0a}\x0a\x0a.ribbon-rack-empty-inline\x20{\x0a\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20padding:\x2060px\x2040px;\x0a\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.3);\x0a\x20\x20\x20\x20border-radius:\x2012px;\x0a\x20\x20\x20\x20border:\x202px\x20solid\x20rgba(255,\x20255,\x20255,\x200.1);\x0a\x20\x20\x20\x20margin-top:\x2020px;\x0a}\x0a\x0a.empty-rack-text\x20{\x0a\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20font-style:\x20italic;\x0a\x20\x20\x20\x20font-size:\x201.2rem;\x0a}\x0a\x0a/*\x20Ribbon\x20Rows\x20*/\x0a.ribbon-row\x20{\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20gap:\x206px;\x0a\x20\x20\x20\x20margin-bottom:\x206px;\x0a\x20\x20\x20\x20justify-content:\x20flex-start;\x0a}\x0a\x0a.ribbon-row:nth-child(even)\x20{\x0a\x20\x20\x20\x20margin-left:\x2060px;\x0a}\x0a\x0a/*\x20Individual\x20Military\x20Ribbon\x20Styling\x20-\x20FIXED\x20OVERFLOW\x20FOR\x20LEVEL\x20INDICATOR\x20*/\x0a.military-ribbon\x20{\x0a\x20\x20\x20\x20position:\x20relative;\x0a\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20transition:\x20transform\x200.3s\x20ease;\x0a\x20\x20\x20\x20flex-shrink:\x200;\x0a\x20\x20\x20\x20width:\x20190px;\x0a\x20\x20\x20\x20height:\x2060px;\x0a\x20\x20\x20\x20border:\x203px\x20solid\x20#333;\x0a\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20overflow:\x20visible;\x20/*\x20Changed\x20from\x20hidden\x20to\x20visible\x20*/\x0a\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.8);\x0a\x20\x20\x20\x20margin:\x2012px\x2012px\x2012px\x200;\x20/*\x20Added\x20margin\x20to\x20prevent\x20clipping\x20*/\x0a}\x0a\x0a.military-ribbon:hover\x20{\x0a\x20\x20\x20\x20transform:\x20translateY(-4px);\x0a\x20\x20\x20\x20z-index:\x2010;\x0a}\x0a\x0a/*\x20Ribbon\x20image\x20container\x20to\x20handle\x20the\x20actual\x20overflow\x20*/\x0a.ribbon-image-container\x20{\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20border-radius:\x201px;\x0a}\x0a\x0a.ribbon-image\x20{\x0a\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20object-fit:\x20cover;\x0a\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20image-rendering:\x20crisp-edges;\x0a}\x0a\x0a.ribbon-fallback\x20{\x0a\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20text-shadow:\x200\x202px\x204px\x20rgba(0,0,0,0.8);\x0a\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20line-height:\x201;\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20left:\x200;\x0a}\x0a\x0a.ribbon-name\x20{\x0a\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20color:\x20rgba(255,\x20255,\x20255,\x200.9);\x0a\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20line-height:\x201.2;\x0a\x20\x20\x20\x20margin-top:\x206px;\x0a\x20\x20\x20\x20max-width:\x20120px;\x0a\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20text-overflow:\x20ellipsis;\x0a\x20\x20\x20\x20white-space:\x20nowrap;\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20bottom:\x20-24px;\x0a\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20transform:\x20translateX(-50%);\x0a\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20font-weight:\x20500;\x0a}\x0a\x0a.military-ribbon:hover\x20.ribbon-name\x20{\x0a\x20\x20\x20\x20display:\x20block;\x0a}\x0a\x0a.ribbon-devices\x20{\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20right:\x206px;\x0a\x20\x20\x20\x20transform:\x20translateY(-50%);\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20gap:\x203px;\x0a\x20\x20\x20\x20z-index:\x205;\x0a}\x0a\x0a.ribbon-device\x20{\x0a\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20text-shadow:\x200\x200\x204px\x20rgba(0,0,0,0.9);\x0a\x20\x20\x20\x20filter:\x20drop-shadow(0\x202px\x204px\x20rgba(0,0,0,0.8));\x0a}\x0a\x0a.bronze-star\x20{\x0a\x20\x20\x20\x20color:\x20#CD7F32;\x0a}\x0a\x0a.silver-star\x20{\x0a\x20\x20\x20\x20color:\x20#C0C0C0;\x0a}\x0a\x0a.gold-star\x20{\x0a\x20\x20\x20\x20color:\x20#FFD700;\x0a}\x0a\x0a/*\x20Level\x20indicator\x20-\x20NOW\x20FULLY\x20VISIBLE\x20*/\x0a.ribbon-level-indicator\x20{\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20top:\x20-8px;\x0a\x20\x20\x20\x20right:\x20-8px;\x0a\x20\x20\x20\x20background:\x20#FFD700;\x0a\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20border-radius:\x2050%;\x0a\x20\x20\x20\x20width:\x2024px;\x0a\x20\x20\x20\x20height:\x2024px;\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20border:\x203px\x20solid\x20#FFF;\x0a\x20\x20\x20\x20box-shadow:\x200\x204px\x208px\x20rgba(0,0,0,0.7);\x0a\x20\x20\x20\x20z-index:\x206;\x0a}\x0a\x0a/*\x20Custom\x20tooltip\x20-\x20only\x20this\x20one\x20will\x20show\x20*/\x0a.military-ribbon::before\x20{\x0a\x20\x20\x20\x20content:\x20attr(data-tooltip);\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20bottom:\x20100%;\x0a\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20transform:\x20translateX(-50%);\x0a\x20\x20\x20\x20background:\x20rgba(0,0,0,0.95);\x0a\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20padding:\x208px\x2012px;\x0a\x20\x20\x20\x20border-radius:\x206px;\x0a\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20white-space:\x20nowrap;\x0a\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20transition:\x20opacity\x200.3s;\x0a\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20margin-bottom:\x208px;\x0a\x20\x20\x20\x20border:\x201px\x20solid\x20rgba(255,\x20255,\x20255,\x200.2);\x0a}\x0a\x0a.military-ribbon:hover::before\x20{\x0a\x20\x20\x20\x20opacity:\x201;\x0a}\x0a\x0a/*\x20Responsive\x20adjustments\x20*/\x0a@media\x20(max-width:\x201024px)\x20{\x0a\x20\x20\x20\x20.military-ribbon\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2034px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x208px\x208px\x208px\x200;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-device\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-level-indicator\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x20-6px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20right:\x20-6px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-row:nth-child(even)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-left:\x2052px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-name\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x20-20px;\x0a\x20\x20\x20\x20}\x0a}\x0a\x0a@media\x20(max-width:\x20768px)\x20{\x0a\x20\x20\x20\x20.military-ribbon\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2080px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2028px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x206px\x206px\x206px\x200;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-device\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2010px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-level-indicator\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2018px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2018px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x209px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x20-5px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20right:\x20-5px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-row:nth-child(even)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-left:\x2042px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-name\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2011px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x20-18px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-rack-inline\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gap:\x205px;\x0a\x20\x20\x20\x20}\x0a}\x0a\x0a@media\x20(max-width:\x20480px)\x20{\x0a\x20\x20\x20\x20.military-ribbon\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2070px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2024px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x205px\x205px\x205px\x200;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-row:nth-child(even)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-left:\x2036px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-rack-inline\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gap:\x204px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-level-indicator\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x20-4px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20right:\x20-4px;\x0a\x20\x20\x20\x20}\x0a}\x0a\x0a.stats-grid\x20.ribbon-section\x20{\x0a\x20\x20\x20\x20background:\x20transparent;\x0a\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20padding:\x200;\x0a}\x0a\x0a.stats-grid\x20.ribbon-stat-item\x20{\x0a\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.3);\x0a\x20\x20\x20\x20padding:\x2025px;\x0a\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20text-align:\x20center;\x0a}\x0a\x0a.stats-grid\x20.ribbon-stat-item\x20.stat-label\x20{\x0a\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20text-transform:\x20uppercase;\x0a\x20\x20\x20\x20opacity:\x200.9;\x0a\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20color:\x20rgba(255,\x20255,\x20255,\x200.95);\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a}\x0a\x0a.ribbon-level-indicator.level-1\x20{\x20background:\x20#808080;\x20}\x0a.ribbon-level-indicator.level-2\x20{\x20background:\x20#CD7F32;\x20}\x0a.ribbon-level-indicator.level-3\x20{\x20background:\x20#b9f1fc;\x20}\x0a.ribbon-level-indicator.level-4\x20{\x20background:\x20#FFD700;\x20}\x0a.ribbon-level-indicator.level-5-plus\x20{\x20background:\x20#50C878;\x20}\x0a';class RibbonCacheManager{constructor(){const _0xdc1ac=a51_0x491a3c;this['memoryCache']=new Map(),this[_0xdc1ac(0x12a)]=0x3c*0x3c*0x3e8,this['CACHE_KEY_PREFIX']='ribbon_cache_',this['lastCleanup']=Date['now'](),this['CLEANUP_INTERVAL']=0x1e*0x3c*0x3e8;}['getCacheKey'](_0xee5683,_0x2bc301){const _0x451d22=a51_0x491a3c;return''+this[_0x451d22(0x114)]+_0xee5683+'_'+_0x2bc301;}[a51_0x491a3c(0x152)](_0xb8cf2e,_0x45a9f7){const _0x3a7da3=a51_0x491a3c;this['autoCleanup']();const _0x48febb=this['getCacheKey'](_0xb8cf2e,_0x45a9f7);if(this['memoryCache']['has'](_0x48febb)){const _0x37129d=this[_0x3a7da3(0x107)]['get'](_0x48febb);if(Date[_0x3a7da3(0x10f)]()-_0x37129d[_0x3a7da3(0x10c)]<this['CACHE_DURATION'])return console['log']('üöÄ\x20Cache\x20hit\x20(memory)\x20for\x20'+_0xb8cf2e),_0x37129d['data'];this['memoryCache']['delete'](_0x48febb);}const _0x56bc29=localStorage['getItem'](_0x48febb);if(_0x56bc29)try{const _0x53c3c6=JSON[_0x3a7da3(0x18e)](_0x56bc29);if(Date['now']()-_0x53c3c6[_0x3a7da3(0x10c)]<this['CACHE_DURATION'])return this['memoryCache']['set'](_0x48febb,{'data':_0x53c3c6['ribbons'],'timestamp':_0x53c3c6[_0x3a7da3(0x10c)],'matchCount':_0x53c3c6['matchCount']}),console['log']('üíæ\x20Cache\x20hit\x20(localStorage)\x20for\x20'+_0xb8cf2e),_0x53c3c6[_0x3a7da3(0x118)];localStorage['removeItem'](_0x48febb);}catch(_0x4bf910){localStorage[_0x3a7da3(0x125)](_0x48febb);}return null;}[a51_0x491a3c(0x165)](_0x47ae1d,_0x2f6b13,_0x22a08b,_0x29b98a){const _0x9c0e56=a51_0x491a3c,_0x81f43f=this['getCacheKey'](_0x47ae1d,_0x2f6b13),_0x37b13d=Date[_0x9c0e56(0x10f)]();this['memoryCache']['set'](_0x81f43f,{'data':_0x22a08b,'timestamp':_0x37b13d,'matchCount':_0x29b98a});try{const _0x5f904f={'ribbons':_0x22a08b,'matchCount':_0x29b98a,'timestamp':_0x37b13d,'version':0x3};localStorage[_0x9c0e56(0x155)](_0x81f43f,JSON[_0x9c0e56(0x16c)](_0x5f904f));}catch(_0x2e358f){this[_0x9c0e56(0x147)]();try{localStorage['setItem'](_0x81f43f,JSON['stringify'](data));}catch(_0x2087af){}}}['shouldRefreshCache'](_0x477a09,_0x3c3c93,_0x6e4b85){const _0x12eba6=a51_0x491a3c,_0x2d23b=this['getCacheKey'](_0x477a09,_0x3c3c93);if(this['memoryCache']['has'](_0x2d23b)){const _0x20b1ff=this['memoryCache'][_0x12eba6(0x122)](_0x2d23b);return _0x20b1ff['matchCount']!==_0x6e4b85;}const _0x559936=localStorage['getItem'](_0x2d23b);if(_0x559936)try{const _0x24023d=JSON[_0x12eba6(0x18e)](_0x559936);return _0x24023d[_0x12eba6(0x134)]!==_0x6e4b85;}catch(_0x15dba4){return!![];}return!![];}[a51_0x491a3c(0x171)](_0x305c76,_0x16a96a){const _0x292077=this['getCacheKey'](_0x305c76,_0x16a96a);this['memoryCache']['delete'](_0x292077),localStorage['removeItem'](_0x292077),console['log']('üóëÔ∏è\x20Invalidated\x20cache\x20for\x20'+_0x305c76+'\x20('+_0x16a96a+')\x20-\x20new\x20match\x20detected');}['autoCleanup'](){const _0x482b0a=a51_0x491a3c,_0x511d63=Date[_0x482b0a(0x10f)]();_0x511d63-this['lastCleanup']>this['CLEANUP_INTERVAL']&&(this['cleanup'](),this[_0x482b0a(0x12e)]=_0x511d63);}['cleanup'](){const _0x31aa59=a51_0x491a3c,_0x3dfdab=Date[_0x31aa59(0x10f)]();let _0xf040b9=0x0,_0x473a32=0x0;for(const [_0xc06c99,_0x1c1899]of this['memoryCache'][_0x31aa59(0x117)]()){_0x3dfdab-_0x1c1899['timestamp']>this[_0x31aa59(0x12a)]&&(this['memoryCache']['delete'](_0xc06c99),_0xf040b9++);}for(let _0x8366cb=localStorage[_0x31aa59(0x173)]-0x1;_0x8366cb>=0x0;_0x8366cb--){const _0x389f93=localStorage[_0x31aa59(0x10d)](_0x8366cb);if(_0x389f93&&_0x389f93[_0x31aa59(0x16f)](this[_0x31aa59(0x114)]))try{const _0x59fb8a=JSON[_0x31aa59(0x18e)](localStorage[_0x31aa59(0x164)](_0x389f93));_0x3dfdab-_0x59fb8a[_0x31aa59(0x10c)]>this['CACHE_DURATION']&&(localStorage['removeItem'](_0x389f93),_0x473a32++);}catch(_0x153e01){localStorage['removeItem'](_0x389f93),_0x473a32++;}}}['clearOldCache'](){const _0x397b57=a51_0x491a3c,_0x119699=[];for(let _0x3463a9=0x0;_0x3463a9<localStorage[_0x397b57(0x173)];_0x3463a9++){const _0x2e82f6=localStorage['key'](_0x3463a9);if(_0x2e82f6&&_0x2e82f6['startsWith'](this[_0x397b57(0x114)]))try{const _0x3e9c70=JSON['parse'](localStorage['getItem'](_0x2e82f6));_0x119699['push']({'key':_0x2e82f6,'timestamp':_0x3e9c70[_0x397b57(0x10c)]});}catch(_0x5787e7){localStorage[_0x397b57(0x125)](_0x2e82f6);}}_0x119699['sort']((_0x295e2b,_0x31eb9f)=>_0x295e2b['timestamp']-_0x31eb9f['timestamp']);const _0xf02e99=Math[_0x397b57(0x120)](_0x119699['length']/0x2);for(let _0xc46b90=0x0;_0xc46b90<_0xf02e99;_0xc46b90++){localStorage['removeItem'](_0x119699[_0xc46b90][_0x397b57(0x10d)]);}}['getCacheStats'](){const _0x2f7329=a51_0x491a3c;return{'memoryEntries':this['memoryCache'][_0x2f7329(0x159)],'lastCleanup':new Date(this['lastCleanup'])['toLocaleTimeString']()};}}class MatchCacheManager{constructor(){const _0x20752c=a51_0x491a3c;this['matchCache']=new Map(),this['CACHE_DURATION']=0xf*0x3c*0x3e8,this['lastCleanup']=Date[_0x20752c(0x10f)]();}['getCachedMatches'](_0x59bbf2,_0x9d2c33){const _0x3a00d2=a51_0x491a3c;this['autoCleanup']();const _0x587157=_0x59bbf2+'_'+_0x9d2c33,_0x1d2e8a=this[_0x3a00d2(0x142)]['get'](_0x587157);if(_0x1d2e8a&&Date['now']()-_0x1d2e8a['timestamp']<this['CACHE_DURATION'])return console['log'](_0x3a00d2(0x186)+_0x59bbf2),_0x1d2e8a['matches'];return _0x1d2e8a&&this[_0x3a00d2(0x142)][_0x3a00d2(0x132)](_0x587157),null;}['setCachedMatches'](_0x42f531,_0x5f3d22,_0x1af0ce){const _0x129b5d=_0x42f531+'_'+_0x5f3d22;this['matchCache']['set'](_0x129b5d,{'matches':_0x1af0ce,'timestamp':Date['now']()});}['autoCleanup'](){const _0x253017=a51_0x491a3c,_0x115bce=Date['now']();if(_0x115bce-this['lastCleanup']>0x5*0x3c*0x3e8){let _0x522898=0x0;for(const [_0x406517,_0x1c6530]of this['matchCache'][_0x253017(0x117)]()){_0x115bce-_0x1c6530['timestamp']>this['CACHE_DURATION']&&(this['matchCache']['delete'](_0x406517),_0x522898++);}this['lastCleanup']=_0x115bce;}}['getCacheStats'](){return{'entries':this['matchCache']['size'],'lastCleanup':new Date(this['lastCleanup'])['toLocaleTimeString']()};}}class RibbonSystem{constructor(){const _0x2b4356=a51_0x491a3c;this['pendingEvaluations']=new Map(),this[_0x2b4356(0x187)]=null,this[_0x2b4356(0x167)]=0x32,this['playerDataCache']=new Map();}async['bulkLoadPlayerData'](_0x13b83c,_0x411f75){const _0x4a170a=a51_0x491a3c,_0x83f2dd=_0x411f75==='D1'?_0x4a170a(0x14a):_0x411f75==='D2'?'playersD2':'playersD3',_0x42196f=collection(db,_0x83f2dd),_0x19e0ff=await getDocs(_0x42196f),_0x1593fb=new Map();return _0x19e0ff['forEach'](_0x558823=>{const _0x237417=_0x4a170a,_0x599b03=_0x558823['data']();_0x599b03['username']&&(_0x599b03['eloRating']!==undefined&&(_0x599b03[_0x237417(0x151)]=_0x599b03['eloRating']),_0x1593fb['set'](_0x599b03['username'],_0x599b03));}),console['log'](_0x4a170a(0x169)+_0x1593fb['size']+'\x20players\x20from\x20'+_0x83f2dd),_0x1593fb;}async['evaluateAllRibbonsFromData'](_0x378a57,_0x1f2406,_0x305c53,_0x52ae29){const _0x3dd8cc=a51_0x491a3c,_0x589d38={},_0x37cd65=_0x1f2406[_0x3dd8cc(0x11c)],_0x425b8e={'totalMatches':_0x378a57[_0x3dd8cc(0x173)],'wins':0x0,'rematchWins':0x0,'subgameMatches':0x0,'uniqueMaps':new Set(),'uniqueOpponents':new Set(),'underdogWins':0x0,'dominatedRanks':new Set()},_0x2fd684=new Set();_0x378a57[_0x3dd8cc(0x15d)](_0x566f8b=>{const _0x3aae3a=_0x3dd8cc,_0xe4119d=_0x566f8b['winnerUsername']===_0x37cd65,_0x1865cb=_0xe4119d?_0x566f8b['loserUsername']:_0x566f8b['winnerUsername'];if(_0x1865cb)_0x2fd684[_0x3aae3a(0x15b)](_0x1865cb);}),console[_0x3dd8cc(0x108)]('üöÄ\x20Bulk\x20loading\x20'+_0x2fd684['size']+'\x20player\x20records\x20for\x20underdog\x20calculations...');const _0x12535b=await this['bulkLoadPlayerData']([..._0x2fd684,_0x37cd65],_0x52ae29),_0x2517f1=_0x12535b['get'](_0x37cd65);!_0x2517f1&&console['log']('‚ö†Ô∏è\x20No\x20current\x20player\x20data\x20found\x20for\x20'+_0x37cd65);const _0x327ebb={0x0:new Set(),0x1:new Set(),0x2:new Set(),0x3:new Set(),0x4:new Set()};_0x378a57['forEach'](_0x2acab3=>{const _0x16d88b=_0x3dd8cc,_0x94bb2e=_0x2acab3['winnerUsername']===_0x37cd65,_0x2c971e=_0x94bb2e?_0x2acab3['loserUsername']:_0x2acab3[_0x16d88b(0x115)];if(_0x94bb2e){_0x425b8e['wins']++;_0x2acab3['subgameType']==='Rematch'&&_0x425b8e[_0x16d88b(0x18a)]++;this[_0x16d88b(0x163)](_0x2acab3,_0x37cd65,_0x2517f1,_0x12535b)&&_0x425b8e[_0x16d88b(0x17b)]++;const _0x4a053c=_0x12535b[_0x16d88b(0x122)](_0x2c971e);if(_0x4a053c){const _0x44e414=_0x4a053c['eloRating']||0x0,_0x3692b0=getPlayerRankTier(_0x44e414);_0x327ebb[_0x3692b0][_0x16d88b(0x15b)](_0x2c971e);}}_0x2acab3['subgameType']&&_0x2acab3['subgameType']!=='Standard'&&_0x425b8e[_0x16d88b(0x166)]++,_0x2acab3['mapPlayed']&&_0x425b8e['uniqueMaps'][_0x16d88b(0x15b)](_0x2acab3[_0x16d88b(0x168)]),_0x2c971e&&_0x425b8e['uniqueOpponents']['add'](_0x2c971e);}),Object['keys'](_0x327ebb)[_0x3dd8cc(0x15d)](_0x48beab=>{_0x327ebb[_0x48beab]['size']>=0x5&&_0x425b8e['dominatedRanks']['add'](parseInt(_0x48beab));}),console[_0x3dd8cc(0x108)](_0x3dd8cc(0x145)+_0x425b8e['underdogWins']+_0x3dd8cc(0x109)+_0x37cd65),console['log']('üëë\x20Dominated\x20'+_0x425b8e['dominatedRanks']['size']+'\x20ranks:\x20['+Array['from'](_0x425b8e[_0x3dd8cc(0x11d)])['map'](_0x1ad682=>getRankTierName(_0x1ad682))['join'](',\x20')+']');const _0x20b69a=_0x425b8e['totalMatches']>0x0?_0x425b8e[_0x3dd8cc(0x138)]/_0x425b8e['totalMatches']*0x64:0x0,_0x563fb9=[['Overachiever\x20Ribbon',this['evaluateOverachieverRibbonFromCount'](_0x425b8e[_0x3dd8cc(0x105)],_0x305c53)],['Rematch\x20Ribbon',this['evaluateRematchRibbonFromCount'](_0x425b8e['rematchWins'],_0x305c53)],[_0x3dd8cc(0x124),this[_0x3dd8cc(0x130)](_0x425b8e['subgameMatches'],_0x305c53)],[_0x3dd8cc(0x11e),this[_0x3dd8cc(0x141)](_0x425b8e[_0x3dd8cc(0x177)]['size'],_0x305c53)],['Socialite\x20Ribbon',this['evaluateSocialiteRibbonFromCount'](_0x425b8e['uniqueOpponents']['size'],_0x305c53)],['Brick\x20Wall',this['evaluateBrickWallRibbonFromWinRate'](_0x20b69a,_0x305c53,_0x425b8e['totalMatches'])],['Underdog\x20Ribbon',this['evaluateUnderdogRibbonFromCount'](_0x425b8e[_0x3dd8cc(0x17b)],_0x305c53)],['Domination\x20Ribbon',this['evaluateDominationRibbonFromRanks'](_0x425b8e['dominatedRanks'][_0x3dd8cc(0x159)],_0x305c53)]];_0x563fb9['forEach'](([_0x47f15d,_0x1be742])=>{_0x1be742&&(_0x589d38[_0x47f15d]=_0x1be742);});const _0xf40b23=Object['keys'](_0x305c53)[_0x3dd8cc(0x173)]+Object['keys'](_0x589d38)[_0x3dd8cc(0x173)],_0x674e0f=this['evaluateCollectorRibbonFromCount'](_0xf40b23,_0x305c53);return _0x674e0f&&(_0x589d38[_0x3dd8cc(0x104)]=_0x674e0f),_0x589d38;}[a51_0x491a3c(0x140)](_0x2234f1,_0x3ab639){const _0x5428c9=a51_0x491a3c;if(_0x2234f1===0x0)return null;const _0x59a815=_0x3ab639['Domination\x20Ribbon']||{'level':0x0};if(_0x2234f1>_0x59a815[_0x5428c9(0x113)]){const _0x40e4cb=[];for(let _0x2c86a7=0x0;_0x2c86a7<_0x2234f1;_0x2c86a7++){_0x40e4cb['push'](getRankTierName(_0x2c86a7));}return console['log']('üëë\x20Domination\x20Ribbon\x20awarded:\x20Level\x20'+_0x59a815['level']+'\x20‚Üí\x20'+_0x2234f1+'\x20(Dominated:\x20'+_0x40e4cb['join'](',\x20')+')'),{'level':_0x2234f1,'awardedAt':new Date(),'dominatedRanks':_0x40e4cb};}return null;}async['checkTopRankStatus'](_0x48aa62,_0x5533f0){const _0x5ea8fa=a51_0x491a3c;try{const _0x1dc041=_0x5533f0==='D1'?'players':_0x5533f0==='D2'?'playersD2':'playersD3',_0x7da99f=await this[_0x5ea8fa(0x139)](_0x48aa62,_0x5533f0);if(!_0x7da99f||_0x7da99f['eloRating']===undefined)return console['log']('‚ùå\x20No\x20ELO\x20rating\x20data\x20for\x20'+_0x48aa62),null;const _0x126cd5=_0x7da99f['eloRating'],_0x268e8b=getPlayerRankTier(_0x126cd5),_0x5224ab=getRankTierName(_0x268e8b);if(_0x5224ab==='Unranked')return console['log']('‚ùå\x20'+_0x48aa62+'\x20is\x20Unranked\x20('+_0x126cd5+_0x5ea8fa(0x11f)),null;console[_0x5ea8fa(0x108)](_0x5ea8fa(0x121)+_0x5224ab+'\x20status\x20for\x20'+_0x48aa62+'\x20('+_0x126cd5+'\x20ELO)');const _0x36c49b=collection(db,_0x1dc041),_0x33a44c=await getDocs(_0x36c49b);let _0x52aa8b=null,_0x21cab9=-0x1,_0x37efb5=0x0;_0x33a44c['forEach'](_0x2529b6=>{const _0x3083ff=_0x5ea8fa,_0x2a025a=_0x2529b6['data'](),_0x116469=_0x2a025a[_0x3083ff(0x10e)]||0x0,_0x5dc40a=getPlayerRankTier(_0x116469);_0x5dc40a===_0x268e8b&&(_0x37efb5++,_0x116469>_0x21cab9&&(_0x21cab9=_0x116469,_0x52aa8b=_0x2a025a[_0x3083ff(0x11c)]));});const _0x1304ad=_0x52aa8b===_0x48aa62;return console[_0x5ea8fa(0x108)](_0x5ea8fa(0x126)+_0x5224ab+'\x20Tier:\x20'+_0x37efb5+'\x20players,\x20Top:\x20'+_0x52aa8b+'\x20('+_0x21cab9+'\x20ELO),\x20'+_0x48aa62+'\x20is\x20#1:\x20'+_0x1304ad),_0x1304ad?_0x5224ab:null;}catch(_0x58bb32){return console['error']('Error\x20checking\x20top\x20rank\x20status:',_0x58bb32),null;}}async['evaluateTopRankRibbon'](_0x326502,_0x134624,_0x1a8525){const _0x23984b=a51_0x491a3c,_0x1dcb88=await this['checkTopRankStatus'](_0x326502,_0x134624),_0xe43007={};if(_0x1dcb88){const _0x14fe2a='Top\x20'+_0x1dcb88+'\x20Pilot';if(RIBBON_DEFINITIONS[_0x14fe2a]){const _0x334893=_0x1a8525[_0x14fe2a];!_0x334893?(console['log'](_0x23984b(0x103)+_0x326502+'\x20earned\x20'+_0x14fe2a+'!'),_0xe43007[_0x14fe2a]={'level':0x1,'awardedAt':new Date(),'rank':_0x1dcb88,'achievedAt':new Date()}):console['log']('‚úÖ\x20'+_0x326502+'\x20already\x20has\x20'+_0x14fe2a+_0x23984b(0x129));}}return Object['keys'](_0x1a8525)['forEach'](_0x5e42b6=>{const _0x422dd7=_0x23984b;_0x5e42b6['startsWith']('Top\x20')&&_0x5e42b6[_0x422dd7(0x179)]('\x20Pilot')&&(!_0xe43007[_0x5e42b6]&&console['log']('‚úÖ\x20Preserving\x20existing\x20'+_0x5e42b6));}),_0xe43007;}async['evaluateAllRibbonsForPlayerOptimized'](_0x2f6ed6,_0x5590d4='D1'){const _0x23a1bd=a51_0x491a3c;try{const _0x365aee=ribbonCache['getCachedData'](_0x2f6ed6,_0x5590d4);if(_0x365aee){const _0x1b686f=await this['evaluateTopRankRibbon'](_0x2f6ed6,_0x5590d4,_0x365aee);if(Object['keys'](_0x1b686f)['length']>0x0){console['log']('üÜï\x20New\x20top\x20rank\x20achievements\x20found\x20for\x20cached\x20player\x20'+_0x2f6ed6),await this[_0x23a1bd(0x157)](_0x2f6ed6,_0x1b686f,_0x5590d4);const _0x2870f0={..._0x365aee,..._0x1b686f};return ribbonCache['setCachedData'](_0x2f6ed6,_0x5590d4,_0x2870f0,0x0),_0x2870f0;}return _0x365aee;}const [_0x29a0e9,_0x3dc3d1]=await Promise['all']([this[_0x23a1bd(0x139)](_0x2f6ed6,_0x5590d4),this['getPlayerRibbonsCached'](_0x2f6ed6,_0x5590d4)]);if(!_0x29a0e9)return{};const _0x434077=_0x29a0e9[_0x23a1bd(0x128)]||0x0,_0xad3541=await this['evaluateTopRankRibbon'](_0x2f6ed6,_0x5590d4,_0x3dc3d1);if(!ribbonCache['shouldRefreshCache'](_0x2f6ed6,_0x5590d4,_0x434077)){if(Object['keys'](_0xad3541)['length']>0x0){await this['savePlayerRibbonsOptimized'](_0x2f6ed6,_0xad3541,_0x5590d4);const _0xc497b8={..._0x3dc3d1,..._0xad3541};return ribbonCache['setCachedData'](_0x2f6ed6,_0x5590d4,_0xc497b8,_0x434077),_0xc497b8;}return ribbonCache[_0x23a1bd(0x165)](_0x2f6ed6,_0x5590d4,_0x3dc3d1,_0x434077),_0x3dc3d1;}const _0x106242=await this['getPlayerMatchesOptimized'](_0x2f6ed6,_0x5590d4),_0x46d6ac=await this[_0x23a1bd(0x172)](_0x106242,_0x29a0e9,_0x3dc3d1,_0x5590d4);Object[_0x23a1bd(0x127)](_0x46d6ac,_0xad3541);Object['keys'](_0x46d6ac)['length']>0x0&&(console[_0x23a1bd(0x108)](_0x23a1bd(0x176)+Object[_0x23a1bd(0x158)](_0x46d6ac)['length']+'\x20new/updated\x20ribbons\x20for\x20'+_0x2f6ed6),await this['savePlayerRibbonsOptimized'](_0x2f6ed6,_0x46d6ac,_0x5590d4));const _0x5547c0={..._0x3dc3d1,..._0x46d6ac};return ribbonCache['setCachedData'](_0x2f6ed6,_0x5590d4,_0x5547c0,_0x106242[_0x23a1bd(0x173)]),_0x5547c0;}catch(_0x55a562){return console['error']('‚ùå\x20Error\x20in\x20ribbon\x20evaluation:',_0x55a562),{};}}async[a51_0x491a3c(0x17d)](_0x348952,_0x1f67c4,_0x1156c2){const _0x43dc33=a51_0x491a3c,_0x4b2515=_0x348952['winnerUsername']===_0x1f67c4;if(!_0x4b2515)return![];const _0x3c0b03=_0x348952[_0x43dc33(0x13a)],[_0xbb5193,_0x5a2306]=await Promise[_0x43dc33(0x112)]([this[_0x43dc33(0x139)](_0x1f67c4,_0x1156c2),this['getPlayerDataCached'](_0x3c0b03,_0x1156c2)]);if(!_0xbb5193||!_0x5a2306)return console['log']('‚ö†Ô∏è\x20Missing\x20player\x20data\x20for\x20'+_0x1f67c4+_0x43dc33(0x131)+_0x3c0b03),![];const _0xcd12a3=_0xbb5193['eloRating']||0x0,_0xbfb32=_0x5a2306['eloRating']||0x0,_0xd857e4=getPlayerRankTier(_0xcd12a3),_0x4f52c6=getPlayerRankTier(_0xbfb32);console['log']('üîç\x20Checking\x20underdog:\x20Winner('+_0x1f67c4+'):\x20'+_0xcd12a3+'\x20ELO\x20('+getRankTierName(_0xd857e4)+')\x20vs\x20Loser('+_0x3c0b03+'):\x20'+_0xbfb32+'\x20ELO\x20('+getRankTierName(_0x4f52c6)+')');if(_0x4f52c6>_0xd857e4)return console['log'](_0x43dc33(0x162)+getRankTierName(_0xd857e4)+_0x43dc33(0x123)+getRankTierName(_0x4f52c6)+'!'),!![];return console['log']('‚ùå\x20Not\x20underdog:\x20'+getRankTierName(_0xd857e4)+'\x20vs\x20'+getRankTierName(_0x4f52c6)),![];}['isUnderdogVictoryFast'](_0x1b87ac,_0x441eb1,_0x3728bb,_0x3dc272){const _0x1447ce=a51_0x491a3c,_0x3b9d8d=_0x1b87ac['winnerUsername']===_0x441eb1;if(!_0x3b9d8d)return![];const _0x2d492b=_0x1b87ac['loserUsername'],_0x682406=_0x3dc272['get'](_0x2d492b);if(!_0x3728bb||!_0x682406)return![];const _0x1cbfdb=_0x3728bb['eloRating']||0x0,_0x698dd5=_0x682406[_0x1447ce(0x10e)]||0x0,_0x9b48eb=getPlayerRankTier(_0x1cbfdb),_0x39ff07=getPlayerRankTier(_0x698dd5);if(_0x39ff07>_0x9b48eb)return console[_0x1447ce(0x108)](_0x1447ce(0x174)+getRankTierName(_0x9b48eb)+'('+_0x1cbfdb+_0x1447ce(0x116)+getRankTierName(_0x39ff07)+'('+_0x698dd5+')'),!![];return![];}async['evaluateAllRibbonsFromData'](_0x329932,_0x2bee05,_0x3019e0,_0x585c89){const _0x3afa81=a51_0x491a3c,_0x34c874={},_0x113ee5=_0x2bee05['username'],_0x5f3e95={'totalMatches':_0x329932['length'],'wins':0x0,'rematchWins':0x0,'subgameMatches':0x0,'uniqueMaps':new Set(),'uniqueOpponents':new Set(),'underdogWins':0x0},_0x142e13=new Set();_0x329932['forEach'](_0x36cb4e=>{const _0x58bebd=a51_0x584c,_0x4cd06b=_0x36cb4e[_0x58bebd(0x115)]===_0x113ee5,_0x20a056=_0x4cd06b?_0x36cb4e['loserUsername']:_0x36cb4e['winnerUsername'];if(_0x20a056)_0x142e13['add'](_0x20a056);}),console['log']('üöÄ\x20Bulk\x20loading\x20'+_0x142e13[_0x3afa81(0x159)]+'\x20player\x20records\x20for\x20underdog\x20calculations...');const _0x2dd45d=await this[_0x3afa81(0x16b)]([..._0x142e13,_0x113ee5],_0x585c89),_0x15bc8f=_0x2dd45d['get'](_0x113ee5);!_0x15bc8f&&console['log']('‚ö†Ô∏è\x20No\x20current\x20player\x20data\x20found\x20for\x20'+_0x113ee5);_0x329932['forEach'](_0x303a80=>{const _0x28486c=_0x3afa81,_0x1fa995=_0x303a80['winnerUsername']===_0x113ee5,_0x1de088=_0x1fa995?_0x303a80['loserUsername']:_0x303a80['winnerUsername'];_0x1fa995&&(_0x5f3e95[_0x28486c(0x138)]++,_0x303a80['subgameType']===_0x28486c(0x17c)&&_0x5f3e95['rematchWins']++,this['isUnderdogVictoryFast'](_0x303a80,_0x113ee5,_0x15bc8f,_0x2dd45d)&&_0x5f3e95['underdogWins']++),_0x303a80[_0x28486c(0x17f)]&&_0x303a80['subgameType']!==_0x28486c(0x14d)&&_0x5f3e95[_0x28486c(0x166)]++,_0x303a80[_0x28486c(0x168)]&&_0x5f3e95['uniqueMaps']['add'](_0x303a80['mapPlayed']),_0x1de088&&_0x5f3e95['uniqueOpponents'][_0x28486c(0x15b)](_0x1de088);}),console['log'](_0x3afa81(0x145)+_0x5f3e95['underdogWins']+'\x20underdog\x20victories\x20for\x20'+_0x113ee5);const _0x51da68=_0x5f3e95['totalMatches']>0x0?_0x5f3e95['wins']/_0x5f3e95['totalMatches']*0x64:0x0,_0x4ff1fe=[['Overachiever\x20Ribbon',this['evaluateOverachieverRibbonFromCount'](_0x5f3e95[_0x3afa81(0x105)],_0x3019e0)],['Rematch\x20Ribbon',this['evaluateRematchRibbonFromCount'](_0x5f3e95['rematchWins'],_0x3019e0)],['Sub-Gamer\x20Ribbon',this[_0x3afa81(0x130)](_0x5f3e95['subgameMatches'],_0x3019e0)],[_0x3afa81(0x11e),this['evaluateExplorerRibbonFromCount'](_0x5f3e95['uniqueMaps']['size'],_0x3019e0)],['Socialite\x20Ribbon',this['evaluateSocialiteRibbonFromCount'](_0x5f3e95[_0x3afa81(0x16a)]['size'],_0x3019e0)],[_0x3afa81(0x17e),this['evaluateBrickWallRibbonFromWinRate'](_0x51da68,_0x3019e0,_0x5f3e95['totalMatches'])],[_0x3afa81(0x189),this['evaluateUnderdogRibbonFromCount'](_0x5f3e95['underdogWins'],_0x3019e0)]];_0x4ff1fe[_0x3afa81(0x15d)](([_0x5e0c36,_0x125e3d])=>{_0x125e3d&&(_0x34c874[_0x5e0c36]=_0x125e3d);});const _0x16119c=Object['keys'](_0x3019e0)[_0x3afa81(0x173)]+Object['keys'](_0x34c874)[_0x3afa81(0x173)],_0x3ac259=this['evaluateCollectorRibbonFromCount'](_0x16119c,_0x3019e0);return _0x3ac259&&(_0x34c874[_0x3afa81(0x104)]=_0x3ac259),_0x34c874;}async['getPlayerMatchesOptimized'](_0x29dc01,_0x548767){const _0x24d79b=a51_0x491a3c,_0x1f7aed=matchCache['getCachedMatches'](_0x29dc01,_0x548767);if(_0x1f7aed)return _0x1f7aed;try{const _0x1ef2d6=_0x548767==='D1'?'approvedMatches':_0x548767==='D2'?_0x24d79b(0x154):_0x24d79b(0x183),_0x50ea50=collection(db,_0x1ef2d6),[_0x467f35,_0x2d2cc9]=await Promise['all']([getDocs(query(_0x50ea50,where('winnerUsername','==',_0x29dc01))),getDocs(query(_0x50ea50,where('loserUsername','==',_0x29dc01)))]),_0x78dd7a=new Set(),_0x1af4be=[];return _0x467f35['forEach'](_0x528de1=>{if(!_0x78dd7a['has'](_0x528de1['id'])){_0x78dd7a['add'](_0x528de1['id']);const _0x521266={'id':_0x528de1['id'],..._0x528de1['data']()};if(!_0x521266['winnerRating'])_0x521266['winnerRating']=0x0;if(!_0x521266['loserRating'])_0x521266['loserRating']=0x0;_0x1af4be['push'](_0x521266);}}),_0x2d2cc9[_0x24d79b(0x15d)](_0x56df7a=>{const _0xb1a69e=_0x24d79b;if(!_0x78dd7a[_0xb1a69e(0x161)](_0x56df7a['id'])){_0x78dd7a['add'](_0x56df7a['id']);const _0x5dd8bb={'id':_0x56df7a['id'],..._0x56df7a[_0xb1a69e(0x133)]()};if(!_0x5dd8bb['winnerRating'])_0x5dd8bb['winnerRating']=0x0;if(!_0x5dd8bb['loserRating'])_0x5dd8bb['loserRating']=0x0;_0x1af4be['push'](_0x5dd8bb);}}),matchCache[_0x24d79b(0x11a)](_0x29dc01,_0x548767,_0x1af4be),_0x1af4be;}catch(_0x2952ce){return console['error'](_0x24d79b(0x18b),_0x2952ce),[];}}async[a51_0x491a3c(0x139)](_0x2839b6,_0x116a46){const _0x25c719=a51_0x491a3c;try{const _0xc4f322=_0x116a46==='D1'?'players':_0x116a46==='D2'?_0x25c719(0x13c):'playersD3',_0x1daf7c=collection(db,_0xc4f322),_0x293962=query(_0x1daf7c,where(_0x25c719(0x11c),'==',_0x2839b6),limit(0x1)),_0x2bc798=await getDocs(_0x293962);if(_0x2bc798[_0x25c719(0x136)])return console['log']('‚ùå\x20No\x20player\x20data\x20found\x20for\x20'+_0x2839b6+_0x25c719(0x15a)+_0xc4f322),null;const _0x21c4b9=_0x2bc798[_0x25c719(0x110)][0x0]['data']();return _0x21c4b9[_0x25c719(0x10e)]!==undefined&&(_0x21c4b9[_0x25c719(0x151)]=_0x21c4b9['eloRating']),console['log']('‚úÖ\x20Found\x20player\x20data\x20for\x20'+_0x2839b6+':\x20ELO\x20'+_0x21c4b9['eloRating']+',\x20Position\x20'+_0x21c4b9['position']),_0x21c4b9;}catch(_0x4f84ab){return console['error']('Error\x20getting\x20player\x20data\x20for\x20'+_0x2839b6+':',_0x4f84ab),null;}}async['getPlayerRibbonsCached'](_0x6520f,_0x618de4){const _0x319aed=a51_0x491a3c;try{const _0x59b9c5='playerRibbons'+(_0x618de4==='D1'?'':_0x618de4),_0x590034=doc(db,_0x59b9c5,_0x6520f),_0xf2ba16=await getDoc(_0x590034);return _0xf2ba16['exists']()?_0xf2ba16['data']()['ribbons']||{}:{};}catch(_0x4d93ce){return console['error'](_0x319aed(0x13d),_0x4d93ce),{};}}async['savePlayerRibbonsOptimized'](_0x302115,_0x19c281,_0x4a6024){const _0x3c6f73=a51_0x491a3c;try{const _0x308015=_0x3c6f73(0x119)+(_0x4a6024==='D1'?'':_0x4a6024),_0x4fdfff=doc(db,_0x308015,_0x302115),_0xfac161=await this['getPlayerRibbonsCached'](_0x302115,_0x4a6024),_0x4595fb={..._0xfac161,..._0x19c281};await setDoc(_0x4fdfff,{'username':_0x302115,'ladder':_0x4a6024,'ribbons':_0x4595fb,'lastUpdated':new Date()},{'merge':!![]});}catch(_0x3bdb71){console[_0x3c6f73(0x184)]('Error\x20saving\x20ribbons:',_0x3bdb71);}}[a51_0x491a3c(0x12f)](_0x5e24f9,_0xad29ef){const _0x31e0dc=a51_0x491a3c,_0x5b87ff=_0xad29ef['Overachiever\x20Ribbon']||{'level':0x0},_0x4f6bc6=RIBBON_DEFINITIONS[_0x31e0dc(0x156)]['levels'],_0x2ee3f4=_0x4f6bc6['findIndex'](_0x2766b0=>_0x5e24f9<_0x2766b0),_0x1ae5e7=_0x2ee3f4===-0x1?_0x4f6bc6['length']:_0x2ee3f4;if(_0x1ae5e7>_0x5b87ff['level'])return{'level':_0x1ae5e7,'awardedAt':new Date()};return null;}[a51_0x491a3c(0x11b)](_0x123b97,_0x5b00a4){const _0xba08ee=a51_0x491a3c;if(_0x123b97===0x0)return null;const _0x2d1028=_0x5b00a4[_0xba08ee(0x181)]||{'level':0x0};if(_0x123b97>_0x2d1028[_0xba08ee(0x113)])return{'level':_0x123b97,'awardedAt':new Date()};return null;}[a51_0x491a3c(0x130)](_0x1bd6ac,_0x200049){const _0x4f4e59=_0x200049['Sub-Gamer\x20Ribbon']||{'level':0x0},_0x57b3fe=RIBBON_DEFINITIONS['Sub-Gamer\x20Ribbon']['levels'],_0x58e475=_0x57b3fe['findIndex'](_0x29cce3=>_0x1bd6ac<_0x29cce3),_0xac4788=_0x58e475===-0x1?_0x57b3fe['length']:_0x58e475;if(_0xac4788>_0x4f4e59['level'])return{'level':_0xac4788,'awardedAt':new Date()};return null;}[a51_0x491a3c(0x141)](_0x46be39,_0x37c5f6){const _0x534c5c=a51_0x491a3c,_0x1b81f7=_0x37c5f6['Explorer\x20Ribbon']||{'level':0x0},_0x5b37c3=RIBBON_DEFINITIONS[_0x534c5c(0x11e)][_0x534c5c(0x175)],_0x132cdf=_0x5b37c3['findIndex'](_0x13e931=>_0x46be39<_0x13e931),_0x461596=_0x132cdf===-0x1?_0x5b37c3['length']:_0x132cdf;if(_0x461596>_0x1b81f7['level'])return{'level':_0x461596,'awardedAt':new Date()};return null;}['evaluateSocialiteRibbonFromCount'](_0x46bb89,_0x1a7c00){const _0x563e40=a51_0x491a3c,_0x4e6308=_0x1a7c00[_0x563e40(0x13e)]||{'level':0x0},_0x1ed91c=RIBBON_DEFINITIONS['Socialite\x20Ribbon']['levels'],_0x348790=_0x1ed91c[_0x563e40(0x15f)](_0x2f17e6=>_0x46bb89<_0x2f17e6),_0x2a1c14=_0x348790===-0x1?_0x1ed91c['length']:_0x348790;if(_0x2a1c14>_0x4e6308[_0x563e40(0x113)])return{'level':_0x2a1c14,'awardedAt':new Date()};return null;}['evaluateBrickWallRibbonFromWinRate'](_0x340058,_0x4a1538,_0x5be3bb){const _0x284c71=a51_0x491a3c;if(_0x5be3bb<0x32)return console['log']('‚ö†Ô∏è\x20Brick\x20Wall\x20ribbon\x20requires\x2050+\x20matches\x20(player\x20has\x20'+_0x5be3bb+')'),null;const _0x8ca457=_0x4a1538['Brick\x20Wall']||{'level':0x0},_0x4138e9=RIBBON_DEFINITIONS['Brick\x20Wall']['levels'],_0x32aae1=_0x4138e9[_0x284c71(0x15f)](_0x1a5653=>_0x340058<_0x1a5653),_0x491e40=_0x32aae1===-0x1?_0x4138e9['length']:_0x32aae1;if(_0x491e40>_0x8ca457['level'])return console[_0x284c71(0x108)]('üèÜ\x20Brick\x20Wall\x20ribbon\x20awarded:\x20'+_0x340058[_0x284c71(0x14b)](0x1)+_0x284c71(0x16e)+_0x5be3bb+'\x20matches'),{'level':_0x491e40,'awardedAt':new Date(),'winRate':_0x340058,'matchesPlayed':_0x5be3bb};return null;}['evaluateCollectorRibbonFromCount'](_0x38f991,_0x363eb4){const _0xeef34d=a51_0x491a3c,_0x10ca15=_0x363eb4['Collector\x20Ribbon']||{'level':0x0},_0x590524=RIBBON_DEFINITIONS['Collector\x20Ribbon']['levels'],_0x2146be=_0x590524[_0xeef34d(0x15f)](_0x35803a=>_0x38f991<_0x35803a),_0x31a518=_0x2146be===-0x1?_0x590524['length']:_0x2146be;if(_0x31a518>_0x10ca15['level'])return{'level':_0x31a518,'awardedAt':new Date()};return null;}[a51_0x491a3c(0x153)](_0x4b4c44,_0x386afc){const _0x2a0f68=a51_0x491a3c;if(_0x4b4c44===0x0)return null;const _0x123b7e=_0x386afc[_0x2a0f68(0x189)]||{'level':0x0},_0x4693c3=RIBBON_DEFINITIONS['Underdog\x20Ribbon']['levels'];let _0x1846a9=0x0;for(let _0x2ab2a0=0x0;_0x2ab2a0<_0x4693c3[_0x2a0f68(0x173)];_0x2ab2a0++){if(_0x4b4c44>=_0x4693c3[_0x2ab2a0])_0x1846a9=_0x2ab2a0+0x1;else break;}if(_0x1846a9>_0x123b7e[_0x2a0f68(0x113)])return console['log']('üèÜ\x20Underdog\x20Ribbon\x20upgrade:\x20Level\x20'+_0x123b7e[_0x2a0f68(0x113)]+'\x20‚Üí\x20'+_0x1846a9+'\x20('+_0x4b4c44+'\x20underdog\x20wins)'),{'level':_0x1846a9,'awardedAt':new Date()};return null;}}function getPlayerRankTier(_0x169fc4){if(_0x169fc4===undefined||_0x169fc4===null)return 0x0;const _0x5101f7=Number(_0x169fc4);if(isNaN(_0x5101f7))return 0x0;if(_0x5101f7>=0x7d0)return 0x4;if(_0x5101f7>=0x708)return 0x3;if(_0x5101f7>=0x640)return 0x2;if(_0x5101f7>=0x578)return 0x1;return 0x0;}function a51_0x584c(_0x5b48bb,_0x1dd0d1){const _0x2ebf45=a51_0x3f9b();return a51_0x584c=function(_0x3f0b30,_0x14a016){_0x3f0b30=_0x3f0b30-0x103;let _0x3f9b2d=_0x2ebf45[_0x3f0b30];return _0x3f9b2d;},a51_0x584c(_0x5b48bb,_0x1dd0d1);}function getRankTierName(_0x6a5480){const _0xfb6d01=a51_0x491a3c,_0x466b30=['Unranked',_0xfb6d01(0x18d),_0xfb6d01(0x16d),'Gold','Emerald'];return _0x466b30[_0x6a5480]||'Unranked';}const ribbonSystem=new RibbonSystem(),ribbonCache=new RibbonCacheManager(),matchCache=new MatchCacheManager();typeof window!==a51_0x491a3c(0x135)&&(window['getRibbonCacheStats']=()=>{const _0x27ab34=a51_0x491a3c;return{'ribbon':ribbonCache[_0x27ab34(0x12d)](),'match':matchCache['getCacheStats']()};});export async function evaluatePlayerRibbons(_0x3c336b,_0x35e0a4='D1'){const _0x2b08df=a51_0x491a3c;return await ribbonSystem[_0x2b08df(0x106)](_0x3c336b,_0x35e0a4);}export function getRibbonHTML(_0x55c5d3,_0x36a173){const _0x3087dc=a51_0x491a3c,_0xde0bac=RIBBON_DEFINITIONS[_0x55c5d3];if(!_0xde0bac)return'';const _0x4fa3a1=_0x36a173['level']||0x1,_0x56f135=_0x55c5d3[_0x3087dc(0x150)]('\x20Ribbon','')['replace']('\x20Badge',''),_0x3453ca=_0xda22c1=>{if(_0xda22c1<=0x1)return'level-1';if(_0xda22c1<=0x2)return'level-2';if(_0xda22c1<=0x3)return'level-3';if(_0xda22c1<=0x4)return'level-4';return'level-5-plus';},_0x158547=_0x1ca1fe=>{const _0x12793f=_0x3087dc;if(_0x1ca1fe<=0x1)return'';const _0x2f61a6=[];if(_0x1ca1fe>=0x2&&_0x1ca1fe<=0x4){const _0x46e767=Math['min'](_0x1ca1fe-0x1,0x3);for(let _0x3331d3=0x0;_0x3331d3<_0x46e767;_0x3331d3++){_0x2f61a6['push'](_0x12793f(0x14c));}}if(_0x1ca1fe>=0x5&&_0x1ca1fe<=0x7){_0x2f61a6[_0x12793f(0x178)]('<i\x20class=\x22fas\x20fa-star\x20ribbon-device\x20silver-star\x22></i>');const _0x444d93=Math[_0x12793f(0x15c)](_0x1ca1fe-0x5,0x2);for(let _0x3be30a=0x0;_0x3be30a<_0x444d93;_0x3be30a++){_0x2f61a6[_0x12793f(0x178)](_0x12793f(0x14c));}}return _0x1ca1fe>=0x8&&_0x2f61a6['push']('<i\x20class=\x22fas\x20fa-star\x20ribbon-device\x20gold-star\x22></i>'),_0x2f61a6[_0x12793f(0x173)]>0x0?'<div\x20class=\x22ribbon-devices\x22>'+_0x2f61a6['join']('')+'</div>':'';},_0x4371da=_0xde0bac['description']+_0x3087dc(0x143)+_0x4fa3a1;return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22military-ribbon\x22\x20data-tooltip=\x22'+_0x4371da+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-image-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0xde0bac['image']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x55c5d3+_0x3087dc(0x13b)+_0xde0bac['color']+_0x3087dc(0x170)+_0x56f135['substring'](0x0,0x6)+_0x3087dc(0x15e)+_0x158547(_0x4fa3a1)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-name\x22>'+_0x56f135+_0x3087dc(0x10a)+(_0x4fa3a1>0x1?_0x3087dc(0x137)+_0x3453ca(_0x4fa3a1)+'\x22>'+_0x4fa3a1+'</div>':'')+_0x3087dc(0x185);}