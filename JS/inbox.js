const a22_0x1e1ed1=a22_0x173a,a22_0x286e0b=(function(){let _0x5ce135=!![];return function(_0x5dc753,_0x1941fb){const _0x73c2ff=_0x5ce135?function(){if(_0x1941fb){const _0x1c70c1=_0x1941fb['apply'](_0x5dc753,arguments);return _0x1941fb=null,_0x1c70c1;}}:function(){};return _0x5ce135=![],_0x73c2ff;};}()),a22_0x11686e=a22_0x286e0b(this,function(){const _0x42d35b=a22_0x173a,_0xd23232=function(){let _0x25cc90;try{_0x25cc90=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x10f6da){_0x25cc90=window;}return _0x25cc90;},_0x216c4e=_0xd23232(),_0x5783f6=_0x216c4e[_0x42d35b(0x17e)]=_0x216c4e['console']||{},_0x1181fe=['log',_0x42d35b(0x173),'info','error','exception',_0x42d35b(0x198),_0x42d35b(0x19b)];for(let _0x28c702=0x0;_0x28c702<_0x1181fe['length'];_0x28c702++){const _0x349e0f=a22_0x286e0b['constructor']['prototype']['bind'](a22_0x286e0b),_0x3691a1=_0x1181fe[_0x28c702],_0x504a5d=_0x5783f6[_0x3691a1]||_0x349e0f;_0x349e0f[_0x42d35b(0x18f)]=a22_0x286e0b['bind'](a22_0x286e0b),_0x349e0f[_0x42d35b(0x1ab)]=_0x504a5d['toString'][_0x42d35b(0x171)](_0x504a5d),_0x5783f6[_0x3691a1]=_0x349e0f;}});a22_0x11686e();import{auth,db}from'./firebase-config.js';function a22_0x173a(_0x4585be,_0x1b57e6){const _0x11686e=a22_0x4865();return a22_0x173a=function(_0x286e0b,_0x31cfaa){_0x286e0b=_0x286e0b-0x16c;let _0x4865e1=_0x11686e[_0x286e0b];return _0x4865e1;},a22_0x173a(_0x4585be,_0x1b57e6);}function a22_0x4865(){const _0x191dd0=['style','currentFilter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20','.modal-close','click','bind','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20â€¢\x20Color:\x20','warn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','dataset','pending','respondedAt','add','init','remove','updateNotificationCount','DOMContentLoaded','uid','console','openResponseModal','Team\x20\x22','forEach','target','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toLocaleDateString','teamColor','error','docs','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','createdAt','innerHTML','addEventListener','declined','message','sentUnsubscribe','__proto__','getElementById','Error\x20creating\x20team:','href','loadInvitations','Failed\x20to\x20create\x20team:\x20','\x22\x20created\x20successfully!','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','fromUserId','table','unsubscribe','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22','trace','sent','.filter-btn','inline-block','createTeamFromInvitation','getTimeAgo','team_invite','display','filter','sentInvitations','hasMore','lastDoc','querySelectorAll','createInvitationCard','d\x20ago','invitations','toString','modal-styles','outbox','pageSize','status','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','./login.html','accepted','sort','teamData'];a22_0x4865=function(){return _0x191dd0;};return a22_0x4865();}import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class InboxManager{constructor(){const _0x326f3d=a22_0x173a;this['currentFilter']=_0x326f3d(0x176),this['invitations']=[],this[_0x326f3d(0x1a4)]=[],this['unsubscribe']=null,this['sentUnsubscribe']=null,this['pageSize']=0x14,this[_0x326f3d(0x1a6)]=null,this[_0x326f3d(0x1a5)]=!![],this[_0x326f3d(0x179)]();}async['init'](){auth['onAuthStateChanged'](_0x18c7be=>{const _0x43255c=a22_0x173a;_0x18c7be?(this['loadInvitations'](_0x18c7be[_0x43255c(0x17d)]),this['setupEventListeners']()):window['location'][_0x43255c(0x192)]=_0x43255c(0x1b1);});}['setupEventListeners'](){const _0x5d57ce=a22_0x173a;document['querySelectorAll'](_0x5d57ce(0x19d))['forEach'](_0x4142d5=>{_0x4142d5['addEventListener']('click',()=>{const _0x2f1286=a22_0x173a;document[_0x2f1286(0x1a7)]('.filter-btn')[_0x2f1286(0x181)](_0x213d07=>_0x213d07['classList']['remove']('active')),_0x4142d5['classList'][_0x2f1286(0x178)]('active'),this['currentFilter']=_0x4142d5[_0x2f1286(0x175)]['filter'],this['renderInvitations']();});});}[a22_0x1e1ed1(0x193)](_0x422a3d){const _0x2685bf=a22_0x1e1ed1,_0x1d46e1=collection(db,'gameInvitations');let _0x270b17=query(_0x1d46e1,where('toUserId','==',_0x422a3d),orderBy(_0x2685bf(0x189),'desc'),limit(this['pageSize']));this[_0x2685bf(0x199)]=onSnapshot(_0x270b17,_0x4b4a8b=>{const _0xb6e4f4=_0x2685bf;this['invitations']=_0x4b4a8b[_0xb6e4f4(0x187)]['map'](_0x5e13ea=>({'id':_0x5e13ea['id'],..._0x5e13ea['data']()})),this['renderInvitations'](),this['updateNotificationCount']();});let _0x4ab1d2=query(_0x1d46e1,where(_0x2685bf(0x197),'==',_0x422a3d),orderBy('createdAt','desc'),limit(this[_0x2685bf(0x1ae)]));this['sentUnsubscribe']=onSnapshot(_0x4ab1d2,_0x424251=>{const _0x145463=_0x2685bf;this[_0x145463(0x1a4)]=_0x424251['docs']['map'](_0x537d32=>({'id':_0x537d32['id'],..._0x537d32['data'](),'isSent':!![]})),this['renderInvitations']();});}['renderInvitations'](){const _0x3a7f50=a22_0x1e1ed1,_0x10d52c=document['getElementById']('inbox-content');if(!_0x10d52c)return;let _0x405c3d=[];if(this['currentFilter']===_0x3a7f50(0x1ad))_0x405c3d=this['sentInvitations'];else this['currentFilter']==='all'?_0x405c3d=[...this['invitations'],...this[_0x3a7f50(0x1a4)]][_0x3a7f50(0x1b3)]((_0xb73aeb,_0x182de2)=>{const _0x1e599c=_0x3a7f50,_0x477993=_0xb73aeb['createdAt']?.['toDate']?_0xb73aeb[_0x1e599c(0x189)]['toDate']():new Date(_0xb73aeb['createdAt']),_0x3b7740=_0x182de2['createdAt']?.['toDate']?_0x182de2[_0x1e599c(0x189)]['toDate']():new Date(_0x182de2['createdAt']);return _0x3b7740-_0x477993;}):_0x405c3d=this[_0x3a7f50(0x1aa)]['filter'](_0x2d028d=>_0x2d028d['status']===this['currentFilter']);if(_0x405c3d['length']===0x0){const _0x1fbd61=this[_0x3a7f50(0x16d)]==='outbox'?_0x3a7f50(0x19c):this['currentFilter']==='all'?'':this['currentFilter'];_0x10d52c['innerHTML']=_0x3a7f50(0x16e)+_0x1fbd61+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this[_0x3a7f50(0x16d)]===_0x3a7f50(0x1ad)?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return;}_0x10d52c[_0x3a7f50(0x18a)]=_0x405c3d['map'](_0x4aa06a=>this['createInvitationCard'](_0x4aa06a))['join'](''),this['setupActionListeners']();}[a22_0x1e1ed1(0x1a8)](_0x9ff56d){const _0x3e6873=a22_0x1e1ed1,_0x5dc3d6=_0x9ff56d['createdAt']?.['toDate']?_0x9ff56d['createdAt']['toDate']():new Date(_0x9ff56d['createdAt']),_0x285418=this[_0x3e6873(0x1a0)](_0x5dc3d6),_0x564e03=_0x9ff56d['isSent']||![];let _0x1e97dd='';return _0x9ff56d['type']===_0x3e6873(0x1a1)?_0x1e97dd='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x9ff56d[_0x3e6873(0x18d)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20'+_0x9ff56d['teamData'][_0x3e6873(0x185)]+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x9ff56d['teamData']['proposedTeamName']+_0x3e6873(0x172)+_0x9ff56d[_0x3e6873(0x1b4)]['teamColor']+_0x3e6873(0x174):_0x1e97dd='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x9ff56d['message']+_0x3e6873(0x183),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20'+_0x9ff56d[_0x3e6873(0x1af)]+'\x20'+(_0x564e03?'sent-invitation':'')+'\x22\x20data-invitation-id=\x22'+_0x9ff56d['id']+_0x3e6873(0x196)+(_0x564e03?'To:\x20'+_0x9ff56d['toUsername']:_0x9ff56d['fromUsername'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x564e03?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x285418+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x9ff56d['status']+'\x22>'+_0x9ff56d['status']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1e97dd+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(!_0x564e03&&_0x9ff56d['status']==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x9ff56d['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x9ff56d['id']+_0x3e6873(0x188)+(_0x9ff56d['type']!==_0x3e6873(0x1a1)?_0x3e6873(0x19a)+_0x9ff56d['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x564e03&&_0x9ff56d['status']==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x9ff56d['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}['setupActionListeners'](){document['querySelectorAll']('.action-btn')['forEach'](_0x185ef3=>{const _0x1c589d=a22_0x173a;_0x185ef3['addEventListener'](_0x1c589d(0x170),async _0x51ed9f=>{const _0x1b95b3=_0x1c589d,_0xf0d1e0=_0x185ef3[_0x1b95b3(0x175)]['action'],_0x1c47af=_0x185ef3[_0x1b95b3(0x175)]['invitationId'];_0x185ef3['disabled']=!![];const _0x596402=_0x185ef3['innerHTML'];_0x185ef3[_0x1b95b3(0x18a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0xf0d1e0){case'accept':await this['updateInvitationStatus'](_0x1c47af,_0x1b95b3(0x1b2));break;case'decline':await this['updateInvitationStatus'](_0x1c47af,_0x1b95b3(0x18c));break;case'cancel':await this['updateInvitationStatus'](_0x1c47af,'cancelled');break;case'respond':this['openResponseModal'](_0x1c47af);break;}}catch(_0x4513b6){console[_0x1b95b3(0x186)]('Error\x20performing\x20'+_0xf0d1e0+':',_0x4513b6),alert('Failed\x20to\x20'+_0xf0d1e0+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x185ef3['disabled']=![],_0x185ef3['innerHTML']=_0x596402;}});});}async['updateInvitationStatus'](_0x5a5d0a,_0x41ae39){const _0x2b7b17=a22_0x1e1ed1;try{const _0x5527c1=this['invitations']['find'](_0x45dd45=>_0x45dd45['id']===_0x5a5d0a);_0x5527c1&&_0x5527c1['type']==='team_invite'&&_0x41ae39==='accepted'&&await this['createTeamFromInvitation'](_0x5527c1);const _0x3bc55f=doc(db,'gameInvitations',_0x5a5d0a);await updateDoc(_0x3bc55f,{'status':_0x41ae39,'respondedAt':new Date()}),_0x5527c1&&(_0x5527c1[_0x2b7b17(0x1af)]=_0x41ae39,_0x5527c1[_0x2b7b17(0x177)]=new Date(),this['renderInvitations']());}catch(_0x1fd3d0){console['error']('Error\x20updating\x20invitation\x20status:',_0x1fd3d0);throw _0x1fd3d0;}}[a22_0x1e1ed1(0x17f)](_0x5a55a4){const _0x1b1298=a22_0x1e1ed1,_0x1d9ae5=this['invitations']['find'](_0x3b4bf7=>_0x3b4bf7['id']===_0x5a55a4);if(!_0x1d9ae5)return;const _0x16d7d5=document['createElement']('div');_0x16d7d5['className']='modal-overlay',_0x16d7d5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x1d9ae5['fromUsername']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x1d9ae5['value']+'</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';if(!document[_0x1b1298(0x190)](_0x1b1298(0x1ac))){const _0xcb1c96=document['createElement']('style');_0xcb1c96['id']='modal-styles',_0xcb1c96['textContent']=_0x1b1298(0x1b0),document['head']['appendChild'](_0xcb1c96);}document['body']['appendChild'](_0x16d7d5),_0x16d7d5['querySelector'](_0x1b1298(0x16f))['addEventListener']('click',()=>_0x16d7d5[_0x1b1298(0x17a)]()),_0x16d7d5['querySelector']('#cancel-response')['addEventListener']('click',()=>_0x16d7d5['remove']()),_0x16d7d5['addEventListener']('click',_0x1996c3=>{const _0x2dd8b1=_0x1b1298;if(_0x1996c3[_0x2dd8b1(0x182)]===_0x16d7d5)_0x16d7d5['remove']();}),_0x16d7d5['querySelector']('#send-response')['addEventListener']('click',()=>{const _0x5b6289=_0x1b1298,_0x113b77=document[_0x5b6289(0x190)]('response-message')['value']['trim']();_0x113b77&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x16d7d5['remove']());});}async[a22_0x1e1ed1(0x19f)](_0x32fe4d){const _0x5a1988=a22_0x1e1ed1;try{const {createTeam:_0x12e2ca}=await import('./ladderduos.js'),_0x591317=await _0x12e2ca(_0x32fe4d['fromUsername'],_0x32fe4d['toUsername'],_0x32fe4d['teamData']['proposedTeamName'],_0x32fe4d['teamData']['teamColor']);if(!_0x591317['success'])throw new Error(_0x591317['error']);alert(_0x5a1988(0x180)+_0x32fe4d['teamData']['proposedTeamName']+_0x5a1988(0x195));}catch(_0x234c05){console['error'](_0x5a1988(0x191),_0x234c05);throw new Error(_0x5a1988(0x194)+_0x234c05['message']);}}[a22_0x1e1ed1(0x17b)](){const _0x3da3da=a22_0x1e1ed1,_0x235643=this['invitations'][_0x3da3da(0x1a3)](_0xf2df7d=>_0xf2df7d[_0x3da3da(0x1af)]===_0x3da3da(0x176))['length'],_0x2f593d=document['getElementById']('inbox-notification');_0x2f593d&&(_0x235643>0x0?(_0x2f593d[_0x3da3da(0x16c)][_0x3da3da(0x1a2)]=_0x3da3da(0x19e),_0x2f593d['textContent']=_0x235643>0x9?'9+':_0x235643):_0x2f593d['style']['display']='none');}['getTimeAgo'](_0x3a1e52){const _0xc41b51=a22_0x1e1ed1,_0x33ac82=new Date(),_0x773817=_0x33ac82-_0x3a1e52,_0x6d8e4=Math['floor'](_0x773817/(0x3e8*0x3c)),_0x1a8f1c=Math['floor'](_0x773817/(0x3e8*0x3c*0x3c)),_0x4ba64b=Math['floor'](_0x773817/(0x3e8*0x3c*0x3c*0x18));if(_0x6d8e4<0x1)return'Just\x20now';if(_0x6d8e4<0x3c)return _0x6d8e4+'m\x20ago';if(_0x1a8f1c<0x18)return _0x1a8f1c+'h\x20ago';if(_0x4ba64b<0x7)return _0x4ba64b+_0xc41b51(0x1a9);return _0x3a1e52[_0xc41b51(0x184)]();}['destroy'](){const _0x3d6b04=a22_0x1e1ed1;this['unsubscribe']&&this['unsubscribe'](),this[_0x3d6b04(0x18e)]&&this['sentUnsubscribe']();}}document[a22_0x1e1ed1(0x18b)](a22_0x1e1ed1(0x17c),()=>{new InboxManager();});