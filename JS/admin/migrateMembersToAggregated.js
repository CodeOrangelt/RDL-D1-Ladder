(function(_0x4827cb,_0x1d60e0){const _0x17c79a=a1_0x1b77,_0x376e07=_0x4827cb();while(!![]){try{const _0x3cbf88=parseInt(_0x17c79a(0x1e7))/0x1+parseInt(_0x17c79a(0x1dc))/0x2*(parseInt(_0x17c79a(0x21f))/0x3)+parseInt(_0x17c79a(0x1e3))/0x4*(parseInt(_0x17c79a(0x20b))/0x5)+-parseInt(_0x17c79a(0x20e))/0x6+parseInt(_0x17c79a(0x1fb))/0x7+-parseInt(_0x17c79a(0x201))/0x8*(-parseInt(_0x17c79a(0x21e))/0x9)+parseInt(_0x17c79a(0x20f))/0xa*(-parseInt(_0x17c79a(0x215))/0xb);if(_0x3cbf88===_0x1d60e0)break;else _0x376e07['push'](_0x376e07['shift']());}catch(_0x511845){_0x376e07['push'](_0x376e07['shift']());}}}(a1_0x5cc6,0x472e6));function a1_0x5cc6(){const _0x365f86=['\x20profiles,\x20','5eMzHYm','playersD2','constructor','2193468KEFvOO','2203120ciQmFB','Unknown','isNonParticipant','apply','emerald','error','33oNMqIZ','active','\x20members\x20to\x20aggregated\x20collection!','gold','favoriteWeapon','get','has','\x20members\x20processed)','username','45ZVHPpG','1353wJpgxg','return\x20(function()\x20','bind','‚öôÔ∏è\x20Processed\x20','‚úÖ\x20Data\x20fetched:\x20','\x20batches...','\x20D2,\x20','1228WDaWHe','code','set','profileImageUrl','name','favoriteMap','info','1982228OFtEjS','trace','__proto__','silver','252779HtmfJk','forEach','ladder','console','üì•\x20Fetching\x20all\x20collections...','commit','playersD3','push','üéâ\x20Successfully\x20migrated\x20','ladders','‚ùå\x20Migration\x20failed:','permission-denied','eloRating','userProfiles','üì¶\x20Prepared\x20batch\x20','country','toString','search','üöÄ\x20Executing\x20','üíæ\x20Writing\x20aggregated\x20data...','750344aFXGKW','\x20unique\x20members','(((.+)+)+)+$','log','length','üîí\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.','297008oZWJRy','players','{}.constructor(\x22return\x20this\x22)(\x20)','size','aggregatedMembers','warn','data','prototype','elo'];a1_0x5cc6=function(){return _0x365f86;};return a1_0x5cc6();}function a1_0x1b77(_0x554527,_0x118331){const _0x4eabe9=a1_0x5cc6();return a1_0x1b77=function(_0x324679,_0x51d042){_0x324679=_0x324679-0x1da;let _0xecca81=_0x4eabe9[_0x324679];return _0xecca81;},a1_0x1b77(_0x554527,_0x118331);}import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);async function migrateToAggregatedMembers(){const _0x57f48c=a1_0x1b77,_0x2ee818=(function(){let _0x32e3bf=!![];return function(_0x3607f7,_0x2b8131){const _0x314870=_0x32e3bf?function(){const _0x42df3f=a1_0x1b77;if(_0x2b8131){const _0x1c3d16=_0x2b8131[_0x42df3f(0x212)](_0x3607f7,arguments);return _0x2b8131=null,_0x1c3d16;}}:function(){};return _0x32e3bf=![],_0x314870;};}()),_0x4f8c64=_0x2ee818(this,function(){const _0x231587=a1_0x1b77;return _0x4f8c64[_0x231587(0x1f7)]()['search']('(((.+)+)+)+$')['toString']()[_0x231587(0x20d)](_0x4f8c64)[_0x231587(0x1f8)](_0x231587(0x1fd));});_0x4f8c64();const _0x13dd93=(function(){let _0x21a9da=!![];return function(_0x14c6cc,_0x5067f1){const _0x3ae50d=_0x21a9da?function(){const _0x249016=a1_0x1b77;if(_0x5067f1){const _0x316035=_0x5067f1[_0x249016(0x212)](_0x14c6cc,arguments);return _0x5067f1=null,_0x316035;}}:function(){};return _0x21a9da=![],_0x3ae50d;};}()),_0x2982a0=_0x13dd93(this,function(){const _0x38114a=a1_0x1b77;let _0x47e99e;try{const _0x56248b=Function(_0x38114a(0x220)+_0x38114a(0x203)+');');_0x47e99e=_0x56248b();}catch(_0x2b71e){_0x47e99e=window;}const _0x348630=_0x47e99e[_0x38114a(0x1ea)]=_0x47e99e[_0x38114a(0x1ea)]||{},_0x516d34=['log',_0x38114a(0x206),_0x38114a(0x1e2),_0x38114a(0x214),'exception','table',_0x38114a(0x1e4)];for(let _0x40ac17=0x0;_0x40ac17<_0x516d34[_0x38114a(0x1ff)];_0x40ac17++){const _0xd8f5a8=_0x13dd93['constructor'][_0x38114a(0x208)][_0x38114a(0x221)](_0x13dd93),_0x2638ca=_0x516d34[_0x40ac17],_0x2d2ffa=_0x348630[_0x2638ca]||_0xd8f5a8;_0xd8f5a8[_0x38114a(0x1e5)]=_0x13dd93[_0x38114a(0x221)](_0x13dd93),_0xd8f5a8[_0x38114a(0x1f7)]=_0x2d2ffa[_0x38114a(0x1f7)][_0x38114a(0x221)](_0x2d2ffa),_0x348630[_0x2638ca]=_0xd8f5a8;}});_0x2982a0(),console[_0x57f48c(0x1fe)]('üîÑ\x20Starting\x20migration\x20to\x20aggregated\x20members...');try{console[_0x57f48c(0x1fe)](_0x57f48c(0x1eb));const [_0x2cebf7,_0x4d9aa6,_0x1b94ba,_0x329048,_0x2647e4]=await Promise['all']([getDocs(collection(db,_0x57f48c(0x1f4))),getDocs(collection(db,_0x57f48c(0x202))),getDocs(collection(db,_0x57f48c(0x20c))),getDocs(collection(db,_0x57f48c(0x1ed))),getDocs(collection(db,'nonParticipants'))]);console['log'](_0x57f48c(0x223)+_0x2cebf7[_0x57f48c(0x204)]+_0x57f48c(0x20a)+_0x4d9aa6['size']+'\x20D1,\x20'+_0x1b94ba[_0x57f48c(0x204)]+_0x57f48c(0x1db)+_0x329048['size']+'\x20D3,\x20'+_0x2647e4['size']+'\x20non-participants');const _0x39a4f2=new Map();_0x2cebf7[_0x57f48c(0x1e8)](_0x3cebc9=>{const _0x12bfdd=_0x57f48c;_0x39a4f2[_0x12bfdd(0x1de)](_0x3cebc9['id'],_0x3cebc9[_0x12bfdd(0x207)]());});const _0x27517b=new Map(),_0xd9b5f4=(_0xea5c0d,_0x4786d2)=>{const _0x1fa6e1=_0x57f48c;_0xea5c0d[_0x1fa6e1(0x1e8)](_0x19b754=>{const _0x5af34d=_0x1fa6e1,_0x81c188=_0x19b754[_0x5af34d(0x207)](),_0x3d2cd8=_0x19b754['id'];!_0x27517b[_0x5af34d(0x21b)](_0x3d2cd8)&&_0x27517b['set'](_0x3d2cd8,{'userId':_0x3d2cd8,'username':_0x81c188[_0x5af34d(0x21d)]||_0x81c188[_0x5af34d(0x1e0)]||_0x5af34d(0x210),'ladders':[],'isNonParticipant':![]});const _0x5212df=_0x27517b[_0x5af34d(0x21a)](_0x3d2cd8);_0x5212df[_0x5af34d(0x1f0)][_0x5af34d(0x1ee)]({'ladder':_0x4786d2,'elo':_0x81c188[_0x5af34d(0x1f3)]||_0x81c188[_0x5af34d(0x209)]||0x4b0,'active':_0x81c188[_0x5af34d(0x216)]!==![]});});};_0xd9b5f4(_0x4d9aa6,'D1'),_0xd9b5f4(_0x1b94ba,'D2'),_0xd9b5f4(_0x329048,'D3'),_0x2647e4[_0x57f48c(0x1e8)](_0x3d22ed=>{const _0x4c44eb=_0x57f48c,_0x19f4c2=_0x3d22ed[_0x4c44eb(0x207)](),_0x58cdf7=_0x3d22ed['id'];!_0x27517b['has'](_0x58cdf7)&&(_0x19f4c2[_0x4c44eb(0x21d)]||_0x19f4c2[_0x4c44eb(0x1e0)])&&_0x27517b[_0x4c44eb(0x1de)](_0x58cdf7,{'userId':_0x58cdf7,'username':_0x19f4c2[_0x4c44eb(0x21d)]||_0x19f4c2['name'],'ladders':[],'isNonParticipant':!![]});}),console[_0x57f48c(0x1fe)](_0x57f48c(0x222)+_0x27517b[_0x57f48c(0x204)]+_0x57f48c(0x1fc)),console['log'](_0x57f48c(0x1fa));const _0x1fff1d=[];let _0x2fe910=writeBatch(db),_0x13c83d=0x0,_0x451c84=0x0;_0x27517b[_0x57f48c(0x1e8)]((_0x4a4e91,_0x51c5eb)=>{const _0x5ee540=_0x57f48c,_0x133f90=_0x39a4f2[_0x5ee540(0x21a)](_0x51c5eb)||{};let _0x32d256=0x0,_0x3b9125=null;if(_0x4a4e91[_0x5ee540(0x1f0)][_0x5ee540(0x1ff)]>0x0){const _0x3378dc=_0x4a4e91[_0x5ee540(0x1f0)]['sort']((_0x2b0b55,_0x2b0e3b)=>_0x2b0e3b[_0x5ee540(0x209)]-_0x2b0b55[_0x5ee540(0x209)]);_0x32d256=_0x3378dc[0x0][_0x5ee540(0x209)],_0x3b9125=_0x3378dc[0x0][_0x5ee540(0x1e9)];}const _0x4d678b={'userId':_0x51c5eb,'username':_0x4a4e91[_0x5ee540(0x21d)],'profileImageUrl':_0x133f90[_0x5ee540(0x1df)]||null,'country':_0x133f90[_0x5ee540(0x1f6)]||null,'motto':_0x133f90['motto']||null,'favoriteMap':_0x133f90[_0x5ee540(0x1e1)]||null,'favoriteWeapon':_0x133f90[_0x5ee540(0x219)]||null,'isNonParticipant':_0x4a4e91[_0x5ee540(0x211)],'ladders':_0x4a4e91['ladders'],'primaryLadder':_0x3b9125,'highestElo':_0x32d256,'rank':getPlayerRank(_0x32d256),'lastUpdated':new Date(),'migrationTimestamp':new Date()['toISOString']()},_0x411312=doc(collection(db,_0x5ee540(0x205)),_0x51c5eb);_0x2fe910[_0x5ee540(0x1de)](_0x411312,_0x4d678b),_0x13c83d++,_0x451c84++,_0x13c83d>=0x1c2&&(_0x1fff1d[_0x5ee540(0x1ee)](_0x2fe910['commit']()),_0x2fe910=writeBatch(db),_0x13c83d=0x0,console[_0x5ee540(0x1fe)](_0x5ee540(0x1f5)+_0x1fff1d[_0x5ee540(0x1ff)]+'\x20('+_0x451c84+_0x5ee540(0x21c)));}),_0x13c83d>0x0&&_0x1fff1d[_0x57f48c(0x1ee)](_0x2fe910[_0x57f48c(0x1ec)]()),console[_0x57f48c(0x1fe)](_0x57f48c(0x1f9)+_0x1fff1d['length']+_0x57f48c(0x1da)),await Promise['all'](_0x1fff1d),console['log'](_0x57f48c(0x1ef)+_0x27517b[_0x57f48c(0x204)]+_0x57f48c(0x217)),console['log']('üí°\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!');}catch(_0xe4410e){console[_0x57f48c(0x214)](_0x57f48c(0x1f1),_0xe4410e),_0xe4410e[_0x57f48c(0x1dd)]===_0x57f48c(0x1f2)&&console[_0x57f48c(0x214)](_0x57f48c(0x200));}}function getPlayerRank(_0x509ae4){const _0x3e20cb=a1_0x1b77;if(_0x509ae4>=0x7d0)return _0x3e20cb(0x213);if(_0x509ae4>=0x708)return _0x3e20cb(0x218);if(_0x509ae4>=0x640)return _0x3e20cb(0x1e6);if(_0x509ae4>=0x578)return'bronze';return'unranked';}migrateToAggregatedMembers();