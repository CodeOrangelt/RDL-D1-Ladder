const a46_0x1773e4=a46_0xca3e,a46_0x102a17=(function(){let _0x32e3d4=!![];return function(_0xb0fb56,_0x463469){const _0xf06921=_0x32e3d4?function(){const _0x490838=a46_0xca3e;if(_0x463469){const _0x1b7489=_0x463469[_0x490838(0x1a4)](_0xb0fb56,arguments);return _0x463469=null,_0x1b7489;}}:function(){};return _0x32e3d4=![],_0xf06921;};}()),a46_0x2d1712=a46_0x102a17(this,function(){const _0x67548c=a46_0xca3e;let _0x117df4;try{const _0x568f31=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x117df4=_0x568f31();}catch(_0x329c5d){_0x117df4=window;}const _0x102a12=_0x117df4['console']=_0x117df4['console']||{},_0x570fdb=['log',_0x67548c(0x1af),'info',_0x67548c(0x1b7),_0x67548c(0x1ac),'table','trace'];for(let _0x312155=0x0;_0x312155<_0x570fdb['length'];_0x312155++){const _0x492172=a46_0x102a17['constructor'][_0x67548c(0x15a)][_0x67548c(0x174)](a46_0x102a17),_0x1e3723=_0x570fdb[_0x312155],_0x2557a0=_0x102a12[_0x1e3723]||_0x492172;_0x492172[_0x67548c(0x179)]=a46_0x102a17['bind'](a46_0x102a17),_0x492172[_0x67548c(0x166)]=_0x2557a0['toString'][_0x67548c(0x174)](_0x2557a0),_0x102a12[_0x1e3723]=_0x492172;}});a46_0x2d1712();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':a46_0x1773e4(0x1a1),'description':a46_0x1773e4(0x17f)},'contrast':{'price':0x0,'name':'Nightlight','description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':'Red','description':a46_0x1773e4(0x1ce)},'gold':{'price':0x320,'name':'Gold','description':'Only\x20the\x20best\x20get\x20this\x20one'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'cockpit':{'price':0x4b0,'name':'Cockpit','description':'is\x20that...\x20Pfunk?'}},TOKENS={'pwr01':{'price':0x64,'name':'Energy','description':'Enhanced\x20energy\x20generation\x20unit','image':'../images/tokens/subgame/pwr01.gif','category':a46_0x1773e4(0x1c8)},'fan':{'price':0x96,'name':'Fan','description':a46_0x1773e4(0x1a8),'image':'../images/tokens/Fan.gif','category':'fun'},'marker':{'price':0xfa,'name':'Marker','description':'Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','image':a46_0x1773e4(0x1d0),'category':'fun'},'laser':{'price':0x12c,'name':'Laser','description':'Classic\x20laser\x20weapon\x20token.','image':'../images/tokens/Laser.gif','category':'weapon'},'pbomb':{'price':0x15e,'name':a46_0x1773e4(0x1d1),'description':'Strategic\x20explosive\x20device','image':'../images/tokens/subgame/pbomb.gif','category':'weapon'},'fusion':{'price':0x15e,'name':'Fusion\x20Cannon','description':a46_0x1773e4(0x196),'image':'../images/tokens/subgame/fusion.gif','category':a46_0x1773e4(0x170)},'lock':{'price':0x1c2,'name':'Lock','description':'Lock\x20in\x20your\x20victory.','image':'../images/tokens/Lock.gif','category':'fun'},'blob01':{'price':0x1f4,'name':'Blob\x20Token\x201','description':'A\x20mysterious\x20purple\x20blob\x20token','image':'../images/tokens/blob01.gif','category':'blob'},'plasma':{'price':0x1f4,'name':'Plasma\x20Cannon','description':'High-powered\x20plasma\x20cannon\x20token.','image':'../images/tokens/Plasma.gif','category':a46_0x1773e4(0x170)},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':'Become\x20one\x20with\x20the\x20shadows','image':'../images/tokens/cloak.gif','category':'special'},'pwr02':{'price':0x258,'name':'Shield\x20Orb','description':'Advanced\x20energy\x20storage\x20system','image':'../images/tokens/subgame/pwr02.gif','category':a46_0x1773e4(0x1c8)},'mercury':{'price':0x258,'name':'Mercury\x20Missile','description':a46_0x1773e4(0x1ca),'image':'../images/tokens/Mercury.gif','category':'weapon'},'plasmablobl':{'price':0x258,'name':a46_0x1773e4(0x194),'description':a46_0x1773e4(0x180),'image':'../images/tokens/Plasmablobl.gif','category':a46_0x1773e4(0x183)},'smissile':{'price':0x28a,'name':'Smart\x20Missile','description':'Intelligent\x20targeting\x20system','image':a46_0x1773e4(0x175),'category':'weapon'},'smartmine':{'price':0x2ee,'name':'Smart\x20Mine','description':a46_0x1773e4(0x15e),'image':'../images/tokens/Smartmine.gif','category':'weapon'},'mmissile':{'price':0x320,'name':a46_0x1773e4(0x17a),'description':'Heavy\x20ordinance\x20for\x20tough\x20situations','image':a46_0x1773e4(0x16e),'category':'weapon'},'gauge18':{'price':0x320,'name':'R/Y/B\x20Keys','description':a46_0x1773e4(0x197),'image':a46_0x1773e4(0x1bd),'category':'equipment'},'extralife':{'price':0x320,'name':a46_0x1773e4(0x1ad),'description':'A\x20rare\x20extra\x20life\x20token.','image':a46_0x1773e4(0x16b),'category':'special'},'hostage':{'price':0x3b6,'name':a46_0x1773e4(0x18f),'description':'Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','image':'../images/tokens/Hostage.gif','category':'special'},'phoenix':{'price':0x3b6,'name':a46_0x1773e4(0x18a),'description':a46_0x1773e4(0x168),'image':'../images/tokens/Phoenix.gif','category':'weapon'},'blob02':{'price':0x3e8,'name':'Blob\x20Token\x202','description':'Another\x20enigmatic\x20blob\x20creature','image':'../images/tokens/blob02.gif','category':'blob'},'invuln':{'price':0x5dc,'name':a46_0x1773e4(0x15f),'description':'Become\x20invincible\x20for\x20a\x20short\x20time.','image':'../images/tokens/Invuln.gif','category':'powerup'},'blob03':{'price':0x7d0,'name':a46_0x1773e4(0x1c3),'description':a46_0x1773e4(0x1c1),'image':'../images/tokens/blob03.gif','category':'blob'},'reactor':{'price':0x7d0,'name':'Reactor','description':'The\x20heart\x20of\x20every\x20mine.','image':'../images/tokens/Reactor.gif','category':'special'},'pyro':{'price':0xbb8,'name':a46_0x1773e4(0x188),'description':'The\x20iconic\x20Pyro-GX\x20ship.','image':'../images/tokens/Pyro.gif','category':a46_0x1773e4(0x1b2)}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x2248df=a46_0x1773e4;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document[_0x2248df(0x18c)]('store-content'),pointsDisplay=document[_0x2248df(0x18c)]('user-points'),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x32faa5=>{const _0x14e4fa=a46_0xca3e;if(_0x32faa5){console['log']('‚úÖ\x20User\x20authenticated:',_0x32faa5['displayName']||_0x32faa5['email']);if(authWarning)authWarning['style'][_0x14e4fa(0x163)]='none';if(storeContainer)storeContainer['style'][_0x14e4fa(0x163)]='block';await loadUserData(_0x32faa5),updateThemeButtons(),updateTokenButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style']['display']='block';if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}function a46_0x47f3(){const _0x490833=['split','displayLadder','dispatchEvent','map','.themes-grid','prototype','\x20Points','points','var(--muted-color,\x20#757575)','A\x20cunning\x20explosive\x20device.','Invulnerability','isUserAdmin','Failed\x20to\x20equip\x20token:\x20','Apply\x20Theme','display','.tokens-grid','Current\x20Theme','toString','price','Fiery\x20phoenix\x20cannon\x20token.','switchTheme','function','../images/tokens/Extralife.gif','classList','floor','../images/tokens/subgame/mmissile.gif','style','weapon','Purchase\x20failed.\x20Please\x20try\x20again.','block','includes','bind','../images/tokens/subgame/smissile.gif','message','.theme-select-btn','forEach','__proto__','Mega\x20Missile','?\x20This\x20will\x20unequip\x20your\x20current\x20token.','visible','innerHTML','not-allowed','Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer','A\x20mysterious\x20plasma\x20blob.','[data-theme]','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20(','blob','adminStatusChanged','can-equip','\x20theme','preventDefault','Pyro','Not\x20enough\x20points.\x20You\x20need\x20','Phoenix\x20Cannon','\x20not\x20found','getElementById','toLocaleString','data','Hostage','can-afford','tokenId','\x20points','default','Plasma\x20Blob','apply-theme','Devastating\x20fusion\x20weapon\x20technology','Monitor\x20your\x20ship\x27s\x20energy\x20levels','Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.','pointer','image','success','userProfiles','sign-in-free','itemId','log','add','Classic\x20RDL','textContent','\x20for\x20','apply','token_','refreshUI','Token\x20clicked:\x20','Show\x20your\x20support\x20with\x20this\x20fan\x20token.','confirm','\x20items,\x20Equipped:\x20','className','exception','Extra\x20Life','uid','warn','Unknown','disabled','ship','currentUser','cursor','querySelectorAll','remove','error','\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','Please\x20sign\x20in\x20to\x20unequip\x20tokens','Sign\x20in\x20to\x20Purchase','Failed\x20to\x20unequip\x20token:\x20','User\x20profile\x20not\x20found','../images/tokens/gauge18.gif','inventory','unavailable','body','The\x20final\x20blob\x20in\x20the\x20collection','Error\x20loading\x20user\x20data:','Blob\x20Token\x203','Token\x20','equippedToken','FREE','Purchase','powerup','\x20points?','Fast\x20and\x20furious\x20missile\x20token.','dataset','name','equipped','For\x20the\x20angry\x20type.','ThemeSystem','../images/tokens/Marker.gif','Proximity\x20Bomb','exists','querySelector','You\x20need\x20','info','opacity'];a46_0x47f3=function(){return _0x490833;};return a46_0x47f3();}async function loadUserData(_0xe38d13){const _0x53f187=a46_0x1773e4;try{const _0x10fd51=doc(db,'userProfiles',_0xe38d13[_0x53f187(0x1ae)]),_0x2a1d50=await getDoc(_0x10fd51);if(_0x2a1d50[_0x53f187(0x1d2)]()){const _0x17425f=_0x2a1d50['data']();userData={'points':_0x17425f['points']||0x0,'inventory':_0x17425f[_0x53f187(0x1be)]||[],'isAdmin':_0x17425f['isAdmin']||![],'equippedToken':_0x17425f['equippedToken']||null},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window[_0x53f187(0x160)]=userData['isAdmin'],userData['isAdmin']&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window[_0x53f187(0x157)](new CustomEvent(_0x53f187(0x184),{'detail':{'isAdmin':!![]}}))),console[_0x53f187(0x19f)]('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+',\x20Inventory:\x20'+userData['inventory']['length']+_0x53f187(0x1aa)+(userData['equippedToken']||'none'));}else await setDoc(_0x10fd51,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0xe38d13['displayName']||_0xe38d13['email']?.[_0x53f187(0x155)]('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay['textContent']='0'),window[_0x53f187(0x160)]=![],console[_0x53f187(0x19f)]('New\x20user\x20profile\x20created');}catch(_0x247b59){console[_0x53f187(0x1b7)](_0x53f187(0x1c2),_0x247b59);}}function userOwnsTheme(_0x15cb4f){if(THEMES[_0x15cb4f]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x15cb4f);}function userOwnsToken(_0x20a950){const _0x22bb82=a46_0x1773e4;return userData[_0x22bb82(0x1be)]['includes']('token_'+_0x20a950);}function userHasTokenEquipped(_0x30839a){return userData['equippedToken']===_0x30839a;}function getEquippedToken(){const _0x23fa3c=a46_0x1773e4;return userData[_0x23fa3c(0x1c5)]||null;}async function purchaseTheme(_0x2fe540){const _0x49d9e5=a46_0x1773e4,_0x4fd8fd=auth['currentUser'];if(!_0x4fd8fd)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0xa96796=THEMES[_0x2fe540];if(!_0xa96796)return console['error']('Theme\x20'+_0x2fe540+'\x20not\x20found'),![];if(userData['points']<_0xa96796[_0x49d9e5(0x167)])return showMessage(_0x49d9e5(0x189)+(_0xa96796['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x2fe540))return showMessage('You\x20already\x20own\x20the\x20'+_0xa96796['name']+_0x49d9e5(0x186),'info'),![];try{return await processPurchase(_0x2fe540,_0xa96796,'theme');}catch(_0x2167a5){return console['error']('Theme\x20purchase\x20failed:',_0x2167a5),showMessage(_0x49d9e5(0x171),'error'),![];}}async function purchaseToken(_0x52c0bb){const _0x5c56c6=a46_0x1773e4,_0x55adf2=auth['currentUser'];if(!_0x55adf2)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens',_0x5c56c6(0x1b7)),![];const _0x53ee8d=TOKENS[_0x52c0bb];if(!_0x53ee8d)return console['error'](_0x5c56c6(0x1c4)+_0x52c0bb+'\x20not\x20found'),![];if(userData['points']<_0x53ee8d['price'])return showMessage(_0x5c56c6(0x189)+(_0x53ee8d[_0x5c56c6(0x167)]-userData['points'])+'\x20more\x20points.',_0x5c56c6(0x1b7)),![];if(userOwnsToken(_0x52c0bb))return showMessage('You\x20already\x20own\x20the\x20'+_0x53ee8d['name']+'\x20token','info'),![];try{return await processPurchase(_0x52c0bb,_0x53ee8d,'token');}catch(_0xc01108){return console[_0x5c56c6(0x1b7)]('Token\x20purchase\x20failed:',_0xc01108),showMessage(_0x5c56c6(0x171),'error'),![];}}async function processPurchase(_0x7ded0f,_0x271c7f,_0x59bedb){const _0x3287e3=a46_0x1773e4,_0x3f5631=auth['currentUser'];try{const _0x37066c=doc(db,'userProfiles',_0x3f5631['uid']),_0x2e3b82=await getDoc(_0x37066c);if(!_0x2e3b82['exists']())return showMessage(_0x3287e3(0x1bc),_0x3287e3(0x1b7)),![];const _0x2a5b18=_0x2e3b82['data'](),_0x6b59=_0x2a5b18[_0x3287e3(0x15c)]||0x0,_0x3df414=_0x2a5b18['inventory']||[];if(_0x6b59<_0x271c7f['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x3df414[_0x3287e3(0x173)](_0x59bedb+'_'+_0x7ded0f))return showMessage('You\x20already\x20own\x20this\x20'+_0x59bedb,'info'),![];const _0x59ab5b=_0x6b59-_0x271c7f[_0x3287e3(0x167)],_0x2a7acf=[..._0x3df414,_0x59bedb+'_'+_0x7ded0f];await updateDoc(_0x37066c,{'points':_0x59ab5b,'inventory':_0x2a7acf,'lastPurchase':serverTimestamp()});if(_0x59bedb==='token')try{const _0x29085b=doc(db,'userTokens',_0x3f5631['uid']),_0x1a63b4=await getDoc(_0x29085b);let _0x39c06b=[];_0x1a63b4['exists']()&&(_0x39c06b=_0x1a63b4[_0x3287e3(0x18e)]()['tokens']||[]);const _0x555efc=new Date();_0x39c06b['push']({'tokenId':_0x7ded0f,'tokenName':_0x271c7f['name'],'tokenImage':_0x271c7f[_0x3287e3(0x19a)],'category':_0x271c7f['category'],'purchasedAt':_0x555efc,'price':_0x271c7f[_0x3287e3(0x167)],'equipped':![]}),await setDoc(_0x29085b,{'userId':_0x3f5631['uid'],'username':_0x2a5b18['username']||_0x3f5631['displayName']||_0x3287e3(0x1b0),'tokens':_0x39c06b,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache===_0x3287e3(0x16a)&&clearTokenCache(_0x3f5631['uid']),console['log']('‚úÖ\x20Token\x20'+_0x7ded0f+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0xd576d8){console[_0x3287e3(0x1af)]('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:',_0xd576d8),_0xd576d8['code']==='permission-denied'?console['log']('üîß\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console['error']('Unexpected\x20token\x20error:',_0xd576d8);}try{await addDoc(collection(db,'transactions'),{'userId':_0x3f5631['uid'],'userEmail':_0x3f5631['email'],'itemId':_0x59bedb+'_'+_0x7ded0f,'itemTitle':_0x271c7f[_0x3287e3(0x1cc)],'price':_0x271c7f['price'],'type':'purchase','category':_0x59bedb,'timestamp':serverTimestamp()});}catch(_0x3a4346){console['warn']('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x3a4346);}return userData['points']=_0x59ab5b,userData['inventory']=_0x2a7acf,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),updateTokenButtons(),_0x59bedb==='theme'&&updateThemeButtons(),console['log']('‚úÖ\x20Purchased\x20'+_0x271c7f['name']+_0x3287e3(0x1a3)+_0x271c7f[_0x3287e3(0x167)]+'\x20points'),showMessage('Successfully\x20purchased\x20'+_0x271c7f[_0x3287e3(0x1cc)]+'!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','success'),!![];}catch(_0x4c94fe){console['error']('Purchase\x20processing\x20error:',_0x4c94fe);if(_0x4c94fe['code']==='permission-denied')showMessage(_0x3287e3(0x198),'error');else{if(_0x4c94fe['code']===_0x3287e3(0x1bf))showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.','error');else _0x4c94fe['code']==='unauthenticated'?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.','error'):showMessage(_0x3287e3(0x171),'error');}return![];}}function a46_0xca3e(_0x3cfd73,_0x5c544e){const _0x2d1712=a46_0x47f3();return a46_0xca3e=function(_0x102a17,_0x1ff082){_0x102a17=_0x102a17-0x155;let _0x47f30b=_0x2d1712[_0x102a17];return _0x47f30b;},a46_0xca3e(_0x3cfd73,_0x5c544e);}async function equipToken(_0x522d3d){const _0x484869=a46_0x1773e4,_0x5d0e3a=auth[_0x484869(0x1b3)];if(!_0x5d0e3a)return showMessage('Please\x20sign\x20in\x20to\x20equip\x20tokens','error'),![];const _0x285cb3=TOKENS[_0x522d3d];if(!_0x285cb3)return console['error']('Token\x20'+_0x522d3d+'\x20not\x20found'),![];if(!userOwnsToken(_0x522d3d))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it',_0x484869(0x1b7)),![];try{const _0x223920=doc(db,'userProfiles',_0x5d0e3a[_0x484869(0x1ae)]);await updateDoc(_0x223920,{'equippedToken':_0x522d3d,'lastTokenEquip':serverTimestamp()});try{const _0x41af8e=doc(db,'userTokens',_0x5d0e3a['uid']),_0xafd08e=await getDoc(_0x41af8e);if(_0xafd08e['exists']()){const _0x376c25=_0xafd08e['data'](),_0x578a31=_0x376c25['tokens']||[],_0x3d86d6=_0x578a31[_0x484869(0x158)](_0x1e86af=>({..._0x1e86af,'equipped':_0x1e86af[_0x484869(0x191)]===_0x522d3d}));await updateDoc(_0x41af8e,{'tokens':_0x3d86d6,'equippedToken':_0x522d3d,'lastUpdated':serverTimestamp()});}}catch(_0x5113d4){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0x5113d4);}return userData['equippedToken']=_0x522d3d,typeof clearTokenCache===_0x484869(0x16a)&&(clearTokenCache(_0x5d0e3a[_0x484869(0x1ae)]),clearTokenCache()),setTimeout(()=>{const _0x23dc8b=_0x484869;window['displayLadder']&&typeof window['displayLadder']===_0x23dc8b(0x16a)&&(console['log']('üîÑ\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window['RedeemStore'][_0x23dc8b(0x1a6)]==='function'&&window['RedeemStore']['refreshUI']();},0x1f4),console['log']('‚úÖ\x20Equipped\x20token:\x20'+_0x285cb3['name']),showMessage(_0x285cb3[_0x484869(0x1cc)]+_0x484869(0x1b8),_0x484869(0x19b)),!![];}catch(_0x52565e){return console['error']('Token\x20equip\x20failed:',_0x52565e),_0x52565e['code']==='permission-denied'?showMessage('Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.','warning'):showMessage(_0x484869(0x161)+_0x52565e['message'],'error'),![];}}async function unequipToken(){const _0x3b9894=a46_0x1773e4,_0x1c93e3=auth['currentUser'];if(!_0x1c93e3)return showMessage(_0x3b9894(0x1b9),'error'),![];if(!userData['equippedToken'])return showMessage('No\x20token\x20is\x20currently\x20equipped','info'),![];try{const _0x32235f=doc(db,_0x3b9894(0x19c),_0x1c93e3['uid']);await updateDoc(_0x32235f,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x4dc0a9=doc(db,'userTokens',_0x1c93e3[_0x3b9894(0x1ae)]),_0xadfa14=await getDoc(_0x4dc0a9);if(_0xadfa14['exists']()){const _0x3424bc=_0xadfa14['data'](),_0x56f232=_0x3424bc['tokens']||[],_0x3c6346=_0x56f232['map'](_0x417b50=>({..._0x417b50,'equipped':![]}));await updateDoc(_0x4dc0a9,{'tokens':_0x3c6346,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData['equippedToken']=null,typeof clearTokenCache==='function'&&(clearTokenCache(_0x1c93e3['uid']),clearTokenCache()),setTimeout(()=>{const _0x2d7385=_0x3b9894;window[_0x2d7385(0x156)]&&typeof window['displayLadder']==='function'&&(console['log']('üîÑ\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window['RedeemStore']['refreshUI']==='function'&&window['RedeemStore']['refreshUI']();},0x1f4),console['log']('‚úÖ\x20Token\x20unequipped'),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x4ff7c9){return console[_0x3b9894(0x1b7)]('Token\x20unequip\x20failed:',_0x4ff7c9),showMessage(_0x3b9894(0x1bb)+_0x4ff7c9['message'],'error'),![];}}async function sellToken(_0x1d2867){const _0x3fb264=a46_0x1773e4,_0x210dbc=auth[_0x3fb264(0x1b3)];if(!_0x210dbc)return showMessage('Please\x20sign\x20in\x20to\x20sell\x20tokens','error'),![];if(!userData['isAdmin'])return showMessage('Only\x20admins\x20can\x20sell\x20tokens','error'),![];const _0x59720e=TOKENS[_0x1d2867];if(!_0x59720e)return console['error']('Token\x20'+_0x1d2867+'\x20not\x20found'),![];if(!userOwnsToken(_0x1d2867))return showMessage('You\x20don\x27t\x20own\x20this\x20token','error'),![];try{const _0x5b330a=doc(db,'userProfiles',_0x210dbc['uid']),_0xa605fa=await getDoc(_0x5b330a),_0x3f6b0c=_0xa605fa['data'](),_0x5f41e8=Math[_0x3fb264(0x16d)](_0x59720e[_0x3fb264(0x167)]*0.5),_0x3c26f0=(_0x3f6b0c['points']||0x0)+_0x5f41e8,_0x134e46=(_0x3f6b0c['inventory']||[])['filter'](_0x5ca4cf=>_0x5ca4cf!==_0x3fb264(0x1a5)+_0x1d2867),_0x2808f5=_0x3f6b0c['equippedToken']===_0x1d2867?null:_0x3f6b0c[_0x3fb264(0x1c5)];await updateDoc(_0x5b330a,{'points':_0x3c26f0,'inventory':_0x134e46,'equippedToken':_0x2808f5,'lastSale':serverTimestamp()});const _0x55986d=doc(db,'userTokens',_0x210dbc['uid']),_0x4c1f89=await getDoc(_0x55986d);if(_0x4c1f89['exists']()){const _0x46e11d=_0x4c1f89['data'](),_0x54d96c=_0x46e11d['tokens']||[],_0x5267fa=_0x54d96c['filter'](_0x4a8784=>_0x4a8784['tokenId']!==_0x1d2867);await updateDoc(_0x55986d,{'tokens':_0x5267fa,'equippedToken':_0x2808f5,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0x210dbc['uid'],'userEmail':_0x210dbc['email'],'itemId':'token_'+_0x1d2867,'itemTitle':_0x59720e['name'],'refund':_0x5f41e8,'originalPrice':_0x59720e['price'],'type':'sale','category':'token','timestamp':serverTimestamp()}),userData['points']=_0x3c26f0,userData['inventory']=_0x134e46,userData[_0x3fb264(0x1c5)]=_0x2808f5,pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x3fb264(0x18d)]()),typeof clearTokenCache==='function'&&clearTokenCache(_0x210dbc[_0x3fb264(0x1ae)]),console['log']('‚úÖ\x20Sold\x20token\x20'+_0x59720e['name']+'\x20for\x20'+_0x5f41e8+_0x3fb264(0x192)),showMessage('Sold\x20'+_0x59720e['name']+'\x20for\x20'+_0x5f41e8+'\x20points\x20(50%\x20refund)','success'),!![];}catch(_0x3b01f9){return console[_0x3fb264(0x1b7)]('Token\x20sale\x20failed:',_0x3b01f9),showMessage('Failed\x20to\x20sell\x20token:\x20'+_0x3b01f9[_0x3fb264(0x176)],_0x3fb264(0x1b7)),![];}}function applyTheme(_0xefe15c){const _0x4ece36=a46_0x1773e4;if(!userOwnsTheme(_0xefe15c))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window['ThemeSystem']?(window[_0x4ece36(0x1cf)][_0x4ece36(0x169)](_0xefe15c),showMessage((THEMES[_0xefe15c]?.[_0x4ece36(0x1cc)]||_0xefe15c)+'\x20theme\x20applied!','success'),!![]):(console[_0x4ece36(0x1b7)]('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x50be4a=a46_0x1773e4,_0x2386a5=document['querySelector'](_0x50be4a(0x159));if(!_0x2386a5){console[_0x50be4a(0x1b7)]('Themes\x20container\x20not\x20found');return;}_0x2386a5['innerHTML']='',Object['entries'](THEMES)['forEach'](([_0x4cc2f6,_0x3cd2ae])=>{const _0x116c3d=_0x50be4a,_0x4f10d0=document['createElement']('div');_0x4f10d0['className']='store-item',_0x4f10d0['dataset']['theme']=_0x4cc2f6,_0x4f10d0['dataset'][_0x116c3d(0x19e)]='theme_'+_0x4cc2f6,_0x4f10d0['dataset']['price']=_0x3cd2ae['price'],_0x4f10d0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x4cc2f6+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x3cd2ae[_0x116c3d(0x167)]===0x0?_0x116c3d(0x1c6):_0x3cd2ae['price']+_0x116c3d(0x15b))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x3cd2ae['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x3cd2ae['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2386a5['appendChild'](_0x4f10d0);}),setupThemeButtons();}function buildTokenItems(){const _0x10fd97=a46_0x1773e4,_0x4068bb=document[_0x10fd97(0x1d3)](_0x10fd97(0x164));if(!_0x4068bb){console['error']('Tokens\x20container\x20not\x20found');return;}_0x4068bb['innerHTML']='',Object['entries'](TOKENS)['forEach'](([_0x2c1c29,_0x61072a])=>{const _0x56c91d=_0x10fd97,_0x4dcb90=document['createElement']('div');_0x4dcb90[_0x56c91d(0x1ab)]='store-item\x20token-item',_0x4dcb90['dataset']['token']=_0x2c1c29,_0x4dcb90[_0x56c91d(0x1cb)]['itemId']='token_'+_0x2c1c29,_0x4dcb90['dataset']['price']=_0x61072a['price'];const _0x2b47c5=userData['isAdmin']&&userOwnsToken(_0x2c1c29)?_0x56c91d(0x182)+Math[_0x56c91d(0x16d)](_0x61072a['price']*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x4dcb90[_0x56c91d(0x17d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x61072a['image']+'\x22\x20alt=\x22'+_0x61072a['name']+'\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+_0x61072a[_0x56c91d(0x167)]+'\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2b47c5+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4068bb['appendChild'](_0x4dcb90);}),setupTokenButtons();}function setupThemeButtons(){const _0x17a168=a46_0x1773e4,_0x195246=document['querySelectorAll'](_0x17a168(0x177));_0x195246[_0x17a168(0x178)](_0x2fa03b=>{_0x2fa03b['addEventListener']('click',async _0xa1860d=>{const _0x129cac=a46_0xca3e;_0xa1860d[_0x129cac(0x187)]();const _0x74fe4b=auth[_0x129cac(0x1b3)];if(!_0x74fe4b){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x8de58f=_0x2fa03b['closest']('[data-theme]'),_0x50c271=_0x8de58f['dataset']['theme'],_0xcff060=THEMES[_0x50c271];if(!_0xcff060){console['error']('Theme\x20'+_0x50c271+'\x20not\x20found');return;}console['log']('Theme\x20clicked:\x20'+_0xcff060['name']+'\x20('+_0x50c271+')');if(_0x2fa03b['disabled']){_0xcff060['price']>0x0&&showMessage(_0x129cac(0x1d4)+_0xcff060['price']+'\x20points\x20to\x20purchase\x20this\x20theme',_0x129cac(0x1b7));return;}if(_0x2fa03b['textContent']==='Current\x20Theme'){showMessage(_0xcff060['name']+'\x20is\x20already\x20your\x20current\x20theme',_0x129cac(0x1d5));return;}if(_0x2fa03b['textContent']===_0x129cac(0x162)){applyTheme(_0x50c271),updateThemeButtons();return;}if(_0x2fa03b['textContent'][_0x129cac(0x173)]('Buy')){const _0x122e26=window[_0x129cac(0x1a9)]('Purchase\x20'+_0xcff060['name']+'\x20theme\x20for\x20'+_0xcff060['price']+'\x20points?');if(!_0x122e26)return;const _0xf56d99=await purchaseTheme(_0x50c271);_0xf56d99&&(showMessage(_0xcff060[_0x129cac(0x1cc)]+'\x20theme\x20purchased!','success'),applyTheme(_0x50c271),updateThemeButtons());return;}userOwnsTheme(_0x50c271)?applyTheme(_0x50c271):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function setupTokenButtons(){const _0x463d2b=a46_0x1773e4,_0x162359=document['querySelectorAll']('.token-select-btn'),_0xcfca24=document['querySelectorAll']('.token-equip-btn'),_0x24549b=document[_0x463d2b(0x1b5)]('.token-sell-btn');_0x162359['forEach'](_0x51e386=>{_0x51e386['addEventListener']('click',async _0x28b77a=>{const _0x4a5e41=a46_0xca3e;_0x28b77a[_0x4a5e41(0x187)]();const _0x144844=auth[_0x4a5e41(0x1b3)];if(!_0x144844){showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error');return;}const _0xc0488c=_0x51e386['closest']('[data-token]'),_0x57b530=_0xc0488c['dataset']['token'],_0x185f5f=TOKENS[_0x57b530];if(!_0x185f5f){console['error']('Token\x20'+_0x57b530+_0x4a5e41(0x18b));return;}console['log'](_0x4a5e41(0x1a7)+_0x185f5f['name']+'\x20('+_0x57b530+')');if(_0x51e386['disabled']){showMessage(_0x4a5e41(0x1d4)+_0x185f5f[_0x4a5e41(0x167)]+'\x20points\x20to\x20purchase\x20this\x20token','error');return;}if(_0x51e386['textContent']==='Owned'){showMessage('You\x20already\x20own\x20the\x20'+_0x185f5f['name']+'\x20token','info');return;}if(_0x51e386[_0x4a5e41(0x1a2)][_0x4a5e41(0x173)](_0x4a5e41(0x1c7))||_0x51e386['textContent'][_0x4a5e41(0x173)]('Buy')){const _0x2e57e3=window['confirm']('Purchase\x20'+_0x185f5f['name']+'\x20token\x20for\x20'+_0x185f5f['price']+_0x4a5e41(0x1c9));if(!_0x2e57e3)return;const _0x4936c2=await purchaseToken(_0x57b530);_0x4936c2&&updateTokenButtons();return;}});}),_0xcfca24['forEach'](_0x509a9e=>{_0x509a9e['addEventListener']('click',async _0x5de598=>{const _0x8bbd43=a46_0xca3e;_0x5de598['preventDefault']();const _0x3b9e35=_0x509a9e['closest']('[data-token]'),_0x27c0af=_0x3b9e35[_0x8bbd43(0x1cb)]['token'],_0x3f4ee8=TOKENS[_0x27c0af];if(_0x509a9e['textContent']==='Equipped'){const _0x511fab=window[_0x8bbd43(0x1a9)]('Unequip\x20'+_0x3f4ee8['name']+'?');if(!_0x511fab)return;const _0x1b9393=await unequipToken();_0x1b9393&&updateTokenButtons();}else{const _0x3f7dfb=window['confirm']('Equip\x20'+_0x3f4ee8[_0x8bbd43(0x1cc)]+_0x8bbd43(0x17b));if(!_0x3f7dfb)return;const _0x55a043=await equipToken(_0x27c0af);_0x55a043&&updateTokenButtons();}});}),_0x24549b['forEach'](_0x388e63=>{_0x388e63['addEventListener']('click',async _0x21c06e=>{const _0x2bcb33=a46_0xca3e;_0x21c06e[_0x2bcb33(0x187)]();const _0x223e1e=_0x388e63['closest']('[data-token]'),_0x5b4cef=_0x223e1e[_0x2bcb33(0x1cb)]['token'],_0x1ec109=TOKENS[_0x5b4cef],_0x5b63f3=Math[_0x2bcb33(0x16d)](_0x1ec109['price']*0.5),_0x44e695=window[_0x2bcb33(0x1a9)]('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x1ec109['name']+_0x2bcb33(0x1a3)+_0x5b63f3+'\x20points?\x20This\x20cannot\x20be\x20undone.');if(!_0x44e695)return;const _0x7c1d97=await sellToken(_0x5b4cef);_0x7c1d97&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0x5e96e6=a46_0x1773e4,_0x42936e=window[_0x5e96e6(0x1cf)]?window['ThemeSystem']['getCurrentTheme']():'default',_0x4b04e7=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')['forEach'](_0x2a5a60=>{const _0x23281f=_0x5e96e6,_0xeac651=_0x2a5a60['closest'](_0x23281f(0x181)),_0x95f6d2=_0xeac651['dataset']['theme'],_0x1760e6=THEMES[_0x95f6d2];if(!_0x1760e6)return;_0x2a5a60['disabled']=![],_0x2a5a60['style'][_0x23281f(0x1d6)]='',_0x2a5a60['style']['cursor']='pointer',_0x2a5a60[_0x23281f(0x16c)]['remove']('current-theme','apply-theme',_0x23281f(0x190),'cannot-afford','sign-in-free','sign-in-paid');if(!_0x4b04e7){_0x1760e6[_0x23281f(0x167)]===0x0?(_0x2a5a60['textContent']='Sign\x20in\x20to\x20Apply',_0x2a5a60['classList']['add'](_0x23281f(0x19d))):(_0x2a5a60['textContent']=_0x23281f(0x1ba),_0x2a5a60['disabled']=!![],_0x2a5a60[_0x23281f(0x16f)]['opacity']='0.7',_0x2a5a60['classList']['add']('sign-in-paid'));return;}if(_0x95f6d2===_0x42936e){_0x2a5a60[_0x23281f(0x1a2)]=_0x23281f(0x165),_0x2a5a60[_0x23281f(0x16c)]['add']('current-theme'),_0x2a5a60[_0x23281f(0x1b1)]=!![],_0x2a5a60[_0x23281f(0x16f)][_0x23281f(0x1b4)]=_0x23281f(0x193);return;}if(userOwnsTheme(_0x95f6d2)){_0x2a5a60['textContent']='Apply\x20Theme',_0x2a5a60['classList']['add'](_0x23281f(0x195));return;}if(userData['points']>=_0x1760e6['price']){_0x2a5a60['textContent']='Buy\x20for\x20'+_0x1760e6['price']+_0x23281f(0x15b),_0x2a5a60[_0x23281f(0x16c)]['add']('can-afford');return;}_0x2a5a60['textContent']='Need\x20'+_0x1760e6['price']+_0x23281f(0x15b),_0x2a5a60['classList'][_0x23281f(0x1a0)]('cannot-afford'),_0x2a5a60[_0x23281f(0x16f)]['opacity']='0.5',_0x2a5a60['disabled']=!![],_0x2a5a60['style']['cursor']=_0x23281f(0x17e);});}function updateTokenButtons(){const _0xe60a53=auth['currentUser'];document['querySelectorAll']('.token-select-btn')['forEach'](_0x4d7a57=>{const _0x199581=a46_0xca3e,_0x9460a7=_0x4d7a57['closest']('[data-token]'),_0x32979c=_0x9460a7['dataset']['token'],_0x27e809=TOKENS[_0x32979c],_0x2a26c8=_0x9460a7['querySelector']('.token-equip-btn'),_0x339ca7=_0x9460a7['querySelector']('.token-sell-btn');if(!_0x27e809)return;_0x4d7a57['disabled']=![],_0x4d7a57['style']['opacity']='',_0x4d7a57['style']['cursor']=_0x199581(0x199);_0x2a26c8&&(_0x2a26c8['style']['display']='none',_0x2a26c8[_0x199581(0x1b1)]=![],_0x2a26c8['style'][_0x199581(0x1d6)]='',_0x2a26c8['classList']['remove']('equipped','can-equip'));_0x339ca7&&(_0x339ca7['style']['display']='none');_0x4d7a57[_0x199581(0x16c)]['remove']('owned','can-afford','cannot-afford','sign-in');if(!_0xe60a53){_0x4d7a57['textContent']='Sign\x20in\x20to\x20Purchase',_0x4d7a57[_0x199581(0x1b1)]=!![],_0x4d7a57[_0x199581(0x16f)]['opacity']='0.7',_0x4d7a57['classList']['add']('sign-in');return;}if(userOwnsToken(_0x32979c)){_0x4d7a57['textContent']='Owned',_0x4d7a57['classList'][_0x199581(0x1a0)]('owned'),_0x4d7a57[_0x199581(0x1b1)]=!![],_0x4d7a57[_0x199581(0x16f)]['cursor']=_0x199581(0x193),_0x4d7a57['style']['background']='var(--success-color,\x20#4CAF50)';_0x2a26c8&&(_0x2a26c8['style']['display']=_0x199581(0x172),userHasTokenEquipped(_0x32979c)?(_0x2a26c8['textContent']='Equipped',_0x2a26c8['classList'][_0x199581(0x1a0)](_0x199581(0x1cd)),_0x2a26c8['style']['background']='var(--accent-color,\x20#2196F3)',_0x2a26c8['style']['cursor']=_0x199581(0x199)):(_0x2a26c8['textContent']='Equip',_0x2a26c8['classList'][_0x199581(0x1a0)](_0x199581(0x185)),_0x2a26c8['style']['background']='var(--info-color,\x20#17a2b8)',_0x2a26c8['style']['cursor']=_0x199581(0x199)));_0x339ca7&&userData['isAdmin']&&(_0x339ca7['style']['display']='block');return;}if(userData['points']>=_0x27e809[_0x199581(0x167)]){_0x4d7a57['textContent']='Buy\x20for\x20'+_0x27e809['price']+'\x20Points',_0x4d7a57['classList']['add'](_0x199581(0x190)),_0x4d7a57['style']['background']='';return;}_0x4d7a57[_0x199581(0x1a2)]='Need\x20'+_0x27e809[_0x199581(0x167)]+'\x20Points',_0x4d7a57['classList']['add']('cannot-afford'),_0x4d7a57['style']['opacity']='0.5',_0x4d7a57['disabled']=!![],_0x4d7a57['style'][_0x199581(0x1b4)]='not-allowed',_0x4d7a57[_0x199581(0x16f)]['background']=_0x199581(0x15d);});}function showMessage(_0xe95510,_0x140f62=a46_0x1773e4(0x1d5)){const _0x377e73=a46_0x1773e4,_0x4ab9df=document['getElementById']('store-message');_0x4ab9df&&_0x4ab9df[_0x377e73(0x1b6)]();const _0x167f7e=document['createElement']('div');_0x167f7e['id']='store-message',_0x167f7e['className']='store-message\x20store-message-'+_0x140f62,_0x167f7e[_0x377e73(0x1a2)]=_0xe95510,document[_0x377e73(0x1c0)]['appendChild'](_0x167f7e),requestAnimationFrame(()=>{const _0x5960ef=_0x377e73;_0x167f7e[_0x5960ef(0x16c)]['add']('visible');}),setTimeout(()=>{const _0x3c8675=_0x377e73;_0x167f7e['classList']['remove'](_0x3c8675(0x17c)),setTimeout(()=>{const _0x257780=_0x3c8675;_0x167f7e['parentNode']&&_0x167f7e[_0x257780(0x1b6)]();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console['log']('üè™\x20Redeem\x20store\x20loaded');