const a33_0xf1c348=(function(){let _0x5cbe74=!![];return function(_0x4b693d,_0xccdc58){const _0x5311dc=_0x5cbe74?function(){const _0x56e670=a33_0x4511;if(_0xccdc58){const _0x48be49=_0xccdc58[_0x56e670(0x1ce)](_0x4b693d,arguments);return _0xccdc58=null,_0x48be49;}}:function(){};return _0x5cbe74=![],_0x5311dc;};}()),a33_0x4db0be=a33_0xf1c348(this,function(){const _0x9799c5=a33_0x4511,_0x1ae9c9=function(){const _0x3ac38b=a33_0x4511;let _0x378495;try{_0x378495=Function(_0x3ac38b(0x1e0)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x155c06){_0x378495=window;}return _0x378495;},_0x38ee74=_0x1ae9c9(),_0x32c8ba=_0x38ee74['console']=_0x38ee74[_0x9799c5(0x1f6)]||{},_0x2d4cc2=[_0x9799c5(0x1b6),_0x9799c5(0x1e2),'info',_0x9799c5(0x1d7),'exception',_0x9799c5(0x1c2),'trace'];for(let _0x2bf4a1=0x0;_0x2bf4a1<_0x2d4cc2['length'];_0x2bf4a1++){const _0x2a0f67=a33_0xf1c348['constructor'][_0x9799c5(0x1f1)][_0x9799c5(0x1d2)](a33_0xf1c348),_0x3cfe42=_0x2d4cc2[_0x2bf4a1],_0x98c83b=_0x32c8ba[_0x3cfe42]||_0x2a0f67;_0x2a0f67['__proto__']=a33_0xf1c348['bind'](a33_0xf1c348),_0x2a0f67['toString']=_0x98c83b[_0x9799c5(0x1f0)]['bind'](_0x98c83b),_0x32c8ba[_0x3cfe42]=_0x2a0f67;}});a33_0x4db0be();function a33_0x4511(_0x4eba32,_0x3e3c7b){const _0x4db0be=a33_0x2862();return a33_0x4511=function(_0xf1c348,_0x4da13d){_0xf1c348=_0xf1c348-0x1b4;let _0x28624e=_0x4db0be[_0xf1c348];return _0x28624e;},a33_0x4511(_0x4eba32,_0x3e3c7b);}import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x4e8fd5 from'./firebase-idle-wrapper.js';const styleEl=document['createElement']('style');styleEl['textContent']='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0xd2c482=![]){const _0x58dfd9=a33_0x4511,_0x6c9e18=document['querySelector'](_0x58dfd9(0x1ec));if(!_0x6c9e18){console['error'](_0x58dfd9(0x1bb));return;}_0x6c9e18[_0x58dfd9(0x1d3)]=_0x58dfd9(0x1ea);try{const _0x15e8b9=Date[_0x58dfd9(0x1b8)]();if(!_0xd2c482&&playerCacheD3[_0x58dfd9(0x1ee)]&&_0x15e8b9-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x168741=collection(db,'playersD3'),_0xdb27e3=await getDocs(_0x168741),_0x476462=[];_0xdb27e3[_0x58dfd9(0x1c6)](_0x2b4f48=>{const _0x2d6cb8=_0x58dfd9,_0x37977e=_0x2b4f48['data']();_0x37977e[_0x2d6cb8(0x1e4)]&&_0x476462['push']({..._0x37977e,'id':_0x2b4f48['id'],'elo':_0x37977e[_0x2d6cb8(0x1b4)]||0x0,'position':_0x37977e['position']||Number['MAX_SAFE_INTEGER']});});const _0x5b58b1=collection(db,'userProfiles'),_0x1c0eb0=await getDocs(_0x5b58b1),_0xcd778=new Map();_0x1c0eb0['forEach'](_0x31cfda=>{const _0x3aafb5=_0x31cfda['data']();_0x3aafb5['username']&&_0xcd778['set'](_0x3aafb5['username']['toLowerCase'](),_0x3aafb5);});for(const _0xa0f61a of _0x476462){const _0x2bf5bd=_0xa0f61a['username']['toLowerCase']();if(_0xcd778[_0x58dfd9(0x1f4)](_0x2bf5bd)){const _0x16735b=_0xcd778['get'](_0x2bf5bd);_0x16735b[_0x58dfd9(0x1c7)]&&(_0xa0f61a['country']=_0x16735b['country']['toLowerCase']());}}const _0x532980=_0x476462['map'](_0x228377=>_0x228377['username']),_0x26b1b3=await fetchBatchMatchStatsD3(_0x532980);_0x476462['sort']((_0x3e7429,_0x14e743)=>{const _0x4acef9=_0x58dfd9,_0x3d38f3=_0x26b1b3['get'](_0x3e7429['username'])?.[_0x4acef9(0x1de)]||0x0,_0x3bc06a=_0x26b1b3['get'](_0x14e743[_0x4acef9(0x1e4)])?.['totalMatches']||0x0;if(_0x3d38f3===0x0!==(_0x3bc06a===0x0))return _0x3d38f3===0x0?0x1:-0x1;return(_0x3e7429['position']||0x3e7)-(_0x14e743['position']||0x3e7);}),_0x476462['forEach']((_0x2b272c,_0x5697b2)=>{const _0x38327f=_0x58dfd9;_0x2b272c[_0x38327f(0x1f8)]=_0x5697b2+0x1;}),playerCacheD3['data']=_0x476462,playerCacheD3['timestamp']=_0x15e8b9,updateLadderDisplayD3(_0x476462);}catch(_0x54751f){console['error']('Error\x20loading\x20D3\x20ladder:',_0x54751f),_0x6c9e18['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x54751f[_0x58dfd9(0x1c0)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0xc451bc){if(!_0xc451bc)return 0x0;const _0x14865a=_0xc451bc['toDate'](),_0x8f4bec=new Date(),_0x517520=Math['abs'](_0x8f4bec-_0x14865a);return Math['ceil'](_0x517520/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x12132c,_0x44ebe2){const _0x46d0=a33_0x4511;try{const _0x3d6a9d=collection(db,'playersD3'),_0x32ea60=await getDocs(_0x3d6a9d),_0x46cca9=[];_0x32ea60['forEach'](_0x24d103=>{_0x46cca9['push']({'id':_0x24d103['id'],..._0x24d103['data']()});});const _0x42dfa2=_0x46cca9['find'](_0x436490=>_0x436490['username']===_0x12132c),_0xe54ba4=_0x46cca9[_0x46d0(0x1df)](_0x50462e=>_0x50462e[_0x46d0(0x1e4)]===_0x44ebe2);if(!_0x42dfa2||!_0xe54ba4){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x42dfa2['position']>_0xe54ba4['position']){const _0x42530a=_0xe54ba4[_0x46d0(0x1f8)];for(const _0x1f1b49 of _0x46cca9){_0x1f1b49['position']>=_0xe54ba4[_0x46d0(0x1f8)]&&_0x1f1b49[_0x46d0(0x1f8)]<_0x42dfa2['position']&&_0x1f1b49[_0x46d0(0x1e4)]!==_0x12132c&&await updateDoc(doc(db,'playersD3',_0x1f1b49['id']),{'position':_0x1f1b49[_0x46d0(0x1f8)]+0x1});}await updateDoc(doc(db,'playersD3',_0x42dfa2['id']),{'position':_0x42530a});if(_0x42530a===0x1){const _0x18b4f1=doc(db,'playersD3',_0x42dfa2['id']),_0x171136=await getDoc(_0x18b4f1);!_0x171136['data']()['firstPlaceDate']&&await updateDoc(_0x18b4f1,{'firstPlaceDate':Timestamp['now']()});}if(_0xe54ba4['position']===0x1){const _0x3e4033=doc(db,'playersD3',_0xe54ba4['id']);await updateDoc(_0x3e4033,{'firstPlaceDate':null});}}}catch(_0x22a69d){console['error'](_0x46d0(0x1d0),_0x22a69d);}}async function updateLadderDisplayD3(_0xcac012){const _0x3918b7=a33_0x4511;_0xcac012[_0x3918b7(0x1e8)]((_0x460e96,_0x28622b)=>_0x460e96[_0x3918b7(0x1f8)]-_0x28622b['position']);const _0x39bad6=document['querySelector'](_0x3918b7(0x1ec));if(!_0x39bad6)return;_0x39bad6[_0x3918b7(0x1d3)]='';const _0xe7172d=_0xcac012['map'](_0x5e708a=>_0x5e708a['username']),_0x4c7e26=await fetchBatchMatchStatsD3(_0xe7172d),_0x19de7a=document['querySelector'](_0x3918b7(0x1c1));_0x19de7a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0x3c2393=_0xcac012['map'](_0x2917ed=>{const _0x4566b9=_0x3918b7,_0xe16b6b=_0x4c7e26['get'](_0x2917ed[_0x4566b9(0x1e4)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x2917ed,_0xe16b6b);})['join']('');_0x39bad6[_0x3918b7(0x1d3)]=_0x3c2393,getPlayersLastEloChangesD3(_0xe7172d)[_0x3918b7(0x1cb)](_0x53e8dc=>{const _0x5c0687=_0x3918b7,_0x34479f=new Map();_0x39bad6[_0x5c0687(0x1d5)]('tr')['forEach']((_0x349601,_0x3b91fd)=>{_0x3b91fd<_0xe7172d['length']&&_0x34479f['set'](_0xe7172d[_0x3b91fd],_0x349601);}),_0x53e8dc['forEach']((_0x224fc1,_0x5207a9)=>{const _0x447e2a=_0x5c0687,_0x39708e=_0x34479f['get'](_0x5207a9);if(_0x39708e&&_0x224fc1!==0x0){const _0x3bb0e7=_0x39708e['querySelector']('td:nth-child(3)');if(_0x3bb0e7){const _0x1cd00c=_0x224fc1>0x0?'+'+_0x224fc1:''+_0x224fc1,_0x2be94f=_0x3bb0e7[_0x447e2a(0x1da)](_0x447e2a(0x1c5));_0x2be94f&&(_0x2be94f[_0x447e2a(0x1ba)]=_0x1cd00c,_0x2be94f['style']['color']=_0x224fc1>0x0?'#4CAF50':'#F44336',_0x2be94f['style'][_0x447e2a(0x1d1)]='bold',_0x2be94f[_0x447e2a(0x1f7)][_0x447e2a(0x1c9)]='0.85em',_0x2be94f['style']['display']='inline',_0x2be94f['style']['visibility']='visible',_0x2be94f['style']['opacity']='1');}}});})[_0x3918b7(0x1b7)](_0x48e5d0=>console['error'](_0x3918b7(0x1bf),_0x48e5d0));}async function fetchBatchMatchStatsD3(_0x143b9d){const _0x21eec6=a33_0x4511,_0x10026d=new Map();try{const _0x4ce2ae=collection(db,'approvedMatchesD3'),_0x1e7eb0=await getDocs(_0x4ce2ae);_0x1e7eb0[_0x21eec6(0x1c6)](_0x5b3099=>{const _0x391b50=_0x21eec6,_0xffdc84=_0x5b3099['data']();if(_0x143b9d['includes'](_0xffdc84[_0x391b50(0x1e6)])){const _0x4c6a34=_0xffdc84[_0x391b50(0x1e6)];!_0x10026d['has'](_0x4c6a34)&&_0x10026d['set'](_0x4c6a34,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x4c8312=_0x10026d[_0x391b50(0x1c8)](_0x4c6a34);_0x4c8312['wins']++,_0x4c8312['totalMatches']++,_0x4c8312['totalKills']+=parseInt(_0xffdc84['winnerScore'])||0x0,_0x4c8312['totalDeaths']+=parseInt(_0xffdc84[_0x391b50(0x1f3)])||0x0;}if(_0x143b9d['includes'](_0xffdc84[_0x391b50(0x1e9)])){const _0x532e72=_0xffdc84['loserUsername'];!_0x10026d[_0x391b50(0x1f4)](_0x532e72)&&_0x10026d['set'](_0x532e72,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x4027b6=_0x10026d[_0x391b50(0x1c8)](_0x532e72);_0x4027b6[_0x391b50(0x1b9)]++,_0x4027b6[_0x391b50(0x1de)]++,_0x4027b6[_0x391b50(0x1bd)]+=parseInt(_0xffdc84[_0x391b50(0x1f3)])||0x0,_0x4027b6[_0x391b50(0x1cf)]+=parseInt(_0xffdc84['winnerScore'])||0x0;}}),_0x10026d['forEach'](_0x1c3b72=>{const _0x597312=_0x21eec6;_0x1c3b72[_0x597312(0x1d6)]=_0x1c3b72['totalDeaths']>0x0?(_0x1c3b72['totalKills']/_0x1c3b72['totalDeaths'])['toFixed'](0x2):_0x1c3b72['totalKills'],_0x1c3b72['winRate']=_0x1c3b72['totalMatches']>0x0?(_0x1c3b72[_0x597312(0x1dc)]/_0x1c3b72[_0x597312(0x1de)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x2d7d2c){console['error']('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x2d7d2c);}return _0x10026d;}function createPlayerRowD3(_0x4644eb,_0x3c3781){const _0xe6f3fd=a33_0x4511,_0x3a02d5=parseFloat(_0x4644eb[_0xe6f3fd(0x1c3)])||0x0;let _0xdd3133='gray';if(_0x3a02d5>=0x7d0)_0xdd3133='#50C878';else{if(_0x3a02d5>=0x708)_0xdd3133='#FFD700';else{if(_0x3a02d5>=0x640)_0xdd3133='#C0C0C0';else _0x3a02d5>=0x578&&(_0xdd3133=_0xe6f3fd(0x1d9));}}let _0x9036b1='';return _0x4644eb[_0xe6f3fd(0x1c7)]&&(_0x9036b1='<img\x20src=\x22../images/flags/'+_0x4644eb['country'][_0xe6f3fd(0x1ca)]()+_0xe6f3fd(0x1cd)+_0x4644eb['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4644eb[_0xe6f3fd(0x1f8)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x4644eb['username'])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0xdd3133+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4644eb[_0xe6f3fd(0x1e4)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x9036b1+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0xdd3133+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3a02d5+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c3781['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c3781['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c3781['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c3781[_0xe6f3fd(0x1d6)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c3781['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function a33_0x2862(){const _0x38e540=['eloRating','\x20ELO\x20change:\x20','log','catch','now','losses','textContent','D3\x20Ladder\x20table\x20body\x20not\x20found','pilot','totalKills','length','Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:','message','#ladder-d3\x20thead\x20tr','table','elo','timestamp','.trend-indicator','forEach','country','get','fontSize','toLowerCase','then','D3:\x20Fallback\x20query\x20failed:','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','apply','totalDeaths','Error\x20updating\x20D3\x20player\x20positions:','fontWeight','bind','innerHTML','D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:','querySelectorAll','kda','error','newElo','#CD7F32','querySelector','D3:\x20Found\x20entries\x20for\x20','wins','playerUsername','totalMatches','find','return\x20(function()\x20','previousElo','warn','player','username','empty','winnerUsername','includes','sort','loserUsername','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>','playerId','#ladder-d3\x20tbody','entries','data','from','toString','prototype','set','loserScore','has','seconds','console','style','position'];a33_0x2862=function(){return _0x38e540;};return a33_0x2862();}async function getPlayersLastEloChangesD3(_0x1edf6b){const _0x17c9cf=a33_0x4511,_0x43dabb=new Map();_0x1edf6b[_0x17c9cf(0x1c6)](_0x43d013=>_0x43dabb[_0x17c9cf(0x1f2)](_0x43d013,0x0));try{console[_0x17c9cf(0x1b6)](_0x17c9cf(0x1d4),_0x1edf6b);const _0x3c63f2=new Map(),_0x342a9e=await getDocs(collection(db,'playersD3'));_0x342a9e[_0x17c9cf(0x1c6)](_0x16cc1a=>{const _0x1e2908=_0x16cc1a['data']();_0x1e2908['username']&&_0x3c63f2['set'](_0x16cc1a['id'],_0x1e2908['username']);}),console['log']('D3:\x20Player\x20ID\x20mappings:',Array['from'](_0x3c63f2[_0x17c9cf(0x1ed)]()));const _0x24e2b6=collection(db,'eloHistoryD3'),_0x562d21=query(_0x24e2b6,orderBy('timestamp','desc'),limit(0x64)),_0x17438a=await getDocs(_0x562d21);_0x17438a[_0x17c9cf(0x1e5)]?console['log']('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console['log']('D3:\x20Found\x20'+_0x17438a['size']+'\x20entries\x20in\x20eloHistoryD3');const _0x41c134=new Map();_0x17438a['forEach'](_0x674bc5=>{const _0x3dbaaf=_0x17c9cf,_0x276d44=_0x674bc5['data']();let _0x4d27d0=null;if(_0x276d44['username'])_0x4d27d0=_0x276d44['username'];else{if(_0x276d44[_0x3dbaaf(0x1dd)])_0x4d27d0=_0x276d44['playerUsername'];else{if(_0x276d44['player']&&typeof _0x276d44['player']==='string')_0x4d27d0=_0x276d44['player'];else{if(_0x276d44['player']&&_0x3c63f2['has'](_0x276d44['player']))_0x4d27d0=_0x3c63f2['get'](_0x276d44['player']);else _0x276d44[_0x3dbaaf(0x1eb)]&&_0x3c63f2['has'](_0x276d44['playerId'])&&(_0x4d27d0=_0x3c63f2[_0x3dbaaf(0x1c8)](_0x276d44['playerId']));}}}(_0x276d44['username']===_0x3dbaaf(0x1bc)||_0x276d44['playerUsername']==='pilot'||_0x276d44['player']&&_0x3c63f2['get'](_0x276d44[_0x3dbaaf(0x1e3)])==='pilot')&&console[_0x3dbaaf(0x1b6)]('D3:\x20Found\x20pilot\x20entry:',_0x276d44),_0x4d27d0&&_0x1edf6b['includes'](_0x4d27d0)&&(!_0x41c134['has'](_0x4d27d0)&&_0x41c134['set'](_0x4d27d0,[]),_0x41c134['get'](_0x4d27d0)['push']({..._0x276d44,'timestamp':_0x276d44['timestamp']?.[_0x3dbaaf(0x1f5)]||0x0}));}),console[_0x17c9cf(0x1b6)](_0x17c9cf(0x1db)+_0x41c134['size']+'\x20players'),_0x41c134[_0x17c9cf(0x1c6)]((_0x4dee54,_0x3be65f)=>{const _0x18caa7=_0x17c9cf;if(_0x4dee54[_0x18caa7(0x1be)]>0x0){_0x4dee54['sort']((_0x36479c,_0x504362)=>_0x504362['timestamp']-_0x36479c[_0x18caa7(0x1c4)]);const _0x5e55ef=_0x4dee54['find'](_0x4ff3b7=>_0x4ff3b7['change']!==undefined||_0x4ff3b7[_0x18caa7(0x1d8)]!==undefined&&_0x4ff3b7['previousElo']!==undefined);if(_0x5e55ef){let _0x52047e;if(_0x5e55ef['change']!==undefined)_0x52047e=_0x5e55ef['change'];else _0x5e55ef['newElo']!==undefined&&_0x5e55ef[_0x18caa7(0x1e1)]!==undefined&&(_0x52047e=_0x5e55ef['newElo']-_0x5e55ef['previousElo']);_0x52047e!==undefined&&(_0x43dabb['set'](_0x3be65f,_0x52047e),console['log']('D3:\x20'+_0x3be65f+_0x18caa7(0x1b5)+_0x52047e));}}});if(_0x41c134['size']===0x0){console[_0x17c9cf(0x1b6)]('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x53f76b=collection(db,'eloHistory'),_0x5c2e63=query(_0x53f76b,where('gameMode','==','D3'),orderBy('timestamp','desc'),limit(0x32));try{const _0x1ff65d=await getDocs(_0x5c2e63);console[_0x17c9cf(0x1b6)]('D3:\x20Found\x20'+_0x1ff65d['size']+'\x20fallback\x20entries'),_0x1ff65d['forEach'](_0x59946d=>{const _0x17d166=_0x17c9cf,_0x203748=_0x59946d['data']();let _0x2ce16f=_0x203748[_0x17d166(0x1e4)]||_0x203748['playerUsername'];!_0x2ce16f&&_0x203748['player']&&_0x3c63f2[_0x17d166(0x1f4)](_0x203748['player'])&&(_0x2ce16f=_0x3c63f2['get'](_0x203748['player']));if(_0x2ce16f&&_0x1edf6b[_0x17d166(0x1e7)](_0x2ce16f)){const _0xeb2d92=_0x203748['change']||(_0x203748[_0x17d166(0x1d8)]!==undefined&&_0x203748['previousElo']!==undefined?_0x203748['newElo']-_0x203748['previousElo']:0x0);_0xeb2d92!==0x0&&(_0x43dabb['set'](_0x2ce16f,_0xeb2d92),console['log']('D3:\x20'+_0x2ce16f+'\x20fallback\x20ELO\x20change:\x20'+_0xeb2d92));}});}catch(_0x3d69ca){console['log'](_0x17c9cf(0x1cc),_0x3d69ca);}}const _0x1f95bf=Array[_0x17c9cf(0x1ef)](_0x43dabb['entries']())['filter'](([_0x1e81e9,_0x13c5ec])=>_0x13c5ec!==0x0);console[_0x17c9cf(0x1b6)]('D3:\x20Final\x20ELO\x20changes:',_0x1f95bf);}catch(_0x25f647){console['error']('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x25f647);}return _0x43dabb;}export{displayLadderD3,updatePlayerPositions};