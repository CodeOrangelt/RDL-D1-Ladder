const a45_0x326b4d=a45_0x5c76,a45_0x18d335=(function(){let _0x4e8fa5=!![];return function(_0x2eae6f,_0x424864){const _0xbe8797=_0x4e8fa5?function(){if(_0x424864){const _0x2dd953=_0x424864['apply'](_0x2eae6f,arguments);return _0x424864=null,_0x2dd953;}}:function(){};return _0x4e8fa5=![],_0xbe8797;};}()),a45_0x2e015a=a45_0x18d335(this,function(){const _0x48497d=a45_0x5c76;let _0x20356a;try{const _0x2ca044=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x20356a=_0x2ca044();}catch(_0x512686){_0x20356a=window;}const _0x119f04=_0x20356a['console']=_0x20356a['console']||{},_0x5cf00e=['log','warn',_0x48497d(0x1c1),'error','exception','table','trace'];for(let _0x130c6d=0x0;_0x130c6d<_0x5cf00e['length'];_0x130c6d++){const _0x3e5a02=a45_0x18d335['constructor']['prototype'][_0x48497d(0x1c8)](a45_0x18d335),_0x3fbb74=_0x5cf00e[_0x130c6d],_0x5c107d=_0x119f04[_0x3fbb74]||_0x3e5a02;_0x3e5a02[_0x48497d(0x1ca)]=a45_0x18d335[_0x48497d(0x1c8)](a45_0x18d335),_0x3e5a02['toString']=_0x5c107d['toString']['bind'](_0x5c107d),_0x119f04[_0x3fbb74]=_0x3e5a02;}});function a45_0x4803(){const _0x2c2b26=['submit','preventDefault','log','value','loadProfile','onload','setupEventListeners','player-stats','textContent','loserScore','form','files','winnerScore','toFixed','stats-kd','favorite-map','Profile\x20saved\x20successfully!','forEach','matches','Stats\x20calculated:','pfpInput','approvedMatches','info','pfpPreview','handleImageUpload','profiles','get','addEventListener','favoriteMap','bind','getElementById','__proto__','pfpUrl','Error\x20loading\x20profile:','size','currentUser','change','stats-losses','stats-matches'];a45_0x4803=function(){return _0x2c2b26;};return a45_0x4803();}a45_0x2e015a();function a45_0x5c76(_0x3b9075,_0x39bf28){const _0x2e015a=a45_0x4803();return a45_0x5c76=function(_0x18d335,_0x1333ac){_0x18d335=_0x18d335-0x1ab;let _0x4803aa=_0x2e015a[_0x18d335];return _0x4803aa;},a45_0x5c76(_0x3b9075,_0x39bf28);}import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x8170c7=a45_0x5c76;this[_0x8170c7(0x1b5)]=document['getElementById']('profile-form'),this['pfpInput']=document['getElementById']('pfp-upload'),this[_0x8170c7(0x1c2)]=document['getElementById']('profile-preview'),this['statsContainer']=document['getElementById'](_0x8170c7(0x1b2)),this[_0x8170c7(0x1b1)](),this[_0x8170c7(0x1af)]();}['setupEventListeners'](){const _0xf67d57=a45_0x5c76;this['pfpInput'][_0xf67d57(0x1c6)](_0xf67d57(0x1cf),_0xf66e5e=>this[_0xf67d57(0x1c3)](_0xf66e5e)),this['form'][_0xf67d57(0x1c6)](_0xf67d57(0x1ab),_0x31042c=>this['handleSubmit'](_0x31042c));}async[a45_0x326b4d(0x1c3)](_0x262023){const _0x269cbc=a45_0x326b4d,_0x13a329=_0x262023['target']['files'][0x0];if(_0x13a329){const _0x5970cf=new FileReader();_0x5970cf[_0x269cbc(0x1b0)]=_0x19be01=>{const _0x2bf40d=_0x269cbc;this[_0x2bf40d(0x1c2)]['src']=_0x19be01['target']['result'];},_0x5970cf['readAsDataURL'](_0x13a329);}}async['handleSubmit'](_0x5771b3){const _0x3343ed=a45_0x326b4d;_0x5771b3[_0x3343ed(0x1ac)]();const _0xfd565e=auth[_0x3343ed(0x1ce)];if(!_0xfd565e){alert('Please\x20sign\x20in\x20to\x20save\x20your\x20profile');return;}try{const _0x241999=new FormData(this['form']),_0x5de720={'nickname':_0x241999[_0x3343ed(0x1c5)]('nickname'),'motto':_0x241999[_0x3343ed(0x1c5)]('motto'),'favoriteMap':_0x241999['get']('favorite-map'),'favoriteWeapon':_0x241999['get']('favorite-weapon'),'updatedAt':new Date()['toISOString']()},_0x3c9003=this[_0x3343ed(0x1bf)][_0x3343ed(0x1b6)][0x0];if(_0x3c9003){const _0x4a76cd=ref(storage,'profile-pictures/'+_0xfd565e['uid']);await uploadBytes(_0x4a76cd,_0x3c9003),_0x5de720['pfpUrl']=await getDownloadURL(_0x4a76cd);}await setDoc(doc(db,'profiles',_0xfd565e['uid']),_0x5de720),alert(_0x3343ed(0x1bb));}catch(_0x9bd8eb){console['error']('Error\x20saving\x20profile:',_0x9bd8eb),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async['loadProfile'](){onAuthStateChanged(auth,async _0x4a01a4=>{const _0x15a01a=a45_0x5c76;if(_0x4a01a4)try{const _0x12e10d=await getDoc(doc(db,_0x15a01a(0x1c4),_0x4a01a4['uid']));if(_0x12e10d['exists']()){const _0x16bd87=_0x12e10d['data']();document['getElementById']('nickname')[_0x15a01a(0x1ae)]=_0x16bd87['nickname']||'',document[_0x15a01a(0x1c9)]('motto')[_0x15a01a(0x1ae)]=_0x16bd87['motto']||'',document['getElementById'](_0x15a01a(0x1ba))['value']=_0x16bd87[_0x15a01a(0x1c7)]||'',document['getElementById']('favorite-weapon')['value']=_0x16bd87['favoriteWeapon']||'',_0x16bd87['pfpUrl']&&(this['pfpPreview']['src']=_0x16bd87[_0x15a01a(0x1cb)]),await this['loadPlayerStats'](_0x16bd87['nickname']);}}catch(_0x5e527c){console['error'](_0x15a01a(0x1cc),_0x5e527c);}});}async['loadPlayerStats'](_0x1fc549){const _0x4065b=a45_0x326b4d;if(!_0x1fc549)return;try{const _0x317ffd=collection(db,_0x4065b(0x1c0)),[_0x52df0f,_0x59b3a1]=await Promise['all']([getDocs(query(_0x317ffd,where('winnerUsername','==',_0x1fc549))),getDocs(query(_0x317ffd,where('loserUsername','==',_0x1fc549)))]),_0x2d86a0=_0x52df0f[_0x4065b(0x1cd)],_0x16d6ba=_0x59b3a1['size'],_0x237267=_0x2d86a0+_0x16d6ba;let _0x37bf03=0x0,_0x354032=0x0;_0x52df0f['forEach'](_0x3f65c7=>{const _0x59ebb4=_0x4065b,_0x794d31=_0x3f65c7['data']();if(_0x794d31[_0x59ebb4(0x1b7)])_0x37bf03+=parseInt(_0x794d31['winnerScore']);if(_0x794d31['loserScore'])_0x354032+=parseInt(_0x794d31['loserScore']);}),_0x59b3a1['forEach'](_0x136b0a=>{const _0x2e09b7=_0x4065b,_0x3624e2=_0x136b0a['data']();if(_0x3624e2[_0x2e09b7(0x1b4)])_0x37bf03+=parseInt(_0x3624e2['loserScore']);if(_0x3624e2[_0x2e09b7(0x1b7)])_0x354032+=parseInt(_0x3624e2['winnerScore']);});const _0x34f62b=_0x354032===0x0?_0x37bf03[_0x4065b(0x1b8)](0x2):(_0x37bf03/_0x354032)[_0x4065b(0x1b8)](0x2),_0x409ab1=_0x237267===0x0?'0':(_0x2d86a0/_0x237267*0x64)['toFixed'](0x1);console[_0x4065b(0x1ad)](_0x4065b(0x1be),{'totalMatches':_0x237267,'wins':_0x2d86a0,'losses':_0x16d6ba,'totalKills':_0x37bf03,'totalDeaths':_0x354032,'kdRatio':_0x34f62b,'winRate':_0x409ab1}),document[_0x4065b(0x1c9)](_0x4065b(0x1d1))[_0x4065b(0x1b3)]=_0x237267,document['getElementById']('stats-wins')['textContent']=_0x2d86a0,document[_0x4065b(0x1c9)](_0x4065b(0x1d0))['textContent']=_0x16d6ba,document['getElementById'](_0x4065b(0x1b9))[_0x4065b(0x1b3)]=_0x34f62b,document['getElementById']('stats-winrate')['textContent']=_0x409ab1+'%';}catch(_0x32ab91){console['error']('Error\x20loading\x20player\x20stats:',_0x32ab91),[_0x4065b(0x1bd),'wins','losses','kd','winrate'][_0x4065b(0x1bc)](_0x34f1bb=>{document['getElementById']('stats-'+_0x34f1bb)['textContent']='-';});}}}document[a45_0x326b4d(0x1c6)]('DOMContentLoaded',()=>{new ProfileManager();});