const a4_0x773b4=a4_0x4672,a4_0x4aa289=(function(){let _0x5efb83=!![];return function(_0x33242c,_0x58694d){const _0x16a12e=_0x5efb83?function(){const _0x407b0c=a4_0x4672;if(_0x58694d){const _0x2c3f64=_0x58694d[_0x407b0c(0x21f)](_0x33242c,arguments);return _0x58694d=null,_0x2c3f64;}}:function(){};return _0x5efb83=![],_0x16a12e;};}()),a4_0x15c4c8=a4_0x4aa289(this,function(){const _0x5abe54=a4_0x4672,_0x519818=function(){const _0x5983ff=a4_0x4672;let _0x23874c;try{_0x23874c=Function('return\x20(function()\x20'+_0x5983ff(0x23d)+');')();}catch(_0x1bbbd8){_0x23874c=window;}return _0x23874c;},_0x2448a1=_0x519818(),_0x400cbb=_0x2448a1['console']=_0x2448a1['console']||{},_0x33168c=['log',_0x5abe54(0x22e),_0x5abe54(0x21a),'error',_0x5abe54(0x1bd),'table','trace'];for(let _0x20e752=0x0;_0x20e752<_0x33168c['length'];_0x20e752++){const _0x262916=a4_0x4aa289[_0x5abe54(0x1bf)]['prototype']['bind'](a4_0x4aa289),_0x2e0270=_0x33168c[_0x20e752],_0x4d3716=_0x400cbb[_0x2e0270]||_0x262916;_0x262916['__proto__']=a4_0x4aa289['bind'](a4_0x4aa289),_0x262916[_0x5abe54(0x200)]=_0x4d3716['toString']['bind'](_0x4d3716),_0x400cbb[_0x2e0270]=_0x262916;}});a4_0x15c4c8();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date(a4_0x773b4(0x1cf))['getTime']()}];function isUsernameMuted(_0x2c8881,_0x3da2c6){const _0x470caf=a4_0x773b4;if(!_0x2c8881)return![];const _0x19d265=mutedUsers[_0x470caf(0x236)](_0x5c60fb=>_0x5c60fb['username']===_0x2c8881);if(!_0x19d265)return![];if(!_0x3da2c6)return!![];const _0x536d31=_0x3da2c6 instanceof Date?_0x3da2c6[_0x470caf(0x21d)]():_0x3da2c6['seconds']?_0x3da2c6[_0x470caf(0x1b6)]*0x3e8:Date[_0x470caf(0x1ef)]();return _0x536d31>=_0x19d265['muteFromDate'];}function filterComment(_0x2b1062,_0xd1423d,_0x4fe373){const _0x193fcc=a4_0x773b4;if(!_0x2b1062)return'-';if(isUsernameMuted(_0xd1423d,_0x4fe373))return _0x193fcc(0x202);return _0x2b1062;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x39a0d7,_0x6f1437,_0x106f40){const _0x534406=a4_0x773b4,_0x10919d='u:'+(_0x106f40[_0x534406(0x1a4)]||'');return _0x534406(0x1c6)+_0x39a0d7+'_p'+_0x6f1437+'_'+_0x10919d;}function getCachedPage(_0x3f5be9){const _0x1efdba=a4_0x773b4,_0x55c580=sessionStorage[_0x1efdba(0x220)](_0x3f5be9);if(_0x55c580)try{return JSON[_0x1efdba(0x1fc)](_0x55c580);}catch(_0xcdfb36){return console[_0x1efdba(0x22f)]('Failed\x20to\x20parse\x20cache:',_0xcdfb36),sessionStorage[_0x1efdba(0x1ba)](_0x3f5be9),null;}return null;}function cachePage(_0xea0e46,_0x41e644){try{sessionStorage['setItem'](_0xea0e46,JSON['stringify'](_0x41e644));}catch(_0x3b3345){console['error']('Failed\x20to\x20cache\x20data:',_0x3b3345);}}function getEloColor(_0x11ac58){const _0xd82794=a4_0x773b4,_0x5b6bdc=Number(_0x11ac58);if(_0x5b6bdc>=0x7d0)return'#50C878';else{if(_0x5b6bdc>=0x708)return'#FFD700';else{if(_0x5b6bdc>=0x640)return _0xd82794(0x1db);else{if(_0x5b6bdc>=0x578)return'#CD7F32';else return _0xd82794(0x1c2);}}}}function formatDate(_0x4f744f,_0x40f743=![]){const _0x3699b4=a4_0x773b4;if(!_0x4f744f||!_0x4f744f['seconds'])return _0x3699b4(0x223);const _0x23bb56=new Date(_0x4f744f['seconds']*0x3e8);return _0x40f743?_0x23bb56['toLocaleString']():_0x23bb56[_0x3699b4(0x1fe)]();}function truncateComment(_0x17d93f,_0x5837d5=0x1e){if(!_0x17d93f)return'-';if(_0x17d93f['length']<=_0x5837d5)return _0x17d93f;return _0x17d93f['substring'](0x0,_0x5837d5)+'...';}function formatCommentDate(_0x18cc26){const _0x5a8615=a4_0x773b4;if(!_0x18cc26||!_0x18cc26['seconds'])return'';const _0x30b997=new Date(_0x18cc26['seconds']*0x3e8),_0x573498=new Date(),_0x271a4a=Math[_0x5a8615(0x23f)](_0x573498-_0x30b997),_0x5e2cc4=Math['floor'](_0x271a4a/(0x3e8*0x3c*0x3c*0x18));if(_0x5e2cc4===0x0)return'Today';else{if(_0x5e2cc4===0x1)return _0x5a8615(0x22a);else return _0x5e2cc4<0x7?_0x5e2cc4+'\x20days\x20ago':_0x30b997['toLocaleDateString']();}}function setLoadingIndicator(_0x5d5d19){const _0x178cbe=a4_0x773b4,_0x589e7f=document[_0x178cbe(0x247)]('loading-indicator');if(_0x589e7f)_0x589e7f['style']['display']=_0x5d5d19?'block':'none';}export function updatePreviewLadderModeUI(){const _0x406511=a4_0x773b4,_0x3ca2ba=document['getElementById']('preview-ladder-mode'),_0xe13577=document[_0x406511(0x247)]('preview-d1-button'),_0x17fa20=document[_0x406511(0x247)]('preview-d2-button'),_0x515448=document['getElementById']('preview-d3-button');if(_0x3ca2ba)_0x3ca2ba['textContent']=previewState['currentMode'];if(_0xe13577)_0xe13577[_0x406511(0x21e)][_0x406511(0x1b1)](_0x406511(0x251),previewState['currentMode']==='D1');if(_0x17fa20)_0x17fa20['classList']['toggle'](_0x406511(0x251),previewState['currentMode']==='D2');if(_0x515448)_0x515448['classList']['toggle']('active',previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x54b182){const _0x23a031=a4_0x773b4,_0x5f28e3=document['getElementById']('previewPrevPage'),_0x572732=document['getElementById'](_0x23a031(0x1ec)),_0x449c1c=document['getElementById']('previewPageInfo');if(!_0x5f28e3||!_0x572732||!_0x449c1c)return;_0x449c1c['textContent']='Page\x20'+previewState['currentPage'],_0x5f28e3['disabled']=previewState['currentPage']<=0x1,_0x572732['disabled']=!_0x54b182;}function setPreviewLoadingState(_0xffda92){const _0x389e94=a4_0x773b4;previewState['isLoading']=_0xffda92,setLoadingIndicator(_0xffda92);const _0x2c3f2=document['getElementById'](_0x389e94(0x215)),_0xb7c45a=_0x2c3f2?_0x2c3f2['querySelector']('.matches-loading'):null,_0x4ea74a=document['getElementById'](_0x389e94(0x249)),_0x20f8d3=document[_0x389e94(0x247)]('previewNextPage'),_0x4f35b2=document['getElementById']('preview-d1-button'),_0x376f1c=document['getElementById']('preview-d2-button'),_0x2cc77c=document['getElementById']('applyFilterBtn'),_0x3798b8=document['getElementById']('clearFilterBtn');if(_0xb7c45a&&!_0xffda92)_0xb7c45a['style'][_0x389e94(0x23e)]=_0x389e94(0x1d4);else _0xb7c45a&&_0xffda92&&(_0xb7c45a['style']['display']='block');!_0xffda92&&_0x2c3f2&&!_0x2c3f2['querySelector']('.match-card')&&!_0x2c3f2['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x2c3f2[_0x389e94(0x1d6)]='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState['filterUsername']?_0x389e94(0x1b3):'')+'.</div>');if(_0x4ea74a)_0x4ea74a['disabled']=_0xffda92||previewState[_0x389e94(0x1b5)]<=0x1;if(_0x20f8d3)_0x20f8d3['disabled']=_0xffda92;if(_0x4f35b2)_0x4f35b2['disabled']=_0xffda92;if(_0x376f1c)_0x376f1c['disabled']=_0xffda92;if(_0x2cc77c)_0x2cc77c[_0x389e94(0x1f6)]=_0xffda92;if(_0x3798b8)_0x3798b8['disabled']=_0xffda92;}function applyClientFilters(_0x597b12){const _0x142378=a4_0x773b4;if(!previewState['filterUsername'])return _0x597b12;const _0x535dca=previewState[_0x142378(0x1a4)][_0x142378(0x228)]();return _0x597b12[_0x142378(0x1a1)](_0x1b42fe=>{const _0x10d591=_0x142378,_0x4307ee=(_0x1b42fe['winnerUsername']||'')['toLowerCase'](),_0x2d7cb8=(_0x1b42fe['loserUsername']||'')['toLowerCase']();return _0x4307ee[_0x10d591(0x1ac)](_0x535dca)||_0x2d7cb8['includes'](_0x535dca);});}function applyEnhancedClientFilters(_0x422318){const _0x9e520f=a4_0x773b4;if(!hasEnhancedFilters())return _0x422318;return _0x422318[_0x9e520f(0x1a1)](_0x4e1229=>{const _0x351d3e=_0x9e520f;if(previewState[_0x351d3e(0x1d0)]['pilots']){const _0x46ce83=previewState[_0x351d3e(0x1d0)][_0x351d3e(0x1dd)]['toLowerCase'](),_0xfd69d2=(_0x4e1229['winnerUsername']||'')['toLowerCase'](),_0x2f6539=(_0x4e1229[_0x351d3e(0x1a6)]||'')['toLowerCase']();if(!_0xfd69d2['includes'](_0x46ce83)&&!_0x2f6539[_0x351d3e(0x1ac)](_0x46ce83))return![];}if(previewState[_0x351d3e(0x1d0)]['levels']){const _0x1e5fca=previewState[_0x351d3e(0x1d0)]['levels'][_0x351d3e(0x228)](),_0x210c21=(_0x4e1229[_0x351d3e(0x1a9)]||'')['toLowerCase']();if(!_0x210c21['includes'](_0x1e5fca))return![];}if(previewState['enhancedFilters'][_0x351d3e(0x209)][_0x351d3e(0x207)]>0x0){const _0x4ee7a3=_0x4e1229['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames'][_0x351d3e(0x1ac)](_0x4ee7a3))return![];}return!![];});}function a4_0x4672(_0x83580a,_0x391c7d){const _0x15c4c8=a4_0x1a7c();return a4_0x4672=function(_0x4aa289,_0x57b6a4){_0x4aa289=_0x4aa289-0x1a0;let _0x1a7c86=_0x15c4c8[_0x4aa289];return _0x1a7c86;},a4_0x4672(_0x83580a,_0x391c7d);}function hasEnhancedFilters(){return previewState['enhancedFilters']['pilots']||previewState['enhancedFilters']['levels']||previewState['enhancedFilters']['subgames']['length']>0x0;}function clearEnhancedFilters(){const _0x380852=a4_0x773b4;previewState[_0x380852(0x1d0)]={'pilots':'','levels':'','subgames':[]},document['getElementById']('filter-pilots')['value']='',document[_0x380852(0x247)]('filter-levels')['value']='';const _0x451e1b=document[_0x380852(0x247)](_0x380852(0x1af));for(let _0x127066 of _0x451e1b['options']){_0x127066['selected']=![];}}function jumpToPage(_0x115b69){const _0x41ce58=a4_0x773b4,_0x39e22e=document['getElementById']('jump-to-page'),_0x1a85dd=previewState[_0x41ce58(0x1b5)];let _0x536bb2=_0x1a85dd;switch(_0x115b69){case'start':_0x536bb2=0x1;break;case'end':_0x536bb2=Math['max'](_0x1a85dd+0xa,previewState['totalPages']||_0x1a85dd+0xa);break;case'+1':_0x536bb2=_0x1a85dd+0x1;break;case'+5':_0x536bb2=_0x1a85dd+0x5;break;case _0x41ce58(0x1f0):_0x536bb2=_0x1a85dd+0xa;break;case'-1':_0x536bb2=Math['max'](0x1,_0x1a85dd-0x1);break;case'-5':_0x536bb2=Math['max'](0x1,_0x1a85dd-0x5);break;case'-10':_0x536bb2=Math['max'](0x1,_0x1a85dd-0xa);break;case _0x41ce58(0x205):const _0x54583d=parseInt(_0x39e22e['value']);_0x54583d&&_0x54583d>0x0&&(_0x536bb2=_0x54583d,_0x39e22e['value']='');break;}_0x536bb2!==_0x1a85dd&&_0x536bb2>0x0&&(previewState['currentPage']=_0x536bb2,loadRecentMatchesPreview('jump'));}function a4_0x1a7c(){const _0x42ee04=['style','filter','winner-','current','filterUsername','winnerOldElo','loserUsername','commentPopupPreview','demo','mapPlayed','\x27s\x20Demo','addEventListener','includes','href','filter-levels','filter-subgames','Match\x20','toggle','data','\x20matching\x20filters','winnerScore','currentPage','seconds','desc','commentUser','No\x20results\x20found\x20for\x20this\x20page','removeItem','hasNextPage','.</div>','exception','demo-link','constructor','selectedOptions','subgameType','#808080','body','isLoading','approvedAt','previewCache_','You\x20must\x20be\x20signed\x20in\x20to\x20continue','split','matchId','.jump-btn','fusion-match','key','\x20demo\x20links:','winnerSuicides','2025-07-02','enhancedFilters','setAttribute','username','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20','none','className','innerHTML','exists','marginTop','loserOldElo','cursor','#b9f1fc','winnerUsername','pilots','#fff','dataset','textContent','Submit','10px','<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20','commentText','Comment\x20from\x20','value','Delete\x20demo','Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.','preventDefault','demoWordCount','querySelector','previewNextPage','Submitting\x20comment\x20as:','Anonymous\x20User','now','+10','missiles-6plus','auth','currentMode','gap','removeAttribute','disabled','submitComment','Failed\x20to\x20delete\x20comment:\x20','reportCommentButton','.player.winner\x20.player-suicides','slice','parse','.match-display-wrapper','toLocaleDateString','.player.winner\x20.player-score','toString','Comment\x20added\x20successfully','Muted.','approvedMatchesD2','forEach','input','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22','length','matchComments','subgames','Failed\x20to\x20report\x20comment:\x20','loserSuicides','.add-comment-btn','.comment.winner-comment','Failed\x20to\x20submit:\x20','Error\x20submitting:','Unknown\x20User','currentMatchId','docs','block','click','recent-matches-preview','log','createdAt','userProfiles','currentUser','info','Demo\x20link','jump-to-page','getTime','classList','apply','getItem','Unknown\x20Map','timestamp','N/A','wordCount','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','Failed\x20to\x20fetch\x20username:','apply-enhanced-filters','toLowerCase','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','Yesterday','Unknown','lastVisible','<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>','warn','error','Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link','Close','content','message','stopPropagation','\x20matches:','find','firstChild','badComments','cloneNode','commentPopupContentPreview','Firebase\x20not\x20initialized','matchesPerPage','{}.constructor(\x22return\x20this\x22)(\x20)','display','abs','button','filter-pilots','Submitting...','onclick','text','displayName','jump','getElementById','commentId','previewPrevPage','gauss-and-mercs','dogfight','next','.match-demo-links','uid','bronze','push','active','map','toLocaleString','<strong>','trim','appendChild','delete-comment-btn','Please\x20enter\x20a\x20demo\x20link','S:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','title','.comment-item'];a4_0x1a7c=function(){return _0x42ee04;};return a4_0x1a7c();}export async function loadRecentMatchesPreview(_0x1cc941=a4_0x773b4(0x1a3)){const _0x1aa01e=a4_0x773b4,_0x2cbf80=document['getElementById']('recent-matches-preview'),_0x16cda6=document['getElementById']('match-card-template');if(previewState[_0x1aa01e(0x1c4)]||!_0x2cbf80||!_0x16cda6)return;_0x1cc941===_0x1aa01e(0x1a3)&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)['forEach'](_0x130a1d=>{const _0x58c905=_0x1aa01e;_0x130a1d['includes']('previewCache_'+previewState[_0x58c905(0x1f3)])&&sessionStorage['removeItem'](_0x130a1d);}));let _0x10950a=previewState['currentPage'];if(_0x1cc941==='next')_0x10950a++;else{if(_0x1cc941==='prev')_0x10950a--;else _0x1cc941==='current'&&(_0x10950a=0x1,previewState['firstVisible']=null,previewState['lastVisible']=null);}if(_0x10950a<0x1)_0x10950a=0x1;const _0x4ebd68=previewState[_0x1aa01e(0x1b5)];previewState['currentPage']=_0x10950a,updatePreviewPaginationControls(!![]);const _0x11e780={'filterUsername':previewState[_0x1aa01e(0x1a4)]},_0x5468c5=getCacheKey(previewState['currentMode'],_0x10950a,_0x11e780),_0x4f8f5a=_0x1cc941!=='current'?getCachedPage(_0x5468c5):null;if(_0x4f8f5a){console[_0x1aa01e(0x216)]('Rendering\x20page\x20'+_0x10950a+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0x4f8f5a['docsData']),updatePreviewPaginationControls(_0x4f8f5a[_0x1aa01e(0x1bb)]),setPreviewLoadingState(![]);return;}console['log']('Cache\x20miss\x20for\x20page\x20'+_0x10950a+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0x2cbf80['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x20fe47=previewState[_0x1aa01e(0x1f3)]==='D1'?'approvedMatches':previewState['currentMode']==='D2'?_0x1aa01e(0x203):'approvedMatchesD3',_0x2a53fb=previewState[_0x1aa01e(0x1f3)]==='D1'?'createdAt':'approvedAt';try{const _0x363636=collection(window['db'],_0x20fe47);let _0x590ee3=[orderBy(_0x2a53fb,'desc')];if(_0x10950a===0x1)console['log']('Loading\x20first\x20page\x20from\x20Firestore'),_0x590ee3['push'](limit(previewState['matchesPerPage']));else{if(_0x1cc941==='next'&&previewState['lastVisible'])console['log']('Loading\x20next\x20page\x20using\x20cursor'),_0x590ee3['push'](startAfter(previewState['lastVisible'])),_0x590ee3[_0x1aa01e(0x250)](limit(previewState['matchesPerPage']));else{console['log']('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x1f5358=_0x10950a*previewState['matchesPerPage'];_0x590ee3['push'](limit(_0x1f5358));}}const _0x4fac9a=query(_0x363636,..._0x590ee3),_0x3116ea=await getDocs(_0x4fac9a);let _0x51397c=_0x3116ea['docs'];if(_0x10950a>0x1&&_0x1cc941!=='next'){const _0x42f6ab=(_0x10950a-0x1)*previewState['matchesPerPage'];_0x51397c=_0x51397c[_0x1aa01e(0x1fb)](_0x42f6ab,_0x42f6ab+previewState[_0x1aa01e(0x23c)]);}if(_0x51397c['length']===0x0){console[_0x1aa01e(0x216)](_0x1aa01e(0x1b9));_0x1cc941==='next'&&(previewState['currentPage']=_0x4ebd68,updatePreviewPaginationControls(![]));_0x2cbf80['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?'\x20matching\x20filters':'')+_0x1aa01e(0x1bc),setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x51397c[0x0],previewState[_0x1aa01e(0x22c)]=_0x51397c[_0x51397c[_0x1aa01e(0x207)]-0x1];const _0x55b5b7=_0x51397c['map'](_0x5f2215=>({'id':_0x5f2215['id'],..._0x5f2215[_0x1aa01e(0x1b2)]()}));let _0x1be19e=![];if(_0x51397c['length']===previewState['matchesPerPage']){const _0x24a5c5=query(_0x363636,orderBy(_0x2a53fb,'desc'),startAfter(previewState[_0x1aa01e(0x22c)]),limit(0x1)),_0x3bf250=await getDocs(_0x24a5c5);_0x1be19e=!_0x3bf250['empty'];}const _0x5996e1=applyClientFilters(_0x55b5b7),_0x20c978={'docsData':_0x55b5b7,'hasNextPage':_0x1be19e};cachePage(getCacheKey(previewState[_0x1aa01e(0x1f3)],previewState['currentPage'],_0x11e780),_0x20c978);if(_0x10950a>0x1&&_0x1cc941!=='next')for(let _0x3aadf4=0x1;_0x3aadf4<_0x10950a;_0x3aadf4++){const _0x2c18b9=(_0x3aadf4-0x1)*previewState['matchesPerPage'],_0x3a56c3=_0x2c18b9+previewState['matchesPerPage'],_0x4ffbbd=_0x3116ea[_0x1aa01e(0x212)]['slice'](_0x2c18b9,_0x3a56c3);if(_0x4ffbbd['length']>0x0){const _0x256c22=_0x4ffbbd['map'](_0x6e73e6=>({'id':_0x6e73e6['id'],..._0x6e73e6['data']()})),_0x4c785f=!![];cachePage(getCacheKey(previewState[_0x1aa01e(0x1f3)],_0x3aadf4,_0x11e780),{'docsData':_0x256c22,'hasNextPage':_0x4c785f}),console[_0x1aa01e(0x216)]('Cached\x20intermediary\x20page\x20'+_0x3aadf4);}}_0x5996e1[_0x1aa01e(0x207)]===0x0&&previewState['filterUsername']?_0x2cbf80[_0x1aa01e(0x1d6)]=_0x1aa01e(0x206)+previewState['filterUsername']+'\x22</div>':renderMatchCards(_0x5996e1),updatePreviewPaginationControls(_0x1be19e);}catch(_0x5e56c4){console['error']('Error\x20fetching\x20'+previewState[_0x1aa01e(0x1f3)]+_0x1aa01e(0x235),_0x5e56c4),_0x2cbf80[_0x1aa01e(0x1d6)]=_0x1aa01e(0x1e3)+_0x5e56c4['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x4ebd68;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x44639a){const _0x4f8282=a4_0x773b4,_0x1a32e8=document[_0x4f8282(0x247)]('recent-matches-preview'),_0x4df1fa=document[_0x4f8282(0x247)]('match-card-template');if(!_0x1a32e8||!_0x4df1fa)return;!_0x1a32e8[_0x4f8282(0x1eb)]('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x1a32e8['innerHTML']='');if(!_0x44639a||_0x44639a['length']===0x0){if(!_0x1a32e8['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x245a9d=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?'\x20matching\x20filters':'';_0x1a32e8['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x245a9d+_0x4f8282(0x1bc);}return;}const _0x1b9e63=applyEnhancedClientFilters(_0x44639a);if(_0x1b9e63[_0x4f8282(0x207)]===0x0){_0x1a32e8[_0x4f8282(0x1d6)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x57fa2c=_0x1b9e63['map'](_0x35b23c=>getAllCommentsForMatch(_0x35b23c['id']));let _0x4feafa=[];try{_0x4feafa=await Promise['all'](_0x57fa2c);}catch(_0x5f49a1){console['error']('Error\x20fetching\x20comments\x20batch:',_0x5f49a1),_0x4feafa=_0x1b9e63['map'](()=>[]);}const _0x319900={};_0x4feafa['forEach']((_0x23d7b6,_0x5dc999)=>{_0x319900[_0x1b9e63[_0x5dc999]['id']]=_0x23d7b6||[];}),_0x1b9e63['forEach'](_0x24fcf7=>{const _0x2e7972=_0x4f8282,_0x3b2fdd=_0x4df1fa[_0x2e7972(0x232)][_0x2e7972(0x239)](!![]),_0x5a5096=_0x3b2fdd[_0x2e7972(0x1eb)](_0x2e7972(0x1fd)),_0x402ce5=_0x3b2fdd['querySelector']('.match-card'),_0x555bcf=getEloRankClass(_0x24fcf7[_0x2e7972(0x1a5)]);_0x402ce5['classList']['add'](_0x2e7972(0x1a2)+_0x555bcf),_0x402ce5['querySelector']('.match-map')[_0x2e7972(0x1e0)]=_0x24fcf7['mapPlayed']||_0x2e7972(0x221),_0x402ce5['querySelector']('.match-date')['textContent']=formatDate(_0x24fcf7[_0x2e7972(0x1c5)]||_0x24fcf7['createdAt']);const _0x2c8fef=_0x402ce5['querySelector']('.player.winner\x20.player-name');_0x2c8fef['textContent']=_0x24fcf7[_0x2e7972(0x1dc)]||_0x2e7972(0x22b),_0x2c8fef['style']['color']=getEloColor(_0x24fcf7['winnerOldElo']),_0x402ce5[_0x2e7972(0x1eb)](_0x2e7972(0x1ff))['textContent']=_0x24fcf7[_0x2e7972(0x1b4)]??0x0;const _0x121943=_0x402ce5['querySelector'](_0x2e7972(0x1fa)),_0x13714f=_0x24fcf7[_0x2e7972(0x1ce)]||0x0;_0x121943[_0x2e7972(0x1e0)]='S:\x20'+_0x13714f;const _0x5d23a5=_0x402ce5[_0x2e7972(0x1eb)]('.player.loser\x20.player-name');_0x5d23a5[_0x2e7972(0x1e0)]=_0x24fcf7['loserUsername']||'Unknown',_0x5d23a5[_0x2e7972(0x1a0)]['color']=getEloColor(_0x24fcf7[_0x2e7972(0x1d9)]),_0x402ce5['querySelector']('.player.loser\x20.player-score')[_0x2e7972(0x1e0)]=_0x24fcf7['loserScore']??0x0;const _0x20fd37=_0x402ce5[_0x2e7972(0x1eb)]('.player.loser\x20.player-suicides'),_0x2daeb1=_0x24fcf7[_0x2e7972(0x20b)]||0x0;_0x20fd37['textContent']=_0x2e7972(0x259)+_0x2daeb1;const _0x35e0f1=_0x402ce5['querySelector']('.match-subgame');if(_0x35e0f1){if(_0x24fcf7[_0x2e7972(0x1c1)]&&_0x24fcf7['subgameType']['trim']()!==''){_0x35e0f1['textContent']=_0x24fcf7['subgameType'],_0x35e0f1['style']['display']='block';const _0x2fdca7=getSubgameClass(_0x24fcf7[_0x2e7972(0x1c1)]);_0x2fdca7&&_0x35e0f1[_0x2e7972(0x21e)]['add'](_0x2fdca7);}else _0x35e0f1[_0x2e7972(0x1e0)]='Standard\x20Match',_0x35e0f1['style']['display']='block',_0x35e0f1['style']['opacity']='0.6';}const _0x2d3648=_0x402ce5['querySelector'](_0x2e7972(0x20d)),_0x419a66=_0x402ce5['querySelector']('.comment.loser-comment'),_0x3ba2d4=_0x24fcf7['winnerComment']||'',_0x3d499b=_0x24fcf7['loserComment']||'',_0x25733e=_0x24fcf7[_0x2e7972(0x1c5)]||_0x24fcf7[_0x2e7972(0x217)],_0x29c4d8=filterComment(_0x3ba2d4,_0x24fcf7['winnerUsername'],_0x25733e),_0x267dc5=filterComment(_0x3d499b,_0x24fcf7[_0x2e7972(0x1a6)],_0x25733e);_0x2d3648['textContent']='\x22'+truncateComment(_0x3ba2d4)+'\x22',_0x419a66[_0x2e7972(0x1e0)]='\x22'+truncateComment(_0x3d499b)+'\x22';_0x3ba2d4&&!isUsernameMuted(_0x24fcf7['winnerUsername'],_0x25733e)?_0x2d3648[_0x2e7972(0x243)]=()=>showPreviewCommentPopup(_0x29c4d8,_0x24fcf7[_0x2e7972(0x1dc)]||'Winner',getEloColor(_0x24fcf7['winnerOldElo'])):(_0x2d3648[_0x2e7972(0x1e0)]=_0x29c4d8===_0x2e7972(0x202)?_0x2e7972(0x202):'-',_0x2d3648['style'][_0x2e7972(0x1da)]='default',_0x2d3648['onclick']=null);_0x3d499b&&!isUsernameMuted(_0x24fcf7['loserUsername'])?_0x419a66['onclick']=()=>showPreviewCommentPopup(_0x267dc5,_0x24fcf7['loserUsername']||'Loser',getEloColor(_0x24fcf7['loserOldElo'])):(_0x419a66['textContent']=_0x267dc5==='Muted.'?_0x2e7972(0x202):'-',_0x419a66['style']['cursor']='default',_0x419a66['onclick']=null);const _0x7630c5=_0x5a5096?.[_0x2e7972(0x1eb)]('.community-comments-section');if(!_0x7630c5)console['warn']('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0x24ea59=_0x7630c5[_0x2e7972(0x1eb)]('.comments-container'),_0x80d98c=_0x24ea59?.['querySelector']('.no-comments-message'),_0x36da9b=_0x7630c5['querySelector'](_0x2e7972(0x20c));if(_0x24ea59){while(_0x24ea59['firstChild']&&_0x24ea59[_0x2e7972(0x237)]!==_0x80d98c){_0x24ea59['removeChild'](_0x24ea59['firstChild']);}_0x36da9b&&_0x36da9b['addEventListener']('click',()=>{showAddCommentPopup(_0x24fcf7['id']);});const _0x340005=_0x319900[_0x24fcf7['id']]||[];if(_0x340005['length']>0x0){if(_0x80d98c)_0x80d98c['style']['display']='none';const _0x4793f7=(_0x5b9d24,_0x3028fc)=>{const _0x21e740=_0x5b9d24['split']('\x20');if(_0x21e740['length']<=_0x3028fc)return _0x5b9d24;return _0x21e740['slice'](0x0,_0x3028fc)['join']('\x20')+'...';};_0x340005[_0x2e7972(0x204)](_0x268e4e=>{const _0x53e7f1=_0x2e7972,_0xcc81d8=document['createElement']('div');if(_0x268e4e['type']==='demo'){_0xcc81d8['className']=_0x53e7f1(0x1be),_0xcc81d8[_0x53e7f1(0x1d6)]=_0x53e7f1(0x25a)+_0x268e4e['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x268e4e['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x268e4e['description']||'No\x20description\x20provided')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x4fc444=window['auth']['currentUser'],_0x5db000=_0x4fc444&&_0x268e4e['userId']===_0x4fc444['uid'];if(_0x5db000){const _0xb66278=document['createElement']('button');_0xb66278['className']=_0x53e7f1(0x257),_0xb66278['innerHTML']='×',_0xb66278['setAttribute']('aria-label',_0x53e7f1(0x1e7)),_0xb66278[_0x53e7f1(0x1ab)](_0x53e7f1(0x214),_0x358355=>{const _0x1306e5=_0x53e7f1;_0x358355['preventDefault'](),_0x358355[_0x1306e5(0x234)](),deleteComment(_0x268e4e['id'],_0xcc81d8);}),_0xcc81d8['appendChild'](_0xb66278);}}else{_0xcc81d8[_0x53e7f1(0x1d5)]='comment-item';const _0x4c02b2=isUsernameMuted(_0x268e4e['username'],_0x268e4e[_0x53e7f1(0x222)]),_0x4fe126=_0x4c02b2?'Muted.':_0x4793f7(_0x268e4e['text']||'',0xf),_0x1dc061=_0x268e4e[_0x53e7f1(0x1d2)]||'Anonymous',_0xa32018=window[_0x53e7f1(0x1f2)]['currentUser'],_0x1f7ab7=_0xa32018&&_0x268e4e['userId']===_0xa32018[_0x53e7f1(0x24e)];let _0xfa1eb9='';_0x1f7ab7&&(_0xfa1eb9=_0x53e7f1(0x22d));_0xcc81d8['innerHTML']=_0xfa1eb9+_0x53e7f1(0x254)+_0x1dc061+':</strong>\x20\x22'+_0x4fe126+'\x22';if(_0x1f7ab7){const _0x2ee467=_0xcc81d8[_0x53e7f1(0x1eb)]('.delete-comment-btn');_0x2ee467&&_0x2ee467[_0x53e7f1(0x1ab)]('click',_0x95e96f=>{const _0x1dd943=_0x53e7f1;_0x95e96f[_0x1dd943(0x234)](),deleteComment(_0x268e4e['id'],_0xcc81d8);});}!_0x4c02b2?_0xcc81d8[_0x53e7f1(0x1ab)]('click',()=>{showFullCommentLightbox(_0x268e4e);}):_0xcc81d8['style'][_0x53e7f1(0x1da)]='default';}_0x24ea59['insertBefore'](_0xcc81d8,_0x24ea59['firstChild']);});}else{if(_0x80d98c)_0x80d98c[_0x2e7972(0x1a0)]['display']='block';}}}const _0x5cc5fa=_0x402ce5['querySelector'](_0x2e7972(0x24d));if(_0x5cc5fa){const _0x5726e4=_0x402ce5['querySelector']('.winner-demo-link'),_0x38a1fd=_0x402ce5['querySelector']('.loser-demo-link'),_0x4a181c=_0x24fcf7['winnerDemoLink']||null,_0x1af82a=_0x24fcf7['loserDemoLink']||_0x24fcf7['demoLink']||null;console['log'](_0x2e7972(0x1b0)+_0x24fcf7['id']+_0x2e7972(0x1cd),{'winner':_0x4a181c,'loser':_0x1af82a}),_0x5726e4&&(_0x4a181c?(_0x5726e4[_0x2e7972(0x1ad)]=_0x4a181c,_0x5726e4['style']['display']='flex',_0x5726e4[_0x2e7972(0x25b)]=_0x24fcf7['winnerUsername']+_0x2e7972(0x1aa)):_0x5726e4['style']['display']='none'),_0x38a1fd&&(_0x1af82a?(_0x38a1fd['href']=_0x1af82a,_0x38a1fd['style']['display']='flex',_0x38a1fd['title']=_0x24fcf7[_0x2e7972(0x1a6)]+_0x2e7972(0x1aa)):_0x38a1fd['style']['display']=_0x2e7972(0x1d4)),_0x4a181c&&_0x5726e4||_0x1af82a&&_0x38a1fd?_0x5cc5fa[_0x2e7972(0x1a0)]['display']='flex':_0x5cc5fa['style']['display']='none';}_0x1a32e8['appendChild'](_0x3b2fdd);});}function getSubgameClass(_0x2e5ec8){const _0x4e7662=a4_0x773b4,_0x38989d={'Fusion\x20Match':_0x4e7662(0x1cb),'≥6\x20Missiles':_0x4e7662(0x1f1),'≥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':'blind-match','Rematch':'rematch','Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':'altered-powerups','Mega\x20Match':'mega-match','Dogfight':_0x4e7662(0x24b),'Gauss\x20and\x20Mercs':_0x4e7662(0x24a)};return _0x38989d[_0x2e5ec8]||'';}async function deleteComment(_0x2b1364,_0x580601){const _0x5f0da4=a4_0x773b4,_0x741772=window[_0x5f0da4(0x1f2)][_0x5f0da4(0x219)];if(!_0x741772){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x5ef054=doc(window['db'],'matchComments',_0x2b1364),_0x51d036=await getDoc(_0x5ef054);if(!_0x51d036['exists']()){alert(_0x5f0da4(0x1e8));return;}const _0x31cc3f=_0x51d036['data']();if(_0x31cc3f['userId']!==_0x741772['uid']){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x5ef054);if(_0x580601&&_0x580601['parentNode']){_0x580601['parentNode']['removeChild'](_0x580601);const _0x38f92f=_0x580601['closest']('.comments-container');if(_0x38f92f&&!_0x38f92f['querySelector'](_0x5f0da4(0x25c))){const _0x1a3c67=_0x38f92f['querySelector']('.no-comments-message');if(_0x1a3c67)_0x1a3c67['style'][_0x5f0da4(0x23e)]='block';}}console[_0x5f0da4(0x216)]('Comment\x20deleted\x20successfully');}catch(_0x306fd0){console['error']('Error\x20deleting\x20comment:',_0x306fd0),alert(_0x5f0da4(0x1f8)+_0x306fd0['message']);}}async function getAllCommentsForMatch(_0x4891ee){const _0x1b778d=a4_0x773b4;if(!_0x4891ee)return[];try{const _0x2a23b4=collection(window['db'],_0x1b778d(0x208)),_0x5309cf=query(_0x2a23b4,where(_0x1b778d(0x1c9),'==',_0x4891ee),orderBy('timestamp',_0x1b778d(0x1b7))),_0x3d03de=await getDocs(_0x5309cf);if(_0x3d03de['empty'])return[];return _0x3d03de['docs'][_0x1b778d(0x252)](_0x1cb7ab=>({'id':_0x1cb7ab['id'],..._0x1cb7ab['data']()}));}catch(_0x29593a){return console['error']('Error\x20fetching\x20comments:',_0x29593a),[];}}async function submitComment(_0x582562){const _0x166326=a4_0x773b4;_0x582562[_0x166326(0x1e9)]();if(!window['auth']||!window['db']){console['error'](_0x166326(0x23b)),alert(_0x166326(0x229));return;}const _0x4e02a7=window['auth']['currentUser'];if(!_0x4e02a7){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0xe95a8=document['getElementById']('commentMatchId')?.[_0x166326(0x1e6)],_0x5d659e=document[_0x166326(0x247)](_0x166326(0x1e4))?.['value']?.['trim']();if(!_0xe95a8||!_0x5d659e){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x524113=_0x5d659e['split'](/\s+/)['filter'](_0x1ffcc6=>_0x1ffcc6['length']>0x0)[_0x166326(0x207)];if(_0x524113>0xf){alert(_0x166326(0x225));return;}const _0x70b96f=document['querySelector']('.submit-comment-btn');_0x70b96f&&(_0x70b96f['disabled']=!![],_0x70b96f[_0x166326(0x1e0)]=_0x166326(0x242));try{let _0xcafc88='Anonymous';try{const _0x1d8176=doc(window['db'],_0x166326(0x218),_0x4e02a7[_0x166326(0x24e)]),_0x5dc4a4=await getDoc(_0x1d8176);if(_0x5dc4a4['exists']()){const _0x3b23a2=_0x5dc4a4['data']();_0x3b23a2['username']&&(_0xcafc88=_0x3b23a2['username']);}_0xcafc88==='Anonymous'&&_0x4e02a7['displayName']&&(_0xcafc88=_0x4e02a7['displayName']);}catch(_0xc1d41c){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0xc1d41c),_0x4e02a7['displayName']&&(_0xcafc88=_0x4e02a7[_0x166326(0x245)]);}const _0x530b57={'matchId':_0xe95a8,'userId':_0x4e02a7[_0x166326(0x24e)],'username':_0xcafc88,'text':_0x5d659e,'timestamp':serverTimestamp()};console[_0x166326(0x216)](_0x166326(0x1ed),_0xcafc88);const _0x15d6c5=collection(window['db'],'matchComments');await addDoc(_0x15d6c5,_0x530b57),console['log'](_0x166326(0x201)),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0xe78006){console[_0x166326(0x22f)]('Error\x20submitting\x20comment:',_0xe78006),alert('Failed\x20to\x20add\x20comment:\x20'+_0xe78006['message']),_0x70b96f&&(_0x70b96f['disabled']=![],_0x70b96f['textContent']='Submit');}}function closeAddCommentPopup(){const _0x385545=a4_0x773b4,_0x43ea61=document[_0x385545(0x247)]('commentAddPopup'),_0x155193=document['getElementById']('commentAddOverlay');if(_0x43ea61)_0x43ea61['style']['display']=_0x385545(0x1d4);if(_0x155193)_0x155193['style']['display']='none';}function showAddCommentPopup(_0xe4e740){const _0x2570ea=a4_0x773b4,_0x2032c4=window[_0x2570ea(0x1f2)][_0x2570ea(0x219)];if(!_0x2032c4){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo');return;}let _0x5658b3=document[_0x2570ea(0x247)]('commentAddPopup'),_0x36a54e=document['getElementById']('commentAddOverlay');!_0x5658b3&&(_0x5658b3=document['createElement']('div'),_0x5658b3['id']='commentAddPopup',_0x5658b3[_0x2570ea(0x1d5)]='comment-popup',document[_0x2570ea(0x1c3)][_0x2570ea(0x256)](_0x5658b3));!_0x36a54e&&(_0x36a54e=document['createElement']('div'),_0x36a54e['id']='commentAddOverlay',_0x36a54e['className']='comment-overlay',document['body'][_0x2570ea(0x256)](_0x36a54e));_0x5658b3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0xe4e740+_0x2570ea(0x1d3),_0x5658b3['style']['display']='block',_0x36a54e[_0x2570ea(0x1a0)]['display']='block',document[_0x2570ea(0x247)]('closeAddCommentPopup')['addEventListener']('click',closeAddCommentPopup),_0x36a54e['addEventListener'](_0x2570ea(0x214),closeAddCommentPopup);const _0x2b7079=_0x5658b3['querySelectorAll']('.option-tab');_0x2b7079[_0x2570ea(0x204)](_0x456109=>{_0x456109['addEventListener']('click',function(){const _0x35907a=a4_0x4672;_0x2b7079[_0x35907a(0x204)](_0x5e4060=>_0x5e4060['classList']['remove'](_0x35907a(0x251))),document['querySelectorAll']('.option-content')['forEach'](_0x73c65e=>_0x73c65e['style']['display']='none'),this['classList']['add']('active');const _0xd96b1b=this['dataset']['option'];document['getElementById'](_0xd96b1b+'Option')['style'][_0x35907a(0x23e)]=_0x35907a(0x213),_0xd96b1b===_0x35907a(0x1a8)?(document['getElementById']('demoLink')['setAttribute']('required',''),document['getElementById']('commentText')[_0x35907a(0x1f5)]('required')):(document['getElementById']('demoLink')[_0x35907a(0x1f5)]('required'),document['getElementById']('commentText')[_0x35907a(0x1d1)]('required',''));});}),document[_0x2570ea(0x247)]('commentText')['setAttribute']('required',''),document['getElementById']('demoLink')['removeAttribute']('required'),setupWordCounter('commentText','wordCount',0xf),setupWordCounter('demoDescription',_0x2570ea(0x1ea),0x14),document['getElementById']('addCommentForm')['addEventListener']('submit',submitCommentOrDemo);}function setupWordCounter(_0x37af08,_0x2c132c,_0x4279b3){const _0x4f7807=a4_0x773b4,_0x35f135=document[_0x4f7807(0x247)](_0x37af08),_0x347396=document[_0x4f7807(0x247)](_0x2c132c);if(!_0x35f135||!_0x347396)return;_0x1c0fae(),_0x35f135['addEventListener']('input',_0x1c0fae);function _0x1c0fae(){const _0x48b411=_0x4f7807,_0x8ff102=_0x35f135['value']['trim'](),_0x55e42f=_0x8ff102?_0x8ff102['split'](/\s+/)[_0x48b411(0x1a1)](_0x53e342=>_0x53e342[_0x48b411(0x207)]>0x0)['length']:0x0;_0x347396[_0x48b411(0x1e0)]=_0x55e42f,_0x55e42f>_0x4279b3?_0x347396['style']['color']='#ff4444':_0x347396['style']['color']='#aaa';}}async function submitCommentOrDemo(_0x28414e){const _0x3780d6=a4_0x773b4;_0x28414e['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x4bc452=window[_0x3780d6(0x1f2)]['currentUser'];if(!_0x4bc452){alert(_0x3780d6(0x1c7));return;}const _0x3efd25=document['getElementById']('commentMatchId')['value'],_0x1d3484=document['querySelector']('.option-tab.active')['dataset']['option'];let _0x54961e='Anonymous';try{const _0x4e7b92=doc(window['db'],_0x3780d6(0x218),_0x4bc452['uid']),_0x226148=await getDoc(_0x4e7b92);if(_0x226148[_0x3780d6(0x1d7)]()){const _0x73189b=_0x226148['data']();_0x73189b['username']&&(_0x54961e=_0x73189b['username']);}_0x54961e==='Anonymous'&&_0x4bc452[_0x3780d6(0x245)]&&(_0x54961e=_0x4bc452['displayName']);}catch(_0x7d0501){console[_0x3780d6(0x22e)](_0x3780d6(0x226),_0x7d0501),_0x4bc452['displayName']&&(_0x54961e=_0x4bc452[_0x3780d6(0x245)]);}const _0x1c6571=document[_0x3780d6(0x1eb)]('.submit-comment-btn');_0x1c6571&&(_0x1c6571['disabled']=!![],_0x1c6571[_0x3780d6(0x1e0)]=_0x3780d6(0x242));try{if(_0x1d3484==='comment'){const _0x383d07=document['getElementById']('commentText')['value'][_0x3780d6(0x255)]();if(!_0x383d07){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x1c6571[_0x3780d6(0x1f6)]=![],_0x1c6571['textContent']=_0x3780d6(0x1e1);return;}const _0x430445=_0x383d07['split'](/\s+/)[_0x3780d6(0x1a1)](_0x1c9727=>_0x1c9727['length']>0x0)[_0x3780d6(0x207)];if(_0x430445>0xf){alert(_0x3780d6(0x225)),_0x1c6571['disabled']=![],_0x1c6571['textContent']=_0x3780d6(0x1e1);return;}const _0x33ad1d={'matchId':_0x3efd25,'userId':_0x4bc452['uid'],'username':_0x54961e,'text':_0x383d07,'type':'comment','timestamp':serverTimestamp()},_0x5ba645=collection(window['db'],'matchComments');await addDoc(_0x5ba645,_0x33ad1d);}else{const _0x228809=document[_0x3780d6(0x247)]('demoLink')['value'][_0x3780d6(0x255)](),_0x3ba6c6=document['getElementById']('demoDescription')['value']['trim']()||_0x3780d6(0x21b);if(!_0x228809){alert(_0x3780d6(0x258)),_0x1c6571[_0x3780d6(0x1f6)]=![],_0x1c6571['textContent']='Submit';return;}try{new URL(_0x228809);}catch(_0x2662d8){alert(_0x3780d6(0x230)),_0x1c6571['disabled']=![],_0x1c6571['textContent']='Submit';return;}const _0x410b38=_0x3ba6c6[_0x3780d6(0x1c8)](/\s+/)[_0x3780d6(0x1a1)](_0x5f3e8d=>_0x5f3e8d[_0x3780d6(0x207)]>0x0)['length'];if(_0x410b38>0x14){alert('Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.'),_0x1c6571[_0x3780d6(0x1f6)]=![],_0x1c6571[_0x3780d6(0x1e0)]=_0x3780d6(0x1e1);return;}const _0x96790d={'matchId':_0x3efd25,'userId':_0x4bc452['uid'],'username':_0x54961e,'demoLink':_0x228809,'description':_0x3ba6c6,'type':'demo','text':'Demo:\x20'+_0x3ba6c6,'timestamp':serverTimestamp()},_0x1d6009=collection(window['db'],'matchComments');await addDoc(_0x1d6009,_0x96790d);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x3780d6(0x1a3));}catch(_0x46b6fc){console[_0x3780d6(0x22f)](_0x3780d6(0x20f),_0x46b6fc),alert(_0x3780d6(0x20e)+_0x46b6fc['message']),_0x1c6571&&(_0x1c6571['disabled']=![],_0x1c6571[_0x3780d6(0x1e0)]='Submit');}}function getEloRankClass(_0x34f859){const _0x1bff76=a4_0x773b4,_0x2e6b58=Number(_0x34f859);if(_0x2e6b58>=0x7d0)return'emerald';else{if(_0x2e6b58>=0x708)return'gold';else{if(_0x2e6b58>=0x640)return'silver';else{if(_0x2e6b58>=0x578)return _0x1bff76(0x24f);else return'unranked';}}}}function showPreviewCommentPopup(_0x4a2a0d,_0x113224,_0x59f0b6=a4_0x773b4(0x1de)){const _0x5261cb=a4_0x773b4,_0x38ae2b=document['getElementById']('commentPopupPreview'),_0x40d947=document['getElementById']('commentOverlayPreview'),_0x4800fe=document['getElementById']('commentPopupTitlePreview'),_0x1afc1e=document[_0x5261cb(0x247)](_0x5261cb(0x23a)),_0xf98a95=document[_0x5261cb(0x247)](_0x5261cb(0x1f9));if(!_0x38ae2b||!_0x40d947||!_0x4800fe||!_0x1afc1e||!_0xf98a95)return;_0x38ae2b[_0x5261cb(0x1df)][_0x5261cb(0x1e4)]=_0x4a2a0d,_0x38ae2b[_0x5261cb(0x1df)][_0x5261cb(0x1b8)]=_0x113224,_0x4800fe[_0x5261cb(0x1a0)]['color']=_0x59f0b6,_0x4800fe['textContent']=_0x5261cb(0x1e5)+_0x113224,_0x1afc1e['textContent']=_0x4a2a0d,_0xf98a95['onclick']=reportComment,_0x38ae2b['style'][_0x5261cb(0x23e)]='block',_0x40d947['style'][_0x5261cb(0x23e)]='block';}function closePreviewCommentPopup(){const _0x443a0a=a4_0x773b4,_0x249b1f=document['getElementById']('commentPopupPreview'),_0x2ff60b=document['getElementById']('commentOverlayPreview');if(_0x249b1f)_0x249b1f[_0x443a0a(0x1a0)]['display']=_0x443a0a(0x1d4);if(_0x2ff60b)_0x2ff60b['style']['display']=_0x443a0a(0x1d4);}async function reportComment(){const _0x2d0729=a4_0x773b4,_0x58db3d=window[_0x2d0729(0x1f2)]['currentUser'];if(!_0x58db3d){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0x1a64d9=document['getElementById']('commentPopupPreview'),_0x33fc21={'commentAuthor':_0x1a64d9[_0x2d0729(0x1df)]['commentUser']||_0x2d0729(0x210),'commentText':_0x1a64d9[_0x2d0729(0x1df)]['commentText']||'','matchId':previewState[_0x2d0729(0x211)]||'','reportedBy':_0x58db3d['uid'],'reporterUsername':_0x58db3d[_0x2d0729(0x245)]||_0x2d0729(0x1ee),'reportedAt':serverTimestamp()},_0x4ff991=collection(window['db'],_0x2d0729(0x238));await addDoc(_0x4ff991,_0x33fc21),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x5cc095){console[_0x2d0729(0x22f)]('Error\x20reporting\x20comment:',_0x5cc095),alert(_0x2d0729(0x20a)+_0x5cc095[_0x2d0729(0x233)]);}}function showFullCommentLightbox(_0x2b4e23){const _0x17246b=a4_0x773b4;if(isUsernameMuted(_0x2b4e23['username']))return;const _0x3d21f2=document['getElementById'](_0x17246b(0x1a7)),_0x1e0c9e=document['getElementById']('commentOverlayPreview'),_0x35f912=document['getElementById']('commentPopupTitlePreview'),_0x3906b4=document[_0x17246b(0x247)]('commentPopupContentPreview');if(!_0x3d21f2||!_0x1e0c9e||!_0x35f912||!_0x3906b4)return;_0x35f912['style']['color']='#fff',_0x35f912[_0x17246b(0x1e0)]='Comment\x20from\x20'+_0x2b4e23['username'];if(_0x2b4e23['timestamp']){const _0x51c426=new Date(_0x2b4e23[_0x17246b(0x222)]['seconds']*0x3e8),_0x2b9b5d=_0x51c426[_0x17246b(0x253)]();_0x3906b4[_0x17246b(0x1d6)]='<p>'+_0x2b4e23['text']+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x2b9b5d+'</small>';}else _0x3906b4['textContent']=_0x2b4e23['text'];_0x3d21f2[_0x17246b(0x1df)][_0x17246b(0x248)]=_0x2b4e23['id']||'',_0x3d21f2['dataset']['commentUser']=_0x2b4e23['username']||'',_0x3d21f2['dataset']['commentText']=_0x2b4e23[_0x17246b(0x244)]||'',_0x3d21f2['dataset']['matchId']=_0x2b4e23['matchId']||'';const _0x3a6a9f=_0x3d21f2[_0x17246b(0x1eb)]('.popup-actions')||document['createElement']('div');!_0x3d21f2[_0x17246b(0x1eb)]('.popup-actions')?(_0x3a6a9f['className']='popup-actions',_0x3a6a9f[_0x17246b(0x1a0)]['display']='flex',_0x3a6a9f['style']['justifyContent']='center',_0x3a6a9f['style'][_0x17246b(0x1f4)]=_0x17246b(0x1e2),_0x3a6a9f['style'][_0x17246b(0x1d8)]='15px',_0x3d21f2['appendChild'](_0x3a6a9f)):_0x3a6a9f[_0x17246b(0x1d6)]='';const _0x4003b1=document['createElement'](_0x17246b(0x240));_0x4003b1[_0x17246b(0x1e0)]=_0x17246b(0x231),_0x4003b1[_0x17246b(0x1d5)]='popup-btn\x20close-btn',_0x4003b1['id']='closeCommentPopupPreview',_0x4003b1['addEventListener']('click',closePreviewCommentPopup);const _0xbd55ae=document['createElement']('button');_0xbd55ae['textContent']='Report',_0xbd55ae['className']='popup-btn\x20report-btn',_0xbd55ae[_0x17246b(0x1a0)]['backgroundColor']='#d32f2f',_0xbd55ae['addEventListener'](_0x17246b(0x214),reportComment),_0x3a6a9f[_0x17246b(0x256)](_0x4003b1),_0x3a6a9f['appendChild'](_0xbd55ae),_0x3d21f2['style'][_0x17246b(0x23e)]='block',_0x1e0c9e['style']['display']='block';}export function setupPreviewEventListeners(){const _0x117951=a4_0x773b4,_0x4c1ef3=document['getElementById']('previewPrevPage'),_0x84a5a9=document['getElementById'](_0x117951(0x1ec)),_0x155d9a=document['getElementById']('preview-d1-button'),_0x34befc=document['getElementById']('preview-d2-button'),_0x59b194=document['getElementById']('preview-d3-button'),_0x149fd6=document[_0x117951(0x247)]('filter-toggle-button'),_0x314c5a=document['getElementById']('enhanced-filter-section');if(!_0x4c1ef3||!_0x84a5a9||!_0x155d9a||!_0x34befc||!_0x59b194||!_0x149fd6||!_0x314c5a){console[_0x117951(0x22e)]('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}_0x4c1ef3['addEventListener']('click',()=>{if(!_0x4c1ef3['disabled'])loadRecentMatchesPreview('prev');}),_0x84a5a9['addEventListener'](_0x117951(0x214),()=>{const _0x36c662=_0x117951;if(!_0x84a5a9['disabled'])loadRecentMatchesPreview(_0x36c662(0x24c));}),_0x155d9a['addEventListener']('click',()=>{const _0x2f1a2d=_0x117951;previewState[_0x2f1a2d(0x1f3)]!=='D1'&&!previewState['isLoading']&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x34befc['addEventListener']('click',()=>{const _0x5d71ea=_0x117951;previewState[_0x5d71ea(0x1f3)]!=='D2'&&!previewState['isLoading']&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x59b194['addEventListener'](_0x117951(0x214),()=>{const _0x319344=_0x117951;previewState[_0x319344(0x1f3)]!=='D3'&&!previewState[_0x319344(0x1c4)]&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x149fd6&&_0x314c5a&&_0x149fd6['addEventListener']('click',()=>{const _0x393fae=_0x117951,_0x117513=_0x314c5a['style']['display']!=='none';_0x314c5a[_0x393fae(0x1a0)][_0x393fae(0x23e)]=_0x117513?_0x393fae(0x1d4):'block',_0x149fd6['classList'][_0x393fae(0x1b1)]('active',!_0x117513);});const _0x125e3c=document[_0x117951(0x247)](_0x117951(0x227)),_0x2d8bbb=document[_0x117951(0x247)]('clear-enhanced-filters');_0x125e3c&&_0x125e3c['addEventListener'](_0x117951(0x214),()=>{const _0x2fc895=_0x117951;previewState['enhancedFilters']['pilots']=document['getElementById'](_0x2fc895(0x241))['value']['trim'](),previewState[_0x2fc895(0x1d0)]['levels']=document[_0x2fc895(0x247)](_0x2fc895(0x1ae))['value']['trim']();const _0x5b8893=document['getElementById'](_0x2fc895(0x1af));previewState['enhancedFilters']['subgames']=Array['from'](_0x5b8893[_0x2fc895(0x1c0)])['map'](_0x18fc8d=>_0x18fc8d['value'])['filter'](_0x48043a=>_0x48043a!==''),loadRecentMatchesPreview(_0x2fc895(0x1a3));});_0x2d8bbb&&_0x2d8bbb['addEventListener']('click',()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document['querySelectorAll'](_0x117951(0x1ca))[_0x117951(0x204)](_0x257b7a=>{_0x257b7a['addEventListener']('click',()=>{const _0x2ee609=a4_0x4672,_0x2967b9=_0x257b7a['dataset'][_0x2ee609(0x246)];jumpToPage(_0x2967b9);});});const _0x598ef2=document[_0x117951(0x247)](_0x117951(0x21c));_0x598ef2&&_0x598ef2[_0x117951(0x1ab)]('keypress',_0x29d51d=>{const _0x275957=_0x117951;_0x29d51d[_0x275957(0x1cc)]==='Enter'&&jumpToPage('input');});const _0x60a02c=document['getElementById']('closeCommentPopupPreview'),_0x2df2a4=document['getElementById']('commentOverlayPreview');if(_0x60a02c)_0x60a02c[_0x117951(0x1ab)]('click',closePreviewCommentPopup);if(_0x2df2a4)_0x2df2a4[_0x117951(0x1ab)](_0x117951(0x214),closePreviewCommentPopup);const _0x19b8a9=document['getElementById']('closeAddCommentPopup'),_0x15cf44=document[_0x117951(0x247)]('commentAddOverlay'),_0x3aae43=document['getElementById']('addCommentForm');if(_0x19b8a9)_0x19b8a9['addEventListener'](_0x117951(0x214),closeAddCommentPopup);if(_0x15cf44)_0x15cf44['addEventListener']('click',closeAddCommentPopup);if(_0x3aae43)_0x3aae43['addEventListener']('submit',submitComment);const _0x34ff20=document['getElementById']('commentText'),_0x2df424=document[_0x117951(0x247)](_0x117951(0x224));_0x34ff20&&_0x2df424&&setupWordCounter('commentText','wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window[a4_0x773b4(0x1f7)]=submitComment;