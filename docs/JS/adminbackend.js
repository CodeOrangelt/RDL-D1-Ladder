const a0_0x21b64b=a0_0x52bb;(function(_0x154b01,_0x27620d){const _0x219803=a0_0x52bb,_0x411fc1=_0x154b01();while(!![]){try{const _0x2abc07=-parseInt(_0x219803(0x15f))/0x1*(parseInt(_0x219803(0x1a8))/0x2)+parseInt(_0x219803(0x16f))/0x3*(-parseInt(_0x219803(0x255))/0x4)+-parseInt(_0x219803(0x1e6))/0x5*(-parseInt(_0x219803(0x14e))/0x6)+-parseInt(_0x219803(0x2bd))/0x7*(-parseInt(_0x219803(0x1f9))/0x8)+parseInt(_0x219803(0x357))/0x9+-parseInt(_0x219803(0x257))/0xa+-parseInt(_0x219803(0x358))/0xb*(-parseInt(_0x219803(0x2d6))/0xc);if(_0x2abc07===_0x27620d)break;else _0x411fc1['push'](_0x411fc1['shift']());}catch(_0x735b2e){_0x411fc1['push'](_0x411fc1['shift']());}}}(a0_0x4dad,0x37322));const a0_0x1e9dfb=(function(){let _0x2edda3=!![];return function(_0x57c241,_0x440374){const _0x1458dd=_0x2edda3?function(){const _0x5605e9=a0_0x52bb;if(_0x440374){const _0x7df8c1=_0x440374[_0x5605e9(0x26d)](_0x57c241,arguments);return _0x440374=null,_0x7df8c1;}}:function(){};return _0x2edda3=![],_0x1458dd;};}()),a0_0x5434e9=a0_0x1e9dfb(this,function(){const _0x48d2cd=a0_0x52bb;let _0x1cb97f;try{const _0xd18c=Function(_0x48d2cd(0x34e)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1cb97f=_0xd18c();}catch(_0x2a942d){_0x1cb97f=window;}const _0x2e62e7=_0x1cb97f['console']=_0x1cb97f['console']||{},_0x13f06d=[_0x48d2cd(0x30b),_0x48d2cd(0x225),'info','error','exception','table','trace'];for(let _0x429bf7=0x0;_0x429bf7<_0x13f06d['length'];_0x429bf7++){const _0x1ee96c=a0_0x1e9dfb['constructor'][_0x48d2cd(0x211)][_0x48d2cd(0x1cc)](a0_0x1e9dfb),_0x309be9=_0x13f06d[_0x429bf7],_0x4e753e=_0x2e62e7[_0x309be9]||_0x1ee96c;_0x1ee96c['__proto__']=a0_0x1e9dfb[_0x48d2cd(0x1cc)](a0_0x1e9dfb),_0x1ee96c[_0x48d2cd(0x1f0)]=_0x4e753e['toString']['bind'](_0x4e753e),_0x2e62e7[_0x309be9]=_0x1ee96c;}});a0_0x5434e9();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x31f276){const _0x8e35ef=a0_0x52bb;if(!_0x31f276)return _0x8e35ef(0x157);_0x31f276=_0x31f276[_0x8e35ef(0x271)]('#','');_0x31f276['length']===0x3&&(_0x31f276=_0x31f276['split']('')['map'](_0xfa0a0e=>_0xfa0a0e+_0xfa0a0e)['join'](''));if(_0x31f276['length']!==0x6)return'#ffffff';const _0x1e627b=parseInt(_0x31f276['substring'](0x0,0x2),0x10),_0x3cbc7e=parseInt(_0x31f276['substring'](0x2,0x4),0x10),_0x2172d7=parseInt(_0x31f276['substring'](0x4,0x6),0x10),_0x3e07b0=(_0x1e627b*0x12b+_0x3cbc7e*0x24b+_0x2172d7*0x72)/0x3e8;return _0x3e07b0>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x519240=>{const _0xbba4da=a0_0x52bb;if(!_0x519240){window['location']['href']=_0xbba4da(0x31b);return;}try{await initializeAdminDashboard();}catch(_0x1c11b0){console['error']('Error\x20initializing\x20dashboard:',_0x1c11b0),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0xc24157){const _0x2822c2=a0_0x52bb;if(!_0xc24157)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0xc24157+'\x20in\x20all\x20collections...');const _0xeff972=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':_0x2822c2(0x220)},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':_0x2822c2(0x1ee)}],_0x57267f=auth['currentUser'];let _0x2b6eba=null,_0x580b58=null;for(const _0x11ca77 of _0xeff972){try{if(_0x57267f){const _0x1177e1=doc(db,_0x11ca77['name'],_0x57267f[_0x2822c2(0x178)]),_0x53bfd0=await getDoc(_0x1177e1);if(_0x53bfd0['exists']()){const _0x2813ea=_0x53bfd0['data']();console['log']('Found\x20user\x20in\x20'+_0x11ca77[_0x2822c2(0x23e)]+'\x20by\x20UID:',_0x2813ea);const _0x3309e4=(_0x2813ea['roleName']||_0x2813ea[_0x2822c2(0x262)]||'')[_0x2822c2(0x221)]();if(_0x3309e4&&_0x3309e4!=='none'){_0x2b6eba=_0x3309e4,_0x580b58=_0x11ca77[_0x2822c2(0x23e)],console['log'](_0x2822c2(0x2b3)+_0x2b6eba+_0x2822c2(0x17d)+_0x580b58);break;}}}if(!_0x2b6eba){const _0x4e733c=collection(db,_0x11ca77['name']),_0x47383a=query(_0x4e733c,where('email','==',_0xc24157)),_0x31b42b=await getDocs(_0x47383a);if(!_0x31b42b[_0x2822c2(0x129)]){const _0xe080cf=_0x31b42b['docs'][0x0][_0x2822c2(0x326)]();console[_0x2822c2(0x30b)]('Found\x20user\x20in\x20'+_0x11ca77['displayName']+'\x20with\x20email\x20'+_0xc24157+':',_0xe080cf);const _0x5be007=(_0xe080cf['roleName']||_0xe080cf['role']||'')['toLowerCase']();if(_0x5be007&&_0x5be007!==_0x2822c2(0x32a)){_0x2b6eba=_0x5be007,_0x580b58=_0x11ca77['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x2b6eba+'\x20in\x20'+_0x580b58);break;}}}}catch(_0x5eaa18){console['error']('Error\x20checking\x20'+_0x11ca77[_0x2822c2(0x23e)]+':',_0x5eaa18);}}if(_0x2b6eba){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x2b6eba+'\x20(from\x20'+_0x580b58+')');const _0x2b690f={'admin':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks',_0x2822c2(0x343),'settings','manage-trophies','elo-history','manage-highlights','user-roles-section',_0x2822c2(0x2da),'manage-points',_0x2822c2(0x33c),'manage-ribbons'],'owner':['dashboard',_0x2822c2(0x119),'manage-matches',_0x2822c2(0x2d2),'manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history','manage-highlights',_0x2822c2(0x30f),'manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'council':['dashboard','manage-players',_0x2822c2(0x2da)],'creative\x20lead':[_0x2822c2(0x158),'manage-articles','manage-trophies',_0x2822c2(0x35e),_0x2822c2(0x1a4)]};if(_0x2b690f[_0x2b6eba])return console['log']('Role\x20\x27'+_0x2b6eba+_0x2822c2(0x336),_0x2b690f[_0x2b6eba]),_0x2b690f[_0x2b6eba];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0xc24157+_0x2822c2(0x23d)),['dashboard'];}function setupSidebarNavigation(_0xe5a3e7=[]){const _0x13ffb1=a0_0x52bb,_0x466597=document[_0x13ffb1(0x236)]('.sidebar-nav\x20.nav-item'),_0xda9cb0=document[_0x13ffb1(0x236)]('.admin-section');(!_0xe5a3e7||_0xe5a3e7['length']===0x0)&&(_0xe5a3e7=[_0x13ffb1(0x158)]);_0x466597[_0x13ffb1(0x123)](_0x25efb0=>{const _0x36a5ae=_0x13ffb1,_0x2fa336=_0x25efb0[_0x36a5ae(0x327)]('data-section');_0xe5a3e7[_0x36a5ae(0x2cd)](_0x2fa336)?_0x25efb0['style'][_0x36a5ae(0x2e3)]='flex':_0x25efb0[_0x36a5ae(0x1db)]['display']='none',_0x25efb0['addEventListener']('click',()=>{const _0x500e4f=_0x36a5ae,_0x2b562f=_0x25efb0['getAttribute']('data-section');if(!_0xe5a3e7[_0x500e4f(0x2cd)](_0x2b562f)){showNotification(_0x500e4f(0x30a),_0x500e4f(0x18b));return;}_0x466597[_0x500e4f(0x123)](_0x2e8800=>_0x2e8800['classList'][_0x500e4f(0x24a)](_0x500e4f(0x29b))),_0x25efb0['classList'][_0x500e4f(0x231)]('active'),_0xda9cb0['forEach'](_0x443db9=>{_0x443db9['style']['display']='none';});const _0x3f08a9=document['getElementById'](_0x2b562f);_0x3f08a9&&(_0x3f08a9['style']['display']='block',console['log']('Switched\x20to\x20'+_0x2b562f+'\x20section'));});});const _0x30d5c=document['querySelector'](_0x13ffb1(0x2b6)+_0xe5a3e7[0x0]+'\x22]');_0x30d5c&&_0x30d5c['click'](),console['log'](_0x13ffb1(0x330));}function setupTabNavigation(){const _0x178194=document['querySelectorAll']('.nav-item');let _0x3a5082=null,_0x503a14=new Set();_0x178194['forEach'](_0x1faf38=>{const _0x40908c=a0_0x52bb;_0x1faf38['addEventListener'](_0x40908c(0x18d),function(){const _0x5d81f6=_0x40908c,_0x51e74d=this[_0x5d81f6(0x327)](_0x5d81f6(0x36c));if(_0x51e74d===_0x3a5082)return;_0x3a5082&&(document['getElementById'](_0x3a5082)[_0x5d81f6(0x1db)]['display']='none',_0x178194['forEach'](_0x5638c1=>_0x5638c1[_0x5d81f6(0x1ba)]['remove'](_0x5d81f6(0x29b)))),document['getElementById'](_0x51e74d)['style']['display']=_0x5d81f6(0x2bb),this['classList'][_0x5d81f6(0x231)]('active'),_0x3a5082=_0x51e74d;});});}function loadSectionData(_0x50bea3){return;}async function initializeAdminDashboard(){const _0x1b0516=a0_0x52bb;try{const _0x52cf4b=auth['currentUser'],_0x58b801=await getUserTabPermissions(_0x52cf4b['email']);console['log'](_0x1b0516(0x1cf)+_0x52cf4b[_0x1b0516(0x1bf)]+'\x20allowed\x20tabs:',_0x58b801),window[_0x1b0516(0x266)]=_0x58b801,setupSidebarNavigation(_0x58b801),setupLadderSelector(),setupDashboardSection(),_0x58b801['includes'](_0x1b0516(0x119))&&setupManagePlayersSection(),_0x58b801[_0x1b0516(0x2cd)]('elo-history')&&setupEloHistorySection(),_0x58b801['includes']('manage-ranks')&&setupRankControls(),_0x58b801['includes']('manage-articles')&&setupManageArticlesSection(),_0x58b801['includes']('user-roles-section')&&setupUserRolesSection(),_0x58b801['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x58b801['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x58b801[_0x1b0516(0x2cd)]('inactive-players')&&setupInactivePlayersSection(),_0x58b801['includes']('manage-matches')&&setupManageMatchesSection(),_0x58b801[_0x1b0516(0x2cd)](_0x1b0516(0x35d))&&setupManagePointsSection(),_0x58b801['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x58b801);}catch(_0x25d416){console['error'](_0x1b0516(0x196),_0x25d416);}}function setupDataLoadButtons(_0x54bd76=[]){const _0x55c9cf=a0_0x52bb;(!_0x54bd76||_0x54bd76['length']===0x0)&&(_0x54bd76=['dashboard']);const _0xdf1b6f=document['getElementById']('load-dashboard-data');_0xdf1b6f&&_0xdf1b6f['addEventListener']('click',function(){const _0x2e4542=a0_0x52bb;this[_0x2e4542(0x1ba)]['add'](_0x2e4542(0x29d)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0x2e09a9=_0x2e4542;this['classList']['remove']('loading'),this[_0x2e09a9(0x11b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x5613e1=>{const _0x1cbab6=_0x2e4542;console['error'](_0x1cbab6(0x2b7),_0x5613e1),this[_0x1cbab6(0x1ba)]['remove']('loading'),this[_0x1cbab6(0x11b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x326e46=_0x1cbab6;this[_0x326e46(0x11b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x54bd76[_0x55c9cf(0x2cd)]('manage-trophies')){const _0x29b7bd=document['getElementById']('load-trophies-data');_0x29b7bd&&_0x29b7bd['addEventListener'](_0x55c9cf(0x18d),function(){const _0x3297ea=_0x55c9cf;console['log']('Load\x20trophies\x20data\x20clicked'),this[_0x3297ea(0x1ba)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0x3297ea(0x25c)](()=>{const _0x51ea7d=_0x3297ea;this['classList']['remove']('loading'),this[_0x51ea7d(0x11b)]=_0x51ea7d(0x1b3);})['catch'](_0x31482d=>{const _0x3ea184=_0x3297ea;console['error']('Error\x20loading\x20trophies:',_0x31482d),this[_0x3ea184(0x1ba)]['remove'](_0x3ea184(0x29d)),this[_0x3ea184(0x11b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x54bd76['includes']('manage-players')){const _0x3134f1=document['getElementById']('load-players-data');_0x3134f1&&_0x3134f1['addEventListener'](_0x55c9cf(0x18d),function(){const _0x2c721d=_0x55c9cf;console['log']('Load\x20players\x20data\x20clicked'),this['classList'][_0x2c721d(0x231)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x2c721d(0x25c)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})[_0x2c721d(0x2a9)](_0x292a3e=>{const _0x473e9b=_0x2c721d;console['error']('Error\x20loading\x20players:',_0x292a3e),this['classList']['remove']('loading'),this['innerHTML']=_0x473e9b(0x205),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x54bd76[_0x55c9cf(0x2cd)]('elo-history')){const _0x46e19d=document['getElementById'](_0x55c9cf(0x37a));_0x46e19d&&_0x46e19d['addEventListener']('click',function(){const _0x4fd47c=_0x55c9cf;console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x4fd47c(0x11b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x42d430=_0x4fd47c;this['classList'][_0x42d430(0x24a)](_0x42d430(0x29d)),this['innerHTML']=_0x42d430(0x1f3);})['catch'](_0x4e8ed8=>{const _0x510b2e=_0x4fd47c;console['error']('Error\x20loading\x20history:',_0x4e8ed8),this[_0x510b2e(0x1ba)]['remove']('loading'),this[_0x510b2e(0x11b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x54bd76['includes']('manage-articles')){const _0x52e0b6=document['getElementById']('load-articles-data');_0x52e0b6&&_0x52e0b6['addEventListener']('click',function(){const _0x1fce2b=_0x55c9cf;console['log'](_0x1fce2b(0x32f)),this['classList']['add']('loading'),this[_0x1fce2b(0x11b)]=_0x1fce2b(0x34b),loadArticles()['then'](()=>{const _0x40c2d6=_0x1fce2b;this[_0x40c2d6(0x1ba)]['remove']('loading'),this[_0x40c2d6(0x11b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x4c31c3=>{const _0x91ef5b=_0x1fce2b;console['error']('Error\x20loading\x20articles:',_0x4c31c3),this['classList']['remove']('loading'),this['innerHTML']=_0x91ef5b(0x205),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x54bd76[_0x55c9cf(0x2cd)]('user-roles-section')){const _0x47ee74=document['getElementById'](_0x55c9cf(0x362));_0x47ee74&&_0x47ee74[_0x55c9cf(0x275)]('click',function(){const _0xa2fbc6=_0x55c9cf;console['log'](_0xa2fbc6(0x353)),this['classList']['add']('loading'),this['innerHTML']=_0xa2fbc6(0x34b),loadUsersWithRoles()[_0xa2fbc6(0x25c)](()=>{const _0x42a13f=_0xa2fbc6;this['classList']['remove'](_0x42a13f(0x29d)),this['innerHTML']=_0x42a13f(0x173);})[_0xa2fbc6(0x2a9)](_0x468a1c=>{const _0x329c84=_0xa2fbc6;console['error'](_0x329c84(0x25a),_0x468a1c),this[_0x329c84(0x1ba)]['remove']('loading'),this['innerHTML']=_0x329c84(0x205),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x54bd76['includes']('inactive-players')){const _0x2379c8=document[_0x55c9cf(0x19c)]('load-inactive-players-data');_0x2379c8&&_0x2379c8['addEventListener'](_0x55c9cf(0x18d),function(){const _0x36debe=_0x55c9cf;console[_0x36debe(0x30b)]('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add'](_0x36debe(0x29d)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x92a4b3=_0x36debe;this[_0x92a4b3(0x1ba)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x53e320=>{const _0x27c65d=_0x36debe;console[_0x27c65d(0x18b)]('Error\x20loading\x20inactive\x20players:',_0x53e320),this['classList']['remove']('loading'),this['innerHTML']=_0x27c65d(0x205),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x54bd76['includes']('manage-highlights')){const _0x3ee2a4=document['getElementById']('load-highlights-data');_0x3ee2a4&&_0x3ee2a4['addEventListener'](_0x55c9cf(0x18d),function(){const _0x8896e=_0x55c9cf;console['log'](_0x8896e(0x198)),this['classList']['add']('loading'),this[_0x8896e(0x11b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x1d845a=_0x8896e;this['classList']['remove'](_0x1d845a(0x29d)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})[_0x8896e(0x2a9)](_0x4af8e1=>{const _0x3aa1f4=_0x8896e;console['error']('Error\x20loading\x20highlights:',_0x4af8e1),this['classList']['remove']('loading'),this[_0x3aa1f4(0x11b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x217084=_0x3aa1f4;this[_0x217084(0x11b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x54bd76['includes']('manage-matches')){const _0xd035f6=document['getElementById']('load-matches-data');_0xd035f6&&_0xd035f6['addEventListener']('click',function(){const _0x3aee85=_0x55c9cf;console['log']('Load\x20matches\x20data\x20clicked'),this[_0x3aee85(0x1ba)]['add']('loading'),this[_0x3aee85(0x11b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x1baaf7=_0x3aee85;this[_0x1baaf7(0x1ba)]['remove'](_0x1baaf7(0x29d)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x1391de=>{const _0x5f3930=_0x3aee85;console['error']('Error\x20loading\x20matches:',_0x1391de),this[_0x5f3930(0x1ba)]['remove']('loading'),this[_0x5f3930(0x11b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x54bd76['includes']('manage-ribbons')){const _0x5e176c=document['getElementById']('load-ribbons-data');_0x5e176c&&_0x5e176c[_0x55c9cf(0x275)]('click',function(){const _0x20e54e=_0x55c9cf;console['log']('Load\x20ribbons\x20data\x20clicked'),this[_0x20e54e(0x1ba)][_0x20e54e(0x231)]('loading'),this[_0x20e54e(0x11b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x3935f7=_0x20e54e;this[_0x3935f7(0x1ba)][_0x3935f7(0x24a)]('loading'),this['innerHTML']=_0x3935f7(0x2c6);})[_0x20e54e(0x2a9)](_0x2d889f=>{const _0x2704a9=_0x20e54e;console['error']('Error\x20loading\x20ribbons:',_0x2d889f),this[_0x2704a9(0x1ba)]['remove']('loading'),this[_0x2704a9(0x11b)]=_0x2704a9(0x205),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log'](_0x55c9cf(0x351));}function setupDashboardSection(){const _0x36a18f=a0_0x52bb;document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x36a18f(0x35a))['textContent']='-',document['getElementById'](_0x36a18f(0x1e9))['textContent']='-',document[_0x36a18f(0x19c)]('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x4b4d19=a0_0x52bb,_0x5b4691=document[_0x4b4d19(0x236)]('.ladder-switch\x20input');_0x5b4691['forEach'](_0x59aff8=>{_0x59aff8['addEventListener']('change',()=>{const _0x528374=a0_0x52bb;currentLadder=_0x59aff8['value'],document['body']['setAttribute']('data-ladder',currentLadder);const _0x3495b0=document['getElementById']('current-ladder-display');_0x3495b0&&(_0x3495b0[_0x528374(0x259)]=currentLadder),document['getElementById']('player-count')[_0x528374(0x259)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x528374(0x19c)]('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts[_0x528374(0x2dc)]=null),charts[_0x528374(0x210)]&&(charts['activity'][_0x528374(0x240)](),charts['activity']=null),showNotification(_0x528374(0x33d)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x199281=document['getElementById']('current-ladder-display');_0x199281&&(_0x199281['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x302813=a0_0x52bb;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document['getElementById'](_0x302813(0x142))[_0x302813(0x259)]='-',document[_0x302813(0x19c)]('match-count')['textContent']='-',document[_0x302813(0x19c)](_0x302813(0x1e9))['textContent']='-',document['getElementById'](_0x302813(0x276))['textContent']='-';const _0x5ae6ae=currentLadder==='D1'?_0x302813(0x20d):currentLadder==='D2'?'playersD2':'playersD3',_0x1582a0=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x302813(0x2b4),_0x2f7c0f=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x4029b4=currentLadder==='D1'?_0x302813(0x363):currentLadder==='D2'?'RejectedD2':_0x302813(0x301);console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x5ae6ae+',\x20'+_0x1582a0);const _0x20988f=await getDocs(collection(db,_0x5ae6ae)),_0x3892b0=_0x20988f['size'],_0x14fd14=await getDocs(collection(db,_0x1582a0)),_0x1119a2=_0x14fd14['size'],_0x341e5f=await getDocs(collection(db,_0x2f7c0f)),_0x2b685a=_0x341e5f[_0x302813(0x214)],_0x1b6e30=await getDocs(collection(db,_0x4029b4)),_0x1102f5=_0x1b6e30[_0x302813(0x214)];return document['getElementById']('player-count')['textContent']=_0x3892b0,document[_0x302813(0x19c)]('match-count')['textContent']=_0x1119a2,document['getElementById']('pending-count')['textContent']=_0x2b685a,document['getElementById']('rejected-count')[_0x302813(0x259)]=_0x1102f5,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x34a879){console['error']('Error\x20loading\x20dashboard\x20data:',_0x34a879);throw _0x34a879;}}async function createRankDistributionChart(){const _0x5b1f9a=a0_0x52bb;try{const _0x43c261=collection(db,currentLadder==='D1'?_0x5b1f9a(0x20d):'playersD2'),_0x4f14fc=await getDocs(_0x43c261),_0x29c0b9={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x4f14fc['forEach'](_0x50a93a=>{const _0x1e5495=_0x5b1f9a,_0x50c060=_0x50a93a['data'](),_0x1a07a5=_0x50c060['eloRating']||0x4b0;if(_0x1a07a5>=0x7d0)_0x29c0b9[_0x1e5495(0x1e7)]++;else{if(_0x1a07a5>=0x708)_0x29c0b9['Gold']++;else{if(_0x1a07a5>=0x640)_0x29c0b9[_0x1e5495(0x15e)]++;else{if(_0x1a07a5>=0x578)_0x29c0b9['Bronze']++;else _0x29c0b9[_0x1e5495(0x244)]++;}}}});const _0x43b11e=document['getElementById'](_0x5b1f9a(0x377));charts[_0x5b1f9a(0x2dc)]&&charts['rankDistribution']['destroy'](),charts[_0x5b1f9a(0x2dc)]=new Chart(_0x43b11e,{'type':'doughnut','data':{'labels':Object['keys'](_0x29c0b9),'datasets':[{'data':Object[_0x5b1f9a(0x226)](_0x29c0b9),'backgroundColor':['#808080','#CD7F32',_0x5b1f9a(0x2ae),'#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x5b1f9a(0x13e),'labels':{'color':_0x5b1f9a(0x355)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x3307a1){console['error'](_0x5b1f9a(0x33a),_0x3307a1),document['getElementById']('rank-distribution-chart')['innerHTML']=_0x5b1f9a(0x334);}}async function createActivityChart(){const _0x56970d=a0_0x52bb;try{const _0x358da5=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x1c8d9c=collection(db,_0x358da5),_0x4a053d=new Date();_0x4a053d['setDate'](_0x4a053d['getDate']()-0x7);const _0xb3b60f=query(_0x1c8d9c,where(_0x56970d(0x292),'>=',_0x4a053d),orderBy('approvedAt','asc')),_0x24dc62=await getDocs(_0xb3b60f),_0x485c22=['Sunday','Monday','Tuesday','Wednesday',_0x56970d(0x23f),_0x56970d(0x1de),_0x56970d(0x1e1)],_0x3d3210=_0x485c22['reduce']((_0x5b39ee,_0x56d03d)=>({..._0x5b39ee,[_0x56d03d]:0x0}),{});_0x24dc62['forEach'](_0x1bcc36=>{const _0x3c34b1=_0x56970d,_0x436599=_0x1bcc36['data']();if(_0x436599['approvedAt']){const _0x4621a5=_0x485c22[new Date(_0x436599['approvedAt'][_0x3c34b1(0x26f)]*0x3e8)['getDay']()];_0x3d3210[_0x4621a5]++;}});const _0x4307ed=document[_0x56970d(0x19c)]('activity-chart');charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x4307ed,{'type':_0x56970d(0x29e),'data':{'labels':_0x485c22,'datasets':[{'label':'Matches\x20Played','data':_0x485c22['map'](_0x4737cd=>_0x3d3210[_0x4737cd]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x56970d(0x355)},'grid':{'color':_0x56970d(0x14a)}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':_0x56970d(0x355),'font':{'size':0x10}}}}});}catch(_0x6a1d43){console['error']('Error\x20creating\x20activity\x20chart:',_0x6a1d43),document['getElementById']('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x2a8e7d=a0_0x52bb,_0x519101=document['getElementById'](_0x2a8e7d(0x17a));if(!_0x519101)return;_0x519101['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x287482='players';if(currentLadder==='D2')_0x287482=_0x2a8e7d(0x141);else currentLadder==='D3'&&(_0x287482='playersD3');console[_0x2a8e7d(0x30b)]('Loading\x20players\x20from\x20'+_0x287482+'\x20collection...');const _0x10d234=collection(db,_0x287482),_0x357b28=query(_0x10d234,orderBy(_0x2a8e7d(0x188),_0x2a8e7d(0x249))),_0x5c91a8=await getDocs(_0x357b28);if(_0x5c91a8[_0x2a8e7d(0x129)]){_0x519101['innerHTML']=_0x2a8e7d(0x21d);return;}_0x519101['innerHTML']='';let _0x17438b=0x1;_0x5c91a8['forEach'](_0x3da0ef=>{const _0x590bff=_0x2a8e7d,_0x3ea69a=_0x3da0ef[_0x590bff(0x326)](),_0x1763cc=getRankFromElo(_0x3ea69a['eloRating']||0x4b0),_0x5831fd=getRankStyle(_0x3ea69a['eloRating']||0x4b0),_0x17dd3c=document['createElement']('tr');_0x17dd3c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x17438b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x5831fd['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3ea69a['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x3ea69a['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x5831fd['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1763cc+_0x590bff(0x288)+(_0x3ea69a[_0x590bff(0x154)]||0x0)+'W\x20/\x20'+(_0x3ea69a['losses']||0x0)+_0x590bff(0x18a)+_0x3da0ef['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x3da0ef['id']+_0x590bff(0x2c8),_0x519101[_0x590bff(0x1bc)](_0x17dd3c),_0x17438b++;}),setupPlayerActionButtons();}catch(_0xc25283){console['error'](_0x2a8e7d(0x145),_0xc25283),_0x519101['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0xc25283[_0x2a8e7d(0x11a)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x3b0998){const _0x423501=a0_0x52bb;if(_0x3b0998>=0x7d0)return _0x423501(0x1e7);if(_0x3b0998>=0x708)return'Gold';if(_0x3b0998>=0x640)return'Silver';if(_0x3b0998>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x35affa=a0_0x52bb;document[_0x35affa(0x236)](_0x35affa(0x312))['forEach'](_0x39dd39=>{_0x39dd39['addEventListener']('click',async _0x1f64cf=>{const _0x10a386=_0x1f64cf['currentTarget']['dataset']['id'];openEditPlayerModal(_0x10a386);});}),document[_0x35affa(0x236)]('.delete-btn')['forEach'](_0x4e3786=>{_0x4e3786['addEventListener']('click',async _0x1fb66c=>{const _0x2bd551=a0_0x52bb,_0x4f155a=_0x1fb66c['currentTarget'][_0x2bd551(0x1c4)]['id'];confirmDeletePlayer(_0x4f155a);});});}async function openEditPlayerModal(_0x22809c){const _0x324dbb=a0_0x52bb;try{const _0x6795a3=currentLadder==='D1'?'players':_0x324dbb(0x141),_0xc161fa=doc(db,_0x6795a3,_0x22809c),_0x352b19=await getDoc(_0xc161fa);if(!_0x352b19[_0x324dbb(0x19d)]()){showNotification('Player\x20not\x20found','error');return;}const _0x324a95=_0x352b19['data'](),_0x4d74cd=document['getElementById']('edit-player-modal'),_0x2f2684=document['getElementById'](_0x324dbb(0x347)),_0x4d751e=document[_0x324dbb(0x19c)](_0x324dbb(0x201)),_0x2adbe5=document['getElementById']('edit-wins'),_0x4e0539=document[_0x324dbb(0x19c)]('edit-losses');_0x2f2684['value']=_0x324a95['username']||'',_0x4d751e['value']=_0x324a95['eloRating']||0x4b0,_0x2adbe5['value']=_0x324a95['wins']||0x0,_0x4e0539['value']=_0x324a95['losses']||0x0,_0x4d74cd['dataset'][_0x324dbb(0x279)]=_0x22809c,_0x4d74cd[_0x324dbb(0x1ba)][_0x324dbb(0x231)]('active');}catch(_0x31ac33){console['error'](_0x324dbb(0x15a),_0x31ac33),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x32dfc1=a0_0x52bb;try{const _0x2ec559=document[_0x32dfc1(0x19c)]('edit-player-modal'),_0x5f3a49=_0x2ec559['dataset']['playerId'];if(!_0x5f3a49){showNotification('No\x20player\x20selected','error');return;}const _0x3854dc=document['getElementById']('edit-username'),_0x4ae68d=document['getElementById']('edit-elo'),_0x3dd04a=document['getElementById']('edit-wins'),_0x3ed113=document['getElementById']('edit-losses'),_0x5bacf6=_0x3854dc['value']['trim'](),_0x51bde1=parseInt(_0x4ae68d[_0x32dfc1(0x2bf)]),_0x14074e=parseInt(_0x3dd04a['value']),_0x35e597=parseInt(_0x3ed113['value']);if(!_0x5bacf6||isNaN(_0x51bde1)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x1f8ce2=currentLadder==='D1'?'players':'playersD2',_0x24df02=doc(db,_0x1f8ce2,_0x5f3a49),_0x53fc76=await getDoc(_0x24df02),_0x5ba543=_0x53fc76[_0x32dfc1(0x19d)]()?_0x53fc76['data']():{},_0x154d80=_0x5ba543['eloRating']||0x4b0;await updateDoc(_0x24df02,{'username':_0x5bacf6,'eloRating':_0x51bde1,'wins':_0x14074e||0x0,'losses':_0x35e597||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x32dfc1(0x1f2)][_0x32dfc1(0x1bf)]});if(_0x51bde1!==_0x154d80){const _0x225eff=currentLadder==='D1'?'eloHistory':_0x32dfc1(0x21f);await addDoc(collection(db,_0x225eff),{'player':_0x5bacf6,'previousElo':_0x154d80,'newElo':_0x51bde1,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x32dfc1(0x1f2)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x966ddb){console['error']('Error\x20updating\x20player:',_0x966ddb),showNotification(_0x32dfc1(0x186)+_0x966ddb['message'],'error');}}function closeEditPlayerModal(){const _0x4681d8=a0_0x52bb,_0x365ff2=document['getElementById'](_0x4681d8(0x309));_0x365ff2['classList'][_0x4681d8(0x24a)](_0x4681d8(0x29b)),_0x365ff2[_0x4681d8(0x1c4)]['playerId']='';}async function confirmDeletePlayer(_0x14edba){const _0x201330=a0_0x52bb;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x458fca=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x458fca,_0x14edba)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x427e37){console['error']('Error\x20deleting\x20player:',_0x427e37),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x427e37['message'],_0x201330(0x18b));}}async function setupManagePlayersSection(){const _0x45b6b0=a0_0x52bb,_0xc9040b=document['getElementById']('add-player-form');_0xc9040b&&_0xc9040b[_0x45b6b0(0x275)](_0x45b6b0(0x175),async _0x185d18=>{_0x185d18['preventDefault'](),await addNewPlayer();});const _0x19c9fb=document['getElementById']('player-search');_0x19c9fb&&_0x19c9fb['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x14c7ed=document['getElementById']('save-player-btn');_0x14c7ed&&_0x14c7ed[_0x45b6b0(0x275)]('click',saveEditedPlayer);const _0x15dab3=document['getElementById']('cancel-edit-btn');_0x15dab3&&_0x15dab3[_0x45b6b0(0x275)](_0x45b6b0(0x18d),closeEditPlayerModal);const _0x92fdfb=document['getElementById'](_0x45b6b0(0x309));_0x92fdfb&&_0x92fdfb['addEventListener']('click',_0x16c453=>{_0x16c453['target']===_0x92fdfb&&closeEditPlayerModal();});const _0x3f2d31=document[_0x45b6b0(0x19c)]('players-ladder-selector');_0x3f2d31&&_0x3f2d31['addEventListener']('change',()=>{const _0x5506d8=_0x45b6b0;currentLadder=_0x3f2d31[_0x5506d8(0x2bf)],loadPlayersData();});}async function addNewPlayer(){const _0x20520c=a0_0x52bb;try{const _0x347dac=document[_0x20520c(0x19c)]('new-player-username'),_0xc47dff=document['getElementById']('new-player-elo'),_0x3de34f=_0x347dac['value'][_0x20520c(0x21b)](),_0x3fec23=parseInt(_0xc47dff[_0x20520c(0x2bf)])||0x4b0;if(!_0x3de34f){alert('Please\x20enter\x20a\x20valid\x20username');return;}console[_0x20520c(0x30b)]('Adding\x20player\x20'+_0x3de34f+'\x20with\x20ELO\x20'+_0x3fec23+_0x20520c(0x1d3)+currentLadder+'\x20ladder');let _0x3a47a8='players',_0x2afd7b='eloHistory';if(currentLadder==='D2')_0x3a47a8=_0x20520c(0x141),_0x2afd7b='eloHistoryD2';else currentLadder==='D3'&&(_0x3a47a8='playersD3',_0x2afd7b='eloHistoryD3');const _0xc0c8a7=query(collection(db,_0x3a47a8),where('username','==',_0x3de34f)),_0x10ebaa=await getDocs(_0xc0c8a7);if(!_0x10ebaa[_0x20520c(0x129)]){alert('Username\x20'+_0x3de34f+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x437b2e=auth['currentUser'],_0x19eead={'username':_0x3de34f,'eloRating':_0x3fec23,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x437b2e?_0x437b2e['email']:_0x20520c(0x278),'gameMode':currentLadder};await addDoc(collection(db,_0x3a47a8),_0x19eead),await addDoc(collection(db,_0x2afd7b),{'player':_0x3de34f,'previousElo':0x4b0,'newElo':_0x3fec23,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x437b2e?_0x437b2e['email']:'admin','gameMode':currentLadder}),_0x347dac['value']='',_0xc47dff['value']=_0x20520c(0x263),alert(_0x20520c(0x182)+_0x3de34f+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x34132c){console['error']('Error\x20adding\x20player:',_0x34132c),alert(_0x20520c(0x1ff)+_0x34132c['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x22009e=a0_0x52bb,_0x102a92=document['getElementById'](_0x22009e(0x305));_0x102a92&&_0x102a92['addEventListener']('submit',_0x3c839f=>{_0x3c839f['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x4cb0ce=a0_0x52bb,_0x57ebbd=document['getElementById']('player-search')['value']['toLowerCase'](),_0x102c0b=document[_0x4cb0ce(0x236)](_0x4cb0ce(0x2d3));let _0x63a239=0x0;_0x102c0b['forEach'](_0x3a85dd=>{const _0x836f04=_0x4cb0ce,_0x4e8611=_0x3a85dd['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x4e8611['includes'](_0x57ebbd)?(_0x3a85dd['style']['display']='',_0x63a239++):_0x3a85dd[_0x836f04(0x1db)]['display']='none';});const _0x46ad30=document[_0x4cb0ce(0x19c)]('no-results-message');_0x46ad30&&(_0x63a239===0x0&&_0x57ebbd!==''?_0x46ad30['style'][_0x4cb0ce(0x2e3)]='block':_0x46ad30[_0x4cb0ce(0x1db)]['display']=_0x4cb0ce(0x32a));}function debounce(_0x50ca3e,_0xd4eb){let _0x3b8534;return function(..._0xada162){clearTimeout(_0x3b8534),_0x3b8534=setTimeout(()=>_0x50ca3e['apply'](this,_0xada162),_0xd4eb);};}async function loadEloHistory(_0x475b8d=0x1){const _0xba3340=a0_0x52bb,_0x31125b=document['getElementById'](_0xba3340(0x2e2)),_0x225c23=currentLadder['toLowerCase']();if(!_0x31125b)return;_0x31125b[_0xba3340(0x11b)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x4a2fa6=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':_0xba3340(0x346),_0x26814a=collection(db,_0x4a2fa6);let _0x5679ac;if(_0x475b8d>eloHistoryPagination[_0x225c23][_0xba3340(0x365)]&&eloHistoryPagination[_0x225c23]['lastVisible'])_0x5679ac=query(_0x26814a,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x225c23]['lastVisible']),limit(PAGE_SIZE));else _0x475b8d<eloHistoryPagination[_0x225c23][_0xba3340(0x365)]&&eloHistoryPagination[_0x225c23]['firstVisible']?_0x5679ac=query(_0x26814a,orderBy(_0xba3340(0x15b),'desc'),endBefore(eloHistoryPagination[_0x225c23]['firstVisible']),limitToLast(PAGE_SIZE)):_0x5679ac=query(_0x26814a,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x5380cc=await getDocs(_0x5679ac);if(_0x5380cc['empty']){_0x31125b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x225c23+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x225c23]['page']=_0x475b8d,eloHistoryPagination[_0x225c23]['firstVisible']=_0x5380cc['docs'][0x0],eloHistoryPagination[_0x225c23][_0xba3340(0x2b2)]=_0x5380cc[_0xba3340(0x282)][_0x5380cc['docs']['length']-0x1];const _0x3eeaec=new Map();_0x31125b['innerHTML']='';const _0x31dfb8=async _0x56d731=>{const _0x1b11dc=_0xba3340;if(typeof _0x56d731!=='string'||_0x56d731['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x56d731))return _0x56d731;if(_0x3eeaec['has'](_0x56d731))return _0x3eeaec[_0x1b11dc(0x18c)](_0x56d731);try{for(const _0x2494f9 of['players','playersD2',_0x1b11dc(0x350),'nonParticipants']){const _0x39e1bf=await getDoc(doc(db,_0x2494f9,_0x56d731));if(_0x39e1bf['exists']()&&_0x39e1bf['data']()[_0x1b11dc(0x373)]){const _0xd2ce17=_0x39e1bf['data']()[_0x1b11dc(0x373)];return _0x3eeaec['set'](_0x56d731,_0xd2ce17),_0xd2ce17;}}return _0x56d731;}catch(_0x5377d9){return console[_0x1b11dc(0x225)](_0x1b11dc(0x265)+_0x56d731+':',_0x5377d9),_0x56d731;}};for(const _0x169e45 of _0x5380cc['docs']){const _0x4f97e6=_0x169e45[_0xba3340(0x326)](),_0x580d62=document[_0xba3340(0x344)]('tr'),_0x44846e=_0x4f97e6[_0xba3340(0x15b)]?new Date(_0x4f97e6['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x2f1df5=_0x4f97e6['newElo']-_0x4f97e6['previousElo'],_0x4a531e=_0x2f1df5>0x0?_0xba3340(0x127):_0x2f1df5<0x0?'negative-change':'',_0x3673bf=_0x2f1df5>0x0?'+':'',_0x4a7bfc=_0x4f97e6['player']||_0x4f97e6['username']||_0x4f97e6['userId']||'N/A',_0x4dd932=await _0x31dfb8(_0x4a7bfc);_0x580d62[_0xba3340(0x11b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x44846e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x4dd932+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x4f97e6['previousElo']||_0xba3340(0x307))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x4f97e6[_0xba3340(0x2ba)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4a531e+'\x22>'+_0x3673bf+_0x2f1df5+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x4f97e6[_0xba3340(0x270)])+_0xba3340(0x130)+(_0x4f97e6['modifiedBy']||_0x4f97e6['promotedBy']||_0x4f97e6[_0xba3340(0x1ea)]||_0xba3340(0x14c))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x31125b['appendChild'](_0x580d62);}document['getElementById'](_0x225c23+'-page-indicator')['textContent']='Page\x20'+_0x475b8d;const _0x4ca271=document['getElementById'](_0x225c23+_0xba3340(0x36b)),_0x5b97c2=document['getElementById'](_0x225c23+'-next-page');if(_0x4ca271)_0x4ca271['disabled']=_0x475b8d<=0x1;const _0x710c61=query(_0x26814a,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x225c23]['lastVisible']),limit(0x1)),_0xb48ed7=await getDocs(_0x710c61);if(_0x5b97c2)_0x5b97c2['disabled']=_0xb48ed7[_0xba3340(0x129)];}catch(_0x5b5da7){console[_0xba3340(0x18b)]('Error\x20loading\x20ELO\x20history:',_0x5b5da7),_0x31125b['innerHTML']=_0xba3340(0x27b)+_0x5b5da7[_0xba3340(0x11a)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x1cdeca){const _0x227402=a0_0x52bb;switch(_0x1cdeca){case'match_result':return'Match\x20Result';case'promotion':return'Promotion';case _0x227402(0x1b2):return _0x227402(0x349);case'admin_modification':return _0x227402(0x233);case'initial_placement':return'Initial\x20Placement';default:return _0x1cdeca||'Unknown';}}function setupEloHistorySection(){const _0x22a57e=a0_0x52bb;document['getElementById'](_0x22a57e(0x2c3))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener']('click',()=>{const _0x206b4d=_0x22a57e;loadEloHistory(eloHistoryPagination['d2'][_0x206b4d(0x365)]+0x1);});const _0x50689f=document[_0x22a57e(0x19c)]('d3-prev-page'),_0x339b8e=document['getElementById']('d3-next-page');_0x50689f&&_0x50689f[_0x22a57e(0x275)]('click',()=>{const _0x53f057=_0x22a57e;loadEloHistory(eloHistoryPagination['d3'][_0x53f057(0x365)]-0x1);});_0x339b8e&&_0x339b8e[_0x22a57e(0x275)]('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x2a6754=document['getElementById'](_0x22a57e(0x1ad));_0x2a6754&&_0x2a6754['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x2b7924=document['getElementById']('history-type-filter');_0x2b7924&&_0x2b7924['addEventListener']('change',applyEloHistoryFilters);const _0x56b4a4=document['getElementById']('reset-history-filters');_0x56b4a4&&_0x56b4a4['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x14c1c7=a0_0x52bb,_0x113a0d=document[_0x14c1c7(0x19c)]('elo-history-search')['value']['toLowerCase'](),_0x45070c=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x49350a=0x0;_0x45070c['forEach'](_0x3e97e9=>{const _0xfa2a=_0x14c1c7;if(_0x3e97e9['classList']['contains']('loading-cell')||_0x3e97e9['classList']['contains']('empty-state')||_0x3e97e9['classList'][_0xfa2a(0x2eb)](_0xfa2a(0x281)))return;const _0x12e568=_0x3e97e9['querySelector']('.player')?.[_0xfa2a(0x259)]['toLowerCase']()||'',_0x1ad4ed=_0x3e97e9[_0xfa2a(0x295)]('.type')?.[_0xfa2a(0x259)][_0xfa2a(0x221)]()||'',_0xeaead3=_0x3e97e9['querySelector']('.admin-action')?.['textContent']['toLowerCase']()||'';_0x12e568['includes'](_0x113a0d)||_0x1ad4ed['includes'](_0x113a0d)||_0xeaead3['includes'](_0x113a0d)?(_0x3e97e9[_0xfa2a(0x1db)][_0xfa2a(0x2e3)]='',_0x49350a++):_0x3e97e9[_0xfa2a(0x1db)]['display']='none';});}async function applyEloHistoryFilters(){const _0x3824d2=a0_0x52bb,_0x47e011=document['getElementById']('history-start-date')['value'],_0x189a71=document['getElementById']('history-end-date')['value'],_0x5415f7=document['getElementById'](_0x3824d2(0x1d4))[_0x3824d2(0x2bf)],_0x4b6660=currentLadder['toLowerCase']();eloHistoryPagination[_0x4b6660]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x5ca4f9=document['getElementById']('elo-history-table-body');_0x5ca4f9['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x513e39=currentLadder==='D1'?'eloHistory':_0x3824d2(0x21f),_0x1c36e1=collection(db,_0x513e39);let _0x275969=[orderBy('timestamp','desc')];if(_0x47e011){const _0x505e72=new Date(_0x47e011);_0x505e72['setHours'](0x0,0x0,0x0,0x0),_0x275969['push'](where('timestamp','>=',_0x505e72));}if(_0x189a71){const _0x35e0b5=new Date(_0x189a71);_0x35e0b5[_0x3824d2(0x311)](0x17,0x3b,0x3b,0x3e7),_0x275969['push'](where('timestamp','<=',_0x35e0b5));}_0x5415f7&&_0x5415f7!=='all'&&_0x275969[_0x3824d2(0x29a)](where(_0x3824d2(0x270),'==',_0x5415f7));_0x275969['push'](limit(PAGE_SIZE));const _0x178186=query(_0x1c36e1,..._0x275969),_0x2858ad=await getDocs(_0x178186);!_0x2858ad[_0x3824d2(0x129)]&&(eloHistoryPagination[_0x4b6660]['firstVisible']=_0x2858ad[_0x3824d2(0x282)][0x0],eloHistoryPagination[_0x4b6660]['lastVisible']=_0x2858ad[_0x3824d2(0x282)][_0x2858ad['docs']['length']-0x1]);_0x5ca4f9['innerHTML']='';if(_0x2858ad['empty']){_0x5ca4f9['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x2858ad['forEach'](_0x1a68aa=>{const _0x37c7be=_0x3824d2,_0xa5513b=_0x1a68aa['data'](),_0x47a5d1=document[_0x37c7be(0x344)]('tr'),_0x46498a=_0xa5513b[_0x37c7be(0x15b)]?new Date(_0xa5513b['timestamp']['seconds']*0x3e8)[_0x37c7be(0x18f)]():'N/A',_0x14e23d=_0xa5513b['newElo']-_0xa5513b[_0x37c7be(0x2f4)],_0x31a939=_0x14e23d>0x0?'positive-change':_0x14e23d<0x0?_0x37c7be(0x30c):'',_0x1a4cdc=_0x14e23d>0x0?'+':'',_0x117ced=_0xa5513b[_0x37c7be(0x253)]||_0xa5513b['username']||_0xa5513b[_0x37c7be(0x172)]||_0x37c7be(0x307);_0x47a5d1[_0x37c7be(0x11b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x46498a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x117ced+_0x37c7be(0x245)+(_0xa5513b['previousElo']||_0x37c7be(0x307))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0xa5513b[_0x37c7be(0x2ba)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x31a939+'\x22>'+_0x1a4cdc+_0x14e23d+_0x37c7be(0x1cd)+formatHistoryType(_0xa5513b['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xa5513b['modifiedBy']||_0xa5513b[_0x37c7be(0x1cb)]||_0xa5513b['demotedBy']||'System')+_0x37c7be(0x368),_0x5ca4f9[_0x37c7be(0x1bc)](_0x47a5d1);}),document[_0x3824d2(0x19c)](_0x4b6660+'-page-indicator')['textContent']='Page\x201';}catch(_0x3ee66e){console[_0x3824d2(0x18b)]('Error\x20applying\x20filters:',_0x3ee66e),_0x5ca4f9['innerHTML']=_0x3824d2(0x1b9)+_0x3ee66e['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x3cc36f=a0_0x52bb;document['getElementById']('history-start-date')['value']='',document[_0x3cc36f(0x19c)]('history-end-date')['value']='',document[_0x3cc36f(0x19c)]('history-type-filter')['value']=_0x3cc36f(0x2ee),document['getElementById'](_0x3cc36f(0x1ad))['value']='';const _0x3809ad=currentLadder[_0x3cc36f(0x221)]();eloHistoryPagination[_0x3809ad]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x1548cb=a0_0x52bb,_0x5bcb0f=document['getElementById']('promote-player-btn'),_0xbcdb83=document[_0x1548cb(0x19c)]('promote-modal'),_0x21985e=document['getElementById'](_0x1548cb(0x280));_0x5bcb0f&&_0xbcdb83&&_0x21985e&&(_0x5bcb0f['addEventListener']('click',()=>{const _0x5a244e=_0x1548cb;_0xbcdb83['classList'][_0x5a244e(0x231)](_0x5a244e(0x29b));}),_0xbcdb83['addEventListener']('click',_0x11e283=>{_0x11e283['target']===_0xbcdb83&&_0xbcdb83['classList']['remove']('active');}),_0x21985e[_0x1548cb(0x275)](_0x1548cb(0x175),async _0x1b378e=>{const _0xcf6bab=_0x1548cb;_0x1b378e[_0xcf6bab(0x24d)]();const _0x21f9d6=document['getElementById']('promote-username'),_0x28cd08=document[_0xcf6bab(0x19c)]('promote-ladder'),_0x4dd089=_0x21f9d6[_0xcf6bab(0x2bf)]['trim'](),_0x4d5298=_0x28cd08[_0xcf6bab(0x2bf)];if(!_0x4dd089){showNotification(_0xcf6bab(0x338),_0xcf6bab(0x18b));return;}try{await promotePlayer(_0x4dd089,_0x4d5298),_0xbcdb83['classList']['remove'](_0xcf6bab(0x29b)),_0x21f9d6['value']='';}catch(_0x595fe9){showNotification(_0x595fe9['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{_0xbcdb83['classList']['remove']('active');}));const _0x5d030e=document[_0x1548cb(0x19c)]('demote-player-btn'),_0x4af30f=document['getElementById']('demote-modal'),_0x2b9e3b=document['getElementById']('demote-form');_0x5d030e&&_0x4af30f&&_0x2b9e3b&&(_0x5d030e[_0x1548cb(0x275)]('click',()=>{_0x4af30f['classList']['add']('active');}),_0x4af30f[_0x1548cb(0x275)]('click',_0x179063=>{const _0x836893=_0x1548cb;_0x179063['target']===_0x4af30f&&_0x4af30f['classList'][_0x836893(0x24a)]('active');}),_0x2b9e3b['addEventListener']('submit',async _0x3c6ceb=>{const _0x32fad5=_0x1548cb;_0x3c6ceb['preventDefault']();const _0x159dae=document[_0x32fad5(0x19c)](_0x32fad5(0x207)),_0x2fa760=document['getElementById'](_0x32fad5(0x367)),_0x3f8183=_0x159dae['value']['trim'](),_0x2bc11a=_0x2fa760['value'];if(!_0x3f8183){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x3f8183,_0x2bc11a),document[_0x32fad5(0x19c)]('demote-modal')['classList']['remove']('active'),document[_0x32fad5(0x19c)]('demote-username')[_0x32fad5(0x2bf)]='';}catch(_0x14af2b){console[_0x32fad5(0x18b)]('Error\x20in\x20demotion:',_0x14af2b);}}));const _0x201382=document['getElementById']('set-elo-btn'),_0x58c996=document['getElementById']('set-elo-modal'),_0x61fee4=document['getElementById']('set-elo-form');_0x201382&&_0x58c996&&_0x61fee4&&(_0x201382['addEventListener'](_0x1548cb(0x18d),()=>{_0x58c996['classList']['add']('active');}),_0x58c996['addEventListener']('click',_0x41e07a=>{const _0x482879=_0x1548cb;_0x41e07a['target']===_0x58c996&&_0x58c996['classList']['remove'](_0x482879(0x29b));}),_0x61fee4['addEventListener'](_0x1548cb(0x175),async _0x236dbe=>{const _0x11c2eb=_0x1548cb;_0x236dbe['preventDefault']();const _0x10382=document['getElementById']('set-elo-username'),_0x536397=document['getElementById']('set-elo-value');let _0x56bb1e;const _0x5e2db8=document['getElementById'](_0x11c2eb(0x17f)),_0x2bd00c=document['querySelector'](_0x11c2eb(0x1b5));if(_0x5e2db8)_0x56bb1e=_0x5e2db8[_0x11c2eb(0x2bf)];else _0x2bd00c?_0x56bb1e=_0x2bd00c[_0x11c2eb(0x2bf)]:_0x56bb1e='D1';if(!_0x10382||!_0x536397){showNotification(_0x11c2eb(0x361),'error');return;}const _0x5903f3=_0x10382['value']['trim'](),_0x4f198d=parseInt(_0x536397['value']);if(!_0x5903f3||isNaN(_0x4f198d)){showNotification(_0x11c2eb(0x2aa),'error');return;}try{await setCustomElo(_0x5903f3,_0x4f198d,_0x56bb1e),_0x58c996['classList']['remove']('active'),_0x10382['value']='',_0x536397['value']='';}catch(_0x15b6ea){showNotification(_0x15b6ea['message'],'error');}}),document[_0x1548cb(0x19c)]('cancel-set-elo-btn')[_0x1548cb(0x275)](_0x1548cb(0x18d),()=>{const _0x59e0e8=_0x1548cb;_0x58c996['classList']['remove'](_0x59e0e8(0x29b));}));const _0x5c90ad=document['getElementById']('set-role-modal'),_0x22a2b7=document['getElementById']('set-role-form');if(_0x5c90ad&&_0x22a2b7){_0x5c90ad[_0x1548cb(0x275)]('click',_0x28e7db=>{_0x28e7db['target']===_0x5c90ad&&closeModalHandler();}),_0x22a2b7['addEventListener'](_0x1548cb(0x175),async _0x509aee=>{const _0x4f1044=_0x1548cb;_0x509aee['preventDefault']();const _0x46f197=document['getElementById'](_0x4f1044(0x195)),_0x3ddc78=document[_0x4f1044(0x19c)]('role-name'),_0x32f815=document[_0x4f1044(0x19c)](_0x4f1044(0x1d1)),_0x12312b=_0x46f197['value']['trim'](),_0x27225d=_0x3ddc78['value']['trim'](),_0xf19f91=_0x32f815[_0x4f1044(0x2bf)];if(!_0x12312b){showNotification(_0x4f1044(0x277),'error');return;}try{await setUserRole(_0x12312b,_0x27225d,_0xf19f91),closeModalHandler(),loadUsersWithRoles();}catch(_0x4b9ab2){}});const _0x45496d=document[_0x1548cb(0x19c)](_0x1548cb(0x171));_0x45496d&&(_0x45496d['removeEventListener'](_0x1548cb(0x18d),closeModalHandler),_0x45496d['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x39c778,_0x2a579a){const _0x105ab6=a0_0x52bb;try{console[_0x105ab6(0x30b)]('Attempting\x20to\x20promote\x20'+_0x39c778+'\x20in\x20'+_0x2a579a+_0x105ab6(0x34d));const _0x1fed52=auth[_0x105ab6(0x1f2)];if(!_0x1fed52)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x4634df=_0x2a579a==='D2'?'playersD2':'players',_0x1876cf=_0x2a579a==='D2'?'eloHistoryD2':_0x105ab6(0x320);console[_0x105ab6(0x30b)](_0x105ab6(0x27f)+_0x4634df);const _0xa00ec3=collection(db,_0x4634df),_0x4a32af=query(_0xa00ec3,where(_0x105ab6(0x373),'==',_0x39c778)),_0x3253f7=await getDocs(_0x4a32af);if(_0x3253f7['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x2a579a+_0x105ab6(0x34d));throw new Error(_0x105ab6(0x11e)+_0x2a579a+'\x20ladder');}const _0x356337=_0x3253f7['docs'][0x0],_0x28bce4=_0x356337[_0x105ab6(0x326)](),_0x45af2f=_0x28bce4['eloRating']||0x4b0,_0x2f95b4=_0x356337['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x45af2f);const _0x4620d8=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':_0x105ab6(0x125),'elo':0x708},{'name':_0x105ab6(0x1e7),'elo':0x7d0}];let _0x320aa6=_0x4620d8['find'](_0x257175=>_0x257175['elo']>_0x45af2f);if(!_0x320aa6){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x2a579a+'\x20ladder');throw new Error(_0x105ab6(0x235)+_0x2a579a+'\x20ladder');}console['log']('Promoting\x20player\x20to\x20'+_0x320aa6['name']+'\x20('+_0x320aa6['elo']+')'),await updateDoc(doc(db,_0x4634df,_0x356337['id']),{'eloRating':_0x320aa6['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x1fed52['email']||'admin'}),await addDoc(collection(db,_0x1876cf),{'player':_0x39c778,'previousElo':_0x45af2f,'newElo':_0x320aa6['elo'],'timestamp':serverTimestamp(),'type':_0x105ab6(0x1b7),'rankAchieved':_0x320aa6[_0x105ab6(0x183)],'promotedBy':_0x1fed52['email']||_0x105ab6(0x278),'gameMode':_0x2a579a});try{const {promotionManager:_0x4b1452}=await import('./promotions.js'),_0x1829a6=_0x4b1452[_0x105ab6(0x26b)](_0x45af2f),_0x5258cd=_0x320aa6['name'];await _0x4b1452[_0x105ab6(0x252)](_0x2f95b4,_0x39c778,_0x45af2f,_0x320aa6[_0x105ab6(0x27d)],_0x1829a6,_0x5258cd,_0x105ab6(0x1b7),{'displayName':_0x39c778,'source':_0x105ab6(0x278),'adminUser':_0x1fed52['email'],'ladder':_0x2a579a}),console['log'](_0x105ab6(0x15c));}catch(_0x2dea23){console['error'](_0x105ab6(0x315),_0x2dea23);}return alert('Successfully\x20promoted\x20'+_0x39c778+'\x20to\x20'+_0x320aa6['name']+'\x20('+_0x320aa6[_0x105ab6(0x27d)]+')'),currentLadder===_0x2a579a&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x354245){console['error']('Error\x20promoting\x20player:',_0x354245),alert('Error\x20promoting\x20player:\x20'+_0x354245[_0x105ab6(0x11a)]);throw _0x354245;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x11a60c=a0_0x52bb,_0x27858c=document['getElementById']('promote-form');_0x27858c&&_0x27858c['addEventListener'](_0x11a60c(0x175),async _0xd798fc=>{const _0x28a3dc=_0x11a60c;_0xd798fc['preventDefault']();const _0x13606b=document['getElementById']('promote-username')['value']['trim'](),_0x5765dc=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x13606b){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x13606b,_0x5765dc),document[_0x28a3dc(0x19c)]('promote-modal')['classList']['remove']('active'),document['getElementById']('promote-username')[_0x28a3dc(0x2bf)]='';}catch(_0xc674ed){console[_0x28a3dc(0x18b)]('Error\x20in\x20promotion:',_0xc674ed);}});});async function demotePlayer(_0x2b9b6e,_0x1af965){const _0xd4e783=a0_0x52bb;try{console[_0xd4e783(0x30b)]('Attempting\x20to\x20demote\x20'+_0x2b9b6e+'\x20in\x20'+_0x1af965+_0xd4e783(0x34d));const _0x540a2f=auth['currentUser'];if(!_0x540a2f)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x2264fa=_0x1af965==='D2'?_0xd4e783(0x141):'players',_0xaebebc=_0x1af965==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x2264fa);const _0x432452=collection(db,_0x2264fa),_0x3a2ca9=query(_0x432452,where('username','==',_0x2b9b6e)),_0x10184a=await getDocs(_0x3a2ca9);if(_0x10184a['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x1af965+'\x20ladder');throw new Error(_0xd4e783(0x11e)+_0x1af965+_0xd4e783(0x34d));}const _0x2faba4=_0x10184a[_0xd4e783(0x282)][0x0],_0x5a076c=_0x2faba4['data'](),_0x107b98=_0x5a076c['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x107b98);const _0x22ffa4=[{'name':_0xd4e783(0x125),'elo':0x708},{'name':'Silver','elo':0x640},{'name':_0xd4e783(0x1ed),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x4751e3=_0x22ffa4['find'](_0x214374=>_0x214374[_0xd4e783(0x27d)]<_0x107b98);if(!_0x4751e3){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x1af965+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x1af965+'\x20ladder');}console[_0xd4e783(0x30b)](_0xd4e783(0x217)+_0x4751e3['name']+'\x20('+_0x4751e3['elo']+')'),await updateDoc(doc(db,_0x2264fa,_0x2faba4['id']),{'eloRating':_0x4751e3['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x540a2f['email']||_0xd4e783(0x278)}),await addDoc(collection(db,_0xaebebc),{'player':_0x2b9b6e,'previousElo':_0x107b98,'newElo':_0x4751e3['elo'],'timestamp':serverTimestamp(),'type':_0xd4e783(0x1b2),'rankAchieved':_0x4751e3['name'],'demotedBy':_0x540a2f['email']||_0xd4e783(0x278),'gameMode':_0x1af965});try{const {promotionManager:_0x29066b}=await import(_0xd4e783(0x36f)),_0x157794=_0x29066b['getRankName'](_0x107b98),_0x24a501=_0x4751e3['name'];await _0x29066b['sendPromotionNotification'](_0x2faba4['id'],_0x2b9b6e,_0x107b98,_0x4751e3['elo'],_0x157794,_0x24a501,'demotion',{'displayName':_0x2b9b6e,'source':'admin','adminUser':_0x540a2f['email'],'ladder':_0x1af965}),console[_0xd4e783(0x30b)](_0xd4e783(0x163));}catch(_0x22983e){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x22983e);}return alert('Successfully\x20demoted\x20'+_0x2b9b6e+'\x20to\x20'+_0x4751e3['name']+'\x20('+_0x4751e3['elo']+')'),currentLadder===_0x1af965&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x362ced){console['error']('Error\x20demoting\x20player:',_0x362ced),alert(_0xd4e783(0x1a9)+_0x362ced[_0xd4e783(0x11a)]);throw _0x362ced;}}document['addEventListener'](a0_0x21b64b(0x1fc),()=>{const _0x1d220c=document['getElementById']('demote-form');_0x1d220c&&_0x1d220c['addEventListener']('submit',async _0x510fc7=>{const _0x233c26=a0_0x52bb;_0x510fc7['preventDefault']();const _0x57c86a=document['getElementById']('demote-username')['value'][_0x233c26(0x21b)](),_0x9d3587=document['querySelector'](_0x233c26(0x23a))['value'];if(!_0x57c86a){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x57c86a,_0x9d3587),document['getElementById']('demote-modal')[_0x233c26(0x1ba)]['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x2126d1){console[_0x233c26(0x18b)](_0x233c26(0x13b),_0x2126d1);}});});async function setCustomElo(_0x581f77,_0x39e062,_0x8af938){const _0x3700e7=a0_0x21b64b;try{const _0x1fd72c=auth['currentUser'];if(!_0x1fd72c||!isAdmin(_0x1fd72c['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x75c070=_0x8af938==='D2'?'playersD2':_0x3700e7(0x20d),_0x23592c=_0x8af938==='D2'?'eloHistoryD2':'eloHistory',_0x235d4d=collection(db,_0x75c070),_0x2200d4=query(_0x235d4d,where('username','==',_0x581f77)),_0x2447e2=await getDocs(_0x2200d4);if(_0x2447e2[_0x3700e7(0x129)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x8af938+'\x20ladder');const _0x5e5442=_0x2447e2['docs'][0x0],_0x6d171b=_0x5e5442['data'](),_0x173884=_0x6d171b[_0x3700e7(0x188)]||0x4b0,_0x4f44ab=writeBatch(db);_0x4f44ab[_0x3700e7(0x147)](doc(db,_0x75c070,_0x5e5442['id']),{'eloRating':_0x39e062,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x1fd72c['email']});const _0x3c5bf5=doc(collection(db,_0x23592c));return _0x4f44ab[_0x3700e7(0x1fa)](_0x3c5bf5,{'player':_0x581f77,'previousElo':_0x173884,'newElo':_0x39e062,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x1fd72c[_0x3700e7(0x1bf)],'gameMode':_0x8af938}),await _0x4f44ab['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x581f77+'\x20was\x20updated\x20from\x20'+_0x173884+'\x20to\x20'+_0x39e062,'success'),currentLadder===_0x8af938&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x47d443){console[_0x3700e7(0x18b)]('Error\x20setting\x20custom\x20ELO:',_0x47d443);throw _0x47d443;}}async function setUserRole(_0x13fe47,_0x4a01b,_0x2ddfc4){const _0x4ac88b=a0_0x21b64b;try{const _0x21436a=auth[_0x4ac88b(0x1f2)];if(!_0x21436a||!isAdmin(_0x21436a[_0x4ac88b(0x1bf)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x5cec55=_0x4a01b?_0x4a01b['trim']():null,_0x48b3e6=_0x5cec55?_0x2ddfc4||_0x4ac88b(0x354):null,[_0x289868,_0x4dca43]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x4ac88b(0x373),'==',_0x13fe47))),getDocs(query(collection(db,_0x4ac88b(0x141)),where('username','==',_0x13fe47)))]),_0x36c7e9=[];if(!_0x289868['empty'])_0x36c7e9['push']({'ref':_0x289868['docs'][0x0][_0x4ac88b(0x329)],'source':'D1'});if(!_0x4dca43['empty'])_0x36c7e9['push']({'ref':_0x4dca43['docs'][0x0][_0x4ac88b(0x329)],'source':'D2'});if(_0x36c7e9['length']===0x0){const [_0x436857,_0x1ea0e7]=await Promise[_0x4ac88b(0x2ee)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x13fe47))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x13fe47)))]);if(!_0x436857['empty'])_0x36c7e9['push']({'ref':_0x436857['docs'][0x0]['ref'],'source':'NonParticipant'});if(!_0x1ea0e7['empty'])_0x36c7e9[_0x4ac88b(0x29a)]({'ref':_0x1ea0e7[_0x4ac88b(0x282)][0x0][_0x4ac88b(0x329)],'source':'UserProfile'});}if(_0x36c7e9['length']===0x0)throw new Error('User\x20\x22'+_0x13fe47+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x52e8bb=writeBatch(db);_0x36c7e9[_0x4ac88b(0x123)](_0x2b0a2b=>{const _0x26370d=_0x4ac88b;console['log'](_0x26370d(0x291)+_0x13fe47+_0x26370d(0x17d)+_0x2b0a2b['source']),!_0x5cec55?_0x52e8bb['update'](_0x2b0a2b['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x52e8bb['update'](_0x2b0a2b['ref'],{'roleName':_0x5cec55,'roleColor':_0x48b3e6,'roleAssignedBy':_0x21436a['email'],'roleAssignedAt':serverTimestamp()});}),await _0x52e8bb['commit']();const _0x11e1dc=_0x5cec55?_0x4ac88b(0x165)+_0x5cec55+'\x22\x20set':_0x4ac88b(0x118);return showNotification(_0x11e1dc+'\x20for\x20user\x20\x22'+_0x13fe47+'\x22','success'),!![];}catch(_0x438d4b){console[_0x4ac88b(0x18b)]('Error\x20setting\x20user\x20role:',_0x438d4b),showNotification('Error:\x20'+_0x438d4b['message'],'error');throw _0x438d4b;}}function showNotification(_0x48aadb,_0x5e5fde='info'){const _0xd50638=a0_0x21b64b,_0x3c97e4=document[_0xd50638(0x344)]('div');_0x3c97e4['className']=_0xd50638(0x258)+_0x5e5fde,_0x3c97e4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x5e5fde)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x48aadb+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document[_0xd50638(0x21c)]['appendChild'](_0x3c97e4),setTimeout(()=>{_0x3c97e4['classList']['add']('active');},0xa);const _0x4e0732=setTimeout(()=>{closeNotification(_0x3c97e4);},0x1388);_0x3c97e4['querySelector'](_0xd50638(0x160))['addEventListener'](_0xd50638(0x18d),()=>{clearTimeout(_0x4e0732),closeNotification(_0x3c97e4);});}function getNotificationIcon(_0x2149b9){const _0x50bd66=a0_0x21b64b;switch(_0x2149b9){case'success':return'fa-check-circle';case _0x50bd66(0x18b):return'fa-exclamation-circle';case'warning':return _0x50bd66(0x133);case'info':default:return'fa-info-circle';}}function closeNotification(_0x56ef17){const _0x59dc0e=a0_0x21b64b;_0x56ef17[_0x59dc0e(0x1ba)]['remove']('active'),setTimeout(()=>{_0x56ef17['remove']();},0x12c);}function setupUserRolesSection(){const _0x2e26aa=a0_0x21b64b,_0x3ac764=document[_0x2e26aa(0x19c)]('load-users-data');_0x3ac764&&_0x3ac764['addEventListener']('click',function(){const _0x5ccce8=_0x2e26aa;this['classList']['add']('loading'),this['innerHTML']=_0x5ccce8(0x34b),loadUsersWithRoles()[_0x5ccce8(0x25c)](()=>{const _0x1b82ab=_0x5ccce8;this['classList']['remove']('loading'),this['innerHTML']=_0x1b82ab(0x173);})['catch'](_0x1a9904=>{const _0x1a0a74=_0x5ccce8;console['error']('Error\x20loading\x20users:',_0x1a9904),this['classList']['remove'](_0x1a0a74(0x29d)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x5e6579=document['getElementById']('add-new-role-btn');_0x5e6579&&_0x5e6579['addEventListener']('click',()=>{const _0x20253c=_0x2e26aa,_0x49be6d=document[_0x20253c(0x19c)]('set-role-modal');_0x49be6d&&_0x49be6d['classList'][_0x20253c(0x231)]('active');});const _0x2e6b9f=document[_0x2e26aa(0x19c)](_0x2e26aa(0x286));_0x2e6b9f&&_0x2e6b9f['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x59c788=document[_0x2e26aa(0x19c)]('role-filter');_0x59c788&&_0x59c788[_0x2e26aa(0x275)]('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x4290f5=a0_0x21b64b,_0x4eb833=document['getElementById'](_0x4290f5(0x140));if(!_0x4eb833)return;_0x4eb833[_0x4290f5(0x11b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x13fd56,_0x4878fd,_0x47073d,_0x40642b]=await Promise['all']([getDocs(collection(db,_0x4290f5(0x20d))),getDocs(collection(db,_0x4290f5(0x141))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x9e99c2=new Map();function _0x549f1c(_0x409956,_0x21b452){const _0x2985b4=_0x4290f5;_0x409956[_0x2985b4(0x123)](_0x23e854=>{const _0x1ab74b=_0x2985b4,_0x5f0509=_0x23e854[_0x1ab74b(0x326)]();if(!_0x5f0509[_0x1ab74b(0x373)])return;if(!_0x9e99c2['has'](_0x5f0509[_0x1ab74b(0x373)]))_0x9e99c2['set'](_0x5f0509[_0x1ab74b(0x373)],{'username':_0x5f0509['username'],'roleName':_0x5f0509['roleName']||null,'roleColor':_0x5f0509['roleColor']||null,'roleAssignedBy':_0x5f0509['roleAssignedBy']||null,'roleAssignedAt':_0x5f0509[_0x1ab74b(0x250)]||null,'sources':[_0x21b452]});else{const _0x3850a1=_0x9e99c2[_0x1ab74b(0x18c)](_0x5f0509[_0x1ab74b(0x373)]);_0x5f0509['roleName']&&(!_0x3850a1[_0x1ab74b(0x14b)]||_0x21b452==='D1'||_0x21b452==='D2')&&(_0x3850a1['roleName']=_0x5f0509['roleName'],_0x3850a1['roleColor']=_0x5f0509['roleColor'],_0x3850a1['roleAssignedBy']=_0x5f0509['roleAssignedBy'],_0x3850a1['roleAssignedAt']=_0x5f0509['roleAssignedAt']),!_0x3850a1['sources'][_0x1ab74b(0x2cd)](_0x21b452)&&_0x3850a1['sources'][_0x1ab74b(0x29a)](_0x21b452);}});}_0x549f1c(_0x13fd56,'D1'),_0x549f1c(_0x4878fd,'D2'),_0x549f1c(_0x47073d,_0x4290f5(0x1a1)),_0x549f1c(_0x40642b,'Profile');const _0x54c80f=Array['from'](_0x9e99c2['values']())['sort']((_0x581304,_0x22565b)=>_0x581304['username']['localeCompare'](_0x22565b['username']));if(_0x54c80f[_0x4290f5(0x24b)]===0x0){_0x4eb833['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x4eb833['innerHTML']='',_0x54c80f['forEach'](_0x40120c=>{const _0x382d06=_0x4290f5,_0x30c02a=document['createElement']('tr');_0x30c02a['dataset'][_0x382d06(0x373)]=_0x40120c['username'],_0x30c02a['dataset']['roleName']=_0x40120c[_0x382d06(0x14b)]||'',_0x30c02a['dataset'][_0x382d06(0x13d)]=_0x40120c[_0x382d06(0x13d)]||'#808080';const _0x12fd89=_0x40120c['roleAssignedAt']?new Date(_0x40120c[_0x382d06(0x250)][_0x382d06(0x26f)]*0x3e8)[_0x382d06(0x12d)]():'N/A',_0x9da9eb=_0x40120c['roleName']?_0x382d06(0x34c)+_0x40120c['roleColor']+';\x20color:\x20'+getContrastColor(_0x40120c['roleColor'])+';\x22>'+_0x40120c['roleName']+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x30c02a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x40120c['username']+_0x382d06(0x1ce)+_0x40120c['sources'][_0x382d06(0x153)](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x9da9eb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x40120c[_0x382d06(0x356)]||'N/A')+_0x382d06(0x2d7)+_0x12fd89+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x40120c[_0x382d06(0x373)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x40120c['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x40120c['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x382d06(0x368),_0x4eb833[_0x382d06(0x1bc)](_0x30c02a);}),document[_0x4290f5(0x236)](_0x4290f5(0x16e))['forEach'](_0x17d92a=>{_0x17d92a['addEventListener']('click',()=>{const _0x5b5c7f=_0x17d92a['dataset']['username'];openRoleEditModal(_0x5b5c7f);});}),document[_0x4290f5(0x236)](_0x4290f5(0x1b4))[_0x4290f5(0x123)](_0x2d12e8=>{const _0x232274=_0x4290f5;_0x2d12e8['addEventListener'](_0x232274(0x18d),()=>{const _0x14feb6=_0x232274,_0x5dd227=_0x2d12e8['dataset']['username'];confirm(_0x14feb6(0x203)+_0x5dd227+'?')&&setUserRole(_0x5dd227,null,null)['then'](()=>loadUsersWithRoles())[_0x14feb6(0x2a9)](_0x108547=>console[_0x14feb6(0x18b)](_0x14feb6(0x260),_0x108547));});});}catch(_0x160ce1){console['error']('Error\x20loading\x20users:',_0x160ce1),_0x4eb833['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x4e674d){const _0x1d95db=a0_0x21b64b;console[_0x1d95db(0x30b)]('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x4e674d);const _0x2efe72=document['getElementById']('set-role-modal'),_0x3b34e5=document[_0x1d95db(0x19c)]('role-username'),_0x59c0db=document['getElementById']('user-role');if(!_0x2efe72){console[_0x1d95db(0x18b)]('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert(_0x1d95db(0x2f0));return;}console['log']('Modal\x20element\x20found:',_0x2efe72);_0x3b34e5?(_0x3b34e5['value']=_0x4e674d,console['log']('Username\x20input\x20set\x20to:\x20'+_0x4e674d)):console[_0x1d95db(0x225)]('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x37d058=document['querySelector'](_0x1d95db(0x177)+_0x4e674d+'\x22]');if(_0x37d058&&_0x59c0db){const _0x15b723=_0x37d058['dataset']['role'];_0x59c0db[_0x1d95db(0x2bf)]=_0x15b723===_0x1d95db(0x32a)?'':_0x15b723,console[_0x1d95db(0x30b)]('Role\x20select\x20set\x20to:\x20'+_0x59c0db['value']+'\x20(based\x20on\x20data-role:\x20'+_0x15b723+')');}else{if(!_0x37d058)console[_0x1d95db(0x225)](_0x1d95db(0x324)+_0x4e674d+'\x20not\x20found.');if(!_0x59c0db)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x59c0db)_0x59c0db['value']='';}console['log'](_0x1d95db(0x241)),_0x2efe72['classList']['add']('active');const _0x3e59ce=document['getElementById'](_0x1d95db(0x171));_0x3e59ce?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x3e59ce['removeEventListener']('click',closeModalHandler),_0x3e59ce['addEventListener']('click',closeModalHandler)):console[_0x1d95db(0x225)](_0x1d95db(0x132)),console['log']('Attaching\x20background\x20click\x20listener.'),_0x2efe72[_0x1d95db(0x16b)]('click',closeModalBackgroundHandler),_0x2efe72['addEventListener'](_0x1d95db(0x18d),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x180bc1){const _0x239ae9=a0_0x21b64b;_0x180bc1[_0x239ae9(0x371)]===this&&closeModalHandler();}function closeModalHandler(){const _0xd164c4=a0_0x21b64b,_0x4f197c=document[_0xd164c4(0x19c)]('set-role-modal');_0x4f197c&&(_0x4f197c['classList']['remove'](_0xd164c4(0x29b)),_0x4f197c['removeEventListener'](_0xd164c4(0x18d),closeModalBackgroundHandler));}function filterUsersTable(){const _0x4164de=a0_0x21b64b,_0x9f657d=document['getElementById'](_0x4164de(0x286))?.['value'][_0x4164de(0x221)]()||'',_0x540e9d=document[_0x4164de(0x19c)]('role-filter')?.[_0x4164de(0x2bf)]||_0x4164de(0x2ee),_0x2ea0b6=document['querySelectorAll'](_0x4164de(0x2cf));let _0x39652f=0x0;_0x2ea0b6['forEach'](_0x3c4898=>{const _0x3941e4=_0x4164de;if(_0x3c4898[_0x3941e4(0x295)](_0x3941e4(0x1c6))||_0x3c4898['querySelector']('.empty-state')||_0x3c4898['querySelector']('.error-state'))return;const _0x486381=_0x3c4898['dataset'][_0x3941e4(0x373)]?.['toLowerCase']()||'',_0x4e7508=_0x3c4898['dataset']['role']||'none',_0x2c6a96=_0x486381['includes'](_0x9f657d),_0x4a04ac=_0x540e9d===_0x3941e4(0x2ee)||_0x4e7508===_0x540e9d;_0x2c6a96&&_0x4a04ac?(_0x3c4898[_0x3941e4(0x1db)]['display']='',_0x39652f++):_0x3c4898[_0x3941e4(0x1db)][_0x3941e4(0x2e3)]='none';});if(_0x39652f===0x0&&_0x2ea0b6['length']>0x0){const _0x25baa8=document['getElementById']('users-table-body');if(_0x25baa8){if(!_0x25baa8['querySelector'](_0x4164de(0x232))){const _0x5b7aaa=document['createElement']('tr');_0x5b7aaa[_0x4164de(0x1ba)][_0x4164de(0x231)]('no-results'),_0x5b7aaa['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x25baa8['appendChild'](_0x5b7aaa);}}}else{const _0xa57ab9=document['querySelector']('.no-results');_0xa57ab9&&_0xa57ab9[_0x4164de(0x24a)]();}}function setupManageArticlesSection(){const _0x13038c=a0_0x21b64b,_0x5a4406=document[_0x13038c(0x19c)]('load-articles-data');_0x5a4406&&_0x5a4406['addEventListener']('click',function(){const _0x3cde57=_0x13038c;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x757943=a0_0x52bb;this['classList']['remove'](_0x757943(0x29d)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})[_0x3cde57(0x2a9)](_0x4f078e=>{const _0x2cf5a2=_0x3cde57;console['error'](_0x2cf5a2(0x32c),_0x4f078e),this[_0x2cf5a2(0x1ba)]['remove']('loading'),this[_0x2cf5a2(0x11b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x548dce=document[_0x13038c(0x19c)]('create-new-article-btn');_0x548dce?(console['log'](_0x13038c(0x19f)),_0x548dce[_0x13038c(0x1db)]['display']='block',_0x548dce['addEventListener']('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x493c7a=document['getElementById']('article-form');_0x493c7a&&_0x493c7a[_0x13038c(0x275)]('submit',_0x2dfdcc=>{_0x2dfdcc['preventDefault'](),saveArticle();});const _0x27520e=document['getElementById']('cancel-article-btn');_0x27520e&&_0x27520e['addEventListener'](_0x13038c(0x18d),()=>{closeArticleModal();});const _0x27bb2b=document['querySelector']('#article-modal\x20.close-btn');_0x27bb2b&&_0x27bb2b[_0x13038c(0x275)](_0x13038c(0x18d),()=>{closeArticleModal();});const _0x183e37=document['getElementById'](_0x13038c(0x2fd));_0x183e37&&_0x183e37['addEventListener']('click',_0x1fce58=>{_0x1fce58['target']===_0x183e37&&closeArticleModal();});}async function loadArticles(){const _0x185c50=a0_0x21b64b,_0x3ff870=document[_0x185c50(0x19c)](_0x185c50(0x1ca));if(!_0x3ff870)return;_0x3ff870['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x5ea19d=collection(db,_0x185c50(0x1b8)),_0x3961e4=query(_0x5ea19d,orderBy(_0x185c50(0x1be),'desc')),_0x28e77e=await getDocs(_0x3961e4);if(_0x28e77e['empty']){_0x3ff870['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x3ff870['innerHTML']='',_0x28e77e['forEach'](_0x5c0a8a=>{const _0x147c73=_0x185c50,_0x2e7ed5=_0x5c0a8a['data'](),_0x428631=document['createElement']('tr'),_0x3f45a8=_0x2e7ed5[_0x147c73(0x1be)]?new Date(_0x2e7ed5['createdAt']['seconds']*0x3e8)[_0x147c73(0x18f)]():'N/A';_0x428631['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2e7ed5['title']||'Untitled')+_0x147c73(0x2d7)+(_0x2e7ed5['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3f45a8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x5c0a8a['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x5c0a8a['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3ff870['appendChild'](_0x428631);}),setupArticleActionButtons();}catch(_0x45111e){console[_0x185c50(0x18b)]('Error\x20loading\x20articles:',_0x45111e),_0x3ff870['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x45111e[_0x185c50(0x11a)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0xedac96=a0_0x21b64b;document['querySelectorAll']('.edit-article-btn')['forEach'](_0x5d1fe6=>{_0x5d1fe6['addEventListener']('click',async _0x532036=>{const _0x5175b4=a0_0x52bb,_0x37743e=_0x532036['currentTarget'][_0x5175b4(0x1c4)]['id'];openArticleModal(_0x37743e);});}),document['querySelectorAll'](_0xedac96(0x135))['forEach'](_0x8c8378=>{_0x8c8378['addEventListener']('click',async _0x4bc4c9=>{const _0x595b25=a0_0x52bb,_0x5dfffb=_0x4bc4c9['currentTarget'][_0x595b25(0x1c4)]['id'];confirmDeleteArticle(_0x5dfffb);});});}function openArticleModal(_0x4005ee=null){const _0x50455a=a0_0x21b64b,_0x55b913=document[_0x50455a(0x19c)](_0x50455a(0x2fd)),_0x3666d9=document[_0x50455a(0x19c)](_0x50455a(0x1c5)),_0x34c8f3=document['getElementById']('article-form'),_0x49d8d4=document['getElementById']('article-id');_0x34c8f3['reset'](),_0x49d8d4['value']='';if(_0x4005ee)_0x3666d9['textContent']='Edit\x20Article',_0x49d8d4['value']=_0x4005ee,loadArticleData(_0x4005ee);else{_0x3666d9['textContent']=_0x50455a(0x1e0);const _0x43ba9d=auth['currentUser'];if(_0x43ba9d){const _0x3c07fd=document['getElementById'](_0x50455a(0x364));if(_0x3c07fd&&_0x43ba9d['displayName'])_0x3c07fd['value']=_0x43ba9d[_0x50455a(0x23e)];else _0x3c07fd&&(_0x3c07fd[_0x50455a(0x2bf)]=_0x43ba9d['email']);}}_0x55b913['classList']['add'](_0x50455a(0x29b));}async function loadArticleData(_0x10b36f){const _0x21d0b1=a0_0x21b64b;try{const _0x2d4969=doc(db,'articles',_0x10b36f),_0x4b8888=await getDoc(_0x2d4969);if(!_0x4b8888['exists']()){showNotification(_0x21d0b1(0x24f),'error');return;}const _0x49c68b=_0x4b8888[_0x21d0b1(0x326)]();document['getElementById']('article-title')['value']=_0x49c68b[_0x21d0b1(0x152)]||'',document[_0x21d0b1(0x19c)]('article-author')['value']=_0x49c68b['author']||'',document['getElementById']('article-image-url')['value']=_0x49c68b['imageUrl']||'',document['getElementById']('article-content')[_0x21d0b1(0x2bf)]=_0x49c68b['content']||'';}catch(_0x1e9de9){console[_0x21d0b1(0x18b)]('Error\x20loading\x20article\x20data:',_0x1e9de9),showNotification('Failed\x20to\x20load\x20article\x20data',_0x21d0b1(0x18b));}}async function saveArticle(){const _0x20c368=a0_0x21b64b;try{const _0x817c47=document['getElementById']('article-id')['value'],_0x4b39e8=document['getElementById']('article-title')['value']['trim'](),_0x3f2f8a=document[_0x20c368(0x19c)]('article-author')['value']['trim'](),_0x2f99ad=document['getElementById']('article-image-url')[_0x20c368(0x2bf)]['trim'](),_0x577238=document['getElementById'](_0x20c368(0x197))['value']['trim']();if(!_0x4b39e8||!_0x577238){showNotification('Title\x20and\x20content\x20are\x20required',_0x20c368(0x18b));return;}const _0x121c09=auth['currentUser'];if(!_0x121c09){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles',_0x20c368(0x18b));return;}const _0x4d26af={'title':_0x4b39e8,'author':_0x3f2f8a,'imageUrl':_0x2f99ad||null,'content':_0x577238,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x121c09[_0x20c368(0x1bf)]};!_0x817c47?(_0x4d26af['createdAt']=serverTimestamp(),_0x4d26af['createdBy']=_0x121c09[_0x20c368(0x1bf)],await addDoc(collection(db,'articles'),_0x4d26af),showNotification('Article\x20created\x20successfully',_0x20c368(0x2b5))):(await updateDoc(doc(db,'articles',_0x817c47),_0x4d26af),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x1d24d9){console['error']('Error\x20saving\x20article:',_0x1d24d9),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x1d24d9['message'],'error');}}function closeArticleModal(){const _0x1593ec=a0_0x21b64b,_0x2b45ce=document['getElementById'](_0x1593ec(0x2fd));_0x2b45ce&&_0x2b45ce['classList']['remove']('active');}async function confirmDeleteArticle(_0x3072c7){const _0x1ef0e5=a0_0x21b64b;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x3072c7)),loadArticles(),showNotification(_0x1ef0e5(0x2ec),'success');}catch(_0x12371f){console[_0x1ef0e5(0x18b)](_0x1ef0e5(0x1d7),_0x12371f),showNotification(_0x1ef0e5(0x248)+_0x12371f['message'],'error');}}function setupTrophyManagementSection(){const _0x41bc17=a0_0x21b64b,_0x3f2258=document['getElementById']('load-trophies-data');_0x3f2258&&_0x3f2258['addEventListener'](_0x41bc17(0x18d),function(){const _0x5c8adc=_0x41bc17;this['classList'][_0x5c8adc(0x231)](_0x5c8adc(0x29d)),this[_0x5c8adc(0x11b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x216b3d=document['getElementById'](_0x5c8adc(0x24e));_0x216b3d&&(_0x216b3d['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x1b1c92=_0x5c8adc;this[_0x1b1c92(0x1ba)]['remove'](_0x1b1c92(0x29d)),this[_0x1b1c92(0x11b)]=_0x1b1c92(0x20a);})[_0x5c8adc(0x2a9)](_0x543d6d=>{const _0xed9569=_0x5c8adc;console['error']('Error\x20loading\x20trophies:',_0x543d6d),this['classList'][_0xed9569(0x24a)](_0xed9569(0x29d)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0xc5be7a=document[_0x41bc17(0x19c)](_0x41bc17(0x14d));_0xc5be7a&&_0xc5be7a['addEventListener'](_0x41bc17(0x18d),()=>{openTrophyModal();});const _0x2b9901=document['getElementById']('trophy-form');_0x2b9901&&_0x2b9901['addEventListener'](_0x41bc17(0x175),_0x5baab7=>{const _0x60b3c9=_0x41bc17;_0x5baab7[_0x60b3c9(0x24d)](),saveTrophyDefinition();});const _0x2ec60b=document[_0x41bc17(0x19c)]('cancel-trophy-btn');_0x2ec60b&&_0x2ec60b['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll'](_0x41bc17(0x2a8))['forEach'](_0x4947d4=>{_0x4947d4['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x3d5ee8=document['getElementById']('trophy-modal');_0x3d5ee8&&_0x3d5ee8['addEventListener']('click',_0x2e2e6a=>{_0x2e2e6a['target']===_0x3d5ee8&&closeTrophyModal();});const _0x3e5379=document['getElementById'](_0x41bc17(0x322));_0x3e5379&&_0x3e5379['addEventListener']('click',_0x4c6fb8=>{_0x4c6fb8['target']===_0x3e5379&&closeAssignTrophyModal();});const _0x2934bc=document['getElementById'](_0x41bc17(0x375));_0x2934bc&&_0x2934bc[_0x41bc17(0x275)]('submit',_0x1d4f31=>{_0x1d4f31['preventDefault'](),assignTrophyToPlayer();});const _0x247cd2=document['getElementById']('cancel-assign-btn');_0x247cd2&&_0x247cd2['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x46e356=document[_0x41bc17(0x19c)]('trophy-image-url');_0x46e356&&(_0x46e356['addEventListener'](_0x41bc17(0x2f3),updateTrophyImagePreview),_0x46e356['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x1a41e7=a0_0x21b64b,_0x18ac38=document['getElementById']('trophy-image-url')['value']['trim'](),_0x1477d7=document['getElementById']('trophy-image-preview');if(!_0x1477d7){const _0x346012=document['getElementById']('trophy-image-url')['closest'](_0x1a41e7(0x185)),_0x1394af=document['createElement']('div');_0x1394af['id']=_0x1a41e7(0x191),_0x1394af['className']='trophy-preview-container',_0x346012['appendChild'](_0x1394af);const _0x34fee9=document[_0x1a41e7(0x344)]('img');_0x34fee9['id']='trophy-preview-img',_0x34fee9['alt']='Trophy\x20Preview',_0x34fee9['onerror']=function(){const _0x2afbf6=_0x1a41e7;this['src']=DEFAULT_TROPHY_IMAGE,this['classList'][_0x2afbf6(0x231)]('error');},_0x1394af['appendChild'](_0x34fee9);}const _0x523e84=document['getElementById']('trophy-preview-img');_0x18ac38?(_0x523e84['src']=_0x18ac38,_0x523e84['style'][_0x1a41e7(0x2e3)]=_0x1a41e7(0x2bb),_0x523e84['classList']['remove']('error')):(_0x523e84['src']=DEFAULT_TROPHY_IMAGE,_0x523e84['style']['display']='block');}async function loadTrophyDefinitions(){const _0x2c42a8=a0_0x21b64b,_0x4f1d94=document['getElementById']('trophies-table-body');if(!_0x4f1d94)return;_0x4f1d94[_0x2c42a8(0x11b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x5b7161=collection(db,'trophyDefinitions'),_0x5bc38c=query(_0x5b7161,orderBy('createdAt','desc')),_0xb8ddd6=await getDocs(_0x5bc38c);if(_0xb8ddd6['empty']){_0x4f1d94[_0x2c42a8(0x11b)]=_0x2c42a8(0x17b);return;}_0x4f1d94['innerHTML']='',_0xb8ddd6[_0x2c42a8(0x123)](_0x535f14=>{const _0x156efd=_0x2c42a8,_0x52d0ec=_0x535f14['data'](),_0x3995f9=document['createElement']('tr'),_0x1dbc85=_0x52d0ec['createdAt']?new Date(_0x52d0ec['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x3995f9[_0x156efd(0x11b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x52d0ec['image']||DEFAULT_TROPHY_IMAGE)+_0x156efd(0x2c9)+_0x52d0ec[_0x156efd(0x183)]+_0x156efd(0x187)+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x52d0ec[_0x156efd(0x183)]||_0x156efd(0x148))+_0x156efd(0x2a7)+(_0x52d0ec[_0x156efd(0x126)]||'common')+'\x22>'+(_0x52d0ec['rarity']||'common')+_0x156efd(0x230)+_0x1dbc85+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x535f14['id']+_0x156efd(0x2fb)+_0x535f14['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x535f14['id']+_0x156efd(0x2c8),_0x4f1d94['appendChild'](_0x3995f9);}),setupTrophyActionButtons();}catch(_0x4b44c0){console[_0x2c42a8(0x18b)](_0x2c42a8(0x243),_0x4b44c0),_0x4f1d94['innerHTML']=_0x2c42a8(0x22e)+_0x4b44c0['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x995cb=a0_0x21b64b;document['querySelectorAll']('.edit-trophy-btn')[_0x995cb(0x123)](_0x3ff2f6=>{_0x3ff2f6['addEventListener']('click',_0x43b127=>{const _0x5807a0=a0_0x52bb,_0x58372b=_0x43b127[_0x5807a0(0x299)]['dataset']['id'];openTrophyModal(_0x58372b);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x245279=>{_0x245279['addEventListener']('click',_0x416b89=>{const _0x144887=a0_0x52bb,_0x4877fe=_0x416b89['currentTarget'][_0x144887(0x1c4)]['id'];openAssignTrophyModal(_0x4877fe);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0xf8ffda=>{const _0x1f1f86=_0x995cb;_0xf8ffda[_0x1f1f86(0x275)](_0x1f1f86(0x18d),_0x4cd563=>{const _0x5e2ef0=_0x1f1f86,_0x30e5d2=_0x4cd563[_0x5e2ef0(0x299)][_0x5e2ef0(0x1c4)]['id'];confirmDeleteTrophy(_0x30e5d2);});});}function openTrophyModal(_0x1ddbd2=null){const _0x5132ae=a0_0x21b64b,_0x15eea1=document['getElementById']('trophy-modal'),_0x1ef100=document[_0x5132ae(0x19c)]('trophy-modal-title'),_0x1861c6=document['getElementById'](_0x5132ae(0x14f)),_0x483190=document['getElementById'](_0x5132ae(0x302));_0x1861c6['reset'](),_0x483190['value']='';const _0x4f8567=document['getElementById']('trophy-preview-img');_0x4f8567&&(_0x4f8567[_0x5132ae(0x2ea)]=DEFAULT_TROPHY_IMAGE,_0x4f8567[_0x5132ae(0x1ba)][_0x5132ae(0x24a)]('error')),_0x1ddbd2?(_0x1ef100[_0x5132ae(0x259)]='Edit\x20Trophy',_0x483190[_0x5132ae(0x2bf)]=_0x1ddbd2,loadTrophyData(_0x1ddbd2)):_0x1ef100[_0x5132ae(0x259)]='Create\x20New\x20Trophy',_0x15eea1['classList']['add']('active');}async function loadTrophyData(_0x2c0d05){const _0x3a25eb=a0_0x21b64b;try{const _0x46e5d0=doc(db,'trophyDefinitions',_0x2c0d05),_0x21a6a5=await getDoc(_0x46e5d0);if(!_0x21a6a5['exists']()){showNotification('Trophy\x20not\x20found',_0x3a25eb(0x18b));return;}const _0x421f94=_0x21a6a5['data']();document['getElementById'](_0x3a25eb(0x2e9))[_0x3a25eb(0x2bf)]=_0x421f94[_0x3a25eb(0x183)]||'',document['getElementById']('trophy-description')[_0x3a25eb(0x2bf)]=_0x421f94['description']||'',document[_0x3a25eb(0x19c)]('trophy-image-url')['value']=_0x421f94['image']||'',document['getElementById'](_0x3a25eb(0x2ef))[_0x3a25eb(0x2bf)]=_0x421f94[_0x3a25eb(0x126)]||'common',updateTrophyImagePreview();}catch(_0x5e58f9){console['error']('Error\x20loading\x20trophy\x20data:',_0x5e58f9),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x4ad81a=a0_0x21b64b;try{const _0x39f492=document['getElementById']('trophy-id')[_0x4ad81a(0x2bf)],_0x4be2f7=document['getElementById']('trophy-name')[_0x4ad81a(0x2bf)][_0x4ad81a(0x21b)](),_0x5d933a=document[_0x4ad81a(0x19c)]('trophy-description')['value']['trim'](),_0x38fa0b=document['getElementById']('trophy-image-url')['value']['trim'](),_0x2ecb33=document['getElementById']('trophy-rarity')[_0x4ad81a(0x2bf)];if(!_0x4be2f7||!_0x5d933a||!_0x38fa0b){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x14884f=auth['currentUser'];if(!_0x14884f){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x154c08={'name':_0x4be2f7,'description':_0x5d933a,'image':_0x38fa0b,'rarity':_0x2ecb33,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x14884f['email']};!_0x39f492?(_0x154c08['createdAt']=serverTimestamp(),_0x154c08['createdBy']=_0x14884f['email'],await addDoc(collection(db,'trophyDefinitions'),_0x154c08),showNotification('Trophy\x20created\x20successfully',_0x4ad81a(0x2b5))):(await updateDoc(doc(db,'trophyDefinitions',_0x39f492),_0x154c08),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x51f257){console['error']('Error\x20saving\x20trophy:',_0x51f257),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x51f257['message'],_0x4ad81a(0x18b));}}function closeTrophyModal(){const _0x33dd3e=a0_0x21b64b,_0x1c7be7=document[_0x33dd3e(0x19c)](_0x33dd3e(0x12b));_0x1c7be7&&_0x1c7be7['classList']['remove']('active');}async function confirmDeleteTrophy(_0x411cb8){const _0x209a9a=a0_0x21b64b;if(!_0x411cb8){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0xe65eb9=auth['currentUser'];if(!_0xe65eb9){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x411cb8),await deleteDoc(doc(db,_0x209a9a(0x27c),_0x411cb8)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0xf8dd1d){console['error']('Error\x20deleting\x20trophy\x20definition:',_0xf8dd1d),showNotification(_0x209a9a(0x22a)+_0xf8dd1d['message'],'error');}}async function openAssignTrophyModal(_0x473a2e){const _0x5e227c=a0_0x21b64b;try{const _0x2652fc=doc(db,'trophyDefinitions',_0x473a2e),_0x13fc00=await getDoc(_0x2652fc);if(!_0x13fc00[_0x5e227c(0x19d)]()){showNotification(_0x5e227c(0x2de),'error');return;}const _0x433757=_0x13fc00[_0x5e227c(0x326)]();document['getElementById']('assign-trophy-id')['value']=_0x473a2e,document['getElementById']('assign-trophy-name')[_0x5e227c(0x2bf)]=_0x433757['name'],document[_0x5e227c(0x19c)]('assign-trophy-image')['src']=_0x433757['image']||DEFAULT_TROPHY_IMAGE,document['getElementById'](_0x5e227c(0x2df))['textContent']=_0x433757['name']||'Unnamed\x20Trophy',document[_0x5e227c(0x19c)]('assign-trophy-description')['textContent']=_0x433757[_0x5e227c(0x37b)]||'No\x20description';const _0x175823=document['getElementById']('assign-trophy-rarity');_0x175823['textContent']=_0x433757['rarity']||'common',_0x175823['className']='trophy-rarity\x20'+(_0x433757['rarity']||_0x5e227c(0x23b));const _0x48329c=document[_0x5e227c(0x19c)]('assign-trophy-modal');_0x48329c[_0x5e227c(0x1ba)][_0x5e227c(0x231)]('active');}catch(_0x2cf7af){console['error'](_0x5e227c(0x1b0),_0x2cf7af),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x3bce26=a0_0x21b64b,_0x42d7ae=document[_0x3bce26(0x19c)](_0x3bce26(0x322));_0x42d7ae&&_0x42d7ae['classList']['remove'](_0x3bce26(0x29b));}async function assignTrophyToPlayer(){const _0x2ccf08=a0_0x21b64b;try{const _0x54c1b2=document[_0x2ccf08(0x19c)]('assign-trophy-id')['value'],_0x271bba=document[_0x2ccf08(0x19c)]('assign-trophy-name')[_0x2ccf08(0x2bf)],_0x35b990=document['getElementById']('assign-player-username')[_0x2ccf08(0x2bf)]['trim'](),_0x1aba61=document[_0x2ccf08(0x295)](_0x2ccf08(0x2b0))['value'];if(!_0x54c1b2||!_0x35b990){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required',_0x2ccf08(0x18b));return;}const _0x4d374f=auth[_0x2ccf08(0x1f2)];if(!_0x4d374f){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x40adea=null,_0x20071d=null,_0x3de77a=null;if(_0x1aba61==='non-participant'){const _0xfc46e7=collection(db,'nonParticipants'),_0x75046b=query(_0xfc46e7,where('username','==',_0x35b990)),_0x3e571f=await getDocs(_0x75046b);!_0x3e571f['empty']&&(_0x40adea=_0x3e571f['docs'][0x0],_0x20071d=_0x40adea['id'],_0x3de77a=_0x40adea['data']());}else{const _0x5e6bd1=_0x1aba61==='D1'?'players':_0x1aba61==='D2'?'playersD2':'playersD3',_0xa6bf04=collection(db,_0x5e6bd1),_0x3ac02f=query(_0xa6bf04,where('username','==',_0x35b990)),_0x2f281a=await getDocs(_0x3ac02f);!_0x2f281a['empty']&&(_0x40adea=_0x2f281a['docs'][0x0],_0x20071d=_0x40adea['id'],_0x3de77a=_0x40adea['data']());}if(!_0x40adea){showNotification(_0x2ccf08(0x162)+_0x35b990+'\x22\x20not\x20found\x20in\x20'+(_0x1aba61==='non-participant'?_0x2ccf08(0x378):_0x1aba61+'\x20ladder'),'error');return;}const _0x521fa4=collection(db,_0x2ccf08(0x18e)),_0x43b934=query(_0x521fa4,where('userId','==',_0x20071d),where('trophyId','==',_0x54c1b2)),_0x2696a3=await getDocs(_0x43b934);if(!_0x2696a3['empty']){showNotification('Player\x20\x22'+_0x35b990+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x20071d,'playerUsername':_0x35b990,'trophyId':_0x54c1b2,'awardedAt':serverTimestamp(),'awardedBy':_0x4d374f['email'],'ladder':_0x1aba61}),showNotification('Trophy\x20\x22'+_0x271bba+_0x2ccf08(0x313)+_0x35b990,_0x2ccf08(0x2b5)),closeAssignTrophyModal();}catch(_0x1d55aa){console['error'](_0x2ccf08(0x2d0),_0x1d55aa),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x1d55aa['message'],'error');}}function setupInactivePlayersSection(){const _0x23169f=a0_0x21b64b,_0x1365d5=document['getElementById']('inactive-days-filter');_0x1365d5&&_0x1365d5['addEventListener']('change',function(){const _0x32a6cb=a0_0x52bb,_0x1f1459=document[_0x32a6cb(0x19c)]('load-inactive-players-data');if(_0x1f1459)_0x1f1459['click']();});const _0x144e1d=document['querySelector'](_0x23169f(0x31a)),_0x2bfbfa=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x144e1d&&_0x2bfbfa&&(_0x144e1d['addEventListener']('change',function(){const _0x135660=_0x23169f;if(this['checked']){currentLadder='D1';if(document['getElementById']('inactive-players')[_0x135660(0x1db)]['display']!==_0x135660(0x32a)){const _0x3219eb=document[_0x135660(0x19c)]('load-inactive-players-data');if(_0x3219eb)_0x3219eb['click']();}}}),_0x2bfbfa[_0x23169f(0x275)](_0x23169f(0x216),function(){const _0x21bbde=_0x23169f;if(this[_0x21bbde(0x28b)]){currentLadder='D2';if(document[_0x21bbde(0x19c)](_0x21bbde(0x343))['style']['display']!=='none'){const _0x1aa53b=document[_0x21bbde(0x19c)](_0x21bbde(0x2f2));if(_0x1aa53b)_0x1aa53b[_0x21bbde(0x18d)]();}}}));const _0x13265c=document['getElementById']('inactive-players-search');_0x13265c&&_0x13265c['addEventListener']('input',debounce(function(){const _0x3eadf3=_0x23169f,_0x12161a=_0x13265c[_0x3eadf3(0x2bf)][_0x3eadf3(0x221)](),_0x43f7c7=document[_0x3eadf3(0x236)]('#inactive-players-table-body\x20tr');_0x43f7c7['forEach'](_0x2f819b=>{const _0x4296c0=_0x3eadf3;if(_0x2f819b['querySelector']('.loading-cell')||_0x2f819b['querySelector']('.empty-state')||_0x2f819b[_0x4296c0(0x295)]('.error-state'))return;const _0x4018b0=_0x2f819b['cells'][0x0]?.[_0x4296c0(0x259)]['toLowerCase']()||'',_0x960555=_0x2f819b['cells'][0x5]?.[_0x4296c0(0x259)]['toLowerCase']()||'';_0x4018b0['includes'](_0x12161a)||_0x960555[_0x4296c0(0x2cd)](_0x12161a)?_0x2f819b['style'][_0x4296c0(0x2e3)]='':_0x2f819b[_0x4296c0(0x1db)][_0x4296c0(0x2e3)]=_0x4296c0(0x32a);});},0x12c)),document['addEventListener']('click',function(_0x64a363){const _0x422376=_0x23169f;if(_0x64a363['target']['closest'](_0x422376(0x264))){const _0x5a612c=_0x64a363['target']['closest']('.view-player-btn'),_0x480683=_0x5a612c[_0x422376(0x1c4)]['username'];_0x480683&&alert('View\x20player\x20details\x20for\x20'+_0x480683+'\x20-\x20Feature\x20coming\x20soon');}}),console['log'](_0x23169f(0x285));}async function loadInactivePlayersData(){const _0x1fe36c=a0_0x21b64b,_0x344743=document[_0x1fe36c(0x19c)](_0x1fe36c(0x242));if(!_0x344743)return;_0x344743['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x2fb4fb=document['getElementById']('inactive-days-filter'),_0x229ffe=_0x2fb4fb?parseInt(_0x2fb4fb['value'])||0x0:0x0,_0x5a3d43=collection(db,currentLadder==='D1'?'players':_0x1fe36c(0x141)),_0x17af7b=await getDocs(_0x5a3d43);if(_0x17af7b[_0x1fe36c(0x129)]){_0x344743['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x30271d=[];_0x17af7b['forEach'](_0x23441f=>{const _0x16de7b=_0x1fe36c,_0x52640e=_0x23441f[_0x16de7b(0x326)]();_0x30271d['push']({..._0x52640e,'id':_0x23441f['id'],'username':_0x52640e['username']||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x30271d['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x39ca60=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x3494c8=_0x30271d['map'](async _0x34678a=>{const _0x58bb85=_0x1fe36c;try{const _0x43f505=collection(db,_0x39ca60),_0x3f9f9a=query(_0x43f505,or(where('winnerUsername','==',_0x34678a['username']),where('loserUsername','==',_0x34678a[_0x58bb85(0x373)])),orderBy('approvedAt','desc'),limit(0x1)),_0x3b9f8d=await getDocs(_0x3f9f9a);if(!_0x3b9f8d['empty']){const _0x2a33f2=_0x3b9f8d[_0x58bb85(0x282)][0x0]['data'](),_0x424a06=_0x2a33f2[_0x58bb85(0x292)]?new Date(_0x2a33f2['approvedAt'][_0x58bb85(0x26f)]*0x3e8):null,_0x26e64b=new Date(),_0x332223=_0x424a06?Math['floor']((_0x26e64b-_0x424a06)/(0x3e8*0x3c*0x3c*0x18)):null,_0x15d1d2=_0x2a33f2[_0x58bb85(0x151)]===_0x34678a[_0x58bb85(0x373)]?_0x2a33f2[_0x58bb85(0x128)]:_0x2a33f2['winnerUsername'],_0x3021bd=_0x2a33f2['winnerUsername']===_0x34678a[_0x58bb85(0x373)]?_0x58bb85(0x22b):'Lost';return{..._0x34678a,'lastMatch':{'date':_0x424a06?_0x424a06[_0x58bb85(0x12d)]():_0x58bb85(0x307),'opponent':_0x15d1d2||_0x58bb85(0x30d),'result':_0x3021bd,'timestamp':_0x424a06||new Date(0x0),'daysSinceMatch':_0x332223||Number['MAX_SAFE_INTEGER']}};}else return{..._0x34678a,'lastMatch':{'date':'Never\x20played','opponent':_0x58bb85(0x307),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x1b78e0){return console['error'](_0x58bb85(0x1e3)+_0x34678a[_0x58bb85(0x373)]+':',_0x1b78e0),{..._0x34678a,'lastMatch':{'date':_0x58bb85(0x33e),'opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x27f2b5=await Promise['all'](_0x3494c8);_0x27f2b5[_0x1fe36c(0x2af)]((_0x25804f,_0x153f1f)=>_0x153f1f['lastMatch'][_0x1fe36c(0x1eb)]-_0x25804f['lastMatch']['daysSinceMatch']);_0x229ffe>0x0&&(_0x27f2b5=_0x27f2b5['filter'](_0x172c53=>_0x172c53['lastMatch']['daysSinceMatch']>=_0x229ffe));_0x344743['innerHTML']='';if(_0x27f2b5[_0x1fe36c(0x24b)]===0x0){_0x344743['innerHTML']=_0x1fe36c(0x2c2);return;}_0x27f2b5['forEach'](_0x4e395e=>{const _0x451588=_0x1fe36c,_0x3edc3e=document['createElement']('tr'),_0xbd6767=_0x4e395e['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x4e395e['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x3edc3e['className']=_0xbd6767,_0x3edc3e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4e395e[_0x451588(0x373)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4e395e['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4e395e['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4e395e['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?_0x451588(0x307):_0x4e395e['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+_0x451588(0x2d7)+(_0x4e395e[_0x451588(0x2a0)]['date']==='Never\x20played'?'No\x20matches\x20found':_0x4e395e[_0x451588(0x2a0)][_0x451588(0x297)]+_0x451588(0x254)+_0x4e395e['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x4e395e[_0x451588(0x373)]+_0x451588(0x2a3),_0x344743['appendChild'](_0x3edc3e);}),console['log']('Displaying\x20'+_0x27f2b5[_0x1fe36c(0x24b)]+'\x20inactive\x20players');}catch(_0x5dad79){console[_0x1fe36c(0x18b)]('Error\x20loading\x20inactive\x20players:',_0x5dad79),_0x344743['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x5dad79['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x16008a=a0_0x21b64b;console[_0x16008a(0x30b)]('Setting\x20up\x20highlight\x20buttons');const _0x758ff5=document['getElementById']('create-match-highlight-btn');_0x758ff5&&_0x758ff5['addEventListener']('click',function(){const _0x279b88=_0x16008a;console['log'](_0x279b88(0x1e8)),openHighlightModal(_0x279b88(0x1f8));});const _0x19396e=document['getElementById']('create-creator-highlight-btn');_0x19396e&&_0x19396e[_0x16008a(0x275)]('click',function(){const _0x1c41bf=_0x16008a;console[_0x1c41bf(0x30b)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x423656=document['getElementById']('create-achievement-highlight-btn');_0x423656&&_0x423656['addEventListener']('click',function(){const _0x46e8fe=_0x16008a;console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x46e8fe(0x251));});}function openHighlightModal(_0x534aa2='match'){const _0xda42a=a0_0x21b64b;console['log'](_0xda42a(0x166)+_0x534aa2);const _0x472abd=document['getElementById'](_0xda42a(0x25e)),_0x51ed91=document[_0xda42a(0x19c)](_0xda42a(0x19e)),_0x4f235a=document['getElementById']('highlight-modal-title'),_0x5263d6=document['getElementById'](_0xda42a(0x332));if(!_0x472abd||!_0x51ed91||!_0x4f235a){console[_0xda42a(0x18b)]('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x51ed91[_0xda42a(0x206)](),_0x5263d6['value']='';const _0x205bed=[_0xda42a(0x1f8),_0xda42a(0x19b),_0xda42a(0x251)],_0x33b3c6=!_0x205bed['includes'](_0x534aa2);if(_0x33b3c6){const _0x36813e=_0x534aa2;_0x5263d6[_0xda42a(0x2bf)]=_0x36813e,_0x4f235a[_0xda42a(0x259)]=_0xda42a(0x1a2),loadHighlightDataAdmin(_0x36813e);}else{const _0x2ad9ee=_0x534aa2;document['getElementById']('highlight-type')[_0xda42a(0x2bf)]=_0x2ad9ee,_0x4f235a[_0xda42a(0x259)]=_0xda42a(0x1ab)+getHighlightTypeName(_0x2ad9ee),toggleHighlightFields(_0x2ad9ee);const _0x32abc7=auth['currentUser'];_0x32abc7&&document['getElementById']('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')['value']=_0x32abc7['displayName']||_0x32abc7[_0xda42a(0x1bf)]);}_0x472abd[_0xda42a(0x1ba)][_0xda42a(0x231)]('active');}function toggleHighlightFields(_0x51fc91){const _0x232c14=a0_0x21b64b;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x51fc91);const _0x3bb048=document['getElementById']('highlight-form');if(!_0x3bb048)return;const _0x40116c=_0x3bb048['querySelectorAll']('.form-group,\x20.form-row');_0x40116c[_0x232c14(0x123)](_0x6db643=>_0x6db643['style']['display']='none');const _0x113831=document[_0x232c14(0x19c)]('highlight-video-preview-container');if(_0x113831)_0x113831['style']['display']='none';const _0x5953fc=['highlight-title-container',_0x232c14(0x28a),'highlight-submitted-by-container'];_0x5953fc[_0x232c14(0x123)](_0xa63889=>{const _0x38f180=_0x232c14,_0x1dd26d=document[_0x38f180(0x19c)](_0xa63889);if(_0x1dd26d)_0x1dd26d['style'][_0x38f180(0x2e3)]='block';});if(_0x51fc91==='match'){const _0x20d3d7=['highlight-video-container',_0x232c14(0x1dd),_0x232c14(0x246),_0x232c14(0x273),_0x232c14(0x32b),_0x232c14(0x229)];_0x20d3d7[_0x232c14(0x123)](_0x3e9a26=>{const _0x20cbb6=_0x232c14,_0x30036d=document['getElementById'](_0x3e9a26);_0x30036d&&(_0x3e9a26===_0x20cbb6(0x32b)?_0x30036d['style'][_0x20cbb6(0x2e3)]='flex':_0x30036d['style'][_0x20cbb6(0x2e3)]=_0x20cbb6(0x2bb));});const _0x2bf448=document['getElementById'](_0x232c14(0x317));if(_0x2bf448){_0x2bf448[_0x232c14(0x33f)]=!![];const _0xec19c6=_0x2bf448['previousElementSibling'];if(_0xec19c6)_0xec19c6[_0x232c14(0x11b)]='YouTube\x20Video\x20ID*';}if(_0x113831)_0x113831[_0x232c14(0x1db)][_0x232c14(0x2e3)]='block';updateHighlightVideoPreview();}else{if(_0x51fc91==='creator'){const _0x4631ff=[_0x232c14(0x246),'highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x4631ff['forEach'](_0x3a64ca=>{const _0x2367f5=_0x232c14,_0x575fa6=document[_0x2367f5(0x19c)](_0x3a64ca);if(_0x575fa6)_0x575fa6['style']['display']='block';});const _0x1b8bd0=document['getElementById']('highlight-video-id');if(_0x1b8bd0){_0x1b8bd0[_0x232c14(0x33f)]=![];const _0x452b9e=_0x1b8bd0['previousElementSibling'];if(_0x452b9e)_0x452b9e['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x51fc91==='achievement'){const _0x395d7c=[_0x232c14(0x170),'highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0x395d7c['forEach'](_0x21872f=>{const _0x4d8182=_0x232c14,_0x51dbb3=document[_0x4d8182(0x19c)](_0x21872f);if(_0x51dbb3)_0x51dbb3['style']['display']=_0x4d8182(0x2bb);});const _0x426603=document['getElementById']('highlight-video-id');if(_0x426603){_0x426603['required']=![];const _0x3c208f=_0x426603['previousElementSibling'];if(_0x3c208f)_0x3c208f[_0x232c14(0x11b)]=_0x232c14(0x2dd);}}}}}async function loadHighlightDataAdmin(_0x5c173c){const _0x5d6ae6=a0_0x21b64b;try{const _0x4eaf35=doc(db,'highlights',_0x5c173c),_0x296259=await getDoc(_0x4eaf35);if(!_0x296259[_0x5d6ae6(0x19d)]()){showNotification('Highlight\x20not\x20found','error');return;}const _0x521b3d=_0x296259[_0x5d6ae6(0x326)](),_0x28cbd6=_0x521b3d[_0x5d6ae6(0x270)]||'match';document['getElementById'](_0x5d6ae6(0x2c5))['textContent']='Edit\x20'+getHighlightTypeName(_0x28cbd6),document['getElementById']('highlight-type')['value']=_0x28cbd6,toggleHighlightFields(_0x28cbd6),document['getElementById']('highlight-title')[_0x5d6ae6(0x2bf)]=_0x521b3d['title']||'',document[_0x5d6ae6(0x19c)]('highlight-description')[_0x5d6ae6(0x2bf)]=_0x521b3d['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x521b3d['submittedBy']||'';_0x521b3d['videoId']&&(document[_0x5d6ae6(0x19c)](_0x5d6ae6(0x317))['value']=_0x521b3d[_0x5d6ae6(0x1c1)],updateHighlightVideoPreview());if(_0x28cbd6==='match'){document[_0x5d6ae6(0x19c)]('highlight-match-info')['value']=_0x521b3d['matchInfo']||'',document['getElementById']('highlight-map')[_0x5d6ae6(0x2bf)]=_0x521b3d['map']||'';if(_0x521b3d[_0x5d6ae6(0x124)]){const _0x1b570a=new Date(_0x521b3d[_0x5d6ae6(0x124)]['seconds']*0x3e8);document[_0x5d6ae6(0x19c)]('highlight-match-date')[_0x5d6ae6(0x2bf)]=_0x1b570a[_0x5d6ae6(0x337)]()['split']('T')[0x0];}document['getElementById']('highlight-winner-name')[_0x5d6ae6(0x2bf)]=_0x521b3d['winnerName']||'',document['getElementById']('highlight-winner-score')['value']=_0x521b3d[_0x5d6ae6(0x1b6)]||'',document['getElementById'](_0x5d6ae6(0x22d))['value']=_0x521b3d['loserName']||'',document['getElementById'](_0x5d6ae6(0x316))['value']=_0x521b3d[_0x5d6ae6(0x2fa)]||'',document['getElementById'](_0x5d6ae6(0x11f))['value']=_0x521b3d['matchLink']||'';}else{if(_0x28cbd6==='creator')document['getElementById']('highlight-map')[_0x5d6ae6(0x2bf)]=_0x521b3d['map']||'',document['getElementById'](_0x5d6ae6(0x25b))[_0x5d6ae6(0x2bf)]=_0x521b3d['mapCreator']||'',document['getElementById']('highlight-map-version')['value']=_0x521b3d['mapVersion']||'',document['getElementById']('highlight-creator-image')[_0x5d6ae6(0x2bf)]=_0x521b3d['creatorImageUrl']||'';else _0x28cbd6==='achievement'&&(document[_0x5d6ae6(0x19c)](_0x5d6ae6(0x12e))['value']=_0x521b3d['achievementPlayer']||'',document[_0x5d6ae6(0x19c)](_0x5d6ae6(0x308))['value']=_0x521b3d['achievementType']||'',document[_0x5d6ae6(0x19c)]('highlight-achievement-details')['value']=_0x521b3d['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x521b3d['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')[_0x5d6ae6(0x2bf)]=_0x521b3d['achievementImageUrl']||'');}}catch(_0xe04fb3){console['error']('Error\x20loading\x20highlight:',_0xe04fb3),showNotification('Error\x20loading\x20highlight:\x20'+_0xe04fb3[_0x5d6ae6(0x11a)],_0x5d6ae6(0x18b));}}async function saveHighlight(){const _0x56e519=a0_0x21b64b;try{const _0x22bc4f=document['getElementById'](_0x56e519(0x332))?.[_0x56e519(0x2bf)]||'',_0x143f24=document['getElementById']('highlight-type')?.['value']||_0x56e519(0x1f8),_0x3a3fee={'title':document['getElementById']('highlight-title')?.['value']?.['trim']()||'','description':document[_0x56e519(0x19c)]('highlight-description')?.['value']?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.[_0x56e519(0x21b)]()||'','videoId':document['getElementById']('highlight-video-id')?.[_0x56e519(0x2bf)]?.['trim']()||null,'type':_0x143f24};if(!_0x3a3fee['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x143f24==='match'){_0x3a3fee['matchInfo']=document['getElementById'](_0x56e519(0x228))?.['value']?.[_0x56e519(0x21b)]()||'',_0x3a3fee['map']=document[_0x56e519(0x19c)]('highlight-map')?.['value']?.['trim']()||'';const _0x5df195=document['getElementById']('highlight-match-date'),_0x335bda=_0x5df195?.['value']||'';_0x3a3fee['matchDate']=_0x335bda?Timestamp[_0x56e519(0x298)](new Date(_0x335bda)):null,_0x3a3fee['winnerName']=document['getElementById']('highlight-winner-name')?.[_0x56e519(0x2bf)]?.[_0x56e519(0x21b)]()||'',_0x3a3fee['winnerScore']=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x3a3fee['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x3a3fee['loserScore']=document['getElementById']('highlight-loser-score')?.[_0x56e519(0x2bf)]?.['trim']()||'',_0x3a3fee['matchLink']=document['getElementById']('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x3a3fee['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x143f24==='creator'){_0x3a3fee['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x3a3fee['mapCreator']=document[_0x56e519(0x19c)]('highlight-map-creator')?.[_0x56e519(0x2bf)]?.['trim']()||'',_0x3a3fee[_0x56e519(0x310)]=document[_0x56e519(0x19c)]('highlight-map-version')?.[_0x56e519(0x2bf)]?.[_0x56e519(0x21b)]()||'',_0x3a3fee[_0x56e519(0x174)]=document[_0x56e519(0x19c)]('highlight-creator-image')?.[_0x56e519(0x2bf)]?.['trim']()||'';if(!_0x3a3fee['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x143f24==='achievement'){_0x3a3fee['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.[_0x56e519(0x2bf)]?.['trim']()||'',_0x3a3fee[_0x56e519(0x143)]=document[_0x56e519(0x19c)]('highlight-achievement-type')?.['value']?.[_0x56e519(0x21b)]()||'',_0x3a3fee['achievementDetails']=document[_0x56e519(0x19c)]('highlight-achievement-details')?.['value']?.[_0x56e519(0x21b)]()||'',_0x3a3fee[_0x56e519(0x22c)]=document['getElementById']('highlight-player-profile')?.['value']?.['trim']()||'',_0x3a3fee[_0x56e519(0x27e)]=document['getElementById']('highlight-achievement-image')?.['value']?.[_0x56e519(0x21b)]()||'';if(!_0x3a3fee['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x22bc4f?(_0x3a3fee['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x22bc4f),_0x3a3fee),showNotification(_0x56e519(0x189),_0x56e519(0x2b5))):(_0x3a3fee['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x56e519(0x1b1)),_0x3a3fee),showNotification(_0x56e519(0x208),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x4b4810){console['error']('Error\x20saving\x20highlight:',_0x4b4810),showNotification('Error\x20saving\x20highlight:\x20'+_0x4b4810['message'],'error');}}function closeHighlightModal(){const _0x84abfb=a0_0x21b64b,_0x568a69=document['getElementById']('highlight-modal');if(_0x568a69)_0x568a69['classList']['remove'](_0x84abfb(0x29b));}function getHighlightTypeName(_0x546e5a){const _0x1dccdf=a0_0x21b64b;switch(_0x546e5a){case'match':return _0x1dccdf(0x239);case'creator':return _0x1dccdf(0x12a);case _0x1dccdf(0x251):return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x2d1a28=a0_0x21b64b,_0x5bc0df=document['getElementById'](_0x2d1a28(0x317)),_0x5a21c4=document['getElementById']('highlight-video-preview-container'),_0x3a66d8=document[_0x2d1a28(0x19c)]('highlight-video-preview');if(!_0x5bc0df||!_0x3a66d8||!_0x5a21c4)return;const _0x494971=_0x5bc0df['value']['trim']();_0x494971&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x494971)?(_0x3a66d8['src']='https://www.youtube.com/embed/'+_0x494971,_0x5a21c4[_0x2d1a28(0x1db)][_0x2d1a28(0x2e3)]='block'):(_0x3a66d8['src']='',_0x5a21c4['style']['display']=_0x2d1a28(0x32a));}async function loadHighlightsAdmin(){const _0x3401b6=a0_0x21b64b,_0x2b0bea=document[_0x3401b6(0x19c)]('highlights-table-body');if(!_0x2b0bea)return;_0x2b0bea[_0x3401b6(0x11b)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x36c3b4=query(collection(db,_0x3401b6(0x1b1)),orderBy('createdAt','desc')),_0x2aebcb=await getDocs(_0x36c3b4);if(_0x2aebcb['empty']){_0x2b0bea['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x2b0bea[_0x3401b6(0x11b)]='',_0x2aebcb['forEach'](_0x25a664=>{const _0x362dcb=_0x3401b6,_0x16bb06=_0x25a664['data'](),_0x3ea0d0=document['createElement']('tr'),_0x54690=_0x16bb06[_0x362dcb(0x1be)]?new Date(_0x16bb06['createdAt'][_0x362dcb(0x26f)]*0x3e8)['toLocaleDateString']():_0x362dcb(0x307);let _0x5c0554='Unknown',_0x1b826e='';switch(_0x16bb06['type']){case'match':_0x5c0554='Match',_0x1b826e='match-type';break;case'creator':_0x5c0554='Creator',_0x1b826e='creator-type';break;case'achievement':_0x5c0554='Achievement',_0x1b826e='achievement-type';break;}_0x3ea0d0[_0x362dcb(0x11b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x16bb06[_0x362dcb(0x152)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x1b826e+'\x22>'+_0x5c0554+_0x362dcb(0x224)+_0x54690+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x16bb06['submittedBy']||'Unknown')+_0x362dcb(0x2d7)+(_0x16bb06['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x362dcb(0x2e1))+_0x362dcb(0x294)+_0x25a664['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x25a664['id']+_0x362dcb(0x2ad),_0x2b0bea['appendChild'](_0x3ea0d0);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0xca9910=>{_0xca9910['addEventListener']('click',_0x289873=>{const _0x32969b=a0_0x52bb;openHighlightModal(_0x289873[_0x32969b(0x299)]['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x14de13=>{_0x14de13['addEventListener']('click',_0x22b4f5=>{const _0xaf8de7=a0_0x52bb;confirmDeleteHighlight(_0x22b4f5[_0xaf8de7(0x299)]['dataset']['id']);});});}catch(_0x188fac){console['error']('Error\x20loading\x20highlights:',_0x188fac),_0x2b0bea['innerHTML']=_0x3401b6(0x1a5)+_0x188fac['message']+_0x3401b6(0x359);}}async function confirmDeleteHighlight(_0x332332){const _0x1f8d6a=a0_0x21b64b;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x332332)),showNotification(_0x1f8d6a(0x2c7),'success'),loadHighlightsAdmin();}catch(_0x48b545){console['error']('Error\x20deleting\x20highlight:',_0x48b545),showNotification('Error\x20deleting\x20highlight:\x20'+_0x48b545['message'],'error');}}function setupCreateTestMatchModal(){const _0x188b70=a0_0x21b64b;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x13dac5=document['getElementById'](_0x188b70(0x2d5)),_0x5c6498=document['getElementById']('create-test-match-form');if(!_0x13dac5){console[_0x188b70(0x18b)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x5c6498){console['error'](_0x188b70(0x29f));return;}const _0x37486d=_0x13dac5[_0x188b70(0x30e)](!![]);_0x13dac5['parentNode']['replaceChild'](_0x37486d,_0x13dac5);const _0x424bd2=_0x37486d['querySelector'](_0x188b70(0x1d5));_0x37486d[_0x188b70(0x275)]('click',function(_0x4a1142){const _0x4aaa46=_0x188b70;_0x4a1142['target']===_0x37486d&&(console['log'](_0x4aaa46(0x12f)),closeCreateTestMatchModal());});const _0x40a134=_0x37486d[_0x188b70(0x295)]('.close-btn');_0x40a134&&_0x40a134[_0x188b70(0x275)]('click',function(_0x404b50){const _0x326b1f=_0x188b70;_0x404b50[_0x326b1f(0x24d)](),_0x404b50['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x2259d7=_0x37486d[_0x188b70(0x295)]('#cancel-create-test-match-btn');_0x2259d7&&_0x2259d7[_0x188b70(0x275)]('click',function(_0x16cb42){const _0x45292d=_0x188b70;_0x16cb42[_0x45292d(0x24d)](),_0x16cb42['stopPropagation'](),console[_0x45292d(0x30b)](_0x45292d(0x134)),closeCreateTestMatchModal();});if(_0x424bd2){_0x424bd2[_0x188b70(0x275)]('submit',function(_0x565aed){const _0xccb11f=_0x188b70;_0x565aed['preventDefault'](),_0x565aed[_0xccb11f(0x2c0)](),console[_0xccb11f(0x30b)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0xd86d9=_0x424bd2['querySelector']('button[type=\x22submit\x22]');_0xd86d9&&_0xd86d9['addEventListener']('click',function(_0x3e5100){const _0x16d50a=_0x188b70;_0x3e5100['preventDefault'](),_0x3e5100['stopPropagation'](),console[_0x16d50a(0x30b)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log'](_0x188b70(0x2e6));}function setupManageHighlightsSection(){const _0x3da6ea=a0_0x21b64b;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x44e918=document[_0x3da6ea(0x19c)](_0x3da6ea(0x19e));_0x44e918&&_0x44e918[_0x3da6ea(0x275)]('submit',_0x5b5f00=>{_0x5b5f00['preventDefault'](),saveHighlight();});const _0x3b1e1f=document['getElementById']('cancel-highlight-btn');_0x3b1e1f&&_0x3b1e1f[_0x3da6ea(0x275)]('click',closeHighlightModal);const _0xb77a41=document['querySelector'](_0x3da6ea(0x2cc));_0xb77a41&&_0xb77a41['addEventListener']('click',closeHighlightModal);const _0x120333=document['getElementById'](_0x3da6ea(0x25e));_0x120333&&_0x120333[_0x3da6ea(0x275)](_0x3da6ea(0x18d),_0x1a6705=>{const _0x2d111b=_0x3da6ea;_0x1a6705[_0x2d111b(0x371)]===_0x120333&&closeHighlightModal();});const _0x3c5e2b=document[_0x3da6ea(0x19c)](_0x3da6ea(0x317));_0x3c5e2b&&_0x3c5e2b['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x3ae507=a0_0x21b64b;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0xe897b4=document['getElementById'](_0x3ae507(0x318)),_0x344034=document[_0x3ae507(0x19c)]('matches-next-page');_0xe897b4&&_0xe897b4[_0x3ae507(0x275)]('click',()=>{const _0x56a830=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x56a830]['page']-0x1);});_0x344034&&_0x344034['addEventListener']('click',()=>{const _0x20b28a=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x20b28a]['page']+0x1);});const _0x75b8d5=document[_0x3ae507(0x19c)](_0x3ae507(0x1f1)),_0xd476b8=document[_0x3ae507(0x19c)]('reset-matches-filters');_0x75b8d5&&_0x75b8d5['addEventListener'](_0x3ae507(0x18d),applyMatchesFilters);_0xd476b8&&_0xd476b8['addEventListener']('click',resetMatchesFilters);const _0x5e47e9=document['getElementById'](_0x3ae507(0x156));_0x5e47e9&&_0x5e47e9['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x470c8d=document['getElementById']('resimulate-match-btn');_0x470c8d&&_0x470c8d['addEventListener'](_0x3ae507(0x18d),openResimulateModal);const _0x86a6ff=document[_0x3ae507(0x19c)]('resimulate-modal');if(_0x86a6ff){const _0xf8558f=_0x86a6ff['querySelector']('.close');_0xf8558f&&_0xf8558f['addEventListener']('click',closeResimulateModal),_0x86a6ff['addEventListener']('click',_0x2db519=>{_0x2db519['target']===_0x86a6ff&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x3ae507(0x11d));}function openCreateTestMatchModal(){const _0x4fac14=a0_0x21b64b;console['log'](_0x4fac14(0x319));const _0x4688bb=document['getElementById']('create-test-match-modal'),_0x56f332=document['getElementById'](_0x4fac14(0x2fe));if(!_0x4688bb){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification(_0x4fac14(0x374),'error');return;}if(!_0x56f332){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found',_0x4fac14(0x18b));return;}_0x56f332['reset']();const _0x4f5e41=document[_0x4fac14(0x236)](_0x4fac14(0x219));let _0x497d0a=![];_0x4f5e41['forEach'](_0x68a8d8=>{const _0x4337a4=_0x4fac14;console[_0x4337a4(0x30b)]('Found\x20radio\x20with\x20value:',_0x68a8d8['value']),_0x68a8d8['value']===currentLadder&&(_0x68a8d8[_0x4337a4(0x28b)]=!![],_0x497d0a=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x497d0a){console['warn'](_0x4fac14(0x194),currentLadder);const _0x507aea=document[_0x4fac14(0x295)](_0x4fac14(0x2f9));_0x507aea&&(_0x507aea['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x104088=document['getElementById']('test-match-date');if(_0x104088){const _0x3e6b8d=new Date()['toISOString']()['split']('T')[0x0];_0x104088['value']=_0x3e6b8d;}_0x4688bb['style']['display']='flex',_0x4688bb[_0x4fac14(0x1db)]['visibility']='visible',_0x4688bb['style']['opacity']='1',_0x4688bb['classList']['add']('active'),console[_0x4fac14(0x30b)](_0x4fac14(0x200));const _0x1980f5=document['getElementById']('test-match-winner-username');_0x1980f5&&setTimeout(()=>{_0x1980f5['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x4f08a0=a0_0x21b64b;console[_0x4f08a0(0x30b)](_0x4f08a0(0x1f7));const _0x555ed1=document['getElementById']('create-test-match-modal');if(!_0x555ed1){console[_0x4f08a0(0x18b)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x555ed1['classList']['remove'](_0x4f08a0(0x29b)),_0x555ed1['style']['opacity']='0',_0x555ed1['style']['visibility']='hidden',setTimeout(()=>{!_0x555ed1['classList']['contains']('active')&&(_0x555ed1['style']['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x51f8fd=a0_0x21b64b;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x511acd=auth[_0x51f8fd(0x1f2)];if(!_0x511acd){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x173fe0='D1',_0xddf54c='approvedMatches',_0x47e78f={'winnerUsername':_0x51f8fd(0x12c),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x51f8fd(0x23c),'loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x51f8fd(0x1bb),'approvedAt':Timestamp[_0x51f8fd(0x298)](new Date()),'approvedBy':_0x511acd['email'],'createdAt':serverTimestamp(),'createdBy':_0x511acd['email'],'isTestMatch':!![],'ladder':_0x173fe0,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x51f8fd(0x290)+_0x511acd['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0xddf54c),_0x47e78f),showNotification('Simple\x20test\x20match\x20created\x20successfully',_0x51f8fd(0x2b5)),closeCreateTestMatchModal();}catch(_0x6a6439){console['error'](_0x51f8fd(0x15d),_0x6a6439),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x6a6439['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x24e8e4=a0_0x21b64b;try{console['log'](_0x24e8e4(0x149)),console[_0x24e8e4(0x30b)]('Auth:',auth),console['log']('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x44f785=collection(db,_0x24e8e4(0x20d));console[_0x24e8e4(0x30b)]('Collection\x20reference\x20created:',_0x44f785);const _0x4d6c0d=query(_0x44f785,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x4d6c0d);const _0x2ae5f4=await getDocs(_0x4d6c0d);console['log']('Query\x20executed.\x20Empty:',_0x2ae5f4['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x514da6){console['error']('Firebase\x20connection\x20test\x20failed:',_0x514da6);}};function setupCreateTestMatchButton(){const _0x2af962=a0_0x21b64b,_0x56c1fb=document[_0x2af962(0x19c)](_0x2af962(0x223));if(!_0x56c1fb){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x492ab4=_0x56c1fb['cloneNode'](!![]);_0x56c1fb['parentNode'][_0x2af962(0x20b)](_0x492ab4,_0x56c1fb),_0x492ab4['addEventListener']('click',function(_0x54671b){_0x54671b['preventDefault'](),_0x54671b['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0x2af962(0x30b)]('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x2d226d=0x1){const _0x260e00=a0_0x21b64b,_0x3efd64=document['getElementById']('matches-table-body');if(!_0x3efd64)return;_0x3efd64['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x475903=currentLadder['toLowerCase'](),_0x50e211=matchesPagination[_0x475903],_0x4d0b34=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x260e00(0x1df):'approvedMatchesD3',_0x3d8521=collection(db,_0x4d0b34);_0x2d226d<=0x1?(_0x50e211['page']=0x1,_0x50e211['firstVisible']=null,_0x50e211['lastVisible']=null):_0x50e211['page']=_0x2d226d;const _0x5856e4=getMatchesFilters();let _0x35c8c8=_0x3d8521;if(_0x5856e4[_0x260e00(0x328)]||_0x5856e4['endDate']||_0x5856e4['searchTerm']){let _0x3c4530=[];_0x5856e4[_0x260e00(0x328)]&&_0x5856e4['endDate']?(_0x3c4530['push'](where('approvedAt','>=',_0x5856e4['startDate']),where(_0x260e00(0x292),'<=',_0x5856e4[_0x260e00(0x164)])),_0x35c8c8=query(_0x3d8521,..._0x3c4530)):_0x35c8c8=query(_0x3d8521,orderBy(_0x260e00(0x292),'desc'));}else _0x35c8c8=query(_0x3d8521,orderBy(_0x260e00(0x292),'desc'));_0x2d226d>0x1&&_0x50e211[_0x260e00(0x2b2)]?_0x35c8c8=query(_0x35c8c8,startAfter(_0x50e211['lastVisible']),limit(PAGE_SIZE)):_0x35c8c8=query(_0x35c8c8,limit(PAGE_SIZE));const _0x283a65=await getDocs(_0x35c8c8);!_0x283a65['empty']&&(_0x50e211[_0x260e00(0x2a6)]=_0x283a65['docs'][0x0],_0x50e211['lastVisible']=_0x283a65[_0x260e00(0x282)][_0x283a65['docs']['length']-0x1]);let _0x3ec507=![];if(!_0x283a65['empty']){const _0x352754=query(_0x35c8c8,startAfter(_0x50e211[_0x260e00(0x2b2)]),limit(0x1)),_0x300da3=await getDocs(_0x352754);_0x3ec507=!_0x300da3[_0x260e00(0x129)];}const _0x37c963=document[_0x260e00(0x19c)](_0x260e00(0x318)),_0x28cc36=document[_0x260e00(0x19c)]('matches-next-page'),_0x3eaa67=document[_0x260e00(0x19c)](_0x260e00(0x2ac));if(_0x37c963)_0x37c963['disabled']=_0x50e211['page']<=0x1;if(_0x28cc36)_0x28cc36['disabled']=!_0x3ec507;if(_0x3eaa67)_0x3eaa67['textContent']='Page\x20'+_0x50e211[_0x260e00(0x365)];if(_0x283a65[_0x260e00(0x129)]){_0x3efd64['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x3efd64['innerHTML']='',_0x283a65['forEach'](_0x42df1e=>{const _0x24b481=_0x260e00,_0x1d5a1b=_0x42df1e['data'](),_0x1fc671=document[_0x24b481(0x344)]('tr'),_0x20f9ea=_0x1d5a1b[_0x24b481(0x292)]?new Date(_0x1d5a1b[_0x24b481(0x292)][_0x24b481(0x26f)]*0x3e8)['toLocaleDateString']():_0x24b481(0x307);_0x1fc671['setAttribute']('data-id',_0x42df1e['id']),_0x1fc671[_0x24b481(0x2db)](_0x24b481(0x261),currentLadder),_0x1fc671['classList'][_0x24b481(0x231)]('match-row'),_0x1fc671[_0x24b481(0x11b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x20f9ea+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x1d5a1b['winnerUsername']||'Unknown')+_0x24b481(0x2d1)+(_0x1d5a1b['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x1d5a1b['winnerScore']||0x0)+'\x20-\x20'+(_0x1d5a1b[_0x24b481(0x2fa)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x1d5a1b['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x24b481(0x2f8)+_0x42df1e['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x42df1e['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3efd64['appendChild'](_0x1fc671);}),setupMatchesActionButtons(),_0x5856e4[_0x260e00(0x366)]&&filterMatchesTable(),console['log'](_0x260e00(0x35f)+_0x283a65['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x50e211['page']);}catch(_0x5cdfb5){console[_0x260e00(0x18b)]('Error\x20loading\x20matches:',_0x5cdfb5),_0x3efd64['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x5cdfb5['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x517744,_0x56ba0e){const _0x335f92=a0_0x21b64b;try{console[_0x335f92(0x30b)](_0x335f92(0x1c3)+_0x517744+_0x335f92(0x184)+_0x56ba0e+'\x20ladder');const _0x236c0d=auth['currentUser'];if(!_0x236c0d){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x30ec4a=_0x56ba0e==='D1'?'approvedMatches':_0x56ba0e==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0x30ec4a),showNotification('Deleting\x20match...',_0x335f92(0x2bc)),await deleteDoc(doc(db,_0x30ec4a,_0x517744)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully',_0x335f92(0x2b5));const _0x24aba0=_0x56ba0e[_0x335f92(0x221)]();loadMatchesData(matchesPagination[_0x24aba0]['page']);}catch(_0x257595){console['error']('Error\x20deleting\x20match:',_0x257595),showNotification(_0x335f92(0x13c)+_0x257595[_0x335f92(0x11a)],'error');}}function setupMatchesActionButtons(){const _0x599f18=a0_0x21b64b;console['log'](_0x599f18(0x2c4)),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x53f0fa=>{const _0x400c8c=_0x599f18;_0x53f0fa[_0x400c8c(0x275)]('click',_0x3d0895=>{const _0x3fe2f5=_0x400c8c;_0x3d0895[_0x3fe2f5(0x24d)](),_0x3d0895[_0x3fe2f5(0x2c0)]();const _0x310ee9=_0x3d0895['currentTarget']['dataset']['id'],_0x1e716e=_0x3d0895[_0x3fe2f5(0x299)]['closest']('tr'),_0x108ea7=_0x1e716e[_0x3fe2f5(0x1c4)]['ladder'];console[_0x3fe2f5(0x30b)]('Edit\x20match\x20clicked:',_0x310ee9,_0x108ea7),openEditMatchModal(_0x310ee9,_0x108ea7);});}),document['querySelectorAll']('.delete-match-btn')['forEach'](_0x1f04f9=>{const _0x518faf=_0x599f18;_0x1f04f9[_0x518faf(0x275)]('click',_0x24ffe9=>{const _0xb3c160=_0x518faf;_0x24ffe9['preventDefault'](),_0x24ffe9['stopPropagation']();const _0x3cf7b7=_0x24ffe9['currentTarget']['dataset']['id'],_0x6e6848=_0x24ffe9['currentTarget']['closest']('tr'),_0x3e11a0=_0x6e6848[_0xb3c160(0x1c4)]['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x3cf7b7,_0x3e11a0),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x3cf7b7,_0x3e11a0);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x1f86a4=a0_0x21b64b,_0x268e5a=document['getElementById']('matches-search')[_0x1f86a4(0x2bf)]['toLowerCase'](),_0x4d4a18=document['querySelectorAll']('#matches-table-body\x20tr');let _0x503f05=0x0;_0x4d4a18['forEach'](_0xbbb931=>{const _0x50fb16=_0x1f86a4;if(_0xbbb931['classList'][_0x50fb16(0x2eb)]('loading-cell')||_0xbbb931['classList'][_0x50fb16(0x2eb)](_0x50fb16(0x2a2))||_0xbbb931[_0x50fb16(0x1ba)][_0x50fb16(0x2eb)]('error-state'))return;const _0x37fabf=_0xbbb931[_0x50fb16(0x150)][0x1]['textContent']['toLowerCase'](),_0x5c86f3=_0xbbb931[_0x50fb16(0x150)][0x2]['textContent']['toLowerCase'](),_0x4a16aa=_0xbbb931['cells'][0x4][_0x50fb16(0x259)]['toLowerCase']();_0x37fabf['includes'](_0x268e5a)||_0x5c86f3['includes'](_0x268e5a)||_0x4a16aa['includes'](_0x268e5a)?(_0xbbb931['style'][_0x50fb16(0x2e3)]='',_0x503f05++):_0xbbb931['style'][_0x50fb16(0x2e3)]='none';});if(_0x503f05===0x0&&_0x4d4a18['length']>0x0){const _0x477935=document['getElementById']('matches-table-body'),_0x1b8d2b=_0x477935['querySelector']('.no-results');if(!_0x1b8d2b){const _0x46307c=document['createElement']('tr');_0x46307c['className']=_0x1f86a4(0x2ce),_0x46307c[_0x1f86a4(0x11b)]='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x268e5a+_0x1f86a4(0x16c),_0x477935[_0x1f86a4(0x1bc)](_0x46307c);}}else{const _0x3d44cb=document['querySelector']('.no-results');_0x3d44cb&&_0x3d44cb['remove']();}}function getMatchesFilters(){const _0x312a4d=a0_0x21b64b,_0x16eb3e=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x1dfabf=document['getElementById'](_0x312a4d(0x1a6))[_0x312a4d(0x2bf)],_0x3f4949=document['getElementById'](_0x312a4d(0x2d4))[_0x312a4d(0x2bf)];let _0x4881d5=null,_0x47e0d1=null;return _0x1dfabf&&(_0x4881d5=new Date(_0x1dfabf),_0x4881d5['setHours'](0x0,0x0,0x0,0x0),_0x4881d5=Timestamp[_0x312a4d(0x298)](_0x4881d5)),_0x3f4949&&(_0x47e0d1=new Date(_0x3f4949),_0x47e0d1[_0x312a4d(0x311)](0x17,0x3b,0x3b,0x3e7),_0x47e0d1=Timestamp['fromDate'](_0x47e0d1)),{'searchTerm':_0x16eb3e,'startDate':_0x4881d5,'endDate':_0x47e0d1};}async function applyMatchesFilters(){const _0x2aa87a=currentLadder['toLowerCase']();matchesPagination[_0x2aa87a]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x45572f=a0_0x21b64b;document['getElementById'](_0x45572f(0x1a6))['value']='',document[_0x45572f(0x19c)]('matches-end-date')['value']='',document[_0x45572f(0x19c)]('matches-search')['value']='';const _0x3561e5=currentLadder['toLowerCase']();matchesPagination[_0x3561e5]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x52100f,_0x1be9c0){const _0x52e227=a0_0x21b64b,_0x515c50=document['getElementById'](_0x52e227(0x169));if(!_0x515c50)return;try{const _0x144eb3=_0x1be9c0==='D1'?_0x52e227(0x1d8):_0x1be9c0==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x34d63e=doc(db,_0x144eb3,_0x52100f),_0x614808=await getDoc(_0x34d63e);if(!_0x614808[_0x52e227(0x19d)]()){showNotification(_0x52e227(0x267),'error');return;}const _0x1c3bfe=_0x614808['data']();document['getElementById']('edit-match-id')[_0x52e227(0x2bf)]=_0x52100f,document[_0x52e227(0x19c)](_0x52e227(0x11c))['value']=_0x1be9c0,document['getElementById']('edit-match-winner')['value']=_0x1c3bfe['winnerUsername']||'',document['getElementById']('edit-match-winner-score')['value']=_0x1c3bfe['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0x1c3bfe['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x1c3bfe[_0x52e227(0x2f1)]||'',document['getElementById'](_0x52e227(0x25d))['value']=_0x1c3bfe[_0x52e227(0x128)]||'',document['getElementById']('edit-match-loser-score')['value']=_0x1c3bfe['loserScore']||0x0,document[_0x52e227(0x19c)]('edit-match-loser-suicides')['value']=_0x1c3bfe['loserSuicides']||0x0,document[_0x52e227(0x19c)](_0x52e227(0x122))[_0x52e227(0x2bf)]=_0x1c3bfe['loserComment']||'',document[_0x52e227(0x19c)](_0x52e227(0x2be))[_0x52e227(0x2bf)]=_0x1c3bfe['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')['value']=_0x1c3bfe['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')[_0x52e227(0x2bf)]=_0x1c3bfe['loserDemoLink']||_0x1c3bfe[_0x52e227(0x213)]||'',document['getElementById']('edit-match-title')[_0x52e227(0x259)]='Edit\x20Match:\x20'+_0x1c3bfe[_0x52e227(0x151)]+_0x52e227(0x254)+_0x1c3bfe['loserUsername'],_0x515c50['classList']['add']('active');}catch(_0x250515){console[_0x52e227(0x18b)]('Error\x20loading\x20match\x20data:',_0x250515),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x27334f=a0_0x21b64b,_0x839dfd=document['getElementById']('edit-match-modal');_0x839dfd&&_0x839dfd[_0x27334f(0x1ba)]['remove']('active');}async function saveEditedMatch(){const _0x3fae9f=a0_0x21b64b;try{const _0x26db6a=document['getElementById'](_0x3fae9f(0x139))['value'],_0x29d79d=document['getElementById']('edit-match-ladder')[_0x3fae9f(0x2bf)];if(!_0x26db6a||!_0x29d79d){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x3fae9f(0x18b));return;}const _0x2fd7a9=_0x29d79d==='D1'?'approvedMatches':_0x29d79d==='D2'?_0x3fae9f(0x1df):'approvedMatchesD3',_0x2dba15=document['getElementById']('edit-match-winner')['value']['trim'](),_0x39cfb9=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x52d5d4=parseInt(document['getElementById']('edit-match-winner-suicides')[_0x3fae9f(0x2bf)]),_0x4d8640=document['getElementById']('edit-match-winner-comment')['value'][_0x3fae9f(0x21b)](),_0xf51a27=document['getElementById'](_0x3fae9f(0x25d))['value']['trim'](),_0x2b93e1=parseInt(document['getElementById'](_0x3fae9f(0x21a))[_0x3fae9f(0x2bf)]),_0x3dc298=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x1b9f78=document['getElementById']('edit-match-loser-comment')['value']['trim'](),_0xdf006f=document['getElementById'](_0x3fae9f(0x2be))[_0x3fae9f(0x2bf)]['trim'](),_0x17e876=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x2a77a4=document['getElementById']('edit-match-loser-demo')[_0x3fae9f(0x2bf)]['trim']();if(!_0x2dba15||!_0xf51a27){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required',_0x3fae9f(0x18b));return;}await updateDoc(doc(db,_0x2fd7a9,_0x26db6a),{'winnerUsername':_0x2dba15,'winnerScore':_0x39cfb9,'winnerSuicides':_0x52d5d4,'winnerComment':_0x4d8640,'loserUsername':_0xf51a27,'loserScore':_0x2b93e1,'loserSuicides':_0x3dc298,'loserComment':_0x1b9f78,'mapPlayed':_0xdf006f,'winnerDemoLink':_0x17e876||null,'loserDemoLink':_0x2a77a4||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x29d79d['toLowerCase']()]['page']);}catch(_0x3c46e4){console['error']('Error\x20saving\x20match:',_0x3c46e4),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x3c46e4[_0x3fae9f(0x11a)],_0x3fae9f(0x18b));}}async function openDeleteMatchModal(_0xdb9615,_0x280b11){const _0x297c90=a0_0x21b64b;try{const _0x14a9ab=_0x280b11==='D1'?_0x297c90(0x1d8):_0x280b11==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1890c7=doc(db,_0x14a9ab,_0xdb9615),_0x37c13a=await getDoc(_0x1890c7);if(!_0x37c13a['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x4c2bd0=_0x37c13a['data'](),_0x44120e=document[_0x297c90(0x19c)](_0x297c90(0x1fd));_0x44120e['dataset']['matchId']=_0xdb9615,_0x44120e[_0x297c90(0x1c4)][_0x297c90(0x155)]=_0x280b11;const _0x4779b4=_0x4c2bd0['approvedAt']?new Date(_0x4c2bd0['approvedAt'][_0x297c90(0x26f)]*0x3e8)[_0x297c90(0x12d)]():'N/A',_0x4914af=document['getElementById']('delete-match-summary');_0x4914af['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x4779b4+_0x297c90(0x1aa)+_0x4c2bd0['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x4c2bd0['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x4c2bd0['winnerScore']||0x0)+_0x297c90(0x1af)+(_0x4c2bd0['loserScore']||0x0)+_0x297c90(0x303)+(_0x4c2bd0[_0x297c90(0x1a3)]||_0x297c90(0x307))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x280b11+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x44120e[_0x297c90(0x1ba)][_0x297c90(0x231)](_0x297c90(0x29b));}catch(_0xf0cb62){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0xf0cb62),showNotification('Failed\x20to\x20load\x20match\x20data',_0x297c90(0x18b));}}function closeDeleteMatchModal(){const _0x392a8d=a0_0x21b64b,_0x825b3=document[_0x392a8d(0x19c)]('delete-match-confirm-modal');_0x825b3&&(_0x825b3['classList'][_0x392a8d(0x24a)]('active'),_0x825b3['removeAttribute']('data-match-id'),_0x825b3['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x44a607=a0_0x21b64b,_0xa09d7=document[_0x44a607(0x19c)]('delete-match-confirm-modal'),_0x186656=_0xa09d7[_0x44a607(0x1c4)][_0x44a607(0x376)],_0x37869a=_0xa09d7[_0x44a607(0x1c4)]['ladder'];if(!_0x186656||!_0x37869a){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x44a607(0x18b)),closeDeleteMatchModal();return;}try{const _0x3e6516=_0x37869a==='D1'?'approvedMatches':_0x37869a==='D2'?_0x44a607(0x1df):_0x44a607(0x2b4);await deleteDoc(doc(db,_0x3e6516,_0x186656)),showNotification(_0x44a607(0x138),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x37869a['toLowerCase']()][_0x44a607(0x365)]);}catch(_0x5bba0d){console[_0x44a607(0x18b)]('Error\x20deleting\x20match:',_0x5bba0d),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x5bba0d['message'],'error');}}async function saveHighlightChanges(){const _0x32568e=a0_0x21b64b,_0x34f13d=document[_0x32568e(0x19c)]('edit-highlight-id')['value'],_0x1bbdb9=document[_0x32568e(0x19c)](_0x32568e(0x1a0))['value'];let _0x55b241={'title':document['getElementById']('edit-highlight-title-input')['value'][_0x32568e(0x21b)](),'type':_0x1bbdb9,'description':document[_0x32568e(0x19c)]('edit-highlight-description-input')['value'][_0x32568e(0x21b)](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth['currentUser']['email']};if(_0x1bbdb9==='match'){_0x55b241['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x55b241[_0x32568e(0x289)]=document[_0x32568e(0x19c)]('edit-highlight-map-input')['value'][_0x32568e(0x21b)]();const _0x381a46=document['getElementById']('edit-highlight-matchDate-input')[_0x32568e(0x2bf)];_0x55b241['matchDate']=_0x381a46?Timestamp[_0x32568e(0x298)](new Date(_0x381a46)):null,_0x55b241['winnerName']=document['getElementById']('edit-highlight-winnerName-input')['value']['trim'](),_0x55b241['winnerScore']=document[_0x32568e(0x19c)]('edit-highlight-winnerScore-input')[_0x32568e(0x2bf)][_0x32568e(0x21b)](),_0x55b241[_0x32568e(0x1f5)]=document['getElementById']('edit-highlight-loserName-input')['value']['trim'](),_0x55b241[_0x32568e(0x2fa)]=document['getElementById']('edit-highlight-loserScore-input')['value']['trim'](),_0x55b241[_0x32568e(0x179)]=document['getElementById']('edit-highlight-matchLink-input')['value'][_0x32568e(0x21b)](),_0x55b241['mapCreator']=null,_0x55b241['mapVersion']=null,_0x55b241[_0x32568e(0x174)]=null,_0x55b241['achievementPlayer']=null,_0x55b241['achievementType']=null,_0x55b241['achievementDetails']=null,_0x55b241['playerProfileUrl']=null;}else{if(_0x1bbdb9===_0x32568e(0x19b))_0x55b241[_0x32568e(0x289)]=document[_0x32568e(0x19c)]('edit-highlight-map-input')['value']['trim'](),_0x55b241[_0x32568e(0x274)]=document['getElementById']('edit-highlight-mapCreator-input')['value'][_0x32568e(0x21b)](),_0x55b241['mapVersion']=document['getElementById'](_0x32568e(0x31e))['value']['trim'](),_0x55b241['creatorImageUrl']=document[_0x32568e(0x19c)]('edit-highlight-creatorImageUrl-input')[_0x32568e(0x2bf)]['trim'](),_0x55b241[_0x32568e(0x1c0)]=null,_0x55b241['matchDate']=null,_0x55b241['winnerName']=null,_0x55b241['winnerScore']=null,_0x55b241['loserName']=null,_0x55b241['loserScore']=null,_0x55b241[_0x32568e(0x179)]=null,_0x55b241[_0x32568e(0x2b9)]=null,_0x55b241['achievementType']=null,_0x55b241['achievementDetails']=null,_0x55b241[_0x32568e(0x22c)]=null;else _0x1bbdb9===_0x32568e(0x251)&&(_0x55b241['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')[_0x32568e(0x2bf)][_0x32568e(0x21b)](),_0x55b241[_0x32568e(0x143)]=document['getElementById']('edit-highlight-achievementType-input')['value'][_0x32568e(0x21b)](),_0x55b241['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')[_0x32568e(0x2bf)]['trim'](),_0x55b241['playerProfileUrl']=document['getElementById'](_0x32568e(0x28e))['value']['trim'](),_0x55b241[_0x32568e(0x1c0)]=null,_0x55b241[_0x32568e(0x289)]=null,_0x55b241[_0x32568e(0x124)]=null,_0x55b241['winnerName']=null,_0x55b241['winnerScore']=null,_0x55b241['loserName']=null,_0x55b241['loserScore']=null,_0x55b241['matchLink']=null,_0x55b241['mapCreator']=null,_0x55b241[_0x32568e(0x310)]=null,_0x55b241[_0x32568e(0x174)]=null);}try{if(_0x34f13d){_0x55b241[_0x32568e(0x192)]=serverTimestamp();const _0x6663af=doc(db,'highlights',_0x34f13d);await updateDoc(_0x6663af,_0x55b241),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x55b241[_0x32568e(0x1be)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x55b241),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x2c1e23){console['error'](_0x32568e(0x340),_0x2c1e23),showNotification('Error\x20saving\x20highlight:\x20'+_0x2c1e23['message'],_0x32568e(0x18b));}}async function resimulateMatch(){const _0x24b29e=a0_0x21b64b;try{const _0x552129=document[_0x24b29e(0x19c)]('resimulate-match-id')[_0x24b29e(0x2bf)];if(!_0x552129){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x295feb=auth['currentUser'];if(!_0x295feb){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x17c117=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x24b29e(0x1df):_0x24b29e(0x2b4),_0x139ca5=doc(db,_0x17c117,_0x552129),_0x2cd7c7=await getDoc(_0x139ca5);if(!_0x2cd7c7['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x24b29e(0x18b));return;}const _0x24ae25=_0x2cd7c7['data'](),_0x21f941=_0x24ae25['approvedAt']?_0x24ae25[_0x24b29e(0x292)]['toDate']()['toLocaleString']():_0x24ae25['matchDate']?_0x24ae25['matchDate']['toDate']?_0x24ae25['matchDate']['toDate']()['toLocaleString']():new Date(_0x24ae25['matchDate'])['toLocaleString']():'Unknown',_0x52edc2=_0x24b29e(0x2f7)+_0x24ae25['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x24ae25['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x24ae25['winnerScore']+'-'+_0x24ae25[_0x24b29e(0x2fa)]+_0x24b29e(0x36a)+(_0x24ae25[_0x24b29e(0x1a3)]||_0x24ae25['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x21f941+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x552129+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x24b29e(0x19c)]('match-details-container')['innerHTML']=_0x52edc2,document[_0x24b29e(0x19c)]('match-details-container')[_0x24b29e(0x1db)]['display']='block',document['getElementById'](_0x24b29e(0x2e0))[_0x24b29e(0x1db)][_0x24b29e(0x2e3)]='block',window[_0x24b29e(0x283)]={'matchId':_0x552129,'matchData':_0x24ae25,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x41393b){console['error'](_0x24b29e(0x193),_0x41393b),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x41393b[_0x24b29e(0x11a)],_0x24b29e(0x18b));}}async function confirmResimulateMatch(){const _0x28894a=a0_0x21b64b;try{const {matchId:_0x43120d,matchData:_0x3de4f6,ladder:_0x4f5e3b}=window[_0x28894a(0x283)];if(!_0x43120d||!_0x3de4f6){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0x28894a(0x18b));return;}const _0x3ea868=_0x4f5e3b==='D1'?_0x28894a(0x20d):_0x4f5e3b==='D2'?'playersD2':'playersD3',_0x172ab1=_0x4f5e3b==='D1'?'eloHistory':_0x4f5e3b==='D2'?'eloHistoryD2':_0x28894a(0x346),[_0x420971,_0x5dab7b]=await Promise['all']([getDocs(query(collection(db,_0x3ea868),where('username','==',_0x3de4f6[_0x28894a(0x151)]))),getDocs(query(collection(db,_0x3ea868),where('username','==',_0x3de4f6['loserUsername'])))]);if(_0x420971['empty']||_0x5dab7b[_0x28894a(0x129)]){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x5a7fc4=_0x420971['docs'][0x0]['id'],_0x3579a9=_0x5dab7b['docs'][0x0]['id'],_0x1ebb35=_0x420971[_0x28894a(0x282)][0x0]['data'](),_0x19661d=_0x5dab7b[_0x28894a(0x282)][0x0]['data'](),[_0x2298e5,_0x3763fa]=await Promise['all']([getDocs(query(collection(db,_0x172ab1),where(_0x28894a(0x279),'==',_0x5a7fc4),where(_0x28894a(0x376),'==',_0x43120d))),getDocs(query(collection(db,_0x172ab1),where('playerId','==',_0x3579a9),where('matchId','==',_0x43120d)))]),_0x5587fe=!_0x2298e5['empty'],_0x23642a=!_0x3763fa['empty'],_0xee1de6=_0x28894a(0x25f)+(_0x5587fe?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x23642a?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x1ebb35['eloRating']||_0x28894a(0x30d))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x19661d['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x1ebb35['position']||'Unknown')+_0x28894a(0x333)+(_0x19661d['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0xee1de6,document['getElementById'](_0x28894a(0x352))[_0x28894a(0x1db)][_0x28894a(0x2e3)]=_0x28894a(0x2bb);if(_0x5587fe&&_0x23642a){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x47e27f=_0x3de4f6['approvedAt']||_0x3de4f6['matchDate']||serverTimestamp(),[_0xfeb041,_0x36e88c]=await Promise['all']([getPlayerEloAtTime(_0x5a7fc4,_0x47e27f,_0x172ab1),getPlayerEloAtTime(_0x3579a9,_0x47e27f,_0x172ab1)]),{calculateElo:_0x57041c}=await import(_0x28894a(0x2d9)),{newWinnerRating:_0x5154a0,newLoserRating:_0x34826b}=_0x57041c(_0xfeb041,_0x36e88c),_0x502db6=_0x1ebb35['position']||Number['MAX_SAFE_INTEGER'],_0x7a85d7=_0x19661d[_0x28894a(0x1d0)]||Number['MAX_SAFE_INTEGER'];let _0x5b9f28=_0x502db6,_0x1ff52f=_0x7a85d7;_0x502db6>_0x7a85d7&&(_0x5b9f28=_0x7a85d7,_0x1ff52f=_0x7a85d7+0x1);const _0x5c68cd=writeBatch(db),_0x1c9698=doc(db,_0x3ea868,_0x5a7fc4);_0x5c68cd['update'](_0x1c9698,{'eloRating':_0x5154a0,'position':_0x5b9f28,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x3ecd2a=doc(db,_0x3ea868,_0x3579a9);_0x5c68cd['update'](_0x3ecd2a,{'eloRating':_0x34826b,'position':_0x1ff52f,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x502db6>_0x7a85d7){const _0x1a5911=await getDocs(query(collection(db,_0x3ea868),where(_0x28894a(0x1d0),'>',_0x7a85d7),where('position','<',_0x502db6)));_0x1a5911['forEach'](_0x44d8ad=>{const _0x4fe863=_0x28894a,_0x3f4ddc=doc(db,_0x3ea868,_0x44d8ad['id']),_0x610f69=_0x44d8ad['data']()[_0x4fe863(0x1d0)];_0x5c68cd[_0x4fe863(0x147)](_0x3f4ddc,{'position':_0x610f69+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x5587fe){const _0x3d0e4c=doc(collection(db,_0x172ab1));_0x5c68cd['set'](_0x3d0e4c,{'playerId':_0x5a7fc4,'player':_0x3de4f6['winnerUsername'],'previousElo':_0xfeb041,'newElo':_0x5154a0,'eloChange':_0x5154a0-_0xfeb041,'opponentId':_0x3579a9,'opponent':_0x3de4f6['loserUsername'],'matchResult':_0x28894a(0x28d),'previousPosition':_0x502db6,'newPosition':_0x5b9f28,'positionChange':_0x5b9f28-_0x502db6,'matchId':_0x43120d,'timestamp':_0x47e27f,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x4f5e3b,'matchScore':_0x3de4f6[_0x28894a(0x1b6)]+'-'+_0x3de4f6['loserScore'],'mapPlayed':_0x3de4f6['mapPlayed']||_0x3de4f6['mapName']||_0x28894a(0x30d),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x23642a){const _0x7013a=doc(collection(db,_0x172ab1));_0x5c68cd['set'](_0x7013a,{'playerId':_0x3579a9,'player':_0x3de4f6['loserUsername'],'previousElo':_0x36e88c,'newElo':_0x34826b,'eloChange':_0x34826b-_0x36e88c,'opponentId':_0x5a7fc4,'opponent':_0x3de4f6['winnerUsername'],'matchResult':'loss','previousPosition':_0x7a85d7,'newPosition':_0x1ff52f,'positionChange':_0x1ff52f-_0x7a85d7,'matchId':_0x43120d,'timestamp':_0x47e27f,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x4f5e3b,'matchScore':_0x3de4f6['winnerScore']+'-'+_0x3de4f6['loserScore'],'mapPlayed':_0x3de4f6['mapPlayed']||_0x3de4f6['mapName']||_0x28894a(0x30d),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x59f6bb=_0x4f5e3b==='D1'?'approvedMatches':_0x4f5e3b==='D2'?'approvedMatchesD2':_0x28894a(0x2b4),_0x4dbd3c=doc(db,_0x59f6bb,_0x43120d);_0x5c68cd['update'](_0x4dbd3c,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x1ebb35['eloRating'],'originalLoserElo':_0x19661d['eloRating'],'originalWinnerPosition':_0x502db6,'originalLoserPosition':_0x7a85d7,'resimulatedWinnerElo':_0x5154a0,'resimulatedLoserElo':_0x34826b,'resimulatedWinnerPosition':_0x5b9f28,'resimulatedLoserPosition':_0x1ff52f}),await _0x5c68cd[_0x28894a(0x2f5)]();const _0x35ae09=(!_0x5587fe?0x1:0x0)+(!_0x23642a?0x1:0x0),_0x1f5b79=_0x502db6!==_0x5b9f28||_0x7a85d7!==_0x1ff52f;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x35ae09+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0xfeb041+''+_0x5154a0+_0x28894a(0x360)+(_0x5154a0-_0xfeb041)+'),\x20')+('Loser\x20'+_0x36e88c+''+_0x34826b+'\x20('+(_0x34826b-_0x36e88c)+_0x28894a(0x202))+(''+(_0x1f5b79?'Positions\x20updated:\x20Winner\x20'+_0x502db6+''+_0x5b9f28+',\x20Loser\x20'+_0x7a85d7+''+_0x1ff52f:_0x28894a(0x2ed))),_0x28894a(0x2b5)),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x2c98a1){console['error']('Error\x20resimulating\x20match:',_0x2c98a1),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x2c98a1[_0x28894a(0x11a)],'error');}}async function getPlayerEloAtTime(_0xc4a1e0,_0x2cfea5,_0x1eafee){const _0x36b4e4=a0_0x21b64b;try{const _0x20a235=_0x2cfea5['toDate']?_0x2cfea5[_0x36b4e4(0x120)]():new Date(_0x2cfea5),_0x34594b=query(collection(db,_0x1eafee),where(_0x36b4e4(0x279),'==',_0xc4a1e0),where(_0x36b4e4(0x15b),'<',_0x2cfea5),orderBy('timestamp','desc'),limit(0x1)),_0x2cb9b5=await getDocs(_0x34594b);if(!_0x2cb9b5['empty']){const _0x18c845=_0x2cb9b5['docs'][0x0]['data']();return console[_0x36b4e4(0x30b)](_0x36b4e4(0x2c1)+_0xc4a1e0+'\x20before\x20match:\x20'+_0x18c845[_0x36b4e4(0x2ba)]),_0x18c845['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0xc4a1e0+_0x36b4e4(0x16a)),0x4b0;}catch(_0x293e83){return console[_0x36b4e4(0x18b)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0xc4a1e0+':',_0x293e83),0x4b0;}}function openResimulateModal(){const _0x13907f=a0_0x21b64b;console['log'](_0x13907f(0x1f4));const _0x49ce57=document['getElementById']('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x49ce57);if(!_0x49ce57){console[_0x13907f(0x18b)]('Modal\x20element\x20not\x20found!');return;}_0x49ce57['style']['display']='block',_0x49ce57['style']['visibility']='visible',_0x49ce57[_0x13907f(0x1db)]['opacity']='1',_0x49ce57[_0x13907f(0x1ba)][_0x13907f(0x231)]('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x49ce57)['display']);const _0x21df94=document['getElementById']('match-details-container'),_0x5edd6b=document['getElementById'](_0x13907f(0x352)),_0x359f7c=document[_0x13907f(0x19c)]('confirm-resimulate-btn'),_0x55835b=document[_0x13907f(0x19c)]('resimulate-match-id');if(_0x21df94)_0x21df94['innerHTML']='';if(_0x5edd6b)_0x5edd6b[_0x13907f(0x11b)]='';if(_0x359f7c)_0x359f7c[_0x13907f(0x1db)]['display']='none';if(_0x55835b)_0x55835b['value']='';console['log'](_0x13907f(0x1c2));}function closeResimulateModal(){document['getElementById']('resimulate-modal')['style']['display']='none',window['pendingResimulateData']=null;}window[a0_0x21b64b(0x335)]=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x3e4e2d=a0_0x21b64b;console[_0x3e4e2d(0x30b)]('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x2bc4a0){console['error']('Error\x20loading\x20points\x20data:',_0x2bc4a0),showNotification(_0x3e4e2d(0x345)+_0x2bc4a0['message'],'error');}}function renderPointsOverview(_0x3eeea0){const _0x5225a7=a0_0x21b64b,_0x4380f7=document['getElementById']('points-overview-table-body');if(!_0x4380f7)return;if(_0x3eeea0['length']===0x0){_0x4380f7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x4380f7[_0x5225a7(0x11b)]='',_0x3eeea0['forEach'](_0x54bc7a=>{const _0x3029dd=_0x5225a7,_0x4105b9=document['createElement']('tr'),_0x559b78=_0x54bc7a['displayName']||_0x54bc7a['username']||'Unknown\x20User',_0x5d2331=_0x54bc7a[_0x3029dd(0x1bf)]||'No\x20email',_0x3e78b3=_0x54bc7a[_0x3029dd(0x212)]||0x0,_0x401a77=_0x54bc7a['lastPointsModified']?new Date(_0x54bc7a['lastPointsModified']['seconds']*0x3e8)[_0x3029dd(0x12d)]():_0x3029dd(0x325);_0x4105b9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x559b78+_0x3029dd(0x34a)+_0x5d2331+_0x3029dd(0x136)+(_0x3e78b3>0x3e8?_0x3029dd(0x20c):_0x3e78b3>0x1f4?'medium-points':'low-points')+_0x3029dd(0x2e4)+_0x3e78b3['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x401a77+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x54bc7a['id']+_0x3029dd(0x2b8)+_0x54bc7a['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4380f7[_0x3029dd(0x1bc)](_0x4105b9);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x4d8c7e=a0_0x21b64b;console[_0x4d8c7e(0x30b)]('Setting\x20up\x20points\x20action\x20buttons...');const _0x379f79=document['querySelectorAll']('.quick-edit-btn');console['log']('Found\x20'+_0x379f79['length']+'\x20quick\x20edit\x20buttons'),_0x379f79['forEach'](_0x3a3792=>{const _0x27dab3=_0x4d8c7e,_0x196043=_0x3a3792['cloneNode'](!![]);_0x3a3792[_0x27dab3(0x1ae)]['replaceChild'](_0x196043,_0x3a3792);});const _0x174c1d=document['querySelectorAll'](_0x4d8c7e(0x1f6));console['log']('Found\x20'+_0x174c1d['length']+'\x20view\x20history\x20buttons'),_0x174c1d[_0x4d8c7e(0x123)](_0x18e13b=>{const _0x15146b=_0x4d8c7e,_0x495fe3=_0x18e13b['cloneNode'](!![]);_0x18e13b[_0x15146b(0x1ae)]['replaceChild'](_0x495fe3,_0x18e13b);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x5475a7=>{_0x5475a7['addEventListener']('click',function(_0x403cd4){const _0x26b0b2=a0_0x52bb;_0x403cd4['preventDefault'](),_0x403cd4['stopPropagation']();const _0x44e0a1=this[_0x26b0b2(0x1c4)]['userId'];console[_0x26b0b2(0x30b)]('Quick\x20edit\x20clicked\x20for\x20user:',_0x44e0a1);if(!_0x44e0a1){console[_0x26b0b2(0x18b)](_0x26b0b2(0x20e));return;}this['style'][_0x26b0b2(0x146)]='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x44e0a1);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0xfc6747=>{_0xfc6747['addEventListener']('click',function(_0x402209){const _0x4fa25a=a0_0x52bb;_0x402209[_0x4fa25a(0x24d)](),_0x402209['stopPropagation']();const _0x593b0d=this['dataset'][_0x4fa25a(0x172)];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x593b0d);if(!_0x593b0d){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style'][_0x4fa25a(0x146)]='0.6',setTimeout(()=>{const _0x414b06=_0x4fa25a;this[_0x414b06(0x1db)]['opacity']='1';},0xc8),loadUserPointsHistory(_0x593b0d);});}),console[_0x4d8c7e(0x30b)](_0x4d8c7e(0x22f));}async function openQuickEditModal(_0x43bd91){const _0x4403e5=a0_0x21b64b;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x43bd91);const _0xad06d5=document['getElementById']('quick-edit-points-modal');if(!_0xad06d5){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification(_0x4403e5(0x31f),'error');return;}try{showNotification(_0x4403e5(0x272),'info');const _0x4a4688=doc(db,'userProfiles',_0x43bd91),_0x11c7cd=await getDoc(_0x4a4688);if(!_0x11c7cd['exists']()){showNotification('User\x20not\x20found',_0x4403e5(0x18b));return;}const _0x2e8d1e=_0x11c7cd[_0x4403e5(0x326)]();console['log'](_0x4403e5(0x1da),_0x2e8d1e);const _0x11beec=document['getElementById'](_0x4403e5(0x1c7)),_0x574ed6=document['getElementById']('quick-edit-display-name'),_0x175acc=document[_0x4403e5(0x19c)](_0x4403e5(0x176)),_0x2ddb81=document['getElementById'](_0x4403e5(0x369)),_0x54e77c=document['getElementById']('quick-edit-points-form');if(!_0x11beec||!_0x574ed6||!_0x175acc||!_0x2ddb81||!_0x54e77c){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x4403e5(0x331),'error');return;}_0x11beec['value']=_0x43bd91,_0x574ed6[_0x4403e5(0x259)]=_0x2e8d1e['displayName']||_0x2e8d1e['username']||'Unknown\x20User',_0x175acc['textContent']=_0x2e8d1e['email']||_0x4403e5(0x2a4),_0x2ddb81['textContent']=(_0x2e8d1e['points']||0x0)[_0x4403e5(0x18f)](),_0x54e77c['reset']();const _0x9c2219=document['getElementById']('quick-add');_0x9c2219&&(_0x9c2219[_0x4403e5(0x28b)]=!![]);_0xad06d5['classList']['add']('active'),console[_0x4403e5(0x30b)]('Modal\x20opened\x20successfully');const _0x2cce1a=document[_0x4403e5(0x19c)]('quick-points-amount');_0x2cce1a&&setTimeout(()=>_0x2cce1a['focus'](),0x64);}catch(_0x55e452){console[_0x4403e5(0x18b)]('Error\x20opening\x20quick\x20edit\x20modal:',_0x55e452),showNotification(_0x4403e5(0x28c)+_0x55e452['message'],'error');}}function closeQuickEditModal(){const _0x3624a6=a0_0x21b64b,_0x1763a7=document['getElementById'](_0x3624a6(0x26c));_0x1763a7&&_0x1763a7['classList'][_0x3624a6(0x24a)](_0x3624a6(0x29b));}async function handleQuickEditPoints(_0x3fdb81){const _0x4cad14=a0_0x21b64b;_0x3fdb81[_0x4cad14(0x24d)]();const _0x2ea156=document['getElementById']('quick-edit-user-id')['value'],_0x36794e=document['querySelector'](_0x4cad14(0x2e8))['value'],_0x4fa89f=parseInt(document[_0x4cad14(0x19c)]('quick-points-amount')['value']),_0x104692=document['getElementById']('quick-points-reason')['value']['trim']();console[_0x4cad14(0x30b)]('Processing\x20points\x20edit:',{'userId':_0x2ea156,'action':_0x36794e,'amount':_0x4fa89f,'reason':_0x104692});if(!_0x2ea156||!_0x4fa89f||_0x4fa89f<0x0){showNotification('Please\x20enter\x20valid\x20data',_0x4cad14(0x18b));return;}try{await modifyUserPoints(_0x2ea156,_0x36794e,_0x4fa89f,_0x104692),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully',_0x4cad14(0x2b5)),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x2ea156);}catch(_0x11a10b){console['error']('Error\x20updating\x20points:',_0x11a10b),showNotification(_0x4cad14(0x348)+_0x11a10b['message'],'error');}}async function searchUsersForPoints(){const _0x565c8a=a0_0x21b64b,_0x1b221b=document['getElementById'](_0x565c8a(0x256))[_0x565c8a(0x2bf)]['trim']()['toLowerCase'](),_0x11766c=document['getElementById']('user-search-results');if(!_0x1b221b||_0x1b221b[_0x565c8a(0x24b)]<0x2){_0x11766c['innerHTML']='';return;}_0x11766c['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x1ee829=collection(db,'userProfiles'),_0x12151d=await getDocs(_0x1ee829),_0x1138ac=[];_0x12151d[_0x565c8a(0x123)](_0x5c38b1=>{const _0xaa9766=_0x565c8a,_0x4fbcdc=_0x5c38b1[_0xaa9766(0x326)](),_0x577830=(_0x4fbcdc[_0xaa9766(0x23e)]||_0x4fbcdc['username']||'')[_0xaa9766(0x221)](),_0x2cd69f=(_0x4fbcdc['email']||'')[_0xaa9766(0x221)]();(_0x577830['includes'](_0x1b221b)||_0x2cd69f['includes'](_0x1b221b))&&_0x1138ac['push']({'id':_0x5c38b1['id'],..._0x4fbcdc});});if(_0x1138ac['length']===0x0){_0x11766c['innerHTML']=_0x565c8a(0x341);return;}_0x11766c['innerHTML']='',_0x1138ac['forEach'](_0xace587=>{const _0x57e364=_0x565c8a,_0x571253=document['createElement'](_0x57e364(0x1bd));_0x571253['className']='search-result-item',_0x571253['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0xace587['displayName']||_0xace587[_0x57e364(0x373)]||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0xace587['email']||_0x57e364(0x2a4))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0xace587[_0x57e364(0x212)]||0x0)[_0x57e364(0x18f)]()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x571253['addEventListener'](_0x57e364(0x18d),()=>selectUserForPoints(_0xace587)),_0x11766c['appendChild'](_0x571253);});}catch(_0x176134){console[_0x565c8a(0x18b)]('Error\x20searching\x20users:',_0x176134),_0x11766c['innerHTML']=_0x565c8a(0x1fe);}}function selectUserForPoints(_0x284de5){const _0x59b6e0=a0_0x21b64b;document['getElementById']('selected-user-name')['textContent']=_0x284de5[_0x59b6e0(0x23e)]||_0x284de5[_0x59b6e0(0x373)]||'Unknown\x20User',document['getElementById'](_0x59b6e0(0x2fc))['textContent']=(_0x284de5['points']||0x0)[_0x59b6e0(0x18f)](),document['getElementById']('selected-user-id')['value']=_0x284de5['id'],document['getElementById']('selected-user-info')['style']['display']='block',document['getElementById']('points-management-forms')['style']['display']=_0x59b6e0(0x2bb),document['getElementById']('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x4d4b38){const _0x55fdbc=a0_0x21b64b;_0x4d4b38['preventDefault']();const _0x5fa531=document[_0x55fdbc(0x19c)]('selected-user-id')['value'],_0x5f49f0=document['getElementById']('points-action')['value'],_0x9d3faf=parseInt(document['getElementById']('points-amount')['value']),_0x5a4498=document['getElementById']('points-reason')['value']['trim']();if(!_0x5fa531||!_0x9d3faf||_0x9d3faf<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x5fa531,_0x5f49f0,_0x9d3faf,_0x5a4498),document['getElementById']('modify-points-form')['reset']();const _0x4cf52e=doc(db,_0x55fdbc(0x1d6),_0x5fa531),_0x22cca7=await getDoc(_0x4cf52e);if(_0x22cca7['exists']()){const _0x33a594=_0x22cca7['data']();document[_0x55fdbc(0x19c)](_0x55fdbc(0x2fc))['textContent']=(_0x33a594['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully',_0x55fdbc(0x2b5)),loadPointsHistory();}catch(_0x2a4a8a){console['error']('Error\x20modifying\x20points:',_0x2a4a8a),showNotification(_0x55fdbc(0x35c)+_0x2a4a8a[_0x55fdbc(0x11a)],_0x55fdbc(0x18b));}}async function loadPointsHistory(){const _0x553285=a0_0x21b64b,_0x2cac20=document['getElementById'](_0x553285(0x321));if(!_0x2cac20)return;_0x2cac20['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x2d796b=collection(db,'pointsHistory'),_0x1a25a9=query(_0x2d796b,orderBy(_0x553285(0x15b),'desc'),limit(0x32)),_0x360cf7=await getDocs(_0x1a25a9);if(_0x360cf7['empty']){_0x2cac20[_0x553285(0x11b)]=_0x553285(0x31c);return;}_0x2cac20['innerHTML']='',_0x360cf7['forEach'](_0x510fca=>{const _0x81031f=_0x553285,_0x1d2224=_0x510fca['data'](),_0x3d3a72=document['createElement']('tr'),_0x5ae1bd=_0x1d2224['timestamp']?new Date(_0x1d2224['timestamp'][_0x81031f(0x26f)]*0x3e8)['toLocaleString']():_0x81031f(0x30d);let _0x2cb5bd='';switch(_0x1d2224['action']){case'add':_0x2cb5bd='Added\x20'+_0x1d2224['amount']+'\x20points';break;case'subtract':_0x2cb5bd=_0x81031f(0x29c)+_0x1d2224['amount']+'\x20points';break;case _0x81031f(0x1fa):_0x2cb5bd='Set\x20to\x20'+_0x1d2224[_0x81031f(0x379)]+'\x20points';break;default:_0x2cb5bd=_0x1d2224['action']+'\x20'+_0x1d2224['amount']+'\x20points';}_0x3d3a72['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5ae1bd+_0x81031f(0x2d7)+(_0x1d2224[_0x81031f(0x23e)]||_0x81031f(0x131))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2cb5bd+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x1d2224[_0x81031f(0x167)]+_0x81031f(0x1e4)+(_0x1d2224['previousPoints']||0x0)+'\x20\x20'+(_0x1d2224['newPoints']||0x0)+_0x81031f(0x1ac)+(_0x1d2224['reason']||'No\x20reason\x20provided')+_0x81031f(0x2d7)+(_0x1d2224['adminEmail']||_0x81031f(0x2e7))+_0x81031f(0x1ec),_0x2cac20['appendChild'](_0x3d3a72);});}catch(_0x5e5886){console['error'](_0x553285(0x20f),_0x5e5886),_0x2cac20['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x5e5886['message']+_0x553285(0x2ff);}}function filterPointsOverview(){const _0x3dbc97=a0_0x21b64b,_0x253c0f=document[_0x3dbc97(0x19c)]('points-overview-search')['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x428986=window[_0x3dbc97(0x199)]['filter'](_0x4844f0=>{const _0x99ca6b=_0x3dbc97,_0x272a8d=(_0x4844f0[_0x99ca6b(0x23e)]||_0x4844f0[_0x99ca6b(0x373)]||'')[_0x99ca6b(0x221)](),_0x4ec632=(_0x4844f0[_0x99ca6b(0x1bf)]||'')['toLowerCase']();return _0x272a8d['includes'](_0x253c0f)||_0x4ec632['includes'](_0x253c0f);});renderPointsOverview(_0x428986);}function sortPointsOverview(){const _0x464aa5=a0_0x21b64b,_0x1ebd3c=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x1eaa23=[...window[_0x464aa5(0x199)]];switch(_0x1ebd3c){case'points-desc':_0x1eaa23[_0x464aa5(0x2af)]((_0x1bcd89,_0x113021)=>(_0x113021[_0x464aa5(0x212)]||0x0)-(_0x1bcd89['points']||0x0));break;case _0x464aa5(0x2cb):_0x1eaa23[_0x464aa5(0x2af)]((_0xbc51ac,_0x153da8)=>(_0xbc51ac['points']||0x0)-(_0x153da8['points']||0x0));break;case _0x464aa5(0x209):_0x1eaa23[_0x464aa5(0x2af)]((_0x556346,_0x2f342f)=>{const _0x4e2a01=_0x464aa5,_0x36bf12=(_0x556346['displayName']||_0x556346['username']||'')['toLowerCase'](),_0x4f02ef=(_0x2f342f['displayName']||_0x2f342f[_0x4e2a01(0x373)]||'')['toLowerCase']();return _0x36bf12[_0x4e2a01(0x159)](_0x4f02ef);});break;case'name-desc':_0x1eaa23['sort']((_0x4af499,_0xae2809)=>{const _0x204ad2=_0x464aa5,_0x36a1a2=(_0x4af499[_0x204ad2(0x23e)]||_0x4af499['username']||'')['toLowerCase'](),_0xda25d0=(_0xae2809[_0x204ad2(0x23e)]||_0xae2809[_0x204ad2(0x373)]||'')['toLowerCase']();return _0xda25d0['localeCompare'](_0x36a1a2);});break;}renderPointsOverview(_0x1eaa23);}async function handleAwardItem(_0x4c893d){const _0x1ad037=a0_0x21b64b;_0x4c893d[_0x1ad037(0x24d)]();const _0x12683e=document['getElementById']('selected-user-id')['value'],_0x4e2598=document['getElementById'](_0x1ad037(0x247))['value'],_0x76cace=document['getElementById']('award-reason')['value']['trim']();if(!_0x12683e||!_0x4e2598){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x1ad037(0x18b));return;}try{showNotification('Store\x20item\x20awarded\x20successfully',_0x1ad037(0x2b5)),document['getElementById']('award-item-form')['reset']();}catch(_0x34c8c9){console['error']('Error\x20awarding\x20item:',_0x34c8c9),showNotification(_0x1ad037(0x237)+_0x34c8c9['message'],'error');}}async function loadUserPointsHistory(_0x28f2cf){const _0x5c4d20=a0_0x21b64b;try{const _0x154fce=collection(db,_0x5c4d20(0x17e)),_0x551cfb=query(_0x154fce,where('userId','==',_0x28f2cf),orderBy('timestamp',_0x5c4d20(0x249))),_0x4aead4=await getDocs(_0x551cfb);console[_0x5c4d20(0x30b)](_0x5c4d20(0x1e5)+_0x4aead4['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x28f2cf),showNotification('User\x20has\x20'+_0x4aead4['size']+'\x20points\x20history\x20entries',_0x5c4d20(0x2bc));}catch(_0x21962c){console[_0x5c4d20(0x18b)]('Error\x20loading\x20user\x20points\x20history:',_0x21962c),showNotification(_0x5c4d20(0x304),'error');}}function a0_0x52bb(_0x5f4f47,_0x2a1ca4){const _0x361aac=a0_0x4dad();return a0_0x52bb=function(_0x5434e9,_0x1e9dfb){_0x5434e9=_0x5434e9-0x118;let _0x288aa5=_0x361aac[_0x5434e9];return _0x288aa5;},a0_0x52bb(_0x5f4f47,_0x2a1ca4);}async function initializeUserPointsField(){const _0x49ef94=a0_0x21b64b;try{console[_0x49ef94(0x30b)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x29314d=collection(db,_0x49ef94(0x1d6)),_0x30dfe3=await getDocs(_0x29314d);if(_0x30dfe3[_0x49ef94(0x129)]){console[_0x49ef94(0x30b)]('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x3f5826=0x0,_0x3ff772=0x0;const _0x212eda=writeBatch(db);let _0x7e5202=0x0;return console['log'](_0x49ef94(0x1e5)+_0x30dfe3['size']+'\x20users\x20to\x20check...'),_0x30dfe3['forEach'](_0x2bfb4e=>{const _0x1a9fda=_0x49ef94,_0x9c5245=_0x2bfb4e['data']();_0x9c5245[_0x1a9fda(0x212)]===undefined||_0x9c5245[_0x1a9fda(0x212)]===null?(_0x212eda['update'](_0x2bfb4e['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x3f5826++,_0x7e5202++,console[_0x1a9fda(0x30b)]('Queued\x20'+(_0x9c5245['displayName']||_0x9c5245['username']||_0x9c5245[_0x1a9fda(0x1bf)]||'Unknown')+_0x1a9fda(0x215))):(_0x3ff772++,console['log']((_0x9c5245['displayName']||_0x9c5245[_0x1a9fda(0x373)]||_0x9c5245['email']||_0x1a9fda(0x30d))+_0x1a9fda(0x296)+_0x9c5245['points'])),_0x7e5202>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x3f5826>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x3f5826+_0x49ef94(0x1fb)),await _0x212eda['commit'](),console[_0x49ef94(0x30b)]('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x3f5826+'\x20users')):console['log'](_0x49ef94(0x372)),console[_0x49ef94(0x30b)](_0x49ef94(0x181)+_0x30dfe3[_0x49ef94(0x214)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x3f5826+_0x49ef94(0x36d)+_0x3ff772),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x3f5826+'\x20users.\x20'+_0x3ff772+_0x49ef94(0x1dc),'success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x30dfe3['size'],'usersUpdated':_0x3f5826,'usersAlreadyHadPoints':_0x3ff772};}catch(_0x5d4204){console['error'](_0x49ef94(0x268),_0x5d4204),showNotification('Error\x20initializing\x20points:\x20'+_0x5d4204['message'],'error');throw _0x5d4204;}}function addPointsMigrationButton(){const _0x2a8f94=a0_0x21b64b,_0xada269=document['getElementById'](_0x2a8f94(0x35d));if(!_0xada269)return;if(document[_0x2a8f94(0x19c)]('migrate-points-btn'))return;const _0x5069b3=document['createElement']('div');_0x5069b3['className']='migration-section',_0x5069b3['style']['marginBottom']='20px',_0x5069b3[_0x2a8f94(0x1db)]['padding']='15px',_0x5069b3['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x5069b3['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x5069b3['style']['borderRadius']='5px',_0x5069b3[_0x2a8f94(0x11b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x17404d=_0xada269[_0x2a8f94(0x295)]('.section-header');_0x17404d&&_0x17404d[_0x2a8f94(0x121)]('afterend',_0x5069b3),document['getElementById']('migrate-points-btn')[_0x2a8f94(0x275)]('click',async function(){const _0x1a2f3=_0x2a8f94;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this[_0x1a2f3(0x11b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{_0x5069b3['style']['display']='none';},0xbb8);}catch(_0x3b7c3d){this['innerHTML']=_0x1a2f3(0x36e),this['disabled']=![];}}});}function setupManagePointsSection(){const _0x53a914=a0_0x21b64b;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x3dd8e8=document['getElementById']('points-user-search');_0x3dd8e8&&_0x3dd8e8['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x423e3a=document['getElementById']('modify-points-form');_0x423e3a&&_0x423e3a[_0x53a914(0x275)]('submit',handleModifyPoints);const _0x349d8c=document['getElementById'](_0x53a914(0x227));_0x349d8c&&_0x349d8c['addEventListener']('submit',handleAwardItem);const _0x2e57b3=document[_0x53a914(0x19c)]('points-overview-search');_0x2e57b3&&_0x2e57b3['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x308192=document['getElementById']('points-sort-order');_0x308192&&_0x308192['addEventListener'](_0x53a914(0x216),sortPointsOverview);const _0x4c70fe=document['getElementById'](_0x53a914(0x2ca));_0x4c70fe&&_0x4c70fe[_0x53a914(0x275)](_0x53a914(0x18d),loadPointsOverview);const _0x1696cb=document['getElementById'](_0x53a914(0x13f));_0x1696cb&&_0x1696cb['addEventListener'](_0x53a914(0x18d),async()=>{const _0xcf07de=_0x53a914;confirm(_0xcf07de(0x26a))&&(_0x1696cb['disabled']=!![],_0x1696cb[_0xcf07de(0x11b)]=_0xcf07de(0x1d2),await _0x67efc2(),_0x1696cb['disabled']=![],_0x1696cb['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x36d901=document[_0x53a914(0x19c)]('award-all-pilots-btn');_0x36d901&&_0x36d901['addEventListener']('click',awardPointsToAllPilots);async function _0x67efc2(){const _0x1d2ab7=_0x53a914;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x531f8f={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x15e60c=0x0,_0x183e7c=0x0,_0x1ac412=0x0,_0x39cab2=0x0,_0x1695aa=0x0,_0x3b92b5=0x0;const _0x31e36e=new Set(),_0xc2592=collection(db,'pointsHistory'),_0x59986e=query(_0xc2592,where('reason','>=','Bulk\x20award:'),where('reason','<=',_0x1d2ab7(0x180))),_0x171ed8=await getDocs(_0x59986e);_0x171ed8['forEach'](_0x27926c=>{const _0x231cb8=_0x1d2ab7,_0x273286=_0x27926c[_0x231cb8(0x326)](),_0x2e31f6=_0x273286[_0x231cb8(0x16d)]||'',_0x11ad3=_0x2e31f6[_0x231cb8(0x1f8)](/Match ID: ([a-zA-Z0-9]+)/);_0x11ad3&&_0x11ad3[0x1]&&_0x31e36e['add'](_0x11ad3[0x1]);}),console[_0x1d2ab7(0x30b)]('Found\x20'+_0x31e36e['size']+_0x1d2ab7(0x1c9));const [_0x443ec6,_0x1b1f58,_0x4e5ae5]=await Promise[_0x1d2ab7(0x2ee)]([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,_0x1d2ab7(0x1df))),getDocs(collection(db,_0x1d2ab7(0x2b4)))]),_0x3e0180=_0x443ec6['size']+_0x1b1f58['size']+_0x4e5ae5['size'];showNotification(_0x1d2ab7(0x1e5)+_0x3e0180+_0x1d2ab7(0x34f),'info');const _0x553dbc=async(_0x63d705,_0x11fc63)=>{const _0x48b7ce=_0x1d2ab7;let _0x4a2c5d=writeBatch(db);const _0x101d17=[];let _0x1ce002=0x0;for(const _0x4438bb of _0x63d705[_0x48b7ce(0x282)]){try{if(_0x31e36e['has'](_0x4438bb['id'])){if(_0x11fc63==='D1')_0x3b92b5++;if(_0x11fc63==='D2')_0x3b92b5++;if(_0x11fc63==='D3')_0x3b92b5++;continue;}const _0x203a15=_0x4438bb['data'](),_0x129dfd=_0x203a15['subgameType']||_0x48b7ce(0x269),_0x2b6f34=_0x531f8f[_0x129dfd]||0xa;let _0x3749ea=_0x203a15['winnerId'];if(!_0x3749ea&&_0x203a15['winnerUsername']){const [_0x2fbc26,_0x77d18c,_0x22b92e]=await Promise[_0x48b7ce(0x2ee)]([getDocs(query(collection(db,'players'),where('username','==',_0x203a15[_0x48b7ce(0x151)]))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x203a15['winnerUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x203a15['winnerUsername'])))]);if(!_0x2fbc26['empty'])_0x3749ea=_0x2fbc26['docs'][0x0]['id'];else{if(!_0x77d18c[_0x48b7ce(0x129)])_0x3749ea=_0x77d18c['docs'][0x0]['id'];else{if(!_0x22b92e['empty'])_0x3749ea=_0x22b92e['docs'][0x0]['id'];}}}let _0x361123=_0x203a15['loserId'];if(!_0x361123&&_0x203a15['loserUsername']){const [_0x3bd8f6,_0x27ab09,_0x22d768]=await Promise['all']([getDocs(query(collection(db,_0x48b7ce(0x20d)),where(_0x48b7ce(0x373),'==',_0x203a15['loserUsername']))),getDocs(query(collection(db,_0x48b7ce(0x141)),where('username','==',_0x203a15['loserUsername']))),getDocs(query(collection(db,'playersD3'),where(_0x48b7ce(0x373),'==',_0x203a15[_0x48b7ce(0x128)])))]);if(!_0x3bd8f6[_0x48b7ce(0x129)])_0x361123=_0x3bd8f6['docs'][0x0]['id'];else{if(!_0x27ab09[_0x48b7ce(0x129)])_0x361123=_0x27ab09[_0x48b7ce(0x282)][0x0]['id'];else{if(!_0x22d768[_0x48b7ce(0x129)])_0x361123=_0x22d768[_0x48b7ce(0x282)][0x0]['id'];}}}if(_0x3749ea&&_0x361123){const _0x328fca=doc(db,_0x48b7ce(0x1d6),_0x3749ea),_0x14152c=doc(db,_0x48b7ce(0x1d6),_0x361123),[_0x493410,_0x4cff38]=await Promise['all']([getDoc(_0x328fca),getDoc(_0x14152c)]);if(_0x493410['exists']()){const _0x1a1cad=_0x493410[_0x48b7ce(0x326)](),_0x4aaa7e=_0x1a1cad['points']||0x0;_0x4a2c5d['update'](_0x328fca,{'points':_0x4aaa7e+_0x2b6f34,'lastPointsModified':serverTimestamp()}),_0x101d17[_0x48b7ce(0x29a)]({'userId':_0x3749ea,'userEmail':_0x1a1cad['email']||'unknown','displayName':_0x1a1cad['displayName']||_0x203a15['winnerUsername']||'Unknown\x20User','action':_0x48b7ce(0x231),'amount':_0x2b6f34,'previousPoints':_0x4aaa7e,'newPoints':_0x4aaa7e+_0x2b6f34,'reason':'Bulk\x20award:\x20'+_0x129dfd+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x4438bb['id']+'\x20-\x20'+_0x11fc63,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}if(_0x4cff38['exists']()){const _0x2e98fb=_0x4cff38[_0x48b7ce(0x326)](),_0x2c4f4f=_0x2e98fb['points']||0x0;_0x4a2c5d['update'](_0x14152c,{'points':_0x2c4f4f+_0x2b6f34,'lastPointsModified':serverTimestamp()}),_0x101d17['push']({'userId':_0x361123,'userEmail':_0x2e98fb['email']||_0x48b7ce(0x190),'displayName':_0x2e98fb[_0x48b7ce(0x23e)]||_0x203a15[_0x48b7ce(0x128)]||_0x48b7ce(0x131),'action':'add','amount':_0x2b6f34,'previousPoints':_0x2c4f4f,'newPoints':_0x2c4f4f+_0x2b6f34,'reason':_0x48b7ce(0x314)+_0x129dfd+_0x48b7ce(0x2d8)+_0x4438bb['id']+_0x48b7ce(0x1af)+_0x11fc63,'adminEmail':auth['currentUser'][_0x48b7ce(0x1bf)],'timestamp':serverTimestamp()});}_0x39cab2+=_0x2b6f34*0x2,_0x1ce002+=0x2,_0x31e36e[_0x48b7ce(0x231)](_0x4438bb['id']);if(_0x1ce002>=0x190){await _0x4a2c5d['commit']();for(const _0x34e320 of _0x101d17){await addDoc(collection(db,_0x48b7ce(0x17e)),_0x34e320);}_0x4a2c5d=writeBatch(db),_0x1ce002=0x0,_0x101d17['length']=0x0;}}}catch(_0x37fb71){console['error']('Error\x20processing\x20'+_0x11fc63+'\x20match\x20'+_0x4438bb['id']+':',_0x37fb71),_0x1695aa++;}}if(_0x1ce002>0x0){await _0x4a2c5d[_0x48b7ce(0x2f5)]();for(const _0x32daf0 of _0x101d17){await addDoc(collection(db,_0x48b7ce(0x17e)),_0x32daf0);}}return{'processed':_0x11fc63==='D1'?_0x15e60c:_0x11fc63==='D2'?_0x183e7c:_0x1ac412};};await _0x553dbc(_0x443ec6,'D1'),await _0x553dbc(_0x1b1f58,'D2'),await _0x553dbc(_0x4e5ae5,'D3'),showNotification(_0x1d2ab7(0x24c)+_0x15e60c+_0x1d2ab7(0x1c8)+_0x183e7c+'\x20D2\x20matches,\x20'+_0x1ac412+'\x20D3\x20matches.\x20'+(_0x1d2ab7(0x19a)+_0x39cab2+_0x1d2ab7(0x1d9)+_0x3b92b5+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x1695aa),'success'),document['getElementById'](_0x1d2ab7(0x32e))&&loadPointsOverview();}catch(_0x1faf17){console['error']('Error\x20in\x20bulk\x20award\x20points:',_0x1faf17),showNotification(_0x1d2ab7(0x1ef)+_0x1faf17['message'],_0x1d2ab7(0x18b));}}const _0x5293d2=document['getElementById']('quick-edit-points-modal');if(_0x5293d2){console['log'](_0x53a914(0x26e));const _0x450d63=_0x5293d2['querySelector'](_0x53a914(0x238));_0x450d63?_0x450d63['addEventListener']('click',function(){const _0x4b8a22=_0x53a914;console[_0x4b8a22(0x30b)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console[_0x53a914(0x225)]('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x355d86=document['getElementById']('cancel-quick-edit');_0x355d86?_0x355d86['addEventListener']('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console[_0x53a914(0x225)]('Cancel\x20button\x20not\x20found');const _0x4b318b=document['getElementById'](_0x53a914(0x1e2));_0x4b318b?_0x4b318b['addEventListener'](_0x53a914(0x175),function(_0x4e50b9){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x4e50b9);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x5293d2['addEventListener']('click',function(_0x421e61){const _0x48a386=_0x53a914;_0x421e61['target']===_0x5293d2&&(console[_0x48a386(0x30b)](_0x48a386(0x12f)),closeQuickEditModal());});}else console[_0x53a914(0x18b)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x499982=a0_0x21b64b;try{const _0x19563d=parseInt(prompt(_0x499982(0x300),'10'));if(!_0x19563d||isNaN(_0x19563d)){showNotification(_0x499982(0x32d),'error');return;}if(!confirm('This\x20will\x20award\x20'+_0x19563d+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification('Starting\x20points\x20award\x20process...','info');const [_0x305b6f,_0x584878,_0xb25197]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x499982(0x350)))]);console['log'](_0x499982(0x1e5)+_0x305b6f['size']+'\x20D1\x20pilots,\x20'+_0x584878['size']+'\x20D2\x20pilots,\x20'+_0xb25197['size']+_0x499982(0x27a));const _0x1a470d=_0x305b6f[_0x499982(0x214)]+_0x584878['size']+_0xb25197['size'],_0x4161ac=new Map();_0x305b6f['forEach'](_0x370728=>{const _0x55ea60=_0x370728['data']();_0x4161ac['set'](_0x370728['id'],{'username':_0x55ea60['username'],'ladder':'D1'});}),_0x584878['forEach'](_0xc645bd=>{const _0xcfdabf=_0x499982,_0x3178ed=_0xc645bd['data']();_0x4161ac[_0xcfdabf(0x1fa)](_0xc645bd['id'],{'username':_0x3178ed['username'],'ladder':'D2'});}),_0xb25197['forEach'](_0x1cc641=>{const _0x110dfe=_0x499982,_0x382d9c=_0x1cc641[_0x110dfe(0x326)]();_0x4161ac['set'](_0x1cc641['id'],{'username':_0x382d9c['username'],'ladder':'D3'});}),console['log'](_0x499982(0x1e5)+_0x4161ac[_0x499982(0x214)]+_0x499982(0x2a5));let _0x53cc9a=0x0,_0x18d432=0x0,_0x45b2f8=0x0;const _0x412010=Array[_0x499982(0x2f6)](_0x4161ac['keys']()),_0x3d1bc1=0x190;for(let _0x2a1545=0x0;_0x2a1545<_0x412010['length'];_0x2a1545+=_0x3d1bc1){const _0x400046=writeBatch(db),_0x404dc6=[],_0x35e936=_0x412010['slice'](_0x2a1545,_0x2a1545+_0x3d1bc1),_0x8bf23f=await Promise[_0x499982(0x2ee)](_0x35e936['map'](_0x4f771b=>getDoc(doc(db,_0x499982(0x1d6),_0x4f771b))));for(let _0x32f11e=0x0;_0x32f11e<_0x35e936['length'];_0x32f11e++){try{const _0x2fab37=_0x35e936[_0x32f11e],_0x593417=_0x4161ac['get'](_0x2fab37),_0x5f5044=_0x8bf23f[_0x32f11e];if(_0x5f5044['exists']()){const _0x3c84f4=_0x5f5044['data'](),_0x468655=_0x3c84f4['points']||0x0,_0x11be49=_0x468655+_0x19563d;_0x400046[_0x499982(0x147)](doc(db,'userProfiles',_0x2fab37),{'points':_0x11be49,'lastPointsModified':serverTimestamp()}),_0x404dc6[_0x499982(0x29a)]({'userId':_0x2fab37,'userEmail':_0x3c84f4['email']||'unknown','displayName':_0x3c84f4['displayName']||_0x593417['username']||'Unknown\x20User','action':'add','amount':_0x19563d,'previousPoints':_0x468655,'newPoints':_0x11be49,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x593417[_0x499982(0x155)]+')','adminEmail':auth['currentUser'][_0x499982(0x1bf)],'timestamp':serverTimestamp()}),_0x18d432+=_0x19563d,_0x53cc9a++;}else _0x45b2f8++,console[_0x499982(0x225)](_0x499982(0x21e)+_0x593417['username']+'\x20('+_0x2fab37+')');}catch(_0x58338c){_0x45b2f8++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x58338c);}}await _0x400046[_0x499982(0x2f5)]();for(const _0x8e0863 of _0x404dc6){await addDoc(collection(db,'pointsHistory'),_0x8e0863);}showNotification('Processed\x20'+_0x53cc9a+'/'+_0x1a470d+'\x20pilots...','info');}showNotification('Complete!\x20Awarded\x20'+_0x18d432+'\x20points\x20to\x20'+_0x53cc9a+_0x499982(0x370)+_0x45b2f8,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x236941){console['error'](_0x499982(0x222),_0x236941),showNotification(_0x499982(0x1a7)+_0x236941['message'],'error');}}function setupManageRibbonsSection(){const _0x127564=a0_0x21b64b;console[_0x127564(0x30b)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x31844f=document['getElementById']('ribbon-user-search');_0x31844f&&_0x31844f[_0x127564(0x275)]('input',debounce(searchRibbonUser,0x12c));const _0x988ca=document['getElementById']('search-ribbon-user-btn');_0x988ca&&_0x988ca[_0x127564(0x275)](_0x127564(0x18d),searchRibbonUser);const _0x5b38bb=document[_0x127564(0x19c)]('add-ribbon-form');_0x5b38bb&&_0x5b38bb['addEventListener'](_0x127564(0x175),addRibbon),_0x31844f&&_0x31844f['addEventListener']('keypress',function(_0x97d159){const _0x42fb1a=_0x127564;_0x97d159['key']===_0x42fb1a(0x234)&&(_0x97d159['preventDefault'](),searchRibbonUser());}),console[_0x127564(0x30b)](_0x127564(0x13a));}async function modifyUserPoints(_0x557ebb,_0x32a711,_0x187fd9,_0x1eb1f1=''){const _0x167810=a0_0x21b64b,_0x228b62=doc(db,'userProfiles',_0x557ebb),_0x2f9fdc=await getDoc(_0x228b62);if(!_0x2f9fdc['exists']())throw new Error('User\x20not\x20found');const _0x367223=_0x2f9fdc['data'](),_0x44b037=_0x367223[_0x167810(0x212)]!==undefined?_0x367223['points']:0x0;_0x367223[_0x167810(0x212)]===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x367223[_0x167810(0x23e)]||_0x367223['email']||'Unknown')),await updateDoc(_0x228b62,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x25dada=_0x44b037;switch(_0x32a711){case'add':_0x25dada=_0x44b037+_0x187fd9;break;case'subtract':_0x25dada=Math['max'](0x0,_0x44b037-_0x187fd9);break;case'set':_0x25dada=_0x187fd9;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x228b62,{'points':_0x25dada,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x557ebb,'userEmail':_0x367223[_0x167810(0x1bf)]||'unknown','displayName':_0x367223['displayName']||_0x367223['username']||'Unknown\x20User','action':_0x32a711,'amount':_0x187fd9,'previousPoints':_0x44b037,'newPoints':_0x25dada,'reason':_0x1eb1f1,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x29a0ea=a0_0x21b64b,_0x1be9be=document['getElementById']('points-overview-table-body');if(!_0x1be9be)return;_0x1be9be['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x1764e5=collection(db,'userProfiles'),_0x24f0a5=await getDocs(_0x1764e5);if(_0x24f0a5['empty']){_0x1be9be[_0x29a0ea(0x11b)]=_0x29a0ea(0x28f);return;}const _0x3b57f5=[];let _0x33f371=0x0;_0x24f0a5[_0x29a0ea(0x123)](_0x5aee56=>{const _0x1a18f6=_0x29a0ea,_0x340dcb=_0x5aee56['data'](),_0x304ada=_0x340dcb['points']!==undefined?_0x340dcb['points']:0x0;_0x340dcb['points']===undefined&&_0x33f371++,_0x3b57f5[_0x1a18f6(0x29a)]({'id':_0x5aee56['id'],..._0x340dcb,'points':_0x304ada});}),_0x33f371>0x0&&(console['log']('Found\x20'+_0x33f371+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x33f371+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x3b57f5['sort']((_0x34a52d,_0x31a63a)=>(_0x31a63a['points']||0x0)-(_0x34a52d['points']||0x0)),window[_0x29a0ea(0x199)]=_0x3b57f5,renderPointsOverview(_0x3b57f5);}catch(_0x546574){console['error']('Error\x20loading\x20points\x20overview:',_0x546574),_0x1be9be['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x546574['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x93e400=a0_0x21b64b,_0x25daed=document['getElementById']('ribbons-overview-table-body');if(!_0x25daed)return;_0x25daed['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x4438bc,_0x366985,_0x33f5ff]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x25daed['innerHTML']='';const _0x24f5fb=(_0x92216e,_0x55af9b)=>{const _0x379c8e=a0_0x52bb;_0x92216e[_0x379c8e(0x123)](_0xe7eeae=>{const _0x111cb9=_0x379c8e,_0x246ee8=_0xe7eeae[_0x111cb9(0x326)](),_0x1ae982=_0x246ee8['ribbons']||{},_0xf09163=Object['keys'](_0x1ae982)['length'],_0x200800=document['createElement']('tr');_0x200800['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x246ee8['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x55af9b['toLowerCase']()+'\x22>'+_0x55af9b+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xf09163+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x246ee8[_0x111cb9(0x293)]?new Date(_0x246ee8['lastUpdated'][_0x111cb9(0x26f)]*0x3e8)['toLocaleDateString']():'Unknown')+_0x111cb9(0x31d)+_0x246ee8['username']+'\x22\x20data-ladder=\x22'+_0x55af9b+_0x111cb9(0x218),_0x25daed['appendChild'](_0x200800);});};_0x24f5fb(_0x4438bc,'D1'),_0x24f5fb(_0x366985,'D2'),_0x24f5fb(_0x33f5ff,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x162dd4=>{_0x162dd4['addEventListener']('click',function(){const _0x3f7722=a0_0x52bb,_0x1d369a=this['dataset']['username'],_0xc364c8=this[_0x3f7722(0x1c4)][_0x3f7722(0x155)];editUserRibbons(_0x1d369a,_0xc364c8);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully',_0x93e400(0x2b5));}catch(_0x3d4acf){console['error'](_0x93e400(0x2a1),_0x3d4acf),_0x25daed['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification(_0x93e400(0x323),'error');}}async function searchRibbonUser(){const _0x1a79eb=a0_0x21b64b,_0x39b2b8=document[_0x1a79eb(0x19c)](_0x1a79eb(0x33b))[_0x1a79eb(0x2bf)]['trim']();if(!_0x39b2b8){showNotification(_0x1a79eb(0x338),'error');return;}try{const [_0x3e6cee,_0x4e9fb9,_0x2bbb8c]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x39b2b8)),getDoc(doc(db,'playerRibbonsD2',_0x39b2b8)),getDoc(doc(db,_0x1a79eb(0x284),_0x39b2b8))]);let _0x8b357d=null,_0x381426=null;if(_0x3e6cee['exists']())_0x8b357d='D1',_0x381426=_0x3e6cee['data']();else{if(_0x4e9fb9['exists']())_0x8b357d='D2',_0x381426=_0x4e9fb9[_0x1a79eb(0x326)]();else _0x2bbb8c['exists']()&&(_0x8b357d='D3',_0x381426=_0x2bbb8c['data']());}_0x8b357d?(document['getElementById'](_0x1a79eb(0x204))['textContent']=_0x39b2b8,document[_0x1a79eb(0x19c)](_0x1a79eb(0x35b))['value']=_0x39b2b8,document['getElementById']('ribbon-target-ladder')[_0x1a79eb(0x2bf)]=_0x8b357d,document['getElementById'](_0x1a79eb(0x342))['style']['display']=_0x1a79eb(0x2bb),displayCurrentRibbons(_0x381426['ribbons']||{}),showNotification('Found\x20'+_0x39b2b8+_0x1a79eb(0x17d)+_0x8b357d+'\x20ladder',_0x1a79eb(0x2b5))):showNotification(_0x1a79eb(0x1cf)+_0x39b2b8+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x9de520){console['error']('Error\x20searching\x20user:',_0x9de520),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x1bebb1){const _0x5d3db4=a0_0x21b64b,_0x5127f8=document[_0x5d3db4(0x19c)]('current-ribbons-list');if(!_0x5127f8)return;_0x5127f8['innerHTML']='';if(Object[_0x5d3db4(0x17c)](_0x1bebb1)['length']===0x0){_0x5127f8['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0x1bebb1)['forEach'](([_0x2a8612,_0x4f0e5d])=>{const _0x34a270=_0x5d3db4,_0x498e0c=document['createElement'](_0x34a270(0x1bd));_0x498e0c[_0x34a270(0x2e5)]='ribbon-item',_0x498e0c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x2a8612+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x4f0e5d[_0x34a270(0x306)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x4f0e5d['awardedAt']?new Date(_0x4f0e5d['awardedAt'][_0x34a270(0x26f)]*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x2a8612+_0x34a270(0x137),_0x5127f8['appendChild'](_0x498e0c);}),document[_0x5d3db4(0x236)]('.remove-ribbon-btn')['forEach'](_0x1e1072=>{const _0x32b068=_0x5d3db4;_0x1e1072[_0x32b068(0x275)]('click',function(){const _0x1427ee=this['dataset']['ribbon'];removeRibbon(_0x1427ee);});});}async function addRibbon(_0x263102){const _0xe03c39=a0_0x21b64b;_0x263102['preventDefault']();const _0xf15222=document['getElementById']('ribbon-target-user')['value'],_0x12ae57=document['getElementById'](_0xe03c39(0x287))['value'],_0x39223c=document[_0xe03c39(0x19c)]('ribbon-type-select')['value'],_0xc68121=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0xf15222||!_0x12ae57||!_0x39223c||!_0xc68121){showNotification(_0xe03c39(0x144),_0xe03c39(0x18b));return;}try{const _0xfeb444=_0xe03c39(0x168)+(_0x12ae57==='D1'?'':_0x12ae57),_0x18b7b1=doc(db,_0xfeb444,_0xf15222),_0x47244e=await getDoc(_0x18b7b1),_0x579f31=_0x47244e['exists']()?_0x47244e['data']()['ribbons']||{}:{};_0x579f31[_0x39223c]={'level':_0xc68121,'awardedAt':serverTimestamp()},await setDoc(_0x18b7b1,{'username':_0xf15222,'ladder':_0x12ae57,'ribbons':_0x579f31,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x39223c+_0xe03c39(0x2ab)+_0xc68121+'\x20to\x20'+_0xf15222,'success'),displayCurrentRibbons(_0x579f31),document['getElementById']('ribbon-type-select')['value']='',document['getElementById']('ribbon-level')[_0xe03c39(0x2bf)]='1';}catch(_0x5f191f){console['error'](_0xe03c39(0x161),_0x5f191f),showNotification('Error\x20adding\x20ribbon','error');}}function a0_0x4dad(){const _0x56ca3e=['Loading...','mapPlayed','manage-highlights','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','matches-start-date','Error:\x20','32wjCtqm','Error\x20demoting\x20player:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','Create\x20New\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','elo-history-search','parentNode','\x20-\x20','Error\x20opening\x20assign\x20trophy\x20modal:','highlights','demotion','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','.remove-role-btn','input[name=\x22set-elo-ladder\x22]:checked','winnerScore','promotion','articles','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','classList','TestMap','appendChild','div','createdAt','email','matchInfo','videoId','Modal\x20setup\x20complete','Deleting\x20match\x20','dataset','article-modal-title','.loading-cell','quick-edit-user-id','\x20D1\x20matches,\x20','\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded','articles-table-body','promotedBy','bind','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','\x20<span\x20class=\x22user-source\x22>(','User\x20','position','role-color','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...','\x20to\x20','history-type-filter','#create-test-match-form','userProfiles','Error\x20deleting\x20article:','approvedMatches','\x20points.\x20Skipped\x20','User\x20data\x20loaded:','style','\x20users\x20already\x20had\x20points.','highlight-match-info-container','Friday','approvedMatchesD2','Create\x20Article','Saturday','quick-edit-points-form','Error\x20fetching\x20matches\x20for\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Found\x20','5JSzWGy','Emerald','Match\x20highlight\x20button\x20clicked','pending-count','demotedBy','daysSinceMatch','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Bronze','Non-Participants','Error\x20in\x20bulk\x20award\x20process:\x20','toString','apply-matches-filters','currentUser','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','openResimulateModal\x20called!','loserName','.view-history-btn','Closing\x20create\x20test\x20match\x20modal','match','176crSLye','set','\x20users...','DOMContentLoaded','delete-match-confirm-modal','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','Error\x20adding\x20player:\x20','Modal\x20should\x20now\x20be\x20visible','edit-elo',').\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','current-ribbon-user','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','reset','demote-username','Highlight\x20created\x20successfully!','name-asc','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','replaceChild','high-points','players','No\x20user\x20ID\x20found\x20on\x20button','Error\x20loading\x20points\x20history:','activity','prototype','points','demoLink','size','\x20for\x20points\x20initialization','change','Demoting\x20player\x20to\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','input[name=\x22test-match-ladder\x22]','edit-match-loser-score','trim','body','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>','No\x20user\x20profile\x20found\x20for\x20pilot\x20','eloHistoryD2','D1\x20Players','toLowerCase','Error\x20in\x20award\x20points\x20to\x20all\x20pilots:','create-test-match-btn','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','warn','values','award-item-form','highlight-match-info','highlight-match-link-container','Failed\x20to\x20delete\x20trophy:\x20','Won','playerProfileUrl','highlight-loser-name','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','Points\x20action\x20buttons\x20setup\x20complete','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','add','.no-results','Admin\x20Adjustment','Enter','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','querySelectorAll','Failed\x20to\x20award\x20item:\x20','.close-btn','Match\x20Highlight','input[name=\x22demote-ladder\x22]:checked','common','TestLoser',',\x20giving\x20default\x20access','displayName','Thursday','destroy','Adding\x20\x22active\x22\x20class\x20to\x20modal.','inactive-players-table-body','Error\x20loading\x20trophy\x20definitions:','Unranked','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','highlight-map-container','store-item-select','Failed\x20to\x20delete\x20article:\x20','desc','remove','length','Completed!\x20Processed\x20','preventDefault','assign-trophy-image','Article\x20not\x20found','roleAssignedAt','achievement','sendPromotionNotification','player','\x20vs\x20','779468FMtHXc','points-user-search','621610MIPkcQ','notification\x20','textContent','Error\x20loading\x20users:','highlight-map-creator','then','edit-match-loser','highlight-modal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','Error\x20removing\x20role:','data-ladder','role','1200','.view-player-btn','Error\x20resolving\x20username\x20for\x20','userAllowedTabs','Match\x20not\x20found','Error\x20initializing\x20points\x20field:','Standard','This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?','getRankName','quick-edit-points-modal','apply','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','seconds','type','replace','Loading\x20user\x20data...','highlight-match-date-container','mapCreator','addEventListener','rejected-count','Username\x20is\x20missing','admin','playerId','\x20D3\x20pilots','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','trophyDefinitions','elo','achievementImageUrl','Searching\x20for\x20player\x20in\x20','promote-form','error-state','docs','pendingResimulateData','playerRibbonsD3','Inactive\x20players\x20section\x20initialized','user-search','ribbon-target-ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','map','highlight-description-container','checked','Failed\x20to\x20load\x20user\x20data:\x20','win','edit-highlight-playerProfileUrl-input','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','Simple\x20test\x20match\x20created\x20by\x20admin\x20','Updating\x20role\x20for\x20','approvedAt','lastUpdated','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22','querySelector','\x20already\x20has\x20points:\x20','result','fromDate','currentTarget','push','active','Subtracted\x20','loading','bar','Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM','lastMatch','Error\x20loading\x20ribbons:','empty-state','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','No\x20email','\x20unique\x20pilots\x20across\x20all\x20ladders','firstVisible','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','catch','Please\x20enter\x20valid\x20username\x20and\x20ELO','\x20Level\x20','matches-page-indicator','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#C0C0C0','sort','input[name=\x22assign-ladder\x22]:checked','ribbons','lastVisible','Found\x20specific\x20role:\x20','approvedMatchesD3','success','.sidebar-nav\x20.nav-item[data-section=\x22','Error\x20loading\x20dashboard:','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','achievementPlayer','newElo','block','info','137613pgKLls','edit-match-map','value','stopPropagation','Found\x20ELO\x20history\x20for\x20player\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','d1-prev-page','Setting\x20up\x20matches\x20action\x20buttons...','highlight-modal-title','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','Highlight\x20deleted\x20successfully','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','refresh-points-overview','points-asc','#highlight-modal\x20.close-btn','includes','no-results','#users-table-body\x20tr','Error\x20assigning\x20trophy:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','manage-articles','#players-table-body\x20tr','matches-end-date','create-test-match-modal','8988voUapd','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20','./ladderalgorithm.js','manage-matches','setAttribute','rankDistribution','YouTube\x20Video\x20ID\x20(Optional)','Trophy\x20not\x20found','assign-trophy-title','confirm-resimulate-btn','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','elo-history-table-body','display','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','className','Create\x20test\x20match\x20modal\x20setup\x20complete','Unknown\x20Admin','input[name=\x22quick-action\x22]:checked','trophy-name','src','contains','Article\x20deleted\x20successfully','No\x20position\x20changes\x20needed.','all','trophy-rarity','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','winnerComment','load-inactive-players-data','input','previousElo','commit','from','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','loserScore','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22','selected-user-points','article-modal','create-test-match-form','</td></tr>','Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','RejectedD3','trophy-id','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','Failed\x20to\x20load\x20user\x20history','add-player-form','level','N/A','highlight-achievement-type','edit-player-modal','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','log','negative-change','Unknown','cloneNode','user-roles-section','mapVersion','setHours','.edit-btn','\x22\x20awarded\x20to\x20','Bulk\x20award:\x20','Failed\x20to\x20send\x20Discord\x20notification:','highlight-loser-score','highlight-video-id','matches-prev-page','Opening\x20create\x20test\x20match\x20modal','.ladder-switch\x20input[value=\x22D1\x22]','login.html','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','edit-highlight-mapVersion-input','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','eloHistory','points-history-table-body','assign-trophy-modal','Error\x20loading\x20ribbons\x20data','Table\x20row\x20for\x20user\x20','Never','data','getAttribute','startDate','ref','none','highlight-players-container','Error\x20loading\x20articles:','Invalid\x20points\x20amount','points-overview-table-body','Load\x20articles\x20data\x20clicked','Sidebar\x20navigation\x20initialized\x20with\x20permissions','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','highlight-id','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','resimulateMatch','\x27\x20has\x20permissions:','toISOString','Please\x20enter\x20a\x20username','Error\x20removing\x20ribbon','Error\x20creating\x20rank\x20distribution\x20chart:','ribbon-user-search','manage-levels-ribbons','Switched\x20to\x20','Error','required','Error\x20saving\x20highlight:','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','user-ribbon-management','inactive-players','createElement','Failed\x20to\x20load\x20points\x20data:\x20','eloHistoryD3','edit-username','Failed\x20to\x20update\x20points:\x20','Demotion','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','\x20ladder','return\x20(function()\x20','\x20total\x20matches\x20across\x20all\x20ladders','playersD3','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','validation-results-container','Load\x20users\x20data\x20clicked','#808080','#e0e0e0','roleAssignedBy','30591tGTSkJ','5181gicxBq','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','match-count','ribbon-target-user','Failed\x20to\x20modify\x20points:\x20','manage-points','elo-history','Loaded\x20','\x20(+','Form\x20elements\x20are\x20missing','load-users-data','RejectedD1','article-author','page','searchTerm','demote-ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','quick-edit-current-points','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','-prev-page','data-section','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','./promotions.js','\x20pilots.\x20Errors:\x20','target','No\x20users\x20needed\x20points\x20field\x20initialization','username','Create\x20test\x20match\x20modal\x20not\x20found','assign-trophy-form','matchId','rank-distribution-chart','non-participants','amount','load-elo-history-data','description','Role\x20removed','manage-players','message','innerHTML','edit-match-ladder','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','Player\x20not\x20found\x20in\x20','highlight-match-link','toDate','insertAdjacentElement','edit-match-loser-comment','forEach','matchDate','Gold','rarity','positive-change','loserUsername','empty','Featured\x20Creator','trophy-modal','TestWinner','toLocaleDateString','highlight-achievement-player','Modal\x20background\x20clicked','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Unknown\x20User','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','fa-exclamation-triangle','Modal\x20cancel\x20button\x20clicked','.delete-article-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Match\x20deleted\x20successfully','edit-match-id','Manage\x20Ribbons\x20section\x20initialized','Error\x20in\x20demotion:','Failed\x20to\x20delete\x20match:\x20','roleColor','right','bulk-award-points-btn','users-table-body','playersD2','player-count','achievementType','Please\x20fill\x20all\x20fields','Error\x20loading\x20players:','opacity','update','Untitled\x20Trophy','Testing\x20Firebase\x20connection...','rgba(255,\x20255,\x20255,\x200.1)','roleName','System','create-new-trophy-btn','1245342amZWce','trophy-form','cells','winnerUsername','title','join','wins','ladder','matches-search','#ffffff','dashboard','localeCompare','Error\x20opening\x20edit\x20modal:','timestamp','Promotion\x20notification\x20sent\x20to\x20Discord\x20bot','Error\x20creating\x20simple\x20test\x20match:','Silver','19891UXvhnt','.close-notification','Error\x20adding\x20ribbon:','Player\x20\x22','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','endDate','Role\x20\x22','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','action','playerRibbons','edit-match-modal','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','removeEventListener','\x27</td>','reason','.edit-role-btn','6gtLarm','highlight-achievement-player-container','cancel-role-btn','userId','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','creatorImageUrl','submit','quick-edit-email','#users-table-body\x20tr[data-username=\x22','uid','matchLink','players-table-body','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>','keys','\x20in\x20','pointsHistory','set-elo-ladder','Bulk\x20award:','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','Player\x20','name','\x20from\x20','.form-group','Failed\x20to\x20update\x20player:\x20','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','eloRating','Highlight\x20updated\x20successfully!','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','error','get','click','userTrophies','toLocaleString','unknown','trophy-image-preview','updatedAt','Error\x20finding\x20match:','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','role-username','Error\x20initializing\x20admin\x20dashboard:','article-content','Load\x20highlights\x20data\x20clicked','allUsersPoints','Awarded\x20','creator','getElementById','exists','highlight-form','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','edit-highlight-type-select','Non-Participant'];a0_0x4dad=function(){return _0x56ca3e;};return a0_0x4dad();}async function removeRibbon(_0x104795){const _0x15f3f1=a0_0x21b64b,_0x3ba388=document['getElementById']('ribbon-target-user')[_0x15f3f1(0x2bf)],_0x46bcf6=document['getElementById'](_0x15f3f1(0x287))['value'];if(!confirm('Remove\x20'+_0x104795+'\x20from\x20'+_0x3ba388+'?'))return;try{const _0x2804c3='playerRibbons'+(_0x46bcf6==='D1'?'':_0x46bcf6),_0x3f49c7=doc(db,_0x2804c3,_0x3ba388),_0xadbdee=await getDoc(_0x3f49c7),_0x40749e=_0xadbdee['exists']()?_0xadbdee['data']()[_0x15f3f1(0x2b1)]||{}:{};delete _0x40749e[_0x104795],await setDoc(_0x3f49c7,{'username':_0x3ba388,'ladder':_0x46bcf6,'ribbons':_0x40749e,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x104795+'\x20from\x20'+_0x3ba388,'success'),displayCurrentRibbons(_0x40749e);}catch(_0x440a95){console[_0x15f3f1(0x18b)]('Error\x20removing\x20ribbon:',_0x440a95),showNotification(_0x15f3f1(0x339),_0x15f3f1(0x18b));}}function editUserRibbons(_0x51f9f6,_0x10f0f4){const _0x155690=a0_0x21b64b;document['getElementById'](_0x155690(0x33b))[_0x155690(0x2bf)]=_0x51f9f6,searchRibbonUser();}