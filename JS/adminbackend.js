const a4_0x11ae10=a4_0x3b2d,a4_0x566bb0=(function(){let _0x3fd8eb=!![];return function(_0x27c66c,_0x271e93){const _0x4e7cc7=_0x3fd8eb?function(){if(_0x271e93){const _0x1182dc=_0x271e93['apply'](_0x27c66c,arguments);return _0x271e93=null,_0x1182dc;}}:function(){};return _0x3fd8eb=![],_0x4e7cc7;};}()),a4_0x1b5697=a4_0x566bb0(this,function(){const _0xbfc31d=a4_0x3b2d,_0xb53a67=function(){let _0x11d979;try{_0x11d979=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2ab506){_0x11d979=window;}return _0x11d979;},_0x175c62=_0xb53a67(),_0x2ad668=_0x175c62['console']=_0x175c62['console']||{},_0x4da095=['log','warn',_0xbfc31d(0x199),'error','exception','table',_0xbfc31d(0x238)];for(let _0x2c693c=0x0;_0x2c693c<_0x4da095['length'];_0x2c693c++){const _0x33f8d0=a4_0x566bb0['constructor']['prototype']['bind'](a4_0x566bb0),_0x53f03a=_0x4da095[_0x2c693c],_0x31f424=_0x2ad668[_0x53f03a]||_0x33f8d0;_0x33f8d0['__proto__']=a4_0x566bb0['bind'](a4_0x566bb0),_0x33f8d0[_0xbfc31d(0x286)]=_0x31f424[_0xbfc31d(0x286)][_0xbfc31d(0x12b)](_0x31f424),_0x2ad668[_0x53f03a]=_0x33f8d0;}});a4_0x1b5697();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x49ab9f){const _0x329740=a4_0x3b2d;if(!_0x49ab9f)return'#ffffff';_0x49ab9f=_0x49ab9f[_0x329740(0x258)]('#','');_0x49ab9f['length']===0x3&&(_0x49ab9f=_0x49ab9f['split']('')['map'](_0x43b03b=>_0x43b03b+_0x43b03b)['join'](''));if(_0x49ab9f[_0x329740(0x1ab)]!==0x6)return _0x329740(0x275);const _0x1d04be=parseInt(_0x49ab9f[_0x329740(0x279)](0x0,0x2),0x10),_0x90b6dd=parseInt(_0x49ab9f['substring'](0x2,0x4),0x10),_0x443857=parseInt(_0x49ab9f['substring'](0x4,0x6),0x10),_0x32df54=(_0x1d04be*0x12b+_0x90b6dd*0x24b+_0x443857*0x72)/0x3e8;return _0x32df54>=0x80?_0x329740(0x1ec):'#ffffff';}const DEFAULT_TROPHY_IMAGE=a4_0x11ae10(0x115),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a4_0x11ae10(0x163)]('DOMContentLoaded',()=>{const _0x1cf7d1=a4_0x11ae10;auth[_0x1cf7d1(0x27a)](async _0x30867c=>{const _0x48f05e=_0x1cf7d1;if(!_0x30867c){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x1f191f){console['error'](_0x48f05e(0x241),_0x1f191f),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x1edd67){const _0x4c4d6c=a4_0x11ae10;if(!_0x1edd67)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x1edd67+'\x20in\x20all\x20collections...');const _0x4025b8=[{'name':_0x4c4d6c(0x254),'displayName':'User\x20Profiles'},{'name':_0x4c4d6c(0x23a),'displayName':_0x4c4d6c(0x18f)},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':_0x4c4d6c(0x2d7)},{'name':'nonParticipants','displayName':'Non-Participants'}],_0xf7954a=auth['currentUser'];let _0x4c3abb=null,_0x162c77=null;for(const _0x40fcb0 of _0x4025b8){try{if(_0xf7954a){const _0x4f5860=doc(db,_0x40fcb0['name'],_0xf7954a['uid']),_0x20f85f=await getDoc(_0x4f5860);if(_0x20f85f['exists']()){const _0x3ca09d=_0x20f85f['data']();console['log']('Found\x20user\x20in\x20'+_0x40fcb0['displayName']+'\x20by\x20UID:',_0x3ca09d);const _0x3fcbe1=(_0x3ca09d['roleName']||_0x3ca09d['role']||'')[_0x4c4d6c(0x9e)]();if(_0x3fcbe1&&_0x3fcbe1!=='none'){_0x4c3abb=_0x3fcbe1,_0x162c77=_0x40fcb0['displayName'],console[_0x4c4d6c(0x20b)](_0x4c4d6c(0x17f)+_0x4c3abb+'\x20in\x20'+_0x162c77);break;}}}if(!_0x4c3abb){const _0x2a9f75=collection(db,_0x40fcb0['name']),_0x3bf50b=query(_0x2a9f75,where(_0x4c4d6c(0x1d6),'==',_0x1edd67)),_0x2be132=await getDocs(_0x3bf50b);if(!_0x2be132['empty']){const _0x432997=_0x2be132['docs'][0x0]['data']();console['log'](_0x4c4d6c(0x1e4)+_0x40fcb0[_0x4c4d6c(0x18a)]+'\x20with\x20email\x20'+_0x1edd67+':',_0x432997);const _0x2b8f73=(_0x432997['roleName']||_0x432997['role']||'')['toLowerCase']();if(_0x2b8f73&&_0x2b8f73!==_0x4c4d6c(0xea)){_0x4c3abb=_0x2b8f73,_0x162c77=_0x40fcb0['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x4c3abb+_0x4c4d6c(0xe3)+_0x162c77);break;}}}}catch(_0x5c1db8){console['error'](_0x4c4d6c(0x146)+_0x40fcb0['displayName']+':',_0x5c1db8);}}if(_0x4c3abb){console['log'](_0x4c4d6c(0x96)+_0x4c3abb+_0x4c4d6c(0x2d4)+_0x162c77+')');const _0x317baf={'admin':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks',_0x4c4d6c(0xb4),'settings','manage-trophies',_0x4c4d6c(0x220),'manage-highlights',_0x4c4d6c(0x252),'manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players',_0x4c4d6c(0xae),'manage-trophies','elo-history','manage-highlights','user-roles-section',_0x4c4d6c(0x136),'manage-points','manage-levels-ribbons','manage-ribbons'],'council':['dashboard',_0x4c4d6c(0xb7),'manage-matches'],'creative\x20lead':['dashboard','manage-articles','manage-trophies',_0x4c4d6c(0x220),'manage-highlights']};if(_0x317baf[_0x4c3abb])return console['log']('Role\x20\x27'+_0x4c3abb+'\x27\x20has\x20permissions:',_0x317baf[_0x4c3abb]),_0x317baf[_0x4c3abb];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x1edd67+_0x4c4d6c(0xa4)),['dashboard'];}function setupSidebarNavigation(_0x5a342c=[]){const _0x47cbdc=a4_0x11ae10,_0x176d84=document['querySelectorAll'](_0x47cbdc(0x148)),_0x19d5b6=document['querySelectorAll'](_0x47cbdc(0xb6));(!_0x5a342c||_0x5a342c['length']===0x0)&&(_0x5a342c=[_0x47cbdc(0x1c5)]);_0x176d84[_0x47cbdc(0x1a3)](_0x2f7d54=>{const _0x3b8381=_0x47cbdc,_0x133114=_0x2f7d54['getAttribute'](_0x3b8381(0xfa));_0x5a342c['includes'](_0x133114)?_0x2f7d54['style']['display']='flex':_0x2f7d54['style']['display']='none',_0x2f7d54['addEventListener']('click',()=>{const _0x2bb18e=_0x3b8381,_0x47ac7f=_0x2f7d54['getAttribute']('data-section');if(!_0x5a342c[_0x2bb18e(0x1fa)](_0x47ac7f)){showNotification(_0x2bb18e(0x2ca),'error');return;}_0x176d84['forEach'](_0x2f1cbc=>_0x2f1cbc[_0x2bb18e(0x130)]['remove']('active')),_0x2f7d54[_0x2bb18e(0x130)]['add']('active'),_0x19d5b6[_0x2bb18e(0x1a3)](_0x1ae1c9=>{_0x1ae1c9['style']['display']='none';});const _0x18cd12=document['getElementById'](_0x47ac7f);_0x18cd12&&(_0x18cd12['style']['display']='block',console['log']('Switched\x20to\x20'+_0x47ac7f+'\x20section'));});});const _0x214c26=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x5a342c[0x0]+'\x22]');_0x214c26&&_0x214c26['click'](),console[_0x47cbdc(0x20b)](_0x47cbdc(0xc3));}function setupTabNavigation(){const _0x51dde3=document['querySelectorAll']('.nav-item');let _0x4643bd=null,_0x2a9d4c=new Set();_0x51dde3['forEach'](_0x595776=>{const _0x589d96=a4_0x3b2d;_0x595776[_0x589d96(0x163)]('click',function(){const _0x107f94=_0x589d96,_0x406384=this[_0x107f94(0x24c)]('data-section');if(_0x406384===_0x4643bd)return;_0x4643bd&&(document['getElementById'](_0x4643bd)[_0x107f94(0x2ce)]['display']=_0x107f94(0xea),_0x51dde3['forEach'](_0x17f966=>_0x17f966['classList']['remove']('active'))),document['getElementById'](_0x406384)[_0x107f94(0x2ce)]['display']=_0x107f94(0x222),this['classList']['add']('active'),_0x4643bd=_0x406384;});});}function loadSectionData(_0x2331e0){return;}async function initializeAdminDashboard(){const _0x2d0c6e=a4_0x11ae10;try{const _0x520de5=auth['currentUser'],_0x34035d=await getUserTabPermissions(_0x520de5['email']);console[_0x2d0c6e(0x20b)](_0x2d0c6e(0x17a)+_0x520de5['email']+_0x2d0c6e(0xc0),_0x34035d),window['userAllowedTabs']=_0x34035d,setupSidebarNavigation(_0x34035d),setupLadderSelector(),setupDashboardSection(),_0x34035d[_0x2d0c6e(0x1fa)]('manage-players')&&setupManagePlayersSection(),_0x34035d[_0x2d0c6e(0x1fa)]('elo-history')&&setupEloHistorySection(),_0x34035d['includes']('manage-ranks')&&setupRankControls(),_0x34035d['includes'](_0x2d0c6e(0x12c))&&setupManageArticlesSection(),_0x34035d[_0x2d0c6e(0x1fa)]('user-roles-section')&&setupUserRolesSection(),_0x34035d['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x34035d[_0x2d0c6e(0x1fa)]('manage-highlights')&&setupManageHighlightsSection(),_0x34035d['includes']('inactive-players')&&setupInactivePlayersSection(),_0x34035d[_0x2d0c6e(0x1fa)]('manage-matches')&&setupManageMatchesSection(),_0x34035d['includes']('manage-points')&&setupManagePointsSection(),_0x34035d['includes'](_0x2d0c6e(0x7e))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x34035d);}catch(_0x2dfaca){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x2dfaca);}}function setupDataLoadButtons(_0x29aedf=[]){const _0x21eaa9=a4_0x11ae10;(!_0x29aedf||_0x29aedf[_0x21eaa9(0x1ab)]===0x0)&&(_0x29aedf=['dashboard']);const _0x581274=document[_0x21eaa9(0x15f)]('load-dashboard-data');_0x581274&&_0x581274['addEventListener'](_0x21eaa9(0x236),function(){const _0xcad948=_0x21eaa9;this['classList']['add']('loading'),this['innerHTML']=_0xcad948(0x24d),loadDashboardOverview()['then'](()=>{const _0x1d62bc=_0xcad948;this['classList']['remove'](_0x1d62bc(0x167)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x41476b=>{const _0x6482e=_0xcad948;console[_0x6482e(0x168)](_0x6482e(0x27e),_0x41476b),this[_0x6482e(0x130)][_0x6482e(0x1ee)]('loading'),this[_0x6482e(0x250)]=_0x6482e(0x1de),setTimeout(()=>{const _0x5c92d7=_0x6482e;this[_0x5c92d7(0x250)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x29aedf['includes']('manage-trophies')){const _0x55fb43=document['getElementById'](_0x21eaa9(0x97));_0x55fb43&&_0x55fb43['addEventListener'](_0x21eaa9(0x236),function(){const _0x1e28d0=_0x21eaa9;console['log']('Load\x20trophies\x20data\x20clicked'),this[_0x1e28d0(0x130)]['add']('loading'),this['innerHTML']=_0x1e28d0(0x24d),loadTrophyDefinitions()['then'](()=>{const _0x3a9b46=_0x1e28d0;this[_0x3a9b46(0x130)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x3a69ad=>{const _0x1f3c9e=_0x1e28d0;console['error']('Error\x20loading\x20trophies:',_0x3a69ad),this[_0x1f3c9e(0x130)][_0x1f3c9e(0x1ee)](_0x1f3c9e(0x167)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4f2f74=_0x1f3c9e;this[_0x4f2f74(0x250)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x29aedf['includes'](_0x21eaa9(0xb7))){const _0x5a2b13=document['getElementById'](_0x21eaa9(0x2d2));_0x5a2b13&&_0x5a2b13['addEventListener'](_0x21eaa9(0x236),function(){const _0x479c89=_0x21eaa9;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x4a0ba5=a4_0x3b2d;this['classList']['remove']('loading'),this['innerHTML']=_0x4a0ba5(0x15e);})[_0x479c89(0x6b)](_0xe868f1=>{console['error']('Error\x20loading\x20players:',_0xe868f1),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x29aedf['includes']('elo-history')){const _0x3bfd4e=document['getElementById']('load-elo-history-data');_0x3bfd4e&&_0x3bfd4e['addEventListener']('click',function(){const _0x35d33f=_0x21eaa9;console['log'](_0x35d33f(0x6a)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x252b59=>{const _0x2a737d=_0x35d33f;console['error']('Error\x20loading\x20history:',_0x252b59),this['classList']['remove'](_0x2a737d(0x167)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1f109a=_0x2a737d;this['innerHTML']=_0x1f109a(0x2bf);},0xbb8);});});}if(_0x29aedf['includes']('manage-articles')){const _0x575a05=document['getElementById']('load-articles-data');_0x575a05&&_0x575a05['addEventListener']('click',function(){const _0x20f006=_0x21eaa9;console[_0x20f006(0x20b)](_0x20f006(0x2ab)),this['classList']['add']('loading'),this['innerHTML']=_0x20f006(0x24d),loadArticles()['then'](()=>{const _0x2565d5=_0x20f006;this[_0x2565d5(0x130)][_0x2565d5(0x1ee)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x4ca4ca=>{const _0xdbd58=_0x20f006;console['error']('Error\x20loading\x20articles:',_0x4ca4ca),this[_0xdbd58(0x130)][_0xdbd58(0x1ee)]('loading'),this['innerHTML']=_0xdbd58(0x1de),setTimeout(()=>{const _0x1472b9=_0xdbd58;this['innerHTML']=_0x1472b9(0x10f);},0xbb8);});});}if(_0x29aedf[_0x21eaa9(0x1fa)]('user-roles-section')){const _0x246d40=document['getElementById'](_0x21eaa9(0x2e0));_0x246d40&&_0x246d40[_0x21eaa9(0x163)]('click',function(){const _0x161b8c=_0x21eaa9;console['log'](_0x161b8c(0x207)),this['classList']['add'](_0x161b8c(0x167)),this['innerHTML']=_0x161b8c(0x24d),loadUsersWithRoles()[_0x161b8c(0x1e2)](()=>{const _0x23bcf7=_0x161b8c;this[_0x23bcf7(0x130)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x161b8c(0x6b)](_0x5e4c29=>{const _0x2f2aae=_0x161b8c;console['error']('Error\x20loading\x20users:',_0x5e4c29),this['classList']['remove'](_0x2f2aae(0x167)),this['innerHTML']=_0x2f2aae(0x1de),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x29aedf['includes'](_0x21eaa9(0xb4))){const _0x7c333e=document['getElementById']('load-inactive-players-data');_0x7c333e&&_0x7c333e['addEventListener'](_0x21eaa9(0x236),function(){const _0x1ff82=_0x21eaa9;console['log'](_0x1ff82(0xf6)),this[_0x1ff82(0x130)]['add']('loading'),this[_0x1ff82(0x250)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x224305=_0x1ff82;this['classList']['remove']('loading'),this[_0x224305(0x250)]=_0x224305(0x161);})['catch'](_0x713aca=>{const _0x1c9902=_0x1ff82;console['error'](_0x1c9902(0x186),_0x713aca),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x14824c=_0x1c9902;this[_0x14824c(0x250)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x29aedf['includes']('manage-highlights')){const _0x4a1167=document[_0x21eaa9(0x15f)]('load-highlights-data');_0x4a1167&&_0x4a1167[_0x21eaa9(0x163)]('click',function(){const _0x27f384=_0x21eaa9;console['log'](_0x27f384(0x8e)),this['classList']['add']('loading'),this[_0x27f384(0x250)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0xadb92e=_0x27f384;this['classList'][_0xadb92e(0x1ee)]('loading'),this[_0xadb92e(0x250)]=_0xadb92e(0x201);})['catch'](_0x311472=>{console['error']('Error\x20loading\x20highlights:',_0x311472),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x29aedf[_0x21eaa9(0x1fa)](_0x21eaa9(0x136))){const _0x53f0a6=document[_0x21eaa9(0x15f)]('load-matches-data');_0x53f0a6&&_0x53f0a6['addEventListener']('click',function(){const _0x2aa8c1=_0x21eaa9;console['log']('Load\x20matches\x20data\x20clicked'),this['classList'][_0x2aa8c1(0x18c)]('loading'),this[_0x2aa8c1(0x250)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x281a3a=_0x2aa8c1;this['classList'][_0x281a3a(0x1ee)](_0x281a3a(0x167)),this[_0x281a3a(0x250)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x2ebb9f=>{const _0xed6a4a=_0x2aa8c1;console['error'](_0xed6a4a(0x1ad),_0x2ebb9f),this[_0xed6a4a(0x130)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x29aedf[_0x21eaa9(0x1fa)]('manage-ribbons')){const _0x3fcba9=document[_0x21eaa9(0x15f)](_0x21eaa9(0x202));_0x3fcba9&&_0x3fcba9['addEventListener'](_0x21eaa9(0x236),function(){const _0xe81256=_0x21eaa9;console['log'](_0xe81256(0x22d)),this['classList']['add']('loading'),this['innerHTML']=_0xe81256(0x24d),loadRibbonsData()[_0xe81256(0x1e2)](()=>{const _0x499e4=_0xe81256;this[_0x499e4(0x130)]['remove'](_0x499e4(0x167)),this[_0x499e4(0x250)]=_0x499e4(0x29a);})[_0xe81256(0x6b)](_0x8e9dd8=>{const _0x113132=_0xe81256;console['error']('Error\x20loading\x20ribbons:',_0x8e9dd8),this['classList']['remove']('loading'),this[_0x113132(0x250)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console[_0x21eaa9(0x20b)]('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x283979=a4_0x11ae10;document['getElementById'](_0x283979(0x131))['textContent']='-',document['getElementById'](_0x283979(0x92))['textContent']='-',document['getElementById'](_0x283979(0xd4))['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0xe568=a4_0x11ae10,_0xb225f3=document['querySelectorAll']('.ladder-switch\x20input');_0xb225f3['forEach'](_0x40de3b=>{const _0x2ea3bc=a4_0x3b2d;_0x40de3b['addEventListener'](_0x2ea3bc(0x21e),()=>{const _0x250cf6=_0x2ea3bc;currentLadder=_0x40de3b[_0x250cf6(0x16f)],document['body']['setAttribute']('data-ladder',currentLadder);const _0x531e88=document['getElementById']('current-ladder-display');_0x531e88&&(_0x531e88['textContent']=currentLadder),document[_0x250cf6(0x15f)]('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')[_0x250cf6(0x143)]='-',document['getElementById']('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts[_0x250cf6(0x15a)]=null),showNotification(_0x250cf6(0x288)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x2d50f7=document['getElementById'](_0xe568(0xba));_0x2d50f7&&(_0x2d50f7['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x3289b7=a4_0x11ae10;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document['getElementById'](_0x3289b7(0x131))['textContent']='-',document[_0x3289b7(0x15f)]('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')[_0x3289b7(0x143)]='-';const _0x202c8e=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x438b5b=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x4a6908=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x21b4b1=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':_0x3289b7(0x1cf);console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x202c8e+',\x20'+_0x438b5b);const _0x252dc7=await getDocs(collection(db,_0x202c8e)),_0x278700=_0x252dc7['size'],_0x4fc4d1=await getDocs(collection(db,_0x438b5b)),_0x3d7f1d=_0x4fc4d1['size'],_0x561543=await getDocs(collection(db,_0x4a6908)),_0xa39313=_0x561543['size'],_0x7bf801=await getDocs(collection(db,_0x21b4b1)),_0x48bce4=_0x7bf801['size'];return document['getElementById']('player-count')['textContent']=_0x278700,document[_0x3289b7(0x15f)]('match-count')['textContent']=_0x3d7f1d,document['getElementById'](_0x3289b7(0xd4))[_0x3289b7(0x143)]=_0xa39313,document['getElementById'](_0x3289b7(0x7b))['textContent']=_0x48bce4,await createRankDistributionChart(),await createActivityChart(),console[_0x3289b7(0x20b)]('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x31eee9){console[_0x3289b7(0x168)]('Error\x20loading\x20dashboard\x20data:',_0x31eee9);throw _0x31eee9;}}async function createRankDistributionChart(){const _0x9d2e51=a4_0x11ae10;try{const _0x2cbae4=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x5cfda0=await getDocs(_0x2cbae4),_0x3f4d1e={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x5cfda0['forEach'](_0x4e54bd=>{const _0x47cf75=a4_0x3b2d,_0x59793a=_0x4e54bd[_0x47cf75(0x242)](),_0xfdb074=_0x59793a['eloRating']||0x4b0;if(_0xfdb074>=0x7d0)_0x3f4d1e['Emerald']++;else{if(_0xfdb074>=0x708)_0x3f4d1e[_0x47cf75(0xa5)]++;else{if(_0xfdb074>=0x640)_0x3f4d1e[_0x47cf75(0x1f9)]++;else{if(_0xfdb074>=0x578)_0x3f4d1e['Bronze']++;else _0x3f4d1e['Unranked']++;}}}});const _0x93f666=document['getElementById']('rank-distribution-chart');charts[_0x9d2e51(0x10a)]&&charts[_0x9d2e51(0x10a)]['destroy'](),charts['rankDistribution']=new Chart(_0x93f666,{'type':'doughnut','data':{'labels':Object['keys'](_0x3f4d1e),'datasets':[{'data':Object[_0x9d2e51(0x150)](_0x3f4d1e),'backgroundColor':['#808080',_0x9d2e51(0x9b),'#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x9d2e51(0x1c9),'color':_0x9d2e51(0x24b),'font':{'size':0x10}}}}});}catch(_0x262f73){console['error'](_0x9d2e51(0x2cf),_0x262f73),document['getElementById']('rank-distribution-chart')[_0x9d2e51(0x250)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0xa17733=a4_0x11ae10;try{const _0x4ea094=currentLadder==='D1'?_0xa17733(0x25d):_0xa17733(0x103),_0x34bef3=collection(db,_0x4ea094),_0x4ff95c=new Date();_0x4ff95c['setDate'](_0x4ff95c['getDate']()-0x7);const _0x569cdf=query(_0x34bef3,where(_0xa17733(0x149),'>=',_0x4ff95c),orderBy('approvedAt','asc')),_0x509b45=await getDocs(_0x569cdf),_0x2f718a=['Sunday',_0xa17733(0x7c),_0xa17733(0x26f),'Wednesday',_0xa17733(0x2ba),'Friday','Saturday'],_0x2f9325=_0x2f718a['reduce']((_0x1c1ce3,_0x9bb77a)=>({..._0x1c1ce3,[_0x9bb77a]:0x0}),{});_0x509b45['forEach'](_0x5b2a90=>{const _0x15f6c6=_0x5b2a90['data']();if(_0x15f6c6['approvedAt']){const _0x250a7b=_0x2f718a[new Date(_0x15f6c6['approvedAt']['seconds']*0x3e8)['getDay']()];_0x2f9325[_0x250a7b]++;}});const _0x474fad=document['getElementById']('activity-chart');charts['activity']&&charts[_0xa17733(0x15a)]['destroy'](),charts['activity']=new Chart(_0x474fad,{'type':'bar','data':{'labels':_0x2f718a,'datasets':[{'label':_0xa17733(0x6f),'data':_0x2f718a['map'](_0x5d1b61=>_0x2f9325[_0x5d1b61]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0xa17733(0x1ea),'borderColor':currentLadder==='D1'?'#d32f2f':_0xa17733(0x2a1),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':_0xa17733(0x24b),'font':{'size':0x10}}}}});}catch(_0x15b79a){console['error']('Error\x20creating\x20activity\x20chart:',_0x15b79a),document[_0xa17733(0x15f)]('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x5eafd7=a4_0x11ae10,_0x5a1928=document['getElementById'](_0x5eafd7(0x8c));if(!_0x5a1928)return;_0x5a1928['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x7d9f0f='players';if(currentLadder==='D2')_0x7d9f0f='playersD2';else currentLadder==='D3'&&(_0x7d9f0f='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x7d9f0f+'\x20collection...');const _0x444d78=collection(db,_0x7d9f0f),_0x205ed3=query(_0x444d78,orderBy('eloRating',_0x5eafd7(0x2c3))),_0x222f7c=await getDocs(_0x205ed3);if(_0x222f7c['empty']){_0x5a1928['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x5a1928[_0x5eafd7(0x250)]='';let _0xc54e37=0x1;_0x222f7c['forEach'](_0x25aca6=>{const _0x4b86ea=_0x5eafd7,_0xe0336e=_0x25aca6['data'](),_0x3d1573=getRankFromElo(_0xe0336e[_0x4b86ea(0x147)]||0x4b0),_0x271463=getRankStyle(_0xe0336e['eloRating']||0x4b0),_0xdb80a7=document[_0x4b86ea(0x11d)]('tr');_0xdb80a7[_0x4b86ea(0x250)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0xc54e37+_0x4b86ea(0x1cc)+_0x271463['color']+_0x4b86ea(0x1b7)+(_0xe0336e['username']||_0x4b86ea(0x261))+_0x4b86ea(0x170)+(_0xe0336e['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x271463['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3d1573+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xe0336e['wins']||0x0)+'W\x20/\x20'+(_0xe0336e['losses']||0x0)+_0x4b86ea(0x6c)+_0x25aca6['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x25aca6['id']+_0x4b86ea(0x1d2),_0x5a1928['appendChild'](_0xdb80a7),_0xc54e37++;}),setupPlayerActionButtons();}catch(_0x534ac5){console[_0x5eafd7(0x168)](_0x5eafd7(0x108),_0x534ac5),_0x5a1928['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x534ac5['message']+_0x5eafd7(0xa3);}}function getRankFromElo(_0x1cf5d1){const _0x155aea=a4_0x11ae10;if(_0x1cf5d1>=0x7d0)return'Emerald';if(_0x1cf5d1>=0x708)return'Gold';if(_0x1cf5d1>=0x640)return _0x155aea(0x1f9);if(_0x1cf5d1>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x16e4cc=a4_0x11ae10;document['querySelectorAll'](_0x16e4cc(0x13f))[_0x16e4cc(0x1a3)](_0x2daae5=>{const _0x4f43ed=_0x16e4cc;_0x2daae5[_0x4f43ed(0x163)]('click',async _0x8765a2=>{const _0x2e65ba=_0x4f43ed,_0x59bf6a=_0x8765a2['currentTarget'][_0x2e65ba(0x178)]['id'];openEditPlayerModal(_0x59bf6a);});}),document['querySelectorAll']('.delete-btn')['forEach'](_0x135656=>{const _0x3f6f27=_0x16e4cc;_0x135656['addEventListener'](_0x3f6f27(0x236),async _0x5c718b=>{const _0x163f5c=_0x3f6f27,_0x2ecae8=_0x5c718b['currentTarget'][_0x163f5c(0x178)]['id'];confirmDeletePlayer(_0x2ecae8);});});}async function openEditPlayerModal(_0xbf154b){const _0x16986c=a4_0x11ae10;try{const _0x5c68ab=currentLadder==='D1'?'players':_0x16986c(0x295),_0x701de=doc(db,_0x5c68ab,_0xbf154b),_0x95c74f=await getDoc(_0x701de);if(!_0x95c74f[_0x16986c(0x120)]()){showNotification('Player\x20not\x20found','error');return;}const _0x3ae906=_0x95c74f[_0x16986c(0x242)](),_0x239b4c=document['getElementById'](_0x16986c(0xb2)),_0x302d29=document[_0x16986c(0x15f)]('edit-username'),_0x32d3c3=document['getElementById'](_0x16986c(0x291)),_0x153743=document['getElementById']('edit-wins'),_0x21c1e2=document[_0x16986c(0x15f)]('edit-losses');_0x302d29['value']=_0x3ae906['username']||'',_0x32d3c3['value']=_0x3ae906[_0x16986c(0x147)]||0x4b0,_0x153743['value']=_0x3ae906['wins']||0x0,_0x21c1e2[_0x16986c(0x16f)]=_0x3ae906['losses']||0x0,_0x239b4c['dataset'][_0x16986c(0xa0)]=_0xbf154b,_0x239b4c['classList']['add']('active');}catch(_0x2fe193){console['error'](_0x16986c(0xf4),_0x2fe193),showNotification('Failed\x20to\x20load\x20player\x20data',_0x16986c(0x168));}}async function saveEditedPlayer(){const _0x28e833=a4_0x11ae10;try{const _0xa9ecf=document['getElementById']('edit-player-modal'),_0x1a7669=_0xa9ecf[_0x28e833(0x178)]['playerId'];if(!_0x1a7669){showNotification('No\x20player\x20selected',_0x28e833(0x168));return;}const _0x54a6a9=document[_0x28e833(0x15f)](_0x28e833(0x2cc)),_0x59ef65=document['getElementById'](_0x28e833(0x291)),_0x54e537=document['getElementById']('edit-wins'),_0x15ea5d=document['getElementById']('edit-losses'),_0x15ab8b=_0x54a6a9['value'][_0x28e833(0x2c5)](),_0x418a0f=parseInt(_0x59ef65[_0x28e833(0x16f)]),_0x191272=parseInt(_0x54e537['value']),_0x32aba9=parseInt(_0x15ea5d['value']);if(!_0x15ab8b||isNaN(_0x418a0f)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x4dd187=currentLadder==='D1'?'players':'playersD2',_0x4e8df8=doc(db,_0x4dd187,_0x1a7669),_0x5a32a4=await getDoc(_0x4e8df8),_0x35da9e=_0x5a32a4['exists']()?_0x5a32a4['data']():{},_0x2bde68=_0x35da9e['eloRating']||0x4b0;await updateDoc(_0x4e8df8,{'username':_0x15ab8b,'eloRating':_0x418a0f,'wins':_0x191272||0x0,'losses':_0x32aba9||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x418a0f!==_0x2bde68){const _0x142a03=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x142a03),{'player':_0x15ab8b,'previousElo':_0x2bde68,'newElo':_0x418a0f,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x28e833(0x2b7)][_0x28e833(0x1d6)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x28e833(0xdf));}catch(_0x4c3af6){console['error'](_0x28e833(0x29e),_0x4c3af6),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x4c3af6['message'],'error');}}function closeEditPlayerModal(){const _0x27531f=a4_0x11ae10,_0x2c3709=document['getElementById'](_0x27531f(0xb2));_0x2c3709['classList'][_0x27531f(0x1ee)]('active'),_0x2c3709['dataset']['playerId']='';}async function confirmDeletePlayer(_0x48a4b4){const _0x59caf4=a4_0x11ae10;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x5da4c2=currentLadder==='D1'?'players':_0x59caf4(0x295);await deleteDoc(doc(db,_0x5da4c2,_0x48a4b4)),loadPlayersData(),showNotification(_0x59caf4(0x13d),'success');}catch(_0x478322){console[_0x59caf4(0x168)]('Error\x20deleting\x20player:',_0x478322),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x478322['message'],'error');}}async function setupManagePlayersSection(){const _0x36474f=a4_0x11ae10,_0x47bdb0=document['getElementById']('add-player-form');_0x47bdb0&&_0x47bdb0['addEventListener'](_0x36474f(0x11f),async _0xdbcaed=>{_0xdbcaed['preventDefault'](),await addNewPlayer();});const _0x2bd4be=document['getElementById']('player-search');_0x2bd4be&&_0x2bd4be['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x13bbcb=document['getElementById']('save-player-btn');_0x13bbcb&&_0x13bbcb['addEventListener']('click',saveEditedPlayer);const _0x27af7a=document['getElementById']('cancel-edit-btn');_0x27af7a&&_0x27af7a['addEventListener']('click',closeEditPlayerModal);const _0x2abb6a=document['getElementById']('edit-player-modal');_0x2abb6a&&_0x2abb6a['addEventListener']('click',_0x491ae0=>{const _0x573410=_0x36474f;_0x491ae0[_0x573410(0x1e7)]===_0x2abb6a&&closeEditPlayerModal();});const _0x1fe074=document[_0x36474f(0x15f)](_0x36474f(0x227));_0x1fe074&&_0x1fe074['addEventListener']('change',()=>{currentLadder=_0x1fe074['value'],loadPlayersData();});}async function addNewPlayer(){const _0x502424=a4_0x11ae10;try{const _0x233d5d=document['getElementById']('new-player-username'),_0x22fd90=document[_0x502424(0x15f)]('new-player-elo'),_0x4f2429=_0x233d5d[_0x502424(0x16f)]['trim'](),_0x60c98=parseInt(_0x22fd90['value'])||0x4b0;if(!_0x4f2429){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log'](_0x502424(0xd5)+_0x4f2429+'\x20with\x20ELO\x20'+_0x60c98+_0x502424(0x1ed)+currentLadder+'\x20ladder');let _0x2d25a5='players',_0x108f8c='eloHistory';if(currentLadder==='D2')_0x2d25a5='playersD2',_0x108f8c=_0x502424(0x12e);else currentLadder==='D3'&&(_0x2d25a5='playersD3',_0x108f8c='eloHistoryD3');const _0x428fd9=query(collection(db,_0x2d25a5),where('username','==',_0x4f2429)),_0x526d72=await getDocs(_0x428fd9);if(!_0x526d72['empty']){alert(_0x502424(0x139)+_0x4f2429+_0x502424(0x182)+currentLadder+'\x20ladder');return;}const _0x3cd4c5=auth['currentUser'],_0x116de1={'username':_0x4f2429,'eloRating':_0x60c98,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x3cd4c5?_0x3cd4c5['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x2d25a5),_0x116de1),await addDoc(collection(db,_0x108f8c),{'player':_0x4f2429,'previousElo':0x4b0,'newElo':_0x60c98,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x3cd4c5?_0x3cd4c5['email']:'admin','gameMode':currentLadder}),_0x233d5d['value']='',_0x22fd90[_0x502424(0x16f)]='1200',alert(_0x502424(0x8b)+_0x4f2429+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x2f9e61){console['error'](_0x502424(0x1d1),_0x2f9e61),alert('Error\x20adding\x20player:\x20'+_0x2f9e61['message']);}}document[a4_0x11ae10(0x163)]('DOMContentLoaded',()=>{const _0x4ed0a8=a4_0x11ae10,_0x6c3550=document['getElementById']('add-player-form');_0x6c3550&&_0x6c3550[_0x4ed0a8(0x163)](_0x4ed0a8(0x11f),_0x5067fc=>{const _0x25a0f3=_0x4ed0a8;_0x5067fc[_0x25a0f3(0x1d7)](),addNewPlayer();});});function filterPlayerTable(){const _0x38bacb=a4_0x11ae10,_0x426410=document[_0x38bacb(0x15f)]('player-search')['value']['toLowerCase'](),_0x3176f5=document['querySelectorAll']('#players-table-body\x20tr');let _0x328786=0x0;_0x3176f5['forEach'](_0x1f74b4=>{const _0xba7b4e=_0x38bacb,_0x45c11e=_0x1f74b4[_0xba7b4e(0x1ae)](_0xba7b4e(0x216))?.[_0xba7b4e(0x143)]['toLowerCase']()||'';_0x45c11e['includes'](_0x426410)?(_0x1f74b4['style'][_0xba7b4e(0x289)]='',_0x328786++):_0x1f74b4[_0xba7b4e(0x2ce)]['display']='none';});const _0x13fda9=document['getElementById']('no-results-message');_0x13fda9&&(_0x328786===0x0&&_0x426410!==''?_0x13fda9[_0x38bacb(0x2ce)]['display']=_0x38bacb(0x222):_0x13fda9['style']['display']='none');}function debounce(_0xd5d14a,_0x31c6df){let _0x4e6b92;return function(..._0x2408cb){const _0x36b69a=a4_0x3b2d;clearTimeout(_0x4e6b92),_0x4e6b92=setTimeout(()=>_0xd5d14a[_0x36b69a(0x226)](this,_0x2408cb),_0x31c6df);};}function a4_0x5b42(){const _0xd65ea3=['name','Load\x20history\x20data\x20clicked','catch','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','Manage\x20Highlights\x20section\x20initialized','winnerUsername','Matches\x20Played','Username\x20is\x20missing','create-new-trophy-btn','has','non-participant','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','achievement','DOMContentLoaded','Found\x20','string','edit-highlight-mapVersion-input','\x20users...','rejected-count','Monday','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','manage-ribbons','mapCreator','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','sendPromotionNotification','set-elo-ladder','unknown','warning','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','ribbon-target-ladder','Unknown\x20User','users-table-body','\x20from\x20','videoId','Player\x20','players-table-body','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','Load\x20highlights\x20data\x20clicked','updatedAt','Setting\x20up\x20Manage\x20Ribbons\x20section','achievementDetails','match-count','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','edit-highlight-id','no-results','Setting\x20permissions\x20based\x20on\x20role:\x20','load-trophies-data','quick-points-amount','All\x20fields\x20are\x20required','newElo','#CD7F32','MAX_SAFE_INTEGER','highlight-winner-score','toLowerCase','source','playerId','edit-match-title','),\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',',\x20giving\x20default\x20access','Gold','eloHistory','userId','input[name=\x22test-match-ladder\x22]','cancel-assign-btn','\x20-\x20','add-new-role-btn','-page-indicator','data-id','settings','edit-highlight-matchLink-input','loss','disabled','edit-player-modal','playerRibbons','inactive-players','Displaying\x20','.admin-section','manage-players','promote-ladder','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','current-ladder-display','winnerName','Error\x20searching\x20users:','award-item-form','name-asc','edit-match-ladder','\x20allowed\x20tabs:','\x20D1\x20pilots,\x20','winnerScore','Sidebar\x20navigation\x20initialized\x20with\x20permissions','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','highlight-player-profile','Error\x20searching\x20for\x20user','\x20users','Trophy\x20not\x20found','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','\x20unique\x20pilots\x20across\x20all\x20ladders','Failed\x20to\x20load\x20match\x20data','resimulate-modal','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','loserUsername','Opening\x20create\x20test\x20match\x20modal','username','subgameType','pending-count','Adding\x20player\x20','demote-ladder','Please\x20enter\x20a\x20username','.section-header','commit','Found\x20player\x20with\x20current\x20ELO:\x20','articles','rgba(255,\x20193,\x207,\x200.1)','set-elo-btn','Edit\x20Trophy','success','edit-highlight-mapCreator-input','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','.admin-action','\x20in\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','ref','edit-highlight-playerProfileUrl-input','Player\x20\x22','\x20(winner)\x20vs\x20','demotion','none','YouTube\x20Video\x20ID*','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20fetching\x20matches\x20for\x20','allUsersPoints','Edit\x20Match:\x20','trophy-preview-img','highlight-map-version','timestamp','Error\x20opening\x20edit\x20modal:','Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','Load\x20inactive\x20players\x20data\x20clicked','Failed\x20to\x20assign\x20trophy:\x20','search-ribbon-user-btn','src','data-section','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','#28a745','amount','set','replaceChild','mapVersion','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','padding','approvedMatchesD2','Trophy\x20definition\x20deleted\x20successfully','highlight-match-link-container','highlight-achievement-details','author','Error\x20loading\x20players:','No\x20users\x20found\x20in\x20userProfiles\x20collection','rankDistribution','awardedAt','Error\x20deleting\x20highlight:','Create\x20test\x20match\x20button\x20clicked','\x20history\x20entries\x20for\x20user\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','Please\x20enter\x20valid\x20data','resimulate-match-btn','create-match-highlight-btn','Admin\x20Adjustment','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','input[name=\x22set-elo-ladder\x22]:checked','Added\x20','Inactive\x20players\x20section\x20initialized','type','Error\x20removing\x20ribbon:','Unknown\x20Player','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','createElement','matches-end-date','submit','exists','demote-username','message','seconds','opacity','high-points','player','creator-type','highlight-video-id','Closing\x20create\x20test\x20match\x20modal','highlight-achievement-image-container','bind','manage-articles','points','eloHistoryD2','article-form','classList','player-count','setAttribute','<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','Error\x20deleting\x20match:','manage-matches','Error\x20in\x20bulk\x20award\x20points:','Page\x201','Username\x20','points-overview-table-body','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','./promotions.js','Player\x20deleted\x20successfully','\x20(based\x20on\x20data-role:\x20','.edit-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','âœ…\x20Successfully\x20initialized\x20points\x20field\x20for\x20','article-id','textContent','article-title','loserSuicides','Error\x20checking\x20','eloRating','.sidebar-nav\x20.nav-item','approvedAt','Match\x20deleted\x20successfully','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','searchTerm','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','d3-prev-page','create-creator-highlight-btn','values','Updated\x20ELO\x20ratings:\x20Winner\x20','Setting\x20up\x20matches\x20action\x20buttons...','Error\x20setting\x20user\x20role:','edit-highlight-loserScore-input','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','achievementImageUrl','ribbon-target-user','Create\x20test\x20match\x20form\x20submitted','docs','activity','Toggling\x20fields\x20for\x20highlight\x20type:\x20','alt','key','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','getElementById','Failed\x20to\x20save\x20trophy:\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','assign-trophy-modal','addEventListener','active','\x20ladder','assign-trophy-rarity','loading','error','article-content','quick-edit-current-points','.loading-cell','fa-exclamation-triangle','YouTube\x20Video\x20ID\x20(Optional)','Error\x20resolving\x20username\x20for\x20','value','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','.delete-match-btn','Demotion','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','create-new-article-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','matchDate','input','dataset','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','User\x20','Error\x20loading\x20points\x20data:','No\x20ELO\x20history\x20found\x20for\x20player\x20','Bronze','cells','Found\x20specific\x20role:\x20','uid','.remove-role-btn','\x20already\x20exists\x20in\x20','Article\x20not\x20found','input[name=\x22quick-action\x22]:checked','result','Error\x20loading\x20inactive\x20players:','#elo-history-table-body\x20tr','\x20points','achievementType','displayName','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','add','Create\x20New\x20Trophy','No\x20users\x20needed\x20points\x20field\x20initialization','D1\x20Players','highlight-achievement-type-container','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','reset','#article-modal\x20.close-btn','position','parentNode','match','highlight-match-info-container','admin','info','article-modal','\x22\x20set','points-overview-search','Quick\x20edit\x20clicked\x20for\x20user:','all','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','edit-highlight-winnerScore-input','Player\x20not\x20found\x20in\x20','forEach','Starting\x20points\x20award\x20process...','promote-modal','highlight-map','fromDate','adminEmail','View\x20player\x20details\x20for\x20','match-details-container','length','Failed\x20to\x20load\x20trophy\x20data','Error\x20loading\x20matches:','querySelector','highlight-match-info','</span>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','edit-match-loser','#players.content-section.active','\x22\x20awarded\x20to\x20','Match\x20ID\x20or\x20ladder\x20missing','userTrophies','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','promote-form','toLocaleDateString','appendChild','elo','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','Title\x20is\x20required','System','backgroundColor','points-user-search','Error\x20adding\x20ribbon','No\x20position\x20changes\x20needed.','querySelectorAll','dashboard','matchInfo','reset-matches-filters','edit-match-loser-suicides','\x20Rank\x20Distribution','quick-edit-display-name','\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','createdAt','Error\x20saving\x20highlight:\x20','RejectedD3','closeResimulateModal','Error\x20adding\x20player:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toLocaleString','Remove\x20','cancel-article-btn','email','preventDefault','highlight-video-container','Error\x20loading\x20user\x20points\x20history:','testFirebaseConnection','trophy-name','Unnamed\x20Trophy','nonParticipants','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','history-end-date','promotion','highlight-submitted-by','then','trophy-id','Found\x20user\x20in\x20','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','\x20match\x20','target','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','highlight-form','rgba(25,\x20118,\x20210,\x200.7)','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','#000000','\x20to\x20','remove','\x20already\x20processed\x20matches.\x20Errors:\x20','Subtracted\x20','highlight-loser-name','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','.quick-edit-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Never\x20played','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','Silver','includes','cancel-set-elo-btn','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','Error\x20awarding\x20item:','createdBy','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','checked','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','load-ribbons-data','roleAssignedBy','Manage\x20Ribbons\x20section\x20initialized','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','Set\x20to\x20','Load\x20users\x20data\x20clicked','edit-match-loser-demo','Error\x20initializing\x20points\x20field:','Error\x20in\x20award\x20points\x20to\x20all\x20pilots:','log','role-name','creator','test-match-winner-username','map','assign-trophy-name','sort','Failed\x20to\x20delete\x20match:\x20','edit-highlight-achievementType-input','\x20was\x20updated\x20from\x20','pendingResimulateData','.username','Initial\x20Placement','\x20quick\x20edit\x20buttons','Role\x20\x22','quick-edit-points-modal','highlight-submitted-by-container','fa-check-circle','loserScore','change','submittedBy','elo-history','.empty-state','block','action','rarity','Set\x20default\x20ladder\x20to:','apply','players-ladder-selector','toDate','update','Bulk\x20award:','border','\x20-\x20Feature\x20coming\x20soon','Load\x20ribbons\x20data\x20clicked','daysSinceMatch','playersD3','className','edit-match-winner-suicides','Error\x20opening\x20assign\x20trophy\x20modal:','Error\x20loading\x20ribbons:','Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM','N/A','click','edit-highlight-loserName-input','trace','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','players','achievementPlayer','Loading\x20user\x20data...','find','role','cancel-trophy-btn','slice','Error\x20initializing\x20dashboard:','data','.delete-trophy-btn','d1-prev-page','push','keys','match-row','roleColor','stopPropagation','Highlight\x20updated\x20successfully!','#e0e0e0','getAttribute','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','input[name=\x22promote-ladder\x22]:checked','migrate-points-btn','innerHTML','winnerDemoLink','user-roles-section','Highlight\x20deleted\x20successfully','userProfiles','loading-cell','.no-results','trophy-image-preview','replace','article-author','matches-search','cancel-role-btn','div','approvedMatches','Error\x20adding\x20ribbon:','button[type=\x22submit\x22]','trophy-rarity','Unknown','Error\x20loading\x20users:','matches-table-body','empty','edit-match-modal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','highlight-modal','points-sort-order','Creator','User\x20not\x20found','current-ribbon-user','Match\x20not\x20found\x20in\x20approved\x20matches','âŒ\x20Missing','trophy-modal','Tuesday','highlight-achievement-type','roleName','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','delete-match-summary','role-filter','#ffffff','test-match-date','highlight-title','non-participants','substring','onAuthStateChanged','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','\x20pilots...','promote-player-btn','Error\x20loading\x20dashboard:','demote-modal','Processing\x20points\x20edit:','Error\x20loading\x20article\x20data:','Trophy\x20ID\x20and\x20username\x20are\x20required','lastMatch','contains','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toString',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Switched\x20to\x20','display','\x20users\x20to\x20check...','Error\x20applying\x20filters:','role-color','TestLoser','Modal\x20cancel\x20button\x20clicked','assign-trophy-id','resimulate-match-id','edit-elo','highlight-loser-score','ribbons','assign-trophy-image','playersD2','pointsHistory','previousElo','description','match-type','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','Form\x20elements\x20are\x20missing','currentTarget','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','Error\x20updating\x20player:','points-action','positive-change','#1976d2','highlight-achievement-details-container','Non-Participant','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','cloneNode','title','join','\x20pilots.\x20Errors:\x20','âœ…\x20Exists','Attempting\x20to\x20promote\x20','Load\x20articles\x20data\x20clicked','elo-history-table-body','highlight-map-container','highlight-map-creator','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','firstVisible','approvedMatchesD3','No\x20user\x20ID\x20found\x20on\x20button','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','lastVisible','mapPlayed','highlight-match-date','currentUser','loserName','size','Thursday','Untitled','sources','page','ladder','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','create-test-match-form','promotedBy','desc','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','trim','edit-highlight-creatorImageUrl-input','edit-highlight-map-input','visible','removeEventListener','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','edit-username','edit-match-winner-demo','style','Error\x20creating\x20rank\x20distribution\x20chart:','validation-results-container','highlight-achievement-player-container','load-players-data','Points\x20updated\x20successfully\x20for\x20user:','\x20(from\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','points-amount','D3\x20Players','.error-state','Setting\x20up\x20create\x20test\x20match\x20button','playerRibbonsD2','nonexistent','history-type-filter','Untitled\x20Trophy','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','modify-points-form','load-users-data','edit-match-winner'];a4_0x5b42=function(){return _0xd65ea3;};return a4_0x5b42();}async function loadEloHistory(_0x399d3d=0x1){const _0x1bf978=a4_0x11ae10,_0x556d0b=document[_0x1bf978(0x15f)](_0x1bf978(0x2ac)),_0x1907cd=currentLadder['toLowerCase']();if(!_0x556d0b)return;_0x556d0b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x2a1bec=currentLadder==='D1'?_0x1bf978(0xa6):currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x10dc4c=collection(db,_0x2a1bec);let _0x24a691;if(_0x399d3d>eloHistoryPagination[_0x1907cd][_0x1bf978(0x2bd)]&&eloHistoryPagination[_0x1907cd]['lastVisible'])_0x24a691=query(_0x10dc4c,orderBy('timestamp',_0x1bf978(0x2c3)),startAfter(eloHistoryPagination[_0x1907cd]['lastVisible']),limit(PAGE_SIZE));else _0x399d3d<eloHistoryPagination[_0x1907cd]['page']&&eloHistoryPagination[_0x1907cd][_0x1bf978(0x2b0)]?_0x24a691=query(_0x10dc4c,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x1907cd][_0x1bf978(0x2b0)]),limitToLast(PAGE_SIZE)):_0x24a691=query(_0x10dc4c,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x1bf2a1=await getDocs(_0x24a691);if(_0x1bf2a1['empty']){_0x556d0b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x1907cd+'-page-indicator')[_0x1bf978(0x143)]='Page\x201';return;}eloHistoryPagination[_0x1907cd]['page']=_0x399d3d,eloHistoryPagination[_0x1907cd]['firstVisible']=_0x1bf2a1[_0x1bf978(0x159)][0x0],eloHistoryPagination[_0x1907cd]['lastVisible']=_0x1bf2a1['docs'][_0x1bf2a1['docs']['length']-0x1];const _0x342c26=new Map();_0x556d0b['innerHTML']='';const _0xf558e1=async _0x3670e1=>{const _0x542b1b=_0x1bf978;if(typeof _0x3670e1!==_0x542b1b(0x78)||_0x3670e1['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x3670e1))return _0x3670e1;if(_0x342c26[_0x542b1b(0x72)](_0x3670e1))return _0x342c26['get'](_0x3670e1);try{for(const _0x5cb284 of[_0x542b1b(0x23a),_0x542b1b(0x295),'playersD3',_0x542b1b(0x1dd)]){const _0x59872d=await getDoc(doc(db,_0x5cb284,_0x3670e1));if(_0x59872d['exists']()&&_0x59872d[_0x542b1b(0x242)]()[_0x542b1b(0xd2)]){const _0x1b520d=_0x59872d['data']()[_0x542b1b(0xd2)];return _0x342c26['set'](_0x3670e1,_0x1b520d),_0x1b520d;}}return _0x3670e1;}catch(_0x4fc690){return console['warn'](_0x542b1b(0x16e)+_0x3670e1+':',_0x4fc690),_0x3670e1;}};for(const _0x252905 of _0x1bf2a1['docs']){const _0x5a7698=_0x252905[_0x1bf978(0x242)](),_0xda9f22=document[_0x1bf978(0x11d)]('tr'),_0x565e96=_0x5a7698['timestamp']?new Date(_0x5a7698['timestamp']['seconds']*0x3e8)[_0x1bf978(0x1d3)]():'N/A',_0x585785=_0x5a7698['newElo']-_0x5a7698['previousElo'],_0xd5cbc2=_0x585785>0x0?_0x1bf978(0x2a0):_0x585785<0x0?'negative-change':'',_0x300685=_0x585785>0x0?'+':'',_0x4ecde4=_0x5a7698['player']||_0x5a7698['username']||_0x5a7698[_0x1bf978(0xa7)]||'N/A',_0x2c7a77=await _0xf558e1(_0x4ecde4);_0xda9f22['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x565e96+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x2c7a77+_0x1bf978(0x1e8)+(_0x5a7698[_0x1bf978(0x297)]||_0x1bf978(0x235))+_0x1bf978(0x2c0)+(_0x5a7698[_0x1bf978(0x9a)]||'N/A')+_0x1bf978(0xec)+_0xd5cbc2+'\x22>'+_0x300685+_0x585785+_0x1bf978(0x1ff)+formatHistoryType(_0x5a7698['type'])+_0x1bf978(0x285)+(_0x5a7698['modifiedBy']||_0x5a7698[_0x1bf978(0x2c2)]||_0x5a7698['demotedBy']||'System')+_0x1bf978(0x13b),_0x556d0b['appendChild'](_0xda9f22);}document['getElementById'](_0x1907cd+_0x1bf978(0xac))['textContent']='Page\x20'+_0x399d3d;const _0x1bd2ca=document[_0x1bf978(0x15f)](_0x1907cd+'-prev-page'),_0x2f4b13=document['getElementById'](_0x1907cd+'-next-page');if(_0x1bd2ca)_0x1bd2ca['disabled']=_0x399d3d<=0x1;const _0x32a4f5=query(_0x10dc4c,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x1907cd]['lastVisible']),limit(0x1)),_0x22e9d6=await getDocs(_0x32a4f5);if(_0x2f4b13)_0x2f4b13[_0x1bf978(0xb1)]=_0x22e9d6['empty'];}catch(_0x27ea1d){console['error']('Error\x20loading\x20ELO\x20history:',_0x27ea1d),_0x556d0b[_0x1bf978(0x250)]=_0x1bf978(0x2a4)+_0x27ea1d[_0x1bf978(0x122)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x18a2d1){const _0x5d4011=a4_0x11ae10;switch(_0x18a2d1){case'match_result':return'Match\x20Result';case'promotion':return'Promotion';case'demotion':return _0x5d4011(0x172);case'admin_modification':return _0x5d4011(0x113);case'initial_placement':return _0x5d4011(0x217);default:return _0x18a2d1||'Unknown';}}function setupEloHistorySection(){const _0x2a75fa=a4_0x11ae10;document[_0x2a75fa(0x15f)](_0x2a75fa(0x244))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')[_0x2a75fa(0x163)](_0x2a75fa(0x236),()=>{const _0x471d4b=_0x2a75fa;loadEloHistory(eloHistoryPagination['d1'][_0x471d4b(0x2bd)]+0x1);}),document['getElementById']('d2-prev-page')['addEventListener'](_0x2a75fa(0x236),()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener'](_0x2a75fa(0x236),()=>{const _0x5d319d=_0x2a75fa;loadEloHistory(eloHistoryPagination['d2'][_0x5d319d(0x2bd)]+0x1);});const _0x1bebba=document['getElementById'](_0x2a75fa(0x14e)),_0x4f7d08=document['getElementById']('d3-next-page');_0x1bebba&&_0x1bebba['addEventListener'](_0x2a75fa(0x236),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x4f7d08&&_0x4f7d08[_0x2a75fa(0x163)]('click',()=>{const _0x369b99=_0x2a75fa;loadEloHistory(eloHistoryPagination['d3'][_0x369b99(0x2bd)]+0x1);});const _0x409106=document[_0x2a75fa(0x15f)]('elo-history-search');_0x409106&&_0x409106['addEventListener'](_0x2a75fa(0x177),debounce(filterEloHistoryTable,0x12c));const _0x3a3a14=document['getElementById']('history-type-filter');_0x3a3a14&&_0x3a3a14['addEventListener']('change',applyEloHistoryFilters);const _0x5bdad8=document['getElementById']('reset-history-filters');_0x5bdad8&&_0x5bdad8['addEventListener'](_0x2a75fa(0x236),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x14eef8=a4_0x11ae10,_0x17fbc4=document[_0x14eef8(0x15f)]('elo-history-search')['value']['toLowerCase'](),_0x1d7da4=document['querySelectorAll'](_0x14eef8(0x187));let _0x31df95=0x0;_0x1d7da4['forEach'](_0x41319e=>{const _0x869818=_0x14eef8;if(_0x41319e[_0x869818(0x130)][_0x869818(0x284)]('loading-cell')||_0x41319e['classList']['contains']('empty-state')||_0x41319e['classList'][_0x869818(0x284)]('error-state'))return;const _0x37fca2=_0x41319e['querySelector']('.player')?.['textContent']['toLowerCase']()||'',_0x13e965=_0x41319e['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x1fadf3=_0x41319e['querySelector'](_0x869818(0xe2))?.[_0x869818(0x143)][_0x869818(0x9e)]()||'';_0x37fca2[_0x869818(0x1fa)](_0x17fbc4)||_0x13e965[_0x869818(0x1fa)](_0x17fbc4)||_0x1fadf3['includes'](_0x17fbc4)?(_0x41319e[_0x869818(0x2ce)]['display']='',_0x31df95++):_0x41319e[_0x869818(0x2ce)][_0x869818(0x289)]='none';});}async function applyEloHistoryFilters(){const _0x52c0e8=a4_0x11ae10,_0x4eefb=document[_0x52c0e8(0x15f)]('history-start-date')['value'],_0x100c4a=document['getElementById'](_0x52c0e8(0x1df))['value'],_0x4c38a3=document[_0x52c0e8(0x15f)](_0x52c0e8(0x2dc))['value'],_0x174e87=currentLadder['toLowerCase']();eloHistoryPagination[_0x174e87]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x23639e=document['getElementById']('elo-history-table-body');_0x23639e['innerHTML']=_0x52c0e8(0x74);try{const _0x1da711=currentLadder==='D1'?_0x52c0e8(0xa6):'eloHistoryD2',_0x12ea53=collection(db,_0x1da711);let _0x45120a=[orderBy(_0x52c0e8(0xf3),_0x52c0e8(0x2c3))];if(_0x4eefb){const _0x1a44b6=new Date(_0x4eefb);_0x1a44b6['setHours'](0x0,0x0,0x0,0x0),_0x45120a['push'](where('timestamp','>=',_0x1a44b6));}if(_0x100c4a){const _0x23af0f=new Date(_0x100c4a);_0x23af0f['setHours'](0x17,0x3b,0x3b,0x3e7),_0x45120a['push'](where('timestamp','<=',_0x23af0f));}_0x4c38a3&&_0x4c38a3!=='all'&&_0x45120a['push'](where(_0x52c0e8(0x119),'==',_0x4c38a3));_0x45120a['push'](limit(PAGE_SIZE));const _0x4c7399=query(_0x12ea53,..._0x45120a),_0x2c38ae=await getDocs(_0x4c7399);!_0x2c38ae[_0x52c0e8(0x264)]&&(eloHistoryPagination[_0x174e87]['firstVisible']=_0x2c38ae[_0x52c0e8(0x159)][0x0],eloHistoryPagination[_0x174e87]['lastVisible']=_0x2c38ae['docs'][_0x2c38ae['docs']['length']-0x1]);_0x23639e[_0x52c0e8(0x250)]='';if(_0x2c38ae['empty']){_0x23639e['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x2c38ae[_0x52c0e8(0x1a3)](_0x2c1648=>{const _0x59c5c3=_0x52c0e8,_0x4d093a=_0x2c1648['data'](),_0xfa281a=document[_0x59c5c3(0x11d)]('tr'),_0x4d3514=_0x4d093a['timestamp']?new Date(_0x4d093a['timestamp']['seconds']*0x3e8)[_0x59c5c3(0x1d3)]():'N/A',_0x34fcb7=_0x4d093a[_0x59c5c3(0x9a)]-_0x4d093a[_0x59c5c3(0x297)],_0x40d6f6=_0x34fcb7>0x0?_0x59c5c3(0x2a0):_0x34fcb7<0x0?'negative-change':'',_0x4ad081=_0x34fcb7>0x0?'+':'',_0x2a9d8=_0x4d093a[_0x59c5c3(0x126)]||_0x4d093a['username']||_0x4d093a['userId']||'N/A';_0xfa281a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x4d3514+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x2a9d8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x4d093a[_0x59c5c3(0x297)]||'N/A')+_0x59c5c3(0x2c0)+(_0x4d093a['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x40d6f6+'\x22>'+_0x4ad081+_0x34fcb7+_0x59c5c3(0x1ff)+formatHistoryType(_0x4d093a['type'])+_0x59c5c3(0x285)+(_0x4d093a['modifiedBy']||_0x4d093a['promotedBy']||_0x4d093a['demotedBy']||_0x59c5c3(0x1bf))+_0x59c5c3(0x13b),_0x23639e['appendChild'](_0xfa281a);}),document[_0x52c0e8(0x15f)](_0x174e87+'-page-indicator')['textContent']=_0x52c0e8(0x138);}catch(_0x265915){console['error'](_0x52c0e8(0x28b),_0x265915),_0x23639e[_0x52c0e8(0x250)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x265915[_0x52c0e8(0x122)]+_0x52c0e8(0xa3);}}function resetEloHistoryFilters(){const _0x5e995f=a4_0x11ae10;document[_0x5e995f(0x15f)]('history-start-date')['value']='',document['getElementById']('history-end-date')['value']='',document[_0x5e995f(0x15f)](_0x5e995f(0x2dc))[_0x5e995f(0x16f)]='all',document['getElementById']('elo-history-search')[_0x5e995f(0x16f)]='';const _0x47eb47=currentLadder['toLowerCase']();eloHistoryPagination[_0x47eb47]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x51ccfa=a4_0x11ae10,_0x5d3d56=document[_0x51ccfa(0x15f)](_0x51ccfa(0x27d)),_0x55b0b3=document['getElementById'](_0x51ccfa(0x1a5)),_0x211a9a=document[_0x51ccfa(0x15f)](_0x51ccfa(0x1b9));_0x5d3d56&&_0x55b0b3&&_0x211a9a&&(_0x5d3d56['addEventListener']('click',()=>{const _0x2f5cfe=_0x51ccfa;_0x55b0b3[_0x2f5cfe(0x130)]['add']('active');}),_0x55b0b3[_0x51ccfa(0x163)]('click',_0x32256d=>{_0x32256d['target']===_0x55b0b3&&_0x55b0b3['classList']['remove']('active');}),_0x211a9a['addEventListener']('submit',async _0xeab20e=>{const _0x137bb7=_0x51ccfa;_0xeab20e[_0x137bb7(0x1d7)]();const _0x15f27c=document['getElementById']('promote-username'),_0x3e8b42=document['getElementById'](_0x137bb7(0xb8)),_0x2554b6=_0x15f27c[_0x137bb7(0x16f)][_0x137bb7(0x2c5)](),_0x40d623=_0x3e8b42['value'];if(!_0x2554b6){showNotification('Please\x20enter\x20a\x20username',_0x137bb7(0x168));return;}try{await promotePlayer(_0x2554b6,_0x40d623),_0x55b0b3['classList'][_0x137bb7(0x1ee)](_0x137bb7(0x164)),_0x15f27c['value']='';}catch(_0x28a52f){showNotification(_0x28a52f['message'],'error');}}),document['getElementById']('cancel-promote-btn')[_0x51ccfa(0x163)]('click',()=>{const _0x47ae32=_0x51ccfa;_0x55b0b3[_0x47ae32(0x130)]['remove']('active');}));const _0x261f34=document[_0x51ccfa(0x15f)]('demote-player-btn'),_0x4064fc=document['getElementById']('demote-modal'),_0x2fae5b=document['getElementById']('demote-form');_0x261f34&&_0x4064fc&&_0x2fae5b&&(_0x261f34['addEventListener']('click',()=>{_0x4064fc['classList']['add']('active');}),_0x4064fc['addEventListener'](_0x51ccfa(0x236),_0x594efb=>{const _0x5e79e3=_0x51ccfa;_0x594efb[_0x5e79e3(0x1e7)]===_0x4064fc&&_0x4064fc['classList'][_0x5e79e3(0x1ee)]('active');}),_0x2fae5b['addEventListener']('submit',async _0x279f4b=>{const _0x1b6c82=_0x51ccfa;_0x279f4b['preventDefault']();const _0x203fb2=document['getElementById']('demote-username'),_0x51ff1a=document['getElementById'](_0x1b6c82(0xd6)),_0x3bf6e8=_0x203fb2['value'][_0x1b6c82(0x2c5)](),_0x1fd99c=_0x51ff1a[_0x1b6c82(0x16f)];if(!_0x3bf6e8){alert(_0x1b6c82(0xd7));return;}try{await demotePlayer(_0x3bf6e8,_0x1fd99c),document['getElementById'](_0x1b6c82(0x27f))['classList']['remove'](_0x1b6c82(0x164)),document['getElementById'](_0x1b6c82(0x121))['value']='';}catch(_0x2df6e9){console['error']('Error\x20in\x20demotion:',_0x2df6e9);}}));const _0x329f84=document[_0x51ccfa(0x15f)](_0x51ccfa(0xdd)),_0x24ff5c=document[_0x51ccfa(0x15f)]('set-elo-modal'),_0x2781c8=document['getElementById']('set-elo-form');_0x329f84&&_0x24ff5c&&_0x2781c8&&(_0x329f84['addEventListener']('click',()=>{const _0x1cfdbb=_0x51ccfa;_0x24ff5c[_0x1cfdbb(0x130)]['add']('active');}),_0x24ff5c['addEventListener'](_0x51ccfa(0x236),_0xc92042=>{const _0x579b95=_0x51ccfa;_0xc92042[_0x579b95(0x1e7)]===_0x24ff5c&&_0x24ff5c[_0x579b95(0x130)]['remove']('active');}),_0x2781c8['addEventListener']('submit',async _0x9a1b11=>{const _0x2d3f6e=_0x51ccfa;_0x9a1b11[_0x2d3f6e(0x1d7)]();const _0xf8592e=document['getElementById']('set-elo-username'),_0xd59bb6=document['getElementById']('set-elo-value');let _0x1d9049;const _0x55041b=document[_0x2d3f6e(0x15f)](_0x2d3f6e(0x82)),_0x560dac=document[_0x2d3f6e(0x1ae)](_0x2d3f6e(0x116));if(_0x55041b)_0x1d9049=_0x55041b['value'];else _0x560dac?_0x1d9049=_0x560dac['value']:_0x1d9049='D1';if(!_0xf8592e||!_0xd59bb6){showNotification(_0x2d3f6e(0x29b),'error');return;}const _0x5d3bce=_0xf8592e['value'][_0x2d3f6e(0x2c5)](),_0x2c99b0=parseInt(_0xd59bb6['value']);if(!_0x5d3bce||isNaN(_0x2c99b0)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x5d3bce,_0x2c99b0,_0x1d9049),_0x24ff5c[_0x2d3f6e(0x130)]['remove']('active'),_0xf8592e['value']='',_0xd59bb6['value']='';}catch(_0x108f7c){showNotification(_0x108f7c[_0x2d3f6e(0x122)],'error');}}),document[_0x51ccfa(0x15f)](_0x51ccfa(0x1fb))[_0x51ccfa(0x163)]('click',()=>{const _0x12da0c=_0x51ccfa;_0x24ff5c['classList'][_0x12da0c(0x1ee)]('active');}));const _0x555729=document[_0x51ccfa(0x15f)]('set-role-modal'),_0x37067d=document['getElementById']('set-role-form');if(_0x555729&&_0x37067d){_0x555729[_0x51ccfa(0x163)]('click',_0x19d128=>{_0x19d128['target']===_0x555729&&closeModalHandler();}),_0x37067d[_0x51ccfa(0x163)]('submit',async _0x3ac11e=>{const _0x315bc0=_0x51ccfa;_0x3ac11e[_0x315bc0(0x1d7)]();const _0x412819=document['getElementById']('role-username'),_0x59f180=document['getElementById'](_0x315bc0(0x20c)),_0x2cabcc=document['getElementById'](_0x315bc0(0x28c)),_0x3fa4f9=_0x412819['value']['trim'](),_0x552e6b=_0x59f180[_0x315bc0(0x16f)][_0x315bc0(0x2c5)](),_0x15a396=_0x2cabcc['value'];if(!_0x3fa4f9){showNotification(_0x315bc0(0x70),_0x315bc0(0x168));return;}try{await setUserRole(_0x3fa4f9,_0x552e6b,_0x15a396),closeModalHandler(),loadUsersWithRoles();}catch(_0xc76eb7){}});const _0x4cf536=document['getElementById']('cancel-role-btn');_0x4cf536&&(_0x4cf536['removeEventListener']('click',closeModalHandler),_0x4cf536['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x3a7a53,_0xc4e2d){const _0x3b2705=a4_0x11ae10;try{console[_0x3b2705(0x20b)](_0x3b2705(0x2aa)+_0x3a7a53+'\x20in\x20'+_0xc4e2d+_0x3b2705(0x165));const _0x4f8003=auth['currentUser'];if(!_0x4f8003)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x181f61=_0xc4e2d==='D2'?'playersD2':'players',_0x4fa368=_0xc4e2d==='D2'?'eloHistoryD2':'eloHistory';console[_0x3b2705(0x20b)]('Searching\x20for\x20player\x20in\x20'+_0x181f61);const _0x52aca6=collection(db,_0x181f61),_0x1137f5=query(_0x52aca6,where('username','==',_0x3a7a53)),_0x14fa65=await getDocs(_0x1137f5);if(_0x14fa65[_0x3b2705(0x264)]){alert('Player\x20not\x20found\x20in\x20'+_0xc4e2d+_0x3b2705(0x165));throw new Error('Player\x20not\x20found\x20in\x20'+_0xc4e2d+_0x3b2705(0x165));}const _0x52e9e3=_0x14fa65['docs'][0x0],_0x4d422e=_0x52e9e3['data'](),_0x15198a=_0x4d422e['eloRating']||0x4b0,_0x24b81f=_0x52e9e3['id'];console[_0x3b2705(0x20b)](_0x3b2705(0xda)+_0x15198a);const _0x24e9a0=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x40cc2f=_0x24e9a0[_0x3b2705(0x23d)](_0x2431e7=>_0x2431e7[_0x3b2705(0x1bc)]>_0x15198a);if(!_0x40cc2f){alert(_0x3b2705(0xe1)+_0xc4e2d+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0xc4e2d+_0x3b2705(0x165));}console['log']('Promoting\x20player\x20to\x20'+_0x40cc2f['name']+'\x20('+_0x40cc2f[_0x3b2705(0x1bc)]+')'),await updateDoc(doc(db,_0x181f61,_0x52e9e3['id']),{'eloRating':_0x40cc2f['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x4f8003[_0x3b2705(0x1d6)]||'admin'}),await addDoc(collection(db,_0x4fa368),{'player':_0x3a7a53,'previousElo':_0x15198a,'newElo':_0x40cc2f['elo'],'timestamp':serverTimestamp(),'type':_0x3b2705(0x1e0),'rankAchieved':_0x40cc2f['name'],'promotedBy':_0x4f8003[_0x3b2705(0x1d6)]||'admin','gameMode':_0xc4e2d});try{const {promotionManager:_0x53b3da}=await import(_0x3b2705(0x13c)),_0x432394=_0x53b3da['getRankName'](_0x15198a),_0x134a07=_0x40cc2f[_0x3b2705(0x69)];await _0x53b3da['sendPromotionNotification'](_0x24b81f,_0x3a7a53,_0x15198a,_0x40cc2f['elo'],_0x432394,_0x134a07,_0x3b2705(0x1e0),{'displayName':_0x3a7a53,'source':'admin','adminUser':_0x4f8003['email'],'ladder':_0xc4e2d}),console[_0x3b2705(0x20b)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x560463){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x560463);}return alert('Successfully\x20promoted\x20'+_0x3a7a53+'\x20to\x20'+_0x40cc2f['name']+'\x20('+_0x40cc2f[_0x3b2705(0x1bc)]+')'),currentLadder===_0xc4e2d&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x2711c3){console['error']('Error\x20promoting\x20player:',_0x2711c3),alert('Error\x20promoting\x20player:\x20'+_0x2711c3['message']);throw _0x2711c3;}}document[a4_0x11ae10(0x163)](a4_0x11ae10(0x76),()=>{const _0x459a53=a4_0x11ae10,_0x1b3165=document['getElementById'](_0x459a53(0x1b9));_0x1b3165&&_0x1b3165[_0x459a53(0x163)](_0x459a53(0x11f),async _0x220032=>{const _0x32204c=_0x459a53;_0x220032['preventDefault']();const _0x11aad7=document['getElementById']('promote-username')[_0x32204c(0x16f)]['trim'](),_0x3fb568=document[_0x32204c(0x1ae)](_0x32204c(0x24e))['value'];if(!_0x11aad7){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x11aad7,_0x3fb568),document['getElementById'](_0x32204c(0x1a5))['classList']['remove']('active'),document['getElementById']('promote-username')['value']='';}catch(_0x43c456){console[_0x32204c(0x168)]('Error\x20in\x20promotion:',_0x43c456);}});});async function demotePlayer(_0x228192,_0x5166fc){const _0x9d5490=a4_0x11ae10;try{console['log']('Attempting\x20to\x20demote\x20'+_0x228192+_0x9d5490(0xe3)+_0x5166fc+'\x20ladder');const _0x246e28=auth['currentUser'];if(!_0x246e28)throw new Error(_0x9d5490(0x11c));const _0x2b76f6=_0x5166fc==='D2'?'playersD2':'players',_0x3337b2=_0x5166fc==='D2'?_0x9d5490(0x12e):'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x2b76f6);const _0x434b32=collection(db,_0x2b76f6),_0x1924b6=query(_0x434b32,where('username','==',_0x228192)),_0xc4caa5=await getDocs(_0x1924b6);if(_0xc4caa5[_0x9d5490(0x264)]){alert(_0x9d5490(0x1a2)+_0x5166fc+'\x20ladder');throw new Error(_0x9d5490(0x1a2)+_0x5166fc+'\x20ladder');}const _0x2a6e91=_0xc4caa5['docs'][0x0],_0x4bc6fd=_0x2a6e91['data'](),_0x17d03c=_0x4bc6fd['eloRating']||0x4b0;console['log'](_0x9d5490(0xda)+_0x17d03c);const _0x38387a=[{'name':'Gold','elo':0x708},{'name':_0x9d5490(0x1f9),'elo':0x640},{'name':_0x9d5490(0x17d),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x190d75=_0x38387a['find'](_0x49e078=>_0x49e078['elo']<_0x17d03c);if(!_0x190d75){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x5166fc+'\x20ladder');throw new Error(_0x9d5490(0x2cb)+_0x5166fc+'\x20ladder');}console[_0x9d5490(0x20b)]('Demoting\x20player\x20to\x20'+_0x190d75[_0x9d5490(0x69)]+'\x20('+_0x190d75['elo']+')'),await updateDoc(doc(db,_0x2b76f6,_0x2a6e91['id']),{'eloRating':_0x190d75['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x246e28[_0x9d5490(0x1d6)]||'admin'}),await addDoc(collection(db,_0x3337b2),{'player':_0x228192,'previousElo':_0x17d03c,'newElo':_0x190d75[_0x9d5490(0x1bc)],'timestamp':serverTimestamp(),'type':_0x9d5490(0xe9),'rankAchieved':_0x190d75['name'],'demotedBy':_0x246e28['email']||_0x9d5490(0x198),'gameMode':_0x5166fc});try{const {promotionManager:_0x18c8d5}=await import('./promotions.js'),_0x51ac46=_0x18c8d5['getRankName'](_0x17d03c),_0x5ea548=_0x190d75[_0x9d5490(0x69)];await _0x18c8d5[_0x9d5490(0x81)](_0x2a6e91['id'],_0x228192,_0x17d03c,_0x190d75['elo'],_0x51ac46,_0x5ea548,_0x9d5490(0xe9),{'displayName':_0x228192,'source':'admin','adminUser':_0x246e28['email'],'ladder':_0x5166fc}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x211cfd){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x211cfd);}return alert('Successfully\x20demoted\x20'+_0x228192+_0x9d5490(0x1ed)+_0x190d75['name']+'\x20('+_0x190d75['elo']+')'),currentLadder===_0x5166fc&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x3ba1bb){console['error']('Error\x20demoting\x20player:',_0x3ba1bb),alert('Error\x20demoting\x20player:\x20'+_0x3ba1bb['message']);throw _0x3ba1bb;}}document[a4_0x11ae10(0x163)]('DOMContentLoaded',()=>{const _0x22b90a=document['getElementById']('demote-form');_0x22b90a&&_0x22b90a['addEventListener']('submit',async _0x222a24=>{const _0x340046=a4_0x3b2d;_0x222a24[_0x340046(0x1d7)]();const _0x1c7ce0=document['getElementById'](_0x340046(0x121))[_0x340046(0x16f)]['trim'](),_0x4a215c=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x1c7ce0){alert(_0x340046(0xd7));return;}try{await demotePlayer(_0x1c7ce0,_0x4a215c),document[_0x340046(0x15f)]('demote-modal')['classList'][_0x340046(0x1ee)](_0x340046(0x164)),document['getElementById']('demote-username')['value']='';}catch(_0x599e5b){console[_0x340046(0x168)]('Error\x20in\x20demotion:',_0x599e5b);}});});async function setCustomElo(_0x41e7b,_0x1ec2ee,_0x3feba3){const _0xcb437b=a4_0x11ae10;try{const _0x431336=auth['currentUser'];if(!_0x431336||!isAdmin(_0x431336['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x1eb523=_0x3feba3==='D2'?'playersD2':_0xcb437b(0x23a),_0x47ad06=_0x3feba3==='D2'?'eloHistoryD2':'eloHistory',_0x18ee1c=collection(db,_0x1eb523),_0xdb1930=query(_0x18ee1c,where('username','==',_0x41e7b)),_0x333d20=await getDocs(_0xdb1930);if(_0x333d20[_0xcb437b(0x264)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x3feba3+'\x20ladder');const _0x1a80b5=_0x333d20['docs'][0x0],_0x56900e=_0x1a80b5[_0xcb437b(0x242)](),_0x3bebb7=_0x56900e[_0xcb437b(0x147)]||0x4b0,_0xd4432d=writeBatch(db);_0xd4432d['update'](doc(db,_0x1eb523,_0x1a80b5['id']),{'eloRating':_0x1ec2ee,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x431336['email']});const _0x1f17cb=doc(collection(db,_0x47ad06));return _0xd4432d['set'](_0x1f17cb,{'player':_0x41e7b,'previousElo':_0x3bebb7,'newElo':_0x1ec2ee,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x431336['email'],'gameMode':_0x3feba3}),await _0xd4432d['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x41e7b+_0xcb437b(0x214)+_0x3bebb7+'\x20to\x20'+_0x1ec2ee,'success'),currentLadder===_0x3feba3&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x5da7af){console['error']('Error\x20setting\x20custom\x20ELO:',_0x5da7af);throw _0x5da7af;}}async function setUserRole(_0x43ac44,_0x43304b,_0x59ca79){const _0x3d5528=a4_0x11ae10;try{const _0x49d17d=auth['currentUser'];if(!_0x49d17d||!isAdmin(_0x49d17d[_0x3d5528(0x1d6)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x45b28c=_0x43304b?_0x43304b['trim']():null,_0x70d1d4=_0x45b28c?_0x59ca79||'#808080':null,[_0x2ffe08,_0x64806a]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x43ac44))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x43ac44)))]),_0x19c9ce=[];if(!_0x2ffe08['empty'])_0x19c9ce['push']({'ref':_0x2ffe08['docs'][0x0]['ref'],'source':'D1'});if(!_0x64806a['empty'])_0x19c9ce[_0x3d5528(0x245)]({'ref':_0x64806a['docs'][0x0]['ref'],'source':'D2'});if(_0x19c9ce[_0x3d5528(0x1ab)]===0x0){const [_0x4d5bd0,_0xcff39b]=await Promise[_0x3d5528(0x19e)]([getDocs(query(collection(db,_0x3d5528(0x1dd)),where(_0x3d5528(0xd2),'==',_0x43ac44))),getDocs(query(collection(db,_0x3d5528(0x254)),where('username','==',_0x43ac44)))]);if(!_0x4d5bd0['empty'])_0x19c9ce['push']({'ref':_0x4d5bd0['docs'][0x0]['ref'],'source':'NonParticipant'});if(!_0xcff39b[_0x3d5528(0x264)])_0x19c9ce['push']({'ref':_0xcff39b[_0x3d5528(0x159)][0x0]['ref'],'source':'UserProfile'});}if(_0x19c9ce['length']===0x0)throw new Error('User\x20\x22'+_0x43ac44+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x169eae=writeBatch(db);_0x19c9ce['forEach'](_0x100d78=>{const _0x363c8b=_0x3d5528;console['log']('Updating\x20role\x20for\x20'+_0x43ac44+'\x20in\x20'+_0x100d78[_0x363c8b(0x9f)]),!_0x45b28c?_0x169eae[_0x363c8b(0x229)](_0x100d78['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x169eae[_0x363c8b(0x229)](_0x100d78[_0x363c8b(0xe5)],{'roleName':_0x45b28c,'roleColor':_0x70d1d4,'roleAssignedBy':_0x49d17d[_0x363c8b(0x1d6)],'roleAssignedAt':serverTimestamp()});}),await _0x169eae['commit']();const _0x37db4d=_0x45b28c?_0x3d5528(0x219)+_0x45b28c+_0x3d5528(0x19b):'Role\x20removed';return showNotification(_0x37db4d+'\x20for\x20user\x20\x22'+_0x43ac44+'\x22',_0x3d5528(0xdf)),!![];}catch(_0x3a65c5){console[_0x3d5528(0x168)](_0x3d5528(0x153),_0x3a65c5),showNotification('Error:\x20'+_0x3a65c5[_0x3d5528(0x122)],_0x3d5528(0x168));throw _0x3a65c5;}}function showNotification(_0x248fac,_0x5474fc='info'){const _0x26e1f4=a4_0x11ae10,_0x15deaa=document['createElement']('div');_0x15deaa[_0x26e1f4(0x230)]='notification\x20'+_0x5474fc,_0x15deaa[_0x26e1f4(0x250)]=_0x26e1f4(0x1b8)+getNotificationIcon(_0x5474fc)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x248fac+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>Ã—</button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x15deaa),setTimeout(()=>{_0x15deaa['classList']['add']('active');},0xa);const _0x22f5eb=setTimeout(()=>{closeNotification(_0x15deaa);},0x1388);_0x15deaa['querySelector']('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x22f5eb),closeNotification(_0x15deaa);});}function getNotificationIcon(_0x56d190){const _0x2857c6=a4_0x11ae10;switch(_0x56d190){case _0x2857c6(0xdf):return _0x2857c6(0x21c);case _0x2857c6(0x168):return'fa-exclamation-circle';case'warning':return _0x2857c6(0x16c);case'info':default:return'fa-info-circle';}}function closeNotification(_0x8a0575){_0x8a0575['classList']['remove']('active'),setTimeout(()=>{_0x8a0575['remove']();},0x12c);}function setupUserRolesSection(){const _0x1d053a=a4_0x11ae10,_0x4fed8a=document['getElementById']('load-users-data');_0x4fed8a&&_0x4fed8a['addEventListener'](_0x1d053a(0x236),function(){const _0x519c03=_0x1d053a;this[_0x519c03(0x130)]['add']('loading'),this['innerHTML']=_0x519c03(0x24d),loadUsersWithRoles()['then'](()=>{const _0x221b60=_0x519c03;this['classList'][_0x221b60(0x1ee)]('loading'),this['innerHTML']=_0x221b60(0xcb);})['catch'](_0x4666d0=>{const _0x2a9316=_0x519c03;console['error'](_0x2a9316(0x262),_0x4666d0),this['classList']['remove'](_0x2a9316(0x167)),this[_0x2a9316(0x250)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x38de05=document[_0x1d053a(0x15f)](_0x1d053a(0xab));_0x38de05&&_0x38de05['addEventListener']('click',()=>{const _0x44c7ea=document['getElementById']('set-role-modal');_0x44c7ea&&_0x44c7ea['classList']['add']('active');});const _0x15c3d5=document['getElementById']('user-search');_0x15c3d5&&_0x15c3d5['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0xdb87b8=document['getElementById']('role-filter');_0xdb87b8&&_0xdb87b8['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0xf40f79=a4_0x11ae10,_0x3db1b0=document['getElementById'](_0xf40f79(0x88));if(!_0x3db1b0)return;_0x3db1b0['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x451cc2,_0x539c32,_0xa4f8b8,_0x10ff3f]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0xf40f79(0x1dd))),getDocs(collection(db,'userProfiles'))]),_0x5eb498=new Map();function _0x50e458(_0x1b790e,_0x49d182){_0x1b790e['forEach'](_0x5df0cc=>{const _0x1c7504=a4_0x3b2d,_0x42f96e=_0x5df0cc['data']();if(!_0x42f96e['username'])return;if(!_0x5eb498['has'](_0x42f96e[_0x1c7504(0xd2)]))_0x5eb498[_0x1c7504(0xfe)](_0x42f96e[_0x1c7504(0xd2)],{'username':_0x42f96e['username'],'roleName':_0x42f96e['roleName']||null,'roleColor':_0x42f96e['roleColor']||null,'roleAssignedBy':_0x42f96e['roleAssignedBy']||null,'roleAssignedAt':_0x42f96e['roleAssignedAt']||null,'sources':[_0x49d182]});else{const _0x1c9324=_0x5eb498['get'](_0x42f96e['username']);_0x42f96e[_0x1c7504(0x271)]&&(!_0x1c9324['roleName']||_0x49d182==='D1'||_0x49d182==='D2')&&(_0x1c9324['roleName']=_0x42f96e['roleName'],_0x1c9324[_0x1c7504(0x248)]=_0x42f96e['roleColor'],_0x1c9324['roleAssignedBy']=_0x42f96e[_0x1c7504(0x203)],_0x1c9324['roleAssignedAt']=_0x42f96e['roleAssignedAt']),!_0x1c9324[_0x1c7504(0x2bc)]['includes'](_0x49d182)&&_0x1c9324[_0x1c7504(0x2bc)]['push'](_0x49d182);}});}_0x50e458(_0x451cc2,'D1'),_0x50e458(_0x539c32,'D2'),_0x50e458(_0xa4f8b8,_0xf40f79(0x2a3)),_0x50e458(_0x10ff3f,'Profile');const _0x384684=Array['from'](_0x5eb498['values']())[_0xf40f79(0x211)]((_0x5cdd78,_0x36e3a0)=>_0x5cdd78[_0xf40f79(0xd2)]['localeCompare'](_0x36e3a0['username']));if(_0x384684[_0xf40f79(0x1ab)]===0x0){_0x3db1b0['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x3db1b0['innerHTML']='',_0x384684['forEach'](_0x48e503=>{const _0x119ea1=_0xf40f79,_0x85bbea=document[_0x119ea1(0x11d)]('tr');_0x85bbea[_0x119ea1(0x178)][_0x119ea1(0xd2)]=_0x48e503['username'],_0x85bbea['dataset']['roleName']=_0x48e503['roleName']||'',_0x85bbea['dataset']['roleColor']=_0x48e503[_0x119ea1(0x248)]||'#808080';const _0x166b95=_0x48e503['roleAssignedAt']?new Date(_0x48e503['roleAssignedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x686b75=_0x48e503[_0x119ea1(0x271)]?_0x119ea1(0x2b3)+_0x48e503['roleColor']+';\x20color:\x20'+getContrastColor(_0x48e503[_0x119ea1(0x248)])+';\x22>'+_0x48e503[_0x119ea1(0x271)]+_0x119ea1(0x1b0):'<span\x20class=\x22no-role\x22>None</span>';_0x85bbea['innerHTML']=_0x119ea1(0x239)+_0x48e503['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x48e503['sources'][_0x119ea1(0x2a7)](',\x20')+_0x119ea1(0x287)+_0x686b75+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x48e503['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x166b95+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x48e503['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x48e503['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x48e503['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3db1b0['appendChild'](_0x85bbea);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x250e3a=>{const _0x499eb1=_0xf40f79;_0x250e3a[_0x499eb1(0x163)](_0x499eb1(0x236),()=>{const _0x29d005=_0x250e3a['dataset']['username'];openRoleEditModal(_0x29d005);});}),document[_0xf40f79(0x1c4)](_0xf40f79(0x181))['forEach'](_0x2e9da3=>{const _0x590124=_0xf40f79;_0x2e9da3['addEventListener'](_0x590124(0x236),()=>{const _0x581872=_0x590124,_0x2f7166=_0x2e9da3[_0x581872(0x178)][_0x581872(0xd2)];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x2f7166+'?')&&setUserRole(_0x2f7166,null,null)['then'](()=>loadUsersWithRoles())[_0x581872(0x6b)](_0x5b0483=>console[_0x581872(0x168)]('Error\x20removing\x20role:',_0x5b0483));});});}catch(_0x1db006){console[_0xf40f79(0x168)]('Error\x20loading\x20users:',_0x1db006),_0x3db1b0['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x2009f5){const _0xd3d6d8=a4_0x11ae10;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x2009f5);const _0x3772ba=document[_0xd3d6d8(0x15f)]('set-role-modal'),_0x34ef95=document[_0xd3d6d8(0x15f)]('role-username'),_0x25fb24=document['getElementById']('user-role');if(!_0x3772ba){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x3772ba);_0x34ef95?(_0x34ef95[_0xd3d6d8(0x16f)]=_0x2009f5,console['log']('Username\x20input\x20set\x20to:\x20'+_0x2009f5)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x3b6469=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x2009f5+'\x22]');if(_0x3b6469&&_0x25fb24){const _0x2832bf=_0x3b6469[_0xd3d6d8(0x178)]['role'];_0x25fb24['value']=_0x2832bf==='none'?'':_0x2832bf,console[_0xd3d6d8(0x20b)]('Role\x20select\x20set\x20to:\x20'+_0x25fb24['value']+_0xd3d6d8(0x13e)+_0x2832bf+')');}else{if(!_0x3b6469)console['warn']('Table\x20row\x20for\x20user\x20'+_0x2009f5+'\x20not\x20found.');if(!_0x25fb24)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x25fb24)_0x25fb24['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x3772ba['classList']['add']('active');const _0x4b825e=document[_0xd3d6d8(0x15f)](_0xd3d6d8(0x25b));_0x4b825e?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x4b825e['removeEventListener']('click',closeModalHandler),_0x4b825e[_0xd3d6d8(0x163)]('click',closeModalHandler)):console['warn'](_0xd3d6d8(0xb9)),console[_0xd3d6d8(0x20b)]('Attaching\x20background\x20click\x20listener.'),_0x3772ba[_0xd3d6d8(0x2c9)](_0xd3d6d8(0x236),closeModalBackgroundHandler),_0x3772ba['addEventListener'](_0xd3d6d8(0x236),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x13a20b){const _0x27fa4c=a4_0x11ae10;_0x13a20b[_0x27fa4c(0x1e7)]===this&&closeModalHandler();}function closeModalHandler(){const _0x3ab632=a4_0x11ae10,_0x46c75f=document[_0x3ab632(0x15f)]('set-role-modal');_0x46c75f&&(_0x46c75f[_0x3ab632(0x130)]['remove']('active'),_0x46c75f['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x509957=a4_0x11ae10,_0x39c9e6=document[_0x509957(0x15f)]('user-search')?.['value']['toLowerCase']()||'',_0x49e516=document['getElementById'](_0x509957(0x274))?.[_0x509957(0x16f)]||'all',_0x37ac3f=document['querySelectorAll']('#users-table-body\x20tr');let _0xc30ad6=0x0;_0x37ac3f['forEach'](_0x381bd1=>{const _0x30fe66=_0x509957;if(_0x381bd1[_0x30fe66(0x1ae)]('.loading-cell')||_0x381bd1['querySelector'](_0x30fe66(0x221))||_0x381bd1['querySelector'](_0x30fe66(0x2d8)))return;const _0x502365=_0x381bd1[_0x30fe66(0x178)][_0x30fe66(0xd2)]?.['toLowerCase']()||'',_0x24271d=_0x381bd1['dataset'][_0x30fe66(0x23e)]||'none',_0x15d43a=_0x502365[_0x30fe66(0x1fa)](_0x39c9e6),_0x45a97b=_0x49e516==='all'||_0x24271d===_0x49e516;_0x15d43a&&_0x45a97b?(_0x381bd1['style']['display']='',_0xc30ad6++):_0x381bd1[_0x30fe66(0x2ce)]['display']='none';});if(_0xc30ad6===0x0&&_0x37ac3f[_0x509957(0x1ab)]>0x0){const _0x41c7ab=document[_0x509957(0x15f)]('users-table-body');if(_0x41c7ab){if(!_0x41c7ab['querySelector']('.no-results')){const _0x4f1b2e=document['createElement']('tr');_0x4f1b2e['classList']['add']('no-results'),_0x4f1b2e['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x41c7ab['appendChild'](_0x4f1b2e);}}}else{const _0xcbdaf4=document['querySelector']('.no-results');_0xcbdaf4&&_0xcbdaf4['remove']();}}function setupManageArticlesSection(){const _0x3ecbc1=a4_0x11ae10,_0x5a6dac=document['getElementById']('load-articles-data');_0x5a6dac&&_0x5a6dac['addEventListener']('click',function(){const _0x12e04f=a4_0x3b2d;this['classList'][_0x12e04f(0x18c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})[_0x12e04f(0x6b)](_0x1deb38=>{const _0x226831=_0x12e04f;console[_0x226831(0x168)]('Error\x20loading\x20articles:',_0x1deb38),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x58448c=document['getElementById'](_0x3ecbc1(0x174));_0x58448c?(console[_0x3ecbc1(0x20b)](_0x3ecbc1(0x18b)),_0x58448c['style']['display']='block',_0x58448c['addEventListener']('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x5a7ab7=document['getElementById'](_0x3ecbc1(0x12f));_0x5a7ab7&&_0x5a7ab7['addEventListener'](_0x3ecbc1(0x11f),_0x3d5610=>{_0x3d5610['preventDefault'](),saveArticle();});const _0x52ba1a=document['getElementById'](_0x3ecbc1(0x1d5));_0x52ba1a&&_0x52ba1a['addEventListener'](_0x3ecbc1(0x236),()=>{closeArticleModal();});const _0x228280=document[_0x3ecbc1(0x1ae)](_0x3ecbc1(0x193));_0x228280&&_0x228280['addEventListener']('click',()=>{closeArticleModal();});const _0x1c2773=document[_0x3ecbc1(0x15f)]('article-modal');_0x1c2773&&_0x1c2773['addEventListener']('click',_0x3e7611=>{_0x3e7611['target']===_0x1c2773&&closeArticleModal();});}async function loadArticles(){const _0x1977d5=a4_0x11ae10,_0x3f7d5e=document['getElementById']('articles-table-body');if(!_0x3f7d5e)return;_0x3f7d5e['innerHTML']=_0x1977d5(0xc6);try{const _0x3c2a5f=collection(db,'articles'),_0x303f6b=query(_0x3c2a5f,orderBy(_0x1977d5(0x1cd),'desc')),_0x11caef=await getDocs(_0x303f6b);if(_0x11caef['empty']){_0x3f7d5e['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x3f7d5e[_0x1977d5(0x250)]='',_0x11caef[_0x1977d5(0x1a3)](_0x131439=>{const _0xe8f93a=_0x1977d5,_0x207731=_0x131439[_0xe8f93a(0x242)](),_0x486e59=document['createElement']('tr'),_0xd82043=_0x207731[_0xe8f93a(0x1cd)]?new Date(_0x207731[_0xe8f93a(0x1cd)][_0xe8f93a(0x123)]*0x3e8)['toLocaleString']():'N/A';_0x486e59['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x207731['title']||_0xe8f93a(0x2bb))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x207731[_0xe8f93a(0x107)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xd82043+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x131439['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x131439['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3f7d5e[_0xe8f93a(0x1bb)](_0x486e59);}),setupArticleActionButtons();}catch(_0x3b9775){console['error']('Error\x20loading\x20articles:',_0x3b9775),_0x3f7d5e[_0x1977d5(0x250)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x3b9775[_0x1977d5(0x122)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x1ec5f1=a4_0x11ae10;document['querySelectorAll']('.edit-article-btn')['forEach'](_0x4a4bc=>{_0x4a4bc['addEventListener']('click',async _0x5cb33e=>{const _0x3d5322=_0x5cb33e['currentTarget']['dataset']['id'];openArticleModal(_0x3d5322);});}),document[_0x1ec5f1(0x1c4)]('.delete-article-btn')['forEach'](_0x1946b3=>{const _0x5e8c8d=_0x1ec5f1;_0x1946b3['addEventListener'](_0x5e8c8d(0x236),async _0x1c3573=>{const _0x20c9c2=_0x5e8c8d,_0x2dc538=_0x1c3573[_0x20c9c2(0x29c)]['dataset']['id'];confirmDeleteArticle(_0x2dc538);});});}function openArticleModal(_0x1b8322=null){const _0x3910a2=a4_0x11ae10,_0x17ccb6=document['getElementById'](_0x3910a2(0x19a)),_0x20b44c=document['getElementById']('article-modal-title'),_0xef89a8=document['getElementById']('article-form'),_0x3a9c3c=document[_0x3910a2(0x15f)]('article-id');_0xef89a8['reset'](),_0x3a9c3c[_0x3910a2(0x16f)]='';if(_0x1b8322)_0x20b44c[_0x3910a2(0x143)]='Edit\x20Article',_0x3a9c3c['value']=_0x1b8322,loadArticleData(_0x1b8322);else{_0x20b44c['textContent']='Create\x20Article';const _0xdbaf16=auth['currentUser'];if(_0xdbaf16){const _0x36435e=document['getElementById']('article-author');if(_0x36435e&&_0xdbaf16[_0x3910a2(0x18a)])_0x36435e['value']=_0xdbaf16['displayName'];else _0x36435e&&(_0x36435e['value']=_0xdbaf16[_0x3910a2(0x1d6)]);}}_0x17ccb6[_0x3910a2(0x130)]['add']('active');}async function loadArticleData(_0x310ff5){const _0x561a13=a4_0x11ae10;try{const _0x517247=doc(db,'articles',_0x310ff5),_0x261283=await getDoc(_0x517247);if(!_0x261283[_0x561a13(0x120)]()){showNotification(_0x561a13(0x183),'error');return;}const _0x189bd2=_0x261283['data']();document['getElementById']('article-title')['value']=_0x189bd2[_0x561a13(0x2a6)]||'',document['getElementById'](_0x561a13(0x259))[_0x561a13(0x16f)]=_0x189bd2[_0x561a13(0x107)]||'',document[_0x561a13(0x15f)]('article-image-url')['value']=_0x189bd2['imageUrl']||'',document['getElementById']('article-content')['value']=_0x189bd2['content']||'';}catch(_0x2d502e){console['error'](_0x561a13(0x281),_0x2d502e),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x148755=a4_0x11ae10;try{const _0x1c6248=document['getElementById'](_0x148755(0x142))['value'],_0x2a37f0=document[_0x148755(0x15f)](_0x148755(0x144))['value']['trim'](),_0x4ad4a9=document['getElementById'](_0x148755(0x259))[_0x148755(0x16f)]['trim'](),_0x64ea6b=document['getElementById']('article-image-url')['value']['trim'](),_0x38f204=document['getElementById'](_0x148755(0x169))[_0x148755(0x16f)][_0x148755(0x2c5)]();if(!_0x2a37f0||!_0x38f204){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x3e449c=auth[_0x148755(0x2b7)];if(!_0x3e449c){showNotification(_0x148755(0x93),'error');return;}const _0x221d3f={'title':_0x2a37f0,'author':_0x4ad4a9,'imageUrl':_0x64ea6b||null,'content':_0x38f204,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x3e449c['email']};!_0x1c6248?(_0x221d3f['createdAt']=serverTimestamp(),_0x221d3f['createdBy']=_0x3e449c[_0x148755(0x1d6)],await addDoc(collection(db,'articles'),_0x221d3f),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x1c6248),_0x221d3f),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x19c1c5){console[_0x148755(0x168)]('Error\x20saving\x20article:',_0x19c1c5),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x19c1c5['message'],'error');}}function closeArticleModal(){const _0x274c3d=a4_0x11ae10,_0x5cb99d=document['getElementById'](_0x274c3d(0x19a));_0x5cb99d&&_0x5cb99d['classList']['remove'](_0x274c3d(0x164));}async function confirmDeleteArticle(_0x50dc5f){const _0x44baf0=a4_0x11ae10;if(confirm(_0x44baf0(0x14d)))try{await deleteDoc(doc(db,_0x44baf0(0xdb),_0x50dc5f)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x44baf0(0xdf));}catch(_0xf2ba58){console[_0x44baf0(0x168)]('Error\x20deleting\x20article:',_0xf2ba58),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0xf2ba58['message'],'error');}}function setupTrophyManagementSection(){const _0x2a42de=a4_0x11ae10,_0x43e520=document['getElementById'](_0x2a42de(0x97));_0x43e520&&_0x43e520[_0x2a42de(0x163)](_0x2a42de(0x236),function(){const _0x3366d3=_0x2a42de;this['classList']['add']('loading'),this[_0x3366d3(0x250)]=_0x3366d3(0x24d);const _0x282443=document['getElementById'](_0x3366d3(0x294));_0x282443&&(_0x282443['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()[_0x3366d3(0x1e2)](()=>{const _0x408a94=_0x3366d3;this['classList']['remove']('loading'),this[_0x408a94(0x250)]=_0x408a94(0x2af);})['catch'](_0x37d5dc=>{const _0x2f3a36=_0x3366d3;console[_0x2f3a36(0x168)]('Error\x20loading\x20trophies:',_0x37d5dc),this['classList'][_0x2f3a36(0x1ee)]('loading'),this[_0x2f3a36(0x250)]=_0x2f3a36(0x1de),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x23a624=document['getElementById'](_0x2a42de(0x71));_0x23a624&&_0x23a624['addEventListener']('click',()=>{openTrophyModal();});const _0x505474=document[_0x2a42de(0x15f)]('trophy-form');_0x505474&&_0x505474['addEventListener']('submit',_0x2f44d9=>{_0x2f44d9['preventDefault'](),saveTrophyDefinition();});const _0x5aa7a4=document['getElementById'](_0x2a42de(0x23f));_0x5aa7a4&&_0x5aa7a4[_0x2a42de(0x163)](_0x2a42de(0x236),()=>{closeTrophyModal();});document['querySelectorAll'](_0x2a42de(0x134))['forEach'](_0x303e50=>{_0x303e50['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x1e7ccb=document['getElementById'](_0x2a42de(0x26e));_0x1e7ccb&&_0x1e7ccb['addEventListener']('click',_0x579d33=>{_0x579d33['target']===_0x1e7ccb&&closeTrophyModal();});const _0x4362e6=document['getElementById'](_0x2a42de(0x162));_0x4362e6&&_0x4362e6['addEventListener']('click',_0x2c1098=>{const _0x2dd889=_0x2a42de;_0x2c1098[_0x2dd889(0x1e7)]===_0x4362e6&&closeAssignTrophyModal();});const _0x4e067b=document[_0x2a42de(0x15f)]('assign-trophy-form');_0x4e067b&&_0x4e067b['addEventListener']('submit',_0x12cb26=>{_0x12cb26['preventDefault'](),assignTrophyToPlayer();});const _0xcaff48=document['getElementById'](_0x2a42de(0xa9));_0xcaff48&&_0xcaff48['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x3e97ef=document['getElementById']('trophy-image-url');_0x3e97ef&&(_0x3e97ef['addEventListener']('input',updateTrophyImagePreview),_0x3e97ef[_0x2a42de(0x163)]('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x5e875b=a4_0x11ae10,_0x32c08b=document['getElementById']('trophy-image-url')['value']['trim'](),_0x5b45f4=document['getElementById'](_0x5e875b(0x257));if(!_0x5b45f4){const _0x165b55=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x44418c=document[_0x5e875b(0x11d)]('div');_0x44418c['id']='trophy-image-preview',_0x44418c['className']='trophy-preview-container',_0x165b55['appendChild'](_0x44418c);const _0x20f2c3=document['createElement']('img');_0x20f2c3['id']=_0x5e875b(0xf1),_0x20f2c3[_0x5e875b(0x15c)]='Trophy\x20Preview',_0x20f2c3['onerror']=function(){const _0xdaac11=_0x5e875b;this[_0xdaac11(0xf9)]=DEFAULT_TROPHY_IMAGE,this[_0xdaac11(0x130)]['add']('error');},_0x44418c[_0x5e875b(0x1bb)](_0x20f2c3);}const _0x17ba09=document['getElementById']('trophy-preview-img');_0x32c08b?(_0x17ba09['src']=_0x32c08b,_0x17ba09[_0x5e875b(0x2ce)]['display']=_0x5e875b(0x222),_0x17ba09[_0x5e875b(0x130)][_0x5e875b(0x1ee)](_0x5e875b(0x168))):(_0x17ba09['src']=DEFAULT_TROPHY_IMAGE,_0x17ba09['style'][_0x5e875b(0x289)]='block');}async function loadTrophyDefinitions(){const _0x5386a0=a4_0x11ae10,_0x54bf83=document['getElementById']('trophies-table-body');if(!_0x54bf83)return;_0x54bf83['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x46b84b=collection(db,'trophyDefinitions'),_0x1ca236=query(_0x46b84b,orderBy('createdAt','desc')),_0x56b744=await getDocs(_0x1ca236);if(_0x56b744['empty']){_0x54bf83['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x54bf83['innerHTML']='',_0x56b744['forEach'](_0x4d7e4e=>{const _0x30c232=a4_0x3b2d,_0x56285c=_0x4d7e4e[_0x30c232(0x242)](),_0xcc00ed=document[_0x30c232(0x11d)]('tr'),_0x3ca203=_0x56285c['createdAt']?new Date(_0x56285c['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0xcc00ed['innerHTML']=_0x30c232(0xc5)+(_0x56285c['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x56285c['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x56285c['name']||_0x30c232(0x2dd))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x56285c['rarity']||'common')+'\x22>'+(_0x56285c['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ca203+_0x30c232(0x175)+_0x4d7e4e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x4d7e4e['id']+_0x30c232(0x80)+_0x4d7e4e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x54bf83['appendChild'](_0xcc00ed);}),setupTrophyActionButtons();}catch(_0x4efde6){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x4efde6),_0x54bf83['innerHTML']=_0x5386a0(0x1f8)+_0x4efde6['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x1689f6=a4_0x11ae10;document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x54aa86=>{_0x54aa86['addEventListener']('click',_0xbebe67=>{const _0x38483f=_0xbebe67['currentTarget']['dataset']['id'];openTrophyModal(_0x38483f);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x3a606c=>{_0x3a606c['addEventListener']('click',_0x4cd7b9=>{const _0x41a820=a4_0x3b2d,_0x5d5294=_0x4cd7b9[_0x41a820(0x29c)][_0x41a820(0x178)]['id'];openAssignTrophyModal(_0x5d5294);});}),document['querySelectorAll'](_0x1689f6(0x243))['forEach'](_0x2e5501=>{_0x2e5501['addEventListener']('click',_0x2e8aea=>{const _0x223eeb=_0x2e8aea['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x223eeb);});});}function openTrophyModal(_0xc36e6d=null){const _0x372585=a4_0x11ae10,_0x5696c0=document[_0x372585(0x15f)](_0x372585(0x26e)),_0x1b4f34=document['getElementById']('trophy-modal-title'),_0x4ee349=document['getElementById']('trophy-form'),_0x2d3964=document['getElementById']('trophy-id');_0x4ee349['reset'](),_0x2d3964[_0x372585(0x16f)]='';const _0x461717=document['getElementById'](_0x372585(0xf1));_0x461717&&(_0x461717[_0x372585(0xf9)]=DEFAULT_TROPHY_IMAGE,_0x461717['classList']['remove'](_0x372585(0x168))),_0xc36e6d?(_0x1b4f34['textContent']=_0x372585(0xde),_0x2d3964['value']=_0xc36e6d,loadTrophyData(_0xc36e6d)):_0x1b4f34[_0x372585(0x143)]=_0x372585(0x18d),_0x5696c0['classList']['add'](_0x372585(0x164));}async function loadTrophyData(_0x5e59a7){const _0x31d887=a4_0x11ae10;try{const _0x166890=doc(db,'trophyDefinitions',_0x5e59a7),_0x3a5dd3=await getDoc(_0x166890);if(!_0x3a5dd3['exists']()){showNotification(_0x31d887(0xca),_0x31d887(0x168));return;}const _0x1b1204=_0x3a5dd3['data']();document['getElementById'](_0x31d887(0x1db))['value']=_0x1b1204['name']||'',document[_0x31d887(0x15f)]('trophy-description')['value']=_0x1b1204['description']||'',document['getElementById']('trophy-image-url')['value']=_0x1b1204['image']||'',document[_0x31d887(0x15f)](_0x31d887(0x260))['value']=_0x1b1204['rarity']||'common',updateTrophyImagePreview();}catch(_0x23a34d){console[_0x31d887(0x168)]('Error\x20loading\x20trophy\x20data:',_0x23a34d),showNotification(_0x31d887(0x1ac),_0x31d887(0x168));}}async function saveTrophyDefinition(){const _0x500692=a4_0x11ae10;try{const _0x236a6f=document['getElementById'](_0x500692(0x1e3))['value'],_0x428ebc=document[_0x500692(0x15f)]('trophy-name')['value']['trim'](),_0x55f074=document['getElementById']('trophy-description')[_0x500692(0x16f)]['trim'](),_0x23aed7=document[_0x500692(0x15f)]('trophy-image-url')['value']['trim'](),_0x115865=document['getElementById']('trophy-rarity')['value'];if(!_0x428ebc||!_0x55f074||!_0x23aed7){showNotification(_0x500692(0x99),_0x500692(0x168));return;}const _0x532ccc=auth[_0x500692(0x2b7)];if(!_0x532ccc){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x3fde8e={'name':_0x428ebc,'description':_0x55f074,'image':_0x23aed7,'rarity':_0x115865,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x532ccc[_0x500692(0x1d6)]};!_0x236a6f?(_0x3fde8e['createdAt']=serverTimestamp(),_0x3fde8e[_0x500692(0x1fe)]=_0x532ccc['email'],await addDoc(collection(db,'trophyDefinitions'),_0x3fde8e),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x236a6f),_0x3fde8e),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x3ff5b0){console[_0x500692(0x168)]('Error\x20saving\x20trophy:',_0x3ff5b0),showNotification(_0x500692(0x160)+_0x3ff5b0[_0x500692(0x122)],_0x500692(0x168));}}function closeTrophyModal(){const _0x6d7fe5=a4_0x11ae10,_0x4a3095=document[_0x6d7fe5(0x15f)]('trophy-modal');_0x4a3095&&_0x4a3095['classList'][_0x6d7fe5(0x1ee)]('active');}async function confirmDeleteTrophy(_0x5c4f9c){const _0x59a417=a4_0x11ae10;if(!_0x5c4f9c){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0xbb654d=auth['currentUser'];if(!_0xbb654d){showNotification(_0x59a417(0x14b),_0x59a417(0x168));return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x5c4f9c),await deleteDoc(doc(db,'trophyDefinitions',_0x5c4f9c)),showNotification(_0x59a417(0x104),'success'),loadTrophyDefinitions();}catch(_0x1a1211){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x1a1211),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x1a1211['message'],'error');}}async function openAssignTrophyModal(_0x3cfdd6){const _0x32aa32=a4_0x11ae10;try{const _0x22bf6c=doc(db,'trophyDefinitions',_0x3cfdd6),_0x2b93d3=await getDoc(_0x22bf6c);if(!_0x2b93d3['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x57499d=_0x2b93d3[_0x32aa32(0x242)]();document['getElementById'](_0x32aa32(0x28f))['value']=_0x3cfdd6,document['getElementById']('assign-trophy-name')['value']=_0x57499d[_0x32aa32(0x69)],document['getElementById'](_0x32aa32(0x294))['src']=_0x57499d['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')[_0x32aa32(0x143)]=_0x57499d['name']||_0x32aa32(0x1dc),document['getElementById']('assign-trophy-description')['textContent']=_0x57499d[_0x32aa32(0x298)]||'No\x20description';const _0x3b2f24=document['getElementById'](_0x32aa32(0x166));_0x3b2f24['textContent']=_0x57499d[_0x32aa32(0x224)]||'common',_0x3b2f24[_0x32aa32(0x230)]='trophy-rarity\x20'+(_0x57499d['rarity']||'common');const _0x19f3b9=document['getElementById']('assign-trophy-modal');_0x19f3b9['classList'][_0x32aa32(0x18c)]('active');}catch(_0x29f0e7){console['error'](_0x32aa32(0x232),_0x29f0e7),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x470628=a4_0x11ae10,_0x47102a=document['getElementById']('assign-trophy-modal');_0x47102a&&_0x47102a[_0x470628(0x130)][_0x470628(0x1ee)]('active');}async function assignTrophyToPlayer(){const _0x2c1c82=a4_0x11ae10;try{const _0x161637=document[_0x2c1c82(0x15f)]('assign-trophy-id')['value'],_0x1625a8=document['getElementById'](_0x2c1c82(0x210))['value'],_0x1a94af=document[_0x2c1c82(0x15f)]('assign-player-username')['value']['trim'](),_0x3f1013=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x161637||!_0x1a94af){showNotification(_0x2c1c82(0x282),'error');return;}const _0x48f770=auth['currentUser'];if(!_0x48f770){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies',_0x2c1c82(0x168));return;}let _0x1895f1=null,_0x1fc21b=null,_0x863207=null;if(_0x3f1013==='non-participant'){const _0x1107e6=collection(db,'nonParticipants'),_0x4f305a=query(_0x1107e6,where(_0x2c1c82(0xd2),'==',_0x1a94af)),_0x434060=await getDocs(_0x4f305a);!_0x434060['empty']&&(_0x1895f1=_0x434060['docs'][0x0],_0x1fc21b=_0x1895f1['id'],_0x863207=_0x1895f1['data']());}else{const _0x138f2d=_0x3f1013==='D1'?'players':_0x3f1013==='D2'?'playersD2':_0x2c1c82(0x22f),_0x33ecb5=collection(db,_0x138f2d),_0x2cd6ad=query(_0x33ecb5,where('username','==',_0x1a94af)),_0x37c194=await getDocs(_0x2cd6ad);!_0x37c194['empty']&&(_0x1895f1=_0x37c194[_0x2c1c82(0x159)][0x0],_0x1fc21b=_0x1895f1['id'],_0x863207=_0x1895f1['data']());}if(!_0x1895f1){showNotification(_0x2c1c82(0xe7)+_0x1a94af+'\x22\x20not\x20found\x20in\x20'+(_0x3f1013===_0x2c1c82(0x73)?_0x2c1c82(0x278):_0x3f1013+'\x20ladder'),'error');return;}const _0x531281=collection(db,'userTrophies'),_0x134bb5=query(_0x531281,where('userId','==',_0x1fc21b),where('trophyId','==',_0x161637)),_0x1a6d4c=await getDocs(_0x134bb5);if(!_0x1a6d4c['empty']){showNotification('Player\x20\x22'+_0x1a94af+'\x22\x20already\x20has\x20this\x20trophy',_0x2c1c82(0x84));return;}await addDoc(collection(db,_0x2c1c82(0x1b6)),{'userId':_0x1fc21b,'playerUsername':_0x1a94af,'trophyId':_0x161637,'awardedAt':serverTimestamp(),'awardedBy':_0x48f770['email'],'ladder':_0x3f1013}),showNotification('Trophy\x20\x22'+_0x1625a8+_0x2c1c82(0x1b4)+_0x1a94af,_0x2c1c82(0xdf)),closeAssignTrophyModal();}catch(_0x583aca){console['error']('Error\x20assigning\x20trophy:',_0x583aca),showNotification(_0x2c1c82(0xf7)+_0x583aca['message'],'error');}}function setupInactivePlayersSection(){const _0x1b1761=a4_0x11ae10,_0x3589ed=document[_0x1b1761(0x15f)]('inactive-days-filter');_0x3589ed&&_0x3589ed['addEventListener']('change',function(){const _0x230944=_0x1b1761,_0x1e7e23=document[_0x230944(0x15f)]('load-inactive-players-data');if(_0x1e7e23)_0x1e7e23['click']();});const _0x332616=document[_0x1b1761(0x1ae)]('.ladder-switch\x20input[value=\x22D1\x22]'),_0x33795c=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x332616&&_0x33795c&&(_0x332616['addEventListener'](_0x1b1761(0x21e),function(){const _0x54bc4e=_0x1b1761;if(this['checked']){currentLadder='D1';if(document[_0x54bc4e(0x15f)]('inactive-players')['style']['display']!=='none'){const _0x1a5c60=document['getElementById']('load-inactive-players-data');if(_0x1a5c60)_0x1a5c60['click']();}}}),_0x33795c['addEventListener'](_0x1b1761(0x21e),function(){const _0x26cdd6=_0x1b1761;if(this[_0x26cdd6(0x200)]){currentLadder='D2';if(document['getElementById']('inactive-players')['style']['display']!==_0x26cdd6(0xea)){const _0x4959d7=document['getElementById']('load-inactive-players-data');if(_0x4959d7)_0x4959d7['click']();}}}));const _0x28d075=document['getElementById']('inactive-players-search');_0x28d075&&_0x28d075[_0x1b1761(0x163)]('input',debounce(function(){const _0x3069f0=_0x1b1761,_0x7ea89=_0x28d075[_0x3069f0(0x16f)]['toLowerCase'](),_0x2dbe47=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x2dbe47['forEach'](_0x372d15=>{const _0x1f6824=_0x3069f0;if(_0x372d15[_0x1f6824(0x1ae)](_0x1f6824(0x16b))||_0x372d15['querySelector']('.empty-state')||_0x372d15['querySelector'](_0x1f6824(0x2d8)))return;const _0x2418d9=_0x372d15[_0x1f6824(0x17e)][0x0]?.['textContent']['toLowerCase']()||'',_0x5e9944=_0x372d15['cells'][0x5]?.[_0x1f6824(0x143)]['toLowerCase']()||'';_0x2418d9['includes'](_0x7ea89)||_0x5e9944[_0x1f6824(0x1fa)](_0x7ea89)?_0x372d15[_0x1f6824(0x2ce)]['display']='':_0x372d15['style'][_0x1f6824(0x289)]='none';});},0x12c)),document[_0x1b1761(0x163)](_0x1b1761(0x236),function(_0x444c28){const _0x13be6c=_0x1b1761;if(_0x444c28['target']['closest']('.view-player-btn')){const _0x23bd54=_0x444c28['target']['closest']('.view-player-btn'),_0x170d14=_0x23bd54[_0x13be6c(0x178)]['username'];_0x170d14&&alert(_0x13be6c(0x1a9)+_0x170d14+_0x13be6c(0x22c));}}),console[_0x1b1761(0x20b)](_0x1b1761(0x118));}async function loadInactivePlayersData(){const _0x5b4ac=a4_0x11ae10,_0x38dde=document[_0x5b4ac(0x15f)]('inactive-players-table-body');if(!_0x38dde)return;_0x38dde['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x165ce4=document['getElementById']('inactive-days-filter'),_0x409a35=_0x165ce4?parseInt(_0x165ce4[_0x5b4ac(0x16f)])||0x0:0x0,_0x12d505=collection(db,currentLadder==='D1'?'players':_0x5b4ac(0x295)),_0x4f1fad=await getDocs(_0x12d505);if(_0x4f1fad['empty']){_0x38dde[_0x5b4ac(0x250)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x9e19af=[];_0x4f1fad[_0x5b4ac(0x1a3)](_0x1444cf=>{const _0x51e9c3=_0x5b4ac,_0x1de8ed=_0x1444cf['data']();_0x9e19af['push']({..._0x1de8ed,'id':_0x1444cf['id'],'username':_0x1de8ed[_0x51e9c3(0xd2)]||_0x51e9c3(0x11b)});}),console['log']('Found\x20'+_0x9e19af['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+_0x5b4ac(0x165));const _0x225d90=currentLadder==='D1'?_0x5b4ac(0x25d):_0x5b4ac(0x103),_0x4f40e0=_0x9e19af['map'](async _0x620c28=>{const _0x5d9de8=_0x5b4ac;try{const _0x2cdeed=collection(db,_0x225d90),_0x169daa=query(_0x2cdeed,or(where('winnerUsername','==',_0x620c28[_0x5d9de8(0xd2)]),where('loserUsername','==',_0x620c28[_0x5d9de8(0xd2)])),orderBy(_0x5d9de8(0x149),_0x5d9de8(0x2c3)),limit(0x1)),_0x143f7a=await getDocs(_0x169daa);if(!_0x143f7a['empty']){const _0x3ca042=_0x143f7a['docs'][0x0]['data'](),_0x145da1=_0x3ca042[_0x5d9de8(0x149)]?new Date(_0x3ca042[_0x5d9de8(0x149)][_0x5d9de8(0x123)]*0x3e8):null,_0x521566=new Date(),_0x473fa3=_0x145da1?Math['floor']((_0x521566-_0x145da1)/(0x3e8*0x3c*0x3c*0x18)):null,_0x585add=_0x3ca042['winnerUsername']===_0x620c28['username']?_0x3ca042['loserUsername']:_0x3ca042['winnerUsername'],_0x2a1256=_0x3ca042['winnerUsername']===_0x620c28['username']?'Won':'Lost';return{..._0x620c28,'lastMatch':{'date':_0x145da1?_0x145da1['toLocaleDateString']():_0x5d9de8(0x235),'opponent':_0x585add||_0x5d9de8(0x261),'result':_0x2a1256,'timestamp':_0x145da1||new Date(0x0),'daysSinceMatch':_0x473fa3||Number['MAX_SAFE_INTEGER']}};}else return{..._0x620c28,'lastMatch':{'date':'Never\x20played','opponent':_0x5d9de8(0x235),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x3f65a6){return console[_0x5d9de8(0x168)](_0x5d9de8(0xee)+_0x620c28[_0x5d9de8(0xd2)]+':',_0x3f65a6),{..._0x620c28,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x4a8b18=await Promise[_0x5b4ac(0x19e)](_0x4f40e0);_0x4a8b18[_0x5b4ac(0x211)]((_0x3de1db,_0x1e6f2f)=>_0x1e6f2f['lastMatch']['daysSinceMatch']-_0x3de1db['lastMatch']['daysSinceMatch']);_0x409a35>0x0&&(_0x4a8b18=_0x4a8b18['filter'](_0xf6fb0a=>_0xf6fb0a['lastMatch']['daysSinceMatch']>=_0x409a35));_0x38dde['innerHTML']='';if(_0x4a8b18[_0x5b4ac(0x1ab)]===0x0){_0x38dde['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x4a8b18['forEach'](_0x2da18d=>{const _0x2b6b33=_0x5b4ac,_0x41bd6a=document[_0x2b6b33(0x11d)]('tr'),_0x3a3211=_0x2da18d[_0x2b6b33(0x283)]['daysSinceMatch']>0x1e?'highly-inactive':_0x2da18d['lastMatch'][_0x2b6b33(0x22e)]>0xe?'moderately-inactive':'';_0x41bd6a[_0x2b6b33(0x230)]=_0x3a3211,_0x41bd6a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2da18d['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2da18d['eloRating']||0x4b0)+_0x2b6b33(0x1f4)+_0x2da18d['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2da18d['lastMatch'][_0x2b6b33(0x22e)]===Number[_0x2b6b33(0x9c)]?_0x2b6b33(0x235):_0x2da18d[_0x2b6b33(0x283)]['daysSinceMatch'])+_0x2b6b33(0x1f4)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2da18d['lastMatch']['date']===_0x2b6b33(0x1f5)?'No\x20matches\x20found':_0x2da18d['lastMatch'][_0x2b6b33(0x185)]+'\x20vs\x20'+_0x2da18d['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x2da18d[_0x2b6b33(0xd2)]+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x38dde['appendChild'](_0x41bd6a);}),console[_0x5b4ac(0x20b)](_0x5b4ac(0xb5)+_0x4a8b18['length']+'\x20inactive\x20players');}catch(_0x5014b0){console['error']('Error\x20loading\x20inactive\x20players:',_0x5014b0),_0x38dde['innerHTML']=_0x5b4ac(0x1f2)+_0x5014b0[_0x5b4ac(0x122)]+'</td></tr>';}}function setupHighlightButtons(){const _0x31f034=a4_0x11ae10;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x4b6d76=document[_0x31f034(0x15f)](_0x31f034(0x112));_0x4b6d76&&_0x4b6d76['addEventListener'](_0x31f034(0x236),function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0xbdb0eb=document[_0x31f034(0x15f)](_0x31f034(0x14f));_0xbdb0eb&&_0xbdb0eb[_0x31f034(0x163)]('click',function(){const _0x5719cc=_0x31f034;console[_0x5719cc(0x20b)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal(_0x5719cc(0x20d));});const _0x445382=document['getElementById']('create-achievement-highlight-btn');_0x445382&&_0x445382['addEventListener'](_0x31f034(0x236),function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x2c3550='match'){const _0x35e9dc=a4_0x11ae10;console[_0x35e9dc(0x20b)]('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x2c3550);const _0x553e89=document['getElementById']('highlight-modal'),_0x2a266e=document['getElementById']('highlight-form'),_0x4e6341=document['getElementById']('highlight-modal-title'),_0x26e3a4=document['getElementById']('highlight-id');if(!_0x553e89||!_0x2a266e||!_0x4e6341){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x2a266e['reset'](),_0x26e3a4['value']='';const _0xd0a4b7=['match','creator',_0x35e9dc(0x75)],_0x417a5a=!_0xd0a4b7['includes'](_0x2c3550);if(_0x417a5a){const _0x5a9186=_0x2c3550;_0x26e3a4[_0x35e9dc(0x16f)]=_0x5a9186,_0x4e6341['textContent']='Loading...',loadHighlightDataAdmin(_0x5a9186);}else{const _0x1ead33=_0x2c3550;document['getElementById']('highlight-type')[_0x35e9dc(0x16f)]=_0x1ead33,_0x4e6341['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x1ead33),toggleHighlightFields(_0x1ead33);const _0x439cbb=auth['currentUser'];_0x439cbb&&document['getElementById'](_0x35e9dc(0x1e1))&&(document['getElementById']('highlight-submitted-by')['value']=_0x439cbb[_0x35e9dc(0x18a)]||_0x439cbb['email']);}_0x553e89['classList']['add'](_0x35e9dc(0x164));}function toggleHighlightFields(_0x50bc1b){const _0x3d7751=a4_0x11ae10;console['log'](_0x3d7751(0x15b)+_0x50bc1b);const _0x1a04d6=document['getElementById'](_0x3d7751(0x1e9));if(!_0x1a04d6)return;const _0x20723e=_0x1a04d6[_0x3d7751(0x1c4)]('.form-group,\x20.form-row');_0x20723e['forEach'](_0x5d2cf1=>_0x5d2cf1['style'][_0x3d7751(0x289)]='none');const _0x21fa18=document[_0x3d7751(0x15f)]('highlight-video-preview-container');if(_0x21fa18)_0x21fa18[_0x3d7751(0x2ce)]['display']=_0x3d7751(0xea);const _0x41437a=['highlight-title-container','highlight-description-container',_0x3d7751(0x21b)];_0x41437a['forEach'](_0x345215=>{const _0x8a2c83=_0x3d7751,_0x3adca8=document[_0x8a2c83(0x15f)](_0x345215);if(_0x3adca8)_0x3adca8['style'][_0x8a2c83(0x289)]=_0x8a2c83(0x222);});if(_0x50bc1b==='match'){const _0x1d9285=[_0x3d7751(0x1d8),_0x3d7751(0x197),_0x3d7751(0x2ad),'highlight-match-date-container','highlight-players-container',_0x3d7751(0x105)];_0x1d9285[_0x3d7751(0x1a3)](_0x2aa390=>{const _0x15a769=_0x3d7751,_0x37898c=document[_0x15a769(0x15f)](_0x2aa390);_0x37898c&&(_0x2aa390==='highlight-players-container'?_0x37898c[_0x15a769(0x2ce)][_0x15a769(0x289)]='flex':_0x37898c['style'][_0x15a769(0x289)]='block');});const _0x2bf14f=document['getElementById']('highlight-video-id');if(_0x2bf14f){_0x2bf14f['required']=!![];const _0x4aab02=_0x2bf14f['previousElementSibling'];if(_0x4aab02)_0x4aab02[_0x3d7751(0x250)]=_0x3d7751(0xeb);}if(_0x21fa18)_0x21fa18['style'][_0x3d7751(0x289)]='block';updateHighlightVideoPreview();}else{if(_0x50bc1b==='creator'){const _0xd0339a=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0xd0339a['forEach'](_0x6e5bfd=>{const _0xf37263=_0x3d7751,_0x187888=document['getElementById'](_0x6e5bfd);if(_0x187888)_0x187888['style']['display']=_0xf37263(0x222);});const _0x11d39e=document[_0x3d7751(0x15f)]('highlight-video-id');if(_0x11d39e){_0x11d39e['required']=![];const _0x221a06=_0x11d39e['previousElementSibling'];if(_0x221a06)_0x221a06['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x50bc1b==='achievement'){const _0x2d615c=[_0x3d7751(0x2d1),_0x3d7751(0x190),_0x3d7751(0x2a2),'highlight-player-profile-container',_0x3d7751(0x12a),'highlight-video-container'];_0x2d615c[_0x3d7751(0x1a3)](_0x181e8c=>{const _0xc3738e=document['getElementById'](_0x181e8c);if(_0xc3738e)_0xc3738e['style']['display']='block';});const _0x3df040=document[_0x3d7751(0x15f)]('highlight-video-id');if(_0x3df040){_0x3df040['required']=![];const _0x396a75=_0x3df040['previousElementSibling'];if(_0x396a75)_0x396a75['innerHTML']=_0x3d7751(0x16d);}}}}}async function loadHighlightDataAdmin(_0x546401){const _0x5048cb=a4_0x11ae10;try{const _0x32e961=doc(db,'highlights',_0x546401),_0x21b0c6=await getDoc(_0x32e961);if(!_0x21b0c6['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x41ffc8=_0x21b0c6[_0x5048cb(0x242)](),_0xc02e32=_0x41ffc8[_0x5048cb(0x119)]||_0x5048cb(0x196);document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0xc02e32),document['getElementById']('highlight-type')['value']=_0xc02e32,toggleHighlightFields(_0xc02e32),document['getElementById'](_0x5048cb(0x277))['value']=_0x41ffc8['title']||'',document[_0x5048cb(0x15f)]('highlight-description')['value']=_0x41ffc8['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x41ffc8[_0x5048cb(0x21f)]||'';_0x41ffc8['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x41ffc8[_0x5048cb(0x8a)],updateHighlightVideoPreview());if(_0xc02e32===_0x5048cb(0x196)){document[_0x5048cb(0x15f)]('highlight-match-info')['value']=_0x41ffc8[_0x5048cb(0x1c6)]||'',document['getElementById'](_0x5048cb(0x1a6))['value']=_0x41ffc8['map']||'';if(_0x41ffc8['matchDate']){const _0x174fb2=new Date(_0x41ffc8['matchDate'][_0x5048cb(0x123)]*0x3e8);document['getElementById'](_0x5048cb(0x2b6))['value']=_0x174fb2['toISOString']()['split']('T')[0x0];}document[_0x5048cb(0x15f)]('highlight-winner-name')['value']=_0x41ffc8['winnerName']||'',document['getElementById'](_0x5048cb(0x9d))['value']=_0x41ffc8['winnerScore']||'',document['getElementById']('highlight-loser-name')['value']=_0x41ffc8[_0x5048cb(0x2b8)]||'',document['getElementById']('highlight-loser-score')[_0x5048cb(0x16f)]=_0x41ffc8['loserScore']||'',document['getElementById']('highlight-match-link')['value']=_0x41ffc8['matchLink']||'';}else{if(_0xc02e32==='creator')document['getElementById']('highlight-map')[_0x5048cb(0x16f)]=_0x41ffc8['map']||'',document[_0x5048cb(0x15f)](_0x5048cb(0x2ae))['value']=_0x41ffc8[_0x5048cb(0x7f)]||'',document['getElementById'](_0x5048cb(0xf2))['value']=_0x41ffc8['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x41ffc8['creatorImageUrl']||'';else _0xc02e32===_0x5048cb(0x75)&&(document['getElementById']('highlight-achievement-player')['value']=_0x41ffc8[_0x5048cb(0x23b)]||'',document['getElementById'](_0x5048cb(0x270))['value']=_0x41ffc8['achievementType']||'',document[_0x5048cb(0x15f)]('highlight-achievement-details')[_0x5048cb(0x16f)]=_0x41ffc8['achievementDetails']||'',document['getElementById'](_0x5048cb(0xc7))['value']=_0x41ffc8['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')[_0x5048cb(0x16f)]=_0x41ffc8['achievementImageUrl']||'');}}catch(_0x244af4){console['error']('Error\x20loading\x20highlight:',_0x244af4),showNotification('Error\x20loading\x20highlight:\x20'+_0x244af4['message'],'error');}}async function saveHighlight(){const _0xd0799c=a4_0x11ae10;try{const _0x329eb7=document[_0xd0799c(0x15f)]('highlight-id')?.['value']||'',_0x470677=document['getElementById']('highlight-type')?.['value']||_0xd0799c(0x196),_0x4770e5={'title':document['getElementById']('highlight-title')?.[_0xd0799c(0x16f)]?.[_0xd0799c(0x2c5)]()||'','description':document['getElementById']('highlight-description')?.[_0xd0799c(0x16f)]?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.[_0xd0799c(0x2c5)]()||null,'type':_0x470677};if(!_0x4770e5['title']){showNotification(_0xd0799c(0x1be),'error');return;}if(_0x470677==='match'){_0x4770e5['matchInfo']=document['getElementById'](_0xd0799c(0x1af))?.['value']?.['trim']()||'',_0x4770e5['map']=document['getElementById']('highlight-map')?.['value']?.[_0xd0799c(0x2c5)]()||'';const _0x21b21e=document['getElementById']('highlight-match-date'),_0x1649a5=_0x21b21e?.['value']||'';_0x4770e5[_0xd0799c(0x176)]=_0x1649a5?Timestamp['fromDate'](new Date(_0x1649a5)):null,_0x4770e5['winnerName']=document['getElementById']('highlight-winner-name')?.['value']?.['trim']()||'',_0x4770e5[_0xd0799c(0xc2)]=document[_0xd0799c(0x15f)]('highlight-winner-score')?.['value']?.[_0xd0799c(0x2c5)]()||'',_0x4770e5['loserName']=document['getElementById'](_0xd0799c(0x1f1))?.[_0xd0799c(0x16f)]?.['trim']()||'',_0x4770e5['loserScore']=document[_0xd0799c(0x15f)](_0xd0799c(0x292))?.['value']?.[_0xd0799c(0x2c5)]()||'',_0x4770e5['matchLink']=document['getElementById']('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x4770e5['videoId']){showNotification(_0xd0799c(0x1e5),'error');return;}}else{if(_0x470677==='creator'){_0x4770e5[_0xd0799c(0x20f)]=document[_0xd0799c(0x15f)]('highlight-map')?.[_0xd0799c(0x16f)]?.['trim']()||'',_0x4770e5['mapCreator']=document['getElementById']('highlight-map-creator')?.[_0xd0799c(0x16f)]?.['trim']()||'',_0x4770e5['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x4770e5['creatorImageUrl']=document['getElementById']('highlight-creator-image')?.['value']?.['trim']()||'';if(!_0x4770e5['mapCreator']){showNotification('Map\x20Creator\x20is\x20required',_0xd0799c(0x168));return;}}else{if(_0x470677==='achievement'){_0x4770e5['achievementPlayer']=document[_0xd0799c(0x15f)]('highlight-achievement-player')?.['value']?.['trim']()||'',_0x4770e5[_0xd0799c(0x189)]=document[_0xd0799c(0x15f)]('highlight-achievement-type')?.['value']?.['trim']()||'',_0x4770e5[_0xd0799c(0x91)]=document['getElementById'](_0xd0799c(0x106))?.[_0xd0799c(0x16f)]?.[_0xd0799c(0x2c5)]()||'',_0x4770e5['playerProfileUrl']=document[_0xd0799c(0x15f)]('highlight-player-profile')?.['value']?.['trim']()||'',_0x4770e5[_0xd0799c(0x156)]=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x4770e5['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required',_0xd0799c(0x168));return;}}}}_0x329eb7?(_0x4770e5[_0xd0799c(0x8f)]=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x329eb7),_0x4770e5),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x4770e5['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x4770e5),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x52565e){console['error']('Error\x20saving\x20highlight:',_0x52565e),showNotification('Error\x20saving\x20highlight:\x20'+_0x52565e['message'],'error');}}function closeHighlightModal(){const _0x158ec9=document['getElementById']('highlight-modal');if(_0x158ec9)_0x158ec9['classList']['remove']('active');}function getHighlightTypeName(_0x22fb63){const _0x2c810c=a4_0x11ae10;switch(_0x22fb63){case'match':return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case _0x2c810c(0x75):return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x402bee=a4_0x11ae10,_0x46cea9=document['getElementById']('highlight-video-id'),_0x36faa3=document['getElementById']('highlight-video-preview-container'),_0x2068a8=document['getElementById']('highlight-video-preview');if(!_0x46cea9||!_0x2068a8||!_0x36faa3)return;const _0x52adfe=_0x46cea9['value']['trim']();_0x52adfe&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x52adfe)?(_0x2068a8['src']='https://www.youtube.com/embed/'+_0x52adfe,_0x36faa3['style']['display']='block'):(_0x2068a8[_0x402bee(0xf9)]='',_0x36faa3['style']['display']='none');}function a4_0x3b2d(_0x2f874b,_0x420969){const _0x1b5697=a4_0x5b42();return a4_0x3b2d=function(_0x566bb0,_0x4998d7){_0x566bb0=_0x566bb0-0x69;let _0x5b426b=_0x1b5697[_0x566bb0];return _0x5b426b;},a4_0x3b2d(_0x2f874b,_0x420969);}async function loadHighlightsAdmin(){const _0x46c145=a4_0x11ae10,_0xe74775=document['getElementById']('highlights-table-body');if(!_0xe74775)return;_0xe74775['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0xac07b8=query(collection(db,'highlights'),orderBy('createdAt','desc')),_0x468c32=await getDocs(_0xac07b8);if(_0x468c32[_0x46c145(0x264)]){_0xe74775['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0xe74775['innerHTML']='',_0x468c32['forEach'](_0x19c0e4=>{const _0x5c3825=_0x46c145,_0x3264d1=_0x19c0e4[_0x5c3825(0x242)](),_0x4c6991=document[_0x5c3825(0x11d)]('tr'),_0x1a13c1=_0x3264d1['createdAt']?new Date(_0x3264d1['createdAt']['seconds']*0x3e8)[_0x5c3825(0x1ba)]():_0x5c3825(0x235);let _0x2cfbe5=_0x5c3825(0x261),_0x50e091='';switch(_0x3264d1['type']){case _0x5c3825(0x196):_0x2cfbe5='Match',_0x50e091=_0x5c3825(0x299);break;case _0x5c3825(0x20d):_0x2cfbe5=_0x5c3825(0x269),_0x50e091=_0x5c3825(0x127);break;case _0x5c3825(0x75):_0x2cfbe5='Achievement',_0x50e091='achievement-type';break;}_0x4c6991['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3264d1[_0x5c3825(0x2a6)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x50e091+'\x22>'+_0x2cfbe5+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1a13c1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3264d1['submittedBy']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3264d1[_0x5c3825(0x8a)]?_0x5c3825(0x1a0):_0x5c3825(0xc4))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x19c0e4['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x19c0e4['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xe74775[_0x5c3825(0x1bb)](_0x4c6991);}),document[_0x46c145(0x1c4)]('.edit-highlight-btn')['forEach'](_0xf24851=>{const _0x473650=_0x46c145;_0xf24851[_0x473650(0x163)]('click',_0x3f33d4=>{openHighlightModal(_0x3f33d4['currentTarget']['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x1df6dc=>{const _0x3f8c0a=_0x46c145;_0x1df6dc['addEventListener'](_0x3f8c0a(0x236),_0x11239f=>{const _0xe1fda2=_0x3f8c0a;confirmDeleteHighlight(_0x11239f['currentTarget'][_0xe1fda2(0x178)]['id']);});});}catch(_0xc5c5a){console[_0x46c145(0x168)]('Error\x20loading\x20highlights:',_0xc5c5a),_0xe74775['innerHTML']=_0x46c145(0x27b)+_0xc5c5a['message']+_0x46c145(0xa3);}}async function confirmDeleteHighlight(_0x4aba52){const _0x3713e7=a4_0x11ae10;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x4aba52)),showNotification(_0x3713e7(0x253),_0x3713e7(0xdf)),loadHighlightsAdmin();}catch(_0x5e3202){console['error'](_0x3713e7(0x10c),_0x5e3202),showNotification('Error\x20deleting\x20highlight:\x20'+_0x5e3202[_0x3713e7(0x122)],'error');}}function setupCreateTestMatchModal(){const _0x25faed=a4_0x11ae10;console[_0x25faed(0x20b)](_0x25faed(0x205));const _0xa9f4a2=document['getElementById']('create-test-match-modal'),_0x5a1438=document['getElementById'](_0x25faed(0x2c1));if(!_0xa9f4a2){console[_0x25faed(0x168)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x5a1438){console[_0x25faed(0x168)](_0x25faed(0x234));return;}const _0x293022=_0xa9f4a2[_0x25faed(0x2a5)](!![]);_0xa9f4a2['parentNode']['replaceChild'](_0x293022,_0xa9f4a2);const _0xb60a3=_0x293022[_0x25faed(0x1ae)]('#create-test-match-form');_0x293022[_0x25faed(0x163)](_0x25faed(0x236),function(_0x260639){const _0x4b8fd7=_0x25faed;_0x260639['target']===_0x293022&&(console[_0x4b8fd7(0x20b)]('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x5d06ad=_0x293022['querySelector']('.close-btn');_0x5d06ad&&_0x5d06ad['addEventListener']('click',function(_0x10642b){const _0x5663de=_0x25faed;_0x10642b[_0x5663de(0x1d7)](),_0x10642b['stopPropagation'](),console[_0x5663de(0x20b)]('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0xd06505=_0x293022['querySelector']('#cancel-create-test-match-btn');_0xd06505&&_0xd06505['addEventListener'](_0x25faed(0x236),function(_0x3a8cd4){_0x3a8cd4['preventDefault'](),_0x3a8cd4['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0xb60a3){_0xb60a3['addEventListener']('submit',function(_0x50ce7f){const _0x51bdf2=_0x25faed;_0x50ce7f['preventDefault'](),_0x50ce7f['stopPropagation'](),console['log'](_0x51bdf2(0x158)),createTestMatch();});const _0x47fcde=_0xb60a3['querySelector'](_0x25faed(0x25f));_0x47fcde&&_0x47fcde['addEventListener']('click',function(_0x5e7210){const _0x46410b=_0x25faed;_0x5e7210[_0x46410b(0x1d7)](),_0x5e7210['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x54aa11=a4_0x11ae10;console[_0x54aa11(0x20b)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x4e7a40=document['getElementById']('highlight-form');_0x4e7a40&&_0x4e7a40[_0x54aa11(0x163)](_0x54aa11(0x11f),_0x5e6064=>{const _0x2c7bff=_0x54aa11;_0x5e6064[_0x2c7bff(0x1d7)](),saveHighlight();});const _0x11e836=document['getElementById']('cancel-highlight-btn');_0x11e836&&_0x11e836['addEventListener'](_0x54aa11(0x236),closeHighlightModal);const _0x51b01d=document['querySelector']('#highlight-modal\x20.close-btn');_0x51b01d&&_0x51b01d[_0x54aa11(0x163)]('click',closeHighlightModal);const _0x4a2de2=document['getElementById'](_0x54aa11(0x267));_0x4a2de2&&_0x4a2de2['addEventListener']('click',_0x5b72e7=>{_0x5b72e7['target']===_0x4a2de2&&closeHighlightModal();});const _0x13b456=document['getElementById'](_0x54aa11(0x128));_0x13b456&&_0x13b456[_0x54aa11(0x163)]('input',()=>{updateHighlightVideoPreview();}),console['log'](_0x54aa11(0x6d));}function setupManageMatchesSection(){const _0x17ae7b=a4_0x11ae10;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x440839=document['getElementById']('matches-prev-page'),_0x498336=document[_0x17ae7b(0x15f)]('matches-next-page');_0x440839&&_0x440839[_0x17ae7b(0x163)]('click',()=>{const _0x49d827=_0x17ae7b,_0x320f7e=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x320f7e][_0x49d827(0x2bd)]-0x1);});_0x498336&&_0x498336['addEventListener']('click',()=>{const _0x1e6c79=_0x17ae7b,_0x278968=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x278968][_0x1e6c79(0x2bd)]+0x1);});const _0xa5640=document['getElementById']('apply-matches-filters'),_0x2c7c79=document['getElementById'](_0x17ae7b(0x1c7));_0xa5640&&_0xa5640[_0x17ae7b(0x163)]('click',applyMatchesFilters);_0x2c7c79&&_0x2c7c79['addEventListener']('click',resetMatchesFilters);const _0x53650e=document['getElementById'](_0x17ae7b(0x25a));_0x53650e&&_0x53650e['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x3275f1=document['getElementById'](_0x17ae7b(0x111));_0x3275f1&&_0x3275f1[_0x17ae7b(0x163)]('click',openResimulateModal);const _0x325ee8=document['getElementById'](_0x17ae7b(0xce));if(_0x325ee8){const _0x4a5420=_0x325ee8[_0x17ae7b(0x1ae)]('.close');_0x4a5420&&_0x4a5420['addEventListener']('click',closeResimulateModal),_0x325ee8['addEventListener']('click',_0x13f887=>{_0x13f887['target']===_0x325ee8&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x58ba24=a4_0x11ae10;console['log'](_0x58ba24(0xd1));const _0x33c7f3=document['getElementById']('create-test-match-modal'),_0x582212=document['getElementById']('create-test-match-form');if(!_0x33c7f3){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x582212){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x582212['reset']();const _0x2a778a=document['querySelectorAll'](_0x58ba24(0xa8));let _0xc4688c=![];_0x2a778a[_0x58ba24(0x1a3)](_0x43f1bf=>{const _0x20e3f8=_0x58ba24;console['log']('Found\x20radio\x20with\x20value:',_0x43f1bf['value']),_0x43f1bf['value']===currentLadder&&(_0x43f1bf[_0x20e3f8(0x200)]=!![],_0xc4688c=!![],console['log'](_0x20e3f8(0x225),currentLadder));});if(!_0xc4688c){console['warn'](_0x58ba24(0x1f6),currentLadder);const _0x44e6e9=document['querySelector'](_0x58ba24(0x8d));_0x44e6e9&&(_0x44e6e9['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x438c4b=document['getElementById'](_0x58ba24(0x276));if(_0x438c4b){const _0x3efae=new Date()['toISOString']()['split']('T')[0x0];_0x438c4b[_0x58ba24(0x16f)]=_0x3efae;}_0x33c7f3[_0x58ba24(0x2ce)][_0x58ba24(0x289)]='flex',_0x33c7f3['style']['visibility']=_0x58ba24(0x2c8),_0x33c7f3['style'][_0x58ba24(0x124)]='1',_0x33c7f3['classList'][_0x58ba24(0x18c)]('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x3dc28f=document[_0x58ba24(0x15f)](_0x58ba24(0x20e));_0x3dc28f&&setTimeout(()=>{_0x3dc28f['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x13e3ae=a4_0x11ae10;console[_0x13e3ae(0x20b)](_0x13e3ae(0x129));const _0x1ea5c5=document[_0x13e3ae(0x15f)]('create-test-match-modal');if(!_0x1ea5c5){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x1ea5c5['classList']['remove']('active'),_0x1ea5c5[_0x13e3ae(0x2ce)]['opacity']='0',_0x1ea5c5['style']['visibility']='hidden',setTimeout(()=>{const _0x35c1f0=_0x13e3ae;!_0x1ea5c5[_0x35c1f0(0x130)]['contains'](_0x35c1f0(0x164))&&(_0x1ea5c5[_0x35c1f0(0x2ce)]['display']='none');},0x12c),console[_0x13e3ae(0x20b)]('Modal\x20closed');}async function createTestMatch(){const _0x1e4693=a4_0x11ae10;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x22a225=auth['currentUser'];if(!_0x22a225){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x28bf34='D1',_0x3d9a72='approvedMatches',_0x3ef030={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x1e4693(0x28d),'loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x22a225['email'],'createdAt':serverTimestamp(),'createdBy':_0x22a225['email'],'isTestMatch':!![],'ladder':_0x28bf34,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x22a225[_0x1e4693(0x1d6)]};console[_0x1e4693(0x20b)]('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x3d9a72),_0x3ef030),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x40ea0d){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x40ea0d),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x40ea0d[_0x1e4693(0x122)],'error');}}window[a4_0x11ae10(0x1da)]=async function(){const _0x5175d2=a4_0x11ae10;try{console[_0x5175d2(0x20b)]('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console['log']('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x7a5947=collection(db,_0x5175d2(0x23a));console[_0x5175d2(0x20b)]('Collection\x20reference\x20created:',_0x7a5947);const _0x337b1d=query(_0x7a5947,where('username','==',_0x5175d2(0x2db)));console['log']('Query\x20created:',_0x337b1d);const _0x239cd3=await getDocs(_0x337b1d);console[_0x5175d2(0x20b)]('Query\x20executed.\x20Empty:',_0x239cd3['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x4cabde){console['error']('Firebase\x20connection\x20test\x20failed:',_0x4cabde);}};function setupCreateTestMatchButton(){const _0x2251e6=a4_0x11ae10,_0x41f00f=document[_0x2251e6(0x15f)]('create-test-match-btn');if(!_0x41f00f){console[_0x2251e6(0x168)]('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log'](_0x2251e6(0x2d9));const _0x8de7df=_0x41f00f['cloneNode'](!![]);_0x41f00f['parentNode']['replaceChild'](_0x8de7df,_0x41f00f),_0x8de7df['addEventListener'](_0x2251e6(0x236),function(_0x31f1a7){const _0x233f42=_0x2251e6;_0x31f1a7[_0x233f42(0x1d7)](),_0x31f1a7[_0x233f42(0x249)](),console['log'](_0x233f42(0x10d)),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x183b27=0x1){const _0x43b2ff=a4_0x11ae10,_0xb9210f=document['getElementById']('matches-table-body');if(!_0xb9210f)return;_0xb9210f[_0x43b2ff(0x250)]=_0x43b2ff(0x114);try{const _0x574919=currentLadder['toLowerCase'](),_0x38656a=matchesPagination[_0x574919],_0x15c73c=currentLadder==='D1'?_0x43b2ff(0x25d):currentLadder==='D2'?'approvedMatchesD2':_0x43b2ff(0x2b1),_0x5acdf8=collection(db,_0x15c73c);_0x183b27<=0x1?(_0x38656a[_0x43b2ff(0x2bd)]=0x1,_0x38656a[_0x43b2ff(0x2b0)]=null,_0x38656a[_0x43b2ff(0x2b4)]=null):_0x38656a['page']=_0x183b27;const _0x30f92d=getMatchesFilters();let _0x13b76f=_0x5acdf8;if(_0x30f92d['startDate']||_0x30f92d['endDate']||_0x30f92d['searchTerm']){let _0x1538bc=[];_0x30f92d['startDate']&&_0x30f92d['endDate']?(_0x1538bc['push'](where(_0x43b2ff(0x149),'>=',_0x30f92d['startDate']),where('approvedAt','<=',_0x30f92d['endDate'])),_0x13b76f=query(_0x5acdf8,..._0x1538bc)):_0x13b76f=query(_0x5acdf8,orderBy(_0x43b2ff(0x149),_0x43b2ff(0x2c3)));}else _0x13b76f=query(_0x5acdf8,orderBy('approvedAt','desc'));_0x183b27>0x1&&_0x38656a['lastVisible']?_0x13b76f=query(_0x13b76f,startAfter(_0x38656a['lastVisible']),limit(PAGE_SIZE)):_0x13b76f=query(_0x13b76f,limit(PAGE_SIZE));const _0x17442c=await getDocs(_0x13b76f);!_0x17442c['empty']&&(_0x38656a['firstVisible']=_0x17442c['docs'][0x0],_0x38656a['lastVisible']=_0x17442c['docs'][_0x17442c['docs']['length']-0x1]);let _0x4a3df9=![];if(!_0x17442c[_0x43b2ff(0x264)]){const _0x595ff1=query(_0x13b76f,startAfter(_0x38656a[_0x43b2ff(0x2b4)]),limit(0x1)),_0x131a9c=await getDocs(_0x595ff1);_0x4a3df9=!_0x131a9c['empty'];}const _0xf8cba4=document[_0x43b2ff(0x15f)]('matches-prev-page'),_0x352497=document[_0x43b2ff(0x15f)]('matches-next-page'),_0x14c660=document[_0x43b2ff(0x15f)]('matches-page-indicator');if(_0xf8cba4)_0xf8cba4['disabled']=_0x38656a[_0x43b2ff(0x2bd)]<=0x1;if(_0x352497)_0x352497[_0x43b2ff(0xb1)]=!_0x4a3df9;if(_0x14c660)_0x14c660['textContent']='Page\x20'+_0x38656a['page'];if(_0x17442c['empty']){_0xb9210f[_0x43b2ff(0x250)]=_0x43b2ff(0x155);return;}_0xb9210f[_0x43b2ff(0x250)]='',_0x17442c[_0x43b2ff(0x1a3)](_0x39de8a=>{const _0x292b0c=_0x43b2ff,_0x208636=_0x39de8a['data'](),_0x5230d7=document['createElement']('tr'),_0x489138=_0x208636['approvedAt']?new Date(_0x208636[_0x292b0c(0x149)]['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x5230d7[_0x292b0c(0x132)](_0x292b0c(0xad),_0x39de8a['id']),_0x5230d7[_0x292b0c(0x132)]('data-ladder',currentLadder),_0x5230d7[_0x292b0c(0x130)]['add'](_0x292b0c(0x247)),_0x5230d7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x489138+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x208636['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x208636[_0x292b0c(0xd0)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x208636[_0x292b0c(0xc2)]||0x0)+'\x20-\x20'+(_0x208636['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x208636['mapPlayed']||_0x292b0c(0x235))+_0x292b0c(0x29d)+currentLadder+_0x292b0c(0x2de)+_0x39de8a['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x39de8a['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xb9210f['appendChild'](_0x5230d7);}),setupMatchesActionButtons(),_0x30f92d[_0x43b2ff(0x14c)]&&filterMatchesTable(),console[_0x43b2ff(0x20b)]('Loaded\x20'+_0x17442c['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x38656a['page']);}catch(_0x13969b){console['error']('Error\x20loading\x20matches:',_0x13969b),_0xb9210f[_0x43b2ff(0x250)]=_0x43b2ff(0x266)+_0x13969b['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x45cfa8,_0x214aa6){const _0x59322f=a4_0x11ae10;try{console['log']('Deleting\x20match\x20'+_0x45cfa8+'\x20from\x20'+_0x214aa6+_0x59322f(0x165));const _0x2a56df=auth['currentUser'];if(!_0x2a56df){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x3a761f=_0x214aa6==='D1'?'approvedMatches':_0x214aa6==='D2'?'approvedMatchesD2':_0x59322f(0x2b1);console['log']('Using\x20collection:\x20'+_0x3a761f),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x3a761f,_0x45cfa8)),console[_0x59322f(0x20b)]('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully',_0x59322f(0xdf));const _0x288c25=_0x214aa6[_0x59322f(0x9e)]();loadMatchesData(matchesPagination[_0x288c25][_0x59322f(0x2bd)]);}catch(_0x259cdb){console[_0x59322f(0x168)](_0x59322f(0x135),_0x259cdb),showNotification(_0x59322f(0x212)+_0x259cdb['message'],'error');}}function setupMatchesActionButtons(){const _0x1a4073=a4_0x11ae10;console['log'](_0x1a4073(0x152)),document['querySelectorAll']('.edit-match-btn')['forEach'](_0xf19a9f=>{_0xf19a9f['addEventListener']('click',_0x39b7eb=>{const _0x1229de=a4_0x3b2d;_0x39b7eb[_0x1229de(0x1d7)](),_0x39b7eb['stopPropagation']();const _0x1e5044=_0x39b7eb['currentTarget']['dataset']['id'],_0x422365=_0x39b7eb['currentTarget']['closest']('tr'),_0x4f522b=_0x422365['dataset'][_0x1229de(0x2be)];console[_0x1229de(0x20b)]('Edit\x20match\x20clicked:',_0x1e5044,_0x4f522b),openEditMatchModal(_0x1e5044,_0x4f522b);});}),document[_0x1a4073(0x1c4)](_0x1a4073(0x171))['forEach'](_0x42a979=>{_0x42a979['addEventListener']('click',_0x5ae9cf=>{const _0x35860a=a4_0x3b2d;_0x5ae9cf['preventDefault'](),_0x5ae9cf['stopPropagation']();const _0x569694=_0x5ae9cf['currentTarget']['dataset']['id'],_0x3d7de6=_0x5ae9cf[_0x35860a(0x29c)]['closest']('tr'),_0x581ed3=_0x3d7de6['dataset']['ladder']||currentLadder;console[_0x35860a(0x20b)]('Delete\x20match\x20clicked:',_0x569694,_0x581ed3),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x569694,_0x581ed3);});}),console[_0x1a4073(0x20b)]('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x21e2e7=a4_0x11ae10,_0x2864f8=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x44cd99=document[_0x21e2e7(0x1c4)]('#matches-table-body\x20tr');let _0x2fb02f=0x0;_0x44cd99['forEach'](_0x5da907=>{const _0x4c150a=_0x21e2e7;if(_0x5da907['classList'][_0x4c150a(0x284)](_0x4c150a(0x255))||_0x5da907[_0x4c150a(0x130)]['contains']('empty-state')||_0x5da907['classList']['contains']('error-state'))return;const _0xb12de1=_0x5da907[_0x4c150a(0x17e)][0x1][_0x4c150a(0x143)][_0x4c150a(0x9e)](),_0x47cb33=_0x5da907['cells'][0x2]['textContent']['toLowerCase'](),_0x5b05e2=_0x5da907['cells'][0x4][_0x4c150a(0x143)][_0x4c150a(0x9e)]();_0xb12de1['includes'](_0x2864f8)||_0x47cb33['includes'](_0x2864f8)||_0x5b05e2['includes'](_0x2864f8)?(_0x5da907['style']['display']='',_0x2fb02f++):_0x5da907[_0x4c150a(0x2ce)]['display']='none';});if(_0x2fb02f===0x0&&_0x44cd99[_0x21e2e7(0x1ab)]>0x0){const _0x11644b=document['getElementById'](_0x21e2e7(0x263)),_0x4bbf83=_0x11644b['querySelector'](_0x21e2e7(0x256));if(!_0x4bbf83){const _0x2d8990=document[_0x21e2e7(0x11d)]('tr');_0x2d8990['className']=_0x21e2e7(0x95),_0x2d8990['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x2864f8+'\x27</td>',_0x11644b['appendChild'](_0x2d8990);}}else{const _0x4b011f=document['querySelector'](_0x21e2e7(0x256));_0x4b011f&&_0x4b011f[_0x21e2e7(0x1ee)]();}}function getMatchesFilters(){const _0xd64afb=a4_0x11ae10,_0x402af5=document['getElementById']('matches-search')[_0xd64afb(0x16f)]['toLowerCase'](),_0x54ed6e=document[_0xd64afb(0x15f)]('matches-start-date')[_0xd64afb(0x16f)],_0x2b75a8=document['getElementById']('matches-end-date')['value'];let _0x16414d=null,_0x19edb9=null;return _0x54ed6e&&(_0x16414d=new Date(_0x54ed6e),_0x16414d['setHours'](0x0,0x0,0x0,0x0),_0x16414d=Timestamp['fromDate'](_0x16414d)),_0x2b75a8&&(_0x19edb9=new Date(_0x2b75a8),_0x19edb9['setHours'](0x17,0x3b,0x3b,0x3e7),_0x19edb9=Timestamp[_0xd64afb(0x1a7)](_0x19edb9)),{'searchTerm':_0x402af5,'startDate':_0x16414d,'endDate':_0x19edb9};}async function applyMatchesFilters(){const _0x5950e9=currentLadder['toLowerCase']();matchesPagination[_0x5950e9]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x346d14=a4_0x11ae10;document['getElementById']('matches-start-date')['value']='',document['getElementById'](_0x346d14(0x11e))['value']='',document['getElementById']('matches-search')['value']='';const _0x2fc19e=currentLadder[_0x346d14(0x9e)]();matchesPagination[_0x2fc19e]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x53a9c6,_0x377198){const _0x5c562a=a4_0x11ae10,_0x1fc9b1=document['getElementById']('edit-match-modal');if(!_0x1fc9b1)return;try{const _0x13b4cb=_0x377198==='D1'?'approvedMatches':_0x377198==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x35481d=doc(db,_0x13b4cb,_0x53a9c6),_0x3b5340=await getDoc(_0x35481d);if(!_0x3b5340['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x4952a5=_0x3b5340['data']();document['getElementById']('edit-match-id')['value']=_0x53a9c6,document['getElementById'](_0x5c562a(0xbf))['value']=_0x377198,document['getElementById'](_0x5c562a(0x2e1))['value']=_0x4952a5[_0x5c562a(0x6e)]||'',document['getElementById']('edit-match-winner-score')['value']=_0x4952a5['winnerScore']||0x0,document['getElementById'](_0x5c562a(0x231))['value']=_0x4952a5['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x4952a5['winnerComment']||'',document['getElementById']('edit-match-loser')[_0x5c562a(0x16f)]=_0x4952a5['loserUsername']||'',document[_0x5c562a(0x15f)]('edit-match-loser-score')[_0x5c562a(0x16f)]=_0x4952a5['loserScore']||0x0,document['getElementById']('edit-match-loser-suicides')[_0x5c562a(0x16f)]=_0x4952a5[_0x5c562a(0x145)]||0x0,document['getElementById']('edit-match-loser-comment')[_0x5c562a(0x16f)]=_0x4952a5['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0x4952a5[_0x5c562a(0x2b5)]||'',document['getElementById'](_0x5c562a(0x2cd))['value']=_0x4952a5[_0x5c562a(0x251)]||'',document['getElementById'](_0x5c562a(0x208))['value']=_0x4952a5['loserDemoLink']||_0x4952a5['demoLink']||'',document[_0x5c562a(0x15f)](_0x5c562a(0xa1))['textContent']=_0x5c562a(0xf0)+_0x4952a5['winnerUsername']+'\x20vs\x20'+_0x4952a5[_0x5c562a(0xd0)],_0x1fc9b1['classList'][_0x5c562a(0x18c)]('active');}catch(_0x473dee){console[_0x5c562a(0x168)]('Error\x20loading\x20match\x20data:',_0x473dee),showNotification(_0x5c562a(0xcd),_0x5c562a(0x168));}}function closeEditMatchModal(){const _0x2b35a3=a4_0x11ae10,_0x2f4dbc=document['getElementById'](_0x2b35a3(0x265));_0x2f4dbc&&_0x2f4dbc['classList'][_0x2b35a3(0x1ee)]('active');}async function saveEditedMatch(){const _0x37aac1=a4_0x11ae10;try{const _0x17f9f6=document['getElementById']('edit-match-id')['value'],_0x36c512=document['getElementById'](_0x37aac1(0xbf))['value'];if(!_0x17f9f6||!_0x36c512){showNotification(_0x37aac1(0x1b5),'error');return;}const _0x5e2945=_0x36c512==='D1'?'approvedMatches':_0x36c512==='D2'?_0x37aac1(0x103):'approvedMatchesD3',_0x1dbcee=document['getElementById']('edit-match-winner')['value']['trim'](),_0x438aca=parseInt(document['getElementById']('edit-match-winner-score')[_0x37aac1(0x16f)]),_0x388f12=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x4fe56c=document['getElementById']('edit-match-winner-comment')['value']['trim'](),_0x3b13e1=document['getElementById'](_0x37aac1(0x1b2))['value']['trim'](),_0x4c6690=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x19d91b=parseInt(document[_0x37aac1(0x15f)](_0x37aac1(0x1c8))[_0x37aac1(0x16f)]),_0x1dda15=document['getElementById']('edit-match-loser-comment')['value']['trim'](),_0x50773e=document['getElementById']('edit-match-map')[_0x37aac1(0x16f)][_0x37aac1(0x2c5)](),_0x59cbd8=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x3e341a=document[_0x37aac1(0x15f)]('edit-match-loser-demo')[_0x37aac1(0x16f)]['trim']();if(!_0x1dbcee||!_0x3b13e1){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x5e2945,_0x17f9f6),{'winnerUsername':_0x1dbcee,'winnerScore':_0x438aca,'winnerSuicides':_0x388f12,'winnerComment':_0x4fe56c,'loserUsername':_0x3b13e1,'loserScore':_0x4c6690,'loserSuicides':_0x19d91b,'loserComment':_0x1dda15,'mapPlayed':_0x50773e,'winnerDemoLink':_0x59cbd8||null,'loserDemoLink':_0x3e341a||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x37aac1(0x2b7)]['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x36c512['toLowerCase']()]['page']);}catch(_0x39cca0){console['error']('Error\x20saving\x20match:',_0x39cca0),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x39cca0['message'],'error');}}async function openDeleteMatchModal(_0x4c802c,_0x11564d){const _0x243a8a=a4_0x11ae10;try{const _0x5a681a=_0x11564d==='D1'?'approvedMatches':_0x11564d==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x4f5fbb=doc(db,_0x5a681a,_0x4c802c),_0x1d0afe=await getDoc(_0x4f5fbb);if(!_0x1d0afe[_0x243a8a(0x120)]()){showNotification('Match\x20not\x20found',_0x243a8a(0x168));return;}const _0x19b6a3=_0x1d0afe['data'](),_0x53c2a6=document['getElementById']('delete-match-confirm-modal');_0x53c2a6[_0x243a8a(0x178)]['matchId']=_0x4c802c,_0x53c2a6['dataset']['ladder']=_0x11564d;const _0x411c12=_0x19b6a3['approvedAt']?new Date(_0x19b6a3['approvedAt'][_0x243a8a(0x123)]*0x3e8)['toLocaleDateString']():_0x243a8a(0x235),_0x3d34fd=document[_0x243a8a(0x15f)](_0x243a8a(0x273));_0x3d34fd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x411c12+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x19b6a3['winnerUsername']+_0x243a8a(0xe8)+_0x19b6a3['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x19b6a3[_0x243a8a(0xc2)]||0x0)+_0x243a8a(0xaa)+(_0x19b6a3[_0x243a8a(0x21d)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x19b6a3['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x11564d+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x53c2a6['classList']['add']('active');}catch(_0x40efd8){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x40efd8),showNotification('Failed\x20to\x20load\x20match\x20data',_0x243a8a(0x168));}}function closeDeleteMatchModal(){const _0x324689=a4_0x11ae10,_0x197473=document['getElementById']('delete-match-confirm-modal');_0x197473&&(_0x197473[_0x324689(0x130)]['remove']('active'),_0x197473['removeAttribute']('data-match-id'),_0x197473['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x9ae8fc=a4_0x11ae10,_0x485bb7=document['getElementById']('delete-match-confirm-modal'),_0x599b1f=_0x485bb7['dataset']['matchId'],_0x3547a3=_0x485bb7[_0x9ae8fc(0x178)][_0x9ae8fc(0x2be)];if(!_0x599b1f||!_0x3547a3){showNotification(_0x9ae8fc(0x1b5),_0x9ae8fc(0x168)),closeDeleteMatchModal();return;}try{const _0x495d73=_0x3547a3==='D1'?'approvedMatches':_0x3547a3==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x495d73,_0x599b1f)),showNotification(_0x9ae8fc(0x14a),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x3547a3['toLowerCase']()][_0x9ae8fc(0x2bd)]);}catch(_0x4ba6bb){console['error']('Error\x20deleting\x20match:',_0x4ba6bb),showNotification(_0x9ae8fc(0x212)+_0x4ba6bb['message'],'error');}}async function saveHighlightChanges(){const _0x228465=a4_0x11ae10,_0x455273=document[_0x228465(0x15f)](_0x228465(0x94))['value'],_0xc83389=document['getElementById']('edit-highlight-type-select')['value'];let _0xc2b948={'title':document[_0x228465(0x15f)]('edit-highlight-title-input')[_0x228465(0x16f)][_0x228465(0x2c5)](),'type':_0xc83389,'description':document[_0x228465(0x15f)]('edit-highlight-description-input')['value']['trim'](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth['currentUser']['email']};if(_0xc83389==='match'){_0xc2b948['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')['value'][_0x228465(0x2c5)](),_0xc2b948['map']=document['getElementById'](_0x228465(0x2c7))['value']['trim']();const _0x1d622f=document['getElementById']('edit-highlight-matchDate-input')[_0x228465(0x16f)];_0xc2b948[_0x228465(0x176)]=_0x1d622f?Timestamp[_0x228465(0x1a7)](new Date(_0x1d622f)):null,_0xc2b948[_0x228465(0xbb)]=document['getElementById']('edit-highlight-winnerName-input')['value']['trim'](),_0xc2b948['winnerScore']=document[_0x228465(0x15f)](_0x228465(0x1a1))[_0x228465(0x16f)]['trim'](),_0xc2b948['loserName']=document['getElementById'](_0x228465(0x237))['value']['trim'](),_0xc2b948['loserScore']=document[_0x228465(0x15f)](_0x228465(0x154))['value']['trim'](),_0xc2b948['matchLink']=document[_0x228465(0x15f)](_0x228465(0xaf))['value'][_0x228465(0x2c5)](),_0xc2b948['mapCreator']=null,_0xc2b948[_0x228465(0x100)]=null,_0xc2b948['creatorImageUrl']=null,_0xc2b948['achievementPlayer']=null,_0xc2b948['achievementType']=null,_0xc2b948[_0x228465(0x91)]=null,_0xc2b948['playerProfileUrl']=null;}else{if(_0xc83389==='creator')_0xc2b948['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0xc2b948['mapCreator']=document['getElementById'](_0x228465(0xe0))['value'][_0x228465(0x2c5)](),_0xc2b948['mapVersion']=document[_0x228465(0x15f)](_0x228465(0x79))['value'][_0x228465(0x2c5)](),_0xc2b948['creatorImageUrl']=document['getElementById'](_0x228465(0x2c6))['value']['trim'](),_0xc2b948['matchInfo']=null,_0xc2b948['matchDate']=null,_0xc2b948['winnerName']=null,_0xc2b948[_0x228465(0xc2)]=null,_0xc2b948[_0x228465(0x2b8)]=null,_0xc2b948['loserScore']=null,_0xc2b948['matchLink']=null,_0xc2b948['achievementPlayer']=null,_0xc2b948[_0x228465(0x189)]=null,_0xc2b948['achievementDetails']=null,_0xc2b948['playerProfileUrl']=null;else _0xc83389==='achievement'&&(_0xc2b948['achievementPlayer']=document[_0x228465(0x15f)]('edit-highlight-achievementPlayer-input')[_0x228465(0x16f)]['trim'](),_0xc2b948['achievementType']=document['getElementById'](_0x228465(0x213))['value']['trim'](),_0xc2b948['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')['value']['trim'](),_0xc2b948['playerProfileUrl']=document['getElementById'](_0x228465(0xe6))['value']['trim'](),_0xc2b948['matchInfo']=null,_0xc2b948['map']=null,_0xc2b948['matchDate']=null,_0xc2b948[_0x228465(0xbb)]=null,_0xc2b948['winnerScore']=null,_0xc2b948['loserName']=null,_0xc2b948['loserScore']=null,_0xc2b948['matchLink']=null,_0xc2b948['mapCreator']=null,_0xc2b948['mapVersion']=null,_0xc2b948['creatorImageUrl']=null);}try{if(_0x455273){_0xc2b948['updatedAt']=serverTimestamp();const _0x4956b0=doc(db,'highlights',_0x455273);await updateDoc(_0x4956b0,_0xc2b948),showNotification(_0x228465(0x24a),_0x228465(0xdf));}else _0xc2b948['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0xc2b948),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x4ba24b){console['error']('Error\x20saving\x20highlight:',_0x4ba24b),showNotification(_0x228465(0x1ce)+_0x4ba24b['message'],'error');}}async function resimulateMatch(){const _0x231585=a4_0x11ae10;try{const _0x433626=document[_0x231585(0x15f)]('resimulate-match-id')[_0x231585(0x16f)];if(!_0x433626){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x4b7e18=auth[_0x231585(0x2b7)];if(!_0x4b7e18){showNotification(_0x231585(0x1eb),'error');return;}const _0x4a34e4=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x231585(0x2b1),_0x116de4=doc(db,_0x4a34e4,_0x433626),_0x48e464=await getDoc(_0x116de4);if(!_0x48e464[_0x231585(0x120)]()){showNotification(_0x231585(0x26c),'error');return;}const _0x3b87db=_0x48e464['data'](),_0x13f116=_0x3b87db['approvedAt']?_0x3b87db[_0x231585(0x149)][_0x231585(0x228)]()[_0x231585(0x1d3)]():_0x3b87db[_0x231585(0x176)]?_0x3b87db[_0x231585(0x176)]['toDate']?_0x3b87db['matchDate']['toDate']()[_0x231585(0x1d3)]():new Date(_0x3b87db['matchDate'])['toLocaleString']():'Unknown',_0x326dac='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x3b87db['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x3b87db['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x3b87db['winnerScore']+'-'+_0x3b87db['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x3b87db[_0x231585(0x2b5)]||_0x3b87db['mapName']||'Unknown')+_0x231585(0x2c4)+_0x13f116+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x433626+_0x231585(0x19f)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')['innerHTML']=_0x326dac,document['getElementById']('match-details-container')['style']['display']='block',document['getElementById']('confirm-resimulate-btn')['style']['display']='block',window['pendingResimulateData']={'matchId':_0x433626,'matchData':_0x3b87db,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x576a90){console['error']('Error\x20finding\x20match:',_0x576a90),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x576a90['message'],_0x231585(0x168));}}async function confirmResimulateMatch(){const _0x30037e=a4_0x11ae10;try{const {matchId:_0x4afc33,matchData:_0x2dde67,ladder:_0x15e25b}=window[_0x30037e(0x215)];if(!_0x4afc33||!_0x2dde67){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x484a4b=_0x15e25b==='D1'?'players':_0x15e25b==='D2'?_0x30037e(0x295):_0x30037e(0x22f),_0xb4981a=_0x15e25b==='D1'?'eloHistory':_0x15e25b==='D2'?_0x30037e(0x12e):'eloHistoryD3',[_0x276037,_0x4fc6c9]=await Promise[_0x30037e(0x19e)]([getDocs(query(collection(db,_0x484a4b),where('username','==',_0x2dde67['winnerUsername']))),getDocs(query(collection(db,_0x484a4b),where('username','==',_0x2dde67[_0x30037e(0xd0)])))]);if(_0x276037[_0x30037e(0x264)]||_0x4fc6c9[_0x30037e(0x264)]){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x39762a=_0x276037[_0x30037e(0x159)][0x0]['id'],_0x3194d6=_0x4fc6c9['docs'][0x0]['id'],_0xb1a0cc=_0x276037[_0x30037e(0x159)][0x0][_0x30037e(0x242)](),_0xfe5491=_0x4fc6c9['docs'][0x0]['data'](),[_0x4b5e44,_0x9c4824]=await Promise['all']([getDocs(query(collection(db,_0xb4981a),where('playerId','==',_0x39762a),where('matchId','==',_0x4afc33))),getDocs(query(collection(db,_0xb4981a),where('playerId','==',_0x3194d6),where('matchId','==',_0x4afc33)))]),_0x57b91b=!_0x4b5e44['empty'],_0x5cb56a=!_0x9c4824['empty'],_0x4f3b39='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x57b91b?_0x30037e(0x2a9):'âŒ\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x5cb56a?'âœ…\x20Exists':_0x30037e(0x26d))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0xb1a0cc['eloRating']||'Unknown')+_0x30037e(0x85)+(_0xfe5491[_0x30037e(0x147)]||'Unknown')+_0x30037e(0x191)+(_0xb1a0cc[_0x30037e(0x194)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0xfe5491[_0x30037e(0x194)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>âš ï¸\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x30037e(0x2d0))[_0x30037e(0x250)]=_0x4f3b39,document['getElementById']('validation-results-container')['style']['display']=_0x30037e(0x222);if(_0x57b91b&&_0x5cb56a){showNotification(_0x30037e(0x101),_0x30037e(0x84));return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0xc3a7ab=_0x2dde67['approvedAt']||_0x2dde67['matchDate']||serverTimestamp(),[_0x27cdcf,_0x35da93]=await Promise['all']([getPlayerEloAtTime(_0x39762a,_0xc3a7ab,_0xb4981a),getPlayerEloAtTime(_0x3194d6,_0xc3a7ab,_0xb4981a)]),{calculateElo:_0xed1878}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x475977,newLoserRating:_0x2378d8}=_0xed1878(_0x27cdcf,_0x35da93),_0x3c8ef7=_0xb1a0cc['position']||Number['MAX_SAFE_INTEGER'],_0x4d006e=_0xfe5491[_0x30037e(0x194)]||Number[_0x30037e(0x9c)];let _0x52cdc9=_0x3c8ef7,_0x568553=_0x4d006e;_0x3c8ef7>_0x4d006e&&(_0x52cdc9=_0x4d006e,_0x568553=_0x4d006e+0x1);const _0x27ea67=writeBatch(db),_0x45b929=doc(db,_0x484a4b,_0x39762a);_0x27ea67['update'](_0x45b929,{'eloRating':_0x475977,'position':_0x52cdc9,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x30037e(0x180)]});const _0x4fde91=doc(db,_0x484a4b,_0x3194d6);_0x27ea67['update'](_0x4fde91,{'eloRating':_0x2378d8,'position':_0x568553,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x30037e(0x2b7)][_0x30037e(0x180)]});if(_0x3c8ef7>_0x4d006e){const _0x58cf12=await getDocs(query(collection(db,_0x484a4b),where('position','>',_0x4d006e),where('position','<',_0x3c8ef7)));_0x58cf12['forEach'](_0x139954=>{const _0x3559be=doc(db,_0x484a4b,_0x139954['id']),_0x58e074=_0x139954['data']()['position'];_0x27ea67['update'](_0x3559be,{'position':_0x58e074+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x57b91b){const _0x1189a7=doc(collection(db,_0xb4981a));_0x27ea67['set'](_0x1189a7,{'playerId':_0x39762a,'player':_0x2dde67['winnerUsername'],'previousElo':_0x27cdcf,'newElo':_0x475977,'eloChange':_0x475977-_0x27cdcf,'opponentId':_0x3194d6,'opponent':_0x2dde67['loserUsername'],'matchResult':'win','previousPosition':_0x3c8ef7,'newPosition':_0x52cdc9,'positionChange':_0x52cdc9-_0x3c8ef7,'matchId':_0x4afc33,'timestamp':_0xc3a7ab,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x15e25b,'matchScore':_0x2dde67['winnerScore']+'-'+_0x2dde67[_0x30037e(0x21d)],'mapPlayed':_0x2dde67['mapPlayed']||_0x2dde67['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x5cb56a){const _0x757efa=doc(collection(db,_0xb4981a));_0x27ea67['set'](_0x757efa,{'playerId':_0x3194d6,'player':_0x2dde67['loserUsername'],'previousElo':_0x35da93,'newElo':_0x2378d8,'eloChange':_0x2378d8-_0x35da93,'opponentId':_0x39762a,'opponent':_0x2dde67['winnerUsername'],'matchResult':_0x30037e(0xb0),'previousPosition':_0x4d006e,'newPosition':_0x568553,'positionChange':_0x568553-_0x4d006e,'matchId':_0x4afc33,'timestamp':_0xc3a7ab,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x30037e(0x180)],'gameMode':_0x15e25b,'matchScore':_0x2dde67['winnerScore']+'-'+_0x2dde67['loserScore'],'mapPlayed':_0x2dde67['mapPlayed']||_0x2dde67['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x152bda=_0x15e25b==='D1'?'approvedMatches':_0x15e25b==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x17f851=doc(db,_0x152bda,_0x4afc33);_0x27ea67['update'](_0x17f851,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0xb1a0cc['eloRating'],'originalLoserElo':_0xfe5491['eloRating'],'originalWinnerPosition':_0x3c8ef7,'originalLoserPosition':_0x4d006e,'resimulatedWinnerElo':_0x475977,'resimulatedLoserElo':_0x2378d8,'resimulatedWinnerPosition':_0x52cdc9,'resimulatedLoserPosition':_0x568553}),await _0x27ea67[_0x30037e(0xd9)]();const _0x1ddce6=(!_0x57b91b?0x1:0x0)+(!_0x5cb56a?0x1:0x0),_0x37df35=_0x3c8ef7!==_0x52cdc9||_0x4d006e!==_0x568553;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x1ddce6+'\x20ELO\x20history\x20entries.\x20')+(_0x30037e(0x151)+_0x27cdcf+'â†’'+_0x475977+'\x20(+'+(_0x475977-_0x27cdcf)+_0x30037e(0xa2))+('Loser\x20'+_0x35da93+'â†’'+_0x2378d8+'\x20('+(_0x2378d8-_0x35da93)+').\x20')+(''+(_0x37df35?'Positions\x20updated:\x20Winner\x20'+_0x3c8ef7+'â†’'+_0x52cdc9+',\x20Loser\x20'+_0x4d006e+'â†’'+_0x568553:_0x30037e(0x1c3))),'success'),closeResimulateModal(),document['querySelector'](_0x30037e(0x1b3))&&loadPlayersData();}catch(_0x2178af){console[_0x30037e(0x168)]('Error\x20resimulating\x20match:',_0x2178af),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x2178af['message'],'error');}}async function getPlayerEloAtTime(_0x4424b2,_0x1ecd62,_0x56f19f){const _0x25cb6a=a4_0x11ae10;try{const _0xbfce97=_0x1ecd62[_0x25cb6a(0x228)]?_0x1ecd62[_0x25cb6a(0x228)]():new Date(_0x1ecd62),_0x3789f2=query(collection(db,_0x56f19f),where('playerId','==',_0x4424b2),where('timestamp','<',_0x1ecd62),orderBy('timestamp',_0x25cb6a(0x2c3)),limit(0x1)),_0x4090df=await getDocs(_0x3789f2);if(!_0x4090df['empty']){const _0x2f8adf=_0x4090df['docs'][0x0]['data']();return console[_0x25cb6a(0x20b)]('Found\x20ELO\x20history\x20for\x20player\x20'+_0x4424b2+'\x20before\x20match:\x20'+_0x2f8adf['newElo']),_0x2f8adf['newElo'];}else return console['log'](_0x25cb6a(0x17c)+_0x4424b2+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x1223f3){return console[_0x25cb6a(0x168)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x4424b2+':',_0x1223f3),0x4b0;}}function openResimulateModal(){const _0x349040=a4_0x11ae10;console[_0x349040(0x20b)]('openResimulateModal\x20called!');const _0x18aa54=document['getElementById'](_0x349040(0xce));console['log']('Modal\x20element\x20found:',_0x18aa54);if(!_0x18aa54){console[_0x349040(0x168)]('Modal\x20element\x20not\x20found!');return;}_0x18aa54['style'][_0x349040(0x289)]=_0x349040(0x222),_0x18aa54['style']['visibility']='visible',_0x18aa54['style']['opacity']='1',_0x18aa54['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console[_0x349040(0x20b)]('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x18aa54)['display']);const _0x5d104a=document['getElementById'](_0x349040(0x1aa)),_0x407360=document['getElementById']('validation-results-container'),_0x592409=document['getElementById']('confirm-resimulate-btn'),_0x3258dd=document['getElementById'](_0x349040(0x290));if(_0x5d104a)_0x5d104a['innerHTML']='';if(_0x407360)_0x407360['innerHTML']='';if(_0x592409)_0x592409['style'][_0x349040(0x289)]=_0x349040(0xea);if(_0x3258dd)_0x3258dd[_0x349040(0x16f)]='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){document['getElementById']('resimulate-modal')['style']['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a4_0x11ae10(0x1d0)]=closeResimulateModal;async function loadPointsData(){const _0x1aeb4b=a4_0x11ae10;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x2c5b88){console[_0x1aeb4b(0x168)](_0x1aeb4b(0x17b),_0x2c5b88),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x2c5b88[_0x1aeb4b(0x122)],_0x1aeb4b(0x168));}}function renderPointsOverview(_0x5e0ade){const _0x5e9b97=a4_0x11ae10,_0x3d91e6=document['getElementById']('points-overview-table-body');if(!_0x3d91e6)return;if(_0x5e0ade['length']===0x0){_0x3d91e6[_0x5e9b97(0x250)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x3d91e6['innerHTML']='',_0x5e0ade['forEach'](_0x5a610d=>{const _0x14d20a=_0x5e9b97,_0x5162b4=document[_0x14d20a(0x11d)]('tr'),_0x21d490=_0x5a610d['displayName']||_0x5a610d['username']||_0x14d20a(0x87),_0x64596b=_0x5a610d['email']||'No\x20email',_0x113165=_0x5a610d[_0x14d20a(0x12d)]||0x0,_0x3aa559=_0x5a610d['lastPointsModified']?new Date(_0x5a610d['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x5162b4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x21d490+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x64596b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x113165>0x3e8?_0x14d20a(0x125):_0x113165>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x113165['toLocaleString']()+_0x14d20a(0x1b1)+_0x3aa559+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x5a610d['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x5a610d['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3d91e6['appendChild'](_0x5162b4);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x5626de=a4_0x11ae10;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x309e61=document[_0x5626de(0x1c4)](_0x5626de(0x1f3));console['log'](_0x5626de(0x77)+_0x309e61[_0x5626de(0x1ab)]+_0x5626de(0x218)),_0x309e61['forEach'](_0x34d871=>{const _0x546f80=_0x5626de,_0x544779=_0x34d871['cloneNode'](!![]);_0x34d871[_0x546f80(0x195)]['replaceChild'](_0x544779,_0x34d871);});const _0x1d8497=document['querySelectorAll']('.view-history-btn');console['log']('Found\x20'+_0x1d8497[_0x5626de(0x1ab)]+'\x20view\x20history\x20buttons'),_0x1d8497['forEach'](_0x111ce9=>{const _0x445f45=_0x5626de,_0x1963ce=_0x111ce9['cloneNode'](!![]);_0x111ce9[_0x445f45(0x195)][_0x445f45(0xff)](_0x1963ce,_0x111ce9);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x408840=>{const _0x419f04=_0x5626de;_0x408840[_0x419f04(0x163)](_0x419f04(0x236),function(_0x95f2fa){const _0x403de9=_0x419f04;_0x95f2fa['preventDefault'](),_0x95f2fa['stopPropagation']();const _0x3a95ba=this[_0x403de9(0x178)]['userId'];console['log'](_0x403de9(0x19d),_0x3a95ba);if(!_0x3a95ba){console['error'](_0x403de9(0x2b2));return;}this['style']['opacity']='0.6',setTimeout(()=>{const _0x44ccaf=_0x403de9;this[_0x44ccaf(0x2ce)]['opacity']='1';},0xc8),openQuickEditModal(_0x3a95ba);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x222db6=>{const _0x59309f=_0x5626de;_0x222db6[_0x59309f(0x163)](_0x59309f(0x236),function(_0x478231){const _0x1437fe=_0x59309f;_0x478231['preventDefault'](),_0x478231[_0x1437fe(0x249)]();const _0xbe24dc=this[_0x1437fe(0x178)]['userId'];console['log']('View\x20history\x20clicked\x20for\x20user:',_0xbe24dc);if(!_0xbe24dc){console[_0x1437fe(0x168)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x1437fe(0x2ce)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0xbe24dc);});}),console[_0x5626de(0x20b)]('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0xd214c7){const _0x346ad7=a4_0x11ae10;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0xd214c7);const _0x20e00a=document['getElementById'](_0x346ad7(0x21a));if(!_0x20e00a){console[_0x346ad7(0x168)]('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page',_0x346ad7(0x168));return;}try{showNotification(_0x346ad7(0x23c),_0x346ad7(0x199));const _0x482ec9=doc(db,'userProfiles',_0xd214c7),_0x3e27e2=await getDoc(_0x482ec9);if(!_0x3e27e2['exists']()){showNotification(_0x346ad7(0x26a),'error');return;}const _0x88940=_0x3e27e2['data']();console['log']('User\x20data\x20loaded:',_0x88940);const _0x14e1e1=document[_0x346ad7(0x15f)]('quick-edit-user-id'),_0x537675=document['getElementById'](_0x346ad7(0x1ca)),_0x1c3ca2=document['getElementById']('quick-edit-email'),_0x398e9e=document[_0x346ad7(0x15f)](_0x346ad7(0x16a)),_0xad6421=document[_0x346ad7(0x15f)]('quick-edit-points-form');if(!_0x14e1e1||!_0x537675||!_0x1c3ca2||!_0x398e9e||!_0xad6421){console[_0x346ad7(0x168)](_0x346ad7(0x1bd)),showNotification(_0x346ad7(0xfb),_0x346ad7(0x168));return;}_0x14e1e1['value']=_0xd214c7,_0x537675['textContent']=_0x88940['displayName']||_0x88940['username']||'Unknown\x20User',_0x1c3ca2['textContent']=_0x88940['email']||'No\x20email',_0x398e9e['textContent']=(_0x88940['points']||0x0)['toLocaleString'](),_0xad6421[_0x346ad7(0x192)]();const _0x476722=document['getElementById']('quick-add');_0x476722&&(_0x476722['checked']=!![]);_0x20e00a['classList']['add']('active'),console['log']('Modal\x20opened\x20successfully');const _0x33ccfe=document[_0x346ad7(0x15f)](_0x346ad7(0x98));_0x33ccfe&&setTimeout(()=>_0x33ccfe['focus'](),0x64);}catch(_0x1a189f){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x1a189f),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x1a189f[_0x346ad7(0x122)],'error');}}function closeQuickEditModal(){const _0x322c60=a4_0x11ae10,_0x39705c=document[_0x322c60(0x15f)]('quick-edit-points-modal');_0x39705c&&_0x39705c['classList']['remove']('active');}async function handleQuickEditPoints(_0x59a0de){const _0x5b3baf=a4_0x11ae10;_0x59a0de['preventDefault']();const _0x32ce98=document['getElementById']('quick-edit-user-id')[_0x5b3baf(0x16f)],_0x1396b2=document[_0x5b3baf(0x1ae)](_0x5b3baf(0x184))['value'],_0x1d6e34=parseInt(document['getElementById']('quick-points-amount')['value']),_0x5f3ce8=document['getElementById']('quick-points-reason')['value']['trim']();console[_0x5b3baf(0x20b)](_0x5b3baf(0x280),{'userId':_0x32ce98,'action':_0x1396b2,'amount':_0x1d6e34,'reason':_0x5f3ce8});if(!_0x32ce98||!_0x1d6e34||_0x1d6e34<0x0){showNotification(_0x5b3baf(0x110),'error');return;}try{await modifyUserPoints(_0x32ce98,_0x1396b2,_0x1d6e34,_0x5f3ce8),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log'](_0x5b3baf(0x2d3),_0x32ce98);}catch(_0x2ac6d0){console[_0x5b3baf(0x168)]('Error\x20updating\x20points:',_0x2ac6d0),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x2ac6d0['message'],'error');}}async function searchUsersForPoints(){const _0xf4170b=a4_0x11ae10,_0x2f9b2e=document['getElementById'](_0xf4170b(0x1c1))['value']['trim']()['toLowerCase'](),_0x4c2b70=document[_0xf4170b(0x15f)]('user-search-results');if(!_0x2f9b2e||_0x2f9b2e['length']<0x2){_0x4c2b70['innerHTML']='';return;}_0x4c2b70['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x9f7c=collection(db,'userProfiles'),_0x228eff=await getDocs(_0x9f7c),_0x1bd6dd=[];_0x228eff['forEach'](_0x1b63bd=>{const _0x5eec72=_0xf4170b,_0x1a16f7=_0x1b63bd[_0x5eec72(0x242)](),_0x5d6dcd=(_0x1a16f7[_0x5eec72(0x18a)]||_0x1a16f7[_0x5eec72(0xd2)]||'')[_0x5eec72(0x9e)](),_0x302f02=(_0x1a16f7['email']||'')['toLowerCase']();(_0x5d6dcd['includes'](_0x2f9b2e)||_0x302f02['includes'](_0x2f9b2e))&&_0x1bd6dd['push']({'id':_0x1b63bd['id'],..._0x1a16f7});});if(_0x1bd6dd['length']===0x0){_0x4c2b70['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x4c2b70['innerHTML']='',_0x1bd6dd['forEach'](_0x1bb11d=>{const _0xbc030e=_0xf4170b,_0x580a78=document[_0xbc030e(0x11d)](_0xbc030e(0x25c));_0x580a78[_0xbc030e(0x230)]='search-result-item',_0x580a78['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x1bb11d['displayName']||_0x1bb11d['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x1bb11d[_0xbc030e(0x1d6)]||'No\x20email')+_0xbc030e(0x173)+(_0x1bb11d['points']||0x0)[_0xbc030e(0x1d3)]()+_0xbc030e(0xed),_0x580a78['addEventListener']('click',()=>selectUserForPoints(_0x1bb11d)),_0x4c2b70[_0xbc030e(0x1bb)](_0x580a78);});}catch(_0x325865){console['error'](_0xf4170b(0xbc),_0x325865),_0x4c2b70['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x3cb4f3){const _0x354e11=a4_0x11ae10;document['getElementById']('selected-user-name')['textContent']=_0x3cb4f3[_0x354e11(0x18a)]||_0x3cb4f3['username']||'Unknown\x20User',document['getElementById']('selected-user-points')['textContent']=(_0x3cb4f3[_0x354e11(0x12d)]||0x0)['toLocaleString'](),document[_0x354e11(0x15f)]('selected-user-id')[_0x354e11(0x16f)]=_0x3cb4f3['id'],document['getElementById']('selected-user-info')['style']['display']='block',document['getElementById']('points-management-forms')['style']['display']=_0x354e11(0x222),document['getElementById']('user-search-results')['innerHTML']='',document['getElementById'](_0x354e11(0x1c1))['value']='';}async function handleModifyPoints(_0xdb2374){const _0x5ae089=a4_0x11ae10;_0xdb2374[_0x5ae089(0x1d7)]();const _0x1e4a0f=document['getElementById']('selected-user-id')[_0x5ae089(0x16f)],_0x5aa92a=document[_0x5ae089(0x15f)](_0x5ae089(0x29f))['value'],_0x50688b=parseInt(document['getElementById'](_0x5ae089(0x2d6))['value']),_0x1f7ca7=document['getElementById']('points-reason')[_0x5ae089(0x16f)]['trim']();if(!_0x1e4a0f||!_0x50688b||_0x50688b<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x5ae089(0x168));return;}try{await modifyUserPoints(_0x1e4a0f,_0x5aa92a,_0x50688b,_0x1f7ca7),document['getElementById']('modify-points-form')['reset']();const _0x1277b7=doc(db,'userProfiles',_0x1e4a0f),_0x43cfd1=await getDoc(_0x1277b7);if(_0x43cfd1['exists']()){const _0x34cd87=_0x43cfd1['data']();document['getElementById']('selected-user-points')['textContent']=(_0x34cd87[_0x5ae089(0x12d)]||0x0)[_0x5ae089(0x1d3)]();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0xb564f1){console['error']('Error\x20modifying\x20points:',_0xb564f1),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0xb564f1['message'],'error');}}async function loadPointsHistory(){const _0x399330=a4_0x11ae10,_0x571674=document['getElementById']('points-history-table-body');if(!_0x571674)return;_0x571674['innerHTML']=_0x399330(0x1fc);try{const _0x408ca5=collection(db,_0x399330(0x296)),_0x441c8e=query(_0x408ca5,orderBy('timestamp','desc'),limit(0x32)),_0x19641e=await getDocs(_0x441c8e);if(_0x19641e['empty']){_0x571674['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x571674['innerHTML']='',_0x19641e['forEach'](_0x483889=>{const _0x5ad169=_0x399330,_0x4daac9=_0x483889[_0x5ad169(0x242)](),_0x1cd365=document['createElement']('tr'),_0x1cc1ae=_0x4daac9[_0x5ad169(0xf3)]?new Date(_0x4daac9['timestamp'][_0x5ad169(0x123)]*0x3e8)[_0x5ad169(0x1d3)]():_0x5ad169(0x261);let _0x3875ff='';switch(_0x4daac9[_0x5ad169(0x223)]){case'add':_0x3875ff=_0x5ad169(0x117)+_0x4daac9['amount']+'\x20points';break;case'subtract':_0x3875ff=_0x5ad169(0x1f0)+_0x4daac9['amount']+'\x20points';break;case'set':_0x3875ff=_0x5ad169(0x206)+_0x4daac9[_0x5ad169(0xfd)]+_0x5ad169(0x188);break;default:_0x3875ff=_0x4daac9['action']+'\x20'+_0x4daac9['amount']+_0x5ad169(0x188);}_0x1cd365['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1cc1ae+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4daac9['displayName']||_0x5ad169(0x87))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3875ff+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x4daac9['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4daac9['previousPoints']||0x0)+'\x20â†’\x20'+(_0x4daac9['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4daac9['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4daac9[_0x5ad169(0x1a8)]||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x571674[_0x5ad169(0x1bb)](_0x1cd365);});}catch(_0x14256b){console['error']('Error\x20loading\x20points\x20history:',_0x14256b),_0x571674['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x14256b[_0x399330(0x122)]+'</td></tr>';}}function filterPointsOverview(){const _0x5096eb=a4_0x11ae10,_0xdf6243=document['getElementById'](_0x5096eb(0x19c))['value']['toLowerCase']();if(!window[_0x5096eb(0xef)])return;const _0x2697f9=window['allUsersPoints']['filter'](_0x572d64=>{const _0x4bdaf3=_0x5096eb,_0x58c72c=(_0x572d64['displayName']||_0x572d64['username']||'')[_0x4bdaf3(0x9e)](),_0x28adb8=(_0x572d64['email']||'')['toLowerCase']();return _0x58c72c['includes'](_0xdf6243)||_0x28adb8['includes'](_0xdf6243);});renderPointsOverview(_0x2697f9);}function sortPointsOverview(){const _0x1397ca=a4_0x11ae10,_0x377989=document[_0x1397ca(0x15f)](_0x1397ca(0x268))['value'];if(!window['allUsersPoints'])return;const _0x46a4e8=[...window['allUsersPoints']];switch(_0x377989){case'points-desc':_0x46a4e8[_0x1397ca(0x211)]((_0x3de125,_0x38078d)=>(_0x38078d['points']||0x0)-(_0x3de125['points']||0x0));break;case'points-asc':_0x46a4e8['sort']((_0x1971b5,_0x1e24c7)=>(_0x1971b5['points']||0x0)-(_0x1e24c7['points']||0x0));break;case _0x1397ca(0xbe):_0x46a4e8['sort']((_0x45b627,_0x359dd9)=>{const _0x50e752=_0x1397ca,_0x32eacb=(_0x45b627[_0x50e752(0x18a)]||_0x45b627['username']||'')['toLowerCase'](),_0x5cbbd6=(_0x359dd9['displayName']||_0x359dd9['username']||'')[_0x50e752(0x9e)]();return _0x32eacb['localeCompare'](_0x5cbbd6);});break;case'name-desc':_0x46a4e8['sort']((_0x3a5a2b,_0x384d4e)=>{const _0x72c99c=(_0x3a5a2b['displayName']||_0x3a5a2b['username']||'')['toLowerCase'](),_0x275504=(_0x384d4e['displayName']||_0x384d4e['username']||'')['toLowerCase']();return _0x275504['localeCompare'](_0x72c99c);});break;}renderPointsOverview(_0x46a4e8);}async function handleAwardItem(_0x2fda9a){const _0x5436e3=a4_0x11ae10;_0x2fda9a['preventDefault']();const _0x32103a=document['getElementById']('selected-user-id')['value'],_0x279ea2=document['getElementById']('store-item-select')['value'],_0x1d6732=document['getElementById']('award-reason')['value']['trim']();if(!_0x32103a||!_0x279ea2){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x5436e3(0x168));return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById'](_0x5436e3(0xbd))['reset']();}catch(_0xe00252){console['error'](_0x5436e3(0x1fd),_0xe00252),showNotification('Failed\x20to\x20award\x20item:\x20'+_0xe00252[_0x5436e3(0x122)],_0x5436e3(0x168));}}async function loadUserPointsHistory(_0x326cd5){const _0x4153fe=a4_0x11ae10;try{const _0x3378c7=collection(db,'pointsHistory'),_0x4c182e=query(_0x3378c7,where(_0x4153fe(0xa7),'==',_0x326cd5),orderBy(_0x4153fe(0xf3),'desc')),_0x4ad475=await getDocs(_0x4c182e);console[_0x4153fe(0x20b)]('Found\x20'+_0x4ad475['size']+_0x4153fe(0x10e)+_0x326cd5),showNotification('User\x20has\x20'+_0x4ad475['size']+'\x20points\x20history\x20entries','info');}catch(_0x48cfb8){console[_0x4153fe(0x168)](_0x4153fe(0x1d9),_0x48cfb8),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x1ef9ce=a4_0x11ae10;try{console[_0x1ef9ce(0x20b)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x3ace4e=collection(db,_0x1ef9ce(0x254)),_0x305b17=await getDocs(_0x3ace4e);if(_0x305b17['empty']){console[_0x1ef9ce(0x20b)](_0x1ef9ce(0x109));return;}let _0x553449=0x0,_0x396b31=0x0;const _0x447276=writeBatch(db);let _0x2f38e2=0x0;return console['log']('Found\x20'+_0x305b17['size']+_0x1ef9ce(0x28a)),_0x305b17[_0x1ef9ce(0x1a3)](_0xc8515b=>{const _0x30e2bd=_0x1ef9ce,_0xa4e203=_0xc8515b['data']();_0xa4e203['points']===undefined||_0xa4e203['points']===null?(_0x447276[_0x30e2bd(0x229)](_0xc8515b['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x553449++,_0x2f38e2++,console['log']('Queued\x20'+(_0xa4e203['displayName']||_0xa4e203[_0x30e2bd(0xd2)]||_0xa4e203['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x396b31++,console['log']((_0xa4e203['displayName']||_0xa4e203['username']||_0xa4e203[_0x30e2bd(0x1d6)]||'Unknown')+'\x20already\x20has\x20points:\x20'+_0xa4e203[_0x30e2bd(0x12d)])),_0x2f38e2>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x553449>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x553449+_0x1ef9ce(0x7a)),await _0x447276[_0x1ef9ce(0xd9)](),console['log'](_0x1ef9ce(0x141)+_0x553449+_0x1ef9ce(0xc9))):console['log'](_0x1ef9ce(0x18e)),console[_0x1ef9ce(0x20b)](_0x1ef9ce(0x179)+_0x305b17['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x553449+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x396b31),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x553449+'\x20users.\x20'+_0x396b31+'\x20users\x20already\x20had\x20points.','success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x305b17[_0x1ef9ce(0x2b9)],'usersUpdated':_0x553449,'usersAlreadyHadPoints':_0x396b31};}catch(_0x4f40c7){console['error'](_0x1ef9ce(0x209),_0x4f40c7),showNotification('Error\x20initializing\x20points:\x20'+_0x4f40c7['message'],'error');throw _0x4f40c7;}}function addPointsMigrationButton(){const _0x21f153=a4_0x11ae10,_0x19830e=document[_0x21f153(0x15f)]('manage-points');if(!_0x19830e)return;if(document[_0x21f153(0x15f)]('migrate-points-btn'))return;const _0x529db9=document[_0x21f153(0x11d)]('div');_0x529db9['className']='migration-section',_0x529db9['style']['marginBottom']='20px',_0x529db9['style'][_0x21f153(0x102)]='15px',_0x529db9['style'][_0x21f153(0x1c0)]=_0x21f153(0xdc),_0x529db9['style'][_0x21f153(0x22b)]='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x529db9['style']['borderRadius']='5px',_0x529db9[_0x21f153(0x250)]=_0x21f153(0xe4);const _0x3c2204=_0x19830e['querySelector'](_0x21f153(0xd8));_0x3c2204&&_0x3c2204['insertAdjacentElement']('afterend',_0x529db9),document['getElementById'](_0x21f153(0x24f))['addEventListener']('click',async function(){const _0x1f216a=_0x21f153;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x1f216a(0x250)]='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this[_0x1f216a(0x2ce)]['backgroundColor']=_0x1f216a(0xfc),setTimeout(()=>{const _0x35e799=_0x1f216a;_0x529db9[_0x35e799(0x2ce)]['display']='none';},0xbb8);}catch(_0x4e1695){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x8b6a2a=a4_0x11ae10;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x1349ae=document['getElementById'](_0x8b6a2a(0x1c1));_0x1349ae&&_0x1349ae[_0x8b6a2a(0x163)]('input',debounce(searchUsersForPoints,0x12c));const _0xa7ab3=document['getElementById'](_0x8b6a2a(0x2df));_0xa7ab3&&_0xa7ab3['addEventListener']('submit',handleModifyPoints);const _0x409b88=document[_0x8b6a2a(0x15f)]('award-item-form');_0x409b88&&_0x409b88[_0x8b6a2a(0x163)]('submit',handleAwardItem);const _0x16c78b=document['getElementById']('points-overview-search');_0x16c78b&&_0x16c78b['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x352322=document['getElementById'](_0x8b6a2a(0x268));_0x352322&&_0x352322[_0x8b6a2a(0x163)]('change',sortPointsOverview);const _0x3f8a18=document[_0x8b6a2a(0x15f)]('refresh-points-overview');_0x3f8a18&&_0x3f8a18['addEventListener']('click',loadPointsOverview);const _0x2fac25=document[_0x8b6a2a(0x15f)]('bulk-award-points-btn');_0x2fac25&&_0x2fac25[_0x8b6a2a(0x163)]('click',async()=>{const _0xab14e0=_0x8b6a2a;confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x2fac25['disabled']=!![],_0x2fac25[_0xab14e0(0x250)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x2bf47b(),_0x2fac25['disabled']=![],_0x2fac25['innerHTML']=_0xab14e0(0x133));});const _0x2c3ed9=document['getElementById']('award-all-pilots-btn');_0x2c3ed9&&_0x2c3ed9[_0x8b6a2a(0x163)](_0x8b6a2a(0x236),awardPointsToAllPilots);async function _0x2bf47b(){const _0x458658=_0x8b6a2a;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x412a33={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'â‰¥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x8037e5=0x0,_0x45ab5a=0x0,_0xf75e0b=0x0,_0x56c1e2=0x0,_0x542786=0x0,_0x359af6=0x0;const _0x5e3cfb=new Set(),_0xe2eeae=collection(db,'pointsHistory'),_0x3c7531=query(_0xe2eeae,where('reason','>=',_0x458658(0x22a)),where('reason','<=','Bulk\x20award:ï£¿')),_0x197100=await getDocs(_0x3c7531);_0x197100['forEach'](_0x38d74d=>{const _0x2509af=_0x38d74d['data'](),_0x1c6dc7=_0x2509af['reason']||'',_0x1884a6=_0x1c6dc7['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x1884a6&&_0x1884a6[0x1]&&_0x5e3cfb['add'](_0x1884a6[0x1]);}),console[_0x458658(0x20b)](_0x458658(0x77)+_0x5e3cfb['size']+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x51459d,_0x1082eb,_0x326772]=await Promise[_0x458658(0x19e)]([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,_0x458658(0x2b1)))]),_0x1e9c50=_0x51459d[_0x458658(0x2b9)]+_0x1082eb['size']+_0x326772[_0x458658(0x2b9)];showNotification('Found\x20'+_0x1e9c50+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x3693fc=async(_0x5e837c,_0x248b8d)=>{const _0x3e8382=_0x458658;let _0x1380e3=writeBatch(db);const _0x654fde=[];let _0xbced61=0x0;for(const _0x355568 of _0x5e837c[_0x3e8382(0x159)]){try{if(_0x5e3cfb['has'](_0x355568['id'])){if(_0x248b8d==='D1')_0x359af6++;if(_0x248b8d==='D2')_0x359af6++;if(_0x248b8d==='D3')_0x359af6++;continue;}const _0x1271c6=_0x355568['data'](),_0x1ccc17=_0x1271c6[_0x3e8382(0xd3)]||'Standard',_0x175e08=_0x412a33[_0x1ccc17]||0xa;let _0x472e63=_0x1271c6['winnerId'];if(!_0x472e63&&_0x1271c6['winnerUsername']){const [_0x126d9a,_0x387522,_0x53940a]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x1271c6['winnerUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x1271c6['winnerUsername']))),getDocs(query(collection(db,_0x3e8382(0x22f)),where('username','==',_0x1271c6[_0x3e8382(0x6e)])))]);if(!_0x126d9a['empty'])_0x472e63=_0x126d9a['docs'][0x0]['id'];else{if(!_0x387522['empty'])_0x472e63=_0x387522['docs'][0x0]['id'];else{if(!_0x53940a['empty'])_0x472e63=_0x53940a[_0x3e8382(0x159)][0x0]['id'];}}}let _0x2ca5e9=_0x1271c6['loserId'];if(!_0x2ca5e9&&_0x1271c6[_0x3e8382(0xd0)]){const [_0x3dedb1,_0x4e5589,_0x4d0f4e]=await Promise['all']([getDocs(query(collection(db,_0x3e8382(0x23a)),where('username','==',_0x1271c6['loserUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x1271c6['loserUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x1271c6['loserUsername'])))]);if(!_0x3dedb1['empty'])_0x2ca5e9=_0x3dedb1['docs'][0x0]['id'];else{if(!_0x4e5589['empty'])_0x2ca5e9=_0x4e5589[_0x3e8382(0x159)][0x0]['id'];else{if(!_0x4d0f4e[_0x3e8382(0x264)])_0x2ca5e9=_0x4d0f4e['docs'][0x0]['id'];}}}if(_0x472e63&&_0x2ca5e9){const _0x874a4c=doc(db,'userProfiles',_0x472e63),_0x3878b2=doc(db,'userProfiles',_0x2ca5e9),[_0x400f0a,_0x53842c]=await Promise[_0x3e8382(0x19e)]([getDoc(_0x874a4c),getDoc(_0x3878b2)]);if(_0x400f0a[_0x3e8382(0x120)]()){const _0x5131bb=_0x400f0a['data'](),_0x5b4b1c=_0x5131bb['points']||0x0;_0x1380e3['update'](_0x874a4c,{'points':_0x5b4b1c+_0x175e08,'lastPointsModified':serverTimestamp()}),_0x654fde[_0x3e8382(0x245)]({'userId':_0x472e63,'userEmail':_0x5131bb['email']||'unknown','displayName':_0x5131bb['displayName']||_0x1271c6['winnerUsername']||'Unknown\x20User','action':'add','amount':_0x175e08,'previousPoints':_0x5b4b1c,'newPoints':_0x5b4b1c+_0x175e08,'reason':'Bulk\x20award:\x20'+_0x1ccc17+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x355568['id']+'\x20-\x20'+_0x248b8d,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}if(_0x53842c[_0x3e8382(0x120)]()){const _0x4981e2=_0x53842c['data'](),_0x4b1818=_0x4981e2[_0x3e8382(0x12d)]||0x0;_0x1380e3['update'](_0x3878b2,{'points':_0x4b1818+_0x175e08,'lastPointsModified':serverTimestamp()}),_0x654fde['push']({'userId':_0x2ca5e9,'userEmail':_0x4981e2['email']||_0x3e8382(0x83),'displayName':_0x4981e2['displayName']||_0x1271c6['loserUsername']||_0x3e8382(0x87),'action':'add','amount':_0x175e08,'previousPoints':_0x4b1818,'newPoints':_0x4b1818+_0x175e08,'reason':'Bulk\x20award:\x20'+_0x1ccc17+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x355568['id']+'\x20-\x20'+_0x248b8d,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x56c1e2+=_0x175e08*0x2,_0xbced61+=0x2,_0x5e3cfb['add'](_0x355568['id']);if(_0xbced61>=0x190){await _0x1380e3['commit']();for(const _0x39629f of _0x654fde){await addDoc(collection(db,'pointsHistory'),_0x39629f);}_0x1380e3=writeBatch(db),_0xbced61=0x0,_0x654fde['length']=0x0;}}}catch(_0x40ab8d){console[_0x3e8382(0x168)]('Error\x20processing\x20'+_0x248b8d+_0x3e8382(0x1e6)+_0x355568['id']+':',_0x40ab8d),_0x542786++;}}if(_0xbced61>0x0){await _0x1380e3['commit']();for(const _0x3224f1 of _0x654fde){await addDoc(collection(db,'pointsHistory'),_0x3224f1);}}return{'processed':_0x248b8d==='D1'?_0x8037e5:_0x248b8d==='D2'?_0x45ab5a:_0xf75e0b};};await _0x3693fc(_0x51459d,'D1'),await _0x3693fc(_0x1082eb,'D2'),await _0x3693fc(_0x326772,'D3'),showNotification('Completed!\x20Processed\x20'+_0x8037e5+'\x20D1\x20matches,\x20'+_0x45ab5a+'\x20D2\x20matches,\x20'+_0xf75e0b+'\x20D3\x20matches.\x20'+('Awarded\x20'+_0x56c1e2+'\x20points.\x20Skipped\x20'+_0x359af6+_0x458658(0x1ef)+_0x542786),'success'),document[_0x458658(0x15f)](_0x458658(0x13a))&&loadPointsOverview();}catch(_0x5ecd36){console['error'](_0x458658(0x137),_0x5ecd36),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x5ecd36['message'],_0x458658(0x168));}}const _0x3788f4=document['getElementById']('quick-edit-points-modal');if(_0x3788f4){console[_0x8b6a2a(0x20b)]('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x22dbea=_0x3788f4['querySelector']('.close-btn');_0x22dbea?_0x22dbea['addEventListener']('click',function(){const _0x34f53c=_0x8b6a2a;console[_0x34f53c(0x20b)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x8b6a2a(0x7d));const _0x4d0a3c=document['getElementById']('cancel-quick-edit');_0x4d0a3c?_0x4d0a3c[_0x8b6a2a(0x163)]('click',function(){const _0x25693c=_0x8b6a2a;console['log'](_0x25693c(0x28e)),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x36d5a3=document['getElementById']('quick-edit-points-form');_0x36d5a3?_0x36d5a3['addEventListener'](_0x8b6a2a(0x11f),function(_0x506f7f){const _0x20d1b9=_0x8b6a2a;console[_0x20d1b9(0x20b)]('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x506f7f);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x3788f4['addEventListener']('click',function(_0x360636){_0x360636['target']===_0x3788f4&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console[_0x8b6a2a(0x168)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x1c44d5=a4_0x11ae10;try{const _0x4428b0=parseInt(prompt(_0x1c44d5(0xf5),'10'));if(!_0x4428b0||isNaN(_0x4428b0)){showNotification('Invalid\x20points\x20amount','error');return;}if(!confirm('This\x20will\x20award\x20'+_0x4428b0+_0x1c44d5(0x1cb)))return;showNotification(_0x1c44d5(0x1a4),_0x1c44d5(0x199));const [_0x115164,_0x3beee8,_0x3d278f]=await Promise[_0x1c44d5(0x19e)]([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'playersD3'))]);console[_0x1c44d5(0x20b)]('Found\x20'+_0x115164['size']+_0x1c44d5(0xc1)+_0x3beee8['size']+'\x20D2\x20pilots,\x20'+_0x3d278f['size']+'\x20D3\x20pilots');const _0x214b3c=_0x115164['size']+_0x3beee8[_0x1c44d5(0x2b9)]+_0x3d278f[_0x1c44d5(0x2b9)],_0x480343=new Map();_0x115164[_0x1c44d5(0x1a3)](_0x4301ff=>{const _0x211da8=_0x4301ff['data']();_0x480343['set'](_0x4301ff['id'],{'username':_0x211da8['username'],'ladder':'D1'});}),_0x3beee8['forEach'](_0x40a49f=>{const _0x5be5f4=_0x1c44d5,_0x24c39a=_0x40a49f['data']();_0x480343[_0x5be5f4(0xfe)](_0x40a49f['id'],{'username':_0x24c39a[_0x5be5f4(0xd2)],'ladder':'D2'});}),_0x3d278f[_0x1c44d5(0x1a3)](_0x37741e=>{const _0x1ce75e=_0x1c44d5,_0x7462a0=_0x37741e[_0x1ce75e(0x242)]();_0x480343['set'](_0x37741e['id'],{'username':_0x7462a0[_0x1ce75e(0xd2)],'ladder':'D3'});}),console['log'](_0x1c44d5(0x77)+_0x480343['size']+_0x1c44d5(0xcc));let _0x3a97f0=0x0,_0x1e97e8=0x0,_0xe668d0=0x0;const _0x4b525a=Array['from'](_0x480343[_0x1c44d5(0x246)]()),_0x107b65=0x190;for(let _0x305fed=0x0;_0x305fed<_0x4b525a['length'];_0x305fed+=_0x107b65){const _0x4e9683=writeBatch(db),_0x53bc81=[],_0x5bdb5f=_0x4b525a[_0x1c44d5(0x240)](_0x305fed,_0x305fed+_0x107b65),_0x2bba60=await Promise['all'](_0x5bdb5f['map'](_0xaa152b=>getDoc(doc(db,_0x1c44d5(0x254),_0xaa152b))));for(let _0x40f843=0x0;_0x40f843<_0x5bdb5f['length'];_0x40f843++){try{const _0x2b44a0=_0x5bdb5f[_0x40f843],_0x2fed89=_0x480343['get'](_0x2b44a0),_0x1fdf34=_0x2bba60[_0x40f843];if(_0x1fdf34['exists']()){const _0x19a100=_0x1fdf34['data'](),_0x22dccf=_0x19a100['points']||0x0,_0x204537=_0x22dccf+_0x4428b0;_0x4e9683['update'](doc(db,_0x1c44d5(0x254),_0x2b44a0),{'points':_0x204537,'lastPointsModified':serverTimestamp()}),_0x53bc81['push']({'userId':_0x2b44a0,'userEmail':_0x19a100['email']||'unknown','displayName':_0x19a100['displayName']||_0x2fed89['username']||'Unknown\x20User','action':'add','amount':_0x4428b0,'previousPoints':_0x22dccf,'newPoints':_0x204537,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x2fed89['ladder']+')','adminEmail':auth[_0x1c44d5(0x2b7)]['email'],'timestamp':serverTimestamp()}),_0x1e97e8+=_0x4428b0,_0x3a97f0++;}else _0xe668d0++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x2fed89['username']+'\x20('+_0x2b44a0+')');}catch(_0x344cbe){_0xe668d0++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.[_0x1c44d5(0xd2)]+':',_0x344cbe);}}await _0x4e9683['commit']();for(const _0x28fdfe of _0x53bc81){await addDoc(collection(db,'pointsHistory'),_0x28fdfe);}showNotification('Processed\x20'+_0x3a97f0+'/'+_0x214b3c+_0x1c44d5(0x27c),'info');}showNotification('Complete!\x20Awarded\x20'+_0x1e97e8+'\x20points\x20to\x20'+_0x3a97f0+_0x1c44d5(0x2a8)+_0xe668d0,'success'),document[_0x1c44d5(0x15f)](_0x1c44d5(0x13a))&&loadPointsOverview();}catch(_0x432a1d){console['error'](_0x1c44d5(0x20a),_0x432a1d),showNotification('Error:\x20'+_0x432a1d[_0x1c44d5(0x122)],_0x1c44d5(0x168));}}function setupManageRibbonsSection(){const _0x214210=a4_0x11ae10;console['log'](_0x214210(0x90));const _0x339b27=document[_0x214210(0x15f)]('ribbon-user-search');_0x339b27&&_0x339b27['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x209c12=document['getElementById'](_0x214210(0xf8));_0x209c12&&_0x209c12['addEventListener'](_0x214210(0x236),searchRibbonUser);const _0x1fd7de=document['getElementById']('add-ribbon-form');_0x1fd7de&&_0x1fd7de[_0x214210(0x163)](_0x214210(0x11f),addRibbon),_0x339b27&&_0x339b27['addEventListener']('keypress',function(_0x32f9fa){const _0x4f307f=_0x214210;_0x32f9fa[_0x4f307f(0x15d)]==='Enter'&&(_0x32f9fa['preventDefault'](),searchRibbonUser());}),console['log'](_0x214210(0x204));}async function modifyUserPoints(_0x17779b,_0x23efa0,_0x270a4b,_0x41ede7=''){const _0x7ddf97=a4_0x11ae10,_0x5b2a3a=doc(db,_0x7ddf97(0x254),_0x17779b),_0x459cb7=await getDoc(_0x5b2a3a);if(!_0x459cb7[_0x7ddf97(0x120)]())throw new Error(_0x7ddf97(0x26a));const _0x1455aa=_0x459cb7['data'](),_0x3ba004=_0x1455aa[_0x7ddf97(0x12d)]!==undefined?_0x1455aa[_0x7ddf97(0x12d)]:0x0;_0x1455aa[_0x7ddf97(0x12d)]===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x1455aa['displayName']||_0x1455aa['email']||_0x7ddf97(0x261))),await updateDoc(_0x5b2a3a,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x52ba25=_0x3ba004;switch(_0x23efa0){case'add':_0x52ba25=_0x3ba004+_0x270a4b;break;case'subtract':_0x52ba25=Math['max'](0x0,_0x3ba004-_0x270a4b);break;case'set':_0x52ba25=_0x270a4b;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x5b2a3a,{'points':_0x52ba25,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x17779b,'userEmail':_0x1455aa['email']||'unknown','displayName':_0x1455aa['displayName']||_0x1455aa[_0x7ddf97(0xd2)]||'Unknown\x20User','action':_0x23efa0,'amount':_0x270a4b,'previousPoints':_0x3ba004,'newPoints':_0x52ba25,'reason':_0x41ede7,'adminEmail':auth['currentUser'][_0x7ddf97(0x1d6)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x45c190=a4_0x11ae10,_0x5e5ce8=document['getElementById']('points-overview-table-body');if(!_0x5e5ce8)return;_0x5e5ce8['innerHTML']=_0x45c190(0x272);try{const _0x113d02=collection(db,'userProfiles'),_0x53909d=await getDocs(_0x113d02);if(_0x53909d[_0x45c190(0x264)]){_0x5e5ce8['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x56642f=[];let _0x1d86e7=0x0;_0x53909d['forEach'](_0x59d8a3=>{const _0x3ec447=_0x59d8a3['data'](),_0x5f55ba=_0x3ec447['points']!==undefined?_0x3ec447['points']:0x0;_0x3ec447['points']===undefined&&_0x1d86e7++,_0x56642f['push']({'id':_0x59d8a3['id'],..._0x3ec447,'points':_0x5f55ba});}),_0x1d86e7>0x0&&(console['log'](_0x45c190(0x77)+_0x1d86e7+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x1d86e7+_0x45c190(0xcf),_0x45c190(0x199))),_0x56642f['sort']((_0x39ca74,_0x1912d9)=>(_0x1912d9[_0x45c190(0x12d)]||0x0)-(_0x39ca74['points']||0x0)),window['allUsersPoints']=_0x56642f,renderPointsOverview(_0x56642f);}catch(_0x48102c){console['error']('Error\x20loading\x20points\x20overview:',_0x48102c),_0x5e5ce8['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x48102c['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x117fe1=a4_0x11ae10,_0x391e6c=document['getElementById']('ribbons-overview-table-body');if(!_0x391e6c)return;_0x391e6c[_0x117fe1(0x250)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x59608d,_0x33c351,_0x596e1c]=await Promise['all']([getDocs(collection(db,_0x117fe1(0xb3))),getDocs(collection(db,_0x117fe1(0x2da))),getDocs(collection(db,'playerRibbonsD3'))]);_0x391e6c['innerHTML']='';const _0x18b902=(_0x282b9c,_0x58baef)=>{_0x282b9c['forEach'](_0x1d897a=>{const _0x27f209=a4_0x3b2d,_0x20e2e4=_0x1d897a['data'](),_0x539999=_0x20e2e4[_0x27f209(0x293)]||{},_0x2b4054=Object['keys'](_0x539999)['length'],_0xb85726=document['createElement']('tr');_0xb85726['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x20e2e4['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x58baef['toLowerCase']()+'\x22>'+_0x58baef+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2b4054+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x20e2e4['lastUpdated']?new Date(_0x20e2e4['lastUpdated'][_0x27f209(0x123)]*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x20e2e4['username']+'\x22\x20data-ladder=\x22'+_0x58baef+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x391e6c['appendChild'](_0xb85726);});};_0x18b902(_0x59608d,'D1'),_0x18b902(_0x33c351,'D2'),_0x18b902(_0x596e1c,'D3'),document[_0x117fe1(0x1c4)]('.edit-ribbons-btn')['forEach'](_0x278a63=>{const _0x23df37=_0x117fe1;_0x278a63['addEventListener'](_0x23df37(0x236),function(){const _0x389932=_0x23df37,_0x2c5276=this['dataset'][_0x389932(0xd2)],_0x5868db=this[_0x389932(0x178)]['ladder'];editUserRibbons(_0x2c5276,_0x5868db);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully',_0x117fe1(0xdf));}catch(_0x46acea){console['error'](_0x117fe1(0x233),_0x46acea),_0x391e6c['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x254284=a4_0x11ae10,_0x32e2fe=document['getElementById']('ribbon-user-search')[_0x254284(0x16f)]['trim']();if(!_0x32e2fe){showNotification(_0x254284(0xd7),'error');return;}try{const [_0x2b7d34,_0x30b5ba,_0x306b7c]=await Promise['all']([getDoc(doc(db,_0x254284(0xb3),_0x32e2fe)),getDoc(doc(db,'playerRibbonsD2',_0x32e2fe)),getDoc(doc(db,'playerRibbonsD3',_0x32e2fe))]);let _0x1e0853=null,_0x3631ad=null;if(_0x2b7d34['exists']())_0x1e0853='D1',_0x3631ad=_0x2b7d34['data']();else{if(_0x30b5ba['exists']())_0x1e0853='D2',_0x3631ad=_0x30b5ba['data']();else _0x306b7c['exists']()&&(_0x1e0853='D3',_0x3631ad=_0x306b7c['data']());}_0x1e0853?(document['getElementById'](_0x254284(0x26b))['textContent']=_0x32e2fe,document['getElementById'](_0x254284(0x157))['value']=_0x32e2fe,document[_0x254284(0x15f)](_0x254284(0x86))[_0x254284(0x16f)]=_0x1e0853,document['getElementById']('user-ribbon-management')[_0x254284(0x2ce)]['display']=_0x254284(0x222),displayCurrentRibbons(_0x3631ad['ribbons']||{}),showNotification('Found\x20'+_0x32e2fe+'\x20in\x20'+_0x1e0853+'\x20ladder','success')):showNotification(_0x254284(0x17a)+_0x32e2fe+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0xd19134){console['error']('Error\x20searching\x20user:',_0xd19134),showNotification(_0x254284(0xc8),_0x254284(0x168));}}function displayCurrentRibbons(_0x222398){const _0x17cc58=a4_0x11ae10,_0x3fa579=document[_0x17cc58(0x15f)]('current-ribbons-list');if(!_0x3fa579)return;_0x3fa579['innerHTML']='';if(Object['keys'](_0x222398)[_0x17cc58(0x1ab)]===0x0){_0x3fa579['innerHTML']=_0x17cc58(0x1f7);return;}Object['entries'](_0x222398)[_0x17cc58(0x1a3)](([_0x233a2f,_0x2a4e3b])=>{const _0x6296e1=_0x17cc58,_0x58b578=document['createElement']('div');_0x58b578[_0x6296e1(0x230)]='ribbon-item',_0x58b578['innerHTML']=_0x6296e1(0x140)+_0x233a2f+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x2a4e3b['level']||0x1)+_0x6296e1(0x2d5)+(_0x2a4e3b[_0x6296e1(0x10b)]?new Date(_0x2a4e3b[_0x6296e1(0x10b)][_0x6296e1(0x123)]*0x3e8)['toLocaleDateString']():_0x6296e1(0x261))+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x233a2f+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3fa579['appendChild'](_0x58b578);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x49695e=>{_0x49695e['addEventListener']('click',function(){const _0x2a8fa9=this['dataset']['ribbon'];removeRibbon(_0x2a8fa9);});});}async function addRibbon(_0x1c5478){const _0x14e667=a4_0x11ae10;_0x1c5478['preventDefault']();const _0x98ebbc=document['getElementById']('ribbon-target-user')['value'],_0x245e91=document['getElementById']('ribbon-target-ladder')[_0x14e667(0x16f)],_0x5e3ea2=document['getElementById']('ribbon-type-select')['value'],_0x3ee510=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x98ebbc||!_0x245e91||!_0x5e3ea2||!_0x3ee510){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x1e580e='playerRibbons'+(_0x245e91==='D1'?'':_0x245e91),_0x592fbe=doc(db,_0x1e580e,_0x98ebbc),_0x5d1810=await getDoc(_0x592fbe),_0x197503=_0x5d1810[_0x14e667(0x120)]()?_0x5d1810[_0x14e667(0x242)]()['ribbons']||{}:{};_0x197503[_0x5e3ea2]={'level':_0x3ee510,'awardedAt':serverTimestamp()},await setDoc(_0x592fbe,{'username':_0x98ebbc,'ladder':_0x245e91,'ribbons':_0x197503,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x5e3ea2+'\x20Level\x20'+_0x3ee510+'\x20to\x20'+_0x98ebbc,'success'),displayCurrentRibbons(_0x197503),document['getElementById']('ribbon-type-select')['value']='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x4b2279){console[_0x14e667(0x168)](_0x14e667(0x25e),_0x4b2279),showNotification(_0x14e667(0x1c2),'error');}}async function removeRibbon(_0x5dd144){const _0x3bd136=a4_0x11ae10,_0x2b3e0d=document[_0x3bd136(0x15f)]('ribbon-target-user')['value'],_0x2ba635=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm(_0x3bd136(0x1d4)+_0x5dd144+'\x20from\x20'+_0x2b3e0d+'?'))return;try{const _0xbf3cf3=_0x3bd136(0xb3)+(_0x2ba635==='D1'?'':_0x2ba635),_0x4157c1=doc(db,_0xbf3cf3,_0x2b3e0d),_0x2e2ad2=await getDoc(_0x4157c1),_0x3cd767=_0x2e2ad2['exists']()?_0x2e2ad2['data']()['ribbons']||{}:{};delete _0x3cd767[_0x5dd144],await setDoc(_0x4157c1,{'username':_0x2b3e0d,'ladder':_0x2ba635,'ribbons':_0x3cd767,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x5dd144+_0x3bd136(0x89)+_0x2b3e0d,'success'),displayCurrentRibbons(_0x3cd767);}catch(_0x1345b0){console['error'](_0x3bd136(0x11a),_0x1345b0),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x130e48,_0x4d9512){const _0x438216=a4_0x11ae10;document['getElementById']('ribbon-user-search')[_0x438216(0x16f)]=_0x130e48,searchRibbonUser();}