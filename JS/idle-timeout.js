const a22_0xc3546b=a22_0x550d;import a22_0x591f9d,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;function a22_0x1007(){const _0x1ff10c=['addEventListener','from','bind','getElementById','click','cursor','Failed\x20to\x20test\x20connection:','RDL_NETWORK_ERROR','network-error-overlay','catch','idle-overlay','prototype','message','size','scroll','code','textContent','Network\x20error\x20detected,\x20showing\x20error\x20overlay','log','style','error','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','color:\x20#fff;\x20margin-bottom:\x2030px;','body','keys','Session\x20resumed','Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.','Connection\x20test\x20failed:','createElement','DOMContentLoaded','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','forceIdleTimeout','cssText','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20','exception','retry-connection-btn','network','flex','RDL_SESSION_SUSPENDED','activeListeners','backgroundColor','blockedOperations','readyState','mousedown','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20'];a22_0x1007=function(){return _0x1ff10c;};return a22_0x1007();}const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x2bc00a=a22_0x550d;if(document['getElementById']('idle-overlay'))return;const _0x13c0a3=document['createElement']('div');_0x13c0a3['id']='idle-overlay',_0x13c0a3['style']['cssText']=_0x2bc00a(0x1c7);const _0x2073c5=document['createElement']('div');_0x2073c5[_0x2bc00a(0x1b9)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0xac30ef=document['createElement']('h2');_0xac30ef['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0xac30ef[_0x2bc00a(0x1b9)]['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x44bd8b=document['createElement']('p');_0x44bd8b['textContent']=_0x2bc00a(0x1c0),_0x44bd8b['style'][_0x2bc00a(0x1c6)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x2307f6=document['createElement']('button');_0x2307f6['id']='resume-session-btn',_0x2307f6['textContent']='Return\x20to\x20Website',_0x2307f6['style'][_0x2bc00a(0x1c6)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x2307f6['onmouseover']=function(){const _0x2bc52b=_0x2bc00a;this['style'][_0x2bc52b(0x1ce)]='#3da05f';},_0x2307f6['onmouseout']=function(){const _0x42dde1=_0x2bc00a;this['style'][_0x42dde1(0x1ce)]='#50C878';},_0x2073c5['appendChild'](_0xac30ef),_0x2073c5['appendChild'](_0x44bd8b),_0x2073c5['appendChild'](_0x2307f6),_0x13c0a3['appendChild'](_0x2073c5),document['body']['appendChild'](_0x13c0a3),_0x2307f6['addEventListener'](_0x2bc00a(0x1aa),resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x5e3d1e=a22_0x550d;if(document['getElementById']('network-error-overlay'))return;const _0x46ed6f=document['createElement']('div');_0x46ed6f['id']='network-error-overlay',_0x46ed6f[_0x5e3d1e(0x1b9)]['cssText']=_0x5e3d1e(0x1c7);const _0x3956f3=document[_0x5e3d1e(0x1c2)]('div');_0x3956f3['style']['cssText']=_0x5e3d1e(0x1c4);const _0x11eff0=document['createElement']('h2');_0x11eff0['textContent']='Connection\x20Error',_0x11eff0[_0x5e3d1e(0x1b9)]['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x507546=document['createElement']('p');_0x507546['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x507546['style']['cssText']=_0x5e3d1e(0x1bc);const _0xd68070=document[_0x5e3d1e(0x1c2)]('button');_0xd68070['id']=_0x5e3d1e(0x1c9),_0xd68070[_0x5e3d1e(0x1b6)]='Retry\x20Connection',_0xd68070['style'][_0x5e3d1e(0x1c6)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x3d3e1f=document[_0x5e3d1e(0x1c2)]('button');_0x3d3e1f['id']='reload-page-btn',_0x3d3e1f['textContent']='Reload\x20Page',_0x3d3e1f['style'][_0x5e3d1e(0x1c6)]=_0x5e3d1e(0x1d2);const _0x4dc1db=document['createElement']('div');_0x4dc1db['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x4dc1db['appendChild'](_0xd68070),_0x4dc1db['appendChild'](_0x3d3e1f),_0x3956f3['appendChild'](_0x11eff0),_0x3956f3['appendChild'](_0x507546),_0x3956f3['appendChild'](_0x4dc1db),_0x46ed6f['appendChild'](_0x3956f3),document[_0x5e3d1e(0x1bd)]['appendChild'](_0x46ed6f),_0xd68070['addEventListener'](_0x5e3d1e(0x1aa),retryConnection),_0x3d3e1f['addEventListener'](_0x5e3d1e(0x1aa),()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x272c10=a22_0x550d;clearTimeout(idleTimer);const _0x478045=document['getElementById']('network-error-overlay');_0x478045&&(_0x478045['style']['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console['log'](_0x272c10(0x1b7)),a22_0x591f9d['suspendAllListeners']();}function retryConnection(){const _0x6e1e4d=a22_0x550d;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x200aeb=document['querySelector']('#network-error-overlay\x20p');_0x200aeb&&(_0x200aeb[_0x6e1e4d(0x1b6)]='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x37f354=document['getElementById']('retry-connection-btn');_0x37f354&&(_0x37f354['disabled']=!![],_0x37f354[_0x6e1e4d(0x1b9)]['opacity']='0.5',_0x37f354['style'][_0x6e1e4d(0x1ab)]='not-allowed');return;}const _0x149db9=document['getElementById'](_0x6e1e4d(0x1ae));_0x149db9&&(_0x149db9['style']['display']='none');window[_0x6e1e4d(0x1ad)]=![],resetIdleTimer(),console[_0x6e1e4d(0x1b8)]('Retrying\x20connection...');try{const {rdlFirestore:_0x1fbc57}=window;if(_0x1fbc57){const _0x1922e0=_0x1fbc57['collection']('system');_0x1fbc57['getDocs'](_0x1922e0)[_0x6e1e4d(0x1af)](_0x5f1e8c=>{const _0x20b7dd=_0x6e1e4d;console['error'](_0x20b7dd(0x1c1),_0x5f1e8c),handleNetworkError();});}}catch(_0x55fa24){console[_0x6e1e4d(0x1ba)](_0x6e1e4d(0x1ac),_0x55fa24),handleNetworkError();}a22_0x591f9d['resumeAllListeners']();}function suspendSession(){const _0x3276ea=a22_0x550d;isSessionSuspended=!![];const _0xa4af17=document['getElementById'](_0x3276ea(0x1b0));_0xa4af17&&(_0xa4af17['style']['display']=_0x3276ea(0x1cb)),console[_0x3276ea(0x1b8)]('Session\x20suspended\x20due\x20to\x20inactivity'),window[_0x3276ea(0x1cc)]=!![],a22_0x591f9d['suspendAllListeners']();}function a22_0x550d(_0x3d6982,_0x351e78){const _0x3a46f7=a22_0x1007();return a22_0x550d=function(_0x4801aa,_0x36c206){_0x4801aa=_0x4801aa-0x1a6;let _0x10071c=_0x3a46f7[_0x4801aa];return _0x10071c;},a22_0x550d(_0x3d6982,_0x351e78);}function resumeSession(){const _0x5161a4=a22_0x550d;isSessionSuspended=![],window[_0x5161a4(0x1cc)]=![];const _0x2ab0f3=document[_0x5161a4(0x1a9)]('idle-overlay');_0x2ab0f3&&(_0x2ab0f3['style']['display']='none'),console['log'](_0x5161a4(0x1bf)),resetIdleTimer(),a22_0x591f9d['resumeAllListeners'](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log'](_0x5161a4(0x1bb)),window['location']['reload']());}function initIdleTimeout(){const _0x44956a=a22_0x550d,_0xf8fe03=(function(){let _0x1ef48b=!![];return function(_0x4d7380,_0x521b7d){const _0x45ae01=_0x1ef48b?function(){if(_0x521b7d){const _0x3b06cf=_0x521b7d['apply'](_0x4d7380,arguments);return _0x521b7d=null,_0x3b06cf;}}:function(){};return _0x1ef48b=![],_0x45ae01;};}()),_0x5df832=_0xf8fe03(this,function(){const _0x292e77=a22_0x550d,_0x5ea3f2=function(){let _0x36ec11;try{_0x36ec11=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4aed17){_0x36ec11=window;}return _0x36ec11;},_0x54c70b=_0x5ea3f2(),_0x33a4d7=_0x54c70b['console']=_0x54c70b['console']||{},_0x3f50e6=[_0x292e77(0x1b8),'warn','info',_0x292e77(0x1ba),_0x292e77(0x1c8),'table','trace'];for(let _0x2ee1b5=0x0;_0x2ee1b5<_0x3f50e6['length'];_0x2ee1b5++){const _0x8b3e77=_0xf8fe03['constructor'][_0x292e77(0x1b1)][_0x292e77(0x1a8)](_0xf8fe03),_0x2a01f0=_0x3f50e6[_0x2ee1b5],_0x1433a7=_0x33a4d7[_0x2a01f0]||_0x8b3e77;_0x8b3e77['__proto__']=_0xf8fe03['bind'](_0xf8fe03),_0x8b3e77['toString']=_0x1433a7['toString']['bind'](_0x1433a7),_0x33a4d7[_0x2a01f0]=_0x8b3e77;}});_0x5df832(),createIdleOverlay();const _0x5c5c31=[_0x44956a(0x1d1),'mousemove','keypress',_0x44956a(0x1b4),'touchstart','click'];_0x5c5c31['forEach'](_0x362f89=>{const _0x43c899=_0x44956a;document[_0x43c899(0x1a6)](_0x362f89,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window[_0x44956a(0x1a6)]('error',function(_0x31fc16){const _0x78cb2c=_0x44956a;_0x31fc16['error']&&(_0x31fc16['error']['message']&&_0x31fc16['error'][_0x78cb2c(0x1b2)]['includes'](_0x78cb2c(0x1ca))||_0x31fc16['error'][_0x78cb2c(0x1b5)]&&(_0x31fc16['error']['code']==='unavailable'||_0x31fc16['error']['code']==='resource-exhausted'||_0x31fc16['error']['code']['includes'](_0x78cb2c(0x1ca))))&&(handleNetworkError(),_0x31fc16['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x44f631=_0x44956a;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log']('Network\x20error:',window['RDL_NETWORK_ERROR']),console[_0x44f631(0x1b8)]('Active\x20listeners:',a22_0x591f9d['activeListeners'][_0x44f631(0x1b3)]),console['log']('Pending\x20operations:',a22_0x591f9d['pendingOperations']['size']),console['log']('Blocked\x20operations:',a22_0x591f9d[_0x44f631(0x1cf)]||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array[_0x44f631(0x1a7)](a22_0x591f9d[_0x44f631(0x1cd)]['keys']()),'pendingOperations':Array['from'](a22_0x591f9d['pendingOperations'][_0x44f631(0x1be)]()),'blockedCount':a22_0x591f9d[_0x44f631(0x1cf)]||0x0};},window[_0x44956a(0x1c5)]=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document[a22_0xc3546b(0x1d0)]==='loading'?document['addEventListener'](a22_0xc3546b(0x1c3),initIdleTimeout):initIdleTimeout();