const a45_0x57f202=a45_0x31d8,a45_0x1f0323=(function(){let _0x251259=!![];return function(_0x3774cd,_0x300d38){const _0x3edbfa=_0x251259?function(){const _0x2e45f4=a45_0x31d8;if(_0x300d38){const _0x5b176e=_0x300d38[_0x2e45f4(0xf5)](_0x3774cd,arguments);return _0x300d38=null,_0x5b176e;}}:function(){};return _0x251259=![],_0x3edbfa;};}()),a45_0x328f8a=a45_0x1f0323(this,function(){const _0x54fbb8=a45_0x31d8,_0x1447ed=function(){const _0x2390ff=a45_0x31d8;let _0x3c733c;try{_0x3c733c=Function(_0x2390ff(0x102)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xc85ae1){_0x3c733c=window;}return _0x3c733c;},_0x272c84=_0x1447ed(),_0x1708e3=_0x272c84['console']=_0x272c84[_0x54fbb8(0xf9)]||{},_0x4bff37=[_0x54fbb8(0xff),'warn',_0x54fbb8(0xfa),'error','exception',_0x54fbb8(0xfe),'trace'];for(let _0x2c4cd0=0x0;_0x2c4cd0<_0x4bff37['length'];_0x2c4cd0++){const _0x2b91be=a45_0x1f0323[_0x54fbb8(0x103)]['prototype'][_0x54fbb8(0xf8)](a45_0x1f0323),_0x4ae519=_0x4bff37[_0x2c4cd0],_0x109fd9=_0x1708e3[_0x4ae519]||_0x2b91be;_0x2b91be[_0x54fbb8(0xf6)]=a45_0x1f0323['bind'](a45_0x1f0323),_0x2b91be['toString']=_0x109fd9['toString'][_0x54fbb8(0xf8)](_0x109fd9),_0x1708e3[_0x4ae519]=_0x2b91be;}});function a45_0x14f8(){const _0x3c532d=['apply','__proto__','isReady','bind','console','info','error','lastUpdated','Just\x20now','table','log','none','toDate','return\x20(function()\x20','constructor'];a45_0x14f8=function(){return _0x3c532d;};return a45_0x14f8();}a45_0x328f8a();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where(a45_0x57f202(0xf7),'==',!![]));function updateQueueDisplay(_0x75e0fb){const _0x931bc2=a45_0x57f202,_0x448bb2=document['getElementById']('queue-container');if(!_0x448bb2)return;if(_0x75e0fb['length']===0x0){_0x448bb2['style']['display']=_0x931bc2(0x100);return;}_0x448bb2['style']['display']='block';let _0x1b9d23='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x75e0fb['forEach'](_0x300be3=>{_0x1b9d23+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x300be3['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x300be3['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x1b9d23+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x448bb2['innerHTML']=_0x1b9d23;}function a45_0x31d8(_0x136d75,_0x26f5ab){const _0x328f8a=a45_0x14f8();return a45_0x31d8=function(_0x1f0323,_0x466b2c){_0x1f0323=_0x1f0323-0xf5;let _0x14f8ab=_0x328f8a[_0x1f0323];return _0x14f8ab;},a45_0x31d8(_0x136d75,_0x26f5ab);}function formatQueueTime(_0x4427f6){const _0x4f621b=a45_0x57f202;if(!_0x4427f6)return _0x4f621b(0xfd);const _0x59eca8=_0x4427f6[_0x4f621b(0x101)]?_0x4427f6[_0x4f621b(0x101)]():new Date(_0x4427f6),_0x472d04=new Date(),_0x271e64=Math['floor']((_0x472d04-_0x59eca8)/0xea60);if(_0x271e64<0x1)return _0x4f621b(0xfd);return _0x271e64+'m\x20in\x20queue';}async function checkQueueTimeout(_0x18c3c0){const _0x5a391c=a45_0x57f202;if(!_0x18c3c0[_0x5a391c(0xfc)])return;const _0xbcac91=_0x18c3c0['lastUpdated'][_0x5a391c(0x101)]?_0x18c3c0['lastUpdated'][_0x5a391c(0x101)]():new Date(_0x18c3c0['lastUpdated']),_0x48df9d=new Date(),_0x58646d=Math['floor']((_0x48df9d-_0xbcac91)/0xea60);if(_0x58646d>=0x1e)try{const _0x21519c=doc(db,'readyPlayers',_0x18c3c0['id']);await updateDoc(_0x21519c,{'isReady':![]});}catch(_0x669f0b){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x669f0b);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x2f8ac3=>{const _0x1fda02=[];_0x2f8ac3['forEach'](_0x5319e3=>{const _0x2cd726=_0x5319e3['data']();if(_0x2cd726['isReady']===!![]){const _0xc1f52f={'id':_0x5319e3['id'],'username':_0x2cd726['username'],'lastUpdated':_0x2cd726['lastUpdated']||new Date()};_0x1fda02['push'](_0xc1f52f),checkQueueTimeout(_0xc1f52f);}}),updateQueueDisplay(_0x1fda02);},_0x4be869=>{const _0x1c5f85=a45_0x57f202;console[_0x1c5f85(0xfb)]('Error\x20in\x20queue\x20listener:',_0x4be869);});window['addEventListener']('unload',()=>{unsubscribe();});