const a8_0x413858=a8_0x1f30,a8_0x246311=(function(){let _0x597e09=!![];return function(_0x54eeb5,_0xe9f4ed){const _0x4e272c=_0x597e09?function(){const _0xf51ef6=a8_0x1f30;if(_0xe9f4ed){const _0x1ea634=_0xe9f4ed[_0xf51ef6(0x1c3)](_0x54eeb5,arguments);return _0xe9f4ed=null,_0x1ea634;}}:function(){};return _0x597e09=![],_0x4e272c;};}()),a8_0x318c54=a8_0x246311(this,function(){const _0x2943cc=a8_0x1f30,_0xac366b=function(){let _0x46f84b;try{_0x46f84b=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4ea35f){_0x46f84b=window;}return _0x46f84b;},_0x10d9e1=_0xac366b(),_0x2435b4=_0x10d9e1[_0x2943cc(0x1dc)]=_0x10d9e1['console']||{},_0xdb628e=['log','warn','info','error','exception','table','trace'];for(let _0x4bfd53=0x0;_0x4bfd53<_0xdb628e['length'];_0x4bfd53++){const _0x8da666=a8_0x246311[_0x2943cc(0x1d2)][_0x2943cc(0x1ce)][_0x2943cc(0x1da)](a8_0x246311),_0x4d8b9b=_0xdb628e[_0x4bfd53],_0x69b310=_0x2435b4[_0x4d8b9b]||_0x8da666;_0x8da666['__proto__']=a8_0x246311[_0x2943cc(0x1da)](a8_0x246311),_0x8da666['toString']=_0x69b310['toString'][_0x2943cc(0x1da)](_0x69b310),_0x2435b4[_0x4d8b9b]=_0x8da666;}});a8_0x318c54();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';function a8_0x1f30(_0x57a0cf,_0x192c12){const _0x318c54=a8_0x3492();return a8_0x1f30=function(_0x246311,_0x47abc6){_0x246311=_0x246311-0x1c1;let _0x34920e=_0x318c54[_0x246311];return _0x34920e;},a8_0x1f30(_0x57a0cf,_0x192c12);}let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a8_0x413858(0x1d0),CACHE_EXPIRY=0xea60;function a8_0x3492(){const _0x3b1428=['#ff3b30','10px','apply','getElementById','uid','-5px','setItem','top','error','docs','winnerUsername','999','none','prototype','height','pendingMatchesCache','pendingMatchesD3','constructor','currentUsername','style','disconnect','all','Error\x20checking\x20pending\x20matches:','body','pendingMatches','bind','absolute','console','approved','borderRadius','50%','Error\x20fetching\x20username:','data','backgroundColor'];a8_0x3492=function(){return _0x3b1428;};return a8_0x3492();}export async function checkPendingMatches(_0x36fae9=![]){const _0x2abed1=a8_0x413858,_0x48209d=Date['now'](),_0x138d57=checkNotificationCache();if(_0x138d57!==null&&!_0x36fae9){updateNotificationDot(_0x138d57);if(_0x48209d-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x48209d;const _0x11fe77=auth['currentUser'];if(!_0x11fe77){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x484da8,_0x2b1f49,_0x56c050]=await Promise['all']([checkForPendingMatchesInCollection(_0x11fe77,_0x2abed1(0x1d9)),checkForPendingMatchesInCollection(_0x11fe77,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x11fe77,_0x2abed1(0x1d1))]),_0x54c153=_0x484da8||_0x2b1f49||_0x56c050;updateNotificationDot(_0x54c153),updateNotificationCache(_0x54c153);}catch(_0x18d6b8){console['error'](_0x2abed1(0x1d7),_0x18d6b8);}}async function checkForPendingMatchesInCollection(_0x66a10c,_0x230e04){const _0x29b536=a8_0x413858,_0x314b83=_0x66a10c['uid'],_0x1f5d52=_0x66a10c['email'],_0x54c532=query(collection(db,_0x230e04),where('winnerId','==',_0x314b83),where(_0x29b536(0x1dd),'==',![])),_0x129f45=await getDocs(_0x54c532);if(!_0x129f45['empty'])return!![];if(_0x1f5d52){const _0x1f3d82=query(collection(db,_0x230e04),where('winnerEmail','==',_0x1f5d52),where(_0x29b536(0x1dd),'==',![])),_0x3350fb=await getDocs(_0x1f3d82);if(!_0x3350fb['empty'])return!![];}let _0x2191e4=await getUsernameFromAllSources(_0x66a10c);if(_0x2191e4){const _0x3a7659=query(collection(db,_0x230e04),where(_0x29b536(0x1cb),'==',_0x2191e4),where(_0x29b536(0x1dd),'==',![])),_0x199f62=await getDocs(_0x3a7659);if(!_0x199f62['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x48cc5a){const _0xe8c9af=a8_0x413858,_0x5a44f6=localStorage['getItem']('currentUsername');if(_0x5a44f6)return _0x5a44f6;try{const [_0x2f54ce,_0x2207e4,_0x26bc67]=await Promise[_0xe8c9af(0x1d6)]([getDocs(query(collection(db,'players'),where('userId','==',_0x48cc5a[_0xe8c9af(0x1c5)]))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x48cc5a['uid']))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x48cc5a['uid'])))]);if(!_0x2f54ce['empty']){const _0xe726a5=_0x2f54ce['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0xe726a5),_0xe726a5;}if(!_0x2207e4['empty']){const _0x357e45=_0x2207e4['docs'][0x0]['data']()['username'];return localStorage[_0xe8c9af(0x1c7)]('currentUsername',_0x357e45),_0x357e45;}if(!_0x26bc67['empty']){const _0x505dfd=_0x26bc67[_0xe8c9af(0x1ca)][0x0]['data']()['username'];return localStorage[_0xe8c9af(0x1c7)](_0xe8c9af(0x1d3),_0x505dfd),_0x505dfd;}const _0x4975a7=await getDoc(doc(db,'users',_0x48cc5a['uid']));if(_0x4975a7['exists']()&&_0x4975a7[_0xe8c9af(0x1e1)]()['username']){const _0x5404f5=_0x4975a7[_0xe8c9af(0x1e1)]()['username'];return localStorage[_0xe8c9af(0x1c7)](_0xe8c9af(0x1d3),_0x5404f5),_0x5404f5;}}catch(_0x5c2a2c){console[_0xe8c9af(0x1c9)](_0xe8c9af(0x1e0),_0x5c2a2c);}if(_0x48cc5a['email'])return _0x48cc5a['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x2b69c7){const _0xa0dfff={'status':_0x2b69c7,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0xa0dfff));}function checkNotificationCache(){const _0x702a5a=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x702a5a)return null;try{const {status:_0x22ca7a,timestamp:_0xd466fe}=JSON['parse'](_0x702a5a),_0x1fe2f7=Date['now']();if(_0x1fe2f7-_0xd466fe<CACHE_EXPIRY)return _0x22ca7a;}catch(_0x208f5a){}return null;}export function updateNotificationDot(_0x4df6b5){const _0x502516=a8_0x413858,_0x4e0295=new MutationObserver((_0x49caf3,_0xdaec64)=>{const _0x6b62dd=a8_0x1f30,_0x314869=document[_0x6b62dd(0x1c4)]('report-match-notification');_0x314869&&(updateDotStyle(_0x314869,_0x4df6b5),_0xdaec64['disconnect']());});_0x4e0295['observe'](document[_0x502516(0x1d8)],{'childList':!![],'subtree':!![]});const _0x1422a4=document[_0x502516(0x1c4)]('report-match-notification');_0x1422a4&&(updateDotStyle(_0x1422a4,_0x4df6b5),_0x4e0295['disconnect']()),setTimeout(()=>_0x4e0295[_0x502516(0x1d5)](),0x1388);}function updateDotStyle(_0x779ab5,_0x233a83){const _0x476304=a8_0x413858;_0x233a83?(_0x779ab5['style']['display']='block',_0x779ab5['style'][_0x476304(0x1e2)]=_0x476304(0x1c1),_0x779ab5['style']['width']='10px',_0x779ab5['style'][_0x476304(0x1cf)]=_0x476304(0x1c2),_0x779ab5['style']['position']=_0x476304(0x1db),_0x779ab5[_0x476304(0x1d4)][_0x476304(0x1c8)]=_0x476304(0x1c6),_0x779ab5['style']['right']='-8px',_0x779ab5[_0x476304(0x1d4)][_0x476304(0x1de)]=_0x476304(0x1df),_0x779ab5['style']['border']='2px\x20solid\x20white',_0x779ab5['style']['zIndex']=_0x476304(0x1cc)):_0x779ab5[_0x476304(0x1d4)]['display']=_0x476304(0x1cd);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x3988b3=a8_0x1f30;localStorage['removeItem'](_0x3988b3(0x1d3)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});