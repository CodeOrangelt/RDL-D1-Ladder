const a45_0x11d609=a45_0x21aa,a45_0x296527=(function(){let _0x2922b8=!![];return function(_0x3594fb,_0x431804){const _0x3b0e0b=_0x2922b8?function(){const _0x2522ee=a45_0x21aa;if(_0x431804){const _0x57eef0=_0x431804[_0x2522ee(0xc5)](_0x3594fb,arguments);return _0x431804=null,_0x57eef0;}}:function(){};return _0x2922b8=![],_0x3b0e0b;};}()),a45_0xbc96cd=a45_0x296527(this,function(){const _0x40592f=a45_0x21aa,_0x40a2c4=function(){let _0x50485e;try{_0x50485e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3866d2){_0x50485e=window;}return _0x50485e;},_0xa80055=_0x40a2c4(),_0x251b7b=_0xa80055['console']=_0xa80055['console']||{},_0x2c9301=['log',_0x40592f(0xaa),'info','error','exception','table','trace'];for(let _0x161f80=0x0;_0x161f80<_0x2c9301[_0x40592f(0xc4)];_0x161f80++){const _0xaed0d6=a45_0x296527['constructor']['prototype'][_0x40592f(0xb6)](a45_0x296527),_0xc86f67=_0x2c9301[_0x161f80],_0x1e7737=_0x251b7b[_0xc86f67]||_0xaed0d6;_0xaed0d6[_0x40592f(0xb4)]=a45_0x296527['bind'](a45_0x296527),_0xaed0d6[_0x40592f(0xbb)]=_0x1e7737[_0x40592f(0xbb)][_0x40592f(0xb6)](_0x1e7737),_0x251b7b[_0xc86f67]=_0xaed0d6;}});a45_0xbc96cd();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';function a45_0x21aa(_0x176c0a,_0x4861ca){const _0xbc96cd=a45_0x2f9f();return a45_0x21aa=function(_0x296527,_0x36826b){_0x296527=_0x296527-0xa2;let _0x2f9f0b=_0xbc96cd[_0x296527];return _0x2f9f0b;},a45_0x21aa(_0x176c0a,_0x4861ca);}const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x20f1e6=a45_0x21aa;this['form']=document['getElementById'](_0x20f1e6(0xc7)),this['pfpInput']=document['getElementById']('pfp-upload'),this['pfpPreview']=document[_0x20f1e6(0xa4)]('profile-preview'),this['statsContainer']=document['getElementById'](_0x20f1e6(0xbc)),this[_0x20f1e6(0xbe)](),this['loadProfile']();}['setupEventListeners'](){const _0x5e6491=a45_0x21aa;this[_0x5e6491(0xc0)][_0x5e6491(0xc1)]('change',_0x30884a=>this[_0x5e6491(0xad)](_0x30884a)),this[_0x5e6491(0xa9)]['addEventListener']('submit',_0x418f0c=>this[_0x5e6491(0xc2)](_0x418f0c));}async['handleImageUpload'](_0x53dff4){const _0x497d32=a45_0x21aa,_0x2b4eda=_0x53dff4[_0x497d32(0xab)]['files'][0x0];if(_0x2b4eda){const _0x49fd0c=new FileReader();_0x49fd0c[_0x497d32(0xa8)]=_0x39d327=>{const _0x49a223=_0x497d32;this['pfpPreview'][_0x49a223(0xbf)]=_0x39d327['target'][_0x49a223(0xb9)];},_0x49fd0c[_0x497d32(0xb3)](_0x2b4eda);}}async[a45_0x11d609(0xc2)](_0x581a0b){const _0x56e5e4=a45_0x11d609;_0x581a0b['preventDefault']();const _0x2ec403=auth['currentUser'];if(!_0x2ec403){alert('Please\x20sign\x20in\x20to\x20save\x20your\x20profile');return;}try{const _0x38e06a=new FormData(this['form']),_0x483b3d={'nickname':_0x38e06a[_0x56e5e4(0xb5)]('nickname'),'motto':_0x38e06a['get'](_0x56e5e4(0xc8)),'favoriteMap':_0x38e06a[_0x56e5e4(0xb5)]('favorite-map'),'favoriteWeapon':_0x38e06a[_0x56e5e4(0xb5)]('favorite-weapon'),'updatedAt':new Date()['toISOString']()},_0x1ca464=this[_0x56e5e4(0xc0)]['files'][0x0];if(_0x1ca464){const _0x1cc03d=ref(storage,'profile-pictures/'+_0x2ec403[_0x56e5e4(0xba)]);await uploadBytes(_0x1cc03d,_0x1ca464),_0x483b3d['pfpUrl']=await getDownloadURL(_0x1cc03d);}await setDoc(doc(db,'profiles',_0x2ec403['uid']),_0x483b3d),alert('Profile\x20saved\x20successfully!');}catch(_0x29382c){console[_0x56e5e4(0xa7)]('Error\x20saving\x20profile:',_0x29382c),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async['loadProfile'](){onAuthStateChanged(auth,async _0x5b17cf=>{const _0x18cf0a=a45_0x21aa;if(_0x5b17cf)try{const _0xbe5d75=await getDoc(doc(db,_0x18cf0a(0xb0),_0x5b17cf['uid']));if(_0xbe5d75['exists']()){const _0x45a87c=_0xbe5d75[_0x18cf0a(0xb2)]();document['getElementById']('nickname')['value']=_0x45a87c['nickname']||'',document[_0x18cf0a(0xa4)]('motto')[_0x18cf0a(0xc6)]=_0x45a87c['motto']||'',document['getElementById']('favorite-map')['value']=_0x45a87c[_0x18cf0a(0xa5)]||'',document['getElementById']('favorite-weapon')['value']=_0x45a87c['favoriteWeapon']||'',_0x45a87c['pfpUrl']&&(this['pfpPreview']['src']=_0x45a87c['pfpUrl']),await this['loadPlayerStats'](_0x45a87c['nickname']);}}catch(_0x13626b){console[_0x18cf0a(0xa7)](_0x18cf0a(0xae),_0x13626b);}});}async['loadPlayerStats'](_0x1a3665){const _0x26edc8=a45_0x11d609;if(!_0x1a3665)return;try{const _0x3a1127=collection(db,_0x26edc8(0xaf)),[_0x5c0131,_0x57ef24]=await Promise['all']([getDocs(query(_0x3a1127,where(_0x26edc8(0xc3),'==',_0x1a3665))),getDocs(query(_0x3a1127,where('loserUsername','==',_0x1a3665)))]),_0xfe8a2=_0x5c0131[_0x26edc8(0xb7)],_0x552320=_0x57ef24['size'],_0x19cef9=_0xfe8a2+_0x552320;let _0x2e47bc=0x0,_0x16016d=0x0;_0x5c0131[_0x26edc8(0xa2)](_0x2693ec=>{const _0x33cdfa=_0x26edc8,_0x5b9efc=_0x2693ec['data']();if(_0x5b9efc[_0x33cdfa(0xac)])_0x2e47bc+=parseInt(_0x5b9efc['winnerScore']);if(_0x5b9efc['loserScore'])_0x16016d+=parseInt(_0x5b9efc['loserScore']);}),_0x57ef24[_0x26edc8(0xa2)](_0x4fa2d4=>{const _0x4caafb=_0x26edc8,_0xcbba8a=_0x4fa2d4['data']();if(_0xcbba8a[_0x4caafb(0xbd)])_0x2e47bc+=parseInt(_0xcbba8a[_0x4caafb(0xbd)]);if(_0xcbba8a['winnerScore'])_0x16016d+=parseInt(_0xcbba8a['winnerScore']);});const _0x5658b3=_0x16016d===0x0?_0x2e47bc['toFixed'](0x2):(_0x2e47bc/_0x16016d)['toFixed'](0x2),_0x2f6a7d=_0x19cef9===0x0?'0':(_0xfe8a2/_0x19cef9*0x64)['toFixed'](0x1);console['log']('Stats\x20calculated:',{'totalMatches':_0x19cef9,'wins':_0xfe8a2,'losses':_0x552320,'totalKills':_0x2e47bc,'totalDeaths':_0x16016d,'kdRatio':_0x5658b3,'winRate':_0x2f6a7d}),document['getElementById']('stats-matches')['textContent']=_0x19cef9,document['getElementById']('stats-wins')[_0x26edc8(0xb8)]=_0xfe8a2,document[_0x26edc8(0xa4)]('stats-losses')['textContent']=_0x552320,document['getElementById']('stats-kd')['textContent']=_0x5658b3,document[_0x26edc8(0xa4)]('stats-winrate')['textContent']=_0x2f6a7d+'%';}catch(_0x5b6cda){console['error']('Error\x20loading\x20player\x20stats:',_0x5b6cda),['matches',_0x26edc8(0xa6),_0x26edc8(0xa3),'kd','winrate'][_0x26edc8(0xa2)](_0x4510c0=>{const _0x28d4c6=_0x26edc8;document[_0x28d4c6(0xa4)](_0x28d4c6(0xb1)+_0x4510c0)['textContent']='-';});}}}function a45_0x2f9f(){const _0x1de63f=['forEach','losses','getElementById','favoriteMap','wins','error','onload','form','warn','target','winnerScore','handleImageUpload','Error\x20loading\x20profile:','approvedMatches','profiles','stats-','data','readAsDataURL','__proto__','get','bind','size','textContent','result','uid','toString','player-stats','loserScore','setupEventListeners','src','pfpInput','addEventListener','handleSubmit','winnerUsername','length','apply','value','profile-form','motto'];a45_0x2f9f=function(){return _0x1de63f;};return a45_0x2f9f();}document[a45_0x11d609(0xc1)]('DOMContentLoaded',()=>{new ProfileManager();});