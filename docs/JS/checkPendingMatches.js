const a0_0x4b2708=a0_0x4058;(function(_0x531f62,_0x4c5f7c){const _0x315039=a0_0x4058,_0x32affa=_0x531f62();while(!![]){try{const _0x1fca8c=parseInt(_0x315039(0xbf))/0x1*(parseInt(_0x315039(0xa8))/0x2)+parseInt(_0x315039(0xa9))/0x3+-parseInt(_0x315039(0xa0))/0x4*(parseInt(_0x315039(0xa5))/0x5)+-parseInt(_0x315039(0xa7))/0x6*(-parseInt(_0x315039(0xbb))/0x7)+-parseInt(_0x315039(0xc2))/0x8*(parseInt(_0x315039(0x99))/0x9)+-parseInt(_0x315039(0xa1))/0xa*(-parseInt(_0x315039(0xaf))/0xb)+-parseInt(_0x315039(0xb3))/0xc;if(_0x1fca8c===_0x4c5f7c)break;else _0x32affa['push'](_0x32affa['shift']());}catch(_0x1b0be4){_0x32affa['push'](_0x32affa['shift']());}}}(a0_0x3dcd,0x6b166));const a0_0x1da9c5=(function(){let _0x5f2319=!![];return function(_0x2df4f6,_0x2f5c24){const _0x30c11b=_0x5f2319?function(){const _0x2498db=a0_0x4058;if(_0x2f5c24){const _0x4c19e3=_0x2f5c24[_0x2498db(0xae)](_0x2df4f6,arguments);return _0x2f5c24=null,_0x4c19e3;}}:function(){};return _0x5f2319=![],_0x30c11b;};}()),a0_0x2c2a79=a0_0x1da9c5(this,function(){const _0x3305b9=a0_0x4058,_0xeb3832=function(){const _0x191500=a0_0x4058;let _0x5633b4;try{_0x5633b4=Function(_0x191500(0xa6)+_0x191500(0x9f)+');')();}catch(_0x1d6071){_0x5633b4=window;}return _0x5633b4;},_0x38d109=_0xeb3832(),_0x40f48a=_0x38d109['console']=_0x38d109['console']||{},_0x34c2fc=['log','warn','info','error','exception','table','trace'];for(let _0x49f2eb=0x0;_0x49f2eb<_0x34c2fc['length'];_0x49f2eb++){const _0x15a081=a0_0x1da9c5['constructor']['prototype']['bind'](a0_0x1da9c5),_0x299e25=_0x34c2fc[_0x49f2eb],_0x465470=_0x40f48a[_0x299e25]||_0x15a081;_0x15a081['__proto__']=a0_0x1da9c5['bind'](a0_0x1da9c5),_0x15a081['toString']=_0x465470['toString'][_0x3305b9(0xb8)](_0x465470),_0x40f48a[_0x299e25]=_0x15a081;}});a0_0x2c2a79();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x1d70ee=![]){const _0x2664de=a0_0x4058,_0xd72ecf=Date['now'](),_0x376d6b=checkNotificationCache();if(_0x376d6b!==null&&!_0x1d70ee){updateNotificationDot(_0x376d6b);if(_0xd72ecf-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0xd72ecf;const _0x4a80c0=auth[_0x2664de(0xa3)];if(!_0x4a80c0){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x5ce20f,_0x71bebe,_0xcd8dc2]=await Promise[_0x2664de(0x9d)]([checkForPendingMatchesInCollection(_0x4a80c0,'pendingMatches'),checkForPendingMatchesInCollection(_0x4a80c0,_0x2664de(0x9e)),checkForPendingMatchesInCollection(_0x4a80c0,'pendingMatchesD3')]),_0x21718b=_0x5ce20f||_0x71bebe||_0xcd8dc2;updateNotificationDot(_0x21718b),updateNotificationCache(_0x21718b);}catch(_0x4b578e){console['error']('Error\x20checking\x20pending\x20matches:',_0x4b578e);}}function a0_0x4058(_0x22817d,_0x2f79ac){const _0x285c94=a0_0x3dcd();return a0_0x4058=function(_0x2c2a79,_0x1da9c5){_0x2c2a79=_0x2c2a79-0x97;let _0x31ad2c=_0x285c94[_0x2c2a79];return _0x31ad2c;},a0_0x4058(_0x22817d,_0x2f79ac);}async function checkForPendingMatchesInCollection(_0x17c4d2,_0x1ae031){const _0x143f9a=a0_0x4058,_0x39aa34=_0x17c4d2[_0x143f9a(0xb1)],_0xcf53a=_0x17c4d2['email'],_0x478102=query(collection(db,_0x1ae031),where(_0x143f9a(0xc1),'==',_0x39aa34),where('approved','==',![])),_0x4b959d=await getDocs(_0x478102);if(!_0x4b959d['empty'])return!![];if(_0xcf53a){const _0x264e05=query(collection(db,_0x1ae031),where(_0x143f9a(0xb5),'==',_0xcf53a),where(_0x143f9a(0xac),'==',![])),_0x8a1629=await getDocs(_0x264e05);if(!_0x8a1629['empty'])return!![];}let _0x377bc3=await getUsernameFromAllSources(_0x17c4d2);if(_0x377bc3){const _0x4ae7cf=query(collection(db,_0x1ae031),where('winnerUsername','==',_0x377bc3),where('approved','==',![])),_0x4ebb04=await getDocs(_0x4ae7cf);if(!_0x4ebb04['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x3ea0af){const _0xa379ce=a0_0x4058,_0x6a79c1=localStorage[_0xa379ce(0xb7)]('currentUsername');if(_0x6a79c1)return _0x6a79c1;try{const [_0x40c55c,_0x548af8,_0x179a1f]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x3ea0af[_0xa379ce(0xb1)]))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x3ea0af['uid']))),getDocs(query(collection(db,'playersD3'),where(_0xa379ce(0xb0),'==',_0x3ea0af['uid'])))]);if(!_0x40c55c['empty']){const _0x237b14=_0x40c55c[_0xa379ce(0xad)][0x0]['data']()[_0xa379ce(0x9c)];return localStorage['setItem'](_0xa379ce(0xc0),_0x237b14),_0x237b14;}if(!_0x548af8[_0xa379ce(0xbe)]){const _0x5214ad=_0x548af8['docs'][0x0]['data']()[_0xa379ce(0x9c)];return localStorage['setItem']('currentUsername',_0x5214ad),_0x5214ad;}if(!_0x179a1f['empty']){const _0x325edb=_0x179a1f[_0xa379ce(0xad)][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x325edb),_0x325edb;}const _0x28a005=await getDoc(doc(db,'users',_0x3ea0af[_0xa379ce(0xb1)]));if(_0x28a005['exists']()&&_0x28a005['data']()['username']){const _0x3e69e5=_0x28a005['data']()['username'];return localStorage['setItem']('currentUsername',_0x3e69e5),_0x3e69e5;}}catch(_0x1fbeb2){console['error']('Error\x20fetching\x20username:',_0x1fbeb2);}if(_0x3ea0af[_0xa379ce(0xb2)])return _0x3ea0af[_0xa379ce(0xb2)][_0xa379ce(0x9a)]('@')[0x0];return null;}function updateNotificationCache(_0x4aa4de){const _0x141940=a0_0x4058,_0x599f63={'status':_0x4aa4de,'timestamp':Date[_0x141940(0x97)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x599f63));}function checkNotificationCache(){const _0x3f0b19=a0_0x4058,_0x17994e=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x17994e)return null;try{const {status:_0x90cdca,timestamp:_0x413c5e}=JSON['parse'](_0x17994e),_0x6ea46d=Date[_0x3f0b19(0x97)]();if(_0x6ea46d-_0x413c5e<CACHE_EXPIRY)return _0x90cdca;}catch(_0x5bb350){}return null;}export function updateNotificationDot(_0x11d8a4){const _0x3332f0=a0_0x4058,_0x21a28e=new MutationObserver((_0x39c945,_0x272fed)=>{const _0x1b3125=a0_0x4058,_0x3a218e=document[_0x1b3125(0xbc)](_0x1b3125(0x98));_0x3a218e&&(updateDotStyle(_0x3a218e,_0x11d8a4),_0x272fed['disconnect']());});_0x21a28e[_0x3332f0(0xb4)](document['body'],{'childList':!![],'subtree':!![]});const _0x153e42=document['getElementById'](_0x3332f0(0x98));_0x153e42&&(updateDotStyle(_0x153e42,_0x11d8a4),_0x21a28e[_0x3332f0(0xb6)]()),setTimeout(()=>_0x21a28e['disconnect'](),0x1388);}function a0_0x3dcd(){const _0x1daae3=['split','absolute','username','all','pendingMatchesD2','{}.constructor(\x22return\x20this\x22)(\x20)','4AotbiF','61730qGdHLF','position','currentUser','borderRadius','982005CnHLdf','return\x20(function()\x20','14124bjpvrN','8DTVkhq','2314998utIqCm','height','-5px','approved','docs','apply','649XvdZUW','userId','uid','email','13030524BSVjlD','observe','winnerEmail','disconnect','getItem','bind','addEventListener','style','1876feKcNy','getElementById','none','empty','10161zOSkRR','currentUsername','winnerId','76872WCftQb','10px','removeItem','now','report-match-notification','81uiJLjz'];a0_0x3dcd=function(){return _0x1daae3;};return a0_0x3dcd();}function updateDotStyle(_0x3ae30f,_0x2dc4cf){const _0x41c319=a0_0x4058;_0x2dc4cf?(_0x3ae30f[_0x41c319(0xba)]['display']='block',_0x3ae30f[_0x41c319(0xba)]['backgroundColor']='#ff3b30',_0x3ae30f['style']['width']='10px',_0x3ae30f[_0x41c319(0xba)][_0x41c319(0xaa)]=_0x41c319(0xc3),_0x3ae30f[_0x41c319(0xba)][_0x41c319(0xa2)]=_0x41c319(0x9b),_0x3ae30f['style']['top']=_0x41c319(0xab),_0x3ae30f['style']['right']='-8px',_0x3ae30f['style'][_0x41c319(0xa4)]='50%',_0x3ae30f['style']['border']='2px\x20solid\x20white',_0x3ae30f['style']['zIndex']='999'):_0x3ae30f[_0x41c319(0xba)]['display']=_0x41c319(0xbd);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a0_0x4b2708(0xb9)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x303ab8=a0_0x4058;localStorage[_0x303ab8(0xc4)](_0x303ab8(0xc0)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});