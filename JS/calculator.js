const a9_0xac5747=a9_0x20f1;(function(_0x33321a,_0x81dad7){const _0x4052f0=a9_0x20f1,_0x5a0353=_0x33321a();while(!![]){try{const _0x2961a2=parseInt(_0x4052f0(0xf1))/0x1+parseInt(_0x4052f0(0x164))/0x2+-parseInt(_0x4052f0(0x137))/0x3+parseInt(_0x4052f0(0x10f))/0x4*(parseInt(_0x4052f0(0x156))/0x5)+-parseInt(_0x4052f0(0x104))/0x6+parseInt(_0x4052f0(0x115))/0x7*(parseInt(_0x4052f0(0x14e))/0x8)+-parseInt(_0x4052f0(0x12d))/0x9*(parseInt(_0x4052f0(0x146))/0xa);if(_0x2961a2===_0x81dad7)break;else _0x5a0353['push'](_0x5a0353['shift']());}catch(_0x4c44b2){_0x5a0353['push'](_0x5a0353['shift']());}}}(a9_0x3be2,0x6e646));const a9_0x252f28=(function(){let _0x11ea38=!![];return function(_0xe0107e,_0x56830a){const _0x1e8260=_0x11ea38?function(){const _0x18e898=a9_0x20f1;if(_0x56830a){const _0x19076b=_0x56830a[_0x18e898(0x147)](_0xe0107e,arguments);return _0x56830a=null,_0x19076b;}}:function(){};return _0x11ea38=![],_0x1e8260;};}()),a9_0x388fbd=a9_0x252f28(this,function(){const _0x4afa55=a9_0x20f1;return a9_0x388fbd[_0x4afa55(0x160)]()['search']('(((.+)+)+)+$')[_0x4afa55(0x160)]()[_0x4afa55(0x133)](a9_0x388fbd)[_0x4afa55(0x157)]('(((.+)+)+)+$');});a9_0x388fbd();const a9_0x5aa8a5=(function(){let _0x612ce0=!![];return function(_0x10e2af,_0x21ff60){const _0x3f14b9=_0x612ce0?function(){const _0x3b3c71=a9_0x20f1;if(_0x21ff60){const _0x47d606=_0x21ff60[_0x3b3c71(0x147)](_0x10e2af,arguments);return _0x21ff60=null,_0x47d606;}}:function(){};return _0x612ce0=![],_0x3f14b9;};}()),a9_0x1468c4=a9_0x5aa8a5(this,function(){const _0x3d1ea9=a9_0x20f1,_0x4c28af=function(){const _0x32b4d3=a9_0x20f1;let _0xaf714d;try{_0xaf714d=Function(_0x32b4d3(0x116)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4bfb18){_0xaf714d=window;}return _0xaf714d;},_0x4b75e9=_0x4c28af(),_0x5f1eca=_0x4b75e9['console']=_0x4b75e9[_0x3d1ea9(0x114)]||{},_0x1a770b=[_0x3d1ea9(0x118),_0x3d1ea9(0x12c),_0x3d1ea9(0x10e),_0x3d1ea9(0x107),_0x3d1ea9(0x129),_0x3d1ea9(0x143),'trace'];for(let _0x2789d5=0x0;_0x2789d5<_0x1a770b[_0x3d1ea9(0x132)];_0x2789d5++){const _0x3bc81d=a9_0x5aa8a5[_0x3d1ea9(0x133)]['prototype'][_0x3d1ea9(0x134)](a9_0x5aa8a5),_0x3960c1=_0x1a770b[_0x2789d5],_0x3d4908=_0x5f1eca[_0x3960c1]||_0x3bc81d;_0x3bc81d['__proto__']=a9_0x5aa8a5[_0x3d1ea9(0x134)](a9_0x5aa8a5),_0x3bc81d['toString']=_0x3d4908[_0x3d1ea9(0x160)][_0x3d1ea9(0x134)](_0x3d4908),_0x5f1eca[_0x3960c1]=_0x3bc81d;}});a9_0x1468c4();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const _0x7b4390=a9_0x20f1;this[_0x7b4390(0x13f)]='D1',this[_0x7b4390(0x12b)]=new Map(),this[_0x7b4390(0x10d)]();}[a9_0xac5747(0x10d)](){const _0x3c49fd=a9_0xac5747;this[_0x3c49fd(0x11e)](),this['loadPlayers']();}[a9_0xac5747(0x11e)](){const _0xa806c8=a9_0xac5747;document['querySelectorAll'](_0xa806c8(0xec))[_0xa806c8(0x123)](_0x4aea31=>{_0x4aea31['addEventListener']('click',_0x5bcda5=>{const _0x33be4b=a9_0x20f1;document[_0x33be4b(0x13e)](_0x33be4b(0xec))[_0x33be4b(0x123)](_0x21d32d=>_0x21d32d[_0x33be4b(0x14c)][_0x33be4b(0x106)](_0x33be4b(0x11c))),_0x5bcda5[_0x33be4b(0x15b)][_0x33be4b(0x14c)]['add']('active'),this[_0x33be4b(0x13f)]=_0x5bcda5[_0x33be4b(0x15b)][_0x33be4b(0xf0)][_0x33be4b(0x10a)],this[_0x33be4b(0x130)]();});}),document[_0xa806c8(0x138)](_0xa806c8(0x15a))['addEventListener'](_0xa806c8(0xed),()=>{const _0x272380=_0xa806c8;this[_0x272380(0x130)]();}),document[_0xa806c8(0x138)](_0xa806c8(0x162))['addEventListener']('change',()=>this[_0xa806c8(0x13b)]()),document[_0xa806c8(0x138)](_0xa806c8(0x142))[_0xa806c8(0x135)]('change',()=>this[_0xa806c8(0x13b)]());}async[a9_0xac5747(0x130)](){const _0x11846e=a9_0xac5747;try{this[_0x11846e(0x15e)](_0x11846e(0x108));const _0xa0b4a2=this[_0x11846e(0x13f)]==='D1'?_0x11846e(0x12b):this[_0x11846e(0x13f)]==='D2'?_0x11846e(0x150):_0x11846e(0x109),_0x4a024f=collection(db,_0xa0b4a2),_0x993dcc=query(_0x4a024f,orderBy('eloRating',_0x11846e(0x136))),_0x3a1439=await getDocs(_0x993dcc);this[_0x11846e(0x12b)][_0x11846e(0x14a)](),_0x3a1439['forEach'](_0x34ae53=>{const _0x9771b6=_0x11846e,_0x4fca5c=_0x34ae53['data']();_0x4fca5c[_0x9771b6(0x13a)]&&this['players'][_0x9771b6(0xf9)](_0x4fca5c[_0x9771b6(0x13a)],{'id':_0x34ae53['id'],'username':_0x4fca5c[_0x9771b6(0x13a)],'elo':parseInt(_0x4fca5c[_0x9771b6(0xfc)])||0x4b0,'position':_0x4fca5c[_0x9771b6(0x12e)]||0x3e7});}),this[_0x11846e(0x15e)](),console['log'](_0x11846e(0x154)+this[_0x11846e(0x12b)][_0x11846e(0x144)]+_0x11846e(0xf8)+this[_0x11846e(0x13f)]+_0x11846e(0x15f));}catch(_0x591123){console['error'](_0x11846e(0xfb),_0x591123),this['updateDropdowns']('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}['updateDropdowns'](_0x17e5c1=null){const _0x4fa398=a9_0xac5747,_0xafa677=document[_0x4fa398(0x138)](_0x4fa398(0x162)),_0x152026=document['getElementById'](_0x4fa398(0x142));if(_0x17e5c1){_0xafa677['innerHTML']=_0x17e5c1,_0x152026[_0x4fa398(0x161)]=_0x17e5c1;return;}let _0x5bc3c2=_0x4fa398(0x120);const _0x449d78=Array[_0x4fa398(0xff)](this['players'][_0x4fa398(0x126)]())[_0x4fa398(0x151)]((_0x49a809,_0x188be4)=>_0x188be4[_0x4fa398(0x10b)]-_0x49a809[_0x4fa398(0x10b)]);_0x449d78[_0x4fa398(0x123)](_0x218478=>{const _0x4bb718=_0x4fa398,_0x47f60c=this[_0x4bb718(0x152)](_0x218478[_0x4bb718(0x10b)]);_0x5bc3c2+=_0x4bb718(0x125)+_0x218478[_0x4bb718(0x13a)]+_0x4bb718(0x11d)+_0x218478['elo']+_0x4bb718(0x112)+_0x47f60c+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x218478[_0x4bb718(0x13a)]+'\x20('+_0x218478['elo']+'\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>';}),_0xafa677[_0x4fa398(0x161)]=_0x5bc3c2,_0x152026[_0x4fa398(0x161)]=_0x5bc3c2;}['calculateMatch'](){const _0x4c9504=a9_0xac5747,_0x4b1bfc=document[_0x4c9504(0x138)]('winner-select'),_0x44cd7e=document['getElementById'](_0x4c9504(0x142)),_0x37530c=_0x4b1bfc[_0x4c9504(0xf4)],_0x1bb27f=_0x44cd7e[_0x4c9504(0xf4)];if(!_0x37530c||!_0x1bb27f){document[_0x4c9504(0x138)](_0x4c9504(0x149))[_0x4c9504(0x102)][_0x4c9504(0x15c)]='none',document[_0x4c9504(0x138)](_0x4c9504(0xeb))['style'][_0x4c9504(0x15c)]=_0x4c9504(0x124);return;}if(_0x37530c===_0x1bb27f){alert(_0x4c9504(0x10c));return;}const _0x141d31=this[_0x4c9504(0x12b)][_0x4c9504(0x121)](_0x37530c),_0x524697=this[_0x4c9504(0x12b)]['get'](_0x1bb27f);if(!_0x141d31||!_0x524697){console[_0x4c9504(0x107)]('Player\x20not\x20found');return;}const _0x17c2e1=this[_0x4c9504(0x165)](_0x141d31[_0x4c9504(0x10b)],_0x524697['elo']);this[_0x4c9504(0x11a)](_0x141d31,_0x524697,_0x17c2e1),this['displayCalculationDetails'](_0x141d31,_0x524697,_0x17c2e1);}[a9_0xac5747(0x165)](_0x11a6d7,_0x553271,_0x5da509=0x20){const _0x42bc4c=a9_0xac5747,_0xab349a=0x1/(0x1+Math[_0x42bc4c(0x158)](0xa,(_0x553271-_0x11a6d7)/0x190)),_0x4de64b=0x1/(0x1+Math[_0x42bc4c(0x158)](0xa,(_0x11a6d7-_0x553271)/0x190)),_0x2fbabe=_0x11a6d7+_0x5da509*(0x1-_0xab349a),_0x1ad643=_0x553271+_0x5da509*(0x0-_0x4de64b);return{'winnerChange':Math[_0x42bc4c(0x153)](_0x2fbabe-_0x11a6d7),'loserChange':Math[_0x42bc4c(0x153)](_0x1ad643-_0x553271),'newWinnerRating':Math['round'](_0x2fbabe),'newLoserRating':Math[_0x42bc4c(0x153)](_0x1ad643),'expectedScoreWinner':_0xab349a,'expectedScoreLoser':_0x4de64b};}[a9_0xac5747(0x11a)](_0x3b490a,_0x53dfba,_0x20a776){const _0xcc0613=a9_0xac5747;document[_0xcc0613(0x138)](_0xcc0613(0x139))[_0xcc0613(0x117)]=_0x3b490a[_0xcc0613(0x13a)],document[_0xcc0613(0x138)](_0xcc0613(0xf5))['textContent']=_0xcc0613(0x11f)+_0x3b490a['elo'],document[_0xcc0613(0x138)](_0xcc0613(0x163))[_0xcc0613(0x117)]='+'+_0x20a776['winnerChange'],document['getElementById'](_0xcc0613(0x128))[_0xcc0613(0x117)]=_0xcc0613(0x113)+_0x20a776[_0xcc0613(0x14f)],document['getElementById'](_0xcc0613(0x13d))[_0xcc0613(0x117)]=_0x53dfba['username'],document['getElementById'](_0xcc0613(0x12f))[_0xcc0613(0x117)]='Current\x20ELO:\x20'+_0x53dfba[_0xcc0613(0x10b)],document[_0xcc0613(0x138)](_0xcc0613(0x127))[_0xcc0613(0x117)]=''+_0x20a776[_0xcc0613(0x14d)],document[_0xcc0613(0x138)](_0xcc0613(0xf6))[_0xcc0613(0x117)]=_0xcc0613(0x113)+_0x20a776[_0xcc0613(0x13c)];const _0x46bc03=this[_0xcc0613(0x12a)](_0x3b490a['elo']),_0x70d8d1=this[_0xcc0613(0x12a)](_0x53dfba[_0xcc0613(0x10b)]);document[_0xcc0613(0x138)](_0xcc0613(0x139))['style'][_0xcc0613(0x111)]=_0x46bc03,document['getElementById'](_0xcc0613(0x13d))[_0xcc0613(0x102)]['color']=_0x70d8d1,document[_0xcc0613(0x138)]('match-result')[_0xcc0613(0x102)][_0xcc0613(0x15c)]=_0xcc0613(0x105);}[a9_0xac5747(0xee)](_0x2e11a3,_0x5426c8,_0x16ee61){const _0x45dd61=a9_0xac5747,_0x30048a='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+_0x2e11a3['username']+':\x20'+_0x2e11a3[_0x45dd61(0x10b)]+_0x45dd61(0x141)+_0x5426c8[_0x45dd61(0x13a)]+':\x20'+_0x5426c8[_0x45dd61(0x10b)]+_0x45dd61(0x145)+_0x2e11a3[_0x45dd61(0x13a)]+':\x20'+_0x16ee61[_0x45dd61(0x14b)][_0x45dd61(0x159)](0x3)+'\x20('+(_0x16ee61[_0x45dd61(0x14b)]*0x64)['toFixed'](0x1)+'%\x20chance\x20to\x20win)\x0a\x20\x20'+_0x5426c8[_0x45dd61(0x13a)]+':\x20'+_0x16ee61[_0x45dd61(0xf3)][_0x45dd61(0x159)](0x3)+'\x20('+(_0x16ee61[_0x45dd61(0xf3)]*0x64)['toFixed'](0x1)+_0x45dd61(0x148)+_0x2e11a3[_0x45dd61(0x13a)]+':\x20'+_0x2e11a3[_0x45dd61(0x10b)]+_0x45dd61(0x11b)+_0x16ee61[_0x45dd61(0xf7)]+_0x45dd61(0xef)+_0x16ee61[_0x45dd61(0x14f)]+_0x45dd61(0x141)+_0x5426c8[_0x45dd61(0x13a)]+':\x20'+_0x5426c8[_0x45dd61(0x10b)]+_0x45dd61(0x11b)+_0x16ee61[_0x45dd61(0x14d)]+_0x45dd61(0xef)+_0x16ee61[_0x45dd61(0x13c)]+'\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a'+(_0x16ee61['winnerChange']>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(_0x16ee61[_0x45dd61(0xf7)]<0x5?_0x45dd61(0x103):'')+_0x45dd61(0xfe);document[_0x45dd61(0x138)](_0x45dd61(0xf2))[_0x45dd61(0x117)]=_0x30048a,document['getElementById']('calculation-details')[_0x45dd61(0x102)][_0x45dd61(0x15c)]=_0x45dd61(0x110);}['getELOColor'](_0xdd028){const _0x405eb6=a9_0xac5747;if(_0xdd028>=0x7d0)return _0x405eb6(0x119);else{if(_0xdd028>=0x708)return'#FFD700';else{if(_0xdd028>=0x640)return _0x405eb6(0xfd);else{if(_0xdd028>=0x578)return _0x405eb6(0x15d);else return _0x405eb6(0xfa);}}}}[a9_0xac5747(0x152)](_0x11ea45){const _0x5bcbe4=a9_0xac5747;if(_0x11ea45>=0x7d0)return _0x5bcbe4(0x131);else{if(_0x11ea45>=0x708)return _0x5bcbe4(0x101);else{if(_0x11ea45>=0x640)return'silver';else{if(_0x11ea45>=0x578)return _0x5bcbe4(0x100);else return _0x5bcbe4(0x155);}}}}}function a9_0x3be2(){const _0x15a8ef=['updateDropdowns','\x20ladder','toString','innerHTML','winner-select','winner-elo-change','1239292oyOpXG','calculateELO','calculation-details','.ladder-btn','click','displayCalculationDetails','\x20=\x20','dataset','18049OdgZhz','calculation-text','expectedScoreLoser','value','winner-current-elo','loser-new-elo','winnerChange','\x20players\x20from\x20','set','#808080','Error\x20loading\x20players:','eloRating','#C0C0C0','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','from','bronze','gold','style','Low\x20ELO\x20gain.','3205446luxfsh','grid','remove','error','<option\x20value=\x22\x22>Loading\x20players...</option>','playersD3','ladder','elo','Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser','init','info','148HZrmBs','block','color','\x22\x20class=\x22','New\x20ELO:\x20','console','41447ygcmiD','return\x20(function()\x20','textContent','log','#50C878','displayMatchResult','\x20+\x20','active','\x22\x20data-elo=\x22','setupEventListeners','Current\x20ELO:\x20','<option\x20value=\x22\x22>Select\x20a\x20player...</option>','get','sandbox','forEach','none','<option\x20value=\x22','values','loser-elo-change','winner-new-elo','exception','getELOColor','players','warn','4993911BSWeXw','position','loser-current-elo','loadPlayers','emerald','length','constructor','bind','addEventListener','desc','524898jYikmQ','getElementById','winner-name','username','calculateMatch','newLoserRating','loser-name','querySelectorAll','currentLadder','DOMContentLoaded','\x0a\x20\x20','loser-select','table','size','\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20','20jnoGkt','apply','%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20','match-result','clear','expectedScoreWinner','classList','loserChange','1160sYJxEZ','newWinnerRating','playersD2','sort','getELORankClass','round','Loaded\x20','unranked','104715tOUABb','search','pow','toFixed','refresh-players','target','display','#CD7F32'];a9_0x3be2=function(){return _0x15a8ef;};return a9_0x3be2();}function a9_0x20f1(_0x243359,_0x38823f){const _0x3c9658=a9_0x3be2();return a9_0x20f1=function(_0x1468c4,_0x5aa8a5){_0x1468c4=_0x1468c4-0xeb;let _0x559d51=_0x3c9658[_0x1468c4];return _0x559d51;},a9_0x20f1(_0x243359,_0x38823f);}document[a9_0xac5747(0x135)](a9_0xac5747(0x140),()=>{const _0x3cc0ab=a9_0xac5747;document['getElementById'](_0x3cc0ab(0x122))&&new ELOCalculator();});