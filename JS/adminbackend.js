const a4_0x1edc9a=a4_0x2464,a4_0x404b8=(function(){let _0x28f0c5=!![];return function(_0x3cd70b,_0x211b87){const _0x4b277b=_0x28f0c5?function(){if(_0x211b87){const _0xc8b85e=_0x211b87['apply'](_0x3cd70b,arguments);return _0x211b87=null,_0xc8b85e;}}:function(){};return _0x28f0c5=![],_0x4b277b;};}()),a4_0x24da8e=a4_0x404b8(this,function(){const _0xdce8ae=a4_0x2464,_0x21b152=function(){const _0x330409=a4_0x2464;let _0x5f91f3;try{_0x5f91f3=Function('return\x20(function()\x20'+_0x330409(0x1e9)+');')();}catch(_0x250d81){_0x5f91f3=window;}return _0x5f91f3;},_0xc06eee=_0x21b152(),_0x511a47=_0xc06eee['console']=_0xc06eee['console']||{},_0x3abea7=[_0xdce8ae(0x35f),'warn',_0xdce8ae(0x2b0),'error','exception','table',_0xdce8ae(0x165)];for(let _0x59626b=0x0;_0x59626b<_0x3abea7['length'];_0x59626b++){const _0x5850c2=a4_0x404b8['constructor'][_0xdce8ae(0x227)][_0xdce8ae(0x358)](a4_0x404b8),_0x376ff2=_0x3abea7[_0x59626b],_0x315a47=_0x511a47[_0x376ff2]||_0x5850c2;_0x5850c2['__proto__']=a4_0x404b8['bind'](a4_0x404b8),_0x5850c2[_0xdce8ae(0x2f3)]=_0x315a47['toString'][_0xdce8ae(0x358)](_0x315a47),_0x511a47[_0x376ff2]=_0x5850c2;}});a4_0x24da8e();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x22772c){const _0x1b2430=a4_0x2464;if(!_0x22772c)return _0x1b2430(0x21e);_0x22772c=_0x22772c['replace']('#','');_0x22772c[_0x1b2430(0x309)]===0x3&&(_0x22772c=_0x22772c[_0x1b2430(0x13f)]('')['map'](_0x4fb2be=>_0x4fb2be+_0x4fb2be)['join'](''));if(_0x22772c['length']!==0x6)return'#ffffff';const _0x6f1ca2=parseInt(_0x22772c['substring'](0x0,0x2),0x10),_0x3b42b=parseInt(_0x22772c['substring'](0x2,0x4),0x10),_0x18b132=parseInt(_0x22772c[_0x1b2430(0x12b)](0x4,0x6),0x10),_0x54da3b=(_0x6f1ca2*0x12b+_0x3b42b*0x24b+_0x18b132*0x72)/0x3e8;return _0x54da3b>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a4_0x1edc9a(0x16b)]('DOMContentLoaded',()=>{const _0x2d7698=a4_0x1edc9a;auth[_0x2d7698(0x230)](async _0x377b54=>{const _0xbb286c=_0x2d7698;if(!_0x377b54){window[_0xbb286c(0x2f5)]['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x1b9492){console['error']('Error\x20initializing\x20dashboard:',_0x1b9492),showNotification(_0xbb286c(0x134),_0xbb286c(0x297));}});});async function getUserTabPermissions(_0x11a243){const _0x5480d1=a4_0x1edc9a;if(!_0x11a243)return[_0x5480d1(0x26b)];console['log'](_0x5480d1(0x344)+_0x11a243+_0x5480d1(0x337));const _0x26fb4d=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x67aad6=auth['currentUser'];let _0x2185a4=null,_0x23cbf2=null;for(const _0x4b400a of _0x26fb4d){try{if(_0x67aad6){const _0xf3fc8b=doc(db,_0x4b400a['name'],_0x67aad6[_0x5480d1(0x1b8)]),_0x40a5b1=await getDoc(_0xf3fc8b);if(_0x40a5b1['exists']()){const _0x219a72=_0x40a5b1[_0x5480d1(0x2ab)]();console['log']('Found\x20user\x20in\x20'+_0x4b400a['displayName']+'\x20by\x20UID:',_0x219a72);const _0x2229b6=(_0x219a72['roleName']||_0x219a72['role']||'')['toLowerCase']();if(_0x2229b6&&_0x2229b6!=='none'){_0x2185a4=_0x2229b6,_0x23cbf2=_0x4b400a['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x2185a4+'\x20in\x20'+_0x23cbf2);break;}}}if(!_0x2185a4){const _0x4df110=collection(db,_0x4b400a[_0x5480d1(0x2ad)]),_0x3939bc=query(_0x4df110,where('email','==',_0x11a243)),_0x2570cd=await getDocs(_0x3939bc);if(!_0x2570cd['empty']){const _0x30591e=_0x2570cd['docs'][0x0]['data']();console['log'](_0x5480d1(0x3a1)+_0x4b400a['displayName']+_0x5480d1(0x276)+_0x11a243+':',_0x30591e);const _0x1203e7=(_0x30591e['roleName']||_0x30591e[_0x5480d1(0x2d3)]||'')['toLowerCase']();if(_0x1203e7&&_0x1203e7!==_0x5480d1(0x1e0)){_0x2185a4=_0x1203e7,_0x23cbf2=_0x4b400a['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x2185a4+'\x20in\x20'+_0x23cbf2);break;}}}}catch(_0x2415c7){console['error']('Error\x20checking\x20'+_0x4b400a[_0x5480d1(0x2a8)]+':',_0x2415c7);}}if(_0x2185a4){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x2185a4+'\x20(from\x20'+_0x23cbf2+')');const _0x2924de={'admin':['dashboard',_0x5480d1(0x346),'manage-matches','manage-articles','manage-trophies',_0x5480d1(0x137),'inactive-players','settings','manage-trophies',_0x5480d1(0x360),_0x5480d1(0x1e6),'user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'owner':[_0x5480d1(0x26b),'manage-players',_0x5480d1(0x26a),_0x5480d1(0x350),_0x5480d1(0x28a),'manage-ranks',_0x5480d1(0x226),'settings','manage-trophies','elo-history',_0x5480d1(0x1e6),'user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'council':['dashboard','manage-players',_0x5480d1(0x26a)],'creative\x20lead':[_0x5480d1(0x26b),'manage-articles','manage-trophies',_0x5480d1(0x360),_0x5480d1(0x1e6)]};if(_0x2924de[_0x2185a4])return console['log']('Role\x20\x27'+_0x2185a4+_0x5480d1(0x245),_0x2924de[_0x2185a4]),_0x2924de[_0x2185a4];}return console['log'](_0x5480d1(0x24e)+_0x11a243+',\x20giving\x20default\x20access'),[_0x5480d1(0x26b)];}function setupSidebarNavigation(_0x7113cc=[]){const _0x446ce2=a4_0x1edc9a,_0x2388d8=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x258ce0=document['querySelectorAll']('.admin-section');(!_0x7113cc||_0x7113cc['length']===0x0)&&(_0x7113cc=['dashboard']);_0x2388d8[_0x446ce2(0x304)](_0xe6a5c8=>{const _0x33cd85=_0x446ce2,_0x4508e7=_0xe6a5c8['getAttribute']('data-section');_0x7113cc['includes'](_0x4508e7)?_0xe6a5c8['style'][_0x33cd85(0x18f)]='flex':_0xe6a5c8['style'][_0x33cd85(0x18f)]='none',_0xe6a5c8['addEventListener'](_0x33cd85(0x1f0),()=>{const _0x5d1065=_0x33cd85,_0x4aab56=_0xe6a5c8[_0x5d1065(0x31d)](_0x5d1065(0x1d3));if(!_0x7113cc[_0x5d1065(0x2a7)](_0x4aab56)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x2388d8[_0x5d1065(0x304)](_0x37fe05=>_0x37fe05[_0x5d1065(0x1ad)]['remove']('active')),_0xe6a5c8['classList'][_0x5d1065(0x143)]('active'),_0x258ce0[_0x5d1065(0x304)](_0xc5b63=>{const _0x1a4709=_0x5d1065;_0xc5b63['style'][_0x1a4709(0x18f)]='none';});const _0x52eac8=document['getElementById'](_0x4aab56);_0x52eac8&&(_0x52eac8[_0x5d1065(0x13e)][_0x5d1065(0x18f)]='block',console['log']('Switched\x20to\x20'+_0x4aab56+'\x20section'));});});const _0x3d0c51=document['querySelector'](_0x446ce2(0x208)+_0x7113cc[0x0]+'\x22]');_0x3d0c51&&_0x3d0c51[_0x446ce2(0x1f0)](),console['log'](_0x446ce2(0x343));}function setupTabNavigation(){const _0x3c0508=document['querySelectorAll']('.nav-item');let _0x4efd56=null,_0x538705=new Set();_0x3c0508['forEach'](_0x43cf0b=>{const _0x4d9326=a4_0x2464;_0x43cf0b[_0x4d9326(0x16b)](_0x4d9326(0x1f0),function(){const _0x3cf474=_0x4d9326,_0x204a92=this['getAttribute']('data-section');if(_0x204a92===_0x4efd56)return;_0x4efd56&&(document[_0x3cf474(0x30f)](_0x4efd56)['style']['display']=_0x3cf474(0x1e0),_0x3c0508[_0x3cf474(0x304)](_0x5d17df=>_0x5d17df['classList']['remove']('active'))),document['getElementById'](_0x204a92)['style'][_0x3cf474(0x18f)]=_0x3cf474(0x140),this['classList']['add']('active'),_0x4efd56=_0x204a92;});});}function loadSectionData(_0x20f3ce){return;}async function initializeAdminDashboard(){const _0x51086d=a4_0x1edc9a;try{const _0x416921=auth['currentUser'],_0x205de8=await getUserTabPermissions(_0x416921['email']);console[_0x51086d(0x35f)]('User\x20'+_0x416921['email']+_0x51086d(0x1cf),_0x205de8),window['userAllowedTabs']=_0x205de8,setupSidebarNavigation(_0x205de8),setupLadderSelector(),setupDashboardSection(),_0x205de8['includes'](_0x51086d(0x346))&&setupManagePlayersSection(),_0x205de8['includes'](_0x51086d(0x360))&&setupEloHistorySection(),_0x205de8['includes']('manage-ranks')&&setupRankControls(),_0x205de8['includes']('manage-articles')&&setupManageArticlesSection(),_0x205de8['includes'](_0x51086d(0x399))&&setupUserRolesSection(),_0x205de8[_0x51086d(0x2a7)](_0x51086d(0x28a))&&setupTrophyManagementSection(),_0x205de8['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x205de8['includes']('inactive-players')&&setupInactivePlayersSection(),_0x205de8[_0x51086d(0x2a7)]('manage-matches')&&setupManageMatchesSection(),_0x205de8['includes'](_0x51086d(0x170))&&setupManagePointsSection(),_0x205de8['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x205de8);}catch(_0x537f3d){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x537f3d);}}function setupDataLoadButtons(_0x1eca81=[]){const _0x2f1230=a4_0x1edc9a;(!_0x1eca81||_0x1eca81['length']===0x0)&&(_0x1eca81=[_0x2f1230(0x26b)]);const _0x1c657b=document['getElementById']('load-dashboard-data');_0x1c657b&&_0x1c657b['addEventListener'](_0x2f1230(0x1f0),function(){const _0x2d07e1=_0x2f1230;this['classList']['add'](_0x2d07e1(0x38e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0x25534b=_0x2d07e1;this[_0x25534b(0x1ad)]['remove']('loading'),this[_0x25534b(0x2c9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x1e7eca=>{const _0x4a13e7=_0x2d07e1;console['error']('Error\x20loading\x20dashboard:',_0x1e7eca),this['classList'][_0x4a13e7(0x398)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x1eca81[_0x2f1230(0x2a7)]('manage-trophies')){const _0x421227=document[_0x2f1230(0x30f)](_0x2f1230(0x25d));_0x421227&&_0x421227['addEventListener'](_0x2f1230(0x1f0),function(){const _0xbeba08=_0x2f1230;console[_0xbeba08(0x35f)]('Load\x20trophies\x20data\x20clicked'),this[_0xbeba08(0x1ad)]['add']('loading'),this[_0xbeba08(0x2c9)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x1d4076=_0xbeba08;this['classList']['remove']('loading'),this['innerHTML']=_0x1d4076(0x2ca);})['catch'](_0x419bf9=>{const _0x455936=_0xbeba08;console[_0x455936(0x297)](_0x455936(0x33f),_0x419bf9),this['classList']['remove']('loading'),this['innerHTML']=_0x455936(0x1c0),setTimeout(()=>{const _0x456ca5=_0x455936;this[_0x456ca5(0x2c9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x1eca81['includes']('manage-players')){const _0x32f0e2=document[_0x2f1230(0x30f)](_0x2f1230(0x25b));_0x32f0e2&&_0x32f0e2['addEventListener']('click',function(){const _0x4cc086=_0x2f1230;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x4cc086(0x2c9)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x3b7e0d=_0x4cc086;this[_0x3b7e0d(0x1ad)][_0x3b7e0d(0x398)]('loading'),this[_0x3b7e0d(0x2c9)]=_0x3b7e0d(0x387);})['catch'](_0x2bcd85=>{const _0x2f0be5=_0x4cc086;console['error']('Error\x20loading\x20players:',_0x2bcd85),this['classList'][_0x2f0be5(0x398)]('loading'),this[_0x2f0be5(0x2c9)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x52fda0=_0x2f0be5;this[_0x52fda0(0x2c9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x1eca81['includes']('elo-history')){const _0x700668=document['getElementById']('load-elo-history-data');_0x700668&&_0x700668['addEventListener'](_0x2f1230(0x1f0),function(){const _0x501ae5=_0x2f1230;console['log']('Load\x20history\x20data\x20clicked'),this[_0x501ae5(0x1ad)]['add']('loading'),this[_0x501ae5(0x2c9)]=_0x501ae5(0x339),loadEloHistory(0x1)['then'](()=>{const _0x372be1=_0x501ae5;this['classList'][_0x372be1(0x398)](_0x372be1(0x38e)),this[_0x372be1(0x2c9)]=_0x372be1(0x278);})[_0x501ae5(0x1b5)](_0x14e8e8=>{const _0x20380b=_0x501ae5;console['error']('Error\x20loading\x20history:',_0x14e8e8),this['classList']['remove'](_0x20380b(0x38e)),this[_0x20380b(0x2c9)]=_0x20380b(0x1c0),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x1eca81['includes']('manage-articles')){const _0x76643=document['getElementById'](_0x2f1230(0x349));_0x76643&&_0x76643[_0x2f1230(0x16b)](_0x2f1230(0x1f0),function(){const _0x22b895=_0x2f1230;console['log']('Load\x20articles\x20data\x20clicked'),this['classList'][_0x22b895(0x143)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x3a53ba=_0x22b895;this['classList'][_0x3a53ba(0x398)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x3bcb12=>{const _0x1deade=_0x22b895;console['error']('Error\x20loading\x20articles:',_0x3bcb12),this[_0x1deade(0x1ad)]['remove']('loading'),this['innerHTML']=_0x1deade(0x1c0),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x1eca81[_0x2f1230(0x2a7)](_0x2f1230(0x399))){const _0x692257=document['getElementById']('load-users-data');_0x692257&&_0x692257['addEventListener']('click',function(){const _0xcf94ec=_0x2f1230;console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add'](_0xcf94ec(0x38e)),this['innerHTML']=_0xcf94ec(0x339),loadUsersWithRoles()['then'](()=>{const _0x5ee28=_0xcf94ec;this[_0x5ee28(0x1ad)][_0x5ee28(0x398)]('loading'),this[_0x5ee28(0x2c9)]=_0x5ee28(0x186);})[_0xcf94ec(0x1b5)](_0x4c3290=>{const _0x37c600=_0xcf94ec;console[_0x37c600(0x297)](_0x37c600(0x1bb),_0x4c3290),this['classList']['remove'](_0x37c600(0x38e)),this['innerHTML']=_0x37c600(0x1c0),setTimeout(()=>{const _0x14fa31=_0x37c600;this[_0x14fa31(0x2c9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x1eca81[_0x2f1230(0x2a7)]('inactive-players')){const _0x41ad5f=document['getElementById'](_0x2f1230(0x138));_0x41ad5f&&_0x41ad5f['addEventListener']('click',function(){const _0xbbd6fe=_0x2f1230;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this[_0xbbd6fe(0x1ad)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()[_0xbbd6fe(0x1b3)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x4f7493=>{const _0x209c8c=_0xbbd6fe;console['error']('Error\x20loading\x20inactive\x20players:',_0x4f7493),this['classList']['remove'](_0x209c8c(0x38e)),this[_0x209c8c(0x2c9)]=_0x209c8c(0x1c0),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x1eca81[_0x2f1230(0x2a7)](_0x2f1230(0x1e6))){const _0x52e5a5=document['getElementById'](_0x2f1230(0x1bf));_0x52e5a5&&_0x52e5a5['addEventListener'](_0x2f1230(0x1f0),function(){const _0x41998a=_0x2f1230;console['log']('Load\x20highlights\x20data\x20clicked'),this[_0x41998a(0x1ad)][_0x41998a(0x143)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x5ce40b=_0x41998a;this['classList'][_0x5ce40b(0x398)]('loading'),this[_0x5ce40b(0x2c9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x1e9609=>{console['error']('Error\x20loading\x20highlights:',_0x1e9609),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x58aa5c=a4_0x2464;this[_0x58aa5c(0x2c9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x1eca81['includes'](_0x2f1230(0x26a))){const _0x558ba9=document['getElementById']('load-matches-data');_0x558ba9&&_0x558ba9['addEventListener']('click',function(){const _0x35e053=_0x2f1230;console[_0x35e053(0x35f)]('Load\x20matches\x20data\x20clicked'),this['classList'][_0x35e053(0x143)]('loading'),this[_0x35e053(0x2c9)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x432a45=_0x35e053;this[_0x432a45(0x1ad)][_0x432a45(0x398)](_0x432a45(0x38e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x1c6e4a=>{const _0x48e892=_0x35e053;console['error']('Error\x20loading\x20matches:',_0x1c6e4a),this['classList']['remove'](_0x48e892(0x38e)),this['innerHTML']=_0x48e892(0x1c0),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x1eca81['includes']('manage-ribbons')){const _0x18fd18=document['getElementById']('load-ribbons-data');_0x18fd18&&_0x18fd18['addEventListener']('click',function(){const _0xe4ebe2=_0x2f1230;console['log'](_0xe4ebe2(0x275)),this['classList']['add'](_0xe4ebe2(0x38e)),this['innerHTML']=_0xe4ebe2(0x339),loadRibbonsData()['then'](()=>{const _0x3f71fe=_0xe4ebe2;this['classList']['remove']('loading'),this['innerHTML']=_0x3f71fe(0x21f);})['catch'](_0x57a047=>{const _0xc26ba9=_0xe4ebe2;console['error']('Error\x20loading\x20ribbons:',_0x57a047),this[_0xc26ba9(0x1ad)][_0xc26ba9(0x398)](_0xc26ba9(0x38e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console[_0x2f1230(0x35f)]('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x49ec0f=a4_0x1edc9a;document['getElementById']('player-count')[_0x49ec0f(0x261)]='-',document['getElementById']('match-count')[_0x49ec0f(0x261)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById'](_0x49ec0f(0x331))[_0x49ec0f(0x261)]='-';}function setupLadderSelector(){const _0x4aff7b=a4_0x1edc9a,_0x460559=document[_0x4aff7b(0x254)](_0x4aff7b(0x2b9));_0x460559[_0x4aff7b(0x304)](_0xb7d66e=>{_0xb7d66e['addEventListener']('change',()=>{const _0x5aa7d8=a4_0x2464;currentLadder=_0xb7d66e['value'],document['body'][_0x5aa7d8(0x222)](_0x5aa7d8(0x259),currentLadder);const _0x2346ee=document['getElementById']('current-ladder-display');_0x2346ee&&(_0x2346ee[_0x5aa7d8(0x261)]=currentLadder),document['getElementById'](_0x5aa7d8(0x18c))['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x5aa7d8(0x223))['textContent']='-',document[_0x5aa7d8(0x30f)]('rejected-count')[_0x5aa7d8(0x261)]='-',charts['rankDistribution']&&(charts[_0x5aa7d8(0x1c5)]['destroy'](),charts[_0x5aa7d8(0x1c5)]=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+_0x5aa7d8(0x382),'info');});});const _0x303884=document['getElementById']('current-ladder-display');_0x303884&&(_0x303884['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x2002bb=a4_0x1edc9a;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document['getElementById'](_0x2002bb(0x18c))[_0x2002bb(0x261)]='-',document['getElementById']('match-count')[_0x2002bb(0x261)]='-',document[_0x2002bb(0x30f)]('pending-count')['textContent']='-',document[_0x2002bb(0x30f)]('rejected-count')['textContent']='-';const _0x1ccaf9=currentLadder==='D1'?_0x2002bb(0x160):currentLadder==='D2'?'playersD2':_0x2002bb(0x37e),_0x99b8c=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x2002bb(0x268):'approvedMatchesD3',_0x1226c6=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x375e54=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0x2002bb(0x197):'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x1ccaf9+',\x20'+_0x99b8c);const _0x43a259=await getDocs(collection(db,_0x1ccaf9)),_0x950191=_0x43a259['size'],_0x551a5a=await getDocs(collection(db,_0x99b8c)),_0x30fc1b=_0x551a5a['size'],_0x54355e=await getDocs(collection(db,_0x1226c6)),_0x190049=_0x54355e['size'],_0x4a582b=await getDocs(collection(db,_0x375e54)),_0x4e5dd4=_0x4a582b['size'];return document[_0x2002bb(0x30f)]('player-count')['textContent']=_0x950191,document['getElementById']('match-count')['textContent']=_0x30fc1b,document[_0x2002bb(0x30f)](_0x2002bb(0x223))['textContent']=_0x190049,document['getElementById']('rejected-count')[_0x2002bb(0x261)]=_0x4e5dd4,await createRankDistributionChart(),await createActivityChart(),console['log'](_0x2002bb(0x184)),!![];}catch(_0x3db6e4){console['error']('Error\x20loading\x20dashboard\x20data:',_0x3db6e4);throw _0x3db6e4;}}async function createRankDistributionChart(){const _0x3a6367=a4_0x1edc9a;try{const _0x15f531=collection(db,currentLadder==='D1'?_0x3a6367(0x160):'playersD2'),_0x4a29ee=await getDocs(_0x15f531),_0x2fc773={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x4a29ee['forEach'](_0x48ee69=>{const _0x12aef3=_0x3a6367,_0x412a88=_0x48ee69['data'](),_0x18bc64=_0x412a88['eloRating']||0x4b0;if(_0x18bc64>=0x7d0)_0x2fc773['Emerald']++;else{if(_0x18bc64>=0x708)_0x2fc773['Gold']++;else{if(_0x18bc64>=0x640)_0x2fc773[_0x12aef3(0x1a4)]++;else{if(_0x18bc64>=0x578)_0x2fc773['Bronze']++;else _0x2fc773['Unranked']++;}}}});const _0x196c11=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution'][_0x3a6367(0x157)](),charts['rankDistribution']=new Chart(_0x196c11,{'type':'doughnut','data':{'labels':Object['keys'](_0x2fc773),'datasets':[{'data':Object['values'](_0x2fc773),'backgroundColor':['#808080','#CD7F32','#C0C0C0','#FFD700',_0x3a6367(0x1c8)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x3a6367(0x2f1)}},'title':{'display':!![],'text':currentLadder+_0x3a6367(0x1e7),'color':_0x3a6367(0x2f1),'font':{'size':0x10}}}}});}catch(_0x5a4b36){console[_0x3a6367(0x297)](_0x3a6367(0x1dc),_0x5a4b36),document['getElementById']('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x404bcc=a4_0x1edc9a;try{const _0x220040=currentLadder==='D1'?'approvedMatches':_0x404bcc(0x268),_0x5a7d4e=collection(db,_0x220040),_0x44fde3=new Date();_0x44fde3[_0x404bcc(0x218)](_0x44fde3[_0x404bcc(0x315)]()-0x7);const _0x3ac88e=query(_0x5a7d4e,where('approvedAt','>=',_0x44fde3),orderBy('approvedAt','asc')),_0x2256b6=await getDocs(_0x3ac88e),_0x321913=[_0x404bcc(0x1c7),_0x404bcc(0x1c3),'Tuesday',_0x404bcc(0x303),'Thursday','Friday',_0x404bcc(0x2e4)],_0x49c2a7=_0x321913['reduce']((_0x4294b7,_0x4b3544)=>({..._0x4294b7,[_0x4b3544]:0x0}),{});_0x2256b6['forEach'](_0x504fb9=>{const _0x49351=_0x504fb9['data']();if(_0x49351['approvedAt']){const _0x199e18=_0x321913[new Date(_0x49351['approvedAt']['seconds']*0x3e8)['getDay']()];_0x49c2a7[_0x199e18]++;}});const _0x2d94ef=document[_0x404bcc(0x30f)]('activity-chart');charts['activity']&&charts['activity'][_0x404bcc(0x157)](),charts['activity']=new Chart(_0x2d94ef,{'type':'bar','data':{'labels':_0x321913,'datasets':[{'label':_0x404bcc(0x20e),'data':_0x321913['map'](_0x1484f5=>_0x49c2a7[_0x1484f5]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x404bcc(0x2f1)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x404bcc(0x2f8),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x281f10){console['error']('Error\x20creating\x20activity\x20chart:',_0x281f10),document['getElementById']('activity-chart')['innerHTML']=_0x404bcc(0x241);}}async function loadPlayersData(){const _0x1414b5=a4_0x1edc9a,_0x2d5df5=document['getElementById']('players-table-body');if(!_0x2d5df5)return;_0x2d5df5['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x419b4a='players';if(currentLadder==='D2')_0x419b4a=_0x1414b5(0x26c);else currentLadder==='D3'&&(_0x419b4a='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x419b4a+'\x20collection...');const _0x31c3cb=collection(db,_0x419b4a),_0x2b3268=query(_0x31c3cb,orderBy(_0x1414b5(0x162),'desc')),_0x3022c0=await getDocs(_0x2b3268);if(_0x3022c0['empty']){_0x2d5df5['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x2d5df5['innerHTML']='';let _0x49a3c9=0x1;_0x3022c0['forEach'](_0x1cb5e9=>{const _0x171b37=_0x1414b5,_0x13b41c=_0x1cb5e9['data'](),_0x7f888e=getRankFromElo(_0x13b41c['eloRating']||0x4b0),_0x100928=getRankStyle(_0x13b41c['eloRating']||0x4b0),_0x370515=document['createElement']('tr');_0x370515['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x49a3c9+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x100928['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x13b41c[_0x171b37(0x195)]||_0x171b37(0x2ef))+_0x171b37(0x355)+(_0x13b41c['eloRating']||0x4b0)+_0x171b37(0x23d)+_0x100928['color']+_0x171b37(0x33a)+_0x7f888e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x13b41c['wins']||0x0)+_0x171b37(0x348)+(_0x13b41c['losses']||0x0)+_0x171b37(0x27e)+_0x1cb5e9['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x1cb5e9['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2d5df5['appendChild'](_0x370515),_0x49a3c9++;}),setupPlayerActionButtons();}catch(_0x5bb64d){console['error'](_0x1414b5(0x12e),_0x5bb64d),_0x2d5df5['innerHTML']=_0x1414b5(0x2af)+_0x5bb64d['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x35910c){if(_0x35910c>=0x7d0)return'Emerald';if(_0x35910c>=0x708)return'Gold';if(_0x35910c>=0x640)return'Silver';if(_0x35910c>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x561115=a4_0x1edc9a;document[_0x561115(0x254)]('.edit-btn')[_0x561115(0x304)](_0x5caddf=>{_0x5caddf['addEventListener']('click',async _0x475598=>{const _0x561167=_0x475598['currentTarget']['dataset']['id'];openEditPlayerModal(_0x561167);});}),document['querySelectorAll']('.delete-btn')[_0x561115(0x304)](_0x4de700=>{const _0x378c4c=_0x561115;_0x4de700['addEventListener'](_0x378c4c(0x1f0),async _0x207b90=>{const _0x136505=_0x207b90['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x136505);});});}async function openEditPlayerModal(_0x59b6de){const _0x49de2c=a4_0x1edc9a;try{const _0x4dfde9=currentLadder==='D1'?'players':'playersD2',_0x53e028=doc(db,_0x4dfde9,_0x59b6de),_0x1efd89=await getDoc(_0x53e028);if(!_0x1efd89['exists']()){showNotification('Player\x20not\x20found',_0x49de2c(0x297));return;}const _0x55f981=_0x1efd89['data'](),_0x2323de=document['getElementById']('edit-player-modal'),_0x35ff3d=document['getElementById']('edit-username'),_0x4dae32=document['getElementById']('edit-elo'),_0x3b6751=document['getElementById'](_0x49de2c(0x28b)),_0x3bf218=document['getElementById']('edit-losses');_0x35ff3d[_0x49de2c(0x161)]=_0x55f981['username']||'',_0x4dae32['value']=_0x55f981['eloRating']||0x4b0,_0x3b6751['value']=_0x55f981['wins']||0x0,_0x3bf218['value']=_0x55f981['losses']||0x0,_0x2323de[_0x49de2c(0x305)]['playerId']=_0x59b6de,_0x2323de['classList']['add'](_0x49de2c(0x2e8));}catch(_0x42fa6d){console['error'](_0x49de2c(0x2cc),_0x42fa6d),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x5a4d52=a4_0x1edc9a;try{const _0x34c9b8=document[_0x5a4d52(0x30f)](_0x5a4d52(0x14a)),_0x3ddb2a=_0x34c9b8['dataset']['playerId'];if(!_0x3ddb2a){showNotification(_0x5a4d52(0x224),'error');return;}const _0x420056=document['getElementById']('edit-username'),_0x1a9b89=document[_0x5a4d52(0x30f)]('edit-elo'),_0x410e79=document['getElementById']('edit-wins'),_0x3082d1=document['getElementById'](_0x5a4d52(0x36a)),_0x448ee7=_0x420056[_0x5a4d52(0x161)][_0x5a4d52(0x2d7)](),_0x4b3628=parseInt(_0x1a9b89['value']),_0x328ad1=parseInt(_0x410e79['value']),_0x3c92a7=parseInt(_0x3082d1['value']);if(!_0x448ee7||isNaN(_0x4b3628)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x5a4d52(0x297));return;}const _0x530be2=currentLadder==='D1'?'players':'playersD2',_0x13319e=doc(db,_0x530be2,_0x3ddb2a),_0x185fa1=await getDoc(_0x13319e),_0x2aae1e=_0x185fa1['exists']()?_0x185fa1['data']():{},_0xb61101=_0x2aae1e[_0x5a4d52(0x162)]||0x4b0;await updateDoc(_0x13319e,{'username':_0x448ee7,'eloRating':_0x4b3628,'wins':_0x328ad1||0x0,'losses':_0x3c92a7||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x4b3628!==_0xb61101){const _0x32f5a3=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x32f5a3),{'player':_0x448ee7,'previousElo':_0xb61101,'newElo':_0x4b3628,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x58bbc1){console['error']('Error\x20updating\x20player:',_0x58bbc1),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x58bbc1['message'],'error');}}function closeEditPlayerModal(){const _0x3e4404=a4_0x1edc9a,_0x577ccd=document['getElementById'](_0x3e4404(0x14a));_0x577ccd[_0x3e4404(0x1ad)][_0x3e4404(0x398)]('active'),_0x577ccd['dataset']['playerId']='';}async function confirmDeletePlayer(_0x5b7cc2){const _0x5f1ed1=a4_0x1edc9a;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x693723=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x693723,_0x5b7cc2)),loadPlayersData(),showNotification(_0x5f1ed1(0x219),'success');}catch(_0x2cd53f){console['error']('Error\x20deleting\x20player:',_0x2cd53f),showNotification(_0x5f1ed1(0x15f)+_0x2cd53f[_0x5f1ed1(0x173)],_0x5f1ed1(0x297));}}async function setupManagePlayersSection(){const _0x56c27=a4_0x1edc9a,_0x1205b6=document['getElementById'](_0x56c27(0x1fd));_0x1205b6&&_0x1205b6[_0x56c27(0x16b)]('submit',async _0x502614=>{const _0x58ccdb=_0x56c27;_0x502614[_0x58ccdb(0x1ca)](),await addNewPlayer();});const _0x3c596d=document['getElementById']('player-search');_0x3c596d&&_0x3c596d[_0x56c27(0x16b)]('input',debounce(filterPlayerTable,0x12c));const _0x456c6d=document['getElementById']('save-player-btn');_0x456c6d&&_0x456c6d[_0x56c27(0x16b)](_0x56c27(0x1f0),saveEditedPlayer);const _0x49ff87=document[_0x56c27(0x30f)]('cancel-edit-btn');_0x49ff87&&_0x49ff87['addEventListener'](_0x56c27(0x1f0),closeEditPlayerModal);const _0x28cc01=document['getElementById']('edit-player-modal');_0x28cc01&&_0x28cc01[_0x56c27(0x16b)]('click',_0x17bae8=>{_0x17bae8['target']===_0x28cc01&&closeEditPlayerModal();});const _0x1dacaf=document['getElementById']('players-ladder-selector');_0x1dacaf&&_0x1dacaf['addEventListener'](_0x56c27(0x178),()=>{currentLadder=_0x1dacaf['value'],loadPlayersData();});}async function addNewPlayer(){const _0x363e16=a4_0x1edc9a;try{const _0x587fd8=document[_0x363e16(0x30f)](_0x363e16(0x1e1)),_0x551b97=document['getElementById']('new-player-elo'),_0x3da1be=_0x587fd8['value']['trim'](),_0x34e176=parseInt(_0x551b97['value'])||0x4b0;if(!_0x3da1be){alert(_0x363e16(0x20d));return;}console['log']('Adding\x20player\x20'+_0x3da1be+'\x20with\x20ELO\x20'+_0x34e176+'\x20to\x20'+currentLadder+'\x20ladder');let _0x45ac56='players',_0xe6c9b5='eloHistory';if(currentLadder==='D2')_0x45ac56='playersD2',_0xe6c9b5=_0x363e16(0x1d0);else currentLadder==='D3'&&(_0x45ac56='playersD3',_0xe6c9b5='eloHistoryD3');const _0x1cb3f4=query(collection(db,_0x45ac56),where('username','==',_0x3da1be)),_0x20264f=await getDocs(_0x1cb3f4);if(!_0x20264f['empty']){alert('Username\x20'+_0x3da1be+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x4b3713=auth[_0x363e16(0x155)],_0x1e4a7d={'username':_0x3da1be,'eloRating':_0x34e176,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x4b3713?_0x4b3713['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x45ac56),_0x1e4a7d),await addDoc(collection(db,_0xe6c9b5),{'player':_0x3da1be,'previousElo':0x4b0,'newElo':_0x34e176,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x4b3713?_0x4b3713['email']:_0x363e16(0x185),'gameMode':currentLadder}),_0x587fd8['value']='',_0x551b97[_0x363e16(0x161)]='1200',alert('Player\x20'+_0x3da1be+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x10c5a5){console[_0x363e16(0x297)]('Error\x20adding\x20player:',_0x10c5a5),alert('Error\x20adding\x20player:\x20'+_0x10c5a5['message']);}}document['addEventListener'](a4_0x1edc9a(0x323),()=>{const _0x376c0f=document['getElementById']('add-player-form');_0x376c0f&&_0x376c0f['addEventListener']('submit',_0x253e37=>{const _0x2c73e8=a4_0x2464;_0x253e37[_0x2c73e8(0x1ca)](),addNewPlayer();});});function filterPlayerTable(){const _0x37e2c8=a4_0x1edc9a,_0x9f1d11=document['getElementById'](_0x37e2c8(0x1be))[_0x37e2c8(0x161)]['toLowerCase'](),_0xd330bd=document['querySelectorAll'](_0x37e2c8(0x181));let _0x39124b=0x0;_0xd330bd['forEach'](_0xf34654=>{const _0xe1c9a9=_0x37e2c8,_0x512737=_0xf34654['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x512737['includes'](_0x9f1d11)?(_0xf34654['style'][_0xe1c9a9(0x18f)]='',_0x39124b++):_0xf34654['style'][_0xe1c9a9(0x18f)]='none';});const _0x4cc354=document[_0x37e2c8(0x30f)]('no-results-message');_0x4cc354&&(_0x39124b===0x0&&_0x9f1d11!==''?_0x4cc354['style']['display']='block':_0x4cc354[_0x37e2c8(0x13e)][_0x37e2c8(0x18f)]='none');}function debounce(_0x2ffde7,_0x288315){let _0x5a7bc6;return function(..._0x3ff14c){clearTimeout(_0x5a7bc6),_0x5a7bc6=setTimeout(()=>_0x2ffde7['apply'](this,_0x3ff14c),_0x288315);};}async function loadEloHistory(_0x1e848c=0x1){const _0xb72ce9=a4_0x1edc9a,_0x273f70=document[_0xb72ce9(0x30f)]('elo-history-table-body'),_0x256e35=currentLadder['toLowerCase']();if(!_0x273f70)return;_0x273f70[_0xb72ce9(0x2c9)]=_0xb72ce9(0x327);try{const _0x17979e=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0xb72ce9(0x1d0):'eloHistoryD3',_0x43f825=collection(db,_0x17979e);let _0x1d87a3;if(_0x1e848c>eloHistoryPagination[_0x256e35]['page']&&eloHistoryPagination[_0x256e35][_0xb72ce9(0x26e)])_0x1d87a3=query(_0x43f825,orderBy('timestamp',_0xb72ce9(0x352)),startAfter(eloHistoryPagination[_0x256e35]['lastVisible']),limit(PAGE_SIZE));else _0x1e848c<eloHistoryPagination[_0x256e35]['page']&&eloHistoryPagination[_0x256e35]['firstVisible']?_0x1d87a3=query(_0x43f825,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x256e35]['firstVisible']),limitToLast(PAGE_SIZE)):_0x1d87a3=query(_0x43f825,orderBy('timestamp',_0xb72ce9(0x352)),limit(PAGE_SIZE));const _0x1d9bff=await getDocs(_0x1d87a3);if(_0x1d9bff['empty']){_0x273f70['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x256e35+'-page-indicator')[_0xb72ce9(0x261)]=_0xb72ce9(0x328);return;}eloHistoryPagination[_0x256e35][_0xb72ce9(0x38d)]=_0x1e848c,eloHistoryPagination[_0x256e35]['firstVisible']=_0x1d9bff['docs'][0x0],eloHistoryPagination[_0x256e35]['lastVisible']=_0x1d9bff['docs'][_0x1d9bff['docs'][_0xb72ce9(0x309)]-0x1];const _0x41a8ec=new Map();_0x273f70[_0xb72ce9(0x2c9)]='';const _0x5bd6e1=async _0x444120=>{const _0x24a1d0=_0xb72ce9;if(typeof _0x444120!=='string'||_0x444120['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x444120))return _0x444120;if(_0x41a8ec['has'](_0x444120))return _0x41a8ec['get'](_0x444120);try{for(const _0x37f4a8 of['players','playersD2','playersD3',_0x24a1d0(0x182)]){const _0x301cc5=await getDoc(doc(db,_0x37f4a8,_0x444120));if(_0x301cc5['exists']()&&_0x301cc5[_0x24a1d0(0x2ab)]()[_0x24a1d0(0x195)]){const _0x2ff5d3=_0x301cc5[_0x24a1d0(0x2ab)]()['username'];return _0x41a8ec['set'](_0x444120,_0x2ff5d3),_0x2ff5d3;}}return _0x444120;}catch(_0x557a8d){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x444120+':',_0x557a8d),_0x444120;}};for(const _0x22d58e of _0x1d9bff[_0xb72ce9(0x313)]){const _0x50b33b=_0x22d58e[_0xb72ce9(0x2ab)](),_0x413dd8=document['createElement']('tr'),_0x4cb396=_0x50b33b['timestamp']?new Date(_0x50b33b['timestamp']['seconds']*0x3e8)[_0xb72ce9(0x22e)]():'N/A',_0x1f2567=_0x50b33b[_0xb72ce9(0x2c6)]-_0x50b33b['previousElo'],_0x5ae12d=_0x1f2567>0x0?'positive-change':_0x1f2567<0x0?'negative-change':'',_0x4b602b=_0x1f2567>0x0?'+':'',_0x15898d=_0x50b33b['player']||_0x50b33b['username']||_0x50b33b[_0xb72ce9(0x2c2)]||'N/A',_0x52daf1=await _0x5bd6e1(_0x15898d);_0x413dd8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x4cb396+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x52daf1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x50b33b['previousElo']||_0xb72ce9(0x2cb))+_0xb72ce9(0x22a)+(_0x50b33b['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x5ae12d+'\x22>'+_0x4b602b+_0x1f2567+_0xb72ce9(0x2a1)+formatHistoryType(_0x50b33b['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x50b33b['modifiedBy']||_0x50b33b['promotedBy']||_0x50b33b[_0xb72ce9(0x201)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x273f70['appendChild'](_0x413dd8);}document['getElementById'](_0x256e35+_0xb72ce9(0x152))[_0xb72ce9(0x261)]=_0xb72ce9(0x144)+_0x1e848c;const _0xa6cb20=document['getElementById'](_0x256e35+'-prev-page'),_0x16968=document[_0xb72ce9(0x30f)](_0x256e35+'-next-page');if(_0xa6cb20)_0xa6cb20['disabled']=_0x1e848c<=0x1;const _0x56ce2c=query(_0x43f825,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x256e35]['lastVisible']),limit(0x1)),_0x3ac82e=await getDocs(_0x56ce2c);if(_0x16968)_0x16968['disabled']=_0x3ac82e['empty'];}catch(_0x2c6bdc){console['error'](_0xb72ce9(0x192),_0x2c6bdc),_0x273f70[_0xb72ce9(0x2c9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x2c6bdc[_0xb72ce9(0x173)]+_0xb72ce9(0x2fc);}}function formatHistoryType(_0x56fce5){const _0x3861b8=a4_0x1edc9a;switch(_0x56fce5){case _0x3861b8(0x1dd):return'Match\x20Result';case'promotion':return'Promotion';case'demotion':return'Demotion';case _0x3861b8(0x2bc):return'Admin\x20Adjustment';case _0x3861b8(0x37f):return _0x3861b8(0x240);default:return _0x56fce5||'Unknown';}}function setupEloHistorySection(){const _0xf9f23c=a4_0x1edc9a;document['getElementById'](_0xf9f23c(0x213))['addEventListener']('click',()=>{const _0x55cd31=_0xf9f23c;loadEloHistory(eloHistoryPagination['d1'][_0x55cd31(0x38d)]-0x1);}),document['getElementById']('d1-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x27ae09=document['getElementById'](_0xf9f23c(0x29d)),_0x3ea15f=document['getElementById']('d3-next-page');_0x27ae09&&_0x27ae09['addEventListener']('click',()=>{const _0x57fb57=_0xf9f23c;loadEloHistory(eloHistoryPagination['d3'][_0x57fb57(0x38d)]-0x1);});_0x3ea15f&&_0x3ea15f['addEventListener']('click',()=>{const _0x23e516=_0xf9f23c;loadEloHistory(eloHistoryPagination['d3'][_0x23e516(0x38d)]+0x1);});const _0x750a80=document[_0xf9f23c(0x30f)]('elo-history-search');_0x750a80&&_0x750a80['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x569f3f=document['getElementById']('history-type-filter');_0x569f3f&&_0x569f3f[_0xf9f23c(0x16b)]('change',applyEloHistoryFilters);const _0x546528=document['getElementById'](_0xf9f23c(0x393));_0x546528&&_0x546528['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x257724=document['getElementById']('elo-history-search')['value']['toLowerCase'](),_0x1467b1=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0xbf2d3e=0x0;_0x1467b1['forEach'](_0x215caa=>{const _0x23b6f0=a4_0x2464;if(_0x215caa[_0x23b6f0(0x1ad)]['contains']('loading-cell')||_0x215caa[_0x23b6f0(0x1ad)]['contains']('empty-state')||_0x215caa['classList']['contains']('error-state'))return;const _0x57a7ca=_0x215caa['querySelector']('.player')?.['textContent']['toLowerCase']()||'',_0x43128a=_0x215caa[_0x23b6f0(0x164)](_0x23b6f0(0x2fd))?.[_0x23b6f0(0x261)]['toLowerCase']()||'',_0x3da6ba=_0x215caa['querySelector']('.admin-action')?.[_0x23b6f0(0x261)]['toLowerCase']()||'';_0x57a7ca[_0x23b6f0(0x2a7)](_0x257724)||_0x43128a['includes'](_0x257724)||_0x3da6ba[_0x23b6f0(0x2a7)](_0x257724)?(_0x215caa['style']['display']='',_0xbf2d3e++):_0x215caa[_0x23b6f0(0x13e)]['display']='none';});}async function applyEloHistoryFilters(){const _0x38d6e4=a4_0x1edc9a,_0x205d85=document['getElementById']('history-start-date')['value'],_0x2970e9=document['getElementById'](_0x38d6e4(0x2e3))['value'],_0x2e5084=document[_0x38d6e4(0x30f)]('history-type-filter')['value'],_0x27b15c=currentLadder['toLowerCase']();eloHistoryPagination[_0x27b15c]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x38383a=document['getElementById']('elo-history-table-body');_0x38383a['innerHTML']=_0x38d6e4(0x1d2);try{const _0x71ef89=currentLadder==='D1'?_0x38d6e4(0x32f):_0x38d6e4(0x1d0),_0x2173d5=collection(db,_0x71ef89);let _0xe54dd1=[orderBy('timestamp','desc')];if(_0x205d85){const _0x4deff7=new Date(_0x205d85);_0x4deff7['setHours'](0x0,0x0,0x0,0x0),_0xe54dd1['push'](where(_0x38d6e4(0x220),'>=',_0x4deff7));}if(_0x2970e9){const _0x3e7e89=new Date(_0x2970e9);_0x3e7e89['setHours'](0x17,0x3b,0x3b,0x3e7),_0xe54dd1['push'](where('timestamp','<=',_0x3e7e89));}_0x2e5084&&_0x2e5084!=='all'&&_0xe54dd1['push'](where(_0x38d6e4(0x2a3),'==',_0x2e5084));_0xe54dd1['push'](limit(PAGE_SIZE));const _0x4e38f5=query(_0x2173d5,..._0xe54dd1),_0x4691b9=await getDocs(_0x4e38f5);!_0x4691b9[_0x38d6e4(0x212)]&&(eloHistoryPagination[_0x27b15c][_0x38d6e4(0x38a)]=_0x4691b9['docs'][0x0],eloHistoryPagination[_0x27b15c]['lastVisible']=_0x4691b9['docs'][_0x4691b9[_0x38d6e4(0x313)]['length']-0x1]);_0x38383a['innerHTML']='';if(_0x4691b9['empty']){_0x38383a['innerHTML']=_0x38d6e4(0x378);return;}_0x4691b9['forEach'](_0x5e56b0=>{const _0x521846=_0x38d6e4,_0x151ab9=_0x5e56b0[_0x521846(0x2ab)](),_0x32e669=document[_0x521846(0x131)]('tr'),_0x3b2f8b=_0x151ab9[_0x521846(0x220)]?new Date(_0x151ab9[_0x521846(0x220)]['seconds']*0x3e8)['toLocaleString']():'N/A',_0x274ccd=_0x151ab9['newElo']-_0x151ab9[_0x521846(0x1b4)],_0x4228fe=_0x274ccd>0x0?'positive-change':_0x274ccd<0x0?'negative-change':'',_0x57affc=_0x274ccd>0x0?'+':'',_0x454e7c=_0x151ab9['player']||_0x151ab9['username']||_0x151ab9[_0x521846(0x2c2)]||'N/A';_0x32e669['innerHTML']=_0x521846(0x1f2)+_0x3b2f8b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x454e7c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x151ab9['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x151ab9['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4228fe+'\x22>'+_0x57affc+_0x274ccd+_0x521846(0x2a1)+formatHistoryType(_0x151ab9[_0x521846(0x2a3)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x151ab9['modifiedBy']||_0x151ab9['promotedBy']||_0x151ab9['demotedBy']||_0x521846(0x374))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x38383a['appendChild'](_0x32e669);}),document['getElementById'](_0x27b15c+'-page-indicator')[_0x38d6e4(0x261)]='Page\x201';}catch(_0x15f183){console[_0x38d6e4(0x297)]('Error\x20applying\x20filters:',_0x15f183),_0x38383a['innerHTML']=_0x38d6e4(0x1a9)+_0x15f183['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x411d4b=a4_0x1edc9a;document['getElementById'](_0x411d4b(0x1d1))[_0x411d4b(0x161)]='',document['getElementById'](_0x411d4b(0x2e3))['value']='',document['getElementById'](_0x411d4b(0x18b))['value']=_0x411d4b(0x28f),document['getElementById'](_0x411d4b(0x1c2))[_0x411d4b(0x161)]='';const _0x2e3896=currentLadder['toLowerCase']();eloHistoryPagination[_0x2e3896]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x56601c=a4_0x1edc9a,_0xef3016=document['getElementById']('promote-player-btn'),_0x508dd5=document['getElementById']('promote-modal'),_0x3aaf72=document['getElementById']('promote-form');_0xef3016&&_0x508dd5&&_0x3aaf72&&(_0xef3016['addEventListener']('click',()=>{const _0x59a4c5=a4_0x2464;_0x508dd5[_0x59a4c5(0x1ad)][_0x59a4c5(0x143)]('active');}),_0x508dd5['addEventListener'](_0x56601c(0x1f0),_0x41cbe9=>{const _0x16e01c=_0x56601c;_0x41cbe9['target']===_0x508dd5&&_0x508dd5[_0x16e01c(0x1ad)]['remove']('active');}),_0x3aaf72['addEventListener']('submit',async _0x236df3=>{const _0x4ab0e4=_0x56601c;_0x236df3[_0x4ab0e4(0x1ca)]();const _0x42e5f8=document['getElementById'](_0x4ab0e4(0x205)),_0x1c271c=document[_0x4ab0e4(0x30f)]('promote-ladder'),_0x105043=_0x42e5f8['value'][_0x4ab0e4(0x2d7)](),_0x4fce69=_0x1c271c['value'];if(!_0x105043){showNotification(_0x4ab0e4(0x28c),'error');return;}try{await promotePlayer(_0x105043,_0x4fce69),_0x508dd5['classList']['remove'](_0x4ab0e4(0x2e8)),_0x42e5f8['value']='';}catch(_0x2a5e72){showNotification(_0x2a5e72['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{_0x508dd5['classList']['remove']('active');}));const _0x21270d=document['getElementById']('demote-player-btn'),_0x909691=document['getElementById']('demote-modal'),_0x55b863=document['getElementById']('demote-form');_0x21270d&&_0x909691&&_0x55b863&&(_0x21270d['addEventListener']('click',()=>{const _0x34b341=_0x56601c;_0x909691['classList'][_0x34b341(0x143)]('active');}),_0x909691[_0x56601c(0x16b)]('click',_0x3b2e5f=>{const _0xe168b2=_0x56601c;_0x3b2e5f[_0xe168b2(0x24a)]===_0x909691&&_0x909691[_0xe168b2(0x1ad)]['remove']('active');}),_0x55b863[_0x56601c(0x16b)]('submit',async _0x18d48f=>{const _0x5d836e=_0x56601c;_0x18d48f['preventDefault']();const _0x5c3ca7=document['getElementById']('demote-username'),_0x5e9e39=document['getElementById']('demote-ladder'),_0x5e2140=_0x5c3ca7[_0x5d836e(0x161)][_0x5d836e(0x2d7)](),_0xa890a7=_0x5e9e39['value'];if(!_0x5e2140){alert(_0x5d836e(0x28c));return;}try{await demotePlayer(_0x5e2140,_0xa890a7),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x16b76d){console['error']('Error\x20in\x20demotion:',_0x16b76d);}}));const _0xe9418a=document['getElementById']('set-elo-btn'),_0x18a904=document[_0x56601c(0x30f)](_0x56601c(0x296)),_0x21724b=document['getElementById']('set-elo-form');_0xe9418a&&_0x18a904&&_0x21724b&&(_0xe9418a['addEventListener']('click',()=>{const _0x5946fc=_0x56601c;_0x18a904[_0x5946fc(0x1ad)]['add']('active');}),_0x18a904['addEventListener']('click',_0x1c18d7=>{const _0x417a7e=_0x56601c;_0x1c18d7[_0x417a7e(0x24a)]===_0x18a904&&_0x18a904['classList']['remove'](_0x417a7e(0x2e8));}),_0x21724b['addEventListener']('submit',async _0x38edc4=>{const _0x18a651=_0x56601c;_0x38edc4['preventDefault']();const _0x45e40f=document['getElementById']('set-elo-username'),_0x3598a3=document['getElementById']('set-elo-value');let _0x36fd71;const _0x489c4c=document['getElementById']('set-elo-ladder'),_0x4ecae4=document[_0x18a651(0x164)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0x489c4c)_0x36fd71=_0x489c4c['value'];else _0x4ecae4?_0x36fd71=_0x4ecae4[_0x18a651(0x161)]:_0x36fd71='D1';if(!_0x45e40f||!_0x3598a3){showNotification(_0x18a651(0x372),'error');return;}const _0x1cc987=_0x45e40f['value']['trim'](),_0x41628d=parseInt(_0x3598a3['value']);if(!_0x1cc987||isNaN(_0x41628d)){showNotification(_0x18a651(0x342),_0x18a651(0x297));return;}try{await setCustomElo(_0x1cc987,_0x41628d,_0x36fd71),_0x18a904['classList'][_0x18a651(0x398)]('active'),_0x45e40f[_0x18a651(0x161)]='',_0x3598a3['value']='';}catch(_0x3c081f){showNotification(_0x3c081f['message'],_0x18a651(0x297));}}),document['getElementById']('cancel-set-elo-btn')[_0x56601c(0x16b)]('click',()=>{_0x18a904['classList']['remove']('active');}));const _0x53c92b=document[_0x56601c(0x30f)](_0x56601c(0x176)),_0x3dd951=document['getElementById']('set-role-form');if(_0x53c92b&&_0x3dd951){_0x53c92b[_0x56601c(0x16b)]('click',_0xc7e788=>{const _0x24b7ea=_0x56601c;_0xc7e788[_0x24b7ea(0x24a)]===_0x53c92b&&closeModalHandler();}),_0x3dd951['addEventListener']('submit',async _0x413693=>{const _0x3c2853=_0x56601c;_0x413693['preventDefault']();const _0x3b24c2=document['getElementById']('role-username'),_0x5da8f9=document['getElementById']('role-name'),_0x42d50c=document['getElementById']('role-color'),_0x55d584=_0x3b24c2['value'][_0x3c2853(0x2d7)](),_0x48528e=_0x5da8f9['value']['trim'](),_0x25e8cf=_0x42d50c['value'];if(!_0x55d584){showNotification(_0x3c2853(0x1ac),_0x3c2853(0x297));return;}try{await setUserRole(_0x55d584,_0x48528e,_0x25e8cf),closeModalHandler(),loadUsersWithRoles();}catch(_0x41b4d9){}});const _0x508b3f=document['getElementById']('cancel-role-btn');_0x508b3f&&(_0x508b3f[_0x56601c(0x321)]('click',closeModalHandler),_0x508b3f['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0xf5fd3a,_0x4ccbb2){const _0x162422=a4_0x1edc9a;try{console['log'](_0x162422(0x34c)+_0xf5fd3a+'\x20in\x20'+_0x4ccbb2+'\x20ladder');const _0x4b5fa3=auth[_0x162422(0x155)];if(!_0x4b5fa3)throw new Error(_0x162422(0x2b3));const _0xc9b01a=_0x4ccbb2==='D2'?'playersD2':'players',_0xd2a508=_0x4ccbb2==='D2'?'eloHistoryD2':'eloHistory';console['log'](_0x162422(0x2d8)+_0xc9b01a);const _0x5eb441=collection(db,_0xc9b01a),_0x2a4776=query(_0x5eb441,where('username','==',_0xf5fd3a)),_0x45c9b0=await getDocs(_0x2a4776);if(_0x45c9b0[_0x162422(0x212)]){alert(_0x162422(0x238)+_0x4ccbb2+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x4ccbb2+'\x20ladder');}const _0x38b3ed=_0x45c9b0['docs'][0x0],_0x5cbb9a=_0x38b3ed['data'](),_0x498e70=_0x5cbb9a['eloRating']||0x4b0,_0x68df3d=_0x38b3ed['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x498e70);const _0x3ec213=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':_0x162422(0x36f),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x511733=_0x3ec213['find'](_0x39333e=>_0x39333e['elo']>_0x498e70);if(!_0x511733){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x4ccbb2+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x4ccbb2+'\x20ladder');}console[_0x162422(0x35f)]('Promoting\x20player\x20to\x20'+_0x511733['name']+'\x20('+_0x511733['elo']+')'),await updateDoc(doc(db,_0xc9b01a,_0x38b3ed['id']),{'eloRating':_0x511733['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x4b5fa3['email']||'admin'}),await addDoc(collection(db,_0xd2a508),{'player':_0xf5fd3a,'previousElo':_0x498e70,'newElo':_0x511733['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x511733['name'],'promotedBy':_0x4b5fa3[_0x162422(0x361)]||'admin','gameMode':_0x4ccbb2});try{const {promotionManager:_0x1634ca}=await import('./promotions.js'),_0x4e3f8d=_0x1634ca['getRankName'](_0x498e70),_0x2394b1=_0x511733['name'];await _0x1634ca['sendPromotionNotification'](_0x68df3d,_0xf5fd3a,_0x498e70,_0x511733[_0x162422(0x1cd)],_0x4e3f8d,_0x2394b1,_0x162422(0x20c),{'displayName':_0xf5fd3a,'source':_0x162422(0x185),'adminUser':_0x4b5fa3['email'],'ladder':_0x4ccbb2}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x79b115){console['error'](_0x162422(0x1cb),_0x79b115);}return alert('Successfully\x20promoted\x20'+_0xf5fd3a+_0x162422(0x37d)+_0x511733['name']+'\x20('+_0x511733['elo']+')'),currentLadder===_0x4ccbb2&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x45d5ab){console['error']('Error\x20promoting\x20player:',_0x45d5ab),alert('Error\x20promoting\x20player:\x20'+_0x45d5ab['message']);throw _0x45d5ab;}}document['addEventListener'](a4_0x1edc9a(0x323),()=>{const _0x4db466=document['getElementById']('promote-form');_0x4db466&&_0x4db466['addEventListener']('submit',async _0x187df6=>{const _0x5445a5=a4_0x2464;_0x187df6['preventDefault']();const _0xe1d7eb=document[_0x5445a5(0x30f)](_0x5445a5(0x205))[_0x5445a5(0x161)]['trim'](),_0x20d48b=document[_0x5445a5(0x164)]('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0xe1d7eb){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0xe1d7eb,_0x20d48b),document[_0x5445a5(0x30f)]('promote-modal')[_0x5445a5(0x1ad)][_0x5445a5(0x398)]('active'),document['getElementById'](_0x5445a5(0x205))[_0x5445a5(0x161)]='';}catch(_0x7cd5f0){console['error']('Error\x20in\x20promotion:',_0x7cd5f0);}});});async function demotePlayer(_0x47a4cf,_0x1990db){const _0x14e0ec=a4_0x1edc9a;try{console[_0x14e0ec(0x35f)](_0x14e0ec(0x1bc)+_0x47a4cf+'\x20in\x20'+_0x1990db+'\x20ladder');const _0x1ae0fa=auth[_0x14e0ec(0x155)];if(!_0x1ae0fa)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x323481=_0x1990db==='D2'?_0x14e0ec(0x26c):'players',_0x228a00=_0x1990db==='D2'?_0x14e0ec(0x1d0):'eloHistory';console['log'](_0x14e0ec(0x2d8)+_0x323481);const _0x592809=collection(db,_0x323481),_0x291ad4=query(_0x592809,where(_0x14e0ec(0x195),'==',_0x47a4cf)),_0x21ade5=await getDocs(_0x291ad4);if(_0x21ade5['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x1990db+'\x20ladder');throw new Error(_0x14e0ec(0x238)+_0x1990db+'\x20ladder');}const _0x54db84=_0x21ade5['docs'][0x0],_0x208d37=_0x54db84['data'](),_0x14b7d8=_0x208d37['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x14b7d8);const _0x59c53f=[{'name':_0x14e0ec(0x36f),'elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x498bd7=_0x59c53f[_0x14e0ec(0x308)](_0x46189b=>_0x46189b[_0x14e0ec(0x1cd)]<_0x14b7d8);if(!_0x498bd7){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x1990db+'\x20ladder');throw new Error(_0x14e0ec(0x25e)+_0x1990db+'\x20ladder');}console[_0x14e0ec(0x35f)]('Demoting\x20player\x20to\x20'+_0x498bd7['name']+'\x20('+_0x498bd7[_0x14e0ec(0x1cd)]+')'),await updateDoc(doc(db,_0x323481,_0x54db84['id']),{'eloRating':_0x498bd7['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x1ae0fa['email']||'admin'}),await addDoc(collection(db,_0x228a00),{'player':_0x47a4cf,'previousElo':_0x14b7d8,'newElo':_0x498bd7[_0x14e0ec(0x1cd)],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x498bd7[_0x14e0ec(0x2ad)],'demotedBy':_0x1ae0fa[_0x14e0ec(0x361)]||'admin','gameMode':_0x1990db});try{const {promotionManager:_0x311d16}=await import('./promotions.js'),_0x342193=_0x311d16[_0x14e0ec(0x37b)](_0x14b7d8),_0x556ed7=_0x498bd7['name'];await _0x311d16[_0x14e0ec(0x316)](_0x54db84['id'],_0x47a4cf,_0x14b7d8,_0x498bd7['elo'],_0x342193,_0x556ed7,'demotion',{'displayName':_0x47a4cf,'source':'admin','adminUser':_0x1ae0fa['email'],'ladder':_0x1990db}),console[_0x14e0ec(0x35f)]('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x5b511f){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x5b511f);}return alert('Successfully\x20demoted\x20'+_0x47a4cf+_0x14e0ec(0x37d)+_0x498bd7['name']+'\x20('+_0x498bd7[_0x14e0ec(0x1cd)]+')'),currentLadder===_0x1990db&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x14a29f){console['error']('Error\x20demoting\x20player:',_0x14a29f),alert('Error\x20demoting\x20player:\x20'+_0x14a29f['message']);throw _0x14a29f;}}document['addEventListener'](a4_0x1edc9a(0x323),()=>{const _0x5199c8=a4_0x1edc9a,_0x4f109e=document['getElementById'](_0x5199c8(0x22b));_0x4f109e&&_0x4f109e['addEventListener']('submit',async _0x57bba7=>{const _0x4f1ef4=_0x5199c8;_0x57bba7['preventDefault']();const _0x1a7e38=document[_0x4f1ef4(0x30f)]('demote-username')['value'][_0x4f1ef4(0x2d7)](),_0x2fbc13=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')[_0x4f1ef4(0x161)];if(!_0x1a7e38){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x1a7e38,_0x2fbc13),document['getElementById'](_0x4f1ef4(0x31b))[_0x4f1ef4(0x1ad)]['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x44eece){console[_0x4f1ef4(0x297)](_0x4f1ef4(0x147),_0x44eece);}});});async function setCustomElo(_0x374751,_0x6886d4,_0x2820f2){const _0x27ee90=a4_0x1edc9a;try{const _0x495e5a=auth['currentUser'];if(!_0x495e5a||!isAdmin(_0x495e5a[_0x27ee90(0x361)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x392aa6=_0x2820f2==='D2'?_0x27ee90(0x26c):'players',_0x4d1a4b=_0x2820f2==='D2'?_0x27ee90(0x1d0):'eloHistory',_0x1c302f=collection(db,_0x392aa6),_0x5f8e99=query(_0x1c302f,where('username','==',_0x374751)),_0x19760=await getDocs(_0x5f8e99);if(_0x19760[_0x27ee90(0x212)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x2820f2+'\x20ladder');const _0x398396=_0x19760['docs'][0x0],_0xbc10b0=_0x398396['data'](),_0x57a5b5=_0xbc10b0[_0x27ee90(0x162)]||0x4b0,_0x38d273=writeBatch(db);_0x38d273['update'](doc(db,_0x392aa6,_0x398396['id']),{'eloRating':_0x6886d4,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x495e5a[_0x27ee90(0x361)]});const _0x1e4192=doc(collection(db,_0x4d1a4b));return _0x38d273[_0x27ee90(0x135)](_0x1e4192,{'player':_0x374751,'previousElo':_0x57a5b5,'newElo':_0x6886d4,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x495e5a[_0x27ee90(0x361)],'gameMode':_0x2820f2}),await _0x38d273['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x374751+'\x20was\x20updated\x20from\x20'+_0x57a5b5+'\x20to\x20'+_0x6886d4,_0x27ee90(0x2da)),currentLadder===_0x2820f2&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x107fdd){console[_0x27ee90(0x297)](_0x27ee90(0x2f4),_0x107fdd);throw _0x107fdd;}}async function setUserRole(_0x598af5,_0x485a9c,_0x27f3bb){const _0x3d4848=a4_0x1edc9a;try{const _0x459179=auth['currentUser'];if(!_0x459179||!isAdmin(_0x459179['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x209e07=_0x485a9c?_0x485a9c['trim']():null,_0x33d307=_0x209e07?_0x27f3bb||'#808080':null,[_0x2b737c,_0x494ebf]=await Promise['all']([getDocs(query(collection(db,_0x3d4848(0x160)),where(_0x3d4848(0x195),'==',_0x598af5))),getDocs(query(collection(db,_0x3d4848(0x26c)),where('username','==',_0x598af5)))]),_0x49650e=[];if(!_0x2b737c[_0x3d4848(0x212)])_0x49650e['push']({'ref':_0x2b737c[_0x3d4848(0x313)][0x0][_0x3d4848(0x136)],'source':'D1'});if(!_0x494ebf[_0x3d4848(0x212)])_0x49650e['push']({'ref':_0x494ebf['docs'][0x0][_0x3d4848(0x136)],'source':'D2'});if(_0x49650e['length']===0x0){const [_0x20fffd,_0x4b24ba]=await Promise[_0x3d4848(0x28f)]([getDocs(query(collection(db,_0x3d4848(0x182)),where(_0x3d4848(0x195),'==',_0x598af5))),getDocs(query(collection(db,'userProfiles'),where(_0x3d4848(0x195),'==',_0x598af5)))]);if(!_0x20fffd['empty'])_0x49650e[_0x3d4848(0x246)]({'ref':_0x20fffd['docs'][0x0][_0x3d4848(0x136)],'source':'NonParticipant'});if(!_0x4b24ba[_0x3d4848(0x212)])_0x49650e[_0x3d4848(0x246)]({'ref':_0x4b24ba['docs'][0x0][_0x3d4848(0x136)],'source':'UserProfile'});}if(_0x49650e[_0x3d4848(0x309)]===0x0)throw new Error(_0x3d4848(0x293)+_0x598af5+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x3dac0d=writeBatch(db);_0x49650e[_0x3d4848(0x304)](_0x55c055=>{const _0x11521b=_0x3d4848;console[_0x11521b(0x35f)]('Updating\x20role\x20for\x20'+_0x598af5+'\x20in\x20'+_0x55c055['source']),!_0x209e07?_0x3dac0d['update'](_0x55c055[_0x11521b(0x136)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x3dac0d['update'](_0x55c055['ref'],{'roleName':_0x209e07,'roleColor':_0x33d307,'roleAssignedBy':_0x459179[_0x11521b(0x361)],'roleAssignedAt':serverTimestamp()});}),await _0x3dac0d['commit']();const _0x3584aa=_0x209e07?_0x3d4848(0x283)+_0x209e07+'\x22\x20set':'Role\x20removed';return showNotification(_0x3584aa+'\x20for\x20user\x20\x22'+_0x598af5+'\x22',_0x3d4848(0x2da)),!![];}catch(_0x4a5c61){console[_0x3d4848(0x297)]('Error\x20setting\x20user\x20role:',_0x4a5c61),showNotification('Error:\x20'+_0x4a5c61[_0x3d4848(0x173)],'error');throw _0x4a5c61;}}function showNotification(_0x1c28e3,_0x2dc548='info'){const _0x461721=a4_0x1edc9a,_0x443995=document['createElement']('div');_0x443995['className']='notification\x20'+_0x2dc548,_0x443995['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x2dc548)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x1c28e3+_0x461721(0x1f4),document[_0x461721(0x391)][_0x461721(0x385)](_0x443995),setTimeout(()=>{_0x443995['classList']['add']('active');},0xa);const _0x3b55a4=setTimeout(()=>{closeNotification(_0x443995);},0x1388);_0x443995['querySelector'](_0x461721(0x15e))[_0x461721(0x16b)](_0x461721(0x1f0),()=>{clearTimeout(_0x3b55a4),closeNotification(_0x443995);});}function getNotificationIcon(_0x5d25b8){const _0xbf2e45=a4_0x1edc9a;switch(_0x5d25b8){case'success':return'fa-check-circle';case'error':return _0xbf2e45(0x314);case _0xbf2e45(0x19e):return _0xbf2e45(0x2d6);case'info':default:return'fa-info-circle';}}function closeNotification(_0x55a19f){const _0x40d717=a4_0x1edc9a;_0x55a19f['classList']['remove'](_0x40d717(0x2e8)),setTimeout(()=>{_0x55a19f['remove']();},0x12c);}function setupUserRolesSection(){const _0x511fa6=a4_0x1edc9a,_0x4b29fd=document['getElementById'](_0x511fa6(0x286));_0x4b29fd&&_0x4b29fd['addEventListener']('click',function(){const _0x34c09c=_0x511fa6;this['classList'][_0x34c09c(0x143)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x4dc1b5=_0x34c09c;this['classList'][_0x4dc1b5(0x398)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x1c744a=>{const _0x1e1dbc=_0x34c09c;console[_0x1e1dbc(0x297)]('Error\x20loading\x20users:',_0x1c744a),this['classList']['remove'](_0x1e1dbc(0x38e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x47e531=document['getElementById'](_0x511fa6(0x139));_0x47e531&&_0x47e531['addEventListener']('click',()=>{const _0x390712=_0x511fa6,_0x227f45=document['getElementById']('set-role-modal');_0x227f45&&_0x227f45['classList']['add'](_0x390712(0x2e8));});const _0x2bd769=document['getElementById'](_0x511fa6(0x271));_0x2bd769&&_0x2bd769['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x3601a0=document['getElementById'](_0x511fa6(0x30e));_0x3601a0&&_0x3601a0['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x1792ed=a4_0x1edc9a,_0x15f2a6=document['getElementById']('users-table-body');if(!_0x15f2a6)return;_0x15f2a6['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x3dab1f,_0x433230,_0x29e597,_0x250f05]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,_0x1792ed(0x26c))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x57c15c=new Map();function _0x1ee6a0(_0x5329bc,_0x30efe0){_0x5329bc['forEach'](_0x60eb18=>{const _0x48a55f=a4_0x2464,_0x2fde06=_0x60eb18['data']();if(!_0x2fde06['username'])return;if(!_0x57c15c['has'](_0x2fde06['username']))_0x57c15c['set'](_0x2fde06[_0x48a55f(0x195)],{'username':_0x2fde06['username'],'roleName':_0x2fde06[_0x48a55f(0x351)]||null,'roleColor':_0x2fde06['roleColor']||null,'roleAssignedBy':_0x2fde06['roleAssignedBy']||null,'roleAssignedAt':_0x2fde06['roleAssignedAt']||null,'sources':[_0x30efe0]});else{const _0x22c155=_0x57c15c['get'](_0x2fde06[_0x48a55f(0x195)]);_0x2fde06['roleName']&&(!_0x22c155[_0x48a55f(0x351)]||_0x30efe0==='D1'||_0x30efe0==='D2')&&(_0x22c155[_0x48a55f(0x351)]=_0x2fde06['roleName'],_0x22c155[_0x48a55f(0x167)]=_0x2fde06['roleColor'],_0x22c155['roleAssignedBy']=_0x2fde06['roleAssignedBy'],_0x22c155['roleAssignedAt']=_0x2fde06['roleAssignedAt']),!_0x22c155['sources']['includes'](_0x30efe0)&&_0x22c155['sources']['push'](_0x30efe0);}});}_0x1ee6a0(_0x3dab1f,'D1'),_0x1ee6a0(_0x433230,'D2'),_0x1ee6a0(_0x29e597,'Non-Participant'),_0x1ee6a0(_0x250f05,'Profile');const _0x44ec09=Array['from'](_0x57c15c['values']())['sort']((_0x21e07d,_0x279f10)=>_0x21e07d['username']['localeCompare'](_0x279f10[_0x1792ed(0x195)]));if(_0x44ec09['length']===0x0){_0x15f2a6['innerHTML']=_0x1792ed(0x14e);return;}_0x15f2a6['innerHTML']='',_0x44ec09['forEach'](_0x441682=>{const _0x42e9ff=_0x1792ed,_0x34f2d8=document['createElement']('tr');_0x34f2d8[_0x42e9ff(0x305)]['username']=_0x441682[_0x42e9ff(0x195)],_0x34f2d8[_0x42e9ff(0x305)]['roleName']=_0x441682['roleName']||'',_0x34f2d8['dataset'][_0x42e9ff(0x167)]=_0x441682['roleColor']||'#808080';const _0x16969a=_0x441682[_0x42e9ff(0x269)]?new Date(_0x441682[_0x42e9ff(0x269)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x1fedd7=_0x441682['roleName']?_0x42e9ff(0x206)+_0x441682['roleColor']+';\x20color:\x20'+getContrastColor(_0x441682[_0x42e9ff(0x167)])+_0x42e9ff(0x318)+_0x441682['roleName']+_0x42e9ff(0x394):'<span\x20class=\x22no-role\x22>None</span>';_0x34f2d8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x441682[_0x42e9ff(0x195)]+'\x20<span\x20class=\x22user-source\x22>('+_0x441682[_0x42e9ff(0x215)]['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1fedd7+_0x42e9ff(0x17c)+(_0x441682['roleAssignedBy']||'N/A')+_0x42e9ff(0x17c)+_0x16969a+_0x42e9ff(0x210)+_0x441682['username']+_0x42e9ff(0x2de)+(_0x441682[_0x42e9ff(0x351)]?_0x42e9ff(0x1da)+_0x441682['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x42e9ff(0x389),_0x15f2a6[_0x42e9ff(0x385)](_0x34f2d8);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0xefb70=>{_0xefb70['addEventListener']('click',()=>{const _0x1bfd02=_0xefb70['dataset']['username'];openRoleEditModal(_0x1bfd02);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x52f8d9=>{_0x52f8d9['addEventListener']('click',()=>{const _0x254704=a4_0x2464,_0x2cc0e7=_0x52f8d9[_0x254704(0x305)]['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x2cc0e7+'?')&&setUserRole(_0x2cc0e7,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x5f1d96=>console['error'](_0x254704(0x347),_0x5f1d96));});});}catch(_0x222f77){console[_0x1792ed(0x297)](_0x1792ed(0x1bb),_0x222f77),_0x15f2a6[_0x1792ed(0x2c9)]=_0x1792ed(0x29e);}}function openRoleEditModal(_0x567ce0){const _0x5e333f=a4_0x1edc9a;console[_0x5e333f(0x35f)]('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x567ce0);const _0x5c865f=document['getElementById']('set-role-modal'),_0x3cd71d=document['getElementById'](_0x5e333f(0x39b)),_0xcb9295=document[_0x5e333f(0x30f)](_0x5e333f(0x1b9));if(!_0x5c865f){console[_0x5e333f(0x297)]('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x5c865f);_0x3cd71d?(_0x3cd71d['value']=_0x567ce0,console['log'](_0x5e333f(0x273)+_0x567ce0)):console[_0x5e333f(0x225)](_0x5e333f(0x16a));const _0x2662c6=document[_0x5e333f(0x164)]('#users-table-body\x20tr[data-username=\x22'+_0x567ce0+'\x22]');if(_0x2662c6&&_0xcb9295){const _0x44667f=_0x2662c6[_0x5e333f(0x305)]['role'];_0xcb9295['value']=_0x44667f===_0x5e333f(0x1e0)?'':_0x44667f,console['log']('Role\x20select\x20set\x20to:\x20'+_0xcb9295[_0x5e333f(0x161)]+_0x5e333f(0x228)+_0x44667f+')');}else{if(!_0x2662c6)console[_0x5e333f(0x225)](_0x5e333f(0x244)+_0x567ce0+'\x20not\x20found.');if(!_0xcb9295)console[_0x5e333f(0x225)](_0x5e333f(0x2ac));if(_0xcb9295)_0xcb9295['value']='';}console[_0x5e333f(0x35f)](_0x5e333f(0x26f)),_0x5c865f[_0x5e333f(0x1ad)][_0x5e333f(0x143)](_0x5e333f(0x2e8));const _0x90bdc6=document['getElementById']('cancel-role-btn');_0x90bdc6?(console[_0x5e333f(0x35f)]('Attaching\x20cancel\x20button\x20listener.'),_0x90bdc6['removeEventListener']('click',closeModalHandler),_0x90bdc6['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console[_0x5e333f(0x35f)]('Attaching\x20background\x20click\x20listener.'),_0x5c865f['removeEventListener']('click',closeModalBackgroundHandler),_0x5c865f[_0x5e333f(0x16b)]('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x18d459){_0x18d459['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x2efc03=a4_0x1edc9a,_0x86d129=document['getElementById']('set-role-modal');_0x86d129&&(_0x86d129['classList']['remove']('active'),_0x86d129[_0x2efc03(0x321)]('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x4f1b14=a4_0x1edc9a,_0x120e81=document['getElementById']('user-search')?.[_0x4f1b14(0x161)][_0x4f1b14(0x300)]()||'',_0x1450cb=document['getElementById']('role-filter')?.['value']||'all',_0x4960f8=document['querySelectorAll']('#users-table-body\x20tr');let _0x48ab9a=0x0;_0x4960f8[_0x4f1b14(0x304)](_0x13abb9=>{const _0x57ee38=_0x4f1b14;if(_0x13abb9[_0x57ee38(0x164)](_0x57ee38(0x25a))||_0x13abb9['querySelector']('.empty-state')||_0x13abb9['querySelector']('.error-state'))return;const _0x574d18=_0x13abb9['dataset']['username']?.['toLowerCase']()||'',_0x4fd98b=_0x13abb9['dataset']['role']||_0x57ee38(0x1e0),_0x78b8f1=_0x574d18['includes'](_0x120e81),_0x4486de=_0x1450cb==='all'||_0x4fd98b===_0x1450cb;_0x78b8f1&&_0x4486de?(_0x13abb9['style'][_0x57ee38(0x18f)]='',_0x48ab9a++):_0x13abb9['style'][_0x57ee38(0x18f)]=_0x57ee38(0x1e0);});if(_0x48ab9a===0x0&&_0x4960f8['length']>0x0){const _0x39256b=document['getElementById']('users-table-body');if(_0x39256b){if(!_0x39256b[_0x4f1b14(0x164)]('.no-results')){const _0x6fd7fe=document['createElement']('tr');_0x6fd7fe['classList']['add']('no-results'),_0x6fd7fe[_0x4f1b14(0x2c9)]=_0x4f1b14(0x1ec),_0x39256b['appendChild'](_0x6fd7fe);}}}else{const _0x45f66c=document['querySelector']('.no-results');_0x45f66c&&_0x45f66c[_0x4f1b14(0x398)]();}}function setupManageArticlesSection(){const _0x35a393=a4_0x1edc9a,_0x5c143c=document['getElementById']('load-articles-data');_0x5c143c&&_0x5c143c[_0x35a393(0x16b)](_0x35a393(0x1f0),function(){const _0x3df4a4=_0x35a393;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x3a5635=a4_0x2464;this['classList']['remove'](_0x3a5635(0x38e)),this[_0x3a5635(0x2c9)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})[_0x3df4a4(0x1b5)](_0xfab05a=>{const _0x772b6f=_0x3df4a4;console['error']('Error\x20loading\x20articles:',_0xfab05a),this[_0x772b6f(0x1ad)][_0x772b6f(0x398)]('loading'),this['innerHTML']=_0x772b6f(0x1c0),setTimeout(()=>{const _0x5ba7fb=_0x772b6f;this['innerHTML']=_0x5ba7fb(0x1b1);},0xbb8);});});const _0x217b43=document['getElementById'](_0x35a393(0x30c));_0x217b43?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x217b43['style']['display']='block',_0x217b43[_0x35a393(0x16b)]('click',()=>{openArticleModal();})):console['error'](_0x35a393(0x32b));const _0x4f21d4=document[_0x35a393(0x30f)]('article-form');_0x4f21d4&&_0x4f21d4[_0x35a393(0x16b)]('submit',_0x1d95af=>{const _0x1bffaa=_0x35a393;_0x1d95af[_0x1bffaa(0x1ca)](),saveArticle();});const _0xe1382b=document['getElementById']('cancel-article-btn');_0xe1382b&&_0xe1382b['addEventListener']('click',()=>{closeArticleModal();});const _0xc90e0=document['querySelector']('#article-modal\x20.close-btn');_0xc90e0&&_0xc90e0['addEventListener']('click',()=>{closeArticleModal();});const _0x31c72d=document['getElementById'](_0x35a393(0x2bf));_0x31c72d&&_0x31c72d['addEventListener']('click',_0x46ce72=>{_0x46ce72['target']===_0x31c72d&&closeArticleModal();});}async function loadArticles(){const _0x16629a=a4_0x1edc9a,_0x53ca9b=document['getElementById']('articles-table-body');if(!_0x53ca9b)return;_0x53ca9b['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x473ffe=collection(db,_0x16629a(0x154)),_0x4df8f8=query(_0x473ffe,orderBy('createdAt',_0x16629a(0x352))),_0x280895=await getDocs(_0x4df8f8);if(_0x280895['empty']){_0x53ca9b[_0x16629a(0x2c9)]=_0x16629a(0x12d);return;}_0x53ca9b['innerHTML']='',_0x280895[_0x16629a(0x304)](_0x378285=>{const _0xdce35e=_0x16629a,_0x217e38=_0x378285['data'](),_0x37e50c=document['createElement']('tr'),_0x313fa2=_0x217e38[_0xdce35e(0x34b)]?new Date(_0x217e38[_0xdce35e(0x34b)]['seconds']*0x3e8)[_0xdce35e(0x22e)]():'N/A';_0x37e50c[_0xdce35e(0x2c9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x217e38[_0xdce35e(0x17b)]||'Untitled')+_0xdce35e(0x17c)+(_0x217e38[_0xdce35e(0x1fa)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x313fa2+_0xdce35e(0x2b8)+_0x378285['id']+_0xdce35e(0x21d)+_0x378285['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x53ca9b[_0xdce35e(0x385)](_0x37e50c);}),setupArticleActionButtons();}catch(_0x360a47){console[_0x16629a(0x297)](_0x16629a(0x27b),_0x360a47),_0x53ca9b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x360a47['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x4fb198=a4_0x1edc9a;document['querySelectorAll']('.edit-article-btn')['forEach'](_0x165a3b=>{const _0x499095=a4_0x2464;_0x165a3b[_0x499095(0x16b)](_0x499095(0x1f0),async _0x5d9617=>{const _0x427268=_0x499095,_0xd0d96f=_0x5d9617['currentTarget'][_0x427268(0x305)]['id'];openArticleModal(_0xd0d96f);});}),document['querySelectorAll']('.delete-article-btn')[_0x4fb198(0x304)](_0x47eec6=>{const _0x56d899=_0x4fb198;_0x47eec6['addEventListener'](_0x56d899(0x1f0),async _0xa65433=>{const _0x2fd0c8=_0x56d899,_0x395591=_0xa65433['currentTarget'][_0x2fd0c8(0x305)]['id'];confirmDeleteArticle(_0x395591);});});}function openArticleModal(_0x527557=null){const _0x37b486=a4_0x1edc9a,_0x3319ac=document[_0x37b486(0x30f)]('article-modal'),_0x57b512=document['getElementById'](_0x37b486(0x1f1)),_0xe4dd71=document['getElementById']('article-form'),_0x330fea=document[_0x37b486(0x30f)]('article-id');_0xe4dd71['reset'](),_0x330fea['value']='';if(_0x527557)_0x57b512[_0x37b486(0x261)]=_0x37b486(0x2f2),_0x330fea[_0x37b486(0x161)]=_0x527557,loadArticleData(_0x527557);else{_0x57b512[_0x37b486(0x261)]=_0x37b486(0x1a8);const _0x277c67=auth['currentUser'];if(_0x277c67){const _0x304c2e=document['getElementById']('article-author');if(_0x304c2e&&_0x277c67['displayName'])_0x304c2e['value']=_0x277c67['displayName'];else _0x304c2e&&(_0x304c2e[_0x37b486(0x161)]=_0x277c67[_0x37b486(0x361)]);}}_0x3319ac['classList'][_0x37b486(0x143)]('active');}async function loadArticleData(_0x2f4778){const _0x58a193=a4_0x1edc9a;try{const _0x2dd33a=doc(db,'articles',_0x2f4778),_0x2c796e=await getDoc(_0x2dd33a);if(!_0x2c796e['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x113350=_0x2c796e['data']();document['getElementById']('article-title')['value']=_0x113350['title']||'',document['getElementById'](_0x58a193(0x36e))[_0x58a193(0x161)]=_0x113350['author']||'',document['getElementById']('article-image-url')['value']=_0x113350['imageUrl']||'',document['getElementById']('article-content')['value']=_0x113350['content']||'';}catch(_0x4be49c){console['error'](_0x58a193(0x330),_0x4be49c),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x5f0cf0=a4_0x1edc9a;try{const _0x2bbf75=document[_0x5f0cf0(0x30f)]('article-id')['value'],_0x5cd3d9=document[_0x5f0cf0(0x30f)]('article-title')['value'][_0x5f0cf0(0x2d7)](),_0x512c0a=document['getElementById']('article-author')['value'][_0x5f0cf0(0x2d7)](),_0x382248=document['getElementById'](_0x5f0cf0(0x146))[_0x5f0cf0(0x161)]['trim'](),_0x494a1a=document['getElementById']('article-content')['value']['trim']();if(!_0x5cd3d9||!_0x494a1a){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x5c04a7=auth['currentUser'];if(!_0x5c04a7){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles',_0x5f0cf0(0x297));return;}const _0x4ed54f={'title':_0x5cd3d9,'author':_0x512c0a,'imageUrl':_0x382248||null,'content':_0x494a1a,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5c04a7['email']};!_0x2bbf75?(_0x4ed54f['createdAt']=serverTimestamp(),_0x4ed54f['createdBy']=_0x5c04a7['email'],await addDoc(collection(db,_0x5f0cf0(0x154)),_0x4ed54f),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,_0x5f0cf0(0x154),_0x2bbf75),_0x4ed54f),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x4e882f){console['error']('Error\x20saving\x20article:',_0x4e882f),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x4e882f['message'],_0x5f0cf0(0x297));}}function closeArticleModal(){const _0x4a2870=a4_0x1edc9a,_0xae23ff=document['getElementById'](_0x4a2870(0x2bf));_0xae23ff&&_0xae23ff[_0x4a2870(0x1ad)]['remove']('active');}async function confirmDeleteArticle(_0x5ae062){const _0x2db367=a4_0x1edc9a;if(confirm(_0x2db367(0x207)))try{await deleteDoc(doc(db,'articles',_0x5ae062)),loadArticles(),showNotification(_0x2db367(0x2c0),'success');}catch(_0x86f58a){console['error'](_0x2db367(0x1e4),_0x86f58a),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x86f58a[_0x2db367(0x173)],_0x2db367(0x297));}}function setupTrophyManagementSection(){const _0x5e313b=a4_0x1edc9a,_0x333e12=document['getElementById']('load-trophies-data');_0x333e12&&_0x333e12[_0x5e313b(0x16b)]('click',function(){const _0x4959f2=_0x5e313b;this['classList']['add']('loading'),this[_0x4959f2(0x2c9)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x586949=document['getElementById']('assign-trophy-image');_0x586949&&(_0x586949['onerror']=function(){const _0x34a781=_0x4959f2;this[_0x34a781(0x2be)]=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x47c12f=_0x4959f2;this['classList'][_0x47c12f(0x398)](_0x47c12f(0x38e)),this[_0x47c12f(0x2c9)]=_0x47c12f(0x237);})['catch'](_0x5b73d6=>{const _0x483a33=_0x4959f2;console[_0x483a33(0x297)]('Error\x20loading\x20trophies:',_0x5b73d6),this['classList'][_0x483a33(0x398)]('loading'),this[_0x483a33(0x2c9)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x5a155f=document['getElementById'](_0x5e313b(0x198));_0x5a155f&&_0x5a155f['addEventListener']('click',()=>{openTrophyModal();});const _0x420e1b=document['getElementById']('trophy-form');_0x420e1b&&_0x420e1b['addEventListener']('submit',_0x3472d9=>{const _0x507ddd=_0x5e313b;_0x3472d9[_0x507ddd(0x1ca)](),saveTrophyDefinition();});const _0x378e01=document['getElementById']('cancel-trophy-btn');_0x378e01&&_0x378e01['addEventListener']('click',()=>{closeTrophyModal();});document[_0x5e313b(0x254)]('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x207493=>{_0x207493['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0xcc0507=document[_0x5e313b(0x30f)]('trophy-modal');_0xcc0507&&_0xcc0507[_0x5e313b(0x16b)](_0x5e313b(0x1f0),_0x31324d=>{_0x31324d['target']===_0xcc0507&&closeTrophyModal();});const _0x40d973=document['getElementById']('assign-trophy-modal');_0x40d973&&_0x40d973[_0x5e313b(0x16b)]('click',_0x3b93f5=>{_0x3b93f5['target']===_0x40d973&&closeAssignTrophyModal();});const _0x593ceb=document['getElementById']('assign-trophy-form');_0x593ceb&&_0x593ceb['addEventListener']('submit',_0xdeb422=>{_0xdeb422['preventDefault'](),assignTrophyToPlayer();});const _0x42ef31=document['getElementById']('cancel-assign-btn');_0x42ef31&&_0x42ef31[_0x5e313b(0x16b)]('click',()=>{closeAssignTrophyModal();});const _0x5e6fd5=document['getElementById'](_0x5e313b(0x1f3));_0x5e6fd5&&(_0x5e6fd5['addEventListener'](_0x5e313b(0x31f),updateTrophyImagePreview),_0x5e6fd5['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x402e51=a4_0x1edc9a,_0x313173=document['getElementById']('trophy-image-url')['value']['trim'](),_0x59572d=document[_0x402e51(0x30f)]('trophy-image-preview');if(!_0x59572d){const _0x3cadf6=document[_0x402e51(0x30f)]('trophy-image-url')['closest']('.form-group'),_0x3c89b0=document['createElement']('div');_0x3c89b0['id']=_0x402e51(0x2f0),_0x3c89b0['className']='trophy-preview-container',_0x3cadf6['appendChild'](_0x3c89b0);const _0x203efc=document['createElement']('img');_0x203efc['id']='trophy-preview-img',_0x203efc['alt']='Trophy\x20Preview',_0x203efc['onerror']=function(){const _0x2b1670=_0x402e51;this[_0x2b1670(0x2be)]=DEFAULT_TROPHY_IMAGE,this['classList']['add'](_0x2b1670(0x297));},_0x3c89b0[_0x402e51(0x385)](_0x203efc);}const _0x52ade1=document['getElementById']('trophy-preview-img');_0x313173?(_0x52ade1['src']=_0x313173,_0x52ade1['style']['display']=_0x402e51(0x140),_0x52ade1['classList']['remove']('error')):(_0x52ade1['src']=DEFAULT_TROPHY_IMAGE,_0x52ade1['style'][_0x402e51(0x18f)]=_0x402e51(0x140));}async function loadTrophyDefinitions(){const _0x4bdeaf=a4_0x1edc9a,_0x1e9a90=document[_0x4bdeaf(0x30f)]('trophies-table-body');if(!_0x1e9a90)return;_0x1e9a90['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x2ae1cb=collection(db,'trophyDefinitions'),_0x2efaf9=query(_0x2ae1cb,orderBy('createdAt','desc')),_0x136db4=await getDocs(_0x2efaf9);if(_0x136db4[_0x4bdeaf(0x212)]){_0x1e9a90['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x1e9a90[_0x4bdeaf(0x2c9)]='',_0x136db4['forEach'](_0x5c099a=>{const _0x216456=_0x4bdeaf,_0x4a2f2a=_0x5c099a['data'](),_0x1df84a=document['createElement']('tr'),_0x14dbde=_0x4a2f2a[_0x216456(0x34b)]?new Date(_0x4a2f2a['createdAt']['seconds']*0x3e8)[_0x216456(0x22e)]():_0x216456(0x2cb);_0x1df84a['innerHTML']=_0x216456(0x1b7)+(_0x4a2f2a['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4a2f2a['name']+_0x216456(0x2cf)+DEFAULT_TROPHY_IMAGE+_0x216456(0x262)+(_0x4a2f2a['name']||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x4a2f2a['rarity']||_0x216456(0x2a0))+'\x22>'+(_0x4a2f2a['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x14dbde+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x5c099a['id']+_0x216456(0x19b)+_0x5c099a['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x5c099a['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1e9a90['appendChild'](_0x1df84a);}),setupTrophyActionButtons();}catch(_0x1df485){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x1df485),_0x1e9a90[_0x4bdeaf(0x2c9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x1df485['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x151473=a4_0x1edc9a;document['querySelectorAll'](_0x151473(0x27f))['forEach'](_0x3d0420=>{_0x3d0420['addEventListener']('click',_0x1c0f0f=>{const _0x28862e=a4_0x2464,_0x2262d4=_0x1c0f0f['currentTarget'][_0x28862e(0x305)]['id'];openTrophyModal(_0x2262d4);});}),document['querySelectorAll'](_0x151473(0x363))['forEach'](_0x5b4fa0=>{const _0x388ab4=_0x151473;_0x5b4fa0['addEventListener'](_0x388ab4(0x1f0),_0x59fe17=>{const _0x83ca08=_0x59fe17['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x83ca08);});}),document['querySelectorAll']('.delete-trophy-btn')[_0x151473(0x304)](_0x3c6e9f=>{_0x3c6e9f['addEventListener']('click',_0x1f5c15=>{const _0x58f9b4=_0x1f5c15['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x58f9b4);});});}function openTrophyModal(_0x16d6fe=null){const _0x5ea2f2=a4_0x1edc9a,_0x155bad=document['getElementById']('trophy-modal'),_0x3cddb0=document['getElementById'](_0x5ea2f2(0x2e5)),_0x297529=document[_0x5ea2f2(0x30f)](_0x5ea2f2(0x317)),_0x3b89d9=document['getElementById'](_0x5ea2f2(0x306));_0x297529['reset'](),_0x3b89d9[_0x5ea2f2(0x161)]='';const _0x530c4c=document['getElementById'](_0x5ea2f2(0x180));_0x530c4c&&(_0x530c4c['src']=DEFAULT_TROPHY_IMAGE,_0x530c4c[_0x5ea2f2(0x1ad)][_0x5ea2f2(0x398)](_0x5ea2f2(0x297))),_0x16d6fe?(_0x3cddb0['textContent']=_0x5ea2f2(0x1e8),_0x3b89d9[_0x5ea2f2(0x161)]=_0x16d6fe,loadTrophyData(_0x16d6fe)):_0x3cddb0[_0x5ea2f2(0x261)]='Create\x20New\x20Trophy',_0x155bad['classList']['add']('active');}async function loadTrophyData(_0x46a65d){const _0x2f17ac=a4_0x1edc9a;try{const _0x26daa6=doc(db,_0x2f17ac(0x35a),_0x46a65d),_0x4bd15a=await getDoc(_0x26daa6);if(!_0x4bd15a['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x5993df=_0x4bd15a['data']();document['getElementById']('trophy-name')['value']=_0x5993df[_0x2f17ac(0x2ad)]||'',document['getElementById']('trophy-description')['value']=_0x5993df['description']||'',document[_0x2f17ac(0x30f)]('trophy-image-url')['value']=_0x5993df['image']||'',document[_0x2f17ac(0x30f)](_0x2f17ac(0x1e2))[_0x2f17ac(0x161)]=_0x5993df['rarity']||'common',updateTrophyImagePreview();}catch(_0x4d814a){console['error']('Error\x20loading\x20trophy\x20data:',_0x4d814a),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x2f17ac(0x297));}}async function saveTrophyDefinition(){const _0x4e6bc7=a4_0x1edc9a;try{const _0x377c50=document['getElementById']('trophy-id')[_0x4e6bc7(0x161)],_0x5eebf4=document['getElementById']('trophy-name')[_0x4e6bc7(0x161)]['trim'](),_0x20b394=document[_0x4e6bc7(0x30f)]('trophy-description')[_0x4e6bc7(0x161)]['trim'](),_0x269cf6=document['getElementById']('trophy-image-url')['value']['trim'](),_0x351165=document[_0x4e6bc7(0x30f)]('trophy-rarity')['value'];if(!_0x5eebf4||!_0x20b394||!_0x269cf6){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x107fb4=auth['currentUser'];if(!_0x107fb4){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x272d70={'name':_0x5eebf4,'description':_0x20b394,'image':_0x269cf6,'rarity':_0x351165,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x107fb4[_0x4e6bc7(0x361)]};!_0x377c50?(_0x272d70[_0x4e6bc7(0x34b)]=serverTimestamp(),_0x272d70[_0x4e6bc7(0x2ff)]=_0x107fb4['email'],await addDoc(collection(db,'trophyDefinitions'),_0x272d70),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x377c50),_0x272d70),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x53e3e3){console['error']('Error\x20saving\x20trophy:',_0x53e3e3),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x53e3e3['message'],'error');}}function closeTrophyModal(){const _0x46d9f4=a4_0x1edc9a,_0xb99954=document[_0x46d9f4(0x30f)](_0x46d9f4(0x1ae));_0xb99954&&_0xb99954['classList']['remove'](_0x46d9f4(0x2e8));}async function confirmDeleteTrophy(_0x5dae96){const _0x49b342=a4_0x1edc9a;if(!_0x5dae96){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x35ac68=auth[_0x49b342(0x155)];if(!_0x35ac68){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log'](_0x49b342(0x27c)+_0x5dae96),await deleteDoc(doc(db,'trophyDefinitions',_0x5dae96)),showNotification(_0x49b342(0x15d),'success'),loadTrophyDefinitions();}catch(_0x1f5f3e){console[_0x49b342(0x297)](_0x49b342(0x28d),_0x1f5f3e),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x1f5f3e['message'],'error');}}async function openAssignTrophyModal(_0x163b48){const _0x10226e=a4_0x1edc9a;try{const _0x3f9aef=doc(db,'trophyDefinitions',_0x163b48),_0x2ec433=await getDoc(_0x3f9aef);if(!_0x2ec433['exists']()){showNotification('Trophy\x20not\x20found',_0x10226e(0x297));return;}const _0x4cc99a=_0x2ec433['data']();document[_0x10226e(0x30f)]('assign-trophy-id')['value']=_0x163b48,document[_0x10226e(0x30f)]('assign-trophy-name')['value']=_0x4cc99a[_0x10226e(0x2ad)],document['getElementById']('assign-trophy-image')[_0x10226e(0x2be)]=_0x4cc99a[_0x10226e(0x281)]||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x4cc99a['name']||'Unnamed\x20Trophy',document['getElementById'](_0x10226e(0x14c))['textContent']=_0x4cc99a['description']||'No\x20description';const _0x1ab4eb=document['getElementById'](_0x10226e(0x13c));_0x1ab4eb['textContent']=_0x4cc99a[_0x10226e(0x333)]||'common',_0x1ab4eb[_0x10226e(0x1a3)]='trophy-rarity\x20'+(_0x4cc99a[_0x10226e(0x333)]||'common');const _0x48d379=document[_0x10226e(0x30f)](_0x10226e(0x2fa));_0x48d379[_0x10226e(0x1ad)]['add']('active');}catch(_0x4ff12b){console[_0x10226e(0x297)]('Error\x20opening\x20assign\x20trophy\x20modal:',_0x4ff12b),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x36c122=a4_0x1edc9a,_0x9d4edf=document[_0x36c122(0x30f)]('assign-trophy-modal');_0x9d4edf&&_0x9d4edf['classList']['remove']('active');}async function assignTrophyToPlayer(){const _0x4f291b=a4_0x1edc9a;try{const _0x2cb5d5=document[_0x4f291b(0x30f)]('assign-trophy-id')[_0x4f291b(0x161)],_0x384445=document['getElementById']('assign-trophy-name')['value'],_0x37d442=document['getElementById'](_0x4f291b(0x298))['value']['trim'](),_0x13b3a4=document['querySelector'](_0x4f291b(0x2e7))['value'];if(!_0x2cb5d5||!_0x37d442){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x3df8c5=auth['currentUser'];if(!_0x3df8c5){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x4231b0=null,_0x387877=null,_0x2bdf00=null;if(_0x13b3a4===_0x4f291b(0x2dc)){const _0x1742f1=collection(db,'nonParticipants'),_0x30aff5=query(_0x1742f1,where('username','==',_0x37d442)),_0x1fa9ac=await getDocs(_0x30aff5);!_0x1fa9ac['empty']&&(_0x4231b0=_0x1fa9ac['docs'][0x0],_0x387877=_0x4231b0['id'],_0x2bdf00=_0x4231b0['data']());}else{const _0x5146d8=_0x13b3a4==='D1'?'players':_0x13b3a4==='D2'?_0x4f291b(0x26c):'playersD3',_0x55bf70=collection(db,_0x5146d8),_0x2addf1=query(_0x55bf70,where('username','==',_0x37d442)),_0x3c1801=await getDocs(_0x2addf1);!_0x3c1801['empty']&&(_0x4231b0=_0x3c1801[_0x4f291b(0x313)][0x0],_0x387877=_0x4231b0['id'],_0x2bdf00=_0x4231b0['data']());}if(!_0x4231b0){showNotification('Player\x20\x22'+_0x37d442+'\x22\x20not\x20found\x20in\x20'+(_0x13b3a4==='non-participant'?'non-participants':_0x13b3a4+'\x20ladder'),_0x4f291b(0x297));return;}const _0x5b7d42=collection(db,'userTrophies'),_0x22bcf9=query(_0x5b7d42,where('userId','==',_0x387877),where(_0x4f291b(0x159),'==',_0x2cb5d5)),_0x4ed20c=await getDocs(_0x22bcf9);if(!_0x4ed20c['empty']){showNotification('Player\x20\x22'+_0x37d442+_0x4f291b(0x2d0),_0x4f291b(0x19e));return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x387877,'playerUsername':_0x37d442,'trophyId':_0x2cb5d5,'awardedAt':serverTimestamp(),'awardedBy':_0x3df8c5['email'],'ladder':_0x13b3a4}),showNotification('Trophy\x20\x22'+_0x384445+'\x22\x20awarded\x20to\x20'+_0x37d442,'success'),closeAssignTrophyModal();}catch(_0xeecd51){console['error']('Error\x20assigning\x20trophy:',_0xeecd51),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0xeecd51[_0x4f291b(0x173)],'error');}}function setupInactivePlayersSection(){const _0x5470e3=a4_0x1edc9a,_0x413bbe=document['getElementById']('inactive-days-filter');_0x413bbe&&_0x413bbe['addEventListener']('change',function(){const _0x1e49e4=a4_0x2464,_0x120d70=document['getElementById'](_0x1e49e4(0x138));if(_0x120d70)_0x120d70['click']();});const _0x41dbb3=document[_0x5470e3(0x164)]('.ladder-switch\x20input[value=\x22D1\x22]'),_0x4a4de3=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x41dbb3&&_0x4a4de3&&(_0x41dbb3['addEventListener']('change',function(){const _0x426a99=_0x5470e3;if(this['checked']){currentLadder='D1';if(document['getElementById'](_0x426a99(0x226))['style']['display']!=='none'){const _0x434ed3=document['getElementById']('load-inactive-players-data');if(_0x434ed3)_0x434ed3['click']();}}}),_0x4a4de3['addEventListener']('change',function(){const _0xa6b12c=_0x5470e3;if(this['checked']){currentLadder='D2';if(document[_0xa6b12c(0x30f)](_0xa6b12c(0x226))['style'][_0xa6b12c(0x18f)]!==_0xa6b12c(0x1e0)){const _0x1dd0c3=document[_0xa6b12c(0x30f)]('load-inactive-players-data');if(_0x1dd0c3)_0x1dd0c3['click']();}}}));const _0x1976a5=document[_0x5470e3(0x30f)]('inactive-players-search');_0x1976a5&&_0x1976a5['addEventListener'](_0x5470e3(0x31f),debounce(function(){const _0x123861=_0x1976a5['value']['toLowerCase'](),_0x5b4b8d=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x5b4b8d['forEach'](_0x59f9d1=>{const _0x53db46=a4_0x2464;if(_0x59f9d1['querySelector'](_0x53db46(0x25a))||_0x59f9d1['querySelector']('.empty-state')||_0x59f9d1[_0x53db46(0x164)](_0x53db46(0x174)))return;const _0x17ead5=_0x59f9d1['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x142976=_0x59f9d1[_0x53db46(0x2ea)][0x5]?.['textContent']['toLowerCase']()||'';_0x17ead5['includes'](_0x123861)||_0x142976[_0x53db46(0x2a7)](_0x123861)?_0x59f9d1['style'][_0x53db46(0x18f)]='':_0x59f9d1['style']['display']='none';});},0x12c)),document[_0x5470e3(0x16b)]('click',function(_0x32e0e0){const _0x51c9c1=_0x5470e3;if(_0x32e0e0['target']['closest']('.view-player-btn')){const _0x31dce7=_0x32e0e0[_0x51c9c1(0x24a)][_0x51c9c1(0x236)](_0x51c9c1(0x2a5)),_0x476aaa=_0x31dce7[_0x51c9c1(0x305)][_0x51c9c1(0x195)];_0x476aaa&&alert(_0x51c9c1(0x362)+_0x476aaa+_0x51c9c1(0x22d));}}),console[_0x5470e3(0x35f)](_0x5470e3(0x1d4));}async function loadInactivePlayersData(){const _0x28f7e7=a4_0x1edc9a,_0x48f89b=document['getElementById']('inactive-players-table-body');if(!_0x48f89b)return;_0x48f89b[_0x28f7e7(0x2c9)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x3b1cf8=document['getElementById']('inactive-days-filter'),_0x5a62ad=_0x3b1cf8?parseInt(_0x3b1cf8['value'])||0x0:0x0,_0x16cdb7=collection(db,currentLadder==='D1'?_0x28f7e7(0x160):'playersD2'),_0x101f24=await getDocs(_0x16cdb7);if(_0x101f24['empty']){_0x48f89b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x39c508=[];_0x101f24['forEach'](_0xc66248=>{const _0x14d5bf=_0x28f7e7,_0x6dd311=_0xc66248[_0x14d5bf(0x2ab)]();_0x39c508['push']({..._0x6dd311,'id':_0xc66248['id'],'username':_0x6dd311['username']||'Unknown\x20Player'});}),console[_0x28f7e7(0x35f)]('Found\x20'+_0x39c508['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x33d9b3=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x107477=_0x39c508['map'](async _0x4ced1c=>{const _0x1fc2e7=_0x28f7e7;try{const _0x439542=collection(db,_0x33d9b3),_0x2971af=query(_0x439542,or(where('winnerUsername','==',_0x4ced1c['username']),where(_0x1fc2e7(0x264),'==',_0x4ced1c['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0x529206=await getDocs(_0x2971af);if(!_0x529206['empty']){const _0x3a6a1c=_0x529206['docs'][0x0]['data'](),_0x1a5196=_0x3a6a1c[_0x1fc2e7(0x25c)]?new Date(_0x3a6a1c['approvedAt']['seconds']*0x3e8):null,_0x5c5346=new Date(),_0x249a0b=_0x1a5196?Math['floor']((_0x5c5346-_0x1a5196)/(0x3e8*0x3c*0x3c*0x18)):null,_0x56789f=_0x3a6a1c[_0x1fc2e7(0x277)]===_0x4ced1c[_0x1fc2e7(0x195)]?_0x3a6a1c[_0x1fc2e7(0x264)]:_0x3a6a1c['winnerUsername'],_0x1b4b92=_0x3a6a1c['winnerUsername']===_0x4ced1c['username']?'Won':_0x1fc2e7(0x13d);return{..._0x4ced1c,'lastMatch':{'date':_0x1a5196?_0x1a5196[_0x1fc2e7(0x290)]():'N/A','opponent':_0x56789f||_0x1fc2e7(0x2ef),'result':_0x1b4b92,'timestamp':_0x1a5196||new Date(0x0),'daysSinceMatch':_0x249a0b||Number['MAX_SAFE_INTEGER']}};}else return{..._0x4ced1c,'lastMatch':{'date':_0x1fc2e7(0x38c),'opponent':_0x1fc2e7(0x2cb),'result':_0x1fc2e7(0x2cb),'timestamp':new Date(0x0),'daysSinceMatch':Number[_0x1fc2e7(0x190)]}};}catch(_0x2d13d7){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x4ced1c[_0x1fc2e7(0x195)]+':',_0x2d13d7),{..._0x4ced1c,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x3d1d05=await Promise['all'](_0x107477);_0x3d1d05['sort']((_0x54039a,_0xc40deb)=>_0xc40deb['lastMatch']['daysSinceMatch']-_0x54039a['lastMatch'][_0x28f7e7(0x19c)]);_0x5a62ad>0x0&&(_0x3d1d05=_0x3d1d05[_0x28f7e7(0x1f5)](_0x16b77e=>_0x16b77e[_0x28f7e7(0x2d2)][_0x28f7e7(0x19c)]>=_0x5a62ad));_0x48f89b['innerHTML']='';if(_0x3d1d05[_0x28f7e7(0x309)]===0x0){_0x48f89b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x3d1d05['forEach'](_0x5025ae=>{const _0x15371d=_0x28f7e7,_0x334c06=document['createElement']('tr'),_0x1b5845=_0x5025ae['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x5025ae['lastMatch'][_0x15371d(0x19c)]>0xe?'moderately-inactive':'';_0x334c06['className']=_0x1b5845,_0x334c06['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5025ae['username']+_0x15371d(0x17c)+(_0x5025ae['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5025ae['lastMatch'][_0x15371d(0x1f6)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5025ae['lastMatch']['daysSinceMatch']===Number[_0x15371d(0x190)]?'N/A':_0x5025ae['lastMatch']['daysSinceMatch'])+_0x15371d(0x17c)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5025ae[_0x15371d(0x2d2)]['date']===_0x15371d(0x38c)?'No\x20matches\x20found':_0x5025ae[_0x15371d(0x2d2)]['result']+'\x20vs\x20'+_0x5025ae[_0x15371d(0x2d2)]['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x5025ae['username']+_0x15371d(0x353),_0x48f89b['appendChild'](_0x334c06);}),console['log']('Displaying\x20'+_0x3d1d05[_0x28f7e7(0x309)]+_0x28f7e7(0x2ee));}catch(_0x24395e){console['error'](_0x28f7e7(0x282),_0x24395e),_0x48f89b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x24395e[_0x28f7e7(0x173)]+'</td></tr>';}}function setupHighlightButtons(){const _0x4ca92c=a4_0x1edc9a;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x240a39=document['getElementById'](_0x4ca92c(0x214));_0x240a39&&_0x240a39[_0x4ca92c(0x16b)]('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x4dbe38=document[_0x4ca92c(0x30f)]('create-creator-highlight-btn');_0x4dbe38&&_0x4dbe38['addEventListener'](_0x4ca92c(0x1f0),function(){const _0x243b67=_0x4ca92c;console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal(_0x243b67(0x249));});const _0x6f186e=document['getElementById']('create-achievement-highlight-btn');_0x6f186e&&_0x6f186e[_0x4ca92c(0x16b)](_0x4ca92c(0x1f0),function(){const _0x30a16d=_0x4ca92c;console['log'](_0x30a16d(0x270)),openHighlightModal(_0x30a16d(0x148));});}function openHighlightModal(_0x1a562c='match'){const _0x3a39de=a4_0x1edc9a;console[_0x3a39de(0x35f)]('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x1a562c);const _0x37ed28=document['getElementById']('highlight-modal'),_0x3581d0=document[_0x3a39de(0x30f)]('highlight-form'),_0x4189d1=document['getElementById']('highlight-modal-title'),_0x4f853c=document['getElementById'](_0x3a39de(0x1bd));if(!_0x37ed28||!_0x3581d0||!_0x4189d1){console[_0x3a39de(0x297)](_0x3a39de(0x216));return;}_0x3581d0['reset'](),_0x4f853c['value']='';const _0x16316c=['match','creator','achievement'],_0x58704f=!_0x16316c['includes'](_0x1a562c);if(_0x58704f){const _0x2dde79=_0x1a562c;_0x4f853c[_0x3a39de(0x161)]=_0x2dde79,_0x4189d1['textContent']='Loading...',loadHighlightDataAdmin(_0x2dde79);}else{const _0x4214d9=_0x1a562c;document['getElementById']('highlight-type')['value']=_0x4214d9,_0x4189d1[_0x3a39de(0x261)]='Create\x20New\x20'+getHighlightTypeName(_0x4214d9),toggleHighlightFields(_0x4214d9);const _0x1f6e1b=auth[_0x3a39de(0x155)];_0x1f6e1b&&document['getElementById']('highlight-submitted-by')&&(document['getElementById'](_0x3a39de(0x359))['value']=_0x1f6e1b[_0x3a39de(0x2a8)]||_0x1f6e1b['email']);}_0x37ed28['classList']['add']('active');}function toggleHighlightFields(_0x21031d){const _0x32bd8f=a4_0x1edc9a;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x21031d);const _0x215b06=document['getElementById']('highlight-form');if(!_0x215b06)return;const _0x38566c=_0x215b06['querySelectorAll']('.form-group,\x20.form-row');_0x38566c['forEach'](_0x26c226=>_0x26c226[_0x32bd8f(0x13e)][_0x32bd8f(0x18f)]='none');const _0x3107a4=document['getElementById'](_0x32bd8f(0x23c));if(_0x3107a4)_0x3107a4['style'][_0x32bd8f(0x18f)]='none';const _0x34975f=['highlight-title-container',_0x32bd8f(0x17f),'highlight-submitted-by-container'];_0x34975f['forEach'](_0x11d887=>{const _0x1fda91=document['getElementById'](_0x11d887);if(_0x1fda91)_0x1fda91['style']['display']='block';});if(_0x21031d==='match'){const _0x6f5a3c=['highlight-video-container','highlight-match-info-container','highlight-map-container',_0x32bd8f(0x367),_0x32bd8f(0x292),'highlight-match-link-container'];_0x6f5a3c[_0x32bd8f(0x304)](_0x57babc=>{const _0x23fb88=_0x32bd8f,_0x1bd44b=document['getElementById'](_0x57babc);_0x1bd44b&&(_0x57babc==='highlight-players-container'?_0x1bd44b['style'][_0x23fb88(0x18f)]='flex':_0x1bd44b['style']['display']=_0x23fb88(0x140));});const _0x1e118e=document['getElementById']('highlight-video-id');if(_0x1e118e){_0x1e118e['required']=!![];const _0x338330=_0x1e118e['previousElementSibling'];if(_0x338330)_0x338330[_0x32bd8f(0x2c9)]=_0x32bd8f(0x1a5);}if(_0x3107a4)_0x3107a4[_0x32bd8f(0x13e)]['display']='block';updateHighlightVideoPreview();}else{if(_0x21031d===_0x32bd8f(0x249)){const _0x4b9094=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x4b9094['forEach'](_0x33a5fb=>{const _0x306804=_0x32bd8f,_0x23630e=document['getElementById'](_0x33a5fb);if(_0x23630e)_0x23630e[_0x306804(0x13e)]['display']=_0x306804(0x140);});const _0x1ad7c1=document['getElementById']('highlight-video-id');if(_0x1ad7c1){_0x1ad7c1['required']=![];const _0x2bf30e=_0x1ad7c1[_0x32bd8f(0x23b)];if(_0x2bf30e)_0x2bf30e['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x21031d==='achievement'){const _0x543df2=[_0x32bd8f(0x200),'highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container',_0x32bd8f(0x17a),'highlight-video-container'];_0x543df2[_0x32bd8f(0x304)](_0x57955e=>{const _0x45f1ae=_0x32bd8f,_0x520bbf=document[_0x45f1ae(0x30f)](_0x57955e);if(_0x520bbf)_0x520bbf[_0x45f1ae(0x13e)]['display']=_0x45f1ae(0x140);});const _0x56d67c=document[_0x32bd8f(0x30f)](_0x32bd8f(0x32e));if(_0x56d67c){_0x56d67c['required']=![];const _0x5e726a=_0x56d67c['previousElementSibling'];if(_0x5e726a)_0x5e726a['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x3a6712){const _0x847e3a=a4_0x1edc9a;try{const _0x4ef27c=doc(db,_0x847e3a(0x150),_0x3a6712),_0x32aadc=await getDoc(_0x4ef27c);if(!_0x32aadc[_0x847e3a(0x310)]()){showNotification('Highlight\x20not\x20found','error');return;}const _0x308b0f=_0x32aadc['data'](),_0x500a62=_0x308b0f['type']||_0x847e3a(0x2fe);document['getElementById']('highlight-modal-title')[_0x847e3a(0x261)]=_0x847e3a(0x1b0)+getHighlightTypeName(_0x500a62),document['getElementById']('highlight-type')['value']=_0x500a62,toggleHighlightFields(_0x500a62),document['getElementById']('highlight-title')['value']=_0x308b0f['title']||'',document['getElementById'](_0x847e3a(0x194))['value']=_0x308b0f[_0x847e3a(0x2ba)]||'',document[_0x847e3a(0x30f)](_0x847e3a(0x359))[_0x847e3a(0x161)]=_0x308b0f['submittedBy']||'';_0x308b0f['videoId']&&(document[_0x847e3a(0x30f)]('highlight-video-id')[_0x847e3a(0x161)]=_0x308b0f['videoId'],updateHighlightVideoPreview());if(_0x500a62==='match'){document['getElementById']('highlight-match-info')[_0x847e3a(0x161)]=_0x308b0f['matchInfo']||'',document[_0x847e3a(0x30f)]('highlight-map')['value']=_0x308b0f['map']||'';if(_0x308b0f['matchDate']){const _0x30b383=new Date(_0x308b0f['matchDate']['seconds']*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x30b383['toISOString']()[_0x847e3a(0x13f)]('T')[0x0];}document['getElementById'](_0x847e3a(0x141))['value']=_0x308b0f['winnerName']||'',document[_0x847e3a(0x30f)]('highlight-winner-score')['value']=_0x308b0f['winnerScore']||'',document[_0x847e3a(0x30f)](_0x847e3a(0x2df))['value']=_0x308b0f[_0x847e3a(0x335)]||'',document['getElementById'](_0x847e3a(0x336))[_0x847e3a(0x161)]=_0x308b0f['loserScore']||'',document['getElementById'](_0x847e3a(0x272))['value']=_0x308b0f['matchLink']||'';}else{if(_0x500a62==='creator')document['getElementById']('highlight-map')['value']=_0x308b0f['map']||'',document[_0x847e3a(0x30f)]('highlight-map-creator')['value']=_0x308b0f['mapCreator']||'',document[_0x847e3a(0x30f)]('highlight-map-version')['value']=_0x308b0f['mapVersion']||'',document[_0x847e3a(0x30f)]('highlight-creator-image')[_0x847e3a(0x161)]=_0x308b0f[_0x847e3a(0x255)]||'';else _0x500a62==='achievement'&&(document[_0x847e3a(0x30f)](_0x847e3a(0x15a))[_0x847e3a(0x161)]=_0x308b0f['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')[_0x847e3a(0x161)]=_0x308b0f['achievementType']||'',document['getElementById'](_0x847e3a(0x179))['value']=_0x308b0f[_0x847e3a(0x2a9)]||'',document[_0x847e3a(0x30f)]('highlight-player-profile')['value']=_0x308b0f[_0x847e3a(0x168)]||'',document[_0x847e3a(0x30f)]('highlight-achievement-image')['value']=_0x308b0f[_0x847e3a(0x23e)]||'');}}catch(_0x15ef02){console['error']('Error\x20loading\x20highlight:',_0x15ef02),showNotification('Error\x20loading\x20highlight:\x20'+_0x15ef02['message'],'error');}}async function saveHighlight(){const _0x455c94=a4_0x1edc9a;try{const _0x5e8d8b=document['getElementById']('highlight-id')?.['value']||'',_0x2b8b36=document['getElementById']('highlight-type')?.['value']||'match',_0x5c3d56={'title':document['getElementById']('highlight-title')?.['value']?.[_0x455c94(0x2d7)]()||'','description':document['getElementById']('highlight-description')?.[_0x455c94(0x161)]?.[_0x455c94(0x2d7)]()||'','submittedBy':document['getElementById'](_0x455c94(0x359))?.['value']?.[_0x455c94(0x2d7)]()||'','videoId':document[_0x455c94(0x30f)]('highlight-video-id')?.['value']?.[_0x455c94(0x2d7)]()||null,'type':_0x2b8b36};if(!_0x5c3d56[_0x455c94(0x17b)]){showNotification('Title\x20is\x20required','error');return;}if(_0x2b8b36==='match'){_0x5c3d56['matchInfo']=document['getElementById'](_0x455c94(0x334))?.['value']?.[_0x455c94(0x2d7)]()||'',_0x5c3d56['map']=document[_0x455c94(0x30f)](_0x455c94(0x20f))?.['value']?.['trim']()||'';const _0xf44a16=document['getElementById']('highlight-match-date'),_0x15c60b=_0xf44a16?.['value']||'';_0x5c3d56['matchDate']=_0x15c60b?Timestamp['fromDate'](new Date(_0x15c60b)):null,_0x5c3d56['winnerName']=document['getElementById']('highlight-winner-name')?.['value']?.[_0x455c94(0x2d7)]()||'',_0x5c3d56['winnerScore']=document['getElementById'](_0x455c94(0x1b2))?.['value']?.[_0x455c94(0x2d7)]()||'',_0x5c3d56['loserName']=document[_0x455c94(0x30f)]('highlight-loser-name')?.[_0x455c94(0x161)]?.[_0x455c94(0x2d7)]()||'',_0x5c3d56['loserScore']=document[_0x455c94(0x30f)]('highlight-loser-score')?.[_0x455c94(0x161)]?.['trim']()||'',_0x5c3d56[_0x455c94(0x15b)]=document[_0x455c94(0x30f)]('highlight-match-link')?.[_0x455c94(0x161)]?.['trim']()||'';if(!_0x5c3d56['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x2b8b36==='creator'){_0x5c3d56['map']=document['getElementById'](_0x455c94(0x20f))?.['value']?.[_0x455c94(0x2d7)]()||'',_0x5c3d56['mapCreator']=document['getElementById'](_0x455c94(0x258))?.[_0x455c94(0x161)]?.['trim']()||'',_0x5c3d56['mapVersion']=document[_0x455c94(0x30f)]('highlight-map-version')?.[_0x455c94(0x161)]?.['trim']()||'',_0x5c3d56['creatorImageUrl']=document[_0x455c94(0x30f)]('highlight-creator-image')?.['value']?.['trim']()||'';if(!_0x5c3d56['mapCreator']){showNotification('Map\x20Creator\x20is\x20required',_0x455c94(0x297));return;}}else{if(_0x2b8b36==='achievement'){_0x5c3d56[_0x455c94(0x1eb)]=document['getElementById']('highlight-achievement-player')?.['value']?.[_0x455c94(0x2d7)]()||'',_0x5c3d56[_0x455c94(0x33c)]=document[_0x455c94(0x30f)](_0x455c94(0x368))?.['value']?.['trim']()||'',_0x5c3d56['achievementDetails']=document[_0x455c94(0x30f)]('highlight-achievement-details')?.['value']?.['trim']()||'',_0x5c3d56['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.[_0x455c94(0x161)]?.['trim']()||'',_0x5c3d56['achievementImageUrl']=document['getElementById']('highlight-achievement-image')?.['value']?.[_0x455c94(0x2d7)]()||'';if(!_0x5c3d56['achievementPlayer']){showNotification(_0x455c94(0x2eb),'error');return;}}}}_0x5e8d8b?(_0x5c3d56['updatedAt']=serverTimestamp(),await updateDoc(doc(db,_0x455c94(0x150),_0x5e8d8b),_0x5c3d56),showNotification('Highlight\x20updated\x20successfully!',_0x455c94(0x2da))):(_0x5c3d56[_0x455c94(0x34b)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x5c3d56),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x2e3285){console['error']('Error\x20saving\x20highlight:',_0x2e3285),showNotification('Error\x20saving\x20highlight:\x20'+_0x2e3285[_0x455c94(0x173)],'error');}}function closeHighlightModal(){const _0x4e2727=a4_0x1edc9a,_0x2b3999=document[_0x4e2727(0x30f)]('highlight-modal');if(_0x2b3999)_0x2b3999['classList'][_0x4e2727(0x398)]('active');}function a4_0x2464(_0x37c94a,_0x3f810b){const _0x24da8e=a4_0x36a1();return a4_0x2464=function(_0x404b8,_0x5367ee){_0x404b8=_0x404b8-0x12a;let _0x36a1b7=_0x24da8e[_0x404b8];return _0x36a1b7;},a4_0x2464(_0x37c94a,_0x3f810b);}function getHighlightTypeName(_0x4b053c){const _0x408c6f=a4_0x1edc9a;switch(_0x4b053c){case _0x408c6f(0x2fe):return _0x408c6f(0x142);case'creator':return'Featured\x20Creator';case _0x408c6f(0x148):return _0x408c6f(0x36d);default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x5ea886=a4_0x1edc9a,_0xec7157=document[_0x5ea886(0x30f)]('highlight-video-id'),_0xf2b477=document['getElementById'](_0x5ea886(0x23c)),_0x43c9d7=document[_0x5ea886(0x30f)](_0x5ea886(0x39c));if(!_0xec7157||!_0x43c9d7||!_0xf2b477)return;const _0x6046c9=_0xec7157[_0x5ea886(0x161)]['trim']();_0x6046c9&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x6046c9)?(_0x43c9d7['src']='https://www.youtube.com/embed/'+_0x6046c9,_0xf2b477[_0x5ea886(0x13e)]['display']='block'):(_0x43c9d7['src']='',_0xf2b477['style']['display']=_0x5ea886(0x1e0));}async function loadHighlightsAdmin(){const _0x176eaa=a4_0x1edc9a,_0x446e6a=document['getElementById']('highlights-table-body');if(!_0x446e6a)return;_0x446e6a['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x35b675=query(collection(db,_0x176eaa(0x150)),orderBy('createdAt','desc')),_0x1ad4bb=await getDocs(_0x35b675);if(_0x1ad4bb['empty']){_0x446e6a['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x446e6a['innerHTML']='',_0x1ad4bb[_0x176eaa(0x304)](_0x2a13bd=>{const _0x495074=_0x176eaa,_0x1c7920=_0x2a13bd[_0x495074(0x2ab)](),_0x193bef=document['createElement']('tr'),_0x233f6b=_0x1c7920['createdAt']?new Date(_0x1c7920['createdAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';let _0x3497b8='Unknown',_0x2cf041='';switch(_0x1c7920['type']){case _0x495074(0x2fe):_0x3497b8='Match',_0x2cf041='match-type';break;case'creator':_0x3497b8='Creator',_0x2cf041='creator-type';break;case'achievement':_0x3497b8='Achievement',_0x2cf041='achievement-type';break;}_0x193bef['innerHTML']=_0x495074(0x320)+(_0x1c7920['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x2cf041+'\x22>'+_0x3497b8+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x233f6b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1c7920['submittedBy']||_0x495074(0x2ef))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1c7920['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x495074(0x2e2))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x2a13bd['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x2a13bd['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x446e6a[_0x495074(0x385)](_0x193bef);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x563b2f=>{_0x563b2f['addEventListener']('click',_0xef2078=>{const _0x5a068f=a4_0x2464;openHighlightModal(_0xef2078[_0x5a068f(0x235)]['dataset']['id']);});}),document['querySelectorAll'](_0x176eaa(0x257))['forEach'](_0x34ec14=>{_0x34ec14['addEventListener']('click',_0x34e48b=>{confirmDeleteHighlight(_0x34e48b['currentTarget']['dataset']['id']);});});}catch(_0x2e1b17){console[_0x176eaa(0x297)]('Error\x20loading\x20highlights:',_0x2e1b17),_0x446e6a[_0x176eaa(0x2c9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x2e1b17[_0x176eaa(0x173)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x5180d6){const _0x3be0a6=a4_0x1edc9a;if(confirm(_0x3be0a6(0x163)))try{await deleteDoc(doc(db,_0x3be0a6(0x150),_0x5180d6)),showNotification('Highlight\x20deleted\x20successfully',_0x3be0a6(0x2da)),loadHighlightsAdmin();}catch(_0x4affe2){console['error']('Error\x20deleting\x20highlight:',_0x4affe2),showNotification('Error\x20deleting\x20highlight:\x20'+_0x4affe2['message'],'error');}}function setupCreateTestMatchModal(){const _0x41498e=a4_0x1edc9a;console[_0x41498e(0x35f)](_0x41498e(0x338));const _0x558926=document['getElementById'](_0x41498e(0x1c9)),_0x47484c=document[_0x41498e(0x30f)]('create-test-match-form');if(!_0x558926){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x47484c){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x67712e=_0x558926['cloneNode'](!![]);_0x558926[_0x41498e(0x341)]['replaceChild'](_0x67712e,_0x558926);const _0xb213da=_0x67712e['querySelector']('#create-test-match-form');_0x67712e[_0x41498e(0x16b)](_0x41498e(0x1f0),function(_0x2583e0){const _0x59833b=_0x41498e;_0x2583e0['target']===_0x67712e&&(console['log'](_0x59833b(0x199)),closeCreateTestMatchModal());});const _0x5e2edd=_0x67712e['querySelector']('.close-btn');_0x5e2edd&&_0x5e2edd['addEventListener']('click',function(_0x51f560){const _0x410b09=_0x41498e;_0x51f560['preventDefault'](),_0x51f560[_0x410b09(0x1aa)](),console[_0x410b09(0x35f)](_0x410b09(0x39f)),closeCreateTestMatchModal();});const _0x4c4ec7=_0x67712e['querySelector']('#cancel-create-test-match-btn');_0x4c4ec7&&_0x4c4ec7['addEventListener']('click',function(_0x63ca49){const _0x54ddff=_0x41498e;_0x63ca49['preventDefault'](),_0x63ca49['stopPropagation'](),console[_0x54ddff(0x35f)]('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0xb213da){_0xb213da[_0x41498e(0x16b)]('submit',function(_0x14921f){_0x14921f['preventDefault'](),_0x14921f['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x26a89d=_0xb213da['querySelector']('button[type=\x22submit\x22]');_0x26a89d&&_0x26a89d['addEventListener']('click',function(_0x1598ba){_0x1598ba['preventDefault'](),_0x1598ba['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x31642a=a4_0x1edc9a;console[_0x31642a(0x35f)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0xa06163=document['getElementById']('highlight-form');_0xa06163&&_0xa06163['addEventListener']('submit',_0xf2c47d=>{_0xf2c47d['preventDefault'](),saveHighlight();});const _0xce03de=document['getElementById']('cancel-highlight-btn');_0xce03de&&_0xce03de['addEventListener'](_0x31642a(0x1f0),closeHighlightModal);const _0x4accbc=document[_0x31642a(0x164)]('#highlight-modal\x20.close-btn');_0x4accbc&&_0x4accbc['addEventListener']('click',closeHighlightModal);const _0x34ff44=document['getElementById']('highlight-modal');_0x34ff44&&_0x34ff44[_0x31642a(0x16b)](_0x31642a(0x1f0),_0x304364=>{const _0x386f82=_0x31642a;_0x304364[_0x386f82(0x24a)]===_0x34ff44&&closeHighlightModal();});const _0x21e772=document['getElementById']('highlight-video-id');_0x21e772&&_0x21e772[_0x31642a(0x16b)]('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x5d7a62=a4_0x1edc9a;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x409fbf=document[_0x5d7a62(0x30f)]('matches-prev-page'),_0x55e60a=document['getElementById'](_0x5d7a62(0x2c4));_0x409fbf&&_0x409fbf['addEventListener']('click',()=>{const _0x4f7948=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x4f7948]['page']-0x1);});_0x55e60a&&_0x55e60a['addEventListener']('click',()=>{const _0x132ae7=_0x5d7a62,_0x55396a=currentLadder[_0x132ae7(0x300)]();loadMatchesData(matchesPagination[_0x55396a]['page']+0x1);});const _0x5e013d=document[_0x5d7a62(0x30f)]('apply-matches-filters'),_0x4036f0=document['getElementById']('reset-matches-filters');_0x5e013d&&_0x5e013d['addEventListener']('click',applyMatchesFilters);_0x4036f0&&_0x4036f0['addEventListener']('click',resetMatchesFilters);const _0x57299d=document['getElementById']('matches-search');_0x57299d&&_0x57299d['addEventListener'](_0x5d7a62(0x31f),debounce(filterMatchesTable,0x12c));const _0x50eefb=document['getElementById']('resimulate-match-btn');_0x50eefb&&_0x50eefb[_0x5d7a62(0x16b)](_0x5d7a62(0x1f0),openResimulateModal);const _0x5074f2=document[_0x5d7a62(0x30f)]('resimulate-modal');if(_0x5074f2){const _0x209832=_0x5074f2[_0x5d7a62(0x164)]('.close');_0x209832&&_0x209832['addEventListener'](_0x5d7a62(0x1f0),closeResimulateModal),_0x5074f2['addEventListener']('click',_0x99d701=>{_0x99d701['target']===_0x5074f2&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x47fc73=a4_0x1edc9a;console[_0x47fc73(0x35f)]('Opening\x20create\x20test\x20match\x20modal');const _0x155849=document[_0x47fc73(0x30f)]('create-test-match-modal'),_0x4d3852=document[_0x47fc73(0x30f)]('create-test-match-form');if(!_0x155849){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x4d3852){console['error'](_0x47fc73(0x2d9)),showNotification(_0x47fc73(0x2d9),'error');return;}_0x4d3852[_0x47fc73(0x33d)]();const _0x2864ac=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x192e5d=![];_0x2864ac[_0x47fc73(0x304)](_0x14b0b2=>{const _0x1c3c76=_0x47fc73;console['log']('Found\x20radio\x20with\x20value:',_0x14b0b2['value']),_0x14b0b2['value']===currentLadder&&(_0x14b0b2['checked']=!![],_0x192e5d=!![],console[_0x1c3c76(0x35f)](_0x1c3c76(0x31c),currentLadder));});if(!_0x192e5d){console[_0x47fc73(0x225)]('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x5a9165=document['querySelector'](_0x47fc73(0x2ec));_0x5a9165&&(_0x5a9165[_0x47fc73(0x242)]=!![],console[_0x47fc73(0x35f)]('Defaulted\x20to\x20D1\x20ladder'));}const _0x301208=document['getElementById']('test-match-date');if(_0x301208){const _0x177a0c=new Date()['toISOString']()['split']('T')[0x0];_0x301208['value']=_0x177a0c;}_0x155849['style']['display']='flex',_0x155849[_0x47fc73(0x13e)]['visibility']='visible',_0x155849['style']['opacity']='1',_0x155849[_0x47fc73(0x1ad)]['add'](_0x47fc73(0x2e8)),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x141c01=document['getElementById'](_0x47fc73(0x19a));_0x141c01&&setTimeout(()=>{_0x141c01['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x2b53a2=a4_0x1edc9a;console[_0x2b53a2(0x35f)]('Closing\x20create\x20test\x20match\x20modal');const _0x3ea73e=document[_0x2b53a2(0x30f)]('create-test-match-modal');if(!_0x3ea73e){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x3ea73e[_0x2b53a2(0x1ad)]['remove']('active'),_0x3ea73e[_0x2b53a2(0x13e)]['opacity']='0',_0x3ea73e['style']['visibility']='hidden',setTimeout(()=>{const _0x317e7d=_0x2b53a2;!_0x3ea73e[_0x317e7d(0x1ad)]['contains']('active')&&(_0x3ea73e[_0x317e7d(0x13e)]['display']=_0x317e7d(0x1e0));},0x12c),console[_0x2b53a2(0x35f)]('Modal\x20closed');}async function createTestMatch(){const _0x30ccb0=a4_0x1edc9a;console[_0x30ccb0(0x35f)](_0x30ccb0(0x1a1));try{const _0xacc288=auth[_0x30ccb0(0x155)];if(!_0xacc288){showNotification(_0x30ccb0(0x22f),'error');return;}const _0x2419d1='D1',_0x5e24a4=_0x30ccb0(0x252),_0x5d5b64={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x30ccb0(0x325),'loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0xacc288['email'],'createdAt':serverTimestamp(),'createdBy':_0xacc288['email'],'isTestMatch':!![],'ladder':_0x2419d1,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x30ccb0(0x267)+_0xacc288['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x5e24a4),_0x5d5b64),showNotification(_0x30ccb0(0x153),'success'),closeCreateTestMatchModal();}catch(_0xea0b30){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0xea0b30),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0xea0b30['message'],'error');}}window['testFirebaseConnection']=async function(){const _0xfebd9e=a4_0x1edc9a;try{console['log'](_0xfebd9e(0x294)),console[_0xfebd9e(0x35f)]('Auth:',auth),console['log']('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x15d06c=collection(db,'players');console[_0xfebd9e(0x35f)](_0xfebd9e(0x2d5),_0x15d06c);const _0x4815f6=query(_0x15d06c,where(_0xfebd9e(0x195),'==','nonexistent'));console['log']('Query\x20created:',_0x4815f6);const _0x43b748=await getDocs(_0x4815f6);console['log']('Query\x20executed.\x20Empty:',_0x43b748['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x5ad175){console['error']('Firebase\x20connection\x20test\x20failed:',_0x5ad175);}};function setupCreateTestMatchButton(){const _0x3a95e7=a4_0x1edc9a,_0x2076a0=document['getElementById']('create-test-match-btn');if(!_0x2076a0){console['error'](_0x3a95e7(0x291));return;}console[_0x3a95e7(0x35f)](_0x3a95e7(0x24c));const _0x2a6ee0=_0x2076a0['cloneNode'](!![]);_0x2076a0['parentNode']['replaceChild'](_0x2a6ee0,_0x2076a0),_0x2a6ee0['addEventListener'](_0x3a95e7(0x1f0),function(_0x2af7c7){const _0x58c2c3=_0x3a95e7;_0x2af7c7[_0x58c2c3(0x1ca)](),_0x2af7c7['stopPropagation'](),console[_0x58c2c3(0x35f)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0x3a95e7(0x35f)](_0x3a95e7(0x311));}async function loadMatchesData(_0x306b7=0x1){const _0x5daa10=a4_0x1edc9a,_0x417d82=document['getElementById'](_0x5daa10(0x260));if(!_0x417d82)return;_0x417d82['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x360dfc=currentLadder['toLowerCase'](),_0x336ae4=matchesPagination[_0x360dfc],_0x4d3244=currentLadder==='D1'?_0x5daa10(0x252):currentLadder==='D2'?_0x5daa10(0x268):'approvedMatchesD3',_0x2cc790=collection(db,_0x4d3244);_0x306b7<=0x1?(_0x336ae4['page']=0x1,_0x336ae4['firstVisible']=null,_0x336ae4[_0x5daa10(0x26e)]=null):_0x336ae4[_0x5daa10(0x38d)]=_0x306b7;const _0x92e184=getMatchesFilters();let _0x5c9b2a=_0x2cc790;if(_0x92e184['startDate']||_0x92e184[_0x5daa10(0x1d5)]||_0x92e184['searchTerm']){let _0xe7971e=[];_0x92e184['startDate']&&_0x92e184[_0x5daa10(0x1d5)]?(_0xe7971e['push'](where('approvedAt','>=',_0x92e184[_0x5daa10(0x357)]),where('approvedAt','<=',_0x92e184[_0x5daa10(0x1d5)])),_0x5c9b2a=query(_0x2cc790,..._0xe7971e)):_0x5c9b2a=query(_0x2cc790,orderBy('approvedAt',_0x5daa10(0x352)));}else _0x5c9b2a=query(_0x2cc790,orderBy('approvedAt','desc'));_0x306b7>0x1&&_0x336ae4[_0x5daa10(0x26e)]?_0x5c9b2a=query(_0x5c9b2a,startAfter(_0x336ae4['lastVisible']),limit(PAGE_SIZE)):_0x5c9b2a=query(_0x5c9b2a,limit(PAGE_SIZE));const _0x24f4c3=await getDocs(_0x5c9b2a);!_0x24f4c3[_0x5daa10(0x212)]&&(_0x336ae4[_0x5daa10(0x38a)]=_0x24f4c3[_0x5daa10(0x313)][0x0],_0x336ae4['lastVisible']=_0x24f4c3[_0x5daa10(0x313)][_0x24f4c3['docs']['length']-0x1]);let _0x4f040b=![];if(!_0x24f4c3[_0x5daa10(0x212)]){const _0xfd9365=query(_0x5c9b2a,startAfter(_0x336ae4['lastVisible']),limit(0x1)),_0x1fb7bd=await getDocs(_0xfd9365);_0x4f040b=!_0x1fb7bd[_0x5daa10(0x212)];}const _0x304c0f=document['getElementById']('matches-prev-page'),_0x492d8a=document[_0x5daa10(0x30f)]('matches-next-page'),_0xc518d9=document[_0x5daa10(0x30f)]('matches-page-indicator');if(_0x304c0f)_0x304c0f['disabled']=_0x336ae4[_0x5daa10(0x38d)]<=0x1;if(_0x492d8a)_0x492d8a['disabled']=!_0x4f040b;if(_0xc518d9)_0xc518d9['textContent']='Page\x20'+_0x336ae4[_0x5daa10(0x38d)];if(_0x24f4c3['empty']){_0x417d82['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x417d82['innerHTML']='',_0x24f4c3['forEach'](_0x6e0039=>{const _0x166878=_0x5daa10,_0x402d5d=_0x6e0039['data'](),_0x566b46=document[_0x166878(0x131)]('tr'),_0x12d606=_0x402d5d['approvedAt']?new Date(_0x402d5d['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x166878(0x2cb);_0x566b46[_0x166878(0x222)]('data-id',_0x6e0039['id']),_0x566b46['setAttribute']('data-ladder',currentLadder),_0x566b46[_0x166878(0x1ad)]['add'](_0x166878(0x177)),_0x566b46['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x12d606+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x402d5d['winnerUsername']||_0x166878(0x2ef))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x402d5d['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x402d5d['winnerScore']||0x0)+'\x20-\x20'+(_0x402d5d['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x402d5d[_0x166878(0x29f)]||'N/A')+_0x166878(0x172)+currentLadder+_0x166878(0x29c)+_0x6e0039['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x6e0039['id']+_0x166878(0x2db),_0x417d82['appendChild'](_0x566b46);}),setupMatchesActionButtons(),_0x92e184['searchTerm']&&filterMatchesTable(),console['log']('Loaded\x20'+_0x24f4c3['size']+_0x5daa10(0x2b4)+currentLadder+'\x20ladder,\x20page\x20'+_0x336ae4['page']);}catch(_0x40ea2d){console[_0x5daa10(0x297)]('Error\x20loading\x20matches:',_0x40ea2d),_0x417d82[_0x5daa10(0x2c9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x40ea2d['message']+_0x5daa10(0x2fc);}}async function deleteMatch(_0x1f436f,_0x50ee0f){const _0x353b70=a4_0x1edc9a;try{console[_0x353b70(0x35f)](_0x353b70(0x24d)+_0x1f436f+'\x20from\x20'+_0x50ee0f+'\x20ladder');const _0x18be79=auth[_0x353b70(0x155)];if(!_0x18be79){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches',_0x353b70(0x297));return;}const _0x1f6f9e=_0x50ee0f==='D1'?'approvedMatches':_0x50ee0f==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log'](_0x353b70(0x1db)+_0x1f6f9e),showNotification(_0x353b70(0x1ed),_0x353b70(0x2b0)),await deleteDoc(doc(db,_0x1f6f9e,_0x1f436f)),console[_0x353b70(0x35f)]('Match\x20deleted\x20successfully'),showNotification(_0x353b70(0x231),'success');const _0x1e4f70=_0x50ee0f[_0x353b70(0x300)]();loadMatchesData(matchesPagination[_0x1e4f70]['page']);}catch(_0x338253){console['error'](_0x353b70(0x2f7),_0x338253),showNotification(_0x353b70(0x248)+_0x338253[_0x353b70(0x173)],'error');}}function setupMatchesActionButtons(){const _0x52f933=a4_0x1edc9a;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x424300=>{_0x424300['addEventListener']('click',_0x10500a=>{const _0x46d556=a4_0x2464;_0x10500a['preventDefault'](),_0x10500a['stopPropagation']();const _0x53f191=_0x10500a['currentTarget']['dataset']['id'],_0x423d94=_0x10500a[_0x46d556(0x235)]['closest']('tr'),_0x234c29=_0x423d94[_0x46d556(0x305)]['ladder'];console[_0x46d556(0x35f)]('Edit\x20match\x20clicked:',_0x53f191,_0x234c29),openEditMatchModal(_0x53f191,_0x234c29);});}),document['querySelectorAll']('.delete-match-btn')['forEach'](_0x535fcd=>{const _0x2aef62=a4_0x2464;_0x535fcd['addEventListener'](_0x2aef62(0x1f0),_0x5c5137=>{const _0x7e824a=_0x2aef62;_0x5c5137['preventDefault'](),_0x5c5137['stopPropagation']();const _0xee7bd6=_0x5c5137['currentTarget']['dataset']['id'],_0x2623b8=_0x5c5137[_0x7e824a(0x235)][_0x7e824a(0x236)]('tr'),_0xfeb27f=_0x2623b8['dataset'][_0x7e824a(0x232)]||currentLadder;console['log'](_0x7e824a(0x133),_0xee7bd6,_0xfeb27f),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0xee7bd6,_0xfeb27f);});}),console['log'](_0x52f933(0x396));}function filterMatchesTable(){const _0x2643c8=a4_0x1edc9a,_0x543bcc=document[_0x2643c8(0x30f)]('matches-search')['value'][_0x2643c8(0x300)](),_0x21897a=document['querySelectorAll'](_0x2643c8(0x27d));let _0x13eea6=0x0;_0x21897a['forEach'](_0x3f5682=>{const _0x40e267=_0x2643c8;if(_0x3f5682['classList']['contains'](_0x40e267(0x1f9))||_0x3f5682[_0x40e267(0x1ad)]['contains']('empty-state')||_0x3f5682['classList']['contains']('error-state'))return;const _0x5c1617=_0x3f5682['cells'][0x1][_0x40e267(0x261)][_0x40e267(0x300)](),_0x2829c7=_0x3f5682[_0x40e267(0x2ea)][0x2][_0x40e267(0x261)]['toLowerCase'](),_0x415d65=_0x3f5682['cells'][0x4]['textContent']['toLowerCase']();_0x5c1617['includes'](_0x543bcc)||_0x2829c7['includes'](_0x543bcc)||_0x415d65[_0x40e267(0x2a7)](_0x543bcc)?(_0x3f5682['style']['display']='',_0x13eea6++):_0x3f5682['style']['display']='none';});if(_0x13eea6===0x0&&_0x21897a[_0x2643c8(0x309)]>0x0){const _0x468a49=document['getElementById']('matches-table-body'),_0x5e1b23=_0x468a49['querySelector'](_0x2643c8(0x397));if(!_0x5e1b23){const _0x48833d=document[_0x2643c8(0x131)]('tr');_0x48833d['className']=_0x2643c8(0x156),_0x48833d[_0x2643c8(0x2c9)]=_0x2643c8(0x209)+_0x543bcc+'\x27</td>',_0x468a49['appendChild'](_0x48833d);}}else{const _0x18577f=document['querySelector']('.no-results');_0x18577f&&_0x18577f['remove']();}}function getMatchesFilters(){const _0x15f1c2=a4_0x1edc9a,_0x11e83b=document['getElementById']('matches-search')[_0x15f1c2(0x161)]['toLowerCase'](),_0x3d4310=document['getElementById']('matches-start-date')['value'],_0x5208ca=document['getElementById'](_0x15f1c2(0x37c))['value'];let _0x4b73e7=null,_0x46ae42=null;return _0x3d4310&&(_0x4b73e7=new Date(_0x3d4310),_0x4b73e7['setHours'](0x0,0x0,0x0,0x0),_0x4b73e7=Timestamp['fromDate'](_0x4b73e7)),_0x5208ca&&(_0x46ae42=new Date(_0x5208ca),_0x46ae42['setHours'](0x17,0x3b,0x3b,0x3e7),_0x46ae42=Timestamp[_0x15f1c2(0x332)](_0x46ae42)),{'searchTerm':_0x11e83b,'startDate':_0x4b73e7,'endDate':_0x46ae42};}async function applyMatchesFilters(){const _0x459300=currentLadder['toLowerCase']();matchesPagination[_0x459300]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x42b9f6=a4_0x1edc9a;document['getElementById'](_0x42b9f6(0x23f))[_0x42b9f6(0x161)]='',document['getElementById']('matches-end-date')['value']='',document['getElementById'](_0x42b9f6(0x36c))['value']='';const _0x53363f=currentLadder['toLowerCase']();matchesPagination[_0x53363f]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x5468dd,_0x1d29df){const _0x3e740d=a4_0x1edc9a,_0x384bfb=document['getElementById'](_0x3e740d(0x12c));if(!_0x384bfb)return;try{const _0x1966be=_0x1d29df==='D1'?'approvedMatches':_0x1d29df==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x7ce9e=doc(db,_0x1966be,_0x5468dd),_0x78088f=await getDoc(_0x7ce9e);if(!_0x78088f['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x157aea=_0x78088f[_0x3e740d(0x2ab)]();document['getElementById']('edit-match-id')[_0x3e740d(0x161)]=_0x5468dd,document['getElementById']('edit-match-ladder')[_0x3e740d(0x161)]=_0x1d29df,document['getElementById']('edit-match-winner')[_0x3e740d(0x161)]=_0x157aea['winnerUsername']||'',document['getElementById']('edit-match-winner-score')['value']=_0x157aea['winnerScore']||0x0,document[_0x3e740d(0x30f)]('edit-match-winner-suicides')['value']=_0x157aea['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')[_0x3e740d(0x161)]=_0x157aea['winnerComment']||'',document[_0x3e740d(0x30f)](_0x3e740d(0x375))['value']=_0x157aea['loserUsername']||'',document['getElementById']('edit-match-loser-score')[_0x3e740d(0x161)]=_0x157aea['loserScore']||0x0,document[_0x3e740d(0x30f)]('edit-match-loser-suicides')['value']=_0x157aea['loserSuicides']||0x0,document['getElementById'](_0x3e740d(0x2b6))[_0x3e740d(0x161)]=_0x157aea['loserComment']||'',document['getElementById'](_0x3e740d(0x1cc))[_0x3e740d(0x161)]=_0x157aea['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')[_0x3e740d(0x161)]=_0x157aea[_0x3e740d(0x3a3)]||'',document['getElementById'](_0x3e740d(0x2fb))[_0x3e740d(0x161)]=_0x157aea['loserDemoLink']||_0x157aea[_0x3e740d(0x166)]||'',document[_0x3e740d(0x30f)](_0x3e740d(0x16e))['textContent']=_0x3e740d(0x38f)+_0x157aea[_0x3e740d(0x277)]+'\x20vs\x20'+_0x157aea['loserUsername'],_0x384bfb[_0x3e740d(0x1ad)]['add']('active');}catch(_0x50b032){console['error']('Error\x20loading\x20match\x20data:',_0x50b032),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x245cb0=a4_0x1edc9a,_0x56d669=document['getElementById']('edit-match-modal');_0x56d669&&_0x56d669['classList']['remove'](_0x245cb0(0x2e8));}function a4_0x36a1(){const _0x2e69e6=['quick-edit-points-form','substring','edit-match-modal','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','Error\x20loading\x20players:','\x20history\x20entries\x20for\x20user\x20','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','createElement','toDate','Delete\x20match\x20clicked:','Error\x20setting\x20up\x20admin\x20dashboard','set','ref','manage-ranks','load-inactive-players-data','add-new-role-btn','award-item-form','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','assign-trophy-rarity','Lost','style','split','block','highlight-winner-name','Match\x20Highlight','add','Page\x20','Error\x20adding\x20ribbon','article-image-url','Error\x20in\x20demotion:','achievement','No\x20user\x20ID\x20found\x20on\x20button','edit-player-modal','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','assign-trophy-description','Points\x20updated\x20successfully','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','\x20D2\x20matches,\x20','highlights','Initializing\x20points\x20field\x20for\x20user\x20','-page-indicator','Simple\x20test\x20match\x20created\x20successfully','articles','currentUser','no-results','destroy','Unknown\x20User','trophyId','highlight-achievement-player','matchLink','Setting\x20up\x20Manage\x20Points\x20section','Trophy\x20definition\x20deleted\x20successfully','.close-notification','Failed\x20to\x20delete\x20player:\x20','players','value','eloRating','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','querySelector','trace','demoLink','roleColor','playerProfileUrl','Set\x20to\x20','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','addEventListener','\x20already\x20processed\x20matches.\x20Errors:\x20','replaceChild','edit-match-title','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','manage-points','Quick\x20edit\x20form\x20submitted','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','message','.error-state','quick-edit-points-modal','set-role-modal','match-row','change','highlight-achievement-details','highlight-achievement-image-container','title','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','5px','points-reason','highlight-description-container','trophy-preview-img','#players-table-body\x20tr','nonParticipants','View\x20history\x20clicked\x20for\x20user:','Dashboard\x20data\x20loaded\x20successfully','admin','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','0.6','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','history-type-filter','player-count','seconds','Quick\x20edit\x20form\x20not\x20found!','display','MAX_SAFE_INTEGER',',\x20Loser\x20','Error\x20loading\x20ELO\x20history:','\x20D1\x20pilots,\x20','highlight-description','username','\x20users\x20to\x20check...','RejectedD2','create-new-trophy-btn','Modal\x20background\x20clicked','test-match-winner-username','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22','daysSinceMatch','visibility','warning',').\x20','No\x20users\x20needed\x20points\x20field\x20initialization','Creating\x20test\x20match\x20without\x20player\x20validation...','ribbons','className','Silver','YouTube\x20Video\x20ID*','\x20users...','adminEmail','Create\x20Article','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','stopPropagation','medium-points','Username\x20is\x20missing','classList','trophy-modal','User\x20data\x20loaded:','Edit\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','highlight-winner-score','then','previousElo','catch','map','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','uid','user-role','\x20D3\x20matches.\x20','Error\x20loading\x20users:','Attempting\x20to\x20demote\x20','highlight-id','player-search','load-highlights-data','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','padding','elo-history-search','Monday','20px','rankDistribution','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','Sunday','#50C878','create-test-match-modal','preventDefault','Failed\x20to\x20send\x20Discord\x20notification:','edit-match-map','elo','ribbon-target-ladder','\x20allowed\x20tabs:','eloHistoryD2','history-start-date','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','data-section','Inactive\x20players\x20section\x20initialized','endDate','No\x20email','edit-highlight-title-input','disabled','edit-match-winner-comment','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','Using\x20collection:\x20','Error\x20creating\x20rank\x20distribution\x20chart:','match_result','delete-match-confirm-modal','❌\x20Missing','none','new-player-username','trophy-rarity','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20deleting\x20article:','pendingResimulateData','manage-highlights','\x20Rank\x20Distribution','Edit\x20Trophy','{}.constructor(\x22return\x20this\x22)(\x20)','✅\x20Exists','achievementPlayer','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','Deleting\x20match...','migrate-points-btn','level','click','article-modal-title','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','trophy-image-url','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20','filter','date','Remove\x20','has','loading-cell','author','update','selected-user-points','add-player-form','Starting\x20points\x20award\x20process...','visible','highlight-achievement-player-container','demotedBy','Error\x20loading\x20ribbons:','Points\x20data\x20loaded\x20successfully','Processed\x20','promote-username','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','.sidebar-nav\x20.nav-item[data-section=\x22','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','promotion','Please\x20enter\x20a\x20valid\x20username','Matches\x20Played','highlight-map','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','quick-points-amount','empty','d1-prev-page','create-match-highlight-btn','sources','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','afterend','setDate','Player\x20deleted\x20successfully','\x20points\x20history\x20entries','edit-highlight-playerProfileUrl-input','action','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','#ffffff','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','timestamp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','setAttribute','pending-count','No\x20player\x20selected','warn','inactive-players','prototype','\x20(based\x20on\x20data-role:\x20','ribbon-item','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','demote-form','selected-user-info','\x20-\x20Feature\x20coming\x20soon','toLocaleString','You\x20must\x20be\x20logged\x20in','onAuthStateChanged','Match\x20deleted\x20successfully','ladder','mapName','points','currentTarget','closest','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','Player\x20not\x20found\x20in\x20','Error\x20initializing\x20points:\x20','Error\x20removing\x20ribbon','previousElementSibling','highlight-video-preview-container','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','achievementImageUrl','matches-start-date','Initial\x20Placement','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','checked','cancel-quick-edit','Table\x20row\x20for\x20user\x20','\x27\x20has\x20permissions:','push','approvedMatchesD3','Failed\x20to\x20delete\x20match:\x20','creator','target','Complete!\x20Awarded\x20','Setting\x20up\x20create\x20test\x20match\x20button','Deleting\x20match\x20','No\x20specific\x20permissions\x20for\x20user\x20','points-amount','1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)','edit-match-id','approvedMatches','Error\x20awarding\x20item:','querySelectorAll','creatorImageUrl','Awarded\x20','.delete-highlight-btn','highlight-map-creator','data-ladder','.loading-cell','load-players-data','approvedAt','load-trophies-data','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','matchInfo','matches-table-body','textContent','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','match-details-container','loserUsername','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','matchId','Simple\x20test\x20match\x20created\x20by\x20admin\x20','approvedMatchesD2','roleAssignedAt','manage-matches','dashboard','playersD2','Standard','lastVisible','Adding\x20\x22active\x22\x20class\x20to\x20modal.','Achievement\x20highlight\x20button\x20clicked','user-search','highlight-match-link','Username\x20input\x20set\x20to:\x20','playerRibbons','Load\x20ribbons\x20data\x20clicked','\x20with\x20email\x20','winnerUsername','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','Modal\x20opened\x20successfully','ribbon-type-select','Error\x20loading\x20articles:','Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20','#matches-table-body\x20tr','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','.edit-trophy-btn','loserScore','image','Error\x20loading\x20inactive\x20players:','Role\x20\x22','eloHistoryD3','Quick\x20edit\x20clicked\x20for\x20user:','load-users-data','Found\x20ELO\x20history\x20for\x20player\x20','mapVersion','submit','manage-trophies','edit-wins','Please\x20enter\x20a\x20username','Error\x20deleting\x20trophy\x20definition:','Modal\x20cancel\x20button\x20clicked','all','toLocaleDateString','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','highlight-players-container','User\x20\x22','Testing\x20Firebase\x20connection...','points-overview-search','set-elo-modal','error','assign-player-username','Loading\x20points\x20data...','</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','d3-prev-page','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>','mapPlayed','common','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','\x20points.\x20Skipped\x20','type','edit-highlight-loserName-input','.view-player-btn','\x20(+','includes','displayName','achievementDetails','store-item-select','data','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','name','current-ribbon-user','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','info','userProfiles','\x20unique\x20pilots\x20across\x20all\x20ladders','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','\x20matches\x20for\x20','Bulk\x20award\x20to\x20all\x20pilots\x20(','edit-match-loser-comment','points-history-table-body','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','.ladder-switch\x20input','description','edit-match-winner-suicides','admin_modification','previousPoints','src','article-modal','Article\x20deleted\x20successfully','subtract','userId','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','matches-next-page','div','newElo','\x20D2\x20pilots,\x20','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','innerHTML','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','N/A','Error\x20opening\x20edit\x20modal:','Error\x20opening\x20quick\x20edit\x20modal:','points-desc','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','\x22\x20already\x20has\x20this\x20trophy','high-points','lastMatch','role','Failed\x20to\x20save\x20match:\x20','Collection\x20reference\x20created:','fa-exclamation-triangle','trim','Searching\x20for\x20player\x20in\x20','Create\x20test\x20match\x20form\x20not\x20found','success','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','non-participant','</td></tr>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','highlight-loser-name','Please\x20select\x20a\x20user\x20and\x20store\x20item','user-search-results','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','history-end-date','Saturday','trophy-modal-title','quick-edit-display-name','input[name=\x22assign-ladder\x22]:checked','active','\x20from\x20','cells','Player\x20Name\x20is\x20required','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','.quick-edit-btn','\x20inactive\x20players','Unknown','trophy-image-preview','#e0e0e0','Edit\x20Article','toString','Error\x20setting\x20custom\x20ELO:','location','reason','Error\x20deleting\x20match:','\x20Weekly\x20Activity','pointsHistory','assign-trophy-modal','edit-match-loser-demo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','.type','match','createdBy','toLowerCase','ribbon-level','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','Wednesday','forEach','dataset','trophy-id','\x22\x20data-ladder=\x22','find','length','.remove-ribbon-btn','edit-match-winner','create-new-article-btn','Failed\x20to\x20load\x20match\x20data','role-filter','getElementById','exists','Create\x20test\x20match\x20button\x20setup\x20complete','size','docs','fa-exclamation-circle','getDate','sendPromotionNotification','trophy-form',';\x22>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Cancel\x20button\x20not\x20found','demote-modal','Set\x20default\x20ladder\x20to:','getAttribute','Points\x20field\x20initialized\x20for\x20','input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','removeEventListener','No\x20ELO\x20history\x20found\x20for\x20player\x20','DOMContentLoaded','resimulation','TestLoser','Found\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','Page\x201','edit-highlight-videoId-input','Store\x20item\x20awarded\x20successfully','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','Ribbons\x20data\x20loaded\x20successfully','highlight-video-id','eloHistory','Error\x20loading\x20article\x20data:','rejected-count','fromDate','rarity','highlight-match-info','loserName','highlight-loser-score','\x20in\x20all\x20collections...','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20-\x20','achievementType','reset','quick-edit-user-id','Error\x20loading\x20trophies:','edit-highlight-map-input','parentNode','Please\x20enter\x20valid\x20username\x20and\x20ELO','Sidebar\x20navigation\x20initialized\x20with\x20permissions','Looking\x20for\x20user\x20role\x20information\x20for\x20','matchDate','manage-players','Error\x20removing\x20role:','W\x20/\x20','load-articles-data','\x20Level\x20','createdAt','Attempting\x20to\x20promote\x20','Error\x20searching\x20user:','\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20','Completed!\x20Processed\x20','manage-articles','roleName','desc','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','unknown','startDate','bind','highlight-submitted-by','trophyDefinitions','playerRibbonsD3','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','keys','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','log','elo-history','email','View\x20player\x20details\x20for\x20','.assign-trophy-btn','Created\x20','entries','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','highlight-match-date-container','highlight-achievement-type','Failed\x20to\x20update\x20points:\x20','edit-losses','lastUpdated','matches-search','Player\x20Achievement','article-author','Gold','Failed\x20to\x20award\x20item:\x20','Error\x20finding\x20match:','Form\x20elements\x20are\x20missing','Could\x20not\x20find\x20player\x20documents','System','edit-match-loser','edit-match-winner-demo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','Manage\x20Ribbons\x20section\x20initialized','Modal\x20element\x20not\x20found!','getRankName','matches-end-date','\x20to\x20','playersD3','initial_placement','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','\x20users\x20already\x20had\x20points.','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','No\x20user\x20profile\x20found\x20for\x20pilot\x20','No\x20users\x20found\x20in\x20userProfiles\x20collection','appendChild','Bulk\x20award:\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','Points\x20action\x20buttons\x20setup\x20complete','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','firstVisible','ribbon-user-search','Never\x20played','page','loading','Edit\x20Match:\x20','Error\x20loading\x20match\x20for\x20deletion:','body','commit','reset-history-filters','</span>','Failed\x20to\x20load\x20user\x20history','Matches\x20action\x20buttons\x20setup\x20complete','.no-results','remove','user-roles-section','winnerScore','role-username','highlight-video-preview','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','.view-history-btn','Modal\x20close\x20button\x20clicked','Invalid\x20points\x20amount','Found\x20user\x20in\x20','position','winnerDemoLink'];a4_0x36a1=function(){return _0x2e69e6;};return a4_0x36a1();}async function saveEditedMatch(){const _0x4ac1a3=a4_0x1edc9a;try{const _0x4d3989=document['getElementById'](_0x4ac1a3(0x251))['value'],_0x11c964=document[_0x4ac1a3(0x30f)]('edit-match-ladder')['value'];if(!_0x4d3989||!_0x11c964){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x4ac1a3(0x297));return;}const _0x181dda=_0x11c964==='D1'?'approvedMatches':_0x11c964==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x296756=document['getElementById'](_0x4ac1a3(0x30b))[_0x4ac1a3(0x161)]['trim'](),_0x2d1788=parseInt(document[_0x4ac1a3(0x30f)]('edit-match-winner-score')['value']),_0x12195a=parseInt(document['getElementById'](_0x4ac1a3(0x2bb))[_0x4ac1a3(0x161)]),_0x1eb5ff=document['getElementById'](_0x4ac1a3(0x1d9))['value'][_0x4ac1a3(0x2d7)](),_0x393c2b=document['getElementById']('edit-match-loser')['value']['trim'](),_0x52cb3f=parseInt(document['getElementById']('edit-match-loser-score')[_0x4ac1a3(0x161)]),_0x4f4cd6=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x3f818d=document['getElementById']('edit-match-loser-comment')[_0x4ac1a3(0x161)]['trim'](),_0x41a6a1=document['getElementById']('edit-match-map')[_0x4ac1a3(0x161)]['trim'](),_0x3f630a=document['getElementById'](_0x4ac1a3(0x376))[_0x4ac1a3(0x161)][_0x4ac1a3(0x2d7)](),_0x37665d=document['getElementById'](_0x4ac1a3(0x2fb))[_0x4ac1a3(0x161)][_0x4ac1a3(0x2d7)]();if(!_0x296756||!_0x393c2b){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x181dda,_0x4d3989),{'winnerUsername':_0x296756,'winnerScore':_0x2d1788,'winnerSuicides':_0x12195a,'winnerComment':_0x1eb5ff,'loserUsername':_0x393c2b,'loserScore':_0x52cb3f,'loserSuicides':_0x4f4cd6,'loserComment':_0x3f818d,'mapPlayed':_0x41a6a1,'winnerDemoLink':_0x3f630a||null,'loserDemoLink':_0x37665d||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x11c964['toLowerCase']()]['page']);}catch(_0x46ad77){console['error']('Error\x20saving\x20match:',_0x46ad77),showNotification(_0x4ac1a3(0x2d4)+_0x46ad77['message'],'error');}}async function openDeleteMatchModal(_0x103a3f,_0x5df7cf){const _0x4034ea=a4_0x1edc9a;try{const _0x3c7f52=_0x5df7cf==='D1'?'approvedMatches':_0x5df7cf==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x39957b=doc(db,_0x3c7f52,_0x103a3f),_0x21e2bd=await getDoc(_0x39957b);if(!_0x21e2bd[_0x4034ea(0x310)]()){showNotification('Match\x20not\x20found',_0x4034ea(0x297));return;}const _0x3c10c9=_0x21e2bd['data'](),_0x367365=document[_0x4034ea(0x30f)](_0x4034ea(0x1de));_0x367365['dataset'][_0x4034ea(0x266)]=_0x103a3f,_0x367365['dataset']['ladder']=_0x5df7cf;const _0x414d90=_0x3c10c9['approvedAt']?new Date(_0x3c10c9[_0x4034ea(0x25c)][_0x4034ea(0x18d)]*0x3e8)['toLocaleDateString']():'N/A',_0x58f265=document['getElementById']('delete-match-summary');_0x58f265['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x414d90+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x3c10c9['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x3c10c9[_0x4034ea(0x264)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x3c10c9['winnerScore']||0x0)+'\x20-\x20'+(_0x3c10c9['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x3c10c9[_0x4034ea(0x29f)]||_0x4034ea(0x2cb))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x5df7cf+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x367365['classList']['add'](_0x4034ea(0x2e8));}catch(_0xefa11){console['error'](_0x4034ea(0x390),_0xefa11),showNotification(_0x4034ea(0x30d),'error');}}function closeDeleteMatchModal(){const _0x564924=a4_0x1edc9a,_0x255fd2=document[_0x564924(0x30f)]('delete-match-confirm-modal');_0x255fd2&&(_0x255fd2['classList'][_0x564924(0x398)]('active'),_0x255fd2['removeAttribute']('data-match-id'),_0x255fd2['removeAttribute'](_0x564924(0x259)));}async function confirmDeleteMatch(){const _0x30f9b0=a4_0x1edc9a,_0x505719=document[_0x30f9b0(0x30f)](_0x30f9b0(0x1de)),_0x1c06ea=_0x505719['dataset']['matchId'],_0x5e736b=_0x505719['dataset']['ladder'];if(!_0x1c06ea||!_0x5e736b){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x8f95d6=_0x5e736b==='D1'?'approvedMatches':_0x5e736b==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x8f95d6,_0x1c06ea)),showNotification(_0x30f9b0(0x231),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x5e736b['toLowerCase']()]['page']);}catch(_0x1f04bc){console['error']('Error\x20deleting\x20match:',_0x1f04bc),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x1f04bc['message'],_0x30f9b0(0x297));}}async function saveHighlightChanges(){const _0x5cb93e=a4_0x1edc9a,_0x580298=document['getElementById']('edit-highlight-id')['value'],_0x38c236=document['getElementById']('edit-highlight-type-select')[_0x5cb93e(0x161)];let _0x197eb6={'title':document['getElementById'](_0x5cb93e(0x1d7))['value']['trim'](),'type':_0x38c236,'description':document[_0x5cb93e(0x30f)]('edit-highlight-description-input')[_0x5cb93e(0x161)]['trim'](),'videoId':document['getElementById'](_0x5cb93e(0x329))['value'][_0x5cb93e(0x2d7)](),'submittedBy':auth[_0x5cb93e(0x155)]['email']};if(_0x38c236==='match'){_0x197eb6[_0x5cb93e(0x25f)]=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x197eb6[_0x5cb93e(0x1b6)]=document['getElementById']('edit-highlight-map-input')['value'][_0x5cb93e(0x2d7)]();const _0x324920=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x197eb6['matchDate']=_0x324920?Timestamp[_0x5cb93e(0x332)](new Date(_0x324920)):null,_0x197eb6['winnerName']=document[_0x5cb93e(0x30f)]('edit-highlight-winnerName-input')['value']['trim'](),_0x197eb6['winnerScore']=document['getElementById']('edit-highlight-winnerScore-input')['value'][_0x5cb93e(0x2d7)](),_0x197eb6['loserName']=document['getElementById'](_0x5cb93e(0x2a4))[_0x5cb93e(0x161)][_0x5cb93e(0x2d7)](),_0x197eb6['loserScore']=document[_0x5cb93e(0x30f)]('edit-highlight-loserScore-input')['value']['trim'](),_0x197eb6['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x197eb6['mapCreator']=null,_0x197eb6['mapVersion']=null,_0x197eb6['creatorImageUrl']=null,_0x197eb6['achievementPlayer']=null,_0x197eb6['achievementType']=null,_0x197eb6['achievementDetails']=null,_0x197eb6['playerProfileUrl']=null;}else{if(_0x38c236==='creator')_0x197eb6['map']=document['getElementById'](_0x5cb93e(0x340))[_0x5cb93e(0x161)]['trim'](),_0x197eb6['mapCreator']=document[_0x5cb93e(0x30f)]('edit-highlight-mapCreator-input')['value']['trim'](),_0x197eb6['mapVersion']=document[_0x5cb93e(0x30f)]('edit-highlight-mapVersion-input')['value']['trim'](),_0x197eb6['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')[_0x5cb93e(0x161)]['trim'](),_0x197eb6[_0x5cb93e(0x25f)]=null,_0x197eb6['matchDate']=null,_0x197eb6['winnerName']=null,_0x197eb6[_0x5cb93e(0x39a)]=null,_0x197eb6['loserName']=null,_0x197eb6['loserScore']=null,_0x197eb6['matchLink']=null,_0x197eb6['achievementPlayer']=null,_0x197eb6['achievementType']=null,_0x197eb6['achievementDetails']=null,_0x197eb6['playerProfileUrl']=null;else _0x38c236==='achievement'&&(_0x197eb6[_0x5cb93e(0x1eb)]=document['getElementById']('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x197eb6[_0x5cb93e(0x33c)]=document['getElementById']('edit-highlight-achievementType-input')['value']['trim'](),_0x197eb6['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')['value'][_0x5cb93e(0x2d7)](),_0x197eb6['playerProfileUrl']=document[_0x5cb93e(0x30f)](_0x5cb93e(0x21b))['value']['trim'](),_0x197eb6['matchInfo']=null,_0x197eb6['map']=null,_0x197eb6[_0x5cb93e(0x345)]=null,_0x197eb6['winnerName']=null,_0x197eb6['winnerScore']=null,_0x197eb6['loserName']=null,_0x197eb6['loserScore']=null,_0x197eb6['matchLink']=null,_0x197eb6['mapCreator']=null,_0x197eb6[_0x5cb93e(0x288)]=null,_0x197eb6[_0x5cb93e(0x255)]=null);}try{if(_0x580298){_0x197eb6['updatedAt']=serverTimestamp();const _0x28034b=doc(db,_0x5cb93e(0x150),_0x580298);await updateDoc(_0x28034b,_0x197eb6),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x197eb6[_0x5cb93e(0x34b)]=serverTimestamp(),await addDoc(collection(db,_0x5cb93e(0x150)),_0x197eb6),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x45da08){console[_0x5cb93e(0x297)]('Error\x20saving\x20highlight:',_0x45da08),showNotification('Error\x20saving\x20highlight:\x20'+_0x45da08['message'],'error');}}async function resimulateMatch(){const _0x81d9aa=a4_0x1edc9a;try{const _0x5e1aa1=document['getElementById']('resimulate-match-id')['value'];if(!_0x5e1aa1){showNotification('Match\x20ID\x20is\x20required',_0x81d9aa(0x297));return;}const _0x1e911f=auth['currentUser'];if(!_0x1e911f){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x42d760=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5399d1=doc(db,_0x42d760,_0x5e1aa1),_0x233455=await getDoc(_0x5399d1);if(!_0x233455['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x81d9aa(0x297));return;}const _0x555326=_0x233455[_0x81d9aa(0x2ab)](),_0x3ab688=_0x555326['approvedAt']?_0x555326['approvedAt'][_0x81d9aa(0x132)]()['toLocaleString']():_0x555326['matchDate']?_0x555326[_0x81d9aa(0x345)]['toDate']?_0x555326[_0x81d9aa(0x345)]['toDate']()[_0x81d9aa(0x22e)]():new Date(_0x555326[_0x81d9aa(0x345)])['toLocaleString']():'Unknown',_0x282db9='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x555326['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x555326[_0x81d9aa(0x264)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x555326['winnerScore']+'-'+_0x555326[_0x81d9aa(0x280)]+_0x81d9aa(0x2c3)+(_0x555326['mapPlayed']||_0x555326[_0x81d9aa(0x233)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x3ab688+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x5e1aa1+_0x81d9aa(0x16f)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x81d9aa(0x263))['innerHTML']=_0x282db9,document['getElementById'](_0x81d9aa(0x263))[_0x81d9aa(0x13e)][_0x81d9aa(0x18f)]='block',document['getElementById']('confirm-resimulate-btn')['style']['display']='block',window[_0x81d9aa(0x1e5)]={'matchId':_0x5e1aa1,'matchData':_0x555326,'ladder':currentLadder},showNotification(_0x81d9aa(0x130),'info');}catch(_0x241de5){console['error'](_0x81d9aa(0x371),_0x241de5),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x241de5['message'],'error');}}async function confirmResimulateMatch(){const _0x221c73=a4_0x1edc9a;try{const {matchId:_0x28cc93,matchData:_0x3f8c1a,ladder:_0x267284}=window['pendingResimulateData'];if(!_0x28cc93||!_0x3f8c1a){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x248845=_0x267284==='D1'?_0x221c73(0x160):_0x267284==='D2'?'playersD2':'playersD3',_0x3a8720=_0x267284==='D1'?'eloHistory':_0x267284==='D2'?'eloHistoryD2':_0x221c73(0x284),[_0x3d1eaa,_0x11231f]=await Promise['all']([getDocs(query(collection(db,_0x248845),where('username','==',_0x3f8c1a['winnerUsername']))),getDocs(query(collection(db,_0x248845),where('username','==',_0x3f8c1a['loserUsername'])))]);if(_0x3d1eaa['empty']||_0x11231f['empty']){showNotification(_0x221c73(0x373),'error');return;}const _0x236abd=_0x3d1eaa[_0x221c73(0x313)][0x0]['id'],_0x9c9aa4=_0x11231f['docs'][0x0]['id'],_0x55c42c=_0x3d1eaa['docs'][0x0][_0x221c73(0x2ab)](),_0x49cd46=_0x11231f['docs'][0x0]['data'](),[_0x107f8b,_0x172776]=await Promise['all']([getDocs(query(collection(db,_0x3a8720),where('playerId','==',_0x236abd),where('matchId','==',_0x28cc93))),getDocs(query(collection(db,_0x3a8720),where('playerId','==',_0x9c9aa4),where('matchId','==',_0x28cc93)))]),_0x4411c8=!_0x107f8b['empty'],_0x22f9b8=!_0x172776[_0x221c73(0x212)],_0x518021=_0x221c73(0x377)+(_0x4411c8?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x22f9b8?_0x221c73(0x1ea):_0x221c73(0x1df))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x55c42c['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x49cd46['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x55c42c['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x49cd46[_0x221c73(0x3a2)]||_0x221c73(0x2ef))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x221c73(0x30f)]('validation-results-container')[_0x221c73(0x2c9)]=_0x518021,document['getElementById']('validation-results-container')['style']['display']='block';if(_0x4411c8&&_0x22f9b8){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...',_0x221c73(0x2b0));const _0x58bc3f=_0x3f8c1a['approvedAt']||_0x3f8c1a['matchDate']||serverTimestamp(),[_0x43b9d9,_0x413a11]=await Promise['all']([getPlayerEloAtTime(_0x236abd,_0x58bc3f,_0x3a8720),getPlayerEloAtTime(_0x9c9aa4,_0x58bc3f,_0x3a8720)]),{calculateElo:_0x4ce1fd}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x44d5a8,newLoserRating:_0x28aea}=_0x4ce1fd(_0x43b9d9,_0x413a11),_0x4e5462=_0x55c42c[_0x221c73(0x3a2)]||Number['MAX_SAFE_INTEGER'],_0x2c18b8=_0x49cd46['position']||Number[_0x221c73(0x190)];let _0x256ebe=_0x4e5462,_0x24a3bb=_0x2c18b8;_0x4e5462>_0x2c18b8&&(_0x256ebe=_0x2c18b8,_0x24a3bb=_0x2c18b8+0x1);const _0x4a57aa=writeBatch(db),_0x3ad463=doc(db,_0x248845,_0x236abd);_0x4a57aa['update'](_0x3ad463,{'eloRating':_0x44d5a8,'position':_0x256ebe,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x1c2ec6=doc(db,_0x248845,_0x9c9aa4);_0x4a57aa['update'](_0x1c2ec6,{'eloRating':_0x28aea,'position':_0x24a3bb,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x4e5462>_0x2c18b8){const _0x26d4ce=await getDocs(query(collection(db,_0x248845),where(_0x221c73(0x3a2),'>',_0x2c18b8),where(_0x221c73(0x3a2),'<',_0x4e5462)));_0x26d4ce['forEach'](_0xaaf559=>{const _0x32f280=_0x221c73,_0x3c08e0=doc(db,_0x248845,_0xaaf559['id']),_0x4d7a2d=_0xaaf559['data']()[_0x32f280(0x3a2)];_0x4a57aa['update'](_0x3c08e0,{'position':_0x4d7a2d+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x32f280(0x324),'positionAdjustedAt':serverTimestamp()});});}if(!_0x4411c8){const _0x50ebde=doc(collection(db,_0x3a8720));_0x4a57aa['set'](_0x50ebde,{'playerId':_0x236abd,'player':_0x3f8c1a['winnerUsername'],'previousElo':_0x43b9d9,'newElo':_0x44d5a8,'eloChange':_0x44d5a8-_0x43b9d9,'opponentId':_0x9c9aa4,'opponent':_0x3f8c1a['loserUsername'],'matchResult':'win','previousPosition':_0x4e5462,'newPosition':_0x256ebe,'positionChange':_0x256ebe-_0x4e5462,'matchId':_0x28cc93,'timestamp':_0x58bc3f,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x221c73(0x155)]['uid'],'gameMode':_0x267284,'matchScore':_0x3f8c1a['winnerScore']+'-'+_0x3f8c1a['loserScore'],'mapPlayed':_0x3f8c1a['mapPlayed']||_0x3f8c1a['mapName']||'Unknown','note':_0x221c73(0x189)});}if(!_0x22f9b8){const _0x49b053=doc(collection(db,_0x3a8720));_0x4a57aa[_0x221c73(0x135)](_0x49b053,{'playerId':_0x9c9aa4,'player':_0x3f8c1a[_0x221c73(0x264)],'previousElo':_0x413a11,'newElo':_0x28aea,'eloChange':_0x28aea-_0x413a11,'opponentId':_0x236abd,'opponent':_0x3f8c1a['winnerUsername'],'matchResult':'loss','previousPosition':_0x2c18b8,'newPosition':_0x24a3bb,'positionChange':_0x24a3bb-_0x2c18b8,'matchId':_0x28cc93,'timestamp':_0x58bc3f,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x221c73(0x1b8)],'gameMode':_0x267284,'matchScore':_0x3f8c1a['winnerScore']+'-'+_0x3f8c1a[_0x221c73(0x280)],'mapPlayed':_0x3f8c1a['mapPlayed']||_0x3f8c1a['mapName']||_0x221c73(0x2ef),'note':_0x221c73(0x189)});}const _0x3aa8c2=_0x267284==='D1'?_0x221c73(0x252):_0x267284==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3ddba3=doc(db,_0x3aa8c2,_0x28cc93);_0x4a57aa['update'](_0x3ddba3,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x55c42c['eloRating'],'originalLoserElo':_0x49cd46['eloRating'],'originalWinnerPosition':_0x4e5462,'originalLoserPosition':_0x2c18b8,'resimulatedWinnerElo':_0x44d5a8,'resimulatedLoserElo':_0x28aea,'resimulatedWinnerPosition':_0x256ebe,'resimulatedLoserPosition':_0x24a3bb}),await _0x4a57aa['commit']();const _0x32e297=(!_0x4411c8?0x1:0x0)+(!_0x22f9b8?0x1:0x0),_0x4482dd=_0x4e5462!==_0x256ebe||_0x2c18b8!==_0x24a3bb;showNotification('Match\x20resimulated\x20successfully!\x20'+(_0x221c73(0x364)+_0x32e297+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x43b9d9+'→'+_0x44d5a8+_0x221c73(0x2a6)+(_0x44d5a8-_0x43b9d9)+'),\x20')+('Loser\x20'+_0x413a11+'→'+_0x28aea+'\x20('+(_0x28aea-_0x413a11)+_0x221c73(0x19f))+(''+(_0x4482dd?'Positions\x20updated:\x20Winner\x20'+_0x4e5462+'→'+_0x256ebe+_0x221c73(0x191)+_0x2c18b8+'→'+_0x24a3bb:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x1b8b83){console[_0x221c73(0x297)]('Error\x20resimulating\x20match:',_0x1b8b83),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x1b8b83['message'],_0x221c73(0x297));}}async function getPlayerEloAtTime(_0x161890,_0x999423,_0x346030){const _0xa81ee0=a4_0x1edc9a;try{const _0xc8e7c5=_0x999423['toDate']?_0x999423['toDate']():new Date(_0x999423),_0x547910=query(collection(db,_0x346030),where('playerId','==',_0x161890),where(_0xa81ee0(0x220),'<',_0x999423),orderBy(_0xa81ee0(0x220),'desc'),limit(0x1)),_0x48a0f0=await getDocs(_0x547910);if(!_0x48a0f0[_0xa81ee0(0x212)]){const _0x3ac5f0=_0x48a0f0[_0xa81ee0(0x313)][0x0]['data']();return console['log'](_0xa81ee0(0x287)+_0x161890+'\x20before\x20match:\x20'+_0x3ac5f0['newElo']),_0x3ac5f0['newElo'];}else return console[_0xa81ee0(0x35f)](_0xa81ee0(0x322)+_0x161890+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x5cf3de){return console[_0xa81ee0(0x297)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x161890+':',_0x5cf3de),0x4b0;}}function openResimulateModal(){const _0x24af1a=a4_0x1edc9a;console['log']('openResimulateModal\x20called!');const _0x496be9=document[_0x24af1a(0x30f)]('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x496be9);if(!_0x496be9){console['error'](_0x24af1a(0x37a));return;}_0x496be9['style']['display']=_0x24af1a(0x140),_0x496be9['style'][_0x24af1a(0x19d)]=_0x24af1a(0x1ff),_0x496be9['style']['opacity']='1',_0x496be9['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x496be9)['display']);const _0x200fa5=document['getElementById'](_0x24af1a(0x263)),_0x2b721a=document['getElementById']('validation-results-container'),_0x67c9f4=document['getElementById']('confirm-resimulate-btn'),_0x20925b=document[_0x24af1a(0x30f)]('resimulate-match-id');if(_0x200fa5)_0x200fa5['innerHTML']='';if(_0x2b721a)_0x2b721a['innerHTML']='';if(_0x67c9f4)_0x67c9f4['style']['display']='none';if(_0x20925b)_0x20925b['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x4a21f2=a4_0x1edc9a;document[_0x4a21f2(0x30f)]('resimulate-modal')['style']['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x511fec=a4_0x1edc9a;console['log'](_0x511fec(0x299));try{await Promise[_0x511fec(0x28f)]([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x511fec(0x203),'success');}catch(_0x37891e){console['error']('Error\x20loading\x20points\x20data:',_0x37891e),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x37891e['message'],_0x511fec(0x297));}}function renderPointsOverview(_0x4b8fea){const _0x3558ce=document['getElementById']('points-overview-table-body');if(!_0x3558ce)return;if(_0x4b8fea['length']===0x0){_0x3558ce['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x3558ce['innerHTML']='',_0x4b8fea['forEach'](_0x3912ce=>{const _0xb5122d=a4_0x2464,_0x2237ca=document[_0xb5122d(0x131)]('tr'),_0x2f8d9a=_0x3912ce[_0xb5122d(0x2a8)]||_0x3912ce['username']||'Unknown\x20User',_0x4971ef=_0x3912ce['email']||'No\x20email',_0x41b4aa=_0x3912ce['points']||0x0,_0xd3ad24=_0x3912ce['lastPointsModified']?new Date(_0x3912ce['lastPointsModified'][_0xb5122d(0x18d)]*0x3e8)['toLocaleDateString']():'Never';_0x2237ca['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x2f8d9a+_0xb5122d(0x265)+_0x4971ef+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x41b4aa>0x3e8?_0xb5122d(0x2d1):_0x41b4aa>0x1f4?_0xb5122d(0x1ab):'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x41b4aa['toLocaleString']()+_0xb5122d(0x221)+_0xd3ad24+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x3912ce['id']+_0xb5122d(0x302)+_0x3912ce['id']+_0xb5122d(0x366),_0x3558ce[_0xb5122d(0x385)](_0x2237ca);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x48ec6c=a4_0x1edc9a;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0xf3b17b=document['querySelectorAll'](_0x48ec6c(0x2ed));console['log'](_0x48ec6c(0x326)+_0xf3b17b['length']+'\x20quick\x20edit\x20buttons'),_0xf3b17b[_0x48ec6c(0x304)](_0x1b8759=>{const _0x4812ae=_0x48ec6c,_0x1a379c=_0x1b8759['cloneNode'](!![]);_0x1b8759['parentNode'][_0x4812ae(0x16d)](_0x1a379c,_0x1b8759);});const _0x16ac7f=document['querySelectorAll']('.view-history-btn');console['log'](_0x48ec6c(0x326)+_0x16ac7f['length']+'\x20view\x20history\x20buttons'),_0x16ac7f[_0x48ec6c(0x304)](_0x4aa746=>{const _0x2d2870=_0x48ec6c,_0x5bbe42=_0x4aa746['cloneNode'](!![]);_0x4aa746['parentNode'][_0x2d2870(0x16d)](_0x5bbe42,_0x4aa746);}),document[_0x48ec6c(0x254)]('.quick-edit-btn')['forEach'](_0x511b8f=>{const _0x5a2360=_0x48ec6c;_0x511b8f['addEventListener'](_0x5a2360(0x1f0),function(_0x1c4419){const _0x9d6690=_0x5a2360;_0x1c4419['preventDefault'](),_0x1c4419[_0x9d6690(0x1aa)]();const _0x1294c4=this[_0x9d6690(0x305)][_0x9d6690(0x2c2)];console['log'](_0x9d6690(0x285),_0x1294c4);if(!_0x1294c4){console['error'](_0x9d6690(0x149));return;}this[_0x9d6690(0x13e)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x1294c4);});}),document[_0x48ec6c(0x254)](_0x48ec6c(0x39e))['forEach'](_0x4e069f=>{const _0x11991f=_0x48ec6c;_0x4e069f['addEventListener'](_0x11991f(0x1f0),function(_0x55cb67){const _0x102297=_0x11991f;_0x55cb67['preventDefault'](),_0x55cb67['stopPropagation']();const _0x5a5eda=this['dataset']['userId'];console['log'](_0x102297(0x183),_0x5a5eda);if(!_0x5a5eda){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x102297(0x13e)]['opacity']=_0x102297(0x187),setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x5a5eda);});}),console['log'](_0x48ec6c(0x388));}async function openQuickEditModal(_0x4d3b1b){const _0xeb4568=a4_0x1edc9a;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x4d3b1b);const _0x5ba535=document[_0xeb4568(0x30f)](_0xeb4568(0x175));if(!_0x5ba535){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...','info');const _0x5da97b=doc(db,'userProfiles',_0x4d3b1b),_0x439e6a=await getDoc(_0x5da97b);if(!_0x439e6a[_0xeb4568(0x310)]()){showNotification('User\x20not\x20found','error');return;}const _0xe3c132=_0x439e6a['data']();console['log'](_0xeb4568(0x1af),_0xe3c132);const _0x5e962d=document['getElementById']('quick-edit-user-id'),_0x369118=document['getElementById'](_0xeb4568(0x2e6)),_0x4e9a7c=document[_0xeb4568(0x30f)]('quick-edit-email'),_0x1235a7=document[_0xeb4568(0x30f)]('quick-edit-current-points'),_0x2b1ebb=document['getElementById'](_0xeb4568(0x12a));if(!_0x5e962d||!_0x369118||!_0x4e9a7c||!_0x1235a7||!_0x2b1ebb){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0xeb4568(0x380),'error');return;}_0x5e962d['value']=_0x4d3b1b,_0x369118[_0xeb4568(0x261)]=_0xe3c132[_0xeb4568(0x2a8)]||_0xe3c132['username']||'Unknown\x20User',_0x4e9a7c[_0xeb4568(0x261)]=_0xe3c132['email']||_0xeb4568(0x1d6),_0x1235a7['textContent']=(_0xe3c132['points']||0x0)['toLocaleString'](),_0x2b1ebb[_0xeb4568(0x33d)]();const _0xc4f3fb=document['getElementById']('quick-add');_0xc4f3fb&&(_0xc4f3fb['checked']=!![]);_0x5ba535['classList'][_0xeb4568(0x143)](_0xeb4568(0x2e8)),console['log'](_0xeb4568(0x279));const _0x21b1b9=document[_0xeb4568(0x30f)](_0xeb4568(0x211));_0x21b1b9&&setTimeout(()=>_0x21b1b9['focus'](),0x64);}catch(_0x128f61){console['error'](_0xeb4568(0x2cd),_0x128f61),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x128f61['message'],_0xeb4568(0x297));}}function closeQuickEditModal(){const _0x2b0075=a4_0x1edc9a,_0x257c00=document['getElementById']('quick-edit-points-modal');_0x257c00&&_0x257c00[_0x2b0075(0x1ad)][_0x2b0075(0x398)]('active');}async function handleQuickEditPoints(_0x5433a6){const _0x39f58b=a4_0x1edc9a;_0x5433a6['preventDefault']();const _0xac8414=document['getElementById'](_0x39f58b(0x33e))['value'],_0x31ae19=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0x475244=parseInt(document[_0x39f58b(0x30f)]('quick-points-amount')['value']),_0x46af81=document['getElementById']('quick-points-reason')['value']['trim']();console['log']('Processing\x20points\x20edit:',{'userId':_0xac8414,'action':_0x31ae19,'amount':_0x475244,'reason':_0x46af81});if(!_0xac8414||!_0x475244||_0x475244<0x0){showNotification('Please\x20enter\x20valid\x20data',_0x39f58b(0x297));return;}try{await modifyUserPoints(_0xac8414,_0x31ae19,_0x475244,_0x46af81),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x39f58b(0x14d),'success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0xac8414);}catch(_0x503919){console[_0x39f58b(0x297)]('Error\x20updating\x20points:',_0x503919),showNotification(_0x39f58b(0x369)+_0x503919['message'],_0x39f58b(0x297));}}async function searchUsersForPoints(){const _0x195405=a4_0x1edc9a,_0x1d0c5e=document[_0x195405(0x30f)]('points-user-search')['value']['trim']()[_0x195405(0x300)](),_0x5d499f=document['getElementById'](_0x195405(0x2e1));if(!_0x1d0c5e||_0x1d0c5e['length']<0x2){_0x5d499f[_0x195405(0x2c9)]='';return;}_0x5d499f['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x128ebd=collection(db,'userProfiles'),_0x321e90=await getDocs(_0x128ebd),_0x582f61=[];_0x321e90[_0x195405(0x304)](_0x40b4d0=>{const _0x20e13a=_0x195405,_0x3468c8=_0x40b4d0['data'](),_0x38f6e0=(_0x3468c8['displayName']||_0x3468c8['username']||'')[_0x20e13a(0x300)](),_0x36a1f0=(_0x3468c8['email']||'')[_0x20e13a(0x300)]();(_0x38f6e0[_0x20e13a(0x2a7)](_0x1d0c5e)||_0x36a1f0[_0x20e13a(0x2a7)](_0x1d0c5e))&&_0x582f61['push']({'id':_0x40b4d0['id'],..._0x3468c8});});if(_0x582f61[_0x195405(0x309)]===0x0){_0x5d499f['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x5d499f[_0x195405(0x2c9)]='',_0x582f61['forEach'](_0x17c6b1=>{const _0x5b94da=_0x195405,_0x214f2a=document['createElement']('div');_0x214f2a['className']='search-result-item',_0x214f2a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x17c6b1['displayName']||_0x17c6b1['username']||_0x5b94da(0x2ef))+_0x5b94da(0x1c6)+(_0x17c6b1['email']||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x17c6b1['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x214f2a['addEventListener']('click',()=>selectUserForPoints(_0x17c6b1)),_0x5d499f['appendChild'](_0x214f2a);});}catch(_0x4600b4){console[_0x195405(0x297)]('Error\x20searching\x20users:',_0x4600b4),_0x5d499f['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x34f94c){const _0x32abe2=a4_0x1edc9a;document['getElementById']('selected-user-name')['textContent']=_0x34f94c['displayName']||_0x34f94c['username']||'Unknown\x20User',document[_0x32abe2(0x30f)]('selected-user-points')[_0x32abe2(0x261)]=(_0x34f94c['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x34f94c['id'],document['getElementById'](_0x32abe2(0x22c))['style']['display']=_0x32abe2(0x140),document[_0x32abe2(0x30f)]('points-management-forms')[_0x32abe2(0x13e)]['display']='block',document['getElementById']('user-search-results')['innerHTML']='',document[_0x32abe2(0x30f)]('points-user-search')['value']='';}async function handleModifyPoints(_0x14f51b){const _0x526248=a4_0x1edc9a;_0x14f51b['preventDefault']();const _0x467f12=document['getElementById']('selected-user-id')[_0x526248(0x161)],_0x42489c=document['getElementById']('points-action')['value'],_0x4151e7=parseInt(document['getElementById'](_0x526248(0x24f))['value']),_0x11487a=document['getElementById'](_0x526248(0x17e))['value']['trim']();if(!_0x467f12||!_0x4151e7||_0x4151e7<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x467f12,_0x42489c,_0x4151e7,_0x11487a),document['getElementById']('modify-points-form')[_0x526248(0x33d)]();const _0x1e79cb=doc(db,_0x526248(0x2b1),_0x467f12),_0x47d3d6=await getDoc(_0x1e79cb);if(_0x47d3d6[_0x526248(0x310)]()){const _0x21731f=_0x47d3d6['data']();document['getElementById'](_0x526248(0x1fc))['textContent']=(_0x21731f[_0x526248(0x234)]||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x458c6a){console[_0x526248(0x297)]('Error\x20modifying\x20points:',_0x458c6a),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x458c6a['message'],'error');}}async function loadPointsHistory(){const _0xf54b09=a4_0x1edc9a,_0x39f8ca=document['getElementById'](_0xf54b09(0x2b7));if(!_0x39f8ca)return;_0x39f8ca['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x361df0=collection(db,'pointsHistory'),_0x198ec0=query(_0x361df0,orderBy('timestamp','desc'),limit(0x32)),_0xb341dc=await getDocs(_0x198ec0);if(_0xb341dc['empty']){_0x39f8ca[_0xf54b09(0x2c9)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x39f8ca[_0xf54b09(0x2c9)]='',_0xb341dc['forEach'](_0x17382f=>{const _0x1ada53=_0xf54b09,_0x4a189d=_0x17382f['data'](),_0x5741f7=document['createElement']('tr'),_0xc14767=_0x4a189d[_0x1ada53(0x220)]?new Date(_0x4a189d['timestamp']['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x323ffb='';switch(_0x4a189d['action']){case'add':_0x323ffb='Added\x20'+_0x4a189d['amount']+'\x20points';break;case _0x1ada53(0x2c1):_0x323ffb='Subtracted\x20'+_0x4a189d['amount']+'\x20points';break;case'set':_0x323ffb=_0x1ada53(0x169)+_0x4a189d['amount']+'\x20points';break;default:_0x323ffb=_0x4a189d['action']+'\x20'+_0x4a189d['amount']+'\x20points';}_0x5741f7[_0x1ada53(0x2c9)]=_0x1ada53(0x320)+_0xc14767+_0x1ada53(0x17c)+(_0x4a189d['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x323ffb+_0x1ada53(0x35e)+_0x4a189d[_0x1ada53(0x21c)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4a189d[_0x1ada53(0x2bd)]||0x0)+'\x20→\x20'+(_0x4a189d['newPoints']||0x0)+_0x1ada53(0x35c)+(_0x4a189d[_0x1ada53(0x2f6)]||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4a189d[_0x1ada53(0x1a7)]||'Unknown\x20Admin')+_0x1ada53(0x1e3),_0x39f8ca['appendChild'](_0x5741f7);});}catch(_0x5976fd){console[_0xf54b09(0x297)]('Error\x20loading\x20points\x20history:',_0x5976fd),_0x39f8ca['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x5976fd[_0xf54b09(0x173)]+_0xf54b09(0x2dd);}}function filterPointsOverview(){const _0x2b0eea=a4_0x1edc9a,_0x5b24f3=document[_0x2b0eea(0x30f)]('points-overview-search')['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x29b14f=window['allUsersPoints'][_0x2b0eea(0x1f5)](_0xef8895=>{const _0x49177e=_0x2b0eea,_0xd751fb=(_0xef8895['displayName']||_0xef8895[_0x49177e(0x195)]||'')['toLowerCase'](),_0x267d48=(_0xef8895[_0x49177e(0x361)]||'')['toLowerCase']();return _0xd751fb['includes'](_0x5b24f3)||_0x267d48[_0x49177e(0x2a7)](_0x5b24f3);});renderPointsOverview(_0x29b14f);}function sortPointsOverview(){const _0x5455b5=a4_0x1edc9a,_0x411294=document['getElementById']('points-sort-order')[_0x5455b5(0x161)];if(!window['allUsersPoints'])return;const _0x4c1a8a=[...window['allUsersPoints']];switch(_0x411294){case _0x5455b5(0x2ce):_0x4c1a8a['sort']((_0x377164,_0x2bee9e)=>(_0x2bee9e[_0x5455b5(0x234)]||0x0)-(_0x377164[_0x5455b5(0x234)]||0x0));break;case'points-asc':_0x4c1a8a['sort']((_0x39cab8,_0x33078f)=>(_0x39cab8['points']||0x0)-(_0x33078f[_0x5455b5(0x234)]||0x0));break;case'name-asc':_0x4c1a8a['sort']((_0x3bd6a7,_0xa0080d)=>{const _0x508b98=_0x5455b5,_0x4fbe50=(_0x3bd6a7[_0x508b98(0x2a8)]||_0x3bd6a7['username']||'')['toLowerCase'](),_0x50daff=(_0xa0080d[_0x508b98(0x2a8)]||_0xa0080d[_0x508b98(0x195)]||'')['toLowerCase']();return _0x4fbe50['localeCompare'](_0x50daff);});break;case'name-desc':_0x4c1a8a['sort']((_0x2c831d,_0x58b7ca)=>{const _0x24efa9=_0x5455b5,_0x471223=(_0x2c831d['displayName']||_0x2c831d[_0x24efa9(0x195)]||'')['toLowerCase'](),_0x98aeb7=(_0x58b7ca[_0x24efa9(0x2a8)]||_0x58b7ca['username']||'')['toLowerCase']();return _0x98aeb7['localeCompare'](_0x471223);});break;}renderPointsOverview(_0x4c1a8a);}async function handleAwardItem(_0x1aac53){const _0x128878=a4_0x1edc9a;_0x1aac53['preventDefault']();const _0x207528=document['getElementById']('selected-user-id')['value'],_0x1e21a2=document['getElementById'](_0x128878(0x2aa))['value'],_0xdc6a9=document['getElementById']('award-reason')['value']['trim']();if(!_0x207528||!_0x1e21a2){showNotification(_0x128878(0x2e0),'error');return;}try{showNotification(_0x128878(0x32a),'success'),document['getElementById']('award-item-form')['reset']();}catch(_0x3b14db){console[_0x128878(0x297)](_0x128878(0x253),_0x3b14db),showNotification(_0x128878(0x370)+_0x3b14db['message'],'error');}}async function loadUserPointsHistory(_0x50078e){const _0x26af45=a4_0x1edc9a;try{const _0x5a2c40=collection(db,'pointsHistory'),_0x9af906=query(_0x5a2c40,where(_0x26af45(0x2c2),'==',_0x50078e),orderBy('timestamp',_0x26af45(0x352))),_0x3d7a69=await getDocs(_0x9af906);console['log']('Found\x20'+_0x3d7a69['size']+_0x26af45(0x12f)+_0x50078e),showNotification('User\x20has\x20'+_0x3d7a69[_0x26af45(0x312)]+_0x26af45(0x21a),_0x26af45(0x2b0));}catch(_0x4f3423){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x4f3423),showNotification(_0x26af45(0x395),_0x26af45(0x297));}}async function initializeUserPointsField(){const _0x4ff6b6=a4_0x1edc9a;try{console[_0x4ff6b6(0x35f)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x2b985d=collection(db,'userProfiles'),_0x459f47=await getDocs(_0x2b985d);if(_0x459f47['empty']){console['log'](_0x4ff6b6(0x384));return;}let _0x26486c=0x0,_0x34f5c7=0x0;const _0x2e4ca4=writeBatch(db);let _0x361718=0x0;return console['log']('Found\x20'+_0x459f47[_0x4ff6b6(0x312)]+_0x4ff6b6(0x196)),_0x459f47['forEach'](_0x224a40=>{const _0x2c50a8=_0x4ff6b6,_0x460482=_0x224a40['data']();_0x460482['points']===undefined||_0x460482['points']===null?(_0x2e4ca4[_0x2c50a8(0x1fb)](_0x224a40['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x26486c++,_0x361718++,console['log']('Queued\x20'+(_0x460482['displayName']||_0x460482['username']||_0x460482[_0x2c50a8(0x361)]||'Unknown')+'\x20for\x20points\x20initialization')):(_0x34f5c7++,console['log']((_0x460482['displayName']||_0x460482[_0x2c50a8(0x195)]||_0x460482['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x460482['points'])),_0x361718>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x26486c>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x26486c+_0x4ff6b6(0x1a6)),await _0x2e4ca4[_0x4ff6b6(0x392)](),console['log']('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x26486c+'\x20users')):console['log'](_0x4ff6b6(0x1a0)),console['log'](_0x4ff6b6(0x14b)+_0x459f47['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x26486c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x34f5c7),showNotification(_0x4ff6b6(0x31e)+_0x26486c+'\x20users.\x20'+_0x34f5c7+_0x4ff6b6(0x381),'success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x459f47[_0x4ff6b6(0x312)],'usersUpdated':_0x26486c,'usersAlreadyHadPoints':_0x34f5c7};}catch(_0x2ef47d){console[_0x4ff6b6(0x297)]('Error\x20initializing\x20points\x20field:',_0x2ef47d),showNotification(_0x4ff6b6(0x239)+_0x2ef47d[_0x4ff6b6(0x173)],'error');throw _0x2ef47d;}}function addPointsMigrationButton(){const _0x433e09=a4_0x1edc9a,_0x263618=document['getElementById'](_0x433e09(0x170));if(!_0x263618)return;if(document[_0x433e09(0x30f)](_0x433e09(0x1ee)))return;const _0x1dbd50=document['createElement'](_0x433e09(0x2c5));_0x1dbd50['className']='migration-section',_0x1dbd50[_0x433e09(0x13e)]['marginBottom']=_0x433e09(0x1c4),_0x1dbd50['style'][_0x433e09(0x1c1)]='15px',_0x1dbd50['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x1dbd50['style']['border']=_0x433e09(0x250),_0x1dbd50[_0x433e09(0x13e)]['borderRadius']=_0x433e09(0x17d),_0x1dbd50['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x584755=_0x263618[_0x433e09(0x164)]('.section-header');_0x584755&&_0x584755['insertAdjacentElement'](_0x433e09(0x217),_0x1dbd50),document['getElementById']('migrate-points-btn')[_0x433e09(0x16b)]('click',async function(){const _0x5e7b42=_0x433e09;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this[_0x5e7b42(0x1d8)]=!![],this['innerHTML']=_0x5e7b42(0x18a);try{await initializeUserPointsField(),this[_0x5e7b42(0x2c9)]='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x458555=_0x5e7b42;_0x1dbd50[_0x458555(0x13e)]['display']='none';},0xbb8);}catch(_0x2d25cc){this['innerHTML']=_0x5e7b42(0x2c8),this['disabled']=![];}}});}function setupManagePointsSection(){const _0x105afd=a4_0x1edc9a;console['log'](_0x105afd(0x15c)),addPointsMigrationButton();const _0x1bf617=document['getElementById']('points-user-search');_0x1bf617&&_0x1bf617['addEventListener'](_0x105afd(0x31f),debounce(searchUsersForPoints,0x12c));const _0x1df0ef=document[_0x105afd(0x30f)]('modify-points-form');_0x1df0ef&&_0x1df0ef['addEventListener']('submit',handleModifyPoints);const _0x293d1b=document[_0x105afd(0x30f)](_0x105afd(0x13a));_0x293d1b&&_0x293d1b['addEventListener']('submit',handleAwardItem);const _0x200d8a=document['getElementById'](_0x105afd(0x295));_0x200d8a&&_0x200d8a['addEventListener'](_0x105afd(0x31f),debounce(filterPointsOverview,0x12c));const _0x1015a1=document['getElementById']('points-sort-order');_0x1015a1&&_0x1015a1[_0x105afd(0x16b)](_0x105afd(0x178),sortPointsOverview);const _0x5d88b9=document['getElementById']('refresh-points-overview');_0x5d88b9&&_0x5d88b9[_0x105afd(0x16b)]('click',loadPointsOverview);const _0x1961c0=document['getElementById']('bulk-award-points-btn');_0x1961c0&&_0x1961c0['addEventListener']('click',async()=>{const _0x348b72=_0x105afd;confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x1961c0[_0x348b72(0x1d8)]=!![],_0x1961c0['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x426b3e(),_0x1961c0['disabled']=![],_0x1961c0['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x453cd2=document['getElementById']('award-all-pilots-btn');_0x453cd2&&_0x453cd2['addEventListener'](_0x105afd(0x1f0),awardPointsToAllPilots);async function _0x426b3e(){const _0x4c1644=_0x105afd;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x321dec={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'≥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x3ab973=0x0,_0x1076f6=0x0,_0x1238ca=0x0,_0x242cd8=0x0,_0x4b30e5=0x0,_0x6b9842=0x0;const _0xb99fd7=new Set(),_0x4da464=collection(db,'pointsHistory'),_0x24dc69=query(_0x4da464,where('reason','>=','Bulk\x20award:'),where('reason','<=','Bulk\x20award:')),_0x7553d7=await getDocs(_0x24dc69);_0x7553d7[_0x4c1644(0x304)](_0xb0f210=>{const _0x1a025d=_0x4c1644,_0x37013c=_0xb0f210[_0x1a025d(0x2ab)](),_0x3674a3=_0x37013c[_0x1a025d(0x2f6)]||'',_0x3dcc8b=_0x3674a3['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x3dcc8b&&_0x3dcc8b[0x1]&&_0xb99fd7[_0x1a025d(0x143)](_0x3dcc8b[0x1]);}),console['log']('Found\x20'+_0xb99fd7['size']+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x3f8b30,_0xbd4bf7,_0x101a3d]=await Promise['all']([getDocs(collection(db,_0x4c1644(0x252))),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,_0x4c1644(0x247)))]),_0x188fe7=_0x3f8b30['size']+_0xbd4bf7['size']+_0x101a3d['size'];showNotification('Found\x20'+_0x188fe7+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x583543=async(_0x5913fc,_0x549a78)=>{const _0x5a32d1=_0x4c1644;let _0x1eb25c=writeBatch(db);const _0x29d753=[];let _0x58eca7=0x0;for(const _0x1c33f3 of _0x5913fc['docs']){try{if(_0xb99fd7[_0x5a32d1(0x1f8)](_0x1c33f3['id'])){if(_0x549a78==='D1')_0x6b9842++;if(_0x549a78==='D2')_0x6b9842++;if(_0x549a78==='D3')_0x6b9842++;continue;}const _0x269f24=_0x1c33f3[_0x5a32d1(0x2ab)](),_0x3ee0=_0x269f24['subgameType']||_0x5a32d1(0x26d),_0x66893a=_0x321dec[_0x3ee0]||0xa;let _0x429ead=_0x269f24['winnerId'];if(!_0x429ead&&_0x269f24['winnerUsername']){const [_0x215935,_0x540e56,_0x5f5ad3]=await Promise['all']([getDocs(query(collection(db,_0x5a32d1(0x160)),where('username','==',_0x269f24[_0x5a32d1(0x277)]))),getDocs(query(collection(db,_0x5a32d1(0x26c)),where('username','==',_0x269f24['winnerUsername']))),getDocs(query(collection(db,_0x5a32d1(0x37e)),where('username','==',_0x269f24[_0x5a32d1(0x277)])))]);if(!_0x215935[_0x5a32d1(0x212)])_0x429ead=_0x215935['docs'][0x0]['id'];else{if(!_0x540e56['empty'])_0x429ead=_0x540e56['docs'][0x0]['id'];else{if(!_0x5f5ad3['empty'])_0x429ead=_0x5f5ad3['docs'][0x0]['id'];}}}let _0x6baf96=_0x269f24['loserId'];if(!_0x6baf96&&_0x269f24['loserUsername']){const [_0x20c666,_0x4cac85,_0x154e2c]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x269f24['loserUsername']))),getDocs(query(collection(db,'playersD2'),where(_0x5a32d1(0x195),'==',_0x269f24['loserUsername']))),getDocs(query(collection(db,_0x5a32d1(0x37e)),where('username','==',_0x269f24[_0x5a32d1(0x264)])))]);if(!_0x20c666[_0x5a32d1(0x212)])_0x6baf96=_0x20c666['docs'][0x0]['id'];else{if(!_0x4cac85[_0x5a32d1(0x212)])_0x6baf96=_0x4cac85['docs'][0x0]['id'];else{if(!_0x154e2c['empty'])_0x6baf96=_0x154e2c['docs'][0x0]['id'];}}}if(_0x429ead&&_0x6baf96){const _0x24db38=doc(db,'userProfiles',_0x429ead),_0x3884ef=doc(db,'userProfiles',_0x6baf96),[_0x1ee642,_0x18c2e7]=await Promise[_0x5a32d1(0x28f)]([getDoc(_0x24db38),getDoc(_0x3884ef)]);if(_0x1ee642['exists']()){const _0x326221=_0x1ee642['data'](),_0x28ea9c=_0x326221['points']||0x0;_0x1eb25c['update'](_0x24db38,{'points':_0x28ea9c+_0x66893a,'lastPointsModified':serverTimestamp()}),_0x29d753[_0x5a32d1(0x246)]({'userId':_0x429ead,'userEmail':_0x326221['email']||_0x5a32d1(0x356),'displayName':_0x326221[_0x5a32d1(0x2a8)]||_0x269f24['winnerUsername']||_0x5a32d1(0x158),'action':_0x5a32d1(0x143),'amount':_0x66893a,'previousPoints':_0x28ea9c,'newPoints':_0x28ea9c+_0x66893a,'reason':'Bulk\x20award:\x20'+_0x3ee0+_0x5a32d1(0x34e)+_0x1c33f3['id']+_0x5a32d1(0x33b)+_0x549a78,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}if(_0x18c2e7['exists']()){const _0x3a1507=_0x18c2e7['data'](),_0x18fbe4=_0x3a1507[_0x5a32d1(0x234)]||0x0;_0x1eb25c['update'](_0x3884ef,{'points':_0x18fbe4+_0x66893a,'lastPointsModified':serverTimestamp()}),_0x29d753[_0x5a32d1(0x246)]({'userId':_0x6baf96,'userEmail':_0x3a1507[_0x5a32d1(0x361)]||'unknown','displayName':_0x3a1507['displayName']||_0x269f24['loserUsername']||'Unknown\x20User','action':'add','amount':_0x66893a,'previousPoints':_0x18fbe4,'newPoints':_0x18fbe4+_0x66893a,'reason':_0x5a32d1(0x386)+_0x3ee0+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x1c33f3['id']+_0x5a32d1(0x33b)+_0x549a78,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x242cd8+=_0x66893a*0x2,_0x58eca7+=0x2,_0xb99fd7['add'](_0x1c33f3['id']);if(_0x58eca7>=0x190){await _0x1eb25c['commit']();for(const _0x47c698 of _0x29d753){await addDoc(collection(db,'pointsHistory'),_0x47c698);}_0x1eb25c=writeBatch(db),_0x58eca7=0x0,_0x29d753['length']=0x0;}}}catch(_0x2fd82c){console[_0x5a32d1(0x297)]('Error\x20processing\x20'+_0x549a78+'\x20match\x20'+_0x1c33f3['id']+':',_0x2fd82c),_0x4b30e5++;}}if(_0x58eca7>0x0){await _0x1eb25c[_0x5a32d1(0x392)]();for(const _0x20a8c0 of _0x29d753){await addDoc(collection(db,'pointsHistory'),_0x20a8c0);}}return{'processed':_0x549a78==='D1'?_0x3ab973:_0x549a78==='D2'?_0x1076f6:_0x1238ca};};await _0x583543(_0x3f8b30,'D1'),await _0x583543(_0xbd4bf7,'D2'),await _0x583543(_0x101a3d,'D3'),showNotification(_0x4c1644(0x34f)+_0x3ab973+'\x20D1\x20matches,\x20'+_0x1076f6+_0x4c1644(0x14f)+_0x1238ca+_0x4c1644(0x1ba)+(_0x4c1644(0x256)+_0x242cd8+_0x4c1644(0x2a2)+_0x6b9842+_0x4c1644(0x16c)+_0x4b30e5),_0x4c1644(0x2da)),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x34e3a7){console['error']('Error\x20in\x20bulk\x20award\x20points:',_0x34e3a7),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x34e3a7['message'],'error');}}const _0x7d1c0=document[_0x105afd(0x30f)]('quick-edit-points-modal');if(_0x7d1c0){console['log'](_0x105afd(0x32c));const _0xa196f4=_0x7d1c0['querySelector']('.close-btn');_0xa196f4?_0xa196f4[_0x105afd(0x16b)]('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x105afd(0x20a));const _0x2ebad7=document[_0x105afd(0x30f)](_0x105afd(0x243));_0x2ebad7?_0x2ebad7[_0x105afd(0x16b)](_0x105afd(0x1f0),function(){const _0x1caee4=_0x105afd;console[_0x1caee4(0x35f)](_0x1caee4(0x28e)),closeQuickEditModal();}):console['warn'](_0x105afd(0x31a));const _0x3bdb65=document['getElementById']('quick-edit-points-form');_0x3bdb65?_0x3bdb65['addEventListener'](_0x105afd(0x289),function(_0x5df2b8){const _0x1712b2=_0x105afd;console['log'](_0x1712b2(0x171)),handleQuickEditPoints(_0x5df2b8);}):console['error'](_0x105afd(0x18e)),_0x7d1c0['addEventListener']('click',function(_0x1e0613){const _0x201b82=_0x105afd;_0x1e0613['target']===_0x7d1c0&&(console[_0x201b82(0x35f)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x3abef5=a4_0x1edc9a;try{const _0xcd6fe7=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0xcd6fe7||isNaN(_0xcd6fe7)){showNotification(_0x3abef5(0x3a0),_0x3abef5(0x297));return;}if(!confirm('This\x20will\x20award\x20'+_0xcd6fe7+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification(_0x3abef5(0x1fe),_0x3abef5(0x2b0));const [_0x3fa1f1,_0x5809b4,_0x49b66f]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x3abef5(0x37e)))]);console['log']('Found\x20'+_0x3fa1f1['size']+_0x3abef5(0x193)+_0x5809b4['size']+_0x3abef5(0x2c7)+_0x49b66f['size']+'\x20D3\x20pilots');const _0x328e50=_0x3fa1f1['size']+_0x5809b4[_0x3abef5(0x312)]+_0x49b66f['size'],_0x2456f7=new Map();_0x3fa1f1[_0x3abef5(0x304)](_0x26df4a=>{const _0x48080e=_0x26df4a['data']();_0x2456f7['set'](_0x26df4a['id'],{'username':_0x48080e['username'],'ladder':'D1'});}),_0x5809b4[_0x3abef5(0x304)](_0x4dd6b5=>{const _0x15b22f=_0x3abef5,_0x223c23=_0x4dd6b5['data']();_0x2456f7[_0x15b22f(0x135)](_0x4dd6b5['id'],{'username':_0x223c23[_0x15b22f(0x195)],'ladder':'D2'});}),_0x49b66f['forEach'](_0x596dbc=>{const _0x2f0533=_0x3abef5,_0x1b5ba7=_0x596dbc['data']();_0x2456f7[_0x2f0533(0x135)](_0x596dbc['id'],{'username':_0x1b5ba7['username'],'ladder':'D3'});}),console['log'](_0x3abef5(0x326)+_0x2456f7['size']+_0x3abef5(0x2b2));let _0x4d04d9=0x0,_0x5c6344=0x0,_0x1d7723=0x0;const _0x389b86=Array['from'](_0x2456f7['keys']()),_0xf20bf3=0x190;for(let _0xd351b5=0x0;_0xd351b5<_0x389b86['length'];_0xd351b5+=_0xf20bf3){const _0x547503=writeBatch(db),_0x360faa=[],_0x35b040=_0x389b86['slice'](_0xd351b5,_0xd351b5+_0xf20bf3),_0x2e18c1=await Promise[_0x3abef5(0x28f)](_0x35b040['map'](_0x1394a5=>getDoc(doc(db,_0x3abef5(0x2b1),_0x1394a5))));for(let _0x1f11cd=0x0;_0x1f11cd<_0x35b040['length'];_0x1f11cd++){try{const _0x434a69=_0x35b040[_0x1f11cd],_0x424b55=_0x2456f7['get'](_0x434a69),_0x535983=_0x2e18c1[_0x1f11cd];if(_0x535983['exists']()){const _0x5ce06c=_0x535983['data'](),_0x4b985f=_0x5ce06c[_0x3abef5(0x234)]||0x0,_0x3166d6=_0x4b985f+_0xcd6fe7;_0x547503[_0x3abef5(0x1fb)](doc(db,_0x3abef5(0x2b1),_0x434a69),{'points':_0x3166d6,'lastPointsModified':serverTimestamp()}),_0x360faa['push']({'userId':_0x434a69,'userEmail':_0x5ce06c['email']||'unknown','displayName':_0x5ce06c['displayName']||_0x424b55['username']||'Unknown\x20User','action':_0x3abef5(0x143),'amount':_0xcd6fe7,'previousPoints':_0x4b985f,'newPoints':_0x3166d6,'reason':_0x3abef5(0x2b5)+_0x424b55['ladder']+')','adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()}),_0x5c6344+=_0xcd6fe7,_0x4d04d9++;}else _0x1d7723++,console['warn'](_0x3abef5(0x383)+_0x424b55['username']+'\x20('+_0x434a69+')');}catch(_0x554685){_0x1d7723++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x554685);}}await _0x547503['commit']();for(const _0x24665f of _0x360faa){await addDoc(collection(db,_0x3abef5(0x2f9)),_0x24665f);}showNotification(_0x3abef5(0x204)+_0x4d04d9+'/'+_0x328e50+'\x20pilots...','info');}showNotification(_0x3abef5(0x24b)+_0x5c6344+'\x20points\x20to\x20'+_0x4d04d9+'\x20pilots.\x20Errors:\x20'+_0x1d7723,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x43c7dc){console['error']('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x43c7dc),showNotification('Error:\x20'+_0x43c7dc[_0x3abef5(0x173)],'error');}}function setupManageRibbonsSection(){const _0x3875e7=a4_0x1edc9a;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x5a7120=document['getElementById']('ribbon-user-search');_0x5a7120&&_0x5a7120['addEventListener'](_0x3875e7(0x31f),debounce(searchRibbonUser,0x12c));const _0x5e1ee6=document['getElementById']('search-ribbon-user-btn');_0x5e1ee6&&_0x5e1ee6[_0x3875e7(0x16b)](_0x3875e7(0x1f0),searchRibbonUser);const _0x4a7438=document[_0x3875e7(0x30f)]('add-ribbon-form');_0x4a7438&&_0x4a7438['addEventListener']('submit',addRibbon),_0x5a7120&&_0x5a7120['addEventListener']('keypress',function(_0x56e301){_0x56e301['key']==='Enter'&&(_0x56e301['preventDefault'](),searchRibbonUser());}),console['log'](_0x3875e7(0x379));}async function modifyUserPoints(_0x43953c,_0x4558cb,_0x54de3c,_0x10ee98=''){const _0x1c9f44=a4_0x1edc9a,_0x16e084=doc(db,'userProfiles',_0x43953c),_0x2e5bec=await getDoc(_0x16e084);if(!_0x2e5bec['exists']())throw new Error('User\x20not\x20found');const _0x5f6fa9=_0x2e5bec[_0x1c9f44(0x2ab)](),_0x5f3b68=_0x5f6fa9['points']!==undefined?_0x5f6fa9['points']:0x0;_0x5f6fa9['points']===undefined&&(console['log'](_0x1c9f44(0x151)+(_0x5f6fa9[_0x1c9f44(0x2a8)]||_0x5f6fa9['email']||'Unknown')),await updateDoc(_0x16e084,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x497471=_0x5f3b68;switch(_0x4558cb){case _0x1c9f44(0x143):_0x497471=_0x5f3b68+_0x54de3c;break;case _0x1c9f44(0x2c1):_0x497471=Math['max'](0x0,_0x5f3b68-_0x54de3c);break;case _0x1c9f44(0x135):_0x497471=_0x54de3c;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x16e084,{'points':_0x497471,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x1c9f44(0x2f9)),{'userId':_0x43953c,'userEmail':_0x5f6fa9['email']||'unknown','displayName':_0x5f6fa9['displayName']||_0x5f6fa9['username']||'Unknown\x20User','action':_0x4558cb,'amount':_0x54de3c,'previousPoints':_0x5f3b68,'newPoints':_0x497471,'reason':_0x10ee98,'adminEmail':auth[_0x1c9f44(0x155)]['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x539995=a4_0x1edc9a,_0x1e7db9=document['getElementById']('points-overview-table-body');if(!_0x1e7db9)return;_0x1e7db9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0xb1635f=collection(db,'userProfiles'),_0x2005bc=await getDocs(_0xb1635f);if(_0x2005bc['empty']){_0x1e7db9[_0x539995(0x2c9)]=_0x539995(0x14e);return;}const _0x1a2107=[];let _0x218ce3=0x0;_0x2005bc['forEach'](_0x484b69=>{const _0xe634e3=_0x539995,_0x3d1b80=_0x484b69['data'](),_0x39b981=_0x3d1b80['points']!==undefined?_0x3d1b80['points']:0x0;_0x3d1b80[_0xe634e3(0x234)]===undefined&&_0x218ce3++,_0x1a2107['push']({'id':_0x484b69['id'],..._0x3d1b80,'points':_0x39b981});}),_0x218ce3>0x0&&(console['log']('Found\x20'+_0x218ce3+_0x539995(0x188)),showNotification(_0x218ce3+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.',_0x539995(0x2b0))),_0x1a2107['sort']((_0x317189,_0xcdd645)=>(_0xcdd645['points']||0x0)-(_0x317189['points']||0x0)),window['allUsersPoints']=_0x1a2107,renderPointsOverview(_0x1a2107);}catch(_0x4dda8c){console['error']('Error\x20loading\x20points\x20overview:',_0x4dda8c),_0x1e7db9['innerHTML']=_0x539995(0x13b)+_0x4dda8c['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x5a0ca9=a4_0x1edc9a,_0x35796b=document[_0x5a0ca9(0x30f)]('ribbons-overview-table-body');if(!_0x35796b)return;_0x35796b['innerHTML']=_0x5a0ca9(0x29b);try{const [_0x189a12,_0x40427b,_0x185329]=await Promise[_0x5a0ca9(0x28f)]([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x35796b['innerHTML']='';const _0x134600=(_0x54b682,_0x1be5b6)=>{_0x54b682['forEach'](_0x220753=>{const _0x58a0f8=a4_0x2464,_0x100874=_0x220753['data'](),_0xeaa12=_0x100874['ribbons']||{},_0xb532cb=Object[_0x58a0f8(0x35d)](_0xeaa12)['length'],_0x56dc6f=document['createElement']('tr');_0x56dc6f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x100874['username']||_0x58a0f8(0x2ef))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x1be5b6[_0x58a0f8(0x300)]()+'\x22>'+_0x1be5b6+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xb532cb+_0x58a0f8(0x354)+(_0x100874[_0x58a0f8(0x36b)]?new Date(_0x100874['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():_0x58a0f8(0x2ef))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x100874[_0x58a0f8(0x195)]+_0x58a0f8(0x307)+_0x1be5b6+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x35796b['appendChild'](_0x56dc6f);});};_0x134600(_0x189a12,'D1'),_0x134600(_0x40427b,'D2'),_0x134600(_0x185329,'D3'),document['querySelectorAll']('.edit-ribbons-btn')[_0x5a0ca9(0x304)](_0x17d920=>{_0x17d920['addEventListener']('click',function(){const _0x269b88=a4_0x2464,_0x2574b2=this[_0x269b88(0x305)]['username'],_0x3f6d91=this[_0x269b88(0x305)]['ladder'];editUserRibbons(_0x2574b2,_0x3f6d91);});}),showNotification(_0x5a0ca9(0x32d),'success');}catch(_0x2d1139){console['error'](_0x5a0ca9(0x202),_0x2d1139),_0x35796b[_0x5a0ca9(0x2c9)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data',_0x5a0ca9(0x297));}}async function searchRibbonUser(){const _0x339527=a4_0x1edc9a,_0x374f42=document['getElementById'](_0x339527(0x38b))[_0x339527(0x161)]['trim']();if(!_0x374f42){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x46b892,_0x5d43b8,_0x23f501]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x374f42)),getDoc(doc(db,'playerRibbonsD2',_0x374f42)),getDoc(doc(db,_0x339527(0x35b),_0x374f42))]);let _0x379345=null,_0x14cd28=null;if(_0x46b892['exists']())_0x379345='D1',_0x14cd28=_0x46b892[_0x339527(0x2ab)]();else{if(_0x5d43b8['exists']())_0x379345='D2',_0x14cd28=_0x5d43b8['data']();else _0x23f501[_0x339527(0x310)]()&&(_0x379345='D3',_0x14cd28=_0x23f501['data']());}_0x379345?(document[_0x339527(0x30f)](_0x339527(0x2ae))['textContent']=_0x374f42,document[_0x339527(0x30f)]('ribbon-target-user')['value']=_0x374f42,document['getElementById'](_0x339527(0x1ce))['value']=_0x379345,document[_0x339527(0x30f)]('user-ribbon-management')['style'][_0x339527(0x18f)]='block',displayCurrentRibbons(_0x14cd28['ribbons']||{}),showNotification(_0x339527(0x326)+_0x374f42+'\x20in\x20'+_0x379345+'\x20ladder','success')):showNotification('User\x20'+_0x374f42+'\x20not\x20found\x20in\x20any\x20ladder',_0x339527(0x297));}catch(_0x15d35a){console['error'](_0x339527(0x34d),_0x15d35a),showNotification('Error\x20searching\x20for\x20user',_0x339527(0x297));}}function displayCurrentRibbons(_0x3e900e){const _0x1f2db6=a4_0x1edc9a,_0x194dfb=document['getElementById']('current-ribbons-list');if(!_0x194dfb)return;_0x194dfb['innerHTML']='';if(Object['keys'](_0x3e900e)['length']===0x0){_0x194dfb['innerHTML']=_0x1f2db6(0x20b);return;}Object[_0x1f2db6(0x365)](_0x3e900e)['forEach'](([_0x37be91,_0x3c1c01])=>{const _0x5c11b5=_0x1f2db6,_0x30b365=document['createElement']('div');_0x30b365['className']=_0x5c11b5(0x229),_0x30b365['innerHTML']=_0x5c11b5(0x39d)+_0x37be91+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x3c1c01[_0x5c11b5(0x1ef)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x3c1c01['awardedAt']?new Date(_0x3c1c01['awardedAt'][_0x5c11b5(0x18d)]*0x3e8)['toLocaleDateString']():_0x5c11b5(0x2ef))+_0x5c11b5(0x29a)+_0x37be91+_0x5c11b5(0x319),_0x194dfb[_0x5c11b5(0x385)](_0x30b365);}),document[_0x1f2db6(0x254)](_0x1f2db6(0x30a))[_0x1f2db6(0x304)](_0x4b5005=>{_0x4b5005['addEventListener']('click',function(){const _0x4bba0d=a4_0x2464,_0x50e87a=this[_0x4bba0d(0x305)]['ribbon'];removeRibbon(_0x50e87a);});});}async function addRibbon(_0x61eaf4){const _0x516dff=a4_0x1edc9a;_0x61eaf4['preventDefault']();const _0x5872d3=document[_0x516dff(0x30f)]('ribbon-target-user')[_0x516dff(0x161)],_0x5571e6=document['getElementById']('ribbon-target-ladder')[_0x516dff(0x161)],_0x35d80b=document['getElementById'](_0x516dff(0x27a))['value'],_0x439bd3=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x5872d3||!_0x5571e6||!_0x35d80b||!_0x439bd3){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x354017='playerRibbons'+(_0x5571e6==='D1'?'':_0x5571e6),_0x505058=doc(db,_0x354017,_0x5872d3),_0x2fb3f7=await getDoc(_0x505058),_0x8fd764=_0x2fb3f7[_0x516dff(0x310)]()?_0x2fb3f7[_0x516dff(0x2ab)]()[_0x516dff(0x1a2)]||{}:{};_0x8fd764[_0x35d80b]={'level':_0x439bd3,'awardedAt':serverTimestamp()},await setDoc(_0x505058,{'username':_0x5872d3,'ladder':_0x5571e6,'ribbons':_0x8fd764,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x35d80b+_0x516dff(0x34a)+_0x439bd3+'\x20to\x20'+_0x5872d3,_0x516dff(0x2da)),displayCurrentRibbons(_0x8fd764),document['getElementById']('ribbon-type-select')['value']='',document[_0x516dff(0x30f)](_0x516dff(0x301))['value']='1';}catch(_0x1d1530){console['error']('Error\x20adding\x20ribbon:',_0x1d1530),showNotification(_0x516dff(0x145),'error');}}async function removeRibbon(_0x5985ad){const _0x1107cc=a4_0x1edc9a,_0x6a5dc1=document[_0x1107cc(0x30f)]('ribbon-target-user')[_0x1107cc(0x161)],_0x11c600=document['getElementById']('ribbon-target-ladder')[_0x1107cc(0x161)];if(!confirm(_0x1107cc(0x1f7)+_0x5985ad+'\x20from\x20'+_0x6a5dc1+'?'))return;try{const _0x1dcb36=_0x1107cc(0x274)+(_0x11c600==='D1'?'':_0x11c600),_0x119d96=doc(db,_0x1dcb36,_0x6a5dc1),_0x114c29=await getDoc(_0x119d96),_0x14314c=_0x114c29[_0x1107cc(0x310)]()?_0x114c29['data']()['ribbons']||{}:{};delete _0x14314c[_0x5985ad],await setDoc(_0x119d96,{'username':_0x6a5dc1,'ladder':_0x11c600,'ribbons':_0x14314c,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x5985ad+_0x1107cc(0x2e9)+_0x6a5dc1,'success'),displayCurrentRibbons(_0x14314c);}catch(_0x330194){console['error']('Error\x20removing\x20ribbon:',_0x330194),showNotification(_0x1107cc(0x23a),'error');}}function editUserRibbons(_0x3bfcde,_0x1fa724){const _0xc3c187=a4_0x1edc9a;document['getElementById']('ribbon-user-search')[_0xc3c187(0x161)]=_0x3bfcde,searchRibbonUser();}