import a22_0x5e5a85,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';function a22_0x1a70(){const _0xf7e6db=['bind','error','console','log','none','flex','Idle\x20timeout\x20initialized:','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','collection','from','size','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','textContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.','activeListeners','Retry\x20Connection','addEventListener','RDL_NETWORK_ERROR','Blocked\x20operations:','Session\x20suspended\x20due\x20to\x20inactivity','Failed\x20to\x20test\x20connection:','Return\x20to\x20Website','cssText','suspendSession','__proto__','createElement','RDL_SESSION_SUSPENDED','#network-error-overlay\x20p','opacity','length','blockedOperations','cursor','appendChild','catch','Connection\x20Error','keys','Reload\x20Page','click','reload','button','Session\x20Suspended\x20Due\x20to\x20Inactivity','RDL_LAST_ACTIVITY','message','getElementById','style','toString'];a22_0x1a70=function(){return _0xf7e6db;};return a22_0x1a70();}const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x1a260f=a22_0x284a;if(document['getElementById']('idle-overlay'))return;const _0xb6fa87=document[_0x1a260f(0x1aa)]('div');_0xb6fa87['id']='idle-overlay',_0xb6fa87['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x27a1e1=document[_0x1a260f(0x1aa)]('div');_0x27a1e1[_0x1a260f(0x1bd)]['cssText']=_0x1a260f(0x19d);const _0x5ee985=document['createElement']('h2');_0x5ee985['textContent']=_0x1a260f(0x1b9),_0x5ee985['style']['cssText']=_0x1a260f(0x19b);const _0x171df3=document['createElement']('p');_0x171df3[_0x1a260f(0x19c)]='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x171df3[_0x1a260f(0x1bd)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x37eb19=document['createElement'](_0x1a260f(0x1b8));_0x37eb19['id']='resume-session-btn',_0x37eb19['textContent']=_0x1a260f(0x1a6),_0x37eb19['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x37eb19['onmouseover']=function(){this['style']['backgroundColor']='#3da05f';},_0x37eb19['onmouseout']=function(){const _0x46b24d=_0x1a260f;this[_0x46b24d(0x1bd)]['backgroundColor']='#50C878';},_0x27a1e1['appendChild'](_0x5ee985),_0x27a1e1[_0x1a260f(0x1b1)](_0x171df3),_0x27a1e1[_0x1a260f(0x1b1)](_0x37eb19),_0xb6fa87['appendChild'](_0x27a1e1),document['body']['appendChild'](_0xb6fa87),_0x37eb19[_0x1a260f(0x1a1)]('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0xff7e40=a22_0x284a;if(document['getElementById']('network-error-overlay'))return;const _0x522ef7=document['createElement']('div');_0x522ef7['id']='network-error-overlay',_0x522ef7[_0xff7e40(0x1bd)][_0xff7e40(0x1a7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x21135f=document[_0xff7e40(0x1aa)]('div');_0x21135f['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x30e8a5=document['createElement']('h2');_0x30e8a5['textContent']=_0xff7e40(0x1b3),_0x30e8a5[_0xff7e40(0x1bd)]['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x2241d4=document['createElement']('p');_0x2241d4['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x2241d4['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x46e634=document['createElement'](_0xff7e40(0x1b8));_0x46e634['id']='retry-connection-btn',_0x46e634['textContent']=_0xff7e40(0x1a0),_0x46e634['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x16e1b5=document['createElement']('button');_0x16e1b5['id']='reload-page-btn',_0x16e1b5[_0xff7e40(0x19c)]=_0xff7e40(0x1b5),_0x16e1b5['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x3a15a4=document['createElement']('div');_0x3a15a4[_0xff7e40(0x1bd)]['cssText']=_0xff7e40(0x197),_0x3a15a4['appendChild'](_0x46e634),_0x3a15a4['appendChild'](_0x16e1b5),_0x21135f['appendChild'](_0x30e8a5),_0x21135f['appendChild'](_0x2241d4),_0x21135f[_0xff7e40(0x1b1)](_0x3a15a4),_0x522ef7['appendChild'](_0x21135f),document['body']['appendChild'](_0x522ef7),_0x46e634['addEventListener']('click',retryConnection),_0x16e1b5[_0xff7e40(0x1a1)]('click',()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x2d666b=a22_0x284a;clearTimeout(idleTimer);const _0x1a5029=document['getElementById']('network-error-overlay');_0x1a5029&&(_0x1a5029['style']['display']='flex'),window[_0x2d666b(0x1a2)]=!![],console[_0x2d666b(0x193)]('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x5e5a85['suspendAllListeners']();}function retryConnection(){const _0x15acef=a22_0x284a;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x217dba=document['querySelector'](_0x15acef(0x1ac));_0x217dba&&(_0x217dba[_0x15acef(0x19c)]=_0x15acef(0x19e));const _0x47c2b3=document[_0x15acef(0x1bc)]('retry-connection-btn');_0x47c2b3&&(_0x47c2b3['disabled']=!![],_0x47c2b3['style'][_0x15acef(0x1ad)]='0.5',_0x47c2b3[_0x15acef(0x1bd)][_0x15acef(0x1b0)]='not-allowed');return;}const _0x3ddd52=document['getElementById']('network-error-overlay');_0x3ddd52&&(_0x3ddd52[_0x15acef(0x1bd)]['display']=_0x15acef(0x194));window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x235392}=window;if(_0x235392){const _0xa5865b=_0x235392[_0x15acef(0x198)]('system');_0x235392['getDocs'](_0xa5865b)[_0x15acef(0x1b2)](_0x2cd296=>{const _0x27ebb7=_0x15acef;console[_0x27ebb7(0x191)]('Connection\x20test\x20failed:',_0x2cd296),handleNetworkError();});}}catch(_0x3168d7){console['error'](_0x15acef(0x1a5),_0x3168d7),handleNetworkError();}a22_0x5e5a85['resumeAllListeners']();}function suspendSession(){const _0x1e1ecd=a22_0x284a;isSessionSuspended=!![];const _0x30cc69=document['getElementById']('idle-overlay');_0x30cc69&&(_0x30cc69['style']['display']=_0x1e1ecd(0x195)),console['log'](_0x1e1ecd(0x1a4)),window[_0x1e1ecd(0x1ab)]=!![],a22_0x5e5a85['suspendAllListeners']();}function resumeSession(){const _0x460539=a22_0x284a;isSessionSuspended=![],window[_0x460539(0x1ab)]=![];const _0x40caec=document['getElementById']('idle-overlay');_0x40caec&&(_0x40caec[_0x460539(0x1bd)]['display']='none'),console['log']('Session\x20resumed'),resetIdleTimer(),a22_0x5e5a85['resumeAllListeners'](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location'][_0x460539(0x1b7)]());}function initIdleTimeout(){const _0x1d3314=a22_0x284a,_0x287607=(function(){let _0x2fc952=!![];return function(_0x26539b,_0x2fabad){const _0x28439b=_0x2fc952?function(){if(_0x2fabad){const _0x4bad03=_0x2fabad['apply'](_0x26539b,arguments);return _0x2fabad=null,_0x4bad03;}}:function(){};return _0x2fc952=![],_0x28439b;};}()),_0x2a8a59=_0x287607(this,function(){const _0x3333d8=a22_0x284a,_0x460582=function(){let _0x3a219f;try{_0x3a219f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xdfef9b){_0x3a219f=window;}return _0x3a219f;},_0x3f2ee2=_0x460582(),_0x175836=_0x3f2ee2[_0x3333d8(0x192)]=_0x3f2ee2['console']||{},_0x4183ce=['log','warn','info',_0x3333d8(0x191),'exception','table','trace'];for(let _0x17b155=0x0;_0x17b155<_0x4183ce[_0x3333d8(0x1ae)];_0x17b155++){const _0x4a92c1=_0x287607['constructor']['prototype']['bind'](_0x287607),_0x3386cb=_0x4183ce[_0x17b155],_0x2e729d=_0x175836[_0x3386cb]||_0x4a92c1;_0x4a92c1[_0x3333d8(0x1a9)]=_0x287607['bind'](_0x287607),_0x4a92c1['toString']=_0x2e729d[_0x3333d8(0x1be)][_0x3333d8(0x190)](_0x2e729d),_0x175836[_0x3386cb]=_0x4a92c1;}});_0x2a8a59(),createIdleOverlay();const _0x4dceee=['mousedown','mousemove','keypress','scroll','touchstart',_0x1d3314(0x1b6)];_0x4dceee['forEach'](_0xb5ad51=>{document['addEventListener'](_0xb5ad51,()=>{const _0x3286f8=a22_0x284a;window[_0x3286f8(0x1ba)]=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener'](_0x1d3314(0x191),function(_0x2b7b60){const _0x310c15=_0x1d3314;_0x2b7b60['error']&&(_0x2b7b60['error'][_0x310c15(0x1bb)]&&_0x2b7b60['error']['message']['includes']('network')||_0x2b7b60['error']['code']&&(_0x2b7b60['error']['code']==='unavailable'||_0x2b7b60[_0x310c15(0x191)]['code']==='resource-exhausted'||_0x2b7b60['error']['code']['includes']('network')))&&(handleNetworkError(),_0x2b7b60['preventDefault']());}),resetIdleTimer(),console['log'](_0x1d3314(0x196),IDLE_TIMEOUT,'ms'),window[_0x1d3314(0x1a8)]=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0xead914=_0x1d3314;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console[_0xead914(0x193)]('Network\x20error:',window[_0xead914(0x1a2)]),console['log']('Active\x20listeners:',a22_0x5e5a85[_0xead914(0x19f)][_0xead914(0x19a)]),console['log']('Pending\x20operations:',a22_0x5e5a85['pendingOperations']['size']),console['log'](_0xead914(0x1a3),a22_0x5e5a85['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window[_0xead914(0x1a2)],'activeListeners':Array['from'](a22_0x5e5a85[_0xead914(0x19f)]['keys']()),'pendingOperations':Array[_0xead914(0x199)](a22_0x5e5a85['pendingOperations'][_0xead914(0x1b4)]()),'blockedCount':a22_0x5e5a85[_0xead914(0x1af)]||0x0};},window['forceIdleTimeout']=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}function a22_0x284a(_0x5da966,_0x2344f2){const _0x5330f8=a22_0x1a70();return a22_0x284a=function(_0x116928,_0x5b952a){_0x116928=_0x116928-0x190;let _0x1a7085=_0x5330f8[_0x116928];return _0x1a7085;},a22_0x284a(_0x5da966,_0x2344f2);}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();