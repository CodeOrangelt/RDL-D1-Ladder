const a2_0xf5ca78=a2_0x5154,a2_0x215f29=(function(){let _0xae9bee=!![];return function(_0x39f17b,_0x10d859){const _0x4a23ff=_0xae9bee?function(){if(_0x10d859){const _0x559463=_0x10d859['apply'](_0x39f17b,arguments);return _0x10d859=null,_0x559463;}}:function(){};return _0xae9bee=![],_0x4a23ff;};}()),a2_0x4f5052=a2_0x215f29(this,function(){const _0x191d2a=a2_0x5154,_0x35feeb=function(){const _0x394751=a2_0x5154;let _0x33d190;try{_0x33d190=Function(_0x394751(0x393)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x988799){_0x33d190=window;}return _0x33d190;},_0x179d06=_0x35feeb(),_0x54304b=_0x179d06[_0x191d2a(0x200)]=_0x179d06['console']||{},_0x45a0c5=['log',_0x191d2a(0x2a3),'info','error','exception','table',_0x191d2a(0x2a8)];for(let _0x3671d3=0x0;_0x3671d3<_0x45a0c5[_0x191d2a(0x267)];_0x3671d3++){const _0x312746=a2_0x215f29[_0x191d2a(0x192)]['prototype'][_0x191d2a(0x1aa)](a2_0x215f29),_0x15dd65=_0x45a0c5[_0x3671d3],_0x5149f5=_0x54304b[_0x15dd65]||_0x312746;_0x312746['__proto__']=a2_0x215f29['bind'](a2_0x215f29),_0x312746['toString']=_0x5149f5['toString']['bind'](_0x5149f5),_0x54304b[_0x15dd65]=_0x312746;}});a2_0x4f5052();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x1c669f){const _0x3f2d8c=a2_0x5154;if(!_0x1c669f)return'#ffffff';_0x1c669f=_0x1c669f['replace']('#','');_0x1c669f['length']===0x3&&(_0x1c669f=_0x1c669f['split']('')['map'](_0x5dd4fe=>_0x5dd4fe+_0x5dd4fe)['join'](''));if(_0x1c669f['length']!==0x6)return'#ffffff';const _0x58305e=parseInt(_0x1c669f[_0x3f2d8c(0x16d)](0x0,0x2),0x10),_0x4ebad9=parseInt(_0x1c669f['substring'](0x2,0x4),0x10),_0x161ba7=parseInt(_0x1c669f[_0x3f2d8c(0x16d)](0x4,0x6),0x10),_0x583208=(_0x58305e*0x12b+_0x4ebad9*0x24b+_0x161ba7*0x72)/0x3e8;return _0x583208>=0x80?_0x3f2d8c(0x1b0):'#ffffff';}const DEFAULT_TROPHY_IMAGE=a2_0xf5ca78(0x2ea),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{const _0x1b32a9=a2_0xf5ca78;auth[_0x1b32a9(0x32e)](async _0x378933=>{const _0x5ccdc4=_0x1b32a9;if(!_0x378933){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x122c02){console[_0x5ccdc4(0x2cd)]('Error\x20initializing\x20dashboard:',_0x122c02),showNotification(_0x5ccdc4(0x1f8),'error');}});});async function getUserTabPermissions(_0x16ce2a){const _0x5c0c53=a2_0xf5ca78;if(!_0x16ce2a)return[_0x5c0c53(0x1ac)];console[_0x5c0c53(0x233)]('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x16ce2a+'\x20in\x20all\x20collections...');const _0x5695a1=[{'name':_0x5c0c53(0x29d),'displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x1fd7a3=auth[_0x5c0c53(0x25c)];let _0x4df3e1=null,_0x3800a1=null;for(const _0x4fac7c of _0x5695a1){try{if(_0x1fd7a3){const _0xc9b81=doc(db,_0x4fac7c['name'],_0x1fd7a3['uid']),_0x5d0006=await getDoc(_0xc9b81);if(_0x5d0006['exists']()){const _0x3a1a3a=_0x5d0006['data']();console['log']('Found\x20user\x20in\x20'+_0x4fac7c['displayName']+'\x20by\x20UID:',_0x3a1a3a);const _0x493f66=(_0x3a1a3a['roleName']||_0x3a1a3a['role']||'')['toLowerCase']();if(_0x493f66&&_0x493f66!==_0x5c0c53(0x28d)){_0x4df3e1=_0x493f66,_0x3800a1=_0x4fac7c[_0x5c0c53(0x219)],console['log'](_0x5c0c53(0x39b)+_0x4df3e1+_0x5c0c53(0x282)+_0x3800a1);break;}}}if(!_0x4df3e1){const _0x1c4129=collection(db,_0x4fac7c['name']),_0x4d0694=query(_0x1c4129,where('email','==',_0x16ce2a)),_0x186755=await getDocs(_0x4d0694);if(!_0x186755[_0x5c0c53(0x370)]){const _0x2132f7=_0x186755['docs'][0x0][_0x5c0c53(0x349)]();console[_0x5c0c53(0x233)]('Found\x20user\x20in\x20'+_0x4fac7c['displayName']+_0x5c0c53(0x1dd)+_0x16ce2a+':',_0x2132f7);const _0x133250=(_0x2132f7[_0x5c0c53(0x30f)]||_0x2132f7['role']||'')['toLowerCase']();if(_0x133250&&_0x133250!=='none'){_0x4df3e1=_0x133250,_0x3800a1=_0x4fac7c['displayName'],console[_0x5c0c53(0x233)](_0x5c0c53(0x39b)+_0x4df3e1+'\x20in\x20'+_0x3800a1);break;}}}}catch(_0x1176c1){console['error'](_0x5c0c53(0x25e)+_0x4fac7c[_0x5c0c53(0x219)]+':',_0x1176c1);}}if(_0x4df3e1){console['log'](_0x5c0c53(0x2c6)+_0x4df3e1+'\x20(from\x20'+_0x3800a1+')');const _0x1151b2={'admin':[_0x5c0c53(0x1ac),'manage-players','manage-matches',_0x5c0c53(0x2cc),'manage-trophies',_0x5c0c53(0x17b),'inactive-players','settings','manage-trophies','elo-history',_0x5c0c53(0x1c5),_0x5c0c53(0x1d7),_0x5c0c53(0x283),'manage-points','manage-levels-ribbons',_0x5c0c53(0x33b)],'owner':[_0x5c0c53(0x1ac),'manage-players','manage-matches','manage-articles',_0x5c0c53(0x354),'manage-ranks','inactive-players','settings',_0x5c0c53(0x354),'elo-history',_0x5c0c53(0x1c5),'user-roles-section','manage-matches',_0x5c0c53(0x15f),_0x5c0c53(0x1b1),'manage-ribbons'],'council':[_0x5c0c53(0x1ac),_0x5c0c53(0x1b2),'manage-matches'],'creative\x20lead':['dashboard','manage-articles',_0x5c0c53(0x354),'elo-history','manage-highlights']};if(_0x1151b2[_0x4df3e1])return console[_0x5c0c53(0x233)]('Role\x20\x27'+_0x4df3e1+_0x5c0c53(0x368),_0x1151b2[_0x4df3e1]),_0x1151b2[_0x4df3e1];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x16ce2a+',\x20giving\x20default\x20access'),['dashboard'];}function a2_0x5154(_0x4ad945,_0x4d8e28){const _0x4f5052=a2_0x144d();return a2_0x5154=function(_0x215f29,_0x340c07){_0x215f29=_0x215f29-0x15a;let _0x144dc8=_0x4f5052[_0x215f29];return _0x144dc8;},a2_0x5154(_0x4ad945,_0x4d8e28);}function setupSidebarNavigation(_0xd62885=[]){const _0x39ef3e=a2_0xf5ca78,_0x10fc2c=document[_0x39ef3e(0x19c)](_0x39ef3e(0x388)),_0x563ff6=document[_0x39ef3e(0x19c)]('.admin-section');(!_0xd62885||_0xd62885[_0x39ef3e(0x267)]===0x0)&&(_0xd62885=['dashboard']);_0x10fc2c['forEach'](_0x5b833f=>{const _0x423f1b=_0x39ef3e,_0x2c0836=_0x5b833f['getAttribute'](_0x423f1b(0x3a1));_0xd62885['includes'](_0x2c0836)?_0x5b833f['style'][_0x423f1b(0x2e4)]='flex':_0x5b833f['style'][_0x423f1b(0x2e4)]='none',_0x5b833f[_0x423f1b(0x1b4)]('click',()=>{const _0x96c79e=_0x423f1b,_0x4586b2=_0x5b833f['getAttribute'](_0x96c79e(0x3a1));if(!_0xd62885['includes'](_0x4586b2)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x10fc2c['forEach'](_0x470771=>_0x470771['classList'][_0x96c79e(0x1a9)]('active')),_0x5b833f['classList']['add'](_0x96c79e(0x36c)),_0x563ff6['forEach'](_0x1f8ba2=>{const _0x10f216=_0x96c79e;_0x1f8ba2[_0x10f216(0x23f)]['display']=_0x10f216(0x28d);});const _0x5e484e=document['getElementById'](_0x4586b2);_0x5e484e&&(_0x5e484e[_0x96c79e(0x23f)]['display']='block',console[_0x96c79e(0x233)]('Switched\x20to\x20'+_0x4586b2+'\x20section'));});});const _0x3d8bea=document[_0x39ef3e(0x30b)]('.sidebar-nav\x20.nav-item[data-section=\x22'+_0xd62885[0x0]+'\x22]');_0x3d8bea&&_0x3d8bea[_0x39ef3e(0x2d3)](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0xa23c12=a2_0xf5ca78,_0x300854=document['querySelectorAll'](_0xa23c12(0x213));let _0x59a742=null,_0x33581c=new Set();_0x300854[_0xa23c12(0x2ba)](_0x2ef523=>{_0x2ef523['addEventListener']('click',function(){const _0x2d2f3c=a2_0x5154,_0x12ba03=this[_0x2d2f3c(0x33e)]('data-section');if(_0x12ba03===_0x59a742)return;_0x59a742&&(document['getElementById'](_0x59a742)['style']['display']='none',_0x300854['forEach'](_0x1f112c=>_0x1f112c[_0x2d2f3c(0x377)]['remove']('active'))),document[_0x2d2f3c(0x211)](_0x12ba03)['style']['display']='block',this['classList']['add']('active'),_0x59a742=_0x12ba03;});});}function loadSectionData(_0x1e7215){return;}async function initializeAdminDashboard(){const _0x3d6a00=a2_0xf5ca78;try{const _0x5e1c2d=auth['currentUser'],_0x598040=await getUserTabPermissions(_0x5e1c2d['email']);console['log']('User\x20'+_0x5e1c2d['email']+_0x3d6a00(0x38c),_0x598040),window['userAllowedTabs']=_0x598040,setupSidebarNavigation(_0x598040),setupLadderSelector(),setupDashboardSection(),_0x598040['includes']('manage-players')&&setupManagePlayersSection(),_0x598040['includes']('elo-history')&&setupEloHistorySection(),_0x598040['includes'](_0x3d6a00(0x17b))&&setupRankControls(),_0x598040['includes'](_0x3d6a00(0x2cc))&&setupManageArticlesSection(),_0x598040['includes']('user-roles-section')&&setupUserRolesSection(),_0x598040['includes'](_0x3d6a00(0x354))&&setupTrophyManagementSection(),_0x598040['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x598040['includes'](_0x3d6a00(0x2d6))&&setupInactivePlayersSection(),_0x598040[_0x3d6a00(0x2fb)]('manage-matches')&&setupManageMatchesSection(),_0x598040[_0x3d6a00(0x2fb)](_0x3d6a00(0x15f))&&setupManagePointsSection(),_0x598040[_0x3d6a00(0x2fb)]('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x598040);}catch(_0x2ddf9b){console[_0x3d6a00(0x2cd)]('Error\x20initializing\x20admin\x20dashboard:',_0x2ddf9b);}}function setupDataLoadButtons(_0x5af4b0=[]){const _0x3f04c7=a2_0xf5ca78;(!_0x5af4b0||_0x5af4b0['length']===0x0)&&(_0x5af4b0=['dashboard']);const _0x1718fa=document['getElementById']('load-dashboard-data');_0x1718fa&&_0x1718fa[_0x3f04c7(0x1b4)]('click',function(){const _0x255ef0=_0x3f04c7;this['classList']['add']('loading'),this[_0x255ef0(0x17c)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x397da6=>{const _0x482c57=_0x255ef0;console['error']('Error\x20loading\x20dashboard:',_0x397da6),this['classList']['remove']('loading'),this[_0x482c57(0x17c)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x5af4b0['includes']('manage-trophies')){const _0x1a33d5=document['getElementById'](_0x3f04c7(0x1ed));_0x1a33d5&&_0x1a33d5[_0x3f04c7(0x1b4)](_0x3f04c7(0x2d3),function(){const _0x1ac7ed=_0x3f04c7;console[_0x1ac7ed(0x233)]('Load\x20trophies\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0x1ac7ed(0x352)](()=>{const _0x568bdf=_0x1ac7ed;this[_0x568bdf(0x377)]['remove'](_0x568bdf(0x392)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x5d4265=>{const _0x5b5a24=_0x1ac7ed;console['error']('Error\x20loading\x20trophies:',_0x5d4265),this['classList']['remove']('loading'),this['innerHTML']=_0x5b5a24(0x324),setTimeout(()=>{const _0x5fd351=_0x5b5a24;this[_0x5fd351(0x17c)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x5af4b0['includes'](_0x3f04c7(0x1b2))){const _0x3abc29=document['getElementById']('load-players-data');_0x3abc29&&_0x3abc29['addEventListener'](_0x3f04c7(0x2d3),function(){const _0x44d9e6=_0x3f04c7;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})[_0x44d9e6(0x22c)](_0x4dbdd8=>{const _0x4e74c9=_0x44d9e6;console[_0x4e74c9(0x2cd)]('Error\x20loading\x20players:',_0x4dbdd8),this[_0x4e74c9(0x377)][_0x4e74c9(0x1a9)]('loading'),this['innerHTML']=_0x4e74c9(0x324),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x5af4b0[_0x3f04c7(0x2fb)]('elo-history')){const _0x34fe68=document['getElementById']('load-elo-history-data');_0x34fe68&&_0x34fe68['addEventListener'](_0x3f04c7(0x2d3),function(){const _0x4ead8a=_0x3f04c7;console['log']('Load\x20history\x20data\x20clicked'),this[_0x4ead8a(0x377)]['add'](_0x4ead8a(0x392)),this['innerHTML']=_0x4ead8a(0x287),loadEloHistory(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x4ead8a(0x22c)](_0x4767c6=>{const _0x4463e5=_0x4ead8a;console['error']('Error\x20loading\x20history:',_0x4767c6),this['classList']['remove']('loading'),this['innerHTML']=_0x4463e5(0x324),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x5af4b0[_0x3f04c7(0x2fb)](_0x3f04c7(0x2cc))){const _0x40ec2e=document['getElementById'](_0x3f04c7(0x379));_0x40ec2e&&_0x40ec2e['addEventListener']('click',function(){const _0x1288b3=_0x3f04c7;console['log'](_0x1288b3(0x2cf)),this[_0x1288b3(0x377)]['add']('loading'),this[_0x1288b3(0x17c)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x1288b3(0x352)](()=>{const _0x2d2138=_0x1288b3;this[_0x2d2138(0x377)]['remove']('loading'),this['innerHTML']=_0x2d2138(0x2c3);})['catch'](_0x2ca796=>{const _0x1d45d5=_0x1288b3;console['error'](_0x1d45d5(0x162),_0x2ca796),this['classList'][_0x1d45d5(0x1a9)]('loading'),this['innerHTML']=_0x1d45d5(0x324),setTimeout(()=>{const _0x5426f1=_0x1d45d5;this[_0x5426f1(0x17c)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x5af4b0['includes']('user-roles-section')){const _0x335088=document['getElementById']('load-users-data');_0x335088&&_0x335088[_0x3f04c7(0x1b4)](_0x3f04c7(0x2d3),function(){const _0x3650bc=_0x3f04c7;console['log']('Load\x20users\x20data\x20clicked'),this['classList'][_0x3650bc(0x1f1)]('loading'),this[_0x3650bc(0x17c)]=_0x3650bc(0x287),loadUsersWithRoles()['then'](()=>{const _0x4259b4=_0x3650bc;this['classList']['remove'](_0x4259b4(0x392)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x3650bc(0x22c)](_0x440dc6=>{console['error']('Error\x20loading\x20users:',_0x440dc6),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x5af4b0['includes'](_0x3f04c7(0x2d6))){const _0x2565ae=document[_0x3f04c7(0x211)](_0x3f04c7(0x285));_0x2565ae&&_0x2565ae['addEventListener']('click',function(){const _0x360066=_0x3f04c7;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this[_0x360066(0x377)][_0x360066(0x1f1)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()[_0x360066(0x352)](()=>{const _0x230d7a=_0x360066;this['classList']['remove']('loading'),this[_0x230d7a(0x17c)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x3597d8=>{const _0x5172fb=_0x360066;console[_0x5172fb(0x2cd)]('Error\x20loading\x20inactive\x20players:',_0x3597d8),this['classList'][_0x5172fb(0x1a9)]('loading'),this[_0x5172fb(0x17c)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x5af4b0['includes'](_0x3f04c7(0x1c5))){const _0x30e945=document[_0x3f04c7(0x211)]('load-highlights-data');_0x30e945&&_0x30e945[_0x3f04c7(0x1b4)]('click',function(){const _0x2e42ee=_0x3f04c7;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x2e42ee(0x17c)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x2e42ee(0x352)](()=>{const _0x4352e5=_0x2e42ee;this[_0x4352e5(0x377)][_0x4352e5(0x1a9)](_0x4352e5(0x392)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x1986c7=>{const _0x252101=_0x2e42ee;console['error']('Error\x20loading\x20highlights:',_0x1986c7),this['classList']['remove'](_0x252101(0x392)),this['innerHTML']=_0x252101(0x324),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x5af4b0[_0x3f04c7(0x2fb)](_0x3f04c7(0x283))){const _0x16eb98=document['getElementById']('load-matches-data');_0x16eb98&&_0x16eb98['addEventListener']('click',function(){const _0x28b47a=_0x3f04c7;console['log'](_0x28b47a(0x199)),this['classList'][_0x28b47a(0x1f1)](_0x28b47a(0x392)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x1ae037=_0x28b47a;this['classList']['remove']('loading'),this[_0x1ae037(0x17c)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x265919=>{console['error']('Error\x20loading\x20matches:',_0x265919),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5d43dd=a2_0x5154;this['innerHTML']=_0x5d43dd(0x374);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x5af4b0['includes'](_0x3f04c7(0x33b))){const _0x49fd34=document['getElementById']('load-ribbons-data');_0x49fd34&&_0x49fd34['addEventListener'](_0x3f04c7(0x2d3),function(){const _0x4f011c=_0x3f04c7;console['log'](_0x4f011c(0x1f4)),this[_0x4f011c(0x377)]['add']('loading'),this['innerHTML']=_0x4f011c(0x287),loadRibbonsData()['then'](()=>{const _0x2b1c97=_0x4f011c;this[_0x2b1c97(0x377)]['remove']('loading'),this['innerHTML']=_0x2b1c97(0x284);})['catch'](_0x2d4f59=>{const _0x55c55e=_0x4f011c;console['error']('Error\x20loading\x20ribbons:',_0x2d4f59),this[_0x55c55e(0x377)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console[_0x3f04c7(0x233)](_0x3f04c7(0x30c));}function a2_0x144d(){const _0x256d6e=['checked','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','Error\x20loading\x20user\x20points\x20history:','edit-highlight-map-input','.ladder-switch\x20input','manage-points','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','Highlight\x20created\x20successfully!','Error\x20loading\x20articles:','Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20','edit-match-loser-suicides','-next-page','uid','matchDate','src','updatedAt','Promotion\x20notification\x20sent\x20to\x20Discord\x20bot','amount','pending-count','substring','\x20to\x20','update','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','edit-highlight-loserScore-input','loserUsername','empty-state','edit-highlight-winnerName-input','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','message','mapCreator','\x20ladder!','\x22\x20not\x20found\x20in\x20','manage-ranks','innerHTML','store-item-select','Modal\x20element\x20found:','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','DB:','mapVersion','create-new-article-btn','source','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','players','Error\x20removing\x20ribbon','points-desc','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','\x22\x20not\x20found\x20in\x20any\x20collection','value','trophy-preview-img','disabled','submit','playerId','change','\x20already\x20processed\x20matches.\x20Errors:\x20','constructor','creator','Creator\x20highlight\x20button\x20clicked','newElo','trophy-modal','Error\x20initializing\x20points\x20field:','Error\x20saving\x20article:','Load\x20matches\x20data\x20clicked','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','querySelectorAll','common','Failed\x20to\x20send\x20Discord\x20notification:','currentTarget','Create\x20test\x20match\x20modal\x20setup\x20complete','username','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','Match\x20ID\x20or\x20ladder\x20missing','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','Matches\x20action\x20buttons\x20setup\x20complete','quick-edit-user-id','subgameType','remove','bind','\x22\x20data-ladder=\x22','dashboard','Points\x20updated\x20successfully','Created\x20','loss','#000000','manage-levels-ribbons','manage-players','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>','addEventListener','Please\x20enter\x20a\x20username','edit-match-loser','Error\x20creating\x20activity\x20chart:','highlight-match-info','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','loserScore','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','Test\x20match','✅\x20Exists','20px','trophy-modal-title','.form-group','Error\x20saving\x20highlight:\x20','confirmResimulateMatch','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','manage-highlights','lastVisible','set-elo-modal','Match\x20Result','points-reason','achievement','max','Modal\x20cancel\x20button\x20clicked','fa-exclamation-circle','no-results','points-history-table-body','</td></tr>','Complete!\x20Awarded\x20','\x20view\x20history\x20buttons','div','highlight-video-id','padding','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','user-roles-section','\x22\x20already\x20has\x20this\x20trophy','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','push','#elo-history-table-body\x20tr','role-name','\x20with\x20email\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','./promotions.js','approvedMatchesD2','test-match-winner-username','Tuesday','Create\x20test\x20match\x20button\x20setup\x20complete','Error\x20promoting\x20player:','opacity','User\x20','pendingMatchesD3','action','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','Edit\x20match\x20clicked:','assign-trophy-name','load-trophies-data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','approvedAt','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','add','Error\x20loading\x20highlights:','points','Load\x20ribbons\x20data\x20clicked','non-participant','borderRadius','userId','Error\x20setting\x20up\x20admin\x20dashboard','matchInfo','createElement','negative-change','edit-highlight-creatorImageUrl-input','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','points-user-search','email','console','Found\x20','nonParticipants','highlight-winner-name','setHours','\x20vs\x20','edit-match-winner-comment','sort','alt','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','toDate','current-ladder-display','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toLowerCase','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','get','Error\x20loading\x20highlight:','getElementById','Failed\x20to\x20delete\x20trophy:\x20','.nav-item','achievementDetails','test','ribbon-target-user','marginBottom','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','displayName','#cancel-create-test-match-btn','Failed\x20to\x20assign\x20trophy:\x20','#808080','Error\x20finding\x20match:','Emerald','highlight-type','Unknown\x20User','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','localeCompare','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','highlight-match-link','d2-next-page','trophyDefinitions','highlight-title',',\x20Loser\x20','ribbon-level','assign-trophy-rarity','catch','highlight-achievement-type','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','d1-prev-page','Creating\x20test\x20match\x20without\x20player\x20validation...','reset-history-filters','Match\x20deleted\x20successfully','log','user-search-results','\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','promote-form','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','pendingMatches','match-count','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','data-match-id','Error\x20deleting\x20player:','selected-user-id','style','create-test-match-form','activity-chart','YouTube\x20Video\x20ID\x20(Optional)','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20','mapPlayed','seconds','Failed\x20to\x20load\x20trophy\x20data','highlight-achievement-player','quick-edit-email','quick-points-amount','startDate','highlight-title-container','approvedMatchesD3',';\x22>','Successfully\x20demoted\x20','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','values','toISOString','Page\x201','highlights','playersD2','removeEventListener','roleAssignedBy','selected-user-name','ribbon-target-ladder','Error\x20loading\x20points\x20overview:','fa-check-circle','playerProfileUrl','currentUser','users-table-body','Error\x20checking\x20','Set\x20default\x20ladder\x20to:','removeAttribute','Bulk\x20award:','search-ribbon-user-btn','searchTerm','View\x20player\x20details\x20for\x20','create-test-match-modal','data-ladder','length','set','TestLoser','size','set-elo-ladder','ribbon-user-search','N/A','unknown','highlight-submitted-by','Error\x20loading\x20ELO\x20history:','className','trophy-name','description','inactive-players-search','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','.empty-state','.close-notification','Won','\x20(+','article-modal-title','input','points-sort-order','block','replaceChild','Unranked','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','\x20points','\x20in\x20','manage-matches','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','load-inactive-players-data','Error\x20deleting\x20article:','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','No\x20users\x20needed\x20points\x20field\x20initialization','approvedMatches','Player\x20\x22','winnerScore','error-state','none','asc','create-achievement-highlight-btn','No\x20email','Set\x20to\x20','previousElementSibling','win','#d32f2f','edit-highlight-title-input','Untitled','Bronze','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','success','Silver','Subtracted\x20','highlight-id','userProfiles','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','Error\x20deleting\x20match:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?','Create\x20test\x20match\x20modal\x20not\x20found','warn','fromDate','img','Error\x20opening\x20edit\x20modal:','match','trace','highlight-loser-name','Modal\x20setup\x20complete','Trophy\x20ID\x20and\x20username\x20are\x20required','Error:\x20','allUsersPoints','trim','match_result','fa-exclamation-triangle','setAttribute','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','edit-losses','page','awardedAt','Starting\x20points\x20award\x20process...','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','\x20-\x20','forEach','Testing\x20Firebase\x20connection...','matchLink','),\x20','award-item-form','rank-distribution-chart','Non-Participant','\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','Please\x20enter\x20valid\x20username\x20and\x20ELO','author','Setting\x20permissions\x20based\x20on\x20role:\x20','points-asc','createdAt','Title\x20is\x20required','toLocaleDateString','Role\x20select\x20set\x20to:\x20','manage-articles','error','Queued\x20','Load\x20articles\x20data\x20clicked','sendPromotionNotification','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','map','click','previousElo','demotion','inactive-players','focus','desc','\x20users\x20to\x20check...','quick-edit-points-modal','Query\x20created:','quick-edit-display-name','add-ribbon-form','lastMatch','rarity','all','edit-match-map','Error\x20saving\x20trophy:','timestamp','display','position','Using\x20collections\x20for\x20','Form\x20elements\x20are\x20missing','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22','edit-match-ladder','articles-table-body','Error\x20resimulating\x20match:','articles','.close','stopPropagation','warning','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','highlight-description-container','Unknown','set-role-modal','Failed\x20to\x20delete\x20player:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','creatorImageUrl','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','includes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','onerror','modifiedBy','Modal\x20opened\x20successfully','Query\x20executed.\x20Empty:','docs','name','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','elo-history-search','\x20already\x20has\x20points:\x20','Cancel\x20button\x20not\x20found','trophy-id','elo','Error\x20adding\x20player:','endDate','querySelector','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','firstVisible','cloneNode','roleName','resimulate-match-btn','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','refresh-points-overview','eloHistory','matches-search','bar','cells','Error\x20removing\x20role:','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','Match\x20updated\x20successfully','Bulk\x20award:','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','commit','highlight-loser-score','title','eloRating','.view-history-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','parentNode','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','User\x20data\x20loaded:','Username\x20is\x20missing','create-match-highlight-btn','No\x20matches\x20found','edit-match-winner','Remove\x20','Error\x20loading\x20trophy\x20definitions:','.close-btn','trophy-form','onAuthStateChanged','achievementImageUrl','winnerUsername','createdBy','winnerName','elo-history-table-body','\x20ladder','Article\x20updated\x20successfully','Player\x20not\x20found\x20in\x20','ladder','exists','paste','Processing\x20points\x20edit:','manage-ribbons','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','pendingMatchesD2','getAttribute','demote-form','pointsHistory','activity','Promoting\x20player\x20to\x20','target','.loading-cell','#1976d2','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','Found\x20ELO\x20history\x20for\x20player\x20','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20','data','initial_placement','Failed\x20to\x20save\x20match:\x20','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','delete-match-confirm-modal','button[type=\x22submit\x22]','highlight-map-version','dataset','promotion','then','\x20before\x20match:\x20','manage-trophies','assign-trophy-modal','-page-indicator','contains','article-title','info','\x27</td>','Error\x20updating\x20player:','eloHistoryD2','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Player\x20Name\x20is\x20required','loserName',';\x20color:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','rejected-count','admin_modification','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20pilots.\x20Errors:\x20','playersD3','\x27\x20has\x20permissions:','required','article-form','Error\x20loading\x20highlight:\x20','active','join','roleAssignedAt','Promotion','empty','Modal\x20should\x20now\x20be\x20visible','\x20total\x20players\x20in\x20the\x20','achievementPlayer','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','Failed\x20to\x20load\x20user\x20history','toLocaleString','classList','opponent','load-articles-data','Setting\x20up\x20create\x20test\x20match\x20button','RejectedD3','textContent','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','No\x20user\x20ID\x20found\x20on\x20button','Error\x20loading\x20users:','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','rgba(255,\x20193,\x207,\x200.1)','rankDistribution','appendChild','input[name=\x22promote-ladder\x22]:checked','.delete-highlight-btn','lastUpdated','highlight-creator-image','.sidebar-nav\x20.nav-item','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','create-new-trophy-btn','.no-results','\x20allowed\x20tabs:','Trophy\x20not\x20found','Failed\x20to\x20load\x20points\x20data:\x20','Error','preventDefault','edit-username','loading','return\x20(function()\x20','Initializing\x20points\x20field\x20for\x20user\x20','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','from','pendingResimulateData','Page\x20','trophy-image-url','\x20history\x20entries\x20for\x20user\x20','Found\x20specific\x20role:\x20','Setting\x20up\x20Manage\x20Matches\x20section','imageUrl','resimulate-modal','highlight-map-creator','highlight-match-info-container','data-section','Friday','\x22\x20awarded\x20to\x20','Attempting\x20to\x20promote\x20','Monday','#e0e0e0','#article-modal\x20.close-btn','daysSinceMatch','Highlight\x20not\x20found','edit-wins','Edit\x20','keypress'];a2_0x144d=function(){return _0x256d6e;};return a2_0x144d();}function setupDashboardSection(){const _0x166f24=a2_0xf5ca78;document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x166f24(0x23a))['textContent']='-',document[_0x166f24(0x211)](_0x166f24(0x16c))[_0x166f24(0x37c)]='-',document[_0x166f24(0x211)]('rejected-count')[_0x166f24(0x37c)]='-';}function setupLadderSelector(){const _0x53794b=a2_0xf5ca78,_0x52a83a=document['querySelectorAll'](_0x53794b(0x15e));_0x52a83a['forEach'](_0x10a75e=>{_0x10a75e['addEventListener']('change',()=>{const _0x86342e=a2_0x5154;currentLadder=_0x10a75e['value'],document['body']['setAttribute']('data-ladder',currentLadder);const _0x40c37b=document[_0x86342e(0x211)](_0x86342e(0x20b));_0x40c37b&&(_0x40c37b['textContent']=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x86342e(0x211)](_0x86342e(0x362))['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts[_0x86342e(0x341)]['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x86342e(0x359));});});const _0x355682=document['getElementById']('current-ladder-display');_0x355682&&(_0x355682[_0x53794b(0x37c)]=currentLadder);}async function loadDashboardOverview(){const _0x17e00d=a2_0xf5ca78;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x17e00d(0x23a))[_0x17e00d(0x37c)]='-',document['getElementById'](_0x17e00d(0x16c))[_0x17e00d(0x37c)]='-',document['getElementById']('rejected-count')[_0x17e00d(0x37c)]='-';const _0x325e6b=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x59c447=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x17e00d(0x24c),_0x4d1665=currentLadder==='D1'?_0x17e00d(0x239):currentLadder==='D2'?_0x17e00d(0x33d):_0x17e00d(0x1e8),_0x5a2b4d=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':_0x17e00d(0x37b);console['log'](_0x17e00d(0x2e6)+currentLadder+':\x20'+_0x325e6b+',\x20'+_0x59c447);const _0x1a7fbf=await getDocs(collection(db,_0x325e6b)),_0x4aea0a=_0x1a7fbf['size'],_0x3abc60=await getDocs(collection(db,_0x59c447)),_0x51facb=_0x3abc60[_0x17e00d(0x26a)],_0x3d0510=await getDocs(collection(db,_0x4d1665)),_0x5c3dc6=_0x3d0510[_0x17e00d(0x26a)],_0x23e2b1=await getDocs(collection(db,_0x5a2b4d)),_0x40dbda=_0x23e2b1[_0x17e00d(0x26a)];return document['getElementById']('player-count')[_0x17e00d(0x37c)]=_0x4aea0a,document['getElementById'](_0x17e00d(0x23a))['textContent']=_0x51facb,document['getElementById'](_0x17e00d(0x16c))['textContent']=_0x5c3dc6,document['getElementById']('rejected-count')['textContent']=_0x40dbda,await createRankDistributionChart(),await createActivityChart(),console[_0x17e00d(0x233)]('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x202e6f){console['error']('Error\x20loading\x20dashboard\x20data:',_0x202e6f);throw _0x202e6f;}}async function createRankDistributionChart(){const _0x58426b=a2_0xf5ca78;try{const _0x5bc685=collection(db,currentLadder==='D1'?'players':_0x58426b(0x254)),_0x4e1e81=await getDocs(_0x5bc685),_0xfb7b85={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x4e1e81['forEach'](_0x52fa1c=>{const _0x325afc=_0x58426b,_0x2a3bfb=_0x52fa1c['data'](),_0x301a61=_0x2a3bfb['eloRating']||0x4b0;if(_0x301a61>=0x7d0)_0xfb7b85['Emerald']++;else{if(_0x301a61>=0x708)_0xfb7b85['Gold']++;else{if(_0x301a61>=0x640)_0xfb7b85['Silver']++;else{if(_0x301a61>=0x578)_0xfb7b85[_0x325afc(0x297)]++;else _0xfb7b85['Unranked']++;}}}});const _0x2bcdbe=document[_0x58426b(0x211)](_0x58426b(0x2bf));charts['rankDistribution']&&charts[_0x58426b(0x382)]['destroy'](),charts['rankDistribution']=new Chart(_0x2bcdbe,{'type':'doughnut','data':{'labels':Object['keys'](_0xfb7b85),'datasets':[{'data':Object[_0x58426b(0x250)](_0xfb7b85),'backgroundColor':[_0x58426b(0x21c),'#CD7F32','#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x58426b(0x3a6)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':_0x58426b(0x3a6),'font':{'size':0x10}}}}});}catch(_0x5f4306){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x5f4306),document['getElementById']('rank-distribution-chart')['innerHTML']=_0x58426b(0x1fd);}}async function createActivityChart(){const _0x5d6d0d=a2_0xf5ca78;try{const _0x471b29=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0xfb951f=collection(db,_0x471b29),_0x2c275d=new Date();_0x2c275d['setDate'](_0x2c275d['getDate']()-0x7);const _0x542263=query(_0xfb951f,where('approvedAt','>=',_0x2c275d),orderBy('approvedAt',_0x5d6d0d(0x28e))),_0x2d70bd=await getDocs(_0x542263),_0x192f04=['Sunday',_0x5d6d0d(0x3a5),_0x5d6d0d(0x1e3),'Wednesday','Thursday',_0x5d6d0d(0x3a2),'Saturday'],_0x26d42c=_0x192f04['reduce']((_0x325d6e,_0x26febd)=>({..._0x325d6e,[_0x26febd]:0x0}),{});_0x2d70bd[_0x5d6d0d(0x2ba)](_0x1f1918=>{const _0x540aa5=_0x5d6d0d,_0x655159=_0x1f1918[_0x540aa5(0x349)]();if(_0x655159['approvedAt']){const _0x2f8e86=_0x192f04[new Date(_0x655159[_0x540aa5(0x1ef)]['seconds']*0x3e8)['getDay']()];_0x26d42c[_0x2f8e86]++;}});const _0x7e6a2f=document['getElementById'](_0x5d6d0d(0x241));charts[_0x5d6d0d(0x341)]&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x7e6a2f,{'type':_0x5d6d0d(0x315),'data':{'labels':_0x192f04,'datasets':[{'label':'Matches\x20Played','data':_0x192f04['map'](_0x91cf44=>_0x26d42c[_0x91cf44]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0x5d6d0d(0x294):_0x5d6d0d(0x345),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x5d6d0d(0x3a6)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x5d6d0d(0x3a6)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x15b977){console['error'](_0x5d6d0d(0x1b7),_0x15b977),document['getElementById'](_0x5d6d0d(0x241))['innerHTML']=_0x5d6d0d(0x1fd);}}async function loadPlayersData(){const _0x1f3dbf=a2_0xf5ca78,_0x41863e=document['getElementById']('players-table-body');if(!_0x41863e)return;_0x41863e['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x591732='players';if(currentLadder==='D2')_0x591732='playersD2';else currentLadder==='D3'&&(_0x591732='playersD3');console[_0x1f3dbf(0x233)]('Loading\x20players\x20from\x20'+_0x591732+'\x20collection...');const _0x1d46e8=collection(db,_0x591732),_0xabceee=query(_0x1d46e8,orderBy(_0x1f3dbf(0x31f),'desc')),_0x2860ae=await getDocs(_0xabceee);if(_0x2860ae['empty']){_0x41863e['innerHTML']=_0x1f3dbf(0x1b3);return;}_0x41863e['innerHTML']='';let _0x2d0d1e=0x1;_0x2860ae[_0x1f3dbf(0x2ba)](_0x121e8e=>{const _0x362660=_0x1f3dbf,_0x2f0569=_0x121e8e['data'](),_0x214747=getRankFromElo(_0x2f0569[_0x362660(0x31f)]||0x4b0),_0x1289d7=getRankStyle(_0x2f0569['eloRating']||0x4b0),_0x26d7d7=document['createElement']('tr');_0x26d7d7[_0x362660(0x17c)]=_0x362660(0x2f8)+_0x2d0d1e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x1289d7['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2f0569['username']||_0x362660(0x2f5))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x2f0569[_0x362660(0x31f)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x1289d7['color']+_0x362660(0x365)+_0x214747+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2f0569['wins']||0x0)+'W\x20/\x20'+(_0x2f0569['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x121e8e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x121e8e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x41863e['appendChild'](_0x26d7d7),_0x2d0d1e++;}),setupPlayerActionButtons();}catch(_0x410deb){console['error']('Error\x20loading\x20players:',_0x410deb),_0x41863e[_0x1f3dbf(0x17c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x410deb['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x2d48a4){const _0x344a70=a2_0xf5ca78;if(_0x2d48a4>=0x7d0)return _0x344a70(0x21e);if(_0x2d48a4>=0x708)return'Gold';if(_0x2d48a4>=0x640)return'Silver';if(_0x2d48a4>=0x578)return'Bronze';return _0x344a70(0x27f);}function setupPlayerActionButtons(){const _0x1b8db7=a2_0xf5ca78;document['querySelectorAll']('.edit-btn')['forEach'](_0x1eb057=>{_0x1eb057['addEventListener']('click',async _0x3d5c16=>{const _0x17558c=a2_0x5154,_0x1bb1c6=_0x3d5c16['currentTarget'][_0x17558c(0x350)]['id'];openEditPlayerModal(_0x1bb1c6);});}),document[_0x1b8db7(0x19c)]('.delete-btn')['forEach'](_0x4cd3a9=>{_0x4cd3a9['addEventListener']('click',async _0x9ca91e=>{const _0x4ecd01=_0x9ca91e['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x4ecd01);});});}async function openEditPlayerModal(_0x289bc6){const _0x53847d=a2_0xf5ca78;try{const _0x482da1=currentLadder==='D1'?'players':'playersD2',_0xf3b086=doc(db,_0x482da1,_0x289bc6),_0x3c379e=await getDoc(_0xf3b086);if(!_0x3c379e['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x174f48=_0x3c379e[_0x53847d(0x349)](),_0x1542f4=document['getElementById']('edit-player-modal'),_0x39cc0c=document[_0x53847d(0x211)]('edit-username'),_0x198b69=document['getElementById']('edit-elo'),_0x2eb53b=document['getElementById'](_0x53847d(0x3aa)),_0x22aa6e=document['getElementById']('edit-losses');_0x39cc0c['value']=_0x174f48['username']||'',_0x198b69['value']=_0x174f48['eloRating']||0x4b0,_0x2eb53b['value']=_0x174f48['wins']||0x0,_0x22aa6e[_0x53847d(0x18b)]=_0x174f48['losses']||0x0,_0x1542f4['dataset'][_0x53847d(0x18f)]=_0x289bc6,_0x1542f4['classList'][_0x53847d(0x1f1)]('active');}catch(_0x436656){console[_0x53847d(0x2cd)](_0x53847d(0x2a6),_0x436656),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x508a8c=a2_0xf5ca78;try{const _0x552d16=document[_0x508a8c(0x211)]('edit-player-modal'),_0x295f76=_0x552d16['dataset']['playerId'];if(!_0x295f76){showNotification('No\x20player\x20selected',_0x508a8c(0x2cd));return;}const _0x5648bc=document[_0x508a8c(0x211)](_0x508a8c(0x391)),_0x5bf34e=document['getElementById']('edit-elo'),_0x2cd80f=document['getElementById']('edit-wins'),_0x53eb45=document['getElementById'](_0x508a8c(0x2b4)),_0x316636=_0x5648bc[_0x508a8c(0x18b)]['trim'](),_0x544c40=parseInt(_0x5bf34e['value']),_0x51683a=parseInt(_0x2cd80f[_0x508a8c(0x18b)]),_0x13ef00=parseInt(_0x53eb45['value']);if(!_0x316636||isNaN(_0x544c40)){showNotification(_0x508a8c(0x2c4),'error');return;}const _0x2ff1a6=currentLadder==='D1'?'players':'playersD2',_0x53d0ea=doc(db,_0x2ff1a6,_0x295f76),_0x19190b=await getDoc(_0x53d0ea),_0x3a81fc=_0x19190b[_0x508a8c(0x338)]()?_0x19190b['data']():{},_0x364e23=_0x3a81fc[_0x508a8c(0x31f)]||0x4b0;await updateDoc(_0x53d0ea,{'username':_0x316636,'eloRating':_0x544c40,'wins':_0x51683a||0x0,'losses':_0x13ef00||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x544c40!==_0x364e23){const _0x3dde17=currentLadder==='D1'?_0x508a8c(0x313):'eloHistoryD2';await addDoc(collection(db,_0x3dde17),{'player':_0x316636,'previousElo':_0x364e23,'newElo':_0x544c40,'timestamp':serverTimestamp(),'type':_0x508a8c(0x363),'modifiedBy':auth['currentUser'][_0x508a8c(0x1ff)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x508a8c(0x299));}catch(_0x216201){console['error'](_0x508a8c(0x35b),_0x216201),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x216201['message'],'error');}}function closeEditPlayerModal(){const _0x1c26c4=a2_0xf5ca78,_0x552c26=document['getElementById']('edit-player-modal');_0x552c26[_0x1c26c4(0x377)]['remove']('active'),_0x552c26['dataset']['playerId']='';}async function confirmDeletePlayer(_0x1819f0){const _0x36ed2a=a2_0xf5ca78;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x3fe1e5=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x3fe1e5,_0x1819f0)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully',_0x36ed2a(0x299));}catch(_0x2fcdcc){console['error'](_0x36ed2a(0x23d),_0x2fcdcc),showNotification(_0x36ed2a(0x2f7)+_0x2fcdcc['message'],'error');}}async function setupManagePlayersSection(){const _0x3d43f3=a2_0xf5ca78,_0x31545b=document['getElementById']('add-player-form');_0x31545b&&_0x31545b['addEventListener']('submit',async _0x189b57=>{_0x189b57['preventDefault'](),await addNewPlayer();});const _0x593006=document['getElementById']('player-search');_0x593006&&_0x593006['addEventListener'](_0x3d43f3(0x27b),debounce(filterPlayerTable,0x12c));const _0x52fb00=document['getElementById']('save-player-btn');_0x52fb00&&_0x52fb00[_0x3d43f3(0x1b4)]('click',saveEditedPlayer);const _0x4ecd5c=document['getElementById']('cancel-edit-btn');_0x4ecd5c&&_0x4ecd5c['addEventListener'](_0x3d43f3(0x2d3),closeEditPlayerModal);const _0x3d6340=document[_0x3d43f3(0x211)]('edit-player-modal');_0x3d6340&&_0x3d6340['addEventListener']('click',_0x4ebbe3=>{const _0x3e7bd6=_0x3d43f3;_0x4ebbe3[_0x3e7bd6(0x343)]===_0x3d6340&&closeEditPlayerModal();});const _0x318311=document['getElementById']('players-ladder-selector');_0x318311&&_0x318311[_0x3d43f3(0x1b4)]('change',()=>{currentLadder=_0x318311['value'],loadPlayersData();});}async function addNewPlayer(){const _0x36f00e=a2_0xf5ca78;try{const _0x5331fc=document['getElementById']('new-player-username'),_0x48d9af=document[_0x36f00e(0x211)]('new-player-elo'),_0x1ae633=_0x5331fc[_0x36f00e(0x18b)]['trim'](),_0x5a8745=parseInt(_0x48d9af[_0x36f00e(0x18b)])||0x4b0;if(!_0x1ae633){alert('Please\x20enter\x20a\x20valid\x20username');return;}console[_0x36f00e(0x233)]('Adding\x20player\x20'+_0x1ae633+'\x20with\x20ELO\x20'+_0x5a8745+_0x36f00e(0x16e)+currentLadder+_0x36f00e(0x334));let _0x434219=_0x36f00e(0x185),_0x1cde4b='eloHistory';if(currentLadder==='D2')_0x434219='playersD2',_0x1cde4b='eloHistoryD2';else currentLadder==='D3'&&(_0x434219=_0x36f00e(0x367),_0x1cde4b='eloHistoryD3');const _0xb5f264=query(collection(db,_0x434219),where('username','==',_0x1ae633)),_0x559d0e=await getDocs(_0xb5f264);if(!_0x559d0e['empty']){alert('Username\x20'+_0x1ae633+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x2be8c9=auth['currentUser'],_0x16ce79={'username':_0x1ae633,'eloRating':_0x5a8745,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x2be8c9?_0x2be8c9['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x434219),_0x16ce79),await addDoc(collection(db,_0x1cde4b),{'player':_0x1ae633,'previousElo':0x4b0,'newElo':_0x5a8745,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x2be8c9?_0x2be8c9['email']:'admin','gameMode':currentLadder}),_0x5331fc['value']='',_0x48d9af['value']='1200',alert('Player\x20'+_0x1ae633+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x36f00e(0x179)),loadPlayersData();}catch(_0x9d81c){console[_0x36f00e(0x2cd)](_0x36f00e(0x309),_0x9d81c),alert('Error\x20adding\x20player:\x20'+_0x9d81c['message']);}}document[a2_0xf5ca78(0x1b4)]('DOMContentLoaded',()=>{const _0x14be74=document['getElementById']('add-player-form');_0x14be74&&_0x14be74['addEventListener']('submit',_0x4277f4=>{_0x4277f4['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x342358=a2_0xf5ca78,_0x25f808=document['getElementById']('player-search')['value']['toLowerCase'](),_0x656031=document['querySelectorAll']('#players-table-body\x20tr');let _0x5681b4=0x0;_0x656031['forEach'](_0x226ad3=>{const _0x81e5fd=a2_0x5154,_0x4fb150=_0x226ad3['querySelector']('.username')?.['textContent'][_0x81e5fd(0x20d)]()||'';_0x4fb150[_0x81e5fd(0x2fb)](_0x25f808)?(_0x226ad3['style']['display']='',_0x5681b4++):_0x226ad3['style'][_0x81e5fd(0x2e4)]='none';});const _0x3d5d4e=document['getElementById']('no-results-message');_0x3d5d4e&&(_0x5681b4===0x0&&_0x25f808!==''?_0x3d5d4e[_0x342358(0x23f)]['display']='block':_0x3d5d4e['style']['display']='none');}function debounce(_0x548c47,_0x32a112){let _0x3f41dc;return function(..._0x16ec94){clearTimeout(_0x3f41dc),_0x3f41dc=setTimeout(()=>_0x548c47['apply'](this,_0x16ec94),_0x32a112);};}async function loadEloHistory(_0x19ac88=0x1){const _0x20b0e3=a2_0xf5ca78,_0x9c64f2=document['getElementById'](_0x20b0e3(0x333)),_0x51bfc5=currentLadder['toLowerCase']();if(!_0x9c64f2)return;_0x9c64f2['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x15dcc8=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x5c9cd4=collection(db,_0x15dcc8);let _0x507a18;if(_0x19ac88>eloHistoryPagination[_0x51bfc5][_0x20b0e3(0x2b5)]&&eloHistoryPagination[_0x51bfc5]['lastVisible'])_0x507a18=query(_0x5c9cd4,orderBy(_0x20b0e3(0x2e3),'desc'),startAfter(eloHistoryPagination[_0x51bfc5]['lastVisible']),limit(PAGE_SIZE));else _0x19ac88<eloHistoryPagination[_0x51bfc5]['page']&&eloHistoryPagination[_0x51bfc5]['firstVisible']?_0x507a18=query(_0x5c9cd4,orderBy(_0x20b0e3(0x2e3),_0x20b0e3(0x2d8)),endBefore(eloHistoryPagination[_0x51bfc5]['firstVisible']),limitToLast(PAGE_SIZE)):_0x507a18=query(_0x5c9cd4,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x4356c4=await getDocs(_0x507a18);if(_0x4356c4['empty']){_0x9c64f2[_0x20b0e3(0x17c)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x51bfc5+_0x20b0e3(0x356))[_0x20b0e3(0x37c)]=_0x20b0e3(0x252);return;}eloHistoryPagination[_0x51bfc5]['page']=_0x19ac88,eloHistoryPagination[_0x51bfc5][_0x20b0e3(0x30d)]=_0x4356c4['docs'][0x0],eloHistoryPagination[_0x51bfc5][_0x20b0e3(0x1c6)]=_0x4356c4['docs'][_0x4356c4['docs'][_0x20b0e3(0x267)]-0x1];const _0x339ef0=new Map();_0x9c64f2['innerHTML']='';const _0x29bb6b=async _0x3ba49c=>{const _0x23651a=_0x20b0e3;if(typeof _0x3ba49c!=='string'||_0x3ba49c['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x3ba49c))return _0x3ba49c;if(_0x339ef0['has'](_0x3ba49c))return _0x339ef0['get'](_0x3ba49c);try{for(const _0x660088 of['players','playersD2','playersD3','nonParticipants']){const _0x3fded4=await getDoc(doc(db,_0x660088,_0x3ba49c));if(_0x3fded4['exists']()&&_0x3fded4[_0x23651a(0x349)]()['username']){const _0x2e3af9=_0x3fded4['data']()['username'];return _0x339ef0['set'](_0x3ba49c,_0x2e3af9),_0x2e3af9;}}return _0x3ba49c;}catch(_0x52ba9b){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x3ba49c+':',_0x52ba9b),_0x3ba49c;}};for(const _0x268423 of _0x4356c4[_0x20b0e3(0x301)]){const _0x337cc9=_0x268423[_0x20b0e3(0x349)](),_0x4ded73=document[_0x20b0e3(0x1fa)]('tr'),_0x1aa911=_0x337cc9['timestamp']?new Date(_0x337cc9[_0x20b0e3(0x2e3)]['seconds']*0x3e8)['toLocaleString']():'N/A',_0x3a2ae8=_0x337cc9['newElo']-_0x337cc9[_0x20b0e3(0x2d4)],_0x42f2f1=_0x3a2ae8>0x0?'positive-change':_0x3a2ae8<0x0?_0x20b0e3(0x1fb):'',_0x367260=_0x3a2ae8>0x0?'+':'',_0x3b25dc=_0x337cc9['player']||_0x337cc9['username']||_0x337cc9['userId']||'N/A',_0xec4c10=await _0x29bb6b(_0x3b25dc);_0x4ded73['innerHTML']=_0x20b0e3(0x22e)+_0x1aa911+_0x20b0e3(0x1ee)+_0xec4c10+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x337cc9['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x337cc9['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x42f2f1+'\x22>'+_0x367260+_0x3a2ae8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x337cc9['type'])+_0x20b0e3(0x224)+(_0x337cc9[_0x20b0e3(0x2fe)]||_0x337cc9['promotedBy']||_0x337cc9['demotedBy']||'System')+_0x20b0e3(0x2fc),_0x9c64f2['appendChild'](_0x4ded73);}document['getElementById'](_0x51bfc5+_0x20b0e3(0x356))['textContent']='Page\x20'+_0x19ac88;const _0x393e31=document['getElementById'](_0x51bfc5+'-prev-page'),_0xb3f10e=document['getElementById'](_0x51bfc5+_0x20b0e3(0x165));if(_0x393e31)_0x393e31[_0x20b0e3(0x18d)]=_0x19ac88<=0x1;const _0x1e2191=query(_0x5c9cd4,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x51bfc5][_0x20b0e3(0x1c6)]),limit(0x1)),_0x36ec0c=await getDocs(_0x1e2191);if(_0xb3f10e)_0xb3f10e['disabled']=_0x36ec0c['empty'];}catch(_0x56e914){console['error'](_0x20b0e3(0x270),_0x56e914),_0x9c64f2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x56e914['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x38c1ce){const _0x490054=a2_0xf5ca78;switch(_0x38c1ce){case _0x490054(0x2af):return _0x490054(0x1c8);case'promotion':return _0x490054(0x36f);case'demotion':return'Demotion';case _0x490054(0x363):return'Admin\x20Adjustment';case _0x490054(0x34a):return'Initial\x20Placement';default:return _0x38c1ce||'Unknown';}}function setupEloHistorySection(){const _0x167e8b=a2_0xf5ca78;document[_0x167e8b(0x211)](_0x167e8b(0x22f))['addEventListener'](_0x167e8b(0x2d3),()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document[_0x167e8b(0x211)]('d1-next-page')['addEventListener'](_0x167e8b(0x2d3),()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{const _0x2bc64a=_0x167e8b;loadEloHistory(eloHistoryPagination['d2'][_0x2bc64a(0x2b5)]-0x1);}),document[_0x167e8b(0x211)](_0x167e8b(0x226))['addEventListener']('click',()=>{const _0x14c27b=_0x167e8b;loadEloHistory(eloHistoryPagination['d2'][_0x14c27b(0x2b5)]+0x1);});const _0x415294=document['getElementById']('d3-prev-page'),_0x21df62=document[_0x167e8b(0x211)]('d3-next-page');_0x415294&&_0x415294['addEventListener']('click',()=>{const _0x1f95da=_0x167e8b;loadEloHistory(eloHistoryPagination['d3'][_0x1f95da(0x2b5)]-0x1);});_0x21df62&&_0x21df62['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x3fb02e=document['getElementById']('elo-history-search');_0x3fb02e&&_0x3fb02e['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x4c7d9e=document['getElementById']('history-type-filter');_0x4c7d9e&&_0x4c7d9e['addEventListener'](_0x167e8b(0x190),applyEloHistoryFilters);const _0x20086f=document['getElementById'](_0x167e8b(0x231));_0x20086f&&_0x20086f['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x3c8d06=a2_0xf5ca78,_0x4288aa=document['getElementById']('elo-history-search')['value'][_0x3c8d06(0x20d)](),_0x587ae5=document['querySelectorAll'](_0x3c8d06(0x1db));let _0x3592fa=0x0;_0x587ae5['forEach'](_0x1c7335=>{const _0x24fe4e=_0x3c8d06;if(_0x1c7335[_0x24fe4e(0x377)][_0x24fe4e(0x357)]('loading-cell')||_0x1c7335['classList']['contains']('empty-state')||_0x1c7335[_0x24fe4e(0x377)][_0x24fe4e(0x357)]('error-state'))return;const _0x235576=_0x1c7335[_0x24fe4e(0x30b)]('.player')?.['textContent']['toLowerCase']()||'',_0x55b8fe=_0x1c7335['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x59bfb1=_0x1c7335[_0x24fe4e(0x30b)]('.admin-action')?.['textContent']['toLowerCase']()||'';_0x235576['includes'](_0x4288aa)||_0x55b8fe['includes'](_0x4288aa)||_0x59bfb1[_0x24fe4e(0x2fb)](_0x4288aa)?(_0x1c7335['style']['display']='',_0x3592fa++):_0x1c7335['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x40aa4b=a2_0xf5ca78,_0x1ca2c7=document[_0x40aa4b(0x211)]('history-start-date')[_0x40aa4b(0x18b)],_0x399b27=document['getElementById']('history-end-date')[_0x40aa4b(0x18b)],_0x1caac8=document['getElementById']('history-type-filter')[_0x40aa4b(0x18b)],_0x4b1408=currentLadder['toLowerCase']();eloHistoryPagination[_0x4b1408]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x8aac9c=document[_0x40aa4b(0x211)]('elo-history-table-body');_0x8aac9c['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x1bcf9e=currentLadder==='D1'?'eloHistory':_0x40aa4b(0x35c),_0x37505d=collection(db,_0x1bcf9e);let _0x331975=[orderBy('timestamp','desc')];if(_0x1ca2c7){const _0x4b6eb2=new Date(_0x1ca2c7);_0x4b6eb2['setHours'](0x0,0x0,0x0,0x0),_0x331975[_0x40aa4b(0x1da)](where('timestamp','>=',_0x4b6eb2));}if(_0x399b27){const _0x3dd461=new Date(_0x399b27);_0x3dd461['setHours'](0x17,0x3b,0x3b,0x3e7),_0x331975[_0x40aa4b(0x1da)](where('timestamp','<=',_0x3dd461));}_0x1caac8&&_0x1caac8!=='all'&&_0x331975[_0x40aa4b(0x1da)](where('type','==',_0x1caac8));_0x331975['push'](limit(PAGE_SIZE));const _0x30d2d=query(_0x37505d,..._0x331975),_0x2a5c89=await getDocs(_0x30d2d);!_0x2a5c89['empty']&&(eloHistoryPagination[_0x4b1408]['firstVisible']=_0x2a5c89['docs'][0x0],eloHistoryPagination[_0x4b1408]['lastVisible']=_0x2a5c89['docs'][_0x2a5c89[_0x40aa4b(0x301)]['length']-0x1]);_0x8aac9c['innerHTML']='';if(_0x2a5c89['empty']){_0x8aac9c['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x2a5c89[_0x40aa4b(0x2ba)](_0x284923=>{const _0x5e2041=_0x40aa4b,_0x842c67=_0x284923['data'](),_0x54fa1a=document['createElement']('tr'),_0x1de59c=_0x842c67['timestamp']?new Date(_0x842c67['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x30d6e3=_0x842c67[_0x5e2041(0x195)]-_0x842c67['previousElo'],_0x163ab4=_0x30d6e3>0x0?'positive-change':_0x30d6e3<0x0?'negative-change':'',_0x499c29=_0x30d6e3>0x0?'+':'',_0x9c9c2d=_0x842c67['player']||_0x842c67['username']||_0x842c67[_0x5e2041(0x1f7)]||'N/A';_0x54fa1a['innerHTML']=_0x5e2041(0x22e)+_0x1de59c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x9c9c2d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x842c67['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x842c67['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x163ab4+'\x22>'+_0x499c29+_0x30d6e3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x842c67['type'])+_0x5e2041(0x224)+(_0x842c67['modifiedBy']||_0x842c67['promotedBy']||_0x842c67['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x8aac9c['appendChild'](_0x54fa1a);}),document['getElementById'](_0x4b1408+'-page-indicator')[_0x40aa4b(0x37c)]='Page\x201';}catch(_0x5577cf){console['error']('Error\x20applying\x20filters:',_0x5577cf),_0x8aac9c['innerHTML']=_0x40aa4b(0x1bc)+_0x5577cf[_0x40aa4b(0x177)]+_0x40aa4b(0x20e);}}function resetEloHistoryFilters(){const _0x626fbd=a2_0xf5ca78;document['getElementById']('history-start-date')['value']='',document['getElementById']('history-end-date')[_0x626fbd(0x18b)]='',document[_0x626fbd(0x211)]('history-type-filter')[_0x626fbd(0x18b)]=_0x626fbd(0x2e0),document['getElementById'](_0x626fbd(0x304))[_0x626fbd(0x18b)]='';const _0x338acb=currentLadder['toLowerCase']();eloHistoryPagination[_0x338acb]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x54cb5c=a2_0xf5ca78,_0x222499=document[_0x54cb5c(0x211)]('promote-player-btn'),_0x44cdf7=document['getElementById']('promote-modal'),_0x28eb32=document['getElementById'](_0x54cb5c(0x237));_0x222499&&_0x44cdf7&&_0x28eb32&&(_0x222499['addEventListener']('click',()=>{const _0xbbc0ad=_0x54cb5c;_0x44cdf7['classList']['add'](_0xbbc0ad(0x36c));}),_0x44cdf7[_0x54cb5c(0x1b4)]('click',_0x3921d2=>{const _0xc59fe7=_0x54cb5c;_0x3921d2['target']===_0x44cdf7&&_0x44cdf7[_0xc59fe7(0x377)]['remove']('active');}),_0x28eb32['addEventListener']('submit',async _0x5f1f75=>{const _0x18c2f8=_0x54cb5c;_0x5f1f75['preventDefault']();const _0x1b2fd6=document[_0x18c2f8(0x211)]('promote-username'),_0x4a7181=document[_0x18c2f8(0x211)]('promote-ladder'),_0xeeface=_0x1b2fd6['value'][_0x18c2f8(0x2ae)](),_0x13af24=_0x4a7181[_0x18c2f8(0x18b)];if(!_0xeeface){showNotification('Please\x20enter\x20a\x20username',_0x18c2f8(0x2cd));return;}try{await promotePlayer(_0xeeface,_0x13af24),_0x44cdf7['classList'][_0x18c2f8(0x1a9)]('active'),_0x1b2fd6['value']='';}catch(_0x54a3b6){showNotification(_0x54a3b6['message'],'error');}}),document[_0x54cb5c(0x211)]('cancel-promote-btn')[_0x54cb5c(0x1b4)](_0x54cb5c(0x2d3),()=>{const _0x529cd9=_0x54cb5c;_0x44cdf7[_0x529cd9(0x377)][_0x529cd9(0x1a9)](_0x529cd9(0x36c));}));const _0x4fc1ae=document['getElementById']('demote-player-btn'),_0x110128=document['getElementById']('demote-modal'),_0x588b25=document[_0x54cb5c(0x211)](_0x54cb5c(0x33f));_0x4fc1ae&&_0x110128&&_0x588b25&&(_0x4fc1ae['addEventListener']('click',()=>{_0x110128['classList']['add']('active');}),_0x110128[_0x54cb5c(0x1b4)]('click',_0x219060=>{const _0x54c614=_0x54cb5c;_0x219060['target']===_0x110128&&_0x110128['classList']['remove'](_0x54c614(0x36c));}),_0x588b25['addEventListener']('submit',async _0x24c92b=>{const _0x4ddea0=_0x54cb5c;_0x24c92b['preventDefault']();const _0x58c77b=document['getElementById']('demote-username'),_0x3ec71d=document['getElementById']('demote-ladder'),_0x411c46=_0x58c77b[_0x4ddea0(0x18b)]['trim'](),_0x55dfa0=_0x3ec71d['value'];if(!_0x411c46){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x411c46,_0x55dfa0),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x565a37){console[_0x4ddea0(0x2cd)]('Error\x20in\x20demotion:',_0x565a37);}}));const _0x3b3610=document[_0x54cb5c(0x211)]('set-elo-btn'),_0x3b79b3=document['getElementById'](_0x54cb5c(0x1c7)),_0x2b8408=document[_0x54cb5c(0x211)]('set-elo-form');_0x3b3610&&_0x3b79b3&&_0x2b8408&&(_0x3b3610['addEventListener'](_0x54cb5c(0x2d3),()=>{_0x3b79b3['classList']['add']('active');}),_0x3b79b3['addEventListener']('click',_0x5c83c8=>{const _0x905faa=_0x54cb5c;_0x5c83c8['target']===_0x3b79b3&&_0x3b79b3[_0x905faa(0x377)]['remove'](_0x905faa(0x36c));}),_0x2b8408[_0x54cb5c(0x1b4)]('submit',async _0x2d4acd=>{const _0x5d12ad=_0x54cb5c;_0x2d4acd['preventDefault']();const _0x2f78fc=document[_0x5d12ad(0x211)]('set-elo-username'),_0x47380c=document[_0x5d12ad(0x211)]('set-elo-value');let _0x3622da;const _0x1c2416=document[_0x5d12ad(0x211)](_0x5d12ad(0x26b)),_0x2a092f=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x1c2416)_0x3622da=_0x1c2416[_0x5d12ad(0x18b)];else _0x2a092f?_0x3622da=_0x2a092f[_0x5d12ad(0x18b)]:_0x3622da='D1';if(!_0x2f78fc||!_0x47380c){showNotification(_0x5d12ad(0x2e7),'error');return;}const _0x2aca85=_0x2f78fc[_0x5d12ad(0x18b)]['trim'](),_0x4b5526=parseInt(_0x47380c['value']);if(!_0x2aca85||isNaN(_0x4b5526)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x2aca85,_0x4b5526,_0x3622da),_0x3b79b3['classList'][_0x5d12ad(0x1a9)](_0x5d12ad(0x36c)),_0x2f78fc['value']='',_0x47380c['value']='';}catch(_0xe694af){showNotification(_0xe694af[_0x5d12ad(0x177)],_0x5d12ad(0x2cd));}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{const _0x1de9c3=_0x54cb5c;_0x3b79b3['classList'][_0x1de9c3(0x1a9)]('active');}));const _0x3bf139=document['getElementById'](_0x54cb5c(0x2f6)),_0x599c89=document['getElementById']('set-role-form');if(_0x3bf139&&_0x599c89){_0x3bf139['addEventListener'](_0x54cb5c(0x2d3),_0x563788=>{const _0x402d05=_0x54cb5c;_0x563788[_0x402d05(0x343)]===_0x3bf139&&closeModalHandler();}),_0x599c89['addEventListener']('submit',async _0x444d74=>{const _0x8d5f8c=_0x54cb5c;_0x444d74['preventDefault']();const _0x405281=document[_0x8d5f8c(0x211)]('role-username'),_0x267e3f=document['getElementById'](_0x8d5f8c(0x1dc)),_0x74d0c9=document['getElementById']('role-color'),_0xae3300=_0x405281['value'][_0x8d5f8c(0x2ae)](),_0x4a1b5b=_0x267e3f['value']['trim'](),_0x123b31=_0x74d0c9['value'];if(!_0xae3300){showNotification(_0x8d5f8c(0x326),'error');return;}try{await setUserRole(_0xae3300,_0x4a1b5b,_0x123b31),closeModalHandler(),loadUsersWithRoles();}catch(_0x4a009f){}});const _0x5e42f4=document['getElementById']('cancel-role-btn');_0x5e42f4&&(_0x5e42f4['removeEventListener']('click',closeModalHandler),_0x5e42f4[_0x54cb5c(0x1b4)]('click',closeModalHandler));}}async function promotePlayer(_0x1e0bb7,_0xe9081e){const _0x4d9e49=a2_0xf5ca78;try{console[_0x4d9e49(0x233)](_0x4d9e49(0x3a4)+_0x1e0bb7+'\x20in\x20'+_0xe9081e+_0x4d9e49(0x334));const _0x3943a6=auth['currentUser'];if(!_0x3943a6)throw new Error(_0x4d9e49(0x223));const _0x4f93a4=_0xe9081e==='D2'?'playersD2':'players',_0x317eeb=_0xe9081e==='D2'?'eloHistoryD2':_0x4d9e49(0x313);console['log']('Searching\x20for\x20player\x20in\x20'+_0x4f93a4);const _0x33fc9e=collection(db,_0x4f93a4),_0x35beda=query(_0x33fc9e,where('username','==',_0x1e0bb7)),_0x40dfb2=await getDocs(_0x35beda);if(_0x40dfb2['empty']){alert(_0x4d9e49(0x336)+_0xe9081e+_0x4d9e49(0x334));throw new Error(_0x4d9e49(0x336)+_0xe9081e+'\x20ladder');}const _0x1433e5=_0x40dfb2[_0x4d9e49(0x301)][0x0],_0x1c37ef=_0x1433e5['data'](),_0x9b8fc8=_0x1c37ef[_0x4d9e49(0x31f)]||0x4b0,_0x36f29a=_0x1433e5['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x9b8fc8);const _0x24678f=[{'name':'Bronze','elo':0x578},{'name':_0x4d9e49(0x29a),'elo':0x640},{'name':'Gold','elo':0x708},{'name':_0x4d9e49(0x21e),'elo':0x7d0}];let _0x232b70=_0x24678f['find'](_0xf319e7=>_0xf319e7[_0x4d9e49(0x308)]>_0x9b8fc8);if(!_0x232b70){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0xe9081e+_0x4d9e49(0x334));throw new Error(_0x4d9e49(0x2e9)+_0xe9081e+_0x4d9e49(0x334));}console['log'](_0x4d9e49(0x342)+_0x232b70['name']+'\x20('+_0x232b70[_0x4d9e49(0x308)]+')'),await updateDoc(doc(db,_0x4f93a4,_0x1433e5['id']),{'eloRating':_0x232b70['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x3943a6['email']||'admin'}),await addDoc(collection(db,_0x317eeb),{'player':_0x1e0bb7,'previousElo':_0x9b8fc8,'newElo':_0x232b70[_0x4d9e49(0x308)],'timestamp':serverTimestamp(),'type':_0x4d9e49(0x351),'rankAchieved':_0x232b70[_0x4d9e49(0x302)],'promotedBy':_0x3943a6['email']||'admin','gameMode':_0xe9081e});try{const {promotionManager:_0xfef4ee}=await import(_0x4d9e49(0x1e0)),_0x5023b7=_0xfef4ee['getRankName'](_0x9b8fc8),_0x1ccf7f=_0x232b70['name'];await _0xfef4ee['sendPromotionNotification'](_0x36f29a,_0x1e0bb7,_0x9b8fc8,_0x232b70['elo'],_0x5023b7,_0x1ccf7f,'promotion',{'displayName':_0x1e0bb7,'source':'admin','adminUser':_0x3943a6[_0x4d9e49(0x1ff)],'ladder':_0xe9081e}),console['log'](_0x4d9e49(0x16a));}catch(_0x6fc7e4){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x6fc7e4);}return alert('Successfully\x20promoted\x20'+_0x1e0bb7+_0x4d9e49(0x16e)+_0x232b70['name']+'\x20('+_0x232b70['elo']+')'),currentLadder===_0xe9081e&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x3101e9){console[_0x4d9e49(0x2cd)](_0x4d9e49(0x1e5),_0x3101e9),alert('Error\x20promoting\x20player:\x20'+_0x3101e9['message']);throw _0x3101e9;}}document[a2_0xf5ca78(0x1b4)]('DOMContentLoaded',()=>{const _0x109923=a2_0xf5ca78,_0x49f8ea=document['getElementById'](_0x109923(0x237));_0x49f8ea&&_0x49f8ea['addEventListener']('submit',async _0x165924=>{const _0x43bad3=_0x109923;_0x165924[_0x43bad3(0x390)]();const _0x151f70=document['getElementById']('promote-username')['value']['trim'](),_0x5886cd=document[_0x43bad3(0x30b)](_0x43bad3(0x384))['value'];if(!_0x151f70){alert(_0x43bad3(0x1b5));return;}try{await promotePlayer(_0x151f70,_0x5886cd),document[_0x43bad3(0x211)]('promote-modal')['classList']['remove']('active'),document['getElementById']('promote-username')['value']='';}catch(_0x53896b){console['error']('Error\x20in\x20promotion:',_0x53896b);}});});async function demotePlayer(_0x981e89,_0x50f47a){const _0x30f544=a2_0xf5ca78;try{console['log']('Attempting\x20to\x20demote\x20'+_0x981e89+_0x30f544(0x282)+_0x50f47a+'\x20ladder');const _0x2639bf=auth[_0x30f544(0x25c)];if(!_0x2639bf)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x57fe40=_0x50f47a==='D2'?_0x30f544(0x254):'players',_0x36621a=_0x50f47a==='D2'?_0x30f544(0x35c):_0x30f544(0x313);console['log']('Searching\x20for\x20player\x20in\x20'+_0x57fe40);const _0x3fd350=collection(db,_0x57fe40),_0x48efca=query(_0x3fd350,where('username','==',_0x981e89)),_0x1a102e=await getDocs(_0x48efca);if(_0x1a102e['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x50f47a+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x50f47a+_0x30f544(0x334));}const _0x508867=_0x1a102e[_0x30f544(0x301)][0x0],_0x3cea1e=_0x508867[_0x30f544(0x349)](),_0x56f1e9=_0x3cea1e['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x56f1e9);const _0x5ef767=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':_0x30f544(0x27f),'elo':0x4b0}];let _0x221865=_0x5ef767['find'](_0x5d05f6=>_0x5d05f6[_0x30f544(0x308)]<_0x56f1e9);if(!_0x221865){alert(_0x30f544(0x380)+_0x50f47a+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x50f47a+_0x30f544(0x334));}console['log']('Demoting\x20player\x20to\x20'+_0x221865[_0x30f544(0x302)]+'\x20('+_0x221865[_0x30f544(0x308)]+')'),await updateDoc(doc(db,_0x57fe40,_0x508867['id']),{'eloRating':_0x221865['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x2639bf['email']||'admin'}),await addDoc(collection(db,_0x36621a),{'player':_0x981e89,'previousElo':_0x56f1e9,'newElo':_0x221865[_0x30f544(0x308)],'timestamp':serverTimestamp(),'type':_0x30f544(0x2d5),'rankAchieved':_0x221865['name'],'demotedBy':_0x2639bf[_0x30f544(0x1ff)]||'admin','gameMode':_0x50f47a});try{const {promotionManager:_0x3bcb5f}=await import('./promotions.js'),_0x44b67c=_0x3bcb5f['getRankName'](_0x56f1e9),_0x1ee581=_0x221865['name'];await _0x3bcb5f[_0x30f544(0x2d0)](_0x508867['id'],_0x981e89,_0x56f1e9,_0x221865['elo'],_0x44b67c,_0x1ee581,'demotion',{'displayName':_0x981e89,'source':'admin','adminUser':_0x2639bf['email'],'ladder':_0x50f47a}),console['log'](_0x30f544(0x209));}catch(_0x482aca){console['error'](_0x30f544(0x19e),_0x482aca);}return alert(_0x30f544(0x24e)+_0x981e89+'\x20to\x20'+_0x221865[_0x30f544(0x302)]+'\x20('+_0x221865['elo']+')'),currentLadder===_0x50f47a&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x5ca624){console['error']('Error\x20demoting\x20player:',_0x5ca624),alert('Error\x20demoting\x20player:\x20'+_0x5ca624[_0x30f544(0x177)]);throw _0x5ca624;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x5509e1=a2_0xf5ca78,_0xbcbfd9=document['getElementById']('demote-form');_0xbcbfd9&&_0xbcbfd9[_0x5509e1(0x1b4)]('submit',async _0x5ee121=>{const _0x43e2a9=_0x5509e1;_0x5ee121[_0x43e2a9(0x390)]();const _0x4278a7=document['getElementById']('demote-username')['value']['trim'](),_0x38bf88=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x4278a7){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x4278a7,_0x38bf88),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x9cd43e){console['error']('Error\x20in\x20demotion:',_0x9cd43e);}});});async function setCustomElo(_0x1f3a23,_0xb346bc,_0x4d212e){const _0x117f58=a2_0xf5ca78;try{const _0x30244f=auth['currentUser'];if(!_0x30244f||!isAdmin(_0x30244f[_0x117f58(0x1ff)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x6fd793=_0x4d212e==='D2'?'playersD2':_0x117f58(0x185),_0x5a2b3d=_0x4d212e==='D2'?'eloHistoryD2':'eloHistory',_0x32ab8e=collection(db,_0x6fd793),_0x3e8199=query(_0x32ab8e,where('username','==',_0x1f3a23)),_0x3379e1=await getDocs(_0x3e8199);if(_0x3379e1[_0x117f58(0x370)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x4d212e+'\x20ladder');const _0x3fb938=_0x3379e1[_0x117f58(0x301)][0x0],_0x259a96=_0x3fb938[_0x117f58(0x349)](),_0x124f91=_0x259a96['eloRating']||0x4b0,_0x5ed912=writeBatch(db);_0x5ed912[_0x117f58(0x16f)](doc(db,_0x6fd793,_0x3fb938['id']),{'eloRating':_0xb346bc,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x30244f['email']});const _0xe49b2e=doc(collection(db,_0x5a2b3d));return _0x5ed912['set'](_0xe49b2e,{'player':_0x1f3a23,'previousElo':_0x124f91,'newElo':_0xb346bc,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x30244f[_0x117f58(0x1ff)],'gameMode':_0x4d212e}),await _0x5ed912[_0x117f58(0x31c)](),showNotification('ELO\x20rating\x20for\x20'+_0x1f3a23+'\x20was\x20updated\x20from\x20'+_0x124f91+'\x20to\x20'+_0xb346bc,_0x117f58(0x299)),currentLadder===_0x4d212e&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0xe03de8){console[_0x117f58(0x2cd)]('Error\x20setting\x20custom\x20ELO:',_0xe03de8);throw _0xe03de8;}}async function setUserRole(_0x439187,_0x574d70,_0x5c55ff){const _0x544e3f=a2_0xf5ca78;try{const _0x24a1f6=auth['currentUser'];if(!_0x24a1f6||!isAdmin(_0x24a1f6['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x2de513=_0x574d70?_0x574d70['trim']():null,_0x406165=_0x2de513?_0x5c55ff||_0x544e3f(0x21c):null,[_0x3784b4,_0x122edd]=await Promise['all']([getDocs(query(collection(db,_0x544e3f(0x185)),where('username','==',_0x439187))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x439187)))]),_0x3e8186=[];if(!_0x3784b4['empty'])_0x3e8186['push']({'ref':_0x3784b4['docs'][0x0]['ref'],'source':'D1'});if(!_0x122edd['empty'])_0x3e8186['push']({'ref':_0x122edd['docs'][0x0]['ref'],'source':'D2'});if(_0x3e8186['length']===0x0){const [_0x34ff4c,_0x500bba]=await Promise[_0x544e3f(0x2e0)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x439187))),getDocs(query(collection(db,_0x544e3f(0x29d)),where('username','==',_0x439187)))]);if(!_0x34ff4c['empty'])_0x3e8186[_0x544e3f(0x1da)]({'ref':_0x34ff4c[_0x544e3f(0x301)][0x0]['ref'],'source':'NonParticipant'});if(!_0x500bba['empty'])_0x3e8186['push']({'ref':_0x500bba['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x3e8186[_0x544e3f(0x267)]===0x0)throw new Error('User\x20\x22'+_0x439187+_0x544e3f(0x18a));const _0x11402e=writeBatch(db);_0x3e8186[_0x544e3f(0x2ba)](_0x2609e1=>{const _0x5bcc2e=_0x544e3f;console[_0x5bcc2e(0x233)]('Updating\x20role\x20for\x20'+_0x439187+'\x20in\x20'+_0x2609e1[_0x5bcc2e(0x183)]),!_0x2de513?_0x11402e['update'](_0x2609e1['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x11402e[_0x5bcc2e(0x16f)](_0x2609e1['ref'],{'roleName':_0x2de513,'roleColor':_0x406165,'roleAssignedBy':_0x24a1f6['email'],'roleAssignedAt':serverTimestamp()});}),await _0x11402e[_0x544e3f(0x31c)]();const _0x554813=_0x2de513?'Role\x20\x22'+_0x2de513+'\x22\x20set':'Role\x20removed';return showNotification(_0x554813+'\x20for\x20user\x20\x22'+_0x439187+'\x22','success'),!![];}catch(_0x16df91){console['error']('Error\x20setting\x20user\x20role:',_0x16df91),showNotification(_0x544e3f(0x2ac)+_0x16df91[_0x544e3f(0x177)],'error');throw _0x16df91;}}function showNotification(_0x509a2c,_0x3aeaf3='info'){const _0x2cc166=a2_0xf5ca78,_0x42e704=document['createElement']('div');_0x42e704[_0x2cc166(0x271)]='notification\x20'+_0x3aeaf3,_0x42e704['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x3aeaf3)+_0x2cc166(0x17f)+_0x509a2c+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x42e704),setTimeout(()=>{_0x42e704['classList']['add']('active');},0xa);const _0x10296e=setTimeout(()=>{closeNotification(_0x42e704);},0x1388);_0x42e704[_0x2cc166(0x30b)](_0x2cc166(0x277))['addEventListener'](_0x2cc166(0x2d3),()=>{clearTimeout(_0x10296e),closeNotification(_0x42e704);});}function getNotificationIcon(_0x6eff89){const _0x24a6db=a2_0xf5ca78;switch(_0x6eff89){case'success':return _0x24a6db(0x25a);case _0x24a6db(0x2cd):return _0x24a6db(0x1cd);case'warning':return _0x24a6db(0x2b0);case'info':default:return'fa-info-circle';}}function closeNotification(_0x447faa){const _0x1f9565=a2_0xf5ca78;_0x447faa[_0x1f9565(0x377)][_0x1f9565(0x1a9)]('active'),setTimeout(()=>{const _0x2a1870=_0x1f9565;_0x447faa[_0x2a1870(0x1a9)]();},0x12c);}function setupUserRolesSection(){const _0x294eb3=document['getElementById']('load-users-data');_0x294eb3&&_0x294eb3['addEventListener']('click',function(){const _0x624201=a2_0x5154;this['classList']['add'](_0x624201(0x392)),this[_0x624201(0x17c)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x312db9=_0x624201;this['classList']['remove'](_0x312db9(0x392)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x624201(0x22c)](_0x43ad61=>{const _0x5ea1ff=_0x624201;console['error']('Error\x20loading\x20users:',_0x43ad61),this['classList']['remove'](_0x5ea1ff(0x392)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x151e0b=_0x5ea1ff;this['innerHTML']=_0x151e0b(0x221);},0xbb8);});});const _0x59616e=document['getElementById']('add-new-role-btn');_0x59616e&&_0x59616e['addEventListener']('click',()=>{const _0x4ceb51=a2_0x5154,_0x28b29c=document[_0x4ceb51(0x211)](_0x4ceb51(0x2f6));_0x28b29c&&_0x28b29c[_0x4ceb51(0x377)][_0x4ceb51(0x1f1)](_0x4ceb51(0x36c));});const _0x467d70=document['getElementById']('user-search');_0x467d70&&_0x467d70['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x2cf3c7=document['getElementById']('role-filter');_0x2cf3c7&&_0x2cf3c7['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x351a32=a2_0xf5ca78,_0x1718fe=document['getElementById'](_0x351a32(0x25d));if(!_0x1718fe)return;_0x1718fe['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x2aba69,_0x58fb59,_0x298ae2,_0x393b13]=await Promise[_0x351a32(0x2e0)]([getDocs(collection(db,_0x351a32(0x185))),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,_0x351a32(0x29d)))]),_0x4a057d=new Map();function _0x1ce79b(_0x507c2b,_0x4bf045){_0x507c2b['forEach'](_0x34cfb9=>{const _0x4e454c=a2_0x5154,_0x569408=_0x34cfb9['data']();if(!_0x569408['username'])return;if(!_0x4a057d['has'](_0x569408['username']))_0x4a057d['set'](_0x569408['username'],{'username':_0x569408['username'],'roleName':_0x569408['roleName']||null,'roleColor':_0x569408['roleColor']||null,'roleAssignedBy':_0x569408['roleAssignedBy']||null,'roleAssignedAt':_0x569408[_0x4e454c(0x36e)]||null,'sources':[_0x4bf045]});else{const _0x4b69f8=_0x4a057d[_0x4e454c(0x20f)](_0x569408[_0x4e454c(0x1a1)]);_0x569408['roleName']&&(!_0x4b69f8['roleName']||_0x4bf045==='D1'||_0x4bf045==='D2')&&(_0x4b69f8[_0x4e454c(0x30f)]=_0x569408[_0x4e454c(0x30f)],_0x4b69f8['roleColor']=_0x569408['roleColor'],_0x4b69f8[_0x4e454c(0x256)]=_0x569408[_0x4e454c(0x256)],_0x4b69f8[_0x4e454c(0x36e)]=_0x569408[_0x4e454c(0x36e)]),!_0x4b69f8['sources']['includes'](_0x4bf045)&&_0x4b69f8['sources'][_0x4e454c(0x1da)](_0x4bf045);}});}_0x1ce79b(_0x2aba69,'D1'),_0x1ce79b(_0x58fb59,'D2'),_0x1ce79b(_0x298ae2,_0x351a32(0x2c0)),_0x1ce79b(_0x393b13,'Profile');const _0x4a4353=Array['from'](_0x4a057d['values']())[_0x351a32(0x207)]((_0x5c279a,_0x483b25)=>_0x5c279a[_0x351a32(0x1a1)]['localeCompare'](_0x483b25['username']));if(_0x4a4353['length']===0x0){_0x1718fe[_0x351a32(0x17c)]=_0x351a32(0x1f0);return;}_0x1718fe['innerHTML']='',_0x4a4353['forEach'](_0x38b981=>{const _0x367511=_0x351a32,_0x3cedc4=document['createElement']('tr');_0x3cedc4['dataset']['username']=_0x38b981[_0x367511(0x1a1)],_0x3cedc4['dataset']['roleName']=_0x38b981[_0x367511(0x30f)]||'',_0x3cedc4['dataset']['roleColor']=_0x38b981['roleColor']||'#808080';const _0x77ad5e=_0x38b981[_0x367511(0x36e)]?new Date(_0x38b981[_0x367511(0x36e)]['seconds']*0x3e8)[_0x367511(0x2ca)]():_0x367511(0x26d),_0x298bb6=_0x38b981[_0x367511(0x30f)]?_0x367511(0x303)+_0x38b981['roleColor']+_0x367511(0x360)+getContrastColor(_0x38b981['roleColor'])+_0x367511(0x24d)+_0x38b981['roleName']+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x3cedc4['innerHTML']=_0x367511(0x2a0)+_0x38b981['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x38b981['sources'][_0x367511(0x36d)](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x298bb6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x38b981['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x77ad5e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x38b981['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x38b981[_0x367511(0x30f)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x38b981[_0x367511(0x1a1)]+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1718fe['appendChild'](_0x3cedc4);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x3de955=>{const _0x154255=_0x351a32;_0x3de955[_0x154255(0x1b4)]('click',()=>{const _0x2149df=_0x154255,_0x2a3f13=_0x3de955[_0x2149df(0x350)][_0x2149df(0x1a1)];openRoleEditModal(_0x2a3f13);});}),document['querySelectorAll']('.remove-role-btn')[_0x351a32(0x2ba)](_0x3bd5fe=>{_0x3bd5fe['addEventListener']('click',()=>{const _0x8ad47f=a2_0x5154,_0x102583=_0x3bd5fe['dataset']['username'];confirm(_0x8ad47f(0x184)+_0x102583+'?')&&setUserRole(_0x102583,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x334ef6=>console[_0x8ad47f(0x2cd)](_0x8ad47f(0x317),_0x334ef6));});});}catch(_0x12f0e5){console[_0x351a32(0x2cd)](_0x351a32(0x37f),_0x12f0e5),_0x1718fe[_0x351a32(0x17c)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x3c336d){const _0x73eb9b=a2_0xf5ca78;console[_0x73eb9b(0x233)](_0x73eb9b(0x1a2),_0x3c336d);const _0x2c45e3=document['getElementById']('set-role-modal'),_0xc7d012=document['getElementById']('role-username'),_0x143cbc=document['getElementById']('user-role');if(!_0x2c45e3){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert(_0x73eb9b(0x236));return;}console['log'](_0x73eb9b(0x17e),_0x2c45e3);_0xc7d012?(_0xc7d012['value']=_0x3c336d,console['log']('Username\x20input\x20set\x20to:\x20'+_0x3c336d)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x1b6f3b=document[_0x73eb9b(0x30b)]('#users-table-body\x20tr[data-username=\x22'+_0x3c336d+'\x22]');if(_0x1b6f3b&&_0x143cbc){const _0xdecc4f=_0x1b6f3b[_0x73eb9b(0x350)]['role'];_0x143cbc['value']=_0xdecc4f===_0x73eb9b(0x28d)?'':_0xdecc4f,console['log'](_0x73eb9b(0x2cb)+_0x143cbc['value']+'\x20(based\x20on\x20data-role:\x20'+_0xdecc4f+')');}else{if(!_0x1b6f3b)console['warn']('Table\x20row\x20for\x20user\x20'+_0x3c336d+'\x20not\x20found.');if(!_0x143cbc)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x143cbc)_0x143cbc['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x2c45e3['classList']['add']('active');const _0x4fec20=document[_0x73eb9b(0x211)]('cancel-role-btn');_0x4fec20?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x4fec20['removeEventListener'](_0x73eb9b(0x2d3),closeModalHandler),_0x4fec20['addEventListener'](_0x73eb9b(0x2d3),closeModalHandler)):console[_0x73eb9b(0x2a3)](_0x73eb9b(0x24f)),console[_0x73eb9b(0x233)]('Attaching\x20background\x20click\x20listener.'),_0x2c45e3['removeEventListener']('click',closeModalBackgroundHandler),_0x2c45e3['addEventListener'](_0x73eb9b(0x2d3),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x3f4167){_0x3f4167['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x4d25f9=a2_0xf5ca78,_0x38ea10=document['getElementById']('set-role-modal');_0x38ea10&&(_0x38ea10['classList']['remove']('active'),_0x38ea10[_0x4d25f9(0x255)]('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0xf64ef5=a2_0xf5ca78,_0x4a6f86=document['getElementById']('user-search')?.['value'][_0xf64ef5(0x20d)]()||'',_0x2b75e4=document[_0xf64ef5(0x211)]('role-filter')?.['value']||_0xf64ef5(0x2e0),_0x408f12=document[_0xf64ef5(0x19c)]('#users-table-body\x20tr');let _0x3f6b8b=0x0;_0x408f12[_0xf64ef5(0x2ba)](_0x1f12c5=>{const _0x5a47a3=_0xf64ef5;if(_0x1f12c5['querySelector'](_0x5a47a3(0x344))||_0x1f12c5[_0x5a47a3(0x30b)]('.empty-state')||_0x1f12c5[_0x5a47a3(0x30b)]('.error-state'))return;const _0x5b4ca5=_0x1f12c5[_0x5a47a3(0x350)]['username']?.['toLowerCase']()||'',_0xe67cd9=_0x1f12c5['dataset']['role']||'none',_0x174349=_0x5b4ca5[_0x5a47a3(0x2fb)](_0x4a6f86),_0x17c5ed=_0x2b75e4==='all'||_0xe67cd9===_0x2b75e4;_0x174349&&_0x17c5ed?(_0x1f12c5['style']['display']='',_0x3f6b8b++):_0x1f12c5['style']['display']='none';});if(_0x3f6b8b===0x0&&_0x408f12[_0xf64ef5(0x267)]>0x0){const _0x302ee3=document[_0xf64ef5(0x211)]('users-table-body');if(_0x302ee3){if(!_0x302ee3['querySelector'](_0xf64ef5(0x38b))){const _0x2c3cdf=document[_0xf64ef5(0x1fa)]('tr');_0x2c3cdf[_0xf64ef5(0x377)]['add'](_0xf64ef5(0x1ce)),_0x2c3cdf['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x302ee3['appendChild'](_0x2c3cdf);}}}else{const _0x1f1f7a=document['querySelector'](_0xf64ef5(0x38b));_0x1f1f7a&&_0x1f1f7a[_0xf64ef5(0x1a9)]();}}function setupManageArticlesSection(){const _0x67fffa=a2_0xf5ca78,_0x26a2d3=document['getElementById'](_0x67fffa(0x379));_0x26a2d3&&_0x26a2d3['addEventListener'](_0x67fffa(0x2d3),function(){const _0x4be39f=_0x67fffa;this['classList'][_0x4be39f(0x1f1)](_0x4be39f(0x392)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x4be39f(0x352)](()=>{const _0x1c60d2=_0x4be39f;this['classList']['remove'](_0x1c60d2(0x392)),this['innerHTML']=_0x1c60d2(0x218);})['catch'](_0x33315b=>{const _0x2208ef=_0x4be39f;console['error'](_0x2208ef(0x162),_0x33315b),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x117b47=document[_0x67fffa(0x211)](_0x67fffa(0x182));_0x117b47?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x117b47['style'][_0x67fffa(0x2e4)]=_0x67fffa(0x27d),_0x117b47['addEventListener']('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x2be7db=document['getElementById'](_0x67fffa(0x36a));_0x2be7db&&_0x2be7db[_0x67fffa(0x1b4)]('submit',_0x2c190e=>{const _0x5690a6=_0x67fffa;_0x2c190e[_0x5690a6(0x390)](),saveArticle();});const _0x4389eb=document['getElementById']('cancel-article-btn');_0x4389eb&&_0x4389eb[_0x67fffa(0x1b4)]('click',()=>{closeArticleModal();});const _0x2182e0=document[_0x67fffa(0x30b)](_0x67fffa(0x3a7));_0x2182e0&&_0x2182e0['addEventListener']('click',()=>{closeArticleModal();});const _0x305b06=document['getElementById']('article-modal');_0x305b06&&_0x305b06['addEventListener']('click',_0x58c38e=>{_0x58c38e['target']===_0x305b06&&closeArticleModal();});}async function loadArticles(){const _0x364659=a2_0xf5ca78,_0x1f385d=document['getElementById'](_0x364659(0x2ed));if(!_0x1f385d)return;_0x1f385d['innerHTML']=_0x364659(0x2fa);try{const _0x516d33=collection(db,_0x364659(0x2ef)),_0x4dca44=query(_0x516d33,orderBy(_0x364659(0x2c8),'desc')),_0x405b5d=await getDocs(_0x4dca44);if(_0x405b5d[_0x364659(0x370)]){_0x1f385d['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x1f385d[_0x364659(0x17c)]='',_0x405b5d[_0x364659(0x2ba)](_0x3819a8=>{const _0x1be4f3=_0x364659,_0x1abf2b=_0x3819a8['data'](),_0x3007d8=document[_0x1be4f3(0x1fa)]('tr'),_0x5cfd1a=_0x1abf2b['createdAt']?new Date(_0x1abf2b['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x3007d8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1abf2b['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1abf2b[_0x1be4f3(0x2c5)]||'Unknown')+_0x1be4f3(0x188)+_0x5cfd1a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x3819a8['id']+_0x1be4f3(0x280)+_0x3819a8['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1f385d['appendChild'](_0x3007d8);}),setupArticleActionButtons();}catch(_0x4f9a58){console['error']('Error\x20loading\x20articles:',_0x4f9a58),_0x1f385d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x4f9a58[_0x364659(0x177)]+_0x364659(0x20e);}}function setupArticleActionButtons(){const _0x526f59=a2_0xf5ca78;document[_0x526f59(0x19c)]('.edit-article-btn')[_0x526f59(0x2ba)](_0x1c24a5=>{const _0x581b4d=_0x526f59;_0x1c24a5['addEventListener'](_0x581b4d(0x2d3),async _0x12b719=>{const _0x12f5b5=_0x581b4d,_0x2452db=_0x12b719['currentTarget'][_0x12f5b5(0x350)]['id'];openArticleModal(_0x2452db);});}),document[_0x526f59(0x19c)]('.delete-article-btn')['forEach'](_0x4b0a20=>{const _0x2f8629=_0x526f59;_0x4b0a20['addEventListener'](_0x2f8629(0x2d3),async _0x54ebcc=>{const _0x1cfb61=_0x2f8629,_0x4e6a06=_0x54ebcc[_0x1cfb61(0x19f)]['dataset']['id'];confirmDeleteArticle(_0x4e6a06);});});}function openArticleModal(_0x4b7862=null){const _0x5bbdb2=a2_0xf5ca78,_0x633c05=document[_0x5bbdb2(0x211)]('article-modal'),_0x4541c2=document[_0x5bbdb2(0x211)](_0x5bbdb2(0x27a)),_0x3a28bc=document[_0x5bbdb2(0x211)]('article-form'),_0x45f54c=document['getElementById']('article-id');_0x3a28bc['reset'](),_0x45f54c['value']='';if(_0x4b7862)_0x4541c2['textContent']='Edit\x20Article',_0x45f54c['value']=_0x4b7862,loadArticleData(_0x4b7862);else{_0x4541c2['textContent']='Create\x20Article';const _0xdf3475=auth[_0x5bbdb2(0x25c)];if(_0xdf3475){const _0x44532f=document['getElementById']('article-author');if(_0x44532f&&_0xdf3475['displayName'])_0x44532f['value']=_0xdf3475[_0x5bbdb2(0x219)];else _0x44532f&&(_0x44532f['value']=_0xdf3475[_0x5bbdb2(0x1ff)]);}}_0x633c05['classList']['add']('active');}async function loadArticleData(_0x4a3a54){const _0xa0f63a=a2_0xf5ca78;try{const _0x4fdcdf=doc(db,'articles',_0x4a3a54),_0x56e515=await getDoc(_0x4fdcdf);if(!_0x56e515['exists']()){showNotification('Article\x20not\x20found',_0xa0f63a(0x2cd));return;}const _0x3d1d02=_0x56e515[_0xa0f63a(0x349)]();document['getElementById'](_0xa0f63a(0x358))['value']=_0x3d1d02['title']||'',document['getElementById']('article-author')[_0xa0f63a(0x18b)]=_0x3d1d02['author']||'',document['getElementById']('article-image-url')['value']=_0x3d1d02[_0xa0f63a(0x39d)]||'',document['getElementById']('article-content')['value']=_0x3d1d02['content']||'';}catch(_0x1f2cf7){console[_0xa0f63a(0x2cd)]('Error\x20loading\x20article\x20data:',_0x1f2cf7),showNotification('Failed\x20to\x20load\x20article\x20data',_0xa0f63a(0x2cd));}}async function saveArticle(){const _0x17fb67=a2_0xf5ca78;try{const _0x151d90=document[_0x17fb67(0x211)]('article-id')[_0x17fb67(0x18b)],_0x500462=document['getElementById']('article-title')['value']['trim'](),_0x46d3ca=document[_0x17fb67(0x211)]('article-author')['value'][_0x17fb67(0x2ae)](),_0x5c52fe=document[_0x17fb67(0x211)]('article-image-url')[_0x17fb67(0x18b)]['trim'](),_0x3e17a9=document['getElementById']('article-content')['value']['trim']();if(!_0x500462||!_0x3e17a9){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x51cc02=auth[_0x17fb67(0x25c)];if(!_0x51cc02){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x3edb70={'title':_0x500462,'author':_0x46d3ca,'imageUrl':_0x5c52fe||null,'content':_0x3e17a9,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x51cc02['email']};!_0x151d90?(_0x3edb70['createdAt']=serverTimestamp(),_0x3edb70[_0x17fb67(0x331)]=_0x51cc02[_0x17fb67(0x1ff)],await addDoc(collection(db,_0x17fb67(0x2ef)),_0x3edb70),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x151d90),_0x3edb70),showNotification(_0x17fb67(0x335),'success')),closeArticleModal(),loadArticles();}catch(_0x3425d2){console['error'](_0x17fb67(0x198),_0x3425d2),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x3425d2['message'],'error');}}function closeArticleModal(){const _0x2a1a75=a2_0xf5ca78,_0x51197c=document[_0x2a1a75(0x211)]('article-modal');_0x51197c&&_0x51197c['classList']['remove'](_0x2a1a75(0x36c));}async function confirmDeleteArticle(_0x393b41){const _0x5870be=a2_0xf5ca78;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x393b41)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x5870be(0x299));}catch(_0x536404){console['error'](_0x5870be(0x286),_0x536404),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x536404['message'],'error');}}function setupTrophyManagementSection(){const _0x2f4c0f=a2_0xf5ca78,_0x29742e=document['getElementById']('load-trophies-data');_0x29742e&&_0x29742e['addEventListener']('click',function(){const _0x441671=a2_0x5154;this[_0x441671(0x377)][_0x441671(0x1f1)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x1b0032=document[_0x441671(0x211)]('assign-trophy-image');_0x1b0032&&(_0x1b0032[_0x441671(0x2fd)]=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()[_0x441671(0x352)](()=>{const _0x3ae480=_0x441671;this['classList'][_0x3ae480(0x1a9)]('loading'),this[_0x3ae480(0x17c)]=_0x3ae480(0x1d9);})['catch'](_0x2f7b32=>{const _0x4efeab=_0x441671;console['error']('Error\x20loading\x20trophies:',_0x2f7b32),this['classList']['remove']('loading'),this['innerHTML']=_0x4efeab(0x324),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x372b76=document['getElementById'](_0x2f4c0f(0x38a));_0x372b76&&_0x372b76[_0x2f4c0f(0x1b4)](_0x2f4c0f(0x2d3),()=>{openTrophyModal();});const _0x56d082=document[_0x2f4c0f(0x211)](_0x2f4c0f(0x32d));_0x56d082&&_0x56d082['addEventListener']('submit',_0x1e838c=>{const _0x3849c0=_0x2f4c0f;_0x1e838c[_0x3849c0(0x390)](),saveTrophyDefinition();});const _0xa51daa=document['getElementById']('cancel-trophy-btn');_0xa51daa&&_0xa51daa['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')[_0x2f4c0f(0x2ba)](_0x476e59=>{const _0x4e6965=_0x2f4c0f;_0x476e59['addEventListener'](_0x4e6965(0x2d3),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x11de4c=document['getElementById']('trophy-modal');_0x11de4c&&_0x11de4c['addEventListener']('click',_0x2c75ae=>{_0x2c75ae['target']===_0x11de4c&&closeTrophyModal();});const _0x3db08c=document[_0x2f4c0f(0x211)]('assign-trophy-modal');_0x3db08c&&_0x3db08c[_0x2f4c0f(0x1b4)](_0x2f4c0f(0x2d3),_0x27da42=>{const _0x489c07=_0x2f4c0f;_0x27da42[_0x489c07(0x343)]===_0x3db08c&&closeAssignTrophyModal();});const _0x1c22c5=document['getElementById']('assign-trophy-form');_0x1c22c5&&_0x1c22c5[_0x2f4c0f(0x1b4)]('submit',_0xd27c63=>{_0xd27c63['preventDefault'](),assignTrophyToPlayer();});const _0x4ee09b=document['getElementById']('cancel-assign-btn');_0x4ee09b&&_0x4ee09b['addEventListener'](_0x2f4c0f(0x2d3),()=>{closeAssignTrophyModal();});const _0x367757=document['getElementById']('trophy-image-url');_0x367757&&(_0x367757['addEventListener']('input',updateTrophyImagePreview),_0x367757[_0x2f4c0f(0x1b4)](_0x2f4c0f(0x339),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x21e81e=a2_0xf5ca78,_0x2f7f81=document['getElementById'](_0x21e81e(0x399))['value']['trim'](),_0x5ad826=document['getElementById']('trophy-image-preview');if(!_0x5ad826){const _0x5be787=document[_0x21e81e(0x211)](_0x21e81e(0x399))['closest'](_0x21e81e(0x1c1)),_0x4d87ba=document['createElement']('div');_0x4d87ba['id']='trophy-image-preview',_0x4d87ba['className']='trophy-preview-container',_0x5be787['appendChild'](_0x4d87ba);const _0x14ecfa=document[_0x21e81e(0x1fa)](_0x21e81e(0x2a5));_0x14ecfa['id']=_0x21e81e(0x18c),_0x14ecfa[_0x21e81e(0x208)]='Trophy\x20Preview',_0x14ecfa['onerror']=function(){const _0x489d15=_0x21e81e;this[_0x489d15(0x168)]=DEFAULT_TROPHY_IMAGE,this['classList']['add'](_0x489d15(0x2cd));},_0x4d87ba[_0x21e81e(0x383)](_0x14ecfa);}const _0x2f49dd=document['getElementById']('trophy-preview-img');_0x2f7f81?(_0x2f49dd['src']=_0x2f7f81,_0x2f49dd['style']['display']='block',_0x2f49dd['classList']['remove']('error')):(_0x2f49dd['src']=DEFAULT_TROPHY_IMAGE,_0x2f49dd['style'][_0x21e81e(0x2e4)]=_0x21e81e(0x27d));}async function loadTrophyDefinitions(){const _0x42a633=a2_0xf5ca78,_0x461bc0=document['getElementById']('trophies-table-body');if(!_0x461bc0)return;_0x461bc0[_0x42a633(0x17c)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x20a680=collection(db,_0x42a633(0x227)),_0x5e5d75=query(_0x20a680,orderBy('createdAt','desc')),_0x35da4c=await getDocs(_0x5e5d75);if(_0x35da4c['empty']){_0x461bc0['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x461bc0['innerHTML']='',_0x35da4c['forEach'](_0x3264b5=>{const _0x2ccf0c=_0x42a633,_0x456633=_0x3264b5['data'](),_0x30f2b2=document['createElement']('tr'),_0x5aaf18=_0x456633['createdAt']?new Date(_0x456633[_0x2ccf0c(0x2c8)]['seconds']*0x3e8)[_0x2ccf0c(0x376)]():'N/A';_0x30f2b2[_0x2ccf0c(0x17c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x456633['image']||DEFAULT_TROPHY_IMAGE)+_0x2ccf0c(0x31b)+_0x456633['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x456633[_0x2ccf0c(0x302)]||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x456633['rarity']||'common')+'\x22>'+(_0x456633['rarity']||_0x2ccf0c(0x19d))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5aaf18+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x3264b5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x3264b5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x3264b5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x461bc0[_0x2ccf0c(0x383)](_0x30f2b2);}),setupTrophyActionButtons();}catch(_0x4fcd23){console[_0x42a633(0x2cd)](_0x42a633(0x32b),_0x4fcd23),_0x461bc0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x4fcd23[_0x42a633(0x177)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x304e65=>{_0x304e65['addEventListener']('click',_0x4b2055=>{const _0x4af54f=_0x4b2055['currentTarget']['dataset']['id'];openTrophyModal(_0x4af54f);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x1c1e8d=>{const _0x414d3e=a2_0x5154;_0x1c1e8d[_0x414d3e(0x1b4)](_0x414d3e(0x2d3),_0x5c385b=>{const _0x221a3e=_0x5c385b['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x221a3e);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x23b1ad=>{_0x23b1ad['addEventListener']('click',_0x3c5aa0=>{const _0x575371=a2_0x5154,_0x528137=_0x3c5aa0[_0x575371(0x19f)]['dataset']['id'];confirmDeleteTrophy(_0x528137);});});}function openTrophyModal(_0x5cd984=null){const _0x138124=a2_0xf5ca78,_0x36ac8e=document[_0x138124(0x211)]('trophy-modal'),_0x22a9f3=document[_0x138124(0x211)](_0x138124(0x1c0)),_0x21bd24=document['getElementById']('trophy-form'),_0x5365cd=document[_0x138124(0x211)](_0x138124(0x307));_0x21bd24['reset'](),_0x5365cd[_0x138124(0x18b)]='';const _0x1175a3=document['getElementById']('trophy-preview-img');_0x1175a3&&(_0x1175a3['src']=DEFAULT_TROPHY_IMAGE,_0x1175a3['classList'][_0x138124(0x1a9)]('error')),_0x5cd984?(_0x22a9f3['textContent']='Edit\x20Trophy',_0x5365cd[_0x138124(0x18b)]=_0x5cd984,loadTrophyData(_0x5cd984)):_0x22a9f3['textContent']='Create\x20New\x20Trophy',_0x36ac8e['classList'][_0x138124(0x1f1)](_0x138124(0x36c));}async function loadTrophyData(_0x22647e){const _0x4f25ac=a2_0xf5ca78;try{const _0x45fab3=doc(db,'trophyDefinitions',_0x22647e),_0x41c781=await getDoc(_0x45fab3);if(!_0x41c781[_0x4f25ac(0x338)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x527fdc=_0x41c781['data']();document['getElementById'](_0x4f25ac(0x272))['value']=_0x527fdc['name']||'',document['getElementById']('trophy-description')['value']=_0x527fdc['description']||'',document['getElementById']('trophy-image-url')[_0x4f25ac(0x18b)]=_0x527fdc['image']||'',document[_0x4f25ac(0x211)]('trophy-rarity')['value']=_0x527fdc['rarity']||'common',updateTrophyImagePreview();}catch(_0x12fd6b){console['error']('Error\x20loading\x20trophy\x20data:',_0x12fd6b),showNotification(_0x4f25ac(0x246),_0x4f25ac(0x2cd));}}async function saveTrophyDefinition(){const _0x30c79e=a2_0xf5ca78;try{const _0x22a21d=document['getElementById']('trophy-id')[_0x30c79e(0x18b)],_0x5562e1=document['getElementById']('trophy-name')['value'][_0x30c79e(0x2ae)](),_0x367559=document['getElementById']('trophy-description')['value'][_0x30c79e(0x2ae)](),_0x4b4620=document['getElementById']('trophy-image-url')['value']['trim'](),_0x3a9c54=document['getElementById']('trophy-rarity')['value'];if(!_0x5562e1||!_0x367559||!_0x4b4620){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x5a4d1d=auth[_0x30c79e(0x25c)];if(!_0x5a4d1d){showNotification(_0x30c79e(0x1b9),_0x30c79e(0x2cd));return;}const _0x12315f={'name':_0x5562e1,'description':_0x367559,'image':_0x4b4620,'rarity':_0x3a9c54,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5a4d1d[_0x30c79e(0x1ff)]};!_0x22a21d?(_0x12315f['createdAt']=serverTimestamp(),_0x12315f[_0x30c79e(0x331)]=_0x5a4d1d['email'],await addDoc(collection(db,'trophyDefinitions'),_0x12315f),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x22a21d),_0x12315f),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x996760){console['error'](_0x30c79e(0x2e2),_0x996760),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x996760['message'],_0x30c79e(0x2cd));}}function closeTrophyModal(){const _0x5db5f8=a2_0xf5ca78,_0xc2d22e=document['getElementById'](_0x5db5f8(0x196));_0xc2d22e&&_0xc2d22e['classList'][_0x5db5f8(0x1a9)](_0x5db5f8(0x36c));}async function confirmDeleteTrophy(_0x51b0c4){const _0x1a2331=a2_0xf5ca78;if(!_0x51b0c4){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm(_0x1a2331(0x1d6)))try{const _0x26f0bb=auth[_0x1a2331(0x25c)];if(!_0x26f0bb){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log'](_0x1a2331(0x163)+_0x51b0c4),await deleteDoc(doc(db,'trophyDefinitions',_0x51b0c4)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x258cb2){console[_0x1a2331(0x2cd)]('Error\x20deleting\x20trophy\x20definition:',_0x258cb2),showNotification(_0x1a2331(0x212)+_0x258cb2[_0x1a2331(0x177)],'error');}}async function openAssignTrophyModal(_0x341514){const _0x729968=a2_0xf5ca78;try{const _0x56567e=doc(db,_0x729968(0x227),_0x341514),_0x4bc374=await getDoc(_0x56567e);if(!_0x4bc374['exists']()){showNotification(_0x729968(0x38d),'error');return;}const _0xe64d44=_0x4bc374['data']();document[_0x729968(0x211)]('assign-trophy-id')[_0x729968(0x18b)]=_0x341514,document['getElementById'](_0x729968(0x1ec))[_0x729968(0x18b)]=_0xe64d44['name'],document[_0x729968(0x211)]('assign-trophy-image')['src']=_0xe64d44['image']||DEFAULT_TROPHY_IMAGE,document[_0x729968(0x211)]('assign-trophy-title')['textContent']=_0xe64d44[_0x729968(0x302)]||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0xe64d44['description']||'No\x20description';const _0x2910c8=document['getElementById'](_0x729968(0x22b));_0x2910c8['textContent']=_0xe64d44['rarity']||'common',_0x2910c8['className']='trophy-rarity\x20'+(_0xe64d44[_0x729968(0x2df)]||'common');const _0x498ec0=document['getElementById'](_0x729968(0x355));_0x498ec0['classList']['add']('active');}catch(_0x1bdeec){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x1bdeec),showNotification(_0x729968(0x246),'error');}}function closeAssignTrophyModal(){const _0x19b81e=a2_0xf5ca78,_0x5effc1=document['getElementById']('assign-trophy-modal');_0x5effc1&&_0x5effc1['classList']['remove'](_0x19b81e(0x36c));}async function assignTrophyToPlayer(){const _0x2dffae=a2_0xf5ca78;try{const _0x355640=document['getElementById']('assign-trophy-id')['value'],_0x32f165=document['getElementById']('assign-trophy-name')['value'],_0xc21ff4=document[_0x2dffae(0x211)]('assign-player-username')['value']['trim'](),_0x4e8e50=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x355640||!_0xc21ff4){showNotification(_0x2dffae(0x2ab),'error');return;}const _0x451151=auth['currentUser'];if(!_0x451151){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x290aba=null,_0x326183=null,_0x3541ca=null;if(_0x4e8e50==='non-participant'){const _0x42ef9c=collection(db,_0x2dffae(0x202)),_0x3456ca=query(_0x42ef9c,where('username','==',_0xc21ff4)),_0x53feba=await getDocs(_0x3456ca);!_0x53feba['empty']&&(_0x290aba=_0x53feba['docs'][0x0],_0x326183=_0x290aba['id'],_0x3541ca=_0x290aba['data']());}else{const _0x20bae2=_0x4e8e50==='D1'?_0x2dffae(0x185):_0x4e8e50==='D2'?'playersD2':_0x2dffae(0x367),_0x2349a9=collection(db,_0x20bae2),_0x12de07=query(_0x2349a9,where(_0x2dffae(0x1a1),'==',_0xc21ff4)),_0x45a272=await getDocs(_0x12de07);!_0x45a272['empty']&&(_0x290aba=_0x45a272['docs'][0x0],_0x326183=_0x290aba['id'],_0x3541ca=_0x290aba[_0x2dffae(0x349)]());}if(!_0x290aba){showNotification(_0x2dffae(0x28a)+_0xc21ff4+_0x2dffae(0x17a)+(_0x4e8e50===_0x2dffae(0x1f5)?'non-participants':_0x4e8e50+'\x20ladder'),'error');return;}const _0x237552=collection(db,'userTrophies'),_0x3ba6f6=query(_0x237552,where('userId','==',_0x326183),where('trophyId','==',_0x355640)),_0x3924f5=await getDocs(_0x3ba6f6);if(!_0x3924f5['empty']){showNotification('Player\x20\x22'+_0xc21ff4+_0x2dffae(0x1d8),_0x2dffae(0x2f2));return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x326183,'playerUsername':_0xc21ff4,'trophyId':_0x355640,'awardedAt':serverTimestamp(),'awardedBy':_0x451151['email'],'ladder':_0x4e8e50}),showNotification('Trophy\x20\x22'+_0x32f165+_0x2dffae(0x3a3)+_0xc21ff4,'success'),closeAssignTrophyModal();}catch(_0x20c9f3){console['error']('Error\x20assigning\x20trophy:',_0x20c9f3),showNotification(_0x2dffae(0x21b)+_0x20c9f3['message'],'error');}}function setupInactivePlayersSection(){const _0x475ada=a2_0xf5ca78,_0x5ebafc=document['getElementById']('inactive-days-filter');_0x5ebafc&&_0x5ebafc[_0x475ada(0x1b4)]('change',function(){const _0x52e3fb=_0x475ada,_0x74ef37=document[_0x52e3fb(0x211)]('load-inactive-players-data');if(_0x74ef37)_0x74ef37[_0x52e3fb(0x2d3)]();});const _0x16d75a=document[_0x475ada(0x30b)]('.ladder-switch\x20input[value=\x22D1\x22]'),_0x4209a8=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x16d75a&&_0x4209a8&&(_0x16d75a['addEventListener']('change',function(){const _0x46250a=_0x475ada;if(this[_0x46250a(0x15a)]){currentLadder='D1';if(document[_0x46250a(0x211)]('inactive-players')['style'][_0x46250a(0x2e4)]!=='none'){const _0x3ef7ba=document['getElementById']('load-inactive-players-data');if(_0x3ef7ba)_0x3ef7ba['click']();}}}),_0x4209a8['addEventListener']('change',function(){const _0x2d7e6a=_0x475ada;if(this[_0x2d7e6a(0x15a)]){currentLadder='D2';if(document['getElementById'](_0x2d7e6a(0x2d6))['style']['display']!==_0x2d7e6a(0x28d)){const _0x471ec8=document['getElementById']('load-inactive-players-data');if(_0x471ec8)_0x471ec8['click']();}}}));const _0x489a9d=document['getElementById'](_0x475ada(0x274));_0x489a9d&&_0x489a9d['addEventListener'](_0x475ada(0x27b),debounce(function(){const _0x32712c=_0x475ada,_0x1516a8=_0x489a9d[_0x32712c(0x18b)]['toLowerCase'](),_0x2e24bd=document[_0x32712c(0x19c)]('#inactive-players-table-body\x20tr');_0x2e24bd['forEach'](_0x3d5a0d=>{const _0x5798d7=_0x32712c;if(_0x3d5a0d['querySelector']('.loading-cell')||_0x3d5a0d['querySelector'](_0x5798d7(0x276))||_0x3d5a0d['querySelector']('.error-state'))return;const _0x58e9a1=_0x3d5a0d['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x4f1d47=_0x3d5a0d['cells'][0x5]?.[_0x5798d7(0x37c)]['toLowerCase']()||'';_0x58e9a1['includes'](_0x1516a8)||_0x4f1d47['includes'](_0x1516a8)?_0x3d5a0d['style'][_0x5798d7(0x2e4)]='':_0x3d5a0d[_0x5798d7(0x23f)]['display']='none';});},0x12c)),document['addEventListener'](_0x475ada(0x2d3),function(_0x3ad830){const _0xb3d886=_0x475ada;if(_0x3ad830['target']['closest']('.view-player-btn')){const _0x331084=_0x3ad830['target']['closest']('.view-player-btn'),_0x4fe3b1=_0x331084['dataset']['username'];_0x4fe3b1&&alert(_0xb3d886(0x264)+_0x4fe3b1+'\x20-\x20Feature\x20coming\x20soon');}}),console[_0x475ada(0x233)]('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x39678b=a2_0xf5ca78,_0x5cc362=document['getElementById']('inactive-players-table-body');if(!_0x5cc362)return;_0x5cc362['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x246ee6=document[_0x39678b(0x211)]('inactive-days-filter'),_0x9ee57a=_0x246ee6?parseInt(_0x246ee6[_0x39678b(0x18b)])||0x0:0x0,_0x304a81=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x31a26f=await getDocs(_0x304a81);if(_0x31a26f['empty']){_0x5cc362[_0x39678b(0x17c)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x8ee9b1=[];_0x31a26f[_0x39678b(0x2ba)](_0x3f1380=>{const _0x5c8d91=_0x39678b,_0x11badd=_0x3f1380[_0x5c8d91(0x349)]();_0x8ee9b1['push']({..._0x11badd,'id':_0x3f1380['id'],'username':_0x11badd['username']||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x8ee9b1[_0x39678b(0x267)]+_0x39678b(0x372)+currentLadder+'\x20ladder');const _0x2c23f7=currentLadder==='D1'?'approvedMatches':_0x39678b(0x1e1),_0x45548c=_0x8ee9b1['map'](async _0x11283b=>{const _0x6c726d=_0x39678b;try{const _0x2b7d28=collection(db,_0x2c23f7),_0x3b6914=query(_0x2b7d28,or(where(_0x6c726d(0x330),'==',_0x11283b['username']),where(_0x6c726d(0x172),'==',_0x11283b['username'])),orderBy('approvedAt',_0x6c726d(0x2d8)),limit(0x1)),_0xb49a22=await getDocs(_0x3b6914);if(!_0xb49a22[_0x6c726d(0x370)]){const _0x38e65a=_0xb49a22[_0x6c726d(0x301)][0x0][_0x6c726d(0x349)](),_0xa40923=_0x38e65a['approvedAt']?new Date(_0x38e65a[_0x6c726d(0x1ef)][_0x6c726d(0x245)]*0x3e8):null,_0x5005f9=new Date(),_0x260bb5=_0xa40923?Math['floor']((_0x5005f9-_0xa40923)/(0x3e8*0x3c*0x3c*0x18)):null,_0x1f2a0b=_0x38e65a['winnerUsername']===_0x11283b[_0x6c726d(0x1a1)]?_0x38e65a[_0x6c726d(0x172)]:_0x38e65a['winnerUsername'],_0x57d11c=_0x38e65a['winnerUsername']===_0x11283b['username']?_0x6c726d(0x278):'Lost';return{..._0x11283b,'lastMatch':{'date':_0xa40923?_0xa40923['toLocaleDateString']():_0x6c726d(0x26d),'opponent':_0x1f2a0b||'Unknown','result':_0x57d11c,'timestamp':_0xa40923||new Date(0x0),'daysSinceMatch':_0x260bb5||Number['MAX_SAFE_INTEGER']}};}else return{..._0x11283b,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x3a660d){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x11283b[_0x6c726d(0x1a1)]+':',_0x3a660d),{..._0x11283b,'lastMatch':{'date':'Error','opponent':_0x6c726d(0x38f),'result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0xa4504f=await Promise['all'](_0x45548c);_0xa4504f['sort']((_0x14dbb8,_0x4f3f0f)=>_0x4f3f0f[_0x39678b(0x2de)]['daysSinceMatch']-_0x14dbb8['lastMatch']['daysSinceMatch']);_0x9ee57a>0x0&&(_0xa4504f=_0xa4504f['filter'](_0x41c861=>_0x41c861['lastMatch']['daysSinceMatch']>=_0x9ee57a));_0x5cc362['innerHTML']='';if(_0xa4504f['length']===0x0){_0x5cc362[_0x39678b(0x17c)]=_0x39678b(0x33c);return;}_0xa4504f[_0x39678b(0x2ba)](_0x3eb849=>{const _0x29740e=_0x39678b,_0x3a2bbf=document['createElement']('tr'),_0x43c1f2=_0x3eb849['lastMatch'][_0x29740e(0x3a8)]>0x1e?'highly-inactive':_0x3eb849[_0x29740e(0x2de)]['daysSinceMatch']>0xe?'moderately-inactive':'';_0x3a2bbf[_0x29740e(0x271)]=_0x43c1f2,_0x3a2bbf['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3eb849[_0x29740e(0x1a1)]+_0x29740e(0x188)+(_0x3eb849[_0x29740e(0x31f)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3eb849['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3eb849['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x3eb849['lastMatch']['daysSinceMatch'])+_0x29740e(0x188)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3eb849['lastMatch']['date']==='Never\x20played'?_0x29740e(0x328):_0x3eb849[_0x29740e(0x2de)]['result']+_0x29740e(0x205)+_0x3eb849[_0x29740e(0x2de)][_0x29740e(0x378)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x3eb849['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5cc362['appendChild'](_0x3a2bbf);}),console['log']('Displaying\x20'+_0xa4504f['length']+'\x20inactive\x20players');}catch(_0x4a615f){console['error']('Error\x20loading\x20inactive\x20players:',_0x4a615f),_0x5cc362['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x4a615f[_0x39678b(0x177)]+'</td></tr>';}}function setupHighlightButtons(){const _0x45a618=a2_0xf5ca78;console[_0x45a618(0x233)]('Setting\x20up\x20highlight\x20buttons');const _0x14eb28=document['getElementById'](_0x45a618(0x327));_0x14eb28&&_0x14eb28['addEventListener']('click',function(){const _0x7873f0=_0x45a618;console[_0x7873f0(0x233)]('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x3297a7=document[_0x45a618(0x211)]('create-creator-highlight-btn');_0x3297a7&&_0x3297a7['addEventListener'](_0x45a618(0x2d3),function(){const _0x35a55d=_0x45a618;console['log'](_0x35a55d(0x194)),openHighlightModal('creator');});const _0x513c74=document['getElementById'](_0x45a618(0x28f));_0x513c74&&_0x513c74['addEventListener'](_0x45a618(0x2d3),function(){const _0x3c0ac7=_0x45a618;console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x3c0ac7(0x1ca));});}function openHighlightModal(_0x3b0e51=a2_0xf5ca78(0x2a7)){const _0x4adaa7=a2_0xf5ca78;console[_0x4adaa7(0x233)]('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x3b0e51);const _0x2ecf50=document['getElementById']('highlight-modal'),_0x9517e7=document['getElementById']('highlight-form'),_0x461497=document['getElementById']('highlight-modal-title'),_0x550d6c=document['getElementById'](_0x4adaa7(0x29c));if(!_0x2ecf50||!_0x9517e7||!_0x461497){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x9517e7['reset'](),_0x550d6c[_0x4adaa7(0x18b)]='';const _0x4a2022=['match',_0x4adaa7(0x193),_0x4adaa7(0x1ca)],_0x41e18c=!_0x4a2022[_0x4adaa7(0x2fb)](_0x3b0e51);if(_0x41e18c){const _0x59b411=_0x3b0e51;_0x550d6c[_0x4adaa7(0x18b)]=_0x59b411,_0x461497['textContent']='Loading...',loadHighlightDataAdmin(_0x59b411);}else{const _0x378d4c=_0x3b0e51;document[_0x4adaa7(0x211)]('highlight-type')['value']=_0x378d4c,_0x461497[_0x4adaa7(0x37c)]='Create\x20New\x20'+getHighlightTypeName(_0x378d4c),toggleHighlightFields(_0x378d4c);const _0x223ead=auth['currentUser'];_0x223ead&&document[_0x4adaa7(0x211)]('highlight-submitted-by')&&(document[_0x4adaa7(0x211)]('highlight-submitted-by')[_0x4adaa7(0x18b)]=_0x223ead[_0x4adaa7(0x219)]||_0x223ead[_0x4adaa7(0x1ff)]);}_0x2ecf50['classList'][_0x4adaa7(0x1f1)]('active');}function toggleHighlightFields(_0xa84ddb){const _0x424752=a2_0xf5ca78;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0xa84ddb);const _0x53609d=document['getElementById']('highlight-form');if(!_0x53609d)return;const _0x527567=_0x53609d['querySelectorAll']('.form-group,\x20.form-row');_0x527567['forEach'](_0x4d8554=>_0x4d8554['style']['display']=_0x424752(0x28d));const _0x19578a=document[_0x424752(0x211)]('highlight-video-preview-container');if(_0x19578a)_0x19578a[_0x424752(0x23f)][_0x424752(0x2e4)]='none';const _0x589327=[_0x424752(0x24b),_0x424752(0x2f4),'highlight-submitted-by-container'];_0x589327['forEach'](_0x35c34a=>{const _0xe03c7b=_0x424752,_0x35fefe=document[_0xe03c7b(0x211)](_0x35c34a);if(_0x35fefe)_0x35fefe['style']['display']='block';});if(_0xa84ddb==='match'){const _0xec4143=['highlight-video-container',_0x424752(0x3a0),'highlight-map-container','highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0xec4143['forEach'](_0x5accfe=>{const _0x588c68=document['getElementById'](_0x5accfe);_0x588c68&&(_0x5accfe==='highlight-players-container'?_0x588c68['style']['display']='flex':_0x588c68['style']['display']='block');});const _0x480984=document['getElementById']('highlight-video-id');if(_0x480984){_0x480984[_0x424752(0x369)]=!![];const _0x1dfbfc=_0x480984['previousElementSibling'];if(_0x1dfbfc)_0x1dfbfc[_0x424752(0x17c)]='YouTube\x20Video\x20ID*';}if(_0x19578a)_0x19578a['style'][_0x424752(0x2e4)]='block';updateHighlightVideoPreview();}else{if(_0xa84ddb===_0x424752(0x193)){const _0x9e3c5d=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x9e3c5d[_0x424752(0x2ba)](_0x3b7259=>{const _0x9370d5=_0x424752,_0x3c871e=document['getElementById'](_0x3b7259);if(_0x3c871e)_0x3c871e[_0x9370d5(0x23f)]['display']='block';});const _0x3717cd=document['getElementById']('highlight-video-id');if(_0x3717cd){_0x3717cd['required']=![];const _0x9589d0=_0x3717cd['previousElementSibling'];if(_0x9589d0)_0x9589d0[_0x424752(0x17c)]='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0xa84ddb==='achievement'){const _0xdac456=['highlight-achievement-player-container','highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0xdac456['forEach'](_0x520179=>{const _0x3c1f4e=_0x424752,_0x3aea94=document['getElementById'](_0x520179);if(_0x3aea94)_0x3aea94['style'][_0x3c1f4e(0x2e4)]='block';});const _0x57cd76=document[_0x424752(0x211)]('highlight-video-id');if(_0x57cd76){_0x57cd76['required']=![];const _0x2d7460=_0x57cd76[_0x424752(0x292)];if(_0x2d7460)_0x2d7460['innerHTML']=_0x424752(0x242);}}}}}async function loadHighlightDataAdmin(_0x12782d){const _0xa1bd65=a2_0xf5ca78;try{const _0x430d5d=doc(db,'highlights',_0x12782d),_0x1094e1=await getDoc(_0x430d5d);if(!_0x1094e1['exists']()){showNotification(_0xa1bd65(0x3a9),_0xa1bd65(0x2cd));return;}const _0x2e910d=_0x1094e1['data'](),_0x879743=_0x2e910d['type']||'match';document['getElementById']('highlight-modal-title')['textContent']=_0xa1bd65(0x3ab)+getHighlightTypeName(_0x879743),document['getElementById']('highlight-type')[_0xa1bd65(0x18b)]=_0x879743,toggleHighlightFields(_0x879743),document['getElementById']('highlight-title')['value']=_0x2e910d['title']||'',document[_0xa1bd65(0x211)]('highlight-description')['value']=_0x2e910d[_0xa1bd65(0x273)]||'',document[_0xa1bd65(0x211)]('highlight-submitted-by')['value']=_0x2e910d['submittedBy']||'';_0x2e910d['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x2e910d['videoId'],updateHighlightVideoPreview());if(_0x879743==='match'){document['getElementById'](_0xa1bd65(0x1b8))['value']=_0x2e910d['matchInfo']||'',document['getElementById']('highlight-map')['value']=_0x2e910d['map']||'';if(_0x2e910d[_0xa1bd65(0x167)]){const _0x356f81=new Date(_0x2e910d['matchDate']['seconds']*0x3e8);document['getElementById']('highlight-match-date')[_0xa1bd65(0x18b)]=_0x356f81[_0xa1bd65(0x251)]()['split']('T')[0x0];}document['getElementById'](_0xa1bd65(0x203))['value']=_0x2e910d[_0xa1bd65(0x332)]||'',document['getElementById']('highlight-winner-score')['value']=_0x2e910d['winnerScore']||'',document[_0xa1bd65(0x211)]('highlight-loser-name')['value']=_0x2e910d['loserName']||'',document['getElementById']('highlight-loser-score')[_0xa1bd65(0x18b)]=_0x2e910d[_0xa1bd65(0x1bb)]||'',document['getElementById'](_0xa1bd65(0x225))['value']=_0x2e910d['matchLink']||'';}else{if(_0x879743==='creator')document[_0xa1bd65(0x211)]('highlight-map')['value']=_0x2e910d[_0xa1bd65(0x2d2)]||'',document[_0xa1bd65(0x211)]('highlight-map-creator')['value']=_0x2e910d['mapCreator']||'',document['getElementById'](_0xa1bd65(0x34f))['value']=_0x2e910d['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x2e910d['creatorImageUrl']||'';else _0x879743==='achievement'&&(document['getElementById'](_0xa1bd65(0x247))['value']=_0x2e910d['achievementPlayer']||'',document[_0xa1bd65(0x211)]('highlight-achievement-type')['value']=_0x2e910d['achievementType']||'',document[_0xa1bd65(0x211)]('highlight-achievement-details')['value']=_0x2e910d['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x2e910d['playerProfileUrl']||'',document[_0xa1bd65(0x211)]('highlight-achievement-image')[_0xa1bd65(0x18b)]=_0x2e910d[_0xa1bd65(0x32f)]||'');}}catch(_0x31d913){console[_0xa1bd65(0x2cd)](_0xa1bd65(0x210),_0x31d913),showNotification(_0xa1bd65(0x36b)+_0x31d913[_0xa1bd65(0x177)],'error');}}async function saveHighlight(){const _0xff5501=a2_0xf5ca78;try{const _0x171b20=document['getElementById']('highlight-id')?.['value']||'',_0x5d5273=document['getElementById'](_0xff5501(0x21f))?.['value']||_0xff5501(0x2a7),_0x3dc55d={'title':document[_0xff5501(0x211)](_0xff5501(0x228))?.['value']?.[_0xff5501(0x2ae)]()||'','description':document['getElementById']('highlight-description')?.[_0xff5501(0x18b)]?.['trim']()||'','submittedBy':document[_0xff5501(0x211)](_0xff5501(0x26f))?.[_0xff5501(0x18b)]?.[_0xff5501(0x2ae)]()||'','videoId':document['getElementById'](_0xff5501(0x1d4))?.['value']?.['trim']()||null,'type':_0x5d5273};if(!_0x3dc55d[_0xff5501(0x31e)]){showNotification(_0xff5501(0x2c9),'error');return;}if(_0x5d5273==='match'){_0x3dc55d[_0xff5501(0x1f9)]=document['getElementById']('highlight-match-info')?.['value']?.[_0xff5501(0x2ae)]()||'',_0x3dc55d['map']=document['getElementById']('highlight-map')?.['value']?.[_0xff5501(0x2ae)]()||'';const _0x2fee3f=document[_0xff5501(0x211)]('highlight-match-date'),_0xbc2667=_0x2fee3f?.['value']||'';_0x3dc55d['matchDate']=_0xbc2667?Timestamp['fromDate'](new Date(_0xbc2667)):null,_0x3dc55d['winnerName']=document[_0xff5501(0x211)]('highlight-winner-name')?.['value']?.['trim']()||'',_0x3dc55d[_0xff5501(0x28b)]=document[_0xff5501(0x211)]('highlight-winner-score')?.['value']?.['trim']()||'',_0x3dc55d[_0xff5501(0x35f)]=document['getElementById'](_0xff5501(0x2a9))?.['value']?.['trim']()||'',_0x3dc55d['loserScore']=document['getElementById'](_0xff5501(0x31d))?.['value']?.['trim']()||'',_0x3dc55d['matchLink']=document['getElementById']('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x3dc55d['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x5d5273===_0xff5501(0x193)){_0x3dc55d['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x3dc55d['mapCreator']=document['getElementById'](_0xff5501(0x39f))?.['value']?.['trim']()||'',_0x3dc55d['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.[_0xff5501(0x2ae)]()||'',_0x3dc55d['creatorImageUrl']=document[_0xff5501(0x211)](_0xff5501(0x387))?.[_0xff5501(0x18b)]?.['trim']()||'';if(!_0x3dc55d['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x5d5273==='achievement'){_0x3dc55d['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.[_0xff5501(0x18b)]?.['trim']()||'',_0x3dc55d['achievementType']=document['getElementById'](_0xff5501(0x22d))?.[_0xff5501(0x18b)]?.['trim']()||'',_0x3dc55d[_0xff5501(0x214)]=document['getElementById']('highlight-achievement-details')?.['value']?.[_0xff5501(0x2ae)]()||'',_0x3dc55d['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.['trim']()||'',_0x3dc55d['achievementImageUrl']=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x3dc55d['achievementPlayer']){showNotification(_0xff5501(0x35e),'error');return;}}}}_0x171b20?(_0x3dc55d['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x171b20),_0x3dc55d),showNotification('Highlight\x20updated\x20successfully!',_0xff5501(0x299))):(_0x3dc55d[_0xff5501(0x2c8)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x3dc55d),showNotification(_0xff5501(0x161),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x515029){console['error']('Error\x20saving\x20highlight:',_0x515029),showNotification('Error\x20saving\x20highlight:\x20'+_0x515029['message'],'error');}}function closeHighlightModal(){const _0x69b01a=document['getElementById']('highlight-modal');if(_0x69b01a)_0x69b01a['classList']['remove']('active');}function getHighlightTypeName(_0x1c3bc7){const _0xe7cdb8=a2_0xf5ca78;switch(_0x1c3bc7){case _0xe7cdb8(0x2a7):return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0xabc585=a2_0xf5ca78,_0x2f3c8e=document['getElementById']('highlight-video-id'),_0x1b003e=document[_0xabc585(0x211)]('highlight-video-preview-container'),_0x26fe5b=document[_0xabc585(0x211)]('highlight-video-preview');if(!_0x2f3c8e||!_0x26fe5b||!_0x1b003e)return;const _0x5ebb37=_0x2f3c8e['value'][_0xabc585(0x2ae)]();_0x5ebb37&&/^[a-zA-Z0-9_-]{11}$/[_0xabc585(0x215)](_0x5ebb37)?(_0x26fe5b['src']='https://www.youtube.com/embed/'+_0x5ebb37,_0x1b003e['style']['display']=_0xabc585(0x27d)):(_0x26fe5b['src']='',_0x1b003e['style']['display']='none');}async function loadHighlightsAdmin(){const _0x3366e9=a2_0xf5ca78,_0xa412e5=document['getElementById']('highlights-table-body');if(!_0xa412e5)return;_0xa412e5['innerHTML']=_0x3366e9(0x1de);try{const _0x25800d=query(collection(db,_0x3366e9(0x253)),orderBy('createdAt','desc')),_0x2a1eaf=await getDocs(_0x25800d);if(_0x2a1eaf[_0x3366e9(0x370)]){_0xa412e5['innerHTML']=_0x3366e9(0x19b);return;}_0xa412e5['innerHTML']='',_0x2a1eaf[_0x3366e9(0x2ba)](_0x21ff8e=>{const _0x1872d4=_0x3366e9,_0x2e59b2=_0x21ff8e[_0x1872d4(0x349)](),_0x4ab592=document['createElement']('tr'),_0x975132=_0x2e59b2['createdAt']?new Date(_0x2e59b2[_0x1872d4(0x2c8)]['seconds']*0x3e8)[_0x1872d4(0x2ca)]():_0x1872d4(0x26d);let _0x489b19=_0x1872d4(0x2f5),_0x164f0d='';switch(_0x2e59b2['type']){case'match':_0x489b19='Match',_0x164f0d='match-type';break;case _0x1872d4(0x193):_0x489b19='Creator',_0x164f0d='creator-type';break;case'achievement':_0x489b19='Achievement',_0x164f0d='achievement-type';break;}_0x4ab592['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2e59b2[_0x1872d4(0x31e)]||_0x1872d4(0x296))+_0x1872d4(0x243)+_0x164f0d+'\x22>'+_0x489b19+_0x1872d4(0x35d)+_0x975132+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2e59b2['submittedBy']||'Unknown')+_0x1872d4(0x188)+(_0x2e59b2['videoId']?_0x1872d4(0x34c):'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+_0x1872d4(0x2eb)+_0x21ff8e['id']+_0x1872d4(0x1a5)+_0x21ff8e['id']+_0x1872d4(0x23b),_0xa412e5[_0x1872d4(0x383)](_0x4ab592);}),document['querySelectorAll']('.edit-highlight-btn')[_0x3366e9(0x2ba)](_0x1cab0d=>{_0x1cab0d['addEventListener']('click',_0x2f0d21=>{openHighlightModal(_0x2f0d21['currentTarget']['dataset']['id']);});}),document[_0x3366e9(0x19c)](_0x3366e9(0x385))['forEach'](_0x20a252=>{const _0x256b36=_0x3366e9;_0x20a252[_0x256b36(0x1b4)]('click',_0x9125d1=>{const _0x25b440=_0x256b36;confirmDeleteHighlight(_0x9125d1['currentTarget'][_0x25b440(0x350)]['id']);});});}catch(_0x43df17){console['error'](_0x3366e9(0x1f2),_0x43df17),_0xa412e5[_0x3366e9(0x17c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x43df17['message']+_0x3366e9(0x20e);}}async function confirmDeleteHighlight(_0xbc7ba8){const _0x578824=a2_0xf5ca78;if(confirm(_0x578824(0x298)))try{await deleteDoc(doc(db,'highlights',_0xbc7ba8)),showNotification('Highlight\x20deleted\x20successfully',_0x578824(0x299)),loadHighlightsAdmin();}catch(_0x420ec6){console['error']('Error\x20deleting\x20highlight:',_0x420ec6),showNotification('Error\x20deleting\x20highlight:\x20'+_0x420ec6['message'],'error');}}function setupCreateTestMatchModal(){const _0x27ef83=a2_0xf5ca78;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x1d86db=document['getElementById'](_0x27ef83(0x265)),_0x564246=document['getElementById'](_0x27ef83(0x240));if(!_0x1d86db){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x564246){console[_0x27ef83(0x2cd)]('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x37778f=_0x1d86db['cloneNode'](!![]);_0x1d86db['parentNode'][_0x27ef83(0x27e)](_0x37778f,_0x1d86db);const _0x2bebaa=_0x37778f['querySelector']('#create-test-match-form');_0x37778f['addEventListener']('click',function(_0x13df6a){_0x13df6a['target']===_0x37778f&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0xc62384=_0x37778f['querySelector'](_0x27ef83(0x32c));_0xc62384&&_0xc62384[_0x27ef83(0x1b4)](_0x27ef83(0x2d3),function(_0x4ffaa9){const _0x1121d3=_0x27ef83;_0x4ffaa9[_0x1121d3(0x390)](),_0x4ffaa9['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0xb75aa8=_0x37778f['querySelector'](_0x27ef83(0x21a));_0xb75aa8&&_0xb75aa8[_0x27ef83(0x1b4)]('click',function(_0x405445){const _0x53c509=_0x27ef83;_0x405445['preventDefault'](),_0x405445['stopPropagation'](),console['log'](_0x53c509(0x1cc)),closeCreateTestMatchModal();});if(_0x2bebaa){_0x2bebaa[_0x27ef83(0x1b4)](_0x27ef83(0x18e),function(_0xc98edf){_0xc98edf['preventDefault'](),_0xc98edf['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0xa99413=_0x2bebaa['querySelector'](_0x27ef83(0x34e));_0xa99413&&_0xa99413[_0x27ef83(0x1b4)]('click',function(_0x2906e3){_0x2906e3['preventDefault'](),_0x2906e3['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log'](_0x27ef83(0x1a0));}function setupManageHighlightsSection(){const _0x5b557c=a2_0xf5ca78;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x516d3e=document[_0x5b557c(0x211)]('highlight-form');_0x516d3e&&_0x516d3e['addEventListener'](_0x5b557c(0x18e),_0x13972d=>{const _0x3854c1=_0x5b557c;_0x13972d[_0x3854c1(0x390)](),saveHighlight();});const _0x38eac4=document[_0x5b557c(0x211)]('cancel-highlight-btn');_0x38eac4&&_0x38eac4['addEventListener'](_0x5b557c(0x2d3),closeHighlightModal);const _0x44baf7=document['querySelector']('#highlight-modal\x20.close-btn');_0x44baf7&&_0x44baf7[_0x5b557c(0x1b4)](_0x5b557c(0x2d3),closeHighlightModal);const _0x29ecd8=document[_0x5b557c(0x211)]('highlight-modal');_0x29ecd8&&_0x29ecd8[_0x5b557c(0x1b4)]('click',_0x40b17=>{const _0x2c0cee=_0x5b557c;_0x40b17[_0x2c0cee(0x343)]===_0x29ecd8&&closeHighlightModal();});const _0x250a8b=document['getElementById']('highlight-video-id');_0x250a8b&&_0x250a8b[_0x5b557c(0x1b4)]('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x32b8e4=a2_0xf5ca78;console['log'](_0x32b8e4(0x39c));const _0x247263=document[_0x32b8e4(0x211)]('matches-prev-page'),_0x4db711=document['getElementById']('matches-next-page');_0x247263&&_0x247263['addEventListener'](_0x32b8e4(0x2d3),()=>{const _0x26f83a=_0x32b8e4,_0x4c548f=currentLadder[_0x26f83a(0x20d)]();loadMatchesData(matchesPagination[_0x4c548f]['page']-0x1);});_0x4db711&&_0x4db711[_0x32b8e4(0x1b4)]('click',()=>{const _0x278143=_0x32b8e4,_0x369c23=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x369c23][_0x278143(0x2b5)]+0x1);});const _0x280437=document['getElementById']('apply-matches-filters'),_0x24c88d=document['getElementById']('reset-matches-filters');_0x280437&&_0x280437['addEventListener']('click',applyMatchesFilters);_0x24c88d&&_0x24c88d[_0x32b8e4(0x1b4)](_0x32b8e4(0x2d3),resetMatchesFilters);const _0x582865=document[_0x32b8e4(0x211)]('matches-search');_0x582865&&_0x582865['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x5f1366=document['getElementById'](_0x32b8e4(0x310));_0x5f1366&&_0x5f1366['addEventListener']('click',openResimulateModal);const _0x102511=document[_0x32b8e4(0x211)]('resimulate-modal');if(_0x102511){const _0x16f710=_0x102511['querySelector'](_0x32b8e4(0x2f0));_0x16f710&&_0x16f710[_0x32b8e4(0x1b4)](_0x32b8e4(0x2d3),closeResimulateModal),_0x102511['addEventListener']('click',_0x5b40ac=>{_0x5b40ac['target']===_0x102511&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x32b8e4(0x189));}function openCreateTestMatchModal(){const _0x230452=a2_0xf5ca78;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x558243=document['getElementById']('create-test-match-modal'),_0x21b0b5=document['getElementById'](_0x230452(0x240));if(!_0x558243){console['error'](_0x230452(0x2a2)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x21b0b5){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x21b0b5['reset']();const _0x5a2a69=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x28538f=![];_0x5a2a69['forEach'](_0x3d2f52=>{const _0x56d1fb=_0x230452;console['log']('Found\x20radio\x20with\x20value:',_0x3d2f52['value']),_0x3d2f52['value']===currentLadder&&(_0x3d2f52['checked']=!![],_0x28538f=!![],console[_0x56d1fb(0x233)](_0x56d1fb(0x25f),currentLadder));});if(!_0x28538f){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x5ca2b7=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x5ca2b7&&(_0x5ca2b7['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0xa140f9=document['getElementById']('test-match-date');if(_0xa140f9){const _0x2259d2=new Date()['toISOString']()['split']('T')[0x0];_0xa140f9[_0x230452(0x18b)]=_0x2259d2;}_0x558243['style'][_0x230452(0x2e4)]='flex',_0x558243['style']['visibility']='visible',_0x558243[_0x230452(0x23f)]['opacity']='1',_0x558243['classList'][_0x230452(0x1f1)]('active'),console['log'](_0x230452(0x371));const _0x12ac41=document['getElementById'](_0x230452(0x1e2));_0x12ac41&&setTimeout(()=>{_0x12ac41['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x919b0b=a2_0xf5ca78;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x39172b=document[_0x919b0b(0x211)]('create-test-match-modal');if(!_0x39172b){console[_0x919b0b(0x2cd)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x39172b['classList']['remove']('active'),_0x39172b['style']['opacity']='0',_0x39172b['style']['visibility']='hidden',setTimeout(()=>{const _0x4d6ca9=_0x919b0b;!_0x39172b['classList']['contains'](_0x4d6ca9(0x36c))&&(_0x39172b['style']['display']=_0x4d6ca9(0x28d));},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x343b36=a2_0xf5ca78;console['log'](_0x343b36(0x230));try{const _0x2e520f=auth[_0x343b36(0x25c)];if(!_0x2e520f){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x50ac37='D1',_0x47716d='approvedMatches',_0x5e9200={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x343b36(0x269),'loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x343b36(0x1bd),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x2e520f['email'],'createdAt':serverTimestamp(),'createdBy':_0x2e520f['email'],'isTestMatch':!![],'ladder':_0x50ac37,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x2e520f['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x47716d),_0x5e9200),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x920344){console[_0x343b36(0x2cd)]('Error\x20creating\x20simple\x20test\x20match:',_0x920344),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x920344['message'],_0x343b36(0x2cd));}}window['testFirebaseConnection']=async function(){const _0x14db77=a2_0xf5ca78;try{console[_0x14db77(0x233)](_0x14db77(0x2bb)),console['log']('Auth:',auth),console['log'](_0x14db77(0x180),db),console['log']('Current\x20user:',auth['currentUser']);const _0xbc6a25=collection(db,_0x14db77(0x185));console[_0x14db77(0x233)]('Collection\x20reference\x20created:',_0xbc6a25);const _0x59d269=query(_0xbc6a25,where(_0x14db77(0x1a1),'==','nonexistent'));console[_0x14db77(0x233)](_0x14db77(0x2db),_0x59d269);const _0x2a97cf=await getDocs(_0x59d269);console[_0x14db77(0x233)](_0x14db77(0x300),_0x2a97cf['empty']),console[_0x14db77(0x233)]('Firebase\x20connection\x20test\x20successful!');}catch(_0x9153a4){console[_0x14db77(0x2cd)]('Firebase\x20connection\x20test\x20failed:',_0x9153a4);}};function setupCreateTestMatchButton(){const _0x3c84b1=a2_0xf5ca78,_0x106cda=document['getElementById']('create-test-match-btn');if(!_0x106cda){console['error'](_0x3c84b1(0x318));return;}console['log'](_0x3c84b1(0x37a));const _0x9ca032=_0x106cda['cloneNode'](!![]);_0x106cda['parentNode'][_0x3c84b1(0x27e)](_0x9ca032,_0x106cda),_0x9ca032['addEventListener']('click',function(_0x5c8804){const _0x519854=_0x3c84b1;_0x5c8804[_0x519854(0x390)](),_0x5c8804['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log'](_0x3c84b1(0x1e4));}async function loadMatchesData(_0x46b3c6=0x1){const _0x41afd1=a2_0xf5ca78,_0x4568f8=document['getElementById']('matches-table-body');if(!_0x4568f8)return;_0x4568f8[_0x41afd1(0x17c)]=_0x41afd1(0x15b);try{const _0x37e4f7=currentLadder[_0x41afd1(0x20d)](),_0xcc11d1=matchesPagination[_0x37e4f7],_0x50de9d=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x41afd1(0x24c),_0x36aeb4=collection(db,_0x50de9d);_0x46b3c6<=0x1?(_0xcc11d1['page']=0x1,_0xcc11d1[_0x41afd1(0x30d)]=null,_0xcc11d1['lastVisible']=null):_0xcc11d1['page']=_0x46b3c6;const _0x1df0f8=getMatchesFilters();let _0x444986=_0x36aeb4;if(_0x1df0f8[_0x41afd1(0x24a)]||_0x1df0f8['endDate']||_0x1df0f8['searchTerm']){let _0x26ae1a=[];_0x1df0f8['startDate']&&_0x1df0f8[_0x41afd1(0x30a)]?(_0x26ae1a[_0x41afd1(0x1da)](where('approvedAt','>=',_0x1df0f8[_0x41afd1(0x24a)]),where('approvedAt','<=',_0x1df0f8['endDate'])),_0x444986=query(_0x36aeb4,..._0x26ae1a)):_0x444986=query(_0x36aeb4,orderBy(_0x41afd1(0x1ef),'desc'));}else _0x444986=query(_0x36aeb4,orderBy('approvedAt',_0x41afd1(0x2d8)));_0x46b3c6>0x1&&_0xcc11d1[_0x41afd1(0x1c6)]?_0x444986=query(_0x444986,startAfter(_0xcc11d1['lastVisible']),limit(PAGE_SIZE)):_0x444986=query(_0x444986,limit(PAGE_SIZE));const _0x13a390=await getDocs(_0x444986);!_0x13a390['empty']&&(_0xcc11d1[_0x41afd1(0x30d)]=_0x13a390['docs'][0x0],_0xcc11d1['lastVisible']=_0x13a390['docs'][_0x13a390['docs']['length']-0x1]);let _0x3a683d=![];if(!_0x13a390[_0x41afd1(0x370)]){const _0x5b5c01=query(_0x444986,startAfter(_0xcc11d1[_0x41afd1(0x1c6)]),limit(0x1)),_0x1b6899=await getDocs(_0x5b5c01);_0x3a683d=!_0x1b6899['empty'];}const _0x255467=document['getElementById']('matches-prev-page'),_0x7aa3c=document['getElementById']('matches-next-page'),_0x4ea302=document['getElementById']('matches-page-indicator');if(_0x255467)_0x255467['disabled']=_0xcc11d1['page']<=0x1;if(_0x7aa3c)_0x7aa3c['disabled']=!_0x3a683d;if(_0x4ea302)_0x4ea302[_0x41afd1(0x37c)]=_0x41afd1(0x398)+_0xcc11d1[_0x41afd1(0x2b5)];if(_0x13a390['empty']){_0x4568f8['innerHTML']=_0x41afd1(0x275);return;}_0x4568f8[_0x41afd1(0x17c)]='',_0x13a390[_0x41afd1(0x2ba)](_0x33fff1=>{const _0x2957d9=_0x41afd1,_0x57c3cf=_0x33fff1[_0x2957d9(0x349)](),_0x21f39f=document['createElement']('tr'),_0x436472=_0x57c3cf['approvedAt']?new Date(_0x57c3cf['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x21f39f['setAttribute']('data-id',_0x33fff1['id']),_0x21f39f[_0x2957d9(0x2b1)](_0x2957d9(0x266),currentLadder),_0x21f39f['classList']['add']('match-row'),_0x21f39f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x436472+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x57c3cf['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x57c3cf['loserUsername']||'Unknown')+_0x2957d9(0x19a)+(_0x57c3cf['winnerScore']||0x0)+_0x2957d9(0x2b9)+(_0x57c3cf[_0x2957d9(0x1bb)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x57c3cf[_0x2957d9(0x244)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x2957d9(0x176)+_0x33fff1['id']+_0x2957d9(0x235)+_0x33fff1['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4568f8['appendChild'](_0x21f39f);}),setupMatchesActionButtons(),_0x1df0f8[_0x41afd1(0x263)]&&filterMatchesTable(),console['log']('Loaded\x20'+_0x13a390['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0xcc11d1['page']);}catch(_0x2f228d){console['error']('Error\x20loading\x20matches:',_0x2f228d),_0x4568f8[_0x41afd1(0x17c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x2f228d['message']+_0x41afd1(0x20e);}}async function deleteMatch(_0x519e02,_0xd9d979){const _0x454a37=a2_0xf5ca78;try{console['log']('Deleting\x20match\x20'+_0x519e02+'\x20from\x20'+_0xd9d979+'\x20ladder');const _0x42401f=auth['currentUser'];if(!_0x42401f){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches',_0x454a37(0x2cd));return;}const _0xc74282=_0xd9d979==='D1'?'approvedMatches':_0xd9d979==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0xc74282),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0xc74282,_0x519e02)),console['log'](_0x454a37(0x232)),showNotification('Match\x20deleted\x20successfully',_0x454a37(0x299));const _0x25f784=_0xd9d979['toLowerCase']();loadMatchesData(matchesPagination[_0x25f784][_0x454a37(0x2b5)]);}catch(_0xb3084d){console['error']('Error\x20deleting\x20match:',_0xb3084d),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0xb3084d[_0x454a37(0x177)],'error');}}function setupMatchesActionButtons(){const _0x540403=a2_0xf5ca78;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x32216d=>{_0x32216d['addEventListener']('click',_0x2d9329=>{const _0x500a49=a2_0x5154;_0x2d9329['preventDefault'](),_0x2d9329['stopPropagation']();const _0x35f12d=_0x2d9329['currentTarget'][_0x500a49(0x350)]['id'],_0x5630a8=_0x2d9329['currentTarget']['closest']('tr'),_0x332036=_0x5630a8['dataset']['ladder'];console['log'](_0x500a49(0x1eb),_0x35f12d,_0x332036),openEditMatchModal(_0x35f12d,_0x332036);});}),document['querySelectorAll']('.delete-match-btn')['forEach'](_0x4270f8=>{const _0x4574e2=a2_0x5154;_0x4270f8['addEventListener'](_0x4574e2(0x2d3),_0x5db3f0=>{const _0x1cad60=_0x4574e2;_0x5db3f0['preventDefault'](),_0x5db3f0[_0x1cad60(0x2f1)]();const _0x2b60c1=_0x5db3f0['currentTarget']['dataset']['id'],_0x1dd5c7=_0x5db3f0['currentTarget']['closest']('tr'),_0x4b82b9=_0x1dd5c7['dataset']['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x2b60c1,_0x4b82b9),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x2b60c1,_0x4b82b9);});}),console[_0x540403(0x233)](_0x540403(0x1a6));}function filterMatchesTable(){const _0x202392=a2_0xf5ca78,_0x57aaa9=document['getElementById'](_0x202392(0x314))['value'][_0x202392(0x20d)](),_0x4bf6b2=document['querySelectorAll']('#matches-table-body\x20tr');let _0x1aa83c=0x0;_0x4bf6b2['forEach'](_0x5c3cb2=>{const _0x22d650=_0x202392;if(_0x5c3cb2[_0x22d650(0x377)][_0x22d650(0x357)]('loading-cell')||_0x5c3cb2['classList']['contains'](_0x22d650(0x173))||_0x5c3cb2['classList']['contains'](_0x22d650(0x28c)))return;const _0x57d084=_0x5c3cb2['cells'][0x1]['textContent']['toLowerCase'](),_0x11e7e2=_0x5c3cb2['cells'][0x2]['textContent']['toLowerCase'](),_0x3aaa74=_0x5c3cb2[_0x22d650(0x316)][0x4]['textContent']['toLowerCase']();_0x57d084['includes'](_0x57aaa9)||_0x11e7e2[_0x22d650(0x2fb)](_0x57aaa9)||_0x3aaa74['includes'](_0x57aaa9)?(_0x5c3cb2['style']['display']='',_0x1aa83c++):_0x5c3cb2['style'][_0x22d650(0x2e4)]='none';});if(_0x1aa83c===0x0&&_0x4bf6b2['length']>0x0){const _0x1006d0=document['getElementById']('matches-table-body'),_0x5ca11a=_0x1006d0['querySelector']('.no-results');if(!_0x5ca11a){const _0x43f8bb=document['createElement']('tr');_0x43f8bb['className']=_0x202392(0x1ce),_0x43f8bb['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x57aaa9+_0x202392(0x35a),_0x1006d0['appendChild'](_0x43f8bb);}}else{const _0x424d4f=document['querySelector']('.no-results');_0x424d4f&&_0x424d4f['remove']();}}function getMatchesFilters(){const _0x5f3790=a2_0xf5ca78,_0x431fce=document['getElementById']('matches-search')['value'][_0x5f3790(0x20d)](),_0xcc7c6c=document['getElementById']('matches-start-date')['value'],_0x25f711=document[_0x5f3790(0x211)]('matches-end-date')['value'];let _0x337ca3=null,_0x4cbd5e=null;return _0xcc7c6c&&(_0x337ca3=new Date(_0xcc7c6c),_0x337ca3[_0x5f3790(0x204)](0x0,0x0,0x0,0x0),_0x337ca3=Timestamp['fromDate'](_0x337ca3)),_0x25f711&&(_0x4cbd5e=new Date(_0x25f711),_0x4cbd5e['setHours'](0x17,0x3b,0x3b,0x3e7),_0x4cbd5e=Timestamp[_0x5f3790(0x2a4)](_0x4cbd5e)),{'searchTerm':_0x431fce,'startDate':_0x337ca3,'endDate':_0x4cbd5e};}async function applyMatchesFilters(){const _0x1cb3ba=currentLadder['toLowerCase']();matchesPagination[_0x1cb3ba]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x206f52=a2_0xf5ca78;document['getElementById']('matches-start-date')['value']='',document[_0x206f52(0x211)]('matches-end-date')[_0x206f52(0x18b)]='',document['getElementById']('matches-search')['value']='';const _0x4f50a1=currentLadder[_0x206f52(0x20d)]();matchesPagination[_0x4f50a1]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x2824eb,_0x889b84){const _0x125c4e=a2_0xf5ca78,_0x2d75d9=document['getElementById']('edit-match-modal');if(!_0x2d75d9)return;try{const _0x20fd05=_0x889b84==='D1'?'approvedMatches':_0x889b84==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x17bec=doc(db,_0x20fd05,_0x2824eb),_0x154539=await getDoc(_0x17bec);if(!_0x154539['exists']()){showNotification('Match\x20not\x20found',_0x125c4e(0x2cd));return;}const _0x481434=_0x154539['data']();document['getElementById']('edit-match-id')[_0x125c4e(0x18b)]=_0x2824eb,document['getElementById'](_0x125c4e(0x2ec))['value']=_0x889b84,document['getElementById'](_0x125c4e(0x329))['value']=_0x481434[_0x125c4e(0x330)]||'',document['getElementById']('edit-match-winner-score')['value']=_0x481434['winnerScore']||0x0,document[_0x125c4e(0x211)]('edit-match-winner-suicides')[_0x125c4e(0x18b)]=_0x481434['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x481434['winnerComment']||'',document[_0x125c4e(0x211)](_0x125c4e(0x1b6))['value']=_0x481434['loserUsername']||'',document['getElementById']('edit-match-loser-score')[_0x125c4e(0x18b)]=_0x481434['loserScore']||0x0,document['getElementById'](_0x125c4e(0x164))[_0x125c4e(0x18b)]=_0x481434['loserSuicides']||0x0,document['getElementById']('edit-match-loser-comment')[_0x125c4e(0x18b)]=_0x481434['loserComment']||'',document['getElementById'](_0x125c4e(0x2e1))['value']=_0x481434['mapPlayed']||'',document[_0x125c4e(0x211)]('edit-match-winner-demo')['value']=_0x481434['winnerDemoLink']||'',document[_0x125c4e(0x211)]('edit-match-loser-demo')['value']=_0x481434['loserDemoLink']||_0x481434['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x481434['winnerUsername']+_0x125c4e(0x205)+_0x481434[_0x125c4e(0x172)],_0x2d75d9['classList']['add'](_0x125c4e(0x36c));}catch(_0x2f0dfc){console['error']('Error\x20loading\x20match\x20data:',_0x2f0dfc),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x235885=document['getElementById']('edit-match-modal');_0x235885&&_0x235885['classList']['remove']('active');}async function saveEditedMatch(){const _0x13a810=a2_0xf5ca78;try{const _0x4c1d00=document['getElementById']('edit-match-id')['value'],_0x371cde=document['getElementById'](_0x13a810(0x2ec))['value'];if(!_0x4c1d00||!_0x371cde){showNotification(_0x13a810(0x1a3),'error');return;}const _0x27043d=_0x371cde==='D1'?_0x13a810(0x289):_0x371cde==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x23f7df=document['getElementById'](_0x13a810(0x329))['value']['trim'](),_0x4a6c76=parseInt(document[_0x13a810(0x211)]('edit-match-winner-score')[_0x13a810(0x18b)]),_0x55bd4a=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x2e4cfb=document['getElementById'](_0x13a810(0x206))[_0x13a810(0x18b)]['trim'](),_0x16f058=document['getElementById']('edit-match-loser')['value']['trim'](),_0x35501a=parseInt(document[_0x13a810(0x211)]('edit-match-loser-score')['value']),_0x23d5d9=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x248fd2=document['getElementById']('edit-match-loser-comment')['value']['trim'](),_0x27e956=document['getElementById']('edit-match-map')['value'][_0x13a810(0x2ae)](),_0x22a13c=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x156648=document['getElementById']('edit-match-loser-demo')['value']['trim']();if(!_0x23f7df||!_0x16f058){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required',_0x13a810(0x2cd));return;}await updateDoc(doc(db,_0x27043d,_0x4c1d00),{'winnerUsername':_0x23f7df,'winnerScore':_0x4a6c76,'winnerSuicides':_0x55bd4a,'winnerComment':_0x2e4cfb,'loserUsername':_0x16f058,'loserScore':_0x35501a,'loserSuicides':_0x23d5d9,'loserComment':_0x248fd2,'mapPlayed':_0x27e956,'winnerDemoLink':_0x22a13c||null,'loserDemoLink':_0x156648||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x13a810(0x1ff)],'isEdited':!![]}),showNotification(_0x13a810(0x319),'success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x371cde[_0x13a810(0x20d)]()]['page']);}catch(_0x4ac5af){console['error']('Error\x20saving\x20match:',_0x4ac5af),showNotification(_0x13a810(0x34b)+_0x4ac5af['message'],_0x13a810(0x2cd));}}async function openDeleteMatchModal(_0x4f1ae9,_0x5b8cf5){const _0x303b5a=a2_0xf5ca78;try{const _0x3189ef=_0x5b8cf5==='D1'?_0x303b5a(0x289):_0x5b8cf5==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x4988d8=doc(db,_0x3189ef,_0x4f1ae9),_0x499ef3=await getDoc(_0x4988d8);if(!_0x499ef3['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x319647=_0x499ef3[_0x303b5a(0x349)](),_0xa738c6=document[_0x303b5a(0x211)]('delete-match-confirm-modal');_0xa738c6['dataset']['matchId']=_0x4f1ae9,_0xa738c6['dataset'][_0x303b5a(0x337)]=_0x5b8cf5;const _0xa92cdf=_0x319647[_0x303b5a(0x1ef)]?new Date(_0x319647['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0xd55913=document[_0x303b5a(0x211)]('delete-match-summary');_0xd55913[_0x303b5a(0x17c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0xa92cdf+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x319647['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x319647[_0x303b5a(0x172)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x319647[_0x303b5a(0x28b)]||0x0)+_0x303b5a(0x2b9)+(_0x319647['loserScore']||0x0)+_0x303b5a(0x160)+(_0x319647['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x5b8cf5+_0x303b5a(0x20c),_0xa738c6[_0x303b5a(0x377)]['add']('active');}catch(_0x36f589){console[_0x303b5a(0x2cd)]('Error\x20loading\x20match\x20for\x20deletion:',_0x36f589),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x4a6a5a=a2_0xf5ca78,_0x56125b=document['getElementById']('delete-match-confirm-modal');_0x56125b&&(_0x56125b['classList']['remove']('active'),_0x56125b['removeAttribute'](_0x4a6a5a(0x23c)),_0x56125b[_0x4a6a5a(0x260)]('data-ladder'));}async function confirmDeleteMatch(){const _0x79075a=a2_0xf5ca78,_0x1d0d18=document[_0x79075a(0x211)](_0x79075a(0x34d)),_0x2110c7=_0x1d0d18['dataset']['matchId'],_0x53b853=_0x1d0d18['dataset']['ladder'];if(!_0x2110c7||!_0x53b853){showNotification(_0x79075a(0x1a3),'error'),closeDeleteMatchModal();return;}try{const _0x1a4bcb=_0x53b853==='D1'?_0x79075a(0x289):_0x53b853==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x1a4bcb,_0x2110c7)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x53b853[_0x79075a(0x20d)]()]['page']);}catch(_0x511c0a){console[_0x79075a(0x2cd)](_0x79075a(0x29f),_0x511c0a),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x511c0a[_0x79075a(0x177)],'error');}}async function saveHighlightChanges(){const _0x18a961=a2_0xf5ca78,_0x4430e9=document['getElementById']('edit-highlight-id')['value'],_0x461daa=document['getElementById']('edit-highlight-type-select')['value'];let _0x1d37f2={'title':document[_0x18a961(0x211)](_0x18a961(0x295))['value'][_0x18a961(0x2ae)](),'type':_0x461daa,'description':document['getElementById']('edit-highlight-description-input')[_0x18a961(0x18b)][_0x18a961(0x2ae)](),'videoId':document['getElementById']('edit-highlight-videoId-input')[_0x18a961(0x18b)]['trim'](),'submittedBy':auth['currentUser']['email']};if(_0x461daa==='match'){_0x1d37f2['matchInfo']=document[_0x18a961(0x211)]('edit-highlight-matchInfo-input')['value'][_0x18a961(0x2ae)](),_0x1d37f2[_0x18a961(0x2d2)]=document[_0x18a961(0x211)](_0x18a961(0x15d))['value'][_0x18a961(0x2ae)]();const _0x5a488a=document[_0x18a961(0x211)]('edit-highlight-matchDate-input')['value'];_0x1d37f2['matchDate']=_0x5a488a?Timestamp['fromDate'](new Date(_0x5a488a)):null,_0x1d37f2['winnerName']=document['getElementById'](_0x18a961(0x174))[_0x18a961(0x18b)]['trim'](),_0x1d37f2[_0x18a961(0x28b)]=document[_0x18a961(0x211)]('edit-highlight-winnerScore-input')['value'][_0x18a961(0x2ae)](),_0x1d37f2['loserName']=document['getElementById']('edit-highlight-loserName-input')['value']['trim'](),_0x1d37f2['loserScore']=document['getElementById'](_0x18a961(0x171))[_0x18a961(0x18b)]['trim'](),_0x1d37f2[_0x18a961(0x2bc)]=document[_0x18a961(0x211)]('edit-highlight-matchLink-input')['value'][_0x18a961(0x2ae)](),_0x1d37f2[_0x18a961(0x178)]=null,_0x1d37f2['mapVersion']=null,_0x1d37f2[_0x18a961(0x2f9)]=null,_0x1d37f2['achievementPlayer']=null,_0x1d37f2['achievementType']=null,_0x1d37f2[_0x18a961(0x214)]=null,_0x1d37f2[_0x18a961(0x25b)]=null;}else{if(_0x461daa==='creator')_0x1d37f2['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x1d37f2['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')[_0x18a961(0x18b)][_0x18a961(0x2ae)](),_0x1d37f2['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value']['trim'](),_0x1d37f2['creatorImageUrl']=document['getElementById'](_0x18a961(0x1fc))['value']['trim'](),_0x1d37f2['matchInfo']=null,_0x1d37f2['matchDate']=null,_0x1d37f2['winnerName']=null,_0x1d37f2[_0x18a961(0x28b)]=null,_0x1d37f2['loserName']=null,_0x1d37f2[_0x18a961(0x1bb)]=null,_0x1d37f2['matchLink']=null,_0x1d37f2[_0x18a961(0x373)]=null,_0x1d37f2['achievementType']=null,_0x1d37f2['achievementDetails']=null,_0x1d37f2[_0x18a961(0x25b)]=null;else _0x461daa==='achievement'&&(_0x1d37f2['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x1d37f2['achievementType']=document['getElementById']('edit-highlight-achievementType-input')['value']['trim'](),_0x1d37f2['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')['value']['trim'](),_0x1d37f2['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value'][_0x18a961(0x2ae)](),_0x1d37f2[_0x18a961(0x1f9)]=null,_0x1d37f2['map']=null,_0x1d37f2[_0x18a961(0x167)]=null,_0x1d37f2[_0x18a961(0x332)]=null,_0x1d37f2[_0x18a961(0x28b)]=null,_0x1d37f2[_0x18a961(0x35f)]=null,_0x1d37f2['loserScore']=null,_0x1d37f2[_0x18a961(0x2bc)]=null,_0x1d37f2['mapCreator']=null,_0x1d37f2[_0x18a961(0x181)]=null,_0x1d37f2[_0x18a961(0x2f9)]=null);}try{if(_0x4430e9){_0x1d37f2[_0x18a961(0x169)]=serverTimestamp();const _0x26c089=doc(db,'highlights',_0x4430e9);await updateDoc(_0x26c089,_0x1d37f2),showNotification('Highlight\x20updated\x20successfully!',_0x18a961(0x299));}else _0x1d37f2['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x1d37f2),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0xe23995){console['error']('Error\x20saving\x20highlight:',_0xe23995),showNotification(_0x18a961(0x1c2)+_0xe23995['message'],'error');}}async function resimulateMatch(){const _0x353312=a2_0xf5ca78;try{const _0x1cfe82=document['getElementById']('resimulate-match-id')['value'];if(!_0x1cfe82){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x1f63bf=auth[_0x353312(0x25c)];if(!_0x1f63bf){showNotification(_0x353312(0x2f3),'error');return;}const _0x5e66fa=currentLadder==='D1'?_0x353312(0x289):currentLadder==='D2'?'approvedMatchesD2':_0x353312(0x24c),_0x4a0563=doc(db,_0x5e66fa,_0x1cfe82),_0x38efc1=await getDoc(_0x4a0563);if(!_0x38efc1[_0x353312(0x338)]()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x3cbd4b=_0x38efc1[_0x353312(0x349)](),_0x474b76=_0x3cbd4b['approvedAt']?_0x3cbd4b['approvedAt'][_0x353312(0x20a)]()['toLocaleString']():_0x3cbd4b[_0x353312(0x167)]?_0x3cbd4b[_0x353312(0x167)][_0x353312(0x20a)]?_0x3cbd4b['matchDate'][_0x353312(0x20a)]()['toLocaleString']():new Date(_0x3cbd4b['matchDate'])[_0x353312(0x376)]():'Unknown',_0x288035=_0x353312(0x2d1)+_0x3cbd4b['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x3cbd4b['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x3cbd4b[_0x353312(0x28b)]+'-'+_0x3cbd4b[_0x353312(0x1bb)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x3cbd4b['mapPlayed']||_0x3cbd4b['mapName']||'Unknown')+_0x353312(0x311)+_0x474b76+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x1cfe82+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x353312(0x211)]('match-details-container')[_0x353312(0x17c)]=_0x288035,document['getElementById']('match-details-container')['style']['display']=_0x353312(0x27d),document['getElementById']('confirm-resimulate-btn')['style'][_0x353312(0x2e4)]='block',window['pendingResimulateData']={'matchId':_0x1cfe82,'matchData':_0x3cbd4b,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation',_0x353312(0x359));}catch(_0x2c6e5f){console['error'](_0x353312(0x21d),_0x2c6e5f),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x2c6e5f['message'],'error');}}async function confirmResimulateMatch(){const _0x5abfd5=a2_0xf5ca78;try{const {matchId:_0x1e3e45,matchData:_0x77afcc,ladder:_0x920a02}=window['pendingResimulateData'];if(!_0x1e3e45||!_0x77afcc){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x5f1aa3=_0x920a02==='D1'?_0x5abfd5(0x185):_0x920a02==='D2'?'playersD2':'playersD3',_0x9fce5b=_0x920a02==='D1'?'eloHistory':_0x920a02==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x22ae84,_0x1da5a0]=await Promise['all']([getDocs(query(collection(db,_0x5f1aa3),where('username','==',_0x77afcc['winnerUsername']))),getDocs(query(collection(db,_0x5f1aa3),where('username','==',_0x77afcc['loserUsername'])))]);if(_0x22ae84[_0x5abfd5(0x370)]||_0x1da5a0['empty']){showNotification('Could\x20not\x20find\x20player\x20documents',_0x5abfd5(0x2cd));return;}const _0x5e1b9b=_0x22ae84[_0x5abfd5(0x301)][0x0]['id'],_0x5b9201=_0x1da5a0['docs'][0x0]['id'],_0x1f8f06=_0x22ae84['docs'][0x0][_0x5abfd5(0x349)](),_0x1b448c=_0x1da5a0['docs'][0x0]['data'](),[_0x4aa56c,_0x39f997]=await Promise['all']([getDocs(query(collection(db,_0x9fce5b),where('playerId','==',_0x5e1b9b),where('matchId','==',_0x1e3e45))),getDocs(query(collection(db,_0x9fce5b),where('playerId','==',_0x5b9201),where('matchId','==',_0x1e3e45)))]),_0x3aa685=!_0x4aa56c['empty'],_0x5608cb=!_0x39f997['empty'],_0xaae913=_0x5abfd5(0x361)+(_0x3aa685?_0x5abfd5(0x1be):'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x5608cb?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x1f8f06['eloRating']||_0x5abfd5(0x2f5))+_0x5abfd5(0x238)+(_0x1b448c['eloRating']||'Unknown')+_0x5abfd5(0x29e)+(_0x1f8f06['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x1b448c['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0xaae913,document['getElementById']('validation-results-container')[_0x5abfd5(0x23f)][_0x5abfd5(0x2e4)]=_0x5abfd5(0x27d);if(_0x3aa685&&_0x5608cb){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x342724=_0x77afcc['approvedAt']||_0x77afcc['matchDate']||serverTimestamp(),[_0xcdd6ba,_0x2e9da2]=await Promise['all']([getPlayerEloAtTime(_0x5e1b9b,_0x342724,_0x9fce5b),getPlayerEloAtTime(_0x5b9201,_0x342724,_0x9fce5b)]),{calculateElo:_0x42d6dd}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x2a5bd8,newLoserRating:_0x3531f5}=_0x42d6dd(_0xcdd6ba,_0x2e9da2),_0x4fba9b=_0x1f8f06['position']||Number['MAX_SAFE_INTEGER'],_0x58e042=_0x1b448c['position']||Number['MAX_SAFE_INTEGER'];let _0x1cbcb=_0x4fba9b,_0x35981e=_0x58e042;_0x4fba9b>_0x58e042&&(_0x1cbcb=_0x58e042,_0x35981e=_0x58e042+0x1);const _0xd9e41e=writeBatch(db),_0x26e8c3=doc(db,_0x5f1aa3,_0x5e1b9b);_0xd9e41e[_0x5abfd5(0x16f)](_0x26e8c3,{'eloRating':_0x2a5bd8,'position':_0x1cbcb,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x402ed3=doc(db,_0x5f1aa3,_0x5b9201);_0xd9e41e[_0x5abfd5(0x16f)](_0x402ed3,{'eloRating':_0x3531f5,'position':_0x35981e,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x5abfd5(0x166)]});if(_0x4fba9b>_0x58e042){const _0x1005c4=await getDocs(query(collection(db,_0x5f1aa3),where('position','>',_0x58e042),where(_0x5abfd5(0x2e5),'<',_0x4fba9b)));_0x1005c4['forEach'](_0x368169=>{const _0x4c457c=doc(db,_0x5f1aa3,_0x368169['id']),_0x3e110f=_0x368169['data']()['position'];_0xd9e41e['update'](_0x4c457c,{'position':_0x3e110f+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x3aa685){const _0x49d893=doc(collection(db,_0x9fce5b));_0xd9e41e[_0x5abfd5(0x268)](_0x49d893,{'playerId':_0x5e1b9b,'player':_0x77afcc['winnerUsername'],'previousElo':_0xcdd6ba,'newElo':_0x2a5bd8,'eloChange':_0x2a5bd8-_0xcdd6ba,'opponentId':_0x5b9201,'opponent':_0x77afcc['loserUsername'],'matchResult':_0x5abfd5(0x293),'previousPosition':_0x4fba9b,'newPosition':_0x1cbcb,'positionChange':_0x1cbcb-_0x4fba9b,'matchId':_0x1e3e45,'timestamp':_0x342724,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x5abfd5(0x25c)]['uid'],'gameMode':_0x920a02,'matchScore':_0x77afcc[_0x5abfd5(0x28b)]+'-'+_0x77afcc['loserScore'],'mapPlayed':_0x77afcc[_0x5abfd5(0x244)]||_0x77afcc['mapName']||_0x5abfd5(0x2f5),'note':_0x5abfd5(0x1ba)});}if(!_0x5608cb){const _0x452816=doc(collection(db,_0x9fce5b));_0xd9e41e['set'](_0x452816,{'playerId':_0x5b9201,'player':_0x77afcc['loserUsername'],'previousElo':_0x2e9da2,'newElo':_0x3531f5,'eloChange':_0x3531f5-_0x2e9da2,'opponentId':_0x5e1b9b,'opponent':_0x77afcc['winnerUsername'],'matchResult':_0x5abfd5(0x1af),'previousPosition':_0x58e042,'newPosition':_0x35981e,'positionChange':_0x35981e-_0x58e042,'matchId':_0x1e3e45,'timestamp':_0x342724,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x920a02,'matchScore':_0x77afcc['winnerScore']+'-'+_0x77afcc['loserScore'],'mapPlayed':_0x77afcc['mapPlayed']||_0x77afcc['mapName']||_0x5abfd5(0x2f5),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x317b60=_0x920a02==='D1'?'approvedMatches':_0x920a02==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0xf17c5e=doc(db,_0x317b60,_0x1e3e45);_0xd9e41e['update'](_0xf17c5e,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x1f8f06['eloRating'],'originalLoserElo':_0x1b448c['eloRating'],'originalWinnerPosition':_0x4fba9b,'originalLoserPosition':_0x58e042,'resimulatedWinnerElo':_0x2a5bd8,'resimulatedLoserElo':_0x3531f5,'resimulatedWinnerPosition':_0x1cbcb,'resimulatedLoserPosition':_0x35981e}),await _0xd9e41e['commit']();const _0x54d8ac=(!_0x3aa685?0x1:0x0)+(!_0x5608cb?0x1:0x0),_0x50fc20=_0x4fba9b!==_0x1cbcb||_0x58e042!==_0x35981e;showNotification('Match\x20resimulated\x20successfully!\x20'+(_0x5abfd5(0x1ae)+_0x54d8ac+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0xcdd6ba+'→'+_0x2a5bd8+_0x5abfd5(0x279)+(_0x2a5bd8-_0xcdd6ba)+_0x5abfd5(0x2bd))+('Loser\x20'+_0x2e9da2+'→'+_0x3531f5+'\x20('+(_0x3531f5-_0x2e9da2)+').\x20')+(''+(_0x50fc20?'Positions\x20updated:\x20Winner\x20'+_0x4fba9b+'→'+_0x1cbcb+_0x5abfd5(0x229)+_0x58e042+'→'+_0x35981e:'No\x20position\x20changes\x20needed.')),_0x5abfd5(0x299)),closeResimulateModal(),document[_0x5abfd5(0x30b)]('#players.content-section.active')&&loadPlayersData();}catch(_0x2e4294){console[_0x5abfd5(0x2cd)](_0x5abfd5(0x2ee),_0x2e4294),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x2e4294[_0x5abfd5(0x177)],'error');}}async function getPlayerEloAtTime(_0x2997c1,_0xc1e757,_0x32c7f5){const _0x4ca109=a2_0xf5ca78;try{const _0x538609=_0xc1e757[_0x4ca109(0x20a)]?_0xc1e757['toDate']():new Date(_0xc1e757),_0x1d6528=query(collection(db,_0x32c7f5),where('playerId','==',_0x2997c1),where('timestamp','<',_0xc1e757),orderBy('timestamp',_0x4ca109(0x2d8)),limit(0x1)),_0x3fedc7=await getDocs(_0x1d6528);if(!_0x3fedc7['empty']){const _0x52d247=_0x3fedc7['docs'][0x0]['data']();return console[_0x4ca109(0x233)](_0x4ca109(0x347)+_0x2997c1+_0x4ca109(0x353)+_0x52d247['newElo']),_0x52d247['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x2997c1+_0x4ca109(0x170)),0x4b0;}catch(_0x4c74c2){return console[_0x4ca109(0x2cd)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x2997c1+':',_0x4c74c2),0x4b0;}}function openResimulateModal(){const _0x12129c=a2_0xf5ca78;console['log']('openResimulateModal\x20called!');const _0x5347fc=document['getElementById'](_0x12129c(0x39e));console[_0x12129c(0x233)]('Modal\x20element\x20found:',_0x5347fc);if(!_0x5347fc){console[_0x12129c(0x2cd)]('Modal\x20element\x20not\x20found!');return;}_0x5347fc['style']['display']=_0x12129c(0x27d),_0x5347fc[_0x12129c(0x23f)]['visibility']='visible',_0x5347fc['style']['opacity']='1',_0x5347fc[_0x12129c(0x377)]['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console[_0x12129c(0x233)]('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x5347fc)[_0x12129c(0x2e4)]);const _0x44d963=document[_0x12129c(0x211)]('match-details-container'),_0x2c2c93=document[_0x12129c(0x211)]('validation-results-container'),_0x1b8999=document['getElementById']('confirm-resimulate-btn'),_0x46682e=document[_0x12129c(0x211)]('resimulate-match-id');if(_0x44d963)_0x44d963['innerHTML']='';if(_0x2c2c93)_0x2c2c93['innerHTML']='';if(_0x1b8999)_0x1b8999['style']['display']='none';if(_0x46682e)_0x46682e['value']='';console['log'](_0x12129c(0x2aa));}function closeResimulateModal(){const _0x124f58=a2_0xf5ca78;document['getElementById']('resimulate-modal')['style']['display']='none',window[_0x124f58(0x397)]=null;}window['resimulateMatch']=resimulateMatch,window[a2_0xf5ca78(0x1c3)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x3b0851=a2_0xf5ca78;console[_0x3b0851(0x233)]('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully',_0x3b0851(0x299));}catch(_0x24da24){console[_0x3b0851(0x2cd)]('Error\x20loading\x20points\x20data:',_0x24da24),showNotification(_0x3b0851(0x38e)+_0x24da24['message'],_0x3b0851(0x2cd));}}function renderPointsOverview(_0x3359c5){const _0x30163e=a2_0xf5ca78,_0xd58c72=document[_0x30163e(0x211)]('points-overview-table-body');if(!_0xd58c72)return;if(_0x3359c5[_0x30163e(0x267)]===0x0){_0xd58c72[_0x30163e(0x17c)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0xd58c72[_0x30163e(0x17c)]='',_0x3359c5['forEach'](_0x59bd11=>{const _0x1e144b=_0x30163e,_0x280885=document['createElement']('tr'),_0x1506f5=_0x59bd11[_0x1e144b(0x219)]||_0x59bd11['username']||_0x1e144b(0x220),_0x3d72f0=_0x59bd11['email']||'No\x20email',_0x1d05a0=_0x59bd11[_0x1e144b(0x1f3)]||0x0,_0x3ba239=_0x59bd11['lastPointsModified']?new Date(_0x59bd11['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x280885['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x1506f5+_0x1e144b(0x389)+_0x3d72f0+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x1d05a0>0x3e8?'high-points':_0x1d05a0>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x1d05a0['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ba239+_0x1e144b(0x2b3)+_0x59bd11['id']+_0x1e144b(0x1ea)+_0x59bd11['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xd58c72['appendChild'](_0x280885);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x90c31=a2_0xf5ca78;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x321199=document[_0x90c31(0x19c)]('.quick-edit-btn');console['log']('Found\x20'+_0x321199[_0x90c31(0x267)]+'\x20quick\x20edit\x20buttons'),_0x321199['forEach'](_0x2051e9=>{const _0x3a3216=_0x90c31,_0x201276=_0x2051e9[_0x3a3216(0x30e)](!![]);_0x2051e9[_0x3a3216(0x323)]['replaceChild'](_0x201276,_0x2051e9);});const _0x55fc99=document[_0x90c31(0x19c)](_0x90c31(0x320));console[_0x90c31(0x233)]('Found\x20'+_0x55fc99['length']+_0x90c31(0x1d2)),_0x55fc99['forEach'](_0x2de7be=>{const _0x24cb0d=_0x2de7be['cloneNode'](!![]);_0x2de7be['parentNode']['replaceChild'](_0x24cb0d,_0x2de7be);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x1107bd=>{const _0x4d6804=_0x90c31;_0x1107bd[_0x4d6804(0x1b4)](_0x4d6804(0x2d3),function(_0x142dee){const _0x4e4686=_0x4d6804;_0x142dee['preventDefault'](),_0x142dee['stopPropagation']();const _0x331e72=this['dataset'][_0x4e4686(0x1f7)];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x331e72);if(!_0x331e72){console[_0x4e4686(0x2cd)](_0x4e4686(0x37e));return;}this[_0x4e4686(0x23f)][_0x4e4686(0x1e6)]='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x331e72);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x4bfb4c=>{const _0x11875b=_0x90c31;_0x4bfb4c[_0x11875b(0x1b4)](_0x11875b(0x2d3),function(_0x3386f4){const _0x3fbfa0=_0x11875b;_0x3386f4['preventDefault'](),_0x3386f4['stopPropagation']();const _0x25db57=this['dataset']['userId'];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x25db57);if(!_0x25db57){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x3fbfa0(0x23f)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x25db57);});}),console[_0x90c31(0x233)]('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x18082b){const _0x2e0a8d=a2_0xf5ca78;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x18082b);const _0x1637b8=document['getElementById'](_0x2e0a8d(0x2da));if(!_0x1637b8){console['error'](_0x2e0a8d(0x322)),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page',_0x2e0a8d(0x2cd));return;}try{showNotification('Loading\x20user\x20data...','info');const _0x897908=doc(db,'userProfiles',_0x18082b),_0x16edda=await getDoc(_0x897908);if(!_0x16edda['exists']()){showNotification('User\x20not\x20found','error');return;}const _0x327a5d=_0x16edda[_0x2e0a8d(0x349)]();console[_0x2e0a8d(0x233)](_0x2e0a8d(0x325),_0x327a5d);const _0x52e1a9=document['getElementById'](_0x2e0a8d(0x1a7)),_0x5f3550=document[_0x2e0a8d(0x211)](_0x2e0a8d(0x2dc)),_0x115b56=document[_0x2e0a8d(0x211)](_0x2e0a8d(0x248)),_0x2ec7ff=document['getElementById']('quick-edit-current-points'),_0x58d11c=document['getElementById']('quick-edit-points-form');if(!_0x52e1a9||!_0x5f3550||!_0x115b56||!_0x2ec7ff||!_0x58d11c){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x2e0a8d(0x395),'error');return;}_0x52e1a9[_0x2e0a8d(0x18b)]=_0x18082b,_0x5f3550[_0x2e0a8d(0x37c)]=_0x327a5d['displayName']||_0x327a5d['username']||_0x2e0a8d(0x220),_0x115b56[_0x2e0a8d(0x37c)]=_0x327a5d[_0x2e0a8d(0x1ff)]||_0x2e0a8d(0x290),_0x2ec7ff['textContent']=(_0x327a5d['points']||0x0)['toLocaleString'](),_0x58d11c['reset']();const _0x44a54d=document['getElementById']('quick-add');_0x44a54d&&(_0x44a54d[_0x2e0a8d(0x15a)]=!![]);_0x1637b8[_0x2e0a8d(0x377)][_0x2e0a8d(0x1f1)](_0x2e0a8d(0x36c)),console['log'](_0x2e0a8d(0x2ff));const _0x5f0a27=document['getElementById'](_0x2e0a8d(0x249));_0x5f0a27&&setTimeout(()=>_0x5f0a27[_0x2e0a8d(0x2d7)](),0x64);}catch(_0x4279eb){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x4279eb),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x4279eb['message'],_0x2e0a8d(0x2cd));}}function closeQuickEditModal(){const _0x2fe3dc=a2_0xf5ca78,_0xb6332=document['getElementById'](_0x2fe3dc(0x2da));_0xb6332&&_0xb6332['classList']['remove']('active');}async function handleQuickEditPoints(_0x4e9f51){const _0x4cfa73=a2_0xf5ca78;_0x4e9f51[_0x4cfa73(0x390)]();const _0x25f2de=document[_0x4cfa73(0x211)](_0x4cfa73(0x1a7))[_0x4cfa73(0x18b)],_0xff574a=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0x3de3fb=parseInt(document['getElementById']('quick-points-amount')['value']),_0x5a6a36=document['getElementById']('quick-points-reason')['value']['trim']();console['log'](_0x4cfa73(0x33a),{'userId':_0x25f2de,'action':_0xff574a,'amount':_0x3de3fb,'reason':_0x5a6a36});if(!_0x25f2de||!_0x3de3fb||_0x3de3fb<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x25f2de,_0xff574a,_0x3de3fb,_0x5a6a36),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x4cfa73(0x1ad),'success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x25f2de);}catch(_0x3381e3){console['error']('Error\x20updating\x20points:',_0x3381e3),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x3381e3[_0x4cfa73(0x177)],'error');}}async function searchUsersForPoints(){const _0x1da96f=a2_0xf5ca78,_0x330afb=document['getElementById']('points-user-search')[_0x1da96f(0x18b)][_0x1da96f(0x2ae)]()['toLowerCase'](),_0x2d4ec0=document['getElementById'](_0x1da96f(0x234));if(!_0x330afb||_0x330afb[_0x1da96f(0x267)]<0x2){_0x2d4ec0['innerHTML']='';return;}_0x2d4ec0[_0x1da96f(0x17c)]='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x2d6f84=collection(db,'userProfiles'),_0x4c3c8e=await getDocs(_0x2d6f84),_0x32e047=[];_0x4c3c8e['forEach'](_0x3603e2=>{const _0x1a09b9=_0x1da96f,_0x52909f=_0x3603e2[_0x1a09b9(0x349)](),_0x9017e1=(_0x52909f[_0x1a09b9(0x219)]||_0x52909f['username']||'')[_0x1a09b9(0x20d)](),_0xf1c6b1=(_0x52909f['email']||'')[_0x1a09b9(0x20d)]();(_0x9017e1['includes'](_0x330afb)||_0xf1c6b1['includes'](_0x330afb))&&_0x32e047[_0x1a09b9(0x1da)]({'id':_0x3603e2['id'],..._0x52909f});});if(_0x32e047[_0x1da96f(0x267)]===0x0){_0x2d4ec0['innerHTML']=_0x1da96f(0x1c4);return;}_0x2d4ec0[_0x1da96f(0x17c)]='',_0x32e047['forEach'](_0x57b5a9=>{const _0xadd383=_0x1da96f,_0x1d2cf0=document['createElement']('div');_0x1d2cf0['className']='search-result-item',_0x1d2cf0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x57b5a9['displayName']||_0x57b5a9['username']||_0xadd383(0x2f5))+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x57b5a9[_0xadd383(0x1ff)]||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x57b5a9['points']||0x0)['toLocaleString']()+_0xadd383(0x2c2),_0x1d2cf0['addEventListener']('click',()=>selectUserForPoints(_0x57b5a9)),_0x2d4ec0['appendChild'](_0x1d2cf0);});}catch(_0x801285){console['error']('Error\x20searching\x20users:',_0x801285),_0x2d4ec0[_0x1da96f(0x17c)]=_0x1da96f(0x1df);}}function selectUserForPoints(_0x1b98ed){const _0x47df0f=a2_0xf5ca78;document['getElementById'](_0x47df0f(0x257))['textContent']=_0x1b98ed['displayName']||_0x1b98ed['username']||'Unknown\x20User',document['getElementById']('selected-user-points')['textContent']=(_0x1b98ed['points']||0x0)['toLocaleString'](),document[_0x47df0f(0x211)](_0x47df0f(0x23e))['value']=_0x1b98ed['id'],document[_0x47df0f(0x211)]('selected-user-info')['style'][_0x47df0f(0x2e4)]='block',document['getElementById']('points-management-forms')['style'][_0x47df0f(0x2e4)]='block',document[_0x47df0f(0x211)](_0x47df0f(0x234))[_0x47df0f(0x17c)]='',document['getElementById'](_0x47df0f(0x1fe))['value']='';}async function handleModifyPoints(_0x36977d){const _0xcb5335=a2_0xf5ca78;_0x36977d['preventDefault']();const _0x312b1c=document['getElementById']('selected-user-id')['value'],_0x1b2dc8=document['getElementById']('points-action')['value'],_0x41a1cc=parseInt(document[_0xcb5335(0x211)]('points-amount')[_0xcb5335(0x18b)]),_0x58d7a7=document[_0xcb5335(0x211)](_0xcb5335(0x1c9))[_0xcb5335(0x18b)][_0xcb5335(0x2ae)]();if(!_0x312b1c||!_0x41a1cc||_0x41a1cc<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x312b1c,_0x1b2dc8,_0x41a1cc,_0x58d7a7),document['getElementById']('modify-points-form')['reset']();const _0x3603a5=doc(db,_0xcb5335(0x29d),_0x312b1c),_0x1dcf7e=await getDoc(_0x3603a5);if(_0x1dcf7e['exists']()){const _0x4ffd70=_0x1dcf7e[_0xcb5335(0x349)]();document['getElementById']('selected-user-points')['textContent']=(_0x4ffd70['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x28f2db){console[_0xcb5335(0x2cd)]('Error\x20modifying\x20points:',_0x28f2db),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x28f2db[_0xcb5335(0x177)],_0xcb5335(0x2cd));}}async function loadPointsHistory(){const _0x27050c=a2_0xf5ca78,_0x2eefeb=document['getElementById'](_0x27050c(0x1cf));if(!_0x2eefeb)return;_0x2eefeb[_0x27050c(0x17c)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x2aa41c=collection(db,_0x27050c(0x340)),_0x2ea5fa=query(_0x2aa41c,orderBy('timestamp','desc'),limit(0x32)),_0x8e98e8=await getDocs(_0x2ea5fa);if(_0x8e98e8[_0x27050c(0x370)]){_0x2eefeb[_0x27050c(0x17c)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x2eefeb['innerHTML']='',_0x8e98e8[_0x27050c(0x2ba)](_0x483580=>{const _0xb2f318=_0x27050c,_0x57ed42=_0x483580['data'](),_0x13b8ba=document[_0xb2f318(0x1fa)]('tr'),_0x2f6dfc=_0x57ed42['timestamp']?new Date(_0x57ed42[_0xb2f318(0x2e3)]['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x3c1e9a='';switch(_0x57ed42['action']){case _0xb2f318(0x1f1):_0x3c1e9a='Added\x20'+_0x57ed42[_0xb2f318(0x16b)]+'\x20points';break;case'subtract':_0x3c1e9a=_0xb2f318(0x29b)+_0x57ed42['amount']+_0xb2f318(0x281);break;case'set':_0x3c1e9a=_0xb2f318(0x291)+_0x57ed42['amount']+_0xb2f318(0x281);break;default:_0x3c1e9a=_0x57ed42['action']+'\x20'+_0x57ed42['amount']+_0xb2f318(0x281);}_0x13b8ba['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2f6dfc+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x57ed42[_0xb2f318(0x219)]||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c1e9a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x57ed42[_0xb2f318(0x1e9)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x57ed42['previousPoints']||0x0)+'\x20→\x20'+(_0x57ed42['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x57ed42['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x57ed42['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2eefeb['appendChild'](_0x13b8ba);});}catch(_0x36f5ab){console[_0x27050c(0x2cd)]('Error\x20loading\x20points\x20history:',_0x36f5ab),_0x2eefeb['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x36f5ab['message']+'</td></tr>';}}function filterPointsOverview(){const _0x1f3061=a2_0xf5ca78,_0x47b63a=document['getElementById']('points-overview-search')['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x2e2793=window[_0x1f3061(0x2ad)]['filter'](_0x21b1c7=>{const _0x12104e=_0x1f3061,_0xbd7a15=(_0x21b1c7[_0x12104e(0x219)]||_0x21b1c7['username']||'')['toLowerCase'](),_0x4b383c=(_0x21b1c7[_0x12104e(0x1ff)]||'')[_0x12104e(0x20d)]();return _0xbd7a15['includes'](_0x47b63a)||_0x4b383c['includes'](_0x47b63a);});renderPointsOverview(_0x2e2793);}function sortPointsOverview(){const _0x12a364=a2_0xf5ca78,_0x4c8766=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x415742=[...window['allUsersPoints']];switch(_0x4c8766){case _0x12a364(0x187):_0x415742[_0x12a364(0x207)]((_0xe1299d,_0x541404)=>(_0x541404[_0x12a364(0x1f3)]||0x0)-(_0xe1299d['points']||0x0));break;case _0x12a364(0x2c7):_0x415742[_0x12a364(0x207)]((_0x36aced,_0x479f27)=>(_0x36aced['points']||0x0)-(_0x479f27['points']||0x0));break;case'name-asc':_0x415742['sort']((_0x825ddd,_0x4f7d98)=>{const _0x5ccf53=_0x12a364,_0x45341e=(_0x825ddd[_0x5ccf53(0x219)]||_0x825ddd['username']||'')[_0x5ccf53(0x20d)](),_0x539527=(_0x4f7d98['displayName']||_0x4f7d98[_0x5ccf53(0x1a1)]||'')['toLowerCase']();return _0x45341e[_0x5ccf53(0x222)](_0x539527);});break;case'name-desc':_0x415742['sort']((_0x14987e,_0x5659fb)=>{const _0x1cc994=_0x12a364,_0x16443f=(_0x14987e['displayName']||_0x14987e[_0x1cc994(0x1a1)]||'')[_0x1cc994(0x20d)](),_0xfcfcfb=(_0x5659fb['displayName']||_0x5659fb['username']||'')['toLowerCase']();return _0xfcfcfb['localeCompare'](_0x16443f);});break;}renderPointsOverview(_0x415742);}async function handleAwardItem(_0x283e1e){const _0x4cea1b=a2_0xf5ca78;_0x283e1e['preventDefault']();const _0x278296=document['getElementById']('selected-user-id')[_0x4cea1b(0x18b)],_0x2c92e2=document[_0x4cea1b(0x211)](_0x4cea1b(0x17d))['value'],_0x2b08c0=document['getElementById']('award-reason')[_0x4cea1b(0x18b)][_0x4cea1b(0x2ae)]();if(!_0x278296||!_0x2c92e2){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById'](_0x4cea1b(0x2be))['reset']();}catch(_0x20612d){console['error']('Error\x20awarding\x20item:',_0x20612d),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x20612d['message'],'error');}}async function loadUserPointsHistory(_0x2d0a68){const _0x444757=a2_0xf5ca78;try{const _0x34bebe=collection(db,_0x444757(0x340)),_0x2e65a0=query(_0x34bebe,where(_0x444757(0x1f7),'==',_0x2d0a68),orderBy('timestamp','desc')),_0x38171a=await getDocs(_0x2e65a0);console['log']('Found\x20'+_0x38171a[_0x444757(0x26a)]+_0x444757(0x39a)+_0x2d0a68),showNotification('User\x20has\x20'+_0x38171a['size']+'\x20points\x20history\x20entries','info');}catch(_0x73a0d9){console['error'](_0x444757(0x15c),_0x73a0d9),showNotification(_0x444757(0x375),_0x444757(0x2cd));}}async function initializeUserPointsField(){const _0x2dbab9=a2_0xf5ca78;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x3f6842=collection(db,'userProfiles'),_0x17b271=await getDocs(_0x3f6842);if(_0x17b271[_0x2dbab9(0x370)]){console[_0x2dbab9(0x233)]('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x58b85d=0x0,_0x83a868=0x0;const _0x3d6551=writeBatch(db);let _0x2bdbc2=0x0;return console['log'](_0x2dbab9(0x201)+_0x17b271[_0x2dbab9(0x26a)]+_0x2dbab9(0x2d9)),_0x17b271[_0x2dbab9(0x2ba)](_0x650c62=>{const _0x343816=_0x2dbab9,_0x5d0116=_0x650c62['data']();_0x5d0116['points']===undefined||_0x5d0116[_0x343816(0x1f3)]===null?(_0x3d6551['update'](_0x650c62['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x58b85d++,_0x2bdbc2++,console[_0x343816(0x233)](_0x343816(0x2ce)+(_0x5d0116['displayName']||_0x5d0116['username']||_0x5d0116['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x83a868++,console['log']((_0x5d0116['displayName']||_0x5d0116['username']||_0x5d0116['email']||_0x343816(0x2f5))+_0x343816(0x305)+_0x5d0116['points'])),_0x2bdbc2>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x58b85d>0x0?(console[_0x2dbab9(0x233)]('Committing\x20batch\x20update\x20for\x20'+_0x58b85d+'\x20users...'),await _0x3d6551['commit'](),console['log']('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x58b85d+'\x20users')):console[_0x2dbab9(0x233)](_0x2dbab9(0x288)),console['log'](_0x2dbab9(0x364)+_0x17b271['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x58b85d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x83a868),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x58b85d+'\x20users.\x20'+_0x83a868+'\x20users\x20already\x20had\x20points.','success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x17b271['size'],'usersUpdated':_0x58b85d,'usersAlreadyHadPoints':_0x83a868};}catch(_0x6cb77e){console['error'](_0x2dbab9(0x197),_0x6cb77e),showNotification('Error\x20initializing\x20points:\x20'+_0x6cb77e['message'],'error');throw _0x6cb77e;}}function addPointsMigrationButton(){const _0x2b8a75=a2_0xf5ca78,_0x22e7cc=document[_0x2b8a75(0x211)]('manage-points');if(!_0x22e7cc)return;if(document['getElementById']('migrate-points-btn'))return;const _0x377bae=document['createElement'](_0x2b8a75(0x1d3));_0x377bae[_0x2b8a75(0x271)]='migration-section',_0x377bae['style'][_0x2b8a75(0x217)]=_0x2b8a75(0x1bf),_0x377bae['style'][_0x2b8a75(0x1d5)]='15px',_0x377bae['style']['backgroundColor']=_0x2b8a75(0x381),_0x377bae['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x377bae['style'][_0x2b8a75(0x1f6)]='5px',_0x377bae[_0x2b8a75(0x17c)]=_0x2b8a75(0x346);const _0x2f0014=_0x22e7cc['querySelector']('.section-header');_0x2f0014&&_0x2f0014['insertAdjacentElement']('afterend',_0x377bae),document['getElementById']('migrate-points-btn')['addEventListener'](_0x2b8a75(0x2d3),async function(){const _0x496eeb=_0x2b8a75;if(confirm(_0x496eeb(0x175))){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x496eeb(0x17c)]='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x283ca7=_0x496eeb;_0x377bae['style']['display']=_0x283ca7(0x28d);},0xbb8);}catch(_0xfa0edc){this['innerHTML']=_0x496eeb(0x1a4),this[_0x496eeb(0x18d)]=![];}}});}function setupManagePointsSection(){const _0xb59902=a2_0xf5ca78;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x488860=document['getElementById']('points-user-search');_0x488860&&_0x488860['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x84dd25=document['getElementById']('modify-points-form');_0x84dd25&&_0x84dd25['addEventListener']('submit',handleModifyPoints);const _0x32bd5a=document[_0xb59902(0x211)]('award-item-form');_0x32bd5a&&_0x32bd5a['addEventListener']('submit',handleAwardItem);const _0x15025b=document[_0xb59902(0x211)]('points-overview-search');_0x15025b&&_0x15025b['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x2e69e5=document['getElementById'](_0xb59902(0x27c));_0x2e69e5&&_0x2e69e5['addEventListener'](_0xb59902(0x190),sortPointsOverview);const _0x39f9aa=document['getElementById'](_0xb59902(0x312));_0x39f9aa&&_0x39f9aa['addEventListener']('click',loadPointsOverview);const _0x41a450=document[_0xb59902(0x211)]('bulk-award-points-btn');_0x41a450&&_0x41a450['addEventListener']('click',async()=>{const _0x53bb8d=_0xb59902;confirm(_0x53bb8d(0x2a1))&&(_0x41a450['disabled']=!![],_0x41a450['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x420a5f(),_0x41a450['disabled']=![],_0x41a450['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x5e4ea9=document['getElementById']('award-all-pilots-btn');_0x5e4ea9&&_0x5e4ea9['addEventListener']('click',awardPointsToAllPilots);async function _0x420a5f(){const _0x48d68b=_0xb59902;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x5427f6={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'≥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x416b1a=0x0,_0x53e0e2=0x0,_0x18b058=0x0,_0x4165d2=0x0,_0x234555=0x0,_0xb7502b=0x0;const _0x563eaa=new Set(),_0x563bdc=collection(db,'pointsHistory'),_0x2e88a5=query(_0x563bdc,where('reason','>=',_0x48d68b(0x261)),where('reason','<=',_0x48d68b(0x31a))),_0x843380=await getDocs(_0x2e88a5);_0x843380['forEach'](_0x582728=>{const _0x59db78=_0x582728['data'](),_0x283376=_0x59db78['reason']||'',_0x107a63=_0x283376['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x107a63&&_0x107a63[0x1]&&_0x563eaa['add'](_0x107a63[0x1]);}),console['log']('Found\x20'+_0x563eaa['size']+_0x48d68b(0x2c1));const [_0x182d12,_0x20e9a3,_0x5450f0]=await Promise['all']([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0x3c8a01=_0x182d12['size']+_0x20e9a3['size']+_0x5450f0['size'];showNotification('Found\x20'+_0x3c8a01+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x33774d=async(_0x25686e,_0x151348)=>{const _0x6366fe=_0x48d68b;let _0x58977d=writeBatch(db);const _0x1e729b=[];let _0x3c6d5f=0x0;for(const _0x168814 of _0x25686e['docs']){try{if(_0x563eaa['has'](_0x168814['id'])){if(_0x151348==='D1')_0xb7502b++;if(_0x151348==='D2')_0xb7502b++;if(_0x151348==='D3')_0xb7502b++;continue;}const _0x1f8245=_0x168814[_0x6366fe(0x349)](),_0x26e477=_0x1f8245[_0x6366fe(0x1a8)]||'Standard',_0x59941d=_0x5427f6[_0x26e477]||0xa;let _0x50fb95=_0x1f8245['winnerId'];if(!_0x50fb95&&_0x1f8245['winnerUsername']){const [_0x20a1dd,_0x4839d5,_0x523186]=await Promise[_0x6366fe(0x2e0)]([getDocs(query(collection(db,'players'),where(_0x6366fe(0x1a1),'==',_0x1f8245['winnerUsername']))),getDocs(query(collection(db,_0x6366fe(0x254)),where('username','==',_0x1f8245['winnerUsername']))),getDocs(query(collection(db,_0x6366fe(0x367)),where('username','==',_0x1f8245['winnerUsername'])))]);if(!_0x20a1dd[_0x6366fe(0x370)])_0x50fb95=_0x20a1dd['docs'][0x0]['id'];else{if(!_0x4839d5['empty'])_0x50fb95=_0x4839d5[_0x6366fe(0x301)][0x0]['id'];else{if(!_0x523186['empty'])_0x50fb95=_0x523186['docs'][0x0]['id'];}}}let _0x29f772=_0x1f8245['loserId'];if(!_0x29f772&&_0x1f8245['loserUsername']){const [_0x10d506,_0x3b8819,_0x199e53]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x1f8245['loserUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x1f8245['loserUsername']))),getDocs(query(collection(db,'playersD3'),where(_0x6366fe(0x1a1),'==',_0x1f8245[_0x6366fe(0x172)])))]);if(!_0x10d506[_0x6366fe(0x370)])_0x29f772=_0x10d506['docs'][0x0]['id'];else{if(!_0x3b8819[_0x6366fe(0x370)])_0x29f772=_0x3b8819['docs'][0x0]['id'];else{if(!_0x199e53[_0x6366fe(0x370)])_0x29f772=_0x199e53['docs'][0x0]['id'];}}}if(_0x50fb95&&_0x29f772){const _0x1d5d0e=doc(db,'userProfiles',_0x50fb95),_0x16edd5=doc(db,_0x6366fe(0x29d),_0x29f772),[_0xa438d9,_0x162646]=await Promise['all']([getDoc(_0x1d5d0e),getDoc(_0x16edd5)]);if(_0xa438d9['exists']()){const _0x2e8bdd=_0xa438d9[_0x6366fe(0x349)](),_0x3e5e89=_0x2e8bdd[_0x6366fe(0x1f3)]||0x0;_0x58977d['update'](_0x1d5d0e,{'points':_0x3e5e89+_0x59941d,'lastPointsModified':serverTimestamp()}),_0x1e729b['push']({'userId':_0x50fb95,'userEmail':_0x2e8bdd['email']||'unknown','displayName':_0x2e8bdd['displayName']||_0x1f8245['winnerUsername']||'Unknown\x20User','action':'add','amount':_0x59941d,'previousPoints':_0x3e5e89,'newPoints':_0x3e5e89+_0x59941d,'reason':'Bulk\x20award:\x20'+_0x26e477+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x168814['id']+'\x20-\x20'+_0x151348,'adminEmail':auth[_0x6366fe(0x25c)]['email'],'timestamp':serverTimestamp()});}if(_0x162646[_0x6366fe(0x338)]()){const _0x4cf49f=_0x162646['data'](),_0x4693cb=_0x4cf49f['points']||0x0;_0x58977d['update'](_0x16edd5,{'points':_0x4693cb+_0x59941d,'lastPointsModified':serverTimestamp()}),_0x1e729b[_0x6366fe(0x1da)]({'userId':_0x29f772,'userEmail':_0x4cf49f['email']||_0x6366fe(0x26e),'displayName':_0x4cf49f['displayName']||_0x1f8245['loserUsername']||'Unknown\x20User','action':_0x6366fe(0x1f1),'amount':_0x59941d,'previousPoints':_0x4693cb,'newPoints':_0x4693cb+_0x59941d,'reason':'Bulk\x20award:\x20'+_0x26e477+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x168814['id']+_0x6366fe(0x2b9)+_0x151348,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x4165d2+=_0x59941d*0x2,_0x3c6d5f+=0x2,_0x563eaa['add'](_0x168814['id']);if(_0x3c6d5f>=0x190){await _0x58977d['commit']();for(const _0x581906 of _0x1e729b){await addDoc(collection(db,'pointsHistory'),_0x581906);}_0x58977d=writeBatch(db),_0x3c6d5f=0x0,_0x1e729b['length']=0x0;}}}catch(_0x5de6a8){console['error']('Error\x20processing\x20'+_0x151348+'\x20match\x20'+_0x168814['id']+':',_0x5de6a8),_0x234555++;}}if(_0x3c6d5f>0x0){await _0x58977d['commit']();for(const _0x597553 of _0x1e729b){await addDoc(collection(db,'pointsHistory'),_0x597553);}}return{'processed':_0x151348==='D1'?_0x416b1a:_0x151348==='D2'?_0x53e0e2:_0x18b058};};await _0x33774d(_0x182d12,'D1'),await _0x33774d(_0x20e9a3,'D2'),await _0x33774d(_0x5450f0,'D3'),showNotification('Completed!\x20Processed\x20'+_0x416b1a+'\x20D1\x20matches,\x20'+_0x53e0e2+'\x20D2\x20matches,\x20'+_0x18b058+'\x20D3\x20matches.\x20'+('Awarded\x20'+_0x4165d2+'\x20points.\x20Skipped\x20'+_0xb7502b+_0x48d68b(0x191)+_0x234555),_0x48d68b(0x299)),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x4c91af){console[_0x48d68b(0x2cd)]('Error\x20in\x20bulk\x20award\x20points:',_0x4c91af),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x4c91af['message'],_0x48d68b(0x2cd));}}const _0x4dc228=document[_0xb59902(0x211)]('quick-edit-points-modal');if(_0x4dc228){console[_0xb59902(0x233)]('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x537605=_0x4dc228['querySelector']('.close-btn');_0x537605?_0x537605['addEventListener']('click',function(){const _0x3260ad=_0xb59902;console[_0x3260ad(0x233)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x481dad=document[_0xb59902(0x211)]('cancel-quick-edit');_0x481dad?_0x481dad['addEventListener']('click',function(){const _0x5175dc=_0xb59902;console['log'](_0x5175dc(0x1cc)),closeQuickEditModal();}):console[_0xb59902(0x2a3)](_0xb59902(0x306));const _0x1f061e=document[_0xb59902(0x211)]('quick-edit-points-form');_0x1f061e?_0x1f061e['addEventListener'](_0xb59902(0x18e),function(_0x4270c5){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x4270c5);}):console[_0xb59902(0x2cd)]('Quick\x20edit\x20form\x20not\x20found!'),_0x4dc228[_0xb59902(0x1b4)]('click',function(_0x2af72a){_0x2af72a['target']===_0x4dc228&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x55d4ac=a2_0xf5ca78;try{const _0x4cdd74=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x4cdd74||isNaN(_0x4cdd74)){showNotification('Invalid\x20points\x20amount','error');return;}if(!confirm('This\x20will\x20award\x20'+_0x4cdd74+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification(_0x55d4ac(0x2b7),'info');const [_0x4e2686,_0x910073,_0x4e54a4]=await Promise['all']([getDocs(collection(db,_0x55d4ac(0x185))),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x55d4ac(0x367)))]);console['log']('Found\x20'+_0x4e2686['size']+'\x20D1\x20pilots,\x20'+_0x910073['size']+'\x20D2\x20pilots,\x20'+_0x4e54a4['size']+'\x20D3\x20pilots');const _0x4a47fb=_0x4e2686['size']+_0x910073['size']+_0x4e54a4['size'],_0x7973e=new Map();_0x4e2686['forEach'](_0x26b11e=>{const _0x3f66e4=_0x55d4ac,_0x54862d=_0x26b11e[_0x3f66e4(0x349)]();_0x7973e['set'](_0x26b11e['id'],{'username':_0x54862d['username'],'ladder':'D1'});}),_0x910073[_0x55d4ac(0x2ba)](_0x360f0b=>{const _0x17b40d=_0x360f0b['data']();_0x7973e['set'](_0x360f0b['id'],{'username':_0x17b40d['username'],'ladder':'D2'});}),_0x4e54a4['forEach'](_0x1a1517=>{const _0x5ddc4b=_0x55d4ac,_0x4d21ec=_0x1a1517['data']();_0x7973e[_0x5ddc4b(0x268)](_0x1a1517['id'],{'username':_0x4d21ec[_0x5ddc4b(0x1a1)],'ladder':'D3'});}),console['log']('Found\x20'+_0x7973e[_0x55d4ac(0x26a)]+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x5c1126=0x0,_0x4ac4ab=0x0,_0x3be432=0x0;const _0x1c0bb4=Array[_0x55d4ac(0x396)](_0x7973e['keys']()),_0x4611fd=0x190;for(let _0x291e75=0x0;_0x291e75<_0x1c0bb4['length'];_0x291e75+=_0x4611fd){const _0x304933=writeBatch(db),_0xec03c8=[],_0x60be85=_0x1c0bb4['slice'](_0x291e75,_0x291e75+_0x4611fd),_0x491dfb=await Promise['all'](_0x60be85['map'](_0x23e548=>getDoc(doc(db,'userProfiles',_0x23e548))));for(let _0x2c43ab=0x0;_0x2c43ab<_0x60be85['length'];_0x2c43ab++){try{const _0x4739ed=_0x60be85[_0x2c43ab],_0x512085=_0x7973e['get'](_0x4739ed),_0x192897=_0x491dfb[_0x2c43ab];if(_0x192897['exists']()){const _0x3e7f69=_0x192897[_0x55d4ac(0x349)](),_0x3ad11e=_0x3e7f69['points']||0x0,_0x1767e1=_0x3ad11e+_0x4cdd74;_0x304933['update'](doc(db,'userProfiles',_0x4739ed),{'points':_0x1767e1,'lastPointsModified':serverTimestamp()}),_0xec03c8[_0x55d4ac(0x1da)]({'userId':_0x4739ed,'userEmail':_0x3e7f69['email']||'unknown','displayName':_0x3e7f69['displayName']||_0x512085[_0x55d4ac(0x1a1)]||_0x55d4ac(0x220),'action':'add','amount':_0x4cdd74,'previousPoints':_0x3ad11e,'newPoints':_0x1767e1,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x512085['ladder']+')','adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()}),_0x4ac4ab+=_0x4cdd74,_0x5c1126++;}else _0x3be432++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x512085['username']+'\x20('+_0x4739ed+')');}catch(_0x43dd0e){_0x3be432++,console[_0x55d4ac(0x2cd)]('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x43dd0e);}}await _0x304933['commit']();for(const _0x954034 of _0xec03c8){await addDoc(collection(db,'pointsHistory'),_0x954034);}showNotification('Processed\x20'+_0x5c1126+'/'+_0x4a47fb+'\x20pilots...',_0x55d4ac(0x359));}showNotification(_0x55d4ac(0x1d1)+_0x4ac4ab+'\x20points\x20to\x20'+_0x5c1126+_0x55d4ac(0x366)+_0x3be432,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x45507f){console['error']('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x45507f),showNotification('Error:\x20'+_0x45507f['message'],'error');}}function setupManageRibbonsSection(){const _0x301f29=a2_0xf5ca78;console[_0x301f29(0x233)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x8220bf=document[_0x301f29(0x211)]('ribbon-user-search');_0x8220bf&&_0x8220bf['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x2f3665=document['getElementById'](_0x301f29(0x262));_0x2f3665&&_0x2f3665['addEventListener']('click',searchRibbonUser);const _0x27eaa6=document[_0x301f29(0x211)](_0x301f29(0x2dd));_0x27eaa6&&_0x27eaa6['addEventListener'](_0x301f29(0x18e),addRibbon),_0x8220bf&&_0x8220bf[_0x301f29(0x1b4)](_0x301f29(0x3ac),function(_0x2e627a){_0x2e627a['key']==='Enter'&&(_0x2e627a['preventDefault'](),searchRibbonUser());}),console[_0x301f29(0x233)]('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x27e02b,_0x49c307,_0x28a08e,_0x24b57f=''){const _0x296770=a2_0xf5ca78,_0x20fbcc=doc(db,'userProfiles',_0x27e02b),_0x32db0e=await getDoc(_0x20fbcc);if(!_0x32db0e['exists']())throw new Error('User\x20not\x20found');const _0x4128b2=_0x32db0e[_0x296770(0x349)](),_0x2ebc7e=_0x4128b2['points']!==undefined?_0x4128b2[_0x296770(0x1f3)]:0x0;_0x4128b2['points']===undefined&&(console['log'](_0x296770(0x394)+(_0x4128b2['displayName']||_0x4128b2[_0x296770(0x1ff)]||'Unknown')),await updateDoc(_0x20fbcc,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0xb22330=_0x2ebc7e;switch(_0x49c307){case _0x296770(0x1f1):_0xb22330=_0x2ebc7e+_0x28a08e;break;case'subtract':_0xb22330=Math[_0x296770(0x1cb)](0x0,_0x2ebc7e-_0x28a08e);break;case _0x296770(0x268):_0xb22330=_0x28a08e;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x20fbcc,{'points':_0xb22330,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x27e02b,'userEmail':_0x4128b2['email']||'unknown','displayName':_0x4128b2[_0x296770(0x219)]||_0x4128b2[_0x296770(0x1a1)]||'Unknown\x20User','action':_0x49c307,'amount':_0x28a08e,'previousPoints':_0x2ebc7e,'newPoints':_0xb22330,'reason':_0x24b57f,'adminEmail':auth['currentUser'][_0x296770(0x1ff)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x3fb7ab=a2_0xf5ca78,_0x3c1ca7=document['getElementById']('points-overview-table-body');if(!_0x3c1ca7)return;_0x3c1ca7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x100b2c=collection(db,_0x3fb7ab(0x29d)),_0x1bbe5c=await getDocs(_0x100b2c);if(_0x1bbe5c['empty']){_0x3c1ca7['innerHTML']=_0x3fb7ab(0x1f0);return;}const _0x32455a=[];let _0x488067=0x0;_0x1bbe5c[_0x3fb7ab(0x2ba)](_0x423d97=>{const _0x2f9f19=_0x3fb7ab,_0x5e0c07=_0x423d97[_0x2f9f19(0x349)](),_0x3ef81a=_0x5e0c07['points']!==undefined?_0x5e0c07['points']:0x0;_0x5e0c07['points']===undefined&&_0x488067++,_0x32455a['push']({'id':_0x423d97['id'],..._0x5e0c07,'points':_0x3ef81a});}),_0x488067>0x0&&(console['log']('Found\x20'+_0x488067+_0x3fb7ab(0x37d)),showNotification(_0x488067+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x32455a['sort']((_0x3c3a37,_0x4558da)=>(_0x4558da['points']||0x0)-(_0x3c3a37['points']||0x0)),window['allUsersPoints']=_0x32455a,renderPointsOverview(_0x32455a);}catch(_0x2caca0){console['error'](_0x3fb7ab(0x259),_0x2caca0),_0x3c1ca7[_0x3fb7ab(0x17c)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x2caca0['message']+_0x3fb7ab(0x1d0);}}async function loadRibbonsData(){const _0x1bc7aa=a2_0xf5ca78,_0x4e1e45=document['getElementById']('ribbons-overview-table-body');if(!_0x4e1e45)return;_0x4e1e45[_0x1bc7aa(0x17c)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x253418,_0x3e6752,_0x56a3be]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x4e1e45['innerHTML']='';const _0x16ad4d=(_0x1f51f6,_0x40c022)=>{_0x1f51f6['forEach'](_0x573892=>{const _0x3ca1aa=a2_0x5154,_0xa76669=_0x573892['data'](),_0x1dc64a=_0xa76669['ribbons']||{},_0xd00c37=Object['keys'](_0x1dc64a)[_0x3ca1aa(0x267)],_0x353838=document['createElement']('tr');_0x353838[_0x3ca1aa(0x17c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xa76669['username']||_0x3ca1aa(0x2f5))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x40c022['toLowerCase']()+'\x22>'+_0x40c022+_0x3ca1aa(0x2b2)+_0xd00c37+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xa76669['lastUpdated']?new Date(_0xa76669[_0x3ca1aa(0x386)]['seconds']*0x3e8)['toLocaleDateString']():_0x3ca1aa(0x2f5))+_0x3ca1aa(0x321)+_0xa76669['username']+_0x3ca1aa(0x1ab)+_0x40c022+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4e1e45[_0x3ca1aa(0x383)](_0x353838);});};_0x16ad4d(_0x253418,'D1'),_0x16ad4d(_0x3e6752,'D2'),_0x16ad4d(_0x56a3be,'D3'),document[_0x1bc7aa(0x19c)]('.edit-ribbons-btn')['forEach'](_0x246ce2=>{_0x246ce2['addEventListener']('click',function(){const _0x5008b2=a2_0x5154,_0x3a655c=this['dataset']['username'],_0x23d9f7=this['dataset'][_0x5008b2(0x337)];editUserRibbons(_0x3a655c,_0x23d9f7);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x47f308){console[_0x1bc7aa(0x2cd)]('Error\x20loading\x20ribbons:',_0x47f308),_0x4e1e45['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x13115a=a2_0xf5ca78,_0x23ec22=document['getElementById'](_0x13115a(0x26c))['value']['trim']();if(!_0x23ec22){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x5da7f1,_0x9c2ad4,_0x2c0a11]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x23ec22)),getDoc(doc(db,'playerRibbonsD2',_0x23ec22)),getDoc(doc(db,'playerRibbonsD3',_0x23ec22))]);let _0x561bcc=null,_0x4b5391=null;if(_0x5da7f1['exists']())_0x561bcc='D1',_0x4b5391=_0x5da7f1['data']();else{if(_0x9c2ad4['exists']())_0x561bcc='D2',_0x4b5391=_0x9c2ad4[_0x13115a(0x349)]();else _0x2c0a11[_0x13115a(0x338)]()&&(_0x561bcc='D3',_0x4b5391=_0x2c0a11['data']());}_0x561bcc?(document['getElementById']('current-ribbon-user')[_0x13115a(0x37c)]=_0x23ec22,document['getElementById'](_0x13115a(0x216))['value']=_0x23ec22,document['getElementById']('ribbon-target-ladder')['value']=_0x561bcc,document['getElementById']('user-ribbon-management')['style']['display']=_0x13115a(0x27d),displayCurrentRibbons(_0x4b5391['ribbons']||{}),showNotification('Found\x20'+_0x23ec22+'\x20in\x20'+_0x561bcc+_0x13115a(0x334),'success')):showNotification(_0x13115a(0x1e7)+_0x23ec22+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x4516e4){console['error']('Error\x20searching\x20user:',_0x4516e4),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x9365ba){const _0x37a7d1=a2_0xf5ca78,_0x3ae8ee=document['getElementById']('current-ribbons-list');if(!_0x3ae8ee)return;_0x3ae8ee[_0x37a7d1(0x17c)]='';if(Object['keys'](_0x9365ba)['length']===0x0){_0x3ae8ee['innerHTML']=_0x37a7d1(0x2b8);return;}Object['entries'](_0x9365ba)['forEach'](([_0x4600a3,_0x36127b])=>{const _0x260ba1=_0x37a7d1,_0x2b791e=document[_0x260ba1(0x1fa)]('div');_0x2b791e['className']='ribbon-item',_0x2b791e[_0x260ba1(0x17c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x4600a3+_0x260ba1(0x348)+(_0x36127b['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x36127b['awardedAt']?new Date(_0x36127b[_0x260ba1(0x2b6)][_0x260ba1(0x245)]*0x3e8)['toLocaleDateString']():_0x260ba1(0x2f5))+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x4600a3+_0x260ba1(0x2e8),_0x3ae8ee['appendChild'](_0x2b791e);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x18fd98=>{_0x18fd98['addEventListener']('click',function(){const _0x3c8ae1=this['dataset']['ribbon'];removeRibbon(_0x3c8ae1);});});}async function addRibbon(_0x4e4da2){const _0x3359dc=a2_0xf5ca78;_0x4e4da2['preventDefault']();const _0x34a18d=document['getElementById']('ribbon-target-user')[_0x3359dc(0x18b)],_0x139aa6=document[_0x3359dc(0x211)]('ribbon-target-ladder')[_0x3359dc(0x18b)],_0x523ade=document['getElementById']('ribbon-type-select')[_0x3359dc(0x18b)],_0x43ee77=parseInt(document[_0x3359dc(0x211)]('ribbon-level')['value']);if(!_0x34a18d||!_0x139aa6||!_0x523ade||!_0x43ee77){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x356329='playerRibbons'+(_0x139aa6==='D1'?'':_0x139aa6),_0x30a7e1=doc(db,_0x356329,_0x34a18d),_0x4644b8=await getDoc(_0x30a7e1),_0xfd91d=_0x4644b8['exists']()?_0x4644b8['data']()['ribbons']||{}:{};_0xfd91d[_0x523ade]={'level':_0x43ee77,'awardedAt':serverTimestamp()},await setDoc(_0x30a7e1,{'username':_0x34a18d,'ladder':_0x139aa6,'ribbons':_0xfd91d,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x523ade+'\x20Level\x20'+_0x43ee77+'\x20to\x20'+_0x34a18d,_0x3359dc(0x299)),displayCurrentRibbons(_0xfd91d),document[_0x3359dc(0x211)]('ribbon-type-select')['value']='',document['getElementById'](_0x3359dc(0x22a))['value']='1';}catch(_0x204834){console['error']('Error\x20adding\x20ribbon:',_0x204834),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x33565b){const _0x28533c=a2_0xf5ca78,_0x2d2105=document['getElementById'](_0x28533c(0x216))['value'],_0x277649=document[_0x28533c(0x211)](_0x28533c(0x258))['value'];if(!confirm(_0x28533c(0x32a)+_0x33565b+'\x20from\x20'+_0x2d2105+'?'))return;try{const _0x15a2ad='playerRibbons'+(_0x277649==='D1'?'':_0x277649),_0x3554d5=doc(db,_0x15a2ad,_0x2d2105),_0x5ce1af=await getDoc(_0x3554d5),_0x3ccb9d=_0x5ce1af['exists']()?_0x5ce1af['data']()['ribbons']||{}:{};delete _0x3ccb9d[_0x33565b],await setDoc(_0x3554d5,{'username':_0x2d2105,'ladder':_0x277649,'ribbons':_0x3ccb9d,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x33565b+'\x20from\x20'+_0x2d2105,'success'),displayCurrentRibbons(_0x3ccb9d);}catch(_0x5d0191){console['error']('Error\x20removing\x20ribbon:',_0x5d0191),showNotification(_0x28533c(0x186),_0x28533c(0x2cd));}}function editUserRibbons(_0x36458d,_0x98fd77){const _0x1cbece=a2_0xf5ca78;document['getElementById']('ribbon-user-search')[_0x1cbece(0x18b)]=_0x36458d,searchRibbonUser();}