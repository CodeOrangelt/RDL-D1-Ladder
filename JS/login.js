function a36_0x2608(){const _0x52b164=['bind','login-email','login-container','Login\x20error:\x20','empty','display','register-error','value','Please\x20unselect\x20a\x20game\x20mode\x20if\x20you\x20choose\x20Non-Participant.','data','style','href','textContent','nonParticipants','Registration\x20error:','gameMode','login-error','playersD2','Error\x20checking\x20username:','register-form','all','position','Login\x20attempt\x20started\x20for:','log','addEventListener','playersDuos','preventDefault','click','../index.html','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Email\x20verified\x20successfully!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','user','toLowerCase','login-password','User\x20found\x20in\x20','innerHTML','error','Found\x20pending\x20registration:','\x27)\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','playersD3','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Setting\x20up\x20your\x20account...\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','test','location','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Registration\x20pending!\x20Please\x20check\x20your\x20email\x20to\x20verify\x20your\x20account.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resendVerificationEmail(\x27','non-participant','warn','User\x20signed\x20in:','toString','verificationCheckInterval','getElementById','trim','username','return\x20(function()\x20','pendingRegistrations','string','Email\x20address\x20is\x20already\x20registered'];a36_0x2608=function(){return _0x52b164;};return a36_0x2608();}const a36_0x4c719f=(function(){let _0x2b470b=!![];return function(_0x2a6cdd,_0x1ca0cb){const _0x273042=_0x2b470b?function(){if(_0x1ca0cb){const _0x5b2698=_0x1ca0cb['apply'](_0x2a6cdd,arguments);return _0x1ca0cb=null,_0x5b2698;}}:function(){};return _0x2b470b=![],_0x273042;};}()),a36_0x55b6e2=a36_0x4c719f(this,function(){const _0x1b8207=a36_0x3e5e;let _0x2d16e2;try{const _0x34eeab=Function(_0x1b8207(0x223)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2d16e2=_0x34eeab();}catch(_0x2cd009){_0x2d16e2=window;}const _0x2506d8=_0x2d16e2['console']=_0x2d16e2['console']||{},_0x425bc1=['log',_0x1b8207(0x21c),'info','error','exception','table','trace'];for(let _0x5b5e58=0x0;_0x5b5e58<_0x425bc1['length'];_0x5b5e58++){const _0x240290=a36_0x4c719f['constructor']['prototype']['bind'](a36_0x4c719f),_0xf29327=_0x425bc1[_0x5b5e58],_0x441738=_0x2506d8[_0xf29327]||_0x240290;_0x240290['__proto__']=a36_0x4c719f[_0x1b8207(0x1f0)](a36_0x4c719f),_0x240290['toString']=_0x441738[_0x1b8207(0x21e)]['bind'](_0x441738),_0x2506d8[_0xf29327]=_0x240290;}});a36_0x55b6e2();import{createUserWithEmailAndPassword,signInWithEmailAndPassword,sendEmailVerification,signOut}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{doc,setDoc,collection,getDocs,query,where,getDoc,updateDoc,deleteDoc,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';function setupVerificationListener(_0x231f8f,_0x16478c){console['log']('Setting\x20up\x20email\x20verification\x20listener\x20for:',_0x231f8f);const _0xaaceda=setInterval(async()=>{const _0x41a52e=a36_0x3e5e;try{console[_0x41a52e(0x207)]('Checking\x20if\x20email\x20has\x20been\x20verified...');const _0x2968e1=await signInWithEmailAndPassword(auth,_0x231f8f,_0x16478c),_0x447eb6=_0x2968e1['user'];await _0x447eb6['getIdToken'](!![]),_0x447eb6['emailVerified']?(console['log']('Email\x20has\x20been\x20verified!\x20Redirecting\x20to\x20login\x20page...'),clearInterval(_0xaaceda),document[_0x41a52e(0x220)](_0x41a52e(0x1f6))[_0x41a52e(0x212)]=_0x41a52e(0x20d),await signOut(auth),setTimeout(()=>{const _0x8f9e50=_0x41a52e;document[_0x8f9e50(0x220)]('register-container')[_0x8f9e50(0x1fa)]['display']='none',document['getElementById'](_0x8f9e50(0x1f2))[_0x8f9e50(0x1fa)]['display']='block',document['getElementById']('login-email')['value']=_0x231f8f,document[_0x8f9e50(0x220)]('login-error')['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Your\x20account\x20has\x20been\x20verified!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';},0x7d0)):(console['log']('Email\x20not\x20yet\x20verified,\x20waiting...'),await signOut(auth));}catch(_0x32cc24){console['error']('Error\x20checking\x20verification\x20status:',_0x32cc24),clearInterval(_0xaaceda);}},0x1388);window['verificationCheckInterval']=_0xaaceda,setTimeout(()=>{const _0x465b03=a36_0x3e5e;window[_0x465b03(0x21f)]&&(clearInterval(window[_0x465b03(0x21f)]),window['verificationCheckInterval']=null,console['log']('Stopped\x20checking\x20for\x20email\x20verification\x20(timeout\x20reached)'));},0x5*0x3c*0x3e8);}function a36_0x3e5e(_0x25ec45,_0x53d4f5){const _0x55b6e2=a36_0x2608();return a36_0x3e5e=function(_0x4c719f,_0xf19401){_0x4c719f=_0x4c719f-0x1f0;let _0x260857=_0x55b6e2[_0x4c719f];return _0x260857;},a36_0x3e5e(_0x25ec45,_0x53d4f5);}async function isUsernameAvailable(_0x2019d6){const _0x45ff2b=a36_0x3e5e;if(!_0x2019d6||typeof _0x2019d6!==_0x45ff2b(0x225)||_0x2019d6['trim']()['length']<0x3)return document['getElementById'](_0x45ff2b(0x1f6))[_0x45ff2b(0x1fc)]='Username\x20must\x20be\x20at\x20least\x203\x20characters\x20long',![];const _0x3b3970=_0x2019d6[_0x45ff2b(0x221)]();try{const _0x185374=/^[a-zA-Z0-9_-]{3,20}$/;if(!_0x185374[_0x45ff2b(0x218)](_0x3b3970))return document[_0x45ff2b(0x220)]('register-error')['textContent']='Username\x20can\x20only\x20contain\x20letters,\x20numbers,\x20underscores\x20and\x20hyphens',![];const [_0x1e851c,_0x343f6b,_0x28783c]=await Promise[_0x45ff2b(0x204)]([getDocs(query(collection(db,'players'),where(_0x45ff2b(0x222),'==',_0x3b3970))),getDocs(query(collection(db,'pendingRegistrations'),where('username','==',_0x3b3970))),getDocs(query(collection(db,_0x45ff2b(0x1fd)),where(_0x45ff2b(0x222),'==',_0x3b3970)))]);if(!_0x1e851c['empty']||!_0x343f6b['empty']||!_0x28783c['empty'])return document[_0x45ff2b(0x220)](_0x45ff2b(0x1f6))[_0x45ff2b(0x1fc)]='Username\x20is\x20already\x20taken',![];return!![];}catch(_0x4c5650){return console['error'](_0x45ff2b(0x202),_0x4c5650),document['getElementById']('register-error')['textContent']='Unable\x20to\x20verify\x20username\x20availability.\x20Please\x20try\x20again\x20later.',![];}}async function handleRegister(_0x372fbf){const _0x1cee1a=a36_0x3e5e;_0x372fbf['preventDefault']();const _0x510791=document['getElementById']('register-error');_0x510791['textContent']='';const _0x29061e=document['getElementById']('register-email')[_0x1cee1a(0x1f7)],_0xcb59ff=document['getElementById']('register-password')[_0x1cee1a(0x1f7)],_0xb7389d=document['getElementById']('register-username')['value'],_0x30f9b7=document['getElementById']('verification-answer')[_0x1cee1a(0x1f7)][_0x1cee1a(0x20f)](),_0x2f7893=document['getElementById']('register-mode')[_0x1cee1a(0x1f7)],_0x310ccd=document['getElementById'](_0x1cee1a(0x21b))?.['checked']||![];if(_0x310ccd&&_0x2f7893!==''){_0x510791['textContent']=_0x1cee1a(0x1f8);return;}if(!_0x310ccd&&_0x2f7893===''){_0x510791[_0x1cee1a(0x1fc)]='Please\x20select\x20a\x20game\x20mode\x20or\x20check\x20Non-Participant.';return;}try{const _0x35346f=['purple','magenta'];if(!_0x35346f['includes'](_0x30f9b7)){_0x510791['textContent']='Incorrect\x20answer\x20to\x20verification\x20question';return;}const _0x34719c=await isUsernameAvailable(_0xb7389d);if(!_0x34719c)return;const _0x381453=await createUserWithEmailAndPassword(auth,_0x29061e,_0xcb59ff),_0x3706e4=_0x381453['user'];await sendEmailVerification(_0x3706e4),await setDoc(doc(db,'pendingRegistrations',_0x3706e4['uid']),{'username':_0xb7389d[_0x1cee1a(0x221)](),'email':_0x29061e,'gameMode':_0x2f7893,'nonParticipant':_0x310ccd,'createdAt':new Date(),'verified':![]}),_0x510791['innerHTML']=_0x1cee1a(0x21a)+_0x29061e+_0x1cee1a(0x215),await signOut(auth),setupVerificationListener(_0x29061e,_0xcb59ff);}catch(_0x17b7b5){console['error'](_0x1cee1a(0x1fe),_0x17b7b5),_0x510791['textContent']=_0x17b7b5['code']==='auth/email-already-in-use'?_0x1cee1a(0x226):'Registration\x20failed.\x20Please\x20try\x20again\x20later.';}}async function handleLogin(_0x4f6e99){const _0x27e312=a36_0x3e5e;_0x4f6e99['preventDefault']();const _0x285f4a=document['getElementById'](_0x27e312(0x1f1))['value'],_0x45f0c4=document['getElementById'](_0x27e312(0x210))[_0x27e312(0x1f7)],_0x5677e8=document['getElementById']('login-error');console['log'](_0x27e312(0x206),_0x285f4a),_0x5677e8['textContent']='';try{console['log']('Attempting\x20Firebase\x20signInWithEmailAndPassword...');const _0x1dc36d=await signInWithEmailAndPassword(auth,_0x285f4a,_0x45f0c4),_0x5a5948=_0x1dc36d[_0x27e312(0x20e)];console['log']('User\x20signed\x20in:',_0x5a5948['uid']);const _0x2293a5=['players','playersD2',_0x27e312(0x216),'playersDuos','playersCTF',_0x27e312(0x1fd)];console[_0x27e312(0x207)]('Checking\x20if\x20user\x20exists\x20in\x20any\x20collection...');let _0x56e995=![],_0x5b05dc=await Promise['all'](_0x2293a5['map'](_0x462116=>getDoc(doc(db,_0x462116,_0x5a5948['uid']))));for(let _0x69502f=0x0;_0x69502f<_0x5b05dc['length'];_0x69502f++){if(_0x5b05dc[_0x69502f]['exists']()){_0x56e995=!![],console[_0x27e312(0x207)](_0x27e312(0x211)+_0x2293a5[_0x69502f]+'\x20collection');break;}}if(!_0x56e995){console['log']('User\x20not\x20found\x20in\x20any\x20collection,\x20checking\x20pending\x20registration');const _0x1f9e24=doc(db,_0x27e312(0x224),_0x5a5948['uid']),_0x32dc27=await getDoc(_0x1f9e24);if(_0x32dc27['exists']()){const _0x435f0f=_0x32dc27['data']();console['log'](_0x27e312(0x214),_0x435f0f);if(_0x5a5948['emailVerified']){console['log']('Email\x20is\x20verified,\x20processing\x20registration'),_0x5677e8[_0x27e312(0x212)]=_0x27e312(0x217);if(_0x435f0f['nonParticipant'])console[_0x27e312(0x207)]('Processing\x20non-participant\x20registration'),await setDoc(doc(db,'nonParticipants',_0x5a5948['uid']),{'username':_0x435f0f[_0x27e312(0x222)],'email':_0x5a5948['email'],'createdAt':serverTimestamp(),'isNonParticipant':!![]}),console['log']('User\x20'+_0x435f0f[_0x27e312(0x222)]+'\x20added\x20to\x20nonParticipants\x20collection');else{let _0x12d839;switch(_0x435f0f[_0x27e312(0x1ff)]){case'D1':_0x12d839='players';break;case'D2':_0x12d839=_0x27e312(0x201);break;case'D3':_0x12d839='playersD3';break;case'Duos':_0x12d839=_0x27e312(0x209);break;case'CTF':_0x12d839='playersCTF';break;default:_0x12d839='players';}console['log']('Processing\x20'+_0x435f0f['gameMode']+'\x20player\x20registration\x20to\x20'+_0x12d839);const _0x743fe1=collection(db,_0x12d839),_0x2c195c=query(_0x743fe1,orderBy(_0x27e312(0x205),'desc'),limit(0x1)),_0x3d281b=await getDocs(_0x2c195c),_0x2c94e7=_0x3d281b[_0x27e312(0x1f4)]?0x1:_0x3d281b['docs'][0x0][_0x27e312(0x1f9)]()['position']+0x1;await setDoc(doc(db,_0x12d839,_0x5a5948['uid']),{'username':_0x435f0f['username'],'email':_0x5a5948['email'],'eloRating':0x4b0,'position':_0x2c94e7,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':_0x435f0f['gameMode']}),console['log']('New\x20player\x20'+_0x435f0f['username']+'\x20added\x20to\x20'+_0x12d839+'\x20at\x20position\x20'+_0x2c94e7);}await deleteDoc(_0x1f9e24),setTimeout(()=>{const _0x327aa6=_0x27e312;window['location'][_0x327aa6(0x1fb)]=_0x327aa6(0x20c);},0x7d0);return;}else{_0x5677e8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22warning-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20verify\x20your\x20email\x20to\x20complete\x20your\x20registration.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20id=\x22resend-button\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',document['getElementById']('resend-button')[_0x27e312(0x208)](_0x27e312(0x20b),()=>{resendVerificationEmail(_0x285f4a);}),await signOut(auth);return;}}}window['location']['href']=_0x27e312(0x20c);}catch(_0x22327d){console[_0x27e312(0x213)]('Login\x20error:',_0x22327d),_0x5677e8['textContent']='Login\x20failed:\x20'+_0x22327d['message'];}}function loginFormHandler(_0x8d07b0){const _0x38faee=a36_0x3e5e;_0x8d07b0['preventDefault']();const _0x5108d4=document[_0x38faee(0x220)](_0x38faee(0x1f1))['value']['trim'](),_0x219ee9=document['getElementById']('login-password')['value'],_0x3e71a3=document['getElementById']('login-error');signInWithEmailAndPassword(auth,_0x5108d4,_0x219ee9)['then'](_0x2b45c3=>{const _0x3e3fb1=_0x38faee;console['log'](_0x3e3fb1(0x21d),_0x2b45c3['user']),window[_0x3e3fb1(0x219)]['href']='../index.html';})['catch'](_0x21064d=>{const _0x4789ab=_0x38faee;console['error']('Login\x20error:',_0x21064d),_0x3e71a3[_0x4789ab(0x1fc)]=_0x4789ab(0x1f3)+_0x21064d['message'],_0x3e71a3[_0x4789ab(0x1fa)][_0x4789ab(0x1f5)]='block';});}async function resendVerificationEmail(_0x4727ab){const _0x1d9c10=a36_0x3e5e;console['log']('Attempting\x20to\x20resend\x20verification\x20email\x20to:',_0x4727ab);try{const _0x1194ba=document['getElementById']('login-password')?.['value'];if(!_0x1194ba){console['error']('Password\x20not\x20available\x20for\x20resending\x20verification'),document[_0x1d9c10(0x220)](_0x1d9c10(0x200))['textContent']='Please\x20enter\x20your\x20password\x20to\x20resend\x20verification\x20email';return;}const _0x285c1e=await signInWithEmailAndPassword(auth,_0x4727ab,_0x1194ba),_0xc27f23=_0x285c1e['user'];console[_0x1d9c10(0x207)]('User\x20signed\x20in\x20for\x20verification\x20email:',_0xc27f23['uid']),await sendEmailVerification(_0xc27f23),console[_0x1d9c10(0x207)]('Verification\x20email\x20sent'),document['getElementById']('login-error')[_0x1d9c10(0x212)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Verification\x20email\x20has\x20been\x20resent\x20to\x20'+_0x4727ab+'.\x20Please\x20check\x20your\x20inbox.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth);}catch(_0x4b09cf){console['error']('Error\x20resending\x20verification\x20email:',_0x4b09cf),document['getElementById']('login-error')['textContent']='Error\x20sending\x20verification\x20email:\x20'+_0x4b09cf['message'];}}window['resendVerificationEmail']=function(_0x54cb85){console['log']('Window.resendVerificationEmail\x20called\x20with:',_0x54cb85),resendVerificationEmail(_0x54cb85);},document['addEventListener']('DOMContentLoaded',()=>{const _0x5d2e05=a36_0x3e5e,_0x516b19=document[_0x5d2e05(0x220)](_0x5d2e05(0x21b)),_0x1cffac=document['getElementById']('register-mode');_0x516b19&&_0x1cffac&&_0x516b19['addEventListener']('change',function(){this['checked']?(_0x1cffac['value']='',_0x1cffac['disabled']=!![]):_0x1cffac['disabled']=![];});const _0x37537f=document[_0x5d2e05(0x220)](_0x5d2e05(0x203)),_0x5c7e5b=document['getElementById']('login-form');_0x37537f&&_0x37537f['addEventListener']('submit',handleRegister);_0x5c7e5b&&_0x5c7e5b['addEventListener']('submit',handleLogin);const _0xc682ae=document[_0x5d2e05(0x220)]('show-register'),_0x216e0b=document['getElementById']('show-login');_0xc682ae&&_0xc682ae[_0x5d2e05(0x208)]('click',_0x130b62=>{const _0x3830dd=_0x5d2e05;_0x130b62[_0x3830dd(0x20a)](),document[_0x3830dd(0x220)]('login-container')['style'][_0x3830dd(0x1f5)]='none',document['getElementById']('register-container')[_0x3830dd(0x1fa)][_0x3830dd(0x1f5)]='block';}),_0x216e0b&&_0x216e0b['addEventListener'](_0x5d2e05(0x20b),_0x2a40c7=>{const _0x279895=_0x5d2e05;_0x2a40c7[_0x279895(0x20a)](),document['getElementById']('register-container')[_0x279895(0x1fa)]['display']='none',document['getElementById']('login-container')['style']['display']='block';});});