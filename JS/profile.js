const a42_0x59a806=a42_0x1929,a42_0x494e60=(function(){let _0x199f04=!![];return function(_0x21879d,_0xe121cf){const _0x17b098=_0x199f04?function(){if(_0xe121cf){const _0x46cc5f=_0xe121cf['apply'](_0x21879d,arguments);return _0xe121cf=null,_0x46cc5f;}}:function(){};return _0x199f04=![],_0x17b098;};}()),a42_0x3dbaee=a42_0x494e60(this,function(){const _0x14397a=a42_0x1929,_0x58569d=function(){const _0x3e27ce=a42_0x1929;let _0xbd8a95;try{_0xbd8a95=Function(_0x3e27ce(0x15b)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xfa0dee){_0xbd8a95=window;}return _0xbd8a95;},_0x75d33d=_0x58569d(),_0x3d48d0=_0x75d33d[_0x14397a(0x147)]=_0x75d33d['console']||{},_0x5bee5c=['log','warn',_0x14397a(0x158),_0x14397a(0x149),'exception','table','trace'];for(let _0x11f9e9=0x0;_0x11f9e9<_0x5bee5c[_0x14397a(0x13c)];_0x11f9e9++){const _0x303fab=a42_0x494e60['constructor']['prototype']['bind'](a42_0x494e60),_0x7e24ce=_0x5bee5c[_0x11f9e9],_0x41dd1f=_0x3d48d0[_0x7e24ce]||_0x303fab;_0x303fab['__proto__']=a42_0x494e60['bind'](a42_0x494e60),_0x303fab['toString']=_0x41dd1f['toString']['bind'](_0x41dd1f),_0x3d48d0[_0x7e24ce]=_0x303fab;}});a42_0x3dbaee();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);function a42_0x134e(){const _0x4bcf95=['files','winnerScore','length','favoriteWeapon','value','loserUsername','pfpPreview','handleImageUpload','loadProfile','loserScore','form','profile-pictures/','Error\x20loading\x20player\x20stats:','console','uid','error','pfpUrl','toISOString','nickname','getElementById','target','submit','setupEventListeners','motto','Error\x20saving\x20profile.\x20Please\x20try\x20again.','textContent','Stats\x20calculated:','stats-','favorite-weapon','stats-wins','info','wins','addEventListener','return\x20(function()\x20'];a42_0x134e=function(){return _0x4bcf95;};return a42_0x134e();}function a42_0x1929(_0x1fa600,_0x4031b7){const _0x3dbaee=a42_0x134e();return a42_0x1929=function(_0x494e60,_0x349a46){_0x494e60=_0x494e60-0x13a;let _0x134e0d=_0x3dbaee[_0x494e60];return _0x134e0d;},a42_0x1929(_0x1fa600,_0x4031b7);}class ProfileManager{constructor(){const _0x4fac00=a42_0x1929;this[_0x4fac00(0x144)]=document['getElementById']('profile-form'),this['pfpInput']=document[_0x4fac00(0x14d)]('pfp-upload'),this[_0x4fac00(0x140)]=document['getElementById']('profile-preview'),this['statsContainer']=document[_0x4fac00(0x14d)]('player-stats'),this['setupEventListeners'](),this[_0x4fac00(0x142)]();}[a42_0x59a806(0x150)](){const _0x3ec24e=a42_0x59a806;this['pfpInput']['addEventListener']('change',_0x345b8a=>this['handleImageUpload'](_0x345b8a)),this['form'][_0x3ec24e(0x15a)](_0x3ec24e(0x14f),_0x5132a3=>this['handleSubmit'](_0x5132a3));}async[a42_0x59a806(0x141)](_0x12f071){const _0x18b163=a42_0x59a806,_0x206274=_0x12f071[_0x18b163(0x14e)][_0x18b163(0x13a)][0x0];if(_0x206274){const _0x5a44f4=new FileReader();_0x5a44f4['onload']=_0x57e191=>{const _0x1fd1dd=_0x18b163;this['pfpPreview']['src']=_0x57e191[_0x1fd1dd(0x14e)]['result'];},_0x5a44f4['readAsDataURL'](_0x206274);}}async['handleSubmit'](_0x269c95){const _0x16bf6c=a42_0x59a806;_0x269c95['preventDefault']();const _0x505d48=auth['currentUser'];if(!_0x505d48){alert('Please\x20sign\x20in\x20to\x20save\x20your\x20profile');return;}try{const _0x2c708a=new FormData(this['form']),_0x58a7a8={'nickname':_0x2c708a['get'](_0x16bf6c(0x14c)),'motto':_0x2c708a['get'](_0x16bf6c(0x151)),'favoriteMap':_0x2c708a['get']('favorite-map'),'favoriteWeapon':_0x2c708a['get'](_0x16bf6c(0x156)),'updatedAt':new Date()[_0x16bf6c(0x14b)]()},_0x2f9025=this['pfpInput'][_0x16bf6c(0x13a)][0x0];if(_0x2f9025){const _0x5b7083=ref(storage,_0x16bf6c(0x145)+_0x505d48[_0x16bf6c(0x148)]);await uploadBytes(_0x5b7083,_0x2f9025),_0x58a7a8['pfpUrl']=await getDownloadURL(_0x5b7083);}await setDoc(doc(db,'profiles',_0x505d48['uid']),_0x58a7a8),alert('Profile\x20saved\x20successfully!');}catch(_0x44706c){console['error']('Error\x20saving\x20profile:',_0x44706c),alert(_0x16bf6c(0x152));}}async[a42_0x59a806(0x142)](){onAuthStateChanged(auth,async _0x1667f5=>{const _0x422932=a42_0x1929;if(_0x1667f5)try{const _0x12212f=await getDoc(doc(db,'profiles',_0x1667f5['uid']));if(_0x12212f['exists']()){const _0x4c1830=_0x12212f['data']();document['getElementById']('nickname')[_0x422932(0x13e)]=_0x4c1830['nickname']||'',document['getElementById']('motto')['value']=_0x4c1830['motto']||'',document[_0x422932(0x14d)]('favorite-map')['value']=_0x4c1830['favoriteMap']||'',document['getElementById']('favorite-weapon')['value']=_0x4c1830[_0x422932(0x13d)]||'',_0x4c1830[_0x422932(0x14a)]&&(this[_0x422932(0x140)]['src']=_0x4c1830['pfpUrl']),await this['loadPlayerStats'](_0x4c1830['nickname']);}}catch(_0x1151f5){console[_0x422932(0x149)]('Error\x20loading\x20profile:',_0x1151f5);}});}async['loadPlayerStats'](_0x1669ec){const _0x525b26=a42_0x59a806;if(!_0x1669ec)return;try{const _0x841991=collection(db,'approvedMatches'),[_0x204eca,_0x18681f]=await Promise['all']([getDocs(query(_0x841991,where('winnerUsername','==',_0x1669ec))),getDocs(query(_0x841991,where(_0x525b26(0x13f),'==',_0x1669ec)))]),_0x127c49=_0x204eca['size'],_0x34a542=_0x18681f['size'],_0xd7c1ab=_0x127c49+_0x34a542;let _0x38530e=0x0,_0x4aeb77=0x0;_0x204eca['forEach'](_0x35d5fc=>{const _0x5c4d10=_0x525b26,_0x3a4401=_0x35d5fc['data']();if(_0x3a4401['winnerScore'])_0x38530e+=parseInt(_0x3a4401[_0x5c4d10(0x13b)]);if(_0x3a4401['loserScore'])_0x4aeb77+=parseInt(_0x3a4401[_0x5c4d10(0x143)]);}),_0x18681f['forEach'](_0x596394=>{const _0x525bff=_0x525b26,_0x28d384=_0x596394['data']();if(_0x28d384['loserScore'])_0x38530e+=parseInt(_0x28d384['loserScore']);if(_0x28d384[_0x525bff(0x13b)])_0x4aeb77+=parseInt(_0x28d384['winnerScore']);});const _0x1d327a=_0x4aeb77===0x0?_0x38530e['toFixed'](0x2):(_0x38530e/_0x4aeb77)['toFixed'](0x2),_0x44da6a=_0xd7c1ab===0x0?'0':(_0x127c49/_0xd7c1ab*0x64)['toFixed'](0x1);console['log'](_0x525b26(0x154),{'totalMatches':_0xd7c1ab,'wins':_0x127c49,'losses':_0x34a542,'totalKills':_0x38530e,'totalDeaths':_0x4aeb77,'kdRatio':_0x1d327a,'winRate':_0x44da6a}),document['getElementById']('stats-matches')['textContent']=_0xd7c1ab,document['getElementById'](_0x525b26(0x157))[_0x525b26(0x153)]=_0x127c49,document['getElementById']('stats-losses')['textContent']=_0x34a542,document['getElementById']('stats-kd')['textContent']=_0x1d327a,document['getElementById']('stats-winrate')['textContent']=_0x44da6a+'%';}catch(_0x41324f){console[_0x525b26(0x149)](_0x525b26(0x146),_0x41324f),['matches',_0x525b26(0x159),'losses','kd','winrate']['forEach'](_0x583f39=>{const _0x206b9b=_0x525b26;document['getElementById'](_0x206b9b(0x155)+_0x583f39)['textContent']='-';});}}}document['addEventListener']('DOMContentLoaded',()=>{new ProfileManager();});