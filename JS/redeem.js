const a46_0x17937c=a46_0x39a5,a46_0x51ae90=(function(){let _0x35063b=!![];return function(_0x350ad2,_0x14f9e1){const _0x2bc17f=_0x35063b?function(){if(_0x14f9e1){const _0x3d2973=_0x14f9e1['apply'](_0x350ad2,arguments);return _0x14f9e1=null,_0x3d2973;}}:function(){};return _0x35063b=![],_0x2bc17f;};}()),a46_0xe72d04=a46_0x51ae90(this,function(){const _0x355d28=a46_0x39a5,_0x2cdf1b=function(){const _0x2a3c4a=a46_0x39a5;let _0x4ae35a;try{_0x4ae35a=Function('return\x20(function()\x20'+_0x2a3c4a(0x208)+');')();}catch(_0x297389){_0x4ae35a=window;}return _0x4ae35a;},_0x1e3a20=_0x2cdf1b(),_0x3fe3ad=_0x1e3a20[_0x355d28(0x1a3)]=_0x1e3a20['console']||{},_0x4c137d=['log',_0x355d28(0x1cc),'info','error','exception','table',_0x355d28(0x1a2)];for(let _0x453ffc=0x0;_0x453ffc<_0x4c137d['length'];_0x453ffc++){const _0xde5af1=a46_0x51ae90['constructor']['prototype']['bind'](a46_0x51ae90),_0x4255e9=_0x4c137d[_0x453ffc],_0xa2fe7a=_0x3fe3ad[_0x4255e9]||_0xde5af1;_0xde5af1['__proto__']=a46_0x51ae90[_0x355d28(0x1f7)](a46_0x51ae90),_0xde5af1['toString']=_0xa2fe7a['toString']['bind'](_0xa2fe7a),_0x3fe3ad[_0x4255e9]=_0xde5af1;}});a46_0xe72d04();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':a46_0x17937c(0x191),'description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'contrast':{'price':0x0,'name':'Nightlight','description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':'Blue','description':a46_0x17937c(0x1d9)},'cyberpunk':{'price':0x190,'name':a46_0x17937c(0x1ca),'description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'},'gold':{'price':0x320,'name':'Gold','description':a46_0x17937c(0x214)},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'cockpit':{'price':0x4b0,'name':a46_0x17937c(0x18e),'description':a46_0x17937c(0x1dd)}},TOKENS={'pwr01':{'price':0x64,'name':a46_0x17937c(0x1a7),'description':a46_0x17937c(0x21c),'image':a46_0x17937c(0x1c2),'category':'powerup'},'fan':{'price':0x96,'name':'Fan','description':'Show\x20your\x20support\x20with\x20this\x20fan\x20token.','image':'../images/tokens/Fan.gif','category':'fun'},'marker':{'price':0xfa,'name':a46_0x17937c(0x1bc),'description':'Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','image':'../images/tokens/Marker.gif','category':a46_0x17937c(0x1e0)},'laser':{'price':0x12c,'name':'Laser','description':'Classic\x20laser\x20weapon\x20token.','image':'../images/tokens/Laser.gif','category':a46_0x17937c(0x1c4)},'pbomb':{'price':0x15e,'name':a46_0x17937c(0x224),'description':'Strategic\x20explosive\x20device','image':'../images/tokens/subgame/pbomb.gif','category':'weapon'},'fusion':{'price':0x15e,'name':'Fusion\x20Cannon','description':'Devastating\x20fusion\x20weapon\x20technology','image':'../images/tokens/subgame/fusion.gif','category':'weapon'},'lock':{'price':0x1c2,'name':'Lock','description':'Lock\x20in\x20your\x20victory.','image':'../images/tokens/Lock.gif','category':'fun'},'blob01':{'price':0x1f4,'name':'Blob\x20Token\x201','description':'A\x20mysterious\x20purple\x20blob\x20token','image':a46_0x17937c(0x202),'category':a46_0x17937c(0x20e)},'plasma':{'price':0x1f4,'name':a46_0x17937c(0x20c),'description':'High-powered\x20plasma\x20cannon\x20token.','image':'../images/tokens/Plasma.gif','category':'weapon'},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':'Become\x20one\x20with\x20the\x20shadows','image':'../images/tokens/cloak.gif','category':a46_0x17937c(0x1d8)},'pwr02':{'price':0x258,'name':a46_0x17937c(0x19e),'description':'Advanced\x20energy\x20storage\x20system','image':'../images/tokens/subgame/pwr02.gif','category':'powerup'},'mercury':{'price':0x258,'name':'Mercury\x20Missile','description':a46_0x17937c(0x1de),'image':a46_0x17937c(0x1db),'category':a46_0x17937c(0x1c4)},'plasmablobl':{'price':0x258,'name':a46_0x17937c(0x1b5),'description':'A\x20mysterious\x20plasma\x20blob.','image':a46_0x17937c(0x1a8),'category':'blob'},'smissile':{'price':0x28a,'name':'Smart\x20Missile','description':'Intelligent\x20targeting\x20system','image':a46_0x17937c(0x198),'category':'weapon'},'smartmine':{'price':0x2ee,'name':'Smart\x20Mine','description':'A\x20cunning\x20explosive\x20device.','image':a46_0x17937c(0x1d6),'category':'weapon'},'mmissile':{'price':0x320,'name':'Mega\x20Missile','description':'Heavy\x20ordinance\x20for\x20tough\x20situations','image':a46_0x17937c(0x222),'category':a46_0x17937c(0x1c4)},'gauge18':{'price':0x320,'name':a46_0x17937c(0x190),'description':'Monitor\x20your\x20ship\x27s\x20energy\x20levels','image':'../images/tokens/gauge18.gif','category':'equipment'},'extralife':{'price':0x320,'name':'Extra\x20Life','description':a46_0x17937c(0x1b8),'image':'../images/tokens/Extralife.gif','category':'special'},'hostage':{'price':0x3b6,'name':'Hostage','description':'Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','image':'../images/tokens/Hostage.gif','category':'special'},'phoenix':{'price':0x3b6,'name':a46_0x17937c(0x1ba),'description':'Fiery\x20phoenix\x20cannon\x20token.','image':a46_0x17937c(0x218),'category':'weapon'},'blob02':{'price':0x3e8,'name':a46_0x17937c(0x1af),'description':'Another\x20enigmatic\x20blob\x20creature','image':'../images/tokens/blob02.gif','category':'blob'},'invuln':{'price':0x5dc,'name':'Invulnerability','description':'Become\x20invincible\x20for\x20a\x20short\x20time.','image':'../images/tokens/Invuln.gif','category':a46_0x17937c(0x194)},'blob03':{'price':0x7d0,'name':a46_0x17937c(0x1c1),'description':'The\x20final\x20blob\x20in\x20the\x20collection','image':'../images/tokens/blob03.gif','category':a46_0x17937c(0x20e)},'reactor':{'price':0x7d0,'name':'Reactor','description':'The\x20heart\x20of\x20every\x20mine.','image':'../images/tokens/Reactor.gif','category':'special'},'pyro':{'price':0xbb8,'name':'Pyro','description':a46_0x17937c(0x213),'image':a46_0x17937c(0x1b3),'category':a46_0x17937c(0x21d)}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document[a46_0x17937c(0x204)]('DOMContentLoaded',()=>{const _0x28b1d6=a46_0x17937c;console['log'](_0x28b1d6(0x211)),storeContainer=document['getElementById'](_0x28b1d6(0x21a)),pointsDisplay=document['getElementById']('user-points'),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x39b78e=>{const _0x4e50d9=a46_0x39a5;if(_0x39b78e){console[_0x4e50d9(0x216)]('✅\x20User\x20authenticated:',_0x39b78e['displayName']||_0x39b78e['email']);if(authWarning)authWarning['style'][_0x4e50d9(0x207)]='none';if(storeContainer)storeContainer[_0x4e50d9(0x221)]['display']='block';await loadUserData(_0x39b78e),updateThemeButtons(),updateTokenButtons();}else{console[_0x4e50d9(0x216)](_0x4e50d9(0x1bf));if(authWarning)authWarning[_0x4e50d9(0x221)][_0x4e50d9(0x207)]='block';if(storeContainer)storeContainer[_0x4e50d9(0x221)]['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x4e50d9(0x1a9)]=![];}});}async function loadUserData(_0x4d2284){const _0x370b1a=a46_0x17937c;try{const _0x296ca6=doc(db,'userProfiles',_0x4d2284[_0x370b1a(0x217)]),_0x26df74=await getDoc(_0x296ca6);if(_0x26df74[_0x370b1a(0x1d5)]()){const _0x34889b=_0x26df74['data']();userData={'points':_0x34889b['points']||0x0,'inventory':_0x34889b[_0x370b1a(0x210)]||[],'isAdmin':_0x34889b[_0x370b1a(0x1f2)]||![],'equippedToken':_0x34889b['equippedToken']||null},pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x370b1a(0x1f6)]()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console['log']('👑\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console[_0x370b1a(0x216)]('User\x20data\x20loaded\x20-\x20Points:\x20'+userData[_0x370b1a(0x1ae)]+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items,\x20Equipped:\x20'+(userData['equippedToken']||'none'));}else await setDoc(_0x296ca6,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x4d2284['displayName']||_0x4d2284['email']?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay['textContent']='0'),window[_0x370b1a(0x1a9)]=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x13a75a){console['error']('Error\x20loading\x20user\x20data:',_0x13a75a);}}function userOwnsTheme(_0xcca5e7){if(THEMES[_0xcca5e7]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0xcca5e7);}function userOwnsToken(_0x195aaa){const _0x4c433c=a46_0x17937c;return userData[_0x4c433c(0x210)][_0x4c433c(0x1c0)]('token_'+_0x195aaa);}function userHasTokenEquipped(_0x424352){return userData['equippedToken']===_0x424352;}function getEquippedToken(){return userData['equippedToken']||null;}async function purchaseTheme(_0x45cb19){const _0x43192e=a46_0x17937c,_0x5b62ed=auth['currentUser'];if(!_0x5b62ed)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes',_0x43192e(0x19f)),![];const _0x2a399a=THEMES[_0x45cb19];if(!_0x2a399a)return console['error']('Theme\x20'+_0x45cb19+'\x20not\x20found'),![];if(userData['points']<_0x2a399a[_0x43192e(0x1fb)])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x2a399a['price']-userData[_0x43192e(0x1ae)])+_0x43192e(0x21b),'error'),![];if(userOwnsTheme(_0x45cb19))return showMessage('You\x20already\x20own\x20the\x20'+_0x2a399a[_0x43192e(0x1b0)]+_0x43192e(0x1d1),_0x43192e(0x1e7)),![];try{return await processPurchase(_0x45cb19,_0x2a399a,'theme');}catch(_0x45d136){return console['error']('Theme\x20purchase\x20failed:',_0x45d136),showMessage(_0x43192e(0x1be),'error'),![];}}async function purchaseToken(_0x5b1832){const _0x25825c=a46_0x17937c,_0x1b9c0c=auth['currentUser'];if(!_0x1b9c0c)return showMessage(_0x25825c(0x1fa),_0x25825c(0x19f)),![];const _0x368bcc=TOKENS[_0x5b1832];if(!_0x368bcc)return console[_0x25825c(0x19f)]('Token\x20'+_0x5b1832+_0x25825c(0x1e9)),![];if(userData['points']<_0x368bcc['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x368bcc['price']-userData['points'])+'\x20more\x20points.',_0x25825c(0x19f)),![];if(userOwnsToken(_0x5b1832))return showMessage('You\x20already\x20own\x20the\x20'+_0x368bcc['name']+'\x20token','info'),![];try{return await processPurchase(_0x5b1832,_0x368bcc,'token');}catch(_0x217981){return console['error']('Token\x20purchase\x20failed:',_0x217981),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}async function processPurchase(_0x3a404c,_0x341053,_0xee2ed1){const _0x3651e2=a46_0x17937c,_0x42035e=auth['currentUser'];try{const _0x5ddfff=doc(db,'userProfiles',_0x42035e['uid']),_0x3f9959=await getDoc(_0x5ddfff);if(!_0x3f9959['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x6ffc5=_0x3f9959['data'](),_0x324a47=_0x6ffc5['points']||0x0,_0x15a2aa=_0x6ffc5['inventory']||[];if(_0x324a47<_0x341053[_0x3651e2(0x1fb)])return showMessage('Insufficient\x20points','error'),![];if(_0x15a2aa['includes'](_0xee2ed1+'_'+_0x3a404c))return showMessage('You\x20already\x20own\x20this\x20'+_0xee2ed1,_0x3651e2(0x1e7)),![];const _0x1e6d32=_0x324a47-_0x341053['price'],_0x204819=[..._0x15a2aa,_0xee2ed1+'_'+_0x3a404c];await updateDoc(_0x5ddfff,{'points':_0x1e6d32,'inventory':_0x204819,'lastPurchase':serverTimestamp()});if(_0xee2ed1==='token')try{const _0xbee70=doc(db,'userTokens',_0x42035e['uid']),_0x31adc8=await getDoc(_0xbee70);let _0x2b1750=[];_0x31adc8['exists']()&&(_0x2b1750=_0x31adc8['data']()[_0x3651e2(0x226)]||[]);const _0x244bf6=new Date();_0x2b1750[_0x3651e2(0x1c8)]({'tokenId':_0x3a404c,'tokenName':_0x341053['name'],'tokenImage':_0x341053['image'],'category':_0x341053['category'],'purchasedAt':_0x244bf6,'price':_0x341053['price'],'equipped':![]}),await setDoc(_0xbee70,{'userId':_0x42035e['uid'],'username':_0x6ffc5['username']||_0x42035e[_0x3651e2(0x1a0)]||'Unknown','tokens':_0x2b1750,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache==='function'&&clearTokenCache(_0x42035e['uid']),console['log']('✅\x20Token\x20'+_0x3a404c+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0xda5768){console['warn'](_0x3651e2(0x1e3),_0xda5768),_0xda5768[_0x3651e2(0x1cd)]==='permission-denied'?console[_0x3651e2(0x216)](_0x3651e2(0x19d)):console['error'](_0x3651e2(0x1aa),_0xda5768);}try{await addDoc(collection(db,'transactions'),{'userId':_0x42035e[_0x3651e2(0x217)],'userEmail':_0x42035e['email'],'itemId':_0xee2ed1+'_'+_0x3a404c,'itemTitle':_0x341053['name'],'price':_0x341053['price'],'type':'purchase','category':_0xee2ed1,'timestamp':serverTimestamp()});}catch(_0x4578ea){console['warn']('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x4578ea);}return userData['points']=_0x1e6d32,userData['inventory']=_0x204819,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),updateTokenButtons(),_0xee2ed1===_0x3651e2(0x1d0)&&updateThemeButtons(),console[_0x3651e2(0x216)]('✅\x20Purchased\x20'+_0x341053['name']+'\x20for\x20'+_0x341053['price']+'\x20points'),showMessage('Successfully\x20purchased\x20'+_0x341053['name']+'!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','success'),!![];}catch(_0xf94a54){console['error'](_0x3651e2(0x1ff),_0xf94a54);if(_0xf94a54['code']==='permission-denied')showMessage(_0x3651e2(0x1df),'error');else{if(_0xf94a54['code']===_0x3651e2(0x219))showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.','error');else _0xf94a54['code']===_0x3651e2(0x1a6)?showMessage(_0x3651e2(0x1a1),'error'):showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x3651e2(0x19f));}return![];}}async function equipToken(_0x477269){const _0x40eaaf=a46_0x17937c,_0x127bf6=auth['currentUser'];if(!_0x127bf6)return showMessage('Please\x20sign\x20in\x20to\x20equip\x20tokens','error'),![];const _0x7a00d2=TOKENS[_0x477269];if(!_0x7a00d2)return console['error']('Token\x20'+_0x477269+'\x20not\x20found'),![];if(!userOwnsToken(_0x477269))return showMessage(_0x40eaaf(0x203),'error'),![];try{const _0x252ef0=doc(db,_0x40eaaf(0x1f4),_0x127bf6[_0x40eaaf(0x217)]);await updateDoc(_0x252ef0,{'equippedToken':_0x477269,'lastTokenEquip':serverTimestamp()});try{const _0x1fe51d=doc(db,'userTokens',_0x127bf6[_0x40eaaf(0x217)]),_0x3d13a8=await getDoc(_0x1fe51d);if(_0x3d13a8[_0x40eaaf(0x1d5)]()){const _0x114f4c=_0x3d13a8['data'](),_0x371b07=_0x114f4c['tokens']||[],_0x475cf3=_0x371b07['map'](_0x2db710=>({..._0x2db710,'equipped':_0x2db710[_0x40eaaf(0x1e1)]===_0x477269}));await updateDoc(_0x1fe51d,{'tokens':_0x475cf3,'equippedToken':_0x477269,'lastUpdated':serverTimestamp()});}}catch(_0x350b26){console[_0x40eaaf(0x1cc)]('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0x350b26);}return userData[_0x40eaaf(0x1f0)]=_0x477269,typeof clearTokenCache==='function'&&(clearTokenCache(_0x127bf6['uid']),clearTokenCache()),setTimeout(()=>{const _0x24d4f1=_0x40eaaf;window['displayLadder']&&typeof window['displayLadder']==='function'&&(console['log']('🔄\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token'),window[_0x24d4f1(0x20d)](!![])),window['RedeemStore']&&typeof window['RedeemStore']['refreshUI']==='function'&&window['RedeemStore'][_0x24d4f1(0x215)]();},0x1f4),console['log']('✅\x20Equipped\x20token:\x20'+_0x7a00d2['name']),showMessage(_0x7a00d2[_0x40eaaf(0x1b0)]+'\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x19ddd0){return console['error'](_0x40eaaf(0x1f9),_0x19ddd0),_0x19ddd0['code']===_0x40eaaf(0x1f1)?showMessage('Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.','warning'):showMessage('Failed\x20to\x20equip\x20token:\x20'+_0x19ddd0['message'],'error'),![];}}function a46_0x39a5(_0x4347ad,_0x411975){const _0xe72d04=a46_0x5b62();return a46_0x39a5=function(_0x51ae90,_0x4340f2){_0x51ae90=_0x51ae90-0x18e;let _0x5b6266=_0xe72d04[_0x51ae90];return _0x5b6266;},a46_0x39a5(_0x4347ad,_0x411975);}async function unequipToken(){const _0x59982b=a46_0x17937c,_0x45ba3e=auth['currentUser'];if(!_0x45ba3e)return showMessage('Please\x20sign\x20in\x20to\x20unequip\x20tokens',_0x59982b(0x19f)),![];if(!userData[_0x59982b(0x1f0)])return showMessage('No\x20token\x20is\x20currently\x20equipped','info'),![];try{const _0x425bf7=doc(db,'userProfiles',_0x45ba3e['uid']);await updateDoc(_0x425bf7,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x9aa275=doc(db,_0x59982b(0x1ac),_0x45ba3e[_0x59982b(0x217)]),_0x1bc9a3=await getDoc(_0x9aa275);if(_0x1bc9a3['exists']()){const _0x2fa36b=_0x1bc9a3['data'](),_0x5db76a=_0x2fa36b['tokens']||[],_0x42270b=_0x5db76a['map'](_0x3896a4=>({..._0x3896a4,'equipped':![]}));await updateDoc(_0x9aa275,{'tokens':_0x42270b,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData['equippedToken']=null,typeof clearTokenCache===_0x59982b(0x1c9)&&(clearTokenCache(_0x45ba3e[_0x59982b(0x217)]),clearTokenCache()),setTimeout(()=>{const _0x955b0a=_0x59982b;window['displayLadder']&&typeof window['displayLadder']==='function'&&(console[_0x955b0a(0x216)]('🔄\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window['RedeemStore']['refreshUI']==='function'&&window['RedeemStore']['refreshUI']();},0x1f4),console[_0x59982b(0x216)]('✅\x20Token\x20unequipped'),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x541906){return console['error']('Token\x20unequip\x20failed:',_0x541906),showMessage('Failed\x20to\x20unequip\x20token:\x20'+_0x541906['message'],'error'),![];}}function a46_0x5b62(){const _0x346466=['Cockpit','Token\x20','R/Y/B\x20Keys','Classic\x20RDL','Equip','Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20','powerup','forEach','ThemeSystem','appendChild','../images/tokens/subgame/smissile.gif','none','.token-sell-btn','\x20for\x20','success','🔧\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful','Shield\x20Orb','error','displayName','Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.','trace','console','Theme\x20clicked:\x20','\x20is\x20already\x20your\x20current\x20theme','unauthenticated','Energy','../images/tokens/Plasmablobl.gif','isUserAdmin','Unexpected\x20token\x20error:','Sold\x20','userTokens','You\x20don\x27t\x20own\x20this\x20token','points','Blob\x20Token\x202','name','pointer','RedeemStore','../images/tokens/Pyro.gif','owned','Plasma\x20Blob','Please\x20sign\x20in\x20to\x20sell\x20tokens','block','A\x20rare\x20extra\x20life\x20token.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','Phoenix\x20Cannon','cannot-afford','Marker','current-theme','Purchase\x20failed.\x20Please\x20try\x20again.','❌\x20User\x20not\x20authenticated','includes','Blob\x20Token\x203','../images/tokens/subgame/pwr01.gif','Token\x20clicked:\x20','weapon','background','getCurrentTheme','getElementById','push','function','Yellow\x20Orange','default','warn','code','itemId','floor','theme','\x20theme','\x20points\x20to\x20purchase\x20this\x20token','token','\x20Points','exists','../images/tokens/Smartmine.gif','closest','special','This\x20one\x20is\x20really\x20pretty','Theme\x20','../images/tokens/Mercury.gif','0.5','is\x20that...\x20Pfunk?','Fast\x20and\x20furious\x20missile\x20token.','Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.','fun','tokenId','\x20theme\x20for\x20','Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:','Buy\x20for\x20','Need\x20','classList','info','dataset','\x20not\x20found','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>','confirm','.theme-select-btn','click','Token\x20sale\x20failed:','createElement','equippedToken','permission-denied','isAdmin','Unequip\x20','userProfiles','disabled','toLocaleString','bind','querySelector','Token\x20equip\x20failed:','Please\x20sign\x20in\x20to\x20purchase\x20tokens','price','token_','sign-in-paid','textContent','Purchase\x20processing\x20error:','div','remove','../images/tokens/blob01.gif','You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it','addEventListener','opacity','[data-theme]','display','{}.constructor(\x22return\x20this\x22)(\x20)','can-afford','description','\x20points\x20to\x20purchase\x20this\x20theme','Plasma\x20Cannon','displayLadder','blob','Only\x20admins\x20can\x20sell\x20tokens','inventory','🏪\x20Redeem\x20store\x20initializing...','add','The\x20iconic\x20Pyro-GX\x20ship.','Only\x20the\x20best\x20get\x20this\x20one','refreshUI','log','uid','../images/tokens/Phoenix.gif','unavailable','store-content','\x20more\x20points.','Enhanced\x20energy\x20generation\x20unit','ship','querySelectorAll','className','visible','style','../images/tokens/subgame/mmissile.gif','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-','Proximity\x20Bomb','email','tokens','\x20points?\x20This\x20cannot\x20be\x20undone.'];a46_0x5b62=function(){return _0x346466;};return a46_0x5b62();}async function sellToken(_0x3d9bca){const _0x1f0525=a46_0x17937c,_0xaa825e=auth['currentUser'];if(!_0xaa825e)return showMessage(_0x1f0525(0x1b6),_0x1f0525(0x19f)),![];if(!userData['isAdmin'])return showMessage(_0x1f0525(0x20f),'error'),![];const _0x32edfc=TOKENS[_0x3d9bca];if(!_0x32edfc)return console[_0x1f0525(0x19f)](_0x1f0525(0x18f)+_0x3d9bca+'\x20not\x20found'),![];if(!userOwnsToken(_0x3d9bca))return showMessage(_0x1f0525(0x1ad),'error'),![];try{const _0x397c9c=doc(db,'userProfiles',_0xaa825e['uid']),_0x82dc48=await getDoc(_0x397c9c),_0x17e9d4=_0x82dc48['data'](),_0x181863=Math[_0x1f0525(0x1cf)](_0x32edfc[_0x1f0525(0x1fb)]*0.5),_0x552d46=(_0x17e9d4['points']||0x0)+_0x181863,_0x5bac0b=(_0x17e9d4['inventory']||[])['filter'](_0x69934a=>_0x69934a!==_0x1f0525(0x1fc)+_0x3d9bca),_0x539e60=_0x17e9d4[_0x1f0525(0x1f0)]===_0x3d9bca?null:_0x17e9d4['equippedToken'];await updateDoc(_0x397c9c,{'points':_0x552d46,'inventory':_0x5bac0b,'equippedToken':_0x539e60,'lastSale':serverTimestamp()});const _0x2b16a2=doc(db,'userTokens',_0xaa825e['uid']),_0x19eb1b=await getDoc(_0x2b16a2);if(_0x19eb1b['exists']()){const _0x4c14ff=_0x19eb1b['data'](),_0x438315=_0x4c14ff[_0x1f0525(0x226)]||[],_0x51c35a=_0x438315['filter'](_0x4ecea8=>_0x4ecea8['tokenId']!==_0x3d9bca);await updateDoc(_0x2b16a2,{'tokens':_0x51c35a,'equippedToken':_0x539e60,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0xaa825e[_0x1f0525(0x217)],'userEmail':_0xaa825e[_0x1f0525(0x225)],'itemId':'token_'+_0x3d9bca,'itemTitle':_0x32edfc['name'],'refund':_0x181863,'originalPrice':_0x32edfc['price'],'type':'sale','category':_0x1f0525(0x1d3),'timestamp':serverTimestamp()}),userData['points']=_0x552d46,userData[_0x1f0525(0x210)]=_0x5bac0b,userData['equippedToken']=_0x539e60,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),typeof clearTokenCache==='function'&&clearTokenCache(_0xaa825e['uid']),console['log']('✅\x20Sold\x20token\x20'+_0x32edfc[_0x1f0525(0x1b0)]+'\x20for\x20'+_0x181863+'\x20points'),showMessage(_0x1f0525(0x1ab)+_0x32edfc['name']+_0x1f0525(0x19b)+_0x181863+'\x20points\x20(50%\x20refund)',_0x1f0525(0x19c)),!![];}catch(_0x4bcf33){return console['error'](_0x1f0525(0x1ee),_0x4bcf33),showMessage('Failed\x20to\x20sell\x20token:\x20'+_0x4bcf33['message'],_0x1f0525(0x19f)),![];}}function applyTheme(_0x34aacc){const _0x10c3a4=a46_0x17937c;if(!userOwnsTheme(_0x34aacc))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0x10c3a4(0x19f)),![];return window[_0x10c3a4(0x196)]?(window[_0x10c3a4(0x196)]['switchTheme'](_0x34aacc),showMessage((THEMES[_0x34aacc]?.['name']||_0x34aacc)+'\x20theme\x20applied!',_0x10c3a4(0x19c)),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0xafe453=a46_0x17937c,_0x258d09=document[_0xafe453(0x1f8)]('.themes-grid');if(!_0x258d09){console['error']('Themes\x20container\x20not\x20found');return;}_0x258d09['innerHTML']='',Object['entries'](THEMES)['forEach'](([_0x2d7a48,_0x2596db])=>{const _0x22fcc9=_0xafe453,_0xb0588=document[_0x22fcc9(0x1ef)]('div');_0xb0588[_0x22fcc9(0x21f)]='store-item',_0xb0588[_0x22fcc9(0x1e8)]['theme']=_0x2d7a48,_0xb0588['dataset']['itemId']='theme_'+_0x2d7a48,_0xb0588['dataset'][_0x22fcc9(0x1fb)]=_0x2596db['price'],_0xb0588['innerHTML']=_0x22fcc9(0x223)+_0x2d7a48+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x2596db['price']===0x0?'FREE':_0x2596db['price']+_0x22fcc9(0x1d4))+_0x22fcc9(0x1ea)+_0x2596db[_0x22fcc9(0x1b0)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x2596db[_0x22fcc9(0x20a)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x258d09['appendChild'](_0xb0588);}),setupThemeButtons();}function buildTokenItems(){const _0x378a61=a46_0x17937c,_0x55f294=document['querySelector']('.tokens-grid');if(!_0x55f294){console[_0x378a61(0x19f)]('Tokens\x20container\x20not\x20found');return;}_0x55f294['innerHTML']='',Object['entries'](TOKENS)['forEach'](([_0xa72839,_0x1b09a0])=>{const _0x49c25a=_0x378a61,_0x4dd202=document['createElement'](_0x49c25a(0x200));_0x4dd202['className']='store-item\x20token-item',_0x4dd202['dataset']['token']=_0xa72839,_0x4dd202['dataset'][_0x49c25a(0x1ce)]=_0x49c25a(0x1fc)+_0xa72839,_0x4dd202['dataset'][_0x49c25a(0x1fb)]=_0x1b09a0['price'];const _0x52aecf=userData['isAdmin']&&userOwnsToken(_0xa72839)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20('+Math['floor'](_0x1b09a0['price']*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x4dd202['innerHTML']=_0x49c25a(0x1b9)+_0x1b09a0['image']+'\x22\x20alt=\x22'+_0x1b09a0['name']+'\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+_0x1b09a0[_0x49c25a(0x1fb)]+'\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x52aecf+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x55f294['appendChild'](_0x4dd202);}),setupTokenButtons();}function setupThemeButtons(){const _0x18fce6=document['querySelectorAll']('.theme-select-btn');_0x18fce6['forEach'](_0x5cc5fb=>{const _0x10c62e=a46_0x39a5;_0x5cc5fb[_0x10c62e(0x204)](_0x10c62e(0x1ed),async _0x3b5405=>{const _0x2c9ca0=_0x10c62e;_0x3b5405['preventDefault']();const _0x491343=auth['currentUser'];if(!_0x491343){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x4c161f=_0x5cc5fb['closest'](_0x2c9ca0(0x206)),_0x39bae2=_0x4c161f[_0x2c9ca0(0x1e8)]['theme'],_0x32867a=THEMES[_0x39bae2];if(!_0x32867a){console['error'](_0x2c9ca0(0x1da)+_0x39bae2+'\x20not\x20found');return;}console['log'](_0x2c9ca0(0x1a4)+_0x32867a['name']+'\x20('+_0x39bae2+')');if(_0x5cc5fb[_0x2c9ca0(0x1f5)]){_0x32867a['price']>0x0&&showMessage('You\x20need\x20'+_0x32867a[_0x2c9ca0(0x1fb)]+_0x2c9ca0(0x20b),'error');return;}if(_0x5cc5fb['textContent']==='Current\x20Theme'){showMessage(_0x32867a['name']+_0x2c9ca0(0x1a5),_0x2c9ca0(0x1e7));return;}if(_0x5cc5fb['textContent']==='Apply\x20Theme'){applyTheme(_0x39bae2),updateThemeButtons();return;}if(_0x5cc5fb[_0x2c9ca0(0x1fe)][_0x2c9ca0(0x1c0)]('Buy')){const _0x3ea71e=window['confirm']('Purchase\x20'+_0x32867a[_0x2c9ca0(0x1b0)]+_0x2c9ca0(0x1e2)+_0x32867a[_0x2c9ca0(0x1fb)]+'\x20points?');if(!_0x3ea71e)return;const _0xf53147=await purchaseTheme(_0x39bae2);_0xf53147&&(showMessage(_0x32867a['name']+'\x20theme\x20purchased!','success'),applyTheme(_0x39bae2),updateThemeButtons());return;}userOwnsTheme(_0x39bae2)?applyTheme(_0x39bae2):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function setupTokenButtons(){const _0x5890e5=a46_0x17937c,_0x29a40d=document[_0x5890e5(0x21e)]('.token-select-btn'),_0x30e66a=document[_0x5890e5(0x21e)]('.token-equip-btn'),_0x581488=document[_0x5890e5(0x21e)]('.token-sell-btn');_0x29a40d[_0x5890e5(0x195)](_0x3249dd=>{_0x3249dd['addEventListener']('click',async _0x1a6392=>{const _0x447e63=a46_0x39a5;_0x1a6392['preventDefault']();const _0x1f6d17=auth['currentUser'];if(!_0x1f6d17){showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens',_0x447e63(0x19f));return;}const _0xdfef78=_0x3249dd['closest']('[data-token]'),_0xd54f8f=_0xdfef78[_0x447e63(0x1e8)][_0x447e63(0x1d3)],_0x474afe=TOKENS[_0xd54f8f];if(!_0x474afe){console[_0x447e63(0x19f)](_0x447e63(0x18f)+_0xd54f8f+_0x447e63(0x1e9));return;}console['log'](_0x447e63(0x1c3)+_0x474afe['name']+'\x20('+_0xd54f8f+')');if(_0x3249dd[_0x447e63(0x1f5)]){showMessage('You\x20need\x20'+_0x474afe[_0x447e63(0x1fb)]+_0x447e63(0x1d2),'error');return;}if(_0x3249dd[_0x447e63(0x1fe)]==='Owned'){showMessage('You\x20already\x20own\x20the\x20'+_0x474afe['name']+'\x20token',_0x447e63(0x1e7));return;}if(_0x3249dd['textContent']['includes']('Purchase')||_0x3249dd[_0x447e63(0x1fe)]['includes']('Buy')){const _0x915c59=window['confirm']('Purchase\x20'+_0x474afe['name']+'\x20token\x20for\x20'+_0x474afe['price']+'\x20points?');if(!_0x915c59)return;const _0x32dacd=await purchaseToken(_0xd54f8f);_0x32dacd&&updateTokenButtons();return;}});}),_0x30e66a[_0x5890e5(0x195)](_0x124d78=>{_0x124d78['addEventListener']('click',async _0x3ed07e=>{const _0x449932=a46_0x39a5;_0x3ed07e['preventDefault']();const _0x75d050=_0x124d78['closest']('[data-token]'),_0x5b313f=_0x75d050[_0x449932(0x1e8)]['token'],_0x3ce6e5=TOKENS[_0x5b313f];if(_0x124d78['textContent']==='Equipped'){const _0x2e654a=window[_0x449932(0x1eb)](_0x449932(0x1f3)+_0x3ce6e5['name']+'?');if(!_0x2e654a)return;const _0x3a0bbd=await unequipToken();_0x3a0bbd&&updateTokenButtons();}else{const _0xa87d7f=window['confirm']('Equip\x20'+_0x3ce6e5['name']+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0xa87d7f)return;const _0x2e79cc=await equipToken(_0x5b313f);_0x2e79cc&&updateTokenButtons();}});}),_0x581488[_0x5890e5(0x195)](_0x2c87d4=>{_0x2c87d4['addEventListener']('click',async _0x2232c3=>{const _0x59ea76=a46_0x39a5;_0x2232c3['preventDefault']();const _0x2cdb84=_0x2c87d4[_0x59ea76(0x1d7)]('[data-token]'),_0x372540=_0x2cdb84['dataset']['token'],_0x28e837=TOKENS[_0x372540],_0x4e4782=Math['floor'](_0x28e837['price']*0.5),_0x5c933d=window['confirm'](_0x59ea76(0x193)+_0x28e837[_0x59ea76(0x1b0)]+'\x20for\x20'+_0x4e4782+_0x59ea76(0x227));if(!_0x5c933d)return;const _0x146cbd=await sellToken(_0x372540);_0x146cbd&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0x556f12=a46_0x17937c,_0x16f172=window['ThemeSystem']?window['ThemeSystem'][_0x556f12(0x1c6)]():'default',_0x19a4e9=auth['currentUser'];document['querySelectorAll'](_0x556f12(0x1ec))['forEach'](_0x5af22b=>{const _0x50df97=_0x556f12,_0x3809b1=_0x5af22b['closest']('[data-theme]'),_0x44096d=_0x3809b1['dataset']['theme'],_0x44bffe=THEMES[_0x44096d];if(!_0x44bffe)return;_0x5af22b['disabled']=![],_0x5af22b['style']['opacity']='',_0x5af22b['style']['cursor']='pointer',_0x5af22b['classList']['remove']('current-theme','apply-theme','can-afford','cannot-afford','sign-in-free',_0x50df97(0x1fd));if(!_0x19a4e9){_0x44bffe[_0x50df97(0x1fb)]===0x0?(_0x5af22b[_0x50df97(0x1fe)]='Sign\x20in\x20to\x20Apply',_0x5af22b[_0x50df97(0x1e6)]['add']('sign-in-free')):(_0x5af22b[_0x50df97(0x1fe)]='Sign\x20in\x20to\x20Purchase',_0x5af22b[_0x50df97(0x1f5)]=!![],_0x5af22b['style']['opacity']='0.7',_0x5af22b['classList']['add']('sign-in-paid'));return;}if(_0x44096d===_0x16f172){_0x5af22b['textContent']='Current\x20Theme',_0x5af22b['classList'][_0x50df97(0x212)](_0x50df97(0x1bd)),_0x5af22b[_0x50df97(0x1f5)]=!![],_0x5af22b['style']['cursor']='default';return;}if(userOwnsTheme(_0x44096d)){_0x5af22b['textContent']='Apply\x20Theme',_0x5af22b['classList'][_0x50df97(0x212)]('apply-theme');return;}if(userData['points']>=_0x44bffe[_0x50df97(0x1fb)]){_0x5af22b['textContent']=_0x50df97(0x1e4)+_0x44bffe['price']+'\x20Points',_0x5af22b['classList']['add']('can-afford');return;}_0x5af22b['textContent']=_0x50df97(0x1e5)+_0x44bffe[_0x50df97(0x1fb)]+_0x50df97(0x1d4),_0x5af22b['classList'][_0x50df97(0x212)]('cannot-afford'),_0x5af22b['style'][_0x50df97(0x205)]='0.5',_0x5af22b['disabled']=!![],_0x5af22b['style']['cursor']='not-allowed';});}function updateTokenButtons(){const _0x275f0e=a46_0x17937c,_0x897daf=auth['currentUser'];document[_0x275f0e(0x21e)]('.token-select-btn')[_0x275f0e(0x195)](_0x5088ac=>{const _0x3520c5=_0x275f0e,_0x157b69=_0x5088ac['closest']('[data-token]'),_0x42a13e=_0x157b69['dataset'][_0x3520c5(0x1d3)],_0x4aada7=TOKENS[_0x42a13e],_0x302b7e=_0x157b69['querySelector']('.token-equip-btn'),_0x4ae931=_0x157b69['querySelector'](_0x3520c5(0x19a));if(!_0x4aada7)return;_0x5088ac['disabled']=![],_0x5088ac['style']['opacity']='',_0x5088ac['style']['cursor']='pointer';_0x302b7e&&(_0x302b7e[_0x3520c5(0x221)][_0x3520c5(0x207)]=_0x3520c5(0x199),_0x302b7e['disabled']=![],_0x302b7e['style'][_0x3520c5(0x205)]='',_0x302b7e['classList']['remove']('equipped','can-equip'));_0x4ae931&&(_0x4ae931[_0x3520c5(0x221)]['display']='none');_0x5088ac['classList'][_0x3520c5(0x201)](_0x3520c5(0x1b4),'can-afford','cannot-afford','sign-in');if(!_0x897daf){_0x5088ac[_0x3520c5(0x1fe)]='Sign\x20in\x20to\x20Purchase',_0x5088ac['disabled']=!![],_0x5088ac['style']['opacity']='0.7',_0x5088ac['classList'][_0x3520c5(0x212)]('sign-in');return;}if(userOwnsToken(_0x42a13e)){_0x5088ac[_0x3520c5(0x1fe)]='Owned',_0x5088ac['classList']['add'](_0x3520c5(0x1b4)),_0x5088ac[_0x3520c5(0x1f5)]=!![],_0x5088ac['style']['cursor']=_0x3520c5(0x1cb),_0x5088ac['style'][_0x3520c5(0x1c5)]='var(--success-color,\x20#4CAF50)';_0x302b7e&&(_0x302b7e[_0x3520c5(0x221)]['display']=_0x3520c5(0x1b7),userHasTokenEquipped(_0x42a13e)?(_0x302b7e['textContent']='Equipped',_0x302b7e['classList']['add']('equipped'),_0x302b7e[_0x3520c5(0x221)]['background']='var(--accent-color,\x20#2196F3)',_0x302b7e[_0x3520c5(0x221)]['cursor']=_0x3520c5(0x1b1)):(_0x302b7e[_0x3520c5(0x1fe)]=_0x3520c5(0x192),_0x302b7e['classList']['add']('can-equip'),_0x302b7e['style'][_0x3520c5(0x1c5)]='var(--info-color,\x20#17a2b8)',_0x302b7e['style']['cursor']='pointer'));_0x4ae931&&userData['isAdmin']&&(_0x4ae931['style'][_0x3520c5(0x207)]='block');return;}if(userData['points']>=_0x4aada7['price']){_0x5088ac['textContent']=_0x3520c5(0x1e4)+_0x4aada7[_0x3520c5(0x1fb)]+'\x20Points',_0x5088ac['classList']['add'](_0x3520c5(0x209)),_0x5088ac['style']['background']='';return;}_0x5088ac[_0x3520c5(0x1fe)]='Need\x20'+_0x4aada7[_0x3520c5(0x1fb)]+'\x20Points',_0x5088ac['classList']['add'](_0x3520c5(0x1bb)),_0x5088ac['style'][_0x3520c5(0x205)]=_0x3520c5(0x1dc),_0x5088ac['disabled']=!![],_0x5088ac['style']['cursor']='not-allowed',_0x5088ac['style']['background']='var(--muted-color,\x20#757575)';});}function showMessage(_0x585f3f,_0x1e5d63='info'){const _0x50bd07=a46_0x17937c,_0x57edda=document[_0x50bd07(0x1c7)]('store-message');_0x57edda&&_0x57edda['remove']();const _0x52a90a=document['createElement']('div');_0x52a90a['id']='store-message',_0x52a90a['className']='store-message\x20store-message-'+_0x1e5d63,_0x52a90a['textContent']=_0x585f3f,document['body'][_0x50bd07(0x197)](_0x52a90a),requestAnimationFrame(()=>{const _0x39adf7=_0x50bd07;_0x52a90a['classList']['add'](_0x39adf7(0x220));}),setTimeout(()=>{_0x52a90a['classList']['remove']('visible'),setTimeout(()=>{_0x52a90a['parentNode']&&_0x52a90a['remove']();},0x12c);},0xfa0);}window[a46_0x17937c(0x1b2)]={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console['log']('🏪\x20Redeem\x20store\x20loaded');