const a44_0x59e1ff=(function(){let _0xcec90a=!![];return function(_0x25fe83,_0x16f409){const _0x4c74b2=_0xcec90a?function(){if(_0x16f409){const _0x162cf4=_0x16f409['apply'](_0x25fe83,arguments);return _0x16f409=null,_0x162cf4;}}:function(){};return _0xcec90a=![],_0x4c74b2;};}()),a44_0x2b3039=a44_0x59e1ff(this,function(){const _0x31d133=a44_0x9da5,_0x2f464=function(){const _0x3d0b02=a44_0x9da5;let _0x3955bf;try{_0x3955bf=Function('return\x20(function()\x20'+_0x3d0b02(0x141)+');')();}catch(_0xdbed99){_0x3955bf=window;}return _0x3955bf;},_0x2890f8=_0x2f464(),_0xcc5e52=_0x2890f8[_0x31d133(0x13f)]=_0x2890f8['console']||{},_0x5e1f40=[_0x31d133(0x139),'warn',_0x31d133(0x135),'error','exception','table','trace'];for(let _0xc6d49f=0x0;_0xc6d49f<_0x5e1f40['length'];_0xc6d49f++){const _0x14e5f5=a44_0x59e1ff['constructor'][_0x31d133(0x13d)]['bind'](a44_0x59e1ff),_0x54c34d=_0x5e1f40[_0xc6d49f],_0x43c209=_0xcc5e52[_0x54c34d]||_0x14e5f5;_0x14e5f5['__proto__']=a44_0x59e1ff['bind'](a44_0x59e1ff),_0x14e5f5['toString']=_0x43c209[_0x31d133(0x142)]['bind'](_0x43c209),_0xcc5e52[_0x54c34d]=_0x14e5f5;}});a44_0x2b3039();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function a44_0x1f0a(){const _0x2ffeb0=['block','lastUpdated','info','style','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','Error\x20removing\x20player\x20from\x20queue:','log','getElementById','Error\x20in\x20queue\x20listener:','Just\x20now','prototype','toDate','console','forEach','{}.constructor(\x22return\x20this\x22)(\x20)','toString','readyPlayers'];a44_0x1f0a=function(){return _0x2ffeb0;};return a44_0x1f0a();}function a44_0x9da5(_0x229ebd,_0x293b6f){const _0x2b3039=a44_0x1f0a();return a44_0x9da5=function(_0x59e1ff,_0x3dd980){_0x59e1ff=_0x59e1ff-0x133;let _0x1f0a04=_0x2b3039[_0x59e1ff];return _0x1f0a04;},a44_0x9da5(_0x229ebd,_0x293b6f);}function updateQueueDisplay(_0x449111){const _0xaa9e98=a44_0x9da5,_0x39fba4=document[_0xaa9e98(0x13a)]('queue-container');if(!_0x39fba4)return;if(_0x449111['length']===0x0){_0x39fba4[_0xaa9e98(0x136)]['display']='none';return;}_0x39fba4['style']['display']=_0xaa9e98(0x133);let _0x3b7ade='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x449111[_0xaa9e98(0x140)](_0x2b38ea=>{_0x3b7ade+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x2b38ea['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x2b38ea['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x3b7ade+=_0xaa9e98(0x137),_0x39fba4['innerHTML']=_0x3b7ade;}function formatQueueTime(_0x468621){const _0x47d661=a44_0x9da5;if(!_0x468621)return _0x47d661(0x13c);const _0x2bc7ea=_0x468621['toDate']?_0x468621[_0x47d661(0x13e)]():new Date(_0x468621),_0x39be64=new Date(),_0x294849=Math['floor']((_0x39be64-_0x2bc7ea)/0xea60);if(_0x294849<0x1)return _0x47d661(0x13c);return _0x294849+'m\x20in\x20queue';}async function checkQueueTimeout(_0x4c66ff){const _0x53339f=a44_0x9da5;if(!_0x4c66ff['lastUpdated'])return;const _0x5dfd03=_0x4c66ff[_0x53339f(0x134)]['toDate']?_0x4c66ff[_0x53339f(0x134)]['toDate']():new Date(_0x4c66ff['lastUpdated']),_0x48a8d9=new Date(),_0x5b60e8=Math['floor']((_0x48a8d9-_0x5dfd03)/0xea60);if(_0x5b60e8>=0x1e)try{const _0x37f0c5=doc(db,_0x53339f(0x143),_0x4c66ff['id']);await updateDoc(_0x37f0c5,{'isReady':![]});}catch(_0x25ff67){console['error'](_0x53339f(0x138),_0x25ff67);}}const unsubscribe=onSnapshot(readyPlayersRef,_0xfacfd2=>{const _0x3b9b28=a44_0x9da5,_0x3490c0=[];_0xfacfd2[_0x3b9b28(0x140)](_0x581650=>{const _0x29359b=_0x581650['data']();if(_0x29359b['isReady']===!![]){const _0x5ada3f={'id':_0x581650['id'],'username':_0x29359b['username'],'lastUpdated':_0x29359b['lastUpdated']||new Date()};_0x3490c0['push'](_0x5ada3f),checkQueueTimeout(_0x5ada3f);}}),updateQueueDisplay(_0x3490c0);},_0x5dc33a=>{const _0xff9b72=a44_0x9da5;console['error'](_0xff9b72(0x13b),_0x5dc33a);});window['addEventListener']('unload',()=>{unsubscribe();});