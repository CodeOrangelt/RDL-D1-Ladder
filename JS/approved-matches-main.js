const a6_0x1e8126=a6_0x17a2,a6_0x1de305=(function(){let _0xd2a13f=!![];return function(_0x39bab1,_0x4c7279){const _0x2c17ad=_0xd2a13f?function(){if(_0x4c7279){const _0x50104b=_0x4c7279['apply'](_0x39bab1,arguments);return _0x4c7279=null,_0x50104b;}}:function(){};return _0xd2a13f=![],_0x2c17ad;};}()),a6_0x12cfe3=a6_0x1de305(this,function(){const _0xf31835=a6_0x17a2,_0x553e18=function(){let _0x49a079;try{_0x49a079=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x294a8f){_0x49a079=window;}return _0x49a079;},_0x1bb4b8=_0x553e18(),_0x117384=_0x1bb4b8['console']=_0x1bb4b8['console']||{},_0x536ff7=[_0xf31835(0x84),_0xf31835(0x93),'info','error',_0xf31835(0xe6),'table','trace'];for(let _0x319653=0x0;_0x319653<_0x536ff7[_0xf31835(0xb7)];_0x319653++){const _0x19411f=a6_0x1de305['constructor'][_0xf31835(0x99)]['bind'](a6_0x1de305),_0x3173d2=_0x536ff7[_0x319653],_0x158d22=_0x117384[_0x3173d2]||_0x19411f;_0x19411f[_0xf31835(0x9b)]=a6_0x1de305['bind'](a6_0x1de305),_0x19411f['toString']=_0x158d22[_0xf31835(0xe4)]['bind'](_0x158d22),_0x117384[_0x3173d2]=_0x19411f;}});a6_0x12cfe3();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date(a6_0x1e8126(0xa3))['getTime']()}];function isUsernameMuted(_0x19947c,_0x568a19){const _0x4d03cb=a6_0x1e8126;if(!_0x19947c)return![];const _0x22346a=mutedUsers['find'](_0x4a0c15=>_0x4a0c15['username']===_0x19947c);if(!_0x22346a)return![];if(!_0x568a19)return!![];const _0x24ae11=_0x568a19 instanceof Date?_0x568a19[_0x4d03cb(0xbd)]():_0x568a19['seconds']?_0x568a19[_0x4d03cb(0xe5)]*0x3e8:Date[_0x4d03cb(0xca)]();return _0x24ae11>=_0x22346a['muteFromDate'];}function filterComment(_0x16f4e6,_0x2602cc,_0x40fd5b){const _0x4f9e06=a6_0x1e8126;if(!_0x16f4e6)return'-';if(isUsernameMuted(_0x2602cc,_0x40fd5b))return _0x4f9e06(0x128);return _0x16f4e6;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0xec3b70,_0x5c51aa,_0x156eb3){const _0x1f0b5b=a6_0x1e8126,_0x2b0f69='u:'+(_0x156eb3['filterUsername']||'');return _0x1f0b5b(0xbb)+_0xec3b70+'_p'+_0x5c51aa+'_'+_0x2b0f69;}function getCachedPage(_0x3367cf){const _0x1926db=a6_0x1e8126,_0x42d7fe=sessionStorage['getItem'](_0x3367cf);if(_0x42d7fe)try{return JSON[_0x1926db(0x90)](_0x42d7fe);}catch(_0x5aa30b){return console['error'](_0x1926db(0xcb),_0x5aa30b),sessionStorage[_0x1926db(0x113)](_0x3367cf),null;}return null;}function cachePage(_0xb9478f,_0xd4a3d7){const _0x4af7d2=a6_0x1e8126;try{sessionStorage[_0x4af7d2(0xb3)](_0xb9478f,JSON[_0x4af7d2(0xeb)](_0xd4a3d7));}catch(_0x4f36a5){console[_0x4af7d2(0xf3)]('Failed\x20to\x20cache\x20data:',_0x4f36a5);}}function getEloColor(_0xaa2ab7){const _0x431a4f=a6_0x1e8126,_0x7c254e=Number(_0xaa2ab7);if(_0x7c254e>=0x7d0)return _0x431a4f(0xc5);else{if(_0x7c254e>=0x708)return _0x431a4f(0x80);else{if(_0x7c254e>=0x640)return _0x431a4f(0x12e);else{if(_0x7c254e>=0x578)return'#CD7F32';else return'#808080';}}}}function formatDate(_0x3bc287,_0x16bba1=![]){const _0x2fffe5=a6_0x1e8126;if(!_0x3bc287||!_0x3bc287[_0x2fffe5(0xe5)])return _0x2fffe5(0xc6);const _0x22562d=new Date(_0x3bc287['seconds']*0x3e8);return _0x16bba1?_0x22562d[_0x2fffe5(0xd3)]():_0x22562d['toLocaleDateString']();}function truncateComment(_0x3d45d6,_0x5b2fa0=0x1e){const _0x579e5a=a6_0x1e8126;if(!_0x3d45d6)return'-';if(_0x3d45d6[_0x579e5a(0xb7)]<=_0x5b2fa0)return _0x3d45d6;return _0x3d45d6['substring'](0x0,_0x5b2fa0)+'...';}function formatCommentDate(_0x59c78e){const _0x2bf279=a6_0x1e8126;if(!_0x59c78e||!_0x59c78e[_0x2bf279(0xe5)])return'';const _0x4c9d59=new Date(_0x59c78e['seconds']*0x3e8),_0xb3742a=new Date(),_0x4678e9=Math['abs'](_0xb3742a-_0x4c9d59),_0x5ba73f=Math['floor'](_0x4678e9/(0x3e8*0x3c*0x3c*0x18));if(_0x5ba73f===0x0)return'Today';else{if(_0x5ba73f===0x1)return _0x2bf279(0xaa);else return _0x5ba73f<0x7?_0x5ba73f+'\x20days\x20ago':_0x4c9d59[_0x2bf279(0x119)]();}}function setLoadingIndicator(_0x39792b){const _0x45fa53=a6_0x1e8126,_0x34b282=document['getElementById']('loading-indicator');if(_0x34b282)_0x34b282['style'][_0x45fa53(0xac)]=_0x39792b?'block':_0x45fa53(0x82);}export function updatePreviewLadderModeUI(){const _0x417eb4=a6_0x1e8126,_0x839670=document['getElementById']('preview-ladder-mode'),_0x42376f=document['getElementById']('preview-d1-button'),_0x143c04=document[_0x417eb4(0x104)]('preview-d2-button'),_0x37641e=document[_0x417eb4(0x104)]('preview-d3-button');if(_0x839670)_0x839670['textContent']=previewState['currentMode'];if(_0x42376f)_0x42376f['classList']['toggle']('active',previewState['currentMode']==='D1');if(_0x143c04)_0x143c04['classList']['toggle']('active',previewState['currentMode']==='D2');if(_0x37641e)_0x37641e['classList']['toggle']('active',previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x5118b0){const _0x4d9e0d=a6_0x1e8126,_0x1182ff=document['getElementById'](_0x4d9e0d(0x8e)),_0x594050=document['getElementById'](_0x4d9e0d(0x8f)),_0x13be07=document['getElementById']('previewPageInfo');if(!_0x1182ff||!_0x594050||!_0x13be07)return;_0x13be07['textContent']='Page\x20'+previewState['currentPage'],_0x1182ff['disabled']=previewState['currentPage']<=0x1,_0x594050[_0x4d9e0d(0xf9)]=!_0x5118b0;}function setPreviewLoadingState(_0x114c89){const _0x3ad471=a6_0x1e8126;previewState[_0x3ad471(0xf2)]=_0x114c89,setLoadingIndicator(_0x114c89);const _0x2e3e36=document[_0x3ad471(0x104)](_0x3ad471(0xe0)),_0x5bb08c=_0x2e3e36?_0x2e3e36['querySelector']('.matches-loading'):null,_0x2f61de=document['getElementById']('previewPrevPage'),_0x4a6532=document['getElementById']('previewNextPage'),_0x869da6=document['getElementById'](_0x3ad471(0x10c)),_0x24b773=document['getElementById']('preview-d2-button'),_0x10ad30=document['getElementById'](_0x3ad471(0x123)),_0x530f8c=document['getElementById']('clearFilterBtn');if(_0x5bb08c&&!_0x114c89)_0x5bb08c[_0x3ad471(0xe7)][_0x3ad471(0xac)]='none';else _0x5bb08c&&_0x114c89&&(_0x5bb08c[_0x3ad471(0xe7)]['display']='block');!_0x114c89&&_0x2e3e36&&!_0x2e3e36[_0x3ad471(0xdb)](_0x3ad471(0xa2))&&!_0x2e3e36['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x2e3e36['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState[_0x3ad471(0xf8)]?_0x3ad471(0xea):'')+'.</div>');if(_0x2f61de)_0x2f61de['disabled']=_0x114c89||previewState[_0x3ad471(0xf6)]<=0x1;if(_0x4a6532)_0x4a6532[_0x3ad471(0xf9)]=_0x114c89;if(_0x869da6)_0x869da6[_0x3ad471(0xf9)]=_0x114c89;if(_0x24b773)_0x24b773['disabled']=_0x114c89;if(_0x10ad30)_0x10ad30['disabled']=_0x114c89;if(_0x530f8c)_0x530f8c['disabled']=_0x114c89;}function applyClientFilters(_0x495660){const _0x2bd08d=a6_0x1e8126;if(!previewState['filterUsername'])return _0x495660;const _0x33e2b5=previewState['filterUsername'][_0x2bd08d(0xd1)]();return _0x495660['filter'](_0x4495eb=>{const _0x2be247=_0x2bd08d,_0x4dcca9=(_0x4495eb[_0x2be247(0x10a)]||'')['toLowerCase'](),_0x268561=(_0x4495eb['loserUsername']||'')['toLowerCase']();return _0x4dcca9[_0x2be247(0xc0)](_0x33e2b5)||_0x268561['includes'](_0x33e2b5);});}function applyEnhancedClientFilters(_0x36fcde){if(!hasEnhancedFilters())return _0x36fcde;return _0x36fcde['filter'](_0x39c5e9=>{const _0x57a509=a6_0x17a2;if(previewState['enhancedFilters'][_0x57a509(0x9e)]){const _0x4d7d76=previewState[_0x57a509(0xef)]['pilots']['toLowerCase'](),_0x3d0552=(_0x39c5e9['winnerUsername']||'')[_0x57a509(0xd1)](),_0x4ef258=(_0x39c5e9[_0x57a509(0xf4)]||'')[_0x57a509(0xd1)]();if(!_0x3d0552['includes'](_0x4d7d76)&&!_0x4ef258['includes'](_0x4d7d76))return![];}if(previewState['enhancedFilters']['levels']){const _0x3b6de3=previewState['enhancedFilters'][_0x57a509(0x110)][_0x57a509(0xd1)](),_0x5a6f86=(_0x39c5e9['mapPlayed']||'')['toLowerCase']();if(!_0x5a6f86['includes'](_0x3b6de3))return![];}if(previewState['enhancedFilters']['subgames']['length']>0x0){const _0x224e15=_0x39c5e9['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames'][_0x57a509(0xc0)](_0x224e15))return![];}return!![];});}function hasEnhancedFilters(){return previewState['enhancedFilters']['pilots']||previewState['enhancedFilters']['levels']||previewState['enhancedFilters']['subgames']['length']>0x0;}function a6_0x17a2(_0x2f5e16,_0x239d88){const _0x12cfe3=a6_0x4a52();return a6_0x17a2=function(_0x1de305,_0x5c91be){_0x1de305=_0x1de305-0x80;let _0x4a523f=_0x12cfe3[_0x1de305];return _0x4a523f;},a6_0x17a2(_0x2f5e16,_0x239d88);}function clearEnhancedFilters(){const _0x5ece24=a6_0x1e8126;previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document[_0x5ece24(0x104)]('filter-pilots')['value']='',document['getElementById'](_0x5ece24(0xe8))['value']='';const _0x578ba3=document['getElementById']('filter-subgames');for(let _0x2b482b of _0x578ba3[_0x5ece24(0xd0)]){_0x2b482b['selected']=![];}}function jumpToPage(_0x52b089){const _0x469530=a6_0x1e8126,_0xacf694=document['getElementById']('jump-to-page'),_0x4957a7=previewState[_0x469530(0xf6)];let _0x1052fa=_0x4957a7;switch(_0x52b089){case'start':_0x1052fa=0x1;break;case _0x469530(0x108):_0x1052fa=Math[_0x469530(0xe2)](_0x4957a7+0xa,previewState[_0x469530(0xce)]||_0x4957a7+0xa);break;case'+1':_0x1052fa=_0x4957a7+0x1;break;case'+5':_0x1052fa=_0x4957a7+0x5;break;case'+10':_0x1052fa=_0x4957a7+0xa;break;case'-1':_0x1052fa=Math['max'](0x1,_0x4957a7-0x1);break;case'-5':_0x1052fa=Math['max'](0x1,_0x4957a7-0x5);break;case _0x469530(0xcf):_0x1052fa=Math['max'](0x1,_0x4957a7-0xa);break;case _0x469530(0xec):const _0x30a7c3=parseInt(_0xacf694['value']);_0x30a7c3&&_0x30a7c3>0x0&&(_0x1052fa=_0x30a7c3,_0xacf694['value']='');break;}_0x1052fa!==_0x4957a7&&_0x1052fa>0x0&&(previewState['currentPage']=_0x1052fa,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x233b9c='current'){const _0x5480d3=a6_0x1e8126,_0x3ad910=document['getElementById']('recent-matches-preview'),_0x344006=document['getElementById']('match-card-template');if(previewState['isLoading']||!_0x3ad910||!_0x344006)return;_0x233b9c==='current'&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)[_0x5480d3(0x98)](_0xd3d4f=>{const _0xa2026d=_0x5480d3;_0xd3d4f[_0xa2026d(0xc0)]('previewCache_'+previewState[_0xa2026d(0x102)])&&sessionStorage['removeItem'](_0xd3d4f);}));let _0x3c418f=previewState['currentPage'];if(_0x233b9c==='next')_0x3c418f++;else{if(_0x233b9c==='prev')_0x3c418f--;else _0x233b9c===_0x5480d3(0xab)&&(_0x3c418f=0x1,previewState['firstVisible']=null,previewState['lastVisible']=null);}if(_0x3c418f<0x1)_0x3c418f=0x1;const _0x2c53f0=previewState['currentPage'];previewState['currentPage']=_0x3c418f,updatePreviewPaginationControls(!![]);const _0x4a57ac={'filterUsername':previewState['filterUsername']},_0x2a4c89=getCacheKey(previewState['currentMode'],_0x3c418f,_0x4a57ac),_0x250033=_0x233b9c!=='current'?getCachedPage(_0x2a4c89):null;if(_0x250033){console['log'](_0x5480d3(0xc9)+_0x3c418f+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0x250033['docsData']),updatePreviewPaginationControls(_0x250033[_0x5480d3(0xfb)]),setPreviewLoadingState(![]);return;}console['log']('Cache\x20miss\x20for\x20page\x20'+_0x3c418f+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0x3ad910['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0xd1bd41=previewState[_0x5480d3(0x102)]==='D1'?'approvedMatches':previewState['currentMode']==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2e1c80=previewState['currentMode']==='D1'?_0x5480d3(0xdf):'approvedAt';try{const _0x526d6e=collection(window['db'],_0xd1bd41);let _0x3b3c0f=[orderBy(_0x2e1c80,'desc')];if(_0x3c418f===0x1)console[_0x5480d3(0x84)]('Loading\x20first\x20page\x20from\x20Firestore'),_0x3b3c0f[_0x5480d3(0x8b)](limit(previewState[_0x5480d3(0x116)]));else{if(_0x233b9c===_0x5480d3(0xee)&&previewState[_0x5480d3(0x83)])console['log'](_0x5480d3(0x87)),_0x3b3c0f[_0x5480d3(0x8b)](startAfter(previewState['lastVisible'])),_0x3b3c0f['push'](limit(previewState['matchesPerPage']));else{console['log']('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x2267d9=_0x3c418f*previewState[_0x5480d3(0x116)];_0x3b3c0f[_0x5480d3(0x8b)](limit(_0x2267d9));}}const _0x2fec0f=query(_0x526d6e,..._0x3b3c0f),_0x16a763=await getDocs(_0x2fec0f);let _0x39f76f=_0x16a763['docs'];if(_0x3c418f>0x1&&_0x233b9c!=='next'){const _0x5f48ee=(_0x3c418f-0x1)*previewState['matchesPerPage'];_0x39f76f=_0x39f76f['slice'](_0x5f48ee,_0x5f48ee+previewState['matchesPerPage']);}if(_0x39f76f[_0x5480d3(0xb7)]===0x0){console['log']('No\x20results\x20found\x20for\x20this\x20page');_0x233b9c===_0x5480d3(0xee)&&(previewState['currentPage']=_0x2c53f0,updatePreviewPaginationControls(![]));_0x3ad910['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?'\x20matching\x20filters':'')+'.</div>',setPreviewLoadingState(![]);return;}previewState[_0x5480d3(0x11e)]=_0x39f76f[0x0],previewState[_0x5480d3(0x83)]=_0x39f76f[_0x39f76f['length']-0x1];const _0x180e0b=_0x39f76f['map'](_0x1b8ecb=>({'id':_0x1b8ecb['id'],..._0x1b8ecb['data']()}));let _0x35d701=![];if(_0x39f76f[_0x5480d3(0xb7)]===previewState[_0x5480d3(0x116)]){const _0x132865=query(_0x526d6e,orderBy(_0x2e1c80,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),_0x3ec277=await getDocs(_0x132865);_0x35d701=!_0x3ec277[_0x5480d3(0xa7)];}const _0x3dc506=applyClientFilters(_0x180e0b),_0x27269b={'docsData':_0x180e0b,'hasNextPage':_0x35d701};cachePage(getCacheKey(previewState['currentMode'],previewState['currentPage'],_0x4a57ac),_0x27269b);if(_0x3c418f>0x1&&_0x233b9c!==_0x5480d3(0xee))for(let _0xa31704=0x1;_0xa31704<_0x3c418f;_0xa31704++){const _0x459e82=(_0xa31704-0x1)*previewState['matchesPerPage'],_0x31c392=_0x459e82+previewState['matchesPerPage'],_0x14f7c6=_0x16a763['docs']['slice'](_0x459e82,_0x31c392);if(_0x14f7c6['length']>0x0){const _0x5dc912=_0x14f7c6[_0x5480d3(0xaf)](_0x21b8b9=>({'id':_0x21b8b9['id'],..._0x21b8b9['data']()})),_0x102755=!![];cachePage(getCacheKey(previewState[_0x5480d3(0x102)],_0xa31704,_0x4a57ac),{'docsData':_0x5dc912,'hasNextPage':_0x102755}),console[_0x5480d3(0x84)]('Cached\x20intermediary\x20page\x20'+_0xa31704);}}_0x3dc506['length']===0x0&&previewState['filterUsername']?_0x3ad910[_0x5480d3(0x112)]=_0x5480d3(0xf1)+previewState['filterUsername']+'\x22</div>':renderMatchCards(_0x3dc506),updatePreviewPaginationControls(_0x35d701);}catch(_0x275333){console[_0x5480d3(0xf3)](_0x5480d3(0x106)+previewState[_0x5480d3(0x102)]+_0x5480d3(0x103),_0x275333),_0x3ad910['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x275333['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x2c53f0;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x5b19da){const _0x1c17e7=a6_0x1e8126,_0x103254=document['getElementById'](_0x1c17e7(0xe0)),_0x5c7f2f=document['getElementById']('match-card-template');if(!_0x103254||!_0x5c7f2f)return;!_0x103254['querySelector'](_0x1c17e7(0x94))&&(_0x103254['innerHTML']='');if(!_0x5b19da||_0x5b19da['length']===0x0){if(!_0x103254['querySelector'](_0x1c17e7(0x94))){const _0x1dcefb=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?_0x1c17e7(0xea):'';_0x103254[_0x1c17e7(0x112)]='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x1dcefb+_0x1c17e7(0xc8);}return;}const _0x53c122=applyEnhancedClientFilters(_0x5b19da);if(_0x53c122['length']===0x0){_0x103254['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x30b5b4=_0x53c122['map'](_0x3893c7=>getAllCommentsForMatch(_0x3893c7['id']));let _0x556593=[];try{_0x556593=await Promise['all'](_0x30b5b4);}catch(_0x1c74e2){console['error']('Error\x20fetching\x20comments\x20batch:',_0x1c74e2),_0x556593=_0x53c122[_0x1c17e7(0xaf)](()=>[]);}const _0x4a9762={};_0x556593['forEach']((_0x7df1f6,_0x2e7e87)=>{_0x4a9762[_0x53c122[_0x2e7e87]['id']]=_0x7df1f6||[];}),_0x53c122[_0x1c17e7(0x98)](_0x5dc55d=>{const _0x5daf23=_0x1c17e7,_0x16aeb8=_0x5c7f2f[_0x5daf23(0x124)]['cloneNode'](!![]),_0x585ac6=_0x16aeb8['querySelector']('.match-display-wrapper'),_0x370868=_0x16aeb8['querySelector']('.match-card'),_0x262c8d=getEloRankClass(_0x5dc55d[_0x5daf23(0xd5)]);_0x370868[_0x5daf23(0x88)]['add'](_0x5daf23(0x8a)+_0x262c8d),_0x370868[_0x5daf23(0xdb)]('.match-map')[_0x5daf23(0x114)]=_0x5dc55d[_0x5daf23(0x11d)]||'Unknown\x20Map',_0x370868['querySelector']('.match-date')[_0x5daf23(0x114)]=formatDate(_0x5dc55d['approvedAt']||_0x5dc55d['createdAt']);const _0x21dc3e=_0x370868['querySelector']('.player.winner\x20.player-name');_0x21dc3e['textContent']=_0x5dc55d['winnerUsername']||_0x5daf23(0xba),_0x21dc3e[_0x5daf23(0xe7)]['color']=getEloColor(_0x5dc55d[_0x5daf23(0xd5)]),_0x370868['querySelector'](_0x5daf23(0xd7))['textContent']=_0x5dc55d['winnerScore']??0x0;const _0x1b4f82=_0x370868[_0x5daf23(0xdb)]('.player.winner\x20.player-suicides'),_0x22f909=_0x5dc55d['winnerSuicides']||0x0;_0x1b4f82[_0x5daf23(0x114)]=_0x5daf23(0x81)+_0x22f909;const _0x3175d7=_0x370868[_0x5daf23(0xdb)]('.player.loser\x20.player-name');_0x3175d7['textContent']=_0x5dc55d['loserUsername']||'Unknown',_0x3175d7['style'][_0x5daf23(0xb1)]=getEloColor(_0x5dc55d['loserOldElo']),_0x370868['querySelector']('.player.loser\x20.player-score')['textContent']=_0x5dc55d['loserScore']??0x0;const _0x81b034=_0x370868[_0x5daf23(0xdb)]('.player.loser\x20.player-suicides'),_0x1ca602=_0x5dc55d['loserSuicides']||0x0;_0x81b034[_0x5daf23(0x114)]=_0x5daf23(0x81)+_0x1ca602;const _0x5e3afb=_0x370868['querySelector']('.match-subgame');if(_0x5e3afb){if(_0x5dc55d['subgameType']&&_0x5dc55d[_0x5daf23(0xa0)][_0x5daf23(0x12c)]()!==''){_0x5e3afb['textContent']=_0x5dc55d['subgameType'],_0x5e3afb[_0x5daf23(0xe7)]['display']='block';const _0x2e38d5=getSubgameClass(_0x5dc55d[_0x5daf23(0xa0)]);_0x2e38d5&&_0x5e3afb[_0x5daf23(0x88)]['add'](_0x2e38d5);}else _0x5e3afb['textContent']='Standard\x20Match',_0x5e3afb['style']['display']='block',_0x5e3afb['style'][_0x5daf23(0x130)]=_0x5daf23(0xd6);}const _0x3b4848=_0x370868['querySelector'](_0x5daf23(0x12b)),_0x2bbc83=_0x370868['querySelector'](_0x5daf23(0xe9)),_0x5b04a5=_0x5dc55d['winnerComment']||'',_0x586e54=_0x5dc55d[_0x5daf23(0x125)]||'',_0x219cac=_0x5dc55d['approvedAt']||_0x5dc55d['createdAt'],_0x5e6614=filterComment(_0x5b04a5,_0x5dc55d['winnerUsername'],_0x219cac),_0x297108=filterComment(_0x586e54,_0x5dc55d['loserUsername'],_0x219cac);_0x3b4848['textContent']='\x22'+truncateComment(_0x5b04a5)+'\x22',_0x2bbc83[_0x5daf23(0x114)]='\x22'+truncateComment(_0x586e54)+'\x22';_0x5b04a5&&!isUsernameMuted(_0x5dc55d['winnerUsername'],_0x219cac)?_0x3b4848['onclick']=()=>showPreviewCommentPopup(_0x5e6614,_0x5dc55d['winnerUsername']||'Winner',getEloColor(_0x5dc55d[_0x5daf23(0xd5)])):(_0x3b4848[_0x5daf23(0x114)]=_0x5e6614==='Muted.'?'Muted.':'-',_0x3b4848['style']['cursor']='default',_0x3b4848[_0x5daf23(0xbf)]=null);_0x586e54&&!isUsernameMuted(_0x5dc55d[_0x5daf23(0xf4)])?_0x2bbc83[_0x5daf23(0xbf)]=()=>showPreviewCommentPopup(_0x297108,_0x5dc55d['loserUsername']||'Loser',getEloColor(_0x5dc55d[_0x5daf23(0xe3)])):(_0x2bbc83['textContent']=_0x297108===_0x5daf23(0x128)?'Muted.':'-',_0x2bbc83[_0x5daf23(0xe7)]['cursor']='default',_0x2bbc83['onclick']=null);const _0x32a02c=_0x585ac6?.['querySelector']('.community-comments-section');if(!_0x32a02c)console['warn']('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0x251dd9=_0x32a02c[_0x5daf23(0xdb)]('.comments-container'),_0x1749b0=_0x251dd9?.['querySelector']('.no-comments-message'),_0x208d7e=_0x32a02c['querySelector']('.add-comment-btn');if(_0x251dd9){while(_0x251dd9[_0x5daf23(0x115)]&&_0x251dd9['firstChild']!==_0x1749b0){_0x251dd9['removeChild'](_0x251dd9['firstChild']);}_0x208d7e&&_0x208d7e['addEventListener'](_0x5daf23(0x89),()=>{showAddCommentPopup(_0x5dc55d['id']);});const _0x533302=_0x4a9762[_0x5dc55d['id']]||[];if(_0x533302['length']>0x0){if(_0x1749b0)_0x1749b0['style'][_0x5daf23(0xac)]=_0x5daf23(0x82);const _0x377df3=(_0x169858,_0x1fb78e)=>{const _0x1983a3=_0x169858['split']('\x20');if(_0x1983a3['length']<=_0x1fb78e)return _0x169858;return _0x1983a3['slice'](0x0,_0x1fb78e)['join']('\x20')+'...';};_0x533302['forEach'](_0x4b5c20=>{const _0x1a0280=_0x5daf23,_0x2cdf2e=document['createElement'](_0x1a0280(0xa1));if(_0x4b5c20['type']==='demo'){_0x2cdf2e[_0x1a0280(0x11c)]='demo-link',_0x2cdf2e[_0x1a0280(0x112)]=_0x1a0280(0x9f)+_0x4b5c20['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x4b5c20['username']+_0x1a0280(0x101)+(_0x4b5c20['description']||'No\x20description\x20provided')+_0x1a0280(0xb4);const _0x339ea8=window['auth']['currentUser'],_0x3e2e9b=_0x339ea8&&_0x4b5c20['userId']===_0x339ea8['uid'];if(_0x3e2e9b){const _0x514f70=document['createElement']('button');_0x514f70['className']='delete-comment-btn',_0x514f70[_0x1a0280(0x112)]='×',_0x514f70['setAttribute'](_0x1a0280(0xb0),'Delete\x20demo'),_0x514f70['addEventListener']('click',_0x19c430=>{const _0x2e16d1=_0x1a0280;_0x19c430['preventDefault'](),_0x19c430[_0x2e16d1(0xbe)](),deleteComment(_0x4b5c20['id'],_0x2cdf2e);}),_0x2cdf2e['appendChild'](_0x514f70);}}else{_0x2cdf2e['className']='comment-item';const _0x129806=isUsernameMuted(_0x4b5c20[_0x1a0280(0x109)],_0x4b5c20['timestamp']),_0x36eb27=_0x129806?_0x1a0280(0x128):_0x377df3(_0x4b5c20['text']||'',0xf),_0x4710b2=_0x4b5c20['username']||'Anonymous',_0x9b529=window['auth']['currentUser'],_0x578f07=_0x9b529&&_0x4b5c20['userId']===_0x9b529[_0x1a0280(0xfd)];let _0x36d782='';_0x578f07&&(_0x36d782=_0x1a0280(0x11a));_0x2cdf2e['innerHTML']=_0x36d782+_0x1a0280(0x8d)+_0x4710b2+':</strong>\x20\x22'+_0x36eb27+'\x22';if(_0x578f07){const _0xa3d761=_0x2cdf2e[_0x1a0280(0xdb)]('.delete-comment-btn');_0xa3d761&&_0xa3d761[_0x1a0280(0x95)](_0x1a0280(0x89),_0x2e897d=>{const _0x52aa88=_0x1a0280;_0x2e897d[_0x52aa88(0xbe)](),deleteComment(_0x4b5c20['id'],_0x2cdf2e);});}!_0x129806?_0x2cdf2e['addEventListener']('click',()=>{showFullCommentLightbox(_0x4b5c20);}):_0x2cdf2e[_0x1a0280(0xe7)][_0x1a0280(0xed)]='default';}_0x251dd9['insertBefore'](_0x2cdf2e,_0x251dd9['firstChild']);});}else{if(_0x1749b0)_0x1749b0['style']['display']=_0x5daf23(0xde);}}}const _0x5b3063=_0x370868['querySelector'](_0x5daf23(0xae));if(_0x5b3063){const _0xfd36f5=_0x370868['querySelector'](_0x5daf23(0xc2)),_0x52b294=_0x370868['querySelector']('.loser-demo-link'),_0x58dd73=_0x5dc55d['winnerDemoLink']||null,_0x1c469e=_0x5dc55d['loserDemoLink']||_0x5dc55d[_0x5daf23(0x92)]||null;console['log']('Match\x20'+_0x5dc55d['id']+'\x20demo\x20links:',{'winner':_0x58dd73,'loser':_0x1c469e}),_0xfd36f5&&(_0x58dd73?(_0xfd36f5['href']=_0x58dd73,_0xfd36f5[_0x5daf23(0xe7)]['display']='flex',_0xfd36f5['title']=_0x5dc55d['winnerUsername']+_0x5daf23(0xa9)):_0xfd36f5['style']['display']='none'),_0x52b294&&(_0x1c469e?(_0x52b294[_0x5daf23(0xad)]=_0x1c469e,_0x52b294['style']['display']='flex',_0x52b294[_0x5daf23(0xd2)]=_0x5dc55d['loserUsername']+'\x27s\x20Demo'):_0x52b294['style']['display']='none'),_0x58dd73&&_0xfd36f5||_0x1c469e&&_0x52b294?_0x5b3063['style'][_0x5daf23(0xac)]='flex':_0x5b3063['style']['display']='none';}_0x103254[_0x5daf23(0xcd)](_0x16aeb8);});}function getSubgameClass(_0x19416a){const _0x25bcb3=a6_0x1e8126,_0x21b3dc={'Fusion\x20Match':_0x25bcb3(0x12d),'≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':_0x25bcb3(0x9d),'Blind\x20Match':'blind-match','Rematch':'rematch','Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':'altered-powerups','Mega\x20Match':'mega-match','Dogfight':_0x25bcb3(0xfe),'Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x21b3dc[_0x19416a]||'';}async function deleteComment(_0x4962e6,_0x2085c3){const _0x187a8c=a6_0x1e8126,_0xcf6028=window['auth'][_0x187a8c(0xb6)];if(!_0xcf6028){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x28febe=doc(window['db'],_0x187a8c(0xff),_0x4962e6),_0x222487=await getDoc(_0x28febe);if(!_0x222487['exists']()){alert(_0x187a8c(0xfc));return;}const _0x5c8fb1=_0x222487['data']();if(_0x5c8fb1['userId']!==_0xcf6028[_0x187a8c(0xfd)]){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x28febe);if(_0x2085c3&&_0x2085c3['parentNode']){_0x2085c3['parentNode'][_0x187a8c(0x85)](_0x2085c3);const _0x3d8e6c=_0x2085c3['closest']('.comments-container');if(_0x3d8e6c&&!_0x3d8e6c['querySelector']('.comment-item')){const _0x1551e6=_0x3d8e6c['querySelector']('.no-comments-message');if(_0x1551e6)_0x1551e6['style'][_0x187a8c(0xac)]='block';}}console[_0x187a8c(0x84)]('Comment\x20deleted\x20successfully');}catch(_0x261689){console['error']('Error\x20deleting\x20comment:',_0x261689),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x261689[_0x187a8c(0xd9)]);}}async function getAllCommentsForMatch(_0xfd27b8){const _0x931618=a6_0x1e8126;if(!_0xfd27b8)return[];try{const _0x5a2941=collection(window['db'],'matchComments'),_0x4ebd49=query(_0x5a2941,where('matchId','==',_0xfd27b8),orderBy('timestamp','desc')),_0x8d4d23=await getDocs(_0x4ebd49);if(_0x8d4d23[_0x931618(0xa7)])return[];return _0x8d4d23['docs']['map'](_0x27f3c7=>({'id':_0x27f3c7['id'],..._0x27f3c7['data']()}));}catch(_0x4ede92){return console['error']('Error\x20fetching\x20comments:',_0x4ede92),[];}}async function submitComment(_0x3f73f3){const _0x3dc904=a6_0x1e8126;_0x3f73f3['preventDefault']();if(!window[_0x3dc904(0xd8)]||!window['db']){console['error'](_0x3dc904(0x107)),alert(_0x3dc904(0x120));return;}const _0x5c6ddd=window['auth'][_0x3dc904(0xb6)];if(!_0x5c6ddd){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x25addc=document[_0x3dc904(0x104)]('commentMatchId')?.['value'],_0xb4c38=document['getElementById']('commentText')?.['value']?.['trim']();if(!_0x25addc||!_0xb4c38){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x59c077=_0xb4c38['split'](/\s+/)[_0x3dc904(0x127)](_0x500e66=>_0x500e66['length']>0x0)['length'];if(_0x59c077>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.');return;}const _0x312911=document['querySelector']('.submit-comment-btn');_0x312911&&(_0x312911['disabled']=!![],_0x312911['textContent']='Submitting...');try{let _0x17a603='Anonymous';try{const _0x914c4=doc(window['db'],'userProfiles',_0x5c6ddd['uid']),_0x3fbcdf=await getDoc(_0x914c4);if(_0x3fbcdf['exists']()){const _0x2579c5=_0x3fbcdf['data']();_0x2579c5[_0x3dc904(0x109)]&&(_0x17a603=_0x2579c5['username']);}_0x17a603===_0x3dc904(0xdc)&&_0x5c6ddd[_0x3dc904(0x10d)]&&(_0x17a603=_0x5c6ddd[_0x3dc904(0x10d)]);}catch(_0x1123ee){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x1123ee),_0x5c6ddd['displayName']&&(_0x17a603=_0x5c6ddd['displayName']);}const _0x584738={'matchId':_0x25addc,'userId':_0x5c6ddd['uid'],'username':_0x17a603,'text':_0xb4c38,'timestamp':serverTimestamp()};console[_0x3dc904(0x84)]('Submitting\x20comment\x20as:',_0x17a603);const _0x154f60=collection(window['db'],'matchComments');await addDoc(_0x154f60,_0x584738),console['log'](_0x3dc904(0xdd)),closeAddCommentPopup(),loadRecentMatchesPreview(_0x3dc904(0xab));}catch(_0x582ebb){console[_0x3dc904(0xf3)]('Error\x20submitting\x20comment:',_0x582ebb),alert('Failed\x20to\x20add\x20comment:\x20'+_0x582ebb['message']),_0x312911&&(_0x312911['disabled']=![],_0x312911['textContent']='Submit');}}function a6_0x4a52(){const _0x40ac41=['#FFD700','S:\x20','none','lastVisible','log','removeChild','demoWordCount','Loading\x20next\x20page\x20using\x20cursor','classList','click','winner-','push','filter-pilots','<strong>','previewPrevPage','previewNextPage','parse','addCommentForm','demoLink','warn','.matches-loading[style*=\x22color:\x20red\x22]','addEventListener','setAttribute','createElement','forEach','prototype','Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.','__proto__','split','weapon-imbalance','pilots','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','subgameType','div','.match-card','2025-07-02','dataset','preview-d3-button','commentAddOverlay','empty','Unable\x20to\x20submit\x20-\x20system\x20not\x20ready','\x27s\x20Demo','Yesterday','current','display','href','.match-demo-links','map','aria-label','color','commentOverlayPreview','setItem','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','commentAddPopup','currentUser','length','value','commentPopupContentPreview','Unknown','previewCache_','.popup-actions','getTime','stopPropagation','onclick','includes','marginTop','.winner-demo-link','closeCommentPopupPreview','Please\x20enter\x20a\x20demo\x20link','#50C878','N/A','center','.</div>','Rendering\x20page\x20','now','Failed\x20to\x20parse\x20cache:','wordCount','appendChild','totalPages','-10','options','toLowerCase','title','toLocaleString','commentPopupPreview','winnerOldElo','0.6','.player.winner\x20.player-score','auth','message','Submitting...','querySelector','Anonymous','Comment\x20added\x20successfully','block','createdAt','recent-matches-preview','Failed\x20to\x20submit:\x20','max','loserOldElo','toString','seconds','exception','style','filter-levels','.comment.loser-comment','\x20matching\x20filters','stringify','input','cursor','next','enhancedFilters','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22','isLoading','error','loserUsername','clear-enhanced-filters','currentPage','submit','filterUsername','disabled','removeAttribute','hasNextPage','Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.','uid','dogfight','matchComments','<p>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>','currentMode','\x20matches:','getElementById','toggle','Error\x20fetching\x20','Firebase\x20not\x20initialized','end','username','winnerUsername','userProfiles','preview-d1-button','displayName','commentText','subgames','levels','preview-d2-button','innerHTML','removeItem','textContent','firstChild','matchesPerPage','comment-overlay','jump-to-page','toLocaleDateString','<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>','currentMatchId','className','mapPlayed','firstVisible','Option','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','Submit','required','applyFilterBtn','content','loserComment','exists','filter','Muted.','commentPopupTitlePreview','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20','.comment.winner-comment','trim','fusion-match','#b9f1fc','.jump-btn','opacity'];a6_0x4a52=function(){return _0x40ac41;};return a6_0x4a52();}function closeAddCommentPopup(){const _0x50a841=a6_0x1e8126,_0x5eccab=document[_0x50a841(0x104)]('commentAddPopup'),_0x55a607=document[_0x50a841(0x104)](_0x50a841(0xa6));if(_0x5eccab)_0x5eccab['style']['display']='none';if(_0x55a607)_0x55a607['style']['display']='none';}function showAddCommentPopup(_0x18ca23){const _0x596f93=a6_0x1e8126,_0x1596b3=window['auth']['currentUser'];if(!_0x1596b3){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo');return;}let _0x38eae2=document[_0x596f93(0x104)]('commentAddPopup'),_0x13312f=document['getElementById']('commentAddOverlay');!_0x38eae2&&(_0x38eae2=document['createElement']('div'),_0x38eae2['id']=_0x596f93(0xb5),_0x38eae2[_0x596f93(0x11c)]='comment-popup',document['body']['appendChild'](_0x38eae2));!_0x13312f&&(_0x13312f=document['createElement']('div'),_0x13312f['id']=_0x596f93(0xa6),_0x13312f['className']=_0x596f93(0x117),document['body']['appendChild'](_0x13312f));_0x38eae2[_0x596f93(0x112)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x18ca23+_0x596f93(0x12a),_0x38eae2['style']['display']='block',_0x13312f['style']['display']='block',document['getElementById']('closeAddCommentPopup')['addEventListener'](_0x596f93(0x89),closeAddCommentPopup),_0x13312f['addEventListener']('click',closeAddCommentPopup);const _0x5c67d3=_0x38eae2['querySelectorAll']('.option-tab');_0x5c67d3[_0x596f93(0x98)](_0x5a416e=>{const _0x446291=_0x596f93;_0x5a416e[_0x446291(0x95)]('click',function(){const _0x3180d4=_0x446291;_0x5c67d3['forEach'](_0x2828c3=>_0x2828c3['classList']['remove']('active')),document['querySelectorAll']('.option-content')['forEach'](_0x5d3d94=>_0x5d3d94[_0x3180d4(0xe7)]['display']='none'),this[_0x3180d4(0x88)]['add']('active');const _0x53cea6=this[_0x3180d4(0xa4)]['option'];document[_0x3180d4(0x104)](_0x53cea6+_0x3180d4(0x11f))[_0x3180d4(0xe7)]['display']='block',_0x53cea6==='demo'?(document['getElementById'](_0x3180d4(0x92))['setAttribute'](_0x3180d4(0x122),''),document[_0x3180d4(0x104)]('commentText')['removeAttribute'](_0x3180d4(0x122))):(document['getElementById']('demoLink')[_0x3180d4(0xfa)](_0x3180d4(0x122)),document['getElementById']('commentText')['setAttribute']('required',''));});}),document[_0x596f93(0x104)]('commentText')[_0x596f93(0x96)]('required',''),document['getElementById']('demoLink')['removeAttribute']('required'),setupWordCounter('commentText','wordCount',0xf),setupWordCounter('demoDescription',_0x596f93(0x86),0x14),document['getElementById']('addCommentForm')['addEventListener'](_0x596f93(0xf7),submitCommentOrDemo);}function setupWordCounter(_0x53be24,_0x446bd0,_0x73c999){const _0x58c1f9=a6_0x1e8126,_0xf4468=document[_0x58c1f9(0x104)](_0x53be24),_0x2f31a8=document['getElementById'](_0x446bd0);if(!_0xf4468||!_0x2f31a8)return;_0x4cd8a6(),_0xf4468[_0x58c1f9(0x95)](_0x58c1f9(0xec),_0x4cd8a6);function _0x4cd8a6(){const _0x514845=_0x58c1f9,_0x12f8b5=_0xf4468['value'][_0x514845(0x12c)](),_0xa13711=_0x12f8b5?_0x12f8b5[_0x514845(0x9c)](/\s+/)['filter'](_0x3e2d4b=>_0x3e2d4b[_0x514845(0xb7)]>0x0)['length']:0x0;_0x2f31a8[_0x514845(0x114)]=_0xa13711,_0xa13711>_0x73c999?_0x2f31a8['style'][_0x514845(0xb1)]='#ff4444':_0x2f31a8['style'][_0x514845(0xb1)]='#aaa';}}async function submitCommentOrDemo(_0x5a9344){const _0x507ad7=a6_0x1e8126;_0x5a9344['preventDefault']();if(!window[_0x507ad7(0xd8)]||!window['db']){console[_0x507ad7(0xf3)]('Firebase\x20not\x20initialized'),alert(_0x507ad7(0xa8));return;}const _0x3f758a=window['auth']['currentUser'];if(!_0x3f758a){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x55b930=document['getElementById']('commentMatchId')['value'],_0x54cd1f=document['querySelector']('.option-tab.active')[_0x507ad7(0xa4)]['option'];let _0x198b99='Anonymous';try{const _0x5857f1=doc(window['db'],_0x507ad7(0x10b),_0x3f758a['uid']),_0x242303=await getDoc(_0x5857f1);if(_0x242303[_0x507ad7(0x126)]()){const _0x3cf544=_0x242303['data']();_0x3cf544[_0x507ad7(0x109)]&&(_0x198b99=_0x3cf544['username']);}_0x198b99==='Anonymous'&&_0x3f758a['displayName']&&(_0x198b99=_0x3f758a[_0x507ad7(0x10d)]);}catch(_0x57eebd){console['warn']('Failed\x20to\x20fetch\x20username:',_0x57eebd),_0x3f758a[_0x507ad7(0x10d)]&&(_0x198b99=_0x3f758a['displayName']);}const _0x5d525d=document['querySelector']('.submit-comment-btn');_0x5d525d&&(_0x5d525d['disabled']=!![],_0x5d525d['textContent']=_0x507ad7(0xda));try{if(_0x54cd1f==='comment'){const _0x1240c7=document[_0x507ad7(0x104)]('commentText')['value']['trim']();if(!_0x1240c7){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x5d525d['disabled']=![],_0x5d525d[_0x507ad7(0x114)]=_0x507ad7(0x121);return;}const _0x526dee=_0x1240c7['split'](/\s+/)['filter'](_0x58caa5=>_0x58caa5[_0x507ad7(0xb7)]>0x0)[_0x507ad7(0xb7)];if(_0x526dee>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.'),_0x5d525d['disabled']=![],_0x5d525d['textContent']='Submit';return;}const _0x157970={'matchId':_0x55b930,'userId':_0x3f758a['uid'],'username':_0x198b99,'text':_0x1240c7,'type':'comment','timestamp':serverTimestamp()},_0x3b2bf4=collection(window['db'],'matchComments');await addDoc(_0x3b2bf4,_0x157970);}else{const _0x25ccaa=document['getElementById'](_0x507ad7(0x92))['value']['trim'](),_0x363bf0=document['getElementById']('demoDescription')[_0x507ad7(0xb8)]['trim']()||'Demo\x20link';if(!_0x25ccaa){alert(_0x507ad7(0xc4)),_0x5d525d['disabled']=![],_0x5d525d['textContent']=_0x507ad7(0x121);return;}try{new URL(_0x25ccaa);}catch(_0x3fc568){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x5d525d['disabled']=![],_0x5d525d[_0x507ad7(0x114)]=_0x507ad7(0x121);return;}const _0x32d13d=_0x363bf0[_0x507ad7(0x9c)](/\s+/)['filter'](_0x511130=>_0x511130['length']>0x0)['length'];if(_0x32d13d>0x14){alert(_0x507ad7(0x9a)),_0x5d525d['disabled']=![],_0x5d525d['textContent']=_0x507ad7(0x121);return;}const _0x3de9cb={'matchId':_0x55b930,'userId':_0x3f758a[_0x507ad7(0xfd)],'username':_0x198b99,'demoLink':_0x25ccaa,'description':_0x363bf0,'type':'demo','text':'Demo:\x20'+_0x363bf0,'timestamp':serverTimestamp()},_0x331009=collection(window['db'],'matchComments');await addDoc(_0x331009,_0x3de9cb);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x507ad7(0xab));}catch(_0x5d181a){console[_0x507ad7(0xf3)]('Error\x20submitting:',_0x5d181a),alert(_0x507ad7(0xe1)+_0x5d181a[_0x507ad7(0xd9)]),_0x5d525d&&(_0x5d525d['disabled']=![],_0x5d525d['textContent']=_0x507ad7(0x121));}}function getEloRankClass(_0x5287fb){const _0x26898a=Number(_0x5287fb);if(_0x26898a>=0x7d0)return'emerald';else{if(_0x26898a>=0x708)return'gold';else{if(_0x26898a>=0x640)return'silver';else{if(_0x26898a>=0x578)return'bronze';else return'unranked';}}}}function showPreviewCommentPopup(_0x552aee,_0x5ecc9d,_0x34a650='#fff'){const _0x58f593=a6_0x1e8126,_0x402304=document['getElementById']('commentPopupPreview'),_0x326953=document[_0x58f593(0x104)]('commentOverlayPreview'),_0x62c0e4=document[_0x58f593(0x104)](_0x58f593(0x129)),_0x4cd54f=document[_0x58f593(0x104)](_0x58f593(0xb9)),_0x257722=document[_0x58f593(0x104)]('reportCommentButton');if(!_0x402304||!_0x326953||!_0x62c0e4||!_0x4cd54f||!_0x257722)return;_0x402304['dataset']['commentText']=_0x552aee,_0x402304[_0x58f593(0xa4)]['commentUser']=_0x5ecc9d,_0x62c0e4[_0x58f593(0xe7)]['color']=_0x34a650,_0x62c0e4['textContent']='Comment\x20from\x20'+_0x5ecc9d,_0x4cd54f['textContent']=_0x552aee,_0x257722['onclick']=reportComment,_0x402304['style']['display']='block',_0x326953['style'][_0x58f593(0xac)]='block';}function closePreviewCommentPopup(){const _0x74e502=a6_0x1e8126,_0x5c97ad=document['getElementById']('commentPopupPreview'),_0xd11b3d=document['getElementById'](_0x74e502(0xb2));if(_0x5c97ad)_0x5c97ad['style']['display']='none';if(_0xd11b3d)_0xd11b3d['style']['display']='none';}async function reportComment(){const _0xbc3d4e=a6_0x1e8126,_0x3bf05f=window['auth']['currentUser'];if(!_0x3bf05f){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm(_0xbc3d4e(0xf0)))return;try{const _0x579fc9=document['getElementById']('commentPopupPreview'),_0x3775c7={'commentAuthor':_0x579fc9['dataset']['commentUser']||'Unknown\x20User','commentText':_0x579fc9['dataset'][_0xbc3d4e(0x10e)]||'','matchId':previewState[_0xbc3d4e(0x11b)]||'','reportedBy':_0x3bf05f['uid'],'reporterUsername':_0x3bf05f['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},_0x48ea4f=collection(window['db'],'badComments');await addDoc(_0x48ea4f,_0x3775c7),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x31999e){console['error']('Error\x20reporting\x20comment:',_0x31999e),alert('Failed\x20to\x20report\x20comment:\x20'+_0x31999e['message']);}}function showFullCommentLightbox(_0x531bc1){const _0x5bb77b=a6_0x1e8126;if(isUsernameMuted(_0x531bc1['username']))return;const _0x249a57=document[_0x5bb77b(0x104)](_0x5bb77b(0xd4)),_0x221a4b=document['getElementById'](_0x5bb77b(0xb2)),_0x6d7e6=document['getElementById']('commentPopupTitlePreview'),_0x30bc90=document[_0x5bb77b(0x104)](_0x5bb77b(0xb9));if(!_0x249a57||!_0x221a4b||!_0x6d7e6||!_0x30bc90)return;_0x6d7e6[_0x5bb77b(0xe7)]['color']='#fff',_0x6d7e6['textContent']='Comment\x20from\x20'+_0x531bc1['username'];if(_0x531bc1['timestamp']){const _0xf8a6a0=new Date(_0x531bc1['timestamp']['seconds']*0x3e8),_0x23f7f2=_0xf8a6a0[_0x5bb77b(0xd3)]();_0x30bc90[_0x5bb77b(0x112)]=_0x5bb77b(0x100)+_0x531bc1['text']+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x23f7f2+'</small>';}else _0x30bc90['textContent']=_0x531bc1['text'];_0x249a57['dataset']['commentId']=_0x531bc1['id']||'',_0x249a57[_0x5bb77b(0xa4)]['commentUser']=_0x531bc1['username']||'',_0x249a57['dataset']['commentText']=_0x531bc1['text']||'',_0x249a57['dataset']['matchId']=_0x531bc1['matchId']||'';const _0x37849c=_0x249a57[_0x5bb77b(0xdb)](_0x5bb77b(0xbc))||document[_0x5bb77b(0x97)](_0x5bb77b(0xa1));!_0x249a57['querySelector'](_0x5bb77b(0xbc))?(_0x37849c['className']='popup-actions',_0x37849c['style']['display']='flex',_0x37849c['style']['justifyContent']=_0x5bb77b(0xc7),_0x37849c[_0x5bb77b(0xe7)]['gap']='10px',_0x37849c['style'][_0x5bb77b(0xc1)]='15px',_0x249a57['appendChild'](_0x37849c)):_0x37849c[_0x5bb77b(0x112)]='';const _0x50bde8=document['createElement']('button');_0x50bde8[_0x5bb77b(0x114)]='Close',_0x50bde8['className']='popup-btn\x20close-btn',_0x50bde8['id']=_0x5bb77b(0xc3),_0x50bde8['addEventListener'](_0x5bb77b(0x89),closePreviewCommentPopup);const _0x254298=document['createElement']('button');_0x254298['textContent']='Report',_0x254298['className']='popup-btn\x20report-btn',_0x254298['style']['backgroundColor']='#d32f2f',_0x254298[_0x5bb77b(0x95)]('click',reportComment),_0x37849c[_0x5bb77b(0xcd)](_0x50bde8),_0x37849c['appendChild'](_0x254298),_0x249a57[_0x5bb77b(0xe7)]['display']=_0x5bb77b(0xde),_0x221a4b['style']['display']=_0x5bb77b(0xde);}export function setupPreviewEventListeners(){const _0x3b9072=a6_0x1e8126,_0x4d5de6=document[_0x3b9072(0x104)](_0x3b9072(0x8e)),_0x10a3a5=document['getElementById']('previewNextPage'),_0x8c8f54=document['getElementById']('preview-d1-button'),_0x49cfd8=document['getElementById'](_0x3b9072(0x111)),_0x3e1567=document['getElementById'](_0x3b9072(0xa5)),_0x3443eb=document[_0x3b9072(0x104)]('filter-toggle-button'),_0x5f3eac=document[_0x3b9072(0x104)]('enhanced-filter-section');if(!_0x4d5de6||!_0x10a3a5||!_0x8c8f54||!_0x49cfd8||!_0x3e1567||!_0x3443eb||!_0x5f3eac){console['warn']('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}_0x4d5de6['addEventListener']('click',()=>{if(!_0x4d5de6['disabled'])loadRecentMatchesPreview('prev');}),_0x10a3a5['addEventListener']('click',()=>{if(!_0x10a3a5['disabled'])loadRecentMatchesPreview('next');}),_0x8c8f54[_0x3b9072(0x95)]('click',()=>{const _0x810de7=_0x3b9072;previewState[_0x810de7(0x102)]!=='D1'&&!previewState[_0x810de7(0xf2)]&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x49cfd8['addEventListener'](_0x3b9072(0x89),()=>{const _0x3e3d3f=_0x3b9072;previewState[_0x3e3d3f(0x102)]!=='D2'&&!previewState['isLoading']&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x3e1567['addEventListener']('click',()=>{const _0x30e84b=_0x3b9072;previewState[_0x30e84b(0x102)]!=='D3'&&!previewState[_0x30e84b(0xf2)]&&(previewState[_0x30e84b(0x102)]='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x3443eb&&_0x5f3eac&&_0x3443eb['addEventListener'](_0x3b9072(0x89),()=>{const _0x44a418=_0x3b9072,_0x1537c1=_0x5f3eac['style']['display']!==_0x44a418(0x82);_0x5f3eac['style'][_0x44a418(0xac)]=_0x1537c1?'none':_0x44a418(0xde),_0x3443eb['classList'][_0x44a418(0x105)]('active',!_0x1537c1);});const _0x56e9a3=document['getElementById']('apply-enhanced-filters'),_0x1e9e93=document['getElementById'](_0x3b9072(0xf5));_0x56e9a3&&_0x56e9a3[_0x3b9072(0x95)](_0x3b9072(0x89),()=>{const _0x593420=_0x3b9072;previewState['enhancedFilters']['pilots']=document['getElementById'](_0x593420(0x8c))[_0x593420(0xb8)]['trim'](),previewState['enhancedFilters']['levels']=document['getElementById']('filter-levels')['value'][_0x593420(0x12c)]();const _0xd4ed02=document['getElementById']('filter-subgames');previewState['enhancedFilters'][_0x593420(0x10f)]=Array['from'](_0xd4ed02['selectedOptions'])['map'](_0xfbed0f=>_0xfbed0f['value'])['filter'](_0x28388c=>_0x28388c!==''),loadRecentMatchesPreview(_0x593420(0xab));});_0x1e9e93&&_0x1e9e93['addEventListener']('click',()=>{const _0x2fdda4=_0x3b9072;clearEnhancedFilters(),loadRecentMatchesPreview(_0x2fdda4(0xab));});document['querySelectorAll'](_0x3b9072(0x12f))[_0x3b9072(0x98)](_0x523eb8=>{_0x523eb8['addEventListener']('click',()=>{const _0x371cb0=a6_0x17a2,_0x2f4881=_0x523eb8[_0x371cb0(0xa4)]['jump'];jumpToPage(_0x2f4881);});});const _0x4358c9=document['getElementById'](_0x3b9072(0x118));_0x4358c9&&_0x4358c9['addEventListener']('keypress',_0x570d7c=>{const _0x5f0f08=_0x3b9072;_0x570d7c['key']==='Enter'&&jumpToPage(_0x5f0f08(0xec));});const _0x8a0f82=document['getElementById']('closeCommentPopupPreview'),_0x261387=document['getElementById']('commentOverlayPreview');if(_0x8a0f82)_0x8a0f82['addEventListener']('click',closePreviewCommentPopup);if(_0x261387)_0x261387[_0x3b9072(0x95)]('click',closePreviewCommentPopup);const _0x4ed766=document['getElementById']('closeAddCommentPopup'),_0x5da86e=document['getElementById']('commentAddOverlay'),_0x20c8c5=document['getElementById'](_0x3b9072(0x91));if(_0x4ed766)_0x4ed766['addEventListener']('click',closeAddCommentPopup);if(_0x5da86e)_0x5da86e['addEventListener']('click',closeAddCommentPopup);if(_0x20c8c5)_0x20c8c5['addEventListener'](_0x3b9072(0xf7),submitComment);const _0x51e1b7=document['getElementById']('commentText'),_0x3b12d=document[_0x3b9072(0x104)](_0x3b9072(0xcc));_0x51e1b7&&_0x3b12d&&setupWordCounter(_0x3b9072(0x10e),'wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window['submitComment']=submitComment;