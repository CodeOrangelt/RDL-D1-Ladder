const a2_0x1599fb=a2_0x1f64,a2_0x58ba0e=(function(){let _0x9f3b=!![];return function(_0x3821fa,_0x45d2e3){const _0x362a49=_0x9f3b?function(){const _0x5c0975=a2_0x1f64;if(_0x45d2e3){const _0x1928fd=_0x45d2e3[_0x5c0975(0xce)](_0x3821fa,arguments);return _0x45d2e3=null,_0x1928fd;}}:function(){};return _0x9f3b=![],_0x362a49;};}()),a2_0x15b3f5=a2_0x58ba0e(this,function(){const _0x53afcf=a2_0x1f64,_0x448cef=function(){let _0x5054d9;try{_0x5054d9=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4bf2c7){_0x5054d9=window;}return _0x5054d9;},_0x3d662a=_0x448cef(),_0x4dd026=_0x3d662a['console']=_0x3d662a['console']||{},_0x36080e=['log','warn',_0x53afcf(0x182),'error','exception','table','trace'];for(let _0x1cad98=0x0;_0x1cad98<_0x36080e['length'];_0x1cad98++){const _0x3b8b56=a2_0x58ba0e['constructor']['prototype'][_0x53afcf(0xfc)](a2_0x58ba0e),_0x523a06=_0x36080e[_0x1cad98],_0x23b83c=_0x4dd026[_0x523a06]||_0x3b8b56;_0x3b8b56['__proto__']=a2_0x58ba0e[_0x53afcf(0xfc)](a2_0x58ba0e),_0x3b8b56[_0x53afcf(0x11a)]=_0x23b83c['toString']['bind'](_0x23b83c),_0x4dd026[_0x523a06]=_0x3b8b56;}});a2_0x15b3f5();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x2a1cdf){const _0x501f96=a2_0x1f64;if(!_0x2a1cdf)return'#ffffff';_0x2a1cdf=_0x2a1cdf[_0x501f96(0xc7)]('#','');_0x2a1cdf[_0x501f96(0x298)]===0x3&&(_0x2a1cdf=_0x2a1cdf['split']('')['map'](_0x34381e=>_0x34381e+_0x34381e)['join'](''));if(_0x2a1cdf['length']!==0x6)return _0x501f96(0x2c2);const _0x209344=parseInt(_0x2a1cdf['substring'](0x0,0x2),0x10),_0x12b36c=parseInt(_0x2a1cdf['substring'](0x2,0x4),0x10),_0x2b552b=parseInt(_0x2a1cdf['substring'](0x4,0x6),0x10),_0x19488b=(_0x209344*0x12b+_0x12b36c*0x24b+_0x2b552b*0x72)/0x3e8;return _0x19488b>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a2_0x1599fb(0x2e8)]('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x1cff57=>{const _0x1b09d4=a2_0x1f64;if(!_0x1cff57){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x3abf50){console[_0x1b09d4(0xfe)]('Error\x20initializing\x20dashboard:',_0x3abf50),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0xa1bf0b){const _0x511390=a2_0x1599fb;if(!_0xa1bf0b)return[_0x511390(0x268)];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0xa1bf0b+'\x20in\x20all\x20collections...');const _0x49905d=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':_0x511390(0x25a),'displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':_0x511390(0x24c),'displayName':'Non-Participants'}],_0x67fc9a=auth['currentUser'];let _0x370e19=null,_0x1fdb43=null;for(const _0x363ddc of _0x49905d){try{if(_0x67fc9a){const _0x483b09=doc(db,_0x363ddc[_0x511390(0x112)],_0x67fc9a['uid']),_0x596cb9=await getDoc(_0x483b09);if(_0x596cb9[_0x511390(0x1ac)]()){const _0x16843a=_0x596cb9['data']();console['log']('Found\x20user\x20in\x20'+_0x363ddc['displayName']+'\x20by\x20UID:',_0x16843a);const _0x1b52c5=(_0x16843a['roleName']||_0x16843a['role']||'')['toLowerCase']();if(_0x1b52c5&&_0x1b52c5!==_0x511390(0x1b9)){_0x370e19=_0x1b52c5,_0x1fdb43=_0x363ddc['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x370e19+'\x20in\x20'+_0x1fdb43);break;}}}if(!_0x370e19){const _0x1e0f3e=collection(db,_0x363ddc['name']),_0x192277=query(_0x1e0f3e,where('email','==',_0xa1bf0b)),_0x20a6dd=await getDocs(_0x192277);if(!_0x20a6dd[_0x511390(0x233)]){const _0x3f03c5=_0x20a6dd['docs'][0x0]['data']();console[_0x511390(0x1a0)](_0x511390(0x258)+_0x363ddc['displayName']+'\x20with\x20email\x20'+_0xa1bf0b+':',_0x3f03c5);const _0x3906c5=(_0x3f03c5[_0x511390(0x202)]||_0x3f03c5[_0x511390(0x1bd)]||'')[_0x511390(0x22b)]();if(_0x3906c5&&_0x3906c5!=='none'){_0x370e19=_0x3906c5,_0x1fdb43=_0x363ddc[_0x511390(0x223)],console[_0x511390(0x1a0)](_0x511390(0x2f7)+_0x370e19+'\x20in\x20'+_0x1fdb43);break;}}}}catch(_0x5808af){console['error']('Error\x20checking\x20'+_0x363ddc[_0x511390(0x223)]+':',_0x5808af);}}if(_0x370e19){console[_0x511390(0x1a0)]('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x370e19+'\x20(from\x20'+_0x1fdb43+')');const _0x550268={'admin':['dashboard','manage-players','manage-matches',_0x511390(0x2f2),_0x511390(0xc6),_0x511390(0x121),'inactive-players',_0x511390(0x297),'manage-trophies','elo-history','manage-highlights','user-roles-section','manage-matches','manage-points',_0x511390(0x2a2),'manage-ribbons'],'owner':[_0x511390(0x268),_0x511390(0x10f),_0x511390(0xd0),_0x511390(0x2f2),_0x511390(0xc6),'manage-ranks',_0x511390(0x2b6),'settings',_0x511390(0xc6),_0x511390(0x2e6),_0x511390(0x2eb),'user-roles-section','manage-matches',_0x511390(0x1ee),'manage-levels-ribbons','manage-ribbons'],'council':['dashboard',_0x511390(0x10f),'manage-matches'],'creative\x20lead':[_0x511390(0x268),'manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x550268[_0x370e19])return console['log'](_0x511390(0x16a)+_0x370e19+'\x27\x20has\x20permissions:',_0x550268[_0x370e19]),_0x550268[_0x370e19];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0xa1bf0b+',\x20giving\x20default\x20access'),[_0x511390(0x268)];}function setupSidebarNavigation(_0xf85923=[]){const _0x214334=a2_0x1599fb,_0x1b47ea=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x169ce7=document['querySelectorAll']('.admin-section');(!_0xf85923||_0xf85923[_0x214334(0x298)]===0x0)&&(_0xf85923=['dashboard']);_0x1b47ea['forEach'](_0x26a0ad=>{const _0x244320=_0x214334,_0x3f53f0=_0x26a0ad['getAttribute']('data-section');_0xf85923['includes'](_0x3f53f0)?_0x26a0ad['style'][_0x244320(0x1d5)]=_0x244320(0xde):_0x26a0ad[_0x244320(0xe5)]['display']=_0x244320(0x1b9),_0x26a0ad['addEventListener'](_0x244320(0x2d5),()=>{const _0x62f0c7=_0x244320,_0x551244=_0x26a0ad[_0x62f0c7(0x266)]('data-section');if(!_0xf85923[_0x62f0c7(0x193)](_0x551244)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x1b47ea[_0x62f0c7(0x2a0)](_0x256453=>_0x256453[_0x62f0c7(0x1fc)]['remove'](_0x62f0c7(0x306))),_0x26a0ad['classList']['add']('active'),_0x169ce7[_0x62f0c7(0x2a0)](_0x139a21=>{const _0x4d4403=_0x62f0c7;_0x139a21[_0x4d4403(0xe5)]['display']='none';});const _0x351d7d=document[_0x62f0c7(0x183)](_0x551244);_0x351d7d&&(_0x351d7d['style']['display']=_0x62f0c7(0x155),console['log']('Switched\x20to\x20'+_0x551244+'\x20section'));});});const _0x428ca1=document[_0x214334(0x14f)]('.sidebar-nav\x20.nav-item[data-section=\x22'+_0xf85923[0x0]+'\x22]');_0x428ca1&&_0x428ca1['click'](),console[_0x214334(0x1a0)](_0x214334(0x2fb));}function setupTabNavigation(){const _0x3dd2c9=a2_0x1599fb,_0x1317fa=document['querySelectorAll'](_0x3dd2c9(0x25d));let _0x8d5ddb=null,_0x45e685=new Set();_0x1317fa['forEach'](_0x3eb8af=>{const _0x1451b7=_0x3dd2c9;_0x3eb8af[_0x1451b7(0x2e8)](_0x1451b7(0x2d5),function(){const _0x50e067=_0x1451b7,_0x40ab00=this['getAttribute']('data-section');if(_0x40ab00===_0x8d5ddb)return;_0x8d5ddb&&(document['getElementById'](_0x8d5ddb)['style']['display']=_0x50e067(0x1b9),_0x1317fa['forEach'](_0x10c3e6=>_0x10c3e6['classList'][_0x50e067(0x127)]('active'))),document['getElementById'](_0x40ab00)['style'][_0x50e067(0x1d5)]='block',this['classList'][_0x50e067(0x153)]('active'),_0x8d5ddb=_0x40ab00;});});}function loadSectionData(_0x33cfdf){return;}async function initializeAdminDashboard(){const _0x4a889d=a2_0x1599fb;try{const _0x30fe01=auth[_0x4a889d(0x15c)],_0x3661cf=await getUserTabPermissions(_0x30fe01['email']);console[_0x4a889d(0x1a0)]('User\x20'+_0x30fe01[_0x4a889d(0x163)]+_0x4a889d(0x169),_0x3661cf),window['userAllowedTabs']=_0x3661cf,setupSidebarNavigation(_0x3661cf),setupLadderSelector(),setupDashboardSection(),_0x3661cf[_0x4a889d(0x193)](_0x4a889d(0x10f))&&setupManagePlayersSection(),_0x3661cf['includes']('elo-history')&&setupEloHistorySection(),_0x3661cf['includes'](_0x4a889d(0x121))&&setupRankControls(),_0x3661cf['includes']('manage-articles')&&setupManageArticlesSection(),_0x3661cf['includes']('user-roles-section')&&setupUserRolesSection(),_0x3661cf[_0x4a889d(0x193)]('manage-trophies')&&setupTrophyManagementSection(),_0x3661cf['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x3661cf['includes'](_0x4a889d(0x2b6))&&setupInactivePlayersSection(),_0x3661cf['includes']('manage-matches')&&setupManageMatchesSection(),_0x3661cf[_0x4a889d(0x193)](_0x4a889d(0x1ee))&&setupManagePointsSection(),_0x3661cf[_0x4a889d(0x193)](_0x4a889d(0x1e0))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x3661cf);}catch(_0x267b32){console[_0x4a889d(0xfe)]('Error\x20initializing\x20admin\x20dashboard:',_0x267b32);}}function setupDataLoadButtons(_0x2e2f44=[]){const _0x2ad3dc=a2_0x1599fb;(!_0x2e2f44||_0x2e2f44[_0x2ad3dc(0x298)]===0x0)&&(_0x2e2f44=[_0x2ad3dc(0x268)]);const _0x57d774=document['getElementById']('load-dashboard-data');_0x57d774&&_0x57d774['addEventListener'](_0x2ad3dc(0x2d5),function(){const _0x3cf78d=_0x2ad3dc;this['classList']['add'](_0x3cf78d(0x19f)),this[_0x3cf78d(0x1ed)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})[_0x3cf78d(0x132)](_0x34e61d=>{const _0x27c0b3=_0x3cf78d;console['error'](_0x27c0b3(0x10b),_0x34e61d),this[_0x27c0b3(0x1fc)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x2e2f44['includes']('manage-trophies')){const _0x135eb7=document['getElementById']('load-trophies-data');_0x135eb7&&_0x135eb7[_0x2ad3dc(0x2e8)](_0x2ad3dc(0x2d5),function(){const _0x4a3a4e=_0x2ad3dc;console[_0x4a3a4e(0x1a0)](_0x4a3a4e(0x26f)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x175d3d=>{const _0x29e656=_0x4a3a4e;console['error']('Error\x20loading\x20trophies:',_0x175d3d),this[_0x29e656(0x1fc)]['remove'](_0x29e656(0x19f)),this['innerHTML']=_0x29e656(0x27c),setTimeout(()=>{const _0x2e25c5=_0x29e656;this['innerHTML']=_0x2e25c5(0x1dc);},0xbb8);});});}if(_0x2e2f44[_0x2ad3dc(0x193)]('manage-players')){const _0x3d9efe=document['getElementById']('load-players-data');_0x3d9efe&&_0x3d9efe['addEventListener'](_0x2ad3dc(0x2d5),function(){const _0x260021=_0x2ad3dc;console[_0x260021(0x1a0)](_0x260021(0x1fb)),this['classList'][_0x260021(0x153)](_0x260021(0x19f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})[_0x260021(0x132)](_0x48ba9b=>{const _0x3e6cf5=_0x260021;console[_0x3e6cf5(0xfe)](_0x3e6cf5(0x130),_0x48ba9b),this['classList']['remove']('loading'),this[_0x3e6cf5(0x1ed)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4e1168=_0x3e6cf5;this[_0x4e1168(0x1ed)]=_0x4e1168(0x30c);},0xbb8);});});}if(_0x2e2f44['includes']('elo-history')){const _0x349cdc=document['getElementById'](_0x2ad3dc(0x2bd));_0x349cdc&&_0x349cdc['addEventListener']('click',function(){const _0x33f50f=_0x2ad3dc;console[_0x33f50f(0x1a0)](_0x33f50f(0x173)),this[_0x33f50f(0x1fc)][_0x33f50f(0x153)](_0x33f50f(0x19f)),this['innerHTML']=_0x33f50f(0x23e),loadEloHistory(0x1)['then'](()=>{const _0x435b24=_0x33f50f;this['classList']['remove']('loading'),this[_0x435b24(0x1ed)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x33f50f(0x132)](_0x2bba76=>{const _0xdc362c=_0x33f50f;console['error']('Error\x20loading\x20history:',_0x2bba76),this[_0xdc362c(0x1fc)]['remove']('loading'),this['innerHTML']=_0xdc362c(0x27c),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x2e2f44[_0x2ad3dc(0x193)](_0x2ad3dc(0x2f2))){const _0x8b828d=document[_0x2ad3dc(0x183)](_0x2ad3dc(0x2e3));_0x8b828d&&_0x8b828d['addEventListener']('click',function(){const _0x298b90=_0x2ad3dc;console[_0x298b90(0x1a0)](_0x298b90(0xda)),this['classList']['add']('loading'),this['innerHTML']=_0x298b90(0x23e),loadArticles()[_0x298b90(0x13a)](()=>{const _0x1c4995=_0x298b90;this['classList'][_0x1c4995(0x127)](_0x1c4995(0x19f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})[_0x298b90(0x132)](_0x541c42=>{const _0x39ea39=_0x298b90;console[_0x39ea39(0xfe)](_0x39ea39(0x1cc),_0x541c42),this['classList'][_0x39ea39(0x127)]('loading'),this[_0x39ea39(0x1ed)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2b4144=_0x39ea39;this['innerHTML']=_0x2b4144(0x276);},0xbb8);});});}if(_0x2e2f44[_0x2ad3dc(0x193)]('user-roles-section')){const _0x2b3462=document['getElementById'](_0x2ad3dc(0x28b));_0x2b3462&&_0x2b3462['addEventListener']('click',function(){const _0x11058c=_0x2ad3dc;console[_0x11058c(0x1a0)](_0x11058c(0x2f6)),this['classList']['add']('loading'),this[_0x11058c(0x1ed)]=_0x11058c(0x23e),loadUsersWithRoles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x1c119e=>{const _0x69ed22=_0x11058c;console['error']('Error\x20loading\x20users:',_0x1c119e),this[_0x69ed22(0x1fc)]['remove']('loading'),this[_0x69ed22(0x1ed)]=_0x69ed22(0x27c),setTimeout(()=>{const _0x194604=_0x69ed22;this['innerHTML']=_0x194604(0x240);},0xbb8);});});}if(_0x2e2f44['includes'](_0x2ad3dc(0x2b6))){const _0x5b84b4=document[_0x2ad3dc(0x183)]('load-inactive-players-data');_0x5b84b4&&_0x5b84b4['addEventListener']('click',function(){const _0x1f3169=_0x2ad3dc;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x19a588=a2_0x1f64;this['classList'][_0x19a588(0x127)](_0x19a588(0x19f)),this['innerHTML']=_0x19a588(0x102);})[_0x1f3169(0x132)](_0x44b3a0=>{const _0x2fa324=_0x1f3169;console[_0x2fa324(0xfe)](_0x2fa324(0x28c),_0x44b3a0),this['classList']['remove'](_0x2fa324(0x19f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x2e2f44['includes'](_0x2ad3dc(0x2eb))){const _0x5c47cb=document['getElementById']('load-highlights-data');_0x5c47cb&&_0x5c47cb['addEventListener']('click',function(){const _0x3949a9=_0x2ad3dc;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList'][_0x3949a9(0x153)]('loading'),this[_0x3949a9(0x1ed)]=_0x3949a9(0x23e),loadHighlightsAdmin()['then'](()=>{const _0x19464e=_0x3949a9;this[_0x19464e(0x1fc)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x516236=>{const _0x1a479a=_0x3949a9;console['error']('Error\x20loading\x20highlights:',_0x516236),this[_0x1a479a(0x1fc)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x2e2f44['includes']('manage-matches')){const _0x22fd92=document['getElementById']('load-matches-data');_0x22fd92&&_0x22fd92[_0x2ad3dc(0x2e8)]('click',function(){const _0x1946c0=_0x2ad3dc;console['log']('Load\x20matches\x20data\x20clicked'),this[_0x1946c0(0x1fc)]['add']('loading'),this['innerHTML']=_0x1946c0(0x23e),loadMatchesData(0x1)[_0x1946c0(0x13a)](()=>{const _0x2c6fdf=_0x1946c0;this[_0x2c6fdf(0x1fc)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})[_0x1946c0(0x132)](_0x40397e=>{const _0x86ae40=_0x1946c0;console['error'](_0x86ae40(0xed),_0x40397e),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x24f42c=_0x86ae40;this[_0x24f42c(0x1ed)]=_0x24f42c(0x25b);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x2e2f44[_0x2ad3dc(0x193)](_0x2ad3dc(0x1e0))){const _0x5bb5a0=document['getElementById'](_0x2ad3dc(0x1b7));_0x5bb5a0&&_0x5bb5a0['addEventListener']('click',function(){const _0x3fc1af=_0x2ad3dc;console['log']('Load\x20ribbons\x20data\x20clicked'),this[_0x3fc1af(0x1fc)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0xd27532=_0x3fc1af;this['classList']['remove'](_0xd27532(0x19f)),this[_0xd27532(0x1ed)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x3f1b6c=>{const _0xfaded4=_0x3fc1af;console[_0xfaded4(0xfe)]('Error\x20loading\x20ribbons:',_0x3f1b6c),this[_0xfaded4(0x1fc)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x47e47a=a2_0x1599fb;document['getElementById']('player-count')[_0x47e47a(0x226)]='-',document['getElementById']('match-count')[_0x47e47a(0x226)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x7b9516=a2_0x1599fb,_0x52a4b3=document['querySelectorAll'](_0x7b9516(0x197));_0x52a4b3['forEach'](_0x3fd0b6=>{_0x3fd0b6['addEventListener']('change',()=>{const _0x548f8d=a2_0x1f64;currentLadder=_0x3fd0b6['value'],document[_0x548f8d(0x185)]['setAttribute']('data-ladder',currentLadder);const _0x392cb8=document['getElementById'](_0x548f8d(0x2ad));_0x392cb8&&(_0x392cb8[_0x548f8d(0x226)]=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x548f8d(0x216))[_0x548f8d(0x226)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById'](_0x548f8d(0x248))['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification(_0x548f8d(0x198)+currentLadder+_0x548f8d(0x108),'info');});});const _0x4202d4=document['getElementById'](_0x7b9516(0x2ad));_0x4202d4&&(_0x4202d4['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x411a4a=a2_0x1599fb;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x411a4a(0x216))[_0x411a4a(0x226)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0x14e0d5=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x236efc=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x411a4a(0x2b3),_0x1285e1=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x13ee96=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':_0x411a4a(0xe8);console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x14e0d5+',\x20'+_0x236efc);const _0x347fb9=await getDocs(collection(db,_0x14e0d5)),_0x45e661=_0x347fb9[_0x411a4a(0x12e)],_0x3463d3=await getDocs(collection(db,_0x236efc)),_0x1a15fe=_0x3463d3[_0x411a4a(0x12e)],_0x371ffa=await getDocs(collection(db,_0x1285e1)),_0x5c7614=_0x371ffa['size'],_0x5b519e=await getDocs(collection(db,_0x13ee96)),_0x2fec2d=_0x5b519e['size'];return document['getElementById']('player-count')[_0x411a4a(0x226)]=_0x45e661,document['getElementById']('match-count')[_0x411a4a(0x226)]=_0x1a15fe,document['getElementById'](_0x411a4a(0x278))[_0x411a4a(0x226)]=_0x5c7614,document['getElementById'](_0x411a4a(0x248))[_0x411a4a(0x226)]=_0x2fec2d,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x261777){console['error'](_0x411a4a(0x307),_0x261777);throw _0x261777;}}async function createRankDistributionChart(){const _0x5eb00d=a2_0x1599fb;try{const _0x2d4f06=collection(db,currentLadder==='D1'?_0x5eb00d(0x1f6):'playersD2'),_0xb3258a=await getDocs(_0x2d4f06),_0x33606c={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0xb3258a[_0x5eb00d(0x2a0)](_0xaac3ca=>{const _0x3b6df7=_0x5eb00d,_0x3e88ca=_0xaac3ca['data'](),_0x3c6a20=_0x3e88ca[_0x3b6df7(0xf4)]||0x4b0;if(_0x3c6a20>=0x7d0)_0x33606c['Emerald']++;else{if(_0x3c6a20>=0x708)_0x33606c[_0x3b6df7(0x11e)]++;else{if(_0x3c6a20>=0x640)_0x33606c['Silver']++;else{if(_0x3c6a20>=0x578)_0x33606c['Bronze']++;else _0x33606c['Unranked']++;}}}});const _0xae8dc0=document[_0x5eb00d(0x183)](_0x5eb00d(0x117));charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0xae8dc0,{'type':'doughnut','data':{'labels':Object[_0x5eb00d(0x229)](_0x33606c),'datasets':[{'data':Object['values'](_0x33606c),'backgroundColor':[_0x5eb00d(0x254),_0x5eb00d(0x205),'#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x5eb00d(0x15b),'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x5eb00d(0x250),'color':_0x5eb00d(0x186),'font':{'size':0x10}}}}});}catch(_0x3c6fae){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x3c6fae),document['getElementById'](_0x5eb00d(0x117))['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x3e45e2=a2_0x1599fb;try{const _0x5894e0=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x13b08e=collection(db,_0x5894e0),_0x1c51bd=new Date();_0x1c51bd['setDate'](_0x1c51bd['getDate']()-0x7);const _0x58386=query(_0x13b08e,where('approvedAt','>=',_0x1c51bd),orderBy('approvedAt','asc')),_0x5a0f28=await getDocs(_0x58386),_0x207bca=['Sunday','Monday','Tuesday','Wednesday','Thursday',_0x3e45e2(0x2ff),'Saturday'],_0x4eca28=_0x207bca['reduce']((_0x7bb422,_0x15de2a)=>({..._0x7bb422,[_0x15de2a]:0x0}),{});_0x5a0f28['forEach'](_0x3b9a15=>{const _0xe958ef=_0x3b9a15['data']();if(_0xe958ef['approvedAt']){const _0x91aeba=_0x207bca[new Date(_0xe958ef['approvedAt']['seconds']*0x3e8)['getDay']()];_0x4eca28[_0x91aeba]++;}});const _0xeab8f2=document['getElementById']('activity-chart');charts['activity']&&charts[_0x3e45e2(0x1b1)]['destroy'](),charts['activity']=new Chart(_0xeab8f2,{'type':'bar','data':{'labels':_0x207bca,'datasets':[{'label':'Matches\x20Played','data':_0x207bca[_0x3e45e2(0x20c)](_0x57b0d7=>_0x4eca28[_0x57b0d7]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x3e45e2(0x186)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x3e45e2(0x199),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x633b77){console['error']('Error\x20creating\x20activity\x20chart:',_0x633b77),document[_0x3e45e2(0x183)]('activity-chart')[_0x3e45e2(0x1ed)]=_0x3e45e2(0xe1);}}async function loadPlayersData(){const _0x2c92cb=a2_0x1599fb,_0x4a5e62=document['getElementById']('players-table-body');if(!_0x4a5e62)return;_0x4a5e62['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x23d7a1=_0x2c92cb(0x1f6);if(currentLadder==='D2')_0x23d7a1='playersD2';else currentLadder==='D3'&&(_0x23d7a1=_0x2c92cb(0xd9));console[_0x2c92cb(0x1a0)]('Loading\x20players\x20from\x20'+_0x23d7a1+'\x20collection...');const _0x241190=collection(db,_0x23d7a1),_0x289381=query(_0x241190,orderBy('eloRating','desc')),_0x9ee2b8=await getDocs(_0x289381);if(_0x9ee2b8[_0x2c92cb(0x233)]){_0x4a5e62['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x4a5e62['innerHTML']='';let _0x22dda6=0x1;_0x9ee2b8[_0x2c92cb(0x2a0)](_0x4a5351=>{const _0x47122a=_0x2c92cb,_0x2e82d1=_0x4a5351['data'](),_0x30892a=getRankFromElo(_0x2e82d1['eloRating']||0x4b0),_0x453c12=getRankStyle(_0x2e82d1[_0x47122a(0xf4)]||0x4b0),_0x51bd65=document[_0x47122a(0xee)]('tr');_0x51bd65['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x22dda6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x453c12['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2e82d1['username']||_0x47122a(0x104))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x2e82d1['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x453c12[_0x47122a(0x159)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x30892a+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2e82d1[_0x47122a(0x1eb)]||0x0)+'W\x20/\x20'+(_0x2e82d1['losses']||0x0)+_0x47122a(0xf6)+_0x4a5351['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x4a5351['id']+_0x47122a(0x17a),_0x4a5e62['appendChild'](_0x51bd65),_0x22dda6++;}),setupPlayerActionButtons();}catch(_0x345ac5){console['error'](_0x2c92cb(0x130),_0x345ac5),_0x4a5e62['innerHTML']=_0x2c92cb(0x20d)+_0x345ac5[_0x2c92cb(0x19e)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x4bbcd3){if(_0x4bbcd3>=0x7d0)return'Emerald';if(_0x4bbcd3>=0x708)return'Gold';if(_0x4bbcd3>=0x640)return'Silver';if(_0x4bbcd3>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x53e1d5=a2_0x1599fb;document['querySelectorAll']('.edit-btn')['forEach'](_0x164af5=>{const _0x52305e=a2_0x1f64;_0x164af5['addEventListener'](_0x52305e(0x2d5),async _0x1327e7=>{const _0x221499=_0x1327e7['currentTarget']['dataset']['id'];openEditPlayerModal(_0x221499);});}),document[_0x53e1d5(0x136)](_0x53e1d5(0x1f3))['forEach'](_0x302cf6=>{const _0x1f9830=_0x53e1d5;_0x302cf6['addEventListener'](_0x1f9830(0x2d5),async _0x2acc0e=>{const _0x1d92ba=_0x2acc0e['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x1d92ba);});});}async function openEditPlayerModal(_0x25ff78){const _0x4bc89c=a2_0x1599fb;try{const _0x34a8f1=currentLadder==='D1'?'players':'playersD2',_0x14f8e0=doc(db,_0x34a8f1,_0x25ff78),_0x4307d0=await getDoc(_0x14f8e0);if(!_0x4307d0['exists']()){showNotification(_0x4bc89c(0x2a1),'error');return;}const _0x1defce=_0x4307d0[_0x4bc89c(0x1ec)](),_0x24641c=document['getElementById']('edit-player-modal'),_0x2e7156=document['getElementById']('edit-username'),_0x55b1b4=document[_0x4bc89c(0x183)]('edit-elo'),_0x32ba9a=document['getElementById']('edit-wins'),_0x4d12d0=document[_0x4bc89c(0x183)]('edit-losses');_0x2e7156['value']=_0x1defce['username']||'',_0x55b1b4[_0x4bc89c(0x2a7)]=_0x1defce['eloRating']||0x4b0,_0x32ba9a['value']=_0x1defce['wins']||0x0,_0x4d12d0[_0x4bc89c(0x2a7)]=_0x1defce[_0x4bc89c(0x2cd)]||0x0,_0x24641c['dataset']['playerId']=_0x25ff78,_0x24641c['classList']['add']('active');}catch(_0x57c490){console['error']('Error\x20opening\x20edit\x20modal:',_0x57c490),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x3021bb=a2_0x1599fb;try{const _0x4290cf=document['getElementById']('edit-player-modal'),_0x3c0e7a=_0x4290cf['dataset']['playerId'];if(!_0x3c0e7a){showNotification('No\x20player\x20selected',_0x3021bb(0xfe));return;}const _0x3442ec=document['getElementById']('edit-username'),_0x4e4705=document['getElementById']('edit-elo'),_0x178284=document['getElementById']('edit-wins'),_0x308307=document['getElementById']('edit-losses'),_0x1f4e43=_0x3442ec['value']['trim'](),_0x21e262=parseInt(_0x4e4705['value']),_0xda15d4=parseInt(_0x178284['value']),_0x2b4702=parseInt(_0x308307['value']);if(!_0x1f4e43||isNaN(_0x21e262)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x3021bb(0xfe));return;}const _0x327e23=currentLadder==='D1'?'players':'playersD2',_0x3ada64=doc(db,_0x327e23,_0x3c0e7a),_0x4b0093=await getDoc(_0x3ada64),_0xf6477e=_0x4b0093['exists']()?_0x4b0093['data']():{},_0x4b93c2=_0xf6477e['eloRating']||0x4b0;await updateDoc(_0x3ada64,{'username':_0x1f4e43,'eloRating':_0x21e262,'wins':_0xda15d4||0x0,'losses':_0x2b4702||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x21e262!==_0x4b93c2){const _0x4b9118=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x4b9118),{'player':_0x1f4e43,'previousElo':_0x4b93c2,'newElo':_0x21e262,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser'][_0x3021bb(0x163)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x3021bb(0x13d),'success');}catch(_0x1c4f0c){console['error'](_0x3021bb(0x274),_0x1c4f0c),showNotification(_0x3021bb(0x2aa)+_0x1c4f0c['message'],'error');}}function closeEditPlayerModal(){const _0x42167a=a2_0x1599fb,_0x26a722=document['getElementById'](_0x42167a(0x2ee));_0x26a722['classList'][_0x42167a(0x127)]('active'),_0x26a722['dataset'][_0x42167a(0x23d)]='';}async function confirmDeletePlayer(_0x38ee9e){const _0x5217ef=a2_0x1599fb;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x2d28af=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x2d28af,_0x38ee9e)),loadPlayersData(),showNotification(_0x5217ef(0x289),'success');}catch(_0x3e8568){console['error']('Error\x20deleting\x20player:',_0x3e8568),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x3e8568[_0x5217ef(0x19e)],_0x5217ef(0xfe));}}async function setupManagePlayersSection(){const _0x25d4f2=a2_0x1599fb,_0x5623c4=document['getElementById'](_0x25d4f2(0x21d));_0x5623c4&&_0x5623c4['addEventListener']('submit',async _0x2a1c47=>{_0x2a1c47['preventDefault'](),await addNewPlayer();});const _0x8da164=document[_0x25d4f2(0x183)](_0x25d4f2(0x180));_0x8da164&&_0x8da164[_0x25d4f2(0x2e8)]('input',debounce(filterPlayerTable,0x12c));const _0x276c3e=document['getElementById']('save-player-btn');_0x276c3e&&_0x276c3e['addEventListener'](_0x25d4f2(0x2d5),saveEditedPlayer);const _0xf9961d=document['getElementById']('cancel-edit-btn');_0xf9961d&&_0xf9961d['addEventListener'](_0x25d4f2(0x2d5),closeEditPlayerModal);const _0x3ec310=document[_0x25d4f2(0x183)]('edit-player-modal');_0x3ec310&&_0x3ec310['addEventListener']('click',_0x5cfcac=>{const _0x2d3615=_0x25d4f2;_0x5cfcac[_0x2d3615(0x1f1)]===_0x3ec310&&closeEditPlayerModal();});const _0x13412d=document['getElementById']('players-ladder-selector');_0x13412d&&_0x13412d['addEventListener']('change',()=>{currentLadder=_0x13412d['value'],loadPlayersData();});}async function addNewPlayer(){const _0x3ee363=a2_0x1599fb;try{const _0x3bb7fc=document['getElementById']('new-player-username'),_0x997854=document['getElementById']('new-player-elo'),_0x37fb67=_0x3bb7fc['value'][_0x3ee363(0x2b0)](),_0x90a8e3=parseInt(_0x997854['value'])||0x4b0;if(!_0x37fb67){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0x37fb67+_0x3ee363(0x204)+_0x90a8e3+'\x20to\x20'+currentLadder+'\x20ladder');let _0x6b8d7e='players',_0x3d887d=_0x3ee363(0x14a);if(currentLadder==='D2')_0x6b8d7e=_0x3ee363(0x25a),_0x3d887d='eloHistoryD2';else currentLadder==='D3'&&(_0x6b8d7e='playersD3',_0x3d887d='eloHistoryD3');const _0x1558df=query(collection(db,_0x6b8d7e),where('username','==',_0x37fb67)),_0x262380=await getDocs(_0x1558df);if(!_0x262380['empty']){alert(_0x3ee363(0x14c)+_0x37fb67+_0x3ee363(0x2bc)+currentLadder+_0x3ee363(0x1aa));return;}const _0x45ccea=auth[_0x3ee363(0x15c)],_0x2bbaed={'username':_0x37fb67,'eloRating':_0x90a8e3,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x45ccea?_0x45ccea['email']:_0x3ee363(0x2df),'gameMode':currentLadder};await addDoc(collection(db,_0x6b8d7e),_0x2bbaed),await addDoc(collection(db,_0x3d887d),{'player':_0x37fb67,'previousElo':0x4b0,'newElo':_0x90a8e3,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x45ccea?_0x45ccea['email']:'admin','gameMode':currentLadder}),_0x3bb7fc['value']='',_0x997854['value']=_0x3ee363(0x1e1),alert('Player\x20'+_0x37fb67+_0x3ee363(0x215)+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x39c102){console['error']('Error\x20adding\x20player:',_0x39c102),alert('Error\x20adding\x20player:\x20'+_0x39c102['message']);}}document['addEventListener'](a2_0x1599fb(0x2a5),()=>{const _0x56b4f7=a2_0x1599fb,_0x5d5a67=document['getElementById']('add-player-form');_0x5d5a67&&_0x5d5a67[_0x56b4f7(0x2e8)]('submit',_0x5c3ec7=>{_0x5c3ec7['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x53bcac=a2_0x1599fb,_0x199e02=document['getElementById']('player-search')['value']['toLowerCase'](),_0x13d864=document[_0x53bcac(0x136)](_0x53bcac(0x2f5));let _0x249479=0x0;_0x13d864['forEach'](_0x3a53ed=>{const _0x12cdbe=_0x53bcac,_0x341d0d=_0x3a53ed[_0x12cdbe(0x14f)](_0x12cdbe(0x1db))?.['textContent']['toLowerCase']()||'';_0x341d0d['includes'](_0x199e02)?(_0x3a53ed['style']['display']='',_0x249479++):_0x3a53ed[_0x12cdbe(0xe5)]['display']='none';});const _0xbc1be6=document['getElementById']('no-results-message');_0xbc1be6&&(_0x249479===0x0&&_0x199e02!==''?_0xbc1be6['style']['display']='block':_0xbc1be6['style'][_0x53bcac(0x1d5)]=_0x53bcac(0x1b9));}function debounce(_0x4703a9,_0xed5435){let _0x56f0ea;return function(..._0x5ecc71){const _0x300049=a2_0x1f64;clearTimeout(_0x56f0ea),_0x56f0ea=setTimeout(()=>_0x4703a9[_0x300049(0xce)](this,_0x5ecc71),_0xed5435);};}async function loadEloHistory(_0x5138f1=0x1){const _0x52db21=a2_0x1599fb,_0x51ca09=document['getElementById'](_0x52db21(0x2d3)),_0x2986a2=currentLadder[_0x52db21(0x22b)]();if(!_0x51ca09)return;_0x51ca09['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x4826d6=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':_0x52db21(0x15d),_0x1b63ad=collection(db,_0x4826d6);let _0x489e23;if(_0x5138f1>eloHistoryPagination[_0x2986a2]['page']&&eloHistoryPagination[_0x2986a2][_0x52db21(0x11b)])_0x489e23=query(_0x1b63ad,orderBy(_0x52db21(0x2b2),'desc'),startAfter(eloHistoryPagination[_0x2986a2]['lastVisible']),limit(PAGE_SIZE));else _0x5138f1<eloHistoryPagination[_0x2986a2]['page']&&eloHistoryPagination[_0x2986a2]['firstVisible']?_0x489e23=query(_0x1b63ad,orderBy('timestamp',_0x52db21(0x21e)),endBefore(eloHistoryPagination[_0x2986a2]['firstVisible']),limitToLast(PAGE_SIZE)):_0x489e23=query(_0x1b63ad,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x1b1b12=await getDocs(_0x489e23);if(_0x1b1b12['empty']){_0x51ca09['innerHTML']=_0x52db21(0x17b),document['getElementById'](_0x2986a2+_0x52db21(0x1c2))[_0x52db21(0x226)]='Page\x201';return;}eloHistoryPagination[_0x2986a2]['page']=_0x5138f1,eloHistoryPagination[_0x2986a2][_0x52db21(0xcd)]=_0x1b1b12[_0x52db21(0x1ae)][0x0],eloHistoryPagination[_0x2986a2]['lastVisible']=_0x1b1b12[_0x52db21(0x1ae)][_0x1b1b12['docs']['length']-0x1];const _0x187cfe=new Map();_0x51ca09['innerHTML']='';const _0x4f11ff=async _0x12abf1=>{const _0x43b55c=_0x52db21;if(typeof _0x12abf1!=='string'||_0x12abf1['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x12abf1))return _0x12abf1;if(_0x187cfe['has'](_0x12abf1))return _0x187cfe[_0x43b55c(0x119)](_0x12abf1);try{for(const _0x1df896 of['players','playersD2','playersD3','nonParticipants']){const _0x129c61=await getDoc(doc(db,_0x1df896,_0x12abf1));if(_0x129c61['exists']()&&_0x129c61['data']()['username']){const _0x1d29a8=_0x129c61['data']()[_0x43b55c(0x271)];return _0x187cfe['set'](_0x12abf1,_0x1d29a8),_0x1d29a8;}}return _0x12abf1;}catch(_0x13f436){return console['warn'](_0x43b55c(0x259)+_0x12abf1+':',_0x13f436),_0x12abf1;}};for(const _0x1af17f of _0x1b1b12['docs']){const _0x54faea=_0x1af17f['data'](),_0x45efb4=document[_0x52db21(0xee)]('tr'),_0x209e34=_0x54faea['timestamp']?new Date(_0x54faea[_0x52db21(0x2b2)]['seconds']*0x3e8)[_0x52db21(0x2be)]():'N/A',_0x45d3f7=_0x54faea['newElo']-_0x54faea['previousElo'],_0x580f23=_0x45d3f7>0x0?'positive-change':_0x45d3f7<0x0?_0x52db21(0x1c7):'',_0x501067=_0x45d3f7>0x0?'+':'',_0x586d7d=_0x54faea[_0x52db21(0x1b8)]||_0x54faea[_0x52db21(0x271)]||_0x54faea['userId']||_0x52db21(0x1ab),_0x49da24=await _0x4f11ff(_0x586d7d);_0x45efb4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x209e34+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x49da24+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x54faea[_0x52db21(0x160)]||'N/A')+_0x52db21(0x1f5)+(_0x54faea['newElo']||_0x52db21(0x1ab))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x580f23+'\x22>'+_0x501067+_0x45d3f7+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x54faea['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x54faea[_0x52db21(0x2c4)]||_0x54faea['promotedBy']||_0x54faea['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x51ca09['appendChild'](_0x45efb4);}document['getElementById'](_0x2986a2+'-page-indicator')['textContent']='Page\x20'+_0x5138f1;const _0x1b7aa4=document['getElementById'](_0x2986a2+'-prev-page'),_0x3bd330=document['getElementById'](_0x2986a2+'-next-page');if(_0x1b7aa4)_0x1b7aa4[_0x52db21(0x2e7)]=_0x5138f1<=0x1;const _0x23c1d3=query(_0x1b63ad,orderBy(_0x52db21(0x2b2),'desc'),startAfter(eloHistoryPagination[_0x2986a2]['lastVisible']),limit(0x1)),_0x353489=await getDocs(_0x23c1d3);if(_0x3bd330)_0x3bd330['disabled']=_0x353489['empty'];}catch(_0x2aacea){console['error'](_0x52db21(0x2cc),_0x2aacea),_0x51ca09[_0x52db21(0x1ed)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x2aacea['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x574692){const _0x376f3c=a2_0x1599fb;switch(_0x574692){case'match_result':return'Match\x20Result';case'promotion':return _0x376f3c(0x1f4);case'demotion':return'Demotion';case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x574692||'Unknown';}}function setupEloHistorySection(){const _0x561ae5=a2_0x1599fb;document['getElementById']('d1-prev-page')[_0x561ae5(0x2e8)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById'](_0x561ae5(0x12b))['addEventListener'](_0x561ae5(0x2d5),()=>{const _0x49c8c0=_0x561ae5;loadEloHistory(eloHistoryPagination['d1'][_0x49c8c0(0x15e)]+0x1);}),document[_0x561ae5(0x183)]('d2-prev-page')[_0x561ae5(0x2e8)]('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x561ae5(0x183)]('d2-next-page')[_0x561ae5(0x2e8)]('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x3def7e=document['getElementById']('d3-prev-page'),_0x315eed=document['getElementById'](_0x561ae5(0x29a));_0x3def7e&&_0x3def7e[_0x561ae5(0x2e8)](_0x561ae5(0x2d5),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x315eed&&_0x315eed['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x2c5784=document[_0x561ae5(0x183)]('elo-history-search');_0x2c5784&&_0x2c5784['addEventListener'](_0x561ae5(0x222),debounce(filterEloHistoryTable,0x12c));const _0x4395b3=document[_0x561ae5(0x183)]('history-type-filter');_0x4395b3&&_0x4395b3['addEventListener']('change',applyEloHistoryFilters);const _0x25a844=document['getElementById']('reset-history-filters');_0x25a844&&_0x25a844[_0x561ae5(0x2e8)]('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x49b080=document['getElementById']('elo-history-search')['value']['toLowerCase'](),_0x1a4dad=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x4d40c9=0x0;_0x1a4dad['forEach'](_0x86119f=>{const _0x363e5b=a2_0x1f64;if(_0x86119f['classList'][_0x363e5b(0x287)]('loading-cell')||_0x86119f['classList']['contains']('empty-state')||_0x86119f[_0x363e5b(0x1fc)]['contains']('error-state'))return;const _0x65519f=_0x86119f['querySelector'](_0x363e5b(0x210))?.['textContent'][_0x363e5b(0x22b)]()||'',_0x4b94c2=_0x86119f['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x142946=_0x86119f['querySelector']('.admin-action')?.['textContent'][_0x363e5b(0x22b)]()||'';_0x65519f[_0x363e5b(0x193)](_0x49b080)||_0x4b94c2[_0x363e5b(0x193)](_0x49b080)||_0x142946['includes'](_0x49b080)?(_0x86119f[_0x363e5b(0xe5)]['display']='',_0x4d40c9++):_0x86119f['style']['display']=_0x363e5b(0x1b9);});}async function applyEloHistoryFilters(){const _0x8bc963=a2_0x1599fb,_0x52b7b9=document['getElementById'](_0x8bc963(0x15f))[_0x8bc963(0x2a7)],_0x43f55c=document[_0x8bc963(0x183)]('history-end-date')[_0x8bc963(0x2a7)],_0x28a808=document['getElementById'](_0x8bc963(0x105))[_0x8bc963(0x2a7)],_0x1fea9b=currentLadder['toLowerCase']();eloHistoryPagination[_0x1fea9b]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x4d3586=document[_0x8bc963(0x183)]('elo-history-table-body');_0x4d3586['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x498510=currentLadder==='D1'?'eloHistory':_0x8bc963(0x28f),_0x13c436=collection(db,_0x498510);let _0x51b614=[orderBy('timestamp',_0x8bc963(0x21e))];if(_0x52b7b9){const _0x2d44fa=new Date(_0x52b7b9);_0x2d44fa['setHours'](0x0,0x0,0x0,0x0),_0x51b614['push'](where('timestamp','>=',_0x2d44fa));}if(_0x43f55c){const _0x58bb4c=new Date(_0x43f55c);_0x58bb4c[_0x8bc963(0x2fd)](0x17,0x3b,0x3b,0x3e7),_0x51b614['push'](where('timestamp','<=',_0x58bb4c));}_0x28a808&&_0x28a808!==_0x8bc963(0xdf)&&_0x51b614['push'](where('type','==',_0x28a808));_0x51b614[_0x8bc963(0x2c7)](limit(PAGE_SIZE));const _0x1e2bf9=query(_0x13c436,..._0x51b614),_0x866e91=await getDocs(_0x1e2bf9);!_0x866e91[_0x8bc963(0x233)]&&(eloHistoryPagination[_0x1fea9b]['firstVisible']=_0x866e91['docs'][0x0],eloHistoryPagination[_0x1fea9b]['lastVisible']=_0x866e91['docs'][_0x866e91['docs']['length']-0x1]);_0x4d3586[_0x8bc963(0x1ed)]='';if(_0x866e91['empty']){_0x4d3586['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x866e91[_0x8bc963(0x2a0)](_0x967aca=>{const _0x170164=_0x8bc963,_0x282e2b=_0x967aca['data'](),_0x3e6c18=document['createElement']('tr'),_0x9610a5=_0x282e2b[_0x170164(0x2b2)]?new Date(_0x282e2b[_0x170164(0x2b2)][_0x170164(0x2cb)]*0x3e8)[_0x170164(0x2be)]():'N/A',_0x43b06a=_0x282e2b['newElo']-_0x282e2b[_0x170164(0x160)],_0x9fc011=_0x43b06a>0x0?'positive-change':_0x43b06a<0x0?'negative-change':'',_0x2b209e=_0x43b06a>0x0?'+':'',_0x3b6212=_0x282e2b['player']||_0x282e2b[_0x170164(0x271)]||_0x282e2b['userId']||'N/A';_0x3e6c18[_0x170164(0x1ed)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x9610a5+_0x170164(0x1ce)+_0x3b6212+_0x170164(0x206)+(_0x282e2b['previousElo']||'N/A')+_0x170164(0x1f5)+(_0x282e2b[_0x170164(0x2d4)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x9fc011+'\x22>'+_0x2b209e+_0x43b06a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x282e2b['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x282e2b['modifiedBy']||_0x282e2b[_0x170164(0x20e)]||_0x282e2b['demotedBy']||'System')+_0x170164(0x2ab),_0x4d3586['appendChild'](_0x3e6c18);}),document['getElementById'](_0x1fea9b+'-page-indicator')[_0x8bc963(0x226)]='Page\x201';}catch(_0x4f77ab){console['error']('Error\x20applying\x20filters:',_0x4f77ab),_0x4d3586['innerHTML']=_0x8bc963(0x1b4)+_0x4f77ab['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x37d5cb=a2_0x1599fb;document[_0x37d5cb(0x183)]('history-start-date')['value']='',document['getElementById'](_0x37d5cb(0x24f))[_0x37d5cb(0x2a7)]='',document['getElementById'](_0x37d5cb(0x105))['value']='all',document['getElementById'](_0x37d5cb(0x293))[_0x37d5cb(0x2a7)]='';const _0xb5738e=currentLadder['toLowerCase']();eloHistoryPagination[_0xb5738e]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x58bb4a=a2_0x1599fb,_0x9b2d6c=document[_0x58bb4a(0x183)](_0x58bb4a(0x272)),_0x1c6711=document['getElementById']('promote-modal'),_0x553db1=document['getElementById']('promote-form');_0x9b2d6c&&_0x1c6711&&_0x553db1&&(_0x9b2d6c['addEventListener']('click',()=>{const _0x1642f2=_0x58bb4a;_0x1c6711['classList'][_0x1642f2(0x153)]('active');}),_0x1c6711['addEventListener']('click',_0x41d92b=>{const _0x5421ef=_0x58bb4a;_0x41d92b['target']===_0x1c6711&&_0x1c6711['classList'][_0x5421ef(0x127)](_0x5421ef(0x306));}),_0x553db1['addEventListener']('submit',async _0x34fd3a=>{const _0x5375c6=_0x58bb4a;_0x34fd3a['preventDefault']();const _0x51fb2d=document['getElementById']('promote-username'),_0x4e1722=document['getElementById']('promote-ladder'),_0x50ea82=_0x51fb2d['value']['trim'](),_0x440036=_0x4e1722['value'];if(!_0x50ea82){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x50ea82,_0x440036),_0x1c6711['classList'][_0x5375c6(0x127)]('active'),_0x51fb2d['value']='';}catch(_0x15cef6){showNotification(_0x15cef6['message'],'error');}}),document['getElementById'](_0x58bb4a(0x1d8))['addEventListener']('click',()=>{const _0x3b2dab=_0x58bb4a;_0x1c6711[_0x3b2dab(0x1fc)][_0x3b2dab(0x127)]('active');}));const _0x38cd65=document[_0x58bb4a(0x183)]('demote-player-btn'),_0x3ce494=document['getElementById']('demote-modal'),_0x8bca82=document['getElementById']('demote-form');_0x38cd65&&_0x3ce494&&_0x8bca82&&(_0x38cd65['addEventListener'](_0x58bb4a(0x2d5),()=>{_0x3ce494['classList']['add']('active');}),_0x3ce494[_0x58bb4a(0x2e8)](_0x58bb4a(0x2d5),_0x110f53=>{_0x110f53['target']===_0x3ce494&&_0x3ce494['classList']['remove']('active');}),_0x8bca82['addEventListener']('submit',async _0x91b471=>{const _0x508295=_0x58bb4a;_0x91b471['preventDefault']();const _0x18298c=document['getElementById']('demote-username'),_0x47be15=document['getElementById']('demote-ladder'),_0x50b434=_0x18298c['value'][_0x508295(0x2b0)](),_0x557762=_0x47be15['value'];if(!_0x50b434){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x50b434,_0x557762),document['getElementById']('demote-modal')['classList'][_0x508295(0x127)]('active'),document['getElementById']('demote-username')['value']='';}catch(_0x28e3ce){console['error'](_0x508295(0xfd),_0x28e3ce);}}));const _0x4022b7=document['getElementById']('set-elo-btn'),_0x2ca905=document['getElementById'](_0x58bb4a(0x1f2)),_0x553f6f=document[_0x58bb4a(0x183)]('set-elo-form');_0x4022b7&&_0x2ca905&&_0x553f6f&&(_0x4022b7[_0x58bb4a(0x2e8)]('click',()=>{const _0x4d1fd1=_0x58bb4a;_0x2ca905[_0x4d1fd1(0x1fc)]['add']('active');}),_0x2ca905['addEventListener']('click',_0x3288f6=>{const _0x5e2971=_0x58bb4a;_0x3288f6[_0x5e2971(0x1f1)]===_0x2ca905&&_0x2ca905[_0x5e2971(0x1fc)]['remove']('active');}),_0x553f6f['addEventListener']('submit',async _0x35fb32=>{const _0x223dab=_0x58bb4a;_0x35fb32['preventDefault']();const _0x254ad0=document[_0x223dab(0x183)](_0x223dab(0x2ef)),_0x587ddb=document['getElementById']('set-elo-value');let _0x44b669;const _0x3257a9=document[_0x223dab(0x183)](_0x223dab(0x211)),_0x4c21e3=document['querySelector'](_0x223dab(0x1e2));if(_0x3257a9)_0x44b669=_0x3257a9[_0x223dab(0x2a7)];else _0x4c21e3?_0x44b669=_0x4c21e3['value']:_0x44b669='D1';if(!_0x254ad0||!_0x587ddb){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x561122=_0x254ad0['value']['trim'](),_0x40b882=parseInt(_0x587ddb['value']);if(!_0x561122||isNaN(_0x40b882)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x223dab(0xfe));return;}try{await setCustomElo(_0x561122,_0x40b882,_0x44b669),_0x2ca905['classList']['remove'](_0x223dab(0x306)),_0x254ad0['value']='',_0x587ddb['value']='';}catch(_0x46b805){showNotification(_0x46b805['message'],_0x223dab(0xfe));}}),document[_0x58bb4a(0x183)]('cancel-set-elo-btn')['addEventListener']('click',()=>{_0x2ca905['classList']['remove']('active');}));const _0x592664=document['getElementById']('set-role-modal'),_0x69d484=document[_0x58bb4a(0x183)]('set-role-form');if(_0x592664&&_0x69d484){_0x592664['addEventListener']('click',_0x41d649=>{_0x41d649['target']===_0x592664&&closeModalHandler();}),_0x69d484['addEventListener'](_0x58bb4a(0x1d9),async _0x26cc1f=>{const _0x33bfca=_0x58bb4a;_0x26cc1f[_0x33bfca(0x12d)]();const _0x365987=document['getElementById'](_0x33bfca(0xdb)),_0x4c7943=document['getElementById']('role-name'),_0x3785b6=document[_0x33bfca(0x183)]('role-color'),_0x52d6a1=_0x365987['value'][_0x33bfca(0x2b0)](),_0x21cf9e=_0x4c7943['value']['trim'](),_0x5dfd20=_0x3785b6[_0x33bfca(0x2a7)];if(!_0x52d6a1){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x52d6a1,_0x21cf9e,_0x5dfd20),closeModalHandler(),loadUsersWithRoles();}catch(_0x172cf7){}});const _0x5f5fcb=document['getElementById'](_0x58bb4a(0x2ce));_0x5f5fcb&&(_0x5f5fcb[_0x58bb4a(0x109)]('click',closeModalHandler),_0x5f5fcb['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x417c02,_0x3dc224){const _0x5b383b=a2_0x1599fb;try{console['log'](_0x5b383b(0x2e5)+_0x417c02+_0x5b383b(0x1e9)+_0x3dc224+'\x20ladder');const _0x460b92=auth['currentUser'];if(!_0x460b92)throw new Error(_0x5b383b(0xf5));const _0x2aedb1=_0x3dc224==='D2'?_0x5b383b(0x25a):'players',_0x261e44=_0x3dc224==='D2'?'eloHistoryD2':_0x5b383b(0x14a);console['log']('Searching\x20for\x20player\x20in\x20'+_0x2aedb1);const _0x30eef5=collection(db,_0x2aedb1),_0x6d9cc6=query(_0x30eef5,where(_0x5b383b(0x271),'==',_0x417c02)),_0x50e42a=await getDocs(_0x6d9cc6);if(_0x50e42a['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x3dc224+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x3dc224+'\x20ladder');}const _0x155583=_0x50e42a['docs'][0x0],_0x43c6d3=_0x155583[_0x5b383b(0x1ec)](),_0x30aaa3=_0x43c6d3['eloRating']||0x4b0,_0x3945d2=_0x155583['id'];console['log'](_0x5b383b(0x1be)+_0x30aaa3);const _0x4deb41=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x87e2bd=_0x4deb41[_0x5b383b(0x213)](_0x73a610=>_0x73a610[_0x5b383b(0x2e2)]>_0x30aaa3);if(!_0x87e2bd){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x3dc224+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x3dc224+_0x5b383b(0x1aa));}console['log']('Promoting\x20player\x20to\x20'+_0x87e2bd['name']+'\x20('+_0x87e2bd['elo']+')'),await updateDoc(doc(db,_0x2aedb1,_0x155583['id']),{'eloRating':_0x87e2bd['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x460b92[_0x5b383b(0x163)]||'admin'}),await addDoc(collection(db,_0x261e44),{'player':_0x417c02,'previousElo':_0x30aaa3,'newElo':_0x87e2bd[_0x5b383b(0x2e2)],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x87e2bd['name'],'promotedBy':_0x460b92['email']||_0x5b383b(0x2df),'gameMode':_0x3dc224});try{const {promotionManager:_0x3c1f1a}=await import(_0x5b383b(0x129)),_0x3b78d4=_0x3c1f1a['getRankName'](_0x30aaa3),_0x2bd896=_0x87e2bd[_0x5b383b(0x112)];await _0x3c1f1a[_0x5b383b(0x177)](_0x3945d2,_0x417c02,_0x30aaa3,_0x87e2bd[_0x5b383b(0x2e2)],_0x3b78d4,_0x2bd896,'promotion',{'displayName':_0x417c02,'source':_0x5b383b(0x2df),'adminUser':_0x460b92['email'],'ladder':_0x3dc224}),console['log'](_0x5b383b(0x295));}catch(_0x4537ae){console[_0x5b383b(0xfe)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x4537ae);}return alert('Successfully\x20promoted\x20'+_0x417c02+'\x20to\x20'+_0x87e2bd[_0x5b383b(0x112)]+'\x20('+_0x87e2bd[_0x5b383b(0x2e2)]+')'),currentLadder===_0x3dc224&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x5aa724){console['error']('Error\x20promoting\x20player:',_0x5aa724),alert('Error\x20promoting\x20player:\x20'+_0x5aa724['message']);throw _0x5aa724;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x3557b0=a2_0x1599fb,_0x3eef69=document[_0x3557b0(0x183)](_0x3557b0(0x189));_0x3eef69&&_0x3eef69[_0x3557b0(0x2e8)]('submit',async _0x54d180=>{const _0x276d0f=_0x3557b0;_0x54d180['preventDefault']();const _0x5ad036=document['getElementById']('promote-username')[_0x276d0f(0x2a7)][_0x276d0f(0x2b0)](),_0xf74927=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x5ad036){alert(_0x276d0f(0x103));return;}try{await promotePlayer(_0x5ad036,_0xf74927),document['getElementById']('promote-modal')['classList']['remove']('active'),document[_0x276d0f(0x183)]('promote-username')['value']='';}catch(_0x41dc55){console['error']('Error\x20in\x20promotion:',_0x41dc55);}});});async function demotePlayer(_0x2aec44,_0x5210a9){const _0x8daad=a2_0x1599fb;try{console['log']('Attempting\x20to\x20demote\x20'+_0x2aec44+'\x20in\x20'+_0x5210a9+_0x8daad(0x1aa));const _0x26dee=auth['currentUser'];if(!_0x26dee)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x1202c1=_0x5210a9==='D2'?'playersD2':_0x8daad(0x1f6),_0x1b7bb8=_0x5210a9==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x1202c1);const _0x28cf93=collection(db,_0x1202c1),_0x32bcdd=query(_0x28cf93,where('username','==',_0x2aec44)),_0x17cc6d=await getDocs(_0x32bcdd);if(_0x17cc6d['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x5210a9+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x5210a9+'\x20ladder');}const _0xa3d9f5=_0x17cc6d[_0x8daad(0x1ae)][0x0],_0x2b43a6=_0xa3d9f5['data'](),_0x5c7cb8=_0x2b43a6[_0x8daad(0xf4)]||0x4b0;console[_0x8daad(0x1a0)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x5c7cb8);const _0xd81bbc=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x8daad(0x1ca),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x17ef0d=_0xd81bbc['find'](_0x3f680a=>_0x3f680a['elo']<_0x5c7cb8);if(!_0x17ef0d){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x5210a9+_0x8daad(0x1aa));throw new Error(_0x8daad(0xd7)+_0x5210a9+_0x8daad(0x1aa));}console['log']('Demoting\x20player\x20to\x20'+_0x17ef0d['name']+'\x20('+_0x17ef0d['elo']+')'),await updateDoc(doc(db,_0x1202c1,_0xa3d9f5['id']),{'eloRating':_0x17ef0d[_0x8daad(0x2e2)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x26dee['email']||_0x8daad(0x2df)}),await addDoc(collection(db,_0x1b7bb8),{'player':_0x2aec44,'previousElo':_0x5c7cb8,'newElo':_0x17ef0d['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x17ef0d['name'],'demotedBy':_0x26dee['email']||'admin','gameMode':_0x5210a9});try{const {promotionManager:_0x9328e}=await import('./promotions.js'),_0x2a5503=_0x9328e['getRankName'](_0x5c7cb8),_0x399880=_0x17ef0d['name'];await _0x9328e[_0x8daad(0x177)](_0xa3d9f5['id'],_0x2aec44,_0x5c7cb8,_0x17ef0d['elo'],_0x2a5503,_0x399880,'demotion',{'displayName':_0x2aec44,'source':_0x8daad(0x2df),'adminUser':_0x26dee['email'],'ladder':_0x5210a9}),console['log'](_0x8daad(0x30a));}catch(_0x2b1f04){console['error'](_0x8daad(0x260),_0x2b1f04);}return alert('Successfully\x20demoted\x20'+_0x2aec44+'\x20to\x20'+_0x17ef0d['name']+'\x20('+_0x17ef0d[_0x8daad(0x2e2)]+')'),currentLadder===_0x5210a9&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x190ba2){console['error'](_0x8daad(0x2b1),_0x190ba2),alert('Error\x20demoting\x20player:\x20'+_0x190ba2['message']);throw _0x190ba2;}}document['addEventListener']('DOMContentLoaded',()=>{const _0xb8a0d9=document['getElementById']('demote-form');_0xb8a0d9&&_0xb8a0d9['addEventListener']('submit',async _0x123374=>{const _0x16057d=a2_0x1f64;_0x123374[_0x16057d(0x12d)]();const _0x2958f9=document['getElementById']('demote-username')['value'][_0x16057d(0x2b0)](),_0x1b9055=document['querySelector'](_0x16057d(0x2e9))['value'];if(!_0x2958f9){alert(_0x16057d(0x103));return;}try{await demotePlayer(_0x2958f9,_0x1b9055),document[_0x16057d(0x183)]('demote-modal')['classList']['remove']('active'),document[_0x16057d(0x183)](_0x16057d(0x24a))['value']='';}catch(_0xe6107f){console['error']('Error\x20in\x20demotion:',_0xe6107f);}});});async function setCustomElo(_0x316c35,_0x2d4103,_0x28a5c4){const _0x1be2e4=a2_0x1599fb;try{const _0x418514=auth['currentUser'];if(!_0x418514||!isAdmin(_0x418514['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x51b36f=_0x28a5c4==='D2'?'playersD2':'players',_0x2dfb50=_0x28a5c4==='D2'?'eloHistoryD2':_0x1be2e4(0x14a),_0x3aef3c=collection(db,_0x51b36f),_0x39d631=query(_0x3aef3c,where(_0x1be2e4(0x271),'==',_0x316c35)),_0x3f2f72=await getDocs(_0x39d631);if(_0x3f2f72['empty'])throw new Error(_0x1be2e4(0x2d0)+_0x28a5c4+'\x20ladder');const _0x2e236f=_0x3f2f72['docs'][0x0],_0x3e8e36=_0x2e236f['data'](),_0x321819=_0x3e8e36['eloRating']||0x4b0,_0x5ad58e=writeBatch(db);_0x5ad58e['update'](doc(db,_0x51b36f,_0x2e236f['id']),{'eloRating':_0x2d4103,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x418514['email']});const _0x6f1072=doc(collection(db,_0x2dfb50));return _0x5ad58e['set'](_0x6f1072,{'player':_0x316c35,'previousElo':_0x321819,'newElo':_0x2d4103,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x418514['email'],'gameMode':_0x28a5c4}),await _0x5ad58e[_0x1be2e4(0x280)](),showNotification('ELO\x20rating\x20for\x20'+_0x316c35+_0x1be2e4(0x2ca)+_0x321819+'\x20to\x20'+_0x2d4103,'success'),currentLadder===_0x28a5c4&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x17ee77){console['error']('Error\x20setting\x20custom\x20ELO:',_0x17ee77);throw _0x17ee77;}}async function setUserRole(_0x17b46b,_0x451836,_0x447dde){const _0x575aad=a2_0x1599fb;try{const _0x2a894a=auth['currentUser'];if(!_0x2a894a||!isAdmin(_0x2a894a['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0xcf6ce9=_0x451836?_0x451836['trim']():null,_0x2aaf94=_0xcf6ce9?_0x447dde||'#808080':null,[_0x35aee3,_0x56cd25]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x17b46b))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x17b46b)))]),_0x5d0151=[];if(!_0x35aee3['empty'])_0x5d0151['push']({'ref':_0x35aee3['docs'][0x0]['ref'],'source':'D1'});if(!_0x56cd25['empty'])_0x5d0151[_0x575aad(0x2c7)]({'ref':_0x56cd25[_0x575aad(0x1ae)][0x0]['ref'],'source':'D2'});if(_0x5d0151['length']===0x0){const [_0x25c2b9,_0x14e5dd]=await Promise[_0x575aad(0xdf)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x17b46b))),getDocs(query(collection(db,'userProfiles'),where(_0x575aad(0x271),'==',_0x17b46b)))]);if(!_0x25c2b9['empty'])_0x5d0151['push']({'ref':_0x25c2b9[_0x575aad(0x1ae)][0x0][_0x575aad(0xc8)],'source':_0x575aad(0x2c0)});if(!_0x14e5dd[_0x575aad(0x233)])_0x5d0151['push']({'ref':_0x14e5dd['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x5d0151[_0x575aad(0x298)]===0x0)throw new Error('User\x20\x22'+_0x17b46b+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x267d08=writeBatch(db);_0x5d0151['forEach'](_0x17b98b=>{const _0x2f59b6=_0x575aad;console['log']('Updating\x20role\x20for\x20'+_0x17b46b+'\x20in\x20'+_0x17b98b[_0x2f59b6(0x296)]),!_0xcf6ce9?_0x267d08['update'](_0x17b98b[_0x2f59b6(0xc8)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x267d08[_0x2f59b6(0x124)](_0x17b98b[_0x2f59b6(0xc8)],{'roleName':_0xcf6ce9,'roleColor':_0x2aaf94,'roleAssignedBy':_0x2a894a[_0x2f59b6(0x163)],'roleAssignedAt':serverTimestamp()});}),await _0x267d08['commit']();const _0x4d5570=_0xcf6ce9?_0x575aad(0x270)+_0xcf6ce9+_0x575aad(0x170):_0x575aad(0x27d);return showNotification(_0x4d5570+'\x20for\x20user\x20\x22'+_0x17b46b+'\x22','success'),!![];}catch(_0x47eb86){console[_0x575aad(0xfe)]('Error\x20setting\x20user\x20role:',_0x47eb86),showNotification('Error:\x20'+_0x47eb86['message'],'error');throw _0x47eb86;}}function showNotification(_0xca9ff7,_0x3faeaf=a2_0x1599fb(0x182)){const _0x43e92c=a2_0x1599fb,_0x23deab=document['createElement'](_0x43e92c(0x1d6));_0x23deab['className']='notification\x20'+_0x3faeaf,_0x23deab['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x3faeaf)+_0x43e92c(0x1f7)+_0xca9ff7+_0x43e92c(0x1c8),document['body']['appendChild'](_0x23deab),setTimeout(()=>{_0x23deab['classList']['add']('active');},0xa);const _0x4a860a=setTimeout(()=>{closeNotification(_0x23deab);},0x1388);_0x23deab[_0x43e92c(0x14f)]('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x4a860a),closeNotification(_0x23deab);});}function getNotificationIcon(_0x100c7c){const _0x34f42d=a2_0x1599fb;switch(_0x100c7c){case'success':return'fa-check-circle';case'error':return'fa-exclamation-circle';case _0x34f42d(0x1e8):return _0x34f42d(0x242);case'info':default:return'fa-info-circle';}}function closeNotification(_0x55df96){_0x55df96['classList']['remove']('active'),setTimeout(()=>{const _0x29a7fa=a2_0x1f64;_0x55df96[_0x29a7fa(0x127)]();},0x12c);}function setupUserRolesSection(){const _0x549a60=a2_0x1599fb,_0x2fa390=document['getElementById']('load-users-data');_0x2fa390&&_0x2fa390['addEventListener'](_0x549a60(0x2d5),function(){const _0x121b3b=_0x549a60;this[_0x121b3b(0x1fc)]['add']('loading'),this[_0x121b3b(0x1ed)]=_0x121b3b(0x23e),loadUsersWithRoles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x2fa3d2=>{const _0x30f8e9=_0x121b3b;console['error']('Error\x20loading\x20users:',_0x2fa3d2),this[_0x30f8e9(0x1fc)][_0x30f8e9(0x127)](_0x30f8e9(0x19f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x428cb3=document['getElementById']('add-new-role-btn');_0x428cb3&&_0x428cb3['addEventListener'](_0x549a60(0x2d5),()=>{const _0x40628b=_0x549a60,_0x33a17c=document[_0x40628b(0x183)]('set-role-modal');_0x33a17c&&_0x33a17c['classList']['add']('active');});const _0x248001=document['getElementById']('user-search');_0x248001&&_0x248001['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x4bb980=document['getElementById']('role-filter');_0x4bb980&&_0x4bb980['addEventListener'](_0x549a60(0x283),filterUsersTable);}async function loadUsersWithRoles(){const _0x5ebaf1=a2_0x1599fb,_0x14dde3=document['getElementById']('users-table-body');if(!_0x14dde3)return;_0x14dde3[_0x5ebaf1(0x1ed)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x2b95d9,_0x53e7cb,_0x3b55d8,_0x512674]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x5ebaf1(0x24c))),getDocs(collection(db,'userProfiles'))]),_0x4a901b=new Map();function _0x595836(_0x5434e1,_0x211a2d){const _0x169920=_0x5ebaf1;_0x5434e1[_0x169920(0x2a0)](_0x2b55a0=>{const _0x413036=_0x169920,_0x2aace3=_0x2b55a0['data']();if(!_0x2aace3['username'])return;if(!_0x4a901b['has'](_0x2aace3['username']))_0x4a901b['set'](_0x2aace3[_0x413036(0x271)],{'username':_0x2aace3['username'],'roleName':_0x2aace3[_0x413036(0x202)]||null,'roleColor':_0x2aace3['roleColor']||null,'roleAssignedBy':_0x2aace3['roleAssignedBy']||null,'roleAssignedAt':_0x2aace3['roleAssignedAt']||null,'sources':[_0x211a2d]});else{const _0x16068e=_0x4a901b['get'](_0x2aace3[_0x413036(0x271)]);_0x2aace3[_0x413036(0x202)]&&(!_0x16068e['roleName']||_0x211a2d==='D1'||_0x211a2d==='D2')&&(_0x16068e[_0x413036(0x202)]=_0x2aace3['roleName'],_0x16068e['roleColor']=_0x2aace3['roleColor'],_0x16068e['roleAssignedBy']=_0x2aace3[_0x413036(0x1d1)],_0x16068e[_0x413036(0x171)]=_0x2aace3[_0x413036(0x171)]),!_0x16068e['sources'][_0x413036(0x193)](_0x211a2d)&&_0x16068e['sources'][_0x413036(0x2c7)](_0x211a2d);}});}_0x595836(_0x2b95d9,'D1'),_0x595836(_0x53e7cb,'D2'),_0x595836(_0x3b55d8,'Non-Participant'),_0x595836(_0x512674,_0x5ebaf1(0x147));const _0x4e7d23=Array['from'](_0x4a901b['values']())['sort']((_0x4e9217,_0x306b13)=>_0x4e9217[_0x5ebaf1(0x271)]['localeCompare'](_0x306b13['username']));if(_0x4e7d23['length']===0x0){_0x14dde3['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x14dde3['innerHTML']='',_0x4e7d23[_0x5ebaf1(0x2a0)](_0x4d0fb0=>{const _0x96df77=_0x5ebaf1,_0x588ca5=document['createElement']('tr');_0x588ca5['dataset']['username']=_0x4d0fb0[_0x96df77(0x271)],_0x588ca5['dataset'][_0x96df77(0x202)]=_0x4d0fb0[_0x96df77(0x202)]||'',_0x588ca5['dataset']['roleColor']=_0x4d0fb0['roleColor']||'#808080';const _0x3e4c39=_0x4d0fb0['roleAssignedAt']?new Date(_0x4d0fb0['roleAssignedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x96df77(0x1ab),_0x5d1144=_0x4d0fb0[_0x96df77(0x202)]?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x4d0fb0['roleColor']+';\x20color:\x20'+getContrastColor(_0x4d0fb0['roleColor'])+_0x96df77(0x144)+_0x4d0fb0[_0x96df77(0x202)]+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x588ca5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4d0fb0['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x4d0fb0['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5d1144+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4d0fb0['roleAssignedBy']||_0x96df77(0x1ab))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3e4c39+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x4d0fb0['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4d0fb0[_0x96df77(0x202)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x4d0fb0['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x14dde3['appendChild'](_0x588ca5);}),document[_0x5ebaf1(0x136)](_0x5ebaf1(0x1dd))['forEach'](_0x3e5dcf=>{_0x3e5dcf['addEventListener']('click',()=>{const _0x16c24d=a2_0x1f64,_0x4ac4b5=_0x3e5dcf[_0x16c24d(0x1c3)]['username'];openRoleEditModal(_0x4ac4b5);});}),document['querySelectorAll'](_0x5ebaf1(0x17d))[_0x5ebaf1(0x2a0)](_0x4808b9=>{const _0x95f0a1=_0x5ebaf1;_0x4808b9['addEventListener'](_0x95f0a1(0x2d5),()=>{const _0x5bc9ec=_0x4808b9['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x5bc9ec+'?')&&setUserRole(_0x5bc9ec,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x3dc85d=>console['error']('Error\x20removing\x20role:',_0x3dc85d));});});}catch(_0x27a86a){console['error']('Error\x20loading\x20users:',_0x27a86a),_0x14dde3[_0x5ebaf1(0x1ed)]=_0x5ebaf1(0x230);}}function openRoleEditModal(_0x50ffba){const _0x410e74=a2_0x1599fb;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x50ffba);const _0x546f4d=document['getElementById']('set-role-modal'),_0x25cdb6=document[_0x410e74(0x183)](_0x410e74(0xdb)),_0x4d930d=document['getElementById']('user-role');if(!_0x546f4d){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console[_0x410e74(0x1a0)](_0x410e74(0x116),_0x546f4d);_0x25cdb6?(_0x25cdb6['value']=_0x50ffba,console[_0x410e74(0x1a0)]('Username\x20input\x20set\x20to:\x20'+_0x50ffba)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x283f5e=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x50ffba+'\x22]');if(_0x283f5e&&_0x4d930d){const _0x55c273=_0x283f5e['dataset'][_0x410e74(0x1bd)];_0x4d930d[_0x410e74(0x2a7)]=_0x55c273===_0x410e74(0x1b9)?'':_0x55c273,console[_0x410e74(0x1a0)](_0x410e74(0x203)+_0x4d930d['value']+_0x410e74(0xea)+_0x55c273+')');}else{if(!_0x283f5e)console['warn'](_0x410e74(0x10c)+_0x50ffba+'\x20not\x20found.');if(!_0x4d930d)console['warn'](_0x410e74(0x2d7));if(_0x4d930d)_0x4d930d['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x546f4d['classList'][_0x410e74(0x153)]('active');const _0x3dfeab=document['getElementById'](_0x410e74(0x2ce));_0x3dfeab?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x3dfeab[_0x410e74(0x109)](_0x410e74(0x2d5),closeModalHandler),_0x3dfeab['addEventListener'](_0x410e74(0x2d5),closeModalHandler)):console[_0x410e74(0xf7)](_0x410e74(0x174)),console['log']('Attaching\x20background\x20click\x20listener.'),_0x546f4d['removeEventListener']('click',closeModalBackgroundHandler),_0x546f4d[_0x410e74(0x2e8)]('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x4a5a25){_0x4a5a25['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x396ca3=a2_0x1599fb,_0xdc51ec=document['getElementById']('set-role-modal');_0xdc51ec&&(_0xdc51ec['classList']['remove']('active'),_0xdc51ec[_0x396ca3(0x109)](_0x396ca3(0x2d5),closeModalBackgroundHandler));}function filterUsersTable(){const _0x546cd0=a2_0x1599fb,_0x22fb2b=document['getElementById'](_0x546cd0(0xcb))?.[_0x546cd0(0x2a7)]['toLowerCase']()||'',_0x3c36bb=document['getElementById'](_0x546cd0(0x196))?.['value']||'all',_0x11aa65=document['querySelectorAll']('#users-table-body\x20tr');let _0x9e4530=0x0;_0x11aa65['forEach'](_0x12124c=>{const _0x24b259=_0x546cd0;if(_0x12124c['querySelector']('.loading-cell')||_0x12124c['querySelector']('.empty-state')||_0x12124c['querySelector']('.error-state'))return;const _0x12e014=_0x12124c[_0x24b259(0x1c3)]['username']?.[_0x24b259(0x22b)]()||'',_0x441d31=_0x12124c['dataset']['role']||'none',_0x1e9e85=_0x12e014['includes'](_0x22fb2b),_0x3448d4=_0x3c36bb==='all'||_0x441d31===_0x3c36bb;_0x1e9e85&&_0x3448d4?(_0x12124c['style']['display']='',_0x9e4530++):_0x12124c['style']['display']='none';});if(_0x9e4530===0x0&&_0x11aa65['length']>0x0){const _0x46da67=document[_0x546cd0(0x183)](_0x546cd0(0x12c));if(_0x46da67){if(!_0x46da67['querySelector']('.no-results')){const _0x2b5102=document['createElement']('tr');_0x2b5102['classList'][_0x546cd0(0x153)]('no-results'),_0x2b5102['innerHTML']=_0x546cd0(0x21a),_0x46da67['appendChild'](_0x2b5102);}}}else{const _0x1f0eeb=document['querySelector'](_0x546cd0(0x253));_0x1f0eeb&&_0x1f0eeb['remove']();}}function setupManageArticlesSection(){const _0x57cab1=a2_0x1599fb,_0x1e30fd=document['getElementById']('load-articles-data');_0x1e30fd&&_0x1e30fd['addEventListener'](_0x57cab1(0x2d5),function(){const _0x186849=_0x57cab1;this['classList']['add']('loading'),this[_0x186849(0x1ed)]=_0x186849(0x23e),loadArticles()[_0x186849(0x13a)](()=>{const _0x3312ca=_0x186849;this[_0x3312ca(0x1fc)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x5d0a65=>{const _0x3c2fd4=_0x186849;console['error'](_0x3c2fd4(0x1cc),_0x5d0a65),this[_0x3c2fd4(0x1fc)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x431cf6=document['getElementById']('create-new-article-btn');_0x431cf6?(console[_0x57cab1(0x1a0)]('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x431cf6['style']['display']='block',_0x431cf6[_0x57cab1(0x2e8)]('click',()=>{openArticleModal();})):console[_0x57cab1(0xfe)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x150948=document[_0x57cab1(0x183)](_0x57cab1(0x2fc));_0x150948&&_0x150948[_0x57cab1(0x2e8)](_0x57cab1(0x1d9),_0x16c691=>{_0x16c691['preventDefault'](),saveArticle();});const _0x47b6cc=document[_0x57cab1(0x183)]('cancel-article-btn');_0x47b6cc&&_0x47b6cc['addEventListener']('click',()=>{closeArticleModal();});const _0x2478e1=document[_0x57cab1(0x14f)](_0x57cab1(0x2ac));_0x2478e1&&_0x2478e1['addEventListener'](_0x57cab1(0x2d5),()=>{closeArticleModal();});const _0x3abf74=document[_0x57cab1(0x183)](_0x57cab1(0x25e));_0x3abf74&&_0x3abf74['addEventListener']('click',_0x6d3880=>{_0x6d3880['target']===_0x3abf74&&closeArticleModal();});}async function loadArticles(){const _0x1bc3a9=a2_0x1599fb,_0x42dac6=document[_0x1bc3a9(0x183)](_0x1bc3a9(0xe4));if(!_0x42dac6)return;_0x42dac6['innerHTML']=_0x1bc3a9(0x26d);try{const _0x2ee4ee=collection(db,_0x1bc3a9(0x23a)),_0x3e2e70=query(_0x2ee4ee,orderBy('createdAt',_0x1bc3a9(0x21e))),_0x477a72=await getDocs(_0x3e2e70);if(_0x477a72[_0x1bc3a9(0x233)]){_0x42dac6['innerHTML']=_0x1bc3a9(0x29c);return;}_0x42dac6['innerHTML']='',_0x477a72[_0x1bc3a9(0x2a0)](_0x2afadf=>{const _0x406027=_0x1bc3a9,_0x456b30=_0x2afadf['data'](),_0x39ccbe=document['createElement']('tr'),_0x31921e=_0x456b30[_0x406027(0x18b)]?new Date(_0x456b30['createdAt']['seconds']*0x3e8)[_0x406027(0x2be)]():'N/A';_0x39ccbe['innerHTML']=_0x406027(0x2a9)+(_0x456b30[_0x406027(0x27e)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x456b30[_0x406027(0x1a3)]||_0x406027(0x104))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x31921e+_0x406027(0x302)+_0x2afadf['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x2afadf['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x42dac6['appendChild'](_0x39ccbe);}),setupArticleActionButtons();}catch(_0x57bb2a){console['error']('Error\x20loading\x20articles:',_0x57bb2a),_0x42dac6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x57bb2a[_0x1bc3a9(0x19e)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x623b52=a2_0x1599fb;document[_0x623b52(0x136)]('.edit-article-btn')['forEach'](_0x323120=>{const _0x3c4a52=_0x623b52;_0x323120[_0x3c4a52(0x2e8)]('click',async _0x39837a=>{const _0x1a321f=_0x39837a['currentTarget']['dataset']['id'];openArticleModal(_0x1a321f);});}),document[_0x623b52(0x136)]('.delete-article-btn')[_0x623b52(0x2a0)](_0x3b3b0d=>{_0x3b3b0d['addEventListener']('click',async _0x194e0f=>{const _0x253e76=_0x194e0f['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x253e76);});});}function openArticleModal(_0x30ecb1=null){const _0x26d6ca=a2_0x1599fb,_0x315431=document['getElementById'](_0x26d6ca(0x25e)),_0x52cbcb=document['getElementById'](_0x26d6ca(0x114)),_0x337a7b=document[_0x26d6ca(0x183)](_0x26d6ca(0x2fc)),_0x34c17d=document['getElementById']('article-id');_0x337a7b['reset'](),_0x34c17d['value']='';if(_0x30ecb1)_0x52cbcb['textContent']='Edit\x20Article',_0x34c17d[_0x26d6ca(0x2a7)]=_0x30ecb1,loadArticleData(_0x30ecb1);else{_0x52cbcb['textContent']=_0x26d6ca(0x2d1);const _0x32980f=auth['currentUser'];if(_0x32980f){const _0xe740fe=document['getElementById']('article-author');if(_0xe740fe&&_0x32980f['displayName'])_0xe740fe[_0x26d6ca(0x2a7)]=_0x32980f['displayName'];else _0xe740fe&&(_0xe740fe['value']=_0x32980f['email']);}}_0x315431['classList']['add']('active');}async function loadArticleData(_0x2f34e8){const _0x4b9316=a2_0x1599fb;try{const _0x1d8bfb=doc(db,_0x4b9316(0x23a),_0x2f34e8),_0x2c856=await getDoc(_0x1d8bfb);if(!_0x2c856['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x1fe8e3=_0x2c856['data']();document['getElementById']('article-title')[_0x4b9316(0x2a7)]=_0x1fe8e3[_0x4b9316(0x27e)]||'',document[_0x4b9316(0x183)]('article-author')['value']=_0x1fe8e3['author']||'',document[_0x4b9316(0x183)](_0x4b9316(0x101))['value']=_0x1fe8e3[_0x4b9316(0x2de)]||'',document['getElementById']('article-content')[_0x4b9316(0x2a7)]=_0x1fe8e3['content']||'';}catch(_0x467f13){console['error'](_0x4b9316(0x220),_0x467f13),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x4d9c36=a2_0x1599fb;try{const _0x19eca2=document[_0x4d9c36(0x183)](_0x4d9c36(0x1e5))['value'],_0x264fb7=document['getElementById'](_0x4d9c36(0x1c9))['value']['trim'](),_0xca528=document['getElementById'](_0x4d9c36(0x2dd))['value']['trim'](),_0x2a43dd=document['getElementById']('article-image-url')['value']['trim'](),_0x23ee4a=document['getElementById']('article-content')[_0x4d9c36(0x2a7)]['trim']();if(!_0x264fb7||!_0x23ee4a){showNotification(_0x4d9c36(0x225),_0x4d9c36(0xfe));return;}const _0x4b0a65=auth['currentUser'];if(!_0x4b0a65){showNotification(_0x4d9c36(0x128),'error');return;}const _0x3b6586={'title':_0x264fb7,'author':_0xca528,'imageUrl':_0x2a43dd||null,'content':_0x23ee4a,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x4b0a65[_0x4d9c36(0x163)]};!_0x19eca2?(_0x3b6586[_0x4d9c36(0x18b)]=serverTimestamp(),_0x3b6586['createdBy']=_0x4b0a65['email'],await addDoc(collection(db,'articles'),_0x3b6586),showNotification('Article\x20created\x20successfully',_0x4d9c36(0xca))):(await updateDoc(doc(db,_0x4d9c36(0x23a),_0x19eca2),_0x3b6586),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x3f855d){console[_0x4d9c36(0xfe)](_0x4d9c36(0x2ea),_0x3f855d),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x3f855d['message'],'error');}}function closeArticleModal(){const _0x460ba9=a2_0x1599fb,_0x391f81=document['getElementById']('article-modal');_0x391f81&&_0x391f81['classList'][_0x460ba9(0x127)]('active');}async function confirmDeleteArticle(_0x4dcf78){const _0x11fdc0=a2_0x1599fb;if(confirm(_0x11fdc0(0x172)))try{await deleteDoc(doc(db,'articles',_0x4dcf78)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x5e7052){console[_0x11fdc0(0xfe)](_0x11fdc0(0xfb),_0x5e7052),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x5e7052['message'],'error');}}function setupTrophyManagementSection(){const _0x5e8ba2=a2_0x1599fb,_0x42f999=document['getElementById'](_0x5e8ba2(0x16d));_0x42f999&&_0x42f999['addEventListener'](_0x5e8ba2(0x2d5),function(){const _0x40b999=_0x5e8ba2;this[_0x40b999(0x1fc)][_0x40b999(0x153)]('loading'),this[_0x40b999(0x1ed)]=_0x40b999(0x23e);const _0x380ae6=document['getElementById']('assign-trophy-image');_0x380ae6&&(_0x380ae6['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x44d9ef=_0x40b999;this[_0x44d9ef(0x1fc)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x3ad8e8=>{const _0x226b98=_0x40b999;console['error'](_0x226b98(0x277),_0x3ad8e8),this[_0x226b98(0x1fc)]['remove'](_0x226b98(0x19f)),this[_0x226b98(0x1ed)]=_0x226b98(0x27c),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x5c1e8f=document['getElementById'](_0x5e8ba2(0x275));_0x5c1e8f&&_0x5c1e8f['addEventListener']('click',()=>{openTrophyModal();});const _0x2badff=document['getElementById']('trophy-form');_0x2badff&&_0x2badff['addEventListener']('submit',_0x230cd9=>{const _0x1382c0=_0x5e8ba2;_0x230cd9[_0x1382c0(0x12d)](),saveTrophyDefinition();});const _0x430d4c=document['getElementById'](_0x5e8ba2(0x2ec));_0x430d4c&&_0x430d4c['addEventListener']('click',()=>{closeTrophyModal();});document[_0x5e8ba2(0x136)](_0x5e8ba2(0x110))['forEach'](_0x37fbe1=>{const _0x36ce31=_0x5e8ba2;_0x37fbe1[_0x36ce31(0x2e8)]('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x5d2449=document[_0x5e8ba2(0x183)]('trophy-modal');_0x5d2449&&_0x5d2449['addEventListener']('click',_0x21ad24=>{_0x21ad24['target']===_0x5d2449&&closeTrophyModal();});const _0x2e8921=document['getElementById']('assign-trophy-modal');_0x2e8921&&_0x2e8921['addEventListener']('click',_0x480c5d=>{_0x480c5d['target']===_0x2e8921&&closeAssignTrophyModal();});const _0x4cada1=document['getElementById'](_0x5e8ba2(0x273));_0x4cada1&&_0x4cada1['addEventListener']('submit',_0x3e64d3=>{_0x3e64d3['preventDefault'](),assignTrophyToPlayer();});const _0x50b059=document['getElementById']('cancel-assign-btn');_0x50b059&&_0x50b059[_0x5e8ba2(0x2e8)]('click',()=>{closeAssignTrophyModal();});const _0x5409dd=document['getElementById']('trophy-image-url');_0x5409dd&&(_0x5409dd['addEventListener'](_0x5e8ba2(0x222),updateTrophyImagePreview),_0x5409dd['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x2e2572=a2_0x1599fb,_0x5d8c81=document['getElementById'](_0x2e2572(0x10e))['value']['trim'](),_0x207328=document[_0x2e2572(0x183)]('trophy-image-preview');if(!_0x207328){const _0x39be8f=document[_0x2e2572(0x183)]('trophy-image-url')[_0x2e2572(0x126)]('.form-group'),_0x137a5f=document['createElement']('div');_0x137a5f['id']='trophy-image-preview',_0x137a5f[_0x2e2572(0x284)]='trophy-preview-container',_0x39be8f['appendChild'](_0x137a5f);const _0x4f0764=document['createElement']('img');_0x4f0764['id']=_0x2e2572(0x251),_0x4f0764['alt']='Trophy\x20Preview',_0x4f0764['onerror']=function(){const _0x18adfc=_0x2e2572;this[_0x18adfc(0x151)]=DEFAULT_TROPHY_IMAGE,this['classList'][_0x18adfc(0x153)]('error');},_0x137a5f['appendChild'](_0x4f0764);}const _0x1e0e63=document['getElementById'](_0x2e2572(0x251));_0x5d8c81?(_0x1e0e63[_0x2e2572(0x151)]=_0x5d8c81,_0x1e0e63['style']['display']=_0x2e2572(0x155),_0x1e0e63['classList']['remove']('error')):(_0x1e0e63['src']=DEFAULT_TROPHY_IMAGE,_0x1e0e63['style'][_0x2e2572(0x1d5)]=_0x2e2572(0x155));}async function loadTrophyDefinitions(){const _0x38382d=a2_0x1599fb,_0x3c8165=document['getElementById']('trophies-table-body');if(!_0x3c8165)return;_0x3c8165['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0xcb09fe=collection(db,'trophyDefinitions'),_0x2df79c=query(_0xcb09fe,orderBy('createdAt',_0x38382d(0x21e))),_0xf36d73=await getDocs(_0x2df79c);if(_0xf36d73['empty']){_0x3c8165['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x3c8165['innerHTML']='',_0xf36d73['forEach'](_0x53a324=>{const _0x48219e=_0x38382d,_0x37130a=_0x53a324['data'](),_0x2cc6cc=document['createElement']('tr'),_0x5e97b4=_0x37130a[_0x48219e(0x18b)]?new Date(_0x37130a[_0x48219e(0x18b)]['seconds']*0x3e8)['toLocaleString']():_0x48219e(0x1ab);_0x2cc6cc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x37130a[_0x48219e(0x168)]||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x37130a['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x37130a['name']||'Untitled\x20Trophy')+_0x48219e(0xd4)+(_0x37130a['rarity']||'common')+'\x22>'+(_0x37130a[_0x48219e(0x135)]||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5e97b4+_0x48219e(0x243)+_0x53a324['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x53a324['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x53a324['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3c8165['appendChild'](_0x2cc6cc);}),setupTrophyActionButtons();}catch(_0x599c06){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x599c06),_0x3c8165['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x599c06['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x34b18f=a2_0x1599fb;document['querySelectorAll']('.edit-trophy-btn')[_0x34b18f(0x2a0)](_0x3c97ba=>{_0x3c97ba['addEventListener']('click',_0x2da33f=>{const _0x1d801a=a2_0x1f64,_0x306379=_0x2da33f[_0x1d801a(0x212)]['dataset']['id'];openTrophyModal(_0x306379);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x34f2df=>{_0x34f2df['addEventListener']('click',_0x396991=>{const _0x49013c=_0x396991['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x49013c);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x5f2864=>{_0x5f2864['addEventListener']('click',_0x5a7be0=>{const _0x585faa=_0x5a7be0['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x585faa);});});}function openTrophyModal(_0x2704c6=null){const _0x327b7c=a2_0x1599fb,_0x3ea613=document['getElementById']('trophy-modal'),_0x20148f=document['getElementById']('trophy-modal-title'),_0x292c02=document['getElementById'](_0x327b7c(0x2d6)),_0xc5fbb5=document[_0x327b7c(0x183)](_0x327b7c(0x1a4));_0x292c02['reset'](),_0xc5fbb5['value']='';const _0x499f2e=document['getElementById'](_0x327b7c(0x251));_0x499f2e&&(_0x499f2e['src']=DEFAULT_TROPHY_IMAGE,_0x499f2e['classList']['remove'](_0x327b7c(0xfe))),_0x2704c6?(_0x20148f['textContent']='Edit\x20Trophy',_0xc5fbb5['value']=_0x2704c6,loadTrophyData(_0x2704c6)):_0x20148f['textContent']='Create\x20New\x20Trophy',_0x3ea613['classList']['add']('active');}async function loadTrophyData(_0x236524){const _0xa205b1=a2_0x1599fb;try{const _0x4be1aa=doc(db,'trophyDefinitions',_0x236524),_0x48330c=await getDoc(_0x4be1aa);if(!_0x48330c[_0xa205b1(0x1ac)]()){showNotification('Trophy\x20not\x20found',_0xa205b1(0xfe));return;}const _0x184a83=_0x48330c[_0xa205b1(0x1ec)]();document[_0xa205b1(0x183)]('trophy-name')['value']=_0x184a83['name']||'',document['getElementById']('trophy-description')[_0xa205b1(0x2a7)]=_0x184a83['description']||'',document[_0xa205b1(0x183)](_0xa205b1(0x10e))['value']=_0x184a83[_0xa205b1(0x168)]||'',document['getElementById']('trophy-rarity')[_0xa205b1(0x2a7)]=_0x184a83[_0xa205b1(0x135)]||'common',updateTrophyImagePreview();}catch(_0x2370e2){console['error']('Error\x20loading\x20trophy\x20data:',_0x2370e2),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x15d043=a2_0x1599fb;try{const _0x504f92=document[_0x15d043(0x183)]('trophy-id')[_0x15d043(0x2a7)],_0x245057=document['getElementById']('trophy-name')['value']['trim'](),_0x1a5950=document['getElementById'](_0x15d043(0x165))['value']['trim'](),_0x1bed1b=document['getElementById']('trophy-image-url')[_0x15d043(0x2a7)][_0x15d043(0x2b0)](),_0x590437=document['getElementById']('trophy-rarity')['value'];if(!_0x245057||!_0x1a5950||!_0x1bed1b){showNotification(_0x15d043(0x22e),'error');return;}const _0xde7502=auth[_0x15d043(0x15c)];if(!_0xde7502){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x26e038={'name':_0x245057,'description':_0x1a5950,'image':_0x1bed1b,'rarity':_0x590437,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xde7502['email']};!_0x504f92?(_0x26e038['createdAt']=serverTimestamp(),_0x26e038['createdBy']=_0xde7502['email'],await addDoc(collection(db,'trophyDefinitions'),_0x26e038),showNotification(_0x15d043(0x218),'success')):(await updateDoc(doc(db,'trophyDefinitions',_0x504f92),_0x26e038),showNotification('Trophy\x20updated\x20successfully',_0x15d043(0xca))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x1835b7){console['error']('Error\x20saving\x20trophy:',_0x1835b7),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x1835b7['message'],_0x15d043(0xfe));}}function closeTrophyModal(){const _0x542300=a2_0x1599fb,_0x3273ee=document['getElementById']('trophy-modal');_0x3273ee&&_0x3273ee['classList'][_0x542300(0x127)](_0x542300(0x306));}async function confirmDeleteTrophy(_0x159d61){const _0x2b3389=a2_0x1599fb;if(!_0x159d61){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm(_0x2b3389(0x2bf)))try{const _0x4a663f=auth['currentUser'];if(!_0x4a663f){showNotification(_0x2b3389(0x1a1),'error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x159d61),await deleteDoc(doc(db,'trophyDefinitions',_0x159d61)),showNotification(_0x2b3389(0x291),_0x2b3389(0xca)),loadTrophyDefinitions();}catch(_0x1ae052){console[_0x2b3389(0xfe)]('Error\x20deleting\x20trophy\x20definition:',_0x1ae052),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x1ae052['message'],_0x2b3389(0xfe));}}async function openAssignTrophyModal(_0x943d4a){const _0x53028f=a2_0x1599fb;try{const _0x67d89d=doc(db,'trophyDefinitions',_0x943d4a),_0x468eeb=await getDoc(_0x67d89d);if(!_0x468eeb['exists']()){showNotification(_0x53028f(0x2a4),'error');return;}const _0x4c4993=_0x468eeb['data']();document['getElementById']('assign-trophy-id')['value']=_0x943d4a,document['getElementById']('assign-trophy-name')['value']=_0x4c4993['name'],document[_0x53028f(0x183)]('assign-trophy-image')['src']=_0x4c4993[_0x53028f(0x168)]||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x4c4993['name']||_0x53028f(0xeb),document[_0x53028f(0x183)]('assign-trophy-description')['textContent']=_0x4c4993['description']||'No\x20description';const _0x584085=document['getElementById']('assign-trophy-rarity');_0x584085[_0x53028f(0x226)]=_0x4c4993['rarity']||_0x53028f(0x2e4),_0x584085['className']=_0x53028f(0x200)+(_0x4c4993['rarity']||_0x53028f(0x2e4));const _0x537ebf=document[_0x53028f(0x183)]('assign-trophy-modal');_0x537ebf['classList'][_0x53028f(0x153)]('active');}catch(_0x2616fd){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x2616fd),showNotification(_0x53028f(0x2b5),_0x53028f(0xfe));}}function closeAssignTrophyModal(){const _0xf8b764=a2_0x1599fb,_0x5b73c3=document['getElementById']('assign-trophy-modal');_0x5b73c3&&_0x5b73c3['classList']['remove'](_0xf8b764(0x306));}async function assignTrophyToPlayer(){const _0x43ee40=a2_0x1599fb;try{const _0x13258b=document['getElementById']('assign-trophy-id')['value'],_0x5400bc=document['getElementById'](_0x43ee40(0x281))['value'],_0x2d598a=document['getElementById'](_0x43ee40(0x14d))[_0x43ee40(0x2a7)]['trim'](),_0x5a3f8d=document['querySelector'](_0x43ee40(0x2f1))['value'];if(!_0x13258b||!_0x2d598a){showNotification(_0x43ee40(0x16f),_0x43ee40(0xfe));return;}const _0x145c67=auth['currentUser'];if(!_0x145c67){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies',_0x43ee40(0xfe));return;}let _0x3df905=null,_0x2ef36c=null,_0x392c3a=null;if(_0x5a3f8d==='non-participant'){const _0x4b3169=collection(db,'nonParticipants'),_0x310ae1=query(_0x4b3169,where(_0x43ee40(0x271),'==',_0x2d598a)),_0x79c4=await getDocs(_0x310ae1);!_0x79c4['empty']&&(_0x3df905=_0x79c4['docs'][0x0],_0x2ef36c=_0x3df905['id'],_0x392c3a=_0x3df905['data']());}else{const _0x3f6bff=_0x5a3f8d==='D1'?'players':_0x5a3f8d==='D2'?'playersD2':'playersD3',_0x3d09be=collection(db,_0x3f6bff),_0x9ce803=query(_0x3d09be,where('username','==',_0x2d598a)),_0x130c07=await getDocs(_0x9ce803);!_0x130c07['empty']&&(_0x3df905=_0x130c07['docs'][0x0],_0x2ef36c=_0x3df905['id'],_0x392c3a=_0x3df905[_0x43ee40(0x1ec)]());}if(!_0x3df905){showNotification('Player\x20\x22'+_0x2d598a+'\x22\x20not\x20found\x20in\x20'+(_0x5a3f8d==='non-participant'?'non-participants':_0x5a3f8d+_0x43ee40(0x1aa)),'error');return;}const _0x5474a1=collection(db,'userTrophies'),_0x29a4eb=query(_0x5474a1,where('userId','==',_0x2ef36c),where(_0x43ee40(0x166),'==',_0x13258b)),_0x1d5c2d=await getDocs(_0x29a4eb);if(!_0x1d5c2d['empty']){showNotification('Player\x20\x22'+_0x2d598a+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,_0x43ee40(0x1cd)),{'userId':_0x2ef36c,'playerUsername':_0x2d598a,'trophyId':_0x13258b,'awardedAt':serverTimestamp(),'awardedBy':_0x145c67['email'],'ladder':_0x5a3f8d}),showNotification(_0x43ee40(0x30e)+_0x5400bc+_0x43ee40(0x29d)+_0x2d598a,'success'),closeAssignTrophyModal();}catch(_0x1c8c5f){console['error']('Error\x20assigning\x20trophy:',_0x1c8c5f),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x1c8c5f['message'],_0x43ee40(0xfe));}}function setupInactivePlayersSection(){const _0x4e31cd=a2_0x1599fb,_0x30c4b4=document['getElementById']('inactive-days-filter');_0x30c4b4&&_0x30c4b4[_0x4e31cd(0x2e8)](_0x4e31cd(0x283),function(){const _0x52629e=document['getElementById']('load-inactive-players-data');if(_0x52629e)_0x52629e['click']();});const _0xfc2c61=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x51f2a6=document['querySelector'](_0x4e31cd(0x22a));_0xfc2c61&&_0x51f2a6&&(_0xfc2c61['addEventListener'](_0x4e31cd(0x283),function(){const _0x13083b=_0x4e31cd;if(this['checked']){currentLadder='D1';if(document[_0x13083b(0x183)]('inactive-players')[_0x13083b(0xe5)]['display']!==_0x13083b(0x1b9)){const _0xe13b62=document['getElementById']('load-inactive-players-data');if(_0xe13b62)_0xe13b62[_0x13083b(0x2d5)]();}}}),_0x51f2a6['addEventListener']('change',function(){const _0x5063e0=_0x4e31cd;if(this['checked']){currentLadder='D2';if(document[_0x5063e0(0x183)]('inactive-players')['style']['display']!==_0x5063e0(0x1b9)){const _0xac0664=document['getElementById']('load-inactive-players-data');if(_0xac0664)_0xac0664['click']();}}}));const _0x597875=document[_0x4e31cd(0x183)]('inactive-players-search');_0x597875&&_0x597875['addEventListener']('input',debounce(function(){const _0x5481f3=_0x597875['value']['toLowerCase'](),_0x31c6aa=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x31c6aa['forEach'](_0x111965=>{const _0x2daa20=a2_0x1f64;if(_0x111965['querySelector']('.loading-cell')||_0x111965['querySelector']('.empty-state')||_0x111965['querySelector'](_0x2daa20(0x221)))return;const _0x1e76e7=_0x111965[_0x2daa20(0x1c0)][0x0]?.['textContent'][_0x2daa20(0x22b)]()||'',_0x239fee=_0x111965[_0x2daa20(0x1c0)][0x5]?.['textContent']['toLowerCase']()||'';_0x1e76e7['includes'](_0x5481f3)||_0x239fee['includes'](_0x5481f3)?_0x111965['style']['display']='':_0x111965[_0x2daa20(0xe5)][_0x2daa20(0x1d5)]='none';});},0x12c)),document['addEventListener']('click',function(_0x69ee9){const _0x40ef2d=_0x4e31cd;if(_0x69ee9['target']['closest']('.view-player-btn')){const _0x51611c=_0x69ee9['target'][_0x40ef2d(0x126)]('.view-player-btn'),_0x3400f0=_0x51611c['dataset']['username'];_0x3400f0&&alert('View\x20player\x20details\x20for\x20'+_0x3400f0+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x326558=a2_0x1599fb,_0x15f159=document['getElementById'](_0x326558(0x118));if(!_0x15f159)return;_0x15f159['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x1c977b=document['getElementById']('inactive-days-filter'),_0x271eab=_0x1c977b?parseInt(_0x1c977b['value'])||0x0:0x0,_0x5281b7=collection(db,currentLadder==='D1'?_0x326558(0x1f6):_0x326558(0x25a)),_0x1608fe=await getDocs(_0x5281b7);if(_0x1608fe['empty']){_0x15f159[_0x326558(0x1ed)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x13737b=[];_0x1608fe['forEach'](_0x31fb6c=>{const _0x4dae82=_0x326558,_0xd73a54=_0x31fb6c[_0x4dae82(0x1ec)]();_0x13737b['push']({..._0xd73a54,'id':_0x31fb6c['id'],'username':_0xd73a54[_0x4dae82(0x271)]||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x13737b[_0x326558(0x298)]+_0x326558(0x17f)+currentLadder+'\x20ladder');const _0x4f6ce4=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x5ef5c6=_0x13737b['map'](async _0x5b28fc=>{const _0x1f3004=_0x326558;try{const _0x24059c=collection(db,_0x4f6ce4),_0x43746c=query(_0x24059c,or(where('winnerUsername','==',_0x5b28fc['username']),where(_0x1f3004(0x2e1),'==',_0x5b28fc['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0x46318e=await getDocs(_0x43746c);if(!_0x46318e['empty']){const _0x22e3b8=_0x46318e['docs'][0x0]['data'](),_0x2307ca=_0x22e3b8['approvedAt']?new Date(_0x22e3b8['approvedAt']['seconds']*0x3e8):null,_0x498891=new Date(),_0x8da7bd=_0x2307ca?Math[_0x1f3004(0xc2)]((_0x498891-_0x2307ca)/(0x3e8*0x3c*0x3c*0x18)):null,_0x141627=_0x22e3b8['winnerUsername']===_0x5b28fc[_0x1f3004(0x271)]?_0x22e3b8['loserUsername']:_0x22e3b8['winnerUsername'],_0x3f0856=_0x22e3b8[_0x1f3004(0x20b)]===_0x5b28fc['username']?'Won':_0x1f3004(0x2da);return{..._0x5b28fc,'lastMatch':{'date':_0x2307ca?_0x2307ca['toLocaleDateString']():'N/A','opponent':_0x141627||'Unknown','result':_0x3f0856,'timestamp':_0x2307ca||new Date(0x0),'daysSinceMatch':_0x8da7bd||Number[_0x1f3004(0x1df)]}};}else return{..._0x5b28fc,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x201aa8){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x5b28fc['username']+':',_0x201aa8),{..._0x5b28fc,'lastMatch':{'date':'Error','opponent':_0x1f3004(0x2c5),'result':_0x1f3004(0x2c5),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x3b97ec=await Promise['all'](_0x5ef5c6);_0x3b97ec['sort']((_0x42fb1f,_0x5b69c3)=>_0x5b69c3[_0x326558(0x30d)][_0x326558(0x255)]-_0x42fb1f['lastMatch'][_0x326558(0x255)]);_0x271eab>0x0&&(_0x3b97ec=_0x3b97ec['filter'](_0x5157b6=>_0x5157b6['lastMatch'][_0x326558(0x255)]>=_0x271eab));_0x15f159[_0x326558(0x1ed)]='';if(_0x3b97ec['length']===0x0){_0x15f159['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x3b97ec['forEach'](_0x1082c7=>{const _0x25a1b2=_0x326558,_0x44d991=document['createElement']('tr'),_0x282ca0=_0x1082c7['lastMatch'][_0x25a1b2(0x255)]>0x1e?_0x25a1b2(0x25f):_0x1082c7['lastMatch']['daysSinceMatch']>0xe?_0x25a1b2(0xd8):'';_0x44d991[_0x25a1b2(0x284)]=_0x282ca0,_0x44d991['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1082c7['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1082c7['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1082c7['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1082c7['lastMatch'][_0x25a1b2(0x255)]===Number['MAX_SAFE_INTEGER']?'N/A':_0x1082c7['lastMatch']['daysSinceMatch'])+_0x25a1b2(0x2a8)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1082c7['lastMatch']['date']==='Never\x20played'?'No\x20matches\x20found':_0x1082c7['lastMatch'][_0x25a1b2(0x238)]+'\x20vs\x20'+_0x1082c7[_0x25a1b2(0x30d)]['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x1082c7['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x15f159[_0x25a1b2(0x27a)](_0x44d991);}),console[_0x326558(0x1a0)](_0x326558(0x11f)+_0x3b97ec[_0x326558(0x298)]+_0x326558(0x176));}catch(_0x17bc3c){console['error']('Error\x20loading\x20inactive\x20players:',_0x17bc3c),_0x15f159[_0x326558(0x1ed)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x17bc3c['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x4bd2b0=a2_0x1599fb;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x115d5c=document['getElementById']('create-match-highlight-btn');_0x115d5c&&_0x115d5c['addEventListener']('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x502326=document['getElementById'](_0x4bd2b0(0x244));_0x502326&&_0x502326['addEventListener']('click',function(){console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x33abbc=document['getElementById']('create-achievement-highlight-btn');_0x33abbc&&_0x33abbc[_0x4bd2b0(0x2e8)]('click',function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x33a965='match'){const _0x285538=a2_0x1599fb;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x33a965);const _0x98f30a=document[_0x285538(0x183)](_0x285538(0x241)),_0x4337dc=document['getElementById']('highlight-form'),_0x3830d3=document[_0x285538(0x183)]('highlight-modal-title'),_0x1a47be=document['getElementById'](_0x285538(0x1b6));if(!_0x98f30a||!_0x4337dc||!_0x3830d3){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x4337dc[_0x285538(0x19d)](),_0x1a47be['value']='';const _0x360940=['match','creator',_0x285538(0x19c)],_0x118938=!_0x360940['includes'](_0x33a965);if(_0x118938){const _0x336622=_0x33a965;_0x1a47be['value']=_0x336622,_0x3830d3['textContent']='Loading...',loadHighlightDataAdmin(_0x336622);}else{const _0x1ba67d=_0x33a965;document[_0x285538(0x183)](_0x285538(0xc0))[_0x285538(0x2a7)]=_0x1ba67d,_0x3830d3['textContent']=_0x285538(0xd1)+getHighlightTypeName(_0x1ba67d),toggleHighlightFields(_0x1ba67d);const _0x1ea38e=auth['currentUser'];_0x1ea38e&&document[_0x285538(0x183)]('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')[_0x285538(0x2a7)]=_0x1ea38e['displayName']||_0x1ea38e[_0x285538(0x163)]);}_0x98f30a[_0x285538(0x1fc)]['add'](_0x285538(0x306));}function toggleHighlightFields(_0x1e5d9f){const _0x51dbfb=a2_0x1599fb;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x1e5d9f);const _0x403095=document['getElementById']('highlight-form');if(!_0x403095)return;const _0x344adf=_0x403095['querySelectorAll']('.form-group,\x20.form-row');_0x344adf['forEach'](_0x4c6bff=>_0x4c6bff['style'][_0x51dbfb(0x1d5)]='none');const _0x5cb3e8=document['getElementById']('highlight-video-preview-container');if(_0x5cb3e8)_0x5cb3e8[_0x51dbfb(0xe5)][_0x51dbfb(0x1d5)]=_0x51dbfb(0x1b9);const _0x4151d5=[_0x51dbfb(0x1e7),_0x51dbfb(0xe7),'highlight-submitted-by-container'];_0x4151d5['forEach'](_0x2badde=>{const _0x2212d7=_0x51dbfb,_0x3eecad=document[_0x2212d7(0x183)](_0x2badde);if(_0x3eecad)_0x3eecad[_0x2212d7(0xe5)][_0x2212d7(0x1d5)]='block';});if(_0x1e5d9f===_0x51dbfb(0xe3)){const _0x31b253=[_0x51dbfb(0x1a5),_0x51dbfb(0x1fa),'highlight-map-container','highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x31b253['forEach'](_0xe26e8c=>{const _0x58f2bb=document['getElementById'](_0xe26e8c);_0x58f2bb&&(_0xe26e8c==='highlight-players-container'?_0x58f2bb['style']['display']='flex':_0x58f2bb['style']['display']='block');});const _0x127085=document[_0x51dbfb(0x183)]('highlight-video-id');if(_0x127085){_0x127085['required']=!![];const _0x1ba2f7=_0x127085[_0x51dbfb(0x2b7)];if(_0x1ba2f7)_0x1ba2f7[_0x51dbfb(0x1ed)]='YouTube\x20Video\x20ID*';}if(_0x5cb3e8)_0x5cb3e8[_0x51dbfb(0xe5)]['display']=_0x51dbfb(0x155);updateHighlightVideoPreview();}else{if(_0x1e5d9f==='creator'){const _0x4ac1fe=['highlight-map-container','highlight-map-creator-container',_0x51dbfb(0x12f),'highlight-creator-image-container','highlight-video-container'];_0x4ac1fe[_0x51dbfb(0x2a0)](_0x2a5f23=>{const _0x11aecc=document['getElementById'](_0x2a5f23);if(_0x11aecc)_0x11aecc['style']['display']='block';});const _0x1c9748=document['getElementById']('highlight-video-id');if(_0x1c9748){_0x1c9748[_0x51dbfb(0x27f)]=![];const _0x213266=_0x1c9748['previousElementSibling'];if(_0x213266)_0x213266['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x1e5d9f==='achievement'){const _0x35c301=['highlight-achievement-player-container','highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container',_0x51dbfb(0x1a5)];_0x35c301['forEach'](_0x3b8d61=>{const _0x40233d=_0x51dbfb,_0x44234c=document['getElementById'](_0x3b8d61);if(_0x44234c)_0x44234c[_0x40233d(0xe5)]['display']=_0x40233d(0x155);});const _0x3b9f62=document['getElementById']('highlight-video-id');if(_0x3b9f62){_0x3b9f62['required']=![];const _0x14ffe7=_0x3b9f62['previousElementSibling'];if(_0x14ffe7)_0x14ffe7[_0x51dbfb(0x1ed)]='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x254521){const _0x14cf95=a2_0x1599fb;try{const _0x48d248=doc(db,_0x14cf95(0x111),_0x254521),_0x226d9f=await getDoc(_0x48d248);if(!_0x226d9f[_0x14cf95(0x1ac)]()){showNotification('Highlight\x20not\x20found',_0x14cf95(0xfe));return;}const _0x3f4bc8=_0x226d9f['data'](),_0xb2019e=_0x3f4bc8['type']||'match';document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0xb2019e),document['getElementById'](_0x14cf95(0xc0))['value']=_0xb2019e,toggleHighlightFields(_0xb2019e),document['getElementById']('highlight-title')['value']=_0x3f4bc8[_0x14cf95(0x27e)]||'',document[_0x14cf95(0x183)]('highlight-description')['value']=_0x3f4bc8[_0x14cf95(0x17e)]||'',document['getElementById']('highlight-submitted-by')['value']=_0x3f4bc8[_0x14cf95(0x1cb)]||'';_0x3f4bc8['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x3f4bc8[_0x14cf95(0x184)],updateHighlightVideoPreview());if(_0xb2019e==='match'){document['getElementById']('highlight-match-info')['value']=_0x3f4bc8['matchInfo']||'',document[_0x14cf95(0x183)](_0x14cf95(0x288))['value']=_0x3f4bc8[_0x14cf95(0x20c)]||'';if(_0x3f4bc8['matchDate']){const _0x11577d=new Date(_0x3f4bc8[_0x14cf95(0x13e)]['seconds']*0x3e8);document[_0x14cf95(0x183)](_0x14cf95(0x157))[_0x14cf95(0x2a7)]=_0x11577d['toISOString']()[_0x14cf95(0x25c)]('T')[0x0];}document['getElementById']('highlight-winner-name')[_0x14cf95(0x2a7)]=_0x3f4bc8[_0x14cf95(0x24d)]||'',document['getElementById']('highlight-winner-score')['value']=_0x3f4bc8[_0x14cf95(0x1d3)]||'',document['getElementById']('highlight-loser-name')['value']=_0x3f4bc8[_0x14cf95(0x1d2)]||'',document['getElementById']('highlight-loser-score')['value']=_0x3f4bc8['loserScore']||'',document[_0x14cf95(0x183)]('highlight-match-link')['value']=_0x3f4bc8['matchLink']||'';}else{if(_0xb2019e===_0x14cf95(0x264))document['getElementById']('highlight-map')['value']=_0x3f4bc8['map']||'',document[_0x14cf95(0x183)]('highlight-map-creator')['value']=_0x3f4bc8['mapCreator']||'',document['getElementById'](_0x14cf95(0x252))[_0x14cf95(0x2a7)]=_0x3f4bc8[_0x14cf95(0x2c8)]||'',document[_0x14cf95(0x183)](_0x14cf95(0xc3))[_0x14cf95(0x2a7)]=_0x3f4bc8['creatorImageUrl']||'';else _0xb2019e==='achievement'&&(document['getElementById']('highlight-achievement-player')[_0x14cf95(0x2a7)]=_0x3f4bc8[_0x14cf95(0x1ef)]||'',document[_0x14cf95(0x183)]('highlight-achievement-type')[_0x14cf95(0x2a7)]=_0x3f4bc8['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x3f4bc8[_0x14cf95(0x10a)]||'',document[_0x14cf95(0x183)]('highlight-player-profile')[_0x14cf95(0x2a7)]=_0x3f4bc8['playerProfileUrl']||'',document['getElementById'](_0x14cf95(0x1c4))['value']=_0x3f4bc8['achievementImageUrl']||'');}}catch(_0x4feab9){console['error']('Error\x20loading\x20highlight:',_0x4feab9),showNotification('Error\x20loading\x20highlight:\x20'+_0x4feab9['message'],'error');}}async function saveHighlight(){const _0x2a98a1=a2_0x1599fb;try{const _0x3c250d=document['getElementById'](_0x2a98a1(0x1b6))?.['value']||'',_0x3b17fa=document[_0x2a98a1(0x183)]('highlight-type')?.[_0x2a98a1(0x2a7)]||_0x2a98a1(0xe3),_0x3608a8={'title':document['getElementById'](_0x2a98a1(0xe9))?.['value']?.['trim']()||'','description':document['getElementById'](_0x2a98a1(0x13b))?.['value']?.[_0x2a98a1(0x2b0)]()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.[_0x2a98a1(0x2a7)]?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.[_0x2a98a1(0x2a7)]?.['trim']()||null,'type':_0x3b17fa};if(!_0x3608a8['title']){showNotification('Title\x20is\x20required',_0x2a98a1(0xfe));return;}if(_0x3b17fa==='match'){_0x3608a8['matchInfo']=document['getElementById']('highlight-match-info')?.['value']?.['trim']()||'',_0x3608a8['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'';const _0x1e483a=document['getElementById']('highlight-match-date'),_0xd1cf2b=_0x1e483a?.['value']||'';_0x3608a8[_0x2a98a1(0x13e)]=_0xd1cf2b?Timestamp[_0x2a98a1(0x26a)](new Date(_0xd1cf2b)):null,_0x3608a8[_0x2a98a1(0x24d)]=document['getElementById']('highlight-winner-name')?.[_0x2a98a1(0x2a7)]?.['trim']()||'',_0x3608a8[_0x2a98a1(0x1d3)]=document['getElementById'](_0x2a98a1(0x26c))?.['value']?.['trim']()||'',_0x3608a8['loserName']=document[_0x2a98a1(0x183)]('highlight-loser-name')?.['value']?.['trim']()||'',_0x3608a8['loserScore']=document[_0x2a98a1(0x183)](_0x2a98a1(0xef))?.[_0x2a98a1(0x2a7)]?.['trim']()||'',_0x3608a8['matchLink']=document['getElementById'](_0x2a98a1(0x152))?.['value']?.['trim']()||'';if(!_0x3608a8[_0x2a98a1(0x184)]){showNotification(_0x2a98a1(0x214),'error');return;}}else{if(_0x3b17fa==='creator'){_0x3608a8['map']=document['getElementById'](_0x2a98a1(0x288))?.[_0x2a98a1(0x2a7)]?.[_0x2a98a1(0x2b0)]()||'',_0x3608a8['mapCreator']=document['getElementById']('highlight-map-creator')?.[_0x2a98a1(0x2a7)]?.['trim']()||'',_0x3608a8[_0x2a98a1(0x2c8)]=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x3608a8['creatorImageUrl']=document[_0x2a98a1(0x183)]('highlight-creator-image')?.['value']?.['trim']()||'';if(!_0x3608a8['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x3b17fa===_0x2a98a1(0x19c)){_0x3608a8['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.[_0x2a98a1(0x2a7)]?.[_0x2a98a1(0x2b0)]()||'',_0x3608a8['achievementType']=document[_0x2a98a1(0x183)](_0x2a98a1(0xd6))?.[_0x2a98a1(0x2a7)]?.['trim']()||'',_0x3608a8['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.[_0x2a98a1(0x2b0)]()||'',_0x3608a8['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.['trim']()||'',_0x3608a8['achievementImageUrl']=document[_0x2a98a1(0x183)]('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x3608a8[_0x2a98a1(0x1ef)]){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x3c250d?(_0x3608a8['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x3c250d),_0x3608a8),showNotification(_0x2a98a1(0x1d4),'success')):(_0x3608a8['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x3608a8),showNotification(_0x2a98a1(0x1ff),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x33a09c){console[_0x2a98a1(0xfe)](_0x2a98a1(0x28d),_0x33a09c),showNotification('Error\x20saving\x20highlight:\x20'+_0x33a09c[_0x2a98a1(0x19e)],'error');}}function closeHighlightModal(){const _0x4627e4=a2_0x1599fb,_0x3cb101=document['getElementById'](_0x4627e4(0x241));if(_0x3cb101)_0x3cb101['classList'][_0x4627e4(0x127)]('active');}function getHighlightTypeName(_0x10f8d0){const _0x31d504=a2_0x1599fb;switch(_0x10f8d0){case _0x31d504(0xe3):return'Match\x20Highlight';case _0x31d504(0x264):return'Featured\x20Creator';case _0x31d504(0x19c):return _0x31d504(0x20a);default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x40ddf0=a2_0x1599fb,_0x4cbdd1=document['getElementById'](_0x40ddf0(0x150)),_0x4cf398=document[_0x40ddf0(0x183)](_0x40ddf0(0x282)),_0x3a5f7f=document['getElementById'](_0x40ddf0(0x149));if(!_0x4cbdd1||!_0x3a5f7f||!_0x4cf398)return;const _0x34ad63=_0x4cbdd1['value']['trim']();_0x34ad63&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x34ad63)?(_0x3a5f7f['src']='https://www.youtube.com/embed/'+_0x34ad63,_0x4cf398['style']['display']=_0x40ddf0(0x155)):(_0x3a5f7f['src']='',_0x4cf398['style']['display']='none');}async function loadHighlightsAdmin(){const _0x36da05=a2_0x1599fb,_0x1ac7b6=document['getElementById']('highlights-table-body');if(!_0x1ac7b6)return;_0x1ac7b6['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x57c653=query(collection(db,_0x36da05(0x111)),orderBy('createdAt','desc')),_0x214650=await getDocs(_0x57c653);if(_0x214650['empty']){_0x1ac7b6['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x1ac7b6['innerHTML']='',_0x214650['forEach'](_0x35481b=>{const _0x5364ef=_0x36da05,_0x1497ee=_0x35481b[_0x5364ef(0x1ec)](),_0x489640=document['createElement']('tr'),_0xe45ef1=_0x1497ee[_0x5364ef(0x18b)]?new Date(_0x1497ee['createdAt'][_0x5364ef(0x2cb)]*0x3e8)['toLocaleDateString']():'N/A';let _0x12193c='Unknown',_0x4fdf01='';switch(_0x1497ee['type']){case'match':_0x12193c=_0x5364ef(0x158),_0x4fdf01='match-type';break;case _0x5364ef(0x264):_0x12193c='Creator',_0x4fdf01='creator-type';break;case'achievement':_0x12193c=_0x5364ef(0x162),_0x4fdf01='achievement-type';break;}_0x489640['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1497ee['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x4fdf01+'\x22>'+_0x12193c+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xe45ef1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1497ee['submittedBy']||'Unknown')+_0x5364ef(0x2a8)+(_0x1497ee['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x35481b['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x35481b['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1ac7b6['appendChild'](_0x489640);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0xa7f585=>{_0xa7f585['addEventListener']('click',_0x1bbd74=>{const _0x58e20c=a2_0x1f64;openHighlightModal(_0x1bbd74['currentTarget'][_0x58e20c(0x1c3)]['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x22e580=>{const _0x280dda=_0x36da05;_0x22e580['addEventListener'](_0x280dda(0x2d5),_0x17253a=>{const _0x50f591=_0x280dda;confirmDeleteHighlight(_0x17253a['currentTarget'][_0x50f591(0x1c3)]['id']);});});}catch(_0x37aca9){console['error']('Error\x20loading\x20highlights:',_0x37aca9),_0x1ac7b6[_0x36da05(0x1ed)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x37aca9['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x4ba802){const _0x1e492e=a2_0x1599fb;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x4ba802)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x5ebaf2){console['error']('Error\x20deleting\x20highlight:',_0x5ebaf2),showNotification('Error\x20deleting\x20highlight:\x20'+_0x5ebaf2['message'],_0x1e492e(0xfe));}}function setupCreateTestMatchModal(){const _0x28f3ff=a2_0x1599fb;console[_0x28f3ff(0x1a0)]('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x5ed4ed=document['getElementById']('create-test-match-modal'),_0x930cd5=document['getElementById']('create-test-match-form');if(!_0x5ed4ed){console[_0x28f3ff(0xfe)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x930cd5){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x212d27=_0x5ed4ed['cloneNode'](!![]);_0x5ed4ed['parentNode']['replaceChild'](_0x212d27,_0x5ed4ed);const _0x3e3679=_0x212d27['querySelector'](_0x28f3ff(0x123));_0x212d27['addEventListener'](_0x28f3ff(0x2d5),function(_0x552930){const _0x4b9801=_0x28f3ff;_0x552930['target']===_0x212d27&&(console['log'](_0x4b9801(0x2c1)),closeCreateTestMatchModal());});const _0x1360ca=_0x212d27['querySelector'](_0x28f3ff(0x2bb));_0x1360ca&&_0x1360ca[_0x28f3ff(0x2e8)](_0x28f3ff(0x2d5),function(_0x5811cf){_0x5811cf['preventDefault'](),_0x5811cf['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x5b2db1=_0x212d27['querySelector'](_0x28f3ff(0xf1));_0x5b2db1&&_0x5b2db1['addEventListener']('click',function(_0x598fde){const _0x1f7263=_0x28f3ff;_0x598fde['preventDefault'](),_0x598fde[_0x1f7263(0x28e)](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x3e3679){_0x3e3679['addEventListener'](_0x28f3ff(0x1d9),function(_0x21b0c1){const _0x2b4029=_0x28f3ff;_0x21b0c1[_0x2b4029(0x12d)](),_0x21b0c1['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x5859fb=_0x3e3679[_0x28f3ff(0x14f)]('button[type=\x22submit\x22]');_0x5859fb&&_0x5859fb['addEventListener'](_0x28f3ff(0x2d5),function(_0x1edb8a){const _0x48b2a6=_0x28f3ff;_0x1edb8a[_0x48b2a6(0x12d)](),_0x1edb8a['stopPropagation'](),console[_0x48b2a6(0x1a0)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x1ff771=a2_0x1599fb;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x142f31=document[_0x1ff771(0x183)]('highlight-form');_0x142f31&&_0x142f31['addEventListener']('submit',_0x5bf8a9=>{const _0x571466=_0x1ff771;_0x5bf8a9[_0x571466(0x12d)](),saveHighlight();});const _0x25bde4=document[_0x1ff771(0x183)]('cancel-highlight-btn');_0x25bde4&&_0x25bde4['addEventListener']('click',closeHighlightModal);const _0x58ba4c=document[_0x1ff771(0x14f)]('#highlight-modal\x20.close-btn');_0x58ba4c&&_0x58ba4c[_0x1ff771(0x2e8)]('click',closeHighlightModal);const _0x19169f=document['getElementById']('highlight-modal');_0x19169f&&_0x19169f['addEventListener']('click',_0x41a802=>{_0x41a802['target']===_0x19169f&&closeHighlightModal();});const _0xf32659=document['getElementById']('highlight-video-id');_0xf32659&&_0xf32659['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function a2_0x2736(){const _0x52d25b=['highlight-type','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','floor','highlight-creator-image','Edit\x20match\x20clicked:','points-amount','manage-trophies','replace','ref','winnerComment','success','user-search','Create\x20test\x20match\x20modal\x20not\x20found','firstVisible','apply','Closing\x20create\x20test\x20match\x20modal','manage-matches','Create\x20New\x20','Unknown\x20User','playerRibbonsD2','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','Bulk\x20award:','highlight-achievement-type','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','moderately-inactive','playersD3','Load\x20articles\x20data\x20clicked','role-username','name-asc','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','flex','all','Added\x20','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','points','match','articles-table-body','style','approvedAt','highlight-description-container','RejectedD3','highlight-title','\x20(based\x20on\x20data-role:\x20','Unnamed\x20Trophy','closeResimulateModal','Error\x20loading\x20matches:','createElement','highlight-loser-score','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','#cancel-create-test-match-btn','Firebase\x20connection\x20test\x20successful!','entries','eloRating','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','warn','Error\x20loading\x20points\x20overview:','Modal\x20element\x20not\x20found!','subtract','Error\x20deleting\x20article:','bind','Error\x20in\x20demotion:','error','Failed\x20to\x20load\x20match\x20data','✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20','article-image-url','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','Please\x20enter\x20a\x20username','Unknown','history-type-filter','userId','Failed\x20to\x20find\x20match:\x20','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','removeEventListener','achievementDetails','Error\x20loading\x20dashboard:','Table\x20row\x20for\x20user\x20','\x20points\x20history\x20entries','trophy-image-url','manage-players','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','highlights','name','edit-match-loser-score','article-modal-title','winnerId','Modal\x20element\x20found:','rank-distribution-chart','inactive-players-table-body','get','toString','lastVisible','pointsHistory','This\x20will\x20award\x20','Gold','Displaying\x20','mapPlayed','manage-ranks','confirm-resimulate-btn','#create-test-match-form','update','Adding\x20simple\x20test\x20match...','closest','remove','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','./promotions.js','Processed\x20','d1-next-page','users-table-body','preventDefault','size','highlight-map-version-container','Error\x20loading\x20players:','quick-points-reason','catch','startDate','Awarded\x20','rarity','querySelectorAll','edit-match-loser-comment','data-ladder','user-search-results','then','highlight-description','\x20D3\x20pilots','Player\x20updated\x20successfully','matchDate','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>',',\x20Loser\x20','playerProfileUrl','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','playerRibbonsD3',';\x22>','.edit-match-btn','Modal\x20closed','Profile','Created\x20','highlight-video-preview','eloHistory','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','Username\x20','assign-player-username','User\x20not\x20found','querySelector','highlight-video-id','src','highlight-match-link','add','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','block','.view-history-btn','highlight-match-date','Match','color','ribbon-target-ladder','right','currentUser','eloHistoryD3','page','history-start-date','previousElo','replaceChild','Achievement','email','No\x20position\x20changes\x20needed.','trophy-description','trophyId','Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','image','\x20allowed\x20tabs:','Role\x20\x27','\x20points','points-reason','load-trophies-data','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','Trophy\x20ID\x20and\x20username\x20are\x20required','\x22\x20set','roleAssignedAt','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','Load\x20history\x20data\x20clicked','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','Failed\x20to\x20resimulate\x20match:\x20','\x20inactive\x20players','sendPromotionNotification','migration-section','winnerSuicides','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','localeCompare','.remove-role-btn','description','\x20total\x20players\x20in\x20the\x20','player-search','resimulate-match-id','info','getElementById','videoId','body','#e0e0e0','Please\x20enter\x20valid\x20data','key','promote-form','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','createdAt','\x20before\x20match:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','points-asc','\x20view\x20history\x20buttons','edit-match-winner','approvedMatchesD2','includes','edit-match-winner-suicides','edit-highlight-matchInfo-input','role-filter','.ladder-switch\x20input','Switched\x20to\x20','\x20Weekly\x20Activity','loserDemoLink','\x20already\x20has\x20points:\x20','achievement','reset','message','loading','log','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','creatorImageUrl','author','trophy-id','highlight-video-container','reset-matches-filters','Deleting\x20match...','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','Set\x20to\x20','\x20ladder','N/A','exists','ribbon-target-user','docs','uid','migrate-points-btn','activity','Match\x20resimulated\x20successfully!\x20','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','loserId','highlight-id','load-ribbons-data','player','none','\x20from\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','match-details-container','role','Found\x20player\x20with\x20current\x20ELO:\x20','Setting\x20up\x20Manage\x20Points\x20section','cells','Manage\x20Ribbons\x20section\x20initialized','-page-indicator','dataset','highlight-achievement-image','No\x20users\x20needed\x20points\x20field\x20initialization','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','negative-change','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20','article-title','Bronze','submittedBy','Error\x20loading\x20articles:','userTrophies','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','toLocaleDateString','newPoints','roleAssignedBy','loserName','winnerScore','Highlight\x20updated\x20successfully!','display','div','.delete-match-btn','cancel-promote-btn','submit','Defaulted\x20to\x20D1\x20ladder','.username','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','.edit-role-btn','.quick-edit-btn','MAX_SAFE_INTEGER','manage-ribbons','1200','input[name=\x22set-elo-ladder\x22]:checked','error-state','Page\x20','article-id','Error\x20loading\x20points\x20history:','highlight-title-container','warning','\x20in\x20','create-test-match-modal','wins','data','innerHTML','manage-points','achievementPlayer','set','target','set-elo-modal','.delete-btn','Promotion','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','players','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','opacity','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','highlight-match-info-container','Load\x20players\x20data\x20clicked','classList','\x20ELO\x20history\x20entries.\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','Highlight\x20created\x20successfully!','trophy-rarity\x20','0.6','roleName','Role\x20select\x20set\x20to:\x20','\x20with\x20ELO\x20','#CD7F32','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','matches-search','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','low-points','Player\x20Achievement','winnerUsername','map','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','promotedBy','Winner\x20and\x20loser\x20usernames\x20are\x20required','.player','set-elo-ladder','currentTarget','find','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','\x20added\x20successfully\x20to\x20','match-count','ladder','Trophy\x20created\x20successfully','\x20pilots...','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','./ladderalgorithm.js','unknown','add-player-form','desc','Loser\x20','Error\x20loading\x20article\x20data:','.error-state','input','displayName','no-results','Title\x20and\x20content\x20are\x20required','textContent','loserScore','selected-user-id','keys','.ladder-switch\x20input[value=\x22D2\x22]','toLowerCase','DB:','Using\x20collection:\x20','All\x20fields\x20are\x20required','Modal\x20cancel\x20button\x20clicked','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>','edit-match-winner-demo','match-row','empty','Cancel\x20button\x20not\x20found','awardedAt','resimulateMatch','Error\x20in\x20bulk\x20award\x20process:\x20','result','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','articles','\x20-\x20','toDate','playerId','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','\x20matches\x20for\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','highlight-modal','fa-exclamation-triangle','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','create-creator-highlight-btn','quick-edit-current-points','keypress','sort','rejected-count','store-item-select','demote-username','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','nonParticipants','winnerName','points-action','history-end-date','\x20Rank\x20Distribution','trophy-preview-img','highlight-map-version','.no-results','#808080','daysSinceMatch','demoLink','approvedMatches','Found\x20user\x20in\x20','Error\x20resolving\x20username\x20for\x20','playersD2','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','split','.nav-item','article-modal','highly-inactive','Failed\x20to\x20send\x20Discord\x20notification:','No\x20email','Never','User\x20has\x20','creator','\x20→\x20','getAttribute','position','dashboard','Error\x20processing\x20','fromDate','Create\x20test\x20match\x20form\x20not\x20found','highlight-winner-score','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','Load\x20trophies\x20data\x20clicked','Role\x20\x22','username','promote-player-btn','assign-trophy-form','Error\x20updating\x20player:','create-new-trophy-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','Error\x20loading\x20trophies:','pending-count','resimulate-match-btn','appendChild','award-item-form','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','Role\x20removed','title','required','commit','assign-trophy-name','highlight-video-preview-container','change','className','max','testFirebaseConnection','contains','highlight-map','Player\x20deleted\x20successfully','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','load-users-data','Error\x20loading\x20inactive\x20players:','Error\x20saving\x20highlight:','stopPropagation','eloHistoryD2','points-history-table-body','Trophy\x20definition\x20deleted\x20successfully','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','elo-history-search','ribbons','Promotion\x20notification\x20sent\x20to\x20Discord\x20bot','source','settings','length','input[name=\x22test-match-ladder\x22]','d3-next-page','matchId','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','\x22\x20awarded\x20to\x20','),\x20','cloneNode','forEach','Player\x20not\x20found','manage-levels-ribbons','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Trophy\x20not\x20found','DOMContentLoaded','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','value','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Failed\x20to\x20update\x20player:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#article-modal\x20.close-btn','current-ladder-display','checked','matches-start-date','trim','Error\x20demoting\x20player:','timestamp','approvedMatchesD3','quick-add','Failed\x20to\x20load\x20trophy\x20data','inactive-players','previousElementSibling','Error\x20loading\x20match\x20data:','Quick\x20edit\x20form\x20submitted','Bulk\x20award:','.close-btn','\x20already\x20exists\x20in\x20','load-elo-history-data','toLocaleString','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','NonParticipant','Modal\x20background\x20clicked','#ffffff','Enter','modifiedBy','Error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','push','mapVersion','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','\x20was\x20updated\x20from\x20','seconds','Error\x20loading\x20ELO\x20history:','losses','cancel-role-btn','reason','Player\x20not\x20found\x20in\x20','Create\x20Article','resimulate-modal','elo-history-table-body','newElo','click','trophy-form','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','Points\x20modified\x20successfully','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','Lost','allUsersPoints','You\x20must\x20be\x20logged\x20in','article-author','imageUrl','admin','pendingResimulateData','loserUsername','elo','load-articles-data','common','Attempting\x20to\x20promote\x20','elo-history','disabled','addEventListener','input[name=\x22demote-ladder\x22]:checked','Error\x20saving\x20article:','manage-highlights','cancel-trophy-btn','Error\x20opening\x20quick\x20edit\x20modal:','edit-player-modal','set-elo-username','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','input[name=\x22assign-ladder\x22]:checked','manage-articles','Found\x20','visibility','#players-table-body\x20tr','Load\x20users\x20data\x20clicked','Found\x20specific\x20role:\x20',').\x20','Starting\x20complete\x20match\x20resimulation...','Query\x20created:','Sidebar\x20navigation\x20initialized\x20with\x20permissions','article-form','setHours','Processing\x20points\x20edit:','Friday','delete-match-confirm-modal','amount','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','matchInfo','quick-edit-points-form','edit-highlight-map-input','active','Error\x20loading\x20dashboard\x20data:','modify-points-form','points-user-search','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','lastMatch','Trophy\x20\x22'];a2_0x2736=function(){return _0x52d25b;};return a2_0x2736();}function setupManageMatchesSection(){const _0x2ebb23=a2_0x1599fb;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x3bee9d=document[_0x2ebb23(0x183)]('matches-prev-page'),_0x362a4f=document['getElementById']('matches-next-page');_0x3bee9d&&_0x3bee9d['addEventListener']('click',()=>{const _0x3d6e9b=_0x2ebb23,_0x3d7da6=currentLadder[_0x3d6e9b(0x22b)]();loadMatchesData(matchesPagination[_0x3d7da6][_0x3d6e9b(0x15e)]-0x1);});_0x362a4f&&_0x362a4f['addEventListener']('click',()=>{const _0x1137c4=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x1137c4]['page']+0x1);});const _0x1bc7f2=document['getElementById']('apply-matches-filters'),_0x22abbc=document[_0x2ebb23(0x183)](_0x2ebb23(0x1a6));_0x1bc7f2&&_0x1bc7f2['addEventListener']('click',applyMatchesFilters);_0x22abbc&&_0x22abbc['addEventListener']('click',resetMatchesFilters);const _0x4517f6=document[_0x2ebb23(0x183)]('matches-search');_0x4517f6&&_0x4517f6['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x46b9e6=document['getElementById'](_0x2ebb23(0x279));_0x46b9e6&&_0x46b9e6['addEventListener']('click',openResimulateModal);const _0x279775=document[_0x2ebb23(0x183)](_0x2ebb23(0x2d2));if(_0x279775){const _0x2442d2=_0x279775['querySelector']('.close');_0x2442d2&&_0x2442d2['addEventListener'](_0x2ebb23(0x2d5),closeResimulateModal),_0x279775[_0x2ebb23(0x2e8)]('click',_0x3ae206=>{_0x3ae206['target']===_0x279775&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x2ebb23(0x1a8));}function openCreateTestMatchModal(){const _0x2049a5=a2_0x1599fb;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x54c983=document[_0x2049a5(0x183)]('create-test-match-modal'),_0xa767b0=document[_0x2049a5(0x183)]('create-test-match-form');if(!_0x54c983){console['error'](_0x2049a5(0xcc)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found',_0x2049a5(0xfe));return;}if(!_0xa767b0){console['error'](_0x2049a5(0x26b)),showNotification(_0x2049a5(0x26b),'error');return;}_0xa767b0['reset']();const _0x4bcd3f=document[_0x2049a5(0x136)](_0x2049a5(0x299));let _0x344990=![];_0x4bcd3f['forEach'](_0x638861=>{const _0x54117d=_0x2049a5;console['log']('Found\x20radio\x20with\x20value:',_0x638861['value']),_0x638861[_0x54117d(0x2a7)]===currentLadder&&(_0x638861[_0x54117d(0x2ae)]=!![],_0x344990=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x344990){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x419dd2=document[_0x2049a5(0x14f)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x419dd2&&(_0x419dd2['checked']=!![],console[_0x2049a5(0x1a0)](_0x2049a5(0x1da)));}const _0x47220c=document['getElementById']('test-match-date');if(_0x47220c){const _0x1317e2=new Date()['toISOString']()['split']('T')[0x0];_0x47220c['value']=_0x1317e2;}_0x54c983['style']['display']='flex',_0x54c983[_0x2049a5(0xe5)]['visibility']='visible',_0x54c983['style']['opacity']='1',_0x54c983['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x70a768=document[_0x2049a5(0x183)]('test-match-winner-username');_0x70a768&&setTimeout(()=>{_0x70a768['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x33a1a2=a2_0x1599fb;console['log'](_0x33a1a2(0xcf));const _0x4117b4=document['getElementById'](_0x33a1a2(0x1ea));if(!_0x4117b4){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x4117b4['classList']['remove']('active'),_0x4117b4['style']['opacity']='0',_0x4117b4['style']['visibility']='hidden',setTimeout(()=>{const _0x33b957=_0x33a1a2;!_0x4117b4['classList']['contains'](_0x33b957(0x306))&&(_0x4117b4[_0x33b957(0xe5)]['display']='none');},0x12c),console[_0x33a1a2(0x1a0)](_0x33a1a2(0x146));}async function createTestMatch(){const _0x3a542d=a2_0x1599fb;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x21165b=auth['currentUser'];if(!_0x21165b){showNotification(_0x3a542d(0x2dc),'error');return;}const _0x10c142='D1',_0x1be5fa='approvedMatches',_0x1ba077={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp[_0x3a542d(0x26a)](new Date()),'approvedBy':_0x21165b['email'],'createdAt':serverTimestamp(),'createdBy':_0x21165b['email'],'isTestMatch':!![],'ladder':_0x10c142,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x21165b['email']};console['log'](_0x3a542d(0x125)),await addDoc(collection(db,_0x1be5fa),_0x1ba077),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x11e7d1){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x11e7d1),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x11e7d1[_0x3a542d(0x19e)],'error');}}window[a2_0x1599fb(0x286)]=async function(){const _0x5ce1f6=a2_0x1599fb;try{console[_0x5ce1f6(0x1a0)]('Testing\x20Firebase\x20connection...'),console[_0x5ce1f6(0x1a0)]('Auth:',auth),console['log'](_0x5ce1f6(0x22c),db),console['log']('Current\x20user:',auth['currentUser']);const _0x5c8297=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x5c8297);const _0x19baed=query(_0x5c8297,where('username','==','nonexistent'));console[_0x5ce1f6(0x1a0)](_0x5ce1f6(0x2fa),_0x19baed);const _0x524c42=await getDocs(_0x19baed);console['log']('Query\x20executed.\x20Empty:',_0x524c42[_0x5ce1f6(0x233)]),console[_0x5ce1f6(0x1a0)](_0x5ce1f6(0xf2));}catch(_0x20458a){console['error']('Firebase\x20connection\x20test\x20failed:',_0x20458a);}};function setupCreateTestMatchButton(){const _0x245f98=a2_0x1599fb,_0x2c58b4=document['getElementById']('create-test-match-btn');if(!_0x2c58b4){console[_0x245f98(0xfe)]('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x5e2359=_0x2c58b4['cloneNode'](!![]);_0x2c58b4['parentNode'][_0x245f98(0x161)](_0x5e2359,_0x2c58b4),_0x5e2359['addEventListener'](_0x245f98(0x2d5),function(_0x224198){_0x224198['preventDefault'](),_0x224198['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0xeeaf61=0x1){const _0x1f27dd=a2_0x1599fb,_0x5a328a=document['getElementById']('matches-table-body');if(!_0x5a328a)return;_0x5a328a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x10bbb7=currentLadder[_0x1f27dd(0x22b)](),_0x4d0ef5=matchesPagination[_0x10bbb7],_0x3a9660=currentLadder==='D1'?_0x1f27dd(0x257):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x514be2=collection(db,_0x3a9660);_0xeeaf61<=0x1?(_0x4d0ef5[_0x1f27dd(0x15e)]=0x1,_0x4d0ef5['firstVisible']=null,_0x4d0ef5['lastVisible']=null):_0x4d0ef5['page']=_0xeeaf61;const _0x4171cb=getMatchesFilters();let _0x4ab2b3=_0x514be2;if(_0x4171cb['startDate']||_0x4171cb['endDate']||_0x4171cb['searchTerm']){let _0x24f293=[];_0x4171cb[_0x1f27dd(0x133)]&&_0x4171cb['endDate']?(_0x24f293['push'](where(_0x1f27dd(0xe6),'>=',_0x4171cb['startDate']),where('approvedAt','<=',_0x4171cb['endDate'])),_0x4ab2b3=query(_0x514be2,..._0x24f293)):_0x4ab2b3=query(_0x514be2,orderBy('approvedAt','desc'));}else _0x4ab2b3=query(_0x514be2,orderBy(_0x1f27dd(0xe6),'desc'));_0xeeaf61>0x1&&_0x4d0ef5['lastVisible']?_0x4ab2b3=query(_0x4ab2b3,startAfter(_0x4d0ef5[_0x1f27dd(0x11b)]),limit(PAGE_SIZE)):_0x4ab2b3=query(_0x4ab2b3,limit(PAGE_SIZE));const _0xd460d1=await getDocs(_0x4ab2b3);!_0xd460d1[_0x1f27dd(0x233)]&&(_0x4d0ef5[_0x1f27dd(0xcd)]=_0xd460d1[_0x1f27dd(0x1ae)][0x0],_0x4d0ef5['lastVisible']=_0xd460d1['docs'][_0xd460d1['docs']['length']-0x1]);let _0x3b3a27=![];if(!_0xd460d1[_0x1f27dd(0x233)]){const _0x3958a9=query(_0x4ab2b3,startAfter(_0x4d0ef5[_0x1f27dd(0x11b)]),limit(0x1)),_0x48c4c0=await getDocs(_0x3958a9);_0x3b3a27=!_0x48c4c0[_0x1f27dd(0x233)];}const _0x2fbdc1=document[_0x1f27dd(0x183)]('matches-prev-page'),_0x2cf68f=document['getElementById']('matches-next-page'),_0x2cf2e8=document['getElementById']('matches-page-indicator');if(_0x2fbdc1)_0x2fbdc1['disabled']=_0x4d0ef5[_0x1f27dd(0x15e)]<=0x1;if(_0x2cf68f)_0x2cf68f['disabled']=!_0x3b3a27;if(_0x2cf2e8)_0x2cf2e8['textContent']=_0x1f27dd(0x1e4)+_0x4d0ef5['page'];if(_0xd460d1['empty']){_0x5a328a[_0x1f27dd(0x1ed)]=_0x1f27dd(0x16e);return;}_0x5a328a['innerHTML']='',_0xd460d1[_0x1f27dd(0x2a0)](_0x27c4db=>{const _0x3b6de7=_0x1f27dd,_0x44fb17=_0x27c4db['data'](),_0x2c51f9=document['createElement']('tr'),_0x22a1c7=_0x44fb17['approvedAt']?new Date(_0x44fb17['approvedAt']['seconds']*0x3e8)[_0x3b6de7(0x1cf)]():'N/A';_0x2c51f9['setAttribute']('data-id',_0x27c4db['id']),_0x2c51f9['setAttribute']('data-ladder',currentLadder),_0x2c51f9['classList']['add'](_0x3b6de7(0x232)),_0x2c51f9[_0x3b6de7(0x1ed)]=_0x3b6de7(0x2a9)+_0x22a1c7+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x44fb17['winnerUsername']||_0x3b6de7(0x104))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x44fb17['loserUsername']||'Unknown')+_0x3b6de7(0xc1)+(_0x44fb17[_0x3b6de7(0x1d3)]||0x0)+'\x20-\x20'+(_0x44fb17['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x44fb17['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x27c4db['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x27c4db['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5a328a['appendChild'](_0x2c51f9);}),setupMatchesActionButtons(),_0x4171cb['searchTerm']&&filterMatchesTable(),console[_0x1f27dd(0x1a0)]('Loaded\x20'+_0xd460d1['size']+_0x1f27dd(0x23f)+currentLadder+'\x20ladder,\x20page\x20'+_0x4d0ef5['page']);}catch(_0x432884){console['error']('Error\x20loading\x20matches:',_0x432884),_0x5a328a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x432884[_0x1f27dd(0x19e)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x20b3b0,_0xf571e2){const _0x2b5c2b=a2_0x1599fb;try{console['log']('Deleting\x20match\x20'+_0x20b3b0+'\x20from\x20'+_0xf571e2+_0x2b5c2b(0x1aa));const _0xbc2951=auth[_0x2b5c2b(0x15c)];if(!_0xbc2951){showNotification(_0x2b5c2b(0x239),'error');return;}const _0x1757d5=_0xf571e2==='D1'?_0x2b5c2b(0x257):_0xf571e2==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log'](_0x2b5c2b(0x22d)+_0x1757d5),showNotification(_0x2b5c2b(0x1a7),_0x2b5c2b(0x182)),await deleteDoc(doc(db,_0x1757d5,_0x20b3b0)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x30ea60=_0xf571e2['toLowerCase']();loadMatchesData(matchesPagination[_0x30ea60][_0x2b5c2b(0x15e)]);}catch(_0x4a8fc5){console['error']('Error\x20deleting\x20match:',_0x4a8fc5),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x4a8fc5['message'],_0x2b5c2b(0xfe));}}function setupMatchesActionButtons(){const _0x4e0df0=a2_0x1599fb;console[_0x4e0df0(0x1a0)]('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll'](_0x4e0df0(0x145))[_0x4e0df0(0x2a0)](_0x26b6c3=>{const _0x589f1b=_0x4e0df0;_0x26b6c3['addEventListener'](_0x589f1b(0x2d5),_0x3a5b56=>{const _0x310c23=_0x589f1b;_0x3a5b56['preventDefault'](),_0x3a5b56['stopPropagation']();const _0x3e0402=_0x3a5b56['currentTarget'][_0x310c23(0x1c3)]['id'],_0x277b8e=_0x3a5b56['currentTarget']['closest']('tr'),_0x7e995d=_0x277b8e[_0x310c23(0x1c3)][_0x310c23(0x217)];console['log'](_0x310c23(0xc4),_0x3e0402,_0x7e995d),openEditMatchModal(_0x3e0402,_0x7e995d);});}),document['querySelectorAll'](_0x4e0df0(0x1d7))['forEach'](_0xdc9dcd=>{const _0x3e888f=_0x4e0df0;_0xdc9dcd[_0x3e888f(0x2e8)]('click',_0x1aab99=>{_0x1aab99['preventDefault'](),_0x1aab99['stopPropagation']();const _0x5e4d5e=_0x1aab99['currentTarget']['dataset']['id'],_0x12dc43=_0x1aab99['currentTarget']['closest']('tr'),_0x1e5eff=_0x12dc43['dataset']['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x5e4d5e,_0x1e5eff),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x5e4d5e,_0x1e5eff);});}),console[_0x4e0df0(0x1a0)]('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x4f1eb8=a2_0x1599fb,_0xde5aac=document['getElementById'](_0x4f1eb8(0x207))['value']['toLowerCase'](),_0x520929=document['querySelectorAll']('#matches-table-body\x20tr');let _0x3e58e7=0x0;_0x520929['forEach'](_0x437e5f=>{const _0x4bfc4e=_0x4f1eb8;if(_0x437e5f['classList']['contains']('loading-cell')||_0x437e5f['classList'][_0x4bfc4e(0x287)]('empty-state')||_0x437e5f[_0x4bfc4e(0x1fc)]['contains'](_0x4bfc4e(0x1e3)))return;const _0x3346cd=_0x437e5f['cells'][0x1][_0x4bfc4e(0x226)]['toLowerCase'](),_0x24966b=_0x437e5f['cells'][0x2][_0x4bfc4e(0x226)]['toLowerCase'](),_0xf67f5f=_0x437e5f['cells'][0x4][_0x4bfc4e(0x226)][_0x4bfc4e(0x22b)]();_0x3346cd['includes'](_0xde5aac)||_0x24966b[_0x4bfc4e(0x193)](_0xde5aac)||_0xf67f5f[_0x4bfc4e(0x193)](_0xde5aac)?(_0x437e5f['style']['display']='',_0x3e58e7++):_0x437e5f['style'][_0x4bfc4e(0x1d5)]='none';});if(_0x3e58e7===0x0&&_0x520929['length']>0x0){const _0xd23b35=document['getElementById']('matches-table-body'),_0x29dd06=_0xd23b35[_0x4f1eb8(0x14f)]('.no-results');if(!_0x29dd06){const _0x5659f4=document['createElement']('tr');_0x5659f4['className']=_0x4f1eb8(0x224),_0x5659f4['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0xde5aac+'\x27</td>',_0xd23b35['appendChild'](_0x5659f4);}}else{const _0x509fc7=document[_0x4f1eb8(0x14f)]('.no-results');_0x509fc7&&_0x509fc7['remove']();}}function getMatchesFilters(){const _0x2b8cca=a2_0x1599fb,_0x2a09ca=document['getElementById']('matches-search')['value'][_0x2b8cca(0x22b)](),_0x5bb85=document['getElementById'](_0x2b8cca(0x2af))[_0x2b8cca(0x2a7)],_0x8dae0=document['getElementById']('matches-end-date')['value'];let _0x5c65db=null,_0x11fcbb=null;return _0x5bb85&&(_0x5c65db=new Date(_0x5bb85),_0x5c65db[_0x2b8cca(0x2fd)](0x0,0x0,0x0,0x0),_0x5c65db=Timestamp['fromDate'](_0x5c65db)),_0x8dae0&&(_0x11fcbb=new Date(_0x8dae0),_0x11fcbb['setHours'](0x17,0x3b,0x3b,0x3e7),_0x11fcbb=Timestamp['fromDate'](_0x11fcbb)),{'searchTerm':_0x2a09ca,'startDate':_0x5c65db,'endDate':_0x11fcbb};}async function applyMatchesFilters(){const _0x1c454e=currentLadder['toLowerCase']();matchesPagination[_0x1c454e]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x318ab9=a2_0x1599fb;document['getElementById']('matches-start-date')['value']='',document['getElementById']('matches-end-date')[_0x318ab9(0x2a7)]='',document[_0x318ab9(0x183)]('matches-search')['value']='';const _0x1d8245=currentLadder[_0x318ab9(0x22b)]();matchesPagination[_0x1d8245]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x484b17,_0x4debed){const _0x203bc9=a2_0x1599fb,_0x2e7fa0=document['getElementById']('edit-match-modal');if(!_0x2e7fa0)return;try{const _0x2c663e=_0x4debed==='D1'?'approvedMatches':_0x4debed==='D2'?_0x203bc9(0x192):'approvedMatchesD3',_0x4400a2=doc(db,_0x2c663e,_0x484b17),_0x1384be=await getDoc(_0x4400a2);if(!_0x1384be[_0x203bc9(0x1ac)]()){showNotification('Match\x20not\x20found','error');return;}const _0x287ee5=_0x1384be[_0x203bc9(0x1ec)]();document[_0x203bc9(0x183)]('edit-match-id')[_0x203bc9(0x2a7)]=_0x484b17,document['getElementById']('edit-match-ladder')[_0x203bc9(0x2a7)]=_0x4debed,document['getElementById'](_0x203bc9(0x191))['value']=_0x287ee5['winnerUsername']||'',document[_0x203bc9(0x183)]('edit-match-winner-score')[_0x203bc9(0x2a7)]=_0x287ee5[_0x203bc9(0x1d3)]||0x0,document['getElementById'](_0x203bc9(0x194))[_0x203bc9(0x2a7)]=_0x287ee5[_0x203bc9(0x179)]||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x287ee5[_0x203bc9(0xc9)]||'',document['getElementById']('edit-match-loser')[_0x203bc9(0x2a7)]=_0x287ee5['loserUsername']||'',document['getElementById'](_0x203bc9(0x113))['value']=_0x287ee5[_0x203bc9(0x227)]||0x0,document['getElementById']('edit-match-loser-suicides')[_0x203bc9(0x2a7)]=_0x287ee5['loserSuicides']||0x0,document['getElementById'](_0x203bc9(0x137))[_0x203bc9(0x2a7)]=_0x287ee5['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0x287ee5[_0x203bc9(0x120)]||'',document['getElementById'](_0x203bc9(0x231))['value']=_0x287ee5['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0x287ee5[_0x203bc9(0x19a)]||_0x287ee5[_0x203bc9(0x256)]||'',document['getElementById']('edit-match-title')[_0x203bc9(0x226)]='Edit\x20Match:\x20'+_0x287ee5['winnerUsername']+'\x20vs\x20'+_0x287ee5['loserUsername'],_0x2e7fa0[_0x203bc9(0x1fc)]['add']('active');}catch(_0xa94dde){console[_0x203bc9(0xfe)](_0x203bc9(0x2b8),_0xa94dde),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x2a5aec=a2_0x1599fb,_0x3c308f=document['getElementById']('edit-match-modal');_0x3c308f&&_0x3c308f[_0x2a5aec(0x1fc)]['remove']('active');}async function saveEditedMatch(){const _0x52fe10=a2_0x1599fb;try{const _0x57d80c=document[_0x52fe10(0x183)]('edit-match-id')['value'],_0x4383dc=document['getElementById']('edit-match-ladder')['value'];if(!_0x57d80c||!_0x4383dc){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x52fe10(0xfe));return;}const _0x5b7972=_0x4383dc==='D1'?'approvedMatches':_0x4383dc==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x58bc9c=document['getElementById'](_0x52fe10(0x191))['value']['trim'](),_0x3f3450=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x379c64=parseInt(document[_0x52fe10(0x183)]('edit-match-winner-suicides')['value']),_0x518955=document['getElementById']('edit-match-winner-comment')[_0x52fe10(0x2a7)][_0x52fe10(0x2b0)](),_0xaf475a=document[_0x52fe10(0x183)]('edit-match-loser')['value']['trim'](),_0x48f95f=parseInt(document['getElementById']('edit-match-loser-score')[_0x52fe10(0x2a7)]),_0x57155f=parseInt(document[_0x52fe10(0x183)]('edit-match-loser-suicides')['value']),_0xbfe9fb=document['getElementById']('edit-match-loser-comment')[_0x52fe10(0x2a7)]['trim'](),_0xb8ba19=document[_0x52fe10(0x183)]('edit-match-map')['value']['trim'](),_0x53e3d6=document['getElementById'](_0x52fe10(0x231))['value']['trim'](),_0x381878=document['getElementById']('edit-match-loser-demo')['value']['trim']();if(!_0x58bc9c||!_0xaf475a){showNotification(_0x52fe10(0x20f),'error');return;}await updateDoc(doc(db,_0x5b7972,_0x57d80c),{'winnerUsername':_0x58bc9c,'winnerScore':_0x3f3450,'winnerSuicides':_0x379c64,'winnerComment':_0x518955,'loserUsername':_0xaf475a,'loserScore':_0x48f95f,'loserSuicides':_0x57155f,'loserComment':_0xbfe9fb,'mapPlayed':_0xb8ba19,'winnerDemoLink':_0x53e3d6||null,'loserDemoLink':_0x381878||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x52fe10(0x163)],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully',_0x52fe10(0xca)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x4383dc['toLowerCase']()]['page']);}catch(_0x559862){console['error']('Error\x20saving\x20match:',_0x559862),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x559862['message'],_0x52fe10(0xfe));}}async function openDeleteMatchModal(_0x3e19c3,_0xe3e6d4){const _0x1e2eac=a2_0x1599fb;try{const _0x243671=_0xe3e6d4==='D1'?_0x1e2eac(0x257):_0xe3e6d4==='D2'?_0x1e2eac(0x192):'approvedMatchesD3',_0x3805d6=doc(db,_0x243671,_0x3e19c3),_0x3f06a0=await getDoc(_0x3805d6);if(!_0x3f06a0[_0x1e2eac(0x1ac)]()){showNotification('Match\x20not\x20found','error');return;}const _0x22797e=_0x3f06a0['data'](),_0xec0392=document['getElementById']('delete-match-confirm-modal');_0xec0392[_0x1e2eac(0x1c3)][_0x1e2eac(0x29b)]=_0x3e19c3,_0xec0392['dataset']['ladder']=_0xe3e6d4;const _0xcfbb95=_0x22797e[_0x1e2eac(0xe6)]?new Date(_0x22797e[_0x1e2eac(0xe6)]['seconds']*0x3e8)['toLocaleDateString']():_0x1e2eac(0x1ab),_0x1dbf2f=document['getElementById']('delete-match-summary');_0x1dbf2f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0xcfbb95+_0x1e2eac(0x18e)+_0x22797e['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x22797e['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x22797e['winnerScore']||0x0)+'\x20-\x20'+(_0x22797e[_0x1e2eac(0x227)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x22797e['mapPlayed']||'N/A')+_0x1e2eac(0x1f9)+_0xe3e6d4+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xec0392['classList']['add'](_0x1e2eac(0x306));}catch(_0x17a376){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x17a376),showNotification(_0x1e2eac(0xff),_0x1e2eac(0xfe));}}function closeDeleteMatchModal(){const _0x423c04=a2_0x1599fb,_0x1a97ef=document['getElementById'](_0x423c04(0x300));_0x1a97ef&&(_0x1a97ef['classList']['remove']('active'),_0x1a97ef['removeAttribute']('data-match-id'),_0x1a97ef['removeAttribute'](_0x423c04(0x138)));}async function confirmDeleteMatch(){const _0x3c4962=a2_0x1599fb,_0x51fb14=document['getElementById']('delete-match-confirm-modal'),_0x49e4dc=_0x51fb14['dataset']['matchId'],_0xe50f8f=_0x51fb14['dataset']['ladder'];if(!_0x49e4dc||!_0xe50f8f){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0xeca7d3=_0xe50f8f==='D1'?'approvedMatches':_0xe50f8f==='D2'?_0x3c4962(0x192):'approvedMatchesD3';await deleteDoc(doc(db,_0xeca7d3,_0x49e4dc)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0xe50f8f['toLowerCase']()]['page']);}catch(_0x29e0c7){console['error']('Error\x20deleting\x20match:',_0x29e0c7),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x29e0c7['message'],_0x3c4962(0xfe));}}async function saveHighlightChanges(){const _0x58c8cf=a2_0x1599fb,_0x20f17b=document['getElementById']('edit-highlight-id')[_0x58c8cf(0x2a7)],_0x552c1b=document['getElementById']('edit-highlight-type-select')['value'];let _0x136997={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x552c1b,'description':document['getElementById']('edit-highlight-description-input')['value']['trim'](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value'][_0x58c8cf(0x2b0)](),'submittedBy':auth['currentUser']['email']};if(_0x552c1b==='match'){_0x136997['matchInfo']=document['getElementById'](_0x58c8cf(0x195))['value']['trim'](),_0x136997['map']=document['getElementById'](_0x58c8cf(0x305))[_0x58c8cf(0x2a7)]['trim']();const _0x1a0f2a=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x136997[_0x58c8cf(0x13e)]=_0x1a0f2a?Timestamp[_0x58c8cf(0x26a)](new Date(_0x1a0f2a)):null,_0x136997['winnerName']=document['getElementById']('edit-highlight-winnerName-input')['value']['trim'](),_0x136997['winnerScore']=document[_0x58c8cf(0x183)]('edit-highlight-winnerScore-input')['value'][_0x58c8cf(0x2b0)](),_0x136997['loserName']=document['getElementById']('edit-highlight-loserName-input')[_0x58c8cf(0x2a7)]['trim'](),_0x136997['loserScore']=document['getElementById']('edit-highlight-loserScore-input')[_0x58c8cf(0x2a7)]['trim'](),_0x136997['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x136997['mapCreator']=null,_0x136997['mapVersion']=null,_0x136997[_0x58c8cf(0x1a2)]=null,_0x136997['achievementPlayer']=null,_0x136997['achievementType']=null,_0x136997['achievementDetails']=null,_0x136997['playerProfileUrl']=null;}else{if(_0x552c1b==='creator')_0x136997[_0x58c8cf(0x20c)]=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x136997['mapCreator']=document[_0x58c8cf(0x183)]('edit-highlight-mapCreator-input')['value'][_0x58c8cf(0x2b0)](),_0x136997['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')[_0x58c8cf(0x2a7)]['trim'](),_0x136997['creatorImageUrl']=document[_0x58c8cf(0x183)]('edit-highlight-creatorImageUrl-input')['value']['trim'](),_0x136997['matchInfo']=null,_0x136997[_0x58c8cf(0x13e)]=null,_0x136997[_0x58c8cf(0x24d)]=null,_0x136997['winnerScore']=null,_0x136997['loserName']=null,_0x136997['loserScore']=null,_0x136997['matchLink']=null,_0x136997[_0x58c8cf(0x1ef)]=null,_0x136997['achievementType']=null,_0x136997['achievementDetails']=null,_0x136997[_0x58c8cf(0x141)]=null;else _0x552c1b===_0x58c8cf(0x19c)&&(_0x136997['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')['value'][_0x58c8cf(0x2b0)](),_0x136997['achievementType']=document['getElementById']('edit-highlight-achievementType-input')[_0x58c8cf(0x2a7)]['trim'](),_0x136997[_0x58c8cf(0x10a)]=document[_0x58c8cf(0x183)]('edit-highlight-achievementDetails-input')['value'][_0x58c8cf(0x2b0)](),_0x136997['playerProfileUrl']=document[_0x58c8cf(0x183)]('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x136997[_0x58c8cf(0x303)]=null,_0x136997[_0x58c8cf(0x20c)]=null,_0x136997['matchDate']=null,_0x136997['winnerName']=null,_0x136997['winnerScore']=null,_0x136997['loserName']=null,_0x136997['loserScore']=null,_0x136997['matchLink']=null,_0x136997['mapCreator']=null,_0x136997[_0x58c8cf(0x2c8)]=null,_0x136997['creatorImageUrl']=null);}try{if(_0x20f17b){_0x136997['updatedAt']=serverTimestamp();const _0xab3130=doc(db,'highlights',_0x20f17b);await updateDoc(_0xab3130,_0x136997),showNotification('Highlight\x20updated\x20successfully!',_0x58c8cf(0xca));}else _0x136997[_0x58c8cf(0x18b)]=serverTimestamp(),await addDoc(collection(db,_0x58c8cf(0x111)),_0x136997),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x3741c1){console['error']('Error\x20saving\x20highlight:',_0x3741c1),showNotification('Error\x20saving\x20highlight:\x20'+_0x3741c1['message'],'error');}}async function resimulateMatch(){const _0x438bbc=a2_0x1599fb;try{const _0x57bd67=document['getElementById']('resimulate-match-id')['value'];if(!_0x57bd67){showNotification('Match\x20ID\x20is\x20required',_0x438bbc(0xfe));return;}const _0x5693c2=auth[_0x438bbc(0x15c)];if(!_0x5693c2){showNotification(_0x438bbc(0x28a),_0x438bbc(0xfe));return;}const _0x2a7b1a=currentLadder==='D1'?_0x438bbc(0x257):currentLadder==='D2'?'approvedMatchesD2':_0x438bbc(0x2b3),_0x430076=doc(db,_0x2a7b1a,_0x57bd67),_0x39ace8=await getDoc(_0x430076);if(!_0x39ace8['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x438bbc(0xfe));return;}const _0x19ae95=_0x39ace8['data'](),_0x3c9cb5=_0x19ae95['approvedAt']?_0x19ae95['approvedAt']['toDate']()[_0x438bbc(0x2be)]():_0x19ae95['matchDate']?_0x19ae95['matchDate'][_0x438bbc(0x23c)]?_0x19ae95[_0x438bbc(0x13e)]['toDate']()['toLocaleString']():new Date(_0x19ae95['matchDate'])['toLocaleString']():_0x438bbc(0x104),_0x37a12e='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x19ae95['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x19ae95['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x19ae95[_0x438bbc(0x1d3)]+'-'+_0x19ae95[_0x438bbc(0x227)]+_0x438bbc(0x1fe)+(_0x19ae95[_0x438bbc(0x120)]||_0x19ae95['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x3c9cb5+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x57bd67+_0x438bbc(0x14b)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x438bbc(0x183)](_0x438bbc(0x1bc))['innerHTML']=_0x37a12e,document[_0x438bbc(0x183)]('match-details-container')['style']['display']='block',document[_0x438bbc(0x183)]('confirm-resimulate-btn')['style']['display']=_0x438bbc(0x155),window['pendingResimulateData']={'matchId':_0x57bd67,'matchData':_0x19ae95,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x42f59b){console['error']('Error\x20finding\x20match:',_0x42f59b),showNotification(_0x438bbc(0x107)+_0x42f59b[_0x438bbc(0x19e)],_0x438bbc(0xfe));}}async function confirmResimulateMatch(){const _0x195ba6=a2_0x1599fb;try{const {matchId:_0x449400,matchData:_0x2362cd,ladder:_0x7fc190}=window['pendingResimulateData'];if(!_0x449400||!_0x2362cd){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x517345=_0x7fc190==='D1'?'players':_0x7fc190==='D2'?_0x195ba6(0x25a):_0x195ba6(0xd9),_0xbd9542=_0x7fc190==='D1'?'eloHistory':_0x7fc190==='D2'?'eloHistoryD2':'eloHistoryD3',[_0xa0dac0,_0xe2db1e]=await Promise['all']([getDocs(query(collection(db,_0x517345),where(_0x195ba6(0x271),'==',_0x2362cd['winnerUsername']))),getDocs(query(collection(db,_0x517345),where(_0x195ba6(0x271),'==',_0x2362cd[_0x195ba6(0x2e1)])))]);if(_0xa0dac0[_0x195ba6(0x233)]||_0xe2db1e['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x479c83=_0xa0dac0['docs'][0x0]['id'],_0x1e576c=_0xe2db1e['docs'][0x0]['id'],_0x10ddf7=_0xa0dac0['docs'][0x0]['data'](),_0xdfabe0=_0xe2db1e['docs'][0x0][_0x195ba6(0x1ec)](),[_0x3668da,_0x3e8cb8]=await Promise['all']([getDocs(query(collection(db,_0xbd9542),where('playerId','==',_0x479c83),where('matchId','==',_0x449400))),getDocs(query(collection(db,_0xbd9542),where('playerId','==',_0x1e576c),where(_0x195ba6(0x29b),'==',_0x449400)))]),_0x5a6d6e=!_0x3668da[_0x195ba6(0x233)],_0x1ae9af=!_0x3e8cb8[_0x195ba6(0x233)],_0x2f7e68=_0x195ba6(0x18d)+(_0x5a6d6e?'✅\x20Exists':'❌\x20Missing')+_0x195ba6(0x2d9)+(_0x1ae9af?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x10ddf7['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0xdfabe0['eloRating']||_0x195ba6(0x104))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x10ddf7[_0x195ba6(0x267)]||'Unknown')+_0x195ba6(0x208)+(_0xdfabe0['position']||_0x195ba6(0x104))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x2f7e68,document['getElementById']('validation-results-container')['style']['display']=_0x195ba6(0x155);if(_0x5a6d6e&&_0x1ae9af){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.',_0x195ba6(0x1e8));return;}showNotification(_0x195ba6(0x2f9),'info');const _0x42a4f1=_0x2362cd[_0x195ba6(0xe6)]||_0x2362cd['matchDate']||serverTimestamp(),[_0x2c12a3,_0x4e888e]=await Promise['all']([getPlayerEloAtTime(_0x479c83,_0x42a4f1,_0xbd9542),getPlayerEloAtTime(_0x1e576c,_0x42a4f1,_0xbd9542)]),{calculateElo:_0x216b9e}=await import(_0x195ba6(0x21b)),{newWinnerRating:_0x5ac6f9,newLoserRating:_0x14c63a}=_0x216b9e(_0x2c12a3,_0x4e888e),_0x45c6db=_0x10ddf7[_0x195ba6(0x267)]||Number['MAX_SAFE_INTEGER'],_0x967425=_0xdfabe0['position']||Number['MAX_SAFE_INTEGER'];let _0xb9088e=_0x45c6db,_0x15b9ed=_0x967425;_0x45c6db>_0x967425&&(_0xb9088e=_0x967425,_0x15b9ed=_0x967425+0x1);const _0x821218=writeBatch(db),_0x48d005=doc(db,_0x517345,_0x479c83);_0x821218['update'](_0x48d005,{'eloRating':_0x5ac6f9,'position':_0xb9088e,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x580aa8=doc(db,_0x517345,_0x1e576c);_0x821218['update'](_0x580aa8,{'eloRating':_0x14c63a,'position':_0x15b9ed,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x195ba6(0x15c)][_0x195ba6(0x1af)]});if(_0x45c6db>_0x967425){const _0x231f60=await getDocs(query(collection(db,_0x517345),where('position','>',_0x967425),where('position','<',_0x45c6db)));_0x231f60[_0x195ba6(0x2a0)](_0x3454eb=>{const _0x48c979=_0x195ba6,_0xaa0c33=doc(db,_0x517345,_0x3454eb['id']),_0x1226be=_0x3454eb[_0x48c979(0x1ec)]()['position'];_0x821218['update'](_0xaa0c33,{'position':_0x1226be+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x5a6d6e){const _0xb44961=doc(collection(db,_0xbd9542));_0x821218['set'](_0xb44961,{'playerId':_0x479c83,'player':_0x2362cd['winnerUsername'],'previousElo':_0x2c12a3,'newElo':_0x5ac6f9,'eloChange':_0x5ac6f9-_0x2c12a3,'opponentId':_0x1e576c,'opponent':_0x2362cd['loserUsername'],'matchResult':'win','previousPosition':_0x45c6db,'newPosition':_0xb9088e,'positionChange':_0xb9088e-_0x45c6db,'matchId':_0x449400,'timestamp':_0x42a4f1,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x7fc190,'matchScore':_0x2362cd['winnerScore']+'-'+_0x2362cd['loserScore'],'mapPlayed':_0x2362cd['mapPlayed']||_0x2362cd['mapName']||_0x195ba6(0x104),'note':_0x195ba6(0x142)});}if(!_0x1ae9af){const _0x4e6f6c=doc(collection(db,_0xbd9542));_0x821218[_0x195ba6(0x1f0)](_0x4e6f6c,{'playerId':_0x1e576c,'player':_0x2362cd['loserUsername'],'previousElo':_0x4e888e,'newElo':_0x14c63a,'eloChange':_0x14c63a-_0x4e888e,'opponentId':_0x479c83,'opponent':_0x2362cd[_0x195ba6(0x20b)],'matchResult':'loss','previousPosition':_0x967425,'newPosition':_0x15b9ed,'positionChange':_0x15b9ed-_0x967425,'matchId':_0x449400,'timestamp':_0x42a4f1,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x7fc190,'matchScore':_0x2362cd[_0x195ba6(0x1d3)]+'-'+_0x2362cd['loserScore'],'mapPlayed':_0x2362cd['mapPlayed']||_0x2362cd['mapName']||_0x195ba6(0x104),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0xe57762=_0x7fc190==='D1'?_0x195ba6(0x257):_0x7fc190==='D2'?'approvedMatchesD2':_0x195ba6(0x2b3),_0x69f4d=doc(db,_0xe57762,_0x449400);_0x821218['update'](_0x69f4d,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x195ba6(0x1af)],'resimulatedReason':_0x195ba6(0x18a),'originalWinnerElo':_0x10ddf7[_0x195ba6(0xf4)],'originalLoserElo':_0xdfabe0['eloRating'],'originalWinnerPosition':_0x45c6db,'originalLoserPosition':_0x967425,'resimulatedWinnerElo':_0x5ac6f9,'resimulatedLoserElo':_0x14c63a,'resimulatedWinnerPosition':_0xb9088e,'resimulatedLoserPosition':_0x15b9ed}),await _0x821218['commit']();const _0x6ce99b=(!_0x5a6d6e?0x1:0x0)+(!_0x1ae9af?0x1:0x0),_0x7bfca8=_0x45c6db!==_0xb9088e||_0x967425!==_0x15b9ed;showNotification(_0x195ba6(0x1b2)+(_0x195ba6(0x148)+_0x6ce99b+_0x195ba6(0x1fd))+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x2c12a3+'→'+_0x5ac6f9+'\x20(+'+(_0x5ac6f9-_0x2c12a3)+_0x195ba6(0x29e))+(_0x195ba6(0x21f)+_0x4e888e+'→'+_0x14c63a+'\x20('+(_0x14c63a-_0x4e888e)+_0x195ba6(0x2f8))+(''+(_0x7bfca8?'Positions\x20updated:\x20Winner\x20'+_0x45c6db+'→'+_0xb9088e+_0x195ba6(0x140)+_0x967425+'→'+_0x15b9ed:_0x195ba6(0x164))),'success'),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x3e35af){console['error']('Error\x20resimulating\x20match:',_0x3e35af),showNotification(_0x195ba6(0x175)+_0x3e35af['message'],'error');}}async function getPlayerEloAtTime(_0x5371bb,_0xdc50c6,_0x497f42){const _0x10da1a=a2_0x1599fb;try{const _0x33ad6f=_0xdc50c6['toDate']?_0xdc50c6[_0x10da1a(0x23c)]():new Date(_0xdc50c6),_0x5622e9=query(collection(db,_0x497f42),where(_0x10da1a(0x23d),'==',_0x5371bb),where(_0x10da1a(0x2b2),'<',_0xdc50c6),orderBy(_0x10da1a(0x2b2),'desc'),limit(0x1)),_0x1a506e=await getDocs(_0x5622e9);if(!_0x1a506e['empty']){const _0x114edf=_0x1a506e['docs'][0x0]['data']();return console[_0x10da1a(0x1a0)]('Found\x20ELO\x20history\x20for\x20player\x20'+_0x5371bb+_0x10da1a(0x18c)+_0x114edf['newElo']),_0x114edf['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x5371bb+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x2123d8){return console['error'](_0x10da1a(0x2f0)+_0x5371bb+':',_0x2123d8),0x4b0;}}function openResimulateModal(){const _0x5544fe=a2_0x1599fb;console['log']('openResimulateModal\x20called!');const _0x48d361=document['getElementById']('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x48d361);if(!_0x48d361){console[_0x5544fe(0xfe)](_0x5544fe(0xf9));return;}_0x48d361['style'][_0x5544fe(0x1d5)]='block',_0x48d361[_0x5544fe(0xe5)][_0x5544fe(0x2f4)]='visible',_0x48d361['style'][_0x5544fe(0x1f8)]='1',_0x48d361['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x48d361)['display']);const _0x319dd9=document[_0x5544fe(0x183)]('match-details-container'),_0x3a5ed7=document['getElementById']('validation-results-container'),_0x5800e4=document['getElementById'](_0x5544fe(0x122)),_0x195980=document['getElementById'](_0x5544fe(0x181));if(_0x319dd9)_0x319dd9[_0x5544fe(0x1ed)]='';if(_0x3a5ed7)_0x3a5ed7['innerHTML']='';if(_0x5800e4)_0x5800e4['style']['display']=_0x5544fe(0x1b9);if(_0x195980)_0x195980['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x51c3d7=a2_0x1599fb;document['getElementById']('resimulate-modal')[_0x51c3d7(0xe5)]['display']='none',window[_0x51c3d7(0x2e0)]=null;}window[a2_0x1599fb(0x236)]=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a2_0x1599fb(0xec)]=closeResimulateModal;async function loadPointsData(){const _0x8a5d4=a2_0x1599fb;console['log']('Loading\x20points\x20data...');try{await Promise[_0x8a5d4(0xdf)]([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x424b6a){console['error']('Error\x20loading\x20points\x20data:',_0x424b6a),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x424b6a[_0x8a5d4(0x19e)],_0x8a5d4(0xfe));}}function renderPointsOverview(_0xb36af3){const _0x5f3b09=a2_0x1599fb,_0x2da293=document[_0x5f3b09(0x183)]('points-overview-table-body');if(!_0x2da293)return;if(_0xb36af3['length']===0x0){_0x2da293['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x2da293['innerHTML']='',_0xb36af3[_0x5f3b09(0x2a0)](_0x58d65f=>{const _0x1c0790=_0x5f3b09,_0x1e4123=document['createElement']('tr'),_0x2cf6ab=_0x58d65f[_0x1c0790(0x223)]||_0x58d65f[_0x1c0790(0x271)]||_0x1c0790(0xd2),_0x4fa4f8=_0x58d65f['email']||_0x1c0790(0x261),_0x4b3527=_0x58d65f['points']||0x0,_0x4790c2=_0x58d65f['lastPointsModified']?new Date(_0x58d65f['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():_0x1c0790(0x262);_0x1e4123[_0x1c0790(0x1ed)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x2cf6ab+_0x1c0790(0x30b)+_0x4fa4f8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x4b3527>0x3e8?'high-points':_0x4b3527>0x1f4?'medium-points':_0x1c0790(0x209))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x4b3527['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4790c2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x58d65f['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x58d65f['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2da293['appendChild'](_0x1e4123);}),setupPointsActionButtons();}function a2_0x1f64(_0x4b88dc,_0x776a7a){const _0x15b3f5=a2_0x2736();return a2_0x1f64=function(_0x58ba0e,_0x437338){_0x58ba0e=_0x58ba0e-0xc0;let _0x273634=_0x15b3f5[_0x58ba0e];return _0x273634;},a2_0x1f64(_0x4b88dc,_0x776a7a);}function setupPointsActionButtons(){const _0x1cc864=a2_0x1599fb;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x48c53c=document['querySelectorAll'](_0x1cc864(0x1de));console['log'](_0x1cc864(0x2f3)+_0x48c53c['length']+'\x20quick\x20edit\x20buttons'),_0x48c53c['forEach'](_0x21ab31=>{const _0x31cbaf=_0x1cc864,_0x5c9752=_0x21ab31[_0x31cbaf(0x29f)](!![]);_0x21ab31['parentNode'][_0x31cbaf(0x161)](_0x5c9752,_0x21ab31);});const _0xfb9d2b=document[_0x1cc864(0x136)](_0x1cc864(0x156));console['log']('Found\x20'+_0xfb9d2b[_0x1cc864(0x298)]+_0x1cc864(0x190)),_0xfb9d2b['forEach'](_0x2f0f9e=>{const _0x2be86d=_0x1cc864,_0x546cba=_0x2f0f9e['cloneNode'](!![]);_0x2f0f9e['parentNode'][_0x2be86d(0x161)](_0x546cba,_0x2f0f9e);}),document['querySelectorAll'](_0x1cc864(0x1de))[_0x1cc864(0x2a0)](_0x5f59eb=>{_0x5f59eb['addEventListener']('click',function(_0x2c1316){const _0x4343c4=a2_0x1f64;_0x2c1316['preventDefault'](),_0x2c1316['stopPropagation']();const _0x401630=this[_0x4343c4(0x1c3)]['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x401630);if(!_0x401630){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']=_0x4343c4(0x201),setTimeout(()=>{const _0x4f755b=_0x4343c4;this['style'][_0x4f755b(0x1f8)]='1';},0xc8),openQuickEditModal(_0x401630);});}),document[_0x1cc864(0x136)]('.view-history-btn')['forEach'](_0x59d954=>{const _0x1d173b=_0x1cc864;_0x59d954['addEventListener'](_0x1d173b(0x2d5),function(_0x32389b){const _0x5a8a11=_0x1d173b;_0x32389b['preventDefault'](),_0x32389b[_0x5a8a11(0x28e)]();const _0xeafddd=this['dataset'][_0x5a8a11(0x106)];console['log']('View\x20history\x20clicked\x20for\x20user:',_0xeafddd);if(!_0xeafddd){console[_0x5a8a11(0xfe)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x5a8a11(0xe5)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0xeafddd);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x416df9){const _0x1ef5d0=a2_0x1599fb;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x416df9);const _0x224a10=document['getElementById']('quick-edit-points-modal');if(!_0x224a10){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...','info');const _0x274b3a=doc(db,'userProfiles',_0x416df9),_0x3b54de=await getDoc(_0x274b3a);if(!_0x3b54de['exists']()){showNotification(_0x1ef5d0(0x14e),'error');return;}const _0xb336fd=_0x3b54de[_0x1ef5d0(0x1ec)]();console['log']('User\x20data\x20loaded:',_0xb336fd);const _0x1f2c5f=document['getElementById']('quick-edit-user-id'),_0x38076e=document[_0x1ef5d0(0x183)]('quick-edit-display-name'),_0x4a5a0b=document['getElementById']('quick-edit-email'),_0x4d6cbf=document['getElementById'](_0x1ef5d0(0x245)),_0x203de8=document['getElementById']('quick-edit-points-form');if(!_0x1f2c5f||!_0x38076e||!_0x4a5a0b||!_0x4d6cbf||!_0x203de8){console[_0x1ef5d0(0xfe)](_0x1ef5d0(0x2a6)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.',_0x1ef5d0(0xfe));return;}_0x1f2c5f[_0x1ef5d0(0x2a7)]=_0x416df9,_0x38076e[_0x1ef5d0(0x226)]=_0xb336fd['displayName']||_0xb336fd['username']||'Unknown\x20User',_0x4a5a0b['textContent']=_0xb336fd['email']||'No\x20email',_0x4d6cbf['textContent']=(_0xb336fd['points']||0x0)['toLocaleString'](),_0x203de8[_0x1ef5d0(0x19d)]();const _0x5e9fa3=document['getElementById'](_0x1ef5d0(0x2b4));_0x5e9fa3&&(_0x5e9fa3[_0x1ef5d0(0x2ae)]=!![]);_0x224a10['classList']['add']('active'),console[_0x1ef5d0(0x1a0)]('Modal\x20opened\x20successfully');const _0xc590d=document['getElementById']('quick-points-amount');_0xc590d&&setTimeout(()=>_0xc590d['focus'](),0x64);}catch(_0x3d5559){console['error'](_0x1ef5d0(0x2ed),_0x3d5559),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x3d5559[_0x1ef5d0(0x19e)],'error');}}function closeQuickEditModal(){const _0xb37b84=a2_0x1599fb,_0x49ea3c=document['getElementById']('quick-edit-points-modal');_0x49ea3c&&_0x49ea3c[_0xb37b84(0x1fc)]['remove']('active');}async function handleQuickEditPoints(_0x338e32){const _0x4f879f=a2_0x1599fb;_0x338e32['preventDefault']();const _0x4a305a=document['getElementById']('quick-edit-user-id')[_0x4f879f(0x2a7)],_0x5cd881=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0x4dd097=parseInt(document['getElementById']('quick-points-amount')['value']),_0x243f15=document['getElementById'](_0x4f879f(0x131))['value'][_0x4f879f(0x2b0)]();console['log'](_0x4f879f(0x2fe),{'userId':_0x4a305a,'action':_0x5cd881,'amount':_0x4dd097,'reason':_0x243f15});if(!_0x4a305a||!_0x4dd097||_0x4dd097<0x0){showNotification(_0x4f879f(0x187),'error');return;}try{await modifyUserPoints(_0x4a305a,_0x5cd881,_0x4dd097,_0x243f15),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x4a305a);}catch(_0x4489f0){console[_0x4f879f(0xfe)]('Error\x20updating\x20points:',_0x4489f0),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x4489f0['message'],_0x4f879f(0xfe));}}async function searchUsersForPoints(){const _0x4816cc=a2_0x1599fb,_0x3e98a6=document[_0x4816cc(0x183)](_0x4816cc(0x309))[_0x4816cc(0x2a7)]['trim']()['toLowerCase'](),_0x4b891a=document['getElementById'](_0x4816cc(0x139));if(!_0x3e98a6||_0x3e98a6['length']<0x2){_0x4b891a[_0x4816cc(0x1ed)]='';return;}_0x4b891a['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x2bfb72=collection(db,'userProfiles'),_0x3c3605=await getDocs(_0x2bfb72),_0x352678=[];_0x3c3605[_0x4816cc(0x2a0)](_0x128566=>{const _0x3dbeb5=_0x4816cc,_0x257f69=_0x128566['data'](),_0x5d2b3e=(_0x257f69['displayName']||_0x257f69['username']||'')['toLowerCase'](),_0x2bbf36=(_0x257f69['email']||'')['toLowerCase']();(_0x5d2b3e[_0x3dbeb5(0x193)](_0x3e98a6)||_0x2bbf36[_0x3dbeb5(0x193)](_0x3e98a6))&&_0x352678['push']({'id':_0x128566['id'],..._0x257f69});});if(_0x352678[_0x4816cc(0x298)]===0x0){_0x4b891a['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x4b891a['innerHTML']='',_0x352678[_0x4816cc(0x2a0)](_0x532052=>{const _0x58e5df=_0x4816cc,_0x4891a3=document[_0x58e5df(0xee)]('div');_0x4891a3['className']='search-result-item',_0x4891a3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x532052['displayName']||_0x532052['username']||_0x58e5df(0x104))+_0x58e5df(0x1b3)+(_0x532052['email']||_0x58e5df(0x261))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x532052['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4891a3['addEventListener']('click',()=>selectUserForPoints(_0x532052)),_0x4b891a[_0x58e5df(0x27a)](_0x4891a3);});}catch(_0x1fc8b2){console['error']('Error\x20searching\x20users:',_0x1fc8b2),_0x4b891a['innerHTML']=_0x4816cc(0x292);}}function selectUserForPoints(_0x467299){const _0x3813e2=a2_0x1599fb;document[_0x3813e2(0x183)]('selected-user-name')[_0x3813e2(0x226)]=_0x467299['displayName']||_0x467299['username']||'Unknown\x20User',document['getElementById']('selected-user-points')['textContent']=(_0x467299['points']||0x0)['toLocaleString'](),document[_0x3813e2(0x183)]('selected-user-id')['value']=_0x467299['id'],document[_0x3813e2(0x183)]('selected-user-info')[_0x3813e2(0xe5)]['display']=_0x3813e2(0x155),document['getElementById']('points-management-forms')['style'][_0x3813e2(0x1d5)]='block',document[_0x3813e2(0x183)]('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')[_0x3813e2(0x2a7)]='';}async function handleModifyPoints(_0x56649b){const _0x3cd6f1=a2_0x1599fb;_0x56649b[_0x3cd6f1(0x12d)]();const _0x420559=document['getElementById'](_0x3cd6f1(0x228))['value'],_0x1b07c5=document['getElementById'](_0x3cd6f1(0x24e))['value'],_0x3fbf03=parseInt(document['getElementById'](_0x3cd6f1(0xc5))['value']),_0x25a3f9=document['getElementById'](_0x3cd6f1(0x16c))[_0x3cd6f1(0x2a7)][_0x3cd6f1(0x2b0)]();if(!_0x420559||!_0x3fbf03||_0x3fbf03<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x3cd6f1(0xfe));return;}try{await modifyUserPoints(_0x420559,_0x1b07c5,_0x3fbf03,_0x25a3f9),document[_0x3cd6f1(0x183)](_0x3cd6f1(0x308))['reset']();const _0x2cd03d=doc(db,'userProfiles',_0x420559),_0x496a00=await getDoc(_0x2cd03d);if(_0x496a00[_0x3cd6f1(0x1ac)]()){const _0x1aebb2=_0x496a00['data']();document['getElementById']('selected-user-points')[_0x3cd6f1(0x226)]=(_0x1aebb2['points']||0x0)[_0x3cd6f1(0x2be)]();}showNotification(_0x3cd6f1(0x2d8),_0x3cd6f1(0xca)),loadPointsHistory();}catch(_0x344aa2){console['error']('Error\x20modifying\x20points:',_0x344aa2),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x344aa2[_0x3cd6f1(0x19e)],_0x3cd6f1(0xfe));}}async function loadPointsHistory(){const _0x58dc56=a2_0x1599fb,_0x5b75c0=document['getElementById'](_0x58dc56(0x290));if(!_0x5b75c0)return;_0x5b75c0[_0x58dc56(0x1ed)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x238409=collection(db,_0x58dc56(0x11c)),_0x2a7fa6=query(_0x238409,orderBy('timestamp',_0x58dc56(0x21e)),limit(0x32)),_0x1e8cee=await getDocs(_0x2a7fa6);if(_0x1e8cee['empty']){_0x5b75c0['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x5b75c0['innerHTML']='',_0x1e8cee['forEach'](_0x365072=>{const _0x2fb723=_0x58dc56,_0x4ba619=_0x365072['data'](),_0x651aac=document['createElement']('tr'),_0x1dfa7e=_0x4ba619['timestamp']?new Date(_0x4ba619['timestamp']['seconds']*0x3e8)['toLocaleString']():_0x2fb723(0x104);let _0x560a95='';switch(_0x4ba619['action']){case'add':_0x560a95='Added\x20'+_0x4ba619['amount']+'\x20points';break;case _0x2fb723(0xfa):_0x560a95='Subtracted\x20'+_0x4ba619['amount']+_0x2fb723(0x16b);break;case'set':_0x560a95=_0x2fb723(0x1a9)+_0x4ba619['amount']+'\x20points';break;default:_0x560a95=_0x4ba619['action']+'\x20'+_0x4ba619[_0x2fb723(0x301)]+_0x2fb723(0x16b);}_0x651aac[_0x2fb723(0x1ed)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1dfa7e+_0x2fb723(0x2a8)+(_0x4ba619['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x560a95+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x4ba619['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4ba619['previousPoints']||0x0)+_0x2fb723(0x265)+(_0x4ba619[_0x2fb723(0x1d0)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4ba619[_0x2fb723(0x2cf)]||'No\x20reason\x20provided')+_0x2fb723(0x2a8)+(_0x4ba619['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5b75c0['appendChild'](_0x651aac);});}catch(_0x1bceec){console['error'](_0x58dc56(0x1e6),_0x1bceec),_0x5b75c0['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x1bceec['message']+'</td></tr>';}}function filterPointsOverview(){const _0x30f6bb=a2_0x1599fb,_0x525ef6=document[_0x30f6bb(0x183)]('points-overview-search')['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x31dca7=window['allUsersPoints']['filter'](_0x209f4=>{const _0x1fd66a=_0x30f6bb,_0x4438af=(_0x209f4[_0x1fd66a(0x223)]||_0x209f4['username']||'')['toLowerCase'](),_0x1cbdce=(_0x209f4['email']||'')['toLowerCase']();return _0x4438af['includes'](_0x525ef6)||_0x1cbdce['includes'](_0x525ef6);});renderPointsOverview(_0x31dca7);}function sortPointsOverview(){const _0x372c45=a2_0x1599fb,_0x4b2769=document['getElementById']('points-sort-order')['value'];if(!window[_0x372c45(0x2db)])return;const _0x5368c9=[...window[_0x372c45(0x2db)]];switch(_0x4b2769){case'points-desc':_0x5368c9['sort']((_0x38fd7f,_0x37d31e)=>(_0x37d31e['points']||0x0)-(_0x38fd7f['points']||0x0));break;case _0x372c45(0x18f):_0x5368c9['sort']((_0x4cd70d,_0x153fea)=>(_0x4cd70d[_0x372c45(0xe2)]||0x0)-(_0x153fea[_0x372c45(0xe2)]||0x0));break;case _0x372c45(0xdc):_0x5368c9[_0x372c45(0x247)]((_0x509608,_0x2510f7)=>{const _0x287168=_0x372c45,_0x2c95ff=(_0x509608[_0x287168(0x223)]||_0x509608['username']||'')['toLowerCase'](),_0x3b2527=(_0x2510f7['displayName']||_0x2510f7['username']||'')[_0x287168(0x22b)]();return _0x2c95ff['localeCompare'](_0x3b2527);});break;case'name-desc':_0x5368c9['sort']((_0x308ba8,_0x2027e7)=>{const _0x510814=_0x372c45,_0x46d3b5=(_0x308ba8['displayName']||_0x308ba8['username']||'')['toLowerCase'](),_0x10b336=(_0x2027e7['displayName']||_0x2027e7['username']||'')['toLowerCase']();return _0x10b336[_0x510814(0x17c)](_0x46d3b5);});break;}renderPointsOverview(_0x5368c9);}async function handleAwardItem(_0x4a4739){const _0x1b4557=a2_0x1599fb;_0x4a4739[_0x1b4557(0x12d)]();const _0x39fde5=document[_0x1b4557(0x183)]('selected-user-id')['value'],_0x520364=document['getElementById'](_0x1b4557(0x249))['value'],_0x44c418=document['getElementById']('award-reason')['value']['trim']();if(!_0x39fde5||!_0x520364){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document[_0x1b4557(0x183)]('award-item-form')[_0x1b4557(0x19d)]();}catch(_0x4c459f){console[_0x1b4557(0xfe)]('Error\x20awarding\x20item:',_0x4c459f),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x4c459f[_0x1b4557(0x19e)],'error');}}async function loadUserPointsHistory(_0x573a20){const _0x5b4585=a2_0x1599fb;try{const _0x348605=collection(db,_0x5b4585(0x11c)),_0x49d4ef=query(_0x348605,where(_0x5b4585(0x106),'==',_0x573a20),orderBy('timestamp','desc')),_0x135513=await getDocs(_0x49d4ef);console['log'](_0x5b4585(0x2f3)+_0x135513[_0x5b4585(0x12e)]+'\x20history\x20entries\x20for\x20user\x20'+_0x573a20),showNotification(_0x5b4585(0x263)+_0x135513[_0x5b4585(0x12e)]+_0x5b4585(0x10d),'info');}catch(_0x2e942e){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x2e942e),showNotification('Failed\x20to\x20load\x20user\x20history',_0x5b4585(0xfe));}}async function initializeUserPointsField(){const _0x215e99=a2_0x1599fb;try{console[_0x215e99(0x1a0)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x586062=collection(db,'userProfiles'),_0x5281bd=await getDocs(_0x586062);if(_0x5281bd[_0x215e99(0x233)]){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x15abda=0x0,_0x26cac7=0x0;const _0x2bd7e8=writeBatch(db);let _0x518dc5=0x0;return console['log'](_0x215e99(0x2f3)+_0x5281bd['size']+'\x20users\x20to\x20check...'),_0x5281bd['forEach'](_0x4ad126=>{const _0x51cddf=_0x215e99,_0x56189f=_0x4ad126['data']();_0x56189f['points']===undefined||_0x56189f['points']===null?(_0x2bd7e8[_0x51cddf(0x124)](_0x4ad126['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x15abda++,_0x518dc5++,console['log']('Queued\x20'+(_0x56189f[_0x51cddf(0x223)]||_0x56189f['username']||_0x56189f['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x26cac7++,console['log']((_0x56189f[_0x51cddf(0x223)]||_0x56189f[_0x51cddf(0x271)]||_0x56189f[_0x51cddf(0x163)]||'Unknown')+_0x51cddf(0x19b)+_0x56189f['points'])),_0x518dc5>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x15abda>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x15abda+'\x20users...'),await _0x2bd7e8[_0x215e99(0x280)](),console['log'](_0x215e99(0x100)+_0x15abda+'\x20users')):console['log'](_0x215e99(0x1c5)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x5281bd[_0x215e99(0x12e)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x15abda+_0x215e99(0xf0)+_0x26cac7),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x15abda+'\x20users.\x20'+_0x26cac7+'\x20users\x20already\x20had\x20points.','success'),window[_0x215e99(0x2db)]&&loadPointsOverview(),{'totalUsers':_0x5281bd[_0x215e99(0x12e)],'usersUpdated':_0x15abda,'usersAlreadyHadPoints':_0x26cac7};}catch(_0x12a911){console['error']('Error\x20initializing\x20points\x20field:',_0x12a911),showNotification('Error\x20initializing\x20points:\x20'+_0x12a911[_0x215e99(0x19e)],'error');throw _0x12a911;}}function addPointsMigrationButton(){const _0x164df6=a2_0x1599fb,_0x1c8963=document['getElementById']('manage-points');if(!_0x1c8963)return;if(document[_0x164df6(0x183)]('migrate-points-btn'))return;const _0x304d54=document['createElement']('div');_0x304d54[_0x164df6(0x284)]=_0x164df6(0x178),_0x304d54['style']['marginBottom']='20px',_0x304d54['style']['padding']='15px',_0x304d54[_0x164df6(0xe5)]['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x304d54[_0x164df6(0xe5)]['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x304d54['style']['borderRadius']='5px',_0x304d54[_0x164df6(0x1ed)]=_0x164df6(0x2c6);const _0x38d1b4=_0x1c8963[_0x164df6(0x14f)]('.section-header');_0x38d1b4&&_0x38d1b4['insertAdjacentElement']('afterend',_0x304d54),document[_0x164df6(0x183)](_0x164df6(0x1b0))[_0x164df6(0x2e8)]('click',async function(){const _0x1cf1b2=_0x164df6;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x1cf1b2(0x1ed)]='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x11ee8c=_0x1cf1b2;_0x304d54[_0x11ee8c(0xe5)]['display']='none';},0xbb8);}catch(_0x5b1390){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x1cf1b2(0x2e7)]=![];}}});}function setupManagePointsSection(){const _0x2af330=a2_0x1599fb;console['log'](_0x2af330(0x1bf)),addPointsMigrationButton();const _0x460a54=document['getElementById']('points-user-search');_0x460a54&&_0x460a54['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x57e9ed=document['getElementById']('modify-points-form');_0x57e9ed&&_0x57e9ed['addEventListener']('submit',handleModifyPoints);const _0x41e042=document[_0x2af330(0x183)](_0x2af330(0x27b));_0x41e042&&_0x41e042['addEventListener'](_0x2af330(0x1d9),handleAwardItem);const _0x402416=document[_0x2af330(0x183)]('points-overview-search');_0x402416&&_0x402416['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x88b1=document['getElementById']('points-sort-order');_0x88b1&&_0x88b1['addEventListener']('change',sortPointsOverview);const _0x1cbbf6=document[_0x2af330(0x183)]('refresh-points-overview');_0x1cbbf6&&_0x1cbbf6[_0x2af330(0x2e8)]('click',loadPointsOverview);const _0x2dd05b=document['getElementById']('bulk-award-points-btn');_0x2dd05b&&_0x2dd05b[_0x2af330(0x2e8)]('click',async()=>{const _0x4cebc2=_0x2af330;confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x2dd05b['disabled']=!![],_0x2dd05b[_0x4cebc2(0x1ed)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x39ab9d(),_0x2dd05b[_0x4cebc2(0x2e7)]=![],_0x2dd05b['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0xdf8d81=document['getElementById']('award-all-pilots-btn');_0xdf8d81&&_0xdf8d81['addEventListener'](_0x2af330(0x2d5),awardPointsToAllPilots);async function _0x39ab9d(){const _0x30d8d4=_0x2af330;try{showNotification(_0x30d8d4(0x167),'info');const _0x329363={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'≥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x21e0b3=0x0,_0x3e5474=0x0,_0x2eea50=0x0,_0x4852a6=0x0,_0x1b4270=0x0,_0x48808e=0x0;const _0xea90ca=new Set(),_0x2c96ee=collection(db,_0x30d8d4(0x11c)),_0x2f8f1f=query(_0x2c96ee,where('reason','>=',_0x30d8d4(0x2ba)),where(_0x30d8d4(0x2cf),'<=',_0x30d8d4(0xd5))),_0x204db8=await getDocs(_0x2f8f1f);_0x204db8[_0x30d8d4(0x2a0)](_0x51b721=>{const _0x58c9cb=_0x30d8d4,_0x12582f=_0x51b721['data'](),_0x357a13=_0x12582f['reason']||'',_0x254b05=_0x357a13['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x254b05&&_0x254b05[0x1]&&_0xea90ca[_0x58c9cb(0x153)](_0x254b05[0x1]);}),console['log']('Found\x20'+_0xea90ca['size']+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x40e4f0,_0x20e645,_0xc608e3]=await Promise['all']([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0x19e0c5=_0x40e4f0['size']+_0x20e645['size']+_0xc608e3['size'];showNotification('Found\x20'+_0x19e0c5+'\x20total\x20matches\x20across\x20all\x20ladders',_0x30d8d4(0x182));const _0x38f271=async(_0x1b7b33,_0x9ce643)=>{const _0x29b75a=_0x30d8d4;let _0x97c091=writeBatch(db);const _0x3a680c=[];let _0x50e618=0x0;for(const _0x1d42f4 of _0x1b7b33[_0x29b75a(0x1ae)]){try{if(_0xea90ca['has'](_0x1d42f4['id'])){if(_0x9ce643==='D1')_0x48808e++;if(_0x9ce643==='D2')_0x48808e++;if(_0x9ce643==='D3')_0x48808e++;continue;}const _0x4c0f64=_0x1d42f4['data'](),_0x576d12=_0x4c0f64['subgameType']||'Standard',_0xe5d069=_0x329363[_0x576d12]||0xa;let _0x545cfb=_0x4c0f64[_0x29b75a(0x115)];if(!_0x545cfb&&_0x4c0f64[_0x29b75a(0x20b)]){const [_0x1f9984,_0x42eb44,_0x46b2cc]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x4c0f64['winnerUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x4c0f64[_0x29b75a(0x20b)]))),getDocs(query(collection(db,_0x29b75a(0xd9)),where(_0x29b75a(0x271),'==',_0x4c0f64['winnerUsername'])))]);if(!_0x1f9984['empty'])_0x545cfb=_0x1f9984['docs'][0x0]['id'];else{if(!_0x42eb44['empty'])_0x545cfb=_0x42eb44['docs'][0x0]['id'];else{if(!_0x46b2cc['empty'])_0x545cfb=_0x46b2cc['docs'][0x0]['id'];}}}let _0x4bb4fb=_0x4c0f64[_0x29b75a(0x1b5)];if(!_0x4bb4fb&&_0x4c0f64['loserUsername']){const [_0x50bc7d,_0x3fb5b9,_0x173573]=await Promise['all']([getDocs(query(collection(db,_0x29b75a(0x1f6)),where('username','==',_0x4c0f64['loserUsername']))),getDocs(query(collection(db,_0x29b75a(0x25a)),where(_0x29b75a(0x271),'==',_0x4c0f64['loserUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x4c0f64['loserUsername'])))]);if(!_0x50bc7d[_0x29b75a(0x233)])_0x4bb4fb=_0x50bc7d['docs'][0x0]['id'];else{if(!_0x3fb5b9['empty'])_0x4bb4fb=_0x3fb5b9[_0x29b75a(0x1ae)][0x0]['id'];else{if(!_0x173573[_0x29b75a(0x233)])_0x4bb4fb=_0x173573['docs'][0x0]['id'];}}}if(_0x545cfb&&_0x4bb4fb){const _0x317733=doc(db,'userProfiles',_0x545cfb),_0x4a5a9c=doc(db,'userProfiles',_0x4bb4fb),[_0x288a1e,_0x586f7c]=await Promise['all']([getDoc(_0x317733),getDoc(_0x4a5a9c)]);if(_0x288a1e['exists']()){const _0x1142e4=_0x288a1e['data'](),_0x3ffa9d=_0x1142e4[_0x29b75a(0xe2)]||0x0;_0x97c091['update'](_0x317733,{'points':_0x3ffa9d+_0xe5d069,'lastPointsModified':serverTimestamp()}),_0x3a680c['push']({'userId':_0x545cfb,'userEmail':_0x1142e4['email']||'unknown','displayName':_0x1142e4['displayName']||_0x4c0f64['winnerUsername']||'Unknown\x20User','action':_0x29b75a(0x153),'amount':_0xe5d069,'previousPoints':_0x3ffa9d,'newPoints':_0x3ffa9d+_0xe5d069,'reason':'Bulk\x20award:\x20'+_0x576d12+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x1d42f4['id']+_0x29b75a(0x23b)+_0x9ce643,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}if(_0x586f7c['exists']()){const _0x5efed6=_0x586f7c['data'](),_0x3fb61a=_0x5efed6['points']||0x0;_0x97c091[_0x29b75a(0x124)](_0x4a5a9c,{'points':_0x3fb61a+_0xe5d069,'lastPointsModified':serverTimestamp()}),_0x3a680c['push']({'userId':_0x4bb4fb,'userEmail':_0x5efed6['email']||_0x29b75a(0x21c),'displayName':_0x5efed6['displayName']||_0x4c0f64[_0x29b75a(0x2e1)]||'Unknown\x20User','action':'add','amount':_0xe5d069,'previousPoints':_0x3fb61a,'newPoints':_0x3fb61a+_0xe5d069,'reason':'Bulk\x20award:\x20'+_0x576d12+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x1d42f4['id']+_0x29b75a(0x23b)+_0x9ce643,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x4852a6+=_0xe5d069*0x2,_0x50e618+=0x2,_0xea90ca[_0x29b75a(0x153)](_0x1d42f4['id']);if(_0x50e618>=0x190){await _0x97c091['commit']();for(const _0x269974 of _0x3a680c){await addDoc(collection(db,_0x29b75a(0x11c)),_0x269974);}_0x97c091=writeBatch(db),_0x50e618=0x0,_0x3a680c[_0x29b75a(0x298)]=0x0;}}}catch(_0x447112){console[_0x29b75a(0xfe)](_0x29b75a(0x269)+_0x9ce643+'\x20match\x20'+_0x1d42f4['id']+':',_0x447112),_0x1b4270++;}}if(_0x50e618>0x0){await _0x97c091['commit']();for(const _0x4168ea of _0x3a680c){await addDoc(collection(db,'pointsHistory'),_0x4168ea);}}return{'processed':_0x9ce643==='D1'?_0x21e0b3:_0x9ce643==='D2'?_0x3e5474:_0x2eea50};};await _0x38f271(_0x40e4f0,'D1'),await _0x38f271(_0x20e645,'D2'),await _0x38f271(_0xc608e3,'D3'),showNotification('Completed!\x20Processed\x20'+_0x21e0b3+'\x20D1\x20matches,\x20'+_0x3e5474+'\x20D2\x20matches,\x20'+_0x2eea50+'\x20D3\x20matches.\x20'+(_0x30d8d4(0x134)+_0x4852a6+'\x20points.\x20Skipped\x20'+_0x48808e+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x1b4270),_0x30d8d4(0xca)),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x4d25e7){console[_0x30d8d4(0xfe)]('Error\x20in\x20bulk\x20award\x20points:',_0x4d25e7),showNotification(_0x30d8d4(0x237)+_0x4d25e7['message'],'error');}}const _0x27cb25=document['getElementById']('quick-edit-points-modal');if(_0x27cb25){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x2b2581=_0x27cb25[_0x2af330(0x14f)](_0x2af330(0x2bb));_0x2b2581?_0x2b2581['addEventListener'](_0x2af330(0x2d5),function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x2af330(0x154));const _0x3a1076=document[_0x2af330(0x183)]('cancel-quick-edit');_0x3a1076?_0x3a1076['addEventListener']('click',function(){const _0x4945a2=_0x2af330;console['log'](_0x4945a2(0x22f)),closeQuickEditModal();}):console['warn'](_0x2af330(0x234));const _0x237946=document[_0x2af330(0x183)](_0x2af330(0x304));_0x237946?_0x237946['addEventListener']('submit',function(_0x4c3b2a){const _0x4baffc=_0x2af330;console['log'](_0x4baffc(0x2b9)),handleQuickEditPoints(_0x4c3b2a);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x27cb25[_0x2af330(0x2e8)]('click',function(_0x23541d){const _0x1631e0=_0x2af330;_0x23541d['target']===_0x27cb25&&(console['log'](_0x1631e0(0x2c1)),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x98d0ee=a2_0x1599fb;try{const _0x4f1b40=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x4f1b40||isNaN(_0x4f1b40)){showNotification('Invalid\x20points\x20amount',_0x98d0ee(0xfe));return;}if(!confirm(_0x98d0ee(0x11d)+_0x4f1b40+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification('Starting\x20points\x20award\x20process...','info');const [_0x2fa1c9,_0x4c6fb7,_0x174b54]=await Promise['all']([getDocs(collection(db,_0x98d0ee(0x1f6))),getDocs(collection(db,_0x98d0ee(0x25a))),getDocs(collection(db,'playersD3'))]);console[_0x98d0ee(0x1a0)](_0x98d0ee(0x2f3)+_0x2fa1c9['size']+'\x20D1\x20pilots,\x20'+_0x4c6fb7['size']+'\x20D2\x20pilots,\x20'+_0x174b54['size']+_0x98d0ee(0x13c));const _0x226a9a=_0x2fa1c9['size']+_0x4c6fb7['size']+_0x174b54[_0x98d0ee(0x12e)],_0x32ed73=new Map();_0x2fa1c9['forEach'](_0x611cdd=>{const _0x63d1f4=_0x98d0ee,_0x30305f=_0x611cdd[_0x63d1f4(0x1ec)]();_0x32ed73[_0x63d1f4(0x1f0)](_0x611cdd['id'],{'username':_0x30305f['username'],'ladder':'D1'});}),_0x4c6fb7[_0x98d0ee(0x2a0)](_0x2ccf79=>{const _0xcb1f2a=_0x2ccf79['data']();_0x32ed73['set'](_0x2ccf79['id'],{'username':_0xcb1f2a['username'],'ladder':'D2'});}),_0x174b54[_0x98d0ee(0x2a0)](_0x5cb2fa=>{const _0x2c09e3=_0x98d0ee,_0x142c6d=_0x5cb2fa[_0x2c09e3(0x1ec)]();_0x32ed73['set'](_0x5cb2fa['id'],{'username':_0x142c6d['username'],'ladder':'D3'});}),console['log'](_0x98d0ee(0x2f3)+_0x32ed73[_0x98d0ee(0x12e)]+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x1918e1=0x0,_0x5931e6=0x0,_0x2c21fd=0x0;const _0x6b6532=Array['from'](_0x32ed73[_0x98d0ee(0x229)]()),_0x4223c8=0x190;for(let _0x3ac9ef=0x0;_0x3ac9ef<_0x6b6532[_0x98d0ee(0x298)];_0x3ac9ef+=_0x4223c8){const _0x40ec1c=writeBatch(db),_0x53d068=[],_0x4cc53b=_0x6b6532['slice'](_0x3ac9ef,_0x3ac9ef+_0x4223c8),_0x13039e=await Promise[_0x98d0ee(0xdf)](_0x4cc53b['map'](_0x47eb25=>getDoc(doc(db,'userProfiles',_0x47eb25))));for(let _0x16d212=0x0;_0x16d212<_0x4cc53b[_0x98d0ee(0x298)];_0x16d212++){try{const _0x11e281=_0x4cc53b[_0x16d212],_0x3bb8d5=_0x32ed73['get'](_0x11e281),_0x13f193=_0x13039e[_0x16d212];if(_0x13f193[_0x98d0ee(0x1ac)]()){const _0x34d84a=_0x13f193['data'](),_0x298377=_0x34d84a['points']||0x0,_0x211573=_0x298377+_0x4f1b40;_0x40ec1c[_0x98d0ee(0x124)](doc(db,'userProfiles',_0x11e281),{'points':_0x211573,'lastPointsModified':serverTimestamp()}),_0x53d068['push']({'userId':_0x11e281,'userEmail':_0x34d84a['email']||'unknown','displayName':_0x34d84a['displayName']||_0x3bb8d5['username']||'Unknown\x20User','action':'add','amount':_0x4f1b40,'previousPoints':_0x298377,'newPoints':_0x211573,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x3bb8d5['ladder']+')','adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()}),_0x5931e6+=_0x4f1b40,_0x1918e1++;}else _0x2c21fd++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x3bb8d5[_0x98d0ee(0x271)]+'\x20('+_0x11e281+')');}catch(_0x278f54){_0x2c21fd++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.[_0x98d0ee(0x271)]+':',_0x278f54);}}await _0x40ec1c['commit']();for(const _0x4220dc of _0x53d068){await addDoc(collection(db,_0x98d0ee(0x11c)),_0x4220dc);}showNotification(_0x98d0ee(0x12a)+_0x1918e1+'/'+_0x226a9a+_0x98d0ee(0x219),'info');}showNotification('Complete!\x20Awarded\x20'+_0x5931e6+'\x20points\x20to\x20'+_0x1918e1+'\x20pilots.\x20Errors:\x20'+_0x2c21fd,_0x98d0ee(0xca)),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x4991cb){console['error']('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x4991cb),showNotification('Error:\x20'+_0x4991cb[_0x98d0ee(0x19e)],'error');}}function setupManageRibbonsSection(){const _0x7891b8=a2_0x1599fb;console[_0x7891b8(0x1a0)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x51f0f2=document[_0x7891b8(0x183)]('ribbon-user-search');_0x51f0f2&&_0x51f0f2['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x1cd58a=document['getElementById']('search-ribbon-user-btn');_0x1cd58a&&_0x1cd58a['addEventListener']('click',searchRibbonUser);const _0x437ff3=document['getElementById']('add-ribbon-form');_0x437ff3&&_0x437ff3[_0x7891b8(0x2e8)]('submit',addRibbon),_0x51f0f2&&_0x51f0f2['addEventListener'](_0x7891b8(0x246),function(_0x363a3d){const _0x36b359=_0x7891b8;_0x363a3d[_0x36b359(0x188)]===_0x36b359(0x2c3)&&(_0x363a3d['preventDefault'](),searchRibbonUser());}),console[_0x7891b8(0x1a0)](_0x7891b8(0x1c1));}async function modifyUserPoints(_0x494b84,_0x320671,_0x4bcbe9,_0x1a8054=''){const _0x46997d=a2_0x1599fb,_0x29d579=doc(db,'userProfiles',_0x494b84),_0xbe60a8=await getDoc(_0x29d579);if(!_0xbe60a8[_0x46997d(0x1ac)]())throw new Error('User\x20not\x20found');const _0x22ce2d=_0xbe60a8['data'](),_0x45504c=_0x22ce2d[_0x46997d(0xe2)]!==undefined?_0x22ce2d['points']:0x0;_0x22ce2d['points']===undefined&&(console[_0x46997d(0x1a0)]('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x22ce2d['displayName']||_0x22ce2d['email']||'Unknown')),await updateDoc(_0x29d579,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x307472=_0x45504c;switch(_0x320671){case _0x46997d(0x153):_0x307472=_0x45504c+_0x4bcbe9;break;case'subtract':_0x307472=Math[_0x46997d(0x285)](0x0,_0x45504c-_0x4bcbe9);break;case'set':_0x307472=_0x4bcbe9;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x29d579,{'points':_0x307472,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x494b84,'userEmail':_0x22ce2d['email']||'unknown','displayName':_0x22ce2d[_0x46997d(0x223)]||_0x22ce2d['username']||'Unknown\x20User','action':_0x320671,'amount':_0x4bcbe9,'previousPoints':_0x45504c,'newPoints':_0x307472,'reason':_0x1a8054,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x3ade81=a2_0x1599fb,_0xed3ce8=document['getElementById']('points-overview-table-body');if(!_0xed3ce8)return;_0xed3ce8['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x1762a6=collection(db,'userProfiles'),_0x5cbe1c=await getDocs(_0x1762a6);if(_0x5cbe1c['empty']){_0xed3ce8['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x216927=[];let _0x5ea4fc=0x0;_0x5cbe1c[_0x3ade81(0x2a0)](_0x524332=>{const _0x2e813a=_0x3ade81,_0xcddf33=_0x524332[_0x2e813a(0x1ec)](),_0x531c4f=_0xcddf33[_0x2e813a(0xe2)]!==undefined?_0xcddf33['points']:0x0;_0xcddf33['points']===undefined&&_0x5ea4fc++,_0x216927[_0x2e813a(0x2c7)]({'id':_0x524332['id'],..._0xcddf33,'points':_0x531c4f});}),_0x5ea4fc>0x0&&(console[_0x3ade81(0x1a0)]('Found\x20'+_0x5ea4fc+_0x3ade81(0x26e)),showNotification(_0x5ea4fc+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x216927[_0x3ade81(0x247)]((_0x16f084,_0x550d44)=>(_0x550d44['points']||0x0)-(_0x16f084['points']||0x0)),window[_0x3ade81(0x2db)]=_0x216927,renderPointsOverview(_0x216927);}catch(_0x531c4d){console[_0x3ade81(0xfe)](_0x3ade81(0xf8),_0x531c4d),_0xed3ce8['innerHTML']=_0x3ade81(0x1c6)+_0x531c4d[_0x3ade81(0x19e)]+'</td></tr>';}}async function loadRibbonsData(){const _0x298443=a2_0x1599fb,_0x12a14e=document[_0x298443(0x183)]('ribbons-overview-table-body');if(!_0x12a14e)return;_0x12a14e[_0x298443(0x1ed)]=_0x298443(0x1bb);try{const [_0x44d479,_0x468f7e,_0x5976c0]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x298443(0xd3))),getDocs(collection(db,'playerRibbonsD3'))]);_0x12a14e[_0x298443(0x1ed)]='';const _0x1bb005=(_0x5787a0,_0x370c4b)=>{_0x5787a0['forEach'](_0x3217de=>{const _0x377d2b=a2_0x1f64,_0x1b4dd1=_0x3217de['data'](),_0x408d9f=_0x1b4dd1[_0x377d2b(0x294)]||{},_0x22fcf1=Object['keys'](_0x408d9f)['length'],_0x276304=document['createElement']('tr');_0x276304[_0x377d2b(0x1ed)]=_0x377d2b(0x2a3)+(_0x1b4dd1['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x370c4b['toLowerCase']()+'\x22>'+_0x370c4b+_0x377d2b(0x13f)+_0x22fcf1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1b4dd1['lastUpdated']?new Date(_0x1b4dd1['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():_0x377d2b(0x104))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x1b4dd1['username']+'\x22\x20data-ladder=\x22'+_0x370c4b+_0x377d2b(0xdd),_0x12a14e['appendChild'](_0x276304);});};_0x1bb005(_0x44d479,'D1'),_0x1bb005(_0x468f7e,'D2'),_0x1bb005(_0x5976c0,'D3'),document[_0x298443(0x136)]('.edit-ribbons-btn')['forEach'](_0x248832=>{_0x248832['addEventListener']('click',function(){const _0x31806e=a2_0x1f64,_0x4c04c4=this['dataset'][_0x31806e(0x271)],_0x567448=this[_0x31806e(0x1c3)]['ladder'];editUserRibbons(_0x4c04c4,_0x567448);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x5399b4){console['error']('Error\x20loading\x20ribbons:',_0x5399b4),_0x12a14e[_0x298443(0x1ed)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x3b2852=a2_0x1599fb,_0x3729d4=document[_0x3b2852(0x183)]('ribbon-user-search')['value']['trim']();if(!_0x3729d4){showNotification(_0x3b2852(0x103),'error');return;}try{const [_0x764638,_0x1a8782,_0x14d9a2]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x3729d4)),getDoc(doc(db,_0x3b2852(0xd3),_0x3729d4)),getDoc(doc(db,_0x3b2852(0x143),_0x3729d4))]);let _0x6e831b=null,_0x16f38d=null;if(_0x764638['exists']())_0x6e831b='D1',_0x16f38d=_0x764638['data']();else{if(_0x1a8782['exists']())_0x6e831b='D2',_0x16f38d=_0x1a8782[_0x3b2852(0x1ec)]();else _0x14d9a2['exists']()&&(_0x6e831b='D3',_0x16f38d=_0x14d9a2['data']());}_0x6e831b?(document[_0x3b2852(0x183)]('current-ribbon-user')['textContent']=_0x3729d4,document['getElementById']('ribbon-target-user')['value']=_0x3729d4,document[_0x3b2852(0x183)](_0x3b2852(0x15a))[_0x3b2852(0x2a7)]=_0x6e831b,document[_0x3b2852(0x183)]('user-ribbon-management')[_0x3b2852(0xe5)]['display']='block',displayCurrentRibbons(_0x16f38d['ribbons']||{}),showNotification('Found\x20'+_0x3729d4+'\x20in\x20'+_0x6e831b+_0x3b2852(0x1aa),'success')):showNotification('User\x20'+_0x3729d4+'\x20not\x20found\x20in\x20any\x20ladder',_0x3b2852(0xfe));}catch(_0x5f4281){console['error']('Error\x20searching\x20user:',_0x5f4281),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x4533e3){const _0x2adc31=a2_0x1599fb,_0x3da846=document['getElementById']('current-ribbons-list');if(!_0x3da846)return;_0x3da846['innerHTML']='';if(Object['keys'](_0x4533e3)[_0x2adc31(0x298)]===0x0){_0x3da846['innerHTML']=_0x2adc31(0x2c9);return;}Object[_0x2adc31(0xf3)](_0x4533e3)['forEach'](([_0x350484,_0x292d94])=>{const _0x29f500=_0x2adc31,_0x5e498b=document['createElement']('div');_0x5e498b['className']='ribbon-item',_0x5e498b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x350484+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x292d94['level']||0x1)+_0x29f500(0x24b)+(_0x292d94['awardedAt']?new Date(_0x292d94[_0x29f500(0x235)][_0x29f500(0x2cb)]*0x3e8)['toLocaleDateString']():_0x29f500(0x104))+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x350484+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3da846['appendChild'](_0x5e498b);}),document[_0x2adc31(0x136)]('.remove-ribbon-btn')[_0x2adc31(0x2a0)](_0x452330=>{const _0x117e65=_0x2adc31;_0x452330[_0x117e65(0x2e8)](_0x117e65(0x2d5),function(){const _0x5903bc=this['dataset']['ribbon'];removeRibbon(_0x5903bc);});});}async function addRibbon(_0x30b0de){const _0x57eaf1=a2_0x1599fb;_0x30b0de['preventDefault']();const _0x321166=document[_0x57eaf1(0x183)]('ribbon-target-user')['value'],_0xcdac04=document['getElementById']('ribbon-target-ladder')[_0x57eaf1(0x2a7)],_0x5ceef3=document['getElementById']('ribbon-type-select')['value'],_0x377cb0=parseInt(document['getElementById']('ribbon-level')[_0x57eaf1(0x2a7)]);if(!_0x321166||!_0xcdac04||!_0x5ceef3||!_0x377cb0){showNotification('Please\x20fill\x20all\x20fields',_0x57eaf1(0xfe));return;}try{const _0xf5b1c5='playerRibbons'+(_0xcdac04==='D1'?'':_0xcdac04),_0x12b09c=doc(db,_0xf5b1c5,_0x321166),_0x26918f=await getDoc(_0x12b09c),_0x220c71=_0x26918f['exists']()?_0x26918f['data']()['ribbons']||{}:{};_0x220c71[_0x5ceef3]={'level':_0x377cb0,'awardedAt':serverTimestamp()},await setDoc(_0x12b09c,{'username':_0x321166,'ladder':_0xcdac04,'ribbons':_0x220c71,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x57eaf1(0xe0)+_0x5ceef3+'\x20Level\x20'+_0x377cb0+'\x20to\x20'+_0x321166,'success'),displayCurrentRibbons(_0x220c71),document[_0x57eaf1(0x183)]('ribbon-type-select')['value']='',document[_0x57eaf1(0x183)]('ribbon-level')[_0x57eaf1(0x2a7)]='1';}catch(_0x5d36cb){console[_0x57eaf1(0xfe)]('Error\x20adding\x20ribbon:',_0x5d36cb),showNotification('Error\x20adding\x20ribbon',_0x57eaf1(0xfe));}}async function removeRibbon(_0x50beb2){const _0x27f6e8=a2_0x1599fb,_0x18c5d7=document[_0x27f6e8(0x183)](_0x27f6e8(0x1ad))['value'],_0x2d797b=document['getElementById']('ribbon-target-ladder')[_0x27f6e8(0x2a7)];if(!confirm('Remove\x20'+_0x50beb2+'\x20from\x20'+_0x18c5d7+'?'))return;try{const _0x3ba1ee='playerRibbons'+(_0x2d797b==='D1'?'':_0x2d797b),_0x844b90=doc(db,_0x3ba1ee,_0x18c5d7),_0xe1cd79=await getDoc(_0x844b90),_0x1b1564=_0xe1cd79['exists']()?_0xe1cd79['data']()['ribbons']||{}:{};delete _0x1b1564[_0x50beb2],await setDoc(_0x844b90,{'username':_0x18c5d7,'ladder':_0x2d797b,'ribbons':_0x1b1564,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x50beb2+_0x27f6e8(0x1ba)+_0x18c5d7,'success'),displayCurrentRibbons(_0x1b1564);}catch(_0x3fdbf8){console[_0x27f6e8(0xfe)]('Error\x20removing\x20ribbon:',_0x3fdbf8),showNotification('Error\x20removing\x20ribbon',_0x27f6e8(0xfe));}}function editUserRibbons(_0x5e564a,_0x34289d){const _0x4ad66e=a2_0x1599fb;document[_0x4ad66e(0x183)]('ribbon-user-search')['value']=_0x5e564a,searchRibbonUser();}