const a0_0x34a2a3=a0_0x5ce8;(function(_0x447412,_0x54d6d6){const _0x4cf675=a0_0x5ce8,_0x567311=_0x447412();while(!![]){try{const _0x5c325f=-parseInt(_0x4cf675(0x24e))/0x1+parseInt(_0x4cf675(0x359))/0x2+-parseInt(_0x4cf675(0x2e4))/0x3*(-parseInt(_0x4cf675(0x2ae))/0x4)+-parseInt(_0x4cf675(0x30b))/0x5+parseInt(_0x4cf675(0x392))/0x6*(-parseInt(_0x4cf675(0x1ef))/0x7)+-parseInt(_0x4cf675(0x397))/0x8+parseInt(_0x4cf675(0x390))/0x9*(parseInt(_0x4cf675(0x3b2))/0xa);if(_0x5c325f===_0x54d6d6)break;else _0x567311['push'](_0x567311['shift']());}catch(_0x5bc614){_0x567311['push'](_0x567311['shift']());}}}(a0_0x1666,0xb616d));const a0_0x47552d=(function(){let _0x1b234a=!![];return function(_0x1a021d,_0x4e1a49){const _0x4b7b34=_0x1b234a?function(){if(_0x4e1a49){const _0x43110b=_0x4e1a49['apply'](_0x1a021d,arguments);return _0x4e1a49=null,_0x43110b;}}:function(){};return _0x1b234a=![],_0x4b7b34;};}()),a0_0x552f7e=a0_0x47552d(this,function(){const _0x4b75e7=a0_0x5ce8,_0x2c2e23=function(){const _0x4f6aa2=a0_0x5ce8;let _0x3c9d77;try{_0x3c9d77=Function(_0x4f6aa2(0x1c8)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5bb36c){_0x3c9d77=window;}return _0x3c9d77;},_0x31f2e8=_0x2c2e23(),_0xcd01f7=_0x31f2e8['console']=_0x31f2e8['console']||{},_0x573966=['log','warn','info','error','exception','table','trace'];for(let _0x31e0f9=0x0;_0x31e0f9<_0x573966[_0x4b75e7(0x2d4)];_0x31e0f9++){const _0xfe4443=a0_0x47552d['constructor'][_0x4b75e7(0x221)]['bind'](a0_0x47552d),_0x534710=_0x573966[_0x31e0f9],_0x33844a=_0xcd01f7[_0x534710]||_0xfe4443;_0xfe4443['__proto__']=a0_0x47552d['bind'](a0_0x47552d),_0xfe4443['toString']=_0x33844a['toString'][_0x4b75e7(0x188)](_0x33844a),_0xcd01f7[_0x534710]=_0xfe4443;}});a0_0x552f7e();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x3b6573){const _0x50012e=a0_0x5ce8;if(!_0x3b6573)return _0x50012e(0x273);_0x3b6573=_0x3b6573['replace']('#','');_0x3b6573['length']===0x3&&(_0x3b6573=_0x3b6573['split']('')[_0x50012e(0x3b4)](_0x4fd968=>_0x4fd968+_0x4fd968)['join'](''));if(_0x3b6573['length']!==0x6)return _0x50012e(0x273);const _0x2d5155=parseInt(_0x3b6573[_0x50012e(0x168)](0x0,0x2),0x10),_0x3817f7=parseInt(_0x3b6573['substring'](0x2,0x4),0x10),_0x199568=parseInt(_0x3b6573['substring'](0x4,0x6),0x10),_0x593994=(_0x2d5155*0x12b+_0x3817f7*0x24b+_0x199568*0x72)/0x3e8;return _0x593994>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a0_0x34a2a3(0x211)]('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x5d4161=>{const _0x55211f=a0_0x5ce8;if(!_0x5d4161){window[_0x55211f(0x29c)]['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x574298){console[_0x55211f(0x27f)](_0x55211f(0x26c),_0x574298),showNotification('Error\x20setting\x20up\x20admin\x20dashboard',_0x55211f(0x27f));}});});async function getUserTabPermissions(_0xabc33c){const _0x40e835=a0_0x34a2a3;if(!_0xabc33c)return['dashboard'];console['log'](_0x40e835(0x2df)+_0xabc33c+'\x20in\x20all\x20collections...');const _0x31a87b=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':_0x40e835(0x1f8)},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':_0x40e835(0x3b0)}],_0x276f24=auth['currentUser'];let _0x589f05=null,_0x5dea0b=null;for(const _0xb3e0fc of _0x31a87b){try{if(_0x276f24){const _0x138578=doc(db,_0xb3e0fc['name'],_0x276f24['uid']),_0x3e2485=await getDoc(_0x138578);if(_0x3e2485['exists']()){const _0x2bac94=_0x3e2485['data']();console['log']('Found\x20user\x20in\x20'+_0xb3e0fc['displayName']+'\x20by\x20UID:',_0x2bac94);const _0x174809=(_0x2bac94[_0x40e835(0x2c2)]||_0x2bac94['role']||'')['toLowerCase']();if(_0x174809&&_0x174809!=='none'){_0x589f05=_0x174809,_0x5dea0b=_0xb3e0fc['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x589f05+_0x40e835(0x314)+_0x5dea0b);break;}}}if(!_0x589f05){const _0x5acf23=collection(db,_0xb3e0fc[_0x40e835(0x333)]),_0x509729=query(_0x5acf23,where('email','==',_0xabc33c)),_0x4a6967=await getDocs(_0x509729);if(!_0x4a6967['empty']){const _0x5d5352=_0x4a6967['docs'][0x0][_0x40e835(0x1cc)]();console['log'](_0x40e835(0x299)+_0xb3e0fc['displayName']+'\x20with\x20email\x20'+_0xabc33c+':',_0x5d5352);const _0x2e5deb=(_0x5d5352['roleName']||_0x5d5352[_0x40e835(0x293)]||'')['toLowerCase']();if(_0x2e5deb&&_0x2e5deb!=='none'){_0x589f05=_0x2e5deb,_0x5dea0b=_0xb3e0fc[_0x40e835(0x2bd)],console['log'](_0x40e835(0x3be)+_0x589f05+'\x20in\x20'+_0x5dea0b);break;}}}}catch(_0x55d995){console['error']('Error\x20checking\x20'+_0xb3e0fc['displayName']+':',_0x55d995);}}if(_0x589f05){console[_0x40e835(0x3bb)]('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x589f05+'\x20(from\x20'+_0x5dea0b+')');const _0x3e4c17={'admin':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks',_0x40e835(0x267),_0x40e835(0x28d),_0x40e835(0x316),'elo-history',_0x40e835(0x349),'user-roles-section','manage-matches','manage-points',_0x40e835(0x247),'manage-ribbons'],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies',_0x40e835(0x356),'inactive-players','settings','manage-trophies','elo-history','manage-highlights',_0x40e835(0x328),'manage-matches','manage-points',_0x40e835(0x247),'manage-ribbons'],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles','manage-trophies',_0x40e835(0x1e3),_0x40e835(0x349)]};if(_0x3e4c17[_0x589f05])return console['log'](_0x40e835(0x179)+_0x589f05+'\x27\x20has\x20permissions:',_0x3e4c17[_0x589f05]),_0x3e4c17[_0x589f05];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0xabc33c+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x524084=[]){const _0x21c928=a0_0x34a2a3,_0x30becd=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x2579d7=document[_0x21c928(0x32e)]('.admin-section');(!_0x524084||_0x524084['length']===0x0)&&(_0x524084=['dashboard']);_0x30becd['forEach'](_0x12cb29=>{const _0x5f1773=_0x21c928,_0x3e017d=_0x12cb29['getAttribute']('data-section');_0x524084['includes'](_0x3e017d)?_0x12cb29['style']['display']=_0x5f1773(0x226):_0x12cb29[_0x5f1773(0x17e)]['display']='none',_0x12cb29['addEventListener'](_0x5f1773(0x16a),()=>{const _0x1cc7b8=_0x5f1773,_0x15b0ff=_0x12cb29['getAttribute'](_0x1cc7b8(0x334));if(!_0x524084['includes'](_0x15b0ff)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x30becd['forEach'](_0x4dfb05=>_0x4dfb05['classList']['remove']('active')),_0x12cb29['classList'][_0x1cc7b8(0x2e1)]('active'),_0x2579d7['forEach'](_0x5f59f0=>{const _0x1ff959=_0x1cc7b8;_0x5f59f0['style'][_0x1ff959(0x366)]='none';});const _0x5cdf56=document[_0x1cc7b8(0x183)](_0x15b0ff);_0x5cdf56&&(_0x5cdf56['style'][_0x1cc7b8(0x366)]='block',console['log']('Switched\x20to\x20'+_0x15b0ff+'\x20section'));});});const _0x569fad=document[_0x21c928(0x2f7)]('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x524084[0x0]+'\x22]');_0x569fad&&_0x569fad[_0x21c928(0x16a)](),console['log'](_0x21c928(0x289));}function setupTabNavigation(){const _0x56d0f4=a0_0x34a2a3,_0x4a728f=document['querySelectorAll'](_0x56d0f4(0x3a5));let _0x4bc467=null,_0xd7bed=new Set();_0x4a728f[_0x56d0f4(0x291)](_0x21debf=>{const _0x464e4d=_0x56d0f4;_0x21debf['addEventListener'](_0x464e4d(0x16a),function(){const _0xfb8601=_0x464e4d,_0x474b0b=this['getAttribute']('data-section');if(_0x474b0b===_0x4bc467)return;_0x4bc467&&(document['getElementById'](_0x4bc467)['style']['display']=_0xfb8601(0x385),_0x4a728f['forEach'](_0x1ba565=>_0x1ba565['classList']['remove']('active'))),document['getElementById'](_0x474b0b)['style']['display']='block',this[_0xfb8601(0x2ab)]['add']('active'),_0x4bc467=_0x474b0b;});});}function loadSectionData(_0x5b7eec){return;}async function initializeAdminDashboard(){const _0x248835=a0_0x34a2a3;try{const _0xc3b583=auth[_0x248835(0x339)],_0x28398d=await getUserTabPermissions(_0xc3b583['email']);console['log']('User\x20'+_0xc3b583[_0x248835(0x212)]+_0x248835(0x162),_0x28398d),window['userAllowedTabs']=_0x28398d,setupSidebarNavigation(_0x28398d),setupLadderSelector(),setupDashboardSection(),_0x28398d['includes'](_0x248835(0x1ff))&&setupManagePlayersSection(),_0x28398d['includes']('elo-history')&&setupEloHistorySection(),_0x28398d['includes']('manage-ranks')&&setupRankControls(),_0x28398d['includes']('manage-articles')&&setupManageArticlesSection(),_0x28398d['includes'](_0x248835(0x328))&&setupUserRolesSection(),_0x28398d['includes'](_0x248835(0x316))&&setupTrophyManagementSection(),_0x28398d['includes'](_0x248835(0x349))&&setupManageHighlightsSection(),_0x28398d['includes']('inactive-players')&&setupInactivePlayersSection(),_0x28398d[_0x248835(0x24f)]('manage-matches')&&setupManageMatchesSection(),_0x28398d['includes'](_0x248835(0x1b5))&&setupManagePointsSection(),_0x28398d[_0x248835(0x24f)](_0x248835(0x230))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x28398d);}catch(_0x4ed2af){console['error'](_0x248835(0x375),_0x4ed2af);}}function setupDataLoadButtons(_0x51ef97=[]){const _0x56fa5c=a0_0x34a2a3;(!_0x51ef97||_0x51ef97['length']===0x0)&&(_0x51ef97=['dashboard']);const _0x60c5e4=document['getElementById']('load-dashboard-data');_0x60c5e4&&_0x60c5e4['addEventListener']('click',function(){const _0x3c4954=a0_0x5ce8;this['classList']['add'](_0x3c4954(0x35a)),this['innerHTML']=_0x3c4954(0x30a),loadDashboardOverview()['then'](()=>{const _0x53f621=_0x3c4954;this['classList']['remove'](_0x53f621(0x35a)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x3f0b2e=>{console['error']('Error\x20loading\x20dashboard:',_0x3f0b2e),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x51ef97[_0x56fa5c(0x24f)]('manage-trophies')){const _0x89808a=document['getElementById']('load-trophies-data');_0x89808a&&_0x89808a['addEventListener']('click',function(){const _0xb3111a=_0x56fa5c;console[_0xb3111a(0x3bb)](_0xb3111a(0x26b)),this['classList']['add']('loading'),this[_0xb3111a(0x26a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0xb3111a(0x376)](()=>{const _0x439399=_0xb3111a;this['classList']['remove']('loading'),this[_0x439399(0x26a)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x28b68a=>{const _0x25472c=_0xb3111a;console[_0x25472c(0x27f)]('Error\x20loading\x20trophies:',_0x28b68a),this['classList'][_0x25472c(0x2c6)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xc7f866=_0x25472c;this[_0xc7f866(0x26a)]=_0xc7f866(0x1de);},0xbb8);});});}if(_0x51ef97['includes']('manage-players')){const _0x413c53=document['getElementById'](_0x56fa5c(0x17b));_0x413c53&&_0x413c53[_0x56fa5c(0x211)]('click',function(){const _0xaf1e46=_0x56fa5c;console[_0xaf1e46(0x3bb)]('Load\x20players\x20data\x20clicked'),this['classList'][_0xaf1e46(0x2e1)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0xaf1e46(0x376)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x2bc8c5=>{const _0xbb82c1=_0xaf1e46;console['error']('Error\x20loading\x20players:',_0x2bc8c5),this[_0xbb82c1(0x2ab)][_0xbb82c1(0x2c6)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3ec392=_0xbb82c1;this[_0x3ec392(0x26a)]=_0x3ec392(0x368);},0xbb8);});});}if(_0x51ef97['includes']('elo-history')){const _0x555f80=document['getElementById'](_0x56fa5c(0x23b));_0x555f80&&_0x555f80['addEventListener'](_0x56fa5c(0x16a),function(){const _0x434b45=_0x56fa5c;console['log']('Load\x20history\x20data\x20clicked'),this['classList'][_0x434b45(0x2e1)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x88f8e1=_0x434b45;this['classList']['remove']('loading'),this[_0x88f8e1(0x26a)]=_0x88f8e1(0x217);})[_0x434b45(0x3b6)](_0x115c1a=>{console['error']('Error\x20loading\x20history:',_0x115c1a),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x51ef97[_0x56fa5c(0x24f)]('manage-articles')){const _0x2af400=document[_0x56fa5c(0x183)]('load-articles-data');_0x2af400&&_0x2af400['addEventListener']('click',function(){const _0x32ec1b=_0x56fa5c;console[_0x32ec1b(0x3bb)](_0x32ec1b(0x16c)),this[_0x32ec1b(0x2ab)][_0x32ec1b(0x2e1)]('loading'),this[_0x32ec1b(0x26a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x32ec1b(0x376)](()=>{const _0x12367a=_0x32ec1b;this['classList']['remove']('loading'),this[_0x12367a(0x26a)]=_0x12367a(0x39a);})['catch'](_0x587bd1=>{const _0x557073=_0x32ec1b;console[_0x557073(0x27f)]('Error\x20loading\x20articles:',_0x587bd1),this['classList']['remove'](_0x557073(0x35a)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5299e7=_0x557073;this['innerHTML']=_0x5299e7(0x39a);},0xbb8);});});}if(_0x51ef97[_0x56fa5c(0x24f)]('user-roles-section')){const _0x412bd6=document['getElementById']('load-users-data');_0x412bd6&&_0x412bd6['addEventListener']('click',function(){const _0x164c2e=_0x56fa5c;console['log']('Load\x20users\x20data\x20clicked'),this['classList'][_0x164c2e(0x2e1)]('loading'),this[_0x164c2e(0x26a)]=_0x164c2e(0x30a),loadUsersWithRoles()['then'](()=>{const _0x1ff75a=_0x164c2e;this['classList'][_0x1ff75a(0x2c6)](_0x1ff75a(0x35a)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x5be810=>{const _0x4119e5=_0x164c2e;console['error'](_0x4119e5(0x21f),_0x5be810),this['classList']['remove'](_0x4119e5(0x35a)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x51ef97['includes']('inactive-players')){const _0x1bb87b=document['getElementById']('load-inactive-players-data');_0x1bb87b&&_0x1bb87b['addEventListener']('click',function(){const _0xb3c1cf=_0x56fa5c;console[_0xb3c1cf(0x3bb)](_0xb3c1cf(0x197)),this[_0xb3c1cf(0x2ab)]['add'](_0xb3c1cf(0x35a)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x5ed33d=>{const _0x1e26b5=_0xb3c1cf;console[_0x1e26b5(0x27f)]('Error\x20loading\x20inactive\x20players:',_0x5ed33d),this['classList']['remove']('loading'),this[_0x1e26b5(0x26a)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x50dd1a=_0x1e26b5;this['innerHTML']=_0x50dd1a(0x1d7);},0xbb8);});});}if(_0x51ef97['includes']('manage-highlights')){const _0x38ac80=document['getElementById']('load-highlights-data');_0x38ac80&&_0x38ac80['addEventListener']('click',function(){const _0x5fda0c=_0x56fa5c;console[_0x5fda0c(0x3bb)]('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x5fda0c(0x26a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x5b857e=>{const _0x54f950=_0x5fda0c;console[_0x54f950(0x27f)](_0x54f950(0x345),_0x5b857e),this['classList']['remove']('loading'),this[_0x54f950(0x26a)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x51ef97['includes']('manage-matches')){const _0x400584=document['getElementById']('load-matches-data');_0x400584&&_0x400584['addEventListener']('click',function(){const _0x44dde5=_0x56fa5c;console['log']('Load\x20matches\x20data\x20clicked'),this[_0x44dde5(0x2ab)][_0x44dde5(0x2e1)]('loading'),this[_0x44dde5(0x26a)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x44dde5(0x376)](()=>{const _0x3e3ef3=_0x44dde5;this['classList']['remove'](_0x3e3ef3(0x35a)),this[_0x3e3ef3(0x26a)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})[_0x44dde5(0x3b6)](_0x2453d2=>{const _0x5d522a=_0x44dde5;console[_0x5d522a(0x27f)]('Error\x20loading\x20matches:',_0x2453d2),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x51ef97['includes'](_0x56fa5c(0x230))){const _0x4c2b53=document[_0x56fa5c(0x183)](_0x56fa5c(0x2c7));_0x4c2b53&&_0x4c2b53[_0x56fa5c(0x211)]('click',function(){const _0xb1ee19=_0x56fa5c;console['log'](_0xb1ee19(0x277)),this[_0xb1ee19(0x2ab)][_0xb1ee19(0x2e1)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x3644d1=_0xb1ee19;this['classList']['remove']('loading'),this['innerHTML']=_0x3644d1(0x23d);})['catch'](_0x4ce076=>{const _0x65394=_0xb1ee19;console['error']('Error\x20loading\x20ribbons:',_0x4ce076),this['classList'][_0x65394(0x2c6)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log'](_0x56fa5c(0x31b));}function setupDashboardSection(){const _0x54dec9=a0_0x34a2a3;document['getElementById'](_0x54dec9(0x2bb))[_0x54dec9(0x31f)]='-',document['getElementById']('match-count')['textContent']='-',document[_0x54dec9(0x183)]('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x53130c=a0_0x34a2a3,_0x117c79=document['querySelectorAll'](_0x53130c(0x38b));_0x117c79['forEach'](_0x5edf34=>{const _0x40de4b=_0x53130c;_0x5edf34[_0x40de4b(0x211)]('change',()=>{const _0x4b5bbe=_0x40de4b;currentLadder=_0x5edf34['value'],document['body'][_0x4b5bbe(0x3c0)](_0x4b5bbe(0x18a),currentLadder);const _0x17fd72=document['getElementById']('current-ladder-display');_0x17fd72&&(_0x17fd72['textContent']=currentLadder),document['getElementById']('player-count')[_0x4b5bbe(0x31f)]='-',document[_0x4b5bbe(0x183)]('match-count')['textContent']='-',document[_0x4b5bbe(0x183)]('pending-count')['textContent']='-',document[_0x4b5bbe(0x183)]('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts[_0x4b5bbe(0x3ba)]&&(charts[_0x4b5bbe(0x3ba)]['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x471b6b=document[_0x53130c(0x183)]('current-ladder-display');_0x471b6b&&(_0x471b6b[_0x53130c(0x31f)]=currentLadder);}async function loadDashboardOverview(){const _0x591745=a0_0x34a2a3;try{console['log'](_0x591745(0x372)),document['getElementById']('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')[_0x591745(0x31f)]='-';const _0x57451a=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x4f363d=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2b01c6=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x6388a6=currentLadder==='D1'?_0x591745(0x229):currentLadder==='D2'?'RejectedD2':'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x57451a+',\x20'+_0x4f363d);const _0x389486=await getDocs(collection(db,_0x57451a)),_0x51d545=_0x389486[_0x591745(0x206)],_0x416ab1=await getDocs(collection(db,_0x4f363d)),_0x34f22b=_0x416ab1[_0x591745(0x206)],_0x11183c=await getDocs(collection(db,_0x2b01c6)),_0x1abcd8=_0x11183c['size'],_0x4e7457=await getDocs(collection(db,_0x6388a6)),_0x5f3718=_0x4e7457[_0x591745(0x206)];return document['getElementById']('player-count')['textContent']=_0x51d545,document['getElementById']('match-count')['textContent']=_0x34f22b,document[_0x591745(0x183)]('pending-count')['textContent']=_0x1abcd8,document[_0x591745(0x183)]('rejected-count')['textContent']=_0x5f3718,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x2f08f1){console['error']('Error\x20loading\x20dashboard\x20data:',_0x2f08f1);throw _0x2f08f1;}}async function createRankDistributionChart(){const _0x44ba86=a0_0x34a2a3;try{const _0x4e5098=collection(db,currentLadder==='D1'?'players':'playersD2'),_0xf71323=await getDocs(_0x4e5098),_0x322021={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0xf71323['forEach'](_0x39610f=>{const _0x73ebfe=a0_0x5ce8,_0x15c50b=_0x39610f[_0x73ebfe(0x1cc)](),_0x4707d0=_0x15c50b['eloRating']||0x4b0;if(_0x4707d0>=0x7d0)_0x322021['Emerald']++;else{if(_0x4707d0>=0x708)_0x322021['Gold']++;else{if(_0x4707d0>=0x640)_0x322021['Silver']++;else{if(_0x4707d0>=0x578)_0x322021['Bronze']++;else _0x322021['Unranked']++;}}}});const _0x1af9b5=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts[_0x44ba86(0x33e)]=new Chart(_0x1af9b5,{'type':'doughnut','data':{'labels':Object['keys'](_0x322021),'datasets':[{'data':Object['values'](_0x322021),'backgroundColor':['#808080',_0x44ba86(0x180),'#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':_0x44ba86(0x358),'font':{'size':0x10}}}}});}catch(_0x2fc7bd){console[_0x44ba86(0x27f)]('Error\x20creating\x20rank\x20distribution\x20chart:',_0x2fc7bd),document['getElementById']('rank-distribution-chart')[_0x44ba86(0x26a)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x205d2e=a0_0x34a2a3;try{const _0x23d58e=currentLadder==='D1'?'approvedMatches':_0x205d2e(0x262),_0x1d8b10=collection(db,_0x23d58e),_0x2a8492=new Date();_0x2a8492['setDate'](_0x2a8492[_0x205d2e(0x16b)]()-0x7);const _0xd4ed2=query(_0x1d8b10,where('approvedAt','>=',_0x2a8492),orderBy(_0x205d2e(0x27e),'asc')),_0x191d96=await getDocs(_0xd4ed2),_0x3fffa8=['Sunday',_0x205d2e(0x1e5),'Tuesday','Wednesday','Thursday','Friday','Saturday'],_0x508343=_0x3fffa8['reduce']((_0x4f7730,_0x87dadb)=>({..._0x4f7730,[_0x87dadb]:0x0}),{});_0x191d96[_0x205d2e(0x291)](_0x34fd87=>{const _0x893b0f=_0x205d2e,_0xb4fa9d=_0x34fd87[_0x893b0f(0x1cc)]();if(_0xb4fa9d['approvedAt']){const _0x276a61=_0x3fffa8[new Date(_0xb4fa9d['approvedAt']['seconds']*0x3e8)[_0x893b0f(0x1e0)]()];_0x508343[_0x276a61]++;}});const _0x33458d=document[_0x205d2e(0x183)]('activity-chart');charts[_0x205d2e(0x3ba)]&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x33458d,{'type':'bar','data':{'labels':_0x3fffa8,'datasets':[{'label':'Matches\x20Played','data':_0x3fffa8['map'](_0x3c8fcb=>_0x508343[_0x3c8fcb]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x205d2e(0x250)}},'x':{'ticks':{'color':_0x205d2e(0x358)},'grid':{'color':_0x205d2e(0x250)}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x205d2e(0x31c),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x18afe6){console[_0x205d2e(0x27f)]('Error\x20creating\x20activity\x20chart:',_0x18afe6),document[_0x205d2e(0x183)]('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x46f6b6=a0_0x34a2a3,_0x43d64a=document[_0x46f6b6(0x183)](_0x46f6b6(0x1d9));if(!_0x43d64a)return;_0x43d64a['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x275410=_0x46f6b6(0x351);if(currentLadder==='D2')_0x275410='playersD2';else currentLadder==='D3'&&(_0x275410='playersD3');console[_0x46f6b6(0x3bb)]('Loading\x20players\x20from\x20'+_0x275410+'\x20collection...');const _0xdb738d=collection(db,_0x275410),_0xe539e2=query(_0xdb738d,orderBy('eloRating',_0x46f6b6(0x36e))),_0x3d5903=await getDocs(_0xe539e2);if(_0x3d5903[_0x46f6b6(0x381)]){_0x43d64a['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x43d64a['innerHTML']='';let _0x2762e7=0x1;_0x3d5903['forEach'](_0x34404c=>{const _0x1e34ba=_0x46f6b6,_0x152150=_0x34404c['data'](),_0x339174=getRankFromElo(_0x152150['eloRating']||0x4b0),_0x11f28b=getRankStyle(_0x152150['eloRating']||0x4b0),_0x255df5=document['createElement']('tr');_0x255df5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x2762e7+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x11f28b['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x152150['username']||_0x1e34ba(0x161))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x152150['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x11f28b['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x339174+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x152150['wins']||0x0)+'W\x20/\x20'+(_0x152150['losses']||0x0)+_0x1e34ba(0x2fb)+_0x34404c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x34404c['id']+_0x1e34ba(0x34f),_0x43d64a['appendChild'](_0x255df5),_0x2762e7++;}),setupPlayerActionButtons();}catch(_0x375349){console['error']('Error\x20loading\x20players:',_0x375349),_0x43d64a[_0x46f6b6(0x26a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x375349['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x1f209f){if(_0x1f209f>=0x7d0)return'Emerald';if(_0x1f209f>=0x708)return'Gold';if(_0x1f209f>=0x640)return'Silver';if(_0x1f209f>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x367d42=a0_0x34a2a3;document[_0x367d42(0x32e)]('.edit-btn')[_0x367d42(0x291)](_0x5a45bf=>{_0x5a45bf['addEventListener']('click',async _0x423baa=>{const _0x1fac55=a0_0x5ce8,_0x4e8fb1=_0x423baa[_0x1fac55(0x281)]['dataset']['id'];openEditPlayerModal(_0x4e8fb1);});}),document['querySelectorAll']('.delete-btn')[_0x367d42(0x291)](_0x1cc353=>{const _0x4172db=_0x367d42;_0x1cc353['addEventListener'](_0x4172db(0x16a),async _0x33daea=>{const _0xb25d5c=_0x4172db,_0x31d06b=_0x33daea[_0xb25d5c(0x281)][_0xb25d5c(0x1c5)]['id'];confirmDeletePlayer(_0x31d06b);});});}async function openEditPlayerModal(_0x58043b){const _0x1c8cad=a0_0x34a2a3;try{const _0xe478bc=currentLadder==='D1'?'players':'playersD2',_0x5427b8=doc(db,_0xe478bc,_0x58043b),_0x5ce27f=await getDoc(_0x5427b8);if(!_0x5ce27f[_0x1c8cad(0x35f)]()){showNotification('Player\x20not\x20found','error');return;}const _0x57c44b=_0x5ce27f['data'](),_0x237cf2=document['getElementById']('edit-player-modal'),_0x10b559=document[_0x1c8cad(0x183)](_0x1c8cad(0x1fe)),_0x130a7d=document[_0x1c8cad(0x183)](_0x1c8cad(0x283)),_0x367f0a=document['getElementById']('edit-wins'),_0x5b1a89=document['getElementById']('edit-losses');_0x10b559[_0x1c8cad(0x288)]=_0x57c44b[_0x1c8cad(0x297)]||'',_0x130a7d['value']=_0x57c44b['eloRating']||0x4b0,_0x367f0a['value']=_0x57c44b['wins']||0x0,_0x5b1a89[_0x1c8cad(0x288)]=_0x57c44b['losses']||0x0,_0x237cf2['dataset']['playerId']=_0x58043b,_0x237cf2['classList'][_0x1c8cad(0x2e1)]('active');}catch(_0x2d292b){console['error']('Error\x20opening\x20edit\x20modal:',_0x2d292b),showNotification(_0x1c8cad(0x25a),_0x1c8cad(0x27f));}}async function saveEditedPlayer(){const _0x3b2e1e=a0_0x34a2a3;try{const _0x54758c=document['getElementById'](_0x3b2e1e(0x166)),_0x555c5d=_0x54758c['dataset']['playerId'];if(!_0x555c5d){showNotification(_0x3b2e1e(0x21e),'error');return;}const _0x27e7b2=document['getElementById']('edit-username'),_0x1603fe=document['getElementById'](_0x3b2e1e(0x283)),_0x4203c2=document['getElementById'](_0x3b2e1e(0x35c)),_0x1db0f4=document['getElementById']('edit-losses'),_0x4d415c=_0x27e7b2['value']['trim'](),_0x5f56fe=parseInt(_0x1603fe[_0x3b2e1e(0x288)]),_0x54b5e8=parseInt(_0x4203c2['value']),_0x51bda5=parseInt(_0x1db0f4['value']);if(!_0x4d415c||isNaN(_0x5f56fe)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x3b2e1e(0x27f));return;}const _0x41acaf=currentLadder==='D1'?'players':_0x3b2e1e(0x2b5),_0x249d03=doc(db,_0x41acaf,_0x555c5d),_0x51b1b4=await getDoc(_0x249d03),_0x28cd46=_0x51b1b4['exists']()?_0x51b1b4[_0x3b2e1e(0x1cc)]():{},_0x160edc=_0x28cd46['eloRating']||0x4b0;await updateDoc(_0x249d03,{'username':_0x4d415c,'eloRating':_0x5f56fe,'wins':_0x54b5e8||0x0,'losses':_0x51bda5||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x3b2e1e(0x339)][_0x3b2e1e(0x212)]});if(_0x5f56fe!==_0x160edc){const _0x2ca846=currentLadder==='D1'?_0x3b2e1e(0x29a):'eloHistoryD2';await addDoc(collection(db,_0x2ca846),{'player':_0x4d415c,'previousElo':_0x160edc,'newElo':_0x5f56fe,'timestamp':serverTimestamp(),'type':_0x3b2e1e(0x337),'modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x3f9c51){console['error']('Error\x20updating\x20player:',_0x3f9c51),showNotification(_0x3b2e1e(0x2c0)+_0x3f9c51['message'],'error');}}function closeEditPlayerModal(){const _0x3f1b69=a0_0x34a2a3,_0x68e73=document['getElementById']('edit-player-modal');_0x68e73['classList']['remove']('active'),_0x68e73[_0x3f1b69(0x1c5)][_0x3f1b69(0x25d)]='';}async function confirmDeletePlayer(_0xba0426){const _0x18b344=a0_0x34a2a3;if(confirm(_0x18b344(0x27a)))try{const _0x4cf590=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x4cf590,_0xba0426)),loadPlayersData(),showNotification(_0x18b344(0x382),_0x18b344(0x3a4));}catch(_0x2f113d){console['error']('Error\x20deleting\x20player:',_0x2f113d),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x2f113d[_0x18b344(0x17d)],'error');}}async function setupManagePlayersSection(){const _0x4dda33=a0_0x34a2a3,_0x3619ea=document['getElementById']('add-player-form');_0x3619ea&&_0x3619ea['addEventListener']('submit',async _0x4c3098=>{_0x4c3098['preventDefault'](),await addNewPlayer();});const _0x24e42c=document['getElementById'](_0x4dda33(0x378));_0x24e42c&&_0x24e42c['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x37c70e=document['getElementById']('save-player-btn');_0x37c70e&&_0x37c70e[_0x4dda33(0x211)](_0x4dda33(0x16a),saveEditedPlayer);const _0x1cbc1e=document[_0x4dda33(0x183)]('cancel-edit-btn');_0x1cbc1e&&_0x1cbc1e['addEventListener'](_0x4dda33(0x16a),closeEditPlayerModal);const _0x4b025d=document['getElementById'](_0x4dda33(0x166));_0x4b025d&&_0x4b025d['addEventListener']('click',_0x3b00d9=>{const _0x18234e=_0x4dda33;_0x3b00d9[_0x18234e(0x19a)]===_0x4b025d&&closeEditPlayerModal();});const _0x1b8bd9=document[_0x4dda33(0x183)](_0x4dda33(0x2ad));_0x1b8bd9&&_0x1b8bd9['addEventListener']('change',()=>{currentLadder=_0x1b8bd9['value'],loadPlayersData();});}async function addNewPlayer(){const _0xf5e4c1=a0_0x34a2a3;try{const _0x17047b=document['getElementById']('new-player-username'),_0xb07ea7=document['getElementById'](_0xf5e4c1(0x2b0)),_0x334bfe=_0x17047b['value']['trim'](),_0x37512c=parseInt(_0xb07ea7[_0xf5e4c1(0x288)])||0x4b0;if(!_0x334bfe){alert('Please\x20enter\x20a\x20valid\x20username');return;}console[_0xf5e4c1(0x3bb)]('Adding\x20player\x20'+_0x334bfe+'\x20with\x20ELO\x20'+_0x37512c+_0xf5e4c1(0x3bd)+currentLadder+_0xf5e4c1(0x3c1));let _0x3f1535='players',_0x376a47=_0xf5e4c1(0x29a);if(currentLadder==='D2')_0x3f1535='playersD2',_0x376a47=_0xf5e4c1(0x20b);else currentLadder==='D3'&&(_0x3f1535='playersD3',_0x376a47=_0xf5e4c1(0x257));const _0x47d32e=query(collection(db,_0x3f1535),where('username','==',_0x334bfe)),_0x30ce88=await getDocs(_0x47d32e);if(!_0x30ce88[_0xf5e4c1(0x381)]){alert(_0xf5e4c1(0x268)+_0x334bfe+'\x20already\x20exists\x20in\x20'+currentLadder+_0xf5e4c1(0x3c1));return;}const _0x2de933=auth['currentUser'],_0x3b8bdd={'username':_0x334bfe,'eloRating':_0x37512c,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x2de933?_0x2de933['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x3f1535),_0x3b8bdd),await addDoc(collection(db,_0x376a47),{'player':_0x334bfe,'previousElo':0x4b0,'newElo':_0x37512c,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x2de933?_0x2de933['email']:'admin','gameMode':currentLadder}),_0x17047b['value']='',_0xb07ea7[_0xf5e4c1(0x288)]='1200',alert('Player\x20'+_0x334bfe+'\x20added\x20successfully\x20to\x20'+currentLadder+_0xf5e4c1(0x16f)),loadPlayersData();}catch(_0x43aae7){console[_0xf5e4c1(0x27f)]('Error\x20adding\x20player:',_0x43aae7),alert('Error\x20adding\x20player:\x20'+_0x43aae7[_0xf5e4c1(0x17d)]);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x9717d2=a0_0x34a2a3,_0x280499=document[_0x9717d2(0x183)](_0x9717d2(0x2e0));_0x280499&&_0x280499[_0x9717d2(0x211)]('submit',_0x213b09=>{_0x213b09['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x2a47b9=a0_0x34a2a3,_0xdd0950=document[_0x2a47b9(0x183)](_0x2a47b9(0x378))['value']['toLowerCase'](),_0x4a7758=document['querySelectorAll'](_0x2a47b9(0x25c));let _0x16009c=0x0;_0x4a7758['forEach'](_0x576420=>{const _0x14ec11=_0x2a47b9,_0x1479c4=_0x576420[_0x14ec11(0x2f7)](_0x14ec11(0x228))?.['textContent'][_0x14ec11(0x225)]()||'';_0x1479c4[_0x14ec11(0x24f)](_0xdd0950)?(_0x576420[_0x14ec11(0x17e)]['display']='',_0x16009c++):_0x576420['style']['display']='none';});const _0x624818=document['getElementById']('no-results-message');_0x624818&&(_0x16009c===0x0&&_0xdd0950!==''?_0x624818['style'][_0x2a47b9(0x366)]=_0x2a47b9(0x353):_0x624818['style']['display']='none');}function debounce(_0x5707e1,_0x2ba6aa){let _0x5ae310;return function(..._0x1152f4){const _0x8deed4=a0_0x5ce8;clearTimeout(_0x5ae310),_0x5ae310=setTimeout(()=>_0x5707e1[_0x8deed4(0x340)](this,_0x1152f4),_0x2ba6aa);};}async function loadEloHistory(_0x4ed856=0x1){const _0x79c112=a0_0x34a2a3,_0x57e84e=document[_0x79c112(0x183)](_0x79c112(0x1f9)),_0x2badac=currentLadder['toLowerCase']();if(!_0x57e84e)return;_0x57e84e[_0x79c112(0x26a)]=_0x79c112(0x287);try{const _0x1c5f5a=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0x79c112(0x20b):_0x79c112(0x257),_0x5608fa=collection(db,_0x1c5f5a);let _0xefd4c5;if(_0x4ed856>eloHistoryPagination[_0x2badac]['page']&&eloHistoryPagination[_0x2badac]['lastVisible'])_0xefd4c5=query(_0x5608fa,orderBy(_0x79c112(0x165),'desc'),startAfter(eloHistoryPagination[_0x2badac][_0x79c112(0x34a)]),limit(PAGE_SIZE));else _0x4ed856<eloHistoryPagination[_0x2badac]['page']&&eloHistoryPagination[_0x2badac]['firstVisible']?_0xefd4c5=query(_0x5608fa,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x2badac][_0x79c112(0x239)]),limitToLast(PAGE_SIZE)):_0xefd4c5=query(_0x5608fa,orderBy(_0x79c112(0x165),'desc'),limit(PAGE_SIZE));const _0x1d67ce=await getDocs(_0xefd4c5);if(_0x1d67ce['empty']){_0x57e84e['innerHTML']=_0x79c112(0x311),document['getElementById'](_0x2badac+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x2badac]['page']=_0x4ed856,eloHistoryPagination[_0x2badac]['firstVisible']=_0x1d67ce['docs'][0x0],eloHistoryPagination[_0x2badac]['lastVisible']=_0x1d67ce['docs'][_0x1d67ce['docs'][_0x79c112(0x2d4)]-0x1];const _0x3e36a2=new Map();_0x57e84e[_0x79c112(0x26a)]='';const _0x557b06=async _0x463e6e=>{const _0x3d8e13=_0x79c112;if(typeof _0x463e6e!=='string'||_0x463e6e['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x463e6e))return _0x463e6e;if(_0x3e36a2['has'](_0x463e6e))return _0x3e36a2['get'](_0x463e6e);try{for(const _0x1f6f78 of['players','playersD2','playersD3','nonParticipants']){const _0x5e710f=await getDoc(doc(db,_0x1f6f78,_0x463e6e));if(_0x5e710f['exists']()&&_0x5e710f['data']()['username']){const _0x24dd90=_0x5e710f['data']()[_0x3d8e13(0x297)];return _0x3e36a2[_0x3d8e13(0x231)](_0x463e6e,_0x24dd90),_0x24dd90;}}return _0x463e6e;}catch(_0x38abc5){return console[_0x3d8e13(0x19b)]('Error\x20resolving\x20username\x20for\x20'+_0x463e6e+':',_0x38abc5),_0x463e6e;}};for(const _0x498947 of _0x1d67ce['docs']){const _0x3a43c3=_0x498947[_0x79c112(0x1cc)](),_0x4ccd22=document['createElement']('tr'),_0x1ad8af=_0x3a43c3['timestamp']?new Date(_0x3a43c3['timestamp'][_0x79c112(0x2a5)]*0x3e8)[_0x79c112(0x38d)]():'N/A',_0x2781fa=_0x3a43c3['newElo']-_0x3a43c3['previousElo'],_0x1eb631=_0x2781fa>0x0?'positive-change':_0x2781fa<0x0?_0x79c112(0x36b):'',_0x5d19ba=_0x2781fa>0x0?'+':'',_0x292421=_0x3a43c3['player']||_0x3a43c3['username']||_0x3a43c3['userId']||'N/A',_0x48164c=await _0x557b06(_0x292421);_0x4ccd22[_0x79c112(0x26a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x1ad8af+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x48164c+_0x79c112(0x275)+(_0x3a43c3['previousElo']||_0x79c112(0x2d8))+_0x79c112(0x264)+(_0x3a43c3['newElo']||_0x79c112(0x2d8))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x1eb631+'\x22>'+_0x5d19ba+_0x2781fa+_0x79c112(0x205)+formatHistoryType(_0x3a43c3['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3a43c3['modifiedBy']||_0x3a43c3[_0x79c112(0x2e2)]||_0x3a43c3['demotedBy']||_0x79c112(0x2a1))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x57e84e['appendChild'](_0x4ccd22);}document['getElementById'](_0x2badac+'-page-indicator')[_0x79c112(0x31f)]='Page\x20'+_0x4ed856;const _0x90d4ce=document[_0x79c112(0x183)](_0x2badac+'-prev-page'),_0x17a9cf=document[_0x79c112(0x183)](_0x2badac+_0x79c112(0x331));if(_0x90d4ce)_0x90d4ce['disabled']=_0x4ed856<=0x1;const _0xac21c5=query(_0x5608fa,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x2badac]['lastVisible']),limit(0x1)),_0x4340e2=await getDocs(_0xac21c5);if(_0x17a9cf)_0x17a9cf[_0x79c112(0x2b6)]=_0x4340e2[_0x79c112(0x381)];}catch(_0x2698cd){console['error']('Error\x20loading\x20ELO\x20history:',_0x2698cd),_0x57e84e['innerHTML']=_0x79c112(0x272)+_0x2698cd['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x558908){const _0x377ac8=a0_0x34a2a3;switch(_0x558908){case'match_result':return'Match\x20Result';case _0x377ac8(0x2ee):return'Promotion';case'demotion':return _0x377ac8(0x17f);case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x558908||_0x377ac8(0x161);}}function setupEloHistorySection(){const _0x49e0d9=a0_0x34a2a3;document[_0x49e0d9(0x183)]('d1-prev-page')['addEventListener'](_0x49e0d9(0x16a),()=>{const _0x22426c=_0x49e0d9;loadEloHistory(eloHistoryPagination['d1'][_0x22426c(0x1e6)]-0x1);}),document['getElementById'](_0x49e0d9(0x255))['addEventListener']('click',()=>{const _0x2174e0=_0x49e0d9;loadEloHistory(eloHistoryPagination['d1'][_0x2174e0(0x1e6)]+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{const _0x2dc951=_0x49e0d9;loadEloHistory(eloHistoryPagination['d2'][_0x2dc951(0x1e6)]-0x1);}),document[_0x49e0d9(0x183)]('d2-next-page')[_0x49e0d9(0x211)]('click',()=>{const _0x309669=_0x49e0d9;loadEloHistory(eloHistoryPagination['d2'][_0x309669(0x1e6)]+0x1);});const _0x483293=document['getElementById']('d3-prev-page'),_0x10b3de=document['getElementById']('d3-next-page');_0x483293&&_0x483293['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x10b3de&&_0x10b3de[_0x49e0d9(0x211)](_0x49e0d9(0x16a),()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x1d0d4e=document['getElementById']('elo-history-search');_0x1d0d4e&&_0x1d0d4e['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x295c2a=document[_0x49e0d9(0x183)]('history-type-filter');_0x295c2a&&_0x295c2a['addEventListener']('change',applyEloHistoryFilters);const _0xe5ea44=document['getElementById']('reset-history-filters');_0xe5ea44&&_0xe5ea44['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x38b0e6=a0_0x34a2a3,_0x8539f3=document['getElementById'](_0x38b0e6(0x1b3))['value']['toLowerCase'](),_0x4a110f=document[_0x38b0e6(0x32e)]('#elo-history-table-body\x20tr');let _0x577c6a=0x0;_0x4a110f['forEach'](_0x500e0b=>{const _0x52bf04=_0x38b0e6;if(_0x500e0b['classList']['contains'](_0x52bf04(0x37b))||_0x500e0b['classList']['contains'](_0x52bf04(0x186))||_0x500e0b['classList']['contains']('error-state'))return;const _0x30124a=_0x500e0b['querySelector']('.player')?.[_0x52bf04(0x31f)]['toLowerCase']()||'',_0x374e1e=_0x500e0b['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x8c8b70=_0x500e0b['querySelector']('.admin-action')?.['textContent']['toLowerCase']()||'';_0x30124a[_0x52bf04(0x24f)](_0x8539f3)||_0x374e1e['includes'](_0x8539f3)||_0x8c8b70[_0x52bf04(0x24f)](_0x8539f3)?(_0x500e0b['style'][_0x52bf04(0x366)]='',_0x577c6a++):_0x500e0b['style'][_0x52bf04(0x366)]='none';});}async function applyEloHistoryFilters(){const _0x5dc5e0=a0_0x34a2a3,_0x43c34a=document['getElementById']('history-start-date')['value'],_0xa890e0=document['getElementById']('history-end-date')['value'],_0xbe09fd=document['getElementById']('history-type-filter')['value'],_0x205c0e=currentLadder[_0x5dc5e0(0x225)]();eloHistoryPagination[_0x205c0e]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x27f546=document[_0x5dc5e0(0x183)](_0x5dc5e0(0x1f9));_0x27f546['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x4eaaab=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x4fff1a=collection(db,_0x4eaaab);let _0x61651=[orderBy(_0x5dc5e0(0x165),'desc')];if(_0x43c34a){const _0x2ee983=new Date(_0x43c34a);_0x2ee983['setHours'](0x0,0x0,0x0,0x0),_0x61651['push'](where('timestamp','>=',_0x2ee983));}if(_0xa890e0){const _0x4a5921=new Date(_0xa890e0);_0x4a5921[_0x5dc5e0(0x1be)](0x17,0x3b,0x3b,0x3e7),_0x61651['push'](where('timestamp','<=',_0x4a5921));}_0xbe09fd&&_0xbe09fd!==_0x5dc5e0(0x18d)&&_0x61651['push'](where('type','==',_0xbe09fd));_0x61651[_0x5dc5e0(0x26d)](limit(PAGE_SIZE));const _0x55ed0e=query(_0x4fff1a,..._0x61651),_0x54ee46=await getDocs(_0x55ed0e);!_0x54ee46[_0x5dc5e0(0x381)]&&(eloHistoryPagination[_0x205c0e]['firstVisible']=_0x54ee46['docs'][0x0],eloHistoryPagination[_0x205c0e]['lastVisible']=_0x54ee46['docs'][_0x54ee46['docs'][_0x5dc5e0(0x2d4)]-0x1]);_0x27f546['innerHTML']='';if(_0x54ee46['empty']){_0x27f546[_0x5dc5e0(0x26a)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x54ee46[_0x5dc5e0(0x291)](_0x452f29=>{const _0x171c56=_0x5dc5e0,_0x7b90e8=_0x452f29['data'](),_0x28cfa9=document['createElement']('tr'),_0x392ffd=_0x7b90e8['timestamp']?new Date(_0x7b90e8['timestamp']['seconds']*0x3e8)[_0x171c56(0x38d)]():'N/A',_0xe1ad89=_0x7b90e8[_0x171c56(0x335)]-_0x7b90e8[_0x171c56(0x2eb)],_0x3cde03=_0xe1ad89>0x0?_0x171c56(0x2d5):_0xe1ad89<0x0?_0x171c56(0x36b):'',_0x9d8abd=_0xe1ad89>0x0?'+':'',_0x18ceed=_0x7b90e8['player']||_0x7b90e8['username']||_0x7b90e8['userId']||'N/A';_0x28cfa9[_0x171c56(0x26a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x392ffd+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x18ceed+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x7b90e8['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x7b90e8['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x3cde03+'\x22>'+_0x9d8abd+_0xe1ad89+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x7b90e8['type'])+_0x171c56(0x35d)+(_0x7b90e8['modifiedBy']||_0x7b90e8['promotedBy']||_0x7b90e8[_0x171c56(0x39d)]||_0x171c56(0x2a1))+_0x171c56(0x2cd),_0x27f546[_0x171c56(0x312)](_0x28cfa9);}),document[_0x5dc5e0(0x183)](_0x205c0e+'-page-indicator')[_0x5dc5e0(0x31f)]='Page\x201';}catch(_0x452221){console['error']('Error\x20applying\x20filters:',_0x452221),_0x27f546['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x452221[_0x5dc5e0(0x17d)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x5e5936=a0_0x34a2a3;document[_0x5e5936(0x183)]('history-start-date')['value']='',document[_0x5e5936(0x183)](_0x5e5936(0x2cf))['value']='',document['getElementById'](_0x5e5936(0x200))['value']='all',document['getElementById']('elo-history-search')[_0x5e5936(0x288)]='';const _0x10745b=currentLadder['toLowerCase']();eloHistoryPagination[_0x10745b]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x3b27f2=a0_0x34a2a3,_0x46c529=document['getElementById']('promote-player-btn'),_0x3b3833=document['getElementById']('promote-modal'),_0x1e0361=document[_0x3b27f2(0x183)](_0x3b27f2(0x321));_0x46c529&&_0x3b3833&&_0x1e0361&&(_0x46c529[_0x3b27f2(0x211)]('click',()=>{_0x3b3833['classList']['add']('active');}),_0x3b3833['addEventListener']('click',_0x90ba1c=>{const _0x1fa589=_0x3b27f2;_0x90ba1c['target']===_0x3b3833&&_0x3b3833['classList'][_0x1fa589(0x2c6)]('active');}),_0x1e0361['addEventListener']('submit',async _0x222752=>{const _0x231d2b=_0x3b27f2;_0x222752[_0x231d2b(0x282)]();const _0x3da108=document['getElementById']('promote-username'),_0x577380=document['getElementById']('promote-ladder'),_0x4582fa=_0x3da108['value']['trim'](),_0xd59a6a=_0x577380[_0x231d2b(0x288)];if(!_0x4582fa){showNotification('Please\x20enter\x20a\x20username',_0x231d2b(0x27f));return;}try{await promotePlayer(_0x4582fa,_0xd59a6a),_0x3b3833[_0x231d2b(0x2ab)]['remove']('active'),_0x3da108[_0x231d2b(0x288)]='';}catch(_0x145450){showNotification(_0x145450['message'],'error');}}),document['getElementById']('cancel-promote-btn')[_0x3b27f2(0x211)](_0x3b27f2(0x16a),()=>{_0x3b3833['classList']['remove']('active');}));const _0x432979=document[_0x3b27f2(0x183)]('demote-player-btn'),_0x2ea1f3=document['getElementById'](_0x3b27f2(0x3a8)),_0x5f5cbd=document['getElementById']('demote-form');_0x432979&&_0x2ea1f3&&_0x5f5cbd&&(_0x432979['addEventListener']('click',()=>{_0x2ea1f3['classList']['add']('active');}),_0x2ea1f3['addEventListener'](_0x3b27f2(0x16a),_0x5eb9f7=>{const _0x140691=_0x3b27f2;_0x5eb9f7['target']===_0x2ea1f3&&_0x2ea1f3['classList']['remove'](_0x140691(0x2d7));}),_0x5f5cbd['addEventListener']('submit',async _0x29a531=>{const _0x1ea7d0=_0x3b27f2;_0x29a531['preventDefault']();const _0x37edaa=document['getElementById']('demote-username'),_0x3278aa=document['getElementById'](_0x1ea7d0(0x28b)),_0x4dd7ba=_0x37edaa['value']['trim'](),_0x3ef564=_0x3278aa[_0x1ea7d0(0x288)];if(!_0x4dd7ba){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x4dd7ba,_0x3ef564),document['getElementById']('demote-modal')['classList'][_0x1ea7d0(0x2c6)]('active'),document[_0x1ea7d0(0x183)]('demote-username')['value']='';}catch(_0x3f984e){console['error']('Error\x20in\x20demotion:',_0x3f984e);}}));const _0x3d78d3=document['getElementById'](_0x3b27f2(0x370)),_0xdc5b95=document['getElementById']('set-elo-modal'),_0x4ac95c=document['getElementById']('set-elo-form');_0x3d78d3&&_0xdc5b95&&_0x4ac95c&&(_0x3d78d3['addEventListener']('click',()=>{_0xdc5b95['classList']['add']('active');}),_0xdc5b95['addEventListener'](_0x3b27f2(0x16a),_0x527dd6=>{const _0x38cfe2=_0x3b27f2;_0x527dd6[_0x38cfe2(0x19a)]===_0xdc5b95&&_0xdc5b95[_0x38cfe2(0x2ab)][_0x38cfe2(0x2c6)](_0x38cfe2(0x2d7));}),_0x4ac95c['addEventListener'](_0x3b27f2(0x16d),async _0x2673c0=>{const _0x19d40e=_0x3b27f2;_0x2673c0['preventDefault']();const _0x43a1db=document['getElementById']('set-elo-username'),_0x21fb8c=document['getElementById']('set-elo-value');let _0x17a3f9;const _0xa3e18e=document['getElementById']('set-elo-ladder'),_0x134c78=document[_0x19d40e(0x2f7)](_0x19d40e(0x377));if(_0xa3e18e)_0x17a3f9=_0xa3e18e[_0x19d40e(0x288)];else _0x134c78?_0x17a3f9=_0x134c78[_0x19d40e(0x288)]:_0x17a3f9='D1';if(!_0x43a1db||!_0x21fb8c){showNotification('Form\x20elements\x20are\x20missing',_0x19d40e(0x27f));return;}const _0x5c0078=_0x43a1db['value']['trim'](),_0x15c9da=parseInt(_0x21fb8c['value']);if(!_0x5c0078||isNaN(_0x15c9da)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x19d40e(0x27f));return;}try{await setCustomElo(_0x5c0078,_0x15c9da,_0x17a3f9),_0xdc5b95[_0x19d40e(0x2ab)][_0x19d40e(0x2c6)]('active'),_0x43a1db['value']='',_0x21fb8c['value']='';}catch(_0xafb28e){showNotification(_0xafb28e['message'],'error');}}),document['getElementById'](_0x3b27f2(0x341))[_0x3b27f2(0x211)]('click',()=>{_0xdc5b95['classList']['remove']('active');}));const _0x492919=document[_0x3b27f2(0x183)]('set-role-modal'),_0x3fdca6=document[_0x3b27f2(0x183)]('set-role-form');if(_0x492919&&_0x3fdca6){_0x492919['addEventListener'](_0x3b27f2(0x16a),_0x58ae83=>{_0x58ae83['target']===_0x492919&&closeModalHandler();}),_0x3fdca6[_0x3b27f2(0x211)]('submit',async _0xb7a435=>{const _0x29f8a5=_0x3b27f2;_0xb7a435['preventDefault']();const _0x273db4=document[_0x29f8a5(0x183)]('role-username'),_0x2b5c00=document['getElementById']('role-name'),_0x3ad857=document[_0x29f8a5(0x183)]('role-color'),_0x53e13b=_0x273db4['value']['trim'](),_0x385c28=_0x2b5c00['value'][_0x29f8a5(0x355)](),_0x3b4f3a=_0x3ad857[_0x29f8a5(0x288)];if(!_0x53e13b){showNotification(_0x29f8a5(0x169),'error');return;}try{await setUserRole(_0x53e13b,_0x385c28,_0x3b4f3a),closeModalHandler(),loadUsersWithRoles();}catch(_0x4af57d){}});const _0x3e5d34=document[_0x3b27f2(0x183)]('cancel-role-btn');_0x3e5d34&&(_0x3e5d34['removeEventListener']('click',closeModalHandler),_0x3e5d34[_0x3b27f2(0x211)]('click',closeModalHandler));}}async function promotePlayer(_0x5e4526,_0x6f4d12){const _0x53a9e3=a0_0x34a2a3;try{console[_0x53a9e3(0x3bb)](_0x53a9e3(0x2e5)+_0x5e4526+_0x53a9e3(0x314)+_0x6f4d12+'\x20ladder');const _0x43e930=auth['currentUser'];if(!_0x43e930)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x1c9cd2=_0x6f4d12==='D2'?_0x53a9e3(0x2b5):'players',_0x3822d6=_0x6f4d12==='D2'?'eloHistoryD2':_0x53a9e3(0x29a);console['log'](_0x53a9e3(0x213)+_0x1c9cd2);const _0x184883=collection(db,_0x1c9cd2),_0xb872ff=query(_0x184883,where('username','==',_0x5e4526)),_0x39fa74=await getDocs(_0xb872ff);if(_0x39fa74['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x6f4d12+'\x20ladder');throw new Error(_0x53a9e3(0x2aa)+_0x6f4d12+'\x20ladder');}const _0x14851a=_0x39fa74['docs'][0x0],_0x126d36=_0x14851a['data'](),_0x3df16b=_0x126d36[_0x53a9e3(0x2e8)]||0x4b0,_0x355208=_0x14851a['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x3df16b);const _0x2b96d1=[{'name':_0x53a9e3(0x270),'elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x23e28c=_0x2b96d1['find'](_0x21ce49=>_0x21ce49['elo']>_0x3df16b);if(!_0x23e28c){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x6f4d12+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x6f4d12+'\x20ladder');}console['log'](_0x53a9e3(0x1d1)+_0x23e28c[_0x53a9e3(0x333)]+'\x20('+_0x23e28c['elo']+')'),await updateDoc(doc(db,_0x1c9cd2,_0x14851a['id']),{'eloRating':_0x23e28c['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x43e930['email']||'admin'}),await addDoc(collection(db,_0x3822d6),{'player':_0x5e4526,'previousElo':_0x3df16b,'newElo':_0x23e28c['elo'],'timestamp':serverTimestamp(),'type':_0x53a9e3(0x2ee),'rankAchieved':_0x23e28c[_0x53a9e3(0x333)],'promotedBy':_0x43e930['email']||'admin','gameMode':_0x6f4d12});try{const {promotionManager:_0x81843e}=await import('./promotions.js'),_0x258037=_0x81843e['getRankName'](_0x3df16b),_0x20c8c5=_0x23e28c['name'];await _0x81843e[_0x53a9e3(0x25f)](_0x355208,_0x5e4526,_0x3df16b,_0x23e28c[_0x53a9e3(0x2d0)],_0x258037,_0x20c8c5,'promotion',{'displayName':_0x5e4526,'source':'admin','adminUser':_0x43e930['email'],'ladder':_0x6f4d12}),console[_0x53a9e3(0x3bb)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x80069d){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x80069d);}return alert('Successfully\x20promoted\x20'+_0x5e4526+_0x53a9e3(0x3bd)+_0x23e28c['name']+'\x20('+_0x23e28c['elo']+')'),currentLadder===_0x6f4d12&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x36d0c0){console['error']('Error\x20promoting\x20player:',_0x36d0c0),alert(_0x53a9e3(0x24c)+_0x36d0c0['message']);throw _0x36d0c0;}}document[a0_0x34a2a3(0x211)]('DOMContentLoaded',()=>{const _0x528f79=document['getElementById']('promote-form');_0x528f79&&_0x528f79['addEventListener']('submit',async _0x452bc0=>{const _0x31330f=a0_0x5ce8;_0x452bc0[_0x31330f(0x282)]();const _0x1309fa=document[_0x31330f(0x183)]('promote-username')[_0x31330f(0x288)]['trim'](),_0x1d706e=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x1309fa){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x1309fa,_0x1d706e),document['getElementById'](_0x31330f(0x193))['classList'][_0x31330f(0x2c6)]('active'),document[_0x31330f(0x183)](_0x31330f(0x346))['value']='';}catch(_0x365a1a){console['error']('Error\x20in\x20promotion:',_0x365a1a);}});});async function demotePlayer(_0x5dad85,_0x50c3b5){const _0x887e53=a0_0x34a2a3;try{console['log'](_0x887e53(0x373)+_0x5dad85+_0x887e53(0x314)+_0x50c3b5+'\x20ladder');const _0x190c23=auth['currentUser'];if(!_0x190c23)throw new Error(_0x887e53(0x360));const _0x275a81=_0x50c3b5==='D2'?'playersD2':'players',_0xb6ba17=_0x50c3b5==='D2'?'eloHistoryD2':'eloHistory';console[_0x887e53(0x3bb)]('Searching\x20for\x20player\x20in\x20'+_0x275a81);const _0x3f6275=collection(db,_0x275a81),_0x428c83=query(_0x3f6275,where('username','==',_0x5dad85)),_0x12286a=await getDocs(_0x428c83);if(_0x12286a[_0x887e53(0x381)]){alert('Player\x20not\x20found\x20in\x20'+_0x50c3b5+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x50c3b5+'\x20ladder');}const _0x2569cd=_0x12286a['docs'][0x0],_0x4c6adf=_0x2569cd['data'](),_0x372f8f=_0x4c6adf[_0x887e53(0x2e8)]||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x372f8f);const _0x5c2514=[{'name':_0x887e53(0x1ce),'elo':0x708},{'name':_0x887e53(0x15a),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0xca653f=_0x5c2514['find'](_0x3824a4=>_0x3824a4['elo']<_0x372f8f);if(!_0xca653f){alert(_0x887e53(0x1cb)+_0x50c3b5+_0x887e53(0x3c1));throw new Error(_0x887e53(0x1cb)+_0x50c3b5+_0x887e53(0x3c1));}console[_0x887e53(0x3bb)]('Demoting\x20player\x20to\x20'+_0xca653f['name']+'\x20('+_0xca653f[_0x887e53(0x2d0)]+')'),await updateDoc(doc(db,_0x275a81,_0x2569cd['id']),{'eloRating':_0xca653f[_0x887e53(0x2d0)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x190c23[_0x887e53(0x212)]||'admin'}),await addDoc(collection(db,_0xb6ba17),{'player':_0x5dad85,'previousElo':_0x372f8f,'newElo':_0xca653f[_0x887e53(0x2d0)],'timestamp':serverTimestamp(),'type':_0x887e53(0x284),'rankAchieved':_0xca653f['name'],'demotedBy':_0x190c23['email']||_0x887e53(0x2e9),'gameMode':_0x50c3b5});try{const {promotionManager:_0xed42e1}=await import('./promotions.js'),_0x64bb5=_0xed42e1['getRankName'](_0x372f8f),_0x30921f=_0xca653f['name'];await _0xed42e1['sendPromotionNotification'](_0x2569cd['id'],_0x5dad85,_0x372f8f,_0xca653f[_0x887e53(0x2d0)],_0x64bb5,_0x30921f,_0x887e53(0x284),{'displayName':_0x5dad85,'source':_0x887e53(0x2e9),'adminUser':_0x190c23[_0x887e53(0x212)],'ladder':_0x50c3b5}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x8bb86a){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x8bb86a);}return alert('Successfully\x20demoted\x20'+_0x5dad85+'\x20to\x20'+_0xca653f[_0x887e53(0x333)]+'\x20('+_0xca653f[_0x887e53(0x2d0)]+')'),currentLadder===_0x50c3b5&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x143794){console['error']('Error\x20demoting\x20player:',_0x143794),alert('Error\x20demoting\x20player:\x20'+_0x143794['message']);throw _0x143794;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x597a8c=a0_0x34a2a3,_0x202219=document['getElementById']('demote-form');_0x202219&&_0x202219[_0x597a8c(0x211)]('submit',async _0x10eb42=>{const _0x115f64=_0x597a8c;_0x10eb42['preventDefault']();const _0x3f973c=document['getElementById'](_0x115f64(0x223))[_0x115f64(0x288)][_0x115f64(0x355)](),_0x9e6597=document[_0x115f64(0x2f7)](_0x115f64(0x2e6))['value'];if(!_0x3f973c){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x3f973c,_0x9e6597),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')[_0x115f64(0x288)]='';}catch(_0x56a9d0){console[_0x115f64(0x27f)]('Error\x20in\x20demotion:',_0x56a9d0);}});});async function setCustomElo(_0x2dcaa5,_0x1c41f3,_0x5c6c03){const _0x1823c7=a0_0x34a2a3;try{const _0x47c5f9=auth['currentUser'];if(!_0x47c5f9||!isAdmin(_0x47c5f9[_0x1823c7(0x212)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x322f90=_0x5c6c03==='D2'?_0x1823c7(0x2b5):'players',_0x3d613a=_0x5c6c03==='D2'?_0x1823c7(0x20b):_0x1823c7(0x29a),_0x53ca84=collection(db,_0x322f90),_0x16f30a=query(_0x53ca84,where('username','==',_0x2dcaa5)),_0x1c1c86=await getDocs(_0x16f30a);if(_0x1c1c86['empty'])throw new Error(_0x1823c7(0x2aa)+_0x5c6c03+'\x20ladder');const _0x4b9ca1=_0x1c1c86['docs'][0x0],_0x50e9b6=_0x4b9ca1['data'](),_0x4e474d=_0x50e9b6['eloRating']||0x4b0,_0xf99da7=writeBatch(db);_0xf99da7['update'](doc(db,_0x322f90,_0x4b9ca1['id']),{'eloRating':_0x1c41f3,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x47c5f9[_0x1823c7(0x212)]});const _0x2a74cc=doc(collection(db,_0x3d613a));return _0xf99da7[_0x1823c7(0x231)](_0x2a74cc,{'player':_0x2dcaa5,'previousElo':_0x4e474d,'newElo':_0x1c41f3,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x47c5f9['email'],'gameMode':_0x5c6c03}),await _0xf99da7['commit'](),showNotification(_0x1823c7(0x379)+_0x2dcaa5+'\x20was\x20updated\x20from\x20'+_0x4e474d+'\x20to\x20'+_0x1c41f3,'success'),currentLadder===_0x5c6c03&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x2426dc){console['error']('Error\x20setting\x20custom\x20ELO:',_0x2426dc);throw _0x2426dc;}}async function setUserRole(_0x4eae40,_0x97c8f7,_0x3ec85d){const _0x349d00=a0_0x34a2a3;try{const _0x1b5598=auth[_0x349d00(0x339)];if(!_0x1b5598||!isAdmin(_0x1b5598['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x2a4f24=_0x97c8f7?_0x97c8f7[_0x349d00(0x355)]():null,_0x321435=_0x2a4f24?_0x3ec85d||'#808080':null,[_0x58d1bb,_0x4752c8]=await Promise[_0x349d00(0x18d)]([getDocs(query(collection(db,'players'),where('username','==',_0x4eae40))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x4eae40)))]),_0x49c2be=[];if(!_0x58d1bb['empty'])_0x49c2be['push']({'ref':_0x58d1bb[_0x349d00(0x20d)][0x0]['ref'],'source':'D1'});if(!_0x4752c8['empty'])_0x49c2be['push']({'ref':_0x4752c8['docs'][0x0]['ref'],'source':'D2'});if(_0x49c2be[_0x349d00(0x2d4)]===0x0){const [_0x95e7ba,_0xab4e04]=await Promise['all']([getDocs(query(collection(db,_0x349d00(0x324)),where(_0x349d00(0x297),'==',_0x4eae40))),getDocs(query(collection(db,'userProfiles'),where(_0x349d00(0x297),'==',_0x4eae40)))]);if(!_0x95e7ba['empty'])_0x49c2be['push']({'ref':_0x95e7ba[_0x349d00(0x20d)][0x0]['ref'],'source':'NonParticipant'});if(!_0xab4e04['empty'])_0x49c2be[_0x349d00(0x26d)]({'ref':_0xab4e04['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x49c2be['length']===0x0)throw new Error(_0x349d00(0x2a0)+_0x4eae40+_0x349d00(0x2fa));const _0x551528=writeBatch(db);_0x49c2be['forEach'](_0x3bcb86=>{const _0x3f48d8=_0x349d00;console['log']('Updating\x20role\x20for\x20'+_0x4eae40+'\x20in\x20'+_0x3bcb86['source']),!_0x2a4f24?_0x551528['update'](_0x3bcb86[_0x3f48d8(0x2e7)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x551528[_0x3f48d8(0x199)](_0x3bcb86['ref'],{'roleName':_0x2a4f24,'roleColor':_0x321435,'roleAssignedBy':_0x1b5598['email'],'roleAssignedAt':serverTimestamp()});}),await _0x551528['commit']();const _0xb4b24f=_0x2a4f24?_0x349d00(0x305)+_0x2a4f24+'\x22\x20set':'Role\x20removed';return showNotification(_0xb4b24f+_0x349d00(0x175)+_0x4eae40+'\x22','success'),!![];}catch(_0xa64798){console['error']('Error\x20setting\x20user\x20role:',_0xa64798),showNotification('Error:\x20'+_0xa64798['message'],'error');throw _0xa64798;}}function showNotification(_0x43db07,_0x5b19b1='info'){const _0x5bc68e=a0_0x34a2a3,_0x5cc162=document['createElement'](_0x5bc68e(0x1da));_0x5cc162['className']='notification\x20'+_0x5b19b1,_0x5cc162['innerHTML']=_0x5bc68e(0x320)+getNotificationIcon(_0x5b19b1)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x43db07+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20',document['body'][_0x5bc68e(0x312)](_0x5cc162),setTimeout(()=>{const _0x2c1325=_0x5bc68e;_0x5cc162['classList'][_0x2c1325(0x2e1)]('active');},0xa);const _0x537b3f=setTimeout(()=>{closeNotification(_0x5cc162);},0x1388);_0x5cc162[_0x5bc68e(0x2f7)]('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x537b3f),closeNotification(_0x5cc162);});}function getNotificationIcon(_0x1ad535){const _0x19a590=a0_0x34a2a3;switch(_0x1ad535){case'success':return _0x19a590(0x259);case'error':return'fa-exclamation-circle';case _0x19a590(0x210):return'fa-exclamation-triangle';case _0x19a590(0x18b):default:return _0x19a590(0x36c);}}function closeNotification(_0x5e6a84){_0x5e6a84['classList']['remove']('active'),setTimeout(()=>{_0x5e6a84['remove']();},0x12c);}function setupUserRolesSection(){const _0x3f65d2=a0_0x34a2a3,_0x275ba7=document['getElementById']('load-users-data');_0x275ba7&&_0x275ba7[_0x3f65d2(0x211)](_0x3f65d2(0x16a),function(){const _0x248fe2=_0x3f65d2;this['classList']['add']('loading'),this[_0x248fe2(0x26a)]=_0x248fe2(0x30a),loadUsersWithRoles()['then'](()=>{const _0x3900bb=_0x248fe2;this['classList']['remove'](_0x3900bb(0x35a)),this[_0x3900bb(0x26a)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x23db59=>{console['error']('Error\x20loading\x20users:',_0x23db59),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x549546=document['getElementById'](_0x3f65d2(0x326));_0x549546&&_0x549546['addEventListener']('click',()=>{const _0x1744b1=_0x3f65d2,_0x1d2b06=document[_0x1744b1(0x183)]('set-role-modal');_0x1d2b06&&_0x1d2b06[_0x1744b1(0x2ab)]['add'](_0x1744b1(0x2d7));});const _0x2a210c=document[_0x3f65d2(0x183)](_0x3f65d2(0x203));_0x2a210c&&_0x2a210c['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x54eea0=document[_0x3f65d2(0x183)]('role-filter');_0x54eea0&&_0x54eea0['addEventListener'](_0x3f65d2(0x295),filterUsersTable);}function a0_0x5ce8(_0x5c402f,_0x54f4ea){const _0x573b67=a0_0x1666();return a0_0x5ce8=function(_0x552f7e,_0x47552d){_0x552f7e=_0x552f7e-0x15a;let _0x53a1fd=_0x573b67[_0x552f7e];return _0x53a1fd;},a0_0x5ce8(_0x5c402f,_0x54f4ea);}async function loadUsersWithRoles(){const _0x48ee6d=a0_0x34a2a3,_0x33f64b=document['getElementById'](_0x48ee6d(0x343));if(!_0x33f64b)return;_0x33f64b['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x50acf4,_0x28987d,_0x47e563,_0x4166ae]=await Promise[_0x48ee6d(0x18d)]([getDocs(collection(db,_0x48ee6d(0x351))),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x2b9ee8=new Map();function _0x29d13a(_0x1b88c0,_0x1b17de){_0x1b88c0['forEach'](_0x2b08d8=>{const _0x3e196c=a0_0x5ce8,_0x37c0b6=_0x2b08d8['data']();if(!_0x37c0b6['username'])return;if(!_0x2b9ee8['has'](_0x37c0b6['username']))_0x2b9ee8['set'](_0x37c0b6[_0x3e196c(0x297)],{'username':_0x37c0b6['username'],'roleName':_0x37c0b6[_0x3e196c(0x2c2)]||null,'roleColor':_0x37c0b6['roleColor']||null,'roleAssignedBy':_0x37c0b6['roleAssignedBy']||null,'roleAssignedAt':_0x37c0b6['roleAssignedAt']||null,'sources':[_0x1b17de]});else{const _0x154e13=_0x2b9ee8['get'](_0x37c0b6[_0x3e196c(0x297)]);_0x37c0b6[_0x3e196c(0x2c2)]&&(!_0x154e13['roleName']||_0x1b17de==='D1'||_0x1b17de==='D2')&&(_0x154e13['roleName']=_0x37c0b6['roleName'],_0x154e13[_0x3e196c(0x24b)]=_0x37c0b6[_0x3e196c(0x24b)],_0x154e13[_0x3e196c(0x1ca)]=_0x37c0b6[_0x3e196c(0x1ca)],_0x154e13['roleAssignedAt']=_0x37c0b6[_0x3e196c(0x22c)]),!_0x154e13['sources'][_0x3e196c(0x24f)](_0x1b17de)&&_0x154e13['sources']['push'](_0x1b17de);}});}_0x29d13a(_0x50acf4,'D1'),_0x29d13a(_0x28987d,'D2'),_0x29d13a(_0x47e563,'Non-Participant'),_0x29d13a(_0x4166ae,_0x48ee6d(0x336));const _0x5edc55=Array['from'](_0x2b9ee8[_0x48ee6d(0x2c9)]())['sort']((_0x4c822e,_0x4976ff)=>_0x4c822e['username']['localeCompare'](_0x4976ff['username']));if(_0x5edc55['length']===0x0){_0x33f64b['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x33f64b[_0x48ee6d(0x26a)]='',_0x5edc55['forEach'](_0x502f20=>{const _0x3562ab=_0x48ee6d,_0x25bb6a=document['createElement']('tr');_0x25bb6a['dataset']['username']=_0x502f20['username'],_0x25bb6a['dataset'][_0x3562ab(0x2c2)]=_0x502f20[_0x3562ab(0x2c2)]||'',_0x25bb6a['dataset'][_0x3562ab(0x24b)]=_0x502f20['roleColor']||'#808080';const _0x3904d4=_0x502f20['roleAssignedAt']?new Date(_0x502f20['roleAssignedAt'][_0x3562ab(0x2a5)]*0x3e8)['toLocaleDateString']():'N/A',_0x640b09=_0x502f20['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x502f20['roleColor']+_0x3562ab(0x19e)+getContrastColor(_0x502f20['roleColor'])+';\x22>'+_0x502f20[_0x3562ab(0x2c2)]+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x25bb6a['innerHTML']=_0x3562ab(0x1d2)+_0x502f20['username']+_0x3562ab(0x31e)+_0x502f20['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x640b09+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x502f20['roleAssignedBy']||_0x3562ab(0x2d8))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3904d4+_0x3562ab(0x32c)+_0x502f20['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x502f20['roleName']?_0x3562ab(0x396)+_0x502f20['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x33f64b['appendChild'](_0x25bb6a);}),document[_0x48ee6d(0x32e)]('.edit-role-btn')[_0x48ee6d(0x291)](_0x3c067f=>{_0x3c067f['addEventListener']('click',()=>{const _0x5c32c1=a0_0x5ce8,_0x5bb3c8=_0x3c067f[_0x5c32c1(0x1c5)][_0x5c32c1(0x297)];openRoleEditModal(_0x5bb3c8);});}),document[_0x48ee6d(0x32e)]('.remove-role-btn')[_0x48ee6d(0x291)](_0x5df0d7=>{const _0x5c041e=_0x48ee6d;_0x5df0d7['addEventListener'](_0x5c041e(0x16a),()=>{const _0x59aab3=_0x5c041e,_0x336083=_0x5df0d7['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x336083+'?')&&setUserRole(_0x336083,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0xd1e3a6=>console[_0x59aab3(0x27f)]('Error\x20removing\x20role:',_0xd1e3a6));});});}catch(_0x38cbe2){console['error'](_0x48ee6d(0x21f),_0x38cbe2),_0x33f64b[_0x48ee6d(0x26a)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x47e188){const _0x37bb84=a0_0x34a2a3;console['log'](_0x37bb84(0x37c),_0x47e188);const _0x5dea38=document[_0x37bb84(0x183)]('set-role-modal'),_0x51c6a5=document['getElementById'](_0x37bb84(0x1c7)),_0x29b4f7=document['getElementById'](_0x37bb84(0x310));if(!_0x5dea38){console[_0x37bb84(0x27f)]('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert(_0x37bb84(0x1c1));return;}console[_0x37bb84(0x3bb)]('Modal\x20element\x20found:',_0x5dea38);_0x51c6a5?(_0x51c6a5['value']=_0x47e188,console[_0x37bb84(0x3bb)](_0x37bb84(0x37a)+_0x47e188)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x531b5c=document['querySelector'](_0x37bb84(0x23e)+_0x47e188+'\x22]');if(_0x531b5c&&_0x29b4f7){const _0x516859=_0x531b5c['dataset']['role'];_0x29b4f7[_0x37bb84(0x288)]=_0x516859===_0x37bb84(0x385)?'':_0x516859,console['log']('Role\x20select\x20set\x20to:\x20'+_0x29b4f7['value']+'\x20(based\x20on\x20data-role:\x20'+_0x516859+')');}else{if(!_0x531b5c)console['warn']('Table\x20row\x20for\x20user\x20'+_0x47e188+_0x37bb84(0x219));if(!_0x29b4f7)console[_0x37bb84(0x19b)](_0x37bb84(0x214));if(_0x29b4f7)_0x29b4f7['value']='';}console[_0x37bb84(0x3bb)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x5dea38['classList']['add']('active');const _0x57a4d5=document['getElementById']('cancel-role-btn');_0x57a4d5?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x57a4d5['removeEventListener']('click',closeModalHandler),_0x57a4d5['addEventListener']('click',closeModalHandler)):console[_0x37bb84(0x19b)]('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x5dea38[_0x37bb84(0x33f)]('click',closeModalBackgroundHandler),_0x5dea38[_0x37bb84(0x211)]('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x338530){const _0x8f4a72=a0_0x34a2a3;_0x338530[_0x8f4a72(0x19a)]===this&&closeModalHandler();}function closeModalHandler(){const _0x581fd1=document['getElementById']('set-role-modal');_0x581fd1&&(_0x581fd1['classList']['remove']('active'),_0x581fd1['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x2647a2=a0_0x34a2a3,_0x2ac5aa=document['getElementById']('user-search')?.[_0x2647a2(0x288)][_0x2647a2(0x225)]()||'',_0x14cfcb=document[_0x2647a2(0x183)](_0x2647a2(0x3bf))?.['value']||_0x2647a2(0x18d),_0x4bf9e8=document[_0x2647a2(0x32e)](_0x2647a2(0x292));let _0x3c6d76=0x0;_0x4bf9e8['forEach'](_0x11fa79=>{const _0x7dffbd=_0x2647a2;if(_0x11fa79['querySelector'](_0x7dffbd(0x386))||_0x11fa79['querySelector']('.empty-state')||_0x11fa79[_0x7dffbd(0x2f7)]('.error-state'))return;const _0x3e8916=_0x11fa79['dataset']['username']?.[_0x7dffbd(0x225)]()||'',_0x36a043=_0x11fa79[_0x7dffbd(0x1c5)]['role']||'none',_0x38f1c4=_0x3e8916['includes'](_0x2ac5aa),_0x582e52=_0x14cfcb==='all'||_0x36a043===_0x14cfcb;_0x38f1c4&&_0x582e52?(_0x11fa79['style']['display']='',_0x3c6d76++):_0x11fa79['style'][_0x7dffbd(0x366)]='none';});if(_0x3c6d76===0x0&&_0x4bf9e8['length']>0x0){const _0x4e43bd=document['getElementById']('users-table-body');if(_0x4e43bd){if(!_0x4e43bd[_0x2647a2(0x2f7)]('.no-results')){const _0x48e6d9=document[_0x2647a2(0x39b)]('tr');_0x48e6d9['classList']['add'](_0x2647a2(0x216)),_0x48e6d9['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x4e43bd[_0x2647a2(0x312)](_0x48e6d9);}}}else{const _0x317313=document['querySelector']('.no-results');_0x317313&&_0x317313[_0x2647a2(0x2c6)]();}}function setupManageArticlesSection(){const _0x4a36b5=a0_0x34a2a3,_0x221390=document['getElementById']('load-articles-data');_0x221390&&_0x221390['addEventListener']('click',function(){const _0x3090f9=a0_0x5ce8;this['classList'][_0x3090f9(0x2e1)](_0x3090f9(0x35a)),this['innerHTML']=_0x3090f9(0x30a),loadArticles()[_0x3090f9(0x376)](()=>{const _0x2d2fb1=_0x3090f9;this[_0x2d2fb1(0x2ab)][_0x2d2fb1(0x2c6)]('loading'),this['innerHTML']=_0x2d2fb1(0x2f2);})['catch'](_0x1e3001=>{const _0x4471a3=_0x3090f9;console[_0x4471a3(0x27f)]('Error\x20loading\x20articles:',_0x1e3001),this['classList']['remove'](_0x4471a3(0x35a)),this[_0x4471a3(0x26a)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x14ae7a=document[_0x4a36b5(0x183)]('create-new-article-btn');_0x14ae7a?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x14ae7a['style'][_0x4a36b5(0x366)]='block',_0x14ae7a['addEventListener'](_0x4a36b5(0x16a),()=>{openArticleModal();})):console[_0x4a36b5(0x27f)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x4ab0af=document['getElementById']('article-form');_0x4ab0af&&_0x4ab0af['addEventListener']('submit',_0x119534=>{_0x119534['preventDefault'](),saveArticle();});const _0x1e45fb=document['getElementById']('cancel-article-btn');_0x1e45fb&&_0x1e45fb['addEventListener']('click',()=>{closeArticleModal();});const _0x208b04=document['querySelector'](_0x4a36b5(0x19d));_0x208b04&&_0x208b04['addEventListener'](_0x4a36b5(0x16a),()=>{closeArticleModal();});const _0x92264c=document[_0x4a36b5(0x183)]('article-modal');_0x92264c&&_0x92264c['addEventListener']('click',_0x27238e=>{const _0x569713=_0x4a36b5;_0x27238e[_0x569713(0x19a)]===_0x92264c&&closeArticleModal();});}async function loadArticles(){const _0x4892c4=a0_0x34a2a3,_0xba09c8=document[_0x4892c4(0x183)](_0x4892c4(0x2a4));if(!_0xba09c8)return;_0xba09c8['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x6a013b=collection(db,'articles'),_0x9aa190=query(_0x6a013b,orderBy('createdAt',_0x4892c4(0x36e))),_0x2aa393=await getDocs(_0x9aa190);if(_0x2aa393['empty']){_0xba09c8['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0xba09c8[_0x4892c4(0x26a)]='',_0x2aa393['forEach'](_0x21a2b6=>{const _0x5b96f7=_0x4892c4,_0x36fdd2=_0x21a2b6[_0x5b96f7(0x1cc)](),_0x1cecef=document['createElement']('tr'),_0x4e0752=_0x36fdd2['createdAt']?new Date(_0x36fdd2[_0x5b96f7(0x1fa)]['seconds']*0x3e8)[_0x5b96f7(0x38d)]():_0x5b96f7(0x2d8);_0x1cecef['innerHTML']=_0x5b96f7(0x1d2)+(_0x36fdd2['title']||'Untitled')+_0x5b96f7(0x1ed)+(_0x36fdd2[_0x5b96f7(0x290)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4e0752+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x21a2b6['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x21a2b6['id']+_0x5b96f7(0x34f),_0xba09c8[_0x5b96f7(0x312)](_0x1cecef);}),setupArticleActionButtons();}catch(_0x31c6e7){console[_0x4892c4(0x27f)]('Error\x20loading\x20articles:',_0x31c6e7),_0xba09c8[_0x4892c4(0x26a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x31c6e7[_0x4892c4(0x17d)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x8c0047=a0_0x34a2a3;document['querySelectorAll'](_0x8c0047(0x27c))['forEach'](_0x701897=>{const _0x10ece2=_0x8c0047;_0x701897['addEventListener'](_0x10ece2(0x16a),async _0x4b0101=>{const _0x48b116=_0x4b0101['currentTarget']['dataset']['id'];openArticleModal(_0x48b116);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0xdd9e40=>{_0xdd9e40['addEventListener']('click',async _0x25a502=>{const _0x374569=a0_0x5ce8,_0x4de99d=_0x25a502[_0x374569(0x281)]['dataset']['id'];confirmDeleteArticle(_0x4de99d);});});}function openArticleModal(_0x5c571e=null){const _0x4e3b41=a0_0x34a2a3,_0x5d5357=document[_0x4e3b41(0x183)]('article-modal'),_0x19a24f=document['getElementById'](_0x4e3b41(0x1d8)),_0x5f08cb=document['getElementById'](_0x4e3b41(0x2b4)),_0x4d9df0=document['getElementById']('article-id');_0x5f08cb['reset'](),_0x4d9df0['value']='';if(_0x5c571e)_0x19a24f['textContent']='Edit\x20Article',_0x4d9df0['value']=_0x5c571e,loadArticleData(_0x5c571e);else{_0x19a24f['textContent']='Create\x20Article';const _0x2ccd80=auth['currentUser'];if(_0x2ccd80){const _0x4d6a8a=document['getElementById']('article-author');if(_0x4d6a8a&&_0x2ccd80['displayName'])_0x4d6a8a['value']=_0x2ccd80[_0x4e3b41(0x2bd)];else _0x4d6a8a&&(_0x4d6a8a['value']=_0x2ccd80['email']);}}_0x5d5357['classList']['add']('active');}async function loadArticleData(_0x3504dd){const _0x395c40=a0_0x34a2a3;try{const _0x4c6b17=doc(db,_0x395c40(0x274),_0x3504dd),_0x529e47=await getDoc(_0x4c6b17);if(!_0x529e47['exists']()){showNotification(_0x395c40(0x1a8),_0x395c40(0x27f));return;}const _0x1fa89c=_0x529e47['data']();document['getElementById']('article-title')[_0x395c40(0x288)]=_0x1fa89c[_0x395c40(0x1d4)]||'',document['getElementById'](_0x395c40(0x1ba))[_0x395c40(0x288)]=_0x1fa89c['author']||'',document[_0x395c40(0x183)]('article-image-url')['value']=_0x1fa89c['imageUrl']||'',document['getElementById']('article-content')['value']=_0x1fa89c['content']||'';}catch(_0x647c35){console[_0x395c40(0x27f)]('Error\x20loading\x20article\x20data:',_0x647c35),showNotification(_0x395c40(0x384),_0x395c40(0x27f));}}async function saveArticle(){const _0x5b21b4=a0_0x34a2a3;try{const _0x22db0f=document['getElementById']('article-id')['value'],_0x7426e2=document['getElementById'](_0x5b21b4(0x2a9))['value']['trim'](),_0x1244af=document[_0x5b21b4(0x183)]('article-author')['value']['trim'](),_0x496e62=document['getElementById']('article-image-url')['value']['trim'](),_0xee257d=document[_0x5b21b4(0x183)](_0x5b21b4(0x20c))['value'][_0x5b21b4(0x355)]();if(!_0x7426e2||!_0xee257d){showNotification(_0x5b21b4(0x2ff),'error');return;}const _0x468906=auth['currentUser'];if(!_0x468906){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x1b075a={'title':_0x7426e2,'author':_0x1244af,'imageUrl':_0x496e62||null,'content':_0xee257d,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x468906[_0x5b21b4(0x212)]};!_0x22db0f?(_0x1b075a['createdAt']=serverTimestamp(),_0x1b075a['createdBy']=_0x468906['email'],await addDoc(collection(db,'articles'),_0x1b075a),showNotification(_0x5b21b4(0x2ac),'success')):(await updateDoc(doc(db,'articles',_0x22db0f),_0x1b075a),showNotification('Article\x20updated\x20successfully',_0x5b21b4(0x3a4))),closeArticleModal(),loadArticles();}catch(_0x495013){console['error'](_0x5b21b4(0x23f),_0x495013),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x495013['message'],'error');}}function closeArticleModal(){const _0x3315d5=document['getElementById']('article-modal');_0x3315d5&&_0x3315d5['classList']['remove']('active');}async function confirmDeleteArticle(_0x31f0c8){const _0x1da094=a0_0x34a2a3;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x1da094(0x274),_0x31f0c8)),loadArticles(),showNotification(_0x1da094(0x189),_0x1da094(0x3a4));}catch(_0x454fe0){console[_0x1da094(0x27f)]('Error\x20deleting\x20article:',_0x454fe0),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x454fe0['message'],'error');}}function setupTrophyManagementSection(){const _0x56aa1b=a0_0x34a2a3,_0x4ef867=document['getElementById'](_0x56aa1b(0x178));_0x4ef867&&_0x4ef867[_0x56aa1b(0x211)]('click',function(){const _0x489421=_0x56aa1b;this[_0x489421(0x2ab)][_0x489421(0x2e1)](_0x489421(0x35a)),this['innerHTML']=_0x489421(0x30a);const _0x1c4d2a=document['getElementById'](_0x489421(0x260));_0x1c4d2a&&(_0x1c4d2a['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x15e699=_0x489421;this[_0x15e699(0x2ab)]['remove'](_0x15e699(0x35a)),this[_0x15e699(0x26a)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x1ce50d=>{const _0x52f0f9=_0x489421;console['error'](_0x52f0f9(0x1cd),_0x1ce50d),this['classList']['remove'](_0x52f0f9(0x35a)),this[_0x52f0f9(0x26a)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x20ecab=_0x52f0f9;this['innerHTML']=_0x20ecab(0x364);},0xbb8);});});const _0x356034=document['getElementById']('create-new-trophy-btn');_0x356034&&_0x356034[_0x56aa1b(0x211)]('click',()=>{openTrophyModal();});const _0xcd7b35=document[_0x56aa1b(0x183)](_0x56aa1b(0x1f7));_0xcd7b35&&_0xcd7b35[_0x56aa1b(0x211)](_0x56aa1b(0x16d),_0x3523c3=>{_0x3523c3['preventDefault'](),saveTrophyDefinition();});const _0x140ea2=document['getElementById']('cancel-trophy-btn');_0x140ea2&&_0x140ea2['addEventListener'](_0x56aa1b(0x16a),()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x3060d5=>{_0x3060d5['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x249900=document['getElementById'](_0x56aa1b(0x184));_0x249900&&_0x249900[_0x56aa1b(0x211)]('click',_0x5759e2=>{_0x5759e2['target']===_0x249900&&closeTrophyModal();});const _0xcd5b08=document[_0x56aa1b(0x183)]('assign-trophy-modal');_0xcd5b08&&_0xcd5b08[_0x56aa1b(0x211)]('click',_0x2709eb=>{_0x2709eb['target']===_0xcd5b08&&closeAssignTrophyModal();});const _0x393adf=document['getElementById']('assign-trophy-form');_0x393adf&&_0x393adf[_0x56aa1b(0x211)]('submit',_0x2d07e4=>{const _0x1f8950=_0x56aa1b;_0x2d07e4[_0x1f8950(0x282)](),assignTrophyToPlayer();});const _0x264c26=document['getElementById']('cancel-assign-btn');_0x264c26&&_0x264c26['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x114c78=document['getElementById'](_0x56aa1b(0x1b0));_0x114c78&&(_0x114c78['addEventListener'](_0x56aa1b(0x1c3),updateTrophyImagePreview),_0x114c78[_0x56aa1b(0x211)]('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x95f06b=a0_0x34a2a3,_0x1bd4e7=document['getElementById']('trophy-image-url')['value'][_0x95f06b(0x355)](),_0x527c70=document['getElementById']('trophy-image-preview');if(!_0x527c70){const _0x4e132d=document[_0x95f06b(0x183)]('trophy-image-url')['closest'](_0x95f06b(0x163)),_0x2346aa=document['createElement']('div');_0x2346aa['id']=_0x95f06b(0x35e),_0x2346aa['className']=_0x95f06b(0x1b1),_0x4e132d[_0x95f06b(0x312)](_0x2346aa);const _0x3e92af=document['createElement'](_0x95f06b(0x243));_0x3e92af['id']='trophy-preview-img',_0x3e92af['alt']=_0x95f06b(0x1eb),_0x3e92af['onerror']=function(){const _0x269687=_0x95f06b;this[_0x269687(0x1d3)]=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x2346aa['appendChild'](_0x3e92af);}const _0x10e589=document['getElementById']('trophy-preview-img');_0x1bd4e7?(_0x10e589['src']=_0x1bd4e7,_0x10e589[_0x95f06b(0x17e)]['display']='block',_0x10e589['classList']['remove']('error')):(_0x10e589[_0x95f06b(0x1d3)]=DEFAULT_TROPHY_IMAGE,_0x10e589['style']['display']='block');}async function loadTrophyDefinitions(){const _0x24d4a0=a0_0x34a2a3,_0x3694e3=document[_0x24d4a0(0x183)]('trophies-table-body');if(!_0x3694e3)return;_0x3694e3['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x341593=collection(db,_0x24d4a0(0x251)),_0x5e8160=query(_0x341593,orderBy(_0x24d4a0(0x1fa),_0x24d4a0(0x36e))),_0x58460e=await getDocs(_0x5e8160);if(_0x58460e['empty']){_0x3694e3['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x3694e3['innerHTML']='',_0x58460e['forEach'](_0x16de14=>{const _0x2d69f0=_0x24d4a0,_0x234f5c=_0x16de14['data'](),_0x437a2a=document['createElement']('tr'),_0x2d3b93=_0x234f5c[_0x2d69f0(0x1fa)]?new Date(_0x234f5c['createdAt'][_0x2d69f0(0x2a5)]*0x3e8)[_0x2d69f0(0x38d)]():'N/A';_0x437a2a[_0x2d69f0(0x26a)]=_0x2d69f0(0x1b2)+(_0x234f5c['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x234f5c['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x234f5c['name']||'Untitled\x20Trophy')+_0x2d69f0(0x329)+(_0x234f5c['rarity']||_0x2d69f0(0x32b))+'\x22>'+(_0x234f5c['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2d3b93+_0x2d69f0(0x347)+_0x16de14['id']+_0x2d69f0(0x2d6)+_0x16de14['id']+_0x2d69f0(0x3af)+_0x16de14['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3694e3['appendChild'](_0x437a2a);}),setupTrophyActionButtons();}catch(_0x25ae20){console['error'](_0x24d4a0(0x3a9),_0x25ae20),_0x3694e3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x25ae20['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x460b20=a0_0x34a2a3;document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x21d785=>{const _0x4ba180=a0_0x5ce8;_0x21d785['addEventListener'](_0x4ba180(0x16a),_0x2cb13d=>{const _0x63abec=_0x4ba180,_0x11ed63=_0x2cb13d[_0x63abec(0x281)]['dataset']['id'];openTrophyModal(_0x11ed63);});}),document[_0x460b20(0x32e)](_0x460b20(0x1a7))[_0x460b20(0x291)](_0x50ee71=>{const _0xa32057=_0x460b20;_0x50ee71['addEventListener'](_0xa32057(0x16a),_0x2e3388=>{const _0x4364e4=_0xa32057,_0x4dd651=_0x2e3388[_0x4364e4(0x281)][_0x4364e4(0x1c5)]['id'];openAssignTrophyModal(_0x4dd651);});}),document[_0x460b20(0x32e)]('.delete-trophy-btn')[_0x460b20(0x291)](_0x240ca3=>{_0x240ca3['addEventListener']('click',_0x1e1998=>{const _0x549deb=a0_0x5ce8,_0x5d0803=_0x1e1998[_0x549deb(0x281)]['dataset']['id'];confirmDeleteTrophy(_0x5d0803);});});}function openTrophyModal(_0x5e33ea=null){const _0x13017b=a0_0x34a2a3,_0x51d47e=document['getElementById']('trophy-modal'),_0x5a7cbf=document['getElementById'](_0x13017b(0x21d)),_0x1eaa85=document['getElementById']('trophy-form'),_0x3ffed4=document['getElementById']('trophy-id');_0x1eaa85['reset'](),_0x3ffed4[_0x13017b(0x288)]='';const _0x2e4610=document['getElementById'](_0x13017b(0x208));_0x2e4610&&(_0x2e4610[_0x13017b(0x1d3)]=DEFAULT_TROPHY_IMAGE,_0x2e4610['classList']['remove']('error')),_0x5e33ea?(_0x5a7cbf[_0x13017b(0x31f)]='Edit\x20Trophy',_0x3ffed4[_0x13017b(0x288)]=_0x5e33ea,loadTrophyData(_0x5e33ea)):_0x5a7cbf['textContent']='Create\x20New\x20Trophy',_0x51d47e['classList'][_0x13017b(0x2e1)]('active');}async function loadTrophyData(_0x167b71){const _0x4cc6d0=a0_0x34a2a3;try{const _0x2930fc=doc(db,'trophyDefinitions',_0x167b71),_0x1f757a=await getDoc(_0x2930fc);if(!_0x1f757a[_0x4cc6d0(0x35f)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x208fe9=_0x1f757a['data']();document['getElementById']('trophy-name')[_0x4cc6d0(0x288)]=_0x208fe9['name']||'',document[_0x4cc6d0(0x183)]('trophy-description')['value']=_0x208fe9['description']||'',document[_0x4cc6d0(0x183)](_0x4cc6d0(0x1b0))[_0x4cc6d0(0x288)]=_0x208fe9[_0x4cc6d0(0x241)]||'',document['getElementById']('trophy-rarity')[_0x4cc6d0(0x288)]=_0x208fe9[_0x4cc6d0(0x1c2)]||'common',updateTrophyImagePreview();}catch(_0xf9dce9){console['error']('Error\x20loading\x20trophy\x20data:',_0xf9dce9),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x5b3e9a=a0_0x34a2a3;try{const _0x235242=document['getElementById']('trophy-id')[_0x5b3e9a(0x288)],_0x226e7c=document[_0x5b3e9a(0x183)]('trophy-name')['value']['trim'](),_0x31d54b=document[_0x5b3e9a(0x183)]('trophy-description')['value'][_0x5b3e9a(0x355)](),_0x499c79=document['getElementById']('trophy-image-url')['value'][_0x5b3e9a(0x355)](),_0x57c9ab=document['getElementById']('trophy-rarity')['value'];if(!_0x226e7c||!_0x31d54b||!_0x499c79){showNotification('All\x20fields\x20are\x20required',_0x5b3e9a(0x27f));return;}const _0x5c871e=auth['currentUser'];if(!_0x5c871e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies',_0x5b3e9a(0x27f));return;}const _0x184285={'name':_0x226e7c,'description':_0x31d54b,'image':_0x499c79,'rarity':_0x57c9ab,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5c871e[_0x5b3e9a(0x212)]};!_0x235242?(_0x184285['createdAt']=serverTimestamp(),_0x184285['createdBy']=_0x5c871e['email'],await addDoc(collection(db,'trophyDefinitions'),_0x184285),showNotification('Trophy\x20created\x20successfully',_0x5b3e9a(0x3a4))):(await updateDoc(doc(db,'trophyDefinitions',_0x235242),_0x184285),showNotification(_0x5b3e9a(0x325),'success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x1d135f){console[_0x5b3e9a(0x27f)]('Error\x20saving\x20trophy:',_0x1d135f),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x1d135f[_0x5b3e9a(0x17d)],'error');}}function closeTrophyModal(){const _0x5c868d=a0_0x34a2a3,_0x4205af=document['getElementById']('trophy-modal');_0x4205af&&_0x4205af['classList'][_0x5c868d(0x2c6)]('active');}async function confirmDeleteTrophy(_0x142eae){const _0x5e1f49=a0_0x34a2a3;if(!_0x142eae){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x4e815a=auth['currentUser'];if(!_0x4e815a){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies',_0x5e1f49(0x27f));return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x142eae),await deleteDoc(doc(db,'trophyDefinitions',_0x142eae)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x558376){console['error'](_0x5e1f49(0x1aa),_0x558376),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x558376['message'],'error');}}async function openAssignTrophyModal(_0x1b99c4){const _0x74469c=a0_0x34a2a3;try{const _0x2b8367=doc(db,'trophyDefinitions',_0x1b99c4),_0x7c6e6f=await getDoc(_0x2b8367);if(!_0x7c6e6f[_0x74469c(0x35f)]()){showNotification(_0x74469c(0x1d5),_0x74469c(0x27f));return;}const _0x286de1=_0x7c6e6f[_0x74469c(0x1cc)]();document['getElementById']('assign-trophy-id')[_0x74469c(0x288)]=_0x1b99c4,document[_0x74469c(0x183)]('assign-trophy-name')['value']=_0x286de1['name'],document['getElementById']('assign-trophy-image')['src']=_0x286de1['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x286de1[_0x74469c(0x333)]||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x286de1['description']||_0x74469c(0x296);const _0x24b8f7=document['getElementById']('assign-trophy-rarity');_0x24b8f7['textContent']=_0x286de1['rarity']||_0x74469c(0x32b),_0x24b8f7['className']=_0x74469c(0x29f)+(_0x286de1['rarity']||'common');const _0x3c5083=document['getElementById']('assign-trophy-modal');_0x3c5083['classList']['add']('active');}catch(_0x4b7147){console[_0x74469c(0x27f)]('Error\x20opening\x20assign\x20trophy\x20modal:',_0x4b7147),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x4cedc4=a0_0x34a2a3,_0x49964d=document[_0x4cedc4(0x183)]('assign-trophy-modal');_0x49964d&&_0x49964d[_0x4cedc4(0x2ab)][_0x4cedc4(0x2c6)]('active');}async function assignTrophyToPlayer(){const _0x1ed468=a0_0x34a2a3;try{const _0x2a1cba=document['getElementById']('assign-trophy-id')[_0x1ed468(0x288)],_0x5c940c=document[_0x1ed468(0x183)]('assign-trophy-name')['value'],_0x43df5f=document['getElementById'](_0x1ed468(0x357))['value']['trim'](),_0x15cb6f=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x2a1cba||!_0x43df5f){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x1c443b=auth[_0x1ed468(0x339)];if(!_0x1c443b){showNotification(_0x1ed468(0x1ac),_0x1ed468(0x27f));return;}let _0x185a56=null,_0x1b34f9=null,_0x38761b=null;if(_0x15cb6f==='non-participant'){const _0x1db9d0=collection(db,_0x1ed468(0x324)),_0x2ec10b=query(_0x1db9d0,where('username','==',_0x43df5f)),_0x325a2d=await getDocs(_0x2ec10b);!_0x325a2d['empty']&&(_0x185a56=_0x325a2d['docs'][0x0],_0x1b34f9=_0x185a56['id'],_0x38761b=_0x185a56[_0x1ed468(0x1cc)]());}else{const _0x49452c=_0x15cb6f==='D1'?_0x1ed468(0x351):_0x15cb6f==='D2'?'playersD2':'playersD3',_0xead51=collection(db,_0x49452c),_0x597031=query(_0xead51,where('username','==',_0x43df5f)),_0x284fcf=await getDocs(_0x597031);!_0x284fcf['empty']&&(_0x185a56=_0x284fcf[_0x1ed468(0x20d)][0x0],_0x1b34f9=_0x185a56['id'],_0x38761b=_0x185a56['data']());}if(!_0x185a56){showNotification('Player\x20\x22'+_0x43df5f+'\x22\x20not\x20found\x20in\x20'+(_0x15cb6f==='non-participant'?'non-participants':_0x15cb6f+'\x20ladder'),_0x1ed468(0x27f));return;}const _0x4a2890=collection(db,'userTrophies'),_0x4c933a=query(_0x4a2890,where('userId','==',_0x1b34f9),where(_0x1ed468(0x1a1),'==',_0x2a1cba)),_0x20718e=await getDocs(_0x4c933a);if(!_0x20718e['empty']){showNotification('Player\x20\x22'+_0x43df5f+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x1b34f9,'playerUsername':_0x43df5f,'trophyId':_0x2a1cba,'awardedAt':serverTimestamp(),'awardedBy':_0x1c443b['email'],'ladder':_0x15cb6f}),showNotification(_0x1ed468(0x32f)+_0x5c940c+'\x22\x20awarded\x20to\x20'+_0x43df5f,_0x1ed468(0x3a4)),closeAssignTrophyModal();}catch(_0x3d5c4a){console['error']('Error\x20assigning\x20trophy:',_0x3d5c4a),showNotification(_0x1ed468(0x369)+_0x3d5c4a['message'],'error');}}function setupInactivePlayersSection(){const _0x3907cd=a0_0x34a2a3,_0x36f39c=document['getElementById'](_0x3907cd(0x20a));_0x36f39c&&_0x36f39c['addEventListener']('change',function(){const _0x4db13c=_0x3907cd,_0x10c65e=document['getElementById'](_0x4db13c(0x1e1));if(_0x10c65e)_0x10c65e['click']();});const _0x2b302f=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x377230=document['querySelector'](_0x3907cd(0x1e4));_0x2b302f&&_0x377230&&(_0x2b302f['addEventListener'](_0x3907cd(0x295),function(){const _0x22d6a9=_0x3907cd;if(this['checked']){currentLadder='D1';if(document['getElementById']('inactive-players')['style'][_0x22d6a9(0x366)]!==_0x22d6a9(0x385)){const _0x53c60f=document['getElementById'](_0x22d6a9(0x1e1));if(_0x53c60f)_0x53c60f[_0x22d6a9(0x16a)]();}}}),_0x377230['addEventListener'](_0x3907cd(0x295),function(){const _0x3b2655=_0x3907cd;if(this[_0x3b2655(0x371)]){currentLadder='D2';if(document['getElementById']('inactive-players')['style']['display']!==_0x3b2655(0x385)){const _0x596d50=document['getElementById'](_0x3b2655(0x1e1));if(_0x596d50)_0x596d50[_0x3b2655(0x16a)]();}}}));const _0x5cc6b9=document[_0x3907cd(0x183)]('inactive-players-search');_0x5cc6b9&&_0x5cc6b9['addEventListener']('input',debounce(function(){const _0x56cc74=_0x3907cd,_0x348b3e=_0x5cc6b9[_0x56cc74(0x288)]['toLowerCase'](),_0x5adab5=document[_0x56cc74(0x32e)]('#inactive-players-table-body\x20tr');_0x5adab5['forEach'](_0x5a6d48=>{const _0xc6915a=_0x56cc74;if(_0x5a6d48[_0xc6915a(0x2f7)]('.loading-cell')||_0x5a6d48['querySelector']('.empty-state')||_0x5a6d48['querySelector']('.error-state'))return;const _0xd63ce1=_0x5a6d48['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x2322e9=_0x5a6d48[_0xc6915a(0x33a)][0x5]?.['textContent'][_0xc6915a(0x225)]()||'';_0xd63ce1['includes'](_0x348b3e)||_0x2322e9['includes'](_0x348b3e)?_0x5a6d48['style'][_0xc6915a(0x366)]='':_0x5a6d48['style'][_0xc6915a(0x366)]='none';});},0x12c)),document[_0x3907cd(0x211)]('click',function(_0x365ee2){const _0x3a3f5b=_0x3907cd;if(_0x365ee2[_0x3a3f5b(0x19a)]['closest'](_0x3a3f5b(0x380))){const _0x1ad3df=_0x365ee2['target']['closest'](_0x3a3f5b(0x380)),_0xd435e0=_0x1ad3df['dataset']['username'];_0xd435e0&&alert('View\x20player\x20details\x20for\x20'+_0xd435e0+'\x20-\x20Feature\x20coming\x20soon');}}),console['log'](_0x3907cd(0x265));}async function loadInactivePlayersData(){const _0x356cce=a0_0x34a2a3,_0x1bc96b=document[_0x356cce(0x183)](_0x356cce(0x3bc));if(!_0x1bc96b)return;_0x1bc96b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x346e13=document['getElementById']('inactive-days-filter'),_0xa22cc1=_0x346e13?parseInt(_0x346e13['value'])||0x0:0x0,_0x5108ee=collection(db,currentLadder==='D1'?'players':_0x356cce(0x2b5)),_0x25fe8a=await getDocs(_0x5108ee);if(_0x25fe8a['empty']){_0x1bc96b['innerHTML']=_0x356cce(0x3a2);return;}const _0x3a0645=[];_0x25fe8a['forEach'](_0x5dae21=>{const _0x4c0d4a=_0x5dae21['data']();_0x3a0645['push']({..._0x4c0d4a,'id':_0x5dae21['id'],'username':_0x4c0d4a['username']||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x3a0645['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x515482=currentLadder==='D1'?_0x356cce(0x28f):_0x356cce(0x262),_0x46c75b=_0x3a0645['map'](async _0xca592f=>{const _0x524741=_0x356cce;try{const _0x5b544b=collection(db,_0x515482),_0xf863f5=query(_0x5b544b,or(where('winnerUsername','==',_0xca592f['username']),where('loserUsername','==',_0xca592f['username'])),orderBy(_0x524741(0x27e),'desc'),limit(0x1)),_0x42c81e=await getDocs(_0xf863f5);if(!_0x42c81e[_0x524741(0x381)]){const _0x59ae8e=_0x42c81e['docs'][0x0]['data'](),_0x2247ff=_0x59ae8e['approvedAt']?new Date(_0x59ae8e['approvedAt']['seconds']*0x3e8):null,_0x509485=new Date(),_0x270be0=_0x2247ff?Math['floor']((_0x509485-_0x2247ff)/(0x3e8*0x3c*0x3c*0x18)):null,_0x60958a=_0x59ae8e['winnerUsername']===_0xca592f['username']?_0x59ae8e['loserUsername']:_0x59ae8e['winnerUsername'],_0x3f5a60=_0x59ae8e['winnerUsername']===_0xca592f[_0x524741(0x297)]?'Won':'Lost';return{..._0xca592f,'lastMatch':{'date':_0x2247ff?_0x2247ff['toLocaleDateString']():_0x524741(0x2d8),'opponent':_0x60958a||'Unknown','result':_0x3f5a60,'timestamp':_0x2247ff||new Date(0x0),'daysSinceMatch':_0x270be0||Number['MAX_SAFE_INTEGER']}};}else return{..._0xca592f,'lastMatch':{'date':_0x524741(0x3b1),'opponent':_0x524741(0x2d8),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x35817c){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0xca592f['username']+':',_0x35817c),{..._0xca592f,'lastMatch':{'date':_0x524741(0x215),'opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x45fe1a=await Promise['all'](_0x46c75b);_0x45fe1a['sort']((_0x30f8fe,_0x1c4055)=>_0x1c4055['lastMatch']['daysSinceMatch']-_0x30f8fe['lastMatch']['daysSinceMatch']);_0xa22cc1>0x0&&(_0x45fe1a=_0x45fe1a['filter'](_0x16e4d4=>_0x16e4d4['lastMatch']['daysSinceMatch']>=_0xa22cc1));_0x1bc96b[_0x356cce(0x26a)]='';if(_0x45fe1a['length']===0x0){_0x1bc96b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x45fe1a['forEach'](_0x4feea0=>{const _0x200e00=_0x356cce,_0x256779=document['createElement']('tr'),_0x4654f6=_0x4feea0['lastMatch'][_0x200e00(0x23c)]>0x1e?'highly-inactive':_0x4feea0['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x256779['className']=_0x4654f6,_0x256779['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4feea0[_0x200e00(0x297)]+_0x200e00(0x1ed)+(_0x4feea0[_0x200e00(0x2e8)]||0x4b0)+_0x200e00(0x1ed)+_0x4feea0['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4feea0['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x4feea0['lastMatch'][_0x200e00(0x23c)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4feea0[_0x200e00(0x344)][_0x200e00(0x2a6)]==='Never\x20played'?'No\x20matches\x20found':_0x4feea0['lastMatch']['result']+_0x200e00(0x244)+_0x4feea0['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x4feea0['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1bc96b['appendChild'](_0x256779);}),console['log']('Displaying\x20'+_0x45fe1a['length']+'\x20inactive\x20players');}catch(_0x390e6c){console[_0x356cce(0x27f)]('Error\x20loading\x20inactive\x20players:',_0x390e6c),_0x1bc96b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x390e6c['message']+_0x356cce(0x2e3);}}function setupHighlightButtons(){const _0x4e4a52=a0_0x34a2a3;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x3ba5ad=document['getElementById']('create-match-highlight-btn');_0x3ba5ad&&_0x3ba5ad['addEventListener']('click',function(){const _0x26de68=a0_0x5ce8;console[_0x26de68(0x3bb)]('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x303a42=document['getElementById'](_0x4e4a52(0x18f));_0x303a42&&_0x303a42['addEventListener']('click',function(){console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x339325=document['getElementById']('create-achievement-highlight-btn');_0x339325&&_0x339325['addEventListener']('click',function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x2741cd=a0_0x34a2a3(0x190)){const _0x26abeb=a0_0x34a2a3;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x2741cd);const _0x35b2dc=document['getElementById'](_0x26abeb(0x1d0)),_0x4d689c=document[_0x26abeb(0x183)]('highlight-form'),_0x3d821a=document['getElementById'](_0x26abeb(0x3aa)),_0x21aa60=document['getElementById']('highlight-id');if(!_0x35b2dc||!_0x4d689c||!_0x3d821a){console['error'](_0x26abeb(0x28a));return;}_0x4d689c[_0x26abeb(0x30d)](),_0x21aa60['value']='';const _0x450516=['match',_0x26abeb(0x2c5),'achievement'],_0x1c0859=!_0x450516['includes'](_0x2741cd);if(_0x1c0859){const _0x226b98=_0x2741cd;_0x21aa60[_0x26abeb(0x288)]=_0x226b98,_0x3d821a[_0x26abeb(0x31f)]='Loading...',loadHighlightDataAdmin(_0x226b98);}else{const _0xe86ed9=_0x2741cd;document['getElementById']('highlight-type')['value']=_0xe86ed9,_0x3d821a[_0x26abeb(0x31f)]='Create\x20New\x20'+getHighlightTypeName(_0xe86ed9),toggleHighlightFields(_0xe86ed9);const _0x5e564e=auth['currentUser'];_0x5e564e&&document[_0x26abeb(0x183)]('highlight-submitted-by')&&(document[_0x26abeb(0x183)]('highlight-submitted-by')['value']=_0x5e564e['displayName']||_0x5e564e['email']);}_0x35b2dc[_0x26abeb(0x2ab)]['add']('active');}function toggleHighlightFields(_0x261b5e){const _0x6fd28a=a0_0x34a2a3;console[_0x6fd28a(0x3bb)]('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x261b5e);const _0x4729d2=document[_0x6fd28a(0x183)]('highlight-form');if(!_0x4729d2)return;const _0x4d62c4=_0x4729d2['querySelectorAll']('.form-group,\x20.form-row');_0x4d62c4[_0x6fd28a(0x291)](_0x13ac81=>_0x13ac81['style'][_0x6fd28a(0x366)]='none');const _0x19c8e2=document[_0x6fd28a(0x183)]('highlight-video-preview-container');if(_0x19c8e2)_0x19c8e2['style'][_0x6fd28a(0x366)]='none';const _0x28c2e2=['highlight-title-container',_0x6fd28a(0x1ec),'highlight-submitted-by-container'];_0x28c2e2['forEach'](_0x4155ee=>{const _0x18cab3=_0x6fd28a,_0x3bbb0f=document[_0x18cab3(0x183)](_0x4155ee);if(_0x3bbb0f)_0x3bbb0f['style']['display']=_0x18cab3(0x353);});if(_0x261b5e==='match'){const _0x50870c=[_0x6fd28a(0x34c),'highlight-match-info-container',_0x6fd28a(0x306),_0x6fd28a(0x2b1),'highlight-players-container',_0x6fd28a(0x19f)];_0x50870c[_0x6fd28a(0x291)](_0x90648b=>{const _0x4f20d6=_0x6fd28a,_0x3dfe4e=document[_0x4f20d6(0x183)](_0x90648b);_0x3dfe4e&&(_0x90648b==='highlight-players-container'?_0x3dfe4e['style'][_0x4f20d6(0x366)]='flex':_0x3dfe4e['style']['display']='block');});const _0x42551c=document['getElementById']('highlight-video-id');if(_0x42551c){_0x42551c[_0x6fd28a(0x1e2)]=!![];const _0x2be628=_0x42551c['previousElementSibling'];if(_0x2be628)_0x2be628['innerHTML']=_0x6fd28a(0x1bc);}if(_0x19c8e2)_0x19c8e2['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x261b5e==='creator'){const _0x3a1cc3=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container',_0x6fd28a(0x263),_0x6fd28a(0x34c)];_0x3a1cc3['forEach'](_0x34b358=>{const _0x26aa35=_0x6fd28a,_0x4a3e96=document['getElementById'](_0x34b358);if(_0x4a3e96)_0x4a3e96['style'][_0x26aa35(0x366)]=_0x26aa35(0x353);});const _0x1f2316=document['getElementById']('highlight-video-id');if(_0x1f2316){_0x1f2316[_0x6fd28a(0x1e2)]=![];const _0x3cb57e=_0x1f2316['previousElementSibling'];if(_0x3cb57e)_0x3cb57e[_0x6fd28a(0x26a)]=_0x6fd28a(0x187);}}else{if(_0x261b5e==='achievement'){const _0x42586c=['highlight-achievement-player-container','highlight-achievement-type-container',_0x6fd28a(0x1ae),'highlight-player-profile-container','highlight-achievement-image-container',_0x6fd28a(0x34c)];_0x42586c['forEach'](_0x30010a=>{const _0x441638=_0x6fd28a,_0x4e01e3=document['getElementById'](_0x30010a);if(_0x4e01e3)_0x4e01e3['style'][_0x441638(0x366)]='block';});const _0x36b3cd=document['getElementById']('highlight-video-id');if(_0x36b3cd){_0x36b3cd[_0x6fd28a(0x1e2)]=![];const _0x23b613=_0x36b3cd[_0x6fd28a(0x3ac)];if(_0x23b613)_0x23b613['innerHTML']=_0x6fd28a(0x187);}}}}}async function loadHighlightDataAdmin(_0x261bd5){const _0x437c22=a0_0x34a2a3;try{const _0x1c808a=doc(db,'highlights',_0x261bd5),_0x41d906=await getDoc(_0x1c808a);if(!_0x41d906[_0x437c22(0x35f)]()){showNotification(_0x437c22(0x1b4),'error');return;}const _0x1fac63=_0x41d906['data'](),_0x4ef1e4=_0x1fac63[_0x437c22(0x195)]||_0x437c22(0x190);document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x4ef1e4),document['getElementById'](_0x437c22(0x271))['value']=_0x4ef1e4,toggleHighlightFields(_0x4ef1e4),document[_0x437c22(0x183)]('highlight-title')[_0x437c22(0x288)]=_0x1fac63['title']||'',document['getElementById'](_0x437c22(0x1f6))['value']=_0x1fac63['description']||'',document['getElementById']('highlight-submitted-by')[_0x437c22(0x288)]=_0x1fac63['submittedBy']||'';_0x1fac63[_0x437c22(0x2c3)]&&(document[_0x437c22(0x183)]('highlight-video-id')[_0x437c22(0x288)]=_0x1fac63[_0x437c22(0x2c3)],updateHighlightVideoPreview());if(_0x4ef1e4==='match'){document[_0x437c22(0x183)](_0x437c22(0x315))[_0x437c22(0x288)]=_0x1fac63['matchInfo']||'',document[_0x437c22(0x183)]('highlight-map')['value']=_0x1fac63['map']||'';if(_0x1fac63['matchDate']){const _0x3fa225=new Date(_0x1fac63['matchDate']['seconds']*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x3fa225['toISOString']()['split']('T')[0x0];}document['getElementById'](_0x437c22(0x1f3))['value']=_0x1fac63['winnerName']||'',document['getElementById']('highlight-winner-score')['value']=_0x1fac63['winnerScore']||'',document[_0x437c22(0x183)]('highlight-loser-name')[_0x437c22(0x288)]=_0x1fac63['loserName']||'',document['getElementById']('highlight-loser-score')[_0x437c22(0x288)]=_0x1fac63['loserScore']||'',document[_0x437c22(0x183)]('highlight-match-link')[_0x437c22(0x288)]=_0x1fac63['matchLink']||'';}else{if(_0x4ef1e4==='creator')document['getElementById']('highlight-map')['value']=_0x1fac63['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x1fac63['mapCreator']||'',document['getElementById']('highlight-map-version')['value']=_0x1fac63['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x1fac63['creatorImageUrl']||'';else _0x4ef1e4==='achievement'&&(document['getElementById'](_0x437c22(0x1f4))['value']=_0x1fac63['achievementPlayer']||'',document['getElementById'](_0x437c22(0x2c1))['value']=_0x1fac63['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x1fac63['achievementDetails']||'',document[_0x437c22(0x183)]('highlight-player-profile')['value']=_0x1fac63[_0x437c22(0x3a0)]||'',document['getElementById'](_0x437c22(0x1b7))[_0x437c22(0x288)]=_0x1fac63['achievementImageUrl']||'');}}catch(_0x2c71ba){console[_0x437c22(0x27f)](_0x437c22(0x2ce),_0x2c71ba),showNotification('Error\x20loading\x20highlight:\x20'+_0x2c71ba[_0x437c22(0x17d)],_0x437c22(0x27f));}}async function saveHighlight(){const _0x1920ad=a0_0x34a2a3;try{const _0x34d36d=document[_0x1920ad(0x183)](_0x1920ad(0x389))?.['value']||'',_0x3c441b=document['getElementById'](_0x1920ad(0x271))?.['value']||'match',_0xc34d30={'title':document['getElementById'](_0x1920ad(0x256))?.['value']?.['trim']()||'','description':document[_0x1920ad(0x183)]('highlight-description')?.['value']?.[_0x1920ad(0x355)]()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.[_0x1920ad(0x288)]?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.[_0x1920ad(0x288)]?.['trim']()||null,'type':_0x3c441b};if(!_0xc34d30['title']){showNotification(_0x1920ad(0x3a1),_0x1920ad(0x27f));return;}if(_0x3c441b===_0x1920ad(0x190)){_0xc34d30[_0x1920ad(0x177)]=document['getElementById'](_0x1920ad(0x315))?.[_0x1920ad(0x288)]?.[_0x1920ad(0x355)]()||'',_0xc34d30['map']=document['getElementById'](_0x1920ad(0x2dc))?.['value']?.['trim']()||'';const _0x486df0=document['getElementById']('highlight-match-date'),_0x129e8e=_0x486df0?.['value']||'';_0xc34d30['matchDate']=_0x129e8e?Timestamp['fromDate'](new Date(_0x129e8e)):null,_0xc34d30[_0x1920ad(0x253)]=document[_0x1920ad(0x183)]('highlight-winner-name')?.['value']?.[_0x1920ad(0x355)]()||'',_0xc34d30['winnerScore']=document['getElementById'](_0x1920ad(0x37d))?.['value']?.['trim']()||'',_0xc34d30['loserName']=document[_0x1920ad(0x183)]('highlight-loser-name')?.['value']?.[_0x1920ad(0x355)]()||'',_0xc34d30['loserScore']=document['getElementById'](_0x1920ad(0x33c))?.['value']?.['trim']()||'',_0xc34d30['matchLink']=document[_0x1920ad(0x183)]('highlight-match-link')?.['value']?.['trim']()||'';if(!_0xc34d30[_0x1920ad(0x2c3)]){showNotification(_0x1920ad(0x1c4),'error');return;}}else{if(_0x3c441b===_0x1920ad(0x2c5)){_0xc34d30['map']=document[_0x1920ad(0x183)]('highlight-map')?.['value']?.[_0x1920ad(0x355)]()||'',_0xc34d30['mapCreator']=document['getElementById']('highlight-map-creator')?.['value']?.[_0x1920ad(0x355)]()||'',_0xc34d30['mapVersion']=document['getElementById'](_0x1920ad(0x1ea))?.[_0x1920ad(0x288)]?.['trim']()||'',_0xc34d30[_0x1920ad(0x280)]=document[_0x1920ad(0x183)]('highlight-creator-image')?.['value']?.['trim']()||'';if(!_0xc34d30[_0x1920ad(0x32d)]){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x3c441b==='achievement'){_0xc34d30['achievementPlayer']=document[_0x1920ad(0x183)]('highlight-achievement-player')?.['value']?.[_0x1920ad(0x355)]()||'',_0xc34d30['achievementType']=document['getElementById']('highlight-achievement-type')?.[_0x1920ad(0x288)]?.[_0x1920ad(0x355)]()||'',_0xc34d30[_0x1920ad(0x2a8)]=document['getElementById'](_0x1920ad(0x318))?.['value']?.['trim']()||'',_0xc34d30['playerProfileUrl']=document[_0x1920ad(0x183)]('highlight-player-profile')?.['value']?.['trim']()||'',_0xc34d30[_0x1920ad(0x202)]=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0xc34d30['achievementPlayer']){showNotification(_0x1920ad(0x34e),'error');return;}}}}_0x34d36d?(_0xc34d30[_0x1920ad(0x18e)]=serverTimestamp(),await updateDoc(doc(db,_0x1920ad(0x194),_0x34d36d),_0xc34d30),showNotification(_0x1920ad(0x3b9),_0x1920ad(0x3a4))):(_0xc34d30[_0x1920ad(0x1fa)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0xc34d30),showNotification('Highlight\x20created\x20successfully!',_0x1920ad(0x3a4))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x3bab84){console[_0x1920ad(0x27f)](_0x1920ad(0x191),_0x3bab84),showNotification(_0x1920ad(0x383)+_0x3bab84[_0x1920ad(0x17d)],'error');}}function closeHighlightModal(){const _0x29d4b9=a0_0x34a2a3,_0x5517d7=document[_0x29d4b9(0x183)]('highlight-modal');if(_0x5517d7)_0x5517d7['classList']['remove']('active');}function getHighlightTypeName(_0x1d550f){const _0x29266d=a0_0x34a2a3;switch(_0x1d550f){case'match':return'Match\x20Highlight';case _0x29266d(0x2c5):return'Featured\x20Creator';case _0x29266d(0x1bb):return'Player\x20Achievement';default:return _0x29266d(0x227);}}function updateHighlightVideoPreview(){const _0x555156=a0_0x34a2a3,_0x522ff6=document['getElementById']('highlight-video-id'),_0x382ee1=document['getElementById']('highlight-video-preview-container'),_0x1716d3=document['getElementById']('highlight-video-preview');if(!_0x522ff6||!_0x1716d3||!_0x382ee1)return;const _0x29a84c=_0x522ff6['value']['trim']();_0x29a84c&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x29a84c)?(_0x1716d3[_0x555156(0x1d3)]='https://www.youtube.com/embed/'+_0x29a84c,_0x382ee1[_0x555156(0x17e)]['display']='block'):(_0x1716d3['src']='',_0x382ee1['style'][_0x555156(0x366)]=_0x555156(0x385));}async function loadHighlightsAdmin(){const _0x39fd5c=a0_0x34a2a3,_0x5ca68b=document['getElementById']('highlights-table-body');if(!_0x5ca68b)return;_0x5ca68b['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x5590d9=query(collection(db,_0x39fd5c(0x194)),orderBy('createdAt','desc')),_0x172824=await getDocs(_0x5590d9);if(_0x172824['empty']){_0x5ca68b['innerHTML']=_0x39fd5c(0x266);return;}_0x5ca68b['innerHTML']='',_0x172824[_0x39fd5c(0x291)](_0x422e02=>{const _0x2498cb=_0x39fd5c,_0x5779fd=_0x422e02['data'](),_0x3b0c53=document['createElement']('tr'),_0x5d412e=_0x5779fd[_0x2498cb(0x1fa)]?new Date(_0x5779fd['createdAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';let _0x21eddb='Unknown',_0x433aa4='';switch(_0x5779fd['type']){case'match':_0x21eddb=_0x2498cb(0x269),_0x433aa4='match-type';break;case'creator':_0x21eddb='Creator',_0x433aa4='creator-type';break;case'achievement':_0x21eddb=_0x2498cb(0x2ef),_0x433aa4='achievement-type';break;}_0x3b0c53[_0x2498cb(0x26a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5779fd['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x433aa4+'\x22>'+_0x21eddb+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5d412e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5779fd['submittedBy']||_0x2498cb(0x161))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5779fd['videoId']?_0x2498cb(0x2ec):'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x422e02['id']+_0x2498cb(0x1c0)+_0x422e02['id']+_0x2498cb(0x2cb),_0x5ca68b['appendChild'](_0x3b0c53);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x457fb3=>{_0x457fb3['addEventListener']('click',_0xefd185=>{openHighlightModal(_0xefd185['currentTarget']['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x5cb33b=>{const _0x15b165=_0x39fd5c;_0x5cb33b['addEventListener'](_0x15b165(0x16a),_0x2c4d30=>{const _0x393de6=_0x15b165;confirmDeleteHighlight(_0x2c4d30['currentTarget'][_0x393de6(0x1c5)]['id']);});});}catch(_0x101e14){console['error']('Error\x20loading\x20highlights:',_0x101e14),_0x5ca68b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x101e14['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x3a07bb){const _0x1a2e3d=a0_0x34a2a3;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x3a07bb)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x5a3e07){console['error'](_0x1a2e3d(0x1b6),_0x5a3e07),showNotification('Error\x20deleting\x20highlight:\x20'+_0x5a3e07['message'],'error');}}function setupCreateTestMatchModal(){const _0x394ae0=a0_0x34a2a3;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x38f263=document['getElementById']('create-test-match-modal'),_0x2f7232=document['getElementById']('create-test-match-form');if(!_0x38f263){console[_0x394ae0(0x27f)](_0x394ae0(0x29d));return;}if(!_0x2f7232){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x4d5528=_0x38f263['cloneNode'](!![]);_0x38f263['parentNode']['replaceChild'](_0x4d5528,_0x38f263);const _0x182577=_0x4d5528['querySelector']('#create-test-match-form');_0x4d5528['addEventListener']('click',function(_0x3f23db){_0x3f23db['target']===_0x4d5528&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x5b2cef=_0x4d5528['querySelector']('.close-btn');_0x5b2cef&&_0x5b2cef[_0x394ae0(0x211)]('click',function(_0x41d197){_0x41d197['preventDefault'](),_0x41d197['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x1fcdf6=_0x4d5528['querySelector']('#cancel-create-test-match-btn');_0x1fcdf6&&_0x1fcdf6['addEventListener']('click',function(_0x778f58){const _0x438a2c=_0x394ae0;_0x778f58[_0x438a2c(0x282)](),_0x778f58['stopPropagation'](),console[_0x438a2c(0x3bb)](_0x438a2c(0x387)),closeCreateTestMatchModal();});if(_0x182577){_0x182577['addEventListener']('submit',function(_0x5d5a27){const _0x1da899=_0x394ae0;_0x5d5a27['preventDefault'](),_0x5d5a27[_0x1da899(0x1f2)](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x3e23e8=_0x182577['querySelector']('button[type=\x22submit\x22]');_0x3e23e8&&_0x3e23e8['addEventListener'](_0x394ae0(0x16a),function(_0xecab36){const _0x30443c=_0x394ae0;_0xecab36[_0x30443c(0x282)](),_0xecab36[_0x30443c(0x1f2)](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0xd4213c=a0_0x34a2a3;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x1a8e17=document[_0xd4213c(0x183)]('highlight-form');_0x1a8e17&&_0x1a8e17['addEventListener'](_0xd4213c(0x16d),_0x2faa14=>{const _0x42d8ec=_0xd4213c;_0x2faa14[_0x42d8ec(0x282)](),saveHighlight();});const _0x38102f=document['getElementById']('cancel-highlight-btn');_0x38102f&&_0x38102f['addEventListener']('click',closeHighlightModal);const _0x3790c5=document['querySelector']('#highlight-modal\x20.close-btn');_0x3790c5&&_0x3790c5[_0xd4213c(0x211)](_0xd4213c(0x16a),closeHighlightModal);const _0x521454=document['getElementById']('highlight-modal');_0x521454&&_0x521454[_0xd4213c(0x211)]('click',_0x594bd7=>{_0x594bd7['target']===_0x521454&&closeHighlightModal();});const _0x3e6b0d=document['getElementById']('highlight-video-id');_0x3e6b0d&&_0x3e6b0d[_0xd4213c(0x211)](_0xd4213c(0x1c3),()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x526f15=a0_0x34a2a3;console['log'](_0x526f15(0x308));const _0x356567=document['getElementById']('matches-prev-page'),_0x368e96=document[_0x526f15(0x183)]('matches-next-page');_0x356567&&_0x356567['addEventListener']('click',()=>{const _0x5b98df=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x5b98df]['page']-0x1);});_0x368e96&&_0x368e96[_0x526f15(0x211)](_0x526f15(0x16a),()=>{const _0x1ef751=_0x526f15,_0x37bec7=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x37bec7][_0x1ef751(0x1e6)]+0x1);});const _0xfecad0=document['getElementById']('apply-matches-filters'),_0x45e62e=document[_0x526f15(0x183)](_0x526f15(0x36d));_0xfecad0&&_0xfecad0['addEventListener']('click',applyMatchesFilters);_0x45e62e&&_0x45e62e['addEventListener'](_0x526f15(0x16a),resetMatchesFilters);const _0x3d525b=document[_0x526f15(0x183)]('matches-search');_0x3d525b&&_0x3d525b['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x1f72d9=document[_0x526f15(0x183)]('resimulate-match-btn');_0x1f72d9&&_0x1f72d9['addEventListener']('click',openResimulateModal);const _0x572fcf=document['getElementById']('resimulate-modal');if(_0x572fcf){const _0xea03f4=_0x572fcf['querySelector']('.close');_0xea03f4&&_0xea03f4['addEventListener'](_0x526f15(0x16a),closeResimulateModal),_0x572fcf[_0x526f15(0x211)]('click',_0x3eefec=>{_0x3eefec['target']===_0x572fcf&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x526f15(0x26e));}function openCreateTestMatchModal(){const _0x526bc5=a0_0x34a2a3;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x2c535c=document['getElementById'](_0x526bc5(0x17c)),_0x5f3ca5=document['getElementById']('create-test-match-form');if(!_0x2c535c){console[_0x526bc5(0x27f)]('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x5f3ca5){console[_0x526bc5(0x27f)]('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x5f3ca5['reset']();const _0x1b21c7=document[_0x526bc5(0x32e)]('input[name=\x22test-match-ladder\x22]');let _0x1739e0=![];_0x1b21c7['forEach'](_0x4addb0=>{const _0x151401=_0x526bc5;console[_0x151401(0x3bb)]('Found\x20radio\x20with\x20value:',_0x4addb0['value']),_0x4addb0['value']===currentLadder&&(_0x4addb0[_0x151401(0x371)]=!![],_0x1739e0=!![],console['log'](_0x151401(0x18c),currentLadder));});if(!_0x1739e0){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x4e2b88=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x4e2b88&&(_0x4e2b88['checked']=!![],console['log'](_0x526bc5(0x2db)));}const _0x2a86f6=document['getElementById']('test-match-date');if(_0x2a86f6){const _0x5e1a68=new Date()['toISOString']()['split']('T')[0x0];_0x2a86f6[_0x526bc5(0x288)]=_0x5e1a68;}_0x2c535c['style']['display']=_0x526bc5(0x226),_0x2c535c['style']['visibility']='visible',_0x2c535c[_0x526bc5(0x17e)]['opacity']='1',_0x2c535c['classList']['add']('active'),console[_0x526bc5(0x3bb)](_0x526bc5(0x37f));const _0x5f28d5=document['getElementById']('test-match-winner-username');_0x5f28d5&&setTimeout(()=>{_0x5f28d5['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x3c5161=a0_0x34a2a3;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x15e0de=document['getElementById']('create-test-match-modal');if(!_0x15e0de){console[_0x3c5161(0x27f)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x15e0de[_0x3c5161(0x2ab)]['remove'](_0x3c5161(0x2d7)),_0x15e0de['style'][_0x3c5161(0x3a7)]='0',_0x15e0de['style'][_0x3c5161(0x1a9)]='hidden',setTimeout(()=>{const _0x153a80=_0x3c5161;!_0x15e0de['classList'][_0x153a80(0x2af)](_0x153a80(0x2d7))&&(_0x15e0de[_0x153a80(0x17e)][_0x153a80(0x366)]=_0x153a80(0x385));},0x12c),console[_0x3c5161(0x3bb)]('Modal\x20closed');}async function createTestMatch(){const _0x174de0=a0_0x34a2a3;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x14d4e6=auth['currentUser'];if(!_0x14d4e6){showNotification(_0x174de0(0x319),'error');return;}const _0x39b0d7='D1',_0x22df7d='approvedMatches',_0x52f0f6={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x174de0(0x2f1),'loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x174de0(0x26f),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x14d4e6['email'],'createdAt':serverTimestamp(),'createdBy':_0x14d4e6[_0x174de0(0x212)],'isTestMatch':!![],'ladder':_0x39b0d7,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x14d4e6['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x22df7d),_0x52f0f6),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x11fd29){console[_0x174de0(0x27f)]('Error\x20creating\x20simple\x20test\x20match:',_0x11fd29),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x11fd29['message'],_0x174de0(0x27f));}}window[a0_0x34a2a3(0x172)]=async function(){const _0x2b4ce2=a0_0x34a2a3;try{console[_0x2b4ce2(0x3bb)]('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console['log']('DB:',db),console['log']('Current\x20user:',auth[_0x2b4ce2(0x339)]);const _0x485ce7=collection(db,_0x2b4ce2(0x351));console['log']('Collection\x20reference\x20created:',_0x485ce7);const _0x117675=query(_0x485ce7,where('username','==','nonexistent'));console['log'](_0x2b4ce2(0x2ea),_0x117675);const _0x26188e=await getDocs(_0x117675);console['log']('Query\x20executed.\x20Empty:',_0x26188e['empty']),console[_0x2b4ce2(0x3bb)]('Firebase\x20connection\x20test\x20successful!');}catch(_0x482bb3){console[_0x2b4ce2(0x27f)]('Firebase\x20connection\x20test\x20failed:',_0x482bb3);}};function setupCreateTestMatchButton(){const _0x2b891e=a0_0x34a2a3,_0x2188a5=document['getElementById'](_0x2b891e(0x21b));if(!_0x2188a5){console['error'](_0x2b891e(0x16e));return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x811844=_0x2188a5['cloneNode'](!![]);_0x2188a5[_0x2b891e(0x254)]['replaceChild'](_0x811844,_0x2188a5),_0x811844['addEventListener'](_0x2b891e(0x16a),function(_0x5ac541){const _0x46f7f7=_0x2b891e;_0x5ac541['preventDefault'](),_0x5ac541['stopPropagation'](),console['log'](_0x46f7f7(0x350)),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x40dc17=0x1){const _0x3299ab=a0_0x34a2a3,_0x10561d=document['getElementById'](_0x3299ab(0x29b));if(!_0x10561d)return;_0x10561d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x5425db=currentLadder[_0x3299ab(0x225)](),_0x2e0795=matchesPagination[_0x5425db],_0x5a3260=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3fc34b=collection(db,_0x5a3260);_0x40dc17<=0x1?(_0x2e0795[_0x3299ab(0x1e6)]=0x1,_0x2e0795[_0x3299ab(0x239)]=null,_0x2e0795['lastVisible']=null):_0x2e0795['page']=_0x40dc17;const _0x12d32b=getMatchesFilters();let _0x31a4bb=_0x3fc34b;if(_0x12d32b['startDate']||_0x12d32b[_0x3299ab(0x2ba)]||_0x12d32b[_0x3299ab(0x29e)]){let _0x13d25f=[];_0x12d32b['startDate']&&_0x12d32b[_0x3299ab(0x2ba)]?(_0x13d25f['push'](where('approvedAt','>=',_0x12d32b[_0x3299ab(0x34b)]),where('approvedAt','<=',_0x12d32b['endDate'])),_0x31a4bb=query(_0x3fc34b,..._0x13d25f)):_0x31a4bb=query(_0x3fc34b,orderBy('approvedAt',_0x3299ab(0x36e)));}else _0x31a4bb=query(_0x3fc34b,orderBy('approvedAt',_0x3299ab(0x36e)));_0x40dc17>0x1&&_0x2e0795[_0x3299ab(0x34a)]?_0x31a4bb=query(_0x31a4bb,startAfter(_0x2e0795['lastVisible']),limit(PAGE_SIZE)):_0x31a4bb=query(_0x31a4bb,limit(PAGE_SIZE));const _0x773811=await getDocs(_0x31a4bb);!_0x773811['empty']&&(_0x2e0795['firstVisible']=_0x773811[_0x3299ab(0x20d)][0x0],_0x2e0795['lastVisible']=_0x773811['docs'][_0x773811[_0x3299ab(0x20d)]['length']-0x1]);let _0x3a4758=![];if(!_0x773811['empty']){const _0x5dd857=query(_0x31a4bb,startAfter(_0x2e0795['lastVisible']),limit(0x1)),_0x45c2b4=await getDocs(_0x5dd857);_0x3a4758=!_0x45c2b4[_0x3299ab(0x381)];}const _0x171cbb=document[_0x3299ab(0x183)]('matches-prev-page'),_0x14013b=document['getElementById']('matches-next-page'),_0x5d86b0=document['getElementById']('matches-page-indicator');if(_0x171cbb)_0x171cbb['disabled']=_0x2e0795['page']<=0x1;if(_0x14013b)_0x14013b['disabled']=!_0x3a4758;if(_0x5d86b0)_0x5d86b0[_0x3299ab(0x31f)]='Page\x20'+_0x2e0795['page'];if(_0x773811['empty']){_0x10561d[_0x3299ab(0x26a)]=_0x3299ab(0x303);return;}_0x10561d['innerHTML']='',_0x773811['forEach'](_0x425011=>{const _0x2bbc6b=_0x3299ab,_0x20c0ee=_0x425011['data'](),_0x39d06d=document[_0x2bbc6b(0x39b)]('tr'),_0x52dc1a=_0x20c0ee[_0x2bbc6b(0x27e)]?new Date(_0x20c0ee[_0x2bbc6b(0x27e)]['seconds']*0x3e8)[_0x2bbc6b(0x28e)]():'N/A';_0x39d06d[_0x2bbc6b(0x3c0)]('data-id',_0x425011['id']),_0x39d06d['setAttribute']('data-ladder',currentLadder),_0x39d06d['classList']['add']('match-row'),_0x39d06d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x52dc1a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x20c0ee['winnerUsername']||_0x2bbc6b(0x161))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x20c0ee['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x20c0ee['winnerScore']||0x0)+_0x2bbc6b(0x31d)+(_0x20c0ee[_0x2bbc6b(0x31a)]||0x0)+_0x2bbc6b(0x25b)+(_0x20c0ee['mapPlayed']||_0x2bbc6b(0x2d8))+_0x2bbc6b(0x1e8)+currentLadder+_0x2bbc6b(0x2de)+_0x425011['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x425011['id']+_0x2bbc6b(0x1a6),_0x10561d[_0x2bbc6b(0x312)](_0x39d06d);}),setupMatchesActionButtons(),_0x12d32b['searchTerm']&&filterMatchesTable(),console[_0x3299ab(0x3bb)]('Loaded\x20'+_0x773811['size']+'\x20matches\x20for\x20'+currentLadder+_0x3299ab(0x22e)+_0x2e0795[_0x3299ab(0x1e6)]);}catch(_0x461969){console['error']('Error\x20loading\x20matches:',_0x461969),_0x10561d[_0x3299ab(0x26a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x461969[_0x3299ab(0x17d)]+_0x3299ab(0x2b7);}}async function deleteMatch(_0x2d8a3b,_0x50400c){const _0x70896f=a0_0x34a2a3;try{console['log'](_0x70896f(0x394)+_0x2d8a3b+_0x70896f(0x2f9)+_0x50400c+'\x20ladder');const _0x46effa=auth['currentUser'];if(!_0x46effa){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches',_0x70896f(0x27f));return;}const _0x4062c8=_0x50400c==='D1'?'approvedMatches':_0x50400c==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0x4062c8),showNotification(_0x70896f(0x2f3),'info'),await deleteDoc(doc(db,_0x4062c8,_0x2d8a3b)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x593913=_0x50400c['toLowerCase']();loadMatchesData(matchesPagination[_0x593913][_0x70896f(0x1e6)]);}catch(_0xaa80d1){console[_0x70896f(0x27f)](_0x70896f(0x1dd),_0xaa80d1),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0xaa80d1['message'],'error');}}function setupMatchesActionButtons(){const _0x2f015b=a0_0x34a2a3;console['log'](_0x2f015b(0x32a)),document[_0x2f015b(0x32e)](_0x2f015b(0x3ad))['forEach'](_0x451c94=>{const _0x2cd00e=_0x2f015b;_0x451c94['addEventListener'](_0x2cd00e(0x16a),_0x1111f8=>{const _0x66757b=_0x2cd00e;_0x1111f8[_0x66757b(0x282)](),_0x1111f8[_0x66757b(0x1f2)]();const _0x1a91f1=_0x1111f8['currentTarget']['dataset']['id'],_0x4e547e=_0x1111f8['currentTarget']['closest']('tr'),_0x394250=_0x4e547e[_0x66757b(0x1c5)]['ladder'];console['log'](_0x66757b(0x33b),_0x1a91f1,_0x394250),openEditMatchModal(_0x1a91f1,_0x394250);});}),document[_0x2f015b(0x32e)]('.delete-match-btn')['forEach'](_0x4beeed=>{const _0x4349ce=_0x2f015b;_0x4beeed['addEventListener'](_0x4349ce(0x16a),_0xee9a78=>{const _0x5d1069=_0x4349ce;_0xee9a78[_0x5d1069(0x282)](),_0xee9a78['stopPropagation']();const _0x27d983=_0xee9a78['currentTarget']['dataset']['id'],_0x2458aa=_0xee9a78['currentTarget'][_0x5d1069(0x362)]('tr'),_0x23a562=_0x2458aa['dataset']['ladder']||currentLadder;console[_0x5d1069(0x3bb)]('Delete\x20match\x20clicked:',_0x27d983,_0x23a562),confirm(_0x5d1069(0x27d))&&deleteMatch(_0x27d983,_0x23a562);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x3b5cdd=a0_0x34a2a3,_0xcd3887=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x12436b=document['querySelectorAll']('#matches-table-body\x20tr');let _0x5a366d=0x0;_0x12436b['forEach'](_0x242048=>{const _0x52df71=a0_0x5ce8;if(_0x242048['classList'][_0x52df71(0x2af)]('loading-cell')||_0x242048['classList']['contains']('empty-state')||_0x242048['classList']['contains']('error-state'))return;const _0x2b2623=_0x242048['cells'][0x1]['textContent']['toLowerCase'](),_0x3b7f95=_0x242048['cells'][0x2][_0x52df71(0x31f)]['toLowerCase'](),_0xcbc050=_0x242048['cells'][0x4][_0x52df71(0x31f)][_0x52df71(0x225)]();_0x2b2623['includes'](_0xcd3887)||_0x3b7f95['includes'](_0xcd3887)||_0xcbc050['includes'](_0xcd3887)?(_0x242048['style']['display']='',_0x5a366d++):_0x242048['style'][_0x52df71(0x366)]='none';});if(_0x5a366d===0x0&&_0x12436b['length']>0x0){const _0x143075=document['getElementById']('matches-table-body'),_0x239396=_0x143075['querySelector']('.no-results');if(!_0x239396){const _0x46069e=document[_0x3b5cdd(0x39b)]('tr');_0x46069e['className']='no-results',_0x46069e['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0xcd3887+'\x27</td>',_0x143075['appendChild'](_0x46069e);}}else{const _0x53aedb=document[_0x3b5cdd(0x2f7)]('.no-results');_0x53aedb&&_0x53aedb['remove']();}}function getMatchesFilters(){const _0x46e8e0=a0_0x34a2a3,_0x544039=document['getElementById']('matches-search')['value'][_0x46e8e0(0x225)](),_0x356b7c=document['getElementById']('matches-start-date')[_0x46e8e0(0x288)],_0x439fff=document['getElementById'](_0x46e8e0(0x174))[_0x46e8e0(0x288)];let _0x2352c5=null,_0x3e33d9=null;return _0x356b7c&&(_0x2352c5=new Date(_0x356b7c),_0x2352c5['setHours'](0x0,0x0,0x0,0x0),_0x2352c5=Timestamp[_0x46e8e0(0x2d1)](_0x2352c5)),_0x439fff&&(_0x3e33d9=new Date(_0x439fff),_0x3e33d9[_0x46e8e0(0x1be)](0x17,0x3b,0x3b,0x3e7),_0x3e33d9=Timestamp['fromDate'](_0x3e33d9)),{'searchTerm':_0x544039,'startDate':_0x2352c5,'endDate':_0x3e33d9};}async function applyMatchesFilters(){const _0x3395b1=currentLadder['toLowerCase']();matchesPagination[_0x3395b1]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x25813d=a0_0x34a2a3;document['getElementById']('matches-start-date')[_0x25813d(0x288)]='',document['getElementById']('matches-end-date')['value']='',document['getElementById']('matches-search')['value']='';const _0x134bf9=currentLadder['toLowerCase']();matchesPagination[_0x134bf9]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x547aac,_0x3dfe40){const _0xcc4700=a0_0x34a2a3,_0x53fc2d=document['getElementById']('edit-match-modal');if(!_0x53fc2d)return;try{const _0x82b67d=_0x3dfe40==='D1'?_0xcc4700(0x28f):_0x3dfe40==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2be64b=doc(db,_0x82b67d,_0x547aac),_0x4b9555=await getDoc(_0x2be64b);if(!_0x4b9555['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x414f0e=_0x4b9555['data']();document['getElementById']('edit-match-id')['value']=_0x547aac,document['getElementById']('edit-match-ladder')['value']=_0x3dfe40,document['getElementById'](_0xcc4700(0x1fc))['value']=_0x414f0e[_0xcc4700(0x30c)]||'',document['getElementById'](_0xcc4700(0x38c))['value']=_0x414f0e[_0xcc4700(0x1af)]||0x0,document[_0xcc4700(0x183)]('edit-match-winner-suicides')[_0xcc4700(0x288)]=_0x414f0e['winnerSuicides']||0x0,document['getElementById'](_0xcc4700(0x218))['value']=_0x414f0e['winnerComment']||'',document['getElementById'](_0xcc4700(0x304))[_0xcc4700(0x288)]=_0x414f0e[_0xcc4700(0x240)]||'',document['getElementById'](_0xcc4700(0x285))['value']=_0x414f0e['loserScore']||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0x414f0e['loserSuicides']||0x0,document[_0xcc4700(0x183)]('edit-match-loser-comment')['value']=_0x414f0e[_0xcc4700(0x15f)]||'',document['getElementById']('edit-match-map')[_0xcc4700(0x288)]=_0x414f0e['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')['value']=_0x414f0e[_0xcc4700(0x2da)]||'',document['getElementById']('edit-match-loser-demo')['value']=_0x414f0e[_0xcc4700(0x22a)]||_0x414f0e['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x414f0e['winnerUsername']+'\x20vs\x20'+_0x414f0e['loserUsername'],_0x53fc2d['classList']['add']('active');}catch(_0x275738){console[_0xcc4700(0x27f)]('Error\x20loading\x20match\x20data:',_0x275738),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x2a46ad=a0_0x34a2a3,_0x40f0c8=document['getElementById'](_0x2a46ad(0x1b8));_0x40f0c8&&_0x40f0c8[_0x2a46ad(0x2ab)][_0x2a46ad(0x2c6)](_0x2a46ad(0x2d7));}async function saveEditedMatch(){const _0x47dc04=a0_0x34a2a3;try{const _0x2ef5f5=document['getElementById'](_0x47dc04(0x182))['value'],_0x1782ac=document['getElementById'](_0x47dc04(0x2be))['value'];if(!_0x2ef5f5||!_0x1782ac){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x5cd41b=_0x1782ac==='D1'?_0x47dc04(0x28f):_0x1782ac==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2852f8=document[_0x47dc04(0x183)]('edit-match-winner')['value']['trim'](),_0x4e3ead=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x3166bc=parseInt(document['getElementById'](_0x47dc04(0x21a))['value']),_0x178d7b=document['getElementById']('edit-match-winner-comment')['value'][_0x47dc04(0x355)](),_0x4f122c=document['getElementById']('edit-match-loser')[_0x47dc04(0x288)]['trim'](),_0x27f338=parseInt(document['getElementById'](_0x47dc04(0x285))[_0x47dc04(0x288)]),_0x93dd3=parseInt(document[_0x47dc04(0x183)](_0x47dc04(0x1c6))['value']),_0x37957b=document[_0x47dc04(0x183)]('edit-match-loser-comment')['value'][_0x47dc04(0x355)](),_0x270c8a=document['getElementById']('edit-match-map')[_0x47dc04(0x288)]['trim'](),_0x1cb867=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0xfe5f34=document[_0x47dc04(0x183)]('edit-match-loser-demo')[_0x47dc04(0x288)]['trim']();if(!_0x2852f8||!_0x4f122c){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x5cd41b,_0x2ef5f5),{'winnerUsername':_0x2852f8,'winnerScore':_0x4e3ead,'winnerSuicides':_0x3166bc,'winnerComment':_0x178d7b,'loserUsername':_0x4f122c,'loserScore':_0x27f338,'loserSuicides':_0x93dd3,'loserComment':_0x37957b,'mapPlayed':_0x270c8a,'winnerDemoLink':_0x1cb867||null,'loserDemoLink':_0xfe5f34||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x1782ac['toLowerCase']()]['page']);}catch(_0x219ffc){console[_0x47dc04(0x27f)]('Error\x20saving\x20match:',_0x219ffc),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x219ffc['message'],'error');}}async function openDeleteMatchModal(_0x259f8f,_0x510a32){const _0xffc0eb=a0_0x34a2a3;try{const _0x1c966e=_0x510a32==='D1'?'approvedMatches':_0x510a32==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x55d997=doc(db,_0x1c966e,_0x259f8f),_0xab7072=await getDoc(_0x55d997);if(!_0xab7072['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x47d869=_0xab7072['data'](),_0x1a727f=document[_0xffc0eb(0x183)]('delete-match-confirm-modal');_0x1a727f[_0xffc0eb(0x1c5)]['matchId']=_0x259f8f,_0x1a727f[_0xffc0eb(0x1c5)]['ladder']=_0x510a32;const _0x1f337b=_0x47d869['approvedAt']?new Date(_0x47d869[_0xffc0eb(0x27e)][_0xffc0eb(0x2a5)]*0x3e8)['toLocaleDateString']():'N/A',_0x1bfe03=document['getElementById']('delete-match-summary');_0x1bfe03[_0xffc0eb(0x26a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x1f337b+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x47d869['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x47d869[_0xffc0eb(0x240)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x47d869[_0xffc0eb(0x1af)]||0x0)+'\x20-\x20'+(_0x47d869[_0xffc0eb(0x31a)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x47d869[_0xffc0eb(0x3b7)]||_0xffc0eb(0x2d8))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x510a32+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x1a727f['classList']['add']('active');}catch(_0x1fd281){console[_0xffc0eb(0x27f)]('Error\x20loading\x20match\x20for\x20deletion:',_0x1fd281),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x3859f5=a0_0x34a2a3,_0x43d182=document['getElementById']('delete-match-confirm-modal');_0x43d182&&(_0x43d182['classList']['remove'](_0x3859f5(0x2d7)),_0x43d182['removeAttribute'](_0x3859f5(0x2bc)),_0x43d182[_0x3859f5(0x374)]('data-ladder'));}async function confirmDeleteMatch(){const _0x4d32ef=a0_0x34a2a3,_0x4fd958=document['getElementById']('delete-match-confirm-modal'),_0x1ccd5e=_0x4fd958[_0x4d32ef(0x1c5)]['matchId'],_0x439c40=_0x4fd958['dataset'][_0x4d32ef(0x198)];if(!_0x1ccd5e||!_0x439c40){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x1385f9=_0x439c40==='D1'?_0x4d32ef(0x28f):_0x439c40==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x1385f9,_0x1ccd5e)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x439c40['toLowerCase']()]['page']);}catch(_0x423e2b){console[_0x4d32ef(0x27f)](_0x4d32ef(0x1dd),_0x423e2b),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x423e2b['message'],_0x4d32ef(0x27f));}}async function saveHighlightChanges(){const _0x169631=a0_0x34a2a3,_0x56cf6b=document['getElementById']('edit-highlight-id')[_0x169631(0x288)],_0x523c89=document['getElementById']('edit-highlight-type-select')['value'];let _0x17038c={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x523c89,'description':document['getElementById']('edit-highlight-description-input')[_0x169631(0x288)][_0x169631(0x355)](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth['currentUser']['email']};if(_0x523c89===_0x169631(0x190)){_0x17038c[_0x169631(0x177)]=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x17038c['map']=document[_0x169631(0x183)]('edit-highlight-map-input')['value']['trim']();const _0x3d905f=document['getElementById'](_0x169631(0x33d))[_0x169631(0x288)];_0x17038c['matchDate']=_0x3d905f?Timestamp['fromDate'](new Date(_0x3d905f)):null,_0x17038c[_0x169631(0x253)]=document[_0x169631(0x183)]('edit-highlight-winnerName-input')[_0x169631(0x288)][_0x169631(0x355)](),_0x17038c[_0x169631(0x1af)]=document['getElementById']('edit-highlight-winnerScore-input')['value']['trim'](),_0x17038c['loserName']=document['getElementById'](_0x169631(0x352))[_0x169631(0x288)]['trim'](),_0x17038c[_0x169631(0x31a)]=document['getElementById']('edit-highlight-loserScore-input')['value'][_0x169631(0x355)](),_0x17038c['matchLink']=document['getElementById']('edit-highlight-matchLink-input')[_0x169631(0x288)]['trim'](),_0x17038c['mapCreator']=null,_0x17038c['mapVersion']=null,_0x17038c['creatorImageUrl']=null,_0x17038c['achievementPlayer']=null,_0x17038c['achievementType']=null,_0x17038c['achievementDetails']=null,_0x17038c['playerProfileUrl']=null;}else{if(_0x523c89==='creator')_0x17038c[_0x169631(0x3b4)]=document['getElementById'](_0x169631(0x388))['value']['trim'](),_0x17038c['mapCreator']=document['getElementById'](_0x169631(0x1d6))['value'][_0x169631(0x355)](),_0x17038c[_0x169631(0x171)]=document[_0x169631(0x183)](_0x169631(0x330))['value']['trim'](),_0x17038c[_0x169631(0x280)]=document['getElementById']('edit-highlight-creatorImageUrl-input')['value']['trim'](),_0x17038c['matchInfo']=null,_0x17038c[_0x169631(0x20e)]=null,_0x17038c['winnerName']=null,_0x17038c['winnerScore']=null,_0x17038c['loserName']=null,_0x17038c['loserScore']=null,_0x17038c['matchLink']=null,_0x17038c['achievementPlayer']=null,_0x17038c['achievementType']=null,_0x17038c['achievementDetails']=null,_0x17038c[_0x169631(0x3a0)]=null;else _0x523c89==='achievement'&&(_0x17038c['achievementPlayer']=document['getElementById'](_0x169631(0x36a))['value'][_0x169631(0x355)](),_0x17038c[_0x169631(0x237)]=document['getElementById'](_0x169631(0x317))[_0x169631(0x288)]['trim'](),_0x17038c['achievementDetails']=document['getElementById'](_0x169631(0x2ed))['value'][_0x169631(0x355)](),_0x17038c['playerProfileUrl']=document[_0x169631(0x183)](_0x169631(0x365))['value'][_0x169631(0x355)](),_0x17038c[_0x169631(0x177)]=null,_0x17038c[_0x169631(0x3b4)]=null,_0x17038c[_0x169631(0x20e)]=null,_0x17038c['winnerName']=null,_0x17038c['winnerScore']=null,_0x17038c['loserName']=null,_0x17038c['loserScore']=null,_0x17038c['matchLink']=null,_0x17038c[_0x169631(0x32d)]=null,_0x17038c[_0x169631(0x171)]=null,_0x17038c[_0x169631(0x280)]=null);}try{if(_0x56cf6b){_0x17038c[_0x169631(0x18e)]=serverTimestamp();const _0x3ca74b=doc(db,'highlights',_0x56cf6b);await updateDoc(_0x3ca74b,_0x17038c),showNotification(_0x169631(0x3b9),'success');}else _0x17038c['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x169631(0x194)),_0x17038c),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x2723cb){console[_0x169631(0x27f)](_0x169631(0x191),_0x2723cb),showNotification(_0x169631(0x383)+_0x2723cb['message'],'error');}}async function resimulateMatch(){const _0x332345=a0_0x34a2a3;try{const _0xc962ac=document['getElementById']('resimulate-match-id')['value'];if(!_0xc962ac){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x36d592=auth[_0x332345(0x339)];if(!_0x36d592){showNotification(_0x332345(0x233),_0x332345(0x27f));return;}const _0x1f2326=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x332345(0x262):'approvedMatchesD3',_0x2ae8d4=doc(db,_0x1f2326,_0xc962ac),_0x57b81b=await getDoc(_0x2ae8d4);if(!_0x57b81b['exists']()){showNotification(_0x332345(0x249),'error');return;}const _0x1e7be1=_0x57b81b['data'](),_0x4c0ba0=_0x1e7be1['approvedAt']?_0x1e7be1[_0x332345(0x27e)][_0x332345(0x323)]()[_0x332345(0x38d)]():_0x1e7be1['matchDate']?_0x1e7be1['matchDate']['toDate']?_0x1e7be1['matchDate']['toDate']()['toLocaleString']():new Date(_0x1e7be1['matchDate'])['toLocaleString']():_0x332345(0x161),_0x3b50ad='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x1e7be1['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x1e7be1[_0x332345(0x240)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x1e7be1['winnerScore']+'-'+_0x1e7be1[_0x332345(0x31a)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x1e7be1[_0x332345(0x3b7)]||_0x1e7be1['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x4c0ba0+_0x332345(0x2bf)+_0xc962ac+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')['innerHTML']=_0x3b50ad,document['getElementById']('match-details-container')[_0x332345(0x17e)]['display']='block',document['getElementById']('confirm-resimulate-btn')[_0x332345(0x17e)]['display']='block',window['pendingResimulateData']={'matchId':_0xc962ac,'matchData':_0x1e7be1,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x56e539){console[_0x332345(0x27f)](_0x332345(0x395),_0x56e539),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x56e539['message'],'error');}}async function confirmResimulateMatch(){const _0x5b1bb9=a0_0x34a2a3;try{const {matchId:_0x16afc5,matchData:_0x34f79c,ladder:_0x45c63a}=window['pendingResimulateData'];if(!_0x16afc5||!_0x34f79c){showNotification(_0x5b1bb9(0x22f),'error');return;}const _0x2a37c=_0x45c63a==='D1'?_0x5b1bb9(0x351):_0x45c63a==='D2'?_0x5b1bb9(0x2b5):'playersD3',_0x3457f4=_0x45c63a==='D1'?'eloHistory':_0x45c63a==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x18a702,_0x103913]=await Promise['all']([getDocs(query(collection(db,_0x2a37c),where('username','==',_0x34f79c['winnerUsername']))),getDocs(query(collection(db,_0x2a37c),where(_0x5b1bb9(0x297),'==',_0x34f79c[_0x5b1bb9(0x240)])))]);if(_0x18a702[_0x5b1bb9(0x381)]||_0x103913['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x3d7b41=_0x18a702['docs'][0x0]['id'],_0x1bde60=_0x103913['docs'][0x0]['id'],_0x19a7b3=_0x18a702[_0x5b1bb9(0x20d)][0x0]['data'](),_0x1a65c4=_0x103913['docs'][0x0]['data'](),[_0x1fa32a,_0x450961]=await Promise['all']([getDocs(query(collection(db,_0x3457f4),where('playerId','==',_0x3d7b41),where('matchId','==',_0x16afc5))),getDocs(query(collection(db,_0x3457f4),where('playerId','==',_0x1bde60),where('matchId','==',_0x16afc5)))]),_0x444ad1=!_0x1fa32a['empty'],_0x37d0af=!_0x450961[_0x5b1bb9(0x381)],_0x26658d='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x444ad1?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x37d0af?'✅\x20Exists':_0x5b1bb9(0x309))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x19a7b3[_0x5b1bb9(0x2e8)]||_0x5b1bb9(0x161))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x1a65c4['eloRating']||_0x5b1bb9(0x161))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x19a7b3['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x1a65c4[_0x5b1bb9(0x3c2)]||'Unknown')+_0x5b1bb9(0x2a3);document[_0x5b1bb9(0x183)](_0x5b1bb9(0x232))['innerHTML']=_0x26658d,document['getElementById']('validation-results-container')['style']['display']=_0x5b1bb9(0x353);if(_0x444ad1&&_0x37d0af){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x2f5980=_0x34f79c['approvedAt']||_0x34f79c['matchDate']||serverTimestamp(),[_0x387426,_0x576062]=await Promise[_0x5b1bb9(0x18d)]([getPlayerEloAtTime(_0x3d7b41,_0x2f5980,_0x3457f4),getPlayerEloAtTime(_0x1bde60,_0x2f5980,_0x3457f4)]),{calculateElo:_0x422fae}=await import(_0x5b1bb9(0x25e)),{newWinnerRating:_0x8865a8,newLoserRating:_0x4fc483}=_0x422fae(_0x387426,_0x576062),_0x29cd24=_0x19a7b3[_0x5b1bb9(0x3c2)]||Number['MAX_SAFE_INTEGER'],_0x30b7c6=_0x1a65c4[_0x5b1bb9(0x3c2)]||Number['MAX_SAFE_INTEGER'];let _0x1c5ba2=_0x29cd24,_0xcc2f95=_0x30b7c6;_0x29cd24>_0x30b7c6&&(_0x1c5ba2=_0x30b7c6,_0xcc2f95=_0x30b7c6+0x1);const _0x5f4f8b=writeBatch(db),_0x302d59=doc(db,_0x2a37c,_0x3d7b41);_0x5f4f8b['update'](_0x302d59,{'eloRating':_0x8865a8,'position':_0x1c5ba2,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x124f4e=doc(db,_0x2a37c,_0x1bde60);_0x5f4f8b['update'](_0x124f4e,{'eloRating':_0x4fc483,'position':_0xcc2f95,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x29cd24>_0x30b7c6){const _0x505a52=await getDocs(query(collection(db,_0x2a37c),where('position','>',_0x30b7c6),where('position','<',_0x29cd24)));_0x505a52[_0x5b1bb9(0x291)](_0x32ac9e=>{const _0x326bfc=_0x5b1bb9,_0x550712=doc(db,_0x2a37c,_0x32ac9e['id']),_0x4675a7=_0x32ac9e['data']()['position'];_0x5f4f8b[_0x326bfc(0x199)](_0x550712,{'position':_0x4675a7+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x444ad1){const _0x5b3945=doc(collection(db,_0x3457f4));_0x5f4f8b[_0x5b1bb9(0x231)](_0x5b3945,{'playerId':_0x3d7b41,'player':_0x34f79c[_0x5b1bb9(0x30c)],'previousElo':_0x387426,'newElo':_0x8865a8,'eloChange':_0x8865a8-_0x387426,'opponentId':_0x1bde60,'opponent':_0x34f79c['loserUsername'],'matchResult':'win','previousPosition':_0x29cd24,'newPosition':_0x1c5ba2,'positionChange':_0x1c5ba2-_0x29cd24,'matchId':_0x16afc5,'timestamp':_0x2f5980,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x5b1bb9(0x222)],'gameMode':_0x45c63a,'matchScore':_0x34f79c['winnerScore']+'-'+_0x34f79c['loserScore'],'mapPlayed':_0x34f79c[_0x5b1bb9(0x3b7)]||_0x34f79c['mapName']||_0x5b1bb9(0x161),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x37d0af){const _0x1e3fbb=doc(collection(db,_0x3457f4));_0x5f4f8b[_0x5b1bb9(0x231)](_0x1e3fbb,{'playerId':_0x1bde60,'player':_0x34f79c['loserUsername'],'previousElo':_0x576062,'newElo':_0x4fc483,'eloChange':_0x4fc483-_0x576062,'opponentId':_0x3d7b41,'opponent':_0x34f79c['winnerUsername'],'matchResult':'loss','previousPosition':_0x30b7c6,'newPosition':_0xcc2f95,'positionChange':_0xcc2f95-_0x30b7c6,'matchId':_0x16afc5,'timestamp':_0x2f5980,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x45c63a,'matchScore':_0x34f79c['winnerScore']+'-'+_0x34f79c[_0x5b1bb9(0x31a)],'mapPlayed':_0x34f79c['mapPlayed']||_0x34f79c['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x1d1e23=_0x45c63a==='D1'?_0x5b1bb9(0x28f):_0x45c63a==='D2'?_0x5b1bb9(0x262):_0x5b1bb9(0x3b3),_0x278cef=doc(db,_0x1d1e23,_0x16afc5);_0x5f4f8b['update'](_0x278cef,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x19a7b3[_0x5b1bb9(0x2e8)],'originalLoserElo':_0x1a65c4['eloRating'],'originalWinnerPosition':_0x29cd24,'originalLoserPosition':_0x30b7c6,'resimulatedWinnerElo':_0x8865a8,'resimulatedLoserElo':_0x4fc483,'resimulatedWinnerPosition':_0x1c5ba2,'resimulatedLoserPosition':_0xcc2f95}),await _0x5f4f8b['commit']();const _0x13be58=(!_0x444ad1?0x1:0x0)+(!_0x37d0af?0x1:0x0),_0x368102=_0x29cd24!==_0x1c5ba2||_0x30b7c6!==_0xcc2f95;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x13be58+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x387426+'→'+_0x8865a8+_0x5b1bb9(0x361)+(_0x8865a8-_0x387426)+'),\x20')+('Loser\x20'+_0x576062+'→'+_0x4fc483+'\x20('+(_0x4fc483-_0x576062)+').\x20')+(''+(_0x368102?'Positions\x20updated:\x20Winner\x20'+_0x29cd24+'→'+_0x1c5ba2+',\x20Loser\x20'+_0x30b7c6+'→'+_0xcc2f95:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x58bc9b){console['error'](_0x5b1bb9(0x173),_0x58bc9b),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x58bc9b[_0x5b1bb9(0x17d)],_0x5b1bb9(0x27f));}}async function getPlayerEloAtTime(_0xd1b4a3,_0x12506d,_0x3ff426){const _0x58f888=a0_0x34a2a3;try{const _0x547860=_0x12506d[_0x58f888(0x323)]?_0x12506d['toDate']():new Date(_0x12506d),_0x17334a=query(collection(db,_0x3ff426),where(_0x58f888(0x25d),'==',_0xd1b4a3),where(_0x58f888(0x165),'<',_0x12506d),orderBy('timestamp','desc'),limit(0x1)),_0x204cab=await getDocs(_0x17334a);if(!_0x204cab['empty']){const _0x2e5f1b=_0x204cab['docs'][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0xd1b4a3+_0x58f888(0x21c)+_0x2e5f1b[_0x58f888(0x335)]),_0x2e5f1b['newElo'];}else return console['log'](_0x58f888(0x234)+_0xd1b4a3+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0xf697ba){return console['error'](_0x58f888(0x2d9)+_0xd1b4a3+':',_0xf697ba),0x4b0;}}function openResimulateModal(){const _0x1e4f51=a0_0x34a2a3;console['log']('openResimulateModal\x20called!');const _0x5ccbad=document[_0x1e4f51(0x183)]('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x5ccbad);if(!_0x5ccbad){console[_0x1e4f51(0x27f)]('Modal\x20element\x20not\x20found!');return;}_0x5ccbad[_0x1e4f51(0x17e)]['display']=_0x1e4f51(0x353),_0x5ccbad['style']['visibility']=_0x1e4f51(0x38f),_0x5ccbad[_0x1e4f51(0x17e)]['opacity']='1',_0x5ccbad[_0x1e4f51(0x2ab)]['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log'](_0x1e4f51(0x2a2),window[_0x1e4f51(0x248)](_0x5ccbad)[_0x1e4f51(0x366)]);const _0x3d954e=document['getElementById']('match-details-container'),_0x485d9a=document[_0x1e4f51(0x183)]('validation-results-container'),_0x49b80e=document['getElementById']('confirm-resimulate-btn'),_0x472ffe=document['getElementById'](_0x1e4f51(0x1f1));if(_0x3d954e)_0x3d954e[_0x1e4f51(0x26a)]='';if(_0x485d9a)_0x485d9a['innerHTML']='';if(_0x49b80e)_0x49b80e['style']['display']='none';if(_0x472ffe)_0x472ffe['value']='';console[_0x1e4f51(0x3bb)]('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x59f52e=a0_0x34a2a3;document['getElementById'](_0x59f52e(0x1a5))['style']['display']='none',window['pendingResimulateData']=null;}window[a0_0x34a2a3(0x1a2)]=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a0_0x34a2a3(0x298)]=closeResimulateModal;async function loadPointsData(){const _0xb0ca71=a0_0x34a2a3;console[_0xb0ca71(0x3bb)](_0xb0ca71(0x235));try{await Promise[_0xb0ca71(0x18d)]([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully',_0xb0ca71(0x3a4));}catch(_0x5253ec){console['error']('Error\x20loading\x20points\x20data:',_0x5253ec),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x5253ec[_0xb0ca71(0x17d)],'error');}}function renderPointsOverview(_0x259e7c){const _0x571a06=a0_0x34a2a3,_0x3140db=document['getElementById'](_0x571a06(0x393));if(!_0x3140db)return;if(_0x259e7c['length']===0x0){_0x3140db['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x3140db['innerHTML']='',_0x259e7c[_0x571a06(0x291)](_0xaf4225=>{const _0x24be79=_0x571a06,_0x3d2ff9=document['createElement']('tr'),_0x31de9b=_0xaf4225['displayName']||_0xaf4225['username']||'Unknown\x20User',_0x290277=_0xaf4225['email']||'No\x20email',_0x33e480=_0xaf4225['points']||0x0,_0xb2614a=_0xaf4225[_0x24be79(0x22d)]?new Date(_0xaf4225['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x3d2ff9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x31de9b+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x290277+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x33e480>0x3e8?'high-points':_0x33e480>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x33e480['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xb2614a+_0x24be79(0x2fd)+_0xaf4225['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0xaf4225['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3140db['appendChild'](_0x3d2ff9);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x4d1557=a0_0x34a2a3;console['log'](_0x4d1557(0x167));const _0x419fb7=document['querySelectorAll']('.quick-edit-btn');console[_0x4d1557(0x3bb)]('Found\x20'+_0x419fb7['length']+'\x20quick\x20edit\x20buttons'),_0x419fb7['forEach'](_0x1882ac=>{const _0x1fe272=_0x1882ac['cloneNode'](!![]);_0x1882ac['parentNode']['replaceChild'](_0x1fe272,_0x1882ac);});const _0x2932e7=document['querySelectorAll']('.view-history-btn');console['log'](_0x4d1557(0x286)+_0x2932e7['length']+'\x20view\x20history\x20buttons'),_0x2932e7['forEach'](_0x36083a=>{const _0x308c61=_0x4d1557,_0x5d4e5a=_0x36083a[_0x308c61(0x3ab)](!![]);_0x36083a[_0x308c61(0x254)]['replaceChild'](_0x5d4e5a,_0x36083a);}),document['querySelectorAll'](_0x4d1557(0x2dd))['forEach'](_0x3700bd=>{_0x3700bd['addEventListener']('click',function(_0x2ee297){const _0x39c61a=a0_0x5ce8;_0x2ee297['preventDefault'](),_0x2ee297['stopPropagation']();const _0x3209c8=this['dataset']['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x3209c8);if(!_0x3209c8){console['error'](_0x39c61a(0x2f0));return;}this['style']['opacity']=_0x39c61a(0x2f5),setTimeout(()=>{const _0x199471=_0x39c61a;this[_0x199471(0x17e)]['opacity']='1';},0xc8),openQuickEditModal(_0x3209c8);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x4cb7b0=>{_0x4cb7b0['addEventListener']('click',function(_0x2a186b){const _0x423cac=a0_0x5ce8;_0x2a186b['preventDefault'](),_0x2a186b['stopPropagation']();const _0x5b45d7=this['dataset'][_0x423cac(0x3a3)];console[_0x423cac(0x3bb)](_0x423cac(0x176),_0x5b45d7);if(!_0x5b45d7){console['error'](_0x423cac(0x2f0));return;}this['style'][_0x423cac(0x3a7)]='0.6',setTimeout(()=>{const _0x26b295=_0x423cac;this['style'][_0x26b295(0x3a7)]='1';},0xc8),loadUserPointsHistory(_0x5b45d7);});}),console[_0x4d1557(0x3bb)]('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x352f10){const _0x1f15b5=a0_0x34a2a3;console[_0x1f15b5(0x3bb)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x352f10);const _0x3a5811=document['getElementById']('quick-edit-points-modal');if(!_0x3a5811){console[_0x1f15b5(0x27f)]('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification(_0x1f15b5(0x1f5),'info');const _0x417f00=doc(db,'userProfiles',_0x352f10),_0x1928f9=await getDoc(_0x417f00);if(!_0x1928f9['exists']()){showNotification('User\x20not\x20found','error');return;}const _0x2faa16=_0x1928f9[_0x1f15b5(0x1cc)]();console[_0x1f15b5(0x3bb)]('User\x20data\x20loaded:',_0x2faa16);const _0x164aaa=document['getElementById']('quick-edit-user-id'),_0x43d40b=document['getElementById']('quick-edit-display-name'),_0xd6bf46=document[_0x1f15b5(0x183)]('quick-edit-email'),_0x615226=document['getElementById'](_0x1f15b5(0x35b)),_0x1ceb58=document[_0x1f15b5(0x183)]('quick-edit-points-form');if(!_0x164aaa||!_0x43d40b||!_0xd6bf46||!_0x615226||!_0x1ceb58){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x164aaa['value']=_0x352f10,_0x43d40b['textContent']=_0x2faa16['displayName']||_0x2faa16['username']||'Unknown\x20User',_0xd6bf46['textContent']=_0x2faa16['email']||_0x1f15b5(0x15b),_0x615226['textContent']=(_0x2faa16[_0x1f15b5(0x22b)]||0x0)[_0x1f15b5(0x38d)](),_0x1ceb58[_0x1f15b5(0x30d)]();const _0x8f1c64=document[_0x1f15b5(0x183)]('quick-add');_0x8f1c64&&(_0x8f1c64[_0x1f15b5(0x371)]=!![]);_0x3a5811[_0x1f15b5(0x2ab)]['add']('active'),console[_0x1f15b5(0x3bb)](_0x1f15b5(0x279));const _0x3ef2d0=document[_0x1f15b5(0x183)]('quick-points-amount');_0x3ef2d0&&setTimeout(()=>_0x3ef2d0['focus'](),0x64);}catch(_0x531c62){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x531c62),showNotification(_0x1f15b5(0x322)+_0x531c62[_0x1f15b5(0x17d)],_0x1f15b5(0x27f));}}function closeQuickEditModal(){const _0x2ae6fa=a0_0x34a2a3,_0x51b4f2=document['getElementById']('quick-edit-points-modal');_0x51b4f2&&_0x51b4f2[_0x2ae6fa(0x2ab)]['remove'](_0x2ae6fa(0x2d7));}async function handleQuickEditPoints(_0x55b928){const _0x113767=a0_0x34a2a3;_0x55b928['preventDefault']();const _0x1c431c=document['getElementById']('quick-edit-user-id')['value'],_0x3ef1cf=document[_0x113767(0x2f7)]('input[name=\x22quick-action\x22]:checked')['value'],_0x26aab7=parseInt(document[_0x113767(0x183)](_0x113767(0x3ae))['value']),_0x33f3fa=document['getElementById']('quick-points-reason')['value'][_0x113767(0x355)]();console['log']('Processing\x20points\x20edit:',{'userId':_0x1c431c,'action':_0x3ef1cf,'amount':_0x26aab7,'reason':_0x33f3fa});if(!_0x1c431c||!_0x26aab7||_0x26aab7<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x1c431c,_0x3ef1cf,_0x26aab7,_0x33f3fa),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x113767(0x313),'success'),console[_0x113767(0x3bb)](_0x113767(0x160),_0x1c431c);}catch(_0x2cbcc0){console[_0x113767(0x27f)](_0x113767(0x3b5),_0x2cbcc0),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x2cbcc0[_0x113767(0x17d)],'error');}}async function searchUsersForPoints(){const _0x54e86a=a0_0x34a2a3,_0x2cbb1e=document[_0x54e86a(0x183)](_0x54e86a(0x39c))['value']['trim']()[_0x54e86a(0x225)](),_0x43ecdf=document['getElementById'](_0x54e86a(0x1ee));if(!_0x2cbb1e||_0x2cbb1e[_0x54e86a(0x2d4)]<0x2){_0x43ecdf[_0x54e86a(0x26a)]='';return;}_0x43ecdf['innerHTML']=_0x54e86a(0x300);try{const _0x6c5f7c=collection(db,'userProfiles'),_0x51beac=await getDocs(_0x6c5f7c),_0x2ec551=[];_0x51beac['forEach'](_0x27a6c1=>{const _0x76fb56=_0x54e86a,_0x44d4ee=_0x27a6c1['data'](),_0x46d77a=(_0x44d4ee[_0x76fb56(0x2bd)]||_0x44d4ee[_0x76fb56(0x297)]||'')['toLowerCase'](),_0x224754=(_0x44d4ee['email']||'')[_0x76fb56(0x225)]();(_0x46d77a[_0x76fb56(0x24f)](_0x2cbb1e)||_0x224754['includes'](_0x2cbb1e))&&_0x2ec551[_0x76fb56(0x26d)]({'id':_0x27a6c1['id'],..._0x44d4ee});});if(_0x2ec551['length']===0x0){_0x43ecdf['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x43ecdf[_0x54e86a(0x26a)]='',_0x2ec551['forEach'](_0x52c3a6=>{const _0x4c4202=_0x54e86a,_0x5cc10a=document[_0x4c4202(0x39b)](_0x4c4202(0x1da));_0x5cc10a['className']=_0x4c4202(0x332),_0x5cc10a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x52c3a6['displayName']||_0x52c3a6['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x52c3a6['email']||_0x4c4202(0x15b))+_0x4c4202(0x164)+(_0x52c3a6[_0x4c4202(0x22b)]||0x0)['toLocaleString']()+_0x4c4202(0x2b2),_0x5cc10a['addEventListener']('click',()=>selectUserForPoints(_0x52c3a6)),_0x43ecdf['appendChild'](_0x5cc10a);});}catch(_0x50545b){console['error'](_0x54e86a(0x1e7),_0x50545b),_0x43ecdf['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x46a1fa){const _0x270dd9=a0_0x34a2a3;document['getElementById']('selected-user-name')['textContent']=_0x46a1fa['displayName']||_0x46a1fa['username']||'Unknown\x20User',document['getElementById']('selected-user-points')[_0x270dd9(0x31f)]=(_0x46a1fa['points']||0x0)[_0x270dd9(0x38d)](),document['getElementById']('selected-user-id')['value']=_0x46a1fa['id'],document['getElementById'](_0x270dd9(0x3b8))[_0x270dd9(0x17e)]['display']=_0x270dd9(0x353),document[_0x270dd9(0x183)](_0x270dd9(0x2d3))['style']['display']='block',document[_0x270dd9(0x183)]('user-search-results')['innerHTML']='',document[_0x270dd9(0x183)]('points-user-search')['value']='';}async function handleModifyPoints(_0x1ec408){const _0x116cf7=a0_0x34a2a3;_0x1ec408[_0x116cf7(0x282)]();const _0x1abe58=document[_0x116cf7(0x183)]('selected-user-id')['value'],_0xc57b63=document['getElementById']('points-action')['value'],_0x2adc70=parseInt(document['getElementById']('points-amount')['value']),_0x15349d=document['getElementById']('points-reason')['value']['trim']();if(!_0x1abe58||!_0x2adc70||_0x2adc70<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x1abe58,_0xc57b63,_0x2adc70,_0x15349d),document['getElementById']('modify-points-form')[_0x116cf7(0x30d)]();const _0x36e347=doc(db,'userProfiles',_0x1abe58),_0x863d1f=await getDoc(_0x36e347);if(_0x863d1f[_0x116cf7(0x35f)]()){const _0x1f46c2=_0x863d1f['data']();document['getElementById']('selected-user-points')['textContent']=(_0x1f46c2['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x377c65){console[_0x116cf7(0x27f)](_0x116cf7(0x2fc),_0x377c65),showNotification(_0x116cf7(0x398)+_0x377c65['message'],_0x116cf7(0x27f));}}async function loadPointsHistory(){const _0xf9ff5=a0_0x34a2a3,_0x16e671=document['getElementById']('points-history-table-body');if(!_0x16e671)return;_0x16e671[_0xf9ff5(0x26a)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x2b86ce=collection(db,'pointsHistory'),_0x2595ce=query(_0x2b86ce,orderBy('timestamp','desc'),limit(0x32)),_0x1d1ba8=await getDocs(_0x2595ce);if(_0x1d1ba8['empty']){_0x16e671['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x16e671['innerHTML']='',_0x1d1ba8['forEach'](_0x436390=>{const _0x3b3293=_0xf9ff5,_0x2787a8=_0x436390['data'](),_0x2d85b5=document['createElement']('tr'),_0x27ecd7=_0x2787a8['timestamp']?new Date(_0x2787a8['timestamp']['seconds']*0x3e8)['toLocaleString']():_0x3b3293(0x161);let _0x1cf17c='';switch(_0x2787a8['action']){case'add':_0x1cf17c='Added\x20'+_0x2787a8['amount']+'\x20points';break;case'subtract':_0x1cf17c=_0x3b3293(0x15d)+_0x2787a8['amount']+'\x20points';break;case'set':_0x1cf17c=_0x3b3293(0x302)+_0x2787a8['amount']+'\x20points';break;default:_0x1cf17c=_0x2787a8[_0x3b3293(0x1bf)]+'\x20'+_0x2787a8[_0x3b3293(0x34d)]+'\x20points';}_0x2d85b5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x27ecd7+_0x3b3293(0x1ed)+(_0x2787a8['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1cf17c+_0x3b3293(0x294)+_0x2787a8[_0x3b3293(0x1bf)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2787a8[_0x3b3293(0x342)]||0x0)+'\x20→\x20'+(_0x2787a8['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2787a8['reason']||'No\x20reason\x20provided')+_0x3b3293(0x1ed)+(_0x2787a8['adminEmail']||_0x3b3293(0x38a))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x16e671['appendChild'](_0x2d85b5);});}catch(_0x14b9a0){console['error']('Error\x20loading\x20points\x20history:',_0x14b9a0),_0x16e671['innerHTML']=_0xf9ff5(0x2c8)+_0x14b9a0['message']+'</td></tr>';}}function filterPointsOverview(){const _0xd6e8c5=a0_0x34a2a3,_0x508c23=document['getElementById'](_0xd6e8c5(0x2b3))['value'][_0xd6e8c5(0x225)]();if(!window[_0xd6e8c5(0x2f4)])return;const _0xb0bcfd=window['allUsersPoints']['filter'](_0x45d87b=>{const _0x4cefc1=(_0x45d87b['displayName']||_0x45d87b['username']||'')['toLowerCase'](),_0x12f513=(_0x45d87b['email']||'')['toLowerCase']();return _0x4cefc1['includes'](_0x508c23)||_0x12f513['includes'](_0x508c23);});renderPointsOverview(_0xb0bcfd);}function sortPointsOverview(){const _0x2e9901=a0_0x34a2a3,_0x1d6653=document['getElementById']('points-sort-order')[_0x2e9901(0x288)];if(!window[_0x2e9901(0x2f4)])return;const _0x1fa51f=[...window['allUsersPoints']];switch(_0x1d6653){case'points-desc':_0x1fa51f[_0x2e9901(0x245)]((_0x4e7ded,_0x2fdfd3)=>(_0x2fdfd3[_0x2e9901(0x22b)]||0x0)-(_0x4e7ded[_0x2e9901(0x22b)]||0x0));break;case'points-asc':_0x1fa51f[_0x2e9901(0x245)]((_0xf60f21,_0x45479a)=>(_0xf60f21[_0x2e9901(0x22b)]||0x0)-(_0x45479a['points']||0x0));break;case'name-asc':_0x1fa51f[_0x2e9901(0x245)]((_0xe9eca,_0x5619a8)=>{const _0xf722d1=_0x2e9901,_0x26a67a=(_0xe9eca[_0xf722d1(0x2bd)]||_0xe9eca['username']||'')[_0xf722d1(0x225)](),_0x19a9c9=(_0x5619a8[_0xf722d1(0x2bd)]||_0x5619a8[_0xf722d1(0x297)]||'')['toLowerCase']();return _0x26a67a['localeCompare'](_0x19a9c9);});break;case'name-desc':_0x1fa51f['sort']((_0x55cd41,_0x1d914)=>{const _0x4b7681=_0x2e9901,_0x827dd8=(_0x55cd41[_0x4b7681(0x2bd)]||_0x55cd41[_0x4b7681(0x297)]||'')['toLowerCase'](),_0x1ebde9=(_0x1d914['displayName']||_0x1d914['username']||'')[_0x4b7681(0x225)]();return _0x1ebde9['localeCompare'](_0x827dd8);});break;}renderPointsOverview(_0x1fa51f);}async function handleAwardItem(_0x412c8b){const _0x16da37=a0_0x34a2a3;_0x412c8b['preventDefault']();const _0x289085=document['getElementById']('selected-user-id')['value'],_0x1416ad=document[_0x16da37(0x183)](_0x16da37(0x2c4))['value'],_0x2d959c=document[_0x16da37(0x183)](_0x16da37(0x261))['value']['trim']();if(!_0x289085||!_0x1416ad){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')[_0x16da37(0x30d)]();}catch(_0xe924ba){console['error'](_0x16da37(0x209),_0xe924ba),showNotification('Failed\x20to\x20award\x20item:\x20'+_0xe924ba[_0x16da37(0x17d)],'error');}}async function loadUserPointsHistory(_0x390e4e){const _0x108d85=a0_0x34a2a3;try{const _0x25eef1=collection(db,'pointsHistory'),_0x904540=query(_0x25eef1,where('userId','==',_0x390e4e),orderBy('timestamp','desc')),_0x43267e=await getDocs(_0x904540);console['log']('Found\x20'+_0x43267e[_0x108d85(0x206)]+'\x20history\x20entries\x20for\x20user\x20'+_0x390e4e),showNotification('User\x20has\x20'+_0x43267e['size']+_0x108d85(0x1fd),'info');}catch(_0x255dde){console[_0x108d85(0x27f)]('Error\x20loading\x20user\x20points\x20history:',_0x255dde),showNotification('Failed\x20to\x20load\x20user\x20history',_0x108d85(0x27f));}}async function initializeUserPointsField(){const _0x2e8661=a0_0x34a2a3;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x9b98e7=collection(db,'userProfiles'),_0x1c1805=await getDocs(_0x9b98e7);if(_0x1c1805['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x2e6f5c=0x0,_0x10b512=0x0;const _0x59da98=writeBatch(db);let _0x54cc56=0x0;return console['log']('Found\x20'+_0x1c1805['size']+'\x20users\x20to\x20check...'),_0x1c1805['forEach'](_0x334f67=>{const _0x3292a4=a0_0x5ce8,_0x590f8c=_0x334f67[_0x3292a4(0x1cc)]();_0x590f8c['points']===undefined||_0x590f8c[_0x3292a4(0x22b)]===null?(_0x59da98['update'](_0x334f67['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x2e6f5c++,_0x54cc56++,console['log']('Queued\x20'+(_0x590f8c['displayName']||_0x590f8c['username']||_0x590f8c['email']||'Unknown')+_0x3292a4(0x196))):(_0x10b512++,console['log']((_0x590f8c[_0x3292a4(0x2bd)]||_0x590f8c[_0x3292a4(0x297)]||_0x590f8c['email']||_0x3292a4(0x161))+'\x20already\x20has\x20points:\x20'+_0x590f8c['points'])),_0x54cc56>=0x1f4&&console[_0x3292a4(0x19b)]('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x2e6f5c>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x2e6f5c+'\x20users...'),await _0x59da98['commit'](),console['log']('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x2e6f5c+_0x2e8661(0x37e))):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x1c1805['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x2e6f5c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x10b512),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x2e6f5c+'\x20users.\x20'+_0x10b512+_0x2e8661(0x2fe),'success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x1c1805['size'],'usersUpdated':_0x2e6f5c,'usersAlreadyHadPoints':_0x10b512};}catch(_0xf64cdb){console['error']('Error\x20initializing\x20points\x20field:',_0xf64cdb),showNotification('Error\x20initializing\x20points:\x20'+_0xf64cdb[_0x2e8661(0x17d)],_0x2e8661(0x27f));throw _0xf64cdb;}}function addPointsMigrationButton(){const _0x28a255=a0_0x34a2a3,_0x9910e=document['getElementById']('manage-points');if(!_0x9910e)return;if(document['getElementById'](_0x28a255(0x1dc)))return;const _0x36c09e=document['createElement']('div');_0x36c09e['className']='migration-section',_0x36c09e[_0x28a255(0x17e)]['marginBottom']='20px',_0x36c09e[_0x28a255(0x17e)][_0x28a255(0x17a)]='15px',_0x36c09e['style']['backgroundColor']=_0x28a255(0x170),_0x36c09e[_0x28a255(0x17e)]['border']=_0x28a255(0x238),_0x36c09e['style'][_0x28a255(0x1fb)]='5px',_0x36c09e['innerHTML']=_0x28a255(0x39f);const _0x4ab653=_0x9910e['querySelector']('.section-header');_0x4ab653&&_0x4ab653['insertAdjacentElement']('afterend',_0x36c09e),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x32b270=_0x28a255;if(confirm(_0x32b270(0x39e))){this['disabled']=!![],this[_0x32b270(0x26a)]=_0x32b270(0x391);try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this[_0x32b270(0x17e)][_0x32b270(0x399)]='#28a745',setTimeout(()=>{const _0x137f28=_0x32b270;_0x36c09e['style'][_0x137f28(0x366)]='none';},0xbb8);}catch(_0x488aa3){this['innerHTML']=_0x32b270(0x27b),this['disabled']=![];}}});}function setupManagePointsSection(){const _0x4d9997=a0_0x34a2a3;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x4a54fb=document['getElementById']('points-user-search');_0x4a54fb&&_0x4a54fb[_0x4d9997(0x211)]('input',debounce(searchUsersForPoints,0x12c));const _0xf63d0=document[_0x4d9997(0x183)]('modify-points-form');_0xf63d0&&_0xf63d0['addEventListener']('submit',handleModifyPoints);const _0x5d4952=document['getElementById']('award-item-form');_0x5d4952&&_0x5d4952['addEventListener']('submit',handleAwardItem);const _0x533b87=document['getElementById']('points-overview-search');_0x533b87&&_0x533b87['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x5a081c=document['getElementById'](_0x4d9997(0x1ab));_0x5a081c&&_0x5a081c['addEventListener'](_0x4d9997(0x295),sortPointsOverview);const _0x20e010=document['getElementById']('refresh-points-overview');_0x20e010&&_0x20e010[_0x4d9997(0x211)]('click',loadPointsOverview);const _0x36f4bf=document['getElementById']('bulk-award-points-btn');_0x36f4bf&&_0x36f4bf['addEventListener']('click',async()=>{const _0x25bb31=_0x4d9997;confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x36f4bf['disabled']=!![],_0x36f4bf['innerHTML']=_0x25bb31(0x2f8),await _0x3c6394(),_0x36f4bf[_0x25bb31(0x2b6)]=![],_0x36f4bf['innerHTML']=_0x25bb31(0x2f6));});const _0x2ff92b=document['getElementById'](_0x4d9997(0x24d));_0x2ff92b&&_0x2ff92b[_0x4d9997(0x211)]('click',awardPointsToAllPilots);async function _0x3c6394(){const _0x120fc7=_0x4d9997;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x3257ec={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'≥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x40eb4e=0x0,_0x2b4dfc=0x0,_0x26d616=0x0,_0x25ecaa=0x0,_0x4e936b=0x0,_0x55ac39=0x0;const _0x1ae02b=new Set(),_0x46eaa7=collection(db,_0x120fc7(0x15e)),_0x3f71f9=query(_0x46eaa7,where('reason','>=','Bulk\x20award:'),where('reason','<=','Bulk\x20award:')),_0x54a643=await getDocs(_0x3f71f9);_0x54a643[_0x120fc7(0x291)](_0x21125f=>{const _0x1f7e6b=_0x120fc7,_0x14b6a7=_0x21125f[_0x1f7e6b(0x1cc)](),_0x21631e=_0x14b6a7['reason']||'',_0x45ece1=_0x21631e[_0x1f7e6b(0x190)](/Match ID: ([a-zA-Z0-9]+)/);_0x45ece1&&_0x45ece1[0x1]&&_0x1ae02b['add'](_0x45ece1[0x1]);}),console['log']('Found\x20'+_0x1ae02b['size']+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x1545b6,_0x36c5a0,_0x300d64]=await Promise['all']([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0x4b8492=_0x1545b6['size']+_0x36c5a0[_0x120fc7(0x206)]+_0x300d64['size'];showNotification(_0x120fc7(0x286)+_0x4b8492+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x35e716=async(_0x4c89f5,_0xee0350)=>{const _0x16cf20=_0x120fc7;let _0x26517f=writeBatch(db);const _0x55c1ec=[];let _0x3bce13=0x0;for(const _0x1124dd of _0x4c89f5['docs']){try{if(_0x1ae02b['has'](_0x1124dd['id'])){if(_0xee0350==='D1')_0x55ac39++;if(_0xee0350==='D2')_0x55ac39++;if(_0xee0350==='D3')_0x55ac39++;continue;}const _0x2b95dd=_0x1124dd['data'](),_0x327c90=_0x2b95dd['subgameType']||_0x16cf20(0x185),_0x3d2a4f=_0x3257ec[_0x327c90]||0xa;let _0x6475d6=_0x2b95dd[_0x16cf20(0x2a7)];if(!_0x6475d6&&_0x2b95dd[_0x16cf20(0x30c)]){const [_0x1b4774,_0x11535f,_0x4b730f]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x2b95dd['winnerUsername']))),getDocs(query(collection(db,_0x16cf20(0x2b5)),where('username','==',_0x2b95dd[_0x16cf20(0x30c)]))),getDocs(query(collection(db,_0x16cf20(0x1ad)),where('username','==',_0x2b95dd['winnerUsername'])))]);if(!_0x1b4774['empty'])_0x6475d6=_0x1b4774['docs'][0x0]['id'];else{if(!_0x11535f['empty'])_0x6475d6=_0x11535f['docs'][0x0]['id'];else{if(!_0x4b730f['empty'])_0x6475d6=_0x4b730f['docs'][0x0]['id'];}}}let _0x2fd1a7=_0x2b95dd[_0x16cf20(0x192)];if(!_0x2fd1a7&&_0x2b95dd[_0x16cf20(0x240)]){const [_0x23753c,_0x4245c4,_0x341676]=await Promise['all']([getDocs(query(collection(db,_0x16cf20(0x351)),where(_0x16cf20(0x297),'==',_0x2b95dd['loserUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x2b95dd['loserUsername']))),getDocs(query(collection(db,_0x16cf20(0x1ad)),where(_0x16cf20(0x297),'==',_0x2b95dd['loserUsername'])))]);if(!_0x23753c['empty'])_0x2fd1a7=_0x23753c[_0x16cf20(0x20d)][0x0]['id'];else{if(!_0x4245c4['empty'])_0x2fd1a7=_0x4245c4[_0x16cf20(0x20d)][0x0]['id'];else{if(!_0x341676['empty'])_0x2fd1a7=_0x341676['docs'][0x0]['id'];}}}if(_0x6475d6&&_0x2fd1a7){const _0x2f37ad=doc(db,'userProfiles',_0x6475d6),_0x184f86=doc(db,'userProfiles',_0x2fd1a7),[_0x4e6c5d,_0x8fd017]=await Promise['all']([getDoc(_0x2f37ad),getDoc(_0x184f86)]);if(_0x4e6c5d['exists']()){const _0x506516=_0x4e6c5d['data'](),_0x4527a4=_0x506516['points']||0x0;_0x26517f[_0x16cf20(0x199)](_0x2f37ad,{'points':_0x4527a4+_0x3d2a4f,'lastPointsModified':serverTimestamp()}),_0x55c1ec['push']({'userId':_0x6475d6,'userEmail':_0x506516[_0x16cf20(0x212)]||'unknown','displayName':_0x506516['displayName']||_0x2b95dd['winnerUsername']||'Unknown\x20User','action':'add','amount':_0x3d2a4f,'previousPoints':_0x4527a4,'newPoints':_0x4527a4+_0x3d2a4f,'reason':'Bulk\x20award:\x20'+_0x327c90+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x1124dd['id']+_0x16cf20(0x31d)+_0xee0350,'adminEmail':auth['currentUser'][_0x16cf20(0x212)],'timestamp':serverTimestamp()});}if(_0x8fd017['exists']()){const _0x477b10=_0x8fd017['data'](),_0x53312a=_0x477b10['points']||0x0;_0x26517f['update'](_0x184f86,{'points':_0x53312a+_0x3d2a4f,'lastPointsModified':serverTimestamp()}),_0x55c1ec[_0x16cf20(0x26d)]({'userId':_0x2fd1a7,'userEmail':_0x477b10['email']||'unknown','displayName':_0x477b10['displayName']||_0x2b95dd[_0x16cf20(0x240)]||_0x16cf20(0x38e),'action':'add','amount':_0x3d2a4f,'previousPoints':_0x53312a,'newPoints':_0x53312a+_0x3d2a4f,'reason':_0x16cf20(0x2cc)+_0x327c90+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x1124dd['id']+_0x16cf20(0x31d)+_0xee0350,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x25ecaa+=_0x3d2a4f*0x2,_0x3bce13+=0x2,_0x1ae02b['add'](_0x1124dd['id']);if(_0x3bce13>=0x190){await _0x26517f[_0x16cf20(0x276)]();for(const _0x586432 of _0x55c1ec){await addDoc(collection(db,'pointsHistory'),_0x586432);}_0x26517f=writeBatch(db),_0x3bce13=0x0,_0x55c1ec[_0x16cf20(0x2d4)]=0x0;}}}catch(_0x15d1b7){console['error']('Error\x20processing\x20'+_0xee0350+_0x16cf20(0x1df)+_0x1124dd['id']+':',_0x15d1b7),_0x4e936b++;}}if(_0x3bce13>0x0){await _0x26517f['commit']();for(const _0x4f3a40 of _0x55c1ec){await addDoc(collection(db,'pointsHistory'),_0x4f3a40);}}return{'processed':_0xee0350==='D1'?_0x40eb4e:_0xee0350==='D2'?_0x2b4dfc:_0x26d616};};await _0x35e716(_0x1545b6,'D1'),await _0x35e716(_0x36c5a0,'D2'),await _0x35e716(_0x300d64,'D3'),showNotification('Completed!\x20Processed\x20'+_0x40eb4e+'\x20D1\x20matches,\x20'+_0x2b4dfc+'\x20D2\x20matches,\x20'+_0x26d616+_0x120fc7(0x258)+(_0x120fc7(0x236)+_0x25ecaa+'\x20points.\x20Skipped\x20'+_0x55ac39+_0x120fc7(0x1b9)+_0x4e936b),'success'),document['getElementById'](_0x120fc7(0x393))&&loadPointsOverview();}catch(_0x3b38af){console['error'](_0x120fc7(0x201),_0x3b38af),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x3b38af['message'],'error');}}const _0x1dfc42=document[_0x4d9997(0x183)]('quick-edit-points-modal');if(_0x1dfc42){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x2e6ca5=_0x1dfc42[_0x4d9997(0x2f7)]('.close-btn');_0x2e6ca5?_0x2e6ca5[_0x4d9997(0x211)]('click',function(){const _0x4ea1a5=_0x4d9997;console[_0x4ea1a5(0x3bb)](_0x4ea1a5(0x367)),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x467fdf=document['getElementById']('cancel-quick-edit');_0x467fdf?_0x467fdf['addEventListener'](_0x4d9997(0x16a),function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x3b9a07=document['getElementById']('quick-edit-points-form');_0x3b9a07?_0x3b9a07[_0x4d9997(0x211)]('submit',function(_0x3b3f7){const _0x243e50=_0x4d9997;console['log'](_0x243e50(0x181)),handleQuickEditPoints(_0x3b3f7);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x1dfc42['addEventListener']('click',function(_0x3da07b){const _0x20c9fb=_0x4d9997;_0x3da07b['target']===_0x1dfc42&&(console[_0x20c9fb(0x3bb)](_0x20c9fb(0x1e9)),closeQuickEditModal());});}else console[_0x4d9997(0x27f)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console[_0x4d9997(0x3bb)]('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x55a780=a0_0x34a2a3;try{const _0xebe70a=parseInt(prompt(_0x55a780(0x220),'10'));if(!_0xebe70a||isNaN(_0xebe70a)){showNotification('Invalid\x20points\x20amount',_0x55a780(0x27f));return;}if(!confirm('This\x20will\x20award\x20'+_0xebe70a+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification(_0x55a780(0x348),_0x55a780(0x18b));const [_0xfdc8b3,_0x4ac8af,_0x367494]=await Promise['all']([getDocs(collection(db,_0x55a780(0x351))),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x55a780(0x1ad)))]);console['log'](_0x55a780(0x286)+_0xfdc8b3['size']+'\x20D1\x20pilots,\x20'+_0x4ac8af['size']+_0x55a780(0x354)+_0x367494['size']+'\x20D3\x20pilots');const _0x2fef23=_0xfdc8b3['size']+_0x4ac8af['size']+_0x367494['size'],_0x3d3c3e=new Map();_0xfdc8b3['forEach'](_0x5ca39c=>{const _0x212a8b=_0x5ca39c['data']();_0x3d3c3e['set'](_0x5ca39c['id'],{'username':_0x212a8b['username'],'ladder':'D1'});}),_0x4ac8af['forEach'](_0x58d206=>{const _0x3f4797=_0x55a780,_0x11a106=_0x58d206['data']();_0x3d3c3e['set'](_0x58d206['id'],{'username':_0x11a106[_0x3f4797(0x297)],'ladder':'D2'});}),_0x367494[_0x55a780(0x291)](_0x17e6e1=>{const _0x1c966f=_0x17e6e1['data']();_0x3d3c3e['set'](_0x17e6e1['id'],{'username':_0x1c966f['username'],'ladder':'D3'});}),console['log']('Found\x20'+_0x3d3c3e['size']+_0x55a780(0x252));let _0x384b30=0x0,_0x34c4e=0x0,_0x5858dd=0x0;const _0x33fc73=Array['from'](_0x3d3c3e['keys']()),_0x3befb9=0x190;for(let _0x262cbd=0x0;_0x262cbd<_0x33fc73[_0x55a780(0x2d4)];_0x262cbd+=_0x3befb9){const _0x3da366=writeBatch(db),_0x5c21c8=[],_0x40bf64=_0x33fc73['slice'](_0x262cbd,_0x262cbd+_0x3befb9),_0x492862=await Promise['all'](_0x40bf64['map'](_0x3fa702=>getDoc(doc(db,'userProfiles',_0x3fa702))));for(let _0x424afd=0x0;_0x424afd<_0x40bf64['length'];_0x424afd++){try{const _0x143e4a=_0x40bf64[_0x424afd],_0x3cddd8=_0x3d3c3e['get'](_0x143e4a),_0x3307f8=_0x492862[_0x424afd];if(_0x3307f8['exists']()){const _0x57e2b5=_0x3307f8['data'](),_0x518ef7=_0x57e2b5[_0x55a780(0x22b)]||0x0,_0xa0bf56=_0x518ef7+_0xebe70a;_0x3da366['update'](doc(db,'userProfiles',_0x143e4a),{'points':_0xa0bf56,'lastPointsModified':serverTimestamp()}),_0x5c21c8[_0x55a780(0x26d)]({'userId':_0x143e4a,'userEmail':_0x57e2b5['email']||'unknown','displayName':_0x57e2b5['displayName']||_0x3cddd8[_0x55a780(0x297)]||'Unknown\x20User','action':'add','amount':_0xebe70a,'previousPoints':_0x518ef7,'newPoints':_0xa0bf56,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x3cddd8[_0x55a780(0x198)]+')','adminEmail':auth[_0x55a780(0x339)][_0x55a780(0x212)],'timestamp':serverTimestamp()}),_0x34c4e+=_0xebe70a,_0x384b30++;}else _0x5858dd++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x3cddd8['username']+'\x20('+_0x143e4a+')');}catch(_0x7b9f34){_0x5858dd++,console[_0x55a780(0x27f)]('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x7b9f34);}}await _0x3da366['commit']();for(const _0x36ce36 of _0x5c21c8){await addDoc(collection(db,_0x55a780(0x15e)),_0x36ce36);}showNotification('Processed\x20'+_0x384b30+'/'+_0x2fef23+_0x55a780(0x30e),'info');}showNotification(_0x55a780(0x301)+_0x34c4e+_0x55a780(0x2ca)+_0x384b30+_0x55a780(0x20f)+_0x5858dd,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0xba97fb){console[_0x55a780(0x27f)](_0x55a780(0x1f0),_0xba97fb),showNotification(_0x55a780(0x3a6)+_0xba97fb[_0x55a780(0x17d)],'error');}}function setupManageRibbonsSection(){const _0xfddc8f=a0_0x34a2a3;console[_0xfddc8f(0x3bb)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x41de8e=document[_0xfddc8f(0x183)]('ribbon-user-search');_0x41de8e&&_0x41de8e['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x177e68=document['getElementById'](_0xfddc8f(0x30f));_0x177e68&&_0x177e68[_0xfddc8f(0x211)](_0xfddc8f(0x16a),searchRibbonUser);const _0x132487=document['getElementById']('add-ribbon-form');_0x132487&&_0x132487['addEventListener']('submit',addRibbon),_0x41de8e&&_0x41de8e['addEventListener']('keypress',function(_0x57ebb9){_0x57ebb9['key']==='Enter'&&(_0x57ebb9['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x33b31d,_0x287c6c,_0x530cfe,_0x3599ce=''){const _0x5bc377=a0_0x34a2a3,_0x253a3d=doc(db,'userProfiles',_0x33b31d),_0x9641e5=await getDoc(_0x253a3d);if(!_0x9641e5['exists']())throw new Error('User\x20not\x20found');const _0x1b783f=_0x9641e5[_0x5bc377(0x1cc)](),_0x4cf2ca=_0x1b783f['points']!==undefined?_0x1b783f[_0x5bc377(0x22b)]:0x0;_0x1b783f['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x1b783f['displayName']||_0x1b783f['email']||_0x5bc377(0x161))),await updateDoc(_0x253a3d,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x574737=_0x4cf2ca;switch(_0x287c6c){case'add':_0x574737=_0x4cf2ca+_0x530cfe;break;case _0x5bc377(0x36f):_0x574737=Math[_0x5bc377(0x224)](0x0,_0x4cf2ca-_0x530cfe);break;case'set':_0x574737=_0x530cfe;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x253a3d,{'points':_0x574737,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x33b31d,'userEmail':_0x1b783f['email']||_0x5bc377(0x338),'displayName':_0x1b783f[_0x5bc377(0x2bd)]||_0x1b783f['username']||'Unknown\x20User','action':_0x287c6c,'amount':_0x530cfe,'previousPoints':_0x4cf2ca,'newPoints':_0x574737,'reason':_0x3599ce,'adminEmail':auth['currentUser'][_0x5bc377(0x212)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x412b0f=a0_0x34a2a3,_0xf37c3f=document['getElementById'](_0x412b0f(0x393));if(!_0xf37c3f)return;_0xf37c3f['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x259872=collection(db,'userProfiles'),_0x1abe3a=await getDocs(_0x259872);if(_0x1abe3a['empty']){_0xf37c3f['innerHTML']=_0x412b0f(0x246);return;}const _0x1dfd5f=[];let _0x482329=0x0;_0x1abe3a['forEach'](_0x21e6de=>{const _0x347dcd=_0x412b0f,_0x2f590b=_0x21e6de['data'](),_0x1aade0=_0x2f590b[_0x347dcd(0x22b)]!==undefined?_0x2f590b[_0x347dcd(0x22b)]:0x0;_0x2f590b['points']===undefined&&_0x482329++,_0x1dfd5f[_0x347dcd(0x26d)]({'id':_0x21e6de['id'],..._0x2f590b,'points':_0x1aade0});}),_0x482329>0x0&&(console[_0x412b0f(0x3bb)]('Found\x20'+_0x482329+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x482329+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x1dfd5f[_0x412b0f(0x245)]((_0x331605,_0x47dd7d)=>(_0x47dd7d[_0x412b0f(0x22b)]||0x0)-(_0x331605[_0x412b0f(0x22b)]||0x0)),window[_0x412b0f(0x2f4)]=_0x1dfd5f,renderPointsOverview(_0x1dfd5f);}catch(_0x51fec1){console[_0x412b0f(0x27f)]('Error\x20loading\x20points\x20overview:',_0x51fec1),_0xf37c3f['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x51fec1['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x495f36=a0_0x34a2a3,_0x5ab8d2=document['getElementById']('ribbons-overview-table-body');if(!_0x5ab8d2)return;_0x5ab8d2['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x7bdc2f,_0xa4c60a,_0x2e9bb7]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x495f36(0x24a))),getDocs(collection(db,'playerRibbonsD3'))]);_0x5ab8d2['innerHTML']='';const _0x11c045=(_0xadff0c,_0x470d50)=>{const _0x5bd91c=_0x495f36;_0xadff0c[_0x5bd91c(0x291)](_0x132244=>{const _0x20da8e=_0x5bd91c,_0x183915=_0x132244[_0x20da8e(0x1cc)](),_0x2e2f83=_0x183915[_0x20da8e(0x1db)]||{},_0x4fddc5=Object[_0x20da8e(0x363)](_0x2e2f83)['length'],_0x53dd3e=document['createElement']('tr');_0x53dd3e['innerHTML']=_0x20da8e(0x207)+(_0x183915['username']||'Unknown')+_0x20da8e(0x204)+_0x470d50['toLowerCase']()+'\x22>'+_0x470d50+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4fddc5+_0x20da8e(0x23a)+(_0x183915[_0x20da8e(0x278)]?new Date(_0x183915['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x183915['username']+'\x22\x20data-ladder=\x22'+_0x470d50+_0x20da8e(0x327),_0x5ab8d2['appendChild'](_0x53dd3e);});};_0x11c045(_0x7bdc2f,'D1'),_0x11c045(_0xa4c60a,'D2'),_0x11c045(_0x2e9bb7,'D3'),document['querySelectorAll'](_0x495f36(0x15c))['forEach'](_0x4df01d=>{const _0x1fe7fb=_0x495f36;_0x4df01d[_0x1fe7fb(0x211)]('click',function(){const _0x2053de=_0x1fe7fb,_0x33adcc=this[_0x2053de(0x1c5)]['username'],_0x20259f=this[_0x2053de(0x1c5)]['ladder'];editUserRibbons(_0x33adcc,_0x20259f);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x3ca3b8){console[_0x495f36(0x27f)](_0x495f36(0x19c),_0x3ca3b8),_0x5ab8d2['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification(_0x495f36(0x1a0),'error');}}async function searchRibbonUser(){const _0x273b30=a0_0x34a2a3,_0x3cc1fc=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x3cc1fc){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x8553fd,_0x5828a7,_0x47a38c]=await Promise[_0x273b30(0x18d)]([getDoc(doc(db,'playerRibbons',_0x3cc1fc)),getDoc(doc(db,_0x273b30(0x24a),_0x3cc1fc)),getDoc(doc(db,'playerRibbonsD3',_0x3cc1fc))]);let _0x15eef0=null,_0x3a39ad=null;if(_0x8553fd['exists']())_0x15eef0='D1',_0x3a39ad=_0x8553fd['data']();else{if(_0x5828a7['exists']())_0x15eef0='D2',_0x3a39ad=_0x5828a7[_0x273b30(0x1cc)]();else _0x47a38c['exists']()&&(_0x15eef0='D3',_0x3a39ad=_0x47a38c['data']());}_0x15eef0?(document['getElementById']('current-ribbon-user')[_0x273b30(0x31f)]=_0x3cc1fc,document['getElementById'](_0x273b30(0x1a4))['value']=_0x3cc1fc,document['getElementById'](_0x273b30(0x242))['value']=_0x15eef0,document['getElementById']('user-ribbon-management')['style'][_0x273b30(0x366)]='block',displayCurrentRibbons(_0x3a39ad['ribbons']||{}),showNotification('Found\x20'+_0x3cc1fc+'\x20in\x20'+_0x15eef0+'\x20ladder','success')):showNotification('User\x20'+_0x3cc1fc+'\x20not\x20found\x20in\x20any\x20ladder',_0x273b30(0x27f));}catch(_0x5b2dfa){console['error']('Error\x20searching\x20user:',_0x5b2dfa),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x3d7139){const _0x17a6d2=a0_0x34a2a3,_0xb1dcd5=document['getElementById']('current-ribbons-list');if(!_0xb1dcd5)return;_0xb1dcd5['innerHTML']='';if(Object['keys'](_0x3d7139)[_0x17a6d2(0x2d4)]===0x0){_0xb1dcd5[_0x17a6d2(0x26a)]=_0x17a6d2(0x1cf);return;}Object[_0x17a6d2(0x1c9)](_0x3d7139)['forEach'](([_0xa4f750,_0x1db11b])=>{const _0x2dc76a=_0x17a6d2,_0x4a7848=document['createElement'](_0x2dc76a(0x1da));_0x4a7848[_0x2dc76a(0x28c)]='ribbon-item',_0x4a7848['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0xa4f750+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x1db11b[_0x2dc76a(0x307)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x1db11b['awardedAt']?new Date(_0x1db11b['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0xa4f750+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xb1dcd5['appendChild'](_0x4a7848);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x380c5a=>{_0x380c5a['addEventListener']('click',function(){const _0x43b3d5=a0_0x5ce8,_0x356141=this['dataset'][_0x43b3d5(0x1a3)];removeRibbon(_0x356141);});});}async function addRibbon(_0x207627){const _0x1611ae=a0_0x34a2a3;_0x207627['preventDefault']();const _0x2053ba=document[_0x1611ae(0x183)]('ribbon-target-user')[_0x1611ae(0x288)],_0x3e44f8=document['getElementById']('ribbon-target-ladder')['value'],_0x5928d0=document['getElementById']('ribbon-type-select')[_0x1611ae(0x288)],_0x39a27b=parseInt(document[_0x1611ae(0x183)]('ribbon-level')[_0x1611ae(0x288)]);if(!_0x2053ba||!_0x3e44f8||!_0x5928d0||!_0x39a27b){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x21c4ad='playerRibbons'+(_0x3e44f8==='D1'?'':_0x3e44f8),_0x20e81f=doc(db,_0x21c4ad,_0x2053ba),_0x1eb0be=await getDoc(_0x20e81f),_0x485071=_0x1eb0be[_0x1611ae(0x35f)]()?_0x1eb0be['data']()[_0x1611ae(0x1db)]||{}:{};_0x485071[_0x5928d0]={'level':_0x39a27b,'awardedAt':serverTimestamp()},await setDoc(_0x20e81f,{'username':_0x2053ba,'ladder':_0x3e44f8,'ribbons':_0x485071,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x1611ae(0x2b9)+_0x5928d0+'\x20Level\x20'+_0x39a27b+_0x1611ae(0x3bd)+_0x2053ba,'success'),displayCurrentRibbons(_0x485071),document[_0x1611ae(0x183)]('ribbon-type-select')[_0x1611ae(0x288)]='',document['getElementById'](_0x1611ae(0x2b8))['value']='1';}catch(_0x399ac2){console['error'](_0x1611ae(0x1bd),_0x399ac2),showNotification('Error\x20adding\x20ribbon','error');}}function a0_0x1666(){const _0x66a01b=['Loading\x20user\x20data...','highlight-description','trophy-form','D1\x20Players','elo-history-table-body','createdAt','borderRadius','edit-match-winner','\x20points\x20history\x20entries','edit-username','manage-players','history-type-filter','Error\x20in\x20bulk\x20award\x20points:','achievementImageUrl','user-search','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','size','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','trophy-preview-img','Error\x20awarding\x20item:','inactive-days-filter','eloHistoryD2','article-content','docs','matchDate','\x20pilots.\x20Errors:\x20','warning','addEventListener','email','Searching\x20for\x20player\x20in\x20','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','Error','no-results','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','edit-match-winner-comment','\x20not\x20found.','edit-match-winner-suicides','create-test-match-btn','\x20before\x20match:\x20','trophy-modal-title','No\x20player\x20selected','Error\x20loading\x20users:','Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','prototype','uid','demote-username','max','toLowerCase','flex','Highlight','.username','RejectedD1','loserDemoLink','points','roleAssignedAt','lastPointsModified','\x20ladder,\x20page\x20','No\x20match\x20data\x20found\x20for\x20resimulation','manage-ribbons','set','validation-results-container','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','No\x20ELO\x20history\x20found\x20for\x20player\x20','Loading\x20points\x20data...','Awarded\x20','achievementType','1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)','firstVisible','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','load-elo-history-data','daysSinceMatch','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','#users-table-body\x20tr[data-username=\x22','Error\x20saving\x20article:','loserUsername','image','ribbon-target-ladder','img','\x20vs\x20','sort','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','manage-levels-ribbons','getComputedStyle','Match\x20not\x20found\x20in\x20approved\x20matches','playerRibbonsD2','roleColor','Error\x20promoting\x20player:\x20','award-all-pilots-btn','462846vhEzwr','includes','rgba(255,\x20255,\x20255,\x200.1)','trophyDefinitions','\x20unique\x20pilots\x20across\x20all\x20ladders','winnerName','parentNode','d1-next-page','highlight-title','eloHistoryD3','\x20D3\x20matches.\x20','fa-check-circle','Failed\x20to\x20load\x20player\x20data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','#players-table-body\x20tr','playerId','./ladderalgorithm.js','sendPromotionNotification','assign-trophy-image','award-reason','approvedMatchesD2','highlight-creator-image-container','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','Inactive\x20players\x20section\x20initialized','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','inactive-players','Username\x20','Match','innerHTML','Load\x20trophies\x20data\x20clicked','Error\x20initializing\x20dashboard:','push','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','Test\x20match','Bronze','highlight-type','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','#ffffff','articles','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','commit','Load\x20ribbons\x20data\x20clicked','lastUpdated','Modal\x20opened\x20successfully','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','.edit-article-btn','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','approvedAt','error','creatorImageUrl','currentTarget','preventDefault','edit-elo','demotion','edit-match-loser-score','Found\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','value','Sidebar\x20navigation\x20initialized\x20with\x20permissions','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','demote-ladder','className','settings','toLocaleDateString','approvedMatches','author','forEach','#users-table-body\x20tr','role','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','change','No\x20description','username','closeResimulateModal','Found\x20user\x20in\x20','eloHistory','matches-table-body','location','Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM','searchTerm','trophy-rarity\x20','User\x20\x22','System','Modal\x20computed\x20styles:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','articles-table-body','seconds','date','winnerId','achievementDetails','article-title','Player\x20not\x20found\x20in\x20','classList','Article\x20created\x20successfully','players-ladder-selector','680268vEKDgq','contains','new-player-elo','highlight-match-date-container','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','points-overview-search','article-form','playersD2','disabled','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ribbon-level','Added\x20','endDate','player-count','data-match-id','displayName','edit-match-ladder','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','Failed\x20to\x20update\x20player:\x20','highlight-achievement-type','roleName','videoId','store-item-select','creator','remove','load-ribbons-data','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','values','\x20points\x20to\x20','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Bulk\x20award:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20highlight:','history-end-date','elo','fromDate','Removed\x20','points-management-forms','length','positive-change','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22','active','N/A','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','winnerDemoLink','Defaulted\x20to\x20D1\x20ladder','highlight-map','.quick-edit-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','Looking\x20for\x20user\x20role\x20information\x20for\x20','add-player-form','add','promotedBy','</td></tr>','15mLjzQB','Attempting\x20to\x20promote\x20','input[name=\x22demote-ladder\x22]:checked','ref','eloRating','admin','Query\x20created:','previousElo','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','edit-highlight-achievementDetails-input','promotion','Achievement','No\x20user\x20ID\x20found\x20on\x20button','TestLoser','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','Deleting\x20match...','allUsersPoints','0.6','<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches','querySelector','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...','\x20from\x20','\x22\x20not\x20found\x20in\x20any\x20collection','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','Error\x20modifying\x20points:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','\x20users\x20already\x20had\x20points.','Title\x20and\x20content\x20are\x20required','<div\x20class=\x22loading\x22>Searching...</div>','Complete!\x20Awarded\x20','Set\x20to\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','edit-match-loser','Role\x20\x22','highlight-map-container','level','Setting\x20up\x20Manage\x20Matches\x20section','❌\x20Missing','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','1755655nFttSc','winnerUsername','reset','\x20pilots...','search-ribbon-user-btn','user-role','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','appendChild','Points\x20updated\x20successfully','\x20in\x20','highlight-match-info','manage-trophies','edit-highlight-achievementType-input','highlight-achievement-details','You\x20must\x20be\x20logged\x20in','loserScore','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','\x20Weekly\x20Activity','\x20-\x20','\x20<span\x20class=\x22user-source\x22>(','textContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','promote-form','Failed\x20to\x20load\x20user\x20data:\x20','toDate','nonParticipants','Trophy\x20updated\x20successfully','add-new-role-btn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','user-roles-section','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','Setting\x20up\x20matches\x20action\x20buttons...','common','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','mapCreator','querySelectorAll','Trophy\x20\x22','edit-highlight-mapVersion-input','-next-page','search-result-item','name','data-section','newElo','Profile','admin_modification','unknown','currentUser','cells','Edit\x20match\x20clicked:','highlight-loser-score','edit-highlight-matchDate-input','rankDistribution','removeEventListener','apply','cancel-set-elo-btn','previousPoints','users-table-body','lastMatch','Error\x20loading\x20highlights:','promote-username','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','Starting\x20points\x20award\x20process...','manage-highlights','lastVisible','startDate','highlight-video-container','amount','Player\x20Name\x20is\x20required','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Create\x20test\x20match\x20button\x20clicked','players','edit-highlight-loserName-input','block','\x20D2\x20pilots,\x20','trim','manage-ranks','assign-player-username','#e0e0e0','101054VxDxro','loading','quick-edit-current-points','edit-wins','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','trophy-image-preview','exists','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','\x20(+','closest','keys','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','edit-highlight-playerProfileUrl-input','display','Modal\x20close\x20button\x20clicked','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','Failed\x20to\x20assign\x20trophy:\x20','edit-highlight-achievementPlayer-input','negative-change','fa-info-circle','reset-matches-filters','desc','subtract','set-elo-btn','checked','Loading\x20dashboard\x20overview\x20data...','Attempting\x20to\x20demote\x20','removeAttribute','Error\x20initializing\x20admin\x20dashboard:','then','input[name=\x22set-elo-ladder\x22]:checked','player-search','ELO\x20rating\x20for\x20','Username\x20input\x20set\x20to:\x20','loading-cell','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','highlight-winner-score','\x20users','Modal\x20should\x20now\x20be\x20visible','.view-player-btn','empty','Player\x20deleted\x20successfully','Error\x20saving\x20highlight:\x20','Failed\x20to\x20load\x20article\x20data','none','.loading-cell','Modal\x20cancel\x20button\x20clicked','edit-highlight-map-input','highlight-id','Unknown\x20Admin','.ladder-switch\x20input','edit-match-winner-score','toLocaleString','Unknown\x20User','visible','9ekZcAv','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','3049626XTAVHn','points-overview-table-body','Deleting\x20match\x20','Error\x20finding\x20match:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','9006632LnOAGZ','Failed\x20to\x20modify\x20points:\x20','backgroundColor','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','createElement','points-user-search','demotedBy','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','playerProfileUrl','Title\x20is\x20required','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','userId','success','.nav-item','Error:\x20','opacity','demote-modal','Error\x20loading\x20trophy\x20definitions:','highlight-modal-title','cloneNode','previousElementSibling','.edit-match-btn','quick-points-amount','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','Non-Participants','Never\x20played','22930520GIkZIw','approvedMatchesD3','map','Error\x20updating\x20points:','catch','mapPlayed','selected-user-info','Highlight\x20updated\x20successfully!','activity','log','inactive-players-table-body','\x20to\x20','Found\x20specific\x20role:\x20','role-filter','setAttribute','\x20ladder','position','Silver','No\x20email','.edit-ribbons-btn','Subtracted\x20','pointsHistory','loserComment','Points\x20updated\x20successfully\x20for\x20user:','Unknown','\x20allowed\x20tabs:','.form-group','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','timestamp','edit-player-modal','Setting\x20up\x20points\x20action\x20buttons...','substring','Username\x20is\x20missing','click','getDate','Load\x20articles\x20data\x20clicked','submit','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','\x20ladder!','rgba(255,\x20193,\x207,\x200.1)','mapVersion','testFirebaseConnection','Error\x20resimulating\x20match:','matches-end-date','\x20for\x20user\x20\x22','View\x20history\x20clicked\x20for\x20user:','matchInfo','load-trophies-data','Role\x20\x27','padding','load-players-data','create-test-match-modal','message','style','Demotion','#CD7F32','Quick\x20edit\x20form\x20submitted','edit-match-id','getElementById','trophy-modal','Standard','empty-state','YouTube\x20Video\x20ID\x20(Optional)','bind','Article\x20deleted\x20successfully','data-ladder','info','Set\x20default\x20ladder\x20to:','all','updatedAt','create-creator-highlight-btn','match','Error\x20saving\x20highlight:','loserId','promote-modal','highlights','type','\x20for\x20points\x20initialization','Load\x20inactive\x20players\x20data\x20clicked','ladder','update','target','warn','Error\x20loading\x20ribbons:','#article-modal\x20.close-btn',';\x20color:\x20','highlight-match-link-container','Error\x20loading\x20ribbons\x20data','trophyId','resimulateMatch','ribbon','ribbon-target-user','resimulate-modal','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.assign-trophy-btn','Article\x20not\x20found','visibility','Error\x20deleting\x20trophy\x20definition:','points-sort-order','You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','playersD3','highlight-achievement-details-container','winnerScore','trophy-image-url','trophy-preview-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','elo-history-search','Highlight\x20not\x20found','manage-points','Error\x20deleting\x20highlight:','highlight-achievement-image','edit-match-modal','\x20already\x20processed\x20matches.\x20Errors:\x20','article-author','achievement','YouTube\x20Video\x20ID*','Error\x20adding\x20ribbon:','setHours','action','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','rarity','input','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','dataset','edit-match-loser-suicides','role-username','return\x20(function()\x20','entries','roleAssignedBy','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','data','Error\x20loading\x20trophies:','Gold','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','highlight-modal','Promoting\x20player\x20to\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','src','title','Trophy\x20not\x20found','edit-highlight-mapCreator-input','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','article-modal-title','players-table-body','div','ribbons','migrate-points-btn','Error\x20deleting\x20match:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','\x20match\x20','getDay','load-inactive-players-data','required','elo-history','.ladder-switch\x20input[value=\x22D2\x22]','Monday','page','Error\x20searching\x20users:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','Modal\x20background\x20clicked','highlight-map-version','Trophy\x20Preview','highlight-description-container','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','user-search-results','7UcHUGK','Error\x20in\x20award\x20points\x20to\x20all\x20pilots:','resimulate-match-id','stopPropagation','highlight-winner-name','highlight-achievement-player'];a0_0x1666=function(){return _0x66a01b;};return a0_0x1666();}async function removeRibbon(_0x5f02ef){const _0x2c7da8=a0_0x34a2a3,_0x531a18=document['getElementById'](_0x2c7da8(0x1a4))['value'],_0x56561f=document[_0x2c7da8(0x183)]('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x5f02ef+'\x20from\x20'+_0x531a18+'?'))return;try{const _0x187ba3='playerRibbons'+(_0x56561f==='D1'?'':_0x56561f),_0x2547aa=doc(db,_0x187ba3,_0x531a18),_0x28427b=await getDoc(_0x2547aa),_0x439008=_0x28427b['exists']()?_0x28427b['data']()[_0x2c7da8(0x1db)]||{}:{};delete _0x439008[_0x5f02ef],await setDoc(_0x2547aa,{'username':_0x531a18,'ladder':_0x56561f,'ribbons':_0x439008,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x2c7da8(0x2d2)+_0x5f02ef+'\x20from\x20'+_0x531a18,_0x2c7da8(0x3a4)),displayCurrentRibbons(_0x439008);}catch(_0x33879a){console[_0x2c7da8(0x27f)]('Error\x20removing\x20ribbon:',_0x33879a),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x38b61a,_0x37ecd8){document['getElementById']('ribbon-user-search')['value']=_0x38b61a,searchRibbonUser();}