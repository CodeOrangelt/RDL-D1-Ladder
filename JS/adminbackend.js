const a2_0x1d8f77=a2_0x448c,a2_0x3b36f2=(function(){let _0x334828=!![];return function(_0x5c27d7,_0x49639e){const _0x1ccb02=_0x334828?function(){if(_0x49639e){const _0x373340=_0x49639e['apply'](_0x5c27d7,arguments);return _0x49639e=null,_0x373340;}}:function(){};return _0x334828=![],_0x1ccb02;};}()),a2_0x2729bb=a2_0x3b36f2(this,function(){const _0x2c5076=a2_0x448c;let _0x2befb3;try{const _0x19aa1d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2befb3=_0x19aa1d();}catch(_0x423836){_0x2befb3=window;}const _0x355676=_0x2befb3[_0x2c5076(0x2fd)]=_0x2befb3['console']||{},_0x4fba05=[_0x2c5076(0x205),_0x2c5076(0x1e3),'info',_0x2c5076(0x285),'exception',_0x2c5076(0x2ed),'trace'];for(let _0x4c1e6e=0x0;_0x4c1e6e<_0x4fba05['length'];_0x4c1e6e++){const _0x527b23=a2_0x3b36f2[_0x2c5076(0x12d)]['prototype']['bind'](a2_0x3b36f2),_0x1bbf34=_0x4fba05[_0x4c1e6e],_0x1640e0=_0x355676[_0x1bbf34]||_0x527b23;_0x527b23['__proto__']=a2_0x3b36f2['bind'](a2_0x3b36f2),_0x527b23[_0x2c5076(0x1cd)]=_0x1640e0['toString']['bind'](_0x1640e0),_0x355676[_0x1bbf34]=_0x527b23;}});a2_0x2729bb();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x12a0dd){const _0x64583f=a2_0x448c;if(!_0x12a0dd)return'#ffffff';_0x12a0dd=_0x12a0dd[_0x64583f(0x19f)]('#','');_0x12a0dd['length']===0x3&&(_0x12a0dd=_0x12a0dd['split']('')[_0x64583f(0x194)](_0x3ae265=>_0x3ae265+_0x3ae265)[_0x64583f(0x18f)](''));if(_0x12a0dd[_0x64583f(0x153)]!==0x6)return _0x64583f(0xc8);const _0x4b5929=parseInt(_0x12a0dd['substring'](0x0,0x2),0x10),_0x74a51d=parseInt(_0x12a0dd[_0x64583f(0x242)](0x2,0x4),0x10),_0x8ef86=parseInt(_0x12a0dd['substring'](0x4,0x6),0x10),_0x4a7243=(_0x4b5929*0x12b+_0x74a51d*0x24b+_0x8ef86*0x72)/0x3e8;return _0x4a7243>=0x80?'#000000':_0x64583f(0xc8);}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x391642=>{const _0x21ae07=a2_0x448c;if(!_0x391642){window[_0x21ae07(0xca)]['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x55e847){console['error'](_0x21ae07(0x15f),_0x55e847),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x8ab16a){const _0x43553d=a2_0x448c;if(!_0x8ab16a)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x8ab16a+'\x20in\x20all\x20collections...');const _0x140d06=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x2b09c9=auth[_0x43553d(0x177)];let _0x5073be=null,_0x23e233=null;for(const _0xd0930 of _0x140d06){try{if(_0x2b09c9){const _0xe238d7=doc(db,_0xd0930[_0x43553d(0x1ca)],_0x2b09c9['uid']),_0x5db8e5=await getDoc(_0xe238d7);if(_0x5db8e5['exists']()){const _0x36cb48=_0x5db8e5['data']();console['log'](_0x43553d(0x21f)+_0xd0930['displayName']+'\x20by\x20UID:',_0x36cb48);const _0x29b02d=(_0x36cb48['roleName']||_0x36cb48[_0x43553d(0x141)]||'')[_0x43553d(0x171)]();if(_0x29b02d&&_0x29b02d!=='none'){_0x5073be=_0x29b02d,_0x23e233=_0xd0930[_0x43553d(0x247)],console['log']('Found\x20specific\x20role:\x20'+_0x5073be+'\x20in\x20'+_0x23e233);break;}}}if(!_0x5073be){const _0xdc9f57=collection(db,_0xd0930['name']),_0xc2fa7c=query(_0xdc9f57,where(_0x43553d(0xc5),'==',_0x8ab16a)),_0x5246c2=await getDocs(_0xc2fa7c);if(!_0x5246c2['empty']){const _0x41aa43=_0x5246c2[_0x43553d(0x116)][0x0]['data']();console[_0x43553d(0x205)]('Found\x20user\x20in\x20'+_0xd0930[_0x43553d(0x247)]+_0x43553d(0x293)+_0x8ab16a+':',_0x41aa43);const _0x453820=(_0x41aa43['roleName']||_0x41aa43['role']||'')[_0x43553d(0x171)]();if(_0x453820&&_0x453820!=='none'){_0x5073be=_0x453820,_0x23e233=_0xd0930[_0x43553d(0x247)],console['log']('Found\x20specific\x20role:\x20'+_0x5073be+'\x20in\x20'+_0x23e233);break;}}}}catch(_0x3f103d){console['error']('Error\x20checking\x20'+_0xd0930[_0x43553d(0x247)]+':',_0x3f103d);}}if(_0x5073be){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x5073be+'\x20(from\x20'+_0x23e233+')');const _0x55e665={'admin':['dashboard','manage-players',_0x43553d(0x1d3),'manage-articles',_0x43553d(0x181),'manage-ranks',_0x43553d(0x2b0),'settings',_0x43553d(0x181),'elo-history','manage-highlights','user-roles-section','manage-matches','manage-points',_0x43553d(0x30c),'manage-ribbons'],'owner':[_0x43553d(0x1af),'manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players',_0x43553d(0x28a),'manage-trophies','elo-history',_0x43553d(0x290),_0x43553d(0x106),'manage-matches','manage-points',_0x43553d(0x30c),'manage-ribbons'],'council':['dashboard',_0x43553d(0x117),'manage-matches'],'creative\x20lead':['dashboard','manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x55e665[_0x5073be])return console[_0x43553d(0x205)](_0x43553d(0x11a)+_0x5073be+_0x43553d(0x2ae),_0x55e665[_0x5073be]),_0x55e665[_0x5073be];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x8ab16a+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x1fdbc2=[]){const _0x2d7539=a2_0x448c,_0x59f393=document[_0x2d7539(0x1ec)]('.sidebar-nav\x20.nav-item'),_0x19f996=document['querySelectorAll']('.admin-section');(!_0x1fdbc2||_0x1fdbc2[_0x2d7539(0x153)]===0x0)&&(_0x1fdbc2=[_0x2d7539(0x1af)]);_0x59f393['forEach'](_0x5caa97=>{const _0x4dfc3d=_0x2d7539,_0x3d2140=_0x5caa97['getAttribute'](_0x4dfc3d(0x104));_0x1fdbc2['includes'](_0x3d2140)?_0x5caa97['style']['display']=_0x4dfc3d(0x25e):_0x5caa97['style']['display']='none',_0x5caa97['addEventListener'](_0x4dfc3d(0x14c),()=>{const _0x2c40db=_0x4dfc3d,_0x52bae0=_0x5caa97['getAttribute']('data-section');if(!_0x1fdbc2['includes'](_0x52bae0)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section',_0x2c40db(0x285));return;}_0x59f393['forEach'](_0x3b91bc=>_0x3b91bc['classList']['remove'](_0x2c40db(0x210))),_0x5caa97[_0x2c40db(0x1ae)][_0x2c40db(0x179)]('active'),_0x19f996[_0x2c40db(0xed)](_0x2a855f=>{const _0x516e11=_0x2c40db;_0x2a855f['style']['display']=_0x516e11(0x2c0);});const _0x4a9af5=document['getElementById'](_0x52bae0);_0x4a9af5&&(_0x4a9af5['style'][_0x2c40db(0x2bc)]='block',console['log']('Switched\x20to\x20'+_0x52bae0+'\x20section'));});});const _0x47d207=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x1fdbc2[0x0]+'\x22]');_0x47d207&&_0x47d207['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x70ef36=document['querySelectorAll']('.nav-item');let _0x425a53=null,_0x2354cc=new Set();_0x70ef36['forEach'](_0x84f702=>{const _0x273124=a2_0x448c;_0x84f702[_0x273124(0x24a)]('click',function(){const _0x54009b=_0x273124,_0x3542ae=this['getAttribute'](_0x54009b(0x104));if(_0x3542ae===_0x425a53)return;_0x425a53&&(document['getElementById'](_0x425a53)['style']['display']=_0x54009b(0x2c0),_0x70ef36['forEach'](_0x51005b=>_0x51005b['classList'][_0x54009b(0xbb)](_0x54009b(0x210)))),document[_0x54009b(0x10f)](_0x3542ae)['style']['display']='block',this['classList']['add']('active'),_0x425a53=_0x3542ae;});});}function loadSectionData(_0xa866a4){return;}async function initializeAdminDashboard(){const _0x5c9076=a2_0x448c;try{const _0x34362d=auth['currentUser'],_0x938d87=await getUserTabPermissions(_0x34362d['email']);console['log']('User\x20'+_0x34362d[_0x5c9076(0xc5)]+'\x20allowed\x20tabs:',_0x938d87),window[_0x5c9076(0x295)]=_0x938d87,setupSidebarNavigation(_0x938d87),setupLadderSelector(),setupDashboardSection(),_0x938d87[_0x5c9076(0x2e5)]('manage-players')&&setupManagePlayersSection(),_0x938d87['includes']('elo-history')&&setupEloHistorySection(),_0x938d87['includes']('manage-ranks')&&setupRankControls(),_0x938d87[_0x5c9076(0x2e5)]('manage-articles')&&setupManageArticlesSection(),_0x938d87['includes'](_0x5c9076(0x106))&&setupUserRolesSection(),_0x938d87['includes'](_0x5c9076(0x181))&&setupTrophyManagementSection(),_0x938d87[_0x5c9076(0x2e5)]('manage-highlights')&&setupManageHighlightsSection(),_0x938d87[_0x5c9076(0x2e5)](_0x5c9076(0x2b0))&&setupInactivePlayersSection(),_0x938d87['includes']('manage-matches')&&setupManageMatchesSection(),_0x938d87['includes']('manage-points')&&setupManagePointsSection(),_0x938d87[_0x5c9076(0x2e5)]('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x938d87);}catch(_0x18c0c0){console[_0x5c9076(0x285)]('Error\x20initializing\x20admin\x20dashboard:',_0x18c0c0);}}function setupDataLoadButtons(_0x88d329=[]){const _0x51a9f4=a2_0x448c;(!_0x88d329||_0x88d329['length']===0x0)&&(_0x88d329=[_0x51a9f4(0x1af)]);const _0x4ba792=document['getElementById']('load-dashboard-data');_0x4ba792&&_0x4ba792[_0x51a9f4(0x24a)]('click',function(){const _0x5c425f=_0x51a9f4;this['classList']['add']('loading'),this[_0x5c425f(0x308)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})[_0x5c425f(0x201)](_0x2a178d=>{const _0xa5f7ed=_0x5c425f;console[_0xa5f7ed(0x285)]('Error\x20loading\x20dashboard:',_0x2a178d),this[_0xa5f7ed(0x1ae)][_0xa5f7ed(0xbb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x52c418=_0xa5f7ed;this[_0x52c418(0x308)]=_0x52c418(0x1a5);},0xbb8);});});if(_0x88d329['includes']('manage-trophies')){const _0x369938=document[_0x51a9f4(0x10f)]('load-trophies-data');_0x369938&&_0x369938[_0x51a9f4(0x24a)]('click',function(){const _0x1f7265=_0x51a9f4;console['log'](_0x1f7265(0x195)),this[_0x1f7265(0x1ae)][_0x1f7265(0x179)](_0x1f7265(0x2a0)),this[_0x1f7265(0x308)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0xad6f5a=_0x1f7265;this[_0xad6f5a(0x1ae)]['remove']('loading'),this[_0xad6f5a(0x308)]=_0xad6f5a(0x27d);})[_0x1f7265(0x201)](_0x44305c=>{const _0x25b6bc=_0x1f7265;console['error']('Error\x20loading\x20trophies:',_0x44305c),this[_0x25b6bc(0x1ae)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x18871d=_0x25b6bc;this[_0x18871d(0x308)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x88d329['includes']('manage-players')){const _0x5abbe1=document['getElementById'](_0x51a9f4(0x2d5));_0x5abbe1&&_0x5abbe1['addEventListener'](_0x51a9f4(0x14c),function(){const _0x40c6d8=_0x51a9f4;console[_0x40c6d8(0x205)]('Load\x20players\x20data\x20clicked'),this['classList']['add'](_0x40c6d8(0x2a0)),this['innerHTML']=_0x40c6d8(0x140),loadPlayersData()['then'](()=>{const _0x3fc31d=_0x40c6d8;this[_0x3fc31d(0x1ae)]['remove']('loading'),this[_0x3fc31d(0x308)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})[_0x40c6d8(0x201)](_0xa967e6=>{const _0x5ba41a=_0x40c6d8;console['error']('Error\x20loading\x20players:',_0xa967e6),this['classList']['remove'](_0x5ba41a(0x2a0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x500894=_0x5ba41a;this[_0x500894(0x308)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x88d329['includes']('elo-history')){const _0x523250=document[_0x51a9f4(0x10f)]('load-elo-history-data');_0x523250&&_0x523250[_0x51a9f4(0x24a)](_0x51a9f4(0x14c),function(){const _0x10eec6=_0x51a9f4;console[_0x10eec6(0x205)](_0x10eec6(0x1d9)),this['classList']['add']('loading'),this['innerHTML']=_0x10eec6(0x140),loadEloHistory(0x1)[_0x10eec6(0x217)](()=>{const _0x3a8832=_0x10eec6;this[_0x3a8832(0x1ae)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x10eec6(0x201)](_0x578e45=>{const _0x31fe49=_0x10eec6;console['error']('Error\x20loading\x20history:',_0x578e45),this['classList'][_0x31fe49(0xbb)](_0x31fe49(0x2a0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x238c47=_0x31fe49;this[_0x238c47(0x308)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x88d329['includes'](_0x51a9f4(0x2ef))){const _0x3bfef0=document[_0x51a9f4(0x10f)]('load-articles-data');_0x3bfef0&&_0x3bfef0['addEventListener']('click',function(){const _0x1af02b=_0x51a9f4;console[_0x1af02b(0x205)](_0x1af02b(0x180)),this['classList']['add'](_0x1af02b(0x2a0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x1bb2b2=_0x1af02b;this['classList']['remove']('loading'),this['innerHTML']=_0x1bb2b2(0x270);})['catch'](_0x5c22f0=>{const _0x4a293f=_0x1af02b;console[_0x4a293f(0x285)]('Error\x20loading\x20articles:',_0x5c22f0),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x88d329['includes']('user-roles-section')){const _0x3ac077=document['getElementById'](_0x51a9f4(0xcf));_0x3ac077&&_0x3ac077['addEventListener']('click',function(){const _0x12f3a1=_0x51a9f4;console[_0x12f3a1(0x205)](_0x12f3a1(0x2ec)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x3be03e=_0x12f3a1;this['classList']['remove']('loading'),this['innerHTML']=_0x3be03e(0x198);})['catch'](_0xe0071c=>{const _0x4af040=_0x12f3a1;console['error']('Error\x20loading\x20users:',_0xe0071c),this['classList']['remove'](_0x4af040(0x2a0)),this['innerHTML']=_0x4af040(0x2e7),setTimeout(()=>{const _0x40fb1c=_0x4af040;this[_0x40fb1c(0x308)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x88d329[_0x51a9f4(0x2e5)](_0x51a9f4(0x2b0))){const _0x1fc3e1=document['getElementById']('load-inactive-players-data');_0x1fc3e1&&_0x1fc3e1['addEventListener']('click',function(){const _0x37f7f7=_0x51a9f4;console['log'](_0x37f7f7(0x142)),this['classList'][_0x37f7f7(0x179)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x5829f2=>{const _0x1ba659=_0x37f7f7;console['error'](_0x1ba659(0x315),_0x5829f2),this['classList']['remove'](_0x1ba659(0x2a0)),this[_0x1ba659(0x308)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x88d329['includes']('manage-highlights')){const _0x43880f=document[_0x51a9f4(0x10f)]('load-highlights-data');_0x43880f&&_0x43880f[_0x51a9f4(0x24a)]('click',function(){const _0x35de99=_0x51a9f4;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x35de99(0x308)]=_0x35de99(0x140),loadHighlightsAdmin()['then'](()=>{const _0x5c78f3=_0x35de99;this['classList']['remove']('loading'),this[_0x5c78f3(0x308)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x3c76cd=>{const _0x43325e=_0x35de99;console[_0x43325e(0x285)]('Error\x20loading\x20highlights:',_0x3c76cd),this[_0x43325e(0x1ae)]['remove'](_0x43325e(0x2a0)),this['innerHTML']=_0x43325e(0x2e7),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x88d329['includes'](_0x51a9f4(0x1d3))){const _0x4f8b72=document['getElementById'](_0x51a9f4(0x18e));_0x4f8b72&&_0x4f8b72['addEventListener']('click',function(){const _0x153b97=_0x51a9f4;console['log'](_0x153b97(0x158)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x57e559=_0x153b97;this['classList']['remove']('loading'),this['innerHTML']=_0x57e559(0xde);})[_0x153b97(0x201)](_0x4704a0=>{console['error']('Error\x20loading\x20matches:',_0x4704a0),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x88d329['includes'](_0x51a9f4(0xbf))){const _0x112c6f=document[_0x51a9f4(0x10f)](_0x51a9f4(0x16e));_0x112c6f&&_0x112c6f['addEventListener']('click',function(){const _0x4b9e1c=_0x51a9f4;console[_0x4b9e1c(0x205)]('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x4b9e1c(0x308)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x268759=_0x4b9e1c;this['classList'][_0x268759(0xbb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x99ddfe=>{console['error']('Error\x20loading\x20ribbons:',_0x99ddfe),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4fd123=a2_0x448c;this[_0x4fd123(0x308)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x51c3a3=a2_0x448c;document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x51c3a3(0x220))['textContent']='-',document['getElementById']('pending-count')[_0x51c3a3(0x2f9)]='-',document['getElementById'](_0x51c3a3(0x30a))[_0x51c3a3(0x2f9)]='-';}function setupLadderSelector(){const _0x5259c4=a2_0x448c,_0x405fe2=document['querySelectorAll']('.ladder-switch\x20input');_0x405fe2[_0x5259c4(0xed)](_0xf40db6=>{const _0x43bac3=_0x5259c4;_0xf40db6[_0x43bac3(0x24a)]('change',()=>{const _0xfcd07e=_0x43bac3;currentLadder=_0xf40db6['value'],document['body'][_0xfcd07e(0x259)]('data-ladder',currentLadder);const _0x4e236f=document['getElementById']('current-ladder-display');_0x4e236f&&(_0x4e236f['textContent']=currentLadder),document[_0xfcd07e(0x10f)]('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document[_0xfcd07e(0x10f)]('pending-count')['textContent']='-',document['getElementById']('rejected-count')[_0xfcd07e(0x2f9)]='-',charts['rankDistribution']&&(charts['rankDistribution'][_0xfcd07e(0x170)](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x24e929=document['getElementById']('current-ladder-display');_0x24e929&&(_0x24e929[_0x5259c4(0x2f9)]=currentLadder);}async function loadDashboardOverview(){const _0x22db82=a2_0x448c;try{console['log'](_0x22db82(0xda)),document[_0x22db82(0x10f)]('player-count')[_0x22db82(0x2f9)]='-',document['getElementById'](_0x22db82(0x220))['textContent']='-',document['getElementById']('pending-count')[_0x22db82(0x2f9)]='-',document[_0x22db82(0x10f)]('rejected-count')['textContent']='-';const _0x495884=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x76793=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x332fef=currentLadder==='D1'?_0x22db82(0x1d4):currentLadder==='D2'?'pendingMatchesD2':_0x22db82(0x18a),_0xc687a7=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':_0x22db82(0x15e);console[_0x22db82(0x205)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x495884+',\x20'+_0x76793);const _0x114a3d=await getDocs(collection(db,_0x495884)),_0x1aebf1=_0x114a3d[_0x22db82(0xc2)],_0xf04acc=await getDocs(collection(db,_0x76793)),_0x34ba06=_0xf04acc['size'],_0x137964=await getDocs(collection(db,_0x332fef)),_0x105938=_0x137964[_0x22db82(0xc2)],_0xf27a74=await getDocs(collection(db,_0xc687a7)),_0x32ac6e=_0xf27a74[_0x22db82(0xc2)];return document['getElementById']('player-count')[_0x22db82(0x2f9)]=_0x1aebf1,document[_0x22db82(0x10f)]('match-count')['textContent']=_0x34ba06,document[_0x22db82(0x10f)]('pending-count')['textContent']=_0x105938,document['getElementById'](_0x22db82(0x30a))['textContent']=_0x32ac6e,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x9d7945){console['error'](_0x22db82(0xd5),_0x9d7945);throw _0x9d7945;}}async function createRankDistributionChart(){const _0x5e5ac9=a2_0x448c;try{const _0x229193=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x17c335=await getDocs(_0x229193),_0x1c661a={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x17c335[_0x5e5ac9(0xed)](_0x1bfff8=>{const _0x2607de=_0x5e5ac9,_0x1e3cac=_0x1bfff8['data'](),_0x41aaaa=_0x1e3cac[_0x2607de(0x1da)]||0x4b0;if(_0x41aaaa>=0x7d0)_0x1c661a[_0x2607de(0x27f)]++;else{if(_0x41aaaa>=0x708)_0x1c661a['Gold']++;else{if(_0x41aaaa>=0x640)_0x1c661a['Silver']++;else{if(_0x41aaaa>=0x578)_0x1c661a['Bronze']++;else _0x1c661a['Unranked']++;}}}});const _0x35ba0b=document[_0x5e5ac9(0x10f)]('rank-distribution-chart');charts['rankDistribution']&&charts[_0x5e5ac9(0x22c)]['destroy'](),charts[_0x5e5ac9(0x22c)]=new Chart(_0x35ba0b,{'type':_0x5e5ac9(0x219),'data':{'labels':Object[_0x5e5ac9(0x156)](_0x1c661a),'datasets':[{'data':Object['values'](_0x1c661a),'backgroundColor':[_0x5e5ac9(0x29b),_0x5e5ac9(0x2bd),'#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x5e5ac9(0x152),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x2a8e47){console['error'](_0x5e5ac9(0x19e),_0x2a8e47),document[_0x5e5ac9(0x10f)]('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x40c17c=a2_0x448c;try{const _0x132f68=currentLadder==='D1'?_0x40c17c(0x1b7):'approvedMatchesD2',_0x3349af=collection(db,_0x132f68),_0x4ede03=new Date();_0x4ede03[_0x40c17c(0x21a)](_0x4ede03['getDate']()-0x7);const _0x2f9d67=query(_0x3349af,where(_0x40c17c(0x123),'>=',_0x4ede03),orderBy(_0x40c17c(0x123),'asc')),_0x3c35c3=await getDocs(_0x2f9d67),_0x5c38b8=['Sunday','Monday',_0x40c17c(0x1d0),'Wednesday','Thursday','Friday','Saturday'],_0x37bc5c=_0x5c38b8['reduce']((_0x3f7229,_0x572ffb)=>({..._0x3f7229,[_0x572ffb]:0x0}),{});_0x3c35c3['forEach'](_0x246640=>{const _0x45c089=_0x40c17c,_0x1d60f5=_0x246640['data']();if(_0x1d60f5[_0x45c089(0x123)]){const _0x274f79=_0x5c38b8[new Date(_0x1d60f5['approvedAt'][_0x45c089(0x306)]*0x3e8)[_0x45c089(0x1bf)]()];_0x37bc5c[_0x274f79]++;}});const _0x188b8c=document['getElementById'](_0x40c17c(0x2f4));charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x188b8c,{'type':'bar','data':{'labels':_0x5c38b8,'datasets':[{'label':'Matches\x20Played','data':_0x5c38b8['map'](_0x342e2=>_0x37bc5c[_0x342e2]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x40c17c(0x2dc)}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x3652a3){console['error']('Error\x20creating\x20activity\x20chart:',_0x3652a3),document[_0x40c17c(0x10f)](_0x40c17c(0x2f4))[_0x40c17c(0x308)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0xcf8d5e=a2_0x448c,_0x48134c=document['getElementById'](_0xcf8d5e(0x255));if(!_0x48134c)return;_0x48134c['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x405163='players';if(currentLadder==='D2')_0x405163='playersD2';else currentLadder==='D3'&&(_0x405163='playersD3');console[_0xcf8d5e(0x205)]('Loading\x20players\x20from\x20'+_0x405163+'\x20collection...');const _0x5c3ade=collection(db,_0x405163),_0x307abe=query(_0x5c3ade,orderBy('eloRating','desc')),_0x47f87d=await getDocs(_0x307abe);if(_0x47f87d[_0xcf8d5e(0x233)]){_0x48134c[_0xcf8d5e(0x308)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x48134c['innerHTML']='';let _0x3e92aa=0x1;_0x47f87d['forEach'](_0x32bc03=>{const _0x1a11f6=_0xcf8d5e,_0x4cffc2=_0x32bc03['data'](),_0x159ce3=getRankFromElo(_0x4cffc2['eloRating']||0x4b0),_0x193c82=getRankStyle(_0x4cffc2['eloRating']||0x4b0),_0xef3e7=document['createElement']('tr');_0xef3e7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x3e92aa+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x193c82['color']+_0x1a11f6(0x211)+(_0x4cffc2[_0x1a11f6(0x223)]||'Unknown')+_0x1a11f6(0x169)+(_0x4cffc2['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x193c82['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x159ce3+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4cffc2['wins']||0x0)+'W\x20/\x20'+(_0x4cffc2[_0x1a11f6(0x27a)]||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x32bc03['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x32bc03['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x48134c['appendChild'](_0xef3e7),_0x3e92aa++;}),setupPlayerActionButtons();}catch(_0x5d5fdd){console['error']('Error\x20loading\x20players:',_0x5d5fdd),_0x48134c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x5d5fdd['message']+_0xcf8d5e(0xbe);}}function getRankFromElo(_0x50dfc0){const _0x2a8ed1=a2_0x448c;if(_0x50dfc0>=0x7d0)return _0x2a8ed1(0x27f);if(_0x50dfc0>=0x708)return'Gold';if(_0x50dfc0>=0x640)return'Silver';if(_0x50dfc0>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x787757=a2_0x448c;document['querySelectorAll'](_0x787757(0x253))['forEach'](_0x19cfbc=>{const _0xa55e62=_0x787757;_0x19cfbc['addEventListener'](_0xa55e62(0x14c),async _0x38927b=>{const _0x45af7b=_0xa55e62,_0x1ea46d=_0x38927b['currentTarget'][_0x45af7b(0x318)]['id'];openEditPlayerModal(_0x1ea46d);});}),document['querySelectorAll'](_0x787757(0x257))['forEach'](_0x338863=>{const _0x1f4728=_0x787757;_0x338863[_0x1f4728(0x24a)](_0x1f4728(0x14c),async _0x137ce0=>{const _0x2b26e0=_0x1f4728,_0x44ceaa=_0x137ce0[_0x2b26e0(0x126)]['dataset']['id'];confirmDeletePlayer(_0x44ceaa);});});}async function openEditPlayerModal(_0xe160c9){const _0x1bf129=a2_0x448c;try{const _0x41a019=currentLadder==='D1'?_0x1bf129(0x267):'playersD2',_0x387f9a=doc(db,_0x41a019,_0xe160c9),_0x593591=await getDoc(_0x387f9a);if(!_0x593591['exists']()){showNotification('Player\x20not\x20found',_0x1bf129(0x285));return;}const _0x432fa2=_0x593591['data'](),_0x28e33d=document['getElementById']('edit-player-modal'),_0x21207c=document['getElementById']('edit-username'),_0x8eec2b=document['getElementById'](_0x1bf129(0x2a7)),_0x5bf22d=document['getElementById']('edit-wins'),_0x255e57=document[_0x1bf129(0x10f)]('edit-losses');_0x21207c['value']=_0x432fa2[_0x1bf129(0x223)]||'',_0x8eec2b['value']=_0x432fa2['eloRating']||0x4b0,_0x5bf22d['value']=_0x432fa2['wins']||0x0,_0x255e57[_0x1bf129(0x283)]=_0x432fa2['losses']||0x0,_0x28e33d[_0x1bf129(0x318)][_0x1bf129(0x192)]=_0xe160c9,_0x28e33d['classList']['add']('active');}catch(_0x909090){console[_0x1bf129(0x285)]('Error\x20opening\x20edit\x20modal:',_0x909090),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x59767f=a2_0x448c;try{const _0x4867a8=document['getElementById']('edit-player-modal'),_0x79579e=_0x4867a8['dataset'][_0x59767f(0x192)];if(!_0x79579e){showNotification('No\x20player\x20selected','error');return;}const _0x14d048=document['getElementById'](_0x59767f(0x1c0)),_0x1d3fcb=document['getElementById']('edit-elo'),_0x2d709c=document['getElementById']('edit-wins'),_0x3d2c44=document['getElementById'](_0x59767f(0x12c)),_0x5e6247=_0x14d048['value'][_0x59767f(0x155)](),_0x4a58ab=parseInt(_0x1d3fcb['value']),_0x38ea65=parseInt(_0x2d709c[_0x59767f(0x283)]),_0x193e04=parseInt(_0x3d2c44['value']);if(!_0x5e6247||isNaN(_0x4a58ab)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x59767f(0x285));return;}const _0x164101=currentLadder==='D1'?_0x59767f(0x267):'playersD2',_0xb781c6=doc(db,_0x164101,_0x79579e),_0x1686fd=await getDoc(_0xb781c6),_0x49643b=_0x1686fd[_0x59767f(0x20e)]()?_0x1686fd[_0x59767f(0x21d)]():{},_0x6033ac=_0x49643b['eloRating']||0x4b0;await updateDoc(_0xb781c6,{'username':_0x5e6247,'eloRating':_0x4a58ab,'wins':_0x38ea65||0x0,'losses':_0x193e04||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x59767f(0xc5)]});if(_0x4a58ab!==_0x6033ac){const _0x57c477=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x57c477),{'player':_0x5e6247,'previousElo':_0x6033ac,'newElo':_0x4a58ab,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x128ece){console[_0x59767f(0x285)]('Error\x20updating\x20player:',_0x128ece),showNotification(_0x59767f(0x235)+_0x128ece['message'],'error');}}function closeEditPlayerModal(){const _0x36c0dd=a2_0x448c,_0x37d9b1=document['getElementById']('edit-player-modal');_0x37d9b1['classList']['remove']('active'),_0x37d9b1['dataset'][_0x36c0dd(0x192)]='';}async function confirmDeletePlayer(_0xecf34b){const _0x33c498=a2_0x448c;if(confirm(_0x33c498(0x17c)))try{const _0x1a0616=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x1a0616,_0xecf34b)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x286399){console[_0x33c498(0x285)]('Error\x20deleting\x20player:',_0x286399),showNotification(_0x33c498(0x16d)+_0x286399['message'],'error');}}async function setupManagePlayersSection(){const _0x49e6ee=a2_0x448c,_0x38fce1=document[_0x49e6ee(0x10f)]('add-player-form');_0x38fce1&&_0x38fce1['addEventListener'](_0x49e6ee(0x176),async _0x24a569=>{_0x24a569['preventDefault'](),await addNewPlayer();});const _0x48b2f0=document['getElementById']('player-search');_0x48b2f0&&_0x48b2f0[_0x49e6ee(0x24a)](_0x49e6ee(0x1fa),debounce(filterPlayerTable,0x12c));const _0x45aa2f=document['getElementById'](_0x49e6ee(0xf0));_0x45aa2f&&_0x45aa2f[_0x49e6ee(0x24a)](_0x49e6ee(0x14c),saveEditedPlayer);const _0x352751=document['getElementById']('cancel-edit-btn');_0x352751&&_0x352751['addEventListener'](_0x49e6ee(0x14c),closeEditPlayerModal);const _0x41e433=document['getElementById']('edit-player-modal');_0x41e433&&_0x41e433['addEventListener']('click',_0x3ef10a=>{_0x3ef10a['target']===_0x41e433&&closeEditPlayerModal();});const _0x1652f8=document['getElementById']('players-ladder-selector');_0x1652f8&&_0x1652f8[_0x49e6ee(0x24a)]('change',()=>{currentLadder=_0x1652f8['value'],loadPlayersData();});}async function addNewPlayer(){const _0x39b913=a2_0x448c;try{const _0x4387dc=document[_0x39b913(0x10f)]('new-player-username'),_0x2f8124=document[_0x39b913(0x10f)]('new-player-elo'),_0xea99b3=_0x4387dc['value']['trim'](),_0x3fd11b=parseInt(_0x2f8124['value'])||0x4b0;if(!_0xea99b3){alert('Please\x20enter\x20a\x20valid\x20username');return;}console[_0x39b913(0x205)]('Adding\x20player\x20'+_0xea99b3+'\x20with\x20ELO\x20'+_0x3fd11b+'\x20to\x20'+currentLadder+'\x20ladder');let _0x4fa6d3='players',_0x90beb8='eloHistory';if(currentLadder==='D2')_0x4fa6d3='playersD2',_0x90beb8=_0x39b913(0x1b8);else currentLadder==='D3'&&(_0x4fa6d3=_0x39b913(0x2df),_0x90beb8='eloHistoryD3');const _0xab8e14=query(collection(db,_0x4fa6d3),where(_0x39b913(0x223),'==',_0xea99b3)),_0xcc83dc=await getDocs(_0xab8e14);if(!_0xcc83dc[_0x39b913(0x233)]){alert(_0x39b913(0x278)+_0xea99b3+'\x20already\x20exists\x20in\x20'+currentLadder+_0x39b913(0xe1));return;}const _0x2dd5a0=auth['currentUser'],_0x28cccf={'username':_0xea99b3,'eloRating':_0x3fd11b,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x2dd5a0?_0x2dd5a0[_0x39b913(0xc5)]:_0x39b913(0x12f),'gameMode':currentLadder};await addDoc(collection(db,_0x4fa6d3),_0x28cccf),await addDoc(collection(db,_0x90beb8),{'player':_0xea99b3,'previousElo':0x4b0,'newElo':_0x3fd11b,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x2dd5a0?_0x2dd5a0['email']:_0x39b913(0x12f),'gameMode':currentLadder}),_0x4387dc[_0x39b913(0x283)]='',_0x2f8124['value']=_0x39b913(0x19a),alert('Player\x20'+_0xea99b3+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x39b913(0xc4)),loadPlayersData();}catch(_0x3698d3){console[_0x39b913(0x285)]('Error\x20adding\x20player:',_0x3698d3),alert('Error\x20adding\x20player:\x20'+_0x3698d3[_0x39b913(0x21e)]);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x176eb1=document['getElementById']('add-player-form');_0x176eb1&&_0x176eb1['addEventListener']('submit',_0x4198a9=>{_0x4198a9['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x3e8d1f=a2_0x448c,_0x563c05=document['getElementById'](_0x3e8d1f(0x289))['value'][_0x3e8d1f(0x171)](),_0x4b0420=document['querySelectorAll'](_0x3e8d1f(0x108));let _0x243280=0x0;_0x4b0420['forEach'](_0x4299ac=>{const _0x508a93=_0x3e8d1f,_0x401595=_0x4299ac['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x401595[_0x508a93(0x2e5)](_0x563c05)?(_0x4299ac['style']['display']='',_0x243280++):_0x4299ac['style']['display']='none';});const _0x576f2e=document[_0x3e8d1f(0x10f)]('no-results-message');_0x576f2e&&(_0x243280===0x0&&_0x563c05!==''?_0x576f2e['style']['display']='block':_0x576f2e[_0x3e8d1f(0x2e0)]['display']=_0x3e8d1f(0x2c0));}function debounce(_0x14dcb8,_0x4ba603){let _0x23a95c;return function(..._0x5185ef){const _0x499749=a2_0x448c;clearTimeout(_0x23a95c),_0x23a95c=setTimeout(()=>_0x14dcb8[_0x499749(0x15b)](this,_0x5185ef),_0x4ba603);};}async function loadEloHistory(_0x1dd18a=0x1){const _0x54b8a7=a2_0x448c,_0x25d69b=document['getElementById']('elo-history-table-body'),_0x2bf530=currentLadder[_0x54b8a7(0x171)]();if(!_0x25d69b)return;_0x25d69b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x5077ff=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0x54b8a7(0x1b8):'eloHistoryD3',_0x5ef928=collection(db,_0x5077ff);let _0x1eb1d6;if(_0x1dd18a>eloHistoryPagination[_0x2bf530][_0x54b8a7(0x2a3)]&&eloHistoryPagination[_0x2bf530][_0x54b8a7(0x260)])_0x1eb1d6=query(_0x5ef928,orderBy('timestamp',_0x54b8a7(0x103)),startAfter(eloHistoryPagination[_0x2bf530]['lastVisible']),limit(PAGE_SIZE));else _0x1dd18a<eloHistoryPagination[_0x2bf530]['page']&&eloHistoryPagination[_0x2bf530][_0x54b8a7(0x2ad)]?_0x1eb1d6=query(_0x5ef928,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x2bf530]['firstVisible']),limitToLast(PAGE_SIZE)):_0x1eb1d6=query(_0x5ef928,orderBy(_0x54b8a7(0x151),'desc'),limit(PAGE_SIZE));const _0x8a58b1=await getDocs(_0x1eb1d6);if(_0x8a58b1['empty']){_0x25d69b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x2bf530+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x2bf530]['page']=_0x1dd18a,eloHistoryPagination[_0x2bf530]['firstVisible']=_0x8a58b1[_0x54b8a7(0x116)][0x0],eloHistoryPagination[_0x2bf530][_0x54b8a7(0x260)]=_0x8a58b1['docs'][_0x8a58b1[_0x54b8a7(0x116)]['length']-0x1];const _0x1a4847=new Map();_0x25d69b[_0x54b8a7(0x308)]='';const _0x4d9e64=async _0x2a78a4=>{const _0x3059f1=_0x54b8a7;if(typeof _0x2a78a4!==_0x3059f1(0x203)||_0x2a78a4['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x2a78a4))return _0x2a78a4;if(_0x1a4847['has'](_0x2a78a4))return _0x1a4847['get'](_0x2a78a4);try{for(const _0x4d5de9 of['players','playersD2','playersD3',_0x3059f1(0x131)]){const _0x4054de=await getDoc(doc(db,_0x4d5de9,_0x2a78a4));if(_0x4054de['exists']()&&_0x4054de['data']()['username']){const _0x13ddde=_0x4054de['data']()[_0x3059f1(0x223)];return _0x1a4847['set'](_0x2a78a4,_0x13ddde),_0x13ddde;}}return _0x2a78a4;}catch(_0x5e97d4){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x2a78a4+':',_0x5e97d4),_0x2a78a4;}};for(const _0x44a550 of _0x8a58b1['docs']){const _0x424d0a=_0x44a550['data'](),_0xff141f=document['createElement']('tr'),_0x597bc1=_0x424d0a['timestamp']?new Date(_0x424d0a['timestamp']['seconds']*0x3e8)['toLocaleString']():_0x54b8a7(0x251),_0x2e4683=_0x424d0a['newElo']-_0x424d0a['previousElo'],_0x23168f=_0x2e4683>0x0?'positive-change':_0x2e4683<0x0?_0x54b8a7(0x149):'',_0xf49234=_0x2e4683>0x0?'+':'',_0xd06b72=_0x424d0a['player']||_0x424d0a['username']||_0x424d0a['userId']||_0x54b8a7(0x251),_0x3bc600=await _0x4d9e64(_0xd06b72);_0xff141f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x597bc1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x3bc600+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x424d0a[_0x54b8a7(0x23f)]||_0x54b8a7(0x251))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x424d0a['newElo']||_0x54b8a7(0x251))+_0x54b8a7(0x1bb)+_0x23168f+'\x22>'+_0xf49234+_0x2e4683+_0x54b8a7(0x11e)+formatHistoryType(_0x424d0a['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x424d0a['modifiedBy']||_0x424d0a['promotedBy']||_0x424d0a['demotedBy']||_0x54b8a7(0x11f))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x25d69b[_0x54b8a7(0x276)](_0xff141f);}document['getElementById'](_0x2bf530+_0x54b8a7(0x124))[_0x54b8a7(0x2f9)]='Page\x20'+_0x1dd18a;const _0x3a1d6c=document['getElementById'](_0x2bf530+'-prev-page'),_0x43ae68=document['getElementById'](_0x2bf530+'-next-page');if(_0x3a1d6c)_0x3a1d6c['disabled']=_0x1dd18a<=0x1;const _0xfba4aa=query(_0x5ef928,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x2bf530][_0x54b8a7(0x260)]),limit(0x1)),_0x4a2bc3=await getDocs(_0xfba4aa);if(_0x43ae68)_0x43ae68[_0x54b8a7(0x16c)]=_0x4a2bc3['empty'];}catch(_0x495ba1){console[_0x54b8a7(0x285)](_0x54b8a7(0x1e8),_0x495ba1),_0x25d69b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x495ba1['message']+_0x54b8a7(0xbe);}}function a2_0x3cbf(){const _0x158004=['remove','award-reason','.no-results','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','manage-ribbons','Starting\x20complete\x20match\x20resimulation...','MAX_SAFE_INTEGER','size','set-elo-modal','\x20ladder!','email','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','Page\x201','#ffffff','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','location','</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22','</span>','Awarded\x20','Admin\x20Adjustment','load-users-data','floor','Setting\x20up\x20Manage\x20Matches\x20section','\x20vs\x20','highlight-achievement-image','winnerName','Error\x20loading\x20dashboard\x20data:','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','Toggling\x20fields\x20for\x20highlight\x20type:\x20','split','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','Loading\x20dashboard\x20overview\x20data...','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','\x20users.\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','Edit\x20Match:\x20','Failed\x20to\x20resimulate\x20match:\x20','\x20ladder','reason','Error\x20setting\x20custom\x20ELO:','matches-start-date','Bulk\x20award:','promote-form','startDate','lastMatch','contains','.form-group','highlight-match-info-container','Player\x20\x22','forEach','Failed\x20to\x20load\x20user\x20history','delete-match-confirm-modal','save-player-btn','Removed\x20','mapName','querySelector','Points\x20updated\x20successfully','parentNode','title','add-new-role-btn','inactive-players-table-body','edit-match-loser-score','daysSinceMatch','Error\x20loading\x20points\x20history:','ribbon-item','matches-next-page','roleColor','Failed\x20to\x20delete\x20article:\x20','edit-match-winner-score','ribbon-target-ladder','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','desc','data-section','Player\x20not\x20found\x20in\x20','user-roles-section','points-desc','#players-table-body\x20tr','highly-inactive','marginBottom','\x22\x20not\x20found\x20in\x20','\x20points','toLocaleString','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','getElementById','points-overview-search','find','searchTerm','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','matches-table-body','Failed\x20to\x20save\x20match:\x20','docs','manage-players','pointsHistory','loserScore','Role\x20\x27','Error\x20deleting\x20match:','change','setHours','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','System','loserUsername','trophy-rarity','Creator\x20highlight\x20button\x20clicked','approvedAt','-page-indicator','Error\x20deleting\x20highlight:\x20','currentTarget','highlight-map-creator','highlights','promote-player-btn','openResimulateModal\x20called!','./promotions.js','edit-losses','constructor','creatorImageUrl','admin','This\x20will\x20award\x20','nonParticipants','position','resimulate-match-btn','\x20for\x20user\x20\x22','userProfiles','Match\x20not\x20found\x20in\x20approved\x20matches','winnerUsername','Winner\x20and\x20loser\x20usernames\x20are\x20required','matches-search','ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','\x20total\x20players\x20in\x20the\x20','trophies-table-body','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','role','Load\x20inactive\x20players\x20data\x20clicked','edit-match-loser-comment','role-filter','info','previousPoints','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','negative-change','history-type-filter','high-points','click','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','achievementType','Error\x20loading\x20highlight:\x20','ribbon-user-search','timestamp','\x20Rank\x20Distribution','length','getRankName','trim','keys','points-user-search','Load\x20matches\x20data\x20clicked','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','create-new-trophy-btn','apply','Failed\x20to\x20delete\x20match:\x20','No\x20users\x20needed\x20points\x20field\x20initialization','RejectedD3','Error\x20initializing\x20dashboard:','playersD2','Error\x20promoting\x20player:','edit-highlight-creatorImageUrl-input','Quick\x20edit\x20form\x20not\x20found!','description','edit-highlight-winnerScore-input','Modal\x20background\x20clicked','Setting\x20up\x20highlight\x20buttons','\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','Username\x20input\x20set\x20to:\x20','mapCreator','disabled','Failed\x20to\x20delete\x20player:\x20','load-ribbons-data','div','destroy','toLowerCase','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','0.6','No\x20users\x20found\x20in\x20userProfiles\x20collection','submit','currentUser','Unknown','add','highlight-match-link-container','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','promote-username','d2-next-page','Load\x20articles\x20data\x20clicked','manage-trophies','Failed\x20to\x20update\x20points:\x20','common','trophy-image-url','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Please\x20fill\x20all\x20fields','Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...','assign-trophy-image','pendingMatchesD3','highlight-achievement-details-container','endDate','createdAt','load-matches-data','join','Enter','15px','playerId','article-title','map','Load\x20trophies\x20data\x20clicked','#inactive-players-table-body\x20tr','demote-player-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','onerror','1200','resimulate-match-id','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>','padding','Error\x20creating\x20rank\x20distribution\x20chart:','replace','\x27</td>','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','points-history-table-body','TestLoser','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','target','toDate','quick-edit-points-form','trophy-preview-img','\x20not\x20found.','highlight-submitted-by','trophy-modal-title','\x20already\x20has\x20points:\x20','classList','dashboard','highlight-video-id',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','playerRibbonsD3','Using\x20collection:\x20','Error\x20promoting\x20player:\x20','testFirebaseConnection','roleAssignedBy','approvedMatches','eloHistoryD2','Submit\x20button\x20clicked\x20directly','highlight-title','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','promotedBy','Added\x20','approvedMatchesD2','getDay','edit-username','history-end-date','article-modal-title','Error\x20loading\x20ribbons:','previousElementSibling','achievementImageUrl','Error\x20initializing\x20points:\x20','create-test-match-modal','.edit-match-btn','cancel-role-btn','name','sort','points-overview-table-body','toString','no-results','cancel-article-btn','Tuesday','quick-edit-email','Error\x20saving\x20highlight:','manage-matches','pendingMatches','Query\x20created:','achievement-type','rarity','highlight-loser-score','Load\x20history\x20data\x20clicked','eloRating','input[name=\x22test-match-ladder\x22]','User\x20','demote-form','demotion','Username\x20is\x20missing','assign-trophy-name','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','user-role','warn','edit-highlight-mapVersion-input','replaceChild','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','Trophy\x20ID\x20and\x20username\x20are\x20required','Error\x20loading\x20ELO\x20history:','demote-modal','allUsersPoints','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','querySelectorAll','Found\x20','Error\x20loading\x20users:','match-details-container','promote-ladder','Role\x20\x22','achievement','Match\x20deleted\x20successfully','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','\x22\x20set','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','trophy-modal','\x20not\x20found\x20in\x20any\x20ladder','.form-group,\x20.form-row','input','Error\x20loading\x20match\x20for\x20deletion:','createElement','user-search-results','\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20','Match\x20ID\x20is\x20required','Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','catch','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','string','Error\x20deleting\x20highlight:','log','createdBy','Unauthorized:\x20Admin\x20access\x20required','\x20D3\x20pilots','articles','article-form','winnerId','awardedAt','\x20-\x20','exists','This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?','active','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','Defaulted\x20to\x20D1\x20ladder','success','highlight-achievement-player-container','trophyDefinitions','then','quick-edit-points-modal','doughnut','setDate','assign-trophy-rarity','article-id','data','message','Found\x20user\x20in\x20','match-count','Failed\x20to\x20save\x20article:\x20','inactive-players-search','username','from','type','Highlight\x20created\x20successfully!','Adding\x20\x22active\x22\x20class\x20to\x20modal.','highlight-map','playerProfileUrl','selected-user-points','highlight-submitted-by-container','rankDistribution','Setting\x20up\x20Manage\x20Ribbons\x20section','Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','Edit\x20Trophy','match','getComputedStyle','edit-highlight-type-select','empty','Error\x20adding\x20ribbon:','Failed\x20to\x20update\x20player:\x20','highlight-description-container','points-asc','Please\x20enter\x20a\x20username','.error-state','article-author','demote-username','input[name=\x22assign-ladder\x22]:checked','ref','eloHistory','previousElo','load-inactive-players-data','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','substring','moderately-inactive','award-item-form','winnerScore','Trophy\x20updated\x20successfully','displayName','opacity','error-state','addEventListener','edit-match-loser-suicides','src','push','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','initial_placement','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','N/A','\x20in\x20','.edit-btn','Found\x20ELO\x20history\x20for\x20player\x20','players-table-body','block','.delete-btn','entries','setAttribute','roleName','edit-highlight-winnerName-input','warning','highlight-player-profile','flex','Searching\x20for\x20player\x20in\x20','lastVisible','img','stopPropagation','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','points-action','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','highlight-description','players','Create\x20Article','edit-highlight-achievementDetails-input','edit-match-loser','highlight-modal','visible','points','match-row','creator','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','quick-edit-display-name','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','Simple\x20test\x20match\x20created\x20by\x20admin\x20','d1-prev-page','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','appendChild','Please\x20select\x20a\x20user\x20and\x20store\x20item','Username\x20','loserName','losses','empty-state','elo','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','Error\x20saving\x20article:','Emerald','name-desc','No\x20email','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','value','nonexistent','error','highlight-match-date','result','quick-points-amount','player-search','settings','highlight-achievement-type-container','action','Positions\x20updated:\x20Winner\x20','Error\x20in\x20demotion:','.edit-trophy-btn','manage-highlights','non-participant','\x20D1\x20pilots,\x20','\x20with\x20email\x20','Bronze','userAllowedTabs','roleAssignedAt','Highlight\x20updated\x20successfully!','update','ribbon-level','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','#808080','set','role-color','keypress','points-amount','loading','Set\x20to\x20','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','page','User\x20not\x20found','Error\x20modifying\x20points:','You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','edit-elo','reset','Points\x20data\x20loaded\x20successfully','loserId','Failed\x20to\x20save\x20trophy:\x20','Unknown\x20User','firstVisible','\x27\x20has\x20permissions:','highlight-match-link','inactive-players','Subtracted\x20','toLocaleDateString','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','Store\x20item\x20awarded\x20successfully','promote-modal','Invalid\x20points\x20amount','Setting\x20up\x20points\x20action\x20buttons...','Error\x20in\x20bulk\x20award\x20points:','unknown','pendingResimulateData','resimulate-modal','display','#CD7F32','Loser\x20','matchInfo','none','Firebase\x20connection\x20test\x20successful!','Highlight\x20not\x20found','Promoting\x20player\x20to\x20','fa-exclamation-triangle','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','mapVersion','Bulk\x20award\x20to\x20all\x20pilots\x20(','assign-player-username','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','localeCompare','trophy-description','No\x20position\x20changes\x20needed.','Successfully\x20promoted\x20','create-test-match-form','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','edit-match-winner','\x20to\x20','You\x20must\x20be\x20logged\x20in','set-elo-value','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20','load-players-data','Error\x20saving\x20highlight:\x20','highlight-video-container','.view-player-btn','#article-modal\x20.close-btn','User\x20\x22','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','rgba(255,\x20255,\x20255,\x200.1)','cloneNode','videoId','playersD3','style','matchDate','No\x20description','required','matchId','includes','quick-edit-user-id','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','Points\x20field\x20initialized\x20for\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','Create\x20test\x20match\x20button\x20clicked','Please\x20enter\x20valid\x20username\x20and\x20ELO','Load\x20users\x20data\x20clicked','table','Error\x20removing\x20role:','manage-articles','all','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','\x22\x20awarded\x20to\x20','#matches-table-body\x20tr','activity-chart','Attempting\x20to\x20promote\x20','preventDefault','.quick-edit-btn','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','textContent','Role\x20removed','set-elo-username','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','console','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','edit-highlight-matchDate-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','border','name-asc','fromDate','TestMap','</td></tr>','seconds','\x20Exists','innerHTML','assign-trophy-id','rejected-count','Featured\x20Creator','manage-levels-ribbons','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Closing\x20create\x20test\x20match\x20modal','highlight-loser-name','achievementDetails','Failed\x20to\x20load\x20match\x20data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20','commit','\x20from\x20','Error\x20loading\x20inactive\x20players:','closest','eloHistoryD3','dataset'];a2_0x3cbf=function(){return _0x158004;};return a2_0x3cbf();}function formatHistoryType(_0xcc9ac2){const _0x67ece5=a2_0x448c;switch(_0xcc9ac2){case'match_result':return'Match\x20Result';case'promotion':return'Promotion';case'demotion':return'Demotion';case'admin_modification':return _0x67ece5(0xce);case _0x67ece5(0x24f):return'Initial\x20Placement';default:return _0xcc9ac2||'Unknown';}}function setupEloHistorySection(){const _0x1a58a1=a2_0x448c;document['getElementById'](_0x1a58a1(0x274))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')[_0x1a58a1(0x24a)]('click',()=>{const _0x37a7dc=_0x1a58a1;loadEloHistory(eloHistoryPagination['d1'][_0x37a7dc(0x2a3)]+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById'](_0x1a58a1(0x17f))[_0x1a58a1(0x24a)]('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x57d36c=document['getElementById']('d3-prev-page'),_0x3c339e=document[_0x1a58a1(0x10f)]('d3-next-page');_0x57d36c&&_0x57d36c['addEventListener'](_0x1a58a1(0x14c),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x3c339e&&_0x3c339e['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x5f249e=document['getElementById']('elo-history-search');_0x5f249e&&_0x5f249e[_0x1a58a1(0x24a)]('input',debounce(filterEloHistoryTable,0x12c));const _0x33a4a3=document[_0x1a58a1(0x10f)](_0x1a58a1(0x14a));_0x33a4a3&&_0x33a4a3['addEventListener'](_0x1a58a1(0x11c),applyEloHistoryFilters);const _0x44c387=document[_0x1a58a1(0x10f)]('reset-history-filters');_0x44c387&&_0x44c387['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x30f5ac=a2_0x448c,_0x44265c=document['getElementById']('elo-history-search')[_0x30f5ac(0x283)][_0x30f5ac(0x171)](),_0x37e981=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x17180f=0x0;_0x37e981['forEach'](_0x37c2d5=>{const _0x3a8592=_0x30f5ac;if(_0x37c2d5[_0x3a8592(0x1ae)][_0x3a8592(0xe9)]('loading-cell')||_0x37c2d5['classList']['contains'](_0x3a8592(0x27b))||_0x37c2d5['classList']['contains']('error-state'))return;const _0x3d6cc2=_0x37c2d5['querySelector']('.player')?.['textContent']['toLowerCase']()||'',_0x1f9713=_0x37c2d5['querySelector']('.type')?.['textContent'][_0x3a8592(0x171)]()||'',_0x284f86=_0x37c2d5['querySelector']('.admin-action')?.[_0x3a8592(0x2f9)]['toLowerCase']()||'';_0x3d6cc2['includes'](_0x44265c)||_0x1f9713['includes'](_0x44265c)||_0x284f86[_0x3a8592(0x2e5)](_0x44265c)?(_0x37c2d5[_0x3a8592(0x2e0)]['display']='',_0x17180f++):_0x37c2d5[_0x3a8592(0x2e0)]['display']=_0x3a8592(0x2c0);});}async function applyEloHistoryFilters(){const _0x2341ac=a2_0x448c,_0x399801=document['getElementById']('history-start-date')[_0x2341ac(0x283)],_0x2b4ece=document['getElementById'](_0x2341ac(0x1c1))['value'],_0x1b149c=document['getElementById']('history-type-filter')['value'],_0x451f71=currentLadder[_0x2341ac(0x171)]();eloHistoryPagination[_0x451f71]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0xfe9b65=document['getElementById']('elo-history-table-body');_0xfe9b65['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x21989a=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x459f53=collection(db,_0x21989a);let _0x5a22ca=[orderBy('timestamp','desc')];if(_0x399801){const _0x5cfb21=new Date(_0x399801);_0x5cfb21['setHours'](0x0,0x0,0x0,0x0),_0x5a22ca['push'](where(_0x2341ac(0x151),'>=',_0x5cfb21));}if(_0x2b4ece){const _0x3bc4b8=new Date(_0x2b4ece);_0x3bc4b8[_0x2341ac(0x11d)](0x17,0x3b,0x3b,0x3e7),_0x5a22ca[_0x2341ac(0x24d)](where('timestamp','<=',_0x3bc4b8));}_0x1b149c&&_0x1b149c!=='all'&&_0x5a22ca['push'](where('type','==',_0x1b149c));_0x5a22ca['push'](limit(PAGE_SIZE));const _0x1d3871=query(_0x459f53,..._0x5a22ca),_0x3248e0=await getDocs(_0x1d3871);!_0x3248e0['empty']&&(eloHistoryPagination[_0x451f71][_0x2341ac(0x2ad)]=_0x3248e0[_0x2341ac(0x116)][0x0],eloHistoryPagination[_0x451f71][_0x2341ac(0x260)]=_0x3248e0[_0x2341ac(0x116)][_0x3248e0['docs']['length']-0x1]);_0xfe9b65['innerHTML']='';if(_0x3248e0['empty']){_0xfe9b65['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x3248e0['forEach'](_0xdcf2a5=>{const _0xe22709=_0x2341ac,_0x558859=_0xdcf2a5[_0xe22709(0x21d)](),_0x32ddf5=document['createElement']('tr'),_0x5d36e9=_0x558859['timestamp']?new Date(_0x558859['timestamp']['seconds']*0x3e8)['toLocaleString']():_0xe22709(0x251),_0x2f2461=_0x558859['newElo']-_0x558859['previousElo'],_0xa16ea6=_0x2f2461>0x0?'positive-change':_0x2f2461<0x0?'negative-change':'',_0x4b08c4=_0x2f2461>0x0?'+':'',_0x30c6c3=_0x558859['player']||_0x558859['username']||_0x558859['userId']||'N/A';_0x32ddf5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x5d36e9+_0xe22709(0x2fe)+_0x30c6c3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x558859['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x558859['newElo']||'N/A')+_0xe22709(0x1bb)+_0xa16ea6+'\x22>'+_0x4b08c4+_0x2f2461+_0xe22709(0x11e)+formatHistoryType(_0x558859['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x558859['modifiedBy']||_0x558859[_0xe22709(0x1bc)]||_0x558859['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xfe9b65[_0xe22709(0x276)](_0x32ddf5);}),document['getElementById'](_0x451f71+'-page-indicator')['textContent']=_0x2341ac(0xc7);}catch(_0x18a98a){console['error']('Error\x20applying\x20filters:',_0x18a98a),_0xfe9b65[_0x2341ac(0x308)]=_0x2341ac(0x13c)+_0x18a98a['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x4c868c=a2_0x448c;document['getElementById']('history-start-date')['value']='',document['getElementById']('history-end-date')[_0x4c868c(0x283)]='',document['getElementById'](_0x4c868c(0x14a))['value']='all',document['getElementById']('elo-history-search')[_0x4c868c(0x283)]='';const _0xe79ff6=currentLadder['toLowerCase']();eloHistoryPagination[_0xe79ff6]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x117758=a2_0x448c,_0x2c7549=document[_0x117758(0x10f)](_0x117758(0x129)),_0x1b6c32=document['getElementById'](_0x117758(0x2b5)),_0x1b26fb=document['getElementById'](_0x117758(0xe6));_0x2c7549&&_0x1b6c32&&_0x1b26fb&&(_0x2c7549[_0x117758(0x24a)]('click',()=>{_0x1b6c32['classList']['add']('active');}),_0x1b6c32['addEventListener']('click',_0x25e534=>{_0x25e534['target']===_0x1b6c32&&_0x1b6c32['classList']['remove']('active');}),_0x1b26fb['addEventListener'](_0x117758(0x176),async _0x400c05=>{const _0x1b6bfb=_0x117758;_0x400c05['preventDefault']();const _0x2d4a47=document[_0x1b6bfb(0x10f)]('promote-username'),_0x4747c4=document['getElementById'](_0x1b6bfb(0x1f0)),_0x2d12f7=_0x2d4a47[_0x1b6bfb(0x283)][_0x1b6bfb(0x155)](),_0x218210=_0x4747c4[_0x1b6bfb(0x283)];if(!_0x2d12f7){showNotification(_0x1b6bfb(0x238),_0x1b6bfb(0x285));return;}try{await promotePlayer(_0x2d12f7,_0x218210),_0x1b6c32['classList']['remove']('active'),_0x2d4a47['value']='';}catch(_0x159760){showNotification(_0x159760['message'],'error');}}),document['getElementById']('cancel-promote-btn')[_0x117758(0x24a)]('click',()=>{_0x1b6c32['classList']['remove']('active');}));const _0x16bf91=document['getElementById'](_0x117758(0x197)),_0x6cfaad=document['getElementById'](_0x117758(0x1e9)),_0x3d28d9=document['getElementById'](_0x117758(0x1dd));_0x16bf91&&_0x6cfaad&&_0x3d28d9&&(_0x16bf91['addEventListener']('click',()=>{_0x6cfaad['classList']['add']('active');}),_0x6cfaad[_0x117758(0x24a)](_0x117758(0x14c),_0x142176=>{_0x142176['target']===_0x6cfaad&&_0x6cfaad['classList']['remove']('active');}),_0x3d28d9['addEventListener']('submit',async _0xab5108=>{const _0x1a0906=_0x117758;_0xab5108['preventDefault']();const _0x39a642=document['getElementById'](_0x1a0906(0x23b)),_0x52d649=document[_0x1a0906(0x10f)]('demote-ladder'),_0xff41fd=_0x39a642['value']['trim'](),_0x5894c1=_0x52d649['value'];if(!_0xff41fd){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0xff41fd,_0x5894c1),document[_0x1a0906(0x10f)]('demote-modal')['classList']['remove'](_0x1a0906(0x210)),document[_0x1a0906(0x10f)]('demote-username')[_0x1a0906(0x283)]='';}catch(_0x2905a1){console[_0x1a0906(0x285)](_0x1a0906(0x28e),_0x2905a1);}}));const _0x30b1f6=document['getElementById']('set-elo-btn'),_0x1a83d0=document['getElementById'](_0x117758(0xc3)),_0x211790=document[_0x117758(0x10f)]('set-elo-form');_0x30b1f6&&_0x1a83d0&&_0x211790&&(_0x30b1f6['addEventListener']('click',()=>{const _0x16ff4b=_0x117758;_0x1a83d0['classList'][_0x16ff4b(0x179)]('active');}),_0x1a83d0['addEventListener'](_0x117758(0x14c),_0xcd81bc=>{const _0x22c6b0=_0x117758;_0xcd81bc['target']===_0x1a83d0&&_0x1a83d0[_0x22c6b0(0x1ae)][_0x22c6b0(0xbb)]('active');}),_0x211790['addEventListener']('submit',async _0xec622b=>{const _0xd16a13=_0x117758;_0xec622b['preventDefault']();const _0x3748d3=document['getElementById'](_0xd16a13(0x2fb)),_0x159991=document['getElementById'](_0xd16a13(0x2d3));let _0x4630e6;const _0x56ff36=document['getElementById']('set-elo-ladder'),_0x3d96a2=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x56ff36)_0x4630e6=_0x56ff36['value'];else _0x3d96a2?_0x4630e6=_0x3d96a2['value']:_0x4630e6='D1';if(!_0x3748d3||!_0x159991){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x3a4c32=_0x3748d3[_0xd16a13(0x283)]['trim'](),_0x4443de=parseInt(_0x159991['value']);if(!_0x3a4c32||isNaN(_0x4443de)){showNotification(_0xd16a13(0x2eb),'error');return;}try{await setCustomElo(_0x3a4c32,_0x4443de,_0x4630e6),_0x1a83d0[_0xd16a13(0x1ae)][_0xd16a13(0xbb)]('active'),_0x3748d3['value']='',_0x159991['value']='';}catch(_0x65af9c){showNotification(_0x65af9c['message'],_0xd16a13(0x285));}}),document[_0x117758(0x10f)]('cancel-set-elo-btn')['addEventListener']('click',()=>{const _0x444566=_0x117758;_0x1a83d0[_0x444566(0x1ae)]['remove']('active');}));const _0x2af049=document['getElementById']('set-role-modal'),_0x44cb14=document[_0x117758(0x10f)]('set-role-form');if(_0x2af049&&_0x44cb14){_0x2af049[_0x117758(0x24a)]('click',_0x3c5d18=>{_0x3c5d18['target']===_0x2af049&&closeModalHandler();}),_0x44cb14[_0x117758(0x24a)]('submit',async _0x20970f=>{const _0x1268c7=_0x117758;_0x20970f['preventDefault']();const _0x1a90dc=document['getElementById']('role-username'),_0x22a6fe=document['getElementById']('role-name'),_0xd5bd7=document[_0x1268c7(0x10f)](_0x1268c7(0x29d)),_0x5b4f17=_0x1a90dc[_0x1268c7(0x283)]['trim'](),_0x4250ce=_0x22a6fe['value'][_0x1268c7(0x155)](),_0x3de81f=_0xd5bd7['value'];if(!_0x5b4f17){showNotification(_0x1268c7(0x1df),'error');return;}try{await setUserRole(_0x5b4f17,_0x4250ce,_0x3de81f),closeModalHandler(),loadUsersWithRoles();}catch(_0x2deb22){}});const _0x2b90da=document['getElementById']('cancel-role-btn');_0x2b90da&&(_0x2b90da['removeEventListener']('click',closeModalHandler),_0x2b90da['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x10011a,_0x444f38){const _0x247c70=a2_0x448c;try{console[_0x247c70(0x205)](_0x247c70(0x2f5)+_0x10011a+'\x20in\x20'+_0x444f38+'\x20ladder');const _0x1aeb80=auth['currentUser'];if(!_0x1aeb80)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x4c39ed=_0x444f38==='D2'?'playersD2':_0x247c70(0x267),_0x1579b5=_0x444f38==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x4c39ed);const _0x31c1cc=collection(db,_0x4c39ed),_0xd20f5=query(_0x31c1cc,where(_0x247c70(0x223),'==',_0x10011a)),_0x8db828=await getDocs(_0xd20f5);if(_0x8db828['empty']){alert(_0x247c70(0x105)+_0x444f38+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x444f38+'\x20ladder');}const _0xa09698=_0x8db828[_0x247c70(0x116)][0x0],_0x52add6=_0xa09698['data'](),_0x1dc2f6=_0x52add6[_0x247c70(0x1da)]||0x4b0,_0x1de8a5=_0xa09698['id'];console[_0x247c70(0x205)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x1dc2f6);const _0x5dc88d=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':_0x247c70(0x27f),'elo':0x7d0}];let _0x14b792=_0x5dc88d['find'](_0xd03ce5=>_0xd03ce5[_0x247c70(0x27c)]>_0x1dc2f6);if(!_0x14b792){alert(_0x247c70(0x265)+_0x444f38+_0x247c70(0xe1));throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x444f38+'\x20ladder');}console['log'](_0x247c70(0x2c3)+_0x14b792['name']+'\x20('+_0x14b792['elo']+')'),await updateDoc(doc(db,_0x4c39ed,_0xa09698['id']),{'eloRating':_0x14b792[_0x247c70(0x27c)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x1aeb80[_0x247c70(0xc5)]||'admin'}),await addDoc(collection(db,_0x1579b5),{'player':_0x10011a,'previousElo':_0x1dc2f6,'newElo':_0x14b792['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x14b792[_0x247c70(0x1ca)],'promotedBy':_0x1aeb80['email']||'admin','gameMode':_0x444f38});try{const {promotionManager:_0x3e94db}=await import(_0x247c70(0x12b)),_0x1dca89=_0x3e94db[_0x247c70(0x154)](_0x1dc2f6),_0x48f84a=_0x14b792[_0x247c70(0x1ca)];await _0x3e94db['sendPromotionNotification'](_0x1de8a5,_0x10011a,_0x1dc2f6,_0x14b792['elo'],_0x1dca89,_0x48f84a,'promotion',{'displayName':_0x10011a,'source':'admin','adminUser':_0x1aeb80['email'],'ladder':_0x444f38}),console[_0x247c70(0x205)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x3e4774){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x3e4774);}return alert(_0x247c70(0x2cd)+_0x10011a+'\x20to\x20'+_0x14b792['name']+'\x20('+_0x14b792['elo']+')'),currentLadder===_0x444f38&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x3787b2){console[_0x247c70(0x285)](_0x247c70(0x161),_0x3787b2),alert(_0x247c70(0x1b4)+_0x3787b2['message']);throw _0x3787b2;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x37310a=a2_0x448c,_0x15ca68=document[_0x37310a(0x10f)]('promote-form');_0x15ca68&&_0x15ca68[_0x37310a(0x24a)](_0x37310a(0x176),async _0xefa6be=>{const _0x4d0a02=_0x37310a;_0xefa6be[_0x4d0a02(0x2f6)]();const _0x581d1d=document['getElementById'](_0x4d0a02(0x17e))['value'][_0x4d0a02(0x155)](),_0x39498c=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x581d1d){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x581d1d,_0x39498c),document['getElementById']('promote-modal')['classList'][_0x4d0a02(0xbb)]('active'),document['getElementById']('promote-username')['value']='';}catch(_0x337e0e){console['error']('Error\x20in\x20promotion:',_0x337e0e);}});});async function demotePlayer(_0x106160,_0x168757){const _0x1cb49e=a2_0x448c;try{console['log']('Attempting\x20to\x20demote\x20'+_0x106160+'\x20in\x20'+_0x168757+'\x20ladder');const _0x519c5d=auth['currentUser'];if(!_0x519c5d)throw new Error(_0x1cb49e(0x1e1));const _0x34bd10=_0x168757==='D2'?_0x1cb49e(0x160):'players',_0x14c23e=_0x168757==='D2'?'eloHistoryD2':'eloHistory';console['log'](_0x1cb49e(0x25f)+_0x34bd10);const _0x39e8cc=collection(db,_0x34bd10),_0x5904eb=query(_0x39e8cc,where('username','==',_0x106160)),_0xefc0fd=await getDocs(_0x5904eb);if(_0xefc0fd['empty']){alert(_0x1cb49e(0x105)+_0x168757+'\x20ladder');throw new Error(_0x1cb49e(0x105)+_0x168757+'\x20ladder');}const _0x456748=_0xefc0fd[_0x1cb49e(0x116)][0x0],_0x404063=_0x456748['data'](),_0x152421=_0x404063['eloRating']||0x4b0;console[_0x1cb49e(0x205)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x152421);const _0x338b57=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x1cb49e(0x294),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x5f4574=_0x338b57[_0x1cb49e(0x111)](_0x21d980=>_0x21d980['elo']<_0x152421);if(!_0x5f4574){alert(_0x1cb49e(0x2cf)+_0x168757+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x168757+'\x20ladder');}console[_0x1cb49e(0x205)]('Demoting\x20player\x20to\x20'+_0x5f4574['name']+'\x20('+_0x5f4574['elo']+')'),await updateDoc(doc(db,_0x34bd10,_0x456748['id']),{'eloRating':_0x5f4574['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x519c5d['email']||'admin'}),await addDoc(collection(db,_0x14c23e),{'player':_0x106160,'previousElo':_0x152421,'newElo':_0x5f4574['elo'],'timestamp':serverTimestamp(),'type':_0x1cb49e(0x1de),'rankAchieved':_0x5f4574['name'],'demotedBy':_0x519c5d['email']||'admin','gameMode':_0x168757});try{const {promotionManager:_0x5b25df}=await import('./promotions.js'),_0x26344d=_0x5b25df['getRankName'](_0x152421),_0x5b7065=_0x5f4574['name'];await _0x5b25df['sendPromotionNotification'](_0x456748['id'],_0x106160,_0x152421,_0x5f4574[_0x1cb49e(0x27c)],_0x26344d,_0x5b7065,_0x1cb49e(0x1de),{'displayName':_0x106160,'source':'admin','adminUser':_0x519c5d['email'],'ladder':_0x168757}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x306106){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x306106);}return alert('Successfully\x20demoted\x20'+_0x106160+_0x1cb49e(0x2d1)+_0x5f4574['name']+'\x20('+_0x5f4574[_0x1cb49e(0x27c)]+')'),currentLadder===_0x168757&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x533e41){console['error']('Error\x20demoting\x20player:',_0x533e41),alert('Error\x20demoting\x20player:\x20'+_0x533e41[_0x1cb49e(0x21e)]);throw _0x533e41;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x41706d=a2_0x448c,_0x30e4fa=document[_0x41706d(0x10f)]('demote-form');_0x30e4fa&&_0x30e4fa['addEventListener'](_0x41706d(0x176),async _0x609a54=>{const _0x5e9cad=_0x41706d;_0x609a54['preventDefault']();const _0x1feca1=document['getElementById']('demote-username')[_0x5e9cad(0x283)]['trim'](),_0x629c0d=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')[_0x5e9cad(0x283)];if(!_0x1feca1){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x1feca1,_0x629c0d),document['getElementById'](_0x5e9cad(0x1e9))[_0x5e9cad(0x1ae)]['remove']('active'),document['getElementById'](_0x5e9cad(0x23b))['value']='';}catch(_0x414829){console['error']('Error\x20in\x20demotion:',_0x414829);}});});async function setCustomElo(_0x2ec30c,_0x5cc8fc,_0x53bb79){const _0x23042d=a2_0x448c;try{const _0x440ffb=auth[_0x23042d(0x177)];if(!_0x440ffb||!isAdmin(_0x440ffb['email']))throw new Error(_0x23042d(0x207));const _0x23297f=_0x53bb79==='D2'?'playersD2':_0x23042d(0x267),_0x24dd15=_0x53bb79==='D2'?'eloHistoryD2':_0x23042d(0x23e),_0x1c5994=collection(db,_0x23297f),_0x5dbee6=query(_0x1c5994,where('username','==',_0x2ec30c)),_0x57e356=await getDocs(_0x5dbee6);if(_0x57e356['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x53bb79+_0x23042d(0xe1));const _0x1148bc=_0x57e356['docs'][0x0],_0x1bd729=_0x1148bc['data'](),_0xc0d80=_0x1bd729['eloRating']||0x4b0,_0x3c7a82=writeBatch(db);_0x3c7a82['update'](doc(db,_0x23297f,_0x1148bc['id']),{'eloRating':_0x5cc8fc,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x440ffb['email']});const _0x5695ef=doc(collection(db,_0x24dd15));return _0x3c7a82['set'](_0x5695ef,{'player':_0x2ec30c,'previousElo':_0xc0d80,'newElo':_0x5cc8fc,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x440ffb[_0x23042d(0xc5)],'gameMode':_0x53bb79}),await _0x3c7a82[_0x23042d(0x313)](),showNotification('ELO\x20rating\x20for\x20'+_0x2ec30c+'\x20was\x20updated\x20from\x20'+_0xc0d80+_0x23042d(0x2d1)+_0x5cc8fc,'success'),currentLadder===_0x53bb79&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x130ff6){console[_0x23042d(0x285)](_0x23042d(0xe3),_0x130ff6);throw _0x130ff6;}}async function setUserRole(_0x9f62ee,_0x104d1b,_0x2f198d){const _0x1be145=a2_0x448c;try{const _0x5b2f02=auth[_0x1be145(0x177)];if(!_0x5b2f02||!isAdmin(_0x5b2f02['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x3650c6=_0x104d1b?_0x104d1b['trim']():null,_0x3bb718=_0x3650c6?_0x2f198d||'#808080':null,[_0x4e38ae,_0x160b15]=await Promise[_0x1be145(0x2f0)]([getDocs(query(collection(db,'players'),where('username','==',_0x9f62ee))),getDocs(query(collection(db,'playersD2'),where(_0x1be145(0x223),'==',_0x9f62ee)))]),_0x265816=[];if(!_0x4e38ae['empty'])_0x265816['push']({'ref':_0x4e38ae['docs'][0x0][_0x1be145(0x23d)],'source':'D1'});if(!_0x160b15['empty'])_0x265816['push']({'ref':_0x160b15['docs'][0x0]['ref'],'source':'D2'});if(_0x265816['length']===0x0){const [_0x51630c,_0x78ea4a]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x9f62ee))),getDocs(query(collection(db,_0x1be145(0x135)),where('username','==',_0x9f62ee)))]);if(!_0x51630c['empty'])_0x265816['push']({'ref':_0x51630c['docs'][0x0]['ref'],'source':'NonParticipant'});if(!_0x78ea4a['empty'])_0x265816['push']({'ref':_0x78ea4a['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x265816[_0x1be145(0x153)]===0x0)throw new Error(_0x1be145(0x2da)+_0x9f62ee+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x1dd198=writeBatch(db);_0x265816['forEach'](_0xb83e7f=>{const _0x116955=_0x1be145;console['log']('Updating\x20role\x20for\x20'+_0x9f62ee+_0x116955(0x252)+_0xb83e7f['source']),!_0x3650c6?_0x1dd198['update'](_0xb83e7f['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x1dd198['update'](_0xb83e7f['ref'],{'roleName':_0x3650c6,'roleColor':_0x3bb718,'roleAssignedBy':_0x5b2f02['email'],'roleAssignedAt':serverTimestamp()});}),await _0x1dd198['commit']();const _0x3c0572=_0x3650c6?_0x1be145(0x1f1)+_0x3650c6+_0x1be145(0x1f5):_0x1be145(0x2fa);return showNotification(_0x3c0572+_0x1be145(0x134)+_0x9f62ee+'\x22',_0x1be145(0x214)),!![];}catch(_0x2d2306){console['error']('Error\x20setting\x20user\x20role:',_0x2d2306),showNotification('Error:\x20'+_0x2d2306['message'],'error');throw _0x2d2306;}}function showNotification(_0x390e4f,_0x5901db='info'){const _0x4d6569=a2_0x448c,_0x4e9cc5=document['createElement']('div');_0x4e9cc5['className']='notification\x20'+_0x5901db,_0x4e9cc5[_0x4d6569(0x308)]=_0x4d6569(0x282)+getNotificationIcon(_0x5901db)+_0x4d6569(0x1e6)+_0x390e4f+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x4e9cc5),setTimeout(()=>{const _0x4d19bc=_0x4d6569;_0x4e9cc5['classList']['add'](_0x4d19bc(0x210));},0xa);const _0x3cda5f=setTimeout(()=>{closeNotification(_0x4e9cc5);},0x1388);_0x4e9cc5[_0x4d6569(0xf3)]('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x3cda5f),closeNotification(_0x4e9cc5);});}function getNotificationIcon(_0x2aa7a6){const _0x1d9e6a=a2_0x448c;switch(_0x2aa7a6){case'success':return'fa-check-circle';case'error':return'fa-exclamation-circle';case _0x1d9e6a(0x25c):return _0x1d9e6a(0x2c4);case'info':default:return'fa-info-circle';}}function closeNotification(_0xa4ebf4){_0xa4ebf4['classList']['remove']('active'),setTimeout(()=>{_0xa4ebf4['remove']();},0x12c);}function setupUserRolesSection(){const _0x2b1c9d=a2_0x448c,_0xc23c3a=document['getElementById']('load-users-data');_0xc23c3a&&_0xc23c3a['addEventListener']('click',function(){const _0x1d5af8=a2_0x448c;this[_0x1d5af8(0x1ae)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x47a0e5=_0x1d5af8;this[_0x47a0e5(0x1ae)]['remove']('loading'),this[_0x47a0e5(0x308)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x1d5af8(0x201)](_0x4a0fc3=>{const _0x4e5d1e=_0x1d5af8;console['error']('Error\x20loading\x20users:',_0x4a0fc3),this['classList'][_0x4e5d1e(0xbb)](_0x4e5d1e(0x2a0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x116dc9=document[_0x2b1c9d(0x10f)](_0x2b1c9d(0xf7));_0x116dc9&&_0x116dc9[_0x2b1c9d(0x24a)]('click',()=>{const _0x5b955e=document['getElementById']('set-role-modal');_0x5b955e&&_0x5b955e['classList']['add']('active');});const _0x47d86b=document['getElementById']('user-search');_0x47d86b&&_0x47d86b[_0x2b1c9d(0x24a)](_0x2b1c9d(0x1fa),debounce(filterUsersTable,0x12c));const _0x6324dc=document['getElementById'](_0x2b1c9d(0x144));_0x6324dc&&_0x6324dc[_0x2b1c9d(0x24a)]('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x4dd0cf=a2_0x448c,_0x1792d9=document[_0x4dd0cf(0x10f)]('users-table-body');if(!_0x1792d9)return;_0x1792d9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x14f260,_0x3fc0e6,_0xd3f9ce,_0x58fd85]=await Promise['all']([getDocs(collection(db,_0x4dd0cf(0x267))),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x2c82b9=new Map();function _0x434a3a(_0x5a6b05,_0x36ce2c){_0x5a6b05['forEach'](_0x232bc8=>{const _0x34ccae=a2_0x448c,_0x1b9e6f=_0x232bc8[_0x34ccae(0x21d)]();if(!_0x1b9e6f[_0x34ccae(0x223)])return;if(!_0x2c82b9['has'](_0x1b9e6f['username']))_0x2c82b9['set'](_0x1b9e6f['username'],{'username':_0x1b9e6f[_0x34ccae(0x223)],'roleName':_0x1b9e6f['roleName']||null,'roleColor':_0x1b9e6f['roleColor']||null,'roleAssignedBy':_0x1b9e6f['roleAssignedBy']||null,'roleAssignedAt':_0x1b9e6f['roleAssignedAt']||null,'sources':[_0x36ce2c]});else{const _0x207777=_0x2c82b9['get'](_0x1b9e6f['username']);_0x1b9e6f['roleName']&&(!_0x207777['roleName']||_0x36ce2c==='D1'||_0x36ce2c==='D2')&&(_0x207777['roleName']=_0x1b9e6f[_0x34ccae(0x25a)],_0x207777[_0x34ccae(0xfe)]=_0x1b9e6f['roleColor'],_0x207777[_0x34ccae(0x1b6)]=_0x1b9e6f['roleAssignedBy'],_0x207777['roleAssignedAt']=_0x1b9e6f['roleAssignedAt']),!_0x207777['sources']['includes'](_0x36ce2c)&&_0x207777['sources']['push'](_0x36ce2c);}});}_0x434a3a(_0x14f260,'D1'),_0x434a3a(_0x3fc0e6,'D2'),_0x434a3a(_0xd3f9ce,'Non-Participant'),_0x434a3a(_0x58fd85,'Profile');const _0x212078=Array[_0x4dd0cf(0x224)](_0x2c82b9['values']())[_0x4dd0cf(0x1cb)]((_0x245cad,_0x12a94b)=>_0x245cad['username']['localeCompare'](_0x12a94b['username']));if(_0x212078['length']===0x0){_0x1792d9[_0x4dd0cf(0x308)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x1792d9[_0x4dd0cf(0x308)]='',_0x212078['forEach'](_0x9cf590=>{const _0x1fc1ec=_0x4dd0cf,_0x20db7a=document['createElement']('tr');_0x20db7a[_0x1fc1ec(0x318)]['username']=_0x9cf590['username'],_0x20db7a[_0x1fc1ec(0x318)][_0x1fc1ec(0x25a)]=_0x9cf590['roleName']||'',_0x20db7a['dataset']['roleColor']=_0x9cf590['roleColor']||'#808080';const _0x525532=_0x9cf590[_0x1fc1ec(0x296)]?new Date(_0x9cf590['roleAssignedAt']['seconds']*0x3e8)[_0x1fc1ec(0x2b2)]():'N/A',_0x166b79=_0x9cf590[_0x1fc1ec(0x25a)]?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x9cf590['roleColor']+';\x20color:\x20'+getContrastColor(_0x9cf590['roleColor'])+';\x22>'+_0x9cf590['roleName']+_0x1fc1ec(0xcc):'<span\x20class=\x22no-role\x22>None</span>';_0x20db7a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x9cf590['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x9cf590['sources']['join'](',\x20')+_0x1fc1ec(0x1b1)+_0x166b79+_0x1fc1ec(0x113)+(_0x9cf590['roleAssignedBy']||_0x1fc1ec(0x251))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x525532+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x9cf590[_0x1fc1ec(0x223)]+_0x1fc1ec(0x13f)+(_0x9cf590[_0x1fc1ec(0x25a)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x9cf590['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x1fc1ec(0x300),_0x1792d9['appendChild'](_0x20db7a);}),document['querySelectorAll']('.edit-role-btn')[_0x4dd0cf(0xed)](_0x55a403=>{_0x55a403['addEventListener']('click',()=>{const _0x3b4c35=_0x55a403['dataset']['username'];openRoleEditModal(_0x3b4c35);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x2246b8=>{_0x2246b8['addEventListener']('click',()=>{const _0x423e2e=a2_0x448c,_0x4075de=_0x2246b8[_0x423e2e(0x318)]['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x4075de+'?')&&setUserRole(_0x4075de,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x2ca0d1=>console['error'](_0x423e2e(0x2ee),_0x2ca0d1));});});}catch(_0x35e2f8){console['error'](_0x4dd0cf(0x1ee),_0x35e2f8),_0x1792d9[_0x4dd0cf(0x308)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function a2_0x448c(_0x2dfc52,_0x12856c){const _0x2729bb=a2_0x3cbf();return a2_0x448c=function(_0x3b36f2,_0x2717c5){_0x3b36f2=_0x3b36f2-0xbb;let _0x3cbfed=_0x2729bb[_0x3b36f2];return _0x3cbfed;},a2_0x448c(_0x2dfc52,_0x12856c);}function openRoleEditModal(_0x46fc45){const _0x385f8c=a2_0x448c;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x46fc45);const _0x43235b=document['getElementById']('set-role-modal'),_0x3d684d=document[_0x385f8c(0x10f)]('role-username'),_0x21b66e=document['getElementById'](_0x385f8c(0x1e2));if(!_0x43235b){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x43235b);_0x3d684d?(_0x3d684d['value']=_0x46fc45,console[_0x385f8c(0x205)](_0x385f8c(0x16a)+_0x46fc45)):console[_0x385f8c(0x1e3)]('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x514ac1=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x46fc45+'\x22]');if(_0x514ac1&&_0x21b66e){const _0x30117b=_0x514ac1['dataset'][_0x385f8c(0x141)];_0x21b66e['value']=_0x30117b==='none'?'':_0x30117b,console[_0x385f8c(0x205)]('Role\x20select\x20set\x20to:\x20'+_0x21b66e['value']+'\x20(based\x20on\x20data-role:\x20'+_0x30117b+')');}else{if(!_0x514ac1)console[_0x385f8c(0x1e3)]('Table\x20row\x20for\x20user\x20'+_0x46fc45+_0x385f8c(0x1aa));if(!_0x21b66e)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x21b66e)_0x21b66e['value']='';}console['log'](_0x385f8c(0x227)),_0x43235b['classList'][_0x385f8c(0x179)](_0x385f8c(0x210));const _0x4becb8=document[_0x385f8c(0x10f)](_0x385f8c(0x1c9));_0x4becb8?(console[_0x385f8c(0x205)]('Attaching\x20cancel\x20button\x20listener.'),_0x4becb8['removeEventListener']('click',closeModalHandler),_0x4becb8['addEventListener']('click',closeModalHandler)):console[_0x385f8c(0x1e3)]('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x43235b['removeEventListener']('click',closeModalBackgroundHandler),_0x43235b[_0x385f8c(0x24a)]('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x5d1762){const _0x3f06ce=a2_0x448c;_0x5d1762[_0x3f06ce(0x1a6)]===this&&closeModalHandler();}function closeModalHandler(){const _0x5013ff=a2_0x448c,_0x42b6dc=document['getElementById']('set-role-modal');_0x42b6dc&&(_0x42b6dc[_0x5013ff(0x1ae)]['remove']('active'),_0x42b6dc['removeEventListener'](_0x5013ff(0x14c),closeModalBackgroundHandler));}function filterUsersTable(){const _0x2c7279=a2_0x448c,_0x3c16e2=document['getElementById']('user-search')?.['value'][_0x2c7279(0x171)]()||'',_0x66619a=document['getElementById']('role-filter')?.[_0x2c7279(0x283)]||'all',_0xaebe21=document['querySelectorAll']('#users-table-body\x20tr');let _0x396aca=0x0;_0xaebe21['forEach'](_0x1bb7d8=>{const _0x46b0e5=_0x2c7279;if(_0x1bb7d8['querySelector']('.loading-cell')||_0x1bb7d8[_0x46b0e5(0xf3)]('.empty-state')||_0x1bb7d8['querySelector'](_0x46b0e5(0x239)))return;const _0x328092=_0x1bb7d8['dataset']['username']?.['toLowerCase']()||'',_0xafeff=_0x1bb7d8[_0x46b0e5(0x318)][_0x46b0e5(0x141)]||'none',_0x453717=_0x328092[_0x46b0e5(0x2e5)](_0x3c16e2),_0x43154c=_0x66619a==='all'||_0xafeff===_0x66619a;_0x453717&&_0x43154c?(_0x1bb7d8[_0x46b0e5(0x2e0)]['display']='',_0x396aca++):_0x1bb7d8['style']['display']='none';});if(_0x396aca===0x0&&_0xaebe21['length']>0x0){const _0x131bc1=document['getElementById']('users-table-body');if(_0x131bc1){if(!_0x131bc1[_0x2c7279(0xf3)]('.no-results')){const _0x1e3cc6=document['createElement']('tr');_0x1e3cc6[_0x2c7279(0x1ae)]['add']('no-results'),_0x1e3cc6['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x131bc1[_0x2c7279(0x276)](_0x1e3cc6);}}}else{const _0x1f6d79=document['querySelector']('.no-results');_0x1f6d79&&_0x1f6d79['remove']();}}function setupManageArticlesSection(){const _0x3b624a=a2_0x448c,_0x27612b=document['getElementById']('load-articles-data');_0x27612b&&_0x27612b[_0x3b624a(0x24a)]('click',function(){const _0x5578d1=_0x3b624a;this['classList'][_0x5578d1(0x179)](_0x5578d1(0x2a0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})[_0x5578d1(0x201)](_0x5cd193=>{const _0x52c59d=_0x5578d1;console[_0x52c59d(0x285)]('Error\x20loading\x20articles:',_0x5cd193),this['classList']['remove'](_0x52c59d(0x2a0)),this[_0x52c59d(0x308)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x51482a=_0x52c59d;this[_0x51482a(0x308)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x462e0e=document['getElementById']('create-new-article-btn');_0x462e0e?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x462e0e[_0x3b624a(0x2e0)][_0x3b624a(0x2bc)]='block',_0x462e0e['addEventListener']('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x530f44=document['getElementById'](_0x3b624a(0x20a));_0x530f44&&_0x530f44['addEventListener'](_0x3b624a(0x176),_0x3dcfcd=>{_0x3dcfcd['preventDefault'](),saveArticle();});const _0x243809=document[_0x3b624a(0x10f)](_0x3b624a(0x1cf));_0x243809&&_0x243809['addEventListener']('click',()=>{closeArticleModal();});const _0x19d8c4=document['querySelector'](_0x3b624a(0x2d9));_0x19d8c4&&_0x19d8c4['addEventListener']('click',()=>{closeArticleModal();});const _0x1a843d=document['getElementById']('article-modal');_0x1a843d&&_0x1a843d['addEventListener']('click',_0x1444eb=>{_0x1444eb['target']===_0x1a843d&&closeArticleModal();});}async function loadArticles(){const _0x12dcf3=a2_0x448c,_0x17d5c7=document['getElementById']('articles-table-body');if(!_0x17d5c7)return;_0x17d5c7[_0x12dcf3(0x308)]=_0x12dcf3(0x1f4);try{const _0x4fbe34=collection(db,'articles'),_0x12f1d4=query(_0x4fbe34,orderBy(_0x12dcf3(0x18d),'desc')),_0x575fc3=await getDocs(_0x12f1d4);if(_0x575fc3['empty']){_0x17d5c7[_0x12dcf3(0x308)]=_0x12dcf3(0x29a);return;}_0x17d5c7[_0x12dcf3(0x308)]='',_0x575fc3['forEach'](_0xb228c8=>{const _0x4a24be=_0x12dcf3,_0x31cca2=_0xb228c8['data'](),_0x579716=document['createElement']('tr'),_0x33c5d9=_0x31cca2['createdAt']?new Date(_0x31cca2['createdAt'][_0x4a24be(0x306)]*0x3e8)[_0x4a24be(0x10d)]():_0x4a24be(0x251);_0x579716['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x31cca2[_0x4a24be(0xf6)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x31cca2['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x33c5d9+_0x4a24be(0x275)+_0xb228c8['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0xb228c8['id']+_0x4a24be(0x2c5),_0x17d5c7[_0x4a24be(0x276)](_0x579716);}),setupArticleActionButtons();}catch(_0x101ca5){console[_0x12dcf3(0x285)]('Error\x20loading\x20articles:',_0x101ca5),_0x17d5c7[_0x12dcf3(0x308)]=_0x12dcf3(0x2d4)+_0x101ca5['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x8b9d6f=a2_0x448c;document['querySelectorAll']('.edit-article-btn')[_0x8b9d6f(0xed)](_0x3433f3=>{_0x3433f3['addEventListener']('click',async _0x1dee02=>{const _0x3a9365=_0x1dee02['currentTarget']['dataset']['id'];openArticleModal(_0x3a9365);});}),document['querySelectorAll']('.delete-article-btn')[_0x8b9d6f(0xed)](_0x2884b8=>{const _0x32cc13=_0x8b9d6f;_0x2884b8[_0x32cc13(0x24a)](_0x32cc13(0x14c),async _0x32bb41=>{const _0x400281=_0x32cc13,_0x353db6=_0x32bb41[_0x400281(0x126)]['dataset']['id'];confirmDeleteArticle(_0x353db6);});});}function openArticleModal(_0x1b5ef6=null){const _0x4d13ce=a2_0x448c,_0x2ac3aa=document['getElementById']('article-modal'),_0x1eb3bf=document['getElementById'](_0x4d13ce(0x1c2)),_0x11b6c3=document['getElementById']('article-form'),_0x1b25ee=document['getElementById'](_0x4d13ce(0x21c));_0x11b6c3[_0x4d13ce(0x2a8)](),_0x1b25ee['value']='';if(_0x1b5ef6)_0x1eb3bf['textContent']='Edit\x20Article',_0x1b25ee['value']=_0x1b5ef6,loadArticleData(_0x1b5ef6);else{_0x1eb3bf['textContent']=_0x4d13ce(0x268);const _0x202bce=auth[_0x4d13ce(0x177)];if(_0x202bce){const _0x27f70b=document[_0x4d13ce(0x10f)]('article-author');if(_0x27f70b&&_0x202bce['displayName'])_0x27f70b['value']=_0x202bce['displayName'];else _0x27f70b&&(_0x27f70b['value']=_0x202bce['email']);}}_0x2ac3aa['classList']['add']('active');}async function loadArticleData(_0x211c47){const _0x5e363f=a2_0x448c;try{const _0x254f83=doc(db,'articles',_0x211c47),_0x3e35c9=await getDoc(_0x254f83);if(!_0x3e35c9[_0x5e363f(0x20e)]()){showNotification('Article\x20not\x20found','error');return;}const _0x329c9d=_0x3e35c9['data']();document['getElementById']('article-title')[_0x5e363f(0x283)]=_0x329c9d['title']||'',document['getElementById']('article-author')[_0x5e363f(0x283)]=_0x329c9d['author']||'',document['getElementById']('article-image-url')['value']=_0x329c9d['imageUrl']||'',document[_0x5e363f(0x10f)]('article-content')['value']=_0x329c9d['content']||'';}catch(_0x42a350){console['error']('Error\x20loading\x20article\x20data:',_0x42a350),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x33319b=a2_0x448c;try{const _0x6fc6e4=document['getElementById']('article-id')['value'],_0xaf4838=document[_0x33319b(0x10f)](_0x33319b(0x193))['value']['trim'](),_0x2a5e76=document[_0x33319b(0x10f)](_0x33319b(0x23a))[_0x33319b(0x283)]['trim'](),_0x1552c8=document[_0x33319b(0x10f)]('article-image-url')['value']['trim'](),_0x2b2dd8=document['getElementById']('article-content')['value']['trim']();if(!_0xaf4838||!_0x2b2dd8){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x3552a2=auth['currentUser'];if(!_0x3552a2){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x38f55b={'title':_0xaf4838,'author':_0x2a5e76,'imageUrl':_0x1552c8||null,'content':_0x2b2dd8,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x3552a2['email']};!_0x6fc6e4?(_0x38f55b[_0x33319b(0x18d)]=serverTimestamp(),_0x38f55b[_0x33319b(0x206)]=_0x3552a2['email'],await addDoc(collection(db,_0x33319b(0x209)),_0x38f55b),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x6fc6e4),_0x38f55b),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x46822e){console[_0x33319b(0x285)](_0x33319b(0x27e),_0x46822e),showNotification(_0x33319b(0x221)+_0x46822e[_0x33319b(0x21e)],'error');}}function closeArticleModal(){const _0x278a6e=a2_0x448c,_0x451c8e=document['getElementById']('article-modal');_0x451c8e&&_0x451c8e['classList'][_0x278a6e(0xbb)]('active');}async function confirmDeleteArticle(_0x4c188a){const _0x3af412=a2_0x448c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x3af412(0x209),_0x4c188a)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x3413ff){console['error']('Error\x20deleting\x20article:',_0x3413ff),showNotification(_0x3af412(0xff)+_0x3413ff['message'],_0x3af412(0x285));}}function setupTrophyManagementSection(){const _0x1df97d=a2_0x448c,_0x3d1b3f=document['getElementById']('load-trophies-data');_0x3d1b3f&&_0x3d1b3f['addEventListener'](_0x1df97d(0x14c),function(){const _0x505565=_0x1df97d;this['classList']['add'](_0x505565(0x2a0)),this[_0x505565(0x308)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x12e925=document[_0x505565(0x10f)](_0x505565(0x189));_0x12e925&&(_0x12e925[_0x505565(0x199)]=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x4d93b3=_0x505565;this['classList'][_0x4d93b3(0xbb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x4e00e5=>{const _0x231845=_0x505565;console['error']('Error\x20loading\x20trophies:',_0x4e00e5),this[_0x231845(0x1ae)]['remove']('loading'),this[_0x231845(0x308)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x472bda=_0x231845;this['innerHTML']=_0x472bda(0x241);},0xbb8);});});const _0x4b5b1a=document[_0x1df97d(0x10f)](_0x1df97d(0x15a));_0x4b5b1a&&_0x4b5b1a[_0x1df97d(0x24a)](_0x1df97d(0x14c),()=>{openTrophyModal();});const _0x32f0e4=document[_0x1df97d(0x10f)]('trophy-form');_0x32f0e4&&_0x32f0e4[_0x1df97d(0x24a)]('submit',_0x3394d1=>{_0x3394d1['preventDefault'](),saveTrophyDefinition();});const _0x96e796=document['getElementById']('cancel-trophy-btn');_0x96e796&&_0x96e796[_0x1df97d(0x24a)](_0x1df97d(0x14c),()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')[_0x1df97d(0xed)](_0x16027a=>{_0x16027a['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x44429b=document['getElementById']('trophy-modal');_0x44429b&&_0x44429b[_0x1df97d(0x24a)](_0x1df97d(0x14c),_0xf5f7ca=>{_0xf5f7ca['target']===_0x44429b&&closeTrophyModal();});const _0x47f8e4=document['getElementById']('assign-trophy-modal');_0x47f8e4&&_0x47f8e4[_0x1df97d(0x24a)](_0x1df97d(0x14c),_0x2150f0=>{const _0x25c1c4=_0x1df97d;_0x2150f0[_0x25c1c4(0x1a6)]===_0x47f8e4&&closeAssignTrophyModal();});const _0x16896c=document['getElementById']('assign-trophy-form');_0x16896c&&_0x16896c[_0x1df97d(0x24a)]('submit',_0x4b0557=>{_0x4b0557['preventDefault'](),assignTrophyToPlayer();});const _0x117b8d=document[_0x1df97d(0x10f)]('cancel-assign-btn');_0x117b8d&&_0x117b8d['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x392a74=document['getElementById']('trophy-image-url');_0x392a74&&(_0x392a74[_0x1df97d(0x24a)](_0x1df97d(0x1fa),updateTrophyImagePreview),_0x392a74['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x5b948e=a2_0x448c,_0x6285c9=document['getElementById']('trophy-image-url')[_0x5b948e(0x283)]['trim'](),_0x53c553=document['getElementById']('trophy-image-preview');if(!_0x53c553){const _0x1aa30d=document['getElementById']('trophy-image-url')['closest'](_0x5b948e(0xea)),_0x4cbb7c=document['createElement']('div');_0x4cbb7c['id']='trophy-image-preview',_0x4cbb7c['className']='trophy-preview-container',_0x1aa30d['appendChild'](_0x4cbb7c);const _0x24864a=document['createElement'](_0x5b948e(0x261));_0x24864a['id']=_0x5b948e(0x1a9),_0x24864a['alt']='Trophy\x20Preview',_0x24864a[_0x5b948e(0x199)]=function(){const _0x154c97=_0x5b948e;this[_0x154c97(0x24c)]=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x4cbb7c['appendChild'](_0x24864a);}const _0x4daa90=document[_0x5b948e(0x10f)]('trophy-preview-img');_0x6285c9?(_0x4daa90['src']=_0x6285c9,_0x4daa90['style']['display']='block',_0x4daa90['classList'][_0x5b948e(0xbb)]('error')):(_0x4daa90['src']=DEFAULT_TROPHY_IMAGE,_0x4daa90['style']['display']=_0x5b948e(0x256));}async function loadTrophyDefinitions(){const _0x3c034d=a2_0x448c,_0x1c32de=document[_0x3c034d(0x10f)](_0x3c034d(0x13e));if(!_0x1c32de)return;_0x1c32de[_0x3c034d(0x308)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x44ab20=collection(db,'trophyDefinitions'),_0x11b840=query(_0x44ab20,orderBy(_0x3c034d(0x18d),'desc')),_0x51b580=await getDocs(_0x11b840);if(_0x51b580[_0x3c034d(0x233)]){_0x1c32de['innerHTML']=_0x3c034d(0x19c);return;}_0x1c32de['innerHTML']='',_0x51b580['forEach'](_0x36f30e=>{const _0x58e673=_0x3c034d,_0x2500b6=_0x36f30e['data'](),_0x4a37be=document[_0x58e673(0x1fc)]('tr'),_0x5d44e6=_0x2500b6['createdAt']?new Date(_0x2500b6['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x4a37be['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x2500b6['image']||DEFAULT_TROPHY_IMAGE)+_0x58e673(0xdb)+_0x2500b6['name']+_0x58e673(0x212)+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x2500b6['name']||'Untitled\x20Trophy')+_0x58e673(0x2db)+(_0x2500b6['rarity']||_0x58e673(0x183))+'\x22>'+(_0x2500b6[_0x58e673(0x1d7)]||_0x58e673(0x183))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5d44e6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x36f30e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x36f30e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x36f30e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1c32de['appendChild'](_0x4a37be);}),setupTrophyActionButtons();}catch(_0x58b4c6){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x58b4c6),_0x1c32de['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x58b4c6['message']+_0x3c034d(0xbe);}}function setupTrophyActionButtons(){const _0x1da4e0=a2_0x448c;document['querySelectorAll'](_0x1da4e0(0x28f))['forEach'](_0x45e4ff=>{_0x45e4ff['addEventListener']('click',_0x321d6d=>{const _0xa5dde1=_0x321d6d['currentTarget']['dataset']['id'];openTrophyModal(_0xa5dde1);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x36fdbf=>{const _0x11b99a=_0x1da4e0;_0x36fdbf[_0x11b99a(0x24a)]('click',_0xf839dd=>{const _0x2ba493=_0xf839dd['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x2ba493);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x5d62b8=>{_0x5d62b8['addEventListener']('click',_0x143c3b=>{const _0x16fec2=a2_0x448c,_0x3d8a7e=_0x143c3b[_0x16fec2(0x126)]['dataset']['id'];confirmDeleteTrophy(_0x3d8a7e);});});}function openTrophyModal(_0xf55b3a=null){const _0x445b87=a2_0x448c,_0x172393=document[_0x445b87(0x10f)]('trophy-modal'),_0x32c3ba=document['getElementById'](_0x445b87(0x1ac)),_0x4b4f8c=document[_0x445b87(0x10f)]('trophy-form'),_0x349e5c=document[_0x445b87(0x10f)]('trophy-id');_0x4b4f8c[_0x445b87(0x2a8)](),_0x349e5c[_0x445b87(0x283)]='';const _0x3c7c2b=document['getElementById'](_0x445b87(0x1a9));_0x3c7c2b&&(_0x3c7c2b[_0x445b87(0x24c)]=DEFAULT_TROPHY_IMAGE,_0x3c7c2b[_0x445b87(0x1ae)]['remove']('error')),_0xf55b3a?(_0x32c3ba['textContent']=_0x445b87(0x22f),_0x349e5c[_0x445b87(0x283)]=_0xf55b3a,loadTrophyData(_0xf55b3a)):_0x32c3ba['textContent']='Create\x20New\x20Trophy',_0x172393['classList']['add'](_0x445b87(0x210));}async function loadTrophyData(_0x777d71){const _0x21b04a=a2_0x448c;try{const _0x288831=doc(db,_0x21b04a(0x216),_0x777d71),_0x5a3c13=await getDoc(_0x288831);if(!_0x5a3c13['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x192ecf=_0x5a3c13[_0x21b04a(0x21d)]();document[_0x21b04a(0x10f)]('trophy-name')['value']=_0x192ecf['name']||'',document[_0x21b04a(0x10f)](_0x21b04a(0x2cb))['value']=_0x192ecf['description']||'',document['getElementById']('trophy-image-url')['value']=_0x192ecf['image']||'',document[_0x21b04a(0x10f)](_0x21b04a(0x121))[_0x21b04a(0x283)]=_0x192ecf['rarity']||'common',updateTrophyImagePreview();}catch(_0x31075d){console['error']('Error\x20loading\x20trophy\x20data:',_0x31075d),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x21b04a(0x285));}}async function saveTrophyDefinition(){const _0xd501ca=a2_0x448c;try{const _0xd4821c=document['getElementById']('trophy-id')[_0xd501ca(0x283)],_0x455520=document['getElementById']('trophy-name')['value']['trim'](),_0x3b4f9e=document['getElementById']('trophy-description')['value'][_0xd501ca(0x155)](),_0xaa771d=document['getElementById'](_0xd501ca(0x184))[_0xd501ca(0x283)]['trim'](),_0xf968ca=document['getElementById']('trophy-rarity')['value'];if(!_0x455520||!_0x3b4f9e||!_0xaa771d){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x5775a1=auth['currentUser'];if(!_0x5775a1){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x220113={'name':_0x455520,'description':_0x3b4f9e,'image':_0xaa771d,'rarity':_0xf968ca,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5775a1['email']};!_0xd4821c?(_0x220113[_0xd501ca(0x18d)]=serverTimestamp(),_0x220113['createdBy']=_0x5775a1['email'],await addDoc(collection(db,'trophyDefinitions'),_0x220113),showNotification('Trophy\x20created\x20successfully',_0xd501ca(0x214))):(await updateDoc(doc(db,_0xd501ca(0x216),_0xd4821c),_0x220113),showNotification(_0xd501ca(0x246),'success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x1bd372){console['error']('Error\x20saving\x20trophy:',_0x1bd372),showNotification(_0xd501ca(0x2ab)+_0x1bd372['message'],_0xd501ca(0x285));}}function closeTrophyModal(){const _0x274dc5=a2_0x448c,_0x5822d8=document[_0x274dc5(0x10f)](_0x274dc5(0x1f7));_0x5822d8&&_0x5822d8['classList']['remove']('active');}async function confirmDeleteTrophy(_0x4069e0){const _0x4678f0=a2_0x448c;if(!_0x4069e0){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm(_0x4678f0(0x2f1)))try{const _0x483a41=auth['currentUser'];if(!_0x483a41){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x4069e0),await deleteDoc(doc(db,'trophyDefinitions',_0x4069e0)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x30dba9){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x30dba9),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x30dba9['message'],'error');}}async function openAssignTrophyModal(_0x21a5b9){const _0x2f8883=a2_0x448c;try{const _0x401be2=doc(db,_0x2f8883(0x216),_0x21a5b9),_0x18e351=await getDoc(_0x401be2);if(!_0x18e351['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x51bc5e=_0x18e351[_0x2f8883(0x21d)]();document['getElementById']('assign-trophy-id')['value']=_0x21a5b9,document[_0x2f8883(0x10f)](_0x2f8883(0x1e0))[_0x2f8883(0x283)]=_0x51bc5e['name'],document['getElementById']('assign-trophy-image')[_0x2f8883(0x24c)]=_0x51bc5e['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x51bc5e[_0x2f8883(0x1ca)]||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')[_0x2f8883(0x2f9)]=_0x51bc5e[_0x2f8883(0x164)]||_0x2f8883(0x2e2);const _0x11e5e4=document['getElementById'](_0x2f8883(0x21b));_0x11e5e4['textContent']=_0x51bc5e['rarity']||'common',_0x11e5e4['className']='trophy-rarity\x20'+(_0x51bc5e['rarity']||'common');const _0x439bd4=document[_0x2f8883(0x10f)]('assign-trophy-modal');_0x439bd4['classList']['add']('active');}catch(_0x370617){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x370617),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x3a99f9=document['getElementById']('assign-trophy-modal');_0x3a99f9&&_0x3a99f9['classList']['remove']('active');}async function assignTrophyToPlayer(){const _0x298848=a2_0x448c;try{const _0x2d6a38=document['getElementById'](_0x298848(0x309))['value'],_0x4a8324=document[_0x298848(0x10f)]('assign-trophy-name')['value'],_0x560c52=document[_0x298848(0x10f)](_0x298848(0x2c8))['value']['trim'](),_0x50f359=document['querySelector'](_0x298848(0x23c))['value'];if(!_0x2d6a38||!_0x560c52){showNotification(_0x298848(0x1e7),'error');return;}const _0x47b8c1=auth['currentUser'];if(!_0x47b8c1){showNotification(_0x298848(0x2a6),'error');return;}let _0x59d12d=null,_0x37eb5c=null,_0x57a276=null;if(_0x50f359==='non-participant'){const _0x326cee=collection(db,'nonParticipants'),_0x30e5c3=query(_0x326cee,where('username','==',_0x560c52)),_0x252641=await getDocs(_0x30e5c3);!_0x252641[_0x298848(0x233)]&&(_0x59d12d=_0x252641[_0x298848(0x116)][0x0],_0x37eb5c=_0x59d12d['id'],_0x57a276=_0x59d12d['data']());}else{const _0x45f8a3=_0x50f359==='D1'?_0x298848(0x267):_0x50f359==='D2'?'playersD2':'playersD3',_0x372037=collection(db,_0x45f8a3),_0x38502a=query(_0x372037,where('username','==',_0x560c52)),_0x37f32d=await getDocs(_0x38502a);!_0x37f32d['empty']&&(_0x59d12d=_0x37f32d['docs'][0x0],_0x37eb5c=_0x59d12d['id'],_0x57a276=_0x59d12d['data']());}if(!_0x59d12d){showNotification(_0x298848(0xec)+_0x560c52+_0x298848(0x10b)+(_0x50f359===_0x298848(0x291)?'non-participants':_0x50f359+'\x20ladder'),'error');return;}const _0x5489ab=collection(db,'userTrophies'),_0x2920bd=query(_0x5489ab,where('userId','==',_0x37eb5c),where('trophyId','==',_0x2d6a38)),_0x3a065e=await getDocs(_0x2920bd);if(!_0x3a065e['empty']){showNotification('Player\x20\x22'+_0x560c52+'\x22\x20already\x20has\x20this\x20trophy',_0x298848(0x25c));return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x37eb5c,'playerUsername':_0x560c52,'trophyId':_0x2d6a38,'awardedAt':serverTimestamp(),'awardedBy':_0x47b8c1['email'],'ladder':_0x50f359}),showNotification('Trophy\x20\x22'+_0x4a8324+_0x298848(0x2f2)+_0x560c52,'success'),closeAssignTrophyModal();}catch(_0x36af25){console['error']('Error\x20assigning\x20trophy:',_0x36af25),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x36af25[_0x298848(0x21e)],_0x298848(0x285));}}function setupInactivePlayersSection(){const _0x341674=a2_0x448c,_0x2710e8=document[_0x341674(0x10f)]('inactive-days-filter');_0x2710e8&&_0x2710e8['addEventListener']('change',function(){const _0x22082f=_0x341674,_0x1a509e=document['getElementById'](_0x22082f(0x240));if(_0x1a509e)_0x1a509e['click']();});const _0x33275c=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x363815=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x33275c&&_0x363815&&(_0x33275c[_0x341674(0x24a)]('change',function(){const _0x1e79b8=_0x341674;if(this['checked']){currentLadder='D1';if(document['getElementById']('inactive-players')['style'][_0x1e79b8(0x2bc)]!==_0x1e79b8(0x2c0)){const _0x4d1e3a=document['getElementById']('load-inactive-players-data');if(_0x4d1e3a)_0x4d1e3a['click']();}}}),_0x363815['addEventListener']('change',function(){const _0x4fd079=_0x341674;if(this['checked']){currentLadder='D2';if(document[_0x4fd079(0x10f)]('inactive-players')['style'][_0x4fd079(0x2bc)]!=='none'){const _0x59cca8=document['getElementById']('load-inactive-players-data');if(_0x59cca8)_0x59cca8[_0x4fd079(0x14c)]();}}}));const _0x46ae39=document['getElementById'](_0x341674(0x222));_0x46ae39&&_0x46ae39['addEventListener']('input',debounce(function(){const _0x293142=_0x341674,_0x4f2cf0=_0x46ae39['value']['toLowerCase'](),_0x3d398a=document['querySelectorAll'](_0x293142(0x196));_0x3d398a['forEach'](_0x51b937=>{const _0x31cb05=_0x293142;if(_0x51b937[_0x31cb05(0xf3)]('.loading-cell')||_0x51b937[_0x31cb05(0xf3)]('.empty-state')||_0x51b937[_0x31cb05(0xf3)]('.error-state'))return;const _0x43c2de=_0x51b937['cells'][0x0]?.[_0x31cb05(0x2f9)]['toLowerCase']()||'',_0x13d379=_0x51b937['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x43c2de['includes'](_0x4f2cf0)||_0x13d379[_0x31cb05(0x2e5)](_0x4f2cf0)?_0x51b937['style']['display']='':_0x51b937['style']['display']='none';});},0x12c)),document['addEventListener']('click',function(_0x386720){const _0x818229=_0x341674;if(_0x386720[_0x818229(0x1a6)]['closest']('.view-player-btn')){const _0x43ae89=_0x386720[_0x818229(0x1a6)][_0x818229(0x316)](_0x818229(0x2d8)),_0x1f8c87=_0x43ae89['dataset'][_0x818229(0x223)];_0x1f8c87&&alert('View\x20player\x20details\x20for\x20'+_0x1f8c87+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x5166c3=a2_0x448c,_0x2d9006=document[_0x5166c3(0x10f)](_0x5166c3(0xf8));if(!_0x2d9006)return;_0x2d9006['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x51df25=document['getElementById']('inactive-days-filter'),_0x4e2e11=_0x51df25?parseInt(_0x51df25['value'])||0x0:0x0,_0x1e7964=collection(db,currentLadder==='D1'?_0x5166c3(0x267):_0x5166c3(0x160)),_0x3372c6=await getDocs(_0x1e7964);if(_0x3372c6[_0x5166c3(0x233)]){_0x2d9006['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x7fe2d4=[];_0x3372c6[_0x5166c3(0xed)](_0x199581=>{const _0x8a8493=_0x5166c3,_0x5629ac=_0x199581['data']();_0x7fe2d4['push']({..._0x5629ac,'id':_0x199581['id'],'username':_0x5629ac[_0x8a8493(0x223)]||'Unknown\x20Player'});}),console['log'](_0x5166c3(0x1ed)+_0x7fe2d4['length']+_0x5166c3(0x13d)+currentLadder+'\x20ladder');const _0x462769=currentLadder==='D1'?_0x5166c3(0x1b7):'approvedMatchesD2',_0xb9a99=_0x7fe2d4['map'](async _0x80b72f=>{const _0x43c1d7=_0x5166c3;try{const _0x3a6808=collection(db,_0x462769),_0x44b680=query(_0x3a6808,or(where('winnerUsername','==',_0x80b72f['username']),where('loserUsername','==',_0x80b72f[_0x43c1d7(0x223)])),orderBy('approvedAt',_0x43c1d7(0x103)),limit(0x1)),_0x13cda5=await getDocs(_0x44b680);if(!_0x13cda5['empty']){const _0x32142b=_0x13cda5[_0x43c1d7(0x116)][0x0]['data'](),_0x1e84a1=_0x32142b['approvedAt']?new Date(_0x32142b[_0x43c1d7(0x123)][_0x43c1d7(0x306)]*0x3e8):null,_0x2c9d7a=new Date(),_0x1c5abc=_0x1e84a1?Math[_0x43c1d7(0xd0)]((_0x2c9d7a-_0x1e84a1)/(0x3e8*0x3c*0x3c*0x18)):null,_0xa7efb0=_0x32142b['winnerUsername']===_0x80b72f['username']?_0x32142b['loserUsername']:_0x32142b['winnerUsername'],_0x2d3e3c=_0x32142b['winnerUsername']===_0x80b72f['username']?'Won':'Lost';return{..._0x80b72f,'lastMatch':{'date':_0x1e84a1?_0x1e84a1[_0x43c1d7(0x2b2)]():'N/A','opponent':_0xa7efb0||'Unknown','result':_0x2d3e3c,'timestamp':_0x1e84a1||new Date(0x0),'daysSinceMatch':_0x1c5abc||Number[_0x43c1d7(0xc1)]}};}else return{..._0x80b72f,'lastMatch':{'date':'Never\x20played','opponent':_0x43c1d7(0x251),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x2ba57a){return console[_0x43c1d7(0x285)]('Error\x20fetching\x20matches\x20for\x20'+_0x80b72f['username']+':',_0x2ba57a),{..._0x80b72f,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x3161bc=await Promise['all'](_0xb9a99);_0x3161bc['sort']((_0x976d03,_0x5818a1)=>_0x5818a1['lastMatch']['daysSinceMatch']-_0x976d03[_0x5166c3(0xe8)]['daysSinceMatch']);_0x4e2e11>0x0&&(_0x3161bc=_0x3161bc['filter'](_0x596158=>_0x596158['lastMatch']['daysSinceMatch']>=_0x4e2e11));_0x2d9006['innerHTML']='';if(_0x3161bc[_0x5166c3(0x153)]===0x0){_0x2d9006['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x3161bc[_0x5166c3(0xed)](_0x4f1f75=>{const _0x3a15bd=_0x5166c3,_0x39411e=document['createElement']('tr'),_0x23393d=_0x4f1f75['lastMatch'][_0x3a15bd(0xfa)]>0x1e?_0x3a15bd(0x109):_0x4f1f75['lastMatch']['daysSinceMatch']>0xe?_0x3a15bd(0x243):'';_0x39411e['className']=_0x23393d,_0x39411e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4f1f75[_0x3a15bd(0x223)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4f1f75['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4f1f75['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4f1f75['lastMatch']['daysSinceMatch']===Number[_0x3a15bd(0xc1)]?'N/A':_0x4f1f75['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4f1f75[_0x3a15bd(0xe8)]['date']==='Never\x20played'?'No\x20matches\x20found':_0x4f1f75['lastMatch'][_0x3a15bd(0x287)]+'\x20vs\x20'+_0x4f1f75['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x4f1f75['username']+_0x3a15bd(0x2f8),_0x2d9006['appendChild'](_0x39411e);}),console[_0x5166c3(0x205)]('Displaying\x20'+_0x3161bc[_0x5166c3(0x153)]+'\x20inactive\x20players');}catch(_0x2094d9){console[_0x5166c3(0x285)](_0x5166c3(0x315),_0x2094d9),_0x2d9006[_0x5166c3(0x308)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x2094d9[_0x5166c3(0x21e)]+_0x5166c3(0x305);}}function setupHighlightButtons(){const _0x2c5a51=a2_0x448c;console[_0x2c5a51(0x205)](_0x2c5a51(0x167));const _0x2d42e1=document[_0x2c5a51(0x10f)]('create-match-highlight-btn');_0x2d42e1&&_0x2d42e1['addEventListener']('click',function(){const _0x2a40f8=_0x2c5a51;console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal(_0x2a40f8(0x230));});const _0x14e362=document['getElementById']('create-creator-highlight-btn');_0x14e362&&_0x14e362['addEventListener']('click',function(){const _0x6da28d=_0x2c5a51;console['log'](_0x6da28d(0x122)),openHighlightModal('creator');});const _0x4725de=document['getElementById']('create-achievement-highlight-btn');_0x4725de&&_0x4725de['addEventListener']('click',function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x14220e='match'){const _0x5f2a6d=a2_0x448c;console[_0x5f2a6d(0x205)]('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x14220e);const _0x55ce8b=document['getElementById']('highlight-modal'),_0x5d7fc9=document['getElementById']('highlight-form'),_0xb13795=document[_0x5f2a6d(0x10f)]('highlight-modal-title'),_0x18f792=document['getElementById']('highlight-id');if(!_0x55ce8b||!_0x5d7fc9||!_0xb13795){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x5d7fc9['reset'](),_0x18f792['value']='';const _0x55c186=['match','creator',_0x5f2a6d(0x1f2)],_0x32d2c3=!_0x55c186['includes'](_0x14220e);if(_0x32d2c3){const _0x423397=_0x14220e;_0x18f792['value']=_0x423397,_0xb13795[_0x5f2a6d(0x2f9)]='Loading...',loadHighlightDataAdmin(_0x423397);}else{const _0x45bc59=_0x14220e;document['getElementById']('highlight-type')[_0x5f2a6d(0x283)]=_0x45bc59,_0xb13795['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x45bc59),toggleHighlightFields(_0x45bc59);const _0x1f87c4=auth['currentUser'];_0x1f87c4&&document[_0x5f2a6d(0x10f)]('highlight-submitted-by')&&(document['getElementById'](_0x5f2a6d(0x1ab))['value']=_0x1f87c4['displayName']||_0x1f87c4[_0x5f2a6d(0xc5)]);}_0x55ce8b['classList']['add'](_0x5f2a6d(0x210));}function toggleHighlightFields(_0x55d477){const _0x52cd40=a2_0x448c;console['log'](_0x52cd40(0xd7)+_0x55d477);const _0xa6c9b5=document[_0x52cd40(0x10f)]('highlight-form');if(!_0xa6c9b5)return;const _0x5716fb=_0xa6c9b5['querySelectorAll'](_0x52cd40(0x1f9));_0x5716fb[_0x52cd40(0xed)](_0x3024cd=>_0x3024cd[_0x52cd40(0x2e0)][_0x52cd40(0x2bc)]='none');const _0x5b64aa=document['getElementById']('highlight-video-preview-container');if(_0x5b64aa)_0x5b64aa['style']['display']='none';const _0x20c698=['highlight-title-container',_0x52cd40(0x236),_0x52cd40(0x22b)];_0x20c698['forEach'](_0x16c8d2=>{const _0x5362b8=_0x52cd40,_0x4c6760=document[_0x5362b8(0x10f)](_0x16c8d2);if(_0x4c6760)_0x4c6760['style'][_0x5362b8(0x2bc)]=_0x5362b8(0x256);});if(_0x55d477===_0x52cd40(0x230)){const _0x3f48d4=['highlight-video-container',_0x52cd40(0xeb),'highlight-map-container','highlight-match-date-container','highlight-players-container',_0x52cd40(0x17a)];_0x3f48d4['forEach'](_0x5ab25d=>{const _0x3109e2=_0x52cd40,_0x8202b9=document['getElementById'](_0x5ab25d);_0x8202b9&&(_0x5ab25d==='highlight-players-container'?_0x8202b9['style'][_0x3109e2(0x2bc)]='flex':_0x8202b9['style']['display']=_0x3109e2(0x256));});const _0x37a04b=document['getElementById']('highlight-video-id');if(_0x37a04b){_0x37a04b[_0x52cd40(0x2e3)]=!![];const _0x312daa=_0x37a04b[_0x52cd40(0x1c4)];if(_0x312daa)_0x312daa[_0x52cd40(0x308)]='YouTube\x20Video\x20ID*';}if(_0x5b64aa)_0x5b64aa['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x55d477==='creator'){const _0x40345a=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x40345a['forEach'](_0x529df7=>{const _0x4b59d4=_0x52cd40,_0x40e3a6=document[_0x4b59d4(0x10f)](_0x529df7);if(_0x40e3a6)_0x40e3a6['style']['display']='block';});const _0x45cb0a=document[_0x52cd40(0x10f)]('highlight-video-id');if(_0x45cb0a){_0x45cb0a['required']=![];const _0xe951c=_0x45cb0a['previousElementSibling'];if(_0xe951c)_0xe951c['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x55d477===_0x52cd40(0x1f2)){const _0x11b681=[_0x52cd40(0x215),_0x52cd40(0x28b),_0x52cd40(0x18b),'highlight-player-profile-container','highlight-achievement-image-container',_0x52cd40(0x2d7)];_0x11b681['forEach'](_0x2cb593=>{const _0x4472bc=_0x52cd40,_0x364dee=document[_0x4472bc(0x10f)](_0x2cb593);if(_0x364dee)_0x364dee['style']['display']='block';});const _0x30f39b=document['getElementById']('highlight-video-id');if(_0x30f39b){_0x30f39b[_0x52cd40(0x2e3)]=![];const _0x8e1c99=_0x30f39b['previousElementSibling'];if(_0x8e1c99)_0x8e1c99['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0xef7226){const _0x3177c3=a2_0x448c;try{const _0x10385f=doc(db,'highlights',_0xef7226),_0x14b50d=await getDoc(_0x10385f);if(!_0x14b50d[_0x3177c3(0x20e)]()){showNotification(_0x3177c3(0x2c2),'error');return;}const _0x2cc79b=_0x14b50d['data'](),_0x5496d3=_0x2cc79b['type']||'match';document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x5496d3),document['getElementById']('highlight-type')['value']=_0x5496d3,toggleHighlightFields(_0x5496d3),document['getElementById']('highlight-title')['value']=_0x2cc79b['title']||'',document['getElementById']('highlight-description')['value']=_0x2cc79b['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x2cc79b['submittedBy']||'';_0x2cc79b['videoId']&&(document['getElementById'](_0x3177c3(0x1b0))['value']=_0x2cc79b[_0x3177c3(0x2de)],updateHighlightVideoPreview());if(_0x5496d3===_0x3177c3(0x230)){document['getElementById']('highlight-match-info')['value']=_0x2cc79b['matchInfo']||'',document['getElementById']('highlight-map')[_0x3177c3(0x283)]=_0x2cc79b['map']||'';if(_0x2cc79b['matchDate']){const _0x438884=new Date(_0x2cc79b['matchDate']['seconds']*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x438884['toISOString']()[_0x3177c3(0xd8)]('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x2cc79b[_0x3177c3(0xd4)]||'',document[_0x3177c3(0x10f)]('highlight-winner-score')['value']=_0x2cc79b['winnerScore']||'',document[_0x3177c3(0x10f)](_0x3177c3(0x30f))['value']=_0x2cc79b['loserName']||'',document['getElementById']('highlight-loser-score')['value']=_0x2cc79b['loserScore']||'',document['getElementById']('highlight-match-link')['value']=_0x2cc79b['matchLink']||'';}else{if(_0x5496d3==='creator')document[_0x3177c3(0x10f)]('highlight-map')[_0x3177c3(0x283)]=_0x2cc79b[_0x3177c3(0x194)]||'',document['getElementById']('highlight-map-creator')[_0x3177c3(0x283)]=_0x2cc79b[_0x3177c3(0x16b)]||'',document['getElementById']('highlight-map-version')['value']=_0x2cc79b['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x2cc79b['creatorImageUrl']||'';else _0x5496d3==='achievement'&&(document[_0x3177c3(0x10f)]('highlight-achievement-player')[_0x3177c3(0x283)]=_0x2cc79b['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x2cc79b['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x2cc79b[_0x3177c3(0x310)]||'',document['getElementById']('highlight-player-profile')['value']=_0x2cc79b['playerProfileUrl']||'',document['getElementById'](_0x3177c3(0xd3))['value']=_0x2cc79b['achievementImageUrl']||'');}}catch(_0x3a081d){console[_0x3177c3(0x285)]('Error\x20loading\x20highlight:',_0x3a081d),showNotification(_0x3177c3(0x14f)+_0x3a081d['message'],_0x3177c3(0x285));}}async function saveHighlight(){const _0x4114d1=a2_0x448c;try{const _0x4e9ef4=document['getElementById']('highlight-id')?.['value']||'',_0x56de43=document['getElementById']('highlight-type')?.[_0x4114d1(0x283)]||'match',_0x352ca2={'title':document['getElementById'](_0x4114d1(0x1ba))?.[_0x4114d1(0x283)]?.[_0x4114d1(0x155)]()||'','description':document[_0x4114d1(0x10f)](_0x4114d1(0x266))?.['value']?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x56de43};if(!_0x352ca2['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x56de43==='match'){_0x352ca2[_0x4114d1(0x2bf)]=document[_0x4114d1(0x10f)]('highlight-match-info')?.['value']?.['trim']()||'',_0x352ca2['map']=document[_0x4114d1(0x10f)](_0x4114d1(0x228))?.['value']?.['trim']()||'';const _0x1551b5=document['getElementById'](_0x4114d1(0x286)),_0xfe6ed8=_0x1551b5?.[_0x4114d1(0x283)]||'';_0x352ca2['matchDate']=_0xfe6ed8?Timestamp['fromDate'](new Date(_0xfe6ed8)):null,_0x352ca2[_0x4114d1(0xd4)]=document['getElementById']('highlight-winner-name')?.[_0x4114d1(0x283)]?.['trim']()||'',_0x352ca2[_0x4114d1(0x245)]=document['getElementById']('highlight-winner-score')?.['value']?.[_0x4114d1(0x155)]()||'',_0x352ca2[_0x4114d1(0x279)]=document['getElementById']('highlight-loser-name')?.[_0x4114d1(0x283)]?.['trim']()||'',_0x352ca2[_0x4114d1(0x119)]=document['getElementById'](_0x4114d1(0x1d8))?.['value']?.[_0x4114d1(0x155)]()||'',_0x352ca2['matchLink']=document['getElementById'](_0x4114d1(0x2af))?.[_0x4114d1(0x283)]?.[_0x4114d1(0x155)]()||'';if(!_0x352ca2['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x56de43==='creator'){_0x352ca2['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x352ca2[_0x4114d1(0x16b)]=document['getElementById'](_0x4114d1(0x127))?.[_0x4114d1(0x283)]?.['trim']()||'',_0x352ca2[_0x4114d1(0x2c6)]=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x352ca2['creatorImageUrl']=document[_0x4114d1(0x10f)]('highlight-creator-image')?.['value']?.['trim']()||'';if(!_0x352ca2[_0x4114d1(0x16b)]){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x56de43==='achievement'){_0x352ca2['achievementPlayer']=document[_0x4114d1(0x10f)]('highlight-achievement-player')?.['value']?.[_0x4114d1(0x155)]()||'',_0x352ca2['achievementType']=document['getElementById']('highlight-achievement-type')?.['value']?.['trim']()||'',_0x352ca2['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.['trim']()||'',_0x352ca2[_0x4114d1(0x229)]=document[_0x4114d1(0x10f)](_0x4114d1(0x25d))?.['value']?.[_0x4114d1(0x155)]()||'',_0x352ca2[_0x4114d1(0x1c5)]=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x352ca2['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x4e9ef4?(_0x352ca2['updatedAt']=serverTimestamp(),await updateDoc(doc(db,_0x4114d1(0x128),_0x4e9ef4),_0x352ca2),showNotification(_0x4114d1(0x297),_0x4114d1(0x214))):(_0x352ca2[_0x4114d1(0x18d)]=serverTimestamp(),await addDoc(collection(db,_0x4114d1(0x128)),_0x352ca2),showNotification(_0x4114d1(0x226),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x10c14b){console['error']('Error\x20saving\x20highlight:',_0x10c14b),showNotification(_0x4114d1(0x2d6)+_0x10c14b['message'],_0x4114d1(0x285));}}function closeHighlightModal(){const _0x80d3c8=a2_0x448c,_0x397b8b=document[_0x80d3c8(0x10f)]('highlight-modal');if(_0x397b8b)_0x397b8b['classList']['remove']('active');}function getHighlightTypeName(_0x37dc05){const _0x678e0b=a2_0x448c;switch(_0x37dc05){case'match':return'Match\x20Highlight';case'creator':return _0x678e0b(0x30b);case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x26ba6b=a2_0x448c,_0xcc9772=document['getElementById']('highlight-video-id'),_0xf8623=document['getElementById']('highlight-video-preview-container'),_0x5353c9=document[_0x26ba6b(0x10f)]('highlight-video-preview');if(!_0xcc9772||!_0x5353c9||!_0xf8623)return;const _0x231974=_0xcc9772['value']['trim']();_0x231974&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x231974)?(_0x5353c9[_0x26ba6b(0x24c)]='https://www.youtube.com/embed/'+_0x231974,_0xf8623['style']['display']=_0x26ba6b(0x256)):(_0x5353c9[_0x26ba6b(0x24c)]='',_0xf8623['style'][_0x26ba6b(0x2bc)]='none');}async function loadHighlightsAdmin(){const _0x1e6154=a2_0x448c,_0x2b8661=document['getElementById']('highlights-table-body');if(!_0x2b8661)return;_0x2b8661[_0x1e6154(0x308)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x3859ce=query(collection(db,_0x1e6154(0x128)),orderBy(_0x1e6154(0x18d),'desc')),_0x417628=await getDocs(_0x3859ce);if(_0x417628['empty']){_0x2b8661['innerHTML']=_0x1e6154(0xd6);return;}_0x2b8661['innerHTML']='',_0x417628['forEach'](_0x538efc=>{const _0x4cd645=_0x1e6154,_0x5b13b0=_0x538efc['data'](),_0x2bdc08=document['createElement']('tr'),_0x2b1e2d=_0x5b13b0['createdAt']?new Date(_0x5b13b0['createdAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';let _0x848305='Unknown',_0x41ed10='';switch(_0x5b13b0[_0x4cd645(0x225)]){case _0x4cd645(0x230):_0x848305='Match',_0x41ed10='match-type';break;case _0x4cd645(0x26f):_0x848305='Creator',_0x41ed10='creator-type';break;case _0x4cd645(0x1f2):_0x848305='Achievement',_0x41ed10=_0x4cd645(0x1d6);break;}_0x2bdc08['innerHTML']=_0x4cd645(0x172)+(_0x5b13b0['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x41ed10+'\x22>'+_0x848305+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2b1e2d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5b13b0['submittedBy']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5b13b0['videoId']?_0x4cd645(0xdc):_0x4cd645(0x17d))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x538efc['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x538efc['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2b8661[_0x4cd645(0x276)](_0x2bdc08);}),document[_0x1e6154(0x1ec)]('.edit-highlight-btn')[_0x1e6154(0xed)](_0x43bf50=>{_0x43bf50['addEventListener']('click',_0x1e5448=>{const _0xd0eb08=a2_0x448c;openHighlightModal(_0x1e5448['currentTarget'][_0xd0eb08(0x318)]['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x34e3c4=>{_0x34e3c4['addEventListener']('click',_0x192f37=>{const _0x54b68c=a2_0x448c;confirmDeleteHighlight(_0x192f37[_0x54b68c(0x126)]['dataset']['id']);});});}catch(_0x348503){console['error']('Error\x20loading\x20highlights:',_0x348503),_0x2b8661[_0x1e6154(0x308)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x348503['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x21ec60){const _0x2d377f=a2_0x448c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x2d377f(0x128),_0x21ec60)),showNotification('Highlight\x20deleted\x20successfully',_0x2d377f(0x214)),loadHighlightsAdmin();}catch(_0x307826){console['error'](_0x2d377f(0x204),_0x307826),showNotification(_0x2d377f(0x125)+_0x307826['message'],_0x2d377f(0x285));}}function setupCreateTestMatchModal(){const _0xf6e856=a2_0x448c;console[_0xf6e856(0x205)]('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0xc65318=document[_0xf6e856(0x10f)](_0xf6e856(0x1c7)),_0x48fd5e=document[_0xf6e856(0x10f)](_0xf6e856(0x2ce));if(!_0xc65318){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x48fd5e){console[_0xf6e856(0x285)]('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x15d5b7=_0xc65318['cloneNode'](!![]);_0xc65318['parentNode']['replaceChild'](_0x15d5b7,_0xc65318);const _0x14eb1d=_0x15d5b7['querySelector']('#create-test-match-form');_0x15d5b7[_0xf6e856(0x24a)]('click',function(_0x448a3f){const _0x14be3a=_0xf6e856;_0x448a3f[_0x14be3a(0x1a6)]===_0x15d5b7&&(console[_0x14be3a(0x205)](_0x14be3a(0x166)),closeCreateTestMatchModal());});const _0x2f76ab=_0x15d5b7['querySelector']('.close-btn');_0x2f76ab&&_0x2f76ab['addEventListener']('click',function(_0x290f55){const _0xe41f26=_0xf6e856;_0x290f55[_0xe41f26(0x2f6)](),_0x290f55['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x53c3a0=_0x15d5b7['querySelector']('#cancel-create-test-match-btn');_0x53c3a0&&_0x53c3a0[_0xf6e856(0x24a)]('click',function(_0x56429f){const _0x32bccf=_0xf6e856;_0x56429f['preventDefault'](),_0x56429f['stopPropagation'](),console[_0x32bccf(0x205)]('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x14eb1d){_0x14eb1d['addEventListener'](_0xf6e856(0x176),function(_0x511123){const _0x3272f1=_0xf6e856;_0x511123[_0x3272f1(0x2f6)](),_0x511123[_0x3272f1(0x262)](),console[_0x3272f1(0x205)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x267b23=_0x14eb1d['querySelector']('button[type=\x22submit\x22]');_0x267b23&&_0x267b23[_0xf6e856(0x24a)]('click',function(_0x3bb0af){const _0x1049b3=_0xf6e856;_0x3bb0af['preventDefault'](),_0x3bb0af['stopPropagation'](),console['log'](_0x1049b3(0x1b9)),createTestMatch();});}console[_0xf6e856(0x205)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x286fcd=a2_0x448c;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x539827=document['getElementById']('highlight-form');_0x539827&&_0x539827[_0x286fcd(0x24a)]('submit',_0x3963d0=>{_0x3963d0['preventDefault'](),saveHighlight();});const _0x15b95a=document['getElementById']('cancel-highlight-btn');_0x15b95a&&_0x15b95a['addEventListener']('click',closeHighlightModal);const _0x5e228b=document['querySelector']('#highlight-modal\x20.close-btn');_0x5e228b&&_0x5e228b['addEventListener']('click',closeHighlightModal);const _0x3a340e=document['getElementById'](_0x286fcd(0x26b));_0x3a340e&&_0x3a340e['addEventListener']('click',_0x4333c6=>{_0x4333c6['target']===_0x3a340e&&closeHighlightModal();});const _0x2ef641=document[_0x286fcd(0x10f)](_0x286fcd(0x1b0));_0x2ef641&&_0x2ef641['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x506dcd=a2_0x448c;console[_0x506dcd(0x205)](_0x506dcd(0xd1));const _0x5cb755=document[_0x506dcd(0x10f)]('matches-prev-page'),_0x3a5c81=document[_0x506dcd(0x10f)](_0x506dcd(0xfd));_0x5cb755&&_0x5cb755['addEventListener']('click',()=>{const _0x29e9fd=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x29e9fd]['page']-0x1);});_0x3a5c81&&_0x3a5c81['addEventListener']('click',()=>{const _0x2d0f11=_0x506dcd,_0x55c7d0=currentLadder[_0x2d0f11(0x171)]();loadMatchesData(matchesPagination[_0x55c7d0][_0x2d0f11(0x2a3)]+0x1);});const _0x4e746b=document['getElementById']('apply-matches-filters'),_0x6357ad=document['getElementById']('reset-matches-filters');_0x4e746b&&_0x4e746b['addEventListener']('click',applyMatchesFilters);_0x6357ad&&_0x6357ad['addEventListener']('click',resetMatchesFilters);const _0xb39ba6=document['getElementById']('matches-search');_0xb39ba6&&_0xb39ba6['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x146861=document['getElementById'](_0x506dcd(0x133));_0x146861&&_0x146861[_0x506dcd(0x24a)]('click',openResimulateModal);const _0x58ba3b=document[_0x506dcd(0x10f)]('resimulate-modal');if(_0x58ba3b){const _0x4b7cb0=_0x58ba3b[_0x506dcd(0xf3)]('.close');_0x4b7cb0&&_0x4b7cb0[_0x506dcd(0x24a)]('click',closeResimulateModal),_0x58ba3b['addEventListener']('click',_0x121493=>{_0x121493['target']===_0x58ba3b&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x5614ab=a2_0x448c;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x11a05d=document[_0x5614ab(0x10f)]('create-test-match-modal'),_0x226d01=document['getElementById']('create-test-match-form');if(!_0x11a05d){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x226d01){console[_0x5614ab(0x285)]('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x226d01['reset']();const _0x4a37f8=document[_0x5614ab(0x1ec)](_0x5614ab(0x1db));let _0x182e28=![];_0x4a37f8['forEach'](_0x163e0d=>{const _0x593928=_0x5614ab;console['log']('Found\x20radio\x20with\x20value:',_0x163e0d['value']),_0x163e0d[_0x593928(0x283)]===currentLadder&&(_0x163e0d['checked']=!![],_0x182e28=!![],console[_0x593928(0x205)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x182e28){console[_0x5614ab(0x1e3)]('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x49ac94=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x49ac94&&(_0x49ac94['checked']=!![],console['log'](_0x5614ab(0x213)));}const _0xb91be0=document['getElementById']('test-match-date');if(_0xb91be0){const _0x5c145c=new Date()['toISOString']()['split']('T')[0x0];_0xb91be0[_0x5614ab(0x283)]=_0x5c145c;}_0x11a05d['style']['display']=_0x5614ab(0x25e),_0x11a05d[_0x5614ab(0x2e0)]['visibility']='visible',_0x11a05d['style']['opacity']='1',_0x11a05d[_0x5614ab(0x1ae)]['add'](_0x5614ab(0x210)),console[_0x5614ab(0x205)]('Modal\x20should\x20now\x20be\x20visible');const _0x534713=document['getElementById']('test-match-winner-username');_0x534713&&setTimeout(()=>{_0x534713['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x1729e4=a2_0x448c;console[_0x1729e4(0x205)](_0x1729e4(0x30e));const _0x192d98=document['getElementById']('create-test-match-modal');if(!_0x192d98){console[_0x1729e4(0x285)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x192d98['classList']['remove']('active'),_0x192d98[_0x1729e4(0x2e0)]['opacity']='0',_0x192d98['style']['visibility']='hidden',setTimeout(()=>{const _0x2503c2=_0x1729e4;!_0x192d98['classList']['contains'](_0x2503c2(0x210))&&(_0x192d98['style']['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x6c429c=a2_0x448c;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x5504c8=auth[_0x6c429c(0x177)];if(!_0x5504c8){showNotification(_0x6c429c(0x2d2),'error');return;}const _0x877882='D1',_0x1a40ed=_0x6c429c(0x1b7),_0x416878={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x6c429c(0x1a4),'loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x6c429c(0x304),'approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x5504c8['email'],'createdAt':serverTimestamp(),'createdBy':_0x5504c8[_0x6c429c(0xc5)],'isTestMatch':!![],'ladder':_0x877882,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x6c429c(0x273)+_0x5504c8['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x1a40ed),_0x416878),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x2267d7){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x2267d7),showNotification(_0x6c429c(0x24e)+_0x2267d7['message'],'error');}}window[a2_0x1d8f77(0x1b5)]=async function(){const _0x2307f6=a2_0x1d8f77;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console[_0x2307f6(0x205)]('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0xd169ff=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0xd169ff);const _0xc76218=query(_0xd169ff,where('username','==',_0x2307f6(0x284)));console[_0x2307f6(0x205)](_0x2307f6(0x1d5),_0xc76218);const _0x1e0c79=await getDocs(_0xc76218);console[_0x2307f6(0x205)]('Query\x20executed.\x20Empty:',_0x1e0c79[_0x2307f6(0x233)]),console[_0x2307f6(0x205)](_0x2307f6(0x2c1));}catch(_0x373a1f){console['error']('Firebase\x20connection\x20test\x20failed:',_0x373a1f);}};function setupCreateTestMatchButton(){const _0x53cf7f=a2_0x1d8f77,_0x460f6e=document[_0x53cf7f(0x10f)]('create-test-match-btn');if(!_0x460f6e){console[_0x53cf7f(0x285)](_0x53cf7f(0xd9));return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0xb5306d=_0x460f6e[_0x53cf7f(0x2dd)](!![]);_0x460f6e['parentNode'][_0x53cf7f(0x1e5)](_0xb5306d,_0x460f6e),_0xb5306d[_0x53cf7f(0x24a)]('click',function(_0x575093){const _0x591c21=_0x53cf7f;_0x575093[_0x591c21(0x2f6)](),_0x575093[_0x591c21(0x262)](),console[_0x591c21(0x205)](_0x591c21(0x2ea)),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x9b0d76=0x1){const _0x511e5c=a2_0x1d8f77,_0x1dabdc=document['getElementById']('matches-table-body');if(!_0x1dabdc)return;_0x1dabdc[_0x511e5c(0x308)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x353a48=currentLadder['toLowerCase'](),_0x341a50=matchesPagination[_0x353a48],_0x588ef8=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0xc9c98b=collection(db,_0x588ef8);_0x9b0d76<=0x1?(_0x341a50['page']=0x1,_0x341a50[_0x511e5c(0x2ad)]=null,_0x341a50['lastVisible']=null):_0x341a50['page']=_0x9b0d76;const _0x49bba2=getMatchesFilters();let _0x4f1535=_0xc9c98b;if(_0x49bba2[_0x511e5c(0xe7)]||_0x49bba2['endDate']||_0x49bba2[_0x511e5c(0x112)]){let _0x3ebf24=[];_0x49bba2[_0x511e5c(0xe7)]&&_0x49bba2['endDate']?(_0x3ebf24['push'](where(_0x511e5c(0x123),'>=',_0x49bba2[_0x511e5c(0xe7)]),where('approvedAt','<=',_0x49bba2[_0x511e5c(0x18c)])),_0x4f1535=query(_0xc9c98b,..._0x3ebf24)):_0x4f1535=query(_0xc9c98b,orderBy(_0x511e5c(0x123),'desc'));}else _0x4f1535=query(_0xc9c98b,orderBy('approvedAt',_0x511e5c(0x103)));_0x9b0d76>0x1&&_0x341a50['lastVisible']?_0x4f1535=query(_0x4f1535,startAfter(_0x341a50['lastVisible']),limit(PAGE_SIZE)):_0x4f1535=query(_0x4f1535,limit(PAGE_SIZE));const _0x174e92=await getDocs(_0x4f1535);!_0x174e92['empty']&&(_0x341a50[_0x511e5c(0x2ad)]=_0x174e92[_0x511e5c(0x116)][0x0],_0x341a50['lastVisible']=_0x174e92['docs'][_0x174e92['docs']['length']-0x1]);let _0x20383d=![];if(!_0x174e92['empty']){const _0x53bde6=query(_0x4f1535,startAfter(_0x341a50['lastVisible']),limit(0x1)),_0x25ffa0=await getDocs(_0x53bde6);_0x20383d=!_0x25ffa0['empty'];}const _0x2e9c2b=document[_0x511e5c(0x10f)]('matches-prev-page'),_0x5d02e6=document[_0x511e5c(0x10f)]('matches-next-page'),_0x199060=document[_0x511e5c(0x10f)]('matches-page-indicator');if(_0x2e9c2b)_0x2e9c2b['disabled']=_0x341a50['page']<=0x1;if(_0x5d02e6)_0x5d02e6['disabled']=!_0x20383d;if(_0x199060)_0x199060[_0x511e5c(0x2f9)]='Page\x20'+_0x341a50['page'];if(_0x174e92['empty']){_0x1dabdc['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x1dabdc['innerHTML']='',_0x174e92['forEach'](_0x3115c2=>{const _0x14a8dc=_0x511e5c,_0x2ac063=_0x3115c2[_0x14a8dc(0x21d)](),_0x2ac2a0=document[_0x14a8dc(0x1fc)]('tr'),_0xeb8167=_0x2ac063[_0x14a8dc(0x123)]?new Date(_0x2ac063[_0x14a8dc(0x123)]['seconds']*0x3e8)[_0x14a8dc(0x2b2)]():'N/A';_0x2ac2a0['setAttribute']('data-id',_0x3115c2['id']),_0x2ac2a0['setAttribute']('data-ladder',currentLadder),_0x2ac2a0['classList']['add'](_0x14a8dc(0x26e)),_0x2ac2a0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xeb8167+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x2ac063['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x2ac063['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x2ac063['winnerScore']||0x0)+'\x20-\x20'+(_0x2ac063[_0x14a8dc(0x119)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x2ac063['mapPlayed']||_0x14a8dc(0x251))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x3115c2['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x3115c2['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1dabdc['appendChild'](_0x2ac2a0);}),setupMatchesActionButtons(),_0x49bba2[_0x511e5c(0x112)]&&filterMatchesTable(),console['log']('Loaded\x20'+_0x174e92[_0x511e5c(0xc2)]+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x341a50['page']);}catch(_0x50e726){console['error']('Error\x20loading\x20matches:',_0x50e726),_0x1dabdc[_0x511e5c(0x308)]=_0x511e5c(0x13b)+_0x50e726[_0x511e5c(0x21e)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x4b77cf,_0x17d015){const _0x57c44d=a2_0x1d8f77;try{console['log']('Deleting\x20match\x20'+_0x4b77cf+'\x20from\x20'+_0x17d015+_0x57c44d(0xe1));const _0x21a583=auth['currentUser'];if(!_0x21a583){showNotification(_0x57c44d(0x1f6),'error');return;}const _0x11c790=_0x17d015==='D1'?'approvedMatches':_0x17d015==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log'](_0x57c44d(0x1b3)+_0x11c790),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x11c790,_0x4b77cf)),console['log']('Match\x20deleted\x20successfully'),showNotification(_0x57c44d(0x1f3),'success');const _0xb972c6=_0x17d015[_0x57c44d(0x171)]();loadMatchesData(matchesPagination[_0xb972c6][_0x57c44d(0x2a3)]);}catch(_0x22e636){console[_0x57c44d(0x285)](_0x57c44d(0x11b),_0x22e636),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x22e636[_0x57c44d(0x21e)],'error');}}function setupMatchesActionButtons(){const _0x4d4e7b=a2_0x1d8f77;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll'](_0x4d4e7b(0x1c8))['forEach'](_0x20769d=>{const _0x9fa86d=_0x4d4e7b;_0x20769d['addEventListener'](_0x9fa86d(0x14c),_0x1f033d=>{const _0x35d836=_0x9fa86d;_0x1f033d[_0x35d836(0x2f6)](),_0x1f033d['stopPropagation']();const _0x3656d2=_0x1f033d['currentTarget']['dataset']['id'],_0x2d553f=_0x1f033d['currentTarget']['closest']('tr'),_0x305303=_0x2d553f['dataset'][_0x35d836(0x13a)];console[_0x35d836(0x205)]('Edit\x20match\x20clicked:',_0x3656d2,_0x305303),openEditMatchModal(_0x3656d2,_0x305303);});}),document['querySelectorAll']('.delete-match-btn')[_0x4d4e7b(0xed)](_0x4582da=>{const _0x2e4dc9=_0x4d4e7b;_0x4582da[_0x2e4dc9(0x24a)](_0x2e4dc9(0x14c),_0xe90211=>{const _0x42b41c=_0x2e4dc9;_0xe90211['preventDefault'](),_0xe90211['stopPropagation']();const _0x420e4c=_0xe90211['currentTarget'][_0x42b41c(0x318)]['id'],_0x4947e1=_0xe90211['currentTarget']['closest']('tr'),_0x405f5c=_0x4947e1[_0x42b41c(0x318)]['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x420e4c,_0x405f5c),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x420e4c,_0x405f5c);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x3a51de=a2_0x1d8f77,_0x1807d1=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x3374fe=document['querySelectorAll'](_0x3a51de(0x2f3));let _0x450f4a=0x0;_0x3374fe['forEach'](_0x32630a=>{const _0x324cc1=_0x3a51de;if(_0x32630a['classList']['contains']('loading-cell')||_0x32630a['classList'][_0x324cc1(0xe9)]('empty-state')||_0x32630a[_0x324cc1(0x1ae)]['contains'](_0x324cc1(0x249)))return;const _0x5eb602=_0x32630a['cells'][0x1]['textContent']['toLowerCase'](),_0x50223f=_0x32630a['cells'][0x2]['textContent'][_0x324cc1(0x171)](),_0x23f1be=_0x32630a['cells'][0x4]['textContent'][_0x324cc1(0x171)]();_0x5eb602['includes'](_0x1807d1)||_0x50223f['includes'](_0x1807d1)||_0x23f1be[_0x324cc1(0x2e5)](_0x1807d1)?(_0x32630a['style']['display']='',_0x450f4a++):_0x32630a['style']['display']='none';});if(_0x450f4a===0x0&&_0x3374fe[_0x3a51de(0x153)]>0x0){const _0x4aec5c=document['getElementById'](_0x3a51de(0x114)),_0x32c9a6=_0x4aec5c[_0x3a51de(0xf3)]('.no-results');if(!_0x32c9a6){const _0x20dfa2=document['createElement']('tr');_0x20dfa2['className']=_0x3a51de(0x1ce),_0x20dfa2['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x1807d1+_0x3a51de(0x1a0),_0x4aec5c[_0x3a51de(0x276)](_0x20dfa2);}}else{const _0x770603=document['querySelector'](_0x3a51de(0xbd));_0x770603&&_0x770603[_0x3a51de(0xbb)]();}}function getMatchesFilters(){const _0x1d5bcb=a2_0x1d8f77,_0x265689=document['getElementById'](_0x1d5bcb(0x139))[_0x1d5bcb(0x283)]['toLowerCase'](),_0x2c64f0=document['getElementById']('matches-start-date')['value'],_0x956bfc=document['getElementById']('matches-end-date')[_0x1d5bcb(0x283)];let _0x397a42=null,_0x4f4a97=null;return _0x2c64f0&&(_0x397a42=new Date(_0x2c64f0),_0x397a42['setHours'](0x0,0x0,0x0,0x0),_0x397a42=Timestamp['fromDate'](_0x397a42)),_0x956bfc&&(_0x4f4a97=new Date(_0x956bfc),_0x4f4a97[_0x1d5bcb(0x11d)](0x17,0x3b,0x3b,0x3e7),_0x4f4a97=Timestamp['fromDate'](_0x4f4a97)),{'searchTerm':_0x265689,'startDate':_0x397a42,'endDate':_0x4f4a97};}async function applyMatchesFilters(){const _0x3413de=currentLadder['toLowerCase']();matchesPagination[_0x3413de]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x20e86a=a2_0x1d8f77;document[_0x20e86a(0x10f)](_0x20e86a(0xe4))['value']='',document[_0x20e86a(0x10f)]('matches-end-date')['value']='',document['getElementById']('matches-search')['value']='';const _0x1eea2b=currentLadder['toLowerCase']();matchesPagination[_0x1eea2b]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x31f20d,_0x3589de){const _0x34d790=a2_0x1d8f77,_0x1befdc=document['getElementById']('edit-match-modal');if(!_0x1befdc)return;try{const _0x1491d0=_0x3589de==='D1'?'approvedMatches':_0x3589de==='D2'?_0x34d790(0x1be):'approvedMatchesD3',_0x4ac2c6=doc(db,_0x1491d0,_0x31f20d),_0x55a0fa=await getDoc(_0x4ac2c6);if(!_0x55a0fa['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x5b3f9f=_0x55a0fa[_0x34d790(0x21d)]();document['getElementById']('edit-match-id')['value']=_0x31f20d,document[_0x34d790(0x10f)]('edit-match-ladder')[_0x34d790(0x283)]=_0x3589de,document[_0x34d790(0x10f)]('edit-match-winner')['value']=_0x5b3f9f['winnerUsername']||'',document[_0x34d790(0x10f)](_0x34d790(0x100))[_0x34d790(0x283)]=_0x5b3f9f['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0x5b3f9f['winnerSuicides']||0x0,document[_0x34d790(0x10f)]('edit-match-winner-comment')[_0x34d790(0x283)]=_0x5b3f9f['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x5b3f9f['loserUsername']||'',document[_0x34d790(0x10f)](_0x34d790(0xf9))['value']=_0x5b3f9f[_0x34d790(0x119)]||0x0,document['getElementById']('edit-match-loser-suicides')[_0x34d790(0x283)]=_0x5b3f9f['loserSuicides']||0x0,document[_0x34d790(0x10f)](_0x34d790(0x143))[_0x34d790(0x283)]=_0x5b3f9f['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0x5b3f9f['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')[_0x34d790(0x283)]=_0x5b3f9f['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0x5b3f9f['loserDemoLink']||_0x5b3f9f['demoLink']||'',document['getElementById']('edit-match-title')['textContent']=_0x34d790(0xdf)+_0x5b3f9f[_0x34d790(0x137)]+_0x34d790(0xd2)+_0x5b3f9f['loserUsername'],_0x1befdc['classList']['add']('active');}catch(_0x5d92d7){console['error']('Error\x20loading\x20match\x20data:',_0x5d92d7),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x14da73=a2_0x1d8f77,_0x3c987c=document['getElementById']('edit-match-modal');_0x3c987c&&_0x3c987c['classList'][_0x14da73(0xbb)]('active');}async function saveEditedMatch(){const _0x382932=a2_0x1d8f77;try{const _0x2e4d24=document[_0x382932(0x10f)]('edit-match-id')['value'],_0x41500c=document[_0x382932(0x10f)]('edit-match-ladder')['value'];if(!_0x2e4d24||!_0x41500c){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x386699=_0x41500c==='D1'?'approvedMatches':_0x41500c==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x370eeb=document['getElementById'](_0x382932(0x2d0))['value'][_0x382932(0x155)](),_0x44bdd5=parseInt(document['getElementById'](_0x382932(0x100))[_0x382932(0x283)]),_0x4b0c3a=parseInt(document['getElementById']('edit-match-winner-suicides')[_0x382932(0x283)]),_0x553848=document['getElementById']('edit-match-winner-comment')['value'][_0x382932(0x155)](),_0x10235c=document[_0x382932(0x10f)](_0x382932(0x26a))['value']['trim'](),_0x3d86b9=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x328db8=parseInt(document['getElementById'](_0x382932(0x24b))['value']),_0x29bf42=document['getElementById']('edit-match-loser-comment')[_0x382932(0x283)]['trim'](),_0x47420f=document['getElementById']('edit-match-map')['value'][_0x382932(0x155)](),_0x164cc6=document[_0x382932(0x10f)]('edit-match-winner-demo')['value']['trim'](),_0x5ba9dd=document[_0x382932(0x10f)]('edit-match-loser-demo')['value'][_0x382932(0x155)]();if(!_0x370eeb||!_0x10235c){showNotification(_0x382932(0x138),_0x382932(0x285));return;}await updateDoc(doc(db,_0x386699,_0x2e4d24),{'winnerUsername':_0x370eeb,'winnerScore':_0x44bdd5,'winnerSuicides':_0x4b0c3a,'winnerComment':_0x553848,'loserUsername':_0x10235c,'loserScore':_0x3d86b9,'loserSuicides':_0x328db8,'loserComment':_0x29bf42,'mapPlayed':_0x47420f,'winnerDemoLink':_0x164cc6||null,'loserDemoLink':_0x5ba9dd||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x41500c['toLowerCase']()][_0x382932(0x2a3)]);}catch(_0x210757){console[_0x382932(0x285)]('Error\x20saving\x20match:',_0x210757),showNotification(_0x382932(0x115)+_0x210757[_0x382932(0x21e)],'error');}}async function openDeleteMatchModal(_0x4f67b9,_0x1bfaa8){const _0x32d945=a2_0x1d8f77;try{const _0x31f3ab=_0x1bfaa8==='D1'?_0x32d945(0x1b7):_0x1bfaa8==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1273db=doc(db,_0x31f3ab,_0x4f67b9),_0x3da0be=await getDoc(_0x1273db);if(!_0x3da0be[_0x32d945(0x20e)]()){showNotification('Match\x20not\x20found','error');return;}const _0x596fd4=_0x3da0be[_0x32d945(0x21d)](),_0x1b1e4b=document[_0x32d945(0x10f)]('delete-match-confirm-modal');_0x1b1e4b['dataset']['matchId']=_0x4f67b9,_0x1b1e4b[_0x32d945(0x318)]['ladder']=_0x1bfaa8;const _0xd8c378=_0x596fd4['approvedAt']?new Date(_0x596fd4['approvedAt']['seconds']*0x3e8)[_0x32d945(0x2b2)]():'N/A',_0x57a510=document['getElementById']('delete-match-summary');_0x57a510['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0xd8c378+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x596fd4['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x596fd4[_0x32d945(0x120)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x596fd4['winnerScore']||0x0)+_0x32d945(0x20d)+(_0x596fd4['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x596fd4['mapPlayed']||_0x32d945(0x251))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x1bfaa8+_0x32d945(0x185),_0x1b1e4b['classList']['add']('active');}catch(_0x22c162){console['error'](_0x32d945(0x1fb),_0x22c162),showNotification(_0x32d945(0x311),_0x32d945(0x285));}}function closeDeleteMatchModal(){const _0x3307fe=a2_0x1d8f77,_0x59475f=document[_0x3307fe(0x10f)]('delete-match-confirm-modal');_0x59475f&&(_0x59475f['classList']['remove']('active'),_0x59475f['removeAttribute']('data-match-id'),_0x59475f['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x3ede65=a2_0x1d8f77,_0x1831eb=document[_0x3ede65(0x10f)](_0x3ede65(0xef)),_0x28db38=_0x1831eb['dataset'][_0x3ede65(0x2e4)],_0x76b657=_0x1831eb['dataset']['ladder'];if(!_0x28db38||!_0x76b657){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0xd2b33c=_0x76b657==='D1'?'approvedMatches':_0x76b657==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0xd2b33c,_0x28db38)),showNotification(_0x3ede65(0x1f3),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x76b657['toLowerCase']()][_0x3ede65(0x2a3)]);}catch(_0x465411){console[_0x3ede65(0x285)]('Error\x20deleting\x20match:',_0x465411),showNotification(_0x3ede65(0x15c)+_0x465411[_0x3ede65(0x21e)],'error');}}async function saveHighlightChanges(){const _0x22866b=a2_0x1d8f77,_0x48548b=document['getElementById']('edit-highlight-id')['value'],_0x4fd457=document[_0x22866b(0x10f)](_0x22866b(0x232))['value'];let _0x1e7717={'title':document['getElementById']('edit-highlight-title-input')['value'][_0x22866b(0x155)](),'type':_0x4fd457,'description':document['getElementById']('edit-highlight-description-input')['value']['trim'](),'videoId':document[_0x22866b(0x10f)]('edit-highlight-videoId-input')['value'][_0x22866b(0x155)](),'submittedBy':auth[_0x22866b(0x177)]['email']};if(_0x4fd457==='match'){_0x1e7717['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')['value'][_0x22866b(0x155)](),_0x1e7717['map']=document[_0x22866b(0x10f)]('edit-highlight-map-input')[_0x22866b(0x283)]['trim']();const _0x15a0fb=document['getElementById'](_0x22866b(0x2ff))['value'];_0x1e7717['matchDate']=_0x15a0fb?Timestamp[_0x22866b(0x303)](new Date(_0x15a0fb)):null,_0x1e7717['winnerName']=document['getElementById'](_0x22866b(0x25b))['value'][_0x22866b(0x155)](),_0x1e7717[_0x22866b(0x245)]=document[_0x22866b(0x10f)](_0x22866b(0x165))[_0x22866b(0x283)]['trim'](),_0x1e7717['loserName']=document['getElementById']('edit-highlight-loserName-input')[_0x22866b(0x283)]['trim'](),_0x1e7717['loserScore']=document['getElementById']('edit-highlight-loserScore-input')[_0x22866b(0x283)]['trim'](),_0x1e7717['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x1e7717['mapCreator']=null,_0x1e7717['mapVersion']=null,_0x1e7717['creatorImageUrl']=null,_0x1e7717['achievementPlayer']=null,_0x1e7717['achievementType']=null,_0x1e7717['achievementDetails']=null,_0x1e7717['playerProfileUrl']=null;}else{if(_0x4fd457==='creator')_0x1e7717[_0x22866b(0x194)]=document['getElementById']('edit-highlight-map-input')[_0x22866b(0x283)][_0x22866b(0x155)](),_0x1e7717['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value'][_0x22866b(0x155)](),_0x1e7717['mapVersion']=document[_0x22866b(0x10f)](_0x22866b(0x1e4))['value'][_0x22866b(0x155)](),_0x1e7717['creatorImageUrl']=document['getElementById'](_0x22866b(0x162))[_0x22866b(0x283)]['trim'](),_0x1e7717['matchInfo']=null,_0x1e7717['matchDate']=null,_0x1e7717['winnerName']=null,_0x1e7717['winnerScore']=null,_0x1e7717['loserName']=null,_0x1e7717[_0x22866b(0x119)]=null,_0x1e7717['matchLink']=null,_0x1e7717['achievementPlayer']=null,_0x1e7717['achievementType']=null,_0x1e7717['achievementDetails']=null,_0x1e7717['playerProfileUrl']=null;else _0x4fd457==='achievement'&&(_0x1e7717['achievementPlayer']=document[_0x22866b(0x10f)]('edit-highlight-achievementPlayer-input')['value'][_0x22866b(0x155)](),_0x1e7717[_0x22866b(0x14e)]=document['getElementById']('edit-highlight-achievementType-input')[_0x22866b(0x283)]['trim'](),_0x1e7717['achievementDetails']=document[_0x22866b(0x10f)](_0x22866b(0x269))[_0x22866b(0x283)][_0x22866b(0x155)](),_0x1e7717['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')[_0x22866b(0x283)]['trim'](),_0x1e7717['matchInfo']=null,_0x1e7717[_0x22866b(0x194)]=null,_0x1e7717['matchDate']=null,_0x1e7717[_0x22866b(0xd4)]=null,_0x1e7717[_0x22866b(0x245)]=null,_0x1e7717['loserName']=null,_0x1e7717['loserScore']=null,_0x1e7717['matchLink']=null,_0x1e7717['mapCreator']=null,_0x1e7717[_0x22866b(0x2c6)]=null,_0x1e7717[_0x22866b(0x12e)]=null);}try{if(_0x48548b){_0x1e7717['updatedAt']=serverTimestamp();const _0x26ad62=doc(db,'highlights',_0x48548b);await updateDoc(_0x26ad62,_0x1e7717),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x1e7717[_0x22866b(0x18d)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x1e7717),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x386884){console[_0x22866b(0x285)](_0x22866b(0x1d2),_0x386884),showNotification(_0x22866b(0x2d6)+_0x386884[_0x22866b(0x21e)],'error');}}async function resimulateMatch(){const _0x4a5ec6=a2_0x1d8f77;try{const _0x2299e=document[_0x4a5ec6(0x10f)]('resimulate-match-id')[_0x4a5ec6(0x283)];if(!_0x2299e){showNotification(_0x4a5ec6(0x1ff),'error');return;}const _0x457349=auth['currentUser'];if(!_0x457349){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x1ccb0c=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x59e6ad=doc(db,_0x1ccb0c,_0x2299e),_0x343f0f=await getDoc(_0x59e6ad);if(!_0x343f0f['exists']()){showNotification(_0x4a5ec6(0x136),'error');return;}const _0x25b58b=_0x343f0f['data'](),_0x142a9a=_0x25b58b[_0x4a5ec6(0x123)]?_0x25b58b['approvedAt'][_0x4a5ec6(0x1a7)]()[_0x4a5ec6(0x10d)]():_0x25b58b['matchDate']?_0x25b58b[_0x4a5ec6(0x2e1)][_0x4a5ec6(0x1a7)]?_0x25b58b['matchDate'][_0x4a5ec6(0x1a7)]()['toLocaleString']():new Date(_0x25b58b['matchDate'])['toLocaleString']():_0x4a5ec6(0x178),_0x82ab86='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x25b58b[_0x4a5ec6(0x137)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x25b58b['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x25b58b[_0x4a5ec6(0x245)]+'-'+_0x25b58b[_0x4a5ec6(0x119)]+_0x4a5ec6(0x102)+(_0x25b58b['mapPlayed']||_0x25b58b[_0x4a5ec6(0xf2)]||_0x4a5ec6(0x178))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x142a9a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x2299e+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')[_0x4a5ec6(0x308)]=_0x82ab86,document['getElementById'](_0x4a5ec6(0x1ef))[_0x4a5ec6(0x2e0)]['display']='block',document[_0x4a5ec6(0x10f)]('confirm-resimulate-btn')['style'][_0x4a5ec6(0x2bc)]=_0x4a5ec6(0x256),window[_0x4a5ec6(0x2ba)]={'matchId':_0x2299e,'matchData':_0x25b58b,'ladder':currentLadder},showNotification(_0x4a5ec6(0x173),'info');}catch(_0x1dcc23){console['error']('Error\x20finding\x20match:',_0x1dcc23),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x1dcc23[_0x4a5ec6(0x21e)],'error');}}async function confirmResimulateMatch(){const _0x2789b9=a2_0x1d8f77;try{const {matchId:_0x43565f,matchData:_0x3af1b3,ladder:_0x32955d}=window['pendingResimulateData'];if(!_0x43565f||!_0x3af1b3){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x51879e=_0x32955d==='D1'?'players':_0x32955d==='D2'?'playersD2':_0x2789b9(0x2df),_0x2c398c=_0x32955d==='D1'?'eloHistory':_0x32955d==='D2'?_0x2789b9(0x1b8):_0x2789b9(0x317),[_0x241573,_0x2b4d90]=await Promise['all']([getDocs(query(collection(db,_0x51879e),where('username','==',_0x3af1b3['winnerUsername']))),getDocs(query(collection(db,_0x51879e),where('username','==',_0x3af1b3['loserUsername'])))]);if(_0x241573['empty']||_0x2b4d90[_0x2789b9(0x233)]){showNotification('Could\x20not\x20find\x20player\x20documents',_0x2789b9(0x285));return;}const _0x425264=_0x241573['docs'][0x0]['id'],_0xa9f9e6=_0x2b4d90['docs'][0x0]['id'],_0x306db5=_0x241573[_0x2789b9(0x116)][0x0]['data'](),_0x1e7e6f=_0x2b4d90['docs'][0x0]['data'](),[_0x1f132d,_0xe33635]=await Promise['all']([getDocs(query(collection(db,_0x2c398c),where('playerId','==',_0x425264),where('matchId','==',_0x43565f))),getDocs(query(collection(db,_0x2c398c),where(_0x2789b9(0x192),'==',_0xa9f9e6),where(_0x2789b9(0x2e4),'==',_0x43565f)))]),_0x543c42=!_0x1f132d['empty'],_0x1f4dea=!_0xe33635['empty'],_0x427bff=_0x2789b9(0x263)+(_0x543c42?_0x2789b9(0x307):'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x1f4dea?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x306db5['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x1e7e6f['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x306db5[_0x2789b9(0x132)]||_0x2789b9(0x178))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x1e7e6f['position']||_0x2789b9(0x178))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x427bff,document['getElementById']('validation-results-container')['style'][_0x2789b9(0x2bc)]='block';if(_0x543c42&&_0x1f4dea){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification(_0x2789b9(0xc0),'info');const _0x278d25=_0x3af1b3['approvedAt']||_0x3af1b3['matchDate']||serverTimestamp(),[_0x1cf31a,_0x50ac0d]=await Promise[_0x2789b9(0x2f0)]([getPlayerEloAtTime(_0x425264,_0x278d25,_0x2c398c),getPlayerEloAtTime(_0xa9f9e6,_0x278d25,_0x2c398c)]),{calculateElo:_0x360c2a}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x10e448,newLoserRating:_0x313a8e}=_0x360c2a(_0x1cf31a,_0x50ac0d),_0x2c54c7=_0x306db5['position']||Number['MAX_SAFE_INTEGER'],_0x38beab=_0x1e7e6f['position']||Number['MAX_SAFE_INTEGER'];let _0x4aa66d=_0x2c54c7,_0x319459=_0x38beab;_0x2c54c7>_0x38beab&&(_0x4aa66d=_0x38beab,_0x319459=_0x38beab+0x1);const _0x25f9ee=writeBatch(db),_0x1a54d8=doc(db,_0x51879e,_0x425264);_0x25f9ee['update'](_0x1a54d8,{'eloRating':_0x10e448,'position':_0x4aa66d,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0xb24d66=doc(db,_0x51879e,_0xa9f9e6);_0x25f9ee['update'](_0xb24d66,{'eloRating':_0x313a8e,'position':_0x319459,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x2c54c7>_0x38beab){const _0xad1a03=await getDocs(query(collection(db,_0x51879e),where('position','>',_0x38beab),where('position','<',_0x2c54c7)));_0xad1a03['forEach'](_0x4cfe80=>{const _0x3e383f=doc(db,_0x51879e,_0x4cfe80['id']),_0xe4cfb9=_0x4cfe80['data']()['position'];_0x25f9ee['update'](_0x3e383f,{'position':_0xe4cfb9+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x543c42){const _0x13482e=doc(collection(db,_0x2c398c));_0x25f9ee['set'](_0x13482e,{'playerId':_0x425264,'player':_0x3af1b3['winnerUsername'],'previousElo':_0x1cf31a,'newElo':_0x10e448,'eloChange':_0x10e448-_0x1cf31a,'opponentId':_0xa9f9e6,'opponent':_0x3af1b3[_0x2789b9(0x120)],'matchResult':'win','previousPosition':_0x2c54c7,'newPosition':_0x4aa66d,'positionChange':_0x4aa66d-_0x2c54c7,'matchId':_0x43565f,'timestamp':_0x278d25,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x32955d,'matchScore':_0x3af1b3['winnerScore']+'-'+_0x3af1b3['loserScore'],'mapPlayed':_0x3af1b3['mapPlayed']||_0x3af1b3[_0x2789b9(0xf2)]||'Unknown','note':_0x2789b9(0x159)});}if(!_0x1f4dea){const _0x414a98=doc(collection(db,_0x2c398c));_0x25f9ee['set'](_0x414a98,{'playerId':_0xa9f9e6,'player':_0x3af1b3['loserUsername'],'previousElo':_0x50ac0d,'newElo':_0x313a8e,'eloChange':_0x313a8e-_0x50ac0d,'opponentId':_0x425264,'opponent':_0x3af1b3['winnerUsername'],'matchResult':'loss','previousPosition':_0x38beab,'newPosition':_0x319459,'positionChange':_0x319459-_0x38beab,'matchId':_0x43565f,'timestamp':_0x278d25,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x32955d,'matchScore':_0x3af1b3[_0x2789b9(0x245)]+'-'+_0x3af1b3['loserScore'],'mapPlayed':_0x3af1b3['mapPlayed']||_0x3af1b3['mapName']||_0x2789b9(0x178),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x530c4f=_0x32955d==='D1'?'approvedMatches':_0x32955d==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x96e562=doc(db,_0x530c4f,_0x43565f);_0x25f9ee['update'](_0x96e562,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x2789b9(0x177)]['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x306db5['eloRating'],'originalLoserElo':_0x1e7e6f['eloRating'],'originalWinnerPosition':_0x2c54c7,'originalLoserPosition':_0x38beab,'resimulatedWinnerElo':_0x10e448,'resimulatedLoserElo':_0x313a8e,'resimulatedWinnerPosition':_0x4aa66d,'resimulatedLoserPosition':_0x319459}),await _0x25f9ee[_0x2789b9(0x313)]();const _0x12f0fc=(!_0x543c42?0x1:0x0)+(!_0x1f4dea?0x1:0x0),_0x7fdc11=_0x2c54c7!==_0x4aa66d||_0x38beab!==_0x319459;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x12f0fc+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x1cf31a+''+_0x10e448+'\x20(+'+(_0x10e448-_0x1cf31a)+'),\x20')+(_0x2789b9(0x2be)+_0x50ac0d+''+_0x313a8e+'\x20('+(_0x313a8e-_0x50ac0d)+').\x20')+(''+(_0x7fdc11?_0x2789b9(0x28d)+_0x2c54c7+''+_0x4aa66d+',\x20Loser\x20'+_0x38beab+''+_0x319459:_0x2789b9(0x2cc))),'success'),closeResimulateModal(),document[_0x2789b9(0xf3)]('#players.content-section.active')&&loadPlayersData();}catch(_0x1a560d){console[_0x2789b9(0x285)]('Error\x20resimulating\x20match:',_0x1a560d),showNotification(_0x2789b9(0xe0)+_0x1a560d['message'],_0x2789b9(0x285));}}async function getPlayerEloAtTime(_0x370f60,_0x106337,_0x5b6a28){const _0x30a842=a2_0x1d8f77;try{const _0x29ebeb=_0x106337[_0x30a842(0x1a7)]?_0x106337['toDate']():new Date(_0x106337),_0x5945ea=query(collection(db,_0x5b6a28),where(_0x30a842(0x192),'==',_0x370f60),where(_0x30a842(0x151),'<',_0x106337),orderBy(_0x30a842(0x151),'desc'),limit(0x1)),_0x15c688=await getDocs(_0x5945ea);if(!_0x15c688['empty']){const _0x27a8b3=_0x15c688['docs'][0x0][_0x30a842(0x21d)]();return console[_0x30a842(0x205)](_0x30a842(0x254)+_0x370f60+'\x20before\x20match:\x20'+_0x27a8b3['newElo']),_0x27a8b3['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x370f60+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x448824){return console[_0x30a842(0x285)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x370f60+':',_0x448824),0x4b0;}}function openResimulateModal(){const _0x220fc9=a2_0x1d8f77;console['log'](_0x220fc9(0x12a));const _0x2eef30=document[_0x220fc9(0x10f)]('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x2eef30);if(!_0x2eef30){console[_0x220fc9(0x285)]('Modal\x20element\x20not\x20found!');return;}_0x2eef30['style']['display']='block',_0x2eef30['style']['visibility']=_0x220fc9(0x26c),_0x2eef30['style'][_0x220fc9(0x248)]='1',_0x2eef30['classList']['add']('active'),console[_0x220fc9(0x205)]('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window[_0x220fc9(0x231)](_0x2eef30)['display']);const _0x2f6a8b=document[_0x220fc9(0x10f)]('match-details-container'),_0x562bc1=document['getElementById']('validation-results-container'),_0x5799f7=document[_0x220fc9(0x10f)]('confirm-resimulate-btn'),_0x4fda5c=document['getElementById'](_0x220fc9(0x19b));if(_0x2f6a8b)_0x2f6a8b[_0x220fc9(0x308)]='';if(_0x562bc1)_0x562bc1[_0x220fc9(0x308)]='';if(_0x5799f7)_0x5799f7['style'][_0x220fc9(0x2bc)]='none';if(_0x4fda5c)_0x4fda5c['value']='';console[_0x220fc9(0x205)]('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x75a4fb=a2_0x1d8f77;document['getElementById'](_0x75a4fb(0x2bb))['style'][_0x75a4fb(0x2bc)]=_0x75a4fb(0x2c0),window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x24cfa6=a2_0x1d8f77;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x24cfa6(0x2a9),'success');}catch(_0xac5661){console['error']('Error\x20loading\x20points\x20data:',_0xac5661),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0xac5661['message'],'error');}}function renderPointsOverview(_0x37f148){const _0x109066=document['getElementById']('points-overview-table-body');if(!_0x109066)return;if(_0x37f148['length']===0x0){_0x109066['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x109066['innerHTML']='',_0x37f148['forEach'](_0x198554=>{const _0x48fc86=a2_0x448c,_0x5b051a=document[_0x48fc86(0x1fc)]('tr'),_0x5f3715=_0x198554['displayName']||_0x198554[_0x48fc86(0x223)]||'Unknown\x20User',_0x1162e1=_0x198554['email']||_0x48fc86(0x281),_0x18fe04=_0x198554['points']||0x0,_0x2c7269=_0x198554['lastPointsModified']?new Date(_0x198554['lastPointsModified'][_0x48fc86(0x306)]*0x3e8)[_0x48fc86(0x2b2)]():'Never';_0x5b051a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x5f3715+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1162e1+_0x48fc86(0x2e9)+(_0x18fe04>0x3e8?_0x48fc86(0x14b):_0x18fe04>0x1f4?'medium-points':'low-points')+_0x48fc86(0x272)+_0x18fe04[_0x48fc86(0x10d)]()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2c7269+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x198554['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x198554['id']+_0x48fc86(0x30d),_0x109066[_0x48fc86(0x276)](_0x5b051a);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x593be6=a2_0x1d8f77;console[_0x593be6(0x205)](_0x593be6(0x2b7));const _0x581d21=document['querySelectorAll']('.quick-edit-btn');console['log']('Found\x20'+_0x581d21['length']+'\x20quick\x20edit\x20buttons'),_0x581d21[_0x593be6(0xed)](_0x190cce=>{const _0x4ccb89=_0x593be6,_0x26cb72=_0x190cce['cloneNode'](!![]);_0x190cce[_0x4ccb89(0xf5)]['replaceChild'](_0x26cb72,_0x190cce);});const _0x2b9d31=document['querySelectorAll']('.view-history-btn');console[_0x593be6(0x205)]('Found\x20'+_0x2b9d31['length']+'\x20view\x20history\x20buttons'),_0x2b9d31['forEach'](_0x1d6670=>{const _0x5d37d5=_0x593be6,_0x319801=_0x1d6670[_0x5d37d5(0x2dd)](!![]);_0x1d6670[_0x5d37d5(0xf5)][_0x5d37d5(0x1e5)](_0x319801,_0x1d6670);}),document['querySelectorAll'](_0x593be6(0x2f7))[_0x593be6(0xed)](_0x3ca279=>{_0x3ca279['addEventListener']('click',function(_0x5c7c61){const _0x3fde16=a2_0x448c;_0x5c7c61['preventDefault'](),_0x5c7c61['stopPropagation']();const _0x3f5740=this['dataset']['userId'];console[_0x3fde16(0x205)]('Quick\x20edit\x20clicked\x20for\x20user:',_0x3f5740);if(!_0x3f5740){console[_0x3fde16(0x285)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']=_0x3fde16(0x174),setTimeout(()=>{const _0x5ac15c=_0x3fde16;this[_0x5ac15c(0x2e0)][_0x5ac15c(0x248)]='1';},0xc8),openQuickEditModal(_0x3f5740);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x2566ef=>{const _0x55f997=_0x593be6;_0x2566ef['addEventListener'](_0x55f997(0x14c),function(_0xbffcb1){const _0x3bfe97=_0x55f997;_0xbffcb1['preventDefault'](),_0xbffcb1['stopPropagation']();const _0x1597b8=this[_0x3bfe97(0x318)]['userId'];console[_0x3bfe97(0x205)]('View\x20history\x20clicked\x20for\x20user:',_0x1597b8);if(!_0x1597b8){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']=_0x3bfe97(0x174),setTimeout(()=>{const _0x5dcd1a=_0x3bfe97;this['style'][_0x5dcd1a(0x248)]='1';},0xc8),loadUserPointsHistory(_0x1597b8);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x296529){const _0x561abb=a2_0x1d8f77;console[_0x561abb(0x205)](_0x561abb(0xc9),_0x296529);const _0x4dd045=document['getElementById'](_0x561abb(0x218));if(!_0x4dd045){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification(_0x561abb(0x10e),_0x561abb(0x285));return;}try{showNotification('Loading\x20user\x20data...',_0x561abb(0x145));const _0x1d5096=doc(db,'userProfiles',_0x296529),_0x70d18f=await getDoc(_0x1d5096);if(!_0x70d18f['exists']()){showNotification('User\x20not\x20found',_0x561abb(0x285));return;}const _0xb0387c=_0x70d18f[_0x561abb(0x21d)]();console['log']('User\x20data\x20loaded:',_0xb0387c);const _0x73b74b=document[_0x561abb(0x10f)]('quick-edit-user-id'),_0x1e5adc=document['getElementById'](_0x561abb(0x271)),_0x46dab6=document[_0x561abb(0x10f)](_0x561abb(0x1d1)),_0x2e806c=document[_0x561abb(0x10f)]('quick-edit-current-points'),_0x23f510=document[_0x561abb(0x10f)](_0x561abb(0x1a8));if(!_0x73b74b||!_0x1e5adc||!_0x46dab6||!_0x2e806c||!_0x23f510){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x73b74b['value']=_0x296529,_0x1e5adc['textContent']=_0xb0387c['displayName']||_0xb0387c[_0x561abb(0x223)]||_0x561abb(0x2ac),_0x46dab6['textContent']=_0xb0387c[_0x561abb(0xc5)]||'No\x20email',_0x2e806c[_0x561abb(0x2f9)]=(_0xb0387c['points']||0x0)[_0x561abb(0x10d)](),_0x23f510['reset']();const _0x235dba=document['getElementById']('quick-add');_0x235dba&&(_0x235dba['checked']=!![]);_0x4dd045['classList']['add']('active'),console[_0x561abb(0x205)]('Modal\x20opened\x20successfully');const _0x3d9d74=document['getElementById']('quick-points-amount');_0x3d9d74&&setTimeout(()=>_0x3d9d74['focus'](),0x64);}catch(_0x2539c3){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x2539c3),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x2539c3['message'],'error');}}function closeQuickEditModal(){const _0x2a367d=document['getElementById']('quick-edit-points-modal');_0x2a367d&&_0x2a367d['classList']['remove']('active');}async function handleQuickEditPoints(_0xf56212){const _0x40d657=a2_0x1d8f77;_0xf56212['preventDefault']();const _0x58a93a=document[_0x40d657(0x10f)](_0x40d657(0x2e6))['value'],_0x1cc7cd=document[_0x40d657(0xf3)]('input[name=\x22quick-action\x22]:checked')['value'],_0x46e5cd=parseInt(document[_0x40d657(0x10f)](_0x40d657(0x288))['value']),_0x51ad1b=document['getElementById']('quick-points-reason')[_0x40d657(0x283)]['trim']();console[_0x40d657(0x205)]('Processing\x20points\x20edit:',{'userId':_0x58a93a,'action':_0x1cc7cd,'amount':_0x46e5cd,'reason':_0x51ad1b});if(!_0x58a93a||!_0x46e5cd||_0x46e5cd<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x58a93a,_0x1cc7cd,_0x46e5cd,_0x51ad1b),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x40d657(0xf4),_0x40d657(0x214)),console[_0x40d657(0x205)]('Points\x20updated\x20successfully\x20for\x20user:',_0x58a93a);}catch(_0x191c13){console['error']('Error\x20updating\x20points:',_0x191c13),showNotification(_0x40d657(0x182)+_0x191c13['message'],_0x40d657(0x285));}}async function searchUsersForPoints(){const _0x299325=a2_0x1d8f77,_0x27e818=document['getElementById']('points-user-search')[_0x299325(0x283)]['trim']()['toLowerCase'](),_0x34c04d=document[_0x299325(0x10f)]('user-search-results');if(!_0x27e818||_0x27e818['length']<0x2){_0x34c04d[_0x299325(0x308)]='';return;}_0x34c04d[_0x299325(0x308)]='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x4717f7=collection(db,'userProfiles'),_0x515c88=await getDocs(_0x4717f7),_0x49caed=[];_0x515c88['forEach'](_0xc143e0=>{const _0x518049=_0x299325,_0x405e81=_0xc143e0['data'](),_0x5d8254=(_0x405e81['displayName']||_0x405e81['username']||'')[_0x518049(0x171)](),_0x3c323a=(_0x405e81['email']||'')['toLowerCase']();(_0x5d8254['includes'](_0x27e818)||_0x3c323a[_0x518049(0x2e5)](_0x27e818))&&_0x49caed['push']({'id':_0xc143e0['id'],..._0x405e81});});if(_0x49caed[_0x299325(0x153)]===0x0){_0x34c04d['innerHTML']=_0x299325(0x148);return;}_0x34c04d[_0x299325(0x308)]='',_0x49caed[_0x299325(0xed)](_0x5cba1c=>{const _0x36c825=_0x299325,_0x27ee19=document['createElement']('div');_0x27ee19['className']='search-result-item',_0x27ee19['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x5cba1c['displayName']||_0x5cba1c['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x5cba1c[_0x36c825(0xc5)]||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x5cba1c[_0x36c825(0x26d)]||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x27ee19['addEventListener']('click',()=>selectUserForPoints(_0x5cba1c)),_0x34c04d['appendChild'](_0x27ee19);});}catch(_0xb8fde8){console[_0x299325(0x285)]('Error\x20searching\x20users:',_0xb8fde8),_0x34c04d[_0x299325(0x308)]=_0x299325(0x2a2);}}function selectUserForPoints(_0x44385e){const _0x12d3d1=a2_0x1d8f77;document['getElementById']('selected-user-name')['textContent']=_0x44385e['displayName']||_0x44385e[_0x12d3d1(0x223)]||'Unknown\x20User',document['getElementById'](_0x12d3d1(0x22a))['textContent']=(_0x44385e['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')[_0x12d3d1(0x283)]=_0x44385e['id'],document[_0x12d3d1(0x10f)]('selected-user-info')[_0x12d3d1(0x2e0)]['display']=_0x12d3d1(0x256),document['getElementById']('points-management-forms')['style']['display']='block',document['getElementById'](_0x12d3d1(0x1fd))['innerHTML']='',document[_0x12d3d1(0x10f)](_0x12d3d1(0x157))[_0x12d3d1(0x283)]='';}async function handleModifyPoints(_0xb8ac74){const _0x2080ce=a2_0x1d8f77;_0xb8ac74[_0x2080ce(0x2f6)]();const _0x2d1b33=document[_0x2080ce(0x10f)]('selected-user-id')[_0x2080ce(0x283)],_0x538327=document[_0x2080ce(0x10f)](_0x2080ce(0x264))['value'],_0xe24cb6=parseInt(document[_0x2080ce(0x10f)](_0x2080ce(0x29f))['value']),_0x1628e1=document['getElementById']('points-reason')[_0x2080ce(0x283)]['trim']();if(!_0x2d1b33||!_0xe24cb6||_0xe24cb6<0x0){showNotification(_0x2080ce(0x2fc),_0x2080ce(0x285));return;}try{await modifyUserPoints(_0x2d1b33,_0x538327,_0xe24cb6,_0x1628e1),document[_0x2080ce(0x10f)]('modify-points-form')['reset']();const _0x549804=doc(db,'userProfiles',_0x2d1b33),_0x22758f=await getDoc(_0x549804);if(_0x22758f[_0x2080ce(0x20e)]()){const _0x3b14cc=_0x22758f[_0x2080ce(0x21d)]();document[_0x2080ce(0x10f)]('selected-user-points')['textContent']=(_0x3b14cc['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x57a27c){console['error'](_0x2080ce(0x2a5),_0x57a27c),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x57a27c['message'],_0x2080ce(0x285));}}async function loadPointsHistory(){const _0x3e8a61=a2_0x1d8f77,_0xd881e4=document['getElementById'](_0x3e8a61(0x1a3));if(!_0xd881e4)return;_0xd881e4[_0x3e8a61(0x308)]=_0x3e8a61(0xc6);try{const _0x471365=collection(db,'pointsHistory'),_0x4a318c=query(_0x471365,orderBy(_0x3e8a61(0x151),_0x3e8a61(0x103)),limit(0x32)),_0x4b2cb7=await getDocs(_0x4a318c);if(_0x4b2cb7['empty']){_0xd881e4[_0x3e8a61(0x308)]=_0x3e8a61(0x2c9);return;}_0xd881e4['innerHTML']='',_0x4b2cb7[_0x3e8a61(0xed)](_0x24d27c=>{const _0x17081a=_0x3e8a61,_0x5b3a2e=_0x24d27c[_0x17081a(0x21d)](),_0x588f4e=document['createElement']('tr'),_0x38aad3=_0x5b3a2e['timestamp']?new Date(_0x5b3a2e[_0x17081a(0x151)]['seconds']*0x3e8)[_0x17081a(0x10d)]():'Unknown';let _0x3c5740='';switch(_0x5b3a2e['action']){case _0x17081a(0x179):_0x3c5740='Added\x20'+_0x5b3a2e['amount']+'\x20points';break;case'subtract':_0x3c5740=_0x17081a(0x2b1)+_0x5b3a2e['amount']+_0x17081a(0x10c);break;case'set':_0x3c5740=_0x17081a(0x2a1)+_0x5b3a2e['amount']+'\x20points';break;default:_0x3c5740=_0x5b3a2e['action']+'\x20'+_0x5b3a2e['amount']+'\x20points';}_0x588f4e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x38aad3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5b3a2e[_0x17081a(0x247)]||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c5740+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x5b3a2e[_0x17081a(0x28c)]+_0x17081a(0x250)+(_0x5b3a2e[_0x17081a(0x146)]||0x0)+'\x20\x20'+(_0x5b3a2e['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5b3a2e['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5b3a2e['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xd881e4[_0x17081a(0x276)](_0x588f4e);});}catch(_0x5a2f1c){console['error'](_0x3e8a61(0xfb),_0x5a2f1c),_0xd881e4['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x5a2f1c[_0x3e8a61(0x21e)]+_0x3e8a61(0x305);}}function filterPointsOverview(){const _0x2a4b66=a2_0x1d8f77,_0x3350f5=document[_0x2a4b66(0x10f)](_0x2a4b66(0x110))['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x58ece6=window[_0x2a4b66(0x1ea)]['filter'](_0x1d0ebe=>{const _0x92edb5=_0x2a4b66,_0x429058=(_0x1d0ebe['displayName']||_0x1d0ebe[_0x92edb5(0x223)]||'')['toLowerCase'](),_0x5b78ef=(_0x1d0ebe[_0x92edb5(0xc5)]||'')[_0x92edb5(0x171)]();return _0x429058['includes'](_0x3350f5)||_0x5b78ef[_0x92edb5(0x2e5)](_0x3350f5);});renderPointsOverview(_0x58ece6);}function sortPointsOverview(){const _0x58e3a2=a2_0x1d8f77,_0x217915=document['getElementById']('points-sort-order')['value'];if(!window[_0x58e3a2(0x1ea)])return;const _0x3aea1e=[...window['allUsersPoints']];switch(_0x217915){case _0x58e3a2(0x107):_0x3aea1e['sort']((_0x59a16a,_0x1a9f99)=>(_0x1a9f99['points']||0x0)-(_0x59a16a['points']||0x0));break;case _0x58e3a2(0x237):_0x3aea1e['sort']((_0x502689,_0x34021f)=>(_0x502689[_0x58e3a2(0x26d)]||0x0)-(_0x34021f['points']||0x0));break;case _0x58e3a2(0x302):_0x3aea1e['sort']((_0x159aed,_0xd02318)=>{const _0x4cbf47=_0x58e3a2,_0x4662c8=(_0x159aed['displayName']||_0x159aed[_0x4cbf47(0x223)]||'')[_0x4cbf47(0x171)](),_0x3a3337=(_0xd02318['displayName']||_0xd02318[_0x4cbf47(0x223)]||'')[_0x4cbf47(0x171)]();return _0x4662c8[_0x4cbf47(0x2ca)](_0x3a3337);});break;case _0x58e3a2(0x280):_0x3aea1e['sort']((_0x4e242e,_0x30d149)=>{const _0x3103b5=_0x58e3a2,_0x5509c6=(_0x4e242e['displayName']||_0x4e242e['username']||'')['toLowerCase'](),_0x5199d7=(_0x30d149['displayName']||_0x30d149['username']||'')[_0x3103b5(0x171)]();return _0x5199d7['localeCompare'](_0x5509c6);});break;}renderPointsOverview(_0x3aea1e);}async function handleAwardItem(_0x4649d1){const _0x538fa1=a2_0x1d8f77;_0x4649d1[_0x538fa1(0x2f6)]();const _0x3d08da=document[_0x538fa1(0x10f)]('selected-user-id')['value'],_0x2323d4=document[_0x538fa1(0x10f)]('store-item-select')[_0x538fa1(0x283)],_0x16b595=document[_0x538fa1(0x10f)](_0x538fa1(0xbc))[_0x538fa1(0x283)][_0x538fa1(0x155)]();if(!_0x3d08da||!_0x2323d4){showNotification(_0x538fa1(0x277),'error');return;}try{showNotification(_0x538fa1(0x2b4),_0x538fa1(0x214)),document['getElementById'](_0x538fa1(0x244))['reset']();}catch(_0x2f9b59){console['error']('Error\x20awarding\x20item:',_0x2f9b59),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x2f9b59['message'],'error');}}async function loadUserPointsHistory(_0xa7d27e){const _0x2e2de9=a2_0x1d8f77;try{const _0x4f8994=collection(db,'pointsHistory'),_0x55de39=query(_0x4f8994,where('userId','==',_0xa7d27e),orderBy('timestamp',_0x2e2de9(0x103))),_0x194c8d=await getDocs(_0x55de39);console['log'](_0x2e2de9(0x1ed)+_0x194c8d[_0x2e2de9(0xc2)]+'\x20history\x20entries\x20for\x20user\x20'+_0xa7d27e),showNotification('User\x20has\x20'+_0x194c8d['size']+'\x20points\x20history\x20entries','info');}catch(_0x390aad){console[_0x2e2de9(0x285)]('Error\x20loading\x20user\x20points\x20history:',_0x390aad),showNotification(_0x2e2de9(0xee),'error');}}async function initializeUserPointsField(){const _0x46a414=a2_0x1d8f77;try{console[_0x46a414(0x205)](_0x46a414(0x188));const _0x4a085b=collection(db,'userProfiles'),_0x3ca735=await getDocs(_0x4a085b);if(_0x3ca735['empty']){console[_0x46a414(0x205)](_0x46a414(0x175));return;}let _0x5b4416=0x0,_0x35ea09=0x0;const _0x334048=writeBatch(db);let _0x31a04f=0x0;return console[_0x46a414(0x205)]('Found\x20'+_0x3ca735['size']+'\x20users\x20to\x20check...'),_0x3ca735['forEach'](_0x442036=>{const _0x1464c9=_0x46a414,_0x469a99=_0x442036['data']();_0x469a99['points']===undefined||_0x469a99['points']===null?(_0x334048[_0x1464c9(0x298)](_0x442036[_0x1464c9(0x23d)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x5b4416++,_0x31a04f++,console['log']('Queued\x20'+(_0x469a99['displayName']||_0x469a99['username']||_0x469a99[_0x1464c9(0xc5)]||_0x1464c9(0x178))+'\x20for\x20points\x20initialization')):(_0x35ea09++,console['log']((_0x469a99['displayName']||_0x469a99['username']||_0x469a99['email']||'Unknown')+_0x1464c9(0x1ad)+_0x469a99['points'])),_0x31a04f>=0x1f4&&console['warn'](_0x1464c9(0x1a2));}),_0x5b4416>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x5b4416+'\x20users...'),await _0x334048['commit'](),console[_0x46a414(0x205)]('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x5b4416+'\x20users')):console[_0x46a414(0x205)](_0x46a414(0x15d)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x3ca735[_0x46a414(0xc2)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x5b4416+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x35ea09),showNotification(_0x46a414(0x2e8)+_0x5b4416+_0x46a414(0xdd)+_0x35ea09+'\x20users\x20already\x20had\x20points.','success'),window[_0x46a414(0x1ea)]&&loadPointsOverview(),{'totalUsers':_0x3ca735[_0x46a414(0xc2)],'usersUpdated':_0x5b4416,'usersAlreadyHadPoints':_0x35ea09};}catch(_0x1781b7){console[_0x46a414(0x285)]('Error\x20initializing\x20points\x20field:',_0x1781b7),showNotification(_0x46a414(0x1c6)+_0x1781b7['message'],_0x46a414(0x285));throw _0x1781b7;}}function addPointsMigrationButton(){const _0x175a7c=a2_0x1d8f77,_0x30abd9=document[_0x175a7c(0x10f)]('manage-points');if(!_0x30abd9)return;if(document[_0x175a7c(0x10f)]('migrate-points-btn'))return;const _0x447e20=document['createElement']('div');_0x447e20['className']='migration-section',_0x447e20[_0x175a7c(0x2e0)][_0x175a7c(0x10a)]='20px',_0x447e20[_0x175a7c(0x2e0)][_0x175a7c(0x19d)]=_0x175a7c(0x191),_0x447e20[_0x175a7c(0x2e0)]['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x447e20['style'][_0x175a7c(0x301)]='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x447e20[_0x175a7c(0x2e0)]['borderRadius']='5px',_0x447e20[_0x175a7c(0x308)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x510b89=_0x30abd9[_0x175a7c(0xf3)]('.section-header');_0x510b89&&_0x510b89['insertAdjacentElement']('afterend',_0x447e20),document[_0x175a7c(0x10f)]('migrate-points-btn')[_0x175a7c(0x24a)](_0x175a7c(0x14c),async function(){const _0x4af8da=_0x175a7c;if(confirm(_0x4af8da(0x14d))){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x4af8da(0x308)]='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x2576ae=_0x4af8da;_0x447e20[_0x2576ae(0x2e0)][_0x2576ae(0x2bc)]='none';},0xbb8);}catch(_0x14ac4a){this['innerHTML']=_0x4af8da(0x1eb),this['disabled']=![];}}});}function setupManagePointsSection(){const _0x3dcf38=a2_0x1d8f77;console[_0x3dcf38(0x205)]('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x3c9743=document['getElementById']('points-user-search');_0x3c9743&&_0x3c9743['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0xa4e40=document[_0x3dcf38(0x10f)]('modify-points-form');_0xa4e40&&_0xa4e40['addEventListener']('submit',handleModifyPoints);const _0x53b4ce=document['getElementById']('award-item-form');_0x53b4ce&&_0x53b4ce['addEventListener'](_0x3dcf38(0x176),handleAwardItem);const _0x30f0d2=document['getElementById']('points-overview-search');_0x30f0d2&&_0x30f0d2[_0x3dcf38(0x24a)]('input',debounce(filterPointsOverview,0x12c));const _0xe4b108=document['getElementById']('points-sort-order');_0xe4b108&&_0xe4b108['addEventListener']('change',sortPointsOverview);const _0x5caaef=document['getElementById']('refresh-points-overview');_0x5caaef&&_0x5caaef[_0x3dcf38(0x24a)]('click',loadPointsOverview);const _0xd45972=document[_0x3dcf38(0x10f)]('bulk-award-points-btn');_0xd45972&&_0xd45972['addEventListener']('click',async()=>{const _0x130dc2=_0x3dcf38;confirm(_0x130dc2(0x20f))&&(_0xd45972['disabled']=!![],_0xd45972['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x5c3b52(),_0xd45972['disabled']=![],_0xd45972[_0x130dc2(0x308)]='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x2c1c21=document['getElementById']('award-all-pilots-btn');_0x2c1c21&&_0x2c1c21[_0x3dcf38(0x24a)](_0x3dcf38(0x14c),awardPointsToAllPilots);async function _0x5c3b52(){const _0x4d6993=_0x3dcf38;try{showNotification(_0x4d6993(0x22e),'info');const _0x1a0084={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x21aaa5=0x0,_0x50cbd5=0x0,_0x3785b8=0x0,_0x14da78=0x0,_0x4c2aac=0x0,_0x628e03=0x0;const _0x1d9fcd=new Set(),_0x3697df=collection(db,'pointsHistory'),_0x2ca74a=query(_0x3697df,where('reason','>=',_0x4d6993(0xe5)),where('reason','<=','Bulk\x20award:')),_0x1c9f14=await getDocs(_0x2ca74a);_0x1c9f14[_0x4d6993(0xed)](_0x19e954=>{const _0x499dbc=_0x4d6993,_0x54f03a=_0x19e954['data'](),_0x459b6b=_0x54f03a[_0x499dbc(0xe2)]||'',_0x5218f9=_0x459b6b['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x5218f9&&_0x5218f9[0x1]&&_0x1d9fcd[_0x499dbc(0x179)](_0x5218f9[0x1]);}),console[_0x4d6993(0x205)]('Found\x20'+_0x1d9fcd['size']+_0x4d6993(0x168));const [_0x216275,_0x566c30,_0x1c6563]=await Promise[_0x4d6993(0x2f0)]([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0x3d1005=_0x216275['size']+_0x566c30['size']+_0x1c6563['size'];showNotification(_0x4d6993(0x1ed)+_0x3d1005+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x48243d=async(_0x31bdc2,_0x46f31d)=>{const _0x135550=_0x4d6993;let _0x181656=writeBatch(db);const _0x324016=[];let _0x14e5a4=0x0;for(const _0x3eeba6 of _0x31bdc2[_0x135550(0x116)]){try{if(_0x1d9fcd['has'](_0x3eeba6['id'])){if(_0x46f31d==='D1')_0x628e03++;if(_0x46f31d==='D2')_0x628e03++;if(_0x46f31d==='D3')_0x628e03++;continue;}const _0x4d97c6=_0x3eeba6['data'](),_0x4bde92=_0x4d97c6['subgameType']||'Standard',_0x5b4e7a=_0x1a0084[_0x4bde92]||0xa;let _0x1719c0=_0x4d97c6[_0x135550(0x20b)];if(!_0x1719c0&&_0x4d97c6['winnerUsername']){const [_0x2274f6,_0x3ea742,_0x2895ba]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x135550(0x223),'==',_0x4d97c6[_0x135550(0x137)]))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x4d97c6['winnerUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x4d97c6['winnerUsername'])))]);if(!_0x2274f6['empty'])_0x1719c0=_0x2274f6['docs'][0x0]['id'];else{if(!_0x3ea742['empty'])_0x1719c0=_0x3ea742['docs'][0x0]['id'];else{if(!_0x2895ba['empty'])_0x1719c0=_0x2895ba['docs'][0x0]['id'];}}}let _0x17defb=_0x4d97c6[_0x135550(0x2aa)];if(!_0x17defb&&_0x4d97c6[_0x135550(0x120)]){const [_0xe66ce6,_0x4b9f74,_0x517ca8]=await Promise[_0x135550(0x2f0)]([getDocs(query(collection(db,'players'),where(_0x135550(0x223),'==',_0x4d97c6['loserUsername']))),getDocs(query(collection(db,'playersD2'),where(_0x135550(0x223),'==',_0x4d97c6['loserUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x4d97c6[_0x135550(0x120)])))]);if(!_0xe66ce6['empty'])_0x17defb=_0xe66ce6['docs'][0x0]['id'];else{if(!_0x4b9f74['empty'])_0x17defb=_0x4b9f74[_0x135550(0x116)][0x0]['id'];else{if(!_0x517ca8['empty'])_0x17defb=_0x517ca8[_0x135550(0x116)][0x0]['id'];}}}if(_0x1719c0&&_0x17defb){const _0x448d24=doc(db,'userProfiles',_0x1719c0),_0x2321e7=doc(db,'userProfiles',_0x17defb),[_0x1be94e,_0x3cfe5f]=await Promise['all']([getDoc(_0x448d24),getDoc(_0x2321e7)]);if(_0x1be94e['exists']()){const _0x43f21d=_0x1be94e[_0x135550(0x21d)](),_0x444691=_0x43f21d['points']||0x0;_0x181656['update'](_0x448d24,{'points':_0x444691+_0x5b4e7a,'lastPointsModified':serverTimestamp()}),_0x324016['push']({'userId':_0x1719c0,'userEmail':_0x43f21d['email']||_0x135550(0x2b9),'displayName':_0x43f21d['displayName']||_0x4d97c6['winnerUsername']||'Unknown\x20User','action':'add','amount':_0x5b4e7a,'previousPoints':_0x444691,'newPoints':_0x444691+_0x5b4e7a,'reason':'Bulk\x20award:\x20'+_0x4bde92+_0x135550(0x1fe)+_0x3eeba6['id']+_0x135550(0x20d)+_0x46f31d,'adminEmail':auth['currentUser'][_0x135550(0xc5)],'timestamp':serverTimestamp()});}if(_0x3cfe5f['exists']()){const _0x4cf53f=_0x3cfe5f['data'](),_0x54532c=_0x4cf53f['points']||0x0;_0x181656['update'](_0x2321e7,{'points':_0x54532c+_0x5b4e7a,'lastPointsModified':serverTimestamp()}),_0x324016[_0x135550(0x24d)]({'userId':_0x17defb,'userEmail':_0x4cf53f['email']||_0x135550(0x2b9),'displayName':_0x4cf53f['displayName']||_0x4d97c6['loserUsername']||'Unknown\x20User','action':_0x135550(0x179),'amount':_0x5b4e7a,'previousPoints':_0x54532c,'newPoints':_0x54532c+_0x5b4e7a,'reason':'Bulk\x20award:\x20'+_0x4bde92+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x3eeba6['id']+'\x20-\x20'+_0x46f31d,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x14da78+=_0x5b4e7a*0x2,_0x14e5a4+=0x2,_0x1d9fcd['add'](_0x3eeba6['id']);if(_0x14e5a4>=0x190){await _0x181656['commit']();for(const _0x4c034f of _0x324016){await addDoc(collection(db,_0x135550(0x118)),_0x4c034f);}_0x181656=writeBatch(db),_0x14e5a4=0x0,_0x324016[_0x135550(0x153)]=0x0;}}}catch(_0x57f664){console['error']('Error\x20processing\x20'+_0x46f31d+'\x20match\x20'+_0x3eeba6['id']+':',_0x57f664),_0x4c2aac++;}}if(_0x14e5a4>0x0){await _0x181656['commit']();for(const _0x169437 of _0x324016){await addDoc(collection(db,'pointsHistory'),_0x169437);}}return{'processed':_0x46f31d==='D1'?_0x21aaa5:_0x46f31d==='D2'?_0x50cbd5:_0x3785b8};};await _0x48243d(_0x216275,'D1'),await _0x48243d(_0x566c30,'D2'),await _0x48243d(_0x1c6563,'D3'),showNotification('Completed!\x20Processed\x20'+_0x21aaa5+'\x20D1\x20matches,\x20'+_0x50cbd5+'\x20D2\x20matches,\x20'+_0x3785b8+'\x20D3\x20matches.\x20'+(_0x4d6993(0xcd)+_0x14da78+'\x20points.\x20Skipped\x20'+_0x628e03+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x4c2aac),'success'),document[_0x4d6993(0x10f)]('points-overview-table-body')&&loadPointsOverview();}catch(_0x460256){console[_0x4d6993(0x285)](_0x4d6993(0x2b8),_0x460256),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x460256['message'],'error');}}const _0x736f42=document['getElementById'](_0x3dcf38(0x218));if(_0x736f42){console['log'](_0x3dcf38(0x17b));const _0x3048bc=_0x736f42[_0x3dcf38(0xf3)]('.close-btn');_0x3048bc?_0x3048bc['addEventListener']('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x43e178=document['getElementById']('cancel-quick-edit');_0x43e178?_0x43e178['addEventListener']('click',function(){const _0x301631=_0x3dcf38;console[_0x301631(0x205)]('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console[_0x3dcf38(0x1e3)]('Cancel\x20button\x20not\x20found');const _0x48a45f=document['getElementById'](_0x3dcf38(0x1a8));_0x48a45f?_0x48a45f[_0x3dcf38(0x24a)](_0x3dcf38(0x176),function(_0x6793b3){const _0x91fdf5=_0x3dcf38;console[_0x91fdf5(0x205)]('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x6793b3);}):console[_0x3dcf38(0x285)](_0x3dcf38(0x163)),_0x736f42['addEventListener']('click',function(_0x5a586e){const _0x6554e1=_0x3dcf38;_0x5a586e['target']===_0x736f42&&(console[_0x6554e1(0x205)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console[_0x3dcf38(0x285)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x4e2e8d=a2_0x1d8f77;try{const _0x5381ae=parseInt(prompt(_0x4e2e8d(0x200),'10'));if(!_0x5381ae||isNaN(_0x5381ae)){showNotification(_0x4e2e8d(0x2b6),'error');return;}if(!confirm(_0x4e2e8d(0x130)+_0x5381ae+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification('Starting\x20points\x20award\x20process...','info');const [_0x53a458,_0x30c65a,_0x1c55bb]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x4e2e8d(0x2df)))]);console['log']('Found\x20'+_0x53a458['size']+_0x4e2e8d(0x292)+_0x30c65a['size']+'\x20D2\x20pilots,\x20'+_0x1c55bb[_0x4e2e8d(0xc2)]+_0x4e2e8d(0x208));const _0x290547=_0x53a458['size']+_0x30c65a['size']+_0x1c55bb['size'],_0x1dabed=new Map();_0x53a458['forEach'](_0xa09171=>{const _0x4e9cc2=_0x4e2e8d,_0x38f41b=_0xa09171[_0x4e9cc2(0x21d)]();_0x1dabed['set'](_0xa09171['id'],{'username':_0x38f41b[_0x4e9cc2(0x223)],'ladder':'D1'});}),_0x30c65a[_0x4e2e8d(0xed)](_0x5669af=>{const _0x2d3bff=_0x5669af['data']();_0x1dabed['set'](_0x5669af['id'],{'username':_0x2d3bff['username'],'ladder':'D2'});}),_0x1c55bb[_0x4e2e8d(0xed)](_0x536bee=>{const _0x4f8771=_0x4e2e8d,_0x4b1311=_0x536bee['data']();_0x1dabed[_0x4f8771(0x29c)](_0x536bee['id'],{'username':_0x4b1311['username'],'ladder':'D3'});}),console['log']('Found\x20'+_0x1dabed['size']+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x103804=0x0,_0x18859c=0x0,_0x1897cc=0x0;const _0x175daf=Array[_0x4e2e8d(0x224)](_0x1dabed['keys']()),_0x526b8e=0x190;for(let _0x29c611=0x0;_0x29c611<_0x175daf['length'];_0x29c611+=_0x526b8e){const _0x85eec0=writeBatch(db),_0xdc3342=[],_0x5ad488=_0x175daf['slice'](_0x29c611,_0x29c611+_0x526b8e),_0x1107e4=await Promise['all'](_0x5ad488['map'](_0x58ab81=>getDoc(doc(db,'userProfiles',_0x58ab81))));for(let _0xb86964=0x0;_0xb86964<_0x5ad488['length'];_0xb86964++){try{const _0xfece7f=_0x5ad488[_0xb86964],_0x4ddf4e=_0x1dabed['get'](_0xfece7f),_0x532e25=_0x1107e4[_0xb86964];if(_0x532e25['exists']()){const _0x10020e=_0x532e25['data'](),_0x368bf1=_0x10020e['points']||0x0,_0x4e47e8=_0x368bf1+_0x5381ae;_0x85eec0[_0x4e2e8d(0x298)](doc(db,_0x4e2e8d(0x135),_0xfece7f),{'points':_0x4e47e8,'lastPointsModified':serverTimestamp()}),_0xdc3342['push']({'userId':_0xfece7f,'userEmail':_0x10020e['email']||_0x4e2e8d(0x2b9),'displayName':_0x10020e['displayName']||_0x4ddf4e['username']||'Unknown\x20User','action':'add','amount':_0x5381ae,'previousPoints':_0x368bf1,'newPoints':_0x4e47e8,'reason':_0x4e2e8d(0x2c7)+_0x4ddf4e['ladder']+')','adminEmail':auth['currentUser'][_0x4e2e8d(0xc5)],'timestamp':serverTimestamp()}),_0x18859c+=_0x5381ae,_0x103804++;}else _0x1897cc++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x4ddf4e['username']+'\x20('+_0xfece7f+')');}catch(_0x4889d8){_0x1897cc++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.[_0x4e2e8d(0x223)]+':',_0x4889d8);}}await _0x85eec0[_0x4e2e8d(0x313)]();for(const _0x3d4072 of _0xdc3342){await addDoc(collection(db,_0x4e2e8d(0x118)),_0x3d4072);}showNotification('Processed\x20'+_0x103804+'/'+_0x290547+'\x20pilots...','info');}showNotification('Complete!\x20Awarded\x20'+_0x18859c+'\x20points\x20to\x20'+_0x103804+'\x20pilots.\x20Errors:\x20'+_0x1897cc,'success'),document[_0x4e2e8d(0x10f)](_0x4e2e8d(0x1cc))&&loadPointsOverview();}catch(_0x48aba0){console['error']('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x48aba0),showNotification('Error:\x20'+_0x48aba0['message'],'error');}}function setupManageRibbonsSection(){const _0x74822b=a2_0x1d8f77;console['log'](_0x74822b(0x22d));const _0x3282f5=document[_0x74822b(0x10f)](_0x74822b(0x150));_0x3282f5&&_0x3282f5[_0x74822b(0x24a)](_0x74822b(0x1fa),debounce(searchRibbonUser,0x12c));const _0x20823e=document[_0x74822b(0x10f)]('search-ribbon-user-btn');_0x20823e&&_0x20823e['addEventListener']('click',searchRibbonUser);const _0x109dfe=document['getElementById']('add-ribbon-form');_0x109dfe&&_0x109dfe[_0x74822b(0x24a)](_0x74822b(0x176),addRibbon),_0x3282f5&&_0x3282f5[_0x74822b(0x24a)](_0x74822b(0x29e),function(_0x1caf7e){const _0x25f4d9=_0x74822b;_0x1caf7e['key']===_0x25f4d9(0x190)&&(_0x1caf7e['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x54dc98,_0x4b2026,_0x6be489,_0x56fffe=''){const _0x355f9c=a2_0x1d8f77,_0x2f58a5=doc(db,'userProfiles',_0x54dc98),_0x400ad7=await getDoc(_0x2f58a5);if(!_0x400ad7['exists']())throw new Error(_0x355f9c(0x2a4));const _0x30112c=_0x400ad7[_0x355f9c(0x21d)](),_0x53137e=_0x30112c[_0x355f9c(0x26d)]!==undefined?_0x30112c['points']:0x0;_0x30112c['points']===undefined&&(console[_0x355f9c(0x205)]('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x30112c[_0x355f9c(0x247)]||_0x30112c[_0x355f9c(0xc5)]||'Unknown')),await updateDoc(_0x2f58a5,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x4798e6=_0x53137e;switch(_0x4b2026){case _0x355f9c(0x179):_0x4798e6=_0x53137e+_0x6be489;break;case'subtract':_0x4798e6=Math['max'](0x0,_0x53137e-_0x6be489);break;case'set':_0x4798e6=_0x6be489;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x2f58a5,{'points':_0x4798e6,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x54dc98,'userEmail':_0x30112c['email']||'unknown','displayName':_0x30112c['displayName']||_0x30112c['username']||_0x355f9c(0x2ac),'action':_0x4b2026,'amount':_0x6be489,'previousPoints':_0x53137e,'newPoints':_0x4798e6,'reason':_0x56fffe,'adminEmail':auth[_0x355f9c(0x177)][_0x355f9c(0xc5)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x2a176b=a2_0x1d8f77,_0x2c4b00=document[_0x2a176b(0x10f)]('points-overview-table-body');if(!_0x2c4b00)return;_0x2c4b00['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x5932c6=collection(db,'userProfiles'),_0x21ea96=await getDocs(_0x5932c6);if(_0x21ea96['empty']){_0x2c4b00['innerHTML']=_0x2a176b(0x1a1);return;}const _0x3c6d2d=[];let _0x244bd3=0x0;_0x21ea96[_0x2a176b(0xed)](_0xc1c51f=>{const _0x2afdfe=_0x2a176b,_0x2a60a4=_0xc1c51f['data'](),_0x35fa5f=_0x2a60a4['points']!==undefined?_0x2a60a4[_0x2afdfe(0x26d)]:0x0;_0x2a60a4[_0x2afdfe(0x26d)]===undefined&&_0x244bd3++,_0x3c6d2d['push']({'id':_0xc1c51f['id'],..._0x2a60a4,'points':_0x35fa5f});}),_0x244bd3>0x0&&(console['log'](_0x2a176b(0x1ed)+_0x244bd3+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x244bd3+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.',_0x2a176b(0x145))),_0x3c6d2d['sort']((_0x1347e4,_0x46c3f6)=>(_0x46c3f6['points']||0x0)-(_0x1347e4[_0x2a176b(0x26d)]||0x0)),window['allUsersPoints']=_0x3c6d2d,renderPointsOverview(_0x3c6d2d);}catch(_0x552966){console['error']('Error\x20loading\x20points\x20overview:',_0x552966),_0x2c4b00['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x552966['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x2e5ae9=a2_0x1d8f77,_0x1f4101=document[_0x2e5ae9(0x10f)]('ribbons-overview-table-body');if(!_0x1f4101)return;_0x1f4101['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x2a38c5,_0x510784,_0x210624]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,_0x2e5ae9(0x1b2)))]);_0x1f4101['innerHTML']='';const _0x11c680=(_0x3b2f85,_0x4b3887)=>{_0x3b2f85['forEach'](_0x36704e=>{const _0x4abef2=a2_0x448c,_0x3dec44=_0x36704e[_0x4abef2(0x21d)](),_0x36906c=_0x3dec44['ribbons']||{},_0x3578bc=Object['keys'](_0x36906c)[_0x4abef2(0x153)],_0x1a82bd=document['createElement']('tr');_0x1a82bd[_0x4abef2(0x308)]=_0x4abef2(0x186)+(_0x3dec44['username']||'Unknown')+_0x4abef2(0x312)+_0x4b3887['toLowerCase']()+'\x22>'+_0x4b3887+_0x4abef2(0x202)+_0x3578bc+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3dec44['lastUpdated']?new Date(_0x3dec44['lastUpdated']['seconds']*0x3e8)[_0x4abef2(0x2b2)]():'Unknown')+_0x4abef2(0x2b3)+_0x3dec44['username']+'\x22\x20data-ladder=\x22'+_0x4b3887+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1f4101['appendChild'](_0x1a82bd);});};_0x11c680(_0x2a38c5,'D1'),_0x11c680(_0x510784,'D2'),_0x11c680(_0x210624,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x2fff07=>{const _0x58cfe6=_0x2e5ae9;_0x2fff07[_0x58cfe6(0x24a)]('click',function(){const _0x51a037=_0x58cfe6,_0x37b1d1=this['dataset']['username'],_0x65ecc4=this['dataset'][_0x51a037(0x13a)];editUserRibbons(_0x37b1d1,_0x65ecc4);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x8a041e){console[_0x2e5ae9(0x285)](_0x2e5ae9(0x1c3),_0x8a041e),_0x1f4101['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data',_0x2e5ae9(0x285));}}async function searchRibbonUser(){const _0x595ba7=a2_0x1d8f77,_0x2038fc=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x2038fc){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x469771,_0x253f87,_0x28f00b]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x2038fc)),getDoc(doc(db,'playerRibbonsD2',_0x2038fc)),getDoc(doc(db,'playerRibbonsD3',_0x2038fc))]);let _0x377d72=null,_0x33d613=null;if(_0x469771['exists']())_0x377d72='D1',_0x33d613=_0x469771[_0x595ba7(0x21d)]();else{if(_0x253f87['exists']())_0x377d72='D2',_0x33d613=_0x253f87['data']();else _0x28f00b[_0x595ba7(0x20e)]()&&(_0x377d72='D3',_0x33d613=_0x28f00b['data']());}_0x377d72?(document[_0x595ba7(0x10f)]('current-ribbon-user')[_0x595ba7(0x2f9)]=_0x2038fc,document['getElementById']('ribbon-target-user')['value']=_0x2038fc,document['getElementById']('ribbon-target-ladder')[_0x595ba7(0x283)]=_0x377d72,document['getElementById']('user-ribbon-management')['style']['display']=_0x595ba7(0x256),displayCurrentRibbons(_0x33d613['ribbons']||{}),showNotification('Found\x20'+_0x2038fc+_0x595ba7(0x252)+_0x377d72+'\x20ladder',_0x595ba7(0x214))):showNotification(_0x595ba7(0x1dc)+_0x2038fc+_0x595ba7(0x1f8),'error');}catch(_0x39b0d4){console['error']('Error\x20searching\x20user:',_0x39b0d4),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x26fb21){const _0x1e5b46=a2_0x1d8f77,_0x2190fc=document['getElementById']('current-ribbons-list');if(!_0x2190fc)return;_0x2190fc['innerHTML']='';if(Object['keys'](_0x26fb21)['length']===0x0){_0x2190fc['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object[_0x1e5b46(0x258)](_0x26fb21)['forEach'](([_0x52917d,_0xab755e])=>{const _0x351e1e=_0x1e5b46,_0x34e27c=document['createElement'](_0x351e1e(0x16f));_0x34e27c['className']=_0x351e1e(0xfc),_0x34e27c[_0x351e1e(0x308)]=_0x351e1e(0x147)+_0x52917d+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0xab755e['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0xab755e[_0x351e1e(0x20c)]?new Date(_0xab755e['awardedAt'][_0x351e1e(0x306)]*0x3e8)['toLocaleDateString']():_0x351e1e(0x178))+_0x351e1e(0xcb)+_0x52917d+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2190fc['appendChild'](_0x34e27c);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x5ccfb4=>{_0x5ccfb4['addEventListener']('click',function(){const _0x10f242=this['dataset']['ribbon'];removeRibbon(_0x10f242);});});}async function addRibbon(_0x2397da){const _0x4ecf33=a2_0x1d8f77;_0x2397da['preventDefault']();const _0x52768e=document['getElementById']('ribbon-target-user')['value'],_0x46a43e=document['getElementById'](_0x4ecf33(0x101))['value'],_0x1e084c=document['getElementById']('ribbon-type-select')['value'],_0x10c643=parseInt(document['getElementById'](_0x4ecf33(0x299))['value']);if(!_0x52768e||!_0x46a43e||!_0x1e084c||!_0x10c643){showNotification(_0x4ecf33(0x187),_0x4ecf33(0x285));return;}try{const _0x4f68aa='playerRibbons'+(_0x46a43e==='D1'?'':_0x46a43e),_0x27625e=doc(db,_0x4f68aa,_0x52768e),_0x2c6719=await getDoc(_0x27625e),_0x4e0cc3=_0x2c6719['exists']()?_0x2c6719['data']()['ribbons']||{}:{};_0x4e0cc3[_0x1e084c]={'level':_0x10c643,'awardedAt':serverTimestamp()},await setDoc(_0x27625e,{'username':_0x52768e,'ladder':_0x46a43e,'ribbons':_0x4e0cc3,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x4ecf33(0x1bd)+_0x1e084c+'\x20Level\x20'+_0x10c643+'\x20to\x20'+_0x52768e,'success'),displayCurrentRibbons(_0x4e0cc3),document[_0x4ecf33(0x10f)]('ribbon-type-select')['value']='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x3b94ae){console['error'](_0x4ecf33(0x234),_0x3b94ae),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x5a0675){const _0x4c21b4=a2_0x1d8f77,_0x248f86=document['getElementById']('ribbon-target-user')[_0x4c21b4(0x283)],_0x12ca78=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x5a0675+_0x4c21b4(0x314)+_0x248f86+'?'))return;try{const _0x462c58='playerRibbons'+(_0x12ca78==='D1'?'':_0x12ca78),_0x2d405e=doc(db,_0x462c58,_0x248f86),_0x1b9190=await getDoc(_0x2d405e),_0x59af58=_0x1b9190[_0x4c21b4(0x20e)]()?_0x1b9190[_0x4c21b4(0x21d)]()['ribbons']||{}:{};delete _0x59af58[_0x5a0675],await setDoc(_0x2d405e,{'username':_0x248f86,'ladder':_0x12ca78,'ribbons':_0x59af58,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x4c21b4(0xf1)+_0x5a0675+_0x4c21b4(0x314)+_0x248f86,'success'),displayCurrentRibbons(_0x59af58);}catch(_0x46f6d5){console['error']('Error\x20removing\x20ribbon:',_0x46f6d5),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x4aa2fe,_0x443a4f){const _0x4f7da4=a2_0x1d8f77;document['getElementById']('ribbon-user-search')[_0x4f7da4(0x283)]=_0x4aa2fe,searchRibbonUser();}