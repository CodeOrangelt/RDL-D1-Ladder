const a4_0x425f91=a4_0x3c92,a4_0x1163b7=(function(){let _0x2c11f3=!![];return function(_0x431d32,_0x49aa29){const _0x4e5605=_0x2c11f3?function(){const _0x23f517=a4_0x3c92;if(_0x49aa29){const _0x522225=_0x49aa29[_0x23f517(0xef)](_0x431d32,arguments);return _0x49aa29=null,_0x522225;}}:function(){};return _0x2c11f3=![],_0x4e5605;};}()),a4_0x5a7806=a4_0x1163b7(this,function(){const _0x5bf149=a4_0x3c92,_0xccfc02=function(){const _0x8f373f=a4_0x3c92;let _0x577db6;try{_0x577db6=Function('return\x20(function()\x20'+_0x8f373f(0x181)+');')();}catch(_0x390134){_0x577db6=window;}return _0x577db6;},_0x18da4f=_0xccfc02(),_0x3e1128=_0x18da4f[_0x5bf149(0x263)]=_0x18da4f['console']||{},_0x433bfb=['log','warn','info','error','exception','table','trace'];for(let _0x1d43c6=0x0;_0x1d43c6<_0x433bfb['length'];_0x1d43c6++){const _0x2560cb=a4_0x1163b7[_0x5bf149(0x295)]['prototype']['bind'](a4_0x1163b7),_0xb08149=_0x433bfb[_0x1d43c6],_0x41ee57=_0x3e1128[_0xb08149]||_0x2560cb;_0x2560cb[_0x5bf149(0xf5)]=a4_0x1163b7['bind'](a4_0x1163b7),_0x2560cb[_0x5bf149(0x1d5)]=_0x41ee57['toString']['bind'](_0x41ee57),_0x3e1128[_0xb08149]=_0x2560cb;}});a4_0x5a7806();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x2ba7ec){const _0x2d2ab1=a4_0x3c92;if(!_0x2ba7ec)return'#ffffff';_0x2ba7ec=_0x2ba7ec[_0x2d2ab1(0xaa)]('#','');_0x2ba7ec['length']===0x3&&(_0x2ba7ec=_0x2ba7ec['split']('')['map'](_0x5a7db9=>_0x5a7db9+_0x5a7db9)['join'](''));if(_0x2ba7ec['length']!==0x6)return _0x2d2ab1(0x27d);const _0x105055=parseInt(_0x2ba7ec[_0x2d2ab1(0x24f)](0x0,0x2),0x10),_0x1f6c34=parseInt(_0x2ba7ec['substring'](0x2,0x4),0x10),_0x1129f1=parseInt(_0x2ba7ec['substring'](0x4,0x6),0x10),_0x165c9e=(_0x105055*0x12b+_0x1f6c34*0x24b+_0x1129f1*0x72)/0x3e8;return _0x165c9e>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener'](a4_0x425f91(0x14c),()=>{auth['onAuthStateChanged'](async _0x285acc=>{const _0x244f11=a4_0x3c92;if(!_0x285acc){window[_0x244f11(0x95)][_0x244f11(0x8f)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0x39824b){console['error'](_0x244f11(0x193),_0x39824b),showNotification(_0x244f11(0x82),_0x244f11(0x240));}});});async function getUserTabPermissions(_0x548811){const _0x3b4eeb=a4_0x425f91;if(!_0x548811)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x548811+'\x20in\x20all\x20collections...');const _0x36ffa0=[{'name':_0x3b4eeb(0x1db),'displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':_0x3b4eeb(0x2b1)},{'name':'playersD3','displayName':'D3\x20Players'},{'name':_0x3b4eeb(0x20e),'displayName':'Non-Participants'}],_0x2254c7=auth[_0x3b4eeb(0x24b)];let _0x5b4cdf=null,_0x17356a=null;for(const _0xaa93a1 of _0x36ffa0){try{if(_0x2254c7){const _0x1266c1=doc(db,_0xaa93a1['name'],_0x2254c7[_0x3b4eeb(0x2a1)]),_0x1fa536=await getDoc(_0x1266c1);if(_0x1fa536['exists']()){const _0x314c20=_0x1fa536['data']();console['log']('Found\x20user\x20in\x20'+_0xaa93a1['displayName']+_0x3b4eeb(0x139),_0x314c20);const _0x140534=(_0x314c20[_0x3b4eeb(0x2a0)]||_0x314c20[_0x3b4eeb(0x218)]||'')['toLowerCase']();if(_0x140534&&_0x140534!=='none'){_0x5b4cdf=_0x140534,_0x17356a=_0xaa93a1[_0x3b4eeb(0x277)],console['log'](_0x3b4eeb(0x1a5)+_0x5b4cdf+'\x20in\x20'+_0x17356a);break;}}}if(!_0x5b4cdf){const _0x230769=collection(db,_0xaa93a1[_0x3b4eeb(0x89)]),_0x55df12=query(_0x230769,where('email','==',_0x548811)),_0x1e960e=await getDocs(_0x55df12);if(!_0x1e960e['empty']){const _0x619387=_0x1e960e['docs'][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0xaa93a1['displayName']+_0x3b4eeb(0x298)+_0x548811+':',_0x619387);const _0x8a52fd=(_0x619387['roleName']||_0x619387[_0x3b4eeb(0x218)]||'')['toLowerCase']();if(_0x8a52fd&&_0x8a52fd!=='none'){_0x5b4cdf=_0x8a52fd,_0x17356a=_0xaa93a1['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x5b4cdf+'\x20in\x20'+_0x17356a);break;}}}}catch(_0x30a6cf){console[_0x3b4eeb(0x240)](_0x3b4eeb(0xd0)+_0xaa93a1['displayName']+':',_0x30a6cf);}}if(_0x5b4cdf){console['log'](_0x3b4eeb(0x126)+_0x5b4cdf+'\x20(from\x20'+_0x17356a+')');const _0x59a158={'admin':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history','manage-highlights',_0x3b4eeb(0x1b6),_0x3b4eeb(0x1f6),_0x3b4eeb(0x120),'manage-levels-ribbons','manage-ribbons'],'owner':[_0x3b4eeb(0x288),'manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks',_0x3b4eeb(0x22c),_0x3b4eeb(0x23e),_0x3b4eeb(0x10c),'elo-history','manage-highlights','user-roles-section','manage-matches','manage-points',_0x3b4eeb(0xbd),'manage-ribbons'],'council':['dashboard','manage-players',_0x3b4eeb(0x1f6)],'creative\x20lead':['dashboard','manage-articles',_0x3b4eeb(0x10c),'elo-history',_0x3b4eeb(0x86)]};if(_0x59a158[_0x5b4cdf])return console['log'](_0x3b4eeb(0x1e7)+_0x5b4cdf+'\x27\x20has\x20permissions:',_0x59a158[_0x5b4cdf]),_0x59a158[_0x5b4cdf];}return console[_0x3b4eeb(0x1cf)]('No\x20specific\x20permissions\x20for\x20user\x20'+_0x548811+_0x3b4eeb(0xcd)),['dashboard'];}function setupSidebarNavigation(_0x5d2e16=[]){const _0x4e3697=a4_0x425f91,_0x39df03=document['querySelectorAll'](_0x4e3697(0xe2)),_0x3b0788=document['querySelectorAll']('.admin-section');(!_0x5d2e16||_0x5d2e16[_0x4e3697(0x21e)]===0x0)&&(_0x5d2e16=['dashboard']);_0x39df03[_0x4e3697(0x116)](_0x1dede7=>{const _0x3b1169=_0x4e3697,_0x228e1a=_0x1dede7['getAttribute'](_0x3b1169(0x177));_0x5d2e16['includes'](_0x228e1a)?_0x1dede7['style']['display']='flex':_0x1dede7['style'][_0x3b1169(0x2ab)]=_0x3b1169(0x2b0),_0x1dede7['addEventListener'](_0x3b1169(0xf7),()=>{const _0xddf273=_0x3b1169,_0x32a14d=_0x1dede7['getAttribute']('data-section');if(!_0x5d2e16['includes'](_0x32a14d)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x39df03['forEach'](_0x257555=>_0x257555[_0xddf273(0x2d2)]['remove']('active')),_0x1dede7['classList'][_0xddf273(0x2bc)]('active'),_0x3b0788['forEach'](_0x32c8ae=>{_0x32c8ae['style']['display']='none';});const _0x2d28a7=document[_0xddf273(0x15b)](_0x32a14d);_0x2d28a7&&(_0x2d28a7[_0xddf273(0xf6)]['display']='block',console[_0xddf273(0x1cf)](_0xddf273(0x211)+_0x32a14d+_0xddf273(0x2ca)));});});const _0x1ca3fd=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x5d2e16[0x0]+'\x22]');_0x1ca3fd&&_0x1ca3fd[_0x4e3697(0xf7)](),console[_0x4e3697(0x1cf)]('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x5174f4=document['querySelectorAll']('.nav-item');let _0x120ec5=null,_0x3ac641=new Set();_0x5174f4['forEach'](_0x185b69=>{const _0x2a5e3f=a4_0x3c92;_0x185b69[_0x2a5e3f(0x239)]('click',function(){const _0xf58ad8=_0x2a5e3f,_0x61e62a=this['getAttribute']('data-section');if(_0x61e62a===_0x120ec5)return;_0x120ec5&&(document['getElementById'](_0x120ec5)['style'][_0xf58ad8(0x2ab)]='none',_0x5174f4['forEach'](_0x184f93=>_0x184f93[_0xf58ad8(0x2d2)]['remove']('active'))),document['getElementById'](_0x61e62a)['style']['display']='block',this[_0xf58ad8(0x2d2)][_0xf58ad8(0x2bc)](_0xf58ad8(0x216)),_0x120ec5=_0x61e62a;});});}function loadSectionData(_0x31812e){return;}async function initializeAdminDashboard(){const _0x2d05f8=a4_0x425f91;try{const _0x15ff8a=auth['currentUser'],_0x3ae35d=await getUserTabPermissions(_0x15ff8a['email']);console['log']('User\x20'+_0x15ff8a[_0x2d05f8(0xfe)]+'\x20allowed\x20tabs:',_0x3ae35d),window['userAllowedTabs']=_0x3ae35d,setupSidebarNavigation(_0x3ae35d),setupLadderSelector(),setupDashboardSection(),_0x3ae35d['includes'](_0x2d05f8(0x1c4))&&setupManagePlayersSection(),_0x3ae35d['includes']('elo-history')&&setupEloHistorySection(),_0x3ae35d['includes']('manage-ranks')&&setupRankControls(),_0x3ae35d['includes'](_0x2d05f8(0xc6))&&setupManageArticlesSection(),_0x3ae35d['includes']('user-roles-section')&&setupUserRolesSection(),_0x3ae35d['includes'](_0x2d05f8(0x10c))&&setupTrophyManagementSection(),_0x3ae35d['includes'](_0x2d05f8(0x86))&&setupManageHighlightsSection(),_0x3ae35d['includes']('inactive-players')&&setupInactivePlayersSection(),_0x3ae35d[_0x2d05f8(0xcf)](_0x2d05f8(0x1f6))&&setupManageMatchesSection(),_0x3ae35d['includes'](_0x2d05f8(0x120))&&setupManagePointsSection(),_0x3ae35d['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x3ae35d);}catch(_0x2e9b82){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x2e9b82);}}function setupDataLoadButtons(_0x48ec73=[]){const _0x553fbc=a4_0x425f91;(!_0x48ec73||_0x48ec73['length']===0x0)&&(_0x48ec73=['dashboard']);const _0x18edce=document['getElementById']('load-dashboard-data');_0x18edce&&_0x18edce['addEventListener']('click',function(){const _0x53fcb3=a4_0x3c92;this['classList'][_0x53fcb3(0x2bc)](_0x53fcb3(0x17e)),this[_0x53fcb3(0xa7)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()[_0x53fcb3(0x1d9)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x1bc20b=>{const _0x3e246e=_0x53fcb3;console['error']('Error\x20loading\x20dashboard:',_0x1bc20b),this[_0x3e246e(0x2d2)][_0x3e246e(0x11c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3c010d=_0x3e246e;this['innerHTML']=_0x3c010d(0xeb);},0xbb8);});});if(_0x48ec73['includes']('manage-trophies')){const _0x1cad76=document['getElementById']('load-trophies-data');_0x1cad76&&_0x1cad76['addEventListener']('click',function(){const _0x2e3ae6=a4_0x3c92;console['log']('Load\x20trophies\x20data\x20clicked'),this[_0x2e3ae6(0x2d2)]['add'](_0x2e3ae6(0x17e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x545a5c=_0x2e3ae6;this['classList']['remove']('loading'),this['innerHTML']=_0x545a5c(0x2cf);})['catch'](_0x46428b=>{const _0x3849c=_0x2e3ae6;console['error']('Error\x20loading\x20trophies:',_0x46428b),this[_0x3849c(0x2d2)][_0x3849c(0x11c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x18b3df=_0x3849c;this['innerHTML']=_0x18b3df(0x2cf);},0xbb8);});});}if(_0x48ec73['includes']('manage-players')){const _0x53e23e=document[_0x553fbc(0x15b)]('load-players-data');_0x53e23e&&_0x53e23e['addEventListener']('click',function(){const _0x45b352=_0x553fbc;console[_0x45b352(0x1cf)]('Load\x20players\x20data\x20clicked'),this['classList'][_0x45b352(0x2bc)](_0x45b352(0x17e)),this['innerHTML']=_0x45b352(0xd6),loadPlayersData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x28dd68=>{const _0x31e027=_0x45b352;console['error']('Error\x20loading\x20players:',_0x28dd68),this[_0x31e027(0x2d2)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x48ec73[_0x553fbc(0xcf)]('elo-history')){const _0x4ae6cf=document[_0x553fbc(0x15b)](_0x553fbc(0x1a6));_0x4ae6cf&&_0x4ae6cf['addEventListener']('click',function(){const _0x38350b=_0x553fbc;console[_0x38350b(0x1cf)]('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x1d0dba=_0x38350b;this[_0x1d0dba(0x2d2)]['remove'](_0x1d0dba(0x17e)),this[_0x1d0dba(0xa7)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x1bc30b=>{const _0x4f822c=_0x38350b;console['error']('Error\x20loading\x20history:',_0x1bc30b),this[_0x4f822c(0x2d2)]['remove'](_0x4f822c(0x17e)),this[_0x4f822c(0xa7)]=_0x4f822c(0xa9),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x48ec73['includes'](_0x553fbc(0xc6))){const _0x58953e=document['getElementById'](_0x553fbc(0x1e8));_0x58953e&&_0x58953e[_0x553fbc(0x239)](_0x553fbc(0xf7),function(){const _0x2a8c7f=_0x553fbc;console['log'](_0x2a8c7f(0x113)),this['classList']['add']('loading'),this['innerHTML']=_0x2a8c7f(0xd6),loadArticles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x194156=>{const _0x4cc93d=_0x2a8c7f;console['error'](_0x4cc93d(0x1da),_0x194156),this[_0x4cc93d(0x2d2)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x521c89=_0x4cc93d;this[_0x521c89(0xa7)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x48ec73[_0x553fbc(0xcf)]('user-roles-section')){const _0x7b6798=document['getElementById']('load-users-data');_0x7b6798&&_0x7b6798['addEventListener']('click',function(){const _0x563ab4=_0x553fbc;console['log']('Load\x20users\x20data\x20clicked'),this['classList'][_0x563ab4(0x2bc)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x26cec6=_0x563ab4;this['classList']['remove']('loading'),this['innerHTML']=_0x26cec6(0x15c);})[_0x563ab4(0x250)](_0x1712ee=>{const _0x509c82=_0x563ab4;console[_0x509c82(0x240)]('Error\x20loading\x20users:',_0x1712ee),this['classList']['remove']('loading'),this['innerHTML']=_0x509c82(0xa9),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x48ec73[_0x553fbc(0xcf)]('inactive-players')){const _0x2d997e=document['getElementById']('load-inactive-players-data');_0x2d997e&&_0x2d997e['addEventListener']('click',function(){const _0xd684e=_0x553fbc;console['log'](_0xd684e(0x1e2)),this['classList']['add']('loading'),this['innerHTML']=_0xd684e(0xd6),loadInactivePlayersData()['then'](()=>{const _0x3d7093=_0xd684e;this[_0x3d7093(0x2d2)][_0x3d7093(0x11c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})[_0xd684e(0x250)](_0x42a87b=>{const _0x5e2065=_0xd684e;console['error'](_0x5e2065(0x2da),_0x42a87b),this['classList']['remove']('loading'),this[_0x5e2065(0xa7)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5d1352=_0x5e2065;this['innerHTML']=_0x5d1352(0x260);},0xbb8);});});}if(_0x48ec73['includes']('manage-highlights')){const _0x3f06ae=document['getElementById']('load-highlights-data');_0x3f06ae&&_0x3f06ae[_0x553fbc(0x239)]('click',function(){const _0x1d3169=_0x553fbc;console[_0x1d3169(0x1cf)](_0x1d3169(0x1cb)),this['classList']['add'](_0x1d3169(0x17e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x415f0d=_0x1d3169;this[_0x415f0d(0x2d2)]['remove'](_0x415f0d(0x17e)),this[_0x415f0d(0xa7)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})[_0x1d3169(0x250)](_0x13035f=>{const _0x3a7c2f=_0x1d3169;console['error']('Error\x20loading\x20highlights:',_0x13035f),this[_0x3a7c2f(0x2d2)][_0x3a7c2f(0x11c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4db37c=_0x3a7c2f;this[_0x4db37c(0xa7)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x48ec73['includes'](_0x553fbc(0x1f6))){const _0x122f7c=document['getElementById'](_0x553fbc(0xa8));_0x122f7c&&_0x122f7c['addEventListener']('click',function(){const _0x392b3b=_0x553fbc;console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x392b3b(0xa7)]=_0x392b3b(0xd6),loadMatchesData(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x490337=>{const _0x428b27=_0x392b3b;console['error'](_0x428b27(0x1a4),_0x490337),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x81c91a=_0x428b27;this['innerHTML']=_0x81c91a(0x18a);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x48ec73['includes']('manage-ribbons')){const _0x5e18b1=document['getElementById']('load-ribbons-data');_0x5e18b1&&_0x5e18b1['addEventListener']('click',function(){const _0x4f0d81=_0x553fbc;console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()[_0x4f0d81(0x1d9)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x8ff273=>{const _0xe5e842=_0x4f0d81;console['error']('Error\x20loading\x20ribbons:',_0x8ff273),this['classList'][_0xe5e842(0x11c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x4e9eee=a4_0x425f91;document['getElementById']('player-count')[_0x4e9eee(0x107)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')[_0x4e9eee(0x107)]='-';}function a4_0x3c92(_0x5d045d,_0x218ac5){const _0x5a7806=a4_0x3e98();return a4_0x3c92=function(_0x1163b7,_0x4e66cf){_0x1163b7=_0x1163b7-0x81;let _0x3e9893=_0x5a7806[_0x1163b7];return _0x3e9893;},a4_0x3c92(_0x5d045d,_0x218ac5);}function setupLadderSelector(){const _0x23f479=a4_0x425f91,_0x1fb303=document['querySelectorAll']('.ladder-switch\x20input');_0x1fb303['forEach'](_0x4f5480=>{const _0x227018=a4_0x3c92;_0x4f5480['addEventListener'](_0x227018(0x1c7),()=>{const _0x57e6a0=_0x227018;currentLadder=_0x4f5480['value'],document['body'][_0x57e6a0(0xf2)]('data-ladder',currentLadder);const _0x3d42c9=document['getElementById']('current-ladder-display');_0x3d42c9&&(_0x3d42c9['textContent']=currentLadder),document['getElementById']('player-count')[_0x57e6a0(0x107)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-',charts[_0x57e6a0(0x254)]&&(charts[_0x57e6a0(0x254)][_0x57e6a0(0x128)](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x418f4a=document[_0x23f479(0x15b)]('current-ladder-display');_0x418f4a&&(_0x418f4a['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x1b9d6a=a4_0x425f91;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x1b9d6a(0x15b)](_0x1b9d6a(0x2a5))[_0x1b9d6a(0x107)]='-',document['getElementById'](_0x1b9d6a(0xe8))['textContent']='-',document['getElementById'](_0x1b9d6a(0x12a))['textContent']='-',document[_0x1b9d6a(0x15b)]('rejected-count')['textContent']='-';const _0x1701a9=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x3619b1=currentLadder==='D1'?_0x1b9d6a(0x1f0):currentLadder==='D2'?'approvedMatchesD2':_0x1b9d6a(0x8c),_0x221db0=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x441aea=currentLadder==='D1'?_0x1b9d6a(0x102):currentLadder==='D2'?'RejectedD2':'RejectedD3';console[_0x1b9d6a(0x1cf)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x1701a9+',\x20'+_0x3619b1);const _0x7aa32d=await getDocs(collection(db,_0x1701a9)),_0x214790=_0x7aa32d['size'],_0x46861a=await getDocs(collection(db,_0x3619b1)),_0x43eff9=_0x46861a['size'],_0x1adfa1=await getDocs(collection(db,_0x221db0)),_0x58f001=_0x1adfa1['size'],_0x1fa946=await getDocs(collection(db,_0x441aea)),_0x516d50=_0x1fa946['size'];return document['getElementById']('player-count')['textContent']=_0x214790,document['getElementById']('match-count')[_0x1b9d6a(0x107)]=_0x43eff9,document[_0x1b9d6a(0x15b)]('pending-count')[_0x1b9d6a(0x107)]=_0x58f001,document[_0x1b9d6a(0x15b)]('rejected-count')['textContent']=_0x516d50,await createRankDistributionChart(),await createActivityChart(),console['log'](_0x1b9d6a(0x1e1)),!![];}catch(_0x3d8682){console['error']('Error\x20loading\x20dashboard\x20data:',_0x3d8682);throw _0x3d8682;}}async function createRankDistributionChart(){const _0x5905fe=a4_0x425f91;try{const _0x4f9eba=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x20e656=await getDocs(_0x4f9eba),_0x2c0823={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x20e656['forEach'](_0x118e97=>{const _0x51b9a7=a4_0x3c92,_0x1dacb3=_0x118e97['data'](),_0x7145d6=_0x1dacb3[_0x51b9a7(0x17c)]||0x4b0;if(_0x7145d6>=0x7d0)_0x2c0823['Emerald']++;else{if(_0x7145d6>=0x708)_0x2c0823[_0x51b9a7(0x1fe)]++;else{if(_0x7145d6>=0x640)_0x2c0823[_0x51b9a7(0x111)]++;else{if(_0x7145d6>=0x578)_0x2c0823['Bronze']++;else _0x2c0823['Unranked']++;}}}});const _0x108dd9=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts[_0x5905fe(0x254)]=new Chart(_0x108dd9,{'type':_0x5905fe(0x2d6),'data':{'labels':Object['keys'](_0x2c0823),'datasets':[{'data':Object[_0x5905fe(0xac)](_0x2c0823),'backgroundColor':['#808080','#CD7F32',_0x5905fe(0x203),_0x5905fe(0x280),_0x5905fe(0x119)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x2b517e){console['error'](_0x5905fe(0x105),_0x2b517e),document['getElementById']('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x15ffef=a4_0x425f91;try{const _0x4c9e06=currentLadder==='D1'?'approvedMatches':_0x15ffef(0x1f1),_0x359df1=collection(db,_0x4c9e06),_0x101673=new Date();_0x101673['setDate'](_0x101673[_0x15ffef(0x100)]()-0x7);const _0x274882=query(_0x359df1,where(_0x15ffef(0x286),'>=',_0x101673),orderBy(_0x15ffef(0x286),'asc')),_0x143b77=await getDocs(_0x274882),_0xecb85c=['Sunday','Monday','Tuesday',_0x15ffef(0xd4),'Thursday',_0x15ffef(0x26e),'Saturday'],_0x2f18af=_0xecb85c['reduce']((_0x229606,_0x516a4b)=>({..._0x229606,[_0x516a4b]:0x0}),{});_0x143b77['forEach'](_0x11bbc0=>{const _0x39ba16=_0x11bbc0['data']();if(_0x39ba16['approvedAt']){const _0x4a63a5=_0xecb85c[new Date(_0x39ba16['approvedAt']['seconds']*0x3e8)['getDay']()];_0x2f18af[_0x4a63a5]++;}});const _0x1e2b02=document['getElementById'](_0x15ffef(0x1f4));charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x1e2b02,{'type':'bar','data':{'labels':_0xecb85c,'datasets':[{'label':_0x15ffef(0x1dd),'data':_0xecb85c['map'](_0x3e7273=>_0x2f18af[_0x3e7273]),'backgroundColor':currentLadder==='D1'?_0x15ffef(0x221):'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x201eef){console['error']('Error\x20creating\x20activity\x20chart:',_0x201eef),document['getElementById']('activity-chart')['innerHTML']=_0x15ffef(0x1a9);}}async function loadPlayersData(){const _0x2f0a83=a4_0x425f91,_0x382f1b=document['getElementById']('players-table-body');if(!_0x382f1b)return;_0x382f1b['innerHTML']=_0x2f0a83(0x11b);try{let _0x447a64='players';if(currentLadder==='D2')_0x447a64='playersD2';else currentLadder==='D3'&&(_0x447a64='playersD3');console[_0x2f0a83(0x1cf)]('Loading\x20players\x20from\x20'+_0x447a64+'\x20collection...');const _0x56136f=collection(db,_0x447a64),_0x38da32=query(_0x56136f,orderBy('eloRating','desc')),_0x2546b8=await getDocs(_0x38da32);if(_0x2546b8['empty']){_0x382f1b['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x382f1b['innerHTML']='';let _0x2fe14f=0x1;_0x2546b8['forEach'](_0xb1908c=>{const _0xd391bb=_0x2f0a83,_0x320e7c=_0xb1908c['data'](),_0x4f6e46=getRankFromElo(_0x320e7c[_0xd391bb(0x17c)]||0x4b0),_0x16f1a0=getRankStyle(_0x320e7c['eloRating']||0x4b0),_0x3fbdf4=document[_0xd391bb(0x135)]('tr');_0x3fbdf4[_0xd391bb(0xa7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x2fe14f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x16f1a0[_0xd391bb(0x173)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x320e7c[_0xd391bb(0xc7)]||_0xd391bb(0x244))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x320e7c['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x16f1a0['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4f6e46+_0xd391bb(0x92)+(_0x320e7c['wins']||0x0)+'W\x20/\x20'+(_0x320e7c[_0xd391bb(0x175)]||0x0)+_0xd391bb(0x227)+_0xb1908c['id']+_0xd391bb(0xd3)+_0xb1908c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x382f1b[_0xd391bb(0xf0)](_0x3fbdf4),_0x2fe14f++;}),setupPlayerActionButtons();}catch(_0x9cb857){console['error'](_0x2f0a83(0x275),_0x9cb857),_0x382f1b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x9cb857['message']+_0x2f0a83(0x151);}}function getRankFromElo(_0x2a2f4c){const _0x4753b3=a4_0x425f91;if(_0x2a2f4c>=0x7d0)return _0x4753b3(0x1af);if(_0x2a2f4c>=0x708)return'Gold';if(_0x2a2f4c>=0x640)return'Silver';if(_0x2a2f4c>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x2d0f27=a4_0x425f91;document[_0x2d0f27(0x2d1)]('.edit-btn')[_0x2d0f27(0x116)](_0x1a0b7e=>{_0x1a0b7e['addEventListener']('click',async _0x263d9a=>{const _0x1e6d18=a4_0x3c92,_0x10500d=_0x263d9a[_0x1e6d18(0x17b)][_0x1e6d18(0x1fd)]['id'];openEditPlayerModal(_0x10500d);});}),document['querySelectorAll'](_0x2d0f27(0x201))['forEach'](_0x49c2d7=>{const _0x52cd79=_0x2d0f27;_0x49c2d7[_0x52cd79(0x239)]('click',async _0x26efa4=>{const _0x3ca139=_0x26efa4['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x3ca139);});});}async function openEditPlayerModal(_0x201fb4){const _0x2392a2=a4_0x425f91;try{const _0x57fd96=currentLadder==='D1'?_0x2392a2(0x84):'playersD2',_0x3dec5b=doc(db,_0x57fd96,_0x201fb4),_0x3615b8=await getDoc(_0x3dec5b);if(!_0x3615b8['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x5f3f5b=_0x3615b8[_0x2392a2(0xca)](),_0x5bbb26=document[_0x2392a2(0x15b)](_0x2392a2(0x1f2)),_0x291d18=document['getElementById'](_0x2392a2(0x1e9)),_0x203043=document['getElementById']('edit-elo'),_0x149d9e=document['getElementById']('edit-wins'),_0x31c364=document[_0x2392a2(0x15b)](_0x2392a2(0x247));_0x291d18['value']=_0x5f3f5b['username']||'',_0x203043[_0x2392a2(0xba)]=_0x5f3f5b['eloRating']||0x4b0,_0x149d9e['value']=_0x5f3f5b['wins']||0x0,_0x31c364['value']=_0x5f3f5b['losses']||0x0,_0x5bbb26[_0x2392a2(0x1fd)]['playerId']=_0x201fb4,_0x5bbb26[_0x2392a2(0x2d2)]['add'](_0x2392a2(0x216));}catch(_0x3e8236){console['error']('Error\x20opening\x20edit\x20modal:',_0x3e8236),showNotification(_0x2392a2(0x1b8),'error');}}async function saveEditedPlayer(){const _0x9c93f=a4_0x425f91;try{const _0x401cc4=document['getElementById']('edit-player-modal'),_0x278fa9=_0x401cc4['dataset']['playerId'];if(!_0x278fa9){showNotification('No\x20player\x20selected','error');return;}const _0x589715=document[_0x9c93f(0x15b)]('edit-username'),_0x1e2aca=document['getElementById']('edit-elo'),_0x4a4d88=document['getElementById']('edit-wins'),_0x2489c0=document[_0x9c93f(0x15b)]('edit-losses'),_0x1ab5f5=_0x589715['value']['trim'](),_0x185f16=parseInt(_0x1e2aca['value']),_0x13db4f=parseInt(_0x4a4d88['value']),_0x155475=parseInt(_0x2489c0[_0x9c93f(0xba)]);if(!_0x1ab5f5||isNaN(_0x185f16)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x3e38e2=currentLadder==='D1'?'players':'playersD2',_0x5eaa25=doc(db,_0x3e38e2,_0x278fa9),_0x259c8b=await getDoc(_0x5eaa25),_0x4b4e22=_0x259c8b['exists']()?_0x259c8b[_0x9c93f(0xca)]():{},_0x2b114f=_0x4b4e22['eloRating']||0x4b0;await updateDoc(_0x5eaa25,{'username':_0x1ab5f5,'eloRating':_0x185f16,'wins':_0x13db4f||0x0,'losses':_0x155475||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x9c93f(0x24b)][_0x9c93f(0xfe)]});if(_0x185f16!==_0x2b114f){const _0xd76542=currentLadder==='D1'?_0x9c93f(0x2b8):_0x9c93f(0x2c4);await addDoc(collection(db,_0xd76542),{'player':_0x1ab5f5,'previousElo':_0x2b114f,'newElo':_0x185f16,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser'][_0x9c93f(0xfe)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x9c93f(0x29f),'success');}catch(_0x3b0ee5){console['error']('Error\x20updating\x20player:',_0x3b0ee5),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x3b0ee5[_0x9c93f(0x282)],'error');}}function closeEditPlayerModal(){const _0x3d845d=a4_0x425f91,_0x4cb51e=document['getElementById']('edit-player-modal');_0x4cb51e['classList']['remove'](_0x3d845d(0x216)),_0x4cb51e[_0x3d845d(0x1fd)]['playerId']='';}async function confirmDeletePlayer(_0x5b41e5){const _0x29caca=a4_0x425f91;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x548434=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x548434,_0x5b41e5)),loadPlayersData(),showNotification(_0x29caca(0xda),_0x29caca(0x1a2));}catch(_0x23f640){console['error']('Error\x20deleting\x20player:',_0x23f640),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x23f640[_0x29caca(0x282)],'error');}}async function setupManagePlayersSection(){const _0x1d2cfd=a4_0x425f91,_0x1e97f5=document['getElementById']('add-player-form');_0x1e97f5&&_0x1e97f5[_0x1d2cfd(0x239)](_0x1d2cfd(0x13c),async _0x5c8930=>{_0x5c8930['preventDefault'](),await addNewPlayer();});const _0x208168=document['getElementById'](_0x1d2cfd(0x248));_0x208168&&_0x208168[_0x1d2cfd(0x239)]('input',debounce(filterPlayerTable,0x12c));const _0x46c08a=document['getElementById']('save-player-btn');_0x46c08a&&_0x46c08a[_0x1d2cfd(0x239)](_0x1d2cfd(0xf7),saveEditedPlayer);const _0x5938df=document['getElementById']('cancel-edit-btn');_0x5938df&&_0x5938df[_0x1d2cfd(0x239)]('click',closeEditPlayerModal);const _0x5b663d=document['getElementById']('edit-player-modal');_0x5b663d&&_0x5b663d['addEventListener'](_0x1d2cfd(0xf7),_0x1398b8=>{const _0x42f3c7=_0x1d2cfd;_0x1398b8[_0x42f3c7(0x29d)]===_0x5b663d&&closeEditPlayerModal();});const _0x3e4365=document[_0x1d2cfd(0x15b)]('players-ladder-selector');_0x3e4365&&_0x3e4365[_0x1d2cfd(0x239)]('change',()=>{const _0x949b87=_0x1d2cfd;currentLadder=_0x3e4365[_0x949b87(0xba)],loadPlayersData();});}async function addNewPlayer(){const _0x595929=a4_0x425f91;try{const _0x536194=document[_0x595929(0x15b)](_0x595929(0x222)),_0x49d78f=document['getElementById'](_0x595929(0x183)),_0x2fa3fe=_0x536194['value']['trim'](),_0x3d9206=parseInt(_0x49d78f['value'])||0x4b0;if(!_0x2fa3fe){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0x2fa3fe+_0x595929(0x292)+_0x3d9206+_0x595929(0x18b)+currentLadder+'\x20ladder');let _0x58d0f0='players',_0x368026=_0x595929(0x2b8);if(currentLadder==='D2')_0x58d0f0='playersD2',_0x368026='eloHistoryD2';else currentLadder==='D3'&&(_0x58d0f0=_0x595929(0x25e),_0x368026='eloHistoryD3');const _0x26e3a5=query(collection(db,_0x58d0f0),where('username','==',_0x2fa3fe)),_0x185e14=await getDocs(_0x26e3a5);if(!_0x185e14['empty']){alert('Username\x20'+_0x2fa3fe+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x3d92f2=auth['currentUser'],_0x1a9ec6={'username':_0x2fa3fe,'eloRating':_0x3d9206,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x3d92f2?_0x3d92f2[_0x595929(0xfe)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x58d0f0),_0x1a9ec6),await addDoc(collection(db,_0x368026),{'player':_0x2fa3fe,'previousElo':0x4b0,'newElo':_0x3d9206,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x3d92f2?_0x3d92f2['email']:'admin','gameMode':currentLadder}),_0x536194['value']='',_0x49d78f['value']='1200',alert('Player\x20'+_0x2fa3fe+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x54d47d){console['error']('Error\x20adding\x20player:',_0x54d47d),alert('Error\x20adding\x20player:\x20'+_0x54d47d[_0x595929(0x282)]);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x32371e=a4_0x425f91,_0x531070=document['getElementById'](_0x32371e(0x166));_0x531070&&_0x531070['addEventListener']('submit',_0x39320c=>{_0x39320c['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x48917b=a4_0x425f91,_0x17c64a=document[_0x48917b(0x15b)](_0x48917b(0x248))[_0x48917b(0xba)][_0x48917b(0x197)](),_0x321ea5=document['querySelectorAll']('#players-table-body\x20tr');let _0x5de230=0x0;_0x321ea5['forEach'](_0x20deba=>{const _0x5cc87c=_0x48917b,_0x375dd1=_0x20deba['querySelector']('.username')?.['textContent'][_0x5cc87c(0x197)]()||'';_0x375dd1['includes'](_0x17c64a)?(_0x20deba['style']['display']='',_0x5de230++):_0x20deba[_0x5cc87c(0xf6)]['display']=_0x5cc87c(0x2b0);});const _0x37a753=document['getElementById'](_0x48917b(0x2c5));_0x37a753&&(_0x5de230===0x0&&_0x17c64a!==''?_0x37a753['style'][_0x48917b(0x2ab)]='block':_0x37a753['style'][_0x48917b(0x2ab)]='none');}function debounce(_0xa93438,_0x242b42){let _0x2e3bfa;return function(..._0x2005f3){clearTimeout(_0x2e3bfa),_0x2e3bfa=setTimeout(()=>_0xa93438['apply'](this,_0x2005f3),_0x242b42);};}async function loadEloHistory(_0x3c218b=0x1){const _0x376b84=a4_0x425f91,_0x52cbd0=document['getElementById'](_0x376b84(0x1f8)),_0xb7ba0=currentLadder['toLowerCase']();if(!_0x52cbd0)return;_0x52cbd0['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x3b8609=currentLadder==='D1'?_0x376b84(0x2b8):currentLadder==='D2'?_0x376b84(0x2c4):'eloHistoryD3',_0x7f3a26=collection(db,_0x3b8609);let _0xf65a24;if(_0x3c218b>eloHistoryPagination[_0xb7ba0]['page']&&eloHistoryPagination[_0xb7ba0][_0x376b84(0x297)])_0xf65a24=query(_0x7f3a26,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0xb7ba0][_0x376b84(0x297)]),limit(PAGE_SIZE));else _0x3c218b<eloHistoryPagination[_0xb7ba0]['page']&&eloHistoryPagination[_0xb7ba0]['firstVisible']?_0xf65a24=query(_0x7f3a26,orderBy('timestamp',_0x376b84(0x1a8)),endBefore(eloHistoryPagination[_0xb7ba0]['firstVisible']),limitToLast(PAGE_SIZE)):_0xf65a24=query(_0x7f3a26,orderBy('timestamp',_0x376b84(0x1a8)),limit(PAGE_SIZE));const _0x166e94=await getDocs(_0xf65a24);if(_0x166e94[_0x376b84(0x2a7)]){_0x52cbd0['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0xb7ba0+'-page-indicator')['textContent']=_0x376b84(0x1cd);return;}eloHistoryPagination[_0xb7ba0]['page']=_0x3c218b,eloHistoryPagination[_0xb7ba0][_0x376b84(0x2a4)]=_0x166e94['docs'][0x0],eloHistoryPagination[_0xb7ba0][_0x376b84(0x297)]=_0x166e94['docs'][_0x166e94[_0x376b84(0xb8)]['length']-0x1];const _0x16fba5=new Map();_0x52cbd0['innerHTML']='';const _0x2e4917=async _0x1f05da=>{const _0x188faa=_0x376b84;if(typeof _0x1f05da!=='string'||_0x1f05da['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x1f05da))return _0x1f05da;if(_0x16fba5['has'](_0x1f05da))return _0x16fba5['get'](_0x1f05da);try{for(const _0x58f485 of['players','playersD2','playersD3','nonParticipants']){const _0x11a5a7=await getDoc(doc(db,_0x58f485,_0x1f05da));if(_0x11a5a7['exists']()&&_0x11a5a7['data']()['username']){const _0x2b798d=_0x11a5a7[_0x188faa(0xca)]()['username'];return _0x16fba5['set'](_0x1f05da,_0x2b798d),_0x2b798d;}}return _0x1f05da;}catch(_0xaf80c1){return console[_0x188faa(0x109)]('Error\x20resolving\x20username\x20for\x20'+_0x1f05da+':',_0xaf80c1),_0x1f05da;}};for(const _0x2b71ad of _0x166e94[_0x376b84(0xb8)]){const _0x3a10bc=_0x2b71ad[_0x376b84(0xca)](),_0x34b917=document['createElement']('tr'),_0x2da12d=_0x3a10bc['timestamp']?new Date(_0x3a10bc['timestamp'][_0x376b84(0x29c)]*0x3e8)[_0x376b84(0x238)]():'N/A',_0x1e273c=_0x3a10bc['newElo']-_0x3a10bc['previousElo'],_0x3e7596=_0x1e273c>0x0?'positive-change':_0x1e273c<0x0?'negative-change':'',_0x291d28=_0x1e273c>0x0?'+':'',_0x336b90=_0x3a10bc['player']||_0x3a10bc['username']||_0x3a10bc['userId']||_0x376b84(0x2a6),_0x122ff4=await _0x2e4917(_0x336b90);_0x34b917[_0x376b84(0xa7)]=_0x376b84(0xd9)+_0x2da12d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x122ff4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x3a10bc['previousElo']||'N/A')+_0x376b84(0x117)+(_0x3a10bc[_0x376b84(0xfa)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x3e7596+'\x22>'+_0x291d28+_0x1e273c+_0x376b84(0xad)+formatHistoryType(_0x3a10bc['type'])+_0x376b84(0x1f7)+(_0x3a10bc['modifiedBy']||_0x3a10bc['promotedBy']||_0x3a10bc['demotedBy']||'System')+_0x376b84(0xde),_0x52cbd0[_0x376b84(0xf0)](_0x34b917);}document['getElementById'](_0xb7ba0+'-page-indicator')[_0x376b84(0x107)]='Page\x20'+_0x3c218b;const _0x2d112b=document['getElementById'](_0xb7ba0+'-prev-page'),_0xfdcb4=document['getElementById'](_0xb7ba0+'-next-page');if(_0x2d112b)_0x2d112b['disabled']=_0x3c218b<=0x1;const _0x1855c9=query(_0x7f3a26,orderBy('timestamp',_0x376b84(0x1a8)),startAfter(eloHistoryPagination[_0xb7ba0][_0x376b84(0x297)]),limit(0x1)),_0x20769c=await getDocs(_0x1855c9);if(_0xfdcb4)_0xfdcb4['disabled']=_0x20769c['empty'];}catch(_0x3ec490){console[_0x376b84(0x240)]('Error\x20loading\x20ELO\x20history:',_0x3ec490),_0x52cbd0[_0x376b84(0xa7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x3ec490[_0x376b84(0x282)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x15d685){const _0x2827b9=a4_0x425f91;switch(_0x15d685){case'match_result':return _0x2827b9(0x287);case'promotion':return'Promotion';case'demotion':return'Demotion';case'admin_modification':return _0x2827b9(0xee);case'initial_placement':return'Initial\x20Placement';default:return _0x15d685||'Unknown';}}function setupEloHistorySection(){const _0xa8c796=a4_0x425f91;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById'](_0xa8c796(0x258))[_0xa8c796(0x239)](_0xa8c796(0xf7),()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')['addEventListener'](_0xa8c796(0xf7),()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')[_0xa8c796(0x239)](_0xa8c796(0xf7),()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x54ddb4=document['getElementById']('d3-prev-page'),_0x298482=document[_0xa8c796(0x15b)]('d3-next-page');_0x54ddb4&&_0x54ddb4[_0xa8c796(0x239)]('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x298482&&_0x298482['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x42ec08=document['getElementById'](_0xa8c796(0x20a));_0x42ec08&&_0x42ec08[_0xa8c796(0x239)]('input',debounce(filterEloHistoryTable,0x12c));const _0x4fe86f=document['getElementById'](_0xa8c796(0x188));_0x4fe86f&&_0x4fe86f['addEventListener'](_0xa8c796(0x1c7),applyEloHistoryFilters);const _0x31abf5=document['getElementById'](_0xa8c796(0xfc));_0x31abf5&&_0x31abf5['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x498ea8=a4_0x425f91,_0x2ac321=document[_0x498ea8(0x15b)]('elo-history-search')['value']['toLowerCase'](),_0x42422b=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x2784a5=0x0;_0x42422b['forEach'](_0xe4089c=>{const _0x337808=_0x498ea8;if(_0xe4089c[_0x337808(0x2d2)]['contains']('loading-cell')||_0xe4089c['classList']['contains']('empty-state')||_0xe4089c[_0x337808(0x2d2)][_0x337808(0x256)]('error-state'))return;const _0x50cf75=_0xe4089c['querySelector']('.player')?.['textContent']['toLowerCase']()||'',_0x3f27fb=_0xe4089c[_0x337808(0x163)]('.type')?.['textContent']['toLowerCase']()||'',_0x570cb7=_0xe4089c[_0x337808(0x163)]('.admin-action')?.[_0x337808(0x107)]['toLowerCase']()||'';_0x50cf75[_0x337808(0xcf)](_0x2ac321)||_0x3f27fb['includes'](_0x2ac321)||_0x570cb7['includes'](_0x2ac321)?(_0xe4089c[_0x337808(0xf6)]['display']='',_0x2784a5++):_0xe4089c[_0x337808(0xf6)]['display']=_0x337808(0x2b0);});}async function applyEloHistoryFilters(){const _0x720899=a4_0x425f91,_0x558020=document['getElementById']('history-start-date')['value'],_0x4e6071=document['getElementById']('history-end-date')['value'],_0x5a5d1d=document['getElementById']('history-type-filter')[_0x720899(0xba)],_0x166867=currentLadder[_0x720899(0x197)]();eloHistoryPagination[_0x166867]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0xc621f9=document[_0x720899(0x15b)]('elo-history-table-body');_0xc621f9['innerHTML']=_0x720899(0x141);try{const _0x37cae2=currentLadder==='D1'?_0x720899(0x2b8):'eloHistoryD2',_0x114751=collection(db,_0x37cae2);let _0x3500e5=[orderBy('timestamp','desc')];if(_0x558020){const _0x3a2d31=new Date(_0x558020);_0x3a2d31['setHours'](0x0,0x0,0x0,0x0),_0x3500e5['push'](where(_0x720899(0xbc),'>=',_0x3a2d31));}if(_0x4e6071){const _0x2fab8b=new Date(_0x4e6071);_0x2fab8b[_0x720899(0x2a3)](0x17,0x3b,0x3b,0x3e7),_0x3500e5[_0x720899(0x27a)](where(_0x720899(0xbc),'<=',_0x2fab8b));}_0x5a5d1d&&_0x5a5d1d!==_0x720899(0x1a0)&&_0x3500e5['push'](where('type','==',_0x5a5d1d));_0x3500e5['push'](limit(PAGE_SIZE));const _0x2169cd=query(_0x114751,..._0x3500e5),_0x4741c8=await getDocs(_0x2169cd);!_0x4741c8['empty']&&(eloHistoryPagination[_0x166867][_0x720899(0x2a4)]=_0x4741c8['docs'][0x0],eloHistoryPagination[_0x166867][_0x720899(0x297)]=_0x4741c8['docs'][_0x4741c8[_0x720899(0xb8)]['length']-0x1]);_0xc621f9['innerHTML']='';if(_0x4741c8['empty']){_0xc621f9['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x4741c8['forEach'](_0x32ed30=>{const _0x17caa1=_0x720899,_0x180933=_0x32ed30['data'](),_0x42d3de=document['createElement']('tr'),_0x5c38f7=_0x180933['timestamp']?new Date(_0x180933['timestamp']['seconds']*0x3e8)['toLocaleString']():_0x17caa1(0x2a6),_0x509f50=_0x180933['newElo']-_0x180933['previousElo'],_0x4e20fe=_0x509f50>0x0?'positive-change':_0x509f50<0x0?'negative-change':'',_0x4ac9c4=_0x509f50>0x0?'+':'',_0x4c1948=_0x180933['player']||_0x180933['username']||_0x180933['userId']||'N/A';_0x42d3de[_0x17caa1(0xa7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x5c38f7+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x4c1948+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x180933['previousElo']||'N/A')+_0x17caa1(0x117)+(_0x180933['newElo']||_0x17caa1(0x2a6))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4e20fe+'\x22>'+_0x4ac9c4+_0x509f50+_0x17caa1(0xad)+formatHistoryType(_0x180933['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x180933['modifiedBy']||_0x180933['promotedBy']||_0x180933['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xc621f9['appendChild'](_0x42d3de);}),document['getElementById'](_0x166867+'-page-indicator')[_0x720899(0x107)]='Page\x201';}catch(_0x23fb46){console['error']('Error\x20applying\x20filters:',_0x23fb46),_0xc621f9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x23fb46['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x1d2c3b=a4_0x425f91;document['getElementById']('history-start-date')[_0x1d2c3b(0xba)]='',document['getElementById']('history-end-date')[_0x1d2c3b(0xba)]='',document['getElementById']('history-type-filter')['value']='all',document['getElementById']('elo-history-search')['value']='';const _0x368a53=currentLadder[_0x1d2c3b(0x197)]();eloHistoryPagination[_0x368a53]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x414975=a4_0x425f91,_0x2b6e07=document['getElementById']('promote-player-btn'),_0x46a5b5=document['getElementById']('promote-modal'),_0x2fb263=document['getElementById']('promote-form');_0x2b6e07&&_0x46a5b5&&_0x2fb263&&(_0x2b6e07['addEventListener'](_0x414975(0xf7),()=>{const _0x68a505=_0x414975;_0x46a5b5[_0x68a505(0x2d2)]['add']('active');}),_0x46a5b5['addEventListener']('click',_0x35defa=>{const _0x38cd69=_0x414975;_0x35defa['target']===_0x46a5b5&&_0x46a5b5[_0x38cd69(0x2d2)]['remove'](_0x38cd69(0x216));}),_0x2fb263['addEventListener']('submit',async _0x394a69=>{const _0x169058=_0x414975;_0x394a69['preventDefault']();const _0x17c8d4=document[_0x169058(0x15b)]('promote-username'),_0x55060a=document['getElementById'](_0x169058(0x2b7)),_0x25b190=_0x17c8d4[_0x169058(0xba)][_0x169058(0x281)](),_0x5d89e5=_0x55060a['value'];if(!_0x25b190){showNotification(_0x169058(0x130),'error');return;}try{await promotePlayer(_0x25b190,_0x5d89e5),_0x46a5b5['classList'][_0x169058(0x11c)](_0x169058(0x216)),_0x17c8d4[_0x169058(0xba)]='';}catch(_0x38ee7e){showNotification(_0x38ee7e['message'],_0x169058(0x240));}}),document['getElementById']('cancel-promote-btn')['addEventListener'](_0x414975(0xf7),()=>{_0x46a5b5['classList']['remove']('active');}));const _0x24b300=document[_0x414975(0x15b)](_0x414975(0x22f)),_0x1e6b49=document['getElementById']('demote-modal'),_0x36110d=document['getElementById'](_0x414975(0x2ce));_0x24b300&&_0x1e6b49&&_0x36110d&&(_0x24b300['addEventListener']('click',()=>{const _0x2a1595=_0x414975;_0x1e6b49['classList']['add'](_0x2a1595(0x216));}),_0x1e6b49[_0x414975(0x239)]('click',_0x288dd9=>{_0x288dd9['target']===_0x1e6b49&&_0x1e6b49['classList']['remove']('active');}),_0x36110d['addEventListener'](_0x414975(0x13c),async _0xd428ca=>{const _0x24e566=_0x414975;_0xd428ca['preventDefault']();const _0x246382=document['getElementById']('demote-username'),_0xb7546f=document['getElementById']('demote-ladder'),_0x99f6fe=_0x246382['value']['trim'](),_0x2b33be=_0xb7546f['value'];if(!_0x99f6fe){alert(_0x24e566(0x130));return;}try{await demotePlayer(_0x99f6fe,_0x2b33be),document['getElementById']('demote-modal')[_0x24e566(0x2d2)]['remove'](_0x24e566(0x216)),document['getElementById']('demote-username')[_0x24e566(0xba)]='';}catch(_0x111230){console[_0x24e566(0x240)](_0x24e566(0x25c),_0x111230);}}));const _0x2ddd24=document[_0x414975(0x15b)](_0x414975(0x1de)),_0x22cf44=document['getElementById']('set-elo-modal'),_0x3d82f7=document['getElementById']('set-elo-form');_0x2ddd24&&_0x22cf44&&_0x3d82f7&&(_0x2ddd24['addEventListener']('click',()=>{_0x22cf44['classList']['add']('active');}),_0x22cf44['addEventListener'](_0x414975(0xf7),_0x4555a2=>{const _0x1c19dc=_0x414975;_0x4555a2['target']===_0x22cf44&&_0x22cf44[_0x1c19dc(0x2d2)][_0x1c19dc(0x11c)]('active');}),_0x3d82f7['addEventListener']('submit',async _0x4e2ec9=>{const _0x289a97=_0x414975;_0x4e2ec9['preventDefault']();const _0x196151=document['getElementById'](_0x289a97(0x158)),_0x541e3e=document['getElementById']('set-elo-value');let _0x164c6a;const _0x5d1445=document[_0x289a97(0x15b)]('set-elo-ladder'),_0xbb3d3d=document[_0x289a97(0x163)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0x5d1445)_0x164c6a=_0x5d1445[_0x289a97(0xba)];else _0xbb3d3d?_0x164c6a=_0xbb3d3d['value']:_0x164c6a='D1';if(!_0x196151||!_0x541e3e){showNotification('Form\x20elements\x20are\x20missing',_0x289a97(0x240));return;}const _0xb8532d=_0x196151['value']['trim'](),_0x585388=parseInt(_0x541e3e['value']);if(!_0xb8532d||isNaN(_0x585388)){showNotification(_0x289a97(0x1df),_0x289a97(0x240));return;}try{await setCustomElo(_0xb8532d,_0x585388,_0x164c6a),_0x22cf44[_0x289a97(0x2d2)][_0x289a97(0x11c)]('active'),_0x196151['value']='',_0x541e3e[_0x289a97(0xba)]='';}catch(_0x21d3b2){showNotification(_0x21d3b2['message'],'error');}}),document['getElementById']('cancel-set-elo-btn')[_0x414975(0x239)]('click',()=>{const _0x3da5c8=_0x414975;_0x22cf44['classList']['remove'](_0x3da5c8(0x216));}));const _0x5d2420=document['getElementById']('set-role-modal'),_0x2cea0a=document[_0x414975(0x15b)]('set-role-form');if(_0x5d2420&&_0x2cea0a){_0x5d2420['addEventListener']('click',_0x5c4325=>{const _0x11cdcb=_0x414975;_0x5c4325[_0x11cdcb(0x29d)]===_0x5d2420&&closeModalHandler();}),_0x2cea0a[_0x414975(0x239)]('submit',async _0x452dd6=>{const _0x56fae8=_0x414975;_0x452dd6['preventDefault']();const _0x94e43f=document['getElementById'](_0x56fae8(0x179)),_0x119e2e=document['getElementById']('role-name'),_0x4815d7=document['getElementById']('role-color'),_0x2db384=_0x94e43f['value']['trim'](),_0xaa6d2c=_0x119e2e['value']['trim'](),_0x376374=_0x4815d7['value'];if(!_0x2db384){showNotification('Username\x20is\x20missing',_0x56fae8(0x240));return;}try{await setUserRole(_0x2db384,_0xaa6d2c,_0x376374),closeModalHandler(),loadUsersWithRoles();}catch(_0x3285e4){}});const _0x6b0b9b=document['getElementById']('cancel-role-btn');_0x6b0b9b&&(_0x6b0b9b['removeEventListener']('click',closeModalHandler),_0x6b0b9b[_0x414975(0x239)]('click',closeModalHandler));}}async function promotePlayer(_0x413586,_0x4e0069){const _0xe22615=a4_0x425f91;try{console['log']('Attempting\x20to\x20promote\x20'+_0x413586+'\x20in\x20'+_0x4e0069+_0xe22615(0x2d3));const _0x20a9b0=auth['currentUser'];if(!_0x20a9b0)throw new Error(_0xe22615(0x234));const _0x3577ce=_0x4e0069==='D2'?'playersD2':'players',_0x554383=_0x4e0069==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x3577ce);const _0xc035c5=collection(db,_0x3577ce),_0x4e476a=query(_0xc035c5,where('username','==',_0x413586)),_0x5af36e=await getDocs(_0x4e476a);if(_0x5af36e[_0xe22615(0x2a7)]){alert('Player\x20not\x20found\x20in\x20'+_0x4e0069+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x4e0069+'\x20ladder');}const _0x3cd127=_0x5af36e[_0xe22615(0xb8)][0x0],_0x4445de=_0x3cd127['data'](),_0x2745fd=_0x4445de['eloRating']||0x4b0,_0x573e6a=_0x3cd127['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x2745fd);const _0x207bc3=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x546f58=_0x207bc3['find'](_0x502f5d=>_0x502f5d['elo']>_0x2745fd);if(!_0x546f58){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x4e0069+_0xe22615(0x2d3));throw new Error(_0xe22615(0xdd)+_0x4e0069+'\x20ladder');}console['log']('Promoting\x20player\x20to\x20'+_0x546f58[_0xe22615(0x89)]+'\x20('+_0x546f58['elo']+')'),await updateDoc(doc(db,_0x3577ce,_0x3cd127['id']),{'eloRating':_0x546f58[_0xe22615(0x22a)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x20a9b0[_0xe22615(0xfe)]||_0xe22615(0x28b)}),await addDoc(collection(db,_0x554383),{'player':_0x413586,'previousElo':_0x2745fd,'newElo':_0x546f58['elo'],'timestamp':serverTimestamp(),'type':_0xe22615(0x127),'rankAchieved':_0x546f58['name'],'promotedBy':_0x20a9b0['email']||'admin','gameMode':_0x4e0069});try{const {promotionManager:_0x5c1802}=await import(_0xe22615(0x2a9)),_0xe2b55a=_0x5c1802['getRankName'](_0x2745fd),_0x7afb3a=_0x546f58[_0xe22615(0x89)];await _0x5c1802[_0xe22615(0x235)](_0x573e6a,_0x413586,_0x2745fd,_0x546f58[_0xe22615(0x22a)],_0xe2b55a,_0x7afb3a,_0xe22615(0x127),{'displayName':_0x413586,'source':'admin','adminUser':_0x20a9b0['email'],'ladder':_0x4e0069}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0xbc9bcb){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0xbc9bcb);}return alert(_0xe22615(0x19f)+_0x413586+'\x20to\x20'+_0x546f58['name']+'\x20('+_0x546f58['elo']+')'),currentLadder===_0x4e0069&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x1e5219){console[_0xe22615(0x240)](_0xe22615(0x257),_0x1e5219),alert('Error\x20promoting\x20player:\x20'+_0x1e5219['message']);throw _0x1e5219;}}document[a4_0x425f91(0x239)]('DOMContentLoaded',()=>{const _0x390de8=a4_0x425f91,_0x1bc888=document['getElementById'](_0x390de8(0x184));_0x1bc888&&_0x1bc888[_0x390de8(0x239)]('submit',async _0x1e72eb=>{const _0xfad3f1=_0x390de8;_0x1e72eb['preventDefault']();const _0x4c4be3=document['getElementById']('promote-username')[_0xfad3f1(0xba)][_0xfad3f1(0x281)](),_0x159645=document['querySelector'](_0xfad3f1(0x23d))['value'];if(!_0x4c4be3){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x4c4be3,_0x159645),document['getElementById'](_0xfad3f1(0x219))['classList']['remove'](_0xfad3f1(0x216)),document['getElementById'](_0xfad3f1(0x2bb))['value']='';}catch(_0x406035){console['error']('Error\x20in\x20promotion:',_0x406035);}});});async function demotePlayer(_0x48749c,_0x6edeaa){const _0x19de7b=a4_0x425f91;try{console['log']('Attempting\x20to\x20demote\x20'+_0x48749c+_0x19de7b(0x1ca)+_0x6edeaa+'\x20ladder');const _0x269a59=auth['currentUser'];if(!_0x269a59)throw new Error(_0x19de7b(0x234));const _0x856174=_0x6edeaa==='D2'?'playersD2':_0x19de7b(0x84),_0x1b7d38=_0x6edeaa==='D2'?'eloHistoryD2':'eloHistory';console['log'](_0x19de7b(0x1d8)+_0x856174);const _0x43b0cb=collection(db,_0x856174),_0x91fc3c=query(_0x43b0cb,where(_0x19de7b(0xc7),'==',_0x48749c)),_0x10eed7=await getDocs(_0x91fc3c);if(_0x10eed7['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x6edeaa+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x6edeaa+'\x20ladder');}const _0x9068b8=_0x10eed7[_0x19de7b(0xb8)][0x0],_0x55fc06=_0x9068b8[_0x19de7b(0xca)](),_0x2b6a5b=_0x55fc06['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x2b6a5b);const _0x398174=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x19de7b(0x12f),'elo':0x578},{'name':_0x19de7b(0x25d),'elo':0x4b0}];let _0x42b09b=_0x398174['find'](_0x45e560=>_0x45e560['elo']<_0x2b6a5b);if(!_0x42b09b){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x6edeaa+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x6edeaa+_0x19de7b(0x2d3));}console[_0x19de7b(0x1cf)]('Demoting\x20player\x20to\x20'+_0x42b09b['name']+'\x20('+_0x42b09b['elo']+')'),await updateDoc(doc(db,_0x856174,_0x9068b8['id']),{'eloRating':_0x42b09b['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x269a59['email']||'admin'}),await addDoc(collection(db,_0x1b7d38),{'player':_0x48749c,'previousElo':_0x2b6a5b,'newElo':_0x42b09b[_0x19de7b(0x22a)],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x42b09b[_0x19de7b(0x89)],'demotedBy':_0x269a59[_0x19de7b(0xfe)]||'admin','gameMode':_0x6edeaa});try{const {promotionManager:_0x926ac9}=await import('./promotions.js'),_0x27bfa2=_0x926ac9['getRankName'](_0x2b6a5b),_0x1b98ae=_0x42b09b['name'];await _0x926ac9['sendPromotionNotification'](_0x9068b8['id'],_0x48749c,_0x2b6a5b,_0x42b09b[_0x19de7b(0x22a)],_0x27bfa2,_0x1b98ae,'demotion',{'displayName':_0x48749c,'source':'admin','adminUser':_0x269a59[_0x19de7b(0xfe)],'ladder':_0x6edeaa}),console['log'](_0x19de7b(0x26b));}catch(_0x529fbf){console[_0x19de7b(0x240)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x529fbf);}return alert(_0x19de7b(0xc5)+_0x48749c+_0x19de7b(0x18b)+_0x42b09b[_0x19de7b(0x89)]+'\x20('+_0x42b09b['elo']+')'),currentLadder===_0x6edeaa&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x42fefe){console['error'](_0x19de7b(0x10d),_0x42fefe),alert(_0x19de7b(0x208)+_0x42fefe['message']);throw _0x42fefe;}}document[a4_0x425f91(0x239)]('DOMContentLoaded',()=>{const _0x3af536=a4_0x425f91,_0x1fcb79=document[_0x3af536(0x15b)]('demote-form');_0x1fcb79&&_0x1fcb79['addEventListener']('submit',async _0x256b53=>{const _0x3c7061=_0x3af536;_0x256b53[_0x3c7061(0x27b)]();const _0x38e516=document[_0x3c7061(0x15b)]('demote-username')[_0x3c7061(0xba)]['trim'](),_0x6eda22=document[_0x3c7061(0x163)]('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x38e516){alert(_0x3c7061(0x130));return;}try{await demotePlayer(_0x38e516,_0x6eda22),document[_0x3c7061(0x15b)]('demote-modal')['classList']['remove']('active'),document['getElementById'](_0x3c7061(0x213))['value']='';}catch(_0x53acb8){console['error']('Error\x20in\x20demotion:',_0x53acb8);}});});async function setCustomElo(_0x189f8c,_0xb14a90,_0x19b65e){const _0x5a1496=a4_0x425f91;try{const _0x12ac55=auth['currentUser'];if(!_0x12ac55||!isAdmin(_0x12ac55['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x5e0e21=_0x19b65e==='D2'?'playersD2':_0x5a1496(0x84),_0x369b8a=_0x19b65e==='D2'?_0x5a1496(0x2c4):'eloHistory',_0x413562=collection(db,_0x5e0e21),_0x461ee1=query(_0x413562,where('username','==',_0x189f8c)),_0x4c8f8f=await getDocs(_0x461ee1);if(_0x4c8f8f['empty'])throw new Error(_0x5a1496(0x16a)+_0x19b65e+'\x20ladder');const _0x237644=_0x4c8f8f['docs'][0x0],_0x322e79=_0x237644['data'](),_0xab83b3=_0x322e79['eloRating']||0x4b0,_0x2ef49e=writeBatch(db);_0x2ef49e[_0x5a1496(0x1c6)](doc(db,_0x5e0e21,_0x237644['id']),{'eloRating':_0xb14a90,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x12ac55[_0x5a1496(0xfe)]});const _0x146f23=doc(collection(db,_0x369b8a));return _0x2ef49e['set'](_0x146f23,{'player':_0x189f8c,'previousElo':_0xab83b3,'newElo':_0xb14a90,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x12ac55['email'],'gameMode':_0x19b65e}),await _0x2ef49e[_0x5a1496(0x2b6)](),showNotification('ELO\x20rating\x20for\x20'+_0x189f8c+'\x20was\x20updated\x20from\x20'+_0xab83b3+'\x20to\x20'+_0xb14a90,'success'),currentLadder===_0x19b65e&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x4e59fd){console['error']('Error\x20setting\x20custom\x20ELO:',_0x4e59fd);throw _0x4e59fd;}}async function setUserRole(_0x18cf44,_0x3ac4f2,_0x5bf178){const _0x250e74=a4_0x425f91;try{const _0x4987ae=auth['currentUser'];if(!_0x4987ae||!isAdmin(_0x4987ae['email']))throw new Error(_0x250e74(0x209));const _0x3104ec=_0x3ac4f2?_0x3ac4f2[_0x250e74(0x281)]():null,_0x375b58=_0x3104ec?_0x5bf178||'#808080':null,[_0x49656d,_0x372276]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x18cf44))),getDocs(query(collection(db,'playersD2'),where(_0x250e74(0xc7),'==',_0x18cf44)))]),_0x1f1444=[];if(!_0x49656d[_0x250e74(0x2a7)])_0x1f1444[_0x250e74(0x27a)]({'ref':_0x49656d[_0x250e74(0xb8)][0x0]['ref'],'source':'D1'});if(!_0x372276[_0x250e74(0x2a7)])_0x1f1444['push']({'ref':_0x372276['docs'][0x0]['ref'],'source':'D2'});if(_0x1f1444[_0x250e74(0x21e)]===0x0){const [_0xa0c7c2,_0x4bd219]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x18cf44))),getDocs(query(collection(db,'userProfiles'),where(_0x250e74(0xc7),'==',_0x18cf44)))]);if(!_0xa0c7c2['empty'])_0x1f1444['push']({'ref':_0xa0c7c2['docs'][0x0]['ref'],'source':'NonParticipant'});if(!_0x4bd219['empty'])_0x1f1444['push']({'ref':_0x4bd219['docs'][0x0]['ref'],'source':_0x250e74(0x245)});}if(_0x1f1444['length']===0x0)throw new Error('User\x20\x22'+_0x18cf44+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x390f80=writeBatch(db);_0x1f1444['forEach'](_0x5c3a98=>{const _0x52821d=_0x250e74;console['log']('Updating\x20role\x20for\x20'+_0x18cf44+'\x20in\x20'+_0x5c3a98['source']),!_0x3104ec?_0x390f80[_0x52821d(0x1c6)](_0x5c3a98['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x390f80['update'](_0x5c3a98[_0x52821d(0x1bc)],{'roleName':_0x3104ec,'roleColor':_0x375b58,'roleAssignedBy':_0x4987ae[_0x52821d(0xfe)],'roleAssignedAt':serverTimestamp()});}),await _0x390f80['commit']();const _0x27aa3f=_0x3104ec?_0x250e74(0x226)+_0x3104ec+'\x22\x20set':'Role\x20removed';return showNotification(_0x27aa3f+'\x20for\x20user\x20\x22'+_0x18cf44+'\x22','success'),!![];}catch(_0x360e1b){console['error'](_0x250e74(0x171),_0x360e1b),showNotification('Error:\x20'+_0x360e1b[_0x250e74(0x282)],'error');throw _0x360e1b;}}function showNotification(_0x3eccd4,_0x4b36cf=a4_0x425f91(0x270)){const _0x229994=a4_0x425f91,_0x2b3ad=document['createElement']('div');_0x2b3ad['className']='notification\x20'+_0x4b36cf,_0x2b3ad[_0x229994(0xa7)]=_0x229994(0x1fc)+getNotificationIcon(_0x4b36cf)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x3eccd4+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x2b3ad),setTimeout(()=>{_0x2b3ad['classList']['add']('active');},0xa);const _0x3e8d24=setTimeout(()=>{closeNotification(_0x2b3ad);},0x1388);_0x2b3ad['querySelector'](_0x229994(0xa6))[_0x229994(0x239)]('click',()=>{clearTimeout(_0x3e8d24),closeNotification(_0x2b3ad);});}function getNotificationIcon(_0x234df2){const _0x1e01a7=a4_0x425f91;switch(_0x234df2){case'success':return'fa-check-circle';case _0x1e01a7(0x240):return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case'info':default:return'fa-info-circle';}}function closeNotification(_0x438cd1){const _0x3ea57c=a4_0x425f91;_0x438cd1['classList']['remove'](_0x3ea57c(0x216)),setTimeout(()=>{_0x438cd1['remove']();},0x12c);}function setupUserRolesSection(){const _0x827304=a4_0x425f91,_0x3da5f2=document['getElementById']('load-users-data');_0x3da5f2&&_0x3da5f2[_0x827304(0x239)]('click',function(){const _0x1b014f=_0x827304;this['classList'][_0x1b014f(0x2bc)](_0x1b014f(0x17e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x35f25d=_0x1b014f;this[_0x35f25d(0x2d2)][_0x35f25d(0x11c)](_0x35f25d(0x17e)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x153a17=>{const _0xb75ee3=_0x1b014f;console['error']('Error\x20loading\x20users:',_0x153a17),this[_0xb75ee3(0x2d2)]['remove']('loading'),this[_0xb75ee3(0xa7)]=_0xb75ee3(0xa9),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x25ce83=document['getElementById'](_0x827304(0xb6));_0x25ce83&&_0x25ce83[_0x827304(0x239)]('click',()=>{const _0x5ef4a1=document['getElementById']('set-role-modal');_0x5ef4a1&&_0x5ef4a1['classList']['add']('active');});const _0x2f7a45=document['getElementById'](_0x827304(0x232));_0x2f7a45&&_0x2f7a45['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x3baba7=document['getElementById']('role-filter');_0x3baba7&&_0x3baba7['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x3bf58b=a4_0x425f91,_0x4550a1=document['getElementById']('users-table-body');if(!_0x4550a1)return;_0x4550a1['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x5876d3,_0xcf5ec9,_0x10ab8e,_0x56cb7d]=await Promise['all']([getDocs(collection(db,_0x3bf58b(0x84))),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,_0x3bf58b(0x1db)))]),_0x24bf9b=new Map();function _0x564a76(_0x30905a,_0x409f35){const _0x180bc9=_0x3bf58b;_0x30905a[_0x180bc9(0x116)](_0x16dff0=>{const _0x1e53e7=_0x180bc9,_0x466cba=_0x16dff0['data']();if(!_0x466cba['username'])return;if(!_0x24bf9b[_0x1e53e7(0x24d)](_0x466cba['username']))_0x24bf9b[_0x1e53e7(0x1cc)](_0x466cba['username'],{'username':_0x466cba['username'],'roleName':_0x466cba['roleName']||null,'roleColor':_0x466cba['roleColor']||null,'roleAssignedBy':_0x466cba['roleAssignedBy']||null,'roleAssignedAt':_0x466cba['roleAssignedAt']||null,'sources':[_0x409f35]});else{const _0x2edbd0=_0x24bf9b['get'](_0x466cba['username']);_0x466cba['roleName']&&(!_0x2edbd0['roleName']||_0x409f35==='D1'||_0x409f35==='D2')&&(_0x2edbd0['roleName']=_0x466cba['roleName'],_0x2edbd0['roleColor']=_0x466cba['roleColor'],_0x2edbd0[_0x1e53e7(0xf9)]=_0x466cba['roleAssignedBy'],_0x2edbd0[_0x1e53e7(0x261)]=_0x466cba[_0x1e53e7(0x261)]),!_0x2edbd0['sources']['includes'](_0x409f35)&&_0x2edbd0['sources']['push'](_0x409f35);}});}_0x564a76(_0x5876d3,'D1'),_0x564a76(_0xcf5ec9,'D2'),_0x564a76(_0x10ab8e,'Non-Participant'),_0x564a76(_0x56cb7d,_0x3bf58b(0x196));const _0x2796d8=Array['from'](_0x24bf9b[_0x3bf58b(0xac)]())[_0x3bf58b(0x1b3)]((_0x25e09d,_0x589932)=>_0x25e09d[_0x3bf58b(0xc7)]['localeCompare'](_0x589932[_0x3bf58b(0xc7)]));if(_0x2796d8['length']===0x0){_0x4550a1[_0x3bf58b(0xa7)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x4550a1[_0x3bf58b(0xa7)]='',_0x2796d8['forEach'](_0x5b18f1=>{const _0x5db224=_0x3bf58b,_0x57d434=document['createElement']('tr');_0x57d434[_0x5db224(0x1fd)]['username']=_0x5b18f1['username'],_0x57d434[_0x5db224(0x1fd)]['roleName']=_0x5b18f1[_0x5db224(0x2a0)]||'',_0x57d434[_0x5db224(0x1fd)]['roleColor']=_0x5b18f1['roleColor']||_0x5db224(0x224);const _0x347d51=_0x5b18f1['roleAssignedAt']?new Date(_0x5b18f1[_0x5db224(0x261)][_0x5db224(0x29c)]*0x3e8)[_0x5db224(0x2c2)]():'N/A',_0x5cca51=_0x5b18f1['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x5b18f1[_0x5db224(0xc0)]+';\x20color:\x20'+getContrastColor(_0x5b18f1[_0x5db224(0xc0)])+';\x22>'+_0x5b18f1['roleName']+'</span>':_0x5db224(0x229);_0x57d434[_0x5db224(0xa7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5b18f1['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x5b18f1['sources'][_0x5db224(0x1be)](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5cca51+_0x5db224(0x26d)+(_0x5b18f1['roleAssignedBy']||_0x5db224(0x2a6))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x347d51+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x5b18f1['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5b18f1[_0x5db224(0x2a0)]?_0x5db224(0x296)+_0x5b18f1['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4550a1['appendChild'](_0x57d434);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x40a6a9=>{const _0x577476=_0x3bf58b;_0x40a6a9[_0x577476(0x239)]('click',()=>{const _0x5245eb=_0x577476,_0x801083=_0x40a6a9['dataset'][_0x5245eb(0xc7)];openRoleEditModal(_0x801083);});}),document[_0x3bf58b(0x2d1)]('.remove-role-btn')['forEach'](_0x153994=>{const _0x4d2b4b=_0x3bf58b;_0x153994[_0x4d2b4b(0x239)]('click',()=>{const _0x584678=_0x4d2b4b,_0x200a84=_0x153994['dataset'][_0x584678(0xc7)];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x200a84+'?')&&setUserRole(_0x200a84,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x2a31f0=>console['error']('Error\x20removing\x20role:',_0x2a31f0));});});}catch(_0x41f8b0){console['error']('Error\x20loading\x20users:',_0x41f8b0),_0x4550a1['innerHTML']=_0x3bf58b(0x137);}}function openRoleEditModal(_0x32d55d){const _0x395ed1=a4_0x425f91;console[_0x395ed1(0x1cf)](_0x395ed1(0x167),_0x32d55d);const _0x4c3079=document['getElementById'](_0x395ed1(0x22b)),_0x2f901a=document['getElementById']('role-username'),_0xf5d1dc=document['getElementById'](_0x395ed1(0x19b));if(!_0x4c3079){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x4c3079);_0x2f901a?(_0x2f901a[_0x395ed1(0xba)]=_0x32d55d,console[_0x395ed1(0x1cf)]('Username\x20input\x20set\x20to:\x20'+_0x32d55d)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x4c3a48=document[_0x395ed1(0x163)]('#users-table-body\x20tr[data-username=\x22'+_0x32d55d+'\x22]');if(_0x4c3a48&&_0xf5d1dc){const _0x20ae20=_0x4c3a48['dataset']['role'];_0xf5d1dc['value']=_0x20ae20===_0x395ed1(0x2b0)?'':_0x20ae20,console['log']('Role\x20select\x20set\x20to:\x20'+_0xf5d1dc[_0x395ed1(0xba)]+'\x20(based\x20on\x20data-role:\x20'+_0x20ae20+')');}else{if(!_0x4c3a48)console['warn'](_0x395ed1(0x88)+_0x32d55d+'\x20not\x20found.');if(!_0xf5d1dc)console['warn'](_0x395ed1(0x1e3));if(_0xf5d1dc)_0xf5d1dc['value']='';}console['log'](_0x395ed1(0x1b2)),_0x4c3079[_0x395ed1(0x2d2)][_0x395ed1(0x2bc)]('active');const _0x4160a9=document['getElementById']('cancel-role-btn');_0x4160a9?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x4160a9['removeEventListener']('click',closeModalHandler),_0x4160a9['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x4c3079['removeEventListener'](_0x395ed1(0xf7),closeModalBackgroundHandler),_0x4c3079['addEventListener'](_0x395ed1(0xf7),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x46b9db){_0x46b9db['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x27919f=a4_0x425f91,_0x50b383=document['getElementById']('set-role-modal');_0x50b383&&(_0x50b383[_0x27919f(0x2d2)]['remove']('active'),_0x50b383[_0x27919f(0xc9)]('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x22dbc8=a4_0x425f91,_0x5d4d58=document['getElementById'](_0x22dbc8(0x232))?.['value']['toLowerCase']()||'',_0x441f44=document[_0x22dbc8(0x15b)]('role-filter')?.['value']||_0x22dbc8(0x1a0),_0x36f940=document['querySelectorAll'](_0x22dbc8(0x265));let _0x4964d7=0x0;_0x36f940[_0x22dbc8(0x116)](_0x3ba898=>{const _0x5ac496=_0x22dbc8;if(_0x3ba898[_0x5ac496(0x163)]('.loading-cell')||_0x3ba898[_0x5ac496(0x163)]('.empty-state')||_0x3ba898['querySelector']('.error-state'))return;const _0x36d0f3=_0x3ba898[_0x5ac496(0x1fd)]['username']?.['toLowerCase']()||'',_0x4fbe00=_0x3ba898['dataset'][_0x5ac496(0x218)]||'none',_0x347e7d=_0x36d0f3['includes'](_0x5d4d58),_0x409468=_0x441f44==='all'||_0x4fbe00===_0x441f44;_0x347e7d&&_0x409468?(_0x3ba898[_0x5ac496(0xf6)]['display']='',_0x4964d7++):_0x3ba898[_0x5ac496(0xf6)][_0x5ac496(0x2ab)]='none';});if(_0x4964d7===0x0&&_0x36f940['length']>0x0){const _0xdfe06d=document['getElementById']('users-table-body');if(_0xdfe06d){if(!_0xdfe06d['querySelector']('.no-results')){const _0x1a57b4=document['createElement']('tr');_0x1a57b4['classList'][_0x22dbc8(0x2bc)]('no-results'),_0x1a57b4['innerHTML']=_0x22dbc8(0x1ad),_0xdfe06d['appendChild'](_0x1a57b4);}}}else{const _0x2e6739=document['querySelector']('.no-results');_0x2e6739&&_0x2e6739[_0x22dbc8(0x11c)]();}}function setupManageArticlesSection(){const _0x42c771=a4_0x425f91,_0x322e5b=document['getElementById']('load-articles-data');_0x322e5b&&_0x322e5b['addEventListener']('click',function(){const _0x1d80cd=a4_0x3c92;this[_0x1d80cd(0x2d2)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x52a039=_0x1d80cd;this[_0x52a039(0x2d2)][_0x52a039(0x11c)]('loading'),this[_0x52a039(0xa7)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})[_0x1d80cd(0x250)](_0x45cfe0=>{const _0x32a115=_0x1d80cd;console[_0x32a115(0x240)]('Error\x20loading\x20articles:',_0x45cfe0),this['classList']['remove'](_0x32a115(0x17e)),this['innerHTML']=_0x32a115(0xa9),setTimeout(()=>{const _0x32d5c6=_0x32a115;this[_0x32d5c6(0xa7)]=_0x32d5c6(0xf3);},0xbb8);});});const _0x48efef=document['getElementById'](_0x42c771(0x190));_0x48efef?(console[_0x42c771(0x1cf)]('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x48efef[_0x42c771(0xf6)]['display']='block',_0x48efef[_0x42c771(0x239)]('click',()=>{openArticleModal();})):console[_0x42c771(0x240)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x156615=document[_0x42c771(0x15b)]('article-form');_0x156615&&_0x156615['addEventListener']('submit',_0x29d215=>{const _0x261ec6=_0x42c771;_0x29d215[_0x261ec6(0x27b)](),saveArticle();});const _0x4529a2=document[_0x42c771(0x15b)](_0x42c771(0x16b));_0x4529a2&&_0x4529a2[_0x42c771(0x239)]('click',()=>{closeArticleModal();});const _0x237953=document[_0x42c771(0x163)]('#article-modal\x20.close-btn');_0x237953&&_0x237953[_0x42c771(0x239)]('click',()=>{closeArticleModal();});const _0x36c2a1=document['getElementById']('article-modal');_0x36c2a1&&_0x36c2a1[_0x42c771(0x239)]('click',_0x59d2e7=>{_0x59d2e7['target']===_0x36c2a1&&closeArticleModal();});}async function loadArticles(){const _0x1ec53f=a4_0x425f91,_0x403cf1=document[_0x1ec53f(0x15b)]('articles-table-body');if(!_0x403cf1)return;_0x403cf1['innerHTML']=_0x1ec53f(0x1bf);try{const _0x581fcf=collection(db,'articles'),_0x585c8d=query(_0x581fcf,orderBy('createdAt','desc')),_0x1573a6=await getDocs(_0x585c8d);if(_0x1573a6['empty']){_0x403cf1['innerHTML']=_0x1ec53f(0x1a7);return;}_0x403cf1['innerHTML']='',_0x1573a6['forEach'](_0x5db947=>{const _0x176e4b=_0x1ec53f,_0x32e62c=_0x5db947[_0x176e4b(0xca)](),_0x1a4115=document['createElement']('tr'),_0x59d912=_0x32e62c[_0x176e4b(0x273)]?new Date(_0x32e62c['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x1a4115[_0x176e4b(0xa7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x32e62c['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x32e62c['author']||'Unknown')+_0x176e4b(0x26d)+_0x59d912+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x5db947['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x5db947['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x403cf1['appendChild'](_0x1a4115);}),setupArticleActionButtons();}catch(_0x347f28){console['error']('Error\x20loading\x20articles:',_0x347f28),_0x403cf1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x347f28[_0x1ec53f(0x282)]+_0x1ec53f(0x151);}}function setupArticleActionButtons(){const _0xfb60ea=a4_0x425f91;document['querySelectorAll'](_0xfb60ea(0x243))[_0xfb60ea(0x116)](_0x348dfd=>{_0x348dfd['addEventListener']('click',async _0x4b4d4d=>{const _0x37fbf2=_0x4b4d4d['currentTarget']['dataset']['id'];openArticleModal(_0x37fbf2);});}),document[_0xfb60ea(0x2d1)](_0xfb60ea(0x10a))['forEach'](_0x50a4fe=>{const _0x1146f5=_0xfb60ea;_0x50a4fe['addEventListener'](_0x1146f5(0xf7),async _0x7384f8=>{const _0x3d3b04=_0x7384f8['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x3d3b04);});});}function openArticleModal(_0x1b9e45=null){const _0x3d8478=a4_0x425f91,_0x419015=document['getElementById']('article-modal'),_0x2ea1c9=document[_0x3d8478(0x15b)]('article-modal-title'),_0xf5a809=document['getElementById'](_0x3d8478(0xb7)),_0x2669d4=document['getElementById']('article-id');_0xf5a809['reset'](),_0x2669d4['value']='';if(_0x1b9e45)_0x2ea1c9[_0x3d8478(0x107)]=_0x3d8478(0x106),_0x2669d4['value']=_0x1b9e45,loadArticleData(_0x1b9e45);else{_0x2ea1c9['textContent']='Create\x20Article';const _0xc36816=auth['currentUser'];if(_0xc36816){const _0x169934=document['getElementById']('article-author');if(_0x169934&&_0xc36816[_0x3d8478(0x277)])_0x169934[_0x3d8478(0xba)]=_0xc36816['displayName'];else _0x169934&&(_0x169934[_0x3d8478(0xba)]=_0xc36816[_0x3d8478(0xfe)]);}}_0x419015['classList']['add']('active');}async function loadArticleData(_0x3c9c30){const _0x56a04d=a4_0x425f91;try{const _0x5ba603=doc(db,'articles',_0x3c9c30),_0x10d073=await getDoc(_0x5ba603);if(!_0x10d073['exists']()){showNotification('Article\x20not\x20found',_0x56a04d(0x240));return;}const _0x2ac9c0=_0x10d073['data']();document['getElementById'](_0x56a04d(0x249))['value']=_0x2ac9c0['title']||'',document['getElementById']('article-author')['value']=_0x2ac9c0[_0x56a04d(0x1c5)]||'',document['getElementById']('article-image-url')[_0x56a04d(0xba)]=_0x2ac9c0['imageUrl']||'',document[_0x56a04d(0x15b)]('article-content')['value']=_0x2ac9c0['content']||'';}catch(_0xf5bf0a){console['error']('Error\x20loading\x20article\x20data:',_0xf5bf0a),showNotification(_0x56a04d(0xb3),'error');}}async function saveArticle(){const _0x281df4=a4_0x425f91;try{const _0x142ae5=document['getElementById']('article-id')[_0x281df4(0xba)],_0x5e2990=document['getElementById']('article-title')[_0x281df4(0xba)][_0x281df4(0x281)](),_0x4d6307=document['getElementById'](_0x281df4(0x233))['value']['trim'](),_0x3a7b23=document['getElementById'](_0x281df4(0x2d4))['value']['trim'](),_0x29c61c=document['getElementById'](_0x281df4(0x189))['value']['trim']();if(!_0x5e2990||!_0x29c61c){showNotification(_0x281df4(0x112),'error');return;}const _0x33c008=auth[_0x281df4(0x24b)];if(!_0x33c008){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x5dc71c={'title':_0x5e2990,'author':_0x4d6307,'imageUrl':_0x3a7b23||null,'content':_0x29c61c,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x33c008[_0x281df4(0xfe)]};!_0x142ae5?(_0x5dc71c['createdAt']=serverTimestamp(),_0x5dc71c['createdBy']=_0x33c008['email'],await addDoc(collection(db,_0x281df4(0x8a)),_0x5dc71c),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x142ae5),_0x5dc71c),showNotification('Article\x20updated\x20successfully',_0x281df4(0x1a2))),closeArticleModal(),loadArticles();}catch(_0x414476){console['error']('Error\x20saving\x20article:',_0x414476),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x414476['message'],'error');}}function closeArticleModal(){const _0x206e82=document['getElementById']('article-modal');_0x206e82&&_0x206e82['classList']['remove']('active');}async function confirmDeleteArticle(_0x1d251e){const _0x4ee2c1=a4_0x425f91;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x1d251e)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x4ee2c1(0x1a2));}catch(_0x15b648){console['error']('Error\x20deleting\x20article:',_0x15b648),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x15b648['message'],'error');}}function setupTrophyManagementSection(){const _0x1bfba5=a4_0x425f91,_0x18db44=document['getElementById']('load-trophies-data');_0x18db44&&_0x18db44['addEventListener']('click',function(){const _0x5a215a=a4_0x3c92;this['classList']['add'](_0x5a215a(0x17e)),this[_0x5a215a(0xa7)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x220faf=document['getElementById']('assign-trophy-image');_0x220faf&&(_0x220faf[_0x5a215a(0x242)]=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x28ba3c=_0x5a215a;this['classList']['remove']('loading'),this['innerHTML']=_0x28ba3c(0x230);})['catch'](_0x5640b9=>{const _0x5dfc54=_0x5a215a;console['error'](_0x5dfc54(0x157),_0x5640b9),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x14308c=_0x5dfc54;this[_0x14308c(0xa7)]=_0x14308c(0x230);},0xbb8);});});const _0x3e0d81=document['getElementById'](_0x1bfba5(0x1e6));_0x3e0d81&&_0x3e0d81['addEventListener']('click',()=>{openTrophyModal();});const _0xab9441=document['getElementById'](_0x1bfba5(0x21f));_0xab9441&&_0xab9441[_0x1bfba5(0x239)](_0x1bfba5(0x13c),_0x5333f7=>{_0x5333f7['preventDefault'](),saveTrophyDefinition();});const _0xbbd64f=document['getElementById'](_0x1bfba5(0x1ff));_0xbbd64f&&_0xbbd64f[_0x1bfba5(0x239)](_0x1bfba5(0xf7),()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x1025bb=>{const _0x530fe9=_0x1bfba5;_0x1025bb['addEventListener'](_0x530fe9(0xf7),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x25cd04=document[_0x1bfba5(0x15b)]('trophy-modal');_0x25cd04&&_0x25cd04['addEventListener']('click',_0x438ca8=>{_0x438ca8['target']===_0x25cd04&&closeTrophyModal();});const _0xd2311e=document['getElementById'](_0x1bfba5(0xcb));_0xd2311e&&_0xd2311e['addEventListener']('click',_0x5a2b34=>{_0x5a2b34['target']===_0xd2311e&&closeAssignTrophyModal();});const _0xdacdc=document['getElementById']('assign-trophy-form');_0xdacdc&&_0xdacdc['addEventListener'](_0x1bfba5(0x13c),_0x35d6c7=>{_0x35d6c7['preventDefault'](),assignTrophyToPlayer();});const _0x47cfd6=document[_0x1bfba5(0x15b)]('cancel-assign-btn');_0x47cfd6&&_0x47cfd6['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0xf3bab8=document['getElementById']('trophy-image-url');_0xf3bab8&&(_0xf3bab8['addEventListener']('input',updateTrophyImagePreview),_0xf3bab8[_0x1bfba5(0x239)](_0x1bfba5(0x178),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x3be623=a4_0x425f91,_0x1be7f6=document['getElementById']('trophy-image-url')[_0x3be623(0xba)]['trim'](),_0x4096ca=document[_0x3be623(0x15b)]('trophy-image-preview');if(!_0x4096ca){const _0x5c29fe=document['getElementById']('trophy-image-url')['closest'](_0x3be623(0x1ec)),_0xb177f2=document['createElement'](_0x3be623(0x1c0));_0xb177f2['id']='trophy-image-preview',_0xb177f2['className']=_0x3be623(0x20c),_0x5c29fe['appendChild'](_0xb177f2);const _0x1ce896=document['createElement'](_0x3be623(0x142));_0x1ce896['id']='trophy-preview-img',_0x1ce896[_0x3be623(0x2bf)]='Trophy\x20Preview',_0x1ce896[_0x3be623(0x242)]=function(){const _0x5866aa=_0x3be623;this['src']=DEFAULT_TROPHY_IMAGE,this['classList'][_0x5866aa(0x2bc)](_0x5866aa(0x240));},_0xb177f2['appendChild'](_0x1ce896);}const _0x1797e4=document['getElementById']('trophy-preview-img');_0x1be7f6?(_0x1797e4['src']=_0x1be7f6,_0x1797e4['style']['display']=_0x3be623(0x202),_0x1797e4['classList']['remove'](_0x3be623(0x240))):(_0x1797e4['src']=DEFAULT_TROPHY_IMAGE,_0x1797e4['style']['display']='block');}async function loadTrophyDefinitions(){const _0x5c850e=a4_0x425f91,_0x3249d7=document['getElementById']('trophies-table-body');if(!_0x3249d7)return;_0x3249d7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x5dd771=collection(db,_0x5c850e(0x1bb)),_0x16356d=query(_0x5dd771,orderBy(_0x5c850e(0x273),'desc')),_0x4b53f4=await getDocs(_0x16356d);if(_0x4b53f4['empty']){_0x3249d7['innerHTML']=_0x5c850e(0x96);return;}_0x3249d7[_0x5c850e(0xa7)]='',_0x4b53f4['forEach'](_0xb31354=>{const _0x20df0f=_0x5c850e,_0x584940=_0xb31354['data'](),_0x2be31d=document['createElement']('tr'),_0xc6b2fd=_0x584940['createdAt']?new Date(_0x584940['createdAt']['seconds']*0x3e8)[_0x20df0f(0x238)]():'N/A';_0x2be31d['innerHTML']=_0x20df0f(0x1b1)+(_0x584940[_0x20df0f(0x215)]||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x584940['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x584940['name']||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x584940['rarity']||_0x20df0f(0x285))+'\x22>'+(_0x584940['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xc6b2fd+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0xb31354['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0xb31354['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0xb31354['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3249d7['appendChild'](_0x2be31d);}),setupTrophyActionButtons();}catch(_0x1030de){console[_0x5c850e(0x240)]('Error\x20loading\x20trophy\x20definitions:',_0x1030de),_0x3249d7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x1030de['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x15513a=a4_0x425f91;document[_0x15513a(0x2d1)]('.edit-trophy-btn')['forEach'](_0xad348f=>{const _0x24c493=_0x15513a;_0xad348f['addEventListener'](_0x24c493(0xf7),_0x37f987=>{const _0xc417c2=_0x37f987['currentTarget']['dataset']['id'];openTrophyModal(_0xc417c2);});}),document[_0x15513a(0x2d1)](_0x15513a(0x134))['forEach'](_0x1105ad=>{const _0x327da1=_0x15513a;_0x1105ad['addEventListener'](_0x327da1(0xf7),_0x525992=>{const _0x14acdf=_0x525992['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x14acdf);});}),document['querySelectorAll'](_0x15513a(0x24e))['forEach'](_0x15737d=>{_0x15737d['addEventListener']('click',_0x5263b1=>{const _0x5f1b59=a4_0x3c92,_0x31d0a2=_0x5263b1[_0x5f1b59(0x17b)][_0x5f1b59(0x1fd)]['id'];confirmDeleteTrophy(_0x31d0a2);});});}function openTrophyModal(_0x4a634f=null){const _0x4ab409=a4_0x425f91,_0xce90cc=document['getElementById']('trophy-modal'),_0x1a7c8c=document['getElementById']('trophy-modal-title'),_0x3f3e19=document['getElementById'](_0x4ab409(0x21f)),_0x4f03c6=document[_0x4ab409(0x15b)]('trophy-id');_0x3f3e19[_0x4ab409(0x2ac)](),_0x4f03c6['value']='';const _0x26436a=document['getElementById'](_0x4ab409(0xf8));_0x26436a&&(_0x26436a['src']=DEFAULT_TROPHY_IMAGE,_0x26436a['classList'][_0x4ab409(0x11c)]('error')),_0x4a634f?(_0x1a7c8c['textContent']='Edit\x20Trophy',_0x4f03c6[_0x4ab409(0xba)]=_0x4a634f,loadTrophyData(_0x4a634f)):_0x1a7c8c[_0x4ab409(0x107)]=_0x4ab409(0x29e),_0xce90cc[_0x4ab409(0x2d2)]['add'](_0x4ab409(0x216));}async function loadTrophyData(_0x3b23b4){const _0x3b6809=a4_0x425f91;try{const _0x2c84e3=doc(db,'trophyDefinitions',_0x3b23b4),_0x503c89=await getDoc(_0x2c84e3);if(!_0x503c89[_0x3b6809(0x1ba)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x1f5e7c=_0x503c89[_0x3b6809(0xca)]();document['getElementById']('trophy-name')['value']=_0x1f5e7c[_0x3b6809(0x89)]||'',document['getElementById'](_0x3b6809(0x2d9))[_0x3b6809(0xba)]=_0x1f5e7c[_0x3b6809(0x16f)]||'',document['getElementById']('trophy-image-url')['value']=_0x1f5e7c['image']||'',document['getElementById']('trophy-rarity')['value']=_0x1f5e7c['rarity']||_0x3b6809(0x285),updateTrophyImagePreview();}catch(_0x5b5985){console[_0x3b6809(0x240)]('Error\x20loading\x20trophy\x20data:',_0x5b5985),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x4edb83=a4_0x425f91;try{const _0x5bb9d0=document['getElementById'](_0x4edb83(0x180))['value'],_0x5bdba0=document['getElementById']('trophy-name')['value']['trim'](),_0x130da7=document['getElementById']('trophy-description')['value']['trim'](),_0xf50a65=document['getElementById']('trophy-image-url')['value']['trim'](),_0x2e9aed=document[_0x4edb83(0x15b)]('trophy-rarity')['value'];if(!_0x5bdba0||!_0x130da7||!_0xf50a65){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x1fb4a4=auth['currentUser'];if(!_0x1fb4a4){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies',_0x4edb83(0x240));return;}const _0x4c04b9={'name':_0x5bdba0,'description':_0x130da7,'image':_0xf50a65,'rarity':_0x2e9aed,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x1fb4a4['email']};!_0x5bb9d0?(_0x4c04b9['createdAt']=serverTimestamp(),_0x4c04b9['createdBy']=_0x1fb4a4['email'],await addDoc(collection(db,'trophyDefinitions'),_0x4c04b9),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x5bb9d0),_0x4c04b9),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x221334){console[_0x4edb83(0x240)]('Error\x20saving\x20trophy:',_0x221334),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x221334[_0x4edb83(0x282)],_0x4edb83(0x240));}}function closeTrophyModal(){const _0x1dec8e=document['getElementById']('trophy-modal');_0x1dec8e&&_0x1dec8e['classList']['remove']('active');}async function confirmDeleteTrophy(_0x180b4f){const _0x327f1b=a4_0x425f91;if(!_0x180b4f){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x1512e8=auth['currentUser'];if(!_0x1512e8){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies',_0x327f1b(0x240));return;}console['log'](_0x327f1b(0x1ac)+_0x180b4f),await deleteDoc(doc(db,_0x327f1b(0x1bb),_0x180b4f)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x421e39){console[_0x327f1b(0x240)]('Error\x20deleting\x20trophy\x20definition:',_0x421e39),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x421e39['message'],'error');}}async function openAssignTrophyModal(_0x55076b){const _0x1d8d96=a4_0x425f91;try{const _0x14cd84=doc(db,'trophyDefinitions',_0x55076b),_0x2117d5=await getDoc(_0x14cd84);if(!_0x2117d5[_0x1d8d96(0x1ba)]()){showNotification(_0x1d8d96(0x19c),'error');return;}const _0x421297=_0x2117d5[_0x1d8d96(0xca)]();document[_0x1d8d96(0x15b)]('assign-trophy-id')['value']=_0x55076b,document['getElementById']('assign-trophy-name')['value']=_0x421297['name'],document['getElementById'](_0x1d8d96(0x1c9))['src']=_0x421297[_0x1d8d96(0x215)]||DEFAULT_TROPHY_IMAGE,document[_0x1d8d96(0x15b)]('assign-trophy-title')['textContent']=_0x421297['name']||'Unnamed\x20Trophy',document['getElementById'](_0x1d8d96(0x1b7))[_0x1d8d96(0x107)]=_0x421297['description']||'No\x20description';const _0x472a10=document[_0x1d8d96(0x15b)](_0x1d8d96(0x22d));_0x472a10['textContent']=_0x421297[_0x1d8d96(0x1b9)]||_0x1d8d96(0x285),_0x472a10['className']='trophy-rarity\x20'+(_0x421297['rarity']||_0x1d8d96(0x285));const _0x1423c2=document['getElementById']('assign-trophy-modal');_0x1423c2['classList']['add']('active');}catch(_0x262abf){console[_0x1d8d96(0x240)]('Error\x20opening\x20assign\x20trophy\x20modal:',_0x262abf),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x5c49ed=a4_0x425f91,_0x165507=document['getElementById'](_0x5c49ed(0xcb));_0x165507&&_0x165507['classList']['remove']('active');}async function assignTrophyToPlayer(){const _0x3dc7e8=a4_0x425f91;try{const _0x387c64=document['getElementById']('assign-trophy-id')['value'],_0x394da4=document['getElementById'](_0x3dc7e8(0x291))['value'],_0x541841=document[_0x3dc7e8(0x15b)]('assign-player-username')['value'][_0x3dc7e8(0x281)](),_0x15068d=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')[_0x3dc7e8(0xba)];if(!_0x387c64||!_0x541841){showNotification(_0x3dc7e8(0xe5),'error');return;}const _0x209942=auth['currentUser'];if(!_0x209942){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x501569=null,_0x52243b=null,_0x3f9b5c=null;if(_0x15068d==='non-participant'){const _0x35610d=collection(db,'nonParticipants'),_0x682da8=query(_0x35610d,where('username','==',_0x541841)),_0x8265bf=await getDocs(_0x682da8);!_0x8265bf[_0x3dc7e8(0x2a7)]&&(_0x501569=_0x8265bf[_0x3dc7e8(0xb8)][0x0],_0x52243b=_0x501569['id'],_0x3f9b5c=_0x501569['data']());}else{const _0x32cd1e=_0x15068d==='D1'?_0x3dc7e8(0x84):_0x15068d==='D2'?'playersD2':'playersD3',_0xc37987=collection(db,_0x32cd1e),_0x4b566c=query(_0xc37987,where(_0x3dc7e8(0xc7),'==',_0x541841)),_0x517f25=await getDocs(_0x4b566c);!_0x517f25['empty']&&(_0x501569=_0x517f25['docs'][0x0],_0x52243b=_0x501569['id'],_0x3f9b5c=_0x501569[_0x3dc7e8(0xca)]());}if(!_0x501569){showNotification('Player\x20\x22'+_0x541841+_0x3dc7e8(0x24c)+(_0x15068d==='non-participant'?'non-participants':_0x15068d+'\x20ladder'),_0x3dc7e8(0x240));return;}const _0xde39b4=collection(db,'userTrophies'),_0x388ee2=query(_0xde39b4,where('userId','==',_0x52243b),where('trophyId','==',_0x387c64)),_0x5be260=await getDocs(_0x388ee2);if(!_0x5be260['empty']){showNotification('Player\x20\x22'+_0x541841+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x52243b,'playerUsername':_0x541841,'trophyId':_0x387c64,'awardedAt':serverTimestamp(),'awardedBy':_0x209942['email'],'ladder':_0x15068d}),showNotification('Trophy\x20\x22'+_0x394da4+_0x3dc7e8(0x1d7)+_0x541841,'success'),closeAssignTrophyModal();}catch(_0x4e2f7c){console['error']('Error\x20assigning\x20trophy:',_0x4e2f7c),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x4e2f7c['message'],_0x3dc7e8(0x240));}}function setupInactivePlayersSection(){const _0x3c773e=a4_0x425f91,_0x229fe4=document['getElementById']('inactive-days-filter');_0x229fe4&&_0x229fe4['addEventListener']('change',function(){const _0x5ea501=document['getElementById']('load-inactive-players-data');if(_0x5ea501)_0x5ea501['click']();});const _0x26f5ae=document[_0x3c773e(0x163)](_0x3c773e(0x266)),_0xc3b113=document['querySelector'](_0x3c773e(0x267));_0x26f5ae&&_0xc3b113&&(_0x26f5ae[_0x3c773e(0x239)]('change',function(){const _0x45dbbb=_0x3c773e;if(this['checked']){currentLadder='D1';if(document[_0x45dbbb(0x15b)]('inactive-players')['style']['display']!=='none'){const _0x5c4dc5=document[_0x45dbbb(0x15b)](_0x45dbbb(0x159));if(_0x5c4dc5)_0x5c4dc5['click']();}}}),_0xc3b113['addEventListener']('change',function(){const _0x5dea87=_0x3c773e;if(this[_0x5dea87(0x290)]){currentLadder='D2';if(document[_0x5dea87(0x15b)]('inactive-players')[_0x5dea87(0xf6)][_0x5dea87(0x2ab)]!==_0x5dea87(0x2b0)){const _0x16013e=document['getElementById']('load-inactive-players-data');if(_0x16013e)_0x16013e['click']();}}}));const _0x83517c=document['getElementById']('inactive-players-search');_0x83517c&&_0x83517c[_0x3c773e(0x239)]('input',debounce(function(){const _0x417760=_0x3c773e,_0x10d133=_0x83517c['value']['toLowerCase'](),_0x527173=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x527173[_0x417760(0x116)](_0x5ca7f6=>{const _0xa4c7d1=_0x417760;if(_0x5ca7f6['querySelector'](_0xa4c7d1(0x25b))||_0x5ca7f6['querySelector']('.empty-state')||_0x5ca7f6['querySelector'](_0xa4c7d1(0xae)))return;const _0x349d32=_0x5ca7f6['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x3edb7b=_0x5ca7f6[_0xa4c7d1(0xbb)][0x5]?.['textContent']['toLowerCase']()||'';_0x349d32['includes'](_0x10d133)||_0x3edb7b['includes'](_0x10d133)?_0x5ca7f6['style']['display']='':_0x5ca7f6['style']['display']='none';});},0x12c)),document['addEventListener']('click',function(_0x5449d0){const _0x482539=_0x3c773e;if(_0x5449d0['target'][_0x482539(0x150)]('.view-player-btn')){const _0x5bf74e=_0x5449d0['target']['closest']('.view-player-btn'),_0x326c14=_0x5bf74e['dataset']['username'];_0x326c14&&alert('View\x20player\x20details\x20for\x20'+_0x326c14+'\x20-\x20Feature\x20coming\x20soon');}}),console[_0x3c773e(0x1cf)]('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x174931=a4_0x425f91,_0x29e009=document['getElementById']('inactive-players-table-body');if(!_0x29e009)return;_0x29e009[_0x174931(0xa7)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x170246=document['getElementById'](_0x174931(0x2cc)),_0x5070fb=_0x170246?parseInt(_0x170246['value'])||0x0:0x0,_0x74ed6e=collection(db,currentLadder==='D1'?_0x174931(0x84):'playersD2'),_0x1c6606=await getDocs(_0x74ed6e);if(_0x1c6606[_0x174931(0x2a7)]){_0x29e009['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x628526=[];_0x1c6606[_0x174931(0x116)](_0xd84d95=>{const _0x49e790=_0x174931,_0x282fc9=_0xd84d95[_0x49e790(0xca)]();_0x628526[_0x49e790(0x27a)]({..._0x282fc9,'id':_0xd84d95['id'],'username':_0x282fc9[_0x49e790(0xc7)]||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x628526['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x2ab215=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x24b027=_0x628526['map'](async _0x3627e2=>{const _0x2cd34d=_0x174931;try{const _0x3ce14c=collection(db,_0x2ab215),_0x1778c2=query(_0x3ce14c,or(where('winnerUsername','==',_0x3627e2['username']),where('loserUsername','==',_0x3627e2['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0x42b1fa=await getDocs(_0x1778c2);if(!_0x42b1fa['empty']){const _0x2844e2=_0x42b1fa['docs'][0x0]['data'](),_0x333ad4=_0x2844e2['approvedAt']?new Date(_0x2844e2['approvedAt']['seconds']*0x3e8):null,_0x302db8=new Date(),_0x466a39=_0x333ad4?Math['floor']((_0x302db8-_0x333ad4)/(0x3e8*0x3c*0x3c*0x18)):null,_0x7175f5=_0x2844e2['winnerUsername']===_0x3627e2['username']?_0x2844e2[_0x2cd34d(0x1ab)]:_0x2844e2['winnerUsername'],_0x4747e1=_0x2844e2['winnerUsername']===_0x3627e2[_0x2cd34d(0xc7)]?_0x2cd34d(0x1d0):_0x2cd34d(0x12b);return{..._0x3627e2,'lastMatch':{'date':_0x333ad4?_0x333ad4['toLocaleDateString']():_0x2cd34d(0x2a6),'opponent':_0x7175f5||'Unknown','result':_0x4747e1,'timestamp':_0x333ad4||new Date(0x0),'daysSinceMatch':_0x466a39||Number[_0x2cd34d(0x165)]}};}else return{..._0x3627e2,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x5106e0){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x3627e2['username']+':',_0x5106e0),{..._0x3627e2,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x115a95=await Promise['all'](_0x24b027);_0x115a95['sort']((_0x5af0fa,_0x41c5c6)=>_0x41c5c6['lastMatch']['daysSinceMatch']-_0x5af0fa['lastMatch']['daysSinceMatch']);_0x5070fb>0x0&&(_0x115a95=_0x115a95['filter'](_0x42883b=>_0x42883b['lastMatch'][_0x174931(0x90)]>=_0x5070fb));_0x29e009['innerHTML']='';if(_0x115a95['length']===0x0){_0x29e009['innerHTML']=_0x174931(0xa5);return;}_0x115a95['forEach'](_0x534e8f=>{const _0x400f00=_0x174931,_0xae1c85=document['createElement']('tr'),_0xd61fbc=_0x534e8f['lastMatch']['daysSinceMatch']>0x1e?_0x400f00(0x191):_0x534e8f['lastMatch'][_0x400f00(0x90)]>0xe?'moderately-inactive':'';_0xae1c85[_0x400f00(0xed)]=_0xd61fbc,_0xae1c85['innerHTML']=_0x400f00(0x162)+_0x534e8f['username']+_0x400f00(0x26d)+(_0x534e8f['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x534e8f[_0x400f00(0x124)]['date']+_0x400f00(0x26d)+(_0x534e8f['lastMatch'][_0x400f00(0x90)]===Number['MAX_SAFE_INTEGER']?'N/A':_0x534e8f['lastMatch'][_0x400f00(0x90)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+_0x400f00(0x26d)+(_0x534e8f['lastMatch']['date']==='Never\x20played'?'No\x20matches\x20found':_0x534e8f['lastMatch'][_0x400f00(0x20b)]+_0x400f00(0x1ed)+_0x534e8f['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x534e8f[_0x400f00(0xc7)]+_0x400f00(0x198),_0x29e009['appendChild'](_0xae1c85);}),console['log'](_0x174931(0x1ea)+_0x115a95[_0x174931(0x21e)]+'\x20inactive\x20players');}catch(_0x56686a){console['error'](_0x174931(0x2da),_0x56686a),_0x29e009['innerHTML']=_0x174931(0xc8)+_0x56686a['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x3a061a=a4_0x425f91;console[_0x3a061a(0x1cf)]('Setting\x20up\x20highlight\x20buttons');const _0x4d9f75=document['getElementById']('create-match-highlight-btn');_0x4d9f75&&_0x4d9f75['addEventListener'](_0x3a061a(0xf7),function(){const _0x42ef1c=_0x3a061a;console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal(_0x42ef1c(0x174));});const _0x35a454=document[_0x3a061a(0x15b)]('create-creator-highlight-btn');_0x35a454&&_0x35a454['addEventListener'](_0x3a061a(0xf7),function(){const _0x313f75=_0x3a061a;console[_0x313f75(0x1cf)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0xa87761=document['getElementById']('create-achievement-highlight-btn');_0xa87761&&_0xa87761['addEventListener']('click',function(){const _0x4debb5=_0x3a061a;console[_0x4debb5(0x1cf)](_0x4debb5(0x147)),openHighlightModal('achievement');});}function openHighlightModal(_0x4091f2='match'){const _0x21fc24=a4_0x425f91;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x4091f2);const _0x16b6ce=document['getElementById']('highlight-modal'),_0x557d3f=document['getElementById'](_0x21fc24(0x27c)),_0x5c51fd=document['getElementById']('highlight-modal-title'),_0xe4c4fd=document['getElementById'](_0x21fc24(0x284));if(!_0x16b6ce||!_0x557d3f||!_0x5c51fd){console['error'](_0x21fc24(0x1a1));return;}_0x557d3f['reset'](),_0xe4c4fd['value']='';const _0x592523=['match','creator','achievement'],_0x47e431=!_0x592523['includes'](_0x4091f2);if(_0x47e431){const _0x462a9d=_0x4091f2;_0xe4c4fd['value']=_0x462a9d,_0x5c51fd[_0x21fc24(0x107)]='Loading...',loadHighlightDataAdmin(_0x462a9d);}else{const _0x524e29=_0x4091f2;document[_0x21fc24(0x15b)](_0x21fc24(0x21b))['value']=_0x524e29,_0x5c51fd['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x524e29),toggleHighlightFields(_0x524e29);const _0x4cdfe6=auth['currentUser'];_0x4cdfe6&&document['getElementById'](_0x21fc24(0x97))&&(document['getElementById'](_0x21fc24(0x97))[_0x21fc24(0xba)]=_0x4cdfe6[_0x21fc24(0x277)]||_0x4cdfe6['email']);}_0x16b6ce['classList']['add'](_0x21fc24(0x216));}function toggleHighlightFields(_0x454a11){const _0x35dc45=a4_0x425f91;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x454a11);const _0x357d31=document[_0x35dc45(0x15b)]('highlight-form');if(!_0x357d31)return;const _0x27f116=_0x357d31[_0x35dc45(0x2d1)]('.form-group,\x20.form-row');_0x27f116[_0x35dc45(0x116)](_0x4a6ef6=>_0x4a6ef6[_0x35dc45(0xf6)]['display']=_0x35dc45(0x2b0));const _0x32adde=document[_0x35dc45(0x15b)](_0x35dc45(0x1a3));if(_0x32adde)_0x32adde['style']['display']=_0x35dc45(0x2b0);const _0x5a835f=['highlight-title-container',_0x35dc45(0x115),'highlight-submitted-by-container'];_0x5a835f['forEach'](_0x8efe87=>{const _0x1e4baa=_0x35dc45,_0x385179=document['getElementById'](_0x8efe87);if(_0x385179)_0x385179[_0x1e4baa(0xf6)]['display']='block';});if(_0x454a11==='match'){const _0x32fd22=['highlight-video-container',_0x35dc45(0x217),'highlight-map-container','highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x32fd22[_0x35dc45(0x116)](_0x1e4a1b=>{const _0xcd070c=_0x35dc45,_0x2badfa=document['getElementById'](_0x1e4a1b);_0x2badfa&&(_0x1e4a1b===_0xcd070c(0xc2)?_0x2badfa[_0xcd070c(0xf6)]['display']='flex':_0x2badfa['style']['display']=_0xcd070c(0x202));});const _0x51bd32=document['getElementById']('highlight-video-id');if(_0x51bd32){_0x51bd32[_0x35dc45(0x17f)]=!![];const _0x1dada0=_0x51bd32['previousElementSibling'];if(_0x1dada0)_0x1dada0['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x32adde)_0x32adde['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x454a11===_0x35dc45(0x176)){const _0x55eb21=[_0x35dc45(0x2cb),_0x35dc45(0xdc),_0x35dc45(0x1fb),'highlight-creator-image-container',_0x35dc45(0x231)];_0x55eb21['forEach'](_0x4c8ee5=>{const _0xf2a7ce=document['getElementById'](_0x4c8ee5);if(_0xf2a7ce)_0xf2a7ce['style']['display']='block';});const _0x26cefc=document['getElementById']('highlight-video-id');if(_0x26cefc){_0x26cefc[_0x35dc45(0x17f)]=![];const _0x5cd72e=_0x26cefc['previousElementSibling'];if(_0x5cd72e)_0x5cd72e['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x454a11==='achievement'){const _0x1b9f02=['highlight-achievement-player-container','highlight-achievement-type-container',_0x35dc45(0x13b),'highlight-player-profile-container',_0x35dc45(0xa2),'highlight-video-container'];_0x1b9f02[_0x35dc45(0x116)](_0x680eee=>{const _0x448fc6=_0x35dc45,_0xe67e00=document['getElementById'](_0x680eee);if(_0xe67e00)_0xe67e00['style']['display']=_0x448fc6(0x202);});const _0x403629=document['getElementById']('highlight-video-id');if(_0x403629){_0x403629[_0x35dc45(0x17f)]=![];const _0x6a9300=_0x403629['previousElementSibling'];if(_0x6a9300)_0x6a9300[_0x35dc45(0xa7)]='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x460133){const _0x4b460b=a4_0x425f91;try{const _0x2f88e3=doc(db,'highlights',_0x460133),_0x49fff8=await getDoc(_0x2f88e3);if(!_0x49fff8['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x243c85=_0x49fff8['data'](),_0x4c13a0=_0x243c85['type']||_0x4b460b(0x174);document['getElementById'](_0x4b460b(0x182))[_0x4b460b(0x107)]='Edit\x20'+getHighlightTypeName(_0x4c13a0),document['getElementById'](_0x4b460b(0x21b))['value']=_0x4c13a0,toggleHighlightFields(_0x4c13a0),document['getElementById'](_0x4b460b(0x1b0))[_0x4b460b(0xba)]=_0x243c85['title']||'',document[_0x4b460b(0x15b)]('highlight-description')[_0x4b460b(0xba)]=_0x243c85[_0x4b460b(0x16f)]||'',document['getElementById']('highlight-submitted-by')['value']=_0x243c85[_0x4b460b(0x18e)]||'';_0x243c85['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x243c85[_0x4b460b(0x144)],updateHighlightVideoPreview());if(_0x4c13a0===_0x4b460b(0x174)){document['getElementById']('highlight-match-info')['value']=_0x243c85['matchInfo']||'',document['getElementById'](_0x4b460b(0x16c))['value']=_0x243c85['map']||'';if(_0x243c85['matchDate']){const _0x4fffb7=new Date(_0x243c85['matchDate']['seconds']*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x4fffb7['toISOString']()['split']('T')[0x0];}document[_0x4b460b(0x15b)]('highlight-winner-name')[_0x4b460b(0xba)]=_0x243c85['winnerName']||'',document[_0x4b460b(0x15b)]('highlight-winner-score')[_0x4b460b(0xba)]=_0x243c85['winnerScore']||'',document[_0x4b460b(0x15b)](_0x4b460b(0x125))['value']=_0x243c85['loserName']||'',document['getElementById']('highlight-loser-score')[_0x4b460b(0xba)]=_0x243c85['loserScore']||'',document['getElementById']('highlight-match-link')[_0x4b460b(0xba)]=_0x243c85['matchLink']||'';}else{if(_0x4c13a0==='creator')document['getElementById']('highlight-map')['value']=_0x243c85['map']||'',document['getElementById']('highlight-map-creator')[_0x4b460b(0xba)]=_0x243c85[_0x4b460b(0x27f)]||'',document[_0x4b460b(0x15b)](_0x4b460b(0x25f))['value']=_0x243c85[_0x4b460b(0x146)]||'',document['getElementById'](_0x4b460b(0x1f5))['value']=_0x243c85['creatorImageUrl']||'';else _0x4c13a0===_0x4b460b(0x299)&&(document['getElementById']('highlight-achievement-player')['value']=_0x243c85['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')[_0x4b460b(0xba)]=_0x243c85['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x243c85[_0x4b460b(0x24a)]||'',document['getElementById'](_0x4b460b(0x121))['value']=_0x243c85['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')['value']=_0x243c85['achievementImageUrl']||'');}}catch(_0x35e34d){console[_0x4b460b(0x240)]('Error\x20loading\x20highlight:',_0x35e34d),showNotification('Error\x20loading\x20highlight:\x20'+_0x35e34d['message'],_0x4b460b(0x240));}}async function saveHighlight(){const _0x57c06e=a4_0x425f91;try{const _0x15b4da=document['getElementById']('highlight-id')?.[_0x57c06e(0xba)]||'',_0x4d8920=document['getElementById']('highlight-type')?.['value']||'match',_0x2e65d6={'title':document['getElementById']('highlight-title')?.[_0x57c06e(0xba)]?.['trim']()||'','description':document['getElementById'](_0x57c06e(0x1f9))?.['value']?.[_0x57c06e(0x281)]()||'','submittedBy':document[_0x57c06e(0x15b)]('highlight-submitted-by')?.['value']?.['trim']()||'','videoId':document[_0x57c06e(0x15b)]('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x4d8920};if(!_0x2e65d6[_0x57c06e(0x154)]){showNotification('Title\x20is\x20required',_0x57c06e(0x240));return;}if(_0x4d8920==='match'){_0x2e65d6['matchInfo']=document['getElementById'](_0x57c06e(0x1f3))?.[_0x57c06e(0xba)]?.['trim']()||'',_0x2e65d6['map']=document['getElementById'](_0x57c06e(0x16c))?.['value']?.['trim']()||'';const _0x16cad0=document[_0x57c06e(0x15b)]('highlight-match-date'),_0x130daf=_0x16cad0?.['value']||'';_0x2e65d6['matchDate']=_0x130daf?Timestamp['fromDate'](new Date(_0x130daf)):null,_0x2e65d6['winnerName']=document['getElementById'](_0x57c06e(0x228))?.[_0x57c06e(0xba)]?.[_0x57c06e(0x281)]()||'',_0x2e65d6['winnerScore']=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x2e65d6['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x2e65d6[_0x57c06e(0x13e)]=document[_0x57c06e(0x15b)]('highlight-loser-score')?.[_0x57c06e(0xba)]?.['trim']()||'',_0x2e65d6['matchLink']=document['getElementById']('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x2e65d6['videoId']){showNotification(_0x57c06e(0x170),'error');return;}}else{if(_0x4d8920==='creator'){_0x2e65d6['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x2e65d6[_0x57c06e(0x27f)]=document['getElementById'](_0x57c06e(0x2c7))?.['value']?.['trim']()||'',_0x2e65d6['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x2e65d6['creatorImageUrl']=document['getElementById']('highlight-creator-image')?.[_0x57c06e(0xba)]?.['trim']()||'';if(!_0x2e65d6['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x4d8920===_0x57c06e(0x299)){_0x2e65d6['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.['value']?.[_0x57c06e(0x281)]()||'',_0x2e65d6['achievementType']=document['getElementById'](_0x57c06e(0x21d))?.['value']?.['trim']()||'',_0x2e65d6['achievementDetails']=document[_0x57c06e(0x15b)]('highlight-achievement-details')?.['value']?.[_0x57c06e(0x281)]()||'',_0x2e65d6[_0x57c06e(0x28a)]=document['getElementById']('highlight-player-profile')?.['value']?.['trim']()||'',_0x2e65d6['achievementImageUrl']=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x2e65d6[_0x57c06e(0x15d)]){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x15b4da?(_0x2e65d6[_0x57c06e(0xbf)]=serverTimestamp(),await updateDoc(doc(db,_0x57c06e(0x268),_0x15b4da),_0x2e65d6),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x2e65d6[_0x57c06e(0x273)]=serverTimestamp(),await addDoc(collection(db,_0x57c06e(0x268)),_0x2e65d6),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x1f3f82){console['error'](_0x57c06e(0x29b),_0x1f3f82),showNotification(_0x57c06e(0x214)+_0x1f3f82['message'],_0x57c06e(0x240));}}function closeHighlightModal(){const _0x1e83c8=a4_0x425f91,_0x426a12=document['getElementById']('highlight-modal');if(_0x426a12)_0x426a12[_0x1e83c8(0x2d2)][_0x1e83c8(0x11c)]('active');}function getHighlightTypeName(_0x4e87f5){switch(_0x4e87f5){case'match':return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x38ea28=a4_0x425f91,_0x28ccd1=document['getElementById']('highlight-video-id'),_0x56b422=document['getElementById']('highlight-video-preview-container'),_0x44a93e=document['getElementById']('highlight-video-preview');if(!_0x28ccd1||!_0x44a93e||!_0x56b422)return;const _0x16f99d=_0x28ccd1['value']['trim']();_0x16f99d&&/^[a-zA-Z0-9_-]{11}$/[_0x38ea28(0x279)](_0x16f99d)?(_0x44a93e['src']='https://www.youtube.com/embed/'+_0x16f99d,_0x56b422['style']['display']='block'):(_0x44a93e['src']='',_0x56b422[_0x38ea28(0xf6)][_0x38ea28(0x2ab)]='none');}async function loadHighlightsAdmin(){const _0x225f6e=a4_0x425f91,_0x5998f5=document['getElementById']('highlights-table-body');if(!_0x5998f5)return;_0x5998f5['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x7322e2=query(collection(db,'highlights'),orderBy(_0x225f6e(0x273),'desc')),_0x220925=await getDocs(_0x7322e2);if(_0x220925['empty']){_0x5998f5['innerHTML']=_0x225f6e(0x10e);return;}_0x5998f5['innerHTML']='',_0x220925['forEach'](_0xe4d95=>{const _0x42fcda=_0x225f6e,_0xb65660=_0xe4d95[_0x42fcda(0xca)](),_0x5622a8=document[_0x42fcda(0x135)]('tr'),_0x49cbeb=_0xb65660[_0x42fcda(0x273)]?new Date(_0xb65660['createdAt']['seconds']*0x3e8)[_0x42fcda(0x2c2)]():'N/A';let _0x4289de=_0x42fcda(0x244),_0x1a3965='';switch(_0xb65660[_0x42fcda(0xa4)]){case'match':_0x4289de='Match',_0x1a3965='match-type';break;case'creator':_0x4289de='Creator',_0x1a3965='creator-type';break;case'achievement':_0x4289de='Achievement',_0x1a3965=_0x42fcda(0x28e);break;}_0x5622a8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xb65660['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x1a3965+'\x22>'+_0x4289de+_0x42fcda(0xb2)+_0x49cbeb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xb65660[_0x42fcda(0x18e)]||'Unknown')+_0x42fcda(0x26d)+(_0xb65660['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0xe4d95['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0xe4d95['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5998f5[_0x42fcda(0xf0)](_0x5622a8);}),document[_0x225f6e(0x2d1)]('.edit-highlight-btn')[_0x225f6e(0x116)](_0x12c287=>{const _0x237c7b=_0x225f6e;_0x12c287[_0x237c7b(0x239)]('click',_0x16f027=>{const _0x35cb9e=_0x237c7b;openHighlightModal(_0x16f027[_0x35cb9e(0x17b)][_0x35cb9e(0x1fd)]['id']);});}),document['querySelectorAll'](_0x225f6e(0x2bd))['forEach'](_0x5f5583=>{const _0x5067a0=_0x225f6e;_0x5f5583[_0x5067a0(0x239)]('click',_0x3e6b89=>{confirmDeleteHighlight(_0x3e6b89['currentTarget']['dataset']['id']);});});}catch(_0x8de463){console['error']('Error\x20loading\x20highlights:',_0x8de463),_0x5998f5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x8de463['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0xb07a72){const _0x5bc00a=a4_0x425f91;if(confirm(_0x5bc00a(0x23a)))try{await deleteDoc(doc(db,'highlights',_0xb07a72)),showNotification('Highlight\x20deleted\x20successfully',_0x5bc00a(0x1a2)),loadHighlightsAdmin();}catch(_0x17b96e){console['error']('Error\x20deleting\x20highlight:',_0x17b96e),showNotification(_0x5bc00a(0x272)+_0x17b96e['message'],_0x5bc00a(0x240));}}function setupCreateTestMatchModal(){const _0x3a0742=a4_0x425f91;console[_0x3a0742(0x1cf)](_0x3a0742(0x26a));const _0x2b2eab=document[_0x3a0742(0x15b)]('create-test-match-modal'),_0x3d15fe=document['getElementById']('create-test-match-form');if(!_0x2b2eab){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x3d15fe){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x597af1=_0x2b2eab['cloneNode'](!![]);_0x2b2eab['parentNode'][_0x3a0742(0x17d)](_0x597af1,_0x2b2eab);const _0x1a9f91=_0x597af1['querySelector']('#create-test-match-form');_0x597af1[_0x3a0742(0x239)]('click',function(_0x39030a){_0x39030a['target']===_0x597af1&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x3b1c68=_0x597af1['querySelector']('.close-btn');_0x3b1c68&&_0x3b1c68[_0x3a0742(0x239)]('click',function(_0x235e92){const _0x316710=_0x3a0742;_0x235e92[_0x316710(0x27b)](),_0x235e92[_0x316710(0x25a)](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0xac6d9e=_0x597af1['querySelector'](_0x3a0742(0x98));_0xac6d9e&&_0xac6d9e['addEventListener']('click',function(_0x47c9f8){const _0x167a3e=_0x3a0742;_0x47c9f8['preventDefault'](),_0x47c9f8[_0x167a3e(0x25a)](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x1a9f91){_0x1a9f91['addEventListener']('submit',function(_0x34ec4f){const _0x26caa4=_0x3a0742;_0x34ec4f['preventDefault'](),_0x34ec4f['stopPropagation'](),console[_0x26caa4(0x1cf)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x2f3102=_0x1a9f91[_0x3a0742(0x163)]('button[type=\x22submit\x22]');_0x2f3102&&_0x2f3102[_0x3a0742(0x239)]('click',function(_0x3577f8){const _0x4f53d0=_0x3a0742;_0x3577f8['preventDefault'](),_0x3577f8[_0x4f53d0(0x25a)](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x4da241=a4_0x425f91;console['log'](_0x4da241(0x2ba)),setupHighlightButtons();const _0x104591=document['getElementById']('highlight-form');_0x104591&&_0x104591['addEventListener']('submit',_0x51a3d0=>{const _0x1f41a6=_0x4da241;_0x51a3d0[_0x1f41a6(0x27b)](),saveHighlight();});const _0x2a4cd7=document['getElementById']('cancel-highlight-btn');_0x2a4cd7&&_0x2a4cd7['addEventListener'](_0x4da241(0xf7),closeHighlightModal);const _0x424d51=document['querySelector']('#highlight-modal\x20.close-btn');_0x424d51&&_0x424d51['addEventListener']('click',closeHighlightModal);const _0x39b3b6=document[_0x4da241(0x15b)]('highlight-modal');_0x39b3b6&&_0x39b3b6['addEventListener']('click',_0x26c76d=>{_0x26c76d['target']===_0x39b3b6&&closeHighlightModal();});const _0x47a62f=document['getElementById']('highlight-video-id');_0x47a62f&&_0x47a62f[_0x4da241(0x239)]('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x1d1e9a=a4_0x425f91;console['log'](_0x1d1e9a(0x13f));const _0x554322=document['getElementById']('matches-prev-page'),_0x16c825=document['getElementById']('matches-next-page');_0x554322&&_0x554322['addEventListener']('click',()=>{const _0xfb3178=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0xfb3178]['page']-0x1);});_0x16c825&&_0x16c825['addEventListener']('click',()=>{const _0x1a7d7a=_0x1d1e9a,_0x45340f=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x45340f][_0x1a7d7a(0x23c)]+0x1);});const _0x2cf1fd=document['getElementById']('apply-matches-filters'),_0x527fa0=document['getElementById']('reset-matches-filters');_0x2cf1fd&&_0x2cf1fd['addEventListener'](_0x1d1e9a(0xf7),applyMatchesFilters);_0x527fa0&&_0x527fa0['addEventListener']('click',resetMatchesFilters);const _0xbfce0a=document['getElementById']('matches-search');_0xbfce0a&&_0xbfce0a[_0x1d1e9a(0x239)]('input',debounce(filterMatchesTable,0x12c));const _0xec226=document['getElementById']('resimulate-match-btn');_0xec226&&_0xec226[_0x1d1e9a(0x239)]('click',openResimulateModal);const _0x45d5c6=document[_0x1d1e9a(0x15b)](_0x1d1e9a(0x13d));if(_0x45d5c6){const _0x1cb862=_0x45d5c6['querySelector']('.close');_0x1cb862&&_0x1cb862['addEventListener']('click',closeResimulateModal),_0x45d5c6[_0x1d1e9a(0x239)]('click',_0x2311de=>{_0x2311de['target']===_0x45d5c6&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console[_0x1d1e9a(0x1cf)](_0x1d1e9a(0x2cd));}function openCreateTestMatchModal(){const _0x524121=a4_0x425f91;console[_0x524121(0x1cf)]('Opening\x20create\x20test\x20match\x20modal');const _0x7c667a=document['getElementById'](_0x524121(0x12c)),_0x45de2f=document['getElementById'](_0x524121(0xe7));if(!_0x7c667a){console[_0x524121(0x240)]('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification(_0x524121(0x168),'error');return;}if(!_0x45de2f){console[_0x524121(0x240)]('Create\x20test\x20match\x20form\x20not\x20found'),showNotification(_0x524121(0x18f),'error');return;}_0x45de2f[_0x524121(0x2ac)]();const _0x45c745=document[_0x524121(0x2d1)]('input[name=\x22test-match-ladder\x22]');let _0xac3832=![];_0x45c745[_0x524121(0x116)](_0x85b597=>{const _0x232b26=_0x524121;console['log']('Found\x20radio\x20with\x20value:',_0x85b597[_0x232b26(0xba)]),_0x85b597['value']===currentLadder&&(_0x85b597[_0x232b26(0x290)]=!![],_0xac3832=!![],console['log'](_0x232b26(0x289),currentLadder));});if(!_0xac3832){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x5011d8=document[_0x524121(0x163)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x5011d8&&(_0x5011d8['checked']=!![],console[_0x524121(0x1cf)]('Defaulted\x20to\x20D1\x20ladder'));}const _0x1829ef=document['getElementById'](_0x524121(0x21c));if(_0x1829ef){const _0x32cf1e=new Date()['toISOString']()['split']('T')[0x0];_0x1829ef['value']=_0x32cf1e;}_0x7c667a[_0x524121(0xf6)]['display']=_0x524121(0xe9),_0x7c667a['style'][_0x524121(0x94)]='visible',_0x7c667a['style']['opacity']='1',_0x7c667a['classList']['add']('active'),console[_0x524121(0x1cf)]('Modal\x20should\x20now\x20be\x20visible');const _0x3773bf=document['getElementById']('test-match-winner-username');_0x3773bf&&setTimeout(()=>{_0x3773bf['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x286b01=a4_0x425f91;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x2f005f=document['getElementById']('create-test-match-modal');if(!_0x2f005f){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x2f005f[_0x286b01(0x2d2)]['remove']('active'),_0x2f005f['style']['opacity']='0',_0x2f005f['style']['visibility']=_0x286b01(0xe0),setTimeout(()=>{const _0x30099c=_0x286b01;!_0x2f005f['classList'][_0x30099c(0x256)]('active')&&(_0x2f005f['style']['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x48b90b=a4_0x425f91;console['log'](_0x48b90b(0x212));try{const _0x36eae1=auth[_0x48b90b(0x24b)];if(!_0x36eae1){showNotification(_0x48b90b(0x2a8),_0x48b90b(0x240));return;}const _0x1a8566='D1',_0x407fb2='approvedMatches',_0x409d13={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x48b90b(0x11e),'approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x36eae1['email'],'createdAt':serverTimestamp(),'createdBy':_0x36eae1[_0x48b90b(0xfe)],'isTestMatch':!![],'ladder':_0x1a8566,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x36eae1[_0x48b90b(0xfe)]};console['log'](_0x48b90b(0x99)),await addDoc(collection(db,_0x407fb2),_0x409d13),showNotification('Simple\x20test\x20match\x20created\x20successfully',_0x48b90b(0x1a2)),closeCreateTestMatchModal();}catch(_0x291f86){console['error'](_0x48b90b(0x15f),_0x291f86),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x291f86['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x490df4=a4_0x425f91;try{console[_0x490df4(0x1cf)](_0x490df4(0xd2)),console[_0x490df4(0x1cf)]('Auth:',auth),console['log'](_0x490df4(0xd5),db),console['log'](_0x490df4(0x2c1),auth['currentUser']);const _0x45c122=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x45c122);const _0x304db7=query(_0x45c122,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x304db7);const _0x3f0c4f=await getDocs(_0x304db7);console['log']('Query\x20executed.\x20Empty:',_0x3f0c4f['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x495ba8){console['error']('Firebase\x20connection\x20test\x20failed:',_0x495ba8);}};function setupCreateTestMatchButton(){const _0x4d7d8b=a4_0x425f91,_0x267ec1=document['getElementById'](_0x4d7d8b(0x145));if(!_0x267ec1){console['error'](_0x4d7d8b(0x278));return;}console[_0x4d7d8b(0x1cf)](_0x4d7d8b(0x12e));const _0x560ee1=_0x267ec1['cloneNode'](!![]);_0x267ec1['parentNode']['replaceChild'](_0x560ee1,_0x267ec1),_0x560ee1['addEventListener']('click',function(_0x37b3df){const _0x27471b=_0x4d7d8b;_0x37b3df['preventDefault'](),_0x37b3df['stopPropagation'](),console['log'](_0x27471b(0x20f)),openCreateTestMatchModal();}),console[_0x4d7d8b(0x1cf)]('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x4eabdd=0x1){const _0x3f5609=a4_0x425f91,_0x2554fc=document['getElementById'](_0x3f5609(0x9d));if(!_0x2554fc)return;_0x2554fc['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x497ec5=currentLadder['toLowerCase'](),_0x54989e=matchesPagination[_0x497ec5],_0x2a7e06=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x7c14f1=collection(db,_0x2a7e06);_0x4eabdd<=0x1?(_0x54989e['page']=0x1,_0x54989e['firstVisible']=null,_0x54989e[_0x3f5609(0x297)]=null):_0x54989e['page']=_0x4eabdd;const _0x2198e3=getMatchesFilters();let _0x1fcb87=_0x7c14f1;if(_0x2198e3[_0x3f5609(0x1e5)]||_0x2198e3['endDate']||_0x2198e3[_0x3f5609(0x2b5)]){let _0x1cc82e=[];_0x2198e3['startDate']&&_0x2198e3['endDate']?(_0x1cc82e[_0x3f5609(0x27a)](where('approvedAt','>=',_0x2198e3['startDate']),where('approvedAt','<=',_0x2198e3[_0x3f5609(0x293)])),_0x1fcb87=query(_0x7c14f1,..._0x1cc82e)):_0x1fcb87=query(_0x7c14f1,orderBy('approvedAt','desc'));}else _0x1fcb87=query(_0x7c14f1,orderBy(_0x3f5609(0x286),'desc'));_0x4eabdd>0x1&&_0x54989e['lastVisible']?_0x1fcb87=query(_0x1fcb87,startAfter(_0x54989e['lastVisible']),limit(PAGE_SIZE)):_0x1fcb87=query(_0x1fcb87,limit(PAGE_SIZE));const _0x463780=await getDocs(_0x1fcb87);!_0x463780['empty']&&(_0x54989e['firstVisible']=_0x463780['docs'][0x0],_0x54989e[_0x3f5609(0x297)]=_0x463780['docs'][_0x463780['docs'][_0x3f5609(0x21e)]-0x1]);let _0x26522b=![];if(!_0x463780['empty']){const _0x5aa3d4=query(_0x1fcb87,startAfter(_0x54989e['lastVisible']),limit(0x1)),_0x2e5626=await getDocs(_0x5aa3d4);_0x26522b=!_0x2e5626['empty'];}const _0x56de90=document['getElementById']('matches-prev-page'),_0x5aa697=document[_0x3f5609(0x15b)]('matches-next-page'),_0x5a9500=document['getElementById'](_0x3f5609(0x2a2));if(_0x56de90)_0x56de90[_0x3f5609(0x264)]=_0x54989e[_0x3f5609(0x23c)]<=0x1;if(_0x5aa697)_0x5aa697['disabled']=!_0x26522b;if(_0x5a9500)_0x5a9500[_0x3f5609(0x107)]='Page\x20'+_0x54989e['page'];if(_0x463780['empty']){_0x2554fc['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x2554fc['innerHTML']='',_0x463780[_0x3f5609(0x116)](_0x56c9bd=>{const _0x2f845d=_0x3f5609,_0x3cc449=_0x56c9bd[_0x2f845d(0xca)](),_0x5abe20=document['createElement']('tr'),_0x7f894c=_0x3cc449['approvedAt']?new Date(_0x3cc449['approvedAt'][_0x2f845d(0x29c)]*0x3e8)['toLocaleDateString']():'N/A';_0x5abe20['setAttribute']('data-id',_0x56c9bd['id']),_0x5abe20[_0x2f845d(0xf2)]('data-ladder',currentLadder),_0x5abe20[_0x2f845d(0x2d2)]['add']('match-row'),_0x5abe20[_0x2f845d(0xa7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x7f894c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x3cc449[_0x2f845d(0x29a)]||_0x2f845d(0x244))+_0x2f845d(0x2d5)+(_0x3cc449['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x3cc449[_0x2f845d(0xff)]||0x0)+_0x2f845d(0x18c)+(_0x3cc449['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x3cc449['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x56c9bd['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x56c9bd['id']+_0x2f845d(0x14a),_0x2554fc[_0x2f845d(0xf0)](_0x5abe20);}),setupMatchesActionButtons(),_0x2198e3['searchTerm']&&filterMatchesTable(),console[_0x3f5609(0x1cf)]('Loaded\x20'+_0x463780['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x54989e[_0x3f5609(0x23c)]);}catch(_0x3572ea){console[_0x3f5609(0x240)]('Error\x20loading\x20matches:',_0x3572ea),_0x2554fc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x3572ea['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x4e5eac,_0x207363){const _0x4ca101=a4_0x425f91;try{console['log']('Deleting\x20match\x20'+_0x4e5eac+'\x20from\x20'+_0x207363+_0x4ca101(0x2d3));const _0x2e6e5b=auth[_0x4ca101(0x24b)];if(!_0x2e6e5b){showNotification(_0x4ca101(0x123),'error');return;}const _0x1aaa44=_0x207363==='D1'?'approvedMatches':_0x207363==='D2'?_0x4ca101(0x1f1):_0x4ca101(0x8c);console['log'](_0x4ca101(0x17a)+_0x1aaa44),showNotification(_0x4ca101(0x164),'info'),await deleteDoc(doc(db,_0x1aaa44,_0x4e5eac)),console['log'](_0x4ca101(0x91)),showNotification('Match\x20deleted\x20successfully',_0x4ca101(0x1a2));const _0xf29a93=_0x207363['toLowerCase']();loadMatchesData(matchesPagination[_0xf29a93]['page']);}catch(_0x5e3bc1){console['error']('Error\x20deleting\x20match:',_0x5e3bc1),showNotification(_0x4ca101(0x1eb)+_0x5e3bc1[_0x4ca101(0x282)],'error');}}function setupMatchesActionButtons(){const _0x3a9e31=a4_0x425f91;console['log'](_0x3a9e31(0x271)),document[_0x3a9e31(0x2d1)]('.edit-match-btn')['forEach'](_0x9235b4=>{const _0xfa9f87=_0x3a9e31;_0x9235b4[_0xfa9f87(0x239)]('click',_0x5eebca=>{const _0x208885=_0xfa9f87;_0x5eebca['preventDefault'](),_0x5eebca['stopPropagation']();const _0x6d6289=_0x5eebca['currentTarget']['dataset']['id'],_0x4fb34a=_0x5eebca['currentTarget']['closest']('tr'),_0xe6a0a=_0x4fb34a[_0x208885(0x1fd)]['ladder'];console['log']('Edit\x20match\x20clicked:',_0x6d6289,_0xe6a0a),openEditMatchModal(_0x6d6289,_0xe6a0a);});}),document['querySelectorAll'](_0x3a9e31(0x8d))[_0x3a9e31(0x116)](_0x4ff8ea=>{const _0x1b780e=_0x3a9e31;_0x4ff8ea['addEventListener'](_0x1b780e(0xf7),_0x38c53f=>{const _0x2f5d38=_0x1b780e;_0x38c53f['preventDefault'](),_0x38c53f[_0x2f5d38(0x25a)]();const _0x5e6257=_0x38c53f['currentTarget']['dataset']['id'],_0x5ef9ab=_0x38c53f['currentTarget']['closest']('tr'),_0xe7b890=_0x5ef9ab['dataset']['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x5e6257,_0xe7b890),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x5e6257,_0xe7b890);});}),console['log'](_0x3a9e31(0x28c));}function filterMatchesTable(){const _0x3cef9b=a4_0x425f91,_0x1b5970=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x292f23=document['querySelectorAll']('#matches-table-body\x20tr');let _0x154aed=0x0;_0x292f23['forEach'](_0x5e293c=>{const _0x5cd240=a4_0x3c92;if(_0x5e293c[_0x5cd240(0x2d2)]['contains']('loading-cell')||_0x5e293c['classList'][_0x5cd240(0x256)]('empty-state')||_0x5e293c[_0x5cd240(0x2d2)]['contains']('error-state'))return;const _0x10f423=_0x5e293c['cells'][0x1]['textContent']['toLowerCase'](),_0x4c8ff6=_0x5e293c[_0x5cd240(0xbb)][0x2]['textContent'][_0x5cd240(0x197)](),_0x49aa8c=_0x5e293c['cells'][0x4]['textContent'][_0x5cd240(0x197)]();_0x10f423['includes'](_0x1b5970)||_0x4c8ff6['includes'](_0x1b5970)||_0x49aa8c[_0x5cd240(0xcf)](_0x1b5970)?(_0x5e293c['style']['display']='',_0x154aed++):_0x5e293c['style'][_0x5cd240(0x2ab)]='none';});if(_0x154aed===0x0&&_0x292f23['length']>0x0){const _0x291bd6=document['getElementById']('matches-table-body'),_0x2cf215=_0x291bd6[_0x3cef9b(0x163)]('.no-results');if(!_0x2cf215){const _0x25ee30=document['createElement']('tr');_0x25ee30[_0x3cef9b(0xed)]='no-results',_0x25ee30[_0x3cef9b(0xa7)]='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x1b5970+'\x27</td>',_0x291bd6['appendChild'](_0x25ee30);}}else{const _0x3c990c=document[_0x3cef9b(0x163)]('.no-results');_0x3c990c&&_0x3c990c[_0x3cef9b(0x11c)]();}}function getMatchesFilters(){const _0x5058c3=a4_0x425f91,_0x1c2a01=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x38aba8=document['getElementById']('matches-start-date')['value'],_0x40308c=document[_0x5058c3(0x15b)]('matches-end-date')[_0x5058c3(0xba)];let _0x43e207=null,_0x32a43e=null;return _0x38aba8&&(_0x43e207=new Date(_0x38aba8),_0x43e207[_0x5058c3(0x2a3)](0x0,0x0,0x0,0x0),_0x43e207=Timestamp[_0x5058c3(0x152)](_0x43e207)),_0x40308c&&(_0x32a43e=new Date(_0x40308c),_0x32a43e['setHours'](0x17,0x3b,0x3b,0x3e7),_0x32a43e=Timestamp['fromDate'](_0x32a43e)),{'searchTerm':_0x1c2a01,'startDate':_0x43e207,'endDate':_0x32a43e};}async function applyMatchesFilters(){const _0x1e6951=a4_0x425f91,_0x212fd2=currentLadder[_0x1e6951(0x197)]();matchesPagination[_0x212fd2]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x37f732=a4_0x425f91;document['getElementById']('matches-start-date')[_0x37f732(0xba)]='',document[_0x37f732(0x15b)]('matches-end-date')['value']='',document[_0x37f732(0x15b)]('matches-search')['value']='';const _0x4c7f8b=currentLadder['toLowerCase']();matchesPagination[_0x4c7f8b]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x284407,_0x1fe128){const _0x2fd70c=a4_0x425f91,_0x225610=document['getElementById']('edit-match-modal');if(!_0x225610)return;try{const _0x2f4060=_0x1fe128==='D1'?'approvedMatches':_0x1fe128==='D2'?_0x2fd70c(0x1f1):'approvedMatchesD3',_0x4fb728=doc(db,_0x2f4060,_0x284407),_0x5c67d2=await getDoc(_0x4fb728);if(!_0x5c67d2['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x36f962=_0x5c67d2[_0x2fd70c(0xca)]();document['getElementById']('edit-match-id')[_0x2fd70c(0xba)]=_0x284407,document['getElementById'](_0x2fd70c(0x133))['value']=_0x1fe128,document['getElementById'](_0x2fd70c(0x161))['value']=_0x36f962['winnerUsername']||'',document[_0x2fd70c(0x15b)](_0x2fd70c(0x122))['value']=_0x36f962[_0x2fd70c(0xff)]||0x0,document[_0x2fd70c(0x15b)]('edit-match-winner-suicides')['value']=_0x36f962['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')[_0x2fd70c(0xba)]=_0x36f962[_0x2fd70c(0x19a)]||'',document[_0x2fd70c(0x15b)]('edit-match-loser')['value']=_0x36f962[_0x2fd70c(0x1ab)]||'',document['getElementById']('edit-match-loser-score')[_0x2fd70c(0xba)]=_0x36f962['loserScore']||0x0,document['getElementById']('edit-match-loser-suicides')[_0x2fd70c(0xba)]=_0x36f962['loserSuicides']||0x0,document[_0x2fd70c(0x15b)]('edit-match-loser-comment')['value']=_0x36f962['loserComment']||'',document[_0x2fd70c(0x15b)](_0x2fd70c(0x15a))[_0x2fd70c(0xba)]=_0x36f962['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')['value']=_0x36f962[_0x2fd70c(0x236)]||'',document['getElementById']('edit-match-loser-demo')['value']=_0x36f962[_0x2fd70c(0x204)]||_0x36f962['demoLink']||'',document['getElementById'](_0x2fd70c(0x186))[_0x2fd70c(0x107)]=_0x2fd70c(0x194)+_0x36f962['winnerUsername']+'\x20vs\x20'+_0x36f962[_0x2fd70c(0x1ab)],_0x225610['classList']['add'](_0x2fd70c(0x216));}catch(_0x5c79e8){console['error']('Error\x20loading\x20match\x20data:',_0x5c79e8),showNotification('Failed\x20to\x20load\x20match\x20data',_0x2fd70c(0x240));}}function closeEditMatchModal(){const _0xc85720=document['getElementById']('edit-match-modal');_0xc85720&&_0xc85720['classList']['remove']('active');}async function saveEditedMatch(){const _0x54c964=a4_0x425f91;try{const _0x34ef3c=document['getElementById']('edit-match-id')[_0x54c964(0xba)],_0x368417=document[_0x54c964(0x15b)](_0x54c964(0x133))['value'];if(!_0x34ef3c||!_0x368417){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x2eb9fb=_0x368417==='D1'?'approvedMatches':_0x368417==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0xb68061=document['getElementById']('edit-match-winner')['value']['trim'](),_0x4feb06=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x3a1a07=parseInt(document[_0x54c964(0x15b)]('edit-match-winner-suicides')['value']),_0xc8caf9=document['getElementById']('edit-match-winner-comment')['value']['trim'](),_0x482f67=document[_0x54c964(0x15b)](_0x54c964(0xa3))['value'][_0x54c964(0x281)](),_0x2a4498=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x563d01=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x496ad3=document['getElementById']('edit-match-loser-comment')['value']['trim'](),_0x4e8ccd=document[_0x54c964(0x15b)](_0x54c964(0x15a))['value']['trim'](),_0x1d71a5=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x5bd5fc=document[_0x54c964(0x15b)]('edit-match-loser-demo')['value']['trim']();if(!_0xb68061||!_0x482f67){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required',_0x54c964(0x240));return;}await updateDoc(doc(db,_0x2eb9fb,_0x34ef3c),{'winnerUsername':_0xb68061,'winnerScore':_0x4feb06,'winnerSuicides':_0x3a1a07,'winnerComment':_0xc8caf9,'loserUsername':_0x482f67,'loserScore':_0x2a4498,'loserSuicides':_0x563d01,'loserComment':_0x496ad3,'mapPlayed':_0x4e8ccd,'winnerDemoLink':_0x1d71a5||null,'loserDemoLink':_0x5bd5fc||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x54c964(0x24b)]['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x368417['toLowerCase']()][_0x54c964(0x23c)]);}catch(_0x2629fe){console['error'](_0x54c964(0x23b),_0x2629fe),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x2629fe['message'],'error');}}async function openDeleteMatchModal(_0xe8b65c,_0x424236){const _0x54298b=a4_0x425f91;try{const _0x125291=_0x424236==='D1'?'approvedMatches':_0x424236==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x4b90d9=doc(db,_0x125291,_0xe8b65c),_0x403da8=await getDoc(_0x4b90d9);if(!_0x403da8['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x409d36=_0x403da8['data'](),_0x1fc6ff=document['getElementById']('delete-match-confirm-modal');_0x1fc6ff['dataset']['matchId']=_0xe8b65c,_0x1fc6ff['dataset']['ladder']=_0x424236;const _0x235a8d=_0x409d36[_0x54298b(0x286)]?new Date(_0x409d36['approvedAt'][_0x54298b(0x29c)]*0x3e8)['toLocaleDateString']():'N/A',_0x50c0fd=document['getElementById']('delete-match-summary');_0x50c0fd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x235a8d+_0x54298b(0xc3)+_0x409d36['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x409d36['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x409d36['winnerScore']||0x0)+'\x20-\x20'+(_0x409d36['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x409d36[_0x54298b(0x108)]||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x424236+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x1fc6ff['classList'][_0x54298b(0x2bc)]('active');}catch(_0x556f0a){console['error'](_0x54298b(0xfb),_0x556f0a),showNotification('Failed\x20to\x20load\x20match\x20data',_0x54298b(0x240));}}function closeDeleteMatchModal(){const _0xd2eb14=a4_0x425f91,_0x1d1334=document['getElementById']('delete-match-confirm-modal');_0x1d1334&&(_0x1d1334[_0xd2eb14(0x2d2)]['remove'](_0xd2eb14(0x216)),_0x1d1334['removeAttribute']('data-match-id'),_0x1d1334['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0xe70d53=a4_0x425f91,_0x577901=document[_0xe70d53(0x15b)](_0xe70d53(0x207)),_0x40bda4=_0x577901['dataset'][_0xe70d53(0x132)],_0x3879a7=_0x577901[_0xe70d53(0x1fd)]['ladder'];if(!_0x40bda4||!_0x3879a7){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x1c0a5e=_0x3879a7==='D1'?'approvedMatches':_0x3879a7==='D2'?_0xe70d53(0x1f1):'approvedMatchesD3';await deleteDoc(doc(db,_0x1c0a5e,_0x40bda4)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x3879a7['toLowerCase']()]['page']);}catch(_0x32cb0a){console['error']('Error\x20deleting\x20match:',_0x32cb0a),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x32cb0a['message'],'error');}}async function saveHighlightChanges(){const _0x3a734c=a4_0x425f91,_0x174e97=document['getElementById'](_0x3a734c(0x241))[_0x3a734c(0xba)],_0x2cad5f=document[_0x3a734c(0x15b)]('edit-highlight-type-select')['value'];let _0x2e899f={'title':document['getElementById'](_0x3a734c(0x1ae))['value']['trim'](),'type':_0x2cad5f,'description':document['getElementById'](_0x3a734c(0x131))['value']['trim'](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth['currentUser']['email']};if(_0x2cad5f==='match'){_0x2e899f['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x2e899f['map']=document['getElementById'](_0x3a734c(0x274))['value']['trim']();const _0x2997f3=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x2e899f['matchDate']=_0x2997f3?Timestamp['fromDate'](new Date(_0x2997f3)):null,_0x2e899f[_0x3a734c(0x19d)]=document['getElementById']('edit-highlight-winnerName-input')[_0x3a734c(0xba)]['trim'](),_0x2e899f['winnerScore']=document[_0x3a734c(0x15b)](_0x3a734c(0x1d1))['value']['trim'](),_0x2e899f[_0x3a734c(0x2ae)]=document['getElementById']('edit-highlight-loserName-input')[_0x3a734c(0xba)]['trim'](),_0x2e899f['loserScore']=document['getElementById'](_0x3a734c(0x28f))[_0x3a734c(0xba)][_0x3a734c(0x281)](),_0x2e899f['matchLink']=document[_0x3a734c(0x15b)]('edit-highlight-matchLink-input')['value']['trim'](),_0x2e899f['mapCreator']=null,_0x2e899f[_0x3a734c(0x146)]=null,_0x2e899f['creatorImageUrl']=null,_0x2e899f['achievementPlayer']=null,_0x2e899f[_0x3a734c(0x14b)]=null,_0x2e899f['achievementDetails']=null,_0x2e899f['playerProfileUrl']=null;}else{if(_0x2cad5f==='creator')_0x2e899f['map']=document['getElementById'](_0x3a734c(0x274))['value'][_0x3a734c(0x281)](),_0x2e899f['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')[_0x3a734c(0xba)]['trim'](),_0x2e899f['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value'][_0x3a734c(0x281)](),_0x2e899f['creatorImageUrl']=document['getElementById'](_0x3a734c(0x8e))['value']['trim'](),_0x2e899f['matchInfo']=null,_0x2e899f['matchDate']=null,_0x2e899f[_0x3a734c(0x19d)]=null,_0x2e899f['winnerScore']=null,_0x2e899f[_0x3a734c(0x2ae)]=null,_0x2e899f[_0x3a734c(0x13e)]=null,_0x2e899f['matchLink']=null,_0x2e899f[_0x3a734c(0x15d)]=null,_0x2e899f['achievementType']=null,_0x2e899f['achievementDetails']=null,_0x2e899f['playerProfileUrl']=null;else _0x2cad5f==='achievement'&&(_0x2e899f['achievementPlayer']=document[_0x3a734c(0x15b)]('edit-highlight-achievementPlayer-input')['value'][_0x3a734c(0x281)](),_0x2e899f[_0x3a734c(0x14b)]=document['getElementById'](_0x3a734c(0x14d))['value']['trim'](),_0x2e899f['achievementDetails']=document[_0x3a734c(0x15b)]('edit-highlight-achievementDetails-input')['value']['trim'](),_0x2e899f['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')[_0x3a734c(0xba)]['trim'](),_0x2e899f['matchInfo']=null,_0x2e899f['map']=null,_0x2e899f['matchDate']=null,_0x2e899f[_0x3a734c(0x19d)]=null,_0x2e899f[_0x3a734c(0xff)]=null,_0x2e899f['loserName']=null,_0x2e899f[_0x3a734c(0x13e)]=null,_0x2e899f['matchLink']=null,_0x2e899f[_0x3a734c(0x27f)]=null,_0x2e899f['mapVersion']=null,_0x2e899f[_0x3a734c(0x87)]=null);}try{if(_0x174e97){_0x2e899f['updatedAt']=serverTimestamp();const _0x395cc8=doc(db,_0x3a734c(0x268),_0x174e97);await updateDoc(_0x395cc8,_0x2e899f),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x2e899f['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x3a734c(0x268)),_0x2e899f),showNotification('Highlight\x20added\x20successfully!',_0x3a734c(0x1a2));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x36be9f){console['error'](_0x3a734c(0x29b),_0x36be9f),showNotification('Error\x20saving\x20highlight:\x20'+_0x36be9f[_0x3a734c(0x282)],_0x3a734c(0x240));}}async function resimulateMatch(){const _0x4a3e66=a4_0x425f91;try{const _0x27eef8=document['getElementById']('resimulate-match-id')['value'];if(!_0x27eef8){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x3b1c0c=auth[_0x4a3e66(0x24b)];if(!_0x3b1c0c){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x3c08d7=currentLadder==='D1'?_0x4a3e66(0x1f0):currentLadder==='D2'?_0x4a3e66(0x1f1):_0x4a3e66(0x8c),_0x144663=doc(db,_0x3c08d7,_0x27eef8),_0x20a603=await getDoc(_0x144663);if(!_0x20a603['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x4476b7=_0x20a603['data'](),_0xb50768=_0x4476b7['approvedAt']?_0x4476b7['approvedAt']['toDate']()[_0x4a3e66(0x238)]():_0x4476b7['matchDate']?_0x4476b7['matchDate']['toDate']?_0x4476b7[_0x4a3e66(0x1d3)][_0x4a3e66(0xce)]()['toLocaleString']():new Date(_0x4476b7['matchDate'])['toLocaleString']():_0x4a3e66(0x244),_0x2a2d04=_0x4a3e66(0xaf)+_0x4476b7['winnerUsername']+_0x4a3e66(0x10b)+_0x4476b7['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x4476b7['winnerScore']+'-'+_0x4476b7[_0x4a3e66(0x13e)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x4476b7['mapPlayed']||_0x4476b7['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0xb50768+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x27eef8+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+_0x4a3e66(0x246);document[_0x4a3e66(0x15b)]('match-details-container')[_0x4a3e66(0xa7)]=_0x2a2d04,document[_0x4a3e66(0x15b)]('match-details-container')['style']['display']='block',document[_0x4a3e66(0x15b)](_0x4a3e66(0x1d4))['style']['display']='block',window['pendingResimulateData']={'matchId':_0x27eef8,'matchData':_0x4476b7,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x36cddd){console['error'](_0x4a3e66(0x1aa),_0x36cddd),showNotification(_0x4a3e66(0x136)+_0x36cddd['message'],_0x4a3e66(0x240));}}async function confirmResimulateMatch(){const _0x4a6bd3=a4_0x425f91;try{const {matchId:_0x3c284e,matchData:_0x194d72,ladder:_0x1b7513}=window['pendingResimulateData'];if(!_0x3c284e||!_0x194d72){showNotification(_0x4a6bd3(0x9f),_0x4a6bd3(0x240));return;}const _0x597a80=_0x1b7513==='D1'?_0x4a6bd3(0x84):_0x1b7513==='D2'?_0x4a6bd3(0x9e):'playersD3',_0x9151e5=_0x1b7513==='D1'?_0x4a6bd3(0x2b8):_0x1b7513==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x495861,_0x4ef919]=await Promise['all']([getDocs(query(collection(db,_0x597a80),where('username','==',_0x194d72[_0x4a6bd3(0x29a)]))),getDocs(query(collection(db,_0x597a80),where(_0x4a6bd3(0xc7),'==',_0x194d72[_0x4a6bd3(0x1ab)])))]);if(_0x495861['empty']||_0x4ef919[_0x4a6bd3(0x2a7)]){showNotification(_0x4a6bd3(0x85),'error');return;}const _0x4c9ed4=_0x495861['docs'][0x0]['id'],_0x39746e=_0x4ef919['docs'][0x0]['id'],_0x5be598=_0x495861['docs'][0x0]['data'](),_0x4b350f=_0x4ef919['docs'][0x0][_0x4a6bd3(0xca)](),[_0x20ca68,_0xcf831e]=await Promise['all']([getDocs(query(collection(db,_0x9151e5),where(_0x4a6bd3(0x2af),'==',_0x4c9ed4),where('matchId','==',_0x3c284e))),getDocs(query(collection(db,_0x9151e5),where(_0x4a6bd3(0x2af),'==',_0x39746e),where(_0x4a6bd3(0x132),'==',_0x3c284e)))]),_0xc495a6=!_0x20ca68[_0x4a6bd3(0x2a7)],_0x393698=!_0xcf831e['empty'],_0x47cee0='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0xc495a6?_0x4a6bd3(0x21a):_0x4a6bd3(0x153))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x393698?'\x20Exists':'\x20Missing')+_0x4a6bd3(0x148)+(_0x5be598['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x4b350f[_0x4a6bd3(0x17c)]||'Unknown')+_0x4a6bd3(0xe6)+(_0x5be598['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x4b350f[_0x4a6bd3(0x223)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x47cee0,document['getElementById'](_0x4a6bd3(0x1c3))['style']['display']='block';if(_0xc495a6&&_0x393698){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.',_0x4a6bd3(0x2aa));return;}showNotification(_0x4a6bd3(0x16e),'info');const _0x3dec9b=_0x194d72['approvedAt']||_0x194d72[_0x4a6bd3(0x1d3)]||serverTimestamp(),[_0x37b478,_0x5c0145]=await Promise['all']([getPlayerEloAtTime(_0x4c9ed4,_0x3dec9b,_0x9151e5),getPlayerEloAtTime(_0x39746e,_0x3dec9b,_0x9151e5)]),{calculateElo:_0x15d8d3}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x3d9600,newLoserRating:_0xa27a9b}=_0x15d8d3(_0x37b478,_0x5c0145),_0x596fe8=_0x5be598[_0x4a6bd3(0x223)]||Number['MAX_SAFE_INTEGER'],_0x22b1b7=_0x4b350f[_0x4a6bd3(0x223)]||Number[_0x4a6bd3(0x165)];let _0x493939=_0x596fe8,_0x4dd352=_0x22b1b7;_0x596fe8>_0x22b1b7&&(_0x493939=_0x22b1b7,_0x4dd352=_0x22b1b7+0x1);const _0x2b1289=writeBatch(db),_0x14763a=doc(db,_0x597a80,_0x4c9ed4);_0x2b1289['update'](_0x14763a,{'eloRating':_0x3d9600,'position':_0x493939,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x4a6bd3(0x24b)][_0x4a6bd3(0x2a1)]});const _0x429360=doc(db,_0x597a80,_0x39746e);_0x2b1289['update'](_0x429360,{'eloRating':_0xa27a9b,'position':_0x4dd352,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x596fe8>_0x22b1b7){const _0x5a9b08=await getDocs(query(collection(db,_0x597a80),where(_0x4a6bd3(0x223),'>',_0x22b1b7),where('position','<',_0x596fe8)));_0x5a9b08[_0x4a6bd3(0x116)](_0x594938=>{const _0x199af5=_0x4a6bd3,_0x1ceb9a=doc(db,_0x597a80,_0x594938['id']),_0x1b4e46=_0x594938['data']()['position'];_0x2b1289[_0x199af5(0x1c6)](_0x1ceb9a,{'position':_0x1b4e46+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x199af5(0x160),'positionAdjustedAt':serverTimestamp()});});}if(!_0xc495a6){const _0x19afa4=doc(collection(db,_0x9151e5));_0x2b1289['set'](_0x19afa4,{'playerId':_0x4c9ed4,'player':_0x194d72[_0x4a6bd3(0x29a)],'previousElo':_0x37b478,'newElo':_0x3d9600,'eloChange':_0x3d9600-_0x37b478,'opponentId':_0x39746e,'opponent':_0x194d72['loserUsername'],'matchResult':'win','previousPosition':_0x596fe8,'newPosition':_0x493939,'positionChange':_0x493939-_0x596fe8,'matchId':_0x3c284e,'timestamp':_0x3dec9b,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x4a6bd3(0x2a1)],'gameMode':_0x1b7513,'matchScore':_0x194d72['winnerScore']+'-'+_0x194d72[_0x4a6bd3(0x13e)],'mapPlayed':_0x194d72['mapPlayed']||_0x194d72[_0x4a6bd3(0x251)]||'Unknown','note':_0x4a6bd3(0x1dc)});}if(!_0x393698){const _0x328b70=doc(collection(db,_0x9151e5));_0x2b1289['set'](_0x328b70,{'playerId':_0x39746e,'player':_0x194d72['loserUsername'],'previousElo':_0x5c0145,'newElo':_0xa27a9b,'eloChange':_0xa27a9b-_0x5c0145,'opponentId':_0x4c9ed4,'opponent':_0x194d72[_0x4a6bd3(0x29a)],'matchResult':_0x4a6bd3(0x8b),'previousPosition':_0x22b1b7,'newPosition':_0x4dd352,'positionChange':_0x4dd352-_0x22b1b7,'matchId':_0x3c284e,'timestamp':_0x3dec9b,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x1b7513,'matchScore':_0x194d72['winnerScore']+'-'+_0x194d72['loserScore'],'mapPlayed':_0x194d72[_0x4a6bd3(0x108)]||_0x194d72[_0x4a6bd3(0x251)]||_0x4a6bd3(0x244),'note':_0x4a6bd3(0x1dc)});}const _0x58ef12=_0x1b7513==='D1'?'approvedMatches':_0x1b7513==='D2'?_0x4a6bd3(0x1f1):'approvedMatchesD3',_0x2e6d0b=doc(db,_0x58ef12,_0x3c284e);_0x2b1289[_0x4a6bd3(0x1c6)](_0x2e6d0b,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x4a6bd3(0x24b)]['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x5be598['eloRating'],'originalLoserElo':_0x4b350f['eloRating'],'originalWinnerPosition':_0x596fe8,'originalLoserPosition':_0x22b1b7,'resimulatedWinnerElo':_0x3d9600,'resimulatedLoserElo':_0xa27a9b,'resimulatedWinnerPosition':_0x493939,'resimulatedLoserPosition':_0x4dd352}),await _0x2b1289[_0x4a6bd3(0x2b6)]();const _0x2a75d7=(!_0xc495a6?0x1:0x0)+(!_0x393698?0x1:0x0),_0x5c258f=_0x596fe8!==_0x493939||_0x22b1b7!==_0x4dd352;showNotification(_0x4a6bd3(0xec)+('Created\x20'+_0x2a75d7+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x37b478+''+_0x3d9600+'\x20(+'+(_0x3d9600-_0x37b478)+_0x4a6bd3(0xa1))+('Loser\x20'+_0x5c0145+''+_0xa27a9b+'\x20('+(_0xa27a9b-_0x5c0145)+').\x20')+(''+(_0x5c258f?_0x4a6bd3(0x14f)+_0x596fe8+''+_0x493939+',\x20Loser\x20'+_0x22b1b7+''+_0x4dd352:_0x4a6bd3(0x253))),'success'),closeResimulateModal(),document[_0x4a6bd3(0x163)]('#players.content-section.active')&&loadPlayersData();}catch(_0x152b06){console[_0x4a6bd3(0x240)](_0x4a6bd3(0x156),_0x152b06),showNotification(_0x4a6bd3(0xd7)+_0x152b06['message'],_0x4a6bd3(0x240));}}async function getPlayerEloAtTime(_0x2e3de1,_0x5f4f7c,_0x311821){const _0x3ed251=a4_0x425f91;try{const _0x517006=_0x5f4f7c['toDate']?_0x5f4f7c['toDate']():new Date(_0x5f4f7c),_0x44dff8=query(collection(db,_0x311821),where(_0x3ed251(0x2af),'==',_0x2e3de1),where('timestamp','<',_0x5f4f7c),orderBy('timestamp','desc'),limit(0x1)),_0x183dfc=await getDocs(_0x44dff8);if(!_0x183dfc['empty']){const _0x225d6b=_0x183dfc['docs'][0x0]['data']();return console['log'](_0x3ed251(0x1fa)+_0x2e3de1+_0x3ed251(0x1ee)+_0x225d6b['newElo']),_0x225d6b['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x2e3de1+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x2f24a9){return console[_0x3ed251(0x240)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x2e3de1+':',_0x2f24a9),0x4b0;}}function openResimulateModal(){const _0x494167=a4_0x425f91;console[_0x494167(0x1cf)]('openResimulateModal\x20called!');const _0x1d23c0=document['getElementById']('resimulate-modal');console['log'](_0x494167(0x252),_0x1d23c0);if(!_0x1d23c0){console['error']('Modal\x20element\x20not\x20found!');return;}_0x1d23c0['style']['display']='block',_0x1d23c0[_0x494167(0xf6)]['visibility']=_0x494167(0x110),_0x1d23c0['style'][_0x494167(0xe1)]='1',_0x1d23c0['classList']['add'](_0x494167(0x216)),console[_0x494167(0x1cf)]('Modal\x20should\x20now\x20be\x20visible'),console['log'](_0x494167(0x10f),window['getComputedStyle'](_0x1d23c0)['display']);const _0x18b5ef=document['getElementById']('match-details-container'),_0x469790=document['getElementById'](_0x494167(0x1c3)),_0x1d5c60=document['getElementById']('confirm-resimulate-btn'),_0x260686=document['getElementById']('resimulate-match-id');if(_0x18b5ef)_0x18b5ef[_0x494167(0xa7)]='';if(_0x469790)_0x469790['innerHTML']='';if(_0x1d5c60)_0x1d5c60[_0x494167(0xf6)]['display']='none';if(_0x260686)_0x260686[_0x494167(0xba)]='';console['log'](_0x494167(0xf1));}function closeResimulateModal(){const _0x52e380=a4_0x425f91;document['getElementById']('resimulate-modal')['style']['display']=_0x52e380(0x2b0),window['pendingResimulateData']=null;}window[a4_0x425f91(0x27e)]=resimulateMatch,window[a4_0x425f91(0x13a)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a4_0x425f91(0x187)]=closeResimulateModal;async function loadPointsData(){const _0x1ffc3e=a4_0x425f91;console['log']('Loading\x20points\x20data...');try{await Promise[_0x1ffc3e(0x1a0)]([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x5050d9){console['error']('Error\x20loading\x20points\x20data:',_0x5050d9),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x5050d9['message'],'error');}}function renderPointsOverview(_0x373917){const _0x2917ad=a4_0x425f91,_0x40684b=document['getElementById']('points-overview-table-body');if(!_0x40684b)return;if(_0x373917['length']===0x0){_0x40684b[_0x2917ad(0xa7)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x40684b[_0x2917ad(0xa7)]='',_0x373917['forEach'](_0x486127=>{const _0x120a9a=_0x2917ad,_0x4749b1=document[_0x120a9a(0x135)]('tr'),_0x43573f=_0x486127[_0x120a9a(0x277)]||_0x486127[_0x120a9a(0xc7)]||_0x120a9a(0x18d),_0x54669b=_0x486127[_0x120a9a(0xfe)]||'No\x20email',_0x33dad1=_0x486127['points']||0x0,_0x1f7f56=_0x486127[_0x120a9a(0x195)]?new Date(_0x486127[_0x120a9a(0x195)][_0x120a9a(0x29c)]*0x3e8)['toLocaleDateString']():'Never';_0x4749b1[_0x120a9a(0xa7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x43573f+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x54669b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x33dad1>0x3e8?_0x120a9a(0x140):_0x33dad1>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x33dad1[_0x120a9a(0x238)]()+_0x120a9a(0x28d)+_0x1f7f56+_0x120a9a(0x1d2)+_0x486127['id']+_0x120a9a(0x114)+_0x486127['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x40684b['appendChild'](_0x4749b1);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x9a313e=a4_0x425f91;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0xad76ab=document[_0x9a313e(0x2d1)](_0x9a313e(0x12d));console['log'](_0x9a313e(0x2c6)+_0xad76ab['length']+'\x20quick\x20edit\x20buttons'),_0xad76ab[_0x9a313e(0x116)](_0x38cefc=>{const _0x31b28c=_0x38cefc['cloneNode'](!![]);_0x38cefc['parentNode']['replaceChild'](_0x31b28c,_0x38cefc);});const _0x5d926b=document['querySelectorAll']('.view-history-btn');console[_0x9a313e(0x1cf)]('Found\x20'+_0x5d926b['length']+_0x9a313e(0x14e)),_0x5d926b['forEach'](_0x1921f6=>{const _0x4f2719=_0x1921f6['cloneNode'](!![]);_0x1921f6['parentNode']['replaceChild'](_0x4f2719,_0x1921f6);}),document[_0x9a313e(0x2d1)]('.quick-edit-btn')[_0x9a313e(0x116)](_0x5a651c=>{_0x5a651c['addEventListener']('click',function(_0x20739a){const _0x5e06fa=a4_0x3c92;_0x20739a[_0x5e06fa(0x27b)](),_0x20739a['stopPropagation']();const _0x160efe=this['dataset']['userId'];console[_0x5e06fa(0x1cf)]('Quick\x20edit\x20clicked\x20for\x20user:',_0x160efe);if(!_0x160efe){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x5e06fa(0xf6)][_0x5e06fa(0xe1)]='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x160efe);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x384e2f=>{const _0xd0ddac=_0x9a313e;_0x384e2f['addEventListener'](_0xd0ddac(0xf7),function(_0x4e6030){const _0x551e4a=_0xd0ddac;_0x4e6030[_0x551e4a(0x27b)](),_0x4e6030['stopPropagation']();const _0x23200e=this['dataset'][_0x551e4a(0x210)];console[_0x551e4a(0x1cf)](_0x551e4a(0x11a),_0x23200e);if(!_0x23200e){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x23200e);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x583933){const _0x1f5418=a4_0x425f91;console[_0x1f5418(0x1cf)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x583933);const _0x263068=document['getElementById']('quick-edit-points-modal');if(!_0x263068){console['error'](_0x1f5418(0x199)),showNotification(_0x1f5418(0x2ad),'error');return;}try{showNotification('Loading\x20user\x20data...',_0x1f5418(0x270));const _0x17a3a6=doc(db,_0x1f5418(0x1db),_0x583933),_0x5670db=await getDoc(_0x17a3a6);if(!_0x5670db[_0x1f5418(0x1ba)]()){showNotification('User\x20not\x20found',_0x1f5418(0x240));return;}const _0x381640=_0x5670db['data']();console[_0x1f5418(0x1cf)]('User\x20data\x20loaded:',_0x381640);const _0x55209c=document['getElementById']('quick-edit-user-id'),_0x1e5dcc=document['getElementById']('quick-edit-display-name'),_0x493da7=document['getElementById']('quick-edit-email'),_0x3474c7=document['getElementById'](_0x1f5418(0x259)),_0x44891c=document['getElementById'](_0x1f5418(0x20d));if(!_0x55209c||!_0x1e5dcc||!_0x493da7||!_0x3474c7||!_0x44891c){console['error'](_0x1f5418(0x283)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x55209c['value']=_0x583933,_0x1e5dcc[_0x1f5418(0x107)]=_0x381640['displayName']||_0x381640['username']||'Unknown\x20User',_0x493da7[_0x1f5418(0x107)]=_0x381640['email']||_0x1f5418(0xc4),_0x3474c7[_0x1f5418(0x107)]=(_0x381640[_0x1f5418(0x1e4)]||0x0)['toLocaleString'](),_0x44891c['reset']();const _0x30a208=document['getElementById']('quick-add');_0x30a208&&(_0x30a208['checked']=!![]);_0x263068['classList']['add'](_0x1f5418(0x216)),console[_0x1f5418(0x1cf)](_0x1f5418(0x1ce));const _0x4c85b9=document['getElementById']('quick-points-amount');_0x4c85b9&&setTimeout(()=>_0x4c85b9[_0x1f5418(0x237)](),0x64);}catch(_0x41ad0f){console['error'](_0x1f5418(0x276),_0x41ad0f),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x41ad0f['message'],'error');}}function closeQuickEditModal(){const _0x5e90ae=a4_0x425f91,_0x41d60d=document['getElementById']('quick-edit-points-modal');_0x41d60d&&_0x41d60d[_0x5e90ae(0x2d2)]['remove']('active');}async function handleQuickEditPoints(_0x193b24){const _0x3bdf54=a4_0x425f91;_0x193b24[_0x3bdf54(0x27b)]();const _0x451b19=document['getElementById']('quick-edit-user-id')['value'],_0x2b12ca=document['querySelector'](_0x3bdf54(0x118))['value'],_0x20f701=parseInt(document['getElementById']('quick-points-amount')['value']),_0x379bfe=document['getElementById'](_0x3bdf54(0x83))['value']['trim']();console['log'](_0x3bdf54(0x16d),{'userId':_0x451b19,'action':_0x2b12ca,'amount':_0x20f701,'reason':_0x379bfe});if(!_0x451b19||!_0x20f701||_0x20f701<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x451b19,_0x2b12ca,_0x20f701,_0x379bfe),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x3bdf54(0x23f),'success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x451b19);}catch(_0x11425e){console[_0x3bdf54(0x240)]('Error\x20updating\x20points:',_0x11425e),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x11425e[_0x3bdf54(0x282)],'error');}}async function searchUsersForPoints(){const _0x3632c9=a4_0x425f91,_0x2fa6ce=document['getElementById'](_0x3632c9(0x2b9))[_0x3632c9(0xba)]['trim']()[_0x3632c9(0x197)](),_0x34adff=document['getElementById']('user-search-results');if(!_0x2fa6ce||_0x2fa6ce['length']<0x2){_0x34adff['innerHTML']='';return;}_0x34adff['innerHTML']=_0x3632c9(0x255);try{const _0x121169=collection(db,'userProfiles'),_0x927120=await getDocs(_0x121169),_0x312f41=[];_0x927120['forEach'](_0x51cb45=>{const _0x2570bc=_0x3632c9,_0x4f91a5=_0x51cb45['data'](),_0x2c9f13=(_0x4f91a5[_0x2570bc(0x277)]||_0x4f91a5['username']||'')['toLowerCase'](),_0x293546=(_0x4f91a5['email']||'')['toLowerCase']();(_0x2c9f13['includes'](_0x2fa6ce)||_0x293546['includes'](_0x2fa6ce))&&_0x312f41[_0x2570bc(0x27a)]({'id':_0x51cb45['id'],..._0x4f91a5});});if(_0x312f41[_0x3632c9(0x21e)]===0x0){_0x34adff['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x34adff['innerHTML']='',_0x312f41['forEach'](_0x5916ab=>{const _0x2e0273=_0x3632c9,_0x571d85=document['createElement']('div');_0x571d85['className']=_0x2e0273(0xe3),_0x571d85[_0x2e0273(0xa7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x5916ab['displayName']||_0x5916ab[_0x2e0273(0xc7)]||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x5916ab[_0x2e0273(0xfe)]||_0x2e0273(0xc4))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x5916ab['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x571d85['addEventListener']('click',()=>selectUserForPoints(_0x5916ab)),_0x34adff['appendChild'](_0x571d85);});}catch(_0x12b9e2){console[_0x3632c9(0x240)](_0x3632c9(0x101),_0x12b9e2),_0x34adff['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x50a8c0){const _0x3bfaf2=a4_0x425f91;document['getElementById'](_0x3bfaf2(0x1e0))['textContent']=_0x50a8c0[_0x3bfaf2(0x277)]||_0x50a8c0['username']||'Unknown\x20User',document[_0x3bfaf2(0x15b)](_0x3bfaf2(0xa0))['textContent']=(_0x50a8c0['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x50a8c0['id'],document['getElementById']('selected-user-info')['style'][_0x3bfaf2(0x2ab)]=_0x3bfaf2(0x202),document['getElementById'](_0x3bfaf2(0x104))['style']['display']='block',document[_0x3bfaf2(0x15b)]('user-search-results')['innerHTML']='',document['getElementById'](_0x3bfaf2(0x2b9))['value']='';}async function handleModifyPoints(_0x46a442){const _0x5916dd=a4_0x425f91;_0x46a442['preventDefault']();const _0x5b35f7=document['getElementById'](_0x5916dd(0x2c9))['value'],_0x39662d=document['getElementById']('points-action')[_0x5916dd(0xba)],_0x1634fc=parseInt(document[_0x5916dd(0x15b)](_0x5916dd(0x185))['value']),_0x36d110=document['getElementById'](_0x5916dd(0xb4))[_0x5916dd(0xba)]['trim']();if(!_0x5b35f7||!_0x1634fc||_0x1634fc<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x5b35f7,_0x39662d,_0x1634fc,_0x36d110),document['getElementById']('modify-points-form')[_0x5916dd(0x2ac)]();const _0x5a4a90=doc(db,'userProfiles',_0x5b35f7),_0x102870=await getDoc(_0x5a4a90);if(_0x102870[_0x5916dd(0x1ba)]()){const _0x113111=_0x102870[_0x5916dd(0xca)]();document['getElementById']('selected-user-points')['textContent']=(_0x113111['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x228e6d){console['error'](_0x5916dd(0x2b3),_0x228e6d),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x228e6d['message'],'error');}}function a4_0x3e98(){const _0x1203fa=['adminEmail','Error\x20setting\x20up\x20admin\x20dashboard','quick-points-reason','players','Could\x20not\x20find\x20player\x20documents','manage-highlights','creatorImageUrl','Table\x20row\x20for\x20user\x20','name','articles','loss','approvedMatchesD3','.delete-match-btn','edit-highlight-creatorImageUrl-input','href','daysSinceMatch','Match\x20deleted\x20successfully','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','visibility','location','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>','highlight-submitted-by','#cancel-create-test-match-btn','Adding\x20simple\x20test\x20match...','Failed\x20to\x20award\x20item:\x20','current-ribbons-list','filter','matches-table-body','playersD2','No\x20match\x20data\x20found\x20for\x20resimulation','selected-user-points','),\x20','highlight-achievement-image-container','edit-match-loser','type','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','.close-notification','innerHTML','load-matches-data','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','replace','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','values','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','.error-state','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','Modal\x20close\x20button\x20clicked','borderRadius','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Failed\x20to\x20load\x20article\x20data','points-reason','max','add-new-role-btn','article-form','docs','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','value','cells','timestamp','manage-levels-ribbons','ribbon-target-ladder','updatedAt','roleColor','afterend','highlight-players-container','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','No\x20email','Successfully\x20demoted\x20','manage-articles','username','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','removeEventListener','data','assign-trophy-modal','amount',',\x20giving\x20default\x20access','toDate','includes','Error\x20checking\x20','keys','Testing\x20Firebase\x20connection...','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','Wednesday','DB:','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','Failed\x20to\x20resimulate\x20match:\x20','points-overview-table-body','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','Player\x20deleted\x20successfully','\x20history\x20entries\x20for\x20user\x20','highlight-map-creator-container','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20for\x20points\x20initialization','hidden','opacity','.sidebar-nav\x20.nav-item','search-result-item','playerRibbonsD2','Trophy\x20ID\x20and\x20username\x20are\x20required','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','create-test-match-form','match-count','flex','No\x20reason\x20provided','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','Match\x20resimulated\x20successfully!\x20','className','Admin\x20Adjustment','apply','appendChild','Modal\x20setup\x20complete','setAttribute','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','ribbon-user-search','__proto__','style','click','trophy-preview-img','roleAssignedBy','newElo','Error\x20loading\x20match\x20for\x20deletion:','reset-history-filters','backgroundColor','email','winnerScore','getDate','Error\x20searching\x20users:','RejectedD1','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','points-management-forms','Error\x20creating\x20rank\x20distribution\x20chart:','Edit\x20Article','textContent','mapPlayed','warn','.delete-article-btn','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20','manage-trophies','Error\x20demoting\x20player:','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','Modal\x20computed\x20styles:','visible','Silver','Title\x20and\x20content\x20are\x20required','Load\x20articles\x20data\x20clicked','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','highlight-description-container','forEach','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','input[name=\x22quick-action\x22]:checked','#50C878','View\x20history\x20clicked\x20for\x20user:','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>','remove','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','TestMap','points-desc','manage-points','highlight-player-profile','edit-match-winner-score','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','lastMatch','highlight-loser-name','Setting\x20permissions\x20based\x20on\x20role:\x20','promotion','destroy','Added\x20','pending-count','Lost','create-test-match-modal','.quick-edit-btn','Setting\x20up\x20create\x20test\x20match\x20button','Bronze','Please\x20enter\x20a\x20username','edit-highlight-description-input','matchId','edit-match-ladder','.assign-trophy-btn','createElement','Failed\x20to\x20find\x20match:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>','Error\x20loading\x20points\x20overview:','\x20by\x20UID:','confirmResimulateMatch','highlight-achievement-details-container','submit','resimulate-modal','loserScore','Setting\x20up\x20Manage\x20Matches\x20section','high-points','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','img','pointsHistory','videoId','create-test-match-btn','mapVersion','Achievement\x20highlight\x20button\x20clicked','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','Error\x20initializing\x20points\x20field:','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','achievementType','DOMContentLoaded','edit-highlight-achievementType-input','\x20view\x20history\x20buttons','Positions\x20updated:\x20Winner\x20','closest','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','fromDate','\x20Missing','title','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','Error\x20resimulating\x20match:','Error\x20loading\x20trophies:','set-elo-username','load-inactive-players-data','edit-match-map','getElementById','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','achievementPlayer','Error\x20removing\x20ribbon:','Error\x20creating\x20simple\x20test\x20match:','resimulation','edit-match-winner','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','querySelector','Deleting\x20match...','MAX_SAFE_INTEGER','add-player-form','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','Create\x20test\x20match\x20modal\x20not\x20found','Store\x20item\x20awarded\x20successfully','Player\x20not\x20found\x20in\x20','cancel-article-btn','highlight-map','Processing\x20points\x20edit:','Starting\x20complete\x20match\x20resimulation...','description','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','Error\x20setting\x20user\x20role:','Ribbons\x20data\x20loaded\x20successfully','color','match','losses','creator','data-section','paste','role-username','Using\x20collection:\x20','currentTarget','eloRating','replaceChild','loading','required','trophy-id','{}.constructor(\x22return\x20this\x22)(\x20)','highlight-modal-title','new-player-elo','promote-form','points-amount','edit-match-title','closeResimulateModal','history-type-filter','article-content','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','\x20to\x20','\x20-\x20','Unknown\x20User','submittedBy','Create\x20test\x20match\x20form\x20not\x20found','create-new-article-btn','highly-inactive','award-item-form','Error\x20initializing\x20dashboard:','Edit\x20Match:\x20','lastPointsModified','Profile','toLowerCase','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','winnerComment','user-role','Trophy\x20not\x20found','winnerName','Error\x20adding\x20ribbon:','Successfully\x20promoted\x20','all','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','success','highlight-video-preview-container','Error\x20loading\x20matches:','Found\x20specific\x20role:\x20','load-elo-history-data','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','desc','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','Error\x20finding\x20match:','loserUsername','Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','edit-highlight-title-input','Emerald','highlight-title','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','Adding\x20\x22active\x22\x20class\x20to\x20modal.','sort','ribbon-target-user','Invalid\x20action','user-roles-section','assign-trophy-description','Failed\x20to\x20load\x20player\x20data','rarity','exists','trophyDefinitions','ref','Error\x20loading\x20user\x20points\x20history:','join','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','div','allUsersPoints','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','validation-results-container','manage-players','author','update','change','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','assign-trophy-image','\x20in\x20','Load\x20highlights\x20data\x20clicked','set','Page\x201','Modal\x20opened\x20successfully','log','Won','edit-highlight-winnerScore-input','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','matchDate','confirm-resimulate-btn','toString','ribbon-type-select','\x22\x20awarded\x20to\x20','Searching\x20for\x20player\x20in\x20','then','Error\x20loading\x20articles:','userProfiles','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','Matches\x20Played','set-elo-btn','Please\x20enter\x20valid\x20username\x20and\x20ELO','selected-user-name','Dashboard\x20data\x20loaded\x20successfully','Load\x20inactive\x20players\x20data\x20clicked','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','points','startDate','create-new-trophy-btn','Role\x20\x27','load-articles-data','edit-username','Displaying\x20','Failed\x20to\x20delete\x20match:\x20','.form-group','\x20vs\x20','\x20before\x20match:\x20','Quick\x20edit\x20form\x20not\x20found!','approvedMatches','approvedMatchesD2','edit-player-modal','highlight-match-info','activity-chart','highlight-creator-image','manage-matches','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','elo-history-table-body','highlight-description','Found\x20ELO\x20history\x20for\x20player\x20','highlight-map-version-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','dataset','Gold','cancel-trophy-btn','Points\x20field\x20initialized\x20for\x20','.delete-btn','block','#C0C0C0','loserDemoLink','\x20from\x20','current-ribbon-user','delete-match-confirm-modal','Error\x20demoting\x20player:\x20','Unauthorized:\x20Admin\x20access\x20required','elo-history-search','result','trophy-preview-container','quick-edit-points-form','nonParticipants','Create\x20test\x20match\x20button\x20clicked','userId','Switched\x20to\x20','Creating\x20test\x20match\x20without\x20player\x20validation...','demote-username','Error\x20saving\x20highlight:\x20','image','active','highlight-match-info-container','role','promote-modal','\x20Exists','highlight-type','test-match-date','highlight-achievement-type','length','trophy-form','playerRibbons','rgba(211,\x2047,\x2047,\x200.7)','new-player-username','position','#808080','#28a745','Role\x20\x22','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','highlight-winner-name','<span\x20class=\x22no-role\x22>None</span>','elo','set-role-modal','inactive-players','assign-trophy-rarity','marginBottom','demote-player-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','highlight-video-container','user-search','article-author','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','sendPromotionNotification','winnerDemoLink','focus','toLocaleString','addEventListener','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','Error\x20saving\x20match:','page','input[name=\x22promote-ladder\x22]:checked','settings','Points\x20updated\x20successfully','error','edit-highlight-id','onerror','.edit-article-btn','Unknown','UserProfile','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','edit-losses','player-search','article-title','achievementDetails','currentUser','\x22\x20not\x20found\x20in\x20','has','.delete-trophy-btn','substring','catch','mapName','Modal\x20element\x20found:','No\x20position\x20changes\x20needed.','rankDistribution','<div\x20class=\x22loading\x22>Searching...</div>','contains','Error\x20promoting\x20player:','d1-next-page','quick-edit-current-points','stopPropagation','.loading-cell','Error\x20in\x20demotion:','Unranked','playersD3','highlight-map-version','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','roleAssignedAt','Unknown\x20Admin','console','disabled','#users-table-body\x20tr','.ladder-switch\x20input[value=\x22D1\x22]','.ladder-switch\x20input[value=\x22D2\x22]','highlights','.edit-ribbons-btn','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','Failed\x20to\x20load\x20user\x20history','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Friday','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','info','Setting\x20up\x20matches\x20action\x20buttons...','Error\x20deleting\x20highlight:\x20','createdAt','edit-highlight-map-input','Error\x20loading\x20players:','Error\x20opening\x20quick\x20edit\x20modal:','displayName','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','test','push','preventDefault','highlight-form','#ffffff','resimulateMatch','mapCreator','#FFD700','trim','message','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','highlight-id','common','approvedAt','Match\x20Result','dashboard','Set\x20default\x20ladder\x20to:','playerProfileUrl','admin','Matches\x20action\x20buttons\x20setup\x20complete','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','achievement-type','edit-highlight-loserScore-input','checked','assign-trophy-name','\x20with\x20ELO\x20','endDate','insertAdjacentElement','constructor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','lastVisible','\x20with\x20email\x20','achievement','winnerUsername','Error\x20saving\x20highlight:','seconds','target','Create\x20New\x20Trophy','Player\x20updated\x20successfully','roleName','uid','matches-page-indicator','setHours','firstVisible','player-count','N/A','empty','You\x20must\x20be\x20logged\x20in','./promotions.js','warning','display','reset','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','loserName','playerId','none','D2\x20Players','Setting\x20up\x20Manage\x20Ribbons\x20section','Error\x20modifying\x20points:','awardedAt','searchTerm','commit','promote-ladder','eloHistory','points-user-search','Setting\x20up\x20Manage\x20Highlights\x20section','promote-username','add','.delete-highlight-btn','Removed\x20','alt','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','Current\x20user:','toLocaleDateString','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','eloHistoryD2','no-results-message','Found\x20','highlight-map-creator','Error\x20awarding\x20item:','selected-user-id','\x20section','highlight-map-container','inactive-days-filter','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','demote-form','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','size','querySelectorAll','classList','\x20ladder','article-image-url','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','doughnut','Error\x20loading\x20points\x20history:','Please\x20fill\x20all\x20fields','trophy-description','Error\x20loading\x20inactive\x20players:'];a4_0x3e98=function(){return _0x1203fa;};return a4_0x3e98();}async function loadPointsHistory(){const _0x5dfc68=a4_0x425f91,_0x3c4d65=document['getElementById']('points-history-table-body');if(!_0x3c4d65)return;_0x3c4d65[_0x5dfc68(0xa7)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x169aa2=collection(db,'pointsHistory'),_0x3fb5db=query(_0x169aa2,orderBy(_0x5dfc68(0xbc),'desc'),limit(0x32)),_0x5b2226=await getDocs(_0x3fb5db);if(_0x5b2226[_0x5dfc68(0x2a7)]){_0x3c4d65[_0x5dfc68(0xa7)]=_0x5dfc68(0x2c0);return;}_0x3c4d65['innerHTML']='',_0x5b2226['forEach'](_0x52948b=>{const _0x74c933=_0x5dfc68,_0x2fe9c5=_0x52948b['data'](),_0x464dd2=document['createElement']('tr'),_0x1f60a4=_0x2fe9c5[_0x74c933(0xbc)]?new Date(_0x2fe9c5[_0x74c933(0xbc)]['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x2a14b1='';switch(_0x2fe9c5['action']){case'add':_0x2a14b1=_0x74c933(0x129)+_0x2fe9c5['amount']+'\x20points';break;case'subtract':_0x2a14b1='Subtracted\x20'+_0x2fe9c5[_0x74c933(0xcc)]+'\x20points';break;case'set':_0x2a14b1='Set\x20to\x20'+_0x2fe9c5['amount']+'\x20points';break;default:_0x2a14b1=_0x2fe9c5['action']+'\x20'+_0x2fe9c5['amount']+'\x20points';}_0x464dd2['innerHTML']=_0x74c933(0x162)+_0x1f60a4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2fe9c5['displayName']||_0x74c933(0x18d))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a14b1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x2fe9c5['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2fe9c5['previousPoints']||0x0)+'\x20\x20'+(_0x2fe9c5['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2fe9c5['reason']||_0x74c933(0xea))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2fe9c5[_0x74c933(0x81)]||_0x74c933(0x262))+_0x74c933(0xab),_0x3c4d65['appendChild'](_0x464dd2);});}catch(_0x2f9d74){console[_0x5dfc68(0x240)](_0x5dfc68(0x2d7),_0x2f9d74),_0x3c4d65['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x2f9d74[_0x5dfc68(0x282)]+'</td></tr>';}}function filterPointsOverview(){const _0x1f50be=a4_0x425f91,_0x308717=document['getElementById']('points-overview-search')['value'][_0x1f50be(0x197)]();if(!window[_0x1f50be(0x1c1)])return;const _0x5ac3cc=window['allUsersPoints'][_0x1f50be(0x9c)](_0x45c061=>{const _0x26b141=_0x1f50be,_0x5e0ffb=(_0x45c061[_0x26b141(0x277)]||_0x45c061['username']||'')['toLowerCase'](),_0x132d53=(_0x45c061['email']||'')[_0x26b141(0x197)]();return _0x5e0ffb['includes'](_0x308717)||_0x132d53['includes'](_0x308717);});renderPointsOverview(_0x5ac3cc);}function sortPointsOverview(){const _0xdbf5f9=a4_0x425f91,_0x45f419=document[_0xdbf5f9(0x15b)]('points-sort-order')['value'];if(!window[_0xdbf5f9(0x1c1)])return;const _0x5a5dd5=[...window['allUsersPoints']];switch(_0x45f419){case _0xdbf5f9(0x11f):_0x5a5dd5[_0xdbf5f9(0x1b3)]((_0xcf1d1b,_0x5b650d)=>(_0x5b650d['points']||0x0)-(_0xcf1d1b[_0xdbf5f9(0x1e4)]||0x0));break;case'points-asc':_0x5a5dd5['sort']((_0x5f02a8,_0x2f11fe)=>(_0x5f02a8['points']||0x0)-(_0x2f11fe['points']||0x0));break;case'name-asc':_0x5a5dd5[_0xdbf5f9(0x1b3)]((_0x48a35b,_0x584d32)=>{const _0x1c3ea9=_0xdbf5f9,_0x2b785b=(_0x48a35b['displayName']||_0x48a35b[_0x1c3ea9(0xc7)]||'')['toLowerCase'](),_0x31a385=(_0x584d32[_0x1c3ea9(0x277)]||_0x584d32['username']||'')['toLowerCase']();return _0x2b785b['localeCompare'](_0x31a385);});break;case'name-desc':_0x5a5dd5[_0xdbf5f9(0x1b3)]((_0x3588b2,_0x1d4dc6)=>{const _0x209ccb=_0xdbf5f9,_0x8d29d2=(_0x3588b2['displayName']||_0x3588b2['username']||'')[_0x209ccb(0x197)](),_0x21c6da=(_0x1d4dc6['displayName']||_0x1d4dc6['username']||'')['toLowerCase']();return _0x21c6da['localeCompare'](_0x8d29d2);});break;}renderPointsOverview(_0x5a5dd5);}async function handleAwardItem(_0x18c21a){const _0x447719=a4_0x425f91;_0x18c21a['preventDefault']();const _0x3569ca=document['getElementById'](_0x447719(0x2c9))['value'],_0x150e34=document[_0x447719(0x15b)]('store-item-select')['value'],_0x54d2a9=document['getElementById']('award-reason')['value']['trim']();if(!_0x3569ca||!_0x150e34){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x447719(0x240));return;}try{showNotification(_0x447719(0x169),'success'),document['getElementById'](_0x447719(0x192))['reset']();}catch(_0x42c476){console['error'](_0x447719(0x2c8),_0x42c476),showNotification(_0x447719(0x9a)+_0x42c476['message'],_0x447719(0x240));}}async function loadUserPointsHistory(_0xa798df){const _0x36dab8=a4_0x425f91;try{const _0x2a14d1=collection(db,'pointsHistory'),_0x44f28b=query(_0x2a14d1,where(_0x36dab8(0x210),'==',_0xa798df),orderBy(_0x36dab8(0xbc),'desc')),_0x158e63=await getDocs(_0x44f28b);console['log']('Found\x20'+_0x158e63['size']+_0x36dab8(0xdb)+_0xa798df),showNotification('User\x20has\x20'+_0x158e63[_0x36dab8(0x2d0)]+'\x20points\x20history\x20entries','info');}catch(_0x37061a){console['error'](_0x36dab8(0x1bd),_0x37061a),showNotification(_0x36dab8(0x26c),'error');}}async function initializeUserPointsField(){const _0x29239d=a4_0x425f91;try{console[_0x29239d(0x1cf)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x485b2a=collection(db,_0x29239d(0x1db)),_0x57792c=await getDocs(_0x485b2a);if(_0x57792c[_0x29239d(0x2a7)]){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x2c97e8=0x0,_0x4ae86d=0x0;const _0x2c094a=writeBatch(db);let _0x13aa17=0x0;return console[_0x29239d(0x1cf)](_0x29239d(0x2c6)+_0x57792c['size']+'\x20users\x20to\x20check...'),_0x57792c['forEach'](_0x3961eb=>{const _0x2ca82a=_0x29239d,_0x156342=_0x3961eb['data']();_0x156342['points']===undefined||_0x156342['points']===null?(_0x2c094a['update'](_0x3961eb['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x2c97e8++,_0x13aa17++,console['log']('Queued\x20'+(_0x156342['displayName']||_0x156342['username']||_0x156342['email']||'Unknown')+_0x2ca82a(0xdf))):(_0x4ae86d++,console['log']((_0x156342['displayName']||_0x156342['username']||_0x156342['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x156342['points'])),_0x13aa17>=0x1f4&&console['warn'](_0x2ca82a(0xb9));}),_0x2c97e8>0x0?(console[_0x29239d(0x1cf)]('Committing\x20batch\x20update\x20for\x20'+_0x2c97e8+'\x20users...'),await _0x2c094a['commit'](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x2c97e8+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x57792c['size']+_0x29239d(0x1c2)+_0x2c97e8+_0x29239d(0x93)+_0x4ae86d),showNotification(_0x29239d(0x200)+_0x2c97e8+'\x20users.\x20'+_0x4ae86d+'\x20users\x20already\x20had\x20points.','success'),window[_0x29239d(0x1c1)]&&loadPointsOverview(),{'totalUsers':_0x57792c[_0x29239d(0x2d0)],'usersUpdated':_0x2c97e8,'usersAlreadyHadPoints':_0x4ae86d};}catch(_0x28eaed){console['error'](_0x29239d(0x149),_0x28eaed),showNotification('Error\x20initializing\x20points:\x20'+_0x28eaed[_0x29239d(0x282)],'error');throw _0x28eaed;}}function addPointsMigrationButton(){const _0x127678=a4_0x425f91,_0x4f92a7=document['getElementById']('manage-points');if(!_0x4f92a7)return;if(document['getElementById']('migrate-points-btn'))return;const _0x322a2a=document[_0x127678(0x135)](_0x127678(0x1c0));_0x322a2a['className']='migration-section',_0x322a2a['style'][_0x127678(0x22e)]='20px',_0x322a2a['style']['padding']='15px',_0x322a2a[_0x127678(0xf6)]['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x322a2a['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x322a2a['style'][_0x127678(0xb1)]='5px',_0x322a2a[_0x127678(0xa7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x24b7ce=_0x4f92a7[_0x127678(0x163)]('.section-header');_0x24b7ce&&_0x24b7ce[_0x127678(0x294)](_0x127678(0xc1),_0x322a2a),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x38972d=_0x127678;if(confirm(_0x38972d(0x26f))){this[_0x38972d(0x264)]=!![],this['innerHTML']=_0x38972d(0x155);try{await initializeUserPointsField(),this['innerHTML']=_0x38972d(0x103),this['style'][_0x38972d(0xfd)]=_0x38972d(0x225),setTimeout(()=>{_0x322a2a['style']['display']='none';},0xbb8);}catch(_0x39efc5){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x312380=a4_0x425f91;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x2dbe77=document[_0x312380(0x15b)]('points-user-search');_0x2dbe77&&_0x2dbe77['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x2b2d5e=document['getElementById']('modify-points-form');_0x2b2d5e&&_0x2b2d5e['addEventListener']('submit',handleModifyPoints);const _0x39be04=document['getElementById'](_0x312380(0x192));_0x39be04&&_0x39be04['addEventListener']('submit',handleAwardItem);const _0x496932=document['getElementById']('points-overview-search');_0x496932&&_0x496932['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x16050a=document[_0x312380(0x15b)]('points-sort-order');_0x16050a&&_0x16050a['addEventListener'](_0x312380(0x1c7),sortPointsOverview);const _0x4fa1a8=document['getElementById']('refresh-points-overview');_0x4fa1a8&&_0x4fa1a8['addEventListener']('click',loadPointsOverview);const _0x4dcd3d=document['getElementById']('quick-edit-points-modal');if(_0x4dcd3d){console[_0x312380(0x1cf)]('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x194067=_0x4dcd3d[_0x312380(0x163)]('.close-btn');_0x194067?_0x194067[_0x312380(0x239)]('click',function(){const _0x28ba6a=_0x312380;console['log'](_0x28ba6a(0xb0)),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x4e4314=document[_0x312380(0x15b)]('cancel-quick-edit');_0x4e4314?_0x4e4314['addEventListener']('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x3bfcb7=document['getElementById']('quick-edit-points-form');_0x3bfcb7?_0x3bfcb7['addEventListener']('submit',function(_0x527c23){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x527c23);}):console['error'](_0x312380(0x1ef)),_0x4dcd3d['addEventListener']('click',function(_0x64d080){const _0x329b1d=_0x312380;_0x64d080[_0x329b1d(0x29d)]===_0x4dcd3d&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console[_0x312380(0x240)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x3ba69f=a4_0x425f91;console['log'](_0x3ba69f(0x2b2));const _0xd455c=document[_0x3ba69f(0x15b)](_0x3ba69f(0xf4));_0xd455c&&_0xd455c[_0x3ba69f(0x239)]('input',debounce(searchRibbonUser,0x12c));const _0x1aac8b=document['getElementById']('search-ribbon-user-btn');_0x1aac8b&&_0x1aac8b['addEventListener']('click',searchRibbonUser);const _0x4aecfd=document[_0x3ba69f(0x15b)]('add-ribbon-form');_0x4aecfd&&_0x4aecfd['addEventListener'](_0x3ba69f(0x13c),addRibbon),_0xd455c&&_0xd455c['addEventListener']('keypress',function(_0x44d333){_0x44d333['key']==='Enter'&&(_0x44d333['preventDefault'](),searchRibbonUser());}),console[_0x3ba69f(0x1cf)]('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x1a72f6,_0xa3d07a,_0x175239,_0x332c90=''){const _0x2e1a7f=a4_0x425f91,_0x19d3c1=doc(db,'userProfiles',_0x1a72f6),_0x1eb47e=await getDoc(_0x19d3c1);if(!_0x1eb47e['exists']())throw new Error('User\x20not\x20found');const _0x30162e=_0x1eb47e['data'](),_0x1fc9a9=_0x30162e[_0x2e1a7f(0x1e4)]!==undefined?_0x30162e[_0x2e1a7f(0x1e4)]:0x0;_0x30162e['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x30162e['displayName']||_0x30162e['email']||'Unknown')),await updateDoc(_0x19d3c1,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0xab88ce=_0x1fc9a9;switch(_0xa3d07a){case _0x2e1a7f(0x2bc):_0xab88ce=_0x1fc9a9+_0x175239;break;case'subtract':_0xab88ce=Math[_0x2e1a7f(0xb5)](0x0,_0x1fc9a9-_0x175239);break;case'set':_0xab88ce=_0x175239;break;default:throw new Error(_0x2e1a7f(0x1b5));}await updateDoc(_0x19d3c1,{'points':_0xab88ce,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x2e1a7f(0x143)),{'userId':_0x1a72f6,'userEmail':_0x30162e[_0x2e1a7f(0xfe)]||'unknown','displayName':_0x30162e[_0x2e1a7f(0x277)]||_0x30162e[_0x2e1a7f(0xc7)]||'Unknown\x20User','action':_0xa3d07a,'amount':_0x175239,'previousPoints':_0x1fc9a9,'newPoints':_0xab88ce,'reason':_0x332c90,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x57ed19=a4_0x425f91,_0x471b14=document['getElementById'](_0x57ed19(0xd8));if(!_0x471b14)return;_0x471b14['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x40b295=collection(db,_0x57ed19(0x1db)),_0x3d53c8=await getDocs(_0x40b295);if(_0x3d53c8['empty']){_0x471b14['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x4d29ec=[];let _0x53b122=0x0;_0x3d53c8['forEach'](_0x102bb2=>{const _0x2ba1ce=_0x57ed19,_0x359326=_0x102bb2['data'](),_0x55b737=_0x359326['points']!==undefined?_0x359326['points']:0x0;_0x359326['points']===undefined&&_0x53b122++,_0x4d29ec[_0x2ba1ce(0x27a)]({'id':_0x102bb2['id'],..._0x359326,'points':_0x55b737});}),_0x53b122>0x0&&(console[_0x57ed19(0x1cf)]('Found\x20'+_0x53b122+_0x57ed19(0x11d)),showNotification(_0x53b122+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x4d29ec['sort']((_0x441874,_0x59f21d)=>(_0x59f21d['points']||0x0)-(_0x441874['points']||0x0)),window['allUsersPoints']=_0x4d29ec,renderPointsOverview(_0x4d29ec);}catch(_0x356085){console['error'](_0x57ed19(0x138),_0x356085),_0x471b14['innerHTML']=_0x57ed19(0x2c3)+_0x356085[_0x57ed19(0x282)]+'</td></tr>';}}async function loadRibbonsData(){const _0x2645d2=a4_0x425f91,_0x24a367=document['getElementById']('ribbons-overview-table-body');if(!_0x24a367)return;_0x24a367['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x18d04d,_0x57c787,_0xc83040]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x2645d2(0xe4))),getDocs(collection(db,'playerRibbonsD3'))]);_0x24a367[_0x2645d2(0xa7)]='';const _0x48d6d8=(_0x362e48,_0x2c79ea)=>{_0x362e48['forEach'](_0x5d97cb=>{const _0xe88138=a4_0x3c92,_0xd2eea0=_0x5d97cb[_0xe88138(0xca)](),_0x5d84e2=_0xd2eea0['ribbons']||{},_0x2c794c=Object['keys'](_0x5d84e2)[_0xe88138(0x21e)],_0x115e30=document['createElement']('tr');_0x115e30['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xd2eea0['username']||_0xe88138(0x244))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x2c79ea['toLowerCase']()+'\x22>'+_0x2c79ea+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2c794c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xd2eea0['lastUpdated']?new Date(_0xd2eea0['lastUpdated'][_0xe88138(0x29c)]*0x3e8)[_0xe88138(0x2c2)]():_0xe88138(0x244))+_0xe88138(0x1c8)+_0xd2eea0['username']+'\x22\x20data-ladder=\x22'+_0x2c79ea+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x24a367['appendChild'](_0x115e30);});};_0x48d6d8(_0x18d04d,'D1'),_0x48d6d8(_0x57c787,'D2'),_0x48d6d8(_0xc83040,'D3'),document['querySelectorAll'](_0x2645d2(0x269))[_0x2645d2(0x116)](_0x56b53b=>{const _0x5d509f=_0x2645d2;_0x56b53b[_0x5d509f(0x239)]('click',function(){const _0x527ff8=this['dataset']['username'],_0x3a3081=this['dataset']['ladder'];editUserRibbons(_0x527ff8,_0x3a3081);});}),showNotification(_0x2645d2(0x172),'success');}catch(_0x498d4d){console[_0x2645d2(0x240)]('Error\x20loading\x20ribbons:',_0x498d4d),_0x24a367['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0xc2cee2=a4_0x425f91,_0x468ad1=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x468ad1){showNotification('Please\x20enter\x20a\x20username',_0xc2cee2(0x240));return;}try{const [_0x1f45c2,_0x13b114,_0xa51c4]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x468ad1)),getDoc(doc(db,'playerRibbonsD2',_0x468ad1)),getDoc(doc(db,'playerRibbonsD3',_0x468ad1))]);let _0x49569c=null,_0x5358f4=null;if(_0x1f45c2['exists']())_0x49569c='D1',_0x5358f4=_0x1f45c2['data']();else{if(_0x13b114['exists']())_0x49569c='D2',_0x5358f4=_0x13b114['data']();else _0xa51c4['exists']()&&(_0x49569c='D3',_0x5358f4=_0xa51c4['data']());}_0x49569c?(document['getElementById'](_0xc2cee2(0x206))['textContent']=_0x468ad1,document['getElementById']('ribbon-target-user')[_0xc2cee2(0xba)]=_0x468ad1,document[_0xc2cee2(0x15b)]('ribbon-target-ladder')['value']=_0x49569c,document[_0xc2cee2(0x15b)]('user-ribbon-management')['style'][_0xc2cee2(0x2ab)]='block',displayCurrentRibbons(_0x5358f4['ribbons']||{}),showNotification('Found\x20'+_0x468ad1+'\x20in\x20'+_0x49569c+'\x20ladder',_0xc2cee2(0x1a2))):showNotification('User\x20'+_0x468ad1+'\x20not\x20found\x20in\x20any\x20ladder',_0xc2cee2(0x240));}catch(_0x217b84){console[_0xc2cee2(0x240)]('Error\x20searching\x20user:',_0x217b84),showNotification('Error\x20searching\x20for\x20user',_0xc2cee2(0x240));}}function displayCurrentRibbons(_0x4a56d0){const _0x11bdeb=a4_0x425f91,_0x19e64f=document['getElementById'](_0x11bdeb(0x9b));if(!_0x19e64f)return;_0x19e64f['innerHTML']='';if(Object[_0x11bdeb(0xd1)](_0x4a56d0)['length']===0x0){_0x19e64f['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0x4a56d0)[_0x11bdeb(0x116)](([_0xf59e5b,_0x3637ed])=>{const _0x209f58=_0x11bdeb,_0x1dfe0a=document['createElement']('div');_0x1dfe0a['className']='ribbon-item',_0x1dfe0a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0xf59e5b+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x3637ed['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x3637ed['awardedAt']?new Date(_0x3637ed[_0x209f58(0x2b4)][_0x209f58(0x29c)]*0x3e8)[_0x209f58(0x2c2)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0xf59e5b+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x19e64f[_0x209f58(0xf0)](_0x1dfe0a);}),document['querySelectorAll']('.remove-ribbon-btn')[_0x11bdeb(0x116)](_0x250342=>{const _0x6643ef=_0x11bdeb;_0x250342[_0x6643ef(0x239)]('click',function(){const _0x3668b3=this['dataset']['ribbon'];removeRibbon(_0x3668b3);});});}async function addRibbon(_0x34f741){const _0x258622=a4_0x425f91;_0x34f741['preventDefault']();const _0x479e2a=document[_0x258622(0x15b)]('ribbon-target-user')[_0x258622(0xba)],_0x55cad8=document['getElementById']('ribbon-target-ladder')['value'],_0x3fe116=document[_0x258622(0x15b)](_0x258622(0x1d6))['value'],_0xe7328e=parseInt(document[_0x258622(0x15b)]('ribbon-level')['value']);if(!_0x479e2a||!_0x55cad8||!_0x3fe116||!_0xe7328e){showNotification(_0x258622(0x2d8),_0x258622(0x240));return;}try{const _0x3887d0=_0x258622(0x220)+(_0x55cad8==='D1'?'':_0x55cad8),_0x248e11=doc(db,_0x3887d0,_0x479e2a),_0x4749f4=await getDoc(_0x248e11),_0x46b50b=_0x4749f4['exists']()?_0x4749f4[_0x258622(0xca)]()['ribbons']||{}:{};_0x46b50b[_0x3fe116]={'level':_0xe7328e,'awardedAt':serverTimestamp()},await setDoc(_0x248e11,{'username':_0x479e2a,'ladder':_0x55cad8,'ribbons':_0x46b50b,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x3fe116+'\x20Level\x20'+_0xe7328e+'\x20to\x20'+_0x479e2a,'success'),displayCurrentRibbons(_0x46b50b),document['getElementById'](_0x258622(0x1d6))[_0x258622(0xba)]='',document[_0x258622(0x15b)]('ribbon-level')['value']='1';}catch(_0xa6ac1f){console['error'](_0x258622(0x19e),_0xa6ac1f),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x5106c3){const _0x1cc880=a4_0x425f91,_0x40f346=document[_0x1cc880(0x15b)](_0x1cc880(0x1b4))['value'],_0x122485=document['getElementById'](_0x1cc880(0xbe))['value'];if(!confirm('Remove\x20'+_0x5106c3+'\x20from\x20'+_0x40f346+'?'))return;try{const _0x48211a=_0x1cc880(0x220)+(_0x122485==='D1'?'':_0x122485),_0x479d2a=doc(db,_0x48211a,_0x40f346),_0x1a40cc=await getDoc(_0x479d2a),_0x188ab9=_0x1a40cc['exists']()?_0x1a40cc['data']()['ribbons']||{}:{};delete _0x188ab9[_0x5106c3],await setDoc(_0x479d2a,{'username':_0x40f346,'ladder':_0x122485,'ribbons':_0x188ab9,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x1cc880(0x2be)+_0x5106c3+_0x1cc880(0x205)+_0x40f346,'success'),displayCurrentRibbons(_0x188ab9);}catch(_0x1a48c1){console['error'](_0x1cc880(0x15e),_0x1a48c1),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x1e8d30,_0x16fa1f){const _0x17b73e=a4_0x425f91;document[_0x17b73e(0x15b)]('ribbon-user-search')[_0x17b73e(0xba)]=_0x1e8d30,searchRibbonUser();}