const a15_0x5e5fa3=a15_0x2d1f;(function(_0x335bdf,_0x13cb46){const _0x5e9d3=a15_0x2d1f,_0x16268c=_0x335bdf();while(!![]){try{const _0x39a8c6=parseInt(_0x5e9d3(0x1cc))/0x1*(parseInt(_0x5e9d3(0x1c8))/0x2)+-parseInt(_0x5e9d3(0x1ba))/0x3+parseInt(_0x5e9d3(0x1cd))/0x4*(-parseInt(_0x5e9d3(0x1d2))/0x5)+-parseInt(_0x5e9d3(0x1e8))/0x6*(parseInt(_0x5e9d3(0x1c6))/0x7)+-parseInt(_0x5e9d3(0x1dd))/0x8*(parseInt(_0x5e9d3(0x1e6))/0x9)+parseInt(_0x5e9d3(0x1ce))/0xa+parseInt(_0x5e9d3(0x1c2))/0xb*(parseInt(_0x5e9d3(0x1c4))/0xc);if(_0x39a8c6===_0x13cb46)break;else _0x16268c['push'](_0x16268c['shift']());}catch(_0xdbb6d2){_0x16268c['push'](_0x16268c['shift']());}}}(a15_0x38b3,0xe9263));const a15_0x1eeeaf=(function(){let _0x5f12be=!![];return function(_0x5ee69b,_0x586186){const _0x52d8cc=_0x5f12be?function(){const _0x42dcd9=a15_0x2d1f;if(_0x586186){const _0x504b4d=_0x586186[_0x42dcd9(0x1d9)](_0x5ee69b,arguments);return _0x586186=null,_0x504b4d;}}:function(){};return _0x5f12be=![],_0x52d8cc;};}()),a15_0x45da5d=a15_0x1eeeaf(this,function(){const _0x1c4805=a15_0x2d1f;return a15_0x45da5d[_0x1c4805(0x1e5)]()['search']('(((.+)+)+)+$')[_0x1c4805(0x1e5)]()['constructor'](a15_0x45da5d)[_0x1c4805(0x1b8)]('(((.+)+)+)+$');});a15_0x45da5d();const a15_0x5c5dba=(function(){let _0x2a4a21=!![];return function(_0x5a8ece,_0x33a0b1){const _0x3a5a34=_0x2a4a21?function(){const _0x212da5=a15_0x2d1f;if(_0x33a0b1){const _0x307767=_0x33a0b1[_0x212da5(0x1d9)](_0x5a8ece,arguments);return _0x33a0b1=null,_0x307767;}}:function(){};return _0x2a4a21=![],_0x3a5a34;};}()),a15_0x217360=a15_0x5c5dba(this,function(){const _0x230056=a15_0x2d1f,_0x4e6b38=function(){const _0x4eb7ea=a15_0x2d1f;let _0x1da09e;try{_0x1da09e=Function(_0x4eb7ea(0x1e3)+_0x4eb7ea(0x1bd)+');')();}catch(_0x4ed0e2){_0x1da09e=window;}return _0x1da09e;},_0x2084ab=_0x4e6b38(),_0x37a48c=_0x2084ab['console']=_0x2084ab[_0x230056(0x1d7)]||{},_0x58f9c6=[_0x230056(0x1b5),_0x230056(0x1e2),'info',_0x230056(0x1b7),_0x230056(0x1de),_0x230056(0x1be),_0x230056(0x1d0)];for(let _0x10186c=0x0;_0x10186c<_0x58f9c6[_0x230056(0x1cf)];_0x10186c++){const _0x74d015=a15_0x5c5dba[_0x230056(0x1da)][_0x230056(0x1e9)][_0x230056(0x1e1)](a15_0x5c5dba),_0x58500c=_0x58f9c6[_0x10186c],_0x3e2690=_0x37a48c[_0x58500c]||_0x74d015;_0x74d015[_0x230056(0x1dc)]=a15_0x5c5dba[_0x230056(0x1e1)](a15_0x5c5dba),_0x74d015[_0x230056(0x1e5)]=_0x3e2690[_0x230056(0x1e5)][_0x230056(0x1e1)](_0x3e2690),_0x37a48c[_0x58500c]=_0x74d015;}});a15_0x217360();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS_D3=[{'name':a15_0x5e5fa3(0x1bc),'elo':0x7d0},{'name':'Gold','elo':0x708},{'name':a15_0x5e5fa3(0x1cb),'elo':0x640},{'name':a15_0x5e5fa3(0x1e7),'elo':0x578},{'name':a15_0x5e5fa3(0x1b4),'elo':0x4b0}];function a15_0x2d1f(_0x80f782,_0x23057f){const _0x33af35=a15_0x38b3();return a15_0x2d1f=function(_0x217360,_0x5c5dba){_0x217360=_0x217360-0x1b2;let _0x55dc68=_0x33af35[_0x217360];return _0x55dc68;},a15_0x2d1f(_0x80f782,_0x23057f);}function a15_0x38b3(){const _0x4db81e=['loserId','match','docs','console','all','apply','constructor','Error\x20recording\x20D3\x20ELO\x20history:','__proto__','8144PnOmpe','exception','size','winnerId','bind','warn','return\x20(function()\x20','eloHistoryD3','toString','8361ileOXe','Bronze','138odaEpX','prototype','demotion','previousElo','empty','Unranked','log','data','error','search','Unknown\x20Player','2039646ycVySG','username','Emerald','{}.constructor(\x22return\x20this\x22)(\x20)','table','winnerUsername','approvedMatchesD3','newElo','20314558dSWDVu','Error\x20fetching\x20D3\x20ELO\x20history:','24HUcSkv','timestamp','214942FFzrul','desc','2199724reCZon','D3\x20ELO\x20history\x20recorded\x20for\x20','playersD3','Silver','1HmTWsF','6278548DpPhSH','630400ywMGsB','length','trace','map','5BnNifZ','promotion'];a15_0x38b3=function(){return _0x4db81e;};return a15_0x38b3();}let lastVisibleD3=null;async function getUsernameByIdD3(_0x59d81d){const _0x308a90=a15_0x5e5fa3;try{if(!_0x59d81d)return _0x308a90(0x1b9);const _0x43c48c=await getDoc(doc(db,_0x308a90(0x1ca),_0x59d81d));if(_0x43c48c['exists']())return _0x43c48c['data']()[_0x308a90(0x1bb)]||_0x308a90(0x1b9);const _0x5981c1=await getDocs(query(collection(db,_0x308a90(0x1c0)),where(_0x308a90(0x1e0),'==',_0x59d81d),limit(0x1)));if(!_0x5981c1[_0x308a90(0x1b3)])return _0x5981c1[_0x308a90(0x1d6)][0x0][_0x308a90(0x1b6)]()[_0x308a90(0x1bf)]||_0x308a90(0x1b9);const _0x1b27fc=await getDocs(query(collection(db,_0x308a90(0x1c0)),where(_0x308a90(0x1d4),'==',_0x59d81d),limit(0x1)));if(!_0x1b27fc[_0x308a90(0x1b3)])return _0x1b27fc[_0x308a90(0x1d6)][0x0][_0x308a90(0x1b6)]()['loserUsername']||_0x308a90(0x1b9);return _0x308a90(0x1b9);}catch(_0x378840){return console[_0x308a90(0x1b7)]('Error\x20getting\x20D3\x20username:',_0x378840),_0x308a90(0x1b9);}}export async function recordEloChangeD3({playerId:_0x4c8bf4,previousElo:_0x5c1c75,newElo:_0x11009a,opponentId:_0x591664,matchResult:_0x32c7a0,previousPosition:_0x34d498,newPosition:_0x5478a4,isPromotion:isPromotion=![],isDemotion:isDemotion=![],matchId:_0x2444f0,timestamp:_0x508722}){const _0x1c9745=a15_0x5e5fa3;try{const _0x53e9e3=doc(collection(db,_0x1c9745(0x1e4)));let _0x5a7b2b=_0x1c9745(0x1d5);if(isPromotion)_0x5a7b2b=_0x1c9745(0x1d3);if(isDemotion)_0x5a7b2b=_0x1c9745(0x1ea);let _0x2d3e7f=_0x1c9745(0x1b4);if(_0x11009a>=0x7d0)_0x2d3e7f='Emerald';else{if(_0x11009a>=0x708)_0x2d3e7f='Gold';else{if(_0x11009a>=0x640)_0x2d3e7f=_0x1c9745(0x1cb);else{if(_0x11009a>=0x578)_0x2d3e7f=_0x1c9745(0x1e7);}}}return await setDoc(_0x53e9e3,{'type':_0x5a7b2b,'player':_0x4c8bf4,'opponent':_0x591664,'previousElo':_0x5c1c75,'newElo':_0x11009a,'change':_0x11009a-_0x5c1c75,'matchResult':_0x32c7a0,'previousPosition':_0x34d498,'newPosition':_0x5478a4,'rankAchieved':_0x2d3e7f,'matchId':_0x2444f0,'timestamp':_0x508722||serverTimestamp(),'gameMode':'D3'}),console['log'](_0x1c9745(0x1c9)+_0x4c8bf4),!![];}catch(_0x5ee727){console[_0x1c9745(0x1b7)](_0x1c9745(0x1db),_0x5ee727);throw _0x5ee727;}}export async function getEloHistoryD3(_0x29fe9b=0x14){const _0x2fb0a5=a15_0x5e5fa3;try{const _0x2322ac=collection(db,_0x2fb0a5(0x1e4));let _0x557ef4;lastVisibleD3?_0x557ef4=query(_0x2322ac,orderBy(_0x2fb0a5(0x1c5),_0x2fb0a5(0x1c7)),startAfter(lastVisibleD3),limit(_0x29fe9b)):_0x557ef4=query(_0x2322ac,orderBy(_0x2fb0a5(0x1c5),_0x2fb0a5(0x1c7)),limit(_0x29fe9b));const _0x37ca2a=await getDocs(_0x557ef4);if(_0x37ca2a['empty'])return{'entries':[],'hasMore':![]};lastVisibleD3=_0x37ca2a[_0x2fb0a5(0x1d6)][_0x37ca2a[_0x2fb0a5(0x1d6)][_0x2fb0a5(0x1cf)]-0x1];const _0x336955=_0x37ca2a[_0x2fb0a5(0x1d6)][_0x2fb0a5(0x1d1)](async _0x2c95d0=>{const _0x593fbb=_0x2fb0a5,_0x33384c=_0x2c95d0['data'](),[_0x270ae0,_0x49215d]=await Promise[_0x593fbb(0x1d8)]([getUsernameByIdD3(_0x33384c['player']),getUsernameByIdD3(_0x33384c['opponent'])]);return{..._0x33384c,'playerUsername':_0x270ae0,'opponentUsername':_0x49215d,'change':_0x33384c[_0x593fbb(0x1c1)]-_0x33384c[_0x593fbb(0x1b2)],'timestamp':_0x33384c['timestamp']};}),_0x29b92a=await Promise[_0x2fb0a5(0x1d8)](_0x336955);return{'entries':_0x29b92a,'hasMore':_0x37ca2a[_0x2fb0a5(0x1df)]===_0x29fe9b};}catch(_0x12982e){console['error'](_0x2fb0a5(0x1c3),_0x12982e);throw _0x12982e;}}export function resetPaginationD3(){lastVisibleD3=null;}