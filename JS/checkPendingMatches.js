const a8_0x36b504=a8_0x3edd,a8_0x55784e=(function(){let _0x5b4c4e=!![];return function(_0x9f1d87,_0x10269e){const _0xa721f9=_0x5b4c4e?function(){const _0x1d155c=a8_0x3edd;if(_0x10269e){const _0x544552=_0x10269e[_0x1d155c(0x1a5)](_0x9f1d87,arguments);return _0x10269e=null,_0x544552;}}:function(){};return _0x5b4c4e=![],_0xa721f9;};}()),a8_0x5b81ec=a8_0x55784e(this,function(){const _0x3727e9=a8_0x3edd;let _0x205a80;try{const _0x486103=Function(_0x3727e9(0x1af)+_0x3727e9(0x19a)+');');_0x205a80=_0x486103();}catch(_0x5c8785){_0x205a80=window;}const _0x13c055=_0x205a80[_0x3727e9(0x1ce)]=_0x205a80[_0x3727e9(0x1ce)]||{},_0x488621=[_0x3727e9(0x1e5),_0x3727e9(0x1da),_0x3727e9(0x1d3),_0x3727e9(0x1cc),_0x3727e9(0x1db),_0x3727e9(0x1aa),_0x3727e9(0x1b0)];for(let _0x5f506a=0x0;_0x5f506a<_0x488621[_0x3727e9(0x1dc)];_0x5f506a++){const _0x2b8b35=a8_0x55784e[_0x3727e9(0x1a2)][_0x3727e9(0x1e2)][_0x3727e9(0x1d1)](a8_0x55784e),_0x47f1ce=_0x488621[_0x5f506a],_0x3decad=_0x13c055[_0x47f1ce]||_0x2b8b35;_0x2b8b35[_0x3727e9(0x1ba)]=a8_0x55784e[_0x3727e9(0x1d1)](a8_0x55784e),_0x2b8b35[_0x3727e9(0x1ac)]=_0x3decad[_0x3727e9(0x1ac)][_0x3727e9(0x1d1)](_0x3decad),_0x13c055[_0x47f1ce]=_0x2b8b35;}});a8_0x5b81ec();function a8_0x3edd(_0x1156e7,_0x512a6e){const _0x5b81ec=a8_0x3953();return a8_0x3edd=function(_0x55784e,_0x2166fc){_0x55784e=_0x55784e-0x198;let _0x3953fc=_0x5b81ec[_0x55784e];return _0x3953fc;},a8_0x3edd(_0x1156e7,_0x512a6e);}import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a8_0x36b504(0x198),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x3995e4=![]){const _0x53ff23=a8_0x36b504,_0x163cee=Date[_0x53ff23(0x1c8)](),_0x4943b4=checkNotificationCache();if(_0x4943b4!==null&&!_0x3995e4){updateNotificationDot(_0x4943b4);if(_0x163cee-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x163cee;const _0xae215f=auth[_0x53ff23(0x1b8)];if(!_0xae215f){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x53eb2c,_0x3bfa33,_0x2b7f38]=await Promise[_0x53ff23(0x1e1)]([checkForPendingMatchesInCollection(_0xae215f,_0x53ff23(0x1d0)),checkForPendingMatchesInCollection(_0xae215f,_0x53ff23(0x1c9)),checkForPendingMatchesInCollection(_0xae215f,_0x53ff23(0x1c2))]),_0x57e811=_0x53eb2c||_0x3bfa33||_0x2b7f38;updateNotificationDot(_0x57e811),updateNotificationCache(_0x57e811);}catch(_0x2481b7){console[_0x53ff23(0x1cc)](_0x53ff23(0x1cb),_0x2481b7);}}async function checkForPendingMatchesInCollection(_0x2eed3c,_0x13750b){const _0x21f0ba=a8_0x36b504,_0x4807f4=_0x2eed3c[_0x21f0ba(0x19f)],_0x8bdd19=_0x2eed3c[_0x21f0ba(0x19e)],_0x1e4ef3=query(collection(db,_0x13750b),where(_0x21f0ba(0x1bb),'==',_0x4807f4),where(_0x21f0ba(0x1ca),'==',![])),_0x1245ef=await getDocs(_0x1e4ef3);if(!_0x1245ef[_0x21f0ba(0x1c5)])return!![];if(_0x8bdd19){const _0x29936e=query(collection(db,_0x13750b),where(_0x21f0ba(0x1e4),'==',_0x8bdd19),where(_0x21f0ba(0x1ca),'==',![])),_0x5b871d=await getDocs(_0x29936e);if(!_0x5b871d[_0x21f0ba(0x1c5)])return!![];}let _0x3aa57a=await getUsernameFromAllSources(_0x2eed3c);if(_0x3aa57a){const _0x212bfe=query(collection(db,_0x13750b),where(_0x21f0ba(0x1c6),'==',_0x3aa57a),where(_0x21f0ba(0x1ca),'==',![])),_0x116de=await getDocs(_0x212bfe);if(!_0x116de[_0x21f0ba(0x1c5)])return!![];}return![];}function a8_0x3953(){const _0x4d3e19=['pendingMatchesCache','onAuthStateChanged','{}.constructor(\x22return\x20this\x22)(\x20)','-8px','getItem','body','email','uid','50%','players','constructor','exists','#ff3b30','apply','data','borderRadius','style','display','table','-5px','toString','userId','removeItem','return\x20(function()\x20','trace','position','playersD2','report-match-notification','2px\x20solid\x20white','absolute','backgroundColor','setItem','currentUser','10px','__proto__','winnerId','999','docs','getElementById','parse','split','zIndex','pendingMatchesD3','top','addEventListener','empty','winnerUsername','currentUsername','now','pendingMatchesD2','approved','Error\x20checking\x20pending\x20matches:','error','border','console','disconnect','pendingMatches','bind','width','info','DOMContentLoaded','playersD3','height','stringify','block','right','warn','exception','length','username','Error\x20fetching\x20username:','none','users','all','prototype','observe','winnerEmail','log'];a8_0x3953=function(){return _0x4d3e19;};return a8_0x3953();}async function getUsernameFromAllSources(_0x574c6a){const _0x1e8518=a8_0x36b504,_0x2a70fa=localStorage[_0x1e8518(0x19c)](_0x1e8518(0x1c7));if(_0x2a70fa)return _0x2a70fa;try{const [_0x19ebcc,_0x4ad545,_0x46a38f]=await Promise[_0x1e8518(0x1e1)]([getDocs(query(collection(db,_0x1e8518(0x1a1)),where(_0x1e8518(0x1ad),'==',_0x574c6a[_0x1e8518(0x19f)]))),getDocs(query(collection(db,_0x1e8518(0x1b2)),where(_0x1e8518(0x1ad),'==',_0x574c6a[_0x1e8518(0x19f)]))),getDocs(query(collection(db,_0x1e8518(0x1d5)),where(_0x1e8518(0x1ad),'==',_0x574c6a[_0x1e8518(0x19f)])))]);if(!_0x19ebcc[_0x1e8518(0x1c5)]){const _0x1587b8=_0x19ebcc[_0x1e8518(0x1bd)][0x0][_0x1e8518(0x1a6)]()[_0x1e8518(0x1dd)];return localStorage[_0x1e8518(0x1b7)](_0x1e8518(0x1c7),_0x1587b8),_0x1587b8;}if(!_0x4ad545[_0x1e8518(0x1c5)]){const _0x317c2a=_0x4ad545[_0x1e8518(0x1bd)][0x0][_0x1e8518(0x1a6)]()[_0x1e8518(0x1dd)];return localStorage[_0x1e8518(0x1b7)](_0x1e8518(0x1c7),_0x317c2a),_0x317c2a;}if(!_0x46a38f[_0x1e8518(0x1c5)]){const _0x397134=_0x46a38f[_0x1e8518(0x1bd)][0x0][_0x1e8518(0x1a6)]()[_0x1e8518(0x1dd)];return localStorage[_0x1e8518(0x1b7)](_0x1e8518(0x1c7),_0x397134),_0x397134;}const _0x18954c=await getDoc(doc(db,_0x1e8518(0x1e0),_0x574c6a[_0x1e8518(0x19f)]));if(_0x18954c[_0x1e8518(0x1a3)]()&&_0x18954c[_0x1e8518(0x1a6)]()[_0x1e8518(0x1dd)]){const _0x5a7679=_0x18954c[_0x1e8518(0x1a6)]()[_0x1e8518(0x1dd)];return localStorage[_0x1e8518(0x1b7)](_0x1e8518(0x1c7),_0x5a7679),_0x5a7679;}}catch(_0x141c4e){console[_0x1e8518(0x1cc)](_0x1e8518(0x1de),_0x141c4e);}if(_0x574c6a[_0x1e8518(0x19e)])return _0x574c6a[_0x1e8518(0x19e)][_0x1e8518(0x1c0)]('@')[0x0];return null;}function updateNotificationCache(_0x3257ac){const _0x1f2d45=a8_0x36b504,_0x1b8311={'status':_0x3257ac,'timestamp':Date[_0x1f2d45(0x1c8)]()};localStorage[_0x1f2d45(0x1b7)](NOTIFICATION_CACHE_KEY,JSON[_0x1f2d45(0x1d7)](_0x1b8311));}function checkNotificationCache(){const _0x15250e=a8_0x36b504,_0x438cd6=localStorage[_0x15250e(0x19c)](NOTIFICATION_CACHE_KEY);if(!_0x438cd6)return null;try{const {status:_0x440b57,timestamp:_0x5618d6}=JSON[_0x15250e(0x1bf)](_0x438cd6),_0x5e114a=Date[_0x15250e(0x1c8)]();if(_0x5e114a-_0x5618d6<CACHE_EXPIRY)return _0x440b57;}catch(_0x1b5850){}return null;}export function updateNotificationDot(_0x4723b7){const _0x800b31=a8_0x36b504,_0x48dc87=new MutationObserver((_0x546113,_0x5cc389)=>{const _0x9c1810=a8_0x3edd,_0x58420b=document[_0x9c1810(0x1be)](_0x9c1810(0x1b3));_0x58420b&&(updateDotStyle(_0x58420b,_0x4723b7),_0x5cc389[_0x9c1810(0x1cf)]());});_0x48dc87[_0x800b31(0x1e3)](document[_0x800b31(0x19d)],{'childList':!![],'subtree':!![]});const _0xe22c5c=document[_0x800b31(0x1be)](_0x800b31(0x1b3));_0xe22c5c&&(updateDotStyle(_0xe22c5c,_0x4723b7),_0x48dc87[_0x800b31(0x1cf)]()),setTimeout(()=>_0x48dc87[_0x800b31(0x1cf)](),0x1388);}function updateDotStyle(_0xa8cf85,_0x9b17f9){const _0x56a606=a8_0x36b504;_0x9b17f9?(_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1a9)]=_0x56a606(0x1d8),_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1b6)]=_0x56a606(0x1a4),_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1d2)]=_0x56a606(0x1b9),_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1d6)]=_0x56a606(0x1b9),_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1b1)]=_0x56a606(0x1b5),_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1c3)]=_0x56a606(0x1ab),_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1d9)]=_0x56a606(0x19b),_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1a7)]=_0x56a606(0x1a0),_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1cd)]=_0x56a606(0x1b4),_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1c1)]=_0x56a606(0x1bc)):_0xa8cf85[_0x56a606(0x1a8)][_0x56a606(0x1a9)]=_0x56a606(0x1df);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a8_0x36b504(0x1c4)](a8_0x36b504(0x1d4),()=>{const _0xfdcf77=a8_0x36b504;setTimeout(()=>checkPendingMatches(),0x1f4),auth[_0xfdcf77(0x199)](()=>{const _0x18f785=_0xfdcf77;localStorage[_0x18f785(0x1ae)](_0x18f785(0x1c7)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});