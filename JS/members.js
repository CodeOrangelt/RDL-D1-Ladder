const a35_0x26f82e=a35_0x9da6,a35_0x5ad798=(function(){let _0x516ed9=!![];return function(_0x569330,_0x2a1702){const _0xf5b1c4=_0x516ed9?function(){const _0x358b67=a35_0x9da6;if(_0x2a1702){const _0x462b42=_0x2a1702[_0x358b67(0x183)](_0x569330,arguments);return _0x2a1702=null,_0x462b42;}}:function(){};return _0x516ed9=![],_0xf5b1c4;};}()),a35_0x373c1d=a35_0x5ad798(this,function(){const _0x458b5c=a35_0x9da6,_0x56299f=function(){const _0x40ece4=a35_0x9da6;let _0x47cffb;try{_0x47cffb=Function(_0x40ece4(0x185)+_0x40ece4(0x1a0)+');')();}catch(_0x333420){_0x47cffb=window;}return _0x47cffb;},_0x359838=_0x56299f(),_0x1314ec=_0x359838[_0x458b5c(0x173)]=_0x359838[_0x458b5c(0x173)]||{},_0x1be2e0=[_0x458b5c(0x171),_0x458b5c(0x1a1),_0x458b5c(0x1a6),_0x458b5c(0x180),_0x458b5c(0x175),_0x458b5c(0x179),_0x458b5c(0x1b3)];for(let _0x2c8503=0x0;_0x2c8503<_0x1be2e0[_0x458b5c(0x18e)];_0x2c8503++){const _0x5e27db=a35_0x5ad798[_0x458b5c(0x193)][_0x458b5c(0x16b)][_0x458b5c(0x18a)](a35_0x5ad798),_0x3caed4=_0x1be2e0[_0x2c8503],_0x4a79ce=_0x1314ec[_0x3caed4]||_0x5e27db;_0x5e27db[_0x458b5c(0x1a3)]=a35_0x5ad798[_0x458b5c(0x18a)](a35_0x5ad798),_0x5e27db[_0x458b5c(0x19f)]=_0x4a79ce[_0x458b5c(0x19f)][_0x458b5c(0x18a)](_0x4a79ce),_0x1314ec[_0x3caed4]=_0x5e27db;}});a35_0x373c1d();const functions=require(a35_0x26f82e(0x17e)),admin=require(a35_0x26f82e(0x1a9));admin[a35_0x26f82e(0x17a)]();function a35_0xa7f5(){const _0xaaff4f=['collection','serverTimestamp','favoriteMap','motto','playersD3','prototype','userProfiles','userId','gold','send','push','log','ladder','console','doc','exception','ref','set','document','table','initializeApp','onRequest','batch','active','firebase-functions','favoriteWeapon','error','emerald','Error\x20rebuilding\x20members\x20list','apply','onWrite','return\x20(function()\x20','Unknown','Error\x20updating\x20members\x20list:','{collection}/{docId}','FieldValue','bind','username','profileImageUrl','bronze','length','ladders','params','playersD2','docId','constructor','all','isNonParticipant','status','updateMembersList','Successfully\x20updated\x20aggregated\x20members\x20list','delete','Members\x20list\x20rebuilt\x20successfully','get','commit','nonParticipants','rebuildMembersListManual','toString','{}.constructor(\x22return\x20this\x22)(\x20)','warn','aggregatedMembers','__proto__','elo','has','info','Error\x20rebuilding\x20members\x20list:','unranked','firebase-admin','country','eloRating','slice','firestore','https','silver','players','data','sort','trace','includes','forEach'];a35_0xa7f5=function(){return _0xaaff4f;};return a35_0xa7f5();}function a35_0x9da6(_0x3a686e,_0x34e50c){const _0x373c1d=a35_0xa7f5();return a35_0x9da6=function(_0x5ad798,_0x492bb2){_0x5ad798=_0x5ad798-0x166;let _0xa7f588=_0x373c1d[_0x5ad798];return _0xa7f588;},a35_0x9da6(_0x3a686e,_0x34e50c);}const db=admin[a35_0x26f82e(0x1ad)]();exports[a35_0x26f82e(0x197)]=functions[a35_0x26f82e(0x1ad)][a35_0x26f82e(0x178)](a35_0x26f82e(0x188))[a35_0x26f82e(0x184)](async(_0x32c892,_0x7fe5b3)=>{const _0x376768=a35_0x26f82e,_0x4bff8e=_0x7fe5b3[_0x376768(0x190)][_0x376768(0x166)],_0x5127f8=_0x7fe5b3[_0x376768(0x190)][_0x376768(0x192)];if(![_0x376768(0x1b0),_0x376768(0x191),_0x376768(0x16a),_0x376768(0x16c),_0x376768(0x19d)][_0x376768(0x1b4)](_0x4bff8e))return null;try{await rebuildMembersList(),console[_0x376768(0x171)](_0x376768(0x198));}catch(_0x6cd00){console[_0x376768(0x180)](_0x376768(0x187),_0x6cd00);}});async function rebuildMembersList(){const _0x35d8b6=a35_0x26f82e,_0x3d12e9=db[_0x35d8b6(0x17c)](),[_0x42294e,_0xafd482,_0x47761c,_0x3bff6a,_0x32aead]=await Promise[_0x35d8b6(0x194)]([db[_0x35d8b6(0x166)](_0x35d8b6(0x16c))[_0x35d8b6(0x19b)](),db[_0x35d8b6(0x166)](_0x35d8b6(0x1b0))[_0x35d8b6(0x19b)](),db[_0x35d8b6(0x166)](_0x35d8b6(0x191))[_0x35d8b6(0x19b)](),db[_0x35d8b6(0x166)](_0x35d8b6(0x16a))[_0x35d8b6(0x19b)](),db[_0x35d8b6(0x166)](_0x35d8b6(0x19d))[_0x35d8b6(0x19b)]()]),_0x4e6070=new Map();_0x42294e[_0x35d8b6(0x1b5)](_0x216667=>{const _0x394cac=_0x35d8b6;_0x4e6070[_0x394cac(0x177)](_0x216667['id'],_0x216667[_0x394cac(0x1b1)]());});const _0x50a522=new Map(),_0x14690c=(_0x1ca407,_0x4544a0)=>{const _0x3744f0=_0x35d8b6;_0x1ca407[_0x3744f0(0x1b5)](_0x4fe34=>{const _0x56d33c=_0x3744f0,_0x4418cc=_0x4fe34[_0x56d33c(0x1b1)](),_0x552958=_0x4fe34['id'];!_0x50a522[_0x56d33c(0x1a5)](_0x552958)&&_0x50a522[_0x56d33c(0x177)](_0x552958,{'userId':_0x552958,'username':_0x4418cc[_0x56d33c(0x18b)]||_0x56d33c(0x186),'ladders':[],'isNonParticipant':![]});const _0x265b64=_0x50a522[_0x56d33c(0x19b)](_0x552958);_0x265b64[_0x56d33c(0x18f)][_0x56d33c(0x170)]({'ladder':_0x4544a0,'elo':_0x4418cc[_0x56d33c(0x1ab)]||0xc8,'active':_0x4418cc[_0x56d33c(0x17d)]!==![]});});};_0x14690c(_0xafd482,'D1'),_0x14690c(_0x47761c,'D2'),_0x14690c(_0x3bff6a,'D3'),_0x32aead[_0x35d8b6(0x1b5)](_0x4636bb=>{const _0x4acccb=_0x35d8b6,_0x1b7898=_0x4636bb[_0x4acccb(0x1b1)](),_0x373f82=_0x4636bb['id'];!_0x50a522[_0x4acccb(0x1a5)](_0x373f82)&&_0x1b7898[_0x4acccb(0x18b)]&&_0x50a522[_0x4acccb(0x177)](_0x373f82,{'userId':_0x373f82,'username':_0x1b7898[_0x4acccb(0x18b)],'ladders':[],'isNonParticipant':!![]});});const _0x3cd30d=[];_0x50a522[_0x35d8b6(0x1b5)]((_0x36313e,_0x521f6e)=>{const _0x18ee0a=_0x35d8b6,_0x50cffe=_0x4e6070[_0x18ee0a(0x19b)](_0x521f6e)||{};let _0x1b889c=0x0,_0xef8b0e=null;if(_0x36313e[_0x18ee0a(0x18f)][_0x18ee0a(0x18e)]>0x0){const _0x2cd075=_0x36313e[_0x18ee0a(0x18f)][_0x18ee0a(0x1b2)]((_0x4f1f15,_0x4d65c0)=>_0x4d65c0[_0x18ee0a(0x1a4)]-_0x4f1f15[_0x18ee0a(0x1a4)]);_0x1b889c=_0x2cd075[0x0][_0x18ee0a(0x1a4)],_0xef8b0e=_0x2cd075[0x0][_0x18ee0a(0x172)];}const _0x34706f={'userId':_0x521f6e,'username':_0x36313e[_0x18ee0a(0x18b)],'profileImageUrl':_0x50cffe[_0x18ee0a(0x18c)]||null,'country':_0x50cffe[_0x18ee0a(0x1aa)]||null,'motto':_0x50cffe[_0x18ee0a(0x169)]||null,'favoriteMap':_0x50cffe[_0x18ee0a(0x168)]||null,'favoriteWeapon':_0x50cffe[_0x18ee0a(0x17f)]||null,'isNonParticipant':_0x36313e[_0x18ee0a(0x195)],'ladders':_0x36313e[_0x18ee0a(0x18f)],'primaryLadder':_0xef8b0e,'highestElo':_0x1b889c,'rank':getPlayerRank(_0x1b889c),'lastUpdated':admin[_0x18ee0a(0x1ad)][_0x18ee0a(0x189)][_0x18ee0a(0x167)]()};_0x3cd30d[_0x18ee0a(0x170)](_0x34706f);});const _0x3110f6=db[_0x35d8b6(0x166)](_0x35d8b6(0x1a2)),_0x176f2d=await _0x3110f6[_0x35d8b6(0x19b)](),_0x3f527c=[];_0x176f2d[_0x35d8b6(0x1b5)](_0x5eba99=>{const _0x2d91fd=_0x35d8b6;_0x3f527c[_0x2d91fd(0x170)](_0x5eba99[_0x2d91fd(0x176)][_0x2d91fd(0x199)]());}),await Promise[_0x35d8b6(0x194)](_0x3f527c);const _0x3c5f4d=0x1f4,_0x3536a8=[];for(let _0x20d014=0x0;_0x20d014<_0x3cd30d[_0x35d8b6(0x18e)];_0x20d014+=_0x3c5f4d){const _0x2ae9d7=db[_0x35d8b6(0x17c)](),_0x45e86d=_0x3cd30d[_0x35d8b6(0x1ac)](_0x20d014,_0x20d014+_0x3c5f4d);_0x45e86d[_0x35d8b6(0x1b5)](_0x523cc0=>{const _0x4e47a9=_0x35d8b6,_0x161ee1=_0x3110f6[_0x4e47a9(0x174)](_0x523cc0[_0x4e47a9(0x16d)]);_0x2ae9d7[_0x4e47a9(0x177)](_0x161ee1,_0x523cc0);}),_0x3536a8[_0x35d8b6(0x170)](_0x2ae9d7[_0x35d8b6(0x19c)]());}await Promise[_0x35d8b6(0x194)](_0x3536a8);}function getPlayerRank(_0x45c08c){const _0x31abf0=a35_0x26f82e;if(_0x45c08c>=0x3e8)return _0x31abf0(0x181);if(_0x45c08c>=0x2bc)return _0x31abf0(0x16e);if(_0x45c08c>=0x1f4)return _0x31abf0(0x1af);if(_0x45c08c>=0xc8)return _0x31abf0(0x18d);return _0x31abf0(0x1a8);}exports[a35_0x26f82e(0x19e)]=functions[a35_0x26f82e(0x1ae)][a35_0x26f82e(0x17b)](async(_0x282eb3,_0xc2685b)=>{const _0x157746=a35_0x26f82e;try{await rebuildMembersList(),_0xc2685b[_0x157746(0x196)](0xc8)[_0x157746(0x16f)](_0x157746(0x19a));}catch(_0xc17926){console[_0x157746(0x180)](_0x157746(0x1a7),_0xc17926),_0xc2685b[_0x157746(0x196)](0x1f4)[_0x157746(0x16f)](_0x157746(0x182));}});