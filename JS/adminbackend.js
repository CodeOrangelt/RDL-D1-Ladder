const a4_0x5c849d=a4_0x4f5e,a4_0x43f756=(function(){let _0x570af8=!![];return function(_0x4b7b3c,_0x30987c){const _0x182275=_0x570af8?function(){const _0x30f946=a4_0x4f5e;if(_0x30987c){const _0x55d535=_0x30987c[_0x30f946(0x2de)](_0x4b7b3c,arguments);return _0x30987c=null,_0x55d535;}}:function(){};return _0x570af8=![],_0x182275;};}()),a4_0x2e5188=a4_0x43f756(this,function(){const _0x11dfb6=a4_0x4f5e;let _0x18715b;try{const _0x598032=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x18715b=_0x598032();}catch(_0x9b9d42){_0x18715b=window;}const _0x26f5ab=_0x18715b['console']=_0x18715b['console']||{},_0x3e3068=['log','warn','info','error',_0x11dfb6(0x279),'table','trace'];for(let _0xe96146=0x0;_0xe96146<_0x3e3068['length'];_0xe96146++){const _0x39b3c2=a4_0x43f756[_0x11dfb6(0x186)]['prototype']['bind'](a4_0x43f756),_0x21ae2f=_0x3e3068[_0xe96146],_0x30b70d=_0x26f5ab[_0x21ae2f]||_0x39b3c2;_0x39b3c2['__proto__']=a4_0x43f756['bind'](a4_0x43f756),_0x39b3c2[_0x11dfb6(0x22b)]=_0x30b70d[_0x11dfb6(0x22b)]['bind'](_0x30b70d),_0x26f5ab[_0x21ae2f]=_0x39b3c2;}});a4_0x2e5188();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x19ec3c){const _0x23faec=a4_0x4f5e;if(!_0x19ec3c)return'#ffffff';_0x19ec3c=_0x19ec3c['replace']('#','');_0x19ec3c['length']===0x3&&(_0x19ec3c=_0x19ec3c[_0x23faec(0x1af)]('')['map'](_0x3b4b01=>_0x3b4b01+_0x3b4b01)['join'](''));if(_0x19ec3c['length']!==0x6)return'#ffffff';const _0x3e8ee7=parseInt(_0x19ec3c['substring'](0x0,0x2),0x10),_0xce4c17=parseInt(_0x19ec3c['substring'](0x2,0x4),0x10),_0x5f05b7=parseInt(_0x19ec3c['substring'](0x4,0x6),0x10),_0x336d44=(_0x3e8ee7*0x12b+_0xce4c17*0x24b+_0x5f05b7*0x72)/0x3e8;return _0x336d44>=0x80?_0x23faec(0x223):'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};function a4_0x4f5e(_0x350f03,_0x1d4e62){const _0x2e5188=a4_0x5a01();return a4_0x4f5e=function(_0x43f756,_0x180793){_0x43f756=_0x43f756-0x91;let _0x5a01b9=_0x2e5188[_0x43f756];return _0x5a01b9;},a4_0x4f5e(_0x350f03,_0x1d4e62);}let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{const _0xf15587=a4_0x4f5e;auth[_0xf15587(0x19e)](async _0x12e2de=>{const _0x4cd6aa=_0xf15587;if(!_0x12e2de){window[_0x4cd6aa(0x234)]['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x19bca4){console[_0x4cd6aa(0x135)](_0x4cd6aa(0x1c7),_0x19bca4),showNotification(_0x4cd6aa(0x153),'error');}});});async function getUserTabPermissions(_0x5bb41f){const _0x47ac05=a4_0x4f5e;if(!_0x5bb41f)return[_0x47ac05(0x10c)];console[_0x47ac05(0xdf)](_0x47ac05(0x209)+_0x5bb41f+_0x47ac05(0x10f));const _0x2c717c=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':_0x47ac05(0x28e)},{'name':_0x47ac05(0x22c),'displayName':'Non-Participants'}],_0x3a8699=auth[_0x47ac05(0xce)];let _0xafddae=null,_0x54b064=null;for(const _0x2f5ecc of _0x2c717c){try{if(_0x3a8699){const _0x46a034=doc(db,_0x2f5ecc['name'],_0x3a8699[_0x47ac05(0x18f)]),_0x5ccbb2=await getDoc(_0x46a034);if(_0x5ccbb2['exists']()){const _0x53204d=_0x5ccbb2[_0x47ac05(0x2d7)]();console['log'](_0x47ac05(0x2ac)+_0x2f5ecc['displayName']+_0x47ac05(0x27b),_0x53204d);const _0x5c3d36=(_0x53204d['roleName']||_0x53204d['role']||'')['toLowerCase']();if(_0x5c3d36&&_0x5c3d36!==_0x47ac05(0xda)){_0xafddae=_0x5c3d36,_0x54b064=_0x2f5ecc['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0xafddae+_0x47ac05(0x202)+_0x54b064);break;}}}if(!_0xafddae){const _0x5b865b=collection(db,_0x2f5ecc['name']),_0x331c11=query(_0x5b865b,where(_0x47ac05(0x12b),'==',_0x5bb41f)),_0x384827=await getDocs(_0x331c11);if(!_0x384827['empty']){const _0x3ef14b=_0x384827['docs'][0x0][_0x47ac05(0x2d7)]();console['log']('Found\x20user\x20in\x20'+_0x2f5ecc[_0x47ac05(0x197)]+_0x47ac05(0xf1)+_0x5bb41f+':',_0x3ef14b);const _0x26b26c=(_0x3ef14b['roleName']||_0x3ef14b[_0x47ac05(0x169)]||'')['toLowerCase']();if(_0x26b26c&&_0x26b26c!==_0x47ac05(0xda)){_0xafddae=_0x26b26c,_0x54b064=_0x2f5ecc[_0x47ac05(0x197)],console['log'](_0x47ac05(0xba)+_0xafddae+_0x47ac05(0x202)+_0x54b064);break;}}}}catch(_0x40449f){console['error'](_0x47ac05(0xbf)+_0x2f5ecc[_0x47ac05(0x197)]+':',_0x40449f);}}if(_0xafddae){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0xafddae+'\x20(from\x20'+_0x54b064+')');const _0x14714c={'admin':['dashboard',_0x47ac05(0xb8),'manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history',_0x47ac05(0x12e),'user-roles-section','manage-matches','manage-points','manage-levels-ribbons',_0x47ac05(0x264)],'owner':['dashboard',_0x47ac05(0xb8),'manage-matches',_0x47ac05(0x1e9),'manage-trophies','manage-ranks','inactive-players',_0x47ac05(0x26f),_0x47ac05(0x9b),'elo-history','manage-highlights','user-roles-section',_0x47ac05(0x14d),'manage-points','manage-levels-ribbons','manage-ribbons'],'council':[_0x47ac05(0x10c),'manage-players',_0x47ac05(0x14d)],'creative\x20lead':[_0x47ac05(0x10c),'manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x14714c[_0xafddae])return console['log']('Role\x20\x27'+_0xafddae+'\x27\x20has\x20permissions:',_0x14714c[_0xafddae]),_0x14714c[_0xafddae];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x5bb41f+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x2216b1=[]){const _0x1e602d=a4_0x4f5e,_0x448bd2=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x1ce3bc=document['querySelectorAll'](_0x1e602d(0x1d6));(!_0x2216b1||_0x2216b1['length']===0x0)&&(_0x2216b1=['dashboard']);_0x448bd2['forEach'](_0x32b71d=>{const _0x36f3bc=_0x1e602d,_0x3a0ad8=_0x32b71d['getAttribute']('data-section');_0x2216b1['includes'](_0x3a0ad8)?_0x32b71d['style']['display']='flex':_0x32b71d[_0x36f3bc(0x2d9)]['display']=_0x36f3bc(0xda),_0x32b71d[_0x36f3bc(0x21f)](_0x36f3bc(0x1bc),()=>{const _0x49f691=_0x36f3bc,_0x4960ee=_0x32b71d['getAttribute']('data-section');if(!_0x2216b1['includes'](_0x4960ee)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x448bd2[_0x49f691(0x1a9)](_0x417c20=>_0x417c20[_0x49f691(0x258)][_0x49f691(0x2cb)](_0x49f691(0x103))),_0x32b71d[_0x49f691(0x258)]['add']('active'),_0x1ce3bc['forEach'](_0x562234=>{_0x562234['style']['display']='none';});const _0x552504=document['getElementById'](_0x4960ee);_0x552504&&(_0x552504[_0x49f691(0x2d9)]['display']='block',console['log'](_0x49f691(0x2e8)+_0x4960ee+_0x49f691(0x124)));});});const _0x584c78=document['querySelector'](_0x1e602d(0x268)+_0x2216b1[0x0]+'\x22]');_0x584c78&&_0x584c78['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x1e0aea=a4_0x4f5e,_0x70810c=document[_0x1e0aea(0x9e)](_0x1e0aea(0xef));let _0x715d0a=null,_0x382c3e=new Set();_0x70810c['forEach'](_0x5e68e5=>{const _0xe68d93=_0x1e0aea;_0x5e68e5[_0xe68d93(0x21f)]('click',function(){const _0x2ecaa0=_0xe68d93,_0x547e13=this['getAttribute']('data-section');if(_0x547e13===_0x715d0a)return;_0x715d0a&&(document['getElementById'](_0x715d0a)[_0x2ecaa0(0x2d9)]['display']='none',_0x70810c['forEach'](_0x23b669=>_0x23b669['classList']['remove']('active'))),document['getElementById'](_0x547e13)['style']['display']='block',this['classList']['add']('active'),_0x715d0a=_0x547e13;});});}function loadSectionData(_0x357996){return;}async function initializeAdminDashboard(){const _0x4b718c=a4_0x4f5e;try{const _0x4312e1=auth['currentUser'],_0x3ab58d=await getUserTabPermissions(_0x4312e1['email']);console[_0x4b718c(0xdf)]('User\x20'+_0x4312e1[_0x4b718c(0x12b)]+'\x20allowed\x20tabs:',_0x3ab58d),window['userAllowedTabs']=_0x3ab58d,setupSidebarNavigation(_0x3ab58d),setupLadderSelector(),setupDashboardSection(),_0x3ab58d['includes']('manage-players')&&setupManagePlayersSection(),_0x3ab58d['includes']('elo-history')&&setupEloHistorySection(),_0x3ab58d[_0x4b718c(0xb4)](_0x4b718c(0x2c3))&&setupRankControls(),_0x3ab58d['includes']('manage-articles')&&setupManageArticlesSection(),_0x3ab58d[_0x4b718c(0xb4)]('user-roles-section')&&setupUserRolesSection(),_0x3ab58d[_0x4b718c(0xb4)]('manage-trophies')&&setupTrophyManagementSection(),_0x3ab58d['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x3ab58d['includes']('inactive-players')&&setupInactivePlayersSection(),_0x3ab58d['includes'](_0x4b718c(0x14d))&&setupManageMatchesSection(),_0x3ab58d[_0x4b718c(0xb4)]('manage-points')&&setupManagePointsSection(),_0x3ab58d['includes'](_0x4b718c(0x264))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x3ab58d);}catch(_0x3c0198){console[_0x4b718c(0x135)](_0x4b718c(0x274),_0x3c0198);}}function setupDataLoadButtons(_0x4fe1a5=[]){const _0x1962ed=a4_0x4f5e;(!_0x4fe1a5||_0x4fe1a5['length']===0x0)&&(_0x4fe1a5=['dashboard']);const _0x59a479=document['getElementById']('load-dashboard-data');_0x59a479&&_0x59a479[_0x1962ed(0x21f)]('click',function(){const _0x4b68a2=_0x1962ed;this['classList']['add'](_0x4b68a2(0x231)),this['innerHTML']=_0x4b68a2(0x119),loadDashboardOverview()['then'](()=>{const _0x1cd318=_0x4b68a2;this[_0x1cd318(0x258)][_0x1cd318(0x2cb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x28185e=>{const _0x49e430=_0x4b68a2;console['error']('Error\x20loading\x20dashboard:',_0x28185e),this[_0x49e430(0x258)]['remove'](_0x49e430(0x231)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x4fe1a5[_0x1962ed(0xb4)]('manage-trophies')){const _0x7e21a5=document['getElementById']('load-trophies-data');_0x7e21a5&&_0x7e21a5['addEventListener']('click',function(){const _0x3b19d5=_0x1962ed;console['log']('Load\x20trophies\x20data\x20clicked'),this[_0x3b19d5(0x258)][_0x3b19d5(0x296)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x56b357=_0x3b19d5;this[_0x56b357(0x258)]['remove'](_0x56b357(0x231)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x2fd7c7=>{const _0x105a7c=_0x3b19d5;console['error'](_0x105a7c(0x1e0),_0x2fd7c7),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xc0d641=_0x105a7c;this[_0xc0d641(0xa8)]=_0xc0d641(0xa2);},0xbb8);});});}if(_0x4fe1a5['includes']('manage-players')){const _0x22dca2=document[_0x1962ed(0xfc)]('load-players-data');_0x22dca2&&_0x22dca2['addEventListener'](_0x1962ed(0x1bc),function(){const _0x373f53=_0x1962ed;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x373f53(0x28d)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})[_0x373f53(0x2e7)](_0x38faa3=>{const _0x24afb3=_0x373f53;console[_0x24afb3(0x135)](_0x24afb3(0x206),_0x38faa3),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x4fe1a5[_0x1962ed(0xb4)]('elo-history')){const _0x21c26a=document['getElementById'](_0x1962ed(0x181));_0x21c26a&&_0x21c26a['addEventListener']('click',function(){console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x5a46f5=a4_0x4f5e;this[_0x5a46f5(0x258)]['remove']('loading'),this[_0x5a46f5(0xa8)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x67b1cc=>{const _0x34654f=a4_0x4f5e;console[_0x34654f(0x135)]('Error\x20loading\x20history:',_0x67b1cc),this[_0x34654f(0x258)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x4fe1a5['includes'](_0x1962ed(0x1e9))){const _0x2ad31b=document[_0x1962ed(0xfc)]('load-articles-data');_0x2ad31b&&_0x2ad31b['addEventListener']('click',function(){const _0x4e3e97=_0x1962ed;console['log'](_0x4e3e97(0x18e)),this['classList']['add'](_0x4e3e97(0x231)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x1316db=_0x4e3e97;this['classList']['remove']('loading'),this[_0x1316db(0xa8)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x42a1b3=>{const _0x14478c=_0x4e3e97;console['error'](_0x14478c(0x14c),_0x42a1b3),this['classList']['remove']('loading'),this[_0x14478c(0xa8)]=_0x14478c(0x265),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x4fe1a5['includes'](_0x1962ed(0x14b))){const _0x54f2b0=document['getElementById']('load-users-data');_0x54f2b0&&_0x54f2b0['addEventListener']('click',function(){const _0x1026e9=_0x1962ed;console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x1026e9(0x28d)](()=>{const _0x3fa552=_0x1026e9;this[_0x3fa552(0x258)][_0x3fa552(0x2cb)](_0x3fa552(0x231)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0xadad6b=>{const _0x46026c=_0x1026e9;console['error']('Error\x20loading\x20users:',_0xadad6b),this['classList'][_0x46026c(0x2cb)](_0x46026c(0x231)),this[_0x46026c(0xa8)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3d3681=_0x46026c;this['innerHTML']=_0x3d3681(0x294);},0xbb8);});});}if(_0x4fe1a5['includes']('inactive-players')){const _0x3786d1=document[_0x1962ed(0xfc)](_0x1962ed(0x211));_0x3786d1&&_0x3786d1['addEventListener'](_0x1962ed(0x1bc),function(){const _0x4fa29d=_0x1962ed;console[_0x4fa29d(0xdf)]('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x3d153e=_0x4fa29d;this['classList'][_0x3d153e(0x2cb)](_0x3d153e(0x231)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x126519=>{const _0x261626=_0x4fa29d;console['error']('Error\x20loading\x20inactive\x20players:',_0x126519),this['classList']['remove']('loading'),this[_0x261626(0xa8)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x240297=_0x261626;this[_0x240297(0xa8)]=_0x240297(0x214);},0xbb8);});});}if(_0x4fe1a5[_0x1962ed(0xb4)]('manage-highlights')){const _0x7b1b18=document['getElementById'](_0x1962ed(0x27c));_0x7b1b18&&_0x7b1b18['addEventListener'](_0x1962ed(0x1bc),function(){const _0x1d3c00=_0x1962ed;console['log']('Load\x20highlights\x20data\x20clicked'),this[_0x1d3c00(0x258)][_0x1d3c00(0x296)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x4a7cd8=_0x1d3c00;this['classList'][_0x4a7cd8(0x2cb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x5dd52e=>{const _0x1a525f=_0x1d3c00;console['error'](_0x1a525f(0x1d1),_0x5dd52e),this['classList']['remove']('loading'),this['innerHTML']=_0x1a525f(0x265),setTimeout(()=>{const _0x1c3010=_0x1a525f;this['innerHTML']=_0x1c3010(0x1f5);},0xbb8);});});}if(_0x4fe1a5[_0x1962ed(0xb4)](_0x1962ed(0x14d))){const _0x1cc680=document['getElementById']('load-matches-data');_0x1cc680&&_0x1cc680['addEventListener']('click',function(){const _0x298285=_0x1962ed;console[_0x298285(0xdf)](_0x298285(0x141)),this['classList'][_0x298285(0x296)]('loading'),this['innerHTML']=_0x298285(0x119),loadMatchesData(0x1)['then'](()=>{const _0x3a20a0=_0x298285;this['classList']['remove']('loading'),this['innerHTML']=_0x3a20a0(0x1fd);})['catch'](_0x7cd276=>{const _0x565094=_0x298285;console['error']('Error\x20loading\x20matches:',_0x7cd276),this['classList'][_0x565094(0x2cb)]('loading'),this['innerHTML']=_0x565094(0x265),setTimeout(()=>{const _0x332d0b=_0x565094;this[_0x332d0b(0xa8)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x4fe1a5[_0x1962ed(0xb4)](_0x1962ed(0x264))){const _0xbc8598=document['getElementById']('load-ribbons-data');_0xbc8598&&_0xbc8598['addEventListener']('click',function(){const _0x368004=_0x1962ed;console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList'][_0x368004(0x296)](_0x368004(0x231)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x33899e=_0x368004;this['classList'][_0x33899e(0x2cb)](_0x33899e(0x231)),this[_0x33899e(0xa8)]=_0x33899e(0x17b);})['catch'](_0x2c6ebe=>{const _0x1dfaca=_0x368004;console['error'](_0x1dfaca(0x204),_0x2c6ebe),this['classList']['remove'](_0x1dfaca(0x231)),this[_0x1dfaca(0xa8)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5ed9f7=_0x1dfaca;this['innerHTML']=_0x5ed9f7(0x17b);},0xbb8);});});}console['log'](_0x1962ed(0x1e5));}function setupDashboardSection(){const _0x472311=a4_0x4f5e;document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x472311(0xa0))[_0x472311(0x2d1)]='-',document['getElementById'](_0x472311(0xf2))['textContent']='-',document['getElementById']('rejected-count')[_0x472311(0x2d1)]='-';}function setupLadderSelector(){const _0x1b0f66=a4_0x4f5e,_0x41f30b=document['querySelectorAll'](_0x1b0f66(0x295));_0x41f30b['forEach'](_0x5b9a09=>{_0x5b9a09['addEventListener']('change',()=>{const _0x2d4c4d=a4_0x4f5e;currentLadder=_0x5b9a09[_0x2d4c4d(0x176)],document[_0x2d4c4d(0x175)]['setAttribute'](_0x2d4c4d(0x270),currentLadder);const _0x376ae3=document['getElementById']('current-ladder-display');_0x376ae3&&(_0x376ae3['textContent']=currentLadder),document[_0x2d4c4d(0xfc)](_0x2d4c4d(0x15c))['textContent']='-',document['getElementById'](_0x2d4c4d(0xa0))['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x2d4c4d(0xfc)]('rejected-count')['textContent']='-',charts[_0x2d4c4d(0x260)]&&(charts['rankDistribution'][_0x2d4c4d(0x11c)](),charts['rankDistribution']=null),charts['activity']&&(charts['activity'][_0x2d4c4d(0x11c)](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x292379=document['getElementById']('current-ladder-display');_0x292379&&(_0x292379['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x4d8699=a4_0x4f5e;try{console['log'](_0x4d8699(0x221)),document[_0x4d8699(0xfc)](_0x4d8699(0x15c))['textContent']='-',document[_0x4d8699(0xfc)]('match-count')['textContent']='-',document['getElementById']('pending-count')[_0x4d8699(0x2d1)]='-',document[_0x4d8699(0xfc)](_0x4d8699(0x239))[_0x4d8699(0x2d1)]='-';const _0x52f90d=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x3e1dac=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3de04a=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x328f6d=currentLadder==='D1'?_0x4d8699(0x13a):currentLadder==='D2'?'RejectedD2':_0x4d8699(0xdb);console['log'](_0x4d8699(0x158)+currentLadder+':\x20'+_0x52f90d+',\x20'+_0x3e1dac);const _0x1e04f6=await getDocs(collection(db,_0x52f90d)),_0x5db6aa=_0x1e04f6[_0x4d8699(0x2ad)],_0x94b2b5=await getDocs(collection(db,_0x3e1dac)),_0x2cb3f0=_0x94b2b5['size'],_0x1c2c28=await getDocs(collection(db,_0x3de04a)),_0x86e158=_0x1c2c28['size'],_0x459167=await getDocs(collection(db,_0x328f6d)),_0x141b8f=_0x459167['size'];return document['getElementById']('player-count')['textContent']=_0x5db6aa,document[_0x4d8699(0xfc)]('match-count')['textContent']=_0x2cb3f0,document['getElementById']('pending-count')[_0x4d8699(0x2d1)]=_0x86e158,document['getElementById'](_0x4d8699(0x239))[_0x4d8699(0x2d1)]=_0x141b8f,await createRankDistributionChart(),await createActivityChart(),console[_0x4d8699(0xdf)](_0x4d8699(0x27a)),!![];}catch(_0xece5d5){console['error']('Error\x20loading\x20dashboard\x20data:',_0xece5d5);throw _0xece5d5;}}async function createRankDistributionChart(){const _0x5981e9=a4_0x4f5e;try{const _0x2e4815=collection(db,currentLadder==='D1'?'players':'playersD2'),_0xa17cbe=await getDocs(_0x2e4815),_0x506a74={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0xa17cbe[_0x5981e9(0x1a9)](_0x2464c9=>{const _0x4204e9=_0x5981e9,_0x330021=_0x2464c9['data'](),_0x38bb62=_0x330021[_0x4204e9(0x184)]||0x4b0;if(_0x38bb62>=0x7d0)_0x506a74['Emerald']++;else{if(_0x38bb62>=0x708)_0x506a74['Gold']++;else{if(_0x38bb62>=0x640)_0x506a74[_0x4204e9(0x213)]++;else{if(_0x38bb62>=0x578)_0x506a74['Bronze']++;else _0x506a74['Unranked']++;}}}});const _0x3eee09=document['getElementById'](_0x5981e9(0x9f));charts[_0x5981e9(0x260)]&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0x3eee09,{'type':_0x5981e9(0x105),'data':{'labels':Object['keys'](_0x506a74),'datasets':[{'data':Object['values'](_0x506a74),'backgroundColor':['#808080','#CD7F32',_0x5981e9(0xf7),'#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x5981e9(0x118)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x1cd504){console[_0x5981e9(0x135)](_0x5981e9(0x130),_0x1cd504),document[_0x5981e9(0xfc)]('rank-distribution-chart')[_0x5981e9(0xa8)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x4b51d5=a4_0x4f5e;try{const _0x13463a=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x3f433d=collection(db,_0x13463a),_0x4bfb0f=new Date();_0x4bfb0f['setDate'](_0x4bfb0f[_0x4b51d5(0x1c0)]()-0x7);const _0x509ae9=query(_0x3f433d,where('approvedAt','>=',_0x4bfb0f),orderBy('approvedAt','asc')),_0x3352c1=await getDocs(_0x509ae9),_0x4d9ae6=[_0x4b51d5(0x243),_0x4b51d5(0x151),'Tuesday','Wednesday','Thursday',_0x4b51d5(0x289),'Saturday'],_0x38be7b=_0x4d9ae6['reduce']((_0x3ec4e8,_0x55d221)=>({..._0x3ec4e8,[_0x55d221]:0x0}),{});_0x3352c1[_0x4b51d5(0x1a9)](_0xf612bc=>{const _0x21bf36=_0xf612bc['data']();if(_0x21bf36['approvedAt']){const _0x1fb1af=_0x4d9ae6[new Date(_0x21bf36['approvedAt']['seconds']*0x3e8)['getDay']()];_0x38be7b[_0x1fb1af]++;}});const _0x22b6f3=document['getElementById']('activity-chart');charts[_0x4b51d5(0x107)]&&charts['activity'][_0x4b51d5(0x11c)](),charts[_0x4b51d5(0x107)]=new Chart(_0x22b6f3,{'type':'bar','data':{'labels':_0x4d9ae6,'datasets':[{'label':'Matches\x20Played','data':_0x4d9ae6['map'](_0x13d323=>_0x38be7b[_0x13d323]),'backgroundColor':currentLadder==='D1'?_0x4b51d5(0x24c):'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0x4b51d5(0x157):_0x4b51d5(0x2d6),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x4b51d5(0x1ba),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x482be4){console['error'](_0x4b51d5(0xaa),_0x482be4),document['getElementById']('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x572e85=a4_0x4f5e,_0x14866f=document['getElementById']('players-table-body');if(!_0x14866f)return;_0x14866f['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x581e70='players';if(currentLadder==='D2')_0x581e70='playersD2';else currentLadder==='D3'&&(_0x581e70='playersD3');console[_0x572e85(0xdf)]('Loading\x20players\x20from\x20'+_0x581e70+_0x572e85(0x23c));const _0x28f3a7=collection(db,_0x581e70),_0x2f5176=query(_0x28f3a7,orderBy(_0x572e85(0x184),'desc')),_0x373882=await getDocs(_0x2f5176);if(_0x373882[_0x572e85(0x287)]){_0x14866f['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x14866f['innerHTML']='';let _0x3512db=0x1;_0x373882[_0x572e85(0x1a9)](_0x248d82=>{const _0x376cf9=_0x572e85,_0x3dc34b=_0x248d82['data'](),_0x102b18=getRankFromElo(_0x3dc34b[_0x376cf9(0x184)]||0x4b0),_0x2a8d2a=getRankStyle(_0x3dc34b[_0x376cf9(0x184)]||0x4b0),_0x327c3c=document[_0x376cf9(0x26a)]('tr');_0x327c3c[_0x376cf9(0xa8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x3512db+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x2a8d2a['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3dc34b[_0x376cf9(0x93)]||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x3dc34b['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x2a8d2a['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x102b18+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3dc34b['wins']||0x0)+'W\x20/\x20'+(_0x3dc34b['losses']||0x0)+_0x376cf9(0x2d4)+_0x248d82['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x248d82['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x14866f['appendChild'](_0x327c3c),_0x3512db++;}),setupPlayerActionButtons();}catch(_0x3d7b45){console[_0x572e85(0x135)](_0x572e85(0x206),_0x3d7b45),_0x14866f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x3d7b45[_0x572e85(0x1b2)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x16ce62){const _0x2c700d=a4_0x4f5e;if(_0x16ce62>=0x7d0)return _0x2c700d(0x95);if(_0x16ce62>=0x708)return'Gold';if(_0x16ce62>=0x640)return _0x2c700d(0x213);if(_0x16ce62>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0xd9a090=a4_0x4f5e;document[_0xd9a090(0x9e)]('.edit-btn')['forEach'](_0xe97f7d=>{_0xe97f7d['addEventListener']('click',async _0x35408e=>{const _0x2db388=_0x35408e['currentTarget']['dataset']['id'];openEditPlayerModal(_0x2db388);});}),document[_0xd9a090(0x9e)]('.delete-btn')['forEach'](_0x5a80b0=>{_0x5a80b0['addEventListener']('click',async _0x17a427=>{const _0x1c6446=_0x17a427['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x1c6446);});});}async function openEditPlayerModal(_0x3f63f5){const _0x34492d=a4_0x4f5e;try{const _0xa847ee=currentLadder==='D1'?_0x34492d(0x2e0):'playersD2',_0x13ec2d=doc(db,_0xa847ee,_0x3f63f5),_0x3a7c3d=await getDoc(_0x13ec2d);if(!_0x3a7c3d['exists']()){showNotification('Player\x20not\x20found',_0x34492d(0x135));return;}const _0x2bef71=_0x3a7c3d['data'](),_0x57fff4=document['getElementById']('edit-player-modal'),_0x39890e=document['getElementById']('edit-username'),_0x1e2274=document[_0x34492d(0xfc)](_0x34492d(0x96)),_0x1412aa=document['getElementById']('edit-wins'),_0x30c174=document['getElementById'](_0x34492d(0x198));_0x39890e['value']=_0x2bef71[_0x34492d(0x93)]||'',_0x1e2274['value']=_0x2bef71['eloRating']||0x4b0,_0x1412aa[_0x34492d(0x176)]=_0x2bef71[_0x34492d(0x299)]||0x0,_0x30c174[_0x34492d(0x176)]=_0x2bef71['losses']||0x0,_0x57fff4['dataset'][_0x34492d(0x233)]=_0x3f63f5,_0x57fff4['classList']['add']('active');}catch(_0x339cd4){console['error']('Error\x20opening\x20edit\x20modal:',_0x339cd4),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x5d63c7=a4_0x4f5e;try{const _0x19834e=document['getElementById'](_0x5d63c7(0x255)),_0x21d341=_0x19834e['dataset'][_0x5d63c7(0x233)];if(!_0x21d341){showNotification(_0x5d63c7(0x1b0),'error');return;}const _0x329496=document['getElementById'](_0x5d63c7(0x2cd)),_0x251b41=document['getElementById']('edit-elo'),_0x251998=document['getElementById']('edit-wins'),_0x269b09=document['getElementById']('edit-losses'),_0x2f2db2=_0x329496['value']['trim'](),_0x220e70=parseInt(_0x251b41['value']),_0x182abc=parseInt(_0x251998['value']),_0x178d2a=parseInt(_0x269b09['value']);if(!_0x2f2db2||isNaN(_0x220e70)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x5d63c7(0x135));return;}const _0x29fd6a=currentLadder==='D1'?'players':'playersD2',_0x1a5747=doc(db,_0x29fd6a,_0x21d341),_0x1de77c=await getDoc(_0x1a5747),_0x4aec61=_0x1de77c['exists']()?_0x1de77c['data']():{},_0x3f2220=_0x4aec61[_0x5d63c7(0x184)]||0x4b0;await updateDoc(_0x1a5747,{'username':_0x2f2db2,'eloRating':_0x220e70,'wins':_0x182abc||0x0,'losses':_0x178d2a||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x220e70!==_0x3f2220){const _0x4d0001=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x4d0001),{'player':_0x2f2db2,'previousElo':_0x3f2220,'newElo':_0x220e70,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x5d63c7(0x17a));}catch(_0x444b21){console['error'](_0x5d63c7(0x1de),_0x444b21),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x444b21['message'],'error');}}function closeEditPlayerModal(){const _0x356b07=a4_0x4f5e,_0x2c6677=document['getElementById']('edit-player-modal');_0x2c6677['classList']['remove'](_0x356b07(0x103)),_0x2c6677[_0x356b07(0x246)][_0x356b07(0x233)]='';}async function confirmDeletePlayer(_0x492517){const _0x2b4fd0=a4_0x4f5e;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x3e19dc=currentLadder==='D1'?_0x2b4fd0(0x2e0):_0x2b4fd0(0x190);await deleteDoc(doc(db,_0x3e19dc,_0x492517)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x33c65a){console['error'](_0x2b4fd0(0x131),_0x33c65a),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x33c65a[_0x2b4fd0(0x1b2)],'error');}}async function setupManagePlayersSection(){const _0x246ca5=a4_0x4f5e,_0x3cc159=document['getElementById'](_0x246ca5(0xc6));_0x3cc159&&_0x3cc159['addEventListener']('submit',async _0x40ac6f=>{_0x40ac6f['preventDefault'](),await addNewPlayer();});const _0x576cc5=document[_0x246ca5(0xfc)](_0x246ca5(0x10e));_0x576cc5&&_0x576cc5['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x353df2=document['getElementById'](_0x246ca5(0xcf));_0x353df2&&_0x353df2[_0x246ca5(0x21f)](_0x246ca5(0x1bc),saveEditedPlayer);const _0x27546d=document[_0x246ca5(0xfc)]('cancel-edit-btn');_0x27546d&&_0x27546d[_0x246ca5(0x21f)](_0x246ca5(0x1bc),closeEditPlayerModal);const _0x2912fe=document['getElementById']('edit-player-modal');_0x2912fe&&_0x2912fe[_0x246ca5(0x21f)]('click',_0x4d315b=>{const _0x5e002d=_0x246ca5;_0x4d315b[_0x5e002d(0x136)]===_0x2912fe&&closeEditPlayerModal();});const _0xc8d87e=document['getElementById']('players-ladder-selector');_0xc8d87e&&_0xc8d87e[_0x246ca5(0x21f)]('change',()=>{currentLadder=_0xc8d87e['value'],loadPlayersData();});}async function addNewPlayer(){const _0x2dbe9e=a4_0x4f5e;try{const _0xb63c7f=document['getElementById'](_0x2dbe9e(0x1f3)),_0x45225c=document['getElementById']('new-player-elo'),_0x4785d5=_0xb63c7f[_0x2dbe9e(0x176)][_0x2dbe9e(0x1ed)](),_0x3ad7d3=parseInt(_0x45225c['value'])||0x4b0;if(!_0x4785d5){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log'](_0x2dbe9e(0x218)+_0x4785d5+'\x20with\x20ELO\x20'+_0x3ad7d3+'\x20to\x20'+currentLadder+_0x2dbe9e(0x108));let _0x57cae7='players',_0x1471e9=_0x2dbe9e(0xdc);if(currentLadder==='D2')_0x57cae7='playersD2',_0x1471e9=_0x2dbe9e(0x17c);else currentLadder==='D3'&&(_0x57cae7=_0x2dbe9e(0x16b),_0x1471e9='eloHistoryD3');const _0xcafe95=query(collection(db,_0x57cae7),where(_0x2dbe9e(0x93),'==',_0x4785d5)),_0x4cd8da=await getDocs(_0xcafe95);if(!_0x4cd8da[_0x2dbe9e(0x287)]){alert('Username\x20'+_0x4785d5+_0x2dbe9e(0x163)+currentLadder+_0x2dbe9e(0x108));return;}const _0x53d4a0=auth['currentUser'],_0x29ff16={'username':_0x4785d5,'eloRating':_0x3ad7d3,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x53d4a0?_0x53d4a0[_0x2dbe9e(0x12b)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x57cae7),_0x29ff16),await addDoc(collection(db,_0x1471e9),{'player':_0x4785d5,'previousElo':0x4b0,'newElo':_0x3ad7d3,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x53d4a0?_0x53d4a0['email']:'admin','gameMode':currentLadder}),_0xb63c7f['value']='',_0x45225c['value']='1200',alert('Player\x20'+_0x4785d5+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x2dbe9e(0x19a)),loadPlayersData();}catch(_0x3cd957){console['error']('Error\x20adding\x20player:',_0x3cd957),alert('Error\x20adding\x20player:\x20'+_0x3cd957[_0x2dbe9e(0x1b2)]);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x50204e=document['getElementById']('add-player-form');_0x50204e&&_0x50204e['addEventListener']('submit',_0x4f41fa=>{_0x4f41fa['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x2f4f53=a4_0x4f5e,_0x49a678=document['getElementById']('player-search')['value'][_0x2f4f53(0x16d)](),_0x55eb76=document['querySelectorAll']('#players-table-body\x20tr');let _0x110166=0x0;_0x55eb76[_0x2f4f53(0x1a9)](_0x554a47=>{const _0x5f5c43=_0x554a47['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x5f5c43['includes'](_0x49a678)?(_0x554a47['style']['display']='',_0x110166++):_0x554a47['style']['display']='none';});const _0x3310ed=document['getElementById'](_0x2f4f53(0x1bb));_0x3310ed&&(_0x110166===0x0&&_0x49a678!==''?_0x3310ed['style']['display']='block':_0x3310ed['style']['display']=_0x2f4f53(0xda));}function debounce(_0x558107,_0x19cca7){let _0xfb135f;return function(..._0x16c503){clearTimeout(_0xfb135f),_0xfb135f=setTimeout(()=>_0x558107['apply'](this,_0x16c503),_0x19cca7);};}async function loadEloHistory(_0x4cf512=0x1){const _0x4e0252=a4_0x4f5e,_0x458247=document['getElementById']('elo-history-table-body'),_0x4157f9=currentLadder[_0x4e0252(0x16d)]();if(!_0x458247)return;_0x458247['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0xa414ef=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0x4e0252(0x17c):'eloHistoryD3',_0x14b8d7=collection(db,_0xa414ef);let _0x6dbbb0;if(_0x4cf512>eloHistoryPagination[_0x4157f9]['page']&&eloHistoryPagination[_0x4157f9]['lastVisible'])_0x6dbbb0=query(_0x14b8d7,orderBy('timestamp',_0x4e0252(0xad)),startAfter(eloHistoryPagination[_0x4157f9]['lastVisible']),limit(PAGE_SIZE));else _0x4cf512<eloHistoryPagination[_0x4157f9]['page']&&eloHistoryPagination[_0x4157f9]['firstVisible']?_0x6dbbb0=query(_0x14b8d7,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x4157f9]['firstVisible']),limitToLast(PAGE_SIZE)):_0x6dbbb0=query(_0x14b8d7,orderBy(_0x4e0252(0xc2),'desc'),limit(PAGE_SIZE));const _0x5da858=await getDocs(_0x6dbbb0);if(_0x5da858['empty']){_0x458247['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x4157f9+'-page-indicator')['textContent']=_0x4e0252(0x2b0);return;}eloHistoryPagination[_0x4157f9][_0x4e0252(0x9a)]=_0x4cf512,eloHistoryPagination[_0x4157f9]['firstVisible']=_0x5da858[_0x4e0252(0x1d5)][0x0],eloHistoryPagination[_0x4157f9]['lastVisible']=_0x5da858['docs'][_0x5da858[_0x4e0252(0x1d5)][_0x4e0252(0x100)]-0x1];const _0x1cc823=new Map();_0x458247['innerHTML']='';const _0x5364a1=async _0x44994d=>{const _0x2aeac8=_0x4e0252;if(typeof _0x44994d!=='string'||_0x44994d[_0x2aeac8(0x100)]<0x14||/[^a-zA-Z0-9-_]/[_0x2aeac8(0xd1)](_0x44994d))return _0x44994d;if(_0x1cc823['has'](_0x44994d))return _0x1cc823[_0x2aeac8(0xe8)](_0x44994d);try{for(const _0x3f1eac of['players',_0x2aeac8(0x190),'playersD3','nonParticipants']){const _0x3a75ed=await getDoc(doc(db,_0x3f1eac,_0x44994d));if(_0x3a75ed['exists']()&&_0x3a75ed[_0x2aeac8(0x2d7)]()[_0x2aeac8(0x93)]){const _0x579be4=_0x3a75ed['data']()['username'];return _0x1cc823['set'](_0x44994d,_0x579be4),_0x579be4;}}return _0x44994d;}catch(_0x941b6a){return console[_0x2aeac8(0x26e)]('Error\x20resolving\x20username\x20for\x20'+_0x44994d+':',_0x941b6a),_0x44994d;}};for(const _0x1f42a9 of _0x5da858['docs']){const _0x56ad05=_0x1f42a9['data'](),_0x143999=document['createElement']('tr'),_0x3ea9c1=_0x56ad05['timestamp']?new Date(_0x56ad05[_0x4e0252(0xc2)]['seconds']*0x3e8)['toLocaleString']():'N/A',_0x498f20=_0x56ad05['newElo']-_0x56ad05['previousElo'],_0x393491=_0x498f20>0x0?'positive-change':_0x498f20<0x0?'negative-change':'',_0x9a696f=_0x498f20>0x0?'+':'',_0x4c2825=_0x56ad05['player']||_0x56ad05['username']||_0x56ad05['userId']||'N/A',_0x20eb09=await _0x5364a1(_0x4c2825);_0x143999[_0x4e0252(0xa8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x3ea9c1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x20eb09+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x56ad05[_0x4e0252(0x98)]||_0x4e0252(0x2d3))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x56ad05[_0x4e0252(0x262)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x393491+'\x22>'+_0x9a696f+_0x498f20+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x56ad05[_0x4e0252(0x1bd)])+_0x4e0252(0xb1)+(_0x56ad05['modifiedBy']||_0x56ad05['promotedBy']||_0x56ad05[_0x4e0252(0x24f)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x458247['appendChild'](_0x143999);}document['getElementById'](_0x4157f9+'-page-indicator')['textContent']=_0x4e0252(0xc5)+_0x4cf512;const _0x54321b=document[_0x4e0252(0xfc)](_0x4157f9+'-prev-page'),_0x4fbee2=document['getElementById'](_0x4157f9+'-next-page');if(_0x54321b)_0x54321b['disabled']=_0x4cf512<=0x1;const _0x312ac9=query(_0x14b8d7,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x4157f9]['lastVisible']),limit(0x1)),_0x1abd74=await getDocs(_0x312ac9);if(_0x4fbee2)_0x4fbee2[_0x4e0252(0x2cc)]=_0x1abd74['empty'];}catch(_0x485bb0){console[_0x4e0252(0x135)](_0x4e0252(0x1d3),_0x485bb0),_0x458247['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x485bb0['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x176026){const _0x17b512=a4_0x4f5e;switch(_0x176026){case'match_result':return'Match\x20Result';case'promotion':return _0x17b512(0x2b4);case _0x17b512(0x282):return'Demotion';case _0x17b512(0x281):return _0x17b512(0x144);case'initial_placement':return'Initial\x20Placement';default:return _0x176026||'Unknown';}}function setupEloHistorySection(){const _0x42e19a=a4_0x4f5e;document['getElementById']('d1-prev-page')[_0x42e19a(0x21f)](_0x42e19a(0x1bc),()=>{const _0x55ca7e=_0x42e19a;loadEloHistory(eloHistoryPagination['d1'][_0x55ca7e(0x9a)]-0x1);}),document['getElementById']('d1-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById'](_0x42e19a(0xa3))['addEventListener'](_0x42e19a(0x1bc),()=>{const _0x5dda82=_0x42e19a;loadEloHistory(eloHistoryPagination['d2'][_0x5dda82(0x9a)]+0x1);});const _0x563abc=document[_0x42e19a(0xfc)]('d3-prev-page'),_0x4bb1c5=document['getElementById']('d3-next-page');_0x563abc&&_0x563abc['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x4bb1c5&&_0x4bb1c5['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x25b674=document['getElementById']('elo-history-search');_0x25b674&&_0x25b674['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x3a5807=document['getElementById']('history-type-filter');_0x3a5807&&_0x3a5807['addEventListener']('change',applyEloHistoryFilters);const _0x64ed62=document['getElementById'](_0x42e19a(0xc0));_0x64ed62&&_0x64ed62[_0x42e19a(0x21f)]('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x3b968b=a4_0x4f5e,_0x2c88e5=document['getElementById']('elo-history-search')['value']['toLowerCase'](),_0x55ecf3=document[_0x3b968b(0x9e)]('#elo-history-table-body\x20tr');let _0x4ba1ed=0x0;_0x55ecf3['forEach'](_0x7acad=>{const _0x120262=_0x3b968b;if(_0x7acad[_0x120262(0x258)]['contains']('loading-cell')||_0x7acad['classList']['contains']('empty-state')||_0x7acad['classList']['contains']('error-state'))return;const _0x409bc4=_0x7acad['querySelector']('.player')?.[_0x120262(0x2d1)][_0x120262(0x16d)]()||'',_0x1c04aa=_0x7acad['querySelector'](_0x120262(0x117))?.['textContent']['toLowerCase']()||'',_0xf247b1=_0x7acad[_0x120262(0x240)]('.admin-action')?.['textContent']['toLowerCase']()||'';_0x409bc4['includes'](_0x2c88e5)||_0x1c04aa['includes'](_0x2c88e5)||_0xf247b1['includes'](_0x2c88e5)?(_0x7acad[_0x120262(0x2d9)][_0x120262(0x1c4)]='',_0x4ba1ed++):_0x7acad['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x1e03b0=a4_0x4f5e,_0x1229bd=document['getElementById']('history-start-date')['value'],_0x6cdebf=document[_0x1e03b0(0xfc)]('history-end-date')['value'],_0x5395a8=document[_0x1e03b0(0xfc)]('history-type-filter')['value'],_0x1bfe48=currentLadder[_0x1e03b0(0x16d)]();eloHistoryPagination[_0x1bfe48]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x36ea32=document[_0x1e03b0(0xfc)]('elo-history-table-body');_0x36ea32['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x33cc97=currentLadder==='D1'?_0x1e03b0(0xdc):'eloHistoryD2',_0x43540f=collection(db,_0x33cc97);let _0x5ec531=[orderBy('timestamp',_0x1e03b0(0xad))];if(_0x1229bd){const _0x331c1f=new Date(_0x1229bd);_0x331c1f['setHours'](0x0,0x0,0x0,0x0),_0x5ec531['push'](where('timestamp','>=',_0x331c1f));}if(_0x6cdebf){const _0x156bd0=new Date(_0x6cdebf);_0x156bd0[_0x1e03b0(0x17f)](0x17,0x3b,0x3b,0x3e7),_0x5ec531[_0x1e03b0(0x22d)](where('timestamp','<=',_0x156bd0));}_0x5395a8&&_0x5395a8!==_0x1e03b0(0xd9)&&_0x5ec531[_0x1e03b0(0x22d)](where('type','==',_0x5395a8));_0x5ec531['push'](limit(PAGE_SIZE));const _0x115900=query(_0x43540f,..._0x5ec531),_0x1545bf=await getDocs(_0x115900);!_0x1545bf['empty']&&(eloHistoryPagination[_0x1bfe48]['firstVisible']=_0x1545bf['docs'][0x0],eloHistoryPagination[_0x1bfe48]['lastVisible']=_0x1545bf[_0x1e03b0(0x1d5)][_0x1545bf['docs'][_0x1e03b0(0x100)]-0x1]);_0x36ea32['innerHTML']='';if(_0x1545bf['empty']){_0x36ea32['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x1545bf['forEach'](_0x85d907=>{const _0x244b2c=_0x1e03b0,_0x26c6cb=_0x85d907['data'](),_0x2b6414=document[_0x244b2c(0x26a)]('tr'),_0x3f3310=_0x26c6cb[_0x244b2c(0xc2)]?new Date(_0x26c6cb['timestamp']['seconds']*0x3e8)[_0x244b2c(0x16c)]():'N/A',_0x51f8c1=_0x26c6cb['newElo']-_0x26c6cb['previousElo'],_0x4ee393=_0x51f8c1>0x0?'positive-change':_0x51f8c1<0x0?_0x244b2c(0x20d):'',_0x136ae2=_0x51f8c1>0x0?'+':'',_0x11602a=_0x26c6cb['player']||_0x26c6cb['username']||_0x26c6cb['userId']||'N/A';_0x2b6414['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x3f3310+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x11602a+_0x244b2c(0x1fb)+(_0x26c6cb['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x26c6cb['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4ee393+'\x22>'+_0x136ae2+_0x51f8c1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x26c6cb['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x26c6cb['modifiedBy']||_0x26c6cb['promotedBy']||_0x26c6cb['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x36ea32['appendChild'](_0x2b6414);}),document['getElementById'](_0x1bfe48+_0x1e03b0(0x229))['textContent']='Page\x201';}catch(_0xb9449c){console['error']('Error\x20applying\x20filters:',_0xb9449c),_0x36ea32['innerHTML']=_0x1e03b0(0xbc)+_0xb9449c[_0x1e03b0(0x1b2)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x3a6fd2=a4_0x4f5e;document[_0x3a6fd2(0xfc)](_0x3a6fd2(0x28f))['value']='',document['getElementById']('history-end-date')['value']='',document['getElementById']('history-type-filter')[_0x3a6fd2(0x176)]=_0x3a6fd2(0xd9),document['getElementById']('elo-history-search')[_0x3a6fd2(0x176)]='';const _0x3b9d30=currentLadder['toLowerCase']();eloHistoryPagination[_0x3b9d30]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x464297=a4_0x4f5e,_0x70f18a=document[_0x464297(0xfc)](_0x464297(0x21d)),_0x8dfe81=document[_0x464297(0xfc)]('promote-modal'),_0x499bfd=document[_0x464297(0xfc)]('promote-form');_0x70f18a&&_0x8dfe81&&_0x499bfd&&(_0x70f18a['addEventListener'](_0x464297(0x1bc),()=>{_0x8dfe81['classList']['add']('active');}),_0x8dfe81['addEventListener']('click',_0x1adb56=>{const _0x1b197c=_0x464297;_0x1adb56['target']===_0x8dfe81&&_0x8dfe81[_0x1b197c(0x258)]['remove']('active');}),_0x499bfd['addEventListener']('submit',async _0x5de504=>{const _0x2f9149=_0x464297;_0x5de504[_0x2f9149(0x2c4)]();const _0x217810=document[_0x2f9149(0xfc)]('promote-username'),_0x3c7c62=document['getElementById']('promote-ladder'),_0x2762b7=_0x217810[_0x2f9149(0x176)]['trim'](),_0x26ee12=_0x3c7c62['value'];if(!_0x2762b7){showNotification(_0x2f9149(0x2dc),'error');return;}try{await promotePlayer(_0x2762b7,_0x26ee12),_0x8dfe81['classList']['remove']('active'),_0x217810['value']='';}catch(_0x34098c){showNotification(_0x34098c['message'],_0x2f9149(0x135));}}),document['getElementById'](_0x464297(0x1b3))[_0x464297(0x21f)]('click',()=>{const _0x6dd6b=_0x464297;_0x8dfe81[_0x6dd6b(0x258)]['remove']('active');}));const _0x1752e0=document['getElementById'](_0x464297(0x148)),_0x44f96d=document['getElementById'](_0x464297(0x1ad)),_0x169b82=document['getElementById']('demote-form');_0x1752e0&&_0x44f96d&&_0x169b82&&(_0x1752e0['addEventListener']('click',()=>{const _0x540d46=_0x464297;_0x44f96d[_0x540d46(0x258)]['add']('active');}),_0x44f96d[_0x464297(0x21f)](_0x464297(0x1bc),_0x5a9316=>{const _0x445b4=_0x464297;_0x5a9316['target']===_0x44f96d&&_0x44f96d['classList'][_0x445b4(0x2cb)]('active');}),_0x169b82['addEventListener'](_0x464297(0x2bb),async _0x574488=>{const _0x23f0e3=_0x464297;_0x574488['preventDefault']();const _0x2a4797=document['getElementById'](_0x23f0e3(0x2c2)),_0x59044e=document['getElementById'](_0x23f0e3(0xca)),_0x23bf64=_0x2a4797[_0x23f0e3(0x176)]['trim'](),_0x5ab3e6=_0x59044e['value'];if(!_0x23bf64){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x23bf64,_0x5ab3e6),document[_0x23f0e3(0xfc)]('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x25269f){console[_0x23f0e3(0x135)]('Error\x20in\x20demotion:',_0x25269f);}}));const _0x1ea0b2=document['getElementById']('set-elo-btn'),_0x379c42=document[_0x464297(0xfc)]('set-elo-modal'),_0x42a293=document[_0x464297(0xfc)]('set-elo-form');_0x1ea0b2&&_0x379c42&&_0x42a293&&(_0x1ea0b2[_0x464297(0x21f)]('click',()=>{const _0x3b7754=_0x464297;_0x379c42['classList']['add'](_0x3b7754(0x103));}),_0x379c42['addEventListener']('click',_0x45b781=>{const _0x1df53d=_0x464297;_0x45b781[_0x1df53d(0x136)]===_0x379c42&&_0x379c42[_0x1df53d(0x258)]['remove']('active');}),_0x42a293['addEventListener']('submit',async _0x57c45f=>{const _0x50679c=_0x464297;_0x57c45f[_0x50679c(0x2c4)]();const _0x4b7c39=document['getElementById']('set-elo-username'),_0x33ff15=document[_0x50679c(0xfc)](_0x50679c(0x1cd));let _0x3dc2eb;const _0x236849=document[_0x50679c(0xfc)](_0x50679c(0x164)),_0x37f61a=document[_0x50679c(0x240)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0x236849)_0x3dc2eb=_0x236849['value'];else _0x37f61a?_0x3dc2eb=_0x37f61a['value']:_0x3dc2eb='D1';if(!_0x4b7c39||!_0x33ff15){showNotification(_0x50679c(0xb0),'error');return;}const _0x318795=_0x4b7c39['value']['trim'](),_0xdf0cda=parseInt(_0x33ff15[_0x50679c(0x176)]);if(!_0x318795||isNaN(_0xdf0cda)){showNotification(_0x50679c(0x217),'error');return;}try{await setCustomElo(_0x318795,_0xdf0cda,_0x3dc2eb),_0x379c42['classList']['remove']('active'),_0x4b7c39['value']='',_0x33ff15['value']='';}catch(_0x689a7a){showNotification(_0x689a7a['message'],_0x50679c(0x135));}}),document['getElementById']('cancel-set-elo-btn')['addEventListener'](_0x464297(0x1bc),()=>{const _0x48bf83=_0x464297;_0x379c42['classList']['remove'](_0x48bf83(0x103));}));const _0x464d9c=document['getElementById'](_0x464297(0x1ae)),_0x17f177=document[_0x464297(0xfc)]('set-role-form');if(_0x464d9c&&_0x17f177){_0x464d9c['addEventListener']('click',_0x13e1b0=>{_0x13e1b0['target']===_0x464d9c&&closeModalHandler();}),_0x17f177['addEventListener']('submit',async _0xd70b2a=>{const _0x5eef68=_0x464297;_0xd70b2a['preventDefault']();const _0x4eb01a=document[_0x5eef68(0xfc)]('role-username'),_0x211bd8=document['getElementById']('role-name'),_0x1afc75=document['getElementById']('role-color'),_0x399851=_0x4eb01a['value'][_0x5eef68(0x1ed)](),_0x5f2717=_0x211bd8['value']['trim'](),_0x2a6098=_0x1afc75[_0x5eef68(0x176)];if(!_0x399851){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x399851,_0x5f2717,_0x2a6098),closeModalHandler(),loadUsersWithRoles();}catch(_0x31e3d7){}});const _0xae0077=document['getElementById']('cancel-role-btn');_0xae0077&&(_0xae0077['removeEventListener'](_0x464297(0x1bc),closeModalHandler),_0xae0077['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x182067,_0x417ab5){const _0x4fe472=a4_0x4f5e;try{console['log']('Attempting\x20to\x20promote\x20'+_0x182067+'\x20in\x20'+_0x417ab5+_0x4fe472(0x108));const _0x187680=auth[_0x4fe472(0xce)];if(!_0x187680)throw new Error(_0x4fe472(0xc3));const _0x61cea1=_0x417ab5==='D2'?'playersD2':'players',_0xd9f9bb=_0x417ab5==='D2'?'eloHistoryD2':_0x4fe472(0xdc);console['log']('Searching\x20for\x20player\x20in\x20'+_0x61cea1);const _0x16c41a=collection(db,_0x61cea1),_0x43c574=query(_0x16c41a,where('username','==',_0x182067)),_0x20f572=await getDocs(_0x43c574);if(_0x20f572[_0x4fe472(0x287)]){alert(_0x4fe472(0x1aa)+_0x417ab5+_0x4fe472(0x108));throw new Error(_0x4fe472(0x1aa)+_0x417ab5+'\x20ladder');}const _0x57f3cb=_0x20f572['docs'][0x0],_0x1f7e38=_0x57f3cb['data'](),_0x1acd77=_0x1f7e38['eloRating']||0x4b0,_0x439cc2=_0x57f3cb['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x1acd77);const _0xd8d446=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0xbe742a=_0xd8d446[_0x4fe472(0x199)](_0x12e1a0=>_0x12e1a0['elo']>_0x1acd77);if(!_0xbe742a){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x417ab5+_0x4fe472(0x108));throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x417ab5+_0x4fe472(0x108));}console[_0x4fe472(0xdf)]('Promoting\x20player\x20to\x20'+_0xbe742a['name']+'\x20('+_0xbe742a[_0x4fe472(0x276)]+')'),await updateDoc(doc(db,_0x61cea1,_0x57f3cb['id']),{'eloRating':_0xbe742a['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x187680['email']||'admin'}),await addDoc(collection(db,_0xd9f9bb),{'player':_0x182067,'previousElo':_0x1acd77,'newElo':_0xbe742a['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0xbe742a['name'],'promotedBy':_0x187680[_0x4fe472(0x12b)]||'admin','gameMode':_0x417ab5});try{const {promotionManager:_0x8f7f08}=await import('./promotions.js'),_0x384bf8=_0x8f7f08[_0x4fe472(0x224)](_0x1acd77),_0x3e1b63=_0xbe742a['name'];await _0x8f7f08[_0x4fe472(0x113)](_0x439cc2,_0x182067,_0x1acd77,_0xbe742a['elo'],_0x384bf8,_0x3e1b63,_0x4fe472(0x1ff),{'displayName':_0x182067,'source':'admin','adminUser':_0x187680['email'],'ladder':_0x417ab5}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x59ee24){console['error'](_0x4fe472(0x29e),_0x59ee24);}return alert('Successfully\x20promoted\x20'+_0x182067+'\x20to\x20'+_0xbe742a[_0x4fe472(0x1da)]+'\x20('+_0xbe742a['elo']+')'),currentLadder===_0x417ab5&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0xce2c50){console[_0x4fe472(0x135)]('Error\x20promoting\x20player:',_0xce2c50),alert('Error\x20promoting\x20player:\x20'+_0xce2c50['message']);throw _0xce2c50;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x4e4d05=document['getElementById']('promote-form');_0x4e4d05&&_0x4e4d05['addEventListener']('submit',async _0x1ee501=>{const _0x2f3c5d=a4_0x4f5e;_0x1ee501['preventDefault']();const _0x5638d7=document['getElementById']('promote-username')[_0x2f3c5d(0x176)]['trim'](),_0x557d9c=document[_0x2f3c5d(0x240)]('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x5638d7){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x5638d7,_0x557d9c),document['getElementById']('promote-modal')['classList']['remove'](_0x2f3c5d(0x103)),document['getElementById']('promote-username')['value']='';}catch(_0x28652d){console[_0x2f3c5d(0x135)]('Error\x20in\x20promotion:',_0x28652d);}});});async function demotePlayer(_0x33b9b3,_0x34b679){const _0x1fa4e1=a4_0x4f5e;try{console['log']('Attempting\x20to\x20demote\x20'+_0x33b9b3+'\x20in\x20'+_0x34b679+'\x20ladder');const _0x1a11d4=auth['currentUser'];if(!_0x1a11d4)throw new Error(_0x1fa4e1(0xc3));const _0x2afa2d=_0x34b679==='D2'?_0x1fa4e1(0x190):'players',_0x39dc0f=_0x34b679==='D2'?_0x1fa4e1(0x17c):_0x1fa4e1(0xdc);console['log']('Searching\x20for\x20player\x20in\x20'+_0x2afa2d);const _0x43f55d=collection(db,_0x2afa2d),_0x3741f4=query(_0x43f55d,where(_0x1fa4e1(0x93),'==',_0x33b9b3)),_0x46db18=await getDocs(_0x3741f4);if(_0x46db18[_0x1fa4e1(0x287)]){alert(_0x1fa4e1(0x1aa)+_0x34b679+_0x1fa4e1(0x108));throw new Error('Player\x20not\x20found\x20in\x20'+_0x34b679+'\x20ladder');}const _0x20a6e7=_0x46db18['docs'][0x0],_0x3c7484=_0x20a6e7['data'](),_0x58d2e9=_0x3c7484[_0x1fa4e1(0x184)]||0x4b0;console[_0x1fa4e1(0xdf)](_0x1fa4e1(0x1d2)+_0x58d2e9);const _0x1bcfc7=[{'name':_0x1fa4e1(0x288),'elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x13bbed=_0x1bcfc7['find'](_0x5b02d4=>_0x5b02d4['elo']<_0x58d2e9);if(!_0x13bbed){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x34b679+'\x20ladder');throw new Error(_0x1fa4e1(0xd3)+_0x34b679+'\x20ladder');}console['log'](_0x1fa4e1(0x139)+_0x13bbed['name']+'\x20('+_0x13bbed['elo']+')'),await updateDoc(doc(db,_0x2afa2d,_0x20a6e7['id']),{'eloRating':_0x13bbed[_0x1fa4e1(0x276)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x1a11d4['email']||_0x1fa4e1(0x236)}),await addDoc(collection(db,_0x39dc0f),{'player':_0x33b9b3,'previousElo':_0x58d2e9,'newElo':_0x13bbed['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x13bbed[_0x1fa4e1(0x1da)],'demotedBy':_0x1a11d4['email']||'admin','gameMode':_0x34b679});try{const {promotionManager:_0x69e219}=await import(_0x1fa4e1(0x21e)),_0x30d667=_0x69e219['getRankName'](_0x58d2e9),_0x1fc0f3=_0x13bbed['name'];await _0x69e219[_0x1fa4e1(0x113)](_0x20a6e7['id'],_0x33b9b3,_0x58d2e9,_0x13bbed['elo'],_0x30d667,_0x1fc0f3,_0x1fa4e1(0x282),{'displayName':_0x33b9b3,'source':_0x1fa4e1(0x236),'adminUser':_0x1a11d4['email'],'ladder':_0x34b679}),console[_0x1fa4e1(0xdf)](_0x1fa4e1(0x273));}catch(_0x11275f){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x11275f);}return alert(_0x1fa4e1(0x146)+_0x33b9b3+'\x20to\x20'+_0x13bbed['name']+'\x20('+_0x13bbed['elo']+')'),currentLadder===_0x34b679&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x490fdc){console['error'](_0x1fa4e1(0x1df),_0x490fdc),alert(_0x1fa4e1(0x1e7)+_0x490fdc[_0x1fa4e1(0x1b2)]);throw _0x490fdc;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x4d5e3c=a4_0x4f5e,_0x5502ec=document[_0x4d5e3c(0xfc)](_0x4d5e3c(0x2da));_0x5502ec&&_0x5502ec['addEventListener']('submit',async _0x378d5e=>{const _0x5e49e4=_0x4d5e3c;_0x378d5e['preventDefault']();const _0x1f53b8=document[_0x5e49e4(0xfc)]('demote-username')['value']['trim'](),_0x517c98=document[_0x5e49e4(0x240)]('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x1f53b8){alert(_0x5e49e4(0x2dc));return;}try{await demotePlayer(_0x1f53b8,_0x517c98),document['getElementById'](_0x5e49e4(0x1ad))['classList'][_0x5e49e4(0x2cb)]('active'),document[_0x5e49e4(0xfc)]('demote-username')['value']='';}catch(_0x16eda7){console['error']('Error\x20in\x20demotion:',_0x16eda7);}});});async function setCustomElo(_0x1ae3dd,_0x338b99,_0x5f5710){const _0x276a7e=a4_0x4f5e;try{const _0x7a67ca=auth['currentUser'];if(!_0x7a67ca||!isAdmin(_0x7a67ca['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x2dac72=_0x5f5710==='D2'?_0x276a7e(0x190):'players',_0x503c08=_0x5f5710==='D2'?'eloHistoryD2':'eloHistory',_0x374ab8=collection(db,_0x2dac72),_0x5f42e7=query(_0x374ab8,where('username','==',_0x1ae3dd)),_0x3cd040=await getDocs(_0x5f42e7);if(_0x3cd040['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x5f5710+'\x20ladder');const _0x1202ff=_0x3cd040[_0x276a7e(0x1d5)][0x0],_0x30ed04=_0x1202ff['data'](),_0x204b7b=_0x30ed04['eloRating']||0x4b0,_0x571f78=writeBatch(db);_0x571f78['update'](doc(db,_0x2dac72,_0x1202ff['id']),{'eloRating':_0x338b99,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x7a67ca['email']});const _0x37819b=doc(collection(db,_0x503c08));return _0x571f78[_0x276a7e(0xed)](_0x37819b,{'player':_0x1ae3dd,'previousElo':_0x204b7b,'newElo':_0x338b99,'timestamp':serverTimestamp(),'type':_0x276a7e(0x281),'modifiedBy':_0x7a67ca['email'],'gameMode':_0x5f5710}),await _0x571f78['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x1ae3dd+'\x20was\x20updated\x20from\x20'+_0x204b7b+'\x20to\x20'+_0x338b99,'success'),currentLadder===_0x5f5710&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x216fa1){console['error'](_0x276a7e(0xff),_0x216fa1);throw _0x216fa1;}}async function setUserRole(_0x93526f,_0x4d371a,_0x51c0fd){const _0x3132f6=a4_0x4f5e;try{const _0x5aaae0=auth['currentUser'];if(!_0x5aaae0||!isAdmin(_0x5aaae0['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x472afb=_0x4d371a?_0x4d371a['trim']():null,_0x4c7d72=_0x472afb?_0x51c0fd||'#808080':null,[_0x13fb0b,_0x2b852f]=await Promise[_0x3132f6(0xd9)]([getDocs(query(collection(db,'players'),where('username','==',_0x93526f))),getDocs(query(collection(db,'playersD2'),where(_0x3132f6(0x93),'==',_0x93526f)))]),_0x1d4425=[];if(!_0x13fb0b[_0x3132f6(0x287)])_0x1d4425['push']({'ref':_0x13fb0b[_0x3132f6(0x1d5)][0x0]['ref'],'source':'D1'});if(!_0x2b852f[_0x3132f6(0x287)])_0x1d4425[_0x3132f6(0x22d)]({'ref':_0x2b852f['docs'][0x0]['ref'],'source':'D2'});if(_0x1d4425['length']===0x0){const [_0x12c7a0,_0x40a5b5]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where(_0x3132f6(0x93),'==',_0x93526f))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x93526f)))]);if(!_0x12c7a0['empty'])_0x1d4425['push']({'ref':_0x12c7a0['docs'][0x0][_0x3132f6(0x125)],'source':_0x3132f6(0x250)});if(!_0x40a5b5[_0x3132f6(0x287)])_0x1d4425['push']({'ref':_0x40a5b5['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x1d4425['length']===0x0)throw new Error(_0x3132f6(0x241)+_0x93526f+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x51c5df=writeBatch(db);_0x1d4425['forEach'](_0x3e094a=>{const _0x36521f=_0x3132f6;console[_0x36521f(0xdf)]('Updating\x20role\x20for\x20'+_0x93526f+_0x36521f(0x202)+_0x3e094a[_0x36521f(0x1b8)]),!_0x472afb?_0x51c5df['update'](_0x3e094a[_0x36521f(0x125)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x51c5df[_0x36521f(0x160)](_0x3e094a['ref'],{'roleName':_0x472afb,'roleColor':_0x4c7d72,'roleAssignedBy':_0x5aaae0[_0x36521f(0x12b)],'roleAssignedAt':serverTimestamp()});}),await _0x51c5df['commit']();const _0x9fbf81=_0x472afb?_0x3132f6(0x200)+_0x472afb+'\x22\x20set':'Role\x20removed';return showNotification(_0x9fbf81+'\x20for\x20user\x20\x22'+_0x93526f+'\x22',_0x3132f6(0x17a)),!![];}catch(_0x319db0){console['error']('Error\x20setting\x20user\x20role:',_0x319db0),showNotification(_0x3132f6(0x1c3)+_0x319db0[_0x3132f6(0x1b2)],'error');throw _0x319db0;}}function showNotification(_0x2ff41f,_0x1c5ab3=a4_0x5c849d(0x2b1)){const _0x33e7fb=a4_0x5c849d,_0x45c77a=document['createElement'](_0x33e7fb(0x137));_0x45c77a['className']=_0x33e7fb(0x225)+_0x1c5ab3,_0x45c77a['innerHTML']=_0x33e7fb(0x2ba)+getNotificationIcon(_0x1c5ab3)+_0x33e7fb(0xc9)+_0x2ff41f+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x45c77a),setTimeout(()=>{const _0x5f2c1b=_0x33e7fb;_0x45c77a['classList'][_0x5f2c1b(0x296)](_0x5f2c1b(0x103));},0xa);const _0xb2c799=setTimeout(()=>{closeNotification(_0x45c77a);},0x1388);_0x45c77a['querySelector'](_0x33e7fb(0x2ca))['addEventListener']('click',()=>{clearTimeout(_0xb2c799),closeNotification(_0x45c77a);});}function getNotificationIcon(_0x450293){const _0x2a0acc=a4_0x5c849d;switch(_0x450293){case'success':return _0x2a0acc(0x154);case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case'info':default:return'fa-info-circle';}}function closeNotification(_0x53fe93){const _0x1dfd9e=a4_0x5c849d;_0x53fe93[_0x1dfd9e(0x258)]['remove'](_0x1dfd9e(0x103)),setTimeout(()=>{const _0x2008aa=_0x1dfd9e;_0x53fe93[_0x2008aa(0x2cb)]();},0x12c);}function setupUserRolesSection(){const _0x470259=a4_0x5c849d,_0x1130c2=document['getElementById']('load-users-data');_0x1130c2&&_0x1130c2['addEventListener'](_0x470259(0x1bc),function(){const _0x414785=_0x470259;this['classList']['add']('loading'),this[_0x414785(0xa8)]=_0x414785(0x119),loadUsersWithRoles()['then'](()=>{const _0x1e2897=_0x414785;this[_0x1e2897(0x258)][_0x1e2897(0x2cb)](_0x1e2897(0x231)),this['innerHTML']=_0x1e2897(0x294);})[_0x414785(0x2e7)](_0x22ff2b=>{const _0xcd93b7=_0x414785;console['error']('Error\x20loading\x20users:',_0x22ff2b),this['classList'][_0xcd93b7(0x2cb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x22bc87=document['getElementById'](_0x470259(0x10d));_0x22bc87&&_0x22bc87['addEventListener'](_0x470259(0x1bc),()=>{const _0x3d02f3=_0x470259,_0xde8ac3=document['getElementById'](_0x3d02f3(0x1ae));_0xde8ac3&&_0xde8ac3[_0x3d02f3(0x258)]['add']('active');});const _0x22fece=document['getElementById']('user-search');_0x22fece&&_0x22fece['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x53c01c=document['getElementById']('role-filter');_0x53c01c&&_0x53c01c['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x2bd320=a4_0x5c849d,_0x1b4d7e=document['getElementById']('users-table-body');if(!_0x1b4d7e)return;_0x1b4d7e['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0xa4cfbe,_0x3341b8,_0x31d614,_0x2422c1]=await Promise[_0x2bd320(0xd9)]([getDocs(collection(db,'players')),getDocs(collection(db,_0x2bd320(0x190))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x10d4cd=new Map();function _0x3d27e2(_0x37b92d,_0x5a3ddc){_0x37b92d['forEach'](_0x2233bc=>{const _0x2f3cfc=a4_0x4f5e,_0x39977d=_0x2233bc['data']();if(!_0x39977d['username'])return;if(!_0x10d4cd['has'](_0x39977d[_0x2f3cfc(0x93)]))_0x10d4cd['set'](_0x39977d['username'],{'username':_0x39977d['username'],'roleName':_0x39977d[_0x2f3cfc(0x27f)]||null,'roleColor':_0x39977d['roleColor']||null,'roleAssignedBy':_0x39977d['roleAssignedBy']||null,'roleAssignedAt':_0x39977d['roleAssignedAt']||null,'sources':[_0x5a3ddc]});else{const _0x49be16=_0x10d4cd['get'](_0x39977d[_0x2f3cfc(0x93)]);_0x39977d['roleName']&&(!_0x49be16['roleName']||_0x5a3ddc==='D1'||_0x5a3ddc==='D2')&&(_0x49be16['roleName']=_0x39977d['roleName'],_0x49be16['roleColor']=_0x39977d['roleColor'],_0x49be16[_0x2f3cfc(0xaf)]=_0x39977d['roleAssignedBy'],_0x49be16[_0x2f3cfc(0x152)]=_0x39977d[_0x2f3cfc(0x152)]),!_0x49be16[_0x2f3cfc(0x271)]['includes'](_0x5a3ddc)&&_0x49be16['sources']['push'](_0x5a3ddc);}});}_0x3d27e2(_0xa4cfbe,'D1'),_0x3d27e2(_0x3341b8,'D2'),_0x3d27e2(_0x31d614,'Non-Participant'),_0x3d27e2(_0x2422c1,'Profile');const _0x10e745=Array['from'](_0x10d4cd['values']())['sort']((_0x217623,_0x8c776a)=>_0x217623['username']['localeCompare'](_0x8c776a[_0x2bd320(0x93)]));if(_0x10e745[_0x2bd320(0x100)]===0x0){_0x1b4d7e['innerHTML']=_0x2bd320(0x29d);return;}_0x1b4d7e['innerHTML']='',_0x10e745['forEach'](_0x1101c3=>{const _0x1d4459=_0x2bd320,_0x1e518d=document['createElement']('tr');_0x1e518d['dataset']['username']=_0x1101c3[_0x1d4459(0x93)],_0x1e518d['dataset']['roleName']=_0x1101c3['roleName']||'',_0x1e518d['dataset']['roleColor']=_0x1101c3['roleColor']||'#808080';const _0x33f1a3=_0x1101c3['roleAssignedAt']?new Date(_0x1101c3['roleAssignedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0xe5c576=_0x1101c3['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x1101c3['roleColor']+';\x20color:\x20'+getContrastColor(_0x1101c3['roleColor'])+';\x22>'+_0x1101c3['roleName']+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x1e518d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1101c3[_0x1d4459(0x93)]+_0x1d4459(0xd0)+_0x1101c3[_0x1d4459(0x271)][_0x1d4459(0x1ab)](',\x20')+_0x1d4459(0xeb)+_0xe5c576+_0x1d4459(0x21a)+(_0x1101c3[_0x1d4459(0xaf)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x33f1a3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x1101c3['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1101c3[_0x1d4459(0x27f)]?_0x1d4459(0xe7)+_0x1101c3['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1b4d7e['appendChild'](_0x1e518d);}),document[_0x2bd320(0x9e)]('.edit-role-btn')['forEach'](_0x2fee73=>{const _0x12da48=_0x2bd320;_0x2fee73['addEventListener'](_0x12da48(0x1bc),()=>{const _0x1de0d8=_0x2fee73['dataset']['username'];openRoleEditModal(_0x1de0d8);});}),document[_0x2bd320(0x9e)]('.remove-role-btn')['forEach'](_0x17ff22=>{_0x17ff22['addEventListener']('click',()=>{const _0x4e9802=a4_0x4f5e,_0x55f557=_0x17ff22[_0x4e9802(0x246)]['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x55f557+'?')&&setUserRole(_0x55f557,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x23567c=>console['error']('Error\x20removing\x20role:',_0x23567c));});});}catch(_0x2c0741){console[_0x2bd320(0x135)]('Error\x20loading\x20users:',_0x2c0741),_0x1b4d7e[_0x2bd320(0xa8)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x3cdaba){const _0x3e73d2=a4_0x5c849d;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x3cdaba);const _0x45ac6e=document[_0x3e73d2(0xfc)](_0x3e73d2(0x1ae)),_0x534632=document[_0x3e73d2(0xfc)]('role-username'),_0x87d498=document['getElementById']('user-role');if(!_0x45ac6e){console['error'](_0x3e73d2(0x2af)),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log'](_0x3e73d2(0x292),_0x45ac6e);_0x534632?(_0x534632['value']=_0x3cdaba,console['log']('Username\x20input\x20set\x20to:\x20'+_0x3cdaba)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x43aae5=document['querySelector'](_0x3e73d2(0x132)+_0x3cdaba+'\x22]');if(_0x43aae5&&_0x87d498){const _0x348a64=_0x43aae5['dataset']['role'];_0x87d498['value']=_0x348a64===_0x3e73d2(0xda)?'':_0x348a64,console[_0x3e73d2(0xdf)](_0x3e73d2(0x25e)+_0x87d498[_0x3e73d2(0x176)]+_0x3e73d2(0xbb)+_0x348a64+')');}else{if(!_0x43aae5)console['warn'](_0x3e73d2(0x13d)+_0x3cdaba+'\x20not\x20found.');if(!_0x87d498)console[_0x3e73d2(0x26e)](_0x3e73d2(0x220));if(_0x87d498)_0x87d498[_0x3e73d2(0x176)]='';}console['log'](_0x3e73d2(0x1ca)),_0x45ac6e['classList']['add']('active');const _0x4b3aac=document[_0x3e73d2(0xfc)](_0x3e73d2(0x122));_0x4b3aac?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x4b3aac['removeEventListener'](_0x3e73d2(0x1bc),closeModalHandler),_0x4b3aac['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x45ac6e['removeEventListener']('click',closeModalBackgroundHandler),_0x45ac6e['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x14e315){_0x14e315['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x45250e=a4_0x5c849d,_0x14b664=document['getElementById']('set-role-modal');_0x14b664&&(_0x14b664['classList'][_0x45250e(0x2cb)]('active'),_0x14b664[_0x45250e(0xcc)]('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x2b4f83=a4_0x5c849d,_0x508abb=document['getElementById']('user-search')?.[_0x2b4f83(0x176)][_0x2b4f83(0x16d)]()||'',_0x85a149=document['getElementById'](_0x2b4f83(0xcb))?.[_0x2b4f83(0x176)]||_0x2b4f83(0xd9),_0x56d480=document[_0x2b4f83(0x9e)](_0x2b4f83(0x235));let _0x2043aa=0x0;_0x56d480[_0x2b4f83(0x1a9)](_0x10c1d6=>{const _0xd0c95b=_0x2b4f83;if(_0x10c1d6['querySelector']('.loading-cell')||_0x10c1d6['querySelector']('.empty-state')||_0x10c1d6['querySelector']('.error-state'))return;const _0x5c1ce5=_0x10c1d6['dataset']['username']?.['toLowerCase']()||'',_0x4176c8=_0x10c1d6[_0xd0c95b(0x246)]['role']||'none',_0x58a49d=_0x5c1ce5[_0xd0c95b(0xb4)](_0x508abb),_0x5e350f=_0x85a149===_0xd0c95b(0xd9)||_0x4176c8===_0x85a149;_0x58a49d&&_0x5e350f?(_0x10c1d6[_0xd0c95b(0x2d9)][_0xd0c95b(0x1c4)]='',_0x2043aa++):_0x10c1d6[_0xd0c95b(0x2d9)][_0xd0c95b(0x1c4)]='none';});if(_0x2043aa===0x0&&_0x56d480['length']>0x0){const _0x4de964=document[_0x2b4f83(0xfc)](_0x2b4f83(0x232));if(_0x4de964){if(!_0x4de964[_0x2b4f83(0x240)](_0x2b4f83(0x109))){const _0x4f709a=document[_0x2b4f83(0x26a)]('tr');_0x4f709a['classList']['add']('no-results'),_0x4f709a[_0x2b4f83(0xa8)]=_0x2b4f83(0xd5),_0x4de964['appendChild'](_0x4f709a);}}}else{const _0x58c61a=document['querySelector']('.no-results');_0x58c61a&&_0x58c61a['remove']();}}function setupManageArticlesSection(){const _0x2885a4=a4_0x5c849d,_0x27aa36=document['getElementById']('load-articles-data');_0x27aa36&&_0x27aa36['addEventListener']('click',function(){const _0x35ffd5=a4_0x4f5e;this['classList']['add'](_0x35ffd5(0x231)),this[_0x35ffd5(0xa8)]=_0x35ffd5(0x119),loadArticles()['then'](()=>{const _0xe2023d=_0x35ffd5;this['classList'][_0xe2023d(0x2cb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x626fe7=>{const _0x4d7a1c=_0x35ffd5;console['error'](_0x4d7a1c(0x14c),_0x626fe7),this['classList']['remove'](_0x4d7a1c(0x231)),this[_0x4d7a1c(0xa8)]=_0x4d7a1c(0x265),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x53c777=document['getElementById'](_0x2885a4(0x167));_0x53c777?(console['log'](_0x2885a4(0x177)),_0x53c777[_0x2885a4(0x2d9)]['display']='block',_0x53c777['addEventListener']('click',()=>{openArticleModal();})):console['error'](_0x2885a4(0x2c0));const _0x499e7d=document['getElementById']('article-form');_0x499e7d&&_0x499e7d['addEventListener'](_0x2885a4(0x2bb),_0x19f08d=>{_0x19f08d['preventDefault'](),saveArticle();});const _0x569335=document['getElementById']('cancel-article-btn');_0x569335&&_0x569335['addEventListener']('click',()=>{closeArticleModal();});const _0x4a366d=document['querySelector']('#article-modal\x20.close-btn');_0x4a366d&&_0x4a366d['addEventListener']('click',()=>{closeArticleModal();});const _0x50c7bf=document[_0x2885a4(0xfc)]('article-modal');_0x50c7bf&&_0x50c7bf['addEventListener'](_0x2885a4(0x1bc),_0xea2c13=>{_0xea2c13['target']===_0x50c7bf&&closeArticleModal();});}async function loadArticles(){const _0x1638ad=a4_0x5c849d,_0x609306=document['getElementById']('articles-table-body');if(!_0x609306)return;_0x609306['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x5afd08=collection(db,_0x1638ad(0x1c1)),_0x23be47=query(_0x5afd08,orderBy('createdAt',_0x1638ad(0xad))),_0x47499f=await getDocs(_0x23be47);if(_0x47499f['empty']){_0x609306['innerHTML']=_0x1638ad(0xfd);return;}_0x609306['innerHTML']='',_0x47499f[_0x1638ad(0x1a9)](_0x33d369=>{const _0x2c4c20=_0x1638ad,_0x780dd8=_0x33d369['data'](),_0x15e99c=document['createElement']('tr'),_0x4647fd=_0x780dd8['createdAt']?new Date(_0x780dd8['createdAt']['seconds']*0x3e8)['toLocaleString']():_0x2c4c20(0x2d3);_0x15e99c[_0x2c4c20(0xa8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x780dd8['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x780dd8['author']||'Unknown')+_0x2c4c20(0x21a)+_0x4647fd+_0x2c4c20(0x2e9)+_0x33d369['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x33d369['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x609306['appendChild'](_0x15e99c);}),setupArticleActionButtons();}catch(_0x16b0f0){console[_0x1638ad(0x135)](_0x1638ad(0x14c),_0x16b0f0),_0x609306[_0x1638ad(0xa8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x16b0f0['message']+_0x1638ad(0x178);}}function setupArticleActionButtons(){const _0x58a233=a4_0x5c849d;document[_0x58a233(0x9e)]('.edit-article-btn')['forEach'](_0x3bdd15=>{const _0x203cab=_0x58a233;_0x3bdd15['addEventListener'](_0x203cab(0x1bc),async _0x4fb26e=>{const _0x4293ae=_0x203cab,_0x6b92bb=_0x4fb26e[_0x4293ae(0x1bf)]['dataset']['id'];openArticleModal(_0x6b92bb);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x58c245=>{const _0x124330=_0x58a233;_0x58c245[_0x124330(0x21f)]('click',async _0x252314=>{const _0x34ba1d=_0x124330,_0x47dc4e=_0x252314['currentTarget'][_0x34ba1d(0x246)]['id'];confirmDeleteArticle(_0x47dc4e);});});}function openArticleModal(_0x384f83=null){const _0x4a0034=a4_0x5c849d,_0x29ae6f=document['getElementById']('article-modal'),_0x31558c=document['getElementById']('article-modal-title'),_0x10afeb=document['getElementById'](_0x4a0034(0x293)),_0x37448b=document[_0x4a0034(0xfc)]('article-id');_0x10afeb['reset'](),_0x37448b['value']='';if(_0x384f83)_0x31558c['textContent']='Edit\x20Article',_0x37448b['value']=_0x384f83,loadArticleData(_0x384f83);else{_0x31558c['textContent']=_0x4a0034(0x261);const _0x1c6d59=auth['currentUser'];if(_0x1c6d59){const _0x1dff2d=document[_0x4a0034(0xfc)]('article-author');if(_0x1dff2d&&_0x1c6d59['displayName'])_0x1dff2d['value']=_0x1c6d59[_0x4a0034(0x197)];else _0x1dff2d&&(_0x1dff2d['value']=_0x1c6d59['email']);}}_0x29ae6f['classList']['add']('active');}async function loadArticleData(_0x1616e7){const _0x550032=a4_0x5c849d;try{const _0x1ce6c6=doc(db,'articles',_0x1616e7),_0x203d5e=await getDoc(_0x1ce6c6);if(!_0x203d5e[_0x550032(0x1c8)]()){showNotification('Article\x20not\x20found',_0x550032(0x135));return;}const _0x4350cf=_0x203d5e[_0x550032(0x2d7)]();document['getElementById']('article-title')['value']=_0x4350cf['title']||'',document['getElementById']('article-author')['value']=_0x4350cf[_0x550032(0x205)]||'',document['getElementById']('article-image-url')[_0x550032(0x176)]=_0x4350cf['imageUrl']||'',document['getElementById']('article-content')[_0x550032(0x176)]=_0x4350cf['content']||'';}catch(_0x4c8318){console['error']('Error\x20loading\x20article\x20data:',_0x4c8318),showNotification(_0x550032(0xea),'error');}}async function saveArticle(){const _0x1d44a9=a4_0x5c849d;try{const _0x434911=document['getElementById'](_0x1d44a9(0x11f))['value'],_0x261dfe=document['getElementById']('article-title')['value'][_0x1d44a9(0x1ed)](),_0x40716d=document['getElementById']('article-author')['value']['trim'](),_0x4224af=document['getElementById']('article-image-url')['value']['trim'](),_0x5df1b1=document['getElementById']('article-content')[_0x1d44a9(0x176)][_0x1d44a9(0x1ed)]();if(!_0x261dfe||!_0x5df1b1){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0xac4033=auth['currentUser'];if(!_0xac4033){showNotification(_0x1d44a9(0x1ce),'error');return;}const _0x4b709c={'title':_0x261dfe,'author':_0x40716d,'imageUrl':_0x4224af||null,'content':_0x5df1b1,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xac4033['email']};!_0x434911?(_0x4b709c[_0x1d44a9(0x1e8)]=serverTimestamp(),_0x4b709c['createdBy']=_0xac4033['email'],await addDoc(collection(db,'articles'),_0x4b709c),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x434911),_0x4b709c),showNotification(_0x1d44a9(0x22a),'success')),closeArticleModal(),loadArticles();}catch(_0x46d080){console[_0x1d44a9(0x135)](_0x1d44a9(0x106),_0x46d080),showNotification(_0x1d44a9(0xbe)+_0x46d080[_0x1d44a9(0x1b2)],_0x1d44a9(0x135));}}function closeArticleModal(){const _0x4a2b1c=a4_0x5c849d,_0x14f8be=document['getElementById']('article-modal');_0x14f8be&&_0x14f8be['classList'][_0x4a2b1c(0x2cb)]('active');}async function confirmDeleteArticle(_0x4972f4){const _0x16757d=a4_0x5c849d;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x4972f4)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0xb69fcf){console['error'](_0x16757d(0x14a),_0xb69fcf),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0xb69fcf[_0x16757d(0x1b2)],'error');}}function setupTrophyManagementSection(){const _0x586218=a4_0x5c849d,_0x583984=document['getElementById']('load-trophies-data');_0x583984&&_0x583984[_0x586218(0x21f)]('click',function(){const _0x20e06e=_0x586218;this['classList']['add']('loading'),this[_0x20e06e(0xa8)]=_0x20e06e(0x119);const _0x390493=document['getElementById']('assign-trophy-image');_0x390493&&(_0x390493['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x4ea3f5=_0x20e06e;this[_0x4ea3f5(0x258)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x2544b4=>{const _0x28a847=_0x20e06e;console['error'](_0x28a847(0x1e0),_0x2544b4),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5e97a7=_0x28a847;this['innerHTML']=_0x5e97a7(0x2ce);},0xbb8);});});const _0x56deb0=document[_0x586218(0xfc)](_0x586218(0xc8));_0x56deb0&&_0x56deb0['addEventListener']('click',()=>{openTrophyModal();});const _0x11bc93=document['getElementById'](_0x586218(0x1fc));_0x11bc93&&_0x11bc93['addEventListener'](_0x586218(0x2bb),_0x4d625b=>{_0x4d625b['preventDefault'](),saveTrophyDefinition();});const _0x4a473a=document['getElementById'](_0x586218(0x1ee));_0x4a473a&&_0x4a473a['addEventListener']('click',()=>{closeTrophyModal();});document[_0x586218(0x9e)]('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x4f2b67=>{_0x4f2b67['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x552165=document['getElementById']('trophy-modal');_0x552165&&_0x552165['addEventListener']('click',_0x453693=>{_0x453693['target']===_0x552165&&closeTrophyModal();});const _0x15e24e=document[_0x586218(0xfc)](_0x586218(0x203));_0x15e24e&&_0x15e24e['addEventListener']('click',_0x1b1a89=>{_0x1b1a89['target']===_0x15e24e&&closeAssignTrophyModal();});const _0x323004=document[_0x586218(0xfc)]('assign-trophy-form');_0x323004&&_0x323004[_0x586218(0x21f)]('submit',_0x35ec1e=>{_0x35ec1e['preventDefault'](),assignTrophyToPlayer();});const _0x12733c=document['getElementById']('cancel-assign-btn');_0x12733c&&_0x12733c[_0x586218(0x21f)]('click',()=>{closeAssignTrophyModal();});const _0x5a5eb6=document[_0x586218(0xfc)]('trophy-image-url');_0x5a5eb6&&(_0x5a5eb6[_0x586218(0x21f)](_0x586218(0x25d),updateTrophyImagePreview),_0x5a5eb6[_0x586218(0x21f)](_0x586218(0x2bd),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x165f61=a4_0x5c849d,_0x36a3e0=document['getElementById'](_0x165f61(0xa6))['value']['trim'](),_0xaf2baa=document['getElementById'](_0x165f61(0x17d));if(!_0xaf2baa){const _0x1e58df=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x533584=document['createElement'](_0x165f61(0x137));_0x533584['id']=_0x165f61(0x17d),_0x533584[_0x165f61(0x291)]='trophy-preview-container',_0x1e58df['appendChild'](_0x533584);const _0xe77780=document['createElement']('img');_0xe77780['id']='trophy-preview-img',_0xe77780['alt']='Trophy\x20Preview',_0xe77780['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x533584['appendChild'](_0xe77780);}const _0x449b42=document['getElementById']('trophy-preview-img');_0x36a3e0?(_0x449b42['src']=_0x36a3e0,_0x449b42[_0x165f61(0x2d9)]['display']='block',_0x449b42['classList']['remove']('error')):(_0x449b42['src']=DEFAULT_TROPHY_IMAGE,_0x449b42['style']['display']='block');}async function loadTrophyDefinitions(){const _0x1a82da=a4_0x5c849d,_0x4b788f=document[_0x1a82da(0xfc)]('trophies-table-body');if(!_0x4b788f)return;_0x4b788f['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x5ad53a=collection(db,'trophyDefinitions'),_0x2b952f=query(_0x5ad53a,orderBy('createdAt','desc')),_0x278a7d=await getDocs(_0x2b952f);if(_0x278a7d[_0x1a82da(0x287)]){_0x4b788f[_0x1a82da(0xa8)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x4b788f['innerHTML']='',_0x278a7d[_0x1a82da(0x1a9)](_0x8e2d84=>{const _0x168dbe=_0x1a82da,_0x3c0f5f=_0x8e2d84['data'](),_0x343fb2=document['createElement']('tr'),_0x377055=_0x3c0f5f['createdAt']?new Date(_0x3c0f5f['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x343fb2['innerHTML']=_0x168dbe(0x25b)+(_0x3c0f5f['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3c0f5f['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x3c0f5f['name']||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x3c0f5f[_0x168dbe(0x2bf)]||_0x168dbe(0xfa))+'\x22>'+(_0x3c0f5f['rarity']||'common')+_0x168dbe(0xf5)+_0x377055+_0x168dbe(0x1c5)+_0x8e2d84['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x8e2d84['id']+_0x168dbe(0xe3)+_0x8e2d84['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4b788f[_0x168dbe(0x196)](_0x343fb2);}),setupTrophyActionButtons();}catch(_0x36263d){console[_0x1a82da(0x135)](_0x1a82da(0xf9),_0x36263d),_0x4b788f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x36263d['message']+_0x1a82da(0x178);}}function setupTrophyActionButtons(){const _0x1e421a=a4_0x5c849d;document[_0x1e421a(0x9e)]('.edit-trophy-btn')[_0x1e421a(0x1a9)](_0x19c338=>{const _0xdba8c6=_0x1e421a;_0x19c338[_0xdba8c6(0x21f)]('click',_0x3fd026=>{const _0x2c3873=_0xdba8c6,_0x36241d=_0x3fd026[_0x2c3873(0x1bf)]['dataset']['id'];openTrophyModal(_0x36241d);});}),document['querySelectorAll'](_0x1e421a(0x1fe))['forEach'](_0x426f45=>{_0x426f45['addEventListener']('click',_0x14e02c=>{const _0x8de8aa=_0x14e02c['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x8de8aa);});}),document[_0x1e421a(0x9e)]('.delete-trophy-btn')['forEach'](_0x3c0057=>{_0x3c0057['addEventListener']('click',_0x58b76d=>{const _0x22735f=a4_0x4f5e,_0x4ab0f8=_0x58b76d[_0x22735f(0x1bf)]['dataset']['id'];confirmDeleteTrophy(_0x4ab0f8);});});}function openTrophyModal(_0x6cbec=null){const _0x1107b7=a4_0x5c849d,_0x165ae8=document['getElementById']('trophy-modal'),_0x4d52ae=document[_0x1107b7(0xfc)]('trophy-modal-title'),_0x4f40bf=document[_0x1107b7(0xfc)](_0x1107b7(0x1fc)),_0x1611ab=document['getElementById'](_0x1107b7(0x1dc));_0x4f40bf['reset'](),_0x1611ab['value']='';const _0x2fe011=document[_0x1107b7(0xfc)](_0x1107b7(0xb3));_0x2fe011&&(_0x2fe011['src']=DEFAULT_TROPHY_IMAGE,_0x2fe011[_0x1107b7(0x258)]['remove'](_0x1107b7(0x135))),_0x6cbec?(_0x4d52ae['textContent']='Edit\x20Trophy',_0x1611ab['value']=_0x6cbec,loadTrophyData(_0x6cbec)):_0x4d52ae['textContent']='Create\x20New\x20Trophy',_0x165ae8[_0x1107b7(0x258)][_0x1107b7(0x296)]('active');}async function loadTrophyData(_0x30c5db){const _0x11eb2d=a4_0x5c849d;try{const _0x1fdee4=doc(db,_0x11eb2d(0x2c6),_0x30c5db),_0x45fe34=await getDoc(_0x1fdee4);if(!_0x45fe34['exists']()){showNotification(_0x11eb2d(0x2e6),_0x11eb2d(0x135));return;}const _0x3c1a3d=_0x45fe34['data']();document['getElementById'](_0x11eb2d(0x1f6))['value']=_0x3c1a3d['name']||'',document['getElementById']('trophy-description')['value']=_0x3c1a3d[_0x11eb2d(0x2e3)]||'',document['getElementById']('trophy-image-url')[_0x11eb2d(0x176)]=_0x3c1a3d['image']||'',document['getElementById'](_0x11eb2d(0x172))['value']=_0x3c1a3d['rarity']||'common',updateTrophyImagePreview();}catch(_0x5cb274){console['error']('Error\x20loading\x20trophy\x20data:',_0x5cb274),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x11eb2d(0x135));}}async function saveTrophyDefinition(){const _0x24921d=a4_0x5c849d;try{const _0x2818f5=document['getElementById']('trophy-id')[_0x24921d(0x176)],_0x57c72c=document['getElementById'](_0x24921d(0x1f6))['value']['trim'](),_0x29da29=document[_0x24921d(0xfc)]('trophy-description')['value']['trim'](),_0x177bd8=document['getElementById']('trophy-image-url')[_0x24921d(0x176)]['trim'](),_0x2c17ae=document[_0x24921d(0xfc)]('trophy-rarity')['value'];if(!_0x57c72c||!_0x29da29||!_0x177bd8){showNotification(_0x24921d(0x1d9),'error');return;}const _0x225fe1=auth['currentUser'];if(!_0x225fe1){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x158468={'name':_0x57c72c,'description':_0x29da29,'image':_0x177bd8,'rarity':_0x2c17ae,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x225fe1['email']};!_0x2818f5?(_0x158468[_0x24921d(0x1e8)]=serverTimestamp(),_0x158468['createdBy']=_0x225fe1['email'],await addDoc(collection(db,'trophyDefinitions'),_0x158468),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x2818f5),_0x158468),showNotification('Trophy\x20updated\x20successfully',_0x24921d(0x17a))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x388348){console[_0x24921d(0x135)](_0x24921d(0x183),_0x388348),showNotification(_0x24921d(0x29c)+_0x388348['message'],'error');}}function closeTrophyModal(){const _0x1657b3=a4_0x5c849d,_0x2c625d=document[_0x1657b3(0xfc)]('trophy-modal');_0x2c625d&&_0x2c625d['classList']['remove'](_0x1657b3(0x103));}async function confirmDeleteTrophy(_0x12be6e){const _0x317bf5=a4_0x5c849d;if(!_0x12be6e){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x1e8fc0=auth[_0x317bf5(0xce)];if(!_0x1e8fc0){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console[_0x317bf5(0xdf)]('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x12be6e),await deleteDoc(doc(db,'trophyDefinitions',_0x12be6e)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x33fbef){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x33fbef),showNotification(_0x317bf5(0x2c5)+_0x33fbef['message'],'error');}}async function openAssignTrophyModal(_0x98de2b){const _0x13fe9d=a4_0x5c849d;try{const _0xda5c1b=doc(db,'trophyDefinitions',_0x98de2b),_0xc6be2e=await getDoc(_0xda5c1b);if(!_0xc6be2e[_0x13fe9d(0x1c8)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x492dbc=_0xc6be2e['data']();document['getElementById']('assign-trophy-id')['value']=_0x98de2b,document['getElementById'](_0x13fe9d(0x2a6))['value']=_0x492dbc['name'],document['getElementById']('assign-trophy-image')[_0x13fe9d(0x191)]=_0x492dbc['image']||DEFAULT_TROPHY_IMAGE,document['getElementById'](_0x13fe9d(0x1b5))['textContent']=_0x492dbc['name']||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x492dbc[_0x13fe9d(0x2e3)]||'No\x20description';const _0x1c7838=document['getElementById']('assign-trophy-rarity');_0x1c7838['textContent']=_0x492dbc['rarity']||_0x13fe9d(0xfa),_0x1c7838[_0x13fe9d(0x291)]='trophy-rarity\x20'+(_0x492dbc['rarity']||'common');const _0x236429=document['getElementById'](_0x13fe9d(0x203));_0x236429[_0x13fe9d(0x258)]['add']('active');}catch(_0x324d7a){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x324d7a),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x1f1bcd=a4_0x5c849d,_0x461bf8=document[_0x1f1bcd(0xfc)](_0x1f1bcd(0x203));_0x461bf8&&_0x461bf8['classList']['remove'](_0x1f1bcd(0x103));}async function assignTrophyToPlayer(){const _0x44171a=a4_0x5c849d;try{const _0x254fe6=document['getElementById']('assign-trophy-id')['value'],_0x396e38=document['getElementById']('assign-trophy-name')['value'],_0x3af2a6=document['getElementById']('assign-player-username')['value']['trim'](),_0x18add1=document[_0x44171a(0x240)]('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x254fe6||!_0x3af2a6){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x3f07e7=auth['currentUser'];if(!_0x3f07e7){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0xb8dfa5=null,_0x36ad53=null,_0x210707=null;if(_0x18add1==='non-participant'){const _0x290b1d=collection(db,'nonParticipants'),_0x4eae59=query(_0x290b1d,where('username','==',_0x3af2a6)),_0x556fe2=await getDocs(_0x4eae59);!_0x556fe2['empty']&&(_0xb8dfa5=_0x556fe2['docs'][0x0],_0x36ad53=_0xb8dfa5['id'],_0x210707=_0xb8dfa5['data']());}else{const _0x34c092=_0x18add1==='D1'?'players':_0x18add1==='D2'?'playersD2':'playersD3',_0x1bf010=collection(db,_0x34c092),_0x5f0ae7=query(_0x1bf010,where('username','==',_0x3af2a6)),_0x3d1486=await getDocs(_0x5f0ae7);!_0x3d1486[_0x44171a(0x287)]&&(_0xb8dfa5=_0x3d1486['docs'][0x0],_0x36ad53=_0xb8dfa5['id'],_0x210707=_0xb8dfa5['data']());}if(!_0xb8dfa5){showNotification(_0x44171a(0x14e)+_0x3af2a6+'\x22\x20not\x20found\x20in\x20'+(_0x18add1==='non-participant'?_0x44171a(0xb6):_0x18add1+'\x20ladder'),_0x44171a(0x135));return;}const _0x2ac617=collection(db,'userTrophies'),_0x1354ff=query(_0x2ac617,where('userId','==',_0x36ad53),where('trophyId','==',_0x254fe6)),_0x2c1c7b=await getDocs(_0x1354ff);if(!_0x2c1c7b['empty']){showNotification(_0x44171a(0x14e)+_0x3af2a6+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x36ad53,'playerUsername':_0x3af2a6,'trophyId':_0x254fe6,'awardedAt':serverTimestamp(),'awardedBy':_0x3f07e7['email'],'ladder':_0x18add1}),showNotification('Trophy\x20\x22'+_0x396e38+'\x22\x20awarded\x20to\x20'+_0x3af2a6,'success'),closeAssignTrophyModal();}catch(_0x5948e6){console['error'](_0x44171a(0x2ea),_0x5948e6),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x5948e6[_0x44171a(0x1b2)],'error');}}function setupInactivePlayersSection(){const _0x3c3f6d=a4_0x5c849d,_0xd41d07=document[_0x3c3f6d(0xfc)](_0x3c3f6d(0x142));_0xd41d07&&_0xd41d07['addEventListener']('change',function(){const _0x1a52d8=_0x3c3f6d,_0xb60c05=document['getElementById'](_0x1a52d8(0x211));if(_0xb60c05)_0xb60c05['click']();});const _0xea5b8a=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x21d9ad=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0xea5b8a&&_0x21d9ad&&(_0xea5b8a[_0x3c3f6d(0x21f)](_0x3c3f6d(0x19b),function(){const _0x5421e6=_0x3c3f6d;if(this['checked']){currentLadder='D1';if(document['getElementById'](_0x5421e6(0xde))['style']['display']!=='none'){const _0x321b82=document['getElementById']('load-inactive-players-data');if(_0x321b82)_0x321b82[_0x5421e6(0x1bc)]();}}}),_0x21d9ad['addEventListener'](_0x3c3f6d(0x19b),function(){const _0x43a05c=_0x3c3f6d;if(this[_0x43a05c(0x147)]){currentLadder='D2';if(document['getElementById']('inactive-players')['style']['display']!=='none'){const _0x36eaf0=document['getElementById'](_0x43a05c(0x211));if(_0x36eaf0)_0x36eaf0['click']();}}}));const _0x202e16=document['getElementById']('inactive-players-search');_0x202e16&&_0x202e16['addEventListener']('input',debounce(function(){const _0x28d06e=_0x3c3f6d,_0x294516=_0x202e16['value']['toLowerCase'](),_0x5be46b=document[_0x28d06e(0x9e)]('#inactive-players-table-body\x20tr');_0x5be46b['forEach'](_0xc77029=>{const _0xec0044=_0x28d06e;if(_0xc77029['querySelector']('.loading-cell')||_0xc77029['querySelector']('.empty-state')||_0xc77029['querySelector']('.error-state'))return;const _0x4c0468=_0xc77029['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x316c17=_0xc77029['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x4c0468['includes'](_0x294516)||_0x316c17[_0xec0044(0xb4)](_0x294516)?_0xc77029['style']['display']='':_0xc77029[_0xec0044(0x2d9)][_0xec0044(0x1c4)]='none';});},0x12c)),document['addEventListener'](_0x3c3f6d(0x1bc),function(_0x1fc015){const _0x5944c1=_0x3c3f6d;if(_0x1fc015[_0x5944c1(0x136)][_0x5944c1(0x1f7)]('.view-player-btn')){const _0xba5c74=_0x1fc015['target']['closest'](_0x5944c1(0x170)),_0x155bbe=_0xba5c74['dataset'][_0x5944c1(0x93)];_0x155bbe&&alert(_0x5944c1(0x2db)+_0x155bbe+_0x5944c1(0x1ac));}}),console[_0x3c3f6d(0xdf)]('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x4536ae=a4_0x5c849d,_0x2414a8=document['getElementById']('inactive-players-table-body');if(!_0x2414a8)return;_0x2414a8['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x5d31=document[_0x4536ae(0xfc)](_0x4536ae(0x142)),_0x538bc3=_0x5d31?parseInt(_0x5d31['value'])||0x0:0x0,_0x42c187=collection(db,currentLadder==='D1'?_0x4536ae(0x2e0):_0x4536ae(0x190)),_0xba1fa=await getDocs(_0x42c187);if(_0xba1fa['empty']){_0x2414a8['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x5bc524=[];_0xba1fa['forEach'](_0x33b7ab=>{const _0x4fbab8=_0x33b7ab['data']();_0x5bc524['push']({..._0x4fbab8,'id':_0x33b7ab['id'],'username':_0x4fbab8['username']||'Unknown\x20Player'});}),console['log'](_0x4536ae(0x1a4)+_0x5bc524['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+_0x4536ae(0x108));const _0x4a50c8=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x393f35=_0x5bc524['map'](async _0xc454dc=>{const _0x374387=_0x4536ae;try{const _0x4a2a46=collection(db,_0x4a50c8),_0x44fdcb=query(_0x4a2a46,or(where('winnerUsername','==',_0xc454dc['username']),where(_0x374387(0x13c),'==',_0xc454dc['username'])),orderBy(_0x374387(0x1e6),_0x374387(0xad)),limit(0x1)),_0x3d8a4a=await getDocs(_0x44fdcb);if(!_0x3d8a4a[_0x374387(0x287)]){const _0x122a54=_0x3d8a4a['docs'][0x0]['data'](),_0x3f9853=_0x122a54[_0x374387(0x1e6)]?new Date(_0x122a54['approvedAt'][_0x374387(0x1cc)]*0x3e8):null,_0x570e06=new Date(),_0x1c3fa4=_0x3f9853?Math['floor']((_0x570e06-_0x3f9853)/(0x3e8*0x3c*0x3c*0x18)):null,_0x1a7db3=_0x122a54['winnerUsername']===_0xc454dc[_0x374387(0x93)]?_0x122a54['loserUsername']:_0x122a54['winnerUsername'],_0x57ff43=_0x122a54['winnerUsername']===_0xc454dc['username']?'Won':'Lost';return{..._0xc454dc,'lastMatch':{'date':_0x3f9853?_0x3f9853[_0x374387(0x210)]():'N/A','opponent':_0x1a7db3||'Unknown','result':_0x57ff43,'timestamp':_0x3f9853||new Date(0x0),'daysSinceMatch':_0x1c3fa4||Number[_0x374387(0x104)]}};}else return{..._0xc454dc,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':_0x374387(0x2d3),'timestamp':new Date(0x0),'daysSinceMatch':Number[_0x374387(0x104)]}};}catch(_0xe7be1a){return console[_0x374387(0x135)](_0x374387(0xe4)+_0xc454dc['username']+':',_0xe7be1a),{..._0xc454dc,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x5e9ed4=await Promise['all'](_0x393f35);_0x5e9ed4['sort']((_0x4d7776,_0x34294d)=>_0x34294d[_0x4536ae(0xa7)]['daysSinceMatch']-_0x4d7776['lastMatch']['daysSinceMatch']);_0x538bc3>0x0&&(_0x5e9ed4=_0x5e9ed4['filter'](_0x5294fa=>_0x5294fa['lastMatch']['daysSinceMatch']>=_0x538bc3));_0x2414a8['innerHTML']='';if(_0x5e9ed4[_0x4536ae(0x100)]===0x0){_0x2414a8['innerHTML']=_0x4536ae(0xee);return;}_0x5e9ed4['forEach'](_0x51fdc6=>{const _0x503096=_0x4536ae,_0x36a1f2=document[_0x503096(0x26a)]('tr'),_0x412bd8=_0x51fdc6['lastMatch'][_0x503096(0x28a)]>0x1e?_0x503096(0xf4):_0x51fdc6['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x36a1f2['className']=_0x412bd8,_0x36a1f2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x51fdc6[_0x503096(0x93)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x51fdc6['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x51fdc6[_0x503096(0xa7)][_0x503096(0x252)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x51fdc6['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x51fdc6['lastMatch'][_0x503096(0x28a)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+_0x503096(0x21a)+(_0x51fdc6[_0x503096(0xa7)]['date']==='Never\x20played'?'No\x20matches\x20found':_0x51fdc6['lastMatch']['result']+_0x503096(0x1a5)+_0x51fdc6['lastMatch'][_0x503096(0x212)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x51fdc6['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2414a8[_0x503096(0x196)](_0x36a1f2);}),console[_0x4536ae(0xdf)](_0x4536ae(0xb9)+_0x5e9ed4['length']+'\x20inactive\x20players');}catch(_0x4716c9){console['error']('Error\x20loading\x20inactive\x20players:',_0x4716c9),_0x2414a8['innerHTML']=_0x4536ae(0x2b7)+_0x4716c9['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x461ef1=a4_0x5c849d;console['log']('Setting\x20up\x20highlight\x20buttons');const _0xedcbca=document['getElementById'](_0x461ef1(0x2a8));_0xedcbca&&_0xedcbca[_0x461ef1(0x21f)]('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x2ee1cc=document['getElementById']('create-creator-highlight-btn');_0x2ee1cc&&_0x2ee1cc['addEventListener']('click',function(){const _0x3bf4d1=_0x461ef1;console[_0x3bf4d1(0xdf)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x2e3c4b=document['getElementById']('create-achievement-highlight-btn');_0x2e3c4b&&_0x2e3c4b['addEventListener']('click',function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x490b9b='match'){const _0x376fbc=a4_0x5c849d;console[_0x376fbc(0xdf)]('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x490b9b);const _0x5f41b3=document['getElementById']('highlight-modal'),_0x553400=document['getElementById']('highlight-form'),_0x4262d5=document['getElementById']('highlight-modal-title'),_0x482654=document['getElementById']('highlight-id');if(!_0x5f41b3||!_0x553400||!_0x4262d5){console['error'](_0x376fbc(0x115));return;}_0x553400[_0x376fbc(0x2a7)](),_0x482654[_0x376fbc(0x176)]='';const _0x50715f=[_0x376fbc(0x18a),'creator',_0x376fbc(0x14f)],_0x428fc3=!_0x50715f['includes'](_0x490b9b);if(_0x428fc3){const _0x47a98b=_0x490b9b;_0x482654[_0x376fbc(0x176)]=_0x47a98b,_0x4262d5['textContent']=_0x376fbc(0x297),loadHighlightDataAdmin(_0x47a98b);}else{const _0x54e6d2=_0x490b9b;document[_0x376fbc(0xfc)]('highlight-type')['value']=_0x54e6d2,_0x4262d5['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x54e6d2),toggleHighlightFields(_0x54e6d2);const _0x3e29af=auth[_0x376fbc(0xce)];_0x3e29af&&document[_0x376fbc(0xfc)]('highlight-submitted-by')&&(document[_0x376fbc(0xfc)](_0x376fbc(0x24e))['value']=_0x3e29af['displayName']||_0x3e29af['email']);}_0x5f41b3['classList']['add']('active');}function toggleHighlightFields(_0x1e5ae4){const _0x59d411=a4_0x5c849d;console['log'](_0x59d411(0x11e)+_0x1e5ae4);const _0x40ae8e=document['getElementById']('highlight-form');if(!_0x40ae8e)return;const _0x3f0870=_0x40ae8e['querySelectorAll']('.form-group,\x20.form-row');_0x3f0870['forEach'](_0x177d93=>_0x177d93[_0x59d411(0x2d9)]['display']='none');const _0x4a5be5=document['getElementById'](_0x59d411(0x15a));if(_0x4a5be5)_0x4a5be5['style']['display']='none';const _0xdcc4d0=['highlight-title-container','highlight-description-container',_0x59d411(0x180)];_0xdcc4d0['forEach'](_0x349849=>{const _0x347fb1=_0x59d411,_0x3b33b4=document['getElementById'](_0x349849);if(_0x3b33b4)_0x3b33b4[_0x347fb1(0x2d9)]['display']='block';});if(_0x1e5ae4==='match'){const _0x40a3b6=['highlight-video-container',_0x59d411(0x1cf),'highlight-map-container',_0x59d411(0x2b3),'highlight-players-container',_0x59d411(0xe0)];_0x40a3b6['forEach'](_0x30339b=>{const _0x1c9339=_0x59d411,_0x5419be=document['getElementById'](_0x30339b);_0x5419be&&(_0x30339b==='highlight-players-container'?_0x5419be['style'][_0x1c9339(0x1c4)]='flex':_0x5419be['style'][_0x1c9339(0x1c4)]=_0x1c9339(0x26b));});const _0x42915d=document['getElementById']('highlight-video-id');if(_0x42915d){_0x42915d['required']=!![];const _0xc54906=_0x42915d['previousElementSibling'];if(_0xc54906)_0xc54906[_0x59d411(0xa8)]=_0x59d411(0x192);}if(_0x4a5be5)_0x4a5be5['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x1e5ae4==='creator'){const _0x3ca08d=['highlight-map-container',_0x59d411(0x228),_0x59d411(0x1be),_0x59d411(0x2d2),'highlight-video-container'];_0x3ca08d[_0x59d411(0x1a9)](_0x36ecf2=>{const _0x29cd28=_0x59d411,_0x1a5bce=document['getElementById'](_0x36ecf2);if(_0x1a5bce)_0x1a5bce['style']['display']=_0x29cd28(0x26b);});const _0x4234b5=document[_0x59d411(0xfc)]('highlight-video-id');if(_0x4234b5){_0x4234b5[_0x59d411(0x2c7)]=![];const _0x3b98a2=_0x4234b5['previousElementSibling'];if(_0x3b98a2)_0x3b98a2['innerHTML']=_0x59d411(0x1e3);}}else{if(_0x1e5ae4==='achievement'){const _0x36036c=[_0x59d411(0x23d),_0x59d411(0xa4),'highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0x36036c['forEach'](_0x2f1a91=>{const _0x4fa3c8=_0x59d411,_0x1b7dfe=document['getElementById'](_0x2f1a91);if(_0x1b7dfe)_0x1b7dfe['style'][_0x4fa3c8(0x1c4)]=_0x4fa3c8(0x26b);});const _0x4215df=document['getElementById']('highlight-video-id');if(_0x4215df){_0x4215df['required']=![];const _0x4cfb7b=_0x4215df['previousElementSibling'];if(_0x4cfb7b)_0x4cfb7b['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x42abb8){const _0x3acda3=a4_0x5c849d;try{const _0x16b7b0=doc(db,'highlights',_0x42abb8),_0x3e643b=await getDoc(_0x16b7b0);if(!_0x3e643b[_0x3acda3(0x1c8)]()){showNotification(_0x3acda3(0x2c8),'error');return;}const _0x103869=_0x3e643b['data'](),_0xb8b38c=_0x103869[_0x3acda3(0x1bd)]||_0x3acda3(0x18a);document['getElementById']('highlight-modal-title')['textContent']=_0x3acda3(0x272)+getHighlightTypeName(_0xb8b38c),document[_0x3acda3(0xfc)]('highlight-type')['value']=_0xb8b38c,toggleHighlightFields(_0xb8b38c),document['getElementById']('highlight-title')['value']=_0x103869[_0x3acda3(0x2bc)]||'',document['getElementById'](_0x3acda3(0x2aa))['value']=_0x103869['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x103869[_0x3acda3(0xdd)]||'';_0x103869['videoId']&&(document['getElementById'](_0x3acda3(0x112))[_0x3acda3(0x176)]=_0x103869['videoId'],updateHighlightVideoPreview());if(_0xb8b38c==='match'){document['getElementById']('highlight-match-info')['value']=_0x103869['matchInfo']||'',document['getElementById']('highlight-map')[_0x3acda3(0x176)]=_0x103869[_0x3acda3(0x193)]||'';if(_0x103869[_0x3acda3(0x166)]){const _0x23e414=new Date(_0x103869['matchDate']['seconds']*0x3e8);document[_0x3acda3(0xfc)]('highlight-match-date')['value']=_0x23e414[_0x3acda3(0x1c6)]()['split']('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x103869[_0x3acda3(0x120)]||'',document['getElementById']('highlight-winner-score')[_0x3acda3(0x176)]=_0x103869[_0x3acda3(0x22f)]||'',document[_0x3acda3(0xfc)](_0x3acda3(0x189))['value']=_0x103869['loserName']||'',document['getElementById']('highlight-loser-score')['value']=_0x103869['loserScore']||'',document['getElementById']('highlight-match-link')[_0x3acda3(0x176)]=_0x103869[_0x3acda3(0xe2)]||'';}else{if(_0xb8b38c==='creator')document['getElementById'](_0x3acda3(0x18c))['value']=_0x103869[_0x3acda3(0x193)]||'',document['getElementById']('highlight-map-creator')['value']=_0x103869['mapCreator']||'',document[_0x3acda3(0xfc)]('highlight-map-version')[_0x3acda3(0x176)]=_0x103869['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x103869['creatorImageUrl']||'';else _0xb8b38c===_0x3acda3(0x14f)&&(document['getElementById']('highlight-achievement-player')[_0x3acda3(0x176)]=_0x103869['achievementPlayer']||'',document['getElementById'](_0x3acda3(0x171))['value']=_0x103869['achievementType']||'',document['getElementById']('highlight-achievement-details')[_0x3acda3(0x176)]=_0x103869[_0x3acda3(0x116)]||'',document['getElementById'](_0x3acda3(0x286))['value']=_0x103869['playerProfileUrl']||'',document[_0x3acda3(0xfc)](_0x3acda3(0x29b))['value']=_0x103869[_0x3acda3(0x1c2)]||'');}}catch(_0x366afe){console[_0x3acda3(0x135)]('Error\x20loading\x20highlight:',_0x366afe),showNotification('Error\x20loading\x20highlight:\x20'+_0x366afe['message'],_0x3acda3(0x135));}}async function saveHighlight(){const _0x15974e=a4_0x5c849d;try{const _0x34cd79=document['getElementById'](_0x15974e(0x1a8))?.[_0x15974e(0x176)]||'',_0x1ffa65=document['getElementById']('highlight-type')?.['value']||'match',_0x501c79={'title':document[_0x15974e(0xfc)]('highlight-title')?.['value']?.['trim']()||'','description':document['getElementById']('highlight-description')?.['value']?.['trim']()||'','submittedBy':document[_0x15974e(0xfc)]('highlight-submitted-by')?.[_0x15974e(0x176)]?.[_0x15974e(0x1ed)]()||'','videoId':document['getElementById']('highlight-video-id')?.[_0x15974e(0x176)]?.[_0x15974e(0x1ed)]()||null,'type':_0x1ffa65};if(!_0x501c79['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x1ffa65==='match'){_0x501c79['matchInfo']=document['getElementById']('highlight-match-info')?.['value']?.[_0x15974e(0x1ed)]()||'',_0x501c79['map']=document['getElementById']('highlight-map')?.[_0x15974e(0x176)]?.['trim']()||'';const _0x30827c=document['getElementById'](_0x15974e(0x24d)),_0x477020=_0x30827c?.[_0x15974e(0x176)]||'';_0x501c79[_0x15974e(0x166)]=_0x477020?Timestamp['fromDate'](new Date(_0x477020)):null,_0x501c79[_0x15974e(0x120)]=document['getElementById']('highlight-winner-name')?.[_0x15974e(0x176)]?.['trim']()||'',_0x501c79['winnerScore']=document['getElementById'](_0x15974e(0x138))?.[_0x15974e(0x176)]?.['trim']()||'',_0x501c79['loserName']=document[_0x15974e(0xfc)]('highlight-loser-name')?.[_0x15974e(0x176)]?.[_0x15974e(0x1ed)]()||'',_0x501c79['loserScore']=document[_0x15974e(0xfc)]('highlight-loser-score')?.['value']?.['trim']()||'',_0x501c79[_0x15974e(0xe2)]=document['getElementById'](_0x15974e(0x2d5))?.['value']?.['trim']()||'';if(!_0x501c79['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x1ffa65===_0x15974e(0x280)){_0x501c79['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x501c79[_0x15974e(0xa5)]=document['getElementById']('highlight-map-creator')?.['value']?.['trim']()||'',_0x501c79['mapVersion']=document['getElementById']('highlight-map-version')?.[_0x15974e(0x176)]?.[_0x15974e(0x1ed)]()||'',_0x501c79['creatorImageUrl']=document[_0x15974e(0xfc)]('highlight-creator-image')?.[_0x15974e(0x176)]?.['trim']()||'';if(!_0x501c79['mapCreator']){showNotification(_0x15974e(0x20c),_0x15974e(0x135));return;}}else{if(_0x1ffa65==='achievement'){_0x501c79['achievementPlayer']=document[_0x15974e(0xfc)](_0x15974e(0x19d))?.[_0x15974e(0x176)]?.['trim']()||'',_0x501c79['achievementType']=document['getElementById']('highlight-achievement-type')?.[_0x15974e(0x176)]?.[_0x15974e(0x1ed)]()||'',_0x501c79[_0x15974e(0x116)]=document['getElementById'](_0x15974e(0x285))?.['value']?.['trim']()||'',_0x501c79[_0x15974e(0x2b5)]=document['getElementById'](_0x15974e(0x286))?.['value']?.[_0x15974e(0x1ed)]()||'',_0x501c79[_0x15974e(0x1c2)]=document['getElementById']('highlight-achievement-image')?.['value']?.[_0x15974e(0x1ed)]()||'';if(!_0x501c79[_0x15974e(0x99)]){showNotification(_0x15974e(0x19c),'error');return;}}}}_0x34cd79?(_0x501c79['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x34cd79),_0x501c79),showNotification('Highlight\x20updated\x20successfully!',_0x15974e(0x17a))):(_0x501c79[_0x15974e(0x1e8)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x501c79),showNotification('Highlight\x20created\x20successfully!',_0x15974e(0x17a))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x25c628){console['error'](_0x15974e(0x1a1),_0x25c628),showNotification('Error\x20saving\x20highlight:\x20'+_0x25c628['message'],'error');}}function closeHighlightModal(){const _0x4af014=document['getElementById']('highlight-modal');if(_0x4af014)_0x4af014['classList']['remove']('active');}function getHighlightTypeName(_0x18d899){const _0x7c2f42=a4_0x5c849d;switch(_0x18d899){case'match':return _0x7c2f42(0x25f);case'creator':return'Featured\x20Creator';case _0x7c2f42(0x14f):return _0x7c2f42(0x102);default:return _0x7c2f42(0x1f8);}}function updateHighlightVideoPreview(){const _0x1fb4c8=a4_0x5c849d,_0x32d36b=document['getElementById'](_0x1fb4c8(0x112)),_0x2422c9=document['getElementById']('highlight-video-preview-container'),_0x28bed3=document[_0x1fb4c8(0xfc)](_0x1fb4c8(0xc4));if(!_0x32d36b||!_0x28bed3||!_0x2422c9)return;const _0x4b9b45=_0x32d36b['value']['trim']();_0x4b9b45&&/^[a-zA-Z0-9_-]{11}$/[_0x1fb4c8(0xd1)](_0x4b9b45)?(_0x28bed3[_0x1fb4c8(0x191)]=_0x1fb4c8(0x1b6)+_0x4b9b45,_0x2422c9[_0x1fb4c8(0x2d9)][_0x1fb4c8(0x1c4)]='block'):(_0x28bed3['src']='',_0x2422c9[_0x1fb4c8(0x2d9)]['display']='none');}async function loadHighlightsAdmin(){const _0x5ae6e7=a4_0x5c849d,_0x822ba5=document['getElementById']('highlights-table-body');if(!_0x822ba5)return;_0x822ba5['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x263ae6=query(collection(db,'highlights'),orderBy('createdAt','desc')),_0x5dd36b=await getDocs(_0x263ae6);if(_0x5dd36b['empty']){_0x822ba5[_0x5ae6e7(0xa8)]=_0x5ae6e7(0x248);return;}_0x822ba5['innerHTML']='',_0x5dd36b['forEach'](_0x73c468=>{const _0x430b0e=_0x5ae6e7,_0x1e631c=_0x73c468[_0x430b0e(0x2d7)](),_0x595b08=document[_0x430b0e(0x26a)]('tr'),_0x2d6d84=_0x1e631c['createdAt']?new Date(_0x1e631c[_0x430b0e(0x1e8)]['seconds']*0x3e8)['toLocaleDateString']():_0x430b0e(0x2d3);let _0x154a4e='Unknown',_0x44c93c='';switch(_0x1e631c['type']){case'match':_0x154a4e='Match',_0x44c93c='match-type';break;case'creator':_0x154a4e='Creator',_0x44c93c='creator-type';break;case'achievement':_0x154a4e=_0x430b0e(0x20f),_0x44c93c=_0x430b0e(0x249);break;}_0x595b08[_0x430b0e(0xa8)]=_0x430b0e(0x123)+(_0x1e631c['title']||'Untitled')+_0x430b0e(0x133)+_0x44c93c+'\x22>'+_0x154a4e+_0x430b0e(0x1a3)+_0x2d6d84+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1e631c['submittedBy']||'Unknown')+_0x430b0e(0x21a)+(_0x1e631c[_0x430b0e(0x173)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x430b0e(0x24a))+_0x430b0e(0x208)+_0x73c468['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x73c468['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x822ba5['appendChild'](_0x595b08);}),document[_0x5ae6e7(0x9e)](_0x5ae6e7(0x201))['forEach'](_0xc8d35=>{const _0x465eb8=_0x5ae6e7;_0xc8d35['addEventListener'](_0x465eb8(0x1bc),_0xb751ed=>{openHighlightModal(_0xb751ed['currentTarget']['dataset']['id']);});}),document[_0x5ae6e7(0x9e)](_0x5ae6e7(0x237))[_0x5ae6e7(0x1a9)](_0x4a32d4=>{const _0x367b3d=_0x5ae6e7;_0x4a32d4[_0x367b3d(0x21f)]('click',_0x48e340=>{const _0x4a2940=_0x367b3d;confirmDeleteHighlight(_0x48e340[_0x4a2940(0x1bf)]['dataset']['id']);});});}catch(_0x2f981d){console['error']('Error\x20loading\x20highlights:',_0x2f981d),_0x822ba5['innerHTML']=_0x5ae6e7(0x11d)+_0x2f981d['message']+_0x5ae6e7(0x178);}}async function confirmDeleteHighlight(_0x4c25a9){const _0x4fd7c6=a4_0x5c849d;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x4c25a9)),showNotification(_0x4fd7c6(0x159),'success'),loadHighlightsAdmin();}catch(_0x5be5af){console['error']('Error\x20deleting\x20highlight:',_0x5be5af),showNotification('Error\x20deleting\x20highlight:\x20'+_0x5be5af['message'],_0x4fd7c6(0x135));}}function setupCreateTestMatchModal(){const _0x1a114f=a4_0x5c849d;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x497bb3=document['getElementById']('create-test-match-modal'),_0x399a3e=document[_0x1a114f(0xfc)]('create-test-match-form');if(!_0x497bb3){console[_0x1a114f(0x135)](_0x1a114f(0x20a));return;}if(!_0x399a3e){console[_0x1a114f(0x135)]('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x4bb05d=_0x497bb3['cloneNode'](!![]);_0x497bb3['parentNode']['replaceChild'](_0x4bb05d,_0x497bb3);const _0x228477=_0x4bb05d['querySelector'](_0x1a114f(0x174));_0x4bb05d[_0x1a114f(0x21f)]('click',function(_0x2f007a){_0x2f007a['target']===_0x4bb05d&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x8f4ae2=_0x4bb05d['querySelector']('.close-btn');_0x8f4ae2&&_0x8f4ae2['addEventListener']('click',function(_0x1b7a99){const _0x2fc266=_0x1a114f;_0x1b7a99[_0x2fc266(0x2c4)](),_0x1b7a99['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x2637e6=_0x4bb05d['querySelector'](_0x1a114f(0x251));_0x2637e6&&_0x2637e6[_0x1a114f(0x21f)]('click',function(_0x172032){const _0x2a0740=_0x1a114f;_0x172032[_0x2a0740(0x2c4)](),_0x172032['stopPropagation'](),console[_0x2a0740(0xdf)]('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x228477){_0x228477['addEventListener']('submit',function(_0x17f81b){const _0xf8b807=_0x1a114f;_0x17f81b['preventDefault'](),_0x17f81b['stopPropagation'](),console[_0xf8b807(0xdf)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x25f9e9=_0x228477[_0x1a114f(0x240)](_0x1a114f(0xae));_0x25f9e9&&_0x25f9e9[_0x1a114f(0x21f)](_0x1a114f(0x1bc),function(_0x537c30){_0x537c30['preventDefault'](),_0x537c30['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x4798c0=a4_0x5c849d;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x4e7f05=document[_0x4798c0(0xfc)]('highlight-form');_0x4e7f05&&_0x4e7f05[_0x4798c0(0x21f)]('submit',_0xdcdd71=>{const _0x3d9395=_0x4798c0;_0xdcdd71[_0x3d9395(0x2c4)](),saveHighlight();});const _0x52fb94=document[_0x4798c0(0xfc)]('cancel-highlight-btn');_0x52fb94&&_0x52fb94['addEventListener']('click',closeHighlightModal);const _0xed92a0=document['querySelector']('#highlight-modal\x20.close-btn');_0xed92a0&&_0xed92a0['addEventListener']('click',closeHighlightModal);const _0x4ba214=document['getElementById'](_0x4798c0(0x2b6));_0x4ba214&&_0x4ba214[_0x4798c0(0x21f)]('click',_0xfb1865=>{const _0x286e55=_0x4798c0;_0xfb1865[_0x286e55(0x136)]===_0x4ba214&&closeHighlightModal();});const _0x16f619=document['getElementById']('highlight-video-id');_0x16f619&&_0x16f619['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x3931da=a4_0x5c849d;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x532a53=document[_0x3931da(0xfc)]('matches-prev-page'),_0x42b283=document['getElementById']('matches-next-page');_0x532a53&&_0x532a53['addEventListener'](_0x3931da(0x1bc),()=>{const _0x283a6d=_0x3931da,_0x3ee437=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x3ee437][_0x283a6d(0x9a)]-0x1);});_0x42b283&&_0x42b283['addEventListener']('click',()=>{const _0x5a6932=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x5a6932]['page']+0x1);});const _0x1ded86=document['getElementById']('apply-matches-filters'),_0x197468=document[_0x3931da(0xfc)]('reset-matches-filters');_0x1ded86&&_0x1ded86['addEventListener'](_0x3931da(0x1bc),applyMatchesFilters);_0x197468&&_0x197468['addEventListener']('click',resetMatchesFilters);const _0x11ad50=document['getElementById'](_0x3931da(0xe9));_0x11ad50&&_0x11ad50['addEventListener'](_0x3931da(0x25d),debounce(filterMatchesTable,0x12c));const _0x3f821f=document['getElementById']('resimulate-match-btn');_0x3f821f&&_0x3f821f[_0x3931da(0x21f)](_0x3931da(0x1bc),openResimulateModal);const _0x46b618=document['getElementById']('resimulate-modal');if(_0x46b618){const _0x35a2aa=_0x46b618['querySelector']('.close');_0x35a2aa&&_0x35a2aa[_0x3931da(0x21f)]('click',closeResimulateModal),_0x46b618['addEventListener']('click',_0x44a94d=>{_0x44a94d['target']===_0x46b618&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x569d3f=a4_0x5c849d;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x2b83d4=document[_0x569d3f(0xfc)]('create-test-match-modal'),_0x131a0e=document['getElementById']('create-test-match-form');if(!_0x2b83d4){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification(_0x569d3f(0x226),_0x569d3f(0x135));return;}if(!_0x131a0e){console[_0x569d3f(0x135)]('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x131a0e[_0x569d3f(0x2a7)]();const _0x17ad00=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x22d385=![];_0x17ad00[_0x569d3f(0x1a9)](_0x2b1af8=>{const _0x149389=_0x569d3f;console['log']('Found\x20radio\x20with\x20value:',_0x2b1af8[_0x149389(0x176)]),_0x2b1af8['value']===currentLadder&&(_0x2b1af8['checked']=!![],_0x22d385=!![],console[_0x149389(0xdf)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x22d385){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x2dab94=document[_0x569d3f(0x240)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x2dab94&&(_0x2dab94['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x46b78e=document['getElementById']('test-match-date');if(_0x46b78e){const _0x476b4e=new Date()[_0x569d3f(0x1c6)]()['split']('T')[0x0];_0x46b78e['value']=_0x476b4e;}_0x2b83d4['style'][_0x569d3f(0x1c4)]='flex',_0x2b83d4['style']['visibility']='visible',_0x2b83d4[_0x569d3f(0x2d9)]['opacity']='1',_0x2b83d4['classList']['add']('active'),console[_0x569d3f(0xdf)]('Modal\x20should\x20now\x20be\x20visible');const _0xb80094=document['getElementById']('test-match-winner-username');_0xb80094&&setTimeout(()=>{const _0x2df7f1=_0x569d3f;_0xb80094[_0x2df7f1(0xc7)]();},0x64);}function a4_0x5a01(){const _0x1700ec=['\x20for\x20points\x20initialization','replaceChild','username','\x20Missing','Emerald','edit-elo','selected-user-id','previousElo','achievementPlayer','page','manage-trophies','points-user-search','Failed\x20to\x20award\x20item:\x20','querySelectorAll','rank-distribution-chart','match-count','add-ribbon-form','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','d2-next-page','highlight-achievement-type-container','mapCreator','trophy-image-url','lastMatch','innerHTML','quick-edit-display-name','Error\x20creating\x20activity\x20chart:','points-action','Positions\x20updated:\x20Winner\x20','desc','button[type=\x22submit\x22]','roleAssignedBy','Form\x20elements\x20are\x20missing','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Manage\x20Ribbons\x20section\x20initialized','trophy-preview-img','includes','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','non-participants','points','manage-players','Displaying\x20','Found\x20specific\x20role:\x20','\x20(based\x20on\x20data-role:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','mapPlayed','Failed\x20to\x20save\x20article:\x20','Error\x20checking\x20','reset-history-filters','visibility','timestamp','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','highlight-video-preview','Page\x20','add-player-form','focus','create-new-trophy-btn','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','demote-ladder','role-filter','removeEventListener','Test\x20match','currentUser','save-player-btn','\x20<span\x20class=\x22user-source\x22>(','test','userProfiles','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','Error\x20loading\x20points\x20data:','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','fromDate','backgroundColor','Error\x20loading\x20points\x20overview:','all','none','RejectedD3','eloHistory','submittedBy','inactive-players','log','highlight-match-link-container','commit','matchLink','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','Error\x20fetching\x20matches\x20for\x20','loserComment','edit-highlight-playerProfileUrl-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','get','matches-search','Failed\x20to\x20load\x20article\x20data',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','set','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','.nav-item','Error\x20updating\x20points:','\x20with\x20email\x20','pending-count','low-points','highly-inactive','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','filter','#C0C0C0','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20trophy\x20definitions:','common','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','getElementById','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','sort','Error\x20setting\x20custom\x20ELO:','length','Failed\x20to\x20find\x20match:\x20','Player\x20Achievement','active','MAX_SAFE_INTEGER','doughnut','Error\x20saving\x20article:','activity','\x20ladder','.no-results','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','Setting\x20up\x20Manage\x20Ribbons\x20section','dashboard','add-new-role-btn','player-search','\x20in\x20all\x20collections...','resimulate-match-id','</td></tr>','highlight-video-id','sendPromotionNotification','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','achievementDetails','.type','#e0e0e0','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','Error\x20removing\x20ribbon','ribbon-target-ladder','destroy','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','Toggling\x20fields\x20for\x20highlight\x20type:\x20','article-id','winnerName','edit-match-title','cancel-role-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x20section','ref','Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!','adminEmail','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','edit-match-modal','points-reason','email','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','highlights','manage-highlights','Error\x20loading\x20ribbons\x20data','Error\x20creating\x20rank\x20distribution\x20chart:','Error\x20deleting\x20player:','#users-table-body\x20tr[data-username=\x22','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20','edit-match-map','error','target','div','highlight-winner-score','Demoting\x20player\x20to\x20','RejectedD1','mapName','loserUsername','Table\x20row\x20for\x20user\x20','loserScore','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','Error\x20searching\x20users:','Load\x20matches\x20data\x20clicked','inactive-days-filter','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','Admin\x20Adjustment','Failed\x20to\x20load\x20match\x20data','Successfully\x20demoted\x20','checked','demote-player-btn','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','Error\x20deleting\x20article:','user-roles-section','Error\x20loading\x20articles:','manage-matches','Player\x20\x22','achievement','edit-highlight-map-input','Monday','roleAssignedAt','Error\x20setting\x20up\x20admin\x20dashboard','fa-check-circle','cloneNode','visible','#d32f2f','Using\x20collections\x20for\x20','Highlight\x20deleted\x20successfully','highlight-video-preview-container','error-state','player-count','match-details-container','Error\x20awarding\x20item:','modify-points-form','update','.section-header','\x20Exists','\x20already\x20exists\x20in\x20','set-elo-ladder','lastVisible','matchDate','create-new-article-btn','Starting\x20complete\x20match\x20resimulation...','role','\x20ladder,\x20page\x20','playersD3','toLocaleString','toLowerCase','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','Edit\x20match\x20clicked:','.view-player-btn','highlight-achievement-type','trophy-rarity','videoId','#create-test-match-form','body','value','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','quick-edit-points-modal','success','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','eloHistoryD2','trophy-image-preview','loserName','setHours','highlight-submitted-by-container','load-elo-history-data','Error\x20removing\x20ribbon:','Error\x20saving\x20trophy:','eloRating','points-sort-order','constructor','#matches-table-body\x20tr','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','highlight-loser-name','match','level','highlight-map','),\x20','Load\x20articles\x20data\x20clicked','uid','playersD2','src','YouTube\x20Video\x20ID*','map','Set\x20to\x20','ribbon-target-user','appendChild','displayName','edit-losses','find','\x20ladder!','change','Player\x20Name\x20is\x20required','highlight-achievement-player','onAuthStateChanged',').\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','Error\x20saving\x20highlight:','Please\x20fill\x20all\x20fields','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Found\x20','\x20vs\x20','Error\x20searching\x20for\x20user','approvedMatchesD2','highlight-id','forEach','Player\x20not\x20found\x20in\x20','join','\x20-\x20Feature\x20coming\x20soon','demote-modal','set-role-modal','split','No\x20player\x20selected','\x20users...','message','cancel-promote-btn','name-desc','assign-trophy-title','https://www.youtube.com/embed/','openResimulateModal','source','parentNode','\x20Weekly\x20Activity','no-results-message','click','type','highlight-map-version-container','currentTarget','getDate','articles','achievementImageUrl','Error:\x20','display','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','toISOString','Error\x20initializing\x20dashboard:','exists','marginBottom','Adding\x20\x22active\x22\x20class\x20to\x20modal.','\x20from\x20','seconds','set-elo-value','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','highlight-match-info-container','\x20users.\x20','Error\x20loading\x20highlights:','Found\x20player\x20with\x20current\x20ELO:\x20','Error\x20loading\x20ELO\x20history:','Points\x20data\x20loaded\x20successfully','docs','.admin-section','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','\x20quick\x20edit\x20buttons','All\x20fields\x20are\x20required','name','Unknown','trophy-id','empty-state','Error\x20updating\x20player:','Error\x20demoting\x20player:','Error\x20loading\x20trophies:','afterend','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','YouTube\x20Video\x20ID\x20(Optional)','edit-match-winner-suicides','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','approvedAt','Error\x20demoting\x20player:\x20','createdAt','manage-articles','edit-match-winner-score','Failed\x20to\x20modify\x20points:\x20','quick-edit-user-id','trim','cancel-trophy-btn','No\x20reason\x20provided','edit-highlight-videoId-input','.edit-match-btn','award-reason','new-player-username','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','trophy-name','closest','Highlight','user-search-results','\x20points','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','trophy-form','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','.assign-trophy-btn','promotion','Role\x20\x22','.edit-highlight-btn','\x20in\x20','assign-trophy-modal','Error\x20loading\x20ribbons:','author','Error\x20loading\x20players:','win','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22','Looking\x20for\x20user\x20role\x20information\x20for\x20','Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','Map\x20Creator\x20is\x20required','negative-change','contains','Achievement','toLocaleDateString','load-inactive-players-data','opponent','Silver','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','creatorImageUrl','points-asc','Please\x20enter\x20valid\x20username\x20and\x20ELO','Adding\x20player\x20','Subtracted\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Points\x20updated\x20successfully','position','promote-player-btn','./promotions.js','addEventListener','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','Loading\x20dashboard\x20overview\x20data...','delete-match-confirm-modal','#000000','getRankName','notification\x20','Create\x20test\x20match\x20modal\x20not\x20found','newPoints','highlight-map-creator-container','-page-indicator','Article\x20updated\x20successfully','toString','nonParticipants','push','Highlight\x20added\x20successfully!','winnerScore','resimulation','loading','users-table-body','playerId','location','#users-table-body\x20tr','admin','.delete-highlight-btn','No\x20email','rejected-count','keypress','5px','\x20collection...','highlight-achievement-player-container','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','action','querySelector','User\x20\x22','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','Sunday','edit-highlight-description-input','\x20ELO\x20history\x20entries.\x20','dataset','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','achievement-type','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','\x20Level\x20','rgba(211,\x2047,\x2047,\x200.7)','highlight-match-date','highlight-submitted-by','demotedBy','NonParticipant','#cancel-create-test-match-btn','date','ribbon-level','pointsHistory','edit-player-modal','achievementType','matchId','classList','playerRibbonsD3','edit-match-loser-demo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','input','Role\x20select\x20set\x20to:\x20','Match\x20Highlight','rankDistribution','Create\x20Article','newElo','closeResimulateModal','manage-ribbons','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','winnerUsername','\x20users','.sidebar-nav\x20.nav-item[data-section=\x22','border','createElement','block','No\x20users\x20needed\x20points\x20field\x20initialization','manage-points','warn','settings','data-ladder','sources','Edit\x20','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','Error\x20initializing\x20admin\x20dashboard:','Error\x20creating\x20simple\x20test\x20match:','elo','Error\x20saving\x20highlight:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','exception','Dashboard\x20data\x20loaded\x20successfully','\x20by\x20UID:','load-highlights-data','approvedMatchesD3','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','roleName','creator','admin_modification','demotion','Modal\x20closed','Match\x20updated\x20successfully','highlight-achievement-details','highlight-player-profile','empty','Gold','Friday','daysSinceMatch','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','endDate','then','D3\x20Players','history-start-date','Created\x20','className','Modal\x20element\x20found:','article-form','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','.ladder-switch\x20input','add','Loading...','Simple\x20test\x20match\x20created\x20by\x20admin\x20','wins','Unknown\x20User','highlight-achievement-image','Failed\x20to\x20save\x20trophy:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','Failed\x20to\x20send\x20Discord\x20notification:','matches-end-date','lastUpdated','playerRibbons','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','Quick\x20edit\x20form\x20submitted','validation-results-container','20px','assign-trophy-name','reset','create-match-highlight-btn','points-history-table-body','highlight-description','loserDemoLink','Found\x20user\x20in\x20','size','allUsersPoints','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','Page\x201','info','No\x20user\x20ID\x20found\x20on\x20button','highlight-match-date-container','Promotion','playerProfileUrl','highlight-modal','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','keys','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','submit','title','paste','Failed\x20to\x20load\x20points\x20data:\x20','rarity','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','demote-username','manage-ranks','preventDefault','Failed\x20to\x20delete\x20trophy:\x20','trophyDefinitions','required','Highlight\x20not\x20found','Matches\x20action\x20buttons\x20setup\x20complete','.close-notification','remove','disabled','edit-username','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','loss','textContent','highlight-creator-image-container','N/A','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','highlight-match-link','#1976d2','data','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20','style','demote-form','View\x20player\x20details\x20for\x20','Please\x20enter\x20a\x20username','matches-prev-page','apply','edit-highlight-achievementPlayer-input','players','User\x20not\x20found','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','description','Match\x20ID\x20or\x20ladder\x20missing','Failed\x20to\x20update\x20points:\x20','Trophy\x20not\x20found','catch','Switched\x20to\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','Error\x20assigning\x20trophy:','userId'];a4_0x5a01=function(){return _0x1700ec;};return a4_0x5a01();}function closeCreateTestMatchModal(){const _0x4377e9=a4_0x5c849d;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x159fed=document['getElementById']('create-test-match-modal');if(!_0x159fed){console['error'](_0x4377e9(0x1f4));return;}_0x159fed['classList']['remove'](_0x4377e9(0x103)),_0x159fed['style']['opacity']='0',_0x159fed['style']['visibility']='hidden',setTimeout(()=>{const _0x43adf1=_0x4377e9;!_0x159fed['classList']['contains'](_0x43adf1(0x103))&&(_0x159fed[_0x43adf1(0x2d9)]['display']='none');},0x12c),console[_0x4377e9(0xdf)](_0x4377e9(0x283));}async function createTestMatch(){const _0x481bd8=a4_0x5c849d;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x17ca1f=auth['currentUser'];if(!_0x17ca1f){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x44d2f5='D1',_0x2ee963='approvedMatches',_0x449d5a={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x481bd8(0xcd),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x17ca1f['email'],'createdAt':serverTimestamp(),'createdBy':_0x17ca1f['email'],'isTestMatch':!![],'ladder':_0x44d2f5,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x481bd8(0x298)+_0x17ca1f['email']};console[_0x481bd8(0xdf)]('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x2ee963),_0x449d5a),showNotification('Simple\x20test\x20match\x20created\x20successfully',_0x481bd8(0x17a)),closeCreateTestMatchModal();}catch(_0x479a0a){console['error'](_0x481bd8(0x275),_0x479a0a),showNotification(_0x481bd8(0x12c)+_0x479a0a[_0x481bd8(0x1b2)],'error');}}window['testFirebaseConnection']=async function(){const _0x5f4d7c=a4_0x5c849d;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console['log']('DB:',db),console['log']('Current\x20user:',auth[_0x5f4d7c(0xce)]);const _0x55976b=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x55976b);const _0x22f69a=query(_0x55976b,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x22f69a);const _0x2297a0=await getDocs(_0x22f69a);console['log']('Query\x20executed.\x20Empty:',_0x2297a0['empty']),console[_0x5f4d7c(0xdf)]('Firebase\x20connection\x20test\x20successful!');}catch(_0x4f4e74){console[_0x5f4d7c(0x135)]('Firebase\x20connection\x20test\x20failed:',_0x4f4e74);}};function setupCreateTestMatchButton(){const _0x1cc20b=a4_0x5c849d,_0x15da81=document[_0x1cc20b(0xfc)]('create-test-match-btn');if(!_0x15da81){console[_0x1cc20b(0x135)]('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0xb14c01=_0x15da81[_0x1cc20b(0x155)](!![]);_0x15da81[_0x1cc20b(0x1b9)]['replaceChild'](_0xb14c01,_0x15da81),_0xb14c01['addEventListener']('click',function(_0x434074){const _0x40799e=_0x1cc20b;_0x434074[_0x40799e(0x2c4)](),_0x434074['stopPropagation'](),console[_0x40799e(0xdf)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0x1cc20b(0xdf)]('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x3c3a3c=0x1){const _0x1d8e8a=a4_0x5c849d,_0x339c3e=document['getElementById']('matches-table-body');if(!_0x339c3e)return;_0x339c3e[_0x1d8e8a(0xa8)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x41e1de=currentLadder['toLowerCase'](),_0x43b48a=matchesPagination[_0x41e1de],_0x2db5e9=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x1d8e8a(0x1a7):_0x1d8e8a(0x27d),_0x49e55b=collection(db,_0x2db5e9);_0x3c3a3c<=0x1?(_0x43b48a['page']=0x1,_0x43b48a['firstVisible']=null,_0x43b48a['lastVisible']=null):_0x43b48a['page']=_0x3c3a3c;const _0xb417c0=getMatchesFilters();let _0x244a13=_0x49e55b;if(_0xb417c0['startDate']||_0xb417c0[_0x1d8e8a(0x28c)]||_0xb417c0['searchTerm']){let _0x4b39be=[];_0xb417c0['startDate']&&_0xb417c0['endDate']?(_0x4b39be['push'](where(_0x1d8e8a(0x1e6),'>=',_0xb417c0['startDate']),where(_0x1d8e8a(0x1e6),'<=',_0xb417c0['endDate'])),_0x244a13=query(_0x49e55b,..._0x4b39be)):_0x244a13=query(_0x49e55b,orderBy(_0x1d8e8a(0x1e6),'desc'));}else _0x244a13=query(_0x49e55b,orderBy(_0x1d8e8a(0x1e6),'desc'));_0x3c3a3c>0x1&&_0x43b48a[_0x1d8e8a(0x165)]?_0x244a13=query(_0x244a13,startAfter(_0x43b48a['lastVisible']),limit(PAGE_SIZE)):_0x244a13=query(_0x244a13,limit(PAGE_SIZE));const _0x4da4ef=await getDocs(_0x244a13);!_0x4da4ef['empty']&&(_0x43b48a['firstVisible']=_0x4da4ef['docs'][0x0],_0x43b48a['lastVisible']=_0x4da4ef['docs'][_0x4da4ef['docs'][_0x1d8e8a(0x100)]-0x1]);let _0x4eee97=![];if(!_0x4da4ef['empty']){const _0xfcf982=query(_0x244a13,startAfter(_0x43b48a[_0x1d8e8a(0x165)]),limit(0x1)),_0x4fab3a=await getDocs(_0xfcf982);_0x4eee97=!_0x4fab3a[_0x1d8e8a(0x287)];}const _0x4bb1d6=document['getElementById'](_0x1d8e8a(0x2dd)),_0x3bf940=document['getElementById']('matches-next-page'),_0x351624=document['getElementById']('matches-page-indicator');if(_0x4bb1d6)_0x4bb1d6[_0x1d8e8a(0x2cc)]=_0x43b48a['page']<=0x1;if(_0x3bf940)_0x3bf940['disabled']=!_0x4eee97;if(_0x351624)_0x351624['textContent']=_0x1d8e8a(0xc5)+_0x43b48a['page'];if(_0x4da4ef[_0x1d8e8a(0x287)]){_0x339c3e['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x339c3e['innerHTML']='',_0x4da4ef['forEach'](_0x5cf665=>{const _0xeee12d=_0x1d8e8a,_0x36f784=_0x5cf665[_0xeee12d(0x2d7)](),_0x26452d=document['createElement']('tr'),_0x5d866b=_0x36f784['approvedAt']?new Date(_0x36f784[_0xeee12d(0x1e6)]['seconds']*0x3e8)['toLocaleDateString']():_0xeee12d(0x2d3);_0x26452d['setAttribute']('data-id',_0x5cf665['id']),_0x26452d['setAttribute']('data-ladder',currentLadder),_0x26452d['classList']['add']('match-row'),_0x26452d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5d866b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x36f784['winnerUsername']||'Unknown')+_0xeee12d(0xb5)+(_0x36f784[_0xeee12d(0x13c)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x36f784['winnerScore']||0x0)+'\x20-\x20'+(_0x36f784[_0xeee12d(0x13e)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x36f784[_0xeee12d(0xbd)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x5cf665['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x5cf665['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x339c3e[_0xeee12d(0x196)](_0x26452d);}),setupMatchesActionButtons(),_0xb417c0['searchTerm']&&filterMatchesTable(),console[_0x1d8e8a(0xdf)]('Loaded\x20'+_0x4da4ef['size']+'\x20matches\x20for\x20'+currentLadder+_0x1d8e8a(0x16a)+_0x43b48a[_0x1d8e8a(0x9a)]);}catch(_0x2387e5){console[_0x1d8e8a(0x135)]('Error\x20loading\x20matches:',_0x2387e5),_0x339c3e['innerHTML']=_0x1d8e8a(0x27e)+_0x2387e5[_0x1d8e8a(0x1b2)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x71d74c,_0x1180ea){const _0x41974a=a4_0x5c849d;try{console['log']('Deleting\x20match\x20'+_0x71d74c+'\x20from\x20'+_0x1180ea+'\x20ladder');const _0x15dc24=auth[_0x41974a(0xce)];if(!_0x15dc24){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x5d4c12=_0x1180ea==='D1'?'approvedMatches':_0x1180ea==='D2'?'approvedMatchesD2':'approvedMatchesD3';console[_0x41974a(0xdf)]('Using\x20collection:\x20'+_0x5d4c12),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x5d4c12,_0x71d74c)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x41cf3a=_0x1180ea['toLowerCase']();loadMatchesData(matchesPagination[_0x41cf3a]['page']);}catch(_0x22f510){console['error']('Error\x20deleting\x20match:',_0x22f510),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x22f510['message'],'error');}}function setupMatchesActionButtons(){const _0x39bf7f=a4_0x5c849d;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll'](_0x39bf7f(0x1f1))['forEach'](_0x10ce79=>{const _0x82fc1a=_0x39bf7f;_0x10ce79[_0x82fc1a(0x21f)]('click',_0x58216c=>{const _0xb20353=_0x82fc1a;_0x58216c['preventDefault'](),_0x58216c['stopPropagation']();const _0x2354c0=_0x58216c['currentTarget']['dataset']['id'],_0x31a056=_0x58216c['currentTarget']['closest']('tr'),_0x15fd32=_0x31a056['dataset']['ladder'];console['log'](_0xb20353(0x16f),_0x2354c0,_0x15fd32),openEditMatchModal(_0x2354c0,_0x15fd32);});}),document['querySelectorAll']('.delete-match-btn')[_0x39bf7f(0x1a9)](_0x10bcb7=>{const _0x3f3028=_0x39bf7f;_0x10bcb7['addEventListener'](_0x3f3028(0x1bc),_0x4edea7=>{const _0x3ca851=_0x3f3028;_0x4edea7['preventDefault'](),_0x4edea7['stopPropagation']();const _0x5571fc=_0x4edea7['currentTarget']['dataset']['id'],_0x17af17=_0x4edea7['currentTarget'][_0x3ca851(0x1f7)]('tr'),_0x4c0b62=_0x17af17[_0x3ca851(0x246)]['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x5571fc,_0x4c0b62),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x5571fc,_0x4c0b62);});}),console[_0x39bf7f(0xdf)](_0x39bf7f(0x2c9));}function filterMatchesTable(){const _0x5483f2=a4_0x5c849d,_0x57efb0=document['getElementById'](_0x5483f2(0xe9))['value']['toLowerCase'](),_0xa118df=document['querySelectorAll'](_0x5483f2(0x187));let _0x22398e=0x0;_0xa118df[_0x5483f2(0x1a9)](_0x4e3c71=>{const _0x3ac998=_0x5483f2;if(_0x4e3c71['classList'][_0x3ac998(0x20e)]('loading-cell')||_0x4e3c71['classList']['contains'](_0x3ac998(0x1dd))||_0x4e3c71[_0x3ac998(0x258)]['contains'](_0x3ac998(0x15b)))return;const _0x4f23d3=_0x4e3c71['cells'][0x1]['textContent'][_0x3ac998(0x16d)](),_0xab2b73=_0x4e3c71['cells'][0x2]['textContent']['toLowerCase'](),_0x129d3d=_0x4e3c71['cells'][0x4]['textContent'][_0x3ac998(0x16d)]();_0x4f23d3[_0x3ac998(0xb4)](_0x57efb0)||_0xab2b73['includes'](_0x57efb0)||_0x129d3d['includes'](_0x57efb0)?(_0x4e3c71[_0x3ac998(0x2d9)][_0x3ac998(0x1c4)]='',_0x22398e++):_0x4e3c71['style'][_0x3ac998(0x1c4)]='none';});if(_0x22398e===0x0&&_0xa118df['length']>0x0){const _0x1a8222=document['getElementById']('matches-table-body'),_0x35d2d8=_0x1a8222[_0x5483f2(0x240)](_0x5483f2(0x109));if(!_0x35d2d8){const _0x1bbffc=document[_0x5483f2(0x26a)]('tr');_0x1bbffc['className']='no-results',_0x1bbffc[_0x5483f2(0xa8)]=_0x5483f2(0x188)+_0x57efb0+'\x27</td>',_0x1a8222['appendChild'](_0x1bbffc);}}else{const _0x199c80=document['querySelector']('.no-results');_0x199c80&&_0x199c80['remove']();}}function getMatchesFilters(){const _0x21b257=a4_0x5c849d,_0x37a9fd=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x2e7c61=document['getElementById']('matches-start-date')['value'],_0x43dfd3=document[_0x21b257(0xfc)](_0x21b257(0x29f))['value'];let _0x49e437=null,_0x1c4775=null;return _0x2e7c61&&(_0x49e437=new Date(_0x2e7c61),_0x49e437[_0x21b257(0x17f)](0x0,0x0,0x0,0x0),_0x49e437=Timestamp[_0x21b257(0xd6)](_0x49e437)),_0x43dfd3&&(_0x1c4775=new Date(_0x43dfd3),_0x1c4775['setHours'](0x17,0x3b,0x3b,0x3e7),_0x1c4775=Timestamp['fromDate'](_0x1c4775)),{'searchTerm':_0x37a9fd,'startDate':_0x49e437,'endDate':_0x1c4775};}async function applyMatchesFilters(){const _0x2d8000=currentLadder['toLowerCase']();matchesPagination[_0x2d8000]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x1cd696=a4_0x5c849d;document['getElementById']('matches-start-date')[_0x1cd696(0x176)]='',document['getElementById'](_0x1cd696(0x29f))[_0x1cd696(0x176)]='',document['getElementById']('matches-search')[_0x1cd696(0x176)]='';const _0x3cdcd3=currentLadder['toLowerCase']();matchesPagination[_0x3cdcd3]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x1318a4,_0x45bc72){const _0x183b4f=a4_0x5c849d,_0x4af518=document[_0x183b4f(0xfc)]('edit-match-modal');if(!_0x4af518)return;try{const _0x4c1ad1=_0x45bc72==='D1'?'approvedMatches':_0x45bc72==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x564506=doc(db,_0x4c1ad1,_0x1318a4),_0x5a9870=await getDoc(_0x564506);if(!_0x5a9870['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x10903a=_0x5a9870['data']();document['getElementById']('edit-match-id')[_0x183b4f(0x176)]=_0x1318a4,document['getElementById']('edit-match-ladder')['value']=_0x45bc72,document['getElementById']('edit-match-winner')[_0x183b4f(0x176)]=_0x10903a[_0x183b4f(0x266)]||'',document['getElementById'](_0x183b4f(0x1ea))['value']=_0x10903a['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')[_0x183b4f(0x176)]=_0x10903a['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')[_0x183b4f(0x176)]=_0x10903a['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x10903a['loserUsername']||'',document['getElementById']('edit-match-loser-score')['value']=_0x10903a[_0x183b4f(0x13e)]||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0x10903a['loserSuicides']||0x0,document['getElementById']('edit-match-loser-comment')[_0x183b4f(0x176)]=_0x10903a[_0x183b4f(0xe5)]||'',document['getElementById']('edit-match-map')['value']=_0x10903a[_0x183b4f(0xbd)]||'',document['getElementById']('edit-match-winner-demo')[_0x183b4f(0x176)]=_0x10903a['winnerDemoLink']||'',document[_0x183b4f(0xfc)]('edit-match-loser-demo')['value']=_0x10903a[_0x183b4f(0x2ab)]||_0x10903a['demoLink']||'',document['getElementById'](_0x183b4f(0x121))[_0x183b4f(0x2d1)]='Edit\x20Match:\x20'+_0x10903a['winnerUsername']+'\x20vs\x20'+_0x10903a['loserUsername'],_0x4af518['classList']['add']('active');}catch(_0x2ea248){console[_0x183b4f(0x135)]('Error\x20loading\x20match\x20data:',_0x2ea248),showNotification(_0x183b4f(0x145),'error');}}function closeEditMatchModal(){const _0x2f9209=a4_0x5c849d,_0x4facd8=document[_0x2f9209(0xfc)](_0x2f9209(0x129));_0x4facd8&&_0x4facd8['classList']['remove'](_0x2f9209(0x103));}async function saveEditedMatch(){const _0xe7cf44=a4_0x5c849d;try{const _0xb37a64=document['getElementById']('edit-match-id')['value'],_0x37d6e3=document['getElementById']('edit-match-ladder')[_0xe7cf44(0x176)];if(!_0xb37a64||!_0x37d6e3){showNotification(_0xe7cf44(0x2e4),'error');return;}const _0x212b5c=_0x37d6e3==='D1'?'approvedMatches':_0x37d6e3==='D2'?'approvedMatchesD2':_0xe7cf44(0x27d),_0x43d51d=document['getElementById']('edit-match-winner')['value']['trim'](),_0x38edff=parseInt(document[_0xe7cf44(0xfc)]('edit-match-winner-score')['value']),_0x4e510a=parseInt(document['getElementById'](_0xe7cf44(0x1e4))['value']),_0x99b4c8=document['getElementById']('edit-match-winner-comment')['value']['trim'](),_0x1658f9=document['getElementById']('edit-match-loser')['value']['trim'](),_0x45720e=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x216750=parseInt(document[_0xe7cf44(0xfc)]('edit-match-loser-suicides')['value']),_0x38f96a=document['getElementById']('edit-match-loser-comment')['value'][_0xe7cf44(0x1ed)](),_0x57fefb=document[_0xe7cf44(0xfc)](_0xe7cf44(0x134))[_0xe7cf44(0x176)]['trim'](),_0xbb4a3a=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x1b4dee=document['getElementById'](_0xe7cf44(0x25a))['value'][_0xe7cf44(0x1ed)]();if(!_0x43d51d||!_0x1658f9){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required',_0xe7cf44(0x135));return;}await updateDoc(doc(db,_0x212b5c,_0xb37a64),{'winnerUsername':_0x43d51d,'winnerScore':_0x38edff,'winnerSuicides':_0x4e510a,'winnerComment':_0x99b4c8,'loserUsername':_0x1658f9,'loserScore':_0x45720e,'loserSuicides':_0x216750,'loserComment':_0x38f96a,'mapPlayed':_0x57fefb,'winnerDemoLink':_0xbb4a3a||null,'loserDemoLink':_0x1b4dee||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification(_0xe7cf44(0x284),'success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x37d6e3['toLowerCase']()]['page']);}catch(_0x190a83){console['error']('Error\x20saving\x20match:',_0x190a83),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x190a83['message'],'error');}}async function openDeleteMatchModal(_0x55608e,_0x4956da){const _0x4ffb2b=a4_0x5c849d;try{const _0x3eae05=_0x4956da==='D1'?'approvedMatches':_0x4956da==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x544fc5=doc(db,_0x3eae05,_0x55608e),_0x2a8344=await getDoc(_0x544fc5);if(!_0x2a8344['exists']()){showNotification('Match\x20not\x20found',_0x4ffb2b(0x135));return;}const _0x1be53c=_0x2a8344['data'](),_0xe07d1=document['getElementById']('delete-match-confirm-modal');_0xe07d1['dataset'][_0x4ffb2b(0x257)]=_0x55608e,_0xe07d1['dataset']['ladder']=_0x4956da;const _0x1b7a40=_0x1be53c[_0x4ffb2b(0x1e6)]?new Date(_0x1be53c[_0x4ffb2b(0x1e6)]['seconds']*0x3e8)[_0x4ffb2b(0x210)]():'N/A',_0x740e65=document['getElementById']('delete-match-summary');_0x740e65[_0x4ffb2b(0xa8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x1b7a40+_0x4ffb2b(0x2b8)+_0x1be53c['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x1be53c[_0x4ffb2b(0x13c)]+_0x4ffb2b(0x20b)+(_0x1be53c[_0x4ffb2b(0x22f)]||0x0)+'\x20-\x20'+(_0x1be53c['loserScore']||0x0)+_0x4ffb2b(0x1d7)+(_0x1be53c[_0x4ffb2b(0xbd)]||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x4956da+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xe07d1['classList']['add'](_0x4ffb2b(0x103));}catch(_0x3c25c3){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x3c25c3),showNotification('Failed\x20to\x20load\x20match\x20data',_0x4ffb2b(0x135));}}function closeDeleteMatchModal(){const _0x1f4475=a4_0x5c849d,_0x3d80ea=document['getElementById']('delete-match-confirm-modal');_0x3d80ea&&(_0x3d80ea[_0x1f4475(0x258)]['remove'](_0x1f4475(0x103)),_0x3d80ea['removeAttribute']('data-match-id'),_0x3d80ea['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x4218ed=a4_0x5c849d,_0x1c90ff=document[_0x4218ed(0xfc)](_0x4218ed(0x222)),_0x123e7d=_0x1c90ff['dataset'][_0x4218ed(0x257)],_0x4e88cd=_0x1c90ff['dataset']['ladder'];if(!_0x123e7d||!_0x4e88cd){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x4218ed(0x135)),closeDeleteMatchModal();return;}try{const _0x9a047b=_0x4e88cd==='D1'?'approvedMatches':_0x4e88cd==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x9a047b,_0x123e7d)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x4e88cd['toLowerCase']()]['page']);}catch(_0x7fe127){console['error']('Error\x20deleting\x20match:',_0x7fe127),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x7fe127['message'],'error');}}async function saveHighlightChanges(){const _0x49aeb0=a4_0x5c849d,_0x31adb0=document['getElementById']('edit-highlight-id')['value'],_0x28c78c=document['getElementById']('edit-highlight-type-select')[_0x49aeb0(0x176)];let _0x2f3f5b={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x28c78c,'description':document[_0x49aeb0(0xfc)](_0x49aeb0(0x244))['value']['trim'](),'videoId':document['getElementById'](_0x49aeb0(0x1f0))['value'][_0x49aeb0(0x1ed)](),'submittedBy':auth['currentUser'][_0x49aeb0(0x12b)]};if(_0x28c78c===_0x49aeb0(0x18a)){_0x2f3f5b['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')[_0x49aeb0(0x176)]['trim'](),_0x2f3f5b['map']=document['getElementById'](_0x49aeb0(0x150))['value'][_0x49aeb0(0x1ed)]();const _0xafcf9b=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x2f3f5b['matchDate']=_0xafcf9b?Timestamp[_0x49aeb0(0xd6)](new Date(_0xafcf9b)):null,_0x2f3f5b[_0x49aeb0(0x120)]=document[_0x49aeb0(0xfc)]('edit-highlight-winnerName-input')['value']['trim'](),_0x2f3f5b['winnerScore']=document['getElementById']('edit-highlight-winnerScore-input')[_0x49aeb0(0x176)]['trim'](),_0x2f3f5b['loserName']=document['getElementById']('edit-highlight-loserName-input')['value']['trim'](),_0x2f3f5b[_0x49aeb0(0x13e)]=document[_0x49aeb0(0xfc)]('edit-highlight-loserScore-input')[_0x49aeb0(0x176)][_0x49aeb0(0x1ed)](),_0x2f3f5b['matchLink']=document[_0x49aeb0(0xfc)]('edit-highlight-matchLink-input')[_0x49aeb0(0x176)][_0x49aeb0(0x1ed)](),_0x2f3f5b['mapCreator']=null,_0x2f3f5b['mapVersion']=null,_0x2f3f5b['creatorImageUrl']=null,_0x2f3f5b['achievementPlayer']=null,_0x2f3f5b['achievementType']=null,_0x2f3f5b['achievementDetails']=null,_0x2f3f5b['playerProfileUrl']=null;}else{if(_0x28c78c===_0x49aeb0(0x280))_0x2f3f5b['map']=document[_0x49aeb0(0xfc)]('edit-highlight-map-input')['value']['trim'](),_0x2f3f5b['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value'][_0x49aeb0(0x1ed)](),_0x2f3f5b['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value']['trim'](),_0x2f3f5b[_0x49aeb0(0x215)]=document['getElementById']('edit-highlight-creatorImageUrl-input')[_0x49aeb0(0x176)]['trim'](),_0x2f3f5b['matchInfo']=null,_0x2f3f5b['matchDate']=null,_0x2f3f5b['winnerName']=null,_0x2f3f5b['winnerScore']=null,_0x2f3f5b['loserName']=null,_0x2f3f5b['loserScore']=null,_0x2f3f5b['matchLink']=null,_0x2f3f5b['achievementPlayer']=null,_0x2f3f5b[_0x49aeb0(0x256)]=null,_0x2f3f5b[_0x49aeb0(0x116)]=null,_0x2f3f5b['playerProfileUrl']=null;else _0x28c78c==='achievement'&&(_0x2f3f5b['achievementPlayer']=document['getElementById'](_0x49aeb0(0x2df))['value']['trim'](),_0x2f3f5b[_0x49aeb0(0x256)]=document['getElementById']('edit-highlight-achievementType-input')['value'][_0x49aeb0(0x1ed)](),_0x2f3f5b['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')['value']['trim'](),_0x2f3f5b['playerProfileUrl']=document[_0x49aeb0(0xfc)](_0x49aeb0(0xe6))['value']['trim'](),_0x2f3f5b['matchInfo']=null,_0x2f3f5b['map']=null,_0x2f3f5b[_0x49aeb0(0x166)]=null,_0x2f3f5b['winnerName']=null,_0x2f3f5b['winnerScore']=null,_0x2f3f5b[_0x49aeb0(0x17e)]=null,_0x2f3f5b['loserScore']=null,_0x2f3f5b['matchLink']=null,_0x2f3f5b['mapCreator']=null,_0x2f3f5b['mapVersion']=null,_0x2f3f5b['creatorImageUrl']=null);}try{if(_0x31adb0){_0x2f3f5b['updatedAt']=serverTimestamp();const _0x402831=doc(db,_0x49aeb0(0x12d),_0x31adb0);await updateDoc(_0x402831,_0x2f3f5b),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x2f3f5b['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x49aeb0(0x12d)),_0x2f3f5b),showNotification(_0x49aeb0(0x22e),'success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x5dfa7d){console[_0x49aeb0(0x135)]('Error\x20saving\x20highlight:',_0x5dfa7d),showNotification(_0x49aeb0(0x277)+_0x5dfa7d['message'],'error');}}async function resimulateMatch(){const _0x25c38b=a4_0x5c849d;try{const _0x395c81=document[_0x25c38b(0xfc)](_0x25c38b(0x110))[_0x25c38b(0x176)];if(!_0x395c81){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x47939e=auth['currentUser'];if(!_0x47939e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x5f5744=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x25c38b(0x27d),_0x562cf1=doc(db,_0x5f5744,_0x395c81),_0x18a36d=await getDoc(_0x562cf1);if(!_0x18a36d['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x297d7b=_0x18a36d['data'](),_0x22a8d9=_0x297d7b['approvedAt']?_0x297d7b[_0x25c38b(0x1e6)]['toDate']()[_0x25c38b(0x16c)]():_0x297d7b['matchDate']?_0x297d7b['matchDate']['toDate']?_0x297d7b['matchDate']['toDate']()['toLocaleString']():new Date(_0x297d7b[_0x25c38b(0x166)])['toLocaleString']():_0x25c38b(0x1db),_0x5f4dd4=_0x25c38b(0x128)+_0x297d7b['winnerUsername']+_0x25c38b(0x2d8)+_0x297d7b['loserUsername']+_0x25c38b(0x2e2)+_0x297d7b['winnerScore']+'-'+_0x297d7b['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x297d7b['mapPlayed']||_0x297d7b['mapName']||'Unknown')+_0x25c38b(0x23e)+_0x22a8d9+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x395c81+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x25c38b(0x15d))['innerHTML']=_0x5f4dd4,document['getElementById']('match-details-container')[_0x25c38b(0x2d9)]['display']=_0x25c38b(0x26b),document['getElementById']('confirm-resimulate-btn')['style']['display']='block',window['pendingResimulateData']={'matchId':_0x395c81,'matchData':_0x297d7b,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x43e2eb){console[_0x25c38b(0x135)]('Error\x20finding\x20match:',_0x43e2eb),showNotification(_0x25c38b(0x101)+_0x43e2eb['message'],'error');}}async function confirmResimulateMatch(){const _0x1a2fae=a4_0x5c849d;try{const {matchId:_0xcfad9c,matchData:_0x30c60e,ladder:_0x3f5071}=window['pendingResimulateData'];if(!_0xcfad9c||!_0x30c60e){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x22edc8=_0x3f5071==='D1'?'players':_0x3f5071==='D2'?'playersD2':'playersD3',_0x2cc21b=_0x3f5071==='D1'?'eloHistory':_0x3f5071==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x3585e3,_0x9534d]=await Promise['all']([getDocs(query(collection(db,_0x22edc8),where('username','==',_0x30c60e[_0x1a2fae(0x266)]))),getDocs(query(collection(db,_0x22edc8),where(_0x1a2fae(0x93),'==',_0x30c60e[_0x1a2fae(0x13c)])))]);if(_0x3585e3['empty']||_0x9534d[_0x1a2fae(0x287)]){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x33d2bb=_0x3585e3['docs'][0x0]['id'],_0xf3c9e7=_0x9534d['docs'][0x0]['id'],_0x7c86b0=_0x3585e3[_0x1a2fae(0x1d5)][0x0][_0x1a2fae(0x2d7)](),_0x26be24=_0x9534d[_0x1a2fae(0x1d5)][0x0]['data'](),[_0x53a0b0,_0xf8569f]=await Promise['all']([getDocs(query(collection(db,_0x2cc21b),where('playerId','==',_0x33d2bb),where('matchId','==',_0xcfad9c))),getDocs(query(collection(db,_0x2cc21b),where('playerId','==',_0xf3c9e7),where(_0x1a2fae(0x257),'==',_0xcfad9c)))]),_0x54be1d=!_0x53a0b0['empty'],_0x4ed8c4=!_0xf8569f['empty'],_0x5c989f=_0x1a2fae(0x2cf)+(_0x54be1d?_0x1a2fae(0x162):'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x4ed8c4?'\x20Exists':_0x1a2fae(0x94))+_0x1a2fae(0x13f)+(_0x7c86b0['eloRating']||_0x1a2fae(0x1db))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x26be24['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x7c86b0['position']||'Unknown')+_0x1a2fae(0x2a2)+(_0x26be24['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x1a2fae(0xfc)](_0x1a2fae(0x2a4))[_0x1a2fae(0xa8)]=_0x5c989f,document[_0x1a2fae(0xfc)](_0x1a2fae(0x2a4))[_0x1a2fae(0x2d9)]['display']='block';if(_0x54be1d&&_0x4ed8c4){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification(_0x1a2fae(0x168),'info');const _0x2a9be8=_0x30c60e['approvedAt']||_0x30c60e['matchDate']||serverTimestamp(),[_0x154913,_0x28bcde]=await Promise[_0x1a2fae(0xd9)]([getPlayerEloAtTime(_0x33d2bb,_0x2a9be8,_0x2cc21b),getPlayerEloAtTime(_0xf3c9e7,_0x2a9be8,_0x2cc21b)]),{calculateElo:_0xf38bff}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x4e2c2d,newLoserRating:_0x30c483}=_0xf38bff(_0x154913,_0x28bcde),_0x786578=_0x7c86b0['position']||Number[_0x1a2fae(0x104)],_0xacd064=_0x26be24['position']||Number['MAX_SAFE_INTEGER'];let _0x1fcea7=_0x786578,_0x21136e=_0xacd064;_0x786578>_0xacd064&&(_0x1fcea7=_0xacd064,_0x21136e=_0xacd064+0x1);const _0x547847=writeBatch(db),_0x304cf1=doc(db,_0x22edc8,_0x33d2bb);_0x547847[_0x1a2fae(0x160)](_0x304cf1,{'eloRating':_0x4e2c2d,'position':_0x1fcea7,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x1a2fae(0xce)][_0x1a2fae(0x18f)]});const _0x2c58eb=doc(db,_0x22edc8,_0xf3c9e7);_0x547847[_0x1a2fae(0x160)](_0x2c58eb,{'eloRating':_0x30c483,'position':_0x21136e,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x1a2fae(0x18f)]});if(_0x786578>_0xacd064){const _0x199843=await getDocs(query(collection(db,_0x22edc8),where('position','>',_0xacd064),where(_0x1a2fae(0x21c),'<',_0x786578)));_0x199843[_0x1a2fae(0x1a9)](_0x2f4729=>{const _0x45eee9=_0x1a2fae,_0x11a7d5=doc(db,_0x22edc8,_0x2f4729['id']),_0xc430e0=_0x2f4729['data']()['position'];_0x547847['update'](_0x11a7d5,{'position':_0xc430e0+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x45eee9(0x230),'positionAdjustedAt':serverTimestamp()});});}if(!_0x54be1d){const _0x306d0b=doc(collection(db,_0x2cc21b));_0x547847['set'](_0x306d0b,{'playerId':_0x33d2bb,'player':_0x30c60e['winnerUsername'],'previousElo':_0x154913,'newElo':_0x4e2c2d,'eloChange':_0x4e2c2d-_0x154913,'opponentId':_0xf3c9e7,'opponent':_0x30c60e['loserUsername'],'matchResult':_0x1a2fae(0x207),'previousPosition':_0x786578,'newPosition':_0x1fcea7,'positionChange':_0x1fcea7-_0x786578,'matchId':_0xcfad9c,'timestamp':_0x2a9be8,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x3f5071,'matchScore':_0x30c60e['winnerScore']+'-'+_0x30c60e['loserScore'],'mapPlayed':_0x30c60e[_0x1a2fae(0xbd)]||_0x30c60e[_0x1a2fae(0x13b)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x4ed8c4){const _0x40ff3a=doc(collection(db,_0x2cc21b));_0x547847['set'](_0x40ff3a,{'playerId':_0xf3c9e7,'player':_0x30c60e['loserUsername'],'previousElo':_0x28bcde,'newElo':_0x30c483,'eloChange':_0x30c483-_0x28bcde,'opponentId':_0x33d2bb,'opponent':_0x30c60e['winnerUsername'],'matchResult':_0x1a2fae(0x2d0),'previousPosition':_0xacd064,'newPosition':_0x21136e,'positionChange':_0x21136e-_0xacd064,'matchId':_0xcfad9c,'timestamp':_0x2a9be8,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x3f5071,'matchScore':_0x30c60e['winnerScore']+'-'+_0x30c60e['loserScore'],'mapPlayed':_0x30c60e['mapPlayed']||_0x30c60e['mapName']||_0x1a2fae(0x1db),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x22dc3f=_0x3f5071==='D1'?'approvedMatches':_0x3f5071==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x17e6cc=doc(db,_0x22dc3f,_0xcfad9c);_0x547847[_0x1a2fae(0x160)](_0x17e6cc,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x1a2fae(0xce)]['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x7c86b0[_0x1a2fae(0x184)],'originalLoserElo':_0x26be24['eloRating'],'originalWinnerPosition':_0x786578,'originalLoserPosition':_0xacd064,'resimulatedWinnerElo':_0x4e2c2d,'resimulatedLoserElo':_0x30c483,'resimulatedWinnerPosition':_0x1fcea7,'resimulatedLoserPosition':_0x21136e}),await _0x547847[_0x1a2fae(0xe1)]();const _0x48ba45=(!_0x54be1d?0x1:0x0)+(!_0x4ed8c4?0x1:0x0),_0x3d0dc6=_0x786578!==_0x1fcea7||_0xacd064!==_0x21136e;showNotification('Match\x20resimulated\x20successfully!\x20'+(_0x1a2fae(0x290)+_0x48ba45+_0x1a2fae(0x245))+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x154913+''+_0x4e2c2d+'\x20(+'+(_0x4e2c2d-_0x154913)+_0x1a2fae(0x18d))+('Loser\x20'+_0x28bcde+''+_0x30c483+'\x20('+(_0x30c483-_0x28bcde)+_0x1a2fae(0x19f))+(''+(_0x3d0dc6?_0x1a2fae(0xac)+_0x786578+''+_0x1fcea7+',\x20Loser\x20'+_0xacd064+''+_0x21136e:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document[_0x1a2fae(0x240)]('#players.content-section.active')&&loadPlayersData();}catch(_0x56de2e){console['error']('Error\x20resimulating\x20match:',_0x56de2e),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x56de2e['message'],'error');}}async function getPlayerEloAtTime(_0x51799d,_0x346d3e,_0x346d5e){const _0x4055be=a4_0x5c849d;try{const _0x89c5cd=_0x346d3e['toDate']?_0x346d3e['toDate']():new Date(_0x346d3e),_0x2b9897=query(collection(db,_0x346d5e),where('playerId','==',_0x51799d),where(_0x4055be(0xc2),'<',_0x346d3e),orderBy(_0x4055be(0xc2),_0x4055be(0xad)),limit(0x1)),_0x1ec95a=await getDocs(_0x2b9897);if(!_0x1ec95a[_0x4055be(0x287)]){const _0x36d6c9=_0x1ec95a['docs'][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x51799d+'\x20before\x20match:\x20'+_0x36d6c9['newElo']),_0x36d6c9[_0x4055be(0x262)];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x51799d+_0x4055be(0xfb)),0x4b0;}catch(_0xbb48cd){return console['error'](_0x4055be(0x16e)+_0x51799d+':',_0xbb48cd),0x4b0;}}function openResimulateModal(){const _0x2f7199=a4_0x5c849d;console[_0x2f7199(0xdf)]('openResimulateModal\x20called!');const _0x425834=document['getElementById']('resimulate-modal');console['log'](_0x2f7199(0x292),_0x425834);if(!_0x425834){console['error']('Modal\x20element\x20not\x20found!');return;}_0x425834['style']['display']=_0x2f7199(0x26b),_0x425834['style'][_0x2f7199(0xc1)]=_0x2f7199(0x156),_0x425834['style']['opacity']='1',_0x425834['classList'][_0x2f7199(0x296)](_0x2f7199(0x103)),console[_0x2f7199(0xdf)]('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x425834)[_0x2f7199(0x1c4)]);const _0x20b843=document[_0x2f7199(0xfc)]('match-details-container'),_0x4cc496=document['getElementById']('validation-results-container'),_0x2e67e8=document[_0x2f7199(0xfc)]('confirm-resimulate-btn'),_0x24eb00=document['getElementById']('resimulate-match-id');if(_0x20b843)_0x20b843['innerHTML']='';if(_0x4cc496)_0x4cc496[_0x2f7199(0xa8)]='';if(_0x2e67e8)_0x2e67e8['style']['display']='none';if(_0x24eb00)_0x24eb00['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0xaf2a35=a4_0x5c849d;document['getElementById']('resimulate-modal')['style'][_0xaf2a35(0x1c4)]='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window[a4_0x5c849d(0x1b7)]=openResimulateModal,window[a4_0x5c849d(0x263)]=closeResimulateModal;async function loadPointsData(){const _0x1407b6=a4_0x5c849d;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x1407b6(0x1d4),'success');}catch(_0x4c8f96){console['error'](_0x1407b6(0xd4),_0x4c8f96),showNotification(_0x1407b6(0x2be)+_0x4c8f96['message'],_0x1407b6(0x135));}}function renderPointsOverview(_0x18ea6a){const _0x3ad15d=a4_0x5c849d,_0x31a0e3=document['getElementById']('points-overview-table-body');if(!_0x31a0e3)return;if(_0x18ea6a[_0x3ad15d(0x100)]===0x0){_0x31a0e3['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x31a0e3['innerHTML']='',_0x18ea6a[_0x3ad15d(0x1a9)](_0x1ee15d=>{const _0x1fe7ad=_0x3ad15d,_0x5429e3=document['createElement']('tr'),_0x338dd8=_0x1ee15d['displayName']||_0x1ee15d['username']||'Unknown\x20User',_0x3e5a7f=_0x1ee15d['email']||'No\x20email',_0x33fc30=_0x1ee15d[_0x1fe7ad(0xb7)]||0x0,_0x2dc7c6=_0x1ee15d['lastPointsModified']?new Date(_0x1ee15d['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x5429e3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x338dd8+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3e5a7f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x33fc30>0x3e8?'high-points':_0x33fc30>0x1f4?'medium-points':_0x1fe7ad(0xf3))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x33fc30['toLocaleString']()+_0x1fe7ad(0xec)+_0x2dc7c6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x1ee15d['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x1ee15d['id']+_0x1fe7ad(0xf8),_0x31a0e3['appendChild'](_0x5429e3);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x1ef6d6=a4_0x5c849d;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x1e84d9=document['querySelectorAll']('.quick-edit-btn');console['log']('Found\x20'+_0x1e84d9['length']+_0x1ef6d6(0x1d8)),_0x1e84d9['forEach'](_0x2600d1=>{const _0x2c7828=_0x1ef6d6,_0x104b35=_0x2600d1[_0x2c7828(0x155)](!![]);_0x2600d1['parentNode'][_0x2c7828(0x92)](_0x104b35,_0x2600d1);});const _0x1830b7=document[_0x1ef6d6(0x9e)]('.view-history-btn');console['log']('Found\x20'+_0x1830b7[_0x1ef6d6(0x100)]+'\x20view\x20history\x20buttons'),_0x1830b7['forEach'](_0x951dae=>{const _0x1a7748=_0x1ef6d6,_0x4049ae=_0x951dae[_0x1a7748(0x155)](!![]);_0x951dae['parentNode']['replaceChild'](_0x4049ae,_0x951dae);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x5a99c1=>{const _0x2b101b=_0x1ef6d6;_0x5a99c1[_0x2b101b(0x21f)]('click',function(_0x7c5bc6){const _0x397f45=_0x2b101b;_0x7c5bc6['preventDefault'](),_0x7c5bc6['stopPropagation']();const _0x2ee936=this['dataset']['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x2ee936);if(!_0x2ee936){console[_0x397f45(0x135)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{const _0x56a369=_0x397f45;this[_0x56a369(0x2d9)]['opacity']='1';},0xc8),openQuickEditModal(_0x2ee936);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x256899=>{const _0x579769=_0x1ef6d6;_0x256899[_0x579769(0x21f)]('click',function(_0x4af3e7){const _0x2c2328=_0x579769;_0x4af3e7['preventDefault'](),_0x4af3e7['stopPropagation']();const _0x41de7f=this[_0x2c2328(0x246)][_0x2c2328(0x2eb)];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x41de7f);if(!_0x41de7f){console['error'](_0x2c2328(0x2b2));return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x41de7f);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x1b438c){const _0x5a83d3=a4_0x5c849d;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x1b438c);const _0x18dab6=document[_0x5a83d3(0xfc)]('quick-edit-points-modal');if(!_0x18dab6){console[_0x5a83d3(0x135)](_0x5a83d3(0x1e2)),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...','info');const _0x44b460=doc(db,_0x5a83d3(0xd2),_0x1b438c),_0x481868=await getDoc(_0x44b460);if(!_0x481868[_0x5a83d3(0x1c8)]()){showNotification(_0x5a83d3(0x2e1),'error');return;}const _0x4d330e=_0x481868['data']();console[_0x5a83d3(0xdf)]('User\x20data\x20loaded:',_0x4d330e);const _0x218ef7=document['getElementById']('quick-edit-user-id'),_0xfb254d=document['getElementById'](_0x5a83d3(0xa9)),_0x3e3805=document[_0x5a83d3(0xfc)]('quick-edit-email'),_0x27f138=document['getElementById']('quick-edit-current-points'),_0xea7a60=document[_0x5a83d3(0xfc)]('quick-edit-points-form');if(!_0x218ef7||!_0xfb254d||!_0x3e3805||!_0x27f138||!_0xea7a60){console[_0x5a83d3(0x135)]('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.',_0x5a83d3(0x135));return;}_0x218ef7['value']=_0x1b438c,_0xfb254d['textContent']=_0x4d330e[_0x5a83d3(0x197)]||_0x4d330e['username']||_0x5a83d3(0x29a),_0x3e3805[_0x5a83d3(0x2d1)]=_0x4d330e[_0x5a83d3(0x12b)]||_0x5a83d3(0x238),_0x27f138['textContent']=(_0x4d330e['points']||0x0)[_0x5a83d3(0x16c)](),_0xea7a60['reset']();const _0x241ba5=document['getElementById']('quick-add');_0x241ba5&&(_0x241ba5['checked']=!![]);_0x18dab6['classList']['add'](_0x5a83d3(0x103)),console['log']('Modal\x20opened\x20successfully');const _0x5d0152=document['getElementById']('quick-points-amount');_0x5d0152&&setTimeout(()=>_0x5d0152['focus'](),0x64);}catch(_0x4eacfa){console[_0x5a83d3(0x135)]('Error\x20opening\x20quick\x20edit\x20modal:',_0x4eacfa),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x4eacfa['message'],'error');}}function closeQuickEditModal(){const _0x2cad94=a4_0x5c849d,_0x43fb1e=document['getElementById']('quick-edit-points-modal');_0x43fb1e&&_0x43fb1e[_0x2cad94(0x258)]['remove']('active');}async function handleQuickEditPoints(_0x1c37b3){const _0x21dc6a=a4_0x5c849d;_0x1c37b3['preventDefault']();const _0x20e676=document['getElementById'](_0x21dc6a(0x1ec))['value'],_0x45b217=document['querySelector']('input[name=\x22quick-action\x22]:checked')[_0x21dc6a(0x176)],_0x41f061=parseInt(document[_0x21dc6a(0xfc)]('quick-points-amount')[_0x21dc6a(0x176)]),_0x9fe321=document[_0x21dc6a(0xfc)]('quick-points-reason')['value']['trim']();console['log']('Processing\x20points\x20edit:',{'userId':_0x20e676,'action':_0x45b217,'amount':_0x41f061,'reason':_0x9fe321});if(!_0x20e676||!_0x41f061||_0x41f061<0x0){showNotification('Please\x20enter\x20valid\x20data',_0x21dc6a(0x135));return;}try{await modifyUserPoints(_0x20e676,_0x45b217,_0x41f061,_0x9fe321),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x21dc6a(0x21b),'success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x20e676);}catch(_0x47d963){console[_0x21dc6a(0x135)](_0x21dc6a(0xf0),_0x47d963),showNotification(_0x21dc6a(0x2e5)+_0x47d963[_0x21dc6a(0x1b2)],_0x21dc6a(0x135));}}async function searchUsersForPoints(){const _0x47662a=a4_0x5c849d,_0x12ac56=document[_0x47662a(0xfc)](_0x47662a(0x9c))['value'][_0x47662a(0x1ed)]()[_0x47662a(0x16d)](),_0x3732f3=document[_0x47662a(0xfc)](_0x47662a(0x1f9));if(!_0x12ac56||_0x12ac56['length']<0x2){_0x3732f3[_0x47662a(0xa8)]='';return;}_0x3732f3['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x47e7ac=collection(db,'userProfiles'),_0x48c34e=await getDocs(_0x47e7ac),_0x443470=[];_0x48c34e['forEach'](_0x15c05b=>{const _0x1ee519=_0x47662a,_0x179b03=_0x15c05b['data'](),_0x382782=(_0x179b03['displayName']||_0x179b03['username']||'')['toLowerCase'](),_0x49cdb2=(_0x179b03['email']||'')['toLowerCase']();(_0x382782['includes'](_0x12ac56)||_0x49cdb2[_0x1ee519(0xb4)](_0x12ac56))&&_0x443470['push']({'id':_0x15c05b['id'],..._0x179b03});});if(_0x443470[_0x47662a(0x100)]===0x0){_0x3732f3['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x3732f3['innerHTML']='',_0x443470['forEach'](_0x27c9fe=>{const _0x29ff30=_0x47662a,_0x459e8b=document[_0x29ff30(0x26a)](_0x29ff30(0x137));_0x459e8b['className']='search-result-item',_0x459e8b[_0x29ff30(0xa8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x27c9fe['displayName']||_0x27c9fe['username']||_0x29ff30(0x1db))+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x27c9fe['email']||'No\x20email')+_0x29ff30(0x1a0)+(_0x27c9fe[_0x29ff30(0xb7)]||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x459e8b['addEventListener']('click',()=>selectUserForPoints(_0x27c9fe)),_0x3732f3['appendChild'](_0x459e8b);});}catch(_0x36c00d){console['error'](_0x47662a(0x140),_0x36c00d),_0x3732f3['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x49d3a5){const _0x4e2c2c=a4_0x5c849d;document['getElementById']('selected-user-name')['textContent']=_0x49d3a5[_0x4e2c2c(0x197)]||_0x49d3a5['username']||'Unknown\x20User',document['getElementById']('selected-user-points')['textContent']=(_0x49d3a5['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')[_0x4e2c2c(0x176)]=_0x49d3a5['id'],document['getElementById']('selected-user-info')['style']['display']=_0x4e2c2c(0x26b),document['getElementById']('points-management-forms')['style']['display']='block',document['getElementById'](_0x4e2c2c(0x1f9))[_0x4e2c2c(0xa8)]='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x5d8bb7){const _0x5ce9f4=a4_0x5c849d;_0x5d8bb7['preventDefault']();const _0x4177be=document[_0x5ce9f4(0xfc)]('selected-user-id')[_0x5ce9f4(0x176)],_0x378376=document['getElementById'](_0x5ce9f4(0xab))['value'],_0x344fc2=parseInt(document['getElementById']('points-amount')['value']),_0x41c78a=document[_0x5ce9f4(0xfc)](_0x5ce9f4(0x12a))[_0x5ce9f4(0x176)]['trim']();if(!_0x4177be||!_0x344fc2||_0x344fc2<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x5ce9f4(0x135));return;}try{await modifyUserPoints(_0x4177be,_0x378376,_0x344fc2,_0x41c78a),document['getElementById']('modify-points-form')['reset']();const _0x467614=doc(db,'userProfiles',_0x4177be),_0x4b296d=await getDoc(_0x467614);if(_0x4b296d[_0x5ce9f4(0x1c8)]()){const _0x49a94d=_0x4b296d['data']();document['getElementById']('selected-user-points')['textContent']=(_0x49a94d['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x171bcb){console['error']('Error\x20modifying\x20points:',_0x171bcb),showNotification(_0x5ce9f4(0x1eb)+_0x171bcb['message'],'error');}}async function loadPointsHistory(){const _0x7088ac=a4_0x5c849d,_0x2d7664=document['getElementById'](_0x7088ac(0x2a9));if(!_0x2d7664)return;_0x2d7664[_0x7088ac(0xa8)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x4752e8=collection(db,_0x7088ac(0x254)),_0x2dd550=query(_0x4752e8,orderBy(_0x7088ac(0xc2),_0x7088ac(0xad)),limit(0x32)),_0x200fbf=await getDocs(_0x2dd550);if(_0x200fbf['empty']){_0x2d7664['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x2d7664[_0x7088ac(0xa8)]='',_0x200fbf[_0x7088ac(0x1a9)](_0x51d7ca=>{const _0x8fee82=_0x7088ac,_0x5ad054=_0x51d7ca['data'](),_0x532a8e=document['createElement']('tr'),_0x10caca=_0x5ad054['timestamp']?new Date(_0x5ad054['timestamp']['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x118de3='';switch(_0x5ad054[_0x8fee82(0x23f)]){case _0x8fee82(0x296):_0x118de3='Added\x20'+_0x5ad054['amount']+_0x8fee82(0x1fa);break;case'subtract':_0x118de3=_0x8fee82(0x219)+_0x5ad054['amount']+_0x8fee82(0x1fa);break;case'set':_0x118de3=_0x8fee82(0x194)+_0x5ad054['amount']+'\x20points';break;default:_0x118de3=_0x5ad054['action']+'\x20'+_0x5ad054['amount']+'\x20points';}_0x532a8e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x10caca+_0x8fee82(0x21a)+(_0x5ad054[_0x8fee82(0x197)]||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x118de3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x5ad054['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5ad054['previousPoints']||0x0)+'\x20\x20'+(_0x5ad054[_0x8fee82(0x227)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5ad054['reason']||_0x8fee82(0x1ef))+_0x8fee82(0x21a)+(_0x5ad054[_0x8fee82(0x127)]||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2d7664[_0x8fee82(0x196)](_0x532a8e);});}catch(_0xf6f152){console['error']('Error\x20loading\x20points\x20history:',_0xf6f152),_0x2d7664[_0x7088ac(0xa8)]=_0x7088ac(0x242)+_0xf6f152['message']+'</td></tr>';}}function filterPointsOverview(){const _0x381069=a4_0x5c849d,_0x5d4ee5=document[_0x381069(0xfc)]('points-overview-search')['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x2e0d77=window['allUsersPoints'][_0x381069(0xf6)](_0x333332=>{const _0x56f3d4=_0x381069,_0x1e009a=(_0x333332['displayName']||_0x333332['username']||'')['toLowerCase'](),_0x5c0218=(_0x333332['email']||'')['toLowerCase']();return _0x1e009a['includes'](_0x5d4ee5)||_0x5c0218[_0x56f3d4(0xb4)](_0x5d4ee5);});renderPointsOverview(_0x2e0d77);}function sortPointsOverview(){const _0x4173b7=a4_0x5c849d,_0x4cfe60=document[_0x4173b7(0xfc)](_0x4173b7(0x185))['value'];if(!window['allUsersPoints'])return;const _0x4365eb=[...window[_0x4173b7(0x2ae)]];switch(_0x4cfe60){case'points-desc':_0x4365eb[_0x4173b7(0xfe)]((_0x4bbb40,_0x2f2bab)=>(_0x2f2bab['points']||0x0)-(_0x4bbb40['points']||0x0));break;case _0x4173b7(0x216):_0x4365eb['sort']((_0x1e98b6,_0x3c250d)=>(_0x1e98b6[_0x4173b7(0xb7)]||0x0)-(_0x3c250d[_0x4173b7(0xb7)]||0x0));break;case'name-asc':_0x4365eb['sort']((_0x4bf249,_0x216126)=>{const _0x3dfe36=_0x4173b7,_0x3fd485=(_0x4bf249['displayName']||_0x4bf249[_0x3dfe36(0x93)]||'')['toLowerCase'](),_0x23d25b=(_0x216126['displayName']||_0x216126['username']||'')[_0x3dfe36(0x16d)]();return _0x3fd485['localeCompare'](_0x23d25b);});break;case _0x4173b7(0x1b4):_0x4365eb[_0x4173b7(0xfe)]((_0x352c08,_0x514a9b)=>{const _0x519499=_0x4173b7,_0x143d8f=(_0x352c08['displayName']||_0x352c08['username']||'')['toLowerCase'](),_0xd537ed=(_0x514a9b['displayName']||_0x514a9b[_0x519499(0x93)]||'')['toLowerCase']();return _0xd537ed['localeCompare'](_0x143d8f);});break;}renderPointsOverview(_0x4365eb);}async function handleAwardItem(_0x39f932){const _0x404c1c=a4_0x5c849d;_0x39f932[_0x404c1c(0x2c4)]();const _0x14d24a=document[_0x404c1c(0xfc)](_0x404c1c(0x97))[_0x404c1c(0x176)],_0x2a4767=document['getElementById']('store-item-select')[_0x404c1c(0x176)],_0x35f13a=document[_0x404c1c(0xfc)](_0x404c1c(0x1f2))['value']['trim']();if(!_0x14d24a||!_0x2a4767){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')['reset']();}catch(_0x4a63a2){console['error'](_0x404c1c(0x15e),_0x4a63a2),showNotification(_0x404c1c(0x9d)+_0x4a63a2['message'],_0x404c1c(0x135));}}async function loadUserPointsHistory(_0xfcf2c0){const _0x3d2afb=a4_0x5c849d;try{const _0x8593c=collection(db,'pointsHistory'),_0x4a945b=query(_0x8593c,where('userId','==',_0xfcf2c0),orderBy('timestamp','desc')),_0x11dbb7=await getDocs(_0x4a945b);console[_0x3d2afb(0xdf)](_0x3d2afb(0x1a4)+_0x11dbb7['size']+'\x20history\x20entries\x20for\x20user\x20'+_0xfcf2c0),showNotification('User\x20has\x20'+_0x11dbb7['size']+'\x20points\x20history\x20entries',_0x3d2afb(0x2b1));}catch(_0x8255e9){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x8255e9),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x3751b6=a4_0x5c849d;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x33e782=collection(db,'userProfiles'),_0x3d546a=await getDocs(_0x33e782);if(_0x3d546a['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x3795ff=0x0,_0x169bd1=0x0;const _0x250b04=writeBatch(db);let _0x355ecb=0x0;return console['log']('Found\x20'+_0x3d546a[_0x3751b6(0x2ad)]+'\x20users\x20to\x20check...'),_0x3d546a['forEach'](_0x3deb1a=>{const _0x5ad009=_0x3751b6,_0x3f45cb=_0x3deb1a[_0x5ad009(0x2d7)]();_0x3f45cb['points']===undefined||_0x3f45cb[_0x5ad009(0xb7)]===null?(_0x250b04['update'](_0x3deb1a['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x3795ff++,_0x355ecb++,console['log']('Queued\x20'+(_0x3f45cb['displayName']||_0x3f45cb['username']||_0x3f45cb['email']||'Unknown')+_0x5ad009(0x91))):(_0x169bd1++,console['log']((_0x3f45cb['displayName']||_0x3f45cb['username']||_0x3f45cb['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x3f45cb[_0x5ad009(0xb7)])),_0x355ecb>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x3795ff>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x3795ff+_0x3751b6(0x1b1)),await _0x250b04['commit'](),console[_0x3751b6(0xdf)]('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x3795ff+_0x3751b6(0x267))):console['log'](_0x3751b6(0x26c)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x3d546a[_0x3751b6(0x2ad)]+_0x3751b6(0x278)+_0x3795ff+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x169bd1),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x3795ff+_0x3751b6(0x1d0)+_0x169bd1+'\x20users\x20already\x20had\x20points.',_0x3751b6(0x17a)),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x3d546a['size'],'usersUpdated':_0x3795ff,'usersAlreadyHadPoints':_0x169bd1};}catch(_0x5ebe85){console['error']('Error\x20initializing\x20points\x20field:',_0x5ebe85),showNotification('Error\x20initializing\x20points:\x20'+_0x5ebe85['message'],'error');throw _0x5ebe85;}}function addPointsMigrationButton(){const _0x1ae6b4=a4_0x5c849d,_0x52afb6=document['getElementById'](_0x1ae6b4(0x26d));if(!_0x52afb6)return;if(document['getElementById']('migrate-points-btn'))return;const _0x3dd490=document['createElement']('div');_0x3dd490['className']='migration-section',_0x3dd490['style'][_0x1ae6b4(0x1c9)]=_0x1ae6b4(0x2a5),_0x3dd490['style']['padding']='15px',_0x3dd490['style'][_0x1ae6b4(0xd7)]='rgba(255,\x20193,\x207,\x200.1)',_0x3dd490['style'][_0x1ae6b4(0x269)]='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x3dd490['style']['borderRadius']=_0x1ae6b4(0x23b),_0x3dd490['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x43757b=_0x52afb6[_0x1ae6b4(0x240)](_0x1ae6b4(0x161));_0x43757b&&_0x43757b['insertAdjacentElement'](_0x1ae6b4(0x1e1),_0x3dd490),document[_0x1ae6b4(0xfc)]('migrate-points-btn')[_0x1ae6b4(0x21f)]('click',async function(){const _0xf62a13=_0x1ae6b4;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this[_0xf62a13(0x2cc)]=!![],this['innerHTML']=_0xf62a13(0x149);try{await initializeUserPointsField(),this['innerHTML']=_0xf62a13(0x143),this['style'][_0xf62a13(0xd7)]='#28a745',setTimeout(()=>{const _0x210770=_0xf62a13;_0x3dd490['style']['display']=_0x210770(0xda);},0xbb8);}catch(_0x14e56e){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x14ef04=a4_0x5c849d;console[_0x14ef04(0xdf)]('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x251f64=document['getElementById']('points-user-search');_0x251f64&&_0x251f64['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x4f3f93=document['getElementById'](_0x14ef04(0x15f));_0x4f3f93&&_0x4f3f93['addEventListener']('submit',handleModifyPoints);const _0x1d94ea=document[_0x14ef04(0xfc)]('award-item-form');_0x1d94ea&&_0x1d94ea['addEventListener']('submit',handleAwardItem);const _0x6a26f=document['getElementById']('points-overview-search');_0x6a26f&&_0x6a26f['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x228810=document[_0x14ef04(0xfc)]('points-sort-order');_0x228810&&_0x228810['addEventListener']('change',sortPointsOverview);const _0x377a67=document['getElementById']('refresh-points-overview');_0x377a67&&_0x377a67[_0x14ef04(0x21f)]('click',loadPointsOverview);const _0x17cb63=document['getElementById'](_0x14ef04(0x179));if(_0x17cb63){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x65982a=_0x17cb63['querySelector']('.close-btn');_0x65982a?_0x65982a['addEventListener'](_0x14ef04(0x1bc),function(){const _0x1a7c8e=_0x14ef04;console[_0x1a7c8e(0xdf)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x3b2a39=document['getElementById']('cancel-quick-edit');_0x3b2a39?_0x3b2a39['addEventListener']('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console[_0x14ef04(0x26e)]('Cancel\x20button\x20not\x20found');const _0x13d0c4=document[_0x14ef04(0xfc)]('quick-edit-points-form');_0x13d0c4?_0x13d0c4[_0x14ef04(0x21f)]('submit',function(_0x11cb7d){const _0x34d6d7=_0x14ef04;console['log'](_0x34d6d7(0x2a3)),handleQuickEditPoints(_0x11cb7d);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x17cb63['addEventListener'](_0x14ef04(0x1bc),function(_0x5fee0e){_0x5fee0e['target']===_0x17cb63&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error'](_0x14ef04(0x126));console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x267898=a4_0x5c849d;console['log'](_0x267898(0x10b));const _0x314945=document['getElementById']('ribbon-user-search');_0x314945&&_0x314945['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x3fc7a0=document['getElementById']('search-ribbon-user-btn');_0x3fc7a0&&_0x3fc7a0['addEventListener']('click',searchRibbonUser);const _0x1e1ece=document[_0x267898(0xfc)](_0x267898(0xa1));_0x1e1ece&&_0x1e1ece[_0x267898(0x21f)]('submit',addRibbon),_0x314945&&_0x314945['addEventListener'](_0x267898(0x23a),function(_0x4d8604){const _0x4d1ae3=_0x267898;_0x4d8604['key']==='Enter'&&(_0x4d8604[_0x4d1ae3(0x2c4)](),searchRibbonUser());}),console['log'](_0x267898(0xb2));}async function modifyUserPoints(_0x284002,_0x43421f,_0x21ea80,_0x2c6398=''){const _0x66abed=a4_0x5c849d,_0x3c5d08=doc(db,_0x66abed(0xd2),_0x284002),_0x2df0db=await getDoc(_0x3c5d08);if(!_0x2df0db[_0x66abed(0x1c8)]())throw new Error('User\x20not\x20found');const _0x4407e0=_0x2df0db['data'](),_0x41c3af=_0x4407e0['points']!==undefined?_0x4407e0['points']:0x0;_0x4407e0[_0x66abed(0xb7)]===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x4407e0[_0x66abed(0x197)]||_0x4407e0[_0x66abed(0x12b)]||_0x66abed(0x1db))),await updateDoc(_0x3c5d08,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x2f789a=_0x41c3af;switch(_0x43421f){case'add':_0x2f789a=_0x41c3af+_0x21ea80;break;case'subtract':_0x2f789a=Math['max'](0x0,_0x41c3af-_0x21ea80);break;case'set':_0x2f789a=_0x21ea80;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x3c5d08,{'points':_0x2f789a,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x284002,'userEmail':_0x4407e0[_0x66abed(0x12b)]||'unknown','displayName':_0x4407e0[_0x66abed(0x197)]||_0x4407e0[_0x66abed(0x93)]||'Unknown\x20User','action':_0x43421f,'amount':_0x21ea80,'previousPoints':_0x41c3af,'newPoints':_0x2f789a,'reason':_0x2c6398,'adminEmail':auth['currentUser'][_0x66abed(0x12b)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x1186bf=a4_0x5c849d,_0x173dd5=document[_0x1186bf(0xfc)]('points-overview-table-body');if(!_0x173dd5)return;_0x173dd5[_0x1186bf(0xa8)]=_0x1186bf(0x28b);try{const _0x4bcf36=collection(db,'userProfiles'),_0x47bcc5=await getDocs(_0x4bcf36);if(_0x47bcc5['empty']){_0x173dd5['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x54764d=[];let _0x271f73=0x0;_0x47bcc5['forEach'](_0x2c8a26=>{const _0x38bad8=_0x1186bf,_0x614365=_0x2c8a26['data'](),_0x1c22b9=_0x614365['points']!==undefined?_0x614365[_0x38bad8(0xb7)]:0x0;_0x614365['points']===undefined&&_0x271f73++,_0x54764d['push']({'id':_0x2c8a26['id'],..._0x614365,'points':_0x1c22b9});}),_0x271f73>0x0&&(console['log']('Found\x20'+_0x271f73+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x271f73+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x54764d['sort']((_0x54cb2e,_0x10a34d)=>(_0x10a34d['points']||0x0)-(_0x54cb2e['points']||0x0)),window['allUsersPoints']=_0x54764d,renderPointsOverview(_0x54764d);}catch(_0x4ff7be){console[_0x1186bf(0x135)](_0x1186bf(0xd8),_0x4ff7be),_0x173dd5['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x4ff7be['message']+_0x1186bf(0x111);}}async function loadRibbonsData(){const _0x5b1acb=a4_0x5c849d,_0x1848ac=document[_0x5b1acb(0xfc)]('ribbons-overview-table-body');if(!_0x1848ac)return;_0x1848ac[_0x5b1acb(0xa8)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x1f9f89,_0x2ffa3f,_0x43ff43]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,_0x5b1acb(0x259)))]);_0x1848ac['innerHTML']='';const _0x2cb754=(_0x567562,_0x406d27)=>{_0x567562['forEach'](_0x3afe2f=>{const _0x3a23ac=a4_0x4f5e,_0x4e24d4=_0x3afe2f[_0x3a23ac(0x2d7)](),_0x5c8d3b=_0x4e24d4['ribbons']||{},_0x1562f8=Object[_0x3a23ac(0x2b9)](_0x5c8d3b)['length'],_0x2c5eca=document['createElement']('tr');_0x2c5eca[_0x3a23ac(0xa8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4e24d4['username']||_0x3a23ac(0x1db))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x406d27['toLowerCase']()+'\x22>'+_0x406d27+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1562f8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4e24d4[_0x3a23ac(0x2a0)]?new Date(_0x4e24d4['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():_0x3a23ac(0x1db))+_0x3a23ac(0x247)+_0x4e24d4['username']+'\x22\x20data-ladder=\x22'+_0x406d27+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1848ac['appendChild'](_0x2c5eca);});};_0x2cb754(_0x1f9f89,'D1'),_0x2cb754(_0x2ffa3f,'D2'),_0x2cb754(_0x43ff43,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x1f2057=>{_0x1f2057['addEventListener']('click',function(){const _0x837901=a4_0x4f5e,_0x16b155=this['dataset']['username'],_0x550a79=this[_0x837901(0x246)]['ladder'];editUserRibbons(_0x16b155,_0x550a79);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x4be513){console['error'](_0x5b1acb(0x204),_0x4be513),_0x1848ac[_0x5b1acb(0xa8)]=_0x5b1acb(0x114),showNotification(_0x5b1acb(0x12f),'error');}}async function searchRibbonUser(){const _0x2fdc00=a4_0x5c849d,_0x5f47fb=document['getElementById']('ribbon-user-search')[_0x2fdc00(0x176)][_0x2fdc00(0x1ed)]();if(!_0x5f47fb){showNotification('Please\x20enter\x20a\x20username',_0x2fdc00(0x135));return;}try{const [_0x46c2ed,_0x569eff,_0x495223]=await Promise['all']([getDoc(doc(db,_0x2fdc00(0x2a1),_0x5f47fb)),getDoc(doc(db,'playerRibbonsD2',_0x5f47fb)),getDoc(doc(db,'playerRibbonsD3',_0x5f47fb))]);let _0x40b489=null,_0x17c620=null;if(_0x46c2ed['exists']())_0x40b489='D1',_0x17c620=_0x46c2ed[_0x2fdc00(0x2d7)]();else{if(_0x569eff[_0x2fdc00(0x1c8)]())_0x40b489='D2',_0x17c620=_0x569eff['data']();else _0x495223['exists']()&&(_0x40b489='D3',_0x17c620=_0x495223['data']());}_0x40b489?(document[_0x2fdc00(0xfc)]('current-ribbon-user')['textContent']=_0x5f47fb,document[_0x2fdc00(0xfc)](_0x2fdc00(0x195))[_0x2fdc00(0x176)]=_0x5f47fb,document['getElementById']('ribbon-target-ladder')['value']=_0x40b489,document[_0x2fdc00(0xfc)]('user-ribbon-management')['style'][_0x2fdc00(0x1c4)]='block',displayCurrentRibbons(_0x17c620['ribbons']||{}),showNotification('Found\x20'+_0x5f47fb+_0x2fdc00(0x202)+_0x40b489+'\x20ladder','success')):showNotification('User\x20'+_0x5f47fb+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x4ed305){console[_0x2fdc00(0x135)]('Error\x20searching\x20user:',_0x4ed305),showNotification(_0x2fdc00(0x1a6),'error');}}function displayCurrentRibbons(_0x407bde){const _0x1d011e=a4_0x5c849d,_0x40a7d8=document[_0x1d011e(0xfc)]('current-ribbons-list');if(!_0x40a7d8)return;_0x40a7d8['innerHTML']='';if(Object['keys'](_0x407bde)['length']===0x0){_0x40a7d8['innerHTML']=_0x1d011e(0x10a);return;}Object['entries'](_0x407bde)['forEach'](([_0x186415,_0x498c04])=>{const _0x37742f=_0x1d011e,_0x1799f4=document['createElement']('div');_0x1799f4['className']='ribbon-item',_0x1799f4[_0x37742f(0xa8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x186415+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x498c04[_0x37742f(0x18b)]||0x1)+_0x37742f(0x25c)+(_0x498c04['awardedAt']?new Date(_0x498c04['awardedAt']['seconds']*0x3e8)[_0x37742f(0x210)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x186415+_0x37742f(0x2c1),_0x40a7d8['appendChild'](_0x1799f4);}),document[_0x1d011e(0x9e)]('.remove-ribbon-btn')[_0x1d011e(0x1a9)](_0x23ff2a=>{_0x23ff2a['addEventListener']('click',function(){const _0x2af5a8=a4_0x4f5e,_0xb6c618=this[_0x2af5a8(0x246)]['ribbon'];removeRibbon(_0xb6c618);});});}async function addRibbon(_0x335459){const _0x5af451=a4_0x5c849d;_0x335459['preventDefault']();const _0x246f77=document[_0x5af451(0xfc)](_0x5af451(0x195))['value'],_0x544887=document['getElementById'](_0x5af451(0x11b))[_0x5af451(0x176)],_0x18980e=document['getElementById']('ribbon-type-select')['value'],_0x109d44=parseInt(document[_0x5af451(0xfc)](_0x5af451(0x253))['value']);if(!_0x246f77||!_0x544887||!_0x18980e||!_0x109d44){showNotification(_0x5af451(0x1a2),_0x5af451(0x135));return;}try{const _0x152976='playerRibbons'+(_0x544887==='D1'?'':_0x544887),_0x4e922c=doc(db,_0x152976,_0x246f77),_0x23c815=await getDoc(_0x4e922c),_0x3d19b0=_0x23c815['exists']()?_0x23c815[_0x5af451(0x2d7)]()['ribbons']||{}:{};_0x3d19b0[_0x18980e]={'level':_0x109d44,'awardedAt':serverTimestamp()},await setDoc(_0x4e922c,{'username':_0x246f77,'ladder':_0x544887,'ribbons':_0x3d19b0,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x18980e+_0x5af451(0x24b)+_0x109d44+'\x20to\x20'+_0x246f77,_0x5af451(0x17a)),displayCurrentRibbons(_0x3d19b0),document['getElementById']('ribbon-type-select')['value']='',document[_0x5af451(0xfc)]('ribbon-level')['value']='1';}catch(_0x406832){console['error']('Error\x20adding\x20ribbon:',_0x406832),showNotification('Error\x20adding\x20ribbon',_0x5af451(0x135));}}async function removeRibbon(_0x23aa33){const _0x5f179d=a4_0x5c849d,_0x21ff3b=document[_0x5f179d(0xfc)]('ribbon-target-user')[_0x5f179d(0x176)],_0xe29102=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x23aa33+'\x20from\x20'+_0x21ff3b+'?'))return;try{const _0x1289ec='playerRibbons'+(_0xe29102==='D1'?'':_0xe29102),_0x1bafe0=doc(db,_0x1289ec,_0x21ff3b),_0x2a6d98=await getDoc(_0x1bafe0),_0x37524a=_0x2a6d98['exists']()?_0x2a6d98['data']()['ribbons']||{}:{};delete _0x37524a[_0x23aa33],await setDoc(_0x1bafe0,{'username':_0x21ff3b,'ladder':_0xe29102,'ribbons':_0x37524a,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x23aa33+_0x5f179d(0x1cb)+_0x21ff3b,_0x5f179d(0x17a)),displayCurrentRibbons(_0x37524a);}catch(_0x488882){console['error'](_0x5f179d(0x182),_0x488882),showNotification(_0x5f179d(0x11a),'error');}}function editUserRibbons(_0x5534dc,_0x5be892){const _0x5e10a5=a4_0x5c849d;document[_0x5e10a5(0xfc)]('ribbon-user-search')['value']=_0x5534dc,searchRibbonUser();}