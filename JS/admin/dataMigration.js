function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0x1de;let f=c[d];if(a0b['exVJdv']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a0b['JqCQrt']=g,a=arguments,a0b['exVJdv']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a0b['JqCQrt'](f),a[i]=f):f=j,f;},a0b(a,b);}(function(a,b){const q=a0b,c=a();while(!![]){try{const d=-parseInt(q(0x1e6))/0x1*(-parseInt(q(0x1e5))/0x2)+parseInt(q(0x1f2))/0x3+-parseInt(q(0x1e8))/0x4+-parseInt(q(0x1f0))/0x5+parseInt(q(0x1de))/0x6*(-parseInt(q(0x1eb))/0x7)+parseInt(q(0x1ea))/0x8*(-parseInt(q(0x1e0))/0x9)+parseInt(q(0x1f6))/0xa;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0xb2a67));import{db}from'../firebase-config.js';import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';export async function migrateUserData(){const r=a0b,a=['players','playersD2','playersD3',r(0x1f1),r(0x1ed)],b=[];let c=writeBatch(db),d=0x0;const e=collection(db,r(0x1ed)),f=new Map(),g=(i,j)=>{const s=r;d>=0x1f4&&(b[s(0x1e2)](c),c=writeBatch(db),d=0x0);const k=doc(e,i);c[s(0x1e7)](k,j),d++;};for(const i of a){const j=collection(db,i),k=await getDocs(j);k['docs']['forEach'](l=>{const t=r,m=l['id'],n=l['data']();!f[t(0x1ef)](m)&&f[t(0x1e7)](m,{'username':n['username']||n['name']||m,'email':n['email']||null,'discord':n['discord']||null,'createdAt':n['createdAt']||new Date()['toISOString'](),'divisions':[]});const o=f[t(0x1f5)](m);if(i===t(0x1ec))o[t(0x1df)]['push']({'id':0x1,'elo':n['elo']||0x5dc,'isActive':n['active']!==![]});else{if(i===t(0x1e4))o['divisions']['push']({'id':0x2,'elo':n[t(0x1e9)]||0x5dc,'isActive':n[t(0x1e1)]!==![]});else i==='playersD3'&&o['divisions']['push']({'id':0x3,'elo':n[t(0x1e9)]||0x5dc,'isActive':n['active']!==![]});}});}for(const [l,m]of f['entries']()){g(l,m);}d>0x0&&b['push'](c);const h=[];for(const n of b){try{await n[r(0x1f8)](),h['push']({'success':!![]});}catch(o){h['push']({'success':![],'error':o});}}return{'usersProcessed':f['size'],'batchesExecuted':h[r(0x1f3)],'success':h['every'](p=>p['success'])};}export async function updateMatchReferences(){const u=a0b,a=['matches','matchesD2',u(0x1f4)];let b=0x0;for(const c of a){const d=collection(db,c),e=await getDocs(d),f=0x1f4;let g=writeBatch(db),h=0x0;for(const i of e[u(0x1e3)]){const j=i[u(0x1ee)](),k=doc(db,c,i['id']);g['update'](k,{'isMigrated':!![],'lastModified':new Date()[u(0x1f7)]()}),h++,b++,h>=f&&(await g[u(0x1f8)](),g=writeBatch(db),h=0x0);}h>0x0&&await g[u(0x1f8)]();}return{'updatedCount':b};}function a0a(){const v=['mtaXDvrAqNz0','C2v0','mJiZmZaXnNnOseLYta','zwXV','nZjNtuDoAMm','mZC4mJuYr09jAezy','CgXHEwvYCW','DxnLCLbYB2zPBgvZ','zgf0yq','AgfZ','mZm2mdy5nxH5DwjMEG','BM9UugfYDgLJAxbHBNrZ','mJa0nJmZowDSyKTiqG','BgvUz3rO','Bwf0y2HLC0qZ','z2v0','mJm0mZa0mdbhugTpzfO','Dg9ju09tDhjPBMC','y29TBwL0','mte0v0zAAKT0','zgL2AxnPB25Z','mZq3nJa3yujmCKjU','ywn0AxzL','ChvZAa','zg9JCW','CgXHEwvYC0qY','nJe2neHMwwrlAW'];a0a=function(){return v;};return a0a();}