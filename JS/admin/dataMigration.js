function a0_0x57b8(_0x20e662,_0x4bcf51){const _0xa3bf4e=a0_0x5c99();return a0_0x57b8=function(_0x5053da,_0xaaf75f){_0x5053da=_0x5053da-0xc3;let _0x5c99ea=_0xa3bf4e[_0x5053da];return _0x5c99ea;},a0_0x57b8(_0x20e662,_0x4bcf51);}const a0_0x5053da=(function(){let _0x1ab53a=!![];return function(_0x185b4b,_0x4d7f01){const _0x54d996=_0x1ab53a?function(){if(_0x4d7f01){const _0x3e4efc=_0x4d7f01['apply'](_0x185b4b,arguments);return _0x4d7f01=null,_0x3e4efc;}}:function(){};return _0x1ab53a=![],_0x54d996;};}()),a0_0xa3bf4e=a0_0x5053da(this,function(){const _0xeb5186=a0_0x57b8;let _0xd2b1c4;try{const _0xbe3ca=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xd2b1c4=_0xbe3ca();}catch(_0x560cee){_0xd2b1c4=window;}const _0x1f6f68=_0xd2b1c4['console']=_0xd2b1c4['console']||{},_0x550e38=['log',_0xeb5186(0xc8),'info','error',_0xeb5186(0xcb),'table','trace'];for(let _0x54891a=0x0;_0x54891a<_0x550e38['length'];_0x54891a++){const _0x2c3961=a0_0x5053da[_0xeb5186(0xca)][_0xeb5186(0xce)][_0xeb5186(0xc4)](a0_0x5053da),_0x371d1a=_0x550e38[_0x54891a],_0x243469=_0x1f6f68[_0x371d1a]||_0x2c3961;_0x2c3961[_0xeb5186(0xd0)]=a0_0x5053da['bind'](a0_0x5053da),_0x2c3961['toString']=_0x243469['toString']['bind'](_0x243469),_0x1f6f68[_0x371d1a]=_0x2c3961;}});a0_0xa3bf4e();import{db}from'../firebase-config.js';function a0_0x5c99(){const _0x308336=['playersD3','bind','playersD2','active','commit','warn','get','constructor','exception','push','divisions','prototype','forEach','__proto__','userProfiles','players','success','matchesD2','set','elo'];a0_0x5c99=function(){return _0x308336;};return a0_0x5c99();}import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';export async function migrateUserData(){const _0x3b59d9=a0_0x57b8,_0x235fda=['players','playersD2',_0x3b59d9(0xc3),'nonParticipants','userProfiles'],_0x237e2e=[];let _0x42ca99=writeBatch(db),_0x1491bc=0x0;const _0x3c19b9=collection(db,_0x3b59d9(0xd1)),_0x591e9d=new Map(),_0x3ba53a=(_0x231c46,_0x32034e)=>{_0x1491bc>=0x1f4&&(_0x237e2e['push'](_0x42ca99),_0x42ca99=writeBatch(db),_0x1491bc=0x0);const _0x50a827=doc(_0x3c19b9,_0x231c46);_0x42ca99['set'](_0x50a827,_0x32034e),_0x1491bc++;};for(const _0x8ef95c of _0x235fda){const _0x16f2e3=collection(db,_0x8ef95c),_0x45d8e9=await getDocs(_0x16f2e3);_0x45d8e9['docs'][_0x3b59d9(0xcf)](_0x65a82c=>{const _0x36353d=_0x3b59d9,_0xdef346=_0x65a82c['id'],_0xcdff11=_0x65a82c['data']();!_0x591e9d['has'](_0xdef346)&&_0x591e9d[_0x36353d(0xd5)](_0xdef346,{'username':_0xcdff11['username']||_0xcdff11['name']||_0xdef346,'email':_0xcdff11['email']||null,'discord':_0xcdff11['discord']||null,'createdAt':_0xcdff11['createdAt']||new Date()['toISOString'](),'divisions':[]});const _0xf72a3a=_0x591e9d[_0x36353d(0xc9)](_0xdef346);if(_0x8ef95c===_0x36353d(0xd2))_0xf72a3a['divisions']['push']({'id':0x1,'elo':_0xcdff11['elo']||0x5dc,'isActive':_0xcdff11[_0x36353d(0xc6)]!==![]});else{if(_0x8ef95c===_0x36353d(0xc5))_0xf72a3a['divisions']['push']({'id':0x2,'elo':_0xcdff11['elo']||0x5dc,'isActive':_0xcdff11['active']!==![]});else _0x8ef95c==='playersD3'&&_0xf72a3a[_0x36353d(0xcd)]['push']({'id':0x3,'elo':_0xcdff11[_0x36353d(0xd6)]||0x5dc,'isActive':_0xcdff11['active']!==![]});}});}for(const [_0x4c936e,_0x252e21]of _0x591e9d['entries']()){_0x3ba53a(_0x4c936e,_0x252e21);}_0x1491bc>0x0&&_0x237e2e[_0x3b59d9(0xcc)](_0x42ca99);const _0x414975=[];for(const _0x203e62 of _0x237e2e){try{await _0x203e62['commit'](),_0x414975['push']({'success':!![]});}catch(_0x3146a0){_0x414975['push']({'success':![],'error':_0x3146a0});}}return{'usersProcessed':_0x591e9d['size'],'batchesExecuted':_0x414975['length'],'success':_0x414975['every'](_0xa8c114=>_0xa8c114[_0x3b59d9(0xd3)])};}export async function updateMatchReferences(){const _0xecaafa=a0_0x57b8,_0x5bb6b1=['matches',_0xecaafa(0xd4),'matchesD3'];let _0x42a885=0x0;for(const _0x5af888 of _0x5bb6b1){const _0x3bec26=collection(db,_0x5af888),_0x55db41=await getDocs(_0x3bec26),_0x1bff0c=0x1f4;let _0x1d18ba=writeBatch(db),_0xac618=0x0;for(const _0x6320ec of _0x55db41['docs']){const _0x135ea6=_0x6320ec['data'](),_0xde92c=doc(db,_0x5af888,_0x6320ec['id']);_0x1d18ba['update'](_0xde92c,{'isMigrated':!![],'lastModified':new Date()['toISOString']()}),_0xac618++,_0x42a885++,_0xac618>=_0x1bff0c&&(await _0x1d18ba['commit'](),_0x1d18ba=writeBatch(db),_0xac618=0x0);}_0xac618>0x0&&await _0x1d18ba[_0xecaafa(0xc7)]();}return{'updatedCount':_0x42a885};}