function a0_0x319a(){const _0x46d671=['8862359THltDm','DOMContentLoaded','display','You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.','textContent','nonParticipants','username','join-username-input','518VnZdCD','Ladder\x20changed\x20to:\x20','docs','4048848IenHSM','3031468BwIqNw','players','702550YNATet','playersD3','\x20ladder...','position','currentUser','disabled','className','warn','20UMVffv','toString','920284CUddcg','903885cRMVrJ','getElementById','exception','forEach','value','6iIUHhB','target','d1-switch','exists','block','Checking\x20user\x20status\x20for\x20ladder:','tiny-join-button','ladder-join-status\x20loading','Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.','addEventListener','playersCTF','ladder-join-prompt','log','info','trim','change','\x22\x20to\x20confirm.','playersD2','email','Joining\x20','message','toLowerCase','style','split','click','153584XWupWM','ladder-join-status\x20error','empty','6ReVcGd','none'];a0_0x319a=function(){return _0x46d671;};return a0_0x319a();}const a0_0x2c1cbe=a0_0x4a35;(function(_0x297622,_0xcca2b){const _0x4b1236=a0_0x4a35,_0x3231dc=_0x297622();while(!![]){try{const _0x308341=-parseInt(_0x4b1236(0x14d))/0x1+parseInt(_0x4b1236(0x14c))/0x2+-parseInt(_0x4b1236(0x152))/0x3*(parseInt(_0x4b1236(0x140))/0x4)+-parseInt(_0x4b1236(0x142))/0x5*(-parseInt(_0x4b1236(0x16e))/0x6)+parseInt(_0x4b1236(0x13c))/0x7*(parseInt(_0x4b1236(0x16b))/0x8)+-parseInt(_0x4b1236(0x13f))/0x9+parseInt(_0x4b1236(0x14a))/0xa*(parseInt(_0x4b1236(0x170))/0xb);if(_0x308341===_0xcca2b)break;else _0x3231dc['push'](_0x3231dc['shift']());}catch(_0xfe997){_0x3231dc['push'](_0x3231dc['shift']());}}}(a0_0x319a,0xba50f));const a0_0x173acb=(function(){let _0x524e9f=!![];return function(_0x268286,_0x218e79){const _0x2078c2=_0x524e9f?function(){if(_0x218e79){const _0x258346=_0x218e79['apply'](_0x268286,arguments);return _0x218e79=null,_0x258346;}}:function(){};return _0x524e9f=![],_0x2078c2;};}()),a0_0x586685=a0_0x173acb(this,function(){const _0x14af50=a0_0x4a35,_0x2c127c=function(){let _0x29b7a9;try{_0x29b7a9=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x10f067){_0x29b7a9=window;}return _0x29b7a9;},_0x5918a6=_0x2c127c(),_0xcd3d36=_0x5918a6['console']=_0x5918a6['console']||{},_0x430a28=['log','warn',_0x14af50(0x15f),'error',_0x14af50(0x14f),'table','trace'];for(let _0x4d1c8f=0x0;_0x4d1c8f<_0x430a28['length'];_0x4d1c8f++){const _0x944579=a0_0x173acb['constructor']['prototype']['bind'](a0_0x173acb),_0x4a0d58=_0x430a28[_0x4d1c8f],_0x28a64a=_0xcd3d36[_0x4a0d58]||_0x944579;_0x944579['__proto__']=a0_0x173acb['bind'](a0_0x173acb),_0x944579[_0x14af50(0x14b)]=_0x28a64a[_0x14af50(0x14b)]['bind'](_0x28a64a),_0xcd3d36[_0x4a0d58]=_0x944579;}});function a0_0x4a35(_0x5da146,_0x3b7eb1){const _0x43d3a3=a0_0x319a();return a0_0x4a35=function(_0x586685,_0x173acb){_0x586685=_0x586685-0x139;let _0x50dc1e=_0x43d3a3[_0x586685];return _0x50dc1e;},a0_0x4a35(_0x5da146,_0x3b7eb1);}a0_0x586685();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener'](a0_0x2c1cbe(0x171),()=>{const _0x2c3ae6=a0_0x2c1cbe,_0x204829=document['getElementById'](_0x2c3ae6(0x154)),_0x3cb628=document[_0x2c3ae6(0x14e)]('d2-switch');console[_0x2c3ae6(0x15e)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x204829),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x3cb628);function _0x4b094a(){const _0x20315f=_0x2c3ae6;document['querySelectorAll']('input[name=\x22ladder\x22]')[_0x20315f(0x150)](_0x5a3cef=>{const _0x586272=_0x20315f;_0x5a3cef[_0x586272(0x15b)](_0x586272(0x161),_0x43a530=>{const _0x59a133=_0x586272;_0x43a530[_0x59a133(0x153)]['checked']&&(currentLadder=_0x43a530[_0x59a133(0x153)]['value'],console[_0x59a133(0x15e)](_0x59a133(0x13d)+currentLadder),checkUserLadderStatus());});});}_0x4b094a();const _0x5f5bfe=document['getElementById']('join-ladder-button');_0x5f5bfe&&_0x5f5bfe['addEventListener'](_0x2c3ae6(0x16a),handleJoinLadder),onAuthStateChanged(auth,_0xa3d48f=>{const _0x5d5b49=_0x2c3ae6;if(_0xa3d48f)checkUserLadderStatus();else{const _0x4f8820=document['getElementById'](_0x5d5b49(0x15d));_0x4f8820&&(_0x4f8820[_0x5d5b49(0x168)]['display']='none');}});});function getCollectionName(_0x43b84c){const _0x4ec649=a0_0x2c1cbe;switch(_0x43b84c?.['toUpperCase']()){case'D1':return'players';case'D2':return'playersD2';case'D3':return _0x4ec649(0x143);case'DUOS':case'DUO':return'playersDuos';case'CTF':return _0x4ec649(0x15c);default:console[_0x4ec649(0x149)]('Unknown\x20ladder\x20type:\x20'+_0x43b84c+',\x20defaulting\x20to\x20D1');return _0x4ec649(0x141);}}async function checkUserLadderStatus(){const _0x4ffd6d=a0_0x2c1cbe;console[_0x4ffd6d(0x15e)](_0x4ffd6d(0x157),currentLadder);const _0x5a6260=auth['currentUser'],_0x4b6f4b=document['getElementById'](_0x4ffd6d(0x15d)),_0x397dad=document[_0x4ffd6d(0x14e)]('join-ladder-type'),_0x330c5c=document['getElementById'](_0x4ffd6d(0x158));if(!_0x5a6260||!_0x5a6260['uid']||!_0x4b6f4b||!_0x397dad||!_0x330c5c){if(_0x4b6f4b)_0x4b6f4b['style']['display']='none';if(_0x330c5c)_0x330c5c['style']['display']='none';return;}try{try{await _0x5a6260['getIdToken'](![]);}catch(_0x46f732){console['error']('Authentication\x20verification\x20failed:',_0x46f732),_0x4b6f4b['style']['display']='none',_0x330c5c['style'][_0x4ffd6d(0x172)]='none';return;}const _0x3cd175=getCollectionName(currentLadder),_0x2ffab9=doc(db,_0x3cd175,_0x5a6260['uid']),_0x39350f=await getDoc(_0x2ffab9);if(_0x39350f[_0x4ffd6d(0x155)]())_0x4b6f4b['style'][_0x4ffd6d(0x172)]='none',_0x330c5c[_0x4ffd6d(0x168)]['display']='none';else{_0x4b6f4b['style'][_0x4ffd6d(0x172)]=_0x4ffd6d(0x16f),_0x330c5c[_0x4ffd6d(0x168)]['display']='block',_0x397dad['textContent']=currentLadder,_0x330c5c['onclick']=()=>{const _0x26c29c=_0x4ffd6d;_0x4b6f4b[_0x26c29c(0x168)]['display']===_0x26c29c(0x156)?_0x4b6f4b[_0x26c29c(0x168)]['display']='none':_0x4b6f4b['style'][_0x26c29c(0x172)]='block';};const _0x513a5c=document['getElementById'](_0x4ffd6d(0x13b)),_0x3c4b88=document[_0x4ffd6d(0x14e)]('ladder-join-status');if(_0x513a5c)_0x513a5c[_0x4ffd6d(0x151)]='';_0x3c4b88&&(_0x3c4b88['textContent']='',_0x3c4b88['className']='ladder-join-status');}}catch(_0x21f71f){console['error']('Error\x20checking\x20ladder\x20status:',_0x21f71f),_0x4b6f4b['style'][_0x4ffd6d(0x172)]=_0x4ffd6d(0x16f),_0x330c5c['style']['display']='none';}}async function handleJoinLadder(){const _0x1ccb25=a0_0x2c1cbe,_0x5d5c3f=auth[_0x1ccb25(0x146)],_0x1bf9b2=document['getElementById']('join-ladder-button'),_0x44b886=document['getElementById']('ladder-join-status'),_0x1522bb=document[_0x1ccb25(0x14e)]('join-username-input');if(!_0x5d5c3f||!_0x5d5c3f['uid']){_0x44b886['textContent']=_0x1ccb25(0x173),_0x44b886[_0x1ccb25(0x148)]='ladder-join-status\x20error';return;}try{await _0x5d5c3f['getIdToken'](!![]);}catch(_0x2686b3){console['error']('Authentication\x20error:',_0x2686b3),_0x44b886[_0x1ccb25(0x174)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x44b886['className']='ladder-join-status\x20error';return;}if(!_0x1522bb||!_0x1522bb['value'][_0x1ccb25(0x160)]()){_0x44b886[_0x1ccb25(0x174)]='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x44b886[_0x1ccb25(0x148)]='ladder-join-status\x20error';return;}try{_0x1bf9b2['disabled']=!![],_0x44b886['textContent']='Verifying\x20username...',_0x44b886[_0x1ccb25(0x148)]=_0x1ccb25(0x159);let _0x113f53='',_0x26302f=null;const _0x25ebad=['players',_0x1ccb25(0x163),'playersD3','playersDuos','playersCTF',_0x1ccb25(0x139)];for(const _0x446fee of _0x25ebad){try{const _0x3506a5=doc(db,_0x446fee,_0x5d5c3f['uid']),_0xe99c2f=await getDoc(_0x3506a5);if(_0xe99c2f[_0x1ccb25(0x155)]()){_0x26302f=_0xe99c2f['data']();if(_0x26302f[_0x1ccb25(0x13a)]){_0x113f53=_0x26302f['username'];break;}}}catch(_0x45d641){console['error']('Error\x20checking\x20'+_0x446fee+':',_0x45d641);}}!_0x113f53&&_0x5d5c3f[_0x1ccb25(0x164)]&&(_0x113f53=_0x5d5c3f[_0x1ccb25(0x164)][_0x1ccb25(0x169)]('@')[0x0]);if(!_0x113f53){_0x44b886[_0x1ccb25(0x174)]=_0x1ccb25(0x15a),_0x44b886['className']='ladder-join-status\x20error',_0x1bf9b2[_0x1ccb25(0x147)]=![];return;}const _0x4d1661=_0x1522bb['value']['trim']();if(_0x113f53&&_0x4d1661['toLowerCase']()!==_0x113f53[_0x1ccb25(0x167)]()){_0x44b886['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x113f53+_0x1ccb25(0x162),_0x44b886['className']=_0x1ccb25(0x16c),_0x1bf9b2[_0x1ccb25(0x147)]=![];return;}_0x44b886['textContent']=_0x1ccb25(0x165)+currentLadder+_0x1ccb25(0x144);const _0x5a05ea=getCollectionName(currentLadder),_0xd19c92=doc(db,_0x5a05ea,_0x5d5c3f['uid']),_0x135e29=await getDoc(_0xd19c92);if(_0x135e29['exists']()){_0x44b886[_0x1ccb25(0x174)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x44b886[_0x1ccb25(0x148)]=_0x1ccb25(0x16c),_0x1bf9b2[_0x1ccb25(0x147)]=![];return;}try{await _0x5d5c3f['getIdToken'](!![]);}catch(_0x4c42d5){_0x44b886['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x44b886['className']='ladder-join-status\x20error',_0x1bf9b2[_0x1ccb25(0x147)]=![];return;}const _0x589621=_0x113f53,_0x308354=collection(db,_0x5a05ea),_0x56d61c=query(_0x308354,orderBy('position','desc'),limit(0x1)),_0x3a5bd3=await getDocs(_0x56d61c);let _0x3b2ed8=0x1;if(!_0x3a5bd3[_0x1ccb25(0x16d)]){const _0x352f80=_0x3a5bd3[_0x1ccb25(0x13e)][0x0]['data']();_0x3b2ed8=(_0x352f80[_0x1ccb25(0x145)]||0x0)+0x1;}const _0x5383c2={'username':_0x589621,'email':_0x5d5c3f['email'],'eloRating':0x4b0,'position':_0x3b2ed8,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0xd19c92,_0x5383c2),currentLadder==='DUOS'?_0x44b886['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x44b886['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x44b886[_0x1ccb25(0x148)]='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x58070f){console['error']('Error\x20joining\x20ladder:',_0x58070f),_0x44b886['textContent']='Error\x20joining\x20ladder:\x20'+_0x58070f[_0x1ccb25(0x166)],_0x44b886[_0x1ccb25(0x148)]=_0x1ccb25(0x16c),_0x1bf9b2['disabled']=![];}}