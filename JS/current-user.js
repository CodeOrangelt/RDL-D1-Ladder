const a12_0x338de8=a12_0x1516;(function(_0x1b3fbb,_0x1d503c){const _0x318670=a12_0x1516,_0x1506e1=_0x1b3fbb();while(!![]){try{const _0x3e6cdd=parseInt(_0x318670(0x1ec))/0x1*(parseInt(_0x318670(0x206))/0x2)+-parseInt(_0x318670(0x1f1))/0x3+-parseInt(_0x318670(0x219))/0x4+-parseInt(_0x318670(0x1bb))/0x5+parseInt(_0x318670(0x21b))/0x6*(-parseInt(_0x318670(0x1bf))/0x7)+-parseInt(_0x318670(0x1c1))/0x8+parseInt(_0x318670(0x1cc))/0x9;if(_0x3e6cdd===_0x1d503c)break;else _0x1506e1['push'](_0x1506e1['shift']());}catch(_0x155124){_0x1506e1['push'](_0x1506e1['shift']());}}}(a12_0x3ea1,0x6f241));const a12_0x34e227=(function(){let _0x5346f2=!![];return function(_0x12f5ac,_0x6c6e47){const _0x319c9e=_0x5346f2?function(){const _0x4780f9=a12_0x1516;if(_0x6c6e47){const _0x7ea075=_0x6c6e47[_0x4780f9(0x1ce)](_0x12f5ac,arguments);return _0x6c6e47=null,_0x7ea075;}}:function(){};return _0x5346f2=![],_0x319c9e;};}()),a12_0x59b5e7=a12_0x34e227(this,function(){const _0x22af7c=a12_0x1516;return a12_0x59b5e7[_0x22af7c(0x218)]()['search']('(((.+)+)+)+$')[_0x22af7c(0x218)]()['constructor'](a12_0x59b5e7)['search'](_0x22af7c(0x1c8));});a12_0x59b5e7();const a12_0x429b73=(function(){let _0x5b6edc=!![];return function(_0x11a6df,_0x222d99){const _0xa17c69=_0x5b6edc?function(){const _0x146498=a12_0x1516;if(_0x222d99){const _0x95c50e=_0x222d99[_0x146498(0x1ce)](_0x11a6df,arguments);return _0x222d99=null,_0x95c50e;}}:function(){};return _0x5b6edc=![],_0xa17c69;};}()),a12_0x18bb9=a12_0x429b73(this,function(){const _0x67e6ed=a12_0x1516,_0x5aeda3=function(){const _0x23229b=a12_0x1516;let _0x4941ac;try{_0x4941ac=Function(_0x23229b(0x1c4)+_0x23229b(0x20d)+');')();}catch(_0x32db44){_0x4941ac=window;}return _0x4941ac;},_0x417383=_0x5aeda3(),_0x4bd1ca=_0x417383[_0x67e6ed(0x210)]=_0x417383[_0x67e6ed(0x210)]||{},_0x393b8e=['log','warn',_0x67e6ed(0x1f7),_0x67e6ed(0x1e3),'exception',_0x67e6ed(0x1de),_0x67e6ed(0x1fc)];for(let _0x3142f8=0x0;_0x3142f8<_0x393b8e[_0x67e6ed(0x1ef)];_0x3142f8++){const _0x40b522=a12_0x429b73['constructor'][_0x67e6ed(0x1da)][_0x67e6ed(0x1fa)](a12_0x429b73),_0x327f67=_0x393b8e[_0x3142f8],_0x188557=_0x4bd1ca[_0x327f67]||_0x40b522;_0x40b522['__proto__']=a12_0x429b73[_0x67e6ed(0x1fa)](a12_0x429b73),_0x40b522[_0x67e6ed(0x218)]=_0x188557[_0x67e6ed(0x218)][_0x67e6ed(0x1fa)](_0x188557),_0x4bd1ca[_0x327f67]=_0x40b522;}});a12_0x18bb9();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{doc,getDoc,collection,query,where,getDocs,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a12_0x1516(_0xafa879,_0x523645){const _0x34834b=a12_0x3ea1();return a12_0x1516=function(_0x18bb9,_0x429b73){_0x18bb9=_0x18bb9-0x1b9;let _0x3a4393=_0x34834b[_0x18bb9];return _0x3a4393;},a12_0x1516(_0xafa879,_0x523645);}import{isAdmin}from'./admin-check.js';const ADMIN_EMAILS=[a12_0x338de8(0x1f4),a12_0x338de8(0x1fb)],userCache={'uid':null,'username':null,'isAdmin':![],'hasCheckedCollections':![],'lastChecked':0x0,'role':null},invitationCache={'lastCheck':0x0,'pendingCount':0x0,'checkInterval':0x493e0};function updateInboxNotification(_0x5775c8){const _0x3a0e94=a12_0x338de8,_0x22e6d7=document['getElementById'](_0x3a0e94(0x1e9));_0x22e6d7&&(_0x5775c8>0x0?(_0x22e6d7[_0x3a0e94(0x1b9)][_0x3a0e94(0x1d4)]=_0x3a0e94(0x1f6),_0x22e6d7[_0x3a0e94(0x21a)]=_0x5775c8>0x9?'9+':_0x5775c8):_0x22e6d7[_0x3a0e94(0x1b9)][_0x3a0e94(0x1d4)]=_0x3a0e94(0x1cd));}async function checkPendingInvitationsForCurrentUser(_0x5ef136){const _0x2ce84c=a12_0x338de8;try{const _0x43883f=Date['now']();if(_0x43883f-invitationCache[_0x2ce84c(0x1d9)]<invitationCache['checkInterval'])return updateInboxNotification(invitationCache[_0x2ce84c(0x1dc)]),invitationCache[_0x2ce84c(0x1dc)];invitationCache[_0x2ce84c(0x1d9)]=_0x43883f;const _0x2879f9=collection(db,'gameInvitations'),_0x4f43a1=query(_0x2879f9,where(_0x2ce84c(0x20a),'==',_0x5ef136),where(_0x2ce84c(0x20b),'==',_0x2ce84c(0x209)),limit(0x5)),_0x912dae=await getDocs(_0x4f43a1),_0x3bb060=_0x912dae[_0x2ce84c(0x211)];return invitationCache[_0x2ce84c(0x1dc)]=_0x3bb060,updateInboxNotification(_0x3bb060),_0x3bb060;}catch(_0x2e1e4d){return console['warn']('Could\x20not\x20check\x20pending\x20invitations\x20for\x20current\x20user:',_0x2e1e4d),0x0;}}function updateAuthSectionImmediate(_0x22ac90,_0x442be9=![]){const _0x34c0ac=a12_0x338de8,_0x280a82=document['getElementById']('auth-section');if(!_0x280a82)return;if(_0x22ac90&&_0x442be9)document[_0x34c0ac(0x1ca)](_0x34c0ac(0x204))[_0x34c0ac(0x1c5)](_0x377798=>{const _0x46b7dd=_0x34c0ac;_0x377798[_0x46b7dd(0x1b9)][_0x46b7dd(0x1d4)]=_0x46b7dd(0x1e5);});else!_0x22ac90&&document[_0x34c0ac(0x1ca)](_0x34c0ac(0x204))['forEach'](_0x33cbdc=>{const _0x441f90=_0x34c0ac;_0x33cbdc['style'][_0x441f90(0x1d4)]=_0x441f90(0x1cd);});if(_0x22ac90){const _0x1c0fca=userCache['username']||(_0x22ac90[_0x34c0ac(0x1ba)]?_0x22ac90[_0x34c0ac(0x1ba)][_0x34c0ac(0x1cf)]('@')[0x0]:_0x34c0ac(0x1d8)),_0x2df44b=userCache['role']?'\x20('+userCache['role']+')':_0x442be9?_0x34c0ac(0x1e4):'';_0x280a82[_0x34c0ac(0x1c3)]=_0x34c0ac(0x1e2)+_0x1c0fca+_0x2df44b+_0x34c0ac(0x213)+encodeURIComponent(_0x1c0fca)+_0x34c0ac(0x1d1);const _0x85e524=document[_0x34c0ac(0x1ed)](_0x34c0ac(0x20f));_0x85e524&&_0x85e524[_0x34c0ac(0x1d5)]('click',_0x528368=>{const _0x16b12b=_0x34c0ac;_0x528368['preventDefault']();const _0x189ea6=getAuth();updateAuthSectionImmediate(null),_0x189ea6[_0x16b12b(0x1c6)]()[_0x16b12b(0x1d6)](_0x6edf1=>{console['error']('Error\x20signing\x20out:',_0x6edf1);});}),_0x22ac90[_0x34c0ac(0x1ee)]&&setTimeout(()=>{const _0x5967ab=_0x34c0ac;checkPendingInvitationsForCurrentUser(_0x22ac90[_0x5967ab(0x1ee)]);},0x3e8);}else _0x280a82[_0x34c0ac(0x1c3)]=_0x34c0ac(0x1ea);}async function checkAdminRoles(_0x23fcd3){const _0x551110=a12_0x338de8;if(!_0x23fcd3||!_0x23fcd3['email'])return{'isAdmin':![],'role':null};try{console[_0x551110(0x1f5)](_0x551110(0x1d0)+_0x23fcd3[_0x551110(0x1ba)]);const _0x25e487=[_0x551110(0x200),_0x551110(0x1e8),_0x551110(0x207),_0x551110(0x1bc),_0x551110(0x1f3)],_0x4455ae=['council',_0x551110(0x1c0),'owner',_0x551110(0x1d2)];for(const _0x5f31c7 of _0x25e487){try{const _0x52e954=doc(db,_0x5f31c7,_0x23fcd3[_0x551110(0x1ee)]),_0x1986e8=await getDoc(_0x52e954);if(_0x1986e8['exists']()){const _0x47c9d3=_0x1986e8[_0x551110(0x208)]();console[_0x551110(0x1f5)](_0x551110(0x1dd)+_0x5f31c7+'\x20by\x20UID:',_0x47c9d3);let _0x289a54=(_0x47c9d3[_0x551110(0x1c2)]||_0x47c9d3[_0x551110(0x1eb)]||'')[_0x551110(0x1e6)](),_0x18d7a0=_0x47c9d3[_0x551110(0x1c2)]||_0x47c9d3['role']||'';if(_0x289a54&&_0x4455ae[_0x551110(0x212)](_0x289a54)){console['log'](_0x551110(0x202)+_0x289a54+'\x20in\x20'+_0x5f31c7);const _0x433f45=_0x18d7a0[_0x551110(0x1cf)]('\x20')[_0x551110(0x20c)](_0xa2c89a=>_0xa2c89a[_0x551110(0x1bd)](0x0)[_0x551110(0x1f8)]()+_0xa2c89a[_0x551110(0x1fe)](0x1)[_0x551110(0x1e6)]())[_0x551110(0x1be)]('\x20');return{'isAdmin':!![],'role':_0x433f45};}}}catch(_0x5c29c9){console[_0x551110(0x1e3)](_0x551110(0x215)+_0x5f31c7+_0x551110(0x1db),_0x5c29c9);}}for(const _0x1cbe08 of _0x25e487){try{const _0x2d2d0c=collection(db,_0x1cbe08);let _0xafd61a=query(_0x2d2d0c,where('email','==',_0x23fcd3[_0x551110(0x1ba)])),_0x469bf3=await getDocs(_0xafd61a);_0x469bf3[_0x551110(0x1ff)]&&(_0xafd61a=query(_0x2d2d0c,where(_0x551110(0x1ba),'==',_0x23fcd3[_0x551110(0x1ba)][_0x551110(0x1e6)]())),_0x469bf3=await getDocs(_0xafd61a));if(!_0x469bf3['empty']){const _0x5e5b7c=_0x469bf3[_0x551110(0x1df)][0x0][_0x551110(0x208)]();console[_0x551110(0x1f5)](_0x551110(0x1dd)+_0x1cbe08+_0x551110(0x201),_0x5e5b7c);let _0x487025=(_0x5e5b7c[_0x551110(0x1c2)]||_0x5e5b7c[_0x551110(0x1eb)]||'')[_0x551110(0x1e6)](),_0x3cff3c=_0x5e5b7c['roleName']||_0x5e5b7c[_0x551110(0x1eb)]||'';if(_0x487025&&_0x4455ae[_0x551110(0x212)](_0x487025)){console[_0x551110(0x1f5)](_0x551110(0x202)+_0x487025+_0x551110(0x205)+_0x1cbe08);const _0x46b474=_0x3cff3c['split']('\x20')[_0x551110(0x20c)](_0x19107f=>_0x19107f[_0x551110(0x1bd)](0x0)['toUpperCase']()+_0x19107f[_0x551110(0x1fe)](0x1)[_0x551110(0x1e6)]())[_0x551110(0x1be)]('\x20');return{'isAdmin':!![],'role':_0x46b474};}}}catch(_0x3471fe){console[_0x551110(0x1e3)](_0x551110(0x215)+_0x1cbe08+_0x551110(0x201),_0x3471fe);}}return console[_0x551110(0x1f5)](_0x551110(0x1d7)),{'isAdmin':![],'role':null};}catch(_0x1aeda3){return console[_0x551110(0x1e3)](_0x551110(0x20e),_0x1aeda3),{'isAdmin':![],'role':null};}}async function updateAuthSection(_0x5c89d6){const _0x3d6c3c=a12_0x338de8,_0x10faa3=_0x5c89d6&&isAdmin(_0x5c89d6[_0x3d6c3c(0x1ba)]);updateAuthSectionImmediate(_0x5c89d6,_0x10faa3);if(!_0x5c89d6){userCache[_0x3d6c3c(0x1ee)]=null,userCache['username']=null,userCache[_0x3d6c3c(0x1e1)]=![],userCache[_0x3d6c3c(0x1f9)]=![],userCache[_0x3d6c3c(0x1eb)]=null;return;}const _0xb17d79=Date[_0x3d6c3c(0x1fd)]();if(_0x5c89d6['uid']===userCache[_0x3d6c3c(0x1ee)]&&userCache['hasCheckedCollections']&&_0xb17d79-userCache[_0x3d6c3c(0x214)]<0x493e0)return;try{userCache['uid']=_0x5c89d6['uid'],userCache['lastChecked']=_0xb17d79;const _0x2339ad=isAdmin(_0x5c89d6[_0x3d6c3c(0x1ba)]);userCache['isAdmin']=_0x2339ad;if(!_0x2339ad){const {isAdmin:_0x50a628,role:_0x1985cb}=await checkAdminRoles(_0x5c89d6);userCache['isAdmin']=_0x50a628,userCache[_0x3d6c3c(0x1eb)]=_0x1985cb,_0x50a628&&(document['querySelectorAll']('.admin-only')[_0x3d6c3c(0x1c5)](_0x4956c8=>{const _0x485ef9=_0x3d6c3c;_0x4956c8[_0x485ef9(0x1b9)]['display']='block';}),updateAuthSectionImmediate(_0x5c89d6,!![]));}const _0x2ea87a=['players',_0x3d6c3c(0x1e8),_0x3d6c3c(0x207),'playersDuos',_0x3d6c3c(0x1c9),_0x3d6c3c(0x1bc),'userProfiles'],_0x5e7da7=_0x2ea87a['map'](_0xd72990=>getDoc(doc(db,_0xd72990,_0x5c89d6[_0x3d6c3c(0x1ee)]))[_0x3d6c3c(0x1e7)](_0x2f0de3=>_0x2f0de3[_0x3d6c3c(0x1c7)]()?{'collection':_0xd72990,'data':_0x2f0de3[_0x3d6c3c(0x208)]()}:null)[_0x3d6c3c(0x1d6)](()=>null)),_0x16cadf=await Promise[_0x3d6c3c(0x217)](_0x5e7da7),_0x12f831=_0x16cadf[_0x3d6c3c(0x216)](_0x1931ab=>_0x1931ab!==null);let _0x1e28e1=null;for(const _0x505bd0 of _0x12f831){if(_0x505bd0[_0x3d6c3c(0x208)]['username']){_0x1e28e1=_0x505bd0['data']['username'];break;}}userCache['username']=_0x1e28e1||(_0x5c89d6[_0x3d6c3c(0x1ba)]?_0x5c89d6[_0x3d6c3c(0x1ba)]['split']('@')[0x0]:_0x3d6c3c(0x1d8)),userCache[_0x3d6c3c(0x1f9)]=!![],updateAuthSectionImmediate(_0x5c89d6,userCache[_0x3d6c3c(0x1e1)]),setTimeout(()=>{checkPendingInvitationsForCurrentUser(_0x5c89d6['uid']);},0x1f4);}catch(_0x3e3a38){console[_0x3d6c3c(0x1e3)]('Error\x20in\x20full\x20auth\x20update:',_0x3e3a38);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x163548=a12_0x338de8,_0x438098=getAuth();onAuthStateChanged(_0x438098,async _0x58917e=>{await updateAuthSection(_0x58917e),_0x58917e&&checkPendingInvitationsForCurrentUser(_0x58917e['uid']);}),document[_0x163548(0x1d5)](_0x163548(0x1f2),()=>{const _0x4ed70c=_0x163548;!document[_0x4ed70c(0x1cb)]&&_0x438098[_0x4ed70c(0x1e0)]&&checkPendingInvitationsForCurrentUser(_0x438098[_0x4ed70c(0x1e0)][_0x4ed70c(0x1ee)]);}),document[_0x163548(0x1d5)](_0x163548(0x1d3),_0x1b6482=>{const _0xfc9d07=_0x163548;_0x1b6482['target'][_0xfc9d07(0x1f0)](_0xfc9d07(0x203))&&_0x438098[_0xfc9d07(0x1e0)]&&checkPendingInvitationsForCurrentUser(_0x438098[_0xfc9d07(0x1e0)][_0xfc9d07(0x1ee)]);});});export{updateAuthSection};function a12_0x3ea1(){const _0xe351af=['signOut','exists','(((.+)+)+)+$','playersCTF','querySelectorAll','hidden','19755414PCdoeG','none','apply','split','Checking\x20roles\x20for\x20user:\x20','\x22>Profile</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./inbox.html\x22\x20class=\x22nav-notification\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Inbox\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22inbox-notification\x22\x20class=\x22notification-dot\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22members.html\x22>Members</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./redeem.html\x22><i\x20class=\x22fas\x20fa-gift\x22></i>\x20Redeem</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20id=\x22logout-link\x22>Sign\x20Out</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','admin','click','display','addEventListener','catch','No\x20admin\x20roles\x20found\x20for\x20user','User','lastCheck','prototype','\x20by\x20UID:','pendingCount','Found\x20user\x20in\x20','table','docs','currentUser','isAdmin','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22nav-dropdown\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22nav-username\x22>','error','\x20(Admin)','block','toLowerCase','then','playersD2','inbox-notification','<a\x20href=\x22login.html\x22\x20class=\x22login-link\x22>Login</a>','role','162031oeRMCI','getElementById','uid','length','closest','123141zlaMOY','visibilitychange','userProfiles','admin@ladder.com','log','inline-block','info','toUpperCase','hasCheckedCollections','bind','Brian2af@outlook.com','trace','now','slice','empty','players','\x20by\x20email:','Found\x20admin\x20role:\x20','a[href]','.admin-only','\x20in\x20','2XgNJBA','playersD3','data','pending','toUserId','status','map','{}.constructor(\x22return\x20this\x22)(\x20)','Error\x20in\x20checkAdminRoles:','logout-link','console','size','includes','</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22nav-dropdown-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','lastChecked','Error\x20checking\x20','filter','all','toString','1643316iDWKjF','textContent','9594cKtxMR','style','email','2309330mPyXAA','nonParticipants','charAt','join','1547QhFdDa','creative\x20lead','5077784ObxsYb','roleName','innerHTML','return\x20(function()\x20','forEach'];a12_0x3ea1=function(){return _0xe351af;};return a12_0x3ea1();}