const a4_0x4c4826=a4_0x3732,a4_0x42d7db=(function(){let _0x91d064=!![];return function(_0x273e23,_0x480f6a){const _0x591c60=_0x91d064?function(){const _0x65cbfc=a4_0x3732;if(_0x480f6a){const _0x47ac35=_0x480f6a[_0x65cbfc(0x21f)](_0x273e23,arguments);return _0x480f6a=null,_0x47ac35;}}:function(){};return _0x91d064=![],_0x591c60;};}()),a4_0x2b10c3=a4_0x42d7db(this,function(){const _0x530eef=a4_0x3732,_0x508110=function(){let _0x499487;try{_0x499487=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x250f35){_0x499487=window;}return _0x499487;},_0x2e468a=_0x508110(),_0x427567=_0x2e468a['console']=_0x2e468a['console']||{},_0x44c971=['log','warn','info',_0x530eef(0x1f2),_0x530eef(0x2d6),_0x530eef(0x17e),_0x530eef(0x2a7)];for(let _0x24fafd=0x0;_0x24fafd<_0x44c971[_0x530eef(0x144)];_0x24fafd++){const _0x5be4ff=a4_0x42d7db['constructor'][_0x530eef(0x10b)]['bind'](a4_0x42d7db),_0x1817f6=_0x44c971[_0x24fafd],_0x550926=_0x427567[_0x1817f6]||_0x5be4ff;_0x5be4ff['__proto__']=a4_0x42d7db[_0x530eef(0xbb)](a4_0x42d7db),_0x5be4ff['toString']=_0x550926['toString'][_0x530eef(0xbb)](_0x550926),_0x427567[_0x1817f6]=_0x5be4ff;}});a4_0x2b10c3();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x3fa997){const _0x2fedee=a4_0x3732;if(!_0x3fa997)return'#ffffff';_0x3fa997=_0x3fa997[_0x2fedee(0x21d)]('#','');_0x3fa997['length']===0x3&&(_0x3fa997=_0x3fa997['split']('')['map'](_0x48d2af=>_0x48d2af+_0x48d2af)[_0x2fedee(0x1d2)](''));if(_0x3fa997['length']!==0x6)return'#ffffff';const _0x4a5a50=parseInt(_0x3fa997['substring'](0x0,0x2),0x10),_0x3f808d=parseInt(_0x3fa997['substring'](0x2,0x4),0x10),_0x1349a4=parseInt(_0x3fa997[_0x2fedee(0xfb)](0x4,0x6),0x10),_0x117810=(_0x4a5a50*0x12b+_0x3f808d*0x24b+_0x1349a4*0x72)/0x3e8;return _0x117810>=0x80?'#000000':_0x2fedee(0xc2);}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a4_0x4c4826(0x126)](a4_0x4c4826(0x25f),()=>{auth['onAuthStateChanged'](async _0x18e7e1=>{const _0x617d0a=a4_0x3732;if(!_0x18e7e1){window[_0x617d0a(0x258)][_0x617d0a(0x23e)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0x3502bb){console['error']('Error\x20initializing\x20dashboard:',_0x3502bb),showNotification('Error\x20setting\x20up\x20admin\x20dashboard',_0x617d0a(0x1f2));}});});async function getUserTabPermissions(_0x260f5c){const _0x4087d4=a4_0x4c4826;if(!_0x260f5c)return[_0x4087d4(0x174)];console[_0x4087d4(0xea)]('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x260f5c+'\x20in\x20all\x20collections...');const _0x24b99e=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':_0x4087d4(0x2c3),'displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':_0x4087d4(0x270)},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x4b8ce9=auth['currentUser'];let _0x1237b1=null,_0xc6d248=null;for(const _0x4e859a of _0x24b99e){try{if(_0x4b8ce9){const _0x40965d=doc(db,_0x4e859a[_0x4087d4(0x2fb)],_0x4b8ce9['uid']),_0x43da3c=await getDoc(_0x40965d);if(_0x43da3c['exists']()){const _0x45b134=_0x43da3c['data']();console[_0x4087d4(0xea)]('Found\x20user\x20in\x20'+_0x4e859a['displayName']+'\x20by\x20UID:',_0x45b134);const _0x460a5f=(_0x45b134[_0x4087d4(0x267)]||_0x45b134['role']||'')[_0x4087d4(0x17c)]();if(_0x460a5f&&_0x460a5f!=='none'){_0x1237b1=_0x460a5f,_0xc6d248=_0x4e859a['displayName'],console[_0x4087d4(0xea)](_0x4087d4(0x202)+_0x1237b1+_0x4087d4(0x1bc)+_0xc6d248);break;}}}if(!_0x1237b1){const _0x573e2a=collection(db,_0x4e859a['name']),_0x3b7744=query(_0x573e2a,where(_0x4087d4(0xf4),'==',_0x260f5c)),_0xf0f82d=await getDocs(_0x3b7744);if(!_0xf0f82d[_0x4087d4(0x2a9)]){const _0x8b2d6b=_0xf0f82d['docs'][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0x4e859a[_0x4087d4(0x2a5)]+'\x20with\x20email\x20'+_0x260f5c+':',_0x8b2d6b);const _0x26278e=(_0x8b2d6b['roleName']||_0x8b2d6b[_0x4087d4(0x149)]||'')[_0x4087d4(0x17c)]();if(_0x26278e&&_0x26278e!==_0x4087d4(0x1a3)){_0x1237b1=_0x26278e,_0xc6d248=_0x4e859a['displayName'],console[_0x4087d4(0xea)]('Found\x20specific\x20role:\x20'+_0x1237b1+'\x20in\x20'+_0xc6d248);break;}}}}catch(_0x19a588){console[_0x4087d4(0x1f2)]('Error\x20checking\x20'+_0x4e859a['displayName']+':',_0x19a588);}}if(_0x1237b1){console[_0x4087d4(0xea)]('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x1237b1+'\x20(from\x20'+_0xc6d248+')');const _0x5ee007={'admin':[_0x4087d4(0x174),'manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings',_0x4087d4(0x27b),'elo-history',_0x4087d4(0x16e),'user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings',_0x4087d4(0x27b),'elo-history','manage-highlights','user-roles-section','manage-matches','manage-points',_0x4087d4(0x265),'manage-ribbons'],'council':[_0x4087d4(0x174),_0x4087d4(0x288),'manage-matches'],'creative\x20lead':[_0x4087d4(0x174),'manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x5ee007[_0x1237b1])return console[_0x4087d4(0xea)]('Role\x20\x27'+_0x1237b1+_0x4087d4(0x163),_0x5ee007[_0x1237b1]),_0x5ee007[_0x1237b1];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x260f5c+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x5ab8e0=[]){const _0xfb623a=a4_0x4c4826,_0x556269=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x3e871f=document['querySelectorAll']('.admin-section');(!_0x5ab8e0||_0x5ab8e0['length']===0x0)&&(_0x5ab8e0=['dashboard']);_0x556269['forEach'](_0x4ebdd8=>{const _0x4d0fe1=a4_0x3732,_0x1ea459=_0x4ebdd8['getAttribute'](_0x4d0fe1(0x1de));_0x5ab8e0['includes'](_0x1ea459)?_0x4ebdd8[_0x4d0fe1(0x28d)]['display']='flex':_0x4ebdd8['style']['display']=_0x4d0fe1(0x1a3),_0x4ebdd8['addEventListener']('click',()=>{const _0x43e95c=_0x4d0fe1,_0x20e32c=_0x4ebdd8[_0x43e95c(0x244)]('data-section');if(!_0x5ab8e0['includes'](_0x20e32c)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x556269[_0x43e95c(0x2d4)](_0x268f2b=>_0x268f2b['classList']['remove']('active')),_0x4ebdd8[_0x43e95c(0x2ad)][_0x43e95c(0x1f3)]('active'),_0x3e871f['forEach'](_0x51bb5d=>{_0x51bb5d['style']['display']='none';});const _0xa179a4=document[_0x43e95c(0x215)](_0x20e32c);_0xa179a4&&(_0xa179a4['style'][_0x43e95c(0x20d)]=_0x43e95c(0xf0),console['log']('Switched\x20to\x20'+_0x20e32c+'\x20section'));});});const _0x4837f4=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x5ab8e0[0x0]+'\x22]');_0x4837f4&&_0x4837f4['click'](),console['log'](_0xfb623a(0x121));}function setupTabNavigation(){const _0x18e071=document['querySelectorAll']('.nav-item');let _0x12532d=null,_0x5987fa=new Set();_0x18e071['forEach'](_0x401dd9=>{const _0x180f0a=a4_0x3732;_0x401dd9['addEventListener'](_0x180f0a(0x2ea),function(){const _0x2a8e87=_0x180f0a,_0x3bd34a=this['getAttribute']('data-section');if(_0x3bd34a===_0x12532d)return;_0x12532d&&(document[_0x2a8e87(0x215)](_0x12532d)[_0x2a8e87(0x28d)]['display']='none',_0x18e071['forEach'](_0x3386f5=>_0x3386f5[_0x2a8e87(0x2ad)]['remove']('active'))),document['getElementById'](_0x3bd34a)['style']['display']='block',this['classList'][_0x2a8e87(0x1f3)]('active'),_0x12532d=_0x3bd34a;});});}function loadSectionData(_0x35a586){return;}async function initializeAdminDashboard(){const _0x1cab74=a4_0x4c4826;try{const _0x3f24db=auth[_0x1cab74(0xff)],_0x2f9aa9=await getUserTabPermissions(_0x3f24db['email']);console['log'](_0x1cab74(0x2c0)+_0x3f24db['email']+'\x20allowed\x20tabs:',_0x2f9aa9),window['userAllowedTabs']=_0x2f9aa9,setupSidebarNavigation(_0x2f9aa9),setupLadderSelector(),setupDashboardSection(),_0x2f9aa9['includes']('manage-players')&&setupManagePlayersSection(),_0x2f9aa9['includes'](_0x1cab74(0x184))&&setupEloHistorySection(),_0x2f9aa9[_0x1cab74(0x175)]('manage-ranks')&&setupRankControls(),_0x2f9aa9['includes']('manage-articles')&&setupManageArticlesSection(),_0x2f9aa9[_0x1cab74(0x175)]('user-roles-section')&&setupUserRolesSection(),_0x2f9aa9[_0x1cab74(0x175)]('manage-trophies')&&setupTrophyManagementSection(),_0x2f9aa9['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x2f9aa9['includes'](_0x1cab74(0x12e))&&setupInactivePlayersSection(),_0x2f9aa9['includes']('manage-matches')&&setupManageMatchesSection(),_0x2f9aa9[_0x1cab74(0x175)]('manage-points')&&setupManagePointsSection(),_0x2f9aa9[_0x1cab74(0x175)]('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x2f9aa9);}catch(_0x7a1127){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x7a1127);}}function setupDataLoadButtons(_0x3c3759=[]){const _0x5ab885=a4_0x4c4826;(!_0x3c3759||_0x3c3759[_0x5ab885(0x144)]===0x0)&&(_0x3c3759=['dashboard']);const _0x591f55=document['getElementById']('load-dashboard-data');_0x591f55&&_0x591f55['addEventListener']('click',function(){const _0xbd5f77=_0x5ab885;this[_0xbd5f77(0x2ad)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0x1eabd9=_0xbd5f77;this[_0x1eabd9(0x2ad)]['remove'](_0x1eabd9(0x206)),this['innerHTML']=_0x1eabd9(0x2ee);})[_0xbd5f77(0x276)](_0x1af5fd=>{const _0x5da363=_0xbd5f77;console['error']('Error\x20loading\x20dashboard:',_0x1af5fd),this[_0x5da363(0x2ad)]['remove'](_0x5da363(0x206)),this['innerHTML']=_0x5da363(0x224),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x3c3759['includes']('manage-trophies')){const _0x5e453d=document[_0x5ab885(0x215)]('load-trophies-data');_0x5e453d&&_0x5e453d[_0x5ab885(0x126)](_0x5ab885(0x2ea),function(){const _0x2b7809=_0x5ab885;console[_0x2b7809(0xea)]('Load\x20trophies\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x4bc02a=_0x2b7809;this['classList']['remove'](_0x4bc02a(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})[_0x2b7809(0x276)](_0x492fe8=>{const _0xb7cc2f=_0x2b7809;console['error']('Error\x20loading\x20trophies:',_0x492fe8),this[_0xb7cc2f(0x2ad)]['remove']('loading'),this[_0xb7cc2f(0x1a1)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x3c3759['includes'](_0x5ab885(0x288))){const _0x183fd2=document['getElementById']('load-players-data');_0x183fd2&&_0x183fd2[_0x5ab885(0x126)]('click',function(){const _0x47e202=_0x5ab885;console['log']('Load\x20players\x20data\x20clicked'),this[_0x47e202(0x2ad)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x47e202(0x221)](()=>{const _0x5afde5=_0x47e202;this['classList'][_0x5afde5(0x2e5)]('loading'),this[_0x5afde5(0x1a1)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x59ecf3=>{const _0x2e90f3=_0x47e202;console[_0x2e90f3(0x1f2)]('Error\x20loading\x20players:',_0x59ecf3),this[_0x2e90f3(0x2ad)][_0x2e90f3(0x2e5)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x3c3759[_0x5ab885(0x175)]('elo-history')){const _0x195fee=document['getElementById']('load-elo-history-data');_0x195fee&&_0x195fee['addEventListener']('click',function(){const _0x2e9788=_0x5ab885;console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x2e9788(0x1a1)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x280002=>{const _0x3dfabd=_0x2e9788;console['error'](_0x3dfabd(0x280),_0x280002),this['classList'][_0x3dfabd(0x2e5)]('loading'),this[_0x3dfabd(0x1a1)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x3c3759['includes']('manage-articles')){const _0x42ccb0=document['getElementById']('load-articles-data');_0x42ccb0&&_0x42ccb0['addEventListener']('click',function(){const _0x5e5371=_0x5ab885;console[_0x5e5371(0xea)](_0x5e5371(0x11b)),this['classList'][_0x5e5371(0x1f3)](_0x5e5371(0x206)),this[_0x5e5371(0x1a1)]=_0x5e5371(0x1da),loadArticles()['then'](()=>{const _0x33f22d=_0x5e5371;this[_0x33f22d(0x2ad)]['remove']('loading'),this['innerHTML']=_0x33f22d(0x19b);})['catch'](_0x8f4945=>{const _0x57596a=_0x5e5371;console['error'](_0x57596a(0xf9),_0x8f4945),this['classList']['remove']('loading'),this[_0x57596a(0x1a1)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2c19c0=_0x57596a;this['innerHTML']=_0x2c19c0(0x19b);},0xbb8);});});}if(_0x3c3759['includes'](_0x5ab885(0x1d8))){const _0x61c2b6=document['getElementById']('load-users-data');_0x61c2b6&&_0x61c2b6[_0x5ab885(0x126)]('click',function(){const _0x843270=_0x5ab885;console['log'](_0x843270(0x230)),this[_0x843270(0x2ad)]['add'](_0x843270(0x206)),this[_0x843270(0x1a1)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x21f097=_0x843270;this['classList'][_0x21f097(0x2e5)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x395745=>{const _0x5b1344=_0x843270;console['error'](_0x5b1344(0x1bf),_0x395745),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x3c3759['includes']('inactive-players')){const _0x44f42b=document['getElementById']('load-inactive-players-data');_0x44f42b&&_0x44f42b['addEventListener'](_0x5ab885(0x2ea),function(){const _0x34ea78=_0x5ab885;console[_0x34ea78(0xea)]('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x5b188f=_0x34ea78;this['classList'][_0x5b188f(0x2e5)]('loading'),this['innerHTML']=_0x5b188f(0x16d);})['catch'](_0x9a229b=>{const _0x26b4d6=_0x34ea78;console['error']('Error\x20loading\x20inactive\x20players:',_0x9a229b),this[_0x26b4d6(0x2ad)]['remove']('loading'),this[_0x26b4d6(0x1a1)]=_0x26b4d6(0x224),setTimeout(()=>{const _0x27eb7d=_0x26b4d6;this[_0x27eb7d(0x1a1)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x3c3759[_0x5ab885(0x175)]('manage-highlights')){const _0x4019bf=document[_0x5ab885(0x215)]('load-highlights-data');_0x4019bf&&_0x4019bf['addEventListener']('click',function(){const _0x285ce6=_0x5ab885;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList'][_0x285ce6(0x1f3)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x26c45c=_0x285ce6;this['classList']['remove'](_0x26c45c(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x52149c=>{const _0x59704c=_0x285ce6;console[_0x59704c(0x1f2)]('Error\x20loading\x20highlights:',_0x52149c),this['classList']['remove'](_0x59704c(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x3c3759['includes']('manage-matches')){const _0x4195da=document['getElementById'](_0x5ab885(0x2b2));_0x4195da&&_0x4195da[_0x5ab885(0x126)]('click',function(){const _0x3d9369=_0x5ab885;console['log']('Load\x20matches\x20data\x20clicked'),this['classList'][_0x3d9369(0x1f3)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x3d9369(0x221)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x4871e8=>{const _0x4245f0=_0x3d9369;console['error']('Error\x20loading\x20matches:',_0x4871e8),this['classList']['remove']('loading'),this[_0x4245f0(0x1a1)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x3c3759['includes'](_0x5ab885(0x27c))){const _0x3a2333=document[_0x5ab885(0x215)]('load-ribbons-data');_0x3a2333&&_0x3a2333['addEventListener']('click',function(){const _0x380e8d=_0x5ab885;console['log'](_0x380e8d(0x1ad)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x456987=_0x380e8d;this['classList']['remove'](_0x456987(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x400724=>{const _0x4113f5=_0x380e8d;console[_0x4113f5(0x1f2)](_0x4113f5(0xb6),_0x400724),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x39c645=_0x4113f5;this[_0x39c645(0x1a1)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x4d1394=a4_0x4c4826;document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x4d1394(0x251))['textContent']='-',document['getElementById']('pending-count')[_0x4d1394(0x18b)]='-',document['getElementById']('rejected-count')[_0x4d1394(0x18b)]='-';}function setupLadderSelector(){const _0x221f9f=a4_0x4c4826,_0x1ad0a5=document['querySelectorAll'](_0x221f9f(0x14a));_0x1ad0a5['forEach'](_0x5777fc=>{_0x5777fc['addEventListener']('change',()=>{const _0x846007=a4_0x3732;currentLadder=_0x5777fc[_0x846007(0x12d)],document[_0x846007(0x1a0)]['setAttribute']('data-ladder',currentLadder);const _0x3d87d0=document['getElementById'](_0x846007(0xc8));_0x3d87d0&&(_0x3d87d0[_0x846007(0x18b)]=currentLadder),document[_0x846007(0x215)]('player-count')[_0x846007(0x18b)]='-',document[_0x846007(0x215)](_0x846007(0x251))[_0x846007(0x18b)]='-',document[_0x846007(0x215)]('pending-count')[_0x846007(0x18b)]='-',document['getElementById'](_0x846007(0x285))[_0x846007(0x18b)]='-',charts['rankDistribution']&&(charts[_0x846007(0x2f9)]['destroy'](),charts['rankDistribution']=null),charts[_0x846007(0x25b)]&&(charts['activity']['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x846007(0x261));});});const _0x5a10a3=document['getElementById']('current-ladder-display');_0x5a10a3&&(_0x5a10a3[_0x221f9f(0x18b)]=currentLadder);}async function loadDashboardOverview(){const _0x4cfbe2=a4_0x4c4826;try{console[_0x4cfbe2(0xea)]('Loading\x20dashboard\x20overview\x20data...'),document[_0x4cfbe2(0x215)]('player-count')['textContent']='-',document['getElementById'](_0x4cfbe2(0x251))['textContent']='-',document['getElementById']('pending-count')[_0x4cfbe2(0x18b)]='-',document['getElementById']('rejected-count')[_0x4cfbe2(0x18b)]='-';const _0x41a262=currentLadder==='D1'?'players':currentLadder==='D2'?_0x4cfbe2(0x279):_0x4cfbe2(0x219),_0x3ea740=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x11f508=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?_0x4cfbe2(0x262):'pendingMatchesD3',_0x1a775a=currentLadder==='D1'?_0x4cfbe2(0x14e):currentLadder==='D2'?'RejectedD2':_0x4cfbe2(0x283);console[_0x4cfbe2(0xea)](_0x4cfbe2(0x118)+currentLadder+':\x20'+_0x41a262+',\x20'+_0x3ea740);const _0x5a64c7=await getDocs(collection(db,_0x41a262)),_0x2668ea=_0x5a64c7['size'],_0x488f9f=await getDocs(collection(db,_0x3ea740)),_0xe68a07=_0x488f9f['size'],_0x2063f7=await getDocs(collection(db,_0x11f508)),_0x200e7a=_0x2063f7[_0x4cfbe2(0x248)],_0x425b0f=await getDocs(collection(db,_0x1a775a)),_0x46c204=_0x425b0f['size'];return document['getElementById']('player-count')[_0x4cfbe2(0x18b)]=_0x2668ea,document['getElementById']('match-count')[_0x4cfbe2(0x18b)]=_0xe68a07,document['getElementById']('pending-count')['textContent']=_0x200e7a,document['getElementById']('rejected-count')[_0x4cfbe2(0x18b)]=_0x46c204,await createRankDistributionChart(),await createActivityChart(),console[_0x4cfbe2(0xea)]('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x1cff3d){console[_0x4cfbe2(0x1f2)](_0x4cfbe2(0x299),_0x1cff3d);throw _0x1cff3d;}}async function createRankDistributionChart(){const _0x5b1e2b=a4_0x4c4826;try{const _0x338cba=collection(db,currentLadder==='D1'?_0x5b1e2b(0x2c3):'playersD2'),_0x1360d4=await getDocs(_0x338cba),_0x485b18={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x1360d4['forEach'](_0x3025dc=>{const _0x552da2=_0x5b1e2b,_0x91747c=_0x3025dc['data'](),_0x4d3e21=_0x91747c[_0x552da2(0x150)]||0x4b0;if(_0x4d3e21>=0x7d0)_0x485b18['Emerald']++;else{if(_0x4d3e21>=0x708)_0x485b18['Gold']++;else{if(_0x4d3e21>=0x640)_0x485b18['Silver']++;else{if(_0x4d3e21>=0x578)_0x485b18['Bronze']++;else _0x485b18['Unranked']++;}}}});const _0x507e0b=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution'][_0x5b1e2b(0x205)](),charts['rankDistribution']=new Chart(_0x507e0b,{'type':'doughnut','data':{'labels':Object['keys'](_0x485b18),'datasets':[{'data':Object['values'](_0x485b18),'backgroundColor':[_0x5b1e2b(0xe3),'#CD7F32','#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x5b1e2b(0x2d5)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':_0x5b1e2b(0x2d5),'font':{'size':0x10}}}}});}catch(_0x20ea6a){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x20ea6a),document[_0x5b1e2b(0x215)](_0x5b1e2b(0x166))[_0x5b1e2b(0x1a1)]=_0x5b1e2b(0x29a);}}async function createActivityChart(){const _0x1f3e9d=a4_0x4c4826;try{const _0x4785ca=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x579911=collection(db,_0x4785ca),_0x56f5e5=new Date();_0x56f5e5['setDate'](_0x56f5e5['getDate']()-0x7);const _0x3e1134=query(_0x579911,where('approvedAt','>=',_0x56f5e5),orderBy('approvedAt',_0x1f3e9d(0x24d))),_0x37075c=await getDocs(_0x3e1134),_0x1f3950=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],_0x1caf9b=_0x1f3950['reduce']((_0x27765b,_0x4e9b88)=>({..._0x27765b,[_0x4e9b88]:0x0}),{});_0x37075c['forEach'](_0x4f7562=>{const _0x49de28=_0x4f7562['data']();if(_0x49de28['approvedAt']){const _0x1c7eeb=_0x1f3950[new Date(_0x49de28['approvedAt']['seconds']*0x3e8)['getDay']()];_0x1caf9b[_0x1c7eeb]++;}});const _0x489b96=document[_0x1f3e9d(0x215)]('activity-chart');charts['activity']&&charts[_0x1f3e9d(0x25b)]['destroy'](),charts['activity']=new Chart(_0x489b96,{'type':'bar','data':{'labels':_0x1f3950,'datasets':[{'label':_0x1f3e9d(0x1ab),'data':_0x1f3950['map'](_0x532ae7=>_0x1caf9b[_0x532ae7]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':_0x1f3e9d(0x209),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x1f3e9d(0x140)}},'x':{'ticks':{'color':_0x1f3e9d(0x2d5)},'grid':{'color':_0x1f3e9d(0x140)}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':_0x1f3e9d(0x2d5),'font':{'size':0x10}}}}});}catch(_0x17eb10){console['error']('Error\x20creating\x20activity\x20chart:',_0x17eb10),document['getElementById'](_0x1f3e9d(0x100))[_0x1f3e9d(0x1a1)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x468522=a4_0x4c4826,_0x4a6f9f=document['getElementById']('players-table-body');if(!_0x4a6f9f)return;_0x4a6f9f['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x23728c='players';if(currentLadder==='D2')_0x23728c='playersD2';else currentLadder==='D3'&&(_0x23728c='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x23728c+'\x20collection...');const _0x404c19=collection(db,_0x23728c),_0x36dbb2=query(_0x404c19,orderBy(_0x468522(0x150),'desc')),_0x489ce8=await getDocs(_0x36dbb2);if(_0x489ce8[_0x468522(0x2a9)]){_0x4a6f9f[_0x468522(0x1a1)]=_0x468522(0x157);return;}_0x4a6f9f['innerHTML']='';let _0x417c30=0x1;_0x489ce8['forEach'](_0xf25949=>{const _0x131629=_0x468522,_0x35b3bd=_0xf25949['data'](),_0x38f044=getRankFromElo(_0x35b3bd[_0x131629(0x150)]||0x4b0),_0x5a4f4a=getRankStyle(_0x35b3bd[_0x131629(0x150)]||0x4b0),_0x4ba731=document[_0x131629(0x12c)]('tr');_0x4ba731['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x417c30+_0x131629(0x1bb)+_0x5a4f4a[_0x131629(0x239)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x35b3bd[_0x131629(0xb3)]||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x35b3bd[_0x131629(0x150)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x5a4f4a[_0x131629(0x239)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x38f044+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x35b3bd['wins']||0x0)+_0x131629(0x228)+(_0x35b3bd['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0xf25949['id']+_0x131629(0xe7)+_0xf25949['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4a6f9f['appendChild'](_0x4ba731),_0x417c30++;}),setupPlayerActionButtons();}catch(_0x2d0db9){console[_0x468522(0x1f2)](_0x468522(0x179),_0x2d0db9),_0x4a6f9f['innerHTML']=_0x468522(0x24a)+_0x2d0db9['message']+_0x468522(0x1c1);}}function getRankFromElo(_0xba62c5){const _0x45da97=a4_0x4c4826;if(_0xba62c5>=0x7d0)return'Emerald';if(_0xba62c5>=0x708)return _0x45da97(0x223);if(_0xba62c5>=0x640)return'Silver';if(_0xba62c5>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x329316=a4_0x4c4826;document[_0x329316(0x2ab)]('.edit-btn')['forEach'](_0x5c6932=>{_0x5c6932['addEventListener']('click',async _0x5b408a=>{const _0x345e3c=_0x5b408a['currentTarget']['dataset']['id'];openEditPlayerModal(_0x345e3c);});}),document[_0x329316(0x2ab)]('.delete-btn')['forEach'](_0x5cd966=>{const _0x2de405=_0x329316;_0x5cd966['addEventListener'](_0x2de405(0x2ea),async _0xd1d9ad=>{const _0x11b7fe=_0x2de405,_0x3bb3ac=_0xd1d9ad[_0x11b7fe(0x12a)]['dataset']['id'];confirmDeletePlayer(_0x3bb3ac);});});}async function openEditPlayerModal(_0x43f54d){const _0x266a57=a4_0x4c4826;try{const _0xc4e428=currentLadder==='D1'?'players':'playersD2',_0x22ed97=doc(db,_0xc4e428,_0x43f54d),_0x243c78=await getDoc(_0x22ed97);if(!_0x243c78['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x200fa9=_0x243c78['data'](),_0x357609=document['getElementById']('edit-player-modal'),_0x204502=document['getElementById']('edit-username'),_0x14be74=document['getElementById']('edit-elo'),_0xf2d223=document[_0x266a57(0x215)](_0x266a57(0x11e)),_0x370b97=document[_0x266a57(0x215)](_0x266a57(0x124));_0x204502['value']=_0x200fa9['username']||'',_0x14be74['value']=_0x200fa9['eloRating']||0x4b0,_0xf2d223['value']=_0x200fa9['wins']||0x0,_0x370b97['value']=_0x200fa9['losses']||0x0,_0x357609[_0x266a57(0x23d)][_0x266a57(0x103)]=_0x43f54d,_0x357609[_0x266a57(0x2ad)]['add']('active');}catch(_0x57f609){console['error']('Error\x20opening\x20edit\x20modal:',_0x57f609),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x135dae=a4_0x4c4826;try{const _0x2c72c3=document['getElementById']('edit-player-modal'),_0x442d44=_0x2c72c3['dataset']['playerId'];if(!_0x442d44){showNotification(_0x135dae(0xc5),'error');return;}const _0x1887c=document['getElementById'](_0x135dae(0xd7)),_0x598c7d=document['getElementById']('edit-elo'),_0x13ab7d=document['getElementById'](_0x135dae(0x11e)),_0x2fbcaa=document['getElementById'](_0x135dae(0x124)),_0xf32738=_0x1887c['value']['trim'](),_0x547850=parseInt(_0x598c7d['value']),_0xc35df=parseInt(_0x13ab7d['value']),_0x866c46=parseInt(_0x2fbcaa['value']);if(!_0xf32738||isNaN(_0x547850)){showNotification(_0x135dae(0x180),'error');return;}const _0xb4e052=currentLadder==='D1'?_0x135dae(0x2c3):_0x135dae(0x279),_0x30c89d=doc(db,_0xb4e052,_0x442d44),_0x46359a=await getDoc(_0x30c89d),_0x3a3586=_0x46359a['exists']()?_0x46359a[_0x135dae(0x195)]():{},_0x13844b=_0x3a3586['eloRating']||0x4b0;await updateDoc(_0x30c89d,{'username':_0xf32738,'eloRating':_0x547850,'wins':_0xc35df||0x0,'losses':_0x866c46||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x135dae(0xf4)]});if(_0x547850!==_0x13844b){const _0xa51edd=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0xa51edd),{'player':_0xf32738,'previousElo':_0x13844b,'newElo':_0x547850,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser'][_0x135dae(0xf4)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x14b730){console['error'](_0x135dae(0x164),_0x14b730),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x14b730[_0x135dae(0x2db)],'error');}}function closeEditPlayerModal(){const _0xf93e99=a4_0x4c4826,_0x497da0=document['getElementById']('edit-player-modal');_0x497da0['classList'][_0xf93e99(0x2e5)]('active'),_0x497da0[_0xf93e99(0x23d)]['playerId']='';}async function confirmDeletePlayer(_0x1c537a){const _0x51b7c2=a4_0x4c4826;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0xdea984=currentLadder==='D1'?'players':_0x51b7c2(0x279);await deleteDoc(doc(db,_0xdea984,_0x1c537a)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully',_0x51b7c2(0x1e4));}catch(_0xe8f578){console['error'](_0x51b7c2(0x235),_0xe8f578),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0xe8f578['message'],'error');}}async function setupManagePlayersSection(){const _0x407a35=a4_0x4c4826,_0x23eea4=document['getElementById']('add-player-form');_0x23eea4&&_0x23eea4['addEventListener'](_0x407a35(0x1e8),async _0x5a53ee=>{const _0xe55a83=_0x407a35;_0x5a53ee[_0xe55a83(0x20e)](),await addNewPlayer();});const _0x300aa4=document[_0x407a35(0x215)](_0x407a35(0x278));_0x300aa4&&_0x300aa4['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0xbf0943=document['getElementById']('save-player-btn');_0xbf0943&&_0xbf0943[_0x407a35(0x126)]('click',saveEditedPlayer);const _0xdedc52=document['getElementById']('cancel-edit-btn');_0xdedc52&&_0xdedc52['addEventListener']('click',closeEditPlayerModal);const _0x2d8b3e=document['getElementById']('edit-player-modal');_0x2d8b3e&&_0x2d8b3e['addEventListener']('click',_0x325ffe=>{_0x325ffe['target']===_0x2d8b3e&&closeEditPlayerModal();});const _0x124d38=document[_0x407a35(0x215)]('players-ladder-selector');_0x124d38&&_0x124d38[_0x407a35(0x126)]('change',()=>{const _0x5ba727=_0x407a35;currentLadder=_0x124d38[_0x5ba727(0x12d)],loadPlayersData();});}async function addNewPlayer(){const _0x51d9f7=a4_0x4c4826;try{const _0x2a8c86=document['getElementById']('new-player-username'),_0x51f703=document[_0x51d9f7(0x215)](_0x51d9f7(0x249)),_0x74d2ab=_0x2a8c86['value'][_0x51d9f7(0x26e)](),_0x3f0b85=parseInt(_0x51f703['value'])||0x4b0;if(!_0x74d2ab){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log'](_0x51d9f7(0x2ec)+_0x74d2ab+'\x20with\x20ELO\x20'+_0x3f0b85+_0x51d9f7(0x264)+currentLadder+_0x51d9f7(0x13c));let _0x3448b5=_0x51d9f7(0x2c3),_0x39a519='eloHistory';if(currentLadder==='D2')_0x3448b5='playersD2',_0x39a519='eloHistoryD2';else currentLadder==='D3'&&(_0x3448b5=_0x51d9f7(0x219),_0x39a519='eloHistoryD3');const _0x27ebb2=query(collection(db,_0x3448b5),where('username','==',_0x74d2ab)),_0x3be8c2=await getDocs(_0x27ebb2);if(!_0x3be8c2['empty']){alert('Username\x20'+_0x74d2ab+_0x51d9f7(0x211)+currentLadder+_0x51d9f7(0x13c));return;}const _0x4983c4=auth['currentUser'],_0x216b81={'username':_0x74d2ab,'eloRating':_0x3f0b85,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x4983c4?_0x4983c4['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x3448b5),_0x216b81),await addDoc(collection(db,_0x39a519),{'player':_0x74d2ab,'previousElo':0x4b0,'newElo':_0x3f0b85,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x4983c4?_0x4983c4[_0x51d9f7(0xf4)]:'admin','gameMode':currentLadder}),_0x2a8c86['value']='',_0x51f703['value']='1200',alert('Player\x20'+_0x74d2ab+_0x51d9f7(0x2af)+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0xf9192d){console['error']('Error\x20adding\x20player:',_0xf9192d),alert('Error\x20adding\x20player:\x20'+_0xf9192d[_0x51d9f7(0x2db)]);}}document[a4_0x4c4826(0x126)]('DOMContentLoaded',()=>{const _0x39756d=a4_0x4c4826,_0x3f787c=document['getElementById']('add-player-form');_0x3f787c&&_0x3f787c[_0x39756d(0x126)]('submit',_0x2300b9=>{const _0x1e1663=_0x39756d;_0x2300b9[_0x1e1663(0x20e)](),addNewPlayer();});});function filterPlayerTable(){const _0x391b05=a4_0x4c4826,_0x9e39c6=document['getElementById']('player-search')['value']['toLowerCase'](),_0x2925be=document[_0x391b05(0x2ab)]('#players-table-body\x20tr');let _0x57bb86=0x0;_0x2925be[_0x391b05(0x2d4)](_0x58cf4f=>{const _0x55cc57=_0x391b05,_0x1d1f6b=_0x58cf4f[_0x55cc57(0xc4)]('.username')?.[_0x55cc57(0x18b)]['toLowerCase']()||'';_0x1d1f6b['includes'](_0x9e39c6)?(_0x58cf4f['style'][_0x55cc57(0x20d)]='',_0x57bb86++):_0x58cf4f['style']['display']=_0x55cc57(0x1a3);});const _0x964011=document['getElementById']('no-results-message');_0x964011&&(_0x57bb86===0x0&&_0x9e39c6!==''?_0x964011['style']['display']=_0x391b05(0xf0):_0x964011['style'][_0x391b05(0x20d)]='none');}function debounce(_0x10f311,_0x19e24d){let _0x279d88;return function(..._0x20577f){clearTimeout(_0x279d88),_0x279d88=setTimeout(()=>_0x10f311['apply'](this,_0x20577f),_0x19e24d);};}async function loadEloHistory(_0x4f8a4a=0x1){const _0x5d0d9e=a4_0x4c4826,_0x5ed596=document[_0x5d0d9e(0x215)]('elo-history-table-body'),_0x2f6594=currentLadder['toLowerCase']();if(!_0x5ed596)return;_0x5ed596[_0x5d0d9e(0x1a1)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x4448de=currentLadder==='D1'?_0x5d0d9e(0x216):currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x332e34=collection(db,_0x4448de);let _0x2e4c23;if(_0x4f8a4a>eloHistoryPagination[_0x2f6594]['page']&&eloHistoryPagination[_0x2f6594][_0x5d0d9e(0xd1)])_0x2e4c23=query(_0x332e34,orderBy('timestamp',_0x5d0d9e(0x193)),startAfter(eloHistoryPagination[_0x2f6594]['lastVisible']),limit(PAGE_SIZE));else _0x4f8a4a<eloHistoryPagination[_0x2f6594]['page']&&eloHistoryPagination[_0x2f6594]['firstVisible']?_0x2e4c23=query(_0x332e34,orderBy(_0x5d0d9e(0x15c),'desc'),endBefore(eloHistoryPagination[_0x2f6594][_0x5d0d9e(0xc0)]),limitToLast(PAGE_SIZE)):_0x2e4c23=query(_0x332e34,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x32ff84=await getDocs(_0x2e4c23);if(_0x32ff84['empty']){_0x5ed596[_0x5d0d9e(0x1a1)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x2f6594+_0x5d0d9e(0x171))['textContent']='Page\x201';return;}eloHistoryPagination[_0x2f6594]['page']=_0x4f8a4a,eloHistoryPagination[_0x2f6594][_0x5d0d9e(0xc0)]=_0x32ff84['docs'][0x0],eloHistoryPagination[_0x2f6594]['lastVisible']=_0x32ff84['docs'][_0x32ff84['docs'][_0x5d0d9e(0x144)]-0x1];const _0xb768f3=new Map();_0x5ed596['innerHTML']='';const _0x2f0fbd=async _0x52da0c=>{const _0x5ba872=_0x5d0d9e;if(typeof _0x52da0c!==_0x5ba872(0xe9)||_0x52da0c['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x52da0c))return _0x52da0c;if(_0xb768f3[_0x5ba872(0xb5)](_0x52da0c))return _0xb768f3['get'](_0x52da0c);try{for(const _0x345b68 of['players','playersD2','playersD3',_0x5ba872(0x1d9)]){const _0x2cf429=await getDoc(doc(db,_0x345b68,_0x52da0c));if(_0x2cf429['exists']()&&_0x2cf429['data']()[_0x5ba872(0xb3)]){const _0x2ded79=_0x2cf429['data']()['username'];return _0xb768f3['set'](_0x52da0c,_0x2ded79),_0x2ded79;}}return _0x52da0c;}catch(_0x446d24){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x52da0c+':',_0x446d24),_0x52da0c;}};for(const _0x380e64 of _0x32ff84[_0x5d0d9e(0x2d3)]){const _0x243a65=_0x380e64['data'](),_0x86c6ac=document[_0x5d0d9e(0x12c)]('tr'),_0x530ac0=_0x243a65['timestamp']?new Date(_0x243a65['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x4f4260=_0x243a65['newElo']-_0x243a65['previousElo'],_0x17fd6a=_0x4f4260>0x0?'positive-change':_0x4f4260<0x0?_0x5d0d9e(0x227):'',_0x15f378=_0x4f4260>0x0?'+':'',_0x238dbe=_0x243a65['player']||_0x243a65[_0x5d0d9e(0xb3)]||_0x243a65['userId']||'N/A',_0x161bca=await _0x2f0fbd(_0x238dbe);_0x86c6ac['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x530ac0+_0x5d0d9e(0x25d)+_0x161bca+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x243a65['previousElo']||'N/A')+_0x5d0d9e(0x218)+(_0x243a65['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x17fd6a+'\x22>'+_0x15f378+_0x4f4260+_0x5d0d9e(0x2e9)+formatHistoryType(_0x243a65['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x243a65['modifiedBy']||_0x243a65[_0x5d0d9e(0x243)]||_0x243a65['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5ed596['appendChild'](_0x86c6ac);}document['getElementById'](_0x2f6594+'-page-indicator')['textContent']='Page\x20'+_0x4f8a4a;const _0x4aa3f8=document['getElementById'](_0x2f6594+'-prev-page'),_0xfd185a=document['getElementById'](_0x2f6594+'-next-page');if(_0x4aa3f8)_0x4aa3f8['disabled']=_0x4f8a4a<=0x1;const _0x51b14b=query(_0x332e34,orderBy('timestamp',_0x5d0d9e(0x193)),startAfter(eloHistoryPagination[_0x2f6594]['lastVisible']),limit(0x1)),_0x28a435=await getDocs(_0x51b14b);if(_0xfd185a)_0xfd185a['disabled']=_0x28a435[_0x5d0d9e(0x2a9)];}catch(_0x542551){console['error'](_0x5d0d9e(0xd5),_0x542551),_0x5ed596['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x542551['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x5873d0){const _0x4c9a9f=a4_0x4c4826;switch(_0x5873d0){case'match_result':return'Match\x20Result';case _0x4c9a9f(0x2bf):return'Promotion';case'demotion':return'Demotion';case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x5873d0||'Unknown';}}function a4_0x3732(_0x21b0c9,_0x5bfbd1){const _0x2b10c3=a4_0x5035();return a4_0x3732=function(_0x42d7db,_0x3e9e78){_0x42d7db=_0x42d7db-0xaf;let _0x503544=_0x2b10c3[_0x42d7db];return _0x503544;},a4_0x3732(_0x21b0c9,_0x5bfbd1);}function setupEloHistorySection(){const _0x56856a=a4_0x4c4826;document['getElementById'](_0x56856a(0xb7))['addEventListener']('click',()=>{const _0x29204b=_0x56856a;loadEloHistory(eloHistoryPagination['d1'][_0x29204b(0x130)]-0x1);}),document['getElementById']('d1-next-page')['addEventListener'](_0x56856a(0x2ea),()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById'](_0x56856a(0x197))[_0x56856a(0x126)]('click',()=>{const _0x4e8712=_0x56856a;loadEloHistory(eloHistoryPagination['d2'][_0x4e8712(0x130)]-0x1);}),document['getElementById'](_0x56856a(0x22a))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x2ae4eb=document['getElementById']('d3-prev-page'),_0x4f0973=document['getElementById'](_0x56856a(0xf7));_0x2ae4eb&&_0x2ae4eb[_0x56856a(0x126)]('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x4f0973&&_0x4f0973['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x2785d3=document[_0x56856a(0x215)]('elo-history-search');_0x2785d3&&_0x2785d3[_0x56856a(0x126)](_0x56856a(0x143),debounce(filterEloHistoryTable,0x12c));const _0x21f9c5=document['getElementById']('history-type-filter');_0x21f9c5&&_0x21f9c5['addEventListener']('change',applyEloHistoryFilters);const _0x497c66=document['getElementById'](_0x56856a(0x1af));_0x497c66&&_0x497c66[_0x56856a(0x126)](_0x56856a(0x2ea),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x1a192a=a4_0x4c4826,_0x397e59=document[_0x1a192a(0x215)]('elo-history-search')['value'][_0x1a192a(0x17c)](),_0x21a609=document['querySelectorAll'](_0x1a192a(0x2c2));let _0xd99c75=0x0;_0x21a609['forEach'](_0x4fa56e=>{const _0x258029=_0x1a192a;if(_0x4fa56e[_0x258029(0x2ad)]['contains']('loading-cell')||_0x4fa56e[_0x258029(0x2ad)]['contains']('empty-state')||_0x4fa56e['classList']['contains']('error-state'))return;const _0x543522=_0x4fa56e[_0x258029(0xc4)]('.player')?.[_0x258029(0x18b)][_0x258029(0x17c)]()||'',_0x2bf635=_0x4fa56e[_0x258029(0xc4)]('.type')?.['textContent']['toLowerCase']()||'',_0x5e0d68=_0x4fa56e['querySelector']('.admin-action')?.['textContent']['toLowerCase']()||'';_0x543522['includes'](_0x397e59)||_0x2bf635['includes'](_0x397e59)||_0x5e0d68['includes'](_0x397e59)?(_0x4fa56e['style'][_0x258029(0x20d)]='',_0xd99c75++):_0x4fa56e['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x40518e=a4_0x4c4826,_0x563f59=document['getElementById'](_0x40518e(0x12b))[_0x40518e(0x12d)],_0x2d1813=document['getElementById']('history-end-date')['value'],_0x1cf45a=document[_0x40518e(0x215)](_0x40518e(0x2c5))[_0x40518e(0x12d)],_0x369569=currentLadder['toLowerCase']();eloHistoryPagination[_0x369569]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x9c8b86=document['getElementById']('elo-history-table-body');_0x9c8b86['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x539e83=currentLadder==='D1'?_0x40518e(0x216):_0x40518e(0x18f),_0xfbbf45=collection(db,_0x539e83);let _0x2b78a1=[orderBy(_0x40518e(0x15c),'desc')];if(_0x563f59){const _0x3ca2d2=new Date(_0x563f59);_0x3ca2d2['setHours'](0x0,0x0,0x0,0x0),_0x2b78a1['push'](where('timestamp','>=',_0x3ca2d2));}if(_0x2d1813){const _0x1a3962=new Date(_0x2d1813);_0x1a3962['setHours'](0x17,0x3b,0x3b,0x3e7),_0x2b78a1['push'](where('timestamp','<=',_0x1a3962));}_0x1cf45a&&_0x1cf45a!=='all'&&_0x2b78a1[_0x40518e(0x259)](where('type','==',_0x1cf45a));_0x2b78a1['push'](limit(PAGE_SIZE));const _0x718ea3=query(_0xfbbf45,..._0x2b78a1),_0x2994c9=await getDocs(_0x718ea3);!_0x2994c9[_0x40518e(0x2a9)]&&(eloHistoryPagination[_0x369569][_0x40518e(0xc0)]=_0x2994c9['docs'][0x0],eloHistoryPagination[_0x369569]['lastVisible']=_0x2994c9['docs'][_0x2994c9['docs']['length']-0x1]);_0x9c8b86['innerHTML']='';if(_0x2994c9['empty']){_0x9c8b86[_0x40518e(0x1a1)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x2994c9['forEach'](_0x8bd49b=>{const _0x33faa8=_0x40518e,_0x375720=_0x8bd49b['data'](),_0x4b9c8e=document[_0x33faa8(0x12c)]('tr'),_0x517bc8=_0x375720[_0x33faa8(0x15c)]?new Date(_0x375720['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x5bad26=_0x375720['newElo']-_0x375720['previousElo'],_0x382ba5=_0x5bad26>0x0?_0x33faa8(0x1cd):_0x5bad26<0x0?'negative-change':'',_0xbb935=_0x5bad26>0x0?'+':'',_0x1c2af2=_0x375720['player']||_0x375720['username']||_0x375720['userId']||'N/A';_0x4b9c8e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x517bc8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x1c2af2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x375720['previousElo']||_0x33faa8(0x24f))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x375720['newElo']||'N/A')+_0x33faa8(0x22d)+_0x382ba5+'\x22>'+_0xbb935+_0x5bad26+_0x33faa8(0x2e9)+formatHistoryType(_0x375720[_0x33faa8(0x26a)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x375720['modifiedBy']||_0x375720['promotedBy']||_0x375720['demotedBy']||'System')+_0x33faa8(0xcd),_0x9c8b86['appendChild'](_0x4b9c8e);}),document[_0x40518e(0x215)](_0x369569+_0x40518e(0x171))['textContent']='Page\x201';}catch(_0x39876f){console['error']('Error\x20applying\x20filters:',_0x39876f),_0x9c8b86[_0x40518e(0x1a1)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x39876f[_0x40518e(0x2db)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x13f121=a4_0x4c4826;document['getElementById']('history-start-date')[_0x13f121(0x12d)]='',document['getElementById']('history-end-date')['value']='',document['getElementById']('history-type-filter')['value']=_0x13f121(0x2cf),document['getElementById']('elo-history-search')[_0x13f121(0x12d)]='';const _0x18015a=currentLadder['toLowerCase']();eloHistoryPagination[_0x18015a]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x4cbdb1=a4_0x4c4826,_0x21f363=document['getElementById']('promote-player-btn'),_0x12cfe7=document[_0x4cbdb1(0x215)]('promote-modal'),_0x4c4f60=document['getElementById']('promote-form');_0x21f363&&_0x12cfe7&&_0x4c4f60&&(_0x21f363[_0x4cbdb1(0x126)](_0x4cbdb1(0x2ea),()=>{const _0x1278a0=_0x4cbdb1;_0x12cfe7['classList'][_0x1278a0(0x1f3)](_0x1278a0(0x23f));}),_0x12cfe7[_0x4cbdb1(0x126)]('click',_0x565863=>{const _0xb70a21=_0x4cbdb1;_0x565863[_0xb70a21(0x2d1)]===_0x12cfe7&&_0x12cfe7['classList'][_0xb70a21(0x2e5)]('active');}),_0x4c4f60[_0x4cbdb1(0x126)]('submit',async _0x34159a=>{const _0x144b68=_0x4cbdb1;_0x34159a['preventDefault']();const _0x42348e=document[_0x144b68(0x215)](_0x144b68(0x18d)),_0x2097b0=document[_0x144b68(0x215)](_0x144b68(0x1ca)),_0x5e2677=_0x42348e['value']['trim'](),_0x2debb1=_0x2097b0[_0x144b68(0x12d)];if(!_0x5e2677){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x5e2677,_0x2debb1),_0x12cfe7['classList']['remove']('active'),_0x42348e[_0x144b68(0x12d)]='';}catch(_0x37c4fe){showNotification(_0x37c4fe['message'],_0x144b68(0x1f2));}}),document['getElementById'](_0x4cbdb1(0x1c8))['addEventListener'](_0x4cbdb1(0x2ea),()=>{const _0xfa2eeb=_0x4cbdb1;_0x12cfe7['classList']['remove'](_0xfa2eeb(0x23f));}));const _0x11b6a4=document[_0x4cbdb1(0x215)](_0x4cbdb1(0x253)),_0x5b88f9=document['getElementById']('demote-modal'),_0x46b92a=document['getElementById']('demote-form');_0x11b6a4&&_0x5b88f9&&_0x46b92a&&(_0x11b6a4['addEventListener'](_0x4cbdb1(0x2ea),()=>{_0x5b88f9['classList']['add']('active');}),_0x5b88f9['addEventListener']('click',_0x1a6496=>{const _0x563250=_0x4cbdb1;_0x1a6496[_0x563250(0x2d1)]===_0x5b88f9&&_0x5b88f9['classList'][_0x563250(0x2e5)]('active');}),_0x46b92a['addEventListener'](_0x4cbdb1(0x1e8),async _0x88c16e=>{const _0x3568cf=_0x4cbdb1;_0x88c16e[_0x3568cf(0x20e)]();const _0x540dc7=document['getElementById'](_0x3568cf(0x2ae)),_0x44633c=document[_0x3568cf(0x215)]('demote-ladder'),_0x44a287=_0x540dc7[_0x3568cf(0x12d)][_0x3568cf(0x26e)](),_0x36d9b7=_0x44633c['value'];if(!_0x44a287){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x44a287,_0x36d9b7),document['getElementById']('demote-modal')[_0x3568cf(0x2ad)]['remove']('active'),document[_0x3568cf(0x215)]('demote-username')['value']='';}catch(_0x29d2e1){console['error'](_0x3568cf(0xe0),_0x29d2e1);}}));const _0x18a413=document['getElementById']('set-elo-btn'),_0x41902f=document['getElementById'](_0x4cbdb1(0x1a5)),_0x5c700b=document['getElementById']('set-elo-form');_0x18a413&&_0x41902f&&_0x5c700b&&(_0x18a413['addEventListener'](_0x4cbdb1(0x2ea),()=>{const _0x3f91b5=_0x4cbdb1;_0x41902f[_0x3f91b5(0x2ad)]['add']('active');}),_0x41902f[_0x4cbdb1(0x126)]('click',_0x134b7c=>{_0x134b7c['target']===_0x41902f&&_0x41902f['classList']['remove']('active');}),_0x5c700b[_0x4cbdb1(0x126)]('submit',async _0x28fbe6=>{const _0x46fcdc=_0x4cbdb1;_0x28fbe6['preventDefault']();const _0xea8912=document['getElementById']('set-elo-username'),_0x2811b6=document[_0x46fcdc(0x215)]('set-elo-value');let _0x4e3c0a;const _0xc1538f=document['getElementById']('set-elo-ladder'),_0x1b791b=document[_0x46fcdc(0xc4)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0xc1538f)_0x4e3c0a=_0xc1538f['value'];else _0x1b791b?_0x4e3c0a=_0x1b791b['value']:_0x4e3c0a='D1';if(!_0xea8912||!_0x2811b6){showNotification('Form\x20elements\x20are\x20missing',_0x46fcdc(0x1f2));return;}const _0x544df0=_0xea8912['value'][_0x46fcdc(0x26e)](),_0x43d5a3=parseInt(_0x2811b6['value']);if(!_0x544df0||isNaN(_0x43d5a3)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x544df0,_0x43d5a3,_0x4e3c0a),_0x41902f['classList']['remove'](_0x46fcdc(0x23f)),_0xea8912[_0x46fcdc(0x12d)]='',_0x2811b6['value']='';}catch(_0x2a4969){showNotification(_0x2a4969['message'],_0x46fcdc(0x1f2));}}),document['getElementById'](_0x4cbdb1(0xfc))[_0x4cbdb1(0x126)]('click',()=>{const _0x1d6752=_0x4cbdb1;_0x41902f['classList']['remove'](_0x1d6752(0x23f));}));const _0x5a8106=document['getElementById']('set-role-modal'),_0x3b0b66=document['getElementById']('set-role-form');if(_0x5a8106&&_0x3b0b66){_0x5a8106[_0x4cbdb1(0x126)](_0x4cbdb1(0x2ea),_0xc04785=>{_0xc04785['target']===_0x5a8106&&closeModalHandler();}),_0x3b0b66['addEventListener']('submit',async _0x1a4581=>{const _0x59a384=_0x4cbdb1;_0x1a4581['preventDefault']();const _0x22323d=document[_0x59a384(0x215)]('role-username'),_0x31b199=document['getElementById']('role-name'),_0x7200aa=document['getElementById']('role-color'),_0x574544=_0x22323d['value']['trim'](),_0x45b9d2=_0x31b199[_0x59a384(0x12d)][_0x59a384(0x26e)](),_0x4e3df8=_0x7200aa['value'];if(!_0x574544){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x574544,_0x45b9d2,_0x4e3df8),closeModalHandler(),loadUsersWithRoles();}catch(_0x4fbbef){}});const _0x29fe06=document[_0x4cbdb1(0x215)]('cancel-role-btn');_0x29fe06&&(_0x29fe06['removeEventListener']('click',closeModalHandler),_0x29fe06['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x288f66,_0x1390ef){const _0x329d51=a4_0x4c4826;try{console['log'](_0x329d51(0x11d)+_0x288f66+'\x20in\x20'+_0x1390ef+'\x20ladder');const _0xae06d=auth['currentUser'];if(!_0xae06d)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x37f70f=_0x1390ef==='D2'?_0x329d51(0x279):'players',_0x2e6912=_0x1390ef==='D2'?'eloHistoryD2':'eloHistory';console[_0x329d51(0xea)]('Searching\x20for\x20player\x20in\x20'+_0x37f70f);const _0x5e4977=collection(db,_0x37f70f),_0x1a9636=query(_0x5e4977,where('username','==',_0x288f66)),_0x7a3d4d=await getDocs(_0x1a9636);if(_0x7a3d4d[_0x329d51(0x2a9)]){alert(_0x329d51(0x1d1)+_0x1390ef+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x1390ef+_0x329d51(0x13c));}const _0x5d2f2e=_0x7a3d4d['docs'][0x0],_0x3a80d9=_0x5d2f2e['data'](),_0x49186c=_0x3a80d9[_0x329d51(0x150)]||0x4b0,_0x3a29ba=_0x5d2f2e['id'];console['log'](_0x329d51(0x291)+_0x49186c);const _0x4c1eef=[{'name':'Bronze','elo':0x578},{'name':_0x329d51(0x1b5),'elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x58b18e=_0x4c1eef[_0x329d51(0x15b)](_0x2f5fb3=>_0x2f5fb3[_0x329d51(0x14b)]>_0x49186c);if(!_0x58b18e){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x1390ef+_0x329d51(0x13c));throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x1390ef+_0x329d51(0x13c));}console[_0x329d51(0xea)](_0x329d51(0x1a4)+_0x58b18e['name']+'\x20('+_0x58b18e['elo']+')'),await updateDoc(doc(db,_0x37f70f,_0x5d2f2e['id']),{'eloRating':_0x58b18e['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0xae06d['email']||_0x329d51(0xcc)}),await addDoc(collection(db,_0x2e6912),{'player':_0x288f66,'previousElo':_0x49186c,'newElo':_0x58b18e['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x58b18e[_0x329d51(0x2fb)],'promotedBy':_0xae06d['email']||_0x329d51(0xcc),'gameMode':_0x1390ef});try{const {promotionManager:_0xc2e421}=await import('./promotions.js'),_0x4a58c9=_0xc2e421[_0x329d51(0x2a4)](_0x49186c),_0x5c919a=_0x58b18e[_0x329d51(0x2fb)];await _0xc2e421['sendPromotionNotification'](_0x3a29ba,_0x288f66,_0x49186c,_0x58b18e['elo'],_0x4a58c9,_0x5c919a,_0x329d51(0x2bf),{'displayName':_0x288f66,'source':'admin','adminUser':_0xae06d['email'],'ladder':_0x1390ef}),console[_0x329d51(0xea)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x2a1631){console['error'](_0x329d51(0xce),_0x2a1631);}return alert('Successfully\x20promoted\x20'+_0x288f66+'\x20to\x20'+_0x58b18e['name']+'\x20('+_0x58b18e['elo']+')'),currentLadder===_0x1390ef&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x174c4c){console[_0x329d51(0x1f2)]('Error\x20promoting\x20player:',_0x174c4c),alert('Error\x20promoting\x20player:\x20'+_0x174c4c['message']);throw _0x174c4c;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x3334c4=document['getElementById']('promote-form');_0x3334c4&&_0x3334c4['addEventListener']('submit',async _0x44aae1=>{const _0x53322a=a4_0x3732;_0x44aae1['preventDefault']();const _0x1b8060=document[_0x53322a(0x215)](_0x53322a(0x18d))[_0x53322a(0x12d)][_0x53322a(0x26e)](),_0x47654d=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')[_0x53322a(0x12d)];if(!_0x1b8060){alert(_0x53322a(0xc3));return;}try{await promotePlayer(_0x1b8060,_0x47654d),document['getElementById']('promote-modal')['classList']['remove']('active'),document['getElementById'](_0x53322a(0x18d))[_0x53322a(0x12d)]='';}catch(_0x574a16){console['error']('Error\x20in\x20promotion:',_0x574a16);}});});async function demotePlayer(_0x34046d,_0x3fb8f3){const _0x56553b=a4_0x4c4826;try{console['log']('Attempting\x20to\x20demote\x20'+_0x34046d+'\x20in\x20'+_0x3fb8f3+'\x20ladder');const _0x431009=auth[_0x56553b(0xff)];if(!_0x431009)throw new Error(_0x56553b(0x177));const _0x1ccc60=_0x3fb8f3==='D2'?'playersD2':'players',_0x104f15=_0x3fb8f3==='D2'?'eloHistoryD2':'eloHistory';console[_0x56553b(0xea)]('Searching\x20for\x20player\x20in\x20'+_0x1ccc60);const _0x3c6c89=collection(db,_0x1ccc60),_0x5fb429=query(_0x3c6c89,where('username','==',_0x34046d)),_0x86c29a=await getDocs(_0x5fb429);if(_0x86c29a[_0x56553b(0x2a9)]){alert(_0x56553b(0x1d1)+_0x3fb8f3+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x3fb8f3+'\x20ladder');}const _0x2bcc4b=_0x86c29a['docs'][0x0],_0x130fad=_0x2bcc4b[_0x56553b(0x195)](),_0x397718=_0x130fad['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x397718);const _0x2cb1c5=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x56553b(0x27a),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x1f7fb0=_0x2cb1c5['find'](_0x2b9f31=>_0x2b9f31['elo']<_0x397718);if(!_0x1f7fb0){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x3fb8f3+_0x56553b(0x13c));throw new Error(_0x56553b(0x1a2)+_0x3fb8f3+'\x20ladder');}console['log'](_0x56553b(0x139)+_0x1f7fb0[_0x56553b(0x2fb)]+'\x20('+_0x1f7fb0['elo']+')'),await updateDoc(doc(db,_0x1ccc60,_0x2bcc4b['id']),{'eloRating':_0x1f7fb0['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x431009[_0x56553b(0xf4)]||_0x56553b(0xcc)}),await addDoc(collection(db,_0x104f15),{'player':_0x34046d,'previousElo':_0x397718,'newElo':_0x1f7fb0['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x1f7fb0['name'],'demotedBy':_0x431009['email']||'admin','gameMode':_0x3fb8f3});try{const {promotionManager:_0x3d2d55}=await import('./promotions.js'),_0x5654c3=_0x3d2d55[_0x56553b(0x2a4)](_0x397718),_0x237663=_0x1f7fb0['name'];await _0x3d2d55['sendPromotionNotification'](_0x2bcc4b['id'],_0x34046d,_0x397718,_0x1f7fb0['elo'],_0x5654c3,_0x237663,'demotion',{'displayName':_0x34046d,'source':'admin','adminUser':_0x431009['email'],'ladder':_0x3fb8f3}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x4a1131){console[_0x56553b(0x1f2)](_0x56553b(0xce),_0x4a1131);}return alert('Successfully\x20demoted\x20'+_0x34046d+_0x56553b(0x264)+_0x1f7fb0['name']+'\x20('+_0x1f7fb0['elo']+')'),currentLadder===_0x3fb8f3&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x559d67){console['error']('Error\x20demoting\x20player:',_0x559d67),alert('Error\x20demoting\x20player:\x20'+_0x559d67[_0x56553b(0x2db)]);throw _0x559d67;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x28f7f7=a4_0x4c4826,_0x2cce3d=document['getElementById'](_0x28f7f7(0x2b4));_0x2cce3d&&_0x2cce3d['addEventListener']('submit',async _0x5aaca1=>{const _0x3d3eaf=_0x28f7f7;_0x5aaca1['preventDefault']();const _0xafa01f=document['getElementById']('demote-username')['value']['trim'](),_0x2390d9=document[_0x3d3eaf(0xc4)](_0x3d3eaf(0x2e6))['value'];if(!_0xafa01f){alert(_0x3d3eaf(0xc3));return;}try{await demotePlayer(_0xafa01f,_0x2390d9),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById'](_0x3d3eaf(0x2ae))[_0x3d3eaf(0x12d)]='';}catch(_0x1103e1){console['error'](_0x3d3eaf(0xe0),_0x1103e1);}});});async function setCustomElo(_0x1cc2b0,_0x1beb4d,_0x28377e){const _0x3200fb=a4_0x4c4826;try{const _0x226ef4=auth['currentUser'];if(!_0x226ef4||!isAdmin(_0x226ef4['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x44bc9e=_0x28377e==='D2'?'playersD2':_0x3200fb(0x2c3),_0x1b8a41=_0x28377e==='D2'?_0x3200fb(0x18f):'eloHistory',_0x354de2=collection(db,_0x44bc9e),_0x3b76a1=query(_0x354de2,where('username','==',_0x1cc2b0)),_0x317be6=await getDocs(_0x3b76a1);if(_0x317be6['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x28377e+'\x20ladder');const _0x3253db=_0x317be6['docs'][0x0],_0xd7260a=_0x3253db['data'](),_0x555fca=_0xd7260a['eloRating']||0x4b0,_0x111cb4=writeBatch(db);_0x111cb4['update'](doc(db,_0x44bc9e,_0x3253db['id']),{'eloRating':_0x1beb4d,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x226ef4['email']});const _0x1bd158=doc(collection(db,_0x1b8a41));return _0x111cb4[_0x3200fb(0xbc)](_0x1bd158,{'player':_0x1cc2b0,'previousElo':_0x555fca,'newElo':_0x1beb4d,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x226ef4['email'],'gameMode':_0x28377e}),await _0x111cb4['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x1cc2b0+_0x3200fb(0x106)+_0x555fca+'\x20to\x20'+_0x1beb4d,'success'),currentLadder===_0x28377e&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x48c9fa){console['error'](_0x3200fb(0x1b0),_0x48c9fa);throw _0x48c9fa;}}async function setUserRole(_0x320e53,_0x2207b0,_0x507a79){const _0x13f1ed=a4_0x4c4826;try{const _0x2cbd4a=auth[_0x13f1ed(0xff)];if(!_0x2cbd4a||!isAdmin(_0x2cbd4a[_0x13f1ed(0xf4)]))throw new Error(_0x13f1ed(0x20a));const _0x9651f0=_0x2207b0?_0x2207b0[_0x13f1ed(0x26e)]():null,_0x3fc659=_0x9651f0?_0x507a79||'#808080':null,[_0x3afa36,_0x159c9f]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x320e53))),getDocs(query(collection(db,_0x13f1ed(0x279)),where(_0x13f1ed(0xb3),'==',_0x320e53)))]),_0xe27cd5=[];if(!_0x3afa36['empty'])_0xe27cd5['push']({'ref':_0x3afa36['docs'][0x0]['ref'],'source':'D1'});if(!_0x159c9f['empty'])_0xe27cd5['push']({'ref':_0x159c9f['docs'][0x0]['ref'],'source':'D2'});if(_0xe27cd5['length']===0x0){const [_0x1c4b56,_0x5842b3]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x320e53))),getDocs(query(collection(db,_0x13f1ed(0x23b)),where('username','==',_0x320e53)))]);if(!_0x1c4b56['empty'])_0xe27cd5['push']({'ref':_0x1c4b56['docs'][0x0]['ref'],'source':_0x13f1ed(0x250)});if(!_0x5842b3['empty'])_0xe27cd5['push']({'ref':_0x5842b3['docs'][0x0][_0x13f1ed(0x1ea)],'source':_0x13f1ed(0x17b)});}if(_0xe27cd5[_0x13f1ed(0x144)]===0x0)throw new Error('User\x20\x22'+_0x320e53+_0x13f1ed(0x141));const _0x1b3958=writeBatch(db);_0xe27cd5['forEach'](_0x221b2d=>{const _0x4296d3=_0x13f1ed;console[_0x4296d3(0xea)](_0x4296d3(0x1cc)+_0x320e53+'\x20in\x20'+_0x221b2d['source']),!_0x9651f0?_0x1b3958[_0x4296d3(0x2d0)](_0x221b2d['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x1b3958['update'](_0x221b2d['ref'],{'roleName':_0x9651f0,'roleColor':_0x3fc659,'roleAssignedBy':_0x2cbd4a['email'],'roleAssignedAt':serverTimestamp()});}),await _0x1b3958['commit']();const _0xc9ebd4=_0x9651f0?'Role\x20\x22'+_0x9651f0+_0x13f1ed(0xda):_0x13f1ed(0x15a);return showNotification(_0xc9ebd4+'\x20for\x20user\x20\x22'+_0x320e53+'\x22',_0x13f1ed(0x1e4)),!![];}catch(_0x2f5116){console['error']('Error\x20setting\x20user\x20role:',_0x2f5116),showNotification('Error:\x20'+_0x2f5116['message'],'error');throw _0x2f5116;}}function showNotification(_0x477245,_0x442881='info'){const _0x237da7=a4_0x4c4826,_0x59caf2=document[_0x237da7(0x12c)]('div');_0x59caf2['className']=_0x237da7(0x1e0)+_0x442881,_0x59caf2[_0x237da7(0x1a1)]=_0x237da7(0x146)+getNotificationIcon(_0x442881)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x477245+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document[_0x237da7(0x1a0)]['appendChild'](_0x59caf2),setTimeout(()=>{_0x59caf2['classList']['add']('active');},0xa);const _0x32255e=setTimeout(()=>{closeNotification(_0x59caf2);},0x1388);_0x59caf2['querySelector']('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x32255e),closeNotification(_0x59caf2);});}function getNotificationIcon(_0x3eb988){const _0x4544f3=a4_0x4c4826;switch(_0x3eb988){case'success':return'fa-check-circle';case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case _0x4544f3(0x261):default:return'fa-info-circle';}}function closeNotification(_0x284ed5){const _0x365afb=a4_0x4c4826;_0x284ed5[_0x365afb(0x2ad)][_0x365afb(0x2e5)](_0x365afb(0x23f)),setTimeout(()=>{const _0x327249=_0x365afb;_0x284ed5[_0x327249(0x2e5)]();},0x12c);}function setupUserRolesSection(){const _0xfa02fe=a4_0x4c4826,_0x575d7c=document['getElementById']('load-users-data');_0x575d7c&&_0x575d7c[_0xfa02fe(0x126)]('click',function(){this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x4ddcfc=>{const _0x4a2193=a4_0x3732;console[_0x4a2193(0x1f2)]('Error\x20loading\x20users:',_0x4ddcfc),this[_0x4a2193(0x2ad)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x98c9a3=document['getElementById']('add-new-role-btn');_0x98c9a3&&_0x98c9a3['addEventListener'](_0xfa02fe(0x2ea),()=>{const _0x2a8b25=document['getElementById']('set-role-modal');_0x2a8b25&&_0x2a8b25['classList']['add']('active');});const _0x5cf5b2=document[_0xfa02fe(0x215)]('user-search');_0x5cf5b2&&_0x5cf5b2['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x1406c2=document['getElementById']('role-filter');_0x1406c2&&_0x1406c2['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x32a92b=a4_0x4c4826,_0x428c06=document[_0x32a92b(0x215)]('users-table-body');if(!_0x428c06)return;_0x428c06['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x425f7d,_0x310bbd,_0x772d49,_0x4aa3a2]=await Promise['all']([getDocs(collection(db,_0x32a92b(0x2c3))),getDocs(collection(db,_0x32a92b(0x279))),getDocs(collection(db,_0x32a92b(0x1d9))),getDocs(collection(db,'userProfiles'))]),_0x2deff1=new Map();function _0x541c46(_0x30784c,_0x251217){_0x30784c['forEach'](_0xfe2d60=>{const _0x15a20e=a4_0x3732,_0x2aa3bc=_0xfe2d60['data']();if(!_0x2aa3bc['username'])return;if(!_0x2deff1['has'](_0x2aa3bc['username']))_0x2deff1[_0x15a20e(0xbc)](_0x2aa3bc['username'],{'username':_0x2aa3bc[_0x15a20e(0xb3)],'roleName':_0x2aa3bc[_0x15a20e(0x267)]||null,'roleColor':_0x2aa3bc[_0x15a20e(0x20f)]||null,'roleAssignedBy':_0x2aa3bc[_0x15a20e(0x1d5)]||null,'roleAssignedAt':_0x2aa3bc['roleAssignedAt']||null,'sources':[_0x251217]});else{const _0x1ddfdf=_0x2deff1['get'](_0x2aa3bc['username']);_0x2aa3bc['roleName']&&(!_0x1ddfdf[_0x15a20e(0x267)]||_0x251217==='D1'||_0x251217==='D2')&&(_0x1ddfdf['roleName']=_0x2aa3bc['roleName'],_0x1ddfdf['roleColor']=_0x2aa3bc[_0x15a20e(0x20f)],_0x1ddfdf['roleAssignedBy']=_0x2aa3bc['roleAssignedBy'],_0x1ddfdf['roleAssignedAt']=_0x2aa3bc['roleAssignedAt']),!_0x1ddfdf['sources'][_0x15a20e(0x175)](_0x251217)&&_0x1ddfdf['sources']['push'](_0x251217);}});}_0x541c46(_0x425f7d,'D1'),_0x541c46(_0x310bbd,'D2'),_0x541c46(_0x772d49,'Non-Participant'),_0x541c46(_0x4aa3a2,'Profile');const _0x3f077e=Array[_0x32a92b(0x225)](_0x2deff1['values']())['sort']((_0x30549c,_0x161ed6)=>_0x30549c['username']['localeCompare'](_0x161ed6['username']));if(_0x3f077e[_0x32a92b(0x144)]===0x0){_0x428c06['innerHTML']=_0x32a92b(0x22f);return;}_0x428c06['innerHTML']='',_0x3f077e['forEach'](_0x3c4e6d=>{const _0x1bb869=_0x32a92b,_0x9c4c5c=document['createElement']('tr');_0x9c4c5c[_0x1bb869(0x23d)]['username']=_0x3c4e6d[_0x1bb869(0xb3)],_0x9c4c5c['dataset']['roleName']=_0x3c4e6d['roleName']||'',_0x9c4c5c['dataset'][_0x1bb869(0x20f)]=_0x3c4e6d['roleColor']||'#808080';const _0x1ea76a=_0x3c4e6d[_0x1bb869(0x19c)]?new Date(_0x3c4e6d['roleAssignedAt'][_0x1bb869(0x128)]*0x3e8)['toLocaleDateString']():'N/A',_0x20afb3=_0x3c4e6d['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x3c4e6d['roleColor']+_0x1bb869(0x2a1)+getContrastColor(_0x3c4e6d['roleColor'])+_0x1bb869(0x173)+_0x3c4e6d['roleName']+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x9c4c5c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c4e6d['username']+_0x1bb869(0x286)+_0x3c4e6d[_0x1bb869(0x190)]['join'](',\x20')+_0x1bb869(0x27e)+_0x20afb3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3c4e6d[_0x1bb869(0x1d5)]||'N/A')+_0x1bb869(0xd9)+_0x1ea76a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x3c4e6d['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3c4e6d['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x3c4e6d['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x1bb869(0xcd),_0x428c06['appendChild'](_0x9c4c5c);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x23f5b7=>{_0x23f5b7['addEventListener']('click',()=>{const _0x1d4809=_0x23f5b7['dataset']['username'];openRoleEditModal(_0x1d4809);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x3b84e3=>{_0x3b84e3['addEventListener']('click',()=>{const _0x474ed4=a4_0x3732,_0x53938d=_0x3b84e3['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x53938d+'?')&&setUserRole(_0x53938d,null,null)['then'](()=>loadUsersWithRoles())[_0x474ed4(0x276)](_0x35af4d=>console['error']('Error\x20removing\x20role:',_0x35af4d));});});}catch(_0x2ec171){console['error']('Error\x20loading\x20users:',_0x2ec171),_0x428c06['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x378d98){const _0x386d24=a4_0x4c4826;console[_0x386d24(0xea)]('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x378d98);const _0x582960=document['getElementById'](_0x386d24(0xd0)),_0x4ef9d1=document['getElementById']('role-username'),_0x455a93=document['getElementById']('user-role');if(!_0x582960){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert(_0x386d24(0x298));return;}console[_0x386d24(0xea)]('Modal\x20element\x20found:',_0x582960);_0x4ef9d1?(_0x4ef9d1['value']=_0x378d98,console['log']('Username\x20input\x20set\x20to:\x20'+_0x378d98)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x160165=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x378d98+'\x22]');if(_0x160165&&_0x455a93){const _0x2282e1=_0x160165['dataset'][_0x386d24(0x149)];_0x455a93['value']=_0x2282e1==='none'?'':_0x2282e1,console['log']('Role\x20select\x20set\x20to:\x20'+_0x455a93['value']+'\x20(based\x20on\x20data-role:\x20'+_0x2282e1+')');}else{if(!_0x160165)console[_0x386d24(0x22e)]('Table\x20row\x20for\x20user\x20'+_0x378d98+_0x386d24(0x263));if(!_0x455a93)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x455a93)_0x455a93['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x582960['classList']['add'](_0x386d24(0x23f));const _0x907d36=document['getElementById']('cancel-role-btn');_0x907d36?(console['log'](_0x386d24(0xbe)),_0x907d36[_0x386d24(0x161)]('click',closeModalHandler),_0x907d36['addEventListener']('click',closeModalHandler)):console['warn'](_0x386d24(0x1ff)),console['log']('Attaching\x20background\x20click\x20listener.'),_0x582960[_0x386d24(0x161)]('click',closeModalBackgroundHandler),_0x582960['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x34006f){_0x34006f['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x5f6ca9=a4_0x4c4826,_0x4d0577=document['getElementById']('set-role-modal');_0x4d0577&&(_0x4d0577[_0x5f6ca9(0x2ad)][_0x5f6ca9(0x2e5)]('active'),_0x4d0577['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x1abcc3=a4_0x4c4826,_0x3dabe5=document[_0x1abcc3(0x215)](_0x1abcc3(0x153))?.['value'][_0x1abcc3(0x17c)]()||'',_0xc2e6d9=document[_0x1abcc3(0x215)](_0x1abcc3(0x10d))?.['value']||'all',_0x2246c8=document[_0x1abcc3(0x2ab)](_0x1abcc3(0x247));let _0x4d1adc=0x0;_0x2246c8['forEach'](_0x224a88=>{const _0x31850f=_0x1abcc3;if(_0x224a88['querySelector']('.loading-cell')||_0x224a88['querySelector'](_0x31850f(0xf2))||_0x224a88['querySelector'](_0x31850f(0xc7)))return;const _0x2f5dfe=_0x224a88[_0x31850f(0x23d)]['username']?.[_0x31850f(0x17c)]()||'',_0x309a8f=_0x224a88['dataset'][_0x31850f(0x149)]||'none',_0x21c5ca=_0x2f5dfe['includes'](_0x3dabe5),_0x4484ce=_0xc2e6d9==='all'||_0x309a8f===_0xc2e6d9;_0x21c5ca&&_0x4484ce?(_0x224a88['style']['display']='',_0x4d1adc++):_0x224a88['style'][_0x31850f(0x20d)]='none';});if(_0x4d1adc===0x0&&_0x2246c8['length']>0x0){const _0x5d8417=document['getElementById']('users-table-body');if(_0x5d8417){if(!_0x5d8417['querySelector']('.no-results')){const _0x1888f8=document['createElement']('tr');_0x1888f8[_0x1abcc3(0x2ad)]['add']('no-results'),_0x1888f8[_0x1abcc3(0x1a1)]='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x5d8417[_0x1abcc3(0x2b5)](_0x1888f8);}}}else{const _0x183a12=document[_0x1abcc3(0xc4)]('.no-results');_0x183a12&&_0x183a12['remove']();}}function setupManageArticlesSection(){const _0x16abec=a4_0x4c4826,_0x32147a=document['getElementById'](_0x16abec(0x13d));_0x32147a&&_0x32147a['addEventListener']('click',function(){this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0xdc2c4=a4_0x3732;this['classList'][_0xdc2c4(0x2e5)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x40f1ca=>{const _0x24bd92=a4_0x3732;console[_0x24bd92(0x1f2)](_0x24bd92(0xf9),_0x40f1ca),this['classList']['remove'](_0x24bd92(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x6ae483=document['getElementById']('create-new-article-btn');_0x6ae483?(console['log'](_0x16abec(0x213)),_0x6ae483['style']['display']='block',_0x6ae483['addEventListener']('click',()=>{openArticleModal();})):console[_0x16abec(0x1f2)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x29d824=document['getElementById'](_0x16abec(0x27f));_0x29d824&&_0x29d824['addEventListener']('submit',_0xe2a2c4=>{_0xe2a2c4['preventDefault'](),saveArticle();});const _0x1b285c=document['getElementById']('cancel-article-btn');_0x1b285c&&_0x1b285c['addEventListener']('click',()=>{closeArticleModal();});const _0x428e1c=document[_0x16abec(0xc4)]('#article-modal\x20.close-btn');_0x428e1c&&_0x428e1c['addEventListener']('click',()=>{closeArticleModal();});const _0x3284fb=document['getElementById']('article-modal');_0x3284fb&&_0x3284fb[_0x16abec(0x126)]('click',_0x2b9111=>{_0x2b9111['target']===_0x3284fb&&closeArticleModal();});}async function loadArticles(){const _0x1db0eb=a4_0x4c4826,_0x431320=document['getElementById']('articles-table-body');if(!_0x431320)return;_0x431320['innerHTML']=_0x1db0eb(0x1f0);try{const _0x4c84b6=collection(db,'articles'),_0x26b228=query(_0x4c84b6,orderBy('createdAt',_0x1db0eb(0x193))),_0x1cec3c=await getDocs(_0x26b228);if(_0x1cec3c['empty']){_0x431320['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x431320['innerHTML']='',_0x1cec3c['forEach'](_0x3a63b8=>{const _0x261f63=_0x1db0eb,_0x42b41f=_0x3a63b8['data'](),_0x139247=document['createElement']('tr'),_0x1e3d16=_0x42b41f['createdAt']?new Date(_0x42b41f[_0x261f63(0x1fb)]['seconds']*0x3e8)[_0x261f63(0xf8)]():'N/A';_0x139247['innerHTML']=_0x261f63(0xeb)+(_0x42b41f['title']||'Untitled')+_0x261f63(0xd9)+(_0x42b41f['author']||_0x261f63(0x1a9))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1e3d16+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x3a63b8['id']+_0x261f63(0x1ae)+_0x3a63b8['id']+_0x261f63(0xe2),_0x431320['appendChild'](_0x139247);}),setupArticleActionButtons();}catch(_0x168f3b){console['error']('Error\x20loading\x20articles:',_0x168f3b),_0x431320['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x168f3b['message']+_0x1db0eb(0x1c1);}}function setupArticleActionButtons(){const _0x337658=a4_0x4c4826;document['querySelectorAll'](_0x337658(0x2f8))['forEach'](_0x11f7d4=>{const _0x1bb827=_0x337658;_0x11f7d4[_0x1bb827(0x126)]('click',async _0x12c2d7=>{const _0x51367e=_0x1bb827,_0x51e42c=_0x12c2d7['currentTarget'][_0x51367e(0x23d)]['id'];openArticleModal(_0x51e42c);});}),document[_0x337658(0x2ab)]('.delete-article-btn')['forEach'](_0x4b3ad2=>{_0x4b3ad2['addEventListener']('click',async _0x1ab5c=>{const _0x48498d=a4_0x3732,_0x476002=_0x1ab5c['currentTarget'][_0x48498d(0x23d)]['id'];confirmDeleteArticle(_0x476002);});});}function openArticleModal(_0x449406=null){const _0x328a2e=a4_0x4c4826,_0x2bc956=document['getElementById']('article-modal'),_0x314a46=document['getElementById']('article-modal-title'),_0x81c76=document['getElementById']('article-form'),_0x41c3ce=document['getElementById'](_0x328a2e(0x2b1));_0x81c76['reset'](),_0x41c3ce[_0x328a2e(0x12d)]='';if(_0x449406)_0x314a46['textContent']='Edit\x20Article',_0x41c3ce[_0x328a2e(0x12d)]=_0x449406,loadArticleData(_0x449406);else{_0x314a46[_0x328a2e(0x18b)]='Create\x20Article';const _0x105cb9=auth['currentUser'];if(_0x105cb9){const _0x4ed43d=document['getElementById'](_0x328a2e(0x16f));if(_0x4ed43d&&_0x105cb9['displayName'])_0x4ed43d[_0x328a2e(0x12d)]=_0x105cb9['displayName'];else _0x4ed43d&&(_0x4ed43d[_0x328a2e(0x12d)]=_0x105cb9[_0x328a2e(0xf4)]);}}_0x2bc956[_0x328a2e(0x2ad)][_0x328a2e(0x1f3)]('active');}async function loadArticleData(_0xcbe263){const _0x38c970=a4_0x4c4826;try{const _0x50d162=doc(db,'articles',_0xcbe263),_0x5adb18=await getDoc(_0x50d162);if(!_0x5adb18['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x42086a=_0x5adb18['data']();document['getElementById']('article-title')[_0x38c970(0x12d)]=_0x42086a[_0x38c970(0x292)]||'',document['getElementById']('article-author')['value']=_0x42086a['author']||'',document[_0x38c970(0x215)]('article-image-url')['value']=_0x42086a['imageUrl']||'',document[_0x38c970(0x215)]('article-content')['value']=_0x42086a['content']||'';}catch(_0x3beab2){console['error']('Error\x20loading\x20article\x20data:',_0x3beab2),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x59e260=a4_0x4c4826;try{const _0x192a84=document[_0x59e260(0x215)]('article-id')[_0x59e260(0x12d)],_0x421b92=document['getElementById']('article-title')['value'][_0x59e260(0x26e)](),_0xea954e=document['getElementById']('article-author')['value']['trim'](),_0x4a602e=document['getElementById']('article-image-url')['value']['trim'](),_0x12c858=document['getElementById'](_0x59e260(0x1d4))['value']['trim']();if(!_0x421b92||!_0x12c858){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x4d604d=auth['currentUser'];if(!_0x4d604d){showNotification(_0x59e260(0x2bd),_0x59e260(0x1f2));return;}const _0x5cf57c={'title':_0x421b92,'author':_0xea954e,'imageUrl':_0x4a602e||null,'content':_0x12c858,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x4d604d['email']};!_0x192a84?(_0x5cf57c['createdAt']=serverTimestamp(),_0x5cf57c['createdBy']=_0x4d604d['email'],await addDoc(collection(db,_0x59e260(0x136)),_0x5cf57c),showNotification(_0x59e260(0x269),'success')):(await updateDoc(doc(db,'articles',_0x192a84),_0x5cf57c),showNotification('Article\x20updated\x20successfully',_0x59e260(0x1e4))),closeArticleModal(),loadArticles();}catch(_0x42ce1f){console['error']('Error\x20saving\x20article:',_0x42ce1f),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x42ce1f['message'],_0x59e260(0x1f2));}}function closeArticleModal(){const _0x3f0b89=a4_0x4c4826,_0x3dfeab=document['getElementById']('article-modal');_0x3dfeab&&_0x3dfeab[_0x3f0b89(0x2ad)]['remove']('active');}async function confirmDeleteArticle(_0xfc4eb4){const _0x17424a=a4_0x4c4826;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0xfc4eb4)),loadArticles(),showNotification(_0x17424a(0x2ca),_0x17424a(0x1e4));}catch(_0x48828e){console[_0x17424a(0x1f2)]('Error\x20deleting\x20article:',_0x48828e),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x48828e['message'],_0x17424a(0x1f2));}}function setupTrophyManagementSection(){const _0x18c27e=a4_0x4c4826,_0xd4c6fa=document['getElementById']('load-trophies-data');_0xd4c6fa&&_0xd4c6fa['addEventListener']('click',function(){this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x3a1879=document['getElementById']('assign-trophy-image');_0x3a1879&&(_0x3a1879['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x4adcf5=>{const _0x4071f7=a4_0x3732;console['error']('Error\x20loading\x20trophies:',_0x4adcf5),this['classList'][_0x4071f7(0x2e5)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x42558b=document[_0x18c27e(0x215)]('create-new-trophy-btn');_0x42558b&&_0x42558b['addEventListener']('click',()=>{openTrophyModal();});const _0x3a25a1=document[_0x18c27e(0x215)]('trophy-form');_0x3a25a1&&_0x3a25a1[_0x18c27e(0x126)]('submit',_0x142f06=>{_0x142f06['preventDefault'](),saveTrophyDefinition();});const _0x4696e8=document['getElementById']('cancel-trophy-btn');_0x4696e8&&_0x4696e8['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x278f6d=>{_0x278f6d['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x5901fe=document['getElementById']('trophy-modal');_0x5901fe&&_0x5901fe['addEventListener']('click',_0x14ea81=>{const _0x5698cd=_0x18c27e;_0x14ea81[_0x5698cd(0x2d1)]===_0x5901fe&&closeTrophyModal();});const _0x38c092=document['getElementById']('assign-trophy-modal');_0x38c092&&_0x38c092['addEventListener']('click',_0x311682=>{_0x311682['target']===_0x38c092&&closeAssignTrophyModal();});const _0x4bc652=document[_0x18c27e(0x215)]('assign-trophy-form');_0x4bc652&&_0x4bc652[_0x18c27e(0x126)](_0x18c27e(0x1e8),_0x4e396c=>{const _0x4f617e=_0x18c27e;_0x4e396c[_0x4f617e(0x20e)](),assignTrophyToPlayer();});const _0x2680aa=document['getElementById'](_0x18c27e(0x200));_0x2680aa&&_0x2680aa['addEventListener'](_0x18c27e(0x2ea),()=>{closeAssignTrophyModal();});const _0x744721=document[_0x18c27e(0x215)]('trophy-image-url');_0x744721&&(_0x744721[_0x18c27e(0x126)]('input',updateTrophyImagePreview),_0x744721['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x311309=a4_0x4c4826,_0x2d7c33=document['getElementById']('trophy-image-url')['value']['trim'](),_0xf2d50c=document['getElementById']('trophy-image-preview');if(!_0xf2d50c){const _0x5e5b9b=document['getElementById']('trophy-image-url')[_0x311309(0x20b)]('.form-group'),_0x412668=document['createElement'](_0x311309(0x1b1));_0x412668['id']='trophy-image-preview',_0x412668['className']='trophy-preview-container',_0x5e5b9b['appendChild'](_0x412668);const _0x1b295f=document['createElement']('img');_0x1b295f['id']='trophy-preview-img',_0x1b295f['alt']=_0x311309(0xde),_0x1b295f['onerror']=function(){const _0x589777=_0x311309;this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add'](_0x589777(0x1f2));},_0x412668['appendChild'](_0x1b295f);}const _0x10c048=document['getElementById']('trophy-preview-img');_0x2d7c33?(_0x10c048[_0x311309(0x1aa)]=_0x2d7c33,_0x10c048['style'][_0x311309(0x20d)]='block',_0x10c048['classList']['remove']('error')):(_0x10c048['src']=DEFAULT_TROPHY_IMAGE,_0x10c048[_0x311309(0x28d)]['display']='block');}async function loadTrophyDefinitions(){const _0x4d3df4=a4_0x4c4826,_0x445f4e=document[_0x4d3df4(0x215)](_0x4d3df4(0x112));if(!_0x445f4e)return;_0x445f4e['innerHTML']=_0x4d3df4(0xe5);try{const _0x4fe7cc=collection(db,'trophyDefinitions'),_0x204686=query(_0x4fe7cc,orderBy('createdAt','desc')),_0x47a158=await getDocs(_0x204686);if(_0x47a158['empty']){_0x445f4e['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x445f4e['innerHTML']='',_0x47a158['forEach'](_0x224112=>{const _0x18b044=_0x4d3df4,_0x104b78=_0x224112['data'](),_0xf1b990=document['createElement']('tr'),_0x337f2f=_0x104b78['createdAt']?new Date(_0x104b78[_0x18b044(0x1fb)]['seconds']*0x3e8)['toLocaleString']():'N/A';_0xf1b990['innerHTML']=_0x18b044(0xdc)+(_0x104b78['image']||DEFAULT_TROPHY_IMAGE)+_0x18b044(0x1f7)+_0x104b78[_0x18b044(0x2fb)]+_0x18b044(0x19f)+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x104b78[_0x18b044(0x2fb)]||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x104b78[_0x18b044(0x1c2)]||'common')+'\x22>'+(_0x104b78['rarity']||'common')+_0x18b044(0x191)+_0x337f2f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x224112['id']+_0x18b044(0x1e5)+_0x224112['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x224112['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x445f4e['appendChild'](_0xf1b990);}),setupTrophyActionButtons();}catch(_0x4449a8){console['error'](_0x4d3df4(0x133),_0x4449a8),_0x445f4e['innerHTML']=_0x4d3df4(0x2f5)+_0x4449a8['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x42d2bb=a4_0x4c4826;document[_0x42d2bb(0x2ab)](_0x42d2bb(0x238))['forEach'](_0x46afeb=>{_0x46afeb['addEventListener']('click',_0x9f1f19=>{const _0x56c2eb=_0x9f1f19['currentTarget']['dataset']['id'];openTrophyModal(_0x56c2eb);});}),document[_0x42d2bb(0x2ab)]('.assign-trophy-btn')[_0x42d2bb(0x2d4)](_0xba751d=>{_0xba751d['addEventListener']('click',_0xb58fc0=>{const _0x446a22=a4_0x3732,_0x1c4aaf=_0xb58fc0['currentTarget'][_0x446a22(0x23d)]['id'];openAssignTrophyModal(_0x1c4aaf);});}),document['querySelectorAll'](_0x42d2bb(0x242))['forEach'](_0x22bfc2=>{_0x22bfc2['addEventListener']('click',_0x5f57b1=>{const _0x194718=a4_0x3732,_0x32d615=_0x5f57b1['currentTarget'][_0x194718(0x23d)]['id'];confirmDeleteTrophy(_0x32d615);});});}function openTrophyModal(_0x119fc9=null){const _0x52f774=a4_0x4c4826,_0x29b0de=document[_0x52f774(0x215)]('trophy-modal'),_0x1ef1d5=document[_0x52f774(0x215)]('trophy-modal-title'),_0x2bebe2=document[_0x52f774(0x215)](_0x52f774(0x2dc)),_0x5e1f32=document[_0x52f774(0x215)]('trophy-id');_0x2bebe2[_0x52f774(0x10a)](),_0x5e1f32['value']='';const _0x790e3c=document[_0x52f774(0x215)]('trophy-preview-img');_0x790e3c&&(_0x790e3c['src']=DEFAULT_TROPHY_IMAGE,_0x790e3c['classList']['remove']('error')),_0x119fc9?(_0x1ef1d5[_0x52f774(0x18b)]=_0x52f774(0x1ec),_0x5e1f32['value']=_0x119fc9,loadTrophyData(_0x119fc9)):_0x1ef1d5['textContent']='Create\x20New\x20Trophy',_0x29b0de['classList'][_0x52f774(0x1f3)]('active');}async function loadTrophyData(_0x4f40ed){const _0x48fe19=a4_0x4c4826;try{const _0x3bf937=doc(db,_0x48fe19(0x1ce),_0x4f40ed),_0x296ce4=await getDoc(_0x3bf937);if(!_0x296ce4[_0x48fe19(0x11c)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x1cce66=_0x296ce4['data']();document['getElementById']('trophy-name')[_0x48fe19(0x12d)]=_0x1cce66['name']||'',document['getElementById']('trophy-description')['value']=_0x1cce66['description']||'',document['getElementById']('trophy-image-url')['value']=_0x1cce66['image']||'',document['getElementById']('trophy-rarity')[_0x48fe19(0x12d)]=_0x1cce66[_0x48fe19(0x1c2)]||'common',updateTrophyImagePreview();}catch(_0x59c282){console['error']('Error\x20loading\x20trophy\x20data:',_0x59c282),showNotification(_0x48fe19(0x1e1),'error');}}async function saveTrophyDefinition(){const _0x2d7ccb=a4_0x4c4826;try{const _0x4fc59e=document[_0x2d7ccb(0x215)]('trophy-id')['value'],_0x5e6d2f=document[_0x2d7ccb(0x215)](_0x2d7ccb(0x1e3))['value']['trim'](),_0x5d59ff=document['getElementById'](_0x2d7ccb(0x2cd))['value']['trim'](),_0x5ccdb2=document[_0x2d7ccb(0x215)]('trophy-image-url')['value']['trim'](),_0x37d5fe=document['getElementById']('trophy-rarity')['value'];if(!_0x5e6d2f||!_0x5d59ff||!_0x5ccdb2){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x52774e=auth['currentUser'];if(!_0x52774e){showNotification(_0x2d7ccb(0xe1),_0x2d7ccb(0x1f2));return;}const _0x1a892b={'name':_0x5e6d2f,'description':_0x5d59ff,'image':_0x5ccdb2,'rarity':_0x37d5fe,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x52774e[_0x2d7ccb(0xf4)]};!_0x4fc59e?(_0x1a892b[_0x2d7ccb(0x1fb)]=serverTimestamp(),_0x1a892b['createdBy']=_0x52774e[_0x2d7ccb(0xf4)],await addDoc(collection(db,_0x2d7ccb(0x1ce)),_0x1a892b),showNotification('Trophy\x20created\x20successfully',_0x2d7ccb(0x1e4))):(await updateDoc(doc(db,'trophyDefinitions',_0x4fc59e),_0x1a892b),showNotification(_0x2d7ccb(0x20c),_0x2d7ccb(0x1e4))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x475247){console['error']('Error\x20saving\x20trophy:',_0x475247),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x475247['message'],_0x2d7ccb(0x1f2));}}function closeTrophyModal(){const _0x69bcf8=a4_0x4c4826,_0x55e6de=document['getElementById']('trophy-modal');_0x55e6de&&_0x55e6de['classList'][_0x69bcf8(0x2e5)]('active');}async function confirmDeleteTrophy(_0x2d664f){const _0x450644=a4_0x4c4826;if(!_0x2d664f){console[_0x450644(0x1f2)]('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x4a7946=auth['currentUser'];if(!_0x4a7946){showNotification(_0x450644(0x236),'error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x2d664f),await deleteDoc(doc(db,_0x450644(0x1ce),_0x2d664f)),showNotification(_0x450644(0x284),_0x450644(0x1e4)),loadTrophyDefinitions();}catch(_0x15cf80){console[_0x450644(0x1f2)]('Error\x20deleting\x20trophy\x20definition:',_0x15cf80),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x15cf80[_0x450644(0x2db)],_0x450644(0x1f2));}}async function openAssignTrophyModal(_0x124008){const _0x25f333=a4_0x4c4826;try{const _0x4f0fc5=doc(db,'trophyDefinitions',_0x124008),_0xfdf286=await getDoc(_0x4f0fc5);if(!_0xfdf286['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x17fae9=_0xfdf286[_0x25f333(0x195)]();document['getElementById']('assign-trophy-id')['value']=_0x124008,document['getElementById'](_0x25f333(0x2ce))['value']=_0x17fae9[_0x25f333(0x2fb)],document['getElementById'](_0x25f333(0x198))['src']=_0x17fae9['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x17fae9[_0x25f333(0x2fb)]||'Unnamed\x20Trophy',document['getElementById'](_0x25f333(0x214))[_0x25f333(0x18b)]=_0x17fae9['description']||'No\x20description';const _0x4c8ad5=document['getElementById']('assign-trophy-rarity');_0x4c8ad5[_0x25f333(0x18b)]=_0x17fae9['rarity']||'common',_0x4c8ad5['className']='trophy-rarity\x20'+(_0x17fae9['rarity']||'common');const _0x2a6818=document['getElementById'](_0x25f333(0x2c7));_0x2a6818[_0x25f333(0x2ad)]['add']('active');}catch(_0x370409){console['error'](_0x25f333(0x147),_0x370409),showNotification(_0x25f333(0x1e1),'error');}}function closeAssignTrophyModal(){const _0x4bdb3b=a4_0x4c4826,_0x4cdf8e=document[_0x4bdb3b(0x215)]('assign-trophy-modal');_0x4cdf8e&&_0x4cdf8e['classList'][_0x4bdb3b(0x2e5)](_0x4bdb3b(0x23f));}async function assignTrophyToPlayer(){const _0x2ce3af=a4_0x4c4826;try{const _0x5a7408=document['getElementById']('assign-trophy-id')['value'],_0x514310=document['getElementById'](_0x2ce3af(0x2ce))['value'],_0xf6c50f=document['getElementById'](_0x2ce3af(0x186))[_0x2ce3af(0x12d)][_0x2ce3af(0x26e)](),_0x43bda9=document['querySelector'](_0x2ce3af(0x1ba))['value'];if(!_0x5a7408||!_0xf6c50f){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0xe21416=auth[_0x2ce3af(0xff)];if(!_0xe21416){showNotification(_0x2ce3af(0x2c6),'error');return;}let _0x2c3599=null,_0x59e08f=null,_0x5a35ac=null;if(_0x43bda9==='non-participant'){const _0x45574b=collection(db,_0x2ce3af(0x1d9)),_0x1ab7e0=query(_0x45574b,where(_0x2ce3af(0xb3),'==',_0xf6c50f)),_0x1605f3=await getDocs(_0x1ab7e0);!_0x1605f3[_0x2ce3af(0x2a9)]&&(_0x2c3599=_0x1605f3[_0x2ce3af(0x2d3)][0x0],_0x59e08f=_0x2c3599['id'],_0x5a35ac=_0x2c3599[_0x2ce3af(0x195)]());}else{const _0x21b571=_0x43bda9==='D1'?_0x2ce3af(0x2c3):_0x43bda9==='D2'?'playersD2':'playersD3',_0x31b1cf=collection(db,_0x21b571),_0x51a045=query(_0x31b1cf,where('username','==',_0xf6c50f)),_0x5239a2=await getDocs(_0x51a045);!_0x5239a2['empty']&&(_0x2c3599=_0x5239a2[_0x2ce3af(0x2d3)][0x0],_0x59e08f=_0x2c3599['id'],_0x5a35ac=_0x2c3599['data']());}if(!_0x2c3599){showNotification('Player\x20\x22'+_0xf6c50f+'\x22\x20not\x20found\x20in\x20'+(_0x43bda9==='non-participant'?_0x2ce3af(0x254):_0x43bda9+'\x20ladder'),_0x2ce3af(0x1f2));return;}const _0x241e5a=collection(db,'userTrophies'),_0x5f5cb4=query(_0x241e5a,where(_0x2ce3af(0x2e4),'==',_0x59e08f),where('trophyId','==',_0x5a7408)),_0x15d94d=await getDocs(_0x5f5cb4);if(!_0x15d94d['empty']){showNotification('Player\x20\x22'+_0xf6c50f+_0x2ce3af(0x170),_0x2ce3af(0x2e2));return;}await addDoc(collection(db,_0x2ce3af(0x2ef)),{'userId':_0x59e08f,'playerUsername':_0xf6c50f,'trophyId':_0x5a7408,'awardedAt':serverTimestamp(),'awardedBy':_0xe21416['email'],'ladder':_0x43bda9}),showNotification('Trophy\x20\x22'+_0x514310+'\x22\x20awarded\x20to\x20'+_0xf6c50f,'success'),closeAssignTrophyModal();}catch(_0x45e6e1){console['error']('Error\x20assigning\x20trophy:',_0x45e6e1),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x45e6e1['message'],'error');}}function setupInactivePlayersSection(){const _0x1a2c0e=a4_0x4c4826,_0x5dd6dc=document['getElementById'](_0x1a2c0e(0x158));_0x5dd6dc&&_0x5dd6dc['addEventListener'](_0x1a2c0e(0x237),function(){const _0x290f68=_0x1a2c0e,_0x1a7a89=document['getElementById'](_0x290f68(0x1b8));if(_0x1a7a89)_0x1a7a89['click']();});const _0x4d264d=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x5d3b01=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x4d264d&&_0x5d3b01&&(_0x4d264d['addEventListener']('change',function(){if(this['checked']){currentLadder='D1';if(document['getElementById']('inactive-players')['style']['display']!=='none'){const _0x345d7d=document['getElementById']('load-inactive-players-data');if(_0x345d7d)_0x345d7d['click']();}}}),_0x5d3b01[_0x1a2c0e(0x126)]('change',function(){const _0xc38f81=_0x1a2c0e;if(this[_0xc38f81(0x1c7)]){currentLadder='D2';if(document['getElementById']('inactive-players')['style']['display']!=='none'){const _0x4c7701=document['getElementById']('load-inactive-players-data');if(_0x4c7701)_0x4c7701['click']();}}}));const _0x398eed=document['getElementById'](_0x1a2c0e(0x1df));_0x398eed&&_0x398eed['addEventListener']('input',debounce(function(){const _0x49acdc=_0x1a2c0e,_0x575153=_0x398eed[_0x49acdc(0x12d)]['toLowerCase'](),_0xdc2bab=document[_0x49acdc(0x2ab)]('#inactive-players-table-body\x20tr');_0xdc2bab['forEach'](_0x121c9e=>{const _0x19a470=_0x49acdc;if(_0x121c9e['querySelector']('.loading-cell')||_0x121c9e['querySelector']('.empty-state')||_0x121c9e['querySelector'](_0x19a470(0xc7)))return;const _0x70c511=_0x121c9e[_0x19a470(0xee)][0x0]?.['textContent']['toLowerCase']()||'',_0x518b51=_0x121c9e['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x70c511['includes'](_0x575153)||_0x518b51['includes'](_0x575153)?_0x121c9e['style'][_0x19a470(0x20d)]='':_0x121c9e['style']['display']=_0x19a470(0x1a3);});},0x12c)),document['addEventListener']('click',function(_0x452b8f){const _0x298c09=_0x1a2c0e;if(_0x452b8f['target']['closest']('.view-player-btn')){const _0x432ac9=_0x452b8f['target']['closest'](_0x298c09(0x29d)),_0x2d23c2=_0x432ac9['dataset']['username'];_0x2d23c2&&alert('View\x20player\x20details\x20for\x20'+_0x2d23c2+_0x298c09(0x29c));}}),console['log'](_0x1a2c0e(0x1cf));}async function loadInactivePlayersData(){const _0x53c427=a4_0x4c4826,_0x462793=document['getElementById']('inactive-players-table-body');if(!_0x462793)return;_0x462793['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x170b05=document['getElementById']('inactive-days-filter'),_0x28ed5e=_0x170b05?parseInt(_0x170b05['value'])||0x0:0x0,_0x16c2a5=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x3b1d6f=await getDocs(_0x16c2a5);if(_0x3b1d6f['empty']){_0x462793[_0x53c427(0x1a1)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x34ff27=[];_0x3b1d6f['forEach'](_0x2e2d99=>{const _0x20a09c=_0x53c427,_0x1f7c65=_0x2e2d99['data']();_0x34ff27[_0x20a09c(0x259)]({..._0x1f7c65,'id':_0x2e2d99['id'],'username':_0x1f7c65['username']||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x34ff27['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+_0x53c427(0x13c));const _0x5b881c=currentLadder==='D1'?_0x53c427(0x268):'approvedMatchesD2',_0x307b76=_0x34ff27[_0x53c427(0x14d)](async _0x64ef24=>{const _0x47e474=_0x53c427;try{const _0x4f46dc=collection(db,_0x5b881c),_0x49297e=query(_0x4f46dc,or(where(_0x47e474(0x222),'==',_0x64ef24[_0x47e474(0xb3)]),where('loserUsername','==',_0x64ef24[_0x47e474(0xb3)])),orderBy('approvedAt','desc'),limit(0x1)),_0x4b0b76=await getDocs(_0x49297e);if(!_0x4b0b76['empty']){const _0xe4827=_0x4b0b76[_0x47e474(0x2d3)][0x0]['data'](),_0x3c4c23=_0xe4827['approvedAt']?new Date(_0xe4827['approvedAt'][_0x47e474(0x128)]*0x3e8):null,_0x515e1e=new Date(),_0x4237ec=_0x3c4c23?Math['floor']((_0x515e1e-_0x3c4c23)/(0x3e8*0x3c*0x3c*0x18)):null,_0x2fbe32=_0xe4827[_0x47e474(0x222)]===_0x64ef24['username']?_0xe4827[_0x47e474(0xc6)]:_0xe4827['winnerUsername'],_0x2575aa=_0xe4827[_0x47e474(0x222)]===_0x64ef24['username']?'Won':'Lost';return{..._0x64ef24,'lastMatch':{'date':_0x3c4c23?_0x3c4c23['toLocaleDateString']():'N/A','opponent':_0x2fbe32||'Unknown','result':_0x2575aa,'timestamp':_0x3c4c23||new Date(0x0),'daysSinceMatch':_0x4237ec||Number['MAX_SAFE_INTEGER']}};}else return{..._0x64ef24,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':_0x47e474(0x24f),'timestamp':new Date(0x0),'daysSinceMatch':Number[_0x47e474(0x12f)]}};}catch(_0x14bb83){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x64ef24[_0x47e474(0xb3)]+':',_0x14bb83),{..._0x64ef24,'lastMatch':{'date':'Error','opponent':_0x47e474(0xb8),'result':_0x47e474(0xb8),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x5b037a=await Promise[_0x53c427(0x2cf)](_0x307b76);_0x5b037a[_0x53c427(0x11f)]((_0x19c34e,_0x1183fa)=>_0x1183fa['lastMatch']['daysSinceMatch']-_0x19c34e['lastMatch']['daysSinceMatch']);_0x28ed5e>0x0&&(_0x5b037a=_0x5b037a['filter'](_0x3d9305=>_0x3d9305['lastMatch'][_0x53c427(0x10f)]>=_0x28ed5e));_0x462793[_0x53c427(0x1a1)]='';if(_0x5b037a['length']===0x0){_0x462793['innerHTML']=_0x53c427(0x13f);return;}_0x5b037a['forEach'](_0x46cbc5=>{const _0x396041=_0x53c427,_0x314cb2=document[_0x396041(0x12c)]('tr'),_0x45b165=_0x46cbc5['lastMatch'][_0x396041(0x10f)]>0x1e?'highly-inactive':_0x46cbc5['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x314cb2[_0x396041(0x18c)]=_0x45b165,_0x314cb2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x46cbc5['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x46cbc5[_0x396041(0x150)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x46cbc5[_0x396041(0x176)][_0x396041(0x2b8)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x46cbc5['lastMatch']['daysSinceMatch']===Number[_0x396041(0x12f)]?'N/A':_0x46cbc5['lastMatch']['daysSinceMatch'])+_0x396041(0xd9)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x46cbc5['lastMatch']['date']==='Never\x20played'?'No\x20matches\x20found':_0x46cbc5[_0x396041(0x176)]['result']+'\x20vs\x20'+_0x46cbc5[_0x396041(0x176)]['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x46cbc5['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x462793[_0x396041(0x2b5)](_0x314cb2);}),console['log']('Displaying\x20'+_0x5b037a['length']+_0x53c427(0x17d));}catch(_0xd516a7){console[_0x53c427(0x1f2)]('Error\x20loading\x20inactive\x20players:',_0xd516a7),_0x462793['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0xd516a7['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x2897aa=a4_0x4c4826;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x22586b=document['getElementById']('create-match-highlight-btn');_0x22586b&&_0x22586b['addEventListener']('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x34c413=document['getElementById']('create-creator-highlight-btn');_0x34c413&&_0x34c413['addEventListener']('click',function(){const _0x492cf4=a4_0x3732;console['log'](_0x492cf4(0x233)),openHighlightModal('creator');});const _0x53ab18=document['getElementById']('create-achievement-highlight-btn');_0x53ab18&&_0x53ab18[_0x2897aa(0x126)]('click',function(){const _0x432d49=_0x2897aa;console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x432d49(0xec));});}function openHighlightModal(_0x3fbf17='match'){const _0xb1f867=a4_0x4c4826;console[_0xb1f867(0xea)]('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x3fbf17);const _0x198068=document['getElementById'](_0xb1f867(0x115)),_0x40a1d8=document['getElementById']('highlight-form'),_0x4cd809=document['getElementById'](_0xb1f867(0xfe)),_0xd31625=document['getElementById']('highlight-id');if(!_0x198068||!_0x40a1d8||!_0x4cd809){console['error'](_0xb1f867(0x183));return;}_0x40a1d8[_0xb1f867(0x10a)](),_0xd31625[_0xb1f867(0x12d)]='';const _0x23f0ca=[_0xb1f867(0x169),_0xb1f867(0x22c),_0xb1f867(0xec)],_0xdd5fe8=!_0x23f0ca['includes'](_0x3fbf17);if(_0xdd5fe8){const _0x216c7e=_0x3fbf17;_0xd31625[_0xb1f867(0x12d)]=_0x216c7e,_0x4cd809['textContent']='Loading...',loadHighlightDataAdmin(_0x216c7e);}else{const _0x21ce9b=_0x3fbf17;document['getElementById']('highlight-type')['value']=_0x21ce9b,_0x4cd809['textContent']=_0xb1f867(0x102)+getHighlightTypeName(_0x21ce9b),toggleHighlightFields(_0x21ce9b);const _0x12561d=auth['currentUser'];_0x12561d&&document['getElementById']('highlight-submitted-by')&&(document[_0xb1f867(0x215)]('highlight-submitted-by')['value']=_0x12561d['displayName']||_0x12561d[_0xb1f867(0xf4)]);}_0x198068[_0xb1f867(0x2ad)]['add']('active');}function toggleHighlightFields(_0x73c7f3){const _0x133218=a4_0x4c4826;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x73c7f3);const _0x26865a=document['getElementById']('highlight-form');if(!_0x26865a)return;const _0x3d37d7=_0x26865a[_0x133218(0x2ab)]('.form-group,\x20.form-row');_0x3d37d7['forEach'](_0xb19cb=>_0xb19cb['style']['display']='none');const _0x102719=document['getElementById'](_0x133218(0x210));if(_0x102719)_0x102719[_0x133218(0x28d)]['display']='none';const _0x34eb24=[_0x133218(0x1f5),'highlight-description-container','highlight-submitted-by-container'];_0x34eb24['forEach'](_0x126dba=>{const _0x543193=_0x133218,_0x90b49a=document['getElementById'](_0x126dba);if(_0x90b49a)_0x90b49a['style']['display']=_0x543193(0xf0);});if(_0x73c7f3===_0x133218(0x169)){const _0x32267a=[_0x133218(0x155),'highlight-match-info-container','highlight-map-container','highlight-match-date-container','highlight-players-container',_0x133218(0x2a2)];_0x32267a['forEach'](_0xf5e800=>{const _0x435e4e=_0x133218,_0x19cdb3=document[_0x435e4e(0x215)](_0xf5e800);_0x19cdb3&&(_0xf5e800==='highlight-players-container'?_0x19cdb3['style']['display']='flex':_0x19cdb3['style']['display']=_0x435e4e(0xf0));});const _0x5a77aa=document['getElementById']('highlight-video-id');if(_0x5a77aa){_0x5a77aa[_0x133218(0x127)]=!![];const _0x2552c2=_0x5a77aa['previousElementSibling'];if(_0x2552c2)_0x2552c2['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x102719)_0x102719[_0x133218(0x28d)][_0x133218(0x20d)]='block';updateHighlightVideoPreview();}else{if(_0x73c7f3==='creator'){const _0xc1de08=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0xc1de08['forEach'](_0x4cbbf1=>{const _0xe4025=_0x133218,_0x2d20f7=document['getElementById'](_0x4cbbf1);if(_0x2d20f7)_0x2d20f7['style']['display']=_0xe4025(0xf0);});const _0x29d369=document[_0x133218(0x215)]('highlight-video-id');if(_0x29d369){_0x29d369[_0x133218(0x127)]=![];const _0x1fcd04=_0x29d369['previousElementSibling'];if(_0x1fcd04)_0x1fcd04['innerHTML']=_0x133218(0xed);}}else{if(_0x73c7f3===_0x133218(0xec)){const _0x31d4d6=['highlight-achievement-player-container','highlight-achievement-type-container','highlight-achievement-details-container',_0x133218(0x1c9),'highlight-achievement-image-container','highlight-video-container'];_0x31d4d6[_0x133218(0x2d4)](_0x127192=>{const _0x14eadb=_0x133218,_0x5e73e6=document[_0x14eadb(0x215)](_0x127192);if(_0x5e73e6)_0x5e73e6['style']['display']='block';});const _0x2eda84=document[_0x133218(0x215)](_0x133218(0x189));if(_0x2eda84){_0x2eda84['required']=![];const _0x4a74ce=_0x2eda84[_0x133218(0x1f1)];if(_0x4a74ce)_0x4a74ce['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x569d4f){const _0x2d3d22=a4_0x4c4826;try{const _0x27a4d3=doc(db,'highlights',_0x569d4f),_0x53bab6=await getDoc(_0x27a4d3);if(!_0x53bab6['exists']()){showNotification(_0x2d3d22(0xe8),'error');return;}const _0x19a8a6=_0x53bab6['data'](),_0x26c85b=_0x19a8a6['type']||_0x2d3d22(0x169);document[_0x2d3d22(0x215)]('highlight-modal-title')[_0x2d3d22(0x18b)]='Edit\x20'+getHighlightTypeName(_0x26c85b),document['getElementById']('highlight-type')['value']=_0x26c85b,toggleHighlightFields(_0x26c85b),document['getElementById']('highlight-title')['value']=_0x19a8a6['title']||'',document[_0x2d3d22(0x215)](_0x2d3d22(0xfa))[_0x2d3d22(0x12d)]=_0x19a8a6['description']||'',document[_0x2d3d22(0x215)](_0x2d3d22(0x1e7))['value']=_0x19a8a6[_0x2d3d22(0x2a3)]||'';_0x19a8a6[_0x2d3d22(0x185)]&&(document['getElementById']('highlight-video-id')['value']=_0x19a8a6[_0x2d3d22(0x185)],updateHighlightVideoPreview());if(_0x26c85b==='match'){document['getElementById']('highlight-match-info')[_0x2d3d22(0x12d)]=_0x19a8a6['matchInfo']||'',document['getElementById']('highlight-map')['value']=_0x19a8a6['map']||'';if(_0x19a8a6['matchDate']){const _0x6b4ba9=new Date(_0x19a8a6['matchDate'][_0x2d3d22(0x128)]*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x6b4ba9[_0x2d3d22(0xc1)]()[_0x2d3d22(0x1f8)]('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x19a8a6['winnerName']||'',document['getElementById']('highlight-winner-score')['value']=_0x19a8a6['winnerScore']||'',document['getElementById'](_0x2d3d22(0x14f))['value']=_0x19a8a6['loserName']||'',document['getElementById']('highlight-loser-score')[_0x2d3d22(0x12d)]=_0x19a8a6['loserScore']||'',document['getElementById']('highlight-match-link')['value']=_0x19a8a6['matchLink']||'';}else{if(_0x26c85b==='creator')document[_0x2d3d22(0x215)]('highlight-map')['value']=_0x19a8a6['map']||'',document['getElementById']('highlight-map-creator')[_0x2d3d22(0x12d)]=_0x19a8a6[_0x2d3d22(0x16b)]||'',document['getElementById']('highlight-map-version')[_0x2d3d22(0x12d)]=_0x19a8a6['mapVersion']||'',document['getElementById']('highlight-creator-image')[_0x2d3d22(0x12d)]=_0x19a8a6[_0x2d3d22(0xf5)]||'';else _0x26c85b==='achievement'&&(document[_0x2d3d22(0x215)]('highlight-achievement-player')[_0x2d3d22(0x12d)]=_0x19a8a6[_0x2d3d22(0x2c9)]||'',document[_0x2d3d22(0x215)]('highlight-achievement-type')['value']=_0x19a8a6['achievementType']||'',document[_0x2d3d22(0x215)]('highlight-achievement-details')['value']=_0x19a8a6['achievementDetails']||'',document[_0x2d3d22(0x215)](_0x2d3d22(0x2d8))['value']=_0x19a8a6['playerProfileUrl']||'',document[_0x2d3d22(0x215)]('highlight-achievement-image')['value']=_0x19a8a6['achievementImageUrl']||'');}}catch(_0x544295){console['error']('Error\x20loading\x20highlight:',_0x544295),showNotification('Error\x20loading\x20highlight:\x20'+_0x544295['message'],'error');}}async function saveHighlight(){const _0x5a22ff=a4_0x4c4826;try{const _0x340643=document['getElementById']('highlight-id')?.['value']||'',_0x186158=document['getElementById']('highlight-type')?.[_0x5a22ff(0x12d)]||_0x5a22ff(0x169),_0x2a3ee2={'title':document['getElementById']('highlight-title')?.[_0x5a22ff(0x12d)]?.['trim']()||'','description':document['getElementById']('highlight-description')?.[_0x5a22ff(0x12d)]?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.[_0x5a22ff(0x12d)]?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x186158};if(!_0x2a3ee2['title']){showNotification(_0x5a22ff(0x151),'error');return;}if(_0x186158==='match'){_0x2a3ee2['matchInfo']=document['getElementById']('highlight-match-info')?.[_0x5a22ff(0x12d)]?.['trim']()||'',_0x2a3ee2['map']=document['getElementById']('highlight-map')?.[_0x5a22ff(0x12d)]?.[_0x5a22ff(0x26e)]()||'';const _0x57cd35=document[_0x5a22ff(0x215)](_0x5a22ff(0x2cc)),_0x5226e1=_0x57cd35?.[_0x5a22ff(0x12d)]||'';_0x2a3ee2['matchDate']=_0x5226e1?Timestamp['fromDate'](new Date(_0x5226e1)):null,_0x2a3ee2['winnerName']=document[_0x5a22ff(0x215)]('highlight-winner-name')?.['value']?.['trim']()||'',_0x2a3ee2['winnerScore']=document['getElementById']('highlight-winner-score')?.[_0x5a22ff(0x12d)]?.['trim']()||'',_0x2a3ee2['loserName']=document['getElementById'](_0x5a22ff(0x14f))?.[_0x5a22ff(0x12d)]?.['trim']()||'',_0x2a3ee2[_0x5a22ff(0x2bb)]=document[_0x5a22ff(0x215)]('highlight-loser-score')?.['value']?.['trim']()||'',_0x2a3ee2['matchLink']=document['getElementById'](_0x5a22ff(0x1ac))?.[_0x5a22ff(0x12d)]?.[_0x5a22ff(0x26e)]()||'';if(!_0x2a3ee2['videoId']){showNotification(_0x5a22ff(0x24c),'error');return;}}else{if(_0x186158==='creator'){_0x2a3ee2['map']=document[_0x5a22ff(0x215)]('highlight-map')?.[_0x5a22ff(0x12d)]?.[_0x5a22ff(0x26e)]()||'',_0x2a3ee2['mapCreator']=document[_0x5a22ff(0x215)]('highlight-map-creator')?.[_0x5a22ff(0x12d)]?.['trim']()||'',_0x2a3ee2['mapVersion']=document['getElementById']('highlight-map-version')?.[_0x5a22ff(0x12d)]?.['trim']()||'',_0x2a3ee2[_0x5a22ff(0xf5)]=document[_0x5a22ff(0x215)](_0x5a22ff(0x122))?.['value']?.['trim']()||'';if(!_0x2a3ee2[_0x5a22ff(0x16b)]){showNotification('Map\x20Creator\x20is\x20required',_0x5a22ff(0x1f2));return;}}else{if(_0x186158==='achievement'){_0x2a3ee2[_0x5a22ff(0x2c9)]=document[_0x5a22ff(0x215)](_0x5a22ff(0x109))?.['value']?.['trim']()||'',_0x2a3ee2['achievementType']=document[_0x5a22ff(0x215)]('highlight-achievement-type')?.['value']?.[_0x5a22ff(0x26e)]()||'',_0x2a3ee2[_0x5a22ff(0x2e8)]=document[_0x5a22ff(0x215)](_0x5a22ff(0xaf))?.['value']?.[_0x5a22ff(0x26e)]()||'',_0x2a3ee2['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.[_0x5a22ff(0x26e)]()||'',_0x2a3ee2['achievementImageUrl']=document[_0x5a22ff(0x215)](_0x5a22ff(0x277))?.[_0x5a22ff(0x12d)]?.['trim']()||'';if(!_0x2a3ee2['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x340643?(_0x2a3ee2[_0x5a22ff(0x2d2)]=serverTimestamp(),await updateDoc(doc(db,_0x5a22ff(0x162),_0x340643),_0x2a3ee2),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x2a3ee2['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x2a3ee2),showNotification(_0x5a22ff(0x1e9),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x5346fa){console[_0x5a22ff(0x1f2)](_0x5a22ff(0xd2),_0x5346fa),showNotification('Error\x20saving\x20highlight:\x20'+_0x5346fa[_0x5a22ff(0x2db)],'error');}}function closeHighlightModal(){const _0xa7a766=document['getElementById']('highlight-modal');if(_0xa7a766)_0xa7a766['classList']['remove']('active');}function getHighlightTypeName(_0x4664a2){const _0x1c7cb6=a4_0x4c4826;switch(_0x4664a2){case _0x1c7cb6(0x169):return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0xcca441=a4_0x4c4826,_0x450fab=document['getElementById']('highlight-video-id'),_0x543da6=document['getElementById'](_0xcca441(0x210)),_0x5ea078=document['getElementById']('highlight-video-preview');if(!_0x450fab||!_0x5ea078||!_0x543da6)return;const _0xc3a69d=_0x450fab[_0xcca441(0x12d)]['trim']();_0xc3a69d&&/^[a-zA-Z0-9_-]{11}$/['test'](_0xc3a69d)?(_0x5ea078[_0xcca441(0x1aa)]='https://www.youtube.com/embed/'+_0xc3a69d,_0x543da6[_0xcca441(0x28d)]['display']=_0xcca441(0xf0)):(_0x5ea078['src']='',_0x543da6['style'][_0xcca441(0x20d)]=_0xcca441(0x1a3));}async function loadHighlightsAdmin(){const _0x41eb28=a4_0x4c4826,_0x816516=document['getElementById']('highlights-table-body');if(!_0x816516)return;_0x816516['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x2ad4d3=query(collection(db,_0x41eb28(0x162)),orderBy('createdAt',_0x41eb28(0x193))),_0x1edcfe=await getDocs(_0x2ad4d3);if(_0x1edcfe['empty']){_0x816516['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x816516['innerHTML']='',_0x1edcfe['forEach'](_0x211bab=>{const _0x5e4fc1=_0x41eb28,_0x216700=_0x211bab[_0x5e4fc1(0x195)](),_0x2d7ced=document['createElement']('tr'),_0x11cbdc=_0x216700[_0x5e4fc1(0x1fb)]?new Date(_0x216700['createdAt']['seconds']*0x3e8)[_0x5e4fc1(0x14c)]():'N/A';let _0x14c77d='Unknown',_0x57544b='';switch(_0x216700['type']){case _0x5e4fc1(0x169):_0x14c77d='Match',_0x57544b=_0x5e4fc1(0x289);break;case _0x5e4fc1(0x22c):_0x14c77d=_0x5e4fc1(0xdf),_0x57544b=_0x5e4fc1(0x1d7);break;case'achievement':_0x14c77d='Achievement',_0x57544b='achievement-type';break;}_0x2d7ced[_0x5e4fc1(0x1a1)]=_0x5e4fc1(0xeb)+(_0x216700['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x57544b+'\x22>'+_0x14c77d+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x11cbdc+_0x5e4fc1(0xd9)+(_0x216700[_0x5e4fc1(0x2a3)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x216700['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x211bab['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x211bab['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x816516[_0x5e4fc1(0x2b5)](_0x2d7ced);}),document['querySelectorAll'](_0x41eb28(0x297))['forEach'](_0x4cfe7e=>{_0x4cfe7e['addEventListener']('click',_0x48e8a0=>{openHighlightModal(_0x48e8a0['currentTarget']['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')[_0x41eb28(0x2d4)](_0x454419=>{_0x454419['addEventListener']('click',_0x4d448e=>{const _0x4cf080=a4_0x3732;confirmDeleteHighlight(_0x4d448e[_0x4cf080(0x12a)]['dataset']['id']);});});}catch(_0x50ad49){console[_0x41eb28(0x1f2)]('Error\x20loading\x20highlights:',_0x50ad49),_0x816516[_0x41eb28(0x1a1)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x50ad49['message']+_0x41eb28(0x1c1);}}async function confirmDeleteHighlight(_0x3afb98){const _0x598821=a4_0x4c4826;if(confirm(_0x598821(0x1c4)))try{await deleteDoc(doc(db,'highlights',_0x3afb98)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x5b702e){console['error']('Error\x20deleting\x20highlight:',_0x5b702e),showNotification(_0x598821(0x245)+_0x5b702e['message'],_0x598821(0x1f2));}}function setupCreateTestMatchModal(){const _0x4660e0=a4_0x4c4826;console['log'](_0x4660e0(0x1fd));const _0x475752=document['getElementById']('create-test-match-modal'),_0x2e5bcc=document[_0x4660e0(0x215)]('create-test-match-form');if(!_0x475752){console['error'](_0x4660e0(0x2f3));return;}if(!_0x2e5bcc){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x79cc2=_0x475752['cloneNode'](!![]);_0x475752[_0x4660e0(0xb0)][_0x4660e0(0x275)](_0x79cc2,_0x475752);const _0x2632ea=_0x79cc2['querySelector'](_0x4660e0(0xd6));_0x79cc2['addEventListener']('click',function(_0x4c1c28){const _0x21a366=_0x4660e0;_0x4c1c28[_0x21a366(0x2d1)]===_0x79cc2&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x400090=_0x79cc2['querySelector']('.close-btn');_0x400090&&_0x400090['addEventListener']('click',function(_0x267675){const _0x41ed8c=_0x4660e0;_0x267675['preventDefault'](),_0x267675[_0x41ed8c(0x1b3)](),console[_0x41ed8c(0xea)]('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x18d9cd=_0x79cc2['querySelector']('#cancel-create-test-match-btn');_0x18d9cd&&_0x18d9cd['addEventListener']('click',function(_0x4d42e7){_0x4d42e7['preventDefault'](),_0x4d42e7['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x2632ea){_0x2632ea['addEventListener'](_0x4660e0(0x1e8),function(_0x44f586){const _0x27ba86=_0x4660e0;_0x44f586[_0x27ba86(0x20e)](),_0x44f586['stopPropagation'](),console[_0x27ba86(0xea)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x525c74=_0x2632ea['querySelector']('button[type=\x22submit\x22]');_0x525c74&&_0x525c74['addEventListener'](_0x4660e0(0x2ea),function(_0x507325){_0x507325['preventDefault'](),_0x507325['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x4660e0(0xea)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x2ebdb0=a4_0x4c4826;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x5a9b13=document['getElementById']('highlight-form');_0x5a9b13&&_0x5a9b13['addEventListener']('submit',_0x47f1dc=>{const _0x159cd2=a4_0x3732;_0x47f1dc[_0x159cd2(0x20e)](),saveHighlight();});const _0xe03fd2=document['getElementById'](_0x2ebdb0(0x1d6));_0xe03fd2&&_0xe03fd2['addEventListener'](_0x2ebdb0(0x2ea),closeHighlightModal);const _0x134f85=document['querySelector'](_0x2ebdb0(0x154));_0x134f85&&_0x134f85['addEventListener']('click',closeHighlightModal);const _0xe50fa=document['getElementById'](_0x2ebdb0(0x115));_0xe50fa&&_0xe50fa['addEventListener']('click',_0xe98892=>{_0xe98892['target']===_0xe50fa&&closeHighlightModal();});const _0x1ddf85=document['getElementById']('highlight-video-id');_0x1ddf85&&_0x1ddf85[_0x2ebdb0(0x126)]('input',()=>{updateHighlightVideoPreview();}),console['log'](_0x2ebdb0(0x24b));}function setupManageMatchesSection(){const _0xcda253=a4_0x4c4826;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x2606e0=document['getElementById']('matches-prev-page'),_0x4069f6=document['getElementById']('matches-next-page');_0x2606e0&&_0x2606e0['addEventListener']('click',()=>{const _0x38e3ee=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x38e3ee]['page']-0x1);});_0x4069f6&&_0x4069f6[_0xcda253(0x126)]('click',()=>{const _0x6a2102=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x6a2102]['page']+0x1);});const _0x1e6e22=document['getElementById'](_0xcda253(0x1d0)),_0x1c557a=document['getElementById'](_0xcda253(0x2e7));_0x1e6e22&&_0x1e6e22['addEventListener']('click',applyMatchesFilters);_0x1c557a&&_0x1c557a[_0xcda253(0x126)]('click',resetMatchesFilters);const _0x3e8918=document['getElementById'](_0xcda253(0x19e));_0x3e8918&&_0x3e8918['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x5b9d70=document['getElementById'](_0xcda253(0x1b9));_0x5b9d70&&_0x5b9d70[_0xcda253(0x126)]('click',openResimulateModal);const _0x3a650c=document[_0xcda253(0x215)]('resimulate-modal');if(_0x3a650c){const _0x49a5fa=_0x3a650c['querySelector']('.close');_0x49a5fa&&_0x49a5fa['addEventListener']('click',closeResimulateModal),_0x3a650c[_0xcda253(0x126)]('click',_0x21312f=>{_0x21312f['target']===_0x3a650c&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x43cb57=a4_0x4c4826;console[_0x43cb57(0xea)]('Opening\x20create\x20test\x20match\x20modal');const _0xde19cb=document['getElementById']('create-test-match-modal'),_0x34e568=document[_0x43cb57(0x215)](_0x43cb57(0x17a));if(!_0xde19cb){console[_0x43cb57(0x1f2)]('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x34e568){console['error'](_0x43cb57(0x232)),showNotification(_0x43cb57(0x232),_0x43cb57(0x1f2));return;}_0x34e568['reset']();const _0x29438f=document['querySelectorAll'](_0x43cb57(0x231));let _0x213b46=![];_0x29438f['forEach'](_0x510580=>{const _0x45b925=_0x43cb57;console['log']('Found\x20radio\x20with\x20value:',_0x510580['value']),_0x510580['value']===currentLadder&&(_0x510580['checked']=!![],_0x213b46=!![],console['log'](_0x45b925(0x1f4),currentLadder));});if(!_0x213b46){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x4aad39=document[_0x43cb57(0xc4)](_0x43cb57(0x125));_0x4aad39&&(_0x4aad39[_0x43cb57(0x1c7)]=!![],console[_0x43cb57(0xea)](_0x43cb57(0x2c1)));}const _0x331ebc=document[_0x43cb57(0x215)]('test-match-date');if(_0x331ebc){const _0x536c6b=new Date()['toISOString']()['split']('T')[0x0];_0x331ebc[_0x43cb57(0x12d)]=_0x536c6b;}_0xde19cb['style']['display']='flex',_0xde19cb['style']['visibility']='visible',_0xde19cb['style'][_0x43cb57(0x2bc)]='1',_0xde19cb['classList']['add'](_0x43cb57(0x23f)),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x1f4741=document['getElementById'](_0x43cb57(0x260));_0x1f4741&&setTimeout(()=>{const _0x108032=_0x43cb57;_0x1f4741[_0x108032(0x137)]();},0x64);}function closeCreateTestMatchModal(){const _0x83dc4b=a4_0x4c4826;console[_0x83dc4b(0xea)]('Closing\x20create\x20test\x20match\x20modal');const _0x40e5a8=document['getElementById'](_0x83dc4b(0x25a));if(!_0x40e5a8){console[_0x83dc4b(0x1f2)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x40e5a8[_0x83dc4b(0x2ad)]['remove']('active'),_0x40e5a8['style']['opacity']='0',_0x40e5a8[_0x83dc4b(0x28d)]['visibility']='hidden',setTimeout(()=>{const _0x215a70=_0x83dc4b;!_0x40e5a8[_0x215a70(0x2ad)][_0x215a70(0x21e)]('active')&&(_0x40e5a8['style']['display']=_0x215a70(0x1a3));},0x12c),console[_0x83dc4b(0xea)](_0x83dc4b(0x1fc));}async function createTestMatch(){const _0x3a256d=a4_0x4c4826;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x26d89f=auth[_0x3a256d(0xff)];if(!_0x26d89f){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x6f1e2b='D1',_0x4f58a4=_0x3a256d(0x268),_0xb57d22={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp[_0x3a256d(0x2e0)](new Date()),'approvedBy':_0x26d89f['email'],'createdAt':serverTimestamp(),'createdBy':_0x26d89f['email'],'isTestMatch':!![],'ladder':_0x6f1e2b,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x26d89f['email']};console[_0x3a256d(0xea)]('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x4f58a4),_0xb57d22),showNotification('Simple\x20test\x20match\x20created\x20successfully',_0x3a256d(0x1e4)),closeCreateTestMatchModal();}catch(_0x468418){console[_0x3a256d(0x1f2)]('Error\x20creating\x20simple\x20test\x20match:',_0x468418),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x468418['message'],_0x3a256d(0x1f2));}}window['testFirebaseConnection']=async function(){const _0x11f1b2=a4_0x4c4826;try{console[_0x11f1b2(0xea)](_0x11f1b2(0x188)),console['log']('Auth:',auth),console[_0x11f1b2(0xea)](_0x11f1b2(0x26f),db),console['log']('Current\x20user:',auth['currentUser']);const _0x2ff512=collection(db,'players');console[_0x11f1b2(0xea)]('Collection\x20reference\x20created:',_0x2ff512);const _0x2d9778=query(_0x2ff512,where('username','==','nonexistent'));console[_0x11f1b2(0xea)]('Query\x20created:',_0x2d9778);const _0x2bf41c=await getDocs(_0x2d9778);console['log']('Query\x20executed.\x20Empty:',_0x2bf41c['empty']),console[_0x11f1b2(0xea)](_0x11f1b2(0x2f2));}catch(_0x52e042){console['error']('Firebase\x20connection\x20test\x20failed:',_0x52e042);}};function setupCreateTestMatchButton(){const _0x45456f=a4_0x4c4826,_0x23015f=document['getElementById']('create-test-match-btn');if(!_0x23015f){console[_0x45456f(0x1f2)](_0x45456f(0x160));return;}console[_0x45456f(0xea)]('Setting\x20up\x20create\x20test\x20match\x20button');const _0xd604cd=_0x23015f[_0x45456f(0x1c5)](!![]);_0x23015f['parentNode']['replaceChild'](_0xd604cd,_0x23015f),_0xd604cd['addEventListener']('click',function(_0x328616){const _0x19eb54=_0x45456f;_0x328616['preventDefault'](),_0x328616['stopPropagation'](),console[_0x19eb54(0xea)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x3ea430=0x1){const _0xdd6448=a4_0x4c4826,_0x620b9=document['getElementById'](_0xdd6448(0xba));if(!_0x620b9)return;_0x620b9['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x5d2709=currentLadder[_0xdd6448(0x17c)](),_0x35aead=matchesPagination[_0x5d2709],_0x808f13=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0xdd6448(0x29f),_0xca087f=collection(db,_0x808f13);_0x3ea430<=0x1?(_0x35aead[_0xdd6448(0x130)]=0x1,_0x35aead['firstVisible']=null,_0x35aead[_0xdd6448(0xd1)]=null):_0x35aead['page']=_0x3ea430;const _0x571f2b=getMatchesFilters();let _0x1a5eb4=_0xca087f;if(_0x571f2b['startDate']||_0x571f2b[_0xdd6448(0x2e3)]||_0x571f2b['searchTerm']){let _0x3e74c5=[];_0x571f2b[_0xdd6448(0x2c8)]&&_0x571f2b[_0xdd6448(0x2e3)]?(_0x3e74c5['push'](where('approvedAt','>=',_0x571f2b['startDate']),where(_0xdd6448(0x148),'<=',_0x571f2b[_0xdd6448(0x2e3)])),_0x1a5eb4=query(_0xca087f,..._0x3e74c5)):_0x1a5eb4=query(_0xca087f,orderBy(_0xdd6448(0x148),_0xdd6448(0x193)));}else _0x1a5eb4=query(_0xca087f,orderBy('approvedAt','desc'));_0x3ea430>0x1&&_0x35aead['lastVisible']?_0x1a5eb4=query(_0x1a5eb4,startAfter(_0x35aead[_0xdd6448(0xd1)]),limit(PAGE_SIZE)):_0x1a5eb4=query(_0x1a5eb4,limit(PAGE_SIZE));const _0x4f321b=await getDocs(_0x1a5eb4);!_0x4f321b[_0xdd6448(0x2a9)]&&(_0x35aead[_0xdd6448(0xc0)]=_0x4f321b['docs'][0x0],_0x35aead['lastVisible']=_0x4f321b[_0xdd6448(0x2d3)][_0x4f321b['docs']['length']-0x1]);let _0x449405=![];if(!_0x4f321b[_0xdd6448(0x2a9)]){const _0x1f272a=query(_0x1a5eb4,startAfter(_0x35aead['lastVisible']),limit(0x1)),_0x2090fd=await getDocs(_0x1f272a);_0x449405=!_0x2090fd['empty'];}const _0x20193e=document['getElementById']('matches-prev-page'),_0x55690f=document['getElementById'](_0xdd6448(0xd4)),_0x2e1aab=document['getElementById'](_0xdd6448(0x296));if(_0x20193e)_0x20193e['disabled']=_0x35aead['page']<=0x1;if(_0x55690f)_0x55690f[_0xdd6448(0x1a7)]=!_0x449405;if(_0x2e1aab)_0x2e1aab['textContent']='Page\x20'+_0x35aead[_0xdd6448(0x130)];if(_0x4f321b['empty']){_0x620b9[_0xdd6448(0x1a1)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x620b9['innerHTML']='',_0x4f321b[_0xdd6448(0x2d4)](_0x39d51e=>{const _0x2fe5b3=_0xdd6448,_0xeff115=_0x39d51e['data'](),_0x61dc26=document[_0x2fe5b3(0x12c)]('tr'),_0x34743e=_0xeff115['approvedAt']?new Date(_0xeff115[_0x2fe5b3(0x148)]['seconds']*0x3e8)[_0x2fe5b3(0x14c)]():'N/A';_0x61dc26['setAttribute']('data-id',_0x39d51e['id']),_0x61dc26[_0x2fe5b3(0x159)]('data-ladder',currentLadder),_0x61dc26['classList']['add']('match-row'),_0x61dc26['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x34743e+_0x2fe5b3(0xb2)+(_0xeff115['winnerUsername']||_0x2fe5b3(0x1a9))+_0x2fe5b3(0x204)+(_0xeff115['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0xeff115[_0x2fe5b3(0x1e2)]||0x0)+'\x20-\x20'+(_0xeff115[_0x2fe5b3(0x2bb)]||0x0)+_0x2fe5b3(0x240)+(_0xeff115['mapPlayed']||_0x2fe5b3(0x24f))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x39d51e['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x39d51e['id']+_0x2fe5b3(0x2b3),_0x620b9['appendChild'](_0x61dc26);}),setupMatchesActionButtons(),_0x571f2b['searchTerm']&&filterMatchesTable(),console[_0xdd6448(0xea)]('Loaded\x20'+_0x4f321b['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x35aead['page']);}catch(_0x19f272){console['error'](_0xdd6448(0x2a6),_0x19f272),_0x620b9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x19f272[_0xdd6448(0x2db)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x4a0dc6,_0x4c50ba){const _0x328452=a4_0x4c4826;try{console[_0x328452(0xea)]('Deleting\x20match\x20'+_0x4a0dc6+_0x328452(0x2cb)+_0x4c50ba+_0x328452(0x13c));const _0x52a5ca=auth['currentUser'];if(!_0x52a5ca){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x4ce695=_0x4c50ba==='D1'?'approvedMatches':_0x4c50ba==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log'](_0x328452(0x295)+_0x4ce695),showNotification(_0x328452(0x13a),'info'),await deleteDoc(doc(db,_0x4ce695,_0x4a0dc6)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x16a306=_0x4c50ba['toLowerCase']();loadMatchesData(matchesPagination[_0x16a306]['page']);}catch(_0x28ac40){console['error'](_0x328452(0x2e1),_0x28ac40),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x28ac40['message'],'error');}}function a4_0x5035(){const _0x1eb58e=['highlight-achievement-details','parentNode','Added\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','username','delete-match-summary','has','Error\x20loading\x20ribbons:','d1-prev-page','Error','Modal\x20computed\x20styles:','matches-table-body','bind','set','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','Attaching\x20cancel\x20button\x20listener.','mapVersion','firstVisible','toISOString','#ffffff','Please\x20enter\x20a\x20username','querySelector','No\x20player\x20selected','loserUsername','.error-state','current-ladder-display','uid','Loading\x20user\x20data...','winnerName','admin','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Failed\x20to\x20send\x20Discord\x20notification:','No\x20ELO\x20history\x20found\x20for\x20player\x20','set-role-modal','lastVisible','Error\x20saving\x20highlight:','0.6','matches-next-page','Error\x20loading\x20ELO\x20history:','#create-test-match-form','edit-username','padding','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x22\x20set','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','Trophy\x20Preview','Creator','Error\x20in\x20demotion:','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#808080','edit-highlight-mapCreator-input','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','allUsersPoints','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','Highlight\x20not\x20found','string','log','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','achievement','YouTube\x20Video\x20ID\x20(Optional)','cells','matches-end-date','block','Modal\x20setup\x20complete','.empty-state','Processing\x20points\x20edit:','email','creatorImageUrl','.no-results','d3-next-page','toLocaleString','Error\x20loading\x20articles:','highlight-description','substring','cancel-set-elo-btn','data-match-id','highlight-modal-title','currentUser','activity-chart','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','Create\x20New\x20','playerId','mapName','Error\x20opening\x20quick\x20edit\x20modal:','\x20was\x20updated\x20from\x20','subtract','matches-start-date','highlight-achievement-player','reset','prototype','Winner\x20and\x20loser\x20usernames\x20are\x20required','role-filter','Enter','daysSinceMatch','\x20points','.view-history-btn','trophies-table-body','ribbons','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','highlight-modal','edit-match-id','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Using\x20collections\x20for\x20','filter','quick-edit-display-name','Load\x20articles\x20data\x20clicked','exists','Attempting\x20to\x20promote\x20','edit-wins','sort','commit','Sidebar\x20navigation\x20initialized\x20with\x20permissions','highlight-creator-image','action','edit-losses','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','addEventListener','required','seconds','adminEmail','currentTarget','history-start-date','createElement','value','inactive-players','MAX_SAFE_INTEGER','page','No\x20users\x20needed\x20points\x20field\x20initialization','amount','Error\x20loading\x20trophy\x20definitions:','playerRibbonsD2','points','articles','focus','Modal\x20element\x20not\x20found!','Demoting\x20player\x20to\x20','Deleting\x20match...','matchDate','\x20ladder','load-articles-data','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','rgba(255,\x20255,\x20255,\x200.1)','\x22\x20not\x20found\x20in\x20any\x20collection','selected-user-id','input','length','ribbon-user-search','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','Error\x20opening\x20assign\x20trophy\x20modal:','approvedAt','role','.ladder-switch\x20input','elo','toLocaleDateString','map','RejectedD1','highlight-loser-name','eloRating','Title\x20is\x20required','max','user-search','#highlight-modal\x20.close-btn','highlight-video-container','selected-user-info','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>','inactive-days-filter','setAttribute','Role\x20removed','find','timestamp','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','removeAttribute','loserName','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','removeEventListener','highlights','\x27\x20has\x20permissions:','Error\x20updating\x20player:','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','rank-distribution-chart','Error\x20removing\x20ribbon','\x20vs\x20','match','\x20quick\x20edit\x20buttons','mapCreator','keys','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','manage-highlights','article-author','\x22\x20already\x20has\x20this\x20trophy','-page-indicator','level',';\x22>','dashboard','includes','lastMatch','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','position','Error\x20loading\x20players:','create-test-match-form','UserProfile','toLowerCase','\x20inactive\x20players','table','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','Please\x20enter\x20valid\x20username\x20and\x20ELO','ribbon-type-select','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','elo-history','videoId','assign-player-username','edit-match-ladder','Testing\x20Firebase\x20connection...','highlight-video-id','points-user-search','textContent','className','promote-username','No\x20user\x20ID\x20found\x20on\x20button','eloHistoryD2','sources','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','add-ribbon-form','desc','achievementType','data','edit-highlight-matchInfo-input','d2-prev-page','assign-trophy-image','20px','Positions\x20updated:\x20Winner\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','roleAssignedAt','User\x20not\x20found','matches-search','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','body','innerHTML','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','none','Promoting\x20player\x20to\x20','set-elo-modal','confirm-resimulate-btn','disabled','loserComment','Unknown','src','Matches\x20Played','highlight-match-link','Load\x20ribbons\x20data\x20clicked','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','reset-history-filters','Error\x20setting\x20custom\x20ELO:','div','setHours','stopPropagation','Failed\x20to\x20delete\x20match:\x20','Silver','Never','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','load-inactive-players-data','resimulate-match-btn','input[name=\x22assign-ladder\x22]:checked','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','\x20in\x20','edit-match-winner-suicides','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','Error\x20loading\x20users:','Setting\x20up\x20Manage\x20Ribbons\x20section','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','rarity','playerRibbons','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','cloneNode','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','checked','cancel-promote-btn','highlight-player-profile-container','promote-ladder','marginBottom','Updating\x20role\x20for\x20','positive-change','trophyDefinitions','Inactive\x20players\x20section\x20initialized','apply-matches-filters','Player\x20not\x20found\x20in\x20','join','No\x20reason\x20provided','article-content','roleAssignedBy','cancel-highlight-btn','creator-type','user-roles-section','nonParticipants','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','\x20ELO\x20history\x20entries.\x20','edit-highlight-creatorImageUrl-input','Match\x20ID\x20or\x20ladder\x20missing','data-section','inactive-players-search','notification\x20','Failed\x20to\x20load\x20trophy\x20data','winnerScore','trophy-name','success','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22','quick-edit-points-modal','highlight-submitted-by','submit','Highlight\x20created\x20successfully!','ref','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','Edit\x20Trophy','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','previousElementSibling','error','add','Set\x20default\x20ladder\x20to:','highlight-title-container','quick-add','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','split','ladder','demoLink','createdAt','Modal\x20closed','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','\x20\x20','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','cancel-assign-btn','Error\x20loading\x20user\x20points\x20history:','Found\x20specific\x20role:\x20','.section-header','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','destroy','loading','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','manage-points','#1976d2','Unauthorized:\x20Admin\x20access\x20required','closest','Trophy\x20updated\x20successfully','display','preventDefault','roleColor','highlight-video-preview-container','\x20already\x20exists\x20in\x20','</td></tr>','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','assign-trophy-description','getElementById','eloHistory','award-item-form','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','playersD3','closeResimulateModal','\x20Level\x20','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','replace','contains','apply','No\x20email','then','winnerUsername','Gold','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','from','Found\x20','negative-change','W\x20/\x20','matchLink','d2-next-page','migrate-points-btn','creator','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','warn','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','Load\x20users\x20data\x20clicked','input[name=\x22test-match-ladder\x22]','Create\x20test\x20match\x20form\x20not\x20found','Creator\x20highlight\x20button\x20clicked','Modal\x20background\x20clicked','Error\x20deleting\x20player:','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','change','.edit-trophy-btn','color','Failed\x20to\x20load\x20points\x20data:\x20','userProfiles','backgroundColor','dataset','href','active','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','matchInfo','.delete-trophy-btn','promotedBy','getAttribute','Error\x20deleting\x20highlight:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','#users-table-body\x20tr','size','new-player-elo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','Manage\x20Highlights\x20section\x20initialized','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','asc','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','N/A','NonParticipant','match-count','Modal\x20cancel\x20button\x20clicked','demote-player-btn','non-participants','No\x20position\x20changes\x20needed.','mapPlayed','\x20users','location','push','create-test-match-modal','activity','ribbons-overview-table-body','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','\x27</td>','DOMContentLoaded','test-match-winner-username','info','pendingMatchesD2','\x20not\x20found.','\x20to\x20','manage-levels-ribbons','store-item-select','roleName','approvedMatches','Article\x20created\x20successfully','type','Points\x20modified\x20successfully','Points\x20field\x20initialized\x20for\x20','search-result-item','trim','DB:','D3\x20Players','points-overview-table-body','Error\x20loading\x20points\x20history:','edit-match-winner-demo','resimulate-modal','replaceChild','catch','highlight-achievement-image','player-search','playersD2','Bronze','manage-trophies','manage-ribbons','\x20before\x20match:\x20',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','article-form','Error\x20loading\x20history:','Error\x20initializing\x20points\x20field:','edit-highlight-achievementPlayer-input','RejectedD3','Trophy\x20definition\x20deleted\x20successfully','rejected-count','\x20<span\x20class=\x22user-source\x22>(','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','manage-players','match-type','Loser\x20','resimulateMatch','Setting\x20up\x20Manage\x20Points\x20section','style','Failed\x20to\x20save\x20match:\x20','Match\x20updated\x20successfully','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','Found\x20player\x20with\x20current\x20ELO:\x20','title','Failed\x20to\x20update\x20points:\x20','edit-highlight-id','Using\x20collection:\x20','matches-page-indicator','.edit-highlight-btn','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','Error\x20loading\x20dashboard\x20data:','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','\x20-\x20Feature\x20coming\x20soon','.view-player-btn','empty-state','approvedMatchesD3','edit-match-winner-score',';\x20color:\x20','highlight-match-link-container','submittedBy','getRankName','displayName','Error\x20loading\x20matches:','trace','edit-highlight-title-input','empty','Unknown\x20User','querySelectorAll','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','classList','demote-username','\x20added\x20successfully\x20to\x20','Edit\x20Match:\x20','article-id','load-matches-data','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','demote-form','appendChild','Error\x20searching\x20for\x20user','5px','date','Error\x20awarding\x20item:','edit-match-loser-demo','loserScore','opacity','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','.quick-edit-btn','promotion','User\x20','Defaulted\x20to\x20D1\x20ladder','#elo-history-table-body\x20tr','players','matchId','history-type-filter','You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','assign-trophy-modal','startDate','achievementPlayer','Article\x20deleted\x20successfully','\x20from\x20','highlight-match-date','trophy-description','assign-trophy-name','all','update','target','updatedAt','docs','forEach','#e0e0e0','exception','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','highlight-player-profile','Manage\x20Ribbons\x20section\x20initialized','.close-btn','message','trophy-form','Subtracted\x20','edit-highlight-loserScore-input','approvedMatchesD2','fromDate','Error\x20deleting\x20match:','warning','endDate','userId','remove','input[name=\x22demote-ladder\x22]:checked','reset-matches-filters','achievementDetails','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','click','validation-results-container','Adding\x20player\x20','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','userTrophies','playerProfileUrl','lastPointsModified','Firebase\x20connection\x20test\x20successful!','Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM','loss','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','visible','newElo','.edit-article-btn','rankDistribution','localeCompare','name','No\x20match\x20data\x20found\x20for\x20resimulation'];a4_0x5035=function(){return _0x1eb58e;};return a4_0x5035();}function setupMatchesActionButtons(){const _0x344da4=a4_0x4c4826;console[_0x344da4(0xea)]('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x3fd81f=>{const _0x1a53ba=_0x344da4;_0x3fd81f[_0x1a53ba(0x126)]('click',_0x46a9a1=>{_0x46a9a1['preventDefault'](),_0x46a9a1['stopPropagation']();const _0x36ef32=_0x46a9a1['currentTarget']['dataset']['id'],_0x8a75dd=_0x46a9a1['currentTarget']['closest']('tr'),_0x3e1cad=_0x8a75dd['dataset']['ladder'];console['log']('Edit\x20match\x20clicked:',_0x36ef32,_0x3e1cad),openEditMatchModal(_0x36ef32,_0x3e1cad);});}),document[_0x344da4(0x2ab)]('.delete-match-btn')[_0x344da4(0x2d4)](_0x780153=>{const _0x205780=_0x344da4;_0x780153[_0x205780(0x126)](_0x205780(0x2ea),_0x1d71d7=>{const _0x3f5b27=_0x205780;_0x1d71d7['preventDefault'](),_0x1d71d7['stopPropagation']();const _0xc16f07=_0x1d71d7[_0x3f5b27(0x12a)][_0x3f5b27(0x23d)]['id'],_0x350c88=_0x1d71d7[_0x3f5b27(0x12a)]['closest']('tr'),_0xed0fd5=_0x350c88['dataset'][_0x3f5b27(0x1f9)]||currentLadder;console['log']('Delete\x20match\x20clicked:',_0xc16f07,_0xed0fd5),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0xc16f07,_0xed0fd5);});}),console[_0x344da4(0xea)]('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x59ceb0=a4_0x4c4826,_0x11e538=document[_0x59ceb0(0x215)](_0x59ceb0(0x19e))['value']['toLowerCase'](),_0x5eceba=document['querySelectorAll']('#matches-table-body\x20tr');let _0x2777ae=0x0;_0x5eceba['forEach'](_0x5164e4=>{const _0x5daea7=_0x59ceb0;if(_0x5164e4['classList'][_0x5daea7(0x21e)]('loading-cell')||_0x5164e4[_0x5daea7(0x2ad)]['contains'](_0x5daea7(0x29e))||_0x5164e4['classList']['contains']('error-state'))return;const _0x3a0175=_0x5164e4['cells'][0x1][_0x5daea7(0x18b)][_0x5daea7(0x17c)](),_0x1f2e25=_0x5164e4['cells'][0x2]['textContent']['toLowerCase'](),_0x1e0f63=_0x5164e4['cells'][0x4]['textContent'][_0x5daea7(0x17c)]();_0x3a0175['includes'](_0x11e538)||_0x1f2e25['includes'](_0x11e538)||_0x1e0f63['includes'](_0x11e538)?(_0x5164e4[_0x5daea7(0x28d)]['display']='',_0x2777ae++):_0x5164e4['style']['display']=_0x5daea7(0x1a3);});if(_0x2777ae===0x0&&_0x5eceba['length']>0x0){const _0x2e0651=document['getElementById']('matches-table-body'),_0x3eda7a=_0x2e0651['querySelector'](_0x59ceb0(0xf6));if(!_0x3eda7a){const _0x58437e=document['createElement']('tr');_0x58437e['className']='no-results',_0x58437e['innerHTML']=_0x59ceb0(0x182)+_0x11e538+_0x59ceb0(0x25e),_0x2e0651[_0x59ceb0(0x2b5)](_0x58437e);}}else{const _0x5f40d7=document['querySelector']('.no-results');_0x5f40d7&&_0x5f40d7['remove']();}}function getMatchesFilters(){const _0x55c758=a4_0x4c4826,_0x3545a6=document['getElementById']('matches-search')[_0x55c758(0x12d)]['toLowerCase'](),_0x148c5a=document['getElementById']('matches-start-date')['value'],_0x248a31=document[_0x55c758(0x215)](_0x55c758(0xef))['value'];let _0x2e9e0a=null,_0x13e656=null;return _0x148c5a&&(_0x2e9e0a=new Date(_0x148c5a),_0x2e9e0a[_0x55c758(0x1b2)](0x0,0x0,0x0,0x0),_0x2e9e0a=Timestamp['fromDate'](_0x2e9e0a)),_0x248a31&&(_0x13e656=new Date(_0x248a31),_0x13e656['setHours'](0x17,0x3b,0x3b,0x3e7),_0x13e656=Timestamp['fromDate'](_0x13e656)),{'searchTerm':_0x3545a6,'startDate':_0x2e9e0a,'endDate':_0x13e656};}async function applyMatchesFilters(){const _0x51bb6f=a4_0x4c4826,_0x3590e8=currentLadder[_0x51bb6f(0x17c)]();matchesPagination[_0x3590e8]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x165689=a4_0x4c4826;document[_0x165689(0x215)](_0x165689(0x108))['value']='',document['getElementById'](_0x165689(0xef))['value']='',document['getElementById'](_0x165689(0x19e))['value']='';const _0x409f6e=currentLadder['toLowerCase']();matchesPagination[_0x409f6e]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x4154ac,_0x3460c9){const _0x402a2f=a4_0x4c4826,_0x11a69b=document[_0x402a2f(0x215)]('edit-match-modal');if(!_0x11a69b)return;try{const _0x15bbe0=_0x3460c9==='D1'?'approvedMatches':_0x3460c9==='D2'?_0x402a2f(0x2df):_0x402a2f(0x29f),_0x537a15=doc(db,_0x15bbe0,_0x4154ac),_0x29b48b=await getDoc(_0x537a15);if(!_0x29b48b['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x21b76b=_0x29b48b[_0x402a2f(0x195)]();document[_0x402a2f(0x215)](_0x402a2f(0x116))['value']=_0x4154ac,document['getElementById']('edit-match-ladder')['value']=_0x3460c9,document['getElementById']('edit-match-winner')['value']=_0x21b76b[_0x402a2f(0x222)]||'',document['getElementById'](_0x402a2f(0x2a0))[_0x402a2f(0x12d)]=_0x21b76b['winnerScore']||0x0,document[_0x402a2f(0x215)](_0x402a2f(0x1bd))[_0x402a2f(0x12d)]=_0x21b76b['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x21b76b['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x21b76b[_0x402a2f(0xc6)]||'',document[_0x402a2f(0x215)]('edit-match-loser-score')['value']=_0x21b76b['loserScore']||0x0,document['getElementById']('edit-match-loser-suicides')[_0x402a2f(0x12d)]=_0x21b76b['loserSuicides']||0x0,document[_0x402a2f(0x215)]('edit-match-loser-comment')['value']=_0x21b76b[_0x402a2f(0x1a8)]||'',document['getElementById']('edit-match-map')['value']=_0x21b76b[_0x402a2f(0x256)]||'',document['getElementById'](_0x402a2f(0x273))['value']=_0x21b76b['winnerDemoLink']||'',document['getElementById'](_0x402a2f(0x2ba))[_0x402a2f(0x12d)]=_0x21b76b['loserDemoLink']||_0x21b76b[_0x402a2f(0x1fa)]||'',document[_0x402a2f(0x215)]('edit-match-title')['textContent']=_0x402a2f(0x2b0)+_0x21b76b['winnerUsername']+_0x402a2f(0x168)+_0x21b76b['loserUsername'],_0x11a69b[_0x402a2f(0x2ad)]['add'](_0x402a2f(0x23f));}catch(_0x3e38f7){console[_0x402a2f(0x1f2)]('Error\x20loading\x20match\x20data:',_0x3e38f7),showNotification('Failed\x20to\x20load\x20match\x20data',_0x402a2f(0x1f2));}}function closeEditMatchModal(){const _0x49e95f=a4_0x4c4826,_0x2b696e=document['getElementById']('edit-match-modal');_0x2b696e&&_0x2b696e['classList']['remove'](_0x49e95f(0x23f));}async function saveEditedMatch(){const _0x550473=a4_0x4c4826;try{const _0x421a76=document[_0x550473(0x215)](_0x550473(0x116))['value'],_0x1360b8=document['getElementById'](_0x550473(0x187))['value'];if(!_0x421a76||!_0x1360b8){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x5ecb64=_0x1360b8==='D1'?'approvedMatches':_0x1360b8==='D2'?_0x550473(0x2df):'approvedMatchesD3',_0x11f6a3=document[_0x550473(0x215)]('edit-match-winner')[_0x550473(0x12d)]['trim'](),_0x41974f=parseInt(document['getElementById'](_0x550473(0x2a0))['value']),_0x4dfcec=parseInt(document[_0x550473(0x215)](_0x550473(0x1bd))['value']),_0x498560=document['getElementById']('edit-match-winner-comment')['value']['trim'](),_0x2d2176=document['getElementById']('edit-match-loser')['value']['trim'](),_0x13f401=parseInt(document['getElementById']('edit-match-loser-score')[_0x550473(0x12d)]),_0x58dd7f=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x218a2e=document['getElementById']('edit-match-loser-comment')['value']['trim'](),_0x49d765=document['getElementById']('edit-match-map')['value']['trim'](),_0x3d79a4=document['getElementById']('edit-match-winner-demo')[_0x550473(0x12d)][_0x550473(0x26e)](),_0x31729c=document[_0x550473(0x215)]('edit-match-loser-demo')['value'][_0x550473(0x26e)]();if(!_0x11f6a3||!_0x2d2176){showNotification(_0x550473(0x10c),'error');return;}await updateDoc(doc(db,_0x5ecb64,_0x421a76),{'winnerUsername':_0x11f6a3,'winnerScore':_0x41974f,'winnerSuicides':_0x4dfcec,'winnerComment':_0x498560,'loserUsername':_0x2d2176,'loserScore':_0x13f401,'loserSuicides':_0x58dd7f,'loserComment':_0x218a2e,'mapPlayed':_0x49d765,'winnerDemoLink':_0x3d79a4||null,'loserDemoLink':_0x31729c||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x550473(0xff)]['email'],'isEdited':!![]}),showNotification(_0x550473(0x28f),'success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x1360b8['toLowerCase']()]['page']);}catch(_0xe39c46){console['error']('Error\x20saving\x20match:',_0xe39c46),showNotification(_0x550473(0x28e)+_0xe39c46['message'],_0x550473(0x1f2));}}async function openDeleteMatchModal(_0x155962,_0x47889d){const _0x2af4b0=a4_0x4c4826;try{const _0x358f99=_0x47889d==='D1'?'approvedMatches':_0x47889d==='D2'?'approvedMatchesD2':_0x2af4b0(0x29f),_0x31a8bc=doc(db,_0x358f99,_0x155962),_0x412884=await getDoc(_0x31a8bc);if(!_0x412884[_0x2af4b0(0x11c)]()){showNotification('Match\x20not\x20found',_0x2af4b0(0x1f2));return;}const _0x1fc25c=_0x412884['data'](),_0x44f0a2=document['getElementById']('delete-match-confirm-modal');_0x44f0a2[_0x2af4b0(0x23d)]['matchId']=_0x155962,_0x44f0a2['dataset'][_0x2af4b0(0x1f9)]=_0x47889d;const _0x240ef0=_0x1fc25c[_0x2af4b0(0x148)]?new Date(_0x1fc25c['approvedAt'][_0x2af4b0(0x128)]*0x3e8)['toLocaleDateString']():'N/A',_0x543315=document['getElementById'](_0x2af4b0(0xb4));_0x543315['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x240ef0+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x1fc25c['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x1fc25c['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x1fc25c[_0x2af4b0(0x1e2)]||0x0)+'\x20-\x20'+(_0x1fc25c['loserScore']||0x0)+_0x2af4b0(0x2ac)+(_0x1fc25c[_0x2af4b0(0x256)]||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x47889d+_0x2af4b0(0x13e),_0x44f0a2['classList']['add'](_0x2af4b0(0x23f));}catch(_0x1fe711){console[_0x2af4b0(0x1f2)]('Error\x20loading\x20match\x20for\x20deletion:',_0x1fe711),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x55a188=a4_0x4c4826,_0x2518ed=document[_0x55a188(0x215)]('delete-match-confirm-modal');_0x2518ed&&(_0x2518ed['classList']['remove']('active'),_0x2518ed[_0x55a188(0x15e)](_0x55a188(0xfd)),_0x2518ed['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x373e93=a4_0x4c4826,_0x1b4f1f=document['getElementById']('delete-match-confirm-modal'),_0x35a2b9=_0x1b4f1f['dataset'][_0x373e93(0x2c4)],_0x409e83=_0x1b4f1f['dataset'][_0x373e93(0x1f9)];if(!_0x35a2b9||!_0x409e83){showNotification(_0x373e93(0x1dd),_0x373e93(0x1f2)),closeDeleteMatchModal();return;}try{const _0x30b22f=_0x409e83==='D1'?'approvedMatches':_0x409e83==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x30b22f,_0x35a2b9)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x409e83['toLowerCase']()]['page']);}catch(_0x3bd178){console['error']('Error\x20deleting\x20match:',_0x3bd178),showNotification(_0x373e93(0x1b4)+_0x3bd178[_0x373e93(0x2db)],_0x373e93(0x1f2));}}async function saveHighlightChanges(){const _0x3c0776=a4_0x4c4826,_0x48ef56=document['getElementById'](_0x3c0776(0x294))['value'],_0x30efdb=document['getElementById']('edit-highlight-type-select')['value'];let _0x2f5a99={'title':document[_0x3c0776(0x215)](_0x3c0776(0x2a8))['value']['trim'](),'type':_0x30efdb,'description':document['getElementById']('edit-highlight-description-input')['value'][_0x3c0776(0x26e)](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value'][_0x3c0776(0x26e)](),'submittedBy':auth['currentUser'][_0x3c0776(0xf4)]};if(_0x30efdb==='match'){_0x2f5a99[_0x3c0776(0x241)]=document['getElementById'](_0x3c0776(0x196))['value'][_0x3c0776(0x26e)](),_0x2f5a99['map']=document['getElementById']('edit-highlight-map-input')['value']['trim']();const _0x6d8433=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x2f5a99['matchDate']=_0x6d8433?Timestamp['fromDate'](new Date(_0x6d8433)):null,_0x2f5a99[_0x3c0776(0xcb)]=document[_0x3c0776(0x215)]('edit-highlight-winnerName-input')['value']['trim'](),_0x2f5a99[_0x3c0776(0x1e2)]=document[_0x3c0776(0x215)]('edit-highlight-winnerScore-input')['value'][_0x3c0776(0x26e)](),_0x2f5a99['loserName']=document[_0x3c0776(0x215)]('edit-highlight-loserName-input')['value']['trim'](),_0x2f5a99[_0x3c0776(0x2bb)]=document['getElementById'](_0x3c0776(0x2de))['value'][_0x3c0776(0x26e)](),_0x2f5a99[_0x3c0776(0x229)]=document['getElementById']('edit-highlight-matchLink-input')['value'][_0x3c0776(0x26e)](),_0x2f5a99[_0x3c0776(0x16b)]=null,_0x2f5a99[_0x3c0776(0xbf)]=null,_0x2f5a99['creatorImageUrl']=null,_0x2f5a99[_0x3c0776(0x2c9)]=null,_0x2f5a99['achievementType']=null,_0x2f5a99[_0x3c0776(0x2e8)]=null,_0x2f5a99['playerProfileUrl']=null;}else{if(_0x30efdb==='creator')_0x2f5a99['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x2f5a99['mapCreator']=document['getElementById'](_0x3c0776(0xe4))['value']['trim'](),_0x2f5a99['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value'][_0x3c0776(0x26e)](),_0x2f5a99['creatorImageUrl']=document['getElementById'](_0x3c0776(0x1dc))[_0x3c0776(0x12d)]['trim'](),_0x2f5a99['matchInfo']=null,_0x2f5a99[_0x3c0776(0x13b)]=null,_0x2f5a99['winnerName']=null,_0x2f5a99['winnerScore']=null,_0x2f5a99[_0x3c0776(0x15f)]=null,_0x2f5a99['loserScore']=null,_0x2f5a99[_0x3c0776(0x229)]=null,_0x2f5a99['achievementPlayer']=null,_0x2f5a99['achievementType']=null,_0x2f5a99['achievementDetails']=null,_0x2f5a99['playerProfileUrl']=null;else _0x30efdb==='achievement'&&(_0x2f5a99['achievementPlayer']=document[_0x3c0776(0x215)](_0x3c0776(0x282))['value'][_0x3c0776(0x26e)](),_0x2f5a99[_0x3c0776(0x194)]=document['getElementById']('edit-highlight-achievementType-input')['value']['trim'](),_0x2f5a99['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')[_0x3c0776(0x12d)][_0x3c0776(0x26e)](),_0x2f5a99[_0x3c0776(0x2f0)]=document[_0x3c0776(0x215)]('edit-highlight-playerProfileUrl-input')['value'][_0x3c0776(0x26e)](),_0x2f5a99[_0x3c0776(0x241)]=null,_0x2f5a99['map']=null,_0x2f5a99['matchDate']=null,_0x2f5a99['winnerName']=null,_0x2f5a99['winnerScore']=null,_0x2f5a99[_0x3c0776(0x15f)]=null,_0x2f5a99[_0x3c0776(0x2bb)]=null,_0x2f5a99[_0x3c0776(0x229)]=null,_0x2f5a99['mapCreator']=null,_0x2f5a99[_0x3c0776(0xbf)]=null,_0x2f5a99['creatorImageUrl']=null);}try{if(_0x48ef56){_0x2f5a99['updatedAt']=serverTimestamp();const _0x343755=doc(db,'highlights',_0x48ef56);await updateDoc(_0x343755,_0x2f5a99),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x2f5a99[_0x3c0776(0x1fb)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x2f5a99),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x24e63b){console['error']('Error\x20saving\x20highlight:',_0x24e63b),showNotification('Error\x20saving\x20highlight:\x20'+_0x24e63b['message'],_0x3c0776(0x1f2));}}async function resimulateMatch(){const _0x3450ec=a4_0x4c4826;try{const _0x31b539=document[_0x3450ec(0x215)]('resimulate-match-id')['value'];if(!_0x31b539){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x2d35a1=auth['currentUser'];if(!_0x2d35a1){showNotification(_0x3450ec(0x21c),'error');return;}const _0x20949e=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x3450ec(0x29f),_0x8aca4c=doc(db,_0x20949e,_0x31b539),_0xfd949c=await getDoc(_0x8aca4c);if(!_0xfd949c['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x3450ec(0x1f2));return;}const _0x5613ee=_0xfd949c['data'](),_0x4f8a11=_0x5613ee['approvedAt']?_0x5613ee['approvedAt']['toDate']()['toLocaleString']():_0x5613ee[_0x3450ec(0x13b)]?_0x5613ee['matchDate']['toDate']?_0x5613ee['matchDate']['toDate']()[_0x3450ec(0xf8)]():new Date(_0x5613ee[_0x3450ec(0x13b)])['toLocaleString']():_0x3450ec(0x1a9),_0x39ff42=_0x3450ec(0x101)+_0x5613ee[_0x3450ec(0x222)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x5613ee['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x5613ee[_0x3450ec(0x1e2)]+'-'+_0x5613ee['loserScore']+_0x3450ec(0x1eb)+(_0x5613ee['mapPlayed']||_0x5613ee['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x4f8a11+_0x3450ec(0x1ef)+_0x31b539+_0x3450ec(0x1b7)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x3450ec(0x215)]('match-details-container')['innerHTML']=_0x39ff42,document['getElementById']('match-details-container')['style']['display']='block',document['getElementById'](_0x3450ec(0x1a6))['style']['display']='block',window['pendingResimulateData']={'matchId':_0x31b539,'matchData':_0x5613ee,'ladder':currentLadder},showNotification(_0x3450ec(0x165),'info');}catch(_0x5d97c5){console['error']('Error\x20finding\x20match:',_0x5d97c5),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x5d97c5['message'],'error');}}async function confirmResimulateMatch(){const _0x466b95=a4_0x4c4826;try{const {matchId:_0x37f594,matchData:_0x49bcc7,ladder:_0x5c6125}=window['pendingResimulateData'];if(!_0x37f594||!_0x49bcc7){showNotification(_0x466b95(0x2fc),'error');return;}const _0x4d839f=_0x5c6125==='D1'?'players':_0x5c6125==='D2'?'playersD2':'playersD3',_0x37db28=_0x5c6125==='D1'?'eloHistory':_0x5c6125==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x2e5442,_0x14b4dd]=await Promise[_0x466b95(0x2cf)]([getDocs(query(collection(db,_0x4d839f),where('username','==',_0x49bcc7[_0x466b95(0x222)]))),getDocs(query(collection(db,_0x4d839f),where('username','==',_0x49bcc7['loserUsername'])))]);if(_0x2e5442['empty']||_0x14b4dd['empty']){showNotification('Could\x20not\x20find\x20player\x20documents',_0x466b95(0x1f2));return;}const _0x431316=_0x2e5442['docs'][0x0]['id'],_0x553738=_0x14b4dd['docs'][0x0]['id'],_0xf17ed4=_0x2e5442['docs'][0x0]['data'](),_0x165160=_0x14b4dd['docs'][0x0]['data'](),[_0x26d8ef,_0x323f67]=await Promise[_0x466b95(0x2cf)]([getDocs(query(collection(db,_0x37db28),where('playerId','==',_0x431316),where(_0x466b95(0x2c4),'==',_0x37f594))),getDocs(query(collection(db,_0x37db28),where('playerId','==',_0x553738),where('matchId','==',_0x37f594)))]),_0x2b9f59=!_0x26d8ef[_0x466b95(0x2a9)],_0x1b463e=!_0x323f67[_0x466b95(0x2a9)],_0x2ea503=_0x466b95(0x246)+(_0x2b9f59?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x1b463e?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0xf17ed4[_0x466b95(0x150)]||_0x466b95(0x1a9))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x165160['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0xf17ed4[_0x466b95(0x178)]||'Unknown')+_0x466b95(0x287)+(_0x165160['position']||_0x466b95(0x1a9))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')[_0x466b95(0x1a1)]=_0x2ea503,document['getElementById'](_0x466b95(0x2eb))['style'][_0x466b95(0x20d)]='block';if(_0x2b9f59&&_0x1b463e){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x5c26bb=_0x49bcc7['approvedAt']||_0x49bcc7['matchDate']||serverTimestamp(),[_0x29af86,_0x4ba4cc]=await Promise['all']([getPlayerEloAtTime(_0x431316,_0x5c26bb,_0x37db28),getPlayerEloAtTime(_0x553738,_0x5c26bb,_0x37db28)]),{calculateElo:_0x298de4}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x19cf15,newLoserRating:_0x4133c6}=_0x298de4(_0x29af86,_0x4ba4cc),_0x229bc8=_0xf17ed4['position']||Number['MAX_SAFE_INTEGER'],_0x3c0ce7=_0x165160['position']||Number[_0x466b95(0x12f)];let _0x33c11b=_0x229bc8,_0x343a26=_0x3c0ce7;_0x229bc8>_0x3c0ce7&&(_0x33c11b=_0x3c0ce7,_0x343a26=_0x3c0ce7+0x1);const _0x2f2c22=writeBatch(db),_0x38ba4f=doc(db,_0x4d839f,_0x431316);_0x2f2c22['update'](_0x38ba4f,{'eloRating':_0x19cf15,'position':_0x33c11b,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x244ce2=doc(db,_0x4d839f,_0x553738);_0x2f2c22['update'](_0x244ce2,{'eloRating':_0x4133c6,'position':_0x343a26,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x229bc8>_0x3c0ce7){const _0xf2e5e6=await getDocs(query(collection(db,_0x4d839f),where(_0x466b95(0x178),'>',_0x3c0ce7),where(_0x466b95(0x178),'<',_0x229bc8)));_0xf2e5e6['forEach'](_0x4e4416=>{const _0xbdfbce=doc(db,_0x4d839f,_0x4e4416['id']),_0x459e8f=_0x4e4416['data']()['position'];_0x2f2c22['update'](_0xbdfbce,{'position':_0x459e8f+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x2b9f59){const _0x26d331=doc(collection(db,_0x37db28));_0x2f2c22['set'](_0x26d331,{'playerId':_0x431316,'player':_0x49bcc7[_0x466b95(0x222)],'previousElo':_0x29af86,'newElo':_0x19cf15,'eloChange':_0x19cf15-_0x29af86,'opponentId':_0x553738,'opponent':_0x49bcc7[_0x466b95(0xc6)],'matchResult':'win','previousPosition':_0x229bc8,'newPosition':_0x33c11b,'positionChange':_0x33c11b-_0x229bc8,'matchId':_0x37f594,'timestamp':_0x5c26bb,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x5c6125,'matchScore':_0x49bcc7['winnerScore']+'-'+_0x49bcc7[_0x466b95(0x2bb)],'mapPlayed':_0x49bcc7[_0x466b95(0x256)]||_0x49bcc7[_0x466b95(0x104)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x1b463e){const _0x74640=doc(collection(db,_0x37db28));_0x2f2c22[_0x466b95(0xbc)](_0x74640,{'playerId':_0x553738,'player':_0x49bcc7[_0x466b95(0xc6)],'previousElo':_0x4ba4cc,'newElo':_0x4133c6,'eloChange':_0x4133c6-_0x4ba4cc,'opponentId':_0x431316,'opponent':_0x49bcc7[_0x466b95(0x222)],'matchResult':_0x466b95(0x2f4),'previousPosition':_0x3c0ce7,'newPosition':_0x343a26,'positionChange':_0x343a26-_0x3c0ce7,'matchId':_0x37f594,'timestamp':_0x5c26bb,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x466b95(0xff)][_0x466b95(0xc9)],'gameMode':_0x5c6125,'matchScore':_0x49bcc7['winnerScore']+'-'+_0x49bcc7[_0x466b95(0x2bb)],'mapPlayed':_0x49bcc7[_0x466b95(0x256)]||_0x49bcc7['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x50fa24=_0x5c6125==='D1'?'approvedMatches':_0x5c6125==='D2'?'approvedMatchesD2':_0x466b95(0x29f),_0x35021d=doc(db,_0x50fa24,_0x37f594);_0x2f2c22['update'](_0x35021d,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x466b95(0xff)]['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0xf17ed4[_0x466b95(0x150)],'originalLoserElo':_0x165160['eloRating'],'originalWinnerPosition':_0x229bc8,'originalLoserPosition':_0x3c0ce7,'resimulatedWinnerElo':_0x19cf15,'resimulatedLoserElo':_0x4133c6,'resimulatedWinnerPosition':_0x33c11b,'resimulatedLoserPosition':_0x343a26}),await _0x2f2c22['commit']();const _0xcb24ca=(!_0x2b9f59?0x1:0x0)+(!_0x1b463e?0x1:0x0),_0x40cb2f=_0x229bc8!==_0x33c11b||_0x3c0ce7!==_0x343a26;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0xcb24ca+_0x466b95(0x1db))+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x29af86+''+_0x19cf15+'\x20(+'+(_0x19cf15-_0x29af86)+'),\x20')+(_0x466b95(0x28a)+_0x4ba4cc+''+_0x4133c6+'\x20('+(_0x4133c6-_0x4ba4cc)+').\x20')+(''+(_0x40cb2f?_0x466b95(0x19a)+_0x229bc8+''+_0x33c11b+',\x20Loser\x20'+_0x3c0ce7+''+_0x343a26:_0x466b95(0x255))),'success'),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x2b1ae5){console['error']('Error\x20resimulating\x20match:',_0x2b1ae5),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x2b1ae5[_0x466b95(0x2db)],_0x466b95(0x1f2));}}async function getPlayerEloAtTime(_0x4d4a7e,_0x568f5a,_0x27574){const _0xe80564=a4_0x4c4826;try{const _0x1ecd29=_0x568f5a['toDate']?_0x568f5a['toDate']():new Date(_0x568f5a),_0x297596=query(collection(db,_0x27574),where('playerId','==',_0x4d4a7e),where('timestamp','<',_0x568f5a),orderBy(_0xe80564(0x15c),'desc'),limit(0x1)),_0x19fe1b=await getDocs(_0x297596);if(!_0x19fe1b['empty']){const _0x4508cf=_0x19fe1b['docs'][0x0][_0xe80564(0x195)]();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x4d4a7e+_0xe80564(0x27d)+_0x4508cf[_0xe80564(0x2f7)]),_0x4508cf['newElo'];}else return console['log'](_0xe80564(0xcf)+_0x4d4a7e+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x423a39){return console[_0xe80564(0x1f2)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x4d4a7e+':',_0x423a39),0x4b0;}}function openResimulateModal(){const _0x587017=a4_0x4c4826;console['log']('openResimulateModal\x20called!');const _0x573971=document['getElementById'](_0x587017(0x274));console[_0x587017(0xea)]('Modal\x20element\x20found:',_0x573971);if(!_0x573971){console['error'](_0x587017(0x138));return;}_0x573971['style'][_0x587017(0x20d)]='block',_0x573971[_0x587017(0x28d)]['visibility']=_0x587017(0x2f6),_0x573971[_0x587017(0x28d)]['opacity']='1',_0x573971['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console[_0x587017(0xea)](_0x587017(0xb9),window['getComputedStyle'](_0x573971)[_0x587017(0x20d)]);const _0x1f7d02=document[_0x587017(0x215)]('match-details-container'),_0x589c65=document[_0x587017(0x215)]('validation-results-container'),_0x33e9f3=document[_0x587017(0x215)]('confirm-resimulate-btn'),_0x38bcb5=document['getElementById']('resimulate-match-id');if(_0x1f7d02)_0x1f7d02['innerHTML']='';if(_0x589c65)_0x589c65['innerHTML']='';if(_0x33e9f3)_0x33e9f3[_0x587017(0x28d)]['display']='none';if(_0x38bcb5)_0x38bcb5['value']='';console['log'](_0x587017(0xf1));}function closeResimulateModal(){const _0x4dce2c=a4_0x4c4826;document[_0x4dce2c(0x215)](_0x4dce2c(0x274))['style']['display']='none',window['pendingResimulateData']=null;}window[a4_0x4c4826(0x28b)]=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a4_0x4c4826(0x21a)]=closeResimulateModal;async function loadPointsData(){const _0x1bcaff=a4_0x4c4826;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x142fcd){console['error']('Error\x20loading\x20points\x20data:',_0x142fcd),showNotification(_0x1bcaff(0x23a)+_0x142fcd['message'],'error');}}function renderPointsOverview(_0x5d7729){const _0xda7a35=a4_0x4c4826,_0x30d74a=document['getElementById']('points-overview-table-body');if(!_0x30d74a)return;if(_0x5d7729[_0xda7a35(0x144)]===0x0){_0x30d74a[_0xda7a35(0x1a1)]=_0xda7a35(0x22f);return;}_0x30d74a[_0xda7a35(0x1a1)]='',_0x5d7729['forEach'](_0x52e300=>{const _0x13226a=_0xda7a35,_0x4ec61c=document['createElement']('tr'),_0x1ba959=_0x52e300['displayName']||_0x52e300['username']||_0x13226a(0x2aa),_0x3ee027=_0x52e300[_0x13226a(0xf4)]||_0x13226a(0x220),_0x13847a=_0x52e300['points']||0x0,_0x206fe6=_0x52e300[_0x13226a(0x2f1)]?new Date(_0x52e300['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():_0x13226a(0x1b6);_0x4ec61c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x1ba959+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ee027+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x13847a>0x3e8?'high-points':_0x13847a>0x1f4?'medium-points':'low-points')+_0x13226a(0xdd)+_0x13847a['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x206fe6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x52e300['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x52e300['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x30d74a['appendChild'](_0x4ec61c);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0xc643f5=a4_0x4c4826;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x925ef=document['querySelectorAll'](_0xc643f5(0x2be));console[_0xc643f5(0xea)]('Found\x20'+_0x925ef['length']+_0xc643f5(0x16a)),_0x925ef['forEach'](_0x2eb85d=>{const _0x27cfff=_0xc643f5,_0x307f0e=_0x2eb85d[_0x27cfff(0x1c5)](!![]);_0x2eb85d['parentNode']['replaceChild'](_0x307f0e,_0x2eb85d);});const _0x2e9411=document['querySelectorAll']('.view-history-btn');console['log'](_0xc643f5(0x226)+_0x2e9411['length']+'\x20view\x20history\x20buttons'),_0x2e9411[_0xc643f5(0x2d4)](_0x44b0d4=>{const _0xc400a8=_0xc643f5,_0x1f4437=_0x44b0d4[_0xc400a8(0x1c5)](!![]);_0x44b0d4[_0xc400a8(0xb0)]['replaceChild'](_0x1f4437,_0x44b0d4);}),document[_0xc643f5(0x2ab)]('.quick-edit-btn')['forEach'](_0x5b84cc=>{const _0x156819=_0xc643f5;_0x5b84cc[_0x156819(0x126)]('click',function(_0x408d94){const _0x58401d=_0x156819;_0x408d94['preventDefault'](),_0x408d94[_0x58401d(0x1b3)]();const _0x33094f=this['dataset'][_0x58401d(0x2e4)];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x33094f);if(!_0x33094f){console['error'](_0x58401d(0x18e));return;}this[_0x58401d(0x28d)]['opacity']=_0x58401d(0xd3),setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x33094f);});}),document['querySelectorAll'](_0xc643f5(0x111))[_0xc643f5(0x2d4)](_0x22abf5=>{const _0x13dc6b=_0xc643f5;_0x22abf5['addEventListener'](_0x13dc6b(0x2ea),function(_0x3fb5ed){const _0x5b886d=_0x13dc6b;_0x3fb5ed['preventDefault'](),_0x3fb5ed['stopPropagation']();const _0x4eb451=this[_0x5b886d(0x23d)][_0x5b886d(0x2e4)];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x4eb451);if(!_0x4eb451){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{const _0x466977=_0x5b886d;this[_0x466977(0x28d)][_0x466977(0x2bc)]='1';},0xc8),loadUserPointsHistory(_0x4eb451);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x448c99){const _0x3a0982=a4_0x4c4826;console[_0x3a0982(0xea)](_0x3a0982(0x17f),_0x448c99);const _0x1d3593=document[_0x3a0982(0x215)](_0x3a0982(0x1e6));if(!_0x1d3593){console['error'](_0x3a0982(0x2d7)),showNotification(_0x3a0982(0xbd),_0x3a0982(0x1f2));return;}try{showNotification(_0x3a0982(0xca),'info');const _0x1a483e=doc(db,'userProfiles',_0x448c99),_0x389e36=await getDoc(_0x1a483e);if(!_0x389e36['exists']()){showNotification('User\x20not\x20found','error');return;}const _0xabc8e=_0x389e36['data']();console['log']('User\x20data\x20loaded:',_0xabc8e);const _0x46b2c9=document[_0x3a0982(0x215)]('quick-edit-user-id'),_0x9d8cdb=document['getElementById'](_0x3a0982(0x11a)),_0x10bcaf=document[_0x3a0982(0x215)]('quick-edit-email'),_0x311053=document['getElementById']('quick-edit-current-points'),_0x45bf56=document[_0x3a0982(0x215)]('quick-edit-points-form');if(!_0x46b2c9||!_0x9d8cdb||!_0x10bcaf||!_0x311053||!_0x45bf56){console['error'](_0x3a0982(0x2ed)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x46b2c9['value']=_0x448c99,_0x9d8cdb['textContent']=_0xabc8e[_0x3a0982(0x2a5)]||_0xabc8e['username']||'Unknown\x20User',_0x10bcaf[_0x3a0982(0x18b)]=_0xabc8e[_0x3a0982(0xf4)]||'No\x20email',_0x311053['textContent']=(_0xabc8e['points']||0x0)['toLocaleString'](),_0x45bf56[_0x3a0982(0x10a)]();const _0x2fdc19=document['getElementById'](_0x3a0982(0x1f6));_0x2fdc19&&(_0x2fdc19['checked']=!![]);_0x1d3593[_0x3a0982(0x2ad)]['add'](_0x3a0982(0x23f)),console['log']('Modal\x20opened\x20successfully');const _0x36f1cf=document['getElementById']('quick-points-amount');_0x36f1cf&&setTimeout(()=>_0x36f1cf['focus'](),0x64);}catch(_0x5424a7){console[_0x3a0982(0x1f2)](_0x3a0982(0x105),_0x5424a7),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x5424a7[_0x3a0982(0x2db)],'error');}}function closeQuickEditModal(){const _0x178d01=a4_0x4c4826,_0x2907e1=document['getElementById'](_0x178d01(0x1e6));_0x2907e1&&_0x2907e1['classList']['remove'](_0x178d01(0x23f));}async function handleQuickEditPoints(_0x4d591e){const _0x11c0cf=a4_0x4c4826;_0x4d591e[_0x11c0cf(0x20e)]();const _0x59d1a0=document[_0x11c0cf(0x215)]('quick-edit-user-id')['value'],_0x890499=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0xa0ce13=parseInt(document['getElementById']('quick-points-amount')['value']),_0x276288=document['getElementById']('quick-points-reason')['value']['trim']();console[_0x11c0cf(0xea)](_0x11c0cf(0xf3),{'userId':_0x59d1a0,'action':_0x890499,'amount':_0xa0ce13,'reason':_0x276288});if(!_0x59d1a0||!_0xa0ce13||_0xa0ce13<0x0){showNotification('Please\x20enter\x20valid\x20data',_0x11c0cf(0x1f2));return;}try{await modifyUserPoints(_0x59d1a0,_0x890499,_0xa0ce13,_0x276288),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully',_0x11c0cf(0x1e4)),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x59d1a0);}catch(_0x93ba59){console['error']('Error\x20updating\x20points:',_0x93ba59),showNotification(_0x11c0cf(0x293)+_0x93ba59[_0x11c0cf(0x2db)],'error');}}async function searchUsersForPoints(){const _0x5246ce=a4_0x4c4826,_0x28ae9e=document[_0x5246ce(0x215)](_0x5246ce(0x18a))['value']['trim']()['toLowerCase'](),_0x37e746=document[_0x5246ce(0x215)]('user-search-results');if(!_0x28ae9e||_0x28ae9e['length']<0x2){_0x37e746['innerHTML']='';return;}_0x37e746['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x13e530=collection(db,'userProfiles'),_0x280a50=await getDocs(_0x13e530),_0x5ee702=[];_0x280a50[_0x5246ce(0x2d4)](_0xe15ce5=>{const _0x2d0bf8=_0x5246ce,_0x3cc9fb=_0xe15ce5[_0x2d0bf8(0x195)](),_0x1a93b7=(_0x3cc9fb['displayName']||_0x3cc9fb[_0x2d0bf8(0xb3)]||'')['toLowerCase'](),_0x4e5998=(_0x3cc9fb[_0x2d0bf8(0xf4)]||'')['toLowerCase']();(_0x1a93b7['includes'](_0x28ae9e)||_0x4e5998['includes'](_0x28ae9e))&&_0x5ee702['push']({'id':_0xe15ce5['id'],..._0x3cc9fb});});if(_0x5ee702['length']===0x0){_0x37e746['innerHTML']=_0x5246ce(0x1c6);return;}_0x37e746[_0x5246ce(0x1a1)]='',_0x5ee702[_0x5246ce(0x2d4)](_0x1fb8dc=>{const _0x5972e8=_0x5246ce,_0x34c13b=document[_0x5972e8(0x12c)]('div');_0x34c13b['className']=_0x5972e8(0x26d),_0x34c13b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x1fb8dc[_0x5972e8(0x2a5)]||_0x1fb8dc['username']||_0x5972e8(0x1a9))+_0x5972e8(0x207)+(_0x1fb8dc['email']||'No\x20email')+_0x5972e8(0x290)+(_0x1fb8dc['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x34c13b['addEventListener'](_0x5972e8(0x2ea),()=>selectUserForPoints(_0x1fb8dc)),_0x37e746[_0x5972e8(0x2b5)](_0x34c13b);});}catch(_0x19ff03){console['error']('Error\x20searching\x20users:',_0x19ff03),_0x37e746['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x2c6fb4){const _0x399fe4=a4_0x4c4826;document['getElementById']('selected-user-name')['textContent']=_0x2c6fb4['displayName']||_0x2c6fb4[_0x399fe4(0xb3)]||_0x399fe4(0x2aa),document['getElementById']('selected-user-points')['textContent']=(_0x2c6fb4['points']||0x0)[_0x399fe4(0xf8)](),document[_0x399fe4(0x215)]('selected-user-id')['value']=_0x2c6fb4['id'],document['getElementById'](_0x399fe4(0x156))['style']['display']=_0x399fe4(0xf0),document['getElementById']('points-management-forms')['style']['display']='block',document['getElementById']('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x4908ec){const _0x598b40=a4_0x4c4826;_0x4908ec[_0x598b40(0x20e)]();const _0x4be4f5=document['getElementById'](_0x598b40(0x142))['value'],_0x1d4c28=document[_0x598b40(0x215)]('points-action')[_0x598b40(0x12d)],_0x119e0f=parseInt(document['getElementById']('points-amount')['value']),_0x47bc2f=document['getElementById']('points-reason')['value']['trim']();if(!_0x4be4f5||!_0x119e0f||_0x119e0f<0x0){showNotification(_0x598b40(0x15d),_0x598b40(0x1f2));return;}try{await modifyUserPoints(_0x4be4f5,_0x1d4c28,_0x119e0f,_0x47bc2f),document['getElementById']('modify-points-form')[_0x598b40(0x10a)]();const _0x4f2405=doc(db,'userProfiles',_0x4be4f5),_0x322d07=await getDoc(_0x4f2405);if(_0x322d07['exists']()){const _0x2cf745=_0x322d07['data']();document['getElementById']('selected-user-points')['textContent']=(_0x2cf745[_0x598b40(0x135)]||0x0)[_0x598b40(0xf8)]();}showNotification(_0x598b40(0x26b),_0x598b40(0x1e4)),loadPointsHistory();}catch(_0x37c3eb){console['error']('Error\x20modifying\x20points:',_0x37c3eb),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x37c3eb['message'],_0x598b40(0x1f2));}}async function loadPointsHistory(){const _0x5b39ac=a4_0x4c4826,_0x22c4f9=document[_0x5b39ac(0x215)]('points-history-table-body');if(!_0x22c4f9)return;_0x22c4f9['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x2a6edd=collection(db,'pointsHistory'),_0x3acf97=query(_0x2a6edd,orderBy(_0x5b39ac(0x15c),'desc'),limit(0x32)),_0x7ca914=await getDocs(_0x3acf97);if(_0x7ca914[_0x5b39ac(0x2a9)]){_0x22c4f9['innerHTML']=_0x5b39ac(0x1ed);return;}_0x22c4f9['innerHTML']='',_0x7ca914['forEach'](_0x1d6040=>{const _0x21ec65=_0x5b39ac,_0x1e34bf=_0x1d6040['data'](),_0x3e187a=document['createElement']('tr'),_0x5d5ffe=_0x1e34bf[_0x21ec65(0x15c)]?new Date(_0x1e34bf['timestamp'][_0x21ec65(0x128)]*0x3e8)['toLocaleString']():'Unknown';let _0x33bd05='';switch(_0x1e34bf['action']){case'add':_0x33bd05=_0x21ec65(0xb1)+_0x1e34bf[_0x21ec65(0x132)]+'\x20points';break;case'subtract':_0x33bd05=_0x21ec65(0x2dd)+_0x1e34bf[_0x21ec65(0x132)]+'\x20points';break;case _0x21ec65(0xbc):_0x33bd05='Set\x20to\x20'+_0x1e34bf[_0x21ec65(0x132)]+_0x21ec65(0x110);break;default:_0x33bd05=_0x1e34bf['action']+'\x20'+_0x1e34bf['amount']+'\x20points';}_0x3e187a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5d5ffe+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1e34bf['displayName']||'Unknown\x20User')+_0x21ec65(0xd9)+_0x33bd05+_0x21ec65(0x1be)+_0x1e34bf[_0x21ec65(0x123)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1e34bf['previousPoints']||0x0)+_0x21ec65(0x1fe)+(_0x1e34bf['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1e34bf['reason']||_0x21ec65(0x1d3))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1e34bf[_0x21ec65(0x129)]||'Unknown\x20Admin')+_0x21ec65(0x117),_0x22c4f9['appendChild'](_0x3e187a);});}catch(_0x56af22){console[_0x5b39ac(0x1f2)](_0x5b39ac(0x272),_0x56af22),_0x22c4f9['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x56af22['message']+_0x5b39ac(0x212);}}function filterPointsOverview(){const _0x3475b9=a4_0x4c4826,_0x530b63=document['getElementById']('points-overview-search')['value']['toLowerCase']();if(!window[_0x3475b9(0xe6)])return;const _0x1d7d4c=window['allUsersPoints'][_0x3475b9(0x119)](_0x350f74=>{const _0x2e3636=_0x3475b9,_0x1abc96=(_0x350f74['displayName']||_0x350f74[_0x2e3636(0xb3)]||'')['toLowerCase'](),_0x686042=(_0x350f74[_0x2e3636(0xf4)]||'')['toLowerCase']();return _0x1abc96['includes'](_0x530b63)||_0x686042[_0x2e3636(0x175)](_0x530b63);});renderPointsOverview(_0x1d7d4c);}function sortPointsOverview(){const _0x5840b0=a4_0x4c4826,_0x4e6d32=document['getElementById']('points-sort-order')[_0x5840b0(0x12d)];if(!window['allUsersPoints'])return;const _0x1f6830=[...window[_0x5840b0(0xe6)]];switch(_0x4e6d32){case'points-desc':_0x1f6830['sort']((_0xbd6f6b,_0x3160c2)=>(_0x3160c2['points']||0x0)-(_0xbd6f6b['points']||0x0));break;case'points-asc':_0x1f6830['sort']((_0x5c0f3f,_0x4fd0b9)=>(_0x5c0f3f['points']||0x0)-(_0x4fd0b9['points']||0x0));break;case'name-asc':_0x1f6830['sort']((_0x582082,_0x3796a4)=>{const _0xb13bc6=_0x5840b0,_0x193480=(_0x582082['displayName']||_0x582082[_0xb13bc6(0xb3)]||'')['toLowerCase'](),_0x1c24fa=(_0x3796a4['displayName']||_0x3796a4['username']||'')['toLowerCase']();return _0x193480['localeCompare'](_0x1c24fa);});break;case'name-desc':_0x1f6830[_0x5840b0(0x11f)]((_0x4934c3,_0x345578)=>{const _0x22befc=_0x5840b0,_0x3d6570=(_0x4934c3['displayName']||_0x4934c3['username']||'')['toLowerCase'](),_0x5d0c86=(_0x345578['displayName']||_0x345578[_0x22befc(0xb3)]||'')[_0x22befc(0x17c)]();return _0x5d0c86[_0x22befc(0x2fa)](_0x3d6570);});break;}renderPointsOverview(_0x1f6830);}async function handleAwardItem(_0x363777){const _0x2f6749=a4_0x4c4826;_0x363777[_0x2f6749(0x20e)]();const _0x3de8f8=document['getElementById']('selected-user-id')['value'],_0x763eff=document['getElementById'](_0x2f6749(0x266))['value'],_0x76d395=document['getElementById']('award-reason')['value'][_0x2f6749(0x26e)]();if(!_0x3de8f8||!_0x763eff){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully',_0x2f6749(0x1e4)),document['getElementById']('award-item-form')[_0x2f6749(0x10a)]();}catch(_0x302325){console['error'](_0x2f6749(0x2b9),_0x302325),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x302325['message'],_0x2f6749(0x1f2));}}async function loadUserPointsHistory(_0x25b3a3){const _0x22b87e=a4_0x4c4826;try{const _0x1566d0=collection(db,'pointsHistory'),_0x4c04bb=query(_0x1566d0,where('userId','==',_0x25b3a3),orderBy('timestamp','desc')),_0x2d48b8=await getDocs(_0x4c04bb);console['log'](_0x22b87e(0x226)+_0x2d48b8['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x25b3a3),showNotification('User\x20has\x20'+_0x2d48b8['size']+'\x20points\x20history\x20entries',_0x22b87e(0x261));}catch(_0x22b02e){console[_0x22b87e(0x1f2)](_0x22b87e(0x201),_0x22b02e),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x228667=a4_0x4c4826;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x526cf6=collection(db,_0x228667(0x23b)),_0x2190c6=await getDocs(_0x526cf6);if(_0x2190c6[_0x228667(0x2a9)]){console[_0x228667(0xea)]('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x203192=0x0,_0x5c6232=0x0;const _0x2b134f=writeBatch(db);let _0x4d2994=0x0;return console['log']('Found\x20'+_0x2190c6[_0x228667(0x248)]+'\x20users\x20to\x20check...'),_0x2190c6['forEach'](_0x10d536=>{const _0x3bae0d=_0x228667,_0x352185=_0x10d536['data']();_0x352185[_0x3bae0d(0x135)]===undefined||_0x352185[_0x3bae0d(0x135)]===null?(_0x2b134f['update'](_0x10d536[_0x3bae0d(0x1ea)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x203192++,_0x4d2994++,console['log']('Queued\x20'+(_0x352185['displayName']||_0x352185['username']||_0x352185[_0x3bae0d(0xf4)]||'Unknown')+'\x20for\x20points\x20initialization')):(_0x5c6232++,console['log']((_0x352185['displayName']||_0x352185['username']||_0x352185[_0x3bae0d(0xf4)]||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x352185[_0x3bae0d(0x135)])),_0x4d2994>=0x1f4&&console[_0x3bae0d(0x22e)]('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x203192>0x0?(console[_0x228667(0xea)]('Committing\x20batch\x20update\x20for\x20'+_0x203192+'\x20users...'),await _0x2b134f[_0x228667(0x120)](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x203192+_0x228667(0x257))):console['log'](_0x228667(0x131)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x2190c6[_0x228667(0x248)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x203192+_0x228667(0x1ee)+_0x5c6232),showNotification(_0x228667(0x26c)+_0x203192+'\x20users.\x20'+_0x5c6232+'\x20users\x20already\x20had\x20points.',_0x228667(0x1e4)),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x2190c6['size'],'usersUpdated':_0x203192,'usersAlreadyHadPoints':_0x5c6232};}catch(_0x466f80){console['error'](_0x228667(0x281),_0x466f80),showNotification('Error\x20initializing\x20points:\x20'+_0x466f80['message'],'error');throw _0x466f80;}}function addPointsMigrationButton(){const _0x176f22=a4_0x4c4826,_0x3e33ef=document[_0x176f22(0x215)](_0x176f22(0x208));if(!_0x3e33ef)return;if(document['getElementById']('migrate-points-btn'))return;const _0xd39f3a=document['createElement']('div');_0xd39f3a['className']='migration-section',_0xd39f3a[_0x176f22(0x28d)][_0x176f22(0x1cb)]=_0x176f22(0x199),_0xd39f3a['style'][_0x176f22(0xd8)]='15px',_0xd39f3a['style'][_0x176f22(0x23c)]='rgba(255,\x20193,\x207,\x200.1)',_0xd39f3a['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0xd39f3a['style']['borderRadius']=_0x176f22(0x2b7),_0xd39f3a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x81f59e=_0x3e33ef['querySelector'](_0x176f22(0x203));_0x81f59e&&_0x81f59e['insertAdjacentElement']('afterend',_0xd39f3a),document['getElementById'](_0x176f22(0x22b))['addEventListener']('click',async function(){const _0x234135=_0x176f22;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this[_0x234135(0x1a1)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']=_0x234135(0x29b),this['style']['backgroundColor']='#28a745',setTimeout(()=>{_0xd39f3a['style']['display']='none';},0xbb8);}catch(_0x5403c){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x2f14a6=a4_0x4c4826;console['log'](_0x2f14a6(0x28c)),addPointsMigrationButton();const _0x39ad9e=document['getElementById']('points-user-search');_0x39ad9e&&_0x39ad9e[_0x2f14a6(0x126)]('input',debounce(searchUsersForPoints,0x12c));const _0x5723d8=document[_0x2f14a6(0x215)]('modify-points-form');_0x5723d8&&_0x5723d8[_0x2f14a6(0x126)](_0x2f14a6(0x1e8),handleModifyPoints);const _0x248239=document['getElementById'](_0x2f14a6(0x217));_0x248239&&_0x248239['addEventListener'](_0x2f14a6(0x1e8),handleAwardItem);const _0x1b1fe1=document[_0x2f14a6(0x215)]('points-overview-search');_0x1b1fe1&&_0x1b1fe1['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x2ac01c=document['getElementById']('points-sort-order');_0x2ac01c&&_0x2ac01c['addEventListener']('change',sortPointsOverview);const _0x9d60f0=document['getElementById']('refresh-points-overview');_0x9d60f0&&_0x9d60f0['addEventListener']('click',loadPointsOverview);const _0x3bd9ac=document[_0x2f14a6(0x215)]('quick-edit-points-modal');if(_0x3bd9ac){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x48f420=_0x3bd9ac['querySelector'](_0x2f14a6(0x2da));_0x48f420?_0x48f420[_0x2f14a6(0x126)](_0x2f14a6(0x2ea),function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x3fe088=document['getElementById']('cancel-quick-edit');_0x3fe088?_0x3fe088['addEventListener']('click',function(){const _0x39733c=_0x2f14a6;console['log'](_0x39733c(0x252)),closeQuickEditModal();}):console[_0x2f14a6(0x22e)]('Cancel\x20button\x20not\x20found');const _0x4be6e3=document['getElementById']('quick-edit-points-form');_0x4be6e3?_0x4be6e3[_0x2f14a6(0x126)]('submit',function(_0x47c1f2){const _0x1ddc9d=_0x2f14a6;console[_0x1ddc9d(0xea)]('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x47c1f2);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x3bd9ac['addEventListener'](_0x2f14a6(0x2ea),function(_0x1546ae){const _0x2f927b=_0x2f14a6;_0x1546ae['target']===_0x3bd9ac&&(console['log'](_0x2f927b(0x234)),closeQuickEditModal());});}else console[_0x2f14a6(0x1f2)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x56d052=a4_0x4c4826;console['log'](_0x56d052(0x1c0));const _0x51c1d9=document['getElementById']('ribbon-user-search');_0x51c1d9&&_0x51c1d9[_0x56d052(0x126)]('input',debounce(searchRibbonUser,0x12c));const _0x47ee87=document['getElementById']('search-ribbon-user-btn');_0x47ee87&&_0x47ee87[_0x56d052(0x126)]('click',searchRibbonUser);const _0x3915ab=document['getElementById'](_0x56d052(0x192));_0x3915ab&&_0x3915ab['addEventListener']('submit',addRibbon),_0x51c1d9&&_0x51c1d9['addEventListener']('keypress',function(_0x1465f5){const _0x259a8d=_0x56d052;_0x1465f5['key']===_0x259a8d(0x10e)&&(_0x1465f5['preventDefault'](),searchRibbonUser());}),console['log'](_0x56d052(0x2d9));}async function modifyUserPoints(_0x179adf,_0x3f312d,_0x1a67ae,_0x18d07d=''){const _0x58a3c2=a4_0x4c4826,_0x4bacf1=doc(db,_0x58a3c2(0x23b),_0x179adf),_0x3a776f=await getDoc(_0x4bacf1);if(!_0x3a776f['exists']())throw new Error(_0x58a3c2(0x19d));const _0x22300d=_0x3a776f['data'](),_0x1fdc6b=_0x22300d['points']!==undefined?_0x22300d['points']:0x0;_0x22300d['points']===undefined&&(console[_0x58a3c2(0xea)]('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x22300d['displayName']||_0x22300d[_0x58a3c2(0xf4)]||'Unknown')),await updateDoc(_0x4bacf1,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x405f89=_0x1fdc6b;switch(_0x3f312d){case _0x58a3c2(0x1f3):_0x405f89=_0x1fdc6b+_0x1a67ae;break;case _0x58a3c2(0x107):_0x405f89=Math[_0x58a3c2(0x152)](0x0,_0x1fdc6b-_0x1a67ae);break;case _0x58a3c2(0xbc):_0x405f89=_0x1a67ae;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x4bacf1,{'points':_0x405f89,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x179adf,'userEmail':_0x22300d['email']||'unknown','displayName':_0x22300d['displayName']||_0x22300d['username']||_0x58a3c2(0x2aa),'action':_0x3f312d,'amount':_0x1a67ae,'previousPoints':_0x1fdc6b,'newPoints':_0x405f89,'reason':_0x18d07d,'adminEmail':auth['currentUser'][_0x58a3c2(0xf4)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x3c7a9d=a4_0x4c4826,_0x3471d0=document[_0x3c7a9d(0x215)](_0x3c7a9d(0x271));if(!_0x3471d0)return;_0x3471d0['innerHTML']=_0x3c7a9d(0x114);try{const _0x1ae593=collection(db,'userProfiles'),_0x4f83e8=await getDocs(_0x1ae593);if(_0x4f83e8['empty']){_0x3471d0['innerHTML']=_0x3c7a9d(0x22f);return;}const _0x18cde2=[];let _0x46343c=0x0;_0x4f83e8['forEach'](_0x80026b=>{const _0x5c186a=_0x3c7a9d,_0x145eb1=_0x80026b['data'](),_0x540f9b=_0x145eb1['points']!==undefined?_0x145eb1[_0x5c186a(0x135)]:0x0;_0x145eb1['points']===undefined&&_0x46343c++,_0x18cde2['push']({'id':_0x80026b['id'],..._0x145eb1,'points':_0x540f9b});}),_0x46343c>0x0&&(console['log']('Found\x20'+_0x46343c+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x46343c+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x18cde2[_0x3c7a9d(0x11f)]((_0x18288a,_0x43afe2)=>(_0x43afe2['points']||0x0)-(_0x18288a['points']||0x0)),window['allUsersPoints']=_0x18cde2,renderPointsOverview(_0x18cde2);}catch(_0x1f4448){console[_0x3c7a9d(0x1f2)]('Error\x20loading\x20points\x20overview:',_0x1f4448),_0x3471d0['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x1f4448['message']+_0x3c7a9d(0x212);}}async function loadRibbonsData(){const _0x591ee3=a4_0x4c4826,_0x44d9e0=document['getElementById'](_0x591ee3(0x25c));if(!_0x44d9e0)return;_0x44d9e0['innerHTML']=_0x591ee3(0xdb);try{const [_0x57dc2b,_0xfb7814,_0x5c6b34]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x591ee3(0x134))),getDocs(collection(db,'playerRibbonsD3'))]);_0x44d9e0[_0x591ee3(0x1a1)]='';const _0x428e66=(_0x180992,_0xc3babe)=>{const _0x49c59d=_0x591ee3;_0x180992[_0x49c59d(0x2d4)](_0x139a82=>{const _0x4d6570=_0x49c59d,_0x460dba=_0x139a82['data'](),_0x30fd7c=_0x460dba['ribbons']||{},_0x16fe44=Object[_0x4d6570(0x16c)](_0x30fd7c)['length'],_0x313619=document['createElement']('tr');_0x313619['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x460dba['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0xc3babe['toLowerCase']()+'\x22>'+_0xc3babe+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x16fe44+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x460dba['lastUpdated']?new Date(_0x460dba['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():_0x4d6570(0x1a9))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x460dba['username']+'\x22\x20data-ladder=\x22'+_0xc3babe+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x44d9e0[_0x4d6570(0x2b5)](_0x313619);});};_0x428e66(_0x57dc2b,'D1'),_0x428e66(_0xfb7814,'D2'),_0x428e66(_0x5c6b34,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x41b044=>{_0x41b044['addEventListener']('click',function(){const _0x4efd1d=a4_0x3732,_0x242742=this['dataset'][_0x4efd1d(0xb3)],_0x4e653d=this['dataset']['ladder'];editUserRibbons(_0x242742,_0x4e653d);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x536aa7){console['error']('Error\x20loading\x20ribbons:',_0x536aa7),_0x44d9e0[_0x591ee3(0x1a1)]=_0x591ee3(0x24e),showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x6bc2f5=a4_0x4c4826,_0x5d4611=document['getElementById'](_0x6bc2f5(0x145))['value']['trim']();if(!_0x5d4611){showNotification(_0x6bc2f5(0xc3),'error');return;}try{const [_0x35c4d1,_0x4ffa04,_0x27a289]=await Promise['all']([getDoc(doc(db,_0x6bc2f5(0x1c3),_0x5d4611)),getDoc(doc(db,_0x6bc2f5(0x134),_0x5d4611)),getDoc(doc(db,'playerRibbonsD3',_0x5d4611))]);let _0x4ef50b=null,_0x21fdf8=null;if(_0x35c4d1['exists']())_0x4ef50b='D1',_0x21fdf8=_0x35c4d1[_0x6bc2f5(0x195)]();else{if(_0x4ffa04[_0x6bc2f5(0x11c)]())_0x4ef50b='D2',_0x21fdf8=_0x4ffa04['data']();else _0x27a289['exists']()&&(_0x4ef50b='D3',_0x21fdf8=_0x27a289[_0x6bc2f5(0x195)]());}_0x4ef50b?(document['getElementById']('current-ribbon-user')['textContent']=_0x5d4611,document['getElementById']('ribbon-target-user')[_0x6bc2f5(0x12d)]=_0x5d4611,document[_0x6bc2f5(0x215)]('ribbon-target-ladder')['value']=_0x4ef50b,document['getElementById']('user-ribbon-management')['style'][_0x6bc2f5(0x20d)]='block',displayCurrentRibbons(_0x21fdf8['ribbons']||{}),showNotification('Found\x20'+_0x5d4611+'\x20in\x20'+_0x4ef50b+'\x20ladder','success')):showNotification('User\x20'+_0x5d4611+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x2fb036){console['error']('Error\x20searching\x20user:',_0x2fb036),showNotification(_0x6bc2f5(0x2b6),_0x6bc2f5(0x1f2));}}function displayCurrentRibbons(_0x4c1125){const _0x3beef8=a4_0x4c4826,_0x18ce30=document['getElementById']('current-ribbons-list');if(!_0x18ce30)return;_0x18ce30[_0x3beef8(0x1a1)]='';if(Object[_0x3beef8(0x16c)](_0x4c1125)[_0x3beef8(0x144)]===0x0){_0x18ce30['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0x4c1125)['forEach'](([_0x5285d3,_0x1fba56])=>{const _0x357015=_0x3beef8,_0x41089d=document['createElement']('div');_0x41089d['className']='ribbon-item',_0x41089d[_0x357015(0x1a1)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x5285d3+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x1fba56[_0x357015(0x172)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x1fba56['awardedAt']?new Date(_0x1fba56['awardedAt']['seconds']*0x3e8)[_0x357015(0x14c)]():_0x357015(0x1a9))+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x5285d3+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x18ce30['appendChild'](_0x41089d);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x3e58a0=>{const _0x16a91b=_0x3beef8;_0x3e58a0['addEventListener'](_0x16a91b(0x2ea),function(){const _0x192595=this['dataset']['ribbon'];removeRibbon(_0x192595);});});}async function addRibbon(_0x51b6c2){const _0x4b13d7=a4_0x4c4826;_0x51b6c2['preventDefault']();const _0xfe936f=document[_0x4b13d7(0x215)]('ribbon-target-user')[_0x4b13d7(0x12d)],_0x1f5d24=document[_0x4b13d7(0x215)]('ribbon-target-ladder')['value'],_0x480edb=document['getElementById']('ribbon-type-select')['value'],_0x397580=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0xfe936f||!_0x1f5d24||!_0x480edb||!_0x397580){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x3d7022=_0x4b13d7(0x1c3)+(_0x1f5d24==='D1'?'':_0x1f5d24),_0x4942a8=doc(db,_0x3d7022,_0xfe936f),_0x217b83=await getDoc(_0x4942a8),_0x3e8e4e=_0x217b83['exists']()?_0x217b83[_0x4b13d7(0x195)]()[_0x4b13d7(0x113)]||{}:{};_0x3e8e4e[_0x480edb]={'level':_0x397580,'awardedAt':serverTimestamp()},await setDoc(_0x4942a8,{'username':_0xfe936f,'ladder':_0x1f5d24,'ribbons':_0x3e8e4e,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x4b13d7(0xb1)+_0x480edb+_0x4b13d7(0x21b)+_0x397580+'\x20to\x20'+_0xfe936f,'success'),displayCurrentRibbons(_0x3e8e4e),document['getElementById'](_0x4b13d7(0x181))['value']='',document[_0x4b13d7(0x215)]('ribbon-level')['value']='1';}catch(_0x575708){console['error']('Error\x20adding\x20ribbon:',_0x575708),showNotification('Error\x20adding\x20ribbon',_0x4b13d7(0x1f2));}}async function removeRibbon(_0x5c827b){const _0x4c9652=a4_0x4c4826,_0x5e86c5=document[_0x4c9652(0x215)]('ribbon-target-user')['value'],_0x2cefae=document[_0x4c9652(0x215)]('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x5c827b+'\x20from\x20'+_0x5e86c5+'?'))return;try{const _0x2b40e0='playerRibbons'+(_0x2cefae==='D1'?'':_0x2cefae),_0x42d09c=doc(db,_0x2b40e0,_0x5e86c5),_0x50b8fb=await getDoc(_0x42d09c),_0x484b98=_0x50b8fb['exists']()?_0x50b8fb['data']()['ribbons']||{}:{};delete _0x484b98[_0x5c827b],await setDoc(_0x42d09c,{'username':_0x5e86c5,'ladder':_0x2cefae,'ribbons':_0x484b98,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x5c827b+_0x4c9652(0x2cb)+_0x5e86c5,'success'),displayCurrentRibbons(_0x484b98);}catch(_0x5dd6d1){console['error']('Error\x20removing\x20ribbon:',_0x5dd6d1),showNotification(_0x4c9652(0x167),_0x4c9652(0x1f2));}}function editUserRibbons(_0x5ddf00,_0x366960){const _0x1fd4a3=a4_0x4c4826;document[_0x1fd4a3(0x215)]('ribbon-user-search')['value']=_0x5ddf00,searchRibbonUser();}