const a32_0x3ed8d4=(function(){let _0x1cbce3=!![];return function(_0x18a24f,_0x49edf4){const _0x1624dd=_0x1cbce3?function(){if(_0x49edf4){const _0x409093=_0x49edf4['apply'](_0x18a24f,arguments);return _0x49edf4=null,_0x409093;}}:function(){};return _0x1cbce3=![],_0x1624dd;};}()),a32_0x4fb826=a32_0x3ed8d4(this,function(){const _0x56dcec=a32_0x3ff3;let _0x510d6e;try{const _0x195e1f=Function(_0x56dcec(0xca)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x510d6e=_0x195e1f();}catch(_0x2ae6f5){_0x510d6e=window;}const _0x17c8f2=_0x510d6e[_0x56dcec(0xdf)]=_0x510d6e[_0x56dcec(0xdf)]||{},_0x1ca2a9=['log',_0x56dcec(0xe7),'info',_0x56dcec(0xf9),_0x56dcec(0xcf),_0x56dcec(0x105),'trace'];for(let _0x1bd0c0=0x0;_0x1bd0c0<_0x1ca2a9[_0x56dcec(0xce)];_0x1bd0c0++){const _0x287091=a32_0x3ed8d4['constructor'][_0x56dcec(0xe5)]['bind'](a32_0x3ed8d4),_0x3326f5=_0x1ca2a9[_0x1bd0c0],_0x15e34a=_0x17c8f2[_0x3326f5]||_0x287091;_0x287091['__proto__']=a32_0x3ed8d4['bind'](a32_0x3ed8d4),_0x287091['toString']=_0x15e34a['toString']['bind'](_0x15e34a),_0x17c8f2[_0x3326f5]=_0x287091;}});function a32_0x116e(){const _0x34d449=['#50C878','position','return\x20(function()\x20','previousElo','textContent','asc','length','exception','sort','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','totalMatches','timestamp','toLowerCase','Error\x20fetching\x20batch\x20D2\x20match\x20stats:','winnerScore','includes','eloHistoryD2','winRate','Unranked','innerHTML','number','Bronze','kda','console','wins','player','Error\x20loading\x20D2\x20ladder:','has','querySelectorAll','prototype','display','warn',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','totalKills','username','desc','ceil','bold','#FFD700','change','<img\x20src=\x22../images/flags/','country','forEach','color','#4CAF50','style','set','playersD2','catch','error','now','Emerald','0.85em','querySelector','#CD7F32','get','gray','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','size','losses',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','table','push','data','fontSize'];a32_0x116e=function(){return _0x34d449;};return a32_0x116e();}a32_0x4fb826();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0x42dc6c from'./firebase-idle-wrapper.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x2e0b59=![]){const _0x1f2c0c=a32_0x3ff3,_0x1ab15e=document['querySelector']('#ladder-d2\x20tbody');if(!_0x1ab15e){console['error']('D2\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x1ab15e[_0x1f2c0c(0xdb)]='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x2b87d9=Date[_0x1f2c0c(0xfa)]();if(!_0x2e0b59&&playerCacheD2['data']&&_0x2b87d9-playerCacheD2[_0x1f2c0c(0xd3)]<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2[_0x1f2c0c(0x107)]);return;}const _0x3c7c31=collection(db,'playersD2'),_0x9b851f=query(_0x3c7c31,orderBy(_0x1f2c0c(0xc9),_0x1f2c0c(0xcd))),_0x1cd50e=await a32_0x42dc6c['getDocuments'](_0x3c7c31),_0x53e934=[];_0x1cd50e['forEach'](_0xac177f=>{const _0x5e10b8=_0x1f2c0c,_0x2bfb47=_0xac177f['data']();_0x2bfb47['username']&&_0x53e934[_0x5e10b8(0x106)]({..._0x2bfb47,'id':_0xac177f['id'],'elo':_0x2bfb47['eloRating']||0x0,'position':_0x2bfb47['position']||Number['MAX_SAFE_INTEGER']});});const _0x41a9a3=collection(db,'userProfiles'),_0x257ff1=await getDocs(_0x41a9a3),_0x2594d8=new Map();_0x257ff1[_0x1f2c0c(0xf2)](_0x15a3b7=>{const _0x593438=_0x1f2c0c,_0x2f12f8=_0x15a3b7['data']();_0x2f12f8['username']&&_0x2594d8[_0x593438(0xf6)](_0x2f12f8[_0x593438(0xea)]['toLowerCase'](),_0x2f12f8);});for(const _0x4eaf1c of _0x53e934){const _0x1fcac7=_0x4eaf1c['username'][_0x1f2c0c(0xd4)]();if(_0x2594d8[_0x1f2c0c(0xe3)](_0x1fcac7)){const _0x752dc6=_0x2594d8[_0x1f2c0c(0xff)](_0x1fcac7);_0x752dc6[_0x1f2c0c(0xf1)]&&(_0x4eaf1c[_0x1f2c0c(0xf1)]=_0x752dc6['country'][_0x1f2c0c(0xd4)]());}}const _0x211193=_0x53e934['map'](_0x18a6ec=>_0x18a6ec[_0x1f2c0c(0xea)]),_0x399f4d=await fetchBatchMatchStatsD2(_0x211193);_0x53e934['sort']((_0x15ff7a,_0x471c0f)=>{const _0x233876=_0x1f2c0c,_0x13f281=_0x399f4d['get'](_0x15ff7a['username'])?.['totalMatches']||0x0,_0x582e54=_0x399f4d[_0x233876(0xff)](_0x471c0f[_0x233876(0xea)])?.['totalMatches']||0x0;if(_0x13f281===0x0!==(_0x582e54===0x0))return _0x13f281===0x0?0x1:-0x1;return(_0x15ff7a['position']||0x3e7)-(_0x471c0f['position']||0x3e7);}),_0x53e934['forEach']((_0x473829,_0x5599f5)=>{_0x473829['position']=_0x5599f5+0x1;}),playerCacheD2['data']=_0x53e934,playerCacheD2['timestamp']=_0x2b87d9,updateLadderDisplayD2(_0x53e934);}catch(_0x2e1bfa){console['error'](_0x1f2c0c(0xe2),_0x2e1bfa),_0x1ab15e[_0x1f2c0c(0xdb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x2e1bfa['message']+_0x1f2c0c(0x101);}}function getNextAvailablePositionD2(_0x41b780){if(_0x41b780['length']===0x0)return 0x1;let _0x4251be=0x0;return _0x41b780['forEach'](_0x3f3e38=>{const _0x44cccd=a32_0x3ff3;_0x3f3e38[_0x44cccd(0xc9)]&&typeof _0x3f3e38['position']===_0x44cccd(0xdc)&&_0x3f3e38[_0x44cccd(0xc9)]>_0x4251be&&(_0x4251be=_0x3f3e38['position']);}),_0x4251be+0x1;}function a32_0x3ff3(_0x16b907,_0x1edd83){const _0x4fb826=a32_0x116e();return a32_0x3ff3=function(_0x3ed8d4,_0x12f464){_0x3ed8d4=_0x3ed8d4-0xc8;let _0x116e41=_0x4fb826[_0x3ed8d4];return _0x116e41;},a32_0x3ff3(_0x16b907,_0x1edd83);}async function updatePlayerPositions(_0xaa94a6,_0x509407){const _0x76babf=a32_0x3ff3;try{const _0x27da9e=collection(db,_0x76babf(0xf7)),_0x2d74e5=await getDocs(_0x27da9e),_0x72f831=[];_0x2d74e5[_0x76babf(0xf2)](_0x45cd33=>{_0x72f831['push']({'id':_0x45cd33['id'],..._0x45cd33['data']()});});const _0x481f77=_0x72f831['find'](_0x31a7e1=>_0x31a7e1['username']===_0xaa94a6),_0x5e87e3=_0x72f831['find'](_0xee37b3=>_0xee37b3['username']===_0x509407);if(!_0x481f77||!_0x5e87e3){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x481f77['position']>_0x5e87e3['position']){const _0xeaa2e5=_0x5e87e3[_0x76babf(0xc9)];for(const _0x7e5430 of _0x72f831){_0x7e5430['position']>=_0x5e87e3['position']&&_0x7e5430['position']<_0x481f77[_0x76babf(0xc9)]&&_0x7e5430['username']!==_0xaa94a6&&await updateDoc(doc(db,'playersD2',_0x7e5430['id']),{'position':_0x7e5430['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x481f77['id']),{'position':_0xeaa2e5});if(_0xeaa2e5===0x1){const _0x41feb2=doc(db,'playersD2',_0x481f77['id']),_0x212b76=await getDoc(_0x41feb2);!_0x212b76[_0x76babf(0x107)]()['firstPlaceDate']&&await updateDoc(_0x41feb2,{'firstPlaceDate':Timestamp['now']()});}if(_0x5e87e3['position']===0x1){const _0x5d2151=doc(db,'playersD2',_0x5e87e3['id']);await updateDoc(_0x5d2151,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0x47bbec){console['error']('Error\x20updating\x20D2\x20player\x20positions:',_0x47bbec);}}function calculateStreakDays(_0x39c929){const _0x1d1c8b=a32_0x3ff3;if(!_0x39c929)return 0x0;const _0x564080=_0x39c929['toDate'](),_0x542d74=new Date(),_0x5b22bd=Math['abs'](_0x542d74-_0x564080);return Math[_0x1d1c8b(0xec)](_0x5b22bd/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x1cd5be){const _0x528997=a32_0x3ff3;if(_0x1cd5be>=0x834)return _0x528997(0xfb);if(_0x1cd5be>=0x708)return'Gold';if(_0x1cd5be>=0x640)return'Silver';if(_0x1cd5be>=0x578)return _0x528997(0xdd);return _0x528997(0xda);}async function updateLadderDisplayD2(_0x1948b7){const _0x566782=a32_0x3ff3;_0x1948b7['sort']((_0x9523db,_0x253d09)=>_0x9523db['position']-_0x253d09['position']);const _0x2c436f=document['querySelector']('#ladder-d2\x20tbody');if(!_0x2c436f)return;_0x2c436f['innerHTML']='';const _0x325a09=_0x1948b7['map'](_0x4d2665=>_0x4d2665['username']),_0x5b5234=await fetchBatchMatchStatsD2(_0x325a09),_0x42a181=document['querySelector']('#ladder-d2\x20thead\x20tr');_0x42a181&&(_0x42a181['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x4dfc95=_0x1948b7['map'](_0x5ca600=>{const _0x1c8788=_0x5b5234['get'](_0x5ca600['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x5ca600,_0x1c8788);})['join']('');_0x2c436f[_0x566782(0xdb)]=_0x4dfc95,getPlayersLastEloChangesD2(_0x325a09)['then'](_0x1a0682=>{const _0x20346f=_0x566782,_0x1fcf2e=new Map();_0x2c436f[_0x20346f(0xe4)]('tr')['forEach']((_0x992ea5,_0xa05649)=>{const _0x39b4d2=_0x20346f;_0xa05649<_0x325a09[_0x39b4d2(0xce)]&&_0x1fcf2e['set'](_0x325a09[_0xa05649],_0x992ea5);}),_0x1a0682['forEach']((_0x3249c6,_0x406f75)=>{const _0x4ebe3a=_0x20346f,_0x2fa321=_0x1fcf2e['get'](_0x406f75);if(_0x2fa321&&_0x3249c6!==0x0){const _0x58be79=_0x2fa321['querySelector']('td:nth-child(3)');if(_0x58be79){const _0xaf19b9=_0x3249c6>0x0?'+'+_0x3249c6:''+_0x3249c6,_0x1a79b4=_0x58be79[_0x4ebe3a(0xfd)]('.trend-indicator');_0x1a79b4&&(_0x1a79b4[_0x4ebe3a(0xcc)]=_0xaf19b9,_0x1a79b4[_0x4ebe3a(0xf5)][_0x4ebe3a(0xf3)]=_0x3249c6>0x0?_0x4ebe3a(0xf4):'#F44336',_0x1a79b4['style']['fontWeight']=_0x4ebe3a(0xed),_0x1a79b4['style'][_0x4ebe3a(0x108)]=_0x4ebe3a(0xfc),_0x1a79b4['style'][_0x4ebe3a(0xe6)]='inline',_0x1a79b4['style']['visibility']='visible',_0x1a79b4['style']['opacity']='1');}}});})[_0x566782(0xf8)](_0x1ab43f=>console['error']('Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:',_0x1ab43f));}function createPlayerRowD2(_0x462b88,_0x12ec52){const _0x1e57bb=a32_0x3ff3,_0x5b8b39=parseFloat(_0x462b88['elo'])||0x0;let _0x45e14c=_0x1e57bb(0x100);if(_0x5b8b39>=0x7d0)_0x45e14c=_0x1e57bb(0xc8);else{if(_0x5b8b39>=0x708)_0x45e14c=_0x1e57bb(0xee);else{if(_0x5b8b39>=0x640)_0x45e14c='#C0C0C0';else _0x5b8b39>=0x578&&(_0x45e14c=_0x1e57bb(0xfe));}}let _0x4d87dc='';return _0x462b88[_0x1e57bb(0xf1)]&&(_0x4d87dc=_0x1e57bb(0xf0)+_0x462b88['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x462b88['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x1e57bb(0xd1)+_0x462b88[_0x1e57bb(0xc9)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x462b88[_0x1e57bb(0xea)])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x45e14c+_0x1e57bb(0xe8)+_0x462b88[_0x1e57bb(0xea)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4d87dc+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x45e14c+_0x1e57bb(0x104)+_0x5b8b39+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x12ec52[_0x1e57bb(0xd2)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x12ec52[_0x1e57bb(0xe0)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x12ec52[_0x1e57bb(0x103)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x12ec52['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x12ec52['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD2(_0x37a003){const _0x56d2f7=a32_0x3ff3,_0x2478b6=new Map();_0x37a003['forEach'](_0x38787d=>_0x2478b6['set'](_0x38787d,0x0));try{const _0x252048=collection(db,_0x56d2f7(0xd8)),_0x577bc9=query(_0x252048,orderBy('timestamp',_0x56d2f7(0xeb)),limit(0x64)),_0x5e00ff=await getDocs(_0x577bc9),_0xe63d20=new Map(),_0x127f49=await getDocs(collection(db,'playersD2'));_0x127f49['forEach'](_0x5b8835=>{const _0x4f18f2=_0x56d2f7,_0x5d8e7d=_0x5b8835[_0x4f18f2(0x107)]();_0x5d8e7d[_0x4f18f2(0xea)]&&_0xe63d20['set'](_0x5b8835['id'],_0x5d8e7d[_0x4f18f2(0xea)]);});const _0x3f3e1c=new Map();_0x5e00ff['forEach'](_0x4a4554=>{const _0x38d563=_0x56d2f7,_0x3f4bcd=_0x4a4554['data']();let _0x28bb28=_0x3f4bcd[_0x38d563(0xea)]||_0x3f4bcd['playerUsername'];!_0x28bb28&&_0x3f4bcd[_0x38d563(0xe1)]&&_0xe63d20['has'](_0x3f4bcd['player'])&&(_0x28bb28=_0xe63d20['get'](_0x3f4bcd['player']));if(!_0x28bb28&&_0x3f4bcd['matchId']){}_0x28bb28&&_0x37a003['includes'](_0x28bb28)&&(!_0x3f3e1c[_0x38d563(0xe3)](_0x28bb28)&&_0x3f3e1c['set'](_0x28bb28,[]),_0x3f3e1c[_0x38d563(0xff)](_0x28bb28)['push']({..._0x3f4bcd,'timestamp':_0x3f4bcd['timestamp']?.['seconds']||0x0,'username':_0x28bb28}));}),_0x3f3e1c['forEach']((_0x350431,_0x42ecff)=>{const _0x2b1213=_0x56d2f7;if(_0x350431['length']>0x0){_0x350431[_0x2b1213(0xd0)]((_0xbc8326,_0x47534b)=>_0x47534b['timestamp']-_0xbc8326['timestamp']);const _0xd1a81e=_0x350431['find'](_0x4205b0=>_0x4205b0['change']!==undefined||_0x4205b0['newElo']!==undefined&&_0x4205b0['previousElo']!==undefined);if(_0xd1a81e){let _0x3a1fdf;if(_0xd1a81e[_0x2b1213(0xef)]!==undefined)_0x3a1fdf=_0xd1a81e['change'];else _0xd1a81e['newElo']!==undefined&&_0xd1a81e[_0x2b1213(0xcb)]!==undefined&&(_0x3a1fdf=_0xd1a81e['newElo']-_0xd1a81e[_0x2b1213(0xcb)]);_0x3a1fdf!==undefined&&_0x2478b6['set'](_0x42ecff,_0x3a1fdf);}}});if(_0x3f3e1c[_0x56d2f7(0x102)]===0x0){const _0x534dac=collection(db,'eloHistory'),_0x15605=query(_0x534dac,where('gameMode','==','D2'),orderBy(_0x56d2f7(0xd3),'desc'),limit(0x32));try{const _0x2fb523=await getDocs(_0x15605);console['log']('D2:\x20Found',_0x2fb523[_0x56d2f7(0x102)],'fallback\x20entries'),_0x2fb523['forEach'](_0x2da510=>{const _0x562bc8=_0x56d2f7,_0x4dab10=_0x2da510['data'](),_0x4a8bb8=_0x4dab10['username']||_0x4dab10['playerUsername'];if(_0x4a8bb8&&_0x37a003[_0x562bc8(0xd7)](_0x4a8bb8)){const _0x42b392=_0x4dab10['change']||(_0x4dab10['newElo']!==undefined&&_0x4dab10['previousElo']!==undefined?_0x4dab10['newElo']-_0x4dab10[_0x562bc8(0xcb)]:0x0);_0x42b392!==0x0&&(_0x2478b6['set'](_0x4a8bb8,_0x42b392),console['log']('D2:\x20'+_0x4a8bb8+'\x20fallback\x20ELO\x20change:\x20'+_0x42b392));}});}catch(_0x56cc12){}}}catch(_0x3f0982){console[_0x56d2f7(0xf9)]('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x3f0982);}return _0x2478b6;}async function fetchBatchMatchStatsD2(_0x55de57){const _0x439890=a32_0x3ff3,_0x44ed02=new Map();try{_0x55de57['forEach'](_0x5aaee5=>{_0x44ed02['set'](_0x5aaee5,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x30867=collection(db,'approvedMatchesD2'),_0xaa9497=await getDocs(_0x30867);_0xaa9497['forEach'](_0x4e2d6f=>{const _0x3c436=a32_0x3ff3,_0x49d967=_0x4e2d6f[_0x3c436(0x107)](),_0x34e0a7=_0x49d967['winnerUsername'],_0x3e5b48=_0x49d967['loserUsername'];if(_0x55de57['includes'](_0x34e0a7)){const _0x4c5ed3=_0x44ed02['get'](_0x34e0a7);_0x4c5ed3['wins']++,_0x4c5ed3[_0x3c436(0xd2)]++,_0x4c5ed3['totalKills']+=parseInt(_0x49d967['winnerScore'])||0x0,_0x4c5ed3['totalDeaths']+=parseInt(_0x49d967['loserScore'])||0x0;}if(_0x55de57[_0x3c436(0xd7)](_0x3e5b48)){const _0x202e5d=_0x44ed02['get'](_0x3e5b48);_0x202e5d['losses']++,_0x202e5d['totalMatches']++,_0x202e5d[_0x3c436(0xe9)]+=parseInt(_0x49d967['loserScore'])||0x0,_0x202e5d['totalDeaths']+=parseInt(_0x49d967[_0x3c436(0xd6)])||0x0;}}),_0x55de57['forEach'](_0x585ad5=>{const _0x2380df=a32_0x3ff3,_0x2d2567=_0x44ed02[_0x2380df(0xff)](_0x585ad5);_0x2d2567[_0x2380df(0xde)]=_0x2d2567['totalDeaths']>0x0?(_0x2d2567['totalKills']/_0x2d2567['totalDeaths'])['toFixed'](0x2):_0x2d2567['totalKills']['toFixed'](0x2),_0x2d2567[_0x2380df(0xd9)]=_0x2d2567['totalMatches']>0x0?(_0x2d2567[_0x2380df(0xe0)]/_0x2d2567[_0x2380df(0xd2)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x1f411c){console[_0x439890(0xf9)](_0x439890(0xd5),_0x1f411c);}return _0x44ed02;}export{displayLadderD2,updatePlayerPositions};