function a1_0x6a62(){const _0x4b2649=['apply','username','forEach','all','size','\x20D2,\x20','playersD3','set','log','motto','length','console','ðŸ’¾\x20Writing\x20aggregated\x20data...','has','ðŸ“¦\x20Prepared\x20batch\x20','info','\x20unique\x20members','\x20D3,\x20','elo','name','eloRating','unranked','Unknown'];a1_0x6a62=function(){return _0x4b2649;};return a1_0x6a62();}function a1_0x3ceb(_0x21c1e4,_0x14f0dd){const _0x48f8fd=a1_0x6a62();return a1_0x3ceb=function(_0x292ca9,_0x10f3bd){_0x292ca9=_0x292ca9-0x167;let _0x6a6275=_0x48f8fd[_0x292ca9];return _0x6a6275;},a1_0x3ceb(_0x21c1e4,_0x14f0dd);}import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);async function migrateToAggregatedMembers(){const _0x4349af=a1_0x3ceb,_0x412675=(function(){let _0x2021cd=!![];return function(_0x50bbb0,_0x4705c8){const _0x3183fa=_0x2021cd?function(){const _0x664cae=a1_0x3ceb;if(_0x4705c8){const _0x3ebc20=_0x4705c8[_0x664cae(0x167)](_0x50bbb0,arguments);return _0x4705c8=null,_0x3ebc20;}}:function(){};return _0x2021cd=![],_0x3183fa;};}()),_0x2d283c=_0x412675(this,function(){const _0x2bea54=a1_0x3ceb;let _0x292a64;try{const _0x53c6a5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x292a64=_0x53c6a5();}catch(_0x49b159){_0x292a64=window;}const _0x37a748=_0x292a64[_0x2bea54(0x172)]=_0x292a64['console']||{},_0xd2cae2=['log','warn',_0x2bea54(0x176),'error','exception','table','trace'];for(let _0x3adb9a=0x0;_0x3adb9a<_0xd2cae2[_0x2bea54(0x171)];_0x3adb9a++){const _0x579c6e=_0x412675['constructor']['prototype']['bind'](_0x412675),_0x3c11f6=_0xd2cae2[_0x3adb9a],_0x566a55=_0x37a748[_0x3c11f6]||_0x579c6e;_0x579c6e['__proto__']=_0x412675['bind'](_0x412675),_0x579c6e['toString']=_0x566a55['toString']['bind'](_0x566a55),_0x37a748[_0x3c11f6]=_0x579c6e;}});_0x2d283c(),console['log']('ðŸ”„\x20Starting\x20migration\x20to\x20aggregated\x20members...');try{console['log']('ðŸ“¥\x20Fetching\x20all\x20collections...');const [_0x4e559e,_0x169d74,_0xf6efe9,_0x16a6f2,_0x501bc0]=await Promise[_0x4349af(0x16a)]([getDocs(collection(db,'userProfiles')),getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x4349af(0x16d))),getDocs(collection(db,'nonParticipants'))]);console['log']('âœ…\x20Data\x20fetched:\x20'+_0x4e559e[_0x4349af(0x16b)]+'\x20profiles,\x20'+_0x169d74['size']+'\x20D1,\x20'+_0xf6efe9[_0x4349af(0x16b)]+_0x4349af(0x16c)+_0x16a6f2[_0x4349af(0x16b)]+_0x4349af(0x178)+_0x501bc0['size']+'\x20non-participants');const _0x2650cb=new Map();_0x4e559e['forEach'](_0x2470d0=>{_0x2650cb['set'](_0x2470d0['id'],_0x2470d0['data']());});const _0x2a88c6=new Map(),_0x1c7f6e=(_0x27ea2a,_0x27fbff)=>{const _0x29fc11=_0x4349af;_0x27ea2a[_0x29fc11(0x169)](_0x14d375=>{const _0x2cdcdd=_0x29fc11,_0x1845d0=_0x14d375['data'](),_0x1ce2b7=_0x14d375['id'];!_0x2a88c6['has'](_0x1ce2b7)&&_0x2a88c6[_0x2cdcdd(0x16e)](_0x1ce2b7,{'userId':_0x1ce2b7,'username':_0x1845d0[_0x2cdcdd(0x168)]||_0x1845d0[_0x2cdcdd(0x17a)]||_0x2cdcdd(0x17d),'ladders':[],'isNonParticipant':![]});const _0x1c73c6=_0x2a88c6['get'](_0x1ce2b7);_0x1c73c6['ladders']['push']({'ladder':_0x27fbff,'elo':_0x1845d0[_0x2cdcdd(0x17b)]||_0x1845d0['elo']||0x4b0,'active':_0x1845d0['active']!==![]});});};_0x1c7f6e(_0x169d74,'D1'),_0x1c7f6e(_0xf6efe9,'D2'),_0x1c7f6e(_0x16a6f2,'D3'),_0x501bc0['forEach'](_0x29d1fe=>{const _0x13613e=_0x4349af,_0x58f96e=_0x29d1fe['data'](),_0x5e346a=_0x29d1fe['id'];!_0x2a88c6[_0x13613e(0x174)](_0x5e346a)&&(_0x58f96e[_0x13613e(0x168)]||_0x58f96e['name'])&&_0x2a88c6[_0x13613e(0x16e)](_0x5e346a,{'userId':_0x5e346a,'username':_0x58f96e['username']||_0x58f96e[_0x13613e(0x17a)],'ladders':[],'isNonParticipant':!![]});}),console[_0x4349af(0x16f)]('âš™ï¸\x20Processed\x20'+_0x2a88c6['size']+_0x4349af(0x177)),console['log'](_0x4349af(0x173));const _0x5d252a=[];let _0x31d318=writeBatch(db),_0x189f61=0x0,_0x1049a3=0x0;_0x2a88c6['forEach']((_0x221487,_0x1a63b8)=>{const _0x2930dc=_0x4349af,_0x3accbf=_0x2650cb['get'](_0x1a63b8)||{};let _0x34100=0x0,_0x3774a0=null;if(_0x221487['ladders']['length']>0x0){const _0x3bbecf=_0x221487['ladders']['sort']((_0x1a2070,_0x3fdd6d)=>_0x3fdd6d['elo']-_0x1a2070[_0x2930dc(0x179)]);_0x34100=_0x3bbecf[0x0]['elo'],_0x3774a0=_0x3bbecf[0x0]['ladder'];}const _0x16bc61={'userId':_0x1a63b8,'username':_0x221487[_0x2930dc(0x168)],'profileImageUrl':_0x3accbf['profileImageUrl']||null,'country':_0x3accbf['country']||null,'motto':_0x3accbf[_0x2930dc(0x170)]||null,'favoriteMap':_0x3accbf['favoriteMap']||null,'favoriteWeapon':_0x3accbf['favoriteWeapon']||null,'isNonParticipant':_0x221487['isNonParticipant'],'ladders':_0x221487['ladders'],'primaryLadder':_0x3774a0,'highestElo':_0x34100,'rank':getPlayerRank(_0x34100),'lastUpdated':new Date(),'migrationTimestamp':new Date()['toISOString']()},_0x39a4db=doc(collection(db,'aggregatedMembers'),_0x1a63b8);_0x31d318[_0x2930dc(0x16e)](_0x39a4db,_0x16bc61),_0x189f61++,_0x1049a3++,_0x189f61>=0x1c2&&(_0x5d252a['push'](_0x31d318['commit']()),_0x31d318=writeBatch(db),_0x189f61=0x0,console['log'](_0x2930dc(0x175)+_0x5d252a['length']+'\x20('+_0x1049a3+'\x20members\x20processed)'));}),_0x189f61>0x0&&_0x5d252a['push'](_0x31d318['commit']()),console[_0x4349af(0x16f)]('ðŸš€\x20Executing\x20'+_0x5d252a['length']+'\x20batches...'),await Promise['all'](_0x5d252a),console[_0x4349af(0x16f)]('ðŸŽ‰\x20Successfully\x20migrated\x20'+_0x2a88c6[_0x4349af(0x16b)]+'\x20members\x20to\x20aggregated\x20collection!'),console['log']('ðŸ’¡\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!');}catch(_0x4ea2bf){console['error']('âŒ\x20Migration\x20failed:',_0x4ea2bf),_0x4ea2bf['code']==='permission-denied'&&console['error']('ðŸ”’\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.');}}function getPlayerRank(_0x5303de){const _0xbfd1ff=a1_0x3ceb;if(_0x5303de>=0x7d0)return'emerald';if(_0x5303de>=0x708)return'gold';if(_0x5303de>=0x640)return'silver';if(_0x5303de>=0x578)return'bronze';return _0xbfd1ff(0x17c);}migrateToAggregatedMembers();