const a54_0x39da53=a54_0x30db,a54_0x5313f7=(function(){let _0x429961=!![];return function(_0x7f337e,_0x555a89){const _0x10c4ac=_0x429961?function(){if(_0x555a89){const _0x18c23b=_0x555a89['apply'](_0x7f337e,arguments);return _0x555a89=null,_0x18c23b;}}:function(){};return _0x429961=![],_0x10c4ac;};}()),a54_0x211dea=a54_0x5313f7(this,function(){const _0x16cdc0=a54_0x30db,_0x327d2b=function(){const _0x524057=a54_0x30db;let _0x4d2f00;try{_0x4d2f00=Function(_0x524057(0x1d1)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x276354){_0x4d2f00=window;}return _0x4d2f00;},_0x3e5602=_0x327d2b(),_0x1a9098=_0x3e5602[_0x16cdc0(0x1ce)]=_0x3e5602['console']||{},_0x593ec6=['log','warn','info','error',_0x16cdc0(0x1d3),'table',_0x16cdc0(0x1c0)];for(let _0x132a74=0x0;_0x132a74<_0x593ec6['length'];_0x132a74++){const _0x511f9a=a54_0x5313f7[_0x16cdc0(0x1c1)]['prototype']['bind'](a54_0x5313f7),_0x2220f1=_0x593ec6[_0x132a74],_0x3fa11f=_0x1a9098[_0x2220f1]||_0x511f9a;_0x511f9a['__proto__']=a54_0x5313f7['bind'](a54_0x5313f7),_0x511f9a[_0x16cdc0(0x1c6)]=_0x3fa11f['toString'][_0x16cdc0(0x1cb)](_0x3fa11f),_0x1a9098[_0x2220f1]=_0x511f9a;}});function a54_0x30db(_0xb4f267,_0x1b0c93){const _0x211dea=a54_0x1ae5();return a54_0x30db=function(_0x5313f7,_0x57ef9d){_0x5313f7=_0x5313f7-0x1ba;let _0x1ae514=_0x211dea[_0x5313f7];return _0x1ae514;},a54_0x30db(_0xb4f267,_0x1b0c93);}a54_0x211dea();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a54_0x1ae5(){const _0x4228e1=['display','players','none','\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.','setupEventListeners','data','trace','constructor','Please\x20enter\x20your\x20password','resetSeason','style','eloRating','toString','block','seasonCount','username','docs','bind','cancel-reset','click','console','reset-confirmation','reload','return\x20(function()\x20','email','exception'];a54_0x1ae5=function(){return _0x4228e1;};return a54_0x1ae5();}class SeasonManager{constructor(){const _0x331865=a54_0x30db;this[_0x331865(0x1be)]();}[a54_0x39da53(0x1be)](){const _0xb07d89=a54_0x39da53,_0x1fd113=document['getElementById']('reset-season'),_0x24a332=document['getElementById']('confirm-reset'),_0x5774ef=document['getElementById'](_0xb07d89(0x1cc));_0x1fd113?.['addEventListener'](_0xb07d89(0x1cd),()=>{const _0x125c17=_0xb07d89;document['getElementById']('reset-confirmation')[_0x125c17(0x1c4)]['display']=_0x125c17(0x1c7);}),_0x24a332?.['addEventListener']('click',async()=>{const _0x1dcfda=_0xb07d89,_0x2c44c5=document['getElementById']('reset-password'),_0x4d305c=auth['currentUser'];if(!_0x4d305c||!_0x2c44c5['value']){alert(_0x1dcfda(0x1c2));return;}try{const _0x11e689=EmailAuthProvider['credential'](_0x4d305c[_0x1dcfda(0x1d2)],_0x2c44c5['value']);await reauthenticateWithCredential(_0x4d305c,_0x11e689),await this[_0x1dcfda(0x1c3)](),_0x2c44c5['value']='',document['getElementById']('reset-confirmation')['style'][_0x1dcfda(0x1ba)]='none';}catch(_0x25d844){alert('Invalid\x20password\x20or\x20authentication\x20failed'),console['error']('Authentication\x20error:',_0x25d844);}}),_0x5774ef?.['addEventListener']('click',()=>{const _0x385d3d=_0xb07d89,_0x30631f=document['getElementById']('reset-password');_0x30631f['value']='',document['getElementById'](_0x385d3d(0x1cf))['style']['display']=_0x385d3d(0x1bc);});}async[a54_0x39da53(0x1c3)](){const _0x1de2f0=a54_0x39da53;try{const _0x5dce3c=await getDoc(doc(db,'metadata',_0x1de2f0(0x1c8)));let _0x2cf4fa=0x1;_0x5dce3c['exists']()&&(_0x2cf4fa=_0x5dce3c[_0x1de2f0(0x1bf)]()['count']+0x1);const _0x272e7f=await getDocs(collection(db,_0x1de2f0(0x1bb))),_0x19d3bb={'players':[],'date':new Date(),'seasonNumber':_0x2cf4fa};for(const _0x161625 of _0x272e7f[_0x1de2f0(0x1ca)]){const _0x5ef742=_0x161625['data']();_0x19d3bb['players']['push']({'username':_0x5ef742[_0x1de2f0(0x1c9)],'position':_0x5ef742['position'],'eloRating':_0x5ef742[_0x1de2f0(0x1c5)]||0x4b0}),await setDoc(doc(db,'players',_0x161625['id']),{..._0x5ef742,'eloRating':0x4b0,'position':_0x5ef742['position']});}await setDoc(doc(db,'seasons','season'+_0x2cf4fa),_0x19d3bb),await setDoc(doc(db,'metadata',_0x1de2f0(0x1c8)),{'count':_0x2cf4fa}),alert('Season\x20'+_0x2cf4fa+_0x1de2f0(0x1bd)),location[_0x1de2f0(0x1d0)]();}catch(_0x479d5b){console['error']('Error\x20resetting\x20season:',_0x479d5b),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}export const seasonManager=new SeasonManager();