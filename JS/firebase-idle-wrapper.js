const a19_0x2db982=a19_0x4aab,a19_0x28cdd0=(function(){let _0x2153d5=!![];return function(_0x24266c,_0x2853e6){const _0x1f3e3c=_0x2153d5?function(){if(_0x2853e6){const _0x14a837=_0x2853e6['apply'](_0x24266c,arguments);return _0x2853e6=null,_0x14a837;}}:function(){};return _0x2153d5=![],_0x1f3e3c;};}()),a19_0x2ae5e5=a19_0x28cdd0(this,function(){const _0x39f273=a19_0x4aab,_0x41a528=function(){const _0xab3ca8=a19_0x4aab;let _0x22fe39;try{_0x22fe39=Function(_0xab3ca8(0x1e5)+_0xab3ca8(0x1f2)+');')();}catch(_0x373567){_0x22fe39=window;}return _0x22fe39;},_0x173041=_0x41a528(),_0x5c0dc4=_0x173041['console']=_0x173041['console']||{},_0x4e912d=['log',_0x39f273(0x1e8),_0x39f273(0x1fc),'error','exception','table','trace'];for(let _0x85fec3=0x0;_0x85fec3<_0x4e912d['length'];_0x85fec3++){const _0x3ecf34=a19_0x28cdd0['constructor']['prototype']['bind'](a19_0x28cdd0),_0x4fd69b=_0x4e912d[_0x85fec3],_0x41492c=_0x5c0dc4[_0x4fd69b]||_0x3ecf34;_0x3ecf34[_0x39f273(0x1d2)]=a19_0x28cdd0['bind'](a19_0x28cdd0),_0x3ecf34['toString']=_0x41492c[_0x39f273(0x1cf)]['bind'](_0x41492c),_0x5c0dc4[_0x4fd69b]=_0x3ecf34;}});a19_0x2ae5e5();import{auth,db}from'./firebase-config.js';function a19_0x4c8f(){const _0x4a19db=['cssText','args','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error','[FirebaseIdle]\x20Debug\x20mode\x20','[FirebaseIdle]\x20No\x20listeners\x20to\x20resume','textContent','get','message','toString','network','createElement','__proto__','pendingOperations','getDocument','operationType','_suspendedListeners','update','enabled','suspendSession','set','\x20operation','blockedOperations','Firebase:\x20Suspended','[FirebaseIdle]\x20Listeners\x20resumed','Executing\x20pending\x20','[FirebaseIdle]\x20Error\x20resuming\x20listener:','substr','pendingTimeout','firebase-suspend-indicator','includes','return\x20(function()\x20','\x20operations:\x20','checkSessionActive','warn','[FirebaseIdle]\x20Active\x20listeners:\x20','[FirebaseIdle]\x20Blocked\x20','[FirebaseIdle]\x20Listener\x20created:\x20','resumeSession','deleteDocument','add','error','Error\x20executing\x20pending\x20operation:','RDL_SESSION_SUSPENDED','{}.constructor(\x22return\x20this\x22)(\x20)','log','safeOperation','[FirebaseIdle]\x20Resuming\x20listener:','catch','random','\x20operations\x20during\x20idle\x20state','debug','now','finally','info','forEach','size','activeListeners'];a19_0x4c8f=function(){return _0x4a19db;};return a19_0x4c8f();}import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x512ecc=a19_0x4aab;this[_0x512ecc(0x1ff)]=new Map(),this['pendingOperations']=new Map(),this[_0x512ecc(0x1e2)]=null,this['blockedOperations']=0x0,this[_0x512ecc(0x1f9)]=![];}[a19_0x2db982(0x1e7)](){const _0x3fdd65=a19_0x2db982;if(window[_0x3fdd65(0x1f1)]===!![])return console[_0x3fdd65(0x1f3)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this[_0x3fdd65(0x1dc)]=(this[_0x3fdd65(0x1dc)]||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0x3fdd65(0x1ea)+this['blockedOperations']+_0x3fdd65(0x1f8)),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log'](_0x3fdd65(0x1c9)),![];return!![];}async[a19_0x2db982(0x1f4)](_0x36850c,_0x178f18,..._0x419858){const _0x13b1a2=a19_0x2db982;if(!this['checkSessionActive']()){const _0x3a0ab3=_0x178f18+'-'+Date[_0x13b1a2(0x1fa)]()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations'][_0x13b1a2(0x1da)](_0x3a0ab3,{'operation':_0x36850c,'operationType':_0x178f18,'args':_0x419858}),!this[_0x13b1a2(0x1e2)]&&(this['pendingTimeout']=setTimeout(()=>{const _0x197d62=_0x13b1a2;this[_0x197d62(0x1d3)]['clear'](),this[_0x197d62(0x1e2)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x36850c(..._0x419858);}catch(_0x4b5c8b){if(_0x4b5c8b['code']==='unavailable'||_0x4b5c8b['code']==='resource-exhausted'||_0x4b5c8b['message']&&_0x4b5c8b[_0x13b1a2(0x1ce)][_0x13b1a2(0x1e4)](_0x13b1a2(0x1d0)))return handleNetworkError(),null;throw _0x4b5c8b;}}async['getDocument'](_0x1fd2d6){const _0x2bdb76=a19_0x2db982;return this[_0x2bdb76(0x1f4)](getDoc,_0x2bdb76(0x1cd),_0x1fd2d6);}async['getDocuments'](_0x4579f0){return this['safeOperation'](getDocs,'query',_0x4579f0);}async['addDocument'](_0x4eb990,_0x9842ce){const _0x5eb7cb=a19_0x2db982;return this['safeOperation'](addDoc,_0x5eb7cb(0x1ee),_0x4eb990,_0x9842ce);}async['setDocument'](_0xcdaebf,_0x4d1384,_0x596de1={}){return this['safeOperation'](setDoc,'set',_0xcdaebf,_0x4d1384,_0x596de1);}async['updateDocument'](_0x2c31e3,_0x17f963){const _0xda126c=a19_0x2db982;return this[_0xda126c(0x1f4)](updateDoc,_0xda126c(0x1d7),_0x2c31e3,_0x17f963);}async[a19_0x2db982(0x1ed)](_0x3f395e){return this['safeOperation'](deleteDoc,'delete',_0x3f395e);}['suspendAllListeners'](){const _0x5e81b3=a19_0x2db982;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this[_0x5e81b3(0x1ff)]['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this['activeListeners']['forEach']((_0x25c377,_0x5a21bf)=>{const _0x4c16b4=_0x5e81b3;console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x5a21bf);if(typeof _0x25c377==='function')try{_0x25c377(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x5a21bf);}catch(_0x275be9){console[_0x4c16b4(0x1ef)]('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x5a21bf,_0x275be9);}}),this['activeListeners']['clear']();if(this[_0x5e81b3(0x1f9)]){const _0x59a2ea=document[_0x5e81b3(0x1d1)]('div');_0x59a2ea['id']=_0x5e81b3(0x1e3),_0x59a2ea['style'][_0x5e81b3(0x1c7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x59a2ea[_0x5e81b3(0x1cc)]=_0x5e81b3(0x1dd),document['body']['appendChild'](_0x59a2ea);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x202827=a19_0x2db982;if(!this['_suspendedListeners']||this['_suspendedListeners'][_0x202827(0x1fe)]===0x0){console[_0x202827(0x1f3)](_0x202827(0x1cb));return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners']['size']),this[_0x202827(0x1d6)]['forEach']((_0x5d34d5,_0x3bb054)=>{const _0x599591=_0x202827;console['log'](_0x599591(0x1f5),_0x3bb054);try{if(typeof _0x5d34d5==='function'){console[_0x599591(0x1e8)]('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x3bb054);return;}const {query:_0x4fc267,callback:_0x16dd31,options:_0x2c87ea}=_0x5d34d5;if(_0x4fc267&&_0x16dd31){const _0x29c59f=onSnapshot(_0x4fc267,_0x16dd31,_0x2c87ea||{});this[_0x599591(0x1ff)]['set'](_0x3bb054,_0x29c59f),console[_0x599591(0x1f3)]('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x3bb054);}}catch(_0x570607){console['error'](_0x599591(0x1e0),_0x3bb054,_0x570607);}}),this[_0x202827(0x1d6)]['clear']();const _0x167d5f=document['getElementById']('firebase-suspend-indicator');_0x167d5f&&_0x167d5f['remove'](),console['log'](_0x202827(0x1de));}['createListener'](_0x1fc579,_0x17b64f,_0x4f1f3c={},_0x1f7930=null){const _0x1e82db=a19_0x2db982,_0x3411f8=_0x1f7930||'listener_'+Date[_0x1e82db(0x1fa)]()+'_'+Math[_0x1e82db(0x1f7)]()['toString'](0x24)[_0x1e82db(0x1e1)](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x3411f8);if(!this['checkSessionActive']())return console[_0x1e82db(0x1f3)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x3411f8),()=>{};try{const _0x145f3f=onSnapshot(_0x1fc579,_0x17b64f,_0x4f1f3c);return this['activeListeners']['set'](_0x3411f8,{'unsubscribe':_0x145f3f,'query':_0x1fc579,'callback':_0x17b64f,'options':_0x4f1f3c}),this['debug']&&(console['log'](_0x1e82db(0x1eb)+_0x3411f8),console[_0x1e82db(0x1f3)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size'])),()=>{const _0x311f78=_0x1e82db;this['debug']&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x3411f8);try{_0x145f3f(),this['activeListeners']['delete'](_0x3411f8),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x3411f8),console['log'](_0x311f78(0x1e9)+this['activeListeners'][_0x311f78(0x1fe)]));}catch(_0x3694bc){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x3411f8+':',_0x3694bc);}};}catch(_0x36d4f6){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x3411f8+':',_0x36d4f6),()=>{};}}['executePendingOperations'](_0x4b4dd8='all'){const _0x244dde=a19_0x2db982;console['log'](_0x244dde(0x1df)+_0x4b4dd8+_0x244dde(0x1e6)+this['pendingOperations']['size']+'\x20total\x20operations');const _0x3662a0=new Map(this['pendingOperations']);this['pendingOperations']['clear'](),_0x3662a0[_0x244dde(0x1fd)]((_0x2a478d,_0x149199)=>{const _0xa17548=_0x244dde;_0x4b4dd8==='all'||_0x2a478d['operationType']===_0x4b4dd8?(console['log']('Executing\x20delayed\x20'+_0x2a478d['operationType']+_0xa17548(0x1db)),this[_0xa17548(0x1f4)](_0x2a478d['operation'],_0x2a478d[_0xa17548(0x1d5)],..._0x2a478d[_0xa17548(0x1c8)])[_0xa17548(0x1f6)](_0x323e46=>console[_0xa17548(0x1ef)](_0xa17548(0x1f0),_0x323e46))):this['pendingOperations']['set'](_0x149199,_0x2a478d);});}['enableDebug'](_0x4462e8=!![]){const _0x168351=a19_0x2db982;this[_0x168351(0x1f9)]=_0x4462e8,console['log'](_0x168351(0x1ca)+(_0x4462e8?_0x168351(0x1d8):'disabled'));if(_0x4462e8){const _0x40693b=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this[_0x168351(0x1d4)](doc(db,'system','test'))['then'](_0x345440=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x345440);})['catch'](_0x334a19=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x334a19);})[_0x168351(0x1fb)](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x40693b;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x5df222=a19_0x2db982,_0x35f20e=window['suspendSession']||function(){},_0x270102=window['resumeSession']||function(){};window[_0x5df222(0x1d9)]=function(){_0x35f20e(),firebaseIdle['suspendAllListeners']();},window[_0x5df222(0x1ec)]=function(){_0x270102(),firebaseIdle['resumeAllListeners']();};}function a19_0x4aab(_0x49f935,_0x3d15f6){const _0x2ae5e5=a19_0x4c8f();return a19_0x4aab=function(_0x28cdd0,_0x587597){_0x28cdd0=_0x28cdd0-0x1c7;let _0x4c8fe4=_0x2ae5e5[_0x28cdd0];return _0x4c8fe4;},a19_0x4aab(_0x49f935,_0x3d15f6);}export default firebaseIdle;