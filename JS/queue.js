const a43_0x4c295b=a43_0x1c18,a43_0x78362f=(function(){let _0x3be744=!![];return function(_0x4b41f3,_0x39572f){const _0x4a1074=_0x3be744?function(){if(_0x39572f){const _0x20b05f=_0x39572f['apply'](_0x4b41f3,arguments);return _0x39572f=null,_0x20b05f;}}:function(){};return _0x3be744=![],_0x4a1074;};}()),a43_0x3b4f08=a43_0x78362f(this,function(){const _0x4aff88=a43_0x1c18;let _0x25fb44;try{const _0x197757=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x25fb44=_0x197757();}catch(_0x38d7be){_0x25fb44=window;}const _0x1d51cd=_0x25fb44['console']=_0x25fb44[_0x4aff88(0x1d4)]||{},_0x78c878=[_0x4aff88(0x1d3),_0x4aff88(0x1cf),'info','error','exception','table',_0x4aff88(0x1ca)];for(let _0x196a2f=0x0;_0x196a2f<_0x78c878[_0x4aff88(0x1d7)];_0x196a2f++){const _0x349cb8=a43_0x78362f['constructor']['prototype']['bind'](a43_0x78362f),_0x5cf9a0=_0x78c878[_0x196a2f],_0x3ce4e5=_0x1d51cd[_0x5cf9a0]||_0x349cb8;_0x349cb8['__proto__']=a43_0x78362f['bind'](a43_0x78362f),_0x349cb8[_0x4aff88(0x1d5)]=_0x3ce4e5['toString'][_0x4aff88(0x1d9)](_0x3ce4e5),_0x1d51cd[_0x5cf9a0]=_0x349cb8;}});a43_0x3b4f08();function a43_0x4e09(){const _0x595f88=['queue-container','Just\x20now','Error\x20in\x20queue\x20listener:','error','trace','forEach','isReady','toDate','lastUpdated','warn','unload','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','display','log','console','toString','style','length','none','bind','push'];a43_0x4e09=function(){return _0x595f88;};return a43_0x4e09();}function a43_0x1c18(_0x393192,_0x1a2ead){const _0x3b4f08=a43_0x4e09();return a43_0x1c18=function(_0x78362f,_0xaca4b){_0x78362f=_0x78362f-0x1c6;let _0x4e09b2=_0x3b4f08[_0x78362f];return _0x4e09b2;},a43_0x1c18(_0x393192,_0x1a2ead);}import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x16d789){const _0x2319b5=a43_0x1c18,_0x26aab5=document['getElementById'](_0x2319b5(0x1c6));if(!_0x26aab5)return;if(_0x16d789['length']===0x0){_0x26aab5['style'][_0x2319b5(0x1d2)]=_0x2319b5(0x1d8);return;}_0x26aab5[_0x2319b5(0x1d6)][_0x2319b5(0x1d2)]='block';let _0x1fe4d7='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x16d789[_0x2319b5(0x1cb)](_0x58b14a=>{const _0x9beb59=_0x2319b5;_0x1fe4d7+=_0x9beb59(0x1d1)+(_0x58b14a['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x58b14a['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x1fe4d7+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x26aab5['innerHTML']=_0x1fe4d7;}function formatQueueTime(_0x506f58){const _0x1f5684=a43_0x1c18;if(!_0x506f58)return _0x1f5684(0x1c7);const _0xb0e12f=_0x506f58['toDate']?_0x506f58['toDate']():new Date(_0x506f58),_0x3f46dc=new Date(),_0xb3637a=Math['floor']((_0x3f46dc-_0xb0e12f)/0xea60);if(_0xb3637a<0x1)return'Just\x20now';return _0xb3637a+'m\x20in\x20queue';}async function checkQueueTimeout(_0xe28b5e){const _0x15cbb7=a43_0x1c18;if(!_0xe28b5e['lastUpdated'])return;const _0x3feb55=_0xe28b5e[_0x15cbb7(0x1ce)]['toDate']?_0xe28b5e['lastUpdated'][_0x15cbb7(0x1cd)]():new Date(_0xe28b5e['lastUpdated']),_0x25a09a=new Date(),_0x4c53af=Math['floor']((_0x25a09a-_0x3feb55)/0xea60);if(_0x4c53af>=0x1e)try{const _0x31e6fd=doc(db,'readyPlayers',_0xe28b5e['id']);await updateDoc(_0x31e6fd,{'isReady':![]});}catch(_0x348270){console[_0x15cbb7(0x1c9)]('Error\x20removing\x20player\x20from\x20queue:',_0x348270);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x308ee3=>{const _0x31ae51=[];_0x308ee3['forEach'](_0x103d83=>{const _0x51e813=a43_0x1c18,_0x195a3d=_0x103d83['data']();if(_0x195a3d[_0x51e813(0x1cc)]===!![]){const _0x67afc8={'id':_0x103d83['id'],'username':_0x195a3d['username'],'lastUpdated':_0x195a3d['lastUpdated']||new Date()};_0x31ae51[_0x51e813(0x1da)](_0x67afc8),checkQueueTimeout(_0x67afc8);}}),updateQueueDisplay(_0x31ae51);},_0x582f92=>{const _0x5e64f4=a43_0x1c18;console['error'](_0x5e64f4(0x1c8),_0x582f92);});window['addEventListener'](a43_0x4c295b(0x1d0),()=>{unsubscribe();});