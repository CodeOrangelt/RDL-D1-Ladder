const a23_0x37d7f7=a23_0x26d6,a23_0x490959=(function(){let _0x4cdef5=!![];return function(_0x2cbe8e,_0x41628c){const _0x210943=_0x4cdef5?function(){if(_0x41628c){const _0x40794d=_0x41628c['apply'](_0x2cbe8e,arguments);return _0x41628c=null,_0x40794d;}}:function(){};return _0x4cdef5=![],_0x210943;};}()),a23_0x436e9b=a23_0x490959(this,function(){const _0x2aa12c=a23_0x26d6;let _0x10dba5;try{const _0x118027=Function(_0x2aa12c(0x140)+_0x2aa12c(0x13c)+');');_0x10dba5=_0x118027();}catch(_0x475d23){_0x10dba5=window;}const _0x470a52=_0x10dba5[_0x2aa12c(0x155)]=_0x10dba5['console']||{},_0x4e96a8=['log','warn','info','error','exception','table','trace'];for(let _0x15e2a9=0x0;_0x15e2a9<_0x4e96a8['length'];_0x15e2a9++){const _0x2c3df1=a23_0x490959[_0x2aa12c(0x13d)]['prototype']['bind'](a23_0x490959),_0x3e0a45=_0x4e96a8[_0x15e2a9],_0x50502c=_0x470a52[_0x3e0a45]||_0x2c3df1;_0x2c3df1['__proto__']=a23_0x490959[_0x2aa12c(0x163)](a23_0x490959),_0x2c3df1[_0x2aa12c(0x152)]=_0x50502c['toString'][_0x2aa12c(0x163)](_0x50502c),_0x470a52[_0x3e0a45]=_0x2c3df1;}});a23_0x436e9b();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a23_0x26d6(_0x3fc531,_0x359af1){const _0x436e9b=a23_0x2cfd();return a23_0x26d6=function(_0x490959,_0xa8b22a){_0x490959=_0x490959-0x13c;let _0x2cfd1f=_0x436e9b[_0x490959];return _0x2cfd1f;},a23_0x26d6(_0x3fc531,_0x359af1);}import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a23_0x2cfd(){const _0x5d4eea=['{}.constructor(\x22return\x20this\x22)(\x20)','constructor','players','\x20ladder...','return\x20(function()\x20','forEach','none','className','playersD2','DUO','CTF','Joining\x20','error','Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22','addEventListener','ladder-join-status','exists','uid','style','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','You\x20are\x20already\x20part\x20of\x20the\x20','currentUser','toString','email','toLowerCase','console','textContent','disabled','username','display','DUOS','trim','value','Error\x20joining\x20ladder:','ladder-join-status\x20error','Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...','getElementById','Error\x20checking\x20ladder\x20status:','location','bind','log','reload','data','Authentication\x20error:','message','Error\x20checking\x20','ladder-join-status\x20success','Authentication\x20verification\x20failed:'];a23_0x2cfd=function(){return _0x5d4eea;};return a23_0x2cfd();}import{auth,db}from'./firebase-config.js';let currentLadder='D1';document[a23_0x37d7f7(0x14a)]('DOMContentLoaded',()=>{const _0x1b12bf=a23_0x37d7f7,_0x12fa5a=document['getElementById']('d1-switch'),_0x480fdf=document[_0x1b12bf(0x160)]('d2-switch');console[_0x1b12bf(0x164)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x12fa5a),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x480fdf);function _0x129d15(){const _0x258cbd=_0x1b12bf;document['querySelectorAll']('input[name=\x22ladder\x22]')[_0x258cbd(0x141)](_0x171965=>{const _0x56ce10=_0x258cbd;_0x171965[_0x56ce10(0x14a)]('change',_0x366b79=>{const _0x4699d4=_0x56ce10;_0x366b79['target']['checked']&&(currentLadder=_0x366b79['target'][_0x4699d4(0x15c)],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x129d15();const _0x12fe8f=document['getElementById']('join-ladder-button');_0x12fe8f&&_0x12fe8f['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x538480=>{const _0xa1369a=_0x1b12bf;if(_0x538480)checkUserLadderStatus();else{const _0x326d8f=document['getElementById']('ladder-join-prompt');_0x326d8f&&(_0x326d8f['style']['display']=_0xa1369a(0x142));}});});function getCollectionName(_0x55ecd2){const _0x5b6741=a23_0x37d7f7;switch(_0x55ecd2?.['toUpperCase']()){case'D1':return'players';case'D2':return _0x5b6741(0x144);case'D3':return'playersD3';case'DUOS':case _0x5b6741(0x145):return'playersDuos';case _0x5b6741(0x146):return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x55ecd2+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x5013af=a23_0x37d7f7;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x2c1acf=auth[_0x5013af(0x151)],_0x4910c1=document[_0x5013af(0x160)]('ladder-join-prompt'),_0x1bdb7e=document[_0x5013af(0x160)]('join-ladder-type'),_0x2a18f8=document['getElementById']('tiny-join-button');if(!_0x2c1acf||!_0x2c1acf[_0x5013af(0x14d)]||!_0x4910c1||!_0x1bdb7e||!_0x2a18f8){if(_0x4910c1)_0x4910c1['style'][_0x5013af(0x159)]=_0x5013af(0x142);if(_0x2a18f8)_0x2a18f8['style'][_0x5013af(0x159)]='none';return;}try{try{await _0x2c1acf['getIdToken'](![]);}catch(_0x1f9d29){console['error'](_0x5013af(0x16b),_0x1f9d29),_0x4910c1['style'][_0x5013af(0x159)]='none',_0x2a18f8[_0x5013af(0x14e)]['display']='none';return;}const _0x45881a=getCollectionName(currentLadder),_0x4c3ffe=doc(db,_0x45881a,_0x2c1acf['uid']),_0x261dd9=await getDoc(_0x4c3ffe);if(_0x261dd9['exists']())_0x4910c1[_0x5013af(0x14e)][_0x5013af(0x159)]=_0x5013af(0x142),_0x2a18f8['style']['display']=_0x5013af(0x142);else{_0x4910c1['style']['display']='none',_0x2a18f8[_0x5013af(0x14e)][_0x5013af(0x159)]='block',_0x1bdb7e[_0x5013af(0x156)]=currentLadder,_0x2a18f8['onclick']=()=>{const _0x35ad13=_0x5013af;_0x4910c1['style']['display']==='block'?_0x4910c1['style']['display']=_0x35ad13(0x142):_0x4910c1['style']['display']='block';};const _0x1a1632=document['getElementById']('join-username-input'),_0x2e2633=document['getElementById']('ladder-join-status');if(_0x1a1632)_0x1a1632['value']='';_0x2e2633&&(_0x2e2633[_0x5013af(0x156)]='',_0x2e2633['className']=_0x5013af(0x14b));}}catch(_0x2dab21){console[_0x5013af(0x148)](_0x5013af(0x161),_0x2dab21),_0x4910c1[_0x5013af(0x14e)][_0x5013af(0x159)]='none',_0x2a18f8['style'][_0x5013af(0x159)]='none';}}async function handleJoinLadder(){const _0x3b03db=a23_0x37d7f7,_0x3cb82d=auth['currentUser'],_0x257fb5=document[_0x3b03db(0x160)]('join-ladder-button'),_0x53b6aa=document[_0x3b03db(0x160)]('ladder-join-status'),_0xd49aea=document[_0x3b03db(0x160)]('join-username-input');if(!_0x3cb82d||!_0x3cb82d[_0x3b03db(0x14d)]){_0x53b6aa['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x53b6aa['className']='ladder-join-status\x20error';return;}try{await _0x3cb82d['getIdToken'](!![]);}catch(_0x3fe3aa){console[_0x3b03db(0x148)](_0x3b03db(0x167),_0x3fe3aa),_0x53b6aa['textContent']=_0x3b03db(0x14f),_0x53b6aa['className']=_0x3b03db(0x15e);return;}if(!_0xd49aea||!_0xd49aea['value'][_0x3b03db(0x15b)]()){_0x53b6aa['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x53b6aa['className']='ladder-join-status\x20error';return;}try{_0x257fb5['disabled']=!![],_0x53b6aa['textContent']='Verifying\x20username...',_0x53b6aa[_0x3b03db(0x143)]='ladder-join-status\x20loading';let _0x3401f8='',_0x57278d=null;const _0x2f6e1d=[_0x3b03db(0x13e),_0x3b03db(0x144),'playersD3','playersDuos','playersCTF','nonParticipants'];for(const _0x25123f of _0x2f6e1d){try{const _0x372229=doc(db,_0x25123f,_0x3cb82d[_0x3b03db(0x14d)]),_0x4530e3=await getDoc(_0x372229);if(_0x4530e3[_0x3b03db(0x14c)]()){_0x57278d=_0x4530e3[_0x3b03db(0x166)]();if(_0x57278d[_0x3b03db(0x158)]){_0x3401f8=_0x57278d['username'];break;}}}catch(_0x1bb3a6){console['error'](_0x3b03db(0x169)+_0x25123f+':',_0x1bb3a6);}}!_0x3401f8&&_0x3cb82d[_0x3b03db(0x153)]&&(_0x3401f8=_0x3cb82d[_0x3b03db(0x153)]['split']('@')[0x0]);if(!_0x3401f8){_0x53b6aa['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x53b6aa['className']='ladder-join-status\x20error',_0x257fb5['disabled']=![];return;}const _0x5c9fa2=_0xd49aea['value']['trim']();if(_0x3401f8&&_0x5c9fa2['toLowerCase']()!==_0x3401f8[_0x3b03db(0x154)]()){_0x53b6aa['textContent']=_0x3b03db(0x149)+_0x3401f8+'\x22\x20to\x20confirm.',_0x53b6aa[_0x3b03db(0x143)]=_0x3b03db(0x15e),_0x257fb5[_0x3b03db(0x157)]=![];return;}_0x53b6aa[_0x3b03db(0x156)]=_0x3b03db(0x147)+currentLadder+_0x3b03db(0x13f);const _0x556341=getCollectionName(currentLadder),_0x459275=doc(db,_0x556341,_0x3cb82d['uid']),_0x387274=await getDoc(_0x459275);if(_0x387274['exists']()){_0x53b6aa['textContent']=_0x3b03db(0x150)+currentLadder+'\x20ladder.',_0x53b6aa['className']='ladder-join-status\x20error',_0x257fb5[_0x3b03db(0x157)]=![];return;}try{await _0x3cb82d['getIdToken'](!![]);}catch(_0x5e092c){_0x53b6aa[_0x3b03db(0x156)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x53b6aa['className']='ladder-join-status\x20error',_0x257fb5['disabled']=![];return;}const _0x4b7a9c=_0x3401f8,_0x4c711b=collection(db,_0x556341),_0x215709=query(_0x4c711b,orderBy('position','desc'),limit(0x1)),_0x40f191=await getDocs(_0x215709);let _0x25fe3d=0x1;if(!_0x40f191['empty']){const _0x21e63f=_0x40f191['docs'][0x0]['data']();_0x25fe3d=(_0x21e63f['position']||0x0)+0x1;}const _0x4a8bc5={'username':_0x4b7a9c,'email':_0x3cb82d['email'],'eloRating':0x4b0,'position':_0x25fe3d,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x459275,_0x4a8bc5),currentLadder===_0x3b03db(0x15a)?_0x53b6aa['textContent']=_0x3b03db(0x15f):_0x53b6aa['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x53b6aa['className']=_0x3b03db(0x16a),setTimeout(()=>{const _0x597bac=_0x3b03db;window[_0x597bac(0x162)][_0x597bac(0x165)]();},0x7d0);}catch(_0x50c2c2){console['error'](_0x3b03db(0x15d),_0x50c2c2),_0x53b6aa['textContent']='Error\x20joining\x20ladder:\x20'+_0x50c2c2[_0x3b03db(0x168)],_0x53b6aa['className']='ladder-join-status\x20error',_0x257fb5['disabled']=![];}}