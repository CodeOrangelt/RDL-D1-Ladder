const a44h=a44b;(function(a,b){const g=a44b,c=a();while(!![]){try{const d=parseInt(g(0xbb))/0x1*(-parseInt(g(0xb8))/0x2)+-parseInt(g(0xa4))/0x3+parseInt(g(0xa8))/0x4+parseInt(g(0xb2))/0x5+-parseInt(g(0xa7))/0x6+parseInt(g(0xb3))/0x7+-parseInt(g(0xa9))/0x8*(-parseInt(g(0xba))/0x9);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a44a,0xf06ca));import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a44a(){const p=['ChvZAa','BgfZDfvWzgf0zwq','mta1mdzcwu5vAfm','DxnLCM5HBwu','ntrtBxfmtNO','mJCYDM16t0Xg','C3r5Bgu','sNvZDcbUB3C','Dw5SB2fK','BgvUz3rO','Dg9eyxrL','mJqXndy1ohviqKzoqG','AxnszwfKEq','zMXVB3i','odm3mdK5nMHirMndrW','nti2mZu0oevAvNvzCq','mtu1ndG0ogrNzhrTCG','rxjYB3iGAw4GCxvLDwuGBgLZDgvUzxi6','BM9Uzq','cIaGicaGicaGpgrPDIbJBgfZCZ0ICxvLDwuTyM94iJ4kicaGicaGicaGicaGpgGYpLDHAxrPBMCGzM9YigeGz2fTztWVAdi+cIaGicaGicaGicaGidXKAxyGy2XHC3m9iNf1zxvLlwXPC3qIpGOGicaG','cIaGicaGicaGicaGidXKAxyGy2XHC3m9iNbSyxLLCI1JyxjKiJ4kicaGicaGicaGicaGicaGidXZCgfUignSyxnZpsjWBgf5zxiTBMfTzsi+','CMvHzhLqBgf5zxjZ','zxjYB3i','zM9YrwfJAa','vw5RBM93BIbqBgf5zxi','nZe0nJm4nuXhqufZra','ndKXnJqYmK56zfPoyW','zgf0yq','BsbPBIbXDwv1zq'];a44a=function(){return p;};return a44a();}function a44b(a,b){const c=a44a();return a44b=function(d,e){d=d-0xa0;let f=c[d];if(a44b['YDpuCQ']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a44b['sJtabR']=g,a=arguments,a44b['YDpuCQ']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a44b['sJtabR'](f),a[i]=f):f=j,f;},a44b(a,b);}const readyPlayersRef=collection(db,a44h(0xae)),activePlayersQuery=query(readyPlayersRef,where(a44h(0xa5),'==',!![]));function updateQueueDisplay(a){const i=a44h,b=document['getElementById']('queue-container');if(!b)return;if(a[i(0xa2)]===0x0){b['style']['display']=i(0xab);return;}b[i(0xbc)]['display']='block';let c=i(0xac);a[i(0xb0)](d=>{const j=i;c+=j(0xad)+(d['username']||j(0xb1))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(d['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),c+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',b['innerHTML']=c;}function formatQueueTime(a){const k=a44h;if(!a)return k(0xa0);const b=a['toDate']?a['toDate']():new Date(a),c=new Date(),d=Math['floor']((c-b)/0xea60);if(d<0x1)return k(0xa0);return d+k(0xb5);}async function checkQueueTimeout(a){const l=a44h;if(!a[l(0xb7)])return;const b=a['lastUpdated'][l(0xa3)]?a[l(0xb7)]['toDate']():new Date(a['lastUpdated']),c=new Date(),d=Math[l(0xa6)]((c-b)/0xea60);if(d>=0x1e)try{const e=doc(db,'readyPlayers',a['id']);await updateDoc(e,{'isReady':![]});}catch(f){console[l(0xaf)]('Error\x20removing\x20player\x20from\x20queue:',f);}}const unsubscribe=onSnapshot(readyPlayersRef,a=>{const m=a44h,b=[];a[m(0xb0)](c=>{const n=m,d=c[n(0xb4)]();if(d[n(0xa5)]===!![]){const e={'id':c['id'],'username':d[n(0xb9)],'lastUpdated':d[n(0xb7)]||new Date()};b[n(0xb6)](e),checkQueueTimeout(e);}}),updateQueueDisplay(b);},a=>{const o=a44h;console[o(0xaf)](o(0xaa),a);});window['addEventListener'](a44h(0xa1),()=>{unsubscribe();});