function a36a(){const L=['Bg9NAw4TCgfZC3DVCMq','DMfSDwu','igf0ihbVC2L0Aw9Uia','Bg9N','rw1HAwWGAgfZigjLzw4GDMvYAwzPzwqHifjLzgLYzwn0Aw5NihrVigXVz2LUihbHz2uUlI4','mZCZofbAzxfRwq','rxjYB3iGCMvZzw5KAw5NihzLCMLMAwnHDgLVBIbLBwfPBdO','mtK1mZmWuNvXB0vd','ugXLyxnLihnLBgvJDcbHigDHBwuGBw9KzsbVCIbJAgvJAYboB24TugfYDgLJAxbHBNqU','CgXHEwvYCW','uhjVy2vZC2LUzYbUB24TCgfYDgLJAxbHBNqGCMvNAxn0CMf0Aw9U','zw1WDhK','BM9UugfYDgLJAxbHBNq','Bg9NAw4TzxjYB3i','Bg9NAw4Ty29UDgfPBMvY','ugXLyxnLihvUC2vSzwn0igeGz2fTzsbTB2rLigLMihLVDsbJAg9VC2uGtM9UlvbHCNrPy2LWyw50lG','ywXS','yxv0Ac9LBwfPBc1HBhjLywr5lwLUlxvZzq','q2HLy2TPBMCGAwyGzw1HAwWGAgfZigjLzw4GDMvYAwzPzwqUlI4','DxnLCG','rxjYB3iGC2vUzgLUzYb2zxjPzMLJyxrPB24Gzw1HAwW6ia','z2fTzu1Vzgu','BwfNzw50yq','yMXVy2S','BwvZC2fNzq','uhjVy2vZC2LUzYa','rw1HAwWGBM90ihLLDcb2zxjPzMLLzcWGD2fPDgLUzY4UlG','DxnLCM5HBwu','mJiYnZC2me9bwMjdvG','CgXHEwvYC0nurG','BwfW','mtHNCuPfB0q','y29Kzq','vxnLCIbMB3vUzcbPBIa','rhvVCW','mtq2mZuXmxHdDxvSua','cIaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNDHCM5PBMCTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicbqBgvHC2uGDMvYAwz5ihLVDxiGzw1HAwWGDg8Gy29TCgXLDguGEw91CIbYzwDPC3rYyxrPB24UcIaGicaGicaGicaGicaGicaGicaGicaGicaGica8yNi+pgjYpGOGicaGicaGicaGicaGicaGicaGicaGicaGicaGpgj1DhrVBIb0ExbLpsjIDxr0B24IigLKpsjYzxnLBMqTyNv0Dg9UiIbJBgfZCZ0ICMvZzw5Klwj1DhrVBIi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGuMvZzw5KifzLCMLMAwnHDgLVBIbfBwfPBaOGicaGicaGicaGicaGicaGicaGicaGicaGicaGpc9IDxr0B24+cIaGicaGicaGicaGicaGicaGicaGicaGidWVzgL2pG','DgvZDa','zgvZyW','ugXLyxnLigvUDgvYihLVDxiGCgfZC3DVCMqGDg8GCMvZzw5KihzLCMLMAwnHDgLVBIbLBwfPBa','tg9NAw4Gyxr0zw1WDcbZDgfYDgvKigzVCJO','C3rYAw5N','DhjPBq','y2XPy2S','tMv3ihbSyxLLCIa','ugfZC3DVCMqGBM90igf2ywLSywjSzsbMB3iGCMvZzw5KAw5NihzLCMLMAwnHDgLVBG','CMvNAxn0zxiTBw9Kzq','Bg9NAw4Tzw1HAwW','ywrKrxzLBNrmAxn0zw5LCG','rM91BMqGCgvUzgLUzYbYzwDPC3rYyxrPB246','zxHPC3rZ','jYKIignSyxnZpsjYzxnLBMqTyNv0Dg9UiJ4kicaGicaGicaGicaGicaGicaGicbszxnLBMqGvMvYAwzPy2f0Aw9UievTywLScIaGicaGicaGicaGicaGica8l2j1DhrVBJ4kicaGicaGicaGicaGpc9KAxy+','vxnLCIbZAwDUzwqGAw4GzM9YihzLCMLMAwnHDgLVBIbLBwfPBdO','DMvYAwzPy2f0Aw9Uq2HLy2TjBNrLCNzHBa','vw5HyMXLihrVihzLCMLMEsb1C2vYBMfTzsbHDMfPBgfIAwXPDhKUifbSzwfZzsb0CNKGywDHAw4GBgf0zxiU','ihbSyxLLCIbYzwDPC3rYyxrPB24GDg8G','zgf0yq','CgvUzgLUz1jLz2LZDhjHDgLVBNm','oejKqKnJra','Dgv4DenVBNrLBNq','CMvNAxn0zxiTzM9YBq','qxr0zw1WDgLUzYb0BYbYzxnLBMqGDMvYAwzPy2f0Aw9UigvTywLSihrVoG','u2v0DgLUzYb1CcbLBwfPBcb2zxjPzMLJyxrPB24GBgLZDgvUzxiGzM9YoG','lIbqBgvHC2uGy2HLy2SGEw91CIbPBMjVEc4kicaGicaGicaGicaGpc9KAxy+','AhjLzG','CMvZzw5Klwj1DhrVBG','DwLK','ChjLDMvUDerLzMf1Bhq','DgHLBG','igfKzgvKihrVig5VBLbHCNrPy2LWyw50CYbJB2XSzwn0Aw9U','y2HHBMDL','z2v0rwXLBwvUDej5swq','tg9NAw4GzxjYB3i6ia','zw1HAwW','ng5WrLnQAW','qxr0zw1WDgLUzYbgAxjLyMfZzsbZAwDUsw5xAxrOrw1HAwXbBMrqyxnZD29Yzc4UlG','nJaXmKfbwMP6qG','C3r5Bgu','cIaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicbtzxr0Aw5NihvWihLVDxiGywnJB3vUDc4UlGOGicaGicaGicaGicaGicaGicaGicaGica8l2rPDJ4','mJe5odLeDLHlueC','BM9UugfYDgLJAxbHBNrZ','Aw5Uzxjive1m','sw5JB3jYzwn0igfUC3DLCIb0BYb2zxjPzMLJyxrPB24GCxvLC3rPB24','zxjYB3i','mJu2ntC2vMLNzhH5','DMvYAwzPy2f0Aw9UlwfUC3DLCG','tg9NAw4GzxjYB3i6','mJi2ndu0mLPwzMf1Aq','CMvNAxn0zxiTzxjYB3i','zw1HAwXwzxjPzMLLza','cIaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicbwzxjPzMLJyxrPB24Gzw1HAwWGAgfZigjLzw4GCMvZzw50ihrVia','Cg9ZAxrPB24','q2HLy2TPBMCGAwyGDxnLCIbLEgLZDhmGAw4Gyw55ignVBgXLy3rPB24UlI4','C3vIBwL0','zgLZCgXHEq','cIaGicaGicaGicaGicaGicaGicaGpgrPDIbJBgfZCZ0IC3vJy2vZCY1TzxnZywDLiJ4kicaGicaGicaGicaGicaGicaGicaGicaGrw1HAwWGDMvYAwzPzwqGC3vJy2vZC2z1BgX5isbzB3uGy2fUig5VDYbSB2CGAw4UcIaGicaGicaGicaGicaGicaGicaGpc9KAxy+','mJKZnxDsAezZva','BM9Uzq'];a36a=function(){return L;};return a36a();}const a36H=a36b;(function(a,b){const v=a36b,c=a();while(!![]){try{const d=parseInt(v(0x1b5))/0x1+parseInt(v(0x1b8))/0x2+-parseInt(v(0x1ca))/0x3*(parseInt(v(0x1ab))/0x4)+parseInt(v(0x1c1))/0x5*(parseInt(v(0x1c8))/0x6)+parseInt(v(0x1e6))/0x7*(-parseInt(v(0x19b))/0x8)+parseInt(v(0x1e2))/0x9*(parseInt(v(0x1df))/0xa)+-parseInt(v(0x1b0))/0xb*(parseInt(v(0x1ad))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a36a,0xe1b02));import{createUserWithEmailAndPassword,signInWithEmailAndPassword,sendEmailVerification,signOut}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{doc,setDoc,collection,getDocs,query,where,getDoc,updateDoc,deleteDoc,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';function setupVerificationListener(a,b){const w=a36b;console[w(0x1c6)](w(0x19f),a);const c=setInterval(async()=>{const x=w;try{console['log'](x(0x1d5));const d=await signInWithEmailAndPassword(auth,a,b),e=d['user'];await e['getIdToken'](!![]),e[x(0x1ba)]?(console[x(0x1c6)](x(0x1c7)),clearInterval(c),document['getElementById']('register-error')['innerHTML']=x(0x1c0),await signOut(auth),setTimeout(()=>{const y=x;document['getElementById']('register-container')['style'][y(0x1bf)]=y(0x1c2),document['getElementById'](y(0x1d1))['style']['display']='block',document['getElementById'](y(0x1f2))['value']=a,document['getElementById'](y(0x1d0))[y(0x1b2)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Your\x20account\x20has\x20been\x20verified!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';},0x7d0)):(console[x(0x1c6)](x(0x1dd)),await signOut(auth));}catch(f){console[x(0x1b4)]('Error\x20checking\x20verification\x20status:',f),clearInterval(c);}},0x1388);window['verificationCheckInterval']=c,setTimeout(()=>{const z=w;window[z(0x1f8)]&&(clearInterval(window[z(0x1f8)]),window['verificationCheckInterval']=null,console[z(0x1c6)]('Stopped\x20checking\x20for\x20email\x20verification\x20(timeout\x20reached)'));},0x5*0x3c*0x3e8);}async function isUsernameAvailable(a){const A=a36b;if(!a||typeof a!==A(0x1ec)||a[A(0x1ed)]()['length']<0x3)return document[A(0x1a8)]('register-error')[A(0x19c)]='Username\x20must\x20be\x20at\x20least\x203\x20characters\x20long',![];const b=a['trim']();try{const c=/^[a-zA-Z0-9_-]{3,20}$/;if(!c[A(0x1e8)](b))return document['getElementById']('register-error')[A(0x19c)]='Username\x20can\x20only\x20contain\x20letters,\x20numbers,\x20underscores\x20and\x20hyphens',![];const [d,e,f]=await Promise[A(0x1d3)]([getDocs(query(collection(db,'players'),where(A(0x1de),'==',b))),getDocs(query(collection(db,'pendingRegistrations'),where(A(0x1de),'==',b))),getDocs(query(collection(db,A(0x1b1)),where(A(0x1de),'==',b)))]);if(!d[A(0x1ce)]||!e[A(0x1ce)]||!f['empty'])return document['getElementById']('register-error')[A(0x19c)]='Username\x20is\x20already\x20taken',![];return!![];}catch(g){return console['error']('Error\x20checking\x20username:',g),document[A(0x1a8)]('register-error')[A(0x19c)]=A(0x1f9),![];}}async function handleRegister(a){const B=a36b;a[B(0x1a4)]();const b=document['getElementById'](B(0x1b9));b['textContent']='';const c=document['getElementById']('register-email')[B(0x1c4)],d=document[B(0x1a8)]('register-password')['value'],f=document['getElementById']('register-username')['value'],g=document['getElementById'](B(0x1b6))[B(0x1c4)]['toLowerCase'](),h=document['getElementById'](B(0x1f1))[B(0x1c4)],i=document['getElementById']('non-participant')?.['checked']||![];if(i&&h!==''){b['textContent']=B(0x1d2);return;}if(!i&&h===''){b[B(0x19c)]=B(0x1cb);return;}try{const j=['purple',B(0x1d9)];if(!j['includes'](g)){b['textContent']=B(0x1b3);return;}const k=await isUsernameAvailable(f);if(!k)return;const l=await createUserWithEmailAndPassword(auth,c,d),m=l['user'];await sendEmailVerification(m),await setDoc(doc(db,B(0x19a),m['uid']),{'username':f['trim'](),'email':c,'gameMode':h,'nonParticipant':i,'createdAt':new Date(),'verified':![]}),b[B(0x1b2)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Registration\x20pending!\x20Please\x20check\x20your\x20email\x20to\x20verify\x20your\x20account.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resendVerificationEmail(\x27'+c+B(0x1f6),await signOut(auth),setupVerificationListener(c,d);}catch(n){console[B(0x1b4)]('Registration\x20error:',n),b['textContent']=n[B(0x1e3)]===B(0x1d4)?'Email\x20address\x20is\x20already\x20registered':'Registration\x20failed.\x20Please\x20try\x20again\x20later.';}}function a36b(a,b){const c=a36a();return a36b=function(d,e){d=d-0x199;let f=c[d];if(a36b['msynOV']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a36b['NOHVRZ']=g,a=arguments,a36b['msynOV']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a36b['NOHVRZ'](f),a[i]=f):f=j,f;},a36b(a,b);}async function handleLogin(a){const C=a36b;a[C(0x1a4)]();const b=document['getElementById'](C(0x1f2))['value'],c=document[C(0x1a8)](C(0x1c3))[C(0x1c4)],d=document['getElementById']('login-error');console['log'](C(0x1eb),b),d[C(0x19c)]='';try{console[C(0x1c6)](C(0x1ac));const f=await signInWithEmailAndPassword(auth,b,c),g=f['user'];console[C(0x1c6)]('User\x20signed\x20in:',g['uid']);const h=['players','playersD2','playersD3','playersDuos','playersCTF',C(0x1b1)];console['log'](C(0x1bd));let j=![],k=await Promise[C(0x1d3)](h[C(0x1e1)](l=>getDoc(doc(db,l,g[C(0x1a3)]))));for(let l=0x0;l<k['length'];l++){if(k[l][C(0x1f5)]()){j=!![],console[C(0x1c6)](C(0x1e4)+h[l]+'\x20collection');break;}}if(!j){console['log']('User\x20not\x20found\x20in\x20any\x20collection,\x20checking\x20pending\x20registration');const m=doc(db,C(0x19a),g['uid']),n=await getDoc(m);if(n['exists']()){const o=n[C(0x199)]();console['log'](C(0x1f4),o);if(g[C(0x1ba)]){console[C(0x1c6)]('Email\x20is\x20verified,\x20processing\x20registration'),d['innerHTML']=C(0x1af);if(o[C(0x1cf)])console['log'](C(0x1cd)),await setDoc(doc(db,C(0x1b1),g[C(0x1a3)]),{'username':o['username'],'email':g[C(0x1aa)],'createdAt':serverTimestamp(),'isNonParticipant':!![]}),console[C(0x1c6)]('User\x20'+o[C(0x1de)]+C(0x1a6));else{let p;switch(o[C(0x1d8)]){case'D1':p=C(0x1cc);break;case'D2':p='playersD2';break;case'D3':p='playersD3';break;case C(0x1e5):p='playersDuos';break;case'CTF':p=C(0x1e0);break;default:p='players';}console['log'](C(0x1dc)+o['gameMode']+C(0x1fa)+p);const q=collection(db,p),r=query(q,orderBy(C(0x1bc),C(0x1e9)),limit(0x1)),s=await getDocs(r),t=s[C(0x1ce)]?0x1:s['docs'][0x0]['data']()['position']+0x1;await setDoc(doc(db,p,g[C(0x1a3)]),{'username':o[C(0x1de)],'email':g[C(0x1aa)],'eloRating':0x4b0,'position':t,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':o['gameMode']}),console[C(0x1c6)](C(0x1ef)+o['username']+'\x20added\x20to\x20'+p+C(0x1c5)+t);}await deleteDoc(m),setTimeout(()=>{const D=C;window['location'][D(0x1a1)]='../index.html';},0x7d0);return;}else{d[C(0x1b2)]=C(0x1e7),document[C(0x1a8)](C(0x1a2))['addEventListener']('click',()=>{resendVerificationEmail(b);}),await signOut(auth);return;}}}window['location'][C(0x1a1)]='../index.html';}catch(u){console['error']('Login\x20error:',u),d['textContent']='Login\x20failed:\x20'+u['message'];}}function loginFormHandler(a){const E=a36b;a[E(0x1a4)]();const b=document[E(0x1a8)]('login-email')[E(0x1c4)][E(0x1ed)](),c=document[E(0x1a8)]('login-password')[E(0x1c4)],d=document['getElementById'](E(0x1d0));signInWithEmailAndPassword(auth,b,c)[E(0x1a5)](e=>{console['log']('User\x20signed\x20in:',e['user']),window['location']['href']='../index.html';})['catch'](e=>{const F=E;console['error'](F(0x1b7),e),d[F(0x19c)]=F(0x1a9)+e[F(0x1db)],d['style']['display']=F(0x1da);});}async function resendVerificationEmail(a){const G=a36b;console[G(0x1c6)](G(0x19e),a);try{const b=document['getElementById']('login-password')?.[G(0x1c4)];if(!b){console[G(0x1b4)](G(0x1f0)),document['getElementById'](G(0x1d0))[G(0x19c)]=G(0x1ea);return;}const c=await signInWithEmailAndPassword(auth,a,b),d=c[G(0x1d6)];console[G(0x1c6)](G(0x1f7),d['uid']),await sendEmailVerification(d),console[G(0x1c6)]('Verification\x20email\x20sent'),document[G(0x1a8)](G(0x1d0))[G(0x1b2)]=G(0x1bb)+a+G(0x1a0),await signOut(auth);}catch(e){console[G(0x1b4)](G(0x1c9),e),document['getElementById']('login-error')[G(0x19c)]=G(0x1d7)+e['message'];}}window['resendVerificationEmail']=function(a){console['log']('Window.resendVerificationEmail\x20called\x20with:',a),resendVerificationEmail(a);},document[a36H(0x1f3)]('DOMContentLoaded',()=>{const I=a36H,a=document['getElementById']('non-participant'),b=document['getElementById']('register-mode');a&&b&&a['addEventListener'](I(0x1a7),function(){this['checked']?(b['value']='',b['disabled']=!![]):b['disabled']=![];});const c=document[I(0x1a8)](I(0x19d)),d=document[I(0x1a8)]('login-form');c&&c[I(0x1f3)](I(0x1be),handleRegister);d&&d['addEventListener'](I(0x1be),handleLogin);const e=document['getElementById']('show-register'),f=document['getElementById']('show-login');e&&e['addEventListener'](I(0x1ee),g=>{const J=I;g[J(0x1a4)](),document[J(0x1a8)]('login-container')['style']['display']='none',document[J(0x1a8)]('register-container')['style'][J(0x1bf)]='block';}),f&&f[I(0x1f3)]('click',g=>{const K=I;g['preventDefault'](),document[K(0x1a8)]('register-container')[K(0x1ae)][K(0x1bf)]=K(0x1c2),document[K(0x1a8)]('login-container')['style'][K(0x1bf)]=K(0x1da);});});