const a48K=a48d;(function(a,b){const I=a48d,c=a();while(!![]){try{const d=parseInt(I(0x1d0))/0x1*(parseInt(I(0x218))/0x2)+-parseInt(I(0x26e))/0x3*(parseInt(I(0x1ea))/0x4)+parseInt(I(0x238))/0x5*(parseInt(I(0x2b4))/0x6)+-parseInt(I(0x1f4))/0x7*(-parseInt(I(0x1f9))/0x8)+-parseInt(I(0x21c))/0x9*(parseInt(I(0x263))/0xa)+parseInt(I(0x249))/0xb+parseInt(I(0x23e))/0xc*(parseInt(I(0x1df))/0xd);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a48c,0x381ea));const a48b=(function(){let a=!![];return function(b,c){const d=a?function(){if(c){const e=c['apply'](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a48a=a48b(this,function(){const J=a48d,a=function(){let f;try{f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(g){f=window;}return f;},b=a(),c=b[J(0x261)]=b[J(0x261)]||{},d=['log','warn',J(0x230),J(0x268),'exception',J(0x20e),J(0x20a)];for(let e=0x0;e<d['length'];e++){const f=a48b[J(0x299)]['prototype']['bind'](a48b),g=d[e],h=c[g]||f;f[J(0x2b2)]=a48b['bind'](a48b),f[J(0x212)]=h['toString'][J(0x21e)](h),c[g]=f;}});a48a();import{approveReport}from'./ladderalgorithm.js';import{approveReportD2}from'./ladderalgorithm-d2.js';import{approveReportD3}from'./ladderalgorithm-d3.js';import{checkPendingMatches,updatePendingMatchNotification,updateNotificationDot}from'./checkPendingMatches.js';import{collection,getDocs,query,where,orderBy,serverTimestamp,doc,setDoc,getDoc,addDoc,updateDoc,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentUserEmail=null,confirmationNotification=null,outstandingReportData=null,currentGameMode='D1',outstandingMatches=[];function a48c(){const aA=['ihDPDgGGsuq6ia','yMLUza','vxnPBMCGy29SBgvJDgLVBJOG','rxjYB3iGy2HLy2TPBMCG','igLUia','rxjYB3iGy2HLy2TPBMCGAwyGDxnLCIbPCYbPBIbSywrKzxi6','zgf0yq','yNv0Dg9Uw3r5Cgu9iNn1yM1PDcjD','tM8GDxnLCIbSB2DNzwqGAw4GEwv0lcb3ywL0Aw5NigzVCIbHDxrOihn0yxrLignOyw5Nzq','rxjYB3iGyxbWCM92Aw5Nig1HDgnOoIa','z2fTzu1Vzgu','rxjYB3iGzMv0y2HPBMCGB3v0C3rHBMrPBMCGBwf0y2HLCZO','iJ5szxnJAw5KifjLCg9YDdWVyNv0Dg9UpGOGicaGicaGicaGicaGicaG','BwvZC2fNzq','yM9YzgvYuMfKAxvZ','re9nq29UDgvUDeXVywrLza','igzYB20G','ugXLyxnLihbYB3zPzguGysbYzwfZB24GzM9YihjLAMvJDgLUzYb0AgLZig1HDgnOihjLCg9YDdO','D2HPDgu','Aw5MBW','D2LUBMvYswq','AxnoB25qyxj0AwnPCgfUDa','ywrK','t25SEsb0AguGD2LUBMvYig9MihrOzsbTyxrJAcbJyw4GCMvQzwn0igL0','igXHzgrLCI4','zdiTBw9Kzq','uxvLCNKGyNKGD2LUBMvYrw1HAwWGCMvZDwX0CZOG','mteYmtvTBM9stMi','BgLNAhrIB3GTz2fTzs1TB2rL','CgvUzgLUz01HDgnOzxnemW','zxHPC3rZ','q2HLy2TPBMCGAwyGDxnLCIbLEgLZDhmGAw4Gy29SBgvJDgLVBJOG','uMvQzwn0zwremW','mti4ng9uv2TiuW','B3v0C3rHBMrPBMCTBwf0y2HLCY1SAxn0','D2LUBMvYt2XKrwXV','CgXHEwvYC0qZ','tM8GD2LUBMvYigzVDw5KigzVCIb0AgLZig1HDgnO','BgLNAhrIB3GTC3vPy2LKzxm','CgXHEwvYC0r1B3m','y3jLyxrLrwXLBwvUDa','CMvHze9UBhK','Bg9ZzxjvC2vYBMfTzq','Aw5Uzxjive1m','mte3nJGZnuDeBKTxEG','Bg9ZzxjdB21Tzw50','B25bDxrOu3rHDgvdAgfUz2vK','uMvQzwn0zwremG','Bg9ZzxiTDxnLCM5HBwu','rMfPBgvKihrVihjLC2nPBMqGCMvWB3j0lIbqBgvHC2uGDhj5igfNywLUlG','B25ZDwjTAxq','uMvWB3j0igHHCYbIzwvUihn1y2nLC3nMDwXSEsb1CgrHDgvKlG','yxbWzw5Kq2HPBgq','rM91BMqGyNv0Dg9UCYbJB250ywLUzxi6','zgLZCgXHEq','B3v0C3rHBMrPBMCTBw9KywW','CMvTB3zLqxr0CMLIDxrL','tM8GCMvHC29UihbYB3zPzgvK','Bg9ZzxjfBwfPBa','CgXHEwvYC0qY','CMDIysGYntuSidi1nsWGmJu1lcaWlJa1kq','uMvQzwn0ie1HDgnO','y2XHC3noyw1L','zMv0y2HpDxrZDgfUzgLUz01HDgnOzxm','yxv0Ac13yxjUAw5N','yMfJA2DYB3vUzenVBg9Y','yxbWCM92zwq','D2LUBMvYrw1HAwW','y29UC29Szq','zM9UDfDLAwDODa','nJbiDgLlsha','CMvWB3j0lwXPz2H0yM94','D2fYBG','zdmTBw9Kzq','zwrPDfjLCg9YDa','zxjYB3i','u2HVD2LUzYbSAwDODgjVEa','Bg9N','yNv0Dg9U','Bg9ZzxiTy29TBwvUDa','tM8GCgvUzgLUzYbTyxrJAgvZigzVDw5KigzVCIb0AgLZihvZzxi','mtqWn0P3r1bSqG','BwfWugXHEwvK','y2fUy2vSlwvKAxqTyNrU','BwfYz2LUuMLNAhq','BgLNAhrIB3GTBwfW','BM9Uzq','ww91icG','rxjYB3iGBg9HzgLUzYbVChbVBMvUDhmGBgLZDdO','ww91CIbWBgf5zxiGChjVzMLSzsbUB3qGzM91BMq','uMvWB3j0igHHCYbIzwvUihn1y2nLC3nMDwXSEsbYzxnJAw5KzwqU','CMvWB3j0lwzVCM0','nhb4','rxjYB3iGzhvYAw5NihnPz24TAw4GAgfUzgXPBMC6','vw5RBM93BG','q2HLy2TPBMCGCMvWB3j0CYbMB3iGDxnLCJOG','BgLNAhrIB3GTy29TBwvUDa','zwXVuMf0Aw5N','C3vIz2fTzs10ExbL','tM8Gy29TBwvUDa','rxjYB3iGy2HLy2TPBMCGBM9UlxbHCNrPy2LWyw50ihn0yxr1CZO','lNjLC2nPBMqTCMvWB3j0lwj0BG','y2fSBa','pc9ZCgfUpGOGicaGicaGicaGicaGicaGphnWyw4Gy2XHC3m9iM1HDgnOlwrLDgfPBc1PDgvTiJ5ty29YztOGpYaTia','y3vYC29Y','C21VB3rO','i2qZmMyYzG','ywXS','zdeTBw9Kzq','BwfWlxbSyxLLza','D2LUBMvYlxnJB3jL','Cg9PBNrLCG','pha+tM8GB3v0C3rHBMrPBMCGBwf0y2HLCYbMB3vUzcbPBIb0AguGy3vYCMvUDcbNyw1Lig1VzguUpc9WpG','uMvQzwn0igj1DhrVBIbHzgrLzdO','tM90ihjLz2LZDgvYzwqGAw4GDgHPCYbSywrKzxi','ignVBgXLy3rPB246','yMXVy2S','CgvUzgLUz01HDgnOzxnemG','CgXHEwvYCW','zg9JCW','BgLNAhrIB3GTBg9Zzxi','Dw5KzwzPBMvK','q3vYCMvUDcb1C2vYigLUzM86','BgLNAhrIB3GTBg9ZzxiTC2nVCMu','y29UC3rYDwn0B3i','tM8GBwf0y2HLCYbMB3vUzcbIEsbLBwfPBcbLAxrOzxiSihrYEwLUzYb3Aw5UzxjvC2vYBMfTzq','ig1VDMvKihrVihbVC2L0Aw9Uia','yxv0AfDHCM5PBMC','Dgv4DenVBNrLBNq','Dg9eyxrL','Bg9Zzxjty29Yzq','pg9WDgLVBIb2ywX1zt0IiJ5tzwXLy3qGv2LUBMvYpc9VChrPB24+','DMLLDY1VDxrZDgfUzgLUzY1IDg4','uMvXDwLYzwqGzwXLBwvUDhmGBM90igzVDw5KigzVCIbSB2fKt3bWB25LBNrZtgLZDa','y3jLyxrLzef0','zM9YrwfJAa','C3vIz2fTzvr5Cgu','igzVCIbNyw1Lig1Vzgu6ia','Dgv4Da','ww91ig11C3qGyMuGBg9Nz2vKigLUihrVihjLAMvJDcbHig1HDgnO','lcbZD2L0y2HPBMCGDg8G','z2v0rwXLBwvUDej5swq','ywrKrxzLBNrmAxn0zw5LCG','tg9Zzxi','ig1HDgnOzxmGzM91BMq','zgLZywjSzwq','lNzPzxCTzgv0ywLSlwj0BG','C2HVDW','zgf0yxnLDa','x19WCM90B19F','CMvWB3j0rxjYB3i','mtjzD0PHCMi','zw1WDhK','CMvSB2fK','CgvUzgLUz01HDgnOzxm','y2XVBMvoB2rL','yM9Sza','n0z6vhPeAa','ugXLyxnLihnLBgvJDcbHBIbVChbVBMvUDa','CMvK','Cg9ZAxrPB24','CMvZzxq','B3b0Aw9U','CMvUzgvYt3v0C3rHBMrPBMDnyxrJAgvZ','y2XPy2S','ww91igfYzsbUB3qGCMvNAxn0zxjLzcbPBIb0AguG','u3rHBMrHCMqGtwf0y2G','C2HVD01HDgnOtgLNAhrIB3G','rwXLBwvUDhmGB2jQzwn0igLZig51BgWGB3iGDw5KzwzPBMvK','igXHzgrLCI4UlG','pg9WDgLVBIb2ywX1zt0IiJ5tzwXLy3qGt3bWB25LBNq8l29WDgLVBJ4','rxjYB3i6ifDPBM5LCIbKyxrHig5VDcbMB3vUzc4','ndqWmZfjyw50wxu','CMvWBgfJzunOAwXK','Bg9ZzxiTC2nVCMu','v2LUBMvYoIa','zw50CMLLCW','Aw5Zzxj0qMvMB3jL','CgfYzw50tM9Kzq','ChvZAa','CMvQzwn0lwj1DhrVBG','y2fUy2vSlwj1DhrVBG','C3vPy2LKzxm','mtuXnLvAtgH2sa','y29SB3i','C2L6zq','BM9UugfYDgLJAxbHBNrZ','D2LUBMvYvxnLCM5HBwu','rxjYB3iGCMvWB3j0Aw5NigDHBwuUifbSzwfZzsb0CNKGywDHAw4U','CMvTB3zL','yNjPyw4YywzaB3v0Bg9VAY5JB20','mtbWEa','DgHLBG','nZDcAhLyDM4','v2LUBMvYia','D2LUBMvYlxvZzxjUyw1L','zgf0ys1Pza','y3vYCMvUDfvZzxi','nZaYodHgEKfisLy','D2LUBMvYlwnVBw1LBNq','icHfte86ia','C3r5Bgu','ywn0AxzL','rMfPBgvKihrVihvWzgf0zsbYzxbVCNqUifbSzwfZzsb0CNKGywDHAw4U','rxjYB3iGCMvQzwn0Aw5Nig1HDgnOoG','z2v0qxr0CMLIDxrL','jYbUB3qGzM91BMqGAw4GDgHLierptq','twf0y2GGCMvWB3j0zwqGAw4G','tM8GCg9ZAxrPB24Gy2HHBMDLig5LzwrLzdSGD2LUBMvYigLZigfSCMvHzhKGywjVDMuGDgHLigXVC2vYlG','DgfYz2v0','DMfSDwu','CMvWB3j0lwvYCM9Y','CMvWB3j0rM9YBq','rxjYB3iGC3vIBwL0DgLUzYbYzxbVCNq6','Bg9ZzxjtDwLJAwrLCW','DhjHy2u','zNjVBq','uMvWB3j0igzVCM0GCMvZzxq','zMLUza','DgfIBgu','DwLK','zgf0ys1LzgL0lwLK','CxvLCNLtzwXLy3rVCG','Dg9tDhjPBMC','ChjLDMvUDerLzMf1Bhq','pc9OmZ4kicaGicaGicaGicaGpgrPDIbJBgfZCZ0IBwf0y2GTzgv0ywLSCYi+cIaGicaGicaGicaGicaGica8C3bHBIbJBgfZCZ0IBwf0y2GTzgv0ywLSlwL0zw0IpK1HCdOG','zw1HAwW','Bg9Zzxjjza','y2XHC3nmAxn0','nJe1otb4D3rAEM4','rxjYB3iGDxbKyxrPBMCGCMvWB3j0oG','DxnLCM5HBwu','rxjYB3iGChjVy2vZC2LUzYbWBgf5zxiGzgf0ytO','nty3nZeXvw5ZENv0'];a48c=function(){return aA;};return a48c();}document['addEventListener'](a48K(0x22c),async()=>{const L=a48K,a={'authWarning':document['getElementById'](L(0x25d)),'reportForm':document['getElementById'](L(0x278)),'winnerUsername':document[L(0x2aa)]('winner-username'),'loserUsername':document[L(0x2aa)](L(0x24d)),'loserScore':document[L(0x2aa)](L(0x1e1)),'suicides':document[L(0x2aa)](L(0x1e9)),'mapPlayed':document[L(0x2aa)](L(0x28a)),'loserComment':document[L(0x2aa)]('loser-comment'),'reportError':document[L(0x2aa)](L(0x206)),'reportLightbox':document['getElementById'](L(0x264))};Object[L(0x1e3)](a)['forEach'](([f,g])=>{const M=L;!g&&console[M(0x265)]('Element\x20\x27'+f+M(0x201));});const b=document['getElementById'](L(0x289)),c=document['getElementById'](L(0x236)),d=document[L(0x2aa)](L(0x266));b[L(0x2ab)]('click',()=>{const N=L;e('D1'),b[N(0x217)][N(0x233)]('active'),c[N(0x217)][N(0x1f0)](N(0x1fd)),d['classList'][N(0x1f0)](N(0x1fd));}),c['addEventListener']('click',()=>{const O=L;e('D2'),c['classList']['add'](O(0x1fd)),b['classList']['remove'](O(0x1fd)),d['classList']['remove'](O(0x1fd));}),d['addEventListener']('click',()=>{const P=L;e('D3'),d['classList']['add']('active'),b[P(0x217)]['remove']('active'),c[P(0x217)][P(0x1f0)]('active');});function e(f){const Q=L;currentGameMode=f,console['log']('Game\x20mode\x20set\x20to:\x20'+currentGameMode),auth[Q(0x1f8)]&&checkUserInLadderAndLoadOpponents(auth['currentUser'][Q(0x20f)]);}setupAuthStateListener(a),setupReportForm(a),auth[L(0x1f8)]?(console[L(0x26a)]('User\x20already\x20logged\x20in,\x20checking\x20D1\x20ladder\x20status'),checkUserInLadderAndLoadOpponents(auth['currentUser']['uid'])):console['log'](L(0x225));});function setupAuthStateListener(a){onAuthStateChanged(auth,async b=>{b?handleUserSignedIn(b,a):handleUserSignedOut(a);});}async function handleUserSignedIn(a,b){const R=a48K;if(!b){console['error'](R(0x1db));return;}currentUserEmail=a[R(0x215)]||null;const c=a[R(0x20f)];try{const d=doc(db,R(0x1ed),c);try{const i=await getDoc(d);console['log']('Non-participant\x20check:',{'exists':i[R(0x23b)](),'data':i[R(0x23b)]()?i[R(0x223)]():null});if(i[R(0x23b)]()&&i[R(0x223)]()[R(0x232)]===!![]){b[R(0x29c)]&&(b[R(0x29c)][R(0x1fc)]['display']='block',b[R(0x29c)][R(0x29d)]='Non-participants\x20cannot\x20report\x20games.');b['reportForm']&&(b['reportForm']['style'][R(0x253)]=R(0x273));return;}}catch(j){console['warn'](R(0x281),j);}const e=[R(0x293),R(0x258),'playersD3',R(0x244),'playersCTF'];let f=![],g='';for(const k of e){try{const l=doc(db,k,c),m=await getDoc(l);if(m['exists']()){f=!![],g=m[R(0x223)]()['username'],console[R(0x26a)]('User\x20found\x20in\x20collection\x20'+k+'\x20with\x20username:\x20'+g);if(k===R(0x293)&&currentGameMode!=='D1'){currentGameMode='D1';const n=document[R(0x2aa)]('d1-mode'),o=document['getElementById']('d2-mode'),p=document[R(0x2aa)]('d3-mode');n[R(0x217)]['add'](R(0x1fd)),o[R(0x217)][R(0x1f0)](R(0x1fd)),p['classList']['remove']('active');}else{if(k==='playersD2'&&currentGameMode!=='D2'){currentGameMode='D2';const q=document['getElementById'](R(0x289)),r=document['getElementById']('d2-mode'),s=document['getElementById'](R(0x266));r['classList'][R(0x233)]('active'),q['classList']['remove'](R(0x1fd)),s['classList'][R(0x1f0)](R(0x1fd));}}break;}}catch(t){console[R(0x265)]('Error\x20checking\x20'+k+R(0x290),t);}}if(!f){b[R(0x29c)]&&(b[R(0x29c)][R(0x1fc)]['display']=R(0x291),b['authWarning'][R(0x29d)]='You\x20are\x20not\x20registered\x20in\x20any\x20ladder.');b['reportForm']&&(b['reportForm'][R(0x1fc)][R(0x253)]='none');return;}const h=await checkUserInLadderAndLoadOpponents(c);if(!h){console[R(0x265)]('User\x20is\x20not\x20in\x20the\x20'+currentGameMode+'\x20ladder.\x20Checking\x20other\x20ladders.');for(const u of['players','playersD2','playersD3']){if(u===(currentGameMode==='D1'?'players':currentGameMode==='D2'?R(0x258):R(0x241)))continue;const v=doc(db,u,c);try{const w=await getDoc(v);if(w[R(0x23b)]()){const x=u==='players'?'D1':u===R(0x258)?'D2':'D3';console['log']('User\x20found\x20in\x20'+u+R(0x2a9)+x+'\x20mode');const y=document['getElementById']('d1-mode'),z=document['getElementById']('d2-mode'),A=document['getElementById'](R(0x266));if(x==='D1')y[R(0x217)][R(0x233)](R(0x1fd)),z['classList']['remove']('active'),A['classList'][R(0x1f0)]('active');else x==='D2'?(z[R(0x217)][R(0x233)]('active'),y['classList']['remove'](R(0x1fd)),A['classList'][R(0x1f0)]('active')):(A[R(0x217)][R(0x233)]('active'),y['classList'][R(0x1f0)]('active'),z[R(0x217)][R(0x1f0)]('active'));currentGameMode=x,await checkUserInLadderAndLoadOpponents(c);break;}}catch(B){console['warn'](R(0x220)+u+':',B);}}}}catch(C){console[R(0x268)](R(0x27a),C);}}function handleUserSignedOut(a){const S=a48K;a[S(0x29c)]['style']['display']=S(0x291),a['reportForm'][S(0x1fc)][S(0x253)]=S(0x273),currentUserEmail=null;}async function updateUserDisplay(a,b){const T=a48K,c=collection(db,'players'),d=query(c,where(T(0x215),'==',a)),e=await getDocs(d);if(!e['empty']){const f=e['docs'][0x0][T(0x223)]()['username'];b[T(0x247)][T(0x29d)]=f;}}async function populateWinnerDropdown(a){const U=a48K;try{const b=collection(db,U(0x293)),c=await getDocs(b);a[U(0x248)]=U(0x2a0),!c[U(0x2b5)]&&c['forEach'](d=>{const V=U,e=d['data']();if(e['email']!==currentUserEmail){const f=document[V(0x245)](V(0x1d5));f['value']=e[V(0x215)],f[V(0x29d)]=e[V(0x21a)],a[V(0x251)](f);}});}catch(d){console['error']('Error\x20populating\x20winner\x20dropdown:',d);throw d;}}function a48d(a,b){const c=a48c();return a48d=function(d,e){d=d-0x1d0;let f=c[d];if(a48d['lBrLgT']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a48d['DNszHP']=g,a=arguments,a48d['lBrLgT']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a48d['DNszHP'](f),a[i]=f):f=j,f;},a48d(a,b);}function setupReportForm(a){const W=a48K;if(!a['reportForm'])return;a[W(0x207)][W(0x2ab)]('submit',async b=>{const X=W;b['preventDefault']();try{await submitReport(a),a[X(0x207)][X(0x1d4)](),alert('Game\x20reported\x20successfully.');}catch(c){console[X(0x268)]('Error\x20submitting\x20report:',c),a[X(0x2b3)]['textContent']=X(0x1ef);}});}async function submitReport(a){const Y=a48K,b=currentGameMode==='D1'?Y(0x2b7):currentGameMode==='D2'?Y(0x292):Y(0x23a),c=collection(db,b),d=doc(c);try{const e=auth[Y(0x1f8)];if(!e)throw new Error('User\x20not\x20authenticated');const f=e['uid'],g=currentGameMode==='D1'?Y(0x293):currentGameMode==='D2'?'playersD2':Y(0x241),h=await getDoc(doc(db,g,f));if(!h['exists']())throw new Error(Y(0x276));const i=document[Y(0x2aa)](Y(0x27f)),j=a['winnerUsername'][Y(0x205)];if(!j)throw new Error(Y(0x1d1));const k=query(collection(db,g),where(Y(0x21a),'==',j)),l=await getDocs(k);if(l[Y(0x2b5)])throw new Error('Selected\x20opponent\x20not\x20found');const m=l['docs'][0x0][Y(0x223)](),n=l['docs'][0x0]['id'],o={'matchId':d['id'],'loserUsername':h['data']()[Y(0x21a)],'loserId':f,'winnerUsername':m[Y(0x21a)],'winnerId':n,'loserScore':a['loserScore'][Y(0x205)],'loserSuicides':a['suicides'][Y(0x205)],'mapPlayed':a[Y(0x26f)]['value'],'loserComment':a[Y(0x24a)]['value'],'subgameType':i?i['value']:'','gameMode':currentGameMode,'approved':![],'createdAt':serverTimestamp(),'winnerOldElo':m['eloRating']||null,'losersOldElo':h[Y(0x223)]()[Y(0x27e)]||null};await setDoc(d,o),console[Y(0x26a)](Y(0x202)+b+Y(0x21d)+d['id']),a[Y(0x2b3)][Y(0x29d)]='Game\x20reported\x20successfully!',a['reportError']['style']['color']='green',updatePendingMatchNotification();}catch(p){console['error'](Y(0x208),p),a[Y(0x2b3)]['textContent']='Error:\x20'+p['message'],a['reportError'][Y(0x1fc)][Y(0x1eb)]='red';throw p;}}async function checkForOutstandingReports(a,b,c=null){const Z=a48K;console['log'](Z(0x27c)+a+Z(0x221)+(c||'default\x20collection'));const d=c||(currentGameMode==='D1'?Z(0x2b7):currentGameMode==='D2'?Z(0x292):Z(0x23a));console[Z(0x26a)](Z(0x21f)+d);try{const e=auth['currentUser'];if(!e){console['log']('No\x20authenticated\x20user\x20found');return;}const f=e['uid'],g=collection(db,d),h=query(g,where(Z(0x231),'==',f),where(Z(0x25f),'==',![]));let i=await getDocs(h);console[Z(0x26a)]('Query\x20by\x20winnerId\x20results:\x20'+i[Z(0x1ec)]+'\x20matches\x20found');if(i['empty']&&e[Z(0x215)]){console['log']('No\x20matches\x20found\x20by\x20winnerId,\x20trying\x20winnerEmail');const j=query(g,where(Z(0x260),'==',e['email']),where('approved','==',![]));i=await getDocs(j),console['log'](Z(0x237)+i[Z(0x1ec)]+Z(0x2ad));}if(i['empty']){console[Z(0x26a)](Z(0x29a));const k=currentGameMode==='D1'?'players':'playersD2',l=await getDoc(doc(db,k,f));if(l['exists']()&&l[Z(0x223)]()['username']){const m=l['data']()[Z(0x21a)],n=query(g,where('winnerUsername','==',m),where(Z(0x25f),'==',![]));i=await getDocs(n),console[Z(0x26a)]('Query\x20by\x20winnerUsername\x20results:\x20'+i['size']+Z(0x2ad));}}if(!i['empty']){const o=i['docs'][0x0]['data']();return console['log']('Found\x20pending\x20match:',o),o['id']=i[Z(0x294)][0x0]['id'],autoFillReportForm(o),updateNotificationDot(!![]),!![];}else return console['log'](Z(0x26d)),updateNotificationDot(![]),![];}catch(p){console['error']('Error\x20checking\x20outstanding\x20reports:',p);}}function autoFillReportForm(a){const a0=a48K;console[a0(0x26a)]('Report\x20Data\x20in\x20autoFillReportForm:',a);if(a){const b=parseInt(a['loserScore']||'0'),c=b<0x12?0x14:b+0x2,d=a[a0(0x227)]||currentGameMode,e=d==='D1'?'players':d==='D2'?'playersD2':a0(0x241);console['log']('Using\x20players\x20collection:\x20'+e+a0(0x2a6)+d);let f;a[a0(0x231)]?f=getDoc(doc(db,e,a['winnerId']))['then'](h=>h[a0(0x23b)]()?{'id':h['id'],'data':h['data']()}:null):f=getDocs(query(collection(db,e),where('username','==',a['winnerUsername'])))[a0(0x1f3)](h=>!h[a0(0x2b5)]?{'id':h['docs'][0x0]['id'],'data':h[a0(0x294)][0x0][a0(0x223)]()}:null);let g;a[a0(0x216)]?g=getDoc(doc(db,e,a['loserId']))['then'](h=>h[a0(0x23b)]()?{'id':h['id'],'data':h['data']()}:null):g=getDocs(query(collection(db,e),where('username','==',a[a0(0x247)])))[a0(0x1f3)](h=>!h['empty']?{'id':h['docs'][0x0]['id'],'data':h['docs'][0x0][a0(0x223)]()}:null),Promise[a0(0x288)]([f,g])[a0(0x1f3)](([h,i])=>{const a1=a0;if(!h){console['error'](a1(0x242)),alert(a1(0x1de));return;}if(!i){console[a1(0x268)]('No\x20loser\x20found\x20for\x20this\x20match'),alert('Error:\x20Loser\x20data\x20not\x20found.');return;}const j=a[a1(0x240)]!=null?a['winnerOldElo']:h[a1(0x223)]['eloRating'],k=a['losersOldElo']!=null?a['losersOldElo']:i[a1(0x223)][a1(0x27e)],l=h['data'][a1(0x21a)],m=i['data'][a1(0x21a)];console[a1(0x26a)](a1(0x1e2)+l+a1(0x1fb)+j+'),\x20Loser:\x20'+m+a1(0x1fb)+k+')');const n=document['getElementById']('report-lightbox');if(!n){console[a1(0x268)]('Lightbox\x20element\x20not\x20found');return;}document[a1(0x2aa)]('lightbox-winner')['textContent']=l,document['getElementById']('lightbox-loser')[a1(0x29d)]=m,document['getElementById']('lightbox-loser-score')['textContent']=a[a1(0x29f)]||'0',document[a1(0x2aa)](a1(0x243))[a1(0x29d)]=a['loserSuicides']||'0',document[a1(0x2aa)]('lightbox-map')[a1(0x29d)]=a[a1(0x26f)]||'Not\x20specified',document[a1(0x2aa)](a1(0x27d))['textContent']=a[a1(0x24a)]||'No\x20comment',document[a1(0x2aa)]('lightbox-subgame')['textContent']=a[a1(0x2a5)]||a1(0x1d9);const o=document[a1(0x2aa)]('winner-score');o&&(o['value']=c,o[a1(0x246)]=!![],o[a1(0x1fc)][a1(0x25e)]=a1(0x259));showLightbox();const p=document[a1(0x211)]('.lightbox-buttons');if(p){console[a1(0x26a)](a1(0x252),p);const t=document['getElementById'](a1(0x1e7));t&&t[a1(0x1f0)]();const u=document['createElement']('button');u['id']='reject-button',u[a1(0x25b)]='button\x20danger-button',u['textContent']=a1(0x25a),u[a1(0x1fc)]['backgroundColor']=a1(0x287),u['style'][a1(0x1eb)]=a1(0x22f),u[a1(0x1fc)]['marginRight']=a1(0x1f2),u['style']['padding']='8px\x2016px',u[a1(0x1fc)]['border']='none',u['style'][a1(0x22b)]=a1(0x279),u['style'][a1(0x285)]=a1(0x28c),u['style'][a1(0x262)]=a1(0x2b9),p['prepend'](u),console[a1(0x26a)](a1(0x28e),u);}const q=document[a1(0x2aa)]('approve-button'),r=document[a1(0x2aa)](a1(0x1e7)),s=document[a1(0x2aa)](a1(0x1e8));if(q){const v=q['cloneNode'](!![]);q['parentNode']['replaceChild'](v,q),v['addEventListener']('click',async function(){const a2=a1;try{const w=document[a2(0x2aa)](a2(0x28b))['value'],x=document[a2(0x2aa)]('winner-suicides')[a2(0x205)]||'0',y=document['getElementById'](a2(0x1fa))['value']||'';console['log'](a2(0x297),{'uid':auth['currentUser']?.[a2(0x20f)],'email':auth[a2(0x1f8)]?.['email'],'isAdmin':auth[a2(0x1f8)]?.['email']==='admin@ladder.com'||auth[a2(0x1f8)]?.[a2(0x215)]===a2(0x1f1)});const z=a['gameMode']||currentGameMode;if(z==='D3')await approveReportD3(a['id'],w,x,y);else z==='D2'?await approveReportD2(a['id'],w,x,y):await approveReport(a['id'],w,x,y);document['getElementById'](a2(0x264))['style']['display']='none',alert('Match\x20approved\x20successfully'),updatePendingMatchNotification(),location[a2(0x2b6)]();const A=z==='D1'?a2(0x293):a2(0x258),B=doc(db,A,h['id']),C=doc(db,A,i['id']),[D,E]=await Promise[a2(0x288)]([getDoc(B),getDoc(C)]);if(D[a2(0x23b)]()&&E[a2(0x23b)]()){const F=D[a2(0x223)](),G=E[a2(0x223)]();F['position']>G['position']?(await updateDoc(B,{'position':G[a2(0x1d3)]}),console['log'](a2(0x1f5)+F[a2(0x21a)]+a2(0x29b)+G['position'])):console['log'](a2(0x203));}}catch(H){console[a2(0x268)]('Error\x20approving\x20report:',H),alert(a2(0x226)+H[a2(0x22a)]);}});}if(r){const w=r[a1(0x2b8)](!![]);r['parentNode'][a1(0x1e0)](w,r),w['addEventListener'](a1(0x1d7),async function(){const a3=a1;try{const x=prompt(a3(0x22e),'');if(x===null)return;await rejectReport(a['id'],x),hideLightbox(),alert('Match\x20report\x20rejected\x20successfully'),updatePendingMatchNotification(),location[a3(0x2b6)]();}catch(y){console['error']('Error\x20rejecting\x20report:',y),alert('Error\x20rejecting\x20match:\x20'+y['message']);}});}if(s){const x=s[a1(0x2b8)](!![]);s['parentNode']['replaceChild'](x,s),x['addEventListener'](a1(0x1d7),hideLightbox);}})['catch'](h=>{const a4=a0;console[a4(0x268)](a4(0x21b),h),alert('Error\x20fetching\x20player\x20data.\x20Please\x20try\x20again.');});}}function showLightbox(){const a5=a48K;console['log'](a5(0x269));const a=document[a5(0x2aa)](a5(0x264));if(!a){console[a5(0x268)]('Lightbox\x20element\x20not\x20found');return;}a[a5(0x217)]['add']('show');}function hideLightbox(){const a6=a48K,a=document[a6(0x2aa)](a6(0x264));a[a6(0x217)]['remove'](a6(0x2b0));}async function rejectReport(a,b){const a7=a48K;try{const c=currentGameMode==='D1'?a7(0x2b7):currentGameMode==='D2'?'pendingMatchesD2':a7(0x23a),d=currentGameMode==='D1'?'RejectedD1':currentGameMode==='D2'?a7(0x24c):a7(0x23d);console['log']('Rejecting\x20match\x20'+a+a7(0x22d)+c+'\x20to\x20'+d);const e=auth['currentUser'];if(!e)throw new Error(a7(0x2a8));const f=doc(db,c,a),g=await getDoc(f);if(!g[a7(0x23b)]())throw new Error('Match\x20report\x20not\x20found');const h=g['data'](),i=h['winnerId']&&h['winnerId']===e[a7(0x20f)]||h['winnerEmail']&&h[a7(0x260)]===e[a7(0x215)]||h[a7(0x1ee)]&&h[a7(0x1ee)]===await getUsernameFromId(e['uid']);if(!i)throw new Error(a7(0x234));const j={...h,'rejectedAt':serverTimestamp(),'rejectedBy':e['uid'],'rejectionReason':b||a7(0x256),'originalDocumentId':a},k=doc(collection(db,d));return await setDoc(k,j),await deleteDoc(f),console[a7(0x26a)]('Match\x20'+a+'\x20rejected\x20successfully'),updatePendingMatchNotification(),!![];}catch(l){console[a7(0x268)](a7(0x1ff),l);throw l;}}async function getUsernameFromId(a){const a8=a48K,b=await getDoc(doc(db,'players',a));if(b['exists']())return b['data']()[a8(0x21a)];const c=await getDoc(doc(db,'playersD2',a));if(c[a8(0x23b)]())return c['data']()['username'];return null;}async function loadOpponentsList(a){const a9=a48K;try{const b=document['getElementById'](a9(0x206)),c=document[a9(0x2aa)](a9(0x24d)),d=document[a9(0x2aa)]('winner-username');if(!b||!c||!d){console['error'](a9(0x2a2));return;}const e=currentGameMode==='D1'?'players':currentGameMode==='D2'?'playersD2':a9(0x241);console[a9(0x26a)]('Loading\x20opponents\x20from\x20collection:\x20'+e);const f=await getDoc(doc(db,e,a));if(!f[a9(0x23b)]()){b['textContent']='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+a9(0x235),b['style']['color']='red',c[a9(0x29d)]=a9(0x28f),d[a9(0x2ae)]=!![];return;}const g=f[a9(0x223)](),h=g[a9(0x21a)];c['textContent']=a9(0x274)+h+')',b[a9(0x29d)]='',d['disabled']=![];const i=collection(db,e),j=await getDocs(i);if(j[a9(0x2b5)]){console['log']('No\x20opponents\x20available');return;}d['innerHTML']=a9(0x1dd),j['forEach'](k=>{const aa=a9,l=k[aa(0x223)]();if(k['id']!==a){const m=document[aa(0x245)](aa(0x1d5));m['value']=l['username'],m[aa(0x29d)]=l[aa(0x21a)],m[aa(0x2b1)][aa(0x20f)]=k['id'],d['appendChild'](m);}});}catch(k){console[a9(0x268)](a9(0x275),k),document['getElementById'](a9(0x206))[a9(0x29d)]='Error\x20loading\x20opponents.\x20Please\x20try\x20again\x20later.',document['getElementById'](a9(0x206))['style'][a9(0x1eb)]=a9(0x1d2);}}async function checkUserInLadderAndLoadOpponents(a){const ab=a48K;try{const b=document['getElementById'](ab(0x206)),c=document[ab(0x2aa)](ab(0x24d)),d=document['getElementById'](ab(0x1f6)),e=document['getElementById']('report-form'),f=document['getElementById'](ab(0x25d));b['textContent']='Checking\x20if\x20you\x20are\x20registered\x20in\x20'+currentGameMode+ab(0x1dc),b[ab(0x1fc)][ab(0x1eb)]='white';const g=currentGameMode==='D1'?'players':currentGameMode==='D2'?ab(0x258):ab(0x241);console['log'](ab(0x23c)+g);const h=await getDoc(doc(db,g,a));if(!h['exists']())return b[ab(0x29d)]=ab(0x1d8)+currentGameMode+ab(0x235),b['style']['color']=ab(0x1d2),c['textContent']='Not\x20registered\x20in\x20this\x20ladder',d[ab(0x2ae)]=!![],d[ab(0x248)]=ab(0x1dd),f[ab(0x1fc)][ab(0x253)]=ab(0x291),f['textContent']='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+'\x20ladder.',![];b[ab(0x29d)]='',f[ab(0x1fc)]['display']='none';const i=h[ab(0x223)](),j=i[ab(0x21a)];c['textContent']=ab(0x274)+j+')',d[ab(0x2ae)]=![],e['style'][ab(0x253)]=ab(0x291),await loadOpponentsList(a);const k=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':ab(0x23a);return await checkForOutstandingReports(i[ab(0x215)],null,k),!![];}catch(l){return console[ab(0x268)](ab(0x222),l),document[ab(0x2aa)](ab(0x206))['textContent']='Error\x20checking\x20ladder\x20membership.\x20Please\x20try\x20again\x20later.',document[ab(0x2aa)]('report-error')['style'][ab(0x1eb)]=ab(0x1d2),![];}}export async function fetchOutstandingMatches(){const ac=a48K,a=auth['currentUser'];if(!a)return[];try{const b=[],c=currentGameMode==='D1'?ac(0x2b7):currentGameMode==='D2'?'pendingMatchesD2':ac(0x23a),d=collection(db,c),e=[query(d,where('loserId','==',a['uid']),where('approved','==',![])),query(d,where(ac(0x257),'==',a[ac(0x215)]),where('approved','==',![])),query(d,where('winnerId','==',a['uid']),where(ac(0x25f),'==',![])),query(d,where(ac(0x260),'==',a[ac(0x215)]),where(ac(0x25f),'==',![]))],f=currentGameMode==='D1'?'players':currentGameMode==='D2'?'playersD2':ac(0x241),g=await getDocs(query(collection(db,f),where('email','==',a[ac(0x215)])));let h=null;!g['empty']&&(h=g[ac(0x294)][0x0][ac(0x223)]()[ac(0x21a)],h&&e[ac(0x1e6)](query(d,where(ac(0x247),'==',h),where('approved','==',![])),query(d,where(ac(0x1ee),'==',h),where(ac(0x25f),'==',![]))));for(const i of e){const j=await getDocs(i);!j[ac(0x2b5)]&&j['forEach'](k=>{!b['some'](l=>l['id']===k['id'])&&b['push']({'id':k['id'],...k['data']()});});}return b['sort']((k,l)=>{const ad=ac,m=k['createdAt']?.['toDate']()||new Date(0x0),n=l[ad(0x2a3)]?.[ad(0x29e)]()||new Date(0x0);return n-m;}),outstandingMatches=b,b;}catch(k){return console[ac(0x268)](ac(0x228),k),[];}}export function renderOutstandingMatches(){const ae=a48K,a=document[ae(0x2aa)](ae(0x23f));if(outstandingMatches['length']===0x0){a[ae(0x248)]=ae(0x28d);return;}let b='';const c=auth[ae(0x1f8)];if(!c)return;outstandingMatches['forEach'](d=>{const af=ae,e=d[af(0x2a3)]?.[af(0x29e)]()?d['createdAt'][af(0x29e)]()['toLocaleDateString']():'Unknown\x20date',f=d[af(0x257)]===c['email']||d['loserId']===c[af(0x20f)];b+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-item\x22\x20data-id=\x22'+d['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>'+(d[af(0x1ee)]||'Winner')+'\x20vs\x20'+(d['loserUsername']||af(0x2ac))+af(0x214)+(d[af(0x26f)]||af(0x27b))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Date:\x20'+e+af(0x284)+(d[af(0x29f)]||'0')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20view-detail-btn\x22\x20data-id=\x22'+d['id']+'\x22>View\x20Details</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(f?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20edit-report-btn\x22\x20data-id=\x22'+d['id']+'\x22>Edit\x20Report</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20danger-button\x20rescind-report-btn\x22\x20data-id=\x22'+d['id']+af(0x229):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),a[ae(0x248)]=b,document['querySelectorAll'](ae(0x2af))['forEach'](d=>{const ag=ae;d['addEventListener'](ag(0x1d7),function(){const ah=ag,e=this[ah(0x200)](ah(0x1f7)),f=outstandingMatches[ah(0x20d)](g=>g['id']===e);document[ah(0x2aa)](ah(0x254))['classList'][ah(0x1f0)](ah(0x2b0)),showMatchLightbox(f);});}),document['querySelectorAll']('.edit-report-btn')[ae(0x2a4)](d=>{const ai=ae;d['addEventListener'](ai(0x1d7),function(){const aj=ai,e=this['getAttribute']('data-id'),f=outstandingMatches['find'](g=>g['id']===e);document['getElementById']('outstanding-modal')[aj(0x217)][aj(0x1f0)]('show'),editReport(f);});}),document['querySelectorAll'](ae(0x282))[ae(0x2a4)](d=>{const ak=ae;d['addEventListener'](ak(0x1d7),function(){const al=ak,e=this[al(0x200)](al(0x1f7)),f=outstandingMatches['find'](g=>g['id']===e);confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20rescind\x20this\x20match\x20report\x20against\x20'+(f['winnerUsername']||'opponent')+'?')&&rescindReport(f);});});}export async function rescindReport(a){const am=a48K;try{const b=currentGameMode==='D1'?am(0x2b7):currentGameMode==='D2'?am(0x292):am(0x23a),c=doc(db,b,a['id']);await deleteDoc(c),alert(am(0x277)),await fetchOutstandingMatches(),renderOutstandingMatches();}catch(d){console['error']('Error\x20rescinding\x20report:',d),alert(am(0x24e));}}export function editReport(a){const an=a48K,b=document[an(0x2aa)]('report-form'),c=document['getElementById']('loser-score'),d=document[an(0x2aa)](an(0x1e9)),e=document[an(0x2aa)]('map-played'),f=document['getElementById']('loser-comment');b[an(0x1fc)][an(0x253)]='block',document['getElementById']('auth-warning')['style']['display']=an(0x273);if(a['loserScore'])c[an(0x205)]=a[an(0x29f)];if(a['loserSuicides'])d['value']=a['loserSuicides'];if(a[an(0x26f)])e[an(0x205)]=a[an(0x26f)];if(a['loserComment'])f[an(0x205)]=a[an(0x24a)];const g=document[an(0x2aa)](an(0x1f6));g&&a[an(0x1ee)]&&Array[an(0x20b)](g['options'])[an(0x2a4)](j=>{const ao=an;j[ao(0x2a7)]===a['winnerUsername']&&(j['selected']=!![]);});const h=document[an(0x2aa)](an(0x27f));h&&a['subgameType']&&(h[an(0x205)]=a['subgameType']);b['setAttribute']('data-edit-id',a['id']);const i=b[an(0x211)](an(0x224));i[an(0x29d)]='Update\x20Report';if(!document[an(0x2aa)]('cancel-edit-btn')){const j=document['createElement'](an(0x26b));j['id']='cancel-edit-btn',j[an(0x25b)]='btn',j['style'][an(0x25e)]='#6a1b9a',j['style'][an(0x271)]=an(0x1f2),j[an(0x29d)]='Cancel\x20Edit',j['type']=an(0x26b),i[an(0x1e5)][an(0x1e4)](j,i),j[an(0x2ab)]('click',function(k){const ap=an;k[ap(0x213)](),b['reset'](),b['removeAttribute'](ap(0x210)),i[ap(0x29d)]='Report\x20Game',this[ap(0x1f0)](),initReportForm();});}b['scrollIntoView']({'behavior':an(0x286)});}function initReportForm(){const aq=a48K;console['log'](aq(0x20c));}export function showMatchLightbox(a){const ar=a48K,b=document['getElementById']('report-lightbox');document[ar(0x2aa)](ar(0x239))['textContent']=currentGameMode,document[ar(0x2aa)]('lightbox-winner')['textContent']=a[ar(0x1ee)]||'Unknown',document[ar(0x2aa)](ar(0x295))['textContent']=a[ar(0x247)]||ar(0x27b),document[ar(0x2aa)](ar(0x298))['textContent']=a[ar(0x29f)]||'0',document['getElementById']('lightbox-suicides')['textContent']=a[ar(0x209)]||'0',document[ar(0x2aa)](ar(0x272))['textContent']=a['mapPlayed']||ar(0x27b),document[ar(0x2aa)]('lightbox-comment')[ar(0x29d)]=a['loserComment']||ar(0x280),document['getElementById']('lightbox-subgame')[ar(0x29d)]=a['subgameType']||'Standard\x20Match',b[ar(0x217)]['add']('show');}export function setCurrentGameMode(a){currentGameMode=a;}export function initOutstandingMatches(){document['addEventListener']('DOMContentLoaded',()=>{const as=a48d,a=document['getElementById'](as(0x2a1)),b=document['getElementById']('view-outstanding-container'),c=document[as(0x2aa)]('outstanding-modal'),d=document[as(0x2aa)]('close-outstanding-btn'),e=document['getElementById'](as(0x1e8)),f=document['getElementById'](as(0x289)),g=document[as(0x2aa)]('d2-mode'),h=document[as(0x2aa)](as(0x266));if(f)f[as(0x2ab)](as(0x1d7),()=>{setCurrentGameMode('D1');});if(g)g['addEventListener'](as(0x1d7),()=>{setCurrentGameMode('D2');});if(h)h[as(0x2ab)](as(0x1d7),()=>{setCurrentGameMode('D3');});auth[as(0x24b)](k=>{const at=as;k?b[at(0x1fc)][at(0x253)]='block':b['style']['display']='none';});a&&a['addEventListener'](as(0x1d7),async()=>{const au=as;c['classList']['add'](au(0x2b0)),document['getElementById']('outstanding-matches-list')['innerHTML']='<div\x20class=\x22loading\x22>Loading\x20your\x20matches...</div>',await fetchOutstandingMatches(),renderOutstandingMatches();});d&&d[as(0x2ab)](as(0x1d7),()=>{const av=as;c[av(0x217)]['remove']('show');});e&&e['addEventListener']('click',()=>{const aw=as;document[aw(0x2aa)](aw(0x264))['classList'][aw(0x1f0)]('show');});c&&c[as(0x2ab)](as(0x1d7),k=>{const ax=as;k[ax(0x204)]===c&&c['classList'][ax(0x1f0)](ax(0x2b0));});const i=document[as(0x2aa)]('report-lightbox');i&&i[as(0x2ab)](as(0x1d7),k=>{const ay=as;k['target']===i&&i[ay(0x217)][ay(0x1f0)](ay(0x2b0));});const j=document[as(0x2aa)]('report-form');if(j){const k=j['onsubmit'];j[as(0x24f)]=async function(l){const az=as;l[az(0x213)]();const m=this[az(0x200)]('data-edit-id');if(m)try{const n=document[az(0x2aa)](az(0x1e1))[az(0x205)],o=document[az(0x2aa)]('suicides')[az(0x205)],p=document['getElementById']('map-played')['value'],q=document['getElementById'](az(0x26c))[az(0x205)],r=currentGameMode==='D1'?az(0x2b7):currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3',s=doc(db,r,m);await updateDoc(s,{'loserScore':Number(n),'loserSuicides':Number(o),'mapPlayed':p,'loserComment':q,'subgameType':document['getElementById'](az(0x27f))[az(0x205)],'updatedAt':new Date()}),alert(az(0x250)),this[az(0x1d4)](),this[az(0x255)]('data-edit-id');const t=this['querySelector'](az(0x224));t['textContent']='Report\x20Game';const u=document['getElementById'](az(0x270));if(u)u['remove']();}catch(v){console[az(0x268)](az(0x219),v),document['getElementById']('report-error')[az(0x29d)]=az(0x1fe);}else typeof k==='function'&&k[az(0x283)](this,l);};}});}typeof window!==a48K(0x296)&&(window[a48K(0x1da)]=showMatchLightbox,window[a48K(0x267)]=editReport,window['rescindReport']=rescindReport,window[a48K(0x25c)]=fetchOutstandingMatches,window[a48K(0x1d6)]=renderOutstandingMatches);initOutstandingMatches();