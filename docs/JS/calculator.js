const a0_0x1cab7d=a0_0x8be3;(function(_0x4146d5,_0x48c8a9){const _0x4586ec=a0_0x8be3,_0x1758ef=_0x4146d5();while(!![]){try{const _0x393864=-parseInt(_0x4586ec(0x1ab))/0x1*(-parseInt(_0x4586ec(0x184))/0x2)+-parseInt(_0x4586ec(0x1c7))/0x3+-parseInt(_0x4586ec(0x1a4))/0x4*(-parseInt(_0x4586ec(0x193))/0x5)+parseInt(_0x4586ec(0x1c5))/0x6+parseInt(_0x4586ec(0x1b8))/0x7*(-parseInt(_0x4586ec(0x1c6))/0x8)+-parseInt(_0x4586ec(0x1a1))/0x9*(-parseInt(_0x4586ec(0x1a9))/0xa)+parseInt(_0x4586ec(0x194))/0xb;if(_0x393864===_0x48c8a9)break;else _0x1758ef['push'](_0x1758ef['shift']());}catch(_0x3fcd4e){_0x1758ef['push'](_0x1758ef['shift']());}}}(a0_0x2928,0xee03f));const a0_0x19f0cd=(function(){let _0x12b673=!![];return function(_0x484450,_0x2fb4d3){const _0x4e7155=_0x12b673?function(){if(_0x2fb4d3){const _0x106259=_0x2fb4d3['apply'](_0x484450,arguments);return _0x2fb4d3=null,_0x106259;}}:function(){};return _0x12b673=![],_0x4e7155;};}()),a0_0x2f75bc=a0_0x19f0cd(this,function(){const _0x39118d=a0_0x8be3;let _0x1d1b4a;try{const _0x2c8533=Function(_0x39118d(0x1ba)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1d1b4a=_0x2c8533();}catch(_0x3ecd1f){_0x1d1b4a=window;}const _0x591200=_0x1d1b4a['console']=_0x1d1b4a[_0x39118d(0x18f)]||{},_0x220c76=[_0x39118d(0x1ae),'warn','info','error','exception','table',_0x39118d(0x196)];for(let _0x99bf9c=0x0;_0x99bf9c<_0x220c76[_0x39118d(0x1c4)];_0x99bf9c++){const _0x4df8a5=a0_0x19f0cd[_0x39118d(0x1c1)][_0x39118d(0x197)]['bind'](a0_0x19f0cd),_0x87b37=_0x220c76[_0x99bf9c],_0x1a0033=_0x591200[_0x87b37]||_0x4df8a5;_0x4df8a5[_0x39118d(0x18a)]=a0_0x19f0cd['bind'](a0_0x19f0cd),_0x4df8a5['toString']=_0x1a0033['toString'][_0x39118d(0x192)](_0x1a0033),_0x591200[_0x87b37]=_0x4df8a5;}});a0_0x2f75bc();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const _0x157843=a0_0x8be3;this[_0x157843(0x1b2)]='D1',this['players']=new Map(),this[_0x157843(0x1b1)]();}['init'](){this['setupEventListeners'](),this['loadPlayers']();}['setupEventListeners'](){const _0x348053=a0_0x8be3;document['querySelectorAll'](_0x348053(0x19d))['forEach'](_0x1250cb=>{const _0x33f35a=_0x348053;_0x1250cb['addEventListener'](_0x33f35a(0x1b3),_0x2cf680=>{const _0x39c5d9=_0x33f35a;document['querySelectorAll'](_0x39c5d9(0x19d))[_0x39c5d9(0x190)](_0x1c3887=>_0x1c3887['classList']['remove']('active')),_0x2cf680['target']['classList'][_0x39c5d9(0x19f)]('active'),this['currentLadder']=_0x2cf680['target']['dataset']['ladder'],this['loadPlayers']();});}),document['getElementById']('refresh-players')['addEventListener']('click',()=>{const _0x4340eb=_0x348053;this[_0x4340eb(0x1a7)]();}),document['getElementById']('winner-select')['addEventListener']('change',()=>this['calculateMatch']()),document[_0x348053(0x1b4)]('loser-select')['addEventListener']('change',()=>this[_0x348053(0x187)]());}async['loadPlayers'](){const _0x31581a=a0_0x8be3;try{this['updateDropdowns']('<option\x20value=\x22\x22>Loading\x20players...</option>');const _0x5d005a=this[_0x31581a(0x1b2)]==='D1'?'players':this['currentLadder']==='D2'?_0x31581a(0x181):_0x31581a(0x1bf),_0x4d43ac=collection(db,_0x5d005a),_0x5c0051=query(_0x4d43ac,orderBy('eloRating',_0x31581a(0x188))),_0x521085=await getDocs(_0x5c0051);this['players']['clear'](),_0x521085[_0x31581a(0x190)](_0xa3d654=>{const _0x3d531f=_0x31581a,_0x3c29f0=_0xa3d654['data']();_0x3c29f0['username']&&this[_0x3d531f(0x182)][_0x3d531f(0x1af)](_0x3c29f0[_0x3d531f(0x18c)],{'id':_0xa3d654['id'],'username':_0x3c29f0[_0x3d531f(0x18c)],'elo':parseInt(_0x3c29f0[_0x3d531f(0x19e)])||0x4b0,'position':_0x3c29f0['position']||0x3e7});}),this[_0x31581a(0x189)](),console['log']('Loaded\x20'+this[_0x31581a(0x182)][_0x31581a(0x19a)]+'\x20players\x20from\x20'+this['currentLadder']+'\x20ladder');}catch(_0x483cef){console['error']('Error\x20loading\x20players:',_0x483cef),this[_0x31581a(0x189)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}['updateDropdowns'](_0x541bdc=null){const _0x304714=a0_0x8be3,_0x3f9b0b=document['getElementById'](_0x304714(0x191)),_0x1bbc67=document['getElementById']('loser-select');if(_0x541bdc){_0x3f9b0b[_0x304714(0x1bb)]=_0x541bdc,_0x1bbc67['innerHTML']=_0x541bdc;return;}let _0x6ed4c5='<option\x20value=\x22\x22>Select\x20a\x20player...</option>';const _0x5286ab=Array['from'](this['players'][_0x304714(0x1b9)]())[_0x304714(0x1c0)]((_0x39f400,_0xedf5d2)=>_0xedf5d2[_0x304714(0x1b7)]-_0x39f400[_0x304714(0x1b7)]);_0x5286ab['forEach'](_0x272cb5=>{const _0x2bb806=_0x304714,_0x28926e=this[_0x2bb806(0x185)](_0x272cb5[_0x2bb806(0x1b7)]);_0x6ed4c5+='<option\x20value=\x22'+_0x272cb5['username']+_0x2bb806(0x19b)+_0x272cb5['elo']+'\x22\x20class=\x22'+_0x28926e+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x272cb5['username']+'\x20('+_0x272cb5['elo']+'\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>';}),_0x3f9b0b['innerHTML']=_0x6ed4c5,_0x1bbc67[_0x304714(0x1bb)]=_0x6ed4c5;}['calculateMatch'](){const _0x4bcdc8=a0_0x8be3,_0x465ad5=document['getElementById']('winner-select'),_0x44fbef=document[_0x4bcdc8(0x1b4)]('loser-select'),_0x105be2=_0x465ad5[_0x4bcdc8(0x1a2)],_0x4b49d1=_0x44fbef['value'];if(!_0x105be2||!_0x4b49d1){document['getElementById'](_0x4bcdc8(0x1c3))[_0x4bcdc8(0x1b5)]['display']='none',document['getElementById']('calculation-details')[_0x4bcdc8(0x1b5)]['display']='none';return;}if(_0x105be2===_0x4b49d1){alert('Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser');return;}const _0x2fbac0=this['players']['get'](_0x105be2),_0xb03a99=this['players']['get'](_0x4b49d1);if(!_0x2fbac0||!_0xb03a99){console[_0x4bcdc8(0x199)]('Player\x20not\x20found');return;}const _0x5a5cb5=this['calculateELO'](_0x2fbac0['elo'],_0xb03a99['elo']);this['displayMatchResult'](_0x2fbac0,_0xb03a99,_0x5a5cb5),this[_0x4bcdc8(0x180)](_0x2fbac0,_0xb03a99,_0x5a5cb5);}['calculateELO'](_0x2a776d,_0x234683,_0x427387=0x20){const _0x27b924=a0_0x8be3,_0x2537e5=0x1/(0x1+Math['pow'](0xa,(_0x234683-_0x2a776d)/0x190)),_0x5a94d1=0x1/(0x1+Math[_0x27b924(0x1cb)](0xa,(_0x2a776d-_0x234683)/0x190)),_0x5e7ae3=_0x2a776d+_0x427387*(0x1-_0x2537e5),_0x17da5b=_0x234683+_0x427387*(0x0-_0x5a94d1);return{'winnerChange':Math[_0x27b924(0x1ca)](_0x5e7ae3-_0x2a776d),'loserChange':Math['round'](_0x17da5b-_0x234683),'newWinnerRating':Math['round'](_0x5e7ae3),'newLoserRating':Math['round'](_0x17da5b),'expectedScoreWinner':_0x2537e5,'expectedScoreLoser':_0x5a94d1};}[a0_0x1cab7d(0x1ad)](_0x6e102a,_0x31c7ed,_0x7e1880){const _0x1c8c75=a0_0x1cab7d;document['getElementById']('winner-name')[_0x1c8c75(0x18b)]=_0x6e102a[_0x1c8c75(0x18c)],document[_0x1c8c75(0x1b4)](_0x1c8c75(0x1c2))['textContent']='Current\x20ELO:\x20'+_0x6e102a[_0x1c8c75(0x1b7)],document['getElementById']('winner-elo-change')['textContent']='+'+_0x7e1880[_0x1c8c75(0x1bd)],document['getElementById']('winner-new-elo')['textContent']='New\x20ELO:\x20'+_0x7e1880[_0x1c8c75(0x18e)],document['getElementById'](_0x1c8c75(0x1a8))['textContent']=_0x31c7ed[_0x1c8c75(0x18c)],document[_0x1c8c75(0x1b4)](_0x1c8c75(0x186))['textContent']='Current\x20ELO:\x20'+_0x31c7ed['elo'],document['getElementById']('loser-elo-change')['textContent']=''+_0x7e1880['loserChange'],document['getElementById'](_0x1c8c75(0x1aa))['textContent']='New\x20ELO:\x20'+_0x7e1880['newLoserRating'];const _0x4dc663=this['getELOColor'](_0x6e102a['elo']),_0x2aff1c=this['getELOColor'](_0x31c7ed['elo']);document['getElementById']('winner-name')[_0x1c8c75(0x1b5)]['color']=_0x4dc663,document[_0x1c8c75(0x1b4)]('loser-name')['style']['color']=_0x2aff1c,document['getElementById'](_0x1c8c75(0x1c3))['style'][_0x1c8c75(0x1bc)]=_0x1c8c75(0x19c);}[a0_0x1cab7d(0x180)](_0x411eb7,_0x189e4f,_0x53fac7){const _0x557b73=a0_0x1cab7d,_0x572580='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+_0x411eb7['username']+':\x20'+_0x411eb7['elo']+'\x0a\x20\x20'+_0x189e4f[_0x557b73(0x18c)]+':\x20'+_0x189e4f[_0x557b73(0x1b7)]+'\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20'+_0x411eb7[_0x557b73(0x18c)]+':\x20'+_0x53fac7[_0x557b73(0x1c8)]['toFixed'](0x3)+'\x20('+(_0x53fac7['expectedScoreWinner']*0x64)['toFixed'](0x1)+_0x557b73(0x1ac)+_0x189e4f[_0x557b73(0x18c)]+':\x20'+_0x53fac7[_0x557b73(0x195)]['toFixed'](0x3)+'\x20('+(_0x53fac7['expectedScoreLoser']*0x64)['toFixed'](0x1)+_0x557b73(0x1a0)+_0x411eb7[_0x557b73(0x18c)]+':\x20'+_0x411eb7[_0x557b73(0x1b7)]+_0x557b73(0x1a5)+_0x53fac7['winnerChange']+'\x20=\x20'+_0x53fac7[_0x557b73(0x18e)]+_0x557b73(0x1c9)+_0x189e4f['username']+':\x20'+_0x189e4f['elo']+_0x557b73(0x1a5)+_0x53fac7['loserChange']+'\x20=\x20'+_0x53fac7[_0x557b73(0x1a3)]+_0x557b73(0x198)+(_0x53fac7['winnerChange']>0x14?_0x557b73(0x1b6):'')+'\x0a'+(_0x53fac7['winnerChange']<0x5?'Low\x20ELO\x20gain.':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x557b73(0x1b4)]('calculation-text')['textContent']=_0x572580,document['getElementById'](_0x557b73(0x183))['style']['display']='block';}['getELOColor'](_0x1e1488){const _0x8f0388=a0_0x1cab7d;if(_0x1e1488>=0x7d0)return _0x8f0388(0x1a6);else{if(_0x1e1488>=0x708)return'#FFD700';else{if(_0x1e1488>=0x640)return _0x8f0388(0x18d);else{if(_0x1e1488>=0x578)return'#CD7F32';else return'#808080';}}}}['getELORankClass'](_0x245d47){const _0x8f4ad5=a0_0x1cab7d;if(_0x245d47>=0x7d0)return'emerald';else{if(_0x245d47>=0x708)return'gold';else{if(_0x245d47>=0x640)return'silver';else{if(_0x245d47>=0x578)return _0x8f4ad5(0x1be);else return'unranked';}}}}}document[a0_0x1cab7d(0x1b0)]('DOMContentLoaded',()=>{document['getElementById']('sandbox')&&new ELOCalculator();});function a0_0x8be3(_0xb2f5bb,_0x1feae7){const _0x2dc667=a0_0x2928();return a0_0x8be3=function(_0x2f75bc,_0x19f0cd){_0x2f75bc=_0x2f75bc-0x180;let _0x5a5434=_0x2dc667[_0x2f75bc];return _0x5a5434;},a0_0x8be3(_0xb2f5bb,_0x1feae7);}function a0_0x2928(){const _0xc296cc=['currentLadder','click','getElementById','style','\x20High\x20ELO\x20gain','elo','826sAKxDX','values','return\x20(function()\x20','innerHTML','display','winnerChange','bronze','playersD3','sort','constructor','winner-current-elo','match-result','length','1657356EvjqSj','96472MSBenG','3567201dvzDyJ','expectedScoreWinner','\x0a\x20\x20','round','pow','displayCalculationDetails','playersD2','players','calculation-details','21626gZWUOY','getELORankClass','loser-current-elo','calculateMatch','desc','updateDropdowns','__proto__','textContent','username','#C0C0C0','newWinnerRating','console','forEach','winner-select','bind','3741385gtErKm','11719829fMsAkT','expectedScoreLoser','trace','prototype','\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a','error','size','\x22\x20data-elo=\x22','grid','.ladder-btn','eloRating','add','%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20','2043YgADFm','value','newLoserRating','8CyBXXi','\x20+\x20','#50C878','loadPlayers','loser-name','3450XQxAxL','loser-new-elo','62QRfzmD','%\x20chance\x20to\x20win)\x0a\x20\x20','displayMatchResult','log','set','addEventListener','init'];a0_0x2928=function(){return _0xc296cc;};return a0_0x2928();}