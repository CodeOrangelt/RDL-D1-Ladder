function a0_0x2f33(_0x5a6b0c,_0x15a244){const _0x530151=a0_0x21da();return a0_0x2f33=function(_0x42aef6,_0x16ee2f){_0x42aef6=_0x42aef6-0x1c7;let _0x26ca65=_0x530151[_0x42aef6];return _0x26ca65;},a0_0x2f33(_0x5a6b0c,_0x15a244);}const a0_0x333f5e=a0_0x2f33;(function(_0x2e2567,_0x5cfc4f){const _0x1ea5e0=a0_0x2f33,_0x25992b=_0x2e2567();while(!![]){try{const _0x1861f1=parseInt(_0x1ea5e0(0x1d2))/0x1+parseInt(_0x1ea5e0(0x1cf))/0x2+-parseInt(_0x1ea5e0(0x1cc))/0x3*(parseInt(_0x1ea5e0(0x1d7))/0x4)+parseInt(_0x1ea5e0(0x1d6))/0x5*(parseInt(_0x1ea5e0(0x1c8))/0x6)+parseInt(_0x1ea5e0(0x1dc))/0x7*(-parseInt(_0x1ea5e0(0x1c7))/0x8)+-parseInt(_0x1ea5e0(0x1ce))/0x9+-parseInt(_0x1ea5e0(0x1df))/0xa;if(_0x1861f1===_0x5cfc4f)break;else _0x25992b['push'](_0x25992b['shift']());}catch(_0x5290f2){_0x25992b['push'](_0x25992b['shift']());}}}(a0_0x21da,0xc9fec));const a0_0x16ee2f=(function(){let _0x3b33e9=!![];return function(_0x3458d3,_0xe43560){const _0x10bade=_0x3b33e9?function(){if(_0xe43560){const _0x182b76=_0xe43560['apply'](_0x3458d3,arguments);return _0xe43560=null,_0x182b76;}}:function(){};return _0x3b33e9=![],_0x10bade;};}()),a0_0x42aef6=a0_0x16ee2f(this,function(){const _0x541154=a0_0x2f33;let _0x519123;try{const _0xd5e618=Function(_0x541154(0x1cd)+_0x541154(0x1d4)+');');_0x519123=_0xd5e618();}catch(_0xe4461){_0x519123=window;}const _0x104564=_0x519123['console']=_0x519123['console']||{},_0x4f37b7=['log','warn',_0x541154(0x1e0),'error','exception','table','trace'];for(let _0x24fd55=0x0;_0x24fd55<_0x4f37b7['length'];_0x24fd55++){const _0x1af967=a0_0x16ee2f[_0x541154(0x1da)]['prototype']['bind'](a0_0x16ee2f),_0x5ef795=_0x4f37b7[_0x24fd55],_0x2ec819=_0x104564[_0x5ef795]||_0x1af967;_0x1af967['__proto__']=a0_0x16ee2f['bind'](a0_0x16ee2f),_0x1af967['toString']=_0x2ec819[_0x541154(0x1de)]['bind'](_0x2ec819),_0x104564[_0x5ef795]=_0x1af967;}});a0_0x42aef6();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':a0_0x333f5e(0x1d8),'elo':0x708},{'name':'Silver','elo':0x640},{'name':a0_0x333f5e(0x1ca),'elo':0x578},{'name':'Unranked','elo':0x4b0}];async function getUsernameById(_0x482558){const _0x50e6c9=a0_0x333f5e;try{if(!_0x482558)return _0x50e6c9(0x1d9);const _0x43f35b=await getDoc(doc(db,'players',_0x482558));return _0x43f35b[_0x50e6c9(0x1c9)]()?_0x43f35b[_0x50e6c9(0x1db)]()['username']:'Unknown\x20Player';}catch(_0x5c4327){return console['error']('Error\x20fetching\x20username:',_0x5c4327),'Unknown\x20Player';}}export async function recordEloChange({playerId:_0x576cdb,previousElo:_0x37799d,newElo:_0x27be1c,opponentId:_0x1e4e14,matchResult:_0xa267eb,previousPosition:_0x4aa125,newPosition:_0x5dc818,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x5cafbe}){const _0x59ebc9=a0_0x333f5e;try{const _0x173ea7=doc(collection(db,_0x59ebc9(0x1d0)));let _0x3848b5='match';if(isPromotion)_0x3848b5='promotion';if(isDemotion)_0x3848b5='demotion';let _0x3bab66='Unranked';if(_0x27be1c>=0x834)_0x3bab66=_0x59ebc9(0x1cb);else{if(_0x27be1c>=0x708)_0x3bab66='Gold';else{if(_0x27be1c>=0x640)_0x3bab66='Silver';else{if(_0x27be1c>=0x578)_0x3bab66='Bronze';}}}return await setDoc(_0x173ea7,{'type':_0x3848b5,'player':_0x576cdb,'opponent':_0x1e4e14,'previousElo':_0x37799d,'newElo':_0x27be1c,'change':_0x27be1c-_0x37799d,'matchResult':_0xa267eb,'previousPosition':_0x4aa125,'newPosition':_0x5dc818,'rankAchieved':_0x3bab66,'timestamp':_0x5cafbe}),console['log']('ELO\x20history\x20recorded\x20for\x20'+_0x576cdb),!![];}catch(_0x4472d4){console[_0x59ebc9(0x1d3)]('Error\x20recording\x20ELO\x20history:',_0x4472d4);throw _0x4472d4;}}function a0_0x21da(){const _0x60a6c4=['Unknown\x20Player','constructor','data','48937KbJAYc','all','toString','15368520KePeZv','info','952xZqZJm','24528wGRTKs','exists','Bronze','Emerald','33KnraYW','return\x20(function()\x20','4138029MIggQG','2366658LMRcnk','eloHistory','opponent','1512454OjiCPF','error','{}.constructor(\x22return\x20this\x22)(\x20)','timestamp','1520mlLTCf','102764CwMNzW','Gold'];a0_0x21da=function(){return _0x60a6c4;};return a0_0x21da();}export async function getEloHistory(){const _0x4b2b2f=a0_0x333f5e;try{const _0x260b76=collection(db,'eloHistory'),_0x5139a8=query(_0x260b76,orderBy(_0x4b2b2f(0x1d5),'desc')),_0x313bda=await getDocs(_0x5139a8),_0x38a7f1=_0x313bda['docs']['map'](async _0x9e5c68=>{const _0x2d6580=_0x4b2b2f,_0xa22bf1=_0x9e5c68['data'](),[_0x1b71cc,_0x3878b3]=await Promise[_0x2d6580(0x1dd)]([getUsernameById(_0xa22bf1['player']),getUsernameById(_0xa22bf1[_0x2d6580(0x1d1)])]);return{..._0xa22bf1,'playerUsername':_0x1b71cc,'opponentUsername':_0x3878b3,'change':_0xa22bf1['newElo']-_0xa22bf1['previousElo'],'timestamp':_0xa22bf1['timestamp']};}),_0x1cc5d8=await Promise['all'](_0x38a7f1);return{'entries':_0x1cc5d8};}catch(_0x1d9391){console['error']('Error\x20fetching\x20ELO\x20history:',_0x1d9391);throw _0x1d9391;}}export function resetPagination(){lastVisible=null;}