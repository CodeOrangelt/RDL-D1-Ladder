const a6_0x5557ea=a6_0x13cb,a6_0x39424b=(function(){let _0x2d661e=!![];return function(_0x404588,_0x5eaf40){const _0x4a5b4d=_0x2d661e?function(){const _0x3a26d6=a6_0x13cb;if(_0x5eaf40){const _0x23761d=_0x5eaf40[_0x3a26d6(0x11d)](_0x404588,arguments);return _0x5eaf40=null,_0x23761d;}}:function(){};return _0x2d661e=![],_0x4a5b4d;};}()),a6_0x3d3cfc=a6_0x39424b(this,function(){const _0x3c30d9=a6_0x13cb,_0xc9de9d=function(){let _0x30f1cd;try{_0x30f1cd=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2c32eb){_0x30f1cd=window;}return _0x30f1cd;},_0x30c9e5=_0xc9de9d(),_0x4e6d23=_0x30c9e5[_0x3c30d9(0xca)]=_0x30c9e5['console']||{},_0x433fdd=[_0x3c30d9(0x135),'warn','info','error',_0x3c30d9(0x115),_0x3c30d9(0x120),'trace'];for(let _0x2aee22=0x0;_0x2aee22<_0x433fdd['length'];_0x2aee22++){const _0x56c406=a6_0x39424b[_0x3c30d9(0xf8)]['prototype']['bind'](a6_0x39424b),_0x1e9daa=_0x433fdd[_0x2aee22],_0x396a09=_0x4e6d23[_0x1e9daa]||_0x56c406;_0x56c406['__proto__']=a6_0x39424b[_0x3c30d9(0xa2)](a6_0x39424b),_0x56c406['toString']=_0x396a09['toString'][_0x3c30d9(0xa2)](_0x396a09),_0x4e6d23[_0x1e9daa]=_0x56c406;}});function a6_0x4bb7(){const _0x5d1b17=['.match-map','submit','.add-comment-btn','subgameType','add','includes','commentPopupTitlePreview','badComments','comment','matchesPerPage','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>','auth','disabled','commentText','Firebase\x20not\x20initialized','desc','loserSuicides','\x20days\x20ago','center','commentAddPopup','Yesterday','userProfiles','style','closeAddCommentPopup','commentPopupPreview','seconds','Error\x20fetching\x20','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments','aria-label','\x20matching\x20filters','selected','Winner','error','querySelector','setItem','Loser','previewCache_','Anonymous\x20User','.option-tab','bind','appendChild','Submit','innerHTML','lastVisible','Report','reportCommentButton','Failed\x20to\x20cache\x20data:','stopPropagation','.comment.loser-comment','submitComment','.comments-container','removeAttribute','apply-enhanced-filters','silver','.match-display-wrapper','previewNextPage','altered-powerups','createElement','#808080','Cached\x20intermediary\x20page\x20','title','removeChild','.delete-comment-btn','onclick','isLoading','button','classList','textContent','filterUsername','gap','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','No\x20results\x20found\x20for\x20this\x20page','Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link','enhancedFilters','filter','slice','+10','Failed\x20to\x20report\x20comment:\x20','getElementById','console','#b9f1fc','forEach','preventDefault','#FFD700','.match-subgame','type','winnerUsername','toggle','Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.','.player.loser\x20.player-suicides','closest','marginTop','commentOverlayPreview','removeItem','keypress','div','Submitting...','none','loserUsername','.popup-actions','Please\x20enter\x20a\x20comment\x20before\x20submitting','commentAddOverlay','current','uid','Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.','Failed\x20to\x20fetch\x20username:','parentNode','option','currentPage','Failed\x20to\x20parse\x20cache:','You\x20can\x20only\x20delete\x20your\x20own\x20comments','exists',':</strong>\x20\x22','Error\x20deleting\x20comment:','\x20demo\x20links:','Match\x20','winnerOldElo','split','demo','parse','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','totalPages','push','currentMode','backgroundColor','constructor','closeCommentPopupPreview','.comment-item','required','commentMatchId','emerald','filter-pilots','firstChild','description','dataset','demoWordCount','Failed\x20to\x20add\x20comment:\x20','.player.loser\x20.player-score','matchId','display','addEventListener','map','message',',\x20fetching\x20from\x20Firestore','from','<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display','text','Demo\x20link','block','matchComments','cloneNode','clear-enhanced-filters','timestamp','subgames','exception','.match-card','currentUser','className','.player.loser\x20.player-name','-10','#aaa','Muted.','apply','value','levels','table','winnerSuicides','cursor','fusion-match','\x20from\x20cache','.player.winner\x20.player-score','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>','body','Enter','Standard\x20Match','addCommentForm','length','displayName','recent-matches-preview','comment-overlay','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo','Today','click','docs','wordCount','flex','log','setAttribute','trim','demoDescription','bronze','end','demoLink','Cache\x20miss\x20for\x20page\x20'];a6_0x4bb7=function(){return _0x5d1b17;};return a6_0x4bb7();}a6_0x3d3cfc();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date('2025-07-02')['getTime']()}];function isUsernameMuted(_0x43c65c,_0x2b2eb9){if(!_0x43c65c)return![];const _0xe31af5=mutedUsers['find'](_0x983771=>_0x983771['username']===_0x43c65c);if(!_0xe31af5)return![];if(!_0x2b2eb9)return!![];const _0x3f60c6=_0x2b2eb9 instanceof Date?_0x2b2eb9['getTime']():_0x2b2eb9['seconds']?_0x2b2eb9['seconds']*0x3e8:Date['now']();return _0x3f60c6>=_0xe31af5['muteFromDate'];}function filterComment(_0x3641d8,_0x4d2993,_0x50b145){const _0x2d4cb9=a6_0x13cb;if(!_0x3641d8)return'-';if(isUsernameMuted(_0x4d2993,_0x50b145))return _0x2d4cb9(0x11c);return _0x3641d8;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x21d4e2,_0x509df9,_0x566994){const _0x2c663e='u:'+(_0x566994['filterUsername']||'');return'previewCache_'+_0x21d4e2+'_p'+_0x509df9+'_'+_0x2c663e;}function getCachedPage(_0xdaadac){const _0x1771af=a6_0x13cb,_0xaca693=sessionStorage['getItem'](_0xdaadac);if(_0xaca693)try{return JSON[_0x1771af(0xf2)](_0xaca693);}catch(_0x3b8f45){return console['error'](_0x1771af(0xe8),_0x3b8f45),sessionStorage[_0x1771af(0xd8)](_0xdaadac),null;}return null;}function cachePage(_0x29f034,_0xf92fbc){const _0x3dea7d=a6_0x13cb;try{sessionStorage[_0x3dea7d(0x9d)](_0x29f034,JSON['stringify'](_0xf92fbc));}catch(_0x4bb237){console['error'](_0x3dea7d(0xa9),_0x4bb237);}}function getEloColor(_0x191582){const _0x14d219=a6_0x13cb,_0x8e337e=Number(_0x191582);if(_0x8e337e>=0x7d0)return'#50C878';else{if(_0x8e337e>=0x708)return _0x14d219(0xce);else{if(_0x8e337e>=0x640)return _0x14d219(0xcb);else{if(_0x8e337e>=0x578)return'#CD7F32';else return _0x14d219(0xb5);}}}}function formatDate(_0x200a15,_0x1385c3=![]){if(!_0x200a15||!_0x200a15['seconds'])return'N/A';const _0x43aeb0=new Date(_0x200a15['seconds']*0x3e8);return _0x1385c3?_0x43aeb0['toLocaleString']():_0x43aeb0['toLocaleDateString']();}function truncateComment(_0x440ed5,_0x11e63b=0x1e){const _0x208f40=a6_0x13cb;if(!_0x440ed5)return'-';if(_0x440ed5[_0x208f40(0x12b)]<=_0x11e63b)return _0x440ed5;return _0x440ed5['substring'](0x0,_0x11e63b)+'...';}function formatCommentDate(_0x1fa89e){const _0x2f757f=a6_0x13cb;if(!_0x1fa89e||!_0x1fa89e[_0x2f757f(0x94)])return'';const _0xd7a136=new Date(_0x1fa89e['seconds']*0x3e8),_0xb97517=new Date(),_0x30b04c=Math['abs'](_0xb97517-_0xd7a136),_0x93a152=Math['floor'](_0x30b04c/(0x3e8*0x3c*0x3c*0x18));if(_0x93a152===0x0)return _0x2f757f(0x130);else{if(_0x93a152===0x1)return _0x2f757f(0x8f);else return _0x93a152<0x7?_0x93a152+_0x2f757f(0x8c):_0xd7a136['toLocaleDateString']();}}function setLoadingIndicator(_0x397ced){const _0x17251c=a6_0x13cb,_0x5e8f0a=document[_0x17251c(0xc9)]('loading-indicator');if(_0x5e8f0a)_0x5e8f0a[_0x17251c(0x91)][_0x17251c(0x106)]=_0x397ced?_0x17251c(0x10f):'none';}export function updatePreviewLadderModeUI(){const _0x323ac8=a6_0x13cb,_0xfe67b1=document['getElementById']('preview-ladder-mode'),_0x34f510=document['getElementById']('preview-d1-button'),_0x285f12=document['getElementById']('preview-d2-button'),_0x307230=document['getElementById']('preview-d3-button');if(_0xfe67b1)_0xfe67b1['textContent']=previewState['currentMode'];if(_0x34f510)_0x34f510[_0x323ac8(0xbd)]['toggle']('active',previewState['currentMode']==='D1');if(_0x285f12)_0x285f12[_0x323ac8(0xbd)]['toggle']('active',previewState['currentMode']==='D2');if(_0x307230)_0x307230['classList'][_0x323ac8(0xd2)]('active',previewState[_0x323ac8(0xf6)]==='D3');}function updatePreviewPaginationControls(_0x5e3b62){const _0x347249=a6_0x13cb,_0x7001bb=document['getElementById']('previewPrevPage'),_0x224153=document['getElementById']('previewNextPage'),_0x6bc819=document['getElementById']('previewPageInfo');if(!_0x7001bb||!_0x224153||!_0x6bc819)return;_0x6bc819['textContent']='Page\x20'+previewState['currentPage'],_0x7001bb[_0x347249(0x87)]=previewState['currentPage']<=0x1,_0x224153[_0x347249(0x87)]=!_0x5e3b62;}function setPreviewLoadingState(_0x3e8d5d){const _0x4c3d5e=a6_0x13cb;previewState['isLoading']=_0x3e8d5d,setLoadingIndicator(_0x3e8d5d);const _0x5d8391=document[_0x4c3d5e(0xc9)]('recent-matches-preview'),_0x334c6d=_0x5d8391?_0x5d8391[_0x4c3d5e(0x9c)]('.matches-loading'):null,_0x3f9bfd=document['getElementById']('previewPrevPage'),_0x4ed69c=document['getElementById']('previewNextPage'),_0x20ea26=document['getElementById']('preview-d1-button'),_0x1efc37=document['getElementById']('preview-d2-button'),_0x111ed5=document[_0x4c3d5e(0xc9)]('applyFilterBtn'),_0x2d4fe0=document['getElementById']('clearFilterBtn');if(_0x334c6d&&!_0x3e8d5d)_0x334c6d['style']['display']='none';else _0x334c6d&&_0x3e8d5d&&(_0x334c6d['style']['display']=_0x4c3d5e(0x10f));!_0x3e8d5d&&_0x5d8391&&!_0x5d8391['querySelector'](_0x4c3d5e(0x116))&&!_0x5d8391['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x5d8391['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState['filterUsername']?'\x20matching\x20filters':'')+'.</div>');if(_0x3f9bfd)_0x3f9bfd['disabled']=_0x3e8d5d||previewState[_0x4c3d5e(0xe7)]<=0x1;if(_0x4ed69c)_0x4ed69c['disabled']=_0x3e8d5d;if(_0x20ea26)_0x20ea26['disabled']=_0x3e8d5d;if(_0x1efc37)_0x1efc37[_0x4c3d5e(0x87)]=_0x3e8d5d;if(_0x111ed5)_0x111ed5['disabled']=_0x3e8d5d;if(_0x2d4fe0)_0x2d4fe0['disabled']=_0x3e8d5d;}function applyClientFilters(_0x18ee59){const _0x1536d9=a6_0x13cb;if(!previewState[_0x1536d9(0xbf)])return _0x18ee59;const _0x472fa8=previewState['filterUsername']['toLowerCase']();return _0x18ee59[_0x1536d9(0xc5)](_0x135204=>{const _0x484f6b=_0x1536d9,_0x534cea=(_0x135204[_0x484f6b(0xd1)]||'')['toLowerCase'](),_0x2971be=(_0x135204[_0x484f6b(0xdd)]||'')['toLowerCase']();return _0x534cea['includes'](_0x472fa8)||_0x2971be['includes'](_0x472fa8);});}function applyEnhancedClientFilters(_0x2f666a){if(!hasEnhancedFilters())return _0x2f666a;return _0x2f666a['filter'](_0x1aee5b=>{const _0x50068b=a6_0x13cb;if(previewState[_0x50068b(0xc4)]['pilots']){const _0x160f79=previewState['enhancedFilters']['pilots']['toLowerCase'](),_0x433157=(_0x1aee5b['winnerUsername']||'')['toLowerCase'](),_0x1495ce=(_0x1aee5b['loserUsername']||'')['toLowerCase']();if(!_0x433157[_0x50068b(0x80)](_0x160f79)&&!_0x1495ce[_0x50068b(0x80)](_0x160f79))return![];}if(previewState['enhancedFilters']['levels']){const _0x12ebd0=previewState['enhancedFilters']['levels']['toLowerCase'](),_0x22dc5b=(_0x1aee5b['mapPlayed']||'')['toLowerCase']();if(!_0x22dc5b['includes'](_0x12ebd0))return![];}if(previewState['enhancedFilters']['subgames'][_0x50068b(0x12b)]>0x0){const _0x599690=_0x1aee5b['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames'][_0x50068b(0x80)](_0x599690))return![];}return!![];});}function hasEnhancedFilters(){const _0x13d2ff=a6_0x13cb;return previewState['enhancedFilters']['pilots']||previewState['enhancedFilters'][_0x13d2ff(0x11f)]||previewState['enhancedFilters']['subgames'][_0x13d2ff(0x12b)]>0x0;}function clearEnhancedFilters(){const _0x4a6376=a6_0x13cb;previewState[_0x4a6376(0xc4)]={'pilots':'','levels':'','subgames':[]},document['getElementById']('filter-pilots')['value']='',document['getElementById']('filter-levels')[_0x4a6376(0x11e)]='';const _0x10972c=document[_0x4a6376(0xc9)]('filter-subgames');for(let _0x2804ad of _0x10972c['options']){_0x2804ad[_0x4a6376(0x99)]=![];}}function jumpToPage(_0xb48925){const _0x32c930=a6_0x13cb,_0x59b423=document['getElementById']('jump-to-page'),_0x39b376=previewState['currentPage'];let _0x5b31fc=_0x39b376;switch(_0xb48925){case'start':_0x5b31fc=0x1;break;case _0x32c930(0x13a):_0x5b31fc=Math['max'](_0x39b376+0xa,previewState[_0x32c930(0xf4)]||_0x39b376+0xa);break;case'+1':_0x5b31fc=_0x39b376+0x1;break;case'+5':_0x5b31fc=_0x39b376+0x5;break;case _0x32c930(0xc7):_0x5b31fc=_0x39b376+0xa;break;case'-1':_0x5b31fc=Math['max'](0x1,_0x39b376-0x1);break;case'-5':_0x5b31fc=Math['max'](0x1,_0x39b376-0x5);break;case _0x32c930(0x11a):_0x5b31fc=Math['max'](0x1,_0x39b376-0xa);break;case'input':const _0x2fedef=parseInt(_0x59b423[_0x32c930(0x11e)]);_0x2fedef&&_0x2fedef>0x0&&(_0x5b31fc=_0x2fedef,_0x59b423['value']='');break;}_0x5b31fc!==_0x39b376&&_0x5b31fc>0x0&&(previewState['currentPage']=_0x5b31fc,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x421363=a6_0x5557ea(0xe1)){const _0x22aa12=a6_0x5557ea,_0x11faf6=document['getElementById'](_0x22aa12(0x12d)),_0x420f8f=document['getElementById']('match-card-template');if(previewState[_0x22aa12(0xbb)]||!_0x11faf6||!_0x420f8f)return;_0x421363==='current'&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)[_0x22aa12(0xcc)](_0x41460f=>{const _0x49ad0f=_0x22aa12;_0x41460f['includes'](_0x49ad0f(0x9f)+previewState['currentMode'])&&sessionStorage['removeItem'](_0x41460f);}));let _0x564a43=previewState['currentPage'];if(_0x421363==='next')_0x564a43++;else{if(_0x421363==='prev')_0x564a43--;else _0x421363==='current'&&(_0x564a43=0x1,previewState['firstVisible']=null,previewState['lastVisible']=null);}if(_0x564a43<0x1)_0x564a43=0x1;const _0x26ea7a=previewState['currentPage'];previewState['currentPage']=_0x564a43,updatePreviewPaginationControls(!![]);const _0x158828={'filterUsername':previewState['filterUsername']},_0x854f5b=getCacheKey(previewState[_0x22aa12(0xf6)],_0x564a43,_0x158828),_0x586059=_0x421363!=='current'?getCachedPage(_0x854f5b):null;if(_0x586059){console['log']('Rendering\x20page\x20'+_0x564a43+_0x22aa12(0x124)),setPreviewLoadingState(!![]),renderMatchCards(_0x586059['docsData']),updatePreviewPaginationControls(_0x586059['hasNextPage']),setPreviewLoadingState(![]);return;}console['log'](_0x22aa12(0x13c)+_0x564a43+_0x22aa12(0x10a)),setPreviewLoadingState(!![]),_0x11faf6['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x40fc87=previewState[_0x22aa12(0xf6)]==='D1'?'approvedMatches':previewState['currentMode']==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x563c59=previewState[_0x22aa12(0xf6)]==='D1'?'createdAt':'approvedAt';try{const _0x3409c5=collection(window['db'],_0x40fc87);let _0x21d07e=[orderBy(_0x563c59,'desc')];if(_0x564a43===0x1)console['log']('Loading\x20first\x20page\x20from\x20Firestore'),_0x21d07e[_0x22aa12(0xf5)](limit(previewState['matchesPerPage']));else{if(_0x421363==='next'&&previewState['lastVisible'])console[_0x22aa12(0x135)]('Loading\x20next\x20page\x20using\x20cursor'),_0x21d07e['push'](startAfter(previewState[_0x22aa12(0xa6)])),_0x21d07e[_0x22aa12(0xf5)](limit(previewState['matchesPerPage']));else{console[_0x22aa12(0x135)]('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x3f3523=_0x564a43*previewState['matchesPerPage'];_0x21d07e['push'](limit(_0x3f3523));}}const _0xb4a439=query(_0x3409c5,..._0x21d07e),_0x1e8dba=await getDocs(_0xb4a439);let _0x1020a3=_0x1e8dba['docs'];if(_0x564a43>0x1&&_0x421363!=='next'){const _0x4306d1=(_0x564a43-0x1)*previewState['matchesPerPage'];_0x1020a3=_0x1020a3['slice'](_0x4306d1,_0x4306d1+previewState['matchesPerPage']);}if(_0x1020a3['length']===0x0){console['log'](_0x22aa12(0xc2));_0x421363==='next'&&(previewState[_0x22aa12(0xe7)]=_0x26ea7a,updatePreviewPaginationControls(![]));_0x11faf6[_0x22aa12(0xa5)]=_0x22aa12(0x10c)+(previewState['filterUsername']?_0x22aa12(0x98):'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x1020a3[0x0],previewState['lastVisible']=_0x1020a3[_0x1020a3[_0x22aa12(0x12b)]-0x1];const _0x218b7a=_0x1020a3['map'](_0x2d376d=>({'id':_0x2d376d['id'],..._0x2d376d['data']()}));let _0x3ae343=![];if(_0x1020a3['length']===previewState['matchesPerPage']){const _0x4c1f1a=query(_0x3409c5,orderBy(_0x563c59,'desc'),startAfter(previewState[_0x22aa12(0xa6)]),limit(0x1)),_0x4d508c=await getDocs(_0x4c1f1a);_0x3ae343=!_0x4d508c['empty'];}const _0x453fe3=applyClientFilters(_0x218b7a),_0x3c52ca={'docsData':_0x218b7a,'hasNextPage':_0x3ae343};cachePage(getCacheKey(previewState['currentMode'],previewState[_0x22aa12(0xe7)],_0x158828),_0x3c52ca);if(_0x564a43>0x1&&_0x421363!=='next')for(let _0xf4bcd2=0x1;_0xf4bcd2<_0x564a43;_0xf4bcd2++){const _0x31580a=(_0xf4bcd2-0x1)*previewState[_0x22aa12(0x84)],_0x189ef6=_0x31580a+previewState['matchesPerPage'],_0x38e034=_0x1e8dba[_0x22aa12(0x132)]['slice'](_0x31580a,_0x189ef6);if(_0x38e034['length']>0x0){const _0x49687c=_0x38e034[_0x22aa12(0x108)](_0x3119ba=>({'id':_0x3119ba['id'],..._0x3119ba['data']()})),_0x4d4290=!![];cachePage(getCacheKey(previewState['currentMode'],_0xf4bcd2,_0x158828),{'docsData':_0x49687c,'hasNextPage':_0x4d4290}),console[_0x22aa12(0x135)](_0x22aa12(0xb6)+_0xf4bcd2);}}_0x453fe3[_0x22aa12(0x12b)]===0x0&&previewState['filterUsername']?_0x11faf6['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState['filterUsername']+'\x22</div>':renderMatchCards(_0x453fe3),updatePreviewPaginationControls(_0x3ae343);}catch(_0x198043){console['error'](_0x22aa12(0x95)+previewState['currentMode']+'\x20matches:',_0x198043),_0x11faf6['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x198043['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x26ea7a;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x178970){const _0x49efb1=a6_0x5557ea,_0x312bd2=document[_0x49efb1(0xc9)]('recent-matches-preview'),_0x398c7d=document['getElementById']('match-card-template');if(!_0x312bd2||!_0x398c7d)return;!_0x312bd2['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x312bd2['innerHTML']='');if(!_0x178970||_0x178970[_0x49efb1(0x12b)]===0x0){if(!_0x312bd2['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x181830=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?'\x20matching\x20filters':'';_0x312bd2[_0x49efb1(0xa5)]='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x181830+'.</div>';}return;}const _0x46783c=applyEnhancedClientFilters(_0x178970);if(_0x46783c['length']===0x0){_0x312bd2['innerHTML']=_0x49efb1(0x126);return;}const _0x1397ae=_0x46783c['map'](_0x4b7f3a=>getAllCommentsForMatch(_0x4b7f3a['id']));let _0x118466=[];try{_0x118466=await Promise['all'](_0x1397ae);}catch(_0xe4b645){console['error']('Error\x20fetching\x20comments\x20batch:',_0xe4b645),_0x118466=_0x46783c['map'](()=>[]);}const _0x47f958={};_0x118466['forEach']((_0x53be2e,_0x2ab57e)=>{_0x47f958[_0x46783c[_0x2ab57e]['id']]=_0x53be2e||[];}),_0x46783c[_0x49efb1(0xcc)](_0xf0e9af=>{const _0x52e399=_0x49efb1,_0x3937a0=_0x398c7d['content'][_0x52e399(0x111)](!![]),_0x94fec5=_0x3937a0['querySelector'](_0x52e399(0xb1)),_0x226e73=_0x3937a0[_0x52e399(0x9c)](_0x52e399(0x116)),_0xbf550=getEloRankClass(_0xf0e9af[_0x52e399(0xef)]);_0x226e73['classList']['add']('winner-'+_0xbf550),_0x226e73[_0x52e399(0x9c)](_0x52e399(0x7b))['textContent']=_0xf0e9af['mapPlayed']||'Unknown\x20Map',_0x226e73['querySelector']('.match-date')['textContent']=formatDate(_0xf0e9af['approvedAt']||_0xf0e9af['createdAt']);const _0x14181a=_0x226e73['querySelector']('.player.winner\x20.player-name');_0x14181a['textContent']=_0xf0e9af[_0x52e399(0xd1)]||'Unknown',_0x14181a['style']['color']=getEloColor(_0xf0e9af['winnerOldElo']),_0x226e73[_0x52e399(0x9c)](_0x52e399(0x125))['textContent']=_0xf0e9af['winnerScore']??0x0;const _0x345d41=_0x226e73[_0x52e399(0x9c)]('.player.winner\x20.player-suicides'),_0x1d748e=_0xf0e9af[_0x52e399(0x121)]||0x0;_0x345d41[_0x52e399(0xbe)]='S:\x20'+_0x1d748e;const _0x1b9560=_0x226e73[_0x52e399(0x9c)](_0x52e399(0x119));_0x1b9560['textContent']=_0xf0e9af['loserUsername']||'Unknown',_0x1b9560[_0x52e399(0x91)]['color']=getEloColor(_0xf0e9af['loserOldElo']),_0x226e73['querySelector'](_0x52e399(0x104))['textContent']=_0xf0e9af['loserScore']??0x0;const _0x8b7447=_0x226e73['querySelector'](_0x52e399(0xd4)),_0x221a9b=_0xf0e9af[_0x52e399(0x8b)]||0x0;_0x8b7447['textContent']='S:\x20'+_0x221a9b;const _0x38da63=_0x226e73[_0x52e399(0x9c)](_0x52e399(0xcf));if(_0x38da63){if(_0xf0e9af[_0x52e399(0x7e)]&&_0xf0e9af[_0x52e399(0x7e)]['trim']()!==''){_0x38da63['textContent']=_0xf0e9af['subgameType'],_0x38da63[_0x52e399(0x91)]['display']=_0x52e399(0x10f);const _0x211882=getSubgameClass(_0xf0e9af['subgameType']);_0x211882&&_0x38da63['classList'][_0x52e399(0x7f)](_0x211882);}else _0x38da63['textContent']=_0x52e399(0x129),_0x38da63['style'][_0x52e399(0x106)]='block',_0x38da63['style']['opacity']='0.6';}const _0x572ee0=_0x226e73['querySelector']('.comment.winner-comment'),_0x173506=_0x226e73[_0x52e399(0x9c)](_0x52e399(0xab)),_0x769a45=_0xf0e9af['winnerComment']||'',_0x424242=_0xf0e9af['loserComment']||'',_0x3207cd=_0xf0e9af['approvedAt']||_0xf0e9af['createdAt'],_0x51d299=filterComment(_0x769a45,_0xf0e9af['winnerUsername'],_0x3207cd),_0xa16567=filterComment(_0x424242,_0xf0e9af[_0x52e399(0xdd)],_0x3207cd);_0x572ee0['textContent']='\x22'+truncateComment(_0x769a45)+'\x22',_0x173506[_0x52e399(0xbe)]='\x22'+truncateComment(_0x424242)+'\x22';_0x769a45&&!isUsernameMuted(_0xf0e9af[_0x52e399(0xd1)],_0x3207cd)?_0x572ee0['onclick']=()=>showPreviewCommentPopup(_0x51d299,_0xf0e9af['winnerUsername']||_0x52e399(0x9a),getEloColor(_0xf0e9af['winnerOldElo'])):(_0x572ee0['textContent']=_0x51d299===_0x52e399(0x11c)?_0x52e399(0x11c):'-',_0x572ee0['style']['cursor']='default',_0x572ee0['onclick']=null);_0x424242&&!isUsernameMuted(_0xf0e9af['loserUsername'])?_0x173506['onclick']=()=>showPreviewCommentPopup(_0xa16567,_0xf0e9af['loserUsername']||_0x52e399(0x9e),getEloColor(_0xf0e9af['loserOldElo'])):(_0x173506['textContent']=_0xa16567==='Muted.'?_0x52e399(0x11c):'-',_0x173506[_0x52e399(0x91)]['cursor']='default',_0x173506['onclick']=null);const _0x3ac14b=_0x94fec5?.[_0x52e399(0x9c)]('.community-comments-section');if(!_0x3ac14b)console['warn']('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0x1dbe7f=_0x3ac14b['querySelector']('.comments-container'),_0x136495=_0x1dbe7f?.['querySelector']('.no-comments-message'),_0x14cf64=_0x3ac14b[_0x52e399(0x9c)](_0x52e399(0x7d));if(_0x1dbe7f){while(_0x1dbe7f[_0x52e399(0xff)]&&_0x1dbe7f['firstChild']!==_0x136495){_0x1dbe7f[_0x52e399(0xb8)](_0x1dbe7f['firstChild']);}_0x14cf64&&_0x14cf64['addEventListener'](_0x52e399(0x131),()=>{showAddCommentPopup(_0xf0e9af['id']);});const _0x3c3cb8=_0x47f958[_0xf0e9af['id']]||[];if(_0x3c3cb8['length']>0x0){if(_0x136495)_0x136495[_0x52e399(0x91)]['display']=_0x52e399(0xdc);const _0x20c37e=(_0x4dbc2c,_0x24996f)=>{const _0x3a4fb2=_0x52e399,_0x27dc5a=_0x4dbc2c['split']('\x20');if(_0x27dc5a['length']<=_0x24996f)return _0x4dbc2c;return _0x27dc5a[_0x3a4fb2(0xc6)](0x0,_0x24996f)['join']('\x20')+'...';};_0x3c3cb8[_0x52e399(0xcc)](_0x3cf272=>{const _0x51cad6=_0x52e399,_0x57a782=document['createElement'](_0x51cad6(0xda));if(_0x3cf272[_0x51cad6(0xd0)]===_0x51cad6(0xf1)){_0x57a782[_0x51cad6(0x118)]='demo-link',_0x57a782['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x3cf272[_0x51cad6(0x13b)]+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x3cf272['username']+_0x51cad6(0x85)+(_0x3cf272[_0x51cad6(0x100)]||'No\x20description\x20provided')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x1f6c16=window[_0x51cad6(0x86)]['currentUser'],_0x418061=_0x1f6c16&&_0x3cf272['userId']===_0x1f6c16['uid'];if(_0x418061){const _0x53a0be=document['createElement'](_0x51cad6(0xbc));_0x53a0be['className']='delete-comment-btn',_0x53a0be[_0x51cad6(0xa5)]='×',_0x53a0be['setAttribute'](_0x51cad6(0x97),'Delete\x20demo'),_0x53a0be['addEventListener']('click',_0x4e966b=>{_0x4e966b['preventDefault'](),_0x4e966b['stopPropagation'](),deleteComment(_0x3cf272['id'],_0x57a782);}),_0x57a782[_0x51cad6(0xa3)](_0x53a0be);}}else{_0x57a782[_0x51cad6(0x118)]='comment-item';const _0x295b95=isUsernameMuted(_0x3cf272['username'],_0x3cf272[_0x51cad6(0x113)]),_0x40ac60=_0x295b95?'Muted.':_0x20c37e(_0x3cf272[_0x51cad6(0x10d)]||'',0xf),_0x23a09f=_0x3cf272['username']||'Anonymous',_0x19f7f3=window['auth'][_0x51cad6(0x117)],_0x2de4cf=_0x19f7f3&&_0x3cf272['userId']===_0x19f7f3['uid'];let _0x3d511c='';_0x2de4cf&&(_0x3d511c='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');_0x57a782[_0x51cad6(0xa5)]=_0x3d511c+'<strong>'+_0x23a09f+_0x51cad6(0xeb)+_0x40ac60+'\x22';if(_0x2de4cf){const _0x25d763=_0x57a782['querySelector'](_0x51cad6(0xb9));_0x25d763&&_0x25d763['addEventListener'](_0x51cad6(0x131),_0x5a27c9=>{const _0x3ae1f6=_0x51cad6;_0x5a27c9[_0x3ae1f6(0xaa)](),deleteComment(_0x3cf272['id'],_0x57a782);});}!_0x295b95?_0x57a782['addEventListener']('click',()=>{showFullCommentLightbox(_0x3cf272);}):_0x57a782['style'][_0x51cad6(0x122)]='default';}_0x1dbe7f['insertBefore'](_0x57a782,_0x1dbe7f['firstChild']);});}else{if(_0x136495)_0x136495[_0x52e399(0x91)]['display']='block';}}}const _0xf09516=_0x226e73['querySelector']('.match-demo-links');if(_0xf09516){const _0x1afdb1=_0x226e73[_0x52e399(0x9c)]('.winner-demo-link'),_0x4c6496=_0x226e73['querySelector']('.loser-demo-link'),_0x29b803=_0xf0e9af['winnerDemoLink']||null,_0x43e184=_0xf0e9af['loserDemoLink']||_0xf0e9af['demoLink']||null;console['log'](_0x52e399(0xee)+_0xf0e9af['id']+_0x52e399(0xed),{'winner':_0x29b803,'loser':_0x43e184}),_0x1afdb1&&(_0x29b803?(_0x1afdb1['href']=_0x29b803,_0x1afdb1['style']['display']='flex',_0x1afdb1[_0x52e399(0xb7)]=_0xf0e9af[_0x52e399(0xd1)]+'\x27s\x20Demo'):_0x1afdb1[_0x52e399(0x91)][_0x52e399(0x106)]='none'),_0x4c6496&&(_0x43e184?(_0x4c6496['href']=_0x43e184,_0x4c6496['style']['display']=_0x52e399(0x134),_0x4c6496[_0x52e399(0xb7)]=_0xf0e9af[_0x52e399(0xdd)]+'\x27s\x20Demo'):_0x4c6496['style'][_0x52e399(0x106)]=_0x52e399(0xdc)),_0x29b803&&_0x1afdb1||_0x43e184&&_0x4c6496?_0xf09516['style']['display']='flex':_0xf09516['style'][_0x52e399(0x106)]='none';}_0x312bd2['appendChild'](_0x3937a0);});}function getSubgameClass(_0x3442cb){const _0x25ceb7=a6_0x5557ea,_0x4cf08b={'Fusion\x20Match':_0x25ceb7(0x123),'≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':'blind-match','Rematch':'rematch','Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':_0x25ceb7(0xb3),'Mega\x20Match':'mega-match','Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x4cf08b[_0x3442cb]||'';}async function deleteComment(_0x221bec,_0x2bd3ee){const _0x38e8ac=a6_0x5557ea,_0x45a161=window['auth'][_0x38e8ac(0x117)];if(!_0x45a161){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x5a4145=doc(window['db'],_0x38e8ac(0x110),_0x221bec),_0x14c360=await getDoc(_0x5a4145);if(!_0x14c360[_0x38e8ac(0xea)]()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x415469=_0x14c360['data']();if(_0x415469['userId']!==_0x45a161['uid']){alert(_0x38e8ac(0xe9));return;}await deleteDoc(_0x5a4145);if(_0x2bd3ee&&_0x2bd3ee[_0x38e8ac(0xe5)]){_0x2bd3ee[_0x38e8ac(0xe5)]['removeChild'](_0x2bd3ee);const _0x53f812=_0x2bd3ee[_0x38e8ac(0xd5)](_0x38e8ac(0xad));if(_0x53f812&&!_0x53f812['querySelector'](_0x38e8ac(0xfa))){const _0x2bcaee=_0x53f812['querySelector']('.no-comments-message');if(_0x2bcaee)_0x2bcaee['style']['display']='block';}}console['log']('Comment\x20deleted\x20successfully');}catch(_0x524c24){console[_0x38e8ac(0x9b)](_0x38e8ac(0xec),_0x524c24),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x524c24['message']);}}async function getAllCommentsForMatch(_0x38fc93){const _0x23888a=a6_0x5557ea;if(!_0x38fc93)return[];try{const _0x4152d0=collection(window['db'],_0x23888a(0x110)),_0x158e79=query(_0x4152d0,where(_0x23888a(0x105),'==',_0x38fc93),orderBy(_0x23888a(0x113),_0x23888a(0x8a))),_0xc7e458=await getDocs(_0x158e79);if(_0xc7e458['empty'])return[];return _0xc7e458['docs']['map'](_0x5a3e51=>({'id':_0x5a3e51['id'],..._0x5a3e51['data']()}));}catch(_0xa108ae){return console['error']('Error\x20fetching\x20comments:',_0xa108ae),[];}}async function submitComment(_0x55bcfe){const _0x190ff5=a6_0x5557ea;_0x55bcfe[_0x190ff5(0xcd)]();if(!window['auth']||!window['db']){console[_0x190ff5(0x9b)](_0x190ff5(0x89)),alert(_0x190ff5(0xc1));return;}const _0x1b02ab=window['auth']['currentUser'];if(!_0x1b02ab){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x307650=document['getElementById'](_0x190ff5(0xfc))?.['value'],_0x18fede=document[_0x190ff5(0xc9)]('commentText')?.[_0x190ff5(0x11e)]?.['trim']();if(!_0x307650||!_0x18fede){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x8003e=_0x18fede['split'](/\s+/)['filter'](_0x29e1b7=>_0x29e1b7['length']>0x0)['length'];if(_0x8003e>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.');return;}const _0x35ca3e=document['querySelector']('.submit-comment-btn');_0x35ca3e&&(_0x35ca3e['disabled']=!![],_0x35ca3e[_0x190ff5(0xbe)]='Submitting...');try{let _0x4ebf40='Anonymous';try{const _0x54d196=doc(window['db'],'userProfiles',_0x1b02ab['uid']),_0x1eeb34=await getDoc(_0x54d196);if(_0x1eeb34[_0x190ff5(0xea)]()){const _0x1da323=_0x1eeb34['data']();_0x1da323['username']&&(_0x4ebf40=_0x1da323['username']);}_0x4ebf40==='Anonymous'&&_0x1b02ab[_0x190ff5(0x12c)]&&(_0x4ebf40=_0x1b02ab['displayName']);}catch(_0x1252b5){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x1252b5),_0x1b02ab['displayName']&&(_0x4ebf40=_0x1b02ab['displayName']);}const _0x3f7525={'matchId':_0x307650,'userId':_0x1b02ab[_0x190ff5(0xe2)],'username':_0x4ebf40,'text':_0x18fede,'timestamp':serverTimestamp()};console['log']('Submitting\x20comment\x20as:',_0x4ebf40);const _0x138c6b=collection(window['db'],'matchComments');await addDoc(_0x138c6b,_0x3f7525),console['log']('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview(_0x190ff5(0xe1));}catch(_0x549dac){console[_0x190ff5(0x9b)]('Error\x20submitting\x20comment:',_0x549dac),alert(_0x190ff5(0x103)+_0x549dac['message']),_0x35ca3e&&(_0x35ca3e['disabled']=![],_0x35ca3e['textContent']='Submit');}}function closeAddCommentPopup(){const _0x51269d=a6_0x5557ea,_0x169020=document[_0x51269d(0xc9)]('commentAddPopup'),_0x436b97=document['getElementById'](_0x51269d(0xe0));if(_0x169020)_0x169020['style']['display']=_0x51269d(0xdc);if(_0x436b97)_0x436b97['style']['display']='none';}function showAddCommentPopup(_0x449b81){const _0x1fdc66=a6_0x5557ea,_0x12ac6c=window['auth']['currentUser'];if(!_0x12ac6c){alert(_0x1fdc66(0x12f));return;}let _0x372179=document['getElementById']('commentAddPopup'),_0x21bea2=document[_0x1fdc66(0xc9)]('commentAddOverlay');!_0x372179&&(_0x372179=document['createElement'](_0x1fdc66(0xda)),_0x372179['id']=_0x1fdc66(0x8e),_0x372179['className']='comment-popup',document[_0x1fdc66(0x127)][_0x1fdc66(0xa3)](_0x372179));!_0x21bea2&&(_0x21bea2=document[_0x1fdc66(0xb4)]('div'),_0x21bea2['id']=_0x1fdc66(0xe0),_0x21bea2[_0x1fdc66(0x118)]=_0x1fdc66(0x12e),document['body']['appendChild'](_0x21bea2));_0x372179['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x449b81+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x372179['style'][_0x1fdc66(0x106)]='block',_0x21bea2[_0x1fdc66(0x91)][_0x1fdc66(0x106)]='block',document[_0x1fdc66(0xc9)]('closeAddCommentPopup')['addEventListener']('click',closeAddCommentPopup),_0x21bea2[_0x1fdc66(0x107)]('click',closeAddCommentPopup);const _0xf525b9=_0x372179['querySelectorAll'](_0x1fdc66(0xa1));_0xf525b9['forEach'](_0x1fcf0b=>{_0x1fcf0b['addEventListener']('click',function(){const _0x3bc40d=a6_0x13cb;_0xf525b9['forEach'](_0x3071e2=>_0x3071e2['classList']['remove']('active')),document['querySelectorAll']('.option-content')['forEach'](_0x175ae9=>_0x175ae9[_0x3bc40d(0x91)]['display']='none'),this['classList'][_0x3bc40d(0x7f)]('active');const _0x35867b=this['dataset']['option'];document['getElementById'](_0x35867b+'Option')['style'][_0x3bc40d(0x106)]=_0x3bc40d(0x10f),_0x35867b==='demo'?(document[_0x3bc40d(0xc9)]('demoLink')['setAttribute']('required',''),document['getElementById']('commentText')['removeAttribute']('required')):(document['getElementById']('demoLink')[_0x3bc40d(0xae)](_0x3bc40d(0xfb)),document[_0x3bc40d(0xc9)](_0x3bc40d(0x88))[_0x3bc40d(0x136)]('required',''));});}),document[_0x1fdc66(0xc9)](_0x1fdc66(0x88))['setAttribute']('required',''),document['getElementById']('demoLink')[_0x1fdc66(0xae)]('required'),setupWordCounter('commentText',_0x1fdc66(0x133),0xf),setupWordCounter(_0x1fdc66(0x138),_0x1fdc66(0x102),0x14),document[_0x1fdc66(0xc9)]('addCommentForm')['addEventListener'](_0x1fdc66(0x7c),submitCommentOrDemo);}function setupWordCounter(_0x503190,_0x1bec5b,_0x159c08){const _0x22aa7b=a6_0x5557ea,_0x302001=document['getElementById'](_0x503190),_0x6fcf7b=document['getElementById'](_0x1bec5b);if(!_0x302001||!_0x6fcf7b)return;_0x42e426(),_0x302001[_0x22aa7b(0x107)]('input',_0x42e426);function _0x42e426(){const _0x32c82b=_0x22aa7b,_0x3e6571=_0x302001['value'][_0x32c82b(0x137)](),_0x1c737f=_0x3e6571?_0x3e6571['split'](/\s+/)[_0x32c82b(0xc5)](_0xd70021=>_0xd70021['length']>0x0)['length']:0x0;_0x6fcf7b[_0x32c82b(0xbe)]=_0x1c737f,_0x1c737f>_0x159c08?_0x6fcf7b['style']['color']='#ff4444':_0x6fcf7b[_0x32c82b(0x91)]['color']=_0x32c82b(0x11b);}}function a6_0x13cb(_0x2673e5,_0x444dbe){const _0x3d3cfc=a6_0x4bb7();return a6_0x13cb=function(_0x39424b,_0x4c788a){_0x39424b=_0x39424b-0x7b;let _0x4bb726=_0x3d3cfc[_0x39424b];return _0x4bb726;},a6_0x13cb(_0x2673e5,_0x444dbe);}async function submitCommentOrDemo(_0x5ab123){const _0x547343=a6_0x5557ea;_0x5ab123['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x341106=window['auth']['currentUser'];if(!_0x341106){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x1412a2=document['getElementById']('commentMatchId')[_0x547343(0x11e)],_0x349e7a=document[_0x547343(0x9c)]('.option-tab.active')['dataset'][_0x547343(0xe6)];let _0xa57b21='Anonymous';try{const _0xb2a226=doc(window['db'],_0x547343(0x90),_0x341106['uid']),_0x10a8de=await getDoc(_0xb2a226);if(_0x10a8de['exists']()){const _0x1bdb1b=_0x10a8de['data']();_0x1bdb1b['username']&&(_0xa57b21=_0x1bdb1b['username']);}_0xa57b21==='Anonymous'&&_0x341106['displayName']&&(_0xa57b21=_0x341106['displayName']);}catch(_0x1a6f6c){console['warn'](_0x547343(0xe4),_0x1a6f6c),_0x341106[_0x547343(0x12c)]&&(_0xa57b21=_0x341106['displayName']);}const _0x43df2a=document[_0x547343(0x9c)]('.submit-comment-btn');_0x43df2a&&(_0x43df2a['disabled']=!![],_0x43df2a['textContent']=_0x547343(0xdb));try{if(_0x349e7a===_0x547343(0x83)){const _0x4ab6dd=document[_0x547343(0xc9)]('commentText')[_0x547343(0x11e)]['trim']();if(!_0x4ab6dd){alert(_0x547343(0xdf)),_0x43df2a['disabled']=![],_0x43df2a['textContent']='Submit';return;}const _0x18303b=_0x4ab6dd['split'](/\s+/)[_0x547343(0xc5)](_0x1a6a37=>_0x1a6a37['length']>0x0)[_0x547343(0x12b)];if(_0x18303b>0xf){alert(_0x547343(0xf3)),_0x43df2a['disabled']=![],_0x43df2a[_0x547343(0xbe)]=_0x547343(0xa4);return;}const _0x4b5f11={'matchId':_0x1412a2,'userId':_0x341106['uid'],'username':_0xa57b21,'text':_0x4ab6dd,'type':'comment','timestamp':serverTimestamp()},_0x56bc34=collection(window['db'],'matchComments');await addDoc(_0x56bc34,_0x4b5f11);}else{const _0x9ebc30=document['getElementById'](_0x547343(0x13b))['value']['trim'](),_0x46351d=document['getElementById']('demoDescription')[_0x547343(0x11e)]['trim']()||_0x547343(0x10e);if(!_0x9ebc30){alert('Please\x20enter\x20a\x20demo\x20link'),_0x43df2a['disabled']=![],_0x43df2a[_0x547343(0xbe)]='Submit';return;}try{new URL(_0x9ebc30);}catch(_0x4b06db){alert(_0x547343(0xc3)),_0x43df2a[_0x547343(0x87)]=![],_0x43df2a['textContent']='Submit';return;}const _0x392bec=_0x46351d[_0x547343(0xf0)](/\s+/)['filter'](_0x177ead=>_0x177ead[_0x547343(0x12b)]>0x0)['length'];if(_0x392bec>0x14){alert(_0x547343(0xe3)),_0x43df2a['disabled']=![],_0x43df2a['textContent']='Submit';return;}const _0x38278d={'matchId':_0x1412a2,'userId':_0x341106['uid'],'username':_0xa57b21,'demoLink':_0x9ebc30,'description':_0x46351d,'type':'demo','text':'Demo:\x20'+_0x46351d,'timestamp':serverTimestamp()},_0x31120e=collection(window['db'],_0x547343(0x110));await addDoc(_0x31120e,_0x38278d);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x547343(0xe1));}catch(_0x268690){console['error']('Error\x20submitting:',_0x268690),alert('Failed\x20to\x20submit:\x20'+_0x268690[_0x547343(0x109)]),_0x43df2a&&(_0x43df2a[_0x547343(0x87)]=![],_0x43df2a[_0x547343(0xbe)]='Submit');}}function getEloRankClass(_0x1e0c95){const _0x3f4049=a6_0x5557ea,_0x20bca1=Number(_0x1e0c95);if(_0x20bca1>=0x7d0)return _0x3f4049(0xfd);else{if(_0x20bca1>=0x708)return'gold';else{if(_0x20bca1>=0x640)return _0x3f4049(0xb0);else{if(_0x20bca1>=0x578)return _0x3f4049(0x139);else return'unranked';}}}}function showPreviewCommentPopup(_0x49e994,_0x106349,_0x4f0ce2='#fff'){const _0x3c9473=a6_0x5557ea,_0x11d510=document[_0x3c9473(0xc9)](_0x3c9473(0x93)),_0x119522=document[_0x3c9473(0xc9)]('commentOverlayPreview'),_0x1f617c=document['getElementById'](_0x3c9473(0x81)),_0x59b495=document['getElementById']('commentPopupContentPreview'),_0x393d58=document['getElementById'](_0x3c9473(0xa8));if(!_0x11d510||!_0x119522||!_0x1f617c||!_0x59b495||!_0x393d58)return;_0x11d510[_0x3c9473(0x101)][_0x3c9473(0x88)]=_0x49e994,_0x11d510[_0x3c9473(0x101)]['commentUser']=_0x106349,_0x1f617c[_0x3c9473(0x91)]['color']=_0x4f0ce2,_0x1f617c['textContent']='Comment\x20from\x20'+_0x106349,_0x59b495[_0x3c9473(0xbe)]=_0x49e994,_0x393d58[_0x3c9473(0xba)]=reportComment,_0x11d510[_0x3c9473(0x91)]['display']='block',_0x119522['style']['display']='block';}function closePreviewCommentPopup(){const _0x311e7a=a6_0x5557ea,_0x128d44=document['getElementById'](_0x311e7a(0x93)),_0xee391e=document['getElementById']('commentOverlayPreview');if(_0x128d44)_0x128d44[_0x311e7a(0x91)]['display']='none';if(_0xee391e)_0xee391e['style'][_0x311e7a(0x106)]=_0x311e7a(0xdc);}async function reportComment(){const _0x4c612a=a6_0x5557ea,_0x966ec=window['auth']['currentUser'];if(!_0x966ec){alert(_0x4c612a(0x96));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0x57b79b=document['getElementById']('commentPopupPreview'),_0x54058a={'commentAuthor':_0x57b79b['dataset']['commentUser']||'Unknown\x20User','commentText':_0x57b79b['dataset']['commentText']||'','matchId':previewState['currentMatchId']||'','reportedBy':_0x966ec[_0x4c612a(0xe2)],'reporterUsername':_0x966ec[_0x4c612a(0x12c)]||_0x4c612a(0xa0),'reportedAt':serverTimestamp()},_0x325f87=collection(window['db'],_0x4c612a(0x82));await addDoc(_0x325f87,_0x54058a),alert(_0x4c612a(0xd3)),closePreviewCommentPopup();}catch(_0x76622e){console['error']('Error\x20reporting\x20comment:',_0x76622e),alert(_0x4c612a(0xc8)+_0x76622e[_0x4c612a(0x109)]);}}function showFullCommentLightbox(_0x371036){const _0x3beb5c=a6_0x5557ea;if(isUsernameMuted(_0x371036['username']))return;const _0x482bd5=document[_0x3beb5c(0xc9)]('commentPopupPreview'),_0x3ef9dd=document['getElementById'](_0x3beb5c(0xd7)),_0x467548=document[_0x3beb5c(0xc9)]('commentPopupTitlePreview'),_0x4b9815=document['getElementById']('commentPopupContentPreview');if(!_0x482bd5||!_0x3ef9dd||!_0x467548||!_0x4b9815)return;_0x467548['style']['color']='#fff',_0x467548[_0x3beb5c(0xbe)]='Comment\x20from\x20'+_0x371036['username'];if(_0x371036['timestamp']){const _0x24138f=new Date(_0x371036[_0x3beb5c(0x113)]['seconds']*0x3e8),_0x24e919=_0x24138f['toLocaleString']();_0x4b9815[_0x3beb5c(0xa5)]='<p>'+_0x371036['text']+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x24e919+'</small>';}else _0x4b9815[_0x3beb5c(0xbe)]=_0x371036['text'];_0x482bd5['dataset']['commentId']=_0x371036['id']||'',_0x482bd5['dataset']['commentUser']=_0x371036['username']||'',_0x482bd5['dataset']['commentText']=_0x371036[_0x3beb5c(0x10d)]||'',_0x482bd5[_0x3beb5c(0x101)]['matchId']=_0x371036[_0x3beb5c(0x105)]||'';const _0x362513=_0x482bd5['querySelector']('.popup-actions')||document['createElement']('div');!_0x482bd5[_0x3beb5c(0x9c)](_0x3beb5c(0xde))?(_0x362513[_0x3beb5c(0x118)]='popup-actions',_0x362513['style']['display']='flex',_0x362513[_0x3beb5c(0x91)]['justifyContent']=_0x3beb5c(0x8d),_0x362513[_0x3beb5c(0x91)][_0x3beb5c(0xc0)]='10px',_0x362513[_0x3beb5c(0x91)][_0x3beb5c(0xd6)]='15px',_0x482bd5[_0x3beb5c(0xa3)](_0x362513)):_0x362513['innerHTML']='';const _0x1868b5=document[_0x3beb5c(0xb4)](_0x3beb5c(0xbc));_0x1868b5[_0x3beb5c(0xbe)]='Close',_0x1868b5[_0x3beb5c(0x118)]='popup-btn\x20close-btn',_0x1868b5['id']='closeCommentPopupPreview',_0x1868b5['addEventListener']('click',closePreviewCommentPopup);const _0x28b07e=document['createElement']('button');_0x28b07e[_0x3beb5c(0xbe)]=_0x3beb5c(0xa7),_0x28b07e[_0x3beb5c(0x118)]='popup-btn\x20report-btn',_0x28b07e[_0x3beb5c(0x91)][_0x3beb5c(0xf7)]='#d32f2f',_0x28b07e['addEventListener'](_0x3beb5c(0x131),reportComment),_0x362513['appendChild'](_0x1868b5),_0x362513[_0x3beb5c(0xa3)](_0x28b07e),_0x482bd5['style'][_0x3beb5c(0x106)]='block',_0x3ef9dd['style'][_0x3beb5c(0x106)]='block';}export function setupPreviewEventListeners(){const _0x348c1b=a6_0x5557ea,_0x224bb6=document[_0x348c1b(0xc9)]('previewPrevPage'),_0x3f6241=document['getElementById'](_0x348c1b(0xb2)),_0x6177a8=document['getElementById']('preview-d1-button'),_0x22993=document['getElementById']('preview-d2-button'),_0x1823fb=document['getElementById']('preview-d3-button'),_0x5d4570=document[_0x348c1b(0xc9)]('filter-toggle-button'),_0x5f20a9=document[_0x348c1b(0xc9)]('enhanced-filter-section');if(!_0x224bb6||!_0x3f6241||!_0x6177a8||!_0x22993||!_0x1823fb||!_0x5d4570||!_0x5f20a9){console['warn']('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}_0x224bb6['addEventListener']('click',()=>{if(!_0x224bb6['disabled'])loadRecentMatchesPreview('prev');}),_0x3f6241['addEventListener'](_0x348c1b(0x131),()=>{if(!_0x3f6241['disabled'])loadRecentMatchesPreview('next');}),_0x6177a8[_0x348c1b(0x107)](_0x348c1b(0x131),()=>{const _0x31df99=_0x348c1b;previewState['currentMode']!=='D1'&&!previewState['isLoading']&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x31df99(0xe1)));}),_0x22993['addEventListener']('click',()=>{const _0x5d51ca=_0x348c1b;previewState['currentMode']!=='D2'&&!previewState[_0x5d51ca(0xbb)]&&(previewState[_0x5d51ca(0xf6)]='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x1823fb['addEventListener']('click',()=>{const _0x1345b9=_0x348c1b;previewState['currentMode']!=='D3'&&!previewState['isLoading']&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x1345b9(0xe1)));});_0x5d4570&&_0x5f20a9&&_0x5d4570['addEventListener']('click',()=>{const _0x9f1818=_0x348c1b,_0x31c605=_0x5f20a9['style'][_0x9f1818(0x106)]!=='none';_0x5f20a9[_0x9f1818(0x91)][_0x9f1818(0x106)]=_0x31c605?'none':_0x9f1818(0x10f),_0x5d4570['classList']['toggle']('active',!_0x31c605);});const _0x8930ed=document['getElementById'](_0x348c1b(0xaf)),_0x5eb6b9=document['getElementById'](_0x348c1b(0x112));_0x8930ed&&_0x8930ed[_0x348c1b(0x107)](_0x348c1b(0x131),()=>{const _0x241493=_0x348c1b;previewState[_0x241493(0xc4)]['pilots']=document[_0x241493(0xc9)](_0x241493(0xfe))[_0x241493(0x11e)]['trim'](),previewState[_0x241493(0xc4)]['levels']=document[_0x241493(0xc9)]('filter-levels')[_0x241493(0x11e)]['trim']();const _0x4f5fff=document[_0x241493(0xc9)]('filter-subgames');previewState['enhancedFilters'][_0x241493(0x114)]=Array[_0x241493(0x10b)](_0x4f5fff['selectedOptions'])['map'](_0x483d0a=>_0x483d0a[_0x241493(0x11e)])['filter'](_0xdcb94a=>_0xdcb94a!==''),loadRecentMatchesPreview('current');});_0x5eb6b9&&_0x5eb6b9[_0x348c1b(0x107)](_0x348c1b(0x131),()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document['querySelectorAll']('.jump-btn')['forEach'](_0x5e6949=>{_0x5e6949['addEventListener']('click',()=>{const _0x143921=_0x5e6949['dataset']['jump'];jumpToPage(_0x143921);});});const _0x3980ee=document['getElementById']('jump-to-page');_0x3980ee&&_0x3980ee['addEventListener'](_0x348c1b(0xd9),_0x2ad48c=>{const _0x45d4ac=_0x348c1b;_0x2ad48c['key']===_0x45d4ac(0x128)&&jumpToPage('input');});const _0x58acaa=document['getElementById'](_0x348c1b(0xf9)),_0x50e732=document[_0x348c1b(0xc9)](_0x348c1b(0xd7));if(_0x58acaa)_0x58acaa['addEventListener']('click',closePreviewCommentPopup);if(_0x50e732)_0x50e732[_0x348c1b(0x107)](_0x348c1b(0x131),closePreviewCommentPopup);const _0x964673=document['getElementById'](_0x348c1b(0x92)),_0x173a3a=document['getElementById']('commentAddOverlay'),_0x39a22b=document['getElementById'](_0x348c1b(0x12a));if(_0x964673)_0x964673['addEventListener']('click',closeAddCommentPopup);if(_0x173a3a)_0x173a3a['addEventListener']('click',closeAddCommentPopup);if(_0x39a22b)_0x39a22b[_0x348c1b(0x107)]('submit',submitComment);const _0x4bb5fb=document['getElementById']('commentText'),_0x29d747=document[_0x348c1b(0xc9)]('wordCount');_0x4bb5fb&&_0x29d747&&setupWordCounter('commentText','wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window[a6_0x5557ea(0xac)]=submitComment;