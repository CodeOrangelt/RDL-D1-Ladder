const a44_0x28275c=(function(){let _0x21961f=!![];return function(_0x4efbe7,_0x59ee03){const _0x189656=_0x21961f?function(){if(_0x59ee03){const _0x5122aa=_0x59ee03['apply'](_0x4efbe7,arguments);return _0x59ee03=null,_0x5122aa;}}:function(){};return _0x21961f=![],_0x189656;};}()),a44_0x35f2ae=a44_0x28275c(this,function(){const _0x3b612d=a44_0x85f6,_0x39ff11=function(){const _0x12e645=a44_0x85f6;let _0xc04289;try{_0xc04289=Function(_0x12e645(0x123)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x559b89){_0xc04289=window;}return _0xc04289;},_0x188e05=_0x39ff11(),_0xa6fb08=_0x188e05['console']=_0x188e05['console']||{},_0x1c1292=['log',_0x3b612d(0x117),'info','error','exception','table','trace'];for(let _0x4e0aee=0x0;_0x4e0aee<_0x1c1292['length'];_0x4e0aee++){const _0x5e9f82=a44_0x28275c[_0x3b612d(0x11f)]['prototype']['bind'](a44_0x28275c),_0x353e05=_0x1c1292[_0x4e0aee],_0x17f510=_0xa6fb08[_0x353e05]||_0x5e9f82;_0x5e9f82['__proto__']=a44_0x28275c['bind'](a44_0x28275c),_0x5e9f82['toString']=_0x17f510['toString']['bind'](_0x17f510),_0xa6fb08[_0x353e05]=_0x5e9f82;}});a44_0x35f2ae();function a44_0x36f8(){const _0x54994c=['toDate','none','warn','floor','forEach','username','readyPlayers','Error\x20in\x20queue\x20listener:','lastUpdated','Just\x20now','constructor','display','length','style','return\x20(function()\x20','queue-container'];a44_0x36f8=function(){return _0x54994c;};return a44_0x36f8();}import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function a44_0x85f6(_0x984b4a,_0x51182f){const _0x35f2ae=a44_0x36f8();return a44_0x85f6=function(_0x28275c,_0x3670d4){_0x28275c=_0x28275c-0x115;let _0x36f803=_0x35f2ae[_0x28275c];return _0x36f803;},a44_0x85f6(_0x984b4a,_0x51182f);}function updateQueueDisplay(_0x1eb3e1){const _0x3a3937=a44_0x85f6,_0x41112a=document['getElementById'](_0x3a3937(0x124));if(!_0x41112a)return;if(_0x1eb3e1[_0x3a3937(0x121)]===0x0){_0x41112a['style'][_0x3a3937(0x120)]=_0x3a3937(0x116);return;}_0x41112a[_0x3a3937(0x122)]['display']='block';let _0x4ecfc4='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x1eb3e1['forEach'](_0x1cb4e9=>{const _0x198573=_0x3a3937;_0x4ecfc4+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x1cb4e9[_0x198573(0x11a)]||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x1cb4e9['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x4ecfc4+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x41112a['innerHTML']=_0x4ecfc4;}function formatQueueTime(_0x33ff0b){const _0x2404df=a44_0x85f6;if(!_0x33ff0b)return _0x2404df(0x11e);const _0x2c2e9b=_0x33ff0b[_0x2404df(0x115)]?_0x33ff0b[_0x2404df(0x115)]():new Date(_0x33ff0b),_0x15ce67=new Date(),_0x1495b2=Math[_0x2404df(0x118)]((_0x15ce67-_0x2c2e9b)/0xea60);if(_0x1495b2<0x1)return _0x2404df(0x11e);return _0x1495b2+'m\x20in\x20queue';}async function checkQueueTimeout(_0x19f8af){const _0x1bde9b=a44_0x85f6;if(!_0x19f8af[_0x1bde9b(0x11d)])return;const _0x35b884=_0x19f8af['lastUpdated'][_0x1bde9b(0x115)]?_0x19f8af['lastUpdated'][_0x1bde9b(0x115)]():new Date(_0x19f8af['lastUpdated']),_0x26d60e=new Date(),_0x21cd79=Math['floor']((_0x26d60e-_0x35b884)/0xea60);if(_0x21cd79>=0x1e)try{const _0x15511b=doc(db,_0x1bde9b(0x11b),_0x19f8af['id']);await updateDoc(_0x15511b,{'isReady':![]});}catch(_0x578130){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x578130);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x2e0fe9=>{const _0x2dd52b=a44_0x85f6,_0x35af95=[];_0x2e0fe9[_0x2dd52b(0x119)](_0x8140f5=>{const _0x147c1d=_0x2dd52b,_0x104bc0=_0x8140f5['data']();if(_0x104bc0['isReady']===!![]){const _0x266c6a={'id':_0x8140f5['id'],'username':_0x104bc0[_0x147c1d(0x11a)],'lastUpdated':_0x104bc0['lastUpdated']||new Date()};_0x35af95['push'](_0x266c6a),checkQueueTimeout(_0x266c6a);}}),updateQueueDisplay(_0x35af95);},_0x1466d2=>{const _0x2f8f92=a44_0x85f6;console['error'](_0x2f8f92(0x11c),_0x1466d2);});window['addEventListener']('unload',()=>{unsubscribe();});