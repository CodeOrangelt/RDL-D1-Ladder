const a6_0x130c68=a6_0x4ff3,a6_0x2ca6f9=(function(){let _0x335c0a=!![];return function(_0x59b211,_0x31c4dc){const _0x3f5c67=_0x335c0a?function(){if(_0x31c4dc){const _0x4048e3=_0x31c4dc['apply'](_0x59b211,arguments);return _0x31c4dc=null,_0x4048e3;}}:function(){};return _0x335c0a=![],_0x3f5c67;};}()),a6_0x39f23c=a6_0x2ca6f9(this,function(){const _0x27d48f=a6_0x4ff3,_0x48aa04=function(){const _0x11213e=a6_0x4ff3;let _0xf988e6;try{_0xf988e6=Function(_0x11213e(0x212)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x472f67){_0xf988e6=window;}return _0xf988e6;},_0x3d5c06=_0x48aa04(),_0x2476f7=_0x3d5c06['console']=_0x3d5c06[_0x27d48f(0x202)]||{},_0x63fd6d=['log','warn',_0x27d48f(0x251),_0x27d48f(0x1ce),_0x27d48f(0x256),_0x27d48f(0x24c),'trace'];for(let _0x529ceb=0x0;_0x529ceb<_0x63fd6d['length'];_0x529ceb++){const _0xc9db96=a6_0x2ca6f9[_0x27d48f(0x215)]['prototype']['bind'](a6_0x2ca6f9),_0x2b698c=_0x63fd6d[_0x529ceb],_0x276721=_0x2476f7[_0x2b698c]||_0xc9db96;_0xc9db96[_0x27d48f(0x211)]=a6_0x2ca6f9['bind'](a6_0x2ca6f9),_0xc9db96[_0x27d48f(0x21b)]=_0x276721['toString']['bind'](_0x276721),_0x2476f7[_0x2b698c]=_0xc9db96;}});a6_0x39f23c();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':a6_0x130c68(0x1db),'muteFromDate':new Date('2025-07-02')['getTime']()}];function isUsernameMuted(_0x32dbbe,_0x10426a){const _0x36a549=a6_0x130c68;if(!_0x32dbbe)return![];const _0xe890ef=mutedUsers['find'](_0x1760a4=>_0x1760a4['username']===_0x32dbbe);if(!_0xe890ef)return![];if(!_0x10426a)return!![];const _0x1b31c1=_0x10426a instanceof Date?_0x10426a['getTime']():_0x10426a['seconds']?_0x10426a['seconds']*0x3e8:Date['now']();return _0x1b31c1>=_0xe890ef[_0x36a549(0x205)];}function filterComment(_0x36d109,_0x54aed7,_0x167df8){if(!_0x36d109)return'-';if(isUsernameMuted(_0x54aed7,_0x167df8))return'Muted.';return _0x36d109;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x4fa109,_0x3d833e,_0x4c657e){const _0x275318='u:'+(_0x4c657e['filterUsername']||'');return'previewCache_'+_0x4fa109+'_p'+_0x3d833e+'_'+_0x275318;}function getCachedPage(_0x13b5a2){const _0x525f50=a6_0x130c68,_0x3da3de=sessionStorage['getItem'](_0x13b5a2);if(_0x3da3de)try{return JSON['parse'](_0x3da3de);}catch(_0x16d471){return console[_0x525f50(0x1ce)]('Failed\x20to\x20parse\x20cache:',_0x16d471),sessionStorage[_0x525f50(0x1e3)](_0x13b5a2),null;}return null;}function cachePage(_0x65c933,_0x4b3ef5){const _0x566bf6=a6_0x130c68;try{sessionStorage[_0x566bf6(0x233)](_0x65c933,JSON[_0x566bf6(0x1fb)](_0x4b3ef5));}catch(_0x10d682){console['error']('Failed\x20to\x20cache\x20data:',_0x10d682);}}function a6_0x1cf2(){const _0x56f31e=['.comments-container','color','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments','innerHTML','addEventListener','error','No\x20results\x20found\x20for\x20this\x20page','.option-tab.active','parentNode','popup-actions','lastVisible','commentPopupTitlePreview','loserUsername','commentText','subgames','.comment.winner-comment','seconds','href','Daz','winner-','closeAddCommentPopup','enhanced-filter-section','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','justifyContent','map','closeCommentPopupPreview','removeItem','removeAttribute','demoLink','Winner','approvedAt','.winner-demo-link','exists','currentMode','approvedMatchesD2','.match-date','delete-comment-btn','matchesPerPage','next','Submit','subgameType','querySelector','approvedMatches','blind-match','active','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo','description','onclick','demo','dogfight','stringify','winnerDemoLink','add','Submitting...','demoDescription','max','filter-pilots','console','docs','Delete\x20demo','muteFromDate','length','S:\x20','style','aria-label','split','isLoading','required','filter','textContent','matchComments','Firebase\x20not\x20initialized','__proto__','return\x20(function()\x20','#50C878','applyFilterBtn','constructor','altered-powerups','uid','forEach','remove','toLowerCase','toString','loserOldElo','desc','auth','trim','type','dataset','preview-d3-button','preview-ladder-mode','commentAddPopup','Today','Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.','commentAddOverlay','firstChild','You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment','click','display','15px','currentUser','message','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','none','submitComment','stopPropagation','setItem','jump','\x20days\x20ago','previewNextPage','winnerUsername','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','demoWordCount','createdAt','Anonymous','push','value','Error\x20fetching\x20comments\x20batch:','.delete-comment-btn','data','cursor','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20','username','loading-indicator','default','Error\x20submitting\x20comment:','text','disabled','toggle','commentMatchId','showAddCommentPopup','table','getElementById','setAttribute','Comment\x20from\x20','start','info','pilots','toLocaleString','current','appendChild','exception','filter-subgames','winnerOldElo','recent-matches-preview','Error\x20fetching\x20comments:','preview-d1-button','silver','currentMatchId','block','empty','Loading\x20next\x20page\x20using\x20cursor','className','slice','currentPage','keypress','createElement','...','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','filterUsername','.player.loser\x20.player-score','prev','displayName','userId','log','levels','classList','.no-comments-message','button','.</div>'];a6_0x1cf2=function(){return _0x56f31e;};return a6_0x1cf2();}function getEloColor(_0x256b6c){const _0x5356e6=a6_0x130c68,_0x33fae9=Number(_0x256b6c);if(_0x33fae9>=0x7d0)return _0x5356e6(0x213);else{if(_0x33fae9>=0x708)return'#FFD700';else{if(_0x33fae9>=0x640)return'#b9f1fc';else{if(_0x33fae9>=0x578)return'#CD7F32';else return'#808080';}}}}function formatDate(_0x1f3a3d,_0x45a68c=![]){const _0x1ff576=a6_0x130c68;if(!_0x1f3a3d||!_0x1f3a3d['seconds'])return'N/A';const _0x226b07=new Date(_0x1f3a3d['seconds']*0x3e8);return _0x45a68c?_0x226b07[_0x1ff576(0x253)]():_0x226b07['toLocaleDateString']();}function truncateComment(_0x22bdc4,_0x4037b1=0x1e){if(!_0x22bdc4)return'-';if(_0x22bdc4['length']<=_0x4037b1)return _0x22bdc4;return _0x22bdc4['substring'](0x0,_0x4037b1)+'...';}function formatCommentDate(_0x4908a7){const _0x4305b9=a6_0x130c68;if(!_0x4908a7||!_0x4908a7['seconds'])return'';const _0xe73a5=new Date(_0x4908a7[_0x4305b9(0x1d9)]*0x3e8),_0x3db897=new Date(),_0xa7bbe8=Math['abs'](_0x3db897-_0xe73a5),_0x551d3a=Math['floor'](_0xa7bbe8/(0x3e8*0x3c*0x3c*0x18));if(_0x551d3a===0x0)return _0x4305b9(0x225);else{if(_0x551d3a===0x1)return'Yesterday';else return _0x551d3a<0x7?_0x551d3a+_0x4305b9(0x235):_0xe73a5['toLocaleDateString']();}}function setLoadingIndicator(_0x28aa52){const _0x4119bc=a6_0x130c68,_0x45059e=document['getElementById'](_0x4119bc(0x244));if(_0x45059e)_0x45059e['style']['display']=_0x28aa52?'block':_0x4119bc(0x230);}export function updatePreviewLadderModeUI(){const _0x16cd82=a6_0x130c68,_0x44e2ce=document[_0x16cd82(0x24d)](_0x16cd82(0x223)),_0x1fd277=document['getElementById'](_0x16cd82(0x25b)),_0x5e2808=document['getElementById']('preview-d2-button'),_0x2a6dc4=document['getElementById']('preview-d3-button');if(_0x44e2ce)_0x44e2ce[_0x16cd82(0x20e)]=previewState['currentMode'];if(_0x1fd277)_0x1fd277['classList'][_0x16cd82(0x249)]('active',previewState['currentMode']==='D1');if(_0x5e2808)_0x5e2808[_0x16cd82(0x26f)][_0x16cd82(0x249)]('active',previewState['currentMode']==='D2');if(_0x2a6dc4)_0x2a6dc4['classList']['toggle']('active',previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x280f52){const _0x25ff83=a6_0x130c68,_0x261927=document['getElementById']('previewPrevPage'),_0x1ea21f=document[_0x25ff83(0x24d)]('previewNextPage'),_0x17f81e=document['getElementById']('previewPageInfo');if(!_0x261927||!_0x1ea21f||!_0x17f81e)return;_0x17f81e['textContent']='Page\x20'+previewState[_0x25ff83(0x263)],_0x261927[_0x25ff83(0x248)]=previewState['currentPage']<=0x1,_0x1ea21f[_0x25ff83(0x248)]=!_0x280f52;}function setPreviewLoadingState(_0x375aa5){const _0x4de276=a6_0x130c68;previewState[_0x4de276(0x20b)]=_0x375aa5,setLoadingIndicator(_0x375aa5);const _0x1df3da=document['getElementById'](_0x4de276(0x259)),_0x50dd47=_0x1df3da?_0x1df3da[_0x4de276(0x1f2)]('.matches-loading'):null,_0x4f49ac=document['getElementById']('previewPrevPage'),_0xb5e977=document['getElementById']('previewNextPage'),_0xcdc4ad=document['getElementById']('preview-d1-button'),_0x584938=document['getElementById']('preview-d2-button'),_0x2aafb8=document[_0x4de276(0x24d)](_0x4de276(0x214)),_0x113e61=document['getElementById']('clearFilterBtn');if(_0x50dd47&&!_0x375aa5)_0x50dd47['style']['display']='none';else _0x50dd47&&_0x375aa5&&(_0x50dd47[_0x4de276(0x208)][_0x4de276(0x22b)]='block');!_0x375aa5&&_0x1df3da&&!_0x1df3da[_0x4de276(0x1f2)]('.match-card')&&!_0x1df3da['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x1df3da['innerHTML']=_0x4de276(0x267)+(previewState[_0x4de276(0x268)]?'\x20matching\x20filters':'')+'.</div>');if(_0x4f49ac)_0x4f49ac[_0x4de276(0x248)]=_0x375aa5||previewState[_0x4de276(0x263)]<=0x1;if(_0xb5e977)_0xb5e977['disabled']=_0x375aa5;if(_0xcdc4ad)_0xcdc4ad[_0x4de276(0x248)]=_0x375aa5;if(_0x584938)_0x584938['disabled']=_0x375aa5;if(_0x2aafb8)_0x2aafb8[_0x4de276(0x248)]=_0x375aa5;if(_0x113e61)_0x113e61['disabled']=_0x375aa5;}function applyClientFilters(_0x28b8e9){const _0x1cac5c=a6_0x130c68;if(!previewState['filterUsername'])return _0x28b8e9;const _0x163ed3=previewState[_0x1cac5c(0x268)][_0x1cac5c(0x21a)]();return _0x28b8e9[_0x1cac5c(0x20d)](_0x1b6080=>{const _0x6bc83e=(_0x1b6080['winnerUsername']||'')['toLowerCase'](),_0xda0f4f=(_0x1b6080['loserUsername']||'')['toLowerCase']();return _0x6bc83e['includes'](_0x163ed3)||_0xda0f4f['includes'](_0x163ed3);});}function applyEnhancedClientFilters(_0x10d9c7){if(!hasEnhancedFilters())return _0x10d9c7;return _0x10d9c7['filter'](_0x21cc42=>{const _0x35082d=a6_0x4ff3;if(previewState['enhancedFilters'][_0x35082d(0x252)]){const _0x5a6b4a=previewState['enhancedFilters'][_0x35082d(0x252)]['toLowerCase'](),_0x4fe56a=(_0x21cc42['winnerUsername']||'')['toLowerCase'](),_0x3775f1=(_0x21cc42['loserUsername']||'')['toLowerCase']();if(!_0x4fe56a['includes'](_0x5a6b4a)&&!_0x3775f1['includes'](_0x5a6b4a))return![];}if(previewState['enhancedFilters'][_0x35082d(0x26e)]){const _0x37a07b=previewState['enhancedFilters'][_0x35082d(0x26e)]['toLowerCase'](),_0xaa4dbc=(_0x21cc42['mapPlayed']||'')['toLowerCase']();if(!_0xaa4dbc['includes'](_0x37a07b))return![];}if(previewState['enhancedFilters']['subgames'][_0x35082d(0x206)]>0x0){const _0x29d60d=_0x21cc42['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters'][_0x35082d(0x1d7)]['includes'](_0x29d60d))return![];}return!![];});}function hasEnhancedFilters(){return previewState['enhancedFilters']['pilots']||previewState['enhancedFilters']['levels']||previewState['enhancedFilters']['subgames']['length']>0x0;}function clearEnhancedFilters(){const _0x3ce783=a6_0x130c68;previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document['getElementById'](_0x3ce783(0x201))[_0x3ce783(0x23d)]='',document['getElementById']('filter-levels')['value']='';const _0x1dfb57=document['getElementById'](_0x3ce783(0x257));for(let _0x4dd4d8 of _0x1dfb57['options']){_0x4dd4d8['selected']=![];}}function jumpToPage(_0x2fc250){const _0x37fed8=a6_0x130c68,_0x53cc8d=document['getElementById']('jump-to-page'),_0x3409e1=previewState[_0x37fed8(0x263)];let _0x402b0b=_0x3409e1;switch(_0x2fc250){case _0x37fed8(0x250):_0x402b0b=0x1;break;case'end':_0x402b0b=Math[_0x37fed8(0x200)](_0x3409e1+0xa,previewState['totalPages']||_0x3409e1+0xa);break;case'+1':_0x402b0b=_0x3409e1+0x1;break;case'+5':_0x402b0b=_0x3409e1+0x5;break;case'+10':_0x402b0b=_0x3409e1+0xa;break;case'-1':_0x402b0b=Math['max'](0x1,_0x3409e1-0x1);break;case'-5':_0x402b0b=Math[_0x37fed8(0x200)](0x1,_0x3409e1-0x5);break;case'-10':_0x402b0b=Math['max'](0x1,_0x3409e1-0xa);break;case'input':const _0x6e59bd=parseInt(_0x53cc8d['value']);_0x6e59bd&&_0x6e59bd>0x0&&(_0x402b0b=_0x6e59bd,_0x53cc8d['value']='');break;}_0x402b0b!==_0x3409e1&&_0x402b0b>0x0&&(previewState[_0x37fed8(0x263)]=_0x402b0b,loadRecentMatchesPreview(_0x37fed8(0x234)));}export async function loadRecentMatchesPreview(_0x567a63='current'){const _0x1177c1=a6_0x130c68,_0x5dfb89=document['getElementById']('recent-matches-preview'),_0x137f70=document['getElementById']('match-card-template');if(previewState['isLoading']||!_0x5dfb89||!_0x137f70)return;_0x567a63==='current'&&(console[_0x1177c1(0x26d)]('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)['forEach'](_0x4c98c1=>{const _0x14aa8a=_0x1177c1;_0x4c98c1['includes']('previewCache_'+previewState['currentMode'])&&sessionStorage[_0x14aa8a(0x1e3)](_0x4c98c1);}));let _0x16c2e5=previewState[_0x1177c1(0x263)];if(_0x567a63==='next')_0x16c2e5++;else{if(_0x567a63==='prev')_0x16c2e5--;else _0x567a63==='current'&&(_0x16c2e5=0x1,previewState['firstVisible']=null,previewState['lastVisible']=null);}if(_0x16c2e5<0x1)_0x16c2e5=0x1;const _0x3010fb=previewState['currentPage'];previewState['currentPage']=_0x16c2e5,updatePreviewPaginationControls(!![]);const _0x5dd45c={'filterUsername':previewState['filterUsername']},_0x155c2a=getCacheKey(previewState[_0x1177c1(0x1ea)],_0x16c2e5,_0x5dd45c),_0x53c37f=_0x567a63!=='current'?getCachedPage(_0x155c2a):null;if(_0x53c37f){console['log']('Rendering\x20page\x20'+_0x16c2e5+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0x53c37f['docsData']),updatePreviewPaginationControls(_0x53c37f['hasNextPage']),setPreviewLoadingState(![]);return;}console['log']('Cache\x20miss\x20for\x20page\x20'+_0x16c2e5+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0x5dfb89['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x3fbbe5=previewState['currentMode']==='D1'?_0x1177c1(0x1f3):previewState['currentMode']==='D2'?_0x1177c1(0x1eb):'approvedMatchesD3',_0x2cf82b=previewState['currentMode']==='D1'?_0x1177c1(0x23a):'approvedAt';try{const _0x5069b2=collection(window['db'],_0x3fbbe5);let _0x44af95=[orderBy(_0x2cf82b,'desc')];if(_0x16c2e5===0x1)console['log']('Loading\x20first\x20page\x20from\x20Firestore'),_0x44af95[_0x1177c1(0x23c)](limit(previewState['matchesPerPage']));else{if(_0x567a63==='next'&&previewState['lastVisible'])console['log'](_0x1177c1(0x260)),_0x44af95['push'](startAfter(previewState['lastVisible'])),_0x44af95[_0x1177c1(0x23c)](limit(previewState[_0x1177c1(0x1ee)]));else{console[_0x1177c1(0x26d)]('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x5d35db=_0x16c2e5*previewState['matchesPerPage'];_0x44af95['push'](limit(_0x5d35db));}}const _0x78ec0e=query(_0x5069b2,..._0x44af95),_0x33fed5=await getDocs(_0x78ec0e);let _0x2cd879=_0x33fed5['docs'];if(_0x16c2e5>0x1&&_0x567a63!=='next'){const _0x3bc167=(_0x16c2e5-0x1)*previewState[_0x1177c1(0x1ee)];_0x2cd879=_0x2cd879[_0x1177c1(0x262)](_0x3bc167,_0x3bc167+previewState['matchesPerPage']);}if(_0x2cd879['length']===0x0){console[_0x1177c1(0x26d)](_0x1177c1(0x1cf));_0x567a63==='next'&&(previewState['currentPage']=_0x3010fb,updatePreviewPaginationControls(![]));_0x5dfb89['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState[_0x1177c1(0x268)]?'\x20matching\x20filters':'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x2cd879[0x0],previewState[_0x1177c1(0x1d3)]=_0x2cd879[_0x2cd879[_0x1177c1(0x206)]-0x1];const _0x5ef95b=_0x2cd879['map'](_0x429fb3=>({'id':_0x429fb3['id'],..._0x429fb3[_0x1177c1(0x240)]()}));let _0x848e2f=![];if(_0x2cd879['length']===previewState[_0x1177c1(0x1ee)]){const _0x36e44e=query(_0x5069b2,orderBy(_0x2cf82b,_0x1177c1(0x21d)),startAfter(previewState['lastVisible']),limit(0x1)),_0x22e84e=await getDocs(_0x36e44e);_0x848e2f=!_0x22e84e[_0x1177c1(0x25f)];}const _0x285f80=applyClientFilters(_0x5ef95b),_0xa300de={'docsData':_0x5ef95b,'hasNextPage':_0x848e2f};cachePage(getCacheKey(previewState['currentMode'],previewState['currentPage'],_0x5dd45c),_0xa300de);if(_0x16c2e5>0x1&&_0x567a63!=='next')for(let _0x4a499a=0x1;_0x4a499a<_0x16c2e5;_0x4a499a++){const _0x24c7cf=(_0x4a499a-0x1)*previewState[_0x1177c1(0x1ee)],_0x292ecc=_0x24c7cf+previewState['matchesPerPage'],_0x7cedce=_0x33fed5['docs'][_0x1177c1(0x262)](_0x24c7cf,_0x292ecc);if(_0x7cedce['length']>0x0){const _0x372d58=_0x7cedce[_0x1177c1(0x1e1)](_0x24f63c=>({'id':_0x24f63c['id'],..._0x24f63c[_0x1177c1(0x240)]()})),_0x3033ed=!![];cachePage(getCacheKey(previewState['currentMode'],_0x4a499a,_0x5dd45c),{'docsData':_0x372d58,'hasNextPage':_0x3033ed}),console[_0x1177c1(0x26d)]('Cached\x20intermediary\x20page\x20'+_0x4a499a);}}_0x285f80[_0x1177c1(0x206)]===0x0&&previewState['filterUsername']?_0x5dfb89[_0x1177c1(0x1cc)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState['filterUsername']+'\x22</div>':renderMatchCards(_0x285f80),updatePreviewPaginationControls(_0x848e2f);}catch(_0x4d59b5){console['error']('Error\x20fetching\x20'+previewState['currentMode']+'\x20matches:',_0x4d59b5),_0x5dfb89['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x4d59b5[_0x1177c1(0x22e)]+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x3010fb;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x5a3923){const _0xdbcc28=a6_0x130c68,_0x3d2be8=document[_0xdbcc28(0x24d)](_0xdbcc28(0x259)),_0x43592d=document['getElementById']('match-card-template');if(!_0x3d2be8||!_0x43592d)return;!_0x3d2be8['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x3d2be8['innerHTML']='');if(!_0x5a3923||_0x5a3923[_0xdbcc28(0x206)]===0x0){if(!_0x3d2be8['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x5e2636=hasEnhancedFilters()?'\x20matching\x20filters':previewState[_0xdbcc28(0x268)]?'\x20matching\x20filters':'';_0x3d2be8[_0xdbcc28(0x1cc)]='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x5e2636+_0xdbcc28(0x272);}return;}const _0x1221ea=applyEnhancedClientFilters(_0x5a3923);if(_0x1221ea['length']===0x0){_0x3d2be8[_0xdbcc28(0x1cc)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x2d5c8c=_0x1221ea[_0xdbcc28(0x1e1)](_0x10162f=>getAllCommentsForMatch(_0x10162f['id']));let _0x49d5a5=[];try{_0x49d5a5=await Promise['all'](_0x2d5c8c);}catch(_0x328075){console['error'](_0xdbcc28(0x23e),_0x328075),_0x49d5a5=_0x1221ea[_0xdbcc28(0x1e1)](()=>[]);}const _0x2e4d17={};_0x49d5a5['forEach']((_0x5e5960,_0x4a84d2)=>{_0x2e4d17[_0x1221ea[_0x4a84d2]['id']]=_0x5e5960||[];}),_0x1221ea['forEach'](_0x1f6b91=>{const _0x53e975=_0xdbcc28,_0x2a42d7=_0x43592d['content']['cloneNode'](!![]),_0x33e660=_0x2a42d7['querySelector']('.match-display-wrapper'),_0x38c339=_0x2a42d7['querySelector']('.match-card'),_0x5313ea=getEloRankClass(_0x1f6b91['winnerOldElo']);_0x38c339[_0x53e975(0x26f)][_0x53e975(0x1fd)](_0x53e975(0x1dc)+_0x5313ea),_0x38c339['querySelector']('.match-map')['textContent']=_0x1f6b91['mapPlayed']||'Unknown\x20Map',_0x38c339['querySelector'](_0x53e975(0x1ec))['textContent']=formatDate(_0x1f6b91[_0x53e975(0x1e7)]||_0x1f6b91['createdAt']);const _0x2c740f=_0x38c339['querySelector']('.player.winner\x20.player-name');_0x2c740f['textContent']=_0x1f6b91['winnerUsername']||'Unknown',_0x2c740f['style']['color']=getEloColor(_0x1f6b91[_0x53e975(0x258)]),_0x38c339['querySelector']('.player.winner\x20.player-score')['textContent']=_0x1f6b91['winnerScore']??0x0;const _0x53e7bf=_0x38c339['querySelector']('.player.winner\x20.player-suicides'),_0x23f3da=_0x1f6b91['winnerSuicides']||0x0;_0x53e7bf['textContent']=_0x53e975(0x207)+_0x23f3da;const _0x283757=_0x38c339['querySelector']('.player.loser\x20.player-name');_0x283757[_0x53e975(0x20e)]=_0x1f6b91['loserUsername']||'Unknown',_0x283757[_0x53e975(0x208)][_0x53e975(0x1ca)]=getEloColor(_0x1f6b91[_0x53e975(0x21c)]),_0x38c339[_0x53e975(0x1f2)](_0x53e975(0x269))['textContent']=_0x1f6b91['loserScore']??0x0;const _0x48ee36=_0x38c339['querySelector']('.player.loser\x20.player-suicides'),_0x2593c6=_0x1f6b91['loserSuicides']||0x0;_0x48ee36['textContent']='S:\x20'+_0x2593c6;const _0x5e15ea=_0x38c339[_0x53e975(0x1f2)]('.match-subgame');if(_0x5e15ea){if(_0x1f6b91[_0x53e975(0x1f1)]&&_0x1f6b91['subgameType'][_0x53e975(0x21f)]()!==''){_0x5e15ea['textContent']=_0x1f6b91['subgameType'],_0x5e15ea['style'][_0x53e975(0x22b)]='block';const _0x237814=getSubgameClass(_0x1f6b91['subgameType']);_0x237814&&_0x5e15ea[_0x53e975(0x26f)]['add'](_0x237814);}else _0x5e15ea[_0x53e975(0x20e)]='Standard\x20Match',_0x5e15ea['style'][_0x53e975(0x22b)]='block',_0x5e15ea['style']['opacity']='0.6';}const _0x50296f=_0x38c339['querySelector'](_0x53e975(0x1d8)),_0x4ad571=_0x38c339[_0x53e975(0x1f2)]('.comment.loser-comment'),_0x2836b6=_0x1f6b91['winnerComment']||'',_0x1f0caf=_0x1f6b91['loserComment']||'',_0x5e7a60=_0x1f6b91['approvedAt']||_0x1f6b91['createdAt'],_0x43856f=filterComment(_0x2836b6,_0x1f6b91['winnerUsername'],_0x5e7a60),_0x493b86=filterComment(_0x1f0caf,_0x1f6b91['loserUsername'],_0x5e7a60);_0x50296f['textContent']='\x22'+truncateComment(_0x2836b6)+'\x22',_0x4ad571[_0x53e975(0x20e)]='\x22'+truncateComment(_0x1f0caf)+'\x22';_0x2836b6&&!isUsernameMuted(_0x1f6b91[_0x53e975(0x237)],_0x5e7a60)?_0x50296f['onclick']=()=>showPreviewCommentPopup(_0x43856f,_0x1f6b91['winnerUsername']||_0x53e975(0x1e6),getEloColor(_0x1f6b91[_0x53e975(0x258)])):(_0x50296f['textContent']=_0x43856f==='Muted.'?'Muted.':'-',_0x50296f[_0x53e975(0x208)][_0x53e975(0x241)]=_0x53e975(0x245),_0x50296f['onclick']=null);_0x1f0caf&&!isUsernameMuted(_0x1f6b91[_0x53e975(0x1d5)])?_0x4ad571['onclick']=()=>showPreviewCommentPopup(_0x493b86,_0x1f6b91['loserUsername']||'Loser',getEloColor(_0x1f6b91['loserOldElo'])):(_0x4ad571['textContent']=_0x493b86==='Muted.'?'Muted.':'-',_0x4ad571['style']['cursor']='default',_0x4ad571[_0x53e975(0x1f8)]=null);const _0x4a582b=_0x33e660?.['querySelector']('.community-comments-section');if(!_0x4a582b)console['warn']('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0x186cf9=_0x4a582b['querySelector']('.comments-container'),_0x2a3a6d=_0x186cf9?.[_0x53e975(0x1f2)](_0x53e975(0x270)),_0x408d6d=_0x4a582b['querySelector']('.add-comment-btn');if(_0x186cf9){while(_0x186cf9[_0x53e975(0x228)]&&_0x186cf9['firstChild']!==_0x2a3a6d){_0x186cf9['removeChild'](_0x186cf9[_0x53e975(0x228)]);}_0x408d6d&&_0x408d6d['addEventListener'](_0x53e975(0x22a),()=>{showAddCommentPopup(_0x1f6b91['id']);});const _0x1c6c12=_0x2e4d17[_0x1f6b91['id']]||[];if(_0x1c6c12['length']>0x0){if(_0x2a3a6d)_0x2a3a6d[_0x53e975(0x208)][_0x53e975(0x22b)]=_0x53e975(0x230);const _0x3c35f2=(_0x2de405,_0x2c444a)=>{const _0xc684fa=_0x53e975,_0x42f135=_0x2de405[_0xc684fa(0x20a)]('\x20');if(_0x42f135[_0xc684fa(0x206)]<=_0x2c444a)return _0x2de405;return _0x42f135['slice'](0x0,_0x2c444a)['join']('\x20')+_0xc684fa(0x266);};_0x1c6c12[_0x53e975(0x218)](_0x84e088=>{const _0x135f90=_0x53e975,_0xf417ea=document['createElement']('div');if(_0x84e088[_0x135f90(0x220)]===_0x135f90(0x1f9)){_0xf417ea['className']='demo-link',_0xf417ea['innerHTML']=_0x135f90(0x238)+_0x84e088[_0x135f90(0x1e5)]+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x84e088['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x84e088[_0x135f90(0x1f7)]||'No\x20description\x20provided')+_0x135f90(0x1df);const _0x361e4b=window['auth']['currentUser'],_0xec08f6=_0x361e4b&&_0x84e088[_0x135f90(0x26c)]===_0x361e4b['uid'];if(_0xec08f6){const _0x4bf1a7=document[_0x135f90(0x265)]('button');_0x4bf1a7[_0x135f90(0x261)]=_0x135f90(0x1ed),_0x4bf1a7['innerHTML']='×',_0x4bf1a7['setAttribute'](_0x135f90(0x209),_0x135f90(0x204)),_0x4bf1a7['addEventListener'](_0x135f90(0x22a),_0x504271=>{const _0x4d4dec=_0x135f90;_0x504271['preventDefault'](),_0x504271[_0x4d4dec(0x232)](),deleteComment(_0x84e088['id'],_0xf417ea);}),_0xf417ea[_0x135f90(0x255)](_0x4bf1a7);}}else{_0xf417ea['className']='comment-item';const _0x571ea5=isUsernameMuted(_0x84e088[_0x135f90(0x243)],_0x84e088['timestamp']),_0x1ab068=_0x571ea5?'Muted.':_0x3c35f2(_0x84e088[_0x135f90(0x247)]||'',0xf),_0x3b7f7b=_0x84e088[_0x135f90(0x243)]||'Anonymous',_0x10b2bd=window['auth'][_0x135f90(0x22d)],_0x5674c4=_0x10b2bd&&_0x84e088['userId']===_0x10b2bd[_0x135f90(0x217)];let _0x3bf26f='';_0x5674c4&&(_0x3bf26f='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');_0xf417ea[_0x135f90(0x1cc)]=_0x3bf26f+'<strong>'+_0x3b7f7b+':</strong>\x20\x22'+_0x1ab068+'\x22';if(_0x5674c4){const _0x32316a=_0xf417ea['querySelector'](_0x135f90(0x23f));_0x32316a&&_0x32316a['addEventListener']('click',_0x504f8e=>{_0x504f8e['stopPropagation'](),deleteComment(_0x84e088['id'],_0xf417ea);});}!_0x571ea5?_0xf417ea[_0x135f90(0x1cd)]('click',()=>{showFullCommentLightbox(_0x84e088);}):_0xf417ea[_0x135f90(0x208)][_0x135f90(0x241)]='default';}_0x186cf9['insertBefore'](_0xf417ea,_0x186cf9[_0x135f90(0x228)]);});}else{if(_0x2a3a6d)_0x2a3a6d[_0x53e975(0x208)]['display']='block';}}}const _0x595c7e=_0x38c339[_0x53e975(0x1f2)]('.match-demo-links');if(_0x595c7e){const _0x1c2773=_0x38c339['querySelector'](_0x53e975(0x1e8)),_0x13c00d=_0x38c339[_0x53e975(0x1f2)]('.loser-demo-link'),_0x32f196=_0x1f6b91[_0x53e975(0x1fc)]||null,_0x1068d2=_0x1f6b91['loserDemoLink']||_0x1f6b91['demoLink']||null;console['log']('Match\x20'+_0x1f6b91['id']+'\x20demo\x20links:',{'winner':_0x32f196,'loser':_0x1068d2}),_0x1c2773&&(_0x32f196?(_0x1c2773[_0x53e975(0x1da)]=_0x32f196,_0x1c2773['style'][_0x53e975(0x22b)]='flex',_0x1c2773['title']=_0x1f6b91['winnerUsername']+'\x27s\x20Demo'):_0x1c2773['style']['display']='none'),_0x13c00d&&(_0x1068d2?(_0x13c00d['href']=_0x1068d2,_0x13c00d['style']['display']='flex',_0x13c00d['title']=_0x1f6b91['loserUsername']+'\x27s\x20Demo'):_0x13c00d['style']['display']='none'),_0x32f196&&_0x1c2773||_0x1068d2&&_0x13c00d?_0x595c7e[_0x53e975(0x208)]['display']='flex':_0x595c7e[_0x53e975(0x208)]['display']='none';}_0x3d2be8['appendChild'](_0x2a42d7);});}function getSubgameClass(_0x4bc89e){const _0x2aa12c=a6_0x130c68,_0x2fc437={'Fusion\x20Match':'fusion-match','≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':_0x2aa12c(0x1f4),'Rematch':'rematch','Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':_0x2aa12c(0x216),'Mega\x20Match':'mega-match','Dogfight':_0x2aa12c(0x1fa),'Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x2fc437[_0x4bc89e]||'';}async function deleteComment(_0x2460e3,_0x280df6){const _0x58dcbd=a6_0x130c68,_0xfc2d3e=window['auth']['currentUser'];if(!_0xfc2d3e){alert(_0x58dcbd(0x1cb));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x50d1bd=doc(window['db'],_0x58dcbd(0x20f),_0x2460e3),_0x15136d=await getDoc(_0x50d1bd);if(!_0x15136d[_0x58dcbd(0x1e9)]()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0xcd4d30=_0x15136d['data']();if(_0xcd4d30['userId']!==_0xfc2d3e['uid']){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x50d1bd);if(_0x280df6&&_0x280df6['parentNode']){_0x280df6[_0x58dcbd(0x1d1)]['removeChild'](_0x280df6);const _0x57313c=_0x280df6['closest'](_0x58dcbd(0x1c9));if(_0x57313c&&!_0x57313c[_0x58dcbd(0x1f2)]('.comment-item')){const _0x5298f3=_0x57313c[_0x58dcbd(0x1f2)]('.no-comments-message');if(_0x5298f3)_0x5298f3[_0x58dcbd(0x208)][_0x58dcbd(0x22b)]='block';}}console['log']('Comment\x20deleted\x20successfully');}catch(_0x399cae){console[_0x58dcbd(0x1ce)]('Error\x20deleting\x20comment:',_0x399cae),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x399cae['message']);}}async function getAllCommentsForMatch(_0x260255){const _0x9566be=a6_0x130c68;if(!_0x260255)return[];try{const _0x17fd59=collection(window['db'],'matchComments'),_0x7a32b4=query(_0x17fd59,where('matchId','==',_0x260255),orderBy('timestamp','desc')),_0x35ae53=await getDocs(_0x7a32b4);if(_0x35ae53[_0x9566be(0x25f)])return[];return _0x35ae53[_0x9566be(0x203)][_0x9566be(0x1e1)](_0x1765c1=>({'id':_0x1765c1['id'],..._0x1765c1[_0x9566be(0x240)]()}));}catch(_0x4771e2){return console['error'](_0x9566be(0x25a),_0x4771e2),[];}}async function submitComment(_0x4b12b3){const _0x5a494f=a6_0x130c68;_0x4b12b3['preventDefault']();if(!window['auth']||!window['db']){console[_0x5a494f(0x1ce)]('Firebase\x20not\x20initialized'),alert(_0x5a494f(0x22f));return;}const _0x4cab51=window['auth'][_0x5a494f(0x22d)];if(!_0x4cab51){alert(_0x5a494f(0x229));return;}const _0x247264=document[_0x5a494f(0x24d)](_0x5a494f(0x24a))?.['value'],_0x2c0b83=document['getElementById']('commentText')?.['value']?.['trim']();if(!_0x247264||!_0x2c0b83){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x4a73fc=_0x2c0b83[_0x5a494f(0x20a)](/\s+/)[_0x5a494f(0x20d)](_0x2b5107=>_0x2b5107['length']>0x0)[_0x5a494f(0x206)];if(_0x4a73fc>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.');return;}const _0x18a6de=document[_0x5a494f(0x1f2)]('.submit-comment-btn');_0x18a6de&&(_0x18a6de[_0x5a494f(0x248)]=!![],_0x18a6de['textContent']=_0x5a494f(0x1fe));try{let _0x32c6f5='Anonymous';try{const _0x1355be=doc(window['db'],'userProfiles',_0x4cab51[_0x5a494f(0x217)]),_0x32a444=await getDoc(_0x1355be);if(_0x32a444['exists']()){const _0x4104a4=_0x32a444['data']();_0x4104a4[_0x5a494f(0x243)]&&(_0x32c6f5=_0x4104a4['username']);}_0x32c6f5==='Anonymous'&&_0x4cab51['displayName']&&(_0x32c6f5=_0x4cab51['displayName']);}catch(_0x329fb6){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x329fb6),_0x4cab51['displayName']&&(_0x32c6f5=_0x4cab51['displayName']);}const _0x4c4b02={'matchId':_0x247264,'userId':_0x4cab51['uid'],'username':_0x32c6f5,'text':_0x2c0b83,'timestamp':serverTimestamp()};console['log']('Submitting\x20comment\x20as:',_0x32c6f5);const _0x2d45d8=collection(window['db'],'matchComments');await addDoc(_0x2d45d8,_0x4c4b02),console[_0x5a494f(0x26d)]('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x3e3964){console['error'](_0x5a494f(0x246),_0x3e3964),alert('Failed\x20to\x20add\x20comment:\x20'+_0x3e3964['message']),_0x18a6de&&(_0x18a6de['disabled']=![],_0x18a6de[_0x5a494f(0x20e)]='Submit');}}function closeAddCommentPopup(){const _0x20942e=a6_0x130c68,_0x4792db=document['getElementById']('commentAddPopup'),_0x1427d6=document['getElementById']('commentAddOverlay');if(_0x4792db)_0x4792db['style'][_0x20942e(0x22b)]=_0x20942e(0x230);if(_0x1427d6)_0x1427d6[_0x20942e(0x208)][_0x20942e(0x22b)]='none';}function showAddCommentPopup(_0x44de22){const _0x2506f4=a6_0x130c68,_0x4e2a57=window['auth']['currentUser'];if(!_0x4e2a57){alert(_0x2506f4(0x1f6));return;}let _0x2b6e2a=document['getElementById']('commentAddPopup'),_0x4e3b7e=document['getElementById']('commentAddOverlay');!_0x2b6e2a&&(_0x2b6e2a=document['createElement']('div'),_0x2b6e2a['id']=_0x2506f4(0x224),_0x2b6e2a['className']='comment-popup',document['body']['appendChild'](_0x2b6e2a));!_0x4e3b7e&&(_0x4e3b7e=document['createElement']('div'),_0x4e3b7e['id']=_0x2506f4(0x227),_0x4e3b7e[_0x2506f4(0x261)]='comment-overlay',document['body']['appendChild'](_0x4e3b7e));_0x2b6e2a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x44de22+_0x2506f4(0x242),_0x2b6e2a['style']['display']=_0x2506f4(0x25e),_0x4e3b7e['style']['display']='block',document['getElementById'](_0x2506f4(0x1dd))['addEventListener']('click',closeAddCommentPopup),_0x4e3b7e['addEventListener']('click',closeAddCommentPopup);const _0x8a0bbc=_0x2b6e2a['querySelectorAll']('.option-tab');_0x8a0bbc['forEach'](_0x5db1da=>{const _0x5655f2=_0x2506f4;_0x5db1da[_0x5655f2(0x1cd)]('click',function(){const _0x37222c=_0x5655f2;_0x8a0bbc[_0x37222c(0x218)](_0x44289b=>_0x44289b['classList'][_0x37222c(0x219)](_0x37222c(0x1f5))),document['querySelectorAll']('.option-content')['forEach'](_0x5e81a6=>_0x5e81a6['style'][_0x37222c(0x22b)]='none'),this['classList']['add'](_0x37222c(0x1f5));const _0x36fa07=this['dataset']['option'];document['getElementById'](_0x36fa07+'Option')['style']['display']='block',_0x36fa07===_0x37222c(0x1f9)?(document['getElementById'](_0x37222c(0x1e5))[_0x37222c(0x24e)]('required',''),document['getElementById']('commentText')[_0x37222c(0x1e4)]('required')):(document[_0x37222c(0x24d)]('demoLink')['removeAttribute'](_0x37222c(0x20c)),document['getElementById'](_0x37222c(0x1d6))['setAttribute'](_0x37222c(0x20c),''));});}),document['getElementById']('commentText')['setAttribute']('required',''),document['getElementById']('demoLink')['removeAttribute']('required'),setupWordCounter('commentText','wordCount',0xf),setupWordCounter(_0x2506f4(0x1ff),_0x2506f4(0x239),0x14),document['getElementById']('addCommentForm')['addEventListener']('submit',submitCommentOrDemo);}function setupWordCounter(_0x5766ea,_0x41cbbf,_0x5027ff){const _0x3803d5=a6_0x130c68,_0x57c415=document[_0x3803d5(0x24d)](_0x5766ea),_0x55df96=document[_0x3803d5(0x24d)](_0x41cbbf);if(!_0x57c415||!_0x55df96)return;_0x55375f(),_0x57c415['addEventListener']('input',_0x55375f);function _0x55375f(){const _0x424b47=_0x3803d5,_0x1539cb=_0x57c415['value']['trim'](),_0x55172c=_0x1539cb?_0x1539cb[_0x424b47(0x20a)](/\s+/)['filter'](_0x40fea9=>_0x40fea9['length']>0x0)['length']:0x0;_0x55df96['textContent']=_0x55172c,_0x55172c>_0x5027ff?_0x55df96['style']['color']='#ff4444':_0x55df96['style']['color']='#aaa';}}async function submitCommentOrDemo(_0x10d284){const _0x363867=a6_0x130c68;_0x10d284['preventDefault']();if(!window['auth']||!window['db']){console['error'](_0x363867(0x210)),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x3cc21c=window['auth']['currentUser'];if(!_0x3cc21c){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x573cf0=document[_0x363867(0x24d)]('commentMatchId')['value'],_0x42a12a=document['querySelector'](_0x363867(0x1d0))['dataset']['option'];let _0x1efb96=_0x363867(0x23b);try{const _0x2fd08c=doc(window['db'],'userProfiles',_0x3cc21c['uid']),_0x3a7335=await getDoc(_0x2fd08c);if(_0x3a7335['exists']()){const _0x46fd86=_0x3a7335['data']();_0x46fd86[_0x363867(0x243)]&&(_0x1efb96=_0x46fd86['username']);}_0x1efb96==='Anonymous'&&_0x3cc21c['displayName']&&(_0x1efb96=_0x3cc21c['displayName']);}catch(_0x4e2567){console['warn']('Failed\x20to\x20fetch\x20username:',_0x4e2567),_0x3cc21c['displayName']&&(_0x1efb96=_0x3cc21c[_0x363867(0x26b)]);}const _0x36b43b=document['querySelector']('.submit-comment-btn');_0x36b43b&&(_0x36b43b[_0x363867(0x248)]=!![],_0x36b43b['textContent']='Submitting...');try{if(_0x42a12a==='comment'){const _0x33cbb5=document['getElementById']('commentText')['value'][_0x363867(0x21f)]();if(!_0x33cbb5){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x36b43b['disabled']=![],_0x36b43b['textContent']='Submit';return;}const _0x20ed69=_0x33cbb5[_0x363867(0x20a)](/\s+/)[_0x363867(0x20d)](_0x59c266=>_0x59c266[_0x363867(0x206)]>0x0)['length'];if(_0x20ed69>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.'),_0x36b43b['disabled']=![],_0x36b43b['textContent']='Submit';return;}const _0x526999={'matchId':_0x573cf0,'userId':_0x3cc21c['uid'],'username':_0x1efb96,'text':_0x33cbb5,'type':'comment','timestamp':serverTimestamp()},_0x64758a=collection(window['db'],'matchComments');await addDoc(_0x64758a,_0x526999);}else{const _0x5af2ae=document['getElementById']('demoLink')[_0x363867(0x23d)][_0x363867(0x21f)](),_0x326f16=document[_0x363867(0x24d)]('demoDescription')['value']['trim']()||'Demo\x20link';if(!_0x5af2ae){alert('Please\x20enter\x20a\x20demo\x20link'),_0x36b43b['disabled']=![],_0x36b43b[_0x363867(0x20e)]='Submit';return;}try{new URL(_0x5af2ae);}catch(_0x423641){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x36b43b['disabled']=![],_0x36b43b['textContent']=_0x363867(0x1f0);return;}const _0x575698=_0x326f16['split'](/\s+/)['filter'](_0x3097d5=>_0x3097d5[_0x363867(0x206)]>0x0)['length'];if(_0x575698>0x14){alert('Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.'),_0x36b43b[_0x363867(0x248)]=![],_0x36b43b['textContent']='Submit';return;}const _0x7daa0a={'matchId':_0x573cf0,'userId':_0x3cc21c[_0x363867(0x217)],'username':_0x1efb96,'demoLink':_0x5af2ae,'description':_0x326f16,'type':'demo','text':'Demo:\x20'+_0x326f16,'timestamp':serverTimestamp()},_0x369d88=collection(window['db'],_0x363867(0x20f));await addDoc(_0x369d88,_0x7daa0a);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x363867(0x254));}catch(_0x526490){console['error']('Error\x20submitting:',_0x526490),alert('Failed\x20to\x20submit:\x20'+_0x526490['message']),_0x36b43b&&(_0x36b43b[_0x363867(0x248)]=![],_0x36b43b['textContent']=_0x363867(0x1f0));}}function getEloRankClass(_0x223452){const _0x58a217=a6_0x130c68,_0x16cf88=Number(_0x223452);if(_0x16cf88>=0x7d0)return'emerald';else{if(_0x16cf88>=0x708)return'gold';else{if(_0x16cf88>=0x640)return _0x58a217(0x25c);else{if(_0x16cf88>=0x578)return'bronze';else return'unranked';}}}}function showPreviewCommentPopup(_0x450ccd,_0x8fec5f,_0x288496='#fff'){const _0x382359=a6_0x130c68,_0x2d4f93=document['getElementById']('commentPopupPreview'),_0x228536=document['getElementById']('commentOverlayPreview'),_0x45ad14=document['getElementById'](_0x382359(0x1d4)),_0x5b396c=document[_0x382359(0x24d)]('commentPopupContentPreview'),_0xbeef91=document['getElementById']('reportCommentButton');if(!_0x2d4f93||!_0x228536||!_0x45ad14||!_0x5b396c||!_0xbeef91)return;_0x2d4f93['dataset']['commentText']=_0x450ccd,_0x2d4f93['dataset']['commentUser']=_0x8fec5f,_0x45ad14['style']['color']=_0x288496,_0x45ad14['textContent']=_0x382359(0x24f)+_0x8fec5f,_0x5b396c[_0x382359(0x20e)]=_0x450ccd,_0xbeef91['onclick']=reportComment,_0x2d4f93['style']['display']='block',_0x228536['style']['display']='block';}function closePreviewCommentPopup(){const _0x2f0cdb=a6_0x130c68,_0x3f6c95=document['getElementById']('commentPopupPreview'),_0x400588=document['getElementById']('commentOverlayPreview');if(_0x3f6c95)_0x3f6c95['style']['display']=_0x2f0cdb(0x230);if(_0x400588)_0x400588['style']['display']='none';}async function reportComment(){const _0x561f68=a6_0x130c68,_0x21e2b1=window[_0x561f68(0x21e)]['currentUser'];if(!_0x21e2b1){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0x489fb8=document[_0x561f68(0x24d)]('commentPopupPreview'),_0x4342cf={'commentAuthor':_0x489fb8['dataset']['commentUser']||'Unknown\x20User','commentText':_0x489fb8[_0x561f68(0x221)]['commentText']||'','matchId':previewState[_0x561f68(0x25d)]||'','reportedBy':_0x21e2b1['uid'],'reporterUsername':_0x21e2b1['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},_0x210db1=collection(window['db'],'badComments');await addDoc(_0x210db1,_0x4342cf),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x104ff9){console[_0x561f68(0x1ce)]('Error\x20reporting\x20comment:',_0x104ff9),alert('Failed\x20to\x20report\x20comment:\x20'+_0x104ff9['message']);}}function a6_0x4ff3(_0x1e5d93,_0x4d6b48){const _0x39f23c=a6_0x1cf2();return a6_0x4ff3=function(_0x2ca6f9,_0x336cd2){_0x2ca6f9=_0x2ca6f9-0x1c9;let _0x1cf2e5=_0x39f23c[_0x2ca6f9];return _0x1cf2e5;},a6_0x4ff3(_0x1e5d93,_0x4d6b48);}function showFullCommentLightbox(_0x1303b1){const _0x4b89c7=a6_0x130c68;if(isUsernameMuted(_0x1303b1['username']))return;const _0x20be01=document[_0x4b89c7(0x24d)]('commentPopupPreview'),_0x34c6e6=document['getElementById']('commentOverlayPreview'),_0x38e5f4=document['getElementById']('commentPopupTitlePreview'),_0x443d6e=document['getElementById']('commentPopupContentPreview');if(!_0x20be01||!_0x34c6e6||!_0x38e5f4||!_0x443d6e)return;_0x38e5f4['style']['color']='#fff',_0x38e5f4[_0x4b89c7(0x20e)]='Comment\x20from\x20'+_0x1303b1[_0x4b89c7(0x243)];if(_0x1303b1['timestamp']){const _0x4d0258=new Date(_0x1303b1['timestamp']['seconds']*0x3e8),_0x5c3584=_0x4d0258['toLocaleString']();_0x443d6e['innerHTML']='<p>'+_0x1303b1['text']+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x5c3584+'</small>';}else _0x443d6e['textContent']=_0x1303b1[_0x4b89c7(0x247)];_0x20be01[_0x4b89c7(0x221)]['commentId']=_0x1303b1['id']||'',_0x20be01[_0x4b89c7(0x221)]['commentUser']=_0x1303b1[_0x4b89c7(0x243)]||'',_0x20be01['dataset'][_0x4b89c7(0x1d6)]=_0x1303b1[_0x4b89c7(0x247)]||'',_0x20be01['dataset']['matchId']=_0x1303b1['matchId']||'';const _0x25e4e2=_0x20be01['querySelector']('.popup-actions')||document['createElement']('div');!_0x20be01['querySelector']('.popup-actions')?(_0x25e4e2['className']=_0x4b89c7(0x1d2),_0x25e4e2['style'][_0x4b89c7(0x22b)]='flex',_0x25e4e2['style'][_0x4b89c7(0x1e0)]='center',_0x25e4e2['style']['gap']='10px',_0x25e4e2['style']['marginTop']=_0x4b89c7(0x22c),_0x20be01[_0x4b89c7(0x255)](_0x25e4e2)):_0x25e4e2['innerHTML']='';const _0x47e994=document['createElement']('button');_0x47e994[_0x4b89c7(0x20e)]='Close',_0x47e994['className']='popup-btn\x20close-btn',_0x47e994['id']=_0x4b89c7(0x1e2),_0x47e994['addEventListener']('click',closePreviewCommentPopup);const _0x397a72=document['createElement'](_0x4b89c7(0x271));_0x397a72[_0x4b89c7(0x20e)]='Report',_0x397a72['className']='popup-btn\x20report-btn',_0x397a72[_0x4b89c7(0x208)]['backgroundColor']='#d32f2f',_0x397a72[_0x4b89c7(0x1cd)]('click',reportComment),_0x25e4e2['appendChild'](_0x47e994),_0x25e4e2['appendChild'](_0x397a72),_0x20be01['style']['display']='block',_0x34c6e6['style']['display']='block';}export function setupPreviewEventListeners(){const _0x463b0e=a6_0x130c68,_0xf822fb=document['getElementById']('previewPrevPage'),_0x1b429b=document['getElementById'](_0x463b0e(0x236)),_0x32cb73=document['getElementById']('preview-d1-button'),_0x1149af=document['getElementById']('preview-d2-button'),_0x4dcd14=document['getElementById'](_0x463b0e(0x222)),_0x59440a=document['getElementById']('filter-toggle-button'),_0x446662=document['getElementById'](_0x463b0e(0x1de));if(!_0xf822fb||!_0x1b429b||!_0x32cb73||!_0x1149af||!_0x4dcd14||!_0x59440a||!_0x446662){console['warn'](_0x463b0e(0x226));return;}_0xf822fb[_0x463b0e(0x1cd)](_0x463b0e(0x22a),()=>{const _0x1f88a6=_0x463b0e;if(!_0xf822fb[_0x1f88a6(0x248)])loadRecentMatchesPreview(_0x1f88a6(0x26a));}),_0x1b429b[_0x463b0e(0x1cd)]('click',()=>{const _0x1be9bb=_0x463b0e;if(!_0x1b429b['disabled'])loadRecentMatchesPreview(_0x1be9bb(0x1ef));}),_0x32cb73['addEventListener']('click',()=>{previewState['currentMode']!=='D1'&&!previewState['isLoading']&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x1149af['addEventListener']('click',()=>{const _0x2bb0ba=_0x463b0e;previewState['currentMode']!=='D2'&&!previewState[_0x2bb0ba(0x20b)]&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x4dcd14['addEventListener'](_0x463b0e(0x22a),()=>{const _0x29bb7b=_0x463b0e;previewState['currentMode']!=='D3'&&!previewState[_0x29bb7b(0x20b)]&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x59440a&&_0x446662&&_0x59440a['addEventListener'](_0x463b0e(0x22a),()=>{const _0x5cf280=_0x463b0e,_0x1ff376=_0x446662['style']['display']!=='none';_0x446662[_0x5cf280(0x208)]['display']=_0x1ff376?_0x5cf280(0x230):_0x5cf280(0x25e),_0x59440a[_0x5cf280(0x26f)]['toggle'](_0x5cf280(0x1f5),!_0x1ff376);});const _0x17f2e3=document['getElementById']('apply-enhanced-filters'),_0x49ee5d=document[_0x463b0e(0x24d)]('clear-enhanced-filters');_0x17f2e3&&_0x17f2e3[_0x463b0e(0x1cd)]('click',()=>{const _0x3ea8ee=_0x463b0e;previewState['enhancedFilters']['pilots']=document['getElementById']('filter-pilots')[_0x3ea8ee(0x23d)][_0x3ea8ee(0x21f)](),previewState['enhancedFilters']['levels']=document[_0x3ea8ee(0x24d)]('filter-levels')[_0x3ea8ee(0x23d)][_0x3ea8ee(0x21f)]();const _0x3aed81=document[_0x3ea8ee(0x24d)](_0x3ea8ee(0x257));previewState['enhancedFilters']['subgames']=Array['from'](_0x3aed81['selectedOptions'])[_0x3ea8ee(0x1e1)](_0x859f52=>_0x859f52['value'])['filter'](_0x22cee6=>_0x22cee6!==''),loadRecentMatchesPreview('current');});_0x49ee5d&&_0x49ee5d['addEventListener']('click',()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document['querySelectorAll']('.jump-btn')[_0x463b0e(0x218)](_0xaa400b=>{_0xaa400b['addEventListener']('click',()=>{const _0x339f5a=_0xaa400b['dataset']['jump'];jumpToPage(_0x339f5a);});});const _0x30e0e0=document['getElementById']('jump-to-page');_0x30e0e0&&_0x30e0e0['addEventListener'](_0x463b0e(0x264),_0x5370cf=>{_0x5370cf['key']==='Enter'&&jumpToPage('input');});const _0xc8885b=document[_0x463b0e(0x24d)]('closeCommentPopupPreview'),_0x186614=document[_0x463b0e(0x24d)]('commentOverlayPreview');if(_0xc8885b)_0xc8885b['addEventListener']('click',closePreviewCommentPopup);if(_0x186614)_0x186614['addEventListener']('click',closePreviewCommentPopup);const _0x2c02c1=document['getElementById']('closeAddCommentPopup'),_0x574901=document['getElementById'](_0x463b0e(0x227)),_0x23b359=document['getElementById']('addCommentForm');if(_0x2c02c1)_0x2c02c1['addEventListener']('click',closeAddCommentPopup);if(_0x574901)_0x574901['addEventListener']('click',closeAddCommentPopup);if(_0x23b359)_0x23b359['addEventListener']('submit',submitComment);const _0x41e380=document['getElementById']('commentText'),_0x556f38=document['getElementById']('wordCount');_0x41e380&&_0x556f38&&setupWordCounter(_0x463b0e(0x1d6),'wordCount',0xf);}window[a6_0x130c68(0x24b)]=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window[a6_0x130c68(0x231)]=submitComment;