const a10_0x429045=a10_0x261d;function a10_0x261d(_0x5002c4,_0x377752){const _0x18e05f=a10_0x251d();return a10_0x261d=function(_0x1f6095,_0x476c01){_0x1f6095=_0x1f6095-0x8a;let _0x3cd060=_0x18e05f[_0x1f6095];return _0x3cd060;},a10_0x261d(_0x5002c4,_0x377752);}(function(_0x139cad,_0x2a5ccf){const _0x3bb11b=a10_0x261d,_0x3ed933=_0x139cad();while(!![]){try{const _0x9b1272=-parseInt(_0x3bb11b(0xc9))/0x1+-parseInt(_0x3bb11b(0x8b))/0x2+parseInt(_0x3bb11b(0x94))/0x3*(parseInt(_0x3bb11b(0xd5))/0x4)+-parseInt(_0x3bb11b(0x96))/0x5*(parseInt(_0x3bb11b(0xcd))/0x6)+-parseInt(_0x3bb11b(0xa8))/0x7+-parseInt(_0x3bb11b(0xad))/0x8*(-parseInt(_0x3bb11b(0xaf))/0x9)+parseInt(_0x3bb11b(0x8f))/0xa;if(_0x9b1272===_0x2a5ccf)break;else _0x3ed933['push'](_0x3ed933['shift']());}catch(_0x4d19d1){_0x3ed933['push'](_0x3ed933['shift']());}}}(a10_0x251d,0xd4395));function a10_0x251d(){const _0x1e2298=['Error\x20fetching\x20username:','warn','top','addEventListener','username','data','getItem','10217144WIuPlF','observe','pendingMatchesD2','block','all','16IxVHPa','right','6787629kOSQIC','approved','uid','50%','winnerEmail','999','(((.+)+)+)+$','prototype','info','docs','zIndex','stringify','exception','trace','playersD2','DOMContentLoaded','display','toString','report-match-notification','borderRadius','{}.constructor(\x22return\x20this\x22)(\x20)','pendingMatches','error','position','search','setItem','1296299qNdDiO','users','parse','absolute','887988lrnCev','removeItem','pendingMatchesCache','2px\x20solid\x20white','Error\x20checking\x20pending\x20matches:','length','apply','constructor','2686744JXTwaY','playersD3','disconnect','1048688GKvxQS','now','getElementById','email','35974340QIStZz','console','10px','-5px','height','3rPlFAR','log','55BAJqXQ','bind','border','userId','currentUsername','return\x20(function()\x20','empty','__proto__','style','table','players'];a10_0x251d=function(){return _0x1e2298;};return a10_0x251d();}const a10_0x4a79f4=(function(){let _0x313a1b=!![];return function(_0x49a168,_0x1c3a87){const _0x4e638c=_0x313a1b?function(){const _0x2fe6df=a10_0x261d;if(_0x1c3a87){const _0x538b43=_0x1c3a87[_0x2fe6df(0xd3)](_0x49a168,arguments);return _0x1c3a87=null,_0x538b43;}}:function(){};return _0x313a1b=![],_0x4e638c;};}()),a10_0x2f86d5=a10_0x4a79f4(this,function(){const _0x280fd8=a10_0x261d;return a10_0x2f86d5[_0x280fd8(0xc0)]()[_0x280fd8(0xc7)]('(((.+)+)+)+$')['toString']()[_0x280fd8(0xd4)](a10_0x2f86d5)[_0x280fd8(0xc7)](_0x280fd8(0xb5));});a10_0x2f86d5();const a10_0x476c01=(function(){let _0x1e2192=!![];return function(_0x2280ea,_0xe6b420){const _0x1da211=_0x1e2192?function(){const _0x534608=a10_0x261d;if(_0xe6b420){const _0x476267=_0xe6b420[_0x534608(0xd3)](_0x2280ea,arguments);return _0xe6b420=null,_0x476267;}}:function(){};return _0x1e2192=![],_0x1da211;};}()),a10_0x1f6095=a10_0x476c01(this,function(){const _0x437746=a10_0x261d,_0x1abb61=function(){const _0x548b04=a10_0x261d;let _0x1cc0ac;try{_0x1cc0ac=Function(_0x548b04(0x9b)+_0x548b04(0xc3)+');')();}catch(_0x18ba09){_0x1cc0ac=window;}return _0x1cc0ac;},_0x245970=_0x1abb61(),_0x117170=_0x245970[_0x437746(0x90)]=_0x245970['console']||{},_0x577601=[_0x437746(0x95),_0x437746(0xa2),_0x437746(0xb7),'error',_0x437746(0xbb),_0x437746(0x9f),_0x437746(0xbc)];for(let _0x4684e1=0x0;_0x4684e1<_0x577601[_0x437746(0xd2)];_0x4684e1++){const _0x3229ed=a10_0x476c01[_0x437746(0xd4)][_0x437746(0xb6)][_0x437746(0x97)](a10_0x476c01),_0x365f27=_0x577601[_0x4684e1],_0xedee22=_0x117170[_0x365f27]||_0x3229ed;_0x3229ed[_0x437746(0x9d)]=a10_0x476c01['bind'](a10_0x476c01),_0x3229ed[_0x437746(0xc0)]=_0xedee22[_0x437746(0xc0)][_0x437746(0x97)](_0xedee22),_0x117170[_0x365f27]=_0x3229ed;}});a10_0x1f6095();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a10_0x429045(0xcf),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x3ffc42=![]){const _0x7579c6=a10_0x429045,_0x190f38=Date[_0x7579c6(0x8c)](),_0x66c53d=checkNotificationCache();if(_0x66c53d!==null&&!_0x3ffc42){updateNotificationDot(_0x66c53d);if(_0x190f38-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x190f38;const _0x238c81=auth['currentUser'];if(!_0x238c81){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x5497cf,_0x45e772,_0x337471]=await Promise[_0x7579c6(0xac)]([checkForPendingMatchesInCollection(_0x238c81,_0x7579c6(0xc4)),checkForPendingMatchesInCollection(_0x238c81,_0x7579c6(0xaa)),checkForPendingMatchesInCollection(_0x238c81,'pendingMatchesD3')]),_0x408b51=_0x5497cf||_0x45e772||_0x337471;updateNotificationDot(_0x408b51),updateNotificationCache(_0x408b51);}catch(_0x508173){console['error'](_0x7579c6(0xd1),_0x508173);}}async function checkForPendingMatchesInCollection(_0x5d7b69,_0x56e682){const _0xacbed5=a10_0x429045,_0x8ff281=_0x5d7b69['uid'],_0x45e902=_0x5d7b69[_0xacbed5(0x8e)],_0xc9765e=query(collection(db,_0x56e682),where('winnerId','==',_0x8ff281),where('approved','==',![])),_0x1cb4ac=await getDocs(_0xc9765e);if(!_0x1cb4ac['empty'])return!![];if(_0x45e902){const _0x55fc81=query(collection(db,_0x56e682),where(_0xacbed5(0xb3),'==',_0x45e902),where(_0xacbed5(0xb0),'==',![])),_0xf26ea7=await getDocs(_0x55fc81);if(!_0xf26ea7[_0xacbed5(0x9c)])return!![];}let _0x11f245=await getUsernameFromAllSources(_0x5d7b69);if(_0x11f245){const _0x303281=query(collection(db,_0x56e682),where('winnerUsername','==',_0x11f245),where(_0xacbed5(0xb0),'==',![])),_0x40e634=await getDocs(_0x303281);if(!_0x40e634[_0xacbed5(0x9c)])return!![];}return![];}async function getUsernameFromAllSources(_0x34eae7){const _0xa3e3f7=a10_0x429045,_0x26ba74=localStorage[_0xa3e3f7(0xa7)](_0xa3e3f7(0x9a));if(_0x26ba74)return _0x26ba74;try{const [_0x3e06ac,_0x5cf2bf,_0x5603e2]=await Promise['all']([getDocs(query(collection(db,_0xa3e3f7(0xa0)),where('userId','==',_0x34eae7['uid']))),getDocs(query(collection(db,_0xa3e3f7(0xbd)),where(_0xa3e3f7(0x99),'==',_0x34eae7[_0xa3e3f7(0xb1)]))),getDocs(query(collection(db,_0xa3e3f7(0xd6)),where('userId','==',_0x34eae7[_0xa3e3f7(0xb1)])))]);if(!_0x3e06ac['empty']){const _0x3ee26=_0x3e06ac[_0xa3e3f7(0xb8)][0x0][_0xa3e3f7(0xa6)]()[_0xa3e3f7(0xa5)];return localStorage[_0xa3e3f7(0xc8)]('currentUsername',_0x3ee26),_0x3ee26;}if(!_0x5cf2bf['empty']){const _0x4f14d0=_0x5cf2bf[_0xa3e3f7(0xb8)][0x0][_0xa3e3f7(0xa6)]()[_0xa3e3f7(0xa5)];return localStorage[_0xa3e3f7(0xc8)](_0xa3e3f7(0x9a),_0x4f14d0),_0x4f14d0;}if(!_0x5603e2[_0xa3e3f7(0x9c)]){const _0x3e3ecd=_0x5603e2[_0xa3e3f7(0xb8)][0x0]['data']()['username'];return localStorage[_0xa3e3f7(0xc8)]('currentUsername',_0x3e3ecd),_0x3e3ecd;}const _0x1f6f24=await getDoc(doc(db,_0xa3e3f7(0xca),_0x34eae7[_0xa3e3f7(0xb1)]));if(_0x1f6f24['exists']()&&_0x1f6f24['data']()[_0xa3e3f7(0xa5)]){const _0x4e8475=_0x1f6f24[_0xa3e3f7(0xa6)]()['username'];return localStorage[_0xa3e3f7(0xc8)](_0xa3e3f7(0x9a),_0x4e8475),_0x4e8475;}}catch(_0xe012c1){console[_0xa3e3f7(0xc5)](_0xa3e3f7(0xa1),_0xe012c1);}if(_0x34eae7[_0xa3e3f7(0x8e)])return _0x34eae7['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x58ecb9){const _0x1f3f03=a10_0x429045,_0x280fad={'status':_0x58ecb9,'timestamp':Date['now']()};localStorage[_0x1f3f03(0xc8)](NOTIFICATION_CACHE_KEY,JSON[_0x1f3f03(0xba)](_0x280fad));}function checkNotificationCache(){const _0x54d2ea=a10_0x429045,_0x182b2e=localStorage[_0x54d2ea(0xa7)](NOTIFICATION_CACHE_KEY);if(!_0x182b2e)return null;try{const {status:_0x35f2ee,timestamp:_0x8bb450}=JSON[_0x54d2ea(0xcb)](_0x182b2e),_0x20f32d=Date[_0x54d2ea(0x8c)]();if(_0x20f32d-_0x8bb450<CACHE_EXPIRY)return _0x35f2ee;}catch(_0x3277fe){}return null;}export function updateNotificationDot(_0x52a60c){const _0x472806=a10_0x429045,_0x547896=new MutationObserver((_0x332004,_0x48e28f)=>{const _0x25722b=a10_0x261d,_0x399118=document[_0x25722b(0x8d)](_0x25722b(0xc1));_0x399118&&(updateDotStyle(_0x399118,_0x52a60c),_0x48e28f[_0x25722b(0x8a)]());});_0x547896[_0x472806(0xa9)](document['body'],{'childList':!![],'subtree':!![]});const _0x1b096a=document[_0x472806(0x8d)](_0x472806(0xc1));_0x1b096a&&(updateDotStyle(_0x1b096a,_0x52a60c),_0x547896['disconnect']()),setTimeout(()=>_0x547896[_0x472806(0x8a)](),0x1388);}function updateDotStyle(_0x486ece,_0x34bf2d){const _0xeb490b=a10_0x429045;_0x34bf2d?(_0x486ece[_0xeb490b(0x9e)][_0xeb490b(0xbf)]=_0xeb490b(0xab),_0x486ece[_0xeb490b(0x9e)]['backgroundColor']='#ff3b30',_0x486ece['style']['width']=_0xeb490b(0x91),_0x486ece['style'][_0xeb490b(0x93)]=_0xeb490b(0x91),_0x486ece[_0xeb490b(0x9e)][_0xeb490b(0xc6)]=_0xeb490b(0xcc),_0x486ece[_0xeb490b(0x9e)][_0xeb490b(0xa3)]=_0xeb490b(0x92),_0x486ece[_0xeb490b(0x9e)][_0xeb490b(0xae)]='-8px',_0x486ece[_0xeb490b(0x9e)][_0xeb490b(0xc2)]=_0xeb490b(0xb2),_0x486ece['style'][_0xeb490b(0x98)]=_0xeb490b(0xd0),_0x486ece[_0xeb490b(0x9e)][_0xeb490b(0xb9)]=_0xeb490b(0xb4)):_0x486ece[_0xeb490b(0x9e)][_0xeb490b(0xbf)]='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10_0x429045(0xa4)](a10_0x429045(0xbe),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x2b682a=a10_0x261d;localStorage[_0x2b682a(0xce)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});