const a43_0x2df0c7=a43_0x2698,a43_0x1147f5=(function(){let _0x431ded=!![];return function(_0x49f8f5,_0x406fae){const _0x42657c=_0x431ded?function(){if(_0x406fae){const _0x16af3e=_0x406fae['apply'](_0x49f8f5,arguments);return _0x406fae=null,_0x16af3e;}}:function(){};return _0x431ded=![],_0x42657c;};}()),a43_0x4536c2=a43_0x1147f5(this,function(){const _0x1d7b08=a43_0x2698,_0x12fe96=function(){let _0x18c727;try{_0x18c727=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3c36bc){_0x18c727=window;}return _0x18c727;},_0x1c313b=_0x12fe96(),_0x294173=_0x1c313b['console']=_0x1c313b['console']||{},_0x51e4ff=['log','warn','info','error','exception','table','trace'];for(let _0x4f6a3a=0x0;_0x4f6a3a<_0x51e4ff['length'];_0x4f6a3a++){const _0x178348=a43_0x1147f5['constructor']['prototype'][_0x1d7b08(0x13c)](a43_0x1147f5),_0x130c49=_0x51e4ff[_0x4f6a3a],_0x27bdc5=_0x294173[_0x130c49]||_0x178348;_0x178348[_0x1d7b08(0x137)]=a43_0x1147f5[_0x1d7b08(0x13c)](a43_0x1147f5),_0x178348['toString']=_0x27bdc5['toString']['bind'](_0x27bdc5),_0x294173[_0x130c49]=_0x178348;}});a43_0x4536c2();import{db}from'./firebase-config.js';function a43_0x5845(){const _0x31c349=['data','innerHTML','unload','__proto__','readyPlayers','Error\x20removing\x20player\x20from\x20queue:','lastUpdated','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','bind','floor','Just\x20now','queue-container','toDate','isReady','m\x20in\x20queue'];a43_0x5845=function(){return _0x31c349;};return a43_0x5845();}function a43_0x2698(_0x4eb43f,_0x10e0bb){const _0x4536c2=a43_0x5845();return a43_0x2698=function(_0x1147f5,_0x4fbaa7){_0x1147f5=_0x1147f5-0x134;let _0x584541=_0x4536c2[_0x1147f5];return _0x584541;},a43_0x2698(_0x4eb43f,_0x10e0bb);}import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a43_0x2df0c7(0x138)),activePlayersQuery=query(readyPlayersRef,where(a43_0x2df0c7(0x141),'==',!![]));function updateQueueDisplay(_0x24ea45){const _0x3d0461=a43_0x2df0c7,_0x51202a=document['getElementById'](_0x3d0461(0x13f));if(!_0x51202a)return;if(_0x24ea45['length']===0x0){_0x51202a['style']['display']='none';return;}_0x51202a['style']['display']='block';let _0x1981d3='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x24ea45['forEach'](_0x37743d=>{const _0x46a2a5=_0x3d0461;_0x1981d3+=_0x46a2a5(0x13b)+(_0x37743d['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x37743d['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x1981d3+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x51202a[_0x3d0461(0x135)]=_0x1981d3;}function formatQueueTime(_0x41cac7){const _0x121f3e=a43_0x2df0c7;if(!_0x41cac7)return _0x121f3e(0x13e);const _0x1fcb48=_0x41cac7['toDate']?_0x41cac7['toDate']():new Date(_0x41cac7),_0x15a634=new Date(),_0x102d65=Math['floor']((_0x15a634-_0x1fcb48)/0xea60);if(_0x102d65<0x1)return'Just\x20now';return _0x102d65+_0x121f3e(0x142);}async function checkQueueTimeout(_0x908796){const _0xd7b50b=a43_0x2df0c7;if(!_0x908796[_0xd7b50b(0x13a)])return;const _0x7ca5e6=_0x908796['lastUpdated']['toDate']?_0x908796['lastUpdated'][_0xd7b50b(0x140)]():new Date(_0x908796[_0xd7b50b(0x13a)]),_0x17838f=new Date(),_0x1c0f45=Math[_0xd7b50b(0x13d)]((_0x17838f-_0x7ca5e6)/0xea60);if(_0x1c0f45>=0x1e)try{const _0x146fd2=doc(db,_0xd7b50b(0x138),_0x908796['id']);await updateDoc(_0x146fd2,{'isReady':![]});}catch(_0x67d3ca){console['error'](_0xd7b50b(0x139),_0x67d3ca);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x1f7e57=>{const _0x237586=[];_0x1f7e57['forEach'](_0x5f480b=>{const _0x3852d3=a43_0x2698,_0x4e9232=_0x5f480b[_0x3852d3(0x134)]();if(_0x4e9232['isReady']===!![]){const _0xe2c3f3={'id':_0x5f480b['id'],'username':_0x4e9232['username'],'lastUpdated':_0x4e9232[_0x3852d3(0x13a)]||new Date()};_0x237586['push'](_0xe2c3f3),checkQueueTimeout(_0xe2c3f3);}}),updateQueueDisplay(_0x237586);},_0x411a95=>{console['error']('Error\x20in\x20queue\x20listener:',_0x411a95);});window['addEventListener'](a43_0x2df0c7(0x136),()=>{unsubscribe();});