const a22_0xc6649=a22_0x5684;import a22_0x42d06e,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x319799=a22_0x5684;if(document['getElementById'](_0x319799(0x135)))return;const _0x5ef324=document[_0x319799(0x150)]('div');_0x5ef324['id']='idle-overlay',_0x5ef324[_0x319799(0x138)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x405925=document['createElement']('div');_0x405925['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x1f114b=document['createElement']('h2');_0x1f114b['textContent']=_0x319799(0x146),_0x1f114b[_0x319799(0x138)]['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x12f3ec=document['createElement']('p');_0x12f3ec['textContent']=_0x319799(0x14b),_0x12f3ec[_0x319799(0x138)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x11605b=document[_0x319799(0x150)]('button');_0x11605b['id']='resume-session-btn',_0x11605b['textContent']=_0x319799(0x14f),_0x11605b[_0x319799(0x138)]['cssText']=_0x319799(0x123),_0x11605b[_0x319799(0x137)]=function(){this['style']['backgroundColor']='#3da05f';},_0x11605b['onmouseout']=function(){const _0xae3cfe=_0x319799;this['style'][_0xae3cfe(0x143)]='#50C878';},_0x405925['appendChild'](_0x1f114b),_0x405925[_0x319799(0x13e)](_0x12f3ec),_0x405925[_0x319799(0x13e)](_0x11605b),_0x5ef324['appendChild'](_0x405925),document['body']['appendChild'](_0x5ef324),_0x11605b[_0x319799(0x12e)]('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x218819=a22_0x5684;if(document['getElementById']('network-error-overlay'))return;const _0x509501=document['createElement']('div');_0x509501['id']='network-error-overlay',_0x509501['style'][_0x218819(0x128)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x36c111=document['createElement']('div');_0x36c111['style'][_0x218819(0x128)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x46933c=document['createElement']('h2');_0x46933c['textContent']='Connection\x20Error',_0x46933c['style']['cssText']=_0x218819(0x14a);const _0x444a82=document['createElement']('p');_0x444a82['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x444a82[_0x218819(0x138)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x3f7645=document[_0x218819(0x150)]('button');_0x3f7645['id']='retry-connection-btn',_0x3f7645['textContent']=_0x218819(0x154),_0x3f7645['style'][_0x218819(0x128)]=_0x218819(0x139);const _0x1f5e94=document['createElement'](_0x218819(0x13f));_0x1f5e94['id']=_0x218819(0x130),_0x1f5e94['textContent']='Reload\x20Page',_0x1f5e94[_0x218819(0x138)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0xeba830=document['createElement'](_0x218819(0x149));_0xeba830['style']['cssText']=_0x218819(0x13a),_0xeba830['appendChild'](_0x3f7645),_0xeba830['appendChild'](_0x1f5e94),_0x36c111[_0x218819(0x13e)](_0x46933c),_0x36c111[_0x218819(0x13e)](_0x444a82),_0x36c111['appendChild'](_0xeba830),_0x509501['appendChild'](_0x36c111),document['body']['appendChild'](_0x509501),_0x3f7645[_0x218819(0x12e)]('click',retryConnection),_0x1f5e94['addEventListener'](_0x218819(0x13c),()=>window[_0x218819(0x144)]['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x51709a=a22_0x5684;clearTimeout(idleTimer);const _0x2d2d65=document[_0x51709a(0x12a)](_0x51709a(0x124));_0x2d2d65&&(_0x2d2d65['style']['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x42d06e['suspendAllListeners']();}function retryConnection(){const _0x136eac=a22_0x5684;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x3a919b=document[_0x136eac(0x14e)]('#network-error-overlay\x20p');_0x3a919b&&(_0x3a919b['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x55729a=document[_0x136eac(0x12a)](_0x136eac(0x131));_0x55729a&&(_0x55729a['disabled']=!![],_0x55729a['style'][_0x136eac(0x132)]='0.5',_0x55729a[_0x136eac(0x138)][_0x136eac(0x147)]='not-allowed');return;}const _0x3d24d2=document['getElementById']('network-error-overlay');_0x3d24d2&&(_0x3d24d2[_0x136eac(0x138)][_0x136eac(0x151)]=_0x136eac(0x142));window[_0x136eac(0x153)]=![],resetIdleTimer(),console[_0x136eac(0x14c)]('Retrying\x20connection...');try{const {rdlFirestore:_0x37323f}=window;if(_0x37323f){const _0x29964c=_0x37323f['collection'](_0x136eac(0x140));_0x37323f['getDocs'](_0x29964c)['catch'](_0x4595e7=>{console['error']('Connection\x20test\x20failed:',_0x4595e7),handleNetworkError();});}}catch(_0x21060c){console[_0x136eac(0x126)]('Failed\x20to\x20test\x20connection:',_0x21060c),handleNetworkError();}a22_0x42d06e['resumeAllListeners']();}function suspendSession(){const _0x3393e6=a22_0x5684;isSessionSuspended=!![];const _0x5d869c=document['getElementById'](_0x3393e6(0x135));_0x5d869c&&(_0x5d869c['style']['display']=_0x3393e6(0x127)),console[_0x3393e6(0x14c)]('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a22_0x42d06e['suspendAllListeners']();}function a22_0x5684(_0x39bd57,_0xc9a65d){const _0xfc4567=a22_0x1a16();return a22_0x5684=function(_0x3e216e,_0x370b29){_0x3e216e=_0x3e216e-0x123;let _0x1a1618=_0xfc4567[_0x3e216e];return _0x1a1618;},a22_0x5684(_0x39bd57,_0xc9a65d);}function resumeSession(){const _0x1af3e0=a22_0x5684;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x1d0aad=document['getElementById']('idle-overlay');_0x1d0aad&&(_0x1d0aad[_0x1af3e0(0x138)]['display']='none'),console['log']('Session\x20resumed'),resetIdleTimer(),a22_0x42d06e[_0x1af3e0(0x141)](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log'](_0x1af3e0(0x158)),window['location']['reload']());}function a22_0x1a16(){const _0x12a103=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','network-error-overlay','bind','error','flex','cssText','from','getElementById','forceIdleTimeout','length','Session\x20suspended:','addEventListener','code','reload-page-btn','retry-connection-btn','opacity','apply','RDL_SESSION_SUSPENDED','idle-overlay','activeListeners','onmouseover','style','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','includes','click','readyState','appendChild','button','system','resumeAllListeners','none','backgroundColor','location','now','Session\x20Suspended\x20Due\x20to\x20Inactivity','cursor','mousemove','div','color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.','log','message','querySelector','Return\x20to\x20Website','createElement','display','resource-exhausted','RDL_NETWORK_ERROR','Retry\x20Connection','RDL_LAST_ACTIVITY','toString','network','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'];a22_0x1a16=function(){return _0x12a103;};return a22_0x1a16();}function initIdleTimeout(){const _0x1c67fb=a22_0x5684,_0xc38e61=(function(){let _0x1caad8=!![];return function(_0x107e2c,_0x499a7e){const _0x4dc2f4=_0x1caad8?function(){const _0x45508d=a22_0x5684;if(_0x499a7e){const _0x3a86ed=_0x499a7e[_0x45508d(0x133)](_0x107e2c,arguments);return _0x499a7e=null,_0x3a86ed;}}:function(){};return _0x1caad8=![],_0x4dc2f4;};}()),_0xf68bdd=_0xc38e61(this,function(){const _0x35cc31=a22_0x5684,_0x4cb45e=function(){let _0x2b83cf;try{_0x2b83cf=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x52a056){_0x2b83cf=window;}return _0x2b83cf;},_0x132ce0=_0x4cb45e(),_0x4a6669=_0x132ce0['console']=_0x132ce0['console']||{},_0x75b509=['log','warn','info','error','exception','table','trace'];for(let _0x11f213=0x0;_0x11f213<_0x75b509[_0x35cc31(0x12c)];_0x11f213++){const _0x3da682=_0xc38e61['constructor']['prototype']['bind'](_0xc38e61),_0x526c6e=_0x75b509[_0x11f213],_0x6b4802=_0x4a6669[_0x526c6e]||_0x3da682;_0x3da682['__proto__']=_0xc38e61['bind'](_0xc38e61),_0x3da682['toString']=_0x6b4802[_0x35cc31(0x156)][_0x35cc31(0x125)](_0x6b4802),_0x4a6669[_0x526c6e]=_0x3da682;}});_0xf68bdd(),createIdleOverlay();const _0x3483b2=['mousedown',_0x1c67fb(0x148),'keypress','scroll','touchstart','click'];_0x3483b2['forEach'](_0x34bd8d=>{document['addEventListener'](_0x34bd8d,()=>{const _0x759eb7=a22_0x5684;window[_0x759eb7(0x155)]=Date[_0x759eb7(0x145)](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x3edd69){const _0x2a2488=_0x1c67fb;_0x3edd69['error']&&(_0x3edd69['error']['message']&&_0x3edd69['error'][_0x2a2488(0x14d)]['includes'](_0x2a2488(0x157))||_0x3edd69['error'][_0x2a2488(0x12f)]&&(_0x3edd69['error'][_0x2a2488(0x12f)]==='unavailable'||_0x3edd69['error']['code']===_0x2a2488(0x152)||_0x3edd69[_0x2a2488(0x126)][_0x2a2488(0x12f)][_0x2a2488(0x13b)](_0x2a2488(0x157))))&&(handleNetworkError(),_0x3edd69['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x45517b=_0x1c67fb;return console['log'](_0x45517b(0x12d),window['RDL_SESSION_SUSPENDED']),console[_0x45517b(0x14c)]('Network\x20error:',window[_0x45517b(0x153)]),console['log']('Active\x20listeners:',a22_0x42d06e['activeListeners']['size']),console['log']('Pending\x20operations:',a22_0x42d06e['pendingOperations']['size']),console['log']('Blocked\x20operations:',a22_0x42d06e['blockedOperations']||0x0),{'suspended':window[_0x45517b(0x134)],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array[_0x45517b(0x129)](a22_0x42d06e[_0x45517b(0x136)]['keys']()),'pendingOperations':Array['from'](a22_0x42d06e['pendingOperations']['keys']()),'blockedCount':a22_0x42d06e['blockedOperations']||0x0};},window[_0x1c67fb(0x12b)]=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document[a22_0xc6649(0x13d)]==='loading'?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();