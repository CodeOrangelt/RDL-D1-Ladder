const a0_0x1948cf=a0_0x26f0;(function(_0x4c78fd,_0x483c46){const _0x1b9a39=a0_0x26f0,_0x311c66=_0x4c78fd();while(!![]){try{const _0x114a9f=-parseInt(_0x1b9a39(0x2dd))/0x1+-parseInt(_0x1b9a39(0x139))/0x2+parseInt(_0x1b9a39(0x1cf))/0x3*(parseInt(_0x1b9a39(0x1cd))/0x4)+parseInt(_0x1b9a39(0xde))/0x5+parseInt(_0x1b9a39(0x246))/0x6*(-parseInt(_0x1b9a39(0x224))/0x7)+-parseInt(_0x1b9a39(0x2a7))/0x8*(-parseInt(_0x1b9a39(0x119))/0x9)+-parseInt(_0x1b9a39(0x1ac))/0xa*(-parseInt(_0x1b9a39(0x210))/0xb);if(_0x114a9f===_0x483c46)break;else _0x311c66['push'](_0x311c66['shift']());}catch(_0x5b4b34){_0x311c66['push'](_0x311c66['shift']());}}}(a0_0x40d6,0xce41c));const a0_0x2e1220=(function(){let _0x1bc429=!![];return function(_0x57632b,_0x4bb341){const _0x5abc70=_0x1bc429?function(){const _0x2de40d=a0_0x26f0;if(_0x4bb341){const _0x1eaeff=_0x4bb341[_0x2de40d(0x2a4)](_0x57632b,arguments);return _0x4bb341=null,_0x1eaeff;}}:function(){};return _0x1bc429=![],_0x5abc70;};}()),a0_0x34128c=a0_0x2e1220(this,function(){const _0x2a5081=a0_0x26f0,_0x18d6b0=function(){let _0x5742e2;try{_0x5742e2=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x16b0f6){_0x5742e2=window;}return _0x5742e2;},_0x16c6e5=_0x18d6b0(),_0x2a1c4a=_0x16c6e5['console']=_0x16c6e5[_0x2a5081(0xd3)]||{},_0x36e2a5=['log','warn','info',_0x2a5081(0x20c),'exception',_0x2a5081(0x1d5),'trace'];for(let _0x3a4118=0x0;_0x3a4118<_0x36e2a5['length'];_0x3a4118++){const _0x440152=a0_0x2e1220[_0x2a5081(0x1d0)]['prototype'][_0x2a5081(0x233)](a0_0x2e1220),_0x3038ec=_0x36e2a5[_0x3a4118],_0x1ea617=_0x2a1c4a[_0x3038ec]||_0x440152;_0x440152[_0x2a5081(0x19c)]=a0_0x2e1220[_0x2a5081(0x233)](a0_0x2e1220),_0x440152['toString']=_0x1ea617['toString']['bind'](_0x1ea617),_0x2a1c4a[_0x3038ec]=_0x440152;}});a0_0x34128c();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x1768ce){const _0x4566bc=a0_0x26f0;if(!_0x1768ce)return'#ffffff';_0x1768ce=_0x1768ce[_0x4566bc(0x109)]('#','');_0x1768ce[_0x4566bc(0x291)]===0x3&&(_0x1768ce=_0x1768ce[_0x4566bc(0x1af)]('')['map'](_0x5afacc=>_0x5afacc+_0x5afacc)[_0x4566bc(0x128)](''));if(_0x1768ce['length']!==0x6)return'#ffffff';const _0x1ee55a=parseInt(_0x1768ce['substring'](0x0,0x2),0x10),_0x2698ac=parseInt(_0x1768ce['substring'](0x2,0x4),0x10),_0xbe7a58=parseInt(_0x1768ce['substring'](0x4,0x6),0x10),_0x240017=(_0x1ee55a*0x12b+_0x2698ac*0x24b+_0xbe7a58*0x72)/0x3e8;return _0x240017>=0x80?'#000000':_0x4566bc(0x162);}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x20ead6=>{if(!_0x20ead6){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0xe920ef){console['error']('Error\x20initializing\x20dashboard:',_0xe920ef),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x10414c){const _0x469150=a0_0x26f0;if(!_0x10414c)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x10414c+_0x469150(0x30c));const _0x585eb1=[{'name':_0x469150(0x30a),'displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':_0x469150(0x1a4),'displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':_0x469150(0x294),'displayName':'Non-Participants'}],_0x340f05=auth[_0x469150(0x13b)];let _0x579791=null,_0x87f378=null;for(const _0x4f8831 of _0x585eb1){try{if(_0x340f05){const _0x447d94=doc(db,_0x4f8831['name'],_0x340f05['uid']),_0xbdbb36=await getDoc(_0x447d94);if(_0xbdbb36['exists']()){const _0x4e5bd9=_0xbdbb36['data']();console['log'](_0x469150(0x235)+_0x4f8831['displayName']+_0x469150(0xd9),_0x4e5bd9);const _0x4d3202=(_0x4e5bd9[_0x469150(0x2f5)]||_0x4e5bd9['role']||'')['toLowerCase']();if(_0x4d3202&&_0x4d3202!=='none'){_0x579791=_0x4d3202,_0x87f378=_0x4f8831['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x579791+'\x20in\x20'+_0x87f378);break;}}}if(!_0x579791){const _0x1d8c9b=collection(db,_0x4f8831['name']),_0x5c470b=query(_0x1d8c9b,where(_0x469150(0x140),'==',_0x10414c)),_0x3628fe=await getDocs(_0x5c470b);if(!_0x3628fe['empty']){const _0x33e28b=_0x3628fe[_0x469150(0xd2)][0x0]['data']();console[_0x469150(0x241)](_0x469150(0x235)+_0x4f8831['displayName']+'\x20with\x20email\x20'+_0x10414c+':',_0x33e28b);const _0x293a0e=(_0x33e28b[_0x469150(0x2f5)]||_0x33e28b[_0x469150(0x227)]||'')['toLowerCase']();if(_0x293a0e&&_0x293a0e!==_0x469150(0xe5)){_0x579791=_0x293a0e,_0x87f378=_0x4f8831[_0x469150(0x2d1)],console['log']('Found\x20specific\x20role:\x20'+_0x579791+_0x469150(0xe3)+_0x87f378);break;}}}}catch(_0x117f81){console['error']('Error\x20checking\x20'+_0x4f8831[_0x469150(0x2d1)]+':',_0x117f81);}}if(_0x579791){console[_0x469150(0x241)](_0x469150(0x303)+_0x579791+_0x469150(0x18d)+_0x87f378+')');const _0x50e6c5={'admin':['dashboard',_0x469150(0x12e),'manage-matches','manage-articles','manage-trophies','manage-ranks',_0x469150(0x16f),'settings',_0x469150(0x21f),'elo-history',_0x469150(0x2c1),'user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players',_0x469150(0xed),_0x469150(0x191),'manage-trophies','manage-ranks','inactive-players',_0x469150(0x29f),_0x469150(0x21f),'elo-history','manage-highlights','user-roles-section',_0x469150(0xed),_0x469150(0x1d9),'manage-levels-ribbons','manage-ribbons'],'council':[_0x469150(0x164),'manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles',_0x469150(0x21f),'elo-history','manage-highlights']};if(_0x50e6c5[_0x579791])return console[_0x469150(0x241)](_0x469150(0x274)+_0x579791+_0x469150(0x284),_0x50e6c5[_0x579791]),_0x50e6c5[_0x579791];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x10414c+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x2e58a6=[]){const _0x11ac4f=a0_0x26f0,_0x5010e0=document['querySelectorAll'](_0x11ac4f(0x13d)),_0x300365=document['querySelectorAll']('.admin-section');(!_0x2e58a6||_0x2e58a6['length']===0x0)&&(_0x2e58a6=['dashboard']);_0x5010e0['forEach'](_0xf59b63=>{const _0x4cb729=_0x11ac4f,_0x1e2fbc=_0xf59b63['getAttribute']('data-section');_0x2e58a6['includes'](_0x1e2fbc)?_0xf59b63['style']['display']=_0x4cb729(0xd1):_0xf59b63['style']['display']=_0x4cb729(0xe5),_0xf59b63['addEventListener'](_0x4cb729(0x10c),()=>{const _0x1dd0b8=_0x4cb729,_0x2d69e4=_0xf59b63['getAttribute'](_0x1dd0b8(0x2ae));if(!_0x2e58a6[_0x1dd0b8(0x311)](_0x2d69e4)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x5010e0[_0x1dd0b8(0x157)](_0x1d757e=>_0x1d757e['classList']['remove']('active')),_0xf59b63['classList']['add']('active'),_0x300365['forEach'](_0x50d47e=>{_0x50d47e['style']['display']='none';});const _0x4c786a=document['getElementById'](_0x2d69e4);_0x4c786a&&(_0x4c786a['style']['display']=_0x1dd0b8(0x136),console['log'](_0x1dd0b8(0x1b4)+_0x2d69e4+'\x20section'));});});const _0x2e833f=document[_0x11ac4f(0x236)]('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x2e58a6[0x0]+'\x22]');_0x2e833f&&_0x2e833f[_0x11ac4f(0x10c)](),console['log'](_0x11ac4f(0x1f6));}function setupTabNavigation(){const _0x4b1c58=document['querySelectorAll']('.nav-item');let _0x2a2f8e=null,_0x25574c=new Set();_0x4b1c58['forEach'](_0x29dd35=>{const _0x788497=a0_0x26f0;_0x29dd35[_0x788497(0x283)](_0x788497(0x10c),function(){const _0x3db006=_0x788497,_0x49f8f7=this[_0x3db006(0xfc)]('data-section');if(_0x49f8f7===_0x2a2f8e)return;_0x2a2f8e&&(document['getElementById'](_0x2a2f8e)['style']['display']='none',_0x4b1c58['forEach'](_0x17f638=>_0x17f638['classList']['remove']('active'))),document['getElementById'](_0x49f8f7)['style']['display']=_0x3db006(0x136),this['classList'][_0x3db006(0x2c9)]('active'),_0x2a2f8e=_0x49f8f7;});});}function loadSectionData(_0x1762e2){return;}async function initializeAdminDashboard(){const _0x24a0b0=a0_0x26f0;try{const _0x466e81=auth['currentUser'],_0x543067=await getUserTabPermissions(_0x466e81['email']);console[_0x24a0b0(0x241)](_0x24a0b0(0x1f0)+_0x466e81['email']+_0x24a0b0(0x26e),_0x543067),window['userAllowedTabs']=_0x543067,setupSidebarNavigation(_0x543067),setupLadderSelector(),setupDashboardSection(),_0x543067['includes']('manage-players')&&setupManagePlayersSection(),_0x543067['includes'](_0x24a0b0(0x1d4))&&setupEloHistorySection(),_0x543067[_0x24a0b0(0x311)]('manage-ranks')&&setupRankControls(),_0x543067[_0x24a0b0(0x311)]('manage-articles')&&setupManageArticlesSection(),_0x543067[_0x24a0b0(0x311)]('user-roles-section')&&setupUserRolesSection(),_0x543067['includes'](_0x24a0b0(0x21f))&&setupTrophyManagementSection(),_0x543067['includes'](_0x24a0b0(0x2c1))&&setupManageHighlightsSection(),_0x543067[_0x24a0b0(0x311)]('inactive-players')&&setupInactivePlayersSection(),_0x543067['includes']('manage-matches')&&setupManageMatchesSection(),_0x543067['includes']('manage-points')&&setupManagePointsSection(),_0x543067['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x543067);}catch(_0x1e85a7){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x1e85a7);}}function setupDataLoadButtons(_0x5bdbf6=[]){const _0x3b963c=a0_0x26f0;(!_0x5bdbf6||_0x5bdbf6[_0x3b963c(0x291)]===0x0)&&(_0x5bdbf6=[_0x3b963c(0x164)]);const _0x11f875=document['getElementById']('load-dashboard-data');_0x11f875&&_0x11f875['addEventListener']('click',function(){const _0x105057=_0x3b963c;this['classList']['add']('loading'),this['innerHTML']=_0x105057(0x184),loadDashboardOverview()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})[_0x105057(0x301)](_0x296ab0=>{const _0x232c1c=_0x105057;console[_0x232c1c(0x20c)]('Error\x20loading\x20dashboard:',_0x296ab0),this['classList'][_0x232c1c(0x258)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1f1ef9=_0x232c1c;this['innerHTML']=_0x1f1ef9(0x1f4);},0xbb8);});});if(_0x5bdbf6[_0x3b963c(0x311)]('manage-trophies')){const _0x422bc2=document['getElementById'](_0x3b963c(0x255));_0x422bc2&&_0x422bc2[_0x3b963c(0x283)](_0x3b963c(0x10c),function(){const _0x3345f6=_0x3b963c;console['log']('Load\x20trophies\x20data\x20clicked'),this['classList'][_0x3345f6(0x2c9)]('loading'),this['innerHTML']=_0x3345f6(0x184),loadTrophyDefinitions()[_0x3345f6(0x23f)](()=>{const _0x2b8496=_0x3345f6;this['classList']['remove']('loading'),this[_0x2b8496(0x287)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x446e85=>{const _0x5d5073=_0x3345f6;console['error'](_0x5d5073(0x187),_0x446e85),this['classList']['remove']('loading'),this[_0x5d5073(0x287)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2b4892=_0x5d5073;this[_0x2b4892(0x287)]=_0x2b4892(0x25f);},0xbb8);});});}if(_0x5bdbf6['includes']('manage-players')){const _0x1fa15b=document[_0x3b963c(0x152)]('load-players-data');_0x1fa15b&&_0x1fa15b['addEventListener'](_0x3b963c(0x10c),function(){const _0x344496=_0x3b963c;console['log'](_0x344496(0x252)),this['classList']['add'](_0x344496(0x22f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})[_0x344496(0x301)](_0x4d83d8=>{const _0x4ebd62=_0x344496;console['error']('Error\x20loading\x20players:',_0x4d83d8),this['classList'][_0x4ebd62(0x258)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x5bdbf6[_0x3b963c(0x311)]('elo-history')){const _0x4c74be=document['getElementById']('load-elo-history-data');_0x4c74be&&_0x4c74be['addEventListener']('click',function(){console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x220564=>{const _0x44d54d=a0_0x26f0;console['error']('Error\x20loading\x20history:',_0x220564),this['classList'][_0x44d54d(0x258)](_0x44d54d(0x22f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1c7d9c=_0x44d54d;this[_0x1c7d9c(0x287)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x5bdbf6['includes']('manage-articles')){const _0x3a7258=document['getElementById']('load-articles-data');_0x3a7258&&_0x3a7258['addEventListener'](_0x3b963c(0x10c),function(){const _0x43e5e3=_0x3b963c;console['log']('Load\x20articles\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x43e5e3(0x184),loadArticles()[_0x43e5e3(0x23f)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x14c409=>{const _0x4dbb49=_0x43e5e3;console['error']('Error\x20loading\x20articles:',_0x14c409),this[_0x4dbb49(0x15e)]['remove'](_0x4dbb49(0x22f)),this[_0x4dbb49(0x287)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x5bdbf6[_0x3b963c(0x311)]('user-roles-section')){const _0x46f351=document['getElementById']('load-users-data');_0x46f351&&_0x46f351[_0x3b963c(0x283)]('click',function(){const _0x52769b=_0x3b963c;console[_0x52769b(0x241)](_0x52769b(0x148)),this['classList']['add'](_0x52769b(0x22f)),this[_0x52769b(0x287)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x7fe287=_0x52769b;this['classList'][_0x7fe287(0x258)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x2144f0=>{const _0x5ca176=_0x52769b;console['error']('Error\x20loading\x20users:',_0x2144f0),this['classList'][_0x5ca176(0x258)](_0x5ca176(0x22f)),this[_0x5ca176(0x287)]=_0x5ca176(0x2db),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x5bdbf6[_0x3b963c(0x311)]('inactive-players')){const _0x429ae1=document['getElementById']('load-inactive-players-data');_0x429ae1&&_0x429ae1[_0x3b963c(0x283)](_0x3b963c(0x10c),function(){const _0x4456a0=_0x3b963c;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()[_0x4456a0(0x23f)](()=>{const _0xb0372c=_0x4456a0;this[_0xb0372c(0x15e)]['remove'](_0xb0372c(0x22f)),this[_0xb0372c(0x287)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})[_0x4456a0(0x301)](_0x29bfac=>{const _0x4903f2=_0x4456a0;console['error'](_0x4903f2(0xec),_0x29bfac),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x5bdbf6['includes']('manage-highlights')){const _0x2f3682=document['getElementById'](_0x3b963c(0x11f));_0x2f3682&&_0x2f3682[_0x3b963c(0x283)]('click',function(){const _0x38b00f=_0x3b963c;console[_0x38b00f(0x241)]('Load\x20highlights\x20data\x20clicked'),this['classList']['add'](_0x38b00f(0x22f)),this[_0x38b00f(0x287)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x38b00f(0x23f)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x1ebf2e=>{const _0x3b64af=_0x38b00f;console['error']('Error\x20loading\x20highlights:',_0x1ebf2e),this['classList']['remove'](_0x3b64af(0x22f)),this[_0x3b64af(0x287)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2a4d06=_0x3b64af;this[_0x2a4d06(0x287)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x5bdbf6['includes'](_0x3b963c(0xed))){const _0x4465cd=document[_0x3b963c(0x152)]('load-matches-data');_0x4465cd&&_0x4465cd['addEventListener'](_0x3b963c(0x10c),function(){const _0x366756=_0x3b963c;console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x366756(0x184),loadMatchesData(0x1)['then'](()=>{const _0x6287f4=_0x366756;this[_0x6287f4(0x15e)]['remove'](_0x6287f4(0x22f)),this['innerHTML']=_0x6287f4(0xcd);})['catch'](_0x313265=>{const _0x4fc4a0=_0x366756;console['error']('Error\x20loading\x20matches:',_0x313265),this['classList'][_0x4fc4a0(0x258)]('loading'),this['innerHTML']=_0x4fc4a0(0x2db),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x5bdbf6['includes'](_0x3b963c(0x205))){const _0x2a1987=document['getElementById']('load-ribbons-data');_0x2a1987&&_0x2a1987[_0x3b963c(0x283)](_0x3b963c(0x10c),function(){console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x46d0c2=a0_0x26f0;this['classList']['remove'](_0x46d0c2(0x22f)),this[_0x46d0c2(0x287)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x29b2c0=>{const _0x455a1b=a0_0x26f0;console['error']('Error\x20loading\x20ribbons:',_0x29b2c0),this['classList'][_0x455a1b(0x258)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x32fe94=_0x455a1b;this['innerHTML']=_0x32fe94(0x1fe);},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function a0_0x26f0(_0x2499d6,_0x16463b){const _0x4e3486=a0_0x40d6();return a0_0x26f0=function(_0x34128c,_0x2e1220){_0x34128c=_0x34128c-0x9f;let _0x58d04c=_0x4e3486[_0x34128c];return _0x58d04c;},a0_0x26f0(_0x2499d6,_0x16463b);}function setupDashboardSection(){const _0x4e15fa=a0_0x26f0;document['getElementById']('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document[_0x4e15fa(0x152)](_0x4e15fa(0x10a))['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x53cade=a0_0x26f0,_0x4ededd=document['querySelectorAll'](_0x53cade(0x156));_0x4ededd[_0x53cade(0x157)](_0x7af1bb=>{const _0x393fa0=_0x53cade;_0x7af1bb[_0x393fa0(0x283)]('change',()=>{const _0x417286=_0x393fa0;currentLadder=_0x7af1bb['value'],document['body']['setAttribute']('data-ladder',currentLadder);const _0x3a5173=document['getElementById'](_0x417286(0x186));_0x3a5173&&(_0x3a5173['textContent']=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x417286(0xa8))['textContent']='-',document['getElementById'](_0x417286(0x10a))['textContent']='-',document['getElementById']('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts[_0x417286(0x1f1)]=null),charts['activity']&&(charts['activity'][_0x417286(0x19a)](),charts[_0x417286(0x28e)]=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x417286(0x273));});});const _0x5aeae4=document['getElementById']('current-ladder-display');_0x5aeae4&&(_0x5aeae4[_0x53cade(0xb2)]=currentLadder);}async function loadDashboardOverview(){const _0x290735=a0_0x26f0;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x290735(0x152)]('player-count')['textContent']='-',document['getElementById'](_0x290735(0xa8))['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0xbf6fbb=currentLadder==='D1'?_0x290735(0x1ff):currentLadder==='D2'?'playersD2':'playersD3',_0x369a38=currentLadder==='D1'?_0x290735(0x167):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x49293f=currentLadder==='D1'?_0x290735(0xea):currentLadder==='D2'?_0x290735(0xbb):'pendingMatchesD3',_0x48095f=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0x290735(0x2fc):_0x290735(0x298);console[_0x290735(0x241)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0xbf6fbb+',\x20'+_0x369a38);const _0x23a111=await getDocs(collection(db,_0xbf6fbb)),_0x331c34=_0x23a111[_0x290735(0x306)],_0x4ec74d=await getDocs(collection(db,_0x369a38)),_0x24868b=_0x4ec74d['size'],_0x544532=await getDocs(collection(db,_0x49293f)),_0x1f766c=_0x544532[_0x290735(0x306)],_0xe60f89=await getDocs(collection(db,_0x48095f)),_0x3804a3=_0xe60f89['size'];return document[_0x290735(0x152)]('player-count')['textContent']=_0x331c34,document['getElementById']('match-count')[_0x290735(0xb2)]=_0x24868b,document['getElementById'](_0x290735(0x10a))['textContent']=_0x1f766c,document['getElementById'](_0x290735(0xa2))['textContent']=_0x3804a3,await createRankDistributionChart(),await createActivityChart(),console['log'](_0x290735(0xb3)),!![];}catch(_0x57ddb4){console[_0x290735(0x20c)]('Error\x20loading\x20dashboard\x20data:',_0x57ddb4);throw _0x57ddb4;}}async function createRankDistributionChart(){const _0x1dacdc=a0_0x26f0;try{const _0x312fda=collection(db,currentLadder==='D1'?'players':_0x1dacdc(0x1a4)),_0x1a9cbf=await getDocs(_0x312fda),_0x59ab46={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x1a9cbf['forEach'](_0x473edb=>{const _0x73ca1e=_0x1dacdc,_0x37abfb=_0x473edb['data'](),_0x55c107=_0x37abfb['eloRating']||0x4b0;if(_0x55c107>=0x7d0)_0x59ab46['Emerald']++;else{if(_0x55c107>=0x708)_0x59ab46[_0x73ca1e(0xdc)]++;else{if(_0x55c107>=0x640)_0x59ab46[_0x73ca1e(0xbe)]++;else{if(_0x55c107>=0x578)_0x59ab46['Bronze']++;else _0x59ab46[_0x73ca1e(0xa6)]++;}}}});const _0x5d826c=document[_0x1dacdc(0x152)]('rank-distribution-chart');charts[_0x1dacdc(0x1f1)]&&charts['rankDistribution'][_0x1dacdc(0x19a)](),charts[_0x1dacdc(0x1f1)]=new Chart(_0x5d826c,{'type':_0x1dacdc(0x13f),'data':{'labels':Object[_0x1dacdc(0x145)](_0x59ab46),'datasets':[{'data':Object['values'](_0x59ab46),'backgroundColor':[_0x1dacdc(0xe0),'#CD7F32','#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x1dacdc(0x2f2)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':_0x1dacdc(0x2f2),'font':{'size':0x10}}}}});}catch(_0x3da2c7){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x3da2c7),document['getElementById']('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x3a3bfc=a0_0x26f0;try{const _0x2b9d9e=currentLadder==='D1'?_0x3a3bfc(0x167):'approvedMatchesD2',_0x41905a=collection(db,_0x2b9d9e),_0x3ec0b1=new Date();_0x3ec0b1['setDate'](_0x3ec0b1['getDate']()-0x7);const _0x236ace=query(_0x41905a,where('approvedAt','>=',_0x3ec0b1),orderBy('approvedAt',_0x3a3bfc(0x30d))),_0x59e332=await getDocs(_0x236ace),_0x357661=['Sunday','Monday','Tuesday','Wednesday',_0x3a3bfc(0x18b),'Friday',_0x3a3bfc(0x1c1)],_0x2eb187=_0x357661[_0x3a3bfc(0x1dc)]((_0x438ad8,_0x3ea673)=>({..._0x438ad8,[_0x3ea673]:0x0}),{});_0x59e332['forEach'](_0xbdda8a=>{const _0x2eba70=_0x3a3bfc,_0x59b6a5=_0xbdda8a['data']();if(_0x59b6a5[_0x2eba70(0x279)]){const _0x2d2af1=_0x357661[new Date(_0x59b6a5['approvedAt']['seconds']*0x3e8)['getDay']()];_0x2eb187[_0x2d2af1]++;}});const _0x166650=document['getElementById']('activity-chart');charts[_0x3a3bfc(0x28e)]&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x166650,{'type':'bar','data':{'labels':_0x357661,'datasets':[{'label':_0x3a3bfc(0x2fa),'data':_0x357661['map'](_0x3d38f6=>_0x2eb187[_0x3d38f6]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':_0x3a3bfc(0xc0),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x3a3bfc(0x2f2)},'grid':{'color':_0x3a3bfc(0x2ec)}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x3a3bfc(0x2ec)}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x3a3bfc(0xe9),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x5681a4){console[_0x3a3bfc(0x20c)]('Error\x20creating\x20activity\x20chart:',_0x5681a4),document[_0x3a3bfc(0x152)]('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x4a4e5d=a0_0x26f0,_0x2ca1b5=document['getElementById']('players-table-body');if(!_0x2ca1b5)return;_0x2ca1b5['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x526612='players';if(currentLadder==='D2')_0x526612='playersD2';else currentLadder==='D3'&&(_0x526612='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x526612+_0x4a4e5d(0x183));const _0x191680=collection(db,_0x526612),_0xd0322d=query(_0x191680,orderBy('eloRating','desc')),_0xa8b51d=await getDocs(_0xd0322d);if(_0xa8b51d['empty']){_0x2ca1b5[_0x4a4e5d(0x287)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x2ca1b5['innerHTML']='';let _0x23ee3a=0x1;_0xa8b51d['forEach'](_0x325655=>{const _0x4d1ef3=_0x4a4e5d,_0x3d0ea9=_0x325655[_0x4d1ef3(0x126)](),_0x5d7519=getRankFromElo(_0x3d0ea9['eloRating']||0x4b0),_0x5c8060=getRankStyle(_0x3d0ea9['eloRating']||0x4b0),_0x432ef0=document['createElement']('tr');_0x432ef0['innerHTML']=_0x4d1ef3(0x19b)+_0x23ee3a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x5c8060['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3d0ea9[_0x4d1ef3(0x28c)]||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x3d0ea9['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x5c8060['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5d7519+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3d0ea9[_0x4d1ef3(0x23d)]||0x0)+'W\x20/\x20'+(_0x3d0ea9[_0x4d1ef3(0x1ea)]||0x0)+_0x4d1ef3(0x2cb)+_0x325655['id']+_0x4d1ef3(0x21a)+_0x325655['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2ca1b5['appendChild'](_0x432ef0),_0x23ee3a++;}),setupPlayerActionButtons();}catch(_0xe1ba5a){console['error'](_0x4a4e5d(0x295),_0xe1ba5a),_0x2ca1b5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0xe1ba5a['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0xcd683b){if(_0xcd683b>=0x7d0)return'Emerald';if(_0xcd683b>=0x708)return'Gold';if(_0xcd683b>=0x640)return'Silver';if(_0xcd683b>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x1e2555=a0_0x26f0;document['querySelectorAll'](_0x1e2555(0x141))['forEach'](_0x224e4d=>{const _0x128f6f=_0x1e2555;_0x224e4d[_0x128f6f(0x283)]('click',async _0x357852=>{const _0x472ce4=_0x357852['currentTarget']['dataset']['id'];openEditPlayerModal(_0x472ce4);});}),document[_0x1e2555(0x2df)]('.delete-btn')['forEach'](_0x51df27=>{_0x51df27['addEventListener']('click',async _0x351864=>{const _0x4ff1ad=_0x351864['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x4ff1ad);});});}async function openEditPlayerModal(_0x8bf5ac){const _0x18b745=a0_0x26f0;try{const _0x293607=currentLadder==='D1'?'players':'playersD2',_0x2ce647=doc(db,_0x293607,_0x8bf5ac),_0x1baa12=await getDoc(_0x2ce647);if(!_0x1baa12['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x5151ce=_0x1baa12['data'](),_0x150c88=document[_0x18b745(0x152)]('edit-player-modal'),_0x4346ae=document['getElementById']('edit-username'),_0x3f42bf=document[_0x18b745(0x152)]('edit-elo'),_0x3a9d67=document['getElementById'](_0x18b745(0x201)),_0x3804b8=document[_0x18b745(0x152)](_0x18b745(0x9f));_0x4346ae['value']=_0x5151ce['username']||'',_0x3f42bf['value']=_0x5151ce[_0x18b745(0x2a6)]||0x4b0,_0x3a9d67['value']=_0x5151ce['wins']||0x0,_0x3804b8['value']=_0x5151ce[_0x18b745(0x1ea)]||0x0,_0x150c88['dataset']['playerId']=_0x8bf5ac,_0x150c88['classList']['add']('active');}catch(_0x56893e){console['error']('Error\x20opening\x20edit\x20modal:',_0x56893e),showNotification('Failed\x20to\x20load\x20player\x20data',_0x18b745(0x20c));}}async function saveEditedPlayer(){const _0x5ecd86=a0_0x26f0;try{const _0x514cce=document['getElementById']('edit-player-modal'),_0x3d6f60=_0x514cce[_0x5ecd86(0x239)][_0x5ecd86(0x28d)];if(!_0x3d6f60){showNotification(_0x5ecd86(0x20b),'error');return;}const _0x598c12=document['getElementById']('edit-username'),_0x848ab7=document['getElementById']('edit-elo'),_0x5e1ed7=document['getElementById']('edit-wins'),_0xd0cf0a=document[_0x5ecd86(0x152)](_0x5ecd86(0x9f)),_0x2e1ce2=_0x598c12['value'][_0x5ecd86(0x25d)](),_0x566441=parseInt(_0x848ab7['value']),_0x4d4bb2=parseInt(_0x5e1ed7[_0x5ecd86(0x1a1)]),_0x44de21=parseInt(_0xd0cf0a['value']);if(!_0x2e1ce2||isNaN(_0x566441)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0xc68533=currentLadder==='D1'?_0x5ecd86(0x1ff):'playersD2',_0x56034f=doc(db,_0xc68533,_0x3d6f60),_0x9ac2ff=await getDoc(_0x56034f),_0x4e3493=_0x9ac2ff['exists']()?_0x9ac2ff[_0x5ecd86(0x126)]():{},_0x3c1ca2=_0x4e3493['eloRating']||0x4b0;await updateDoc(_0x56034f,{'username':_0x2e1ce2,'eloRating':_0x566441,'wins':_0x4d4bb2||0x0,'losses':_0x44de21||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x566441!==_0x3c1ca2){const _0x21581a=currentLadder==='D1'?_0x5ecd86(0x27f):'eloHistoryD2';await addDoc(collection(db,_0x21581a),{'player':_0x2e1ce2,'previousElo':_0x3c1ca2,'newElo':_0x566441,'timestamp':serverTimestamp(),'type':_0x5ecd86(0xc4),'modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x5ecd86(0x15c),'success');}catch(_0x5c639b){console['error']('Error\x20updating\x20player:',_0x5c639b),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x5c639b['message'],'error');}}function closeEditPlayerModal(){const _0xe07006=a0_0x26f0,_0xde3e20=document['getElementById']('edit-player-modal');_0xde3e20[_0xe07006(0x15e)]['remove']('active'),_0xde3e20['dataset'][_0xe07006(0x28d)]='';}async function confirmDeletePlayer(_0x32cbc9){const _0x305b9b=a0_0x26f0;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x49c2a2=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x49c2a2,_0x32cbc9)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully',_0x305b9b(0x2d9));}catch(_0x54dd43){console['error']('Error\x20deleting\x20player:',_0x54dd43),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x54dd43['message'],_0x305b9b(0x20c));}}async function setupManagePlayersSection(){const _0x33f010=a0_0x26f0,_0x14fa7c=document['getElementById']('add-player-form');_0x14fa7c&&_0x14fa7c['addEventListener']('submit',async _0x5a6433=>{_0x5a6433['preventDefault'](),await addNewPlayer();});const _0x361d6d=document['getElementById'](_0x33f010(0x18c));_0x361d6d&&_0x361d6d['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x54f36f=document[_0x33f010(0x152)](_0x33f010(0x2d7));_0x54f36f&&_0x54f36f[_0x33f010(0x283)]('click',saveEditedPlayer);const _0x2b117d=document['getElementById'](_0x33f010(0x2b2));_0x2b117d&&_0x2b117d['addEventListener']('click',closeEditPlayerModal);const _0x5f0008=document[_0x33f010(0x152)]('edit-player-modal');_0x5f0008&&_0x5f0008[_0x33f010(0x283)]('click',_0x103d09=>{_0x103d09['target']===_0x5f0008&&closeEditPlayerModal();});const _0x2770b7=document[_0x33f010(0x152)]('players-ladder-selector');_0x2770b7&&_0x2770b7[_0x33f010(0x283)]('change',()=>{currentLadder=_0x2770b7['value'],loadPlayersData();});}async function addNewPlayer(){const _0x28cce5=a0_0x26f0;try{const _0x5b313c=document[_0x28cce5(0x152)](_0x28cce5(0x29e)),_0x2f0d89=document[_0x28cce5(0x152)]('new-player-elo'),_0x1a16d1=_0x5b313c['value'][_0x28cce5(0x25d)](),_0x2fbc3b=parseInt(_0x2f0d89[_0x28cce5(0x1a1)])||0x4b0;if(!_0x1a16d1){alert('Please\x20enter\x20a\x20valid\x20username');return;}console[_0x28cce5(0x241)]('Adding\x20player\x20'+_0x1a16d1+'\x20with\x20ELO\x20'+_0x2fbc3b+'\x20to\x20'+currentLadder+'\x20ladder');let _0x2b4451='players',_0xeae60c='eloHistory';if(currentLadder==='D2')_0x2b4451='playersD2',_0xeae60c='eloHistoryD2';else currentLadder==='D3'&&(_0x2b4451='playersD3',_0xeae60c=_0x28cce5(0x1e7));const _0x10c122=query(collection(db,_0x2b4451),where('username','==',_0x1a16d1)),_0x2e3373=await getDocs(_0x10c122);if(!_0x2e3373[_0x28cce5(0x18e)]){alert('Username\x20'+_0x1a16d1+'\x20already\x20exists\x20in\x20'+currentLadder+_0x28cce5(0x161));return;}const _0x1013b4=auth['currentUser'],_0x4194fd={'username':_0x1a16d1,'eloRating':_0x2fbc3b,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x1013b4?_0x1013b4[_0x28cce5(0x140)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x2b4451),_0x4194fd),await addDoc(collection(db,_0xeae60c),{'player':_0x1a16d1,'previousElo':0x4b0,'newElo':_0x2fbc3b,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x1013b4?_0x1013b4['email']:'admin','gameMode':currentLadder}),_0x5b313c['value']='',_0x2f0d89[_0x28cce5(0x1a1)]='1200',alert('Player\x20'+_0x1a16d1+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x28cce5(0x1a0)),loadPlayersData();}catch(_0x434882){console['error']('Error\x20adding\x20player:',_0x434882),alert(_0x28cce5(0x198)+_0x434882['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0xb766ad=a0_0x26f0,_0x5eb1bb=document['getElementById']('add-player-form');_0x5eb1bb&&_0x5eb1bb[_0xb766ad(0x283)]('submit',_0x2c1868=>{_0x2c1868['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0xf97988=a0_0x26f0,_0xb7169c=document[_0xf97988(0x152)]('player-search')['value']['toLowerCase'](),_0x358948=document['querySelectorAll'](_0xf97988(0x113));let _0x49c982=0x0;_0x358948[_0xf97988(0x157)](_0x4bb8cb=>{const _0x37bb3c=_0xf97988,_0x2c655f=_0x4bb8cb['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x2c655f['includes'](_0xb7169c)?(_0x4bb8cb['style']['display']='',_0x49c982++):_0x4bb8cb['style']['display']=_0x37bb3c(0xe5);});const _0x5ed747=document['getElementById'](_0xf97988(0x121));_0x5ed747&&(_0x49c982===0x0&&_0xb7169c!==''?_0x5ed747['style']['display']='block':_0x5ed747[_0xf97988(0x230)]['display']=_0xf97988(0xe5));}function debounce(_0x5a699e,_0x35924d){let _0x1d8d7d;return function(..._0x3ca005){const _0x4e5ce6=a0_0x26f0;clearTimeout(_0x1d8d7d),_0x1d8d7d=setTimeout(()=>_0x5a699e[_0x4e5ce6(0x2a4)](this,_0x3ca005),_0x35924d);};}async function loadEloHistory(_0x4acef0=0x1){const _0x13b562=a0_0x26f0,_0x47c191=document[_0x13b562(0x152)]('elo-history-table-body'),_0x1d9b18=currentLadder['toLowerCase']();if(!_0x47c191)return;_0x47c191[_0x13b562(0x287)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x472b43=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x1a104a=collection(db,_0x472b43);let _0x4762da;if(_0x4acef0>eloHistoryPagination[_0x1d9b18][_0x13b562(0x2b4)]&&eloHistoryPagination[_0x1d9b18]['lastVisible'])_0x4762da=query(_0x1a104a,orderBy('timestamp',_0x13b562(0x2d6)),startAfter(eloHistoryPagination[_0x1d9b18]['lastVisible']),limit(PAGE_SIZE));else _0x4acef0<eloHistoryPagination[_0x1d9b18][_0x13b562(0x2b4)]&&eloHistoryPagination[_0x1d9b18]['firstVisible']?_0x4762da=query(_0x1a104a,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x1d9b18][_0x13b562(0x21d)]),limitToLast(PAGE_SIZE)):_0x4762da=query(_0x1a104a,orderBy(_0x13b562(0x104),_0x13b562(0x2d6)),limit(PAGE_SIZE));const _0x2aa9cb=await getDocs(_0x4762da);if(_0x2aa9cb[_0x13b562(0x18e)]){_0x47c191['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x1d9b18+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x1d9b18]['page']=_0x4acef0,eloHistoryPagination[_0x1d9b18]['firstVisible']=_0x2aa9cb['docs'][0x0],eloHistoryPagination[_0x1d9b18][_0x13b562(0x1dd)]=_0x2aa9cb['docs'][_0x2aa9cb['docs'][_0x13b562(0x291)]-0x1];const _0x3af1a5=new Map();_0x47c191[_0x13b562(0x287)]='';const _0x3e349b=async _0x2f6c32=>{const _0x7c791c=_0x13b562;if(typeof _0x2f6c32!=='string'||_0x2f6c32[_0x7c791c(0x291)]<0x14||/[^a-zA-Z0-9-_]/[_0x7c791c(0x256)](_0x2f6c32))return _0x2f6c32;if(_0x3af1a5['has'](_0x2f6c32))return _0x3af1a5[_0x7c791c(0xae)](_0x2f6c32);try{for(const _0x24e1cd of['players',_0x7c791c(0x1a4),_0x7c791c(0x297),'nonParticipants']){const _0x10adae=await getDoc(doc(db,_0x24e1cd,_0x2f6c32));if(_0x10adae['exists']()&&_0x10adae['data']()['username']){const _0x5997e4=_0x10adae['data']()['username'];return _0x3af1a5['set'](_0x2f6c32,_0x5997e4),_0x5997e4;}}return _0x2f6c32;}catch(_0xd7f32d){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x2f6c32+':',_0xd7f32d),_0x2f6c32;}};for(const _0x377a50 of _0x2aa9cb['docs']){const _0x3c1474=_0x377a50[_0x13b562(0x126)](),_0x381f90=document['createElement']('tr'),_0x2c984c=_0x3c1474['timestamp']?new Date(_0x3c1474['timestamp']['seconds']*0x3e8)[_0x13b562(0x285)]():_0x13b562(0x1bc),_0x1798ae=_0x3c1474[_0x13b562(0x1a6)]-_0x3c1474[_0x13b562(0x234)],_0x8bd2a1=_0x1798ae>0x0?_0x13b562(0x1cc):_0x1798ae<0x0?_0x13b562(0x302):'',_0x58732a=_0x1798ae>0x0?'+':'',_0x50f5f4=_0x3c1474[_0x13b562(0x29c)]||_0x3c1474[_0x13b562(0x28c)]||_0x3c1474['userId']||_0x13b562(0x1bc),_0x2c871e=await _0x3e349b(_0x50f5f4);_0x381f90['innerHTML']=_0x13b562(0x2be)+_0x2c984c+_0x13b562(0x268)+_0x2c871e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x3c1474[_0x13b562(0x234)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x3c1474[_0x13b562(0x1a6)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x8bd2a1+'\x22>'+_0x58732a+_0x1798ae+_0x13b562(0x312)+formatHistoryType(_0x3c1474['type'])+_0x13b562(0x1f7)+(_0x3c1474['modifiedBy']||_0x3c1474['promotedBy']||_0x3c1474['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x47c191['appendChild'](_0x381f90);}document['getElementById'](_0x1d9b18+'-page-indicator')[_0x13b562(0xb2)]='Page\x20'+_0x4acef0;const _0x3f321f=document['getElementById'](_0x1d9b18+_0x13b562(0x1ef)),_0x222573=document['getElementById'](_0x1d9b18+'-next-page');if(_0x3f321f)_0x3f321f['disabled']=_0x4acef0<=0x1;const _0x5ca2ad=query(_0x1a104a,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x1d9b18]['lastVisible']),limit(0x1)),_0x1f4ea7=await getDocs(_0x5ca2ad);if(_0x222573)_0x222573['disabled']=_0x1f4ea7['empty'];}catch(_0x13df46){console['error'](_0x13b562(0x125),_0x13df46),_0x47c191[_0x13b562(0x287)]=_0x13b562(0x24e)+_0x13df46[_0x13b562(0x15a)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x547465){const _0x4d2563=a0_0x26f0;switch(_0x547465){case'match_result':return _0x4d2563(0x2bd);case _0x4d2563(0x308):return _0x4d2563(0x195);case'demotion':return _0x4d2563(0x151);case'admin_modification':return _0x4d2563(0x216);case'initial_placement':return'Initial\x20Placement';default:return _0x547465||'Unknown';}}function setupEloHistorySection(){const _0x3d8386=a0_0x26f0;document['getElementById'](_0x3d8386(0x286))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document[_0x3d8386(0x152)](_0x3d8386(0x23a))[_0x3d8386(0x283)](_0x3d8386(0x10c),()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document[_0x3d8386(0x152)](_0x3d8386(0x17e))[_0x3d8386(0x283)]('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x595589=document['getElementById']('d3-prev-page'),_0x4a4b20=document['getElementById']('d3-next-page');_0x595589&&_0x595589['addEventListener'](_0x3d8386(0x10c),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x4a4b20&&_0x4a4b20['addEventListener'](_0x3d8386(0x10c),()=>{const _0x2435cd=_0x3d8386;loadEloHistory(eloHistoryPagination['d3'][_0x2435cd(0x2b4)]+0x1);});const _0x1caf96=document['getElementById'](_0x3d8386(0x1c7));_0x1caf96&&_0x1caf96['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x448748=document['getElementById']('history-type-filter');_0x448748&&_0x448748['addEventListener'](_0x3d8386(0x12c),applyEloHistoryFilters);const _0x1b3f4c=document['getElementById']('reset-history-filters');_0x1b3f4c&&_0x1b3f4c[_0x3d8386(0x283)]('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x450540=a0_0x26f0,_0x8bb4d2=document['getElementById']('elo-history-search')['value'][_0x450540(0x106)](),_0x28a71f=document[_0x450540(0x2df)](_0x450540(0x2b0));let _0x4225e4=0x0;_0x28a71f['forEach'](_0x32da01=>{const _0x2c7f81=_0x450540;if(_0x32da01['classList']['contains']('loading-cell')||_0x32da01['classList']['contains'](_0x2c7f81(0x159))||_0x32da01[_0x2c7f81(0x15e)]['contains']('error-state'))return;const _0x39beb6=_0x32da01['querySelector'](_0x2c7f81(0x275))?.[_0x2c7f81(0xb2)]['toLowerCase']()||'',_0x3ab900=_0x32da01['querySelector'](_0x2c7f81(0x177))?.['textContent'][_0x2c7f81(0x106)]()||'',_0x382835=_0x32da01['querySelector']('.admin-action')?.['textContent']['toLowerCase']()||'';_0x39beb6['includes'](_0x8bb4d2)||_0x3ab900[_0x2c7f81(0x311)](_0x8bb4d2)||_0x382835['includes'](_0x8bb4d2)?(_0x32da01['style'][_0x2c7f81(0x12a)]='',_0x4225e4++):_0x32da01[_0x2c7f81(0x230)]['display']=_0x2c7f81(0xe5);});}async function applyEloHistoryFilters(){const _0x43e3d9=a0_0x26f0,_0x15de1b=document['getElementById']('history-start-date')['value'],_0x2ee42c=document[_0x43e3d9(0x152)]('history-end-date')['value'],_0xca3e50=document[_0x43e3d9(0x152)]('history-type-filter')['value'],_0x30e139=currentLadder['toLowerCase']();eloHistoryPagination[_0x30e139]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x4c6449=document['getElementById'](_0x43e3d9(0x213));_0x4c6449['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x41cac1=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0xb505af=collection(db,_0x41cac1);let _0x44695d=[orderBy('timestamp','desc')];if(_0x15de1b){const _0x5861e5=new Date(_0x15de1b);_0x5861e5[_0x43e3d9(0x16d)](0x0,0x0,0x0,0x0),_0x44695d[_0x43e3d9(0x25b)](where(_0x43e3d9(0x104),'>=',_0x5861e5));}if(_0x2ee42c){const _0x5e25b6=new Date(_0x2ee42c);_0x5e25b6['setHours'](0x17,0x3b,0x3b,0x3e7),_0x44695d['push'](where('timestamp','<=',_0x5e25b6));}_0xca3e50&&_0xca3e50!=='all'&&_0x44695d['push'](where('type','==',_0xca3e50));_0x44695d['push'](limit(PAGE_SIZE));const _0x210bb6=query(_0xb505af,..._0x44695d),_0x2495df=await getDocs(_0x210bb6);!_0x2495df['empty']&&(eloHistoryPagination[_0x30e139]['firstVisible']=_0x2495df['docs'][0x0],eloHistoryPagination[_0x30e139]['lastVisible']=_0x2495df['docs'][_0x2495df['docs']['length']-0x1]);_0x4c6449['innerHTML']='';if(_0x2495df['empty']){_0x4c6449['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x2495df['forEach'](_0x57fe68=>{const _0x568e93=_0x43e3d9,_0x3f3a05=_0x57fe68[_0x568e93(0x126)](),_0x334a11=document['createElement']('tr'),_0x18783=_0x3f3a05[_0x568e93(0x104)]?new Date(_0x3f3a05[_0x568e93(0x104)][_0x568e93(0x169)]*0x3e8)['toLocaleString']():'N/A',_0x42e6c6=_0x3f3a05[_0x568e93(0x1a6)]-_0x3f3a05['previousElo'],_0x565874=_0x42e6c6>0x0?_0x568e93(0x1cc):_0x42e6c6<0x0?_0x568e93(0x302):'',_0x2442e1=_0x42e6c6>0x0?'+':'',_0x2d0dec=_0x3f3a05[_0x568e93(0x29c)]||_0x3f3a05['username']||_0x3f3a05['userId']||'N/A';_0x334a11[_0x568e93(0x287)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x18783+_0x568e93(0x268)+_0x2d0dec+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x3f3a05['previousElo']||'N/A')+_0x568e93(0x24d)+(_0x3f3a05['newElo']||'N/A')+_0x568e93(0x316)+_0x565874+'\x22>'+_0x2442e1+_0x42e6c6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x3f3a05[_0x568e93(0x270)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3f3a05[_0x568e93(0xbf)]||_0x3f3a05['promotedBy']||_0x3f3a05['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4c6449['appendChild'](_0x334a11);}),document['getElementById'](_0x30e139+'-page-indicator')['textContent']='Page\x201';}catch(_0x10d1f4){console['error']('Error\x20applying\x20filters:',_0x10d1f4),_0x4c6449[_0x43e3d9(0x287)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x10d1f4[_0x43e3d9(0x15a)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x2f57d2=a0_0x26f0;document['getElementById']('history-start-date')[_0x2f57d2(0x1a1)]='',document['getElementById']('history-end-date')[_0x2f57d2(0x1a1)]='',document['getElementById']('history-type-filter')['value']='all',document['getElementById'](_0x2f57d2(0x1c7))['value']='';const _0x310d0a=currentLadder['toLowerCase']();eloHistoryPagination[_0x310d0a]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x42ff27=a0_0x26f0,_0x1179e1=document['getElementById']('promote-player-btn'),_0x2781a4=document['getElementById'](_0x42ff27(0x166)),_0x11551a=document['getElementById'](_0x42ff27(0x1de));_0x1179e1&&_0x2781a4&&_0x11551a&&(_0x1179e1['addEventListener']('click',()=>{_0x2781a4['classList']['add']('active');}),_0x2781a4['addEventListener']('click',_0x308e5f=>{const _0x5ba1f1=_0x42ff27;_0x308e5f[_0x5ba1f1(0x23c)]===_0x2781a4&&_0x2781a4['classList'][_0x5ba1f1(0x258)]('active');}),_0x11551a['addEventListener'](_0x42ff27(0x211),async _0x29a274=>{const _0x58f322=_0x42ff27;_0x29a274[_0x58f322(0x1b0)]();const _0x4d16ab=document['getElementById']('promote-username'),_0x306cf3=document['getElementById']('promote-ladder'),_0x4c17d7=_0x4d16ab['value']['trim'](),_0x2da6c0=_0x306cf3['value'];if(!_0x4c17d7){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x4c17d7,_0x2da6c0),_0x2781a4['classList']['remove']('active'),_0x4d16ab['value']='';}catch(_0x312276){showNotification(_0x312276[_0x58f322(0x15a)],'error');}}),document['getElementById']('cancel-promote-btn')[_0x42ff27(0x283)](_0x42ff27(0x10c),()=>{const _0x1560d8=_0x42ff27;_0x2781a4['classList'][_0x1560d8(0x258)]('active');}));const _0x50d7fa=document['getElementById']('demote-player-btn'),_0x5153cd=document['getElementById']('demote-modal'),_0x3f0c46=document[_0x42ff27(0x152)]('demote-form');_0x50d7fa&&_0x5153cd&&_0x3f0c46&&(_0x50d7fa[_0x42ff27(0x283)]('click',()=>{const _0x4bbbef=_0x42ff27;_0x5153cd[_0x4bbbef(0x15e)][_0x4bbbef(0x2c9)]('active');}),_0x5153cd[_0x42ff27(0x283)](_0x42ff27(0x10c),_0x379a4d=>{_0x379a4d['target']===_0x5153cd&&_0x5153cd['classList']['remove']('active');}),_0x3f0c46[_0x42ff27(0x283)]('submit',async _0xdc98b3=>{const _0x47d170=_0x42ff27;_0xdc98b3['preventDefault']();const _0x445e77=document['getElementById']('demote-username'),_0x1cbc97=document[_0x47d170(0x152)]('demote-ladder'),_0x3f981f=_0x445e77['value'][_0x47d170(0x25d)](),_0xfea1b2=_0x1cbc97['value'];if(!_0x3f981f){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x3f981f,_0xfea1b2),document['getElementById'](_0x47d170(0xbc))[_0x47d170(0x15e)]['remove']('active'),document[_0x47d170(0x152)](_0x47d170(0x2b9))['value']='';}catch(_0x3831ae){console['error'](_0x47d170(0x1fb),_0x3831ae);}}));const _0x24db6b=document['getElementById']('set-elo-btn'),_0x1da63e=document['getElementById']('set-elo-modal'),_0x21663e=document['getElementById']('set-elo-form');_0x24db6b&&_0x1da63e&&_0x21663e&&(_0x24db6b['addEventListener']('click',()=>{const _0x31c88c=_0x42ff27;_0x1da63e['classList'][_0x31c88c(0x2c9)]('active');}),_0x1da63e[_0x42ff27(0x283)]('click',_0x1d1428=>{const _0x41fa79=_0x42ff27;_0x1d1428['target']===_0x1da63e&&_0x1da63e[_0x41fa79(0x15e)]['remove']('active');}),_0x21663e['addEventListener'](_0x42ff27(0x211),async _0x263da1=>{const _0x219419=_0x42ff27;_0x263da1['preventDefault']();const _0x2d4482=document['getElementById']('set-elo-username'),_0x4464e6=document['getElementById']('set-elo-value');let _0x2af509;const _0x36d558=document[_0x219419(0x152)](_0x219419(0x112)),_0x31124c=document[_0x219419(0x236)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0x36d558)_0x2af509=_0x36d558[_0x219419(0x1a1)];else _0x31124c?_0x2af509=_0x31124c[_0x219419(0x1a1)]:_0x2af509='D1';if(!_0x2d4482||!_0x4464e6){showNotification(_0x219419(0x137),'error');return;}const _0x4d70ce=_0x2d4482['value'][_0x219419(0x25d)](),_0x43acd4=parseInt(_0x4464e6['value']);if(!_0x4d70ce||isNaN(_0x43acd4)){showNotification(_0x219419(0x22c),_0x219419(0x20c));return;}try{await setCustomElo(_0x4d70ce,_0x43acd4,_0x2af509),_0x1da63e[_0x219419(0x15e)]['remove']('active'),_0x2d4482['value']='',_0x4464e6['value']='';}catch(_0x194cd5){showNotification(_0x194cd5[_0x219419(0x15a)],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{_0x1da63e['classList']['remove']('active');}));const _0x126146=document['getElementById'](_0x42ff27(0x2e8)),_0x204632=document[_0x42ff27(0x152)]('set-role-form');if(_0x126146&&_0x204632){_0x126146['addEventListener'](_0x42ff27(0x10c),_0x1514a0=>{_0x1514a0['target']===_0x126146&&closeModalHandler();}),_0x204632['addEventListener']('submit',async _0x620d3d=>{const _0x142920=_0x42ff27;_0x620d3d['preventDefault']();const _0x4bd2b2=document['getElementById'](_0x142920(0x1e6)),_0x5f567c=document['getElementById'](_0x142920(0x245)),_0x4e70e1=document['getElementById'](_0x142920(0xb8)),_0x3a0bd1=_0x4bd2b2[_0x142920(0x1a1)][_0x142920(0x25d)](),_0xda942e=_0x5f567c['value'][_0x142920(0x25d)](),_0x5c8b78=_0x4e70e1['value'];if(!_0x3a0bd1){showNotification(_0x142920(0xf7),'error');return;}try{await setUserRole(_0x3a0bd1,_0xda942e,_0x5c8b78),closeModalHandler(),loadUsersWithRoles();}catch(_0x276913){}});const _0x2967ee=document['getElementById']('cancel-role-btn');_0x2967ee&&(_0x2967ee['removeEventListener'](_0x42ff27(0x10c),closeModalHandler),_0x2967ee[_0x42ff27(0x283)](_0x42ff27(0x10c),closeModalHandler));}}async function promotePlayer(_0x5584d4,_0x4da919){const _0x2feee4=a0_0x26f0;try{console[_0x2feee4(0x241)]('Attempting\x20to\x20promote\x20'+_0x5584d4+'\x20in\x20'+_0x4da919+'\x20ladder');const _0x41eff4=auth['currentUser'];if(!_0x41eff4)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x506773=_0x4da919==='D2'?'playersD2':_0x2feee4(0x1ff),_0xcd53ba=_0x4da919==='D2'?'eloHistoryD2':'eloHistory';console['log'](_0x2feee4(0x261)+_0x506773);const _0x2ba0d1=collection(db,_0x506773),_0x3fb18c=query(_0x2ba0d1,where(_0x2feee4(0x28c),'==',_0x5584d4)),_0xe8a77a=await getDocs(_0x3fb18c);if(_0xe8a77a['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x4da919+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x4da919+'\x20ladder');}const _0xb4d3ff=_0xe8a77a['docs'][0x0],_0x3b6a82=_0xb4d3ff[_0x2feee4(0x126)](),_0xf9252a=_0x3b6a82[_0x2feee4(0x2a6)]||0x4b0,_0x4bf334=_0xb4d3ff['id'];console[_0x2feee4(0x241)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0xf9252a);const _0x1e83a2=[{'name':_0x2feee4(0xe8),'elo':0x578},{'name':'Silver','elo':0x640},{'name':_0x2feee4(0xdc),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x30fa62=_0x1e83a2[_0x2feee4(0x1ae)](_0x16f2aa=>_0x16f2aa['elo']>_0xf9252a);if(!_0x30fa62){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x4da919+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x4da919+'\x20ladder');}console[_0x2feee4(0x241)]('Promoting\x20player\x20to\x20'+_0x30fa62['name']+'\x20('+_0x30fa62['elo']+')'),await updateDoc(doc(db,_0x506773,_0xb4d3ff['id']),{'eloRating':_0x30fa62['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x41eff4[_0x2feee4(0x140)]||'admin'}),await addDoc(collection(db,_0xcd53ba),{'player':_0x5584d4,'previousElo':_0xf9252a,'newElo':_0x30fa62['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x30fa62[_0x2feee4(0x110)],'promotedBy':_0x41eff4['email']||'admin','gameMode':_0x4da919});try{const {promotionManager:_0x5d8342}=await import('./promotions.js'),_0x5cabaa=_0x5d8342['getRankName'](_0xf9252a),_0x1fae42=_0x30fa62['name'];await _0x5d8342['sendPromotionNotification'](_0x4bf334,_0x5584d4,_0xf9252a,_0x30fa62['elo'],_0x5cabaa,_0x1fae42,_0x2feee4(0x308),{'displayName':_0x5584d4,'source':_0x2feee4(0x19e),'adminUser':_0x41eff4['email'],'ladder':_0x4da919}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x1c6faa){console['error'](_0x2feee4(0x2c4),_0x1c6faa);}return alert(_0x2feee4(0x1a7)+_0x5584d4+_0x2feee4(0x29d)+_0x30fa62['name']+'\x20('+_0x30fa62['elo']+')'),currentLadder===_0x4da919&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x12606c){console['error']('Error\x20promoting\x20player:',_0x12606c),alert('Error\x20promoting\x20player:\x20'+_0x12606c['message']);throw _0x12606c;}}document[a0_0x1948cf(0x283)]('DOMContentLoaded',()=>{const _0x5542d7=document['getElementById']('promote-form');_0x5542d7&&_0x5542d7['addEventListener']('submit',async _0x2beed8=>{const _0x26c2e5=a0_0x26f0;_0x2beed8['preventDefault']();const _0x215d99=document['getElementById']('promote-username')['value']['trim'](),_0x1f085a=document[_0x26c2e5(0x236)]('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x215d99){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x215d99,_0x1f085a),document['getElementById'](_0x26c2e5(0x166))['classList'][_0x26c2e5(0x258)](_0x26c2e5(0x133)),document[_0x26c2e5(0x152)]('promote-username')['value']='';}catch(_0x36f5f5){console['error'](_0x26c2e5(0x26f),_0x36f5f5);}});});async function demotePlayer(_0x7c5bb2,_0x55da0b){const _0x15f0bf=a0_0x1948cf;try{console[_0x15f0bf(0x241)](_0x15f0bf(0x2b7)+_0x7c5bb2+'\x20in\x20'+_0x55da0b+'\x20ladder');const _0x426f21=auth[_0x15f0bf(0x13b)];if(!_0x426f21)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x45f448=_0x55da0b==='D2'?_0x15f0bf(0x1a4):'players',_0x4d27fe=_0x55da0b==='D2'?'eloHistoryD2':_0x15f0bf(0x27f);console['log']('Searching\x20for\x20player\x20in\x20'+_0x45f448);const _0x26a147=collection(db,_0x45f448),_0x20d603=query(_0x26a147,where('username','==',_0x7c5bb2)),_0x14f5a5=await getDocs(_0x20d603);if(_0x14f5a5[_0x15f0bf(0x18e)]){alert('Player\x20not\x20found\x20in\x20'+_0x55da0b+_0x15f0bf(0x161));throw new Error('Player\x20not\x20found\x20in\x20'+_0x55da0b+_0x15f0bf(0x161));}const _0xd6d59b=_0x14f5a5['docs'][0x0],_0x25ad84=_0xd6d59b['data'](),_0x41864c=_0x25ad84['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x41864c);const _0x40bada=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x453cbe=_0x40bada['find'](_0x356108=>_0x356108[_0x15f0bf(0x26c)]<_0x41864c);if(!_0x453cbe){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x55da0b+_0x15f0bf(0x161));throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x55da0b+'\x20ladder');}console['log']('Demoting\x20player\x20to\x20'+_0x453cbe['name']+'\x20('+_0x453cbe[_0x15f0bf(0x26c)]+')'),await updateDoc(doc(db,_0x45f448,_0xd6d59b['id']),{'eloRating':_0x453cbe['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x426f21['email']||_0x15f0bf(0x19e)}),await addDoc(collection(db,_0x4d27fe),{'player':_0x7c5bb2,'previousElo':_0x41864c,'newElo':_0x453cbe['elo'],'timestamp':serverTimestamp(),'type':_0x15f0bf(0x2c0),'rankAchieved':_0x453cbe['name'],'demotedBy':_0x426f21['email']||_0x15f0bf(0x19e),'gameMode':_0x55da0b});try{const {promotionManager:_0x504102}=await import('./promotions.js'),_0x388920=_0x504102['getRankName'](_0x41864c),_0x29e8d2=_0x453cbe['name'];await _0x504102['sendPromotionNotification'](_0xd6d59b['id'],_0x7c5bb2,_0x41864c,_0x453cbe[_0x15f0bf(0x26c)],_0x388920,_0x29e8d2,_0x15f0bf(0x2c0),{'displayName':_0x7c5bb2,'source':'admin','adminUser':_0x426f21['email'],'ladder':_0x55da0b}),console[_0x15f0bf(0x241)]('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x854370){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x854370);}return alert('Successfully\x20demoted\x20'+_0x7c5bb2+'\x20to\x20'+_0x453cbe['name']+'\x20('+_0x453cbe[_0x15f0bf(0x26c)]+')'),currentLadder===_0x55da0b&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x17fbd9){console[_0x15f0bf(0x20c)]('Error\x20demoting\x20player:',_0x17fbd9),alert('Error\x20demoting\x20player:\x20'+_0x17fbd9['message']);throw _0x17fbd9;}}document[a0_0x1948cf(0x283)]('DOMContentLoaded',()=>{const _0x321c76=a0_0x1948cf,_0x52fed3=document['getElementById'](_0x321c76(0x14c));_0x52fed3&&_0x52fed3['addEventListener'](_0x321c76(0x211),async _0xa85e6c=>{const _0x9dbe58=_0x321c76;_0xa85e6c['preventDefault']();const _0x70621f=document['getElementById']('demote-username')['value'][_0x9dbe58(0x25d)](),_0x5c6692=document[_0x9dbe58(0x236)](_0x9dbe58(0x158))['value'];if(!_0x70621f){alert(_0x9dbe58(0x2e2));return;}try{await demotePlayer(_0x70621f,_0x5c6692),document['getElementById']('demote-modal')[_0x9dbe58(0x15e)]['remove'](_0x9dbe58(0x133)),document['getElementById']('demote-username')['value']='';}catch(_0x20ba17){console['error'](_0x9dbe58(0x1fb),_0x20ba17);}});});async function setCustomElo(_0xaa441c,_0x23455b,_0x5e2973){const _0x4a10dc=a0_0x1948cf;try{const _0x1292c4=auth['currentUser'];if(!_0x1292c4||!isAdmin(_0x1292c4['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x34e8d9=_0x5e2973==='D2'?'playersD2':'players',_0x1cd3be=_0x5e2973==='D2'?'eloHistoryD2':_0x4a10dc(0x27f),_0x4b3ef1=collection(db,_0x34e8d9),_0x3970df=query(_0x4b3ef1,where('username','==',_0xaa441c)),_0x10f2b6=await getDocs(_0x3970df);if(_0x10f2b6[_0x4a10dc(0x18e)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x5e2973+'\x20ladder');const _0x511a99=_0x10f2b6['docs'][0x0],_0x2b80f6=_0x511a99['data'](),_0xb889df=_0x2b80f6['eloRating']||0x4b0,_0x5636d4=writeBatch(db);_0x5636d4['update'](doc(db,_0x34e8d9,_0x511a99['id']),{'eloRating':_0x23455b,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x1292c4['email']});const _0x39cc59=doc(collection(db,_0x1cd3be));return _0x5636d4['set'](_0x39cc59,{'player':_0xaa441c,'previousElo':_0xb889df,'newElo':_0x23455b,'timestamp':serverTimestamp(),'type':_0x4a10dc(0xc4),'modifiedBy':_0x1292c4[_0x4a10dc(0x140)],'gameMode':_0x5e2973}),await _0x5636d4['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0xaa441c+_0x4a10dc(0x2c5)+_0xb889df+'\x20to\x20'+_0x23455b,_0x4a10dc(0x2d9)),currentLadder===_0x5e2973&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x47a2ab){console[_0x4a10dc(0x20c)]('Error\x20setting\x20custom\x20ELO:',_0x47a2ab);throw _0x47a2ab;}}async function setUserRole(_0x451232,_0x1590fa,_0xb9e5db){const _0x3d728f=a0_0x1948cf;try{const _0x1f185b=auth['currentUser'];if(!_0x1f185b||!isAdmin(_0x1f185b[_0x3d728f(0x140)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x5cdd58=_0x1590fa?_0x1590fa['trim']():null,_0xdf5817=_0x5cdd58?_0xb9e5db||_0x3d728f(0xe0):null,[_0x5d4294,_0x83e4f9]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x3d728f(0x28c),'==',_0x451232))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x451232)))]),_0x11a855=[];if(!_0x5d4294['empty'])_0x11a855[_0x3d728f(0x25b)]({'ref':_0x5d4294['docs'][0x0]['ref'],'source':'D1'});if(!_0x83e4f9[_0x3d728f(0x18e)])_0x11a855['push']({'ref':_0x83e4f9['docs'][0x0]['ref'],'source':'D2'});if(_0x11a855['length']===0x0){const [_0x1112c7,_0x1f5ec0]=await Promise[_0x3d728f(0x259)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x451232))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x451232)))]);if(!_0x1112c7[_0x3d728f(0x18e)])_0x11a855[_0x3d728f(0x25b)]({'ref':_0x1112c7['docs'][0x0][_0x3d728f(0x1cb)],'source':'NonParticipant'});if(!_0x1f5ec0[_0x3d728f(0x18e)])_0x11a855[_0x3d728f(0x25b)]({'ref':_0x1f5ec0['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x11a855['length']===0x0)throw new Error('User\x20\x22'+_0x451232+_0x3d728f(0x194));const _0x692773=writeBatch(db);_0x11a855['forEach'](_0x1a7aa6=>{const _0x2c09e0=_0x3d728f;console['log']('Updating\x20role\x20for\x20'+_0x451232+_0x2c09e0(0xe3)+_0x1a7aa6['source']),!_0x5cdd58?_0x692773['update'](_0x1a7aa6['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x692773['update'](_0x1a7aa6['ref'],{'roleName':_0x5cdd58,'roleColor':_0xdf5817,'roleAssignedBy':_0x1f185b['email'],'roleAssignedAt':serverTimestamp()});}),await _0x692773['commit']();const _0x2587bd=_0x5cdd58?'Role\x20\x22'+_0x5cdd58+_0x3d728f(0xcb):'Role\x20removed';return showNotification(_0x2587bd+'\x20for\x20user\x20\x22'+_0x451232+'\x22','success'),!![];}catch(_0x39c8d5){console['error']('Error\x20setting\x20user\x20role:',_0x39c8d5),showNotification('Error:\x20'+_0x39c8d5['message'],_0x3d728f(0x20c));throw _0x39c8d5;}}function showNotification(_0x1ce5ed,_0x5dfc84='info'){const _0x587b3b=a0_0x1948cf,_0x25864a=document[_0x587b3b(0x2ef)](_0x587b3b(0x17d));_0x25864a['className']=_0x587b3b(0x176)+_0x5dfc84,_0x25864a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x5dfc84)+_0x587b3b(0x30e)+_0x1ce5ed+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20',document['body'][_0x587b3b(0x1a5)](_0x25864a),setTimeout(()=>{const _0x4d5adc=_0x587b3b;_0x25864a[_0x4d5adc(0x15e)]['add']('active');},0xa);const _0x562aef=setTimeout(()=>{closeNotification(_0x25864a);},0x1388);_0x25864a['querySelector']('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x562aef),closeNotification(_0x25864a);});}function getNotificationIcon(_0x44cf3d){const _0x2cb061=a0_0x1948cf;switch(_0x44cf3d){case _0x2cb061(0x2d9):return'fa-check-circle';case'error':return'fa-exclamation-circle';case _0x2cb061(0x1be):return _0x2cb061(0x257);case _0x2cb061(0x273):default:return _0x2cb061(0x190);}}function closeNotification(_0x249f1d){const _0x576d38=a0_0x1948cf;_0x249f1d[_0x576d38(0x15e)]['remove']('active'),setTimeout(()=>{const _0x26b408=_0x576d38;_0x249f1d[_0x26b408(0x258)]();},0x12c);}function setupUserRolesSection(){const _0x342c2a=a0_0x1948cf,_0x1ac82a=document['getElementById']('load-users-data');_0x1ac82a&&_0x1ac82a['addEventListener']('click',function(){const _0x2d3efa=a0_0x26f0;this['classList']['add']('loading'),this['innerHTML']=_0x2d3efa(0x184),loadUsersWithRoles()[_0x2d3efa(0x23f)](()=>{const _0x51e50f=_0x2d3efa;this['classList'][_0x51e50f(0x258)]('loading'),this['innerHTML']=_0x51e50f(0x26d);})[_0x2d3efa(0x301)](_0x18444d=>{const _0x28b7e7=_0x2d3efa;console['error'](_0x28b7e7(0x143),_0x18444d),this['classList']['remove']('loading'),this[_0x28b7e7(0x287)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x43a3d8=document[_0x342c2a(0x152)](_0x342c2a(0x138));_0x43a3d8&&_0x43a3d8['addEventListener']('click',()=>{const _0x2e3f7d=_0x342c2a,_0x3bc54e=document[_0x2e3f7d(0x152)]('set-role-modal');_0x3bc54e&&_0x3bc54e[_0x2e3f7d(0x15e)][_0x2e3f7d(0x2c9)]('active');});const _0xddd91a=document['getElementById'](_0x342c2a(0x2a2));_0xddd91a&&_0xddd91a['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x594760=document[_0x342c2a(0x152)](_0x342c2a(0x2e6));_0x594760&&_0x594760['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x451021=a0_0x1948cf,_0x4c2b08=document['getElementById']('users-table-body');if(!_0x4c2b08)return;_0x4c2b08[_0x451021(0x287)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x573f9e,_0x5c7008,_0x760075,_0x5921be]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x451021(0x294))),getDocs(collection(db,_0x451021(0x30a)))]),_0x211194=new Map();function _0x32b01d(_0x19118a,_0x224870){_0x19118a['forEach'](_0x272a44=>{const _0x41c763=a0_0x26f0,_0x4626f9=_0x272a44[_0x41c763(0x126)]();if(!_0x4626f9[_0x41c763(0x28c)])return;if(!_0x211194['has'](_0x4626f9[_0x41c763(0x28c)]))_0x211194[_0x41c763(0x226)](_0x4626f9[_0x41c763(0x28c)],{'username':_0x4626f9[_0x41c763(0x28c)],'roleName':_0x4626f9['roleName']||null,'roleColor':_0x4626f9['roleColor']||null,'roleAssignedBy':_0x4626f9[_0x41c763(0x170)]||null,'roleAssignedAt':_0x4626f9['roleAssignedAt']||null,'sources':[_0x224870]});else{const _0xe52bbf=_0x211194[_0x41c763(0xae)](_0x4626f9['username']);_0x4626f9['roleName']&&(!_0xe52bbf['roleName']||_0x224870==='D1'||_0x224870==='D2')&&(_0xe52bbf[_0x41c763(0x2f5)]=_0x4626f9[_0x41c763(0x2f5)],_0xe52bbf['roleColor']=_0x4626f9['roleColor'],_0xe52bbf[_0x41c763(0x170)]=_0x4626f9['roleAssignedBy'],_0xe52bbf['roleAssignedAt']=_0x4626f9['roleAssignedAt']),!_0xe52bbf['sources'][_0x41c763(0x311)](_0x224870)&&_0xe52bbf[_0x41c763(0x107)]['push'](_0x224870);}});}_0x32b01d(_0x573f9e,'D1'),_0x32b01d(_0x5c7008,'D2'),_0x32b01d(_0x760075,_0x451021(0x1c0)),_0x32b01d(_0x5921be,'Profile');const _0x90f14e=Array['from'](_0x211194[_0x451021(0xfa)]())['sort']((_0x2556d3,_0x575858)=>_0x2556d3['username']['localeCompare'](_0x575858['username']));if(_0x90f14e['length']===0x0){_0x4c2b08['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x4c2b08[_0x451021(0x287)]='',_0x90f14e[_0x451021(0x157)](_0x33f9cf=>{const _0x35548f=_0x451021,_0xcc3b5d=document['createElement']('tr');_0xcc3b5d['dataset']['username']=_0x33f9cf[_0x35548f(0x28c)],_0xcc3b5d['dataset'][_0x35548f(0x2f5)]=_0x33f9cf[_0x35548f(0x2f5)]||'',_0xcc3b5d[_0x35548f(0x239)][_0x35548f(0x116)]=_0x33f9cf['roleColor']||'#808080';const _0x32f45a=_0x33f9cf['roleAssignedAt']?new Date(_0x33f9cf['roleAssignedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x5ad6a1=_0x33f9cf[_0x35548f(0x2f5)]?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x33f9cf['roleColor']+';\x20color:\x20'+getContrastColor(_0x33f9cf['roleColor'])+';\x22>'+_0x33f9cf[_0x35548f(0x2f5)]+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0xcc3b5d['innerHTML']=_0x35548f(0x15f)+_0x33f9cf['username']+_0x35548f(0x1b3)+_0x33f9cf['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5ad6a1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x33f9cf['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f45a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x33f9cf['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x33f9cf['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x33f9cf['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4c2b08[_0x35548f(0x1a5)](_0xcc3b5d);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x3f7e83=>{const _0x5c44e4=_0x451021;_0x3f7e83[_0x5c44e4(0x283)]('click',()=>{const _0x5bc3b2=_0x5c44e4,_0x34c09b=_0x3f7e83[_0x5bc3b2(0x239)]['username'];openRoleEditModal(_0x34c09b);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x18fe52=>{_0x18fe52['addEventListener']('click',()=>{const _0x56469e=a0_0x26f0,_0x260e13=_0x18fe52['dataset'][_0x56469e(0x28c)];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x260e13+'?')&&setUserRole(_0x260e13,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x44db54=>console['error'](_0x56469e(0x266),_0x44db54));});});}catch(_0x47630b){console['error']('Error\x20loading\x20users:',_0x47630b),_0x4c2b08['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x5dd0e4){const _0x4b9d19=a0_0x1948cf;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x5dd0e4);const _0x375ce5=document['getElementById'](_0x4b9d19(0x2e8)),_0x57d005=document['getElementById']('role-username'),_0x2ade61=document['getElementById']('user-role');if(!_0x375ce5){console[_0x4b9d19(0x20c)]('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x375ce5);_0x57d005?(_0x57d005['value']=_0x5dd0e4,console['log']('Username\x20input\x20set\x20to:\x20'+_0x5dd0e4)):console['warn'](_0x4b9d19(0x24c));const _0xa8da7e=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x5dd0e4+'\x22]');if(_0xa8da7e&&_0x2ade61){const _0x4d7e7a=_0xa8da7e[_0x4b9d19(0x239)]['role'];_0x2ade61['value']=_0x4d7e7a==='none'?'':_0x4d7e7a,console[_0x4b9d19(0x241)]('Role\x20select\x20set\x20to:\x20'+_0x2ade61['value']+'\x20(based\x20on\x20data-role:\x20'+_0x4d7e7a+')');}else{if(!_0xa8da7e)console[_0x4b9d19(0x173)]('Table\x20row\x20for\x20user\x20'+_0x5dd0e4+'\x20not\x20found.');if(!_0x2ade61)console[_0x4b9d19(0x173)]('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x2ade61)_0x2ade61['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x375ce5['classList'][_0x4b9d19(0x2c9)]('active');const _0x2f9157=document[_0x4b9d19(0x152)]('cancel-role-btn');_0x2f9157?(console[_0x4b9d19(0x241)](_0x4b9d19(0x17c)),_0x2f9157['removeEventListener']('click',closeModalHandler),_0x2f9157['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console[_0x4b9d19(0x241)]('Attaching\x20background\x20click\x20listener.'),_0x375ce5['removeEventListener']('click',closeModalBackgroundHandler),_0x375ce5['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x47c8a1){_0x47c8a1['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x1e4473=a0_0x1948cf,_0x363a8f=document['getElementById']('set-role-modal');_0x363a8f&&(_0x363a8f['classList'][_0x1e4473(0x258)]('active'),_0x363a8f['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x1afc5e=a0_0x1948cf,_0x5dea13=document[_0x1afc5e(0x152)]('user-search')?.[_0x1afc5e(0x1a1)][_0x1afc5e(0x106)]()||'',_0x15effa=document[_0x1afc5e(0x152)]('role-filter')?.['value']||_0x1afc5e(0x259),_0x11645d=document[_0x1afc5e(0x2df)](_0x1afc5e(0xc5));let _0x1b8331=0x0;_0x11645d[_0x1afc5e(0x157)](_0x56f7a1=>{const _0xee43ca=_0x1afc5e;if(_0x56f7a1['querySelector'](_0xee43ca(0x2a3))||_0x56f7a1[_0xee43ca(0x236)]('.empty-state')||_0x56f7a1[_0xee43ca(0x236)]('.error-state'))return;const _0x513d04=_0x56f7a1['dataset']['username']?.['toLowerCase']()||'',_0x5118a5=_0x56f7a1[_0xee43ca(0x239)]['role']||_0xee43ca(0xe5),_0x2c737d=_0x513d04['includes'](_0x5dea13),_0x32af88=_0x15effa==='all'||_0x5118a5===_0x15effa;_0x2c737d&&_0x32af88?(_0x56f7a1[_0xee43ca(0x230)]['display']='',_0x1b8331++):_0x56f7a1['style']['display']=_0xee43ca(0xe5);});if(_0x1b8331===0x0&&_0x11645d['length']>0x0){const _0x429b28=document['getElementById']('users-table-body');if(_0x429b28){if(!_0x429b28[_0x1afc5e(0x236)]('.no-results')){const _0x3ac3ca=document['createElement']('tr');_0x3ac3ca[_0x1afc5e(0x15e)]['add']('no-results'),_0x3ac3ca[_0x1afc5e(0x287)]='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x429b28['appendChild'](_0x3ac3ca);}}}else{const _0x1852b7=document[_0x1afc5e(0x236)]('.no-results');_0x1852b7&&_0x1852b7[_0x1afc5e(0x258)]();}}function setupManageArticlesSection(){const _0x257110=a0_0x1948cf,_0x36ca71=document['getElementById']('load-articles-data');_0x36ca71&&_0x36ca71['addEventListener']('click',function(){const _0x5670fe=a0_0x26f0;this[_0x5670fe(0x15e)]['add']('loading'),this[_0x5670fe(0x287)]=_0x5670fe(0x184),loadArticles()[_0x5670fe(0x23f)](()=>{const _0x49df22=_0x5670fe;this['classList'][_0x49df22(0x258)]('loading'),this['innerHTML']=_0x49df22(0xf3);})[_0x5670fe(0x301)](_0x408398=>{const _0x16a3c2=_0x5670fe;console['error']('Error\x20loading\x20articles:',_0x408398),this['classList'][_0x16a3c2(0x258)](_0x16a3c2(0x22f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xb383f1=_0x16a3c2;this['innerHTML']=_0xb383f1(0xf3);},0xbb8);});});const _0x427a92=document['getElementById'](_0x257110(0x289));_0x427a92?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x427a92['style'][_0x257110(0x12a)]='block',_0x427a92['addEventListener'](_0x257110(0x10c),()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x45095a=document[_0x257110(0x152)]('article-form');_0x45095a&&_0x45095a['addEventListener']('submit',_0x22f58b=>{_0x22f58b['preventDefault'](),saveArticle();});const _0x41fadb=document['getElementById']('cancel-article-btn');_0x41fadb&&_0x41fadb[_0x257110(0x283)]('click',()=>{closeArticleModal();});const _0x4037dd=document['querySelector'](_0x257110(0x206));_0x4037dd&&_0x4037dd[_0x257110(0x283)](_0x257110(0x10c),()=>{closeArticleModal();});const _0xcfaa82=document[_0x257110(0x152)]('article-modal');_0xcfaa82&&_0xcfaa82['addEventListener']('click',_0x26320a=>{_0x26320a['target']===_0xcfaa82&&closeArticleModal();});}async function loadArticles(){const _0x3b534c=a0_0x1948cf,_0x56b618=document['getElementById']('articles-table-body');if(!_0x56b618)return;_0x56b618[_0x3b534c(0x287)]='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x4486fc=collection(db,_0x3b534c(0xc3)),_0x291cb9=query(_0x4486fc,orderBy(_0x3b534c(0x180),'desc')),_0x452128=await getDocs(_0x291cb9);if(_0x452128['empty']){_0x56b618['innerHTML']=_0x3b534c(0x1c2);return;}_0x56b618['innerHTML']='',_0x452128['forEach'](_0x1007f4=>{const _0x5d4c21=_0x3b534c,_0x339000=_0x1007f4['data'](),_0x4d4f05=document['createElement']('tr'),_0x803d6d=_0x339000[_0x5d4c21(0x180)]?new Date(_0x339000[_0x5d4c21(0x180)][_0x5d4c21(0x169)]*0x3e8)[_0x5d4c21(0x285)]():'N/A';_0x4d4f05['innerHTML']=_0x5d4c21(0x15f)+(_0x339000['title']||_0x5d4c21(0x174))+_0x5d4c21(0x265)+(_0x339000['author']||'Unknown')+_0x5d4c21(0x265)+_0x803d6d+_0x5d4c21(0x1ca)+_0x1007f4['id']+_0x5d4c21(0xe4)+_0x1007f4['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x56b618['appendChild'](_0x4d4f05);}),setupArticleActionButtons();}catch(_0x4fc5fb){console['error'](_0x3b534c(0x135),_0x4fc5fb),_0x56b618['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x4fc5fb['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x5a519d=a0_0x1948cf;document['querySelectorAll'](_0x5a519d(0x2fd))['forEach'](_0x2dc18c=>{_0x2dc18c['addEventListener']('click',async _0x5d2a74=>{const _0x18b697=a0_0x26f0,_0x5f4a13=_0x5d2a74[_0x18b697(0x2c3)]['dataset']['id'];openArticleModal(_0x5f4a13);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x55ff5f=>{_0x55ff5f['addEventListener']('click',async _0xaa14ad=>{const _0x3ffc5e=a0_0x26f0,_0xdf986a=_0xaa14ad[_0x3ffc5e(0x2c3)]['dataset']['id'];confirmDeleteArticle(_0xdf986a);});});}function openArticleModal(_0x18684d=null){const _0x25c752=a0_0x1948cf,_0x596434=document[_0x25c752(0x152)]('article-modal'),_0x553ab8=document['getElementById']('article-modal-title'),_0x39f646=document['getElementById'](_0x25c752(0x27e)),_0x2db985=document['getElementById'](_0x25c752(0x2ab));_0x39f646['reset'](),_0x2db985[_0x25c752(0x1a1)]='';if(_0x18684d)_0x553ab8['textContent']='Edit\x20Article',_0x2db985['value']=_0x18684d,loadArticleData(_0x18684d);else{_0x553ab8[_0x25c752(0xb2)]=_0x25c752(0x160);const _0x21ef85=auth[_0x25c752(0x13b)];if(_0x21ef85){const _0xaa9031=document['getElementById'](_0x25c752(0x16a));if(_0xaa9031&&_0x21ef85[_0x25c752(0x2d1)])_0xaa9031['value']=_0x21ef85['displayName'];else _0xaa9031&&(_0xaa9031[_0x25c752(0x1a1)]=_0x21ef85['email']);}}_0x596434['classList']['add']('active');}async function loadArticleData(_0x267972){const _0x39ebb0=a0_0x1948cf;try{const _0x2dbe93=doc(db,'articles',_0x267972),_0xe45ea1=await getDoc(_0x2dbe93);if(!_0xe45ea1[_0x39ebb0(0x2e0)]()){showNotification('Article\x20not\x20found',_0x39ebb0(0x20c));return;}const _0x579443=_0xe45ea1['data']();document['getElementById']('article-title')[_0x39ebb0(0x1a1)]=_0x579443[_0x39ebb0(0x2c7)]||'',document['getElementById']('article-author')['value']=_0x579443[_0x39ebb0(0x262)]||'',document['getElementById']('article-image-url')['value']=_0x579443['imageUrl']||'',document['getElementById']('article-content')['value']=_0x579443['content']||'';}catch(_0xed4196){console[_0x39ebb0(0x20c)](_0x39ebb0(0x2a9),_0xed4196),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x43e0f4=a0_0x1948cf;try{const _0x1991b0=document[_0x43e0f4(0x152)]('article-id')['value'],_0x4010db=document[_0x43e0f4(0x152)](_0x43e0f4(0x317))['value']['trim'](),_0x2f7f14=document[_0x43e0f4(0x152)]('article-author')['value']['trim'](),_0x32bf54=document['getElementById']('article-image-url')['value']['trim'](),_0x19231b=document[_0x43e0f4(0x152)](_0x43e0f4(0x10e))['value']['trim']();if(!_0x4010db||!_0x19231b){showNotification(_0x43e0f4(0xce),'error');return;}const _0x2b29de=auth['currentUser'];if(!_0x2b29de){showNotification(_0x43e0f4(0x253),'error');return;}const _0x2eb923={'title':_0x4010db,'author':_0x2f7f14,'imageUrl':_0x32bf54||null,'content':_0x19231b,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x2b29de['email']};!_0x1991b0?(_0x2eb923['createdAt']=serverTimestamp(),_0x2eb923['createdBy']=_0x2b29de[_0x43e0f4(0x140)],await addDoc(collection(db,'articles'),_0x2eb923),showNotification('Article\x20created\x20successfully',_0x43e0f4(0x2d9))):(await updateDoc(doc(db,'articles',_0x1991b0),_0x2eb923),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x3b576a){console[_0x43e0f4(0x20c)]('Error\x20saving\x20article:',_0x3b576a),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x3b576a[_0x43e0f4(0x15a)],'error');}}function closeArticleModal(){const _0xa3ea89=a0_0x1948cf,_0x7dbe3e=document['getElementById'](_0xa3ea89(0x288));_0x7dbe3e&&_0x7dbe3e['classList'][_0xa3ea89(0x258)](_0xa3ea89(0x133));}async function confirmDeleteArticle(_0x351478){const _0x51cd34=a0_0x1948cf;if(confirm(_0x51cd34(0x15b)))try{await deleteDoc(doc(db,'articles',_0x351478)),loadArticles(),showNotification(_0x51cd34(0x2e9),_0x51cd34(0x2d9));}catch(_0x1cdfbb){console['error'](_0x51cd34(0x243),_0x1cdfbb),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x1cdfbb['message'],'error');}}function setupTrophyManagementSection(){const _0x37a2f7=a0_0x1948cf,_0x2b1ad9=document[_0x37a2f7(0x152)]('load-trophies-data');_0x2b1ad9&&_0x2b1ad9['addEventListener'](_0x37a2f7(0x10c),function(){const _0x5973e3=_0x37a2f7;this['classList']['add']('loading'),this[_0x5973e3(0x287)]=_0x5973e3(0x184);const _0x14c9e0=document['getElementById']('assign-trophy-image');_0x14c9e0&&(_0x14c9e0['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x3c8693=_0x5973e3;this['classList'][_0x3c8693(0x258)](_0x3c8693(0x22f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x2a2464=>{const _0x240344=_0x5973e3;console[_0x240344(0x20c)]('Error\x20loading\x20trophies:',_0x2a2464),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x120dbd=document[_0x37a2f7(0x152)](_0x37a2f7(0xe6));_0x120dbd&&_0x120dbd['addEventListener']('click',()=>{openTrophyModal();});const _0x57b39d=document['getElementById']('trophy-form');_0x57b39d&&_0x57b39d[_0x37a2f7(0x283)]('submit',_0x4362a6=>{_0x4362a6['preventDefault'](),saveTrophyDefinition();});const _0x30867f=document[_0x37a2f7(0x152)]('cancel-trophy-btn');_0x30867f&&_0x30867f['addEventListener']('click',()=>{closeTrophyModal();});document[_0x37a2f7(0x2df)](_0x37a2f7(0x23e))['forEach'](_0xb71f70=>{const _0x50d044=_0x37a2f7;_0xb71f70[_0x50d044(0x283)]('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x47a05e=document[_0x37a2f7(0x152)]('trophy-modal');_0x47a05e&&_0x47a05e[_0x37a2f7(0x283)]('click',_0x331969=>{const _0x4354f8=_0x37a2f7;_0x331969[_0x4354f8(0x23c)]===_0x47a05e&&closeTrophyModal();});const _0x47ca96=document[_0x37a2f7(0x152)](_0x37a2f7(0x281));_0x47ca96&&_0x47ca96['addEventListener']('click',_0x4ab668=>{_0x4ab668['target']===_0x47ca96&&closeAssignTrophyModal();});const _0x33f6fe=document['getElementById']('assign-trophy-form');_0x33f6fe&&_0x33f6fe['addEventListener'](_0x37a2f7(0x211),_0x10c949=>{_0x10c949['preventDefault'](),assignTrophyToPlayer();});const _0x1a8ac1=document[_0x37a2f7(0x152)](_0x37a2f7(0x307));_0x1a8ac1&&_0x1a8ac1['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x2721b5=document[_0x37a2f7(0x152)](_0x37a2f7(0xe1));_0x2721b5&&(_0x2721b5['addEventListener']('input',updateTrophyImagePreview),_0x2721b5[_0x37a2f7(0x283)](_0x37a2f7(0xfb),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x5f56e8=a0_0x1948cf,_0x4aaa87=document['getElementById']('trophy-image-url')['value'][_0x5f56e8(0x25d)](),_0x498caa=document[_0x5f56e8(0x152)]('trophy-image-preview');if(!_0x498caa){const _0x5c947c=document['getElementById'](_0x5f56e8(0xe1))['closest'](_0x5f56e8(0x231)),_0x373de3=document[_0x5f56e8(0x2ef)](_0x5f56e8(0x17d));_0x373de3['id']=_0x5f56e8(0x2f4),_0x373de3[_0x5f56e8(0x215)]=_0x5f56e8(0x260),_0x5c947c['appendChild'](_0x373de3);const _0x1c526b=document[_0x5f56e8(0x2ef)]('img');_0x1c526b['id']=_0x5f56e8(0x2a8),_0x1c526b['alt']='Trophy\x20Preview',_0x1c526b[_0x5f56e8(0x147)]=function(){const _0x5cb76e=_0x5f56e8;this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add'](_0x5cb76e(0x20c));},_0x373de3['appendChild'](_0x1c526b);}const _0x3ef744=document['getElementById']('trophy-preview-img');_0x4aaa87?(_0x3ef744['src']=_0x4aaa87,_0x3ef744['style']['display']='block',_0x3ef744[_0x5f56e8(0x15e)][_0x5f56e8(0x258)](_0x5f56e8(0x20c))):(_0x3ef744[_0x5f56e8(0x101)]=DEFAULT_TROPHY_IMAGE,_0x3ef744[_0x5f56e8(0x230)]['display']='block');}async function loadTrophyDefinitions(){const _0x565db1=a0_0x1948cf,_0x2793cb=document['getElementById'](_0x565db1(0x1d7));if(!_0x2793cb)return;_0x2793cb['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x26d783=collection(db,'trophyDefinitions'),_0x12ff96=query(_0x26d783,orderBy('createdAt','desc')),_0x55fce6=await getDocs(_0x12ff96);if(_0x55fce6['empty']){_0x2793cb['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x2793cb['innerHTML']='',_0x55fce6['forEach'](_0x223e1b=>{const _0x562345=_0x565db1,_0x5d2fd8=_0x223e1b['data'](),_0x2b0382=document['createElement']('tr'),_0x20cfa3=_0x5d2fd8['createdAt']?new Date(_0x5d2fd8['createdAt'][_0x562345(0x169)]*0x3e8)['toLocaleString']():_0x562345(0x1bc);_0x2b0382['innerHTML']=_0x562345(0x314)+(_0x5d2fd8['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5d2fd8['name']+_0x562345(0x28f)+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x5d2fd8['name']||_0x562345(0xaa))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x5d2fd8['rarity']||'common')+'\x22>'+(_0x5d2fd8[_0x562345(0x29b)]||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x20cfa3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x223e1b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x223e1b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x223e1b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2793cb[_0x562345(0x1a5)](_0x2b0382);}),setupTrophyActionButtons();}catch(_0xc92388){console['error'](_0x565db1(0x182),_0xc92388),_0x2793cb['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0xc92388['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x4dbb42=>{const _0x16a6cc=a0_0x26f0;_0x4dbb42[_0x16a6cc(0x283)]('click',_0x357331=>{const _0x58364c=_0x357331['currentTarget']['dataset']['id'];openTrophyModal(_0x58364c);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x241e81=>{_0x241e81['addEventListener']('click',_0x5345e0=>{const _0x2aa166=_0x5345e0['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x2aa166);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x25bc4a=>{_0x25bc4a['addEventListener']('click',_0x114f0f=>{const _0x2701f3=_0x114f0f['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x2701f3);});});}function a0_0x40d6(){const _0x3f9995=['</td></tr>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','manage-ribbons','#article-modal\x20.close-btn','button[type=\x22submit\x22]','\x20users...','mapPlayed','\x20points','No\x20player\x20selected','error','Player\x20Name\x20is\x20required','Failed\x20to\x20resimulate\x20match:\x20','creator','3237069OurbiE','submit','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','elo-history-table-body','points-overview-search','className','Admin\x20Adjustment','mapCreator','highlight-modal','Highlight\x20added\x20successfully!','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','Loaded\x20','Deleting\x20match...','firstVisible','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','manage-trophies','Achievement\x20highlight\x20button\x20clicked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','achievementType','edit-match-winner-suicides','469rDkXCa','highlight-achievement-details','set','role','Create\x20test\x20match\x20modal\x20not\x20found','getComputedStyle','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20','matches-start-date','Please\x20enter\x20valid\x20username\x20and\x20ELO','searchTerm','toDate','loading','style','.form-group','contains','bind','previousElo','Found\x20user\x20in\x20','querySelector','input[name=\x22assign-ladder\x22]:checked','Match\x20updated\x20successfully','dataset','d1-next-page','confirm-resimulate-btn','target','wins','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','then','highlight-match-date-container','log','Please\x20enter\x20valid\x20data','Error\x20deleting\x20article:','edit-highlight-videoId-input','role-name','124590uJIvgm','trophyDefinitions','create-match-highlight-btn','Found\x20ELO\x20history\x20for\x20player\x20','Current\x20user:','trophy-rarity','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','match','\x20from\x20','Load\x20players\x20data\x20clicked','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','0.6','load-trophies-data','test','fa-exclamation-triangle','remove','all','stopPropagation','push','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','trim','awardedAt','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','trophy-preview-container','Searching\x20for\x20player\x20in\x20','author','Found\x20radio\x20with\x20value:','achievement','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20removing\x20role:','pendingResimulateData','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','Error\x20deleting\x20match:','setAttribute','trophy-description','elo','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','\x20allowed\x20tabs:','Error\x20in\x20promotion:','type','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)','info','Role\x20\x27','.player','Modal\x20element\x20not\x20found!','Modal\x20close\x20button\x20clicked','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','approvedAt','Unknown\x20Admin','opacity','matchInfo','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','article-form','eloHistory','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','assign-trophy-modal','videoId','addEventListener','\x27\x20has\x20permissions:','toLocaleString','d1-prev-page','innerHTML','article-modal','create-new-article-btn','winnerSuicides','update','username','playerId','activity','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','length','Create\x20New\x20','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','nonParticipants','Error\x20loading\x20players:','create-test-match-modal','playersD3','RejectedD3','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','Found\x20','rarity','player','\x20to\x20','new-player-username','settings','points-action','userTrophies','user-search','.loading-cell','apply','Unknown','eloRating','4118952EriZON','trophy-preview-img','Error\x20loading\x20article\x20data:','\x20before\x20match:\x20','article-id','replaceChild','validation-results-container','data-section','No\x20reason\x20provided','#elo-history-table-body\x20tr','create-creator-highlight-btn','cancel-edit-btn','Points\x20action\x20buttons\x20setup\x20complete','page','edit-highlight-matchDate-input','lastPointsModified','Attempting\x20to\x20demote\x20','Closing\x20create\x20test\x20match\x20modal','demote-username','toISOString','TestWinner','\x20-\x20','Match\x20Result','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','Error\x20deleting\x20trophy\x20definition:','demotion','manage-highlights','edit-match-winner-comment','currentTarget','Failed\x20to\x20send\x20Discord\x20notification:','\x20was\x20updated\x20from\x20','Failed\x20to\x20load\x20trophy\x20data','title','Error\x20in\x20bulk\x20award\x20process:\x20','add','fromDate','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','removeAttribute','Error\x20assigning\x20trophy:','winnerUsername','edit-match-ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','displayName','Error\x20loading\x20highlight:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','allUsersPoints','edit-match-winner-demo','desc','save-player-btn','Match\x20deleted\x20successfully','success','\x22\x20not\x20found\x20in\x20','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','edit-highlight-map-input','424165SLsbnm','create-test-match-btn','querySelectorAll','exists','\x27</td>','Please\x20enter\x20a\x20username','create-achievement-highlight-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>','resimulate-modal','role-filter','Failed\x20to\x20assign\x20trophy:\x20','set-role-modal','Article\x20deleted\x20successfully','closest','assign-trophy-id','rgba(255,\x20255,\x20255,\x200.1)','inactive-days-filter','matches-end-date','createElement','rgba(255,\x20193,\x207,\x200.1)','input[name=\x22test-match-ladder\x22]','#e0e0e0','\x20unique\x20pilots\x20across\x20all\x20ladders','trophy-image-preview','roleName','common','mapVersion','Created\x20','sort','Matches\x20Played','date','RejectedD2','.edit-article-btn','Edit\x20Trophy','approvedMatchesD2','achievementDetails','catch','negative-change','Setting\x20permissions\x20based\x20on\x20role:\x20','Starting\x20points\x20award\x20process...','Modal\x20should\x20now\x20be\x20visible','size','cancel-assign-btn','promotion','edit-match-winner-score','userProfiles','Won','\x20in\x20all\x20collections...','asc','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','high-points','achievementPlayer','includes','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','#cancel-create-test-match-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','selected-user-id','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','article-title','input','edit-losses','previousElementSibling','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','rejected-count','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','disabled','edit-match-loser-score','Unranked','matches-search','match-count','edit-highlight-matchInfo-input','Untitled\x20Trophy','required','has','quick-edit-user-id','get','Error\x20loading\x20match\x20data:','amount','award-all-pilots-btn','textContent','Dashboard\x20data\x20loaded\x20successfully','inactive-players-table-body','map','ribbon-target-ladder','✅\x20Exists','role-color','\x20(+','edit-match-title','pendingMatchesD2','demote-modal','Subtracted\x20','Silver','modifiedBy','#1976d2','winnerName','assign-trophy-image','articles','admin_modification','#users-table-body\x20tr','achievementImageUrl','assign-player-username','Modal\x20background\x20clicked','Match\x20not\x20found','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','\x22\x20set','visible','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','Title\x20and\x20content\x20are\x20required','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','cloneNode','flex','docs','console','\x20D2\x20matches,\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','error-state','loserComment','Added\x20','\x20by\x20UID:','ribbons-overview-table-body','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','Gold','Error\x20finding\x20match:','2150795ptcijN','Error\x20saving\x20highlight:\x20','#808080','trophy-image-url','assign-trophy-rarity','\x20in\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','none','create-new-trophy-btn','loserScore','Bronze','\x20Weekly\x20Activity','pendingMatches','commit','Error\x20loading\x20inactive\x20players:','manage-matches','#players.content-section.active','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','\x22\x20data-ladder=\x22','ribbon-level','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','resimulate-match-id','./ladderalgorithm.js','Cancel\x20button\x20not\x20found','Username\x20is\x20missing','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','points-sort-order','values','paste','getAttribute','matchDate','non-participants','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','mapName','src','points','edit-highlight-matchLink-input','timestamp','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','toLowerCase','sources','Achievement','replace','pending-count','moderately-inactive','click','Modal\x20computed\x20styles:','article-content','highlights','name','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','set-elo-ladder','#players-table-body\x20tr','Error\x20creating\x20simple\x20test\x20match:','points-amount','roleColor','\x20pilots.\x20Errors:\x20','action','18KoigPZ','.close-btn','Player\x20\x22','Modal\x20opened\x20successfully','Ribbons\x20data\x20loaded\x20successfully','description','load-highlights-data','data-ladder','no-results-message','Testing\x20Firebase\x20connection...','Create\x20test\x20match\x20form\x20not\x20found','Create\x20test\x20match\x20modal\x20setup\x20complete','Error\x20loading\x20ELO\x20history:','data','highlight-map','join','bulk-award-points-btn','display','cancel-highlight-btn','change','reason','manage-players','Deleting\x20match\x20','highly-inactive','Error\x20loading\x20points\x20history:','Displaying\x20','active','match-details-container','Error\x20loading\x20articles:','block','Form\x20elements\x20are\x20missing','add-new-role-btn','2619232FguVDR','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','currentUser','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','.sidebar-nav\x20.nav-item','Failed\x20to\x20load\x20user\x20data:\x20','doughnut','email','.edit-btn','reset','Error\x20loading\x20users:','name-asc','keys','playerRibbonsD2','onerror','Load\x20users\x20data\x20clicked','pointsHistory','\x20ladder,\x20page\x20','startDate','demote-form','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20','store-item-select','loserSuicides','Demotion','getElementById','Unknown\x20User','Creating\x20test\x20match\x20without\x20player\x20validation...','.view-player-btn','.ladder-switch\x20input','forEach','input[name=\x22demote-ladder\x22]:checked','empty-state','message','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','Player\x20updated\x20successfully','highlight-map-container','classList','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Create\x20Article','\x20ladder','#ffffff','Adding\x20simple\x20test\x20match...','dashboard','<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches','promote-modal','approvedMatches','lastMatch','seconds','article-author','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','localeCompare','setHours','Failed\x20to\x20load\x20points\x20data:\x20','inactive-players','roleAssignedBy','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Failed\x20to\x20find\x20match:\x20','warn','Untitled','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','notification\x20','.type','Highlight\x20updated\x20successfully!','All\x20fields\x20are\x20required','position','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','Attaching\x20cancel\x20button\x20listener.','div','d2-prev-page','eloHistoryD2','createdAt','Error\x20processing\x20','Error\x20loading\x20trophy\x20definitions:','\x20collection...','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','.edit-ribbons-btn','current-ladder-display','Error\x20loading\x20trophies:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','Highlight\x20not\x20found','matchLink','Thursday','player-search','\x20(from\x20','empty','highlight-loser-score','fa-info-circle','manage-articles','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','Updated\x20ELO\x20ratings:\x20Winner\x20','\x22\x20not\x20found\x20in\x20any\x20collection','Promotion','achievement-type',').\x20','Error\x20adding\x20player:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','destroy','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','__proto__','No\x20user\x20ID\x20found\x20on\x20button','admin','.ladder-switch\x20input[value=\x22D1\x22]','\x20ladder!','value','\x20ELO\x20history\x20entries.\x20','Match\x20ID\x20or\x20ladder\x20missing','playersD2','appendChild','newElo','Successfully\x20promoted\x20','create-test-match-form','selected-user-info','highlight-submitted-by','winnerScore','40zGnBTk','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','find','split','preventDefault','Error\x20initializing\x20points\x20field:','Trophy\x20definition\x20deleted\x20successfully','\x20<span\x20class=\x22user-source\x22>(','Switched\x20to\x20','ladder','filter','apply-matches-filters','checked','award-item-form','loserId','non-participant','N/A','Modal\x20cancel\x20button\x20clicked','warning','quick-points-amount','Non-Participant','Saturday','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','No\x20email','entries','Firebase\x20connection\x20test\x20failed:','Error\x20opening\x20assign\x20trophy\x20modal:','elo-history-search','highlight-creator-image-container','playerProfileUrl','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','ref','positive-change','32708kGtWLd','Error\x20initializing\x20points:\x20','489EjdyVM','constructor','Error\x20loading\x20points\x20data:','Setting\x20up\x20Manage\x20Points\x20section','award-reason','elo-history','table','playerRibbons','trophies-table-body','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','manage-points','highlight-match-info','toLocaleDateString','reduce','lastVisible','promote-form','Create\x20test\x20match\x20button\x20clicked','Test\x20match','Failed\x20to\x20award\x20item:\x20','Standard','highlight-match-info-container','highlight-video-preview','low-points','role-username','eloHistoryD3','trophy-name','highlight-achievement-player','losses','loserUsername','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','daysSinceMatch','-prev-page','User\x20','rankDistribution','highlight-video-id','createdBy','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','submittedBy','Sidebar\x20navigation\x20initialized\x20with\x20permissions','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20points\x20overview:','creatorImageUrl','Positions\x20updated:\x20Winner\x20','Error\x20in\x20demotion:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','cells','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','players','#28a745','edit-wins','highlight-achievement-type-container'];a0_0x40d6=function(){return _0x3f9995;};return a0_0x40d6();}function openTrophyModal(_0x1ad113=null){const _0x5abc08=a0_0x1948cf,_0x3c7744=document[_0x5abc08(0x152)]('trophy-modal'),_0x2a5f84=document['getElementById']('trophy-modal-title'),_0x40099b=document['getElementById']('trophy-form'),_0x36f8d3=document['getElementById']('trophy-id');_0x40099b['reset'](),_0x36f8d3[_0x5abc08(0x1a1)]='';const _0x167b18=document[_0x5abc08(0x152)]('trophy-preview-img');_0x167b18&&(_0x167b18['src']=DEFAULT_TROPHY_IMAGE,_0x167b18['classList']['remove'](_0x5abc08(0x20c))),_0x1ad113?(_0x2a5f84['textContent']=_0x5abc08(0x2fe),_0x36f8d3['value']=_0x1ad113,loadTrophyData(_0x1ad113)):_0x2a5f84[_0x5abc08(0xb2)]='Create\x20New\x20Trophy',_0x3c7744['classList'][_0x5abc08(0x2c9)]('active');}async function loadTrophyData(_0x29acdf){const _0x43ea8b=a0_0x1948cf;try{const _0x3a34c8=doc(db,'trophyDefinitions',_0x29acdf),_0x568f28=await getDoc(_0x3a34c8);if(!_0x568f28['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x2638c9=_0x568f28[_0x43ea8b(0x126)]();document['getElementById']('trophy-name')[_0x43ea8b(0x1a1)]=_0x2638c9['name']||'',document['getElementById'](_0x43ea8b(0x26b))['value']=_0x2638c9[_0x43ea8b(0x11e)]||'',document[_0x43ea8b(0x152)]('trophy-image-url')['value']=_0x2638c9['image']||'',document['getElementById']('trophy-rarity')['value']=_0x2638c9[_0x43ea8b(0x29b)]||_0x43ea8b(0x2f6),updateTrophyImagePreview();}catch(_0x3cd908){console['error']('Error\x20loading\x20trophy\x20data:',_0x3cd908),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x1d81f9=a0_0x1948cf;try{const _0xdca371=document['getElementById']('trophy-id')['value'],_0x261001=document['getElementById'](_0x1d81f9(0x1e8))[_0x1d81f9(0x1a1)][_0x1d81f9(0x25d)](),_0x41975c=document['getElementById'](_0x1d81f9(0x26b))[_0x1d81f9(0x1a1)]['trim'](),_0x1cdfc2=document['getElementById']('trophy-image-url')['value'][_0x1d81f9(0x25d)](),_0x235a1a=document['getElementById'](_0x1d81f9(0x24b))['value'];if(!_0x261001||!_0x41975c||!_0x1cdfc2){showNotification(_0x1d81f9(0x179),'error');return;}const _0x1f6fbe=auth[_0x1d81f9(0x13b)];if(!_0x1f6fbe){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x28fe62={'name':_0x261001,'description':_0x41975c,'image':_0x1cdfc2,'rarity':_0x235a1a,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x1f6fbe[_0x1d81f9(0x140)]};!_0xdca371?(_0x28fe62['createdAt']=serverTimestamp(),_0x28fe62[_0x1d81f9(0x1f3)]=_0x1f6fbe['email'],await addDoc(collection(db,_0x1d81f9(0x247)),_0x28fe62),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,_0x1d81f9(0x247),_0xdca371),_0x28fe62),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x3832bc){console['error']('Error\x20saving\x20trophy:',_0x3832bc),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x3832bc['message'],'error');}}function closeTrophyModal(){const _0x1bf0ff=a0_0x1948cf,_0xdf5adb=document[_0x1bf0ff(0x152)]('trophy-modal');_0xdf5adb&&_0xdf5adb[_0x1bf0ff(0x15e)][_0x1bf0ff(0x258)]('active');}async function confirmDeleteTrophy(_0x26b53f){const _0x1a79b4=a0_0x1948cf;if(!_0x26b53f){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x3539c0=auth['currentUser'];if(!_0x3539c0){showNotification(_0x1a79b4(0xef),_0x1a79b4(0x20c));return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x26b53f),await deleteDoc(doc(db,_0x1a79b4(0x247),_0x26b53f)),showNotification(_0x1a79b4(0x1b2),'success'),loadTrophyDefinitions();}catch(_0x2eb4ab){console['error'](_0x1a79b4(0x2bf),_0x2eb4ab),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x2eb4ab['message'],'error');}}async function openAssignTrophyModal(_0x2878eb){const _0x369757=a0_0x1948cf;try{const _0x108c4a=doc(db,'trophyDefinitions',_0x2878eb),_0x7328e0=await getDoc(_0x108c4a);if(!_0x7328e0[_0x369757(0x2e0)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x356938=_0x7328e0['data']();document['getElementById'](_0x369757(0x2eb))[_0x369757(0x1a1)]=_0x2878eb,document['getElementById']('assign-trophy-name')['value']=_0x356938['name'],document[_0x369757(0x152)](_0x369757(0xc2))['src']=_0x356938['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x356938['name']||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x356938['description']||'No\x20description';const _0x5b5593=document['getElementById'](_0x369757(0xe2));_0x5b5593[_0x369757(0xb2)]=_0x356938['rarity']||'common',_0x5b5593['className']='trophy-rarity\x20'+(_0x356938['rarity']||'common');const _0x2be56e=document['getElementById']('assign-trophy-modal');_0x2be56e[_0x369757(0x15e)][_0x369757(0x2c9)]('active');}catch(_0x4a2d1e){console['error'](_0x369757(0x1c6),_0x4a2d1e),showNotification(_0x369757(0x2c6),_0x369757(0x20c));}}function closeAssignTrophyModal(){const _0x5bb747=a0_0x1948cf,_0x3e2e8d=document['getElementById']('assign-trophy-modal');_0x3e2e8d&&_0x3e2e8d[_0x5bb747(0x15e)]['remove'](_0x5bb747(0x133));}async function assignTrophyToPlayer(){const _0xa000f7=a0_0x1948cf;try{const _0x258d6c=document['getElementById']('assign-trophy-id')['value'],_0x343258=document[_0xa000f7(0x152)]('assign-trophy-name')[_0xa000f7(0x1a1)],_0x524146=document['getElementById'](_0xa000f7(0xc7))[_0xa000f7(0x1a1)][_0xa000f7(0x25d)](),_0x47880f=document['querySelector'](_0xa000f7(0x237))['value'];if(!_0x258d6c||!_0x524146){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x3f0dd2=auth['currentUser'];if(!_0x3f0dd2){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x3f754e=null,_0x76d10=null,_0x5d7103=null;if(_0x47880f===_0xa000f7(0x1bb)){const _0x404139=collection(db,'nonParticipants'),_0x5678d8=query(_0x404139,where('username','==',_0x524146)),_0x549728=await getDocs(_0x5678d8);!_0x549728['empty']&&(_0x3f754e=_0x549728[_0xa000f7(0xd2)][0x0],_0x76d10=_0x3f754e['id'],_0x5d7103=_0x3f754e['data']());}else{const _0x520407=_0x47880f==='D1'?'players':_0x47880f==='D2'?'playersD2':'playersD3',_0x40737c=collection(db,_0x520407),_0xe83d65=query(_0x40737c,where('username','==',_0x524146)),_0x42e494=await getDocs(_0xe83d65);!_0x42e494['empty']&&(_0x3f754e=_0x42e494['docs'][0x0],_0x76d10=_0x3f754e['id'],_0x5d7103=_0x3f754e['data']());}if(!_0x3f754e){showNotification(_0xa000f7(0x11b)+_0x524146+_0xa000f7(0x2da)+(_0x47880f==='non-participant'?_0xa000f7(0xfe):_0x47880f+'\x20ladder'),_0xa000f7(0x20c));return;}const _0x4cdef4=collection(db,_0xa000f7(0x2a1)),_0x39c391=query(_0x4cdef4,where('userId','==',_0x76d10),where('trophyId','==',_0x258d6c)),_0x32744a=await getDocs(_0x39c391);if(!_0x32744a[_0xa000f7(0x18e)]){showNotification('Player\x20\x22'+_0x524146+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x76d10,'playerUsername':_0x524146,'trophyId':_0x258d6c,'awardedAt':serverTimestamp(),'awardedBy':_0x3f0dd2[_0xa000f7(0x140)],'ladder':_0x47880f}),showNotification('Trophy\x20\x22'+_0x343258+'\x22\x20awarded\x20to\x20'+_0x524146,'success'),closeAssignTrophyModal();}catch(_0x1b3410){console['error'](_0xa000f7(0x2cd),_0x1b3410),showNotification(_0xa000f7(0x2e7)+_0x1b3410['message'],_0xa000f7(0x20c));}}function setupInactivePlayersSection(){const _0x27c869=a0_0x1948cf,_0x354afb=document['getElementById']('inactive-days-filter');_0x354afb&&_0x354afb['addEventListener']('change',function(){const _0x40f0f7=a0_0x26f0,_0x313000=document[_0x40f0f7(0x152)]('load-inactive-players-data');if(_0x313000)_0x313000['click']();});const _0x325e87=document['querySelector'](_0x27c869(0x19f)),_0x48b0a0=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x325e87&&_0x48b0a0&&(_0x325e87['addEventListener'](_0x27c869(0x12c),function(){const _0x4f2e29=_0x27c869;if(this['checked']){currentLadder='D1';if(document[_0x4f2e29(0x152)]('inactive-players')['style']['display']!=='none'){const _0x3c47bd=document[_0x4f2e29(0x152)]('load-inactive-players-data');if(_0x3c47bd)_0x3c47bd[_0x4f2e29(0x10c)]();}}}),_0x48b0a0[_0x27c869(0x283)]('change',function(){const _0xf0660c=_0x27c869;if(this['checked']){currentLadder='D2';if(document['getElementById'](_0xf0660c(0x16f))['style']['display']!=='none'){const _0x2b4936=document[_0xf0660c(0x152)]('load-inactive-players-data');if(_0x2b4936)_0x2b4936['click']();}}}));const _0x14b4f2=document['getElementById']('inactive-players-search');_0x14b4f2&&_0x14b4f2[_0x27c869(0x283)]('input',debounce(function(){const _0x63bee=_0x14b4f2['value']['toLowerCase'](),_0x10bdcf=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x10bdcf['forEach'](_0x1a266f=>{const _0x5bee37=a0_0x26f0;if(_0x1a266f[_0x5bee37(0x236)]('.loading-cell')||_0x1a266f[_0x5bee37(0x236)]('.empty-state')||_0x1a266f['querySelector']('.error-state'))return;const _0x41ba8b=_0x1a266f['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x526514=_0x1a266f[_0x5bee37(0x1fd)][0x5]?.[_0x5bee37(0xb2)][_0x5bee37(0x106)]()||'';_0x41ba8b['includes'](_0x63bee)||_0x526514['includes'](_0x63bee)?_0x1a266f['style']['display']='':_0x1a266f[_0x5bee37(0x230)]['display']='none';});},0x12c)),document['addEventListener'](_0x27c869(0x10c),function(_0x4678ca){const _0x55f27a=_0x27c869;if(_0x4678ca['target'][_0x55f27a(0x2ea)](_0x55f27a(0x155))){const _0xd380ed=_0x4678ca[_0x55f27a(0x23c)]['closest']('.view-player-btn'),_0x568ac6=_0xd380ed[_0x55f27a(0x239)][_0x55f27a(0x28c)];_0x568ac6&&alert('View\x20player\x20details\x20for\x20'+_0x568ac6+'\x20-\x20Feature\x20coming\x20soon');}}),console[_0x27c869(0x241)]('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x1ab768=a0_0x1948cf,_0x5e150a=document['getElementById'](_0x1ab768(0xb4));if(!_0x5e150a)return;_0x5e150a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x1018db=document['getElementById'](_0x1ab768(0x2ed)),_0x181e20=_0x1018db?parseInt(_0x1018db[_0x1ab768(0x1a1)])||0x0:0x0,_0x27e6ec=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x50e0ca=await getDocs(_0x27e6ec);if(_0x50e0ca['empty']){_0x5e150a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x47b194=[];_0x50e0ca['forEach'](_0x397e0e=>{const _0x200274=_0x1ab768,_0x12fb08=_0x397e0e[_0x200274(0x126)]();_0x47b194[_0x200274(0x25b)]({..._0x12fb08,'id':_0x397e0e['id'],'username':_0x12fb08['username']||'Unknown\x20Player'});}),console[_0x1ab768(0x241)]('Found\x20'+_0x47b194[_0x1ab768(0x291)]+'\x20total\x20players\x20in\x20the\x20'+currentLadder+_0x1ab768(0x161));const _0x243c3c=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x46c607=_0x47b194['map'](async _0x429273=>{const _0x18b055=_0x1ab768;try{const _0x297102=collection(db,_0x243c3c),_0x4d4f12=query(_0x297102,or(where(_0x18b055(0x2ce),'==',_0x429273['username']),where('loserUsername','==',_0x429273['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0x2a678f=await getDocs(_0x4d4f12);if(!_0x2a678f['empty']){const _0x155bc4=_0x2a678f[_0x18b055(0xd2)][0x0]['data'](),_0x2705ab=_0x155bc4['approvedAt']?new Date(_0x155bc4['approvedAt'][_0x18b055(0x169)]*0x3e8):null,_0x488c4d=new Date(),_0x1dcf53=_0x2705ab?Math['floor']((_0x488c4d-_0x2705ab)/(0x3e8*0x3c*0x3c*0x18)):null,_0x330909=_0x155bc4['winnerUsername']===_0x429273['username']?_0x155bc4['loserUsername']:_0x155bc4[_0x18b055(0x2ce)],_0x2a0817=_0x155bc4['winnerUsername']===_0x429273[_0x18b055(0x28c)]?_0x18b055(0x30b):'Lost';return{..._0x429273,'lastMatch':{'date':_0x2705ab?_0x2705ab['toLocaleDateString']():'N/A','opponent':_0x330909||'Unknown','result':_0x2a0817,'timestamp':_0x2705ab||new Date(0x0),'daysSinceMatch':_0x1dcf53||Number['MAX_SAFE_INTEGER']}};}else return{..._0x429273,'lastMatch':{'date':'Never\x20played','opponent':_0x18b055(0x1bc),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x111459){return console[_0x18b055(0x20c)]('Error\x20fetching\x20matches\x20for\x20'+_0x429273['username']+':',_0x111459),{..._0x429273,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x23a069=await Promise['all'](_0x46c607);_0x23a069[_0x1ab768(0x2f9)]((_0xbb4535,_0x36a5de)=>_0x36a5de[_0x1ab768(0x168)]['daysSinceMatch']-_0xbb4535['lastMatch']['daysSinceMatch']);_0x181e20>0x0&&(_0x23a069=_0x23a069[_0x1ab768(0x1b6)](_0x192740=>_0x192740['lastMatch'][_0x1ab768(0x1ee)]>=_0x181e20));_0x5e150a['innerHTML']='';if(_0x23a069[_0x1ab768(0x291)]===0x0){_0x5e150a[_0x1ab768(0x287)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x23a069[_0x1ab768(0x157)](_0x213f4f=>{const _0x59bf85=_0x1ab768,_0x402e8f=document[_0x59bf85(0x2ef)]('tr'),_0x5e8961=_0x213f4f['lastMatch']['daysSinceMatch']>0x1e?_0x59bf85(0x130):_0x213f4f['lastMatch'][_0x59bf85(0x1ee)]>0xe?_0x59bf85(0x10b):'';_0x402e8f['className']=_0x5e8961,_0x402e8f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x213f4f['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x213f4f['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x213f4f[_0x59bf85(0x168)][_0x59bf85(0x2fb)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x213f4f['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x213f4f['lastMatch'][_0x59bf85(0x1ee)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x213f4f[_0x59bf85(0x168)]['date']==='Never\x20played'?'No\x20matches\x20found':_0x213f4f['lastMatch']['result']+'\x20vs\x20'+_0x213f4f['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x213f4f['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5e150a['appendChild'](_0x402e8f);}),console['log'](_0x1ab768(0x132)+_0x23a069['length']+'\x20inactive\x20players');}catch(_0x55c1c0){console['error'](_0x1ab768(0xec),_0x55c1c0),_0x5e150a[_0x1ab768(0x287)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x55c1c0['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x1abeec=a0_0x1948cf;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x1bdcae=document['getElementById'](_0x1abeec(0x248));_0x1bdcae&&_0x1bdcae[_0x1abeec(0x283)]('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x41f9e9=document[_0x1abeec(0x152)](_0x1abeec(0x2b1));_0x41f9e9&&_0x41f9e9['addEventListener']('click',function(){const _0x2aa274=_0x1abeec;console[_0x2aa274(0x241)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x3bbd52=document[_0x1abeec(0x152)](_0x1abeec(0x2e3));_0x3bbd52&&_0x3bbd52['addEventListener']('click',function(){const _0x37a9e8=_0x1abeec;console['log'](_0x37a9e8(0x220)),openHighlightModal('achievement');});}function openHighlightModal(_0x1bc2b0='match'){const _0xd03edb=a0_0x1948cf;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x1bc2b0);const _0x16a6bd=document[_0xd03edb(0x152)]('highlight-modal'),_0x1487b2=document[_0xd03edb(0x152)]('highlight-form'),_0x244302=document[_0xd03edb(0x152)]('highlight-modal-title'),_0x5918c1=document['getElementById']('highlight-id');if(!_0x16a6bd||!_0x1487b2||!_0x244302){console['error'](_0xd03edb(0x24f));return;}_0x1487b2[_0xd03edb(0x142)](),_0x5918c1['value']='';const _0x50261a=[_0xd03edb(0x250),'creator',_0xd03edb(0x264)],_0x294ff1=!_0x50261a['includes'](_0x1bc2b0);if(_0x294ff1){const _0x25d9c6=_0x1bc2b0;_0x5918c1['value']=_0x25d9c6,_0x244302[_0xd03edb(0xb2)]='Loading...',loadHighlightDataAdmin(_0x25d9c6);}else{const _0x1afc26=_0x1bc2b0;document['getElementById']('highlight-type')[_0xd03edb(0x1a1)]=_0x1afc26,_0x244302['textContent']=_0xd03edb(0x292)+getHighlightTypeName(_0x1afc26),toggleHighlightFields(_0x1afc26);const _0x321666=auth[_0xd03edb(0x13b)];_0x321666&&document[_0xd03edb(0x152)](_0xd03edb(0x1aa))&&(document['getElementById'](_0xd03edb(0x1aa))['value']=_0x321666['displayName']||_0x321666['email']);}_0x16a6bd['classList'][_0xd03edb(0x2c9)](_0xd03edb(0x133));}function toggleHighlightFields(_0x30d6a5){const _0x11c72d=a0_0x1948cf;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x30d6a5);const _0x30f0c9=document['getElementById']('highlight-form');if(!_0x30f0c9)return;const _0x1a540e=_0x30f0c9['querySelectorAll']('.form-group,\x20.form-row');_0x1a540e['forEach'](_0x388376=>_0x388376['style']['display']=_0x11c72d(0xe5));const _0xa03219=document['getElementById']('highlight-video-preview-container');if(_0xa03219)_0xa03219[_0x11c72d(0x230)][_0x11c72d(0x12a)]='none';const _0x4372e0=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x4372e0[_0x11c72d(0x157)](_0x5478af=>{const _0x5643d4=_0x11c72d,_0x1a911b=document['getElementById'](_0x5478af);if(_0x1a911b)_0x1a911b[_0x5643d4(0x230)]['display']=_0x5643d4(0x136);});if(_0x30d6a5==='match'){const _0x1e065f=['highlight-video-container',_0x11c72d(0x1e3),'highlight-map-container',_0x11c72d(0x240),'highlight-players-container','highlight-match-link-container'];_0x1e065f['forEach'](_0x4183db=>{const _0x102267=_0x11c72d,_0x39969e=document['getElementById'](_0x4183db);_0x39969e&&(_0x4183db==='highlight-players-container'?_0x39969e['style'][_0x102267(0x12a)]='flex':_0x39969e['style']['display']='block');});const _0x423d7f=document['getElementById']('highlight-video-id');if(_0x423d7f){_0x423d7f[_0x11c72d(0xab)]=!![];const _0x13e718=_0x423d7f[_0x11c72d(0xa0)];if(_0x13e718)_0x13e718['innerHTML']='YouTube\x20Video\x20ID*';}if(_0xa03219)_0xa03219[_0x11c72d(0x230)]['display']=_0x11c72d(0x136);updateHighlightVideoPreview();}else{if(_0x30d6a5==='creator'){const _0x30d1a7=[_0x11c72d(0x15d),'highlight-map-creator-container','highlight-map-version-container',_0x11c72d(0x1c8),'highlight-video-container'];_0x30d1a7['forEach'](_0x20d6e8=>{const _0x542585=document['getElementById'](_0x20d6e8);if(_0x542585)_0x542585['style']['display']='block';});const _0x355e85=document['getElementById']('highlight-video-id');if(_0x355e85){_0x355e85['required']=![];const _0x1b325b=_0x355e85['previousElementSibling'];if(_0x1b325b)_0x1b325b[_0x11c72d(0x287)]='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x30d6a5===_0x11c72d(0x264)){const _0xab7dd1=['highlight-achievement-player-container',_0x11c72d(0x202),'highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0xab7dd1['forEach'](_0x1c5447=>{const _0x1dca1a=_0x11c72d,_0x228a77=document['getElementById'](_0x1c5447);if(_0x228a77)_0x228a77['style']['display']=_0x1dca1a(0x136);});const _0x5f0d50=document['getElementById'](_0x11c72d(0x1f2));if(_0x5f0d50){_0x5f0d50['required']=![];const _0x48a89b=_0x5f0d50['previousElementSibling'];if(_0x48a89b)_0x48a89b['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x589b9b){const _0x1e4ede=a0_0x1948cf;try{const _0x3b4809=doc(db,_0x1e4ede(0x10f),_0x589b9b),_0x1d72b2=await getDoc(_0x3b4809);if(!_0x1d72b2['exists']()){showNotification(_0x1e4ede(0x189),'error');return;}const _0x5e54f2=_0x1d72b2[_0x1e4ede(0x126)](),_0x3232ea=_0x5e54f2['type']||'match';document['getElementById']('highlight-modal-title')[_0x1e4ede(0xb2)]='Edit\x20'+getHighlightTypeName(_0x3232ea),document['getElementById']('highlight-type')[_0x1e4ede(0x1a1)]=_0x3232ea,toggleHighlightFields(_0x3232ea),document['getElementById']('highlight-title')['value']=_0x5e54f2['title']||'',document['getElementById']('highlight-description')[_0x1e4ede(0x1a1)]=_0x5e54f2[_0x1e4ede(0x11e)]||'',document[_0x1e4ede(0x152)]('highlight-submitted-by')['value']=_0x5e54f2[_0x1e4ede(0x1f5)]||'';_0x5e54f2['videoId']&&(document[_0x1e4ede(0x152)](_0x1e4ede(0x1f2))['value']=_0x5e54f2[_0x1e4ede(0x282)],updateHighlightVideoPreview());if(_0x3232ea==='match'){document['getElementById'](_0x1e4ede(0x1da))[_0x1e4ede(0x1a1)]=_0x5e54f2['matchInfo']||'',document[_0x1e4ede(0x152)]('highlight-map')['value']=_0x5e54f2[_0x1e4ede(0xb5)]||'';if(_0x5e54f2['matchDate']){const _0x3331e4=new Date(_0x5e54f2['matchDate'][_0x1e4ede(0x169)]*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x3331e4['toISOString']()['split']('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x5e54f2['winnerName']||'',document[_0x1e4ede(0x152)]('highlight-winner-score')[_0x1e4ede(0x1a1)]=_0x5e54f2['winnerScore']||'',document['getElementById']('highlight-loser-name')['value']=_0x5e54f2['loserName']||'',document['getElementById']('highlight-loser-score')[_0x1e4ede(0x1a1)]=_0x5e54f2[_0x1e4ede(0xe7)]||'',document['getElementById']('highlight-match-link')['value']=_0x5e54f2['matchLink']||'';}else{if(_0x3232ea==='creator')document['getElementById']('highlight-map')['value']=_0x5e54f2[_0x1e4ede(0xb5)]||'',document['getElementById']('highlight-map-creator')['value']=_0x5e54f2['mapCreator']||'',document[_0x1e4ede(0x152)]('highlight-map-version')[_0x1e4ede(0x1a1)]=_0x5e54f2['mapVersion']||'',document['getElementById']('highlight-creator-image')[_0x1e4ede(0x1a1)]=_0x5e54f2['creatorImageUrl']||'';else _0x3232ea===_0x1e4ede(0x264)&&(document['getElementById'](_0x1e4ede(0x1e9))['value']=_0x5e54f2['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x5e54f2['achievementType']||'',document[_0x1e4ede(0x152)](_0x1e4ede(0x225))[_0x1e4ede(0x1a1)]=_0x5e54f2['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x5e54f2['playerProfileUrl']||'',document[_0x1e4ede(0x152)]('highlight-achievement-image')[_0x1e4ede(0x1a1)]=_0x5e54f2[_0x1e4ede(0xc6)]||'');}}catch(_0x2e85cf){console['error'](_0x1e4ede(0x2d2),_0x2e85cf),showNotification('Error\x20loading\x20highlight:\x20'+_0x2e85cf[_0x1e4ede(0x15a)],_0x1e4ede(0x20c));}}async function saveHighlight(){const _0xa29728=a0_0x1948cf;try{const _0x529eb5=document['getElementById']('highlight-id')?.['value']||'',_0x112bea=document['getElementById']('highlight-type')?.['value']||'match',_0x4b6db3={'title':document['getElementById']('highlight-title')?.['value']?.['trim']()||'','description':document['getElementById']('highlight-description')?.[_0xa29728(0x1a1)]?.[_0xa29728(0x25d)]()||'','submittedBy':document['getElementById'](_0xa29728(0x1aa))?.['value']?.[_0xa29728(0x25d)]()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x112bea};if(!_0x4b6db3[_0xa29728(0x2c7)]){showNotification('Title\x20is\x20required','error');return;}if(_0x112bea===_0xa29728(0x250)){_0x4b6db3['matchInfo']=document[_0xa29728(0x152)](_0xa29728(0x1da))?.[_0xa29728(0x1a1)]?.[_0xa29728(0x25d)]()||'',_0x4b6db3['map']=document['getElementById'](_0xa29728(0x127))?.['value']?.['trim']()||'';const _0x4c841f=document[_0xa29728(0x152)]('highlight-match-date'),_0x17b749=_0x4c841f?.['value']||'';_0x4b6db3['matchDate']=_0x17b749?Timestamp['fromDate'](new Date(_0x17b749)):null,_0x4b6db3['winnerName']=document['getElementById']('highlight-winner-name')?.['value']?.[_0xa29728(0x25d)]()||'',_0x4b6db3['winnerScore']=document[_0xa29728(0x152)]('highlight-winner-score')?.[_0xa29728(0x1a1)]?.[_0xa29728(0x25d)]()||'',_0x4b6db3['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x4b6db3['loserScore']=document['getElementById'](_0xa29728(0x18f))?.['value']?.['trim']()||'',_0x4b6db3[_0xa29728(0x18a)]=document['getElementById']('highlight-match-link')?.[_0xa29728(0x1a1)]?.[_0xa29728(0x25d)]()||'';if(!_0x4b6db3['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x112bea==='creator'){_0x4b6db3['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x4b6db3[_0xa29728(0x217)]=document[_0xa29728(0x152)]('highlight-map-creator')?.['value']?.[_0xa29728(0x25d)]()||'',_0x4b6db3['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x4b6db3['creatorImageUrl']=document[_0xa29728(0x152)]('highlight-creator-image')?.['value']?.[_0xa29728(0x25d)]()||'';if(!_0x4b6db3['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x112bea==='achievement'){_0x4b6db3['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.[_0xa29728(0x1a1)]?.[_0xa29728(0x25d)]()||'',_0x4b6db3['achievementType']=document['getElementById']('highlight-achievement-type')?.['value']?.['trim']()||'',_0x4b6db3[_0xa29728(0x300)]=document['getElementById']('highlight-achievement-details')?.[_0xa29728(0x1a1)]?.[_0xa29728(0x25d)]()||'',_0x4b6db3['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.['trim']()||'',_0x4b6db3['achievementImageUrl']=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x4b6db3['achievementPlayer']){showNotification(_0xa29728(0x20d),_0xa29728(0x20c));return;}}}}_0x529eb5?(_0x4b6db3['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x529eb5),_0x4b6db3),showNotification(_0xa29728(0x178),_0xa29728(0x2d9))):(_0x4b6db3[_0xa29728(0x180)]=serverTimestamp(),await addDoc(collection(db,_0xa29728(0x10f)),_0x4b6db3),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x45e910){console['error']('Error\x20saving\x20highlight:',_0x45e910),showNotification(_0xa29728(0xdf)+_0x45e910['message'],'error');}}function closeHighlightModal(){const _0x3eee78=a0_0x1948cf,_0x257ea7=document['getElementById']('highlight-modal');if(_0x257ea7)_0x257ea7['classList']['remove'](_0x3eee78(0x133));}function getHighlightTypeName(_0x457e81){const _0xb7dc8b=a0_0x1948cf;switch(_0x457e81){case _0xb7dc8b(0x250):return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x248248=a0_0x1948cf,_0x1c20ee=document['getElementById']('highlight-video-id'),_0x536310=document['getElementById']('highlight-video-preview-container'),_0x1d15b9=document['getElementById'](_0x248248(0x1e4));if(!_0x1c20ee||!_0x1d15b9||!_0x536310)return;const _0x2bc364=_0x1c20ee[_0x248248(0x1a1)]['trim']();_0x2bc364&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x2bc364)?(_0x1d15b9['src']='https://www.youtube.com/embed/'+_0x2bc364,_0x536310['style'][_0x248248(0x12a)]='block'):(_0x1d15b9['src']='',_0x536310['style']['display']='none');}async function loadHighlightsAdmin(){const _0x50f05b=a0_0x1948cf,_0x4b91d8=document[_0x50f05b(0x152)]('highlights-table-body');if(!_0x4b91d8)return;_0x4b91d8['innerHTML']=_0x50f05b(0x14d);try{const _0xb3b8ce=query(collection(db,_0x50f05b(0x10f)),orderBy('createdAt',_0x50f05b(0x2d6))),_0x40b12f=await getDocs(_0xb3b8ce);if(_0x40b12f['empty']){_0x4b91d8['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x4b91d8[_0x50f05b(0x287)]='',_0x40b12f['forEach'](_0x2a4261=>{const _0x3f56ab=_0x50f05b,_0x6acc83=_0x2a4261['data'](),_0x2aa38f=document['createElement']('tr'),_0x166013=_0x6acc83['createdAt']?new Date(_0x6acc83['createdAt'][_0x3f56ab(0x169)]*0x3e8)['toLocaleDateString']():_0x3f56ab(0x1bc);let _0x1becd9=_0x3f56ab(0x2a5),_0x562510='';switch(_0x6acc83[_0x3f56ab(0x270)]){case _0x3f56ab(0x250):_0x1becd9='Match',_0x562510='match-type';break;case'creator':_0x1becd9='Creator',_0x562510='creator-type';break;case _0x3f56ab(0x264):_0x1becd9=_0x3f56ab(0x108),_0x562510=_0x3f56ab(0x196);break;}_0x2aa38f[_0x3f56ab(0x287)]=_0x3f56ab(0x15f)+(_0x6acc83['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x562510+'\x22>'+_0x1becd9+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x166013+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x6acc83[_0x3f56ab(0x1f5)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x6acc83['videoId']?_0x3f56ab(0x17b):_0x3f56ab(0xff))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x2a4261['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x2a4261['id']+_0x3f56ab(0xf8),_0x4b91d8['appendChild'](_0x2aa38f);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x3b24f9=>{_0x3b24f9['addEventListener']('click',_0x50bd70=>{const _0x96418c=a0_0x26f0;openHighlightModal(_0x50bd70[_0x96418c(0x2c3)]['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x35cfff=>{_0x35cfff['addEventListener']('click',_0xb35de9=>{confirmDeleteHighlight(_0xb35de9['currentTarget']['dataset']['id']);});});}catch(_0x330e5b){console['error']('Error\x20loading\x20highlights:',_0x330e5b),_0x4b91d8[_0x50f05b(0x287)]=_0x50f05b(0x2d0)+_0x330e5b['message']+_0x50f05b(0x1ad);}}async function confirmDeleteHighlight(_0x260155){const _0x4c7666=a0_0x1948cf;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x4c7666(0x10f),_0x260155)),showNotification('Highlight\x20deleted\x20successfully',_0x4c7666(0x2d9)),loadHighlightsAdmin();}catch(_0x380b62){console['error']('Error\x20deleting\x20highlight:',_0x380b62),showNotification('Error\x20deleting\x20highlight:\x20'+_0x380b62['message'],'error');}}function setupCreateTestMatchModal(){const _0x527aca=a0_0x1948cf;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x19a881=document['getElementById']('create-test-match-modal'),_0x2fdbfc=document['getElementById']('create-test-match-form');if(!_0x19a881){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x2fdbfc){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x4301aa=_0x19a881[_0x527aca(0xd0)](!![]);_0x19a881['parentNode'][_0x527aca(0x2ac)](_0x4301aa,_0x19a881);const _0x538caf=_0x4301aa[_0x527aca(0x236)]('#create-test-match-form');_0x4301aa['addEventListener']('click',function(_0x10c512){const _0x18c402=_0x527aca;_0x10c512[_0x18c402(0x23c)]===_0x4301aa&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x521d88=_0x4301aa['querySelector'](_0x527aca(0x11a));_0x521d88&&_0x521d88['addEventListener']('click',function(_0x497add){const _0x5d3c39=_0x527aca;_0x497add[_0x5d3c39(0x1b0)](),_0x497add['stopPropagation'](),console['log'](_0x5d3c39(0x277)),closeCreateTestMatchModal();});const _0x17bf48=_0x4301aa[_0x527aca(0x236)](_0x527aca(0x313));_0x17bf48&&_0x17bf48['addEventListener']('click',function(_0x2f177a){const _0x2ba10f=_0x527aca;_0x2f177a[_0x2ba10f(0x1b0)](),_0x2f177a['stopPropagation'](),console['log'](_0x2ba10f(0x1bd)),closeCreateTestMatchModal();});if(_0x538caf){_0x538caf['addEventListener']('submit',function(_0x26353a){const _0x1e0757=_0x527aca;_0x26353a['preventDefault'](),_0x26353a[_0x1e0757(0x25a)](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x358a61=_0x538caf[_0x527aca(0x236)](_0x527aca(0x207));_0x358a61&&_0x358a61['addEventListener']('click',function(_0x298c26){const _0x34720a=_0x527aca;_0x298c26[_0x34720a(0x1b0)](),_0x298c26['stopPropagation'](),console[_0x34720a(0x241)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x527aca(0x241)](_0x527aca(0x124));}function setupManageHighlightsSection(){const _0x1254ab=a0_0x1948cf;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x26126b=document['getElementById']('highlight-form');_0x26126b&&_0x26126b['addEventListener'](_0x1254ab(0x211),_0xf960a6=>{const _0x37225d=_0x1254ab;_0xf960a6[_0x37225d(0x1b0)](),saveHighlight();});const _0x467156=document['getElementById'](_0x1254ab(0x12b));_0x467156&&_0x467156[_0x1254ab(0x283)](_0x1254ab(0x10c),closeHighlightModal);const _0xdfad5f=document[_0x1254ab(0x236)]('#highlight-modal\x20.close-btn');_0xdfad5f&&_0xdfad5f[_0x1254ab(0x283)]('click',closeHighlightModal);const _0x804db9=document[_0x1254ab(0x152)](_0x1254ab(0x218));_0x804db9&&_0x804db9[_0x1254ab(0x283)]('click',_0x1a6b8f=>{_0x1a6b8f['target']===_0x804db9&&closeHighlightModal();});const _0x5e777b=document['getElementById']('highlight-video-id');_0x5e777b&&_0x5e777b['addEventListener'](_0x1254ab(0x318),()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0xac60c6=a0_0x1948cf;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x243f9f=document[_0xac60c6(0x152)]('matches-prev-page'),_0x4ac063=document[_0xac60c6(0x152)]('matches-next-page');_0x243f9f&&_0x243f9f['addEventListener']('click',()=>{const _0x1e6f60=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x1e6f60]['page']-0x1);});_0x4ac063&&_0x4ac063['addEventListener']('click',()=>{const _0x183d6d=_0xac60c6,_0x48fd49=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x48fd49][_0x183d6d(0x2b4)]+0x1);});const _0x32cfda=document['getElementById'](_0xac60c6(0x1b7)),_0x1357c2=document['getElementById']('reset-matches-filters');_0x32cfda&&_0x32cfda['addEventListener'](_0xac60c6(0x10c),applyMatchesFilters);_0x1357c2&&_0x1357c2[_0xac60c6(0x283)](_0xac60c6(0x10c),resetMatchesFilters);const _0x4ad204=document['getElementById']('matches-search');_0x4ad204&&_0x4ad204[_0xac60c6(0x283)]('input',debounce(filterMatchesTable,0x12c));const _0x163711=document['getElementById']('resimulate-match-btn');_0x163711&&_0x163711['addEventListener'](_0xac60c6(0x10c),openResimulateModal);const _0x304062=document[_0xac60c6(0x152)]('resimulate-modal');if(_0x304062){const _0x36946c=_0x304062['querySelector']('.close');_0x36946c&&_0x36946c[_0xac60c6(0x283)]('click',closeResimulateModal),_0x304062['addEventListener']('click',_0x3af55e=>{_0x3af55e['target']===_0x304062&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x17e617=a0_0x1948cf;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x1ca8c1=document['getElementById'](_0x17e617(0x296)),_0x3c6e06=document['getElementById'](_0x17e617(0x1a8));if(!_0x1ca8c1){console['error'](_0x17e617(0x228)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found',_0x17e617(0x20c));return;}if(!_0x3c6e06){console['error'](_0x17e617(0x123)),showNotification('Create\x20test\x20match\x20form\x20not\x20found',_0x17e617(0x20c));return;}_0x3c6e06['reset']();const _0x4e87c9=document['querySelectorAll'](_0x17e617(0x2f1));let _0x236c9b=![];_0x4e87c9['forEach'](_0x34d504=>{const _0x386c1b=_0x17e617;console['log'](_0x386c1b(0x263),_0x34d504[_0x386c1b(0x1a1)]),_0x34d504['value']===currentLadder&&(_0x34d504['checked']=!![],_0x236c9b=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x236c9b){console[_0x17e617(0x173)](_0x17e617(0x13c),currentLadder);const _0x23cac0=document[_0x17e617(0x236)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x23cac0&&(_0x23cac0['checked']=!![],console[_0x17e617(0x241)]('Defaulted\x20to\x20D1\x20ladder'));}const _0x16a5df=document['getElementById']('test-match-date');if(_0x16a5df){const _0x4da634=new Date()[_0x17e617(0x2ba)]()['split']('T')[0x0];_0x16a5df['value']=_0x4da634;}_0x1ca8c1['style']['display']='flex',_0x1ca8c1['style']['visibility']=_0x17e617(0xcc),_0x1ca8c1['style'][_0x17e617(0x27b)]='1',_0x1ca8c1[_0x17e617(0x15e)]['add'](_0x17e617(0x133)),console['log'](_0x17e617(0x305));const _0x467412=document[_0x17e617(0x152)]('test-match-winner-username');_0x467412&&setTimeout(()=>{_0x467412['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x47fe7c=a0_0x1948cf;console[_0x47fe7c(0x241)](_0x47fe7c(0x2b8));const _0x2696ab=document[_0x47fe7c(0x152)]('create-test-match-modal');if(!_0x2696ab){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x2696ab['classList']['remove']('active'),_0x2696ab[_0x47fe7c(0x230)][_0x47fe7c(0x27b)]='0',_0x2696ab['style']['visibility']='hidden',setTimeout(()=>{const _0x43c853=_0x47fe7c;!_0x2696ab['classList'][_0x43c853(0x232)]('active')&&(_0x2696ab['style']['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x183d32=a0_0x1948cf;console['log'](_0x183d32(0x154));try{const _0xc70110=auth['currentUser'];if(!_0xc70110){showNotification('You\x20must\x20be\x20logged\x20in',_0x183d32(0x20c));return;}const _0x1c388c='D1',_0x1b7b38='approvedMatches',_0xecaa84={'winnerUsername':_0x183d32(0x2bb),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x183d32(0x1e0),'winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x183d32(0x1e0),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0xc70110['email'],'createdAt':serverTimestamp(),'createdBy':_0xc70110[_0x183d32(0x140)],'isTestMatch':!![],'ladder':_0x1c388c,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0xc70110['email']};console['log'](_0x183d32(0x163)),await addDoc(collection(db,_0x1b7b38),_0xecaa84),showNotification('Simple\x20test\x20match\x20created\x20successfully',_0x183d32(0x2d9)),closeCreateTestMatchModal();}catch(_0x457cf6){console['error'](_0x183d32(0x114),_0x457cf6),showNotification(_0x183d32(0x1ed)+_0x457cf6['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x334362=a0_0x1948cf;try{console['log'](_0x334362(0x122)),console['log']('Auth:',auth),console[_0x334362(0x241)]('DB:',db),console[_0x334362(0x241)](_0x334362(0x24a),auth['currentUser']);const _0x581e3b=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x581e3b);const _0x744fbb=query(_0x581e3b,where(_0x334362(0x28c),'==','nonexistent'));console['log']('Query\x20created:',_0x744fbb);const _0x3728b3=await getDocs(_0x744fbb);console['log']('Query\x20executed.\x20Empty:',_0x3728b3['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x226328){console['error'](_0x334362(0x1c5),_0x226328);}};function setupCreateTestMatchButton(){const _0x3d2d01=a0_0x1948cf,_0x370cfa=document[_0x3d2d01(0x152)](_0x3d2d01(0x2de));if(!_0x370cfa){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console[_0x3d2d01(0x241)]('Setting\x20up\x20create\x20test\x20match\x20button');const _0x37b70f=_0x370cfa['cloneNode'](!![]);_0x370cfa['parentNode']['replaceChild'](_0x37b70f,_0x370cfa),_0x37b70f[_0x3d2d01(0x283)]('click',function(_0x821b40){const _0x1098fc=_0x3d2d01;_0x821b40[_0x1098fc(0x1b0)](),_0x821b40['stopPropagation'](),console['log'](_0x1098fc(0x1df)),openCreateTestMatchModal();}),console[_0x3d2d01(0x241)]('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x48f1fa=0x1){const _0x2d093b=a0_0x1948cf,_0x2ec99f=document['getElementById']('matches-table-body');if(!_0x2ec99f)return;_0x2ec99f[_0x2d093b(0x287)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x1f8150=currentLadder['toLowerCase'](),_0xb582a2=matchesPagination[_0x1f8150],_0x254620=currentLadder==='D1'?_0x2d093b(0x167):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x330745=collection(db,_0x254620);_0x48f1fa<=0x1?(_0xb582a2[_0x2d093b(0x2b4)]=0x1,_0xb582a2['firstVisible']=null,_0xb582a2['lastVisible']=null):_0xb582a2[_0x2d093b(0x2b4)]=_0x48f1fa;const _0x276053=getMatchesFilters();let _0x32d1c0=_0x330745;if(_0x276053['startDate']||_0x276053['endDate']||_0x276053['searchTerm']){let _0x24412b=[];_0x276053[_0x2d093b(0x14b)]&&_0x276053['endDate']?(_0x24412b[_0x2d093b(0x25b)](where(_0x2d093b(0x279),'>=',_0x276053['startDate']),where(_0x2d093b(0x279),'<=',_0x276053['endDate'])),_0x32d1c0=query(_0x330745,..._0x24412b)):_0x32d1c0=query(_0x330745,orderBy(_0x2d093b(0x279),_0x2d093b(0x2d6)));}else _0x32d1c0=query(_0x330745,orderBy(_0x2d093b(0x279),_0x2d093b(0x2d6)));_0x48f1fa>0x1&&_0xb582a2['lastVisible']?_0x32d1c0=query(_0x32d1c0,startAfter(_0xb582a2['lastVisible']),limit(PAGE_SIZE)):_0x32d1c0=query(_0x32d1c0,limit(PAGE_SIZE));const _0x4b283f=await getDocs(_0x32d1c0);!_0x4b283f['empty']&&(_0xb582a2[_0x2d093b(0x21d)]=_0x4b283f['docs'][0x0],_0xb582a2[_0x2d093b(0x1dd)]=_0x4b283f[_0x2d093b(0xd2)][_0x4b283f[_0x2d093b(0xd2)]['length']-0x1]);let _0x4889fd=![];if(!_0x4b283f['empty']){const _0x113abb=query(_0x32d1c0,startAfter(_0xb582a2[_0x2d093b(0x1dd)]),limit(0x1)),_0x459d68=await getDocs(_0x113abb);_0x4889fd=!_0x459d68['empty'];}const _0x1ec5f6=document['getElementById']('matches-prev-page'),_0x4456c0=document[_0x2d093b(0x152)]('matches-next-page'),_0xdd9437=document['getElementById']('matches-page-indicator');if(_0x1ec5f6)_0x1ec5f6['disabled']=_0xb582a2['page']<=0x1;if(_0x4456c0)_0x4456c0[_0x2d093b(0xa4)]=!_0x4889fd;if(_0xdd9437)_0xdd9437['textContent']='Page\x20'+_0xb582a2['page'];if(_0x4b283f['empty']){_0x2ec99f['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x2ec99f['innerHTML']='',_0x4b283f['forEach'](_0x3f20a0=>{const _0x41b223=_0x2d093b,_0x563571=_0x3f20a0['data'](),_0x5ee0df=document['createElement']('tr'),_0x1f09dd=_0x563571['approvedAt']?new Date(_0x563571['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x5ee0df[_0x41b223(0x26a)]('data-id',_0x3f20a0['id']),_0x5ee0df['setAttribute']('data-ladder',currentLadder),_0x5ee0df[_0x41b223(0x15e)]['add']('match-row'),_0x5ee0df[_0x41b223(0x287)]=_0x41b223(0x15f)+_0x1f09dd+_0x41b223(0x278)+(_0x563571[_0x41b223(0x2ce)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x563571['loserUsername']||'Unknown')+_0x41b223(0xdb)+(_0x563571['winnerScore']||0x0)+'\x20-\x20'+(_0x563571[_0x41b223(0xe7)]||0x0)+_0x41b223(0xd5)+(_0x563571[_0x41b223(0x209)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x3f20a0['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x3f20a0['id']+_0x41b223(0x293),_0x2ec99f[_0x41b223(0x1a5)](_0x5ee0df);}),setupMatchesActionButtons(),_0x276053[_0x2d093b(0x22d)]&&filterMatchesTable(),console['log'](_0x2d093b(0x21b)+_0x4b283f[_0x2d093b(0x306)]+'\x20matches\x20for\x20'+currentLadder+_0x2d093b(0x14a)+_0xb582a2['page']);}catch(_0x2f8574){console['error']('Error\x20loading\x20matches:',_0x2f8574),_0x2ec99f[_0x2d093b(0x287)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x2f8574['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x13b4ee,_0x3a92f1){const _0x54e9c1=a0_0x1948cf;try{console[_0x54e9c1(0x241)](_0x54e9c1(0x12f)+_0x13b4ee+_0x54e9c1(0x251)+_0x3a92f1+'\x20ladder');const _0x2c87bc=auth['currentUser'];if(!_0x2c87bc){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x5c4465=_0x3a92f1==='D1'?'approvedMatches':_0x3a92f1==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0x5c4465),showNotification(_0x54e9c1(0x21c),_0x54e9c1(0x273)),await deleteDoc(doc(db,_0x5c4465,_0x13b4ee)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x4d4a2e=_0x3a92f1['toLowerCase']();loadMatchesData(matchesPagination[_0x4d4a2e]['page']);}catch(_0x57b885){console[_0x54e9c1(0x20c)](_0x54e9c1(0x269),_0x57b885),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x57b885[_0x54e9c1(0x15a)],'error');}}function setupMatchesActionButtons(){const _0x5eb454=a0_0x1948cf;console[_0x5eb454(0x241)]('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x10dfe1=>{_0x10dfe1['addEventListener']('click',_0x5428eb=>{const _0x30b929=a0_0x26f0;_0x5428eb[_0x30b929(0x1b0)](),_0x5428eb[_0x30b929(0x25a)]();const _0x565d7c=_0x5428eb['currentTarget'][_0x30b929(0x239)]['id'],_0x5b5c3b=_0x5428eb['currentTarget'][_0x30b929(0x2ea)]('tr'),_0x213e01=_0x5b5c3b['dataset'][_0x30b929(0x1b5)];console['log']('Edit\x20match\x20clicked:',_0x565d7c,_0x213e01),openEditMatchModal(_0x565d7c,_0x213e01);});}),document[_0x5eb454(0x2df)]('.delete-match-btn')['forEach'](_0x59f7a7=>{const _0xef2d4a=_0x5eb454;_0x59f7a7['addEventListener'](_0xef2d4a(0x10c),_0x33c473=>{const _0xfc657d=_0xef2d4a;_0x33c473['preventDefault'](),_0x33c473[_0xfc657d(0x25a)]();const _0x102228=_0x33c473[_0xfc657d(0x2c3)][_0xfc657d(0x239)]['id'],_0x1d64e8=_0x33c473[_0xfc657d(0x2c3)]['closest']('tr'),_0x180773=_0x1d64e8['dataset']['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x102228,_0x180773),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x102228,_0x180773);});}),console[_0x5eb454(0x241)]('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x2b3c5a=a0_0x1948cf,_0x1e413c=document[_0x2b3c5a(0x152)](_0x2b3c5a(0xa7))['value'][_0x2b3c5a(0x106)](),_0x1d9c0c=document['querySelectorAll']('#matches-table-body\x20tr');let _0x5bbc29=0x0;_0x1d9c0c['forEach'](_0x50eeba=>{const _0x556e1a=_0x2b3c5a;if(_0x50eeba['classList']['contains']('loading-cell')||_0x50eeba[_0x556e1a(0x15e)][_0x556e1a(0x232)](_0x556e1a(0x159))||_0x50eeba['classList'][_0x556e1a(0x232)](_0x556e1a(0xd6)))return;const _0x351c7b=_0x50eeba['cells'][0x1]['textContent'][_0x556e1a(0x106)](),_0x2b7f5b=_0x50eeba['cells'][0x2]['textContent']['toLowerCase'](),_0x5f7ef8=_0x50eeba['cells'][0x4]['textContent'][_0x556e1a(0x106)]();_0x351c7b['includes'](_0x1e413c)||_0x2b7f5b['includes'](_0x1e413c)||_0x5f7ef8['includes'](_0x1e413c)?(_0x50eeba['style'][_0x556e1a(0x12a)]='',_0x5bbc29++):_0x50eeba[_0x556e1a(0x230)][_0x556e1a(0x12a)]='none';});if(_0x5bbc29===0x0&&_0x1d9c0c[_0x2b3c5a(0x291)]>0x0){const _0x589f57=document['getElementById']('matches-table-body'),_0x4542ee=_0x589f57['querySelector']('.no-results');if(!_0x4542ee){const _0x423316=document['createElement']('tr');_0x423316['className']='no-results',_0x423316[_0x2b3c5a(0x287)]='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x1e413c+_0x2b3c5a(0x2e1),_0x589f57['appendChild'](_0x423316);}}else{const _0x3da895=document['querySelector']('.no-results');_0x3da895&&_0x3da895[_0x2b3c5a(0x258)]();}}function getMatchesFilters(){const _0xf0b882=a0_0x1948cf,_0x27e2aa=document[_0xf0b882(0x152)]('matches-search')[_0xf0b882(0x1a1)][_0xf0b882(0x106)](),_0x45424e=document['getElementById']('matches-start-date')['value'],_0x463ce1=document['getElementById']('matches-end-date')[_0xf0b882(0x1a1)];let _0x4c1e79=null,_0x1fa1ca=null;return _0x45424e&&(_0x4c1e79=new Date(_0x45424e),_0x4c1e79[_0xf0b882(0x16d)](0x0,0x0,0x0,0x0),_0x4c1e79=Timestamp[_0xf0b882(0x2ca)](_0x4c1e79)),_0x463ce1&&(_0x1fa1ca=new Date(_0x463ce1),_0x1fa1ca['setHours'](0x17,0x3b,0x3b,0x3e7),_0x1fa1ca=Timestamp['fromDate'](_0x1fa1ca)),{'searchTerm':_0x27e2aa,'startDate':_0x4c1e79,'endDate':_0x1fa1ca};}async function applyMatchesFilters(){const _0x1e56a7=currentLadder['toLowerCase']();matchesPagination[_0x1e56a7]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0xac21f=a0_0x1948cf;document[_0xac21f(0x152)](_0xac21f(0x22b))['value']='',document[_0xac21f(0x152)](_0xac21f(0x2ee))['value']='',document[_0xac21f(0x152)](_0xac21f(0xa7))['value']='';const _0x10c2dd=currentLadder['toLowerCase']();matchesPagination[_0x10c2dd]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x2cd70d,_0x5d0d27){const _0x326280=a0_0x1948cf,_0x4b528e=document[_0x326280(0x152)]('edit-match-modal');if(!_0x4b528e)return;try{const _0x18fe27=_0x5d0d27==='D1'?'approvedMatches':_0x5d0d27==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x4a1da8=doc(db,_0x18fe27,_0x2cd70d),_0x2b205e=await getDoc(_0x4a1da8);if(!_0x2b205e['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0xaf01b8=_0x2b205e['data']();document['getElementById']('edit-match-id')['value']=_0x2cd70d,document[_0x326280(0x152)]('edit-match-ladder')['value']=_0x5d0d27,document['getElementById']('edit-match-winner')['value']=_0xaf01b8[_0x326280(0x2ce)]||'',document['getElementById'](_0x326280(0x309))['value']=_0xaf01b8['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0xaf01b8[_0x326280(0x28a)]||0x0,document['getElementById'](_0x326280(0x2c2))['value']=_0xaf01b8['winnerComment']||'',document[_0x326280(0x152)]('edit-match-loser')['value']=_0xaf01b8['loserUsername']||'',document['getElementById'](_0x326280(0xa5))['value']=_0xaf01b8[_0x326280(0xe7)]||0x0,document[_0x326280(0x152)]('edit-match-loser-suicides')[_0x326280(0x1a1)]=_0xaf01b8[_0x326280(0x150)]||0x0,document['getElementById']('edit-match-loser-comment')[_0x326280(0x1a1)]=_0xaf01b8[_0x326280(0xd7)]||'',document['getElementById']('edit-match-map')['value']=_0xaf01b8['mapPlayed']||'',document[_0x326280(0x152)](_0x326280(0x2d5))['value']=_0xaf01b8['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0xaf01b8['loserDemoLink']||_0xaf01b8['demoLink']||'',document['getElementById'](_0x326280(0xba))['textContent']='Edit\x20Match:\x20'+_0xaf01b8[_0x326280(0x2ce)]+'\x20vs\x20'+_0xaf01b8['loserUsername'],_0x4b528e['classList']['add']('active');}catch(_0x48c44e){console[_0x326280(0x20c)](_0x326280(0xaf),_0x48c44e),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x5be944=a0_0x1948cf,_0x2d108e=document['getElementById']('edit-match-modal');_0x2d108e&&_0x2d108e['classList'][_0x5be944(0x258)]('active');}async function saveEditedMatch(){const _0x2f32f3=a0_0x1948cf;try{const _0x1ced14=document['getElementById']('edit-match-id')['value'],_0x2b9dab=document['getElementById'](_0x2f32f3(0x2cf))[_0x2f32f3(0x1a1)];if(!_0x1ced14||!_0x2b9dab){showNotification(_0x2f32f3(0x1a3),'error');return;}const _0x10532b=_0x2b9dab==='D1'?'approvedMatches':_0x2b9dab==='D2'?_0x2f32f3(0x2ff):'approvedMatchesD3',_0x413259=document['getElementById']('edit-match-winner')[_0x2f32f3(0x1a1)]['trim'](),_0x5673dd=parseInt(document['getElementById'](_0x2f32f3(0x309))['value']),_0x423605=parseInt(document['getElementById'](_0x2f32f3(0x223))[_0x2f32f3(0x1a1)]),_0x420a1b=document['getElementById']('edit-match-winner-comment')[_0x2f32f3(0x1a1)]['trim'](),_0x4c6794=document['getElementById']('edit-match-loser')[_0x2f32f3(0x1a1)]['trim'](),_0x1a0d73=parseInt(document[_0x2f32f3(0x152)]('edit-match-loser-score')[_0x2f32f3(0x1a1)]),_0x3b9815=parseInt(document['getElementById']('edit-match-loser-suicides')[_0x2f32f3(0x1a1)]),_0x3f0131=document[_0x2f32f3(0x152)]('edit-match-loser-comment')['value'][_0x2f32f3(0x25d)](),_0x3e3068=document[_0x2f32f3(0x152)]('edit-match-map')['value']['trim'](),_0x5116ef=document[_0x2f32f3(0x152)]('edit-match-winner-demo')['value'][_0x2f32f3(0x25d)](),_0x466ac0=document['getElementById']('edit-match-loser-demo')[_0x2f32f3(0x1a1)]['trim']();if(!_0x413259||!_0x4c6794){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x10532b,_0x1ced14),{'winnerUsername':_0x413259,'winnerScore':_0x5673dd,'winnerSuicides':_0x423605,'winnerComment':_0x420a1b,'loserUsername':_0x4c6794,'loserScore':_0x1a0d73,'loserSuicides':_0x3b9815,'loserComment':_0x3f0131,'mapPlayed':_0x3e3068,'winnerDemoLink':_0x5116ef||null,'loserDemoLink':_0x466ac0||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x2f32f3(0x13b)]['email'],'isEdited':!![]}),showNotification(_0x2f32f3(0x238),'success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x2b9dab['toLowerCase']()]['page']);}catch(_0x561109){console['error']('Error\x20saving\x20match:',_0x561109),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x561109['message'],'error');}}async function openDeleteMatchModal(_0x180693,_0x5db31c){const _0x9db109=a0_0x1948cf;try{const _0x4069bf=_0x5db31c==='D1'?_0x9db109(0x167):_0x5db31c==='D2'?_0x9db109(0x2ff):'approvedMatchesD3',_0x23b5ce=doc(db,_0x4069bf,_0x180693),_0x122255=await getDoc(_0x23b5ce);if(!_0x122255['exists']()){showNotification(_0x9db109(0xc9),_0x9db109(0x20c));return;}const _0x195664=_0x122255[_0x9db109(0x126)](),_0x364d18=document['getElementById']('delete-match-confirm-modal');_0x364d18['dataset']['matchId']=_0x180693,_0x364d18[_0x9db109(0x239)]['ladder']=_0x5db31c;const _0x84d6fb=_0x195664['approvedAt']?new Date(_0x195664[_0x9db109(0x279)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x4d84d0=document[_0x9db109(0x152)]('delete-match-summary');_0x4d84d0['innerHTML']=_0x9db109(0x271)+_0x84d6fb+_0x9db109(0x2d3)+_0x195664['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x195664['loserUsername']+_0x9db109(0xf0)+(_0x195664['winnerScore']||0x0)+_0x9db109(0x2bc)+(_0x195664['loserScore']||0x0)+_0x9db109(0x175)+(_0x195664[_0x9db109(0x209)]||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x5db31c+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x364d18['classList']['add']('active');}catch(_0x15d674){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x15d674),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x22a6fc=a0_0x1948cf,_0x2e47a6=document['getElementById']('delete-match-confirm-modal');_0x2e47a6&&(_0x2e47a6['classList']['remove']('active'),_0x2e47a6[_0x22a6fc(0x2cc)]('data-match-id'),_0x2e47a6[_0x22a6fc(0x2cc)](_0x22a6fc(0x120)));}async function confirmDeleteMatch(){const _0x31d531=a0_0x1948cf,_0x5f129f=document['getElementById']('delete-match-confirm-modal'),_0x4c6a36=_0x5f129f['dataset']['matchId'],_0x426fec=_0x5f129f['dataset'][_0x31d531(0x1b5)];if(!_0x4c6a36||!_0x426fec){showNotification(_0x31d531(0x1a3),'error'),closeDeleteMatchModal();return;}try{const _0x30c0cc=_0x426fec==='D1'?_0x31d531(0x167):_0x426fec==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x30c0cc,_0x4c6a36)),showNotification(_0x31d531(0x2d8),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x426fec['toLowerCase']()][_0x31d531(0x2b4)]);}catch(_0x2a9f83){console['error']('Error\x20deleting\x20match:',_0x2a9f83),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x2a9f83['message'],'error');}}async function saveHighlightChanges(){const _0x5a1de8=a0_0x1948cf,_0x358557=document[_0x5a1de8(0x152)]('edit-highlight-id')['value'],_0x42b9d3=document[_0x5a1de8(0x152)]('edit-highlight-type-select')['value'];let _0x2b1c07={'title':document['getElementById']('edit-highlight-title-input')['value'][_0x5a1de8(0x25d)](),'type':_0x42b9d3,'description':document['getElementById']('edit-highlight-description-input')['value']['trim'](),'videoId':document['getElementById'](_0x5a1de8(0x244))['value']['trim'](),'submittedBy':auth['currentUser']['email']};if(_0x42b9d3==='match'){_0x2b1c07[_0x5a1de8(0x27c)]=document['getElementById'](_0x5a1de8(0xa9))[_0x5a1de8(0x1a1)]['trim'](),_0x2b1c07['map']=document[_0x5a1de8(0x152)](_0x5a1de8(0x2dc))['value']['trim']();const _0x26752c=document['getElementById'](_0x5a1de8(0x2b5))['value'];_0x2b1c07['matchDate']=_0x26752c?Timestamp['fromDate'](new Date(_0x26752c)):null,_0x2b1c07['winnerName']=document['getElementById']('edit-highlight-winnerName-input')['value']['trim'](),_0x2b1c07['winnerScore']=document['getElementById']('edit-highlight-winnerScore-input')['value']['trim'](),_0x2b1c07['loserName']=document['getElementById']('edit-highlight-loserName-input')['value']['trim'](),_0x2b1c07['loserScore']=document[_0x5a1de8(0x152)]('edit-highlight-loserScore-input')[_0x5a1de8(0x1a1)][_0x5a1de8(0x25d)](),_0x2b1c07['matchLink']=document['getElementById'](_0x5a1de8(0x103))['value']['trim'](),_0x2b1c07['mapCreator']=null,_0x2b1c07['mapVersion']=null,_0x2b1c07['creatorImageUrl']=null,_0x2b1c07[_0x5a1de8(0x310)]=null,_0x2b1c07[_0x5a1de8(0x222)]=null,_0x2b1c07['achievementDetails']=null,_0x2b1c07[_0x5a1de8(0x1c9)]=null;}else{if(_0x42b9d3===_0x5a1de8(0x20f))_0x2b1c07['map']=document['getElementById']('edit-highlight-map-input')[_0x5a1de8(0x1a1)][_0x5a1de8(0x25d)](),_0x2b1c07[_0x5a1de8(0x217)]=document[_0x5a1de8(0x152)]('edit-highlight-mapCreator-input')['value']['trim'](),_0x2b1c07['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')[_0x5a1de8(0x1a1)][_0x5a1de8(0x25d)](),_0x2b1c07[_0x5a1de8(0x1f9)]=document['getElementById']('edit-highlight-creatorImageUrl-input')['value']['trim'](),_0x2b1c07[_0x5a1de8(0x27c)]=null,_0x2b1c07[_0x5a1de8(0xfd)]=null,_0x2b1c07[_0x5a1de8(0xc1)]=null,_0x2b1c07[_0x5a1de8(0x1ab)]=null,_0x2b1c07['loserName']=null,_0x2b1c07['loserScore']=null,_0x2b1c07[_0x5a1de8(0x18a)]=null,_0x2b1c07['achievementPlayer']=null,_0x2b1c07[_0x5a1de8(0x222)]=null,_0x2b1c07['achievementDetails']=null,_0x2b1c07[_0x5a1de8(0x1c9)]=null;else _0x42b9d3==='achievement'&&(_0x2b1c07['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x2b1c07['achievementType']=document[_0x5a1de8(0x152)]('edit-highlight-achievementType-input')['value']['trim'](),_0x2b1c07['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')['value'][_0x5a1de8(0x25d)](),_0x2b1c07['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')[_0x5a1de8(0x1a1)][_0x5a1de8(0x25d)](),_0x2b1c07['matchInfo']=null,_0x2b1c07[_0x5a1de8(0xb5)]=null,_0x2b1c07['matchDate']=null,_0x2b1c07[_0x5a1de8(0xc1)]=null,_0x2b1c07['winnerScore']=null,_0x2b1c07['loserName']=null,_0x2b1c07[_0x5a1de8(0xe7)]=null,_0x2b1c07[_0x5a1de8(0x18a)]=null,_0x2b1c07[_0x5a1de8(0x217)]=null,_0x2b1c07[_0x5a1de8(0x2f7)]=null,_0x2b1c07['creatorImageUrl']=null);}try{if(_0x358557){_0x2b1c07['updatedAt']=serverTimestamp();const _0x42af37=doc(db,'highlights',_0x358557);await updateDoc(_0x42af37,_0x2b1c07),showNotification('Highlight\x20updated\x20successfully!',_0x5a1de8(0x2d9));}else _0x2b1c07['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x5a1de8(0x10f)),_0x2b1c07),showNotification(_0x5a1de8(0x219),'success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x503b7d){console['error']('Error\x20saving\x20highlight:',_0x503b7d),showNotification('Error\x20saving\x20highlight:\x20'+_0x503b7d[_0x5a1de8(0x15a)],_0x5a1de8(0x20c));}}async function resimulateMatch(){const _0x59925d=a0_0x1948cf;try{const _0xd35018=document['getElementById']('resimulate-match-id')[_0x59925d(0x1a1)];if(!_0xd35018){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x5ae10f=auth['currentUser'];if(!_0x5ae10f){showNotification(_0x59925d(0x192),'error');return;}const _0x3ae43e=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5bd6ae=doc(db,_0x3ae43e,_0xd35018),_0x2c54bd=await getDoc(_0x5bd6ae);if(!_0x2c54bd['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x49c5b9=_0x2c54bd['data'](),_0x279bd8=_0x49c5b9[_0x59925d(0x279)]?_0x49c5b9['approvedAt']['toDate']()['toLocaleString']():_0x49c5b9['matchDate']?_0x49c5b9['matchDate'][_0x59925d(0x22e)]?_0x49c5b9[_0x59925d(0xfd)]['toDate']()[_0x59925d(0x285)]():new Date(_0x49c5b9['matchDate'])['toLocaleString']():'Unknown',_0x5480ff='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x49c5b9['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x49c5b9['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x49c5b9[_0x59925d(0x1ab)]+'-'+_0x49c5b9['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x49c5b9['mapPlayed']||_0x49c5b9[_0x59925d(0x100)]||_0x59925d(0x2a5))+_0x59925d(0x188)+_0x279bd8+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0xd35018+_0x59925d(0x1fc)+currentLadder+_0x59925d(0x16b);document['getElementById']('match-details-container')['innerHTML']=_0x5480ff,document[_0x59925d(0x152)](_0x59925d(0x134))['style']['display']='block',document['getElementById'](_0x59925d(0x23b))[_0x59925d(0x230)]['display']=_0x59925d(0x136),window['pendingResimulateData']={'matchId':_0xd35018,'matchData':_0x49c5b9,'ladder':currentLadder},showNotification(_0x59925d(0xcf),'info');}catch(_0x4d5ed1){console[_0x59925d(0x20c)](_0x59925d(0xdd),_0x4d5ed1),showNotification(_0x59925d(0x172)+_0x4d5ed1['message'],'error');}}async function confirmResimulateMatch(){const _0x19f1fb=a0_0x1948cf;try{const {matchId:_0x254516,matchData:_0x2f1176,ladder:_0x56c808}=window[_0x19f1fb(0x267)];if(!_0x254516||!_0x2f1176){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x5bc930=_0x56c808==='D1'?'players':_0x56c808==='D2'?'playersD2':'playersD3',_0x3f4240=_0x56c808==='D1'?'eloHistory':_0x56c808==='D2'?_0x19f1fb(0x17f):'eloHistoryD3',[_0x4aea90,_0xd9767f]=await Promise['all']([getDocs(query(collection(db,_0x5bc930),where('username','==',_0x2f1176[_0x19f1fb(0x2ce)]))),getDocs(query(collection(db,_0x5bc930),where('username','==',_0x2f1176['loserUsername'])))]);if(_0x4aea90['empty']||_0xd9767f[_0x19f1fb(0x18e)]){showNotification('Could\x20not\x20find\x20player\x20documents',_0x19f1fb(0x20c));return;}const _0x198d8a=_0x4aea90['docs'][0x0]['id'],_0x54d17d=_0xd9767f['docs'][0x0]['id'],_0x3c4447=_0x4aea90['docs'][0x0]['data'](),_0x31c7c1=_0xd9767f[_0x19f1fb(0xd2)][0x0]['data'](),[_0x29c3d7,_0x193483]=await Promise['all']([getDocs(query(collection(db,_0x3f4240),where(_0x19f1fb(0x28d),'==',_0x198d8a),where('matchId','==',_0x254516))),getDocs(query(collection(db,_0x3f4240),where('playerId','==',_0x54d17d),where('matchId','==',_0x254516)))]),_0xce1c3c=!_0x29c3d7['empty'],_0x21d35a=!_0x193483['empty'],_0x578a1c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0xce1c3c?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x21d35a?_0x19f1fb(0xb7):'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x3c4447['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x31c7c1['eloRating']||_0x19f1fb(0x2a5))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x3c4447['position']||_0x19f1fb(0x2a5))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x31c7c1['position']||_0x19f1fb(0x2a5))+_0x19f1fb(0x204);document['getElementById']('validation-results-container')['innerHTML']=_0x578a1c,document['getElementById']('validation-results-container')['style']['display']='block';if(_0xce1c3c&&_0x21d35a){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...',_0x19f1fb(0x273));const _0x2f8187=_0x2f1176['approvedAt']||_0x2f1176[_0x19f1fb(0xfd)]||serverTimestamp(),[_0x654c0d,_0x53334e]=await Promise['all']([getPlayerEloAtTime(_0x198d8a,_0x2f8187,_0x3f4240),getPlayerEloAtTime(_0x54d17d,_0x2f8187,_0x3f4240)]),{calculateElo:_0x50b613}=await import(_0x19f1fb(0xf5)),{newWinnerRating:_0x3ecc43,newLoserRating:_0x44fecc}=_0x50b613(_0x654c0d,_0x53334e),_0xb3c51d=_0x3c4447[_0x19f1fb(0x17a)]||Number['MAX_SAFE_INTEGER'],_0xc8950a=_0x31c7c1['position']||Number['MAX_SAFE_INTEGER'];let _0x5d1429=_0xb3c51d,_0x4582cc=_0xc8950a;_0xb3c51d>_0xc8950a&&(_0x5d1429=_0xc8950a,_0x4582cc=_0xc8950a+0x1);const _0x55717e=writeBatch(db),_0x913159=doc(db,_0x5bc930,_0x198d8a);_0x55717e['update'](_0x913159,{'eloRating':_0x3ecc43,'position':_0x5d1429,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x19f1fb(0x13b)]['uid']});const _0x66b155=doc(db,_0x5bc930,_0x54d17d);_0x55717e[_0x19f1fb(0x28b)](_0x66b155,{'eloRating':_0x44fecc,'position':_0x4582cc,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0xb3c51d>_0xc8950a){const _0x571ddc=await getDocs(query(collection(db,_0x5bc930),where(_0x19f1fb(0x17a),'>',_0xc8950a),where('position','<',_0xb3c51d)));_0x571ddc[_0x19f1fb(0x157)](_0x20a992=>{const _0x254211=doc(db,_0x5bc930,_0x20a992['id']),_0xa4c98=_0x20a992['data']()['position'];_0x55717e['update'](_0x254211,{'position':_0xa4c98+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0xce1c3c){const _0x126d13=doc(collection(db,_0x3f4240));_0x55717e['set'](_0x126d13,{'playerId':_0x198d8a,'player':_0x2f1176['winnerUsername'],'previousElo':_0x654c0d,'newElo':_0x3ecc43,'eloChange':_0x3ecc43-_0x654c0d,'opponentId':_0x54d17d,'opponent':_0x2f1176[_0x19f1fb(0x1eb)],'matchResult':'win','previousPosition':_0xb3c51d,'newPosition':_0x5d1429,'positionChange':_0x5d1429-_0xb3c51d,'matchId':_0x254516,'timestamp':_0x2f8187,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x56c808,'matchScore':_0x2f1176[_0x19f1fb(0x1ab)]+'-'+_0x2f1176['loserScore'],'mapPlayed':_0x2f1176['mapPlayed']||_0x2f1176['mapName']||_0x19f1fb(0x2a5),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x21d35a){const _0x298ded=doc(collection(db,_0x3f4240));_0x55717e['set'](_0x298ded,{'playerId':_0x54d17d,'player':_0x2f1176['loserUsername'],'previousElo':_0x53334e,'newElo':_0x44fecc,'eloChange':_0x44fecc-_0x53334e,'opponentId':_0x198d8a,'opponent':_0x2f1176['winnerUsername'],'matchResult':'loss','previousPosition':_0xc8950a,'newPosition':_0x4582cc,'positionChange':_0x4582cc-_0xc8950a,'matchId':_0x254516,'timestamp':_0x2f8187,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x19f1fb(0x13b)]['uid'],'gameMode':_0x56c808,'matchScore':_0x2f1176['winnerScore']+'-'+_0x2f1176['loserScore'],'mapPlayed':_0x2f1176[_0x19f1fb(0x209)]||_0x2f1176[_0x19f1fb(0x100)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x188c2d=_0x56c808==='D1'?'approvedMatches':_0x56c808==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2c30ca=doc(db,_0x188c2d,_0x254516);_0x55717e['update'](_0x2c30ca,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x3c4447['eloRating'],'originalLoserElo':_0x31c7c1['eloRating'],'originalWinnerPosition':_0xb3c51d,'originalLoserPosition':_0xc8950a,'resimulatedWinnerElo':_0x3ecc43,'resimulatedLoserElo':_0x44fecc,'resimulatedWinnerPosition':_0x5d1429,'resimulatedLoserPosition':_0x4582cc}),await _0x55717e['commit']();const _0x2d4dc1=(!_0xce1c3c?0x1:0x0)+(!_0x21d35a?0x1:0x0),_0x468e51=_0xb3c51d!==_0x5d1429||_0xc8950a!==_0x4582cc;showNotification('Match\x20resimulated\x20successfully!\x20'+(_0x19f1fb(0x2f8)+_0x2d4dc1+_0x19f1fb(0x1a2))+(_0x19f1fb(0x193)+_0x654c0d+'→'+_0x3ecc43+_0x19f1fb(0xb9)+(_0x3ecc43-_0x654c0d)+'),\x20')+('Loser\x20'+_0x53334e+'→'+_0x44fecc+'\x20('+(_0x44fecc-_0x53334e)+_0x19f1fb(0x197))+(''+(_0x468e51?_0x19f1fb(0x1fa)+_0xb3c51d+'→'+_0x5d1429+',\x20Loser\x20'+_0xc8950a+'→'+_0x4582cc:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector'](_0x19f1fb(0xee))&&loadPlayersData();}catch(_0x3c2b58){console[_0x19f1fb(0x20c)]('Error\x20resimulating\x20match:',_0x3c2b58),showNotification(_0x19f1fb(0x20e)+_0x3c2b58[_0x19f1fb(0x15a)],_0x19f1fb(0x20c));}}async function getPlayerEloAtTime(_0x3cd37d,_0x4359af,_0x8e28ee){const _0x1d9df0=a0_0x1948cf;try{const _0x19f3b2=_0x4359af[_0x1d9df0(0x22e)]?_0x4359af['toDate']():new Date(_0x4359af),_0x5f3caf=query(collection(db,_0x8e28ee),where(_0x1d9df0(0x28d),'==',_0x3cd37d),where(_0x1d9df0(0x104),'<',_0x4359af),orderBy(_0x1d9df0(0x104),'desc'),limit(0x1)),_0x1e367a=await getDocs(_0x5f3caf);if(!_0x1e367a['empty']){const _0x1599fa=_0x1e367a['docs'][0x0][_0x1d9df0(0x126)]();return console['log'](_0x1d9df0(0x249)+_0x3cd37d+_0x1d9df0(0x2aa)+_0x1599fa['newElo']),_0x1599fa[_0x1d9df0(0x1a6)];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x3cd37d+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x2ce332){return console[_0x1d9df0(0x20c)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x3cd37d+':',_0x2ce332),0x4b0;}}function openResimulateModal(){const _0x3b2453=a0_0x1948cf;console['log']('openResimulateModal\x20called!');const _0x572d23=document[_0x3b2453(0x152)]('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x572d23);if(!_0x572d23){console['error'](_0x3b2453(0x276));return;}_0x572d23['style'][_0x3b2453(0x12a)]='block',_0x572d23['style']['visibility']='visible',_0x572d23['style']['opacity']='1',_0x572d23['classList'][_0x3b2453(0x2c9)]('active'),console['log'](_0x3b2453(0x305)),console['log'](_0x3b2453(0x10d),window[_0x3b2453(0x229)](_0x572d23)['display']);const _0x320695=document['getElementById']('match-details-container'),_0x597f55=document['getElementById'](_0x3b2453(0x2ad)),_0x8da9c9=document['getElementById']('confirm-resimulate-btn'),_0x49347c=document['getElementById'](_0x3b2453(0xf4));if(_0x320695)_0x320695[_0x3b2453(0x287)]='';if(_0x597f55)_0x597f55['innerHTML']='';if(_0x8da9c9)_0x8da9c9[_0x3b2453(0x230)]['display']=_0x3b2453(0xe5);if(_0x49347c)_0x49347c['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x43482d=a0_0x1948cf;document[_0x43482d(0x152)](_0x43482d(0x2e5))['style']['display']='none',window[_0x43482d(0x267)]=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x30f337=a0_0x1948cf;console[_0x30f337(0x241)]('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x48a50d){console['error'](_0x30f337(0x1d1),_0x48a50d),showNotification(_0x30f337(0x16e)+_0x48a50d['message'],_0x30f337(0x20c));}}function renderPointsOverview(_0xcdffce){const _0x424365=a0_0x1948cf,_0x6c2f1d=document['getElementById']('points-overview-table-body');if(!_0x6c2f1d)return;if(_0xcdffce['length']===0x0){_0x6c2f1d['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x6c2f1d[_0x424365(0x287)]='',_0xcdffce['forEach'](_0x8189b9=>{const _0x4328ba=_0x424365,_0x1af143=document['createElement']('tr'),_0x3b82db=_0x8189b9['displayName']||_0x8189b9['username']||'Unknown\x20User',_0x12d2b3=_0x8189b9['email']||_0x4328ba(0x1c3),_0x11431f=_0x8189b9[_0x4328ba(0x102)]||0x0,_0x52f87b=_0x8189b9[_0x4328ba(0x2b6)]?new Date(_0x8189b9[_0x4328ba(0x2b6)][_0x4328ba(0x169)]*0x3e8)['toLocaleDateString']():'Never';_0x1af143['innerHTML']=_0x4328ba(0x2e4)+_0x3b82db+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x12d2b3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x11431f>0x3e8?_0x4328ba(0x30f):_0x11431f>0x1f4?'medium-points':_0x4328ba(0x1e5))+_0x4328ba(0x27d)+_0x11431f['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x52f87b+_0x4328ba(0x13a)+_0x8189b9['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x8189b9['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x6c2f1d['appendChild'](_0x1af143);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x52d1d1=a0_0x1948cf;console[_0x52d1d1(0x241)]('Setting\x20up\x20points\x20action\x20buttons...');const _0x3b5c7e=document['querySelectorAll']('.quick-edit-btn');console[_0x52d1d1(0x241)](_0x52d1d1(0x29a)+_0x3b5c7e['length']+'\x20quick\x20edit\x20buttons'),_0x3b5c7e['forEach'](_0x465acf=>{const _0x52fb5d=_0x465acf['cloneNode'](!![]);_0x465acf['parentNode']['replaceChild'](_0x52fb5d,_0x465acf);});const _0x9679ed=document['querySelectorAll']('.view-history-btn');console[_0x52d1d1(0x241)]('Found\x20'+_0x9679ed[_0x52d1d1(0x291)]+'\x20view\x20history\x20buttons'),_0x9679ed[_0x52d1d1(0x157)](_0x416bde=>{const _0xfcd429=_0x52d1d1,_0x2a56f5=_0x416bde[_0xfcd429(0xd0)](!![]);_0x416bde['parentNode']['replaceChild'](_0x2a56f5,_0x416bde);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x270c97=>{const _0x22db16=_0x52d1d1;_0x270c97[_0x22db16(0x283)]('click',function(_0x5ee5c9){const _0x2c5522=_0x22db16;_0x5ee5c9['preventDefault'](),_0x5ee5c9[_0x2c5522(0x25a)]();const _0x18b9d0=this['dataset']['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x18b9d0);if(!_0x18b9d0){console['error'](_0x2c5522(0x19d));return;}this[_0x2c5522(0x230)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x18b9d0);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x45aac8=>{_0x45aac8['addEventListener']('click',function(_0xeb7ae4){const _0x40bea8=a0_0x26f0;_0xeb7ae4[_0x40bea8(0x1b0)](),_0xeb7ae4['stopPropagation']();const _0x35b375=this['dataset']['userId'];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x35b375);if(!_0x35b375){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x40bea8(0x230)]['opacity']=_0x40bea8(0x254),setTimeout(()=>{const _0x351d04=_0x40bea8;this['style'][_0x351d04(0x27b)]='1';},0xc8),loadUserPointsHistory(_0x35b375);});}),console['log'](_0x52d1d1(0x2b3));}async function openQuickEditModal(_0x17d56b){const _0xaca814=a0_0x1948cf;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x17d56b);const _0x5002f8=document[_0xaca814(0x152)]('quick-edit-points-modal');if(!_0x5002f8){console[_0xaca814(0x20c)]('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...','info');const _0x3bdc25=doc(db,'userProfiles',_0x17d56b),_0x340801=await getDoc(_0x3bdc25);if(!_0x340801[_0xaca814(0x2e0)]()){showNotification('User\x20not\x20found','error');return;}const _0x12afeb=_0x340801['data']();console['log']('User\x20data\x20loaded:',_0x12afeb);const _0xd8bec5=document['getElementById'](_0xaca814(0xad)),_0x3ebdb7=document[_0xaca814(0x152)]('quick-edit-display-name'),_0x412ec4=document['getElementById']('quick-edit-email'),_0x20ee3b=document['getElementById']('quick-edit-current-points'),_0x5327eb=document['getElementById']('quick-edit-points-form');if(!_0xd8bec5||!_0x3ebdb7||!_0x412ec4||!_0x20ee3b||!_0x5327eb){console[_0xaca814(0x20c)]('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0xaca814(0x280),_0xaca814(0x20c));return;}_0xd8bec5['value']=_0x17d56b,_0x3ebdb7[_0xaca814(0xb2)]=_0x12afeb['displayName']||_0x12afeb[_0xaca814(0x28c)]||'Unknown\x20User',_0x412ec4[_0xaca814(0xb2)]=_0x12afeb[_0xaca814(0x140)]||'No\x20email',_0x20ee3b['textContent']=(_0x12afeb['points']||0x0)['toLocaleString'](),_0x5327eb[_0xaca814(0x142)]();const _0xe0e5dd=document['getElementById']('quick-add');_0xe0e5dd&&(_0xe0e5dd[_0xaca814(0x1b8)]=!![]);_0x5002f8['classList']['add']('active'),console[_0xaca814(0x241)](_0xaca814(0x11c));const _0x1fcc42=document['getElementById']('quick-points-amount');_0x1fcc42&&setTimeout(()=>_0x1fcc42['focus'](),0x64);}catch(_0x29b768){console[_0xaca814(0x20c)]('Error\x20opening\x20quick\x20edit\x20modal:',_0x29b768),showNotification(_0xaca814(0x13e)+_0x29b768['message'],'error');}}function closeQuickEditModal(){const _0x5db146=a0_0x1948cf,_0x2aa911=document[_0x5db146(0x152)]('quick-edit-points-modal');_0x2aa911&&_0x2aa911['classList'][_0x5db146(0x258)]('active');}async function handleQuickEditPoints(_0x3d5524){const _0x4f2d4c=a0_0x1948cf;_0x3d5524[_0x4f2d4c(0x1b0)]();const _0x2fc3cb=document['getElementById']('quick-edit-user-id')['value'],_0x37584a=document[_0x4f2d4c(0x236)]('input[name=\x22quick-action\x22]:checked')['value'],_0x48c8c2=parseInt(document['getElementById'](_0x4f2d4c(0x1bf))[_0x4f2d4c(0x1a1)]),_0x37d969=document['getElementById']('quick-points-reason')['value'][_0x4f2d4c(0x25d)]();console['log']('Processing\x20points\x20edit:',{'userId':_0x2fc3cb,'action':_0x37584a,'amount':_0x48c8c2,'reason':_0x37d969});if(!_0x2fc3cb||!_0x48c8c2||_0x48c8c2<0x0){showNotification(_0x4f2d4c(0x242),'error');return;}try{await modifyUserPoints(_0x2fc3cb,_0x37584a,_0x48c8c2,_0x37d969),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x2fc3cb);}catch(_0x4061a1){console['error']('Error\x20updating\x20points:',_0x4061a1),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x4061a1[_0x4f2d4c(0x15a)],'error');}}async function searchUsersForPoints(){const _0x8962e8=a0_0x1948cf,_0x21c922=document['getElementById']('points-user-search')['value']['trim']()['toLowerCase'](),_0x596ac0=document['getElementById']('user-search-results');if(!_0x21c922||_0x21c922['length']<0x2){_0x596ac0['innerHTML']='';return;}_0x596ac0['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x8a6ef1=collection(db,'userProfiles'),_0x3a37a5=await getDocs(_0x8a6ef1),_0x1b3952=[];_0x3a37a5['forEach'](_0x2f66ee=>{const _0x5ea66a=a0_0x26f0,_0x3454d2=_0x2f66ee['data'](),_0x39aa1b=(_0x3454d2['displayName']||_0x3454d2[_0x5ea66a(0x28c)]||'')['toLowerCase'](),_0x4ba4e6=(_0x3454d2['email']||'')[_0x5ea66a(0x106)]();(_0x39aa1b['includes'](_0x21c922)||_0x4ba4e6['includes'](_0x21c922))&&_0x1b3952['push']({'id':_0x2f66ee['id'],..._0x3454d2});});if(_0x1b3952['length']===0x0){_0x596ac0[_0x8962e8(0x287)]='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x596ac0['innerHTML']='',_0x1b3952[_0x8962e8(0x157)](_0x2ed67b=>{const _0x5dabfa=_0x8962e8,_0x2cf436=document['createElement']('div');_0x2cf436['className']='search-result-item',_0x2cf436[_0x5dabfa(0x287)]=_0x5dabfa(0x199)+(_0x2ed67b[_0x5dabfa(0x2d1)]||_0x2ed67b['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x2ed67b['email']||_0x5dabfa(0x1c3))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x2ed67b['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2cf436[_0x5dabfa(0x283)](_0x5dabfa(0x10c),()=>selectUserForPoints(_0x2ed67b)),_0x596ac0['appendChild'](_0x2cf436);});}catch(_0x306670){console['error']('Error\x20searching\x20users:',_0x306670),_0x596ac0['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x4f90ec){const _0x256bbf=a0_0x1948cf;document[_0x256bbf(0x152)]('selected-user-name')[_0x256bbf(0xb2)]=_0x4f90ec['displayName']||_0x4f90ec['username']||'Unknown\x20User',document[_0x256bbf(0x152)]('selected-user-points')['textContent']=(_0x4f90ec['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x4f90ec['id'],document['getElementById'](_0x256bbf(0x1a9))['style']['display']=_0x256bbf(0x136),document['getElementById']('points-management-forms')['style']['display']='block',document[_0x256bbf(0x152)]('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x4f2f78){const _0x111be1=a0_0x1948cf;_0x4f2f78[_0x111be1(0x1b0)]();const _0x2c5f70=document['getElementById']('selected-user-id')['value'],_0x4eb7d3=document['getElementById'](_0x111be1(0x2a0))[_0x111be1(0x1a1)],_0x513717=parseInt(document['getElementById'](_0x111be1(0x115))[_0x111be1(0x1a1)]),_0x5798bb=document['getElementById']('points-reason')['value']['trim']();if(!_0x2c5f70||!_0x513717||_0x513717<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x2c5f70,_0x4eb7d3,_0x513717,_0x5798bb),document['getElementById']('modify-points-form')['reset']();const _0x1db7ff=doc(db,'userProfiles',_0x2c5f70),_0x90a68=await getDoc(_0x1db7ff);if(_0x90a68['exists']()){const _0x188aab=_0x90a68[_0x111be1(0x126)]();document[_0x111be1(0x152)]('selected-user-points')['textContent']=(_0x188aab['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x4c0e6a){console['error']('Error\x20modifying\x20points:',_0x4c0e6a),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x4c0e6a['message'],_0x111be1(0x20c));}}async function loadPointsHistory(){const _0xefd8f7=a0_0x1948cf,_0x183b16=document['getElementById']('points-history-table-body');if(!_0x183b16)return;_0x183b16[_0xefd8f7(0x287)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x22b864=collection(db,'pointsHistory'),_0x151695=query(_0x22b864,orderBy(_0xefd8f7(0x104),'desc'),limit(0x32)),_0x5442c6=await getDocs(_0x151695);if(_0x5442c6['empty']){_0x183b16['innerHTML']=_0xefd8f7(0x111);return;}_0x183b16['innerHTML']='',_0x5442c6['forEach'](_0x18fbb2=>{const _0x5176dc=_0xefd8f7,_0x44accc=_0x18fbb2['data'](),_0x183076=document['createElement']('tr'),_0x19c679=_0x44accc[_0x5176dc(0x104)]?new Date(_0x44accc[_0x5176dc(0x104)][_0x5176dc(0x169)]*0x3e8)['toLocaleString']():'Unknown';let _0x38748f='';switch(_0x44accc[_0x5176dc(0x118)]){case'add':_0x38748f='Added\x20'+_0x44accc[_0x5176dc(0xb0)]+'\x20points';break;case'subtract':_0x38748f=_0x5176dc(0xbd)+_0x44accc['amount']+'\x20points';break;case'set':_0x38748f='Set\x20to\x20'+_0x44accc[_0x5176dc(0xb0)]+_0x5176dc(0x20a);break;default:_0x38748f=_0x44accc['action']+'\x20'+_0x44accc[_0x5176dc(0xb0)]+'\x20points';}_0x183076['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x19c679+_0x5176dc(0x265)+(_0x44accc[_0x5176dc(0x2d1)]||'Unknown\x20User')+_0x5176dc(0x265)+_0x38748f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x44accc['action']+_0x5176dc(0x1d8)+(_0x44accc['previousPoints']||0x0)+'\x20→\x20'+(_0x44accc['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x44accc['reason']||_0x5176dc(0x2af))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x44accc['adminEmail']||_0x5176dc(0x27a))+_0x5176dc(0x171),_0x183b16['appendChild'](_0x183076);});}catch(_0x5b9904){console[_0xefd8f7(0x20c)](_0xefd8f7(0x131),_0x5b9904),_0x183b16['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x5b9904['message']+_0xefd8f7(0x203);}}function filterPointsOverview(){const _0x1f7ca8=a0_0x1948cf,_0x30979c=document['getElementById'](_0x1f7ca8(0x214))['value']['toLowerCase']();if(!window[_0x1f7ca8(0x2d4)])return;const _0x25452d=window['allUsersPoints']['filter'](_0x24da14=>{const _0x239747=(_0x24da14['displayName']||_0x24da14['username']||'')['toLowerCase'](),_0x5644e6=(_0x24da14['email']||'')['toLowerCase']();return _0x239747['includes'](_0x30979c)||_0x5644e6['includes'](_0x30979c);});renderPointsOverview(_0x25452d);}function sortPointsOverview(){const _0x21b2a8=a0_0x1948cf,_0x531e5b=document['getElementById']('points-sort-order')[_0x21b2a8(0x1a1)];if(!window['allUsersPoints'])return;const _0x25a8ce=[...window['allUsersPoints']];switch(_0x531e5b){case'points-desc':_0x25a8ce['sort']((_0x1d1633,_0x5ecc7d)=>(_0x5ecc7d[_0x21b2a8(0x102)]||0x0)-(_0x1d1633['points']||0x0));break;case'points-asc':_0x25a8ce['sort']((_0x44e8cf,_0x27a928)=>(_0x44e8cf['points']||0x0)-(_0x27a928['points']||0x0));break;case _0x21b2a8(0x144):_0x25a8ce[_0x21b2a8(0x2f9)]((_0x3b78af,_0x2b8643)=>{const _0x10554b=_0x21b2a8,_0x30c0ab=(_0x3b78af['displayName']||_0x3b78af['username']||'')['toLowerCase'](),_0x3d9fc5=(_0x2b8643['displayName']||_0x2b8643['username']||'')[_0x10554b(0x106)]();return _0x30c0ab[_0x10554b(0x16c)](_0x3d9fc5);});break;case'name-desc':_0x25a8ce[_0x21b2a8(0x2f9)]((_0x461a50,_0x33c480)=>{const _0x43b668=(_0x461a50['displayName']||_0x461a50['username']||'')['toLowerCase'](),_0x56acc0=(_0x33c480['displayName']||_0x33c480['username']||'')['toLowerCase']();return _0x56acc0['localeCompare'](_0x43b668);});break;}renderPointsOverview(_0x25a8ce);}async function handleAwardItem(_0x15c857){const _0x955bde=a0_0x1948cf;_0x15c857[_0x955bde(0x1b0)]();const _0x235379=document['getElementById'](_0x955bde(0x315))['value'],_0xf2184f=document['getElementById'](_0x955bde(0x14f))['value'],_0x550b37=document['getElementById'](_0x955bde(0x1d3))['value']['trim']();if(!_0x235379||!_0xf2184f){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')['reset']();}catch(_0x21c989){console['error']('Error\x20awarding\x20item:',_0x21c989),showNotification(_0x955bde(0x1e1)+_0x21c989['message'],_0x955bde(0x20c));}}async function loadUserPointsHistory(_0x8339e9){const _0x8eb60e=a0_0x1948cf;try{const _0x4eee02=collection(db,_0x8eb60e(0x149)),_0x305033=query(_0x4eee02,where('userId','==',_0x8339e9),orderBy(_0x8eb60e(0x104),'desc')),_0x480cd6=await getDocs(_0x305033);console['log']('Found\x20'+_0x480cd6[_0x8eb60e(0x306)]+'\x20history\x20entries\x20for\x20user\x20'+_0x8339e9),showNotification('User\x20has\x20'+_0x480cd6['size']+'\x20points\x20history\x20entries','info');}catch(_0x2abca9){console[_0x8eb60e(0x20c)]('Error\x20loading\x20user\x20points\x20history:',_0x2abca9),showNotification('Failed\x20to\x20load\x20user\x20history',_0x8eb60e(0x20c));}}async function initializeUserPointsField(){const _0x436ee6=a0_0x1948cf;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x2df74d=collection(db,'userProfiles'),_0x381745=await getDocs(_0x2df74d);if(_0x381745[_0x436ee6(0x18e)]){console[_0x436ee6(0x241)]('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x140265=0x0,_0x550624=0x0;const _0x2311b3=writeBatch(db);let _0x27fbfe=0x0;return console['log']('Found\x20'+_0x381745['size']+'\x20users\x20to\x20check...'),_0x381745['forEach'](_0x1dafb1=>{const _0x7f3722=_0x436ee6,_0x4ec3e5=_0x1dafb1[_0x7f3722(0x126)]();_0x4ec3e5['points']===undefined||_0x4ec3e5['points']===null?(_0x2311b3['update'](_0x1dafb1['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x140265++,_0x27fbfe++,console[_0x7f3722(0x241)]('Queued\x20'+(_0x4ec3e5['displayName']||_0x4ec3e5['username']||_0x4ec3e5['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x550624++,console['log']((_0x4ec3e5['displayName']||_0x4ec3e5['username']||_0x4ec3e5['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x4ec3e5['points'])),_0x27fbfe>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x140265>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x140265+_0x436ee6(0x208)),await _0x2311b3['commit'](),console['log']('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x140265+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console[_0x436ee6(0x241)](_0x436ee6(0x299)+_0x381745['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x140265+_0x436ee6(0x221)+_0x550624),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x140265+'\x20users.\x20'+_0x550624+'\x20users\x20already\x20had\x20points.','success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x381745[_0x436ee6(0x306)],'usersUpdated':_0x140265,'usersAlreadyHadPoints':_0x550624};}catch(_0x3a3e44){console['error'](_0x436ee6(0x1b1),_0x3a3e44),showNotification(_0x436ee6(0x1ce)+_0x3a3e44['message'],'error');throw _0x3a3e44;}}function addPointsMigrationButton(){const _0x5b413b=a0_0x1948cf,_0x5df2e1=document['getElementById']('manage-points');if(!_0x5df2e1)return;if(document['getElementById']('migrate-points-btn'))return;const _0x29c428=document['createElement']('div');_0x29c428['className']='migration-section',_0x29c428['style']['marginBottom']='20px',_0x29c428['style']['padding']='15px',_0x29c428['style']['backgroundColor']=_0x5b413b(0x2f0),_0x29c428['style']['border']=_0x5b413b(0x272),_0x29c428['style']['borderRadius']='5px',_0x29c428['innerHTML']=_0x5b413b(0xa1);const _0xd99872=_0x5df2e1[_0x5b413b(0x236)]('.section-header');_0xd99872&&_0xd99872['insertAdjacentElement']('afterend',_0x29c428),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x11ea9f=_0x5b413b;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this[_0x11ea9f(0x287)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x11ea9f(0x287)]='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']=_0x11ea9f(0x200),setTimeout(()=>{const _0x4bebc5=_0x11ea9f;_0x29c428[_0x4bebc5(0x230)]['display']='none';},0xbb8);}catch(_0x4f454e){this['innerHTML']=_0x11ea9f(0xca),this['disabled']=![];}}});}function setupManagePointsSection(){const _0x278ec4=a0_0x1948cf;console['log'](_0x278ec4(0x1d2)),addPointsMigrationButton();const _0x44f74d=document['getElementById']('points-user-search');_0x44f74d&&_0x44f74d['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x3a528b=document['getElementById']('modify-points-form');_0x3a528b&&_0x3a528b[_0x278ec4(0x283)]('submit',handleModifyPoints);const _0xccbcd9=document['getElementById'](_0x278ec4(0x1b9));_0xccbcd9&&_0xccbcd9['addEventListener'](_0x278ec4(0x211),handleAwardItem);const _0xffb77=document['getElementById']('points-overview-search');_0xffb77&&_0xffb77['addEventListener'](_0x278ec4(0x318),debounce(filterPointsOverview,0x12c));const _0x4b20c8=document['getElementById'](_0x278ec4(0xf9));_0x4b20c8&&_0x4b20c8[_0x278ec4(0x283)]('change',sortPointsOverview);const _0xf7e290=document['getElementById']('refresh-points-overview');_0xf7e290&&_0xf7e290[_0x278ec4(0x283)]('click',loadPointsOverview);const _0x5547e6=document['getElementById'](_0x278ec4(0x129));_0x5547e6&&_0x5547e6['addEventListener'](_0x278ec4(0x10c),async()=>{const _0x433a5f=_0x278ec4;confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x5547e6[_0x433a5f(0xa4)]=!![],_0x5547e6['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x30e4da(),_0x5547e6['disabled']=![],_0x5547e6['innerHTML']=_0x433a5f(0x165));});const _0x377df9=document['getElementById'](_0x278ec4(0xb1));_0x377df9&&_0x377df9['addEventListener'](_0x278ec4(0x10c),awardPointsToAllPilots);async function _0x30e4da(){const _0x25e1c2=_0x278ec4;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x2f8343={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'≥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x5c78b3=0x0,_0x5cd82d=0x0,_0x5b0b3f=0x0,_0x41dc7c=0x0,_0x36943e=0x0,_0xf32f81=0x0;const _0x13a107=new Set(),_0x1506e0=collection(db,'pointsHistory'),_0x31c995=query(_0x1506e0,where(_0x25e1c2(0x12d),'>=','Bulk\x20award:'),where(_0x25e1c2(0x12d),'<=','Bulk\x20award:')),_0x4ae4f1=await getDocs(_0x31c995);_0x4ae4f1['forEach'](_0x543986=>{const _0x1138b3=_0x25e1c2,_0x2dd668=_0x543986[_0x1138b3(0x126)](),_0x42b53d=_0x2dd668['reason']||'',_0x373b30=_0x42b53d['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x373b30&&_0x373b30[0x1]&&_0x13a107['add'](_0x373b30[0x1]);}),console['log'](_0x25e1c2(0x29a)+_0x13a107[_0x25e1c2(0x306)]+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0xe32b5,_0x295e2d,_0x5e4d3e]=await Promise['all']([getDocs(collection(db,_0x25e1c2(0x167))),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0x54973d=_0xe32b5['size']+_0x295e2d[_0x25e1c2(0x306)]+_0x5e4d3e['size'];showNotification('Found\x20'+_0x54973d+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x2ab309=async(_0x2ee0ff,_0x3982ac)=>{const _0xac843d=_0x25e1c2;let _0x56c405=writeBatch(db);const _0x2abe62=[];let _0x260df0=0x0;for(const _0x4c4ace of _0x2ee0ff['docs']){try{if(_0x13a107[_0xac843d(0xac)](_0x4c4ace['id'])){if(_0x3982ac==='D1')_0xf32f81++;if(_0x3982ac==='D2')_0xf32f81++;if(_0x3982ac==='D3')_0xf32f81++;continue;}const _0x5c6013=_0x4c4ace[_0xac843d(0x126)](),_0x360dea=_0x5c6013['subgameType']||_0xac843d(0x1e2),_0x3a535a=_0x2f8343[_0x360dea]||0xa;let _0x54cdf3=_0x5c6013['winnerId'];if(!_0x54cdf3&&_0x5c6013[_0xac843d(0x2ce)]){const [_0x5992f8,_0x98201e,_0x4118a6]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x5c6013[_0xac843d(0x2ce)]))),getDocs(query(collection(db,'playersD2'),where(_0xac843d(0x28c),'==',_0x5c6013['winnerUsername']))),getDocs(query(collection(db,_0xac843d(0x297)),where('username','==',_0x5c6013['winnerUsername'])))]);if(!_0x5992f8['empty'])_0x54cdf3=_0x5992f8['docs'][0x0]['id'];else{if(!_0x98201e['empty'])_0x54cdf3=_0x98201e[_0xac843d(0xd2)][0x0]['id'];else{if(!_0x4118a6[_0xac843d(0x18e)])_0x54cdf3=_0x4118a6['docs'][0x0]['id'];}}}let _0x2d9475=_0x5c6013[_0xac843d(0x1ba)];if(!_0x2d9475&&_0x5c6013[_0xac843d(0x1eb)]){const [_0x2cb24b,_0x16f9e8,_0x4547a0]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0xac843d(0x28c),'==',_0x5c6013['loserUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x5c6013['loserUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x5c6013['loserUsername'])))]);if(!_0x2cb24b['empty'])_0x2d9475=_0x2cb24b['docs'][0x0]['id'];else{if(!_0x16f9e8['empty'])_0x2d9475=_0x16f9e8['docs'][0x0]['id'];else{if(!_0x4547a0['empty'])_0x2d9475=_0x4547a0['docs'][0x0]['id'];}}}if(_0x54cdf3&&_0x2d9475){const _0x569ec4=doc(db,'userProfiles',_0x54cdf3),_0x1c58e1=doc(db,'userProfiles',_0x2d9475),[_0x6fe0ba,_0x167f90]=await Promise['all']([getDoc(_0x569ec4),getDoc(_0x1c58e1)]);if(_0x6fe0ba['exists']()){const _0x3bd57c=_0x6fe0ba['data'](),_0x264ec9=_0x3bd57c['points']||0x0;_0x56c405['update'](_0x569ec4,{'points':_0x264ec9+_0x3a535a,'lastPointsModified':serverTimestamp()}),_0x2abe62['push']({'userId':_0x54cdf3,'userEmail':_0x3bd57c['email']||'unknown','displayName':_0x3bd57c['displayName']||_0x5c6013[_0xac843d(0x2ce)]||'Unknown\x20User','action':'add','amount':_0x3a535a,'previousPoints':_0x264ec9,'newPoints':_0x264ec9+_0x3a535a,'reason':'Bulk\x20award:\x20'+_0x360dea+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x4c4ace['id']+'\x20-\x20'+_0x3982ac,'adminEmail':auth[_0xac843d(0x13b)]['email'],'timestamp':serverTimestamp()});}if(_0x167f90['exists']()){const _0x548e88=_0x167f90['data'](),_0x1a799e=_0x548e88[_0xac843d(0x102)]||0x0;_0x56c405['update'](_0x1c58e1,{'points':_0x1a799e+_0x3a535a,'lastPointsModified':serverTimestamp()}),_0x2abe62['push']({'userId':_0x2d9475,'userEmail':_0x548e88[_0xac843d(0x140)]||'unknown','displayName':_0x548e88['displayName']||_0x5c6013['loserUsername']||'Unknown\x20User','action':_0xac843d(0x2c9),'amount':_0x3a535a,'previousPoints':_0x1a799e,'newPoints':_0x1a799e+_0x3a535a,'reason':'Bulk\x20award:\x20'+_0x360dea+_0xac843d(0x14e)+_0x4c4ace['id']+_0xac843d(0x2bc)+_0x3982ac,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x41dc7c+=_0x3a535a*0x2,_0x260df0+=0x2,_0x13a107['add'](_0x4c4ace['id']);if(_0x260df0>=0x190){await _0x56c405['commit']();for(const _0x86b3fb of _0x2abe62){await addDoc(collection(db,'pointsHistory'),_0x86b3fb);}_0x56c405=writeBatch(db),_0x260df0=0x0,_0x2abe62['length']=0x0;}}}catch(_0x5872b7){console['error'](_0xac843d(0x181)+_0x3982ac+'\x20match\x20'+_0x4c4ace['id']+':',_0x5872b7),_0x36943e++;}}if(_0x260df0>0x0){await _0x56c405[_0xac843d(0xeb)]();for(const _0x33ebf3 of _0x2abe62){await addDoc(collection(db,_0xac843d(0x149)),_0x33ebf3);}}return{'processed':_0x3982ac==='D1'?_0x5c78b3:_0x3982ac==='D2'?_0x5cd82d:_0x5b0b3f};};await _0x2ab309(_0xe32b5,'D1'),await _0x2ab309(_0x295e2d,'D2'),await _0x2ab309(_0x5e4d3e,'D3'),showNotification('Completed!\x20Processed\x20'+_0x5c78b3+'\x20D1\x20matches,\x20'+_0x5cd82d+_0x25e1c2(0xd4)+_0x5b0b3f+'\x20D3\x20matches.\x20'+('Awarded\x20'+_0x41dc7c+'\x20points.\x20Skipped\x20'+_0xf32f81+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x36943e),'success'),document[_0x25e1c2(0x152)]('points-overview-table-body')&&loadPointsOverview();}catch(_0x4f5fcf){console['error']('Error\x20in\x20bulk\x20award\x20points:',_0x4f5fcf),showNotification(_0x25e1c2(0x2c8)+_0x4f5fcf[_0x25e1c2(0x15a)],_0x25e1c2(0x20c));}}const _0x50d829=document['getElementById']('quick-edit-points-modal');if(_0x50d829){console[_0x278ec4(0x241)](_0x278ec4(0x212));const _0x39eeb8=_0x50d829[_0x278ec4(0x236)]('.close-btn');_0x39eeb8?_0x39eeb8[_0x278ec4(0x283)]('click',function(){const _0x119c23=_0x278ec4;console[_0x119c23(0x241)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x2024bb=document['getElementById']('cancel-quick-edit');_0x2024bb?_0x2024bb['addEventListener'](_0x278ec4(0x10c),function(){const _0x3cf863=_0x278ec4;console[_0x3cf863(0x241)]('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x278ec4(0xf6));const _0x29b871=document['getElementById']('quick-edit-points-form');_0x29b871?_0x29b871[_0x278ec4(0x283)](_0x278ec4(0x211),function(_0x17623f){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x17623f);}):console[_0x278ec4(0x20c)]('Quick\x20edit\x20form\x20not\x20found!'),_0x50d829['addEventListener']('click',function(_0x3c5f0b){const _0xb9e4da=_0x278ec4;_0x3c5f0b['target']===_0x50d829&&(console['log'](_0xb9e4da(0xc8)),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x47f118=a0_0x1948cf;try{const _0x3f7598=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x3f7598||isNaN(_0x3f7598)){showNotification('Invalid\x20points\x20amount',_0x47f118(0x20c));return;}if(!confirm('This\x20will\x20award\x20'+_0x3f7598+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification(_0x47f118(0x304),'info');const [_0x530f39,_0x40bf43,_0x4c9e19]=await Promise['all']([getDocs(collection(db,_0x47f118(0x1ff))),getDocs(collection(db,_0x47f118(0x1a4))),getDocs(collection(db,_0x47f118(0x297)))]);console['log']('Found\x20'+_0x530f39['size']+'\x20D1\x20pilots,\x20'+_0x40bf43[_0x47f118(0x306)]+'\x20D2\x20pilots,\x20'+_0x4c9e19['size']+'\x20D3\x20pilots');const _0x199036=_0x530f39['size']+_0x40bf43[_0x47f118(0x306)]+_0x4c9e19['size'],_0x574f14=new Map();_0x530f39['forEach'](_0x226e5f=>{const _0x51c665=_0x226e5f['data']();_0x574f14['set'](_0x226e5f['id'],{'username':_0x51c665['username'],'ladder':'D1'});}),_0x40bf43['forEach'](_0x405a6e=>{const _0x1ea8b9=_0x47f118,_0xb224d=_0x405a6e['data']();_0x574f14[_0x1ea8b9(0x226)](_0x405a6e['id'],{'username':_0xb224d[_0x1ea8b9(0x28c)],'ladder':'D2'});}),_0x4c9e19[_0x47f118(0x157)](_0x51c7b1=>{const _0x1965d4=_0x47f118,_0x3ce1bc=_0x51c7b1['data']();_0x574f14['set'](_0x51c7b1['id'],{'username':_0x3ce1bc[_0x1965d4(0x28c)],'ladder':'D3'});}),console['log']('Found\x20'+_0x574f14['size']+_0x47f118(0x2f3));let _0x30e8a6=0x0,_0x2b4245=0x0,_0x4d8270=0x0;const _0x57a44b=Array['from'](_0x574f14['keys']()),_0x2b224b=0x190;for(let _0x17417a=0x0;_0x17417a<_0x57a44b[_0x47f118(0x291)];_0x17417a+=_0x2b224b){const _0x3e28d3=writeBatch(db),_0x386328=[],_0x9a2f80=_0x57a44b['slice'](_0x17417a,_0x17417a+_0x2b224b),_0x52cf52=await Promise['all'](_0x9a2f80[_0x47f118(0xb5)](_0x5cb378=>getDoc(doc(db,_0x47f118(0x30a),_0x5cb378))));for(let _0xe81960=0x0;_0xe81960<_0x9a2f80['length'];_0xe81960++){try{const _0x2116b6=_0x9a2f80[_0xe81960],_0x1460c5=_0x574f14['get'](_0x2116b6),_0x4b7dcc=_0x52cf52[_0xe81960];if(_0x4b7dcc['exists']()){const _0x4103a4=_0x4b7dcc[_0x47f118(0x126)](),_0x2e796b=_0x4103a4['points']||0x0,_0x7d3024=_0x2e796b+_0x3f7598;_0x3e28d3['update'](doc(db,'userProfiles',_0x2116b6),{'points':_0x7d3024,'lastPointsModified':serverTimestamp()}),_0x386328['push']({'userId':_0x2116b6,'userEmail':_0x4103a4['email']||'unknown','displayName':_0x4103a4['displayName']||_0x1460c5['username']||_0x47f118(0x153),'action':_0x47f118(0x2c9),'amount':_0x3f7598,'previousPoints':_0x2e796b,'newPoints':_0x7d3024,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x1460c5[_0x47f118(0x1b5)]+')','adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()}),_0x2b4245+=_0x3f7598,_0x30e8a6++;}else _0x4d8270++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x1460c5['username']+'\x20('+_0x2116b6+')');}catch(_0x2a67b5){_0x4d8270++,console[_0x47f118(0x20c)]('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x2a67b5);}}await _0x3e28d3['commit']();for(const _0x6a1377 of _0x386328){await addDoc(collection(db,'pointsHistory'),_0x6a1377);}showNotification('Processed\x20'+_0x30e8a6+'/'+_0x199036+'\x20pilots...',_0x47f118(0x273));}showNotification('Complete!\x20Awarded\x20'+_0x2b4245+'\x20points\x20to\x20'+_0x30e8a6+_0x47f118(0x117)+_0x4d8270,_0x47f118(0x2d9)),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x102df0){console['error']('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x102df0),showNotification('Error:\x20'+_0x102df0['message'],'error');}}function setupManageRibbonsSection(){const _0x3c2e80=a0_0x1948cf;console[_0x3c2e80(0x241)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x3d9652=document[_0x3c2e80(0x152)]('ribbon-user-search');_0x3d9652&&_0x3d9652['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x388726=document[_0x3c2e80(0x152)]('search-ribbon-user-btn');_0x388726&&_0x388726[_0x3c2e80(0x283)]('click',searchRibbonUser);const _0x4145ed=document['getElementById']('add-ribbon-form');_0x4145ed&&_0x4145ed['addEventListener']('submit',addRibbon),_0x3d9652&&_0x3d9652['addEventListener']('keypress',function(_0x51c525){_0x51c525['key']==='Enter'&&(_0x51c525['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0xff9157,_0x23096a,_0x24d830,_0xa4c22e=''){const _0x279812=a0_0x1948cf,_0x1a2394=doc(db,_0x279812(0x30a),_0xff9157),_0x5e0e7c=await getDoc(_0x1a2394);if(!_0x5e0e7c['exists']())throw new Error('User\x20not\x20found');const _0x48472d=_0x5e0e7c['data'](),_0x4dfe44=_0x48472d['points']!==undefined?_0x48472d['points']:0x0;_0x48472d[_0x279812(0x102)]===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x48472d[_0x279812(0x2d1)]||_0x48472d[_0x279812(0x140)]||'Unknown')),await updateDoc(_0x1a2394,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x4d4334=_0x4dfe44;switch(_0x23096a){case'add':_0x4d4334=_0x4dfe44+_0x24d830;break;case'subtract':_0x4d4334=Math['max'](0x0,_0x4dfe44-_0x24d830);break;case'set':_0x4d4334=_0x24d830;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x1a2394,{'points':_0x4d4334,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0xff9157,'userEmail':_0x48472d[_0x279812(0x140)]||'unknown','displayName':_0x48472d['displayName']||_0x48472d[_0x279812(0x28c)]||'Unknown\x20User','action':_0x23096a,'amount':_0x24d830,'previousPoints':_0x4dfe44,'newPoints':_0x4d4334,'reason':_0xa4c22e,'adminEmail':auth[_0x279812(0x13b)]['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x27feb6=a0_0x1948cf,_0x602b03=document['getElementById']('points-overview-table-body');if(!_0x602b03)return;_0x602b03['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x3a5be8=collection(db,_0x27feb6(0x30a)),_0x4f31ca=await getDocs(_0x3a5be8);if(_0x4f31ca['empty']){_0x602b03[_0x27feb6(0x287)]=_0x27feb6(0x105);return;}const _0x2f17d3=[];let _0x3a0aec=0x0;_0x4f31ca[_0x27feb6(0x157)](_0x474278=>{const _0x2415f4=_0x474278['data'](),_0x48b933=_0x2415f4['points']!==undefined?_0x2415f4['points']:0x0;_0x2415f4['points']===undefined&&_0x3a0aec++,_0x2f17d3['push']({'id':_0x474278['id'],..._0x2415f4,'points':_0x48b933});}),_0x3a0aec>0x0&&(console[_0x27feb6(0x241)](_0x27feb6(0x29a)+_0x3a0aec+_0x27feb6(0xa3)),showNotification(_0x3a0aec+_0x27feb6(0x290),'info')),_0x2f17d3['sort']((_0x9c2eeb,_0x3971da)=>(_0x3971da['points']||0x0)-(_0x9c2eeb[_0x27feb6(0x102)]||0x0)),window['allUsersPoints']=_0x2f17d3,renderPointsOverview(_0x2f17d3);}catch(_0x1fd4e9){console['error'](_0x27feb6(0x1f8),_0x1fd4e9),_0x602b03['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x1fd4e9['message']+_0x27feb6(0x203);}}async function loadRibbonsData(){const _0x516bb4=a0_0x1948cf,_0x42ca46=document['getElementById'](_0x516bb4(0xda));if(!_0x42ca46)return;_0x42ca46[_0x516bb4(0x287)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x5aefb6,_0xb46a42,_0x309390]=await Promise['all']([getDocs(collection(db,_0x516bb4(0x1d6))),getDocs(collection(db,_0x516bb4(0x146))),getDocs(collection(db,'playerRibbonsD3'))]);_0x42ca46['innerHTML']='';const _0x1cda7b=(_0x255f44,_0x3bba74)=>{const _0x215a3b=_0x516bb4;_0x255f44[_0x215a3b(0x157)](_0x5266ed=>{const _0x20f807=_0x215a3b,_0x4959c9=_0x5266ed['data'](),_0x1d191c=_0x4959c9['ribbons']||{},_0xdf6882=Object['keys'](_0x1d191c)['length'],_0x3d5fc0=document[_0x20f807(0x2ef)]('tr');_0x3d5fc0[_0x20f807(0x287)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4959c9['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x3bba74['toLowerCase']()+'\x22>'+_0x3bba74+_0x20f807(0x25c)+_0xdf6882+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4959c9['lastUpdated']?new Date(_0x4959c9['lastUpdated']['seconds']*0x3e8)[_0x20f807(0x1db)]():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x4959c9['username']+_0x20f807(0xf1)+_0x3bba74+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x42ca46['appendChild'](_0x3d5fc0);});};_0x1cda7b(_0x5aefb6,'D1'),_0x1cda7b(_0xb46a42,'D2'),_0x1cda7b(_0x309390,'D3'),document['querySelectorAll'](_0x516bb4(0x185))[_0x516bb4(0x157)](_0x1cb9ef=>{_0x1cb9ef['addEventListener']('click',function(){const _0x4fde29=a0_0x26f0,_0xf2c6d=this['dataset'][_0x4fde29(0x28c)],_0x240b73=this['dataset']['ladder'];editUserRibbons(_0xf2c6d,_0x240b73);});}),showNotification(_0x516bb4(0x11d),'success');}catch(_0x266de7){console['error']('Error\x20loading\x20ribbons:',_0x266de7),_0x42ca46[_0x516bb4(0x287)]=_0x516bb4(0x21e),showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x2ae7cb=a0_0x1948cf,_0x29aaaf=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x29aaaf){showNotification(_0x2ae7cb(0x2e2),'error');return;}try{const [_0x4674cc,_0x179e7c,_0x1a1eb2]=await Promise[_0x2ae7cb(0x259)]([getDoc(doc(db,_0x2ae7cb(0x1d6),_0x29aaaf)),getDoc(doc(db,'playerRibbonsD2',_0x29aaaf)),getDoc(doc(db,'playerRibbonsD3',_0x29aaaf))]);let _0x56d469=null,_0x364fd5=null;if(_0x4674cc['exists']())_0x56d469='D1',_0x364fd5=_0x4674cc['data']();else{if(_0x179e7c['exists']())_0x56d469='D2',_0x364fd5=_0x179e7c[_0x2ae7cb(0x126)]();else _0x1a1eb2['exists']()&&(_0x56d469='D3',_0x364fd5=_0x1a1eb2[_0x2ae7cb(0x126)]());}_0x56d469?(document[_0x2ae7cb(0x152)]('current-ribbon-user')[_0x2ae7cb(0xb2)]=_0x29aaaf,document[_0x2ae7cb(0x152)]('ribbon-target-user')['value']=_0x29aaaf,document['getElementById'](_0x2ae7cb(0xb6))[_0x2ae7cb(0x1a1)]=_0x56d469,document['getElementById']('user-ribbon-management')['style'][_0x2ae7cb(0x12a)]='block',displayCurrentRibbons(_0x364fd5['ribbons']||{}),showNotification('Found\x20'+_0x29aaaf+'\x20in\x20'+_0x56d469+'\x20ladder','success')):showNotification('User\x20'+_0x29aaaf+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x17c06a){console['error']('Error\x20searching\x20user:',_0x17c06a),showNotification('Error\x20searching\x20for\x20user',_0x2ae7cb(0x20c));}}function displayCurrentRibbons(_0x1486f9){const _0x163362=a0_0x1948cf,_0x25f8d7=document['getElementById']('current-ribbons-list');if(!_0x25f8d7)return;_0x25f8d7['innerHTML']='';if(Object['keys'](_0x1486f9)[_0x163362(0x291)]===0x0){_0x25f8d7[_0x163362(0x287)]='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object[_0x163362(0x1c4)](_0x1486f9)['forEach'](([_0x9b2e2,_0x34245c])=>{const _0x2a3a0d=_0x163362,_0x59c5f1=document['createElement']('div');_0x59c5f1['className']='ribbon-item',_0x59c5f1['innerHTML']=_0x2a3a0d(0x1ec)+_0x9b2e2+_0x2a3a0d(0x22a)+(_0x34245c['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x34245c[_0x2a3a0d(0x25e)]?new Date(_0x34245c['awardedAt']['seconds']*0x3e8)[_0x2a3a0d(0x1db)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x9b2e2+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x25f8d7[_0x2a3a0d(0x1a5)](_0x59c5f1);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x2cabb7=>{const _0x82f53b=_0x163362;_0x2cabb7['addEventListener'](_0x82f53b(0x10c),function(){const _0x415b2b=_0x82f53b,_0xa17030=this[_0x415b2b(0x239)]['ribbon'];removeRibbon(_0xa17030);});});}async function addRibbon(_0xfd20a3){const _0x30a243=a0_0x1948cf;_0xfd20a3['preventDefault']();const _0x28da48=document['getElementById']('ribbon-target-user')['value'],_0x4a2ae6=document['getElementById'](_0x30a243(0xb6))['value'],_0x1a316b=document[_0x30a243(0x152)]('ribbon-type-select')['value'],_0x20fe6d=parseInt(document[_0x30a243(0x152)](_0x30a243(0xf2))['value']);if(!_0x28da48||!_0x4a2ae6||!_0x1a316b||!_0x20fe6d){showNotification('Please\x20fill\x20all\x20fields',_0x30a243(0x20c));return;}try{const _0x326827='playerRibbons'+(_0x4a2ae6==='D1'?'':_0x4a2ae6),_0x236ade=doc(db,_0x326827,_0x28da48),_0x1c2be5=await getDoc(_0x236ade),_0x40d05f=_0x1c2be5[_0x30a243(0x2e0)]()?_0x1c2be5['data']()['ribbons']||{}:{};_0x40d05f[_0x1a316b]={'level':_0x20fe6d,'awardedAt':serverTimestamp()},await setDoc(_0x236ade,{'username':_0x28da48,'ladder':_0x4a2ae6,'ribbons':_0x40d05f,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x30a243(0xd8)+_0x1a316b+'\x20Level\x20'+_0x20fe6d+'\x20to\x20'+_0x28da48,_0x30a243(0x2d9)),displayCurrentRibbons(_0x40d05f),document[_0x30a243(0x152)]('ribbon-type-select')[_0x30a243(0x1a1)]='',document['getElementById'](_0x30a243(0xf2))['value']='1';}catch(_0x22b665){console['error']('Error\x20adding\x20ribbon:',_0x22b665),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x161f27){const _0x2c90aa=a0_0x1948cf,_0x2d974a=document['getElementById']('ribbon-target-user')['value'],_0x211f58=document['getElementById']('ribbon-target-ladder')[_0x2c90aa(0x1a1)];if(!confirm('Remove\x20'+_0x161f27+'\x20from\x20'+_0x2d974a+'?'))return;try{const _0xfb3c7e='playerRibbons'+(_0x211f58==='D1'?'':_0x211f58),_0x4afa72=doc(db,_0xfb3c7e,_0x2d974a),_0x31491d=await getDoc(_0x4afa72),_0x2f494c=_0x31491d[_0x2c90aa(0x2e0)]()?_0x31491d['data']()['ribbons']||{}:{};delete _0x2f494c[_0x161f27],await setDoc(_0x4afa72,{'username':_0x2d974a,'ladder':_0x211f58,'ribbons':_0x2f494c,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x161f27+_0x2c90aa(0x251)+_0x2d974a,'success'),displayCurrentRibbons(_0x2f494c);}catch(_0x1ae5bd){console['error']('Error\x20removing\x20ribbon:',_0x1ae5bd),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x22bd98,_0x5ce648){document['getElementById']('ribbon-user-search')['value']=_0x22bd98,searchRibbonUser();}