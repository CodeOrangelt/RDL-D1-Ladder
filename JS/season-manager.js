const a52_0x5583f4=a52_0x521d;(function(_0xffa60c,_0x447f3b){const _0x2032fe=a52_0x521d,_0x5e1c90=_0xffa60c();while(!![]){try{const _0x165f88=-parseInt(_0x2032fe(0x14f))/0x1*(parseInt(_0x2032fe(0x161))/0x2)+parseInt(_0x2032fe(0x145))/0x3*(-parseInt(_0x2032fe(0x132))/0x4)+-parseInt(_0x2032fe(0x144))/0x5+-parseInt(_0x2032fe(0x147))/0x6*(-parseInt(_0x2032fe(0x138))/0x7)+-parseInt(_0x2032fe(0x12d))/0x8*(-parseInt(_0x2032fe(0x146))/0x9)+-parseInt(_0x2032fe(0x15d))/0xa+parseInt(_0x2032fe(0x156))/0xb;if(_0x165f88===_0x447f3b)break;else _0x5e1c90['push'](_0x5e1c90['shift']());}catch(_0x283ae5){_0x5e1c90['push'](_0x5e1c90['shift']());}}}(a52_0x5728,0xcf82e));function a52_0x521d(_0xf09beb,_0x19bb3a){const _0xcdf578=a52_0x5728();return a52_0x521d=function(_0x1fd438,_0x1a1b5c){_0x1fd438=_0x1fd438-0x12b;let _0x319625=_0xcdf578[_0x1fd438];return _0x319625;},a52_0x521d(_0xf09beb,_0x19bb3a);}const a52_0x55669f=(function(){let _0x298471=!![];return function(_0x741849,_0x329dd2){const _0x4f69f6=_0x298471?function(){const _0x2ee27e=a52_0x521d;if(_0x329dd2){const _0x266fde=_0x329dd2[_0x2ee27e(0x13f)](_0x741849,arguments);return _0x329dd2=null,_0x266fde;}}:function(){};return _0x298471=![],_0x4f69f6;};}()),a52_0x159b11=a52_0x55669f(this,function(){const _0x4018c2=a52_0x521d;return a52_0x159b11[_0x4018c2(0x133)]()[_0x4018c2(0x163)](_0x4018c2(0x15a))[_0x4018c2(0x133)]()['constructor'](a52_0x159b11)[_0x4018c2(0x163)](_0x4018c2(0x15a));});a52_0x159b11();const a52_0x1a1b5c=(function(){let _0x3d22cf=!![];return function(_0x1c8373,_0x22f06f){const _0x7dee31=_0x3d22cf?function(){if(_0x22f06f){const _0x37eab1=_0x22f06f['apply'](_0x1c8373,arguments);return _0x22f06f=null,_0x37eab1;}}:function(){};return _0x3d22cf=![],_0x7dee31;};}()),a52_0x1fd438=a52_0x1a1b5c(this,function(){const _0x433a94=a52_0x521d,_0x2759f6=function(){const _0x93561f=a52_0x521d;let _0x2e88c2;try{_0x2e88c2=Function(_0x93561f(0x14c)+_0x93561f(0x154)+');')();}catch(_0x5e014e){_0x2e88c2=window;}return _0x2e88c2;},_0x47cf6b=_0x2759f6(),_0x31e658=_0x47cf6b[_0x433a94(0x130)]=_0x47cf6b['console']||{},_0x4d4bb8=['log',_0x433a94(0x135),_0x433a94(0x158),_0x433a94(0x148),_0x433a94(0x14e),'table',_0x433a94(0x155)];for(let _0x3ee81e=0x0;_0x3ee81e<_0x4d4bb8[_0x433a94(0x13a)];_0x3ee81e++){const _0x279ade=a52_0x1a1b5c[_0x433a94(0x149)][_0x433a94(0x159)][_0x433a94(0x14d)](a52_0x1a1b5c),_0x1df700=_0x4d4bb8[_0x3ee81e],_0x2657ed=_0x31e658[_0x1df700]||_0x279ade;_0x279ade['__proto__']=a52_0x1a1b5c[_0x433a94(0x14d)](a52_0x1a1b5c),_0x279ade[_0x433a94(0x133)]=_0x2657ed[_0x433a94(0x133)][_0x433a94(0x14d)](_0x2657ed),_0x31e658[_0x1df700]=_0x279ade;}});a52_0x1fd438();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a52_0x5728(){const _0x153068=['resetSeason','return\x20(function()\x20','bind','exception','418wPsawx','reset-confirmation','Please\x20enter\x20your\x20password','username','cancel-reset','{}.constructor(\x22return\x20this\x22)(\x20)','trace','23753070bZIlnp','reset-season','info','prototype','(((.+)+)+)+$','click','reset-password','13193970vCYGnT','addEventListener','seasons','position','474AvEvuM','setupEventListeners','search','exists','email','Authentication\x20error:','data','none','confirm-reset','192QAwqVX','season','eloRating','console','reload','1413364hLIDyh','toString','seasonCount','warn','value','currentUser','63DTeQOl','style','length','getElementById','display','metadata','block','apply','Invalid\x20password\x20or\x20authentication\x20failed','push','players','Error\x20resetting\x20season.\x20Please\x20try\x20again.','7448965zFGfYX','3qsEtTo','517932JxNpdp','380694bvEpoj','error','constructor','Error\x20resetting\x20season:'];a52_0x5728=function(){return _0x153068;};return a52_0x5728();}import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){const _0x4376ac=a52_0x521d;this[_0x4376ac(0x162)]();}['setupEventListeners'](){const _0x48918a=a52_0x521d,_0x243ab7=document[_0x48918a(0x13b)](_0x48918a(0x157)),_0x3a98c6=document[_0x48918a(0x13b)](_0x48918a(0x12c)),_0x307b3c=document[_0x48918a(0x13b)](_0x48918a(0x153));_0x243ab7?.[_0x48918a(0x15e)](_0x48918a(0x15b),()=>{const _0x161e6f=_0x48918a;document[_0x161e6f(0x13b)](_0x161e6f(0x150))[_0x161e6f(0x139)]['display']=_0x161e6f(0x13e);}),_0x3a98c6?.[_0x48918a(0x15e)](_0x48918a(0x15b),async()=>{const _0x47562e=_0x48918a,_0x1afcb7=document[_0x47562e(0x13b)](_0x47562e(0x15c)),_0x36f99e=auth[_0x47562e(0x137)];if(!_0x36f99e||!_0x1afcb7[_0x47562e(0x136)]){alert(_0x47562e(0x151));return;}try{const _0x557b1e=EmailAuthProvider['credential'](_0x36f99e[_0x47562e(0x165)],_0x1afcb7[_0x47562e(0x136)]);await reauthenticateWithCredential(_0x36f99e,_0x557b1e),await this[_0x47562e(0x14b)](),_0x1afcb7[_0x47562e(0x136)]='',document[_0x47562e(0x13b)]('reset-confirmation')['style'][_0x47562e(0x13c)]=_0x47562e(0x12b);}catch(_0x9d16de){alert(_0x47562e(0x140)),console['error'](_0x47562e(0x166),_0x9d16de);}}),_0x307b3c?.[_0x48918a(0x15e)](_0x48918a(0x15b),()=>{const _0x4e72ea=_0x48918a,_0x1136d7=document['getElementById'](_0x4e72ea(0x15c));_0x1136d7[_0x4e72ea(0x136)]='',document[_0x4e72ea(0x13b)](_0x4e72ea(0x150))['style'][_0x4e72ea(0x13c)]=_0x4e72ea(0x12b);});}async[a52_0x5583f4(0x14b)](){const _0x39bf33=a52_0x5583f4;try{const _0x277e4a=await getDoc(doc(db,_0x39bf33(0x13d),'seasonCount'));let _0x57496b=0x1;_0x277e4a[_0x39bf33(0x164)]()&&(_0x57496b=_0x277e4a['data']()['count']+0x1);const _0x4e6acb=await getDocs(collection(db,_0x39bf33(0x142))),_0x4453f8={'players':[],'date':new Date(),'seasonNumber':_0x57496b};for(const _0x3c0f0b of _0x4e6acb['docs']){const _0x179c77=_0x3c0f0b[_0x39bf33(0x167)]();_0x4453f8['players'][_0x39bf33(0x141)]({'username':_0x179c77[_0x39bf33(0x152)],'position':_0x179c77[_0x39bf33(0x160)],'eloRating':_0x179c77[_0x39bf33(0x12f)]||0x4b0}),await setDoc(doc(db,_0x39bf33(0x142),_0x3c0f0b['id']),{..._0x179c77,'eloRating':0x4b0,'position':_0x179c77['position']});}await setDoc(doc(db,_0x39bf33(0x15f),_0x39bf33(0x12e)+_0x57496b),_0x4453f8),await setDoc(doc(db,_0x39bf33(0x13d),_0x39bf33(0x134)),{'count':_0x57496b}),alert('Season\x20'+_0x57496b+'\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.'),location[_0x39bf33(0x131)]();}catch(_0x153eb7){console['error'](_0x39bf33(0x14a),_0x153eb7),alert(_0x39bf33(0x143));}}}export const seasonManager=new SeasonManager();