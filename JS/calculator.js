const a9_0x2e9fd3=a9_0x502f;(function(_0x2d643c,_0x38f80a){const _0xf9890=a9_0x502f,_0x561cb4=_0x2d643c();while(!![]){try{const _0xa1e23a=parseInt(_0xf9890(0xbc))/0x1+-parseInt(_0xf9890(0x96))/0x2*(-parseInt(_0xf9890(0xbf))/0x3)+parseInt(_0xf9890(0x10b))/0x4*(parseInt(_0xf9890(0xc2))/0x5)+parseInt(_0xf9890(0xf8))/0x6+parseInt(_0xf9890(0xf9))/0x7+parseInt(_0xf9890(0x10d))/0x8*(-parseInt(_0xf9890(0xa1))/0x9)+-parseInt(_0xf9890(0xdb))/0xa*(parseInt(_0xf9890(0x110))/0xb);if(_0xa1e23a===_0x38f80a)break;else _0x561cb4['push'](_0x561cb4['shift']());}catch(_0x2182db){_0x561cb4['push'](_0x561cb4['shift']());}}}(a9_0x24f0,0x5283d));const a9_0x49dc5d=(function(){let _0x24ef33=!![];return function(_0x460a77,_0x4657aa){const _0x21d004=_0x24ef33?function(){const _0x5c2c18=a9_0x502f;if(_0x4657aa){const _0x330ca6=_0x4657aa[_0x5c2c18(0xd7)](_0x460a77,arguments);return _0x4657aa=null,_0x330ca6;}}:function(){};return _0x24ef33=![],_0x21d004;};}()),a9_0x574f15=a9_0x49dc5d(this,function(){const _0x3589ac=a9_0x502f;return a9_0x574f15['toString']()[_0x3589ac(0xcf)](_0x3589ac(0x9c))[_0x3589ac(0xe9)]()[_0x3589ac(0xe3)](a9_0x574f15)[_0x3589ac(0xcf)](_0x3589ac(0x9c));});function a9_0x502f(_0x28c889,_0x44302f){const _0x6f7b94=a9_0x24f0();return a9_0x502f=function(_0x3fe04f,_0x32236b){_0x3fe04f=_0x3fe04f-0x95;let _0x56cbae=_0x6f7b94[_0x3fe04f];return _0x56cbae;},a9_0x502f(_0x28c889,_0x44302f);}a9_0x574f15();function a9_0x24f0(){const _0x3be8e2=['click','13976KONdQZ','bind','init','Error\x20loading\x20players:','winner-new-elo','\x22\x20class=\x22','(((.+)+)+)+$','console','round','expectedScoreLoser','<option\x20value=\x22\x22>Loading\x20players...</option>','68787rmBjdh','calculation-details','forEach','%\x20chance\x20to\x20win)\x0a\x20\x20','desc','trace','loser-elo-change','emerald','get','getELOColor','winner-select','DOMContentLoaded','none','bronze','calculation-text','remove','username','loser-current-elo','ladder','.ladder-btn','gold','refresh-players','error','__proto__','<option\x20value=\x22\x22>Select\x20a\x20player...</option>','target','addEventListener','100298wuLpKM','getELORankClass','Low\x20ELO\x20gain.','162XptgRF','value','{}.constructor(\x22return\x20this\x22)(\x20)','5lLNSio','winner-name','data','sandbox','#FFD700','New\x20ELO:\x20','querySelectorAll','block','\x22\x20data-elo=\x22','info','winner-current-elo','elo','loadPlayers','search','expectedScoreWinner','calculateMatch','toFixed','log','return\x20(function()\x20','active','currentLadder','apply','\x0a\x20\x20','silver','playersD2','14720900szAXyR','winner-elo-change','#C0C0C0','change','clear','newWinnerRating','classList','color','constructor','grid','display','#50C878','add','loser-select','toString','style','winnerChange','values','exception','Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser','set','innerHTML','playersD3','sort','<option\x20value=\x22','dataset','match-result','\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a','\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20','3068556VPJnQs','3796828kfNYfK','pow','getElementById','loserChange','\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>','loser-new-elo','<option\x20value=\x22\x22>Error\x20loading\x20players</option>','\x20ladder','size','Player\x20not\x20found','newLoserRating','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','displayCalculationDetails','table','players','textContent','eloRating','\x20=\x20','1664660WygDLa','loser-name','144YtPEfi','setupEventListeners','displayMatchResult','11PKHrue','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','unranked','updateDropdowns'];a9_0x24f0=function(){return _0x3be8e2;};return a9_0x24f0();}const a9_0x32236b=(function(){let _0x223829=!![];return function(_0x24b961,_0x277237){const _0x233d25=_0x223829?function(){const _0x1e1515=a9_0x502f;if(_0x277237){const _0x24e3ba=_0x277237[_0x1e1515(0xd7)](_0x24b961,arguments);return _0x277237=null,_0x24e3ba;}}:function(){};return _0x223829=![],_0x233d25;};}()),a9_0x3fe04f=a9_0x32236b(this,function(){const _0x51bd51=a9_0x502f,_0x13a9c2=function(){const _0x17b422=a9_0x502f;let _0x508a3e;try{_0x508a3e=Function(_0x17b422(0xd4)+_0x17b422(0xc1)+');')();}catch(_0x204507){_0x508a3e=window;}return _0x508a3e;},_0x2c468c=_0x13a9c2(),_0x34ded5=_0x2c468c['console']=_0x2c468c[_0x51bd51(0x9d)]||{},_0x59b857=[_0x51bd51(0xd3),'warn',_0x51bd51(0xcb),_0x51bd51(0xb7),_0x51bd51(0xed),_0x51bd51(0x106),_0x51bd51(0xa6)];for(let _0x5efb26=0x0;_0x5efb26<_0x59b857['length'];_0x5efb26++){const _0x4019b7=a9_0x32236b[_0x51bd51(0xe3)]['prototype'][_0x51bd51(0x97)](a9_0x32236b),_0xd99912=_0x59b857[_0x5efb26],_0x39038d=_0x34ded5[_0xd99912]||_0x4019b7;_0x4019b7[_0x51bd51(0xb8)]=a9_0x32236b['bind'](a9_0x32236b),_0x4019b7[_0x51bd51(0xe9)]=_0x39038d[_0x51bd51(0xe9)]['bind'](_0x39038d),_0x34ded5[_0xd99912]=_0x4019b7;}});a9_0x3fe04f();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const _0x8021a2=a9_0x502f;this['currentLadder']='D1',this[_0x8021a2(0x107)]=new Map(),this[_0x8021a2(0x98)]();}[a9_0x2e9fd3(0x98)](){const _0x3c14d3=a9_0x2e9fd3;this[_0x3c14d3(0x10e)](),this[_0x3c14d3(0xce)]();}[a9_0x2e9fd3(0x10e)](){const _0x329a2a=a9_0x2e9fd3;document[_0x329a2a(0xc8)](_0x329a2a(0xb4))[_0x329a2a(0xa3)](_0x123ca4=>{const _0x4a686d=_0x329a2a;_0x123ca4[_0x4a686d(0xbb)]('click',_0xdeafa3=>{const _0xf3bfea=_0x4a686d;document[_0xf3bfea(0xc8)](_0xf3bfea(0xb4))[_0xf3bfea(0xa3)](_0x3f3e4f=>_0x3f3e4f[_0xf3bfea(0xe1)][_0xf3bfea(0xb0)](_0xf3bfea(0xd5))),_0xdeafa3[_0xf3bfea(0xba)][_0xf3bfea(0xe1)][_0xf3bfea(0xe7)]('active'),this['currentLadder']=_0xdeafa3['target'][_0xf3bfea(0xf4)][_0xf3bfea(0xb3)],this[_0xf3bfea(0xce)]();});}),document[_0x329a2a(0xfb)](_0x329a2a(0xb6))['addEventListener'](_0x329a2a(0x95),()=>{const _0x2a3885=_0x329a2a;this[_0x2a3885(0xce)]();}),document['getElementById'](_0x329a2a(0xab))['addEventListener']('change',()=>this[_0x329a2a(0xd1)]()),document[_0x329a2a(0xfb)](_0x329a2a(0xe8))[_0x329a2a(0xbb)](_0x329a2a(0xde),()=>this[_0x329a2a(0xd1)]());}async[a9_0x2e9fd3(0xce)](){const _0x4f2e2c=a9_0x2e9fd3;try{this[_0x4f2e2c(0x113)](_0x4f2e2c(0xa0));const _0x202f13=this[_0x4f2e2c(0xd6)]==='D1'?_0x4f2e2c(0x107):this[_0x4f2e2c(0xd6)]==='D2'?_0x4f2e2c(0xda):_0x4f2e2c(0xf1),_0x47c4f7=collection(db,_0x202f13),_0x1da79c=query(_0x47c4f7,orderBy(_0x4f2e2c(0x109),_0x4f2e2c(0xa5))),_0x5c5025=await getDocs(_0x1da79c);this['players'][_0x4f2e2c(0xdf)](),_0x5c5025[_0x4f2e2c(0xa3)](_0x29830b=>{const _0x1c58ad=_0x4f2e2c,_0x631a24=_0x29830b[_0x1c58ad(0xc4)]();_0x631a24[_0x1c58ad(0xb1)]&&this['players'][_0x1c58ad(0xef)](_0x631a24[_0x1c58ad(0xb1)],{'id':_0x29830b['id'],'username':_0x631a24[_0x1c58ad(0xb1)],'elo':parseInt(_0x631a24['eloRating'])||0x4b0,'position':_0x631a24['position']||0x3e7});}),this[_0x4f2e2c(0x113)](),console[_0x4f2e2c(0xd3)]('Loaded\x20'+this[_0x4f2e2c(0x107)][_0x4f2e2c(0x101)]+'\x20players\x20from\x20'+this[_0x4f2e2c(0xd6)]+_0x4f2e2c(0x100));}catch(_0x569049){console[_0x4f2e2c(0xb7)](_0x4f2e2c(0x99),_0x569049),this[_0x4f2e2c(0x113)](_0x4f2e2c(0xff));}}['updateDropdowns'](_0x43d86c=null){const _0x5dc849=a9_0x2e9fd3,_0x5f1436=document[_0x5dc849(0xfb)](_0x5dc849(0xab)),_0x1498c9=document[_0x5dc849(0xfb)](_0x5dc849(0xe8));if(_0x43d86c){_0x5f1436[_0x5dc849(0xf0)]=_0x43d86c,_0x1498c9[_0x5dc849(0xf0)]=_0x43d86c;return;}let _0x42a077=_0x5dc849(0xb9);const _0xc8eabb=Array['from'](this[_0x5dc849(0x107)][_0x5dc849(0xec)]())[_0x5dc849(0xf2)]((_0x19acab,_0x57ae7a)=>_0x57ae7a[_0x5dc849(0xcd)]-_0x19acab[_0x5dc849(0xcd)]);_0xc8eabb[_0x5dc849(0xa3)](_0x2e85e9=>{const _0x2f5491=_0x5dc849,_0x75e61d=this[_0x2f5491(0xbd)](_0x2e85e9[_0x2f5491(0xcd)]);_0x42a077+=_0x2f5491(0xf3)+_0x2e85e9[_0x2f5491(0xb1)]+_0x2f5491(0xca)+_0x2e85e9['elo']+_0x2f5491(0x9b)+_0x75e61d+_0x2f5491(0x111)+_0x2e85e9[_0x2f5491(0xb1)]+'\x20('+_0x2e85e9['elo']+_0x2f5491(0xfd);}),_0x5f1436['innerHTML']=_0x42a077,_0x1498c9['innerHTML']=_0x42a077;}[a9_0x2e9fd3(0xd1)](){const _0xc091c0=a9_0x2e9fd3,_0x1352e1=document[_0xc091c0(0xfb)]('winner-select'),_0x1173ce=document[_0xc091c0(0xfb)](_0xc091c0(0xe8)),_0x3e7bdd=_0x1352e1[_0xc091c0(0xc0)],_0x2bfeb9=_0x1173ce[_0xc091c0(0xc0)];if(!_0x3e7bdd||!_0x2bfeb9){document[_0xc091c0(0xfb)]('match-result')[_0xc091c0(0xea)][_0xc091c0(0xe5)]=_0xc091c0(0xad),document['getElementById'](_0xc091c0(0xa2))[_0xc091c0(0xea)][_0xc091c0(0xe5)]=_0xc091c0(0xad);return;}if(_0x3e7bdd===_0x2bfeb9){alert(_0xc091c0(0xee));return;}const _0x5127d8=this[_0xc091c0(0x107)][_0xc091c0(0xa9)](_0x3e7bdd),_0x2a1b65=this[_0xc091c0(0x107)][_0xc091c0(0xa9)](_0x2bfeb9);if(!_0x5127d8||!_0x2a1b65){console[_0xc091c0(0xb7)](_0xc091c0(0x102));return;}const _0x40b518=this['calculateELO'](_0x5127d8[_0xc091c0(0xcd)],_0x2a1b65[_0xc091c0(0xcd)]);this['displayMatchResult'](_0x5127d8,_0x2a1b65,_0x40b518),this[_0xc091c0(0x105)](_0x5127d8,_0x2a1b65,_0x40b518);}['calculateELO'](_0x2bbe8a,_0x3a00b6,_0x80017=0x20){const _0x3a196d=a9_0x2e9fd3,_0x3cfee7=0x1/(0x1+Math[_0x3a196d(0xfa)](0xa,(_0x3a00b6-_0x2bbe8a)/0x190)),_0x210688=0x1/(0x1+Math[_0x3a196d(0xfa)](0xa,(_0x2bbe8a-_0x3a00b6)/0x190)),_0x3a3876=_0x2bbe8a+_0x80017*(0x1-_0x3cfee7),_0x4e18e1=_0x3a00b6+_0x80017*(0x0-_0x210688);return{'winnerChange':Math['round'](_0x3a3876-_0x2bbe8a),'loserChange':Math[_0x3a196d(0x9e)](_0x4e18e1-_0x3a00b6),'newWinnerRating':Math[_0x3a196d(0x9e)](_0x3a3876),'newLoserRating':Math['round'](_0x4e18e1),'expectedScoreWinner':_0x3cfee7,'expectedScoreLoser':_0x210688};}[a9_0x2e9fd3(0x10f)](_0x550b58,_0x2a9b27,_0x6a962d){const _0xdc1995=a9_0x2e9fd3;document[_0xdc1995(0xfb)](_0xdc1995(0xc3))[_0xdc1995(0x108)]=_0x550b58['username'],document[_0xdc1995(0xfb)](_0xdc1995(0xcc))[_0xdc1995(0x108)]='Current\x20ELO:\x20'+_0x550b58[_0xdc1995(0xcd)],document['getElementById'](_0xdc1995(0xdc))[_0xdc1995(0x108)]='+'+_0x6a962d[_0xdc1995(0xeb)],document[_0xdc1995(0xfb)](_0xdc1995(0x9a))['textContent']=_0xdc1995(0xc7)+_0x6a962d['newWinnerRating'],document['getElementById'](_0xdc1995(0x10c))[_0xdc1995(0x108)]=_0x2a9b27[_0xdc1995(0xb1)],document[_0xdc1995(0xfb)](_0xdc1995(0xb2))['textContent']='Current\x20ELO:\x20'+_0x2a9b27['elo'],document['getElementById'](_0xdc1995(0xa7))['textContent']=''+_0x6a962d['loserChange'],document[_0xdc1995(0xfb)](_0xdc1995(0xfe))['textContent']=_0xdc1995(0xc7)+_0x6a962d[_0xdc1995(0x103)];const _0x2910d4=this[_0xdc1995(0xaa)](_0x550b58['elo']),_0xf0f9bb=this[_0xdc1995(0xaa)](_0x2a9b27[_0xdc1995(0xcd)]);document[_0xdc1995(0xfb)]('winner-name')['style'][_0xdc1995(0xe2)]=_0x2910d4,document[_0xdc1995(0xfb)]('loser-name')[_0xdc1995(0xea)]['color']=_0xf0f9bb,document[_0xdc1995(0xfb)](_0xdc1995(0xf5))['style'][_0xdc1995(0xe5)]=_0xdc1995(0xe4);}[a9_0x2e9fd3(0x105)](_0x502769,_0x161897,_0xbe56ee){const _0xbfe7d2=a9_0x2e9fd3,_0x4e0ef0='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+_0x502769['username']+':\x20'+_0x502769[_0xbfe7d2(0xcd)]+_0xbfe7d2(0xd8)+_0x161897['username']+':\x20'+_0x161897[_0xbfe7d2(0xcd)]+_0xbfe7d2(0xf7)+_0x502769[_0xbfe7d2(0xb1)]+':\x20'+_0xbe56ee[_0xbfe7d2(0xd0)][_0xbfe7d2(0xd2)](0x3)+'\x20('+(_0xbe56ee[_0xbfe7d2(0xd0)]*0x64)[_0xbfe7d2(0xd2)](0x1)+_0xbfe7d2(0xa4)+_0x161897[_0xbfe7d2(0xb1)]+':\x20'+_0xbe56ee[_0xbfe7d2(0x9f)]['toFixed'](0x3)+'\x20('+(_0xbe56ee[_0xbfe7d2(0x9f)]*0x64)[_0xbfe7d2(0xd2)](0x1)+'%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'+_0x502769['username']+':\x20'+_0x502769[_0xbfe7d2(0xcd)]+'\x20+\x20'+_0xbe56ee[_0xbfe7d2(0xeb)]+_0xbfe7d2(0x10a)+_0xbe56ee[_0xbfe7d2(0xe0)]+_0xbfe7d2(0xd8)+_0x161897['username']+':\x20'+_0x161897[_0xbfe7d2(0xcd)]+'\x20+\x20'+_0xbe56ee[_0xbfe7d2(0xfc)]+_0xbfe7d2(0x10a)+_0xbe56ee[_0xbfe7d2(0x103)]+_0xbfe7d2(0xf6)+(_0xbe56ee[_0xbfe7d2(0xeb)]>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(_0xbe56ee[_0xbfe7d2(0xeb)]<0x5?_0xbfe7d2(0xbe):'')+_0xbfe7d2(0x104);document[_0xbfe7d2(0xfb)](_0xbfe7d2(0xaf))[_0xbfe7d2(0x108)]=_0x4e0ef0,document['getElementById'](_0xbfe7d2(0xa2))[_0xbfe7d2(0xea)]['display']=_0xbfe7d2(0xc9);}['getELOColor'](_0x2e6411){const _0x19d096=a9_0x2e9fd3;if(_0x2e6411>=0x7d0)return _0x19d096(0xe6);else{if(_0x2e6411>=0x708)return _0x19d096(0xc6);else{if(_0x2e6411>=0x640)return _0x19d096(0xdd);else{if(_0x2e6411>=0x578)return'#CD7F32';else return'#808080';}}}}['getELORankClass'](_0x14e583){const _0x357e4a=a9_0x2e9fd3;if(_0x14e583>=0x7d0)return _0x357e4a(0xa8);else{if(_0x14e583>=0x708)return _0x357e4a(0xb5);else{if(_0x14e583>=0x640)return _0x357e4a(0xd9);else{if(_0x14e583>=0x578)return _0x357e4a(0xae);else return _0x357e4a(0x112);}}}}}document['addEventListener'](a9_0x2e9fd3(0xac),()=>{const _0x2e1058=a9_0x2e9fd3;document[_0x2e1058(0xfb)](_0x2e1058(0xc5))&&new ELOCalculator();});