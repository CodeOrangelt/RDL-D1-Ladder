const a31_0x4028d9=a31_0x4b5f,a31_0xa71f0d=(function(){let _0x4b8185=!![];return function(_0x53de49,_0x1d9f90){const _0x381cbf=_0x4b8185?function(){const _0x3cf542=a31_0x4b5f;if(_0x1d9f90){const _0x44901a=_0x1d9f90[_0x3cf542(0x139)](_0x53de49,arguments);return _0x1d9f90=null,_0x44901a;}}:function(){};return _0x4b8185=![],_0x381cbf;};}()),a31_0x100a5e=a31_0xa71f0d(this,function(){const _0xbfcf8=a31_0x4b5f;let _0x3f9f2f;try{const _0x42675b=Function(_0xbfcf8(0x12f)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3f9f2f=_0x42675b();}catch(_0x72d1c7){_0x3f9f2f=window;}const _0x160082=_0x3f9f2f[_0xbfcf8(0x12a)]=_0x3f9f2f[_0xbfcf8(0x12a)]||{},_0x43d552=[_0xbfcf8(0x124),'warn','info','error','exception','table','trace'];for(let _0x237eb7=0x0;_0x237eb7<_0x43d552['length'];_0x237eb7++){const _0x2f6c6a=a31_0xa71f0d[_0xbfcf8(0x13f)]['prototype']['bind'](a31_0xa71f0d),_0x272c96=_0x43d552[_0x237eb7],_0x2c7c86=_0x160082[_0x272c96]||_0x2f6c6a;_0x2f6c6a['__proto__']=a31_0xa71f0d['bind'](a31_0xa71f0d),_0x2f6c6a['toString']=_0x2c7c86['toString']['bind'](_0x2c7c86),_0x160082[_0x272c96]=_0x2f6c6a;}});a31_0x100a5e();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a31_0x4b5f(_0x5c6c94,_0xee4b27){const _0x100a5e=a31_0x2f64();return a31_0x4b5f=function(_0xa71f0d,_0x30d279){_0xa71f0d=_0xa71f0d-0x10e;let _0x2f641e=_0x100a5e[_0xa71f0d];return _0x2f641e;},a31_0x4b5f(_0x5c6c94,_0xee4b27);}import a31_0x19cc02 from'./firebase-idle-wrapper.js';function a31_0x2f64(){const _0x38b9dc=['totalKills','error','forEach','innerHTML','winnerScore','previousElo','(Equipped)','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','string','playersD3','newElo','D3:\x20Error\x20fetching\x20ELO\x20history:','D3:\x20Fallback\x20query\x20failed:','elo','join','winnerUsername','data','0.85em','set','username','%</td>\x0a\x20\x20\x20\x20</tr>','country','log','visible','totalDeaths','length','position','bold','console','D3:\x20Error\x20fetching\x20tokens:','now','td:nth-child(3)','loserUsername','return\x20(function()\x20','get','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','seconds','tokenImage','timestamp','querySelector','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','apply','eloHistory','style','totalMatches','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','constructor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','player','loserScore','Error\x20loading\x20D3\x20ladder:','has','textContent','map','function','#ladder-d3\x20tbody','sort','change','refreshLadderDisplayD3','playerId','catch'];a31_0x2f64=function(){return _0x38b9dc;};return a31_0x2f64();}import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const styleEl=document['createElement']('style');styleEl[a31_0x4028d9(0x145)]='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x4a18=![]){const _0x439c7a=a31_0x4028d9,_0x4847d5=document[_0x439c7a(0x135)]('#ladder-d3\x20tbody');if(!_0x4847d5){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x4847d5['innerHTML']=_0x439c7a(0x13d);try{const _0x5dce12=Date[_0x439c7a(0x12c)]();if(!_0x4a18&&playerCacheD3['data']&&_0x5dce12-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3[_0x439c7a(0x11e)]);return;}const _0x5a7112=collection(db,'playersD3'),_0xe3267f=await getDocs(_0x5a7112),_0x614f15=[];_0xe3267f[_0x439c7a(0x110)](_0x13091c=>{const _0x3e0088=_0x439c7a,_0x5ae6b6=_0x13091c[_0x3e0088(0x11e)]();_0x5ae6b6['username']&&_0x614f15['push']({..._0x5ae6b6,'id':_0x13091c['id'],'elo':_0x5ae6b6['eloRating']||0x0,'position':_0x5ae6b6['position']||Number['MAX_SAFE_INTEGER']});});const _0x2b329e=collection(db,'userProfiles'),_0x44697e=await getDocs(_0x2b329e),_0x21dcf3=new Map();_0x44697e[_0x439c7a(0x110)](_0x5d3258=>{const _0x3d32e9=_0x439c7a,_0x224453=_0x5d3258[_0x3d32e9(0x11e)]();_0x224453['username']&&_0x21dcf3['set'](_0x224453[_0x3d32e9(0x121)]['toLowerCase'](),_0x224453);});for(const _0x3e5556 of _0x614f15){const _0x37e9d3=_0x3e5556[_0x439c7a(0x121)]['toLowerCase']();if(_0x21dcf3['has'](_0x37e9d3)){const _0x5d28de=_0x21dcf3[_0x439c7a(0x130)](_0x37e9d3);_0x5d28de['country']&&(_0x3e5556['country']=_0x5d28de['country']['toLowerCase']());}}const _0x344966=_0x614f15['map'](_0x3a8663=>_0x3a8663['username']),_0x32e4d4=await fetchBatchMatchStatsD3(_0x344966);_0x614f15['sort']((_0x393118,_0x60e822)=>{const _0x23e43b=_0x439c7a,_0x1350b2=_0x32e4d4[_0x23e43b(0x130)](_0x393118['username'])?.[_0x23e43b(0x13c)]||0x0,_0x358b0b=_0x32e4d4['get'](_0x60e822['username'])?.[_0x23e43b(0x13c)]||0x0;if(_0x1350b2===0x0!==(_0x358b0b===0x0))return _0x1350b2===0x0?0x1:-0x1;return(_0x393118['position']||0x3e7)-(_0x60e822['position']||0x3e7);}),_0x614f15['forEach']((_0x4c7914,_0x126157)=>{const _0x4b9528=_0x439c7a;_0x4c7914[_0x4b9528(0x128)]=_0x126157+0x1;}),playerCacheD3['data']=_0x614f15,playerCacheD3[_0x439c7a(0x134)]=_0x5dce12,updateLadderDisplayD3(_0x614f15);}catch(_0x1fb5e6){console['error'](_0x439c7a(0x143),_0x1fb5e6),_0x4847d5[_0x439c7a(0x111)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x1fb5e6['message']+_0x439c7a(0x138);}}function calculateStreakDays(_0x181ddf){if(!_0x181ddf)return 0x0;const _0x10a4ca=_0x181ddf['toDate'](),_0x309512=new Date(),_0x14a46b=Math['abs'](_0x309512-_0x10a4ca);return Math['ceil'](_0x14a46b/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x158307,_0x446358){const _0x287e09=a31_0x4028d9;try{const _0x20548d=collection(db,_0x287e09(0x117)),_0x33dced=await getDocs(_0x20548d),_0x3154bb=[];_0x33dced['forEach'](_0x953f45=>{_0x3154bb['push']({'id':_0x953f45['id'],..._0x953f45['data']()});});const _0x1a23e4=_0x3154bb['find'](_0xf0577a=>_0xf0577a['username']===_0x158307),_0x2e224f=_0x3154bb['find'](_0x1624db=>_0x1624db['username']===_0x446358);if(!_0x1a23e4||!_0x2e224f){console[_0x287e09(0x10f)]('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x1a23e4['position']>_0x2e224f['position']){const _0x10a152=_0x2e224f[_0x287e09(0x128)];for(const _0x34638b of _0x3154bb){_0x34638b['position']>=_0x2e224f['position']&&_0x34638b['position']<_0x1a23e4[_0x287e09(0x128)]&&_0x34638b[_0x287e09(0x121)]!==_0x158307&&await updateDoc(doc(db,'playersD3',_0x34638b['id']),{'position':_0x34638b['position']+0x1});}await updateDoc(doc(db,_0x287e09(0x117),_0x1a23e4['id']),{'position':_0x10a152});if(_0x10a152===0x1){const _0x1e719c=doc(db,'playersD3',_0x1a23e4['id']),_0x39b2be=await getDoc(_0x1e719c);!_0x39b2be['data']()['firstPlaceDate']&&await updateDoc(_0x1e719c,{'firstPlaceDate':Timestamp[_0x287e09(0x12c)]()});}if(_0x2e224f['position']===0x1){const _0x149185=doc(db,'playersD3',_0x2e224f['id']);await updateDoc(_0x149185,{'firstPlaceDate':null});}playerCacheD3['timestamp']=0x0;}}catch(_0x2ebc8c){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x2ebc8c);}}async function updateLadderDisplayD3(_0x30f1ab){const _0x447e4c=a31_0x4028d9;_0x30f1ab[_0x447e4c(0x149)]((_0x141399,_0x5b4638)=>_0x141399['position']-_0x5b4638[_0x447e4c(0x128)]);const _0x2c44c6=document['querySelector'](_0x447e4c(0x148));if(!_0x2c44c6)return;_0x2c44c6['innerHTML']='';const _0x419fd2=_0x30f1ab['map'](_0x482fe4=>_0x482fe4['username']),_0x1cdfbf=await fetchBatchMatchStatsD3(_0x419fd2);let _0x40ee8d=new Map();try{typeof clearTokenCache===_0x447e4c(0x147)&&clearTokenCache(),_0x40ee8d=await getTokensByUsernames(_0x419fd2);}catch(_0x163e3f){console['error'](_0x447e4c(0x12b),_0x163e3f);}const _0x4eab43=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x4eab43&&(_0x4eab43['innerHTML']=_0x447e4c(0x140));const _0x176e6d=_0x30f1ab[_0x447e4c(0x146)](_0x25299d=>{const _0x58b3cd=_0x447e4c,_0x34dab2=_0x1cdfbf['get'](_0x25299d[_0x58b3cd(0x121)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x5ad5ca=_0x40ee8d['get'](_0x25299d[_0x58b3cd(0x121)])||[],_0x552e4d=getPrimaryDisplayToken(_0x5ad5ca);return createPlayerRowD3(_0x25299d,_0x34dab2,_0x552e4d);})[_0x447e4c(0x11c)]('');_0x2c44c6['innerHTML']=_0x176e6d,getPlayersLastEloChangesD3(_0x419fd2)['then'](_0x2c5788=>{const _0x148441=_0x447e4c,_0x58bf7d=new Map();_0x2c44c6['querySelectorAll']('tr')[_0x148441(0x110)]((_0x52d370,_0x5d4c5a)=>{const _0x5594d2=_0x148441;_0x5d4c5a<_0x419fd2['length']&&_0x58bf7d[_0x5594d2(0x120)](_0x419fd2[_0x5d4c5a],_0x52d370);}),_0x2c5788[_0x148441(0x110)]((_0x5e70fa,_0x2a6e2b)=>{const _0x118f71=_0x148441,_0x27fae2=_0x58bf7d['get'](_0x2a6e2b);if(_0x27fae2&&_0x5e70fa!==0x0){const _0x3d6bc7=_0x27fae2['querySelector'](_0x118f71(0x12d));if(_0x3d6bc7){const _0x1d4f9a=_0x5e70fa>0x0?'+'+_0x5e70fa:''+_0x5e70fa,_0x4d2de7=_0x3d6bc7['querySelector']('.trend-indicator');_0x4d2de7&&(_0x4d2de7['textContent']=_0x1d4f9a,_0x4d2de7['style']['color']=_0x5e70fa>0x0?'#4CAF50':'#F44336',_0x4d2de7['style']['fontWeight']=_0x118f71(0x129),_0x4d2de7[_0x118f71(0x13b)]['fontSize']=_0x118f71(0x11f),_0x4d2de7['style']['display']='inline',_0x4d2de7['style']['visibility']=_0x118f71(0x125),_0x4d2de7['style']['opacity']='1');}}});})[_0x447e4c(0x14d)](_0x44c6e1=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x44c6e1));}async function fetchBatchMatchStatsD3(_0x3f3d77){const _0x2af459=a31_0x4028d9,_0x3c6f33=new Map();try{_0x3f3d77[_0x2af459(0x110)](_0x2864c4=>{const _0x43df27=_0x2af459;_0x3c6f33[_0x43df27(0x120)](_0x2864c4,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x38f911=collection(db,'approvedMatchesD3'),_0x578163=await getDocs(_0x38f911);_0x578163['forEach'](_0x32f0a1=>{const _0x43f3b6=_0x2af459,_0x62936b=_0x32f0a1['data'](),_0x21ce31=_0x62936b[_0x43f3b6(0x11d)],_0x4ba61e=_0x62936b[_0x43f3b6(0x12e)];if(_0x3f3d77['includes'](_0x21ce31)){const _0x2a74ab=_0x3c6f33['get'](_0x21ce31);_0x2a74ab['wins']++,_0x2a74ab[_0x43f3b6(0x13c)]++,_0x2a74ab['totalKills']+=parseInt(_0x62936b['winnerScore'])||0x0,_0x2a74ab['totalDeaths']+=parseInt(_0x62936b[_0x43f3b6(0x142)])||0x0;}if(_0x3f3d77['includes'](_0x4ba61e)){const _0x3923de=_0x3c6f33['get'](_0x4ba61e);_0x3923de['losses']++,_0x3923de['totalMatches']++,_0x3923de[_0x43f3b6(0x10e)]+=parseInt(_0x62936b['loserScore'])||0x0,_0x3923de[_0x43f3b6(0x126)]+=parseInt(_0x62936b[_0x43f3b6(0x112)])||0x0;}}),_0x3f3d77['forEach'](_0x44fdf0=>{const _0x34eba6=_0x2af459,_0x65da92=_0x3c6f33['get'](_0x44fdf0);_0x65da92['kda']=_0x65da92['totalDeaths']>0x0?(_0x65da92[_0x34eba6(0x10e)]/_0x65da92['totalDeaths'])['toFixed'](0x2):_0x65da92['totalKills'],_0x65da92['winRate']=_0x65da92[_0x34eba6(0x13c)]>0x0?(_0x65da92['wins']/_0x65da92['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x1c621d){console['error']('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x1c621d);}return _0x3c6f33;}function createPlayerRowD3(_0x306227,_0x14954c,_0x4ca31e){const _0x180369=a31_0x4028d9,_0x4eb8c0=parseFloat(_0x306227[_0x180369(0x11b)])||0x0;let _0x258fe5='gray';if(_0x4eb8c0>=0x7d0)_0x258fe5='#50C878';else{if(_0x4eb8c0>=0x708)_0x258fe5='#FFD700';else{if(_0x4eb8c0>=0x640)_0x258fe5='#b9f1fc';else _0x4eb8c0>=0x578&&(_0x258fe5='#CD7F32');}}let _0x5ad3f9='';_0x306227[_0x180369(0x123)]&&(_0x5ad3f9='<img\x20src=\x22../images/flags/'+_0x306227['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x306227['country']+_0x180369(0x137));let _0xdc8c47='';return _0x4ca31e&&(_0xdc8c47='<img\x20src=\x22'+_0x4ca31e[_0x180369(0x133)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4ca31e['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x4ca31e['tokenName']+'\x20'+(_0x4ca31e['equipped']?_0x180369(0x114):'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x180369(0x115)+_0x306227[_0x180369(0x128)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x306227['username'])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x258fe5+_0x180369(0x13e)+_0x306227['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5ad3f9+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xdc8c47+_0x180369(0x136)+_0x258fe5+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x4eb8c0+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x14954c['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x14954c['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x14954c['losses']+_0x180369(0x131)+_0x14954c['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x14954c['winRate']+_0x180369(0x122);}async function getPlayersLastEloChangesD3(_0x536d43){const _0x346759=a31_0x4028d9,_0x923632=new Map();_0x536d43['forEach'](_0x198c8a=>_0x923632['set'](_0x198c8a,0x0));try{const _0x504163=new Map(),_0x15771c=await getDocs(collection(db,'playersD3'));_0x15771c['forEach'](_0x183ab6=>{const _0x272d93=a31_0x4b5f,_0x491b1e=_0x183ab6['data']();_0x491b1e[_0x272d93(0x121)]&&_0x504163['set'](_0x183ab6['id'],_0x491b1e['username']);});const _0xe2364f=collection(db,'eloHistoryD3'),_0x231f9b=query(_0xe2364f,orderBy('timestamp','desc'),limit(0x64)),_0x19ef6d=await getDocs(_0x231f9b),_0x22a6cc=new Map();_0x19ef6d['forEach'](_0x4833f7=>{const _0x25c227=a31_0x4b5f,_0x416ba2=_0x4833f7['data']();let _0x1084e4=null;if(_0x416ba2[_0x25c227(0x121)])_0x1084e4=_0x416ba2[_0x25c227(0x121)];else{if(_0x416ba2['playerUsername'])_0x1084e4=_0x416ba2['playerUsername'];else{if(_0x416ba2['player']&&typeof _0x416ba2['player']===_0x25c227(0x116))_0x1084e4=_0x416ba2[_0x25c227(0x141)];else{if(_0x416ba2[_0x25c227(0x141)]&&_0x504163['has'](_0x416ba2[_0x25c227(0x141)]))_0x1084e4=_0x504163['get'](_0x416ba2['player']);else _0x416ba2[_0x25c227(0x14c)]&&_0x504163[_0x25c227(0x144)](_0x416ba2['playerId'])&&(_0x1084e4=_0x504163['get'](_0x416ba2['playerId']));}}}_0x1084e4&&_0x536d43['includes'](_0x1084e4)&&(!_0x22a6cc['has'](_0x1084e4)&&_0x22a6cc[_0x25c227(0x120)](_0x1084e4,[]),_0x22a6cc['get'](_0x1084e4)['push']({..._0x416ba2,'timestamp':_0x416ba2[_0x25c227(0x134)]?.[_0x25c227(0x132)]||0x0}));}),_0x22a6cc['forEach']((_0x3c39cc,_0x2fcf44)=>{const _0x2bbc87=a31_0x4b5f;if(_0x3c39cc[_0x2bbc87(0x127)]>0x0){_0x3c39cc['sort']((_0x3228af,_0x4630fb)=>_0x4630fb[_0x2bbc87(0x134)]-_0x3228af['timestamp']);const _0x43748c=_0x3c39cc['find'](_0x2462bc=>_0x2462bc[_0x2bbc87(0x14a)]!==undefined||_0x2462bc[_0x2bbc87(0x118)]!==undefined&&_0x2462bc['previousElo']!==undefined);if(_0x43748c){let _0x2a02c1;if(_0x43748c['change']!==undefined)_0x2a02c1=_0x43748c['change'];else _0x43748c[_0x2bbc87(0x118)]!==undefined&&_0x43748c[_0x2bbc87(0x113)]!==undefined&&(_0x2a02c1=_0x43748c['newElo']-_0x43748c['previousElo']);_0x2a02c1!==undefined&&_0x923632[_0x2bbc87(0x120)](_0x2fcf44,_0x2a02c1);}}});if(_0x22a6cc['size']===0x0){const _0x280ffd=collection(db,_0x346759(0x13a)),_0x31c5fb=query(_0x280ffd,where('gameMode','==','D3'),orderBy('timestamp','desc'),limit(0x32));try{const _0x4430bc=await getDocs(_0x31c5fb);_0x4430bc[_0x346759(0x110)](_0x59a59e=>{const _0x11a0d6=_0x346759,_0x43c075=_0x59a59e['data']();let _0x495913=_0x43c075['username']||_0x43c075['playerUsername'];!_0x495913&&_0x43c075['player']&&_0x504163['has'](_0x43c075['player'])&&(_0x495913=_0x504163['get'](_0x43c075[_0x11a0d6(0x141)]));if(_0x495913&&_0x536d43['includes'](_0x495913)){const _0x163eea=_0x43c075['change']||(_0x43c075['newElo']!==undefined&&_0x43c075[_0x11a0d6(0x113)]!==undefined?_0x43c075['newElo']-_0x43c075['previousElo']:0x0);_0x163eea!==0x0&&_0x923632[_0x11a0d6(0x120)](_0x495913,_0x163eea);}});}catch(_0xe2b60e){console['error'](_0x346759(0x11a),_0xe2b60e);}}}catch(_0x45713d){console[_0x346759(0x10f)](_0x346759(0x119),_0x45713d);}return _0x923632;}window[a31_0x4028d9(0x14b)]=function(_0x59988d=!![]){const _0x5b34eb=a31_0x4028d9;typeof displayLadderD3===_0x5b34eb(0x147)?displayLadderD3(_0x59988d):console['warn']('displayLadderD3\x20function\x20not\x20available');};export{displayLadderD3,updatePlayerPositions};