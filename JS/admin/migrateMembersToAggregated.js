(function(a,b){const A=a1d,c=a();while(!![]){try{const d=-parseInt(A(0x1f6))/0x1*(parseInt(A(0x1c4))/0x2)+parseInt(A(0x1e1))/0x3*(-parseInt(A(0x1ec))/0x4)+-parseInt(A(0x1e5))/0x5*(parseInt(A(0x1ed))/0x6)+parseInt(A(0x1e8))/0x7*(-parseInt(A(0x1cd))/0x8)+-parseInt(A(0x1c8))/0x9*(-parseInt(A(0x1d6))/0xa)+parseInt(A(0x1ee))/0xb*(parseInt(A(0x1c6))/0xc)+-parseInt(A(0x1fd))/0xd*(-parseInt(A(0x1fe))/0xe);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a1c,0xdffe2));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);async function migrateToAggregatedMembers(){const C=a1d,c=(function(){let e=!![];return function(f,g){const h=e?function(){if(g){const i=g['apply'](f,arguments);return g=null,i;}}:function(){};return e=![],h;};}()),d=c(this,function(){const B=a1d;let f;try{const i=Function(B(0x1d8)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');f=i();}catch(j){f=window;}const g=f[B(0x1f3)]=f['console']||{},h=[B(0x1d2),'warn','info',B(0x1e3),'exception',B(0x1c5),B(0x1cb)];for(let k=0x0;k<h['length'];k++){const l=c['constructor']['prototype'][B(0x1d7)](c),m=h[k],n=g[m]||l;l[B(0x1da)]=c[B(0x1d7)](c),l[B(0x1e0)]=n[B(0x1e0)]['bind'](n),g[m]=l;}});d(),console['log'](C(0x1e2));try{console['log'](C(0x1d3));const [e,f,g,h,i]=await Promise[C(0x1d4)]([getDocs(collection(db,C(0x1ce))),getDocs(collection(db,'players')),getDocs(collection(db,C(0x1df))),getDocs(collection(db,C(0x1de))),getDocs(collection(db,'nonParticipants'))]);console['log'](C(0x1e7)+e[C(0x1cf)]+C(0x1d0)+f['size']+'\x20D1,\x20'+g['size']+'\x20D2,\x20'+h[C(0x1cf)]+C(0x1fc)+i[C(0x1cf)]+C(0x1eb));const j=new Map();e['forEach'](q=>{j['set'](q['id'],q['data']());});const k=new Map(),l=(q,r)=>{q['forEach'](s=>{const D=a1d,t=s['data'](),u=s['id'];!k[D(0x1f2)](u)&&k['set'](u,{'userId':u,'username':t['username']||t[D(0x1cc)]||'Unknown','ladders':[],'isNonParticipant':![]});const v=k['get'](u);v['ladders']['push']({'ladder':r,'elo':t['eloRating']||t['elo']||0x4b0,'active':t[D(0x1c2)]!==![]});});};l(f,'D1'),l(g,'D2'),l(h,'D3'),i['forEach'](q=>{const E=C,r=q['data'](),s=q['id'];!k['has'](s)&&(r[E(0x1ca)]||r['name'])&&k[E(0x1c3)](s,{'userId':s,'username':r[E(0x1ca)]||r[E(0x1cc)],'ladders':[],'isNonParticipant':!![]});}),console['log']('⚙️\x20Processed\x20'+k[C(0x1cf)]+C(0x1e9)),console['log']('💾\x20Writing\x20aggregated\x20data...');const m=[];let n=writeBatch(db),o=0x0,p=0x0;k['forEach']((q,r)=>{const F=C,s=j[F(0x1f5)](r)||{};let t=0x0,u=null;if(q[F(0x1e6)][F(0x1d1)]>0x0){const x=q[F(0x1e6)][F(0x1ef)]((y,z)=>z['elo']-y['elo']);t=x[0x0]['elo'],u=x[0x0][F(0x1dc)];}const v={'userId':r,'username':q[F(0x1ca)],'profileImageUrl':s[F(0x1e4)]||null,'country':s[F(0x1fb)]||null,'motto':s[F(0x1f8)]||null,'favoriteMap':s['favoriteMap']||null,'favoriteWeapon':s[F(0x1f4)]||null,'isNonParticipant':q[F(0x1c9)],'ladders':q[F(0x1e6)],'primaryLadder':u,'highestElo':t,'rank':getPlayerRank(t),'lastUpdated':new Date(),'migrationTimestamp':new Date()[F(0x1f1)]()},w=doc(collection(db,'aggregatedMembers'),r);n[F(0x1c3)](w,v),o++,p++,o>=0x1c2&&(m['push'](n['commit']()),n=writeBatch(db),o=0x0,console[F(0x1d2)](F(0x1f0)+m['length']+'\x20('+p+F(0x1dd)));}),o>0x0&&m[C(0x1d9)](n[C(0x1fa)]()),console[C(0x1d2)](C(0x1f7)+m[C(0x1d1)]+C(0x1db)),await Promise[C(0x1d4)](m),console['log']('🎉\x20Successfully\x20migrated\x20'+k[C(0x1cf)]+C(0x1f9)),console[C(0x1d2)]('💡\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!');}catch(q){console[C(0x1e3)]('❌\x20Migration\x20failed:',q),q['code']===C(0x1c7)&&console[C(0x1e3)]('🔒\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.');}}function a1c(){const H=['8j+tPsbgzxrJAgLUzYbHBgWGy29SBgvJDgLVBNmUlI4','ywXS','yNjVBNPL','ndeZnZiWC1PPv2Te','yMLUza','CMv0DxjUicHMDw5JDgLVBIGPia','ChvZAa','x19WCM90B19F','igjHDgnOzxmUlI4','BgfKzgvY','ig1LBwjLCNmGChjVy2vZC2vKkq','CgXHEwvYC0qZ','CgXHEwvYC0qY','Dg9tDhjPBMC','m3nQCgnksq','8j+uHcbtDgfYDgLUzYbTAwDYyxrPB24GDg8GywDNCMvNyxrLzcbTzw1IzxjZlI4U','zxjYB3i','ChjVzMLSzuLTywDLvxjS','nZKXnZuXnvfADevLyG','BgfKzgvYCW','4PYfierHDgeGzMv0y2HLzdOG','mta2nJfrr0Teq2S','ihvUAxf1zsbTzw1IzxjZ','z29Sza','ig5VBI1Wyxj0AwnPCgfUDhm','mZGZnZC4oen2sxf0tW','nLLhC1PWra','ntm3nJCXmNP3EfrIsq','C29YDa','8j+tPIbqCMvWyxjLzcbIyxrJAca','Dg9ju09tDhjPBMC','AgfZ','y29UC29Szq','zMf2B3jPDgvxzwfWB24','z2v0','mxj4zLDZyW','8j+AGcbfEgvJDxrPBMCG','Bw90Dg8','ig1LBwjLCNmGDg8GywDNCMvNyxrLzcbJB2XSzwn0Aw9Uiq','y29TBwL0','y291BNrYEq','ieqZlca','nJmYmJeYndLrEgngCKK','mtrPr09JAgm','ywn0AxzL','C2v0','mZmZmZi3og9vshP4ua','DgfIBgu','mtjvuw5yyMm','CgvYBwLZC2LVBI1Kzw5Pzwq','mtHeDxDwwuq','AxnoB25qyxj0AwnPCgfUDa','DxnLCM5HBwu','DhjHy2u','BMfTzq','mtyXnKPMyu5bvq','DxnLCLbYB2zPBgvZ','C2L6zq','ihbYB2zPBgvZlca','BgvUz3rO','Bg9N'];a1c=function(){return H;};return a1c();}function a1d(a,b){const c=a1c();return a1d=function(d,e){d=d-0x1c2;let f=c[d];if(a1d['yMeIeB']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a1d['jgBcrN']=g,a=arguments,a1d['yMeIeB']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a1d['jgBcrN'](f),a[i]=f):f=j,f;},a1d(a,b);}function getPlayerRank(a){const G=a1d;if(a>=0x7d0)return'emerald';if(a>=0x708)return G(0x1ea);if(a>=0x640)return'silver';if(a>=0x578)return G(0x1d5);return'unranked';}migrateToAggregatedMembers();