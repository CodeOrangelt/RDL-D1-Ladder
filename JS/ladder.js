const a27_0x12c31=a27_0x1e88,a27_0x1a0ec3=(function(){let _0x1ab02c=!![];return function(_0x5f255b,_0x27456b){const _0x15b82c=_0x1ab02c?function(){if(_0x27456b){const _0xeb02fe=_0x27456b['apply'](_0x5f255b,arguments);return _0x27456b=null,_0xeb02fe;}}:function(){};return _0x1ab02c=![],_0x15b82c;};}()),a27_0x104cca=a27_0x1a0ec3(this,function(){const _0x1482ac=a27_0x1e88,_0x47a6c9=function(){let _0x3de2d6;try{_0x3de2d6=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x29fd75){_0x3de2d6=window;}return _0x3de2d6;},_0x1fea27=_0x47a6c9(),_0xae8b2c=_0x1fea27['console']=_0x1fea27['console']||{},_0x1d5052=['log',_0x1482ac(0x242),'info','error',_0x1482ac(0x1db),'table','trace'];for(let _0x1c319c=0x0;_0x1c319c<_0x1d5052['length'];_0x1c319c++){const _0x134b15=a27_0x1a0ec3[_0x1482ac(0x22a)]['prototype'][_0x1482ac(0x207)](a27_0x1a0ec3),_0x51d972=_0x1d5052[_0x1c319c],_0x1248b5=_0xae8b2c[_0x51d972]||_0x134b15;_0x134b15[_0x1482ac(0x239)]=a27_0x1a0ec3['bind'](a27_0x1a0ec3),_0x134b15['toString']=_0x1248b5['toString']['bind'](_0x1248b5),_0xae8b2c[_0x51d972]=_0x134b15;}});a27_0x104cca();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x4ad8a7=0x1){const _0x2a41b8=a27_0x1e88;try{document['getElementById'](_0x2a41b8(0x1e0))[_0x2a41b8(0x23c)]['display']='block';const _0x353c74=await getLadderData(_0x4ad8a7);_0x353c74['sort']((_0xb76aeb,_0x1ea54a)=>_0x1ea54a['elo']-_0xb76aeb['elo']);const _0x4b36ec=_0x353c74['map'](_0xa4fb5d=>_0xa4fb5d['id']),_0x590d34=await getEloHistoryBatch(_0x4b36ec,_0x4ad8a7),_0xd13458=_0x353c74['map']((_0x290c0b,_0x5a0342)=>{const _0x3111d2=_0x590d34[_0x290c0b['id']]||[],_0x2411c3=_0x3111d2['sort']((_0x47b643,_0x2a5019)=>new Date(_0x2a5019['date'])-new Date(_0x47b643['date']))['slice'](0x0,0x5);return{..._0x290c0b,'rank':_0x5a0342+0x1,'lastMatches':_0x2411c3,'recentActivity':_0x2411c3['length']>0x0};});renderLadder(_0xd13458),setupRealTimeUpdates(_0x4ad8a7);}catch(_0x3eb3de){console['error']('Error\x20loading\x20ladder\x20data:',_0x3eb3de),document['getElementById']('error-message')['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById']('loading-indicator')['style']['display']=_0x2a41b8(0x246);}}function setupRealTimeUpdates(_0x49d97b=0x1){const _0x68b250=a27_0x1e88;activeListeners['forEach'](_0x4cea96=>_0x4cea96()),activeListeners=[];const _0x3999ed=_0x49d97b===0x1?'players':_0x68b250(0x22e)+_0x49d97b,_0x4f65f6=_0x49d97b===0x1?_0x68b250(0x1f6):_0x68b250(0x20e)+_0x49d97b,_0x4df21f=new Date();_0x4df21f['setDate'](_0x4df21f['getDate']()-0x1);const _0x3c1fa2=setupEfficientListener(_0x4f65f6,[where('date','>=',_0x4df21f['toISOString']()),limit(0xa),orderBy('date','desc')],async _0xd5d69a=>{_0xd5d69a['length']>0x0&&await loadLadderData(_0x49d97b);});activeListeners[_0x68b250(0x20b)](_0x3c1fa2);}export function cleanupListeners(){activeListeners['forEach'](_0x4c7d00=>_0x4c7d00()),activeListeners=[];}function renderLadder(_0x1787ad){const _0x191cb9=document['getElementById']('ladder-container');_0x191cb9['innerHTML']='',_0x1787ad['forEach'](_0x44af6d=>{const _0xdd51f7=a27_0x1e88,_0x3cdf60=document['createElement']('div');_0x3cdf60[_0xdd51f7(0x215)]='ladder-player',_0x3cdf60[_0xdd51f7(0x24c)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x44af6d['rank']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x44af6d['username']||_0x44af6d['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x44af6d['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x44af6d[_0xdd51f7(0x21f)]?'active':_0xdd51f7(0x1e2))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x44af6d['recentActivity']?'Active':'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x191cb9[_0xdd51f7(0x232)](_0x3cdf60);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x1fb5bd=![]){const _0x179868=a27_0x1e88,_0x22390f=document[_0x179868(0x220)]('#ladder\x20tbody');if(!_0x22390f){console['error'](_0x179868(0x1e1));return;}_0x22390f['innerHTML']=_0x179868(0x226);try{const _0x507917=Date['now']();if(!_0x1fb5bd&&playerCache[_0x179868(0x1e4)]&&_0x507917-playerCache['timestamp']<CACHE_DURATION){console[_0x179868(0x1d9)](_0x179868(0x1f0)),updateLadderDisplay(playerCache['data']);return;}const _0x26c244=collection(db,'players'),_0xe795c0=await getDocs(_0x26c244),_0x57e591=[];_0xe795c0['forEach'](_0x251b3a=>{const _0x2bd1ae=_0x179868,_0x3510ae=_0x251b3a['data']();_0x57e591[_0x2bd1ae(0x20b)]({..._0x3510ae,'id':_0x251b3a['id'],'elo':_0x3510ae['eloRating']||0x0,'position':_0x3510ae['position']||Number['MAX_SAFE_INTEGER']});});const _0xd8c3f6=collection(db,_0x179868(0x1fa)),_0x24fc55=await getDocs(_0xd8c3f6),_0x27af6d=new Map();_0x24fc55['forEach'](_0x5b33fa=>{const _0x2a2ee1=_0x5b33fa['data']();_0x2a2ee1['username']&&_0x27af6d['set'](_0x2a2ee1['username']['toLowerCase'](),_0x2a2ee1);}),_0x57e591['forEach'](_0x458e96=>{const _0x5bda53=_0x179868,_0x40925c=_0x458e96['username']?.[_0x5bda53(0x208)]();if(_0x40925c&&_0x27af6d['has'](_0x40925c)){const _0x117086=_0x27af6d['get'](_0x40925c);_0x117086['country']&&(_0x458e96[_0x5bda53(0x1f7)]=_0x117086[_0x5bda53(0x1f7)][_0x5bda53(0x208)]());}});const _0x1227bd=_0x57e591['map'](_0x393c8d=>_0x393c8d['username']),_0x1098a7=await fetchBatchMatchStats(_0x1227bd);_0x57e591['sort']((_0x5c700c,_0x4f9d4d)=>{const _0x2baf61=_0x179868,_0x2b6d32=_0x1098a7['get'](_0x5c700c['username'])?.['totalMatches']||0x0,_0x11ea47=_0x1098a7[_0x2baf61(0x24e)](_0x4f9d4d['username'])?.['totalMatches']||0x0;if(_0x2b6d32===0x0!==(_0x11ea47===0x0))return _0x2b6d32===0x0?0x1:-0x1;return(_0x5c700c[_0x2baf61(0x248)]||0x3e7)-(_0x4f9d4d['position']||0x3e7);}),_0x57e591['forEach']((_0x169e7e,_0x4c6d9d)=>{_0x169e7e['position']=_0x4c6d9d+0x1;}),playerCache['data']=_0x57e591,playerCache['timestamp']=_0x507917,updateLadderDisplay(_0x57e591,_0x1098a7);}catch(_0x38b1d1){console['error']('Error\x20loading\x20ladder:',_0x38b1d1),_0x22390f[_0x179868(0x24c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x38b1d1['message']+_0x179868(0x1f4);}}async function fetchBatchMatchStats(_0x30769c){const _0x4a7f31=new Map();try{_0x30769c['forEach'](_0x443cc6=>{const _0x3888f4=a27_0x1e88;_0x4a7f31[_0x3888f4(0x20c)](_0x443cc6,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x1f6dd0=collection(db,'approvedMatches'),_0x8a06fb=await getDocs(_0x1f6dd0);_0x8a06fb['forEach'](_0x3d32d8=>{const _0x40f29f=a27_0x1e88,_0x1a503f=_0x3d32d8['data'](),_0xb2001e=_0x1a503f['winnerUsername'],_0x325c56=_0x1a503f[_0x40f29f(0x247)];if(_0x30769c[_0x40f29f(0x241)](_0xb2001e)){const _0x91404=_0x4a7f31['get'](_0xb2001e);_0x91404[_0x40f29f(0x22f)]++,_0x91404['totalMatches']++,_0x91404['totalKills']+=parseInt(_0x1a503f['winnerScore'])||0x0,_0x91404['totalDeaths']+=parseInt(_0x1a503f[_0x40f29f(0x1e7)])||0x0;}if(_0x30769c['includes'](_0x325c56)){const _0x2c1dfb=_0x4a7f31['get'](_0x325c56);_0x2c1dfb['losses']++,_0x2c1dfb['totalMatches']++,_0x2c1dfb[_0x40f29f(0x1fd)]+=parseInt(_0x1a503f['loserScore'])||0x0,_0x2c1dfb[_0x40f29f(0x20d)]+=parseInt(_0x1a503f[_0x40f29f(0x217)])||0x0;}}),_0x30769c['forEach'](_0x305cdd=>{const _0x1d01d8=a27_0x1e88,_0x56d46b=_0x4a7f31[_0x1d01d8(0x24e)](_0x305cdd);_0x56d46b[_0x1d01d8(0x254)]=_0x56d46b['totalDeaths']>0x0?(_0x56d46b['totalKills']/_0x56d46b[_0x1d01d8(0x20d)])['toFixed'](0x2):_0x56d46b['totalKills']['toFixed'](0x2),_0x56d46b['winRate']=_0x56d46b['totalMatches']>0x0?(_0x56d46b[_0x1d01d8(0x22f)]/_0x56d46b['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x664d54){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x664d54);}return _0x4a7f31;}function a27_0x1e88(_0x4e2494,_0x56f493){const _0x104cca=a27_0x460d();return a27_0x1e88=function(_0x1a0ec3,_0x3a8a93){_0x1a0ec3=_0x1a0ec3-0x1d7;let _0x460d09=_0x104cca[_0x1a0ec3];return _0x460d09;},a27_0x1e88(_0x4e2494,_0x56f493);}function a27_0x460d(){const _0x71aa20=['Gold','Error\x20checking\x20','log','D3\x20toggle\x20clicked','exception','abs','#FFD700','classList','),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','loading-indicator','Ladder\x20table\x20body\x20not\x20found','inactive','DOMContentLoaded','data','duos-switch','\x20has\x20equipped:\x20','loserScore','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','max','dispatchEvent','uid','elo-recommendation-text-d2','length','change','disabled','Using\x20cached\x20D1\x20ladder\x20data','Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','\x20displaying\x20token:\x20','#b9f1fc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',';\x22>','matches','country','ðŸª™\x20Loaded\x20fresh\x20tokens\x20for','playersD3','userProfiles','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','target','totalKills','equipped','previousElo','opacity','0.5','totalMatches','Bronze','elo-recommendation-text-d1','seconds','remove','bind','toLowerCase','onAuthStateChanged','currentUser','push','set','totalDeaths','matchesD','newElo','elo-recommendation-text-d3','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#50C878','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','timestamp','className','tokenName','winnerScore','preventDefault','docs','teammate','admin-only-message','duos-ladder-container','d1-switch','#C0C0C0','recentActivity','querySelector','playerUsername','createElement','creative\x20lead','D2\x20toggle\x20clicked','username','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>','\x20(equipped:\x20','display','eloRating','constructor','addEventListener','join','#F44336','playersD','wins','map','body','appendChild','Error\x20fetching\x20tokens:','forEach','round','hasTeam','playersD2','click','__proto__','cssText','losses','style','add','fontWeight','</span>\x20(ELO:\x20','has','includes','warn','roleName','cursor','#CD7F32','none','loserUsername','position','gray','color','block','innerHTML',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','get','d2-ladder-container','getElementById',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','elo','\x20not\x20found','kda','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','%</td>\x0a\x20\x20\x20\x20</tr>','0.85em','duos','player','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','active'];a27_0x460d=function(){return _0x71aa20;};return a27_0x460d();}function createPlayerRow(_0xee9166,_0x474b63){const _0x31fbf7=a27_0x1e88,_0x3b3fe1=parseFloat(_0xee9166[_0x31fbf7(0x252)])||0x0;let _0x11d88d=_0x31fbf7(0x249);if(_0x3b3fe1>=0x7d0)_0x11d88d='#50C878';else{if(_0x3b3fe1>=0x708)_0x11d88d=_0x31fbf7(0x1dd);else{if(_0x3b3fe1>=0x640)_0x11d88d=_0x31fbf7(0x1f3);else _0x3b3fe1>=0x578&&(_0x11d88d='#CD7F32');}}let _0x228d15='';return _0xee9166['country']&&(_0x228d15='<img\x20src=\x22../images/flags/'+_0xee9166[_0x31fbf7(0x1f7)][_0x31fbf7(0x208)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0xee9166[_0x31fbf7(0x1f7)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x31fbf7(0x255)+_0xee9166[_0x31fbf7(0x248)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0xee9166['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x11d88d+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xee9166['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x228d15+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x11d88d+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3b3fe1+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x474b63[_0x31fbf7(0x202)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x474b63['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x474b63[_0x31fbf7(0x23b)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x474b63['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x474b63['winRate']+_0x31fbf7(0x256);}function getPlayerRankName(_0x32f8d3){const _0x2479d4=a27_0x1e88;if(_0x32f8d3>=0x7d0)return'Emerald';if(_0x32f8d3>=0x708)return _0x2479d4(0x1d7);if(_0x32f8d3>=0x640)return'Silver';if(_0x32f8d3>=0x578)return _0x2479d4(0x203);return'Unranked';}async function getPlayersLastEloChanges(_0x2df6d2){const _0x2de9e0=a27_0x1e88,_0x54a295=new Map();_0x2df6d2['forEach'](_0x34a6f5=>{_0x54a295['set'](_0x34a6f5,0x0);});try{const _0x4b6f4b=collection(db,'players'),_0x10b171=await getDocs(_0x4b6f4b),_0x442fe4=new Map(),_0x14b926=new Map();_0x10b171['forEach'](_0x590b2c=>{const _0x33094b=a27_0x1e88,_0x32a021=_0x590b2c['data']();_0x32a021['username']&&(_0x442fe4['set'](_0x590b2c['id'],_0x32a021['username']),_0x14b926[_0x33094b(0x20c)](_0x32a021[_0x33094b(0x225)]['toLowerCase'](),_0x590b2c['id']));});const _0x34530c=collection(db,'eloHistory'),_0x4a8d0d=query(_0x34530c,orderBy('timestamp','desc'),limit(0x12c)),_0x3e4fed=await getDocs(_0x4a8d0d);if(_0x3e4fed['empty'])return console[_0x2de9e0(0x1d9)]('ELO\x20history\x20collection\x20is\x20empty'),_0x54a295;if(_0x3e4fed['docs']['length']>0x0){const _0x48b79a=_0x3e4fed[_0x2de9e0(0x219)][0x0]['data']();if(_0x48b79a['player']&&_0x442fe4['has'](_0x48b79a['player'])){}}const _0x284446=new Map();let _0x3317bb=0x0;_0x3e4fed['forEach'](_0x14191d=>{const _0x3df266=_0x2de9e0,_0x22ff95=_0x14191d[_0x3df266(0x1e4)]();let _0x32bd0c=null;if(_0x22ff95[_0x3df266(0x259)]&&_0x442fe4['has'](_0x22ff95[_0x3df266(0x259)]))_0x32bd0c=_0x442fe4['get'](_0x22ff95['player']);else{if(_0x22ff95['username']&&_0x14b926['has'](_0x22ff95['username']['toLowerCase']()))_0x32bd0c=_0x22ff95['username'];else _0x22ff95['playerUsername']&&_0x14b926[_0x3df266(0x240)](_0x22ff95[_0x3df266(0x221)][_0x3df266(0x208)]())&&(_0x32bd0c=_0x22ff95['playerUsername']);}_0x32bd0c&&_0x2df6d2[_0x3df266(0x241)](_0x32bd0c)&&(_0x3317bb++,!_0x284446['has'](_0x32bd0c)&&_0x284446['set'](_0x32bd0c,[]),_0x284446['get'](_0x32bd0c)['push']({..._0x22ff95,'timestamp':_0x22ff95[_0x3df266(0x214)]?.[_0x3df266(0x205)]||0x0}));}),_0x284446['forEach']((_0x590ee2,_0x15913c)=>{const _0x5a1be8=_0x2de9e0;if(_0x590ee2['length']>0x0){_0x590ee2['sort']((_0x157951,_0x1a18fa)=>_0x1a18fa['timestamp']-_0x157951['timestamp']);const _0x581c84=_0x590ee2['find'](_0x1acec2=>_0x1acec2['change']!==undefined||_0x1acec2[_0x5a1be8(0x20f)]!==undefined&&_0x1acec2['previousElo']!==undefined||_0x1acec2['newEloRating']!==undefined&&_0x1acec2['oldEloRating']!==undefined);if(_0x581c84){let _0x895c1b;if(_0x581c84['change']!==undefined)_0x895c1b=parseInt(_0x581c84['change']);else{if(_0x581c84['newElo']!==undefined&&entry[_0x5a1be8(0x1ff)]!==undefined)_0x895c1b=parseInt(_0x581c84['newElo'])-parseInt(_0x581c84['previousElo']);else _0x581c84['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x895c1b=parseInt(_0x581c84['newEloRating'])-parseInt(_0x581c84['oldEloRating']));}!isNaN(_0x895c1b)&&_0x895c1b!==0x0&&_0x54a295['set'](_0x15913c,_0x895c1b);}}});}catch(_0x4645f0){console['error']('Error\x20fetching\x20ELO\x20history:',_0x4645f0);}return _0x54a295;}function createPlayerRowWithToken(_0x4171de,_0xe6ae80,_0x3b1dc2){const _0x40b476=a27_0x1e88,_0x107bc8=parseFloat(_0x4171de[_0x40b476(0x252)])||0x0;let _0x18dbf8='gray';if(_0x107bc8>=0x7d0)_0x18dbf8='#50C878';else{if(_0x107bc8>=0x708)_0x18dbf8='#FFD700';else{if(_0x107bc8>=0x640)_0x18dbf8='#b9f1fc';else _0x107bc8>=0x578&&(_0x18dbf8=_0x40b476(0x245));}}let _0x15c185='';_0x4171de['country']&&(_0x15c185='<img\x20src=\x22../images/flags/'+_0x4171de['country'][_0x40b476(0x208)]()+_0x40b476(0x1e8)+_0x4171de[_0x40b476(0x1f7)]+_0x40b476(0x25a));let _0x39c308='';return _0x3b1dc2&&(_0x39c308='<img\x20src=\x22'+_0x3b1dc2['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3b1dc2[_0x40b476(0x216)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x3b1dc2['tokenName']+'\x20'+(_0x3b1dc2[_0x40b476(0x1fe)]?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x40b476(0x255)+_0x4171de['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x4171de[_0x40b476(0x225)])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x18dbf8+_0x40b476(0x24d)+_0x4171de['username']+_0x40b476(0x211)+_0x15c185+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x39c308+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x18dbf8+_0x40b476(0x251)+_0x107bc8+_0x40b476(0x1fb)+_0xe6ae80['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xe6ae80['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xe6ae80['losses']+_0x40b476(0x213)+_0xe6ae80['kda']+_0x40b476(0x213)+_0xe6ae80['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x35d019,_0x2226c8=null){const _0x2688dd=a27_0x1e88,_0x372629=document['querySelector']('#ladder\x20tbody');if(!_0x372629){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x456ccb=document[_0x2688dd(0x220)]('#ladder\x20thead\x20tr');_0x456ccb&&(_0x456ccb['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x9609fe=_0x35d019[_0x2688dd(0x230)](_0x32469e=>_0x32469e['username']);!_0x2226c8&&(_0x2226c8=await fetchBatchMatchStats(_0x9609fe));let _0x2bd624=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x2bd624=await getTokensByUsernames(_0x9609fe),console['log'](_0x2688dd(0x1f8),_0x2bd624['size'],'players'),_0x2bd624[_0x2688dd(0x234)]((_0x392adf,_0xbddca6)=>{const _0x473c6d=_0x2688dd,_0x4442c9=_0x392adf['find'](_0x9167dc=>_0x9167dc[_0x473c6d(0x1fe)]);_0x4442c9&&console[_0x473c6d(0x1d9)]('ðŸŽ¯\x20'+_0xbddca6+_0x473c6d(0x1e6)+_0x4442c9['tokenName']);});}catch(_0x2dec74){console['error'](_0x2688dd(0x233),_0x2dec74);}const _0x253c11=_0x35d019['map'](_0x2c1d86=>{const _0x1bde15=_0x2688dd,_0x2c66aa=_0x2226c8['get'](_0x2c1d86['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x55686c=_0x2bd624[_0x1bde15(0x24e)](_0x2c1d86[_0x1bde15(0x225)])||[],_0x3d70bd=getPrimaryDisplayToken(_0x55686c);return _0x3d70bd&&console['log']('ðŸŽ¨\x20'+_0x2c1d86['username']+_0x1bde15(0x1f2)+_0x3d70bd['tokenName']+_0x1bde15(0x227)+_0x3d70bd['equipped']+')'),createPlayerRowWithToken(_0x2c1d86,_0x2c66aa,_0x3d70bd);})[_0x2688dd(0x22c)]('');_0x372629['innerHTML']=_0x253c11,getPlayersLastEloChanges(_0x9609fe)['then'](_0x19e86f=>{const _0x4377e6=new Map();_0x372629['querySelectorAll']('tr')['forEach']((_0x5c1c63,_0x2c84ba)=>{const _0x4c2015=a27_0x1e88;_0x2c84ba<_0x9609fe[_0x4c2015(0x1ed)]&&_0x4377e6['set'](_0x9609fe[_0x2c84ba],_0x5c1c63);}),_0x19e86f['forEach']((_0x249d1b,_0x2b748f)=>{const _0x120745=a27_0x1e88,_0x26f37f=_0x4377e6['get'](_0x2b748f);if(_0x26f37f&&_0x249d1b!==0x0){const _0x25a4bf=_0x26f37f[_0x120745(0x220)]('td:nth-child(3)');if(_0x25a4bf){const _0x1a2bee=_0x249d1b>0x0?'+'+_0x249d1b:''+_0x249d1b,_0x293b23=_0x25a4bf['querySelector']('.trend-indicator');_0x293b23&&(_0x293b23['textContent']=_0x1a2bee,_0x293b23['style'][_0x120745(0x24a)]=_0x249d1b>0x0?'#4CAF50':_0x120745(0x22d),_0x293b23['style'][_0x120745(0x23e)]='bold',_0x293b23['style']['fontSize']=_0x120745(0x257),_0x293b23['style']['display']='inline',_0x293b23[_0x120745(0x23c)]['visibility']='visible',_0x293b23['style']['opacity']='1');}}});})['catch'](_0x328fe4=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x328fe4));}function initLadderToggles(){const _0x9078db=a27_0x1e88,_0xcebcd2=document[_0x9078db(0x250)](_0x9078db(0x21d)),_0x5681f8=document['getElementById']('d2-switch'),_0x1ca3cf=document[_0x9078db(0x250)]('d3-switch'),_0x15ce95=document['getElementById'](_0x9078db(0x1e5)),_0x1cd2e3=document[_0x9078db(0x250)]('d1-ladder-container'),_0x17bdbb=document['getElementById']('d2-ladder-container'),_0x44e626=document[_0x9078db(0x250)]('d3-ladder-container'),_0x217a5a=document[_0x9078db(0x250)]('duos-ladder-container');function _0x43ca9b(){const _0x17531e=_0x9078db;if(_0x1cd2e3)_0x1cd2e3['classList']['remove']('active');if(_0x17bdbb)_0x17bdbb[_0x17531e(0x1de)]['remove']('active');if(_0x44e626)_0x44e626[_0x17531e(0x1de)][_0x17531e(0x206)](_0x17531e(0x25b));if(_0x217a5a)_0x217a5a['style']['display']='none';if(_0x1cd2e3)_0x1cd2e3['style'][_0x17531e(0x228)]=_0x17531e(0x246);if(_0x17bdbb)_0x17bdbb['style']['display']='none';if(_0x44e626)_0x44e626['style']['display']='none';}_0xcebcd2&&_0xcebcd2[_0x9078db(0x22b)]('click',()=>{const _0x1fdbc7=_0x9078db;console['log']('D1\x20toggle\x20clicked'),_0x43ca9b();_0x1cd2e3&&(_0x1cd2e3[_0x1fdbc7(0x1de)][_0x1fdbc7(0x23d)](_0x1fdbc7(0x25b)),_0x1cd2e3['style'][_0x1fdbc7(0x228)]=_0x1fdbc7(0x24b));document['getElementById'](_0x1fdbc7(0x204))[_0x1fdbc7(0x23c)]['display']=_0x1fdbc7(0x24b),document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x1fdbc7(0x246),document['getElementById']('elo-recommendation-text-d3')[_0x1fdbc7(0x23c)]['display']='none';if(_0xcebcd2)_0xcebcd2['classList']['add']('active');if(_0x5681f8)_0x5681f8['classList']['remove'](_0x1fdbc7(0x25b));if(_0x1ca3cf)_0x1ca3cf[_0x1fdbc7(0x1de)]['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x5681f8&&_0x5681f8[_0x9078db(0x22b)]('click',()=>{const _0x2287e2=_0x9078db;console['log'](_0x2287e2(0x224)),_0x43ca9b();_0x17bdbb&&(_0x17bdbb['classList']['add']('active'),_0x17bdbb[_0x2287e2(0x23c)][_0x2287e2(0x228)]='block');document['getElementById']('elo-recommendation-text-d1')[_0x2287e2(0x23c)]['display']='none',document[_0x2287e2(0x250)]('elo-recommendation-text-d2')[_0x2287e2(0x23c)][_0x2287e2(0x228)]='block',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x5681f8)_0x5681f8[_0x2287e2(0x1de)]['add']('active');if(_0xcebcd2)_0xcebcd2['classList']['remove']('active');if(_0x1ca3cf)_0x1ca3cf[_0x2287e2(0x1de)]['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0x1ca3cf&&_0x1ca3cf['addEventListener']('click',()=>{const _0x7f651c=_0x9078db;console[_0x7f651c(0x1d9)](_0x7f651c(0x1da)),_0x43ca9b();_0x44e626&&(_0x44e626[_0x7f651c(0x1de)][_0x7f651c(0x23d)]('active'),_0x44e626[_0x7f651c(0x23c)]['display']=_0x7f651c(0x24b));document['getElementById']('elo-recommendation-text-d1')[_0x7f651c(0x23c)]['display']='none',document['getElementById'](_0x7f651c(0x1ec))['style'][_0x7f651c(0x228)]=_0x7f651c(0x246),document['getElementById'](_0x7f651c(0x210))['style']['display']='block';if(_0x1ca3cf)_0x1ca3cf[_0x7f651c(0x1de)]['add']('active');if(_0xcebcd2)_0xcebcd2['classList'][_0x7f651c(0x206)](_0x7f651c(0x25b));if(_0x5681f8)_0x5681f8['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x15ce95&&_0x15ce95['addEventListener'](_0x9078db(0x238),()=>{const _0x4a6632=_0x9078db;_0x43ca9b();if(_0x217a5a)_0x217a5a['style']['display']='block';displayLadderDuos(),findBestOpponent('duos'),document[_0x4a6632(0x250)]('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')[_0x4a6632(0x23c)]['display']='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']=_0x4a6632(0x246),document['getElementById']('elo-recommendation-text-d2')['style']['display']='none',document[_0x4a6632(0x250)](_0x4a6632(0x210))[_0x4a6632(0x23c)]['display']='none';});}document[a27_0x12c31(0x22b)](a27_0x12c31(0x1e3),()=>{initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='block';});export{displayLadder};async function findBestOpponent(_0x10cc91='d1'){const _0x2e0b42=a27_0x12c31,_0x3e37ed='elo-recommendation-text-'+_0x10cc91,_0x3fc53f=document['getElementById'](_0x3e37ed);if(!_0x3fc53f){console['error']('Recommendation\x20element\x20for\x20'+_0x10cc91+_0x2e0b42(0x253));return;}const _0x93af22=auth[_0x2e0b42(0x20a)];if(!_0x93af22){_0x3fc53f['textContent']='';return;}try{const _0x3ce2e8=doc(db,_0x2e0b42(0x1fa),_0x93af22[_0x2e0b42(0x1eb)]),_0x54e362=await getDoc(_0x3ce2e8);if(!_0x54e362['exists']()){console['log']('No\x20user\x20profile\x20found'),_0x3fc53f['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x3b1660=_0x54e362['data'](),_0x9f7678=_0x3b1660[_0x2e0b42(0x225)];if(!_0x9f7678){_0x3fc53f['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x21511d;switch(_0x10cc91){case'd1':_0x21511d='players';break;case'd2':_0x21511d=_0x2e0b42(0x237);break;case'd3':_0x21511d='playersD3';break;case _0x2e0b42(0x258):_0x21511d='playersDuos';break;default:_0x21511d='players';}if(_0x10cc91==='duos'){const _0x41f108=collection(db,_0x21511d),_0x520fa1=query(_0x41f108,where('username','==',_0x9f7678)),_0x13e412=await getDocs(_0x520fa1);if(_0x13e412['empty']){_0x3fc53f['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x46e020=_0x13e412[_0x2e0b42(0x219)][0x0]['data'](),_0x204f00=parseInt(_0x46e020[_0x2e0b42(0x229)])||0x4b0;if(_0x46e020[_0x2e0b42(0x236)]&&_0x46e020[_0x2e0b42(0x21a)]){_0x3fc53f[_0x2e0b42(0x24c)]='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x46e020['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x2fc31e=await getDocs(_0x41f108);let _0x5a9de5=null,_0x4579e1=-0x1;_0x2fc31e['forEach'](_0x47c33c=>{const _0x15770d=_0x2e0b42,_0x310d6f=_0x47c33c[_0x15770d(0x1e4)]();if(_0x310d6f[_0x15770d(0x225)]===_0x9f7678)return;if(_0x310d6f['hasTeam'])return;const _0x89703a=parseInt(_0x310d6f['eloRating'])||0x4b0,_0x32bc24=Math[_0x15770d(0x1dc)](_0x89703a-_0x204f00),_0x2333a5=Math[_0x15770d(0x1e9)](0x0,0xc8-_0x32bc24);_0x2333a5>_0x4579e1&&(_0x5a9de5=_0x310d6f,_0x4579e1=_0x2333a5);});if(_0x5a9de5){const _0x4e89f3=parseInt(_0x5a9de5['eloRating'])||0x4b0;let _0x4b73b9=_0x2e0b42(0x249);if(_0x4e89f3>=0x7d0)_0x4b73b9='#50C878';else{if(_0x4e89f3>=0x708)_0x4b73b9='#FFD700';else{if(_0x4e89f3>=0x640)_0x4b73b9=_0x2e0b42(0x21e);else _0x4e89f3>=0x578&&(_0x4b73b9=_0x2e0b42(0x245));}}_0x3fc53f['innerHTML']=_0x2e0b42(0x1f1)+_0x4b73b9+_0x2e0b42(0x1f5)+_0x5a9de5['username']+_0x2e0b42(0x23f)+_0x4e89f3+')';}else _0x3fc53f['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x464224=collection(db,_0x21511d),_0x4ad789=query(_0x464224,where('username','==',_0x9f7678)),_0x5f12b4=await getDocs(_0x4ad789);if(_0x5f12b4['empty']){_0x3fc53f['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x10cc91['toUpperCase']()+'\x20ladder';return;}const _0x2d85bd=_0x5f12b4[_0x2e0b42(0x219)][0x0]['data'](),_0x1cc0d1=parseInt(_0x2d85bd['eloRating'])||0x5dc,_0x162ca8=await getDocs(_0x464224);let _0x523e6d=null,_0x253577=-0x1;const _0x7aa56b=getPlayerRankName(_0x1cc0d1);_0x162ca8[_0x2e0b42(0x234)](_0xee437=>{const _0x304c2f=_0x2e0b42,_0x51a7db=_0xee437['data']();if(_0x51a7db[_0x304c2f(0x225)]===_0x9f7678)return;const _0x4a0b7c=parseInt(_0x51a7db['eloRating'])||0x5dc,_0x22578d=getPlayerRankName(_0x4a0b7c),_0x32284a=Math['abs'](_0x4a0b7c-_0x1cc0d1),_0x11085e=0x20,_0x1a0d98=0x1/(0x1+Math['pow'](0xa,(_0x4a0b7c-_0x1cc0d1)/0x190)),_0x15851f=Math[_0x304c2f(0x235)](_0x11085e*(0x1-_0x1a0d98));if(_0x15851f<=0x0)return;let _0x44ae11=0x0;const _0x28dc21=Math[_0x304c2f(0x1e9)](0x0,0x64-_0x32284a*0.5),_0x551817=_0x15851f>=0x3&&_0x15851f<=0x8?0x32:_0x15851f>0x0&&_0x15851f<0xf?0x1e:0xa,_0x51e1a5=_0x7aa56b===_0x22578d?0x28:0x0;_0x44ae11=_0x28dc21+_0x551817+_0x51e1a5,_0x44ae11>_0x253577&&(_0x523e6d=_0x51a7db,_0x253577=_0x44ae11);});if(_0x523e6d){const _0x3fca8c=parseInt(_0x523e6d['eloRating'])||0x5dc;let _0x5defab='gray';if(_0x3fca8c>=0x7d0)_0x5defab=_0x2e0b42(0x212);else{if(_0x3fca8c>=0x708)_0x5defab=_0x2e0b42(0x1dd);else{if(_0x3fca8c>=0x640)_0x5defab='#b9f1fc';else _0x3fca8c>=0x578&&(_0x5defab='#CD7F32');}}_0x3fc53f['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x1cc0d1+_0x2e0b42(0x1df)+_0x5defab+';\x22>'+_0x523e6d['username']+'</span>';}else _0x3fc53f[_0x2e0b42(0x24c)]='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x1cc0d1+')';}catch(_0x1c70c4){console['error']('Error\x20finding\x20best\x20opponent:',_0x1c70c4),_0x3fc53f['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x43030b=>{const _0x562d1c=a27_0x12c31,_0x32baa9=document[_0x562d1c(0x250)]('d1-ladder-container')&&document['getElementById']('d1-ladder-container')['style']['display']!=='none',_0x47e99c=document['getElementById'](_0x562d1c(0x24f))&&document['getElementById']('d2-ladder-container')['style'][_0x562d1c(0x228)]!=='none',_0x57b88a=document['getElementById']('d3-ladder-container')&&document[_0x562d1c(0x250)]('d3-ladder-container')['style']['display']!=='none',_0x39b19b=document[_0x562d1c(0x250)](_0x562d1c(0x21c))&&document['getElementById']('duos-ladder-container')[_0x562d1c(0x23c)][_0x562d1c(0x228)]!=='none',_0x2c6e3f=_0x32baa9?'d1':_0x47e99c?'d2':_0x57b88a?'d3':_0x39b19b?'duos':'d1';findBestOpponent(_0x2c6e3f);}),document[a27_0x12c31(0x22b)]('DOMContentLoaded',()=>{const _0x4e72cf=a27_0x12c31,_0x53c472=document['getElementById']('duos-switch'),_0x1ef005=document['querySelector']('label[for=\x22duos-switch\x22]');_0x53c472&&_0x1ef005&&(_0x53c472['addEventListener']('change',async _0x2d2150=>{const _0x3a18ce=a27_0x1e88;if(_0x2d2150[_0x3a18ce(0x1fc)]['checked']){const _0xaf078a=auth?.[_0x3a18ce(0x20a)],_0x39f494=await checkIfUserIsAdmin(_0xaf078a);if(!_0x39f494){_0x2d2150[_0x3a18ce(0x218)]();const _0x723869=document[_0x3a18ce(0x250)](_0x3a18ce(0x21d));return _0x723869&&(_0x723869['checked']=!![],_0x723869[_0x3a18ce(0x1ea)](new Event(_0x3a18ce(0x1ee)))),showAdminOnlyMessage(),![];}}}),auth[_0x4e72cf(0x209)](async _0x85fb49=>{const _0x56b8d3=_0x4e72cf,_0x212ec6=await checkIfUserIsAdmin(_0x85fb49);!_0x212ec6?(_0x53c472['disabled']=!![],_0x1ef005['style']['opacity']=_0x56b8d3(0x201),_0x1ef005['style']['cursor']='not-allowed',_0x1ef005['title']='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x53c472[_0x56b8d3(0x1ef)]=![],_0x1ef005[_0x56b8d3(0x23c)][_0x56b8d3(0x200)]='1',_0x1ef005[_0x56b8d3(0x23c)][_0x56b8d3(0x244)]='pointer',_0x1ef005['title']='');}));});async function checkIfUserIsAdmin(_0x401d26){const _0x5e06b9=a27_0x12c31;if(!_0x401d26)return![];try{const _0x32bdcd=['admin@ladder.com','brian2af@outlook.com'];if(_0x401d26['email']&&_0x32bdcd['includes'](_0x401d26['email']['toLowerCase']()))return!![];const _0x33aba6=['userProfiles','players','playersD2',_0x5e06b9(0x1f9)],_0x43763c=['admin','owner','council',_0x5e06b9(0x223)];for(const _0x18cb98 of _0x33aba6){try{const _0x1f92f3=doc(db,_0x18cb98,_0x401d26['uid']),_0x50cb46=await getDoc(_0x1f92f3);if(_0x50cb46['exists']()){const _0x4a8edb=_0x50cb46['data'](),_0x10bfad=(_0x4a8edb[_0x5e06b9(0x243)]||_0x4a8edb['role']||'')['toLowerCase']();if(_0x10bfad&&_0x43763c['includes'](_0x10bfad))return!![];}}catch(_0x59ba80){console['warn'](_0x5e06b9(0x1d8)+_0x18cb98+':',_0x59ba80);}}return![];}catch(_0x1a43f7){return console['error']('Error\x20checking\x20admin\x20status:',_0x1a43f7),![];}}function showAdminOnlyMessage(){const _0xd94623=a27_0x12c31,_0x2daf1a=document[_0xd94623(0x250)](_0xd94623(0x21b));_0x2daf1a&&_0x2daf1a[_0xd94623(0x206)]();const _0x2da9a5=document[_0xd94623(0x222)]('div');_0x2da9a5['id']='admin-only-message',_0x2da9a5[_0xd94623(0x23c)][_0xd94623(0x23a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x2da9a5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document[_0xd94623(0x231)]['appendChild'](_0x2da9a5),setTimeout(()=>{const _0x3241bb=_0xd94623;_0x2da9a5['parentNode']&&_0x2da9a5[_0x3241bb(0x206)]();},0xbb8);}