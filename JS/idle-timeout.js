const a20_0x35ffb2=a20_0x2ff3;import a20_0x2d8ddc,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function a20_0x2ee1(){const _0x5b1d11=['addEventListener','now','getElementById','suspendSession','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','appendChild','network-error-overlay','opacity','display','return\x20(function()\x20','color:\x20#fff;\x20margin-bottom:\x2030px;','flex','We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.','Connection\x20test\x20failed:','code','suspendAllListeners','RDL_LAST_ACTIVITY','from','RDL_NETWORK_ERROR','console','style','message','none','Network\x20error\x20detected,\x20showing\x20error\x20overlay','touchstart','loading','retry-connection-btn','location','resource-exhausted','apply','Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.','reload-page-btn','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','size','#network-error-overlay\x20p','Retrying\x20connection...','log','idle-overlay','cssText','not-allowed','color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','RDL_SESSION_SUSPENDED','onmouseout','includes','toString','network','error','prototype','Network\x20error:','Reload\x20Page','querySelector','click','Return\x20to\x20Website','keypress','Pending\x20operations:','textContent','body','createElement'];a20_0x2ee1=function(){return _0x5b1d11;};return a20_0x2ee1();}function createIdleOverlay(){const _0x4fa3f4=a20_0x2ff3;if(document[_0x4fa3f4(0x1d9)]('idle-overlay'))return;const _0x5c5013=document['createElement']('div');_0x5c5013['id']=_0x4fa3f4(0x1fc),_0x5c5013['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x4fc399=document['createElement']('div');_0x4fc399[_0x4fa3f4(0x1eb)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x485b5c=document['createElement']('h2');_0x485b5c[_0x4fa3f4(0x20f)]='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x485b5c[_0x4fa3f4(0x1eb)][_0x4fa3f4(0x1fd)]='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x31cf3a=document['createElement']('p');_0x31cf3a['textContent']=_0x4fa3f4(0x1f5),_0x31cf3a[_0x4fa3f4(0x1eb)][_0x4fa3f4(0x1fd)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0xf2d5c5=document['createElement']('button');_0xf2d5c5['id']='resume-session-btn',_0xf2d5c5[_0x4fa3f4(0x20f)]=_0x4fa3f4(0x20c),_0xf2d5c5['style'][_0x4fa3f4(0x1fd)]=_0x4fa3f4(0x200),_0xf2d5c5['onmouseover']=function(){this['style']['backgroundColor']='#3da05f';},_0xf2d5c5[_0x4fa3f4(0x202)]=function(){this['style']['backgroundColor']='#50C878';},_0x4fc399['appendChild'](_0x485b5c),_0x4fc399['appendChild'](_0x31cf3a),_0x4fc399['appendChild'](_0xf2d5c5),_0x5c5013['appendChild'](_0x4fc399),document[_0x4fa3f4(0x210)][_0x4fa3f4(0x1dc)](_0x5c5013),_0xf2d5c5['addEventListener'](_0x4fa3f4(0x20b),resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0xa91e1a=a20_0x2ff3;if(document['getElementById'](_0xa91e1a(0x1dd)))return;const _0x46ba0c=document['createElement']('div');_0x46ba0c['id']='network-error-overlay',_0x46ba0c['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x864c66=document['createElement']('div');_0x864c66['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x47cb79=document['createElement']('h2');_0x47cb79['textContent']='Connection\x20Error',_0x47cb79['style']['cssText']=_0xa91e1a(0x1ff);const _0x33e426=document[_0xa91e1a(0x211)]('p');_0x33e426['textContent']=_0xa91e1a(0x1e3),_0x33e426['style']['cssText']=_0xa91e1a(0x1e1);const _0x499bca=document['createElement']('button');_0x499bca['id']='retry-connection-btn',_0x499bca['textContent']='Retry\x20Connection',_0x499bca['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x218fdd=document['createElement']('button');_0x218fdd['id']=_0xa91e1a(0x1f6),_0x218fdd['textContent']=_0xa91e1a(0x209),_0x218fdd['style']['cssText']=_0xa91e1a(0x1db);const _0x57eaa8=document[_0xa91e1a(0x211)]('div');_0x57eaa8['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x57eaa8[_0xa91e1a(0x1dc)](_0x499bca),_0x57eaa8['appendChild'](_0x218fdd),_0x864c66['appendChild'](_0x47cb79),_0x864c66['appendChild'](_0x33e426),_0x864c66[_0xa91e1a(0x1dc)](_0x57eaa8),_0x46ba0c['appendChild'](_0x864c66),document['body']['appendChild'](_0x46ba0c),_0x499bca['addEventListener']('click',retryConnection),_0x218fdd[_0xa91e1a(0x1d7)]('click',()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x3edc56=a20_0x2ff3;clearTimeout(idleTimer);const _0x379849=document['getElementById'](_0x3edc56(0x1dd));_0x379849&&(_0x379849[_0x3edc56(0x1eb)]['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console['log'](_0x3edc56(0x1ee)),a20_0x2d8ddc[_0x3edc56(0x1e6)]();}function retryConnection(){const _0x3228fb=a20_0x2ff3;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x47b6ff=document[_0x3228fb(0x20a)](_0x3228fb(0x1f9));_0x47b6ff&&(_0x47b6ff[_0x3228fb(0x20f)]='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x400da9=document['getElementById'](_0x3228fb(0x1f1));_0x400da9&&(_0x400da9['disabled']=!![],_0x400da9['style'][_0x3228fb(0x1de)]='0.5',_0x400da9['style']['cursor']=_0x3228fb(0x1fe));return;}const _0x2940ee=document['getElementById'](_0x3228fb(0x1dd));_0x2940ee&&(_0x2940ee['style']['display']='none');window[_0x3228fb(0x1e9)]=![],resetIdleTimer(),console[_0x3228fb(0x1fb)](_0x3228fb(0x1fa));try{const {rdlFirestore:_0x94cf28}=window;if(_0x94cf28){const _0x5c4618=_0x94cf28['collection']('system');_0x94cf28['getDocs'](_0x5c4618)['catch'](_0x1ffe2c=>{const _0x4c6b35=_0x3228fb;console[_0x4c6b35(0x206)](_0x4c6b35(0x1e4),_0x1ffe2c),handleNetworkError();});}}catch(_0x39fd6e){console['error']('Failed\x20to\x20test\x20connection:',_0x39fd6e),handleNetworkError();}a20_0x2d8ddc['resumeAllListeners']();}function suspendSession(){const _0x1abf07=a20_0x2ff3;isSessionSuspended=!![];const _0x260d9b=document['getElementById']('idle-overlay');_0x260d9b&&(_0x260d9b[_0x1abf07(0x1eb)][_0x1abf07(0x1df)]=_0x1abf07(0x1e2)),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a20_0x2d8ddc['suspendAllListeners']();}function resumeSession(){const _0x27ad1b=a20_0x2ff3;isSessionSuspended=![],window[_0x27ad1b(0x201)]=![];const _0xfecb2e=document['getElementById']('idle-overlay');_0xfecb2e&&(_0xfecb2e[_0x27ad1b(0x1eb)]['display']=_0x27ad1b(0x1ed)),console['log']('Session\x20resumed'),resetIdleTimer(),a20_0x2d8ddc['resumeAllListeners'](),idleTimer&&Date[_0x27ad1b(0x1d8)]()-(window[_0x27ad1b(0x1e7)]||0x0)>IDLE_TIMEOUT*0x2&&(console[_0x27ad1b(0x1fb)](_0x27ad1b(0x1f7)),window[_0x27ad1b(0x1f2)]['reload']());}function a20_0x2ff3(_0x2da651,_0xa756df){const _0x48fa6=a20_0x2ee1();return a20_0x2ff3=function(_0x5c0404,_0x1d86ec){_0x5c0404=_0x5c0404-0x1d7;let _0x2ee1b4=_0x48fa6[_0x5c0404];return _0x2ee1b4;},a20_0x2ff3(_0x2da651,_0xa756df);}function initIdleTimeout(){const _0x5d18d2=a20_0x2ff3,_0x4ddbda=(function(){let _0x11fa6c=!![];return function(_0x4649ec,_0x495620){const _0x4642a4=_0x11fa6c?function(){const _0x877268=a20_0x2ff3;if(_0x495620){const _0x1a252b=_0x495620[_0x877268(0x1f4)](_0x4649ec,arguments);return _0x495620=null,_0x1a252b;}}:function(){};return _0x11fa6c=![],_0x4642a4;};}()),_0x319cde=_0x4ddbda(this,function(){const _0x2bf55e=a20_0x2ff3;let _0x3dce64;try{const _0x569d65=Function(_0x2bf55e(0x1e0)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3dce64=_0x569d65();}catch(_0x2064c1){_0x3dce64=window;}const _0x52ba01=_0x3dce64[_0x2bf55e(0x1ea)]=_0x3dce64[_0x2bf55e(0x1ea)]||{},_0x36dcfe=['log','warn','info','error','exception','table','trace'];for(let _0x2b6ff7=0x0;_0x2b6ff7<_0x36dcfe['length'];_0x2b6ff7++){const _0x3158f8=_0x4ddbda['constructor'][_0x2bf55e(0x207)]['bind'](_0x4ddbda),_0x1a85e1=_0x36dcfe[_0x2b6ff7],_0x57da53=_0x52ba01[_0x1a85e1]||_0x3158f8;_0x3158f8['__proto__']=_0x4ddbda['bind'](_0x4ddbda),_0x3158f8[_0x2bf55e(0x204)]=_0x57da53['toString']['bind'](_0x57da53),_0x52ba01[_0x1a85e1]=_0x3158f8;}});_0x319cde(),createIdleOverlay();const _0x53de5c=['mousedown','mousemove',_0x5d18d2(0x20d),'scroll',_0x5d18d2(0x1ef),'click'];_0x53de5c['forEach'](_0x19df06=>{document['addEventListener'](_0x19df06,()=>{const _0x33ea5e=a20_0x2ff3;window[_0x33ea5e(0x1e7)]=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x587973){const _0x1c9fad=_0x5d18d2;_0x587973['error']&&(_0x587973['error']['message']&&_0x587973['error'][_0x1c9fad(0x1ec)][_0x1c9fad(0x203)]('network')||_0x587973['error']['code']&&(_0x587973['error']['code']==='unavailable'||_0x587973['error'][_0x1c9fad(0x1e5)]===_0x1c9fad(0x1f3)||_0x587973['error']['code'][_0x1c9fad(0x203)](_0x1c9fad(0x205))))&&(handleNetworkError(),_0x587973['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window[_0x5d18d2(0x1da)]=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x4a3b54=_0x5d18d2;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log'](_0x4a3b54(0x208),window['RDL_NETWORK_ERROR']),console[_0x4a3b54(0x1fb)]('Active\x20listeners:',a20_0x2d8ddc['activeListeners']['size']),console['log'](_0x4a3b54(0x20e),a20_0x2d8ddc['pendingOperations'][_0x4a3b54(0x1f8)]),console['log']('Blocked\x20operations:',a20_0x2d8ddc['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array[_0x4a3b54(0x1e8)](a20_0x2d8ddc['activeListeners']['keys']()),'pendingOperations':Array['from'](a20_0x2d8ddc['pendingOperations']['keys']()),'blockedCount':a20_0x2d8ddc['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){const _0x33b3c3=_0x5d18d2;console[_0x33b3c3(0x1fb)]('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']===a20_0x35ffb2(0x1f0)?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();