const a31_0x34d47c=a31_0x3786,a31_0x490519=(function(){let _0x402d37=!![];return function(_0x127991,_0x21b7dc){const _0x48033b=_0x402d37?function(){if(_0x21b7dc){const _0x5e71dc=_0x21b7dc['apply'](_0x127991,arguments);return _0x21b7dc=null,_0x5e71dc;}}:function(){};return _0x402d37=![],_0x48033b;};}()),a31_0x3c74ff=a31_0x490519(this,function(){const _0x5e2f09=a31_0x3786;let _0x4f58a3;try{const _0x38755d=Function('return\x20(function()\x20'+_0x5e2f09(0x12f)+');');_0x4f58a3=_0x38755d();}catch(_0x55ae03){_0x4f58a3=window;}const _0x28f2bc=_0x4f58a3['console']=_0x4f58a3['console']||{},_0xe4fc1d=['log',_0x5e2f09(0xf7),'info','error','exception','table',_0x5e2f09(0x11d)];for(let _0xd2164a=0x0;_0xd2164a<_0xe4fc1d['length'];_0xd2164a++){const _0x167e33=a31_0x490519['constructor']['prototype'][_0x5e2f09(0x11a)](a31_0x490519),_0x4e962e=_0xe4fc1d[_0xd2164a],_0x1565be=_0x28f2bc[_0x4e962e]||_0x167e33;_0x167e33['__proto__']=a31_0x490519['bind'](a31_0x490519),_0x167e33['toString']=_0x1565be['toString']['bind'](_0x1565be),_0x28f2bc[_0x4e962e]=_0x167e33;}});a31_0x3c74ff();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a31_0x1097(){const _0x28ba97=['warn','previousElo','eloHistoryD3','#F44336','has','userProfiles',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','loserUsername','fontWeight','set','forEach','equipped','<img\x20src=\x22../images/flags/','gray','totalKills','winnerUsername','0.85em','find','#FFD700','displayLadderD3\x20function\x20not\x20available','td:nth-child(3)','length','abs','#ladder-d3\x20tbody','country','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','username','toLowerCase','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','winRate','get','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','player','refreshLadderDisplayD3','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22','bind',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','position','trace','timestamp','change','error','data','Error\x20updating\x20D3\x20player\x20positions:','%</td>\x0a\x20\x20\x20\x20</tr>','push','querySelector','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>','bold','totalMatches','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','<img\x20src=\x22','kda','includes','innerHTML','{}.constructor(\x22return\x20this\x22)(\x20)','totalDeaths','playerUsername','playersD3','style','MAX_SAFE_INTEGER','size','D3:\x20Error\x20fetching\x20tokens:','querySelectorAll'];a31_0x1097=function(){return _0x28ba97;};return a31_0x1097();}import a31_0x1a1adc from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';function a31_0x3786(_0x2b8b2c,_0x207839){const _0x3c74ff=a31_0x1097();return a31_0x3786=function(_0x490519,_0x47f44){_0x490519=_0x490519-0xf7;let _0x109720=_0x3c74ff[_0x490519];return _0x109720;},a31_0x3786(_0x2b8b2c,_0x207839);}const styleEl=document['createElement'](a31_0x34d47c(0x133));styleEl['textContent']='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x2d9886=![]){const _0x40906b=a31_0x34d47c,_0x47ded2=document[_0x40906b(0x125)](_0x40906b(0x10e));if(!_0x47ded2){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x47ded2[_0x40906b(0x12e)]=_0x40906b(0x127);try{const _0x6473b1=Date['now']();if(!_0x2d9886&&playerCacheD3['data']&&_0x6473b1-playerCacheD3[_0x40906b(0x11e)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x382517=collection(db,'playersD3'),_0x33aafa=await getDocs(_0x382517),_0x4f6f87=[];_0x33aafa['forEach'](_0x50e269=>{const _0x10eae5=_0x40906b,_0x49a386=_0x50e269['data']();_0x49a386['username']&&_0x4f6f87['push']({..._0x49a386,'id':_0x50e269['id'],'elo':_0x49a386['eloRating']||0x0,'position':_0x49a386[_0x10eae5(0x11c)]||Number[_0x10eae5(0x134)]});});const _0x3c4b17=collection(db,_0x40906b(0xfc)),_0x164e7f=await getDocs(_0x3c4b17),_0x1eaf19=new Map();_0x164e7f['forEach'](_0x27c370=>{const _0x4003a2=_0x40906b,_0x81c2b4=_0x27c370[_0x4003a2(0x121)]();_0x81c2b4[_0x4003a2(0x111)]&&_0x1eaf19['set'](_0x81c2b4[_0x4003a2(0x111)]['toLowerCase'](),_0x81c2b4);});for(const _0x247c25 of _0x4f6f87){const _0x13e7ff=_0x247c25[_0x40906b(0x111)]['toLowerCase']();if(_0x1eaf19[_0x40906b(0xfb)](_0x13e7ff)){const _0x33b56c=_0x1eaf19['get'](_0x13e7ff);_0x33b56c['country']&&(_0x247c25['country']=_0x33b56c['country']['toLowerCase']());}}const _0x274b8c=_0x4f6f87['map'](_0x277144=>_0x277144['username']),_0x2a1001=await fetchBatchMatchStatsD3(_0x274b8c);_0x4f6f87['sort']((_0x2e49bd,_0x4aa2aa)=>{const _0x264b02=_0x40906b,_0x348dc8=_0x2a1001['get'](_0x2e49bd['username'])?.[_0x264b02(0x129)]||0x0,_0x397a6e=_0x2a1001['get'](_0x4aa2aa[_0x264b02(0x111)])?.['totalMatches']||0x0;if(_0x348dc8===0x0!==(_0x397a6e===0x0))return _0x348dc8===0x0?0x1:-0x1;return(_0x2e49bd['position']||0x3e7)-(_0x4aa2aa[_0x264b02(0x11c)]||0x3e7);}),_0x4f6f87['forEach']((_0x4f3347,_0x9717ca)=>{_0x4f3347['position']=_0x9717ca+0x1;}),playerCacheD3['data']=_0x4f6f87,playerCacheD3['timestamp']=_0x6473b1,updateLadderDisplayD3(_0x4f6f87);}catch(_0x2fa8e7){console['error']('Error\x20loading\x20D3\x20ladder:',_0x2fa8e7),_0x47ded2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x2fa8e7['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x3033f1){const _0x229a86=a31_0x34d47c;if(!_0x3033f1)return 0x0;const _0x34f58e=_0x3033f1['toDate'](),_0x3ad9cc=new Date(),_0x2415f3=Math[_0x229a86(0x10d)](_0x3ad9cc-_0x34f58e);return Math['ceil'](_0x2415f3/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x44a9af,_0x3e7f68){const _0x1f14c7=a31_0x34d47c;try{const _0x1c38f6=collection(db,'playersD3'),_0x4a700c=await getDocs(_0x1c38f6),_0xf4f5a5=[];_0x4a700c['forEach'](_0x68f8c1=>{const _0x2b234c=a31_0x3786;_0xf4f5a5[_0x2b234c(0x124)]({'id':_0x68f8c1['id'],..._0x68f8c1['data']()});});const _0x8a6b7=_0xf4f5a5[_0x1f14c7(0x108)](_0x89da32=>_0x89da32['username']===_0x44a9af),_0xa6b698=_0xf4f5a5['find'](_0x178322=>_0x178322[_0x1f14c7(0x111)]===_0x3e7f68);if(!_0x8a6b7||!_0xa6b698){console['error'](_0x1f14c7(0x126));return;}if(_0x8a6b7['position']>_0xa6b698['position']){const _0x95890=_0xa6b698['position'];for(const _0x5708dd of _0xf4f5a5){_0x5708dd['position']>=_0xa6b698['position']&&_0x5708dd['position']<_0x8a6b7[_0x1f14c7(0x11c)]&&_0x5708dd['username']!==_0x44a9af&&await updateDoc(doc(db,'playersD3',_0x5708dd['id']),{'position':_0x5708dd['position']+0x1});}await updateDoc(doc(db,'playersD3',_0x8a6b7['id']),{'position':_0x95890});if(_0x95890===0x1){const _0x45f035=doc(db,'playersD3',_0x8a6b7['id']),_0xb0b2a=await getDoc(_0x45f035);!_0xb0b2a['data']()['firstPlaceDate']&&await updateDoc(_0x45f035,{'firstPlaceDate':Timestamp['now']()});}if(_0xa6b698['position']===0x1){const _0x23badd=doc(db,'playersD3',_0xa6b698['id']);await updateDoc(_0x23badd,{'firstPlaceDate':null});}playerCacheD3['timestamp']=0x0;}}catch(_0x4f691a){console['error'](_0x1f14c7(0x122),_0x4f691a);}}async function updateLadderDisplayD3(_0x29c998){const _0x3ab3f5=a31_0x34d47c;_0x29c998['sort']((_0x4eaf5f,_0x5323fe)=>_0x4eaf5f['position']-_0x5323fe['position']);const _0x52e2a6=document['querySelector']('#ladder-d3\x20tbody');if(!_0x52e2a6)return;_0x52e2a6['innerHTML']='';const _0x247b38=_0x29c998['map'](_0x44bffc=>_0x44bffc['username']),_0x5c8573=await fetchBatchMatchStatsD3(_0x247b38);let _0x40f45f=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x40f45f=await getTokensByUsernames(_0x247b38);}catch(_0x1921f9){console['error'](_0x3ab3f5(0x136),_0x1921f9);}const _0x202798=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x202798&&(_0x202798[_0x3ab3f5(0x12e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x344b8b=_0x29c998['map'](_0x78a5d8=>{const _0x498a2c=_0x3ab3f5,_0x3840a5=_0x5c8573[_0x498a2c(0x115)](_0x78a5d8['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x272254=_0x40f45f[_0x498a2c(0x115)](_0x78a5d8[_0x498a2c(0x111)])||[],_0x4a41ca=getPrimaryDisplayToken(_0x272254);return createPlayerRowD3(_0x78a5d8,_0x3840a5,_0x4a41ca);})['join']('');_0x52e2a6[_0x3ab3f5(0x12e)]=_0x344b8b,getPlayersLastEloChangesD3(_0x247b38)['then'](_0x142fa5=>{const _0x1fe641=_0x3ab3f5,_0x50f3fe=new Map();_0x52e2a6[_0x1fe641(0x137)]('tr')[_0x1fe641(0x101)]((_0xc0f5ca,_0x1e8c8f)=>{const _0x253a56=_0x1fe641;_0x1e8c8f<_0x247b38[_0x253a56(0x10c)]&&_0x50f3fe['set'](_0x247b38[_0x1e8c8f],_0xc0f5ca);}),_0x142fa5[_0x1fe641(0x101)]((_0x5ba904,_0x290133)=>{const _0x2ca817=_0x1fe641,_0x23a3a8=_0x50f3fe[_0x2ca817(0x115)](_0x290133);if(_0x23a3a8&&_0x5ba904!==0x0){const _0x32124f=_0x23a3a8['querySelector'](_0x2ca817(0x10b));if(_0x32124f){const _0x519550=_0x5ba904>0x0?'+'+_0x5ba904:''+_0x5ba904,_0x1a0281=_0x32124f['querySelector']('.trend-indicator');_0x1a0281&&(_0x1a0281['textContent']=_0x519550,_0x1a0281['style']['color']=_0x5ba904>0x0?'#4CAF50':_0x2ca817(0xfa),_0x1a0281['style'][_0x2ca817(0xff)]=_0x2ca817(0x128),_0x1a0281[_0x2ca817(0x133)]['fontSize']=_0x2ca817(0x107),_0x1a0281['style']['display']='inline',_0x1a0281['style']['visibility']='visible',_0x1a0281['style']['opacity']='1');}}});})['catch'](_0x593cd9=>console[_0x3ab3f5(0x120)]('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x593cd9));}async function fetchBatchMatchStatsD3(_0x41e446){const _0x28d3f3=a31_0x34d47c,_0x1a2fd0=new Map();try{_0x41e446['forEach'](_0xf1efa8=>{_0x1a2fd0['set'](_0xf1efa8,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x401b1e=collection(db,'approvedMatchesD3'),_0x56e5f4=await getDocs(_0x401b1e);_0x56e5f4['forEach'](_0x5f10d3=>{const _0x5f42cd=a31_0x3786,_0x4f67cd=_0x5f10d3['data'](),_0x189a52=_0x4f67cd[_0x5f42cd(0x106)],_0x4bdff8=_0x4f67cd[_0x5f42cd(0xfe)];if(_0x41e446[_0x5f42cd(0x12d)](_0x189a52)){const _0xf8dc2f=_0x1a2fd0['get'](_0x189a52);_0xf8dc2f['wins']++,_0xf8dc2f[_0x5f42cd(0x129)]++,_0xf8dc2f[_0x5f42cd(0x105)]+=parseInt(_0x4f67cd['winnerScore'])||0x0,_0xf8dc2f['totalDeaths']+=parseInt(_0x4f67cd['loserScore'])||0x0;}if(_0x41e446['includes'](_0x4bdff8)){const _0x43e758=_0x1a2fd0['get'](_0x4bdff8);_0x43e758['losses']++,_0x43e758['totalMatches']++,_0x43e758['totalKills']+=parseInt(_0x4f67cd['loserScore'])||0x0,_0x43e758[_0x5f42cd(0x130)]+=parseInt(_0x4f67cd['winnerScore'])||0x0;}}),_0x41e446[_0x28d3f3(0x101)](_0x2ce4e7=>{const _0x2a634e=_0x28d3f3,_0x4145ba=_0x1a2fd0['get'](_0x2ce4e7);_0x4145ba[_0x2a634e(0x12c)]=_0x4145ba['totalDeaths']>0x0?(_0x4145ba['totalKills']/_0x4145ba['totalDeaths'])['toFixed'](0x2):_0x4145ba['totalKills'],_0x4145ba[_0x2a634e(0x114)]=_0x4145ba[_0x2a634e(0x129)]>0x0?(_0x4145ba['wins']/_0x4145ba['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x251de5){console[_0x28d3f3(0x120)]('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x251de5);}return _0x1a2fd0;}function createPlayerRowD3(_0x31e7e6,_0x59c8ed,_0x52c049){const _0x3c28d7=a31_0x34d47c,_0x3d2a9b=parseFloat(_0x31e7e6['elo'])||0x0;let _0x133f16=_0x3c28d7(0x104);if(_0x3d2a9b>=0x7d0)_0x133f16='#50C878';else{if(_0x3d2a9b>=0x708)_0x133f16=_0x3c28d7(0x109);else{if(_0x3d2a9b>=0x640)_0x133f16='#b9f1fc';else _0x3d2a9b>=0x578&&(_0x133f16='#CD7F32');}}let _0x21a970='';_0x31e7e6['country']&&(_0x21a970=_0x3c28d7(0x103)+_0x31e7e6['country'][_0x3c28d7(0x112)]()+_0x3c28d7(0x113)+_0x31e7e6[_0x3c28d7(0x10f)]+_0x3c28d7(0x110));let _0x5ed9cf='';return _0x52c049&&(_0x5ed9cf=_0x3c28d7(0x12b)+_0x52c049['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x52c049['tokenName']+_0x3c28d7(0x119)+_0x52c049['tokenName']+'\x20'+(_0x52c049[_0x3c28d7(0x102)]?'(Equipped)':'')+_0x3c28d7(0x12a)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x31e7e6['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x31e7e6[_0x3c28d7(0x111)])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x133f16+_0x3c28d7(0xfd)+_0x31e7e6['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x21a970+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5ed9cf+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x133f16+_0x3c28d7(0x11b)+_0x3d2a9b+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x59c8ed['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x59c8ed['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x59c8ed['losses']+_0x3c28d7(0x116)+_0x59c8ed[_0x3c28d7(0x12c)]+_0x3c28d7(0x116)+_0x59c8ed[_0x3c28d7(0x114)]+_0x3c28d7(0x123);}async function getPlayersLastEloChangesD3(_0x435638){const _0x1c6009=a31_0x34d47c,_0x23299a=new Map();_0x435638[_0x1c6009(0x101)](_0x652e34=>_0x23299a['set'](_0x652e34,0x0));try{const _0x464c34=new Map(),_0x7cb574=await getDocs(collection(db,_0x1c6009(0x132)));_0x7cb574['forEach'](_0x2a999f=>{const _0x3f0c86=_0x1c6009,_0x30e196=_0x2a999f['data']();_0x30e196['username']&&_0x464c34[_0x3f0c86(0x100)](_0x2a999f['id'],_0x30e196[_0x3f0c86(0x111)]);});const _0x6c1d50=collection(db,_0x1c6009(0xf9)),_0x42fcfb=query(_0x6c1d50,orderBy('timestamp','desc'),limit(0x64)),_0x87bf1b=await getDocs(_0x42fcfb),_0x26d2bb=new Map();_0x87bf1b[_0x1c6009(0x101)](_0x436827=>{const _0x3b257d=_0x1c6009,_0x12e67c=_0x436827['data']();let _0x26da87=null;if(_0x12e67c[_0x3b257d(0x111)])_0x26da87=_0x12e67c[_0x3b257d(0x111)];else{if(_0x12e67c['playerUsername'])_0x26da87=_0x12e67c[_0x3b257d(0x131)];else{if(_0x12e67c['player']&&typeof _0x12e67c[_0x3b257d(0x117)]==='string')_0x26da87=_0x12e67c['player'];else{if(_0x12e67c['player']&&_0x464c34['has'](_0x12e67c[_0x3b257d(0x117)]))_0x26da87=_0x464c34['get'](_0x12e67c['player']);else _0x12e67c['playerId']&&_0x464c34[_0x3b257d(0xfb)](_0x12e67c['playerId'])&&(_0x26da87=_0x464c34['get'](_0x12e67c['playerId']));}}}_0x26da87&&_0x435638[_0x3b257d(0x12d)](_0x26da87)&&(!_0x26d2bb['has'](_0x26da87)&&_0x26d2bb[_0x3b257d(0x100)](_0x26da87,[]),_0x26d2bb['get'](_0x26da87)['push']({..._0x12e67c,'timestamp':_0x12e67c['timestamp']?.['seconds']||0x0}));}),_0x26d2bb[_0x1c6009(0x101)]((_0x8a4479,_0x13238a)=>{const _0x289d8d=_0x1c6009;if(_0x8a4479['length']>0x0){_0x8a4479['sort']((_0x74e9c7,_0x3d9536)=>_0x3d9536[_0x289d8d(0x11e)]-_0x74e9c7['timestamp']);const _0x48ff1d=_0x8a4479[_0x289d8d(0x108)](_0x1375e1=>_0x1375e1[_0x289d8d(0x11f)]!==undefined||_0x1375e1['newElo']!==undefined&&_0x1375e1['previousElo']!==undefined);if(_0x48ff1d){let _0x3b8959;if(_0x48ff1d[_0x289d8d(0x11f)]!==undefined)_0x3b8959=_0x48ff1d[_0x289d8d(0x11f)];else _0x48ff1d['newElo']!==undefined&&_0x48ff1d[_0x289d8d(0xf8)]!==undefined&&(_0x3b8959=_0x48ff1d['newElo']-_0x48ff1d['previousElo']);_0x3b8959!==undefined&&_0x23299a['set'](_0x13238a,_0x3b8959);}}});if(_0x26d2bb[_0x1c6009(0x135)]===0x0){const _0x2eb656=collection(db,'eloHistory'),_0x56cf7d=query(_0x2eb656,where('gameMode','==','D3'),orderBy(_0x1c6009(0x11e),'desc'),limit(0x32));try{const _0x57eeb9=await getDocs(_0x56cf7d);_0x57eeb9['forEach'](_0x37be47=>{const _0x4b0d1f=_0x1c6009,_0x22d77d=_0x37be47['data']();let _0x50b5b8=_0x22d77d['username']||_0x22d77d['playerUsername'];!_0x50b5b8&&_0x22d77d['player']&&_0x464c34['has'](_0x22d77d['player'])&&(_0x50b5b8=_0x464c34['get'](_0x22d77d['player']));if(_0x50b5b8&&_0x435638[_0x4b0d1f(0x12d)](_0x50b5b8)){const _0x49e469=_0x22d77d[_0x4b0d1f(0x11f)]||(_0x22d77d['newElo']!==undefined&&_0x22d77d[_0x4b0d1f(0xf8)]!==undefined?_0x22d77d['newElo']-_0x22d77d[_0x4b0d1f(0xf8)]:0x0);_0x49e469!==0x0&&_0x23299a['set'](_0x50b5b8,_0x49e469);}});}catch(_0x2bbabf){console['error']('D3:\x20Fallback\x20query\x20failed:',_0x2bbabf);}}}catch(_0x4f3174){console['error']('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x4f3174);}return _0x23299a;}window[a31_0x34d47c(0x118)]=function(_0x699d5d=!![]){const _0x1be5e9=a31_0x34d47c;typeof displayLadderD3==='function'?displayLadderD3(_0x699d5d):console['warn'](_0x1be5e9(0x10a));};export{displayLadderD3,updatePlayerPositions};