const a4_0x15d0de=a4_0x4fbe,a4_0x51d08d=(function(){let _0x25b096=!![];return function(_0x53bf29,_0x29285d){const _0xd6df73=_0x25b096?function(){if(_0x29285d){const _0x101daf=_0x29285d['apply'](_0x53bf29,arguments);return _0x29285d=null,_0x101daf;}}:function(){};return _0x25b096=![],_0xd6df73;};}()),a4_0x5175fd=a4_0x51d08d(this,function(){const _0x24ecd7=a4_0x4fbe,_0x34bb22=function(){const _0x32cef8=a4_0x4fbe;let _0x1268ce;try{_0x1268ce=Function(_0x32cef8(0x2a1)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3342cb){_0x1268ce=window;}return _0x1268ce;},_0xcdec76=_0x34bb22(),_0x3ece70=_0xcdec76['console']=_0xcdec76['console']||{},_0x39426a=['log','warn','info','error',_0x24ecd7(0x223),'table','trace'];for(let _0x42260a=0x0;_0x42260a<_0x39426a[_0x24ecd7(0x1b0)];_0x42260a++){const _0x1031b0=a4_0x51d08d[_0x24ecd7(0x19c)][_0x24ecd7(0x28a)]['bind'](a4_0x51d08d),_0x177f2a=_0x39426a[_0x42260a],_0x358788=_0x3ece70[_0x177f2a]||_0x1031b0;_0x1031b0['__proto__']=a4_0x51d08d[_0x24ecd7(0x2d4)](a4_0x51d08d),_0x1031b0['toString']=_0x358788['toString']['bind'](_0x358788),_0x3ece70[_0x177f2a]=_0x1031b0;}});a4_0x5175fd();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x3a4c08){const _0x40efcd=a4_0x4fbe;if(!_0x3a4c08)return _0x40efcd(0x1ba);_0x3a4c08=_0x3a4c08['replace']('#','');_0x3a4c08[_0x40efcd(0x1b0)]===0x3&&(_0x3a4c08=_0x3a4c08['split']('')[_0x40efcd(0x1db)](_0x47d8af=>_0x47d8af+_0x47d8af)[_0x40efcd(0x195)](''));if(_0x3a4c08['length']!==0x6)return _0x40efcd(0x1ba);const _0x240923=parseInt(_0x3a4c08['substring'](0x0,0x2),0x10),_0x5d3305=parseInt(_0x3a4c08[_0x40efcd(0x258)](0x2,0x4),0x10),_0x3755cc=parseInt(_0x3a4c08[_0x40efcd(0x258)](0x4,0x6),0x10),_0x43a521=(_0x240923*0x12b+_0x5d3305*0x24b+_0x3755cc*0x72)/0x3e8;return _0x43a521>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE=a4_0x15d0de(0x1c7),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x17c625=>{const _0x25ab84=a4_0x4fbe;if(!_0x17c625){window[_0x25ab84(0x179)]['href']=_0x25ab84(0x2e0);return;}try{await initializeAdminDashboard();}catch(_0x2336a0){console['error']('Error\x20initializing\x20dashboard:',_0x2336a0),showNotification(_0x25ab84(0x2e4),'error');}});});async function getUserTabPermissions(_0x29c194){const _0x4726b1=a4_0x15d0de;if(!_0x29c194)return[_0x4726b1(0x16a)];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x29c194+'\x20in\x20all\x20collections...');const _0x30de8c=[{'name':'userProfiles','displayName':_0x4726b1(0x1be)},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':_0x4726b1(0x184)},{'name':'nonParticipants','displayName':_0x4726b1(0x356)}],_0x45fc3a=auth['currentUser'];let _0x5626bd=null,_0x42e07d=null;for(const _0xea5edf of _0x30de8c){try{if(_0x45fc3a){const _0x1d5733=doc(db,_0xea5edf['name'],_0x45fc3a['uid']),_0x1618ee=await getDoc(_0x1d5733);if(_0x1618ee['exists']()){const _0x5ea747=_0x1618ee['data']();console['log'](_0x4726b1(0x1fd)+_0xea5edf['displayName']+'\x20by\x20UID:',_0x5ea747);const _0x44d54c=(_0x5ea747[_0x4726b1(0x373)]||_0x5ea747[_0x4726b1(0x33a)]||'')['toLowerCase']();if(_0x44d54c&&_0x44d54c!==_0x4726b1(0x1c6)){_0x5626bd=_0x44d54c,_0x42e07d=_0xea5edf['displayName'],console[_0x4726b1(0x197)]('Found\x20specific\x20role:\x20'+_0x5626bd+'\x20in\x20'+_0x42e07d);break;}}}if(!_0x5626bd){const _0x5be2f5=collection(db,_0xea5edf[_0x4726b1(0x2af)]),_0x3c77a5=query(_0x5be2f5,where('email','==',_0x29c194)),_0x45872a=await getDocs(_0x3c77a5);if(!_0x45872a[_0x4726b1(0x267)]){const _0xe818eb=_0x45872a[_0x4726b1(0x144)][0x0]['data']();console['log'](_0x4726b1(0x1fd)+_0xea5edf['displayName']+_0x4726b1(0x219)+_0x29c194+':',_0xe818eb);const _0x20cf12=(_0xe818eb[_0x4726b1(0x373)]||_0xe818eb['role']||'')['toLowerCase']();if(_0x20cf12&&_0x20cf12!=='none'){_0x5626bd=_0x20cf12,_0x42e07d=_0xea5edf['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x5626bd+_0x4726b1(0x387)+_0x42e07d);break;}}}}catch(_0x27f5ae){console[_0x4726b1(0x1a6)](_0x4726b1(0x23a)+_0xea5edf[_0x4726b1(0x304)]+':',_0x27f5ae);}}if(_0x5626bd){console['log'](_0x4726b1(0x1c1)+_0x5626bd+'\x20(from\x20'+_0x42e07d+')');const _0x1d2780={'admin':[_0x4726b1(0x16a),_0x4726b1(0x2dc),'manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings',_0x4726b1(0x29d),'elo-history','manage-highlights',_0x4726b1(0x2ba),'manage-matches',_0x4726b1(0x26f),_0x4726b1(0x240),'manage-ribbons'],'owner':['dashboard',_0x4726b1(0x2dc),_0x4726b1(0x145),'manage-articles','manage-trophies','manage-ranks','inactive-players',_0x4726b1(0x2f9),'manage-trophies','elo-history',_0x4726b1(0x1aa),'user-roles-section','manage-matches','manage-points',_0x4726b1(0x240),_0x4726b1(0x35a)],'council':[_0x4726b1(0x16a),'manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles',_0x4726b1(0x29d),'elo-history','manage-highlights']};if(_0x1d2780[_0x5626bd])return console[_0x4726b1(0x197)]('Role\x20\x27'+_0x5626bd+'\x27\x20has\x20permissions:',_0x1d2780[_0x5626bd]),_0x1d2780[_0x5626bd];}return console[_0x4726b1(0x197)]('No\x20specific\x20permissions\x20for\x20user\x20'+_0x29c194+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x209a23=[]){const _0x583869=a4_0x15d0de,_0x1a9a20=document[_0x583869(0x187)](_0x583869(0x188)),_0x4495a0=document['querySelectorAll'](_0x583869(0x303));(!_0x209a23||_0x209a23['length']===0x0)&&(_0x209a23=['dashboard']);_0x1a9a20['forEach'](_0x37dc0d=>{const _0x5df055=_0x583869,_0x4837ec=_0x37dc0d[_0x5df055(0x2b5)](_0x5df055(0x292));_0x209a23[_0x5df055(0x1f3)](_0x4837ec)?_0x37dc0d['style'][_0x5df055(0x2d9)]='flex':_0x37dc0d[_0x5df055(0x31e)]['display']='none',_0x37dc0d['addEventListener']('click',()=>{const _0x1fe31d=_0x5df055,_0x26a457=_0x37dc0d['getAttribute'](_0x1fe31d(0x292));if(!_0x209a23['includes'](_0x26a457)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section',_0x1fe31d(0x1a6));return;}_0x1a9a20[_0x1fe31d(0x170)](_0xe90305=>_0xe90305['classList']['remove'](_0x1fe31d(0x28d))),_0x37dc0d[_0x1fe31d(0x355)]['add']('active'),_0x4495a0['forEach'](_0x2e23aa=>{const _0x27764c=_0x1fe31d;_0x2e23aa['style'][_0x27764c(0x2d9)]='none';});const _0x247c34=document['getElementById'](_0x26a457);_0x247c34&&(_0x247c34['style']['display']='block',console['log']('Switched\x20to\x20'+_0x26a457+'\x20section'));});});const _0x5bd40b=document[_0x583869(0x32c)]('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x209a23[0x0]+'\x22]');_0x5bd40b&&_0x5bd40b['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x1cf016=document['querySelectorAll']('.nav-item');let _0x4c3148=null,_0x2d71b7=new Set();_0x1cf016['forEach'](_0x2c5731=>{_0x2c5731['addEventListener']('click',function(){const _0x5641f2=a4_0x4fbe,_0x1fcf46=this['getAttribute'](_0x5641f2(0x292));if(_0x1fcf46===_0x4c3148)return;_0x4c3148&&(document['getElementById'](_0x4c3148)['style']['display']='none',_0x1cf016['forEach'](_0x49dfa2=>_0x49dfa2['classList']['remove']('active'))),document['getElementById'](_0x1fcf46)[_0x5641f2(0x31e)]['display']='block',this[_0x5641f2(0x355)]['add']('active'),_0x4c3148=_0x1fcf46;});});}function loadSectionData(_0x4b5bc0){return;}async function initializeAdminDashboard(){const _0x244c98=a4_0x15d0de;try{const _0x598ab9=auth[_0x244c98(0x1e5)],_0x3913c8=await getUserTabPermissions(_0x598ab9['email']);console['log']('User\x20'+_0x598ab9['email']+'\x20allowed\x20tabs:',_0x3913c8),window['userAllowedTabs']=_0x3913c8,setupSidebarNavigation(_0x3913c8),setupLadderSelector(),setupDashboardSection(),_0x3913c8['includes']('manage-players')&&setupManagePlayersSection(),_0x3913c8['includes']('elo-history')&&setupEloHistorySection(),_0x3913c8['includes']('manage-ranks')&&setupRankControls(),_0x3913c8['includes'](_0x244c98(0x37c))&&setupManageArticlesSection(),_0x3913c8[_0x244c98(0x1f3)]('user-roles-section')&&setupUserRolesSection(),_0x3913c8['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x3913c8['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x3913c8[_0x244c98(0x1f3)]('inactive-players')&&setupInactivePlayersSection(),_0x3913c8['includes'](_0x244c98(0x145))&&setupManageMatchesSection(),_0x3913c8['includes'](_0x244c98(0x26f))&&setupManagePointsSection(),_0x3913c8['includes'](_0x244c98(0x35a))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x3913c8);}catch(_0xb1008c){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0xb1008c);}}function setupDataLoadButtons(_0x563e5c=[]){const _0x333990=a4_0x15d0de;(!_0x563e5c||_0x563e5c['length']===0x0)&&(_0x563e5c=[_0x333990(0x16a)]);const _0x3b5e3c=document['getElementById']('load-dashboard-data');_0x3b5e3c&&_0x3b5e3c['addEventListener']('click',function(){const _0x2e62fd=_0x333990;this[_0x2e62fd(0x355)]['add']('loading'),this[_0x2e62fd(0x149)]=_0x2e62fd(0x19b),loadDashboardOverview()[_0x2e62fd(0x255)](()=>{const _0x447e74=_0x2e62fd;this['classList']['remove']('loading'),this['innerHTML']=_0x447e74(0x37e);})['catch'](_0x501251=>{const _0x17f5d4=_0x2e62fd;console['error'](_0x17f5d4(0x269),_0x501251),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x563e5c['includes']('manage-trophies')){const _0x3909eb=document[_0x333990(0x29f)]('load-trophies-data');_0x3909eb&&_0x3909eb['addEventListener']('click',function(){const _0x1b959c=_0x333990;console[_0x1b959c(0x197)](_0x1b959c(0x13f)),this['classList'][_0x1b959c(0x2ff)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0x1b959c(0x255)](()=>{const _0x513d88=_0x1b959c;this[_0x513d88(0x355)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x53e310=>{const _0x58bbe8=_0x1b959c;console['error']('Error\x20loading\x20trophies:',_0x53e310),this['classList']['remove']('loading'),this['innerHTML']=_0x58bbe8(0x1b6),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x563e5c['includes']('manage-players')){const _0x229e10=document[_0x333990(0x29f)]('load-players-data');_0x229e10&&_0x229e10['addEventListener'](_0x333990(0x1f5),function(){const _0x17e439=_0x333990;console['log'](_0x17e439(0x2c3)),this['classList'][_0x17e439(0x2ff)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x590432=_0x17e439;this[_0x590432(0x355)]['remove']('loading'),this[_0x590432(0x149)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x4eb2d2=>{const _0x15e3bb=_0x17e439;console['error']('Error\x20loading\x20players:',_0x4eb2d2),this['classList'][_0x15e3bb(0x2dd)](_0x15e3bb(0x1ca)),this[_0x15e3bb(0x149)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x563e5c['includes']('elo-history')){const _0x17f4e4=document['getElementById']('load-elo-history-data');_0x17f4e4&&_0x17f4e4[_0x333990(0x301)](_0x333990(0x1f5),function(){const _0x41d921=_0x333990;console[_0x41d921(0x197)]('Load\x20history\x20data\x20clicked'),this[_0x41d921(0x355)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x5e3da3=_0x41d921;this['classList'][_0x5e3da3(0x2dd)](_0x5e3da3(0x1ca)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x122060=>{const _0x14e9cb=_0x41d921;console['error']('Error\x20loading\x20history:',_0x122060),this['classList']['remove']('loading'),this[_0x14e9cb(0x149)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x563e5c['includes']('manage-articles')){const _0x488752=document[_0x333990(0x29f)]('load-articles-data');_0x488752&&_0x488752[_0x333990(0x301)](_0x333990(0x1f5),function(){const _0x1a2144=_0x333990;console[_0x1a2144(0x197)]('Load\x20articles\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x1a2144(0x255)](()=>{const _0x14235c=_0x1a2144;this[_0x14235c(0x355)]['remove'](_0x14235c(0x1ca)),this[_0x14235c(0x149)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})[_0x1a2144(0x250)](_0x20172c=>{const _0x26da45=_0x1a2144;console[_0x26da45(0x1a6)]('Error\x20loading\x20articles:',_0x20172c),this['classList']['remove'](_0x26da45(0x1ca)),this[_0x26da45(0x149)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x563e5c['includes']('user-roles-section')){const _0x41ca62=document['getElementById'](_0x333990(0x329));_0x41ca62&&_0x41ca62[_0x333990(0x301)]('click',function(){const _0x38263b=_0x333990;console[_0x38263b(0x197)](_0x38263b(0x270)),this['classList']['add']('loading'),this['innerHTML']=_0x38263b(0x19b),loadUsersWithRoles()['then'](()=>{const _0x486843=_0x38263b;this[_0x486843(0x355)][_0x486843(0x2dd)](_0x486843(0x1ca)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x5d7bec=>{const _0x591698=_0x38263b;console[_0x591698(0x1a6)]('Error\x20loading\x20users:',_0x5d7bec),this[_0x591698(0x355)][_0x591698(0x2dd)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xc3fea4=_0x591698;this[_0xc3fea4(0x149)]=_0xc3fea4(0x16e);},0xbb8);});});}if(_0x563e5c['includes']('inactive-players')){const _0x49c2a3=document['getElementById']('load-inactive-players-data');_0x49c2a3&&_0x49c2a3['addEventListener']('click',function(){console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x473b54=a4_0x4fbe;this['classList']['remove']('loading'),this[_0x473b54(0x149)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x76e8f0=>{const _0x13787e=a4_0x4fbe;console['error']('Error\x20loading\x20inactive\x20players:',_0x76e8f0),this[_0x13787e(0x355)]['remove']('loading'),this['innerHTML']=_0x13787e(0x1b6),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x563e5c['includes']('manage-highlights')){const _0x26bd55=document[_0x333990(0x29f)]('load-highlights-data');_0x26bd55&&_0x26bd55['addEventListener']('click',function(){const _0x43fbe8=_0x333990;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add'](_0x43fbe8(0x1ca)),this[_0x43fbe8(0x149)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x43fbe8(0x255)](()=>{const _0x127dbb=_0x43fbe8;this['classList'][_0x127dbb(0x2dd)]('loading'),this[_0x127dbb(0x149)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})[_0x43fbe8(0x250)](_0x27ba3c=>{const _0x5ab8f0=_0x43fbe8;console[_0x5ab8f0(0x1a6)](_0x5ab8f0(0x38f),_0x27ba3c),this[_0x5ab8f0(0x355)]['remove'](_0x5ab8f0(0x1ca)),this['innerHTML']=_0x5ab8f0(0x1b6),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x563e5c[_0x333990(0x1f3)]('manage-matches')){const _0x107110=document[_0x333990(0x29f)](_0x333990(0x225));_0x107110&&_0x107110['addEventListener']('click',function(){const _0xd99c90=_0x333990;console['log']('Load\x20matches\x20data\x20clicked'),this['classList'][_0xd99c90(0x2ff)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0xd99c90(0x255)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})[_0xd99c90(0x250)](_0x93621d=>{const _0x313c8e=_0xd99c90;console['error'](_0x313c8e(0x1bc),_0x93621d),this['classList']['remove'](_0x313c8e(0x1ca)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3609c5=_0x313c8e;this[_0x3609c5(0x149)]=_0x3609c5(0x224);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x563e5c['includes']('manage-ribbons')){const _0xd5a181=document[_0x333990(0x29f)]('load-ribbons-data');_0xd5a181&&_0xd5a181['addEventListener']('click',function(){const _0x329cdf=_0x333990;console['log']('Load\x20ribbons\x20data\x20clicked'),this[_0x329cdf(0x355)][_0x329cdf(0x2ff)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x162d0b=>{const _0xedaa=_0x329cdf;console[_0xedaa(0x1a6)](_0xedaa(0x2f7),_0x162d0b),this[_0xedaa(0x355)][_0xedaa(0x2dd)](_0xedaa(0x1ca)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log'](_0x333990(0x189));}function a4_0x2870(){const _0x3179b5=['userId','highlight-match-info','RejectedD2','commit','Loading\x20points\x20data...','elo','reset','Please\x20enter\x20a\x20username','Error\x20modifying\x20points:','modifiedBy','Load\x20trophies\x20data\x20clicked','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>','No\x20reason\x20provided','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','confirm-resimulate-btn','docs','manage-matches','#highlight-modal\x20.close-btn','timestamp','achievementImageUrl','innerHTML','Failed\x20to\x20modify\x20points:\x20','N/A','loserSuicides','Setting\x20up\x20points\x20action\x20buttons...','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','TestMap','Current\x20user:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','Error\x20loading\x20article\x20data:','highlight-players-container','matches-end-date','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','Create\x20test\x20match\x20form\x20submitted','trophy-modal','Username\x20','Subtracted\x20','elo-history-search','article-form','edit-username','cancel-set-elo-btn','edit-match-title','Submit\x20button\x20clicked\x20directly','promotedBy','sendPromotionNotification','Player\x20deleted\x20successfully','\x20Rank\x20Distribution','ladder','.view-history-btn','Attempting\x20to\x20promote\x20','-prev-page','activity-chart','dashboard','.edit-btn','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','0.6','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','Failed\x20to\x20save\x20trophy:\x20','forEach','mapPlayed','highlight-video-preview-container','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','highlight-map','lastUpdated','#e0e0e0','Error\x20adding\x20ribbon','keys','location','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','No\x20description','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','replaceChild','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-match-id','Defaulted\x20to\x20D1\x20ladder','Failed\x20to\x20load\x20user\x20data:\x20','Error\x20fetching\x20matches\x20for\x20','highlight-modal','D3\x20Players','playerId','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>','querySelectorAll','.sidebar-nav\x20.nav-item','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','Untitled','winnerScore','createdBy','startDate','Found\x20','Error\x20initializing\x20points\x20field:','.quick-edit-btn','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','trophy-id','Error\x20saving\x20match:','Please\x20enter\x20valid\x20username\x20and\x20ELO','join','create-test-match-modal','log','User\x20not\x20found','creator','Modal\x20element\x20found:','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','constructor','Form\x20elements\x20are\x20missing','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','highlight-match-date','pendingMatches','highly-inactive','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','input','.username','Creator\x20highlight\x20button\x20clicked','error','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','manage-highlights','empty-state','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','length','load-inactive-players-data','edit-highlight-type-select','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','Unknown\x20Admin','edit-highlight-matchDate-input','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','Error\x20deleting\x20highlight:\x20','approvedAt','ribbons','#ffffff','</span>','Error\x20loading\x20matches:','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','User\x20Profiles','roleAssignedAt','\x20quick\x20edit\x20buttons','Setting\x20permissions\x20based\x20on\x20role:\x20','edit-highlight-map-input','edit-match-loser-comment','store-item-select','highlights','none','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','data','removeAttribute','loading','highlight-video-id','disabled','edit-match-winner-suicides','set-elo-ladder','success','trophyId','User\x20\x22','Error\x20loading\x20trophies:','Error\x20setting\x20user\x20role:','roleColor','highlight-achievement-details-container','no-results','toLowerCase','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','setDate','Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM','map','assign-player-username','highlight-achievement-player-container','destroy','playersD2','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','imageUrl','Inactive\x20players\x20section\x20initialized','achievementPlayer','highlight-description','currentUser','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','quick-edit-current-points','\x22\x20not\x20found\x20in\x20','role-color','Please\x20enter\x20valid\x20data','currentTarget','article-title','target','createElement','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','approvedMatchesD3','\x20points\x20history\x20entries','refresh-points-overview','includes','amount','click','Player\x20not\x20found\x20in\x20','Error\x20opening\x20edit\x20modal:','highlight-submitted-by-container','award-item-form','eloHistoryD2','pendingMatchesD2','info','Found\x20user\x20in\x20','.close-btn','opacity','Error\x20adding\x20ribbon:','achievementType','closest','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','trophy-preview-img','\x20(based\x20on\x20data-role:\x20','Error\x20loading\x20ribbons\x20data','match-details-container','.ladder-switch\x20input','\x20with\x20ELO\x20','cancel-role-btn','highlight-match-link','confirmResimulateMatch','description','.error-state','Setting\x20up\x20Manage\x20Matches\x20section','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Player\x20','current-ladder-display','highlight-id','creator-type','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','rgba(25,\x20118,\x20210,\x200.7)','img','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20with\x20email\x20','change','Error\x20opening\x20assign\x20trophy\x20modal:','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','ribbon-level',';\x20color:\x20','previousPoints','Edit\x20match\x20clicked:','Deleting\x20match\x20','\x20not\x20found.','exception','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','load-matches-data','loserName','rank-distribution-chart','positive-change','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','demote-username','toLocaleDateString','Highlight\x20updated\x20successfully!','achievement-type','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','Failed\x20to\x20update\x20player:\x20','Manage\x20Ribbons\x20section\x20initialized','Setting\x20up\x20create\x20test\x20match\x20button','src','demotion','split','Gold','author','Unknown','highlight-achievement-type-container','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','Error\x20checking\x20','Role\x20removed','all','contains','submit','set-role-form','manage-levels-ribbons','eloHistory','Page\x20','winnerName','Error\x20loading\x20dashboard\x20data:','initial_placement','Unranked','create-new-trophy-btn','Demotion','block','matchDate','user-search','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','Trophy\x20definition\x20deleted\x20successfully','edit-highlight-description-input','#create-test-match-form','catch','edit-match-winner-score','videoId','article-content','Wednesday','then','resimulate-modal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','substring','Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!','level','Failed\x20to\x20save\x20article:\x20','#d32f2f','find','Error\x20saving\x20highlight:','textContent','createdAt','localeCompare','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','mapCreator','preventDefault','highlight-submitted-by','Quick\x20edit\x20form\x20submitted','empty','Bronze','Error\x20loading\x20dashboard:','ribbon-target-user','user-ribbon-management','quick-points-amount','highlight-achievement-image-container','trophy-rarity','manage-points','Load\x20users\x20data\x20clicked','#808080','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','pending-count','.assign-trophy-btn','Edit\x20Article','\x20ladder','fa-info-circle','Silver','Match\x20Highlight','points-asc','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','highlight-winner-score','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','desc','Manage\x20Highlights\x20section\x20initialized','highlight-creator-image','eloRating','asc','View\x20player\x20details\x20for\x20','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','sort','loserComment','mapName','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','prototype','achievementDetails','endDate','active','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','\x20vs\x20','\x20total\x20players\x20in\x20the\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','data-section','warn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','pointsHistory','edit-highlight-winnerScore-input','date','Error\x20loading\x20ELO\x20history:','mapVersion','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','Emerald','manage-trophies','toLocaleString','getElementById','size','return\x20(function()\x20','position','Failed\x20to\x20load\x20match\x20data','parentNode','article-id','seconds','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','Highlight\x20deleted\x20successfully','matchId','match','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','matchLink','page','name','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','Positions\x20updated:\x20Winner\x20','playerProfileUrl','ref','Modal\x20background\x20clicked','getAttribute','setHours','className','Error\x20in\x20demotion:','Trophy\x20\x22','user-roles-section','lastVisible','promotion','Error\x20deleting\x20highlight:','\x20view\x20history\x20buttons','MAX_SAFE_INTEGER','Create\x20Article','winnerUsername','allUsersPoints','Load\x20players\x20data\x20clicked','Ribbons\x20data\x20loaded\x20successfully','removeEventListener','\x20(winner)\x20vs\x20','achievement','reason','assign-trophy-rarity','loserUsername','trophy-form','Successfully\x20demoted\x20','userTrophies','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','Error\x20applying\x20filters:','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','history-start-date','Error\x20searching\x20for\x20user','bind','article-author','Closing\x20create\x20test\x20match\x20modal','error-state','alt','display','type','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','manage-players','remove','onerror','button[type=\x22submit\x22]','login.html','update','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','Error\x20setting\x20up\x20admin\x20dashboard','history-type-filter','highlight-type','quick-edit-points-modal','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','set','inactive-days-filter','demotedBy','player-search','Successfully\x20promoted\x20','\x20to\x20','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','players','get','create-new-article-btn','points','#players-table-body\x20tr','Error\x20loading\x20ribbons:','Auth:','settings','trophy-description','#elo-history-table-body\x20tr','dataset','visibility','\x20→\x20','add','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','addEventListener','RejectedD1','.admin-section','displayName','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','Points\x20updated\x20successfully','highlight-title-container','View\x20history\x20clicked\x20for\x20user:','edit-match-loser-score','\x22\x20not\x20found\x20in\x20any\x20collection','points-sort-order','non-participant','data-match-id','matches-start-date','admin_modification','.edit-trophy-btn','creatorImageUrl','data-ladder','Setting\x20up\x20highlight\x20buttons','Found\x20ELO\x20history\x20for\x20player\x20','edit-wins','promote-form','ribbon-type-select','Added\x20','Toggling\x20fields\x20for\x20highlight\x20type:\x20','backgroundColor','Promotion\x20notification\x20sent\x20to\x20Discord\x20bot','roleAssignedBy','edit-match-winner-comment','style','Match','Match\x20highlight\x20button\x20clicked','Using\x20collection:\x20','push','current-ribbon-user','afterend','articles','approvedMatches','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','div','load-users-data','loserScore','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>','querySelector','Points\x20updated\x20successfully\x20for\x20user:','highlight-video-container','Lost','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','Highlight\x20created\x20successfully!','assign-trophy-name','Found\x20player\x20with\x20current\x20ELO:\x20','Unnamed\x20Trophy','d1-next-page','nonParticipants','subtract','openResimulateModal\x20called!','playerRibbons','role','exists','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','validation-results-container','Modal\x20setup\x20complete','highlight-player-profile','userProfiles','rankDistribution','article-modal-title','test','trim','value','uid','Failed\x20to\x20load\x20article\x20data','reduce','cancel-article-btn','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','input[name=\x22set-elo-ladder\x22]:checked','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','cloneNode','firstVisible','message','input[name=\x22test-match-ladder\x22]','borderRadius','daysSinceMatch','closeResimulateModal','\x20points','classList','Non-Participants','Firebase\x20connection\x20test\x20successful!','-page-indicator','matchInfo','manage-ribbons','highlight-title','trophyDefinitions','username','edit-match-loser-demo','highlight-achievement-type','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','loading-cell','cancel-highlight-btn','Loading...','\x22\x20awarded\x20to\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','common','No\x20email','edit-losses','player','highlight-achievement-image','demote-modal','loserDemoLink','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','winnerSuicides','Switched\x20to\x20','appendChild','Error\x20finding\x20match:','delete-match-confirm-modal','roleName','\x20before\x20match:\x20','Created\x20','edit-match-ladder','Unknown\x20Player','Saturday','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','approvedMatchesD2','Failed\x20to\x20delete\x20trophy:\x20','manage-articles','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','demote-ladder','highlight-loser-name','#inactive-players-table-body\x20tr','Never','selected-user-info','fromDate','\x22\x20already\x20has\x20this\x20trophy','assign-trophy-modal','\x20in\x20','edit-match-modal','edit-match-winner-demo','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','set-role-modal','stopPropagation','admin','email','Error\x20loading\x20highlights:','reset-matches-filters','highlight-match-date-container','newElo','pendingResimulateData'];a4_0x2870=function(){return _0x3179b5;};return a4_0x2870();}function setupDashboardSection(){const _0x520bf0=a4_0x15d0de;document['getElementById']('player-count')[_0x520bf0(0x25f)]='-',document[_0x520bf0(0x29f)]('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x520bf0(0x29f)]('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x3d4757=a4_0x15d0de,_0x4c56a0=document['querySelectorAll'](_0x3d4757(0x208));_0x4c56a0['forEach'](_0x388bbd=>{_0x388bbd['addEventListener']('change',()=>{const _0x3a02ef=a4_0x4fbe;currentLadder=_0x388bbd[_0x3a02ef(0x345)],document['body']['setAttribute'](_0x3a02ef(0x312),currentLadder);const _0x59a817=document['getElementById']('current-ladder-display');_0x59a817&&(_0x59a817['textContent']=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document[_0x3a02ef(0x29f)](_0x3a02ef(0x273))[_0x3a02ef(0x25f)]='-',document[_0x3a02ef(0x29f)]('rejected-count')[_0x3a02ef(0x25f)]='-',charts[_0x3a02ef(0x341)]&&(charts['rankDistribution']['destroy'](),charts[_0x3a02ef(0x341)]=null),charts['activity']&&(charts['activity'][_0x3a02ef(0x1de)](),charts['activity']=null),showNotification(_0x3a02ef(0x36f)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x3a02ef(0x1fc));});});const _0x1b4720=document[_0x3d4757(0x29f)](_0x3d4757(0x212));_0x1b4720&&(_0x1b4720[_0x3d4757(0x25f)]=currentLadder);}async function loadDashboardOverview(){const _0x1340da=a4_0x15d0de;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x1340da(0x29f)]('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0x4eb3d7=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0xeb5856=currentLadder==='D1'?_0x1340da(0x326):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3323bb=currentLadder==='D1'?_0x1340da(0x1a0):currentLadder==='D2'?_0x1340da(0x1fb):'pendingMatchesD3',_0x14702c=currentLadder==='D1'?_0x1340da(0x302):currentLadder==='D2'?_0x1340da(0x137):'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x4eb3d7+',\x20'+_0xeb5856);const _0x3b06a5=await getDocs(collection(db,_0x4eb3d7)),_0x56bae6=_0x3b06a5['size'],_0x502a90=await getDocs(collection(db,_0xeb5856)),_0x395402=_0x502a90['size'],_0x598d96=await getDocs(collection(db,_0x3323bb)),_0x404be8=_0x598d96['size'],_0x755299=await getDocs(collection(db,_0x14702c)),_0x5173aa=_0x755299['size'];return document['getElementById']('player-count')['textContent']=_0x56bae6,document[_0x1340da(0x29f)]('match-count')['textContent']=_0x395402,document['getElementById']('pending-count')['textContent']=_0x404be8,document['getElementById']('rejected-count')['textContent']=_0x5173aa,await createRankDistributionChart(),await createActivityChart(),console[_0x1340da(0x197)]('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x5eb3b2){console[_0x1340da(0x1a6)](_0x1340da(0x244),_0x5eb3b2);throw _0x5eb3b2;}}async function createRankDistributionChart(){const _0x41949d=a4_0x15d0de;try{const _0x4ab1df=collection(db,currentLadder==='D1'?_0x41949d(0x2f2):_0x41949d(0x1df)),_0x12d8e8=await getDocs(_0x4ab1df),_0x5a7c37={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x12d8e8['forEach'](_0x248d76=>{const _0x162903=_0x41949d,_0x373bf7=_0x248d76['data'](),_0x4a75da=_0x373bf7[_0x162903(0x282)]||0x4b0;if(_0x4a75da>=0x7d0)_0x5a7c37[_0x162903(0x29c)]++;else{if(_0x4a75da>=0x708)_0x5a7c37[_0x162903(0x235)]++;else{if(_0x4a75da>=0x640)_0x5a7c37['Silver']++;else{if(_0x4a75da>=0x578)_0x5a7c37['Bronze']++;else _0x5a7c37['Unranked']++;}}}});const _0x3a0fd8=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts[_0x41949d(0x341)]=new Chart(_0x3a0fd8,{'type':'doughnut','data':{'labels':Object[_0x41949d(0x178)](_0x5a7c37),'datasets':[{'data':Object['values'](_0x5a7c37),'backgroundColor':['#808080','#CD7F32','#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x41949d(0x164),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x467945){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x467945),document['getElementById'](_0x41949d(0x227))[_0x41949d(0x149)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x36ebcc=a4_0x15d0de;try{const _0x212dd4=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x2ef086=collection(db,_0x212dd4),_0x1c41b6=new Date();_0x1c41b6[_0x36ebcc(0x1d9)](_0x1c41b6['getDate']()-0x7);const _0x3254b0=query(_0x2ef086,where('approvedAt','>=',_0x1c41b6),orderBy('approvedAt',_0x36ebcc(0x283))),_0x4947ab=await getDocs(_0x3254b0),_0x473b5f=['Sunday','Monday','Tuesday',_0x36ebcc(0x254),'Thursday','Friday',_0x36ebcc(0x378)],_0x4a2682=_0x473b5f[_0x36ebcc(0x348)]((_0x2f03cc,_0x15d4a4)=>({..._0x2f03cc,[_0x15d4a4]:0x0}),{});_0x4947ab[_0x36ebcc(0x170)](_0x2c9c0b=>{const _0x4006f6=_0x36ebcc,_0x1ecf67=_0x2c9c0b[_0x4006f6(0x1c8)]();if(_0x1ecf67['approvedAt']){const _0x4f1d8a=_0x473b5f[new Date(_0x1ecf67['approvedAt']['seconds']*0x3e8)['getDay']()];_0x4a2682[_0x4f1d8a]++;}});const _0x15234b=document['getElementById'](_0x36ebcc(0x169));charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x15234b,{'type':'bar','data':{'labels':_0x473b5f,'datasets':[{'label':'Matches\x20Played','data':_0x473b5f['map'](_0x4f123b=>_0x4a2682[_0x4f123b]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0x36ebcc(0x216),'borderColor':currentLadder==='D1'?_0x36ebcc(0x25c):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x36ebcc(0x176)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x36ebcc(0x176)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':_0x36ebcc(0x176),'font':{'size':0x10}}}}});}catch(_0x41265f){console['error']('Error\x20creating\x20activity\x20chart:',_0x41265f),document[_0x36ebcc(0x29f)]('activity-chart')['innerHTML']=_0x36ebcc(0x2e3);}}async function loadPlayersData(){const _0xd453bb=a4_0x15d0de,_0x3b5175=document['getElementById']('players-table-body');if(!_0x3b5175)return;_0x3b5175['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0xaa7f9e=_0xd453bb(0x2f2);if(currentLadder==='D2')_0xaa7f9e='playersD2';else currentLadder==='D3'&&(_0xaa7f9e='playersD3');console[_0xd453bb(0x197)]('Loading\x20players\x20from\x20'+_0xaa7f9e+'\x20collection...');const _0x5dcadd=collection(db,_0xaa7f9e),_0x47881e=query(_0x5dcadd,orderBy(_0xd453bb(0x282),_0xd453bb(0x27f))),_0x366671=await getDocs(_0x47881e);if(_0x366671[_0xd453bb(0x267)]){_0x3b5175['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x3b5175['innerHTML']='';let _0x324b7e=0x1;_0x366671[_0xd453bb(0x170)](_0x2ee73b=>{const _0x2862f8=_0xd453bb,_0x28173e=_0x2ee73b['data'](),_0x1b7e2f=getRankFromElo(_0x28173e[_0x2862f8(0x282)]||0x4b0),_0x370f12=getRankStyle(_0x28173e[_0x2862f8(0x282)]||0x4b0),_0x502cf2=document['createElement']('tr');_0x502cf2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x324b7e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x370f12['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x28173e['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x28173e[_0x2862f8(0x282)]||0x4b0)+_0x2862f8(0x34c)+_0x370f12['color']+_0x2862f8(0x1af)+_0x1b7e2f+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x28173e['wins']||0x0)+'W\x20/\x20'+(_0x28173e['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x2ee73b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x2ee73b['id']+_0x2862f8(0x2ab),_0x3b5175[_0x2862f8(0x370)](_0x502cf2),_0x324b7e++;}),setupPlayerActionButtons();}catch(_0xa2c24c){console['error']('Error\x20loading\x20players:',_0xa2c24c),_0x3b5175['innerHTML']=_0xd453bb(0x1a8)+_0xa2c24c['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x3ee9c2){const _0xd54bc1=a4_0x15d0de;if(_0x3ee9c2>=0x7d0)return'Emerald';if(_0x3ee9c2>=0x708)return'Gold';if(_0x3ee9c2>=0x640)return _0xd54bc1(0x278);if(_0x3ee9c2>=0x578)return'Bronze';return _0xd54bc1(0x246);}function setupPlayerActionButtons(){const _0x17a4be=a4_0x15d0de;document['querySelectorAll'](_0x17a4be(0x16b))[_0x17a4be(0x170)](_0x4c6150=>{_0x4c6150['addEventListener']('click',async _0x95d7e2=>{const _0x28d61a=a4_0x4fbe,_0x1f385a=_0x95d7e2['currentTarget'][_0x28d61a(0x2fc)]['id'];openEditPlayerModal(_0x1f385a);});}),document['querySelectorAll']('.delete-btn')[_0x17a4be(0x170)](_0x24e27d=>{_0x24e27d['addEventListener']('click',async _0x3d7100=>{const _0x5b2050=_0x3d7100['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x5b2050);});});}async function openEditPlayerModal(_0x53fda6){const _0x55a4f3=a4_0x15d0de;try{const _0x193117=currentLadder==='D1'?'players':'playersD2',_0x222218=doc(db,_0x193117,_0x53fda6),_0x189a16=await getDoc(_0x222218);if(!_0x189a16['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x28e8e5=_0x189a16['data'](),_0x540884=document[_0x55a4f3(0x29f)]('edit-player-modal'),_0xff8663=document['getElementById'](_0x55a4f3(0x15d)),_0x1f7967=document['getElementById']('edit-elo'),_0x164f0b=document[_0x55a4f3(0x29f)]('edit-wins'),_0xe047c5=document['getElementById'](_0x55a4f3(0x368));_0xff8663[_0x55a4f3(0x345)]=_0x28e8e5['username']||'',_0x1f7967[_0x55a4f3(0x345)]=_0x28e8e5[_0x55a4f3(0x282)]||0x4b0,_0x164f0b['value']=_0x28e8e5['wins']||0x0,_0xe047c5['value']=_0x28e8e5['losses']||0x0,_0x540884['dataset'][_0x55a4f3(0x185)]=_0x53fda6,_0x540884['classList']['add'](_0x55a4f3(0x28d));}catch(_0x86ee78){console[_0x55a4f3(0x1a6)](_0x55a4f3(0x1f7),_0x86ee78),showNotification('Failed\x20to\x20load\x20player\x20data',_0x55a4f3(0x1a6));}}async function saveEditedPlayer(){const _0x53e47d=a4_0x15d0de;try{const _0x38cce8=document['getElementById']('edit-player-modal'),_0x15beef=_0x38cce8[_0x53e47d(0x2fc)]['playerId'];if(!_0x15beef){showNotification('No\x20player\x20selected','error');return;}const _0x5c9941=document[_0x53e47d(0x29f)](_0x53e47d(0x15d)),_0x448925=document['getElementById']('edit-elo'),_0x26687f=document['getElementById'](_0x53e47d(0x315)),_0x5b505d=document[_0x53e47d(0x29f)](_0x53e47d(0x368)),_0x485f81=_0x5c9941[_0x53e47d(0x345)]['trim'](),_0x233335=parseInt(_0x448925[_0x53e47d(0x345)]),_0x1f7e2b=parseInt(_0x26687f[_0x53e47d(0x345)]),_0x237675=parseInt(_0x5b505d['value']);if(!_0x485f81||isNaN(_0x233335)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x489ebe=currentLadder==='D1'?'players':'playersD2',_0x2c5d16=doc(db,_0x489ebe,_0x15beef),_0x2f5704=await getDoc(_0x2c5d16),_0x10e773=_0x2f5704[_0x53e47d(0x33b)]()?_0x2f5704['data']():{},_0x463fde=_0x10e773[_0x53e47d(0x282)]||0x4b0;await updateDoc(_0x2c5d16,{'username':_0x485f81,'eloRating':_0x233335,'wins':_0x1f7e2b||0x0,'losses':_0x237675||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x233335!==_0x463fde){const _0x3afcd4=currentLadder==='D1'?'eloHistory':_0x53e47d(0x1fa);await addDoc(collection(db,_0x3afcd4),{'player':_0x485f81,'previousElo':_0x463fde,'newElo':_0x233335,'timestamp':serverTimestamp(),'type':_0x53e47d(0x30f),'modifiedBy':auth[_0x53e47d(0x1e5)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x2cb4d0){console['error']('Error\x20updating\x20player:',_0x2cb4d0),showNotification(_0x53e47d(0x22f)+_0x2cb4d0['message'],_0x53e47d(0x1a6));}}function closeEditPlayerModal(){const _0x5c376c=a4_0x15d0de,_0x22f310=document['getElementById']('edit-player-modal');_0x22f310['classList'][_0x5c376c(0x2dd)]('active'),_0x22f310['dataset'][_0x5c376c(0x185)]='';}async function confirmDeletePlayer(_0x128ebf){const _0xd9f633=a4_0x15d0de;if(confirm(_0xd9f633(0x2e8)))try{const _0x569329=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x569329,_0x128ebf)),loadPlayersData(),showNotification(_0xd9f633(0x163),'success');}catch(_0x58825e){console['error']('Error\x20deleting\x20player:',_0x58825e),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x58825e[_0xd9f633(0x34f)],'error');}}async function setupManagePlayersSection(){const _0x2cc8b3=a4_0x15d0de,_0x496ac8=document['getElementById']('add-player-form');_0x496ac8&&_0x496ac8[_0x2cc8b3(0x301)]('submit',async _0x455114=>{_0x455114['preventDefault'](),await addNewPlayer();});const _0x48cb66=document['getElementById'](_0x2cc8b3(0x2ed));_0x48cb66&&_0x48cb66['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x586a4a=document['getElementById']('save-player-btn');_0x586a4a&&_0x586a4a['addEventListener']('click',saveEditedPlayer);const _0x2a63a3=document['getElementById']('cancel-edit-btn');_0x2a63a3&&_0x2a63a3['addEventListener'](_0x2cc8b3(0x1f5),closeEditPlayerModal);const _0x5aa8c7=document[_0x2cc8b3(0x29f)]('edit-player-modal');_0x5aa8c7&&_0x5aa8c7['addEventListener']('click',_0x5a257e=>{_0x5a257e['target']===_0x5aa8c7&&closeEditPlayerModal();});const _0x582583=document['getElementById']('players-ladder-selector');_0x582583&&_0x582583['addEventListener']('change',()=>{currentLadder=_0x582583['value'],loadPlayersData();});}async function addNewPlayer(){const _0x436b99=a4_0x15d0de;try{const _0x394e82=document[_0x436b99(0x29f)]('new-player-username'),_0x4f6a33=document['getElementById']('new-player-elo'),_0x298cc8=_0x394e82[_0x436b99(0x345)]['trim'](),_0x2943b6=parseInt(_0x4f6a33[_0x436b99(0x345)])||0x4b0;if(!_0x298cc8){alert('Please\x20enter\x20a\x20valid\x20username');return;}console[_0x436b99(0x197)]('Adding\x20player\x20'+_0x298cc8+_0x436b99(0x209)+_0x2943b6+'\x20to\x20'+currentLadder+'\x20ladder');let _0x18dccf='players',_0x2ffa11='eloHistory';if(currentLadder==='D2')_0x18dccf='playersD2',_0x2ffa11='eloHistoryD2';else currentLadder==='D3'&&(_0x18dccf='playersD3',_0x2ffa11='eloHistoryD3');const _0x3449a9=query(collection(db,_0x18dccf),where('username','==',_0x298cc8)),_0x3507ba=await getDocs(_0x3449a9);if(!_0x3507ba[_0x436b99(0x267)]){alert(_0x436b99(0x159)+_0x298cc8+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x541c7a=auth[_0x436b99(0x1e5)],_0x12c91d={'username':_0x298cc8,'eloRating':_0x2943b6,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x541c7a?_0x541c7a[_0x436b99(0x38e)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x18dccf),_0x12c91d),await addDoc(collection(db,_0x2ffa11),{'player':_0x298cc8,'previousElo':0x4b0,'newElo':_0x2943b6,'timestamp':serverTimestamp(),'type':_0x436b99(0x245),'placedBy':_0x541c7a?_0x541c7a[_0x436b99(0x38e)]:'admin','gameMode':currentLadder}),_0x394e82['value']='',_0x4f6a33['value']='1200',alert(_0x436b99(0x211)+_0x298cc8+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x3ee2a0){console['error']('Error\x20adding\x20player:',_0x3ee2a0),alert('Error\x20adding\x20player:\x20'+_0x3ee2a0['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0xae341b=document['getElementById']('add-player-form');_0xae341b&&_0xae341b['addEventListener']('submit',_0x5ecae6=>{const _0x290976=a4_0x4fbe;_0x5ecae6[_0x290976(0x264)](),addNewPlayer();});});function filterPlayerTable(){const _0x410cbb=a4_0x15d0de,_0x3f3d26=document[_0x410cbb(0x29f)]('player-search')['value']['toLowerCase'](),_0x58bf82=document['querySelectorAll'](_0x410cbb(0x2f6));let _0x38ea5b=0x0;_0x58bf82[_0x410cbb(0x170)](_0xf8549e=>{const _0x41c64c=_0x410cbb,_0x24c6cb=_0xf8549e['querySelector'](_0x41c64c(0x1a4))?.['textContent']['toLowerCase']()||'';_0x24c6cb[_0x41c64c(0x1f3)](_0x3f3d26)?(_0xf8549e['style']['display']='',_0x38ea5b++):_0xf8549e['style']['display']=_0x41c64c(0x1c6);});const _0x37b982=document['getElementById']('no-results-message');_0x37b982&&(_0x38ea5b===0x0&&_0x3f3d26!==''?_0x37b982['style']['display']='block':_0x37b982['style']['display']='none');}function debounce(_0x51853e,_0x1bcf4f){let _0x270477;return function(..._0x329682){clearTimeout(_0x270477),_0x270477=setTimeout(()=>_0x51853e['apply'](this,_0x329682),_0x1bcf4f);};}async function loadEloHistory(_0xd8cee2=0x1){const _0x246e1d=a4_0x15d0de,_0x1890e7=document[_0x246e1d(0x29f)]('elo-history-table-body'),_0x1864cd=currentLadder['toLowerCase']();if(!_0x1890e7)return;_0x1890e7['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x1323f8=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0x246e1d(0x1fa):'eloHistoryD3',_0x1a20ba=collection(db,_0x1323f8);let _0x2a2910;if(_0xd8cee2>eloHistoryPagination[_0x1864cd][_0x246e1d(0x2ae)]&&eloHistoryPagination[_0x1864cd][_0x246e1d(0x2bb)])_0x2a2910=query(_0x1a20ba,orderBy('timestamp',_0x246e1d(0x27f)),startAfter(eloHistoryPagination[_0x1864cd]['lastVisible']),limit(PAGE_SIZE));else _0xd8cee2<eloHistoryPagination[_0x1864cd]['page']&&eloHistoryPagination[_0x1864cd]['firstVisible']?_0x2a2910=query(_0x1a20ba,orderBy(_0x246e1d(0x147),'desc'),endBefore(eloHistoryPagination[_0x1864cd][_0x246e1d(0x34e)]),limitToLast(PAGE_SIZE)):_0x2a2910=query(_0x1a20ba,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x19ef81=await getDocs(_0x2a2910);if(_0x19ef81['empty']){_0x1890e7['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document[_0x246e1d(0x29f)](_0x1864cd+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x1864cd][_0x246e1d(0x2ae)]=_0xd8cee2,eloHistoryPagination[_0x1864cd]['firstVisible']=_0x19ef81['docs'][0x0],eloHistoryPagination[_0x1864cd]['lastVisible']=_0x19ef81['docs'][_0x19ef81['docs'][_0x246e1d(0x1b0)]-0x1];const _0x27b1b1=new Map();_0x1890e7['innerHTML']='';const _0x5c968c=async _0x52a6c3=>{const _0x38e20d=_0x246e1d;if(typeof _0x52a6c3!=='string'||_0x52a6c3[_0x38e20d(0x1b0)]<0x14||/[^a-zA-Z0-9-_]/[_0x38e20d(0x343)](_0x52a6c3))return _0x52a6c3;if(_0x27b1b1['has'](_0x52a6c3))return _0x27b1b1['get'](_0x52a6c3);try{for(const _0x2c9b6c of['players','playersD2','playersD3',_0x38e20d(0x336)]){const _0x281304=await getDoc(doc(db,_0x2c9b6c,_0x52a6c3));if(_0x281304['exists']()&&_0x281304['data']()['username']){const _0x55a182=_0x281304[_0x38e20d(0x1c8)]()[_0x38e20d(0x35d)];return _0x27b1b1['set'](_0x52a6c3,_0x55a182),_0x55a182;}}return _0x52a6c3;}catch(_0x51e304){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x52a6c3+':',_0x51e304),_0x52a6c3;}};for(const _0x608380 of _0x19ef81['docs']){const _0x44501f=_0x608380['data'](),_0x1eba88=document['createElement']('tr'),_0x2bab87=_0x44501f['timestamp']?new Date(_0x44501f['timestamp'][_0x246e1d(0x2a6)]*0x3e8)[_0x246e1d(0x29e)]():_0x246e1d(0x14b),_0x46154a=_0x44501f[_0x246e1d(0x392)]-_0x44501f['previousElo'],_0xe44a74=_0x46154a>0x0?_0x246e1d(0x228):_0x46154a<0x0?'negative-change':'',_0xd8c820=_0x46154a>0x0?'+':'',_0x29744a=_0x44501f[_0x246e1d(0x369)]||_0x44501f['username']||_0x44501f['userId']||'N/A',_0x1346d1=await _0x5c968c(_0x29744a);_0x1eba88[_0x246e1d(0x149)]=_0x246e1d(0x152)+_0x2bab87+_0x246e1d(0x379)+_0x1346d1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x44501f['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x44501f['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0xe44a74+'\x22>'+_0xd8c820+_0x46154a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x44501f['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x44501f['modifiedBy']||_0x44501f['promotedBy']||_0x44501f[_0x246e1d(0x2ec)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1890e7[_0x246e1d(0x370)](_0x1eba88);}document[_0x246e1d(0x29f)](_0x1864cd+'-page-indicator')['textContent']=_0x246e1d(0x242)+_0xd8cee2;const _0x31eb47=document['getElementById'](_0x1864cd+_0x246e1d(0x168)),_0x7f5812=document['getElementById'](_0x1864cd+'-next-page');if(_0x31eb47)_0x31eb47['disabled']=_0xd8cee2<=0x1;const _0x3a1848=query(_0x1a20ba,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x1864cd]['lastVisible']),limit(0x1)),_0x40f8e1=await getDocs(_0x3a1848);if(_0x7f5812)_0x7f5812['disabled']=_0x40f8e1[_0x246e1d(0x267)];}catch(_0x536f3a){console['error'](_0x246e1d(0x298),_0x536f3a),_0x1890e7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x536f3a['message']+_0x246e1d(0x2e9);}}function formatHistoryType(_0x1ac781){const _0x4b132a=a4_0x15d0de;switch(_0x1ac781){case'match_result':return'Match\x20Result';case _0x4b132a(0x2bc):return'Promotion';case'demotion':return _0x4b132a(0x248);case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x1ac781||_0x4b132a(0x237);}}function setupEloHistorySection(){const _0x290248=a4_0x15d0de;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById'](_0x290248(0x335))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')[_0x290248(0x301)](_0x290248(0x1f5),()=>{const _0x2bd970=_0x290248;loadEloHistory(eloHistoryPagination['d2'][_0x2bd970(0x2ae)]-0x1);}),document['getElementById']('d2-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x44d759=document['getElementById']('d3-prev-page'),_0x5ad6d2=document['getElementById']('d3-next-page');_0x44d759&&_0x44d759['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x5ad6d2&&_0x5ad6d2['addEventListener']('click',()=>{const _0x467167=_0x290248;loadEloHistory(eloHistoryPagination['d3'][_0x467167(0x2ae)]+0x1);});const _0x5012ba=document[_0x290248(0x29f)](_0x290248(0x15b));_0x5012ba&&_0x5012ba['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x22f564=document['getElementById'](_0x290248(0x2e5));_0x22f564&&_0x22f564['addEventListener']('change',applyEloHistoryFilters);const _0x4b5414=document['getElementById']('reset-history-filters');_0x4b5414&&_0x4b5414[_0x290248(0x301)](_0x290248(0x1f5),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x42a3f5=a4_0x15d0de,_0x4ac45d=document[_0x42a3f5(0x29f)](_0x42a3f5(0x15b))['value']['toLowerCase'](),_0x455ba5=document['querySelectorAll'](_0x42a3f5(0x2fb));let _0x1b8919=0x0;_0x455ba5[_0x42a3f5(0x170)](_0x26be92=>{const _0x24ec39=_0x42a3f5;if(_0x26be92['classList']['contains'](_0x24ec39(0x361))||_0x26be92['classList']['contains']('empty-state')||_0x26be92['classList']['contains'](_0x24ec39(0x2d7)))return;const _0x61d21b=_0x26be92['querySelector']('.player')?.[_0x24ec39(0x25f)]['toLowerCase']()||'',_0x511233=_0x26be92['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x519664=_0x26be92['querySelector']('.admin-action')?.[_0x24ec39(0x25f)]['toLowerCase']()||'';_0x61d21b['includes'](_0x4ac45d)||_0x511233['includes'](_0x4ac45d)||_0x519664['includes'](_0x4ac45d)?(_0x26be92['style'][_0x24ec39(0x2d9)]='',_0x1b8919++):_0x26be92['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x34ea77=a4_0x15d0de,_0x816969=document[_0x34ea77(0x29f)]('history-start-date')['value'],_0x3831ff=document['getElementById']('history-end-date')['value'],_0xe44138=document[_0x34ea77(0x29f)]('history-type-filter')[_0x34ea77(0x345)],_0x572013=currentLadder['toLowerCase']();eloHistoryPagination[_0x572013]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x2675f0=document['getElementById']('elo-history-table-body');_0x2675f0['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x5bd7cb=currentLadder==='D1'?'eloHistory':_0x34ea77(0x1fa),_0xd0407c=collection(db,_0x5bd7cb);let _0x1b2466=[orderBy('timestamp','desc')];if(_0x816969){const _0x4f5f60=new Date(_0x816969);_0x4f5f60['setHours'](0x0,0x0,0x0,0x0),_0x1b2466['push'](where('timestamp','>=',_0x4f5f60));}if(_0x3831ff){const _0x28e790=new Date(_0x3831ff);_0x28e790[_0x34ea77(0x2b6)](0x17,0x3b,0x3b,0x3e7),_0x1b2466['push'](where(_0x34ea77(0x147),'<=',_0x28e790));}_0xe44138&&_0xe44138!=='all'&&_0x1b2466['push'](where('type','==',_0xe44138));_0x1b2466['push'](limit(PAGE_SIZE));const _0x32edd4=query(_0xd0407c,..._0x1b2466),_0x458b0e=await getDocs(_0x32edd4);!_0x458b0e[_0x34ea77(0x267)]&&(eloHistoryPagination[_0x572013]['firstVisible']=_0x458b0e['docs'][0x0],eloHistoryPagination[_0x572013][_0x34ea77(0x2bb)]=_0x458b0e[_0x34ea77(0x144)][_0x458b0e['docs']['length']-0x1]);_0x2675f0['innerHTML']='';if(_0x458b0e[_0x34ea77(0x267)]){_0x2675f0['innerHTML']=_0x34ea77(0x38a);return;}_0x458b0e['forEach'](_0x2f2d38=>{const _0x8d2f23=_0x34ea77,_0x12c979=_0x2f2d38[_0x8d2f23(0x1c8)](),_0xbfa0dd=document['createElement']('tr'),_0x2958c6=_0x12c979['timestamp']?new Date(_0x12c979[_0x8d2f23(0x147)]['seconds']*0x3e8)['toLocaleString']():'N/A',_0x6c474=_0x12c979['newElo']-_0x12c979['previousElo'],_0x58e259=_0x6c474>0x0?_0x8d2f23(0x228):_0x6c474<0x0?'negative-change':'',_0x579f44=_0x6c474>0x0?'+':'',_0x1f7ed1=_0x12c979['player']||_0x12c979['username']||_0x12c979['userId']||_0x8d2f23(0x14b);_0xbfa0dd['innerHTML']=_0x8d2f23(0x152)+_0x2958c6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x1f7ed1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x12c979['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x12c979['newElo']||'N/A')+_0x8d2f23(0x1d8)+_0x58e259+'\x22>'+_0x579f44+_0x6c474+_0x8d2f23(0x305)+formatHistoryType(_0x12c979['type'])+_0x8d2f23(0x17e)+(_0x12c979[_0x8d2f23(0x13e)]||_0x12c979[_0x8d2f23(0x161)]||_0x12c979['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2675f0['appendChild'](_0xbfa0dd);}),document['getElementById'](_0x572013+_0x34ea77(0x358))[_0x34ea77(0x25f)]='Page\x201';}catch(_0x25710a){console['error'](_0x34ea77(0x2cf),_0x25710a),_0x2675f0['innerHTML']=_0x34ea77(0x24c)+_0x25710a[_0x34ea77(0x34f)]+_0x34ea77(0x2e9);}}function resetEloHistoryFilters(){const _0x3bc703=a4_0x15d0de;document['getElementById'](_0x3bc703(0x2d2))['value']='',document[_0x3bc703(0x29f)]('history-end-date')['value']='',document['getElementById']('history-type-filter')[_0x3bc703(0x345)]=_0x3bc703(0x23c),document['getElementById']('elo-history-search')['value']='';const _0x1289a7=currentLadder['toLowerCase']();eloHistoryPagination[_0x1289a7]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x1a94b2=a4_0x15d0de,_0x3b8077=document[_0x1a94b2(0x29f)]('promote-player-btn'),_0x52111b=document['getElementById']('promote-modal'),_0xc0dc8b=document[_0x1a94b2(0x29f)](_0x1a94b2(0x316));_0x3b8077&&_0x52111b&&_0xc0dc8b&&(_0x3b8077['addEventListener']('click',()=>{const _0xd13e05=_0x1a94b2;_0x52111b['classList']['add'](_0xd13e05(0x28d));}),_0x52111b['addEventListener'](_0x1a94b2(0x1f5),_0x25c5bc=>{const _0x21d288=_0x1a94b2;_0x25c5bc[_0x21d288(0x1ed)]===_0x52111b&&_0x52111b['classList'][_0x21d288(0x2dd)]('active');}),_0xc0dc8b['addEventListener'](_0x1a94b2(0x23e),async _0x3c70dc=>{const _0x28b735=_0x1a94b2;_0x3c70dc['preventDefault']();const _0x449bab=document['getElementById']('promote-username'),_0x215379=document['getElementById']('promote-ladder'),_0x42851c=_0x449bab['value'][_0x28b735(0x344)](),_0x279cb5=_0x215379['value'];if(!_0x42851c){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x42851c,_0x279cb5),_0x52111b['classList']['remove']('active'),_0x449bab['value']='';}catch(_0x1bc3bc){showNotification(_0x1bc3bc['message'],'error');}}),document[_0x1a94b2(0x29f)]('cancel-promote-btn')[_0x1a94b2(0x301)]('click',()=>{const _0x4d84f1=_0x1a94b2;_0x52111b[_0x4d84f1(0x355)]['remove']('active');}));const _0x1fe548=document['getElementById']('demote-player-btn'),_0x5ecaee=document['getElementById'](_0x1a94b2(0x36b)),_0x20537d=document[_0x1a94b2(0x29f)]('demote-form');_0x1fe548&&_0x5ecaee&&_0x20537d&&(_0x1fe548['addEventListener']('click',()=>{_0x5ecaee['classList']['add']('active');}),_0x5ecaee['addEventListener']('click',_0x1e05ca=>{const _0x4fa605=_0x1a94b2;_0x1e05ca[_0x4fa605(0x1ed)]===_0x5ecaee&&_0x5ecaee['classList']['remove'](_0x4fa605(0x28d));}),_0x20537d['addEventListener'](_0x1a94b2(0x23e),async _0x55b9e3=>{const _0x4cd210=_0x1a94b2;_0x55b9e3['preventDefault']();const _0x3d26f8=document[_0x4cd210(0x29f)]('demote-username'),_0x2af559=document['getElementById'](_0x4cd210(0x37f)),_0xe735a6=_0x3d26f8[_0x4cd210(0x345)]['trim'](),_0x3789e0=_0x2af559['value'];if(!_0xe735a6){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0xe735a6,_0x3789e0),document['getElementById'](_0x4cd210(0x36b))['classList']['remove']('active'),document[_0x4cd210(0x29f)]('demote-username')['value']='';}catch(_0x56c840){console['error']('Error\x20in\x20demotion:',_0x56c840);}}));const _0x5ddf16=document[_0x1a94b2(0x29f)]('set-elo-btn'),_0x5f1f5c=document['getElementById']('set-elo-modal'),_0x309a89=document['getElementById']('set-elo-form');_0x5ddf16&&_0x5f1f5c&&_0x309a89&&(_0x5ddf16[_0x1a94b2(0x301)]('click',()=>{_0x5f1f5c['classList']['add']('active');}),_0x5f1f5c[_0x1a94b2(0x301)]('click',_0x386ce3=>{_0x386ce3['target']===_0x5f1f5c&&_0x5f1f5c['classList']['remove']('active');}),_0x309a89[_0x1a94b2(0x301)]('submit',async _0x4dd484=>{const _0x26c842=_0x1a94b2;_0x4dd484['preventDefault']();const _0x182c0d=document['getElementById']('set-elo-username'),_0x2f97ba=document['getElementById']('set-elo-value');let _0x2424be;const _0x5a5a03=document['getElementById'](_0x26c842(0x1ce)),_0x5e8920=document['querySelector'](_0x26c842(0x34b));if(_0x5a5a03)_0x2424be=_0x5a5a03['value'];else _0x5e8920?_0x2424be=_0x5e8920['value']:_0x2424be='D1';if(!_0x182c0d||!_0x2f97ba){showNotification(_0x26c842(0x19d),_0x26c842(0x1a6));return;}const _0x5b7940=_0x182c0d['value']['trim'](),_0x485402=parseInt(_0x2f97ba['value']);if(!_0x5b7940||isNaN(_0x485402)){showNotification(_0x26c842(0x194),_0x26c842(0x1a6));return;}try{await setCustomElo(_0x5b7940,_0x485402,_0x2424be),_0x5f1f5c['classList']['remove']('active'),_0x182c0d[_0x26c842(0x345)]='',_0x2f97ba[_0x26c842(0x345)]='';}catch(_0x18af6f){showNotification(_0x18af6f['message'],'error');}}),document[_0x1a94b2(0x29f)](_0x1a94b2(0x15e))['addEventListener']('click',()=>{const _0x322c7b=_0x1a94b2;_0x5f1f5c[_0x322c7b(0x355)]['remove']('active');}));const _0x4d67b9=document['getElementById'](_0x1a94b2(0x38b)),_0x5652fb=document['getElementById'](_0x1a94b2(0x23f));if(_0x4d67b9&&_0x5652fb){_0x4d67b9['addEventListener']('click',_0x12abef=>{const _0x14e763=_0x1a94b2;_0x12abef[_0x14e763(0x1ed)]===_0x4d67b9&&closeModalHandler();}),_0x5652fb[_0x1a94b2(0x301)]('submit',async _0x194e09=>{const _0x1a5660=_0x1a94b2;_0x194e09['preventDefault']();const _0x16bf2d=document[_0x1a5660(0x29f)]('role-username'),_0x357db6=document['getElementById']('role-name'),_0x39d85c=document['getElementById'](_0x1a5660(0x1e9)),_0x247509=_0x16bf2d['value']['trim'](),_0x45fc27=_0x357db6[_0x1a5660(0x345)]['trim'](),_0x143315=_0x39d85c['value'];if(!_0x247509){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x247509,_0x45fc27,_0x143315),closeModalHandler(),loadUsersWithRoles();}catch(_0x75bcf0){}});const _0x1e3b3d=document['getElementById'](_0x1a94b2(0x20a));_0x1e3b3d&&(_0x1e3b3d['removeEventListener']('click',closeModalHandler),_0x1e3b3d[_0x1a94b2(0x301)](_0x1a94b2(0x1f5),closeModalHandler));}}async function promotePlayer(_0x29f708,_0x5cf8f2){const _0x180e81=a4_0x15d0de;try{console[_0x180e81(0x197)](_0x180e81(0x167)+_0x29f708+'\x20in\x20'+_0x5cf8f2+'\x20ladder');const _0x4404a0=auth['currentUser'];if(!_0x4404a0)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0xba6b3a=_0x5cf8f2==='D2'?'playersD2':'players',_0x2beb0b=_0x5cf8f2==='D2'?_0x180e81(0x1fa):_0x180e81(0x241);console['log']('Searching\x20for\x20player\x20in\x20'+_0xba6b3a);const _0xa712c8=collection(db,_0xba6b3a),_0x4c0fd2=query(_0xa712c8,where(_0x180e81(0x35d),'==',_0x29f708)),_0x5c3e34=await getDocs(_0x4c0fd2);if(_0x5c3e34['empty']){alert(_0x180e81(0x1f6)+_0x5cf8f2+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x5cf8f2+'\x20ladder');}const _0x14bf2f=_0x5c3e34['docs'][0x0],_0x2f01d7=_0x14bf2f['data'](),_0x43fbf2=_0x2f01d7[_0x180e81(0x282)]||0x4b0,_0x398e72=_0x14bf2f['id'];console['log'](_0x180e81(0x333)+_0x43fbf2);const _0x4ad9eb=[{'name':_0x180e81(0x268),'elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x38ed8c=_0x4ad9eb[_0x180e81(0x25d)](_0x6679f=>_0x6679f[_0x180e81(0x13a)]>_0x43fbf2);if(!_0x38ed8c){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x5cf8f2+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x5cf8f2+'\x20ladder');}console['log']('Promoting\x20player\x20to\x20'+_0x38ed8c['name']+'\x20('+_0x38ed8c['elo']+')'),await updateDoc(doc(db,_0xba6b3a,_0x14bf2f['id']),{'eloRating':_0x38ed8c[_0x180e81(0x13a)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x4404a0['email']||'admin'}),await addDoc(collection(db,_0x2beb0b),{'player':_0x29f708,'previousElo':_0x43fbf2,'newElo':_0x38ed8c['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x38ed8c['name'],'promotedBy':_0x4404a0[_0x180e81(0x38e)]||_0x180e81(0x38d),'gameMode':_0x5cf8f2});try{const {promotionManager:_0x46e359}=await import('./promotions.js'),_0x3a1f14=_0x46e359['getRankName'](_0x43fbf2),_0x41ce0d=_0x38ed8c[_0x180e81(0x2af)];await _0x46e359[_0x180e81(0x162)](_0x398e72,_0x29f708,_0x43fbf2,_0x38ed8c['elo'],_0x3a1f14,_0x41ce0d,'promotion',{'displayName':_0x29f708,'source':'admin','adminUser':_0x4404a0['email'],'ladder':_0x5cf8f2}),console[_0x180e81(0x197)](_0x180e81(0x31b));}catch(_0x3cebf6){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x3cebf6);}return alert(_0x180e81(0x2ee)+_0x29f708+'\x20to\x20'+_0x38ed8c[_0x180e81(0x2af)]+'\x20('+_0x38ed8c['elo']+')'),currentLadder===_0x5cf8f2&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x3b566e){console['error']('Error\x20promoting\x20player:',_0x3b566e),alert('Error\x20promoting\x20player:\x20'+_0x3b566e['message']);throw _0x3b566e;}}document[a4_0x15d0de(0x301)]('DOMContentLoaded',()=>{const _0x924868=a4_0x15d0de,_0x544dff=document['getElementById']('promote-form');_0x544dff&&_0x544dff['addEventListener'](_0x924868(0x23e),async _0x5bab5d=>{const _0x5cc556=_0x924868;_0x5bab5d['preventDefault']();const _0x16d88e=document['getElementById']('promote-username')[_0x5cc556(0x345)]['trim'](),_0x59da89=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')[_0x5cc556(0x345)];if(!_0x16d88e){alert(_0x5cc556(0x13c));return;}try{await promotePlayer(_0x16d88e,_0x59da89),document['getElementById']('promote-modal')['classList']['remove'](_0x5cc556(0x28d)),document[_0x5cc556(0x29f)]('promote-username')[_0x5cc556(0x345)]='';}catch(_0x90c25e){console[_0x5cc556(0x1a6)]('Error\x20in\x20promotion:',_0x90c25e);}});});async function demotePlayer(_0x24cf5c,_0x5a4d5e){const _0x28dfb9=a4_0x15d0de;try{console['log']('Attempting\x20to\x20demote\x20'+_0x24cf5c+'\x20in\x20'+_0x5a4d5e+_0x28dfb9(0x276));const _0x2f7074=auth['currentUser'];if(!_0x2f7074)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x1aa9e9=_0x5a4d5e==='D2'?_0x28dfb9(0x1df):'players',_0x4e3cef=_0x5a4d5e==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x1aa9e9);const _0x13190b=collection(db,_0x1aa9e9),_0x31fe47=query(_0x13190b,where('username','==',_0x24cf5c)),_0x271a5d=await getDocs(_0x31fe47);if(_0x271a5d[_0x28dfb9(0x267)]){alert('Player\x20not\x20found\x20in\x20'+_0x5a4d5e+_0x28dfb9(0x276));throw new Error('Player\x20not\x20found\x20in\x20'+_0x5a4d5e+'\x20ladder');}const _0x52ecab=_0x271a5d['docs'][0x0],_0x1145e4=_0x52ecab['data'](),_0x38b6fb=_0x1145e4['eloRating']||0x4b0;console[_0x28dfb9(0x197)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x38b6fb);const _0x19627b=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x28dfb9(0x268),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x4a6a26=_0x19627b[_0x28dfb9(0x25d)](_0x5cc467=>_0x5cc467['elo']<_0x38b6fb);if(!_0x4a6a26){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x5a4d5e+_0x28dfb9(0x276));throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x5a4d5e+'\x20ladder');}console[_0x28dfb9(0x197)]('Demoting\x20player\x20to\x20'+_0x4a6a26['name']+'\x20('+_0x4a6a26['elo']+')'),await updateDoc(doc(db,_0x1aa9e9,_0x52ecab['id']),{'eloRating':_0x4a6a26[_0x28dfb9(0x13a)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x2f7074['email']||'admin'}),await addDoc(collection(db,_0x4e3cef),{'player':_0x24cf5c,'previousElo':_0x38b6fb,'newElo':_0x4a6a26[_0x28dfb9(0x13a)],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x4a6a26[_0x28dfb9(0x2af)],'demotedBy':_0x2f7074['email']||'admin','gameMode':_0x5a4d5e});try{const {promotionManager:_0x272ce6}=await import('./promotions.js'),_0x22cd33=_0x272ce6['getRankName'](_0x38b6fb),_0x1f27a0=_0x4a6a26['name'];await _0x272ce6['sendPromotionNotification'](_0x52ecab['id'],_0x24cf5c,_0x38b6fb,_0x4a6a26['elo'],_0x22cd33,_0x1f27a0,_0x28dfb9(0x233),{'displayName':_0x24cf5c,'source':'admin','adminUser':_0x2f7074[_0x28dfb9(0x38e)],'ladder':_0x5a4d5e}),console['log'](_0x28dfb9(0x300));}catch(_0x5bd506){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x5bd506);}return alert(_0x28dfb9(0x2cc)+_0x24cf5c+'\x20to\x20'+_0x4a6a26['name']+'\x20('+_0x4a6a26['elo']+')'),currentLadder===_0x5a4d5e&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x2dbb0a){console['error']('Error\x20demoting\x20player:',_0x2dbb0a),alert('Error\x20demoting\x20player:\x20'+_0x2dbb0a['message']);throw _0x2dbb0a;}}document[a4_0x15d0de(0x301)]('DOMContentLoaded',()=>{const _0x65b8c1=a4_0x15d0de,_0x2764f1=document[_0x65b8c1(0x29f)]('demote-form');_0x2764f1&&_0x2764f1['addEventListener'](_0x65b8c1(0x23e),async _0x2ca198=>{const _0x46b6ef=_0x65b8c1;_0x2ca198['preventDefault']();const _0x39b251=document['getElementById'](_0x46b6ef(0x22a))[_0x46b6ef(0x345)]['trim'](),_0x20b72e=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x39b251){alert(_0x46b6ef(0x13c));return;}try{await demotePlayer(_0x39b251,_0x20b72e),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')[_0x46b6ef(0x345)]='';}catch(_0xf1f6cc){console['error'](_0x46b6ef(0x2b8),_0xf1f6cc);}});});async function setCustomElo(_0x2f1d0c,_0x47802a,_0x19344e){const _0x1ba6a4=a4_0x15d0de;try{const _0x4349fe=auth['currentUser'];if(!_0x4349fe||!isAdmin(_0x4349fe[_0x1ba6a4(0x38e)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x3adcca=_0x19344e==='D2'?'playersD2':'players',_0x4b7f1d=_0x19344e==='D2'?'eloHistoryD2':'eloHistory',_0x19cfd9=collection(db,_0x3adcca),_0x2ecb2a=query(_0x19cfd9,where('username','==',_0x2f1d0c)),_0x3b5c21=await getDocs(_0x2ecb2a);if(_0x3b5c21['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x19344e+'\x20ladder');const _0x41e127=_0x3b5c21['docs'][0x0],_0x1cf440=_0x41e127['data'](),_0x48f732=_0x1cf440['eloRating']||0x4b0,_0x362664=writeBatch(db);_0x362664[_0x1ba6a4(0x2e1)](doc(db,_0x3adcca,_0x41e127['id']),{'eloRating':_0x47802a,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x4349fe['email']});const _0x4e6fd0=doc(collection(db,_0x4b7f1d));return _0x362664[_0x1ba6a4(0x2ea)](_0x4e6fd0,{'player':_0x2f1d0c,'previousElo':_0x48f732,'newElo':_0x47802a,'timestamp':serverTimestamp(),'type':_0x1ba6a4(0x30f),'modifiedBy':_0x4349fe[_0x1ba6a4(0x38e)],'gameMode':_0x19344e}),await _0x362664[_0x1ba6a4(0x138)](),showNotification('ELO\x20rating\x20for\x20'+_0x2f1d0c+'\x20was\x20updated\x20from\x20'+_0x48f732+'\x20to\x20'+_0x47802a,_0x1ba6a4(0x1cf)),currentLadder===_0x19344e&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x485e6d){console[_0x1ba6a4(0x1a6)]('Error\x20setting\x20custom\x20ELO:',_0x485e6d);throw _0x485e6d;}}async function setUserRole(_0x2e309b,_0x18893,_0xeb4fa8){const _0x180a54=a4_0x15d0de;try{const _0x14df9f=auth[_0x180a54(0x1e5)];if(!_0x14df9f||!isAdmin(_0x14df9f['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x118213=_0x18893?_0x18893['trim']():null,_0x2c8c70=_0x118213?_0xeb4fa8||_0x180a54(0x271):null,[_0x4e84a1,_0x10fa02]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x2e309b))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x2e309b)))]),_0x130fe4=[];if(!_0x4e84a1[_0x180a54(0x267)])_0x130fe4['push']({'ref':_0x4e84a1['docs'][0x0][_0x180a54(0x2b3)],'source':'D1'});if(!_0x10fa02[_0x180a54(0x267)])_0x130fe4[_0x180a54(0x322)]({'ref':_0x10fa02['docs'][0x0]['ref'],'source':'D2'});if(_0x130fe4['length']===0x0){const [_0x3b2e23,_0xd64ad]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x2e309b))),getDocs(query(collection(db,'userProfiles'),where(_0x180a54(0x35d),'==',_0x2e309b)))]);if(!_0x3b2e23['empty'])_0x130fe4['push']({'ref':_0x3b2e23[_0x180a54(0x144)][0x0][_0x180a54(0x2b3)],'source':'NonParticipant'});if(!_0xd64ad['empty'])_0x130fe4['push']({'ref':_0xd64ad['docs'][0x0][_0x180a54(0x2b3)],'source':'UserProfile'});}if(_0x130fe4['length']===0x0)throw new Error(_0x180a54(0x1d1)+_0x2e309b+_0x180a54(0x30a));const _0x3ee96f=writeBatch(db);_0x130fe4[_0x180a54(0x170)](_0x559168=>{const _0x4d3d2a=_0x180a54;console['log']('Updating\x20role\x20for\x20'+_0x2e309b+'\x20in\x20'+_0x559168['source']),!_0x118213?_0x3ee96f['update'](_0x559168[_0x4d3d2a(0x2b3)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x3ee96f[_0x4d3d2a(0x2e1)](_0x559168['ref'],{'roleName':_0x118213,'roleColor':_0x2c8c70,'roleAssignedBy':_0x14df9f['email'],'roleAssignedAt':serverTimestamp()});}),await _0x3ee96f['commit']();const _0x10dddc=_0x118213?'Role\x20\x22'+_0x118213+'\x22\x20set':_0x180a54(0x23b);return showNotification(_0x10dddc+'\x20for\x20user\x20\x22'+_0x2e309b+'\x22','success'),!![];}catch(_0x2a1b39){console['error'](_0x180a54(0x1d3),_0x2a1b39),showNotification('Error:\x20'+_0x2a1b39[_0x180a54(0x34f)],_0x180a54(0x1a6));throw _0x2a1b39;}}function showNotification(_0x3bf6f4,_0x1e8eae='info'){const _0x520db4=a4_0x15d0de,_0x3547c7=document['createElement']('div');_0x3547c7['className']='notification\x20'+_0x1e8eae,_0x3547c7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x1e8eae)+_0x520db4(0x1bd)+_0x3bf6f4+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x3547c7),setTimeout(()=>{const _0x41df61=_0x520db4;_0x3547c7[_0x41df61(0x355)]['add']('active');},0xa);const _0x1d0ea8=setTimeout(()=>{closeNotification(_0x3547c7);},0x1388);_0x3547c7['querySelector']('.close-notification')[_0x520db4(0x301)]('click',()=>{clearTimeout(_0x1d0ea8),closeNotification(_0x3547c7);});}function getNotificationIcon(_0x5bd8f2){const _0x22e18b=a4_0x15d0de;switch(_0x5bd8f2){case _0x22e18b(0x1cf):return'fa-check-circle';case _0x22e18b(0x1a6):return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case'info':default:return _0x22e18b(0x277);}}function closeNotification(_0xf435e2){_0xf435e2['classList']['remove']('active'),setTimeout(()=>{_0xf435e2['remove']();},0x12c);}function setupUserRolesSection(){const _0x5085a8=a4_0x15d0de,_0x60bc73=document['getElementById']('load-users-data');_0x60bc73&&_0x60bc73['addEventListener']('click',function(){const _0x4c762d=a4_0x4fbe;this['classList'][_0x4c762d(0x2ff)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x4dd01a=_0x4c762d;this['classList']['remove']('loading'),this['innerHTML']=_0x4dd01a(0x16e);})['catch'](_0x479570=>{const _0x431dc7=_0x4c762d;console[_0x431dc7(0x1a6)]('Error\x20loading\x20users:',_0x479570),this[_0x431dc7(0x355)]['remove']('loading'),this['innerHTML']=_0x431dc7(0x1b6),setTimeout(()=>{const _0x1bd85e=_0x431dc7;this['innerHTML']=_0x1bd85e(0x16e);},0xbb8);});});const _0x4b4873=document[_0x5085a8(0x29f)]('add-new-role-btn');_0x4b4873&&_0x4b4873['addEventListener']('click',()=>{const _0x8fbdc9=_0x5085a8,_0x59ccff=document[_0x8fbdc9(0x29f)]('set-role-modal');_0x59ccff&&_0x59ccff['classList']['add']('active');});const _0xe41d83=document['getElementById']('user-search');_0xe41d83&&_0xe41d83['addEventListener'](_0x5085a8(0x1a3),debounce(filterUsersTable,0x12c));const _0x2b6c72=document['getElementById']('role-filter');_0x2b6c72&&_0x2b6c72['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x2d1431=a4_0x15d0de,_0x177599=document['getElementById']('users-table-body');if(!_0x177599)return;_0x177599[_0x2d1431(0x149)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x2450d4,_0x55883b,_0x3dd384,_0x20f87f]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x3cc537=new Map();function _0x431111(_0x33c5cb,_0x1509e7){_0x33c5cb['forEach'](_0x5a00f4=>{const _0x1014ed=a4_0x4fbe,_0x4836de=_0x5a00f4['data']();if(!_0x4836de['username'])return;if(!_0x3cc537['has'](_0x4836de['username']))_0x3cc537['set'](_0x4836de['username'],{'username':_0x4836de['username'],'roleName':_0x4836de['roleName']||null,'roleColor':_0x4836de[_0x1014ed(0x1d4)]||null,'roleAssignedBy':_0x4836de[_0x1014ed(0x31c)]||null,'roleAssignedAt':_0x4836de['roleAssignedAt']||null,'sources':[_0x1509e7]});else{const _0x3cfccf=_0x3cc537[_0x1014ed(0x2f3)](_0x4836de['username']);_0x4836de['roleName']&&(!_0x3cfccf['roleName']||_0x1509e7==='D1'||_0x1509e7==='D2')&&(_0x3cfccf[_0x1014ed(0x373)]=_0x4836de['roleName'],_0x3cfccf[_0x1014ed(0x1d4)]=_0x4836de['roleColor'],_0x3cfccf['roleAssignedBy']=_0x4836de[_0x1014ed(0x31c)],_0x3cfccf[_0x1014ed(0x1bf)]=_0x4836de['roleAssignedAt']),!_0x3cfccf['sources']['includes'](_0x1509e7)&&_0x3cfccf['sources']['push'](_0x1509e7);}});}_0x431111(_0x2450d4,'D1'),_0x431111(_0x55883b,'D2'),_0x431111(_0x3dd384,'Non-Participant'),_0x431111(_0x20f87f,'Profile');const _0x25567e=Array['from'](_0x3cc537['values']())[_0x2d1431(0x286)]((_0x27e625,_0x4ab5f3)=>_0x27e625['username'][_0x2d1431(0x261)](_0x4ab5f3['username']));if(_0x25567e['length']===0x0){_0x177599['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x177599['innerHTML']='',_0x25567e['forEach'](_0x4b18c0=>{const _0x94d611=_0x2d1431,_0x4f438e=document['createElement']('tr');_0x4f438e['dataset'][_0x94d611(0x35d)]=_0x4b18c0[_0x94d611(0x35d)],_0x4f438e['dataset'][_0x94d611(0x373)]=_0x4b18c0['roleName']||'',_0x4f438e['dataset']['roleColor']=_0x4b18c0['roleColor']||'#808080';const _0x26363d=_0x4b18c0['roleAssignedAt']?new Date(_0x4b18c0['roleAssignedAt'][_0x94d611(0x2a6)]*0x3e8)[_0x94d611(0x22b)]():'N/A',_0x2c7c91=_0x4b18c0[_0x94d611(0x373)]?_0x94d611(0x2ce)+_0x4b18c0[_0x94d611(0x1d4)]+_0x94d611(0x21e)+getContrastColor(_0x4b18c0[_0x94d611(0x1d4)])+';\x22>'+_0x4b18c0['roleName']+_0x94d611(0x1bb):'<span\x20class=\x22no-role\x22>None</span>';_0x4f438e[_0x94d611(0x149)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4b18c0['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x4b18c0['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2c7c91+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4b18c0[_0x94d611(0x31c)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x26363d+_0x94d611(0x262)+_0x4b18c0['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4b18c0[_0x94d611(0x373)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x4b18c0[_0x94d611(0x35d)]+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x177599[_0x94d611(0x370)](_0x4f438e);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x2d94f8=>{const _0x9ffe1e=_0x2d1431;_0x2d94f8['addEventListener'](_0x9ffe1e(0x1f5),()=>{const _0x4afea6=_0x2d94f8['dataset']['username'];openRoleEditModal(_0x4afea6);});}),document[_0x2d1431(0x187)]('.remove-role-btn')[_0x2d1431(0x170)](_0x375b9a=>{_0x375b9a['addEventListener']('click',()=>{const _0x136619=a4_0x4fbe,_0x160d3b=_0x375b9a['dataset'][_0x136619(0x35d)];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x160d3b+'?')&&setUserRole(_0x160d3b,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x248062=>console['error']('Error\x20removing\x20role:',_0x248062));});});}catch(_0x1343e9){console[_0x2d1431(0x1a6)]('Error\x20loading\x20users:',_0x1343e9),_0x177599['innerHTML']=_0x2d1431(0x140);}}function openRoleEditModal(_0x4c8def){const _0x43effc=a4_0x15d0de;console[_0x43effc(0x197)]('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x4c8def);const _0xe91b8e=document['getElementById'](_0x43effc(0x38b)),_0x6299b=document['getElementById']('role-username'),_0x33e762=document['getElementById']('user-role');if(!_0xe91b8e){console[_0x43effc(0x1a6)]('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert(_0x43effc(0x191));return;}console['log'](_0x43effc(0x19a),_0xe91b8e);_0x6299b?(_0x6299b['value']=_0x4c8def,console[_0x43effc(0x197)]('Username\x20input\x20set\x20to:\x20'+_0x4c8def)):console['warn'](_0x43effc(0x37d));const _0x19d4d3=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x4c8def+'\x22]');if(_0x19d4d3&&_0x33e762){const _0xe10c53=_0x19d4d3['dataset']['role'];_0x33e762['value']=_0xe10c53==='none'?'':_0xe10c53,console[_0x43effc(0x197)]('Role\x20select\x20set\x20to:\x20'+_0x33e762['value']+_0x43effc(0x205)+_0xe10c53+')');}else{if(!_0x19d4d3)console['warn']('Table\x20row\x20for\x20user\x20'+_0x4c8def+_0x43effc(0x222));if(!_0x33e762)console['warn'](_0x43effc(0x16c));if(_0x33e762)_0x33e762['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0xe91b8e['classList']['add'](_0x43effc(0x28d));const _0x469ae4=document['getElementById'](_0x43effc(0x20a));_0x469ae4?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x469ae4['removeEventListener']('click',closeModalHandler),_0x469ae4[_0x43effc(0x301)](_0x43effc(0x1f5),closeModalHandler)):console[_0x43effc(0x293)](_0x43effc(0x173)),console['log']('Attaching\x20background\x20click\x20listener.'),_0xe91b8e[_0x43effc(0x2c5)]('click',closeModalBackgroundHandler),_0xe91b8e['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x736ab8){_0x736ab8['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x246854=a4_0x15d0de,_0x1ed3cd=document['getElementById']('set-role-modal');_0x1ed3cd&&(_0x1ed3cd['classList'][_0x246854(0x2dd)]('active'),_0x1ed3cd['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x214d91=a4_0x15d0de,_0x3240ef=document['getElementById'](_0x214d91(0x24b))?.[_0x214d91(0x345)]['toLowerCase']()||'',_0xed6cb0=document['getElementById']('role-filter')?.[_0x214d91(0x345)]||_0x214d91(0x23c),_0x123b50=document['querySelectorAll']('#users-table-body\x20tr');let _0x41ac81=0x0;_0x123b50['forEach'](_0x19e686=>{const _0x491a4a=_0x214d91;if(_0x19e686[_0x491a4a(0x32c)]('.loading-cell')||_0x19e686[_0x491a4a(0x32c)]('.empty-state')||_0x19e686['querySelector']('.error-state'))return;const _0x363a2a=_0x19e686[_0x491a4a(0x2fc)]['username']?.['toLowerCase']()||'',_0x3bb6b9=_0x19e686[_0x491a4a(0x2fc)][_0x491a4a(0x33a)]||_0x491a4a(0x1c6),_0x287e60=_0x363a2a['includes'](_0x3240ef),_0x22ff85=_0xed6cb0==='all'||_0x3bb6b9===_0xed6cb0;_0x287e60&&_0x22ff85?(_0x19e686['style']['display']='',_0x41ac81++):_0x19e686[_0x491a4a(0x31e)]['display']='none';});if(_0x41ac81===0x0&&_0x123b50[_0x214d91(0x1b0)]>0x0){const _0xd8b3c8=document['getElementById']('users-table-body');if(_0xd8b3c8){if(!_0xd8b3c8['querySelector']('.no-results')){const _0x10fb0e=document['createElement']('tr');_0x10fb0e[_0x214d91(0x355)]['add'](_0x214d91(0x1d6)),_0x10fb0e['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0xd8b3c8['appendChild'](_0x10fb0e);}}}else{const _0x4a0dc5=document[_0x214d91(0x32c)]('.no-results');_0x4a0dc5&&_0x4a0dc5['remove']();}}function setupManageArticlesSection(){const _0x35853f=a4_0x15d0de,_0x55a135=document['getElementById']('load-articles-data');_0x55a135&&_0x55a135[_0x35853f(0x301)]('click',function(){const _0x486cda=_0x35853f;this['classList'][_0x486cda(0x2ff)]('loading'),this['innerHTML']=_0x486cda(0x19b),loadArticles()['then'](()=>{const _0x4c7386=_0x486cda;this['classList']['remove'](_0x4c7386(0x1ca)),this[_0x4c7386(0x149)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x598ef5=>{const _0x14316a=_0x486cda;console['error']('Error\x20loading\x20articles:',_0x598ef5),this['classList']['remove']('loading'),this['innerHTML']=_0x14316a(0x1b6),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x5321a6=document[_0x35853f(0x29f)](_0x35853f(0x2f4));_0x5321a6?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x5321a6['style']['display']=_0x35853f(0x249),_0x5321a6['addEventListener']('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x48f31a=document['getElementById'](_0x35853f(0x15c));_0x48f31a&&_0x48f31a[_0x35853f(0x301)]('submit',_0x22af15=>{const _0x5b6947=_0x35853f;_0x22af15[_0x5b6947(0x264)](),saveArticle();});const _0x31fc36=document['getElementById'](_0x35853f(0x349));_0x31fc36&&_0x31fc36[_0x35853f(0x301)]('click',()=>{closeArticleModal();});const _0x3017a5=document['querySelector']('#article-modal\x20.close-btn');_0x3017a5&&_0x3017a5[_0x35853f(0x301)]('click',()=>{closeArticleModal();});const _0x23cb48=document['getElementById']('article-modal');_0x23cb48&&_0x23cb48['addEventListener'](_0x35853f(0x1f5),_0x330ece=>{_0x330ece['target']===_0x23cb48&&closeArticleModal();});}async function loadArticles(){const _0x3a0691=a4_0x15d0de,_0x103c5c=document['getElementById']('articles-table-body');if(!_0x103c5c)return;_0x103c5c['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x478ede=collection(db,'articles'),_0x29334a=query(_0x478ede,orderBy('createdAt','desc')),_0x31528e=await getDocs(_0x29334a);if(_0x31528e['empty']){_0x103c5c['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x103c5c[_0x3a0691(0x149)]='',_0x31528e[_0x3a0691(0x170)](_0x17f291=>{const _0x273024=_0x3a0691,_0x5751d4=_0x17f291['data'](),_0xb5334d=document['createElement']('tr'),_0x519d62=_0x5751d4['createdAt']?new Date(_0x5751d4['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0xb5334d['innerHTML']=_0x273024(0x210)+(_0x5751d4['title']||_0x273024(0x18a))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5751d4['author']||'Unknown')+_0x273024(0x33c)+_0x519d62+_0x273024(0x17a)+_0x17f291['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x17f291['id']+_0x273024(0x2ab),_0x103c5c['appendChild'](_0xb5334d);}),setupArticleActionButtons();}catch(_0x5909f0){console[_0x3a0691(0x1a6)]('Error\x20loading\x20articles:',_0x5909f0),_0x103c5c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x5909f0['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x3205ef=a4_0x15d0de;document['querySelectorAll']('.edit-article-btn')['forEach'](_0x29a0ad=>{_0x29a0ad['addEventListener']('click',async _0x39eb15=>{const _0x546cde=a4_0x4fbe,_0x22cff1=_0x39eb15[_0x546cde(0x1eb)]['dataset']['id'];openArticleModal(_0x22cff1);});}),document[_0x3205ef(0x187)]('.delete-article-btn')['forEach'](_0xec3474=>{_0xec3474['addEventListener']('click',async _0x284397=>{const _0x2c3564=_0x284397['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x2c3564);});});}function openArticleModal(_0x5d0d90=null){const _0x31184b=a4_0x15d0de,_0x138cd1=document['getElementById']('article-modal'),_0x42bf5a=document['getElementById'](_0x31184b(0x342)),_0x3942db=document['getElementById']('article-form'),_0x4720ea=document[_0x31184b(0x29f)](_0x31184b(0x2a5));_0x3942db[_0x31184b(0x13b)](),_0x4720ea['value']='';if(_0x5d0d90)_0x42bf5a['textContent']=_0x31184b(0x275),_0x4720ea['value']=_0x5d0d90,loadArticleData(_0x5d0d90);else{_0x42bf5a[_0x31184b(0x25f)]=_0x31184b(0x2c0);const _0x40f415=auth[_0x31184b(0x1e5)];if(_0x40f415){const _0x5c1ec9=document['getElementById']('article-author');if(_0x5c1ec9&&_0x40f415['displayName'])_0x5c1ec9[_0x31184b(0x345)]=_0x40f415['displayName'];else _0x5c1ec9&&(_0x5c1ec9[_0x31184b(0x345)]=_0x40f415['email']);}}_0x138cd1['classList']['add'](_0x31184b(0x28d));}async function loadArticleData(_0x50f7d6){const _0x7f371c=a4_0x15d0de;try{const _0x48c635=doc(db,'articles',_0x50f7d6),_0xdbc03e=await getDoc(_0x48c635);if(!_0xdbc03e['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x520913=_0xdbc03e[_0x7f371c(0x1c8)]();document[_0x7f371c(0x29f)]('article-title')['value']=_0x520913['title']||'',document[_0x7f371c(0x29f)](_0x7f371c(0x2d5))[_0x7f371c(0x345)]=_0x520913[_0x7f371c(0x236)]||'',document['getElementById']('article-image-url')['value']=_0x520913[_0x7f371c(0x1e1)]||'',document['getElementById'](_0x7f371c(0x253))['value']=_0x520913['content']||'';}catch(_0x39ca5d){console[_0x7f371c(0x1a6)](_0x7f371c(0x153),_0x39ca5d),showNotification(_0x7f371c(0x347),_0x7f371c(0x1a6));}}async function saveArticle(){const _0x450eea=a4_0x15d0de;try{const _0x470793=document['getElementById']('article-id')[_0x450eea(0x345)],_0x1b5aeb=document['getElementById'](_0x450eea(0x1ec))['value']['trim'](),_0x4d43dd=document[_0x450eea(0x29f)]('article-author')['value'][_0x450eea(0x344)](),_0x2b9d68=document['getElementById']('article-image-url')[_0x450eea(0x345)]['trim'](),_0x6e40a1=document[_0x450eea(0x29f)](_0x450eea(0x253))['value'][_0x450eea(0x344)]();if(!_0x1b5aeb||!_0x6e40a1){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x2e5784=auth[_0x450eea(0x1e5)];if(!_0x2e5784){showNotification(_0x450eea(0x29a),'error');return;}const _0x4a6f0a={'title':_0x1b5aeb,'author':_0x4d43dd,'imageUrl':_0x2b9d68||null,'content':_0x6e40a1,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x2e5784['email']};!_0x470793?(_0x4a6f0a['createdAt']=serverTimestamp(),_0x4a6f0a[_0x450eea(0x18c)]=_0x2e5784[_0x450eea(0x38e)],await addDoc(collection(db,_0x450eea(0x325)),_0x4a6f0a),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x470793),_0x4a6f0a),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x4a9bcf){console['error']('Error\x20saving\x20article:',_0x4a9bcf),showNotification(_0x450eea(0x25b)+_0x4a9bcf['message'],'error');}}function closeArticleModal(){const _0x35a1e2=a4_0x15d0de,_0x4a5750=document[_0x35a1e2(0x29f)]('article-modal');_0x4a5750&&_0x4a5750['classList'][_0x35a1e2(0x2dd)](_0x35a1e2(0x28d));}async function confirmDeleteArticle(_0x41f9e6){const _0x3f61ba=a4_0x15d0de;if(confirm(_0x3f61ba(0x203)))try{await deleteDoc(doc(db,'articles',_0x41f9e6)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x36328f){console['error']('Error\x20deleting\x20article:',_0x36328f),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x36328f['message'],'error');}}function setupTrophyManagementSection(){const _0x40614e=a4_0x15d0de,_0xd52b2b=document['getElementById']('load-trophies-data');_0xd52b2b&&_0xd52b2b[_0x40614e(0x301)]('click',function(){const _0xdfd9da=_0x40614e;this['classList'][_0xdfd9da(0x2ff)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x38b622=document[_0xdfd9da(0x29f)]('assign-trophy-image');_0x38b622&&(_0x38b622[_0xdfd9da(0x2de)]=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x27e39e=_0xdfd9da;this['classList']['remove']('loading'),this['innerHTML']=_0x27e39e(0x1ef);})['catch'](_0x11ab8e=>{const _0x96b38d=_0xdfd9da;console[_0x96b38d(0x1a6)](_0x96b38d(0x1d2),_0x11ab8e),this['classList'][_0x96b38d(0x2dd)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x259d99=_0x96b38d;this[_0x259d99(0x149)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x4fa2dd=document[_0x40614e(0x29f)](_0x40614e(0x247));_0x4fa2dd&&_0x4fa2dd['addEventListener'](_0x40614e(0x1f5),()=>{openTrophyModal();});const _0x1ebc6c=document['getElementById']('trophy-form');_0x1ebc6c&&_0x1ebc6c[_0x40614e(0x301)]('submit',_0x4d954e=>{const _0xbd118a=_0x40614e;_0x4d954e[_0xbd118a(0x264)](),saveTrophyDefinition();});const _0x2b40fe=document[_0x40614e(0x29f)]('cancel-trophy-btn');_0x2b40fe&&_0x2b40fe['addEventListener']('click',()=>{closeTrophyModal();});document[_0x40614e(0x187)]('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x113a52=>{const _0xfffb77=_0x40614e;_0x113a52['addEventListener'](_0xfffb77(0x1f5),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x33d4fe=document[_0x40614e(0x29f)](_0x40614e(0x158));_0x33d4fe&&_0x33d4fe['addEventListener'](_0x40614e(0x1f5),_0x447afa=>{_0x447afa['target']===_0x33d4fe&&closeTrophyModal();});const _0x208d7c=document['getElementById']('assign-trophy-modal');_0x208d7c&&_0x208d7c[_0x40614e(0x301)]('click',_0x1db9ae=>{_0x1db9ae['target']===_0x208d7c&&closeAssignTrophyModal();});const _0x247203=document[_0x40614e(0x29f)]('assign-trophy-form');_0x247203&&_0x247203['addEventListener']('submit',_0xa42def=>{const _0x95a39f=_0x40614e;_0xa42def[_0x95a39f(0x264)](),assignTrophyToPlayer();});const _0x2f6aac=document[_0x40614e(0x29f)]('cancel-assign-btn');_0x2f6aac&&_0x2f6aac[_0x40614e(0x301)]('click',()=>{closeAssignTrophyModal();});const _0x37d4c8=document['getElementById']('trophy-image-url');_0x37d4c8&&(_0x37d4c8['addEventListener']('input',updateTrophyImagePreview),_0x37d4c8['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x4dd9dd=a4_0x15d0de,_0x3b1570=document[_0x4dd9dd(0x29f)]('trophy-image-url')['value']['trim'](),_0x862d0e=document['getElementById']('trophy-image-preview');if(!_0x862d0e){const _0x1002c2=document[_0x4dd9dd(0x29f)]('trophy-image-url')['closest']('.form-group'),_0x5362d4=document[_0x4dd9dd(0x1ee)]('div');_0x5362d4['id']='trophy-image-preview',_0x5362d4['className']='trophy-preview-container',_0x1002c2[_0x4dd9dd(0x370)](_0x5362d4);const _0x485cb2=document['createElement'](_0x4dd9dd(0x217));_0x485cb2['id']='trophy-preview-img',_0x485cb2[_0x4dd9dd(0x2d8)]='Trophy\x20Preview',_0x485cb2[_0x4dd9dd(0x2de)]=function(){const _0x33f369=_0x4dd9dd;this['src']=DEFAULT_TROPHY_IMAGE,this[_0x33f369(0x355)][_0x33f369(0x2ff)]('error');},_0x5362d4['appendChild'](_0x485cb2);}const _0xf765f9=document['getElementById']('trophy-preview-img');_0x3b1570?(_0xf765f9[_0x4dd9dd(0x232)]=_0x3b1570,_0xf765f9['style'][_0x4dd9dd(0x2d9)]=_0x4dd9dd(0x249),_0xf765f9['classList'][_0x4dd9dd(0x2dd)](_0x4dd9dd(0x1a6))):(_0xf765f9['src']=DEFAULT_TROPHY_IMAGE,_0xf765f9[_0x4dd9dd(0x31e)]['display']='block');}async function loadTrophyDefinitions(){const _0x1c7817=a4_0x15d0de,_0x4896fc=document['getElementById']('trophies-table-body');if(!_0x4896fc)return;_0x4896fc['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x339792=collection(db,_0x1c7817(0x35c)),_0x3a0c1b=query(_0x339792,orderBy('createdAt','desc')),_0x1df19b=await getDocs(_0x3a0c1b);if(_0x1df19b['empty']){_0x4896fc['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x4896fc['innerHTML']='',_0x1df19b['forEach'](_0x43a253=>{const _0x37ac37=_0x1c7817,_0x5670e9=_0x43a253['data'](),_0xcd32aa=document['createElement']('tr'),_0x494789=_0x5670e9['createdAt']?new Date(_0x5670e9[_0x37ac37(0x260)]['seconds']*0x3e8)[_0x37ac37(0x29e)]():'N/A';_0xcd32aa['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x5670e9['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5670e9['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x5670e9[_0x37ac37(0x2af)]||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x5670e9['rarity']||'common')+'\x22>'+(_0x5670e9['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x494789+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x43a253['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x43a253['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x43a253['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4896fc['appendChild'](_0xcd32aa);}),setupTrophyActionButtons();}catch(_0x44249d){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x44249d),_0x4896fc[_0x1c7817(0x149)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x44249d['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x1f3ff9=a4_0x15d0de;document['querySelectorAll'](_0x1f3ff9(0x310))[_0x1f3ff9(0x170)](_0x24ae21=>{const _0x4cd054=_0x1f3ff9;_0x24ae21[_0x4cd054(0x301)]('click',_0x11bf76=>{const _0x2c764f=_0x4cd054,_0xda28cb=_0x11bf76[_0x2c764f(0x1eb)]['dataset']['id'];openTrophyModal(_0xda28cb);});}),document['querySelectorAll'](_0x1f3ff9(0x274))['forEach'](_0x1d91d4=>{_0x1d91d4['addEventListener']('click',_0x167ae4=>{const _0x9b6cef=a4_0x4fbe,_0x10ab5c=_0x167ae4['currentTarget'][_0x9b6cef(0x2fc)]['id'];openAssignTrophyModal(_0x10ab5c);});}),document['querySelectorAll']('.delete-trophy-btn')[_0x1f3ff9(0x170)](_0x314819=>{const _0x494d80=_0x1f3ff9;_0x314819[_0x494d80(0x301)]('click',_0x36252a=>{const _0x116e2d=_0x36252a['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x116e2d);});});}function openTrophyModal(_0x3417d6=null){const _0x48991a=a4_0x15d0de,_0x2bbd54=document[_0x48991a(0x29f)]('trophy-modal'),_0x372255=document['getElementById']('trophy-modal-title'),_0x457347=document['getElementById'](_0x48991a(0x2cb)),_0x56e49f=document[_0x48991a(0x29f)](_0x48991a(0x192));_0x457347[_0x48991a(0x13b)](),_0x56e49f['value']='';const _0x15a82d=document['getElementById'](_0x48991a(0x204));_0x15a82d&&(_0x15a82d['src']=DEFAULT_TROPHY_IMAGE,_0x15a82d['classList']['remove'](_0x48991a(0x1a6))),_0x3417d6?(_0x372255[_0x48991a(0x25f)]='Edit\x20Trophy',_0x56e49f['value']=_0x3417d6,loadTrophyData(_0x3417d6)):_0x372255['textContent']='Create\x20New\x20Trophy',_0x2bbd54['classList']['add']('active');}async function loadTrophyData(_0x18071a){const _0x1e363a=a4_0x15d0de;try{const _0x3bf6be=doc(db,_0x1e363a(0x35c),_0x18071a),_0xe621a7=await getDoc(_0x3bf6be);if(!_0xe621a7['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x2890a5=_0xe621a7['data']();document['getElementById']('trophy-name')['value']=_0x2890a5['name']||'',document['getElementById']('trophy-description')[_0x1e363a(0x345)]=_0x2890a5['description']||'',document['getElementById']('trophy-image-url')[_0x1e363a(0x345)]=_0x2890a5['image']||'',document['getElementById'](_0x1e363a(0x26e))['value']=_0x2890a5['rarity']||'common',updateTrophyImagePreview();}catch(_0x329704){console['error']('Error\x20loading\x20trophy\x20data:',_0x329704),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x4beda0=a4_0x15d0de;try{const _0x2ec12f=document['getElementById'](_0x4beda0(0x192))['value'],_0x2f4b01=document[_0x4beda0(0x29f)]('trophy-name')['value']['trim'](),_0x3d38b1=document['getElementById'](_0x4beda0(0x2fa))['value']['trim'](),_0x102c0e=document['getElementById']('trophy-image-url')['value'][_0x4beda0(0x344)](),_0x1ce35d=document[_0x4beda0(0x29f)]('trophy-rarity')['value'];if(!_0x2f4b01||!_0x3d38b1||!_0x102c0e){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x3c9f5e=auth['currentUser'];if(!_0x3c9f5e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies',_0x4beda0(0x1a6));return;}const _0x429d0e={'name':_0x2f4b01,'description':_0x3d38b1,'image':_0x102c0e,'rarity':_0x1ce35d,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x3c9f5e['email']};!_0x2ec12f?(_0x429d0e['createdAt']=serverTimestamp(),_0x429d0e[_0x4beda0(0x18c)]=_0x3c9f5e['email'],await addDoc(collection(db,_0x4beda0(0x35c)),_0x429d0e),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,_0x4beda0(0x35c),_0x2ec12f),_0x429d0e),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x45c612){console['error']('Error\x20saving\x20trophy:',_0x45c612),showNotification(_0x4beda0(0x16f)+_0x45c612[_0x4beda0(0x34f)],'error');}}function closeTrophyModal(){const _0x3037b8=a4_0x15d0de,_0x52cadd=document[_0x3037b8(0x29f)]('trophy-modal');_0x52cadd&&_0x52cadd['classList'][_0x3037b8(0x2dd)]('active');}async function confirmDeleteTrophy(_0x4dc02e){const _0x1a30bd=a4_0x15d0de;if(!_0x4dc02e){console['error'](_0x1a30bd(0x2b0));return;}if(confirm(_0x1a30bd(0x19e)))try{const _0x4d3238=auth['currentUser'];if(!_0x4d3238){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x4dc02e),await deleteDoc(doc(db,_0x1a30bd(0x35c),_0x4dc02e)),showNotification(_0x1a30bd(0x24d),'success'),loadTrophyDefinitions();}catch(_0x184dcb){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x184dcb),showNotification(_0x1a30bd(0x37b)+_0x184dcb['message'],'error');}}async function openAssignTrophyModal(_0x322c16){const _0x4a6909=a4_0x15d0de;try{const _0x4c7a6b=doc(db,'trophyDefinitions',_0x322c16),_0x24829a=await getDoc(_0x4c7a6b);if(!_0x24829a['exists']()){showNotification('Trophy\x20not\x20found',_0x4a6909(0x1a6));return;}const _0x5536f7=_0x24829a['data']();document[_0x4a6909(0x29f)]('assign-trophy-id')['value']=_0x322c16,document['getElementById']('assign-trophy-name')['value']=_0x5536f7[_0x4a6909(0x2af)],document[_0x4a6909(0x29f)]('assign-trophy-image')['src']=_0x5536f7['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')[_0x4a6909(0x25f)]=_0x5536f7['name']||_0x4a6909(0x334),document[_0x4a6909(0x29f)]('assign-trophy-description')[_0x4a6909(0x25f)]=_0x5536f7[_0x4a6909(0x20d)]||_0x4a6909(0x17b);const _0x5b9cf1=document['getElementById'](_0x4a6909(0x2c9));_0x5b9cf1['textContent']=_0x5536f7['rarity']||'common',_0x5b9cf1[_0x4a6909(0x2b7)]='trophy-rarity\x20'+(_0x5536f7['rarity']||_0x4a6909(0x366));const _0x3fd705=document[_0x4a6909(0x29f)]('assign-trophy-modal');_0x3fd705['classList']['add'](_0x4a6909(0x28d));}catch(_0xc7a241){console['error'](_0x4a6909(0x21b),_0xc7a241),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x4a6909(0x1a6));}}function closeAssignTrophyModal(){const _0x27fead=a4_0x15d0de,_0x39b144=document[_0x27fead(0x29f)](_0x27fead(0x386));_0x39b144&&_0x39b144[_0x27fead(0x355)]['remove']('active');}async function assignTrophyToPlayer(){const _0xadff04=a4_0x15d0de;try{const _0x1bdf27=document[_0xadff04(0x29f)]('assign-trophy-id')['value'],_0x3a990d=document['getElementById'](_0xadff04(0x332))['value'],_0x359260=document[_0xadff04(0x29f)](_0xadff04(0x1dc))['value']['trim'](),_0x3a609c=document[_0xadff04(0x32c)]('input[name=\x22assign-ladder\x22]:checked')[_0xadff04(0x345)];if(!_0x1bdf27||!_0x359260){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required',_0xadff04(0x1a6));return;}const _0x395546=auth[_0xadff04(0x1e5)];if(!_0x395546){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x27e60c=null,_0xf6c394=null,_0x1731d5=null;if(_0x3a609c===_0xadff04(0x30c)){const _0x32c8f1=collection(db,'nonParticipants'),_0xe006e2=query(_0x32c8f1,where('username','==',_0x359260)),_0x9ef3ee=await getDocs(_0xe006e2);!_0x9ef3ee['empty']&&(_0x27e60c=_0x9ef3ee['docs'][0x0],_0xf6c394=_0x27e60c['id'],_0x1731d5=_0x27e60c['data']());}else{const _0x45c0b5=_0x3a609c==='D1'?'players':_0x3a609c==='D2'?'playersD2':'playersD3',_0x5cc6f7=collection(db,_0x45c0b5),_0x3318e3=query(_0x5cc6f7,where('username','==',_0x359260)),_0xec5ed6=await getDocs(_0x3318e3);!_0xec5ed6[_0xadff04(0x267)]&&(_0x27e60c=_0xec5ed6[_0xadff04(0x144)][0x0],_0xf6c394=_0x27e60c['id'],_0x1731d5=_0x27e60c['data']());}if(!_0x27e60c){showNotification('Player\x20\x22'+_0x359260+_0xadff04(0x1e8)+(_0x3a609c==='non-participant'?'non-participants':_0x3a609c+_0xadff04(0x276)),_0xadff04(0x1a6));return;}const _0x2a38f1=collection(db,_0xadff04(0x2cd)),_0x14bbf8=query(_0x2a38f1,where('userId','==',_0xf6c394),where(_0xadff04(0x1d0),'==',_0x1bdf27)),_0x1a831c=await getDocs(_0x14bbf8);if(!_0x1a831c['empty']){showNotification('Player\x20\x22'+_0x359260+_0xadff04(0x385),'warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0xf6c394,'playerUsername':_0x359260,'trophyId':_0x1bdf27,'awardedAt':serverTimestamp(),'awardedBy':_0x395546['email'],'ladder':_0x3a609c}),showNotification(_0xadff04(0x2b9)+_0x3a990d+_0xadff04(0x364)+_0x359260,_0xadff04(0x1cf)),closeAssignTrophyModal();}catch(_0x210953){console['error']('Error\x20assigning\x20trophy:',_0x210953),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x210953['message'],_0xadff04(0x1a6));}}function setupInactivePlayersSection(){const _0x2129d1=a4_0x15d0de,_0x2ce568=document['getElementById']('inactive-days-filter');_0x2ce568&&_0x2ce568['addEventListener'](_0x2129d1(0x21a),function(){const _0x140825=_0x2129d1,_0x3d6f7f=document['getElementById'](_0x140825(0x1b1));if(_0x3d6f7f)_0x3d6f7f['click']();});const _0x4f0e18=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x37e077=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x4f0e18&&_0x37e077&&(_0x4f0e18[_0x2129d1(0x301)]('change',function(){const _0x23af6e=_0x2129d1;if(this['checked']){currentLadder='D1';if(document[_0x23af6e(0x29f)]('inactive-players')['style'][_0x23af6e(0x2d9)]!=='none'){const _0x5433a3=document['getElementById']('load-inactive-players-data');if(_0x5433a3)_0x5433a3['click']();}}}),_0x37e077['addEventListener']('change',function(){const _0x1a876b=_0x2129d1;if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')[_0x1a876b(0x31e)]['display']!=='none'){const _0x2c9649=document['getElementById'](_0x1a876b(0x1b1));if(_0x2c9649)_0x2c9649['click']();}}}));const _0x5f03e8=document['getElementById']('inactive-players-search');_0x5f03e8&&_0x5f03e8['addEventListener'](_0x2129d1(0x1a3),debounce(function(){const _0x415689=_0x2129d1,_0x2b6e29=_0x5f03e8['value']['toLowerCase'](),_0x4d19a6=document['querySelectorAll'](_0x415689(0x381));_0x4d19a6['forEach'](_0x305417=>{const _0x1977d5=_0x415689;if(_0x305417[_0x1977d5(0x32c)]('.loading-cell')||_0x305417[_0x1977d5(0x32c)]('.empty-state')||_0x305417['querySelector'](_0x1977d5(0x20e)))return;const _0x4648d2=_0x305417['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x454a14=_0x305417['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x4648d2['includes'](_0x2b6e29)||_0x454a14['includes'](_0x2b6e29)?_0x305417[_0x1977d5(0x31e)]['display']='':_0x305417['style']['display']='none';});},0x12c)),document[_0x2129d1(0x301)]('click',function(_0x1f35cc){const _0x22669f=_0x2129d1;if(_0x1f35cc['target']['closest']('.view-player-btn')){const _0x1cd4a4=_0x1f35cc['target']['closest']('.view-player-btn'),_0x48b01a=_0x1cd4a4[_0x22669f(0x2fc)]['username'];_0x48b01a&&alert(_0x22669f(0x284)+_0x48b01a+'\x20-\x20Feature\x20coming\x20soon');}}),console['log'](_0x2129d1(0x1e2));}async function loadInactivePlayersData(){const _0x5c2833=a4_0x15d0de,_0x181156=document['getElementById']('inactive-players-table-body');if(!_0x181156)return;_0x181156['innerHTML']=_0x5c2833(0x186);try{const _0x140ce3=document['getElementById'](_0x5c2833(0x2eb)),_0x4d962e=_0x140ce3?parseInt(_0x140ce3[_0x5c2833(0x345)])||0x0:0x0,_0xf226b9=collection(db,currentLadder==='D1'?_0x5c2833(0x2f2):'playersD2'),_0x2d475b=await getDocs(_0xf226b9);if(_0x2d475b['empty']){_0x181156[_0x5c2833(0x149)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x58bae8=[];_0x2d475b['forEach'](_0x2670c8=>{const _0x2e18db=_0x5c2833,_0x1da01d=_0x2670c8[_0x2e18db(0x1c8)]();_0x58bae8['push']({..._0x1da01d,'id':_0x2670c8['id'],'username':_0x1da01d['username']||_0x2e18db(0x377)});}),console['log']('Found\x20'+_0x58bae8['length']+_0x5c2833(0x290)+currentLadder+_0x5c2833(0x276));const _0x1b442c=currentLadder==='D1'?_0x5c2833(0x326):'approvedMatchesD2',_0x4e371f=_0x58bae8['map'](async _0xe3389a=>{const _0x34f7c8=_0x5c2833;try{const _0x2d6202=collection(db,_0x1b442c),_0x5db6c4=query(_0x2d6202,or(where('winnerUsername','==',_0xe3389a['username']),where(_0x34f7c8(0x2ca),'==',_0xe3389a[_0x34f7c8(0x35d)])),orderBy('approvedAt','desc'),limit(0x1)),_0x4289c9=await getDocs(_0x5db6c4);if(!_0x4289c9['empty']){const _0x510b97=_0x4289c9['docs'][0x0][_0x34f7c8(0x1c8)](),_0x45b802=_0x510b97['approvedAt']?new Date(_0x510b97[_0x34f7c8(0x1b8)][_0x34f7c8(0x2a6)]*0x3e8):null,_0x4ff73d=new Date(),_0x162baf=_0x45b802?Math['floor']((_0x4ff73d-_0x45b802)/(0x3e8*0x3c*0x3c*0x18)):null,_0x4c6ef8=_0x510b97['winnerUsername']===_0xe3389a[_0x34f7c8(0x35d)]?_0x510b97['loserUsername']:_0x510b97['winnerUsername'],_0x244a03=_0x510b97[_0x34f7c8(0x2c1)]===_0xe3389a[_0x34f7c8(0x35d)]?'Won':_0x34f7c8(0x32f);return{..._0xe3389a,'lastMatch':{'date':_0x45b802?_0x45b802['toLocaleDateString']():_0x34f7c8(0x14b),'opponent':_0x4c6ef8||_0x34f7c8(0x237),'result':_0x244a03,'timestamp':_0x45b802||new Date(0x0),'daysSinceMatch':_0x162baf||Number[_0x34f7c8(0x2bf)]}};}else return{..._0xe3389a,'lastMatch':{'date':'Never\x20played','opponent':_0x34f7c8(0x14b),'result':_0x34f7c8(0x14b),'timestamp':new Date(0x0),'daysSinceMatch':Number[_0x34f7c8(0x2bf)]}};}catch(_0x3deec4){return console['error'](_0x34f7c8(0x182)+_0xe3389a['username']+':',_0x3deec4),{..._0xe3389a,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x5a3b14=await Promise['all'](_0x4e371f);_0x5a3b14['sort']((_0x36cc99,_0x503068)=>_0x503068['lastMatch']['daysSinceMatch']-_0x36cc99['lastMatch']['daysSinceMatch']);_0x4d962e>0x0&&(_0x5a3b14=_0x5a3b14['filter'](_0x1799c4=>_0x1799c4['lastMatch']['daysSinceMatch']>=_0x4d962e));_0x181156['innerHTML']='';if(_0x5a3b14['length']===0x0){_0x181156['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x5a3b14['forEach'](_0x578a37=>{const _0x1dc82d=_0x5c2833,_0x1add8e=document['createElement']('tr'),_0x20b266=_0x578a37['lastMatch']['daysSinceMatch']>0x1e?_0x1dc82d(0x1a1):_0x578a37['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x1add8e['className']=_0x20b266,_0x1add8e[_0x1dc82d(0x149)]=_0x1dc82d(0x210)+_0x578a37['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x578a37['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x578a37['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x578a37['lastMatch'][_0x1dc82d(0x352)]===Number['MAX_SAFE_INTEGER']?'N/A':_0x578a37['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x578a37['lastMatch'][_0x1dc82d(0x297)]==='Never\x20played'?'No\x20matches\x20found':_0x578a37['lastMatch']['result']+'\x20vs\x20'+_0x578a37['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x578a37['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x181156['appendChild'](_0x1add8e);}),console[_0x5c2833(0x197)]('Displaying\x20'+_0x5a3b14['length']+'\x20inactive\x20players');}catch(_0x2792f8){console['error']('Error\x20loading\x20inactive\x20players:',_0x2792f8),_0x181156['innerHTML']=_0x5c2833(0x215)+_0x2792f8['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x3fddfb=a4_0x15d0de;console[_0x3fddfb(0x197)](_0x3fddfb(0x313));const _0xa254ee=document['getElementById']('create-match-highlight-btn');_0xa254ee&&_0xa254ee['addEventListener']('click',function(){const _0x55af33=_0x3fddfb;console['log'](_0x55af33(0x320)),openHighlightModal('match');});const _0x3e2f9d=document['getElementById']('create-creator-highlight-btn');_0x3e2f9d&&_0x3e2f9d['addEventListener']('click',function(){const _0x4f56d8=_0x3fddfb;console['log'](_0x4f56d8(0x1a5)),openHighlightModal('creator');});const _0x124166=document['getElementById']('create-achievement-highlight-btn');_0x124166&&_0x124166['addEventListener']('click',function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x5e49ea='match'){const _0x475646=a4_0x15d0de;console[_0x475646(0x197)]('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x5e49ea);const _0x207eea=document['getElementById']('highlight-modal'),_0x879486=document['getElementById']('highlight-form'),_0x3cbbbd=document['getElementById']('highlight-modal-title'),_0x4234c8=document['getElementById']('highlight-id');if(!_0x207eea||!_0x879486||!_0x3cbbbd){console[_0x475646(0x1a6)](_0x475646(0x28e));return;}_0x879486['reset'](),_0x4234c8[_0x475646(0x345)]='';const _0x546ba1=['match','creator','achievement'],_0x27b6fb=!_0x546ba1[_0x475646(0x1f3)](_0x5e49ea);if(_0x27b6fb){const _0x1bb712=_0x5e49ea;_0x4234c8['value']=_0x1bb712,_0x3cbbbd[_0x475646(0x25f)]=_0x475646(0x363),loadHighlightDataAdmin(_0x1bb712);}else{const _0x469ed6=_0x5e49ea;document[_0x475646(0x29f)]('highlight-type')[_0x475646(0x345)]=_0x469ed6,_0x3cbbbd['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x469ed6),toggleHighlightFields(_0x469ed6);const _0xaa4179=auth['currentUser'];_0xaa4179&&document['getElementById']('highlight-submitted-by')&&(document[_0x475646(0x29f)]('highlight-submitted-by')[_0x475646(0x345)]=_0xaa4179['displayName']||_0xaa4179['email']);}_0x207eea[_0x475646(0x355)][_0x475646(0x2ff)](_0x475646(0x28d));}function toggleHighlightFields(_0x368c4a){const _0x3e8374=a4_0x15d0de;console['log'](_0x3e8374(0x319)+_0x368c4a);const _0x5c8b1b=document['getElementById']('highlight-form');if(!_0x5c8b1b)return;const _0x2f3ec5=_0x5c8b1b[_0x3e8374(0x187)]('.form-group,\x20.form-row');_0x2f3ec5['forEach'](_0x7cec60=>_0x7cec60['style'][_0x3e8374(0x2d9)]='none');const _0x3dde00=document[_0x3e8374(0x29f)]('highlight-video-preview-container');if(_0x3dde00)_0x3dde00[_0x3e8374(0x31e)]['display']='none';const _0x11b225=[_0x3e8374(0x307),'highlight-description-container',_0x3e8374(0x1f8)];_0x11b225['forEach'](_0x43b92f=>{const _0x2fdb8f=_0x3e8374,_0x370be5=document[_0x2fdb8f(0x29f)](_0x43b92f);if(_0x370be5)_0x370be5['style']['display']='block';});if(_0x368c4a==='match'){const _0x21b348=[_0x3e8374(0x32e),'highlight-match-info-container','highlight-map-container',_0x3e8374(0x391),'highlight-players-container','highlight-match-link-container'];_0x21b348['forEach'](_0x286125=>{const _0x18f9c8=_0x3e8374,_0x2410e2=document['getElementById'](_0x286125);_0x2410e2&&(_0x286125===_0x18f9c8(0x154)?_0x2410e2[_0x18f9c8(0x31e)][_0x18f9c8(0x2d9)]='flex':_0x2410e2['style']['display']=_0x18f9c8(0x249));});const _0x492c8b=document[_0x3e8374(0x29f)](_0x3e8374(0x1cb));if(_0x492c8b){_0x492c8b['required']=!![];const _0x198c63=_0x492c8b['previousElementSibling'];if(_0x198c63)_0x198c63['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x3dde00)_0x3dde00[_0x3e8374(0x31e)][_0x3e8374(0x2d9)]='block';updateHighlightVideoPreview();}else{if(_0x368c4a==='creator'){const _0xc53474=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0xc53474[_0x3e8374(0x170)](_0xf75c3d=>{const _0x400afe=_0x3e8374,_0x5c9a11=document[_0x400afe(0x29f)](_0xf75c3d);if(_0x5c9a11)_0x5c9a11['style']['display']='block';});const _0x40b569=document['getElementById']('highlight-video-id');if(_0x40b569){_0x40b569['required']=![];const _0x45f50b=_0x40b569['previousElementSibling'];if(_0x45f50b)_0x45f50b['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x368c4a==='achievement'){const _0x4fe820=[_0x3e8374(0x1dd),_0x3e8374(0x238),_0x3e8374(0x1d5),'highlight-player-profile-container',_0x3e8374(0x26d),_0x3e8374(0x32e)];_0x4fe820['forEach'](_0x2d3bd3=>{const _0x30ec1c=_0x3e8374,_0x576480=document[_0x30ec1c(0x29f)](_0x2d3bd3);if(_0x576480)_0x576480['style']['display']='block';});const _0x5b1f93=document['getElementById'](_0x3e8374(0x1cb));if(_0x5b1f93){_0x5b1f93['required']=![];const _0x5001d9=_0x5b1f93['previousElementSibling'];if(_0x5001d9)_0x5001d9[_0x3e8374(0x149)]='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0xede4fb){const _0x38c815=a4_0x15d0de;try{const _0x473756=doc(db,'highlights',_0xede4fb),_0x522a7e=await getDoc(_0x473756);if(!_0x522a7e['exists']()){showNotification('Highlight\x20not\x20found',_0x38c815(0x1a6));return;}const _0x4060f1=_0x522a7e['data'](),_0x408ff0=_0x4060f1[_0x38c815(0x2da)]||'match';document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x408ff0),document['getElementById']('highlight-type')['value']=_0x408ff0,toggleHighlightFields(_0x408ff0),document['getElementById']('highlight-title')[_0x38c815(0x345)]=_0x4060f1['title']||'',document['getElementById']('highlight-description')['value']=_0x4060f1[_0x38c815(0x20d)]||'',document[_0x38c815(0x29f)]('highlight-submitted-by')['value']=_0x4060f1['submittedBy']||'';_0x4060f1['videoId']&&(document[_0x38c815(0x29f)]('highlight-video-id')[_0x38c815(0x345)]=_0x4060f1[_0x38c815(0x252)],updateHighlightVideoPreview());if(_0x408ff0==='match'){document[_0x38c815(0x29f)](_0x38c815(0x136))['value']=_0x4060f1['matchInfo']||'',document['getElementById']('highlight-map')['value']=_0x4060f1[_0x38c815(0x1db)]||'';if(_0x4060f1['matchDate']){const _0x3dab68=new Date(_0x4060f1[_0x38c815(0x24a)]['seconds']*0x3e8);document['getElementById'](_0x38c815(0x19f))[_0x38c815(0x345)]=_0x3dab68['toISOString']()[_0x38c815(0x234)]('T')[0x0];}document[_0x38c815(0x29f)]('highlight-winner-name')['value']=_0x4060f1['winnerName']||'',document['getElementById'](_0x38c815(0x27c))['value']=_0x4060f1['winnerScore']||'',document[_0x38c815(0x29f)](_0x38c815(0x380))[_0x38c815(0x345)]=_0x4060f1['loserName']||'',document[_0x38c815(0x29f)]('highlight-loser-score')['value']=_0x4060f1['loserScore']||'',document['getElementById'](_0x38c815(0x20b))[_0x38c815(0x345)]=_0x4060f1[_0x38c815(0x2ad)]||'';}else{if(_0x408ff0==='creator')document['getElementById'](_0x38c815(0x174))['value']=_0x4060f1['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x4060f1['mapCreator']||'',document[_0x38c815(0x29f)]('highlight-map-version')['value']=_0x4060f1['mapVersion']||'',document[_0x38c815(0x29f)](_0x38c815(0x281))['value']=_0x4060f1['creatorImageUrl']||'';else _0x408ff0==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0x4060f1['achievementPlayer']||'',document[_0x38c815(0x29f)]('highlight-achievement-type')['value']=_0x4060f1['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x4060f1['achievementDetails']||'',document[_0x38c815(0x29f)]('highlight-player-profile')['value']=_0x4060f1['playerProfileUrl']||'',document['getElementById'](_0x38c815(0x36a))['value']=_0x4060f1['achievementImageUrl']||'');}}catch(_0x46b164){console['error']('Error\x20loading\x20highlight:',_0x46b164),showNotification('Error\x20loading\x20highlight:\x20'+_0x46b164['message'],_0x38c815(0x1a6));}}async function saveHighlight(){const _0x3c71fc=a4_0x15d0de;try{const _0x3a66be=document[_0x3c71fc(0x29f)](_0x3c71fc(0x213))?.['value']||'',_0xfd5d11=document[_0x3c71fc(0x29f)](_0x3c71fc(0x2e6))?.['value']||_0x3c71fc(0x2aa),_0x33961d={'title':document['getElementById'](_0x3c71fc(0x35b))?.[_0x3c71fc(0x345)]?.['trim']()||'','description':document['getElementById'](_0x3c71fc(0x1e4))?.['value']?.['trim']()||'','submittedBy':document[_0x3c71fc(0x29f)](_0x3c71fc(0x265))?.['value']?.[_0x3c71fc(0x344)]()||'','videoId':document[_0x3c71fc(0x29f)]('highlight-video-id')?.['value']?.[_0x3c71fc(0x344)]()||null,'type':_0xfd5d11};if(!_0x33961d['title']){showNotification('Title\x20is\x20required','error');return;}if(_0xfd5d11==='match'){_0x33961d['matchInfo']=document['getElementById']('highlight-match-info')?.[_0x3c71fc(0x345)]?.['trim']()||'',_0x33961d['map']=document[_0x3c71fc(0x29f)](_0x3c71fc(0x174))?.['value']?.[_0x3c71fc(0x344)]()||'';const _0x548a91=document['getElementById']('highlight-match-date'),_0x1c1868=_0x548a91?.['value']||'';_0x33961d[_0x3c71fc(0x24a)]=_0x1c1868?Timestamp['fromDate'](new Date(_0x1c1868)):null,_0x33961d['winnerName']=document['getElementById']('highlight-winner-name')?.['value']?.[_0x3c71fc(0x344)]()||'',_0x33961d[_0x3c71fc(0x18b)]=document['getElementById'](_0x3c71fc(0x27c))?.['value']?.[_0x3c71fc(0x344)]()||'',_0x33961d[_0x3c71fc(0x226)]=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x33961d[_0x3c71fc(0x32a)]=document['getElementById']('highlight-loser-score')?.['value']?.['trim']()||'',_0x33961d[_0x3c71fc(0x2ad)]=document[_0x3c71fc(0x29f)]('highlight-match-link')?.[_0x3c71fc(0x345)]?.[_0x3c71fc(0x344)]()||'';if(!_0x33961d['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0xfd5d11==='creator'){_0x33961d['map']=document[_0x3c71fc(0x29f)]('highlight-map')?.['value']?.['trim']()||'',_0x33961d['mapCreator']=document['getElementById']('highlight-map-creator')?.['value']?.[_0x3c71fc(0x344)]()||'',_0x33961d[_0x3c71fc(0x299)]=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x33961d[_0x3c71fc(0x311)]=document[_0x3c71fc(0x29f)]('highlight-creator-image')?.['value']?.[_0x3c71fc(0x344)]()||'';if(!_0x33961d['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0xfd5d11==='achievement'){_0x33961d[_0x3c71fc(0x1e3)]=document['getElementById']('highlight-achievement-player')?.[_0x3c71fc(0x345)]?.['trim']()||'',_0x33961d['achievementType']=document['getElementById'](_0x3c71fc(0x35f))?.['value']?.[_0x3c71fc(0x344)]()||'',_0x33961d['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.[_0x3c71fc(0x344)]()||'',_0x33961d[_0x3c71fc(0x2b2)]=document['getElementById'](_0x3c71fc(0x33f))?.['value']?.[_0x3c71fc(0x344)]()||'',_0x33961d[_0x3c71fc(0x148)]=document[_0x3c71fc(0x29f)]('highlight-achievement-image')?.['value']?.[_0x3c71fc(0x344)]()||'';if(!_0x33961d['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x3a66be?(_0x33961d['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x3a66be),_0x33961d),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x33961d['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x33961d),showNotification(_0x3c71fc(0x331),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x1f8dfe){console[_0x3c71fc(0x1a6)](_0x3c71fc(0x25e),_0x1f8dfe),showNotification('Error\x20saving\x20highlight:\x20'+_0x1f8dfe[_0x3c71fc(0x34f)],_0x3c71fc(0x1a6));}}function closeHighlightModal(){const _0x1cba6d=a4_0x15d0de,_0x224a03=document['getElementById']('highlight-modal');if(_0x224a03)_0x224a03['classList'][_0x1cba6d(0x2dd)]('active');}function getHighlightTypeName(_0x3ee0ce){const _0x21636e=a4_0x15d0de;switch(_0x3ee0ce){case'match':return _0x21636e(0x279);case _0x21636e(0x199):return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x732806=a4_0x15d0de,_0x32e9a4=document[_0x732806(0x29f)]('highlight-video-id'),_0x5e32ed=document['getElementById'](_0x732806(0x172)),_0x54bcdc=document['getElementById']('highlight-video-preview');if(!_0x32e9a4||!_0x54bcdc||!_0x5e32ed)return;const _0x530db1=_0x32e9a4['value'][_0x732806(0x344)]();_0x530db1&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x530db1)?(_0x54bcdc[_0x732806(0x232)]='https://www.youtube.com/embed/'+_0x530db1,_0x5e32ed[_0x732806(0x31e)]['display']=_0x732806(0x249)):(_0x54bcdc['src']='',_0x5e32ed[_0x732806(0x31e)]['display']='none');}async function loadHighlightsAdmin(){const _0x3d973b=a4_0x15d0de,_0x185152=document['getElementById']('highlights-table-body');if(!_0x185152)return;_0x185152[_0x3d973b(0x149)]=_0x3d973b(0x21c);try{const _0x5ad63d=query(collection(db,'highlights'),orderBy(_0x3d973b(0x260),'desc')),_0x10b39c=await getDocs(_0x5ad63d);if(_0x10b39c[_0x3d973b(0x267)]){_0x185152['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x185152['innerHTML']='',_0x10b39c['forEach'](_0x5cfa0c=>{const _0xee4b3a=_0x3d973b,_0x4539a7=_0x5cfa0c['data'](),_0x47e27c=document['createElement']('tr'),_0x42d7d7=_0x4539a7[_0xee4b3a(0x260)]?new Date(_0x4539a7['createdAt'][_0xee4b3a(0x2a6)]*0x3e8)['toLocaleDateString']():_0xee4b3a(0x14b);let _0x55e07d='Unknown',_0x554ccf='';switch(_0x4539a7['type']){case'match':_0x55e07d=_0xee4b3a(0x31f),_0x554ccf='match-type';break;case _0xee4b3a(0x199):_0x55e07d='Creator',_0x554ccf=_0xee4b3a(0x214);break;case _0xee4b3a(0x2c7):_0x55e07d='Achievement',_0x554ccf=_0xee4b3a(0x22d);break;}_0x47e27c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4539a7['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x554ccf+'\x22>'+_0x55e07d+_0xee4b3a(0x1e0)+_0x42d7d7+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4539a7['submittedBy']||'Unknown')+_0xee4b3a(0x33c)+(_0x4539a7['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0xee4b3a(0x285))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x5cfa0c['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x5cfa0c['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x185152['appendChild'](_0x47e27c);}),document[_0x3d973b(0x187)]('.edit-highlight-btn')['forEach'](_0x37ab02=>{_0x37ab02['addEventListener']('click',_0x4272a3=>{const _0x1fdefd=a4_0x4fbe;openHighlightModal(_0x4272a3[_0x1fdefd(0x1eb)]['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x14918f=>{_0x14918f['addEventListener']('click',_0x3a7839=>{confirmDeleteHighlight(_0x3a7839['currentTarget']['dataset']['id']);});});}catch(_0x5a27fa){console[_0x3d973b(0x1a6)]('Error\x20loading\x20highlights:',_0x5a27fa),_0x185152['innerHTML']=_0x3d973b(0x294)+_0x5a27fa['message']+_0x3d973b(0x2e9);}}async function confirmDeleteHighlight(_0x108e68){const _0x169e54=a4_0x15d0de;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x169e54(0x1c5),_0x108e68)),showNotification(_0x169e54(0x2a8),'success'),loadHighlightsAdmin();}catch(_0x1f0546){console['error'](_0x169e54(0x2bd),_0x1f0546),showNotification(_0x169e54(0x1b7)+_0x1f0546['message'],_0x169e54(0x1a6));}}function setupCreateTestMatchModal(){const _0x488f01=a4_0x15d0de;console['log'](_0x488f01(0x229));const _0x2d6df0=document['getElementById']('create-test-match-modal'),_0x1db282=document['getElementById']('create-test-match-form');if(!_0x2d6df0){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x1db282){console['error'](_0x488f01(0x1da));return;}const _0x535b04=_0x2d6df0[_0x488f01(0x34d)](!![]);_0x2d6df0['parentNode'][_0x488f01(0x17d)](_0x535b04,_0x2d6df0);const _0x552db9=_0x535b04['querySelector'](_0x488f01(0x24f));_0x535b04['addEventListener']('click',function(_0x3bfe84){const _0x3420eb=_0x488f01;_0x3bfe84['target']===_0x535b04&&(console[_0x3420eb(0x197)](_0x3420eb(0x2b4)),closeCreateTestMatchModal());});const _0xbaae33=_0x535b04[_0x488f01(0x32c)](_0x488f01(0x1fe));_0xbaae33&&_0xbaae33[_0x488f01(0x301)]('click',function(_0x4bafb0){_0x4bafb0['preventDefault'](),_0x4bafb0['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x3393d1=_0x535b04['querySelector']('#cancel-create-test-match-btn');_0x3393d1&&_0x3393d1[_0x488f01(0x301)](_0x488f01(0x1f5),function(_0x4b4cce){const _0x55317f=_0x488f01;_0x4b4cce[_0x55317f(0x264)](),_0x4b4cce['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x552db9){_0x552db9[_0x488f01(0x301)]('submit',function(_0x5da15c){const _0x29760b=_0x488f01;_0x5da15c['preventDefault'](),_0x5da15c['stopPropagation'](),console['log'](_0x29760b(0x157)),createTestMatch();});const _0x2094d5=_0x552db9['querySelector'](_0x488f01(0x2df));_0x2094d5&&_0x2094d5[_0x488f01(0x301)]('click',function(_0xcf4923){const _0x48e255=_0x488f01;_0xcf4923[_0x48e255(0x264)](),_0xcf4923['stopPropagation'](),console['log'](_0x48e255(0x160)),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x2a7cde=a4_0x15d0de;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x41763e=document['getElementById']('highlight-form');_0x41763e&&_0x41763e[_0x2a7cde(0x301)]('submit',_0x1ecb10=>{const _0x1567da=_0x2a7cde;_0x1ecb10[_0x1567da(0x264)](),saveHighlight();});const _0x19c1f6=document['getElementById'](_0x2a7cde(0x362));_0x19c1f6&&_0x19c1f6['addEventListener']('click',closeHighlightModal);const _0x4b955e=document['querySelector'](_0x2a7cde(0x146));_0x4b955e&&_0x4b955e[_0x2a7cde(0x301)]('click',closeHighlightModal);const _0x508b6f=document['getElementById'](_0x2a7cde(0x183));_0x508b6f&&_0x508b6f[_0x2a7cde(0x301)]('click',_0x270de6=>{_0x270de6['target']===_0x508b6f&&closeHighlightModal();});const _0xaf3672=document['getElementById']('highlight-video-id');_0xaf3672&&_0xaf3672['addEventListener'](_0x2a7cde(0x1a3),()=>{updateHighlightVideoPreview();}),console[_0x2a7cde(0x197)](_0x2a7cde(0x280));}function setupManageMatchesSection(){const _0x404751=a4_0x15d0de;console['log'](_0x404751(0x20f));const _0x3a10e0=document['getElementById']('matches-prev-page'),_0x4027dd=document['getElementById']('matches-next-page');_0x3a10e0&&_0x3a10e0['addEventListener']('click',()=>{const _0x257f22=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x257f22]['page']-0x1);});_0x4027dd&&_0x4027dd[_0x404751(0x301)]('click',()=>{const _0x4620dc=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x4620dc]['page']+0x1);});const _0x4a4674=document['getElementById']('apply-matches-filters'),_0x40999a=document['getElementById'](_0x404751(0x390));_0x4a4674&&_0x4a4674['addEventListener']('click',applyMatchesFilters);_0x40999a&&_0x40999a[_0x404751(0x301)](_0x404751(0x1f5),resetMatchesFilters);const _0x1745b5=document['getElementById']('matches-search');_0x1745b5&&_0x1745b5['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x1d91a8=document['getElementById']('resimulate-match-btn');_0x1d91a8&&_0x1d91a8['addEventListener'](_0x404751(0x1f5),openResimulateModal);const _0x59b111=document['getElementById'](_0x404751(0x256));if(_0x59b111){const _0x2d204d=_0x59b111['querySelector']('.close');_0x2d204d&&_0x2d204d['addEventListener']('click',closeResimulateModal),_0x59b111['addEventListener'](_0x404751(0x1f5),_0x106235=>{_0x106235['target']===_0x59b111&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console[_0x404751(0x197)]('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x2544b7=a4_0x15d0de;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x384764=document[_0x2544b7(0x29f)]('create-test-match-modal'),_0x565c36=document[_0x2544b7(0x29f)]('create-test-match-form');if(!_0x384764){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x565c36){console[_0x2544b7(0x1a6)]('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x565c36['reset']();const _0x362250=document[_0x2544b7(0x187)](_0x2544b7(0x350));let _0x511b76=![];_0x362250['forEach'](_0x5169f0=>{console['log']('Found\x20radio\x20with\x20value:',_0x5169f0['value']),_0x5169f0['value']===currentLadder&&(_0x5169f0['checked']=!![],_0x511b76=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x511b76){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x38bc5c=document[_0x2544b7(0x32c)](_0x2544b7(0x2e2));_0x38bc5c&&(_0x38bc5c['checked']=!![],console['log'](_0x2544b7(0x180)));}const _0x17086e=document['getElementById']('test-match-date');if(_0x17086e){const _0x358edc=new Date()['toISOString']()['split']('T')[0x0];_0x17086e['value']=_0x358edc;}_0x384764[_0x2544b7(0x31e)]['display']='flex',_0x384764[_0x2544b7(0x31e)]['visibility']='visible',_0x384764['style']['opacity']='1',_0x384764[_0x2544b7(0x355)]['add'](_0x2544b7(0x28d)),console[_0x2544b7(0x197)]('Modal\x20should\x20now\x20be\x20visible');const _0x3449f8=document['getElementById']('test-match-winner-username');_0x3449f8&&setTimeout(()=>{_0x3449f8['focus']();},0x64);}function closeCreateTestMatchModal(){const _0xf3095=a4_0x15d0de;console['log'](_0xf3095(0x2d6));const _0xa762c1=document['getElementById'](_0xf3095(0x196));if(!_0xa762c1){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0xa762c1['classList']['remove'](_0xf3095(0x28d)),_0xa762c1['style']['opacity']='0',_0xa762c1['style'][_0xf3095(0x2fd)]='hidden',setTimeout(()=>{const _0x90b5b0=_0xf3095;!_0xa762c1[_0x90b5b0(0x355)][_0x90b5b0(0x23d)]('active')&&(_0xa762c1['style'][_0x90b5b0(0x2d9)]='none');},0x12c),console[_0xf3095(0x197)]('Modal\x20closed');}async function createTestMatch(){const _0x1ff359=a4_0x15d0de;console[_0x1ff359(0x197)]('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x50e138=auth['currentUser'];if(!_0x50e138){showNotification('You\x20must\x20be\x20logged\x20in',_0x1ff359(0x1a6));return;}const _0x2b5c87='D1',_0x56dbc8='approvedMatches',_0x3fc1cb={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x1ff359(0x150),'approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x50e138['email'],'createdAt':serverTimestamp(),'createdBy':_0x50e138[_0x1ff359(0x38e)],'isTestMatch':!![],'ladder':_0x2b5c87,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x50e138['email']};console[_0x1ff359(0x197)]('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x56dbc8),_0x3fc1cb),showNotification('Simple\x20test\x20match\x20created\x20successfully',_0x1ff359(0x1cf)),closeCreateTestMatchModal();}catch(_0x42e98e){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x42e98e),showNotification(_0x1ff359(0x1ac)+_0x42e98e[_0x1ff359(0x34f)],'error');}}window['testFirebaseConnection']=async function(){const _0x8b496a=a4_0x15d0de;try{console['log']('Testing\x20Firebase\x20connection...'),console['log'](_0x8b496a(0x2f8),auth),console['log']('DB:',db),console[_0x8b496a(0x197)](_0x8b496a(0x151),auth['currentUser']);const _0x1d405e=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x1d405e);const _0x11aa89=query(_0x1d405e,where('username','==','nonexistent'));console[_0x8b496a(0x197)]('Query\x20created:',_0x11aa89);const _0x2fe791=await getDocs(_0x11aa89);console[_0x8b496a(0x197)]('Query\x20executed.\x20Empty:',_0x2fe791[_0x8b496a(0x267)]),console['log'](_0x8b496a(0x357));}catch(_0x4c4c29){console[_0x8b496a(0x1a6)]('Firebase\x20connection\x20test\x20failed:',_0x4c4c29);}};function setupCreateTestMatchButton(){const _0x37e66f=a4_0x15d0de,_0x548672=document['getElementById']('create-test-match-btn');if(!_0x548672){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log'](_0x37e66f(0x231));const _0x30c4dc=_0x548672[_0x37e66f(0x34d)](!![]);_0x548672['parentNode']['replaceChild'](_0x30c4dc,_0x548672),_0x30c4dc['addEventListener'](_0x37e66f(0x1f5),function(_0x5d11c6){const _0x25bc3a=_0x37e66f;_0x5d11c6[_0x25bc3a(0x264)](),_0x5d11c6['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x4830ac=0x1){const _0x3038cc=a4_0x15d0de,_0x4ef599=document['getElementById']('matches-table-body');if(!_0x4ef599)return;_0x4ef599['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x612861=currentLadder[_0x3038cc(0x1d7)](),_0x488e79=matchesPagination[_0x612861],_0x1a3dec=currentLadder==='D1'?_0x3038cc(0x326):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x34d69b=collection(db,_0x1a3dec);_0x4830ac<=0x1?(_0x488e79['page']=0x1,_0x488e79['firstVisible']=null,_0x488e79['lastVisible']=null):_0x488e79[_0x3038cc(0x2ae)]=_0x4830ac;const _0x4f62a1=getMatchesFilters();let _0x29bdc2=_0x34d69b;if(_0x4f62a1[_0x3038cc(0x18d)]||_0x4f62a1['endDate']||_0x4f62a1['searchTerm']){let _0x48ad03=[];_0x4f62a1[_0x3038cc(0x18d)]&&_0x4f62a1['endDate']?(_0x48ad03[_0x3038cc(0x322)](where('approvedAt','>=',_0x4f62a1['startDate']),where(_0x3038cc(0x1b8),'<=',_0x4f62a1[_0x3038cc(0x28c)])),_0x29bdc2=query(_0x34d69b,..._0x48ad03)):_0x29bdc2=query(_0x34d69b,orderBy(_0x3038cc(0x1b8),'desc'));}else _0x29bdc2=query(_0x34d69b,orderBy(_0x3038cc(0x1b8),'desc'));_0x4830ac>0x1&&_0x488e79[_0x3038cc(0x2bb)]?_0x29bdc2=query(_0x29bdc2,startAfter(_0x488e79['lastVisible']),limit(PAGE_SIZE)):_0x29bdc2=query(_0x29bdc2,limit(PAGE_SIZE));const _0x379de7=await getDocs(_0x29bdc2);!_0x379de7['empty']&&(_0x488e79['firstVisible']=_0x379de7[_0x3038cc(0x144)][0x0],_0x488e79['lastVisible']=_0x379de7['docs'][_0x379de7['docs']['length']-0x1]);let _0x2cd28a=![];if(!_0x379de7['empty']){const _0x261f8f=query(_0x29bdc2,startAfter(_0x488e79['lastVisible']),limit(0x1)),_0x467489=await getDocs(_0x261f8f);_0x2cd28a=!_0x467489['empty'];}const _0xf47375=document['getElementById']('matches-prev-page'),_0x4acbfd=document['getElementById']('matches-next-page'),_0x3a9b3e=document['getElementById']('matches-page-indicator');if(_0xf47375)_0xf47375[_0x3038cc(0x1cc)]=_0x488e79['page']<=0x1;if(_0x4acbfd)_0x4acbfd['disabled']=!_0x2cd28a;if(_0x3a9b3e)_0x3a9b3e['textContent']='Page\x20'+_0x488e79['page'];if(_0x379de7[_0x3038cc(0x267)]){_0x4ef599[_0x3038cc(0x149)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x4ef599['innerHTML']='',_0x379de7[_0x3038cc(0x170)](_0x385fe8=>{const _0x51ebb8=_0x3038cc,_0x279950=_0x385fe8['data'](),_0xa36225=document[_0x51ebb8(0x1ee)]('tr'),_0x2c3d8f=_0x279950['approvedAt']?new Date(_0x279950[_0x51ebb8(0x1b8)][_0x51ebb8(0x2a6)]*0x3e8)['toLocaleDateString']():'N/A';_0xa36225['setAttribute']('data-id',_0x385fe8['id']),_0xa36225['setAttribute']('data-ladder',currentLadder),_0xa36225['classList']['add']('match-row'),_0xa36225['innerHTML']=_0x51ebb8(0x210)+_0x2c3d8f+_0x51ebb8(0x291)+(_0x279950['winnerUsername']||'Unknown')+_0x51ebb8(0x1b3)+(_0x279950['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x279950['winnerScore']||0x0)+'\x20-\x20'+(_0x279950['loserScore']||0x0)+_0x51ebb8(0x2d1)+(_0x279950[_0x51ebb8(0x171)]||_0x51ebb8(0x14b))+_0x51ebb8(0x239)+currentLadder+_0x51ebb8(0x36d)+_0x385fe8['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x385fe8['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4ef599['appendChild'](_0xa36225);}),setupMatchesActionButtons(),_0x4f62a1['searchTerm']&&filterMatchesTable(),console['log']('Loaded\x20'+_0x379de7['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x488e79[_0x3038cc(0x2ae)]);}catch(_0x3b2a53){console['error']('Error\x20loading\x20matches:',_0x3b2a53),_0x4ef599['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x3b2a53['message']+_0x3038cc(0x2e9);}}async function deleteMatch(_0x50f7cb,_0x2c5114){const _0x480155=a4_0x15d0de;try{console['log'](_0x480155(0x221)+_0x50f7cb+'\x20from\x20'+_0x2c5114+'\x20ladder');const _0x4745b9=auth[_0x480155(0x1e5)];if(!_0x4745b9){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches',_0x480155(0x1a6));return;}const _0x42df6d=_0x2c5114==='D1'?_0x480155(0x326):_0x2c5114==='D2'?'approvedMatchesD2':'approvedMatchesD3';console[_0x480155(0x197)](_0x480155(0x321)+_0x42df6d),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x42df6d,_0x50f7cb)),console[_0x480155(0x197)]('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully',_0x480155(0x1cf));const _0x1238bd=_0x2c5114[_0x480155(0x1d7)]();loadMatchesData(matchesPagination[_0x1238bd][_0x480155(0x2ae)]);}catch(_0x52da9d){console[_0x480155(0x1a6)]('Error\x20deleting\x20match:',_0x52da9d),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x52da9d[_0x480155(0x34f)],_0x480155(0x1a6));}}function setupMatchesActionButtons(){const _0x441b56=a4_0x15d0de;console[_0x441b56(0x197)]('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x2648e1=>{const _0x1e3fae=_0x441b56;_0x2648e1[_0x1e3fae(0x301)](_0x1e3fae(0x1f5),_0x4151b0=>{const _0xd6717a=_0x1e3fae;_0x4151b0[_0xd6717a(0x264)](),_0x4151b0['stopPropagation']();const _0xbf6ecc=_0x4151b0[_0xd6717a(0x1eb)]['dataset']['id'],_0x1c0f43=_0x4151b0[_0xd6717a(0x1eb)][_0xd6717a(0x202)]('tr'),_0x4ad34b=_0x1c0f43[_0xd6717a(0x2fc)]['ladder'];console['log'](_0xd6717a(0x220),_0xbf6ecc,_0x4ad34b),openEditMatchModal(_0xbf6ecc,_0x4ad34b);});}),document['querySelectorAll']('.delete-match-btn')['forEach'](_0x1a89bc=>{_0x1a89bc['addEventListener']('click',_0x206d5d=>{const _0x3552a4=a4_0x4fbe;_0x206d5d['preventDefault'](),_0x206d5d[_0x3552a4(0x38c)]();const _0x14d777=_0x206d5d['currentTarget']['dataset']['id'],_0x46729a=_0x206d5d[_0x3552a4(0x1eb)]['closest']('tr'),_0x5daa08=_0x46729a['dataset'][_0x3552a4(0x165)]||currentLadder;console[_0x3552a4(0x197)]('Delete\x20match\x20clicked:',_0x14d777,_0x5daa08),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x14d777,_0x5daa08);});}),console[_0x441b56(0x197)]('Matches\x20action\x20buttons\x20setup\x20complete');}function a4_0x4fbe(_0x5c97b3,_0x5008a5){const _0x5175fd=a4_0x2870();return a4_0x4fbe=function(_0x51d08d,_0x49114c){_0x51d08d=_0x51d08d-0x135;let _0x287025=_0x5175fd[_0x51d08d];return _0x287025;},a4_0x4fbe(_0x5c97b3,_0x5008a5);}function filterMatchesTable(){const _0x2710c2=a4_0x15d0de,_0x475eba=document[_0x2710c2(0x29f)]('matches-search')['value']['toLowerCase'](),_0x29b889=document['querySelectorAll']('#matches-table-body\x20tr');let _0x5ecc12=0x0;_0x29b889['forEach'](_0x371297=>{const _0x4f77c2=_0x2710c2;if(_0x371297['classList']['contains'](_0x4f77c2(0x361))||_0x371297['classList']['contains'](_0x4f77c2(0x1ab))||_0x371297[_0x4f77c2(0x355)]['contains']('error-state'))return;const _0xd86c37=_0x371297['cells'][0x1]['textContent']['toLowerCase'](),_0x5a42ee=_0x371297['cells'][0x2][_0x4f77c2(0x25f)]['toLowerCase'](),_0x312f05=_0x371297['cells'][0x4][_0x4f77c2(0x25f)]['toLowerCase']();_0xd86c37['includes'](_0x475eba)||_0x5a42ee[_0x4f77c2(0x1f3)](_0x475eba)||_0x312f05['includes'](_0x475eba)?(_0x371297['style']['display']='',_0x5ecc12++):_0x371297['style']['display']=_0x4f77c2(0x1c6);});if(_0x5ecc12===0x0&&_0x29b889[_0x2710c2(0x1b0)]>0x0){const _0x5b5915=document['getElementById']('matches-table-body'),_0x262a1f=_0x5b5915['querySelector']('.no-results');if(!_0x262a1f){const _0x2b56e7=document['createElement']('tr');_0x2b56e7[_0x2710c2(0x2b7)]='no-results',_0x2b56e7['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x475eba+'\x27</td>',_0x5b5915['appendChild'](_0x2b56e7);}}else{const _0x592c06=document['querySelector']('.no-results');_0x592c06&&_0x592c06[_0x2710c2(0x2dd)]();}}function getMatchesFilters(){const _0x5303b4=a4_0x15d0de,_0x554dee=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x5a1b6f=document['getElementById']('matches-start-date')['value'],_0x55092c=document['getElementById'](_0x5303b4(0x155))['value'];let _0x1fa16e=null,_0x2d9936=null;return _0x5a1b6f&&(_0x1fa16e=new Date(_0x5a1b6f),_0x1fa16e['setHours'](0x0,0x0,0x0,0x0),_0x1fa16e=Timestamp[_0x5303b4(0x384)](_0x1fa16e)),_0x55092c&&(_0x2d9936=new Date(_0x55092c),_0x2d9936['setHours'](0x17,0x3b,0x3b,0x3e7),_0x2d9936=Timestamp[_0x5303b4(0x384)](_0x2d9936)),{'searchTerm':_0x554dee,'startDate':_0x1fa16e,'endDate':_0x2d9936};}async function applyMatchesFilters(){const _0xa1355e=currentLadder['toLowerCase']();matchesPagination[_0xa1355e]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x5676b0=a4_0x15d0de;document[_0x5676b0(0x29f)](_0x5676b0(0x30e))[_0x5676b0(0x345)]='',document['getElementById'](_0x5676b0(0x155))[_0x5676b0(0x345)]='',document['getElementById']('matches-search')[_0x5676b0(0x345)]='';const _0xfb8a57=currentLadder['toLowerCase']();matchesPagination[_0xfb8a57]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x38bcae,_0x405101){const _0x38487b=a4_0x15d0de,_0x25171d=document['getElementById'](_0x38487b(0x388));if(!_0x25171d)return;try{const _0x4046cf=_0x405101==='D1'?_0x38487b(0x326):_0x405101==='D2'?_0x38487b(0x37a):'approvedMatchesD3',_0x36000b=doc(db,_0x4046cf,_0x38bcae),_0x191203=await getDoc(_0x36000b);if(!_0x191203['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x3f90e0=_0x191203['data']();document[_0x38487b(0x29f)]('edit-match-id')[_0x38487b(0x345)]=_0x38bcae,document['getElementById'](_0x38487b(0x376))['value']=_0x405101,document['getElementById']('edit-match-winner')[_0x38487b(0x345)]=_0x3f90e0['winnerUsername']||'',document['getElementById']('edit-match-winner-score')[_0x38487b(0x345)]=_0x3f90e0['winnerScore']||0x0,document['getElementById'](_0x38487b(0x1cd))['value']=_0x3f90e0[_0x38487b(0x36e)]||0x0,document[_0x38487b(0x29f)](_0x38487b(0x31d))['value']=_0x3f90e0['winnerComment']||'',document['getElementById']('edit-match-loser')[_0x38487b(0x345)]=_0x3f90e0[_0x38487b(0x2ca)]||'',document['getElementById'](_0x38487b(0x309))['value']=_0x3f90e0['loserScore']||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0x3f90e0[_0x38487b(0x14c)]||0x0,document[_0x38487b(0x29f)](_0x38487b(0x1c3))['value']=_0x3f90e0[_0x38487b(0x287)]||'',document[_0x38487b(0x29f)]('edit-match-map')['value']=_0x3f90e0['mapPlayed']||'',document['getElementById'](_0x38487b(0x389))['value']=_0x3f90e0['winnerDemoLink']||'',document[_0x38487b(0x29f)](_0x38487b(0x35e))['value']=_0x3f90e0[_0x38487b(0x36c)]||_0x3f90e0['demoLink']||'',document['getElementById'](_0x38487b(0x15f))['textContent']='Edit\x20Match:\x20'+_0x3f90e0[_0x38487b(0x2c1)]+_0x38487b(0x28f)+_0x3f90e0['loserUsername'],_0x25171d[_0x38487b(0x355)]['add']('active');}catch(_0x19c003){console['error']('Error\x20loading\x20match\x20data:',_0x19c003),showNotification(_0x38487b(0x2a3),'error');}}function closeEditMatchModal(){const _0xd251fa=a4_0x15d0de,_0x512795=document[_0xd251fa(0x29f)](_0xd251fa(0x388));_0x512795&&_0x512795[_0xd251fa(0x355)]['remove']('active');}async function saveEditedMatch(){const _0x358859=a4_0x15d0de;try{const _0x5a1f00=document['getElementById'](_0x358859(0x17f))['value'],_0x59fee5=document['getElementById']('edit-match-ladder')['value'];if(!_0x5a1f00||!_0x59fee5){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x251378=_0x59fee5==='D1'?'approvedMatches':_0x59fee5==='D2'?_0x358859(0x37a):_0x358859(0x1f0),_0x199483=document[_0x358859(0x29f)]('edit-match-winner')['value'][_0x358859(0x344)](),_0x2835c3=parseInt(document['getElementById'](_0x358859(0x251))['value']),_0x495baa=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x2cfac4=document['getElementById']('edit-match-winner-comment')[_0x358859(0x345)]['trim'](),_0x2bc23a=document[_0x358859(0x29f)]('edit-match-loser')[_0x358859(0x345)]['trim'](),_0xe2c99a=parseInt(document['getElementById'](_0x358859(0x309))['value']),_0x12d1a5=parseInt(document[_0x358859(0x29f)]('edit-match-loser-suicides')[_0x358859(0x345)]),_0x433a60=document[_0x358859(0x29f)](_0x358859(0x1c3))[_0x358859(0x345)]['trim'](),_0x3917cb=document['getElementById']('edit-match-map')['value']['trim'](),_0x5e6278=document['getElementById']('edit-match-winner-demo')['value'][_0x358859(0x344)](),_0x360571=document['getElementById'](_0x358859(0x35e))['value'][_0x358859(0x344)]();if(!_0x199483||!_0x2bc23a){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x251378,_0x5a1f00),{'winnerUsername':_0x199483,'winnerScore':_0x2835c3,'winnerSuicides':_0x495baa,'winnerComment':_0x2cfac4,'loserUsername':_0x2bc23a,'loserScore':_0xe2c99a,'loserSuicides':_0x12d1a5,'loserComment':_0x433a60,'mapPlayed':_0x3917cb,'winnerDemoLink':_0x5e6278||null,'loserDemoLink':_0x360571||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x358859(0x38e)],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x59fee5['toLowerCase']()]['page']);}catch(_0x2aa2d4){console['error'](_0x358859(0x193),_0x2aa2d4),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x2aa2d4['message'],'error');}}async function openDeleteMatchModal(_0xd9ddb3,_0x4d4ddc){const _0x4aa1c6=a4_0x15d0de;try{const _0x5907c4=_0x4d4ddc==='D1'?'approvedMatches':_0x4d4ddc==='D2'?'approvedMatchesD2':_0x4aa1c6(0x1f0),_0x16df9a=doc(db,_0x5907c4,_0xd9ddb3),_0x2b7a16=await getDoc(_0x16df9a);if(!_0x2b7a16['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x231675=_0x2b7a16['data'](),_0x4e1b3d=document['getElementById'](_0x4aa1c6(0x372));_0x4e1b3d['dataset']['matchId']=_0xd9ddb3,_0x4e1b3d['dataset'][_0x4aa1c6(0x165)]=_0x4d4ddc;const _0x42935e=_0x231675['approvedAt']?new Date(_0x231675['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x4aa1c6(0x14b),_0x281172=document['getElementById']('delete-match-summary');_0x281172['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x42935e+_0x4aa1c6(0x29b)+_0x231675['winnerUsername']+_0x4aa1c6(0x2c6)+_0x231675['loserUsername']+_0x4aa1c6(0x2f1)+(_0x231675['winnerScore']||0x0)+'\x20-\x20'+(_0x231675['loserScore']||0x0)+_0x4aa1c6(0x14f)+(_0x231675['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x4d4ddc+_0x4aa1c6(0x1ae),_0x4e1b3d['classList'][_0x4aa1c6(0x2ff)]('active');}catch(_0x3935ba){console[_0x4aa1c6(0x1a6)]('Error\x20loading\x20match\x20for\x20deletion:',_0x3935ba),showNotification('Failed\x20to\x20load\x20match\x20data',_0x4aa1c6(0x1a6));}}function closeDeleteMatchModal(){const _0x11b767=a4_0x15d0de,_0x2f9295=document['getElementById'](_0x11b767(0x372));_0x2f9295&&(_0x2f9295[_0x11b767(0x355)]['remove']('active'),_0x2f9295[_0x11b767(0x1c9)](_0x11b767(0x30d)),_0x2f9295[_0x11b767(0x1c9)]('data-ladder'));}async function confirmDeleteMatch(){const _0x2dca8f=a4_0x15d0de,_0x675f3f=document['getElementById']('delete-match-confirm-modal'),_0x203bd7=_0x675f3f['dataset'][_0x2dca8f(0x2a9)],_0x2bc3a0=_0x675f3f['dataset'][_0x2dca8f(0x165)];if(!_0x203bd7||!_0x2bc3a0){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x469d4f=_0x2bc3a0==='D1'?_0x2dca8f(0x326):_0x2bc3a0==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x469d4f,_0x203bd7)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x2bc3a0['toLowerCase']()][_0x2dca8f(0x2ae)]);}catch(_0x3db0ad){console['error']('Error\x20deleting\x20match:',_0x3db0ad),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x3db0ad['message'],_0x2dca8f(0x1a6));}}async function saveHighlightChanges(){const _0x1ba862=a4_0x15d0de,_0x1a875c=document['getElementById']('edit-highlight-id')['value'],_0x5a2d9e=document['getElementById'](_0x1ba862(0x1b2))['value'];let _0x40161b={'title':document['getElementById']('edit-highlight-title-input')[_0x1ba862(0x345)][_0x1ba862(0x344)](),'type':_0x5a2d9e,'description':document[_0x1ba862(0x29f)](_0x1ba862(0x24e))['value'][_0x1ba862(0x344)](),'videoId':document[_0x1ba862(0x29f)]('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth['currentUser'][_0x1ba862(0x38e)]};if(_0x5a2d9e===_0x1ba862(0x2aa)){_0x40161b[_0x1ba862(0x359)]=document[_0x1ba862(0x29f)]('edit-highlight-matchInfo-input')['value']['trim'](),_0x40161b['map']=document[_0x1ba862(0x29f)]('edit-highlight-map-input')['value']['trim']();const _0x3f4e3e=document['getElementById'](_0x1ba862(0x1b5))['value'];_0x40161b['matchDate']=_0x3f4e3e?Timestamp['fromDate'](new Date(_0x3f4e3e)):null,_0x40161b[_0x1ba862(0x243)]=document['getElementById']('edit-highlight-winnerName-input')[_0x1ba862(0x345)]['trim'](),_0x40161b['winnerScore']=document[_0x1ba862(0x29f)](_0x1ba862(0x296))[_0x1ba862(0x345)]['trim'](),_0x40161b['loserName']=document['getElementById']('edit-highlight-loserName-input')['value']['trim'](),_0x40161b['loserScore']=document['getElementById']('edit-highlight-loserScore-input')['value'][_0x1ba862(0x344)](),_0x40161b['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x40161b[_0x1ba862(0x263)]=null,_0x40161b['mapVersion']=null,_0x40161b[_0x1ba862(0x311)]=null,_0x40161b['achievementPlayer']=null,_0x40161b[_0x1ba862(0x201)]=null,_0x40161b[_0x1ba862(0x28b)]=null,_0x40161b[_0x1ba862(0x2b2)]=null;}else{if(_0x5a2d9e==='creator')_0x40161b[_0x1ba862(0x1db)]=document['getElementById'](_0x1ba862(0x1c2))['value']['trim'](),_0x40161b['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value'][_0x1ba862(0x344)](),_0x40161b['mapVersion']=document[_0x1ba862(0x29f)]('edit-highlight-mapVersion-input')[_0x1ba862(0x345)]['trim'](),_0x40161b['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')['value']['trim'](),_0x40161b['matchInfo']=null,_0x40161b['matchDate']=null,_0x40161b[_0x1ba862(0x243)]=null,_0x40161b['winnerScore']=null,_0x40161b[_0x1ba862(0x226)]=null,_0x40161b[_0x1ba862(0x32a)]=null,_0x40161b['matchLink']=null,_0x40161b[_0x1ba862(0x1e3)]=null,_0x40161b['achievementType']=null,_0x40161b['achievementDetails']=null,_0x40161b['playerProfileUrl']=null;else _0x5a2d9e==='achievement'&&(_0x40161b['achievementPlayer']=document[_0x1ba862(0x29f)]('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x40161b['achievementType']=document[_0x1ba862(0x29f)]('edit-highlight-achievementType-input')[_0x1ba862(0x345)][_0x1ba862(0x344)](),_0x40161b['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')['value'][_0x1ba862(0x344)](),_0x40161b['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x40161b['matchInfo']=null,_0x40161b['map']=null,_0x40161b['matchDate']=null,_0x40161b['winnerName']=null,_0x40161b['winnerScore']=null,_0x40161b[_0x1ba862(0x226)]=null,_0x40161b['loserScore']=null,_0x40161b['matchLink']=null,_0x40161b['mapCreator']=null,_0x40161b[_0x1ba862(0x299)]=null,_0x40161b[_0x1ba862(0x311)]=null);}try{if(_0x1a875c){_0x40161b['updatedAt']=serverTimestamp();const _0x5ef4b8=doc(db,'highlights',_0x1a875c);await updateDoc(_0x5ef4b8,_0x40161b),showNotification(_0x1ba862(0x22c),'success');}else _0x40161b[_0x1ba862(0x260)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x40161b),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0xf0d26){console[_0x1ba862(0x1a6)]('Error\x20saving\x20highlight:',_0xf0d26),showNotification('Error\x20saving\x20highlight:\x20'+_0xf0d26['message'],'error');}}async function resimulateMatch(){const _0x4a10df=a4_0x15d0de;try{const _0x2dac43=document['getElementById']('resimulate-match-id')['value'];if(!_0x2dac43){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x463a20=auth['currentUser'];if(!_0x463a20){showNotification(_0x4a10df(0x1e6),'error');return;}const _0x2cd914=currentLadder==='D1'?_0x4a10df(0x326):currentLadder==='D2'?_0x4a10df(0x37a):'approvedMatchesD3',_0x330066=doc(db,_0x2cd914,_0x2dac43),_0x58c236=await getDoc(_0x330066);if(!_0x58c236['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x4a10df(0x1a6));return;}const _0x270aa8=_0x58c236['data'](),_0x40082a=_0x270aa8['approvedAt']?_0x270aa8['approvedAt']['toDate']()[_0x4a10df(0x29e)]():_0x270aa8['matchDate']?_0x270aa8['matchDate']['toDate']?_0x270aa8[_0x4a10df(0x24a)]['toDate']()['toLocaleString']():new Date(_0x270aa8[_0x4a10df(0x24a)])[_0x4a10df(0x29e)]():'Unknown',_0x402b2d='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x270aa8['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x270aa8['loserUsername']+_0x4a10df(0x272)+_0x270aa8['winnerScore']+'-'+_0x270aa8['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x270aa8['mapPlayed']||_0x270aa8['mapName']||_0x4a10df(0x237))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x40082a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x2dac43+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+_0x4a10df(0x289);document['getElementById']('match-details-container')['innerHTML']=_0x402b2d,document['getElementById'](_0x4a10df(0x207))['style']['display']='block',document['getElementById'](_0x4a10df(0x143))[_0x4a10df(0x31e)]['display']=_0x4a10df(0x249),window[_0x4a10df(0x393)]={'matchId':_0x2dac43,'matchData':_0x270aa8,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation',_0x4a10df(0x1fc));}catch(_0x454fb8){console[_0x4a10df(0x1a6)](_0x4a10df(0x371),_0x454fb8),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x454fb8[_0x4a10df(0x34f)],'error');}}async function confirmResimulateMatch(){const _0x3f58b0=a4_0x15d0de;try{const {matchId:_0x750f7f,matchData:_0xc9987f,ladder:_0x5ad00e}=window['pendingResimulateData'];if(!_0x750f7f||!_0xc9987f){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x504fbf=_0x5ad00e==='D1'?'players':_0x5ad00e==='D2'?_0x3f58b0(0x1df):'playersD3',_0x56509a=_0x5ad00e==='D1'?'eloHistory':_0x5ad00e==='D2'?_0x3f58b0(0x1fa):'eloHistoryD3',[_0x1f8a8d,_0x19b509]=await Promise['all']([getDocs(query(collection(db,_0x504fbf),where(_0x3f58b0(0x35d),'==',_0xc9987f[_0x3f58b0(0x2c1)]))),getDocs(query(collection(db,_0x504fbf),where('username','==',_0xc9987f['loserUsername'])))]);if(_0x1f8a8d['empty']||_0x19b509['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x3c0e06=_0x1f8a8d['docs'][0x0]['id'],_0x5e6475=_0x19b509[_0x3f58b0(0x144)][0x0]['id'],_0x4a6e1c=_0x1f8a8d['docs'][0x0][_0x3f58b0(0x1c8)](),_0x53a00e=_0x19b509['docs'][0x0]['data'](),[_0x56736c,_0x4746b6]=await Promise['all']([getDocs(query(collection(db,_0x56509a),where('playerId','==',_0x3c0e06),where('matchId','==',_0x750f7f))),getDocs(query(collection(db,_0x56509a),where('playerId','==',_0x5e6475),where('matchId','==',_0x750f7f)))]),_0x408240=!_0x56736c[_0x3f58b0(0x267)],_0x5e6f04=!_0x4746b6['empty'],_0x1f523c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x408240?'✅\x20Exists':'❌\x20Missing')+_0x3f58b0(0x327)+(_0x5e6f04?'✅\x20Exists':'❌\x20Missing')+_0x3f58b0(0x1a9)+(_0x4a6e1c['eloRating']||_0x3f58b0(0x237))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x53a00e['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x4a6e1c['position']||'Unknown')+_0x3f58b0(0x156)+(_0x53a00e['position']||_0x3f58b0(0x237))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x1f523c,document['getElementById'](_0x3f58b0(0x33d))[_0x3f58b0(0x31e)]['display']=_0x3f58b0(0x249);if(_0x408240&&_0x5e6f04){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x50c40b=_0xc9987f[_0x3f58b0(0x1b8)]||_0xc9987f['matchDate']||serverTimestamp(),[_0x342849,_0x4a8cd6]=await Promise['all']([getPlayerEloAtTime(_0x3c0e06,_0x50c40b,_0x56509a),getPlayerEloAtTime(_0x5e6475,_0x50c40b,_0x56509a)]),{calculateElo:_0x5cb75f}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x3008ad,newLoserRating:_0x2816a6}=_0x5cb75f(_0x342849,_0x4a8cd6),_0x480faf=_0x4a6e1c['position']||Number['MAX_SAFE_INTEGER'],_0x1e00d8=_0x53a00e['position']||Number[_0x3f58b0(0x2bf)];let _0x48cee8=_0x480faf,_0x4695fc=_0x1e00d8;_0x480faf>_0x1e00d8&&(_0x48cee8=_0x1e00d8,_0x4695fc=_0x1e00d8+0x1);const _0x2e7250=writeBatch(db),_0x37b956=doc(db,_0x504fbf,_0x3c0e06);_0x2e7250[_0x3f58b0(0x2e1)](_0x37b956,{'eloRating':_0x3008ad,'position':_0x48cee8,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x67bd6c=doc(db,_0x504fbf,_0x5e6475);_0x2e7250[_0x3f58b0(0x2e1)](_0x67bd6c,{'eloRating':_0x2816a6,'position':_0x4695fc,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x3f58b0(0x1e5)]['uid']});if(_0x480faf>_0x1e00d8){const _0x47f45c=await getDocs(query(collection(db,_0x504fbf),where(_0x3f58b0(0x2a2),'>',_0x1e00d8),where('position','<',_0x480faf)));_0x47f45c['forEach'](_0xa61db8=>{const _0x9d4782=doc(db,_0x504fbf,_0xa61db8['id']),_0x50c8d4=_0xa61db8['data']()['position'];_0x2e7250['update'](_0x9d4782,{'position':_0x50c8d4+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x408240){const _0x2eabde=doc(collection(db,_0x56509a));_0x2e7250['set'](_0x2eabde,{'playerId':_0x3c0e06,'player':_0xc9987f['winnerUsername'],'previousElo':_0x342849,'newElo':_0x3008ad,'eloChange':_0x3008ad-_0x342849,'opponentId':_0x5e6475,'opponent':_0xc9987f[_0x3f58b0(0x2ca)],'matchResult':'win','previousPosition':_0x480faf,'newPosition':_0x48cee8,'positionChange':_0x48cee8-_0x480faf,'matchId':_0x750f7f,'timestamp':_0x50c40b,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x5ad00e,'matchScore':_0xc9987f['winnerScore']+'-'+_0xc9987f['loserScore'],'mapPlayed':_0xc9987f[_0x3f58b0(0x171)]||_0xc9987f[_0x3f58b0(0x288)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x5e6f04){const _0x280b45=doc(collection(db,_0x56509a));_0x2e7250['set'](_0x280b45,{'playerId':_0x5e6475,'player':_0xc9987f[_0x3f58b0(0x2ca)],'previousElo':_0x4a8cd6,'newElo':_0x2816a6,'eloChange':_0x2816a6-_0x4a8cd6,'opponentId':_0x3c0e06,'opponent':_0xc9987f['winnerUsername'],'matchResult':'loss','previousPosition':_0x1e00d8,'newPosition':_0x4695fc,'positionChange':_0x4695fc-_0x1e00d8,'matchId':_0x750f7f,'timestamp':_0x50c40b,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x3f58b0(0x346)],'gameMode':_0x5ad00e,'matchScore':_0xc9987f['winnerScore']+'-'+_0xc9987f['loserScore'],'mapPlayed':_0xc9987f['mapPlayed']||_0xc9987f[_0x3f58b0(0x288)]||_0x3f58b0(0x237),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x1b920f=_0x5ad00e==='D1'?_0x3f58b0(0x326):_0x5ad00e==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x10ca6f=doc(db,_0x1b920f,_0x750f7f);_0x2e7250['update'](_0x10ca6f,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x3f58b0(0x346)],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x4a6e1c['eloRating'],'originalLoserElo':_0x53a00e['eloRating'],'originalWinnerPosition':_0x480faf,'originalLoserPosition':_0x1e00d8,'resimulatedWinnerElo':_0x3008ad,'resimulatedLoserElo':_0x2816a6,'resimulatedWinnerPosition':_0x48cee8,'resimulatedLoserPosition':_0x4695fc}),await _0x2e7250['commit']();const _0x7d47ac=(!_0x408240?0x1:0x0)+(!_0x5e6f04?0x1:0x0),_0x3887dc=_0x480faf!==_0x48cee8||_0x1e00d8!==_0x4695fc;showNotification('Match\x20resimulated\x20successfully!\x20'+(_0x3f58b0(0x375)+_0x7d47ac+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x342849+'→'+_0x3008ad+'\x20(+'+(_0x3008ad-_0x342849)+'),\x20')+('Loser\x20'+_0x4a8cd6+'→'+_0x2816a6+'\x20('+(_0x2816a6-_0x4a8cd6)+').\x20')+(''+(_0x3887dc?_0x3f58b0(0x2b1)+_0x480faf+'→'+_0x48cee8+',\x20Loser\x20'+_0x1e00d8+'→'+_0x4695fc:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document[_0x3f58b0(0x32c)]('#players.content-section.active')&&loadPlayersData();}catch(_0x158804){console['error']('Error\x20resimulating\x20match:',_0x158804),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x158804[_0x3f58b0(0x34f)],_0x3f58b0(0x1a6));}}async function getPlayerEloAtTime(_0x21aea4,_0x51abce,_0x546b7d){const _0x3fe22a=a4_0x15d0de;try{const _0x40a783=_0x51abce['toDate']?_0x51abce['toDate']():new Date(_0x51abce),_0x4b5ee4=query(collection(db,_0x546b7d),where(_0x3fe22a(0x185),'==',_0x21aea4),where('timestamp','<',_0x51abce),orderBy('timestamp','desc'),limit(0x1)),_0x2124ff=await getDocs(_0x4b5ee4);if(!_0x2124ff['empty']){const _0x14c544=_0x2124ff[_0x3fe22a(0x144)][0x0]['data']();return console['log'](_0x3fe22a(0x314)+_0x21aea4+_0x3fe22a(0x374)+_0x14c544[_0x3fe22a(0x392)]),_0x14c544['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x21aea4+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x1c5cea){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x21aea4+':',_0x1c5cea),0x4b0;}}function openResimulateModal(){const _0x257584=a4_0x15d0de;console['log'](_0x257584(0x338));const _0xc01834=document[_0x257584(0x29f)]('resimulate-modal');console[_0x257584(0x197)]('Modal\x20element\x20found:',_0xc01834);if(!_0xc01834){console[_0x257584(0x1a6)]('Modal\x20element\x20not\x20found!');return;}_0xc01834['style']['display']=_0x257584(0x249),_0xc01834['style']['visibility']='visible',_0xc01834['style']['opacity']='1',_0xc01834['classList'][_0x257584(0x2ff)]('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console[_0x257584(0x197)]('Modal\x20computed\x20styles:',window['getComputedStyle'](_0xc01834)['display']);const _0x1e8b80=document['getElementById']('match-details-container'),_0xe6d106=document['getElementById']('validation-results-container'),_0x46a321=document['getElementById']('confirm-resimulate-btn'),_0x5362bb=document['getElementById']('resimulate-match-id');if(_0x1e8b80)_0x1e8b80['innerHTML']='';if(_0xe6d106)_0xe6d106['innerHTML']='';if(_0x46a321)_0x46a321[_0x257584(0x31e)]['display']=_0x257584(0x1c6);if(_0x5362bb)_0x5362bb['value']='';console['log'](_0x257584(0x33e));}function closeResimulateModal(){const _0x5722ab=a4_0x15d0de;document['getElementById'](_0x5722ab(0x256))['style']['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window[a4_0x15d0de(0x20c)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a4_0x15d0de(0x353)]=closeResimulateModal;async function loadPointsData(){const _0x4e624a=a4_0x15d0de;console['log'](_0x4e624a(0x139));try{await Promise[_0x4e624a(0x23c)]([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x55a876){console[_0x4e624a(0x1a6)]('Error\x20loading\x20points\x20data:',_0x55a876),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x55a876['message'],_0x4e624a(0x1a6));}}function renderPointsOverview(_0x173b6b){const _0x3716ee=a4_0x15d0de,_0x51b776=document['getElementById']('points-overview-table-body');if(!_0x51b776)return;if(_0x173b6b['length']===0x0){_0x51b776[_0x3716ee(0x149)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x51b776['innerHTML']='',_0x173b6b['forEach'](_0x28484f=>{const _0x1c2647=_0x3716ee,_0x553a9f=document['createElement']('tr'),_0xcbd386=_0x28484f['displayName']||_0x28484f[_0x1c2647(0x35d)]||'Unknown\x20User',_0x4a462f=_0x28484f[_0x1c2647(0x38e)]||_0x1c2647(0x367),_0x4fe836=_0x28484f['points']||0x0,_0xb13ec2=_0x28484f['lastPointsModified']?new Date(_0x28484f['lastPointsModified'][_0x1c2647(0x2a6)]*0x3e8)['toLocaleDateString']():_0x1c2647(0x382);_0x553a9f[_0x1c2647(0x149)]=_0x1c2647(0x32b)+_0xcbd386+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4a462f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x4fe836>0x3e8?'high-points':_0x4fe836>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x4fe836['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xb13ec2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x28484f['id']+_0x1c2647(0x142)+_0x28484f['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x51b776[_0x1c2647(0x370)](_0x553a9f);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x59f69e=a4_0x15d0de;console['log'](_0x59f69e(0x14d));const _0x158a54=document['querySelectorAll'](_0x59f69e(0x190));console['log'](_0x59f69e(0x18e)+_0x158a54['length']+_0x59f69e(0x1c0)),_0x158a54['forEach'](_0xf9b629=>{const _0x10b5b6=_0x59f69e,_0x27ce31=_0xf9b629['cloneNode'](!![]);_0xf9b629[_0x10b5b6(0x2a4)]['replaceChild'](_0x27ce31,_0xf9b629);});const _0x413798=document[_0x59f69e(0x187)]('.view-history-btn');console[_0x59f69e(0x197)]('Found\x20'+_0x413798['length']+_0x59f69e(0x2be)),_0x413798['forEach'](_0x139238=>{const _0x5b124f=_0x59f69e,_0x4a1f5d=_0x139238['cloneNode'](!![]);_0x139238[_0x5b124f(0x2a4)][_0x5b124f(0x17d)](_0x4a1f5d,_0x139238);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x20406b=>{_0x20406b['addEventListener']('click',function(_0x15bb9f){const _0x2d93bd=a4_0x4fbe;_0x15bb9f['preventDefault'](),_0x15bb9f['stopPropagation']();const _0x56bf77=this['dataset'][_0x2d93bd(0x135)];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x56bf77);if(!_0x56bf77){console[_0x2d93bd(0x1a6)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']=_0x2d93bd(0x16d),setTimeout(()=>{const _0x5bb07a=_0x2d93bd;this['style'][_0x5bb07a(0x1ff)]='1';},0xc8),openQuickEditModal(_0x56bf77);});}),document['querySelectorAll'](_0x59f69e(0x166))[_0x59f69e(0x170)](_0x4e6d5a=>{const _0x58c9f1=_0x59f69e;_0x4e6d5a[_0x58c9f1(0x301)]('click',function(_0x4abae5){const _0x17d527=_0x58c9f1;_0x4abae5[_0x17d527(0x264)](),_0x4abae5['stopPropagation']();const _0xc577ea=this['dataset']['userId'];console['log'](_0x17d527(0x308),_0xc577ea);if(!_0xc577ea){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0xc577ea);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x20349f){const _0x450cb1=a4_0x15d0de;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x20349f);const _0x1202aa=document['getElementById'](_0x450cb1(0x2e7));if(!_0x1202aa){console['error'](_0x450cb1(0x34a)),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page',_0x450cb1(0x1a6));return;}try{showNotification('Loading\x20user\x20data...','info');const _0x44d3b5=doc(db,_0x450cb1(0x340),_0x20349f),_0x2d6767=await getDoc(_0x44d3b5);if(!_0x2d6767['exists']()){showNotification(_0x450cb1(0x198),_0x450cb1(0x1a6));return;}const _0x563bd8=_0x2d6767['data']();console['log']('User\x20data\x20loaded:',_0x563bd8);const _0x559c71=document['getElementById']('quick-edit-user-id'),_0x2d1fa9=document['getElementById']('quick-edit-display-name'),_0x10977a=document[_0x450cb1(0x29f)]('quick-edit-email'),_0x5fe30f=document['getElementById'](_0x450cb1(0x1e7)),_0x24ce4d=document['getElementById']('quick-edit-points-form');if(!_0x559c71||!_0x2d1fa9||!_0x10977a||!_0x5fe30f||!_0x24ce4d){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x450cb1(0x17c),'error');return;}_0x559c71['value']=_0x20349f,_0x2d1fa9['textContent']=_0x563bd8[_0x450cb1(0x304)]||_0x563bd8['username']||'Unknown\x20User',_0x10977a['textContent']=_0x563bd8[_0x450cb1(0x38e)]||'No\x20email',_0x5fe30f['textContent']=(_0x563bd8[_0x450cb1(0x2f5)]||0x0)['toLocaleString'](),_0x24ce4d[_0x450cb1(0x13b)]();const _0x2b36fb=document[_0x450cb1(0x29f)]('quick-add');_0x2b36fb&&(_0x2b36fb['checked']=!![]);_0x1202aa['classList'][_0x450cb1(0x2ff)]('active'),console['log']('Modal\x20opened\x20successfully');const _0x42996e=document['getElementById']('quick-points-amount');_0x42996e&&setTimeout(()=>_0x42996e['focus'](),0x64);}catch(_0x22e9e0){console[_0x450cb1(0x1a6)]('Error\x20opening\x20quick\x20edit\x20modal:',_0x22e9e0),showNotification(_0x450cb1(0x181)+_0x22e9e0[_0x450cb1(0x34f)],'error');}}function closeQuickEditModal(){const _0x54d5ab=document['getElementById']('quick-edit-points-modal');_0x54d5ab&&_0x54d5ab['classList']['remove']('active');}async function handleQuickEditPoints(_0x4255bd){const _0x409f70=a4_0x15d0de;_0x4255bd[_0x409f70(0x264)]();const _0x43fe14=document['getElementById']('quick-edit-user-id')['value'],_0x2c6345=document['querySelector']('input[name=\x22quick-action\x22]:checked')[_0x409f70(0x345)],_0x3ac7c0=parseInt(document['getElementById'](_0x409f70(0x26c))['value']),_0x31a3db=document['getElementById']('quick-points-reason')[_0x409f70(0x345)][_0x409f70(0x344)]();console[_0x409f70(0x197)]('Processing\x20points\x20edit:',{'userId':_0x43fe14,'action':_0x2c6345,'amount':_0x3ac7c0,'reason':_0x31a3db});if(!_0x43fe14||!_0x3ac7c0||_0x3ac7c0<0x0){showNotification(_0x409f70(0x1ea),'error');return;}try{await modifyUserPoints(_0x43fe14,_0x2c6345,_0x3ac7c0,_0x31a3db),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x409f70(0x306),'success'),console['log'](_0x409f70(0x32d),_0x43fe14);}catch(_0x3619a9){console[_0x409f70(0x1a6)]('Error\x20updating\x20points:',_0x3619a9),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x3619a9[_0x409f70(0x34f)],_0x409f70(0x1a6));}}async function searchUsersForPoints(){const _0x57b77d=a4_0x15d0de,_0x133291=document['getElementById']('points-user-search')['value']['trim']()['toLowerCase'](),_0x3d8687=document[_0x57b77d(0x29f)]('user-search-results');if(!_0x133291||_0x133291[_0x57b77d(0x1b0)]<0x2){_0x3d8687[_0x57b77d(0x149)]='';return;}_0x3d8687['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x38f680=collection(db,'userProfiles'),_0x6854c1=await getDocs(_0x38f680),_0x49f5a9=[];_0x6854c1[_0x57b77d(0x170)](_0x36643c=>{const _0x1d57c1=_0x57b77d,_0x5cc380=_0x36643c['data'](),_0x508683=(_0x5cc380['displayName']||_0x5cc380[_0x1d57c1(0x35d)]||'')[_0x1d57c1(0x1d7)](),_0x11cfa1=(_0x5cc380['email']||'')['toLowerCase']();(_0x508683['includes'](_0x133291)||_0x11cfa1[_0x1d57c1(0x1f3)](_0x133291))&&_0x49f5a9['push']({'id':_0x36643c['id'],..._0x5cc380});});if(_0x49f5a9[_0x57b77d(0x1b0)]===0x0){_0x3d8687['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x3d8687['innerHTML']='',_0x49f5a9['forEach'](_0x5d8007=>{const _0x368d62=_0x57b77d,_0x4271b9=document['createElement']('div');_0x4271b9[_0x368d62(0x2b7)]='search-result-item',_0x4271b9[_0x368d62(0x149)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x5d8007['displayName']||_0x5d8007[_0x368d62(0x35d)]||_0x368d62(0x237))+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x5d8007['email']||'No\x20email')+_0x368d62(0x365)+(_0x5d8007['points']||0x0)['toLocaleString']()+_0x368d62(0x2f0),_0x4271b9['addEventListener']('click',()=>selectUserForPoints(_0x5d8007)),_0x3d8687['appendChild'](_0x4271b9);});}catch(_0xc563bf){console['error']('Error\x20searching\x20users:',_0xc563bf),_0x3d8687[_0x57b77d(0x149)]=_0x57b77d(0x2ac);}}function selectUserForPoints(_0x45f5f4){const _0x29847b=a4_0x15d0de;document['getElementById']('selected-user-name')['textContent']=_0x45f5f4[_0x29847b(0x304)]||_0x45f5f4['username']||'Unknown\x20User',document['getElementById']('selected-user-points')['textContent']=(_0x45f5f4[_0x29847b(0x2f5)]||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x45f5f4['id'],document[_0x29847b(0x29f)](_0x29847b(0x383))[_0x29847b(0x31e)]['display']=_0x29847b(0x249),document['getElementById']('points-management-forms')['style'][_0x29847b(0x2d9)]='block',document[_0x29847b(0x29f)]('user-search-results')['innerHTML']='',document[_0x29847b(0x29f)]('points-user-search')[_0x29847b(0x345)]='';}async function handleModifyPoints(_0x129b2a){const _0xf76db6=a4_0x15d0de;_0x129b2a[_0xf76db6(0x264)]();const _0x4424f4=document['getElementById']('selected-user-id')['value'],_0x44fcd6=document['getElementById']('points-action')['value'],_0x5df90f=parseInt(document['getElementById']('points-amount')[_0xf76db6(0x345)]),_0x42d336=document[_0xf76db6(0x29f)]('points-reason')['value'][_0xf76db6(0x344)]();if(!_0x4424f4||!_0x5df90f||_0x5df90f<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0xf76db6(0x1a6));return;}try{await modifyUserPoints(_0x4424f4,_0x44fcd6,_0x5df90f,_0x42d336),document[_0xf76db6(0x29f)]('modify-points-form')['reset']();const _0x195269=doc(db,'userProfiles',_0x4424f4),_0x4f7dcc=await getDoc(_0x195269);if(_0x4f7dcc[_0xf76db6(0x33b)]()){const _0xa2bd07=_0x4f7dcc[_0xf76db6(0x1c8)]();document['getElementById']('selected-user-points')['textContent']=(_0xa2bd07['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x313d4a){console['error'](_0xf76db6(0x13d),_0x313d4a),showNotification(_0xf76db6(0x14a)+_0x313d4a['message'],'error');}}async function loadPointsHistory(){const _0x41d62e=a4_0x15d0de,_0x1db043=document['getElementById']('points-history-table-body');if(!_0x1db043)return;_0x1db043['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0xcc5216=collection(db,_0x41d62e(0x295)),_0x272911=query(_0xcc5216,orderBy('timestamp','desc'),limit(0x32)),_0xbe8760=await getDocs(_0x272911);if(_0xbe8760['empty']){_0x1db043[_0x41d62e(0x149)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x1db043['innerHTML']='',_0xbe8760[_0x41d62e(0x170)](_0x2566a9=>{const _0xed3ff5=_0x41d62e,_0x150415=_0x2566a9[_0xed3ff5(0x1c8)](),_0x5b44c9=document[_0xed3ff5(0x1ee)]('tr'),_0xcb7a16=_0x150415['timestamp']?new Date(_0x150415[_0xed3ff5(0x147)]['seconds']*0x3e8)[_0xed3ff5(0x29e)]():'Unknown';let _0x104685='';switch(_0x150415['action']){case'add':_0x104685='Added\x20'+_0x150415['amount']+'\x20points';break;case'subtract':_0x104685=_0xed3ff5(0x15a)+_0x150415[_0xed3ff5(0x1f4)]+'\x20points';break;case _0xed3ff5(0x2ea):_0x104685='Set\x20to\x20'+_0x150415[_0xed3ff5(0x1f4)]+'\x20points';break;default:_0x104685=_0x150415['action']+'\x20'+_0x150415['amount']+_0xed3ff5(0x354);}_0x5b44c9['innerHTML']=_0xed3ff5(0x210)+_0xcb7a16+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x150415['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x104685+_0xed3ff5(0x1a2)+_0x150415['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x150415[_0xed3ff5(0x21f)]||0x0)+_0xed3ff5(0x2fe)+(_0x150415['newPoints']||0x0)+_0xed3ff5(0x257)+(_0x150415[_0xed3ff5(0x2c8)]||_0xed3ff5(0x141))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x150415['adminEmail']||_0xed3ff5(0x1b4))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1db043['appendChild'](_0x5b44c9);});}catch(_0x516404){console[_0x41d62e(0x1a6)]('Error\x20loading\x20points\x20history:',_0x516404),_0x1db043[_0x41d62e(0x149)]=_0x41d62e(0x2a7)+_0x516404['message']+'</td></tr>';}}function filterPointsOverview(){const _0x15f090=a4_0x15d0de,_0x138675=document[_0x15f090(0x29f)]('points-overview-search')[_0x15f090(0x345)][_0x15f090(0x1d7)]();if(!window['allUsersPoints'])return;const _0x581644=window['allUsersPoints']['filter'](_0x398a97=>{const _0x1f977d=_0x15f090,_0x176e3e=(_0x398a97['displayName']||_0x398a97['username']||'')['toLowerCase'](),_0x4db2df=(_0x398a97['email']||'')[_0x1f977d(0x1d7)]();return _0x176e3e[_0x1f977d(0x1f3)](_0x138675)||_0x4db2df['includes'](_0x138675);});renderPointsOverview(_0x581644);}function sortPointsOverview(){const _0x1abe82=a4_0x15d0de,_0x156b2a=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x260a71=[...window[_0x1abe82(0x2c2)]];switch(_0x156b2a){case'points-desc':_0x260a71['sort']((_0x507fb3,_0x19fc17)=>(_0x19fc17['points']||0x0)-(_0x507fb3[_0x1abe82(0x2f5)]||0x0));break;case _0x1abe82(0x27a):_0x260a71['sort']((_0x29f273,_0x2ebdf2)=>(_0x29f273['points']||0x0)-(_0x2ebdf2['points']||0x0));break;case'name-asc':_0x260a71[_0x1abe82(0x286)]((_0x594839,_0x2b30de)=>{const _0x2d41ac=_0x1abe82,_0x49d963=(_0x594839['displayName']||_0x594839[_0x2d41ac(0x35d)]||'')['toLowerCase'](),_0x1cd4f6=(_0x2b30de['displayName']||_0x2b30de['username']||'')[_0x2d41ac(0x1d7)]();return _0x49d963['localeCompare'](_0x1cd4f6);});break;case'name-desc':_0x260a71['sort']((_0x493156,_0x52cc83)=>{const _0x16cf54=_0x1abe82,_0xee32a4=(_0x493156['displayName']||_0x493156['username']||'')['toLowerCase'](),_0x49c9ec=(_0x52cc83['displayName']||_0x52cc83[_0x16cf54(0x35d)]||'')['toLowerCase']();return _0x49c9ec['localeCompare'](_0xee32a4);});break;}renderPointsOverview(_0x260a71);}async function handleAwardItem(_0x14e0d5){const _0x1bcb19=a4_0x15d0de;_0x14e0d5[_0x1bcb19(0x264)]();const _0x48da78=document['getElementById']('selected-user-id')['value'],_0x19b05d=document[_0x1bcb19(0x29f)](_0x1bcb19(0x1c4))['value'],_0x1975fa=document['getElementById']('award-reason')[_0x1bcb19(0x345)][_0x1bcb19(0x344)]();if(!_0x48da78||!_0x19b05d){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully',_0x1bcb19(0x1cf)),document[_0x1bcb19(0x29f)](_0x1bcb19(0x1f9))['reset']();}catch(_0x347714){console['error']('Error\x20awarding\x20item:',_0x347714),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x347714[_0x1bcb19(0x34f)],_0x1bcb19(0x1a6));}}async function loadUserPointsHistory(_0x228ea1){const _0x3cdfb4=a4_0x15d0de;try{const _0x5e56aa=collection(db,_0x3cdfb4(0x295)),_0x4f37ac=query(_0x5e56aa,where('userId','==',_0x228ea1),orderBy(_0x3cdfb4(0x147),_0x3cdfb4(0x27f))),_0x514e21=await getDocs(_0x4f37ac);console['log']('Found\x20'+_0x514e21['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x228ea1),showNotification('User\x20has\x20'+_0x514e21['size']+_0x3cdfb4(0x1f1),_0x3cdfb4(0x1fc));}catch(_0x4433b5){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x4433b5),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x2fd052=a4_0x15d0de;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x58f346=collection(db,_0x2fd052(0x340)),_0x317c41=await getDocs(_0x58f346);if(_0x317c41['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0xdb803d=0x0,_0x91a3b=0x0;const _0x1f5623=writeBatch(db);let _0x438f55=0x0;return console[_0x2fd052(0x197)]('Found\x20'+_0x317c41[_0x2fd052(0x2a0)]+'\x20users\x20to\x20check...'),_0x317c41[_0x2fd052(0x170)](_0x240ac7=>{const _0x3cd750=_0x2fd052,_0x400950=_0x240ac7[_0x3cd750(0x1c8)]();_0x400950[_0x3cd750(0x2f5)]===undefined||_0x400950['points']===null?(_0x1f5623['update'](_0x240ac7['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0xdb803d++,_0x438f55++,console['log']('Queued\x20'+(_0x400950['displayName']||_0x400950[_0x3cd750(0x35d)]||_0x400950['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x91a3b++,console['log']((_0x400950[_0x3cd750(0x304)]||_0x400950['username']||_0x400950['email']||_0x3cd750(0x237))+'\x20already\x20has\x20points:\x20'+_0x400950[_0x3cd750(0x2f5)])),_0x438f55>=0x1f4&&console[_0x3cd750(0x293)](_0x3cd750(0x2d0));}),_0xdb803d>0x0?(console[_0x2fd052(0x197)]('Committing\x20batch\x20update\x20for\x20'+_0xdb803d+'\x20users...'),await _0x1f5623['commit'](),console['log']('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0xdb803d+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x317c41['size']+_0x2fd052(0x27e)+_0xdb803d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x91a3b),showNotification('Points\x20field\x20initialized\x20for\x20'+_0xdb803d+'\x20users.\x20'+_0x91a3b+'\x20users\x20already\x20had\x20points.','success'),window[_0x2fd052(0x2c2)]&&loadPointsOverview(),{'totalUsers':_0x317c41['size'],'usersUpdated':_0xdb803d,'usersAlreadyHadPoints':_0x91a3b};}catch(_0x9d7d83){console['error'](_0x2fd052(0x18f),_0x9d7d83),showNotification('Error\x20initializing\x20points:\x20'+_0x9d7d83[_0x2fd052(0x34f)],_0x2fd052(0x1a6));throw _0x9d7d83;}}function addPointsMigrationButton(){const _0x1f627b=a4_0x15d0de,_0x41ce39=document['getElementById']('manage-points');if(!_0x41ce39)return;if(document['getElementById']('migrate-points-btn'))return;const _0x55f11c=document[_0x1f627b(0x1ee)]('div');_0x55f11c['className']='migration-section',_0x55f11c[_0x1f627b(0x31e)]['marginBottom']='20px',_0x55f11c[_0x1f627b(0x31e)]['padding']='15px',_0x55f11c[_0x1f627b(0x31e)][_0x1f627b(0x31a)]='rgba(255,\x20193,\x207,\x200.1)',_0x55f11c['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x55f11c['style'][_0x1f627b(0x351)]='5px',_0x55f11c[_0x1f627b(0x149)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x221da9=_0x41ce39['querySelector']('.section-header');_0x221da9&&_0x221da9['insertAdjacentElement'](_0x1f627b(0x324),_0x55f11c),document[_0x1f627b(0x29f)]('migrate-points-btn')[_0x1f627b(0x301)]('click',async function(){const _0x5df8a5=_0x1f627b;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']=_0x5df8a5(0x330),this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x5ddda2=_0x5df8a5;_0x55f11c[_0x5ddda2(0x31e)][_0x5ddda2(0x2d9)]=_0x5ddda2(0x1c6);},0xbb8);}catch(_0x2df958){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x5df8a5(0x1cc)]=![];}}});}function setupManagePointsSection(){const _0x16d1f5=a4_0x15d0de;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x5075c6=document['getElementById']('points-user-search');_0x5075c6&&_0x5075c6[_0x16d1f5(0x301)]('input',debounce(searchUsersForPoints,0x12c));const _0x4cad45=document['getElementById']('modify-points-form');_0x4cad45&&_0x4cad45[_0x16d1f5(0x301)]('submit',handleModifyPoints);const _0x5b7024=document['getElementById']('award-item-form');_0x5b7024&&_0x5b7024['addEventListener']('submit',handleAwardItem);const _0x4d3c47=document['getElementById']('points-overview-search');_0x4d3c47&&_0x4d3c47['addEventListener'](_0x16d1f5(0x1a3),debounce(filterPointsOverview,0x12c));const _0x362914=document['getElementById'](_0x16d1f5(0x30b));_0x362914&&_0x362914['addEventListener'](_0x16d1f5(0x21a),sortPointsOverview);const _0x45c48f=document[_0x16d1f5(0x29f)](_0x16d1f5(0x1f2));_0x45c48f&&_0x45c48f['addEventListener']('click',loadPointsOverview);const _0x16ee33=document['getElementById']('quick-edit-points-modal');if(_0x16ee33){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x17f929=_0x16ee33['querySelector']('.close-btn');_0x17f929?_0x17f929[_0x16d1f5(0x301)]('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x1feac3=document['getElementById']('cancel-quick-edit');_0x1feac3?_0x1feac3['addEventListener']('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console[_0x16d1f5(0x293)]('Cancel\x20button\x20not\x20found');const _0xa7d807=document[_0x16d1f5(0x29f)]('quick-edit-points-form');_0xa7d807?_0xa7d807['addEventListener']('submit',function(_0x23d649){const _0x3b2a60=_0x16d1f5;console[_0x3b2a60(0x197)](_0x3b2a60(0x266)),handleQuickEditPoints(_0x23d649);}):console[_0x16d1f5(0x1a6)]('Quick\x20edit\x20form\x20not\x20found!'),_0x16ee33[_0x16d1f5(0x301)](_0x16d1f5(0x1f5),function(_0x18bf6e){const _0x38c504=_0x16d1f5;_0x18bf6e[_0x38c504(0x1ed)]===_0x16ee33&&(console[_0x38c504(0x197)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error'](_0x16d1f5(0x259));console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x4737fa=a4_0x15d0de;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x1310ca=document['getElementById']('ribbon-user-search');_0x1310ca&&_0x1310ca['addEventListener'](_0x4737fa(0x1a3),debounce(searchRibbonUser,0x12c));const _0x3be785=document['getElementById']('search-ribbon-user-btn');_0x3be785&&_0x3be785['addEventListener']('click',searchRibbonUser);const _0x1848ea=document['getElementById']('add-ribbon-form');_0x1848ea&&_0x1848ea['addEventListener']('submit',addRibbon),_0x1310ca&&_0x1310ca['addEventListener']('keypress',function(_0x125ac5){_0x125ac5['key']==='Enter'&&(_0x125ac5['preventDefault'](),searchRibbonUser());}),console['log'](_0x4737fa(0x230));}async function modifyUserPoints(_0x54fda6,_0x4d9367,_0x502970,_0x537ec4=''){const _0x18eff5=a4_0x15d0de,_0x4bf370=doc(db,'userProfiles',_0x54fda6),_0x39d27b=await getDoc(_0x4bf370);if(!_0x39d27b['exists']())throw new Error('User\x20not\x20found');const _0x563193=_0x39d27b['data'](),_0x365d8f=_0x563193[_0x18eff5(0x2f5)]!==undefined?_0x563193['points']:0x0;_0x563193['points']===undefined&&(console[_0x18eff5(0x197)]('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x563193[_0x18eff5(0x304)]||_0x563193[_0x18eff5(0x38e)]||_0x18eff5(0x237))),await updateDoc(_0x4bf370,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x2dbacd=_0x365d8f;switch(_0x4d9367){case'add':_0x2dbacd=_0x365d8f+_0x502970;break;case _0x18eff5(0x337):_0x2dbacd=Math['max'](0x0,_0x365d8f-_0x502970);break;case'set':_0x2dbacd=_0x502970;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x4bf370,{'points':_0x2dbacd,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x54fda6,'userEmail':_0x563193['email']||'unknown','displayName':_0x563193['displayName']||_0x563193['username']||'Unknown\x20User','action':_0x4d9367,'amount':_0x502970,'previousPoints':_0x365d8f,'newPoints':_0x2dbacd,'reason':_0x537ec4,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x166985=a4_0x15d0de,_0x1c6ada=document['getElementById']('points-overview-table-body');if(!_0x1c6ada)return;_0x1c6ada[_0x166985(0x149)]=_0x166985(0x1ad);try{const _0x3b4720=collection(db,'userProfiles'),_0x205608=await getDocs(_0x3b4720);if(_0x205608['empty']){_0x1c6ada['innerHTML']=_0x166985(0x22e);return;}const _0x5bd63b=[];let _0x26a49a=0x0;_0x205608[_0x166985(0x170)](_0x262f01=>{const _0x156a9e=_0x166985,_0x4cebe6=_0x262f01['data'](),_0x1d8322=_0x4cebe6['points']!==undefined?_0x4cebe6['points']:0x0;_0x4cebe6[_0x156a9e(0x2f5)]===undefined&&_0x26a49a++,_0x5bd63b['push']({'id':_0x262f01['id'],..._0x4cebe6,'points':_0x1d8322});}),_0x26a49a>0x0&&(console[_0x166985(0x197)]('Found\x20'+_0x26a49a+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x26a49a+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x5bd63b['sort']((_0x3085ff,_0x488917)=>(_0x488917['points']||0x0)-(_0x3085ff['points']||0x0)),window[_0x166985(0x2c2)]=_0x5bd63b,renderPointsOverview(_0x5bd63b);}catch(_0x51390e){console[_0x166985(0x1a6)]('Error\x20loading\x20points\x20overview:',_0x51390e),_0x1c6ada[_0x166985(0x149)]=_0x166985(0x2db)+_0x51390e['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x5212a4=a4_0x15d0de,_0x48c8c6=document['getElementById']('ribbons-overview-table-body');if(!_0x48c8c6)return;_0x48c8c6['innerHTML']=_0x5212a4(0x360);try{const [_0x41f902,_0x5a1def,_0x3ec28b]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x48c8c6[_0x5212a4(0x149)]='';const _0x13e0fe=(_0x234125,_0x35e8d5)=>{_0x234125['forEach'](_0x332b5a=>{const _0x5166b6=a4_0x4fbe,_0x3f6ce2=_0x332b5a['data'](),_0x36e272=_0x3f6ce2[_0x5166b6(0x1b9)]||{},_0x36ee2b=Object[_0x5166b6(0x178)](_0x36e272)[_0x5166b6(0x1b0)],_0x39657d=document['createElement']('tr');_0x39657d[_0x5166b6(0x149)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3f6ce2[_0x5166b6(0x35d)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x35e8d5['toLowerCase']()+'\x22>'+_0x35e8d5+_0x5166b6(0x27d)+_0x36ee2b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3f6ce2[_0x5166b6(0x175)]?new Date(_0x3f6ce2['lastUpdated'][_0x5166b6(0x2a6)]*0x3e8)[_0x5166b6(0x22b)]():'Unknown')+_0x5166b6(0x14e)+_0x3f6ce2['username']+'\x22\x20data-ladder=\x22'+_0x35e8d5+_0x5166b6(0x218),_0x48c8c6['appendChild'](_0x39657d);});};_0x13e0fe(_0x41f902,'D1'),_0x13e0fe(_0x5a1def,'D2'),_0x13e0fe(_0x3ec28b,'D3'),document[_0x5212a4(0x187)]('.edit-ribbons-btn')['forEach'](_0x2b63d8=>{const _0x2e218d=_0x5212a4;_0x2b63d8['addEventListener'](_0x2e218d(0x1f5),function(){const _0x26aa4d=_0x2e218d,_0x205c41=this['dataset']['username'],_0x4b325c=this[_0x26aa4d(0x2fc)]['ladder'];editUserRibbons(_0x205c41,_0x4b325c);});}),showNotification(_0x5212a4(0x2c4),'success');}catch(_0x1ca7a9){console[_0x5212a4(0x1a6)](_0x5212a4(0x2f7),_0x1ca7a9),_0x48c8c6['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification(_0x5212a4(0x206),_0x5212a4(0x1a6));}}async function searchRibbonUser(){const _0x2c778e=a4_0x15d0de,_0x3d1823=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x3d1823){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x273912,_0x5bd316,_0x318e31]=await Promise[_0x2c778e(0x23c)]([getDoc(doc(db,_0x2c778e(0x339),_0x3d1823)),getDoc(doc(db,'playerRibbonsD2',_0x3d1823)),getDoc(doc(db,'playerRibbonsD3',_0x3d1823))]);let _0x40e4e0=null,_0x395c41=null;if(_0x273912['exists']())_0x40e4e0='D1',_0x395c41=_0x273912['data']();else{if(_0x5bd316['exists']())_0x40e4e0='D2',_0x395c41=_0x5bd316[_0x2c778e(0x1c8)]();else _0x318e31['exists']()&&(_0x40e4e0='D3',_0x395c41=_0x318e31['data']());}_0x40e4e0?(document['getElementById'](_0x2c778e(0x323))['textContent']=_0x3d1823,document['getElementById']('ribbon-target-user')['value']=_0x3d1823,document[_0x2c778e(0x29f)]('ribbon-target-ladder')['value']=_0x40e4e0,document['getElementById'](_0x2c778e(0x26b))['style']['display']='block',displayCurrentRibbons(_0x395c41['ribbons']||{}),showNotification(_0x2c778e(0x18e)+_0x3d1823+'\x20in\x20'+_0x40e4e0+'\x20ladder','success')):showNotification('User\x20'+_0x3d1823+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x435555){console['error']('Error\x20searching\x20user:',_0x435555),showNotification(_0x2c778e(0x2d3),'error');}}function displayCurrentRibbons(_0x36afc3){const _0x26dbea=a4_0x15d0de,_0x32c4fa=document[_0x26dbea(0x29f)]('current-ribbons-list');if(!_0x32c4fa)return;_0x32c4fa[_0x26dbea(0x149)]='';if(Object['keys'](_0x36afc3)[_0x26dbea(0x1b0)]===0x0){_0x32c4fa['innerHTML']=_0x26dbea(0x27b);return;}Object['entries'](_0x36afc3)['forEach'](([_0x3a9a78,_0x520c27])=>{const _0x304056=_0x26dbea,_0x5ba182=document['createElement'](_0x304056(0x328));_0x5ba182['className']='ribbon-item',_0x5ba182['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x3a9a78+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x520c27[_0x304056(0x25a)]||0x1)+_0x304056(0x1a7)+(_0x520c27['awardedAt']?new Date(_0x520c27['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x3a9a78+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x32c4fa['appendChild'](_0x5ba182);}),document['querySelectorAll']('.remove-ribbon-btn')[_0x26dbea(0x170)](_0x2a702c=>{const _0x726dff=_0x26dbea;_0x2a702c['addEventListener'](_0x726dff(0x1f5),function(){const _0xcc387c=this['dataset']['ribbon'];removeRibbon(_0xcc387c);});});}async function addRibbon(_0xe3675c){const _0x19b67f=a4_0x15d0de;_0xe3675c['preventDefault']();const _0x28e3af=document['getElementById'](_0x19b67f(0x26a))['value'],_0x321d8a=document['getElementById']('ribbon-target-ladder')['value'],_0x555fbb=document['getElementById'](_0x19b67f(0x317))['value'],_0x3d1999=parseInt(document[_0x19b67f(0x29f)]('ribbon-level')['value']);if(!_0x28e3af||!_0x321d8a||!_0x555fbb||!_0x3d1999){showNotification('Please\x20fill\x20all\x20fields',_0x19b67f(0x1a6));return;}try{const _0x3cd74b='playerRibbons'+(_0x321d8a==='D1'?'':_0x321d8a),_0x48ef30=doc(db,_0x3cd74b,_0x28e3af),_0x11f804=await getDoc(_0x48ef30),_0x288af1=_0x11f804['exists']()?_0x11f804['data']()['ribbons']||{}:{};_0x288af1[_0x555fbb]={'level':_0x3d1999,'awardedAt':serverTimestamp()},await setDoc(_0x48ef30,{'username':_0x28e3af,'ladder':_0x321d8a,'ribbons':_0x288af1,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x19b67f(0x318)+_0x555fbb+'\x20Level\x20'+_0x3d1999+_0x19b67f(0x2ef)+_0x28e3af,'success'),displayCurrentRibbons(_0x288af1),document['getElementById']('ribbon-type-select')['value']='',document['getElementById'](_0x19b67f(0x21d))['value']='1';}catch(_0x4a708c){console[_0x19b67f(0x1a6)](_0x19b67f(0x200),_0x4a708c),showNotification(_0x19b67f(0x177),'error');}}async function removeRibbon(_0x1ee3df){const _0x1af3e4=a4_0x15d0de,_0xb09a00=document[_0x1af3e4(0x29f)](_0x1af3e4(0x26a))['value'],_0x4d2af8=document[_0x1af3e4(0x29f)]('ribbon-target-ladder')[_0x1af3e4(0x345)];if(!confirm('Remove\x20'+_0x1ee3df+'\x20from\x20'+_0xb09a00+'?'))return;try{const _0x55bb4f=_0x1af3e4(0x339)+(_0x4d2af8==='D1'?'':_0x4d2af8),_0xaa0fd6=doc(db,_0x55bb4f,_0xb09a00),_0x1ac3a8=await getDoc(_0xaa0fd6),_0x2dbaab=_0x1ac3a8['exists']()?_0x1ac3a8[_0x1af3e4(0x1c8)]()['ribbons']||{}:{};delete _0x2dbaab[_0x1ee3df],await setDoc(_0xaa0fd6,{'username':_0xb09a00,'ladder':_0x4d2af8,'ribbons':_0x2dbaab,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x1ee3df+'\x20from\x20'+_0xb09a00,'success'),displayCurrentRibbons(_0x2dbaab);}catch(_0x5d465d){console[_0x1af3e4(0x1a6)]('Error\x20removing\x20ribbon:',_0x5d465d),showNotification('Error\x20removing\x20ribbon',_0x1af3e4(0x1a6));}}function editUserRibbons(_0x9a54a2,_0x425417){const _0x27bcf0=a4_0x15d0de;document[_0x27bcf0(0x29f)]('ribbon-user-search')[_0x27bcf0(0x345)]=_0x9a54a2,searchRibbonUser();}