const a6_0x244cb5=a6_0x2fbc;(function(_0x24a9e2,_0x2b43f6){const _0x3acc58=a6_0x2fbc,_0xa7f03=_0x24a9e2();while(!![]){try{const _0x1e275a=parseInt(_0x3acc58(0x1c8))/0x1+parseInt(_0x3acc58(0x1ca))/0x2+parseInt(_0x3acc58(0x2c3))/0x3*(-parseInt(_0x3acc58(0x1c2))/0x4)+parseInt(_0x3acc58(0x225))/0x5+-parseInt(_0x3acc58(0x1d7))/0x6*(-parseInt(_0x3acc58(0x24d))/0x7)+parseInt(_0x3acc58(0x25e))/0x8*(-parseInt(_0x3acc58(0x25f))/0x9)+-parseInt(_0x3acc58(0x1e4))/0xa;if(_0x1e275a===_0x2b43f6)break;else _0xa7f03['push'](_0xa7f03['shift']());}catch(_0x2cfa64){_0xa7f03['push'](_0xa7f03['shift']());}}}(a6_0x14b7,0xdc186));const a6_0x16312a=(function(){let _0x3a81a4=!![];return function(_0x5bf48f,_0x416f70){const _0x59ae93=_0x3a81a4?function(){const _0x2e421f=a6_0x2fbc;if(_0x416f70){const _0x35901d=_0x416f70[_0x2e421f(0x2f2)](_0x5bf48f,arguments);return _0x416f70=null,_0x35901d;}}:function(){};return _0x3a81a4=![],_0x59ae93;};}()),a6_0x15b73c=a6_0x16312a(this,function(){const _0xb2e35a=a6_0x2fbc;return a6_0x15b73c[_0xb2e35a(0x2c9)]()[_0xb2e35a(0x266)]('(((.+)+)+)+$')[_0xb2e35a(0x2c9)]()[_0xb2e35a(0x1c1)](a6_0x15b73c)['search'](_0xb2e35a(0x2e1));});a6_0x15b73c();const a6_0x595a38=(function(){let _0x4d935a=!![];return function(_0x5d8839,_0x374947){const _0x5dedec=_0x4d935a?function(){const _0x3aec3e=a6_0x2fbc;if(_0x374947){const _0x386cbe=_0x374947[_0x3aec3e(0x2f2)](_0x5d8839,arguments);return _0x374947=null,_0x386cbe;}}:function(){};return _0x4d935a=![],_0x5dedec;};}()),a6_0x2fdcf4=a6_0x595a38(this,function(){const _0x3f3b9a=a6_0x2fbc;let _0x5cb71c;try{const _0x5d8766=Function(_0x3f3b9a(0x1f6)+_0x3f3b9a(0x22c)+');');_0x5cb71c=_0x5d8766();}catch(_0x5ec988){_0x5cb71c=window;}const _0x513537=_0x5cb71c['console']=_0x5cb71c[_0x3f3b9a(0x300)]||{},_0x45003d=[_0x3f3b9a(0x303),_0x3f3b9a(0x2cd),_0x3f3b9a(0x1ea),'error','exception',_0x3f3b9a(0x25c),_0x3f3b9a(0x23c)];for(let _0x2207b9=0x0;_0x2207b9<_0x45003d[_0x3f3b9a(0x28a)];_0x2207b9++){const _0x22f3a5=a6_0x595a38[_0x3f3b9a(0x1c1)][_0x3f3b9a(0x243)][_0x3f3b9a(0x2fa)](a6_0x595a38),_0x1aef90=_0x45003d[_0x2207b9],_0x166c61=_0x513537[_0x1aef90]||_0x22f3a5;_0x22f3a5[_0x3f3b9a(0x2a4)]=a6_0x595a38[_0x3f3b9a(0x2fa)](a6_0x595a38),_0x22f3a5['toString']=_0x166c61[_0x3f3b9a(0x2c9)][_0x3f3b9a(0x2fa)](_0x166c61),_0x513537[_0x1aef90]=_0x22f3a5;}});function a6_0x2fbc(_0x22498e,_0x53acbd){const _0x2cada7=a6_0x14b7();return a6_0x2fbc=function(_0x2fdcf4,_0x595a38){_0x2fdcf4=_0x2fdcf4-0x1bd;let _0xc2a3a9=_0x2cada7[_0x2fdcf4];return _0xc2a3a9;},a6_0x2fbc(_0x22498e,_0x53acbd);}a6_0x2fdcf4();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':a6_0x244cb5(0x2eb),'muteFromDate':new Date(a6_0x244cb5(0x215))['getTime']()}];function isUsernameMuted(_0xb9481a,_0x5efed3){const _0x321ad7=a6_0x244cb5;if(!_0xb9481a)return![];const _0x2bdac9=mutedUsers[_0x321ad7(0x20e)](_0x152cc0=>_0x152cc0[_0x321ad7(0x239)]===_0xb9481a);if(!_0x2bdac9)return![];if(!_0x5efed3)return!![];const _0x1101cb=_0x5efed3 instanceof Date?_0x5efed3[_0x321ad7(0x20b)]():_0x5efed3['seconds']?_0x5efed3['seconds']*0x3e8:Date[_0x321ad7(0x264)]();return _0x1101cb>=_0x2bdac9[_0x321ad7(0x268)];}function filterComment(_0xb100ae,_0x4ffb48,_0x1873b7){if(!_0xb100ae)return'-';if(isUsernameMuted(_0x4ffb48,_0x1873b7))return'Muted.';return _0xb100ae;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x4251a6,_0x434263,_0x2cd856){const _0x786fde=a6_0x244cb5,_0x1b4ca1='u:'+(_0x2cd856[_0x786fde(0x23a)]||'');return _0x786fde(0x27b)+_0x4251a6+'_p'+_0x434263+'_'+_0x1b4ca1;}function a6_0x14b7(){const _0x1d4b81=['commentId','add','dataset','No\x20description\x20provided','.comment.loser-comment','You\x20must\x20be\x20signed\x20in\x20to\x20continue','.comment.winner-comment','(((.+)+)+)+$','matchComments','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>','keypress','insertBefore','getElementById','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','justifyContent','Error\x20fetching\x20comments\x20batch:','.matches-loading[style*=\x22color:\x20red\x22]','Daz','Failed\x20to\x20add\x20comment:\x20','preview-d1-button','popup-btn\x20report-btn','previewPrevPage','.loser-demo-link','levels','apply','block','.submit-comment-btn','disabled','\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20','You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment','disorientation','.comment-item','bind','data','forEach','.player.winner\x20.player-name','currentUser','loserUsername','console','preventDefault','querySelectorAll','log','You\x20can\x20only\x20delete\x20your\x20own\x20comments','display','filter','demoWordCount','winnerOldElo','userProfiles','submitComment','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22','loserDemoLink','constructor','4wqRePm','gold','.add-comment-btn','Yesterday','parentNode','parse','857655bzUVtv','type','2421702HYmlto','recent-matches-preview','apply-enhanced-filters','-10','toLocaleDateString','popup-btn\x20close-btn','max','text','createdAt','style','addEventListener','Error\x20fetching\x20comments:','error','26328yMwECk','#fff','clear-enhanced-filters','removeItem','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22','jump-to-page','Please\x20enter\x20a\x20demo\x20link','.matches-loading','displayName','Loser','Today','Failed\x20to\x20delete\x20comment:\x20','commentPopupContentPreview','4262180yCYHIK','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','start','popup-actions','Comment\x20added\x20successfully','applyFilterBtn','info','message','currentMode','Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.','.match-display-wrapper','approvedMatches','matchesPerPage','subgames','color','Standard\x20Match','desc','0.6','return\x20(function()\x20','div','.match-card','approvedMatchesD2','removeAttribute','Failed\x20to\x20fetch\x20username:','Loading\x20next\x20page\x20using\x20cursor','toggle','.player.loser\x20.player-name','from','mapPlayed','silver','Submitting\x20comment\x20as:','flex','+10','</div>','subgameType','Failed\x20to\x20cache\x20data:','wordCount','.match-demo-links','input','getTime','.comments-container','closest','find','none','includes','appendChild','#808080','commentOverlayPreview','uid','2025-07-02','commentPopupTitlePreview','Failed\x20to\x20parse\x20cache:','closeCommentPopupPreview','Unknown\x20User','Unknown\x20Map','winner-','.jump-btn','Delete\x20demo','selectedOptions','winnerScore','current','onclick',',\x20fetching\x20from\x20Firestore','addCommentForm','match-card-template','5234910pOsUog','default','Loading\x20first\x20page\x20from\x20Firestore','winnerComment','exists','hasNextPage','Error\x20deleting\x20comment:','{}.constructor(\x22return\x20this\x22)(\x20)','.player.winner\x20.player-score','#CD7F32','content','querySelector','\x20from\x20cache','Anonymous','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>','removeChild','approvedAt','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?','value','username','filterUsername','previewNextPage','trace','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','blind-match','Enter','Failed\x20to\x20submit:\x20','setAttribute','seconds','prototype','totalPages','comment-item','clearFilterBtn','\x20days\x20ago','gap','className','selected','Page\x20','Close','238cRLvQk','toLocaleString','Cached\x20intermediary\x20page\x20','\x22</div>','winnerUsername','pilots','substring','</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20','<strong>','Cache\x20miss\x20for\x20page\x20','slice','Demo:\x20','getItem','Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.','previewPageInfo','table','trim','2819096miBJBV','27kZvJUF','\x20matching\x20filters','prev','all','required','now','cursor','search','15px','muteFromDate','<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>','lastVisible','stopPropagation','#ff4444','Anonymous\x20User','altered-powerups','button','commentAddOverlay','submit','demoDescription','weapon-imbalance','userId','emerald','loading-indicator','Match\x20','commentPopupPreview','isLoading','Submit','previewCache_','push','.option-tab','closeAddCommentPopup','empty','keys','Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.','.popup-actions','auth','backgroundColor','filter-pilots','currentPage',':</strong>\x20\x22','Comment\x20from\x20','\x20demo\x20links:','length','unranked','timestamp','dogfight','approvedMatchesD3','Failed\x20to\x20report\x20comment:\x20','Comments\x20section\x20not\x20found\x20in\x20template','loserScore','Please\x20enter\x20a\x20comment\x20before\x20submitting','jump','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments','demo','docsData','Error\x20fetching\x20','remove','description','classList','commentText','gauss-and-mercs','firstChild','Error\x20submitting:','Winner','demoLink','Comment\x20deleted\x20successfully','fusion-match','.player.loser\x20.player-suicides','__proto__','badComments','option','Muted.','<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>','filter-levels','.option-tab.active','click','next','.option-content','.</div>','ratting','Submitting...','mega-match','enhancedFilters','toLowerCase','end','currentMatchId','href','.no-comments-message','preview-d2-button','title','<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display','firstVisible','bronze','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20','Unknown','textContent','active','createElement','showAddCommentPopup','2639373DwaxGm','comment-overlay','10px','loserOldElo','...','filter-subgames','toString','S:\x20','winnerDemoLink','missiles-6plus','warn','commentUser','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','floor','matchId','Demo\x20link','preview-d3-button','innerHTML','map','winnerSuicides','docs','split','\x27s\x20Demo'];a6_0x14b7=function(){return _0x1d4b81;};return a6_0x14b7();}function getCachedPage(_0x2dedb7){const _0x4d13f8=a6_0x244cb5,_0x4f53e2=sessionStorage[_0x4d13f8(0x259)](_0x2dedb7);if(_0x4f53e2)try{return JSON[_0x4d13f8(0x1c7)](_0x4f53e2);}catch(_0x3ad230){return console['error'](_0x4d13f8(0x217),_0x3ad230),sessionStorage[_0x4d13f8(0x1da)](_0x2dedb7),null;}return null;}function cachePage(_0x4645d4,_0x104de4){const _0x1e2afd=a6_0x244cb5;try{sessionStorage['setItem'](_0x4645d4,JSON['stringify'](_0x104de4));}catch(_0x2e1061){console[_0x1e2afd(0x1d6)](_0x1e2afd(0x207),_0x2e1061);}}function getEloColor(_0x2147f3){const _0x1d40b5=a6_0x244cb5,_0x3c0b7f=Number(_0x2147f3);if(_0x3c0b7f>=0x7d0)return'#50C878';else{if(_0x3c0b7f>=0x708)return'#FFD700';else{if(_0x3c0b7f>=0x640)return'#b9f1fc';else{if(_0x3c0b7f>=0x578)return _0x1d40b5(0x22e);else return _0x1d40b5(0x212);}}}}function formatDate(_0x3d8ad9,_0x15cd5b=![]){const _0x36577d=a6_0x244cb5;if(!_0x3d8ad9||!_0x3d8ad9[_0x36577d(0x242)])return'N/A';const _0x5ca332=new Date(_0x3d8ad9[_0x36577d(0x242)]*0x3e8);return _0x15cd5b?_0x5ca332[_0x36577d(0x24e)]():_0x5ca332['toLocaleDateString']();}function truncateComment(_0x305e4c,_0x4b1d5f=0x1e){const _0xd0ae76=a6_0x244cb5;if(!_0x305e4c)return'-';if(_0x305e4c[_0xd0ae76(0x28a)]<=_0x4b1d5f)return _0x305e4c;return _0x305e4c[_0xd0ae76(0x253)](0x0,_0x4b1d5f)+_0xd0ae76(0x2c7);}function formatCommentDate(_0x58995a){const _0x22cc52=a6_0x244cb5;if(!_0x58995a||!_0x58995a[_0x22cc52(0x242)])return'';const _0x1036f9=new Date(_0x58995a['seconds']*0x3e8),_0x5a843e=new Date(),_0x42598a=Math['abs'](_0x5a843e-_0x1036f9),_0x3d224a=Math[_0x22cc52(0x2d0)](_0x42598a/(0x3e8*0x3c*0x3c*0x18));if(_0x3d224a===0x0)return _0x22cc52(0x1e1);else{if(_0x3d224a===0x1)return _0x22cc52(0x1c5);else return _0x3d224a<0x7?_0x3d224a+_0x22cc52(0x247):_0x1036f9[_0x22cc52(0x1ce)]();}}function setLoadingIndicator(_0x3d0208){const _0x1608af=a6_0x244cb5,_0x216019=document[_0x1608af(0x2e6)](_0x1608af(0x276));if(_0x216019)_0x216019[_0x1608af(0x1d3)][_0x1608af(0x305)]=_0x3d0208?'block':_0x1608af(0x20f);}export function updatePreviewLadderModeUI(){const _0xddbc94=a6_0x244cb5,_0x103dac=document[_0xddbc94(0x2e6)]('preview-ladder-mode'),_0x2c8c9e=document[_0xddbc94(0x2e6)](_0xddbc94(0x2ed)),_0x2cbb62=document[_0xddbc94(0x2e6)](_0xddbc94(0x2b8)),_0x171082=document[_0xddbc94(0x2e6)]('preview-d3-button');if(_0x103dac)_0x103dac[_0xddbc94(0x2bf)]=previewState[_0xddbc94(0x1ec)];if(_0x2c8c9e)_0x2c8c9e[_0xddbc94(0x29a)][_0xddbc94(0x1fd)](_0xddbc94(0x2c0),previewState[_0xddbc94(0x1ec)]==='D1');if(_0x2cbb62)_0x2cbb62[_0xddbc94(0x29a)][_0xddbc94(0x1fd)]('active',previewState[_0xddbc94(0x1ec)]==='D2');if(_0x171082)_0x171082[_0xddbc94(0x29a)][_0xddbc94(0x1fd)](_0xddbc94(0x2c0),previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x5db290){const _0x1c9340=a6_0x244cb5,_0x6f211a=document['getElementById'](_0x1c9340(0x2ef)),_0x47f9b1=document['getElementById']('previewNextPage'),_0x232aa3=document[_0x1c9340(0x2e6)](_0x1c9340(0x25b));if(!_0x6f211a||!_0x47f9b1||!_0x232aa3)return;_0x232aa3[_0x1c9340(0x2bf)]=_0x1c9340(0x24b)+previewState[_0x1c9340(0x286)],_0x6f211a[_0x1c9340(0x2f5)]=previewState[_0x1c9340(0x286)]<=0x1,_0x47f9b1[_0x1c9340(0x2f5)]=!_0x5db290;}function setPreviewLoadingState(_0x2a74ed){const _0x1198cc=a6_0x244cb5;previewState[_0x1198cc(0x279)]=_0x2a74ed,setLoadingIndicator(_0x2a74ed);const _0x321fcb=document[_0x1198cc(0x2e6)](_0x1198cc(0x1cb)),_0x1abafa=_0x321fcb?_0x321fcb[_0x1198cc(0x230)](_0x1198cc(0x1de)):null,_0x20041d=document[_0x1198cc(0x2e6)](_0x1198cc(0x2ef)),_0x4d860a=document[_0x1198cc(0x2e6)](_0x1198cc(0x23b)),_0x60c673=document[_0x1198cc(0x2e6)]('preview-d1-button'),_0x290fa=document[_0x1198cc(0x2e6)](_0x1198cc(0x2b8)),_0x9d4e98=document[_0x1198cc(0x2e6)](_0x1198cc(0x1e9)),_0x1a3e97=document[_0x1198cc(0x2e6)](_0x1198cc(0x246));if(_0x1abafa&&!_0x2a74ed)_0x1abafa[_0x1198cc(0x1d3)]['display']=_0x1198cc(0x20f);else _0x1abafa&&_0x2a74ed&&(_0x1abafa[_0x1198cc(0x1d3)][_0x1198cc(0x305)]='block');!_0x2a74ed&&_0x321fcb&&!_0x321fcb[_0x1198cc(0x230)](_0x1198cc(0x1f8))&&!_0x321fcb[_0x1198cc(0x230)](_0x1198cc(0x2ea))&&(_0x321fcb['innerHTML']=_0x1198cc(0x2e7)+(previewState['filterUsername']?_0x1198cc(0x260):'')+_0x1198cc(0x2ae));if(_0x20041d)_0x20041d[_0x1198cc(0x2f5)]=_0x2a74ed||previewState[_0x1198cc(0x286)]<=0x1;if(_0x4d860a)_0x4d860a[_0x1198cc(0x2f5)]=_0x2a74ed;if(_0x60c673)_0x60c673[_0x1198cc(0x2f5)]=_0x2a74ed;if(_0x290fa)_0x290fa[_0x1198cc(0x2f5)]=_0x2a74ed;if(_0x9d4e98)_0x9d4e98[_0x1198cc(0x2f5)]=_0x2a74ed;if(_0x1a3e97)_0x1a3e97[_0x1198cc(0x2f5)]=_0x2a74ed;}function applyClientFilters(_0x194cae){const _0x18a0f8=a6_0x244cb5;if(!previewState['filterUsername'])return _0x194cae;const _0x25122b=previewState[_0x18a0f8(0x23a)][_0x18a0f8(0x2b3)]();return _0x194cae['filter'](_0x46538f=>{const _0x54acb5=_0x18a0f8,_0x533f37=(_0x46538f[_0x54acb5(0x251)]||'')[_0x54acb5(0x2b3)](),_0x1b3131=(_0x46538f[_0x54acb5(0x2ff)]||'')[_0x54acb5(0x2b3)]();return _0x533f37[_0x54acb5(0x210)](_0x25122b)||_0x1b3131['includes'](_0x25122b);});}function applyEnhancedClientFilters(_0x402502){const _0x3c3341=a6_0x244cb5;if(!hasEnhancedFilters())return _0x402502;return _0x402502[_0x3c3341(0x306)](_0x1a3964=>{const _0xe9657a=_0x3c3341;if(previewState[_0xe9657a(0x2b2)][_0xe9657a(0x252)]){const _0x158b53=previewState['enhancedFilters']['pilots'][_0xe9657a(0x2b3)](),_0x45a48a=(_0x1a3964[_0xe9657a(0x251)]||'')[_0xe9657a(0x2b3)](),_0x48f2c9=(_0x1a3964['loserUsername']||'')[_0xe9657a(0x2b3)]();if(!_0x45a48a[_0xe9657a(0x210)](_0x158b53)&&!_0x48f2c9[_0xe9657a(0x210)](_0x158b53))return![];}if(previewState[_0xe9657a(0x2b2)][_0xe9657a(0x2f1)]){const _0x3f1de5=previewState['enhancedFilters']['levels'][_0xe9657a(0x2b3)](),_0x45582b=(_0x1a3964[_0xe9657a(0x200)]||'')[_0xe9657a(0x2b3)]();if(!_0x45582b[_0xe9657a(0x210)](_0x3f1de5))return![];}if(previewState[_0xe9657a(0x2b2)]['subgames'][_0xe9657a(0x28a)]>0x0){const _0x31f99f=_0x1a3964[_0xe9657a(0x206)]||_0xe9657a(0x1f3);if(!previewState[_0xe9657a(0x2b2)][_0xe9657a(0x1f1)][_0xe9657a(0x210)](_0x31f99f))return![];}return!![];});}function hasEnhancedFilters(){const _0x2764cf=a6_0x244cb5;return previewState[_0x2764cf(0x2b2)][_0x2764cf(0x252)]||previewState['enhancedFilters']['levels']||previewState[_0x2764cf(0x2b2)][_0x2764cf(0x1f1)][_0x2764cf(0x28a)]>0x0;}function clearEnhancedFilters(){const _0x1536c5=a6_0x244cb5;previewState[_0x1536c5(0x2b2)]={'pilots':'','levels':'','subgames':[]},document[_0x1536c5(0x2e6)](_0x1536c5(0x285))[_0x1536c5(0x238)]='',document[_0x1536c5(0x2e6)](_0x1536c5(0x2a9))['value']='';const _0x91ca11=document[_0x1536c5(0x2e6)](_0x1536c5(0x2c8));for(let _0x3ed52b of _0x91ca11['options']){_0x3ed52b[_0x1536c5(0x24a)]=![];}}function jumpToPage(_0x4a0b9a){const _0x2eb102=a6_0x244cb5,_0x5735ea=document['getElementById']('jump-to-page'),_0x51f17b=previewState[_0x2eb102(0x286)];let _0x56702c=_0x51f17b;switch(_0x4a0b9a){case _0x2eb102(0x1e6):_0x56702c=0x1;break;case _0x2eb102(0x2b4):_0x56702c=Math[_0x2eb102(0x1d0)](_0x51f17b+0xa,previewState[_0x2eb102(0x244)]||_0x51f17b+0xa);break;case'+1':_0x56702c=_0x51f17b+0x1;break;case'+5':_0x56702c=_0x51f17b+0x5;break;case _0x2eb102(0x204):_0x56702c=_0x51f17b+0xa;break;case'-1':_0x56702c=Math['max'](0x1,_0x51f17b-0x1);break;case'-5':_0x56702c=Math['max'](0x1,_0x51f17b-0x5);break;case _0x2eb102(0x1cd):_0x56702c=Math[_0x2eb102(0x1d0)](0x1,_0x51f17b-0xa);break;case _0x2eb102(0x20a):const _0x2e7f27=parseInt(_0x5735ea[_0x2eb102(0x238)]);_0x2e7f27&&_0x2e7f27>0x0&&(_0x56702c=_0x2e7f27,_0x5735ea['value']='');break;}_0x56702c!==_0x51f17b&&_0x56702c>0x0&&(previewState[_0x2eb102(0x286)]=_0x56702c,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x48b6df='current'){const _0xb7dea8=a6_0x244cb5,_0x239071=document[_0xb7dea8(0x2e6)](_0xb7dea8(0x1cb)),_0x3c739f=document[_0xb7dea8(0x2e6)](_0xb7dea8(0x224));if(previewState[_0xb7dea8(0x279)]||!_0x239071||!_0x3c739f)return;_0x48b6df===_0xb7dea8(0x220)&&(console[_0xb7dea8(0x303)]('Clearing\x20cache\x20for\x20refresh/reset'),Object[_0xb7dea8(0x280)](sessionStorage)[_0xb7dea8(0x2fc)](_0x2ffc2d=>{const _0x4cd852=_0xb7dea8;_0x2ffc2d[_0x4cd852(0x210)](_0x4cd852(0x27b)+previewState[_0x4cd852(0x1ec)])&&sessionStorage[_0x4cd852(0x1da)](_0x2ffc2d);}));let _0x365f1f=previewState['currentPage'];if(_0x48b6df==='next')_0x365f1f++;else{if(_0x48b6df===_0xb7dea8(0x261))_0x365f1f--;else _0x48b6df==='current'&&(_0x365f1f=0x1,previewState[_0xb7dea8(0x2bb)]=null,previewState['lastVisible']=null);}if(_0x365f1f<0x1)_0x365f1f=0x1;const _0x385bc5=previewState['currentPage'];previewState[_0xb7dea8(0x286)]=_0x365f1f,updatePreviewPaginationControls(!![]);const _0x4404bb={'filterUsername':previewState[_0xb7dea8(0x23a)]},_0x218a67=getCacheKey(previewState['currentMode'],_0x365f1f,_0x4404bb),_0x421868=_0x48b6df!==_0xb7dea8(0x220)?getCachedPage(_0x218a67):null;if(_0x421868){console[_0xb7dea8(0x303)]('Rendering\x20page\x20'+_0x365f1f+_0xb7dea8(0x231)),setPreviewLoadingState(!![]),renderMatchCards(_0x421868[_0xb7dea8(0x296)]),updatePreviewPaginationControls(_0x421868[_0xb7dea8(0x22a)]),setPreviewLoadingState(![]);return;}console[_0xb7dea8(0x303)](_0xb7dea8(0x256)+_0x365f1f+_0xb7dea8(0x222)),setPreviewLoadingState(!![]),_0x239071['innerHTML']=_0xb7dea8(0x2a8);const _0x1a2abd=previewState[_0xb7dea8(0x1ec)]==='D1'?_0xb7dea8(0x1ef):previewState[_0xb7dea8(0x1ec)]==='D2'?_0xb7dea8(0x1f9):_0xb7dea8(0x28e),_0x3f0c42=previewState[_0xb7dea8(0x1ec)]==='D1'?_0xb7dea8(0x1d2):_0xb7dea8(0x235);try{const _0x335bcb=collection(window['db'],_0x1a2abd);let _0x3f76cf=[orderBy(_0x3f0c42,_0xb7dea8(0x1f4))];if(_0x365f1f===0x1)console[_0xb7dea8(0x303)](_0xb7dea8(0x227)),_0x3f76cf[_0xb7dea8(0x27c)](limit(previewState[_0xb7dea8(0x1f0)]));else{if(_0x48b6df===_0xb7dea8(0x2ac)&&previewState[_0xb7dea8(0x26a)])console[_0xb7dea8(0x303)](_0xb7dea8(0x1fc)),_0x3f76cf[_0xb7dea8(0x27c)](startAfter(previewState['lastVisible'])),_0x3f76cf[_0xb7dea8(0x27c)](limit(previewState['matchesPerPage']));else{console['log']('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x419e2a=_0x365f1f*previewState['matchesPerPage'];_0x3f76cf[_0xb7dea8(0x27c)](limit(_0x419e2a));}}const _0x429366=query(_0x335bcb,..._0x3f76cf),_0x545384=await getDocs(_0x429366);let _0x3cafce=_0x545384['docs'];if(_0x365f1f>0x1&&_0x48b6df!=='next'){const _0x24b560=(_0x365f1f-0x1)*previewState[_0xb7dea8(0x1f0)];_0x3cafce=_0x3cafce[_0xb7dea8(0x257)](_0x24b560,_0x24b560+previewState[_0xb7dea8(0x1f0)]);}if(_0x3cafce[_0xb7dea8(0x28a)]===0x0){console['log']('No\x20results\x20found\x20for\x20this\x20page');_0x48b6df===_0xb7dea8(0x2ac)&&(previewState[_0xb7dea8(0x286)]=_0x385bc5,updatePreviewPaginationControls(![]));_0x239071[_0xb7dea8(0x2d4)]=_0xb7dea8(0x2ba)+(previewState[_0xb7dea8(0x23a)]?_0xb7dea8(0x260):'')+_0xb7dea8(0x2ae),setPreviewLoadingState(![]);return;}previewState[_0xb7dea8(0x2bb)]=_0x3cafce[0x0],previewState[_0xb7dea8(0x26a)]=_0x3cafce[_0x3cafce[_0xb7dea8(0x28a)]-0x1];const _0x5ea0a4=_0x3cafce[_0xb7dea8(0x2d5)](_0x4bff91=>({'id':_0x4bff91['id'],..._0x4bff91[_0xb7dea8(0x2fb)]()}));let _0x379ebf=![];if(_0x3cafce['length']===previewState[_0xb7dea8(0x1f0)]){const _0x554a7f=query(_0x335bcb,orderBy(_0x3f0c42,_0xb7dea8(0x1f4)),startAfter(previewState['lastVisible']),limit(0x1)),_0xc062ff=await getDocs(_0x554a7f);_0x379ebf=!_0xc062ff[_0xb7dea8(0x27f)];}const _0x2dd6c5=applyClientFilters(_0x5ea0a4),_0x392297={'docsData':_0x5ea0a4,'hasNextPage':_0x379ebf};cachePage(getCacheKey(previewState['currentMode'],previewState[_0xb7dea8(0x286)],_0x4404bb),_0x392297);if(_0x365f1f>0x1&&_0x48b6df!==_0xb7dea8(0x2ac))for(let _0x1f8568=0x1;_0x1f8568<_0x365f1f;_0x1f8568++){const _0x4c48bb=(_0x1f8568-0x1)*previewState[_0xb7dea8(0x1f0)],_0x8e4abb=_0x4c48bb+previewState['matchesPerPage'],_0x54e886=_0x545384[_0xb7dea8(0x2d7)][_0xb7dea8(0x257)](_0x4c48bb,_0x8e4abb);if(_0x54e886['length']>0x0){const _0x37d718=_0x54e886[_0xb7dea8(0x2d5)](_0x55ae03=>({'id':_0x55ae03['id'],..._0x55ae03[_0xb7dea8(0x2fb)]()})),_0x7d56ca=!![];cachePage(getCacheKey(previewState[_0xb7dea8(0x1ec)],_0x1f8568,_0x4404bb),{'docsData':_0x37d718,'hasNextPage':_0x7d56ca}),console[_0xb7dea8(0x303)](_0xb7dea8(0x24f)+_0x1f8568);}}_0x2dd6c5['length']===0x0&&previewState[_0xb7dea8(0x23a)]?_0x239071[_0xb7dea8(0x2d4)]=_0xb7dea8(0x1db)+previewState['filterUsername']+_0xb7dea8(0x250):renderMatchCards(_0x2dd6c5),updatePreviewPaginationControls(_0x379ebf);}catch(_0x24d269){console['error'](_0xb7dea8(0x297)+previewState[_0xb7dea8(0x1ec)]+'\x20matches:',_0x24d269),_0x239071['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x24d269['message']+_0xb7dea8(0x205),updatePreviewPaginationControls(![]),previewState[_0xb7dea8(0x286)]=_0x385bc5;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x25c7ee){const _0x145ffa=a6_0x244cb5,_0x41f76c=document[_0x145ffa(0x2e6)](_0x145ffa(0x1cb)),_0x25f1d1=document[_0x145ffa(0x2e6)](_0x145ffa(0x224));if(!_0x41f76c||!_0x25f1d1)return;!_0x41f76c[_0x145ffa(0x230)](_0x145ffa(0x2ea))&&(_0x41f76c[_0x145ffa(0x2d4)]='');if(!_0x25c7ee||_0x25c7ee['length']===0x0){if(!_0x41f76c[_0x145ffa(0x230)]('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x14c43c=hasEnhancedFilters()?_0x145ffa(0x260):previewState[_0x145ffa(0x23a)]?'\x20matching\x20filters':'';_0x41f76c['innerHTML']=_0x145ffa(0x2e7)+_0x14c43c+_0x145ffa(0x2ae);}return;}const _0x123aa1=applyEnhancedClientFilters(_0x25c7ee);if(_0x123aa1['length']===0x0){_0x41f76c[_0x145ffa(0x2d4)]=_0x145ffa(0x2e3);return;}const _0x55b036=_0x123aa1[_0x145ffa(0x2d5)](_0xe9a6ae=>getAllCommentsForMatch(_0xe9a6ae['id']));let _0x2fcc32=[];try{_0x2fcc32=await Promise[_0x145ffa(0x262)](_0x55b036);}catch(_0x35e784){console[_0x145ffa(0x1d6)](_0x145ffa(0x2e9),_0x35e784),_0x2fcc32=_0x123aa1[_0x145ffa(0x2d5)](()=>[]);}const _0x23d2d8={};_0x2fcc32[_0x145ffa(0x2fc)]((_0x1a79ac,_0x37803c)=>{_0x23d2d8[_0x123aa1[_0x37803c]['id']]=_0x1a79ac||[];}),_0x123aa1['forEach'](_0xeddc8b=>{const _0x36f7c6=_0x145ffa,_0x318dce=_0x25f1d1[_0x36f7c6(0x22f)]['cloneNode'](!![]),_0x42514c=_0x318dce[_0x36f7c6(0x230)](_0x36f7c6(0x1ee)),_0x1ef3cc=_0x318dce['querySelector'](_0x36f7c6(0x1f8)),_0x219422=getEloRankClass(_0xeddc8b[_0x36f7c6(0x308)]);_0x1ef3cc[_0x36f7c6(0x29a)][_0x36f7c6(0x2db)](_0x36f7c6(0x21b)+_0x219422),_0x1ef3cc[_0x36f7c6(0x230)]('.match-map')[_0x36f7c6(0x2bf)]=_0xeddc8b['mapPlayed']||_0x36f7c6(0x21a),_0x1ef3cc[_0x36f7c6(0x230)]('.match-date')['textContent']=formatDate(_0xeddc8b['approvedAt']||_0xeddc8b[_0x36f7c6(0x1d2)]);const _0x238a8c=_0x1ef3cc[_0x36f7c6(0x230)](_0x36f7c6(0x2fd));_0x238a8c[_0x36f7c6(0x2bf)]=_0xeddc8b[_0x36f7c6(0x251)]||'Unknown',_0x238a8c['style'][_0x36f7c6(0x1f2)]=getEloColor(_0xeddc8b['winnerOldElo']),_0x1ef3cc[_0x36f7c6(0x230)](_0x36f7c6(0x22d))[_0x36f7c6(0x2bf)]=_0xeddc8b[_0x36f7c6(0x21f)]??0x0;const _0x1c031f=_0x1ef3cc[_0x36f7c6(0x230)]('.player.winner\x20.player-suicides'),_0x398ac8=_0xeddc8b[_0x36f7c6(0x2d6)]||0x0;_0x1c031f[_0x36f7c6(0x2bf)]=_0x36f7c6(0x2ca)+_0x398ac8;const _0x461b9a=_0x1ef3cc[_0x36f7c6(0x230)](_0x36f7c6(0x1fe));_0x461b9a[_0x36f7c6(0x2bf)]=_0xeddc8b[_0x36f7c6(0x2ff)]||_0x36f7c6(0x2be),_0x461b9a[_0x36f7c6(0x1d3)]['color']=getEloColor(_0xeddc8b['loserOldElo']),_0x1ef3cc[_0x36f7c6(0x230)]('.player.loser\x20.player-score')[_0x36f7c6(0x2bf)]=_0xeddc8b[_0x36f7c6(0x291)]??0x0;const _0xc5309d=_0x1ef3cc[_0x36f7c6(0x230)](_0x36f7c6(0x2a3)),_0x181da7=_0xeddc8b['loserSuicides']||0x0;_0xc5309d[_0x36f7c6(0x2bf)]=_0x36f7c6(0x2ca)+_0x181da7;const _0x1ec491=_0x1ef3cc[_0x36f7c6(0x230)]('.match-subgame');if(_0x1ec491){if(_0xeddc8b[_0x36f7c6(0x206)]&&_0xeddc8b[_0x36f7c6(0x206)][_0x36f7c6(0x25d)]()!==''){_0x1ec491[_0x36f7c6(0x2bf)]=_0xeddc8b[_0x36f7c6(0x206)],_0x1ec491[_0x36f7c6(0x1d3)]['display']=_0x36f7c6(0x2f3);const _0x3e063d=getSubgameClass(_0xeddc8b[_0x36f7c6(0x206)]);_0x3e063d&&_0x1ec491['classList'][_0x36f7c6(0x2db)](_0x3e063d);}else _0x1ec491[_0x36f7c6(0x2bf)]=_0x36f7c6(0x1f3),_0x1ec491['style'][_0x36f7c6(0x305)]=_0x36f7c6(0x2f3),_0x1ec491[_0x36f7c6(0x1d3)]['opacity']=_0x36f7c6(0x1f5);}const _0x283d68=_0x1ef3cc[_0x36f7c6(0x230)](_0x36f7c6(0x2e0)),_0x205c1b=_0x1ef3cc[_0x36f7c6(0x230)](_0x36f7c6(0x2de)),_0x2d25f1=_0xeddc8b[_0x36f7c6(0x228)]||'',_0x2ce6e3=_0xeddc8b['loserComment']||'',_0x57f47d=_0xeddc8b[_0x36f7c6(0x235)]||_0xeddc8b['createdAt'],_0xa4e25f=filterComment(_0x2d25f1,_0xeddc8b[_0x36f7c6(0x251)],_0x57f47d),_0x509a64=filterComment(_0x2ce6e3,_0xeddc8b[_0x36f7c6(0x2ff)],_0x57f47d);_0x283d68[_0x36f7c6(0x2bf)]='\x22'+truncateComment(_0x2d25f1)+'\x22',_0x205c1b['textContent']='\x22'+truncateComment(_0x2ce6e3)+'\x22';_0x2d25f1&&!isUsernameMuted(_0xeddc8b[_0x36f7c6(0x251)],_0x57f47d)?_0x283d68[_0x36f7c6(0x221)]=()=>showPreviewCommentPopup(_0xa4e25f,_0xeddc8b[_0x36f7c6(0x251)]||_0x36f7c6(0x29f),getEloColor(_0xeddc8b[_0x36f7c6(0x308)])):(_0x283d68[_0x36f7c6(0x2bf)]=_0xa4e25f==='Muted.'?_0x36f7c6(0x2a7):'-',_0x283d68[_0x36f7c6(0x1d3)][_0x36f7c6(0x265)]=_0x36f7c6(0x226),_0x283d68['onclick']=null);_0x2ce6e3&&!isUsernameMuted(_0xeddc8b['loserUsername'])?_0x205c1b[_0x36f7c6(0x221)]=()=>showPreviewCommentPopup(_0x509a64,_0xeddc8b[_0x36f7c6(0x2ff)]||_0x36f7c6(0x1e0),getEloColor(_0xeddc8b[_0x36f7c6(0x2c6)])):(_0x205c1b['textContent']=_0x509a64==='Muted.'?'Muted.':'-',_0x205c1b['style'][_0x36f7c6(0x265)]='default',_0x205c1b[_0x36f7c6(0x221)]=null);const _0x104607=_0x42514c?.[_0x36f7c6(0x230)]('.community-comments-section');if(!_0x104607)console[_0x36f7c6(0x2cd)](_0x36f7c6(0x290));else{const _0x1ac4e4=_0x104607[_0x36f7c6(0x230)]('.comments-container'),_0x35034c=_0x1ac4e4?.['querySelector'](_0x36f7c6(0x2b7)),_0x15a948=_0x104607[_0x36f7c6(0x230)](_0x36f7c6(0x1c4));if(_0x1ac4e4){while(_0x1ac4e4[_0x36f7c6(0x29d)]&&_0x1ac4e4[_0x36f7c6(0x29d)]!==_0x35034c){_0x1ac4e4['removeChild'](_0x1ac4e4[_0x36f7c6(0x29d)]);}_0x15a948&&_0x15a948[_0x36f7c6(0x1d4)](_0x36f7c6(0x2ab),()=>{showAddCommentPopup(_0xeddc8b['id']);});const _0x305adf=_0x23d2d8[_0xeddc8b['id']]||[];if(_0x305adf[_0x36f7c6(0x28a)]>0x0){if(_0x35034c)_0x35034c[_0x36f7c6(0x1d3)][_0x36f7c6(0x305)]='none';const _0x340885=(_0x42c205,_0x17fa28)=>{const _0x3674c3=_0x36f7c6,_0x1c6bf7=_0x42c205[_0x3674c3(0x2d8)]('\x20');if(_0x1c6bf7[_0x3674c3(0x28a)]<=_0x17fa28)return _0x42c205;return _0x1c6bf7[_0x3674c3(0x257)](0x0,_0x17fa28)['join']('\x20')+_0x3674c3(0x2c7);};_0x305adf[_0x36f7c6(0x2fc)](_0x413bbd=>{const _0x149a10=_0x36f7c6,_0x1b65ac=document['createElement'](_0x149a10(0x1f7));if(_0x413bbd[_0x149a10(0x1c9)]==='demo'){_0x1b65ac[_0x149a10(0x249)]='demo-link',_0x1b65ac[_0x149a10(0x2d4)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x413bbd[_0x149a10(0x2a0)]+_0x149a10(0x2f6)+_0x413bbd[_0x149a10(0x239)]+_0x149a10(0x233)+(_0x413bbd[_0x149a10(0x299)]||_0x149a10(0x2dd))+_0x149a10(0x2cf);const _0x21fda5=window['auth'][_0x149a10(0x2fe)],_0x12baf6=_0x21fda5&&_0x413bbd[_0x149a10(0x274)]===_0x21fda5[_0x149a10(0x214)];if(_0x12baf6){const _0x4d42c9=document[_0x149a10(0x2c1)](_0x149a10(0x26f));_0x4d42c9[_0x149a10(0x249)]='delete-comment-btn',_0x4d42c9['innerHTML']='×',_0x4d42c9['setAttribute']('aria-label',_0x149a10(0x21d)),_0x4d42c9['addEventListener'](_0x149a10(0x2ab),_0x58d2d8=>{const _0x14356f=_0x149a10;_0x58d2d8[_0x14356f(0x301)](),_0x58d2d8[_0x14356f(0x26b)](),deleteComment(_0x413bbd['id'],_0x1b65ac);}),_0x1b65ac['appendChild'](_0x4d42c9);}}else{_0x1b65ac[_0x149a10(0x249)]=_0x149a10(0x245);const _0x5c0ac5=isUsernameMuted(_0x413bbd['username'],_0x413bbd[_0x149a10(0x28c)]),_0x2bfe1f=_0x5c0ac5?_0x149a10(0x2a7):_0x340885(_0x413bbd[_0x149a10(0x1d1)]||'',0xf),_0xbd4acf=_0x413bbd['username']||_0x149a10(0x232),_0x7d7850=window[_0x149a10(0x283)][_0x149a10(0x2fe)],_0x1b2a48=_0x7d7850&&_0x413bbd[_0x149a10(0x274)]===_0x7d7850[_0x149a10(0x214)];let _0x39a0dc='';_0x1b2a48&&(_0x39a0dc=_0x149a10(0x269));_0x1b65ac[_0x149a10(0x2d4)]=_0x39a0dc+_0x149a10(0x255)+_0xbd4acf+_0x149a10(0x287)+_0x2bfe1f+'\x22';if(_0x1b2a48){const _0x19a57c=_0x1b65ac[_0x149a10(0x230)]('.delete-comment-btn');_0x19a57c&&_0x19a57c[_0x149a10(0x1d4)](_0x149a10(0x2ab),_0x4ccec9=>{const _0x2ae505=_0x149a10;_0x4ccec9[_0x2ae505(0x26b)](),deleteComment(_0x413bbd['id'],_0x1b65ac);});}!_0x5c0ac5?_0x1b65ac['addEventListener'](_0x149a10(0x2ab),()=>{showFullCommentLightbox(_0x413bbd);}):_0x1b65ac[_0x149a10(0x1d3)][_0x149a10(0x265)]=_0x149a10(0x226);}_0x1ac4e4[_0x149a10(0x2e5)](_0x1b65ac,_0x1ac4e4['firstChild']);});}else{if(_0x35034c)_0x35034c[_0x36f7c6(0x1d3)]['display']=_0x36f7c6(0x2f3);}}}const _0x50d288=_0x1ef3cc['querySelector'](_0x36f7c6(0x209));if(_0x50d288){const _0x48a21=_0x1ef3cc['querySelector']('.winner-demo-link'),_0x264bee=_0x1ef3cc[_0x36f7c6(0x230)](_0x36f7c6(0x2f0)),_0x4bf0b8=_0xeddc8b[_0x36f7c6(0x2cb)]||null,_0x35b564=_0xeddc8b[_0x36f7c6(0x1c0)]||_0xeddc8b[_0x36f7c6(0x2a0)]||null;console[_0x36f7c6(0x303)](_0x36f7c6(0x277)+_0xeddc8b['id']+_0x36f7c6(0x289),{'winner':_0x4bf0b8,'loser':_0x35b564}),_0x48a21&&(_0x4bf0b8?(_0x48a21[_0x36f7c6(0x2b6)]=_0x4bf0b8,_0x48a21[_0x36f7c6(0x1d3)][_0x36f7c6(0x305)]='flex',_0x48a21[_0x36f7c6(0x2b9)]=_0xeddc8b['winnerUsername']+_0x36f7c6(0x2d9)):_0x48a21[_0x36f7c6(0x1d3)][_0x36f7c6(0x305)]=_0x36f7c6(0x20f)),_0x264bee&&(_0x35b564?(_0x264bee[_0x36f7c6(0x2b6)]=_0x35b564,_0x264bee[_0x36f7c6(0x1d3)][_0x36f7c6(0x305)]=_0x36f7c6(0x203),_0x264bee[_0x36f7c6(0x2b9)]=_0xeddc8b[_0x36f7c6(0x2ff)]+_0x36f7c6(0x2d9)):_0x264bee['style']['display']=_0x36f7c6(0x20f)),_0x4bf0b8&&_0x48a21||_0x35b564&&_0x264bee?_0x50d288['style'][_0x36f7c6(0x305)]='flex':_0x50d288['style'][_0x36f7c6(0x305)]=_0x36f7c6(0x20f);}_0x41f76c['appendChild'](_0x318dce);});}function getSubgameClass(_0x1e3a81){const _0x224caf=a6_0x244cb5,_0x4912da={'Fusion\x20Match':_0x224caf(0x2a2),'≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':_0x224caf(0x2cc),'Weapon\x20Imbalance':_0x224caf(0x273),'Blind\x20Match':_0x224caf(0x23e),'Rematch':'rematch','Disorientation':_0x224caf(0x2f8),'Ratting':_0x224caf(0x2af),'Altered\x20Powerups':_0x224caf(0x26e),'Mega\x20Match':_0x224caf(0x2b1),'Dogfight':_0x224caf(0x28d),'Gauss\x20and\x20Mercs':_0x224caf(0x29c)};return _0x4912da[_0x1e3a81]||'';}async function deleteComment(_0x29e042,_0x1ec266){const _0x5f4a4d=a6_0x244cb5,_0x2d37b6=window[_0x5f4a4d(0x283)][_0x5f4a4d(0x2fe)];if(!_0x2d37b6){alert(_0x5f4a4d(0x294));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x5bb07d=doc(window['db'],_0x5f4a4d(0x2e2),_0x29e042),_0x2fa310=await getDoc(_0x5bb07d);if(!_0x2fa310[_0x5f4a4d(0x229)]()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x4a8198=_0x2fa310['data']();if(_0x4a8198[_0x5f4a4d(0x274)]!==_0x2d37b6[_0x5f4a4d(0x214)]){alert(_0x5f4a4d(0x304));return;}await deleteDoc(_0x5bb07d);if(_0x1ec266&&_0x1ec266[_0x5f4a4d(0x1c6)]){_0x1ec266[_0x5f4a4d(0x1c6)][_0x5f4a4d(0x234)](_0x1ec266);const _0x17b219=_0x1ec266[_0x5f4a4d(0x20d)](_0x5f4a4d(0x20c));if(_0x17b219&&!_0x17b219['querySelector'](_0x5f4a4d(0x2f9))){const _0x40017e=_0x17b219['querySelector'](_0x5f4a4d(0x2b7));if(_0x40017e)_0x40017e['style'][_0x5f4a4d(0x305)]=_0x5f4a4d(0x2f3);}}console[_0x5f4a4d(0x303)](_0x5f4a4d(0x2a1));}catch(_0x227860){console['error'](_0x5f4a4d(0x22b),_0x227860),alert(_0x5f4a4d(0x1e2)+_0x227860[_0x5f4a4d(0x1eb)]);}}async function getAllCommentsForMatch(_0x1a82e0){const _0x58559b=a6_0x244cb5;if(!_0x1a82e0)return[];try{const _0x3cf91d=collection(window['db'],'matchComments'),_0x4663d7=query(_0x3cf91d,where('matchId','==',_0x1a82e0),orderBy(_0x58559b(0x28c),_0x58559b(0x1f4))),_0x11576e=await getDocs(_0x4663d7);if(_0x11576e[_0x58559b(0x27f)])return[];return _0x11576e[_0x58559b(0x2d7)]['map'](_0x5bacfc=>({'id':_0x5bacfc['id'],..._0x5bacfc[_0x58559b(0x2fb)]()}));}catch(_0x1de6e6){return console[_0x58559b(0x1d6)](_0x58559b(0x1d5),_0x1de6e6),[];}}async function submitComment(_0x246b75){const _0x27fdb6=a6_0x244cb5;_0x246b75[_0x27fdb6(0x301)]();if(!window[_0x27fdb6(0x283)]||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert(_0x27fdb6(0x1e5));return;}const _0x1f8d0f=window['auth'][_0x27fdb6(0x2fe)];if(!_0x1f8d0f){alert(_0x27fdb6(0x2f7));return;}const _0x9b70ca=document[_0x27fdb6(0x2e6)]('commentMatchId')?.[_0x27fdb6(0x238)],_0x9f3716=document[_0x27fdb6(0x2e6)](_0x27fdb6(0x29b))?.[_0x27fdb6(0x238)]?.['trim']();if(!_0x9b70ca||!_0x9f3716){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x38001e=_0x9f3716[_0x27fdb6(0x2d8)](/\s+/)[_0x27fdb6(0x306)](_0x458582=>_0x458582[_0x27fdb6(0x28a)]>0x0)['length'];if(_0x38001e>0xf){alert(_0x27fdb6(0x23d));return;}const _0x40a3c5=document['querySelector'](_0x27fdb6(0x2f4));_0x40a3c5&&(_0x40a3c5[_0x27fdb6(0x2f5)]=!![],_0x40a3c5[_0x27fdb6(0x2bf)]='Submitting...');try{let _0x18cfe4=_0x27fdb6(0x232);try{const _0x389872=doc(window['db'],_0x27fdb6(0x1bd),_0x1f8d0f[_0x27fdb6(0x214)]),_0x46dd41=await getDoc(_0x389872);if(_0x46dd41[_0x27fdb6(0x229)]()){const _0x5829e8=_0x46dd41['data']();_0x5829e8[_0x27fdb6(0x239)]&&(_0x18cfe4=_0x5829e8[_0x27fdb6(0x239)]);}_0x18cfe4===_0x27fdb6(0x232)&&_0x1f8d0f[_0x27fdb6(0x1df)]&&(_0x18cfe4=_0x1f8d0f[_0x27fdb6(0x1df)]);}catch(_0x48d58f){console[_0x27fdb6(0x2cd)]('Failed\x20to\x20fetch\x20user\x20profile:',_0x48d58f),_0x1f8d0f[_0x27fdb6(0x1df)]&&(_0x18cfe4=_0x1f8d0f[_0x27fdb6(0x1df)]);}const _0x1d917b={'matchId':_0x9b70ca,'userId':_0x1f8d0f[_0x27fdb6(0x214)],'username':_0x18cfe4,'text':_0x9f3716,'timestamp':serverTimestamp()};console['log'](_0x27fdb6(0x202),_0x18cfe4);const _0x579fdc=collection(window['db'],'matchComments');await addDoc(_0x579fdc,_0x1d917b),console['log'](_0x27fdb6(0x1e8)),closeAddCommentPopup(),loadRecentMatchesPreview(_0x27fdb6(0x220));}catch(_0x39331f){console[_0x27fdb6(0x1d6)]('Error\x20submitting\x20comment:',_0x39331f),alert(_0x27fdb6(0x2ec)+_0x39331f[_0x27fdb6(0x1eb)]),_0x40a3c5&&(_0x40a3c5[_0x27fdb6(0x2f5)]=![],_0x40a3c5[_0x27fdb6(0x2bf)]='Submit');}}function closeAddCommentPopup(){const _0x1a4bae=a6_0x244cb5,_0x1dff55=document[_0x1a4bae(0x2e6)]('commentAddPopup'),_0x4f97a9=document[_0x1a4bae(0x2e6)](_0x1a4bae(0x270));if(_0x1dff55)_0x1dff55[_0x1a4bae(0x1d3)]['display']='none';if(_0x4f97a9)_0x4f97a9[_0x1a4bae(0x1d3)][_0x1a4bae(0x305)]='none';}function showAddCommentPopup(_0x948f44){const _0x3c03e9=a6_0x244cb5,_0x3f8731=window[_0x3c03e9(0x283)]['currentUser'];if(!_0x3f8731){alert(_0x3c03e9(0x236));return;}let _0x17547f=document[_0x3c03e9(0x2e6)]('commentAddPopup'),_0x3bc414=document[_0x3c03e9(0x2e6)](_0x3c03e9(0x270));!_0x17547f&&(_0x17547f=document[_0x3c03e9(0x2c1)]('div'),_0x17547f['id']='commentAddPopup',_0x17547f['className']='comment-popup',document['body'][_0x3c03e9(0x211)](_0x17547f));!_0x3bc414&&(_0x3bc414=document[_0x3c03e9(0x2c1)](_0x3c03e9(0x1f7)),_0x3bc414['id']='commentAddOverlay',_0x3bc414[_0x3c03e9(0x249)]=_0x3c03e9(0x2c4),document['body'][_0x3c03e9(0x211)](_0x3bc414));_0x17547f[_0x3c03e9(0x2d4)]=_0x3c03e9(0x1bf)+_0x948f44+_0x3c03e9(0x2bd),_0x17547f[_0x3c03e9(0x1d3)][_0x3c03e9(0x305)]='block',_0x3bc414[_0x3c03e9(0x1d3)]['display']=_0x3c03e9(0x2f3),document[_0x3c03e9(0x2e6)](_0x3c03e9(0x27e))['addEventListener'](_0x3c03e9(0x2ab),closeAddCommentPopup),_0x3bc414[_0x3c03e9(0x1d4)](_0x3c03e9(0x2ab),closeAddCommentPopup);const _0x1ae066=_0x17547f[_0x3c03e9(0x302)](_0x3c03e9(0x27d));_0x1ae066[_0x3c03e9(0x2fc)](_0x26c9bb=>{const _0x1acfac=_0x3c03e9;_0x26c9bb['addEventListener'](_0x1acfac(0x2ab),function(){const _0xa42206=_0x1acfac;_0x1ae066[_0xa42206(0x2fc)](_0x2e302e=>_0x2e302e[_0xa42206(0x29a)][_0xa42206(0x298)](_0xa42206(0x2c0))),document[_0xa42206(0x302)](_0xa42206(0x2ad))[_0xa42206(0x2fc)](_0x505aaf=>_0x505aaf[_0xa42206(0x1d3)][_0xa42206(0x305)]=_0xa42206(0x20f)),this[_0xa42206(0x29a)][_0xa42206(0x2db)](_0xa42206(0x2c0));const _0x27ee08=this[_0xa42206(0x2dc)][_0xa42206(0x2a6)];document[_0xa42206(0x2e6)](_0x27ee08+'Option')[_0xa42206(0x1d3)]['display']=_0xa42206(0x2f3),_0x27ee08===_0xa42206(0x295)?(document[_0xa42206(0x2e6)](_0xa42206(0x2a0))['setAttribute']('required',''),document[_0xa42206(0x2e6)](_0xa42206(0x29b))['removeAttribute'](_0xa42206(0x263))):(document['getElementById'](_0xa42206(0x2a0))[_0xa42206(0x1fa)](_0xa42206(0x263)),document[_0xa42206(0x2e6)]('commentText')[_0xa42206(0x241)]('required',''));});}),document[_0x3c03e9(0x2e6)](_0x3c03e9(0x29b))[_0x3c03e9(0x241)](_0x3c03e9(0x263),''),document[_0x3c03e9(0x2e6)](_0x3c03e9(0x2a0))[_0x3c03e9(0x1fa)](_0x3c03e9(0x263)),setupWordCounter(_0x3c03e9(0x29b),_0x3c03e9(0x208),0xf),setupWordCounter(_0x3c03e9(0x272),_0x3c03e9(0x307),0x14),document[_0x3c03e9(0x2e6)](_0x3c03e9(0x223))['addEventListener'](_0x3c03e9(0x271),submitCommentOrDemo);}function setupWordCounter(_0x3b6dd6,_0x3d17fd,_0x474b5f){const _0x5a6289=a6_0x244cb5,_0x1ec300=document['getElementById'](_0x3b6dd6),_0xa09014=document[_0x5a6289(0x2e6)](_0x3d17fd);if(!_0x1ec300||!_0xa09014)return;_0x174d43(),_0x1ec300[_0x5a6289(0x1d4)](_0x5a6289(0x20a),_0x174d43);function _0x174d43(){const _0x445220=_0x5a6289,_0x17b71a=_0x1ec300[_0x445220(0x238)][_0x445220(0x25d)](),_0x36c843=_0x17b71a?_0x17b71a['split'](/\s+/)[_0x445220(0x306)](_0x1b35fd=>_0x1b35fd[_0x445220(0x28a)]>0x0)['length']:0x0;_0xa09014[_0x445220(0x2bf)]=_0x36c843,_0x36c843>_0x474b5f?_0xa09014['style'][_0x445220(0x1f2)]=_0x445220(0x26c):_0xa09014['style'][_0x445220(0x1f2)]='#aaa';}}async function submitCommentOrDemo(_0x46f126){const _0x12845a=a6_0x244cb5;_0x46f126[_0x12845a(0x301)]();if(!window[_0x12845a(0x283)]||!window['db']){console[_0x12845a(0x1d6)]('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x869129=window[_0x12845a(0x283)][_0x12845a(0x2fe)];if(!_0x869129){alert(_0x12845a(0x2df));return;}const _0x1c4249=document['getElementById']('commentMatchId')[_0x12845a(0x238)],_0x777d3b=document[_0x12845a(0x230)](_0x12845a(0x2aa))[_0x12845a(0x2dc)][_0x12845a(0x2a6)];let _0x1d2039='Anonymous';try{const _0x59913b=doc(window['db'],_0x12845a(0x1bd),_0x869129['uid']),_0x406402=await getDoc(_0x59913b);if(_0x406402[_0x12845a(0x229)]()){const _0x2574c9=_0x406402['data']();_0x2574c9[_0x12845a(0x239)]&&(_0x1d2039=_0x2574c9[_0x12845a(0x239)]);}_0x1d2039==='Anonymous'&&_0x869129[_0x12845a(0x1df)]&&(_0x1d2039=_0x869129[_0x12845a(0x1df)]);}catch(_0x191b25){console[_0x12845a(0x2cd)](_0x12845a(0x1fb),_0x191b25),_0x869129[_0x12845a(0x1df)]&&(_0x1d2039=_0x869129['displayName']);}const _0xafb167=document[_0x12845a(0x230)](_0x12845a(0x2f4));_0xafb167&&(_0xafb167['disabled']=!![],_0xafb167[_0x12845a(0x2bf)]=_0x12845a(0x2b0));try{if(_0x777d3b==='comment'){const _0x52059d=document[_0x12845a(0x2e6)](_0x12845a(0x29b))[_0x12845a(0x238)][_0x12845a(0x25d)]();if(!_0x52059d){alert(_0x12845a(0x292)),_0xafb167['disabled']=![],_0xafb167[_0x12845a(0x2bf)]=_0x12845a(0x27a);return;}const _0x360cf0=_0x52059d[_0x12845a(0x2d8)](/\s+/)[_0x12845a(0x306)](_0x545a11=>_0x545a11[_0x12845a(0x28a)]>0x0)[_0x12845a(0x28a)];if(_0x360cf0>0xf){alert(_0x12845a(0x23d)),_0xafb167['disabled']=![],_0xafb167[_0x12845a(0x2bf)]=_0x12845a(0x27a);return;}const _0x513671={'matchId':_0x1c4249,'userId':_0x869129['uid'],'username':_0x1d2039,'text':_0x52059d,'type':'comment','timestamp':serverTimestamp()},_0x278f60=collection(window['db'],_0x12845a(0x2e2));await addDoc(_0x278f60,_0x513671);}else{const _0x99b804=document[_0x12845a(0x2e6)]('demoLink')[_0x12845a(0x238)]['trim'](),_0x248c5c=document[_0x12845a(0x2e6)](_0x12845a(0x272))[_0x12845a(0x238)][_0x12845a(0x25d)]()||_0x12845a(0x2d2);if(!_0x99b804){alert(_0x12845a(0x1dd)),_0xafb167['disabled']=![],_0xafb167['textContent']='Submit';return;}try{new URL(_0x99b804);}catch(_0x1f0bd9){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0xafb167[_0x12845a(0x2f5)]=![],_0xafb167[_0x12845a(0x2bf)]=_0x12845a(0x27a);return;}const _0x45250b=_0x248c5c[_0x12845a(0x2d8)](/\s+/)['filter'](_0x8f84fe=>_0x8f84fe[_0x12845a(0x28a)]>0x0)[_0x12845a(0x28a)];if(_0x45250b>0x14){alert(_0x12845a(0x1ed)),_0xafb167[_0x12845a(0x2f5)]=![],_0xafb167['textContent']=_0x12845a(0x27a);return;}const _0x21e875={'matchId':_0x1c4249,'userId':_0x869129[_0x12845a(0x214)],'username':_0x1d2039,'demoLink':_0x99b804,'description':_0x248c5c,'type':_0x12845a(0x295),'text':_0x12845a(0x258)+_0x248c5c,'timestamp':serverTimestamp()},_0x3bef4c=collection(window['db'],'matchComments');await addDoc(_0x3bef4c,_0x21e875);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x8e7b0){console['error'](_0x12845a(0x29e),_0x8e7b0),alert(_0x12845a(0x240)+_0x8e7b0[_0x12845a(0x1eb)]),_0xafb167&&(_0xafb167[_0x12845a(0x2f5)]=![],_0xafb167[_0x12845a(0x2bf)]='Submit');}}function getEloRankClass(_0x566c15){const _0x2816d8=a6_0x244cb5,_0x406212=Number(_0x566c15);if(_0x406212>=0x7d0)return _0x2816d8(0x275);else{if(_0x406212>=0x708)return _0x2816d8(0x1c3);else{if(_0x406212>=0x640)return _0x2816d8(0x201);else{if(_0x406212>=0x578)return _0x2816d8(0x2bc);else return _0x2816d8(0x28b);}}}}function showPreviewCommentPopup(_0x24016c,_0x22f48e,_0x265665=a6_0x244cb5(0x1d8)){const _0x1123fd=a6_0x244cb5,_0x4b979c=document[_0x1123fd(0x2e6)](_0x1123fd(0x278)),_0x577226=document[_0x1123fd(0x2e6)]('commentOverlayPreview'),_0x5c5e56=document['getElementById'](_0x1123fd(0x216)),_0x130286=document[_0x1123fd(0x2e6)]('commentPopupContentPreview'),_0x4a14cc=document[_0x1123fd(0x2e6)]('reportCommentButton');if(!_0x4b979c||!_0x577226||!_0x5c5e56||!_0x130286||!_0x4a14cc)return;_0x4b979c[_0x1123fd(0x2dc)][_0x1123fd(0x29b)]=_0x24016c,_0x4b979c[_0x1123fd(0x2dc)][_0x1123fd(0x2ce)]=_0x22f48e,_0x5c5e56[_0x1123fd(0x1d3)]['color']=_0x265665,_0x5c5e56[_0x1123fd(0x2bf)]=_0x1123fd(0x288)+_0x22f48e,_0x130286[_0x1123fd(0x2bf)]=_0x24016c,_0x4a14cc[_0x1123fd(0x221)]=reportComment,_0x4b979c[_0x1123fd(0x1d3)][_0x1123fd(0x305)]=_0x1123fd(0x2f3),_0x577226['style'][_0x1123fd(0x305)]=_0x1123fd(0x2f3);}function closePreviewCommentPopup(){const _0x32655d=a6_0x244cb5,_0x5219f0=document[_0x32655d(0x2e6)](_0x32655d(0x278)),_0x33145e=document[_0x32655d(0x2e6)](_0x32655d(0x213));if(_0x5219f0)_0x5219f0[_0x32655d(0x1d3)][_0x32655d(0x305)]=_0x32655d(0x20f);if(_0x33145e)_0x33145e['style'][_0x32655d(0x305)]=_0x32655d(0x20f);}async function reportComment(){const _0x42f0d6=a6_0x244cb5,_0x262bd6=window['auth'][_0x42f0d6(0x2fe)];if(!_0x262bd6){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm(_0x42f0d6(0x237)))return;try{const _0x505016=document['getElementById'](_0x42f0d6(0x278)),_0x1a4f28={'commentAuthor':_0x505016[_0x42f0d6(0x2dc)]['commentUser']||_0x42f0d6(0x219),'commentText':_0x505016[_0x42f0d6(0x2dc)][_0x42f0d6(0x29b)]||'','matchId':previewState[_0x42f0d6(0x2b5)]||'','reportedBy':_0x262bd6[_0x42f0d6(0x214)],'reporterUsername':_0x262bd6['displayName']||_0x42f0d6(0x26d),'reportedAt':serverTimestamp()},_0x487870=collection(window['db'],_0x42f0d6(0x2a5));await addDoc(_0x487870,_0x1a4f28),alert(_0x42f0d6(0x25a)),closePreviewCommentPopup();}catch(_0xf92b3){console[_0x42f0d6(0x1d6)]('Error\x20reporting\x20comment:',_0xf92b3),alert(_0x42f0d6(0x28f)+_0xf92b3[_0x42f0d6(0x1eb)]);}}function showFullCommentLightbox(_0x270d23){const _0x5afad4=a6_0x244cb5;if(isUsernameMuted(_0x270d23['username']))return;const _0x2254cd=document[_0x5afad4(0x2e6)]('commentPopupPreview'),_0xf51fc5=document[_0x5afad4(0x2e6)](_0x5afad4(0x213)),_0x454a9a=document[_0x5afad4(0x2e6)](_0x5afad4(0x216)),_0x105ffc=document['getElementById'](_0x5afad4(0x1e3));if(!_0x2254cd||!_0xf51fc5||!_0x454a9a||!_0x105ffc)return;_0x454a9a[_0x5afad4(0x1d3)][_0x5afad4(0x1f2)]=_0x5afad4(0x1d8),_0x454a9a[_0x5afad4(0x2bf)]=_0x5afad4(0x288)+_0x270d23[_0x5afad4(0x239)];if(_0x270d23[_0x5afad4(0x28c)]){const _0x150084=new Date(_0x270d23[_0x5afad4(0x28c)][_0x5afad4(0x242)]*0x3e8),_0x1730c9=_0x150084[_0x5afad4(0x24e)]();_0x105ffc[_0x5afad4(0x2d4)]='<p>'+_0x270d23[_0x5afad4(0x1d1)]+_0x5afad4(0x254)+_0x1730c9+'</small>';}else _0x105ffc[_0x5afad4(0x2bf)]=_0x270d23['text'];_0x2254cd[_0x5afad4(0x2dc)][_0x5afad4(0x2da)]=_0x270d23['id']||'',_0x2254cd[_0x5afad4(0x2dc)]['commentUser']=_0x270d23['username']||'',_0x2254cd[_0x5afad4(0x2dc)][_0x5afad4(0x29b)]=_0x270d23[_0x5afad4(0x1d1)]||'',_0x2254cd['dataset']['matchId']=_0x270d23[_0x5afad4(0x2d1)]||'';const _0x4574f6=_0x2254cd[_0x5afad4(0x230)](_0x5afad4(0x282))||document[_0x5afad4(0x2c1)]('div');!_0x2254cd['querySelector'](_0x5afad4(0x282))?(_0x4574f6[_0x5afad4(0x249)]=_0x5afad4(0x1e7),_0x4574f6[_0x5afad4(0x1d3)][_0x5afad4(0x305)]=_0x5afad4(0x203),_0x4574f6[_0x5afad4(0x1d3)][_0x5afad4(0x2e8)]='center',_0x4574f6['style'][_0x5afad4(0x248)]=_0x5afad4(0x2c5),_0x4574f6[_0x5afad4(0x1d3)]['marginTop']=_0x5afad4(0x267),_0x2254cd[_0x5afad4(0x211)](_0x4574f6)):_0x4574f6[_0x5afad4(0x2d4)]='';const _0x35edd2=document[_0x5afad4(0x2c1)]('button');_0x35edd2[_0x5afad4(0x2bf)]=_0x5afad4(0x24c),_0x35edd2['className']=_0x5afad4(0x1cf),_0x35edd2['id']=_0x5afad4(0x218),_0x35edd2[_0x5afad4(0x1d4)](_0x5afad4(0x2ab),closePreviewCommentPopup);const _0x4cab1d=document[_0x5afad4(0x2c1)]('button');_0x4cab1d[_0x5afad4(0x2bf)]='Report',_0x4cab1d[_0x5afad4(0x249)]=_0x5afad4(0x2ee),_0x4cab1d[_0x5afad4(0x1d3)][_0x5afad4(0x284)]='#d32f2f',_0x4cab1d[_0x5afad4(0x1d4)](_0x5afad4(0x2ab),reportComment),_0x4574f6[_0x5afad4(0x211)](_0x35edd2),_0x4574f6[_0x5afad4(0x211)](_0x4cab1d),_0x2254cd[_0x5afad4(0x1d3)][_0x5afad4(0x305)]=_0x5afad4(0x2f3),_0xf51fc5['style'][_0x5afad4(0x305)]='block';}export function setupPreviewEventListeners(){const _0x2d5bc0=a6_0x244cb5,_0x6b153b=document[_0x2d5bc0(0x2e6)]('previewPrevPage'),_0xed410=document['getElementById'](_0x2d5bc0(0x23b)),_0x21f0fa=document[_0x2d5bc0(0x2e6)]('preview-d1-button'),_0x26ed1f=document[_0x2d5bc0(0x2e6)](_0x2d5bc0(0x2b8)),_0x2b796b=document[_0x2d5bc0(0x2e6)](_0x2d5bc0(0x2d3)),_0xb1dbcb=document[_0x2d5bc0(0x2e6)]('filter-toggle-button'),_0x30ed39=document['getElementById']('enhanced-filter-section');if(!_0x6b153b||!_0xed410||!_0x21f0fa||!_0x26ed1f||!_0x2b796b||!_0xb1dbcb||!_0x30ed39){console[_0x2d5bc0(0x2cd)](_0x2d5bc0(0x281));return;}_0x6b153b[_0x2d5bc0(0x1d4)]('click',()=>{const _0x220e38=_0x2d5bc0;if(!_0x6b153b[_0x220e38(0x2f5)])loadRecentMatchesPreview(_0x220e38(0x261));}),_0xed410[_0x2d5bc0(0x1d4)](_0x2d5bc0(0x2ab),()=>{const _0x227d57=_0x2d5bc0;if(!_0xed410[_0x227d57(0x2f5)])loadRecentMatchesPreview(_0x227d57(0x2ac));}),_0x21f0fa[_0x2d5bc0(0x1d4)](_0x2d5bc0(0x2ab),()=>{const _0x25ae54=_0x2d5bc0;previewState[_0x25ae54(0x1ec)]!=='D1'&&!previewState[_0x25ae54(0x279)]&&(previewState[_0x25ae54(0x1ec)]='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x25ae54(0x220)));}),_0x26ed1f['addEventListener']('click',()=>{const _0x443cf8=_0x2d5bc0;previewState['currentMode']!=='D2'&&!previewState[_0x443cf8(0x279)]&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x443cf8(0x220)));}),_0x2b796b[_0x2d5bc0(0x1d4)]('click',()=>{const _0x546ee2=_0x2d5bc0;previewState[_0x546ee2(0x1ec)]!=='D3'&&!previewState['isLoading']&&(previewState[_0x546ee2(0x1ec)]='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0xb1dbcb&&_0x30ed39&&_0xb1dbcb[_0x2d5bc0(0x1d4)](_0x2d5bc0(0x2ab),()=>{const _0x331e78=_0x2d5bc0,_0x77829e=_0x30ed39[_0x331e78(0x1d3)][_0x331e78(0x305)]!==_0x331e78(0x20f);_0x30ed39['style']['display']=_0x77829e?'none':_0x331e78(0x2f3),_0xb1dbcb[_0x331e78(0x29a)][_0x331e78(0x1fd)]('active',!_0x77829e);});const _0x22468d=document[_0x2d5bc0(0x2e6)](_0x2d5bc0(0x1cc)),_0x4e9e20=document[_0x2d5bc0(0x2e6)](_0x2d5bc0(0x1d9));_0x22468d&&_0x22468d[_0x2d5bc0(0x1d4)](_0x2d5bc0(0x2ab),()=>{const _0x37e072=_0x2d5bc0;previewState[_0x37e072(0x2b2)][_0x37e072(0x252)]=document[_0x37e072(0x2e6)]('filter-pilots')[_0x37e072(0x238)][_0x37e072(0x25d)](),previewState[_0x37e072(0x2b2)][_0x37e072(0x2f1)]=document[_0x37e072(0x2e6)](_0x37e072(0x2a9))['value'][_0x37e072(0x25d)]();const _0x4941df=document[_0x37e072(0x2e6)]('filter-subgames');previewState[_0x37e072(0x2b2)]['subgames']=Array[_0x37e072(0x1ff)](_0x4941df[_0x37e072(0x21e)])[_0x37e072(0x2d5)](_0x5d8ff6=>_0x5d8ff6[_0x37e072(0x238)])['filter'](_0x1e8195=>_0x1e8195!==''),loadRecentMatchesPreview(_0x37e072(0x220));});_0x4e9e20&&_0x4e9e20[_0x2d5bc0(0x1d4)]('click',()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document[_0x2d5bc0(0x302)](_0x2d5bc0(0x21c))[_0x2d5bc0(0x2fc)](_0x337488=>{const _0x1e9ee2=_0x2d5bc0;_0x337488[_0x1e9ee2(0x1d4)](_0x1e9ee2(0x2ab),()=>{const _0x33556e=_0x1e9ee2,_0x4d75c0=_0x337488['dataset'][_0x33556e(0x293)];jumpToPage(_0x4d75c0);});});const _0x38689b=document[_0x2d5bc0(0x2e6)](_0x2d5bc0(0x1dc));_0x38689b&&_0x38689b['addEventListener'](_0x2d5bc0(0x2e4),_0x251244=>{const _0x43758a=_0x2d5bc0;_0x251244['key']===_0x43758a(0x23f)&&jumpToPage('input');});const _0x472f3b=document['getElementById'](_0x2d5bc0(0x218)),_0x1d6997=document['getElementById'](_0x2d5bc0(0x213));if(_0x472f3b)_0x472f3b[_0x2d5bc0(0x1d4)](_0x2d5bc0(0x2ab),closePreviewCommentPopup);if(_0x1d6997)_0x1d6997[_0x2d5bc0(0x1d4)](_0x2d5bc0(0x2ab),closePreviewCommentPopup);const _0x502169=document['getElementById']('closeAddCommentPopup'),_0x32a27a=document[_0x2d5bc0(0x2e6)](_0x2d5bc0(0x270)),_0x441937=document[_0x2d5bc0(0x2e6)](_0x2d5bc0(0x223));if(_0x502169)_0x502169[_0x2d5bc0(0x1d4)](_0x2d5bc0(0x2ab),closeAddCommentPopup);if(_0x32a27a)_0x32a27a['addEventListener'](_0x2d5bc0(0x2ab),closeAddCommentPopup);if(_0x441937)_0x441937[_0x2d5bc0(0x1d4)](_0x2d5bc0(0x271),submitComment);const _0xa0bf57=document[_0x2d5bc0(0x2e6)](_0x2d5bc0(0x29b)),_0x485b84=document[_0x2d5bc0(0x2e6)](_0x2d5bc0(0x208));_0xa0bf57&&_0x485b84&&setupWordCounter(_0x2d5bc0(0x29b),_0x2d5bc0(0x208),0xf);}window[a6_0x244cb5(0x2c2)]=showAddCommentPopup,window[a6_0x244cb5(0x27e)]=closeAddCommentPopup,window[a6_0x244cb5(0x1be)]=submitComment;