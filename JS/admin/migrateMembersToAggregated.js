function a1_0x414a(){const _0x2b4d01=['apply','constructor','profileImageUrl','\x20D3,\x20','log','table','elo','prototype','info','trace','set','\x20members\x20processed)','error','\x20non-participants','forEach','code','eloRating','players','ladders','__proto__','üì¶\x20Prepared\x20batch\x20','üì•\x20Fetching\x20all\x20collections...','country','commit','active','console','‚ùå\x20Migration\x20failed:','has','Unknown','emerald','üí°\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!','‚öôÔ∏è\x20Processed\x20','username','size','get','length'];a1_0x414a=function(){return _0x2b4d01;};return a1_0x414a();}import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);function a1_0x3353(_0x1f3833,_0x1c5234){const _0x35e673=a1_0x414a();return a1_0x3353=function(_0x57c16d,_0xd9b167){_0x57c16d=_0x57c16d-0x106;let _0x414a75=_0x35e673[_0x57c16d];return _0x414a75;},a1_0x3353(_0x1f3833,_0x1c5234);}async function migrateToAggregatedMembers(){const _0x88921d=a1_0x3353,_0x5aee24=(function(){let _0xc23a3e=!![];return function(_0x495afb,_0xc95d17){const _0x3ff363=_0xc23a3e?function(){const _0x528dd7=a1_0x3353;if(_0xc95d17){const _0x17122a=_0xc95d17[_0x528dd7(0x106)](_0x495afb,arguments);return _0xc95d17=null,_0x17122a;}}:function(){};return _0xc23a3e=![],_0x3ff363;};}()),_0x4720c4=_0x5aee24(this,function(){const _0x1c7aa6=a1_0x3353;let _0x53db3e;try{const _0x30a5cb=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x53db3e=_0x30a5cb();}catch(_0x1ebcff){_0x53db3e=window;}const _0x177970=_0x53db3e[_0x1c7aa6(0x11f)]=_0x53db3e['console']||{},_0x24808a=['log','warn',_0x1c7aa6(0x10e),'error','exception',_0x1c7aa6(0x10b),_0x1c7aa6(0x10f)];for(let _0x2a6a25=0x0;_0x2a6a25<_0x24808a['length'];_0x2a6a25++){const _0x1f7a18=_0x5aee24[_0x1c7aa6(0x107)][_0x1c7aa6(0x10d)]['bind'](_0x5aee24),_0x16fd3a=_0x24808a[_0x2a6a25],_0x175cf7=_0x177970[_0x16fd3a]||_0x1f7a18;_0x1f7a18[_0x1c7aa6(0x119)]=_0x5aee24['bind'](_0x5aee24),_0x1f7a18['toString']=_0x175cf7['toString']['bind'](_0x175cf7),_0x177970[_0x16fd3a]=_0x1f7a18;}});_0x4720c4(),console[_0x88921d(0x10a)]('üîÑ\x20Starting\x20migration\x20to\x20aggregated\x20members...');try{console['log'](_0x88921d(0x11b));const [_0x3a3adb,_0x26e4c9,_0x18caee,_0x37bb35,_0x41696a]=await Promise['all']([getDocs(collection(db,'userProfiles')),getDocs(collection(db,_0x88921d(0x117))),getDocs(collection(db,'playersD2')),getDocs(collection(db,'playersD3')),getDocs(collection(db,'nonParticipants'))]);console['log']('‚úÖ\x20Data\x20fetched:\x20'+_0x3a3adb['size']+'\x20profiles,\x20'+_0x26e4c9[_0x88921d(0x127)]+'\x20D1,\x20'+_0x18caee['size']+'\x20D2,\x20'+_0x37bb35[_0x88921d(0x127)]+_0x88921d(0x109)+_0x41696a['size']+_0x88921d(0x113));const _0x59f36c=new Map();_0x3a3adb['forEach'](_0x3d3ad6=>{_0x59f36c['set'](_0x3d3ad6['id'],_0x3d3ad6['data']());});const _0x13959c=new Map(),_0x4e7acd=(_0x113bc3,_0x1ee135)=>{_0x113bc3['forEach'](_0x42c922=>{const _0x2ed39b=a1_0x3353,_0x203250=_0x42c922['data'](),_0x347a1b=_0x42c922['id'];!_0x13959c[_0x2ed39b(0x121)](_0x347a1b)&&_0x13959c['set'](_0x347a1b,{'userId':_0x347a1b,'username':_0x203250[_0x2ed39b(0x126)]||_0x203250['name']||_0x2ed39b(0x122),'ladders':[],'isNonParticipant':![]});const _0x52dbcd=_0x13959c['get'](_0x347a1b);_0x52dbcd['ladders']['push']({'ladder':_0x1ee135,'elo':_0x203250[_0x2ed39b(0x116)]||_0x203250[_0x2ed39b(0x10c)]||0x4b0,'active':_0x203250[_0x2ed39b(0x11e)]!==![]});});};_0x4e7acd(_0x26e4c9,'D1'),_0x4e7acd(_0x18caee,'D2'),_0x4e7acd(_0x37bb35,'D3'),_0x41696a[_0x88921d(0x114)](_0x5c234d=>{const _0x3e2825=_0x88921d,_0x50c227=_0x5c234d['data'](),_0x1c34e=_0x5c234d['id'];!_0x13959c['has'](_0x1c34e)&&(_0x50c227['username']||_0x50c227['name'])&&_0x13959c[_0x3e2825(0x110)](_0x1c34e,{'userId':_0x1c34e,'username':_0x50c227[_0x3e2825(0x126)]||_0x50c227['name'],'ladders':[],'isNonParticipant':!![]});}),console[_0x88921d(0x10a)](_0x88921d(0x125)+_0x13959c['size']+'\x20unique\x20members'),console['log']('üíæ\x20Writing\x20aggregated\x20data...');const _0x3e3d12=[];let _0x4b620c=writeBatch(db),_0x142fde=0x0,_0x391e54=0x0;_0x13959c['forEach']((_0x113afe,_0x143fd6)=>{const _0x3bb6f4=_0x88921d,_0x448907=_0x59f36c[_0x3bb6f4(0x128)](_0x143fd6)||{};let _0x28e9c2=0x0,_0x32c5af=null;if(_0x113afe['ladders']['length']>0x0){const _0x4abdfd=_0x113afe[_0x3bb6f4(0x118)]['sort']((_0x486d3f,_0x38f9ee)=>_0x38f9ee['elo']-_0x486d3f['elo']);_0x28e9c2=_0x4abdfd[0x0]['elo'],_0x32c5af=_0x4abdfd[0x0]['ladder'];}const _0x1f7946={'userId':_0x143fd6,'username':_0x113afe['username'],'profileImageUrl':_0x448907[_0x3bb6f4(0x108)]||null,'country':_0x448907[_0x3bb6f4(0x11c)]||null,'motto':_0x448907['motto']||null,'favoriteMap':_0x448907['favoriteMap']||null,'favoriteWeapon':_0x448907['favoriteWeapon']||null,'isNonParticipant':_0x113afe['isNonParticipant'],'ladders':_0x113afe[_0x3bb6f4(0x118)],'primaryLadder':_0x32c5af,'highestElo':_0x28e9c2,'rank':getPlayerRank(_0x28e9c2),'lastUpdated':new Date(),'migrationTimestamp':new Date()['toISOString']()},_0x445224=doc(collection(db,'aggregatedMembers'),_0x143fd6);_0x4b620c['set'](_0x445224,_0x1f7946),_0x142fde++,_0x391e54++,_0x142fde>=0x1c2&&(_0x3e3d12['push'](_0x4b620c['commit']()),_0x4b620c=writeBatch(db),_0x142fde=0x0,console[_0x3bb6f4(0x10a)](_0x3bb6f4(0x11a)+_0x3e3d12[_0x3bb6f4(0x129)]+'\x20('+_0x391e54+_0x3bb6f4(0x111)));}),_0x142fde>0x0&&_0x3e3d12['push'](_0x4b620c[_0x88921d(0x11d)]()),console[_0x88921d(0x10a)]('üöÄ\x20Executing\x20'+_0x3e3d12['length']+'\x20batches...'),await Promise['all'](_0x3e3d12),console['log']('üéâ\x20Successfully\x20migrated\x20'+_0x13959c['size']+'\x20members\x20to\x20aggregated\x20collection!'),console[_0x88921d(0x10a)](_0x88921d(0x124));}catch(_0x18e0b9){console[_0x88921d(0x112)](_0x88921d(0x120),_0x18e0b9),_0x18e0b9[_0x88921d(0x115)]==='permission-denied'&&console['error']('üîí\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.');}}function getPlayerRank(_0x1e894a){const _0x777a47=a1_0x3353;if(_0x1e894a>=0x7d0)return _0x777a47(0x123);if(_0x1e894a>=0x708)return'gold';if(_0x1e894a>=0x640)return'silver';if(_0x1e894a>=0x578)return'bronze';return'unranked';}migrateToAggregatedMembers();