const a22_0x1d8253=a22_0x2ffb,a22_0x4cd7a4=(function(){let _0x2e9119=!![];return function(_0xb6e0af,_0x5d7766){const _0x58fbfd=_0x2e9119?function(){if(_0x5d7766){const _0x5cc663=_0x5d7766['apply'](_0xb6e0af,arguments);return _0x5d7766=null,_0x5cc663;}}:function(){};return _0x2e9119=![],_0x58fbfd;};}()),a22_0x346289=a22_0x4cd7a4(this,function(){const _0x3da4d1=a22_0x2ffb,_0xcb1afa=function(){let _0x277a5a;try{_0x277a5a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x43b0b5){_0x277a5a=window;}return _0x277a5a;},_0x1bc41f=_0xcb1afa(),_0x1eb340=_0x1bc41f['console']=_0x1bc41f['console']||{},_0x1ec020=['log','warn',_0x3da4d1(0x100),'error','exception','table',_0x3da4d1(0x105)];for(let _0x272d96=0x0;_0x272d96<_0x1ec020['length'];_0x272d96++){const _0x108660=a22_0x4cd7a4['constructor'][_0x3da4d1(0xd3)]['bind'](a22_0x4cd7a4),_0x12b952=_0x1ec020[_0x272d96],_0x88998d=_0x1eb340[_0x12b952]||_0x108660;_0x108660['__proto__']=a22_0x4cd7a4['bind'](a22_0x4cd7a4),_0x108660[_0x3da4d1(0xf5)]=_0x88998d['toString'][_0x3da4d1(0xe0)](_0x88998d),_0x1eb340[_0x12b952]=_0x108660;}});a22_0x346289();function a22_0x2ca9(){const _0xa18ccf=['classList','pending','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','active','prototype','lastDoc','pageSize','querySelectorAll','inbox-content','setupActionListeners','createdAt','Team\x20\x22','addEventListener','openResponseModal','#cancel-response','accepted','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20â€¢\x20Color:\x20','bind','getElementById','appendChild','innerHTML','decline','error','div','updateInvitationStatus','currentFilter','teamColor','status','Error\x20creating\x20team:','find','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20','\x20invitation.\x20Please\x20try\x20again.','type','cancel','teamData','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20','invitationId','getTimeAgo','toString','Failed\x20to\x20create\x20team:\x20','display','map','remove','Error\x20performing\x20','modal-overlay','dataset','init','data','invitations','info','click','isSent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','forEach','trace','fromUsername','value','message','floor','target','.filter-btn','team_invite','renderInvitations','d\x20ago'];a22_0x2ca9=function(){return _0xa18ccf;};return a22_0x2ca9();}function a22_0x2ffb(_0x45f843,_0x8ac35c){const _0x346289=a22_0x2ca9();return a22_0x2ffb=function(_0x4cd7a4,_0x379750){_0x4cd7a4=_0x4cd7a4-0xcf;let _0x2ca9f9=_0x346289[_0x4cd7a4];return _0x2ca9f9;},a22_0x2ffb(_0x45f843,_0x8ac35c);}import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class InboxManager{constructor(){const _0x466394=a22_0x2ffb;this['currentFilter']='pending',this[_0x466394(0xff)]=[],this['sentInvitations']=[],this['unsubscribe']=null,this['sentUnsubscribe']=null,this[_0x466394(0xd5)]=0x14,this[_0x466394(0xd4)]=null,this['hasMore']=!![],this[_0x466394(0xfd)]();}async['init'](){auth['onAuthStateChanged'](_0x9ab0e7=>{_0x9ab0e7?(this['loadInvitations'](_0x9ab0e7['uid']),this['setupEventListeners']()):window['location']['href']='./login.html';});}['setupEventListeners'](){const _0x256af7=a22_0x2ffb;document['querySelectorAll'](_0x256af7(0x10b))['forEach'](_0x4153ed=>{const _0x34fdc0=_0x256af7;_0x4153ed['addEventListener'](_0x34fdc0(0x101),()=>{const _0x4c8e16=_0x34fdc0;document[_0x4c8e16(0xd6)](_0x4c8e16(0x10b))[_0x4c8e16(0x104)](_0x16050b=>_0x16050b['classList']['remove']('active')),_0x4153ed[_0x4c8e16(0xcf)]['add'](_0x4c8e16(0xd2)),this['currentFilter']=_0x4153ed[_0x4c8e16(0xfc)]['filter'],this[_0x4c8e16(0x10d)]();});});}['loadInvitations'](_0x4ee07d){const _0xbe7c99=a22_0x2ffb,_0x5d9a4b=collection(db,'gameInvitations');let _0x581106=query(_0x5d9a4b,where('toUserId','==',_0x4ee07d),orderBy(_0xbe7c99(0xd9),'desc'),limit(this[_0xbe7c99(0xd5)]));this['unsubscribe']=onSnapshot(_0x581106,_0x4265bd=>{this['invitations']=_0x4265bd['docs']['map'](_0x10a03b=>({'id':_0x10a03b['id'],..._0x10a03b['data']()})),this['renderInvitations'](),this['updateNotificationCount']();});let _0x593012=query(_0x5d9a4b,where('fromUserId','==',_0x4ee07d),orderBy('createdAt','desc'),limit(this[_0xbe7c99(0xd5)]));this['sentUnsubscribe']=onSnapshot(_0x593012,_0x9f38ab=>{const _0x35a8b7=_0xbe7c99;this['sentInvitations']=_0x9f38ab['docs']['map'](_0x3fa0b8=>({'id':_0x3fa0b8['id'],..._0x3fa0b8[_0x35a8b7(0xfe)](),'isSent':!![]})),this['renderInvitations']();});}['renderInvitations'](){const _0x46a4c7=a22_0x2ffb,_0x13e6f0=document[_0x46a4c7(0xe1)](_0x46a4c7(0xd7));if(!_0x13e6f0)return;let _0x4054ce=[];if(this['currentFilter']==='outbox')_0x4054ce=this['sentInvitations'];else this['currentFilter']==='all'?_0x4054ce=[...this['invitations'],...this['sentInvitations']]['sort']((_0x40ec11,_0x1dfaef)=>{const _0x275e23=_0x40ec11['createdAt']?.['toDate']?_0x40ec11['createdAt']['toDate']():new Date(_0x40ec11['createdAt']),_0x2ce4f7=_0x1dfaef['createdAt']?.['toDate']?_0x1dfaef['createdAt']['toDate']():new Date(_0x1dfaef['createdAt']);return _0x2ce4f7-_0x275e23;}):_0x4054ce=this['invitations']['filter'](_0x356c32=>_0x356c32[_0x46a4c7(0xea)]===this[_0x46a4c7(0xe8)]);if(_0x4054ce['length']===0x0){const _0x567b94=this[_0x46a4c7(0xe8)]==='outbox'?'sent':this[_0x46a4c7(0xe8)]==='all'?'':this[_0x46a4c7(0xe8)];_0x13e6f0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x567b94+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this[_0x46a4c7(0xe8)]==='outbox'?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return;}_0x13e6f0['innerHTML']=_0x4054ce[_0x46a4c7(0xf8)](_0x5a9c4a=>this['createInvitationCard'](_0x5a9c4a))['join'](''),this['setupActionListeners']();}['createInvitationCard'](_0x9d0594){const _0x1d96bb=a22_0x2ffb,_0x7b5614=_0x9d0594['createdAt']?.['toDate']?_0x9d0594[_0x1d96bb(0xd9)]['toDate']():new Date(_0x9d0594['createdAt']),_0x5b0f82=this[_0x1d96bb(0xf4)](_0x7b5614),_0x1de914=_0x9d0594[_0x1d96bb(0x102)]||![];let _0x1dff52='';return _0x9d0594[_0x1d96bb(0xef)]==='team_invite'?_0x1dff52='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x9d0594['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20'+_0x9d0594['teamData'][_0x1d96bb(0xe9)]+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x9d0594['teamData']['proposedTeamName']+_0x1d96bb(0xdf)+_0x9d0594['teamData'][_0x1d96bb(0xe9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x1dff52='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x9d0594[_0x1d96bb(0x108)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1d96bb(0xed)+_0x9d0594['status']+'\x20'+(_0x1de914?'sent-invitation':'')+'\x22\x20data-invitation-id=\x22'+_0x9d0594['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1de914?'To:\x20'+_0x9d0594['toUsername']:_0x9d0594['fromUsername'])+_0x1d96bb(0xd1)+(_0x1de914?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x5b0f82+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x9d0594['status']+'\x22>'+_0x9d0594['status']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1dff52+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(!_0x1de914&&_0x9d0594[_0x1d96bb(0xea)]===_0x1d96bb(0xd0)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x9d0594['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x9d0594['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x9d0594['type']!=='team_invite'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x9d0594['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1de914&&_0x9d0594['status']===_0x1d96bb(0xd0)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x9d0594['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}[a22_0x1d8253(0xd8)](){document['querySelectorAll']('.action-btn')['forEach'](_0x71acc6=>{const _0x3561b7=a22_0x2ffb;_0x71acc6['addEventListener'](_0x3561b7(0x101),async _0x2b4d89=>{const _0x50dd4f=_0x3561b7,_0x32274d=_0x71acc6['dataset']['action'],_0x890803=_0x71acc6['dataset'][_0x50dd4f(0xf3)];_0x71acc6['disabled']=!![];const _0xa7b7a6=_0x71acc6['innerHTML'];_0x71acc6[_0x50dd4f(0xe3)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0x32274d){case'accept':await this['updateInvitationStatus'](_0x890803,_0x50dd4f(0xde));break;case _0x50dd4f(0xe4):await this[_0x50dd4f(0xe7)](_0x890803,'declined');break;case _0x50dd4f(0xf0):await this['updateInvitationStatus'](_0x890803,'cancelled');break;case'respond':this['openResponseModal'](_0x890803);break;}}catch(_0x287b78){console['error'](_0x50dd4f(0xfa)+_0x32274d+':',_0x287b78),alert('Failed\x20to\x20'+_0x32274d+_0x50dd4f(0xee));}finally{_0x71acc6['disabled']=![],_0x71acc6['innerHTML']=_0xa7b7a6;}});});}async['updateInvitationStatus'](_0x1d57c4,_0x49e308){const _0x5cd8b5=a22_0x1d8253;try{const _0x142035=this['invitations']['find'](_0x576ae5=>_0x576ae5['id']===_0x1d57c4);_0x142035&&_0x142035['type']===_0x5cd8b5(0x10c)&&_0x49e308===_0x5cd8b5(0xde)&&await this['createTeamFromInvitation'](_0x142035);const _0x4f14d2=doc(db,'gameInvitations',_0x1d57c4);await updateDoc(_0x4f14d2,{'status':_0x49e308,'respondedAt':new Date()}),_0x142035&&(_0x142035['status']=_0x49e308,_0x142035['respondedAt']=new Date(),this['renderInvitations']());}catch(_0x55950c){console['error']('Error\x20updating\x20invitation\x20status:',_0x55950c);throw _0x55950c;}}[a22_0x1d8253(0xdc)](_0x121e98){const _0x69b029=a22_0x1d8253,_0x208a60=this['invitations'][_0x69b029(0xec)](_0x13ea37=>_0x13ea37['id']===_0x121e98);if(!_0x208a60)return;const _0x2c3999=document['createElement'](_0x69b029(0xe6));_0x2c3999['className']=_0x69b029(0xfb),_0x2c3999['innerHTML']=_0x69b029(0xf2)+_0x208a60[_0x69b029(0x106)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x208a60['value']+'</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';if(!document['getElementById']('modal-styles')){const _0x4d9542=document['createElement']('style');_0x4d9542['id']='modal-styles',_0x4d9542['textContent']=_0x69b029(0x103),document['head'][_0x69b029(0xe2)](_0x4d9542);}document['body']['appendChild'](_0x2c3999),_0x2c3999['querySelector']('.modal-close')['addEventListener']('click',()=>_0x2c3999[_0x69b029(0xf9)]()),_0x2c3999['querySelector'](_0x69b029(0xdd))['addEventListener']('click',()=>_0x2c3999['remove']()),_0x2c3999['addEventListener']('click',_0x2c3784=>{const _0x22e38e=_0x69b029;if(_0x2c3784[_0x22e38e(0x10a)]===_0x2c3999)_0x2c3999['remove']();}),_0x2c3999['querySelector']('#send-response')['addEventListener']('click',()=>{const _0x11ce14=_0x69b029,_0x6b0cf7=document['getElementById']('response-message')[_0x11ce14(0x107)]['trim']();_0x6b0cf7&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x2c3999[_0x11ce14(0xf9)]());});}async['createTeamFromInvitation'](_0xf78173){const _0x198b41=a22_0x1d8253;try{const {createTeam:_0xf532ec}=await import('./ladderduos.js'),_0x28cdb0=await _0xf532ec(_0xf78173[_0x198b41(0x106)],_0xf78173['toUsername'],_0xf78173['teamData']['proposedTeamName'],_0xf78173[_0x198b41(0xf1)]['teamColor']);if(!_0x28cdb0['success'])throw new Error(_0x28cdb0[_0x198b41(0xe5)]);alert(_0x198b41(0xda)+_0xf78173['teamData']['proposedTeamName']+'\x22\x20created\x20successfully!');}catch(_0x48a5bd){console['error'](_0x198b41(0xeb),_0x48a5bd);throw new Error(_0x198b41(0xf6)+_0x48a5bd['message']);}}['updateNotificationCount'](){const _0x28fd2e=a22_0x1d8253,_0x1e16dd=this[_0x28fd2e(0xff)]['filter'](_0x26a4ab=>_0x26a4ab['status']===_0x28fd2e(0xd0))['length'],_0x1854a1=document[_0x28fd2e(0xe1)]('inbox-notification');_0x1854a1&&(_0x1e16dd>0x0?(_0x1854a1['style'][_0x28fd2e(0xf7)]='inline-block',_0x1854a1['textContent']=_0x1e16dd>0x9?'9+':_0x1e16dd):_0x1854a1['style']['display']='none');}['getTimeAgo'](_0x598dc4){const _0x26307f=a22_0x1d8253,_0x5d0416=new Date(),_0x321074=_0x5d0416-_0x598dc4,_0x41648b=Math['floor'](_0x321074/(0x3e8*0x3c)),_0x10ae1b=Math[_0x26307f(0x109)](_0x321074/(0x3e8*0x3c*0x3c)),_0x3960f6=Math['floor'](_0x321074/(0x3e8*0x3c*0x3c*0x18));if(_0x41648b<0x1)return'Just\x20now';if(_0x41648b<0x3c)return _0x41648b+'m\x20ago';if(_0x10ae1b<0x18)return _0x10ae1b+'h\x20ago';if(_0x3960f6<0x7)return _0x3960f6+_0x26307f(0x10e);return _0x598dc4['toLocaleDateString']();}['destroy'](){this['unsubscribe']&&this['unsubscribe'](),this['sentUnsubscribe']&&this['sentUnsubscribe']();}}document[a22_0x1d8253(0xdb)]('DOMContentLoaded',()=>{new InboxManager();});