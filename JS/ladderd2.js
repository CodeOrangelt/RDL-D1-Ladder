const a32_0x49ae19=(function(){let _0x587ead=!![];return function(_0x563dbd,_0x39f028){const _0x2c6b72=_0x587ead?function(){if(_0x39f028){const _0x325ea1=_0x39f028['apply'](_0x563dbd,arguments);return _0x39f028=null,_0x325ea1;}}:function(){};return _0x587ead=![],_0x2c6b72;};}()),a32_0x19f3df=a32_0x49ae19(this,function(){const _0x3c9f82=a32_0x3f84,_0x441f94=function(){let _0x1d6298;try{_0x1d6298=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3d1a01){_0x1d6298=window;}return _0x1d6298;},_0x53fbf4=_0x441f94(),_0x1c5bd3=_0x53fbf4['console']=_0x53fbf4[_0x3c9f82(0x1aa)]||{},_0x2b8449=[_0x3c9f82(0x193),_0x3c9f82(0x197),_0x3c9f82(0x180),_0x3c9f82(0x1a0),'exception','table',_0x3c9f82(0x176)];for(let _0x5b7210=0x0;_0x5b7210<_0x2b8449['length'];_0x5b7210++){const _0x3a3b5e=a32_0x49ae19[_0x3c9f82(0x19a)][_0x3c9f82(0x186)][_0x3c9f82(0x1a8)](a32_0x49ae19),_0x59ec2d=_0x2b8449[_0x5b7210],_0x39b109=_0x1c5bd3[_0x59ec2d]||_0x3a3b5e;_0x3a3b5e[_0x3c9f82(0x18d)]=a32_0x49ae19['bind'](a32_0x49ae19),_0x3a3b5e['toString']=_0x39b109[_0x3c9f82(0x191)][_0x3c9f82(0x1a8)](_0x39b109),_0x1c5bd3[_0x59ec2d]=_0x3a3b5e;}});function a32_0x3f84(_0x7bc69b,_0x4cad58){const _0x19f3df=a32_0x3dd4();return a32_0x3f84=function(_0x49ae19,_0x3bca33){_0x49ae19=_0x49ae19-0x174;let _0x3dd418=_0x19f3df[_0x49ae19];return _0x3dd418;},a32_0x3f84(_0x7bc69b,_0x4cad58);}a32_0x19f3df();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0x2c8c7d from'./firebase-idle-wrapper.js';function a32_0x3dd4(){const _0x2eb54f=['size','#ladder-d2\x20tbody','trace','0.85em','username','Silver','forEach','querySelector','previousElo','set','color','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','info','find','playerUsername','.trend-indicator','style','get','prototype','wins','Error\x20updating\x20D2\x20player\x20positions:','abs','message',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#FFD700','__proto__','sort','#4CAF50','push','toString','includes','log','data','Emerald',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','warn','totalDeaths','toFixed','constructor','winRate','join','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','eloHistoryD2','length','error','loserScore','querySelectorAll','playersD2','toLowerCase','totalMatches','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','Gold','bind','winnerUsername','console','position','timestamp','newElo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','player','D2:\x20Found','D2:\x20','country','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','innerHTML'];a32_0x3dd4=function(){return _0x2eb54f;};return a32_0x3dd4();}const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x10ac9b=![]){const _0x3d4e5b=a32_0x3f84,_0x2f7efc=document['querySelector']('#ladder-d2\x20tbody');if(!_0x2f7efc){console['error']('D2\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x2f7efc[_0x3d4e5b(0x1b5)]='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x2fec80=Date['now']();if(!_0x10ac9b&&playerCacheD2[_0x3d4e5b(0x194)]&&_0x2fec80-playerCacheD2['timestamp']<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0x57e734=collection(db,'playersD2'),_0x193609=query(_0x57e734,orderBy('position','asc')),_0x5763d0=await a32_0x2c8c7d['getDocuments'](_0x57e734),_0x58e740=[];_0x5763d0['forEach'](_0x48d065=>{const _0x197131=_0x3d4e5b,_0x4d6da7=_0x48d065['data']();_0x4d6da7[_0x197131(0x178)]&&_0x58e740['push']({..._0x4d6da7,'id':_0x48d065['id'],'elo':_0x4d6da7['eloRating']||0x0,'position':_0x4d6da7['position']||Number['MAX_SAFE_INTEGER']});});const _0x181490=collection(db,'userProfiles'),_0x38a842=await getDocs(_0x181490),_0x49b908=new Map();_0x38a842['forEach'](_0xec7c38=>{const _0x44fa4e=_0x3d4e5b,_0x1f9682=_0xec7c38['data']();_0x1f9682['username']&&_0x49b908['set'](_0x1f9682[_0x44fa4e(0x178)][_0x44fa4e(0x1a4)](),_0x1f9682);});for(const _0x5b3398 of _0x58e740){const _0xb9ceeb=_0x5b3398['username']['toLowerCase']();if(_0x49b908['has'](_0xb9ceeb)){const _0x1a99fb=_0x49b908[_0x3d4e5b(0x185)](_0xb9ceeb);_0x1a99fb[_0x3d4e5b(0x1b2)]&&(_0x5b3398[_0x3d4e5b(0x1b2)]=_0x1a99fb['country'][_0x3d4e5b(0x1a4)]());}}const _0x57f317=_0x58e740['map'](_0xf93899=>_0xf93899[_0x3d4e5b(0x178)]),_0x4e5eec=await fetchBatchMatchStatsD2(_0x57f317);_0x58e740['sort']((_0x31af98,_0x496e0e)=>{const _0x23ae72=_0x3d4e5b,_0x281b9d=_0x4e5eec['get'](_0x31af98[_0x23ae72(0x178)])?.['totalMatches']||0x0,_0x52593d=_0x4e5eec['get'](_0x496e0e['username'])?.[_0x23ae72(0x1a5)]||0x0;if(_0x281b9d===0x0!==(_0x52593d===0x0))return _0x281b9d===0x0?0x1:-0x1;return(_0x31af98[_0x23ae72(0x1ab)]||0x3e7)-(_0x496e0e['position']||0x3e7);}),_0x58e740['forEach']((_0x5aa504,_0x37ecd0)=>{const _0x19b2fb=_0x3d4e5b;_0x5aa504[_0x19b2fb(0x1ab)]=_0x37ecd0+0x1;}),playerCacheD2['data']=_0x58e740,playerCacheD2['timestamp']=_0x2fec80,updateLadderDisplayD2(_0x58e740);}catch(_0x4e5993){console['error']('Error\x20loading\x20D2\x20ladder:',_0x4e5993),_0x2f7efc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x4e5993[_0x3d4e5b(0x18a)]+_0x3d4e5b(0x19d);}}function getNextAvailablePositionD2(_0x6fdb15){const _0x1dffad=a32_0x3f84;if(_0x6fdb15[_0x1dffad(0x19f)]===0x0)return 0x1;let _0x251c2d=0x0;return _0x6fdb15['forEach'](_0x3562f2=>{const _0xe8be92=_0x1dffad;_0x3562f2[_0xe8be92(0x1ab)]&&typeof _0x3562f2['position']==='number'&&_0x3562f2['position']>_0x251c2d&&(_0x251c2d=_0x3562f2['position']);}),_0x251c2d+0x1;}async function updatePlayerPositions(_0x43c399,_0x35915a){const _0x245f61=a32_0x3f84;try{const _0x1388a4=collection(db,'playersD2'),_0x415573=await getDocs(_0x1388a4),_0x296256=[];_0x415573['forEach'](_0x407ebd=>{const _0x689b00=a32_0x3f84;_0x296256[_0x689b00(0x190)]({'id':_0x407ebd['id'],..._0x407ebd['data']()});});const _0x1ab78e=_0x296256[_0x245f61(0x181)](_0x51fa91=>_0x51fa91['username']===_0x43c399),_0x5a2bbc=_0x296256['find'](_0x45a440=>_0x45a440['username']===_0x35915a);if(!_0x1ab78e||!_0x5a2bbc){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x1ab78e['position']>_0x5a2bbc[_0x245f61(0x1ab)]){const _0x1d36b1=_0x5a2bbc['position'];for(const _0x592411 of _0x296256){_0x592411['position']>=_0x5a2bbc['position']&&_0x592411['position']<_0x1ab78e[_0x245f61(0x1ab)]&&_0x592411['username']!==_0x43c399&&await updateDoc(doc(db,'playersD2',_0x592411['id']),{'position':_0x592411['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x1ab78e['id']),{'position':_0x1d36b1});if(_0x1d36b1===0x1){const _0x1615cb=doc(db,'playersD2',_0x1ab78e['id']),_0x422148=await getDoc(_0x1615cb);!_0x422148[_0x245f61(0x194)]()['firstPlaceDate']&&await updateDoc(_0x1615cb,{'firstPlaceDate':Timestamp['now']()});}if(_0x5a2bbc[_0x245f61(0x1ab)]===0x1){const _0x3e0220=doc(db,_0x245f61(0x1a3),_0x5a2bbc['id']);await updateDoc(_0x3e0220,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0x4032be){console[_0x245f61(0x1a0)](_0x245f61(0x188),_0x4032be);}}function calculateStreakDays(_0x418f9a){const _0xc4317=a32_0x3f84;if(!_0x418f9a)return 0x0;const _0x2d5fac=_0x418f9a['toDate'](),_0x586977=new Date(),_0x101590=Math[_0xc4317(0x189)](_0x586977-_0x2d5fac);return Math['ceil'](_0x101590/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x58c24e){const _0x304690=a32_0x3f84;if(_0x58c24e>=0x834)return _0x304690(0x195);if(_0x58c24e>=0x708)return _0x304690(0x1a7);if(_0x58c24e>=0x640)return _0x304690(0x179);if(_0x58c24e>=0x578)return'Bronze';return'Unranked';}async function updateLadderDisplayD2(_0x13f8e8){const _0x16063d=a32_0x3f84;_0x13f8e8['sort']((_0x5dfeca,_0x34c66c)=>_0x5dfeca['position']-_0x34c66c['position']);const _0x138df4=document['querySelector'](_0x16063d(0x175));if(!_0x138df4)return;_0x138df4['innerHTML']='';const _0x564681=_0x13f8e8['map'](_0x21f0eb=>_0x21f0eb['username']),_0x3da8d6=await fetchBatchMatchStatsD2(_0x564681),_0x5af891=document[_0x16063d(0x17b)]('#ladder-d2\x20thead\x20tr');_0x5af891&&(_0x5af891['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x583301=_0x13f8e8['map'](_0x3e428b=>{const _0x26e4b7=_0x3da8d6['get'](_0x3e428b['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x3e428b,_0x26e4b7);})[_0x16063d(0x19c)]('');_0x138df4['innerHTML']=_0x583301,getPlayersLastEloChangesD2(_0x564681)['then'](_0x2a303d=>{const _0x5cd3aa=_0x16063d,_0x2e1450=new Map();_0x138df4[_0x5cd3aa(0x1a2)]('tr')['forEach']((_0x3735e7,_0x1d9ef4)=>{_0x1d9ef4<_0x564681['length']&&_0x2e1450['set'](_0x564681[_0x1d9ef4],_0x3735e7);}),_0x2a303d[_0x5cd3aa(0x17a)]((_0x1ec1f1,_0x15eb77)=>{const _0x56ef1d=_0x5cd3aa,_0x1baa12=_0x2e1450[_0x56ef1d(0x185)](_0x15eb77);if(_0x1baa12&&_0x1ec1f1!==0x0){const _0x371431=_0x1baa12['querySelector']('td:nth-child(3)');if(_0x371431){const _0x3b596b=_0x1ec1f1>0x0?'+'+_0x1ec1f1:''+_0x1ec1f1,_0x5b80d3=_0x371431['querySelector'](_0x56ef1d(0x183));_0x5b80d3&&(_0x5b80d3['textContent']=_0x3b596b,_0x5b80d3['style'][_0x56ef1d(0x17e)]=_0x1ec1f1>0x0?_0x56ef1d(0x18f):'#F44336',_0x5b80d3['style']['fontWeight']='bold',_0x5b80d3[_0x56ef1d(0x184)]['fontSize']=_0x56ef1d(0x177),_0x5b80d3['style']['display']='inline',_0x5b80d3['style']['visibility']='visible',_0x5b80d3['style']['opacity']='1');}}});})['catch'](_0x179ff7=>console['error']('Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:',_0x179ff7));}function createPlayerRowD2(_0x484738,_0xc088b9){const _0x1ad57a=a32_0x3f84,_0x4e7abb=parseFloat(_0x484738['elo'])||0x0;let _0x19e2fb='gray';if(_0x4e7abb>=0x7d0)_0x19e2fb='#50C878';else{if(_0x4e7abb>=0x708)_0x19e2fb=_0x1ad57a(0x18c);else{if(_0x4e7abb>=0x640)_0x19e2fb='#C0C0C0';else _0x4e7abb>=0x578&&(_0x19e2fb='#CD7F32');}}let _0x1a2f86='';return _0x484738['country']&&(_0x1a2f86='<img\x20src=\x22../images/flags/'+_0x484738['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x484738[_0x1ad57a(0x1b2)]+_0x1ad57a(0x17f)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x484738['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x484738[_0x1ad57a(0x178)])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x19e2fb+_0x1ad57a(0x18b)+_0x484738['username']+_0x1ad57a(0x1ae)+_0x1a2f86+_0x1ad57a(0x1b4)+_0x19e2fb+_0x1ad57a(0x196)+_0x4e7abb+_0x1ad57a(0x1a6)+_0xc088b9[_0x1ad57a(0x1a5)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xc088b9['wins']+_0x1ad57a(0x1b3)+_0xc088b9['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xc088b9['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xc088b9['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD2(_0x2e52b4){const _0x226afc=a32_0x3f84,_0x2a39d9=new Map();_0x2e52b4['forEach'](_0x530009=>_0x2a39d9[_0x226afc(0x17d)](_0x530009,0x0));try{const _0x3f4e76=collection(db,_0x226afc(0x19e)),_0x2f71fe=query(_0x3f4e76,orderBy(_0x226afc(0x1ac),'desc'),limit(0x64)),_0x100a87=await getDocs(_0x2f71fe),_0x201fe2=new Map(),_0x4f2411=await getDocs(collection(db,_0x226afc(0x1a3)));_0x4f2411[_0x226afc(0x17a)](_0x422355=>{const _0x5dbf35=_0x226afc,_0xc76b66=_0x422355['data']();_0xc76b66[_0x5dbf35(0x178)]&&_0x201fe2[_0x5dbf35(0x17d)](_0x422355['id'],_0xc76b66[_0x5dbf35(0x178)]);});const _0x2e53f2=new Map();_0x100a87['forEach'](_0x17491d=>{const _0x55194d=_0x226afc,_0x240d6b=_0x17491d['data']();let _0x1f0ecf=_0x240d6b['username']||_0x240d6b[_0x55194d(0x182)];!_0x1f0ecf&&_0x240d6b[_0x55194d(0x1af)]&&_0x201fe2['has'](_0x240d6b['player'])&&(_0x1f0ecf=_0x201fe2['get'](_0x240d6b['player']));if(!_0x1f0ecf&&_0x240d6b['matchId']){}_0x1f0ecf&&_0x2e52b4[_0x55194d(0x192)](_0x1f0ecf)&&(!_0x2e53f2['has'](_0x1f0ecf)&&_0x2e53f2['set'](_0x1f0ecf,[]),_0x2e53f2['get'](_0x1f0ecf)['push']({..._0x240d6b,'timestamp':_0x240d6b[_0x55194d(0x1ac)]?.['seconds']||0x0,'username':_0x1f0ecf}));}),_0x2e53f2[_0x226afc(0x17a)]((_0x3124e3,_0x2c1a2a)=>{const _0x3b2fbf=_0x226afc;if(_0x3124e3[_0x3b2fbf(0x19f)]>0x0){_0x3124e3[_0x3b2fbf(0x18e)]((_0x5cec1a,_0x47e681)=>_0x47e681['timestamp']-_0x5cec1a['timestamp']);const _0x133470=_0x3124e3['find'](_0x391581=>_0x391581['change']!==undefined||_0x391581['newElo']!==undefined&&_0x391581[_0x3b2fbf(0x17c)]!==undefined);if(_0x133470){let _0x5a40c6;if(_0x133470['change']!==undefined)_0x5a40c6=_0x133470['change'];else _0x133470[_0x3b2fbf(0x1ad)]!==undefined&&_0x133470['previousElo']!==undefined&&(_0x5a40c6=_0x133470['newElo']-_0x133470['previousElo']);_0x5a40c6!==undefined&&_0x2a39d9['set'](_0x2c1a2a,_0x5a40c6);}}});if(_0x2e53f2['size']===0x0){const _0x5cf582=collection(db,'eloHistory'),_0x3b385d=query(_0x5cf582,where('gameMode','==','D2'),orderBy('timestamp','desc'),limit(0x32));try{const _0x2eed66=await getDocs(_0x3b385d);console[_0x226afc(0x193)](_0x226afc(0x1b0),_0x2eed66[_0x226afc(0x174)],'fallback\x20entries'),_0x2eed66['forEach'](_0x3f8a36=>{const _0x438e7f=_0x226afc,_0x1597f7=_0x3f8a36['data'](),_0xb5342f=_0x1597f7['username']||_0x1597f7[_0x438e7f(0x182)];if(_0xb5342f&&_0x2e52b4[_0x438e7f(0x192)](_0xb5342f)){const _0x55ffc5=_0x1597f7['change']||(_0x1597f7[_0x438e7f(0x1ad)]!==undefined&&_0x1597f7['previousElo']!==undefined?_0x1597f7['newElo']-_0x1597f7['previousElo']:0x0);_0x55ffc5!==0x0&&(_0x2a39d9['set'](_0xb5342f,_0x55ffc5),console['log'](_0x438e7f(0x1b1)+_0xb5342f+'\x20fallback\x20ELO\x20change:\x20'+_0x55ffc5));}});}catch(_0x9fb979){}}}catch(_0x2de9b7){console['error']('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x2de9b7);}return _0x2a39d9;}async function fetchBatchMatchStatsD2(_0x39ba0f){const _0xfd53df=a32_0x3f84,_0x1bb194=new Map();try{_0x39ba0f[_0xfd53df(0x17a)](_0x5cdf2e=>{_0x1bb194['set'](_0x5cdf2e,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x41ade8=collection(db,'approvedMatchesD2'),_0x15d058=await getDocs(_0x41ade8);_0x15d058['forEach'](_0x49e3ee=>{const _0x875059=_0xfd53df,_0x265e5b=_0x49e3ee['data'](),_0x1ead4e=_0x265e5b[_0x875059(0x1a9)],_0x1bb24b=_0x265e5b['loserUsername'];if(_0x39ba0f['includes'](_0x1ead4e)){const _0x103bd8=_0x1bb194[_0x875059(0x185)](_0x1ead4e);_0x103bd8[_0x875059(0x187)]++,_0x103bd8['totalMatches']++,_0x103bd8['totalKills']+=parseInt(_0x265e5b['winnerScore'])||0x0,_0x103bd8['totalDeaths']+=parseInt(_0x265e5b[_0x875059(0x1a1)])||0x0;}if(_0x39ba0f[_0x875059(0x192)](_0x1bb24b)){const _0x23d096=_0x1bb194['get'](_0x1bb24b);_0x23d096['losses']++,_0x23d096['totalMatches']++,_0x23d096['totalKills']+=parseInt(_0x265e5b['loserScore'])||0x0,_0x23d096['totalDeaths']+=parseInt(_0x265e5b['winnerScore'])||0x0;}}),_0x39ba0f[_0xfd53df(0x17a)](_0x48496b=>{const _0x534fa9=_0xfd53df,_0x283eaa=_0x1bb194['get'](_0x48496b);_0x283eaa['kda']=_0x283eaa['totalDeaths']>0x0?(_0x283eaa['totalKills']/_0x283eaa[_0x534fa9(0x198)])['toFixed'](0x2):_0x283eaa['totalKills'][_0x534fa9(0x199)](0x2),_0x283eaa[_0x534fa9(0x19b)]=_0x283eaa[_0x534fa9(0x1a5)]>0x0?(_0x283eaa[_0x534fa9(0x187)]/_0x283eaa['totalMatches']*0x64)[_0x534fa9(0x199)](0x1):0x0;});}catch(_0x130c3e){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x130c3e);}return _0x1bb194;}export{displayLadderD2,updatePlayerPositions};