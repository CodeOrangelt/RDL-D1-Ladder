function a19_0x77cd(_0xf5d8a1,_0x34b583){const _0x3afa71=a19_0x3f9d();return a19_0x77cd=function(_0x417696,_0x390031){_0x417696=_0x417696-0xa8;let _0x3f9d85=_0x3afa71[_0x417696];return _0x3f9d85;},a19_0x77cd(_0xf5d8a1,_0x34b583);}const a19_0x43e3f6=a19_0x77cd,a19_0x417696=(function(){let _0x44b9a6=!![];return function(_0x34bbaa,_0xb5ce20){const _0x3ebb75=_0x44b9a6?function(){if(_0xb5ce20){const _0x43f01f=_0xb5ce20['apply'](_0x34bbaa,arguments);return _0xb5ce20=null,_0x43f01f;}}:function(){};return _0x44b9a6=![],_0x3ebb75;};}()),a19_0x3afa71=a19_0x417696(this,function(){const _0x26bd56=a19_0x77cd,_0x24fbca=function(){const _0x7950ee=a19_0x77cd;let _0x444c31;try{_0x444c31=Function(_0x7950ee(0xba)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x18957e){_0x444c31=window;}return _0x444c31;},_0x31db1b=_0x24fbca(),_0x238af1=_0x31db1b[_0x26bd56(0xd4)]=_0x31db1b['console']||{},_0x42ca6d=['log','warn','info','error','exception','table',_0x26bd56(0xd3)];for(let _0xf2574c=0x0;_0xf2574c<_0x42ca6d['length'];_0xf2574c++){const _0x52fa7c=a19_0x417696[_0x26bd56(0xac)][_0x26bd56(0xc5)]['bind'](a19_0x417696),_0x4bb230=_0x42ca6d[_0xf2574c],_0x2e6ab9=_0x238af1[_0x4bb230]||_0x52fa7c;_0x52fa7c['__proto__']=a19_0x417696['bind'](a19_0x417696),_0x52fa7c['toString']=_0x2e6ab9[_0x26bd56(0xc2)]['bind'](_0x2e6ab9),_0x238af1[_0x4bb230]=_0x52fa7c;}});a19_0x3afa71();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';function a19_0x3f9d(){const _0x514346=['[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension','appendChild','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...','constructor','suspendSession','[FirebaseIdle]\x20Creating\x20listener:\x20','\x20operation','network','createElement','Firebase:\x20Suspended','log','function','update','resumeSession','delete','safeOperation','textContent','return\x20(function()\x20','disabled','body','firebase-suspend-indicator','test','updateDocument','resource-exhausted','pendingTimeout','toString','size','error','prototype','[FirebaseIdle]\x20Blocked\x20','suspendAllListeners','operationType','createListener','message','activeListeners','pendingOperations','_suspendedListeners','forEach','cssText','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle','[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20','set','trace','console','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','all','debug','[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:','now'];a19_0x3f9d=function(){return _0x514346;};return a19_0x3f9d();}import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this['debug']=![];}['checkSessionActive'](){const _0x630929=a19_0x77cd;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log'](_0x630929(0xd0)),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0x630929(0xc6)+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x546083,_0x47510f,..._0x32ef0b){const _0x291079=a19_0x77cd;if(!this['checkSessionActive']()){const _0xd7d280=_0x47510f+'-'+Date['now']()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x9);return this[_0x291079(0xcc)]['set'](_0xd7d280,{'operation':_0x546083,'operationType':_0x47510f,'args':_0x32ef0b}),!this[_0x291079(0xc1)]&&(this['pendingTimeout']=setTimeout(()=>{const _0x994d13=_0x291079;this['pendingOperations']['clear'](),this[_0x994d13(0xc1)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x546083(..._0x32ef0b);}catch(_0x50cd95){if(_0x50cd95['code']==='unavailable'||_0x50cd95['code']===_0x291079(0xc0)||_0x50cd95['message']&&_0x50cd95[_0x291079(0xca)]['includes'](_0x291079(0xb0)))return handleNetworkError(),null;throw _0x50cd95;}}async['getDocument'](_0xe7de3e){return this['safeOperation'](getDoc,'get',_0xe7de3e);}async['getDocuments'](_0x384f1b){const _0x19f21f=a19_0x77cd;return this[_0x19f21f(0xb8)](getDocs,'query',_0x384f1b);}async['addDocument'](_0x1518aa,_0x2f411e){return this['safeOperation'](addDoc,'add',_0x1518aa,_0x2f411e);}async['setDocument'](_0x209a64,_0x422005,_0x10aa1e={}){return this['safeOperation'](setDoc,'set',_0x209a64,_0x422005,_0x10aa1e);}async[a19_0x43e3f6(0xbf)](_0x170b40,_0x30d8f1){const _0x2c9e07=a19_0x43e3f6;return this['safeOperation'](updateDoc,_0x2c9e07(0xb5),_0x170b40,_0x30d8f1);}async['deleteDocument'](_0x387795){return this['safeOperation'](deleteDoc,'delete',_0x387795);}['suspendAllListeners'](){const _0x5f1d0b=a19_0x43e3f6;console['log'](_0x5f1d0b(0xd8),this[_0x5f1d0b(0xcb)]['size']),this[_0x5f1d0b(0xcd)]=new Map(this['activeListeners']),this['activeListeners'][_0x5f1d0b(0xce)]((_0x54434a,_0x534e47)=>{const _0x312ccf=_0x5f1d0b;console[_0x312ccf(0xb3)]('[FirebaseIdle]\x20Suspending\x20listener:',_0x534e47);if(typeof _0x54434a===_0x312ccf(0xb4))try{_0x54434a(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x534e47);}catch(_0x280d57){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x534e47,_0x280d57);}}),this['activeListeners']['clear']();if(this[_0x5f1d0b(0xd7)]){const _0x2f0f5b=document[_0x5f1d0b(0xb1)]('div');_0x2f0f5b['id']='firebase-suspend-indicator',_0x2f0f5b['style'][_0x5f1d0b(0xcf)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2f0f5b[_0x5f1d0b(0xb9)]=_0x5f1d0b(0xb2),document[_0x5f1d0b(0xbc)][_0x5f1d0b(0xa9)](_0x2f0f5b);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x2a3fdb=a19_0x43e3f6;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners'][_0x2a3fdb(0xc3)]),this[_0x2a3fdb(0xcd)][_0x2a3fdb(0xce)]((_0x59f1b8,_0x592769)=>{const _0x5a0802=_0x2a3fdb;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x592769);try{if(typeof _0x59f1b8==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x592769);return;}const {query:_0x3b93fd,callback:_0x1ae97c,options:_0x32a36d}=_0x59f1b8;if(_0x3b93fd&&_0x1ae97c){const _0x27c77f=onSnapshot(_0x3b93fd,_0x1ae97c,_0x32a36d||{});this['activeListeners'][_0x5a0802(0xd2)](_0x592769,_0x27c77f),console[_0x5a0802(0xb3)]('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x592769);}}catch(_0x25afdd){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x592769,_0x25afdd);}}),this[_0x2a3fdb(0xcd)]['clear']();const _0x1572c4=document['getElementById'](_0x2a3fdb(0xbd));_0x1572c4&&_0x1572c4['remove'](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}[a19_0x43e3f6(0xc9)](_0x4e14f0,_0x1d71a7,_0x5c1a86={},_0x4011e6=null){const _0x1ff357=a19_0x43e3f6,_0x35cb00=_0x4011e6||'listener_'+Date[_0x1ff357(0xd9)]()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console['log'](_0x1ff357(0xae)+_0x35cb00);if(!this['checkSessionActive']())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x35cb00),()=>{};try{const _0x4d675b=onSnapshot(_0x4e14f0,_0x1d71a7,_0x5c1a86);return this[_0x1ff357(0xcb)][_0x1ff357(0xd2)](_0x35cb00,{'unsubscribe':_0x4d675b,'query':_0x4e14f0,'callback':_0x1d71a7,'options':_0x5c1a86}),this[_0x1ff357(0xd7)]&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x35cb00),console[_0x1ff357(0xb3)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size'])),()=>{const _0xa1800f=_0x1ff357;this['debug']&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x35cb00);try{_0x4d675b(),this['activeListeners'][_0xa1800f(0xb7)](_0x35cb00),this[_0xa1800f(0xd7)]&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x35cb00),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x168827){console[_0xa1800f(0xc4)](_0xa1800f(0xd1)+_0x35cb00+':',_0x168827);}};}catch(_0x44e2cd){return console['error'](_0x1ff357(0xaa)+_0x35cb00+':',_0x44e2cd),()=>{};}}['executePendingOperations'](_0x49061b=a19_0x43e3f6(0xd6)){const _0x4b9490=a19_0x43e3f6;console['log']('Executing\x20pending\x20'+_0x49061b+'\x20operations:\x20'+this['pendingOperations']['size']+'\x20total\x20operations');const _0x484894=new Map(this['pendingOperations']);this[_0x4b9490(0xcc)]['clear'](),_0x484894['forEach']((_0x194d71,_0x294f9d)=>{const _0x3782cc=_0x4b9490;_0x49061b===_0x3782cc(0xd6)||_0x194d71['operationType']===_0x49061b?(console['log']('Executing\x20delayed\x20'+_0x194d71['operationType']+_0x3782cc(0xaf)),this[_0x3782cc(0xb8)](_0x194d71['operation'],_0x194d71[_0x3782cc(0xc8)],..._0x194d71['args'])['catch'](_0x27787a=>console['error']('Error\x20executing\x20pending\x20operation:',_0x27787a))):this['pendingOperations']['set'](_0x294f9d,_0x194d71);});}['enableDebug'](_0x1b2555=!![]){const _0xa70ae0=a19_0x43e3f6;this['debug']=_0x1b2555,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x1b2555?'enabled':_0xa70ae0(0xbb)));if(_0x1b2555){const _0x3e005a=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console[_0xa70ae0(0xb3)](_0xa70ae0(0xab)),this['getDocument'](doc(db,'system',_0xa70ae0(0xbe)))['then'](_0x38a9e2=>{const _0x4ea0f9=_0xa70ae0;console['log'](_0x4ea0f9(0xa8),_0x38a9e2);})['catch'](_0x58b0c3=>{const _0x257a77=_0xa70ae0;console['log'](_0x257a77(0xd5),_0x58b0c3);})['finally'](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x3e005a;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x235353=a19_0x43e3f6,_0x21aa09=window['suspendSession']||function(){},_0x5d2e22=window[_0x235353(0xb6)]||function(){};window[_0x235353(0xad)]=function(){const _0x6164d=_0x235353;_0x21aa09(),firebaseIdle[_0x6164d(0xc7)]();},window[_0x235353(0xb6)]=function(){_0x5d2e22(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;