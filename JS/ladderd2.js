(function(_0x288c04,_0x40fbb3){const _0x2221be=a32_0x367b,_0x4949de=_0x288c04();while(!![]){try{const _0x462f5f=parseInt(_0x2221be(0xe8))/0x1*(parseInt(_0x2221be(0x14d))/0x2)+-parseInt(_0x2221be(0xf2))/0x3*(-parseInt(_0x2221be(0x11d))/0x4)+parseInt(_0x2221be(0xe0))/0x5+parseInt(_0x2221be(0x120))/0x6+parseInt(_0x2221be(0x10b))/0x7+parseInt(_0x2221be(0x114))/0x8+-parseInt(_0x2221be(0x147))/0x9*(parseInt(_0x2221be(0x124))/0xa);if(_0x462f5f===_0x40fbb3)break;else _0x4949de['push'](_0x4949de['shift']());}catch(_0xb6e683){_0x4949de['push'](_0x4949de['shift']());}}}(a32_0x20f5,0x9d045));const a32_0x18def2=(function(){let _0x494aee=!![];return function(_0x36082f,_0x151be0){const _0x503653=_0x494aee?function(){const _0x589cf7=a32_0x367b;if(_0x151be0){const _0x170018=_0x151be0[_0x589cf7(0xf7)](_0x36082f,arguments);return _0x151be0=null,_0x170018;}}:function(){};return _0x494aee=![],_0x503653;};}()),a32_0x26c550=a32_0x18def2(this,function(){const _0x1d7ae3=a32_0x367b;return a32_0x26c550[_0x1d7ae3(0x11c)]()[_0x1d7ae3(0x132)]('(((.+)+)+)+$')[_0x1d7ae3(0x11c)]()[_0x1d7ae3(0xe4)](a32_0x26c550)[_0x1d7ae3(0x132)](_0x1d7ae3(0x108));});a32_0x26c550();const a32_0x331567=(function(){let _0x14f76b=!![];return function(_0x2921de,_0x15133b){const _0x4b5683=_0x14f76b?function(){const _0x54aaed=a32_0x367b;if(_0x15133b){const _0x3dd429=_0x15133b[_0x54aaed(0xf7)](_0x2921de,arguments);return _0x15133b=null,_0x3dd429;}}:function(){};return _0x14f76b=![],_0x4b5683;};}()),a32_0x21649d=a32_0x331567(this,function(){const _0x1753e4=a32_0x367b,_0x29aa2b=function(){const _0x24cdea=a32_0x367b;let _0x430b3d;try{_0x430b3d=Function(_0x24cdea(0x10c)+_0x24cdea(0xec)+');')();}catch(_0x814630){_0x430b3d=window;}return _0x430b3d;},_0x454629=_0x29aa2b(),_0x2367c3=_0x454629[_0x1753e4(0x127)]=_0x454629[_0x1753e4(0x127)]||{},_0xc033ef=['log',_0x1753e4(0x13a),_0x1753e4(0x153),_0x1753e4(0x101),_0x1753e4(0xdf),_0x1753e4(0x122),_0x1753e4(0x12b)];for(let _0x471c62=0x0;_0x471c62<_0xc033ef['length'];_0x471c62++){const _0x5af664=a32_0x331567['constructor']['prototype'][_0x1753e4(0x136)](a32_0x331567),_0x1d7fc8=_0xc033ef[_0x471c62],_0x472231=_0x2367c3[_0x1d7fc8]||_0x5af664;_0x5af664['__proto__']=a32_0x331567[_0x1753e4(0x136)](a32_0x331567),_0x5af664['toString']=_0x472231[_0x1753e4(0x11c)]['bind'](_0x472231),_0x2367c3[_0x1d7fc8]=_0x5af664;}});a32_0x21649d();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a32_0x20f5(){const _0x96c58c=[';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','color','%</td>\x0a\x20\x20\x20\x20</tr>','get','D2:\x20','search','textContent','losses','username','bind','toLowerCase','approvedMatchesD2','sort','warn','gameMode','loserUsername','set','abs','winnerScore','map','fontWeight','loserScore','#C0C0C0','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','D2\x20Ladder\x20table\x20body\x20not\x20found','seconds','960174Plpihj','eloHistoryD2','push','elo','#50C878','kda','212JLmGjG','totalMatches','player','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20','now','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','info','firstPlaceDate','td:nth-child(3)','exception','2321965jtwLib','<img\x20src=\x22../images/flags/','change','totalDeaths','constructor','playerUsername','Error\x20fetching\x20batch\x20D2\x20match\x20stats:','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list','7027LtgZin','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','catch','winnerUsername','{}.constructor(\x22return\x20this\x22)(\x20)','wins','matchId','asc','previousElo','#4CAF50','597vwvpEh','includes','userProfiles','#ladder-d2\x20tbody','.trend-indicator','apply','find','then','style','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>','toFixed','forEach','totalKills','log','eloRating','error','winRate','playersD2','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','newElo','eloHistory','querySelector','(((.+)+)+)+$','Silver','timestamp','5064332dQeTSn','return\x20(function()\x20','Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:','Error\x20updating\x20D2\x20player\x20positions:','data','#F44336','ceil','display','opacity','5366696BGhLNG','0.85em','length','join','message','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','innerHTML',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toString','20948nQAxOw','visible','D2:\x20Found','5668752vaBAys','D2:\x20Error\x20fetching\x20ELO\x20history:','table','number','370roeOqu','position','country','console','Bronze','size','fontSize','trace','inline'];a32_0x20f5=function(){return _0x96c58c;};return a32_0x20f5();}import{getRankStyle}from'./ranks.js';import a32_0x4e8871 from'./firebase-idle-wrapper.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x145b43=![]){const _0x4d20cc=a32_0x367b,_0x3d81e9=document[_0x4d20cc(0x107)](_0x4d20cc(0xf5));if(!_0x3d81e9){console[_0x4d20cc(0x101)](_0x4d20cc(0x145));return;}_0x3d81e9[_0x4d20cc(0x11a)]=_0x4d20cc(0xfb);try{const _0x25f2ce=Date[_0x4d20cc(0x151)]();if(!_0x145b43&&playerCacheD2[_0x4d20cc(0x10f)]&&_0x25f2ce-playerCacheD2[_0x4d20cc(0x10a)]<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2[_0x4d20cc(0x10f)]);return;}const _0x4fd9cb=collection(db,_0x4d20cc(0x103)),_0x44f9ee=query(_0x4fd9cb,orderBy('position',_0x4d20cc(0xef))),_0x4141c1=await a32_0x4e8871['getDocuments'](_0x4fd9cb),_0x43088c=[];_0x4141c1[_0x4d20cc(0xfd)](_0x400008=>{const _0x3cf85f=_0x4d20cc,_0x4f8d8b=_0x400008[_0x3cf85f(0x10f)]();_0x4f8d8b[_0x3cf85f(0x135)]&&_0x43088c['push']({..._0x4f8d8b,'id':_0x400008['id'],'elo':_0x4f8d8b[_0x3cf85f(0x100)]||0x0,'position':_0x4f8d8b[_0x3cf85f(0x125)]||Number['MAX_SAFE_INTEGER']});});const _0x35e5ff=collection(db,_0x4d20cc(0xf4)),_0x19ef1b=await getDocs(_0x35e5ff),_0x25a5e2=new Map();_0x19ef1b['forEach'](_0x2a832a=>{const _0xab52de=_0x4d20cc,_0x528fec=_0x2a832a['data']();_0x528fec[_0xab52de(0x135)]&&_0x25a5e2[_0xab52de(0x13d)](_0x528fec[_0xab52de(0x135)][_0xab52de(0x137)](),_0x528fec);});for(const _0x20d4fb of _0x43088c){const _0x474bae=_0x20d4fb[_0x4d20cc(0x135)][_0x4d20cc(0x137)]();if(_0x25a5e2['has'](_0x474bae)){const _0x420f0a=_0x25a5e2[_0x4d20cc(0x130)](_0x474bae);_0x420f0a[_0x4d20cc(0x126)]&&(_0x20d4fb['country']=_0x420f0a[_0x4d20cc(0x126)][_0x4d20cc(0x137)]());}}const _0x55f48c=_0x43088c['map'](_0x1d4c46=>_0x1d4c46[_0x4d20cc(0x135)]),_0x433529=await fetchBatchMatchStatsD2(_0x55f48c);_0x43088c[_0x4d20cc(0x139)]((_0x1164d0,_0x3531e8)=>{const _0x1469e7=_0x4d20cc,_0x5a9dfb=_0x433529['get'](_0x1164d0[_0x1469e7(0x135)])?.['totalMatches']||0x0,_0x1e72de=_0x433529[_0x1469e7(0x130)](_0x3531e8[_0x1469e7(0x135)])?.[_0x1469e7(0x14e)]||0x0;if(_0x5a9dfb===0x0!==(_0x1e72de===0x0))return _0x5a9dfb===0x0?0x1:-0x1;return(_0x1164d0[_0x1469e7(0x125)]||0x3e7)-(_0x3531e8[_0x1469e7(0x125)]||0x3e7);}),_0x43088c[_0x4d20cc(0xfd)]((_0x32abfc,_0x4c01a5)=>{const _0x35b547=_0x4d20cc;_0x32abfc[_0x35b547(0x125)]=_0x4c01a5+0x1;}),playerCacheD2[_0x4d20cc(0x10f)]=_0x43088c,playerCacheD2[_0x4d20cc(0x10a)]=_0x25f2ce,updateLadderDisplayD2(_0x43088c);}catch(_0x4ad0d7){console['error']('Error\x20loading\x20D2\x20ladder:',_0x4ad0d7),_0x3d81e9['innerHTML']=_0x4d20cc(0x150)+_0x4ad0d7[_0x4d20cc(0x118)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getNextAvailablePositionD2(_0x473dd7){const _0x2bc81c=a32_0x367b;if(_0x473dd7[_0x2bc81c(0x116)]===0x0)return 0x1;let _0x4cf8d7=0x0;return _0x473dd7['forEach'](_0x1ae5f0=>{const _0x3bd23c=_0x2bc81c;_0x1ae5f0['position']&&typeof _0x1ae5f0[_0x3bd23c(0x125)]===_0x3bd23c(0x123)&&_0x1ae5f0[_0x3bd23c(0x125)]>_0x4cf8d7&&(_0x4cf8d7=_0x1ae5f0[_0x3bd23c(0x125)]);}),_0x4cf8d7+0x1;}async function updatePlayerPositions(_0xad7797,_0x5b12eb){const _0x36c3d4=a32_0x367b;try{const _0x44cf26=collection(db,_0x36c3d4(0x103)),_0x3320d3=await getDocs(_0x44cf26),_0x240073=[];_0x3320d3[_0x36c3d4(0xfd)](_0xa75d16=>{const _0x17851a=_0x36c3d4;_0x240073[_0x17851a(0x149)]({'id':_0xa75d16['id'],..._0xa75d16[_0x17851a(0x10f)]()});});const _0x22e08d=_0x240073[_0x36c3d4(0xf8)](_0x43dd54=>_0x43dd54[_0x36c3d4(0x135)]===_0xad7797),_0x95da7a=_0x240073[_0x36c3d4(0xf8)](_0x3aff86=>_0x3aff86[_0x36c3d4(0x135)]===_0x5b12eb);if(!_0x22e08d||!_0x95da7a){console[_0x36c3d4(0x101)](_0x36c3d4(0xe7));return;}if(_0x22e08d[_0x36c3d4(0x125)]>_0x95da7a[_0x36c3d4(0x125)]){const _0x268cd0=_0x95da7a[_0x36c3d4(0x125)];for(const _0xa436d5 of _0x240073){_0xa436d5[_0x36c3d4(0x125)]>=_0x95da7a[_0x36c3d4(0x125)]&&_0xa436d5[_0x36c3d4(0x125)]<_0x22e08d[_0x36c3d4(0x125)]&&_0xa436d5['username']!==_0xad7797&&await updateDoc(doc(db,_0x36c3d4(0x103),_0xa436d5['id']),{'position':_0xa436d5['position']+0x1});}await updateDoc(doc(db,_0x36c3d4(0x103),_0x22e08d['id']),{'position':_0x268cd0});if(_0x268cd0===0x1){const _0x1273d3=doc(db,_0x36c3d4(0x103),_0x22e08d['id']),_0x46b216=await getDoc(_0x1273d3);!_0x46b216[_0x36c3d4(0x10f)]()[_0x36c3d4(0x154)]&&await updateDoc(_0x1273d3,{'firstPlaceDate':Timestamp['now']()});}if(_0x95da7a['position']===0x1){const _0x364e15=doc(db,_0x36c3d4(0x103),_0x95da7a['id']);await updateDoc(_0x364e15,{'firstPlaceDate':null});}playerCacheD2[_0x36c3d4(0x10a)]=0x0;}}catch(_0xf91553){console[_0x36c3d4(0x101)](_0x36c3d4(0x10e),_0xf91553);}}function calculateStreakDays(_0x481de5){const _0x17ac40=a32_0x367b;if(!_0x481de5)return 0x0;const _0x2c048a=_0x481de5['toDate'](),_0x3b45f4=new Date(),_0x8d143d=Math[_0x17ac40(0x13e)](_0x3b45f4-_0x2c048a);return Math[_0x17ac40(0x111)](_0x8d143d/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x2b447e){const _0x5c8f69=a32_0x367b;if(_0x2b447e>=0x834)return'Emerald';if(_0x2b447e>=0x708)return'Gold';if(_0x2b447e>=0x640)return _0x5c8f69(0x109);if(_0x2b447e>=0x578)return _0x5c8f69(0x128);return'Unranked';}function a32_0x367b(_0x5dadfe,_0x12b156){const _0x21deeb=a32_0x20f5();return a32_0x367b=function(_0x21649d,_0x331567){_0x21649d=_0x21649d-0xde;let _0x389dc0=_0x21deeb[_0x21649d];return _0x389dc0;},a32_0x367b(_0x5dadfe,_0x12b156);}async function updateLadderDisplayD2(_0x5a469b){const _0x325145=a32_0x367b;_0x5a469b['sort']((_0x4f4c1c,_0x19ad5f)=>_0x4f4c1c['position']-_0x19ad5f[_0x325145(0x125)]);const _0x4ff024=document[_0x325145(0x107)]('#ladder-d2\x20tbody');if(!_0x4ff024)return;_0x4ff024['innerHTML']='';const _0xdf6ec1=_0x5a469b[_0x325145(0x140)](_0x2a6c48=>_0x2a6c48[_0x325145(0x135)]),_0x55e946=await fetchBatchMatchStatsD2(_0xdf6ec1),_0x5d9a87=document['querySelector']('#ladder-d2\x20thead\x20tr');_0x5d9a87&&(_0x5d9a87[_0x325145(0x11a)]=_0x325145(0xe9));const _0x1612b7=_0x5a469b[_0x325145(0x140)](_0x19ae8a=>{const _0x4e3e84=_0x325145,_0xce54b7=_0x55e946[_0x4e3e84(0x130)](_0x19ae8a[_0x4e3e84(0x135)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x19ae8a,_0xce54b7);})[_0x325145(0x117)]('');_0x4ff024[_0x325145(0x11a)]=_0x1612b7,getPlayersLastEloChangesD2(_0xdf6ec1)[_0x325145(0xf9)](_0x4f08d4=>{const _0x1fec69=_0x325145,_0x54a936=new Map();_0x4ff024['querySelectorAll']('tr')[_0x1fec69(0xfd)]((_0x57c978,_0x1ed640)=>{_0x1ed640<_0xdf6ec1['length']&&_0x54a936['set'](_0xdf6ec1[_0x1ed640],_0x57c978);}),_0x4f08d4[_0x1fec69(0xfd)]((_0x43670e,_0x3c1e96)=>{const _0x19007b=_0x1fec69,_0x129f59=_0x54a936[_0x19007b(0x130)](_0x3c1e96);if(_0x129f59&&_0x43670e!==0x0){const _0x3872f7=_0x129f59['querySelector'](_0x19007b(0xde));if(_0x3872f7){const _0x2e0ae8=_0x43670e>0x0?'+'+_0x43670e:''+_0x43670e,_0x1c26bd=_0x3872f7[_0x19007b(0x107)](_0x19007b(0xf6));_0x1c26bd&&(_0x1c26bd[_0x19007b(0x133)]=_0x2e0ae8,_0x1c26bd['style'][_0x19007b(0x12e)]=_0x43670e>0x0?_0x19007b(0xf1):_0x19007b(0x110),_0x1c26bd['style'][_0x19007b(0x141)]='bold',_0x1c26bd['style'][_0x19007b(0x12a)]=_0x19007b(0x115),_0x1c26bd[_0x19007b(0xfa)][_0x19007b(0x112)]=_0x19007b(0x12c),_0x1c26bd[_0x19007b(0xfa)]['visibility']=_0x19007b(0x11e),_0x1c26bd[_0x19007b(0xfa)][_0x19007b(0x113)]='1');}}});})[_0x325145(0xea)](_0x465020=>console[_0x325145(0x101)](_0x325145(0x10d),_0x465020));}function createPlayerRowD2(_0x3c881f,_0x5d2cc8){const _0x30bf36=a32_0x367b,_0x5a7c46=parseFloat(_0x3c881f[_0x30bf36(0x14a)])||0x0;let _0x47c70a='gray';if(_0x5a7c46>=0x7d0)_0x47c70a=_0x30bf36(0x14b);else{if(_0x5a7c46>=0x708)_0x47c70a='#FFD700';else{if(_0x5a7c46>=0x640)_0x47c70a=_0x30bf36(0x143);else _0x5a7c46>=0x578&&(_0x47c70a='#CD7F32');}}let _0x193cec='';return _0x3c881f[_0x30bf36(0x126)]&&(_0x193cec=_0x30bf36(0xe1)+_0x3c881f[_0x30bf36(0x126)][_0x30bf36(0x137)]()+_0x30bf36(0x104)+_0x3c881f['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c881f[_0x30bf36(0x125)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x3c881f['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x47c70a+_0x30bf36(0x11b)+_0x3c881f[_0x30bf36(0x135)]+_0x30bf36(0x144)+_0x193cec+_0x30bf36(0x119)+_0x47c70a+_0x30bf36(0x12d)+_0x5a7c46+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5d2cc8[_0x30bf36(0x14e)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5d2cc8[_0x30bf36(0xed)]+_0x30bf36(0x152)+_0x5d2cc8['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5d2cc8[_0x30bf36(0x14c)]+_0x30bf36(0x152)+_0x5d2cc8['winRate']+_0x30bf36(0x12f);}async function getPlayersLastEloChangesD2(_0x3d5b14){const _0x13d824=a32_0x367b,_0x438d33=new Map();_0x3d5b14['forEach'](_0x28a730=>_0x438d33[_0x13d824(0x13d)](_0x28a730,0x0));try{const _0x1c2bb5=collection(db,_0x13d824(0x148)),_0x6fee2b=query(_0x1c2bb5,orderBy(_0x13d824(0x10a),'desc'),limit(0x64)),_0x4284ef=await getDocs(_0x6fee2b),_0x2756ad=new Map(),_0x5de7c7=await getDocs(collection(db,'playersD2'));_0x5de7c7[_0x13d824(0xfd)](_0x54e7b7=>{const _0x47d3f2=_0x13d824,_0x28f800=_0x54e7b7[_0x47d3f2(0x10f)]();_0x28f800[_0x47d3f2(0x135)]&&_0x2756ad[_0x47d3f2(0x13d)](_0x54e7b7['id'],_0x28f800[_0x47d3f2(0x135)]);});const _0x239559=new Map();_0x4284ef[_0x13d824(0xfd)](_0x12fdcf=>{const _0x397e0c=_0x13d824,_0x5c9ad6=_0x12fdcf[_0x397e0c(0x10f)]();let _0x4a65d4=_0x5c9ad6[_0x397e0c(0x135)]||_0x5c9ad6['playerUsername'];!_0x4a65d4&&_0x5c9ad6[_0x397e0c(0x14f)]&&_0x2756ad['has'](_0x5c9ad6[_0x397e0c(0x14f)])&&(_0x4a65d4=_0x2756ad['get'](_0x5c9ad6[_0x397e0c(0x14f)]));if(!_0x4a65d4&&_0x5c9ad6[_0x397e0c(0xee)]){}_0x4a65d4&&_0x3d5b14[_0x397e0c(0xf3)](_0x4a65d4)&&(!_0x239559['has'](_0x4a65d4)&&_0x239559[_0x397e0c(0x13d)](_0x4a65d4,[]),_0x239559['get'](_0x4a65d4)[_0x397e0c(0x149)]({..._0x5c9ad6,'timestamp':_0x5c9ad6[_0x397e0c(0x10a)]?.[_0x397e0c(0x146)]||0x0,'username':_0x4a65d4}));}),_0x239559['forEach']((_0x7b292b,_0x376dca)=>{const _0x35fc26=_0x13d824;if(_0x7b292b['length']>0x0){_0x7b292b[_0x35fc26(0x139)]((_0x18ce83,_0x5946fa)=>_0x5946fa[_0x35fc26(0x10a)]-_0x18ce83[_0x35fc26(0x10a)]);const _0x20980d=_0x7b292b['find'](_0x33ebc1=>_0x33ebc1[_0x35fc26(0xe2)]!==undefined||_0x33ebc1[_0x35fc26(0x105)]!==undefined&&_0x33ebc1[_0x35fc26(0xf0)]!==undefined);if(_0x20980d){let _0x5338cd;if(_0x20980d[_0x35fc26(0xe2)]!==undefined)_0x5338cd=_0x20980d[_0x35fc26(0xe2)];else _0x20980d[_0x35fc26(0x105)]!==undefined&&_0x20980d[_0x35fc26(0xf0)]!==undefined&&(_0x5338cd=_0x20980d[_0x35fc26(0x105)]-_0x20980d[_0x35fc26(0xf0)]);_0x5338cd!==undefined&&_0x438d33[_0x35fc26(0x13d)](_0x376dca,_0x5338cd);}}});if(_0x239559[_0x13d824(0x129)]===0x0){const _0xa2f2c7=collection(db,_0x13d824(0x106)),_0x37aee6=query(_0xa2f2c7,where(_0x13d824(0x13b),'==','D2'),orderBy('timestamp','desc'),limit(0x32));try{const _0x1ee56c=await getDocs(_0x37aee6);console[_0x13d824(0xff)](_0x13d824(0x11f),_0x1ee56c[_0x13d824(0x129)],'fallback\x20entries'),_0x1ee56c[_0x13d824(0xfd)](_0x4de168=>{const _0x362473=_0x13d824,_0x48a2a7=_0x4de168['data'](),_0x3eb040=_0x48a2a7[_0x362473(0x135)]||_0x48a2a7[_0x362473(0xe5)];if(_0x3eb040&&_0x3d5b14['includes'](_0x3eb040)){const _0x435ee2=_0x48a2a7[_0x362473(0xe2)]||(_0x48a2a7[_0x362473(0x105)]!==undefined&&_0x48a2a7[_0x362473(0xf0)]!==undefined?_0x48a2a7[_0x362473(0x105)]-_0x48a2a7[_0x362473(0xf0)]:0x0);_0x435ee2!==0x0&&(_0x438d33[_0x362473(0x13d)](_0x3eb040,_0x435ee2),console[_0x362473(0xff)](_0x362473(0x131)+_0x3eb040+'\x20fallback\x20ELO\x20change:\x20'+_0x435ee2));}});}catch(_0x4d8cd4){}}}catch(_0x3df71f){console[_0x13d824(0x101)](_0x13d824(0x121),_0x3df71f);}return _0x438d33;}async function fetchBatchMatchStatsD2(_0x4cf931){const _0x210b3a=a32_0x367b,_0x2c7c8f=new Map();try{_0x4cf931[_0x210b3a(0xfd)](_0x1cfe1b=>{const _0x36d36b=_0x210b3a;_0x2c7c8f[_0x36d36b(0x13d)](_0x1cfe1b,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x1d312d=collection(db,_0x210b3a(0x138)),_0x45c0ea=await getDocs(_0x1d312d);_0x45c0ea[_0x210b3a(0xfd)](_0x3e7c77=>{const _0x480f9a=_0x210b3a,_0x478c56=_0x3e7c77[_0x480f9a(0x10f)](),_0x351eb7=_0x478c56[_0x480f9a(0xeb)],_0x1d165a=_0x478c56[_0x480f9a(0x13c)];if(_0x4cf931['includes'](_0x351eb7)){const _0x49c06b=_0x2c7c8f['get'](_0x351eb7);_0x49c06b[_0x480f9a(0xed)]++,_0x49c06b[_0x480f9a(0x14e)]++,_0x49c06b['totalKills']+=parseInt(_0x478c56[_0x480f9a(0x13f)])||0x0,_0x49c06b[_0x480f9a(0xe3)]+=parseInt(_0x478c56[_0x480f9a(0x142)])||0x0;}if(_0x4cf931[_0x480f9a(0xf3)](_0x1d165a)){const _0x275584=_0x2c7c8f['get'](_0x1d165a);_0x275584[_0x480f9a(0x134)]++,_0x275584[_0x480f9a(0x14e)]++,_0x275584['totalKills']+=parseInt(_0x478c56['loserScore'])||0x0,_0x275584[_0x480f9a(0xe3)]+=parseInt(_0x478c56[_0x480f9a(0x13f)])||0x0;}}),_0x4cf931[_0x210b3a(0xfd)](_0x343752=>{const _0x309c08=_0x210b3a,_0x39c8b7=_0x2c7c8f['get'](_0x343752);_0x39c8b7[_0x309c08(0x14c)]=_0x39c8b7[_0x309c08(0xe3)]>0x0?(_0x39c8b7[_0x309c08(0xfe)]/_0x39c8b7['totalDeaths'])[_0x309c08(0xfc)](0x2):_0x39c8b7['totalKills'][_0x309c08(0xfc)](0x2),_0x39c8b7[_0x309c08(0x102)]=_0x39c8b7[_0x309c08(0x14e)]>0x0?(_0x39c8b7[_0x309c08(0xed)]/_0x39c8b7[_0x309c08(0x14e)]*0x64)[_0x309c08(0xfc)](0x1):0x0;});}catch(_0x19d0c9){console['error'](_0x210b3a(0xe6),_0x19d0c9);}return _0x2c7c8f;}export{displayLadderD2,updatePlayerPositions};