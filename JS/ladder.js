const a25_0x40b4cd=a25_0x5a05,a25_0x5814c8=(function(){let _0x3cfc66=!![];return function(_0x9990d3,_0x5807c4){const _0x589dbd=_0x3cfc66?function(){if(_0x5807c4){const _0x201d44=_0x5807c4['apply'](_0x9990d3,arguments);return _0x5807c4=null,_0x201d44;}}:function(){};return _0x3cfc66=![],_0x589dbd;};}()),a25_0xe73e17=a25_0x5814c8(this,function(){const _0x1d2d66=a25_0x5a05;let _0xa018e5;try{const _0x5a5068=Function(_0x1d2d66(0xed)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xa018e5=_0x5a5068();}catch(_0x213fff){_0xa018e5=window;}const _0x2865c7=_0xa018e5['console']=_0xa018e5['console']||{},_0x323496=['log','warn','info','error',_0x1d2d66(0xce),_0x1d2d66(0xef),'trace'];for(let _0x57586a=0x0;_0x57586a<_0x323496['length'];_0x57586a++){const _0x26c679=a25_0x5814c8['constructor']['prototype']['bind'](a25_0x5814c8),_0x1adbdc=_0x323496[_0x57586a],_0x12e538=_0x2865c7[_0x1adbdc]||_0x26c679;_0x26c679['__proto__']=a25_0x5814c8['bind'](a25_0x5814c8),_0x26c679['toString']=_0x12e538['toString']['bind'](_0x12e538),_0x2865c7[_0x1adbdc]=_0x26c679;}});a25_0xe73e17();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';function a25_0x112a(){const _0x3d8805=['eloRating','add','empty','warn','%</td>\x0a\x20\x20\x20\x20</tr>','elo-recommendation-text-duos','querySelector','Bronze','<img\x20src=\x22../images/flags/','playersD3','addEventListener',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','userProfiles',';\x22>','d1-ladder-container','oldEloRating','visible','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','catch','join','brian2af@outlook.com','username','playerUsername','title','totalKills','roleName','eloHistory','hasTeam','#FFD700','none','bold','log','elo-recommendation-text-d3','newEloRating','max','d3-ladder-container','winRate','error','#b9f1fc','totalMatches','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','pointer','data','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','change','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','playersD','Based\x20on\x20your\x20ELO\x20(','#CD7F32','ELO\x20history\x20collection\x20is\x20empty','position','set','toUpperCase','not-allowed','elo-recommendation-text-d2','style','Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','exception','DOMContentLoaded','Active','length','elo','Error\x20finding\x20best\x20opponent:','display','newElo','recentActivity','sort','duos-ladder-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','creative\x20lead','get','Error\x20checking\x20','textContent','\x20ladder','</span>\x20(ELO:\x20','MAX_SAFE_INTEGER','tokenName','previousElo','getElementById','elo-recommendation-text-d1','player','players','country','createElement','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','forEach','You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>','Emerald','return\x20(function()\x20','toFixed','table','div','\x20not\x20found','active','exists','parentNode','innerHTML','map','includes','remove','owner','<img\x20src=\x22','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!','</span>','losses','duos','appendChild','toLowerCase','visibility','block','#4CAF50','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','timestamp','gray'];a25_0x112a=function(){return _0x3d8805;};return a25_0x112a();}const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x26938d=0x1){const _0x5da7fb=a25_0x5a05;try{document[_0x5da7fb(0xe3)]('loading-indicator')[_0x5da7fb(0xcc)]['display']='block';const _0x499c8a=await getLadderData(_0x26938d);_0x499c8a['sort']((_0x573445,_0x55552c)=>_0x55552c['elo']-_0x573445['elo']);const _0x24ea17=_0x499c8a['map'](_0x5e1333=>_0x5e1333['id']),_0x586f64=await getEloHistoryBatch(_0x24ea17,_0x26938d),_0x523ae3=_0x499c8a['map']((_0x238dd2,_0x1fd48f)=>{const _0x5b8a55=_0x5da7fb,_0x374c1d=_0x586f64[_0x238dd2['id']]||[],_0x4e3741=_0x374c1d[_0x5b8a55(0xd7)]((_0x163ff7,_0x1cb88b)=>new Date(_0x1cb88b['date'])-new Date(_0x163ff7['date']))['slice'](0x0,0x5);return{..._0x238dd2,'rank':_0x1fd48f+0x1,'lastMatches':_0x4e3741,'recentActivity':_0x4e3741[_0x5b8a55(0xd1)]>0x0};});renderLadder(_0x523ae3),setupRealTimeUpdates(_0x26938d);}catch(_0x13dcd0){console['error']('Error\x20loading\x20ladder\x20data:',_0x13dcd0),document[_0x5da7fb(0xe3)]('error-message')['innerText']=_0x5da7fb(0xc0);}finally{document[_0x5da7fb(0xe3)]('loading-indicator')['style']['display']='none';}}function setupRealTimeUpdates(_0x480f65=0x1){const _0x39ba39=a25_0x5a05;activeListeners['forEach'](_0x4cbc5a=>_0x4cbc5a()),activeListeners=[];const _0x4dbb48=_0x480f65===0x1?'players':_0x39ba39(0xc3)+_0x480f65,_0x513405=_0x480f65===0x1?'matches':'matchesD'+_0x480f65,_0x3f83f1=new Date();_0x3f83f1['setDate'](_0x3f83f1['getDate']()-0x1);const _0x4e6386=setupEfficientListener(_0x513405,[where('date','>=',_0x3f83f1['toISOString']()),limit(0xa),orderBy('date','desc')],async _0x181a29=>{_0x181a29['length']>0x0&&await loadLadderData(_0x480f65);});activeListeners['push'](_0x4e6386);}export function cleanupListeners(){const _0x1425ce=a25_0x5a05;activeListeners[_0x1425ce(0xea)](_0x2f009f=>_0x2f009f()),activeListeners=[];}function renderLadder(_0x566e99){const _0x55be63=a25_0x5a05,_0x945882=document[_0x55be63(0xe3)]('ladder-container');_0x945882['innerHTML']='',_0x566e99['forEach'](_0x41155f=>{const _0x49f12f=_0x55be63,_0x5ba0cc=document[_0x49f12f(0xe8)]('div');_0x5ba0cc['className']='ladder-player',_0x5ba0cc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x41155f['rank']+_0x49f12f(0xa6)+(_0x41155f[_0x49f12f(0xaa)]||_0x41155f['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x41155f[_0x49f12f(0xd2)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x41155f['recentActivity']?_0x49f12f(0xf2):'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x41155f[_0x49f12f(0xd6)]?_0x49f12f(0xd0):'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x945882[_0x49f12f(0x100)](_0x5ba0cc);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x1c0724=![]){const _0x20fe88=a25_0x5a05,_0x9cd66a=document[_0x20fe88(0x9b)]('#ladder\x20tbody');if(!_0x9cd66a){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x9cd66a['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0xe68fd4=Date['now']();if(!_0x1c0724&&playerCache['data']&&_0xe68fd4-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x2716fc=collection(db,_0x20fe88(0xe6)),_0x128258=await getDocs(_0x2716fc),_0x288a4d=[];_0x128258[_0x20fe88(0xea)](_0x53aea6=>{const _0x16612d=_0x20fe88,_0x39e2ac=_0x53aea6['data']();_0x288a4d['push']({..._0x39e2ac,'id':_0x53aea6['id'],'elo':_0x39e2ac[_0x16612d(0x95)]||0x0,'position':_0x39e2ac['position']||Number[_0x16612d(0xe0)]});});const _0x43f411=collection(db,'userProfiles'),_0x3c515a=await getDocs(_0x43f411),_0x5a155a=new Map();_0x3c515a[_0x20fe88(0xea)](_0x42728a=>{const _0x19f838=_0x42728a['data']();_0x19f838['username']&&_0x5a155a['set'](_0x19f838['username']['toLowerCase'](),_0x19f838);}),_0x288a4d['forEach'](_0x5759d3=>{const _0xced41a=_0x20fe88,_0x13c17c=_0x5759d3['username']?.[_0xced41a(0x101)]();if(_0x13c17c&&_0x5a155a['has'](_0x13c17c)){const _0x1c470f=_0x5a155a['get'](_0x13c17c);_0x1c470f['country']&&(_0x5759d3[_0xced41a(0xe7)]=_0x1c470f['country']['toLowerCase']());}});const _0x4a254e=_0x288a4d[_0x20fe88(0xf6)](_0x5a1396=>_0x5a1396[_0x20fe88(0xaa)]),_0x23c842=await fetchBatchMatchStats(_0x4a254e);_0x288a4d['sort']((_0x1af852,_0x4f3093)=>{const _0x244cfc=_0x20fe88,_0x2b0490=_0x23c842['get'](_0x1af852[_0x244cfc(0xaa)])?.[_0x244cfc(0xbc)]||0x0,_0x4afd4a=_0x23c842['get'](_0x4f3093['username'])?.['totalMatches']||0x0;if(_0x2b0490===0x0!==(_0x4afd4a===0x0))return _0x2b0490===0x0?0x1:-0x1;return(_0x1af852['position']||0x3e7)-(_0x4f3093[_0x244cfc(0xc7)]||0x3e7);}),_0x288a4d['forEach']((_0x1f9a9c,_0x49fc76)=>{_0x1f9a9c['position']=_0x49fc76+0x1;}),playerCache[_0x20fe88(0xbf)]=_0x288a4d,playerCache[_0x20fe88(0x107)]=_0xe68fd4,updateLadderDisplay(_0x288a4d,_0x23c842);}catch(_0x5997bb){console['error']('Error\x20loading\x20ladder:',_0x5997bb),_0x9cd66a[_0x20fe88(0xf5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x5997bb['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x37c4b8){const _0x3b71df=a25_0x5a05,_0x2c9de8=new Map();try{_0x37c4b8['forEach'](_0x5cf151=>{_0x2c9de8['set'](_0x5cf151,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0xe49a30=collection(db,'approvedMatches'),_0x4425cc=await getDocs(_0xe49a30);_0x4425cc['forEach'](_0x3acd84=>{const _0x11175e=a25_0x5a05,_0xe6697c=_0x3acd84['data'](),_0x1509f0=_0xe6697c['winnerUsername'],_0x5b3e9c=_0xe6697c['loserUsername'];if(_0x37c4b8[_0x11175e(0xf7)](_0x1509f0)){const _0x3d8fc7=_0x2c9de8[_0x11175e(0xdb)](_0x1509f0);_0x3d8fc7['wins']++,_0x3d8fc7['totalMatches']++,_0x3d8fc7[_0x11175e(0xad)]+=parseInt(_0xe6697c['winnerScore'])||0x0,_0x3d8fc7['totalDeaths']+=parseInt(_0xe6697c['loserScore'])||0x0;}if(_0x37c4b8[_0x11175e(0xf7)](_0x5b3e9c)){const _0x43e111=_0x2c9de8[_0x11175e(0xdb)](_0x5b3e9c);_0x43e111['losses']++,_0x43e111['totalMatches']++,_0x43e111[_0x11175e(0xad)]+=parseInt(_0xe6697c['loserScore'])||0x0,_0x43e111['totalDeaths']+=parseInt(_0xe6697c['winnerScore'])||0x0;}}),_0x37c4b8[_0x3b71df(0xea)](_0x12f655=>{const _0x29074c=_0x3b71df,_0x39b0d9=_0x2c9de8['get'](_0x12f655);_0x39b0d9['kda']=_0x39b0d9['totalDeaths']>0x0?(_0x39b0d9[_0x29074c(0xad)]/_0x39b0d9['totalDeaths'])['toFixed'](0x2):_0x39b0d9[_0x29074c(0xad)][_0x29074c(0xee)](0x2),_0x39b0d9['winRate']=_0x39b0d9['totalMatches']>0x0?(_0x39b0d9['wins']/_0x39b0d9['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x25e1d2){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x25e1d2);}return _0x2c9de8;}function createPlayerRow(_0x17671d,_0x27c229){const _0x4109e8=a25_0x5a05,_0x3b3c9e=parseFloat(_0x17671d['elo'])||0x0;let _0x4faa2a='gray';if(_0x3b3c9e>=0x7d0)_0x4faa2a='#50C878';else{if(_0x3b3c9e>=0x708)_0x4faa2a=_0x4109e8(0xb1);else{if(_0x3b3c9e>=0x640)_0x4faa2a='#b9f1fc';else _0x3b3c9e>=0x578&&(_0x4faa2a='#CD7F32');}}let _0x3712e2='';return _0x17671d[_0x4109e8(0xe7)]&&(_0x3712e2=_0x4109e8(0x9d)+_0x17671d['country']['toLowerCase']()+_0x4109e8(0xfb)+_0x17671d['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x17671d['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x17671d[_0x4109e8(0xaa)])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x4faa2a+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x17671d[_0x4109e8(0xaa)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3712e2+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x4faa2a+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3b3c9e+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x27c229['totalMatches']+_0x4109e8(0xe9)+_0x27c229['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x27c229['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x27c229['kda']+_0x4109e8(0xe9)+_0x27c229[_0x4109e8(0xb9)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x48d0dc){const _0x4e1f1e=a25_0x5a05;if(_0x48d0dc>=0x7d0)return _0x4e1f1e(0xec);if(_0x48d0dc>=0x708)return'Gold';if(_0x48d0dc>=0x640)return'Silver';if(_0x48d0dc>=0x578)return _0x4e1f1e(0x9c);return'Unranked';}async function getPlayersLastEloChanges(_0xb36689){const _0x207f25=a25_0x5a05,_0x550d14=new Map();_0xb36689[_0x207f25(0xea)](_0xc7461e=>{_0x550d14['set'](_0xc7461e,0x0);});try{const _0x32596c=collection(db,'players'),_0x3f6455=await getDocs(_0x32596c),_0x45f4f8=new Map(),_0x33da7c=new Map();_0x3f6455[_0x207f25(0xea)](_0x496ee5=>{const _0x4e4ed5=_0x207f25,_0x1eaa2a=_0x496ee5[_0x4e4ed5(0xbf)]();_0x1eaa2a[_0x4e4ed5(0xaa)]&&(_0x45f4f8['set'](_0x496ee5['id'],_0x1eaa2a[_0x4e4ed5(0xaa)]),_0x33da7c['set'](_0x1eaa2a[_0x4e4ed5(0xaa)][_0x4e4ed5(0x101)](),_0x496ee5['id']));});const _0x548768=collection(db,_0x207f25(0xaf)),_0x1e5357=query(_0x548768,orderBy('timestamp','desc'),limit(0x12c)),_0x536849=await getDocs(_0x1e5357);if(_0x536849['empty'])return console['log'](_0x207f25(0xc6)),_0x550d14;if(_0x536849['docs']['length']>0x0){const _0x58f78d=_0x536849['docs'][0x0]['data']();if(_0x58f78d['player']&&_0x45f4f8['has'](_0x58f78d[_0x207f25(0xe5)])){}}const _0x433784=new Map();let _0x3c9f0c=0x0;_0x536849['forEach'](_0xe740e=>{const _0x510238=_0x207f25,_0x16fc86=_0xe740e['data']();let _0x20a362=null;if(_0x16fc86[_0x510238(0xe5)]&&_0x45f4f8['has'](_0x16fc86['player']))_0x20a362=_0x45f4f8[_0x510238(0xdb)](_0x16fc86['player']);else{if(_0x16fc86['username']&&_0x33da7c['has'](_0x16fc86[_0x510238(0xaa)]['toLowerCase']()))_0x20a362=_0x16fc86[_0x510238(0xaa)];else _0x16fc86['playerUsername']&&_0x33da7c['has'](_0x16fc86[_0x510238(0xab)][_0x510238(0x101)]())&&(_0x20a362=_0x16fc86[_0x510238(0xab)]);}_0x20a362&&_0xb36689[_0x510238(0xf7)](_0x20a362)&&(_0x3c9f0c++,!_0x433784['has'](_0x20a362)&&_0x433784[_0x510238(0xc8)](_0x20a362,[]),_0x433784['get'](_0x20a362)['push']({..._0x16fc86,'timestamp':_0x16fc86['timestamp']?.['seconds']||0x0}));}),_0x433784['forEach']((_0x24e88b,_0x54bdcb)=>{const _0xa09c91=_0x207f25;if(_0x24e88b['length']>0x0){_0x24e88b['sort']((_0xf7db80,_0x340d19)=>_0x340d19[_0xa09c91(0x107)]-_0xf7db80['timestamp']);const _0x4b6dc6=_0x24e88b['find'](_0x4e86a6=>_0x4e86a6['change']!==undefined||_0x4e86a6[_0xa09c91(0xd5)]!==undefined&&_0x4e86a6[_0xa09c91(0xe2)]!==undefined||_0x4e86a6['newEloRating']!==undefined&&_0x4e86a6[_0xa09c91(0xa4)]!==undefined);if(_0x4b6dc6){let _0x50a9ff;if(_0x4b6dc6[_0xa09c91(0xc1)]!==undefined)_0x50a9ff=parseInt(_0x4b6dc6['change']);else{if(_0x4b6dc6['newElo']!==undefined&&entry['previousElo']!==undefined)_0x50a9ff=parseInt(_0x4b6dc6['newElo'])-parseInt(_0x4b6dc6['previousElo']);else _0x4b6dc6[_0xa09c91(0xb6)]!==undefined&&entry['oldEloRating']!==undefined&&(_0x50a9ff=parseInt(_0x4b6dc6[_0xa09c91(0xb6)])-parseInt(_0x4b6dc6['oldEloRating']));}!isNaN(_0x50a9ff)&&_0x50a9ff!==0x0&&_0x550d14['set'](_0x54bdcb,_0x50a9ff);}}});}catch(_0xfc901){console['error']('Error\x20fetching\x20ELO\x20history:',_0xfc901);}return _0x550d14;}function createPlayerRowWithToken(_0x115a0b,_0x20a560,_0x2db5b8){const _0x26a64a=a25_0x5a05,_0x3daeda=parseFloat(_0x115a0b['elo'])||0x0;let _0x5c104a='gray';if(_0x3daeda>=0x7d0)_0x5c104a='#50C878';else{if(_0x3daeda>=0x708)_0x5c104a='#FFD700';else{if(_0x3daeda>=0x640)_0x5c104a=_0x26a64a(0xbb);else _0x3daeda>=0x578&&(_0x5c104a=_0x26a64a(0xc5));}}let _0x5b6656='';_0x115a0b[_0x26a64a(0xe7)]&&(_0x5b6656='<img\x20src=\x22../images/flags/'+_0x115a0b['country']['toLowerCase']()+_0x26a64a(0xfb)+_0x115a0b['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x47b1c6='';return _0x2db5b8&&(_0x47b1c6=_0x26a64a(0xfa)+_0x2db5b8['tokenImage']+_0x26a64a(0xbd)+_0x2db5b8[_0x26a64a(0xe1)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x2db5b8[_0x26a64a(0xe1)]+'\x20'+(_0x2db5b8['equipped']?'(Equipped)':'')+_0x26a64a(0x105)),_0x26a64a(0xc2)+_0x115a0b[_0x26a64a(0xc7)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x115a0b['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x5c104a+_0x26a64a(0xa0)+_0x115a0b['username']+_0x26a64a(0xd9)+_0x5b6656+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x47b1c6+_0x26a64a(0x106)+_0x5c104a+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3daeda+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x20a560[_0x26a64a(0xbc)]+_0x26a64a(0xe9)+_0x20a560['wins']+_0x26a64a(0xe9)+_0x20a560[_0x26a64a(0xfe)]+_0x26a64a(0xe9)+_0x20a560['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x20a560[_0x26a64a(0xb9)]+_0x26a64a(0x99);}async function updateLadderDisplay(_0xf4e655,_0x14d063=null){const _0x4192ff=a25_0x5a05,_0x83379e=document['querySelector']('#ladder\x20tbody');if(!_0x83379e){console[_0x4192ff(0xba)]('Ladder\x20table\x20body\x20not\x20found');return;}const _0x5c282d=document['querySelector']('#ladder\x20thead\x20tr');_0x5c282d&&(_0x5c282d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x4875c5=_0xf4e655[_0x4192ff(0xf6)](_0x5eba53=>_0x5eba53[_0x4192ff(0xaa)]);!_0x14d063&&(_0x14d063=await fetchBatchMatchStats(_0x4875c5));let _0x1aa182=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x1aa182=await getTokensByUsernames(_0x4875c5),console['log']('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x1aa182['size'],'players'),_0x1aa182[_0x4192ff(0xea)]((_0x36ef17,_0x5ee956)=>{const _0x1edc5d=_0x4192ff,_0x4abda0=_0x36ef17['find'](_0x482a41=>_0x482a41['equipped']);_0x4abda0&&console[_0x1edc5d(0xb4)]('ðŸŽ¯\x20'+_0x5ee956+'\x20has\x20equipped:\x20'+_0x4abda0['tokenName']);});}catch(_0x1288f0){console['error']('Error\x20fetching\x20tokens:',_0x1288f0);}const _0x51e93e=_0xf4e655['map'](_0x57d00c=>{const _0x22b39a=_0x4192ff,_0x243210=_0x14d063['get'](_0x57d00c[_0x22b39a(0xaa)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x580610=_0x1aa182[_0x22b39a(0xdb)](_0x57d00c['username'])||[],_0x3b9c4d=getPrimaryDisplayToken(_0x580610);return _0x3b9c4d&&console[_0x22b39a(0xb4)]('ðŸŽ¨\x20'+_0x57d00c['username']+'\x20displaying\x20token:\x20'+_0x3b9c4d['tokenName']+'\x20(equipped:\x20'+_0x3b9c4d['equipped']+')'),createPlayerRowWithToken(_0x57d00c,_0x243210,_0x3b9c4d);})[_0x4192ff(0xa8)]('');_0x83379e['innerHTML']=_0x51e93e,getPlayersLastEloChanges(_0x4875c5)['then'](_0x22481d=>{const _0x1420ed=new Map();_0x83379e['querySelectorAll']('tr')['forEach']((_0xf25565,_0xcc7bd6)=>{const _0x5ba623=a25_0x5a05;_0xcc7bd6<_0x4875c5[_0x5ba623(0xd1)]&&_0x1420ed[_0x5ba623(0xc8)](_0x4875c5[_0xcc7bd6],_0xf25565);}),_0x22481d['forEach']((_0x5972d1,_0x292c2e)=>{const _0x32b9ac=a25_0x5a05,_0x4a1696=_0x1420ed['get'](_0x292c2e);if(_0x4a1696&&_0x5972d1!==0x0){const _0x5db7b5=_0x4a1696[_0x32b9ac(0x9b)]('td:nth-child(3)');if(_0x5db7b5){const _0x47c5b1=_0x5972d1>0x0?'+'+_0x5972d1:''+_0x5972d1,_0x3600c8=_0x5db7b5['querySelector']('.trend-indicator');_0x3600c8&&(_0x3600c8['textContent']=_0x47c5b1,_0x3600c8['style']['color']=_0x5972d1>0x0?_0x32b9ac(0x104):'#F44336',_0x3600c8['style']['fontWeight']=_0x32b9ac(0xb3),_0x3600c8['style']['fontSize']='0.85em',_0x3600c8['style']['display']='inline',_0x3600c8[_0x32b9ac(0xcc)][_0x32b9ac(0x102)]=_0x32b9ac(0xa5),_0x3600c8['style']['opacity']='1');}}});})[_0x4192ff(0xa7)](_0x391aa9=>console[_0x4192ff(0xba)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x391aa9));}function a25_0x5a05(_0x53e0cb,_0x58ba26){const _0xe73e17=a25_0x112a();return a25_0x5a05=function(_0x5814c8,_0x82e56b){_0x5814c8=_0x5814c8-0x95;let _0x112ab6=_0xe73e17[_0x5814c8];return _0x112ab6;},a25_0x5a05(_0x53e0cb,_0x58ba26);}function initLadderToggles(){const _0x1d4af9=a25_0x5a05,_0x389838=document['getElementById']('d1-switch'),_0x1d2218=document['getElementById']('d2-switch'),_0x3f9a3f=document[_0x1d4af9(0xe3)]('d3-switch'),_0x3d82a1=document['getElementById']('duos-switch'),_0x43e2fc=document['getElementById'](_0x1d4af9(0xa3)),_0x568082=document['getElementById']('d2-ladder-container'),_0x1b6f43=document[_0x1d4af9(0xe3)]('d3-ladder-container'),_0x6c2b73=document['getElementById']('duos-ladder-container');function _0xec7814(){const _0x131781=_0x1d4af9;if(_0x43e2fc)_0x43e2fc['classList']['remove'](_0x131781(0xf2));if(_0x568082)_0x568082['classList']['remove']('active');if(_0x1b6f43)_0x1b6f43['classList']['remove'](_0x131781(0xf2));if(_0x6c2b73)_0x6c2b73['style'][_0x131781(0xd4)]=_0x131781(0xb2);if(_0x43e2fc)_0x43e2fc[_0x131781(0xcc)]['display']='none';if(_0x568082)_0x568082['style']['display']='none';if(_0x1b6f43)_0x1b6f43['style']['display']=_0x131781(0xb2);}_0x389838&&_0x389838[_0x1d4af9(0x9f)]('click',()=>{const _0x188e8a=_0x1d4af9;console[_0x188e8a(0xb4)]('D1\x20toggle\x20clicked'),_0xec7814();_0x43e2fc&&(_0x43e2fc['classList']['add']('active'),_0x43e2fc['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')[_0x188e8a(0xcc)]['display']=_0x188e8a(0x103),document[_0x188e8a(0xe3)](_0x188e8a(0xcb))['style']['display']='none',document['getElementById']('elo-recommendation-text-d3')[_0x188e8a(0xcc)]['display']='none';if(_0x389838)_0x389838['classList']['add']('active');if(_0x1d2218)_0x1d2218['classList']['remove']('active');if(_0x3f9a3f)_0x3f9a3f['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x1d2218&&_0x1d2218[_0x1d4af9(0x9f)]('click',()=>{const _0x4b0fb9=_0x1d4af9;console['log']('D2\x20toggle\x20clicked'),_0xec7814();_0x568082&&(_0x568082['classList'][_0x4b0fb9(0x96)]('active'),_0x568082['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')[_0x4b0fb9(0xcc)]['display']='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']='block',document['getElementById'](_0x4b0fb9(0xb5))[_0x4b0fb9(0xcc)]['display']=_0x4b0fb9(0xb2);if(_0x1d2218)_0x1d2218['classList']['add']('active');if(_0x389838)_0x389838['classList']['remove']('active');if(_0x3f9a3f)_0x3f9a3f['classList']['remove'](_0x4b0fb9(0xf2));displayLadderD2(),findBestOpponent('d2');}),_0x3f9a3f&&_0x3f9a3f[_0x1d4af9(0x9f)]('click',()=>{const _0x15d7cc=_0x1d4af9;console[_0x15d7cc(0xb4)]('D3\x20toggle\x20clicked'),_0xec7814();_0x1b6f43&&(_0x1b6f43['classList']['add']('active'),_0x1b6f43['style'][_0x15d7cc(0xd4)]=_0x15d7cc(0x103));document['getElementById'](_0x15d7cc(0xe4))['style']['display']='none',document[_0x15d7cc(0xe3)]('elo-recommendation-text-d2')['style'][_0x15d7cc(0xd4)]='none',document['getElementById'](_0x15d7cc(0xb5))['style']['display']='block';if(_0x3f9a3f)_0x3f9a3f['classList'][_0x15d7cc(0x96)]('active');if(_0x389838)_0x389838['classList'][_0x15d7cc(0xf8)]('active');if(_0x1d2218)_0x1d2218['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x3d82a1&&_0x3d82a1['addEventListener']('click',()=>{const _0x40c41b=_0x1d4af9;_0xec7814();if(_0x6c2b73)_0x6c2b73['style'][_0x40c41b(0xd4)]=_0x40c41b(0x103);displayLadderDuos(),findBestOpponent(_0x40c41b(0xff)),document['getElementById'](_0x40c41b(0x9a))&&(document[_0x40c41b(0xe3)](_0x40c41b(0x9a))['style']['display']='block'),document[_0x40c41b(0xe3)](_0x40c41b(0xe4))[_0x40c41b(0xcc)]['display']='none',document[_0x40c41b(0xe3)]('elo-recommendation-text-d2')[_0x40c41b(0xcc)]['display']='none',document['getElementById'](_0x40c41b(0xb5))['style'][_0x40c41b(0xd4)]='none';});}document[a25_0x40b4cd(0x9f)]('DOMContentLoaded',()=>{const _0x5a5d4e=a25_0x40b4cd;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')['style']['display']=_0x5a5d4e(0x103);});export{displayLadder};async function findBestOpponent(_0xc0babe='d1'){const _0x3cb678=a25_0x40b4cd,_0x1544f9='elo-recommendation-text-'+_0xc0babe,_0x324e86=document['getElementById'](_0x1544f9);if(!_0x324e86){console['error']('Recommendation\x20element\x20for\x20'+_0xc0babe+_0x3cb678(0xf1));return;}const _0x33d7f6=auth['currentUser'];if(!_0x33d7f6){_0x324e86['textContent']='';return;}try{const _0x44c13a=doc(db,_0x3cb678(0xa1),_0x33d7f6['uid']),_0x87205d=await getDoc(_0x44c13a);if(!_0x87205d[_0x3cb678(0xf3)]()){console['log']('No\x20user\x20profile\x20found'),_0x324e86['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x30561d=_0x87205d['data'](),_0x148133=_0x30561d['username'];if(!_0x148133){_0x324e86['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x208993;switch(_0xc0babe){case'd1':_0x208993=_0x3cb678(0xe6);break;case'd2':_0x208993='playersD2';break;case'd3':_0x208993=_0x3cb678(0x9e);break;case'duos':_0x208993='playersDuos';break;default:_0x208993='players';}if(_0xc0babe===_0x3cb678(0xff)){const _0xdcbc5f=collection(db,_0x208993),_0x28783f=query(_0xdcbc5f,where(_0x3cb678(0xaa),'==',_0x148133)),_0x727e88=await getDocs(_0x28783f);if(_0x727e88[_0x3cb678(0x97)]){_0x324e86['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x92389e=_0x727e88['docs'][0x0]['data'](),_0x4c4fc8=parseInt(_0x92389e['eloRating'])||0x4b0;if(_0x92389e['hasTeam']&&_0x92389e['teammate']){_0x324e86['innerHTML']=_0x3cb678(0xeb)+_0x92389e['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x36b864=await getDocs(_0xdcbc5f);let _0x586877=null,_0x5cc42d=-0x1;_0x36b864['forEach'](_0x1a4f2a=>{const _0x192442=_0x3cb678,_0x3cfe04=_0x1a4f2a[_0x192442(0xbf)]();if(_0x3cfe04[_0x192442(0xaa)]===_0x148133)return;if(_0x3cfe04[_0x192442(0xb0)])return;const _0x4e9859=parseInt(_0x3cfe04[_0x192442(0x95)])||0x4b0,_0x2bd884=Math['abs'](_0x4e9859-_0x4c4fc8),_0x440df8=Math[_0x192442(0xb7)](0x0,0xc8-_0x2bd884);_0x440df8>_0x5cc42d&&(_0x586877=_0x3cfe04,_0x5cc42d=_0x440df8);});if(_0x586877){const _0x3a6b03=parseInt(_0x586877[_0x3cb678(0x95)])||0x4b0;let _0x57d74b=_0x3cb678(0x108);if(_0x3a6b03>=0x7d0)_0x57d74b='#50C878';else{if(_0x3a6b03>=0x708)_0x57d74b=_0x3cb678(0xb1);else{if(_0x3a6b03>=0x640)_0x57d74b='#C0C0C0';else _0x3a6b03>=0x578&&(_0x57d74b='#CD7F32');}}_0x324e86['innerHTML']=_0x3cb678(0xcd)+_0x57d74b+';\x22>'+_0x586877[_0x3cb678(0xaa)]+_0x3cb678(0xdf)+_0x3a6b03+')';}else _0x324e86[_0x3cb678(0xdd)]=_0x3cb678(0xfc);return;}const _0x3badc2=collection(db,_0x208993),_0x4f2340=query(_0x3badc2,where('username','==',_0x148133)),_0x290742=await getDocs(_0x4f2340);if(_0x290742['empty']){_0x324e86['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0xc0babe[_0x3cb678(0xc9)]()+_0x3cb678(0xde);return;}const _0x10a935=_0x290742['docs'][0x0][_0x3cb678(0xbf)](),_0x1717c2=parseInt(_0x10a935['eloRating'])||0x5dc,_0x1aa8d0=await getDocs(_0x3badc2);let _0x18baa9=null,_0x725b77=-0x1;const _0x134af2=getPlayerRankName(_0x1717c2);_0x1aa8d0['forEach'](_0x417ede=>{const _0x413401=_0x3cb678,_0x803913=_0x417ede['data']();if(_0x803913[_0x413401(0xaa)]===_0x148133)return;const _0x16ebe3=parseInt(_0x803913[_0x413401(0x95)])||0x5dc,_0x254926=getPlayerRankName(_0x16ebe3),_0x3b187e=Math['abs'](_0x16ebe3-_0x1717c2),_0x9fef13=0x20,_0x5142b4=0x1/(0x1+Math['pow'](0xa,(_0x16ebe3-_0x1717c2)/0x190)),_0x503909=Math['round'](_0x9fef13*(0x1-_0x5142b4));if(_0x503909<=0x0)return;let _0x3d466e=0x0;const _0x1e5a78=Math['max'](0x0,0x64-_0x3b187e*0.5),_0x43133b=_0x503909>=0x3&&_0x503909<=0x8?0x32:_0x503909>0x0&&_0x503909<0xf?0x1e:0xa,_0x391657=_0x134af2===_0x254926?0x28:0x0;_0x3d466e=_0x1e5a78+_0x43133b+_0x391657,_0x3d466e>_0x725b77&&(_0x18baa9=_0x803913,_0x725b77=_0x3d466e);});if(_0x18baa9){const _0x346766=parseInt(_0x18baa9['eloRating'])||0x5dc;let _0x511e69='gray';if(_0x346766>=0x7d0)_0x511e69='#50C878';else{if(_0x346766>=0x708)_0x511e69='#FFD700';else{if(_0x346766>=0x640)_0x511e69=_0x3cb678(0xbb);else _0x346766>=0x578&&(_0x511e69='#CD7F32');}}_0x324e86['innerHTML']=_0x3cb678(0xc4)+_0x1717c2+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x511e69+_0x3cb678(0xa2)+_0x18baa9['username']+_0x3cb678(0xfd);}else _0x324e86['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x1717c2+')';}catch(_0x5d79dd){console['error'](_0x3cb678(0xd3),_0x5d79dd),_0x324e86['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x1a3f43=>{const _0xe3442b=a25_0x40b4cd,_0x82821=document['getElementById']('d1-ladder-container')&&document[_0xe3442b(0xe3)]('d1-ladder-container')['style']['display']!==_0xe3442b(0xb2),_0x1ea730=document['getElementById']('d2-ladder-container')&&document['getElementById']('d2-ladder-container')[_0xe3442b(0xcc)]['display']!=='none',_0x432369=document['getElementById']('d3-ladder-container')&&document['getElementById'](_0xe3442b(0xb8))['style']['display']!==_0xe3442b(0xb2),_0x3aa654=document['getElementById']('duos-ladder-container')&&document['getElementById'](_0xe3442b(0xd8))['style']['display']!=='none',_0x39ebaa=_0x82821?'d1':_0x1ea730?'d2':_0x432369?'d3':_0x3aa654?'duos':'d1';findBestOpponent(_0x39ebaa);}),document['addEventListener'](a25_0x40b4cd(0xcf),()=>{const _0x589bd7=a25_0x40b4cd,_0x3c98b4=document['getElementById']('duos-switch'),_0x777bde=document[_0x589bd7(0x9b)]('label[for=\x22duos-switch\x22]');_0x3c98b4&&_0x777bde&&(_0x3c98b4['addEventListener'](_0x589bd7(0xc1),async _0x7085b9=>{const _0xea287e=_0x589bd7;if(_0x7085b9['target']['checked']){const _0x37ae7c=auth?.['currentUser'],_0x1884dc=await checkIfUserIsAdmin(_0x37ae7c);if(!_0x1884dc){_0x7085b9['preventDefault']();const _0x1ae3cd=document[_0xea287e(0xe3)]('d1-switch');return _0x1ae3cd&&(_0x1ae3cd['checked']=!![],_0x1ae3cd['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x28ab80=>{const _0x393c5c=_0x589bd7,_0x14a332=await checkIfUserIsAdmin(_0x28ab80);!_0x14a332?(_0x3c98b4['disabled']=!![],_0x777bde['style']['opacity']='0.5',_0x777bde[_0x393c5c(0xcc)]['cursor']=_0x393c5c(0xca),_0x777bde['title']='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x3c98b4['disabled']=![],_0x777bde['style']['opacity']='1',_0x777bde['style']['cursor']=_0x393c5c(0xbe),_0x777bde[_0x393c5c(0xac)]='');}));});async function checkIfUserIsAdmin(_0x5166fa){const _0x1293ab=a25_0x40b4cd;if(!_0x5166fa)return![];try{const _0x569729=['admin@ladder.com',_0x1293ab(0xa9)];if(_0x5166fa['email']&&_0x569729['includes'](_0x5166fa['email']['toLowerCase']()))return!![];const _0x31533c=['userProfiles',_0x1293ab(0xe6),'playersD2','playersD3'],_0x43691b=['admin',_0x1293ab(0xf9),'council',_0x1293ab(0xda)];for(const _0x1f26a0 of _0x31533c){try{const _0x5e273b=doc(db,_0x1f26a0,_0x5166fa['uid']),_0x5addb8=await getDoc(_0x5e273b);if(_0x5addb8['exists']()){const _0x195df6=_0x5addb8['data'](),_0x443084=(_0x195df6[_0x1293ab(0xae)]||_0x195df6['role']||'')['toLowerCase']();if(_0x443084&&_0x43691b[_0x1293ab(0xf7)](_0x443084))return!![];}}catch(_0x5c2e08){console[_0x1293ab(0x98)](_0x1293ab(0xdc)+_0x1f26a0+':',_0x5c2e08);}}return![];}catch(_0x2a35ce){return console['error']('Error\x20checking\x20admin\x20status:',_0x2a35ce),![];}}function showAdminOnlyMessage(){const _0x2df47c=a25_0x40b4cd,_0x21a247=document['getElementById']('admin-only-message');_0x21a247&&_0x21a247[_0x2df47c(0xf8)]();const _0x1af16e=document['createElement'](_0x2df47c(0xf0));_0x1af16e['id']='admin-only-message',_0x1af16e['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x1af16e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x1af16e),setTimeout(()=>{const _0x3ae9d5=_0x2df47c;_0x1af16e[_0x3ae9d5(0xf4)]&&_0x1af16e['remove']();},0xbb8);}