const a10_0xc04f0=(function(){let _0x25e0d7=!![];return function(_0x51dc67,_0x158df6){const _0x22099f=_0x25e0d7?function(){if(_0x158df6){const _0x23b659=_0x158df6['apply'](_0x51dc67,arguments);return _0x158df6=null,_0x23b659;}}:function(){};return _0x25e0d7=![],_0x22099f;};}()),a10_0x4c3c06=a10_0xc04f0(this,function(){const _0x2671ef=a10_0x194b;let _0x43662a;try{const _0x27ae00=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x43662a=_0x27ae00();}catch(_0x41a5a0){_0x43662a=window;}const _0x46b9c8=_0x43662a['console']=_0x43662a['console']||{},_0x234360=[_0x2671ef(0x170),'warn','info',_0x2671ef(0x176),'exception','table','trace'];for(let _0x28107b=0x0;_0x28107b<_0x234360[_0x2671ef(0x16a)];_0x28107b++){const _0x1d6a18=a10_0xc04f0['constructor']['prototype']['bind'](a10_0xc04f0),_0x280f4a=_0x234360[_0x28107b],_0x2fcedc=_0x46b9c8[_0x280f4a]||_0x1d6a18;_0x1d6a18[_0x2671ef(0x179)]=a10_0xc04f0['bind'](a10_0xc04f0),_0x1d6a18[_0x2671ef(0x166)]=_0x2fcedc[_0x2671ef(0x166)]['bind'](_0x2fcedc),_0x46b9c8[_0x280f4a]=_0x1d6a18;}});a10_0x4c3c06();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a10_0x6964(){const _0xe2f9e4=['getItem','currentUser','toString','uid','setItem','email','length','pendingMatches','disconnect','split','now','empty','log','userId','2px\x20solid\x20white','playersD3','removeItem','currentUsername','error','username','block','__proto__','users','parse','style','winnerId','none','all'];a10_0x6964=function(){return _0xe2f9e4;};return a10_0x6964();}import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;function a10_0x194b(_0x206446,_0xcc942){const _0x4c3c06=a10_0x6964();return a10_0x194b=function(_0xc04f0,_0x2f8b9f){_0xc04f0=_0xc04f0-0x164;let _0x69646c=_0x4c3c06[_0xc04f0];return _0x69646c;},a10_0x194b(_0x206446,_0xcc942);}const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x58a54e=![]){const _0x3d5f83=a10_0x194b,_0x461a94=Date['now'](),_0x24c8df=checkNotificationCache();if(_0x24c8df!==null&&!_0x58a54e){updateNotificationDot(_0x24c8df);if(_0x461a94-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x461a94;const _0x23bc76=auth[_0x3d5f83(0x165)];if(!_0x23bc76){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x41f55d,_0x2972d8,_0x367c10]=await Promise[_0x3d5f83(0x17f)]([checkForPendingMatchesInCollection(_0x23bc76,_0x3d5f83(0x16b)),checkForPendingMatchesInCollection(_0x23bc76,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x23bc76,'pendingMatchesD3')]),_0xd74cd9=_0x41f55d||_0x2972d8||_0x367c10;updateNotificationDot(_0xd74cd9),updateNotificationCache(_0xd74cd9);}catch(_0x5ce873){console['error']('Error\x20checking\x20pending\x20matches:',_0x5ce873);}}async function checkForPendingMatchesInCollection(_0x2a8703,_0x567b4e){const _0x25eda1=a10_0x194b,_0x23c021=_0x2a8703['uid'],_0x596113=_0x2a8703[_0x25eda1(0x169)],_0x22d75f=query(collection(db,_0x567b4e),where(_0x25eda1(0x17d),'==',_0x23c021),where('approved','==',![])),_0x5eb857=await getDocs(_0x22d75f);if(!_0x5eb857['empty'])return!![];if(_0x596113){const _0x15fb4=query(collection(db,_0x567b4e),where('winnerEmail','==',_0x596113),where('approved','==',![])),_0x47a52e=await getDocs(_0x15fb4);if(!_0x47a52e[_0x25eda1(0x16f)])return!![];}let _0x53e824=await getUsernameFromAllSources(_0x2a8703);if(_0x53e824){const _0x5ede14=query(collection(db,_0x567b4e),where('winnerUsername','==',_0x53e824),where('approved','==',![])),_0x1b0d7a=await getDocs(_0x5ede14);if(!_0x1b0d7a['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x30ebed){const _0x4b333a=a10_0x194b,_0xc1ac35=localStorage[_0x4b333a(0x164)]('currentUsername');if(_0xc1ac35)return _0xc1ac35;try{const [_0x531c83,_0x44b36e,_0x39fc54]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x4b333a(0x171),'==',_0x30ebed['uid']))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x30ebed['uid']))),getDocs(query(collection(db,_0x4b333a(0x173)),where('userId','==',_0x30ebed[_0x4b333a(0x167)])))]);if(!_0x531c83['empty']){const _0x563e40=_0x531c83['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x563e40),_0x563e40;}if(!_0x44b36e['empty']){const _0x2b7a10=_0x44b36e['docs'][0x0]['data']()[_0x4b333a(0x177)];return localStorage['setItem'](_0x4b333a(0x175),_0x2b7a10),_0x2b7a10;}if(!_0x39fc54['empty']){const _0x46c0ff=_0x39fc54['docs'][0x0]['data']()[_0x4b333a(0x177)];return localStorage[_0x4b333a(0x168)](_0x4b333a(0x175),_0x46c0ff),_0x46c0ff;}const _0x45b403=await getDoc(doc(db,_0x4b333a(0x17a),_0x30ebed['uid']));if(_0x45b403['exists']()&&_0x45b403['data']()[_0x4b333a(0x177)]){const _0xde407b=_0x45b403['data']()['username'];return localStorage['setItem']('currentUsername',_0xde407b),_0xde407b;}}catch(_0x34df0b){console['error']('Error\x20fetching\x20username:',_0x34df0b);}if(_0x30ebed['email'])return _0x30ebed[_0x4b333a(0x169)][_0x4b333a(0x16d)]('@')[0x0];return null;}function updateNotificationCache(_0x3e0c89){const _0x1282a2=a10_0x194b,_0xc123c1={'status':_0x3e0c89,'timestamp':Date['now']()};localStorage[_0x1282a2(0x168)](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0xc123c1));}function checkNotificationCache(){const _0x4e447f=a10_0x194b,_0x4f937e=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x4f937e)return null;try{const {status:_0x24bfff,timestamp:_0x2e4e15}=JSON[_0x4e447f(0x17b)](_0x4f937e),_0x8c3adf=Date[_0x4e447f(0x16e)]();if(_0x8c3adf-_0x2e4e15<CACHE_EXPIRY)return _0x24bfff;}catch(_0x84aff0){}return null;}export function updateNotificationDot(_0x5ba9de){const _0x25d3b0=new MutationObserver((_0x694cae,_0x3fb6c8)=>{const _0x4b49d2=a10_0x194b,_0x574531=document['getElementById']('report-match-notification');_0x574531&&(updateDotStyle(_0x574531,_0x5ba9de),_0x3fb6c8[_0x4b49d2(0x16c)]());});_0x25d3b0['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x5cc827=document['getElementById']('report-match-notification');_0x5cc827&&(updateDotStyle(_0x5cc827,_0x5ba9de),_0x25d3b0['disconnect']()),setTimeout(()=>_0x25d3b0['disconnect'](),0x1388);}function updateDotStyle(_0x2d2afd,_0x71bccc){const _0x2b6c48=a10_0x194b;_0x71bccc?(_0x2d2afd['style']['display']=_0x2b6c48(0x178),_0x2d2afd[_0x2b6c48(0x17c)]['backgroundColor']='#ff3b30',_0x2d2afd[_0x2b6c48(0x17c)]['width']='10px',_0x2d2afd[_0x2b6c48(0x17c)]['height']='10px',_0x2d2afd[_0x2b6c48(0x17c)]['position']='absolute',_0x2d2afd[_0x2b6c48(0x17c)]['top']='-5px',_0x2d2afd['style']['right']='-8px',_0x2d2afd['style']['borderRadius']='50%',_0x2d2afd['style']['border']=_0x2b6c48(0x172),_0x2d2afd['style']['zIndex']='999'):_0x2d2afd['style']['display']=_0x2b6c48(0x17e);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x5c4dc4=a10_0x194b;localStorage[_0x5c4dc4(0x174)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});