(function(_0x565324,_0x1131b1){const _0x4514b2=a0_0x25ea,_0x4f50e1=_0x565324();while(!![]){try{const _0x49c27d=parseInt(_0x4514b2(0x17e))/0x1*(-parseInt(_0x4514b2(0x188))/0x2)+parseInt(_0x4514b2(0x167))/0x3*(-parseInt(_0x4514b2(0x179))/0x4)+-parseInt(_0x4514b2(0x18d))/0x5+parseInt(_0x4514b2(0x18b))/0x6*(parseInt(_0x4514b2(0x17d))/0x7)+parseInt(_0x4514b2(0x186))/0x8*(-parseInt(_0x4514b2(0x17a))/0x9)+parseInt(_0x4514b2(0x169))/0xa*(-parseInt(_0x4514b2(0x161))/0xb)+parseInt(_0x4514b2(0x176))/0xc;if(_0x49c27d===_0x1131b1)break;else _0x4f50e1['push'](_0x4f50e1['shift']());}catch(_0x476e2b){_0x4f50e1['push'](_0x4f50e1['shift']());}}}(a0_0x4166,0x5ebc1));const a0_0x53367e=(function(){let _0x20ee5a=!![];return function(_0x247fb0,_0x54c7cf){const _0x4568b0=_0x20ee5a?function(){if(_0x54c7cf){const _0x7eb229=_0x54c7cf['apply'](_0x247fb0,arguments);return _0x54c7cf=null,_0x7eb229;}}:function(){};return _0x20ee5a=![],_0x4568b0;};}()),a0_0x51e90f=a0_0x53367e(this,function(){const _0x1bdf86=a0_0x25ea,_0x6d8170=function(){const _0x4d4211=a0_0x25ea;let _0x5c8823;try{_0x5c8823=Function(_0x4d4211(0x165)+_0x4d4211(0x18a)+');')();}catch(_0x4556c4){_0x5c8823=window;}return _0x5c8823;},_0x2bb37d=_0x6d8170(),_0x1eb3d2=_0x2bb37d[_0x1bdf86(0x183)]=_0x2bb37d['console']||{},_0x30a9d0=['log','warn','info','error',_0x1bdf86(0x171),'table','trace'];for(let _0x49ddb8=0x0;_0x49ddb8<_0x30a9d0['length'];_0x49ddb8++){const _0xf46014=a0_0x53367e[_0x1bdf86(0x19a)]['prototype']['bind'](a0_0x53367e),_0xf2763d=_0x30a9d0[_0x49ddb8],_0x1086ed=_0x1eb3d2[_0xf2763d]||_0xf46014;_0xf46014['__proto__']=a0_0x53367e['bind'](a0_0x53367e),_0xf46014['toString']=_0x1086ed['toString'][_0x1bdf86(0x189)](_0x1086ed),_0x1eb3d2[_0xf2763d]=_0xf46014;}});a0_0x51e90f();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a0_0x4166(){const _0x437fc8=['none','8WgZWvj','split','126DmAvSA','bind','{}.constructor(\x22return\x20this\x22)(\x20)','6LwZuSE','forEach','49980RFxEUa','Error\x20checking\x20ladder\x20status:','docs','position','toLowerCase','Authentication\x20verification\x20failed:','d1-switch','email','display','message','ladder-join-prompt','textContent','className','constructor','location','Error\x20joining\x20ladder:\x20','You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.','1100IFBXqQ','querySelectorAll','DUO','DUOS','return\x20(function()\x20','toUpperCase','501jzrfia','ladder-join-status\x20error','35150fJckfK','uid','nonParticipants','join-username-input','Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...','playersCTF','getIdToken','value','exception','block','trim','username','ladder-join-status\x20loading','10312080poApTD','Joining\x20','Successfully\x20joined\x20the\x20','5032YEjZmE','3730032zcZLem','\x22\x20to\x20confirm.','style','4048471IKHuMr','1010YsoeYb','error','getElementById','target','ladder-join-status\x20success','console','\x20ladder!\x20The\x20page\x20will\x20refresh...'];a0_0x4166=function(){return _0x437fc8;};return a0_0x4166();}function a0_0x25ea(_0x4a32e1,_0xe368c){const _0x26c99b=a0_0x4166();return a0_0x25ea=function(_0x51e90f,_0x53367e){_0x51e90f=_0x51e90f-0x15e;let _0x33b462=_0x26c99b[_0x51e90f];return _0x33b462;},a0_0x25ea(_0x4a32e1,_0xe368c);}import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x3e145d=a0_0x25ea,_0x4f5d95=document['getElementById'](_0x3e145d(0x193)),_0x4cb2d5=document[_0x3e145d(0x180)]('d2-switch');console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x4f5d95),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x4cb2d5);function _0x67638e(){const _0xc29a99=_0x3e145d;document[_0xc29a99(0x162)]('input[name=\x22ladder\x22]')[_0xc29a99(0x18c)](_0x35f536=>{_0x35f536['addEventListener']('change',_0x31ed92=>{const _0x5a04b8=a0_0x25ea;_0x31ed92[_0x5a04b8(0x181)]['checked']&&(currentLadder=_0x31ed92[_0x5a04b8(0x181)]['value'],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x67638e();const _0x1ffda7=document[_0x3e145d(0x180)]('join-ladder-button');_0x1ffda7&&_0x1ffda7['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x28a731=>{const _0x2a663e=_0x3e145d;if(_0x28a731)checkUserLadderStatus();else{const _0x44f2fa=document['getElementById'](_0x2a663e(0x197));_0x44f2fa&&(_0x44f2fa['style']['display']='none');}});});function getCollectionName(_0x42d66d){const _0x33689e=a0_0x25ea;switch(_0x42d66d?.[_0x33689e(0x166)]()){case'D1':return'players';case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case _0x33689e(0x163):return'playersDuos';case'CTF':return _0x33689e(0x16e);default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x42d66d+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0xe2a31b=a0_0x25ea;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x347a71=auth['currentUser'],_0xdd69ec=document['getElementById']('ladder-join-prompt'),_0x3cfd89=document['getElementById']('join-ladder-type'),_0x289a18=document[_0xe2a31b(0x180)]('tiny-join-button');if(!_0x347a71||!_0x347a71[_0xe2a31b(0x16a)]||!_0xdd69ec||!_0x3cfd89||!_0x289a18){if(_0xdd69ec)_0xdd69ec['style']['display']='none';if(_0x289a18)_0x289a18[_0xe2a31b(0x17c)][_0xe2a31b(0x195)]=_0xe2a31b(0x185);return;}try{try{await _0x347a71['getIdToken'](![]);}catch(_0xfaed20){console['error'](_0xe2a31b(0x192),_0xfaed20),_0xdd69ec['style']['display']='none',_0x289a18['style']['display']='none';return;}const _0x596f1d=getCollectionName(currentLadder),_0x48223d=doc(db,_0x596f1d,_0x347a71['uid']),_0x40c4a0=await getDoc(_0x48223d);if(_0x40c4a0['exists']())_0xdd69ec['style']['display']='none',_0x289a18[_0xe2a31b(0x17c)]['display']='none';else{_0xdd69ec[_0xe2a31b(0x17c)]['display']='none',_0x289a18['style']['display']='block',_0x3cfd89[_0xe2a31b(0x198)]=currentLadder,_0x289a18['onclick']=()=>{const _0x558e78=_0xe2a31b;_0xdd69ec['style'][_0x558e78(0x195)]==='block'?_0xdd69ec['style']['display']='none':_0xdd69ec['style']['display']=_0x558e78(0x172);};const _0x305e0a=document[_0xe2a31b(0x180)]('join-username-input'),_0x2da4cb=document['getElementById']('ladder-join-status');if(_0x305e0a)_0x305e0a[_0xe2a31b(0x170)]='';_0x2da4cb&&(_0x2da4cb[_0xe2a31b(0x198)]='',_0x2da4cb['className']='ladder-join-status');}}catch(_0x34e1c6){console[_0xe2a31b(0x17f)](_0xe2a31b(0x18e),_0x34e1c6),_0xdd69ec[_0xe2a31b(0x17c)]['display']='none',_0x289a18['style']['display']='none';}}async function handleJoinLadder(){const _0x5e140d=a0_0x25ea,_0x5ae7b3=auth['currentUser'],_0x2dd496=document['getElementById']('join-ladder-button'),_0x25a789=document[_0x5e140d(0x180)]('ladder-join-status'),_0x383459=document['getElementById'](_0x5e140d(0x16c));if(!_0x5ae7b3||!_0x5ae7b3[_0x5e140d(0x16a)]){_0x25a789[_0x5e140d(0x198)]=_0x5e140d(0x160),_0x25a789['className']='ladder-join-status\x20error';return;}try{await _0x5ae7b3['getIdToken'](!![]);}catch(_0x2e0e38){console[_0x5e140d(0x17f)]('Authentication\x20error:',_0x2e0e38),_0x25a789['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x25a789[_0x5e140d(0x199)]='ladder-join-status\x20error';return;}if(!_0x383459||!_0x383459[_0x5e140d(0x170)][_0x5e140d(0x173)]()){_0x25a789['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x25a789[_0x5e140d(0x199)]=_0x5e140d(0x168);return;}try{_0x2dd496['disabled']=!![],_0x25a789['textContent']='Verifying\x20username...',_0x25a789['className']=_0x5e140d(0x175);let _0x57c7c9='',_0x157692=null;const _0x4ae422=['players','playersD2','playersD3','playersDuos','playersCTF',_0x5e140d(0x16b)];for(const _0x7872c8 of _0x4ae422){try{const _0x1eb13c=doc(db,_0x7872c8,_0x5ae7b3['uid']),_0x462a5c=await getDoc(_0x1eb13c);if(_0x462a5c['exists']()){_0x157692=_0x462a5c['data']();if(_0x157692[_0x5e140d(0x174)]){_0x57c7c9=_0x157692['username'];break;}}}catch(_0xb64951){console['error']('Error\x20checking\x20'+_0x7872c8+':',_0xb64951);}}!_0x57c7c9&&_0x5ae7b3[_0x5e140d(0x194)]&&(_0x57c7c9=_0x5ae7b3[_0x5e140d(0x194)][_0x5e140d(0x187)]('@')[0x0]);if(!_0x57c7c9){_0x25a789[_0x5e140d(0x198)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x25a789['className']='ladder-join-status\x20error',_0x2dd496['disabled']=![];return;}const _0x415458=_0x383459['value'][_0x5e140d(0x173)]();if(_0x57c7c9&&_0x415458['toLowerCase']()!==_0x57c7c9[_0x5e140d(0x191)]()){_0x25a789[_0x5e140d(0x198)]='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x57c7c9+_0x5e140d(0x17b),_0x25a789[_0x5e140d(0x199)]='ladder-join-status\x20error',_0x2dd496['disabled']=![];return;}_0x25a789[_0x5e140d(0x198)]=_0x5e140d(0x177)+currentLadder+'\x20ladder...';const _0x54e17a=getCollectionName(currentLadder),_0x4ca66a=doc(db,_0x54e17a,_0x5ae7b3['uid']),_0x339947=await getDoc(_0x4ca66a);if(_0x339947['exists']()){_0x25a789[_0x5e140d(0x198)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x25a789['className']=_0x5e140d(0x168),_0x2dd496['disabled']=![];return;}try{await _0x5ae7b3[_0x5e140d(0x16f)](!![]);}catch(_0x1e5d66){_0x25a789['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x25a789['className']=_0x5e140d(0x168),_0x2dd496['disabled']=![];return;}const _0x554409=_0x57c7c9,_0x493669=collection(db,_0x54e17a),_0x1cb568=query(_0x493669,orderBy(_0x5e140d(0x190),'desc'),limit(0x1)),_0x2daa90=await getDocs(_0x1cb568);let _0x5c523d=0x1;if(!_0x2daa90['empty']){const _0x5945b5=_0x2daa90[_0x5e140d(0x18f)][0x0]['data']();_0x5c523d=(_0x5945b5['position']||0x0)+0x1;}const _0x40453b={'username':_0x554409,'email':_0x5ae7b3[_0x5e140d(0x194)],'eloRating':0x4b0,'position':_0x5c523d,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x4ca66a,_0x40453b),currentLadder===_0x5e140d(0x164)?_0x25a789[_0x5e140d(0x198)]=_0x5e140d(0x16d):_0x25a789[_0x5e140d(0x198)]=_0x5e140d(0x178)+currentLadder+_0x5e140d(0x184),_0x25a789['className']=_0x5e140d(0x182),setTimeout(()=>{const _0xfb54c9=_0x5e140d;window[_0xfb54c9(0x15e)]['reload']();},0x7d0);}catch(_0x13bcd9){console[_0x5e140d(0x17f)]('Error\x20joining\x20ladder:',_0x13bcd9),_0x25a789['textContent']=_0x5e140d(0x15f)+_0x13bcd9[_0x5e140d(0x196)],_0x25a789['className']='ladder-join-status\x20error',_0x2dd496['disabled']=![];}}