const a0_0x13210a=a0_0x2d7b;function a0_0x2d7b(_0x42c25c,_0x15210a){const _0x147fab=a0_0x1070();return a0_0x2d7b=function(_0x18c41b,_0x5ec944){_0x18c41b=_0x18c41b-0x1cf;let _0x3aff55=_0x147fab[_0x18c41b];return _0x3aff55;},a0_0x2d7b(_0x42c25c,_0x15210a);}(function(_0x25dfa3,_0x2e2f72){const _0x4bb0b1=a0_0x2d7b,_0x33aacf=_0x25dfa3();while(!![]){try{const _0x28388a=-parseInt(_0x4bb0b1(0x201))/0x1+parseInt(_0x4bb0b1(0x1dd))/0x2+parseInt(_0x4bb0b1(0x1e7))/0x3+-parseInt(_0x4bb0b1(0x1ee))/0x4*(-parseInt(_0x4bb0b1(0x1ea))/0x5)+parseInt(_0x4bb0b1(0x1f9))/0x6+parseInt(_0x4bb0b1(0x1e0))/0x7*(-parseInt(_0x4bb0b1(0x1fc))/0x8)+parseInt(_0x4bb0b1(0x1e3))/0x9;if(_0x28388a===_0x2e2f72)break;else _0x33aacf['push'](_0x33aacf['shift']());}catch(_0x4daecd){_0x33aacf['push'](_0x33aacf['shift']());}}}(a0_0x1070,0xb4124));const a0_0x5ec944=(function(){let _0x2cbd5b=!![];return function(_0x53c8e4,_0x4ba5b6){const _0x543237=_0x2cbd5b?function(){if(_0x4ba5b6){const _0xe118ef=_0x4ba5b6['apply'](_0x53c8e4,arguments);return _0x4ba5b6=null,_0xe118ef;}}:function(){};return _0x2cbd5b=![],_0x543237;};}()),a0_0x18c41b=a0_0x5ec944(this,function(){const _0x5b68b9=a0_0x2d7b,_0x20adc8=function(){let _0x448ba0;try{_0x448ba0=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5676de){_0x448ba0=window;}return _0x448ba0;},_0xafda8d=_0x20adc8(),_0x3de700=_0xafda8d['console']=_0xafda8d['console']||{},_0x50c006=[_0x5b68b9(0x1d8),_0x5b68b9(0x1f7),'info',_0x5b68b9(0x20a),_0x5b68b9(0x1de),'table',_0x5b68b9(0x215)];for(let _0x50145f=0x0;_0x50145f<_0x50c006[_0x5b68b9(0x1fa)];_0x50145f++){const _0x290c84=a0_0x5ec944['constructor'][_0x5b68b9(0x20b)]['bind'](a0_0x5ec944),_0x3127c5=_0x50c006[_0x50145f],_0x539cbb=_0x3de700[_0x3127c5]||_0x290c84;_0x290c84['__proto__']=a0_0x5ec944['bind'](a0_0x5ec944),_0x290c84['toString']=_0x539cbb['toString']['bind'](_0x539cbb),_0x3de700[_0x3127c5]=_0x290c84;}});a0_0x18c41b();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a0_0x11cce9 from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';function a0_0x1070(){const _0x25af3e=['has','<img\x20src=\x22','style','1162612YNDrUI','exception','elo','7pNKhBS','data','change','6081255jQMWMr','set','D3:\x20Error\x20fetching\x20ELO\x20history:','forEach','1650207cgfBec','#FFD700','Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:','130UiqbYe','appendChild','D3:\x20Fallback\x20query\x20failed:','D3:\x20Error\x20fetching\x20tokens:','89884JqzSqZ','playersD3','totalKills','Error\x20loading\x20D3\x20ladder:','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>','previousElo','winRate','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','position','warn','toFixed','2457894glgEUO','length','querySelector','7266960lrdRwx','timestamp','D3\x20Ladder\x20table\x20body\x20not\x20found','playerId','#50C878','1155023koXkBS','totalMatches','Error\x20updating\x20D3\x20player\x20positions:','get','sort','</td>\x0a\x20\x20\x20\x20</tr>','createElement','seconds','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','error','prototype','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','wins','country','now','player','map','string','#CD7F32','find','trace','textContent','includes','innerHTML','username','newElo','points','desc','loserUsername',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#4CAF50','log','toLowerCase'];a0_0x1070=function(){return _0x25af3e;};return a0_0x1070();}const styleEl=document[a0_0x13210a(0x207)]('style');styleEl[a0_0x13210a(0x216)]='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head'][a0_0x13210a(0x1eb)](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x5472a0=![]){const _0x23a145=a0_0x13210a,_0x467e52=document[_0x23a145(0x1fb)]('#ladder-d3\x20tbody');if(!_0x467e52){console[_0x23a145(0x20a)](_0x23a145(0x1fe));return;}_0x467e52['innerHTML']=_0x23a145(0x1f2);try{const _0x16ab23=Date[_0x23a145(0x20f)]();if(!_0x5472a0&&playerCacheD3['data']&&_0x16ab23-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x20d9ec=collection(db,_0x23a145(0x1ef)),_0x1d4cb2=await getDocs(_0x20d9ec),_0x359e60=[];_0x1d4cb2['forEach'](_0x13de13=>{const _0x5d72a8=_0x23a145,_0x4b183e=_0x13de13[_0x5d72a8(0x1e1)]();_0x4b183e[_0x5d72a8(0x1d1)]&&_0x359e60['push']({..._0x4b183e,'id':_0x13de13['id'],'elo':_0x4b183e['eloRating']||0x0,'position':_0x4b183e['position']||Number['MAX_SAFE_INTEGER']});});const _0x4bbffb=collection(db,'userProfiles'),_0x40f064=await getDocs(_0x4bbffb),_0x3db669=new Map();_0x40f064['forEach'](_0xaa7c50=>{const _0x39b451=_0x23a145,_0x31eaef=_0xaa7c50[_0x39b451(0x1e1)]();_0x31eaef['username']&&_0x3db669[_0x39b451(0x1e4)](_0x31eaef[_0x39b451(0x1d1)][_0x39b451(0x1d9)](),_0x31eaef);});for(const _0x194e19 of _0x359e60){const _0x28bc21=_0x194e19[_0x23a145(0x1d1)][_0x23a145(0x1d9)]();if(_0x3db669['has'](_0x28bc21)){const _0x481a5a=_0x3db669['get'](_0x28bc21);_0x481a5a['country']&&(_0x194e19[_0x23a145(0x20e)]=_0x481a5a['country']['toLowerCase']()),_0x194e19['points']=_0x481a5a[_0x23a145(0x1d3)]||0x0;}else _0x194e19['points']=0x0;}const _0x2c578d=_0x359e60['map'](_0x1572ca=>_0x1572ca['username']),_0x5e98c1=await fetchBatchMatchStatsD3(_0x2c578d);_0x359e60[_0x23a145(0x205)]((_0x41c6b6,_0x465a7b)=>{const _0x4fcec=_0x23a145,_0x2fb12b=_0x5e98c1['get'](_0x41c6b6['username'])?.['totalMatches']||0x0,_0x40720b=_0x5e98c1['get'](_0x465a7b[_0x4fcec(0x1d1)])?.[_0x4fcec(0x202)]||0x0;if(_0x2fb12b===0x0!==(_0x40720b===0x0))return _0x2fb12b===0x0?0x1:-0x1;return(_0x41c6b6[_0x4fcec(0x1f6)]||0x3e7)-(_0x465a7b['position']||0x3e7);}),_0x359e60['forEach']((_0x3eaabd,_0x947aa8)=>{const _0xe6a9d6=_0x23a145;_0x3eaabd[_0xe6a9d6(0x1f6)]=_0x947aa8+0x1;}),playerCacheD3[_0x23a145(0x1e1)]=_0x359e60,playerCacheD3[_0x23a145(0x1fd)]=_0x16ab23,updateLadderDisplayD3(_0x359e60);}catch(_0x4c5ccf){console['error'](_0x23a145(0x1f1),_0x4c5ccf),_0x467e52['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x4c5ccf['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x16e47f){if(!_0x16e47f)return 0x0;const _0x4c8cae=_0x16e47f['toDate'](),_0x499f25=new Date(),_0x26c2af=Math['abs'](_0x499f25-_0x4c8cae);return Math['ceil'](_0x26c2af/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x20476c,_0x4d9947){const _0x2bdaea=a0_0x13210a;try{const _0x54fcfd=collection(db,'playersD3'),_0x4c929b=await getDocs(_0x54fcfd),_0x422790=[];_0x4c929b['forEach'](_0x5af3be=>{const _0x596d43=a0_0x2d7b;_0x422790['push']({'id':_0x5af3be['id'],..._0x5af3be[_0x596d43(0x1e1)]()});});const _0x46179a=_0x422790[_0x2bdaea(0x214)](_0x528087=>_0x528087['username']===_0x20476c),_0x40f805=_0x422790[_0x2bdaea(0x214)](_0x171c86=>_0x171c86['username']===_0x4d9947);if(!_0x46179a||!_0x40f805){console[_0x2bdaea(0x20a)]('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x46179a['position']>_0x40f805['position']){const _0xd1186b=_0x40f805['position'];for(const _0xb5b325 of _0x422790){_0xb5b325['position']>=_0x40f805[_0x2bdaea(0x1f6)]&&_0xb5b325['position']<_0x46179a['position']&&_0xb5b325['username']!==_0x20476c&&await updateDoc(doc(db,_0x2bdaea(0x1ef),_0xb5b325['id']),{'position':_0xb5b325[_0x2bdaea(0x1f6)]+0x1});}await updateDoc(doc(db,'playersD3',_0x46179a['id']),{'position':_0xd1186b});if(_0xd1186b===0x1){const _0xeeafee=doc(db,'playersD3',_0x46179a['id']),_0x452bd4=await getDoc(_0xeeafee);!_0x452bd4['data']()['firstPlaceDate']&&await updateDoc(_0xeeafee,{'firstPlaceDate':Timestamp['now']()});}if(_0x40f805['position']===0x1){const _0x13908a=doc(db,'playersD3',_0x40f805['id']);await updateDoc(_0x13908a,{'firstPlaceDate':null});}playerCacheD3['timestamp']=0x0;}}catch(_0x2aeae6){console['error'](_0x2bdaea(0x203),_0x2aeae6);}}async function updateLadderDisplayD3(_0x11f4c6){const _0x2e9a6f=a0_0x13210a;_0x11f4c6['sort']((_0xfa327f,_0x421d58)=>_0xfa327f['position']-_0x421d58['position']);const _0x365f1f=document['querySelector']('#ladder-d3\x20tbody');if(!_0x365f1f)return;_0x365f1f[_0x2e9a6f(0x1d0)]='';const _0x2fabc3=_0x11f4c6[_0x2e9a6f(0x211)](_0x11f42a=>_0x11f42a['username']),_0x512909=await fetchBatchMatchStatsD3(_0x2fabc3);let _0x31cbfa=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x31cbfa=await getTokensByUsernames(_0x2fabc3);}catch(_0x250ff5){console['error'](_0x2e9a6f(0x1ed),_0x250ff5);}const _0x48985f=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x48985f&&(_0x48985f[_0x2e9a6f(0x1d0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x500ba5=_0x11f4c6['map'](_0x34d741=>{const _0xf44541=_0x512909['get'](_0x34d741['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x33749c=_0x31cbfa['get'](_0x34d741['username'])||[],_0x10f4e8=getPrimaryDisplayToken(_0x33749c);return createPlayerRowD3(_0x34d741,_0xf44541,_0x10f4e8);})['join']('');_0x365f1f['innerHTML']=_0x500ba5,getPlayersLastEloChangesD3(_0x2fabc3)['then'](_0x44639c=>{const _0x181b7b=_0x2e9a6f,_0x6f6258=new Map();_0x365f1f['querySelectorAll']('tr')['forEach']((_0x2c52df,_0x1c8f26)=>{_0x1c8f26<_0x2fabc3['length']&&_0x6f6258['set'](_0x2fabc3[_0x1c8f26],_0x2c52df);}),_0x44639c[_0x181b7b(0x1e6)]((_0x41c4ee,_0x566c19)=>{const _0xf9ce49=_0x181b7b,_0x1f83a9=_0x6f6258[_0xf9ce49(0x204)](_0x566c19);if(_0x1f83a9&&_0x41c4ee!==0x0){const _0x18e55d=_0x1f83a9['querySelector']('td:nth-child(3)');if(_0x18e55d){const _0x595b35=_0x41c4ee>0x0?'+'+_0x41c4ee:''+_0x41c4ee,_0xc58b28=_0x18e55d['querySelector']('.trend-indicator');_0xc58b28&&(_0xc58b28['textContent']=_0x595b35,_0xc58b28[_0xf9ce49(0x1dc)]['color']=_0x41c4ee>0x0?_0xf9ce49(0x1d7):'#F44336',_0xc58b28['style']['fontWeight']='bold',_0xc58b28[_0xf9ce49(0x1dc)]['fontSize']='0.85em',_0xc58b28['style']['display']='inline',_0xc58b28['style']['visibility']='visible',_0xc58b28['style']['opacity']='1');}}});})['catch'](_0x27dfd0=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x27dfd0));}async function fetchBatchMatchStatsD3(_0x4f7f0a){const _0x1886c1=a0_0x13210a,_0x2d7f70=new Map();try{_0x4f7f0a['forEach'](_0x23d4da=>{const _0x5401ca=a0_0x2d7b;_0x2d7f70[_0x5401ca(0x1e4)](_0x23d4da,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x1c1022=collection(db,'approvedMatchesD3'),_0xbc0443=await getDocs(_0x1c1022);_0xbc0443['forEach'](_0x499c23=>{const _0x33e50a=a0_0x2d7b,_0x1e7878=_0x499c23['data'](),_0x4e3d21=_0x1e7878['winnerUsername'],_0x53e124=_0x1e7878[_0x33e50a(0x1d5)];if(_0x4f7f0a[_0x33e50a(0x1cf)](_0x4e3d21)){const _0x425dcf=_0x2d7f70['get'](_0x4e3d21);_0x425dcf[_0x33e50a(0x20d)]++,_0x425dcf['totalMatches']++,_0x425dcf['totalKills']+=parseInt(_0x1e7878['winnerScore'])||0x0,_0x425dcf['totalDeaths']+=parseInt(_0x1e7878['loserScore'])||0x0;}if(_0x4f7f0a[_0x33e50a(0x1cf)](_0x53e124)){const _0x432569=_0x2d7f70['get'](_0x53e124);_0x432569['losses']++,_0x432569['totalMatches']++,_0x432569['totalKills']+=parseInt(_0x1e7878['loserScore'])||0x0,_0x432569['totalDeaths']+=parseInt(_0x1e7878['winnerScore'])||0x0;}}),_0x4f7f0a[_0x1886c1(0x1e6)](_0x576249=>{const _0x11b4f0=_0x1886c1,_0x44edb6=_0x2d7f70['get'](_0x576249);_0x44edb6['kda']=_0x44edb6['totalDeaths']>0x0?(_0x44edb6[_0x11b4f0(0x1f0)]/_0x44edb6['totalDeaths'])[_0x11b4f0(0x1f8)](0x2):_0x44edb6['totalKills'],_0x44edb6['winRate']=_0x44edb6[_0x11b4f0(0x202)]>0x0?(_0x44edb6['wins']/_0x44edb6['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0xc5a2fd){console[_0x1886c1(0x20a)](_0x1886c1(0x1e9),_0xc5a2fd);}return _0x2d7f70;}function createPlayerRowD3(_0xb24559,_0x2453c2,_0x3b7085){const _0x4404da=a0_0x13210a,_0xdae235=parseFloat(_0xb24559[_0x4404da(0x1df)])||0x0;let _0x337071='#DC143C';if(_0x2453c2['totalMatches']===0x0)_0x337071='#DC143C';else{if(_0xdae235>=0x3e8&&_0x2453c2['winRate']>=0x50&&_0x2453c2['totalMatches']>=0x14)_0x337071=_0x4404da(0x200);else{if(_0xdae235>=0x2bc)_0x337071=_0x4404da(0x1e8);else{if(_0xdae235>=0x1f4)_0x337071='#C0C0C0';else _0xdae235>=0xc8&&(_0x337071=_0x4404da(0x213));}}}let _0x2b8d95='';_0xb24559['country']&&(_0x2b8d95='<img\x20src=\x22../images/flags/'+_0xb24559['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0xb24559[_0x4404da(0x20e)]+_0x4404da(0x1f5));let _0x2188a0='';return _0x3b7085&&(_0x2188a0=_0x4404da(0x1db)+_0x3b7085['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3b7085['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x3b7085['tokenName']+'\x20'+(_0x3b7085['equipped']?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xb24559['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0xb24559[_0x4404da(0x1d1)])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x337071+_0x4404da(0x1d6)+_0xb24559['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2b8d95+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2188a0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x337071+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0xdae235+_0x4404da(0x20c)+_0x2453c2[_0x4404da(0x202)]+_0x4404da(0x209)+_0x2453c2['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2453c2['losses']+_0x4404da(0x209)+_0x2453c2['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2453c2[_0x4404da(0x1f4)]+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>'+(_0xb24559['points']||0x0)+_0x4404da(0x206);}async function getPlayersLastEloChangesD3(_0x55ce7d){const _0x378c64=a0_0x13210a,_0x5af523=new Map();_0x55ce7d[_0x378c64(0x1e6)](_0x5f59e0=>_0x5af523['set'](_0x5f59e0,0x0));try{const _0x2f31af=new Map(),_0x5163c7=await getDocs(collection(db,_0x378c64(0x1ef)));_0x5163c7[_0x378c64(0x1e6)](_0xeee04a=>{const _0x593c37=_0x378c64,_0x2ef79c=_0xeee04a[_0x593c37(0x1e1)]();_0x2ef79c['username']&&_0x2f31af['set'](_0xeee04a['id'],_0x2ef79c['username']);});const _0x1dc77c=collection(db,'eloHistoryD3'),_0x47d660=query(_0x1dc77c,orderBy('timestamp',_0x378c64(0x1d4)),limit(0x64)),_0x44eab=await getDocs(_0x47d660),_0xbddc19=new Map();_0x44eab['forEach'](_0x443233=>{const _0x2fe1d2=_0x378c64,_0x2a5624=_0x443233['data']();let _0x4ace3a=null;if(_0x2a5624['username'])_0x4ace3a=_0x2a5624['username'];else{if(_0x2a5624['playerUsername'])_0x4ace3a=_0x2a5624['playerUsername'];else{if(_0x2a5624['player']&&typeof _0x2a5624['player']===_0x2fe1d2(0x212))_0x4ace3a=_0x2a5624['player'];else{if(_0x2a5624['player']&&_0x2f31af[_0x2fe1d2(0x1da)](_0x2a5624[_0x2fe1d2(0x210)]))_0x4ace3a=_0x2f31af[_0x2fe1d2(0x204)](_0x2a5624['player']);else _0x2a5624['playerId']&&_0x2f31af[_0x2fe1d2(0x1da)](_0x2a5624['playerId'])&&(_0x4ace3a=_0x2f31af['get'](_0x2a5624[_0x2fe1d2(0x1ff)]));}}}_0x4ace3a&&_0x55ce7d[_0x2fe1d2(0x1cf)](_0x4ace3a)&&(!_0xbddc19['has'](_0x4ace3a)&&_0xbddc19['set'](_0x4ace3a,[]),_0xbddc19['get'](_0x4ace3a)['push']({..._0x2a5624,'timestamp':_0x2a5624['timestamp']?.[_0x2fe1d2(0x208)]||0x0}));}),_0xbddc19['forEach']((_0x2df773,_0x29fc36)=>{const _0x23f8cc=_0x378c64;if(_0x2df773['length']>0x0){_0x2df773['sort']((_0x337475,_0x3aac7b)=>_0x3aac7b['timestamp']-_0x337475['timestamp']);const _0x375946=_0x2df773['find'](_0x5bdb1f=>_0x5bdb1f[_0x23f8cc(0x1e2)]!==undefined||_0x5bdb1f['newElo']!==undefined&&_0x5bdb1f[_0x23f8cc(0x1f3)]!==undefined);if(_0x375946){let _0x53d8bc;if(_0x375946[_0x23f8cc(0x1e2)]!==undefined)_0x53d8bc=_0x375946['change'];else _0x375946['newElo']!==undefined&&_0x375946['previousElo']!==undefined&&(_0x53d8bc=_0x375946['newElo']-_0x375946[_0x23f8cc(0x1f3)]);_0x53d8bc!==undefined&&_0x5af523['set'](_0x29fc36,_0x53d8bc);}}});if(_0xbddc19['size']===0x0){const _0x1e287f=collection(db,'eloHistory'),_0x2d0169=query(_0x1e287f,where('gameMode','==','D3'),orderBy(_0x378c64(0x1fd),'desc'),limit(0x32));try{const _0x171dca=await getDocs(_0x2d0169);_0x171dca['forEach'](_0x11df59=>{const _0x5f23eb=_0x378c64,_0xc838f9=_0x11df59['data']();let _0x1b1e22=_0xc838f9['username']||_0xc838f9['playerUsername'];!_0x1b1e22&&_0xc838f9['player']&&_0x2f31af['has'](_0xc838f9['player'])&&(_0x1b1e22=_0x2f31af[_0x5f23eb(0x204)](_0xc838f9['player']));if(_0x1b1e22&&_0x55ce7d['includes'](_0x1b1e22)){const _0x5e9558=_0xc838f9['change']||(_0xc838f9[_0x5f23eb(0x1d2)]!==undefined&&_0xc838f9[_0x5f23eb(0x1f3)]!==undefined?_0xc838f9['newElo']-_0xc838f9['previousElo']:0x0);_0x5e9558!==0x0&&_0x5af523['set'](_0x1b1e22,_0x5e9558);}});}catch(_0xe3a2ad){console['error'](_0x378c64(0x1ec),_0xe3a2ad);}}}catch(_0x188ab6){console['error'](_0x378c64(0x1e5),_0x188ab6);}return _0x5af523;}window['refreshLadderDisplayD3']=function(_0x5612bb=!![]){typeof displayLadderD3==='function'?displayLadderD3(_0x5612bb):console['warn']('displayLadderD3\x20function\x20not\x20available');};export{displayLadderD3,updatePlayerPositions};