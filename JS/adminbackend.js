const a4_0x46e366=a4_0x168e,a4_0x190966=(function(){let _0x1cf0bf=!![];return function(_0x3b8d68,_0xd9806c){const _0x5ddfa9=_0x1cf0bf?function(){if(_0xd9806c){const _0xe49fda=_0xd9806c['apply'](_0x3b8d68,arguments);return _0xd9806c=null,_0xe49fda;}}:function(){};return _0x1cf0bf=![],_0x5ddfa9;};}()),a4_0x1e2435=a4_0x190966(this,function(){const _0x454b6d=a4_0x168e;let _0x5a4f7d;try{const _0xdd5e75=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5a4f7d=_0xdd5e75();}catch(_0x2ad3f3){_0x5a4f7d=window;}const _0x62f39b=_0x5a4f7d['console']=_0x5a4f7d['console']||{},_0x49dde8=['log','warn',_0x454b6d(0x2d9),'error','exception','table',_0x454b6d(0x215)];for(let _0x5b6b16=0x0;_0x5b6b16<_0x49dde8['length'];_0x5b6b16++){const _0x239401=a4_0x190966['constructor']['prototype']['bind'](a4_0x190966),_0xf3ec6f=_0x49dde8[_0x5b6b16],_0x51c1d4=_0x62f39b[_0xf3ec6f]||_0x239401;_0x239401['__proto__']=a4_0x190966['bind'](a4_0x190966),_0x239401['toString']=_0x51c1d4['toString'][_0x454b6d(0x39c)](_0x51c1d4),_0x62f39b[_0xf3ec6f]=_0x239401;}});a4_0x1e2435();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x328693){const _0x1d6658=a4_0x168e;if(!_0x328693)return'#ffffff';_0x328693=_0x328693['replace']('#','');_0x328693['length']===0x3&&(_0x328693=_0x328693[_0x1d6658(0x3a8)]('')[_0x1d6658(0x2e5)](_0x4dd956=>_0x4dd956+_0x4dd956)['join'](''));if(_0x328693['length']!==0x6)return'#ffffff';const _0x301fb0=parseInt(_0x328693['substring'](0x0,0x2),0x10),_0x332155=parseInt(_0x328693['substring'](0x2,0x4),0x10),_0x38d1f5=parseInt(_0x328693['substring'](0x4,0x6),0x10),_0x34bab5=(_0x301fb0*0x12b+_0x332155*0x24b+_0x38d1f5*0x72)/0x3e8;return _0x34bab5>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE=a4_0x46e366(0x2ad),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x4e6a2a=>{const _0x4a8f73=a4_0x168e;if(!_0x4e6a2a){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x20c7fb){console[_0x4a8f73(0x383)]('Error\x20initializing\x20dashboard:',_0x20c7fb),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x3f183b){const _0x5de76f=a4_0x46e366;if(!_0x3f183b)return[_0x5de76f(0x3e8)];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x3f183b+'\x20in\x20all\x20collections...');const _0x1176aa=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':_0x5de76f(0x357),'displayName':_0x5de76f(0x24f)},{'name':'playersD3','displayName':_0x5de76f(0x2d4)},{'name':'nonParticipants','displayName':_0x5de76f(0x1be)}],_0x2697ac=auth['currentUser'];let _0x31fb6c=null,_0x1d25b6=null;for(const _0x46b735 of _0x1176aa){try{if(_0x2697ac){const _0x270276=doc(db,_0x46b735['name'],_0x2697ac[_0x5de76f(0x1ba)]),_0x800497=await getDoc(_0x270276);if(_0x800497['exists']()){const _0xe8df6a=_0x800497['data']();console['log']('Found\x20user\x20in\x20'+_0x46b735[_0x5de76f(0x3a0)]+'\x20by\x20UID:',_0xe8df6a);const _0x3febc3=(_0xe8df6a['roleName']||_0xe8df6a['role']||'')['toLowerCase']();if(_0x3febc3&&_0x3febc3!==_0x5de76f(0x3ad)){_0x31fb6c=_0x3febc3,_0x1d25b6=_0x46b735['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x31fb6c+_0x5de76f(0x3ca)+_0x1d25b6);break;}}}if(!_0x31fb6c){const _0x5f4ae9=collection(db,_0x46b735['name']),_0x730324=query(_0x5f4ae9,where(_0x5de76f(0x214),'==',_0x3f183b)),_0x4ab324=await getDocs(_0x730324);if(!_0x4ab324['empty']){const _0x329614=_0x4ab324['docs'][0x0][_0x5de76f(0x21b)]();console['log']('Found\x20user\x20in\x20'+_0x46b735[_0x5de76f(0x3a0)]+'\x20with\x20email\x20'+_0x3f183b+':',_0x329614);const _0x1b9c5f=(_0x329614['roleName']||_0x329614['role']||'')['toLowerCase']();if(_0x1b9c5f&&_0x1b9c5f!==_0x5de76f(0x3ad)){_0x31fb6c=_0x1b9c5f,_0x1d25b6=_0x46b735[_0x5de76f(0x3a0)],console['log']('Found\x20specific\x20role:\x20'+_0x31fb6c+'\x20in\x20'+_0x1d25b6);break;}}}}catch(_0x26dbf1){console[_0x5de76f(0x383)]('Error\x20checking\x20'+_0x46b735['displayName']+':',_0x26dbf1);}}if(_0x31fb6c){console[_0x5de76f(0x39b)]('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x31fb6c+'\x20(from\x20'+_0x1d25b6+')');const _0x288e6e={'admin':[_0x5de76f(0x3e8),_0x5de76f(0x21c),'manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players',_0x5de76f(0x39d),'manage-trophies',_0x5de76f(0x3a9),'manage-highlights','user-roles-section',_0x5de76f(0x304),_0x5de76f(0x2db),'manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks',_0x5de76f(0x3c9),'settings',_0x5de76f(0x1cb),'elo-history','manage-highlights','user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'council':[_0x5de76f(0x3e8),'manage-players',_0x5de76f(0x304)],'creative\x20lead':['dashboard','manage-articles','manage-trophies','elo-history',_0x5de76f(0x2ac)]};if(_0x288e6e[_0x31fb6c])return console['log']('Role\x20\x27'+_0x31fb6c+'\x27\x20has\x20permissions:',_0x288e6e[_0x31fb6c]),_0x288e6e[_0x31fb6c];}return console[_0x5de76f(0x39b)]('No\x20specific\x20permissions\x20for\x20user\x20'+_0x3f183b+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x208082=[]){const _0x7dd55c=a4_0x46e366,_0x289ff5=document[_0x7dd55c(0x3b8)]('.sidebar-nav\x20.nav-item'),_0x3e4313=document['querySelectorAll'](_0x7dd55c(0x21f));(!_0x208082||_0x208082[_0x7dd55c(0x347)]===0x0)&&(_0x208082=[_0x7dd55c(0x3e8)]);_0x289ff5['forEach'](_0x2cc1d8=>{const _0x2f0687=_0x7dd55c,_0x23f57a=_0x2cc1d8['getAttribute']('data-section');_0x208082['includes'](_0x23f57a)?_0x2cc1d8['style']['display']=_0x2f0687(0x3d4):_0x2cc1d8[_0x2f0687(0x2c3)][_0x2f0687(0x34d)]=_0x2f0687(0x3ad),_0x2cc1d8[_0x2f0687(0x257)]('click',()=>{const _0x336bff=_0x2f0687,_0x33ed3c=_0x2cc1d8[_0x336bff(0x2d3)](_0x336bff(0x21d));if(!_0x208082['includes'](_0x33ed3c)){showNotification(_0x336bff(0x273),_0x336bff(0x383));return;}_0x289ff5['forEach'](_0x1d10d6=>_0x1d10d6['classList']['remove'](_0x336bff(0x3dc))),_0x2cc1d8['classList'][_0x336bff(0x1b5)]('active'),_0x3e4313['forEach'](_0x7dc0c4=>{_0x7dc0c4['style']['display']='none';});const _0xc64483=document['getElementById'](_0x33ed3c);_0xc64483&&(_0xc64483[_0x336bff(0x2c3)]['display']='block',console['log']('Switched\x20to\x20'+_0x33ed3c+_0x336bff(0x3a6)));});});const _0x6dd60b=document['querySelector'](_0x7dd55c(0x1d2)+_0x208082[0x0]+'\x22]');_0x6dd60b&&_0x6dd60b[_0x7dd55c(0x351)](),console['log'](_0x7dd55c(0x241));}function setupTabNavigation(){const _0x178c8c=a4_0x46e366,_0x51d1af=document['querySelectorAll']('.nav-item');let _0x615af2=null,_0x299789=new Set();_0x51d1af[_0x178c8c(0x2e2)](_0x44157c=>{_0x44157c['addEventListener']('click',function(){const _0x5e7815=a4_0x168e,_0x3bb193=this[_0x5e7815(0x2d3)]('data-section');if(_0x3bb193===_0x615af2)return;_0x615af2&&(document[_0x5e7815(0x3db)](_0x615af2)['style']['display']=_0x5e7815(0x3ad),_0x51d1af['forEach'](_0x396243=>_0x396243['classList']['remove']('active'))),document['getElementById'](_0x3bb193)['style']['display']='block',this['classList']['add']('active'),_0x615af2=_0x3bb193;});});}function loadSectionData(_0x223463){return;}async function initializeAdminDashboard(){const _0x587668=a4_0x46e366;try{const _0x5c8d73=auth['currentUser'],_0x7e2693=await getUserTabPermissions(_0x5c8d73['email']);console['log'](_0x587668(0x32b)+_0x5c8d73['email']+_0x587668(0x22a),_0x7e2693),window['userAllowedTabs']=_0x7e2693,setupSidebarNavigation(_0x7e2693),setupLadderSelector(),setupDashboardSection(),_0x7e2693['includes'](_0x587668(0x21c))&&setupManagePlayersSection(),_0x7e2693['includes']('elo-history')&&setupEloHistorySection(),_0x7e2693['includes']('manage-ranks')&&setupRankControls(),_0x7e2693[_0x587668(0x2b8)]('manage-articles')&&setupManageArticlesSection(),_0x7e2693['includes']('user-roles-section')&&setupUserRolesSection(),_0x7e2693[_0x587668(0x2b8)]('manage-trophies')&&setupTrophyManagementSection(),_0x7e2693['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x7e2693[_0x587668(0x2b8)]('inactive-players')&&setupInactivePlayersSection(),_0x7e2693['includes'](_0x587668(0x304))&&setupManageMatchesSection(),_0x7e2693['includes']('manage-points')&&setupManagePointsSection(),_0x7e2693['includes'](_0x587668(0x1e6))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x7e2693);}catch(_0x30581c){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x30581c);}}function setupDataLoadButtons(_0x548674=[]){const _0x2ec535=a4_0x46e366;(!_0x548674||_0x548674['length']===0x0)&&(_0x548674=[_0x2ec535(0x3e8)]);const _0x45306d=document[_0x2ec535(0x3db)]('load-dashboard-data');_0x45306d&&_0x45306d['addEventListener']('click',function(){const _0x1b1073=_0x2ec535;this[_0x1b1073(0x1c7)]['add']('loading'),this['innerHTML']=_0x1b1073(0x323),loadDashboardOverview()['then'](()=>{const _0x495cc1=_0x1b1073;this[_0x495cc1(0x1c7)]['remove']('loading'),this[_0x495cc1(0x2b5)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x386b9e=>{const _0x13a8be=_0x1b1073;console['error']('Error\x20loading\x20dashboard:',_0x386b9e),this['classList'][_0x13a8be(0x370)](_0x13a8be(0x205)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x548674['includes']('manage-trophies')){const _0x243dd2=document[_0x2ec535(0x3db)]('load-trophies-data');_0x243dd2&&_0x243dd2['addEventListener'](_0x2ec535(0x351),function(){const _0x357511=_0x2ec535;console['log']('Load\x20trophies\x20data\x20clicked'),this['classList'][_0x357511(0x1b5)]('loading'),this[_0x357511(0x2b5)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0x357511(0x3bd)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0xf7cb4d=>{const _0x5e4ecc=_0x357511;console['error'](_0x5e4ecc(0x2c9),_0xf7cb4d),this[_0x5e4ecc(0x1c7)]['remove'](_0x5e4ecc(0x205)),this[_0x5e4ecc(0x2b5)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x13c1ac=_0x5e4ecc;this[_0x13c1ac(0x2b5)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x548674['includes']('manage-players')){const _0x35e14b=document['getElementById']('load-players-data');_0x35e14b&&_0x35e14b[_0x2ec535(0x257)]('click',function(){console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x123fcd=a4_0x168e;this[_0x123fcd(0x1c7)][_0x123fcd(0x370)]('loading'),this[_0x123fcd(0x2b5)]=_0x123fcd(0x2a1);})['catch'](_0x479739=>{const _0x500826=a4_0x168e;console['error']('Error\x20loading\x20players:',_0x479739),this['classList']['remove']('loading'),this[_0x500826(0x2b5)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x548674[_0x2ec535(0x2b8)]('elo-history')){const _0x303072=document['getElementById']('load-elo-history-data');_0x303072&&_0x303072['addEventListener']('click',function(){const _0x4597d2=_0x2ec535;console['log'](_0x4597d2(0x33d)),this[_0x4597d2(0x1c7)][_0x4597d2(0x1b5)](_0x4597d2(0x205)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x3ec2ef=>{const _0x5e8d5e=_0x4597d2;console['error']('Error\x20loading\x20history:',_0x3ec2ef),this[_0x5e8d5e(0x1c7)][_0x5e8d5e(0x370)](_0x5e8d5e(0x205)),this['innerHTML']=_0x5e8d5e(0x1c6),setTimeout(()=>{const _0x53c18f=_0x5e8d5e;this[_0x53c18f(0x2b5)]=_0x53c18f(0x3d9);},0xbb8);});});}if(_0x548674['includes']('manage-articles')){const _0x51406d=document[_0x2ec535(0x3db)]('load-articles-data');_0x51406d&&_0x51406d['addEventListener']('click',function(){const _0x357527=_0x2ec535;console['log']('Load\x20articles\x20data\x20clicked'),this['classList'][_0x357527(0x1b5)](_0x357527(0x205)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x447fe0=>{const _0xe90e4d=_0x357527;console['error'](_0xe90e4d(0x2df),_0x447fe0),this['classList']['remove'](_0xe90e4d(0x205)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x548674['includes'](_0x2ec535(0x306))){const _0x803a7e=document['getElementById'](_0x2ec535(0x2bd));_0x803a7e&&_0x803a7e['addEventListener']('click',function(){const _0x4219be=_0x2ec535;console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x4219be(0x2b5)]=_0x4219be(0x323),loadUsersWithRoles()[_0x4219be(0x3bd)](()=>{const _0x253c39=_0x4219be;this[_0x253c39(0x1c7)]['remove']('loading'),this['innerHTML']=_0x253c39(0x24c);})[_0x4219be(0x2f5)](_0x2c6476=>{const _0x4e951a=_0x4219be;console['error']('Error\x20loading\x20users:',_0x2c6476),this['classList'][_0x4e951a(0x370)](_0x4e951a(0x205)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x548674[_0x2ec535(0x2b8)]('inactive-players')){const _0x3bdfed=document['getElementById']('load-inactive-players-data');_0x3bdfed&&_0x3bdfed[_0x2ec535(0x257)]('click',function(){const _0x4a884b=_0x2ec535;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this[_0x4a884b(0x1c7)][_0x4a884b(0x1b5)]('loading'),this['innerHTML']=_0x4a884b(0x323),loadInactivePlayersData()['then'](()=>{const _0x193de8=_0x4a884b;this['classList'][_0x193de8(0x370)](_0x193de8(0x205)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0xa83055=>{console['error']('Error\x20loading\x20inactive\x20players:',_0xa83055),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3450c7=a4_0x168e;this['innerHTML']=_0x3450c7(0x2d2);},0xbb8);});});}if(_0x548674[_0x2ec535(0x2b8)]('manage-highlights')){const _0x45c44b=document['getElementById']('load-highlights-data');_0x45c44b&&_0x45c44b['addEventListener']('click',function(){const _0x4d8495=_0x2ec535;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x4d8495(0x2b5)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x1a9e1f=>{const _0x7aad9d=_0x4d8495;console[_0x7aad9d(0x383)](_0x7aad9d(0x399),_0x1a9e1f),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1ecab1=_0x7aad9d;this[_0x1ecab1(0x2b5)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x548674['includes'](_0x2ec535(0x304))){const _0x3287ee=document['getElementById']('load-matches-data');_0x3287ee&&_0x3287ee['addEventListener'](_0x2ec535(0x351),function(){const _0x17803f=_0x2ec535;console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x17803f(0x3bd)](()=>{const _0x5798bb=_0x17803f;this['classList']['remove'](_0x5798bb(0x205)),this['innerHTML']=_0x5798bb(0x28f);})[_0x17803f(0x2f5)](_0x551aeb=>{const _0x49cfd9=_0x17803f;console['error']('Error\x20loading\x20matches:',_0x551aeb),this['classList'][_0x49cfd9(0x370)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x548674['includes']('manage-ribbons')){const _0xe663a0=document['getElementById']('load-ribbons-data');_0xe663a0&&_0xe663a0['addEventListener']('click',function(){const _0x12d95c=_0x2ec535;console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()[_0x12d95c(0x3bd)](()=>{const _0x43326b=_0x12d95c;this[_0x43326b(0x1c7)]['remove'](_0x43326b(0x205)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x41fd9e=>{const _0x1a46c3=_0x12d95c;console['error']('Error\x20loading\x20ribbons:',_0x41fd9e),this[_0x1a46c3(0x1c7)]['remove'](_0x1a46c3(0x205)),this['innerHTML']=_0x1a46c3(0x1c6),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x3431ed=a4_0x46e366;document['getElementById'](_0x3431ed(0x394))[_0x3431ed(0x263)]='-',document[_0x3431ed(0x3db)]('match-count')[_0x3431ed(0x263)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById'](_0x3431ed(0x318))['textContent']='-';}function setupLadderSelector(){const _0x194e1d=a4_0x46e366,_0xa88b51=document['querySelectorAll'](_0x194e1d(0x259));_0xa88b51['forEach'](_0xc1b2b9=>{_0xc1b2b9['addEventListener']('change',()=>{const _0x443f5f=a4_0x168e;currentLadder=_0xc1b2b9['value'],document[_0x443f5f(0x25b)]['setAttribute']('data-ladder',currentLadder);const _0x2f2c20=document[_0x443f5f(0x3db)]('current-ladder-display');_0x2f2c20&&(_0x2f2c20['textContent']=currentLadder),document[_0x443f5f(0x3db)]('player-count')[_0x443f5f(0x263)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts[_0x443f5f(0x2a4)]['destroy'](),charts[_0x443f5f(0x2a4)]=null),charts['activity']&&(charts['activity'][_0x443f5f(0x27d)](),charts[_0x443f5f(0x206)]=null),showNotification('Switched\x20to\x20'+currentLadder+_0x443f5f(0x35a),'info');});});const _0x1be90b=document[_0x194e1d(0x3db)]('current-ladder-display');_0x1be90b&&(_0x1be90b[_0x194e1d(0x263)]=currentLadder);}async function loadDashboardOverview(){const _0x548ec7=a4_0x46e366;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document['getElementById'](_0x548ec7(0x394))['textContent']='-',document[_0x548ec7(0x3db)](_0x548ec7(0x2da))['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0x22b16a=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':_0x548ec7(0x269),_0x21f781=currentLadder==='D1'?_0x548ec7(0x216):currentLadder==='D2'?'approvedMatchesD2':_0x548ec7(0x2b7),_0x229999=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0xeecdcf=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console[_0x548ec7(0x39b)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x22b16a+',\x20'+_0x21f781);const _0xf4feb2=await getDocs(collection(db,_0x22b16a)),_0x1d6068=_0xf4feb2['size'],_0x1c3d6f=await getDocs(collection(db,_0x21f781)),_0x38ab72=_0x1c3d6f[_0x548ec7(0x3d5)],_0x38746e=await getDocs(collection(db,_0x229999)),_0x7e2033=_0x38746e[_0x548ec7(0x3d5)],_0x28b96e=await getDocs(collection(db,_0xeecdcf)),_0x960264=_0x28b96e['size'];return document[_0x548ec7(0x3db)]('player-count')[_0x548ec7(0x263)]=_0x1d6068,document['getElementById']('match-count')[_0x548ec7(0x263)]=_0x38ab72,document[_0x548ec7(0x3db)]('pending-count')['textContent']=_0x7e2033,document['getElementById']('rejected-count')[_0x548ec7(0x263)]=_0x960264,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x224438){console[_0x548ec7(0x383)]('Error\x20loading\x20dashboard\x20data:',_0x224438);throw _0x224438;}}async function createRankDistributionChart(){const _0x320e2e=a4_0x46e366;try{const _0x358bd2=collection(db,currentLadder==='D1'?_0x320e2e(0x236):'playersD2'),_0x3cf585=await getDocs(_0x358bd2),_0x4f6750={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x3cf585[_0x320e2e(0x2e2)](_0x3eb679=>{const _0x18ad8d=_0x320e2e,_0x21ca18=_0x3eb679['data'](),_0x5bba00=_0x21ca18[_0x18ad8d(0x39e)]||0x4b0;if(_0x5bba00>=0x7d0)_0x4f6750['Emerald']++;else{if(_0x5bba00>=0x708)_0x4f6750['Gold']++;else{if(_0x5bba00>=0x640)_0x4f6750['Silver']++;else{if(_0x5bba00>=0x578)_0x4f6750['Bronze']++;else _0x4f6750[_0x18ad8d(0x337)]++;}}}});const _0x2cce29=document['getElementById'](_0x320e2e(0x250));charts['rankDistribution']&&charts['rankDistribution'][_0x320e2e(0x27d)](),charts['rankDistribution']=new Chart(_0x2cce29,{'type':_0x320e2e(0x25e),'data':{'labels':Object[_0x320e2e(0x277)](_0x4f6750),'datasets':[{'data':Object['values'](_0x4f6750),'backgroundColor':[_0x320e2e(0x377),'#CD7F32','#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x320e2e(0x311),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x20ad46){console[_0x320e2e(0x383)]('Error\x20creating\x20rank\x20distribution\x20chart:',_0x20ad46),document['getElementById']('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x3cff97=a4_0x46e366;try{const _0x5b3068=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0xd6a781=collection(db,_0x5b3068),_0x5cd838=new Date();_0x5cd838['setDate'](_0x5cd838[_0x3cff97(0x373)]()-0x7);const _0x36bda9=query(_0xd6a781,where(_0x3cff97(0x3ba),'>=',_0x5cd838),orderBy('approvedAt','asc')),_0x29dc11=await getDocs(_0x36bda9),_0x310d2a=[_0x3cff97(0x32a),'Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],_0x4774eb=_0x310d2a[_0x3cff97(0x1b3)]((_0x11081b,_0x5929ed)=>({..._0x11081b,[_0x5929ed]:0x0}),{});_0x29dc11[_0x3cff97(0x2e2)](_0x1a7767=>{const _0x5e2f14=_0x3cff97,_0x11bdd4=_0x1a7767[_0x5e2f14(0x21b)]();if(_0x11bdd4['approvedAt']){const _0x139425=_0x310d2a[new Date(_0x11bdd4['approvedAt']['seconds']*0x3e8)[_0x5e2f14(0x310)]()];_0x4774eb[_0x139425]++;}});const _0x5e75ff=document[_0x3cff97(0x3db)]('activity-chart');charts['activity']&&charts[_0x3cff97(0x206)]['destroy'](),charts['activity']=new Chart(_0x5e75ff,{'type':'bar','data':{'labels':_0x310d2a,'datasets':[{'label':'Matches\x20Played','data':_0x310d2a['map'](_0x57209b=>_0x4774eb[_0x57209b]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0x3cff97(0x34e),'borderColor':currentLadder==='D1'?_0x3cff97(0x2fd):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x3cff97(0x2d6)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x3cff97(0x2d6)},'grid':{'color':_0x3cff97(0x1cc)}}},'plugins':{'legend':{'labels':{'color':_0x3cff97(0x2d6)}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0xa5e6cc){console[_0x3cff97(0x383)](_0x3cff97(0x319),_0xa5e6cc),document['getElementById']('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x306c88=a4_0x46e366,_0x19ae87=document[_0x306c88(0x3db)](_0x306c88(0x1e3));if(!_0x19ae87)return;_0x19ae87['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x14fd04='players';if(currentLadder==='D2')_0x14fd04='playersD2';else currentLadder==='D3'&&(_0x14fd04=_0x306c88(0x269));console['log']('Loading\x20players\x20from\x20'+_0x14fd04+'\x20collection...');const _0x4ed227=collection(db,_0x14fd04),_0x4dd482=query(_0x4ed227,orderBy(_0x306c88(0x39e),_0x306c88(0x209))),_0x3145c8=await getDocs(_0x4dd482);if(_0x3145c8['empty']){_0x19ae87['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x19ae87['innerHTML']='';let _0x20f62f=0x1;_0x3145c8['forEach'](_0x4601f=>{const _0x2bc0c6=_0x306c88,_0x578388=_0x4601f[_0x2bc0c6(0x21b)](),_0x45dbb9=getRankFromElo(_0x578388['eloRating']||0x4b0),_0x111d20=getRankStyle(_0x578388['eloRating']||0x4b0),_0x4d871e=document['createElement']('tr');_0x4d871e['innerHTML']=_0x2bc0c6(0x3b2)+_0x20f62f+_0x2bc0c6(0x2c8)+_0x111d20[_0x2bc0c6(0x2d8)]+_0x2bc0c6(0x264)+(_0x578388[_0x2bc0c6(0x1dc)]||_0x2bc0c6(0x27a))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x578388['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x111d20['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x45dbb9+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x578388['wins']||0x0)+'W\x20/\x20'+(_0x578388['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x4601f['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x4601f['id']+_0x2bc0c6(0x3c5),_0x19ae87['appendChild'](_0x4d871e),_0x20f62f++;}),setupPlayerActionButtons();}catch(_0x5d2733){console[_0x306c88(0x383)]('Error\x20loading\x20players:',_0x5d2733),_0x19ae87['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x5d2733[_0x306c88(0x271)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x1c20ff){const _0x49479a=a4_0x46e366;if(_0x1c20ff>=0x7d0)return'Emerald';if(_0x1c20ff>=0x708)return _0x49479a(0x305);if(_0x1c20ff>=0x640)return'Silver';if(_0x1c20ff>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x5c1d34=a4_0x46e366;document[_0x5c1d34(0x3b8)]('.edit-btn')['forEach'](_0x3c78bf=>{_0x3c78bf['addEventListener']('click',async _0xd4a52d=>{const _0x40a9c7=_0xd4a52d['currentTarget']['dataset']['id'];openEditPlayerModal(_0x40a9c7);});}),document['querySelectorAll'](_0x5c1d34(0x34b))['forEach'](_0x41dbc4=>{_0x41dbc4['addEventListener']('click',async _0x35a010=>{const _0x4cd64b=a4_0x168e,_0x48ebc4=_0x35a010[_0x4cd64b(0x2f8)]['dataset']['id'];confirmDeletePlayer(_0x48ebc4);});});}async function openEditPlayerModal(_0x27b619){const _0x5010fa=a4_0x46e366;try{const _0x44b6ff=currentLadder==='D1'?'players':_0x5010fa(0x357),_0x530924=doc(db,_0x44b6ff,_0x27b619),_0x1a8e62=await getDoc(_0x530924);if(!_0x1a8e62[_0x5010fa(0x239)]()){showNotification('Player\x20not\x20found','error');return;}const _0x12cff0=_0x1a8e62['data'](),_0x35ca8c=document['getElementById']('edit-player-modal'),_0x4b390d=document['getElementById'](_0x5010fa(0x265)),_0x24d36d=document[_0x5010fa(0x3db)]('edit-elo'),_0x58c1d5=document[_0x5010fa(0x3db)]('edit-wins'),_0x3eb293=document['getElementById']('edit-losses');_0x4b390d[_0x5010fa(0x248)]=_0x12cff0['username']||'',_0x24d36d['value']=_0x12cff0[_0x5010fa(0x39e)]||0x4b0,_0x58c1d5[_0x5010fa(0x248)]=_0x12cff0['wins']||0x0,_0x3eb293[_0x5010fa(0x248)]=_0x12cff0['losses']||0x0,_0x35ca8c['dataset']['playerId']=_0x27b619,_0x35ca8c['classList'][_0x5010fa(0x1b5)]('active');}catch(_0x5869e4){console['error']('Error\x20opening\x20edit\x20modal:',_0x5869e4),showNotification('Failed\x20to\x20load\x20player\x20data',_0x5010fa(0x383));}}async function saveEditedPlayer(){const _0x4cf1c8=a4_0x46e366;try{const _0x4c0386=document['getElementById']('edit-player-modal'),_0x2d7445=_0x4c0386[_0x4cf1c8(0x349)]['playerId'];if(!_0x2d7445){showNotification('No\x20player\x20selected','error');return;}const _0x218d1=document['getElementById']('edit-username'),_0x4f28d4=document['getElementById'](_0x4cf1c8(0x2f0)),_0x4aa96b=document['getElementById']('edit-wins'),_0x353f53=document['getElementById']('edit-losses'),_0x56fd13=_0x218d1['value']['trim'](),_0x2fb07c=parseInt(_0x4f28d4['value']),_0x44a7b5=parseInt(_0x4aa96b['value']),_0x2fb440=parseInt(_0x353f53[_0x4cf1c8(0x248)]);if(!_0x56fd13||isNaN(_0x2fb07c)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0xa9a88d=currentLadder==='D1'?_0x4cf1c8(0x236):'playersD2',_0x121fe8=doc(db,_0xa9a88d,_0x2d7445),_0xa2e12b=await getDoc(_0x121fe8),_0x369257=_0xa2e12b[_0x4cf1c8(0x239)]()?_0xa2e12b[_0x4cf1c8(0x21b)]():{},_0x1aaf81=_0x369257[_0x4cf1c8(0x39e)]||0x4b0;await updateDoc(_0x121fe8,{'username':_0x56fd13,'eloRating':_0x2fb07c,'wins':_0x44a7b5||0x0,'losses':_0x2fb440||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x2fb07c!==_0x1aaf81){const _0x319e6d=currentLadder==='D1'?'eloHistory':_0x4cf1c8(0x1ea);await addDoc(collection(db,_0x319e6d),{'player':_0x56fd13,'previousElo':_0x1aaf81,'newElo':_0x2fb07c,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x4cf1c8(0x218));}catch(_0x51aa93){console[_0x4cf1c8(0x383)]('Error\x20updating\x20player:',_0x51aa93),showNotification(_0x4cf1c8(0x30d)+_0x51aa93['message'],_0x4cf1c8(0x383));}}function closeEditPlayerModal(){const _0x4f288b=a4_0x46e366,_0x210f8a=document['getElementById']('edit-player-modal');_0x210f8a['classList'][_0x4f288b(0x370)]('active'),_0x210f8a['dataset']['playerId']='';}async function confirmDeletePlayer(_0x232183){const _0x549f5a=a4_0x46e366;if(confirm(_0x549f5a(0x1f1)))try{const _0x15c06d=currentLadder==='D1'?_0x549f5a(0x236):_0x549f5a(0x357);await deleteDoc(doc(db,_0x15c06d,_0x232183)),loadPlayersData(),showNotification(_0x549f5a(0x309),_0x549f5a(0x218));}catch(_0x1a2498){console['error']('Error\x20deleting\x20player:',_0x1a2498),showNotification(_0x549f5a(0x28d)+_0x1a2498['message'],'error');}}async function setupManagePlayersSection(){const _0x866513=a4_0x46e366,_0xde6972=document[_0x866513(0x3db)]('add-player-form');_0xde6972&&_0xde6972['addEventListener'](_0x866513(0x3ab),async _0x41fda2=>{_0x41fda2['preventDefault'](),await addNewPlayer();});const _0x16bbc6=document['getElementById']('player-search');_0x16bbc6&&_0x16bbc6[_0x866513(0x257)]('input',debounce(filterPlayerTable,0x12c));const _0x1a5359=document[_0x866513(0x3db)]('save-player-btn');_0x1a5359&&_0x1a5359[_0x866513(0x257)]('click',saveEditedPlayer);const _0x5a094f=document['getElementById']('cancel-edit-btn');_0x5a094f&&_0x5a094f['addEventListener']('click',closeEditPlayerModal);const _0x5af8da=document['getElementById'](_0x866513(0x2c2));_0x5af8da&&_0x5af8da['addEventListener']('click',_0x1bbd78=>{const _0x19ee7a=_0x866513;_0x1bbd78[_0x19ee7a(0x29d)]===_0x5af8da&&closeEditPlayerModal();});const _0x15fda6=document['getElementById']('players-ladder-selector');_0x15fda6&&_0x15fda6['addEventListener']('change',()=>{currentLadder=_0x15fda6['value'],loadPlayersData();});}async function addNewPlayer(){const _0x389f93=a4_0x46e366;try{const _0x38b0a9=document['getElementById']('new-player-username'),_0x518bf6=document[_0x389f93(0x3db)](_0x389f93(0x1df)),_0x1fbab7=_0x38b0a9['value']['trim'](),_0x83255c=parseInt(_0x518bf6['value'])||0x4b0;if(!_0x1fbab7){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0x1fbab7+'\x20with\x20ELO\x20'+_0x83255c+'\x20to\x20'+currentLadder+_0x389f93(0x2b6));let _0x3636dd=_0x389f93(0x236),_0xc133c5='eloHistory';if(currentLadder==='D2')_0x3636dd=_0x389f93(0x357),_0xc133c5='eloHistoryD2';else currentLadder==='D3'&&(_0x3636dd=_0x389f93(0x269),_0xc133c5='eloHistoryD3');const _0x5b9746=query(collection(db,_0x3636dd),where('username','==',_0x1fbab7)),_0x1d68e1=await getDocs(_0x5b9746);if(!_0x1d68e1['empty']){alert(_0x389f93(0x3be)+_0x1fbab7+_0x389f93(0x315)+currentLadder+'\x20ladder');return;}const _0x5d4321=auth['currentUser'],_0x18c3a6={'username':_0x1fbab7,'eloRating':_0x83255c,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x5d4321?_0x5d4321['email']:_0x389f93(0x26c),'gameMode':currentLadder};await addDoc(collection(db,_0x3636dd),_0x18c3a6),await addDoc(collection(db,_0xc133c5),{'player':_0x1fbab7,'previousElo':0x4b0,'newElo':_0x83255c,'timestamp':serverTimestamp(),'type':_0x389f93(0x1d5),'placedBy':_0x5d4321?_0x5d4321['email']:'admin','gameMode':currentLadder}),_0x38b0a9['value']='',_0x518bf6['value']='1200',alert('Player\x20'+_0x1fbab7+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x3749ab){console['error']('Error\x20adding\x20player:',_0x3749ab),alert(_0x389f93(0x38f)+_0x3749ab[_0x389f93(0x271)]);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x4f7906=document['getElementById']('add-player-form');_0x4f7906&&_0x4f7906['addEventListener']('submit',_0x5daff5=>{_0x5daff5['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x3ca02f=a4_0x46e366,_0x35d722=document[_0x3ca02f(0x3db)]('player-search')['value'][_0x3ca02f(0x3ac)](),_0x1c34fd=document['querySelectorAll'](_0x3ca02f(0x229));let _0x4a702d=0x0;_0x1c34fd[_0x3ca02f(0x2e2)](_0x106910=>{const _0x4e1091=_0x106910['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x4e1091['includes'](_0x35d722)?(_0x106910['style']['display']='',_0x4a702d++):_0x106910['style']['display']='none';});const _0x578706=document['getElementById']('no-results-message');_0x578706&&(_0x4a702d===0x0&&_0x35d722!==''?_0x578706['style']['display']='block':_0x578706[_0x3ca02f(0x2c3)]['display']=_0x3ca02f(0x3ad));}function debounce(_0x57e38c,_0x26c89b){let _0x4ff607;return function(..._0x20cdb0){const _0x3f3f2d=a4_0x168e;clearTimeout(_0x4ff607),_0x4ff607=setTimeout(()=>_0x57e38c[_0x3f3f2d(0x1f9)](this,_0x20cdb0),_0x26c89b);};}async function loadEloHistory(_0x4978d3=0x1){const _0x7443b6=a4_0x46e366,_0x299d64=document[_0x7443b6(0x3db)]('elo-history-table-body'),_0x255fda=currentLadder['toLowerCase']();if(!_0x299d64)return;_0x299d64[_0x7443b6(0x2b5)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x41be3d=currentLadder==='D1'?_0x7443b6(0x2af):currentLadder==='D2'?_0x7443b6(0x1ea):'eloHistoryD3',_0x5dd75f=collection(db,_0x41be3d);let _0xe23875;if(_0x4978d3>eloHistoryPagination[_0x255fda][_0x7443b6(0x3b3)]&&eloHistoryPagination[_0x255fda][_0x7443b6(0x286)])_0xe23875=query(_0x5dd75f,orderBy(_0x7443b6(0x231),'desc'),startAfter(eloHistoryPagination[_0x255fda]['lastVisible']),limit(PAGE_SIZE));else _0x4978d3<eloHistoryPagination[_0x255fda][_0x7443b6(0x3b3)]&&eloHistoryPagination[_0x255fda]['firstVisible']?_0xe23875=query(_0x5dd75f,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x255fda]['firstVisible']),limitToLast(PAGE_SIZE)):_0xe23875=query(_0x5dd75f,orderBy('timestamp',_0x7443b6(0x209)),limit(PAGE_SIZE));const _0x21baeb=await getDocs(_0xe23875);if(_0x21baeb['empty']){_0x299d64['innerHTML']=_0x7443b6(0x240),document[_0x7443b6(0x3db)](_0x255fda+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x255fda][_0x7443b6(0x3b3)]=_0x4978d3,eloHistoryPagination[_0x255fda][_0x7443b6(0x3c6)]=_0x21baeb[_0x7443b6(0x1ee)][0x0],eloHistoryPagination[_0x255fda]['lastVisible']=_0x21baeb[_0x7443b6(0x1ee)][_0x21baeb['docs'][_0x7443b6(0x347)]-0x1];const _0x472ea3=new Map();_0x299d64['innerHTML']='';const _0x563fb7=async _0xe2023f=>{const _0x58de3e=_0x7443b6;if(typeof _0xe2023f!=='string'||_0xe2023f['length']<0x14||/[^a-zA-Z0-9-_]/[_0x58de3e(0x316)](_0xe2023f))return _0xe2023f;if(_0x472ea3['has'](_0xe2023f))return _0x472ea3['get'](_0xe2023f);try{for(const _0x5e7f0b of['players','playersD2','playersD3','nonParticipants']){const _0x39ba61=await getDoc(doc(db,_0x5e7f0b,_0xe2023f));if(_0x39ba61[_0x58de3e(0x239)]()&&_0x39ba61[_0x58de3e(0x21b)]()['username']){const _0x491412=_0x39ba61['data']()['username'];return _0x472ea3[_0x58de3e(0x1ec)](_0xe2023f,_0x491412),_0x491412;}}return _0xe2023f;}catch(_0x251718){return console[_0x58de3e(0x360)](_0x58de3e(0x226)+_0xe2023f+':',_0x251718),_0xe2023f;}};for(const _0x549f0f of _0x21baeb['docs']){const _0x37587a=_0x549f0f[_0x7443b6(0x21b)](),_0x27bda2=document['createElement']('tr'),_0x378f5b=_0x37587a['timestamp']?new Date(_0x37587a['timestamp']['seconds']*0x3e8)['toLocaleString']():_0x7443b6(0x300),_0x3ffe2a=_0x37587a[_0x7443b6(0x2e7)]-_0x37587a['previousElo'],_0x369150=_0x3ffe2a>0x0?'positive-change':_0x3ffe2a<0x0?'negative-change':'',_0x13b608=_0x3ffe2a>0x0?'+':'',_0xbd8b4f=_0x37587a['player']||_0x37587a['username']||_0x37587a[_0x7443b6(0x3ae)]||_0x7443b6(0x300),_0x52d035=await _0x563fb7(_0xbd8b4f);_0x27bda2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x378f5b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x52d035+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x37587a[_0x7443b6(0x336)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x37587a['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x369150+'\x22>'+_0x13b608+_0x3ffe2a+_0x7443b6(0x35e)+formatHistoryType(_0x37587a['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x37587a['modifiedBy']||_0x37587a['promotedBy']||_0x37587a['demotedBy']||_0x7443b6(0x1bd))+_0x7443b6(0x228),_0x299d64['appendChild'](_0x27bda2);}document['getElementById'](_0x255fda+'-page-indicator')['textContent']='Page\x20'+_0x4978d3;const _0x8038bd=document[_0x7443b6(0x3db)](_0x255fda+'-prev-page'),_0x4c5e0a=document['getElementById'](_0x255fda+'-next-page');if(_0x8038bd)_0x8038bd['disabled']=_0x4978d3<=0x1;const _0x5a4767=query(_0x5dd75f,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x255fda][_0x7443b6(0x286)]),limit(0x1)),_0x33f2cc=await getDocs(_0x5a4767);if(_0x4c5e0a)_0x4c5e0a['disabled']=_0x33f2cc[_0x7443b6(0x381)];}catch(_0x1870cc){console['error'](_0x7443b6(0x26e),_0x1870cc),_0x299d64[_0x7443b6(0x2b5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x1870cc['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x49dd32){const _0x20a760=a4_0x46e366;switch(_0x49dd32){case _0x20a760(0x387):return'Match\x20Result';case _0x20a760(0x32d):return'Promotion';case'demotion':return'Demotion';case _0x20a760(0x32e):return _0x20a760(0x27c);case'initial_placement':return _0x20a760(0x1d1);default:return _0x49dd32||'Unknown';}}function setupEloHistorySection(){const _0x298a6f=a4_0x46e366;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{const _0x3f7a9b=a4_0x168e;loadEloHistory(eloHistoryPagination['d1'][_0x3f7a9b(0x3b3)]-0x1);}),document[_0x298a6f(0x3db)]('d1-next-page')['addEventListener']('click',()=>{const _0x4e5b5c=_0x298a6f;loadEloHistory(eloHistoryPagination['d1'][_0x4e5b5c(0x3b3)]+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x1f81b3=document[_0x298a6f(0x3db)]('d3-prev-page'),_0x4cba05=document['getElementById']('d3-next-page');_0x1f81b3&&_0x1f81b3['addEventListener'](_0x298a6f(0x351),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x4cba05&&_0x4cba05[_0x298a6f(0x257)]('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x1a35ab=document['getElementById'](_0x298a6f(0x3cc));_0x1a35ab&&_0x1a35ab['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x576ab4=document['getElementById'](_0x298a6f(0x281));_0x576ab4&&_0x576ab4['addEventListener'](_0x298a6f(0x220),applyEloHistoryFilters);const _0x340603=document['getElementById']('reset-history-filters');_0x340603&&_0x340603[_0x298a6f(0x257)](_0x298a6f(0x351),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x54b635=a4_0x46e366,_0x10e382=document['getElementById'](_0x54b635(0x3cc))['value']['toLowerCase'](),_0x4d5343=document[_0x54b635(0x3b8)](_0x54b635(0x210));let _0x1be192=0x0;_0x4d5343['forEach'](_0x2a2fd1=>{const _0x106350=_0x54b635;if(_0x2a2fd1['classList']['contains']('loading-cell')||_0x2a2fd1[_0x106350(0x1c7)][_0x106350(0x2a0)](_0x106350(0x2a3))||_0x2a2fd1['classList'][_0x106350(0x2a0)]('error-state'))return;const _0x40b916=_0x2a2fd1['querySelector']('.player')?.['textContent']['toLowerCase']()||'',_0x144958=_0x2a2fd1['querySelector'](_0x106350(0x1fd))?.['textContent']['toLowerCase']()||'',_0x278cf6=_0x2a2fd1['querySelector']('.admin-action')?.['textContent']['toLowerCase']()||'';_0x40b916['includes'](_0x10e382)||_0x144958[_0x106350(0x2b8)](_0x10e382)||_0x278cf6['includes'](_0x10e382)?(_0x2a2fd1['style'][_0x106350(0x34d)]='',_0x1be192++):_0x2a2fd1['style'][_0x106350(0x34d)]='none';});}async function applyEloHistoryFilters(){const _0x5dc96d=a4_0x46e366,_0x4fb669=document['getElementById']('history-start-date')['value'],_0x121def=document['getElementById']('history-end-date')[_0x5dc96d(0x248)],_0x645ed4=document[_0x5dc96d(0x3db)]('history-type-filter')['value'],_0xcb026=currentLadder['toLowerCase']();eloHistoryPagination[_0xcb026]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x349a6a=document['getElementById'](_0x5dc96d(0x2ff));_0x349a6a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x36f624=currentLadder==='D1'?'eloHistory':_0x5dc96d(0x1ea),_0x3207ab=collection(db,_0x36f624);let _0x19c654=[orderBy('timestamp',_0x5dc96d(0x209))];if(_0x4fb669){const _0x59e1fb=new Date(_0x4fb669);_0x59e1fb[_0x5dc96d(0x3c7)](0x0,0x0,0x0,0x0),_0x19c654['push'](where('timestamp','>=',_0x59e1fb));}if(_0x121def){const _0x4d6383=new Date(_0x121def);_0x4d6383['setHours'](0x17,0x3b,0x3b,0x3e7),_0x19c654[_0x5dc96d(0x25c)](where('timestamp','<=',_0x4d6383));}_0x645ed4&&_0x645ed4!=='all'&&_0x19c654[_0x5dc96d(0x25c)](where('type','==',_0x645ed4));_0x19c654[_0x5dc96d(0x25c)](limit(PAGE_SIZE));const _0x23eec5=query(_0x3207ab,..._0x19c654),_0x37321c=await getDocs(_0x23eec5);!_0x37321c['empty']&&(eloHistoryPagination[_0xcb026]['firstVisible']=_0x37321c['docs'][0x0],eloHistoryPagination[_0xcb026][_0x5dc96d(0x286)]=_0x37321c['docs'][_0x37321c['docs']['length']-0x1]);_0x349a6a[_0x5dc96d(0x2b5)]='';if(_0x37321c['empty']){_0x349a6a['innerHTML']=_0x5dc96d(0x343);return;}_0x37321c['forEach'](_0x5e0b35=>{const _0x503d98=_0x5dc96d,_0x1ef628=_0x5e0b35['data'](),_0x38d5d6=document['createElement']('tr'),_0x294958=_0x1ef628['timestamp']?new Date(_0x1ef628[_0x503d98(0x231)]['seconds']*0x3e8)['toLocaleString']():_0x503d98(0x300),_0x2020f8=_0x1ef628['newElo']-_0x1ef628['previousElo'],_0x3fe14f=_0x2020f8>0x0?'positive-change':_0x2020f8<0x0?_0x503d98(0x1b9):'',_0x205195=_0x2020f8>0x0?'+':'',_0x1e227e=_0x1ef628['player']||_0x1ef628['username']||_0x1ef628['userId']||'N/A';_0x38d5d6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x294958+_0x503d98(0x26f)+_0x1e227e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x1ef628['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x1ef628['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x3fe14f+'\x22>'+_0x205195+_0x2020f8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x1ef628['type'])+_0x503d98(0x23b)+(_0x1ef628['modifiedBy']||_0x1ef628[_0x503d98(0x39a)]||_0x1ef628['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x349a6a['appendChild'](_0x38d5d6);}),document['getElementById'](_0xcb026+'-page-indicator')['textContent']='Page\x201';}catch(_0x45b200){console['error'](_0x5dc96d(0x30e),_0x45b200),_0x349a6a[_0x5dc96d(0x2b5)]=_0x5dc96d(0x274)+_0x45b200[_0x5dc96d(0x271)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x29b27d=a4_0x46e366;document[_0x29b27d(0x3db)]('history-start-date')[_0x29b27d(0x248)]='',document[_0x29b27d(0x3db)]('history-end-date')['value']='',document['getElementById']('history-type-filter')['value']='all',document[_0x29b27d(0x3db)](_0x29b27d(0x3cc))['value']='';const _0x1e2cd7=currentLadder[_0x29b27d(0x3ac)]();eloHistoryPagination[_0x1e2cd7]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x1a7b0e=a4_0x46e366,_0x2fd4ee=document['getElementById']('promote-player-btn'),_0x180711=document['getElementById']('promote-modal'),_0xb934b4=document['getElementById']('promote-form');_0x2fd4ee&&_0x180711&&_0xb934b4&&(_0x2fd4ee[_0x1a7b0e(0x257)]('click',()=>{const _0x5de905=_0x1a7b0e;_0x180711[_0x5de905(0x1c7)]['add']('active');}),_0x180711[_0x1a7b0e(0x257)]('click',_0x361802=>{const _0x52fee7=_0x1a7b0e;_0x361802[_0x52fee7(0x29d)]===_0x180711&&_0x180711[_0x52fee7(0x1c7)][_0x52fee7(0x370)](_0x52fee7(0x3dc));}),_0xb934b4['addEventListener']('submit',async _0x4317d5=>{const _0x467245=_0x1a7b0e;_0x4317d5['preventDefault']();const _0x313a04=document[_0x467245(0x3db)](_0x467245(0x28c)),_0x442fb7=document[_0x467245(0x3db)]('promote-ladder'),_0x337dfd=_0x313a04['value']['trim'](),_0x4d9b90=_0x442fb7['value'];if(!_0x337dfd){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x337dfd,_0x4d9b90),_0x180711['classList'][_0x467245(0x370)]('active'),_0x313a04['value']='';}catch(_0x158f1){showNotification(_0x158f1['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{_0x180711['classList']['remove']('active');}));const _0x52b790=document[_0x1a7b0e(0x3db)](_0x1a7b0e(0x2c6)),_0x3065bb=document[_0x1a7b0e(0x3db)](_0x1a7b0e(0x29f)),_0x3968a=document['getElementById']('demote-form');_0x52b790&&_0x3065bb&&_0x3968a&&(_0x52b790['addEventListener']('click',()=>{_0x3065bb['classList']['add']('active');}),_0x3065bb['addEventListener']('click',_0xaacb44=>{const _0x5b5c79=_0x1a7b0e;_0xaacb44[_0x5b5c79(0x29d)]===_0x3065bb&&_0x3065bb['classList']['remove']('active');}),_0x3968a[_0x1a7b0e(0x257)]('submit',async _0x4251c7=>{const _0x713655=_0x1a7b0e;_0x4251c7['preventDefault']();const _0x2f091f=document[_0x713655(0x3db)](_0x713655(0x246)),_0x1ce839=document['getElementById']('demote-ladder'),_0xc61e59=_0x2f091f['value'][_0x713655(0x3c2)](),_0x4fb053=_0x1ce839['value'];if(!_0xc61e59){alert(_0x713655(0x33a));return;}try{await demotePlayer(_0xc61e59,_0x4fb053),document['getElementById'](_0x713655(0x29f))['classList']['remove']('active'),document['getElementById'](_0x713655(0x246))['value']='';}catch(_0x11c4f4){console[_0x713655(0x383)]('Error\x20in\x20demotion:',_0x11c4f4);}}));const _0x518690=document['getElementById'](_0x1a7b0e(0x308)),_0x4e8c5d=document[_0x1a7b0e(0x3db)]('set-elo-modal'),_0x732519=document['getElementById']('set-elo-form');_0x518690&&_0x4e8c5d&&_0x732519&&(_0x518690['addEventListener']('click',()=>{const _0x55a4e0=_0x1a7b0e;_0x4e8c5d[_0x55a4e0(0x1c7)]['add']('active');}),_0x4e8c5d['addEventListener'](_0x1a7b0e(0x351),_0x416891=>{const _0x550485=_0x1a7b0e;_0x416891['target']===_0x4e8c5d&&_0x4e8c5d[_0x550485(0x1c7)]['remove']('active');}),_0x732519[_0x1a7b0e(0x257)](_0x1a7b0e(0x3ab),async _0x443159=>{const _0x8a8083=_0x1a7b0e;_0x443159['preventDefault']();const _0x2eeea0=document[_0x8a8083(0x3db)]('set-elo-username'),_0x2238c5=document['getElementById']('set-elo-value');let _0x3b88c9;const _0x4a692d=document[_0x8a8083(0x3db)]('set-elo-ladder'),_0x27e0b2=document[_0x8a8083(0x1f0)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0x4a692d)_0x3b88c9=_0x4a692d[_0x8a8083(0x248)];else _0x27e0b2?_0x3b88c9=_0x27e0b2['value']:_0x3b88c9='D1';if(!_0x2eeea0||!_0x2238c5){showNotification(_0x8a8083(0x379),'error');return;}const _0x1045f6=_0x2eeea0[_0x8a8083(0x248)]['trim'](),_0x43415d=parseInt(_0x2238c5['value']);if(!_0x1045f6||isNaN(_0x43415d)){showNotification(_0x8a8083(0x36a),'error');return;}try{await setCustomElo(_0x1045f6,_0x43415d,_0x3b88c9),_0x4e8c5d['classList']['remove']('active'),_0x2eeea0[_0x8a8083(0x248)]='',_0x2238c5['value']='';}catch(_0x441413){showNotification(_0x441413['message'],'error');}}),document['getElementById'](_0x1a7b0e(0x2a8))[_0x1a7b0e(0x257)]('click',()=>{_0x4e8c5d['classList']['remove']('active');}));const _0x35f32a=document['getElementById'](_0x1a7b0e(0x283)),_0x441de8=document[_0x1a7b0e(0x3db)]('set-role-form');if(_0x35f32a&&_0x441de8){_0x35f32a['addEventListener']('click',_0x32cbae=>{_0x32cbae['target']===_0x35f32a&&closeModalHandler();}),_0x441de8['addEventListener']('submit',async _0x235c6f=>{const _0x4cee70=_0x1a7b0e;_0x235c6f['preventDefault']();const _0x5789e3=document['getElementById'](_0x4cee70(0x2f3)),_0x3ed366=document['getElementById']('role-name'),_0x6c14af=document['getElementById']('role-color'),_0x399a6c=_0x5789e3['value']['trim'](),_0x42b6fe=_0x3ed366['value']['trim'](),_0x3bbbeb=_0x6c14af[_0x4cee70(0x248)];if(!_0x399a6c){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x399a6c,_0x42b6fe,_0x3bbbeb),closeModalHandler(),loadUsersWithRoles();}catch(_0x35b0c9){}});const _0x4ce41c=document['getElementById']('cancel-role-btn');_0x4ce41c&&(_0x4ce41c[_0x1a7b0e(0x267)]('click',closeModalHandler),_0x4ce41c['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x3f4c14,_0x2b8c50){const _0x49bc3e=a4_0x46e366;try{console['log']('Attempting\x20to\x20promote\x20'+_0x3f4c14+'\x20in\x20'+_0x2b8c50+_0x49bc3e(0x2b6));const _0x9045f9=auth[_0x49bc3e(0x276)];if(!_0x9045f9)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x403f4a=_0x2b8c50==='D2'?'playersD2':'players',_0x5c8874=_0x2b8c50==='D2'?_0x49bc3e(0x1ea):'eloHistory';console['log'](_0x49bc3e(0x378)+_0x403f4a);const _0x4728de=collection(db,_0x403f4a),_0xd8d79f=query(_0x4728de,where('username','==',_0x3f4c14)),_0x5da6d4=await getDocs(_0xd8d79f);if(_0x5da6d4['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x2b8c50+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x2b8c50+'\x20ladder');}const _0x22be26=_0x5da6d4['docs'][0x0],_0x56f288=_0x22be26[_0x49bc3e(0x21b)](),_0x272b1b=_0x56f288['eloRating']||0x4b0,_0x3d2833=_0x22be26['id'];console[_0x49bc3e(0x39b)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x272b1b);const _0x13ec41=[{'name':'Bronze','elo':0x578},{'name':_0x49bc3e(0x3b0),'elo':0x640},{'name':_0x49bc3e(0x305),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x587a16=_0x13ec41['find'](_0x4e7670=>_0x4e7670[_0x49bc3e(0x393)]>_0x272b1b);if(!_0x587a16){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x2b8c50+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x2b8c50+'\x20ladder');}console['log']('Promoting\x20player\x20to\x20'+_0x587a16['name']+'\x20('+_0x587a16[_0x49bc3e(0x393)]+')'),await updateDoc(doc(db,_0x403f4a,_0x22be26['id']),{'eloRating':_0x587a16[_0x49bc3e(0x393)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x9045f9['email']||_0x49bc3e(0x26c)}),await addDoc(collection(db,_0x5c8874),{'player':_0x3f4c14,'previousElo':_0x272b1b,'newElo':_0x587a16[_0x49bc3e(0x393)],'timestamp':serverTimestamp(),'type':_0x49bc3e(0x32d),'rankAchieved':_0x587a16[_0x49bc3e(0x270)],'promotedBy':_0x9045f9['email']||_0x49bc3e(0x26c),'gameMode':_0x2b8c50});try{const {promotionManager:_0x185a21}=await import('./promotions.js'),_0x521f7d=_0x185a21['getRankName'](_0x272b1b),_0x5f5499=_0x587a16['name'];await _0x185a21[_0x49bc3e(0x2fb)](_0x3d2833,_0x3f4c14,_0x272b1b,_0x587a16['elo'],_0x521f7d,_0x5f5499,'promotion',{'displayName':_0x3f4c14,'source':'admin','adminUser':_0x9045f9['email'],'ladder':_0x2b8c50}),console[_0x49bc3e(0x39b)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x25842a){console['error'](_0x49bc3e(0x2ee),_0x25842a);}return alert('Successfully\x20promoted\x20'+_0x3f4c14+'\x20to\x20'+_0x587a16['name']+'\x20('+_0x587a16['elo']+')'),currentLadder===_0x2b8c50&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x4b7c38){console['error']('Error\x20promoting\x20player:',_0x4b7c38),alert('Error\x20promoting\x20player:\x20'+_0x4b7c38['message']);throw _0x4b7c38;}}document['addEventListener'](a4_0x46e366(0x37c),()=>{const _0x14c3b9=a4_0x46e366,_0x29d32c=document[_0x14c3b9(0x3db)](_0x14c3b9(0x332));_0x29d32c&&_0x29d32c['addEventListener']('submit',async _0x234c27=>{const _0x3ad7ad=_0x14c3b9;_0x234c27['preventDefault']();const _0x3ce0f2=document['getElementById']('promote-username')[_0x3ad7ad(0x248)]['trim'](),_0x44cbeb=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x3ce0f2){alert(_0x3ad7ad(0x33a));return;}try{await promotePlayer(_0x3ce0f2,_0x44cbeb),document['getElementById']('promote-modal')['classList']['remove'](_0x3ad7ad(0x3dc)),document['getElementById']('promote-username')['value']='';}catch(_0x191e74){console['error']('Error\x20in\x20promotion:',_0x191e74);}});});async function demotePlayer(_0xc66e45,_0x1af94b){const _0xdf14ce=a4_0x46e366;try{console['log'](_0xdf14ce(0x380)+_0xc66e45+_0xdf14ce(0x3ca)+_0x1af94b+_0xdf14ce(0x2b6));const _0x35631f=auth[_0xdf14ce(0x276)];if(!_0x35631f)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x1d0b06=_0x1af94b==='D2'?_0xdf14ce(0x357):_0xdf14ce(0x236),_0x426765=_0x1af94b==='D2'?'eloHistoryD2':'eloHistory';console[_0xdf14ce(0x39b)](_0xdf14ce(0x378)+_0x1d0b06);const _0x51fd5d=collection(db,_0x1d0b06),_0x553baa=query(_0x51fd5d,where('username','==',_0xc66e45)),_0x3c66f2=await getDocs(_0x553baa);if(_0x3c66f2['empty']){alert(_0xdf14ce(0x1c5)+_0x1af94b+_0xdf14ce(0x2b6));throw new Error(_0xdf14ce(0x1c5)+_0x1af94b+'\x20ladder');}const _0x21fab7=_0x3c66f2['docs'][0x0],_0x55dcfa=_0x21fab7['data'](),_0x4d6f10=_0x55dcfa['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x4d6f10);const _0x2b293c=[{'name':'Gold','elo':0x708},{'name':_0xdf14ce(0x3b0),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0xa71966=_0x2b293c['find'](_0x5db660=>_0x5db660['elo']<_0x4d6f10);if(!_0xa71966){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x1af94b+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x1af94b+'\x20ladder');}console['log']('Demoting\x20player\x20to\x20'+_0xa71966[_0xdf14ce(0x270)]+'\x20('+_0xa71966[_0xdf14ce(0x393)]+')'),await updateDoc(doc(db,_0x1d0b06,_0x21fab7['id']),{'eloRating':_0xa71966['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x35631f['email']||_0xdf14ce(0x26c)}),await addDoc(collection(db,_0x426765),{'player':_0xc66e45,'previousElo':_0x4d6f10,'newElo':_0xa71966['elo'],'timestamp':serverTimestamp(),'type':_0xdf14ce(0x1fe),'rankAchieved':_0xa71966['name'],'demotedBy':_0x35631f['email']||'admin','gameMode':_0x1af94b});try{const {promotionManager:_0x240b51}=await import('./promotions.js'),_0xf4ebcf=_0x240b51['getRankName'](_0x4d6f10),_0x52b55c=_0xa71966[_0xdf14ce(0x270)];await _0x240b51[_0xdf14ce(0x2fb)](_0x21fab7['id'],_0xc66e45,_0x4d6f10,_0xa71966[_0xdf14ce(0x393)],_0xf4ebcf,_0x52b55c,'demotion',{'displayName':_0xc66e45,'source':'admin','adminUser':_0x35631f['email'],'ladder':_0x1af94b}),console['log'](_0xdf14ce(0x2e0));}catch(_0x4340e1){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x4340e1);}return alert('Successfully\x20demoted\x20'+_0xc66e45+_0xdf14ce(0x32c)+_0xa71966['name']+'\x20('+_0xa71966[_0xdf14ce(0x393)]+')'),currentLadder===_0x1af94b&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x7fa8c3){console[_0xdf14ce(0x383)]('Error\x20demoting\x20player:',_0x7fa8c3),alert('Error\x20demoting\x20player:\x20'+_0x7fa8c3[_0xdf14ce(0x271)]);throw _0x7fa8c3;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x1dd3d9=a4_0x46e366,_0x40f739=document[_0x1dd3d9(0x3db)](_0x1dd3d9(0x3e7));_0x40f739&&_0x40f739[_0x1dd3d9(0x257)]('submit',async _0x51ad69=>{const _0x2491fb=_0x1dd3d9;_0x51ad69['preventDefault']();const _0x1dae62=document['getElementById']('demote-username')[_0x2491fb(0x248)]['trim'](),_0x2e5b21=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')[_0x2491fb(0x248)];if(!_0x1dae62){alert(_0x2491fb(0x33a));return;}try{await demotePlayer(_0x1dae62,_0x2e5b21),document['getElementById']('demote-modal')['classList']['remove'](_0x2491fb(0x3dc)),document['getElementById']('demote-username')['value']='';}catch(_0x4e1dd6){console['error']('Error\x20in\x20demotion:',_0x4e1dd6);}});});async function setCustomElo(_0x1964d6,_0x3e9035,_0x86a9c3){const _0x1fdf8c=a4_0x46e366;try{const _0x79d995=auth[_0x1fdf8c(0x276)];if(!_0x79d995||!isAdmin(_0x79d995[_0x1fdf8c(0x214)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x50af65=_0x86a9c3==='D2'?'playersD2':'players',_0x15a8ba=_0x86a9c3==='D2'?'eloHistoryD2':'eloHistory',_0x388196=collection(db,_0x50af65),_0x32dea1=query(_0x388196,where(_0x1fdf8c(0x1dc),'==',_0x1964d6)),_0xdc2b21=await getDocs(_0x32dea1);if(_0xdc2b21['empty'])throw new Error(_0x1fdf8c(0x1c5)+_0x86a9c3+_0x1fdf8c(0x2b6));const _0x54ccee=_0xdc2b21['docs'][0x0],_0x1349c7=_0x54ccee['data'](),_0x54a6e1=_0x1349c7['eloRating']||0x4b0,_0x1c19cd=writeBatch(db);_0x1c19cd['update'](doc(db,_0x50af65,_0x54ccee['id']),{'eloRating':_0x3e9035,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x79d995[_0x1fdf8c(0x214)]});const _0x1f49fd=doc(collection(db,_0x15a8ba));return _0x1c19cd['set'](_0x1f49fd,{'player':_0x1964d6,'previousElo':_0x54a6e1,'newElo':_0x3e9035,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x79d995['email'],'gameMode':_0x86a9c3}),await _0x1c19cd[_0x1fdf8c(0x2ae)](),showNotification('ELO\x20rating\x20for\x20'+_0x1964d6+_0x1fdf8c(0x23c)+_0x54a6e1+'\x20to\x20'+_0x3e9035,'success'),currentLadder===_0x86a9c3&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x46d684){console['error']('Error\x20setting\x20custom\x20ELO:',_0x46d684);throw _0x46d684;}}async function setUserRole(_0x4eff71,_0x5e51d4,_0x607593){const _0x3ef861=a4_0x46e366;try{const _0x1239c5=auth['currentUser'];if(!_0x1239c5||!isAdmin(_0x1239c5['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x5ded5d=_0x5e51d4?_0x5e51d4['trim']():null,_0x181e67=_0x5ded5d?_0x607593||_0x3ef861(0x377):null,[_0x4c9b8b,_0x2edbe6]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x4eff71))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x4eff71)))]),_0x7d9f00=[];if(!_0x4c9b8b[_0x3ef861(0x381)])_0x7d9f00['push']({'ref':_0x4c9b8b[_0x3ef861(0x1ee)][0x0]['ref'],'source':'D1'});if(!_0x2edbe6[_0x3ef861(0x381)])_0x7d9f00[_0x3ef861(0x25c)]({'ref':_0x2edbe6[_0x3ef861(0x1ee)][0x0]['ref'],'source':'D2'});if(_0x7d9f00['length']===0x0){const [_0x3a3290,_0x32f3ec]=await Promise[_0x3ef861(0x27b)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x4eff71))),getDocs(query(collection(db,_0x3ef861(0x3d6)),where(_0x3ef861(0x1dc),'==',_0x4eff71)))]);if(!_0x3a3290['empty'])_0x7d9f00['push']({'ref':_0x3a3290['docs'][0x0][_0x3ef861(0x35c)],'source':'NonParticipant'});if(!_0x32f3ec['empty'])_0x7d9f00['push']({'ref':_0x32f3ec['docs'][0x0][_0x3ef861(0x35c)],'source':'UserProfile'});}if(_0x7d9f00[_0x3ef861(0x347)]===0x0)throw new Error(_0x3ef861(0x359)+_0x4eff71+_0x3ef861(0x230));const _0x3ebe3e=writeBatch(db);_0x7d9f00[_0x3ef861(0x2e2)](_0x4a8887=>{const _0x4ce40b=_0x3ef861;console['log']('Updating\x20role\x20for\x20'+_0x4eff71+'\x20in\x20'+_0x4a8887[_0x4ce40b(0x2e3)]),!_0x5ded5d?_0x3ebe3e['update'](_0x4a8887[_0x4ce40b(0x35c)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x3ebe3e[_0x4ce40b(0x2ce)](_0x4a8887['ref'],{'roleName':_0x5ded5d,'roleColor':_0x181e67,'roleAssignedBy':_0x1239c5['email'],'roleAssignedAt':serverTimestamp()});}),await _0x3ebe3e['commit']();const _0x13071b=_0x5ded5d?'Role\x20\x22'+_0x5ded5d+'\x22\x20set':'Role\x20removed';return showNotification(_0x13071b+'\x20for\x20user\x20\x22'+_0x4eff71+'\x22','success'),!![];}catch(_0x2c4673){console['error']('Error\x20setting\x20user\x20role:',_0x2c4673),showNotification('Error:\x20'+_0x2c4673[_0x3ef861(0x271)],'error');throw _0x2c4673;}}function showNotification(_0x19535d,_0x1f25a4=a4_0x46e366(0x2d9)){const _0x137c3f=a4_0x46e366,_0x1c76cb=document['createElement']('div');_0x1c76cb['className']='notification\x20'+_0x1f25a4,_0x1c76cb['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x1f25a4)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x19535d+_0x137c3f(0x272),document['body']['appendChild'](_0x1c76cb),setTimeout(()=>{_0x1c76cb['classList']['add']('active');},0xa);const _0xfe6c41=setTimeout(()=>{closeNotification(_0x1c76cb);},0x1388);_0x1c76cb['querySelector']('.close-notification')['addEventListener'](_0x137c3f(0x351),()=>{clearTimeout(_0xfe6c41),closeNotification(_0x1c76cb);});}function getNotificationIcon(_0x4dcdaf){const _0x47ce22=a4_0x46e366;switch(_0x4dcdaf){case _0x47ce22(0x218):return'fa-check-circle';case _0x47ce22(0x383):return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case _0x47ce22(0x2d9):default:return'fa-info-circle';}}function closeNotification(_0xdcbd54){const _0x50865d=a4_0x46e366;_0xdcbd54[_0x50865d(0x1c7)][_0x50865d(0x370)](_0x50865d(0x3dc)),setTimeout(()=>{_0xdcbd54['remove']();},0x12c);}function setupUserRolesSection(){const _0x4133c7=a4_0x46e366,_0x300139=document['getElementById']('load-users-data');_0x300139&&_0x300139['addEventListener']('click',function(){const _0x56adfe=a4_0x168e;this['classList']['add']('loading'),this[_0x56adfe(0x2b5)]=_0x56adfe(0x323),loadUsersWithRoles()['then'](()=>{const _0x33791a=_0x56adfe;this['classList'][_0x33791a(0x370)]('loading'),this['innerHTML']=_0x33791a(0x24c);})[_0x56adfe(0x2f5)](_0x4cc480=>{const _0x1b1527=_0x56adfe;console['error']('Error\x20loading\x20users:',_0x4cc480),this['classList'][_0x1b1527(0x370)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x24f1d4=document['getElementById'](_0x4133c7(0x2ba));_0x24f1d4&&_0x24f1d4['addEventListener'](_0x4133c7(0x351),()=>{const _0x1a4125=document['getElementById']('set-role-modal');_0x1a4125&&_0x1a4125['classList']['add']('active');});const _0x1f918f=document[_0x4133c7(0x3db)]('user-search');_0x1f918f&&_0x1f918f['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x39893c=document[_0x4133c7(0x3db)]('role-filter');_0x39893c&&_0x39893c[_0x4133c7(0x257)](_0x4133c7(0x220),filterUsersTable);}async function loadUsersWithRoles(){const _0x31a394=a4_0x46e366,_0x78415f=document['getElementById']('users-table-body');if(!_0x78415f)return;_0x78415f[_0x31a394(0x2b5)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x5e7280,_0x304ab5,_0x3cdc0b,_0x5df5a5]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x31a394(0x1f5))),getDocs(collection(db,'userProfiles'))]),_0x158cf4=new Map();function _0x5f2798(_0xaa3609,_0x276070){_0xaa3609['forEach'](_0x74b435=>{const _0x6179e6=a4_0x168e,_0x5095d4=_0x74b435[_0x6179e6(0x21b)]();if(!_0x5095d4[_0x6179e6(0x1dc)])return;if(!_0x158cf4['has'](_0x5095d4['username']))_0x158cf4[_0x6179e6(0x1ec)](_0x5095d4['username'],{'username':_0x5095d4[_0x6179e6(0x1dc)],'roleName':_0x5095d4[_0x6179e6(0x30b)]||null,'roleColor':_0x5095d4['roleColor']||null,'roleAssignedBy':_0x5095d4['roleAssignedBy']||null,'roleAssignedAt':_0x5095d4['roleAssignedAt']||null,'sources':[_0x276070]});else{const _0x1e9821=_0x158cf4['get'](_0x5095d4['username']);_0x5095d4[_0x6179e6(0x30b)]&&(!_0x1e9821['roleName']||_0x276070==='D1'||_0x276070==='D2')&&(_0x1e9821[_0x6179e6(0x30b)]=_0x5095d4['roleName'],_0x1e9821['roleColor']=_0x5095d4['roleColor'],_0x1e9821['roleAssignedBy']=_0x5095d4['roleAssignedBy'],_0x1e9821['roleAssignedAt']=_0x5095d4[_0x6179e6(0x340)]),!_0x1e9821[_0x6179e6(0x3b6)]['includes'](_0x276070)&&_0x1e9821[_0x6179e6(0x3b6)]['push'](_0x276070);}});}_0x5f2798(_0x5e7280,'D1'),_0x5f2798(_0x304ab5,'D2'),_0x5f2798(_0x3cdc0b,_0x31a394(0x2f2)),_0x5f2798(_0x5df5a5,'Profile');const _0x540b43=Array['from'](_0x158cf4['values']())[_0x31a394(0x1b6)]((_0x14ef78,_0x4bacea)=>_0x14ef78['username']['localeCompare'](_0x4bacea['username']));if(_0x540b43[_0x31a394(0x347)]===0x0){_0x78415f['innerHTML']=_0x31a394(0x280);return;}_0x78415f['innerHTML']='',_0x540b43['forEach'](_0x304617=>{const _0x3039c7=_0x31a394,_0x186177=document[_0x3039c7(0x325)]('tr');_0x186177['dataset'][_0x3039c7(0x1dc)]=_0x304617['username'],_0x186177['dataset'][_0x3039c7(0x30b)]=_0x304617['roleName']||'',_0x186177[_0x3039c7(0x349)]['roleColor']=_0x304617['roleColor']||'#808080';const _0x568eab=_0x304617['roleAssignedAt']?new Date(_0x304617['roleAssignedAt'][_0x3039c7(0x1d4)]*0x3e8)['toLocaleDateString']():'N/A',_0x5afb49=_0x304617[_0x3039c7(0x30b)]?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x304617['roleColor']+_0x3039c7(0x328)+getContrastColor(_0x304617['roleColor'])+';\x22>'+_0x304617[_0x3039c7(0x30b)]+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x186177['innerHTML']=_0x3039c7(0x2bf)+_0x304617['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x304617[_0x3039c7(0x3b6)]['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5afb49+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x304617['roleAssignedBy']||_0x3039c7(0x300))+_0x3039c7(0x1f6)+_0x568eab+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x304617['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x304617[_0x3039c7(0x30b)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x304617[_0x3039c7(0x1dc)]+_0x3039c7(0x331):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x78415f['appendChild'](_0x186177);}),document['querySelectorAll']('.edit-role-btn')[_0x31a394(0x2e2)](_0x50adf7=>{const _0x192581=_0x31a394;_0x50adf7[_0x192581(0x257)]('click',()=>{const _0x453201=_0x192581,_0x5543cd=_0x50adf7[_0x453201(0x349)][_0x453201(0x1dc)];openRoleEditModal(_0x5543cd);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x11e2b4=>{_0x11e2b4['addEventListener']('click',()=>{const _0x2df543=a4_0x168e,_0x33ec2e=_0x11e2b4['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x33ec2e+'?')&&setUserRole(_0x33ec2e,null,null)[_0x2df543(0x3bd)](()=>loadUsersWithRoles())['catch'](_0x53f11e=>console['error'](_0x2df543(0x398),_0x53f11e));});});}catch(_0x1df07e){console['error']('Error\x20loading\x20users:',_0x1df07e),_0x78415f[_0x31a394(0x2b5)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x26d5ff){const _0x11211c=a4_0x46e366;console['log'](_0x11211c(0x28a),_0x26d5ff);const _0x148052=document['getElementById']('set-role-modal'),_0x4158ac=document['getElementById'](_0x11211c(0x2f3)),_0x53b3ce=document['getElementById']('user-role');if(!_0x148052){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert(_0x11211c(0x3bb));return;}console['log'](_0x11211c(0x362),_0x148052);_0x4158ac?(_0x4158ac['value']=_0x26d5ff,console['log']('Username\x20input\x20set\x20to:\x20'+_0x26d5ff)):console['warn'](_0x11211c(0x21e));const _0x1b99ab=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x26d5ff+'\x22]');if(_0x1b99ab&&_0x53b3ce){const _0x3dd20f=_0x1b99ab['dataset']['role'];_0x53b3ce[_0x11211c(0x248)]=_0x3dd20f==='none'?'':_0x3dd20f,console['log'](_0x11211c(0x37a)+_0x53b3ce[_0x11211c(0x248)]+_0x11211c(0x3da)+_0x3dd20f+')');}else{if(!_0x1b99ab)console['warn']('Table\x20row\x20for\x20user\x20'+_0x26d5ff+'\x20not\x20found.');if(!_0x53b3ce)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x53b3ce)_0x53b3ce[_0x11211c(0x248)]='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x148052['classList'][_0x11211c(0x1b5)]('active');const _0x4571d8=document['getElementById'](_0x11211c(0x217));_0x4571d8?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x4571d8['removeEventListener']('click',closeModalHandler),_0x4571d8['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x148052[_0x11211c(0x267)]('click',closeModalBackgroundHandler),_0x148052['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x495178){_0x495178['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x31e49b=a4_0x46e366,_0x3188f1=document['getElementById']('set-role-modal');_0x3188f1&&(_0x3188f1[_0x31e49b(0x1c7)]['remove'](_0x31e49b(0x3dc)),_0x3188f1[_0x31e49b(0x267)](_0x31e49b(0x351),closeModalBackgroundHandler));}function filterUsersTable(){const _0x32173a=a4_0x46e366,_0x166b68=document['getElementById'](_0x32173a(0x3b5))?.['value'][_0x32173a(0x3ac)]()||'',_0x25326f=document['getElementById']('role-filter')?.['value']||'all',_0x388290=document['querySelectorAll']('#users-table-body\x20tr');let _0x173b61=0x0;_0x388290['forEach'](_0x429886=>{const _0x18f2dc=_0x32173a;if(_0x429886['querySelector'](_0x18f2dc(0x201))||_0x429886['querySelector']('.empty-state')||_0x429886['querySelector']('.error-state'))return;const _0x37a1a1=_0x429886['dataset']['username']?.['toLowerCase']()||'',_0x1ca837=_0x429886['dataset'][_0x18f2dc(0x2ed)]||'none',_0x2555dc=_0x37a1a1[_0x18f2dc(0x2b8)](_0x166b68),_0x51b225=_0x25326f===_0x18f2dc(0x27b)||_0x1ca837===_0x25326f;_0x2555dc&&_0x51b225?(_0x429886['style'][_0x18f2dc(0x34d)]='',_0x173b61++):_0x429886[_0x18f2dc(0x2c3)]['display']=_0x18f2dc(0x3ad);});if(_0x173b61===0x0&&_0x388290['length']>0x0){const _0x335f1c=document['getElementById']('users-table-body');if(_0x335f1c){if(!_0x335f1c['querySelector']('.no-results')){const _0x5410fc=document['createElement']('tr');_0x5410fc[_0x32173a(0x1c7)]['add'](_0x32173a(0x3c1)),_0x5410fc['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x335f1c['appendChild'](_0x5410fc);}}}else{const _0x25b3f6=document['querySelector'](_0x32173a(0x2e9));_0x25b3f6&&_0x25b3f6['remove']();}}function setupManageArticlesSection(){const _0x32a2dd=a4_0x46e366,_0x3bdcfd=document['getElementById']('load-articles-data');_0x3bdcfd&&_0x3bdcfd['addEventListener']('click',function(){const _0x13d145=a4_0x168e;this['classList']['add']('loading'),this['innerHTML']=_0x13d145(0x323),loadArticles()[_0x13d145(0x3bd)](()=>{const _0x58b6cc=_0x13d145;this[_0x58b6cc(0x1c7)]['remove'](_0x58b6cc(0x205)),this[_0x58b6cc(0x2b5)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x9483d8=>{const _0xcb5ae8=_0x13d145;console['error']('Error\x20loading\x20articles:',_0x9483d8),this[_0xcb5ae8(0x1c7)]['remove']('loading'),this[_0xcb5ae8(0x2b5)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x160f2f=document['getElementById']('create-new-article-btn');_0x160f2f?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x160f2f['style'][_0x32a2dd(0x34d)]=_0x32a2dd(0x1fa),_0x160f2f[_0x32a2dd(0x257)]('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x4edc01=document['getElementById'](_0x32a2dd(0x1d0));_0x4edc01&&_0x4edc01[_0x32a2dd(0x257)](_0x32a2dd(0x3ab),_0x5c21bd=>{_0x5c21bd['preventDefault'](),saveArticle();});const _0x167bbc=document['getElementById']('cancel-article-btn');_0x167bbc&&_0x167bbc[_0x32a2dd(0x257)](_0x32a2dd(0x351),()=>{closeArticleModal();});const _0x985549=document[_0x32a2dd(0x1f0)](_0x32a2dd(0x200));_0x985549&&_0x985549['addEventListener']('click',()=>{closeArticleModal();});const _0x50b6ba=document['getElementById'](_0x32a2dd(0x1bc));_0x50b6ba&&_0x50b6ba[_0x32a2dd(0x257)]('click',_0x3a8396=>{_0x3a8396['target']===_0x50b6ba&&closeArticleModal();});}async function loadArticles(){const _0x282f3b=a4_0x46e366,_0x213a90=document[_0x282f3b(0x3db)]('articles-table-body');if(!_0x213a90)return;_0x213a90['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0xf49ed4=collection(db,'articles'),_0x114283=query(_0xf49ed4,orderBy('createdAt',_0x282f3b(0x209))),_0x2f6690=await getDocs(_0x114283);if(_0x2f6690['empty']){_0x213a90[_0x282f3b(0x2b5)]='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x213a90['innerHTML']='',_0x2f6690['forEach'](_0x7cb722=>{const _0x1a80de=_0x282f3b,_0x3d7ce8=_0x7cb722[_0x1a80de(0x21b)](),_0x3ad543=document['createElement']('tr'),_0x5b49f2=_0x3d7ce8['createdAt']?new Date(_0x3d7ce8[_0x1a80de(0x344)]['seconds']*0x3e8)['toLocaleString']():'N/A';_0x3ad543['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3d7ce8[_0x1a80de(0x3b1)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3d7ce8[_0x1a80de(0x38a)]||'Unknown')+_0x1a80de(0x1f6)+_0x5b49f2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x7cb722['id']+_0x1a80de(0x37b)+_0x7cb722['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x213a90['appendChild'](_0x3ad543);}),setupArticleActionButtons();}catch(_0x3b85df){console['error']('Error\x20loading\x20articles:',_0x3b85df),_0x213a90['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x3b85df['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function a4_0x1da6(){const _0x55bb6b=['reduce','opacity','add','sort','loserScore','matchInfo','negative-change','uid','Error\x20saving\x20article:','article-modal','System','Non-Participants','Toggling\x20fields\x20for\x20highlight\x20type:\x20','delete-match-summary','Failed\x20to\x20find\x20match:\x20','Setting\x20up\x20create\x20test\x20match\x20button','playerRibbons','match','Player\x20not\x20found\x20in\x20','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','classList','achievementPlayer','input','Closing\x20create\x20test\x20match\x20modal','manage-trophies','rgba(255,\x20255,\x20255,\x200.1)','mapCreator','Trophy\x20not\x20found','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','article-form','Initial\x20Placement','.sidebar-nav\x20.nav-item[data-section=\x22','inactive-days-filter','seconds','initial_placement','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Failed\x20to\x20update\x20points:\x20','article-title','moderately-inactive','Set\x20to\x20','match-details-container','username','openResimulateModal','\x20vs\x20','new-player-elo','Starting\x20complete\x20match\x20resimulation...','highlights','20px','players-table-body','alt','Error\x20loading\x20match\x20data:','manage-ribbons','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','Found\x20ELO\x20history\x20for\x20player\x20','Trophy\x20ID\x20and\x20username\x20are\x20required','eloHistoryD2','User\x20has\x20','set','Modal\x20close\x20button\x20clicked','docs','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','querySelector','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','Error\x20adding\x20ribbon','No\x20email','\x20Missing','nonParticipants','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','ribbon-level','loading-cell','apply','block','Setting\x20up\x20Manage\x20Ribbons\x20section','Match\x20ID\x20is\x20required','.type','demotion','\x20users\x20to\x20check...','#article-modal\x20.close-btn','.loading-cell','non-participants','0.6','.close','loading','activity','image','Error\x20deleting\x20highlight:\x20','desc','\x22\x20data-ladder=\x22','matches-prev-page','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','create-match-highlight-btn','matchDate','mapPlayed','#elo-history-table-body\x20tr','adminEmail','trophyDefinitions','edit-highlight-matchLink-input','email','trace','approvedMatches','cancel-role-btn','success','points-management-forms','Set\x20default\x20ladder\x20to:','data','manage-players','data-section','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','.admin-section','change','ribbon-type-select','highlight-map','store-item-select','awardedAt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','Error\x20resolving\x20username\x20for\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#players-table-body\x20tr','\x20allowed\x20tabs:','Match\x20not\x20found','Error\x20loading\x20ribbons\x20data','highlight-description','points-overview-table-body','cells','\x22\x20not\x20found\x20in\x20any\x20collection','timestamp','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Highlight\x20updated\x20successfully!','highlight-video-preview-container','No\x20user\x20ID\x20found\x20on\x20button','players','assign-trophy-name','pendingResimulateData','exists','highlight-player-profile-container','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20was\x20updated\x20from\x20','#highlight-modal\x20.close-btn','highlight-achievement-details-container','stopPropagation','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','Sidebar\x20navigation\x20initialized\x20with\x20permissions','resimulateMatch','assign-trophy-form','approvedMatchesD2','View\x20history\x20clicked\x20for\x20user:','demote-username','videoId','value','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','trophy-name','Committing\x20batch\x20update\x20for\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','playerId','updatedAt','D2\x20Players','rank-distribution-chart','achievement','Unknown\x20Admin','Page\x20','edit-highlight-map-input','You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','lastMatch','addEventListener','TestWinner','.ladder-switch\x20input','trophy-image-url','body','push','Setting\x20up\x20points\x20action\x20buttons...','doughnut','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','Never\x20played','Found\x20','cloneNode','textContent','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-username','trophy-modal','removeEventListener','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','playersD3','selected-user-id','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','admin','Create\x20test\x20match\x20form\x20not\x20found','Error\x20loading\x20ELO\x20history:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','name','message','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','Current\x20user:','currentUser','keys','highlight-id','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Unknown','all','Admin\x20Adjustment','destroy','edit-match-id','matchId','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','history-type-filter','Failed\x20to\x20load\x20user\x20history','set-role-modal','Modal\x20should\x20now\x20be\x20visible','position','lastVisible','filter','highlight-map-version','achievementType','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','creator','promote-username','Failed\x20to\x20delete\x20player:\x20','highlight-map-creator','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','YouTube\x20Video\x20ID\x20(Optional)','ladder','quick-edit-points-form','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20adding\x20ribbon:','setAttribute','Article\x20updated\x20successfully','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Edit\x20Article','articles','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','Trophy\x20definition\x20deleted\x20successfully','target','Featured\x20Creator','demote-modal','contains','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','validation-results-container','empty-state','rankDistribution','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','appendChild','Highlight\x20not\x20found','cancel-set-elo-btn','subtract','action','create-test-match-btn','manage-highlights','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','commit','eloHistory','Edit\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','achievementImageUrl','common','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','innerHTML','\x20ladder','approvedMatchesD3','includes','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','add-new-role-btn','toDate','userTrophies','load-users-data','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','toLocaleString','highlight-achievement-type','edit-player-modal','style','\x20Level\x20','warning','demote-player-btn','Invalid\x20action','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','Error\x20loading\x20trophies:','highlights-table-body','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','highlight-description-container','Firebase\x20connection\x20test\x20failed:','update','No\x20matches\x20found','borderRadius','Highlight\x20created\x20successfully!','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','getAttribute','D3\x20Players','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20','#e0e0e0','edit-highlight-loserScore-input','color','info','match-count','manage-points','input[name=\x22test-match-ladder\x22]','allUsersPoints','add-ribbon-form','Error\x20loading\x20articles:','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','winnerUsername','forEach','source','create-test-match-form','map','highlight-video-id','newElo','trophy-image-preview','.no-results','matchLink','loserUsername','Added\x20','role','Failed\x20to\x20send\x20Discord\x20notification:','ribbon-target-ladder','edit-elo','highlight-winner-name','Non-Participant','role-username','non-participant','catch','\x20users...','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','currentTarget','Modal\x20opened\x20successfully','\x20quick\x20edit\x20buttons','sendPromotionNotification','edit-highlight-achievementType-input','#d32f2f','inactive-players-search','elo-history-table-body','N/A','Deleting\x20match\x20','highlight-match-info-container','opponent','manage-matches','Gold','user-roles-section','trophy-rarity','set-elo-btn','Player\x20deleted\x20successfully','Error\x20saving\x20highlight:\x20','roleName','submittedBy','Failed\x20to\x20update\x20player:\x20','Error\x20applying\x20filters:','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','getDay','\x20Rank\x20Distribution','src','No\x20users\x20found\x20in\x20userProfiles\x20collection','Error\x20loading\x20points\x20history:','\x20already\x20exists\x20in\x20','test','create-test-match-modal','rejected-count','Error\x20creating\x20activity\x20chart:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','highlight-match-date-container','achievementDetails','Points\x20updated\x20successfully\x20for\x20user:','\x20points','Failed\x20to\x20load\x20points\x20data:\x20','disabled','unknown','MAX_SAFE_INTEGER','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','createElement','loserComment','ribbon-target-user',';\x20color:\x20','checked','Sunday','User\x20','\x20to\x20','promotion','admin_modification','award-item-form','preventDefault','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','promote-form','Create\x20test\x20match\x20button\x20clicked','#inactive-players-table-body\x20tr','highlight-loser-name','previousElo','Unranked','highlight-modal','edit-highlight-description-input','Please\x20enter\x20a\x20username','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','edit-match-loser-score','Load\x20history\x20data\x20clicked','.view-history-btn','highlight-match-link-container','roleAssignedAt','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','Create\x20test\x20match\x20modal\x20not\x20found','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','createdAt','Loading...','type','length','edit-match-map','dataset','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','.delete-btn','.close-btn','display','rgba(25,\x20118,\x20210,\x200.7)','pointsHistory','Trophy\x20Preview','click','floor','searchTerm','Remove\x20','migration-section','div','playersD2','creatorImageUrl','User\x20\x22','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','trophy-description','ref','edit-highlight-playerProfileUrl-input','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','Failed\x20to\x20save\x20trophy:\x20','warn','edit-match-loser-demo','Modal\x20element\x20found:','Error\x20removing\x20ribbon:','\x20Exists','.assign-trophy-btn','reset','Create\x20test\x20match\x20modal\x20setup\x20complete','creator-type','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','Please\x20enter\x20valid\x20username\x20and\x20ELO','startDate','highlight-form','entries','),\x20','Error\x20loading\x20article\x20data:','remove','Subtracted\x20','delete-match-confirm-modal','getDate','edit-highlight-mapVersion-input','User\x20not\x20found','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','#808080','Searching\x20for\x20player\x20in\x20','Form\x20elements\x20are\x20missing','Role\x20select\x20set\x20to:\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','DOMContentLoaded','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','Trophy\x20created\x20successfully','Unknown\x20User','Attempting\x20to\x20demote\x20','empty','Initializing\x20points\x20field\x20for\x20user\x20','error','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','winnerName','toLocaleDateString','match_result','endDate','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','author','Setting\x20up\x20Manage\x20Matches\x20section','className','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Failed\x20to\x20delete\x20match:\x20','Error\x20adding\x20player:\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','lastPointsModified','elo','player-count','points-user-search','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','Failed\x20to\x20load\x20user\x20data:\x20','Error\x20removing\x20role:','Error\x20loading\x20highlights:','promotedBy','log','bind','settings','eloRating','name-asc','displayName','cancel-quick-edit','points','date','YouTube\x20Video\x20ID*','edit-match-winner-demo','\x20section','Setting\x20up\x20Manage\x20Highlights\x20section','split','elo-history','Failed\x20to\x20assign\x20trophy:\x20','submit','toLowerCase','none','userId','resimulate-modal','Silver','title','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','page','points-overview-search','user-search','sources','previousElementSibling','querySelectorAll',').\x20','approvedAt','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','.edit-ribbons-btn','then','Username\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','trophy-preview-img','no-results','trim','Please\x20enter\x20valid\x20data','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','firstVisible','setHours','points-reason','inactive-players','\x20in\x20','Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM','elo-history-search','All\x20fields\x20are\x20required','amount','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','Trophy\x20\x22','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','Modal\x20cancel\x20button\x20clicked','edit-highlight-winnerName-input','flex','size','userProfiles','quick-points-amount','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','\x20(based\x20on\x20data-role:\x20','getElementById','active','edit-highlight-loserName-input','playerProfileUrl','1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)','ribbons','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','highlight-achievement-player-container','Points\x20modified\x20successfully','toISOString','closest','fromDate','demote-form','dashboard'];a4_0x1da6=function(){return _0x55bb6b;};return a4_0x1da6();}function setupArticleActionButtons(){document['querySelectorAll']('.edit-article-btn')['forEach'](_0x59166c=>{_0x59166c['addEventListener']('click',async _0x16f72d=>{const _0xa79aa4=a4_0x168e,_0x2f5205=_0x16f72d['currentTarget'][_0xa79aa4(0x349)]['id'];openArticleModal(_0x2f5205);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x597218=>{_0x597218['addEventListener']('click',async _0x731d98=>{const _0x984931=_0x731d98['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x984931);});});}function openArticleModal(_0x1fffc6=null){const _0xeeecf3=a4_0x46e366,_0x325c2d=document['getElementById']('article-modal'),_0x3588cd=document[_0xeeecf3(0x3db)]('article-modal-title'),_0x2988aa=document['getElementById']('article-form'),_0x49ea41=document[_0xeeecf3(0x3db)]('article-id');_0x2988aa['reset'](),_0x49ea41['value']='';if(_0x1fffc6)_0x3588cd[_0xeeecf3(0x263)]=_0xeeecf3(0x299),_0x49ea41['value']=_0x1fffc6,loadArticleData(_0x1fffc6);else{_0x3588cd['textContent']='Create\x20Article';const _0x34a799=auth['currentUser'];if(_0x34a799){const _0x5dd1f6=document[_0xeeecf3(0x3db)]('article-author');if(_0x5dd1f6&&_0x34a799['displayName'])_0x5dd1f6['value']=_0x34a799[_0xeeecf3(0x3a0)];else _0x5dd1f6&&(_0x5dd1f6['value']=_0x34a799['email']);}}_0x325c2d['classList']['add'](_0xeeecf3(0x3dc));}async function loadArticleData(_0x44b19d){const _0x48892e=a4_0x46e366;try{const _0x5363bf=doc(db,'articles',_0x44b19d),_0x5d5dda=await getDoc(_0x5363bf);if(!_0x5d5dda['exists']()){showNotification('Article\x20not\x20found',_0x48892e(0x383));return;}const _0x595d06=_0x5d5dda['data']();document['getElementById'](_0x48892e(0x1d8))[_0x48892e(0x248)]=_0x595d06['title']||'',document[_0x48892e(0x3db)]('article-author')['value']=_0x595d06['author']||'',document['getElementById']('article-image-url')[_0x48892e(0x248)]=_0x595d06['imageUrl']||'',document['getElementById']('article-content')['value']=_0x595d06['content']||'';}catch(_0x218887){console[_0x48892e(0x383)](_0x48892e(0x36f),_0x218887),showNotification('Failed\x20to\x20load\x20article\x20data',_0x48892e(0x383));}}async function saveArticle(){const _0x1b42cc=a4_0x46e366;try{const _0x37f860=document['getElementById']('article-id')[_0x1b42cc(0x248)],_0x2d8a2d=document['getElementById']('article-title')['value'][_0x1b42cc(0x3c2)](),_0x5e9954=document[_0x1b42cc(0x3db)]('article-author')['value']['trim'](),_0x31a154=document['getElementById']('article-image-url')['value']['trim'](),_0x1175dc=document['getElementById']('article-content')['value'][_0x1b42cc(0x3c2)]();if(!_0x2d8a2d||!_0x1175dc){showNotification('Title\x20and\x20content\x20are\x20required',_0x1b42cc(0x383));return;}const _0x448319=auth[_0x1b42cc(0x276)];if(!_0x448319){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x4511ef={'title':_0x2d8a2d,'author':_0x5e9954,'imageUrl':_0x31a154||null,'content':_0x1175dc,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x448319['email']};!_0x37f860?(_0x4511ef['createdAt']=serverTimestamp(),_0x4511ef['createdBy']=_0x448319['email'],await addDoc(collection(db,_0x1b42cc(0x29a)),_0x4511ef),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x37f860),_0x4511ef),showNotification(_0x1b42cc(0x296),'success')),closeArticleModal(),loadArticles();}catch(_0x2a0dc5){console[_0x1b42cc(0x383)](_0x1b42cc(0x1bb),_0x2a0dc5),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x2a0dc5[_0x1b42cc(0x271)],'error');}}function closeArticleModal(){const _0x55d518=a4_0x46e366,_0x1808a5=document['getElementById'](_0x55d518(0x1bc));_0x1808a5&&_0x1808a5['classList'][_0x55d518(0x370)]('active');}async function confirmDeleteArticle(_0x5a2970){const _0x11674c=a4_0x46e366;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x5a2970)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x5ca1e0){console[_0x11674c(0x383)]('Error\x20deleting\x20article:',_0x5ca1e0),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x5ca1e0[_0x11674c(0x271)],'error');}}function setupTrophyManagementSection(){const _0x28ff6f=a4_0x46e366,_0x2225a8=document['getElementById']('load-trophies-data');_0x2225a8&&_0x2225a8['addEventListener']('click',function(){const _0x584a9d=a4_0x168e;this[_0x584a9d(0x1c7)][_0x584a9d(0x1b5)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x5b4afa=document['getElementById']('assign-trophy-image');_0x5b4afa&&(_0x5b4afa['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x2bb932=_0x584a9d;this['classList']['remove']('loading'),this[_0x2bb932(0x2b5)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})[_0x584a9d(0x2f5)](_0x1d622b=>{const _0x3eb103=_0x584a9d;console['error']('Error\x20loading\x20trophies:',_0x1d622b),this['classList']['remove']('loading'),this[_0x3eb103(0x2b5)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x247a33=document['getElementById']('create-new-trophy-btn');_0x247a33&&_0x247a33['addEventListener']('click',()=>{openTrophyModal();});const _0xf64f4c=document[_0x28ff6f(0x3db)]('trophy-form');_0xf64f4c&&_0xf64f4c[_0x28ff6f(0x257)]('submit',_0x6fdea6=>{_0x6fdea6['preventDefault'](),saveTrophyDefinition();});const _0x3f3531=document['getElementById']('cancel-trophy-btn');_0x3f3531&&_0x3f3531['addEventListener']('click',()=>{closeTrophyModal();});document[_0x28ff6f(0x3b8)](_0x28ff6f(0x2b4))['forEach'](_0x5b5045=>{_0x5b5045['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x2490a4=document['getElementById'](_0x28ff6f(0x266));_0x2490a4&&_0x2490a4['addEventListener']('click',_0x4d0f94=>{_0x4d0f94['target']===_0x2490a4&&closeTrophyModal();});const _0x59d01f=document['getElementById']('assign-trophy-modal');_0x59d01f&&_0x59d01f['addEventListener']('click',_0xd1458c=>{_0xd1458c['target']===_0x59d01f&&closeAssignTrophyModal();});const _0x1ef55b=document['getElementById'](_0x28ff6f(0x243));_0x1ef55b&&_0x1ef55b['addEventListener']('submit',_0x24eaa9=>{const _0x482f16=_0x28ff6f;_0x24eaa9[_0x482f16(0x330)](),assignTrophyToPlayer();});const _0x6fbb49=document['getElementById']('cancel-assign-btn');_0x6fbb49&&_0x6fbb49['addEventListener'](_0x28ff6f(0x351),()=>{closeAssignTrophyModal();});const _0x4f9747=document['getElementById'](_0x28ff6f(0x25a));_0x4f9747&&(_0x4f9747['addEventListener']('input',updateTrophyImagePreview),_0x4f9747['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x3d0d78=a4_0x46e366,_0x564291=document[_0x3d0d78(0x3db)](_0x3d0d78(0x25a))[_0x3d0d78(0x248)]['trim'](),_0x40c3e9=document['getElementById']('trophy-image-preview');if(!_0x40c3e9){const _0x1af886=document[_0x3d0d78(0x3db)]('trophy-image-url')[_0x3d0d78(0x3e5)]('.form-group'),_0x407255=document['createElement']('div');_0x407255['id']=_0x3d0d78(0x2e8),_0x407255['className']='trophy-preview-container',_0x1af886['appendChild'](_0x407255);const _0x42d996=document['createElement']('img');_0x42d996['id']=_0x3d0d78(0x3c0),_0x42d996[_0x3d0d78(0x1e4)]=_0x3d0d78(0x350),_0x42d996['onerror']=function(){const _0x32e2cd=_0x3d0d78;this[_0x32e2cd(0x312)]=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x407255['appendChild'](_0x42d996);}const _0xdf3821=document['getElementById'](_0x3d0d78(0x3c0));_0x564291?(_0xdf3821['src']=_0x564291,_0xdf3821[_0x3d0d78(0x2c3)]['display']='block',_0xdf3821['classList']['remove']('error')):(_0xdf3821[_0x3d0d78(0x312)]=DEFAULT_TROPHY_IMAGE,_0xdf3821[_0x3d0d78(0x2c3)]['display']='block');}async function loadTrophyDefinitions(){const _0x12490b=a4_0x46e366,_0x2f5a05=document['getElementById']('trophies-table-body');if(!_0x2f5a05)return;_0x2f5a05[_0x12490b(0x2b5)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x6d6761=collection(db,_0x12490b(0x212)),_0x42d004=query(_0x6d6761,orderBy('createdAt','desc')),_0x4cff2a=await getDocs(_0x42d004);if(_0x4cff2a['empty']){_0x2f5a05['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x2f5a05['innerHTML']='',_0x4cff2a['forEach'](_0x23b5b5=>{const _0x1de142=_0x12490b,_0x2bd3d9=_0x23b5b5['data'](),_0x15010e=document['createElement']('tr'),_0x2d2246=_0x2bd3d9['createdAt']?new Date(_0x2bd3d9[_0x1de142(0x344)][_0x1de142(0x1d4)]*0x3e8)[_0x1de142(0x2c0)]():'N/A';_0x15010e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x2bd3d9['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x2bd3d9[_0x1de142(0x270)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+_0x1de142(0x2f7)+(_0x2bd3d9[_0x1de142(0x270)]||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x2bd3d9['rarity']||'common')+'\x22>'+(_0x2bd3d9['rarity']||'common')+_0x1de142(0x232)+_0x2d2246+_0x1de142(0x3cf)+_0x23b5b5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x23b5b5['id']+_0x1de142(0x29b)+_0x23b5b5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2f5a05[_0x1de142(0x2a6)](_0x15010e);}),setupTrophyActionButtons();}catch(_0x22ca5a){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x22ca5a),_0x2f5a05['innerHTML']=_0x12490b(0x225)+_0x22ca5a['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x5a0e8b=a4_0x46e366;document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0xaa08cf=>{_0xaa08cf['addEventListener']('click',_0x483be8=>{const _0x3db865=_0x483be8['currentTarget']['dataset']['id'];openTrophyModal(_0x3db865);});}),document['querySelectorAll'](_0x5a0e8b(0x365))['forEach'](_0x132282=>{_0x132282['addEventListener']('click',_0x20e350=>{const _0x59ea00=_0x20e350['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x59ea00);});}),document[_0x5a0e8b(0x3b8)]('.delete-trophy-btn')[_0x5a0e8b(0x2e2)](_0x3d6322=>{_0x3d6322['addEventListener']('click',_0x153308=>{const _0x3c5b1f=a4_0x168e,_0x2f780e=_0x153308['currentTarget'][_0x3c5b1f(0x349)]['id'];confirmDeleteTrophy(_0x2f780e);});});}function openTrophyModal(_0x314e31=null){const _0x13652e=a4_0x46e366,_0x4aad33=document['getElementById']('trophy-modal'),_0x3f8422=document[_0x13652e(0x3db)]('trophy-modal-title'),_0x51ae6f=document[_0x13652e(0x3db)]('trophy-form'),_0x518f01=document['getElementById']('trophy-id');_0x51ae6f[_0x13652e(0x366)](),_0x518f01['value']='';const _0x111a66=document['getElementById'](_0x13652e(0x3c0));_0x111a66&&(_0x111a66['src']=DEFAULT_TROPHY_IMAGE,_0x111a66[_0x13652e(0x1c7)]['remove']('error')),_0x314e31?(_0x3f8422['textContent']='Edit\x20Trophy',_0x518f01[_0x13652e(0x248)]=_0x314e31,loadTrophyData(_0x314e31)):_0x3f8422['textContent']='Create\x20New\x20Trophy',_0x4aad33[_0x13652e(0x1c7)][_0x13652e(0x1b5)]('active');}async function loadTrophyData(_0x34e2a7){const _0x1f5e06=a4_0x46e366;try{const _0x454954=doc(db,'trophyDefinitions',_0x34e2a7),_0x57c93e=await getDoc(_0x454954);if(!_0x57c93e['exists']()){showNotification(_0x1f5e06(0x1ce),_0x1f5e06(0x383));return;}const _0x3f4601=_0x57c93e['data']();document['getElementById'](_0x1f5e06(0x24a))['value']=_0x3f4601[_0x1f5e06(0x270)]||'',document[_0x1f5e06(0x3db)](_0x1f5e06(0x35b))['value']=_0x3f4601['description']||'',document['getElementById']('trophy-image-url')[_0x1f5e06(0x248)]=_0x3f4601['image']||'',document[_0x1f5e06(0x3db)](_0x1f5e06(0x307))['value']=_0x3f4601['rarity']||_0x1f5e06(0x2b3),updateTrophyImagePreview();}catch(_0x2ea2a7){console['error']('Error\x20loading\x20trophy\x20data:',_0x2ea2a7),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x20cfad=a4_0x46e366;try{const _0x4c6441=document['getElementById']('trophy-id')[_0x20cfad(0x248)],_0x1c078c=document['getElementById']('trophy-name')['value']['trim'](),_0x464dfc=document[_0x20cfad(0x3db)]('trophy-description')['value']['trim'](),_0x2a337c=document['getElementById']('trophy-image-url')['value']['trim'](),_0x40b35a=document['getElementById']('trophy-rarity')[_0x20cfad(0x248)];if(!_0x1c078c||!_0x464dfc||!_0x2a337c){showNotification(_0x20cfad(0x3cd),_0x20cfad(0x383));return;}const _0x599389=auth['currentUser'];if(!_0x599389){showNotification(_0x20cfad(0x37d),'error');return;}const _0x387e61={'name':_0x1c078c,'description':_0x464dfc,'image':_0x2a337c,'rarity':_0x40b35a,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x599389['email']};!_0x4c6441?(_0x387e61['createdAt']=serverTimestamp(),_0x387e61['createdBy']=_0x599389[_0x20cfad(0x214)],await addDoc(collection(db,'trophyDefinitions'),_0x387e61),showNotification(_0x20cfad(0x37e),'success')):(await updateDoc(doc(db,'trophyDefinitions',_0x4c6441),_0x387e61),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x2bddfd){console['error']('Error\x20saving\x20trophy:',_0x2bddfd),showNotification(_0x20cfad(0x35f)+_0x2bddfd['message'],_0x20cfad(0x383));}}function closeTrophyModal(){const _0x147fe6=a4_0x46e366,_0x9f6aaf=document['getElementById']('trophy-modal');_0x9f6aaf&&_0x9f6aaf[_0x147fe6(0x1c7)]['remove']('active');}async function confirmDeleteTrophy(_0x3f7e23){const _0x42dc50=a4_0x46e366;if(!_0x3f7e23){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x9b755f=auth['currentUser'];if(!_0x9b755f){showNotification(_0x42dc50(0x391),_0x42dc50(0x383));return;}console[_0x42dc50(0x39b)]('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x3f7e23),await deleteDoc(doc(db,_0x42dc50(0x212),_0x3f7e23)),showNotification(_0x42dc50(0x29c),_0x42dc50(0x218)),loadTrophyDefinitions();}catch(_0x49b4b1){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x49b4b1),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x49b4b1['message'],_0x42dc50(0x383));}}async function openAssignTrophyModal(_0x4a9981){const _0x4a9a95=a4_0x46e366;try{const _0xf3dbd0=doc(db,_0x4a9a95(0x212),_0x4a9981),_0x38d033=await getDoc(_0xf3dbd0);if(!_0x38d033[_0x4a9a95(0x239)]()){showNotification(_0x4a9a95(0x1ce),'error');return;}const _0x2f8ee4=_0x38d033['data']();document['getElementById']('assign-trophy-id')['value']=_0x4a9981,document[_0x4a9a95(0x3db)](_0x4a9a95(0x237))[_0x4a9a95(0x248)]=_0x2f8ee4[_0x4a9a95(0x270)],document[_0x4a9a95(0x3db)]('assign-trophy-image')[_0x4a9a95(0x312)]=_0x2f8ee4[_0x4a9a95(0x207)]||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x2f8ee4['name']||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x2f8ee4['description']||'No\x20description';const _0x4f75fc=document['getElementById']('assign-trophy-rarity');_0x4f75fc['textContent']=_0x2f8ee4['rarity']||'common',_0x4f75fc['className']='trophy-rarity\x20'+(_0x2f8ee4['rarity']||'common');const _0x112bc7=document['getElementById']('assign-trophy-modal');_0x112bc7['classList']['add'](_0x4a9a95(0x3dc));}catch(_0x55b7d4){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x55b7d4),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x45373c=a4_0x46e366,_0x228a00=document[_0x45373c(0x3db)]('assign-trophy-modal');_0x228a00&&_0x228a00['classList']['remove'](_0x45373c(0x3dc));}async function assignTrophyToPlayer(){const _0x2cb054=a4_0x46e366;try{const _0x4e264a=document['getElementById']('assign-trophy-id')['value'],_0x3c3222=document['getElementById']('assign-trophy-name')['value'],_0x23c2cb=document['getElementById']('assign-player-username')['value']['trim'](),_0xda5be9=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x4e264a||!_0x23c2cb){showNotification(_0x2cb054(0x1e9),'error');return;}const _0x490d8f=auth['currentUser'];if(!_0x490d8f){showNotification(_0x2cb054(0x255),_0x2cb054(0x383));return;}let _0x373dce=null,_0x47f0bf=null,_0x7e67a4=null;if(_0xda5be9==='non-participant'){const _0x47b5ff=collection(db,'nonParticipants'),_0x37db0c=query(_0x47b5ff,where(_0x2cb054(0x1dc),'==',_0x23c2cb)),_0x33d8d9=await getDocs(_0x37db0c);!_0x33d8d9['empty']&&(_0x373dce=_0x33d8d9['docs'][0x0],_0x47f0bf=_0x373dce['id'],_0x7e67a4=_0x373dce['data']());}else{const _0x3c5248=_0xda5be9==='D1'?_0x2cb054(0x236):_0xda5be9==='D2'?'playersD2':'playersD3',_0x33b0c1=collection(db,_0x3c5248),_0x31ad72=query(_0x33b0c1,where('username','==',_0x23c2cb)),_0x42e7f9=await getDocs(_0x31ad72);!_0x42e7f9[_0x2cb054(0x381)]&&(_0x373dce=_0x42e7f9['docs'][0x0],_0x47f0bf=_0x373dce['id'],_0x7e67a4=_0x373dce['data']());}if(!_0x373dce){showNotification('Player\x20\x22'+_0x23c2cb+'\x22\x20not\x20found\x20in\x20'+(_0xda5be9===_0x2cb054(0x2f4)?_0x2cb054(0x202):_0xda5be9+_0x2cb054(0x2b6)),'error');return;}const _0x2e74f1=collection(db,_0x2cb054(0x2bc)),_0x3367f9=query(_0x2e74f1,where('userId','==',_0x47f0bf),where('trophyId','==',_0x4e264a)),_0x5aa719=await getDocs(_0x3367f9);if(!_0x5aa719['empty']){showNotification('Player\x20\x22'+_0x23c2cb+'\x22\x20already\x20has\x20this\x20trophy',_0x2cb054(0x2c5));return;}await addDoc(collection(db,_0x2cb054(0x2bc)),{'userId':_0x47f0bf,'playerUsername':_0x23c2cb,'trophyId':_0x4e264a,'awardedAt':serverTimestamp(),'awardedBy':_0x490d8f['email'],'ladder':_0xda5be9}),showNotification(_0x2cb054(0x3d0)+_0x3c3222+'\x22\x20awarded\x20to\x20'+_0x23c2cb,'success'),closeAssignTrophyModal();}catch(_0x4b1e15){console['error']('Error\x20assigning\x20trophy:',_0x4b1e15),showNotification(_0x2cb054(0x3aa)+_0x4b1e15['message'],_0x2cb054(0x383));}}function setupInactivePlayersSection(){const _0x33c2be=a4_0x46e366,_0x15230c=document[_0x33c2be(0x3db)](_0x33c2be(0x1d3));_0x15230c&&_0x15230c[_0x33c2be(0x257)]('change',function(){const _0x4e34ab=_0x33c2be,_0x185b88=document[_0x4e34ab(0x3db)]('load-inactive-players-data');if(_0x185b88)_0x185b88[_0x4e34ab(0x351)]();});const _0x470d2a=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x4a801b=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x470d2a&&_0x4a801b&&(_0x470d2a[_0x33c2be(0x257)]('change',function(){const _0x21bfa3=_0x33c2be;if(this[_0x21bfa3(0x329)]){currentLadder='D1';if(document['getElementById'](_0x21bfa3(0x3c9))[_0x21bfa3(0x2c3)]['display']!=='none'){const _0x7fc99d=document['getElementById']('load-inactive-players-data');if(_0x7fc99d)_0x7fc99d['click']();}}}),_0x4a801b['addEventListener'](_0x33c2be(0x220),function(){const _0x303508=_0x33c2be;if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')['style']['display']!==_0x303508(0x3ad)){const _0x1b25ed=document['getElementById']('load-inactive-players-data');if(_0x1b25ed)_0x1b25ed['click']();}}}));const _0x53a3d7=document['getElementById'](_0x33c2be(0x2fe));_0x53a3d7&&_0x53a3d7['addEventListener'](_0x33c2be(0x1c9),debounce(function(){const _0x5a5ba8=_0x33c2be,_0x1712cb=_0x53a3d7['value']['toLowerCase'](),_0xd7f0e1=document['querySelectorAll'](_0x5a5ba8(0x334));_0xd7f0e1[_0x5a5ba8(0x2e2)](_0x2d78c5=>{const _0x58646d=_0x5a5ba8;if(_0x2d78c5['querySelector']('.loading-cell')||_0x2d78c5['querySelector']('.empty-state')||_0x2d78c5['querySelector']('.error-state'))return;const _0x330e39=_0x2d78c5[_0x58646d(0x22f)][0x0]?.['textContent'][_0x58646d(0x3ac)]()||'',_0x143563=_0x2d78c5['cells'][0x5]?.[_0x58646d(0x263)]['toLowerCase']()||'';_0x330e39['includes'](_0x1712cb)||_0x143563['includes'](_0x1712cb)?_0x2d78c5['style']['display']='':_0x2d78c5['style']['display']='none';});},0x12c)),document['addEventListener']('click',function(_0x57fd7d){const _0x3624b0=_0x33c2be;if(_0x57fd7d['target']['closest']('.view-player-btn')){const _0x5beaec=_0x57fd7d['target'][_0x3624b0(0x3e5)]('.view-player-btn'),_0x489868=_0x5beaec[_0x3624b0(0x349)][_0x3624b0(0x1dc)];_0x489868&&alert('View\x20player\x20details\x20for\x20'+_0x489868+'\x20-\x20Feature\x20coming\x20soon');}}),console[_0x33c2be(0x39b)]('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0xcad65c=a4_0x46e366,_0x16d418=document['getElementById']('inactive-players-table-body');if(!_0x16d418)return;_0x16d418['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x213a96=document['getElementById']('inactive-days-filter'),_0x3b0d7c=_0x213a96?parseInt(_0x213a96['value'])||0x0:0x0,_0x3e6824=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x54eea4=await getDocs(_0x3e6824);if(_0x54eea4['empty']){_0x16d418['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x36bc50=[];_0x54eea4[_0xcad65c(0x2e2)](_0x42ee6e=>{const _0x335fcd=_0x42ee6e['data']();_0x36bc50['push']({..._0x335fcd,'id':_0x42ee6e['id'],'username':_0x335fcd['username']||'Unknown\x20Player'});}),console['log'](_0xcad65c(0x261)+_0x36bc50['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x16300e=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x3960b9=_0x36bc50['map'](async _0x44f068=>{const _0x2a73fb=_0xcad65c;try{const _0x5b2d89=collection(db,_0x16300e),_0x188be4=query(_0x5b2d89,or(where('winnerUsername','==',_0x44f068['username']),where('loserUsername','==',_0x44f068[_0x2a73fb(0x1dc)])),orderBy(_0x2a73fb(0x3ba),'desc'),limit(0x1)),_0x527079=await getDocs(_0x188be4);if(!_0x527079['empty']){const _0x4a3ff8=_0x527079['docs'][0x0]['data'](),_0x3a8e4f=_0x4a3ff8['approvedAt']?new Date(_0x4a3ff8[_0x2a73fb(0x3ba)]['seconds']*0x3e8):null,_0x319c67=new Date(),_0x1f6a37=_0x3a8e4f?Math[_0x2a73fb(0x352)]((_0x319c67-_0x3a8e4f)/(0x3e8*0x3c*0x3c*0x18)):null,_0x4f4449=_0x4a3ff8[_0x2a73fb(0x2e1)]===_0x44f068['username']?_0x4a3ff8['loserUsername']:_0x4a3ff8[_0x2a73fb(0x2e1)],_0x12dff5=_0x4a3ff8['winnerUsername']===_0x44f068[_0x2a73fb(0x1dc)]?'Won':'Lost';return{..._0x44f068,'lastMatch':{'date':_0x3a8e4f?_0x3a8e4f[_0x2a73fb(0x386)]():'N/A','opponent':_0x4f4449||'Unknown','result':_0x12dff5,'timestamp':_0x3a8e4f||new Date(0x0),'daysSinceMatch':_0x1f6a37||Number[_0x2a73fb(0x322)]}};}else return{..._0x44f068,'lastMatch':{'date':_0x2a73fb(0x260),'opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x558089){return console[_0x2a73fb(0x383)]('Error\x20fetching\x20matches\x20for\x20'+_0x44f068['username']+':',_0x558089),{..._0x44f068,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x5a4d77=await Promise['all'](_0x3960b9);_0x5a4d77['sort']((_0x5caf0c,_0x268278)=>_0x268278[_0xcad65c(0x256)]['daysSinceMatch']-_0x5caf0c['lastMatch']['daysSinceMatch']);_0x3b0d7c>0x0&&(_0x5a4d77=_0x5a4d77[_0xcad65c(0x287)](_0x2fc6d3=>_0x2fc6d3['lastMatch']['daysSinceMatch']>=_0x3b0d7c));_0x16d418[_0xcad65c(0x2b5)]='';if(_0x5a4d77['length']===0x0){_0x16d418['innerHTML']=_0xcad65c(0x249);return;}_0x5a4d77['forEach'](_0x296f9e=>{const _0x3353b8=_0xcad65c,_0x24bb70=document['createElement']('tr'),_0x2158f3=_0x296f9e['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x296f9e['lastMatch']['daysSinceMatch']>0xe?_0x3353b8(0x1d9):'';_0x24bb70['className']=_0x2158f3,_0x24bb70['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x296f9e['username']+_0x3353b8(0x1f6)+(_0x296f9e[_0x3353b8(0x39e)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x296f9e['lastMatch']['date']+_0x3353b8(0x1f6)+(_0x296f9e['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?_0x3353b8(0x300):_0x296f9e['lastMatch']['daysSinceMatch'])+_0x3353b8(0x1f6)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x296f9e[_0x3353b8(0x256)][_0x3353b8(0x3a3)]===_0x3353b8(0x260)?_0x3353b8(0x2cf):_0x296f9e['lastMatch']['result']+_0x3353b8(0x1de)+_0x296f9e[_0x3353b8(0x256)][_0x3353b8(0x303)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x296f9e['username']+_0x3353b8(0x389),_0x16d418[_0x3353b8(0x2a6)](_0x24bb70);}),console['log']('Displaying\x20'+_0x5a4d77['length']+'\x20inactive\x20players');}catch(_0xffd948){console['error']('Error\x20loading\x20inactive\x20players:',_0xffd948),_0x16d418['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0xffd948['message']+'</td></tr>';}}function setupHighlightButtons(){const _0xf4e3f8=a4_0x46e366;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x58e77c=document['getElementById'](_0xf4e3f8(0x20d));_0x58e77c&&_0x58e77c['addEventListener']('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x176f22=document['getElementById']('create-creator-highlight-btn');_0x176f22&&_0x176f22[_0xf4e3f8(0x257)]('click',function(){const _0x10cce4=_0xf4e3f8;console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal(_0x10cce4(0x28b));});const _0x175971=document['getElementById']('create-achievement-highlight-btn');_0x175971&&_0x175971['addEventListener']('click',function(){const _0x429347=_0xf4e3f8;console[_0x429347(0x39b)]('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x16d9bd='match'){const _0x47c6e2=a4_0x46e366;console[_0x47c6e2(0x39b)]('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x16d9bd);const _0x54b965=document['getElementById'](_0x47c6e2(0x338)),_0x1c479a=document['getElementById']('highlight-form'),_0x1ee511=document['getElementById']('highlight-modal-title'),_0x59cba2=document['getElementById']('highlight-id');if(!_0x54b965||!_0x1c479a||!_0x1ee511){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x1c479a['reset'](),_0x59cba2['value']='';const _0x287a00=['match','creator','achievement'],_0x40c014=!_0x287a00['includes'](_0x16d9bd);if(_0x40c014){const _0x3db07c=_0x16d9bd;_0x59cba2[_0x47c6e2(0x248)]=_0x3db07c,_0x1ee511['textContent']=_0x47c6e2(0x345),loadHighlightDataAdmin(_0x3db07c);}else{const _0x1262df=_0x16d9bd;document['getElementById']('highlight-type')[_0x47c6e2(0x248)]=_0x1262df,_0x1ee511['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x1262df),toggleHighlightFields(_0x1262df);const _0x4c80e8=auth['currentUser'];_0x4c80e8&&document['getElementById']('highlight-submitted-by')&&(document[_0x47c6e2(0x3db)]('highlight-submitted-by')[_0x47c6e2(0x248)]=_0x4c80e8['displayName']||_0x4c80e8[_0x47c6e2(0x214)]);}_0x54b965['classList']['add']('active');}function toggleHighlightFields(_0xdee123){const _0xa70a7=a4_0x46e366;console[_0xa70a7(0x39b)](_0xa70a7(0x1bf)+_0xdee123);const _0x172a81=document[_0xa70a7(0x3db)]('highlight-form');if(!_0x172a81)return;const _0x24d148=_0x172a81['querySelectorAll']('.form-group,\x20.form-row');_0x24d148['forEach'](_0xce6e56=>_0xce6e56[_0xa70a7(0x2c3)]['display']='none');const _0x4a362a=document[_0xa70a7(0x3db)](_0xa70a7(0x234));if(_0x4a362a)_0x4a362a[_0xa70a7(0x2c3)][_0xa70a7(0x34d)]='none';const _0x3fd006=['highlight-title-container',_0xa70a7(0x2cc),'highlight-submitted-by-container'];_0x3fd006['forEach'](_0x3f402b=>{const _0xdd4f28=_0xa70a7,_0x1e8278=document[_0xdd4f28(0x3db)](_0x3f402b);if(_0x1e8278)_0x1e8278['style'][_0xdd4f28(0x34d)]='block';});if(_0xdee123==='match'){const _0x26d2f7=['highlight-video-container',_0xa70a7(0x302),'highlight-map-container',_0xa70a7(0x31b),'highlight-players-container',_0xa70a7(0x33f)];_0x26d2f7['forEach'](_0x3b8fd5=>{const _0x3427ac=_0xa70a7,_0x580f37=document['getElementById'](_0x3b8fd5);_0x580f37&&(_0x3b8fd5==='highlight-players-container'?_0x580f37[_0x3427ac(0x2c3)][_0x3427ac(0x34d)]='flex':_0x580f37['style']['display']='block');});const _0x2ef70f=document['getElementById']('highlight-video-id');if(_0x2ef70f){_0x2ef70f['required']=!![];const _0x57c022=_0x2ef70f['previousElementSibling'];if(_0x57c022)_0x57c022['innerHTML']=_0xa70a7(0x3a4);}if(_0x4a362a)_0x4a362a['style']['display']='block';updateHighlightVideoPreview();}else{if(_0xdee123==='creator'){const _0x365753=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x365753['forEach'](_0x4fdf3f=>{const _0x412551=_0xa70a7,_0x299478=document['getElementById'](_0x4fdf3f);if(_0x299478)_0x299478['style']['display']=_0x412551(0x1fa);});const _0x2b4455=document['getElementById'](_0xa70a7(0x2e6));if(_0x2b4455){_0x2b4455['required']=![];const _0x2f3687=_0x2b4455[_0xa70a7(0x3b7)];if(_0x2f3687)_0x2f3687[_0xa70a7(0x2b5)]='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0xdee123===_0xa70a7(0x251)){const _0x38a6ea=[_0xa70a7(0x3e2),'highlight-achievement-type-container',_0xa70a7(0x23e),_0xa70a7(0x23a),'highlight-achievement-image-container','highlight-video-container'];_0x38a6ea['forEach'](_0x2efacb=>{const _0x29a10e=_0xa70a7,_0x50e359=document[_0x29a10e(0x3db)](_0x2efacb);if(_0x50e359)_0x50e359['style'][_0x29a10e(0x34d)]='block';});const _0x4f5c3e=document[_0xa70a7(0x3db)]('highlight-video-id');if(_0x4f5c3e){_0x4f5c3e['required']=![];const _0x293a3b=_0x4f5c3e['previousElementSibling'];if(_0x293a3b)_0x293a3b['innerHTML']=_0xa70a7(0x290);}}}}}async function loadHighlightDataAdmin(_0xca6b98){const _0x37f359=a4_0x46e366;try{const _0x3d42d1=doc(db,'highlights',_0xca6b98),_0x4f0659=await getDoc(_0x3d42d1);if(!_0x4f0659[_0x37f359(0x239)]()){showNotification(_0x37f359(0x2a7),'error');return;}const _0x6f4bfb=_0x4f0659[_0x37f359(0x21b)](),_0x372349=_0x6f4bfb[_0x37f359(0x346)]||_0x37f359(0x1c4);document['getElementById']('highlight-modal-title')[_0x37f359(0x263)]=_0x37f359(0x2b0)+getHighlightTypeName(_0x372349),document['getElementById']('highlight-type')['value']=_0x372349,toggleHighlightFields(_0x372349),document['getElementById']('highlight-title')[_0x37f359(0x248)]=_0x6f4bfb[_0x37f359(0x3b1)]||'',document['getElementById']('highlight-description')['value']=_0x6f4bfb['description']||'',document[_0x37f359(0x3db)]('highlight-submitted-by')[_0x37f359(0x248)]=_0x6f4bfb[_0x37f359(0x30c)]||'';_0x6f4bfb['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x6f4bfb[_0x37f359(0x247)],updateHighlightVideoPreview());if(_0x372349===_0x37f359(0x1c4)){document['getElementById']('highlight-match-info')['value']=_0x6f4bfb['matchInfo']||'',document[_0x37f359(0x3db)]('highlight-map')['value']=_0x6f4bfb[_0x37f359(0x2e5)]||'';if(_0x6f4bfb[_0x37f359(0x20e)]){const _0x10d288=new Date(_0x6f4bfb['matchDate'][_0x37f359(0x1d4)]*0x3e8);document['getElementById']('highlight-match-date')[_0x37f359(0x248)]=_0x10d288[_0x37f359(0x3e4)]()['split']('T')[0x0];}document['getElementById'](_0x37f359(0x2f1))['value']=_0x6f4bfb['winnerName']||'',document[_0x37f359(0x3db)]('highlight-winner-score')['value']=_0x6f4bfb['winnerScore']||'',document['getElementById'](_0x37f359(0x335))['value']=_0x6f4bfb['loserName']||'',document['getElementById']('highlight-loser-score')['value']=_0x6f4bfb[_0x37f359(0x1b7)]||'',document['getElementById']('highlight-match-link')[_0x37f359(0x248)]=_0x6f4bfb['matchLink']||'';}else{if(_0x372349==='creator')document['getElementById'](_0x37f359(0x222))['value']=_0x6f4bfb['map']||'',document['getElementById'](_0x37f359(0x28e))['value']=_0x6f4bfb['mapCreator']||'',document['getElementById'](_0x37f359(0x288))['value']=_0x6f4bfb['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x6f4bfb[_0x37f359(0x358)]||'';else _0x372349==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0x6f4bfb[_0x37f359(0x1c8)]||'',document[_0x37f359(0x3db)](_0x37f359(0x2c1))['value']=_0x6f4bfb['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x6f4bfb[_0x37f359(0x31c)]||'',document['getElementById']('highlight-player-profile')['value']=_0x6f4bfb[_0x37f359(0x3de)]||'',document['getElementById']('highlight-achievement-image')['value']=_0x6f4bfb[_0x37f359(0x2b2)]||'');}}catch(_0x4cfd47){console['error']('Error\x20loading\x20highlight:',_0x4cfd47),showNotification('Error\x20loading\x20highlight:\x20'+_0x4cfd47['message'],'error');}}async function saveHighlight(){const _0x149466=a4_0x46e366;try{const _0x1db660=document[_0x149466(0x3db)](_0x149466(0x278))?.[_0x149466(0x248)]||'',_0x4b602b=document['getElementById']('highlight-type')?.[_0x149466(0x248)]||'match',_0x49a5c1={'title':document[_0x149466(0x3db)]('highlight-title')?.['value']?.['trim']()||'','description':document['getElementById'](_0x149466(0x22d))?.['value']?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.[_0x149466(0x248)]?.['trim']()||'','videoId':document[_0x149466(0x3db)]('highlight-video-id')?.['value']?.[_0x149466(0x3c2)]()||null,'type':_0x4b602b};if(!_0x49a5c1['title']){showNotification('Title\x20is\x20required',_0x149466(0x383));return;}if(_0x4b602b==='match'){_0x49a5c1['matchInfo']=document[_0x149466(0x3db)]('highlight-match-info')?.['value']?.['trim']()||'',_0x49a5c1['map']=document[_0x149466(0x3db)](_0x149466(0x222))?.[_0x149466(0x248)]?.[_0x149466(0x3c2)]()||'';const _0x3c8ba3=document['getElementById']('highlight-match-date'),_0x21ddb1=_0x3c8ba3?.['value']||'';_0x49a5c1[_0x149466(0x20e)]=_0x21ddb1?Timestamp['fromDate'](new Date(_0x21ddb1)):null,_0x49a5c1['winnerName']=document[_0x149466(0x3db)]('highlight-winner-name')?.['value']?.['trim']()||'',_0x49a5c1['winnerScore']=document[_0x149466(0x3db)]('highlight-winner-score')?.[_0x149466(0x248)]?.['trim']()||'',_0x49a5c1['loserName']=document[_0x149466(0x3db)]('highlight-loser-name')?.[_0x149466(0x248)]?.[_0x149466(0x3c2)]()||'',_0x49a5c1['loserScore']=document['getElementById']('highlight-loser-score')?.['value']?.['trim']()||'',_0x49a5c1['matchLink']=document['getElementById']('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x49a5c1[_0x149466(0x247)]){showNotification(_0x149466(0x3e1),_0x149466(0x383));return;}}else{if(_0x4b602b==='creator'){_0x49a5c1['map']=document[_0x149466(0x3db)](_0x149466(0x222))?.['value']?.['trim']()||'',_0x49a5c1['mapCreator']=document['getElementById']('highlight-map-creator')?.[_0x149466(0x248)]?.['trim']()||'',_0x49a5c1['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.[_0x149466(0x3c2)]()||'',_0x49a5c1['creatorImageUrl']=document[_0x149466(0x3db)]('highlight-creator-image')?.['value']?.['trim']()||'';if(!_0x49a5c1['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x4b602b==='achievement'){_0x49a5c1['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.['value']?.[_0x149466(0x3c2)]()||'',_0x49a5c1['achievementType']=document['getElementById']('highlight-achievement-type')?.['value']?.['trim']()||'',_0x49a5c1[_0x149466(0x31c)]=document[_0x149466(0x3db)]('highlight-achievement-details')?.[_0x149466(0x248)]?.['trim']()||'',_0x49a5c1['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.['trim']()||'',_0x49a5c1['achievementImageUrl']=document[_0x149466(0x3db)]('highlight-achievement-image')?.['value']?.[_0x149466(0x3c2)]()||'';if(!_0x49a5c1[_0x149466(0x1c8)]){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x1db660?(_0x49a5c1[_0x149466(0x24e)]=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x1db660),_0x49a5c1),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x49a5c1['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x149466(0x1e1)),_0x49a5c1),showNotification(_0x149466(0x2d1),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x52c9dd){console[_0x149466(0x383)]('Error\x20saving\x20highlight:',_0x52c9dd),showNotification(_0x149466(0x30a)+_0x52c9dd['message'],'error');}}function closeHighlightModal(){const _0x52b567=document['getElementById']('highlight-modal');if(_0x52b567)_0x52b567['classList']['remove']('active');}function getHighlightTypeName(_0x42ef7c){const _0x4cce3e=a4_0x46e366;switch(_0x42ef7c){case'match':return'Match\x20Highlight';case'creator':return _0x4cce3e(0x29e);case _0x4cce3e(0x251):return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x44fbc4=a4_0x46e366,_0x4108ef=document['getElementById']('highlight-video-id'),_0x1a566d=document['getElementById']('highlight-video-preview-container'),_0x52e7fd=document[_0x44fbc4(0x3db)]('highlight-video-preview');if(!_0x4108ef||!_0x52e7fd||!_0x1a566d)return;const _0x11aa27=_0x4108ef['value'][_0x44fbc4(0x3c2)]();_0x11aa27&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x11aa27)?(_0x52e7fd['src']='https://www.youtube.com/embed/'+_0x11aa27,_0x1a566d[_0x44fbc4(0x2c3)][_0x44fbc4(0x34d)]='block'):(_0x52e7fd['src']='',_0x1a566d['style'][_0x44fbc4(0x34d)]='none');}async function loadHighlightsAdmin(){const _0x1e20f9=a4_0x46e366,_0x1ce416=document[_0x1e20f9(0x3db)](_0x1e20f9(0x2ca));if(!_0x1ce416)return;_0x1ce416[_0x1e20f9(0x2b5)]=_0x1e20f9(0x2b9);try{const _0x176062=query(collection(db,'highlights'),orderBy('createdAt','desc')),_0x52c7d5=await getDocs(_0x176062);if(_0x52c7d5[_0x1e20f9(0x381)]){_0x1ce416['innerHTML']=_0x1e20f9(0x3bf);return;}_0x1ce416['innerHTML']='',_0x52c7d5[_0x1e20f9(0x2e2)](_0x410fb3=>{const _0x1bfb13=_0x1e20f9,_0x45e06a=_0x410fb3['data'](),_0x190c93=document['createElement']('tr'),_0x2c0b2c=_0x45e06a[_0x1bfb13(0x344)]?new Date(_0x45e06a[_0x1bfb13(0x344)]['seconds']*0x3e8)[_0x1bfb13(0x386)]():'N/A';let _0x5f54db='Unknown',_0x2c5107='';switch(_0x45e06a['type']){case _0x1bfb13(0x1c4):_0x5f54db='Match',_0x2c5107='match-type';break;case'creator':_0x5f54db='Creator',_0x2c5107=_0x1bfb13(0x368);break;case'achievement':_0x5f54db='Achievement',_0x2c5107='achievement-type';break;}_0x190c93[_0x1bfb13(0x2b5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x45e06a['title']||'Untitled')+_0x1bfb13(0x2d5)+_0x2c5107+'\x22>'+_0x5f54db+_0x1bfb13(0x279)+_0x2c0b2c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x45e06a['submittedBy']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x45e06a['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x410fb3['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x410fb3['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1ce416['appendChild'](_0x190c93);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x4124f9=>{_0x4124f9['addEventListener']('click',_0xf1c763=>{const _0x2a7ce4=a4_0x168e;openHighlightModal(_0xf1c763[_0x2a7ce4(0x2f8)][_0x2a7ce4(0x349)]['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0xce7bc0=>{const _0x4b3ddc=_0x1e20f9;_0xce7bc0[_0x4b3ddc(0x257)]('click',_0x236d00=>{const _0xb58a87=_0x4b3ddc;confirmDeleteHighlight(_0x236d00['currentTarget'][_0xb58a87(0x349)]['id']);});});}catch(_0x24aa25){console['error']('Error\x20loading\x20highlights:',_0x24aa25),_0x1ce416['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x24aa25['message']+_0x1e20f9(0x2be);}}async function confirmDeleteHighlight(_0x3e6faf){const _0x24da10=a4_0x46e366;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x3e6faf)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x3ec93a){console['error']('Error\x20deleting\x20highlight:',_0x3ec93a),showNotification(_0x24da10(0x208)+_0x3ec93a['message'],'error');}}function setupCreateTestMatchModal(){const _0x27ed99=a4_0x46e366;console['log'](_0x27ed99(0x1ef));const _0x4879fb=document['getElementById'](_0x27ed99(0x317)),_0x16e987=document['getElementById']('create-test-match-form');if(!_0x4879fb){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x16e987){console['error'](_0x27ed99(0x3cb));return;}const _0x4e366b=_0x4879fb[_0x27ed99(0x262)](!![]);_0x4879fb['parentNode']['replaceChild'](_0x4e366b,_0x4879fb);const _0x333584=_0x4e366b['querySelector']('#create-test-match-form');_0x4e366b['addEventListener']('click',function(_0x3d7aa3){_0x3d7aa3['target']===_0x4e366b&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x548460=_0x4e366b['querySelector'](_0x27ed99(0x34c));_0x548460&&_0x548460['addEventListener']('click',function(_0x475b7b){const _0x561e80=_0x27ed99;_0x475b7b['preventDefault'](),_0x475b7b['stopPropagation'](),console[_0x561e80(0x39b)](_0x561e80(0x1ed)),closeCreateTestMatchModal();});const _0xfbd2ff=_0x4e366b['querySelector']('#cancel-create-test-match-btn');_0xfbd2ff&&_0xfbd2ff['addEventListener']('click',function(_0x362189){const _0x2d25a2=_0x27ed99;_0x362189['preventDefault'](),_0x362189['stopPropagation'](),console['log'](_0x2d25a2(0x3d2)),closeCreateTestMatchModal();});if(_0x333584){_0x333584['addEventListener']('submit',function(_0x40e67c){const _0x333f2d=_0x27ed99;_0x40e67c['preventDefault'](),_0x40e67c[_0x333f2d(0x23f)](),console[_0x333f2d(0x39b)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x1e62e0=_0x333584['querySelector']('button[type=\x22submit\x22]');_0x1e62e0&&_0x1e62e0['addEventListener']('click',function(_0x195c92){_0x195c92['preventDefault'](),_0x195c92['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x27ed99(0x39b)](_0x27ed99(0x367));}function setupManageHighlightsSection(){const _0x1ed3ee=a4_0x46e366;console['log'](_0x1ed3ee(0x3a7)),setupHighlightButtons();const _0x53f2f8=document[_0x1ed3ee(0x3db)](_0x1ed3ee(0x36c));_0x53f2f8&&_0x53f2f8['addEventListener']('submit',_0x289677=>{_0x289677['preventDefault'](),saveHighlight();});const _0x3090d7=document['getElementById']('cancel-highlight-btn');_0x3090d7&&_0x3090d7[_0x1ed3ee(0x257)](_0x1ed3ee(0x351),closeHighlightModal);const _0x3a702f=document[_0x1ed3ee(0x1f0)](_0x1ed3ee(0x23d));_0x3a702f&&_0x3a702f[_0x1ed3ee(0x257)]('click',closeHighlightModal);const _0xbfb49=document['getElementById'](_0x1ed3ee(0x338));_0xbfb49&&_0xbfb49['addEventListener']('click',_0xb44b03=>{const _0x416980=_0x1ed3ee;_0xb44b03[_0x416980(0x29d)]===_0xbfb49&&closeHighlightModal();});const _0x2f7eb7=document['getElementById']('highlight-video-id');_0x2f7eb7&&_0x2f7eb7['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0xe19215=a4_0x46e366;console['log'](_0xe19215(0x38b));const _0x2a0ba6=document['getElementById'](_0xe19215(0x20b)),_0xd687e4=document[_0xe19215(0x3db)]('matches-next-page');_0x2a0ba6&&_0x2a0ba6[_0xe19215(0x257)]('click',()=>{const _0x24f75e=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x24f75e]['page']-0x1);});_0xd687e4&&_0xd687e4['addEventListener']('click',()=>{const _0x537608=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x537608]['page']+0x1);});const _0x1d783d=document['getElementById']('apply-matches-filters'),_0x152f1e=document['getElementById']('reset-matches-filters');_0x1d783d&&_0x1d783d['addEventListener'](_0xe19215(0x351),applyMatchesFilters);_0x152f1e&&_0x152f1e['addEventListener']('click',resetMatchesFilters);const _0x34eeac=document['getElementById']('matches-search');_0x34eeac&&_0x34eeac['addEventListener'](_0xe19215(0x1c9),debounce(filterMatchesTable,0x12c));const _0x31fa6d=document['getElementById']('resimulate-match-btn');_0x31fa6d&&_0x31fa6d['addEventListener']('click',openResimulateModal);const _0x559b5f=document['getElementById'](_0xe19215(0x3af));if(_0x559b5f){const _0x23c010=_0x559b5f[_0xe19215(0x1f0)](_0xe19215(0x204));_0x23c010&&_0x23c010['addEventListener'](_0xe19215(0x351),closeResimulateModal),_0x559b5f['addEventListener'](_0xe19215(0x351),_0x4877f9=>{_0x4877f9['target']===_0x559b5f&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console[_0xe19215(0x39b)](_0xe19215(0x3d1));}function openCreateTestMatchModal(){const _0x466963=a4_0x46e366;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x3cc28e=document['getElementById']('create-test-match-modal'),_0x455a91=document[_0x466963(0x3db)](_0x466963(0x2e4));if(!_0x3cc28e){console['error'](_0x466963(0x342)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x455a91){console['error'](_0x466963(0x26d)),showNotification('Create\x20test\x20match\x20form\x20not\x20found',_0x466963(0x383));return;}_0x455a91['reset']();const _0x2ccb95=document['querySelectorAll'](_0x466963(0x2dc));let _0x157986=![];_0x2ccb95['forEach'](_0x27372f=>{const _0x5d684d=_0x466963;console['log']('Found\x20radio\x20with\x20value:',_0x27372f['value']),_0x27372f[_0x5d684d(0x248)]===currentLadder&&(_0x27372f['checked']=!![],_0x157986=!![],console['log'](_0x5d684d(0x21a),currentLadder));});if(!_0x157986){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x9276ec=document[_0x466963(0x1f0)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x9276ec&&(_0x9276ec['checked']=!![],console[_0x466963(0x39b)]('Defaulted\x20to\x20D1\x20ladder'));}const _0x2ccfeb=document['getElementById']('test-match-date');if(_0x2ccfeb){const _0x1fca7c=new Date()[_0x466963(0x3e4)]()[_0x466963(0x3a8)]('T')[0x0];_0x2ccfeb[_0x466963(0x248)]=_0x1fca7c;}_0x3cc28e['style'][_0x466963(0x34d)]='flex',_0x3cc28e['style']['visibility']='visible',_0x3cc28e[_0x466963(0x2c3)][_0x466963(0x1b4)]='1',_0x3cc28e['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0xb5f3cd=document[_0x466963(0x3db)]('test-match-winner-username');_0xb5f3cd&&setTimeout(()=>{_0xb5f3cd['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x218834=a4_0x46e366;console['log'](_0x218834(0x1ca));const _0x30fc6a=document[_0x218834(0x3db)](_0x218834(0x317));if(!_0x30fc6a){console[_0x218834(0x383)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x30fc6a['classList'][_0x218834(0x370)](_0x218834(0x3dc)),_0x30fc6a['style']['opacity']='0',_0x30fc6a['style']['visibility']='hidden',setTimeout(()=>{const _0x4bf58b=_0x218834;!_0x30fc6a['classList']['contains']('active')&&(_0x30fc6a[_0x4bf58b(0x2c3)][_0x4bf58b(0x34d)]='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x3919c0=a4_0x46e366;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x4cca5b=auth[_0x3919c0(0x276)];if(!_0x4cca5b){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x20a0ec='D1',_0x3182dd=_0x3919c0(0x216),_0x1a3d84={'winnerUsername':_0x3919c0(0x258),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp[_0x3919c0(0x3e6)](new Date()),'approvedBy':_0x4cca5b['email'],'createdAt':serverTimestamp(),'createdBy':_0x4cca5b['email'],'isTestMatch':!![],'ladder':_0x20a0ec,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x4cca5b[_0x3919c0(0x214)]};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x3182dd),_0x1a3d84),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x2a145f){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x2a145f),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x2a145f['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x6d2a05=a4_0x46e366;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console['log']('DB:',db),console[_0x6d2a05(0x39b)](_0x6d2a05(0x275),auth['currentUser']);const _0x32a2d1=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x32a2d1);const _0x1f2107=query(_0x32a2d1,where('username','==','nonexistent'));console[_0x6d2a05(0x39b)]('Query\x20created:',_0x1f2107);const _0x44fe05=await getDocs(_0x1f2107);console['log']('Query\x20executed.\x20Empty:',_0x44fe05['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x5352aa){console['error'](_0x6d2a05(0x2cd),_0x5352aa);}};function setupCreateTestMatchButton(){const _0x18fd45=a4_0x46e366,_0x37a70f=document['getElementById'](_0x18fd45(0x2ab));if(!_0x37a70f){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log'](_0x18fd45(0x1c2));const _0x9c5eed=_0x37a70f['cloneNode'](!![]);_0x37a70f['parentNode']['replaceChild'](_0x9c5eed,_0x37a70f),_0x9c5eed['addEventListener'](_0x18fd45(0x351),function(_0x136c7d){const _0x509133=_0x18fd45;_0x136c7d[_0x509133(0x330)](),_0x136c7d['stopPropagation'](),console['log'](_0x509133(0x333)),openCreateTestMatchModal();}),console[_0x18fd45(0x39b)]('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x5e6546=0x1){const _0x15f192=a4_0x46e366,_0x48bb9b=document['getElementById']('matches-table-body');if(!_0x48bb9b)return;_0x48bb9b[_0x15f192(0x2b5)]=_0x15f192(0x390);try{const _0xd4802a=currentLadder['toLowerCase'](),_0x4fef0f=matchesPagination[_0xd4802a],_0x486d08=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x15f192(0x2b7),_0x314272=collection(db,_0x486d08);_0x5e6546<=0x1?(_0x4fef0f['page']=0x1,_0x4fef0f['firstVisible']=null,_0x4fef0f['lastVisible']=null):_0x4fef0f[_0x15f192(0x3b3)]=_0x5e6546;const _0xf38d0=getMatchesFilters();let _0x59fb5d=_0x314272;if(_0xf38d0[_0x15f192(0x36b)]||_0xf38d0[_0x15f192(0x388)]||_0xf38d0[_0x15f192(0x353)]){let _0xe372dc=[];_0xf38d0['startDate']&&_0xf38d0[_0x15f192(0x388)]?(_0xe372dc['push'](where('approvedAt','>=',_0xf38d0['startDate']),where('approvedAt','<=',_0xf38d0['endDate'])),_0x59fb5d=query(_0x314272,..._0xe372dc)):_0x59fb5d=query(_0x314272,orderBy('approvedAt','desc'));}else _0x59fb5d=query(_0x314272,orderBy('approvedAt',_0x15f192(0x209)));_0x5e6546>0x1&&_0x4fef0f[_0x15f192(0x286)]?_0x59fb5d=query(_0x59fb5d,startAfter(_0x4fef0f['lastVisible']),limit(PAGE_SIZE)):_0x59fb5d=query(_0x59fb5d,limit(PAGE_SIZE));const _0x316e1f=await getDocs(_0x59fb5d);!_0x316e1f['empty']&&(_0x4fef0f['firstVisible']=_0x316e1f[_0x15f192(0x1ee)][0x0],_0x4fef0f['lastVisible']=_0x316e1f['docs'][_0x316e1f['docs']['length']-0x1]);let _0x415f0c=![];if(!_0x316e1f['empty']){const _0x17e8d2=query(_0x59fb5d,startAfter(_0x4fef0f['lastVisible']),limit(0x1)),_0x34b301=await getDocs(_0x17e8d2);_0x415f0c=!_0x34b301['empty'];}const _0x28dc1b=document['getElementById'](_0x15f192(0x20b)),_0x2a81ee=document['getElementById']('matches-next-page'),_0xd64daf=document[_0x15f192(0x3db)]('matches-page-indicator');if(_0x28dc1b)_0x28dc1b[_0x15f192(0x320)]=_0x4fef0f[_0x15f192(0x3b3)]<=0x1;if(_0x2a81ee)_0x2a81ee['disabled']=!_0x415f0c;if(_0xd64daf)_0xd64daf['textContent']=_0x15f192(0x253)+_0x4fef0f[_0x15f192(0x3b3)];if(_0x316e1f['empty']){_0x48bb9b['innerHTML']=_0x15f192(0x33b);return;}_0x48bb9b['innerHTML']='',_0x316e1f['forEach'](_0x2e9958=>{const _0x46ead0=_0x15f192,_0xa25b69=_0x2e9958['data'](),_0x3f8f77=document[_0x46ead0(0x325)]('tr'),_0x5d11f3=_0xa25b69['approvedAt']?new Date(_0xa25b69['approvedAt'][_0x46ead0(0x1d4)]*0x3e8)[_0x46ead0(0x386)]():'N/A';_0x3f8f77[_0x46ead0(0x295)]('data-id',_0x2e9958['id']),_0x3f8f77['setAttribute']('data-ladder',currentLadder),_0x3f8f77['classList'][_0x46ead0(0x1b5)]('match-row'),_0x3f8f77['innerHTML']=_0x46ead0(0x2bf)+_0x5d11f3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0xa25b69['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0xa25b69['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0xa25b69['winnerScore']||0x0)+'\x20-\x20'+(_0xa25b69['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0xa25b69['mapPlayed']||_0x46ead0(0x300))+_0x46ead0(0x227)+currentLadder+_0x46ead0(0x1cf)+_0x2e9958['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x2e9958['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x48bb9b['appendChild'](_0x3f8f77);}),setupMatchesActionButtons(),_0xf38d0['searchTerm']&&filterMatchesTable(),console[_0x15f192(0x39b)]('Loaded\x20'+_0x316e1f['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x4fef0f['page']);}catch(_0x4feb9c){console[_0x15f192(0x383)]('Error\x20loading\x20matches:',_0x4feb9c),_0x48bb9b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x4feb9c[_0x15f192(0x271)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x3a4451,_0x2824a3){const _0xf79646=a4_0x46e366;try{console[_0xf79646(0x39b)](_0xf79646(0x301)+_0x3a4451+'\x20from\x20'+_0x2824a3+'\x20ladder');const _0x14c0bb=auth[_0xf79646(0x276)];if(!_0x14c0bb){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x337cab=_0x2824a3==='D1'?'approvedMatches':_0x2824a3==='D2'?'approvedMatchesD2':_0xf79646(0x2b7);console[_0xf79646(0x39b)]('Using\x20collection:\x20'+_0x337cab),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x337cab,_0x3a4451)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully',_0xf79646(0x218));const _0xbc0ade=_0x2824a3['toLowerCase']();loadMatchesData(matchesPagination[_0xbc0ade]['page']);}catch(_0x55c904){console[_0xf79646(0x383)]('Error\x20deleting\x20match:',_0x55c904),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x55c904['message'],'error');}}function setupMatchesActionButtons(){const _0x15919c=a4_0x46e366;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x3e8b6f=>{_0x3e8b6f['addEventListener']('click',_0x4097ca=>{const _0x18c2ef=a4_0x168e;_0x4097ca[_0x18c2ef(0x330)](),_0x4097ca['stopPropagation']();const _0x50c568=_0x4097ca[_0x18c2ef(0x2f8)]['dataset']['id'],_0x3722e8=_0x4097ca[_0x18c2ef(0x2f8)]['closest']('tr'),_0x449519=_0x3722e8['dataset'][_0x18c2ef(0x291)];console['log']('Edit\x20match\x20clicked:',_0x50c568,_0x449519),openEditMatchModal(_0x50c568,_0x449519);});}),document[_0x15919c(0x3b8)]('.delete-match-btn')['forEach'](_0x2b1906=>{_0x2b1906['addEventListener']('click',_0x3fd7e9=>{const _0x3b1ec9=a4_0x168e;_0x3fd7e9[_0x3b1ec9(0x330)](),_0x3fd7e9['stopPropagation']();const _0xe5d2d4=_0x3fd7e9['currentTarget']['dataset']['id'],_0xda135=_0x3fd7e9['currentTarget']['closest']('tr'),_0x4a7b91=_0xda135[_0x3b1ec9(0x349)]['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0xe5d2d4,_0x4a7b91),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0xe5d2d4,_0x4a7b91);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x3d1fc5=a4_0x46e366,_0x22f3d2=document[_0x3d1fc5(0x3db)]('matches-search')['value']['toLowerCase'](),_0x28ee92=document['querySelectorAll']('#matches-table-body\x20tr');let _0x3ad1d5=0x0;_0x28ee92['forEach'](_0x4d7362=>{const _0x48fd76=_0x3d1fc5;if(_0x4d7362['classList']['contains'](_0x48fd76(0x1f8))||_0x4d7362['classList']['contains']('empty-state')||_0x4d7362[_0x48fd76(0x1c7)][_0x48fd76(0x2a0)]('error-state'))return;const _0x309eb7=_0x4d7362[_0x48fd76(0x22f)][0x1][_0x48fd76(0x263)][_0x48fd76(0x3ac)](),_0x1b75b8=_0x4d7362['cells'][0x2]['textContent']['toLowerCase'](),_0x3ab4b9=_0x4d7362[_0x48fd76(0x22f)][0x4]['textContent']['toLowerCase']();_0x309eb7[_0x48fd76(0x2b8)](_0x22f3d2)||_0x1b75b8[_0x48fd76(0x2b8)](_0x22f3d2)||_0x3ab4b9['includes'](_0x22f3d2)?(_0x4d7362['style'][_0x48fd76(0x34d)]='',_0x3ad1d5++):_0x4d7362[_0x48fd76(0x2c3)]['display']='none';});if(_0x3ad1d5===0x0&&_0x28ee92[_0x3d1fc5(0x347)]>0x0){const _0x510dcb=document['getElementById']('matches-table-body'),_0x94cf01=_0x510dcb['querySelector'](_0x3d1fc5(0x2e9));if(!_0x94cf01){const _0x2205d3=document[_0x3d1fc5(0x325)]('tr');_0x2205d3[_0x3d1fc5(0x38c)]='no-results',_0x2205d3[_0x3d1fc5(0x2b5)]='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x22f3d2+'\x27</td>',_0x510dcb['appendChild'](_0x2205d3);}}else{const _0x368a57=document['querySelector']('.no-results');_0x368a57&&_0x368a57['remove']();}}function getMatchesFilters(){const _0x51bfb1=a4_0x46e366,_0x35ecbe=document[_0x51bfb1(0x3db)]('matches-search')['value']['toLowerCase'](),_0x537171=document[_0x51bfb1(0x3db)]('matches-start-date')['value'],_0x29c5b4=document[_0x51bfb1(0x3db)]('matches-end-date')[_0x51bfb1(0x248)];let _0x4b51ef=null,_0x3073e1=null;return _0x537171&&(_0x4b51ef=new Date(_0x537171),_0x4b51ef['setHours'](0x0,0x0,0x0,0x0),_0x4b51ef=Timestamp['fromDate'](_0x4b51ef)),_0x29c5b4&&(_0x3073e1=new Date(_0x29c5b4),_0x3073e1['setHours'](0x17,0x3b,0x3b,0x3e7),_0x3073e1=Timestamp['fromDate'](_0x3073e1)),{'searchTerm':_0x35ecbe,'startDate':_0x4b51ef,'endDate':_0x3073e1};}async function applyMatchesFilters(){const _0x428e58=currentLadder['toLowerCase']();matchesPagination[_0x428e58]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x57b451=a4_0x46e366;document['getElementById']('matches-start-date')['value']='',document['getElementById']('matches-end-date')[_0x57b451(0x248)]='',document['getElementById']('matches-search')['value']='';const _0x40d0bd=currentLadder['toLowerCase']();matchesPagination[_0x40d0bd]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x309f40,_0x4350d1){const _0xe57aab=a4_0x46e366,_0x428dcd=document['getElementById']('edit-match-modal');if(!_0x428dcd)return;try{const _0x9d09df=_0x4350d1==='D1'?'approvedMatches':_0x4350d1==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x10d214=doc(db,_0x9d09df,_0x309f40),_0x1c0786=await getDoc(_0x10d214);if(!_0x1c0786['exists']()){showNotification(_0xe57aab(0x22b),_0xe57aab(0x383));return;}const _0xf16a31=_0x1c0786[_0xe57aab(0x21b)]();document['getElementById'](_0xe57aab(0x27e))[_0xe57aab(0x248)]=_0x309f40,document['getElementById']('edit-match-ladder')[_0xe57aab(0x248)]=_0x4350d1,document['getElementById']('edit-match-winner')[_0xe57aab(0x248)]=_0xf16a31['winnerUsername']||'',document[_0xe57aab(0x3db)]('edit-match-winner-score')[_0xe57aab(0x248)]=_0xf16a31['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0xf16a31['winnerSuicides']||0x0,document[_0xe57aab(0x3db)]('edit-match-winner-comment')['value']=_0xf16a31['winnerComment']||'',document[_0xe57aab(0x3db)]('edit-match-loser')['value']=_0xf16a31['loserUsername']||'',document[_0xe57aab(0x3db)]('edit-match-loser-score')['value']=_0xf16a31[_0xe57aab(0x1b7)]||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0xf16a31['loserSuicides']||0x0,document[_0xe57aab(0x3db)]('edit-match-loser-comment')['value']=_0xf16a31[_0xe57aab(0x326)]||'',document[_0xe57aab(0x3db)](_0xe57aab(0x348))['value']=_0xf16a31['mapPlayed']||'',document[_0xe57aab(0x3db)]('edit-match-winner-demo')['value']=_0xf16a31['winnerDemoLink']||'',document['getElementById'](_0xe57aab(0x361))['value']=_0xf16a31['loserDemoLink']||_0xf16a31['demoLink']||'',document[_0xe57aab(0x3db)]('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0xf16a31['winnerUsername']+_0xe57aab(0x1de)+_0xf16a31[_0xe57aab(0x2eb)],_0x428dcd['classList']['add']('active');}catch(_0x306086){console['error'](_0xe57aab(0x1e5),_0x306086),showNotification('Failed\x20to\x20load\x20match\x20data',_0xe57aab(0x383));}}function closeEditMatchModal(){const _0x1e890d=a4_0x46e366,_0x521afe=document[_0x1e890d(0x3db)]('edit-match-modal');_0x521afe&&_0x521afe['classList']['remove'](_0x1e890d(0x3dc));}async function saveEditedMatch(){const _0x55d73a=a4_0x46e366;try{const _0x4ed6cf=document['getElementById'](_0x55d73a(0x27e))['value'],_0x4fe3b6=document['getElementById']('edit-match-ladder')[_0x55d73a(0x248)];if(!_0x4ed6cf||!_0x4fe3b6){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x55d73a(0x383));return;}const _0xb22bab=_0x4fe3b6==='D1'?'approvedMatches':_0x4fe3b6==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1d9bbc=document['getElementById']('edit-match-winner')['value'][_0x55d73a(0x3c2)](),_0x1fbdb4=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x2a9555=parseInt(document[_0x55d73a(0x3db)]('edit-match-winner-suicides')[_0x55d73a(0x248)]),_0x1f8a77=document['getElementById']('edit-match-winner-comment')['value'][_0x55d73a(0x3c2)](),_0x2c5aac=document[_0x55d73a(0x3db)]('edit-match-loser')[_0x55d73a(0x248)]['trim'](),_0x10635b=parseInt(document['getElementById'](_0x55d73a(0x33c))[_0x55d73a(0x248)]),_0x13f8f7=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x4f90ec=document['getElementById']('edit-match-loser-comment')[_0x55d73a(0x248)]['trim'](),_0x198c26=document['getElementById']('edit-match-map')['value']['trim'](),_0x4df5be=document['getElementById'](_0x55d73a(0x3a5))['value']['trim'](),_0x29b9e7=document[_0x55d73a(0x3db)](_0x55d73a(0x361))['value'][_0x55d73a(0x3c2)]();if(!_0x1d9bbc||!_0x2c5aac){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0xb22bab,_0x4ed6cf),{'winnerUsername':_0x1d9bbc,'winnerScore':_0x1fbdb4,'winnerSuicides':_0x2a9555,'winnerComment':_0x1f8a77,'loserUsername':_0x2c5aac,'loserScore':_0x10635b,'loserSuicides':_0x13f8f7,'loserComment':_0x4f90ec,'mapPlayed':_0x198c26,'winnerDemoLink':_0x4df5be||null,'loserDemoLink':_0x29b9e7||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x4fe3b6['toLowerCase']()]['page']);}catch(_0x1747bf){console['error']('Error\x20saving\x20match:',_0x1747bf),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x1747bf[_0x55d73a(0x271)],'error');}}async function openDeleteMatchModal(_0x1334d6,_0x5ab399){const _0x159a38=a4_0x46e366;try{const _0x215395=_0x5ab399==='D1'?_0x159a38(0x216):_0x5ab399==='D2'?_0x159a38(0x244):'approvedMatchesD3',_0xc377cb=doc(db,_0x215395,_0x1334d6),_0x51147d=await getDoc(_0xc377cb);if(!_0x51147d['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x173682=_0x51147d['data'](),_0x231453=document['getElementById']('delete-match-confirm-modal');_0x231453['dataset'][_0x159a38(0x27f)]=_0x1334d6,_0x231453['dataset']['ladder']=_0x5ab399;const _0x4fa5f6=_0x173682['approvedAt']?new Date(_0x173682['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x4b412c=document['getElementById'](_0x159a38(0x1c0));_0x4b412c[_0x159a38(0x2b5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x4fa5f6+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x173682['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x173682['loserUsername']+_0x159a38(0x341)+(_0x173682['winnerScore']||0x0)+'\x20-\x20'+(_0x173682['loserScore']||0x0)+_0x159a38(0x297)+(_0x173682['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x5ab399+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x231453['classList']['add']('active');}catch(_0x5c1494){console[_0x159a38(0x383)]('Error\x20loading\x20match\x20for\x20deletion:',_0x5c1494),showNotification('Failed\x20to\x20load\x20match\x20data',_0x159a38(0x383));}}function closeDeleteMatchModal(){const _0x44b8e9=a4_0x46e366,_0xf43278=document['getElementById'](_0x44b8e9(0x372));_0xf43278&&(_0xf43278['classList']['remove']('active'),_0xf43278['removeAttribute']('data-match-id'),_0xf43278['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x19d5c4=a4_0x46e366,_0x4e5d2f=document['getElementById'](_0x19d5c4(0x372)),_0x32aa44=_0x4e5d2f['dataset'][_0x19d5c4(0x27f)],_0x1597f1=_0x4e5d2f[_0x19d5c4(0x349)][_0x19d5c4(0x291)];if(!_0x32aa44||!_0x1597f1){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x3eca9d=_0x1597f1==='D1'?'approvedMatches':_0x1597f1==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x3eca9d,_0x32aa44)),showNotification('Match\x20deleted\x20successfully',_0x19d5c4(0x218)),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x1597f1['toLowerCase']()][_0x19d5c4(0x3b3)]);}catch(_0x30274f){console['error']('Error\x20deleting\x20match:',_0x30274f),showNotification(_0x19d5c4(0x38e)+_0x30274f['message'],_0x19d5c4(0x383));}}async function saveHighlightChanges(){const _0x1b6080=a4_0x46e366,_0x172fe8=document['getElementById']('edit-highlight-id')[_0x1b6080(0x248)],_0x38cb4e=document['getElementById']('edit-highlight-type-select')['value'];let _0x18c8c3={'title':document[_0x1b6080(0x3db)]('edit-highlight-title-input')[_0x1b6080(0x248)][_0x1b6080(0x3c2)](),'type':_0x38cb4e,'description':document[_0x1b6080(0x3db)](_0x1b6080(0x339))['value']['trim'](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth[_0x1b6080(0x276)]['email']};if(_0x38cb4e===_0x1b6080(0x1c4)){_0x18c8c3[_0x1b6080(0x1b8)]=document['getElementById']('edit-highlight-matchInfo-input')[_0x1b6080(0x248)]['trim'](),_0x18c8c3['map']=document[_0x1b6080(0x3db)](_0x1b6080(0x254))[_0x1b6080(0x248)]['trim']();const _0xdc4deb=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x18c8c3[_0x1b6080(0x20e)]=_0xdc4deb?Timestamp['fromDate'](new Date(_0xdc4deb)):null,_0x18c8c3[_0x1b6080(0x385)]=document['getElementById'](_0x1b6080(0x3d3))['value']['trim'](),_0x18c8c3['winnerScore']=document[_0x1b6080(0x3db)]('edit-highlight-winnerScore-input')['value'][_0x1b6080(0x3c2)](),_0x18c8c3['loserName']=document['getElementById'](_0x1b6080(0x3dd))['value'][_0x1b6080(0x3c2)](),_0x18c8c3['loserScore']=document['getElementById'](_0x1b6080(0x2d7))['value'][_0x1b6080(0x3c2)](),_0x18c8c3[_0x1b6080(0x2ea)]=document['getElementById'](_0x1b6080(0x213))['value']['trim'](),_0x18c8c3['mapCreator']=null,_0x18c8c3['mapVersion']=null,_0x18c8c3['creatorImageUrl']=null,_0x18c8c3[_0x1b6080(0x1c8)]=null,_0x18c8c3['achievementType']=null,_0x18c8c3['achievementDetails']=null,_0x18c8c3['playerProfileUrl']=null;}else{if(_0x38cb4e==='creator')_0x18c8c3['map']=document['getElementById'](_0x1b6080(0x254))['value']['trim'](),_0x18c8c3[_0x1b6080(0x1cd)]=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x18c8c3['mapVersion']=document['getElementById'](_0x1b6080(0x374))['value'][_0x1b6080(0x3c2)](),_0x18c8c3['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')['value'][_0x1b6080(0x3c2)](),_0x18c8c3['matchInfo']=null,_0x18c8c3['matchDate']=null,_0x18c8c3['winnerName']=null,_0x18c8c3['winnerScore']=null,_0x18c8c3['loserName']=null,_0x18c8c3['loserScore']=null,_0x18c8c3['matchLink']=null,_0x18c8c3['achievementPlayer']=null,_0x18c8c3[_0x1b6080(0x289)]=null,_0x18c8c3['achievementDetails']=null,_0x18c8c3['playerProfileUrl']=null;else _0x38cb4e===_0x1b6080(0x251)&&(_0x18c8c3['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')[_0x1b6080(0x248)]['trim'](),_0x18c8c3['achievementType']=document[_0x1b6080(0x3db)](_0x1b6080(0x2fc))['value']['trim'](),_0x18c8c3['achievementDetails']=document[_0x1b6080(0x3db)]('edit-highlight-achievementDetails-input')['value'][_0x1b6080(0x3c2)](),_0x18c8c3['playerProfileUrl']=document['getElementById'](_0x1b6080(0x35d))['value'][_0x1b6080(0x3c2)](),_0x18c8c3[_0x1b6080(0x1b8)]=null,_0x18c8c3[_0x1b6080(0x2e5)]=null,_0x18c8c3['matchDate']=null,_0x18c8c3['winnerName']=null,_0x18c8c3['winnerScore']=null,_0x18c8c3['loserName']=null,_0x18c8c3['loserScore']=null,_0x18c8c3['matchLink']=null,_0x18c8c3[_0x1b6080(0x1cd)]=null,_0x18c8c3['mapVersion']=null,_0x18c8c3['creatorImageUrl']=null);}try{if(_0x172fe8){_0x18c8c3['updatedAt']=serverTimestamp();const _0x15a357=doc(db,'highlights',_0x172fe8);await updateDoc(_0x15a357,_0x18c8c3),showNotification(_0x1b6080(0x233),_0x1b6080(0x218));}else _0x18c8c3[_0x1b6080(0x344)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x18c8c3),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x1d1e72){console[_0x1b6080(0x383)]('Error\x20saving\x20highlight:',_0x1d1e72),showNotification(_0x1b6080(0x30a)+_0x1d1e72['message'],'error');}}async function resimulateMatch(){const _0x14b162=a4_0x46e366;try{const _0x227401=document[_0x14b162(0x3db)]('resimulate-match-id')['value'];if(!_0x227401){showNotification(_0x14b162(0x1fc),'error');return;}const _0x558b10=auth['currentUser'];if(!_0x558b10){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x402231=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x14b162(0x244):'approvedMatchesD3',_0x2ba5d8=doc(db,_0x402231,_0x227401),_0x4b8d91=await getDoc(_0x2ba5d8);if(!_0x4b8d91['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x593ff0=_0x4b8d91[_0x14b162(0x21b)](),_0x1c48fa=_0x593ff0['approvedAt']?_0x593ff0[_0x14b162(0x3ba)][_0x14b162(0x2bb)]()['toLocaleString']():_0x593ff0[_0x14b162(0x20e)]?_0x593ff0['matchDate']['toDate']?_0x593ff0['matchDate']['toDate']()['toLocaleString']():new Date(_0x593ff0[_0x14b162(0x20e)])['toLocaleString']():'Unknown',_0x394edb='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x593ff0['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x593ff0['loserUsername']+_0x14b162(0x2cb)+_0x593ff0['winnerScore']+'-'+_0x593ff0['loserScore']+_0x14b162(0x34a)+(_0x593ff0['mapPlayed']||_0x593ff0['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x1c48fa+_0x14b162(0x25f)+_0x227401+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x14b162(0x1db))[_0x14b162(0x2b5)]=_0x394edb,document[_0x14b162(0x3db)]('match-details-container')[_0x14b162(0x2c3)]['display']='block',document['getElementById']('confirm-resimulate-btn')[_0x14b162(0x2c3)]['display']=_0x14b162(0x1fa),window['pendingResimulateData']={'matchId':_0x227401,'matchData':_0x593ff0,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x12fa73){console[_0x14b162(0x383)]('Error\x20finding\x20match:',_0x12fa73),showNotification(_0x14b162(0x1c1)+_0x12fa73['message'],'error');}}async function confirmResimulateMatch(){const _0x129311=a4_0x46e366;try{const {matchId:_0xdecf1e,matchData:_0x33681f,ladder:_0x351a0d}=window['pendingResimulateData'];if(!_0xdecf1e||!_0x33681f){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0x129311(0x383));return;}const _0x99a90b=_0x351a0d==='D1'?'players':_0x351a0d==='D2'?'playersD2':_0x129311(0x269),_0x4b8fd4=_0x351a0d==='D1'?_0x129311(0x2af):_0x351a0d==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x49245a,_0x54770c]=await Promise[_0x129311(0x27b)]([getDocs(query(collection(db,_0x99a90b),where(_0x129311(0x1dc),'==',_0x33681f['winnerUsername']))),getDocs(query(collection(db,_0x99a90b),where('username','==',_0x33681f['loserUsername'])))]);if(_0x49245a['empty']||_0x54770c['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x4846da=_0x49245a['docs'][0x0]['id'],_0x1e658d=_0x54770c['docs'][0x0]['id'],_0x270caa=_0x49245a['docs'][0x0]['data'](),_0x12f129=_0x54770c['docs'][0x0]['data'](),[_0x312927,_0x5eb02f]=await Promise['all']([getDocs(query(collection(db,_0x4b8fd4),where('playerId','==',_0x4846da),where('matchId','==',_0xdecf1e))),getDocs(query(collection(db,_0x4b8fd4),where('playerId','==',_0x1e658d),where('matchId','==',_0xdecf1e)))]),_0x393c9d=!_0x312927[_0x129311(0x381)],_0x4d684b=!_0x5eb02f['empty'],_0xbaeccd='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x393c9d?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x4d684b?_0x129311(0x364):_0x129311(0x1f4))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x270caa['eloRating']||_0x129311(0x27a))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x12f129['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x270caa['position']||'Unknown')+_0x129311(0x376)+(_0x12f129[_0x129311(0x285)]||'Unknown')+_0x129311(0x26b);document['getElementById']('validation-results-container')['innerHTML']=_0xbaeccd,document['getElementById'](_0x129311(0x2a2))[_0x129311(0x2c3)]['display']='block';if(_0x393c9d&&_0x4d684b){showNotification(_0x129311(0x20c),_0x129311(0x2c5));return;}showNotification(_0x129311(0x1e0),_0x129311(0x2d9));const _0x38a611=_0x33681f['approvedAt']||_0x33681f[_0x129311(0x20e)]||serverTimestamp(),[_0x484c04,_0x8c4efb]=await Promise['all']([getPlayerEloAtTime(_0x4846da,_0x38a611,_0x4b8fd4),getPlayerEloAtTime(_0x1e658d,_0x38a611,_0x4b8fd4)]),{calculateElo:_0x491e91}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x4b5478,newLoserRating:_0x225749}=_0x491e91(_0x484c04,_0x8c4efb),_0x473123=_0x270caa[_0x129311(0x285)]||Number['MAX_SAFE_INTEGER'],_0x4cf69e=_0x12f129['position']||Number['MAX_SAFE_INTEGER'];let _0x51da3d=_0x473123,_0x399086=_0x4cf69e;_0x473123>_0x4cf69e&&(_0x51da3d=_0x4cf69e,_0x399086=_0x4cf69e+0x1);const _0x2f37f1=writeBatch(db),_0x4193ce=doc(db,_0x99a90b,_0x4846da);_0x2f37f1[_0x129311(0x2ce)](_0x4193ce,{'eloRating':_0x4b5478,'position':_0x51da3d,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x4c7d28=doc(db,_0x99a90b,_0x1e658d);_0x2f37f1['update'](_0x4c7d28,{'eloRating':_0x225749,'position':_0x399086,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x473123>_0x4cf69e){const _0x49452a=await getDocs(query(collection(db,_0x99a90b),where(_0x129311(0x285),'>',_0x4cf69e),where('position','<',_0x473123)));_0x49452a['forEach'](_0x442b10=>{const _0x3a0b77=doc(db,_0x99a90b,_0x442b10['id']),_0x307cbb=_0x442b10['data']()['position'];_0x2f37f1['update'](_0x3a0b77,{'position':_0x307cbb+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x393c9d){const _0x153a57=doc(collection(db,_0x4b8fd4));_0x2f37f1['set'](_0x153a57,{'playerId':_0x4846da,'player':_0x33681f['winnerUsername'],'previousElo':_0x484c04,'newElo':_0x4b5478,'eloChange':_0x4b5478-_0x484c04,'opponentId':_0x1e658d,'opponent':_0x33681f['loserUsername'],'matchResult':'win','previousPosition':_0x473123,'newPosition':_0x51da3d,'positionChange':_0x51da3d-_0x473123,'matchId':_0xdecf1e,'timestamp':_0x38a611,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x129311(0x276)]['uid'],'gameMode':_0x351a0d,'matchScore':_0x33681f['winnerScore']+'-'+_0x33681f['loserScore'],'mapPlayed':_0x33681f[_0x129311(0x20f)]||_0x33681f['mapName']||_0x129311(0x27a),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x4d684b){const _0x3cbeb4=doc(collection(db,_0x4b8fd4));_0x2f37f1['set'](_0x3cbeb4,{'playerId':_0x1e658d,'player':_0x33681f['loserUsername'],'previousElo':_0x8c4efb,'newElo':_0x225749,'eloChange':_0x225749-_0x8c4efb,'opponentId':_0x4846da,'opponent':_0x33681f[_0x129311(0x2e1)],'matchResult':'loss','previousPosition':_0x4cf69e,'newPosition':_0x399086,'positionChange':_0x399086-_0x4cf69e,'matchId':_0xdecf1e,'timestamp':_0x38a611,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x351a0d,'matchScore':_0x33681f['winnerScore']+'-'+_0x33681f['loserScore'],'mapPlayed':_0x33681f['mapPlayed']||_0x33681f['mapName']||_0x129311(0x27a),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x41fa66=_0x351a0d==='D1'?'approvedMatches':_0x351a0d==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x4c46e6=doc(db,_0x41fa66,_0xdecf1e);_0x2f37f1[_0x129311(0x2ce)](_0x4c46e6,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x270caa[_0x129311(0x39e)],'originalLoserElo':_0x12f129[_0x129311(0x39e)],'originalWinnerPosition':_0x473123,'originalLoserPosition':_0x4cf69e,'resimulatedWinnerElo':_0x4b5478,'resimulatedLoserElo':_0x225749,'resimulatedWinnerPosition':_0x51da3d,'resimulatedLoserPosition':_0x399086}),await _0x2f37f1['commit']();const _0x1e46b9=(!_0x393c9d?0x1:0x0)+(!_0x4d684b?0x1:0x0),_0x5bef48=_0x473123!==_0x51da3d||_0x4cf69e!==_0x399086;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x1e46b9+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x484c04+''+_0x4b5478+'\x20(+'+(_0x4b5478-_0x484c04)+_0x129311(0x36e))+('Loser\x20'+_0x8c4efb+''+_0x225749+'\x20('+(_0x225749-_0x8c4efb)+_0x129311(0x3b9))+(''+(_0x5bef48?'Positions\x20updated:\x20Winner\x20'+_0x473123+''+_0x51da3d+',\x20Loser\x20'+_0x4cf69e+''+_0x399086:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x237dab){console['error']('Error\x20resimulating\x20match:',_0x237dab),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x237dab['message'],'error');}}async function getPlayerEloAtTime(_0x3dc5cb,_0xfb90bd,_0x438930){const _0x4ed8f5=a4_0x46e366;try{const _0x4bdb21=_0xfb90bd['toDate']?_0xfb90bd['toDate']():new Date(_0xfb90bd),_0x137b3b=query(collection(db,_0x438930),where(_0x4ed8f5(0x24d),'==',_0x3dc5cb),where(_0x4ed8f5(0x231),'<',_0xfb90bd),orderBy('timestamp','desc'),limit(0x1)),_0x42a186=await getDocs(_0x137b3b);if(!_0x42a186['empty']){const _0x580357=_0x42a186[_0x4ed8f5(0x1ee)][0x0][_0x4ed8f5(0x21b)]();return console['log'](_0x4ed8f5(0x1e8)+_0x3dc5cb+'\x20before\x20match:\x20'+_0x580357['newElo']),_0x580357[_0x4ed8f5(0x2e7)];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x3dc5cb+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x5d0652){return console['error'](_0x4ed8f5(0x396)+_0x3dc5cb+':',_0x5d0652),0x4b0;}}function openResimulateModal(){const _0x34013f=a4_0x46e366;console['log']('openResimulateModal\x20called!');const _0x716138=document['getElementById']('resimulate-modal');console['log'](_0x34013f(0x362),_0x716138);if(!_0x716138){console['error']('Modal\x20element\x20not\x20found!');return;}_0x716138[_0x34013f(0x2c3)][_0x34013f(0x34d)]=_0x34013f(0x1fa),_0x716138['style']['visibility']='visible',_0x716138['style']['opacity']='1',_0x716138['classList'][_0x34013f(0x1b5)]('active'),console['log'](_0x34013f(0x284)),console[_0x34013f(0x39b)]('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x716138)[_0x34013f(0x34d)]);const _0x244b14=document['getElementById']('match-details-container'),_0x31bc5b=document['getElementById'](_0x34013f(0x2a2)),_0x2b5004=document['getElementById']('confirm-resimulate-btn'),_0x26485f=document['getElementById']('resimulate-match-id');if(_0x244b14)_0x244b14['innerHTML']='';if(_0x31bc5b)_0x31bc5b['innerHTML']='';if(_0x2b5004)_0x2b5004['style']['display']=_0x34013f(0x3ad);if(_0x26485f)_0x26485f[_0x34013f(0x248)]='';console[_0x34013f(0x39b)]('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x1183ab=a4_0x46e366;document['getElementById'](_0x1183ab(0x3af))['style'][_0x1183ab(0x34d)]='none',window[_0x1183ab(0x238)]=null;}window[a4_0x46e366(0x242)]=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window[a4_0x46e366(0x1dd)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x55c06d=a4_0x46e366;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x5d1d04){console['error']('Error\x20loading\x20points\x20data:',_0x5d1d04),showNotification(_0x55c06d(0x31f)+_0x5d1d04['message'],'error');}}function renderPointsOverview(_0xe776ea){const _0x2a2670=a4_0x46e366,_0x31dfe3=document[_0x2a2670(0x3db)]('points-overview-table-body');if(!_0x31dfe3)return;if(_0xe776ea['length']===0x0){_0x31dfe3['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x31dfe3['innerHTML']='',_0xe776ea['forEach'](_0x20dc69=>{const _0x136aa7=_0x2a2670,_0x147507=document['createElement']('tr'),_0x4775c8=_0x20dc69['displayName']||_0x20dc69['username']||'Unknown\x20User',_0x858e90=_0x20dc69['email']||_0x136aa7(0x1f3),_0x5bd7d6=_0x20dc69['points']||0x0,_0x47bb07=_0x20dc69[_0x136aa7(0x392)]?new Date(_0x20dc69[_0x136aa7(0x392)]['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x147507[_0x136aa7(0x2b5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x4775c8+_0x136aa7(0x2a5)+_0x858e90+_0x136aa7(0x369)+(_0x5bd7d6>0x3e8?'high-points':_0x5bd7d6>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x5bd7d6['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x47bb07+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x20dc69['id']+_0x136aa7(0x3c4)+_0x20dc69['id']+_0x136aa7(0x30f),_0x31dfe3[_0x136aa7(0x2a6)](_0x147507);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x46e59d=a4_0x46e366;console['log'](_0x46e59d(0x25d));const _0x2d2f33=document['querySelectorAll']('.quick-edit-btn');console['log']('Found\x20'+_0x2d2f33[_0x46e59d(0x347)]+_0x46e59d(0x2fa)),_0x2d2f33['forEach'](_0x42267e=>{const _0x1b31bb=_0x42267e['cloneNode'](!![]);_0x42267e['parentNode']['replaceChild'](_0x1b31bb,_0x42267e);});const _0xe17a1c=document[_0x46e59d(0x3b8)]('.view-history-btn');console['log'](_0x46e59d(0x261)+_0xe17a1c[_0x46e59d(0x347)]+'\x20view\x20history\x20buttons'),_0xe17a1c[_0x46e59d(0x2e2)](_0x2627b3=>{const _0x2712c5=_0x46e59d,_0x5782a4=_0x2627b3[_0x2712c5(0x262)](!![]);_0x2627b3['parentNode']['replaceChild'](_0x5782a4,_0x2627b3);}),document['querySelectorAll']('.quick-edit-btn')[_0x46e59d(0x2e2)](_0xfaaa2d=>{const _0x54ef9d=_0x46e59d;_0xfaaa2d[_0x54ef9d(0x257)]('click',function(_0x159a00){const _0x2cf78c=_0x54ef9d;_0x159a00['preventDefault'](),_0x159a00['stopPropagation']();const _0x100e3f=this['dataset']['userId'];console[_0x2cf78c(0x39b)]('Quick\x20edit\x20clicked\x20for\x20user:',_0x100e3f);if(!_0x100e3f){console[_0x2cf78c(0x383)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x2cf78c(0x2c3)]['opacity']=_0x2cf78c(0x203),setTimeout(()=>{const _0xb94b13=_0x2cf78c;this[_0xb94b13(0x2c3)][_0xb94b13(0x1b4)]='1';},0xc8),openQuickEditModal(_0x100e3f);});}),document['querySelectorAll'](_0x46e59d(0x33e))['forEach'](_0x4e0e07=>{_0x4e0e07['addEventListener']('click',function(_0x1bdb19){const _0x13bbde=a4_0x168e;_0x1bdb19[_0x13bbde(0x330)](),_0x1bdb19['stopPropagation']();const _0x455fe9=this['dataset']['userId'];console['log'](_0x13bbde(0x245),_0x455fe9);if(!_0x455fe9){console[_0x13bbde(0x383)](_0x13bbde(0x235));return;}this[_0x13bbde(0x2c3)]['opacity']='0.6',setTimeout(()=>{const _0x41ce9e=_0x13bbde;this[_0x41ce9e(0x2c3)]['opacity']='1';},0xc8),loadUserPointsHistory(_0x455fe9);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x17c260){const _0x41b0ad=a4_0x46e366;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x17c260);const _0x520852=document[_0x41b0ad(0x3db)]('quick-edit-points-modal');if(!_0x520852){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...','info');const _0x1cc5c7=doc(db,'userProfiles',_0x17c260),_0x15dcae=await getDoc(_0x1cc5c7);if(!_0x15dcae['exists']()){showNotification(_0x41b0ad(0x375),'error');return;}const _0x4b505c=_0x15dcae[_0x41b0ad(0x21b)]();console['log']('User\x20data\x20loaded:',_0x4b505c);const _0x2f1ca0=document['getElementById']('quick-edit-user-id'),_0x5364d5=document['getElementById']('quick-edit-display-name'),_0x26b4cb=document['getElementById']('quick-edit-email'),_0x190e80=document['getElementById']('quick-edit-current-points'),_0xf7f698=document[_0x41b0ad(0x3db)](_0x41b0ad(0x292));if(!_0x2f1ca0||!_0x5364d5||!_0x26b4cb||!_0x190e80||!_0xf7f698){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.',_0x41b0ad(0x383));return;}_0x2f1ca0[_0x41b0ad(0x248)]=_0x17c260,_0x5364d5['textContent']=_0x4b505c['displayName']||_0x4b505c['username']||'Unknown\x20User',_0x26b4cb[_0x41b0ad(0x263)]=_0x4b505c[_0x41b0ad(0x214)]||_0x41b0ad(0x1f3),_0x190e80['textContent']=(_0x4b505c['points']||0x0)['toLocaleString'](),_0xf7f698[_0x41b0ad(0x366)]();const _0x4bd3c7=document['getElementById']('quick-add');_0x4bd3c7&&(_0x4bd3c7['checked']=!![]);_0x520852['classList'][_0x41b0ad(0x1b5)]('active'),console[_0x41b0ad(0x39b)](_0x41b0ad(0x2f9));const _0x3d2bc3=document[_0x41b0ad(0x3db)](_0x41b0ad(0x3d7));_0x3d2bc3&&setTimeout(()=>_0x3d2bc3['focus'](),0x64);}catch(_0x2e40a1){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x2e40a1),showNotification(_0x41b0ad(0x397)+_0x2e40a1[_0x41b0ad(0x271)],_0x41b0ad(0x383));}}function closeQuickEditModal(){const _0x122ec4=a4_0x46e366,_0x537c9e=document[_0x122ec4(0x3db)]('quick-edit-points-modal');_0x537c9e&&_0x537c9e['classList']['remove'](_0x122ec4(0x3dc));}function a4_0x168e(_0x1a3c0b,_0x14d9ae){const _0x1e2435=a4_0x1da6();return a4_0x168e=function(_0x190966,_0x27f3db){_0x190966=_0x190966-0x1b3;let _0x1da667=_0x1e2435[_0x190966];return _0x1da667;},a4_0x168e(_0x1a3c0b,_0x14d9ae);}async function handleQuickEditPoints(_0x12816b){const _0x2a652f=a4_0x46e366;_0x12816b['preventDefault']();const _0x16d72d=document['getElementById']('quick-edit-user-id')['value'],_0x27f803=document['querySelector']('input[name=\x22quick-action\x22]:checked')[_0x2a652f(0x248)],_0x4c2ee0=parseInt(document['getElementById'](_0x2a652f(0x3d7))['value']),_0x283c25=document['getElementById']('quick-points-reason')['value'][_0x2a652f(0x3c2)]();console['log']('Processing\x20points\x20edit:',{'userId':_0x16d72d,'action':_0x27f803,'amount':_0x4c2ee0,'reason':_0x283c25});if(!_0x16d72d||!_0x4c2ee0||_0x4c2ee0<0x0){showNotification(_0x2a652f(0x3c3),'error');return;}try{await modifyUserPoints(_0x16d72d,_0x27f803,_0x4c2ee0,_0x283c25),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully',_0x2a652f(0x218)),console['log'](_0x2a652f(0x31d),_0x16d72d);}catch(_0x329be1){console[_0x2a652f(0x383)]('Error\x20updating\x20points:',_0x329be1),showNotification(_0x2a652f(0x1d7)+_0x329be1['message'],'error');}}async function searchUsersForPoints(){const _0xef9e72=a4_0x46e366,_0xb4c3c6=document['getElementById'](_0xef9e72(0x395))['value']['trim']()['toLowerCase'](),_0x11abaa=document[_0xef9e72(0x3db)]('user-search-results');if(!_0xb4c3c6||_0xb4c3c6['length']<0x2){_0x11abaa['innerHTML']='';return;}_0x11abaa['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x5a89dc=collection(db,'userProfiles'),_0x420039=await getDocs(_0x5a89dc),_0x4b51d4=[];_0x420039['forEach'](_0x256d69=>{const _0x54a8fb=_0xef9e72,_0x4bdd8b=_0x256d69[_0x54a8fb(0x21b)](),_0x4e1ab0=(_0x4bdd8b['displayName']||_0x4bdd8b['username']||'')[_0x54a8fb(0x3ac)](),_0x1bbe76=(_0x4bdd8b[_0x54a8fb(0x214)]||'')[_0x54a8fb(0x3ac)]();(_0x4e1ab0['includes'](_0xb4c3c6)||_0x1bbe76[_0x54a8fb(0x2b8)](_0xb4c3c6))&&_0x4b51d4[_0x54a8fb(0x25c)]({'id':_0x256d69['id'],..._0x4bdd8b});});if(_0x4b51d4[_0xef9e72(0x347)]===0x0){_0x11abaa['innerHTML']=_0xef9e72(0x384);return;}_0x11abaa['innerHTML']='',_0x4b51d4['forEach'](_0x362705=>{const _0x353b0e=_0xef9e72,_0x3da53a=document['createElement'](_0x353b0e(0x356));_0x3da53a[_0x353b0e(0x38c)]='search-result-item',_0x3da53a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x362705['displayName']||_0x362705['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x362705['email']||_0x353b0e(0x1f3))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x362705['points']||0x0)[_0x353b0e(0x2c0)]()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3da53a[_0x353b0e(0x257)]('click',()=>selectUserForPoints(_0x362705)),_0x11abaa['appendChild'](_0x3da53a);});}catch(_0x26acb3){console['error']('Error\x20searching\x20users:',_0x26acb3),_0x11abaa[_0xef9e72(0x2b5)]='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x547920){const _0x511181=a4_0x46e366;document['getElementById']('selected-user-name')[_0x511181(0x263)]=_0x547920['displayName']||_0x547920['username']||'Unknown\x20User',document['getElementById']('selected-user-points')['textContent']=(_0x547920['points']||0x0)[_0x511181(0x2c0)](),document['getElementById'](_0x511181(0x26a))[_0x511181(0x248)]=_0x547920['id'],document[_0x511181(0x3db)]('selected-user-info')[_0x511181(0x2c3)][_0x511181(0x34d)]=_0x511181(0x1fa),document['getElementById'](_0x511181(0x219))['style']['display']='block',document['getElementById']('user-search-results')['innerHTML']='',document[_0x511181(0x3db)]('points-user-search')[_0x511181(0x248)]='';}async function handleModifyPoints(_0xfc3eee){const _0x281e8d=a4_0x46e366;_0xfc3eee['preventDefault']();const _0x382d65=document['getElementById'](_0x281e8d(0x26a))[_0x281e8d(0x248)],_0x5cec81=document['getElementById']('points-action')['value'],_0x786da5=parseInt(document['getElementById']('points-amount')['value']),_0x471880=document[_0x281e8d(0x3db)](_0x281e8d(0x3c8))['value']['trim']();if(!_0x382d65||!_0x786da5||_0x786da5<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x382d65,_0x5cec81,_0x786da5,_0x471880),document['getElementById']('modify-points-form')[_0x281e8d(0x366)]();const _0x137357=doc(db,'userProfiles',_0x382d65),_0x7c2629=await getDoc(_0x137357);if(_0x7c2629['exists']()){const _0x2e1837=_0x7c2629[_0x281e8d(0x21b)]();document['getElementById']('selected-user-points')['textContent']=(_0x2e1837['points']||0x0)[_0x281e8d(0x2c0)]();}showNotification(_0x281e8d(0x3e3),'success'),loadPointsHistory();}catch(_0x515491){console['error']('Error\x20modifying\x20points:',_0x515491),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x515491[_0x281e8d(0x271)],'error');}}async function loadPointsHistory(){const _0x1b062a=a4_0x46e366,_0x188507=document[_0x1b062a(0x3db)]('points-history-table-body');if(!_0x188507)return;_0x188507['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x5c3ff2=collection(db,_0x1b062a(0x34f)),_0x2ee249=query(_0x5c3ff2,orderBy(_0x1b062a(0x231),'desc'),limit(0x32)),_0x3ffeee=await getDocs(_0x2ee249);if(_0x3ffeee['empty']){_0x188507[_0x1b062a(0x2b5)]=_0x1b062a(0x324);return;}_0x188507['innerHTML']='',_0x3ffeee['forEach'](_0x1be595=>{const _0x22b5e2=_0x1b062a,_0x504a5c=_0x1be595['data'](),_0x14a616=document['createElement']('tr'),_0x5c0b73=_0x504a5c['timestamp']?new Date(_0x504a5c['timestamp']['seconds']*0x3e8)[_0x22b5e2(0x2c0)]():'Unknown';let _0x9dc4f9='';switch(_0x504a5c['action']){case'add':_0x9dc4f9=_0x22b5e2(0x2ec)+_0x504a5c['amount']+_0x22b5e2(0x31e);break;case'subtract':_0x9dc4f9=_0x22b5e2(0x371)+_0x504a5c[_0x22b5e2(0x3ce)]+'\x20points';break;case'set':_0x9dc4f9=_0x22b5e2(0x1da)+_0x504a5c['amount']+'\x20points';break;default:_0x9dc4f9=_0x504a5c['action']+'\x20'+_0x504a5c['amount']+_0x22b5e2(0x31e);}_0x14a616[_0x22b5e2(0x2b5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5c0b73+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x504a5c['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x9dc4f9+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x504a5c[_0x22b5e2(0x2aa)]+_0x22b5e2(0x2b1)+(_0x504a5c['previousPoints']||0x0)+'\x20\x20'+(_0x504a5c['newPoints']||0x0)+_0x22b5e2(0x298)+(_0x504a5c['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x504a5c[_0x22b5e2(0x211)]||_0x22b5e2(0x252))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x188507[_0x22b5e2(0x2a6)](_0x14a616);});}catch(_0x914669){console['error'](_0x1b062a(0x314),_0x914669),_0x188507[_0x1b062a(0x2b5)]='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x914669['message']+'</td></tr>';}}function filterPointsOverview(){const _0x3f714d=a4_0x46e366,_0x24be47=document['getElementById']('points-overview-search')['value']['toLowerCase']();if(!window[_0x3f714d(0x2dd)])return;const _0x3c67cf=window[_0x3f714d(0x2dd)][_0x3f714d(0x287)](_0x546090=>{const _0x5b2930=_0x3f714d,_0x1222bb=(_0x546090['displayName']||_0x546090[_0x5b2930(0x1dc)]||'')[_0x5b2930(0x3ac)](),_0x54b316=(_0x546090[_0x5b2930(0x214)]||'')['toLowerCase']();return _0x1222bb['includes'](_0x24be47)||_0x54b316['includes'](_0x24be47);});renderPointsOverview(_0x3c67cf);}function sortPointsOverview(){const _0x51254e=a4_0x46e366,_0xb7a8ca=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x1b1aac=[...window[_0x51254e(0x2dd)]];switch(_0xb7a8ca){case'points-desc':_0x1b1aac[_0x51254e(0x1b6)]((_0x5ea637,_0x30eaa9)=>(_0x30eaa9['points']||0x0)-(_0x5ea637['points']||0x0));break;case'points-asc':_0x1b1aac[_0x51254e(0x1b6)]((_0x5713e8,_0x3d1e0f)=>(_0x5713e8[_0x51254e(0x3a2)]||0x0)-(_0x3d1e0f['points']||0x0));break;case _0x51254e(0x39f):_0x1b1aac[_0x51254e(0x1b6)]((_0x50d25d,_0x399472)=>{const _0x399bf4=_0x51254e,_0x914d1c=(_0x50d25d[_0x399bf4(0x3a0)]||_0x50d25d['username']||'')['toLowerCase'](),_0x1ac472=(_0x399472['displayName']||_0x399472['username']||'')[_0x399bf4(0x3ac)]();return _0x914d1c['localeCompare'](_0x1ac472);});break;case'name-desc':_0x1b1aac['sort']((_0x2ff576,_0x405002)=>{const _0x388b22=(_0x2ff576['displayName']||_0x2ff576['username']||'')['toLowerCase'](),_0x5b795a=(_0x405002['displayName']||_0x405002['username']||'')['toLowerCase']();return _0x5b795a['localeCompare'](_0x388b22);});break;}renderPointsOverview(_0x1b1aac);}async function handleAwardItem(_0x3ba7da){const _0x3aaeab=a4_0x46e366;_0x3ba7da[_0x3aaeab(0x330)]();const _0x727932=document['getElementById']('selected-user-id')['value'],_0x3ad470=document[_0x3aaeab(0x3db)](_0x3aaeab(0x223))['value'],_0x5a0d0b=document['getElementById']('award-reason')['value'][_0x3aaeab(0x3c2)]();if(!_0x727932||!_0x3ad470){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document[_0x3aaeab(0x3db)]('award-item-form')['reset']();}catch(_0x2b6875){console['error']('Error\x20awarding\x20item:',_0x2b6875),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x2b6875['message'],'error');}}async function loadUserPointsHistory(_0x367348){const _0x56da0d=a4_0x46e366;try{const _0x45ee58=collection(db,'pointsHistory'),_0x1fb5a9=query(_0x45ee58,where('userId','==',_0x367348),orderBy(_0x56da0d(0x231),'desc')),_0x46a9f5=await getDocs(_0x1fb5a9);console['log']('Found\x20'+_0x46a9f5['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x367348),showNotification(_0x56da0d(0x1eb)+_0x46a9f5['size']+'\x20points\x20history\x20entries','info');}catch(_0x24aaf5){console[_0x56da0d(0x383)]('Error\x20loading\x20user\x20points\x20history:',_0x24aaf5),showNotification(_0x56da0d(0x282),'error');}}async function initializeUserPointsField(){const _0x59adcd=a4_0x46e366;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x274795=collection(db,'userProfiles'),_0x5591ac=await getDocs(_0x274795);if(_0x5591ac['empty']){console[_0x59adcd(0x39b)](_0x59adcd(0x313));return;}let _0x8ed053=0x0,_0x1197ac=0x0;const _0x4edfa0=writeBatch(db);let _0x345da8=0x0;return console['log'](_0x59adcd(0x261)+_0x5591ac['size']+_0x59adcd(0x1ff)),_0x5591ac[_0x59adcd(0x2e2)](_0xc57ff5=>{const _0x717f94=_0x59adcd,_0x2f2dca=_0xc57ff5[_0x717f94(0x21b)]();_0x2f2dca['points']===undefined||_0x2f2dca['points']===null?(_0x4edfa0['update'](_0xc57ff5['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x8ed053++,_0x345da8++,console['log']('Queued\x20'+(_0x2f2dca['displayName']||_0x2f2dca[_0x717f94(0x1dc)]||_0x2f2dca['email']||_0x717f94(0x27a))+'\x20for\x20points\x20initialization')):(_0x1197ac++,console[_0x717f94(0x39b)]((_0x2f2dca['displayName']||_0x2f2dca[_0x717f94(0x1dc)]||_0x2f2dca['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x2f2dca['points'])),_0x345da8>=0x1f4&&console[_0x717f94(0x360)]('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x8ed053>0x0?(console['log'](_0x59adcd(0x24b)+_0x8ed053+_0x59adcd(0x2f6)),await _0x4edfa0['commit'](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x8ed053+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x5591ac[_0x59adcd(0x3d5)]+_0x59adcd(0x3d8)+_0x8ed053+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x1197ac),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x8ed053+'\x20users.\x20'+_0x1197ac+'\x20users\x20already\x20had\x20points.','success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x5591ac['size'],'usersUpdated':_0x8ed053,'usersAlreadyHadPoints':_0x1197ac};}catch(_0x270506){console['error']('Error\x20initializing\x20points\x20field:',_0x270506),showNotification('Error\x20initializing\x20points:\x20'+_0x270506[_0x59adcd(0x271)],_0x59adcd(0x383));throw _0x270506;}}function addPointsMigrationButton(){const _0x572774=a4_0x46e366,_0x50fecb=document['getElementById']('manage-points');if(!_0x50fecb)return;if(document[_0x572774(0x3db)]('migrate-points-btn'))return;const _0x335ffb=document['createElement'](_0x572774(0x356));_0x335ffb['className']=_0x572774(0x355),_0x335ffb['style']['marginBottom']=_0x572774(0x1e2),_0x335ffb[_0x572774(0x2c3)]['padding']='15px',_0x335ffb['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x335ffb['style']['border']=_0x572774(0x3df),_0x335ffb['style'][_0x572774(0x2d0)]='5px',_0x335ffb['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x3be1de=_0x50fecb['querySelector']('.section-header');_0x3be1de&&_0x3be1de['insertAdjacentElement']('afterend',_0x335ffb),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x422a46=_0x572774;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x422a46(0x2b5)]=_0x422a46(0x1e7),this['style']['backgroundColor']='#28a745',setTimeout(()=>{_0x335ffb['style']['display']='none';},0xbb8);}catch(_0x438e5d){this[_0x422a46(0x2b5)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x422a46(0x320)]=![];}}});}function setupManagePointsSection(){const _0xb761a0=a4_0x46e366;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x2bc150=document[_0xb761a0(0x3db)]('points-user-search');_0x2bc150&&_0x2bc150['addEventListener'](_0xb761a0(0x1c9),debounce(searchUsersForPoints,0x12c));const _0xe8aa0a=document['getElementById']('modify-points-form');_0xe8aa0a&&_0xe8aa0a['addEventListener']('submit',handleModifyPoints);const _0x3eca43=document[_0xb761a0(0x3db)](_0xb761a0(0x32f));_0x3eca43&&_0x3eca43['addEventListener']('submit',handleAwardItem);const _0x5bfb2f=document['getElementById'](_0xb761a0(0x3b4));_0x5bfb2f&&_0x5bfb2f['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x368257=document[_0xb761a0(0x3db)]('points-sort-order');_0x368257&&_0x368257['addEventListener'](_0xb761a0(0x220),sortPointsOverview);const _0x5bc9f1=document['getElementById']('refresh-points-overview');_0x5bc9f1&&_0x5bc9f1['addEventListener']('click',loadPointsOverview);const _0x2bb046=document['getElementById']('quick-edit-points-modal');if(_0x2bb046){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x45d1b6=_0x2bb046[_0xb761a0(0x1f0)]('.close-btn');_0x45d1b6?_0x45d1b6['addEventListener']('click',function(){const _0xe0caae=_0xb761a0;console[_0xe0caae(0x39b)](_0xe0caae(0x1ed)),closeQuickEditModal();}):console[_0xb761a0(0x360)]('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x5159dd=document['getElementById'](_0xb761a0(0x3a1));_0x5159dd?_0x5159dd['addEventListener']('click',function(){const _0x55f1f1=_0xb761a0;console[_0x55f1f1(0x39b)]('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x674f78=document['getElementById']('quick-edit-points-form');_0x674f78?_0x674f78['addEventListener'](_0xb761a0(0x3ab),function(_0x29e266){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x29e266);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x2bb046['addEventListener'](_0xb761a0(0x351),function(_0x58fc64){_0x58fc64['target']===_0x2bb046&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x2ba239=a4_0x46e366;console['log'](_0x2ba239(0x1fb));const _0x48350d=document['getElementById']('ribbon-user-search');_0x48350d&&_0x48350d['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x44dc2e=document[_0x2ba239(0x3db)]('search-ribbon-user-btn');_0x44dc2e&&_0x44dc2e[_0x2ba239(0x257)](_0x2ba239(0x351),searchRibbonUser);const _0x495182=document['getElementById'](_0x2ba239(0x2de));_0x495182&&_0x495182['addEventListener']('submit',addRibbon),_0x48350d&&_0x48350d['addEventListener']('keypress',function(_0x245840){_0x245840['key']==='Enter'&&(_0x245840['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x5df83a,_0x2b38fd,_0x47ba9f,_0x5ee720=''){const _0x5180be=a4_0x46e366,_0x28efdb=doc(db,'userProfiles',_0x5df83a),_0x5077c4=await getDoc(_0x28efdb);if(!_0x5077c4['exists']())throw new Error('User\x20not\x20found');const _0x24a010=_0x5077c4['data'](),_0x30efb8=_0x24a010['points']!==undefined?_0x24a010['points']:0x0;_0x24a010['points']===undefined&&(console['log'](_0x5180be(0x382)+(_0x24a010['displayName']||_0x24a010['email']||'Unknown')),await updateDoc(_0x28efdb,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x53925f=_0x30efb8;switch(_0x2b38fd){case'add':_0x53925f=_0x30efb8+_0x47ba9f;break;case _0x5180be(0x2a9):_0x53925f=Math['max'](0x0,_0x30efb8-_0x47ba9f);break;case'set':_0x53925f=_0x47ba9f;break;default:throw new Error(_0x5180be(0x2c7));}await updateDoc(_0x28efdb,{'points':_0x53925f,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x5df83a,'userEmail':_0x24a010[_0x5180be(0x214)]||_0x5180be(0x321),'displayName':_0x24a010['displayName']||_0x24a010['username']||_0x5180be(0x37f),'action':_0x2b38fd,'amount':_0x47ba9f,'previousPoints':_0x30efb8,'newPoints':_0x53925f,'reason':_0x5ee720,'adminEmail':auth[_0x5180be(0x276)]['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x445c89=a4_0x46e366,_0x169995=document['getElementById'](_0x445c89(0x22e));if(!_0x169995)return;_0x169995['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x3c2845=collection(db,'userProfiles'),_0x28bd93=await getDocs(_0x3c2845);if(_0x28bd93['empty']){_0x169995['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0xbc15fe=[];let _0x20d812=0x0;_0x28bd93[_0x445c89(0x2e2)](_0x4bc883=>{const _0x221e58=_0x445c89,_0x4ca1bb=_0x4bc883['data'](),_0x47800a=_0x4ca1bb[_0x221e58(0x3a2)]!==undefined?_0x4ca1bb['points']:0x0;_0x4ca1bb['points']===undefined&&_0x20d812++,_0xbc15fe['push']({'id':_0x4bc883['id'],..._0x4ca1bb,'points':_0x47800a});}),_0x20d812>0x0&&(console['log']('Found\x20'+_0x20d812+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x20d812+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0xbc15fe['sort']((_0x1e541c,_0x726254)=>(_0x726254['points']||0x0)-(_0x1e541c['points']||0x0)),window[_0x445c89(0x2dd)]=_0xbc15fe,renderPointsOverview(_0xbc15fe);}catch(_0x4df419){console['error']('Error\x20loading\x20points\x20overview:',_0x4df419),_0x169995['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x4df419[_0x445c89(0x271)]+'</td></tr>';}}async function loadRibbonsData(){const _0x2dc3d5=a4_0x46e366,_0x247530=document['getElementById']('ribbons-overview-table-body');if(!_0x247530)return;_0x247530['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x4df4f1,_0x5d4b88,_0x29bf0b]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x247530['innerHTML']='';const _0x393df5=(_0x52db08,_0x544bd5)=>{_0x52db08['forEach'](_0x3868dc=>{const _0x1b6cd6=a4_0x168e,_0x40588d=_0x3868dc[_0x1b6cd6(0x21b)](),_0x5e5b63=_0x40588d[_0x1b6cd6(0x3e0)]||{},_0x37eb0b=Object['keys'](_0x5e5b63)[_0x1b6cd6(0x347)],_0x2ebb01=document['createElement']('tr');_0x2ebb01['innerHTML']=_0x1b6cd6(0x293)+(_0x40588d['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x544bd5['toLowerCase']()+'\x22>'+_0x544bd5+_0x1b6cd6(0x1d6)+_0x37eb0b+_0x1b6cd6(0x31a)+(_0x40588d['lastUpdated']?new Date(_0x40588d['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x40588d['username']+_0x1b6cd6(0x20a)+_0x544bd5+_0x1b6cd6(0x38d),_0x247530['appendChild'](_0x2ebb01);});};_0x393df5(_0x4df4f1,'D1'),_0x393df5(_0x5d4b88,'D2'),_0x393df5(_0x29bf0b,'D3'),document[_0x2dc3d5(0x3b8)](_0x2dc3d5(0x3bc))['forEach'](_0x11299f=>{_0x11299f['addEventListener']('click',function(){const _0x281355=this['dataset']['username'],_0x379b99=this['dataset']['ladder'];editUserRibbons(_0x281355,_0x379b99);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x4e5551){console['error']('Error\x20loading\x20ribbons:',_0x4e5551),_0x247530[_0x2dc3d5(0x2b5)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification(_0x2dc3d5(0x22c),'error');}}async function searchRibbonUser(){const _0x558a98=a4_0x46e366,_0x53b2e6=document[_0x558a98(0x3db)]('ribbon-user-search')[_0x558a98(0x248)][_0x558a98(0x3c2)]();if(!_0x53b2e6){showNotification(_0x558a98(0x33a),'error');return;}try{const [_0x29c454,_0x5c7874,_0xb04bfe]=await Promise[_0x558a98(0x27b)]([getDoc(doc(db,_0x558a98(0x1c3),_0x53b2e6)),getDoc(doc(db,'playerRibbonsD2',_0x53b2e6)),getDoc(doc(db,'playerRibbonsD3',_0x53b2e6))]);let _0xbd20aa=null,_0xe9213c=null;if(_0x29c454['exists']())_0xbd20aa='D1',_0xe9213c=_0x29c454['data']();else{if(_0x5c7874['exists']())_0xbd20aa='D2',_0xe9213c=_0x5c7874['data']();else _0xb04bfe[_0x558a98(0x239)]()&&(_0xbd20aa='D3',_0xe9213c=_0xb04bfe['data']());}_0xbd20aa?(document['getElementById']('current-ribbon-user')['textContent']=_0x53b2e6,document['getElementById'](_0x558a98(0x327))['value']=_0x53b2e6,document['getElementById'](_0x558a98(0x2ef))['value']=_0xbd20aa,document['getElementById']('user-ribbon-management')[_0x558a98(0x2c3)][_0x558a98(0x34d)]=_0x558a98(0x1fa),displayCurrentRibbons(_0xe9213c['ribbons']||{}),showNotification('Found\x20'+_0x53b2e6+'\x20in\x20'+_0xbd20aa+'\x20ladder',_0x558a98(0x218))):showNotification('User\x20'+_0x53b2e6+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0xdb616f){console['error']('Error\x20searching\x20user:',_0xdb616f),showNotification('Error\x20searching\x20for\x20user',_0x558a98(0x383));}}function displayCurrentRibbons(_0x35f12c){const _0x3c6dd0=a4_0x46e366,_0x5372ca=document['getElementById']('current-ribbons-list');if(!_0x5372ca)return;_0x5372ca[_0x3c6dd0(0x2b5)]='';if(Object[_0x3c6dd0(0x277)](_0x35f12c)['length']===0x0){_0x5372ca['innerHTML']=_0x3c6dd0(0x268);return;}Object[_0x3c6dd0(0x36d)](_0x35f12c)['forEach'](([_0x4abdd7,_0x2aa889])=>{const _0xb1f4b=_0x3c6dd0,_0x34bec7=document['createElement']('div');_0x34bec7['className']='ribbon-item',_0x34bec7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x4abdd7+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x2aa889['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x2aa889[_0xb1f4b(0x224)]?new Date(_0x2aa889['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():_0xb1f4b(0x27a))+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x4abdd7+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x5372ca['appendChild'](_0x34bec7);}),document[_0x3c6dd0(0x3b8)]('.remove-ribbon-btn')['forEach'](_0x2767fe=>{_0x2767fe['addEventListener']('click',function(){const _0x47c4a7=this['dataset']['ribbon'];removeRibbon(_0x47c4a7);});});}async function addRibbon(_0xad24b3){const _0xaca03e=a4_0x46e366;_0xad24b3['preventDefault']();const _0x5559ff=document['getElementById']('ribbon-target-user')['value'],_0x1c2125=document['getElementById']('ribbon-target-ladder')[_0xaca03e(0x248)],_0xe01575=document['getElementById']('ribbon-type-select')['value'],_0x271235=parseInt(document[_0xaca03e(0x3db)](_0xaca03e(0x1f7))[_0xaca03e(0x248)]);if(!_0x5559ff||!_0x1c2125||!_0xe01575||!_0x271235){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x2d207e=_0xaca03e(0x1c3)+(_0x1c2125==='D1'?'':_0x1c2125),_0x966014=doc(db,_0x2d207e,_0x5559ff),_0x3ddbd2=await getDoc(_0x966014),_0x2c83d0=_0x3ddbd2['exists']()?_0x3ddbd2[_0xaca03e(0x21b)]()[_0xaca03e(0x3e0)]||{}:{};_0x2c83d0[_0xe01575]={'level':_0x271235,'awardedAt':serverTimestamp()},await setDoc(_0x966014,{'username':_0x5559ff,'ladder':_0x1c2125,'ribbons':_0x2c83d0,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0xe01575+_0xaca03e(0x2c4)+_0x271235+'\x20to\x20'+_0x5559ff,'success'),displayCurrentRibbons(_0x2c83d0),document[_0xaca03e(0x3db)](_0xaca03e(0x221))['value']='',document['getElementById'](_0xaca03e(0x1f7))['value']='1';}catch(_0x407c13){console['error'](_0xaca03e(0x294),_0x407c13),showNotification(_0xaca03e(0x1f2),_0xaca03e(0x383));}}async function removeRibbon(_0x4bd350){const _0x243b99=a4_0x46e366,_0x3442d1=document['getElementById'](_0x243b99(0x327))['value'],_0x3354b2=document['getElementById'](_0x243b99(0x2ef))['value'];if(!confirm(_0x243b99(0x354)+_0x4bd350+'\x20from\x20'+_0x3442d1+'?'))return;try{const _0x1512e4='playerRibbons'+(_0x3354b2==='D1'?'':_0x3354b2),_0x13c58e=doc(db,_0x1512e4,_0x3442d1),_0x5e4fa1=await getDoc(_0x13c58e),_0x1f5d92=_0x5e4fa1['exists']()?_0x5e4fa1['data']()['ribbons']||{}:{};delete _0x1f5d92[_0x4bd350],await setDoc(_0x13c58e,{'username':_0x3442d1,'ladder':_0x3354b2,'ribbons':_0x1f5d92,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x4bd350+'\x20from\x20'+_0x3442d1,_0x243b99(0x218)),displayCurrentRibbons(_0x1f5d92);}catch(_0x178456){console['error'](_0x243b99(0x363),_0x178456),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x3c0935,_0x23b5d3){document['getElementById']('ribbon-user-search')['value']=_0x3c0935,searchRibbonUser();}