const a43_0xfacfc9=a43_0x740c,a43_0x5f0cda=(function(){let _0x434162=!![];return function(_0x416a2a,_0x4e3083){const _0x5af878=_0x434162?function(){if(_0x4e3083){const _0x42dd54=_0x4e3083['apply'](_0x416a2a,arguments);return _0x4e3083=null,_0x42dd54;}}:function(){};return _0x434162=![],_0x5af878;};}()),a43_0xbc2a43=a43_0x5f0cda(this,function(){const _0x251c89=a43_0x740c,_0x46cedc=function(){let _0x2f7d90;try{_0x2f7d90=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x272c8c){_0x2f7d90=window;}return _0x2f7d90;},_0xd2c0c9=_0x46cedc(),_0x1c2e5d=_0xd2c0c9[_0x251c89(0x167)]=_0xd2c0c9[_0x251c89(0x167)]||{},_0x3d6022=[_0x251c89(0x15d),'warn','info','error','exception','table','trace'];for(let _0x296853=0x0;_0x296853<_0x3d6022[_0x251c89(0x161)];_0x296853++){const _0x5b3a57=a43_0x5f0cda['constructor']['prototype']['bind'](a43_0x5f0cda),_0x22abf4=_0x3d6022[_0x296853],_0x279367=_0x1c2e5d[_0x22abf4]||_0x5b3a57;_0x5b3a57[_0x251c89(0x165)]=a43_0x5f0cda[_0x251c89(0x15f)](a43_0x5f0cda),_0x5b3a57['toString']=_0x279367['toString'][_0x251c89(0x15f)](_0x279367),_0x1c2e5d[_0x22abf4]=_0x5b3a57;}});a43_0xbc2a43();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function a43_0x740c(_0x1b3168,_0x1414a2){const _0xbc2a43=a43_0x5c75();return a43_0x740c=function(_0x5f0cda,_0x4517be){_0x5f0cda=_0x5f0cda-0x15b;let _0x5c7558=_0xbc2a43[_0x5f0cda];return _0x5c7558;},a43_0x740c(_0x1b3168,_0x1414a2);}function updateQueueDisplay(_0x980d42){const _0x1e82f6=a43_0x740c,_0x27e3e8=document[_0x1e82f6(0x15c)]('queue-container');if(!_0x27e3e8)return;if(_0x980d42['length']===0x0){_0x27e3e8['style']['display']='none';return;}_0x27e3e8[_0x1e82f6(0x162)][_0x1e82f6(0x16b)]='block';let _0x55c96f='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x980d42[_0x1e82f6(0x15e)](_0x4acf1f=>{const _0x437c79=_0x1e82f6;_0x55c96f+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x4acf1f[_0x437c79(0x16a)]||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x4acf1f['lastUpdated'])+_0x437c79(0x166);}),_0x55c96f+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x27e3e8['innerHTML']=_0x55c96f;}function formatQueueTime(_0x40ecfb){const _0x1f61fd=a43_0x740c;if(!_0x40ecfb)return'Just\x20now';const _0x36b0ea=_0x40ecfb[_0x1f61fd(0x16c)]?_0x40ecfb['toDate']():new Date(_0x40ecfb),_0xd04026=new Date(),_0x2e6b49=Math['floor']((_0xd04026-_0x36b0ea)/0xea60);if(_0x2e6b49<0x1)return'Just\x20now';return _0x2e6b49+_0x1f61fd(0x15b);}function a43_0x5c75(){const _0xd38e5=['m\x20in\x20queue','getElementById','log','forEach','bind','push','length','style','lastUpdated','unload','__proto__','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','console','data','isReady','username','display','toDate'];a43_0x5c75=function(){return _0xd38e5;};return a43_0x5c75();}async function checkQueueTimeout(_0x55576b){const _0x559057=a43_0x740c;if(!_0x55576b['lastUpdated'])return;const _0x126bf2=_0x55576b['lastUpdated']['toDate']?_0x55576b[_0x559057(0x163)]['toDate']():new Date(_0x55576b[_0x559057(0x163)]),_0x5e6abb=new Date(),_0x90353f=Math['floor']((_0x5e6abb-_0x126bf2)/0xea60);if(_0x90353f>=0x1e)try{const _0x17dc7c=doc(db,'readyPlayers',_0x55576b['id']);await updateDoc(_0x17dc7c,{'isReady':![]});}catch(_0x2cb22a){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x2cb22a);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x2af679=>{const _0x197a65=a43_0x740c,_0x2c1d1c=[];_0x2af679[_0x197a65(0x15e)](_0x29f996=>{const _0x33e1cf=_0x197a65,_0x8cbb42=_0x29f996[_0x33e1cf(0x168)]();if(_0x8cbb42[_0x33e1cf(0x169)]===!![]){const _0x1cd602={'id':_0x29f996['id'],'username':_0x8cbb42['username'],'lastUpdated':_0x8cbb42['lastUpdated']||new Date()};_0x2c1d1c[_0x33e1cf(0x160)](_0x1cd602),checkQueueTimeout(_0x1cd602);}}),updateQueueDisplay(_0x2c1d1c);},_0x540994=>{console['error']('Error\x20in\x20queue\x20listener:',_0x540994);});window['addEventListener'](a43_0xfacfc9(0x164),()=>{unsubscribe();});