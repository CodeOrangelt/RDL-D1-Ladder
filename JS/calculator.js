const a9_0x487ded=a9_0x5af5,a9_0x4a776c=(function(){let _0xcdf1f9=!![];return function(_0x4e0b4d,_0x4f3b2f){const _0x15d762=_0xcdf1f9?function(){if(_0x4f3b2f){const _0x57eab6=_0x4f3b2f['apply'](_0x4e0b4d,arguments);return _0x4f3b2f=null,_0x57eab6;}}:function(){};return _0xcdf1f9=![],_0x15d762;};}()),a9_0x3eed19=a9_0x4a776c(this,function(){const _0x3f570b=a9_0x5af5;let _0x369308;try{const _0x57e253=Function('return\x20(function()\x20'+_0x3f570b(0x18c)+');');_0x369308=_0x57e253();}catch(_0x559fc0){_0x369308=window;}const _0xee536e=_0x369308['console']=_0x369308['console']||{},_0xdeaf23=['log','warn',_0x3f570b(0x1a2),'error',_0x3f570b(0x185),'table','trace'];for(let _0x48828b=0x0;_0x48828b<_0xdeaf23['length'];_0x48828b++){const _0x1ad775=a9_0x4a776c['constructor']['prototype'][_0x3f570b(0x174)](a9_0x4a776c),_0x1c1a19=_0xdeaf23[_0x48828b],_0x52ff48=_0xee536e[_0x1c1a19]||_0x1ad775;_0x1ad775['__proto__']=a9_0x4a776c[_0x3f570b(0x174)](a9_0x4a776c),_0x1ad775['toString']=_0x52ff48['toString'][_0x3f570b(0x174)](_0x52ff48),_0xee536e[_0x1c1a19]=_0x1ad775;}});function a9_0x5af5(_0x2c3d1f,_0x338b45){const _0x3eed19=a9_0xe0d2();return a9_0x5af5=function(_0x4a776c,_0x81c375){_0x4a776c=_0x4a776c-0x16e;let _0xe0d2b4=_0x3eed19[_0x4a776c];return _0xe0d2b4;},a9_0x5af5(_0x2c3d1f,_0x338b45);}a9_0x3eed19();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const _0x10514e=a9_0x5af5;this[_0x10514e(0x16f)]='D1',this['players']=new Map(),this[_0x10514e(0x172)]();}['init'](){this['setupEventListeners'](),this['loadPlayers']();}['setupEventListeners'](){const _0x2110ad=a9_0x5af5;document['querySelectorAll']('.ladder-btn')['forEach'](_0x1285c5=>{_0x1285c5['addEventListener']('click',_0x24ef0c=>{const _0x17f1b8=a9_0x5af5;document['querySelectorAll']('.ladder-btn')['forEach'](_0x3afb1a=>_0x3afb1a['classList']['remove']('active')),_0x24ef0c['target']['classList'][_0x17f1b8(0x194)](_0x17f1b8(0x177)),this[_0x17f1b8(0x16f)]=_0x24ef0c[_0x17f1b8(0x187)][_0x17f1b8(0x193)][_0x17f1b8(0x1a0)],this['loadPlayers']();});}),document['getElementById']('refresh-players')[_0x2110ad(0x186)]('click',()=>{this['loadPlayers']();}),document['getElementById']('winner-select')['addEventListener']('change',()=>this['calculateMatch']()),document[_0x2110ad(0x183)]('loser-select')['addEventListener']('change',()=>this['calculateMatch']());}async['loadPlayers'](){const _0x3ea97=a9_0x5af5;try{this['updateDropdowns']('<option\x20value=\x22\x22>Loading\x20players...</option>');const _0x1c12fc=this['currentLadder']==='D1'?_0x3ea97(0x192):this['currentLadder']==='D2'?'playersD2':_0x3ea97(0x18a),_0x5de810=collection(db,_0x1c12fc),_0x360b04=query(_0x5de810,orderBy('eloRating','desc')),_0x1ef1ff=await getDocs(_0x360b04);this[_0x3ea97(0x192)][_0x3ea97(0x19b)](),_0x1ef1ff['forEach'](_0x3bfaf3=>{const _0x2cd522=_0x3ea97,_0x44860d=_0x3bfaf3[_0x2cd522(0x1a3)]();_0x44860d['username']&&this['players']['set'](_0x44860d['username'],{'id':_0x3bfaf3['id'],'username':_0x44860d['username'],'elo':parseInt(_0x44860d['eloRating'])||0x4b0,'position':_0x44860d[_0x2cd522(0x19e)]||0x3e7});}),this['updateDropdowns'](),console['log']('Loaded\x20'+this[_0x3ea97(0x192)]['size']+_0x3ea97(0x188)+this[_0x3ea97(0x16f)]+'\x20ladder');}catch(_0x1ed226){console['error']('Error\x20loading\x20players:',_0x1ed226),this[_0x3ea97(0x18e)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}['updateDropdowns'](_0x3c041a=null){const _0x3a9ad7=a9_0x5af5,_0x355b30=document[_0x3a9ad7(0x183)]('winner-select'),_0x342e81=document['getElementById'](_0x3a9ad7(0x176));if(_0x3c041a){_0x355b30['innerHTML']=_0x3c041a,_0x342e81['innerHTML']=_0x3c041a;return;}let _0x44ff77='<option\x20value=\x22\x22>Select\x20a\x20player...</option>';const _0x2920e2=Array['from'](this[_0x3a9ad7(0x192)][_0x3a9ad7(0x18d)]())[_0x3a9ad7(0x1a1)]((_0xd7636f,_0x528640)=>_0x528640['elo']-_0xd7636f['elo']);_0x2920e2['forEach'](_0x220ee0=>{const _0x5b663b=_0x3a9ad7,_0x547e14=this[_0x5b663b(0x199)](_0x220ee0['elo']);_0x44ff77+='<option\x20value=\x22'+_0x220ee0['username']+'\x22\x20data-elo=\x22'+_0x220ee0['elo']+'\x22\x20class=\x22'+_0x547e14+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x220ee0['username']+'\x20('+_0x220ee0['elo']+'\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>';}),_0x355b30['innerHTML']=_0x44ff77,_0x342e81['innerHTML']=_0x44ff77;}[a9_0x487ded(0x178)](){const _0xd3fff6=a9_0x487ded,_0x377361=document[_0xd3fff6(0x183)]('winner-select'),_0x20ec5a=document['getElementById']('loser-select'),_0x18b534=_0x377361['value'],_0x4dc873=_0x20ec5a['value'];if(!_0x18b534||!_0x4dc873){document[_0xd3fff6(0x183)]('match-result')['style']['display']='none',document[_0xd3fff6(0x183)](_0xd3fff6(0x197))['style']['display']=_0xd3fff6(0x16e);return;}if(_0x18b534===_0x4dc873){alert(_0xd3fff6(0x18f));return;}const _0x3096f2=this['players']['get'](_0x18b534),_0x4ce04f=this['players']['get'](_0x4dc873);if(!_0x3096f2||!_0x4ce04f){console['error']('Player\x20not\x20found');return;}const _0x2d2e1c=this[_0xd3fff6(0x182)](_0x3096f2['elo'],_0x4ce04f['elo']);this[_0xd3fff6(0x17a)](_0x3096f2,_0x4ce04f,_0x2d2e1c),this['displayCalculationDetails'](_0x3096f2,_0x4ce04f,_0x2d2e1c);}['calculateELO'](_0xf88f91,_0x43ab90,_0x3928e1=0x20){const _0x534beb=a9_0x487ded,_0x2de218=0x1/(0x1+Math['pow'](0xa,(_0x43ab90-_0xf88f91)/0x190)),_0x5e3438=0x1/(0x1+Math[_0x534beb(0x195)](0xa,(_0xf88f91-_0x43ab90)/0x190)),_0x102818=_0xf88f91+_0x3928e1*(0x1-_0x2de218),_0x5d20ac=_0x43ab90+_0x3928e1*(0x0-_0x5e3438);return{'winnerChange':Math['round'](_0x102818-_0xf88f91),'loserChange':Math['round'](_0x5d20ac-_0x43ab90),'newWinnerRating':Math['round'](_0x102818),'newLoserRating':Math['round'](_0x5d20ac),'expectedScoreWinner':_0x2de218,'expectedScoreLoser':_0x5e3438};}['displayMatchResult'](_0x2faebe,_0x3cb24e,_0x3bc14a){const _0x49ae84=a9_0x487ded;document[_0x49ae84(0x183)](_0x49ae84(0x190))[_0x49ae84(0x191)]=_0x2faebe['username'],document['getElementById'](_0x49ae84(0x173))[_0x49ae84(0x191)]='Current\x20ELO:\x20'+_0x2faebe['elo'],document['getElementById']('winner-elo-change')['textContent']='+'+_0x3bc14a[_0x49ae84(0x184)],document['getElementById'](_0x49ae84(0x19d))[_0x49ae84(0x191)]='New\x20ELO:\x20'+_0x3bc14a['newWinnerRating'],document['getElementById'](_0x49ae84(0x189))['textContent']=_0x3cb24e['username'],document[_0x49ae84(0x183)]('loser-current-elo')['textContent']=_0x49ae84(0x170)+_0x3cb24e['elo'],document[_0x49ae84(0x183)](_0x49ae84(0x17f))['textContent']=''+_0x3bc14a['loserChange'],document[_0x49ae84(0x183)]('loser-new-elo')[_0x49ae84(0x191)]=_0x49ae84(0x19f)+_0x3bc14a['newLoserRating'];const _0x3eae3e=this[_0x49ae84(0x19c)](_0x2faebe['elo']),_0x45fc0d=this['getELOColor'](_0x3cb24e['elo']);document[_0x49ae84(0x183)]('winner-name')['style'][_0x49ae84(0x17d)]=_0x3eae3e,document['getElementById']('loser-name')['style']['color']=_0x45fc0d,document['getElementById']('match-result')[_0x49ae84(0x17c)][_0x49ae84(0x198)]='grid';}['displayCalculationDetails'](_0x1e8a4c,_0x226672,_0x2ad4ee){const _0x45230b=a9_0x487ded,_0x51f09d='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+_0x1e8a4c['username']+':\x20'+_0x1e8a4c[_0x45230b(0x179)]+'\x0a\x20\x20'+_0x226672['username']+':\x20'+_0x226672[_0x45230b(0x179)]+'\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20'+_0x1e8a4c['username']+':\x20'+_0x2ad4ee['expectedScoreWinner']['toFixed'](0x3)+'\x20('+(_0x2ad4ee['expectedScoreWinner']*0x64)[_0x45230b(0x181)](0x1)+'%\x20chance\x20to\x20win)\x0a\x20\x20'+_0x226672['username']+':\x20'+_0x2ad4ee['expectedScoreLoser']['toFixed'](0x3)+'\x20('+(_0x2ad4ee['expectedScoreLoser']*0x64)['toFixed'](0x1)+'%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'+_0x1e8a4c['username']+':\x20'+_0x1e8a4c['elo']+'\x20+\x20'+_0x2ad4ee['winnerChange']+'\x20=\x20'+_0x2ad4ee['newWinnerRating']+_0x45230b(0x171)+_0x226672['username']+':\x20'+_0x226672['elo']+'\x20+\x20'+_0x2ad4ee['loserChange']+'\x20=\x20'+_0x2ad4ee[_0x45230b(0x18b)]+_0x45230b(0x196)+(_0x2ad4ee['winnerChange']>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(_0x2ad4ee['winnerChange']<0x5?_0x45230b(0x175):'')+_0x45230b(0x180);document[_0x45230b(0x183)](_0x45230b(0x19a))['textContent']=_0x51f09d,document[_0x45230b(0x183)]('calculation-details')['style']['display']='block';}['getELOColor'](_0x576c06){if(_0x576c06>=0x7d0)return'#50C878';else{if(_0x576c06>=0x708)return'#FFD700';else{if(_0x576c06>=0x640)return'#C0C0C0';else{if(_0x576c06>=0x578)return'#CD7F32';else return'#808080';}}}}['getELORankClass'](_0x2afe01){const _0x5acd6a=a9_0x487ded;if(_0x2afe01>=0x7d0)return'emerald';else{if(_0x2afe01>=0x708)return'gold';else{if(_0x2afe01>=0x640)return'silver';else{if(_0x2afe01>=0x578)return'bronze';else return _0x5acd6a(0x17e);}}}}}document['addEventListener'](a9_0x487ded(0x17b),()=>{const _0x43c23d=a9_0x487ded;document[_0x43c23d(0x183)]('sandbox')&&new ELOCalculator();});function a9_0xe0d2(){const _0xd4d505=['none','currentLadder','Current\x20ELO:\x20','\x0a\x20\x20','init','winner-current-elo','bind','Low\x20ELO\x20gain.','loser-select','active','calculateMatch','elo','displayMatchResult','DOMContentLoaded','style','color','unranked','loser-elo-change','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toFixed','calculateELO','getElementById','winnerChange','exception','addEventListener','target','\x20players\x20from\x20','loser-name','playersD3','newLoserRating','{}.constructor(\x22return\x20this\x22)(\x20)','values','updateDropdowns','Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser','winner-name','textContent','players','dataset','add','pow','\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a','calculation-details','display','getELORankClass','calculation-text','clear','getELOColor','winner-new-elo','position','New\x20ELO:\x20','ladder','sort','info','data'];a9_0xe0d2=function(){return _0xd4d505;};return a9_0xe0d2();}