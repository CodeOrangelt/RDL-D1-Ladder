const a8_0x1f0cc0=a8_0x4420,a8_0x11c386=(function(){let _0x3a5fc4=!![];return function(_0x3fb6ec,_0x133940){const _0x5785dd=_0x3a5fc4?function(){if(_0x133940){const _0xaf5bd9=_0x133940['apply'](_0x3fb6ec,arguments);return _0x133940=null,_0xaf5bd9;}}:function(){};return _0x3a5fc4=![],_0x5785dd;};}()),a8_0x14c893=a8_0x11c386(this,function(){const _0x578e39=a8_0x4420;let _0x26ac45;try{const _0x3975fd=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x26ac45=_0x3975fd();}catch(_0x163c5e){_0x26ac45=window;}const _0x2d0974=_0x26ac45['console']=_0x26ac45['console']||{},_0x54d3a9=['log','warn',_0x578e39(0x1e1),_0x578e39(0x1d8),_0x578e39(0x1d9),'table',_0x578e39(0x1dd)];for(let _0x4e4d41=0x0;_0x4e4d41<_0x54d3a9['length'];_0x4e4d41++){const _0x51b1b5=a8_0x11c386['constructor'][_0x578e39(0x1eb)][_0x578e39(0x1e5)](a8_0x11c386),_0x24b365=_0x54d3a9[_0x4e4d41],_0xbc3e89=_0x2d0974[_0x24b365]||_0x51b1b5;_0x51b1b5['__proto__']=a8_0x11c386['bind'](a8_0x11c386),_0x51b1b5[_0x578e39(0x1f0)]=_0xbc3e89['toString'][_0x578e39(0x1e5)](_0xbc3e89),_0x2d0974[_0x24b365]=_0x51b1b5;}});function a8_0x4420(_0x5758b8,_0x23d64e){const _0x14c893=a8_0xc988();return a8_0x4420=function(_0x11c386,_0x1346fe){_0x11c386=_0x11c386-0x1d1;let _0xc98831=_0x14c893[_0x11c386];return _0xc98831;},a8_0x4420(_0x5758b8,_0x23d64e);}a8_0x14c893();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;function a8_0xc988(){const _0x52bcff=['data','disconnect','docs','setItem','report-match-notification','uid','observe','error','exception','style','getElementById','pendingMatchesD2','trace','removeItem','now','onAuthStateChanged','info','borderRadius','empty','50%','bind','10px','#ff3b30','currentUsername','userId','DOMContentLoaded','prototype','-5px','top','username','approved','toString','block'];a8_0xc988=function(){return _0x52bcff;};return a8_0xc988();}const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x4a7e32=![]){const _0x1be650=a8_0x4420,_0x5262d8=Date['now'](),_0x315864=checkNotificationCache();if(_0x315864!==null&&!_0x4a7e32){updateNotificationDot(_0x315864);if(_0x5262d8-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x5262d8;const _0x3d2585=auth['currentUser'];if(!_0x3d2585){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x1f9727,_0x28c8ec,_0x4200b7]=await Promise['all']([checkForPendingMatchesInCollection(_0x3d2585,'pendingMatches'),checkForPendingMatchesInCollection(_0x3d2585,_0x1be650(0x1dc)),checkForPendingMatchesInCollection(_0x3d2585,'pendingMatchesD3')]),_0x35b700=_0x1f9727||_0x28c8ec||_0x4200b7;updateNotificationDot(_0x35b700),updateNotificationCache(_0x35b700);}catch(_0x4faad0){console['error']('Error\x20checking\x20pending\x20matches:',_0x4faad0);}}async function checkForPendingMatchesInCollection(_0x167d43,_0x6902f9){const _0xf32835=a8_0x4420,_0x2b53d3=_0x167d43['uid'],_0x7425e0=_0x167d43['email'],_0x3ac06c=query(collection(db,_0x6902f9),where('winnerId','==',_0x2b53d3),where(_0xf32835(0x1ef),'==',![])),_0x52ee58=await getDocs(_0x3ac06c);if(!_0x52ee58['empty'])return!![];if(_0x7425e0){const _0x512eac=query(collection(db,_0x6902f9),where('winnerEmail','==',_0x7425e0),where('approved','==',![])),_0x55d7f7=await getDocs(_0x512eac);if(!_0x55d7f7[_0xf32835(0x1e3)])return!![];}let _0x45a520=await getUsernameFromAllSources(_0x167d43);if(_0x45a520){const _0x61523e=query(collection(db,_0x6902f9),where('winnerUsername','==',_0x45a520),where('approved','==',![])),_0x432be3=await getDocs(_0x61523e);if(!_0x432be3['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x7989bc){const _0x36e4fb=a8_0x4420,_0x19efeb=localStorage['getItem'](_0x36e4fb(0x1e8));if(_0x19efeb)return _0x19efeb;try{const [_0x30efcc,_0x1b6343,_0x3c658f]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x7989bc[_0x36e4fb(0x1d6)]))),getDocs(query(collection(db,'playersD2'),where(_0x36e4fb(0x1e9),'==',_0x7989bc[_0x36e4fb(0x1d6)]))),getDocs(query(collection(db,'playersD3'),where(_0x36e4fb(0x1e9),'==',_0x7989bc[_0x36e4fb(0x1d6)])))]);if(!_0x30efcc['empty']){const _0x3e7ea9=_0x30efcc['docs'][0x0][_0x36e4fb(0x1d1)]()['username'];return localStorage['setItem']('currentUsername',_0x3e7ea9),_0x3e7ea9;}if(!_0x1b6343['empty']){const _0x5a6be7=_0x1b6343[_0x36e4fb(0x1d3)][0x0]['data']()['username'];return localStorage['setItem'](_0x36e4fb(0x1e8),_0x5a6be7),_0x5a6be7;}if(!_0x3c658f['empty']){const _0x8c8adc=_0x3c658f['docs'][0x0][_0x36e4fb(0x1d1)]()['username'];return localStorage[_0x36e4fb(0x1d4)]('currentUsername',_0x8c8adc),_0x8c8adc;}const _0x3c76c4=await getDoc(doc(db,'users',_0x7989bc['uid']));if(_0x3c76c4['exists']()&&_0x3c76c4['data']()[_0x36e4fb(0x1ee)]){const _0x55fa27=_0x3c76c4['data']()[_0x36e4fb(0x1ee)];return localStorage['setItem']('currentUsername',_0x55fa27),_0x55fa27;}}catch(_0x2dc9a2){console['error']('Error\x20fetching\x20username:',_0x2dc9a2);}if(_0x7989bc['email'])return _0x7989bc['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x39a2be){const _0x476e85={'status':_0x39a2be,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x476e85));}function checkNotificationCache(){const _0x4caffd=a8_0x4420,_0x38e197=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x38e197)return null;try{const {status:_0x1e7935,timestamp:_0x2d4538}=JSON['parse'](_0x38e197),_0x37dd7f=Date[_0x4caffd(0x1df)]();if(_0x37dd7f-_0x2d4538<CACHE_EXPIRY)return _0x1e7935;}catch(_0x1414ab){}return null;}export function updateNotificationDot(_0x2adb1f){const _0x28b6fd=a8_0x4420,_0x5f3c94=new MutationObserver((_0x122811,_0x82914c)=>{const _0x327eeb=a8_0x4420,_0x1e1f32=document[_0x327eeb(0x1db)](_0x327eeb(0x1d5));_0x1e1f32&&(updateDotStyle(_0x1e1f32,_0x2adb1f),_0x82914c['disconnect']());});_0x5f3c94[_0x28b6fd(0x1d7)](document['body'],{'childList':!![],'subtree':!![]});const _0x17159a=document['getElementById'](_0x28b6fd(0x1d5));_0x17159a&&(updateDotStyle(_0x17159a,_0x2adb1f),_0x5f3c94['disconnect']()),setTimeout(()=>_0x5f3c94[_0x28b6fd(0x1d2)](),0x1388);}function updateDotStyle(_0x3b17c7,_0x3a1987){const _0x446dfb=a8_0x4420;_0x3a1987?(_0x3b17c7['style']['display']=_0x446dfb(0x1f1),_0x3b17c7[_0x446dfb(0x1da)]['backgroundColor']=_0x446dfb(0x1e7),_0x3b17c7['style']['width']=_0x446dfb(0x1e6),_0x3b17c7['style']['height']=_0x446dfb(0x1e6),_0x3b17c7['style']['position']='absolute',_0x3b17c7['style'][_0x446dfb(0x1ed)]=_0x446dfb(0x1ec),_0x3b17c7['style']['right']='-8px',_0x3b17c7[_0x446dfb(0x1da)][_0x446dfb(0x1e2)]=_0x446dfb(0x1e4),_0x3b17c7[_0x446dfb(0x1da)]['border']='2px\x20solid\x20white',_0x3b17c7['style']['zIndex']='999'):_0x3b17c7['style']['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener'](a8_0x1f0cc0(0x1ea),()=>{const _0x4193fa=a8_0x1f0cc0;setTimeout(()=>checkPendingMatches(),0x1f4),auth[_0x4193fa(0x1e0)](()=>{const _0x4121d6=_0x4193fa;localStorage[_0x4121d6(0x1de)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});