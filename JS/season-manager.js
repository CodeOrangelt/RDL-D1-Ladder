function a52b(a,b){const c=a52a();return a52b=function(d,e){d=d-0xe1;let f=c[d];if(a52b['NWOsFn']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a52b['nGvvdv']=g,a=arguments,a52b['NWOsFn']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a52b['nGvvdv'](f),a[i]=f):f=j,f;},a52b(a,b);}const a52j=a52b;(function(a,b){const h=a52b,c=a();while(!![]){try{const d=-parseInt(h(0xf9))/0x1*(parseInt(h(0xeb))/0x2)+-parseInt(h(0xfe))/0x3+-parseInt(h(0xf5))/0x4+parseInt(h(0xe9))/0x5+parseInt(h(0xfb))/0x6*(-parseInt(h(0xea))/0x7)+parseInt(h(0xf1))/0x8*(-parseInt(h(0xf7))/0x9)+parseInt(h(0x100))/0xa*(parseInt(h(0xf8))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a52a,0xe2a0a));function a52a(){const p=['C2v0DxbfDMvUDeXPC3rLBMvYCW','BM9Uzq','Bwv0ywrHDge','CMvZzxqTC2vHC29U','ndqWA3HHBeXd','ywrKrxzLBNrmAxn0zw5LCG','CMvSB2fK','ugXLyxnLigvUDgvYihLVDxiGCgfZC3DVCMq','mJK4ody0ofPdvKPgBG','C2vHC29UCW','nJa5ndHXuNbtzu4','mZKXnZyWmJDZuuHyzLK','nJvXt2PoCvG','CMvZzxqTy29UzMLYBwf0Aw9U','mtaYtvjiDe5A','CMvZzxqTCgfZC3DVCMq','C3r5Bgu','mJa3odG1ownUyNPXtG','ChvZAa','mtbRyKn4rfq','y29UzMLYBs1YzxnLDa','y2XPy2S','zw1HAwW','z2v0rwXLBwvUDej5swq','y291BNq','zgf0yq','CMvZzxrtzwfZB24','igHHCYbIzwvUigfYy2HPDMvKigfUzcbWBgf5zxjZigHHDMuGyMvLBIbYzxnLDc4','zgLZCgXHEq','nJe1mZiZmfDPBwjRCq','ndqYmZm3Buftu0rZ','mZaWnJjjzfrcy2m','DMfSDwu'];a52a=function(){return p;};return a52a();}import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){const i=a52b;this[i(0xed)]();}[a52j(0xed)](){const k=a52j,a=document[k(0xe3)](k(0xf0)),b=document['getElementById'](k(0x101)),c=document['getElementById']('cancel-reset');a?.['addEventListener'](k(0xe1),()=>{const l=k;document[l(0xe3)](l(0xfa))['style'][l(0xe8)]='block';}),b?.['addEventListener']('click',async()=>{const m=k,d=document['getElementById'](m(0xfc)),e=auth['currentUser'];if(!e||!d[m(0xec)]){alert(m(0xf4));return;}try{const f=EmailAuthProvider['credential'](e[m(0xe2)],d['value']);await reauthenticateWithCredential(e,f),await this['resetSeason'](),d[m(0xec)]='',document[m(0xe3)]('reset-confirmation')[m(0xfd)][m(0xe8)]=m(0xee);}catch(g){alert('Invalid\x20password\x20or\x20authentication\x20failed'),console['error']('Authentication\x20error:',g);}}),c?.[k(0xf2)](k(0xe1),()=>{const n=k,d=document[n(0xe3)]('reset-password');d[n(0xec)]='',document[n(0xe3)](n(0xfa))[n(0xfd)]['display']=n(0xee);});}async[a52j(0xe6)](){const o=a52j;try{const a=await getDoc(doc(db,o(0xef),'seasonCount'));let b=0x1;a['exists']()&&(b=a[o(0xe5)]()[o(0xe4)]+0x1);const c=await getDocs(collection(db,'players')),d={'players':[],'date':new Date(),'seasonNumber':b};for(const e of c['docs']){const f=e['data']();d['players'][o(0xff)]({'username':f['username'],'position':f['position'],'eloRating':f['eloRating']||0x4b0}),await setDoc(doc(db,'players',e['id']),{...f,'eloRating':0x4b0,'position':f['position']});}await setDoc(doc(db,o(0xf6),'season'+b),d),await setDoc(doc(db,o(0xef),'seasonCount'),{'count':b}),alert('Season\x20'+b+o(0xe7)),location[o(0xf3)]();}catch(g){console['error']('Error\x20resetting\x20season:',g),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}export const seasonManager=new SeasonManager();