const a6_0x2a1d8b=a6_0x36ef,a6_0x32ed5b=(function(){let _0x59fb93=!![];return function(_0x5b0e7e,_0x4920ba){const _0x23b920=_0x59fb93?function(){if(_0x4920ba){const _0x1b1384=_0x4920ba['apply'](_0x5b0e7e,arguments);return _0x4920ba=null,_0x1b1384;}}:function(){};return _0x59fb93=![],_0x23b920;};}()),a6_0x3b29e3=a6_0x32ed5b(this,function(){const _0x2dfd8a=a6_0x36ef;let _0x590872;try{const _0x3a88c7=Function(_0x2dfd8a(0x12f)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x590872=_0x3a88c7();}catch(_0x34af63){_0x590872=window;}const _0x216342=_0x590872['console']=_0x590872['console']||{},_0x48dc42=['log','warn',_0x2dfd8a(0x18c),'error',_0x2dfd8a(0x1c7),'table','trace'];for(let _0x22ba17=0x0;_0x22ba17<_0x48dc42['length'];_0x22ba17++){const _0x52cfb4=a6_0x32ed5b['constructor'][_0x2dfd8a(0x18d)]['bind'](a6_0x32ed5b),_0x42eed9=_0x48dc42[_0x22ba17],_0x10806f=_0x216342[_0x42eed9]||_0x52cfb4;_0x52cfb4[_0x2dfd8a(0x143)]=a6_0x32ed5b['bind'](a6_0x32ed5b),_0x52cfb4[_0x2dfd8a(0x185)]=_0x10806f['toString']['bind'](_0x10806f),_0x216342[_0x42eed9]=_0x52cfb4;}});a6_0x3b29e3();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date('2025-07-02')[a6_0x2a1d8b(0x15c)]()}];function isUsernameMuted(_0x10ec35,_0xf94fa4){const _0x3865d7=a6_0x2a1d8b;if(!_0x10ec35)return![];const _0x234c3b=mutedUsers['find'](_0x394318=>_0x394318['username']===_0x10ec35);if(!_0x234c3b)return![];if(!_0xf94fa4)return!![];const _0x153e72=_0xf94fa4 instanceof Date?_0xf94fa4['getTime']():_0xf94fa4['seconds']?_0xf94fa4['seconds']*0x3e8:Date['now']();return _0x153e72>=_0x234c3b[_0x3865d7(0x12d)];}function filterComment(_0x281136,_0x56132b,_0x208fde){if(!_0x281136)return'-';if(isUsernameMuted(_0x56132b,_0x208fde))return'Muted.';return _0x281136;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x50bf1c,_0x22d5a6,_0x13036e){const _0x540b34=a6_0x2a1d8b,_0x48374f='u:'+(_0x13036e[_0x540b34(0x137)]||'');return'previewCache_'+_0x50bf1c+'_p'+_0x22d5a6+'_'+_0x48374f;}function getCachedPage(_0x1736e8){const _0x46f461=a6_0x2a1d8b,_0x14bf7d=sessionStorage[_0x46f461(0x15d)](_0x1736e8);if(_0x14bf7d)try{return JSON['parse'](_0x14bf7d);}catch(_0x463ce7){return console[_0x46f461(0x13c)](_0x46f461(0x1a5),_0x463ce7),sessionStorage['removeItem'](_0x1736e8),null;}return null;}function cachePage(_0x4f20b9,_0x16b242){try{sessionStorage['setItem'](_0x4f20b9,JSON['stringify'](_0x16b242));}catch(_0x57a8df){console['error']('Failed\x20to\x20cache\x20data:',_0x57a8df);}}function getEloColor(_0x148127){const _0x5b4db3=a6_0x2a1d8b,_0x394303=Number(_0x148127);if(_0x394303>=0x7d0)return'#50C878';else{if(_0x394303>=0x708)return'#FFD700';else{if(_0x394303>=0x640)return'#b9f1fc';else{if(_0x394303>=0x578)return _0x5b4db3(0x1a0);else return'#808080';}}}}function formatDate(_0x1dfa11,_0x5c8a5f=![]){if(!_0x1dfa11||!_0x1dfa11['seconds'])return'N/A';const _0x3fa86a=new Date(_0x1dfa11['seconds']*0x3e8);return _0x5c8a5f?_0x3fa86a['toLocaleString']():_0x3fa86a['toLocaleDateString']();}function truncateComment(_0x2c7cc6,_0x3b2571=0x1e){if(!_0x2c7cc6)return'-';if(_0x2c7cc6['length']<=_0x3b2571)return _0x2c7cc6;return _0x2c7cc6['substring'](0x0,_0x3b2571)+'...';}function formatCommentDate(_0x502127){const _0x33b9fb=a6_0x2a1d8b;if(!_0x502127||!_0x502127['seconds'])return'';const _0x55b077=new Date(_0x502127['seconds']*0x3e8),_0x4f52da=new Date(),_0x27c544=Math['abs'](_0x4f52da-_0x55b077),_0x3a2671=Math[_0x33b9fb(0x1ae)](_0x27c544/(0x3e8*0x3c*0x3c*0x18));if(_0x3a2671===0x0)return'Today';else{if(_0x3a2671===0x1)return'Yesterday';else return _0x3a2671<0x7?_0x3a2671+'\x20days\x20ago':_0x55b077['toLocaleDateString']();}}function a6_0x36ef(_0x1fcafc,_0x1a4d59){const _0x3b29e3=a6_0x1e13();return a6_0x36ef=function(_0x32ed5b,_0xc71032){_0x32ed5b=_0x32ed5b-0x11d;let _0x1e13ba=_0x3b29e3[_0x32ed5b];return _0x1e13ba;},a6_0x36ef(_0x1fcafc,_0x1a4d59);}function setLoadingIndicator(_0x2b6e08){const _0x37ec19=a6_0x2a1d8b,_0x5f3c42=document['getElementById']('loading-indicator');if(_0x5f3c42)_0x5f3c42['style']['display']=_0x2b6e08?_0x37ec19(0x1bb):'none';}export function updatePreviewLadderModeUI(){const _0x17088c=a6_0x2a1d8b,_0x28940a=document[_0x17088c(0x1a4)]('preview-ladder-mode'),_0x55d59c=document['getElementById']('preview-d1-button'),_0xdb7fe1=document['getElementById']('preview-d2-button'),_0x478349=document['getElementById']('preview-d3-button');if(_0x28940a)_0x28940a['textContent']=previewState['currentMode'];if(_0x55d59c)_0x55d59c['classList']['toggle']('active',previewState[_0x17088c(0x120)]==='D1');if(_0xdb7fe1)_0xdb7fe1[_0x17088c(0x1b0)]['toggle']('active',previewState['currentMode']==='D2');if(_0x478349)_0x478349[_0x17088c(0x1b0)]['toggle']('active',previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x1d3af9){const _0x1efa3e=a6_0x2a1d8b,_0x51c21b=document['getElementById'](_0x1efa3e(0x134)),_0x16701e=document['getElementById']('previewNextPage'),_0x2c09dd=document['getElementById'](_0x1efa3e(0x1a3));if(!_0x51c21b||!_0x16701e||!_0x2c09dd)return;_0x2c09dd['textContent']='Page\x20'+previewState[_0x1efa3e(0x151)],_0x51c21b['disabled']=previewState['currentPage']<=0x1,_0x16701e[_0x1efa3e(0x13e)]=!_0x1d3af9;}function setPreviewLoadingState(_0x6eba87){const _0x32857c=a6_0x2a1d8b;previewState['isLoading']=_0x6eba87,setLoadingIndicator(_0x6eba87);const _0x1522a0=document[_0x32857c(0x1a4)](_0x32857c(0x155)),_0x3e48e3=_0x1522a0?_0x1522a0[_0x32857c(0x131)]('.matches-loading'):null,_0x2b22c5=document['getElementById']('previewPrevPage'),_0xf1ab10=document['getElementById']('previewNextPage'),_0x430eb8=document['getElementById'](_0x32857c(0x19d)),_0x4f5823=document['getElementById'](_0x32857c(0x18e)),_0x49bcfd=document['getElementById'](_0x32857c(0x16d)),_0x8f5f3=document['getElementById']('clearFilterBtn');if(_0x3e48e3&&!_0x6eba87)_0x3e48e3['style']['display']='none';else _0x3e48e3&&_0x6eba87&&(_0x3e48e3['style'][_0x32857c(0x177)]='block');!_0x6eba87&&_0x1522a0&&!_0x1522a0[_0x32857c(0x131)]('.match-card')&&!_0x1522a0['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x1522a0['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState['filterUsername']?_0x32857c(0x162):'')+_0x32857c(0x166));if(_0x2b22c5)_0x2b22c5['disabled']=_0x6eba87||previewState[_0x32857c(0x151)]<=0x1;if(_0xf1ab10)_0xf1ab10[_0x32857c(0x13e)]=_0x6eba87;if(_0x430eb8)_0x430eb8['disabled']=_0x6eba87;if(_0x4f5823)_0x4f5823['disabled']=_0x6eba87;if(_0x49bcfd)_0x49bcfd[_0x32857c(0x13e)]=_0x6eba87;if(_0x8f5f3)_0x8f5f3[_0x32857c(0x13e)]=_0x6eba87;}function applyClientFilters(_0x5487ef){if(!previewState['filterUsername'])return _0x5487ef;const _0x18fc29=previewState['filterUsername']['toLowerCase']();return _0x5487ef['filter'](_0x209729=>{const _0x36d3e4=a6_0x36ef,_0x4ad04c=(_0x209729['winnerUsername']||'')[_0x36d3e4(0x130)](),_0x4380d3=(_0x209729[_0x36d3e4(0x1c3)]||'')['toLowerCase']();return _0x4ad04c[_0x36d3e4(0x165)](_0x18fc29)||_0x4380d3['includes'](_0x18fc29);});}function a6_0x1e13(){const _0x1196e5=['You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments','\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20','pilots','currentMode','demo','#fff','current','lastVisible','commentPopupTitlePreview','log','matchesPerPage','Clearing\x20cache\x20for\x20refresh/reset','.matches-loading[style*=\x22color:\x20red\x22]',':</strong>\x20\x22','click','Report','muteFromDate','Loading\x20first\x20page\x20from\x20Firestore','return\x20(function()\x20','toLowerCase','querySelector','firstVisible','onclick','previewPrevPage','commentId','stopPropagation','filterUsername','silver','demoLink','commentAddOverlay','subgames','error','innerHTML','disabled','empty','input','auth','currentUser','__proto__','message','commentMatchId','demo-link','timestamp','push','Please\x20enter\x20a\x20comment\x20before\x20submitting','textContent','data','required','removeChild','.player.winner\x20.player-suicides','insertBefore','setAttribute','currentPage','mapPlayed','subgameType','div','recent-matches-preview','loserDemoLink','length','Please\x20enter\x20a\x20demo\x20link','#d32f2f','winner-','displayName','getTime','getItem','Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.','cursor','Comment\x20added\x20successfully','comment-item','\x20matching\x20filters','forEach','warn','includes','.</div>','trim','15px','winnerUsername','\x27s\x20Demo','exists','enhanced-filter-section','applyFilterBtn','map','flex','<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>','jump-to-page','...','.no-comments-message','opacity','Submit','.player.loser\x20.player-name','display','Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.','max','matchComments','\x20matches:','body','missiles-6plus','\x20demo\x20links:','title','style','userProfiles','closest','isLoading','add','toString','comment-popup','demoWordCount','winnerScore','submit','parentNode','closeCommentPopupPreview','info','prototype','preview-d2-button','end','color','preventDefault','userId','value','button','filter','querySelectorAll','commentAddPopup','popup-btn\x20close-btn','winnerOldElo','commentText','split','addEventListener','preview-d1-button','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?','appendChild','#CD7F32','Unknown','enhancedFilters','previewPageInfo','getElementById','Failed\x20to\x20parse\x20cache:','.match-display-wrapper','Loser','previewCache_','Cache\x20miss\x20for\x20page\x20','seconds','rematch','center','dataset','floor','uid','classList','<p>','<strong>','none','Muted.','createElement','Failed\x20to\x20fetch\x20user\x20profile:','.delete-comment-btn','username','jump','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo','block','\x20from\x20cache','approvedMatchesD2','commentOverlayPreview','Comments\x20section\x20not\x20found\x20in\x20template','removeAttribute','levels','Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link','loserUsername','comment','hasNextPage','dogfight','exception','closeAddCommentPopup','firstChild','Error\x20submitting:'];a6_0x1e13=function(){return _0x1196e5;};return a6_0x1e13();}function applyEnhancedClientFilters(_0x3693b6){const _0x340df3=a6_0x2a1d8b;if(!hasEnhancedFilters())return _0x3693b6;return _0x3693b6[_0x340df3(0x195)](_0x342cd6=>{const _0x2b3826=_0x340df3;if(previewState[_0x2b3826(0x1a2)]['pilots']){const _0x19ce9a=previewState['enhancedFilters'][_0x2b3826(0x11f)]['toLowerCase'](),_0x485223=(_0x342cd6['winnerUsername']||'')['toLowerCase'](),_0x4ee959=(_0x342cd6['loserUsername']||'')['toLowerCase']();if(!_0x485223['includes'](_0x19ce9a)&&!_0x4ee959['includes'](_0x19ce9a))return![];}if(previewState['enhancedFilters']['levels']){const _0x7ddfd3=previewState['enhancedFilters'][_0x2b3826(0x1c1)][_0x2b3826(0x130)](),_0x216a08=(_0x342cd6[_0x2b3826(0x152)]||'')[_0x2b3826(0x130)]();if(!_0x216a08['includes'](_0x7ddfd3))return![];}if(previewState['enhancedFilters']['subgames']['length']>0x0){const _0x4deec7=_0x342cd6['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames']['includes'](_0x4deec7))return![];}return!![];});}function hasEnhancedFilters(){const _0x15d43b=a6_0x2a1d8b;return previewState['enhancedFilters']['pilots']||previewState[_0x15d43b(0x1a2)]['levels']||previewState[_0x15d43b(0x1a2)][_0x15d43b(0x13b)]['length']>0x0;}function clearEnhancedFilters(){const _0x534c28=a6_0x2a1d8b;previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document[_0x534c28(0x1a4)]('filter-pilots')['value']='',document['getElementById']('filter-levels')[_0x534c28(0x193)]='';const _0x1f875a=document['getElementById']('filter-subgames');for(let _0xdcc2a of _0x1f875a['options']){_0xdcc2a['selected']=![];}}function jumpToPage(_0x1f45f7){const _0x3c1a61=a6_0x2a1d8b,_0x114a65=document['getElementById']('jump-to-page'),_0x32ecc2=previewState['currentPage'];let _0x556d0f=_0x32ecc2;switch(_0x1f45f7){case'start':_0x556d0f=0x1;break;case _0x3c1a61(0x18f):_0x556d0f=Math[_0x3c1a61(0x179)](_0x32ecc2+0xa,previewState['totalPages']||_0x32ecc2+0xa);break;case'+1':_0x556d0f=_0x32ecc2+0x1;break;case'+5':_0x556d0f=_0x32ecc2+0x5;break;case'+10':_0x556d0f=_0x32ecc2+0xa;break;case'-1':_0x556d0f=Math['max'](0x1,_0x32ecc2-0x1);break;case'-5':_0x556d0f=Math['max'](0x1,_0x32ecc2-0x5);break;case'-10':_0x556d0f=Math['max'](0x1,_0x32ecc2-0xa);break;case'input':const _0x9f23a=parseInt(_0x114a65['value']);_0x9f23a&&_0x9f23a>0x0&&(_0x556d0f=_0x9f23a,_0x114a65[_0x3c1a61(0x193)]='');break;}_0x556d0f!==_0x32ecc2&&_0x556d0f>0x0&&(previewState['currentPage']=_0x556d0f,loadRecentMatchesPreview(_0x3c1a61(0x1b9)));}export async function loadRecentMatchesPreview(_0x293c94='current'){const _0xf53be7=a6_0x2a1d8b,_0x53c89e=document['getElementById']('recent-matches-preview'),_0x39ded1=document['getElementById']('match-card-template');if(previewState[_0xf53be7(0x183)]||!_0x53c89e||!_0x39ded1)return;_0x293c94==='current'&&(console['log'](_0xf53be7(0x128)),Object['keys'](sessionStorage)['forEach'](_0xef64df=>{const _0x36704b=_0xf53be7;_0xef64df['includes'](_0x36704b(0x1a8)+previewState['currentMode'])&&sessionStorage['removeItem'](_0xef64df);}));let _0x1f7f52=previewState['currentPage'];if(_0x293c94==='next')_0x1f7f52++;else{if(_0x293c94==='prev')_0x1f7f52--;else _0x293c94==='current'&&(_0x1f7f52=0x1,previewState['firstVisible']=null,previewState['lastVisible']=null);}if(_0x1f7f52<0x1)_0x1f7f52=0x1;const _0x124d9e=previewState[_0xf53be7(0x151)];previewState[_0xf53be7(0x151)]=_0x1f7f52,updatePreviewPaginationControls(!![]);const _0x12ea7c={'filterUsername':previewState['filterUsername']},_0x3a64e6=getCacheKey(previewState['currentMode'],_0x1f7f52,_0x12ea7c),_0x290272=_0x293c94!=='current'?getCachedPage(_0x3a64e6):null;if(_0x290272){console['log']('Rendering\x20page\x20'+_0x1f7f52+_0xf53be7(0x1bc)),setPreviewLoadingState(!![]),renderMatchCards(_0x290272['docsData']),updatePreviewPaginationControls(_0x290272[_0xf53be7(0x1c5)]),setPreviewLoadingState(![]);return;}console[_0xf53be7(0x126)](_0xf53be7(0x1a9)+_0x1f7f52+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0x53c89e['innerHTML']=_0xf53be7(0x170);const _0x366bfc=previewState['currentMode']==='D1'?'approvedMatches':previewState['currentMode']==='D2'?_0xf53be7(0x1bd):'approvedMatchesD3',_0x392d2e=previewState[_0xf53be7(0x120)]==='D1'?'createdAt':'approvedAt';try{const _0x2d8b74=collection(window['db'],_0x366bfc);let _0x4647a5=[orderBy(_0x392d2e,'desc')];if(_0x1f7f52===0x1)console['log'](_0xf53be7(0x12e)),_0x4647a5[_0xf53be7(0x148)](limit(previewState['matchesPerPage']));else{if(_0x293c94==='next'&&previewState['lastVisible'])console[_0xf53be7(0x126)]('Loading\x20next\x20page\x20using\x20cursor'),_0x4647a5[_0xf53be7(0x148)](startAfter(previewState['lastVisible'])),_0x4647a5[_0xf53be7(0x148)](limit(previewState['matchesPerPage']));else{console['log']('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x580564=_0x1f7f52*previewState['matchesPerPage'];_0x4647a5['push'](limit(_0x580564));}}const _0x2a4af4=query(_0x2d8b74,..._0x4647a5),_0x16ddfb=await getDocs(_0x2a4af4);let _0x3ab16f=_0x16ddfb['docs'];if(_0x1f7f52>0x1&&_0x293c94!=='next'){const _0x574690=(_0x1f7f52-0x1)*previewState['matchesPerPage'];_0x3ab16f=_0x3ab16f['slice'](_0x574690,_0x574690+previewState['matchesPerPage']);}if(_0x3ab16f['length']===0x0){console['log']('No\x20results\x20found\x20for\x20this\x20page');_0x293c94==='next'&&(previewState[_0xf53be7(0x151)]=_0x124d9e,updatePreviewPaginationControls(![]));_0x53c89e['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?'\x20matching\x20filters':'')+'.</div>',setPreviewLoadingState(![]);return;}previewState[_0xf53be7(0x132)]=_0x3ab16f[0x0],previewState['lastVisible']=_0x3ab16f[_0x3ab16f['length']-0x1];const _0x2658b8=_0x3ab16f['map'](_0x2c686e=>({'id':_0x2c686e['id'],..._0x2c686e['data']()}));let _0xaee9d1=![];if(_0x3ab16f[_0xf53be7(0x157)]===previewState['matchesPerPage']){const _0x2bb9aa=query(_0x2d8b74,orderBy(_0x392d2e,'desc'),startAfter(previewState[_0xf53be7(0x124)]),limit(0x1)),_0xc25044=await getDocs(_0x2bb9aa);_0xaee9d1=!_0xc25044['empty'];}const _0x5b79dd=applyClientFilters(_0x2658b8),_0x3525fc={'docsData':_0x2658b8,'hasNextPage':_0xaee9d1};cachePage(getCacheKey(previewState['currentMode'],previewState['currentPage'],_0x12ea7c),_0x3525fc);if(_0x1f7f52>0x1&&_0x293c94!=='next')for(let _0x32fce9=0x1;_0x32fce9<_0x1f7f52;_0x32fce9++){const _0x28183=(_0x32fce9-0x1)*previewState[_0xf53be7(0x127)],_0x2984b4=_0x28183+previewState['matchesPerPage'],_0x3354e1=_0x16ddfb['docs']['slice'](_0x28183,_0x2984b4);if(_0x3354e1['length']>0x0){const _0x3dcbf1=_0x3354e1['map'](_0x2f8430=>({'id':_0x2f8430['id'],..._0x2f8430[_0xf53be7(0x14b)]()})),_0x1d4635=!![];cachePage(getCacheKey(previewState[_0xf53be7(0x120)],_0x32fce9,_0x12ea7c),{'docsData':_0x3dcbf1,'hasNextPage':_0x1d4635}),console[_0xf53be7(0x126)]('Cached\x20intermediary\x20page\x20'+_0x32fce9);}}_0x5b79dd['length']===0x0&&previewState['filterUsername']?_0x53c89e['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState['filterUsername']+'\x22</div>':renderMatchCards(_0x5b79dd),updatePreviewPaginationControls(_0xaee9d1);}catch(_0x5d6c12){console['error']('Error\x20fetching\x20'+previewState['currentMode']+_0xf53be7(0x17b),_0x5d6c12),_0x53c89e['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x5d6c12['message']+'</div>',updatePreviewPaginationControls(![]),previewState[_0xf53be7(0x151)]=_0x124d9e;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x5fe248){const _0x7f8167=a6_0x2a1d8b,_0x351e2c=document['getElementById'](_0x7f8167(0x155)),_0x3e9913=document['getElementById']('match-card-template');if(!_0x351e2c||!_0x3e9913)return;!_0x351e2c['querySelector'](_0x7f8167(0x129))&&(_0x351e2c['innerHTML']='');if(!_0x5fe248||_0x5fe248['length']===0x0){if(!_0x351e2c['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x13ff74=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?_0x7f8167(0x162):'';_0x351e2c['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x13ff74+'.</div>';}return;}const _0xb68c6=applyEnhancedClientFilters(_0x5fe248);if(_0xb68c6[_0x7f8167(0x157)]===0x0){_0x351e2c[_0x7f8167(0x13d)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x301ba1=_0xb68c6[_0x7f8167(0x16e)](_0x15ae1c=>getAllCommentsForMatch(_0x15ae1c['id']));let _0x37c898=[];try{_0x37c898=await Promise['all'](_0x301ba1);}catch(_0x258e44){console['error']('Error\x20fetching\x20comments\x20batch:',_0x258e44),_0x37c898=_0xb68c6['map'](()=>[]);}const _0xecd326={};_0x37c898[_0x7f8167(0x163)]((_0x3ad880,_0x5cfd34)=>{_0xecd326[_0xb68c6[_0x5cfd34]['id']]=_0x3ad880||[];}),_0xb68c6[_0x7f8167(0x163)](_0x1796b2=>{const _0xd97b32=_0x7f8167,_0x1fc75d=_0x3e9913['content']['cloneNode'](!![]),_0x3eb445=_0x1fc75d['querySelector'](_0xd97b32(0x1a6)),_0x24870d=_0x1fc75d['querySelector']('.match-card'),_0x18633a=getEloRankClass(_0x1796b2['winnerOldElo']);_0x24870d['classList'][_0xd97b32(0x184)](_0xd97b32(0x15a)+_0x18633a),_0x24870d[_0xd97b32(0x131)]('.match-map')['textContent']=_0x1796b2['mapPlayed']||'Unknown\x20Map',_0x24870d[_0xd97b32(0x131)]('.match-date')['textContent']=formatDate(_0x1796b2['approvedAt']||_0x1796b2['createdAt']);const _0x9ba0d5=_0x24870d[_0xd97b32(0x131)]('.player.winner\x20.player-name');_0x9ba0d5[_0xd97b32(0x14a)]=_0x1796b2['winnerUsername']||'Unknown',_0x9ba0d5[_0xd97b32(0x180)]['color']=getEloColor(_0x1796b2[_0xd97b32(0x199)]),_0x24870d[_0xd97b32(0x131)]('.player.winner\x20.player-score')['textContent']=_0x1796b2[_0xd97b32(0x188)]??0x0;const _0x4248c9=_0x24870d['querySelector'](_0xd97b32(0x14e)),_0x483d2a=_0x1796b2['winnerSuicides']||0x0;_0x4248c9['textContent']='S:\x20'+_0x483d2a;const _0x3daf03=_0x24870d['querySelector'](_0xd97b32(0x176));_0x3daf03[_0xd97b32(0x14a)]=_0x1796b2[_0xd97b32(0x1c3)]||_0xd97b32(0x1a1),_0x3daf03['style'][_0xd97b32(0x190)]=getEloColor(_0x1796b2['loserOldElo']),_0x24870d[_0xd97b32(0x131)]('.player.loser\x20.player-score')['textContent']=_0x1796b2['loserScore']??0x0;const _0x407cef=_0x24870d[_0xd97b32(0x131)]('.player.loser\x20.player-suicides'),_0x18159f=_0x1796b2['loserSuicides']||0x0;_0x407cef[_0xd97b32(0x14a)]='S:\x20'+_0x18159f;const _0x27c5dc=_0x24870d[_0xd97b32(0x131)]('.match-subgame');if(_0x27c5dc){if(_0x1796b2['subgameType']&&_0x1796b2[_0xd97b32(0x153)]['trim']()!==''){_0x27c5dc[_0xd97b32(0x14a)]=_0x1796b2['subgameType'],_0x27c5dc['style']['display']='block';const _0x2524fb=getSubgameClass(_0x1796b2['subgameType']);_0x2524fb&&_0x27c5dc['classList']['add'](_0x2524fb);}else _0x27c5dc['textContent']='Standard\x20Match',_0x27c5dc['style']['display']='block',_0x27c5dc['style'][_0xd97b32(0x174)]='0.6';}const _0x1dad8c=_0x24870d[_0xd97b32(0x131)]('.comment.winner-comment'),_0x446308=_0x24870d[_0xd97b32(0x131)]('.comment.loser-comment'),_0x2bbd90=_0x1796b2['winnerComment']||'',_0xce9022=_0x1796b2['loserComment']||'',_0x576e33=_0x1796b2['approvedAt']||_0x1796b2['createdAt'],_0x3edd12=filterComment(_0x2bbd90,_0x1796b2['winnerUsername'],_0x576e33),_0x4ef553=filterComment(_0xce9022,_0x1796b2['loserUsername'],_0x576e33);_0x1dad8c['textContent']='\x22'+truncateComment(_0x2bbd90)+'\x22',_0x446308['textContent']='\x22'+truncateComment(_0xce9022)+'\x22';_0x2bbd90&&!isUsernameMuted(_0x1796b2[_0xd97b32(0x169)],_0x576e33)?_0x1dad8c[_0xd97b32(0x133)]=()=>showPreviewCommentPopup(_0x3edd12,_0x1796b2[_0xd97b32(0x169)]||'Winner',getEloColor(_0x1796b2['winnerOldElo'])):(_0x1dad8c['textContent']=_0x3edd12==='Muted.'?_0xd97b32(0x1b4):'-',_0x1dad8c['style'][_0xd97b32(0x15f)]='default',_0x1dad8c[_0xd97b32(0x133)]=null);_0xce9022&&!isUsernameMuted(_0x1796b2[_0xd97b32(0x1c3)])?_0x446308[_0xd97b32(0x133)]=()=>showPreviewCommentPopup(_0x4ef553,_0x1796b2['loserUsername']||_0xd97b32(0x1a7),getEloColor(_0x1796b2['loserOldElo'])):(_0x446308['textContent']=_0x4ef553==='Muted.'?'Muted.':'-',_0x446308[_0xd97b32(0x180)][_0xd97b32(0x15f)]='default',_0x446308['onclick']=null);const _0x3b6d6b=_0x3eb445?.[_0xd97b32(0x131)]('.community-comments-section');if(!_0x3b6d6b)console['warn'](_0xd97b32(0x1bf));else{const _0x3bf3a4=_0x3b6d6b['querySelector']('.comments-container'),_0x1289d9=_0x3bf3a4?.[_0xd97b32(0x131)](_0xd97b32(0x173)),_0x2bb0bf=_0x3b6d6b['querySelector']('.add-comment-btn');if(_0x3bf3a4){while(_0x3bf3a4['firstChild']&&_0x3bf3a4[_0xd97b32(0x1c9)]!==_0x1289d9){_0x3bf3a4[_0xd97b32(0x14d)](_0x3bf3a4['firstChild']);}_0x2bb0bf&&_0x2bb0bf['addEventListener'](_0xd97b32(0x12b),()=>{showAddCommentPopup(_0x1796b2['id']);});const _0x4a232c=_0xecd326[_0x1796b2['id']]||[];if(_0x4a232c['length']>0x0){if(_0x1289d9)_0x1289d9[_0xd97b32(0x180)][_0xd97b32(0x177)]='none';const _0x222ef1=(_0x177601,_0x5cf7b8)=>{const _0x21c245=_0xd97b32,_0x3c8976=_0x177601[_0x21c245(0x19b)]('\x20');if(_0x3c8976[_0x21c245(0x157)]<=_0x5cf7b8)return _0x177601;return _0x3c8976['slice'](0x0,_0x5cf7b8)['join']('\x20')+_0x21c245(0x172);};_0x4a232c['forEach'](_0x5c383b=>{const _0x25e53c=_0xd97b32,_0x456cb9=document['createElement'](_0x25e53c(0x154));if(_0x5c383b['type']==='demo'){_0x456cb9['className']=_0x25e53c(0x146),_0x456cb9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x5c383b['demoLink']+_0x25e53c(0x11e)+_0x5c383b[_0x25e53c(0x1b8)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x5c383b['description']||'No\x20description\x20provided')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x5417b9=window['auth']['currentUser'],_0x51b8db=_0x5417b9&&_0x5c383b['userId']===_0x5417b9['uid'];if(_0x51b8db){const _0x8db453=document[_0x25e53c(0x1b5)](_0x25e53c(0x194));_0x8db453['className']='delete-comment-btn',_0x8db453['innerHTML']='×',_0x8db453['setAttribute']('aria-label','Delete\x20demo'),_0x8db453['addEventListener']('click',_0x5781dd=>{const _0x2ad28b=_0x25e53c;_0x5781dd[_0x2ad28b(0x191)](),_0x5781dd['stopPropagation'](),deleteComment(_0x5c383b['id'],_0x456cb9);}),_0x456cb9[_0x25e53c(0x19f)](_0x8db453);}}else{_0x456cb9['className']=_0x25e53c(0x161);const _0x1d745f=isUsernameMuted(_0x5c383b['username'],_0x5c383b[_0x25e53c(0x147)]),_0x7b52da=_0x1d745f?_0x25e53c(0x1b4):_0x222ef1(_0x5c383b['text']||'',0xf),_0x240a96=_0x5c383b['username']||'Anonymous',_0xecd795=window['auth']['currentUser'],_0x5a1f94=_0xecd795&&_0x5c383b['userId']===_0xecd795['uid'];let _0x1a9ffd='';_0x5a1f94&&(_0x1a9ffd='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');_0x456cb9['innerHTML']=_0x1a9ffd+_0x25e53c(0x1b2)+_0x240a96+_0x25e53c(0x12a)+_0x7b52da+'\x22';if(_0x5a1f94){const _0x245112=_0x456cb9['querySelector'](_0x25e53c(0x1b7));_0x245112&&_0x245112['addEventListener']('click',_0x13934c=>{const _0xa4b0c6=_0x25e53c;_0x13934c[_0xa4b0c6(0x136)](),deleteComment(_0x5c383b['id'],_0x456cb9);});}!_0x1d745f?_0x456cb9['addEventListener']('click',()=>{showFullCommentLightbox(_0x5c383b);}):_0x456cb9['style']['cursor']='default';}_0x3bf3a4[_0x25e53c(0x14f)](_0x456cb9,_0x3bf3a4['firstChild']);});}else{if(_0x1289d9)_0x1289d9['style']['display']=_0xd97b32(0x1bb);}}}const _0x4d3811=_0x24870d['querySelector']('.match-demo-links');if(_0x4d3811){const _0x14506f=_0x24870d['querySelector']('.winner-demo-link'),_0x77bbe2=_0x24870d['querySelector']('.loser-demo-link'),_0x1de85b=_0x1796b2['winnerDemoLink']||null,_0x5bb2d9=_0x1796b2[_0xd97b32(0x156)]||_0x1796b2[_0xd97b32(0x139)]||null;console[_0xd97b32(0x126)]('Match\x20'+_0x1796b2['id']+_0xd97b32(0x17e),{'winner':_0x1de85b,'loser':_0x5bb2d9}),_0x14506f&&(_0x1de85b?(_0x14506f['href']=_0x1de85b,_0x14506f[_0xd97b32(0x180)][_0xd97b32(0x177)]=_0xd97b32(0x16f),_0x14506f[_0xd97b32(0x17f)]=_0x1796b2[_0xd97b32(0x169)]+_0xd97b32(0x16a)):_0x14506f['style']['display']=_0xd97b32(0x1b3)),_0x77bbe2&&(_0x5bb2d9?(_0x77bbe2['href']=_0x5bb2d9,_0x77bbe2['style'][_0xd97b32(0x177)]='flex',_0x77bbe2[_0xd97b32(0x17f)]=_0x1796b2[_0xd97b32(0x1c3)]+'\x27s\x20Demo'):_0x77bbe2['style']['display']='none'),_0x1de85b&&_0x14506f||_0x5bb2d9&&_0x77bbe2?_0x4d3811['style']['display']=_0xd97b32(0x16f):_0x4d3811['style'][_0xd97b32(0x177)]=_0xd97b32(0x1b3);}_0x351e2c[_0xd97b32(0x19f)](_0x1fc75d);});}function getSubgameClass(_0xdf31ae){const _0x1be265=a6_0x2a1d8b,_0x4263fe={'Fusion\x20Match':'fusion-match','≥6\x20Missiles':_0x1be265(0x17d),'≥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':'blind-match','Rematch':_0x1be265(0x1ab),'Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':'altered-powerups','Mega\x20Match':'mega-match','Dogfight':_0x1be265(0x1c6),'Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x4263fe[_0xdf31ae]||'';}async function deleteComment(_0x30d869,_0x228740){const _0x21555e=a6_0x2a1d8b,_0x5305b7=window['auth']['currentUser'];if(!_0x5305b7){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm(_0x21555e(0x19e)))return;try{const _0x2b5bea=doc(window['db'],_0x21555e(0x17a),_0x30d869),_0x4efeaf=await getDoc(_0x2b5bea);if(!_0x4efeaf[_0x21555e(0x16b)]()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x5a3a90=_0x4efeaf['data']();if(_0x5a3a90[_0x21555e(0x192)]!==_0x5305b7[_0x21555e(0x1af)]){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x2b5bea);if(_0x228740&&_0x228740['parentNode']){_0x228740[_0x21555e(0x18a)][_0x21555e(0x14d)](_0x228740);const _0x5a78e3=_0x228740[_0x21555e(0x182)]('.comments-container');if(_0x5a78e3&&!_0x5a78e3['querySelector']('.comment-item')){const _0x1f1c5f=_0x5a78e3[_0x21555e(0x131)]('.no-comments-message');if(_0x1f1c5f)_0x1f1c5f['style']['display']=_0x21555e(0x1bb);}}console[_0x21555e(0x126)]('Comment\x20deleted\x20successfully');}catch(_0x2ec4ab){console['error']('Error\x20deleting\x20comment:',_0x2ec4ab),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x2ec4ab[_0x21555e(0x144)]);}}async function getAllCommentsForMatch(_0xa88614){const _0x1935a1=a6_0x2a1d8b;if(!_0xa88614)return[];try{const _0x24fc53=collection(window['db'],_0x1935a1(0x17a)),_0x2218e8=query(_0x24fc53,where('matchId','==',_0xa88614),orderBy('timestamp','desc')),_0x2d4dbf=await getDocs(_0x2218e8);if(_0x2d4dbf[_0x1935a1(0x13f)])return[];return _0x2d4dbf['docs']['map'](_0x4ce116=>({'id':_0x4ce116['id'],..._0x4ce116['data']()}));}catch(_0x4b5949){return console[_0x1935a1(0x13c)]('Error\x20fetching\x20comments:',_0x4b5949),[];}}async function submitComment(_0x1367a0){const _0x5681bf=a6_0x2a1d8b;_0x1367a0[_0x5681bf(0x191)]();if(!window[_0x5681bf(0x141)]||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready');return;}const _0xe3c466=window[_0x5681bf(0x141)][_0x5681bf(0x142)];if(!_0xe3c466){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x538eb6=document['getElementById'](_0x5681bf(0x145))?.[_0x5681bf(0x193)],_0x2f2006=document['getElementById']('commentText')?.['value']?.['trim']();if(!_0x538eb6||!_0x2f2006){alert(_0x5681bf(0x149));return;}const _0x335ff4=_0x2f2006[_0x5681bf(0x19b)](/\s+/)['filter'](_0x48e520=>_0x48e520[_0x5681bf(0x157)]>0x0)[_0x5681bf(0x157)];if(_0x335ff4>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.');return;}const _0x3d78b5=document['querySelector']('.submit-comment-btn');_0x3d78b5&&(_0x3d78b5[_0x5681bf(0x13e)]=!![],_0x3d78b5[_0x5681bf(0x14a)]='Submitting...');try{let _0x1e19f3='Anonymous';try{const _0x4f0d07=doc(window['db'],_0x5681bf(0x181),_0xe3c466['uid']),_0x38a0e2=await getDoc(_0x4f0d07);if(_0x38a0e2[_0x5681bf(0x16b)]()){const _0x24353b=_0x38a0e2['data']();_0x24353b[_0x5681bf(0x1b8)]&&(_0x1e19f3=_0x24353b['username']);}_0x1e19f3==='Anonymous'&&_0xe3c466['displayName']&&(_0x1e19f3=_0xe3c466[_0x5681bf(0x15b)]);}catch(_0x5a5546){console['warn'](_0x5681bf(0x1b6),_0x5a5546),_0xe3c466['displayName']&&(_0x1e19f3=_0xe3c466[_0x5681bf(0x15b)]);}const _0x3bef74={'matchId':_0x538eb6,'userId':_0xe3c466['uid'],'username':_0x1e19f3,'text':_0x2f2006,'timestamp':serverTimestamp()};console['log']('Submitting\x20comment\x20as:',_0x1e19f3);const _0x2c0380=collection(window['db'],'matchComments');await addDoc(_0x2c0380,_0x3bef74),console['log'](_0x5681bf(0x160)),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0xddfb3e){console['error']('Error\x20submitting\x20comment:',_0xddfb3e),alert('Failed\x20to\x20add\x20comment:\x20'+_0xddfb3e[_0x5681bf(0x144)]),_0x3d78b5&&(_0x3d78b5['disabled']=![],_0x3d78b5[_0x5681bf(0x14a)]='Submit');}}function closeAddCommentPopup(){const _0xff8924=a6_0x2a1d8b,_0x2d2627=document['getElementById']('commentAddPopup'),_0x2f2568=document['getElementById']('commentAddOverlay');if(_0x2d2627)_0x2d2627['style'][_0xff8924(0x177)]=_0xff8924(0x1b3);if(_0x2f2568)_0x2f2568['style'][_0xff8924(0x177)]='none';}function showAddCommentPopup(_0x55af1b){const _0x38c36b=a6_0x2a1d8b,_0x33cc35=window[_0x38c36b(0x141)][_0x38c36b(0x142)];if(!_0x33cc35){alert(_0x38c36b(0x1ba));return;}let _0x447760=document[_0x38c36b(0x1a4)]('commentAddPopup'),_0x39d0c1=document['getElementById']('commentAddOverlay');!_0x447760&&(_0x447760=document[_0x38c36b(0x1b5)]('div'),_0x447760['id']=_0x38c36b(0x197),_0x447760['className']=_0x38c36b(0x186),document['body']['appendChild'](_0x447760));!_0x39d0c1&&(_0x39d0c1=document['createElement']('div'),_0x39d0c1['id']=_0x38c36b(0x13a),_0x39d0c1['className']='comment-overlay',document[_0x38c36b(0x17c)]['appendChild'](_0x39d0c1));_0x447760[_0x38c36b(0x13d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x55af1b+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x447760['style']['display']='block',_0x39d0c1[_0x38c36b(0x180)][_0x38c36b(0x177)]='block',document['getElementById'](_0x38c36b(0x1c8))['addEventListener']('click',closeAddCommentPopup),_0x39d0c1[_0x38c36b(0x19c)]('click',closeAddCommentPopup);const _0x3e93c8=_0x447760['querySelectorAll']('.option-tab');_0x3e93c8['forEach'](_0x3e3b15=>{const _0x244ba8=_0x38c36b;_0x3e3b15[_0x244ba8(0x19c)]('click',function(){const _0x386fda=_0x244ba8;_0x3e93c8['forEach'](_0xec7c43=>_0xec7c43['classList']['remove']('active')),document[_0x386fda(0x196)]('.option-content')[_0x386fda(0x163)](_0x188217=>_0x188217['style']['display']='none'),this['classList']['add']('active');const _0x2819ce=this['dataset']['option'];document['getElementById'](_0x2819ce+'Option')[_0x386fda(0x180)]['display']='block',_0x2819ce===_0x386fda(0x121)?(document['getElementById'](_0x386fda(0x139))['setAttribute']('required',''),document['getElementById']('commentText')[_0x386fda(0x1c0)](_0x386fda(0x14c))):(document['getElementById']('demoLink')[_0x386fda(0x1c0)](_0x386fda(0x14c)),document['getElementById']('commentText')[_0x386fda(0x150)]('required',''));});}),document['getElementById']('commentText')['setAttribute']('required',''),document[_0x38c36b(0x1a4)](_0x38c36b(0x139))[_0x38c36b(0x1c0)]('required'),setupWordCounter(_0x38c36b(0x19a),'wordCount',0xf),setupWordCounter('demoDescription',_0x38c36b(0x187),0x14),document['getElementById']('addCommentForm')[_0x38c36b(0x19c)](_0x38c36b(0x189),submitCommentOrDemo);}function setupWordCounter(_0x1b8405,_0x196dca,_0x210aaa){const _0x117c8a=a6_0x2a1d8b,_0x2f8848=document['getElementById'](_0x1b8405),_0x1795c8=document['getElementById'](_0x196dca);if(!_0x2f8848||!_0x1795c8)return;_0x2790d3(),_0x2f8848['addEventListener'](_0x117c8a(0x140),_0x2790d3);function _0x2790d3(){const _0x322628=_0x117c8a,_0x1a8977=_0x2f8848[_0x322628(0x193)][_0x322628(0x167)](),_0xcfbda1=_0x1a8977?_0x1a8977['split'](/\s+/)[_0x322628(0x195)](_0x3f0c5f=>_0x3f0c5f['length']>0x0)['length']:0x0;_0x1795c8['textContent']=_0xcfbda1,_0xcfbda1>_0x210aaa?_0x1795c8['style']['color']='#ff4444':_0x1795c8['style']['color']='#aaa';}}async function submitCommentOrDemo(_0x54c6cd){const _0x2e2945=a6_0x2a1d8b;_0x54c6cd['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x268f64=window[_0x2e2945(0x141)]['currentUser'];if(!_0x268f64){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0xc35f28=document['getElementById']('commentMatchId')['value'],_0x58a6c0=document['querySelector']('.option-tab.active')['dataset']['option'];let _0x434fbf='Anonymous';try{const _0x5a95d5=doc(window['db'],'userProfiles',_0x268f64['uid']),_0x4385f8=await getDoc(_0x5a95d5);if(_0x4385f8['exists']()){const _0x1dba62=_0x4385f8['data']();_0x1dba62['username']&&(_0x434fbf=_0x1dba62['username']);}_0x434fbf==='Anonymous'&&_0x268f64['displayName']&&(_0x434fbf=_0x268f64['displayName']);}catch(_0x580d5b){console['warn']('Failed\x20to\x20fetch\x20username:',_0x580d5b),_0x268f64['displayName']&&(_0x434fbf=_0x268f64['displayName']);}const _0x2ea4a2=document[_0x2e2945(0x131)]('.submit-comment-btn');_0x2ea4a2&&(_0x2ea4a2[_0x2e2945(0x13e)]=!![],_0x2ea4a2['textContent']='Submitting...');try{if(_0x58a6c0===_0x2e2945(0x1c4)){const _0xc75fbd=document['getElementById']('commentText')['value']['trim']();if(!_0xc75fbd){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x2ea4a2['disabled']=![],_0x2ea4a2[_0x2e2945(0x14a)]='Submit';return;}const _0x2bb724=_0xc75fbd['split'](/\s+/)['filter'](_0x4c33bf=>_0x4c33bf['length']>0x0)['length'];if(_0x2bb724>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.'),_0x2ea4a2[_0x2e2945(0x13e)]=![],_0x2ea4a2['textContent']='Submit';return;}const _0xa189f1={'matchId':_0xc35f28,'userId':_0x268f64['uid'],'username':_0x434fbf,'text':_0xc75fbd,'type':_0x2e2945(0x1c4),'timestamp':serverTimestamp()},_0x420843=collection(window['db'],'matchComments');await addDoc(_0x420843,_0xa189f1);}else{const _0x148d5a=document['getElementById']('demoLink')[_0x2e2945(0x193)]['trim'](),_0xcb656b=document['getElementById']('demoDescription')['value']['trim']()||'Demo\x20link';if(!_0x148d5a){alert(_0x2e2945(0x158)),_0x2ea4a2[_0x2e2945(0x13e)]=![],_0x2ea4a2['textContent']=_0x2e2945(0x175);return;}try{new URL(_0x148d5a);}catch(_0x576a2d){alert(_0x2e2945(0x1c2)),_0x2ea4a2[_0x2e2945(0x13e)]=![],_0x2ea4a2['textContent']='Submit';return;}const _0x6f2d1b=_0xcb656b[_0x2e2945(0x19b)](/\s+/)['filter'](_0x43f147=>_0x43f147[_0x2e2945(0x157)]>0x0)['length'];if(_0x6f2d1b>0x14){alert('Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.'),_0x2ea4a2[_0x2e2945(0x13e)]=![],_0x2ea4a2[_0x2e2945(0x14a)]='Submit';return;}const _0x2749bf={'matchId':_0xc35f28,'userId':_0x268f64['uid'],'username':_0x434fbf,'demoLink':_0x148d5a,'description':_0xcb656b,'type':'demo','text':'Demo:\x20'+_0xcb656b,'timestamp':serverTimestamp()},_0x2e6079=collection(window['db'],'matchComments');await addDoc(_0x2e6079,_0x2749bf);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x2e2945(0x123));}catch(_0x5b262b){console['error'](_0x2e2945(0x1ca),_0x5b262b),alert('Failed\x20to\x20submit:\x20'+_0x5b262b['message']),_0x2ea4a2&&(_0x2ea4a2['disabled']=![],_0x2ea4a2['textContent']='Submit');}}function getEloRankClass(_0xe6ecc5){const _0x318112=a6_0x2a1d8b,_0x48cbee=Number(_0xe6ecc5);if(_0x48cbee>=0x7d0)return'emerald';else{if(_0x48cbee>=0x708)return'gold';else{if(_0x48cbee>=0x640)return _0x318112(0x138);else{if(_0x48cbee>=0x578)return'bronze';else return'unranked';}}}}function showPreviewCommentPopup(_0x34fd29,_0x114a18,_0xf1c41a=a6_0x2a1d8b(0x122)){const _0x43cd5a=a6_0x2a1d8b,_0x119c29=document['getElementById']('commentPopupPreview'),_0x48ea59=document[_0x43cd5a(0x1a4)]('commentOverlayPreview'),_0xb47efe=document[_0x43cd5a(0x1a4)]('commentPopupTitlePreview'),_0x16f4ab=document[_0x43cd5a(0x1a4)]('commentPopupContentPreview'),_0x1be251=document['getElementById']('reportCommentButton');if(!_0x119c29||!_0x48ea59||!_0xb47efe||!_0x16f4ab||!_0x1be251)return;_0x119c29['dataset']['commentText']=_0x34fd29,_0x119c29['dataset']['commentUser']=_0x114a18,_0xb47efe[_0x43cd5a(0x180)]['color']=_0xf1c41a,_0xb47efe['textContent']='Comment\x20from\x20'+_0x114a18,_0x16f4ab['textContent']=_0x34fd29,_0x1be251['onclick']=reportComment,_0x119c29['style']['display']='block',_0x48ea59[_0x43cd5a(0x180)]['display']='block';}function closePreviewCommentPopup(){const _0x572fdd=a6_0x2a1d8b,_0x5127c2=document['getElementById']('commentPopupPreview'),_0x532299=document[_0x572fdd(0x1a4)](_0x572fdd(0x1be));if(_0x5127c2)_0x5127c2[_0x572fdd(0x180)]['display']='none';if(_0x532299)_0x532299[_0x572fdd(0x180)]['display']='none';}async function reportComment(){const _0x5555b7=a6_0x2a1d8b,_0x4c30cb=window['auth'][_0x5555b7(0x142)];if(!_0x4c30cb){alert(_0x5555b7(0x11d));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0x3a3db6=document['getElementById']('commentPopupPreview'),_0x54d9f7={'commentAuthor':_0x3a3db6[_0x5555b7(0x1ad)]['commentUser']||'Unknown\x20User','commentText':_0x3a3db6[_0x5555b7(0x1ad)][_0x5555b7(0x19a)]||'','matchId':previewState['currentMatchId']||'','reportedBy':_0x4c30cb['uid'],'reporterUsername':_0x4c30cb['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},_0xdc463d=collection(window['db'],'badComments');await addDoc(_0xdc463d,_0x54d9f7),alert(_0x5555b7(0x15e)),closePreviewCommentPopup();}catch(_0x490bc6){console['error']('Error\x20reporting\x20comment:',_0x490bc6),alert('Failed\x20to\x20report\x20comment:\x20'+_0x490bc6['message']);}}function showFullCommentLightbox(_0xc3d74c){const _0x337207=a6_0x2a1d8b;if(isUsernameMuted(_0xc3d74c['username']))return;const _0x4574e3=document['getElementById']('commentPopupPreview'),_0x3a31c6=document['getElementById']('commentOverlayPreview'),_0x3fb0c1=document[_0x337207(0x1a4)](_0x337207(0x125)),_0x57a4ac=document['getElementById']('commentPopupContentPreview');if(!_0x4574e3||!_0x3a31c6||!_0x3fb0c1||!_0x57a4ac)return;_0x3fb0c1['style']['color']='#fff',_0x3fb0c1['textContent']='Comment\x20from\x20'+_0xc3d74c['username'];if(_0xc3d74c[_0x337207(0x147)]){const _0x1cc270=new Date(_0xc3d74c['timestamp'][_0x337207(0x1aa)]*0x3e8),_0x3ef1e7=_0x1cc270['toLocaleString']();_0x57a4ac[_0x337207(0x13d)]=_0x337207(0x1b1)+_0xc3d74c['text']+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x3ef1e7+'</small>';}else _0x57a4ac['textContent']=_0xc3d74c['text'];_0x4574e3[_0x337207(0x1ad)][_0x337207(0x135)]=_0xc3d74c['id']||'',_0x4574e3['dataset']['commentUser']=_0xc3d74c['username']||'',_0x4574e3[_0x337207(0x1ad)]['commentText']=_0xc3d74c['text']||'',_0x4574e3['dataset']['matchId']=_0xc3d74c['matchId']||'';const _0x1c9f26=_0x4574e3['querySelector']('.popup-actions')||document[_0x337207(0x1b5)]('div');!_0x4574e3['querySelector']('.popup-actions')?(_0x1c9f26['className']='popup-actions',_0x1c9f26[_0x337207(0x180)]['display']=_0x337207(0x16f),_0x1c9f26['style']['justifyContent']=_0x337207(0x1ac),_0x1c9f26[_0x337207(0x180)]['gap']='10px',_0x1c9f26[_0x337207(0x180)]['marginTop']=_0x337207(0x168),_0x4574e3['appendChild'](_0x1c9f26)):_0x1c9f26['innerHTML']='';const _0x155666=document['createElement']('button');_0x155666['textContent']='Close',_0x155666['className']=_0x337207(0x198),_0x155666['id']=_0x337207(0x18b),_0x155666[_0x337207(0x19c)](_0x337207(0x12b),closePreviewCommentPopup);const _0x55c457=document['createElement']('button');_0x55c457['textContent']=_0x337207(0x12c),_0x55c457['className']='popup-btn\x20report-btn',_0x55c457['style']['backgroundColor']=_0x337207(0x159),_0x55c457[_0x337207(0x19c)]('click',reportComment),_0x1c9f26['appendChild'](_0x155666),_0x1c9f26[_0x337207(0x19f)](_0x55c457),_0x4574e3['style']['display']=_0x337207(0x1bb),_0x3a31c6[_0x337207(0x180)]['display']='block';}export function setupPreviewEventListeners(){const _0x44ff43=a6_0x2a1d8b,_0x2a650e=document['getElementById']('previewPrevPage'),_0x4a514f=document[_0x44ff43(0x1a4)]('previewNextPage'),_0x518dde=document[_0x44ff43(0x1a4)]('preview-d1-button'),_0x88aff=document['getElementById'](_0x44ff43(0x18e)),_0x4e6485=document['getElementById']('preview-d3-button'),_0x18367f=document[_0x44ff43(0x1a4)]('filter-toggle-button'),_0x533d65=document['getElementById'](_0x44ff43(0x16c));if(!_0x2a650e||!_0x4a514f||!_0x518dde||!_0x88aff||!_0x4e6485||!_0x18367f||!_0x533d65){console[_0x44ff43(0x164)](_0x44ff43(0x178));return;}_0x2a650e[_0x44ff43(0x19c)]('click',()=>{const _0x299e20=_0x44ff43;if(!_0x2a650e[_0x299e20(0x13e)])loadRecentMatchesPreview('prev');}),_0x4a514f[_0x44ff43(0x19c)]('click',()=>{if(!_0x4a514f['disabled'])loadRecentMatchesPreview('next');}),_0x518dde['addEventListener']('click',()=>{const _0x58f09a=_0x44ff43;previewState['currentMode']!=='D1'&&!previewState[_0x58f09a(0x183)]&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x58f09a(0x123)));}),_0x88aff['addEventListener']('click',()=>{const _0x335d0e=_0x44ff43;previewState[_0x335d0e(0x120)]!=='D2'&&!previewState['isLoading']&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x4e6485[_0x44ff43(0x19c)](_0x44ff43(0x12b),()=>{const _0x2de025=_0x44ff43;previewState['currentMode']!=='D3'&&!previewState['isLoading']&&(previewState[_0x2de025(0x120)]='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x18367f&&_0x533d65&&_0x18367f['addEventListener']('click',()=>{const _0x18ea8b=_0x44ff43,_0x10445b=_0x533d65['style']['display']!=='none';_0x533d65['style']['display']=_0x10445b?_0x18ea8b(0x1b3):_0x18ea8b(0x1bb),_0x18367f[_0x18ea8b(0x1b0)]['toggle']('active',!_0x10445b);});const _0x37c70d=document['getElementById']('apply-enhanced-filters'),_0x5510e0=document[_0x44ff43(0x1a4)]('clear-enhanced-filters');_0x37c70d&&_0x37c70d['addEventListener']('click',()=>{const _0x147b44=_0x44ff43;previewState['enhancedFilters']['pilots']=document['getElementById']('filter-pilots')['value']['trim'](),previewState['enhancedFilters']['levels']=document['getElementById']('filter-levels')[_0x147b44(0x193)]['trim']();const _0x38fdeb=document['getElementById']('filter-subgames');previewState['enhancedFilters']['subgames']=Array['from'](_0x38fdeb['selectedOptions'])['map'](_0x583582=>_0x583582[_0x147b44(0x193)])['filter'](_0x362c50=>_0x362c50!==''),loadRecentMatchesPreview('current');});_0x5510e0&&_0x5510e0[_0x44ff43(0x19c)](_0x44ff43(0x12b),()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document['querySelectorAll']('.jump-btn')['forEach'](_0x4fb681=>{const _0x5cb993=_0x44ff43;_0x4fb681[_0x5cb993(0x19c)](_0x5cb993(0x12b),()=>{const _0x4d4490=_0x5cb993,_0x98e240=_0x4fb681[_0x4d4490(0x1ad)]['jump'];jumpToPage(_0x98e240);});});const _0x43ad43=document['getElementById'](_0x44ff43(0x171));_0x43ad43&&_0x43ad43['addEventListener']('keypress',_0x31b287=>{_0x31b287['key']==='Enter'&&jumpToPage('input');});const _0xe333d4=document['getElementById']('closeCommentPopupPreview'),_0x48a38f=document['getElementById'](_0x44ff43(0x1be));if(_0xe333d4)_0xe333d4['addEventListener']('click',closePreviewCommentPopup);if(_0x48a38f)_0x48a38f['addEventListener']('click',closePreviewCommentPopup);const _0x389f98=document['getElementById'](_0x44ff43(0x1c8)),_0x47c0d4=document['getElementById']('commentAddOverlay'),_0x16b424=document[_0x44ff43(0x1a4)]('addCommentForm');if(_0x389f98)_0x389f98['addEventListener'](_0x44ff43(0x12b),closeAddCommentPopup);if(_0x47c0d4)_0x47c0d4[_0x44ff43(0x19c)](_0x44ff43(0x12b),closeAddCommentPopup);if(_0x16b424)_0x16b424['addEventListener']('submit',submitComment);const _0x54b8ed=document['getElementById']('commentText'),_0x239f49=document['getElementById']('wordCount');_0x54b8ed&&_0x239f49&&setupWordCounter(_0x44ff43(0x19a),'wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window['submitComment']=submitComment;