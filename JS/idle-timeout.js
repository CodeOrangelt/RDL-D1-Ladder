const a20_0x556288=a20_0x2afb;import a20_0x2d12bd,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x501abe=a20_0x2afb;if(document[_0x501abe(0x1c6)](_0x501abe(0x1e5)))return;const _0x112996=document[_0x501abe(0x1ec)]('div');_0x112996['id']=_0x501abe(0x1e5),_0x112996['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0xe26d6f=document['createElement']('div');_0xe26d6f['style'][_0x501abe(0x1db)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x2740c3=document['createElement']('h2');_0x2740c3['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x2740c3['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x5c2877=document[_0x501abe(0x1ec)]('p');_0x5c2877['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x5c2877['style'][_0x501abe(0x1db)]=_0x501abe(0x1cd);const _0x484fd0=document[_0x501abe(0x1ec)](_0x501abe(0x1cf));_0x484fd0['id']='resume-session-btn',_0x484fd0['textContent']=_0x501abe(0x1d9),_0x484fd0['style'][_0x501abe(0x1db)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x484fd0['onmouseover']=function(){this['style']['backgroundColor']='#3da05f';},_0x484fd0[_0x501abe(0x1e6)]=function(){this['style']['backgroundColor']='#50C878';},_0xe26d6f['appendChild'](_0x2740c3),_0xe26d6f[_0x501abe(0x1f2)](_0x5c2877),_0xe26d6f['appendChild'](_0x484fd0),_0x112996['appendChild'](_0xe26d6f),document['body']['appendChild'](_0x112996),_0x484fd0['addEventListener'](_0x501abe(0x1f0),resumeSession),createNetworkErrorOverlay();}function a20_0x5c10(){const _0x52df90=['getElementById','opacity','error','includes','unavailable','Active\x20listeners:','mousemove','color:\x20#fff;\x20margin-bottom:\x2030px;','disabled','button','Connection\x20test\x20failed:','pendingOperations','checkFirebaseIdleStatus','querySelector','resumeAllListeners','style','Session\x20resumed','log','blockedOperations','Return\x20to\x20Website','network-error-overlay','cssText','retry-connection-btn','Session\x20suspended:','message','bind','#network-error-overlay\x20p','toString','forceIdleTimeout','RDL_SESSION_SUSPENDED','exception','idle-overlay','onmouseout','addEventListener','mousedown','RDL_NETWORK_ERROR','preventDefault','activeListeners','createElement','Network\x20error:','size','flex','click','now','appendChild','textContent','code','color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','keys'];a20_0x5c10=function(){return _0x52df90;};return a20_0x5c10();}function createNetworkErrorOverlay(){const _0x5247a4=a20_0x2afb;if(document['getElementById']('network-error-overlay'))return;const _0x49aad1=document[_0x5247a4(0x1ec)]('div');_0x49aad1['id']='network-error-overlay',_0x49aad1['style'][_0x5247a4(0x1db)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x2ca4cd=document[_0x5247a4(0x1ec)]('div');_0x2ca4cd['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x43db5f=document['createElement']('h2');_0x43db5f['textContent']='Connection\x20Error',_0x43db5f['style'][_0x5247a4(0x1db)]=_0x5247a4(0x1f5);const _0xecfd8e=document['createElement']('p');_0xecfd8e['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0xecfd8e['style'][_0x5247a4(0x1db)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x3465b7=document['createElement'](_0x5247a4(0x1cf));_0x3465b7['id']=_0x5247a4(0x1dc),_0x3465b7[_0x5247a4(0x1f3)]='Retry\x20Connection',_0x3465b7['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x1ea1b3=document['createElement']('button');_0x1ea1b3['id']='reload-page-btn',_0x1ea1b3['textContent']='Reload\x20Page',_0x1ea1b3[_0x5247a4(0x1d5)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x42d246=document['createElement']('div');_0x42d246[_0x5247a4(0x1d5)][_0x5247a4(0x1db)]='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x42d246['appendChild'](_0x3465b7),_0x42d246['appendChild'](_0x1ea1b3),_0x2ca4cd['appendChild'](_0x43db5f),_0x2ca4cd['appendChild'](_0xecfd8e),_0x2ca4cd['appendChild'](_0x42d246),_0x49aad1['appendChild'](_0x2ca4cd),document['body']['appendChild'](_0x49aad1),_0x3465b7['addEventListener'](_0x5247a4(0x1f0),retryConnection),_0x1ea1b3[_0x5247a4(0x1e7)]('click',()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x3cbdb4=a20_0x2afb;clearTimeout(idleTimer);const _0x32fa7b=document['getElementById'](_0x3cbdb4(0x1da));_0x32fa7b&&(_0x32fa7b[_0x3cbdb4(0x1d5)]['display']=_0x3cbdb4(0x1ef)),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a20_0x2d12bd['suspendAllListeners']();}function retryConnection(){const _0x349182=a20_0x2afb;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x5aa164=document[_0x349182(0x1d3)](_0x349182(0x1e0));_0x5aa164&&(_0x5aa164[_0x349182(0x1f3)]='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x3a8c54=document['getElementById']('retry-connection-btn');_0x3a8c54&&(_0x3a8c54[_0x349182(0x1ce)]=!![],_0x3a8c54[_0x349182(0x1d5)][_0x349182(0x1c7)]='0.5',_0x3a8c54['style']['cursor']='not-allowed');return;}const _0x306b86=document['getElementById'](_0x349182(0x1da));_0x306b86&&(_0x306b86['style']['display']='none');window[_0x349182(0x1e9)]=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x2a9242}=window;if(_0x2a9242){const _0x3678d3=_0x2a9242['collection']('system');_0x2a9242['getDocs'](_0x3678d3)['catch'](_0x4b7751=>{const _0x2d4d2c=_0x349182;console['error'](_0x2d4d2c(0x1d0),_0x4b7751),handleNetworkError();});}}catch(_0x1ed6b1){console['error']('Failed\x20to\x20test\x20connection:',_0x1ed6b1),handleNetworkError();}a20_0x2d12bd[_0x349182(0x1d4)]();}function suspendSession(){const _0x8f3f50=a20_0x2afb;isSessionSuspended=!![];const _0x20a0f0=document['getElementById']('idle-overlay');_0x20a0f0&&(_0x20a0f0['style']['display']=_0x8f3f50(0x1ef)),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a20_0x2d12bd['suspendAllListeners']();}function resumeSession(){const _0x5a2fb4=a20_0x2afb;isSessionSuspended=![],window[_0x5a2fb4(0x1e3)]=![];const _0x474ba2=document['getElementById']('idle-overlay');_0x474ba2&&(_0x474ba2['style']['display']='none'),console[_0x5a2fb4(0x1d7)](_0x5a2fb4(0x1d6)),resetIdleTimer(),a20_0x2d12bd['resumeAllListeners'](),idleTimer&&Date[_0x5a2fb4(0x1f1)]()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location']['reload']());}function initIdleTimeout(){const _0x3eba82=a20_0x2afb,_0x1567f7=(function(){let _0x5025f1=!![];return function(_0x3c9a8c,_0x3a452c){const _0xac8414=_0x5025f1?function(){if(_0x3a452c){const _0x5bb8b3=_0x3a452c['apply'](_0x3c9a8c,arguments);return _0x3a452c=null,_0x5bb8b3;}}:function(){};return _0x5025f1=![],_0xac8414;};}()),_0x395f20=_0x1567f7(this,function(){const _0x544d22=a20_0x2afb,_0x6510a1=function(){let _0x2e1945;try{_0x2e1945=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x45328c){_0x2e1945=window;}return _0x2e1945;},_0x5bc12c=_0x6510a1(),_0x1fed8c=_0x5bc12c['console']=_0x5bc12c['console']||{},_0x3cd400=['log','warn','info','error',_0x544d22(0x1e4),'table','trace'];for(let _0x1bbd0f=0x0;_0x1bbd0f<_0x3cd400['length'];_0x1bbd0f++){const _0x2b7e2b=_0x1567f7['constructor']['prototype'][_0x544d22(0x1df)](_0x1567f7),_0xcb2655=_0x3cd400[_0x1bbd0f],_0x4948d7=_0x1fed8c[_0xcb2655]||_0x2b7e2b;_0x2b7e2b['__proto__']=_0x1567f7[_0x544d22(0x1df)](_0x1567f7),_0x2b7e2b['toString']=_0x4948d7[_0x544d22(0x1e1)]['bind'](_0x4948d7),_0x1fed8c[_0xcb2655]=_0x2b7e2b;}});_0x395f20(),createIdleOverlay();const _0x2124cc=[_0x3eba82(0x1e8),_0x3eba82(0x1cc),'keypress','scroll','touchstart','click'];_0x2124cc['forEach'](_0x1a58ce=>{document['addEventListener'](_0x1a58ce,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener'](_0x3eba82(0x1c8),function(_0xe59372){const _0x3890f9=_0x3eba82;_0xe59372['error']&&(_0xe59372['error']['message']&&_0xe59372['error'][_0x3890f9(0x1de)]['includes']('network')||_0xe59372['error']['code']&&(_0xe59372['error']['code']===_0x3890f9(0x1ca)||_0xe59372[_0x3890f9(0x1c8)][_0x3890f9(0x1f4)]==='resource-exhausted'||_0xe59372['error']['code'][_0x3890f9(0x1c9)]('network')))&&(handleNetworkError(),_0xe59372[_0x3890f9(0x1ea)]());}),resetIdleTimer(),console[_0x3eba82(0x1d7)]('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window[_0x3eba82(0x1d2)]=function(){const _0x43be66=_0x3eba82;return console[_0x43be66(0x1d7)](_0x43be66(0x1dd),window[_0x43be66(0x1e3)]),console[_0x43be66(0x1d7)](_0x43be66(0x1ed),window['RDL_NETWORK_ERROR']),console['log'](_0x43be66(0x1cb),a20_0x2d12bd['activeListeners']['size']),console['log']('Pending\x20operations:',a20_0x2d12bd['pendingOperations'][_0x43be66(0x1ee)]),console['log']('Blocked\x20operations:',a20_0x2d12bd[_0x43be66(0x1d8)]||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a20_0x2d12bd[_0x43be66(0x1eb)][_0x43be66(0x1f6)]()),'pendingOperations':Array['from'](a20_0x2d12bd[_0x43be66(0x1d1)]['keys']()),'blockedCount':a20_0x2d12bd['blockedOperations']||0x0};},window[_0x3eba82(0x1e2)]=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}function a20_0x2afb(_0x254197,_0x4cb546){const _0x5e5303=a20_0x5c10();return a20_0x2afb=function(_0x1c6871,_0x436845){_0x1c6871=_0x1c6871-0x1c6;let _0x5c10d5=_0x5e5303[_0x1c6871];return _0x5c10d5;},a20_0x2afb(_0x254197,_0x4cb546);}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document[a20_0x556288(0x1e7)]('DOMContentLoaded',initIdleTimeout):initIdleTimeout();