function a0_0x215f(_0x11ba99,_0x282dcf){const _0x55bc70=a0_0x502e();return a0_0x215f=function(_0x43b0e1,_0x2331e8){_0x43b0e1=_0x43b0e1-0xc6;let _0x3ab322=_0x55bc70[_0x43b0e1];return _0x3ab322;},a0_0x215f(_0x11ba99,_0x282dcf);}const a0_0x515694=a0_0x215f;(function(_0x45e2de,_0x568060){const _0x559978=a0_0x215f,_0xa05c57=_0x45e2de();while(!![]){try{const _0x50e5d4=-parseInt(_0x559978(0xd3))/0x1*(-parseInt(_0x559978(0x141))/0x2)+-parseInt(_0x559978(0x11b))/0x3*(parseInt(_0x559978(0x12e))/0x4)+parseInt(_0x559978(0xf7))/0x5*(parseInt(_0x559978(0xd1))/0x6)+-parseInt(_0x559978(0x116))/0x7+parseInt(_0x559978(0x148))/0x8+-parseInt(_0x559978(0xc7))/0x9+-parseInt(_0x559978(0x10d))/0xa;if(_0x50e5d4===_0x568060)break;else _0xa05c57['push'](_0xa05c57['shift']());}catch(_0xfb4579){_0xa05c57['push'](_0xa05c57['shift']());}}}(a0_0x502e,0x9fb92));const a0_0x2331e8=(function(){let _0x727ef2=!![];return function(_0x28f36a,_0x45c2d5){const _0xd42fb=_0x727ef2?function(){if(_0x45c2d5){const _0x5bacd4=_0x45c2d5['apply'](_0x28f36a,arguments);return _0x45c2d5=null,_0x5bacd4;}}:function(){};return _0x727ef2=![],_0xd42fb;};}()),a0_0x43b0e1=a0_0x2331e8(this,function(){const _0x4d1da6=a0_0x215f,_0x40d971=function(){let _0x5b2104;try{_0x5b2104=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x358063){_0x5b2104=window;}return _0x5b2104;},_0x4f1e09=_0x40d971(),_0xbe3896=_0x4f1e09[_0x4d1da6(0x133)]=_0x4f1e09[_0x4d1da6(0x133)]||{},_0x394639=['log','warn',_0x4d1da6(0x109),_0x4d1da6(0xd2),_0x4d1da6(0xe5),'table','trace'];for(let _0x2a49af=0x0;_0x2a49af<_0x394639['length'];_0x2a49af++){const _0xd3730b=a0_0x2331e8['constructor'][_0x4d1da6(0xe0)]['bind'](a0_0x2331e8),_0x444ca6=_0x394639[_0x2a49af],_0x4d6c5b=_0xbe3896[_0x444ca6]||_0xd3730b;_0xd3730b['__proto__']=a0_0x2331e8[_0x4d1da6(0x138)](a0_0x2331e8),_0xd3730b['toString']=_0x4d6c5b['toString'][_0x4d1da6(0x138)](_0x4d6c5b),_0xbe3896[_0x444ca6]=_0xd3730b;}});a0_0x43b0e1();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':a0_0x515694(0x145),'description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'contrast':{'price':0x0,'name':'Nightlight','description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':'Red','description':a0_0x515694(0x14c)},'gold':{'price':0x320,'name':'Gold','description':a0_0x515694(0xfc)},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'cockpit':{'price':0x4b0,'name':'Cockpit','description':'is\x20that...\x20Pfunk?'}},TOKENS={'pwr01':{'price':0x64,'name':'Energy','description':'Enhanced\x20energy\x20generation\x20unit','image':'../images/tokens/subgame/pwr01.gif','category':'powerup'},'fan':{'price':0x96,'name':'Fan','description':'Show\x20your\x20support\x20with\x20this\x20fan\x20token.','image':'../images/tokens/Fan.gif','category':'fun'},'marker':{'price':0xfa,'name':'Marker','description':a0_0x515694(0x132),'image':'../images/tokens/Marker.gif','category':'fun'},'laser':{'price':0x12c,'name':a0_0x515694(0xf8),'description':'Classic\x20laser\x20weapon\x20token.','image':'../images/tokens/Laser.gif','category':'weapon'},'pbomb':{'price':0x15e,'name':a0_0x515694(0x13a),'description':'Strategic\x20explosive\x20device','image':'../images/tokens/subgame/pbomb.gif','category':'weapon'},'fusion':{'price':0x15e,'name':a0_0x515694(0x123),'description':'Devastating\x20fusion\x20weapon\x20technology','image':'../images/tokens/subgame/fusion.gif','category':'weapon'},'lock':{'price':0x1c2,'name':'Lock','description':'Lock\x20in\x20your\x20victory.','image':a0_0x515694(0x152),'category':'fun'},'blob01':{'price':0x1f4,'name':'Blob\x20Token\x201','description':'A\x20mysterious\x20purple\x20blob\x20token','image':a0_0x515694(0xe3),'category':'blob'},'plasma':{'price':0x1f4,'name':'Plasma\x20Cannon','description':'High-powered\x20plasma\x20cannon\x20token.','image':'../images/tokens/Plasma.gif','category':'weapon'},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':a0_0x515694(0x108),'image':'../images/tokens/cloak.gif','category':a0_0x515694(0xe4)},'pwr02':{'price':0x258,'name':'Shield\x20Orb','description':'Advanced\x20energy\x20storage\x20system','image':a0_0x515694(0xcd),'category':'powerup'},'mercury':{'price':0x258,'name':a0_0x515694(0xe7),'description':a0_0x515694(0x119),'image':'../images/tokens/Mercury.gif','category':a0_0x515694(0xd0)},'plasmablobl':{'price':0x258,'name':'Plasma\x20Blob','description':'A\x20mysterious\x20plasma\x20blob.','image':a0_0x515694(0xf6),'category':a0_0x515694(0x124)},'smissile':{'price':0x28a,'name':a0_0x515694(0x126),'description':'Intelligent\x20targeting\x20system','image':a0_0x515694(0xce),'category':'weapon'},'smartmine':{'price':0x2ee,'name':a0_0x515694(0x114),'description':'A\x20cunning\x20explosive\x20device.','image':'../images/tokens/Smartmine.gif','category':a0_0x515694(0xd0)},'mmissile':{'price':0x320,'name':'Mega\x20Missile','description':a0_0x515694(0x15e),'image':'../images/tokens/subgame/mmissile.gif','category':'weapon'},'gauge18':{'price':0x320,'name':'R/Y/B\x20Keys','description':'Monitor\x20your\x20ship\x27s\x20energy\x20levels','image':a0_0x515694(0x15b),'category':'equipment'},'extralife':{'price':0x320,'name':'Extra\x20Life','description':a0_0x515694(0xca),'image':a0_0x515694(0x103),'category':'special'},'hostage':{'price':0x3b6,'name':a0_0x515694(0xf1),'description':'Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','image':a0_0x515694(0x10a),'category':a0_0x515694(0xe4)},'phoenix':{'price':0x3b6,'name':a0_0x515694(0xc8),'description':'Fiery\x20phoenix\x20cannon\x20token.','image':'../images/tokens/Phoenix.gif','category':'weapon'},'blob02':{'price':0x3e8,'name':'Blob\x20Token\x202','description':'Another\x20enigmatic\x20blob\x20creature','image':'../images/tokens/blob02.gif','category':'blob'},'invuln':{'price':0x5dc,'name':'Invulnerability','description':'Become\x20invincible\x20for\x20a\x20short\x20time.','image':'../images/tokens/Invuln.gif','category':a0_0x515694(0x122)},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':'The\x20final\x20blob\x20in\x20the\x20collection','image':'../images/tokens/blob03.gif','category':'blob'},'reactor':{'price':0x7d0,'name':'Reactor','description':a0_0x515694(0x154),'image':'../images/tokens/Reactor.gif','category':'special'},'pyro':{'price':0xbb8,'name':'Pyro','description':'The\x20iconic\x20Pyro-GX\x20ship.','image':'../images/tokens/Pyro.gif','category':'ship'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;function a0_0x502e(){const _0xd3761b=['cannot-afford','tokenId','display','For\x20the\x20angry\x20type.','Failed\x20to\x20unequip\x20token:\x20','click','purchase','You\x20need\x20','block','../images/tokens/Lock.gif','equippedToken','The\x20heart\x20of\x20every\x20mine.','currentUser','opacity','\x20not\x20found','style','apply-theme','uid','../images/tokens/gauge18.gif','displayLadder','getElementById','Heavy\x20ordinance\x20for\x20tough\x20situations','sale','textContent','9622377eWgiwH','Phoenix\x20Cannon','❌\x20User\x20not\x20authenticated','A\x20rare\x20extra\x20life\x20token.','ThemeSystem','Please\x20sign\x20in\x20to\x20sell\x20tokens','../images/tokens/subgame/pwr02.gif','../images/tokens/subgame/smissile.gif','🏪\x20Redeem\x20store\x20initializing...','weapon','4394118UOzWqm','error','1FlBsXC','add','auth-warning','Sold\x20','message','sign-in-paid','Unexpected\x20token\x20error:','refreshUI','Themes\x20container\x20not\x20found','.themes-grid','points','className','0.5','prototype','Failed\x20to\x20equip\x20token:\x20','Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.','../images/tokens/blob01.gif','special','exception','can-equip','Mercury\x20Missile','User','Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:','email','includes','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Sign\x20in\x20to\x20Purchase','exists','Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:','function','Hostage','user-points','createElement','\x20for\x20','userTokens','../images/tokens/Plasmablobl.gif','5udWxNE','Laser','\x20points?','code','Buy\x20for\x20','Only\x20the\x20best\x20get\x20this\x20one','log','Please\x20sign\x20in\x20to\x20unequip\x20tokens','name','Not\x20enough\x20points.\x20You\x20need\x20','data','🔄\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token','../images/tokens/Extralife.gif','\x20Points','split','disabled','cursor','Become\x20one\x20with\x20the\x20shadows','info','../images/tokens/Hostage.gif','sign-in','isUserAdmin','2019840wGNUvt','success','none','\x20theme\x20applied!','Token\x20clicked:\x20','userProfiles','appendChild','Smart\x20Mine','RedeemStore','3351474CaUdLV','preventDefault','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>','Fast\x20and\x20furious\x20missile\x20token.','You\x20already\x20own\x20the\x20','358191sqblyM','Error\x20loading\x20user\x20data:','[data-token]','dataset','floor','displayName','warn','powerup','Fusion\x20Cannon','blob','store-content','Smart\x20Missile','forEach','Current\x20Theme','✅\x20Purchased\x20','Tokens\x20container\x20not\x20found','warning','Need\x20','\x22\x20alt=\x22','4qLNfyJ','!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','price','visible','Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','console','theme','Successfully\x20purchased\x20','\x20is\x20already\x20your\x20current\x20theme','classList','bind','remove','Proximity\x20Bomb','.token-select-btn','addEventListener','Token\x20equip\x20failed:','isAdmin','parentNode','closest','2558060TjxnMN','background','permission-denied','New\x20user\x20profile\x20created','Classic\x20RDL','inventory','token','4097272Wttrqv'];a0_0x502e=function(){return _0xd3761b;};return a0_0x502e();}document['addEventListener']('DOMContentLoaded',()=>{const _0xcc3279=a0_0x515694;console[_0xcc3279(0xfd)](_0xcc3279(0xcf)),storeContainer=document['getElementById'](_0xcc3279(0x125)),pointsDisplay=document['getElementById'](_0xcc3279(0xf2)),authWarning=document['getElementById'](_0xcc3279(0xd5)),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x1116e1=>{const _0x2d9038=a0_0x215f;if(_0x1116e1){console['log']('✅\x20User\x20authenticated:',_0x1116e1[_0x2d9038(0x120)]||_0x1116e1[_0x2d9038(0xea)]);if(authWarning)authWarning['style']['display']='none';if(storeContainer)storeContainer['style'][_0x2d9038(0x14b)]='block';await loadUserData(_0x1116e1),updateThemeButtons(),updateTokenButtons();}else{console['log'](_0x2d9038(0xc9));if(authWarning)authWarning[_0x2d9038(0x158)]['display']=_0x2d9038(0x151);if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x5d508c){const _0x11292b=a0_0x515694;try{const _0x5b1805=doc(db,'userProfiles',_0x5d508c[_0x11292b(0x15a)]),_0x51def5=await getDoc(_0x5b1805);if(_0x51def5['exists']()){const _0x46430d=_0x51def5['data']();userData={'points':_0x46430d['points']||0x0,'inventory':_0x46430d[_0x11292b(0x146)]||[],'isAdmin':_0x46430d['isAdmin']||![],'equippedToken':_0x46430d['equippedToken']||null},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window[_0x11292b(0x10c)]=userData['isAdmin'],userData[_0x11292b(0x13e)]&&(console['log']('👑\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData[_0x11292b(0xdd)]+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items,\x20Equipped:\x20'+(userData['equippedToken']||_0x11292b(0x10f)));}else await setDoc(_0x5b1805,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x5d508c['displayName']||_0x5d508c[_0x11292b(0xea)]?.[_0x11292b(0x105)]('@')[0x0]||_0x11292b(0xe8)}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay['textContent']='0'),window['isUserAdmin']=![],console[_0x11292b(0xfd)](_0x11292b(0x144));}catch(_0x27d4f9){console['error'](_0x11292b(0x11c),_0x27d4f9);}}function userOwnsTheme(_0x2a6f67){const _0x483f0b=a0_0x515694;if(THEMES[_0x2a6f67]?.[_0x483f0b(0x130)]===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x2a6f67);}function userOwnsToken(_0x44a138){return userData['inventory']['includes']('token_'+_0x44a138);}function userHasTokenEquipped(_0x35b79d){const _0x394f0b=a0_0x515694;return userData[_0x394f0b(0x153)]===_0x35b79d;}function getEquippedToken(){return userData['equippedToken']||null;}async function purchaseTheme(_0x49d719){const _0x40cd3f=a0_0x515694,_0x44c0b4=auth[_0x40cd3f(0x155)];if(!_0x44c0b4)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes',_0x40cd3f(0xd2)),![];const _0xfc49d6=THEMES[_0x49d719];if(!_0xfc49d6)return console[_0x40cd3f(0xd2)]('Theme\x20'+_0x49d719+_0x40cd3f(0x157)),![];if(userData['points']<_0xfc49d6[_0x40cd3f(0x130)])return showMessage(_0x40cd3f(0x100)+(_0xfc49d6[_0x40cd3f(0x130)]-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x49d719))return showMessage('You\x20already\x20own\x20the\x20'+_0xfc49d6['name']+'\x20theme','info'),![];try{return await processPurchase(_0x49d719,_0xfc49d6,'theme');}catch(_0x552a64){return console['error']('Theme\x20purchase\x20failed:',_0x552a64),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}async function purchaseToken(_0x15f6af){const _0x4e352a=a0_0x515694,_0x49de21=auth['currentUser'];if(!_0x49de21)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens',_0x4e352a(0xd2)),![];const _0x58d435=TOKENS[_0x15f6af];if(!_0x58d435)return console['error']('Token\x20'+_0x15f6af+'\x20not\x20found'),![];if(userData[_0x4e352a(0xdd)]<_0x58d435[_0x4e352a(0x130)])return showMessage(_0x4e352a(0x100)+(_0x58d435['price']-userData[_0x4e352a(0xdd)])+'\x20more\x20points.','error'),![];if(userOwnsToken(_0x15f6af))return showMessage('You\x20already\x20own\x20the\x20'+_0x58d435['name']+'\x20token','info'),![];try{return await processPurchase(_0x15f6af,_0x58d435,'token');}catch(_0x12667b){return console['error']('Token\x20purchase\x20failed:',_0x12667b),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}async function processPurchase(_0x3ec4d3,_0x4ac2c1,_0x5d118b){const _0x1defa0=a0_0x515694,_0x582342=auth['currentUser'];try{const _0x4875bf=doc(db,'userProfiles',_0x582342['uid']),_0x3e1628=await getDoc(_0x4875bf);if(!_0x3e1628['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x565dfd=_0x3e1628['data'](),_0x5f47e5=_0x565dfd['points']||0x0,_0x5ee020=_0x565dfd['inventory']||[];if(_0x5f47e5<_0x4ac2c1['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x5ee020['includes'](_0x5d118b+'_'+_0x3ec4d3))return showMessage('You\x20already\x20own\x20this\x20'+_0x5d118b,'info'),![];const _0x400c23=_0x5f47e5-_0x4ac2c1['price'],_0x444492=[..._0x5ee020,_0x5d118b+'_'+_0x3ec4d3];await updateDoc(_0x4875bf,{'points':_0x400c23,'inventory':_0x444492,'lastPurchase':serverTimestamp()});if(_0x5d118b===_0x1defa0(0x147))try{const _0x584f79=doc(db,_0x1defa0(0xf5),_0x582342[_0x1defa0(0x15a)]),_0x22ed03=await getDoc(_0x584f79);let _0x280620=[];_0x22ed03['exists']()&&(_0x280620=_0x22ed03[_0x1defa0(0x101)]()['tokens']||[]);const _0x5c41dd=new Date();_0x280620['push']({'tokenId':_0x3ec4d3,'tokenName':_0x4ac2c1['name'],'tokenImage':_0x4ac2c1['image'],'category':_0x4ac2c1['category'],'purchasedAt':_0x5c41dd,'price':_0x4ac2c1['price'],'equipped':![]}),await setDoc(_0x584f79,{'userId':_0x582342['uid'],'username':_0x565dfd['username']||_0x582342['displayName']||'Unknown','tokens':_0x280620,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache===_0x1defa0(0xf0)&&clearTokenCache(_0x582342['uid']),console[_0x1defa0(0xfd)]('✅\x20Token\x20'+_0x3ec4d3+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0x288467){console['warn'](_0x1defa0(0xe9),_0x288467),_0x288467[_0x1defa0(0xfa)]===_0x1defa0(0x143)?console[_0x1defa0(0xfd)]('🔧\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console['error'](_0x1defa0(0xd9),_0x288467);}try{await addDoc(collection(db,'transactions'),{'userId':_0x582342['uid'],'userEmail':_0x582342['email'],'itemId':_0x5d118b+'_'+_0x3ec4d3,'itemTitle':_0x4ac2c1['name'],'price':_0x4ac2c1[_0x1defa0(0x130)],'type':_0x1defa0(0x14f),'category':_0x5d118b,'timestamp':serverTimestamp()});}catch(_0x4f68a0){console[_0x1defa0(0x121)](_0x1defa0(0xef),_0x4f68a0);}return userData['points']=_0x400c23,userData['inventory']=_0x444492,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),updateTokenButtons(),_0x5d118b===_0x1defa0(0x134)&&updateThemeButtons(),console['log'](_0x1defa0(0x129)+_0x4ac2c1[_0x1defa0(0xff)]+'\x20for\x20'+_0x4ac2c1['price']+'\x20points'),showMessage(_0x1defa0(0x135)+_0x4ac2c1['name']+_0x1defa0(0x12f),'success'),!![];}catch(_0x14229e){console['error']('Purchase\x20processing\x20error:',_0x14229e);if(_0x14229e['code']===_0x1defa0(0x143))showMessage('Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.',_0x1defa0(0xd2));else{if(_0x14229e['code']==='unavailable')showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.',_0x1defa0(0xd2));else _0x14229e[_0x1defa0(0xfa)]==='unauthenticated'?showMessage(_0x1defa0(0xe2),'error'):showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error');}return![];}}async function equipToken(_0x369450){const _0x5c95e1=a0_0x515694,_0x50e59a=auth[_0x5c95e1(0x155)];if(!_0x50e59a)return showMessage('Please\x20sign\x20in\x20to\x20equip\x20tokens',_0x5c95e1(0xd2)),![];const _0x3afb94=TOKENS[_0x369450];if(!_0x3afb94)return console['error']('Token\x20'+_0x369450+'\x20not\x20found'),![];if(!userOwnsToken(_0x369450))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it',_0x5c95e1(0xd2)),![];try{const _0x385608=doc(db,'userProfiles',_0x50e59a['uid']);await updateDoc(_0x385608,{'equippedToken':_0x369450,'lastTokenEquip':serverTimestamp()});try{const _0x472051=doc(db,'userTokens',_0x50e59a['uid']),_0x59db30=await getDoc(_0x472051);if(_0x59db30['exists']()){const _0x111efa=_0x59db30['data'](),_0x2e88f5=_0x111efa['tokens']||[],_0x462ce5=_0x2e88f5['map'](_0x5d5431=>({..._0x5d5431,'equipped':_0x5d5431['tokenId']===_0x369450}));await updateDoc(_0x472051,{'tokens':_0x462ce5,'equippedToken':_0x369450,'lastUpdated':serverTimestamp()});}}catch(_0x39b443){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0x39b443);}return userData['equippedToken']=_0x369450,typeof clearTokenCache==='function'&&(clearTokenCache(_0x50e59a[_0x5c95e1(0x15a)]),clearTokenCache()),setTimeout(()=>{const _0x3eb24d=_0x5c95e1;window[_0x3eb24d(0x15c)]&&typeof window[_0x3eb24d(0x15c)]===_0x3eb24d(0xf0)&&(console['log'](_0x3eb24d(0x102)),window['displayLadder'](!![])),window['RedeemStore']&&typeof window['RedeemStore']['refreshUI']===_0x3eb24d(0xf0)&&window['RedeemStore']['refreshUI']();},0x1f4),console['log']('✅\x20Equipped\x20token:\x20'+_0x3afb94['name']),showMessage(_0x3afb94['name']+'\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x380d3e){return console[_0x5c95e1(0xd2)](_0x5c95e1(0x13d),_0x380d3e),_0x380d3e[_0x5c95e1(0xfa)]===_0x5c95e1(0x143)?showMessage('Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.',_0x5c95e1(0x12b)):showMessage(_0x5c95e1(0xe1)+_0x380d3e['message'],'error'),![];}}async function unequipToken(){const _0x52e718=a0_0x515694,_0x29ee6e=auth['currentUser'];if(!_0x29ee6e)return showMessage(_0x52e718(0xfe),'error'),![];if(!userData['equippedToken'])return showMessage('No\x20token\x20is\x20currently\x20equipped','info'),![];try{const _0x3d9a75=doc(db,'userProfiles',_0x29ee6e['uid']);await updateDoc(_0x3d9a75,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x3635a4=doc(db,_0x52e718(0xf5),_0x29ee6e['uid']),_0x5ab821=await getDoc(_0x3635a4);if(_0x5ab821['exists']()){const _0x4a7097=_0x5ab821[_0x52e718(0x101)](),_0x3ffdc0=_0x4a7097['tokens']||[],_0x2544db=_0x3ffdc0['map'](_0x19cf6f=>({..._0x19cf6f,'equipped':![]}));await updateDoc(_0x3635a4,{'tokens':_0x2544db,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData['equippedToken']=null,typeof clearTokenCache==='function'&&(clearTokenCache(_0x29ee6e['uid']),clearTokenCache()),setTimeout(()=>{const _0x3d41ac=_0x52e718;window['displayLadder']&&typeof window['displayLadder']===_0x3d41ac(0xf0)&&(console['log']('🔄\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x3d41ac(0x115)]['refreshUI']==='function'&&window['RedeemStore'][_0x3d41ac(0xda)]();},0x1f4),console[_0x52e718(0xfd)]('✅\x20Token\x20unequipped'),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x3e0ef5){return console['error']('Token\x20unequip\x20failed:',_0x3e0ef5),showMessage(_0x52e718(0x14d)+_0x3e0ef5[_0x52e718(0xd7)],_0x52e718(0xd2)),![];}}async function sellToken(_0x4e2325){const _0x1b517a=a0_0x515694,_0xe1916e=auth['currentUser'];if(!_0xe1916e)return showMessage(_0x1b517a(0xcc),'error'),![];if(!userData['isAdmin'])return showMessage('Only\x20admins\x20can\x20sell\x20tokens',_0x1b517a(0xd2)),![];const _0x5d2ebf=TOKENS[_0x4e2325];if(!_0x5d2ebf)return console['error']('Token\x20'+_0x4e2325+'\x20not\x20found'),![];if(!userOwnsToken(_0x4e2325))return showMessage('You\x20don\x27t\x20own\x20this\x20token','error'),![];try{const _0x47b0f0=doc(db,_0x1b517a(0x112),_0xe1916e['uid']),_0x3ac0a9=await getDoc(_0x47b0f0),_0x1b34e2=_0x3ac0a9['data'](),_0x5d7aad=Math['floor'](_0x5d2ebf['price']*0.5),_0x22214c=(_0x1b34e2[_0x1b517a(0xdd)]||0x0)+_0x5d7aad,_0x32409d=(_0x1b34e2['inventory']||[])['filter'](_0x240a76=>_0x240a76!=='token_'+_0x4e2325),_0x33ecb8=_0x1b34e2['equippedToken']===_0x4e2325?null:_0x1b34e2[_0x1b517a(0x153)];await updateDoc(_0x47b0f0,{'points':_0x22214c,'inventory':_0x32409d,'equippedToken':_0x33ecb8,'lastSale':serverTimestamp()});const _0x39c842=doc(db,_0x1b517a(0xf5),_0xe1916e['uid']),_0x398646=await getDoc(_0x39c842);if(_0x398646[_0x1b517a(0xee)]()){const _0x564fb8=_0x398646['data'](),_0x24e1ab=_0x564fb8['tokens']||[],_0x32f387=_0x24e1ab['filter'](_0x40df42=>_0x40df42[_0x1b517a(0x14a)]!==_0x4e2325);await updateDoc(_0x39c842,{'tokens':_0x32f387,'equippedToken':_0x33ecb8,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0xe1916e['uid'],'userEmail':_0xe1916e['email'],'itemId':'token_'+_0x4e2325,'itemTitle':_0x5d2ebf['name'],'refund':_0x5d7aad,'originalPrice':_0x5d2ebf['price'],'type':_0x1b517a(0x15f),'category':'token','timestamp':serverTimestamp()}),userData['points']=_0x22214c,userData[_0x1b517a(0x146)]=_0x32409d,userData['equippedToken']=_0x33ecb8,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x1b517a(0xdd)]['toLocaleString']()),typeof clearTokenCache==='function'&&clearTokenCache(_0xe1916e[_0x1b517a(0x15a)]),console['log']('✅\x20Sold\x20token\x20'+_0x5d2ebf['name']+_0x1b517a(0xf4)+_0x5d7aad+'\x20points'),showMessage(_0x1b517a(0xd6)+_0x5d2ebf['name']+_0x1b517a(0xf4)+_0x5d7aad+'\x20points\x20(50%\x20refund)',_0x1b517a(0x10e)),!![];}catch(_0x477276){return console['error']('Token\x20sale\x20failed:',_0x477276),showMessage('Failed\x20to\x20sell\x20token:\x20'+_0x477276[_0x1b517a(0xd7)],'error'),![];}}function applyTheme(_0x4db564){const _0x3adc1a=a0_0x515694;if(!userOwnsTheme(_0x4db564))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0x3adc1a(0xd2)),![];return window['ThemeSystem']?(window['ThemeSystem']['switchTheme'](_0x4db564),showMessage((THEMES[_0x4db564]?.['name']||_0x4db564)+_0x3adc1a(0x110),_0x3adc1a(0x10e)),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x1141f8=a0_0x515694,_0x2267db=document['querySelector'](_0x1141f8(0xdc));if(!_0x2267db){console['error'](_0x1141f8(0xdb));return;}_0x2267db['innerHTML']='',Object['entries'](THEMES)['forEach'](([_0x6217a1,_0x5b52b9])=>{const _0x3b55db=_0x1141f8,_0x5f03d4=document[_0x3b55db(0xf3)]('div');_0x5f03d4[_0x3b55db(0xde)]='store-item',_0x5f03d4[_0x3b55db(0x11e)]['theme']=_0x6217a1,_0x5f03d4[_0x3b55db(0x11e)]['itemId']='theme_'+_0x6217a1,_0x5f03d4['dataset'][_0x3b55db(0x130)]=_0x5b52b9[_0x3b55db(0x130)],_0x5f03d4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x6217a1+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x5b52b9[_0x3b55db(0x130)]===0x0?'FREE':_0x5b52b9['price']+_0x3b55db(0x104))+_0x3b55db(0x118)+_0x5b52b9['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x5b52b9['description']+_0x3b55db(0xec),_0x2267db[_0x3b55db(0x113)](_0x5f03d4);}),setupThemeButtons();}function buildTokenItems(){const _0x107bf2=a0_0x515694,_0x37d746=document['querySelector']('.tokens-grid');if(!_0x37d746){console['error'](_0x107bf2(0x12a));return;}_0x37d746['innerHTML']='',Object['entries'](TOKENS)['forEach'](([_0x590805,_0x3d8348])=>{const _0x10e807=_0x107bf2,_0x3d21e2=document['createElement']('div');_0x3d21e2[_0x10e807(0xde)]='store-item\x20token-item',_0x3d21e2[_0x10e807(0x11e)]['token']=_0x590805,_0x3d21e2['dataset']['itemId']='token_'+_0x590805,_0x3d21e2['dataset']['price']=_0x3d8348['price'];const _0x3f3745=userData[_0x10e807(0x13e)]&&userOwnsToken(_0x590805)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20('+Math[_0x10e807(0x11f)](_0x3d8348['price']*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x3d21e2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x3d8348['image']+_0x10e807(0x12d)+_0x3d8348['name']+'\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+_0x3d8348['price']+'\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3f3745+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x37d746['appendChild'](_0x3d21e2);}),setupTokenButtons();}function setupThemeButtons(){const _0x397b7e=document['querySelectorAll']('.theme-select-btn');_0x397b7e['forEach'](_0x4544f4=>{const _0x2450ab=a0_0x215f;_0x4544f4[_0x2450ab(0x13c)]('click',async _0x3465c5=>{const _0x269b63=_0x2450ab;_0x3465c5['preventDefault']();const _0x46c244=auth['currentUser'];if(!_0x46c244){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x434447=_0x4544f4[_0x269b63(0x140)]('[data-theme]'),_0x14d2b6=_0x434447['dataset']['theme'],_0x58f697=THEMES[_0x14d2b6];if(!_0x58f697){console['error']('Theme\x20'+_0x14d2b6+'\x20not\x20found');return;}console['log']('Theme\x20clicked:\x20'+_0x58f697['name']+'\x20('+_0x14d2b6+')');if(_0x4544f4['disabled']){_0x58f697[_0x269b63(0x130)]>0x0&&showMessage(_0x269b63(0x150)+_0x58f697[_0x269b63(0x130)]+'\x20points\x20to\x20purchase\x20this\x20theme',_0x269b63(0xd2));return;}if(_0x4544f4['textContent']==='Current\x20Theme'){showMessage(_0x58f697['name']+_0x269b63(0x136),'info');return;}if(_0x4544f4['textContent']==='Apply\x20Theme'){applyTheme(_0x14d2b6),updateThemeButtons();return;}if(_0x4544f4[_0x269b63(0xc6)]['includes']('Buy')){const _0x3beb8e=window['confirm']('Purchase\x20'+_0x58f697['name']+'\x20theme\x20for\x20'+_0x58f697['price']+_0x269b63(0xf9));if(!_0x3beb8e)return;const _0x1a3b66=await purchaseTheme(_0x14d2b6);_0x1a3b66&&(showMessage(_0x58f697['name']+'\x20theme\x20purchased!','success'),applyTheme(_0x14d2b6),updateThemeButtons());return;}userOwnsTheme(_0x14d2b6)?applyTheme(_0x14d2b6):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function setupTokenButtons(){const _0x12abc6=a0_0x515694,_0x46b6c6=document['querySelectorAll'](_0x12abc6(0x13b)),_0x18175f=document['querySelectorAll']('.token-equip-btn'),_0x211cff=document['querySelectorAll']('.token-sell-btn');_0x46b6c6[_0x12abc6(0x127)](_0x315d12=>{const _0x53ba48=_0x12abc6;_0x315d12[_0x53ba48(0x13c)]('click',async _0x26b6ab=>{const _0x230de3=_0x53ba48;_0x26b6ab[_0x230de3(0x117)]();const _0x11f60b=auth['currentUser'];if(!_0x11f60b){showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error');return;}const _0x4a83ef=_0x315d12[_0x230de3(0x140)]('[data-token]'),_0x510bd7=_0x4a83ef['dataset'][_0x230de3(0x147)],_0x14ee3f=TOKENS[_0x510bd7];if(!_0x14ee3f){console['error']('Token\x20'+_0x510bd7+'\x20not\x20found');return;}console['log'](_0x230de3(0x111)+_0x14ee3f['name']+'\x20('+_0x510bd7+')');if(_0x315d12['disabled']){showMessage('You\x20need\x20'+_0x14ee3f['price']+'\x20points\x20to\x20purchase\x20this\x20token','error');return;}if(_0x315d12[_0x230de3(0xc6)]==='Owned'){showMessage(_0x230de3(0x11a)+_0x14ee3f['name']+'\x20token',_0x230de3(0x109));return;}if(_0x315d12[_0x230de3(0xc6)][_0x230de3(0xeb)]('Purchase')||_0x315d12['textContent']['includes']('Buy')){const _0x1d0ff8=window['confirm']('Purchase\x20'+_0x14ee3f['name']+'\x20token\x20for\x20'+_0x14ee3f['price']+'\x20points?');if(!_0x1d0ff8)return;const _0x41430b=await purchaseToken(_0x510bd7);_0x41430b&&updateTokenButtons();return;}});}),_0x18175f['forEach'](_0x37e00e=>{_0x37e00e['addEventListener']('click',async _0x17dc58=>{const _0x5862fe=a0_0x215f;_0x17dc58['preventDefault']();const _0x4cb683=_0x37e00e['closest']('[data-token]'),_0x3b631a=_0x4cb683['dataset'][_0x5862fe(0x147)],_0x3f4d35=TOKENS[_0x3b631a];if(_0x37e00e[_0x5862fe(0xc6)]==='Equipped'){const _0x279de0=window['confirm']('Unequip\x20'+_0x3f4d35['name']+'?');if(!_0x279de0)return;const _0x56a201=await unequipToken();_0x56a201&&updateTokenButtons();}else{const _0x361774=window['confirm']('Equip\x20'+_0x3f4d35['name']+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0x361774)return;const _0x2cf47e=await equipToken(_0x3b631a);_0x2cf47e&&updateTokenButtons();}});}),_0x211cff['forEach'](_0x31c194=>{const _0x283a11=_0x12abc6;_0x31c194['addEventListener'](_0x283a11(0x14e),async _0x588365=>{const _0x3ae389=_0x283a11;_0x588365['preventDefault']();const _0x5e6731=_0x31c194['closest'](_0x3ae389(0x11d)),_0x3b5e19=_0x5e6731['dataset']['token'],_0x508225=TOKENS[_0x3b5e19],_0x22b837=Math['floor'](_0x508225['price']*0.5),_0x4d864f=window['confirm']('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x508225[_0x3ae389(0xff)]+'\x20for\x20'+_0x22b837+'\x20points?\x20This\x20cannot\x20be\x20undone.');if(!_0x4d864f)return;const _0x588e9c=await sellToken(_0x3b5e19);_0x588e9c&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0x1ae09b=a0_0x515694,_0x23f5e5=window[_0x1ae09b(0xcb)]?window['ThemeSystem']['getCurrentTheme']():'default',_0x593290=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')['forEach'](_0x2e882d=>{const _0x218319=_0x1ae09b,_0x4c5eb7=_0x2e882d['closest']('[data-theme]'),_0x33f2f9=_0x4c5eb7['dataset'][_0x218319(0x134)],_0x422286=THEMES[_0x33f2f9];if(!_0x422286)return;_0x2e882d['disabled']=![],_0x2e882d['style'][_0x218319(0x156)]='',_0x2e882d['style'][_0x218319(0x107)]='pointer',_0x2e882d['classList']['remove']('current-theme',_0x218319(0x159),'can-afford',_0x218319(0x149),'sign-in-free',_0x218319(0xd8));if(!_0x593290){_0x422286[_0x218319(0x130)]===0x0?(_0x2e882d['textContent']='Sign\x20in\x20to\x20Apply',_0x2e882d[_0x218319(0x137)]['add']('sign-in-free')):(_0x2e882d['textContent']=_0x218319(0xed),_0x2e882d[_0x218319(0x106)]=!![],_0x2e882d['style']['opacity']='0.7',_0x2e882d['classList'][_0x218319(0xd4)]('sign-in-paid'));return;}if(_0x33f2f9===_0x23f5e5){_0x2e882d['textContent']=_0x218319(0x128),_0x2e882d['classList']['add']('current-theme'),_0x2e882d['disabled']=!![],_0x2e882d['style']['cursor']='default';return;}if(userOwnsTheme(_0x33f2f9)){_0x2e882d['textContent']='Apply\x20Theme',_0x2e882d[_0x218319(0x137)][_0x218319(0xd4)](_0x218319(0x159));return;}if(userData['points']>=_0x422286['price']){_0x2e882d['textContent']=_0x218319(0xfb)+_0x422286['price']+_0x218319(0x104),_0x2e882d[_0x218319(0x137)]['add']('can-afford');return;}_0x2e882d['textContent']='Need\x20'+_0x422286['price']+_0x218319(0x104),_0x2e882d[_0x218319(0x137)]['add']('cannot-afford'),_0x2e882d[_0x218319(0x158)][_0x218319(0x156)]='0.5',_0x2e882d['disabled']=!![],_0x2e882d['style']['cursor']='not-allowed';});}function updateTokenButtons(){const _0x88b9ac=auth['currentUser'];document['querySelectorAll']('.token-select-btn')['forEach'](_0x3d46b0=>{const _0xa9293=a0_0x215f,_0x4402e1=_0x3d46b0['closest']('[data-token]'),_0x30ee54=_0x4402e1[_0xa9293(0x11e)]['token'],_0x10cfb2=TOKENS[_0x30ee54],_0x4fd9d8=_0x4402e1['querySelector']('.token-equip-btn'),_0x3c1912=_0x4402e1['querySelector']('.token-sell-btn');if(!_0x10cfb2)return;_0x3d46b0['disabled']=![],_0x3d46b0['style']['opacity']='',_0x3d46b0[_0xa9293(0x158)]['cursor']='pointer';_0x4fd9d8&&(_0x4fd9d8['style'][_0xa9293(0x14b)]=_0xa9293(0x10f),_0x4fd9d8[_0xa9293(0x106)]=![],_0x4fd9d8[_0xa9293(0x158)][_0xa9293(0x156)]='',_0x4fd9d8['classList']['remove']('equipped',_0xa9293(0xe6)));_0x3c1912&&(_0x3c1912['style'][_0xa9293(0x14b)]='none');_0x3d46b0['classList']['remove']('owned','can-afford','cannot-afford',_0xa9293(0x10b));if(!_0x88b9ac){_0x3d46b0[_0xa9293(0xc6)]='Sign\x20in\x20to\x20Purchase',_0x3d46b0[_0xa9293(0x106)]=!![],_0x3d46b0['style']['opacity']='0.7',_0x3d46b0['classList'][_0xa9293(0xd4)](_0xa9293(0x10b));return;}if(userOwnsToken(_0x30ee54)){_0x3d46b0['textContent']='Owned',_0x3d46b0[_0xa9293(0x137)]['add']('owned'),_0x3d46b0['disabled']=!![],_0x3d46b0['style']['cursor']='default',_0x3d46b0['style']['background']='var(--success-color,\x20#4CAF50)';_0x4fd9d8&&(_0x4fd9d8[_0xa9293(0x158)]['display']=_0xa9293(0x151),userHasTokenEquipped(_0x30ee54)?(_0x4fd9d8['textContent']='Equipped',_0x4fd9d8['classList']['add']('equipped'),_0x4fd9d8['style']['background']='var(--accent-color,\x20#2196F3)',_0x4fd9d8[_0xa9293(0x158)]['cursor']='pointer'):(_0x4fd9d8['textContent']='Equip',_0x4fd9d8['classList']['add']('can-equip'),_0x4fd9d8['style'][_0xa9293(0x142)]='var(--info-color,\x20#17a2b8)',_0x4fd9d8[_0xa9293(0x158)]['cursor']='pointer'));_0x3c1912&&userData['isAdmin']&&(_0x3c1912[_0xa9293(0x158)]['display']='block');return;}if(userData['points']>=_0x10cfb2['price']){_0x3d46b0['textContent']=_0xa9293(0xfb)+_0x10cfb2[_0xa9293(0x130)]+'\x20Points',_0x3d46b0['classList']['add']('can-afford'),_0x3d46b0['style'][_0xa9293(0x142)]='';return;}_0x3d46b0['textContent']=_0xa9293(0x12c)+_0x10cfb2[_0xa9293(0x130)]+'\x20Points',_0x3d46b0['classList'][_0xa9293(0xd4)]('cannot-afford'),_0x3d46b0['style']['opacity']=_0xa9293(0xdf),_0x3d46b0[_0xa9293(0x106)]=!![],_0x3d46b0['style']['cursor']='not-allowed',_0x3d46b0['style']['background']='var(--muted-color,\x20#757575)';});}function showMessage(_0x1cab78,_0x18767f='info'){const _0x2d6f9c=a0_0x515694,_0x41a8e0=document[_0x2d6f9c(0x15d)]('store-message');_0x41a8e0&&_0x41a8e0[_0x2d6f9c(0x139)]();const _0x39fd31=document['createElement']('div');_0x39fd31['id']='store-message',_0x39fd31[_0x2d6f9c(0xde)]='store-message\x20store-message-'+_0x18767f,_0x39fd31['textContent']=_0x1cab78,document['body']['appendChild'](_0x39fd31),requestAnimationFrame(()=>{const _0x1b9f04=_0x2d6f9c;_0x39fd31['classList'][_0x1b9f04(0xd4)](_0x1b9f04(0x131));}),setTimeout(()=>{_0x39fd31['classList']['remove']('visible'),setTimeout(()=>{const _0xe4e37f=a0_0x215f;_0x39fd31[_0xe4e37f(0x13f)]&&_0x39fd31[_0xe4e37f(0x139)]();},0x12c);},0xfa0);}window[a0_0x515694(0x115)]={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console[a0_0x515694(0xfd)]('🏪\x20Redeem\x20store\x20loaded');