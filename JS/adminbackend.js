const a4_0x5dc55c=a4_0x1ba5,a4_0x2bc818=(function(){let _0x20a9b1=!![];return function(_0x65f556,_0x11b2c2){const _0x50da9f=_0x20a9b1?function(){const _0x5109c9=a4_0x1ba5;if(_0x11b2c2){const _0x5447fd=_0x11b2c2[_0x5109c9(0x19a)](_0x65f556,arguments);return _0x11b2c2=null,_0x5447fd;}}:function(){};return _0x20a9b1=![],_0x50da9f;};}()),a4_0x14dc80=a4_0x2bc818(this,function(){const _0xcece20=a4_0x1ba5,_0x39dd90=function(){const _0x549cc6=a4_0x1ba5;let _0x3f16a2;try{_0x3f16a2=Function('return\x20(function()\x20'+_0x549cc6(0x28b)+');')();}catch(_0x1bb4db){_0x3f16a2=window;}return _0x3f16a2;},_0x2518be=_0x39dd90(),_0x480123=_0x2518be['console']=_0x2518be['console']||{},_0x2174f2=['log','warn','info','error','exception','table',_0xcece20(0x208)];for(let _0x468a3a=0x0;_0x468a3a<_0x2174f2[_0xcece20(0x1be)];_0x468a3a++){const _0x397b81=a4_0x2bc818['constructor'][_0xcece20(0x1f1)]['bind'](a4_0x2bc818),_0x38542a=_0x2174f2[_0x468a3a],_0x343ddc=_0x480123[_0x38542a]||_0x397b81;_0x397b81['__proto__']=a4_0x2bc818['bind'](a4_0x2bc818),_0x397b81['toString']=_0x343ddc[_0xcece20(0x189)]['bind'](_0x343ddc),_0x480123[_0x38542a]=_0x397b81;}});a4_0x14dc80();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x1f2893){const _0x4ddb7c=a4_0x1ba5;if(!_0x1f2893)return'#ffffff';_0x1f2893=_0x1f2893[_0x4ddb7c(0x213)]('#','');_0x1f2893['length']===0x3&&(_0x1f2893=_0x1f2893[_0x4ddb7c(0x18f)]('')['map'](_0x2c17f8=>_0x2c17f8+_0x2c17f8)['join'](''));if(_0x1f2893['length']!==0x6)return'#ffffff';const _0x25ee3a=parseInt(_0x1f2893[_0x4ddb7c(0x2ad)](0x0,0x2),0x10),_0x36141f=parseInt(_0x1f2893['substring'](0x2,0x4),0x10),_0x45350b=parseInt(_0x1f2893['substring'](0x4,0x6),0x10),_0x4c7953=(_0x25ee3a*0x12b+_0x36141f*0x24b+_0x45350b*0x72)/0x3e8;return _0x4c7953>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x1db84e=>{const _0x370367=a4_0x1ba5;if(!_0x1db84e){window[_0x370367(0x314)]['href']=_0x370367(0x140);return;}try{await initializeAdminDashboard();}catch(_0x4c83c2){console['error']('Error\x20initializing\x20dashboard:',_0x4c83c2),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});function a4_0x1ba5(_0x78da06,_0x2e842a){const _0x14dc80=a4_0x525b();return a4_0x1ba5=function(_0x2bc818,_0x546de7){_0x2bc818=_0x2bc818-0x11e;let _0x525b1f=_0x14dc80[_0x2bc818];return _0x525b1f;},a4_0x1ba5(_0x78da06,_0x2e842a);}async function getUserTabPermissions(_0x1768d5){const _0x1c8672=a4_0x1ba5;if(!_0x1768d5)return[_0x1c8672(0x35b)];console[_0x1c8672(0x26e)]('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x1768d5+'\x20in\x20all\x20collections...');const _0x53e8ba=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':_0x1c8672(0x276)},{'name':_0x1c8672(0x2e2),'displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x5d389e=auth[_0x1c8672(0x282)];let _0x4487bf=null,_0x152a6f=null;for(const _0x1f31c7 of _0x53e8ba){try{if(_0x5d389e){const _0x4fd9c4=doc(db,_0x1f31c7['name'],_0x5d389e['uid']),_0x34f512=await getDoc(_0x4fd9c4);if(_0x34f512['exists']()){const _0x545de3=_0x34f512[_0x1c8672(0x1ec)]();console['log']('Found\x20user\x20in\x20'+_0x1f31c7[_0x1c8672(0x24d)]+'\x20by\x20UID:',_0x545de3);const _0x398e68=(_0x545de3[_0x1c8672(0x298)]||_0x545de3[_0x1c8672(0x21c)]||'')['toLowerCase']();if(_0x398e68&&_0x398e68!=='none'){_0x4487bf=_0x398e68,_0x152a6f=_0x1f31c7['displayName'],console['log'](_0x1c8672(0x17c)+_0x4487bf+'\x20in\x20'+_0x152a6f);break;}}}if(!_0x4487bf){const _0x29ba86=collection(db,_0x1f31c7[_0x1c8672(0x200)]),_0x1bdb9d=query(_0x29ba86,where(_0x1c8672(0x357),'==',_0x1768d5)),_0x1158eb=await getDocs(_0x1bdb9d);if(!_0x1158eb[_0x1c8672(0x2e5)]){const _0x47e127=_0x1158eb['docs'][0x0]['data']();console[_0x1c8672(0x26e)]('Found\x20user\x20in\x20'+_0x1f31c7[_0x1c8672(0x24d)]+'\x20with\x20email\x20'+_0x1768d5+':',_0x47e127);const _0x2dc12d=(_0x47e127['roleName']||_0x47e127['role']||'')['toLowerCase']();if(_0x2dc12d&&_0x2dc12d!=='none'){_0x4487bf=_0x2dc12d,_0x152a6f=_0x1f31c7['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x4487bf+_0x1c8672(0x2b8)+_0x152a6f);break;}}}}catch(_0x4f0d74){console['error']('Error\x20checking\x20'+_0x1f31c7[_0x1c8672(0x24d)]+':',_0x4f0d74);}}if(_0x4487bf){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x4487bf+'\x20(from\x20'+_0x152a6f+')');const _0x52c8b0={'admin':[_0x1c8672(0x35b),'manage-players','manage-matches',_0x1c8672(0x28c),'manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history','manage-highlights','user-roles-section',_0x1c8672(0x358),'manage-points','manage-levels-ribbons','manage-ribbons'],'owner':[_0x1c8672(0x35b),_0x1c8672(0x18b),'manage-matches','manage-articles','manage-trophies',_0x1c8672(0x1cf),'inactive-players','settings','manage-trophies','elo-history','manage-highlights',_0x1c8672(0x2fe),_0x1c8672(0x358),_0x1c8672(0x36e),'manage-levels-ribbons',_0x1c8672(0x144)],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':['dashboard',_0x1c8672(0x28c),'manage-trophies','elo-history','manage-highlights']};if(_0x52c8b0[_0x4487bf])return console[_0x1c8672(0x26e)]('Role\x20\x27'+_0x4487bf+'\x27\x20has\x20permissions:',_0x52c8b0[_0x4487bf]),_0x52c8b0[_0x4487bf];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x1768d5+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x44c53c=[]){const _0x30a591=a4_0x1ba5,_0xb82639=document['querySelectorAll'](_0x30a591(0x2cb)),_0x4f016d=document['querySelectorAll']('.admin-section');(!_0x44c53c||_0x44c53c['length']===0x0)&&(_0x44c53c=[_0x30a591(0x35b)]);_0xb82639['forEach'](_0x266c7f=>{const _0xd5cd44=_0x30a591,_0xb367a8=_0x266c7f['getAttribute']('data-section');_0x44c53c['includes'](_0xb367a8)?_0x266c7f[_0xd5cd44(0x231)]['display']=_0xd5cd44(0x31f):_0x266c7f['style']['display']='none',_0x266c7f['addEventListener']('click',()=>{const _0x2765a2=_0xd5cd44,_0x56df1c=_0x266c7f['getAttribute'](_0x2765a2(0x353));if(!_0x44c53c['includes'](_0x56df1c)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0xb82639['forEach'](_0x561a4e=>_0x561a4e['classList']['remove'](_0x2765a2(0x260))),_0x266c7f[_0x2765a2(0x26c)]['add'](_0x2765a2(0x260)),_0x4f016d['forEach'](_0x2c5a4a=>{const _0x4ac6c2=_0x2765a2;_0x2c5a4a['style']['display']=_0x4ac6c2(0x141);});const _0x5c8f7a=document['getElementById'](_0x56df1c);_0x5c8f7a&&(_0x5c8f7a['style']['display']='block',console[_0x2765a2(0x26e)]('Switched\x20to\x20'+_0x56df1c+'\x20section'));});});const _0x3090b8=document['querySelector'](_0x30a591(0x319)+_0x44c53c[0x0]+'\x22]');_0x3090b8&&_0x3090b8[_0x30a591(0x1a0)](),console[_0x30a591(0x26e)](_0x30a591(0x324));}function setupTabNavigation(){const _0xce7831=a4_0x1ba5,_0x243392=document[_0xce7831(0x32a)]('.nav-item');let _0x3ce3b3=null,_0x15a12a=new Set();_0x243392['forEach'](_0x4e09a4=>{const _0x12a754=_0xce7831;_0x4e09a4[_0x12a754(0x2f7)]('click',function(){const _0x36735d=_0x12a754,_0x2de901=this['getAttribute'](_0x36735d(0x353));if(_0x2de901===_0x3ce3b3)return;_0x3ce3b3&&(document['getElementById'](_0x3ce3b3)['style']['display']=_0x36735d(0x141),_0x243392[_0x36735d(0x12e)](_0x2cb420=>_0x2cb420[_0x36735d(0x26c)]['remove'](_0x36735d(0x260)))),document[_0x36735d(0x2a0)](_0x2de901)['style']['display']='block',this[_0x36735d(0x26c)]['add'](_0x36735d(0x260)),_0x3ce3b3=_0x2de901;});});}function loadSectionData(_0x52ae39){return;}async function initializeAdminDashboard(){const _0x2062b1=a4_0x1ba5;try{const _0x391e01=auth['currentUser'],_0x34c1b5=await getUserTabPermissions(_0x391e01['email']);console['log']('User\x20'+_0x391e01['email']+'\x20allowed\x20tabs:',_0x34c1b5),window['userAllowedTabs']=_0x34c1b5,setupSidebarNavigation(_0x34c1b5),setupLadderSelector(),setupDashboardSection(),_0x34c1b5[_0x2062b1(0x146)]('manage-players')&&setupManagePlayersSection(),_0x34c1b5['includes']('elo-history')&&setupEloHistorySection(),_0x34c1b5['includes'](_0x2062b1(0x1cf))&&setupRankControls(),_0x34c1b5[_0x2062b1(0x146)](_0x2062b1(0x28c))&&setupManageArticlesSection(),_0x34c1b5['includes']('user-roles-section')&&setupUserRolesSection(),_0x34c1b5['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x34c1b5['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x34c1b5[_0x2062b1(0x146)](_0x2062b1(0x223))&&setupInactivePlayersSection(),_0x34c1b5['includes']('manage-matches')&&setupManageMatchesSection(),_0x34c1b5['includes']('manage-points')&&setupManagePointsSection(),_0x34c1b5[_0x2062b1(0x146)](_0x2062b1(0x144))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x34c1b5);}catch(_0x5c3c8f){console[_0x2062b1(0x1f7)]('Error\x20initializing\x20admin\x20dashboard:',_0x5c3c8f);}}function setupDataLoadButtons(_0x34dfbb=[]){const _0x501dbf=a4_0x1ba5;(!_0x34dfbb||_0x34dfbb['length']===0x0)&&(_0x34dfbb=['dashboard']);const _0x35fc18=document['getElementById']('load-dashboard-data');_0x35fc18&&_0x35fc18['addEventListener']('click',function(){const _0x2063d0=a4_0x1ba5;this['classList'][_0x2063d0(0x320)](_0x2063d0(0x2dd)),this[_0x2063d0(0x245)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0xc8a989=_0x2063d0;this['classList']['remove']('loading'),this[_0xc8a989(0x245)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x5b4ddd=>{const _0x68d74e=_0x2063d0;console[_0x68d74e(0x1f7)]('Error\x20loading\x20dashboard:',_0x5b4ddd),this['classList']['remove']('loading'),this[_0x68d74e(0x245)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x34dfbb['includes'](_0x501dbf(0x170))){const _0x50d202=document[_0x501dbf(0x2a0)](_0x501dbf(0x27d));_0x50d202&&_0x50d202[_0x501dbf(0x2f7)]('click',function(){const _0x405444=_0x501dbf;console['log'](_0x405444(0x1a7)),this[_0x405444(0x26c)][_0x405444(0x320)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x3275e4=_0x405444;this['classList'][_0x3275e4(0x334)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x4263eb=>{const _0x33e13a=_0x405444;console['error']('Error\x20loading\x20trophies:',_0x4263eb),this[_0x33e13a(0x26c)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x34dfbb[_0x501dbf(0x146)]('manage-players')){const _0x947d4c=document[_0x501dbf(0x2a0)](_0x501dbf(0x131));_0x947d4c&&_0x947d4c['addEventListener']('click',function(){const _0x18767e=_0x501dbf;console['log']('Load\x20players\x20data\x20clicked'),this[_0x18767e(0x26c)][_0x18767e(0x320)]('loading'),this[_0x18767e(0x245)]=_0x18767e(0x161),loadPlayersData()[_0x18767e(0x1f2)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x4d5d96=>{const _0x2dbaa7=_0x18767e;console['error'](_0x2dbaa7(0x2b3),_0x4d5d96),this[_0x2dbaa7(0x26c)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x34dfbb[_0x501dbf(0x146)]('elo-history')){const _0x5207d8=document[_0x501dbf(0x2a0)](_0x501dbf(0x34b));_0x5207d8&&_0x5207d8['addEventListener'](_0x501dbf(0x1a0),function(){const _0x2edb88=_0x501dbf;console['log']('Load\x20history\x20data\x20clicked'),this[_0x2edb88(0x26c)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x52b357=_0x2edb88;this['classList']['remove'](_0x52b357(0x2dd)),this[_0x52b357(0x245)]=_0x52b357(0x293);})['catch'](_0x3a8d5e=>{const _0x6dfdcf=_0x2edb88;console['error']('Error\x20loading\x20history:',_0x3a8d5e),this[_0x6dfdcf(0x26c)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x34dfbb['includes'](_0x501dbf(0x28c))){const _0x347250=document[_0x501dbf(0x2a0)]('load-articles-data');_0x347250&&_0x347250[_0x501dbf(0x2f7)]('click',function(){const _0x4636a3=_0x501dbf;console[_0x4636a3(0x26e)]('Load\x20articles\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x12fd5e=_0x4636a3;this['classList']['remove'](_0x12fd5e(0x2dd)),this['innerHTML']=_0x12fd5e(0x15a);})[_0x4636a3(0x2d6)](_0x5d00a2=>{const _0x46d271=_0x4636a3;console['error']('Error\x20loading\x20articles:',_0x5d00a2),this['classList'][_0x46d271(0x334)]('loading'),this[_0x46d271(0x245)]=_0x46d271(0x268),setTimeout(()=>{const _0x4187e3=_0x46d271;this['innerHTML']=_0x4187e3(0x15a);},0xbb8);});});}if(_0x34dfbb['includes']('user-roles-section')){const _0x4f9763=document['getElementById']('load-users-data');_0x4f9763&&_0x4f9763['addEventListener'](_0x501dbf(0x1a0),function(){const _0x2cd5b7=_0x501dbf;console['log']('Load\x20users\x20data\x20clicked'),this[_0x2cd5b7(0x26c)]['add'](_0x2cd5b7(0x2dd)),this['innerHTML']=_0x2cd5b7(0x161),loadUsersWithRoles()['then'](()=>{const _0x47cf54=_0x2cd5b7;this['classList'][_0x47cf54(0x334)](_0x47cf54(0x2dd)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x5a1d0=>{const _0x148e30=_0x2cd5b7;console['error']('Error\x20loading\x20users:',_0x5a1d0),this[_0x148e30(0x26c)][_0x148e30(0x334)]('loading'),this[_0x148e30(0x245)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x46dae2=_0x148e30;this['innerHTML']=_0x46dae2(0x1ea);},0xbb8);});});}if(_0x34dfbb[_0x501dbf(0x146)](_0x501dbf(0x223))){const _0x5467c3=document['getElementById']('load-inactive-players-data');_0x5467c3&&_0x5467c3[_0x501dbf(0x2f7)]('click',function(){const _0xd3a35=_0x501dbf;console[_0xd3a35(0x26e)](_0xd3a35(0x166)),this['classList']['add'](_0xd3a35(0x2dd)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x41e82=_0xd3a35;this['classList']['remove'](_0x41e82(0x2dd)),this[_0x41e82(0x245)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x5e4711=>{const _0x1fb23d=_0xd3a35;console['error']('Error\x20loading\x20inactive\x20players:',_0x5e4711),this[_0x1fb23d(0x26c)]['remove'](_0x1fb23d(0x2dd)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x53e0b9=_0x1fb23d;this[_0x53e0b9(0x245)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x34dfbb[_0x501dbf(0x146)]('manage-highlights')){const _0x59ffa9=document[_0x501dbf(0x2a0)]('load-highlights-data');_0x59ffa9&&_0x59ffa9[_0x501dbf(0x2f7)]('click',function(){console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x2827bd=a4_0x1ba5;this['classList'][_0x2827bd(0x334)](_0x2827bd(0x2dd)),this[_0x2827bd(0x245)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x11f801=>{const _0xcf81ad=a4_0x1ba5;console[_0xcf81ad(0x1f7)]('Error\x20loading\x20highlights:',_0x11f801),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x134124=_0xcf81ad;this[_0x134124(0x245)]=_0x134124(0x257);},0xbb8);});});}if(_0x34dfbb['includes']('manage-matches')){const _0x15b0e0=document[_0x501dbf(0x2a0)](_0x501dbf(0x20e));_0x15b0e0&&_0x15b0e0[_0x501dbf(0x2f7)]('click',function(){const _0x29d513=_0x501dbf;console['log'](_0x29d513(0x214)),this[_0x29d513(0x26c)]['add'](_0x29d513(0x2dd)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x29d513(0x1f2)](()=>{const _0x14efcf=_0x29d513;this['classList']['remove']('loading'),this[_0x14efcf(0x245)]=_0x14efcf(0x1ce);})['catch'](_0x3b0fa6=>{const _0x1c0d86=_0x29d513;console['error'](_0x1c0d86(0x1a1),_0x3b0fa6),this['classList']['remove']('loading'),this['innerHTML']=_0x1c0d86(0x268),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x34dfbb['includes'](_0x501dbf(0x144))){const _0x264484=document[_0x501dbf(0x2a0)]('load-ribbons-data');_0x264484&&_0x264484['addEventListener']('click',function(){const _0x443670=_0x501dbf;console['log'](_0x443670(0x349)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()[_0x443670(0x1f2)](()=>{const _0xbcbf58=_0x443670;this[_0xbcbf58(0x26c)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x3a5b36=>{const _0x549b09=_0x443670;console['error']('Error\x20loading\x20ribbons:',_0x3a5b36),this['classList']['remove']('loading'),this[_0x549b09(0x245)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log'](_0x501dbf(0x350));}function setupDashboardSection(){const _0x2b937c=a4_0x1ba5;document[_0x2b937c(0x2a0)]('player-count')['textContent']='-',document[_0x2b937c(0x2a0)](_0x2b937c(0x217))['textContent']='-',document[_0x2b937c(0x2a0)]('pending-count')[_0x2b937c(0x23c)]='-',document['getElementById'](_0x2b937c(0x18d))['textContent']='-';}function setupLadderSelector(){const _0x5d9da5=a4_0x1ba5,_0x101ddc=document['querySelectorAll']('.ladder-switch\x20input');_0x101ddc['forEach'](_0x2bf530=>{_0x2bf530['addEventListener']('change',()=>{const _0xe63c04=a4_0x1ba5;currentLadder=_0x2bf530['value'],document[_0xe63c04(0x20d)]['setAttribute'](_0xe63c04(0x1c6),currentLadder);const _0x7bbf42=document['getElementById']('current-ladder-display');_0x7bbf42&&(_0x7bbf42['textContent']=currentLadder),document['getElementById'](_0xe63c04(0x2e0))['textContent']='-',document['getElementById']('match-count')['textContent']='-',document[_0xe63c04(0x2a0)]('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-',charts[_0xe63c04(0x2df)]&&(charts[_0xe63c04(0x2df)]['destroy'](),charts[_0xe63c04(0x2df)]=null),charts['activity']&&(charts['activity'][_0xe63c04(0x175)](),charts['activity']=null),showNotification(_0xe63c04(0x2d9)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x13c98d=document['getElementById'](_0x5d9da5(0x323));_0x13c98d&&(_0x13c98d['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x195cf0=a4_0x1ba5;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x195cf0(0x2a0)](_0x195cf0(0x2e0))['textContent']='-',document[_0x195cf0(0x2a0)](_0x195cf0(0x217))['textContent']='-',document[_0x195cf0(0x2a0)]('pending-count')['textContent']='-',document['getElementById']('rejected-count')[_0x195cf0(0x23c)]='-';const _0x35e352=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':_0x195cf0(0x2e2),_0x55b74d=currentLadder==='D1'?_0x195cf0(0x25d):currentLadder==='D2'?'approvedMatchesD2':_0x195cf0(0x2dc),_0x7e831d=currentLadder==='D1'?_0x195cf0(0x1b0):currentLadder==='D2'?'pendingMatchesD2':_0x195cf0(0x336),_0x274949=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console[_0x195cf0(0x26e)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x35e352+',\x20'+_0x55b74d);const _0x210465=await getDocs(collection(db,_0x35e352)),_0x226fa0=_0x210465[_0x195cf0(0x1a9)],_0x512d9d=await getDocs(collection(db,_0x55b74d)),_0x3d2671=_0x512d9d['size'],_0x2ec605=await getDocs(collection(db,_0x7e831d)),_0x387502=_0x2ec605['size'],_0x58aeb2=await getDocs(collection(db,_0x274949)),_0x1e5ec2=_0x58aeb2['size'];return document['getElementById'](_0x195cf0(0x2e0))['textContent']=_0x226fa0,document[_0x195cf0(0x2a0)]('match-count')['textContent']=_0x3d2671,document['getElementById'](_0x195cf0(0x181))[_0x195cf0(0x23c)]=_0x387502,document['getElementById'](_0x195cf0(0x18d))['textContent']=_0x1e5ec2,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x5517a8){console['error']('Error\x20loading\x20dashboard\x20data:',_0x5517a8);throw _0x5517a8;}}async function createRankDistributionChart(){const _0x119df8=a4_0x1ba5;try{const _0x492ba1=collection(db,currentLadder==='D1'?_0x119df8(0x1cd):_0x119df8(0x347)),_0x485a0e=await getDocs(_0x492ba1),_0x3fdd8a={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x485a0e[_0x119df8(0x12e)](_0x47dc49=>{const _0xe99bad=_0x47dc49['data'](),_0x57a120=_0xe99bad['eloRating']||0x4b0;if(_0x57a120>=0x7d0)_0x3fdd8a['Emerald']++;else{if(_0x57a120>=0x708)_0x3fdd8a['Gold']++;else{if(_0x57a120>=0x640)_0x3fdd8a['Silver']++;else{if(_0x57a120>=0x578)_0x3fdd8a['Bronze']++;else _0x3fdd8a['Unranked']++;}}}});const _0x167b6d=document['getElementById']('rank-distribution-chart');charts[_0x119df8(0x2df)]&&charts[_0x119df8(0x2df)]['destroy'](),charts['rankDistribution']=new Chart(_0x167b6d,{'type':'doughnut','data':{'labels':Object['keys'](_0x3fdd8a),'datasets':[{'data':Object[_0x119df8(0x2ba)](_0x3fdd8a),'backgroundColor':['#808080','#CD7F32',_0x119df8(0x2a5),'#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x119df8(0x368),'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x119df8(0x13c),'color':_0x119df8(0x265),'font':{'size':0x10}}}}});}catch(_0x4f6c3f){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x4f6c3f),document['getElementById']('rank-distribution-chart')[_0x119df8(0x245)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x18e6a0=a4_0x1ba5;try{const _0x4fe8cf=currentLadder==='D1'?'approvedMatches':_0x18e6a0(0x128),_0x5aafed=collection(db,_0x4fe8cf),_0xe7b9bc=new Date();_0xe7b9bc['setDate'](_0xe7b9bc['getDate']()-0x7);const _0x160452=query(_0x5aafed,where('approvedAt','>=',_0xe7b9bc),orderBy(_0x18e6a0(0x14b),_0x18e6a0(0x31d))),_0x139c9a=await getDocs(_0x160452),_0x24f7cd=['Sunday','Monday','Tuesday','Wednesday','Thursday',_0x18e6a0(0x20f),_0x18e6a0(0x209)],_0x1967c7=_0x24f7cd['reduce']((_0x2ed4eb,_0x49e1cb)=>({..._0x2ed4eb,[_0x49e1cb]:0x0}),{});_0x139c9a['forEach'](_0x21a993=>{const _0x1c656d=_0x21a993['data']();if(_0x1c656d['approvedAt']){const _0x559557=_0x24f7cd[new Date(_0x1c656d['approvedAt']['seconds']*0x3e8)['getDay']()];_0x1967c7[_0x559557]++;}});const _0x11884d=document['getElementById']('activity-chart');charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x11884d,{'type':_0x18e6a0(0x12d),'data':{'labels':_0x24f7cd,'datasets':[{'label':_0x18e6a0(0x28a),'data':_0x24f7cd[_0x18e6a0(0x1a2)](_0x30b407=>_0x1967c7[_0x30b407]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0x18e6a0(0x227),'borderColor':currentLadder==='D1'?_0x18e6a0(0x329):_0x18e6a0(0x2ee),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x18e6a0(0x265)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x18e6a0(0x233),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x28d057){console['error']('Error\x20creating\x20activity\x20chart:',_0x28d057),document['getElementById']('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x2c116b=a4_0x1ba5,_0x5148f5=document['getElementById']('players-table-body');if(!_0x5148f5)return;_0x5148f5[_0x2c116b(0x245)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x491a28=_0x2c116b(0x1cd);if(currentLadder==='D2')_0x491a28='playersD2';else currentLadder==='D3'&&(_0x491a28='playersD3');console[_0x2c116b(0x26e)]('Loading\x20players\x20from\x20'+_0x491a28+'\x20collection...');const _0xc7d25b=collection(db,_0x491a28),_0x566e72=query(_0xc7d25b,orderBy('eloRating',_0x2c116b(0x11f))),_0x5c2c44=await getDocs(_0x566e72);if(_0x5c2c44['empty']){_0x5148f5[_0x2c116b(0x245)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x5148f5['innerHTML']='';let _0x5be3d6=0x1;_0x5c2c44['forEach'](_0x16f087=>{const _0x3e9130=_0x2c116b,_0xf8031c=_0x16f087['data'](),_0x29bf29=getRankFromElo(_0xf8031c['eloRating']||0x4b0),_0x2f6b72=getRankStyle(_0xf8031c['eloRating']||0x4b0),_0x176471=document[_0x3e9130(0x280)]('tr');_0x176471['innerHTML']=_0x3e9130(0x335)+_0x5be3d6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x2f6b72['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xf8031c['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0xf8031c[_0x3e9130(0x22e)]||0x4b0)+_0x3e9130(0x303)+_0x2f6b72['color']+_0x3e9130(0x135)+_0x29bf29+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xf8031c['wins']||0x0)+_0x3e9130(0x363)+(_0xf8031c['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x16f087['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x16f087['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5148f5[_0x3e9130(0x35e)](_0x176471),_0x5be3d6++;}),setupPlayerActionButtons();}catch(_0xad4a2d){console['error']('Error\x20loading\x20players:',_0xad4a2d),_0x5148f5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0xad4a2d['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x505f62){const _0x594dee=a4_0x1ba5;if(_0x505f62>=0x7d0)return'Emerald';if(_0x505f62>=0x708)return _0x594dee(0x31b);if(_0x505f62>=0x640)return'Silver';if(_0x505f62>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x2261ec=a4_0x1ba5;document['querySelectorAll'](_0x2261ec(0x2ca))[_0x2261ec(0x12e)](_0x31c5cd=>{const _0xd3cec8=_0x2261ec;_0x31c5cd[_0xd3cec8(0x2f7)]('click',async _0x3be79d=>{const _0x424be9=_0x3be79d['currentTarget']['dataset']['id'];openEditPlayerModal(_0x424be9);});}),document['querySelectorAll'](_0x2261ec(0x289))['forEach'](_0x576638=>{_0x576638['addEventListener']('click',async _0x129b26=>{const _0x399124=_0x129b26['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x399124);});});}async function openEditPlayerModal(_0x3360d0){const _0x207364=a4_0x1ba5;try{const _0x485d85=currentLadder==='D1'?'players':_0x207364(0x347),_0x5450d2=doc(db,_0x485d85,_0x3360d0),_0x3d3c3f=await getDoc(_0x5450d2);if(!_0x3d3c3f[_0x207364(0x19d)]()){showNotification(_0x207364(0x222),'error');return;}const _0x4db46e=_0x3d3c3f['data'](),_0x2681ad=document['getElementById']('edit-player-modal'),_0x2ceef3=document['getElementById']('edit-username'),_0x1ccdb7=document['getElementById']('edit-elo'),_0x3924fa=document['getElementById']('edit-wins'),_0x2b514c=document['getElementById']('edit-losses');_0x2ceef3['value']=_0x4db46e[_0x207364(0x2c0)]||'',_0x1ccdb7[_0x207364(0x2a3)]=_0x4db46e['eloRating']||0x4b0,_0x3924fa['value']=_0x4db46e[_0x207364(0x2ae)]||0x0,_0x2b514c[_0x207364(0x2a3)]=_0x4db46e['losses']||0x0,_0x2681ad['dataset']['playerId']=_0x3360d0,_0x2681ad[_0x207364(0x26c)][_0x207364(0x320)]('active');}catch(_0x9899c4){console['error'](_0x207364(0x1bf),_0x9899c4),showNotification(_0x207364(0x2e8),'error');}}async function saveEditedPlayer(){const _0xe238f1=a4_0x1ba5;try{const _0x1edf37=document['getElementById']('edit-player-modal'),_0x252c9b=_0x1edf37[_0xe238f1(0x266)]['playerId'];if(!_0x252c9b){showNotification('No\x20player\x20selected','error');return;}const _0x6dbbf=document[_0xe238f1(0x2a0)](_0xe238f1(0x207)),_0x41af26=document['getElementById']('edit-elo'),_0x2136c3=document['getElementById'](_0xe238f1(0x301)),_0x1e9d32=document['getElementById']('edit-losses'),_0x509dbd=_0x6dbbf[_0xe238f1(0x2a3)]['trim'](),_0x511b87=parseInt(_0x41af26['value']),_0x28b773=parseInt(_0x2136c3['value']),_0x2ed222=parseInt(_0x1e9d32['value']);if(!_0x509dbd||isNaN(_0x511b87)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0xe238f1(0x1f7));return;}const _0x60e245=currentLadder==='D1'?'players':_0xe238f1(0x347),_0x4a14a5=doc(db,_0x60e245,_0x252c9b),_0x2049c8=await getDoc(_0x4a14a5),_0x25bb33=_0x2049c8['exists']()?_0x2049c8[_0xe238f1(0x1ec)]():{},_0x2e3757=_0x25bb33['eloRating']||0x4b0;await updateDoc(_0x4a14a5,{'username':_0x509dbd,'eloRating':_0x511b87,'wins':_0x28b773||0x0,'losses':_0x2ed222||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x511b87!==_0x2e3757){const _0x3c365e=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x3c365e),{'player':_0x509dbd,'previousElo':_0x2e3757,'newElo':_0x511b87,'timestamp':serverTimestamp(),'type':_0xe238f1(0x290),'modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x102ac2){console['error']('Error\x20updating\x20player:',_0x102ac2),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x102ac2['message'],'error');}}function closeEditPlayerModal(){const _0x57a06c=a4_0x1ba5,_0x11eb01=document['getElementById']('edit-player-modal');_0x11eb01['classList']['remove'](_0x57a06c(0x260)),_0x11eb01[_0x57a06c(0x266)]['playerId']='';}async function confirmDeletePlayer(_0x5acc77){const _0x2e3aee=a4_0x1ba5;if(confirm(_0x2e3aee(0x291)))try{const _0x15d6d8=currentLadder==='D1'?'players':_0x2e3aee(0x347);await deleteDoc(doc(db,_0x15d6d8,_0x5acc77)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully',_0x2e3aee(0x27b));}catch(_0x416619){console[_0x2e3aee(0x1f7)]('Error\x20deleting\x20player:',_0x416619),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x416619['message'],'error');}}async function setupManagePlayersSection(){const _0x5b0951=a4_0x1ba5,_0xc371f9=document['getElementById']('add-player-form');_0xc371f9&&_0xc371f9[_0x5b0951(0x2f7)]('submit',async _0x3e4e3a=>{const _0x36d9c0=_0x5b0951;_0x3e4e3a[_0x36d9c0(0x2b0)](),await addNewPlayer();});const _0x26beb2=document['getElementById']('player-search');_0x26beb2&&_0x26beb2['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x498d4b=document['getElementById']('save-player-btn');_0x498d4b&&_0x498d4b['addEventListener'](_0x5b0951(0x1a0),saveEditedPlayer);const _0x4baff3=document['getElementById'](_0x5b0951(0x32c));_0x4baff3&&_0x4baff3[_0x5b0951(0x2f7)]('click',closeEditPlayerModal);const _0x276b08=document['getElementById'](_0x5b0951(0x29f));_0x276b08&&_0x276b08['addEventListener']('click',_0xe14452=>{_0xe14452['target']===_0x276b08&&closeEditPlayerModal();});const _0x52fcce=document['getElementById']('players-ladder-selector');_0x52fcce&&_0x52fcce[_0x5b0951(0x2f7)]('change',()=>{currentLadder=_0x52fcce['value'],loadPlayersData();});}async function addNewPlayer(){const _0x316a22=a4_0x1ba5;try{const _0x28d06c=document['getElementById']('new-player-username'),_0x4d29e2=document[_0x316a22(0x2a0)](_0x316a22(0x1f9)),_0x23d9de=_0x28d06c[_0x316a22(0x2a3)][_0x316a22(0x1d7)](),_0x2404e8=parseInt(_0x4d29e2['value'])||0x4b0;if(!_0x23d9de){alert(_0x316a22(0x1ee));return;}console['log']('Adding\x20player\x20'+_0x23d9de+'\x20with\x20ELO\x20'+_0x2404e8+'\x20to\x20'+currentLadder+_0x316a22(0x2c1));let _0x213c6f='players',_0x77ede7='eloHistory';if(currentLadder==='D2')_0x213c6f=_0x316a22(0x347),_0x77ede7=_0x316a22(0x2d3);else currentLadder==='D3'&&(_0x213c6f=_0x316a22(0x2e2),_0x77ede7='eloHistoryD3');const _0x13b462=query(collection(db,_0x213c6f),where('username','==',_0x23d9de)),_0x2b10b4=await getDocs(_0x13b462);if(!_0x2b10b4[_0x316a22(0x2e5)]){alert(_0x316a22(0x247)+_0x23d9de+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x26ea35=auth['currentUser'],_0x211f6d={'username':_0x23d9de,'eloRating':_0x2404e8,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x26ea35?_0x26ea35['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x213c6f),_0x211f6d),await addDoc(collection(db,_0x77ede7),{'player':_0x23d9de,'previousElo':0x4b0,'newElo':_0x2404e8,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x26ea35?_0x26ea35[_0x316a22(0x357)]:'admin','gameMode':currentLadder}),_0x28d06c[_0x316a22(0x2a3)]='',_0x4d29e2['value']='1200',alert('Player\x20'+_0x23d9de+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x184387){console['error']('Error\x20adding\x20player:',_0x184387),alert('Error\x20adding\x20player:\x20'+_0x184387[_0x316a22(0x33b)]);}}document[a4_0x5dc55c(0x2f7)]('DOMContentLoaded',()=>{const _0x4e6543=a4_0x5dc55c,_0x168163=document['getElementById'](_0x4e6543(0x1bd));_0x168163&&_0x168163['addEventListener']('submit',_0x352fa8=>{_0x352fa8['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x4d1be5=a4_0x5dc55c,_0x108c9f=document['getElementById']('player-search')['value']['toLowerCase'](),_0x4a28b2=document['querySelectorAll'](_0x4d1be5(0x148));let _0x336d17=0x0;_0x4a28b2[_0x4d1be5(0x12e)](_0x3a68e2=>{const _0x577c92=_0x4d1be5,_0x35c0d5=_0x3a68e2['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x35c0d5['includes'](_0x108c9f)?(_0x3a68e2['style'][_0x577c92(0x224)]='',_0x336d17++):_0x3a68e2['style'][_0x577c92(0x224)]='none';});const _0x29a172=document['getElementById'](_0x4d1be5(0x1b5));_0x29a172&&(_0x336d17===0x0&&_0x108c9f!==''?_0x29a172['style']['display']='block':_0x29a172['style'][_0x4d1be5(0x224)]='none');}function debounce(_0x3aaf28,_0x35eb11){let _0x2e21af;return function(..._0x74dac5){const _0x1cd4c6=a4_0x1ba5;clearTimeout(_0x2e21af),_0x2e21af=setTimeout(()=>_0x3aaf28[_0x1cd4c6(0x19a)](this,_0x74dac5),_0x35eb11);};}async function loadEloHistory(_0x480bda=0x1){const _0x3e490d=a4_0x5dc55c,_0xed1ab3=document[_0x3e490d(0x2a0)](_0x3e490d(0x25b)),_0x5c835b=currentLadder['toLowerCase']();if(!_0xed1ab3)return;_0xed1ab3['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x1729be=currentLadder==='D1'?_0x3e490d(0x29b):currentLadder==='D2'?'eloHistoryD2':_0x3e490d(0x35a),_0x17b148=collection(db,_0x1729be);let _0xfcd168;if(_0x480bda>eloHistoryPagination[_0x5c835b][_0x3e490d(0x29a)]&&eloHistoryPagination[_0x5c835b]['lastVisible'])_0xfcd168=query(_0x17b148,orderBy('timestamp',_0x3e490d(0x11f)),startAfter(eloHistoryPagination[_0x5c835b]['lastVisible']),limit(PAGE_SIZE));else _0x480bda<eloHistoryPagination[_0x5c835b]['page']&&eloHistoryPagination[_0x5c835b]['firstVisible']?_0xfcd168=query(_0x17b148,orderBy(_0x3e490d(0x180),'desc'),endBefore(eloHistoryPagination[_0x5c835b][_0x3e490d(0x13a)]),limitToLast(PAGE_SIZE)):_0xfcd168=query(_0x17b148,orderBy(_0x3e490d(0x180),'desc'),limit(PAGE_SIZE));const _0xb18df6=await getDocs(_0xfcd168);if(_0xb18df6[_0x3e490d(0x2e5)]){_0xed1ab3['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x5c835b+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x5c835b]['page']=_0x480bda,eloHistoryPagination[_0x5c835b]['firstVisible']=_0xb18df6[_0x3e490d(0x15c)][0x0],eloHistoryPagination[_0x5c835b]['lastVisible']=_0xb18df6['docs'][_0xb18df6['docs']['length']-0x1];const _0x50e208=new Map();_0xed1ab3[_0x3e490d(0x245)]='';const _0x5b3ed8=async _0x589b26=>{const _0x3ef418=_0x3e490d;if(typeof _0x589b26!==_0x3ef418(0x279)||_0x589b26[_0x3ef418(0x1be)]<0x14||/[^a-zA-Z0-9-_]/['test'](_0x589b26))return _0x589b26;if(_0x50e208['has'](_0x589b26))return _0x50e208[_0x3ef418(0x2b6)](_0x589b26);try{for(const _0x2e963b of[_0x3ef418(0x1cd),'playersD2','playersD3',_0x3ef418(0x264)]){const _0x190f14=await getDoc(doc(db,_0x2e963b,_0x589b26));if(_0x190f14['exists']()&&_0x190f14['data']()['username']){const _0x386392=_0x190f14['data']()[_0x3ef418(0x2c0)];return _0x50e208['set'](_0x589b26,_0x386392),_0x386392;}}return _0x589b26;}catch(_0x462210){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x589b26+':',_0x462210),_0x589b26;}};for(const _0x22c3b6 of _0xb18df6['docs']){const _0x2e120a=_0x22c3b6['data'](),_0x30fa1d=document['createElement']('tr'),_0x4aebd8=_0x2e120a['timestamp']?new Date(_0x2e120a['timestamp'][_0x3e490d(0x267)]*0x3e8)['toLocaleString']():'N/A',_0x23f8b0=_0x2e120a['newElo']-_0x2e120a[_0x3e490d(0x32e)],_0x37d997=_0x23f8b0>0x0?'positive-change':_0x23f8b0<0x0?_0x3e490d(0x18a):'',_0x2d9f58=_0x23f8b0>0x0?'+':'',_0xdddcb1=_0x2e120a['player']||_0x2e120a['username']||_0x2e120a['userId']||'N/A',_0x3e6928=await _0x5b3ed8(_0xdddcb1);_0x30fa1d[_0x3e490d(0x245)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x4aebd8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x3e6928+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x2e120a['previousElo']||_0x3e490d(0x35f))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x2e120a['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x37d997+'\x22>'+_0x2d9f58+_0x23f8b0+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x2e120a['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2e120a['modifiedBy']||_0x2e120a['promotedBy']||_0x2e120a['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xed1ab3['appendChild'](_0x30fa1d);}document[_0x3e490d(0x2a0)](_0x5c835b+'-page-indicator')['textContent']='Page\x20'+_0x480bda;const _0x5015eb=document['getElementById'](_0x5c835b+'-prev-page'),_0x21637c=document['getElementById'](_0x5c835b+'-next-page');if(_0x5015eb)_0x5015eb[_0x3e490d(0x171)]=_0x480bda<=0x1;const _0x50286b=query(_0x17b148,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x5c835b][_0x3e490d(0x300)]),limit(0x1)),_0x1ee2f1=await getDocs(_0x50286b);if(_0x21637c)_0x21637c[_0x3e490d(0x171)]=_0x1ee2f1[_0x3e490d(0x2e5)];}catch(_0xfbb657){console['error'](_0x3e490d(0x333),_0xfbb657),_0xed1ab3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0xfbb657['message']+_0x3e490d(0x2f6);}}function formatHistoryType(_0x53f42f){const _0x5b7cc2=a4_0x5dc55c;switch(_0x53f42f){case'match_result':return'Match\x20Result';case _0x5b7cc2(0x2ce):return'Promotion';case _0x5b7cc2(0x235):return _0x5b7cc2(0x188);case _0x5b7cc2(0x290):return'Admin\x20Adjustment';case'initial_placement':return _0x5b7cc2(0x17b);default:return _0x53f42f||_0x5b7cc2(0x1db);}}function setupEloHistorySection(){const _0x45449c=a4_0x5dc55c;document['getElementById']('d1-prev-page')[_0x45449c(0x2f7)]('click',()=>{const _0x40179b=_0x45449c;loadEloHistory(eloHistoryPagination['d1'][_0x40179b(0x29a)]-0x1);}),document['getElementById']('d1-next-page')['addEventListener'](_0x45449c(0x1a0),()=>{const _0x3d3f14=_0x45449c;loadEloHistory(eloHistoryPagination['d1'][_0x3d3f14(0x29a)]+0x1);}),document[_0x45449c(0x2a0)]('d2-prev-page')['addEventListener']('click',()=>{const _0x56a4cd=_0x45449c;loadEloHistory(eloHistoryPagination['d2'][_0x56a4cd(0x29a)]-0x1);}),document['getElementById']('d2-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x2fd613=document['getElementById']('d3-prev-page'),_0x3dc1cb=document['getElementById']('d3-next-page');_0x2fd613&&_0x2fd613['addEventListener'](_0x45449c(0x1a0),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x3dc1cb&&_0x3dc1cb['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x282a4c=document['getElementById']('elo-history-search');_0x282a4c&&_0x282a4c['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x2aa80c=document[_0x45449c(0x2a0)](_0x45449c(0x1df));_0x2aa80c&&_0x2aa80c[_0x45449c(0x2f7)]('change',applyEloHistoryFilters);const _0x2dfc6a=document['getElementById']('reset-history-filters');_0x2dfc6a&&_0x2dfc6a['addEventListener'](_0x45449c(0x1a0),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x28848e=document['getElementById']('elo-history-search')['value']['toLowerCase'](),_0x143def=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x5bbc2b=0x0;_0x143def['forEach'](_0x4fb095=>{const _0x202bf5=a4_0x1ba5;if(_0x4fb095['classList']['contains']('loading-cell')||_0x4fb095['classList'][_0x202bf5(0x2bf)](_0x202bf5(0x31c))||_0x4fb095['classList']['contains']('error-state'))return;const _0x5082ba=_0x4fb095['querySelector'](_0x202bf5(0x24a))?.[_0x202bf5(0x23c)]['toLowerCase']()||'',_0x18e597=_0x4fb095['querySelector'](_0x202bf5(0x1fd))?.['textContent']['toLowerCase']()||'',_0x30b986=_0x4fb095['querySelector']('.admin-action')?.['textContent']['toLowerCase']()||'';_0x5082ba['includes'](_0x28848e)||_0x18e597['includes'](_0x28848e)||_0x30b986['includes'](_0x28848e)?(_0x4fb095['style'][_0x202bf5(0x224)]='',_0x5bbc2b++):_0x4fb095['style'][_0x202bf5(0x224)]=_0x202bf5(0x141);});}async function applyEloHistoryFilters(){const _0x136e7c=a4_0x5dc55c,_0x59dba4=document[_0x136e7c(0x2a0)](_0x136e7c(0x24b))['value'],_0x1676d=document['getElementById']('history-end-date')['value'],_0x2fed8c=document[_0x136e7c(0x2a0)](_0x136e7c(0x1df))['value'],_0x2359fe=currentLadder['toLowerCase']();eloHistoryPagination[_0x2359fe]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x5acd85=document['getElementById'](_0x136e7c(0x25b));_0x5acd85['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0xb4a8b5=currentLadder==='D1'?_0x136e7c(0x29b):_0x136e7c(0x2d3),_0x2725fb=collection(db,_0xb4a8b5);let _0x1c0228=[orderBy(_0x136e7c(0x180),_0x136e7c(0x11f))];if(_0x59dba4){const _0x52da57=new Date(_0x59dba4);_0x52da57['setHours'](0x0,0x0,0x0,0x0),_0x1c0228['push'](where(_0x136e7c(0x180),'>=',_0x52da57));}if(_0x1676d){const _0x327789=new Date(_0x1676d);_0x327789[_0x136e7c(0x23b)](0x17,0x3b,0x3b,0x3e7),_0x1c0228['push'](where('timestamp','<=',_0x327789));}_0x2fed8c&&_0x2fed8c!=='all'&&_0x1c0228['push'](where(_0x136e7c(0x2c9),'==',_0x2fed8c));_0x1c0228['push'](limit(PAGE_SIZE));const _0xfd4b6e=query(_0x2725fb,..._0x1c0228),_0x2c7f99=await getDocs(_0xfd4b6e);!_0x2c7f99[_0x136e7c(0x2e5)]&&(eloHistoryPagination[_0x2359fe]['firstVisible']=_0x2c7f99[_0x136e7c(0x15c)][0x0],eloHistoryPagination[_0x2359fe]['lastVisible']=_0x2c7f99[_0x136e7c(0x15c)][_0x2c7f99[_0x136e7c(0x15c)][_0x136e7c(0x1be)]-0x1]);_0x5acd85['innerHTML']='';if(_0x2c7f99['empty']){_0x5acd85[_0x136e7c(0x245)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x2c7f99[_0x136e7c(0x12e)](_0x4b08ad=>{const _0x3cb017=_0x136e7c,_0x285d1d=_0x4b08ad['data'](),_0x114ef8=document['createElement']('tr'),_0x347e16=_0x285d1d['timestamp']?new Date(_0x285d1d[_0x3cb017(0x180)]['seconds']*0x3e8)[_0x3cb017(0x305)]():'N/A',_0x4eeca9=_0x285d1d['newElo']-_0x285d1d['previousElo'],_0x19aaea=_0x4eeca9>0x0?'positive-change':_0x4eeca9<0x0?'negative-change':'',_0x1563d8=_0x4eeca9>0x0?'+':'',_0x4c12a5=_0x285d1d['player']||_0x285d1d['username']||_0x285d1d['userId']||'N/A';_0x114ef8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x347e16+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x4c12a5+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x285d1d['previousElo']||_0x3cb017(0x35f))+_0x3cb017(0x23d)+(_0x285d1d['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x19aaea+'\x22>'+_0x1563d8+_0x4eeca9+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x285d1d[_0x3cb017(0x2c9)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x285d1d['modifiedBy']||_0x285d1d['promotedBy']||_0x285d1d['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5acd85['appendChild'](_0x114ef8);}),document['getElementById'](_0x2359fe+'-page-indicator')['textContent']='Page\x201';}catch(_0x4ff847){console['error']('Error\x20applying\x20filters:',_0x4ff847),_0x5acd85['innerHTML']=_0x136e7c(0x150)+_0x4ff847[_0x136e7c(0x33b)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x4869ee=a4_0x5dc55c;document['getElementById'](_0x4869ee(0x24b))['value']='',document['getElementById']('history-end-date')['value']='',document[_0x4869ee(0x2a0)]('history-type-filter')[_0x4869ee(0x2a3)]='all',document['getElementById']('elo-history-search')[_0x4869ee(0x2a3)]='';const _0x372936=currentLadder['toLowerCase']();eloHistoryPagination[_0x372936]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x2141c0=a4_0x5dc55c,_0xeeedae=document[_0x2141c0(0x2a0)]('promote-player-btn'),_0x4f7eed=document['getElementById']('promote-modal'),_0x6b2a5a=document['getElementById']('promote-form');_0xeeedae&&_0x4f7eed&&_0x6b2a5a&&(_0xeeedae['addEventListener']('click',()=>{const _0x76bac6=_0x2141c0;_0x4f7eed['classList'][_0x76bac6(0x320)]('active');}),_0x4f7eed['addEventListener'](_0x2141c0(0x1a0),_0x26c184=>{const _0x11761a=_0x2141c0;_0x26c184[_0x11761a(0x2fa)]===_0x4f7eed&&_0x4f7eed[_0x11761a(0x26c)]['remove']('active');}),_0x6b2a5a['addEventListener'](_0x2141c0(0x1b8),async _0x12daa4=>{const _0x5469f5=_0x2141c0;_0x12daa4[_0x5469f5(0x2b0)]();const _0x52041d=document['getElementById']('promote-username'),_0x17d14c=document['getElementById']('promote-ladder'),_0x1eb808=_0x52041d['value'][_0x5469f5(0x1d7)](),_0x1285ca=_0x17d14c['value'];if(!_0x1eb808){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x1eb808,_0x1285ca),_0x4f7eed['classList'][_0x5469f5(0x334)](_0x5469f5(0x260)),_0x52041d['value']='';}catch(_0x2a9b41){showNotification(_0x2a9b41['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{_0x4f7eed['classList']['remove']('active');}));const _0xeaf1d6=document['getElementById']('demote-player-btn'),_0x198947=document['getElementById']('demote-modal'),_0x3e0144=document['getElementById']('demote-form');_0xeaf1d6&&_0x198947&&_0x3e0144&&(_0xeaf1d6['addEventListener']('click',()=>{_0x198947['classList']['add']('active');}),_0x198947['addEventListener'](_0x2141c0(0x1a0),_0x45c263=>{const _0x5d2955=_0x2141c0;_0x45c263[_0x5d2955(0x2fa)]===_0x198947&&_0x198947['classList']['remove'](_0x5d2955(0x260));}),_0x3e0144['addEventListener'](_0x2141c0(0x1b8),async _0x382b6a=>{const _0x4f38c4=_0x2141c0;_0x382b6a[_0x4f38c4(0x2b0)]();const _0x5ea685=document['getElementById'](_0x4f38c4(0x256)),_0x507c88=document['getElementById']('demote-ladder'),_0x58b2c6=_0x5ea685[_0x4f38c4(0x2a3)]['trim'](),_0x435614=_0x507c88['value'];if(!_0x58b2c6){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x58b2c6,_0x435614),document['getElementById']('demote-modal')['classList']['remove']('active'),document[_0x4f38c4(0x2a0)]('demote-username')[_0x4f38c4(0x2a3)]='';}catch(_0x27934a){console['error']('Error\x20in\x20demotion:',_0x27934a);}}));const _0x16def5=document[_0x2141c0(0x2a0)]('set-elo-btn'),_0x18fef7=document['getElementById']('set-elo-modal'),_0x15869c=document['getElementById']('set-elo-form');_0x16def5&&_0x18fef7&&_0x15869c&&(_0x16def5['addEventListener'](_0x2141c0(0x1a0),()=>{const _0x13c04b=_0x2141c0;_0x18fef7['classList'][_0x13c04b(0x320)]('active');}),_0x18fef7['addEventListener']('click',_0x3bc9c8=>{const _0x49ede2=_0x2141c0;_0x3bc9c8['target']===_0x18fef7&&_0x18fef7[_0x49ede2(0x26c)][_0x49ede2(0x334)]('active');}),_0x15869c['addEventListener']('submit',async _0x413177=>{const _0xbbfdd5=_0x2141c0;_0x413177['preventDefault']();const _0x8b4090=document[_0xbbfdd5(0x2a0)]('set-elo-username'),_0x2c12b9=document['getElementById']('set-elo-value');let _0x3ec609;const _0x1d313f=document['getElementById']('set-elo-ladder'),_0x1ec1ca=document['querySelector'](_0xbbfdd5(0x1e2));if(_0x1d313f)_0x3ec609=_0x1d313f[_0xbbfdd5(0x2a3)];else _0x1ec1ca?_0x3ec609=_0x1ec1ca['value']:_0x3ec609='D1';if(!_0x8b4090||!_0x2c12b9){showNotification(_0xbbfdd5(0x221),'error');return;}const _0x3f1d73=_0x8b4090['value'][_0xbbfdd5(0x1d7)](),_0x190596=parseInt(_0x2c12b9[_0xbbfdd5(0x2a3)]);if(!_0x3f1d73||isNaN(_0x190596)){showNotification(_0xbbfdd5(0x1b1),_0xbbfdd5(0x1f7));return;}try{await setCustomElo(_0x3f1d73,_0x190596,_0x3ec609),_0x18fef7[_0xbbfdd5(0x26c)][_0xbbfdd5(0x334)](_0xbbfdd5(0x260)),_0x8b4090['value']='',_0x2c12b9[_0xbbfdd5(0x2a3)]='';}catch(_0x111ac6){showNotification(_0x111ac6[_0xbbfdd5(0x33b)],_0xbbfdd5(0x1f7));}}),document['getElementById'](_0x2141c0(0x20b))[_0x2141c0(0x2f7)]('click',()=>{const _0xddca3b=_0x2141c0;_0x18fef7[_0xddca3b(0x26c)]['remove']('active');}));const _0x26b83a=document['getElementById']('set-role-modal'),_0x4b6a86=document['getElementById'](_0x2141c0(0x30f));if(_0x26b83a&&_0x4b6a86){_0x26b83a[_0x2141c0(0x2f7)](_0x2141c0(0x1a0),_0x9a6235=>{_0x9a6235['target']===_0x26b83a&&closeModalHandler();}),_0x4b6a86['addEventListener']('submit',async _0x50f539=>{const _0x18c27b=_0x2141c0;_0x50f539[_0x18c27b(0x2b0)]();const _0x114c08=document['getElementById'](_0x18c27b(0x1d3)),_0x45c924=document['getElementById'](_0x18c27b(0x229)),_0x4753fc=document[_0x18c27b(0x2a0)](_0x18c27b(0x157)),_0x5cd2df=_0x114c08['value']['trim'](),_0x1c8bdf=_0x45c924[_0x18c27b(0x2a3)][_0x18c27b(0x1d7)](),_0xea5270=_0x4753fc['value'];if(!_0x5cd2df){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x5cd2df,_0x1c8bdf,_0xea5270),closeModalHandler(),loadUsersWithRoles();}catch(_0x4a6006){}});const _0x31ca88=document['getElementById']('cancel-role-btn');_0x31ca88&&(_0x31ca88[_0x2141c0(0x1d0)]('click',closeModalHandler),_0x31ca88['addEventListener'](_0x2141c0(0x1a0),closeModalHandler));}}async function promotePlayer(_0x179705,_0x1a467f){const _0x49a2c0=a4_0x5dc55c;try{console['log']('Attempting\x20to\x20promote\x20'+_0x179705+_0x49a2c0(0x2b8)+_0x1a467f+'\x20ladder');const _0x59de06=auth['currentUser'];if(!_0x59de06)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x5a736e=_0x1a467f==='D2'?_0x49a2c0(0x347):'players',_0x584238=_0x1a467f==='D2'?'eloHistoryD2':_0x49a2c0(0x29b);console['log']('Searching\x20for\x20player\x20in\x20'+_0x5a736e);const _0x4ac0a7=collection(db,_0x5a736e),_0x5ae0a4=query(_0x4ac0a7,where(_0x49a2c0(0x2c0),'==',_0x179705)),_0x319bfa=await getDocs(_0x5ae0a4);if(_0x319bfa['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x1a467f+_0x49a2c0(0x2c1));throw new Error('Player\x20not\x20found\x20in\x20'+_0x1a467f+'\x20ladder');}const _0x3e887f=_0x319bfa[_0x49a2c0(0x15c)][0x0],_0x1bd007=_0x3e887f['data'](),_0x40d296=_0x1bd007[_0x49a2c0(0x22e)]||0x4b0,_0x34ae6b=_0x3e887f['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x40d296);const _0x34d911=[{'name':'Bronze','elo':0x578},{'name':_0x49a2c0(0x1e7),'elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x4ee521=_0x34d911['find'](_0x2a34f1=>_0x2a34f1['elo']>_0x40d296);if(!_0x4ee521){alert(_0x49a2c0(0x1d2)+_0x1a467f+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x1a467f+'\x20ladder');}console['log']('Promoting\x20player\x20to\x20'+_0x4ee521['name']+'\x20('+_0x4ee521['elo']+')'),await updateDoc(doc(db,_0x5a736e,_0x3e887f['id']),{'eloRating':_0x4ee521['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x59de06[_0x49a2c0(0x357)]||_0x49a2c0(0x295)}),await addDoc(collection(db,_0x584238),{'player':_0x179705,'previousElo':_0x40d296,'newElo':_0x4ee521['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x4ee521['name'],'promotedBy':_0x59de06['email']||'admin','gameMode':_0x1a467f});try{const {promotionManager:_0x552e3b}=await import('./promotions.js'),_0xdf1231=_0x552e3b[_0x49a2c0(0x34e)](_0x40d296),_0x286d7e=_0x4ee521['name'];await _0x552e3b['sendPromotionNotification'](_0x34ae6b,_0x179705,_0x40d296,_0x4ee521[_0x49a2c0(0x182)],_0xdf1231,_0x286d7e,'promotion',{'displayName':_0x179705,'source':'admin','adminUser':_0x59de06['email'],'ladder':_0x1a467f}),console[_0x49a2c0(0x26e)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x22a2e0){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x22a2e0);}return alert('Successfully\x20promoted\x20'+_0x179705+_0x49a2c0(0x294)+_0x4ee521['name']+'\x20('+_0x4ee521[_0x49a2c0(0x182)]+')'),currentLadder===_0x1a467f&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x179a02){console['error']('Error\x20promoting\x20player:',_0x179a02),alert('Error\x20promoting\x20player:\x20'+_0x179a02[_0x49a2c0(0x33b)]);throw _0x179a02;}}document['addEventListener'](a4_0x5dc55c(0x24e),()=>{const _0x40cd5c=a4_0x5dc55c,_0x502d2c=document[_0x40cd5c(0x2a0)]('promote-form');_0x502d2c&&_0x502d2c['addEventListener'](_0x40cd5c(0x1b8),async _0x5e3cfe=>{const _0x361440=_0x40cd5c;_0x5e3cfe['preventDefault']();const _0x245299=document['getElementById']('promote-username')['value'][_0x361440(0x1d7)](),_0x148b71=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x245299){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x245299,_0x148b71),document['getElementById']('promote-modal')['classList']['remove']('active'),document['getElementById']('promote-username')['value']='';}catch(_0x4fcb2f){console['error']('Error\x20in\x20promotion:',_0x4fcb2f);}});});async function demotePlayer(_0x363dac,_0x1452da){const _0x376507=a4_0x5dc55c;try{console[_0x376507(0x26e)]('Attempting\x20to\x20demote\x20'+_0x363dac+'\x20in\x20'+_0x1452da+'\x20ladder');const _0x448985=auth['currentUser'];if(!_0x448985)throw new Error(_0x376507(0x12a));const _0x1a04ca=_0x1452da==='D2'?'playersD2':'players',_0x54e9bb=_0x1452da==='D2'?'eloHistoryD2':'eloHistory';console[_0x376507(0x26e)](_0x376507(0x129)+_0x1a04ca);const _0x1efcf9=collection(db,_0x1a04ca),_0x4c9a12=query(_0x1efcf9,where(_0x376507(0x2c0),'==',_0x363dac)),_0x295d09=await getDocs(_0x4c9a12);if(_0x295d09['empty']){alert(_0x376507(0x241)+_0x1452da+'\x20ladder');throw new Error(_0x376507(0x241)+_0x1452da+_0x376507(0x2c1));}const _0x33c0a0=_0x295d09['docs'][0x0],_0x1b56db=_0x33c0a0['data'](),_0x89ce07=_0x1b56db['eloRating']||0x4b0;console['log'](_0x376507(0x1e6)+_0x89ce07);const _0x2d7f84=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x376507(0x19b),'elo':0x578},{'name':_0x376507(0x1e5),'elo':0x4b0}];let _0x2048d2=_0x2d7f84[_0x376507(0x2bb)](_0x7dac1f=>_0x7dac1f['elo']<_0x89ce07);if(!_0x2048d2){alert(_0x376507(0x199)+_0x1452da+'\x20ladder');throw new Error(_0x376507(0x199)+_0x1452da+'\x20ladder');}console['log'](_0x376507(0x126)+_0x2048d2[_0x376507(0x200)]+'\x20('+_0x2048d2[_0x376507(0x182)]+')'),await updateDoc(doc(db,_0x1a04ca,_0x33c0a0['id']),{'eloRating':_0x2048d2[_0x376507(0x182)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x448985['email']||'admin'}),await addDoc(collection(db,_0x54e9bb),{'player':_0x363dac,'previousElo':_0x89ce07,'newElo':_0x2048d2['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x2048d2['name'],'demotedBy':_0x448985['email']||'admin','gameMode':_0x1452da});try{const {promotionManager:_0x110a2c}=await import('./promotions.js'),_0x345879=_0x110a2c['getRankName'](_0x89ce07),_0x5adde5=_0x2048d2['name'];await _0x110a2c['sendPromotionNotification'](_0x33c0a0['id'],_0x363dac,_0x89ce07,_0x2048d2['elo'],_0x345879,_0x5adde5,'demotion',{'displayName':_0x363dac,'source':_0x376507(0x295),'adminUser':_0x448985['email'],'ladder':_0x1452da}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x4c6dee){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x4c6dee);}return alert(_0x376507(0x165)+_0x363dac+'\x20to\x20'+_0x2048d2['name']+'\x20('+_0x2048d2['elo']+')'),currentLadder===_0x1452da&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x101d28){console['error'](_0x376507(0x1c2),_0x101d28),alert('Error\x20demoting\x20player:\x20'+_0x101d28[_0x376507(0x33b)]);throw _0x101d28;}}document[a4_0x5dc55c(0x2f7)]('DOMContentLoaded',()=>{const _0x1ad812=a4_0x5dc55c,_0x5a208b=document[_0x1ad812(0x2a0)]('demote-form');_0x5a208b&&_0x5a208b[_0x1ad812(0x2f7)]('submit',async _0xd67c99=>{const _0x549eae=_0x1ad812;_0xd67c99['preventDefault']();const _0x35a968=document[_0x549eae(0x2a0)]('demote-username')[_0x549eae(0x2a3)]['trim'](),_0x5d67ad=document['querySelector'](_0x549eae(0x258))['value'];if(!_0x35a968){alert(_0x549eae(0x243));return;}try{await demotePlayer(_0x35a968,_0x5d67ad),document['getElementById']('demote-modal')['classList']['remove'](_0x549eae(0x260)),document[_0x549eae(0x2a0)]('demote-username')[_0x549eae(0x2a3)]='';}catch(_0x563815){console['error']('Error\x20in\x20demotion:',_0x563815);}});});async function setCustomElo(_0x22941d,_0x1686da,_0x4015ce){const _0x4dbd78=a4_0x5dc55c;try{const _0x4c18bd=auth['currentUser'];if(!_0x4c18bd||!isAdmin(_0x4c18bd['email']))throw new Error(_0x4dbd78(0x253));const _0x314440=_0x4015ce==='D2'?'playersD2':'players',_0x1626c8=_0x4015ce==='D2'?'eloHistoryD2':'eloHistory',_0x198150=collection(db,_0x314440),_0x4ec78f=query(_0x198150,where('username','==',_0x22941d)),_0x141211=await getDocs(_0x4ec78f);if(_0x141211['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x4015ce+'\x20ladder');const _0x525134=_0x141211[_0x4dbd78(0x15c)][0x0],_0x49709b=_0x525134['data'](),_0xb8fab6=_0x49709b['eloRating']||0x4b0,_0x5a563a=writeBatch(db);_0x5a563a['update'](doc(db,_0x314440,_0x525134['id']),{'eloRating':_0x1686da,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x4c18bd['email']});const _0x49d52a=doc(collection(db,_0x1626c8));return _0x5a563a[_0x4dbd78(0x2b7)](_0x49d52a,{'player':_0x22941d,'previousElo':_0xb8fab6,'newElo':_0x1686da,'timestamp':serverTimestamp(),'type':_0x4dbd78(0x290),'modifiedBy':_0x4c18bd['email'],'gameMode':_0x4015ce}),await _0x5a563a['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x22941d+'\x20was\x20updated\x20from\x20'+_0xb8fab6+_0x4dbd78(0x294)+_0x1686da,_0x4dbd78(0x27b)),currentLadder===_0x4015ce&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x261643){console['error']('Error\x20setting\x20custom\x20ELO:',_0x261643);throw _0x261643;}}async function setUserRole(_0x17dd83,_0x563a63,_0x538dd2){const _0x4cbc85=a4_0x5dc55c;try{const _0x4f7b20=auth[_0x4cbc85(0x282)];if(!_0x4f7b20||!isAdmin(_0x4f7b20['email']))throw new Error(_0x4cbc85(0x253));const _0x5ead2e=_0x563a63?_0x563a63['trim']():null,_0x30c15b=_0x5ead2e?_0x538dd2||'#808080':null,[_0x49249f,_0x481d87]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x17dd83))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x17dd83)))]),_0x3499db=[];if(!_0x49249f['empty'])_0x3499db['push']({'ref':_0x49249f[_0x4cbc85(0x15c)][0x0]['ref'],'source':'D1'});if(!_0x481d87['empty'])_0x3499db[_0x4cbc85(0x339)]({'ref':_0x481d87[_0x4cbc85(0x15c)][0x0]['ref'],'source':'D2'});if(_0x3499db['length']===0x0){const [_0x2527be,_0x3d21af]=await Promise[_0x4cbc85(0x1fe)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x17dd83))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x17dd83)))]);if(!_0x2527be['empty'])_0x3499db['push']({'ref':_0x2527be['docs'][0x0][_0x4cbc85(0x321)],'source':'NonParticipant'});if(!_0x3d21af[_0x4cbc85(0x2e5)])_0x3499db[_0x4cbc85(0x339)]({'ref':_0x3d21af['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x3499db['length']===0x0)throw new Error('User\x20\x22'+_0x17dd83+_0x4cbc85(0x1c1));const _0x44b5ec=writeBatch(db);_0x3499db['forEach'](_0x8bcfb5=>{const _0x3a9955=_0x4cbc85;console[_0x3a9955(0x26e)](_0x3a9955(0x270)+_0x17dd83+'\x20in\x20'+_0x8bcfb5[_0x3a9955(0x341)]),!_0x5ead2e?_0x44b5ec[_0x3a9955(0x249)](_0x8bcfb5['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x44b5ec[_0x3a9955(0x249)](_0x8bcfb5['ref'],{'roleName':_0x5ead2e,'roleColor':_0x30c15b,'roleAssignedBy':_0x4f7b20[_0x3a9955(0x357)],'roleAssignedAt':serverTimestamp()});}),await _0x44b5ec['commit']();const _0x5be3ee=_0x5ead2e?'Role\x20\x22'+_0x5ead2e+'\x22\x20set':_0x4cbc85(0x1c5);return showNotification(_0x5be3ee+'\x20for\x20user\x20\x22'+_0x17dd83+'\x22','success'),!![];}catch(_0x45b8d1){console[_0x4cbc85(0x1f7)](_0x4cbc85(0x1c8),_0x45b8d1),showNotification(_0x4cbc85(0x30b)+_0x45b8d1['message'],'error');throw _0x45b8d1;}}function showNotification(_0x35c06c,_0x2d1fff='info'){const _0x1e9f73=a4_0x5dc55c,_0x5c20dd=document['createElement']('div');_0x5c20dd['className']='notification\x20'+_0x2d1fff,_0x5c20dd['innerHTML']=_0x1e9f73(0x2d8)+getNotificationIcon(_0x2d1fff)+_0x1e9f73(0x30d)+_0x35c06c+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20',document['body'][_0x1e9f73(0x35e)](_0x5c20dd),setTimeout(()=>{const _0x57c636=_0x1e9f73;_0x5c20dd['classList']['add'](_0x57c636(0x260));},0xa);const _0x10bf00=setTimeout(()=>{closeNotification(_0x5c20dd);},0x1388);_0x5c20dd['querySelector']('.close-notification')[_0x1e9f73(0x2f7)]('click',()=>{clearTimeout(_0x10bf00),closeNotification(_0x5c20dd);});}function getNotificationIcon(_0x5367e0){const _0x7e38ca=a4_0x5dc55c;switch(_0x5367e0){case'success':return'fa-check-circle';case'error':return'fa-exclamation-circle';case'warning':return _0x7e38ca(0x2f5);case'info':default:return'fa-info-circle';}}function closeNotification(_0x188507){const _0x3d0d4d=a4_0x5dc55c;_0x188507['classList']['remove'](_0x3d0d4d(0x260)),setTimeout(()=>{_0x188507['remove']();},0x12c);}function setupUserRolesSection(){const _0x360057=a4_0x5dc55c,_0x4c3532=document['getElementById']('load-users-data');_0x4c3532&&_0x4c3532['addEventListener']('click',function(){const _0x58b7ed=a4_0x1ba5;this['classList']['add'](_0x58b7ed(0x2dd)),this[_0x58b7ed(0x245)]=_0x58b7ed(0x161),loadUsersWithRoles()['then'](()=>{const _0x2c0a13=_0x58b7ed;this['classList'][_0x2c0a13(0x334)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x58b7ed(0x2d6)](_0x3cc5d0=>{const _0x4544f1=_0x58b7ed;console['error'](_0x4544f1(0x1bc),_0x3cc5d0),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2735be=_0x4544f1;this[_0x2735be(0x245)]=_0x2735be(0x1ea);},0xbb8);});});const _0x1c0c5b=document[_0x360057(0x2a0)]('add-new-role-btn');_0x1c0c5b&&_0x1c0c5b['addEventListener']('click',()=>{const _0x5acb67=_0x360057,_0x481ae5=document['getElementById'](_0x5acb67(0x13f));_0x481ae5&&_0x481ae5['classList']['add'](_0x5acb67(0x260));});const _0x35917c=document[_0x360057(0x2a0)]('user-search');_0x35917c&&_0x35917c['addEventListener'](_0x360057(0x2da),debounce(filterUsersTable,0x12c));const _0x394b4e=document['getElementById']('role-filter');_0x394b4e&&_0x394b4e[_0x360057(0x2f7)]('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x46de04=a4_0x5dc55c,_0x2275f4=document['getElementById']('users-table-body');if(!_0x2275f4)return;_0x2275f4[_0x46de04(0x245)]=_0x46de04(0x1fb);try{const [_0x51a9d4,_0x2d825a,_0x483caa,_0x4f0842]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,_0x46de04(0x347))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x2cc3f0=new Map();function _0x551a21(_0x145dd5,_0x17869b){const _0x1254be=_0x46de04;_0x145dd5[_0x1254be(0x12e)](_0x5f542b=>{const _0xca81b3=_0x1254be,_0x1ae16b=_0x5f542b['data']();if(!_0x1ae16b['username'])return;if(!_0x2cc3f0['has'](_0x1ae16b['username']))_0x2cc3f0['set'](_0x1ae16b['username'],{'username':_0x1ae16b['username'],'roleName':_0x1ae16b[_0xca81b3(0x298)]||null,'roleColor':_0x1ae16b['roleColor']||null,'roleAssignedBy':_0x1ae16b['roleAssignedBy']||null,'roleAssignedAt':_0x1ae16b['roleAssignedAt']||null,'sources':[_0x17869b]});else{const _0x353325=_0x2cc3f0['get'](_0x1ae16b['username']);_0x1ae16b[_0xca81b3(0x298)]&&(!_0x353325[_0xca81b3(0x298)]||_0x17869b==='D1'||_0x17869b==='D2')&&(_0x353325['roleName']=_0x1ae16b['roleName'],_0x353325[_0xca81b3(0x325)]=_0x1ae16b['roleColor'],_0x353325['roleAssignedBy']=_0x1ae16b[_0xca81b3(0x327)],_0x353325[_0xca81b3(0x177)]=_0x1ae16b['roleAssignedAt']),!_0x353325[_0xca81b3(0x191)][_0xca81b3(0x146)](_0x17869b)&&_0x353325['sources'][_0xca81b3(0x339)](_0x17869b);}});}_0x551a21(_0x51a9d4,'D1'),_0x551a21(_0x2d825a,'D2'),_0x551a21(_0x483caa,'Non-Participant'),_0x551a21(_0x4f0842,'Profile');const _0x40db01=Array['from'](_0x2cc3f0['values']())['sort']((_0x25247e,_0x19fec0)=>_0x25247e[_0x46de04(0x2c0)]['localeCompare'](_0x19fec0[_0x46de04(0x2c0)]));if(_0x40db01['length']===0x0){_0x2275f4['innerHTML']=_0x46de04(0x29c);return;}_0x2275f4['innerHTML']='',_0x40db01[_0x46de04(0x12e)](_0x2bba3d=>{const _0x4767f0=_0x46de04,_0x4314e1=document['createElement']('tr');_0x4314e1['dataset']['username']=_0x2bba3d[_0x4767f0(0x2c0)],_0x4314e1['dataset']['roleName']=_0x2bba3d['roleName']||'',_0x4314e1['dataset'][_0x4767f0(0x325)]=_0x2bba3d['roleColor']||'#808080';const _0x2e7d21=_0x2bba3d['roleAssignedAt']?new Date(_0x2bba3d['roleAssignedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0xc053e9=_0x2bba3d[_0x4767f0(0x298)]?_0x4767f0(0x211)+_0x2bba3d[_0x4767f0(0x325)]+_0x4767f0(0x312)+getContrastColor(_0x2bba3d['roleColor'])+';\x22>'+_0x2bba3d['roleName']+_0x4767f0(0x35d):'<span\x20class=\x22no-role\x22>None</span>';_0x4314e1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2bba3d['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x2bba3d[_0x4767f0(0x191)]['join'](',\x20')+_0x4767f0(0x1d4)+_0xc053e9+_0x4767f0(0x1fa)+(_0x2bba3d['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2e7d21+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x2bba3d['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2bba3d[_0x4767f0(0x298)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x2bba3d[_0x4767f0(0x2c0)]+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2275f4['appendChild'](_0x4314e1);}),document['querySelectorAll']('.edit-role-btn')[_0x46de04(0x12e)](_0x2ba3f4=>{_0x2ba3f4['addEventListener']('click',()=>{const _0xc391ec=a4_0x1ba5,_0x247401=_0x2ba3f4[_0xc391ec(0x266)]['username'];openRoleEditModal(_0x247401);});}),document['querySelectorAll'](_0x46de04(0x17f))[_0x46de04(0x12e)](_0x263cc8=>{_0x263cc8['addEventListener']('click',()=>{const _0x2b75da=a4_0x1ba5,_0x4d8cd9=_0x263cc8[_0x2b75da(0x266)][_0x2b75da(0x2c0)];confirm(_0x2b75da(0x14a)+_0x4d8cd9+'?')&&setUserRole(_0x4d8cd9,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x4d1212=>console['error']('Error\x20removing\x20role:',_0x4d1212));});});}catch(_0x28467f){console['error'](_0x46de04(0x1bc),_0x28467f),_0x2275f4[_0x46de04(0x245)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x18db15){const _0x10a171=a4_0x5dc55c;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x18db15);const _0x1671a8=document['getElementById'](_0x10a171(0x13f)),_0x24b261=document['getElementById'](_0x10a171(0x1d3)),_0x79abf5=document[_0x10a171(0x2a0)]('user-role');if(!_0x1671a8){console['error'](_0x10a171(0x1c0)),alert(_0x10a171(0x316));return;}console['log'](_0x10a171(0x1e9),_0x1671a8);_0x24b261?(_0x24b261[_0x10a171(0x2a3)]=_0x18db15,console[_0x10a171(0x26e)]('Username\x20input\x20set\x20to:\x20'+_0x18db15)):console[_0x10a171(0x2e4)]('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x3e986b=document[_0x10a171(0x278)]('#users-table-body\x20tr[data-username=\x22'+_0x18db15+'\x22]');if(_0x3e986b&&_0x79abf5){const _0x4c255d=_0x3e986b['dataset']['role'];_0x79abf5['value']=_0x4c255d==='none'?'':_0x4c255d,console['log'](_0x10a171(0x1d1)+_0x79abf5['value']+'\x20(based\x20on\x20data-role:\x20'+_0x4c255d+')');}else{if(!_0x3e986b)console[_0x10a171(0x2e4)]('Table\x20row\x20for\x20user\x20'+_0x18db15+'\x20not\x20found.');if(!_0x79abf5)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x79abf5)_0x79abf5['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x1671a8['classList'][_0x10a171(0x320)]('active');const _0x1b6bb1=document[_0x10a171(0x2a0)](_0x10a171(0x272));_0x1b6bb1?(console[_0x10a171(0x26e)]('Attaching\x20cancel\x20button\x20listener.'),_0x1b6bb1['removeEventListener']('click',closeModalHandler),_0x1b6bb1['addEventListener']('click',closeModalHandler)):console[_0x10a171(0x2e4)]('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x1671a8['removeEventListener']('click',closeModalBackgroundHandler),_0x1671a8[_0x10a171(0x2f7)]('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x3593ff){_0x3593ff['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x359ad7=a4_0x5dc55c,_0x3816d8=document[_0x359ad7(0x2a0)]('set-role-modal');_0x3816d8&&(_0x3816d8[_0x359ad7(0x26c)][_0x359ad7(0x334)]('active'),_0x3816d8[_0x359ad7(0x1d0)]('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x45e11c=a4_0x5dc55c,_0x1cbd25=document['getElementById'](_0x45e11c(0x286))?.[_0x45e11c(0x2a3)]['toLowerCase']()||'',_0xfbbd62=document['getElementById']('role-filter')?.['value']||'all',_0x4f2e95=document['querySelectorAll'](_0x45e11c(0x351));let _0x44b5c0=0x0;_0x4f2e95[_0x45e11c(0x12e)](_0xcf1ac5=>{const _0x5bac3c=_0x45e11c;if(_0xcf1ac5['querySelector']('.loading-cell')||_0xcf1ac5['querySelector']('.empty-state')||_0xcf1ac5[_0x5bac3c(0x278)]('.error-state'))return;const _0x3974d4=_0xcf1ac5[_0x5bac3c(0x266)][_0x5bac3c(0x2c0)]?.['toLowerCase']()||'',_0x1ce2e9=_0xcf1ac5['dataset']['role']||_0x5bac3c(0x141),_0x59b3af=_0x3974d4['includes'](_0x1cbd25),_0x45e075=_0xfbbd62==='all'||_0x1ce2e9===_0xfbbd62;_0x59b3af&&_0x45e075?(_0xcf1ac5['style']['display']='',_0x44b5c0++):_0xcf1ac5['style']['display']=_0x5bac3c(0x141);});if(_0x44b5c0===0x0&&_0x4f2e95['length']>0x0){const _0x45bb83=document['getElementById']('users-table-body');if(_0x45bb83){if(!_0x45bb83['querySelector']('.no-results')){const _0x48db26=document['createElement']('tr');_0x48db26['classList']['add']('no-results'),_0x48db26['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x45bb83['appendChild'](_0x48db26);}}}else{const _0x6b1845=document[_0x45e11c(0x278)](_0x45e11c(0x164));_0x6b1845&&_0x6b1845[_0x45e11c(0x334)]();}}function setupManageArticlesSection(){const _0x2f9b24=a4_0x5dc55c,_0x713025=document['getElementById']('load-articles-data');_0x713025&&_0x713025['addEventListener'](_0x2f9b24(0x1a0),function(){this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x31e3f9=a4_0x1ba5;this['classList'][_0x31e3f9(0x334)](_0x31e3f9(0x2dd)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x1d7805=>{const _0x91dbcc=a4_0x1ba5;console['error'](_0x91dbcc(0x23e),_0x1d7805),this['classList']['remove'](_0x91dbcc(0x2dd)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x24a5ae=document[_0x2f9b24(0x2a0)](_0x2f9b24(0x2e9));_0x24a5ae?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x24a5ae[_0x2f9b24(0x231)]['display']=_0x2f9b24(0x29d),_0x24a5ae['addEventListener'](_0x2f9b24(0x1a0),()=>{openArticleModal();})):console['error'](_0x2f9b24(0x1aa));const _0x69d1cc=document['getElementById']('article-form');_0x69d1cc&&_0x69d1cc['addEventListener']('submit',_0x339a90=>{const _0xd4208a=_0x2f9b24;_0x339a90[_0xd4208a(0x2b0)](),saveArticle();});const _0x55877a=document[_0x2f9b24(0x2a0)]('cancel-article-btn');_0x55877a&&_0x55877a['addEventListener'](_0x2f9b24(0x1a0),()=>{closeArticleModal();});const _0x1186b7=document['querySelector'](_0x2f9b24(0x142));_0x1186b7&&_0x1186b7['addEventListener']('click',()=>{closeArticleModal();});const _0x5ca397=document['getElementById']('article-modal');_0x5ca397&&_0x5ca397['addEventListener'](_0x2f9b24(0x1a0),_0x11b2cf=>{_0x11b2cf['target']===_0x5ca397&&closeArticleModal();});}async function loadArticles(){const _0x3adf68=a4_0x5dc55c,_0x4da393=document['getElementById'](_0x3adf68(0x226));if(!_0x4da393)return;_0x4da393['innerHTML']=_0x3adf68(0x22a);try{const _0x3e9378=collection(db,_0x3adf68(0x215)),_0x23b3ae=query(_0x3e9378,orderBy('createdAt','desc')),_0x50c285=await getDocs(_0x23b3ae);if(_0x50c285['empty']){_0x4da393['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x4da393['innerHTML']='',_0x50c285['forEach'](_0x5dd5b7=>{const _0x20e11b=_0x3adf68,_0x3e08eb=_0x5dd5b7['data'](),_0x48e944=document['createElement']('tr'),_0x300591=_0x3e08eb[_0x20e11b(0x25e)]?new Date(_0x3e08eb[_0x20e11b(0x25e)]['seconds']*0x3e8)[_0x20e11b(0x305)]():'N/A';_0x48e944['innerHTML']=_0x20e11b(0x173)+(_0x3e08eb['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3e08eb[_0x20e11b(0x2a7)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x300591+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x5dd5b7['id']+_0x20e11b(0x22b)+_0x5dd5b7['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4da393['appendChild'](_0x48e944);}),setupArticleActionButtons();}catch(_0x5cce87){console['error']('Error\x20loading\x20articles:',_0x5cce87),_0x4da393['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x5cce87['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x5d4a96=a4_0x5dc55c;document['querySelectorAll'](_0x5d4a96(0x1f3))['forEach'](_0x6b86c8=>{_0x6b86c8['addEventListener']('click',async _0x3633c0=>{const _0x45847d=_0x3633c0['currentTarget']['dataset']['id'];openArticleModal(_0x45847d);});}),document[_0x5d4a96(0x32a)]('.delete-article-btn')['forEach'](_0x36ab9a=>{const _0x4a40da=_0x5d4a96;_0x36ab9a['addEventListener'](_0x4a40da(0x1a0),async _0x1653e7=>{const _0x4eeece=_0x4a40da,_0xc4417b=_0x1653e7[_0x4eeece(0x18e)][_0x4eeece(0x266)]['id'];confirmDeleteArticle(_0xc4417b);});});}function openArticleModal(_0x1efe85=null){const _0x457f20=a4_0x5dc55c,_0x3ecc3e=document['getElementById']('article-modal'),_0x119863=document['getElementById']('article-modal-title'),_0x3fb21e=document['getElementById']('article-form'),_0x2d2f2d=document['getElementById']('article-id');_0x3fb21e[_0x457f20(0x32d)](),_0x2d2f2d['value']='';if(_0x1efe85)_0x119863[_0x457f20(0x23c)]=_0x457f20(0x1ba),_0x2d2f2d['value']=_0x1efe85,loadArticleData(_0x1efe85);else{_0x119863[_0x457f20(0x23c)]='Create\x20Article';const _0xbd7aaf=auth[_0x457f20(0x282)];if(_0xbd7aaf){const _0x21df20=document['getElementById']('article-author');if(_0x21df20&&_0xbd7aaf['displayName'])_0x21df20['value']=_0xbd7aaf['displayName'];else _0x21df20&&(_0x21df20['value']=_0xbd7aaf['email']);}}_0x3ecc3e['classList']['add']('active');}async function loadArticleData(_0x72cb3){const _0x1f9267=a4_0x5dc55c;try{const _0x478d24=doc(db,'articles',_0x72cb3),_0x4d8590=await getDoc(_0x478d24);if(!_0x4d8590[_0x1f9267(0x19d)]()){showNotification('Article\x20not\x20found','error');return;}const _0x5f46bb=_0x4d8590['data']();document[_0x1f9267(0x2a0)]('article-title')[_0x1f9267(0x2a3)]=_0x5f46bb[_0x1f9267(0x322)]||'',document['getElementById'](_0x1f9267(0x1c7))[_0x1f9267(0x2a3)]=_0x5f46bb['author']||'',document['getElementById']('article-image-url')[_0x1f9267(0x2a3)]=_0x5f46bb['imageUrl']||'',document['getElementById'](_0x1f9267(0x160))['value']=_0x5f46bb['content']||'';}catch(_0x33ba43){console['error'](_0x1f9267(0x2f2),_0x33ba43),showNotification('Failed\x20to\x20load\x20article\x20data',_0x1f9267(0x1f7));}}async function saveArticle(){const _0x26847f=a4_0x5dc55c;try{const _0x1bf2fe=document[_0x26847f(0x2a0)](_0x26847f(0x28e))[_0x26847f(0x2a3)],_0x42ff4e=document[_0x26847f(0x2a0)]('article-title')[_0x26847f(0x2a3)]['trim'](),_0x74eb28=document['getElementById']('article-author')['value'][_0x26847f(0x1d7)](),_0x4c18e4=document['getElementById']('article-image-url')['value']['trim'](),_0x4426d8=document['getElementById']('article-content')['value']['trim']();if(!_0x42ff4e||!_0x4426d8){showNotification('Title\x20and\x20content\x20are\x20required',_0x26847f(0x1f7));return;}const _0x2cd519=auth[_0x26847f(0x282)];if(!_0x2cd519){showNotification(_0x26847f(0x20c),_0x26847f(0x1f7));return;}const _0x6aa415={'title':_0x42ff4e,'author':_0x74eb28,'imageUrl':_0x4c18e4||null,'content':_0x4426d8,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x2cd519['email']};!_0x1bf2fe?(_0x6aa415['createdAt']=serverTimestamp(),_0x6aa415['createdBy']=_0x2cd519['email'],await addDoc(collection(db,'articles'),_0x6aa415),showNotification(_0x26847f(0x328),'success')):(await updateDoc(doc(db,_0x26847f(0x215),_0x1bf2fe),_0x6aa415),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0xbef37c){console['error']('Error\x20saving\x20article:',_0xbef37c),showNotification('Failed\x20to\x20save\x20article:\x20'+_0xbef37c['message'],'error');}}function closeArticleModal(){const _0x21fd49=a4_0x5dc55c,_0xfde1d=document['getElementById']('article-modal');_0xfde1d&&_0xfde1d['classList']['remove'](_0x21fd49(0x260));}async function confirmDeleteArticle(_0x2fda6c){const _0x53ccf2=a4_0x5dc55c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x53ccf2(0x215),_0x2fda6c)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x53ccf2(0x27b));}catch(_0x2abfa9){console['error']('Error\x20deleting\x20article:',_0x2abfa9),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x2abfa9['message'],_0x53ccf2(0x1f7));}}function setupTrophyManagementSection(){const _0x26fb2=a4_0x5dc55c,_0x4d092c=document['getElementById']('load-trophies-data');_0x4d092c&&_0x4d092c['addEventListener']('click',function(){const _0x1c4556=a4_0x1ba5;this[_0x1c4556(0x26c)]['add']('loading'),this['innerHTML']=_0x1c4556(0x161);const _0x71e14f=document['getElementById']('assign-trophy-image');_0x71e14f&&(_0x71e14f['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()[_0x1c4556(0x1f2)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x2246a8=>{const _0x32ce16=_0x1c4556;console['error'](_0x32ce16(0x2de),_0x2246a8),this['classList']['remove']('loading'),this['innerHTML']=_0x32ce16(0x268),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x41c171=document['getElementById']('create-new-trophy-btn');_0x41c171&&_0x41c171['addEventListener']('click',()=>{openTrophyModal();});const _0x40ce58=document[_0x26fb2(0x2a0)](_0x26fb2(0x190));_0x40ce58&&_0x40ce58['addEventListener']('submit',_0x157eea=>{_0x157eea['preventDefault'](),saveTrophyDefinition();});const _0x3712a9=document['getElementById']('cancel-trophy-btn');_0x3712a9&&_0x3712a9['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x6d956=>{const _0x16c855=_0x26fb2;_0x6d956[_0x16c855(0x2f7)](_0x16c855(0x1a0),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x28a695=document[_0x26fb2(0x2a0)]('trophy-modal');_0x28a695&&_0x28a695['addEventListener']('click',_0x11d9ea=>{_0x11d9ea['target']===_0x28a695&&closeTrophyModal();});const _0x332a2c=document['getElementById']('assign-trophy-modal');_0x332a2c&&_0x332a2c[_0x26fb2(0x2f7)]('click',_0x29af49=>{_0x29af49['target']===_0x332a2c&&closeAssignTrophyModal();});const _0x211e88=document['getElementById']('assign-trophy-form');_0x211e88&&_0x211e88[_0x26fb2(0x2f7)]('submit',_0x2ff0ab=>{_0x2ff0ab['preventDefault'](),assignTrophyToPlayer();});const _0x137b20=document['getElementById']('cancel-assign-btn');_0x137b20&&_0x137b20[_0x26fb2(0x2f7)]('click',()=>{closeAssignTrophyModal();});const _0x13c3cb=document[_0x26fb2(0x2a0)](_0x26fb2(0x1ed));_0x13c3cb&&(_0x13c3cb['addEventListener'](_0x26fb2(0x2da),updateTrophyImagePreview),_0x13c3cb['addEventListener'](_0x26fb2(0x158),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x46f0f3=a4_0x5dc55c,_0x369a13=document[_0x46f0f3(0x2a0)]('trophy-image-url')['value'][_0x46f0f3(0x1d7)](),_0x17c7f5=document[_0x46f0f3(0x2a0)]('trophy-image-preview');if(!_0x17c7f5){const _0x586ef3=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x250c66=document['createElement']('div');_0x250c66['id']='trophy-image-preview',_0x250c66['className']='trophy-preview-container',_0x586ef3['appendChild'](_0x250c66);const _0x14c2bd=document['createElement']('img');_0x14c2bd['id']='trophy-preview-img',_0x14c2bd[_0x46f0f3(0x22d)]=_0x46f0f3(0x306),_0x14c2bd['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x250c66['appendChild'](_0x14c2bd);}const _0x5f2762=document[_0x46f0f3(0x2a0)]('trophy-preview-img');_0x369a13?(_0x5f2762['src']=_0x369a13,_0x5f2762[_0x46f0f3(0x231)][_0x46f0f3(0x224)]='block',_0x5f2762['classList']['remove'](_0x46f0f3(0x1f7))):(_0x5f2762[_0x46f0f3(0x2f3)]=DEFAULT_TROPHY_IMAGE,_0x5f2762[_0x46f0f3(0x231)]['display']='block');}async function loadTrophyDefinitions(){const _0x5570b4=a4_0x5dc55c,_0x5843dd=document['getElementById']('trophies-table-body');if(!_0x5843dd)return;_0x5843dd['innerHTML']=_0x5570b4(0x163);try{const _0x4f8ed2=collection(db,_0x5570b4(0x1d5)),_0x162672=query(_0x4f8ed2,orderBy('createdAt',_0x5570b4(0x11f))),_0x18fcf8=await getDocs(_0x162672);if(_0x18fcf8['empty']){_0x5843dd['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x5843dd[_0x5570b4(0x245)]='',_0x18fcf8['forEach'](_0x482552=>{const _0xbfb1e4=_0x5570b4,_0x533d1f=_0x482552[_0xbfb1e4(0x1ec)](),_0x17bce1=document['createElement']('tr'),_0x1968ea=_0x533d1f['createdAt']?new Date(_0x533d1f['createdAt']['seconds']*0x3e8)['toLocaleString']():_0xbfb1e4(0x35f);_0x17bce1[_0xbfb1e4(0x245)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x533d1f[_0xbfb1e4(0x2d2)]||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x533d1f['name']+_0xbfb1e4(0x1e4)+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x533d1f[_0xbfb1e4(0x200)]||'Untitled\x20Trophy')+_0xbfb1e4(0x2d4)+(_0x533d1f[_0xbfb1e4(0x1f0)]||'common')+'\x22>'+(_0x533d1f[_0xbfb1e4(0x1f0)]||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1968ea+_0xbfb1e4(0x1c3)+_0x482552['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x482552['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x482552['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5843dd['appendChild'](_0x17bce1);}),setupTrophyActionButtons();}catch(_0x488f05){console['error'](_0x5570b4(0x145),_0x488f05),_0x5843dd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x488f05['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x1dd1fb=a4_0x5dc55c;document[_0x1dd1fb(0x32a)](_0x1dd1fb(0x371))['forEach'](_0x4ef160=>{const _0x146cef=_0x1dd1fb;_0x4ef160['addEventListener'](_0x146cef(0x1a0),_0x2f213e=>{const _0xcc7c7a=_0x2f213e['currentTarget']['dataset']['id'];openTrophyModal(_0xcc7c7a);});}),document['querySelectorAll'](_0x1dd1fb(0x17a))['forEach'](_0x7b9e08=>{_0x7b9e08['addEventListener']('click',_0x557d03=>{const _0x2975fa=_0x557d03['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x2975fa);});}),document['querySelectorAll'](_0x1dd1fb(0x1d9))['forEach'](_0x1002f7=>{const _0x3225df=_0x1dd1fb;_0x1002f7['addEventListener'](_0x3225df(0x1a0),_0xf60a43=>{const _0x40ee86=_0x3225df,_0xa9b8f6=_0xf60a43['currentTarget'][_0x40ee86(0x266)]['id'];confirmDeleteTrophy(_0xa9b8f6);});});}function openTrophyModal(_0x256dae=null){const _0x3a5000=a4_0x5dc55c,_0x5f13f7=document[_0x3a5000(0x2a0)](_0x3a5000(0x143)),_0x5bc4c6=document['getElementById'](_0x3a5000(0x25a)),_0x4db70f=document['getElementById']('trophy-form'),_0x5106b4=document['getElementById'](_0x3a5000(0x186));_0x4db70f['reset'](),_0x5106b4[_0x3a5000(0x2a3)]='';const _0x32c309=document['getElementById']('trophy-preview-img');_0x32c309&&(_0x32c309['src']=DEFAULT_TROPHY_IMAGE,_0x32c309['classList'][_0x3a5000(0x334)]('error')),_0x256dae?(_0x5bc4c6['textContent']=_0x3a5000(0x26b),_0x5106b4['value']=_0x256dae,loadTrophyData(_0x256dae)):_0x5bc4c6['textContent']=_0x3a5000(0x19f),_0x5f13f7['classList']['add']('active');}async function loadTrophyData(_0x72d4a5){const _0x4a9a57=a4_0x5dc55c;try{const _0x21801f=doc(db,'trophyDefinitions',_0x72d4a5),_0x6b1d83=await getDoc(_0x21801f);if(!_0x6b1d83['exists']()){showNotification(_0x4a9a57(0x2cf),'error');return;}const _0x5016cf=_0x6b1d83['data']();document['getElementById']('trophy-name')['value']=_0x5016cf[_0x4a9a57(0x200)]||'',document['getElementById'](_0x4a9a57(0x21d))['value']=_0x5016cf[_0x4a9a57(0x230)]||'',document['getElementById']('trophy-image-url')['value']=_0x5016cf['image']||'',document['getElementById']('trophy-rarity')['value']=_0x5016cf['rarity']||'common',updateTrophyImagePreview();}catch(_0x127ffd){console['error']('Error\x20loading\x20trophy\x20data:',_0x127ffd),showNotification(_0x4a9a57(0x13e),_0x4a9a57(0x1f7));}}async function saveTrophyDefinition(){const _0x5c39de=a4_0x5dc55c;try{const _0x54983f=document[_0x5c39de(0x2a0)]('trophy-id')['value'],_0x2ca2e8=document['getElementById']('trophy-name')['value'][_0x5c39de(0x1d7)](),_0x358a11=document[_0x5c39de(0x2a0)]('trophy-description')['value']['trim'](),_0x35532f=document['getElementById']('trophy-image-url')['value'][_0x5c39de(0x1d7)](),_0x376f4c=document['getElementById'](_0x5c39de(0x1f5))[_0x5c39de(0x2a3)];if(!_0x2ca2e8||!_0x358a11||!_0x35532f){showNotification('All\x20fields\x20are\x20required',_0x5c39de(0x1f7));return;}const _0x3c6137=auth['currentUser'];if(!_0x3c6137){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x5eb87c={'name':_0x2ca2e8,'description':_0x358a11,'image':_0x35532f,'rarity':_0x376f4c,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x3c6137['email']};!_0x54983f?(_0x5eb87c[_0x5c39de(0x25e)]=serverTimestamp(),_0x5eb87c['createdBy']=_0x3c6137['email'],await addDoc(collection(db,_0x5c39de(0x1d5)),_0x5eb87c),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x54983f),_0x5eb87c),showNotification('Trophy\x20updated\x20successfully',_0x5c39de(0x27b))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x4d46c5){console['error'](_0x5c39de(0x365),_0x4d46c5),showNotification(_0x5c39de(0x240)+_0x4d46c5['message'],'error');}}function closeTrophyModal(){const _0x2957fc=a4_0x5dc55c,_0x3a890c=document['getElementById']('trophy-modal');_0x3a890c&&_0x3a890c['classList']['remove'](_0x2957fc(0x260));}async function confirmDeleteTrophy(_0x30a110){const _0x3fe5bf=a4_0x5dc55c;if(!_0x30a110){console['error'](_0x3fe5bf(0x1a5));return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x149d32=auth['currentUser'];if(!_0x149d32){showNotification(_0x3fe5bf(0x1b6),'error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x30a110),await deleteDoc(doc(db,'trophyDefinitions',_0x30a110)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x2291d5){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x2291d5),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x2291d5['message'],'error');}}async function openAssignTrophyModal(_0x38f5f0){const _0x547422=a4_0x5dc55c;try{const _0x4f36dc=doc(db,'trophyDefinitions',_0x38f5f0),_0x5473aa=await getDoc(_0x4f36dc);if(!_0x5473aa['exists']()){showNotification(_0x547422(0x2cf),_0x547422(0x1f7));return;}const _0xd3e0e0=_0x5473aa[_0x547422(0x1ec)]();document['getElementById']('assign-trophy-id')['value']=_0x38f5f0,document['getElementById']('assign-trophy-name')['value']=_0xd3e0e0[_0x547422(0x200)],document['getElementById']('assign-trophy-image')['src']=_0xd3e0e0[_0x547422(0x2d2)]||DEFAULT_TROPHY_IMAGE,document[_0x547422(0x2a0)](_0x547422(0x26a))[_0x547422(0x23c)]=_0xd3e0e0['name']||_0x547422(0x16d),document['getElementById']('assign-trophy-description')[_0x547422(0x23c)]=_0xd3e0e0['description']||'No\x20description';const _0x58753b=document['getElementById']('assign-trophy-rarity');_0x58753b[_0x547422(0x23c)]=_0xd3e0e0[_0x547422(0x1f0)]||'common',_0x58753b['className']='trophy-rarity\x20'+(_0xd3e0e0['rarity']||'common');const _0x51200f=document[_0x547422(0x2a0)]('assign-trophy-modal');_0x51200f['classList'][_0x547422(0x320)]('active');}catch(_0x489235){console['error'](_0x547422(0x26d),_0x489235),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x3c6c36=document['getElementById']('assign-trophy-modal');_0x3c6c36&&_0x3c6c36['classList']['remove']('active');}async function assignTrophyToPlayer(){const _0x433b26=a4_0x5dc55c;try{const _0x4efba0=document['getElementById'](_0x433b26(0x345))[_0x433b26(0x2a3)],_0x2d3a83=document['getElementById'](_0x433b26(0x212))[_0x433b26(0x2a3)],_0x96b582=document[_0x433b26(0x2a0)]('assign-player-username')['value']['trim'](),_0x45e01b=document['querySelector'](_0x433b26(0x192))['value'];if(!_0x4efba0||!_0x96b582){showNotification(_0x433b26(0x299),_0x433b26(0x1f7));return;}const _0x13fdc1=auth['currentUser'];if(!_0x13fdc1){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x5757e1=null,_0x2445fd=null,_0x4c99ef=null;if(_0x45e01b===_0x433b26(0x29e)){const _0x4f7efd=collection(db,'nonParticipants'),_0x40d2aa=query(_0x4f7efd,where('username','==',_0x96b582)),_0x2b2c8c=await getDocs(_0x40d2aa);!_0x2b2c8c[_0x433b26(0x2e5)]&&(_0x5757e1=_0x2b2c8c['docs'][0x0],_0x2445fd=_0x5757e1['id'],_0x4c99ef=_0x5757e1['data']());}else{const _0x401504=_0x45e01b==='D1'?'players':_0x45e01b==='D2'?'playersD2':_0x433b26(0x2e2),_0x4286f7=collection(db,_0x401504),_0x1f1aae=query(_0x4286f7,where('username','==',_0x96b582)),_0x1425dc=await getDocs(_0x1f1aae);!_0x1425dc['empty']&&(_0x5757e1=_0x1425dc[_0x433b26(0x15c)][0x0],_0x2445fd=_0x5757e1['id'],_0x4c99ef=_0x5757e1[_0x433b26(0x1ec)]());}if(!_0x5757e1){showNotification('Player\x20\x22'+_0x96b582+'\x22\x20not\x20found\x20in\x20'+(_0x45e01b==='non-participant'?'non-participants':_0x45e01b+_0x433b26(0x2c1)),'error');return;}const _0x5c1bbf=collection(db,'userTrophies'),_0x288fdb=query(_0x5c1bbf,where('userId','==',_0x2445fd),where('trophyId','==',_0x4efba0)),_0x506186=await getDocs(_0x288fdb);if(!_0x506186['empty']){showNotification(_0x433b26(0x2b2)+_0x96b582+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x2445fd,'playerUsername':_0x96b582,'trophyId':_0x4efba0,'awardedAt':serverTimestamp(),'awardedBy':_0x13fdc1[_0x433b26(0x357)],'ladder':_0x45e01b}),showNotification('Trophy\x20\x22'+_0x2d3a83+'\x22\x20awarded\x20to\x20'+_0x96b582,'success'),closeAssignTrophyModal();}catch(_0x452b0e){console['error']('Error\x20assigning\x20trophy:',_0x452b0e),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x452b0e['message'],_0x433b26(0x1f7));}}function setupInactivePlayersSection(){const _0x5340da=a4_0x5dc55c,_0x39c131=document['getElementById'](_0x5340da(0x27a));_0x39c131&&_0x39c131['addEventListener'](_0x5340da(0x2cc),function(){const _0x366462=_0x5340da,_0x1c0bb9=document[_0x366462(0x2a0)]('load-inactive-players-data');if(_0x1c0bb9)_0x1c0bb9[_0x366462(0x1a0)]();});const _0x129950=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x298ff3=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x129950&&_0x298ff3&&(_0x129950['addEventListener']('change',function(){const _0x45dca3=_0x5340da;if(this['checked']){currentLadder='D1';if(document[_0x45dca3(0x2a0)]('inactive-players')[_0x45dca3(0x231)][_0x45dca3(0x224)]!=='none'){const _0x42cc9b=document['getElementById']('load-inactive-players-data');if(_0x42cc9b)_0x42cc9b['click']();}}}),_0x298ff3['addEventListener']('change',function(){const _0x9ab35b=_0x5340da;if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')['style']['display']!==_0x9ab35b(0x141)){const _0x2a4885=document['getElementById'](_0x9ab35b(0x1dc));if(_0x2a4885)_0x2a4885['click']();}}}));const _0x58c1e5=document['getElementById']('inactive-players-search');_0x58c1e5&&_0x58c1e5['addEventListener']('input',debounce(function(){const _0x4f991f=_0x5340da,_0x55893f=_0x58c1e5['value'][_0x4f991f(0x151)](),_0x39d1d1=document[_0x4f991f(0x32a)](_0x4f991f(0x364));_0x39d1d1['forEach'](_0x5dbd59=>{const _0x91a77d=_0x4f991f;if(_0x5dbd59[_0x91a77d(0x278)]('.loading-cell')||_0x5dbd59['querySelector']('.empty-state')||_0x5dbd59['querySelector']('.error-state'))return;const _0x41f902=_0x5dbd59[_0x91a77d(0x1ef)][0x0]?.['textContent'][_0x91a77d(0x151)]()||'',_0x494c99=_0x5dbd59['cells'][0x5]?.['textContent'][_0x91a77d(0x151)]()||'';_0x41f902[_0x91a77d(0x146)](_0x55893f)||_0x494c99['includes'](_0x55893f)?_0x5dbd59['style'][_0x91a77d(0x224)]='':_0x5dbd59['style']['display']=_0x91a77d(0x141);});},0x12c)),document['addEventListener']('click',function(_0x246067){const _0x4555b2=_0x5340da;if(_0x246067['target']['closest']('.view-player-btn')){const _0xb44d42=_0x246067['target'][_0x4555b2(0x285)](_0x4555b2(0x1c4)),_0x62fe36=_0xb44d42['dataset']['username'];_0x62fe36&&alert('View\x20player\x20details\x20for\x20'+_0x62fe36+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x1fe308=a4_0x5dc55c,_0xc3a618=document[_0x1fe308(0x2a0)](_0x1fe308(0x21e));if(!_0xc3a618)return;_0xc3a618[_0x1fe308(0x245)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x79fafb=document['getElementById']('inactive-days-filter'),_0x13142c=_0x79fafb?parseInt(_0x79fafb[_0x1fe308(0x2a3)])||0x0:0x0,_0x3ed1d8=collection(db,currentLadder==='D1'?_0x1fe308(0x1cd):'playersD2'),_0x3c3e79=await getDocs(_0x3ed1d8);if(_0x3c3e79[_0x1fe308(0x2e5)]){_0xc3a618['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x366399=[];_0x3c3e79[_0x1fe308(0x12e)](_0x5c4842=>{const _0xaec789=_0x1fe308,_0x572327=_0x5c4842[_0xaec789(0x1ec)]();_0x366399['push']({..._0x572327,'id':_0x5c4842['id'],'username':_0x572327[_0xaec789(0x2c0)]||_0xaec789(0x2a6)});}),console['log'](_0x1fe308(0x2ec)+_0x366399[_0x1fe308(0x1be)]+_0x1fe308(0x302)+currentLadder+'\x20ladder');const _0x588ce4=currentLadder==='D1'?_0x1fe308(0x25d):_0x1fe308(0x128),_0x3a037f=_0x366399[_0x1fe308(0x1a2)](async _0x153b73=>{const _0xa25fd0=_0x1fe308;try{const _0x36be91=collection(db,_0x588ce4),_0x559fcd=query(_0x36be91,or(where('winnerUsername','==',_0x153b73[_0xa25fd0(0x2c0)]),where('loserUsername','==',_0x153b73['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0xe1cfd9=await getDocs(_0x559fcd);if(!_0xe1cfd9[_0xa25fd0(0x2e5)]){const _0x584c06=_0xe1cfd9['docs'][0x0]['data'](),_0x3252f6=_0x584c06['approvedAt']?new Date(_0x584c06[_0xa25fd0(0x14b)][_0xa25fd0(0x267)]*0x3e8):null,_0x4d12df=new Date(),_0x2339a3=_0x3252f6?Math['floor']((_0x4d12df-_0x3252f6)/(0x3e8*0x3c*0x3c*0x18)):null,_0x5357c=_0x584c06['winnerUsername']===_0x153b73['username']?_0x584c06[_0xa25fd0(0x348)]:_0x584c06['winnerUsername'],_0x42ba51=_0x584c06['winnerUsername']===_0x153b73['username']?'Won':_0xa25fd0(0x1ac);return{..._0x153b73,'lastMatch':{'date':_0x3252f6?_0x3252f6['toLocaleDateString']():_0xa25fd0(0x35f),'opponent':_0x5357c||'Unknown','result':_0x42ba51,'timestamp':_0x3252f6||new Date(0x0),'daysSinceMatch':_0x2339a3||Number[_0xa25fd0(0x277)]}};}else return{..._0x153b73,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x61d3a6){return console['error'](_0xa25fd0(0x1e3)+_0x153b73[_0xa25fd0(0x2c0)]+':',_0x61d3a6),{..._0x153b73,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x1c9c80=await Promise['all'](_0x3a037f);_0x1c9c80['sort']((_0x3ff51a,_0x8cf80e)=>_0x8cf80e['lastMatch'][_0x1fe308(0x342)]-_0x3ff51a[_0x1fe308(0x2f4)]['daysSinceMatch']);_0x13142c>0x0&&(_0x1c9c80=_0x1c9c80[_0x1fe308(0x366)](_0x377d4d=>_0x377d4d['lastMatch']['daysSinceMatch']>=_0x13142c));_0xc3a618['innerHTML']='';if(_0x1c9c80[_0x1fe308(0x1be)]===0x0){_0xc3a618[_0x1fe308(0x245)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x1c9c80[_0x1fe308(0x12e)](_0x393ca1=>{const _0x36e294=_0x1fe308,_0x58454b=document[_0x36e294(0x280)]('tr'),_0x4f72a5=_0x393ca1['lastMatch'][_0x36e294(0x342)]>0x1e?'highly-inactive':_0x393ca1[_0x36e294(0x2f4)]['daysSinceMatch']>0xe?'moderately-inactive':'';_0x58454b['className']=_0x4f72a5,_0x58454b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x393ca1[_0x36e294(0x2c0)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x393ca1['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x393ca1['lastMatch'][_0x36e294(0x32b)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x393ca1['lastMatch'][_0x36e294(0x342)]===Number['MAX_SAFE_INTEGER']?'N/A':_0x393ca1['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x393ca1[_0x36e294(0x2f4)]['date']===_0x36e294(0x168)?'No\x20matches\x20found':_0x393ca1['lastMatch'][_0x36e294(0x2fb)]+'\x20vs\x20'+_0x393ca1['lastMatch'][_0x36e294(0x313)])+_0x36e294(0x2db)+_0x393ca1['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xc3a618['appendChild'](_0x58454b);}),console[_0x1fe308(0x26e)](_0x1fe308(0x34d)+_0x1c9c80['length']+_0x1fe308(0x317));}catch(_0xbded1a){console[_0x1fe308(0x1f7)]('Error\x20loading\x20inactive\x20players:',_0xbded1a),_0xc3a618['innerHTML']=_0x1fe308(0x22f)+_0xbded1a['message']+_0x1fe308(0x1a3);}}function setupHighlightButtons(){const _0x55d09c=a4_0x5dc55c;console[_0x55d09c(0x26e)]('Setting\x20up\x20highlight\x20buttons');const _0x5656dd=document[_0x55d09c(0x2a0)]('create-match-highlight-btn');_0x5656dd&&_0x5656dd['addEventListener']('click',function(){const _0x1a0256=_0x55d09c;console['log'](_0x1a0256(0x152)),openHighlightModal('match');});const _0x3f29f1=document['getElementById'](_0x55d09c(0x17d));_0x3f29f1&&_0x3f29f1['addEventListener']('click',function(){const _0x332f18=_0x55d09c;console[_0x332f18(0x26e)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal(_0x332f18(0x263));});const _0x4abe7e=document['getElementById'](_0x55d09c(0x205));_0x4abe7e&&_0x4abe7e['addEventListener']('click',function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x14bff0='match'){const _0xb3dbd2=a4_0x5dc55c;console[_0xb3dbd2(0x26e)]('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x14bff0);const _0x4dbdf4=document['getElementById']('highlight-modal'),_0x5c8c1a=document['getElementById'](_0xb3dbd2(0x1ab)),_0x3f9f73=document[_0xb3dbd2(0x2a0)](_0xb3dbd2(0x2b9)),_0x3267b6=document['getElementById'](_0xb3dbd2(0x203));if(!_0x4dbdf4||!_0x5c8c1a||!_0x3f9f73){console['error'](_0xb3dbd2(0x210));return;}_0x5c8c1a['reset'](),_0x3267b6[_0xb3dbd2(0x2a3)]='';const _0x22e26d=['match','creator','achievement'],_0x40c3ad=!_0x22e26d['includes'](_0x14bff0);if(_0x40c3ad){const _0x28672d=_0x14bff0;_0x3267b6['value']=_0x28672d,_0x3f9f73[_0xb3dbd2(0x23c)]='Loading...',loadHighlightDataAdmin(_0x28672d);}else{const _0x213ce9=_0x14bff0;document['getElementById']('highlight-type')['value']=_0x213ce9,_0x3f9f73['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x213ce9),toggleHighlightFields(_0x213ce9);const _0x22a396=auth['currentUser'];_0x22a396&&document['getElementById'](_0xb3dbd2(0x33c))&&(document['getElementById'](_0xb3dbd2(0x33c))[_0xb3dbd2(0x2a3)]=_0x22a396['displayName']||_0x22a396['email']);}_0x4dbdf4['classList'][_0xb3dbd2(0x320)]('active');}function toggleHighlightFields(_0x4ed247){const _0x5341bb=a4_0x5dc55c;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x4ed247);const _0x2ed856=document['getElementById']('highlight-form');if(!_0x2ed856)return;const _0x87b2ce=_0x2ed856['querySelectorAll']('.form-group,\x20.form-row');_0x87b2ce['forEach'](_0x52b83a=>_0x52b83a[_0x5341bb(0x231)]['display']='none');const _0x577c0f=document['getElementById']('highlight-video-preview-container');if(_0x577c0f)_0x577c0f[_0x5341bb(0x231)]['display']='none';const _0x22a16d=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x22a16d['forEach'](_0x31b752=>{const _0x5b0466=_0x5341bb,_0x324568=document[_0x5b0466(0x2a0)](_0x31b752);if(_0x324568)_0x324568[_0x5b0466(0x231)]['display']='block';});if(_0x4ed247===_0x5341bb(0x2b5)){const _0x2d43c6=['highlight-video-container',_0x5341bb(0x343),'highlight-map-container','highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x2d43c6['forEach'](_0x2f6b3d=>{const _0x5b28b0=_0x5341bb,_0xbf361d=document['getElementById'](_0x2f6b3d);_0xbf361d&&(_0x2f6b3d==='highlight-players-container'?_0xbf361d['style'][_0x5b28b0(0x224)]=_0x5b28b0(0x31f):_0xbf361d[_0x5b28b0(0x231)]['display']='block');});const _0x278067=document['getElementById']('highlight-video-id');if(_0x278067){_0x278067['required']=!![];const _0x4045c8=_0x278067['previousElementSibling'];if(_0x4045c8)_0x4045c8['innerHTML']=_0x5341bb(0x344);}if(_0x577c0f)_0x577c0f['style'][_0x5341bb(0x224)]='block';updateHighlightVideoPreview();}else{if(_0x4ed247==='creator'){const _0x5e0920=[_0x5341bb(0x232),'highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x5e0920['forEach'](_0xd5c143=>{const _0x280739=_0x5341bb,_0x251ad4=document['getElementById'](_0xd5c143);if(_0x251ad4)_0x251ad4[_0x280739(0x231)]['display']=_0x280739(0x29d);});const _0x468dc4=document['getElementById']('highlight-video-id');if(_0x468dc4){_0x468dc4[_0x5341bb(0x31a)]=![];const _0x3ceee8=_0x468dc4['previousElementSibling'];if(_0x3ceee8)_0x3ceee8[_0x5341bb(0x245)]=_0x5341bb(0x198);}}else{if(_0x4ed247==='achievement'){const _0xa65a27=['highlight-achievement-player-container','highlight-achievement-type-container',_0x5341bb(0x193),_0x5341bb(0x34a),'highlight-achievement-image-container','highlight-video-container'];_0xa65a27[_0x5341bb(0x12e)](_0x256854=>{const _0x2be88b=document['getElementById'](_0x256854);if(_0x2be88b)_0x2be88b['style']['display']='block';});const _0x4ce44a=document['getElementById'](_0x5341bb(0x252));if(_0x4ce44a){_0x4ce44a['required']=![];const _0x58f77b=_0x4ce44a['previousElementSibling'];if(_0x58f77b)_0x58f77b['innerHTML']=_0x5341bb(0x198);}}}}}async function loadHighlightDataAdmin(_0x48da2d){const _0x1dab6f=a4_0x5dc55c;try{const _0x12e9f0=doc(db,'highlights',_0x48da2d),_0x220163=await getDoc(_0x12e9f0);if(!_0x220163['exists']()){showNotification('Highlight\x20not\x20found',_0x1dab6f(0x1f7));return;}const _0x598df9=_0x220163['data'](),_0x387dad=_0x598df9[_0x1dab6f(0x2c9)]||'match';document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x387dad),document[_0x1dab6f(0x2a0)](_0x1dab6f(0x2e6))['value']=_0x387dad,toggleHighlightFields(_0x387dad),document['getElementById'](_0x1dab6f(0x2f0))[_0x1dab6f(0x2a3)]=_0x598df9['title']||'',document['getElementById'](_0x1dab6f(0x178))['value']=_0x598df9['description']||'',document['getElementById'](_0x1dab6f(0x33c))[_0x1dab6f(0x2a3)]=_0x598df9['submittedBy']||'';_0x598df9['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x598df9[_0x1dab6f(0x30e)],updateHighlightVideoPreview());if(_0x387dad==='match'){document['getElementById']('highlight-match-info')['value']=_0x598df9['matchInfo']||'',document['getElementById'](_0x1dab6f(0x1ae))['value']=_0x598df9[_0x1dab6f(0x1a2)]||'';if(_0x598df9['matchDate']){const _0x461eb7=new Date(_0x598df9['matchDate'][_0x1dab6f(0x267)]*0x3e8);document['getElementById'](_0x1dab6f(0x25c))['value']=_0x461eb7['toISOString']()[_0x1dab6f(0x18f)]('T')[0x0];}document['getElementById']('highlight-winner-name')[_0x1dab6f(0x2a3)]=_0x598df9[_0x1dab6f(0x219)]||'',document['getElementById']('highlight-winner-score')['value']=_0x598df9['winnerScore']||'',document['getElementById'](_0x1dab6f(0x32f))['value']=_0x598df9['loserName']||'',document['getElementById'](_0x1dab6f(0x2aa))[_0x1dab6f(0x2a3)]=_0x598df9[_0x1dab6f(0x2c8)]||'',document['getElementById'](_0x1dab6f(0x2ed))['value']=_0x598df9['matchLink']||'';}else{if(_0x387dad===_0x1dab6f(0x263))document['getElementById']('highlight-map')[_0x1dab6f(0x2a3)]=_0x598df9['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x598df9['mapCreator']||'',document['getElementById'](_0x1dab6f(0x1b4))['value']=_0x598df9[_0x1dab6f(0x187)]||'',document[_0x1dab6f(0x2a0)](_0x1dab6f(0x2c6))['value']=_0x598df9['creatorImageUrl']||'';else _0x387dad===_0x1dab6f(0x23f)&&(document['getElementById'](_0x1dab6f(0x2f8))['value']=_0x598df9['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x598df9[_0x1dab6f(0x362)]||'',document['getElementById'](_0x1dab6f(0x2c7))['value']=_0x598df9['achievementDetails']||'',document['getElementById'](_0x1dab6f(0x2ef))['value']=_0x598df9['playerProfileUrl']||'',document[_0x1dab6f(0x2a0)]('highlight-achievement-image')['value']=_0x598df9[_0x1dab6f(0x155)]||'');}}catch(_0x266ca2){console['error']('Error\x20loading\x20highlight:',_0x266ca2),showNotification('Error\x20loading\x20highlight:\x20'+_0x266ca2[_0x1dab6f(0x33b)],'error');}}async function saveHighlight(){const _0xcde109=a4_0x5dc55c;try{const _0x367aec=document['getElementById']('highlight-id')?.['value']||'',_0x14eb71=document['getElementById'](_0xcde109(0x2e6))?.['value']||'match',_0x516258={'title':document['getElementById']('highlight-title')?.['value']?.['trim']()||'','description':document[_0xcde109(0x2a0)]('highlight-description')?.[_0xcde109(0x2a3)]?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.[_0xcde109(0x1d7)]()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x14eb71};if(!_0x516258['title']){showNotification('Title\x20is\x20required',_0xcde109(0x1f7));return;}if(_0x14eb71===_0xcde109(0x2b5)){_0x516258['matchInfo']=document['getElementById']('highlight-match-info')?.['value']?.['trim']()||'',_0x516258['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'';const _0x29e2ec=document[_0xcde109(0x2a0)]('highlight-match-date'),_0x2c96e6=_0x29e2ec?.['value']||'';_0x516258['matchDate']=_0x2c96e6?Timestamp['fromDate'](new Date(_0x2c96e6)):null,_0x516258['winnerName']=document['getElementById']('highlight-winner-name')?.[_0xcde109(0x2a3)]?.['trim']()||'',_0x516258[_0xcde109(0x147)]=document[_0xcde109(0x2a0)]('highlight-winner-score')?.[_0xcde109(0x2a3)]?.[_0xcde109(0x1d7)]()||'',_0x516258['loserName']=document[_0xcde109(0x2a0)]('highlight-loser-name')?.[_0xcde109(0x2a3)]?.['trim']()||'',_0x516258['loserScore']=document['getElementById']('highlight-loser-score')?.['value']?.['trim']()||'',_0x516258['matchLink']=document[_0xcde109(0x2a0)]('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x516258['videoId']){showNotification(_0xcde109(0x1b2),'error');return;}}else{if(_0x14eb71==='creator'){_0x516258['map']=document['getElementById'](_0xcde109(0x1ae))?.[_0xcde109(0x2a3)]?.[_0xcde109(0x1d7)]()||'',_0x516258['mapCreator']=document[_0xcde109(0x2a0)]('highlight-map-creator')?.['value']?.['trim']()||'',_0x516258[_0xcde109(0x187)]=document[_0xcde109(0x2a0)]('highlight-map-version')?.[_0xcde109(0x2a3)]?.[_0xcde109(0x1d7)]()||'',_0x516258[_0xcde109(0x36c)]=document['getElementById']('highlight-creator-image')?.['value']?.[_0xcde109(0x1d7)]()||'';if(!_0x516258['mapCreator']){showNotification('Map\x20Creator\x20is\x20required',_0xcde109(0x1f7));return;}}else{if(_0x14eb71==='achievement'){_0x516258['achievementPlayer']=document[_0xcde109(0x2a0)]('highlight-achievement-player')?.['value']?.[_0xcde109(0x1d7)]()||'',_0x516258['achievementType']=document[_0xcde109(0x2a0)](_0xcde109(0x14e))?.['value']?.[_0xcde109(0x1d7)]()||'',_0x516258['achievementDetails']=document[_0xcde109(0x2a0)]('highlight-achievement-details')?.['value']?.['trim']()||'',_0x516258['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.[_0xcde109(0x1d7)]()||'',_0x516258['achievementImageUrl']=document['getElementById'](_0xcde109(0x2a9))?.['value']?.[_0xcde109(0x1d7)]()||'';if(!_0x516258['achievementPlayer']){showNotification(_0xcde109(0x127),'error');return;}}}}_0x367aec?(_0x516258[_0xcde109(0x194)]=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x367aec),_0x516258),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x516258['createdAt']=serverTimestamp(),await addDoc(collection(db,_0xcde109(0x2f9)),_0x516258),showNotification('Highlight\x20created\x20successfully!',_0xcde109(0x27b))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0xc9a974){console['error'](_0xcde109(0x338),_0xc9a974),showNotification('Error\x20saving\x20highlight:\x20'+_0xc9a974[_0xcde109(0x33b)],'error');}}function closeHighlightModal(){const _0x50f8b3=document['getElementById']('highlight-modal');if(_0x50f8b3)_0x50f8b3['classList']['remove']('active');}function getHighlightTypeName(_0x3f42ec){const _0x521533=a4_0x5dc55c;switch(_0x3f42ec){case _0x521533(0x2b5):return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return _0x521533(0x184);}}function updateHighlightVideoPreview(){const _0x2cda81=a4_0x5dc55c,_0x365809=document['getElementById'](_0x2cda81(0x252)),_0x408ce5=document['getElementById'](_0x2cda81(0x13d)),_0x4fc701=document[_0x2cda81(0x2a0)](_0x2cda81(0x239));if(!_0x365809||!_0x4fc701||!_0x408ce5)return;const _0x48d7b8=_0x365809[_0x2cda81(0x2a3)]['trim']();_0x48d7b8&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x48d7b8)?(_0x4fc701[_0x2cda81(0x2f3)]='https://www.youtube.com/embed/'+_0x48d7b8,_0x408ce5['style'][_0x2cda81(0x224)]=_0x2cda81(0x29d)):(_0x4fc701[_0x2cda81(0x2f3)]='',_0x408ce5['style'][_0x2cda81(0x224)]='none');}async function loadHighlightsAdmin(){const _0x5db479=a4_0x5dc55c,_0x124758=document['getElementById']('highlights-table-body');if(!_0x124758)return;_0x124758['innerHTML']=_0x5db479(0x1da);try{const _0x2ca5d8=query(collection(db,'highlights'),orderBy(_0x5db479(0x25e),_0x5db479(0x11f))),_0x620261=await getDocs(_0x2ca5d8);if(_0x620261[_0x5db479(0x2e5)]){_0x124758[_0x5db479(0x245)]=_0x5db479(0x356);return;}_0x124758[_0x5db479(0x245)]='',_0x620261[_0x5db479(0x12e)](_0x49eb6d=>{const _0x53042c=_0x5db479,_0x3eaa7b=_0x49eb6d[_0x53042c(0x1ec)](),_0x2d7feb=document['createElement']('tr'),_0x476bad=_0x3eaa7b[_0x53042c(0x25e)]?new Date(_0x3eaa7b['createdAt'][_0x53042c(0x267)]*0x3e8)['toLocaleDateString']():_0x53042c(0x35f);let _0x388a31='Unknown',_0x222418='';switch(_0x3eaa7b['type']){case _0x53042c(0x2b5):_0x388a31='Match',_0x222418='match-type';break;case'creator':_0x388a31=_0x53042c(0x2bd),_0x222418='creator-type';break;case'achievement':_0x388a31='Achievement',_0x222418='achievement-type';break;}_0x2d7feb['innerHTML']=_0x53042c(0x173)+(_0x3eaa7b['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x222418+'\x22>'+_0x388a31+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x476bad+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3eaa7b['submittedBy']||'Unknown')+_0x53042c(0x1fa)+(_0x3eaa7b[_0x53042c(0x30e)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x49eb6d['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x49eb6d['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x124758['appendChild'](_0x2d7feb);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x2adbad=>{_0x2adbad['addEventListener']('click',_0x30ed11=>{openHighlightModal(_0x30ed11['currentTarget']['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x35072c=>{_0x35072c['addEventListener']('click',_0x481b99=>{confirmDeleteHighlight(_0x481b99['currentTarget']['dataset']['id']);});});}catch(_0x2b04fd){console[_0x5db479(0x1f7)](_0x5db479(0x14c),_0x2b04fd),_0x124758['innerHTML']=_0x5db479(0x121)+_0x2b04fd['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x761a87){const _0x28c46f=a4_0x5dc55c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x761a87)),showNotification('Highlight\x20deleted\x20successfully',_0x28c46f(0x27b)),loadHighlightsAdmin();}catch(_0x5ccace){console[_0x28c46f(0x1f7)](_0x28c46f(0x36b),_0x5ccace),showNotification(_0x28c46f(0x318)+_0x5ccace['message'],'error');}}function setupCreateTestMatchModal(){const _0x55dbeb=a4_0x5dc55c;console[_0x55dbeb(0x26e)]('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x1bf63c=document[_0x55dbeb(0x2a0)]('create-test-match-modal'),_0x3ae8b5=document['getElementById'](_0x55dbeb(0x2d7));if(!_0x1bf63c){console[_0x55dbeb(0x1f7)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x3ae8b5){console[_0x55dbeb(0x1f7)]('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x5962b1=_0x1bf63c['cloneNode'](!![]);_0x1bf63c['parentNode']['replaceChild'](_0x5962b1,_0x1bf63c);const _0x16be27=_0x5962b1['querySelector']('#create-test-match-form');_0x5962b1['addEventListener']('click',function(_0x5e2747){_0x5e2747['target']===_0x5962b1&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x35f5b6=_0x5962b1['querySelector'](_0x55dbeb(0x2bc));_0x35f5b6&&_0x35f5b6['addEventListener']('click',function(_0x1646df){_0x1646df['preventDefault'](),_0x1646df['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x523e2a=_0x5962b1['querySelector']('#cancel-create-test-match-btn');_0x523e2a&&_0x523e2a[_0x55dbeb(0x2f7)]('click',function(_0x22a36c){const _0x29bf92=_0x55dbeb;_0x22a36c['preventDefault'](),_0x22a36c[_0x29bf92(0x2a2)](),console[_0x29bf92(0x26e)]('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x16be27){_0x16be27['addEventListener']('submit',function(_0x15029c){const _0x561488=_0x55dbeb;_0x15029c[_0x561488(0x2b0)](),_0x15029c[_0x561488(0x2a2)](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x5e66db=_0x16be27['querySelector']('button[type=\x22submit\x22]');_0x5e66db&&_0x5e66db['addEventListener']('click',function(_0x3761ae){const _0x267d52=_0x55dbeb;_0x3761ae['preventDefault'](),_0x3761ae['stopPropagation'](),console[_0x267d52(0x26e)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x55dbeb(0x26e)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x5e9e02=a4_0x5dc55c;console[_0x5e9e02(0x26e)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0xf3f41e=document[_0x5e9e02(0x2a0)]('highlight-form');_0xf3f41e&&_0xf3f41e['addEventListener']('submit',_0x95773a=>{_0x95773a['preventDefault'](),saveHighlight();});const _0x8235ba=document['getElementById']('cancel-highlight-btn');_0x8235ba&&_0x8235ba['addEventListener']('click',closeHighlightModal);const _0x32fc52=document['querySelector']('#highlight-modal\x20.close-btn');_0x32fc52&&_0x32fc52[_0x5e9e02(0x2f7)](_0x5e9e02(0x1a0),closeHighlightModal);const _0x471994=document['getElementById']('highlight-modal');_0x471994&&_0x471994[_0x5e9e02(0x2f7)]('click',_0x55cf2f=>{_0x55cf2f['target']===_0x471994&&closeHighlightModal();});const _0x5903f1=document['getElementById']('highlight-video-id');_0x5903f1&&_0x5903f1['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log'](_0x5e9e02(0x154));}function setupManageMatchesSection(){const _0x457fea=a4_0x5dc55c;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x231899=document['getElementById']('matches-prev-page'),_0x2b932c=document['getElementById']('matches-next-page');_0x231899&&_0x231899['addEventListener'](_0x457fea(0x1a0),()=>{const _0x3f1555=_0x457fea,_0xf1ff3=currentLadder[_0x3f1555(0x151)]();loadMatchesData(matchesPagination[_0xf1ff3]['page']-0x1);});_0x2b932c&&_0x2b932c['addEventListener']('click',()=>{const _0x2258fc=_0x457fea,_0xc1eca1=currentLadder[_0x2258fc(0x151)]();loadMatchesData(matchesPagination[_0xc1eca1]['page']+0x1);});const _0x19efa8=document['getElementById']('apply-matches-filters'),_0x3f8f=document['getElementById']('reset-matches-filters');_0x19efa8&&_0x19efa8[_0x457fea(0x2f7)]('click',applyMatchesFilters);_0x3f8f&&_0x3f8f['addEventListener']('click',resetMatchesFilters);const _0x433ae2=document['getElementById'](_0x457fea(0x2f1));_0x433ae2&&_0x433ae2[_0x457fea(0x2f7)]('input',debounce(filterMatchesTable,0x12c));const _0x388a43=document['getElementById']('resimulate-match-btn');_0x388a43&&_0x388a43['addEventListener']('click',openResimulateModal);const _0x2c9587=document[_0x457fea(0x2a0)](_0x457fea(0x16a));if(_0x2c9587){const _0x22b92c=_0x2c9587[_0x457fea(0x278)](_0x457fea(0x340));_0x22b92c&&_0x22b92c['addEventListener']('click',closeResimulateModal),_0x2c9587[_0x457fea(0x2f7)]('click',_0x19137f=>{_0x19137f['target']===_0x2c9587&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x3ea3d9=a4_0x5dc55c;console[_0x3ea3d9(0x26e)]('Opening\x20create\x20test\x20match\x20modal');const _0x4989c9=document['getElementById']('create-test-match-modal'),_0x20a05a=document['getElementById'](_0x3ea3d9(0x2d7));if(!_0x4989c9){console['error'](_0x3ea3d9(0x2fd)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x20a05a){console['error'](_0x3ea3d9(0x21b)),showNotification(_0x3ea3d9(0x21b),_0x3ea3d9(0x1f7));return;}_0x20a05a[_0x3ea3d9(0x32d)]();const _0x11ef30=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x520dce=![];_0x11ef30['forEach'](_0xe13887=>{const _0x3180a7=_0x3ea3d9;console['log']('Found\x20radio\x20with\x20value:',_0xe13887[_0x3180a7(0x2a3)]),_0xe13887[_0x3180a7(0x2a3)]===currentLadder&&(_0xe13887['checked']=!![],_0x520dce=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x520dce){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x3f2138=document['querySelector'](_0x3ea3d9(0x244));_0x3f2138&&(_0x3f2138[_0x3ea3d9(0x206)]=!![],console[_0x3ea3d9(0x26e)](_0x3ea3d9(0x153)));}const _0x314728=document['getElementById']('test-match-date');if(_0x314728){const _0x13d78d=new Date()['toISOString']()['split']('T')[0x0];_0x314728[_0x3ea3d9(0x2a3)]=_0x13d78d;}_0x4989c9['style']['display']=_0x3ea3d9(0x31f),_0x4989c9[_0x3ea3d9(0x231)]['visibility']='visible',_0x4989c9['style']['opacity']='1',_0x4989c9['classList'][_0x3ea3d9(0x320)]('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x12c0cb=document['getElementById']('test-match-winner-username');_0x12c0cb&&setTimeout(()=>{const _0x43691f=_0x3ea3d9;_0x12c0cb[_0x43691f(0x17e)]();},0x64);}function closeCreateTestMatchModal(){const _0x4756c3=a4_0x5dc55c;console[_0x4756c3(0x26e)]('Closing\x20create\x20test\x20match\x20modal');const _0x286caa=document['getElementById'](_0x4756c3(0x197));if(!_0x286caa){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x286caa['classList']['remove']('active'),_0x286caa['style']['opacity']='0',_0x286caa['style']['visibility']=_0x4756c3(0x15e),setTimeout(()=>{const _0xf99649=_0x4756c3;!_0x286caa['classList'][_0xf99649(0x2bf)](_0xf99649(0x260))&&(_0x286caa['style']['display']='none');},0x12c),console[_0x4756c3(0x26e)]('Modal\x20closed');}async function createTestMatch(){const _0xb0f6fb=a4_0x5dc55c;console[_0xb0f6fb(0x26e)]('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x295d66=auth['currentUser'];if(!_0x295d66){showNotification('You\x20must\x20be\x20logged\x20in',_0xb0f6fb(0x1f7));return;}const _0x2331e4='D1',_0x5e0873='approvedMatches',_0x13ddbf={'winnerUsername':_0xb0f6fb(0x1ff),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':_0xb0f6fb(0x2ab),'loserDemoLink':null,'mapPlayed':_0xb0f6fb(0x332),'approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x295d66['email'],'createdAt':serverTimestamp(),'createdBy':_0x295d66['email'],'isTestMatch':!![],'ladder':_0x2331e4,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0xb0f6fb(0x369)+_0x295d66[_0xb0f6fb(0x357)]};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x5e0873),_0x13ddbf),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x4caee9){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x4caee9),showNotification(_0xb0f6fb(0x28f)+_0x4caee9['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x4c1621=a4_0x5dc55c;try{console[_0x4c1621(0x26e)](_0x4c1621(0x237)),console['log'](_0x4c1621(0x2eb),auth),console['log'](_0x4c1621(0x159),db),console['log'](_0x4c1621(0x2b1),auth['currentUser']);const _0x2bd1ff=collection(db,'players');console['log'](_0x4c1621(0x367),_0x2bd1ff);const _0x5a7cd0=query(_0x2bd1ff,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x5a7cd0);const _0x2bb286=await getDocs(_0x5a7cd0);console['log']('Query\x20executed.\x20Empty:',_0x2bb286[_0x4c1621(0x2e5)]),console['log'](_0x4c1621(0x236));}catch(_0x498fbc){console[_0x4c1621(0x1f7)]('Firebase\x20connection\x20test\x20failed:',_0x498fbc);}};function setupCreateTestMatchButton(){const _0x5b0fef=a4_0x5dc55c,_0x3d9b80=document['getElementById']('create-test-match-btn');if(!_0x3d9b80){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0xbdac54=_0x3d9b80['cloneNode'](!![]);_0x3d9b80['parentNode']['replaceChild'](_0xbdac54,_0x3d9b80),_0xbdac54['addEventListener']('click',function(_0x5bc63a){_0x5bc63a['preventDefault'](),_0x5bc63a['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0x5b0fef(0x26e)]('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x30f4e1=0x1){const _0x21fda5=a4_0x5dc55c,_0x40e78b=document[_0x21fda5(0x2a0)]('matches-table-body');if(!_0x40e78b)return;_0x40e78b['innerHTML']=_0x21fda5(0x34c);try{const _0x1e5a8c=currentLadder['toLowerCase'](),_0x28e8b2=matchesPagination[_0x1e5a8c],_0x1da92d=currentLadder==='D1'?_0x21fda5(0x25d):currentLadder==='D2'?'approvedMatchesD2':_0x21fda5(0x2dc),_0x108f1a=collection(db,_0x1da92d);_0x30f4e1<=0x1?(_0x28e8b2['page']=0x1,_0x28e8b2[_0x21fda5(0x13a)]=null,_0x28e8b2['lastVisible']=null):_0x28e8b2['page']=_0x30f4e1;const _0x5ecfcc=getMatchesFilters();let _0xfcffea=_0x108f1a;if(_0x5ecfcc['startDate']||_0x5ecfcc['endDate']||_0x5ecfcc['searchTerm']){let _0x523d77=[];_0x5ecfcc['startDate']&&_0x5ecfcc[_0x21fda5(0x183)]?(_0x523d77[_0x21fda5(0x339)](where('approvedAt','>=',_0x5ecfcc['startDate']),where(_0x21fda5(0x14b),'<=',_0x5ecfcc[_0x21fda5(0x183)])),_0xfcffea=query(_0x108f1a,..._0x523d77)):_0xfcffea=query(_0x108f1a,orderBy('approvedAt','desc'));}else _0xfcffea=query(_0x108f1a,orderBy('approvedAt','desc'));_0x30f4e1>0x1&&_0x28e8b2['lastVisible']?_0xfcffea=query(_0xfcffea,startAfter(_0x28e8b2['lastVisible']),limit(PAGE_SIZE)):_0xfcffea=query(_0xfcffea,limit(PAGE_SIZE));const _0x2e0c38=await getDocs(_0xfcffea);!_0x2e0c38[_0x21fda5(0x2e5)]&&(_0x28e8b2['firstVisible']=_0x2e0c38[_0x21fda5(0x15c)][0x0],_0x28e8b2['lastVisible']=_0x2e0c38['docs'][_0x2e0c38['docs']['length']-0x1]);let _0x12a43d=![];if(!_0x2e0c38['empty']){const _0x3481bc=query(_0xfcffea,startAfter(_0x28e8b2['lastVisible']),limit(0x1)),_0x267d8d=await getDocs(_0x3481bc);_0x12a43d=!_0x267d8d[_0x21fda5(0x2e5)];}const _0x3af67d=document['getElementById']('matches-prev-page'),_0x37d45e=document[_0x21fda5(0x2a0)]('matches-next-page'),_0x4231c1=document['getElementById'](_0x21fda5(0x330));if(_0x3af67d)_0x3af67d['disabled']=_0x28e8b2['page']<=0x1;if(_0x37d45e)_0x37d45e['disabled']=!_0x12a43d;if(_0x4231c1)_0x4231c1[_0x21fda5(0x23c)]=_0x21fda5(0x120)+_0x28e8b2['page'];if(_0x2e0c38['empty']){_0x40e78b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x40e78b['innerHTML']='',_0x2e0c38['forEach'](_0x30e383=>{const _0x52a08e=_0x21fda5,_0x2bcda2=_0x30e383['data'](),_0x450368=document[_0x52a08e(0x280)]('tr'),_0x473505=_0x2bcda2[_0x52a08e(0x14b)]?new Date(_0x2bcda2[_0x52a08e(0x14b)]['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x450368[_0x52a08e(0x1b9)]('data-id',_0x30e383['id']),_0x450368['setAttribute']('data-ladder',currentLadder),_0x450368['classList'][_0x52a08e(0x320)](_0x52a08e(0x24c)),_0x450368['innerHTML']=_0x52a08e(0x173)+_0x473505+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x2bcda2['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x2bcda2['loserUsername']||_0x52a08e(0x1db))+_0x52a08e(0x283)+(_0x2bcda2[_0x52a08e(0x147)]||0x0)+'\x20-\x20'+(_0x2bcda2['loserScore']||0x0)+_0x52a08e(0x315)+(_0x2bcda2['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x52a08e(0x185)+_0x30e383['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x30e383['id']+_0x52a08e(0x287),_0x40e78b['appendChild'](_0x450368);}),setupMatchesActionButtons(),_0x5ecfcc['searchTerm']&&filterMatchesTable(),console[_0x21fda5(0x26e)]('Loaded\x20'+_0x2e0c38[_0x21fda5(0x1a9)]+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x28e8b2['page']);}catch(_0x1446f6){console[_0x21fda5(0x1f7)](_0x21fda5(0x1a1),_0x1446f6),_0x40e78b[_0x21fda5(0x245)]=_0x21fda5(0x14d)+_0x1446f6['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function a4_0x525b(){const _0x1cbffc=['<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','desc','Page\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','win','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','\x20points\x20history\x20entries','resimulation','Demoting\x20player\x20to\x20','Player\x20Name\x20is\x20required','approvedMatchesD2','Searching\x20for\x20player\x20in\x20','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','.section-header','matches-start-date','bar','forEach','edit-match-loser','edit-match-map','load-players-data','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','Failed\x20to\x20load\x20user\x20data:\x20','Modal\x20background\x20clicked','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-highlight-achievementDetails-input','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','\x20-\x20','position','firstVisible','Points\x20field\x20initialized\x20for\x20','\x20Rank\x20Distribution','highlight-video-preview-container','Failed\x20to\x20load\x20trophy\x20data','set-role-modal','login.html','none','#article-modal\x20.close-btn','trophy-modal','manage-ribbons','Error\x20loading\x20trophy\x20definitions:','includes','winnerScore','#players-table-body\x20tr','ladder','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','approvedAt','Error\x20loading\x20highlights:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','highlight-achievement-type','.remove-ribbon-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','toLowerCase','Match\x20highlight\x20button\x20clicked','Defaulted\x20to\x20D1\x20ladder','Manage\x20Highlights\x20section\x20initialized','achievementImageUrl','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','role-color','paste','DB:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','lastPointsModified','docs','winnerSuicides','hidden','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','article-content','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','.no-results','Successfully\x20demoted\x20','Load\x20inactive\x20players\x20data\x20clicked','Unknown\x20User','Never\x20played','Quick\x20edit\x20form\x20not\x20found!','resimulate-modal','backgroundColor','Unknown\x20Admin','Unnamed\x20Trophy','Please\x20enter\x20valid\x20data','cloneNode','manage-trophies','disabled','ribbons','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','No\x20email','destroy','visible','roleAssignedAt','highlight-description','Loading\x20user\x20data...','.assign-trophy-btn','Initial\x20Placement','Found\x20specific\x20role:\x20','create-creator-highlight-btn','focus','.remove-role-btn','timestamp','pending-count','elo','endDate','Highlight','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','trophy-id','mapVersion','Demotion','toString','negative-change','manage-players','Match\x20not\x20found','rejected-count','currentTarget','split','trophy-form','sources','input[name=\x22assign-ladder\x22]:checked','highlight-achievement-details-container','updatedAt','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','Could\x20not\x20find\x20player\x20documents','create-test-match-modal','YouTube\x20Video\x20ID\x20(Optional)','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','apply','Bronze','achievementDetails','exists','Error\x20loading\x20match\x20data:','Create\x20New\x20Trophy','click','Error\x20loading\x20matches:','map','</td></tr>','.view-history-btn','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','Load\x20trophies\x20data\x20clicked','info','size','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','highlight-form','Lost','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','highlight-map','matchId','pendingMatches','Please\x20enter\x20valid\x20username\x20and\x20ELO','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','edit-match-modal','highlight-map-version','no-results-message','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','ribbon-type-select','submit','setAttribute','Edit\x20Article','quick-edit-current-points','Error\x20loading\x20users:','add-player-form','length','Error\x20opening\x20edit\x20modal:','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','\x22\x20not\x20found\x20in\x20any\x20collection','Error\x20demoting\x20player:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','.view-player-btn','Role\x20removed','data-ladder','article-author','Error\x20setting\x20user\x20role:','mapPlayed','pointsHistory','points-management-forms','Error\x20loading\x20points\x20history:','players','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','manage-ranks','removeEventListener','Role\x20select\x20set\x20to:\x20','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','role-username',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','trophyDefinitions','userId','trim','matchDate','.delete-trophy-btn','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','Unknown','load-inactive-players-data','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','quick-edit-points-modal','history-type-filter','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','input[name=\x22set-elo-ladder\x22]:checked','Error\x20fetching\x20matches\x20for\x20','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','Unranked','Found\x20player\x20with\x20current\x20ELO:\x20','Silver','\x20before\x20match:\x20','Modal\x20element\x20found:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','edit-match-winner-demo','data','trophy-image-url','Please\x20enter\x20a\x20valid\x20username','cells','rarity','prototype','then','.edit-article-btn','search-ribbon-user-btn','trophy-rarity','quick-edit-user-id','error','Positions\x20updated:\x20Winner\x20','new-player-elo','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','resimulateMatch','.type','all','TestWinner','name','.quick-edit-btn','Points\x20data\x20loaded\x20successfully','highlight-id','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','create-achievement-highlight-btn','checked','edit-username','trace','Saturday','\x20quick\x20edit\x20buttons','cancel-set-elo-btn','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','body','load-matches-data','Friday','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','assign-trophy-name','replace','Load\x20matches\x20data\x20clicked','articles','Error\x20loading\x20points\x20data:','match-count','className','winnerName','allUsersPoints','Create\x20test\x20match\x20form\x20not\x20found','role','trophy-description','inactive-players-table-body','no-results','Added\x20','Form\x20elements\x20are\x20missing','Player\x20not\x20found','inactive-players','display','Error\x20opening\x20quick\x20edit\x20modal:','articles-table-body','rgba(25,\x20118,\x20210,\x200.7)','matchLink','role-name','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','edit-match-id','alt','eloRating','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','description','style','highlight-map-container','\x20Weekly\x20Activity','edit-highlight-map-input','demotion','Firebase\x20connection\x20test\x20successful!','Testing\x20Firebase\x20connection...','Error\x20updating\x20points:','highlight-video-preview','Modal\x20element\x20not\x20found!','setHours','textContent','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','Error\x20loading\x20articles:','achievement','Failed\x20to\x20save\x20trophy:\x20','Player\x20not\x20found\x20in\x20','Failed\x20to\x20delete\x20match:\x20','Please\x20enter\x20a\x20username','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','innerHTML','0.6','Username\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','update','.player','history-start-date','match-row','displayName','DOMContentLoaded','selected-user-id','userProfiles','edit-highlight-achievementType-input','highlight-video-id','Unauthorized:\x20Admin\x20access\x20required','❌\x20Missing','edit-match-ladder','demote-username','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','input[name=\x22demote-ladder\x22]:checked','mapCreator','trophy-modal-title','elo-history-table-body','highlight-match-date','approvedMatches','createdAt','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','active','View\x20history\x20clicked\x20for\x20user:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20','creator','nonParticipants','#e0e0e0','dataset','seconds','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','User\x20has\x20','assign-trophy-title','Edit\x20Trophy','classList','Error\x20opening\x20assign\x20trophy\x20modal:','log','closeResimulateModal','Updating\x20role\x20for\x20','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','cancel-role-btn','edit-match-loser-comment','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','confirm-resimulate-btn','D2\x20Players','MAX_SAFE_INTEGER','querySelector','string','inactive-days-filter','success','\x20Level\x20','load-trophies-data','Match\x20ID\x20is\x20required','div','createElement','user-search-results','currentUser','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','edit-highlight-playerProfileUrl-input','closest','user-search','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','No\x20match\x20data\x20found\x20for\x20resimulation','.delete-btn','Matches\x20Played','{}.constructor(\x22return\x20this\x22)(\x20)','manage-articles','selected-user-info','article-id','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','admin_modification','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','lastUpdated','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','\x20to\x20','admin','commit','sort','roleName','Trophy\x20ID\x20and\x20username\x20are\x20required','page','eloHistory','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','block','non-participant','edit-player-modal','getElementById','Failed\x20to\x20modify\x20points:\x20','stopPropagation','value','action','#C0C0C0','Unknown\x20Player','author','keypress','highlight-achievement-image','highlight-loser-score','Test\x20match','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','substring','wins','✅\x20Exists','preventDefault','Current\x20user:','Player\x20\x22','Error\x20loading\x20players:','playerId','match','get','set','\x20in\x20','highlight-modal-title','values','find','.close-btn','Creator','\x20points','contains','username','\x20ladder','User\x20not\x20found','20px','add-ribbon-form','subtract','highlight-creator-image','highlight-achievement-details','loserScore','type','.edit-btn','.sidebar-nav\x20.nav-item','change','winnerUsername','promotion','Trophy\x20not\x20found','level','Setting\x20up\x20Manage\x20Points\x20section','image','eloHistoryD2','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','migrate-points-btn','catch','create-test-match-form','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','Switched\x20to\x20','input','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22','approvedMatchesD3','loading','Error\x20loading\x20trophies:','rankDistribution','player-count','edit-match-loser-suicides','playersD3','Highlight\x20updated\x20successfully!','warn','empty','highlight-type','edit-match-loser-score','Failed\x20to\x20load\x20player\x20data','create-new-article-btn','#28a745','Auth:','Found\x20','highlight-match-link','#1976d2','highlight-player-profile','highlight-title','matches-search','Error\x20loading\x20article\x20data:','src','lastMatch','fa-exclamation-triangle','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','addEventListener','highlight-achievement-player','highlights','target','result','Starting\x20complete\x20match\x20resimulation...','Create\x20test\x20match\x20modal\x20not\x20found','user-roles-section','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','lastVisible','edit-wins','\x20total\x20players\x20in\x20the\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','toLocaleString','Trophy\x20Preview','Committing\x20batch\x20update\x20for\x20','fromDate','Error\x20initializing\x20points:\x20','opacity','Error:\x20','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','videoId','set-role-form','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches',';\x20color:\x20','opponent','location','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','\x20inactive\x20players','Error\x20deleting\x20highlight:\x20','.sidebar-nav\x20.nav-item[data-section=\x22','required','Gold','empty-state','asc','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','flex','add','ref','title','current-ladder-display','Sidebar\x20navigation\x20initialized\x20with\x20permissions','roleColor','Error\x20finding\x20match:','roleAssignedBy','Article\x20created\x20successfully','#d32f2f','querySelectorAll','date','cancel-edit-btn','reset','previousElo','highlight-loser-name','matches-page-indicator','\x20→\x20','TestMap','Error\x20loading\x20ELO\x20history:','remove','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','pendingMatchesD3','\x20from\x20','Error\x20saving\x20highlight:','push','rgba(255,\x20193,\x207,\x200.1)','message','highlight-submitted-by','Error\x20resimulating\x20match:','Error\x20searching\x20users:','Match\x20deleted\x20successfully','.close','source','daysSinceMatch','highlight-match-info-container','YouTube\x20Video\x20ID*','assign-trophy-id','playerProfileUrl','playersD2','loserUsername','Load\x20ribbons\x20data\x20clicked','highlight-player-profile-container','load-elo-history-data','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','Displaying\x20','getRankName','Match\x20ID\x20or\x20ladder\x20missing','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','#users-table-body\x20tr','edit-match-winner-comment','data-section','amount','Failed\x20to\x20resimulate\x20match:\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','email','manage-matches','1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)','eloHistoryD3','dashboard','points','</span>','appendChild','N/A','localeCompare','Error\x20adding\x20ribbon:','achievementType','W\x20/\x20','#inactive-players-table-body\x20tr','Error\x20saving\x20trophy:','filter','Collection\x20reference\x20created:','right','Simple\x20test\x20match\x20created\x20by\x20admin\x20','padding','Error\x20deleting\x20highlight:','creatorImageUrl','match-details-container','manage-points','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','Quick\x20edit\x20form\x20submitted','.edit-trophy-btn'];a4_0x525b=function(){return _0x1cbffc;};return a4_0x525b();}async function deleteMatch(_0x1fa1d9,_0x3b25e4){const _0x472da6=a4_0x5dc55c;try{console['log']('Deleting\x20match\x20'+_0x1fa1d9+'\x20from\x20'+_0x3b25e4+'\x20ladder');const _0x3181de=auth['currentUser'];if(!_0x3181de){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x433325=_0x3b25e4==='D1'?_0x472da6(0x25d):_0x3b25e4==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0x433325),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x433325,_0x1fa1d9)),console[_0x472da6(0x26e)]('Match\x20deleted\x20successfully'),showNotification(_0x472da6(0x33f),'success');const _0x300ca3=_0x3b25e4[_0x472da6(0x151)]();loadMatchesData(matchesPagination[_0x300ca3]['page']);}catch(_0x5e037d){console['error']('Error\x20deleting\x20match:',_0x5e037d),showNotification(_0x472da6(0x242)+_0x5e037d['message'],'error');}}function setupMatchesActionButtons(){console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x455ea2=>{_0x455ea2['addEventListener']('click',_0x1a013a=>{const _0x2dc44f=a4_0x1ba5;_0x1a013a[_0x2dc44f(0x2b0)](),_0x1a013a[_0x2dc44f(0x2a2)]();const _0x3755e5=_0x1a013a['currentTarget'][_0x2dc44f(0x266)]['id'],_0x3926a2=_0x1a013a['currentTarget'][_0x2dc44f(0x285)]('tr'),_0x2eedae=_0x3926a2[_0x2dc44f(0x266)]['ladder'];console['log']('Edit\x20match\x20clicked:',_0x3755e5,_0x2eedae),openEditMatchModal(_0x3755e5,_0x2eedae);});}),document['querySelectorAll']('.delete-match-btn')['forEach'](_0x4d48f3=>{const _0xbdf772=a4_0x1ba5;_0x4d48f3[_0xbdf772(0x2f7)]('click',_0xde0d18=>{const _0x5c636d=_0xbdf772;_0xde0d18['preventDefault'](),_0xde0d18['stopPropagation']();const _0x1c6df6=_0xde0d18['currentTarget']['dataset']['id'],_0x5ed3b3=_0xde0d18[_0x5c636d(0x18e)]['closest']('tr'),_0x442054=_0x5ed3b3['dataset'][_0x5c636d(0x149)]||currentLadder;console[_0x5c636d(0x26e)]('Delete\x20match\x20clicked:',_0x1c6df6,_0x442054),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x1c6df6,_0x442054);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x2ce28e=a4_0x5dc55c,_0x24c121=document['getElementById'](_0x2ce28e(0x2f1))['value']['toLowerCase'](),_0x4beb76=document['querySelectorAll']('#matches-table-body\x20tr');let _0x50d964=0x0;_0x4beb76['forEach'](_0xe3a82a=>{const _0x5e5d09=_0x2ce28e;if(_0xe3a82a['classList']['contains']('loading-cell')||_0xe3a82a['classList'][_0x5e5d09(0x2bf)]('empty-state')||_0xe3a82a['classList'][_0x5e5d09(0x2bf)]('error-state'))return;const _0x36b8ce=_0xe3a82a['cells'][0x1]['textContent'][_0x5e5d09(0x151)](),_0x42d84b=_0xe3a82a['cells'][0x2][_0x5e5d09(0x23c)][_0x5e5d09(0x151)](),_0x2670b1=_0xe3a82a[_0x5e5d09(0x1ef)][0x4]['textContent']['toLowerCase']();_0x36b8ce[_0x5e5d09(0x146)](_0x24c121)||_0x42d84b['includes'](_0x24c121)||_0x2670b1['includes'](_0x24c121)?(_0xe3a82a['style']['display']='',_0x50d964++):_0xe3a82a['style']['display']='none';});if(_0x50d964===0x0&&_0x4beb76['length']>0x0){const _0x465fa1=document[_0x2ce28e(0x2a0)]('matches-table-body'),_0xa51f16=_0x465fa1['querySelector']('.no-results');if(!_0xa51f16){const _0x1fa7ad=document[_0x2ce28e(0x280)]('tr');_0x1fa7ad['className']=_0x2ce28e(0x21f),_0x1fa7ad['innerHTML']=_0x2ce28e(0x274)+_0x24c121+'\x27</td>',_0x465fa1['appendChild'](_0x1fa7ad);}}else{const _0x51a82b=document['querySelector'](_0x2ce28e(0x164));_0x51a82b&&_0x51a82b[_0x2ce28e(0x334)]();}}function getMatchesFilters(){const _0x5a1001=a4_0x5dc55c,_0x619bb4=document['getElementById'](_0x5a1001(0x2f1))['value']['toLowerCase'](),_0x19e6a4=document[_0x5a1001(0x2a0)]('matches-start-date')[_0x5a1001(0x2a3)],_0x566dd4=document['getElementById']('matches-end-date')['value'];let _0xf2b47f=null,_0x3fe9bb=null;return _0x19e6a4&&(_0xf2b47f=new Date(_0x19e6a4),_0xf2b47f['setHours'](0x0,0x0,0x0,0x0),_0xf2b47f=Timestamp[_0x5a1001(0x308)](_0xf2b47f)),_0x566dd4&&(_0x3fe9bb=new Date(_0x566dd4),_0x3fe9bb['setHours'](0x17,0x3b,0x3b,0x3e7),_0x3fe9bb=Timestamp['fromDate'](_0x3fe9bb)),{'searchTerm':_0x619bb4,'startDate':_0xf2b47f,'endDate':_0x3fe9bb};}async function applyMatchesFilters(){const _0x8bc4ad=currentLadder['toLowerCase']();matchesPagination[_0x8bc4ad]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x1d376d=a4_0x5dc55c;document['getElementById'](_0x1d376d(0x12c))['value']='',document['getElementById']('matches-end-date')['value']='',document['getElementById'](_0x1d376d(0x2f1))['value']='';const _0xfc705a=currentLadder['toLowerCase']();matchesPagination[_0xfc705a]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x25176b,_0x3fb4f8){const _0x4fb8e6=a4_0x5dc55c,_0x35c02d=document['getElementById'](_0x4fb8e6(0x1b3));if(!_0x35c02d)return;try{const _0x4b7810=_0x3fb4f8==='D1'?'approvedMatches':_0x3fb4f8==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x6b4e61=doc(db,_0x4b7810,_0x25176b),_0x439550=await getDoc(_0x6b4e61);if(!_0x439550['exists']()){showNotification(_0x4fb8e6(0x18c),'error');return;}const _0x10bb03=_0x439550[_0x4fb8e6(0x1ec)]();document['getElementById']('edit-match-id')['value']=_0x25176b,document['getElementById'](_0x4fb8e6(0x255))['value']=_0x3fb4f8,document['getElementById']('edit-match-winner')['value']=_0x10bb03[_0x4fb8e6(0x2cd)]||'',document['getElementById']('edit-match-winner-score')[_0x4fb8e6(0x2a3)]=_0x10bb03['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0x10bb03[_0x4fb8e6(0x15d)]||0x0,document['getElementById'](_0x4fb8e6(0x352))['value']=_0x10bb03['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x10bb03['loserUsername']||'',document['getElementById'](_0x4fb8e6(0x2e7))['value']=_0x10bb03[_0x4fb8e6(0x2c8)]||0x0,document['getElementById'](_0x4fb8e6(0x2e1))[_0x4fb8e6(0x2a3)]=_0x10bb03['loserSuicides']||0x0,document[_0x4fb8e6(0x2a0)](_0x4fb8e6(0x273))[_0x4fb8e6(0x2a3)]=_0x10bb03['loserComment']||'',document['getElementById'](_0x4fb8e6(0x130))['value']=_0x10bb03['mapPlayed']||'',document['getElementById'](_0x4fb8e6(0x1eb))['value']=_0x10bb03['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')[_0x4fb8e6(0x2a3)]=_0x10bb03['loserDemoLink']||_0x10bb03['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x10bb03[_0x4fb8e6(0x2cd)]+'\x20vs\x20'+_0x10bb03['loserUsername'],_0x35c02d[_0x4fb8e6(0x26c)]['add']('active');}catch(_0x2381cd){console['error'](_0x4fb8e6(0x19e),_0x2381cd),showNotification('Failed\x20to\x20load\x20match\x20data',_0x4fb8e6(0x1f7));}}function closeEditMatchModal(){const _0x10cde1=a4_0x5dc55c,_0x9a5a3c=document[_0x10cde1(0x2a0)]('edit-match-modal');_0x9a5a3c&&_0x9a5a3c['classList'][_0x10cde1(0x334)]('active');}async function saveEditedMatch(){const _0x2bf728=a4_0x5dc55c;try{const _0x963483=document['getElementById'](_0x2bf728(0x22c))['value'],_0x5b7a8f=document[_0x2bf728(0x2a0)]('edit-match-ladder')['value'];if(!_0x963483||!_0x5b7a8f){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x143126=_0x5b7a8f==='D1'?'approvedMatches':_0x5b7a8f==='D2'?'approvedMatchesD2':_0x2bf728(0x2dc),_0x116601=document['getElementById']('edit-match-winner')['value']['trim'](),_0x258af5=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x115759=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x2ba4b6=document[_0x2bf728(0x2a0)]('edit-match-winner-comment')[_0x2bf728(0x2a3)][_0x2bf728(0x1d7)](),_0x3dd753=document['getElementById'](_0x2bf728(0x12f))['value']['trim'](),_0x4dc3ba=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x7b5d90=parseInt(document['getElementById'](_0x2bf728(0x2e1))[_0x2bf728(0x2a3)]),_0x5257dd=document['getElementById']('edit-match-loser-comment')[_0x2bf728(0x2a3)][_0x2bf728(0x1d7)](),_0x53d240=document[_0x2bf728(0x2a0)]('edit-match-map')['value'][_0x2bf728(0x1d7)](),_0x1674aa=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x2de9c5=document['getElementById']('edit-match-loser-demo')[_0x2bf728(0x2a3)]['trim']();if(!_0x116601||!_0x3dd753){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required',_0x2bf728(0x1f7));return;}await updateDoc(doc(db,_0x143126,_0x963483),{'winnerUsername':_0x116601,'winnerScore':_0x258af5,'winnerSuicides':_0x115759,'winnerComment':_0x2ba4b6,'loserUsername':_0x3dd753,'loserScore':_0x4dc3ba,'loserSuicides':_0x7b5d90,'loserComment':_0x5257dd,'mapPlayed':_0x53d240,'winnerDemoLink':_0x1674aa||null,'loserDemoLink':_0x2de9c5||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x2bf728(0x357)],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x5b7a8f[_0x2bf728(0x151)]()]['page']);}catch(_0x2778a9){console['error']('Error\x20saving\x20match:',_0x2778a9),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x2778a9[_0x2bf728(0x33b)],'error');}}async function openDeleteMatchModal(_0x4a701b,_0x3b7360){const _0x20592f=a4_0x5dc55c;try{const _0x1207c5=_0x3b7360==='D1'?'approvedMatches':_0x3b7360==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0xf6901=doc(db,_0x1207c5,_0x4a701b),_0x347ccd=await getDoc(_0xf6901);if(!_0x347ccd['exists']()){showNotification('Match\x20not\x20found',_0x20592f(0x1f7));return;}const _0x589ddc=_0x347ccd['data'](),_0x137278=document['getElementById']('delete-match-confirm-modal');_0x137278['dataset']['matchId']=_0x4a701b,_0x137278['dataset']['ladder']=_0x3b7360;const _0x4c5342=_0x589ddc['approvedAt']?new Date(_0x589ddc[_0x20592f(0x14b)][_0x20592f(0x267)]*0x3e8)['toLocaleDateString']():'N/A',_0x460b8c=document[_0x20592f(0x2a0)]('delete-match-summary');_0x460b8c[_0x20592f(0x245)]=_0x20592f(0x204)+_0x4c5342+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x589ddc['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x589ddc['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x589ddc[_0x20592f(0x147)]||0x0)+_0x20592f(0x138)+(_0x589ddc['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x589ddc['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x3b7360+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x137278['classList']['add']('active');}catch(_0x42da22){console[_0x20592f(0x1f7)]('Error\x20loading\x20match\x20for\x20deletion:',_0x42da22),showNotification('Failed\x20to\x20load\x20match\x20data',_0x20592f(0x1f7));}}function closeDeleteMatchModal(){const _0x15b908=a4_0x5dc55c,_0xdc484d=document['getElementById']('delete-match-confirm-modal');_0xdc484d&&(_0xdc484d[_0x15b908(0x26c)]['remove'](_0x15b908(0x260)),_0xdc484d['removeAttribute']('data-match-id'),_0xdc484d['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x496c09=a4_0x5dc55c,_0x259240=document[_0x496c09(0x2a0)]('delete-match-confirm-modal'),_0x423aee=_0x259240['dataset']['matchId'],_0x5d2528=_0x259240['dataset'][_0x496c09(0x149)];if(!_0x423aee||!_0x5d2528){showNotification(_0x496c09(0x34f),'error'),closeDeleteMatchModal();return;}try{const _0x2a28e3=_0x5d2528==='D1'?'approvedMatches':_0x5d2528==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x2a28e3,_0x423aee)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x5d2528['toLowerCase']()][_0x496c09(0x29a)]);}catch(_0x3ffff0){console['error']('Error\x20deleting\x20match:',_0x3ffff0),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x3ffff0['message'],'error');}}async function saveHighlightChanges(){const _0x1dea14=a4_0x5dc55c,_0x111c19=document[_0x1dea14(0x2a0)]('edit-highlight-id')['value'],_0x409f0c=document['getElementById']('edit-highlight-type-select')[_0x1dea14(0x2a3)];let _0x12debd={'title':document[_0x1dea14(0x2a0)]('edit-highlight-title-input')['value']['trim'](),'type':_0x409f0c,'description':document[_0x1dea14(0x2a0)]('edit-highlight-description-input')[_0x1dea14(0x2a3)][_0x1dea14(0x1d7)](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth[_0x1dea14(0x282)]['email']};if(_0x409f0c==='match'){_0x12debd['matchInfo']=document[_0x1dea14(0x2a0)]('edit-highlight-matchInfo-input')[_0x1dea14(0x2a3)][_0x1dea14(0x1d7)](),_0x12debd['map']=document['getElementById'](_0x1dea14(0x234))['value']['trim']();const _0x1d30e7=document[_0x1dea14(0x2a0)]('edit-highlight-matchDate-input')['value'];_0x12debd['matchDate']=_0x1d30e7?Timestamp['fromDate'](new Date(_0x1d30e7)):null,_0x12debd['winnerName']=document['getElementById']('edit-highlight-winnerName-input')[_0x1dea14(0x2a3)]['trim'](),_0x12debd['winnerScore']=document['getElementById']('edit-highlight-winnerScore-input')[_0x1dea14(0x2a3)][_0x1dea14(0x1d7)](),_0x12debd['loserName']=document['getElementById']('edit-highlight-loserName-input')['value'][_0x1dea14(0x1d7)](),_0x12debd['loserScore']=document['getElementById']('edit-highlight-loserScore-input')['value']['trim'](),_0x12debd['matchLink']=document[_0x1dea14(0x2a0)]('edit-highlight-matchLink-input')[_0x1dea14(0x2a3)]['trim'](),_0x12debd['mapCreator']=null,_0x12debd['mapVersion']=null,_0x12debd['creatorImageUrl']=null,_0x12debd['achievementPlayer']=null,_0x12debd['achievementType']=null,_0x12debd['achievementDetails']=null,_0x12debd['playerProfileUrl']=null;}else{if(_0x409f0c===_0x1dea14(0x263))_0x12debd['map']=document['getElementById'](_0x1dea14(0x234))['value']['trim'](),_0x12debd[_0x1dea14(0x259)]=document[_0x1dea14(0x2a0)]('edit-highlight-mapCreator-input')['value'][_0x1dea14(0x1d7)](),_0x12debd['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')[_0x1dea14(0x2a3)]['trim'](),_0x12debd['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')['value']['trim'](),_0x12debd['matchInfo']=null,_0x12debd['matchDate']=null,_0x12debd[_0x1dea14(0x219)]=null,_0x12debd['winnerScore']=null,_0x12debd['loserName']=null,_0x12debd['loserScore']=null,_0x12debd[_0x1dea14(0x228)]=null,_0x12debd['achievementPlayer']=null,_0x12debd[_0x1dea14(0x362)]=null,_0x12debd['achievementDetails']=null,_0x12debd[_0x1dea14(0x346)]=null;else _0x409f0c==='achievement'&&(_0x12debd['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x12debd['achievementType']=document[_0x1dea14(0x2a0)](_0x1dea14(0x251))['value'][_0x1dea14(0x1d7)](),_0x12debd[_0x1dea14(0x19c)]=document['getElementById'](_0x1dea14(0x136))['value']['trim'](),_0x12debd['playerProfileUrl']=document[_0x1dea14(0x2a0)](_0x1dea14(0x284))['value']['trim'](),_0x12debd['matchInfo']=null,_0x12debd[_0x1dea14(0x1a2)]=null,_0x12debd['matchDate']=null,_0x12debd['winnerName']=null,_0x12debd['winnerScore']=null,_0x12debd['loserName']=null,_0x12debd['loserScore']=null,_0x12debd['matchLink']=null,_0x12debd['mapCreator']=null,_0x12debd['mapVersion']=null,_0x12debd['creatorImageUrl']=null);}try{if(_0x111c19){_0x12debd['updatedAt']=serverTimestamp();const _0x29ddfa=doc(db,_0x1dea14(0x2f9),_0x111c19);await updateDoc(_0x29ddfa,_0x12debd),showNotification(_0x1dea14(0x2e3),'success');}else _0x12debd['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x12debd),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x51e886){console['error']('Error\x20saving\x20highlight:',_0x51e886),showNotification('Error\x20saving\x20highlight:\x20'+_0x51e886['message'],_0x1dea14(0x1f7));}}async function resimulateMatch(){const _0x5f3dbd=a4_0x5dc55c;try{const _0x398bdc=document['getElementById']('resimulate-match-id')['value'];if(!_0x398bdc){showNotification(_0x5f3dbd(0x27e),'error');return;}const _0x494d9e=auth[_0x5f3dbd(0x282)];if(!_0x494d9e){showNotification(_0x5f3dbd(0x311),'error');return;}const _0x1e23ba=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x581bfa=doc(db,_0x1e23ba,_0x398bdc),_0x3ab757=await getDoc(_0x581bfa);if(!_0x3ab757['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x39f36e=_0x3ab757['data'](),_0x4be890=_0x39f36e['approvedAt']?_0x39f36e['approvedAt']['toDate']()['toLocaleString']():_0x39f36e['matchDate']?_0x39f36e['matchDate']['toDate']?_0x39f36e['matchDate']['toDate']()[_0x5f3dbd(0x305)]():new Date(_0x39f36e[_0x5f3dbd(0x1d8)])['toLocaleString']():'Unknown',_0x4c6924=_0x5f3dbd(0x132)+_0x39f36e['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x39f36e['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x39f36e['winnerScore']+'-'+_0x39f36e['loserScore']+_0x5f3dbd(0x137)+(_0x39f36e['mapPlayed']||_0x39f36e['mapName']||'Unknown')+_0x5f3dbd(0x162)+_0x4be890+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x398bdc+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x5f3dbd(0x2a0)]('match-details-container')['innerHTML']=_0x4c6924,document['getElementById']('match-details-container')[_0x5f3dbd(0x231)][_0x5f3dbd(0x224)]='block',document['getElementById'](_0x5f3dbd(0x275))['style']['display']='block',window['pendingResimulateData']={'matchId':_0x398bdc,'matchData':_0x39f36e,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x359206){console['error'](_0x5f3dbd(0x326),_0x359206),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x359206['message'],'error');}}async function confirmResimulateMatch(){const _0x2cddf3=a4_0x5dc55c;try{const {matchId:_0x4068f2,matchData:_0xccdcd2,ladder:_0x4dae4d}=window['pendingResimulateData'];if(!_0x4068f2||!_0xccdcd2){showNotification(_0x2cddf3(0x288),_0x2cddf3(0x1f7));return;}const _0x1f5012=_0x4dae4d==='D1'?_0x2cddf3(0x1cd):_0x4dae4d==='D2'?'playersD2':'playersD3',_0x50d5b2=_0x4dae4d==='D1'?_0x2cddf3(0x29b):_0x4dae4d==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x37d8db,_0x37220e]=await Promise['all']([getDocs(query(collection(db,_0x1f5012),where('username','==',_0xccdcd2['winnerUsername']))),getDocs(query(collection(db,_0x1f5012),where('username','==',_0xccdcd2['loserUsername'])))]);if(_0x37d8db['empty']||_0x37220e['empty']){showNotification(_0x2cddf3(0x196),_0x2cddf3(0x1f7));return;}const _0x2f95a5=_0x37d8db[_0x2cddf3(0x15c)][0x0]['id'],_0x279b80=_0x37220e['docs'][0x0]['id'],_0x4ec601=_0x37d8db['docs'][0x0]['data'](),_0x3f5540=_0x37220e['docs'][0x0]['data'](),[_0x28d07a,_0x21632d]=await Promise['all']([getDocs(query(collection(db,_0x50d5b2),where('playerId','==',_0x2f95a5),where('matchId','==',_0x4068f2))),getDocs(query(collection(db,_0x50d5b2),where(_0x2cddf3(0x2b4),'==',_0x279b80),where(_0x2cddf3(0x1af),'==',_0x4068f2)))]),_0x58dfea=!_0x28d07a['empty'],_0x70367b=!_0x21632d[_0x2cddf3(0x2e5)],_0x5715bb=_0x2cddf3(0x1e1)+(_0x58dfea?'✅\x20Exists':'❌\x20Missing')+_0x2cddf3(0x304)+(_0x70367b?_0x2cddf3(0x2af):_0x2cddf3(0x254))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x4ec601[_0x2cddf3(0x22e)]||_0x2cddf3(0x1db))+_0x2cddf3(0x1a6)+(_0x3f5540['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x4ec601[_0x2cddf3(0x139)]||'Unknown')+_0x2cddf3(0x156)+(_0x3f5540[_0x2cddf3(0x139)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x5715bb,document['getElementById']('validation-results-container')['style']['display']='block';if(_0x58dfea&&_0x70367b){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification(_0x2cddf3(0x2fc),_0x2cddf3(0x1a8));const _0x352c77=_0xccdcd2['approvedAt']||_0xccdcd2['matchDate']||serverTimestamp(),[_0x4b74b2,_0xddf339]=await Promise['all']([getPlayerEloAtTime(_0x2f95a5,_0x352c77,_0x50d5b2),getPlayerEloAtTime(_0x279b80,_0x352c77,_0x50d5b2)]),{calculateElo:_0x4eb270}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x43ad86,newLoserRating:_0x1a5d2c}=_0x4eb270(_0x4b74b2,_0xddf339),_0x191d2f=_0x4ec601['position']||Number[_0x2cddf3(0x277)],_0x51215c=_0x3f5540['position']||Number['MAX_SAFE_INTEGER'];let _0x5c4874=_0x191d2f,_0x5022ce=_0x51215c;_0x191d2f>_0x51215c&&(_0x5c4874=_0x51215c,_0x5022ce=_0x51215c+0x1);const _0x31b610=writeBatch(db),_0x4a157e=doc(db,_0x1f5012,_0x2f95a5);_0x31b610['update'](_0x4a157e,{'eloRating':_0x43ad86,'position':_0x5c4874,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x1151c1=doc(db,_0x1f5012,_0x279b80);_0x31b610['update'](_0x1151c1,{'eloRating':_0x1a5d2c,'position':_0x5022ce,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x191d2f>_0x51215c){const _0x4edb7a=await getDocs(query(collection(db,_0x1f5012),where('position','>',_0x51215c),where(_0x2cddf3(0x139),'<',_0x191d2f)));_0x4edb7a['forEach'](_0x547ed0=>{const _0xe8f1f9=_0x2cddf3,_0x271ceb=doc(db,_0x1f5012,_0x547ed0['id']),_0x1cb2b7=_0x547ed0['data']()[_0xe8f1f9(0x139)];_0x31b610['update'](_0x271ceb,{'position':_0x1cb2b7+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0xe8f1f9(0x125),'positionAdjustedAt':serverTimestamp()});});}if(!_0x58dfea){const _0x3de33b=doc(collection(db,_0x50d5b2));_0x31b610['set'](_0x3de33b,{'playerId':_0x2f95a5,'player':_0xccdcd2[_0x2cddf3(0x2cd)],'previousElo':_0x4b74b2,'newElo':_0x43ad86,'eloChange':_0x43ad86-_0x4b74b2,'opponentId':_0x279b80,'opponent':_0xccdcd2['loserUsername'],'matchResult':_0x2cddf3(0x122),'previousPosition':_0x191d2f,'newPosition':_0x5c4874,'positionChange':_0x5c4874-_0x191d2f,'matchId':_0x4068f2,'timestamp':_0x352c77,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x4dae4d,'matchScore':_0xccdcd2[_0x2cddf3(0x147)]+'-'+_0xccdcd2['loserScore'],'mapPlayed':_0xccdcd2['mapPlayed']||_0xccdcd2['mapName']||'Unknown','note':_0x2cddf3(0x1e0)});}if(!_0x70367b){const _0x592004=doc(collection(db,_0x50d5b2));_0x31b610['set'](_0x592004,{'playerId':_0x279b80,'player':_0xccdcd2['loserUsername'],'previousElo':_0xddf339,'newElo':_0x1a5d2c,'eloChange':_0x1a5d2c-_0xddf339,'opponentId':_0x2f95a5,'opponent':_0xccdcd2['winnerUsername'],'matchResult':'loss','previousPosition':_0x51215c,'newPosition':_0x5022ce,'positionChange':_0x5022ce-_0x51215c,'matchId':_0x4068f2,'timestamp':_0x352c77,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x4dae4d,'matchScore':_0xccdcd2[_0x2cddf3(0x147)]+'-'+_0xccdcd2['loserScore'],'mapPlayed':_0xccdcd2[_0x2cddf3(0x1c9)]||_0xccdcd2['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x5f1d6f=_0x4dae4d==='D1'?'approvedMatches':_0x4dae4d==='D2'?'approvedMatchesD2':_0x2cddf3(0x2dc),_0x495cea=doc(db,_0x5f1d6f,_0x4068f2);_0x31b610[_0x2cddf3(0x249)](_0x495cea,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x4ec601['eloRating'],'originalLoserElo':_0x3f5540[_0x2cddf3(0x22e)],'originalWinnerPosition':_0x191d2f,'originalLoserPosition':_0x51215c,'resimulatedWinnerElo':_0x43ad86,'resimulatedLoserElo':_0x1a5d2c,'resimulatedWinnerPosition':_0x5c4874,'resimulatedLoserPosition':_0x5022ce}),await _0x31b610[_0x2cddf3(0x296)]();const _0x5c158d=(!_0x58dfea?0x1:0x0)+(!_0x70367b?0x1:0x0),_0x5700f1=_0x191d2f!==_0x5c4874||_0x51215c!==_0x5022ce;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x5c158d+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x4b74b2+'→'+_0x43ad86+'\x20(+'+(_0x43ad86-_0x4b74b2)+'),\x20')+('Loser\x20'+_0xddf339+'→'+_0x1a5d2c+'\x20('+(_0x1a5d2c-_0xddf339)+').\x20')+(''+(_0x5700f1?_0x2cddf3(0x1f8)+_0x191d2f+'→'+_0x5c4874+',\x20Loser\x20'+_0x51215c+'→'+_0x5022ce:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0xf679f6){console[_0x2cddf3(0x1f7)](_0x2cddf3(0x33d),_0xf679f6),showNotification(_0x2cddf3(0x355)+_0xf679f6['message'],'error');}}async function getPlayerEloAtTime(_0x2116a6,_0x53a438,_0x35cab4){const _0x1fb366=a4_0x5dc55c;try{const _0x97d27=_0x53a438['toDate']?_0x53a438['toDate']():new Date(_0x53a438),_0x187543=query(collection(db,_0x35cab4),where('playerId','==',_0x2116a6),where(_0x1fb366(0x180),'<',_0x53a438),orderBy('timestamp',_0x1fb366(0x11f)),limit(0x1)),_0x5467ae=await getDocs(_0x187543);if(!_0x5467ae[_0x1fb366(0x2e5)]){const _0x44d6ef=_0x5467ae['docs'][0x0]['data']();return console[_0x1fb366(0x26e)]('Found\x20ELO\x20history\x20for\x20player\x20'+_0x2116a6+_0x1fb366(0x1e8)+_0x44d6ef['newElo']),_0x44d6ef['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x2116a6+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x15416a){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x2116a6+':',_0x15416a),0x4b0;}}function openResimulateModal(){const _0xe260de=a4_0x5dc55c;console['log']('openResimulateModal\x20called!');const _0x530d9d=document[_0xe260de(0x2a0)]('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x530d9d);if(!_0x530d9d){console['error'](_0xe260de(0x23a));return;}_0x530d9d['style'][_0xe260de(0x224)]='block',_0x530d9d['style']['visibility']=_0xe260de(0x176),_0x530d9d['style'][_0xe260de(0x30a)]='1',_0x530d9d[_0xe260de(0x26c)]['add']('active'),console[_0xe260de(0x26e)]('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x530d9d)['display']);const _0x29279a=document['getElementById'](_0xe260de(0x36d)),_0x40e46b=document[_0xe260de(0x2a0)]('validation-results-container'),_0x1eaa85=document['getElementById']('confirm-resimulate-btn'),_0x41c091=document['getElementById']('resimulate-match-id');if(_0x29279a)_0x29279a['innerHTML']='';if(_0x40e46b)_0x40e46b['innerHTML']='';if(_0x1eaa85)_0x1eaa85['style']['display']='none';if(_0x41c091)_0x41c091['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x65baa9=a4_0x5dc55c;document[_0x65baa9(0x2a0)]('resimulate-modal')[_0x65baa9(0x231)]['display']=_0x65baa9(0x141),window['pendingResimulateData']=null;}window[a4_0x5dc55c(0x1fc)]=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a4_0x5dc55c(0x26f)]=closeResimulateModal;async function loadPointsData(){const _0x4246af=a4_0x5dc55c;console['log']('Loading\x20points\x20data...');try{await Promise[_0x4246af(0x1fe)]([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x4246af(0x202),'success');}catch(_0x273a2d){console[_0x4246af(0x1f7)](_0x4246af(0x216),_0x273a2d),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x273a2d['message'],'error');}}function renderPointsOverview(_0x113bfc){const _0x2176db=document['getElementById']('points-overview-table-body');if(!_0x2176db)return;if(_0x113bfc['length']===0x0){_0x2176db['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x2176db['innerHTML']='',_0x113bfc['forEach'](_0x536eec=>{const _0x55e490=a4_0x1ba5,_0x271bd3=document['createElement']('tr'),_0x386133=_0x536eec['displayName']||_0x536eec[_0x55e490(0x2c0)]||_0x55e490(0x167),_0x36e630=_0x536eec['email']||'No\x20email',_0x5e748c=_0x536eec['points']||0x0,_0x5e8734=_0x536eec[_0x55e490(0x15b)]?new Date(_0x536eec[_0x55e490(0x15b)]['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x271bd3['innerHTML']=_0x55e490(0x310)+_0x386133+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x36e630+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x5e748c>0x3e8?'high-points':_0x5e748c>0x1f4?'medium-points':'low-points')+_0x55e490(0x2ac)+_0x5e748c[_0x55e490(0x305)]()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5e8734+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x536eec['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x536eec['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2176db[_0x55e490(0x35e)](_0x271bd3);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x2f3bcd=a4_0x5dc55c;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x31f99c=document['querySelectorAll'](_0x2f3bcd(0x201));console['log']('Found\x20'+_0x31f99c['length']+_0x2f3bcd(0x20a)),_0x31f99c[_0x2f3bcd(0x12e)](_0x2b9d36=>{const _0x4d821a=_0x2b9d36['cloneNode'](!![]);_0x2b9d36['parentNode']['replaceChild'](_0x4d821a,_0x2b9d36);});const _0x115402=document['querySelectorAll']('.view-history-btn');console[_0x2f3bcd(0x26e)](_0x2f3bcd(0x2ec)+_0x115402[_0x2f3bcd(0x1be)]+'\x20view\x20history\x20buttons'),_0x115402['forEach'](_0x54a06e=>{const _0x5a123c=_0x2f3bcd,_0x2fef1d=_0x54a06e[_0x5a123c(0x16f)](!![]);_0x54a06e['parentNode']['replaceChild'](_0x2fef1d,_0x54a06e);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x35cc24=>{const _0x1726bc=_0x2f3bcd;_0x35cc24[_0x1726bc(0x2f7)](_0x1726bc(0x1a0),function(_0x14d295){const _0x3d47e2=_0x1726bc;_0x14d295['preventDefault'](),_0x14d295[_0x3d47e2(0x2a2)]();const _0x5374f3=this[_0x3d47e2(0x266)][_0x3d47e2(0x1d6)];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x5374f3);if(!_0x5374f3){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x5374f3);});}),document[_0x2f3bcd(0x32a)](_0x2f3bcd(0x1a4))['forEach'](_0x3f0867=>{_0x3f0867['addEventListener']('click',function(_0x36f9f1){const _0x30a445=a4_0x1ba5;_0x36f9f1['preventDefault'](),_0x36f9f1['stopPropagation']();const _0x2e9453=this['dataset']['userId'];console['log'](_0x30a445(0x261),_0x2e9453);if(!_0x2e9453){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']=_0x30a445(0x246),setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x2e9453);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x2cd741){const _0x18a3b7=a4_0x5dc55c;console[_0x18a3b7(0x26e)](_0x18a3b7(0x30c),_0x2cd741);const _0x5973ef=document[_0x18a3b7(0x2a0)](_0x18a3b7(0x1de));if(!_0x5973ef){console[_0x18a3b7(0x1f7)]('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification(_0x18a3b7(0x179),'info');const _0x227ed3=doc(db,_0x18a3b7(0x250),_0x2cd741),_0x8e3115=await getDoc(_0x227ed3);if(!_0x8e3115['exists']()){showNotification('User\x20not\x20found','error');return;}const _0x234d3f=_0x8e3115['data']();console['log']('User\x20data\x20loaded:',_0x234d3f);const _0x5a5267=document['getElementById']('quick-edit-user-id'),_0x30df7a=document[_0x18a3b7(0x2a0)]('quick-edit-display-name'),_0x365e55=document['getElementById']('quick-edit-email'),_0x5ac540=document['getElementById'](_0x18a3b7(0x1bb)),_0x2caa9d=document['getElementById']('quick-edit-points-form');if(!_0x5a5267||!_0x30df7a||!_0x365e55||!_0x5ac540||!_0x2caa9d){console[_0x18a3b7(0x1f7)](_0x18a3b7(0x36f)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.',_0x18a3b7(0x1f7));return;}_0x5a5267['value']=_0x2cd741,_0x30df7a['textContent']=_0x234d3f['displayName']||_0x234d3f[_0x18a3b7(0x2c0)]||'Unknown\x20User',_0x365e55[_0x18a3b7(0x23c)]=_0x234d3f['email']||_0x18a3b7(0x174),_0x5ac540['textContent']=(_0x234d3f['points']||0x0)['toLocaleString'](),_0x2caa9d['reset']();const _0x359791=document['getElementById']('quick-add');_0x359791&&(_0x359791[_0x18a3b7(0x206)]=!![]);_0x5973ef['classList']['add']('active'),console['log']('Modal\x20opened\x20successfully');const _0x2ada5c=document['getElementById']('quick-points-amount');_0x2ada5c&&setTimeout(()=>_0x2ada5c['focus'](),0x64);}catch(_0x490c87){console[_0x18a3b7(0x1f7)](_0x18a3b7(0x225),_0x490c87),showNotification(_0x18a3b7(0x133)+_0x490c87[_0x18a3b7(0x33b)],'error');}}function closeQuickEditModal(){const _0xdaee14=document['getElementById']('quick-edit-points-modal');_0xdaee14&&_0xdaee14['classList']['remove']('active');}async function handleQuickEditPoints(_0x29291f){const _0x32460e=a4_0x5dc55c;_0x29291f['preventDefault']();const _0x5b2b48=document[_0x32460e(0x2a0)](_0x32460e(0x1f6))['value'],_0x80ef61=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0x503c17=parseInt(document['getElementById']('quick-points-amount')['value']),_0x2f5886=document['getElementById']('quick-points-reason')['value']['trim']();console['log']('Processing\x20points\x20edit:',{'userId':_0x5b2b48,'action':_0x80ef61,'amount':_0x503c17,'reason':_0x2f5886});if(!_0x5b2b48||!_0x503c17||_0x503c17<0x0){showNotification(_0x32460e(0x16e),_0x32460e(0x1f7));return;}try{await modifyUserPoints(_0x5b2b48,_0x80ef61,_0x503c17,_0x2f5886),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully',_0x32460e(0x27b)),console[_0x32460e(0x26e)]('Points\x20updated\x20successfully\x20for\x20user:',_0x5b2b48);}catch(_0x2822d5){console[_0x32460e(0x1f7)](_0x32460e(0x238),_0x2822d5),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x2822d5[_0x32460e(0x33b)],'error');}}async function searchUsersForPoints(){const _0x260cc3=a4_0x5dc55c,_0x43aa35=document['getElementById']('points-user-search')['value']['trim']()['toLowerCase'](),_0x933dda=document[_0x260cc3(0x2a0)]('user-search-results');if(!_0x43aa35||_0x43aa35['length']<0x2){_0x933dda[_0x260cc3(0x245)]='';return;}_0x933dda['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x1e7cda=collection(db,_0x260cc3(0x250)),_0x37fb05=await getDocs(_0x1e7cda),_0x3ffa6a=[];_0x37fb05['forEach'](_0x234340=>{const _0x1b3abd=_0x260cc3,_0x3bafe1=_0x234340['data'](),_0x1a95de=(_0x3bafe1[_0x1b3abd(0x24d)]||_0x3bafe1['username']||'')['toLowerCase'](),_0x1c8f9b=(_0x3bafe1[_0x1b3abd(0x357)]||'')['toLowerCase']();(_0x1a95de['includes'](_0x43aa35)||_0x1c8f9b['includes'](_0x43aa35))&&_0x3ffa6a['push']({'id':_0x234340['id'],..._0x3bafe1});});if(_0x3ffa6a['length']===0x0){_0x933dda[_0x260cc3(0x245)]='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x933dda[_0x260cc3(0x245)]='',_0x3ffa6a['forEach'](_0x3d582e=>{const _0x30316f=_0x260cc3,_0x4d2b28=document[_0x30316f(0x280)]('div');_0x4d2b28[_0x30316f(0x218)]='search-result-item',_0x4d2b28['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x3d582e['displayName']||_0x3d582e[_0x30316f(0x2c0)]||'Unknown')+_0x30316f(0x2ff)+(_0x3d582e[_0x30316f(0x357)]||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x3d582e['points']||0x0)[_0x30316f(0x305)]()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4d2b28['addEventListener']('click',()=>selectUserForPoints(_0x3d582e)),_0x933dda['appendChild'](_0x4d2b28);});}catch(_0x31856f){console['error'](_0x260cc3(0x33e),_0x31856f),_0x933dda['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x333945){const _0x10e695=a4_0x5dc55c;document[_0x10e695(0x2a0)]('selected-user-name')[_0x10e695(0x23c)]=_0x333945['displayName']||_0x333945[_0x10e695(0x2c0)]||_0x10e695(0x167),document['getElementById']('selected-user-points')['textContent']=(_0x333945['points']||0x0)['toLocaleString'](),document['getElementById'](_0x10e695(0x24f))['value']=_0x333945['id'],document['getElementById'](_0x10e695(0x28d))[_0x10e695(0x231)]['display']='block',document['getElementById'](_0x10e695(0x1cb))[_0x10e695(0x231)]['display']='block',document[_0x10e695(0x2a0)](_0x10e695(0x281))['innerHTML']='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x29af92){const _0x403cbc=a4_0x5dc55c;_0x29af92['preventDefault']();const _0x45765f=document[_0x403cbc(0x2a0)]('selected-user-id')['value'],_0x463ed2=document['getElementById']('points-action')['value'],_0xe40bb7=parseInt(document['getElementById']('points-amount')[_0x403cbc(0x2a3)]),_0x2db8e5=document['getElementById']('points-reason')[_0x403cbc(0x2a3)]['trim']();if(!_0x45765f||!_0xe40bb7||_0xe40bb7<0x0){showNotification(_0x403cbc(0x1dd),_0x403cbc(0x1f7));return;}try{await modifyUserPoints(_0x45765f,_0x463ed2,_0xe40bb7,_0x2db8e5),document['getElementById']('modify-points-form')['reset']();const _0x543b1f=doc(db,_0x403cbc(0x250),_0x45765f),_0xa786d5=await getDoc(_0x543b1f);if(_0xa786d5['exists']()){const _0xaf98a9=_0xa786d5['data']();document['getElementById']('selected-user-points')[_0x403cbc(0x23c)]=(_0xaf98a9['points']||0x0)[_0x403cbc(0x305)]();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0xcdc54b){console['error']('Error\x20modifying\x20points:',_0xcdc54b),showNotification(_0x403cbc(0x2a1)+_0xcdc54b['message'],'error');}}async function loadPointsHistory(){const _0x5d98d8=a4_0x5dc55c,_0x28b13c=document[_0x5d98d8(0x2a0)]('points-history-table-body');if(!_0x28b13c)return;_0x28b13c['innerHTML']=_0x5d98d8(0x15f);try{const _0x4f60b1=collection(db,_0x5d98d8(0x1ca)),_0x298a35=query(_0x4f60b1,orderBy('timestamp',_0x5d98d8(0x11f)),limit(0x32)),_0x488158=await getDocs(_0x298a35);if(_0x488158['empty']){_0x28b13c['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x28b13c[_0x5d98d8(0x245)]='',_0x488158[_0x5d98d8(0x12e)](_0x58ae57=>{const _0x309b49=_0x5d98d8,_0x3cf01f=_0x58ae57['data'](),_0x3b1499=document['createElement']('tr'),_0x5a91de=_0x3cf01f[_0x309b49(0x180)]?new Date(_0x3cf01f[_0x309b49(0x180)]['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x4ba16d='';switch(_0x3cf01f['action']){case'add':_0x4ba16d=_0x309b49(0x220)+_0x3cf01f[_0x309b49(0x354)]+'\x20points';break;case'subtract':_0x4ba16d='Subtracted\x20'+_0x3cf01f[_0x309b49(0x354)]+_0x309b49(0x2be);break;case'set':_0x4ba16d='Set\x20to\x20'+_0x3cf01f[_0x309b49(0x354)]+_0x309b49(0x2be);break;default:_0x4ba16d=_0x3cf01f[_0x309b49(0x2a4)]+'\x20'+_0x3cf01f['amount']+'\x20points';}_0x3b1499['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5a91de+_0x309b49(0x1fa)+(_0x3cf01f[_0x309b49(0x24d)]||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4ba16d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x3cf01f['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3cf01f['previousPoints']||0x0)+_0x309b49(0x331)+(_0x3cf01f['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3cf01f['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3cf01f['adminEmail']||_0x309b49(0x16c))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x28b13c['appendChild'](_0x3b1499);});}catch(_0x1d414c){console[_0x5d98d8(0x1f7)](_0x5d98d8(0x1cc),_0x1d414c),_0x28b13c['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x1d414c['message']+'</td></tr>';}}function filterPointsOverview(){const _0x6322c6=a4_0x5dc55c,_0x19bffd=document[_0x6322c6(0x2a0)]('points-overview-search')['value']['toLowerCase']();if(!window[_0x6322c6(0x21a)])return;const _0x3206b8=window['allUsersPoints']['filter'](_0x58b5ae=>{const _0x980280=_0x6322c6,_0x2904df=(_0x58b5ae['displayName']||_0x58b5ae['username']||'')[_0x980280(0x151)](),_0x55c19a=(_0x58b5ae[_0x980280(0x357)]||'')['toLowerCase']();return _0x2904df['includes'](_0x19bffd)||_0x55c19a['includes'](_0x19bffd);});renderPointsOverview(_0x3206b8);}function sortPointsOverview(){const _0x34e165=a4_0x5dc55c,_0x5e3acb=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x5bb3e7=[...window['allUsersPoints']];switch(_0x5e3acb){case'points-desc':_0x5bb3e7[_0x34e165(0x297)]((_0x509e3b,_0x337fd8)=>(_0x337fd8['points']||0x0)-(_0x509e3b[_0x34e165(0x35c)]||0x0));break;case'points-asc':_0x5bb3e7['sort']((_0x35a8aa,_0x5c5455)=>(_0x35a8aa[_0x34e165(0x35c)]||0x0)-(_0x5c5455[_0x34e165(0x35c)]||0x0));break;case'name-asc':_0x5bb3e7['sort']((_0x3825e7,_0x2379a7)=>{const _0x5b903a=_0x34e165,_0x3b4727=(_0x3825e7['displayName']||_0x3825e7['username']||'')[_0x5b903a(0x151)](),_0x8f4ab9=(_0x2379a7['displayName']||_0x2379a7['username']||'')['toLowerCase']();return _0x3b4727['localeCompare'](_0x8f4ab9);});break;case'name-desc':_0x5bb3e7['sort']((_0x497deb,_0x12d0c7)=>{const _0x260e9f=_0x34e165,_0xae4d1d=(_0x497deb[_0x260e9f(0x24d)]||_0x497deb['username']||'')['toLowerCase'](),_0x575f15=(_0x12d0c7['displayName']||_0x12d0c7['username']||'')['toLowerCase']();return _0x575f15[_0x260e9f(0x360)](_0xae4d1d);});break;}renderPointsOverview(_0x5bb3e7);}async function handleAwardItem(_0x561ee3){const _0x4a4ee6=a4_0x5dc55c;_0x561ee3['preventDefault']();const _0x3f822f=document['getElementById']('selected-user-id')['value'],_0x38f2db=document[_0x4a4ee6(0x2a0)]('store-item-select')[_0x4a4ee6(0x2a3)],_0x48f508=document['getElementById']('award-reason')['value']['trim']();if(!_0x3f822f||!_0x38f2db){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document[_0x4a4ee6(0x2a0)]('award-item-form')['reset']();}catch(_0x5a403b){console['error']('Error\x20awarding\x20item:',_0x5a403b),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x5a403b[_0x4a4ee6(0x33b)],'error');}}async function loadUserPointsHistory(_0x50a1a1){const _0x526b40=a4_0x5dc55c;try{const _0x21abf8=collection(db,'pointsHistory'),_0x202a33=query(_0x21abf8,where('userId','==',_0x50a1a1),orderBy('timestamp','desc')),_0x112497=await getDocs(_0x202a33);console[_0x526b40(0x26e)](_0x526b40(0x2ec)+_0x112497[_0x526b40(0x1a9)]+'\x20history\x20entries\x20for\x20user\x20'+_0x50a1a1),showNotification(_0x526b40(0x269)+_0x112497['size']+_0x526b40(0x124),_0x526b40(0x1a8));}catch(_0x14c575){console[_0x526b40(0x1f7)]('Error\x20loading\x20user\x20points\x20history:',_0x14c575),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x497555=a4_0x5dc55c;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x2bfa30=collection(db,_0x497555(0x250)),_0xfc1e7f=await getDocs(_0x2bfa30);if(_0xfc1e7f[_0x497555(0x2e5)]){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x33151a=0x0,_0x31a1e7=0x0;const _0x4b5717=writeBatch(db);let _0x3ac373=0x0;return console['log'](_0x497555(0x2ec)+_0xfc1e7f[_0x497555(0x1a9)]+'\x20users\x20to\x20check...'),_0xfc1e7f['forEach'](_0x5b37eb=>{const _0x4a9716=_0x497555,_0x1eafc6=_0x5b37eb['data']();_0x1eafc6['points']===undefined||_0x1eafc6[_0x4a9716(0x35c)]===null?(_0x4b5717['update'](_0x5b37eb[_0x4a9716(0x321)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x33151a++,_0x3ac373++,console['log']('Queued\x20'+(_0x1eafc6[_0x4a9716(0x24d)]||_0x1eafc6['username']||_0x1eafc6['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x31a1e7++,console[_0x4a9716(0x26e)]((_0x1eafc6['displayName']||_0x1eafc6['username']||_0x1eafc6['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x1eafc6[_0x4a9716(0x35c)])),_0x3ac373>=0x1f4&&console['warn'](_0x4a9716(0x31e));}),_0x33151a>0x0?(console['log'](_0x497555(0x307)+_0x33151a+'\x20users...'),await _0x4b5717['commit'](),console['log']('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x33151a+'\x20users')):console[_0x497555(0x26e)]('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0xfc1e7f[_0x497555(0x1a9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x33151a+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x31a1e7),showNotification(_0x497555(0x13b)+_0x33151a+'\x20users.\x20'+_0x31a1e7+'\x20users\x20already\x20had\x20points.','success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0xfc1e7f['size'],'usersUpdated':_0x33151a,'usersAlreadyHadPoints':_0x31a1e7};}catch(_0x48a6ad){console['error']('Error\x20initializing\x20points\x20field:',_0x48a6ad),showNotification(_0x497555(0x309)+_0x48a6ad['message'],_0x497555(0x1f7));throw _0x48a6ad;}}function addPointsMigrationButton(){const _0x37d52e=a4_0x5dc55c,_0x4585b9=document['getElementById']('manage-points');if(!_0x4585b9)return;if(document[_0x37d52e(0x2a0)](_0x37d52e(0x2d5)))return;const _0x17de2c=document['createElement'](_0x37d52e(0x27f));_0x17de2c[_0x37d52e(0x218)]='migration-section',_0x17de2c[_0x37d52e(0x231)]['marginBottom']=_0x37d52e(0x2c3),_0x17de2c['style'][_0x37d52e(0x36a)]='15px',_0x17de2c['style'][_0x37d52e(0x16b)]=_0x37d52e(0x33a),_0x17de2c['style']['border']=_0x37d52e(0x359),_0x17de2c['style']['borderRadius']='5px',_0x17de2c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x566ddb=_0x4585b9['querySelector'](_0x37d52e(0x12b));_0x566ddb&&_0x566ddb['insertAdjacentElement']('afterend',_0x17de2c),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x30d8a0=_0x37d52e;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']=_0x30d8a0(0x11e),this['style']['backgroundColor']=_0x30d8a0(0x2ea),setTimeout(()=>{const _0x48aafa=_0x30d8a0;_0x17de2c['style'][_0x48aafa(0x224)]='none';},0xbb8);}catch(_0x91c47){this['innerHTML']=_0x30d8a0(0x271),this['disabled']=![];}}});}function setupManagePointsSection(){const _0x100d4e=a4_0x5dc55c;console['log'](_0x100d4e(0x2d1)),addPointsMigrationButton();const _0x17a675=document[_0x100d4e(0x2a0)]('points-user-search');_0x17a675&&_0x17a675[_0x100d4e(0x2f7)](_0x100d4e(0x2da),debounce(searchUsersForPoints,0x12c));const _0x4ad023=document[_0x100d4e(0x2a0)]('modify-points-form');_0x4ad023&&_0x4ad023['addEventListener']('submit',handleModifyPoints);const _0x274ecf=document[_0x100d4e(0x2a0)]('award-item-form');_0x274ecf&&_0x274ecf['addEventListener']('submit',handleAwardItem);const _0x30a6bc=document[_0x100d4e(0x2a0)]('points-overview-search');_0x30a6bc&&_0x30a6bc['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x20c086=document[_0x100d4e(0x2a0)]('points-sort-order');_0x20c086&&_0x20c086[_0x100d4e(0x2f7)]('change',sortPointsOverview);const _0x5318cf=document[_0x100d4e(0x2a0)]('refresh-points-overview');_0x5318cf&&_0x5318cf[_0x100d4e(0x2f7)]('click',loadPointsOverview);const _0x47bb2f=document['getElementById']('quick-edit-points-modal');if(_0x47bb2f){console[_0x100d4e(0x26e)]('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x5e3800=_0x47bb2f['querySelector'](_0x100d4e(0x2bc));_0x5e3800?_0x5e3800[_0x100d4e(0x2f7)]('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x100d4e(0x1ad));const _0x51f7b3=document['getElementById']('cancel-quick-edit');_0x51f7b3?_0x51f7b3['addEventListener']('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x3a453e=document[_0x100d4e(0x2a0)]('quick-edit-points-form');_0x3a453e?_0x3a453e['addEventListener'](_0x100d4e(0x1b8),function(_0x350acf){const _0x10503e=_0x100d4e;console['log'](_0x10503e(0x370)),handleQuickEditPoints(_0x350acf);}):console['error'](_0x100d4e(0x169)),_0x47bb2f['addEventListener']('click',function(_0x2524c6){const _0x17106b=_0x100d4e;_0x2524c6['target']===_0x47bb2f&&(console['log'](_0x17106b(0x134)),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x5ef4e7=a4_0x5dc55c;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x1bccb1=document['getElementById']('ribbon-user-search');_0x1bccb1&&_0x1bccb1['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x176189=document['getElementById'](_0x5ef4e7(0x1f4));_0x176189&&_0x176189[_0x5ef4e7(0x2f7)](_0x5ef4e7(0x1a0),searchRibbonUser);const _0x3c76ad=document['getElementById'](_0x5ef4e7(0x2c4));_0x3c76ad&&_0x3c76ad['addEventListener']('submit',addRibbon),_0x1bccb1&&_0x1bccb1['addEventListener'](_0x5ef4e7(0x2a8),function(_0x358783){const _0x227168=_0x5ef4e7;_0x358783['key']==='Enter'&&(_0x358783[_0x227168(0x2b0)](),searchRibbonUser());}),console[_0x5ef4e7(0x26e)]('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x509c52,_0x586b2f,_0x2e6df1,_0x367dc1=''){const _0x42071f=a4_0x5dc55c,_0x1debea=doc(db,_0x42071f(0x250),_0x509c52),_0x27e7f7=await getDoc(_0x1debea);if(!_0x27e7f7['exists']())throw new Error(_0x42071f(0x2c2));const _0x3a679f=_0x27e7f7['data'](),_0x3eabbf=_0x3a679f[_0x42071f(0x35c)]!==undefined?_0x3a679f['points']:0x0;_0x3a679f['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x3a679f[_0x42071f(0x24d)]||_0x3a679f[_0x42071f(0x357)]||'Unknown')),await updateDoc(_0x1debea,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x48722a=_0x3eabbf;switch(_0x586b2f){case'add':_0x48722a=_0x3eabbf+_0x2e6df1;break;case _0x42071f(0x2c5):_0x48722a=Math['max'](0x0,_0x3eabbf-_0x2e6df1);break;case'set':_0x48722a=_0x2e6df1;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x1debea,{'points':_0x48722a,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x42071f(0x1ca)),{'userId':_0x509c52,'userEmail':_0x3a679f[_0x42071f(0x357)]||'unknown','displayName':_0x3a679f['displayName']||_0x3a679f['username']||'Unknown\x20User','action':_0x586b2f,'amount':_0x2e6df1,'previousPoints':_0x3eabbf,'newPoints':_0x48722a,'reason':_0x367dc1,'adminEmail':auth[_0x42071f(0x282)]['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x16f504=a4_0x5dc55c,_0x5d5ad5=document['getElementById']('points-overview-table-body');if(!_0x5d5ad5)return;_0x5d5ad5['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x35dd4d=collection(db,'userProfiles'),_0x15bd8e=await getDocs(_0x35dd4d);if(_0x15bd8e['empty']){_0x5d5ad5['innerHTML']=_0x16f504(0x29c);return;}const _0x451796=[];let _0x5d954c=0x0;_0x15bd8e['forEach'](_0x22422c=>{const _0x100b2f=_0x16f504,_0x5a1728=_0x22422c[_0x100b2f(0x1ec)](),_0x912e5f=_0x5a1728[_0x100b2f(0x35c)]!==undefined?_0x5a1728['points']:0x0;_0x5a1728[_0x100b2f(0x35c)]===undefined&&_0x5d954c++,_0x451796[_0x100b2f(0x339)]({'id':_0x22422c['id'],..._0x5a1728,'points':_0x912e5f});}),_0x5d954c>0x0&&(console[_0x16f504(0x26e)]('Found\x20'+_0x5d954c+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x5d954c+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.',_0x16f504(0x1a8))),_0x451796['sort']((_0x2196ce,_0xd4a1fb)=>(_0xd4a1fb[_0x16f504(0x35c)]||0x0)-(_0x2196ce['points']||0x0)),window['allUsersPoints']=_0x451796,renderPointsOverview(_0x451796);}catch(_0xb28d02){console[_0x16f504(0x1f7)]('Error\x20loading\x20points\x20overview:',_0xb28d02),_0x5d5ad5['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0xb28d02[_0x16f504(0x33b)]+'</td></tr>';}}async function loadRibbonsData(){const _0x735c52=a4_0x5dc55c,_0x51077e=document[_0x735c52(0x2a0)]('ribbons-overview-table-body');if(!_0x51077e)return;_0x51077e[_0x735c52(0x245)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x48272f,_0x525813,_0x245feb]=await Promise[_0x735c52(0x1fe)]([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x51077e['innerHTML']='';const _0x564a32=(_0x12ffd6,_0x35acc4)=>{_0x12ffd6['forEach'](_0x4b6994=>{const _0x1e9256=a4_0x1ba5,_0xc674ce=_0x4b6994['data'](),_0x454fe9=_0xc674ce[_0x1e9256(0x172)]||{},_0x1d4f0e=Object['keys'](_0x454fe9)[_0x1e9256(0x1be)],_0x4ad01e=document['createElement']('tr');_0x4ad01e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xc674ce['username']||'Unknown')+_0x1e9256(0x262)+_0x35acc4['toLowerCase']()+'\x22>'+_0x35acc4+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d4f0e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xc674ce[_0x1e9256(0x292)]?new Date(_0xc674ce['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+_0x1e9256(0x195)+_0xc674ce[_0x1e9256(0x2c0)]+'\x22\x20data-ladder=\x22'+_0x35acc4+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x51077e['appendChild'](_0x4ad01e);});};_0x564a32(_0x48272f,'D1'),_0x564a32(_0x525813,'D2'),_0x564a32(_0x245feb,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x5d0c7e=>{const _0x2280b2=_0x735c52;_0x5d0c7e['addEventListener'](_0x2280b2(0x1a0),function(){const _0x25db84=_0x2280b2,_0xbde3ec=this['dataset'][_0x25db84(0x2c0)],_0x32fc6a=this[_0x25db84(0x266)][_0x25db84(0x149)];editUserRibbons(_0xbde3ec,_0x32fc6a);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully',_0x735c52(0x27b));}catch(_0x4ff5b4){console['error']('Error\x20loading\x20ribbons:',_0x4ff5b4),_0x51077e['innerHTML']=_0x735c52(0x123),showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x5c4086=a4_0x5dc55c,_0x1f899f=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x1f899f){showNotification('Please\x20enter\x20a\x20username',_0x5c4086(0x1f7));return;}try{const [_0x423d64,_0x478809,_0x426881]=await Promise[_0x5c4086(0x1fe)]([getDoc(doc(db,'playerRibbons',_0x1f899f)),getDoc(doc(db,'playerRibbonsD2',_0x1f899f)),getDoc(doc(db,'playerRibbonsD3',_0x1f899f))]);let _0x5d530b=null,_0x5b4ce0=null;if(_0x423d64[_0x5c4086(0x19d)]())_0x5d530b='D1',_0x5b4ce0=_0x423d64['data']();else{if(_0x478809['exists']())_0x5d530b='D2',_0x5b4ce0=_0x478809['data']();else _0x426881['exists']()&&(_0x5d530b='D3',_0x5b4ce0=_0x426881['data']());}_0x5d530b?(document['getElementById']('current-ribbon-user')['textContent']=_0x1f899f,document['getElementById']('ribbon-target-user')['value']=_0x1f899f,document['getElementById']('ribbon-target-ladder')['value']=_0x5d530b,document[_0x5c4086(0x2a0)]('user-ribbon-management')['style']['display']=_0x5c4086(0x29d),displayCurrentRibbons(_0x5b4ce0['ribbons']||{}),showNotification('Found\x20'+_0x1f899f+'\x20in\x20'+_0x5d530b+_0x5c4086(0x2c1),'success')):showNotification('User\x20'+_0x1f899f+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x9ab437){console[_0x5c4086(0x1f7)]('Error\x20searching\x20user:',_0x9ab437),showNotification('Error\x20searching\x20for\x20user',_0x5c4086(0x1f7));}}function displayCurrentRibbons(_0x367271){const _0x33efba=a4_0x5dc55c,_0x3c38ae=document[_0x33efba(0x2a0)]('current-ribbons-list');if(!_0x3c38ae)return;_0x3c38ae['innerHTML']='';if(Object['keys'](_0x367271)['length']===0x0){_0x3c38ae['innerHTML']=_0x33efba(0x25f);return;}Object['entries'](_0x367271)['forEach'](([_0x17804c,_0xbd348a])=>{const _0x59fae3=_0x33efba,_0x45e681=document['createElement']('div');_0x45e681['className']='ribbon-item',_0x45e681['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x17804c+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0xbd348a[_0x59fae3(0x2d0)]||0x1)+_0x59fae3(0x248)+(_0xbd348a['awardedAt']?new Date(_0xbd348a['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x17804c+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3c38ae['appendChild'](_0x45e681);}),document['querySelectorAll'](_0x33efba(0x14f))['forEach'](_0x1024f6=>{_0x1024f6['addEventListener']('click',function(){const _0x32428f=this['dataset']['ribbon'];removeRibbon(_0x32428f);});});}async function addRibbon(_0x3ba749){const _0x1b39fb=a4_0x5dc55c;_0x3ba749[_0x1b39fb(0x2b0)]();const _0x21ebd4=document['getElementById']('ribbon-target-user')[_0x1b39fb(0x2a3)],_0x135927=document['getElementById']('ribbon-target-ladder')['value'],_0x2bed5a=document[_0x1b39fb(0x2a0)](_0x1b39fb(0x1b7))[_0x1b39fb(0x2a3)],_0x34ac55=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x21ebd4||!_0x135927||!_0x2bed5a||!_0x34ac55){showNotification('Please\x20fill\x20all\x20fields',_0x1b39fb(0x1f7));return;}try{const _0x2d4fba='playerRibbons'+(_0x135927==='D1'?'':_0x135927),_0x40c349=doc(db,_0x2d4fba,_0x21ebd4),_0x39296f=await getDoc(_0x40c349),_0x4066cf=_0x39296f['exists']()?_0x39296f['data']()['ribbons']||{}:{};_0x4066cf[_0x2bed5a]={'level':_0x34ac55,'awardedAt':serverTimestamp()},await setDoc(_0x40c349,{'username':_0x21ebd4,'ladder':_0x135927,'ribbons':_0x4066cf,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x1b39fb(0x220)+_0x2bed5a+_0x1b39fb(0x27c)+_0x34ac55+'\x20to\x20'+_0x21ebd4,'success'),displayCurrentRibbons(_0x4066cf),document[_0x1b39fb(0x2a0)]('ribbon-type-select')['value']='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x58770e){console[_0x1b39fb(0x1f7)](_0x1b39fb(0x361),_0x58770e),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x5bb7c5){const _0x51a1bf=a4_0x5dc55c,_0xa4709d=document['getElementById']('ribbon-target-user')[_0x51a1bf(0x2a3)],_0x2bafa7=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x5bb7c5+_0x51a1bf(0x337)+_0xa4709d+'?'))return;try{const _0x3b4bed='playerRibbons'+(_0x2bafa7==='D1'?'':_0x2bafa7),_0x369be7=doc(db,_0x3b4bed,_0xa4709d),_0x5df6c0=await getDoc(_0x369be7),_0x2947c2=_0x5df6c0[_0x51a1bf(0x19d)]()?_0x5df6c0['data']()['ribbons']||{}:{};delete _0x2947c2[_0x5bb7c5],await setDoc(_0x369be7,{'username':_0xa4709d,'ladder':_0x2bafa7,'ribbons':_0x2947c2,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x5bb7c5+'\x20from\x20'+_0xa4709d,_0x51a1bf(0x27b)),displayCurrentRibbons(_0x2947c2);}catch(_0x172193){console[_0x51a1bf(0x1f7)]('Error\x20removing\x20ribbon:',_0x172193),showNotification('Error\x20removing\x20ribbon',_0x51a1bf(0x1f7));}}function editUserRibbons(_0x4644c2,_0x20bae5){const _0x1aeb89=a4_0x5dc55c;document['getElementById']('ribbon-user-search')[_0x1aeb89(0x2a3)]=_0x4644c2,searchRibbonUser();}