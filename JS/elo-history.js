const a14_0x5208d9=a14_0x2eb0,a14_0x197a29=(function(){let _0x11a440=!![];return function(_0x1ceed2,_0x18b401){const _0x3e93a5=_0x11a440?function(){if(_0x18b401){const _0x4f4e29=_0x18b401['apply'](_0x1ceed2,arguments);return _0x18b401=null,_0x4f4e29;}}:function(){};return _0x11a440=![],_0x3e93a5;};}()),a14_0x211a02=a14_0x197a29(this,function(){const _0x4e0275=a14_0x2eb0,_0x26c05b=function(){let _0x171005;try{_0x171005=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1f2b93){_0x171005=window;}return _0x171005;},_0x37c948=_0x26c05b(),_0x305f02=_0x37c948[_0x4e0275(0x195)]=_0x37c948['console']||{},_0xae075f=[_0x4e0275(0x18d),_0x4e0275(0x18b),'info','error','exception',_0x4e0275(0x191),_0x4e0275(0x18f)];for(let _0xd40c5b=0x0;_0xd40c5b<_0xae075f['length'];_0xd40c5b++){const _0x2ebcdf=a14_0x197a29[_0x4e0275(0x190)][_0x4e0275(0x18a)]['bind'](a14_0x197a29),_0x4e91eb=_0xae075f[_0xd40c5b],_0x1fcb13=_0x305f02[_0x4e91eb]||_0x2ebcdf;_0x2ebcdf['__proto__']=a14_0x197a29['bind'](a14_0x197a29),_0x2ebcdf['toString']=_0x1fcb13['toString']['bind'](_0x1fcb13),_0x305f02[_0x4e91eb]=_0x2ebcdf;}});a14_0x211a02();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':a14_0x5208d9(0x18c),'elo':0x578},{'name':'Unranked','elo':0x4b0}];function a14_0x22db(){const _0x15801b=['prototype','warn','Bronze','log','desc','trace','constructor','table','previousElo','Unknown\x20Player','data','console','error','eloHistory'];a14_0x22db=function(){return _0x15801b;};return a14_0x22db();}async function getUsernameById(_0x3d622b){const _0x2568a0=a14_0x5208d9;try{if(!_0x3d622b)return _0x2568a0(0x193);const _0x2b239=await getDoc(doc(db,'players',_0x3d622b));return _0x2b239['exists']()?_0x2b239[_0x2568a0(0x194)]()['username']:_0x2568a0(0x193);}catch(_0x1ab654){return console['error']('Error\x20fetching\x20username:',_0x1ab654),_0x2568a0(0x193);}}export async function recordEloChange({playerId:_0x729b1,previousElo:_0x3d3c9b,newElo:_0x4c0325,opponentId:_0xd6cee7,matchResult:_0x4d8bee,previousPosition:_0x316270,newPosition:_0x5963d3,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x462729}){const _0x87b554=a14_0x5208d9;try{const _0x334cf6=doc(collection(db,_0x87b554(0x197)));let _0xb6a1d4='match';if(isPromotion)_0xb6a1d4='promotion';if(isDemotion)_0xb6a1d4='demotion';let _0x195573='Unranked';if(_0x4c0325>=0x834)_0x195573='Emerald';else{if(_0x4c0325>=0x708)_0x195573='Gold';else{if(_0x4c0325>=0x640)_0x195573='Silver';else{if(_0x4c0325>=0x578)_0x195573='Bronze';}}}return await setDoc(_0x334cf6,{'type':_0xb6a1d4,'player':_0x729b1,'opponent':_0xd6cee7,'previousElo':_0x3d3c9b,'newElo':_0x4c0325,'change':_0x4c0325-_0x3d3c9b,'matchResult':_0x4d8bee,'previousPosition':_0x316270,'newPosition':_0x5963d3,'rankAchieved':_0x195573,'timestamp':_0x462729}),console['log']('ELO\x20history\x20recorded\x20for\x20'+_0x729b1),!![];}catch(_0x3e94b8){console[_0x87b554(0x196)]('Error\x20recording\x20ELO\x20history:',_0x3e94b8);throw _0x3e94b8;}}export async function getEloHistory(){const _0x12792f=a14_0x5208d9;try{const _0x490383=collection(db,'eloHistory'),_0x9c439c=query(_0x490383,orderBy('timestamp',_0x12792f(0x18e))),_0x4bc033=await getDocs(_0x9c439c),_0x1b91ae=_0x4bc033['docs']['map'](async _0x399346=>{const _0x234abd=_0x12792f,_0x42d227=_0x399346[_0x234abd(0x194)](),[_0x529e5c,_0x457a6b]=await Promise['all']([getUsernameById(_0x42d227['player']),getUsernameById(_0x42d227['opponent'])]);return{..._0x42d227,'playerUsername':_0x529e5c,'opponentUsername':_0x457a6b,'change':_0x42d227['newElo']-_0x42d227[_0x234abd(0x192)],'timestamp':_0x42d227['timestamp']};}),_0x102a39=await Promise['all'](_0x1b91ae);return{'entries':_0x102a39};}catch(_0x2f84e0){console['error']('Error\x20fetching\x20ELO\x20history:',_0x2f84e0);throw _0x2f84e0;}}function a14_0x2eb0(_0x580d4c,_0x399e01){const _0x211a02=a14_0x22db();return a14_0x2eb0=function(_0x197a29,_0x3a5bc5){_0x197a29=_0x197a29-0x18a;let _0x22db1d=_0x211a02[_0x197a29];return _0x22db1d;},a14_0x2eb0(_0x580d4c,_0x399e01);}export function resetPagination(){lastVisible=null;}