const a6Y=a6b;(function(a,b){const X=a6b,c=a();while(!![]){try{const d=-parseInt(X(0x241))/0x1+-parseInt(X(0x217))/0x2*(parseInt(X(0x234))/0x3)+-parseInt(X(0x1cd))/0x4+-parseInt(X(0x168))/0x5+-parseInt(X(0x183))/0x6+-parseInt(X(0x210))/0x7*(-parseInt(X(0x205))/0x8)+parseInt(X(0x1aa))/0x9;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a6a,0x6e094));import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':a6Y(0x1b2),'muteFromDate':new Date(a6Y(0x19e))['getTime']()}];function isUsernameMuted(a,b){const Z=a6Y;if(!a)return![];const c=mutedUsers['find'](e=>e['username']===a);if(!c)return![];if(!b)return!![];const d=b instanceof Date?b['getTime']():b['seconds']?b['seconds']*0x3e8:Date[Z(0x220)]();return d>=c['muteFromDate'];}function filterComment(a,b,c){const a0=a6Y;if(!a)return'-';if(isUsernameMuted(b,c))return a0(0x214);return a;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(a,b,c){const a1=a6Y,d='u:'+(c[a1(0x1e7)]||'');return a1(0x19d)+a+'_p'+b+'_'+d;}function getCachedPage(a){const a2=a6Y,b=sessionStorage['getItem'](a);if(b)try{return JSON[a2(0x230)](b);}catch(c){return console[a2(0x197)]('Failed\x20to\x20parse\x20cache:',c),sessionStorage[a2(0x21a)](a),null;}return null;}function cachePage(a,b){const a3=a6Y;try{sessionStorage['setItem'](a,JSON['stringify'](b));}catch(c){console['error'](a3(0x189),c);}}function getEloColor(a){const a4=a6Y,b=Number(a);if(b>=0x7d0)return'#50C878';else{if(b>=0x708)return a4(0x222);else{if(b>=0x640)return'#b9f1fc';else{if(b>=0x578)return a4(0x184);else return a4(0x167);}}}}function formatDate(a,b=![]){const a5=a6Y;if(!a||!a[a5(0x246)])return'N/A';const c=new Date(a['seconds']*0x3e8);return b?c['toLocaleString']():c[a5(0x1d4)]();}function truncateComment(a,b=0x1e){const a6=a6Y;if(!a)return'-';if(a[a6(0x161)]<=b)return a;return a['substring'](0x0,b)+'...';}function formatCommentDate(a){const a7=a6Y;if(!a||!a[a7(0x246)])return'';const b=new Date(a['seconds']*0x3e8),c=new Date(),d=Math['abs'](c-b),e=Math['floor'](d/(0x3e8*0x3c*0x3c*0x18));if(e===0x0)return'Today';else{if(e===0x1)return a7(0x16b);else return e<0x7?e+a7(0x223):b[a7(0x1d4)]();}}function setLoadingIndicator(a){const a8=a6Y,b=document[a8(0x1cc)]('loading-indicator');if(b)b['style']['display']=a?a8(0x1c3):a8(0x1a0);}export function updatePreviewLadderModeUI(){const a9=a6Y,a=document['getElementById'](a9(0x17c)),b=document['getElementById']('preview-d1-button'),c=document['getElementById'](a9(0x1ad)),d=document[a9(0x1cc)]('preview-d3-button');if(a)a['textContent']=previewState[a9(0x1fa)];if(b)b[a9(0x1d2)][a9(0x190)]('active',previewState[a9(0x1fa)]==='D1');if(c)c[a9(0x1d2)]['toggle'](a9(0x1d6),previewState['currentMode']==='D2');if(d)d['classList']['toggle'](a9(0x1d6),previewState['currentMode']==='D3');}function updatePreviewPaginationControls(a){const aa=a6Y,b=document['getElementById'](aa(0x208)),c=document[aa(0x1cc)](aa(0x19b)),d=document['getElementById']('previewPageInfo');if(!b||!c||!d)return;d[aa(0x212)]='Page\x20'+previewState['currentPage'],b[aa(0x1a3)]=previewState[aa(0x1af)]<=0x1,c[aa(0x1a3)]=!a;}function setPreviewLoadingState(a){const ab=a6Y;previewState[ab(0x16f)]=a,setLoadingIndicator(a);const b=document[ab(0x1cc)](ab(0x201)),c=b?b[ab(0x1fd)](ab(0x18f)):null,d=document['getElementById']('previewPrevPage'),e=document[ab(0x1cc)](ab(0x19b)),f=document['getElementById'](ab(0x1be)),g=document['getElementById'](ab(0x1ad)),h=document[ab(0x1cc)](ab(0x1c9)),i=document[ab(0x1cc)]('clearFilterBtn');if(c&&!a)c[ab(0x1f2)]['display']='none';else c&&a&&(c[ab(0x1f2)][ab(0x1a4)]='block');!a&&b&&!b[ab(0x1fd)](ab(0x225))&&!b['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(b['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState[ab(0x1e7)]?ab(0x17f):'')+'.</div>');if(d)d[ab(0x1a3)]=a||previewState['currentPage']<=0x1;if(e)e[ab(0x1a3)]=a;if(f)f['disabled']=a;if(g)g['disabled']=a;if(h)h['disabled']=a;if(i)i['disabled']=a;}function applyClientFilters(a){const ac=a6Y;if(!previewState['filterUsername'])return a;const b=previewState[ac(0x1e7)]['toLowerCase']();return a[ac(0x1b9)](c=>{const ad=ac,d=(c[ad(0x232)]||'')[ad(0x1ab)](),e=(c[ad(0x20e)]||'')['toLowerCase']();return d[ad(0x1d7)](b)||e['includes'](b);});}function applyEnhancedClientFilters(a){const ae=a6Y;if(!hasEnhancedFilters())return a;return a[ae(0x1b9)](b=>{const af=ae;if(previewState['enhancedFilters']['pilots']){const c=previewState['enhancedFilters']['pilots']['toLowerCase'](),d=(b[af(0x232)]||'')[af(0x1ab)](),e=(b[af(0x20e)]||'')['toLowerCase']();if(!d['includes'](c)&&!e['includes'](c))return![];}if(previewState['enhancedFilters'][af(0x23d)]){const f=previewState[af(0x25c)][af(0x23d)]['toLowerCase'](),g=(b[af(0x1ac)]||'')['toLowerCase']();if(!g['includes'](f))return![];}if(previewState[af(0x25c)][af(0x191)]['length']>0x0){const h=b[af(0x1cb)]||af(0x175);if(!previewState[af(0x25c)]['subgames'][af(0x1d7)](h))return![];}return!![];});}function hasEnhancedFilters(){const ag=a6Y;return previewState[ag(0x25c)][ag(0x200)]||previewState['enhancedFilters']['levels']||previewState['enhancedFilters']['subgames']['length']>0x0;}function clearEnhancedFilters(){const ah=a6Y;previewState[ah(0x25c)]={'pilots':'','levels':'','subgames':[]},document[ah(0x1cc)]('filter-pilots')['value']='',document[ah(0x1cc)](ah(0x23f))[ah(0x188)]='';const a=document['getElementById']('filter-subgames');for(let b of a['options']){b[ah(0x194)]=![];}}function jumpToPage(a){const ai=a6Y,b=document['getElementById']('jump-to-page'),c=previewState[ai(0x1af)];let d=c;switch(a){case ai(0x174):d=0x1;break;case ai(0x1f3):d=Math[ai(0x242)](c+0xa,previewState[ai(0x1ce)]||c+0xa);break;case'+1':d=c+0x1;break;case'+5':d=c+0x5;break;case'+10':d=c+0xa;break;case'-1':d=Math[ai(0x242)](0x1,c-0x1);break;case'-5':d=Math['max'](0x1,c-0x5);break;case'-10':d=Math[ai(0x242)](0x1,c-0xa);break;case ai(0x1e0):const e=parseInt(b[ai(0x188)]);e&&e>0x0&&(d=e,b[ai(0x188)]='');break;}d!==c&&d>0x0&&(previewState[ai(0x1af)]=d,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(a=a6Y(0x169)){const aj=a6Y,b=document['getElementById']('recent-matches-preview'),c=document[aj(0x1cc)](aj(0x253));if(previewState['isLoading']||!b||!c)return;a==='current'&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object[aj(0x243)](sessionStorage)[aj(0x1ee)](k=>{const ak=aj;k['includes']('previewCache_'+previewState[ak(0x1fa)])&&sessionStorage[ak(0x21a)](k);}));let d=previewState['currentPage'];if(a===aj(0x258))d++;else{if(a==='prev')d--;else a===aj(0x169)&&(d=0x1,previewState['firstVisible']=null,previewState[aj(0x21c)]=null);}if(d<0x1)d=0x1;const e=previewState['currentPage'];previewState['currentPage']=d,updatePreviewPaginationControls(!![]);const f={'filterUsername':previewState[aj(0x1e7)]},g=getCacheKey(previewState[aj(0x1fa)],d,f),h=a!==aj(0x169)?getCachedPage(g):null;if(h){console['log'](aj(0x173)+d+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(h['docsData']),updatePreviewPaginationControls(h['hasNextPage']),setPreviewLoadingState(![]);return;}console[aj(0x1c0)](aj(0x24c)+d+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),b[aj(0x1e8)]='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const i=previewState['currentMode']==='D1'?aj(0x164):previewState[aj(0x1fa)]==='D2'?aj(0x238):aj(0x226),j=previewState[aj(0x1fa)]==='D1'?'createdAt':aj(0x24e);try{const k=collection(window['db'],i);let l=[orderBy(j,'desc')];if(d===0x1)console[aj(0x1c0)](aj(0x216)),l[aj(0x171)](limit(previewState['matchesPerPage']));else{if(a===aj(0x258)&&previewState['lastVisible'])console[aj(0x1c0)](aj(0x25a)),l[aj(0x171)](startAfter(previewState[aj(0x21c)])),l['push'](limit(previewState[aj(0x1fe)]));else{console['log']('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const v=d*previewState['matchesPerPage'];l[aj(0x171)](limit(v));}}const m=query(k,...l),n=await getDocs(m);let o=n[aj(0x162)];if(d>0x1&&a!==aj(0x258)){const w=(d-0x1)*previewState[aj(0x1fe)];o=o['slice'](w,w+previewState[aj(0x1fe)]);}if(o[aj(0x161)]===0x0){console[aj(0x1c0)]('No\x20results\x20found\x20for\x20this\x20page');a===aj(0x258)&&(previewState[aj(0x1af)]=e,updatePreviewPaginationControls(![]));b[aj(0x1e8)]='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?aj(0x17f):'')+'.</div>',setPreviewLoadingState(![]);return;}previewState[aj(0x17e)]=o[0x0],previewState['lastVisible']=o[o[aj(0x161)]-0x1];const r=o['map'](x=>({'id':x['id'],...x[aj(0x1c5)]()}));let s=![];if(o['length']===previewState[aj(0x1fe)]){const x=query(k,orderBy(j,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),y=await getDocs(x);s=!y[aj(0x224)];}const t=applyClientFilters(r),u={'docsData':r,'hasNextPage':s};cachePage(getCacheKey(previewState[aj(0x1fa)],previewState[aj(0x1af)],f),u);if(d>0x1&&a!==aj(0x258))for(let z=0x1;z<d;z++){const A=(z-0x1)*previewState[aj(0x1fe)],B=A+previewState[aj(0x1fe)],C=n['docs'][aj(0x1bb)](A,B);if(C[aj(0x161)]>0x0){const D=C['map'](F=>({'id':F['id'],...F['data']()})),E=!![];cachePage(getCacheKey(previewState['currentMode'],z,f),{'docsData':D,'hasNextPage':E}),console[aj(0x1c0)]('Cached\x20intermediary\x20page\x20'+z);}}t['length']===0x0&&previewState[aj(0x1e7)]?b[aj(0x1e8)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState[aj(0x1e7)]+'\x22</div>':renderMatchCards(t),updatePreviewPaginationControls(s);}catch(F){console[aj(0x197)]('Error\x20fetching\x20'+previewState[aj(0x1fa)]+'\x20matches:',F),b['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+F[aj(0x17a)]+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=e;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(a){const al=a6Y,b=document[al(0x1cc)]('recent-matches-preview'),c=document['getElementById'](al(0x253));if(!b||!c)return;!b['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(b['innerHTML']='');if(!a||a['length']===0x0){if(!b['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const h=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?'\x20matching\x20filters':'';b['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+h+al(0x1dd);}return;}const d=applyEnhancedClientFilters(a);if(d[al(0x161)]===0x0){b['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const e=d[al(0x221)](i=>getAllCommentsForMatch(i['id']));let f=[];try{f=await Promise[al(0x1ec)](e);}catch(i){console[al(0x197)](al(0x16e),i),f=d[al(0x221)](()=>[]);}const g={};f[al(0x1ee)]((j,k)=>{g[d[k]['id']]=j||[];}),d[al(0x1ee)](j=>{const am=al,k=c[am(0x180)][am(0x23a)](!![]),l=k['querySelector']('.match-display-wrapper'),m=k['querySelector']('.match-card'),n=getEloRankClass(j[am(0x1dc)]);m['classList']['add']('winner-'+n),m['querySelector']('.match-map')[am(0x212)]=j['mapPlayed']||am(0x166),m[am(0x1fd)]('.match-date')[am(0x212)]=formatDate(j['approvedAt']||j[am(0x1e9)]);const o=m[am(0x1fd)]('.player.winner\x20.player-name');o['textContent']=j[am(0x232)]||'Unknown',o['style'][am(0x1f4)]=getEloColor(j[am(0x1dc)]),m[am(0x1fd)]('.player.winner\x20.player-score')['textContent']=j[am(0x1f5)]??0x0;const p=m[am(0x1fd)](am(0x18c)),q=j['winnerSuicides']||0x0;p[am(0x212)]='S:\x20'+q;const r=m['querySelector']('.player.loser\x20.player-name');r['textContent']=j[am(0x20e)]||'Unknown',r[am(0x1f2)]['color']=getEloColor(j['loserOldElo']),m[am(0x1fd)](am(0x1fb))[am(0x212)]=j[am(0x1f8)]??0x0;const s=m['querySelector']('.player.loser\x20.player-suicides'),t=j['loserSuicides']||0x0;s[am(0x212)]='S:\x20'+t;const u=m[am(0x1fd)]('.match-subgame');if(u){if(j[am(0x1cb)]&&j[am(0x1cb)][am(0x196)]()!==''){u[am(0x212)]=j['subgameType'],u['style']['display']=am(0x1c3);const E=getSubgameClass(j['subgameType']);E&&u[am(0x1d2)]['add'](E);}else u['textContent']=am(0x175),u['style']['display']=am(0x1c3),u['style'][am(0x207)]=am(0x1ea);}const v=m[am(0x1fd)](am(0x18e)),w=m[am(0x1fd)](am(0x244)),x=j['winnerComment']||'',y=j['loserComment']||'',z=j[am(0x24e)]||j['createdAt'],A=filterComment(x,j['winnerUsername'],z),B=filterComment(y,j['loserUsername'],z);v[am(0x212)]='\x22'+truncateComment(x)+'\x22',w[am(0x212)]='\x22'+truncateComment(y)+'\x22';x&&!isUsernameMuted(j[am(0x232)],z)?v[am(0x18d)]=()=>showPreviewCommentPopup(A,j[am(0x232)]||am(0x1e4),getEloColor(j['winnerOldElo'])):(v[am(0x212)]=A===am(0x214)?'Muted.':'-',v['style']['cursor']=am(0x255),v['onclick']=null);y&&!isUsernameMuted(j[am(0x20e)])?w['onclick']=()=>showPreviewCommentPopup(B,j['loserUsername']||'Loser',getEloColor(j[am(0x20a)])):(w['textContent']=B===am(0x214)?'Muted.':'-',w['style'][am(0x254)]=am(0x255),w[am(0x18d)]=null);const C=l?.[am(0x1fd)]('.community-comments-section');if(!C)console[am(0x21e)]('Comments\x20section\x20not\x20found\x20in\x20template');else{const F=C['querySelector']('.comments-container'),G=F?.['querySelector'](am(0x1b4)),H=C['querySelector']('.add-comment-btn');if(F){while(F['firstChild']&&F['firstChild']!==G){F['removeChild'](F['firstChild']);}H&&H['addEventListener']('click',()=>{showAddCommentPopup(j['id']);});const I=g[j['id']]||[];if(I[am(0x161)]>0x0){if(G)G[am(0x1f2)]['display']=am(0x1a0);const J=(K,L)=>{const an=am,M=K['split']('\x20');if(M[an(0x161)]<=L)return K;return M[an(0x1bb)](0x0,L)['join']('\x20')+an(0x199);};I['forEach'](K=>{const ao=am,L=document[ao(0x18b)]('div');if(K[ao(0x192)]==='demo'){L['className']=ao(0x24d),L['innerHTML']=ao(0x1bc)+K['demoLink']+ao(0x170)+K[ao(0x213)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(K['description']||ao(0x1a6))+ao(0x1c4);const M=window[ao(0x25d)]['currentUser'],N=M&&K[ao(0x240)]===M['uid'];if(N){const O=document['createElement'](ao(0x1c1));O['className']=ao(0x1f6),O['innerHTML']='×',O['setAttribute'](ao(0x248),ao(0x1d3)),O[ao(0x25b)](ao(0x182),P=>{P['preventDefault'](),P['stopPropagation'](),deleteComment(K['id'],L);}),L['appendChild'](O);}}else{L['className']=ao(0x18a);const P=isUsernameMuted(K[ao(0x213)],K[ao(0x1d9)]),Q=P?ao(0x214):J(K['text']||'',0xf),R=K[ao(0x213)]||ao(0x177),S=window[ao(0x25d)]['currentUser'],T=S&&K[ao(0x240)]===S[ao(0x1b8)];let U='';T&&(U=ao(0x23c));L[ao(0x1e8)]=U+ao(0x1a2)+R+':</strong>\x20\x22'+Q+'\x22';if(T){const V=L[ao(0x1fd)](ao(0x1a8));V&&V[ao(0x25b)](ao(0x182),W=>{W['stopPropagation'](),deleteComment(K['id'],L);});}!P?L[ao(0x25b)](ao(0x182),()=>{showFullCommentLightbox(K);}):L[ao(0x1f2)][ao(0x254)]='default';}F['insertBefore'](L,F[ao(0x24f)]);});}else{if(G)G[am(0x1f2)][am(0x1a4)]=am(0x1c3);}}}const D=m['querySelector'](am(0x235));if(D){const K=m[am(0x1fd)](am(0x1ff)),L=m['querySelector'](am(0x19c)),M=j[am(0x16d)]||null,N=j['loserDemoLink']||j['demoLink']||null;console['log'](am(0x1d5)+j['id']+am(0x16a),{'winner':M,'loser':N}),K&&(M?(K['href']=M,K['style'][am(0x1a4)]='flex',K[am(0x259)]=j[am(0x232)]+'\x27s\x20Demo'):K[am(0x1f2)][am(0x1a4)]='none'),L&&(N?(L['href']=N,L[am(0x1f2)][am(0x1a4)]=am(0x1d8),L[am(0x259)]=j['loserUsername']+am(0x178)):L['style'][am(0x1a4)]='none'),M&&K||N&&L?D[am(0x1f2)]['display']='flex':D[am(0x1f2)]['display']='none';}b[am(0x247)](k);});}function getSubgameClass(a){const ap=a6Y,b={'Fusion\x20Match':ap(0x181),'≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':ap(0x1a1),'Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':'blind-match','Rematch':ap(0x176),'Disorientation':ap(0x256),'Ratting':ap(0x195),'Altered\x20Powerups':'altered-powerups','Mega\x20Match':ap(0x219),'Dogfight':'dogfight','Gauss\x20and\x20Mercs':ap(0x218)};return b[a]||'';}async function deleteComment(a,b){const aq=a6Y,c=window['auth'][aq(0x1ba)];if(!c){alert(aq(0x179));return;}if(!confirm(aq(0x193)))return;try{const d=doc(window['db'],aq(0x1b6),a),e=await getDoc(d);if(!e['exists']()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const f=e['data']();if(f['userId']!==c['uid']){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(d);if(b&&b[aq(0x1fc)]){b['parentNode']['removeChild'](b);const g=b[aq(0x17d)](aq(0x1ae));if(g&&!g[aq(0x1fd)]('.comment-item')){const h=g['querySelector']('.no-comments-message');if(h)h['style']['display']='block';}}console[aq(0x1c0)](aq(0x215));}catch(i){console['error']('Error\x20deleting\x20comment:',i),alert('Failed\x20to\x20delete\x20comment:\x20'+i['message']);}}async function getAllCommentsForMatch(a){const ar=a6Y;if(!a)return[];try{const b=collection(window['db'],ar(0x1b6)),c=query(b,where(ar(0x22e),'==',a),orderBy('timestamp',ar(0x203))),d=await getDocs(c);if(d[ar(0x224)])return[];return d[ar(0x162)][ar(0x221)](e=>({'id':e['id'],...e[ar(0x1c5)]()}));}catch(e){return console[ar(0x197)](ar(0x1eb),e),[];}}async function submitComment(a){const as=a6Y;a[as(0x1d1)]();if(!window[as(0x25d)]||!window['db']){console['error'](as(0x1c6)),alert(as(0x172));return;}const b=window['auth'][as(0x1ba)];if(!b){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const c=document['getElementById']('commentMatchId')?.[as(0x188)],d=document[as(0x1cc)]('commentText')?.['value']?.[as(0x196)]();if(!c||!d){alert(as(0x1a9));return;}const e=d[as(0x1b0)](/\s+/)['filter'](g=>g[as(0x161)]>0x0)['length'];if(e>0xf){alert(as(0x1ef));return;}const f=document['querySelector'](as(0x209));f&&(f['disabled']=!![],f['textContent']='Submitting...');try{let g='Anonymous';try{const j=doc(window['db'],'userProfiles',b['uid']),k=await getDoc(j);if(k[as(0x22d)]()){const l=k['data']();l[as(0x213)]&&(g=l[as(0x213)]);}g===as(0x177)&&b['displayName']&&(g=b['displayName']);}catch(m){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',m),b[as(0x1b7)]&&(g=b[as(0x1b7)]);}const h={'matchId':c,'userId':b['uid'],'username':g,'text':d,'timestamp':serverTimestamp()};console['log']('Submitting\x20comment\x20as:',g);const i=collection(window['db'],'matchComments');await addDoc(i,h),console['log'](as(0x202)),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(n){console[as(0x197)](as(0x22f),n),alert('Failed\x20to\x20add\x20comment:\x20'+n['message']),f&&(f['disabled']=![],f[as(0x212)]='Submit');}}function closeAddCommentPopup(){const at=a6Y,a=document[at(0x1cc)](at(0x163)),b=document[at(0x1cc)](at(0x24b));if(a)a['style']['display']=at(0x1a0);if(b)b['style'][at(0x1a4)]='none';}function showAddCommentPopup(a){const au=a6Y,b=window['auth'][au(0x1ba)];if(!b){alert(au(0x165));return;}let c=document[au(0x1cc)](au(0x163)),d=document[au(0x1cc)]('commentAddOverlay');!c&&(c=document['createElement']('div'),c['id']=au(0x163),c['className']=au(0x24a),document[au(0x211)]['appendChild'](c));!d&&(d=document['createElement']('div'),d['id']=au(0x24b),d[au(0x20b)]=au(0x1e2),document['body']['appendChild'](d));c['innerHTML']=au(0x22c)+a+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',c[au(0x1f2)][au(0x1a4)]=au(0x1c3),d[au(0x1f2)]['display']='block',document['getElementById'](au(0x23b))['addEventListener']('click',closeAddCommentPopup),d[au(0x25b)](au(0x182),closeAddCommentPopup);const e=c['querySelectorAll'](au(0x19f));e[au(0x1ee)](f=>{const av=au;f[av(0x25b)]('click',function(){const aw=av;e[aw(0x1ee)](h=>h[aw(0x1d2)][aw(0x187)](aw(0x1d6))),document[aw(0x160)]('.option-content')[aw(0x1ee)](h=>h[aw(0x1f2)]['display']='none'),this[aw(0x1d2)][aw(0x1ca)]('active');const g=this['dataset'][aw(0x231)];document[aw(0x1cc)](g+'Option')[aw(0x1f2)][aw(0x1a4)]=aw(0x1c3),g==='demo'?(document[aw(0x1cc)]('demoLink')['setAttribute'](aw(0x1b1),''),document['getElementById']('commentText')['removeAttribute'](aw(0x1b1))):(document['getElementById']('demoLink')['removeAttribute'](aw(0x1b1)),document[aw(0x1cc)](aw(0x1f1))['setAttribute']('required',''));});}),document[au(0x1cc)]('commentText')['setAttribute']('required',''),document['getElementById'](au(0x1a7))[au(0x17b)](au(0x1b1)),setupWordCounter('commentText',au(0x21f),0xf),setupWordCounter('demoDescription',au(0x239),0x14),document['getElementById']('addCommentForm')[au(0x25b)]('submit',submitCommentOrDemo);}function setupWordCounter(a,b,c){const ax=a6Y,d=document['getElementById'](a),e=document['getElementById'](b);if(!d||!e)return;f(),d[ax(0x25b)]('input',f);function f(){const ay=ax,g=d[ay(0x188)]['trim'](),h=g?g['split'](/\s+/)[ay(0x1b9)](i=>i[ay(0x161)]>0x0)['length']:0x0;e[ay(0x212)]=h,h>c?e[ay(0x1f2)][ay(0x1f4)]=ay(0x1e1):e['style']['color']='#aaa';}}function a6a(){const aR=['z2fW','lM5VlwnVBw1LBNrZlw1LC3nHz2u','zgvTBW','Bwf0y2HdB21Tzw50CW','zgLZCgXHEu5HBwu','DwLK','zMLSDgvY','y3vYCMvUDfvZzxi','C2XPy2u','cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpgeGAhjLzJ0I','y3vYCMvUDe1HDgnOswq','ChjLDMLLDY1Kms1IDxr0B24','rMfPBgvKihrVihn1yM1PDdOG','Bg9N','yNv0Dg9U','y29TBwvUDfbVChvWvgL0BgvqCMv2Awv3','yMXVy2S','pc9KAxy+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpc9KAxy+cIaGicaGicaGicaGicaGicaGicaGicaGicaGica','zgf0yq','rMLYzwjHC2uGBM90igLUAxrPywXPEMvK','zgf0yxnLDa','Dg9mB2nHBgvtDhjPBMC','yxbWBhLgAwX0zxjcDg4','ywrK','C3vIz2fTzvr5Cgu','z2v0rwXLBwvUDej5swq','mte5nta0nfnnwKzRDq','Dg90ywXqywDLCW','lNbVChvWlwfJDgLVBNm','lM9WDgLVBI10ywiUywn0AxzL','ChjLDMvUDerLzMf1Bhq','y2XHC3nmAxn0','rgvSzxrLigrLBw8','Dg9mB2nHBgveyxrLu3rYAw5N','twf0y2GG','ywn0AxzL','Aw5JBhvKzxm','zMXLEa','DgLTzxn0yw1W','y29TBwvUDa','rgvTBYbKzxnJCMLWDgLVBNmGyxjLigXPBwL0zwqGDg8GmJaGD29YzhmGBwf4Aw11Bs4GugXLyxnLihnOB3j0zw4GEw91CIbKzxnJCMLWDgLVBI4','D2LUBMvYt2XKrwXV','lJWVzgL2pG','ANvTCc10BY1WywDL','ugXLyxnLigvUDgvYigeGzgvTBYbSAw5R','Aw5WDxq','i2zMndq0na','y29TBwvUDc1VDMvYBgf5','y2vUDgvY','v2LUBMvY','u3vIBwL0','rMfPBgvKihrVigzLDgnOihvZzxjUyw1LoG','zMLSDgvYvxnLCM5HBwu','Aw5Uzxjive1m','y3jLyxrLzef0','mc42','rxjYB3iGzMv0y2HPBMCGy29TBwvUDhm6','ywXS','uMvWB3j0','zM9YrwfJAa','q29TBwvUDhmGyxjLigXPBwL0zwqGDg8GmtuGD29YzhmGBwf4Aw11Bs4GugXLyxnLihnOB3j0zw4GEw91CIbJB21Tzw50lG','Cg9WDxaTyNrUignSB3nLlwj0BG','y29TBwvUDfrLEhq','C3r5Bgu','zw5K','y29SB3i','D2LUBMvYu2nVCMu','zgvSzxrLlwnVBw1LBNqTyNrU','ww91ig5LzwqGDg8GyMuGC2LNBMvKigLUihrVihjLCg9YDcbJB21Tzw50CW','Bg9Zzxjty29Yzq','ANvTCa','y3vYCMvUDe1Vzgu','lNbSyxLLCI5SB3nLCIaUCgXHEwvYlxnJB3jL','CgfYzw50tM9Kzq','CxvLCNLtzwXLy3rVCG','Bwf0y2HLC1bLCLbHz2u','lNDPBM5LCI1Kzw1VlwXPBMS','CgLSB3rZ','CMvJzw50lw1HDgnOzxmTChjLDMLLDW','q29TBwvUDcbHzgrLzcbZDwnJzxnZzNvSBhK','zgvZyW','yMfJA2DYB3vUzenVBg9Y','nty1mde2sxnkuLPd','q29TBwvUDcbMCM9Tia','B3bHy2L0Eq','ChjLDMLLD1bYzxzqywDL','lNn1yM1PDc1JB21Tzw50lwj0BG','Bg9ZzxjpBgrfBg8','y2XHC3noyw1L','uhjLDMLLDYbvssbVCIbgAwX0zxiGzwXLBwvUDhmGBM90igzVDw5KlcbJyw5UB3qGyxr0ywnOigXPC3rLBMvYCY4','ww91ig11C3qGyMuGC2LNBMvKigLUihrVignVBNrPBNvL','Bg9ZzxjvC2vYBMfTzq','y2XVC2vdB21Tzw50ug9WDxbqCMv2Awv3','nZbxtwjgt1C','yM9KEq','Dgv4DenVBNrLBNq','DxnLCM5HBwu','txv0zwqU','q29TBwvUDcbKzwXLDgvKihn1y2nLC3nMDwXSEq','tg9HzgLUzYbMAxjZDcbWywDLigzYB20GrMLYzxn0B3jL','mtq4mti2ELfqrhbi','z2f1C3mTyw5Klw1LCMnZ','BwvNys1TyxrJAa','CMvTB3zLsxrLBq','ChjLDG','BgfZDfzPC2LIBgu','CMvWB3j0q29TBwvUDej1DhrVBG','D2fYBG','D29YzenVDw50','BM93','BwfW','i0zgrdCWma','igrHExmGywDV','zw1WDhK','lM1HDgnOlwnHCMq','yxbWCM92zwrnyxrJAgvZrdm','rw50zxi','zw5Oyw5JzwqTzMLSDgvYlxnLy3rPB24','pc9WpJXZBwfSBcbZDhLSzt0Iy29SB3i6i2fHytSGzgLZCgXHEtPIBg9JAZSGDgv4Dc1HBgLNBJPYAwDODdSGBwfYz2LUlxrVCdOXmhb4oYi+ug9ZDgvKig9Uia','A2v5ChjLC3m','y29TBwvUDe1HDgnOswq','cIaGicaGicaGpgrPDIbJBgfZCZ0ICg9WDxaTAgvHzgvYiJ4kicaGicaGicaGicaGpgGZpKfKzcbdB21Tzw50ig9YierLBw88l2GZpGOGicaGicaGicaGica8yNv0Dg9UigLKpsjJBg9ZzufKzenVBw1LBNrqB3b1CciGy2XHC3m9iMnSB3nLlwj0BIi+jNrPBwvZoZWVyNv0Dg9UpGOGicaGicaGidWVzgL2pGOGicaGicaGidXMB3jTigLKpsjHzgrdB21Tzw50rM9YBsi+cIaGicaGicaGicaGidXPBNb1Dcb0ExbLpsjOAwrKzw4IigLKpsjJB21Tzw50twf0y2HjzciGBMfTzt0Iy29TBwvUDe1HDgnOswqIihzHBhvLpsi','zxHPC3rZ','Bwf0y2Hjza','rxjYB3iGC3vIBwL0DgLUzYbJB21Tzw50oG','CgfYC2u','B3b0Aw9U','D2LUBMvYvxnLCM5HBwu','yMfKq29TBwvUDhm','mtvsEwHfrNi','lM1HDgnOlwrLBw8TBgLUA3m','y29TBwvUDfvZzxi','yNjVBNPL','yxbWCM92zwrnyxrJAgvZrdi','zgvTB1DVCMrdB3vUDa','y2XVBMvoB2rL','y2XVC2vbzgrdB21Tzw50ug9WDxa','pgj1DhrVBIbJBgfZCZ0IzgvSzxrLlwnVBw1LBNqTyNrUiIbHCMLHlwXHyMvSpsjezwXLDguGy29TBwvUDci+W5C8l2j1DhrVBJ4','Bgv2zwXZ','Dw5Yyw5Rzwq','zMLSDgvYlwXLDMvSCW','DxnLCKLK','mJq0nZyYyvfcwMnX','Bwf4','A2v5CW','lMnVBw1LBNqUBg9ZzxiTy29TBwvUDa','mtbWEa','C2vJB25KCW','yxbWzw5Kq2HPBgq','yxjPys1SywjLBa','z29Sza','y29TBwvUDc1WB3b1Ca','y29TBwvUDefKze92zxjSyxK','q2fJAguGBwLZCYbMB3iGCgfNzsa','zgvTBY1SAw5R','yxbWCM92zwrbDa','zMLYC3rdAgLSza','qxjLihLVDsbZDxjLihLVDsb3yw50ihrVihjLCg9YDcb0AgLZignVBw1LBNqGyxmGAw5HChbYB3bYAwf0zt8','C3vIBwL0','zMLSDgvYlxrVz2DSzs1IDxr0B24','Bwf0y2GTy2fYzc10zw1WBgf0zq','y3vYC29Y','zgvMyxvSDa','zgLZB3jPzw50yxrPB24','y29TBwvUDe92zxjSyxLqCMv2Awv3','BMv4Da','DgL0Bgu','tg9HzgLUzYbUzxH0ihbHz2uGDxnPBMCGy3vYC29Y','ywrKrxzLBNrmAxn0zw5LCG','zw5Oyw5JzwrgAwX0zxjZ','yxv0Aa','C2LSDMvY','CxvLCNLtzwXLy3rVCKfSBa','BgvUz3rO','zg9JCW','y29TBwvUDefKzfbVChvW','yxbWCM92zwrnyxrJAgvZ','ww91ig5LzwqGDg8GyMuGC2LNBMvKigLUihrVigXLyxzLigeGy29TBwvUDcbVCIbHzgqGysbKzw1V','vw5RBM93BIbnyxa','iZGWoda4ma','odKYndy1z1LnAvDf','y3vYCMvUDa','igrLBw8GBgLUA3m6','wwvZDgvYzgf5','q2XVC2u','D2LUBMvYrgvTB0XPBMS','rxjYB3iGzMv0y2HPBMCGy29TBwvUDhmGyMf0y2G6','AxnmB2fKAw5N','iIb0yxjNzxq9iL9IBgfUAYiGy2XHC3m9iNbSyxKTAwnVBIi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGidXZDMCGDMLLD0jVEd0ImcaWidi0idi0iJ4kicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGidXWyxrOigq9iK04lduUmtrwmtKUmtrmmtKSmtiUmtrmocW1lJe0wIiGlZ4kicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpc9ZDMC+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpc9HpGOGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iMrLBw8TAw5MBYi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iMrLBw8Tyxv0Ag9YiJ5ezw1VigzYB20G','ChvZAa','vw5HyMXLihrVihn1yM1PDcbJB21Tzw50ic0GC3LZDgvTig5VDcbYzwfKEq','uMvUzgvYAw5NihbHz2uG','C3rHCNq','u3rHBMrHCMqGtwf0y2G','CMvTyxrJAa','qw5VBNLTB3vZ','j3mGrgvTBW','ww91ig5LzwqGDg8GyMuGC2LNBMvKigLUihrVigrLBgv0zsbJB21Tzw50CW','BwvZC2fNzq','CMvTB3zLqxr0CMLIDxrL','ChjLDMLLDY1SywrKzxiTBw9Kzq','y2XVC2vZDa','zMLYC3rwAxnPyMXL','ig1HDgnOAw5NigzPBhrLCNm','y29UDgvUDa','zNvZAw9Ulw1HDgnO','y2XPy2S','mJmWmJuYneXOrgzXCq','i0nen0yZmG','pc9ZBwfSBd4','rMfPBgvKihrVihjLCg9YDcbJB21Tzw50oIa','CMvTB3zL','DMfSDwu','rMfPBgvKihrVignHy2HLigrHDge6','y29TBwvUDc1PDgvT','y3jLyxrLrwXLBwvUDa','lNbSyxLLCI53Aw5UzxiGlNbSyxLLCI1ZDwLJAwrLCW','B25JBgLJAW','lMnVBw1LBNqUD2LUBMvYlwnVBw1LBNq','lM1HDgnOzxmTBg9HzgLUzW','Dg9Nz2XL','C3vIz2fTzxm','DhLWzq','qxjLihLVDsbZDxjLihLVDsb3yw50ihrVigrLBgv0zsb0AgLZignVBw1LBNq/','C2vSzwn0zwq','CMf0DgLUzW','DhjPBq','zxjYB3i','y29TBwvUDfbVChvWuhjLDMLLDW','lI4U','mtvWEa','ChjLDMLLD05LEhrqywDL','lMXVC2vYlwrLBw8TBgLUAW','ChjLDMLLD0nHy2HLxW','mJaYns0WnY0WmG','lM9WDgLVBI10ywi','BM9Uzq','BwLZC2LSzxmTnNbSDxm','phn0CM9UzZ4','zgLZywjSzwq','zgLZCgXHEq','y29TBwvUDfbVChvWq29UDgvUDfbYzxzPzxC','tM8GzgvZy3jPChrPB24GChjVDMLKzwq','zgvTB0XPBMS','lMrLBgv0zs1JB21Tzw50lwj0BG','ugXLyxnLigvUDgvYigeGy29TBwvUDcbIzwzVCMuGC3vIBwL0DgLUzW','mta5odq3mdDptxP6B1u','Dg9mB3DLCKnHC2u','BwfWugXHEwvK','ChjLDMLLDY1KmI1IDxr0B24','lMnVBw1LBNrZlwnVBNrHAw5LCG','y3vYCMvUDfbHz2u','C3bSAxq','CMvXDwLYzwq','rgf6'];a6a=function(){return aR;};return a6a();}async function submitCommentOrDemo(a){const az=a6Y;a['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const b=window['auth']['currentUser'];if(!b){alert(az(0x20d));return;}const c=document[az(0x1cc)](az(0x22b))['value'],d=document['querySelector'](az(0x1d0))['dataset'][az(0x231)];let f=az(0x177);try{const h=doc(window['db'],'userProfiles',b['uid']),i=await getDoc(h);if(i[az(0x22d)]()){const j=i['data']();j[az(0x213)]&&(f=j[az(0x213)]);}f===az(0x177)&&b['displayName']&&(f=b[az(0x1b7)]);}catch(k){console['warn'](az(0x1e6),k),b['displayName']&&(f=b['displayName']);}const g=document['querySelector']('.submit-comment-btn');g&&(g[az(0x1a3)]=!![],g[az(0x212)]='Submitting...');try{if(d===az(0x1da)){const l=document['getElementById'](az(0x1f1))[az(0x188)]['trim']();if(!l){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),g['disabled']=![],g[az(0x212)]=az(0x1e5);return;}const m=l['split'](/\s+/)['filter'](p=>p[az(0x161)]>0x0)[az(0x161)];if(m>0xf){alert(az(0x1ef)),g['disabled']=![],g[az(0x212)]=az(0x1e5);return;}const n={'matchId':c,'userId':b['uid'],'username':f,'text':l,'type':az(0x1da),'timestamp':serverTimestamp()},o=collection(window['db'],az(0x1b6));await addDoc(o,n);}else{const p=document[az(0x1cc)](az(0x1a7))['value'][az(0x196)](),q=document[az(0x1cc)]('demoDescription')['value']['trim']()||'Demo\x20link';if(!p){alert(az(0x1df)),g[az(0x1a3)]=![],g[az(0x212)]='Submit';return;}try{new URL(p);}catch(u){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),g['disabled']=![],g[az(0x212)]=az(0x1e5);return;}const r=q[az(0x1b0)](/\s+/)['filter'](v=>v[az(0x161)]>0x0)[az(0x161)];if(r>0x14){alert(az(0x1db)),g[az(0x1a3)]=![],g[az(0x212)]='Submit';return;}const s={'matchId':c,'userId':b[az(0x1b8)],'username':f,'demoLink':p,'description':q,'type':az(0x1b5),'text':'Demo:\x20'+q,'timestamp':serverTimestamp()},t=collection(window['db'],az(0x1b6));await addDoc(t,s);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(v){console['error']('Error\x20submitting:',v),alert(az(0x1bf)+v['message']),g&&(g[az(0x1a3)]=![],g['textContent']='Submit');}}function getEloRankClass(a){const aA=a6Y,b=Number(a);if(b>=0x7d0)return'emerald';else{if(b>=0x708)return aA(0x249);else{if(b>=0x640)return aA(0x25e);else{if(b>=0x578)return aA(0x237);else return aA(0x23e);}}}}function showPreviewCommentPopup(a,b,c='#fff'){const aB=a6Y,d=document[aB(0x1cc)](aB(0x198)),e=document['getElementById']('commentOverlayPreview'),f=document[aB(0x1cc)](aB(0x1c2)),g=document['getElementById'](aB(0x1a5)),h=document[aB(0x1cc)](aB(0x21d));if(!d||!e||!f||!g||!h)return;d[aB(0x1c7)]['commentText']=a,d['dataset']['commentUser']=b,f['style']['color']=c,f[aB(0x212)]=aB(0x206)+b,g[aB(0x212)]=a,h[aB(0x18d)]=reportComment,d['style'][aB(0x1a4)]='block',e[aB(0x1f2)][aB(0x1a4)]='block';}function a6b(a,b){const c=a6a();return a6b=function(d,e){d=d-0x160;let f=c[d];if(a6b['hxhSfj']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a6b['ubrIVg']=g,a=arguments,a6b['hxhSfj']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a6b['ubrIVg'](f),a[i]=f):f=j,f;},a6b(a,b);}function closePreviewCommentPopup(){const aC=a6Y,a=document['getElementById']('commentPopupPreview'),b=document['getElementById']('commentOverlayPreview');if(a)a['style']['display']=aC(0x1a0);if(b)b[aC(0x1f2)]['display']='none';}async function reportComment(){const aD=a6Y,a=window['auth'][aD(0x1ba)];if(!a){alert(aD(0x1f7));return;}if(!confirm(aD(0x250)))return;try{const b=document['getElementById'](aD(0x198)),c={'commentAuthor':b['dataset']['commentUser']||'Unknown\x20User','commentText':b[aD(0x1c7)][aD(0x1f1)]||'','matchId':previewState[aD(0x1bd)]||'','reportedBy':a['uid'],'reporterUsername':a['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},d=collection(window['db'],aD(0x233));await addDoc(d,c),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(e){console['error']('Error\x20reporting\x20comment:',e),alert(aD(0x186)+e['message']);}}function showFullCommentLightbox(a){const aE=a6Y;if(isUsernameMuted(a['username']))return;const b=document[aE(0x1cc)]('commentPopupPreview'),c=document['getElementById'](aE(0x257)),d=document[aE(0x1cc)](aE(0x1c2)),e=document[aE(0x1cc)](aE(0x1a5));if(!b||!c||!d||!e)return;d[aE(0x1f2)][aE(0x1f4)]='#fff',d['textContent']='Comment\x20from\x20'+a[aE(0x213)];if(a[aE(0x1d9)]){const i=new Date(a['timestamp'][aE(0x246)]*0x3e8),j=i[aE(0x1c8)]();e[aE(0x1e8)]='<p>'+a['text']+aE(0x229)+j+aE(0x185);}else e[aE(0x212)]=a['text'];b['dataset']['commentId']=a['id']||'',b['dataset'][aE(0x236)]=a[aE(0x213)]||'',b[aE(0x1c7)][aE(0x1f1)]=a['text']||'',b[aE(0x1c7)]['matchId']=a['matchId']||'';const f=b['querySelector']('.popup-actions')||document[aE(0x18b)]('div');!b[aE(0x1fd)](aE(0x1cf))?(f['className']='popup-actions',f[aE(0x1f2)][aE(0x1a4)]=aE(0x1d8),f['style']['justifyContent']=aE(0x1e3),f[aE(0x1f2)][aE(0x1b3)]=aE(0x245),f[aE(0x1f2)]['marginTop']=aE(0x19a),b[aE(0x247)](f)):f[aE(0x1e8)]='';const g=document[aE(0x18b)]('button');g['textContent']=aE(0x16c),g[aE(0x20b)]=aE(0x1f0),g['id']=aE(0x20f),g['addEventListener']('click',closePreviewCommentPopup);const h=document['createElement'](aE(0x1c1));h[aE(0x212)]=aE(0x1ed),h[aE(0x20b)]='popup-btn\x20report-btn',h[aE(0x1f2)][aE(0x204)]='#d32f2f',h[aE(0x25b)]('click',reportComment),f['appendChild'](g),f[aE(0x247)](h),b['style']['display']='block',c[aE(0x1f2)][aE(0x1a4)]='block';}export function setupPreviewEventListeners(){const aF=a6Y,a=document['getElementById'](aF(0x208)),b=document['getElementById'](aF(0x19b)),c=document['getElementById']('preview-d1-button'),d=document[aF(0x1cc)]('preview-d2-button'),e=document['getElementById']('preview-d3-button'),f=document['getElementById'](aF(0x252)),g=document[aF(0x1cc)](aF(0x228));if(!a||!b||!c||!d||!e||!f||!g){console[aF(0x21e)](aF(0x20c));return;}a['addEventListener'](aF(0x182),()=>{const aG=aF;if(!a['disabled'])loadRecentMatchesPreview(aG(0x21b));}),b['addEventListener'](aF(0x182),()=>{const aH=aF;if(!b['disabled'])loadRecentMatchesPreview(aH(0x258));}),c['addEventListener']('click',()=>{const aI=aF;previewState[aI(0x1fa)]!=='D1'&&!previewState['isLoading']&&(previewState[aI(0x1fa)]='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(aI(0x169)));}),d[aF(0x25b)]('click',()=>{const aJ=aF;previewState[aJ(0x1fa)]!=='D2'&&!previewState[aJ(0x16f)]&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview(aJ(0x169)));}),e['addEventListener']('click',()=>{const aK=aF;previewState['currentMode']!=='D3'&&!previewState[aK(0x16f)]&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});f&&g&&f[aF(0x25b)](aF(0x182),()=>{const aL=aF,r=g[aL(0x1f2)]['display']!=='none';g[aL(0x1f2)][aL(0x1a4)]=r?aL(0x1a0):'block',f[aL(0x1d2)][aL(0x190)](aL(0x1d6),!r);});const h=document[aF(0x1cc)]('apply-enhanced-filters'),i=document[aF(0x1cc)]('clear-enhanced-filters');h&&h['addEventListener']('click',()=>{const aM=aF;previewState[aM(0x25c)]['pilots']=document[aM(0x1cc)]('filter-pilots')[aM(0x188)]['trim'](),previewState['enhancedFilters']['levels']=document[aM(0x1cc)]('filter-levels')['value'][aM(0x196)]();const r=document[aM(0x1cc)]('filter-subgames');previewState['enhancedFilters'][aM(0x191)]=Array['from'](r['selectedOptions'])[aM(0x221)](s=>s['value'])[aM(0x1b9)](s=>s!==''),loadRecentMatchesPreview('current');});i&&i['addEventListener']('click',()=>{const aN=aF;clearEnhancedFilters(),loadRecentMatchesPreview(aN(0x169));});document[aF(0x160)]('.jump-btn')[aF(0x1ee)](r=>{const aO=aF;r[aO(0x25b)]('click',()=>{const aP=aO,s=r['dataset'][aP(0x1f9)];jumpToPage(s);});});const j=document[aF(0x1cc)](aF(0x1de));j&&j[aF(0x25b)](aF(0x22a),r=>{const aQ=aF;r['key']===aQ(0x227)&&jumpToPage('input');});const k=document['getElementById'](aF(0x20f)),l=document['getElementById'](aF(0x257));if(k)k['addEventListener']('click',closePreviewCommentPopup);if(l)l[aF(0x25b)]('click',closePreviewCommentPopup);const m=document['getElementById'](aF(0x23b)),n=document['getElementById'](aF(0x24b)),o=document['getElementById']('addCommentForm');if(m)m['addEventListener'](aF(0x182),closeAddCommentPopup);if(n)n[aF(0x25b)](aF(0x182),closeAddCommentPopup);if(o)o['addEventListener'](aF(0x251),submitComment);const p=document['getElementById'](aF(0x1f1)),q=document['getElementById']('wordCount');p&&q&&setupWordCounter('commentText',aF(0x21f),0xf);}window['showAddCommentPopup']=showAddCommentPopup,window[a6Y(0x23b)]=closeAddCommentPopup,window['submitComment']=submitComment;