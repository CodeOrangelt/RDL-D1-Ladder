const a19_0x51c40d=a19_0x1ab5,a19_0x461323=(function(){let _0x33e73c=!![];return function(_0x23a902,_0x50787a){const _0x1f2fb2=_0x33e73c?function(){const _0x74eafe=a19_0x1ab5;if(_0x50787a){const _0x364906=_0x50787a[_0x74eafe(0xba)](_0x23a902,arguments);return _0x50787a=null,_0x364906;}}:function(){};return _0x33e73c=![],_0x1f2fb2;};}()),a19_0x5dc67f=a19_0x461323(this,function(){const _0x5aa8ec=a19_0x1ab5,_0xdf4e6d=function(){let _0x373c11;try{_0x373c11=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xea5fe8){_0x373c11=window;}return _0x373c11;},_0x258ec1=_0xdf4e6d(),_0x48c889=_0x258ec1['console']=_0x258ec1['console']||{},_0x4dec08=[_0x5aa8ec(0xda),'warn',_0x5aa8ec(0xbd),_0x5aa8ec(0xc7),'exception',_0x5aa8ec(0xd9),'trace'];for(let _0x521d3a=0x0;_0x521d3a<_0x4dec08['length'];_0x521d3a++){const _0x35d7a0=a19_0x461323['constructor'][_0x5aa8ec(0xe7)]['bind'](a19_0x461323),_0x4c3bf0=_0x4dec08[_0x521d3a],_0x1f8ce4=_0x48c889[_0x4c3bf0]||_0x35d7a0;_0x35d7a0['__proto__']=a19_0x461323['bind'](a19_0x461323),_0x35d7a0['toString']=_0x1f8ce4['toString']['bind'](_0x1f8ce4),_0x48c889[_0x4c3bf0]=_0x35d7a0;}});a19_0x5dc67f();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x54a4cd=a19_0x1ab5;this['activeListeners']=new Map(),this[_0x54a4cd(0xc3)]=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this['debug']=![];}[a19_0x51c40d(0xcf)](){const _0x30c288=a19_0x51c40d;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console[_0x30c288(0xdc)](_0x30c288(0xbe)+this[_0x30c288(0xe6)]+'\x20operations\x20during\x20idle\x20state'),![];if(window[_0x30c288(0xe1)]===!![])return console['log'](_0x30c288(0xd1)),![];return!![];}async[a19_0x51c40d(0xcd)](_0x3a204b,_0x45b984,..._0x279020){const _0x46c2f4=a19_0x51c40d;if(!this['checkSessionActive']()){const _0x4b16d4=_0x45b984+'-'+Date[_0x46c2f4(0xe0)]()+'-'+Math[_0x46c2f4(0xdd)]()['toString'](0x24)['substring'](0x2,0x9);return this[_0x46c2f4(0xc3)]['set'](_0x4b16d4,{'operation':_0x3a204b,'operationType':_0x45b984,'args':_0x279020}),!this['pendingTimeout']&&(this[_0x46c2f4(0xd0)]=setTimeout(()=>{const _0xf16fbe=_0x46c2f4;this['pendingOperations'][_0xf16fbe(0xd6)](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x3a204b(..._0x279020);}catch(_0x9e6248){if(_0x9e6248[_0x46c2f4(0xb8)]==='unavailable'||_0x9e6248['code']===_0x46c2f4(0xc2)||_0x9e6248[_0x46c2f4(0xdf)]&&_0x9e6248['message']['includes'](_0x46c2f4(0xcc)))return handleNetworkError(),null;throw _0x9e6248;}}async[a19_0x51c40d(0xd7)](_0x2f5e5f){const _0x4747ed=a19_0x51c40d;return this['safeOperation'](getDoc,_0x4747ed(0xd5),_0x2f5e5f);}async['getDocuments'](_0x3c2f9a){return this['safeOperation'](getDocs,'query',_0x3c2f9a);}async['addDocument'](_0x29ab4e,_0x1215b2){const _0x4e928c=a19_0x51c40d;return this['safeOperation'](addDoc,_0x4e928c(0xde),_0x29ab4e,_0x1215b2);}async['setDocument'](_0x2fd6d3,_0x4bb75a,_0x25af9e={}){return this['safeOperation'](setDoc,'set',_0x2fd6d3,_0x4bb75a,_0x25af9e);}async['updateDocument'](_0x27cc75,_0x2c9574){return this['safeOperation'](updateDoc,'update',_0x27cc75,_0x2c9574);}async['deleteDocument'](_0x569ed5){return this['safeOperation'](deleteDoc,'delete',_0x569ed5);}['suspendAllListeners'](){const _0x174bc7=a19_0x51c40d;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners']['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this[_0x174bc7(0xb9)]['forEach']((_0x1947d4,_0x4419b0)=>{const _0x5f1fb6=_0x174bc7;console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x4419b0);if(typeof _0x1947d4==='function')try{_0x1947d4(),console[_0x5f1fb6(0xda)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x4419b0);}catch(_0x116954){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x4419b0,_0x116954);}}),this[_0x174bc7(0xb9)]['clear']();if(this[_0x174bc7(0xe9)]){const _0x321aad=document[_0x174bc7(0xe8)](_0x174bc7(0xc6));_0x321aad['id']=_0x174bc7(0xc8),_0x321aad['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x321aad[_0x174bc7(0xbc)]=_0x174bc7(0xe4),document[_0x174bc7(0xd3)][_0x174bc7(0xd2)](_0x321aad);}console['log'](_0x174bc7(0xd4));}['resumeAllListeners'](){const _0x5265c7=a19_0x51c40d;if(!this['_suspendedListeners']||this[_0x5265c7(0xdb)]['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this[_0x5265c7(0xdb)]['size']),this['_suspendedListeners']['forEach']((_0x1ad858,_0x412cec)=>{const _0x50f6eb=_0x5265c7;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x412cec);try{if(typeof _0x1ad858==='function'){console[_0x50f6eb(0xdc)](_0x50f6eb(0xc5),_0x412cec);return;}const {query:_0x33df1a,callback:_0x3fb0a2,options:_0x575a44}=_0x1ad858;if(_0x33df1a&&_0x3fb0a2){const _0x16ee3a=onSnapshot(_0x33df1a,_0x3fb0a2,_0x575a44||{});this['activeListeners']['set'](_0x412cec,_0x16ee3a),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x412cec);}}catch(_0x31b095){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x412cec,_0x31b095);}}),this['_suspendedListeners'][_0x5265c7(0xd6)]();const _0x1283fd=document['getElementById']('firebase-suspend-indicator');_0x1283fd&&_0x1283fd['remove'](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x2c4841,_0x483aab,_0x18ed56={},_0x2a4f5b=null){const _0x4e65c8=a19_0x51c40d,_0x361603=_0x2a4f5b||_0x4e65c8(0xe2)+Date['now']()+'_'+Math['random']()[_0x4e65c8(0xcb)](0x24)['substr'](0x2,0x9);this['debug']&&console[_0x4e65c8(0xda)]('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x361603);if(!this[_0x4e65c8(0xcf)]())return console[_0x4e65c8(0xda)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x361603),()=>{};try{const _0x2cf98f=onSnapshot(_0x2c4841,_0x483aab,_0x18ed56);return this['activeListeners']['set'](_0x361603,{'unsubscribe':_0x2cf98f,'query':_0x2c4841,'callback':_0x483aab,'options':_0x18ed56}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x361603),console['log'](_0x4e65c8(0xbb)+this['activeListeners']['size'])),()=>{const _0x33edf6=_0x4e65c8;this[_0x33edf6(0xe9)]&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x361603);try{_0x2cf98f(),this['activeListeners']['delete'](_0x361603),this[_0x33edf6(0xe9)]&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x361603),console[_0x33edf6(0xda)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners'][_0x33edf6(0xe5)]));}catch(_0x4f10d2){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x361603+':',_0x4f10d2);}};}catch(_0x54f065){return console[_0x4e65c8(0xc7)]('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x361603+':',_0x54f065),()=>{};}}['executePendingOperations'](_0x3adb8d='all'){const _0x2cc945=a19_0x51c40d;console[_0x2cc945(0xda)]('Executing\x20pending\x20'+_0x3adb8d+'\x20operations:\x20'+this['pendingOperations']['size']+_0x2cc945(0xc1));const _0x246ec4=new Map(this['pendingOperations']);this['pendingOperations']['clear'](),_0x246ec4[_0x2cc945(0xd8)]((_0x508097,_0x8e67f9)=>{const _0x100edd=_0x2cc945;_0x3adb8d==='all'||_0x508097['operationType']===_0x3adb8d?(console['log']('Executing\x20delayed\x20'+_0x508097['operationType']+'\x20operation'),this[_0x100edd(0xcd)](_0x508097['operation'],_0x508097['operationType'],..._0x508097['args'])['catch'](_0x1a6e19=>console['error'](_0x100edd(0xce),_0x1a6e19))):this[_0x100edd(0xc3)]['set'](_0x8e67f9,_0x508097);});}['enableDebug'](_0x26398b=!![]){const _0x4a4e6f=a19_0x51c40d;this['debug']=_0x26398b,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x26398b?'enabled':'disabled'));if(_0x26398b){const _0x5bcad0=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,'system','test'))[_0x4a4e6f(0xe3)](_0x5c759c=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x5c759c);})['catch'](_0x16f969=>{const _0x14a636=_0x4a4e6f;console[_0x14a636(0xda)](_0x14a636(0xc0),_0x16f969);})[_0x4a4e6f(0xc4)](()=>{const _0xc19a42=_0x4a4e6f;console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window[_0xc19a42(0xca)]=_0x5bcad0;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x33b900=a19_0x51c40d,_0x11cfb6=window['suspendSession']||function(){},_0x4cb6af=window['resumeSession']||function(){};window[_0x33b900(0xc9)]=function(){_0x11cfb6(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){const _0x4cde79=_0x33b900;_0x4cb6af(),firebaseIdle[_0x4cde79(0xbf)]();};}export default firebaseIdle;function a19_0x1ab5(_0x378717,_0x22232c){const _0x5dc67f=a19_0x42f4();return a19_0x1ab5=function(_0x461323,_0x360eab){_0x461323=_0x461323-0xb8;let _0x42f448=_0x5dc67f[_0x461323];return _0x42f448;},a19_0x1ab5(_0x378717,_0x22232c);}function a19_0x42f4(){const _0x4dc662=['code','activeListeners','apply','[FirebaseIdle]\x20Active\x20listeners:\x20','textContent','info','[FirebaseIdle]\x20Blocked\x20','resumeAllListeners','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','\x20total\x20operations','resource-exhausted','pendingOperations','finally','[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:','div','error','firebase-suspend-indicator','suspendSession','RDL_SESSION_SUSPENDED','toString','network','safeOperation','Error\x20executing\x20pending\x20operation:','checkSessionActive','pendingTimeout','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error','appendChild','body','[FirebaseIdle]\x20All\x20listeners\x20suspended','get','clear','getDocument','forEach','table','log','_suspendedListeners','warn','random','add','message','now','RDL_NETWORK_ERROR','listener_','then','Firebase:\x20Suspended','size','blockedOperations','prototype','createElement','debug'];a19_0x42f4=function(){return _0x4dc662;};return a19_0x42f4();}