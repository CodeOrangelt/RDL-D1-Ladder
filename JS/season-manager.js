(function(a,b){const h=a52b,c=a();while(!![]){try{const d=parseInt(h(0xcd))/0x1*(parseInt(h(0xdc))/0x2)+-parseInt(h(0xd7))/0x3*(-parseInt(h(0xdd))/0x4)+parseInt(h(0xca))/0x5+-parseInt(h(0xbf))/0x6*(-parseInt(h(0xdb))/0x7)+-parseInt(h(0xc1))/0x8+-parseInt(h(0xd8))/0x9+-parseInt(h(0xde))/0xa*(parseInt(h(0xc3))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a52a,0x188de));import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a52b(a,b){const c=a52a();return a52b=function(d,e){d=d-0xbe;let f=c[d];if(a52b['HWsERR']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a52b['ISYnEE']=g,a=arguments,a52b['HWsERR']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a52b['ISYnEE'](f),a[i]=f):f=j,f;},a52b(a,b);}import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){const i=a52b;this[i(0xce)]();}['setupEventListeners'](){const j=a52b,a=document['getElementById']('reset-season'),b=document[j(0xd9)]('confirm-reset'),c=document['getElementById'](j(0xc5));a?.[j(0xe0)](j(0xdf),()=>{const k=j;document['getElementById'](k(0xd0))['style']['display']=k(0xc6);}),b?.['addEventListener'](j(0xdf),async()=>{const l=j,d=document['getElementById']('reset-password'),e=auth[l(0xd3)];if(!e||!d[l(0xbe)]){alert(l(0xcb));return;}try{const f=EmailAuthProvider['credential'](e['email'],d['value']);await reauthenticateWithCredential(e,f),await this[l(0xc2)](),d[l(0xbe)]='',document[l(0xd9)](l(0xd0))[l(0xc8)]['display']='none';}catch(g){alert('Invalid\x20password\x20or\x20authentication\x20failed'),console[l(0xcf)](l(0xd1),g);}}),c?.['addEventListener']('click',()=>{const m=j,d=document[m(0xd9)]('reset-password');d[m(0xbe)]='',document[m(0xd9)]('reset-confirmation')['style']['display']='none';});}async['resetSeason'](){const n=a52b;try{const a=await getDoc(doc(db,n(0xda),n(0xc7)));let b=0x1;a[n(0xd5)]()&&(b=a[n(0xd6)]()[n(0xc0)]+0x1);const c=await getDocs(collection(db,n(0xd2))),d={'players':[],'date':new Date(),'seasonNumber':b};for(const e of c['docs']){const f=e['data']();d[n(0xd2)]['push']({'username':f[n(0xcc)],'position':f['position'],'eloRating':f['eloRating']||0x4b0}),await setDoc(doc(db,n(0xd2),e['id']),{...f,'eloRating':0x4b0,'position':f['position']});}await setDoc(doc(db,n(0xc4),n(0xc9)+b),d),await setDoc(doc(db,'metadata',n(0xc7)),{'count':b}),alert('Season\x20'+b+'\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.'),location['reload']();}catch(g){console['error'](n(0xd4),g),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}function a52a(){const o=['CgXHEwvYCW','y3vYCMvUDfvZzxi','rxjYB3iGCMvZzxr0Aw5NihnLyxnVBJO','zxHPC3rZ','zgf0yq','mJuYmdu3vM9Uv3r2','ndq0otz5quPnCKW','z2v0rwXLBwvUDej5swq','Bwv0ywrHDge','mti3ntyXuvrcuuPk','mtu0mK5irgHYqW','ngTXzKn4wa','mJaXndC3mgrpwhLKsq','y2XPy2S','ywrKrxzLBNrmAxn0zw5LCG','DMfSDwu','ndHqBvHxwKu','y291BNq','ntK4mdG4z09qEezn','CMvZzxrtzwfZB24','mtfqC3n6Ewy','C2vHC29UCW','y2fUy2vSlxjLC2v0','yMXVy2S','C2vHC29Uq291BNq','C3r5Bgu','C2vHC29U','mtiZnJKWr3nmqvDJ','ugXLyxnLigvUDgvYihLVDxiGCgfZC3DVCMq','DxnLCM5HBwu','mty1DMHru2Tt','C2v0DxbfDMvUDeXPC3rLBMvYCW','zxjYB3i','CMvZzxqTy29UzMLYBwf0Aw9U','qxv0AgvUDgLJyxrPB24GzxjYB3i6'];a52a=function(){return o;};return a52a();}export const seasonManager=new SeasonManager();