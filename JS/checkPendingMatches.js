const a10_0x2d77b4=(function(){let _0x210ccb=!![];return function(_0x34095a,_0x43e784){const _0xc76b4b=_0x210ccb?function(){if(_0x43e784){const _0x136da1=_0x43e784['apply'](_0x34095a,arguments);return _0x43e784=null,_0x136da1;}}:function(){};return _0x210ccb=![],_0xc76b4b;};}()),a10_0x53d256=a10_0x2d77b4(this,function(){const _0x4fdd3e=a10_0x2986;let _0x26005a;try{const _0x58265a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x26005a=_0x58265a();}catch(_0x1adb80){_0x26005a=window;}const _0x2e6646=_0x26005a['console']=_0x26005a['console']||{},_0x5039bc=['log',_0x4fdd3e(0x1ce),'info',_0x4fdd3e(0x1e5),'exception',_0x4fdd3e(0x1d0),'trace'];for(let _0x1cd660=0x0;_0x1cd660<_0x5039bc[_0x4fdd3e(0x1d6)];_0x1cd660++){const _0x10a9bb=a10_0x2d77b4['constructor']['prototype']['bind'](a10_0x2d77b4),_0x410b59=_0x5039bc[_0x1cd660],_0x132484=_0x2e6646[_0x410b59]||_0x10a9bb;_0x10a9bb[_0x4fdd3e(0x1d8)]=a10_0x2d77b4['bind'](a10_0x2d77b4),_0x10a9bb[_0x4fdd3e(0x1e3)]=_0x132484['toString'][_0x4fdd3e(0x1d3)](_0x132484),_0x2e6646[_0x410b59]=_0x10a9bb;}});a10_0x53d256();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0xcc4ea9=![]){const _0x551a26=a10_0x2986,_0x4c6063=Date['now'](),_0x36c32f=checkNotificationCache();if(_0x36c32f!==null&&!_0xcc4ea9){updateNotificationDot(_0x36c32f);if(_0x4c6063-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x4c6063;const _0x612c97=auth['currentUser'];if(!_0x612c97){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x5d7e24,_0x36f92e,_0x44e883]=await Promise[_0x551a26(0x1d1)]([checkForPendingMatchesInCollection(_0x612c97,'pendingMatches'),checkForPendingMatchesInCollection(_0x612c97,_0x551a26(0x1da)),checkForPendingMatchesInCollection(_0x612c97,'pendingMatchesD3')]),_0x44d902=_0x5d7e24||_0x36f92e||_0x44e883;updateNotificationDot(_0x44d902),updateNotificationCache(_0x44d902);}catch(_0x9ff33c){console[_0x551a26(0x1e5)]('Error\x20checking\x20pending\x20matches:',_0x9ff33c);}}async function checkForPendingMatchesInCollection(_0xc28110,_0x4d46f6){const _0x398e23=a10_0x2986,_0x8fdfcc=_0xc28110['uid'],_0x2cf6d9=_0xc28110['email'],_0x29aaa0=query(collection(db,_0x4d46f6),where('winnerId','==',_0x8fdfcc),where('approved','==',![])),_0x38bb6b=await getDocs(_0x29aaa0);if(!_0x38bb6b['empty'])return!![];if(_0x2cf6d9){const _0x4975e3=query(collection(db,_0x4d46f6),where('winnerEmail','==',_0x2cf6d9),where('approved','==',![])),_0x57282d=await getDocs(_0x4975e3);if(!_0x57282d[_0x398e23(0x1d9)])return!![];}let _0x4fe0c6=await getUsernameFromAllSources(_0xc28110);if(_0x4fe0c6){const _0x271030=query(collection(db,_0x4d46f6),where('winnerUsername','==',_0x4fe0c6),where('approved','==',![])),_0x528f37=await getDocs(_0x271030);if(!_0x528f37['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x2ef0ab){const _0x2fbe1f=a10_0x2986,_0x3c5082=localStorage['getItem']('currentUsername');if(_0x3c5082)return _0x3c5082;try{const [_0x25435d,_0x10585a,_0x3eb053]=await Promise[_0x2fbe1f(0x1d1)]([getDocs(query(collection(db,'players'),where(_0x2fbe1f(0x1de),'==',_0x2ef0ab[_0x2fbe1f(0x1d2)]))),getDocs(query(collection(db,'playersD2'),where(_0x2fbe1f(0x1de),'==',_0x2ef0ab['uid']))),getDocs(query(collection(db,'playersD3'),where(_0x2fbe1f(0x1de),'==',_0x2ef0ab['uid'])))]);if(!_0x25435d['empty']){const _0xc2771c=_0x25435d['docs'][0x0]['data']()[_0x2fbe1f(0x1db)];return localStorage['setItem']('currentUsername',_0xc2771c),_0xc2771c;}if(!_0x10585a['empty']){const _0x609410=_0x10585a['docs'][0x0]['data']()['username'];return localStorage[_0x2fbe1f(0x1e4)]('currentUsername',_0x609410),_0x609410;}if(!_0x3eb053['empty']){const _0x18babd=_0x3eb053['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x18babd),_0x18babd;}const _0x132663=await getDoc(doc(db,_0x2fbe1f(0x1d4),_0x2ef0ab['uid']));if(_0x132663['exists']()&&_0x132663['data']()['username']){const _0x5aaa96=_0x132663['data']()[_0x2fbe1f(0x1db)];return localStorage['setItem']('currentUsername',_0x5aaa96),_0x5aaa96;}}catch(_0x56880e){console['error'](_0x2fbe1f(0x1e2),_0x56880e);}if(_0x2ef0ab['email'])return _0x2ef0ab['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x9c7369){const _0x5d1547=a10_0x2986,_0x516e4c={'status':_0x9c7369,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[_0x5d1547(0x1e1)](_0x516e4c));}function checkNotificationCache(){const _0x51e0c7=a10_0x2986,_0x4f6b61=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x4f6b61)return null;try{const {status:_0x3a1ef5,timestamp:_0x522c16}=JSON[_0x51e0c7(0x1cc)](_0x4f6b61),_0x210b0a=Date['now']();if(_0x210b0a-_0x522c16<CACHE_EXPIRY)return _0x3a1ef5;}catch(_0x3af7ac){}return null;}function a10_0x2986(_0x242ed3,_0x5d5766){const _0x53d256=a10_0x48a4();return a10_0x2986=function(_0x2d77b4,_0x2030a4){_0x2d77b4=_0x2d77b4-0x1cb;let _0x48a4d5=_0x53d256[_0x2d77b4];return _0x48a4d5;},a10_0x2986(_0x242ed3,_0x5d5766);}export function updateNotificationDot(_0x1088a6){const _0x259085=a10_0x2986,_0x56e31c=new MutationObserver((_0x482de7,_0x560237)=>{const _0x594973=document['getElementById']('report-match-notification');_0x594973&&(updateDotStyle(_0x594973,_0x1088a6),_0x560237['disconnect']());});_0x56e31c['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x52b511=document['getElementById'](_0x259085(0x1d7));_0x52b511&&(updateDotStyle(_0x52b511,_0x1088a6),_0x56e31c['disconnect']()),setTimeout(()=>_0x56e31c['disconnect'](),0x1388);}function updateDotStyle(_0x50b6f6,_0x2514b1){const _0x359f14=a10_0x2986;_0x2514b1?(_0x50b6f6['style']['display']='block',_0x50b6f6['style']['backgroundColor']='#ff3b30',_0x50b6f6[_0x359f14(0x1d5)][_0x359f14(0x1e0)]='10px',_0x50b6f6['style'][_0x359f14(0x1cd)]=_0x359f14(0x1cf),_0x50b6f6['style'][_0x359f14(0x1e6)]='absolute',_0x50b6f6['style']['top']='-5px',_0x50b6f6['style'][_0x359f14(0x1cb)]=_0x359f14(0x1dd),_0x50b6f6[_0x359f14(0x1d5)]['borderRadius']='50%',_0x50b6f6['style']['border']='2px\x20solid\x20white',_0x50b6f6[_0x359f14(0x1d5)]['zIndex']=_0x359f14(0x1dc)):_0x50b6f6['style']['display']='none';}function a10_0x48a4(){const _0x65ecf5=['right','parse','height','warn','10px','table','all','uid','bind','users','style','length','report-match-notification','__proto__','empty','pendingMatchesD2','username','999','-8px','userId','onAuthStateChanged','width','stringify','Error\x20fetching\x20username:','toString','setItem','error','position'];a10_0x48a4=function(){return _0x65ecf5;};return a10_0x48a4();}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{const _0x52a556=a10_0x2986;setTimeout(()=>checkPendingMatches(),0x1f4),auth[_0x52a556(0x1df)](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});