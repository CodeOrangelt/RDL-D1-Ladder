const a4_0x48ba8e=a4_0x3f31,a4_0x1f1174=(function(){let _0x29cfdd=!![];return function(_0x963555,_0x76bf90){const _0x140118=_0x29cfdd?function(){if(_0x76bf90){const _0x778565=_0x76bf90['apply'](_0x963555,arguments);return _0x76bf90=null,_0x778565;}}:function(){};return _0x29cfdd=![],_0x140118;};}()),a4_0x2a3aae=a4_0x1f1174(this,function(){const _0x27e79d=a4_0x3f31,_0x31d3f5=function(){const _0xec8855=a4_0x3f31;let _0x1d37b3;try{_0x1d37b3=Function('return\x20(function()\x20'+_0xec8855(0x209)+');')();}catch(_0x1c65a4){_0x1d37b3=window;}return _0x1d37b3;},_0x438695=_0x31d3f5(),_0xc9c7bb=_0x438695['console']=_0x438695['console']||{},_0x247516=['log','warn','info','error','exception','table',_0x27e79d(0x261)];for(let _0x301e8c=0x0;_0x301e8c<_0x247516['length'];_0x301e8c++){const _0x305adb=a4_0x1f1174[_0x27e79d(0x156)][_0x27e79d(0x133)][_0x27e79d(0x11e)](a4_0x1f1174),_0x49a321=_0x247516[_0x301e8c],_0x333400=_0xc9c7bb[_0x49a321]||_0x305adb;_0x305adb['__proto__']=a4_0x1f1174['bind'](a4_0x1f1174),_0x305adb[_0x27e79d(0xd9)]=_0x333400[_0x27e79d(0xd9)]['bind'](_0x333400),_0xc9c7bb[_0x49a321]=_0x305adb;}});a4_0x2a3aae();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x2fdfe5){const _0x4f7695=a4_0x3f31;if(!_0x2fdfe5)return'#ffffff';_0x2fdfe5=_0x2fdfe5[_0x4f7695(0x1ee)]('#','');_0x2fdfe5['length']===0x3&&(_0x2fdfe5=_0x2fdfe5[_0x4f7695(0x199)]('')['map'](_0x1ad63f=>_0x1ad63f+_0x1ad63f)['join'](''));if(_0x2fdfe5['length']!==0x6)return _0x4f7695(0x1d6);const _0x5d483f=parseInt(_0x2fdfe5['substring'](0x0,0x2),0x10),_0x4c9a56=parseInt(_0x2fdfe5['substring'](0x2,0x4),0x10),_0x20452a=parseInt(_0x2fdfe5['substring'](0x4,0x6),0x10),_0x3f680e=(_0x5d483f*0x12b+_0x4c9a56*0x24b+_0x20452a*0x72)/0x3e8;return _0x3f680e>=0x80?_0x4f7695(0x11d):'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x98879=>{const _0xaa74cb=a4_0x3f31;if(!_0x98879){window['location'][_0xaa74cb(0xfe)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0x16900e){console[_0xaa74cb(0x18e)]('Error\x20initializing\x20dashboard:',_0x16900e),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x37be4e){const _0x7524f5=a4_0x3f31;if(!_0x37be4e)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x37be4e+_0x7524f5(0x291));const _0x1c1682=[{'name':_0x7524f5(0x262),'displayName':_0x7524f5(0x194)},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':_0x7524f5(0x266)},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x3026ba=auth['currentUser'];let _0x5c6c7c=null,_0x15575a=null;for(const _0x53309c of _0x1c1682){try{if(_0x3026ba){const _0x1ad61b=doc(db,_0x53309c[_0x7524f5(0x2a4)],_0x3026ba['uid']),_0x4476c2=await getDoc(_0x1ad61b);if(_0x4476c2['exists']()){const _0x359a3b=_0x4476c2['data']();console['log']('Found\x20user\x20in\x20'+_0x53309c['displayName']+_0x7524f5(0xbd),_0x359a3b);const _0x3d106d=(_0x359a3b[_0x7524f5(0x2da)]||_0x359a3b['role']||'')['toLowerCase']();if(_0x3d106d&&_0x3d106d!=='none'){_0x5c6c7c=_0x3d106d,_0x15575a=_0x53309c['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x5c6c7c+_0x7524f5(0x2df)+_0x15575a);break;}}}if(!_0x5c6c7c){const _0x3a7cd4=collection(db,_0x53309c[_0x7524f5(0x2a4)]),_0x5c7787=query(_0x3a7cd4,where(_0x7524f5(0x1e7),'==',_0x37be4e)),_0x559a9b=await getDocs(_0x5c7787);if(!_0x559a9b['empty']){const _0x2f8bb1=_0x559a9b['docs'][0x0]['data']();console[_0x7524f5(0x116)]('Found\x20user\x20in\x20'+_0x53309c['displayName']+_0x7524f5(0x110)+_0x37be4e+':',_0x2f8bb1);const _0x31f014=(_0x2f8bb1[_0x7524f5(0x2da)]||_0x2f8bb1[_0x7524f5(0x2ab)]||'')['toLowerCase']();if(_0x31f014&&_0x31f014!==_0x7524f5(0xe4)){_0x5c6c7c=_0x31f014,_0x15575a=_0x53309c[_0x7524f5(0x122)],console['log']('Found\x20specific\x20role:\x20'+_0x5c6c7c+_0x7524f5(0x2df)+_0x15575a);break;}}}}catch(_0x492dea){console['error'](_0x7524f5(0x1cb)+_0x53309c[_0x7524f5(0x122)]+':',_0x492dea);}}if(_0x5c6c7c){console[_0x7524f5(0x116)](_0x7524f5(0x2c8)+_0x5c6c7c+'\x20(from\x20'+_0x15575a+')');const _0x28d861={'admin':['dashboard','manage-players',_0x7524f5(0x2d9),'manage-articles',_0x7524f5(0x21b),'manage-ranks','inactive-players','settings','manage-trophies','elo-history','manage-highlights',_0x7524f5(0x2e7),_0x7524f5(0x2d9),_0x7524f5(0x119),'manage-levels-ribbons','manage-ribbons'],'owner':[_0x7524f5(0x212),'manage-players',_0x7524f5(0x2d9),'manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history','manage-highlights',_0x7524f5(0x2e7),'manage-matches',_0x7524f5(0x119),_0x7524f5(0x259),'manage-ribbons'],'council':[_0x7524f5(0x212),'manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x28d861[_0x5c6c7c])return console[_0x7524f5(0x116)](_0x7524f5(0x2ba)+_0x5c6c7c+'\x27\x20has\x20permissions:',_0x28d861[_0x5c6c7c]),_0x28d861[_0x5c6c7c];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x37be4e+_0x7524f5(0x1a8)),[_0x7524f5(0x212)];}function setupSidebarNavigation(_0xd0ba83=[]){const _0x4b2794=a4_0x3f31,_0x540ac4=document[_0x4b2794(0xcc)](_0x4b2794(0x277)),_0x3b0e79=document['querySelectorAll']('.admin-section');(!_0xd0ba83||_0xd0ba83['length']===0x0)&&(_0xd0ba83=['dashboard']);_0x540ac4['forEach'](_0x417e9d=>{const _0xb0e87d=_0x4b2794,_0x561ca4=_0x417e9d[_0xb0e87d(0x117)]('data-section');_0xd0ba83['includes'](_0x561ca4)?_0x417e9d['style'][_0xb0e87d(0x2be)]=_0xb0e87d(0x20c):_0x417e9d[_0xb0e87d(0x253)]['display']='none',_0x417e9d[_0xb0e87d(0x299)]('click',()=>{const _0x2da771=_0xb0e87d,_0x496e1b=_0x417e9d['getAttribute']('data-section');if(!_0xd0ba83['includes'](_0x496e1b)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section',_0x2da771(0x18e));return;}_0x540ac4['forEach'](_0xd911a3=>_0xd911a3['classList'][_0x2da771(0x1fb)]('active')),_0x417e9d[_0x2da771(0x1d8)]['add'](_0x2da771(0x283)),_0x3b0e79[_0x2da771(0xb7)](_0x3340b3=>{const _0x3777d5=_0x2da771;_0x3340b3[_0x3777d5(0x253)]['display']=_0x3777d5(0xe4);});const _0x3aeea2=document['getElementById'](_0x496e1b);_0x3aeea2&&(_0x3aeea2['style']['display']=_0x2da771(0x1db),console['log']('Switched\x20to\x20'+_0x496e1b+'\x20section'));});});const _0x5cdde7=document['querySelector'](_0x4b2794(0x298)+_0xd0ba83[0x0]+'\x22]');_0x5cdde7&&_0x5cdde7[_0x4b2794(0x233)](),console[_0x4b2794(0x116)](_0x4b2794(0xed));}function setupTabNavigation(){const _0x349bed=a4_0x3f31,_0x1c61d6=document[_0x349bed(0xcc)]('.nav-item');let _0x4b269d=null,_0x44bd97=new Set();_0x1c61d6['forEach'](_0x3935ef=>{_0x3935ef['addEventListener']('click',function(){const _0x10d7c0=a4_0x3f31,_0x55f6ff=this['getAttribute']('data-section');if(_0x55f6ff===_0x4b269d)return;_0x4b269d&&(document[_0x10d7c0(0x143)](_0x4b269d)[_0x10d7c0(0x253)]['display']='none',_0x1c61d6['forEach'](_0x5d3b56=>_0x5d3b56[_0x10d7c0(0x1d8)]['remove']('active'))),document['getElementById'](_0x55f6ff)['style']['display']='block',this[_0x10d7c0(0x1d8)]['add']('active'),_0x4b269d=_0x55f6ff;});});}function loadSectionData(_0x2d78d2){return;}async function initializeAdminDashboard(){const _0x2ca0eb=a4_0x3f31;try{const _0x3c81b6=auth[_0x2ca0eb(0x280)],_0x3f0567=await getUserTabPermissions(_0x3c81b6['email']);console['log']('User\x20'+_0x3c81b6['email']+'\x20allowed\x20tabs:',_0x3f0567),window['userAllowedTabs']=_0x3f0567,setupSidebarNavigation(_0x3f0567),setupLadderSelector(),setupDashboardSection(),_0x3f0567['includes'](_0x2ca0eb(0x2e5))&&setupManagePlayersSection(),_0x3f0567['includes']('elo-history')&&setupEloHistorySection(),_0x3f0567[_0x2ca0eb(0x1d0)](_0x2ca0eb(0x2dc))&&setupRankControls(),_0x3f0567[_0x2ca0eb(0x1d0)]('manage-articles')&&setupManageArticlesSection(),_0x3f0567[_0x2ca0eb(0x1d0)](_0x2ca0eb(0x2e7))&&setupUserRolesSection(),_0x3f0567['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x3f0567[_0x2ca0eb(0x1d0)]('manage-highlights')&&setupManageHighlightsSection(),_0x3f0567[_0x2ca0eb(0x1d0)](_0x2ca0eb(0x20f))&&setupInactivePlayersSection(),_0x3f0567['includes'](_0x2ca0eb(0x2d9))&&setupManageMatchesSection(),_0x3f0567['includes']('manage-points')&&setupManagePointsSection(),_0x3f0567['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x3f0567);}catch(_0x7a64e8){console['error'](_0x2ca0eb(0x275),_0x7a64e8);}}function setupDataLoadButtons(_0x1fc7fd=[]){const _0x44e3bd=a4_0x3f31;(!_0x1fc7fd||_0x1fc7fd['length']===0x0)&&(_0x1fc7fd=['dashboard']);const _0x5b97fa=document[_0x44e3bd(0x143)](_0x44e3bd(0x20d));_0x5b97fa&&_0x5b97fa[_0x44e3bd(0x299)]('click',function(){const _0x4d8f46=_0x44e3bd;this['classList']['add']('loading'),this['innerHTML']=_0x4d8f46(0x23b),loadDashboardOverview()['then'](()=>{const _0x404de5=_0x4d8f46;this['classList']['remove'](_0x404de5(0xb9)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x1bad40=>{const _0x4058af=_0x4d8f46;console[_0x4058af(0x18e)](_0x4058af(0x193),_0x1bad40),this['classList'][_0x4058af(0x1fb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x484cda=_0x4058af;this['innerHTML']=_0x484cda(0xd1);},0xbb8);});});if(_0x1fc7fd['includes']('manage-trophies')){const _0x5a3d45=document['getElementById']('load-trophies-data');_0x5a3d45&&_0x5a3d45['addEventListener'](_0x44e3bd(0x233),function(){const _0x31a547=_0x44e3bd;console[_0x31a547(0x116)](_0x31a547(0xcd)),this[_0x31a547(0x1d8)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x44138b=_0x31a547;this['classList'][_0x44138b(0x1fb)]('loading'),this[_0x44138b(0x177)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x35d5b8=>{const _0x9d16de=_0x31a547;console['error'](_0x9d16de(0xf2),_0x35d5b8),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x1fc7fd[_0x44e3bd(0x1d0)]('manage-players')){const _0x2b79db=document['getElementById']('load-players-data');_0x2b79db&&_0x2b79db[_0x44e3bd(0x299)](_0x44e3bd(0x233),function(){const _0x2f0eee=_0x44e3bd;console[_0x2f0eee(0x116)]('Load\x20players\x20data\x20clicked'),this[_0x2f0eee(0x1d8)]['add'](_0x2f0eee(0xb9)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x2f0eee(0x28c)](()=>{const _0x5922f5=_0x2f0eee;this['classList']['remove']('loading'),this[_0x5922f5(0x177)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x3a7e2e=>{const _0x1335e9=_0x2f0eee;console['error']('Error\x20loading\x20players:',_0x3a7e2e),this[_0x1335e9(0x1d8)][_0x1335e9(0x1fb)]('loading'),this['innerHTML']=_0x1335e9(0xe5),setTimeout(()=>{const _0x5cfa98=_0x1335e9;this[_0x5cfa98(0x177)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x1fc7fd['includes'](_0x44e3bd(0x19e))){const _0x1c1f56=document['getElementById']('load-elo-history-data');_0x1c1f56&&_0x1c1f56[_0x44e3bd(0x299)]('click',function(){const _0x12f124=_0x44e3bd;console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add'](_0x12f124(0xb9)),this[_0x12f124(0x177)]=_0x12f124(0x23b),loadEloHistory(0x1)['then'](()=>{const _0x22f1d7=_0x12f124;this['classList']['remove'](_0x22f1d7(0xb9)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x2122b1=>{const _0xcafc5f=_0x12f124;console['error'](_0xcafc5f(0x296),_0x2122b1),this['classList']['remove'](_0xcafc5f(0xb9)),this[_0xcafc5f(0x177)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xda186a=_0xcafc5f;this[_0xda186a(0x177)]=_0xda186a(0x25a);},0xbb8);});});}if(_0x1fc7fd[_0x44e3bd(0x1d0)]('manage-articles')){const _0x393cdc=document['getElementById']('load-articles-data');_0x393cdc&&_0x393cdc['addEventListener'](_0x44e3bd(0x233),function(){const _0x3d2e67=_0x44e3bd;console[_0x3d2e67(0x116)]('Load\x20articles\x20data\x20clicked'),this[_0x3d2e67(0x1d8)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x17e69f=_0x3d2e67;this['classList']['remove']('loading'),this['innerHTML']=_0x17e69f(0xdf);})['catch'](_0x3d1aa4=>{const _0x2ac832=_0x3d2e67;console['error']('Error\x20loading\x20articles:',_0x3d1aa4),this[_0x2ac832(0x1d8)]['remove'](_0x2ac832(0xb9)),this[_0x2ac832(0x177)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5bc41f=_0x2ac832;this['innerHTML']=_0x5bc41f(0xdf);},0xbb8);});});}if(_0x1fc7fd['includes']('user-roles-section')){const _0x2d9bcf=document['getElementById']('load-users-data');_0x2d9bcf&&_0x2d9bcf[_0x44e3bd(0x299)]('click',function(){const _0x55532f=_0x44e3bd;console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x55532f(0x23b),loadUsersWithRoles()['then'](()=>{const _0x3dd5ca=_0x55532f;this['classList']['remove']('loading'),this[_0x3dd5ca(0x177)]=_0x3dd5ca(0x2bf);})['catch'](_0x43486d=>{const _0x3365b6=_0x55532f;console['error']('Error\x20loading\x20users:',_0x43486d),this['classList']['remove'](_0x3365b6(0xb9)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x1fc7fd['includes']('inactive-players')){const _0x5edf9f=document['getElementById']('load-inactive-players-data');_0x5edf9f&&_0x5edf9f['addEventListener']('click',function(){const _0x1f9495=_0x44e3bd;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add'](_0x1f9495(0xb9)),this['innerHTML']=_0x1f9495(0x23b),loadInactivePlayersData()['then'](()=>{const _0x581682=_0x1f9495;this['classList']['remove']('loading'),this[_0x581682(0x177)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x5a5de9=>{const _0xb5d9a6=_0x1f9495;console[_0xb5d9a6(0x18e)]('Error\x20loading\x20inactive\x20players:',_0x5a5de9),this[_0xb5d9a6(0x1d8)][_0xb5d9a6(0x1fb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2ab4a5=_0xb5d9a6;this['innerHTML']=_0x2ab4a5(0x241);},0xbb8);});});}if(_0x1fc7fd['includes']('manage-highlights')){const _0xd2119b=document['getElementById']('load-highlights-data');_0xd2119b&&_0xd2119b[_0x44e3bd(0x299)]('click',function(){console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x2c1d2f=a4_0x3f31;this['classList'][_0x2c1d2f(0x1fb)]('loading'),this[_0x2c1d2f(0x177)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x56b530=>{const _0x687176=a4_0x3f31;console['error']('Error\x20loading\x20highlights:',_0x56b530),this[_0x687176(0x1d8)]['remove']('loading'),this[_0x687176(0x177)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x1fc7fd['includes']('manage-matches')){const _0x56a38d=document[_0x44e3bd(0x143)]('load-matches-data');_0x56a38d&&_0x56a38d['addEventListener'](_0x44e3bd(0x233),function(){const _0x5c6578=_0x44e3bd;console['log']('Load\x20matches\x20data\x20clicked'),this['classList'][_0x5c6578(0xd3)](_0x5c6578(0xb9)),this['innerHTML']=_0x5c6578(0x23b),loadMatchesData(0x1)[_0x5c6578(0x28c)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x596cde=>{const _0x14afc7=_0x5c6578;console['error'](_0x14afc7(0x281),_0x596cde),this[_0x14afc7(0x1d8)][_0x14afc7(0x1fb)]('loading'),this[_0x14afc7(0x177)]=_0x14afc7(0xe5),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x1fc7fd[_0x44e3bd(0x1d0)]('manage-ribbons')){const _0x29bb7d=document[_0x44e3bd(0x143)]('load-ribbons-data');_0x29bb7d&&_0x29bb7d['addEventListener']('click',function(){console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0xc2a4a5=a4_0x3f31;this[_0xc2a4a5(0x1d8)]['remove']('loading'),this[_0xc2a4a5(0x177)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x121aad=>{const _0x35f1f9=a4_0x3f31;console['error']('Error\x20loading\x20ribbons:',_0x121aad),this['classList']['remove']('loading'),this['innerHTML']=_0x35f1f9(0xe5),setTimeout(()=>{const _0x399bcd=_0x35f1f9;this[_0x399bcd(0x177)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console[_0x44e3bd(0x116)](_0x44e3bd(0x2a8));}function setupDashboardSection(){const _0xebe237=a4_0x3f31;document[_0xebe237(0x143)]('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')[_0xebe237(0xc1)]='-';}function setupLadderSelector(){const _0x482356=a4_0x3f31,_0x362520=document[_0x482356(0xcc)]('.ladder-switch\x20input');_0x362520['forEach'](_0x2626e1=>{_0x2626e1['addEventListener']('change',()=>{const _0x2e0fd5=a4_0x3f31;currentLadder=_0x2626e1[_0x2e0fd5(0x16d)],document['body']['setAttribute']('data-ladder',currentLadder);const _0x47e6b2=document['getElementById']('current-ladder-display');_0x47e6b2&&(_0x47e6b2['textContent']=currentLadder),document['getElementById'](_0x2e0fd5(0xb6))['textContent']='-',document[_0x2e0fd5(0x143)](_0x2e0fd5(0x13d))['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution'][_0x2e0fd5(0x153)](),charts['rankDistribution']=null),charts['activity']&&(charts[_0x2e0fd5(0x130)][_0x2e0fd5(0x153)](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x2e0fd5(0x2d7));});});const _0x5ceac2=document['getElementById']('current-ladder-display');_0x5ceac2&&(_0x5ceac2['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x3e2101=a4_0x3f31;try{console[_0x3e2101(0x116)]('Loading\x20dashboard\x20overview\x20data...'),document['getElementById']('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')[_0x3e2101(0xc1)]='-',document[_0x3e2101(0x143)]('rejected-count')['textContent']='-';const _0x2f1b55=currentLadder==='D1'?_0x3e2101(0x270):currentLadder==='D2'?_0x3e2101(0x203):'playersD3',_0x15572a=currentLadder==='D1'?_0x3e2101(0x2ec):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x8f17af=currentLadder==='D1'?_0x3e2101(0x129):currentLadder==='D2'?_0x3e2101(0x294):'pendingMatchesD3',_0x2a4070=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console['log'](_0x3e2101(0x2a7)+currentLadder+':\x20'+_0x2f1b55+',\x20'+_0x15572a);const _0x507bbd=await getDocs(collection(db,_0x2f1b55)),_0x50452f=_0x507bbd[_0x3e2101(0x146)],_0x245a75=await getDocs(collection(db,_0x15572a)),_0x1ca5ae=_0x245a75['size'],_0x548bc0=await getDocs(collection(db,_0x8f17af)),_0x10fb4d=_0x548bc0['size'],_0x1aae47=await getDocs(collection(db,_0x2a4070)),_0x30a6e2=_0x1aae47[_0x3e2101(0x146)];return document['getElementById'](_0x3e2101(0xb6))['textContent']=_0x50452f,document[_0x3e2101(0x143)]('match-count')['textContent']=_0x1ca5ae,document['getElementById']('pending-count')[_0x3e2101(0xc1)]=_0x10fb4d,document[_0x3e2101(0x143)]('rejected-count')['textContent']=_0x30a6e2,await createRankDistributionChart(),await createActivityChart(),console[_0x3e2101(0x116)]('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x585f07){console['error']('Error\x20loading\x20dashboard\x20data:',_0x585f07);throw _0x585f07;}}async function createRankDistributionChart(){const _0x54c482=a4_0x3f31;try{const _0x4a1f40=collection(db,currentLadder==='D1'?'players':_0x54c482(0x203)),_0x4f3245=await getDocs(_0x4a1f40),_0x360a44={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x4f3245['forEach'](_0x545bb3=>{const _0x257bdd=_0x54c482,_0x49c02f=_0x545bb3['data'](),_0x4a6c00=_0x49c02f['eloRating']||0x4b0;if(_0x4a6c00>=0x7d0)_0x360a44['Emerald']++;else{if(_0x4a6c00>=0x708)_0x360a44['Gold']++;else{if(_0x4a6c00>=0x640)_0x360a44['Silver']++;else{if(_0x4a6c00>=0x578)_0x360a44[_0x257bdd(0x1c0)]++;else _0x360a44['Unranked']++;}}}});const _0x45a899=document['getElementById'](_0x54c482(0x220));charts[_0x54c482(0xc4)]&&charts[_0x54c482(0xc4)]['destroy'](),charts['rankDistribution']=new Chart(_0x45a899,{'type':'doughnut','data':{'labels':Object['keys'](_0x360a44),'datasets':[{'data':Object[_0x54c482(0x168)](_0x360a44),'backgroundColor':['#808080',_0x54c482(0x28f),_0x54c482(0x23d),_0x54c482(0x264),'#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x54c482(0x274),'color':_0x54c482(0x2cf),'font':{'size':0x10}}}}});}catch(_0x7fc503){console[_0x54c482(0x18e)](_0x54c482(0x2d0),_0x7fc503),document['getElementById']('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x4ed759=a4_0x3f31;try{const _0x2797c6=currentLadder==='D1'?_0x4ed759(0x2ec):'approvedMatchesD2',_0x2f2413=collection(db,_0x2797c6),_0x521367=new Date();_0x521367[_0x4ed759(0x1de)](_0x521367[_0x4ed759(0x282)]()-0x7);const _0x49f735=query(_0x2f2413,where('approvedAt','>=',_0x521367),orderBy(_0x4ed759(0x2db),'asc')),_0x359439=await getDocs(_0x49f735),_0x17ced2=['Sunday','Monday','Tuesday','Wednesday','Thursday',_0x4ed759(0x132),'Saturday'],_0x51aa7f=_0x17ced2[_0x4ed759(0x2c1)]((_0x1bb9bf,_0x5202b6)=>({..._0x1bb9bf,[_0x5202b6]:0x0}),{});_0x359439[_0x4ed759(0xb7)](_0x2472a3=>{const _0x4da881=_0x4ed759,_0x3e28d4=_0x2472a3['data']();if(_0x3e28d4[_0x4da881(0x2db)]){const _0x55a8a8=_0x17ced2[new Date(_0x3e28d4['approvedAt']['seconds']*0x3e8)['getDay']()];_0x51aa7f[_0x55a8a8]++;}});const _0x249972=document['getElementById']('activity-chart');charts['activity']&&charts['activity'][_0x4ed759(0x153)](),charts['activity']=new Chart(_0x249972,{'type':'bar','data':{'labels':_0x17ced2,'datasets':[{'label':'Matches\x20Played','data':_0x17ced2['map'](_0x4cba37=>_0x51aa7f[_0x4cba37]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0x4ed759(0x201),'borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x4ed759(0x2cf)},'grid':{'color':_0x4ed759(0x2eb)}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x4469b5){console['error']('Error\x20creating\x20activity\x20chart:',_0x4469b5),document[_0x4ed759(0x143)]('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x398327=a4_0x3f31,_0xf1ac8a=document['getElementById']('players-table-body');if(!_0xf1ac8a)return;_0xf1ac8a['innerHTML']=_0x398327(0x2ad);try{let _0x419094='players';if(currentLadder==='D2')_0x419094=_0x398327(0x203);else currentLadder==='D3'&&(_0x419094='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x419094+'\x20collection...');const _0xfe5dcf=collection(db,_0x419094),_0x5aa1a8=query(_0xfe5dcf,orderBy('eloRating','desc')),_0xb1fd89=await getDocs(_0x5aa1a8);if(_0xb1fd89['empty']){_0xf1ac8a['innerHTML']=_0x398327(0x18f);return;}_0xf1ac8a[_0x398327(0x177)]='';let _0x32edd5=0x1;_0xb1fd89['forEach'](_0x23f098=>{const _0x5d9a9f=_0x398327,_0x1f3f69=_0x23f098['data'](),_0x52e5dd=getRankFromElo(_0x1f3f69['eloRating']||0x4b0),_0x3f30c6=getRankStyle(_0x1f3f69['eloRating']||0x4b0),_0x48308a=document['createElement']('tr');_0x48308a['innerHTML']=_0x5d9a9f(0x1c4)+_0x32edd5+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x3f30c6[_0x5d9a9f(0x27f)]+_0x5d9a9f(0xf0)+(_0x1f3f69[_0x5d9a9f(0x2ee)]||_0x5d9a9f(0xda))+_0x5d9a9f(0x118)+(_0x1f3f69['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x3f30c6['color']+_0x5d9a9f(0x2cc)+_0x52e5dd+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1f3f69['wins']||0x0)+'W\x20/\x20'+(_0x1f3f69['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x23f098['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x23f098['id']+_0x5d9a9f(0x2bd),_0xf1ac8a['appendChild'](_0x48308a),_0x32edd5++;}),setupPlayerActionButtons();}catch(_0x13b57d){console['error'](_0x398327(0x134),_0x13b57d),_0xf1ac8a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x13b57d[_0x398327(0x1e9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x1d5892){const _0x275308=a4_0x3f31;if(_0x1d5892>=0x7d0)return _0x275308(0x1ff);if(_0x1d5892>=0x708)return'Gold';if(_0x1d5892>=0x640)return _0x275308(0x112);if(_0x1d5892>=0x578)return'Bronze';return _0x275308(0x23e);}function setupPlayerActionButtons(){const _0x1e833e=a4_0x3f31;document[_0x1e833e(0xcc)](_0x1e833e(0x197))[_0x1e833e(0xb7)](_0x438a15=>{const _0x2b1a4c=_0x1e833e;_0x438a15['addEventListener'](_0x2b1a4c(0x233),async _0x5d1392=>{const _0x255088=_0x5d1392['currentTarget']['dataset']['id'];openEditPlayerModal(_0x255088);});}),document[_0x1e833e(0xcc)]('.delete-btn')['forEach'](_0x248dee=>{const _0x3d8c04=_0x1e833e;_0x248dee['addEventListener'](_0x3d8c04(0x233),async _0x5159e3=>{const _0x46db7c=_0x3d8c04,_0x219160=_0x5159e3[_0x46db7c(0x1cf)]['dataset']['id'];confirmDeletePlayer(_0x219160);});});}async function openEditPlayerModal(_0x129e2f){const _0x5a681d=a4_0x3f31;try{const _0x35c63d=currentLadder==='D1'?'players':'playersD2',_0x54dbe3=doc(db,_0x35c63d,_0x129e2f),_0x4ae5cf=await getDoc(_0x54dbe3);if(!_0x4ae5cf[_0x5a681d(0x100)]()){showNotification(_0x5a681d(0x104),'error');return;}const _0x44c5fb=_0x4ae5cf['data'](),_0x41bcd5=document['getElementById']('edit-player-modal'),_0x4bc04d=document['getElementById'](_0x5a681d(0xc2)),_0x1bf9d0=document['getElementById']('edit-elo'),_0x33fc6b=document['getElementById'](_0x5a681d(0x154)),_0x2cd85d=document['getElementById'](_0x5a681d(0x1ca));_0x4bc04d[_0x5a681d(0x16d)]=_0x44c5fb['username']||'',_0x1bf9d0['value']=_0x44c5fb['eloRating']||0x4b0,_0x33fc6b['value']=_0x44c5fb['wins']||0x0,_0x2cd85d['value']=_0x44c5fb['losses']||0x0,_0x41bcd5['dataset'][_0x5a681d(0xca)]=_0x129e2f,_0x41bcd5['classList']['add']('active');}catch(_0x236527){console[_0x5a681d(0x18e)]('Error\x20opening\x20edit\x20modal:',_0x236527),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x3ad4e5=a4_0x3f31;try{const _0x1ac32f=document['getElementById']('edit-player-modal'),_0x15eed3=_0x1ac32f['dataset']['playerId'];if(!_0x15eed3){showNotification(_0x3ad4e5(0xb4),'error');return;}const _0x5b05a2=document['getElementById']('edit-username'),_0x29d66f=document[_0x3ad4e5(0x143)](_0x3ad4e5(0x128)),_0x403538=document['getElementById']('edit-wins'),_0x29cbb3=document['getElementById']('edit-losses'),_0x4fc956=_0x5b05a2['value']['trim'](),_0x2ed418=parseInt(_0x29d66f['value']),_0x3cb12f=parseInt(_0x403538[_0x3ad4e5(0x16d)]),_0x2e48ce=parseInt(_0x29cbb3['value']);if(!_0x4fc956||isNaN(_0x2ed418)){showNotification(_0x3ad4e5(0x125),_0x3ad4e5(0x18e));return;}const _0xf3d56e=currentLadder==='D1'?'players':'playersD2',_0x2cb128=doc(db,_0xf3d56e,_0x15eed3),_0xe04d1e=await getDoc(_0x2cb128),_0x5046ed=_0xe04d1e[_0x3ad4e5(0x100)]()?_0xe04d1e['data']():{},_0x2ca1b1=_0x5046ed['eloRating']||0x4b0;await updateDoc(_0x2cb128,{'username':_0x4fc956,'eloRating':_0x2ed418,'wins':_0x3cb12f||0x0,'losses':_0x2e48ce||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x3ad4e5(0x280)]['email']});if(_0x2ed418!==_0x2ca1b1){const _0x323d53=currentLadder==='D1'?_0x3ad4e5(0x1da):_0x3ad4e5(0x21f);await addDoc(collection(db,_0x323d53),{'player':_0x4fc956,'previousElo':_0x2ca1b1,'newElo':_0x2ed418,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser'][_0x3ad4e5(0x1e7)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x3ad4e5(0x2c5));}catch(_0x41ba8b){console['error'](_0x3ad4e5(0x22c),_0x41ba8b),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x41ba8b[_0x3ad4e5(0x1e9)],'error');}}function closeEditPlayerModal(){const _0x3d1e2c=a4_0x3f31,_0x4ab94d=document['getElementById']('edit-player-modal');_0x4ab94d['classList']['remove'](_0x3d1e2c(0x283)),_0x4ab94d['dataset']['playerId']='';}async function confirmDeletePlayer(_0x2102ac){const _0x5b77aa=a4_0x3f31;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0xea6681=currentLadder==='D1'?'players':_0x5b77aa(0x203);await deleteDoc(doc(db,_0xea6681,_0x2102ac)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x7a4e9b){console['error'](_0x5b77aa(0x2e3),_0x7a4e9b),showNotification(_0x5b77aa(0x1c5)+_0x7a4e9b['message'],'error');}}async function setupManagePlayersSection(){const _0x43079f=a4_0x3f31,_0x42f6b6=document['getElementById'](_0x43079f(0x173));_0x42f6b6&&_0x42f6b6['addEventListener']('submit',async _0x409cbb=>{_0x409cbb['preventDefault'](),await addNewPlayer();});const _0x30b506=document['getElementById']('player-search');_0x30b506&&_0x30b506['addEventListener'](_0x43079f(0x260),debounce(filterPlayerTable,0x12c));const _0x429beb=document[_0x43079f(0x143)]('save-player-btn');_0x429beb&&_0x429beb['addEventListener']('click',saveEditedPlayer);const _0x10d7d7=document['getElementById']('cancel-edit-btn');_0x10d7d7&&_0x10d7d7[_0x43079f(0x299)](_0x43079f(0x233),closeEditPlayerModal);const _0xfe0318=document['getElementById']('edit-player-modal');_0xfe0318&&_0xfe0318['addEventListener']('click',_0x688ae5=>{_0x688ae5['target']===_0xfe0318&&closeEditPlayerModal();});const _0x151063=document['getElementById']('players-ladder-selector');_0x151063&&_0x151063['addEventListener'](_0x43079f(0xfb),()=>{currentLadder=_0x151063['value'],loadPlayersData();});}async function addNewPlayer(){const _0x2e733e=a4_0x3f31;try{const _0x257cfc=document['getElementById']('new-player-username'),_0x2b3e37=document[_0x2e733e(0x143)]('new-player-elo'),_0x5040ab=_0x257cfc['value']['trim'](),_0x48ab2c=parseInt(_0x2b3e37['value'])||0x4b0;if(!_0x5040ab){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0x5040ab+'\x20with\x20ELO\x20'+_0x48ab2c+_0x2e733e(0x208)+currentLadder+'\x20ladder');let _0xea24d5='players',_0x2837bb=_0x2e733e(0x1da);if(currentLadder==='D2')_0xea24d5='playersD2',_0x2837bb='eloHistoryD2';else currentLadder==='D3'&&(_0xea24d5='playersD3',_0x2837bb='eloHistoryD3');const _0x1149bf=query(collection(db,_0xea24d5),where('username','==',_0x5040ab)),_0x548a5c=await getDocs(_0x1149bf);if(!_0x548a5c[_0x2e733e(0x248)]){alert('Username\x20'+_0x5040ab+_0x2e733e(0x15c)+currentLadder+_0x2e733e(0xfa));return;}const _0x56c018=auth['currentUser'],_0x5d6c64={'username':_0x5040ab,'eloRating':_0x48ab2c,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x56c018?_0x56c018[_0x2e733e(0x1e7)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0xea24d5),_0x5d6c64),await addDoc(collection(db,_0x2837bb),{'player':_0x5040ab,'previousElo':0x4b0,'newElo':_0x48ab2c,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x56c018?_0x56c018['email']:'admin','gameMode':currentLadder}),_0x257cfc[_0x2e733e(0x16d)]='',_0x2b3e37['value']='1200',alert('Player\x20'+_0x5040ab+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x58f9a6){console['error']('Error\x20adding\x20player:',_0x58f9a6),alert('Error\x20adding\x20player:\x20'+_0x58f9a6['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x564e5a=a4_0x3f31,_0x55892d=document[_0x564e5a(0x143)](_0x564e5a(0x173));_0x55892d&&_0x55892d['addEventListener']('submit',_0x277af8=>{_0x277af8['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x378cf9=a4_0x3f31,_0x37b0ba=document['getElementById']('player-search')['value']['toLowerCase'](),_0xe146cb=document['querySelectorAll']('#players-table-body\x20tr');let _0x460e98=0x0;_0xe146cb['forEach'](_0x55c9a7=>{const _0x309e54=a4_0x3f31,_0x4ad8ab=_0x55c9a7['querySelector']('.username')?.['textContent'][_0x309e54(0x215)]()||'';_0x4ad8ab['includes'](_0x37b0ba)?(_0x55c9a7['style'][_0x309e54(0x2be)]='',_0x460e98++):_0x55c9a7[_0x309e54(0x253)]['display']='none';});const _0x5eef7e=document['getElementById'](_0x378cf9(0x102));_0x5eef7e&&(_0x460e98===0x0&&_0x37b0ba!==''?_0x5eef7e['style']['display']='block':_0x5eef7e['style']['display']=_0x378cf9(0xe4));}function debounce(_0x43bdef,_0x5f32ae){let _0x2cb449;return function(..._0xcc3315){clearTimeout(_0x2cb449),_0x2cb449=setTimeout(()=>_0x43bdef['apply'](this,_0xcc3315),_0x5f32ae);};}async function loadEloHistory(_0x1bfed5=0x1){const _0x383d03=a4_0x3f31,_0xe6b01c=document['getElementById']('elo-history-table-body'),_0x4519d9=currentLadder['toLowerCase']();if(!_0xe6b01c)return;_0xe6b01c['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x14614b=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0x383d03(0x21f):'eloHistoryD3',_0x5572ad=collection(db,_0x14614b);let _0x582ea1;if(_0x1bfed5>eloHistoryPagination[_0x4519d9]['page']&&eloHistoryPagination[_0x4519d9][_0x383d03(0x279)])_0x582ea1=query(_0x5572ad,orderBy('timestamp',_0x383d03(0x1f5)),startAfter(eloHistoryPagination[_0x4519d9]['lastVisible']),limit(PAGE_SIZE));else _0x1bfed5<eloHistoryPagination[_0x4519d9]['page']&&eloHistoryPagination[_0x4519d9]['firstVisible']?_0x582ea1=query(_0x5572ad,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x4519d9]['firstVisible']),limitToLast(PAGE_SIZE)):_0x582ea1=query(_0x5572ad,orderBy(_0x383d03(0x15b),'desc'),limit(PAGE_SIZE));const _0x13377f=await getDocs(_0x582ea1);if(_0x13377f[_0x383d03(0x248)]){_0xe6b01c['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x4519d9+'-page-indicator')[_0x383d03(0xc1)]=_0x383d03(0x235);return;}eloHistoryPagination[_0x4519d9]['page']=_0x1bfed5,eloHistoryPagination[_0x4519d9]['firstVisible']=_0x13377f[_0x383d03(0x15a)][0x0],eloHistoryPagination[_0x4519d9]['lastVisible']=_0x13377f['docs'][_0x13377f['docs'][_0x383d03(0x2e4)]-0x1];const _0x57031e=new Map();_0xe6b01c['innerHTML']='';const _0x32c709=async _0x1e2a3f=>{const _0x31df41=_0x383d03;if(typeof _0x1e2a3f!=='string'||_0x1e2a3f['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x1e2a3f))return _0x1e2a3f;if(_0x57031e['has'](_0x1e2a3f))return _0x57031e['get'](_0x1e2a3f);try{for(const _0x2e20c5 of['players',_0x31df41(0x203),'playersD3','nonParticipants']){const _0x4362d3=await getDoc(doc(db,_0x2e20c5,_0x1e2a3f));if(_0x4362d3['exists']()&&_0x4362d3[_0x31df41(0x26d)]()[_0x31df41(0x2ee)]){const _0x343ea8=_0x4362d3[_0x31df41(0x26d)]()[_0x31df41(0x2ee)];return _0x57031e['set'](_0x1e2a3f,_0x343ea8),_0x343ea8;}}return _0x1e2a3f;}catch(_0x56598c){return console[_0x31df41(0x1b4)]('Error\x20resolving\x20username\x20for\x20'+_0x1e2a3f+':',_0x56598c),_0x1e2a3f;}};for(const _0x58c1eb of _0x13377f['docs']){const _0xcd235a=_0x58c1eb['data'](),_0x23fe69=document['createElement']('tr'),_0xad8332=_0xcd235a[_0x383d03(0x15b)]?new Date(_0xcd235a['timestamp'][_0x383d03(0x183)]*0x3e8)['toLocaleString']():'N/A',_0x501953=_0xcd235a[_0x383d03(0x178)]-_0xcd235a['previousElo'],_0xd99f83=_0x501953>0x0?_0x383d03(0x13b):_0x501953<0x0?'negative-change':'',_0x1d650e=_0x501953>0x0?'+':'',_0x51596a=_0xcd235a['player']||_0xcd235a[_0x383d03(0x2ee)]||_0xcd235a['userId']||_0x383d03(0x26e),_0x314d36=await _0x32c709(_0x51596a);_0x23fe69[_0x383d03(0x177)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0xad8332+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x314d36+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0xcd235a['previousElo']||_0x383d03(0x26e))+_0x383d03(0x13e)+(_0xcd235a[_0x383d03(0x178)]||_0x383d03(0x26e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0xd99f83+'\x22>'+_0x1d650e+_0x501953+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0xcd235a['type'])+_0x383d03(0x2ac)+(_0xcd235a['modifiedBy']||_0xcd235a['promotedBy']||_0xcd235a['demotedBy']||_0x383d03(0x226))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xe6b01c['appendChild'](_0x23fe69);}document[_0x383d03(0x143)](_0x4519d9+'-page-indicator')['textContent']=_0x383d03(0x297)+_0x1bfed5;const _0x119283=document['getElementById'](_0x4519d9+'-prev-page'),_0x28e919=document['getElementById'](_0x4519d9+'-next-page');if(_0x119283)_0x119283[_0x383d03(0x1b7)]=_0x1bfed5<=0x1;const _0x3af184=query(_0x5572ad,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x4519d9][_0x383d03(0x279)]),limit(0x1)),_0x4999ad=await getDocs(_0x3af184);if(_0x28e919)_0x28e919[_0x383d03(0x1b7)]=_0x4999ad['empty'];}catch(_0x3c3c01){console['error']('Error\x20loading\x20ELO\x20history:',_0x3c3c01),_0xe6b01c['innerHTML']=_0x383d03(0x227)+_0x3c3c01['message']+_0x383d03(0x10e);}}function formatHistoryType(_0x471e55){const _0x3c2e91=a4_0x3f31;switch(_0x471e55){case _0x3c2e91(0x2c7):return'Match\x20Result';case'promotion':return'Promotion';case'demotion':return'Demotion';case'admin_modification':return _0x3c2e91(0x160);case'initial_placement':return'Initial\x20Placement';default:return _0x471e55||_0x3c2e91(0xda);}}function setupEloHistorySection(){const _0x3e857d=a4_0x3f31;document['getElementById']('d1-prev-page')[_0x3e857d(0x299)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById'](_0x3e857d(0x11a))[_0x3e857d(0x299)]('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById'](_0x3e857d(0x2c4))[_0x3e857d(0x299)]('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x16aa82=document['getElementById'](_0x3e857d(0x181)),_0x4f65cd=document[_0x3e857d(0x143)](_0x3e857d(0x19c));_0x16aa82&&_0x16aa82['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x4f65cd&&_0x4f65cd[_0x3e857d(0x299)]('click',()=>{const _0x4d2908=_0x3e857d;loadEloHistory(eloHistoryPagination['d3'][_0x4d2908(0x246)]+0x1);});const _0x48bdbc=document['getElementById']('elo-history-search');_0x48bdbc&&_0x48bdbc[_0x3e857d(0x299)]('input',debounce(filterEloHistoryTable,0x12c));const _0x1adb94=document[_0x3e857d(0x143)](_0x3e857d(0x10d));_0x1adb94&&_0x1adb94['addEventListener'](_0x3e857d(0xfb),applyEloHistoryFilters);const _0x462528=document['getElementById']('reset-history-filters');_0x462528&&_0x462528['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x3f296c=a4_0x3f31,_0x46a729=document[_0x3f296c(0x143)]('elo-history-search')[_0x3f296c(0x16d)][_0x3f296c(0x215)](),_0x4b6917=document['querySelectorAll'](_0x3f296c(0x23a));let _0x4373f3=0x0;_0x4b6917['forEach'](_0x1121e4=>{const _0x4dac3e=_0x3f296c;if(_0x1121e4['classList']['contains']('loading-cell')||_0x1121e4['classList']['contains'](_0x4dac3e(0x10c))||_0x1121e4['classList']['contains'](_0x4dac3e(0x290)))return;const _0x46d4c5=_0x1121e4[_0x4dac3e(0x207)]('.player')?.['textContent'][_0x4dac3e(0x215)]()||'',_0x1cc968=_0x1121e4['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x849972=_0x1121e4['querySelector']('.admin-action')?.['textContent'][_0x4dac3e(0x215)]()||'';_0x46d4c5['includes'](_0x46a729)||_0x1cc968[_0x4dac3e(0x1d0)](_0x46a729)||_0x849972['includes'](_0x46a729)?(_0x1121e4['style']['display']='',_0x4373f3++):_0x1121e4[_0x4dac3e(0x253)]['display']='none';});}async function applyEloHistoryFilters(){const _0x599b69=a4_0x3f31,_0x6ffc88=document['getElementById']('history-start-date')[_0x599b69(0x16d)],_0x565e16=document['getElementById']('history-end-date')['value'],_0x5f30bf=document[_0x599b69(0x143)]('history-type-filter')['value'],_0x58530b=currentLadder[_0x599b69(0x215)]();eloHistoryPagination[_0x58530b]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x43fa16=document['getElementById']('elo-history-table-body');_0x43fa16[_0x599b69(0x177)]=_0x599b69(0x1b1);try{const _0x5bb186=currentLadder==='D1'?_0x599b69(0x1da):'eloHistoryD2',_0x4a46be=collection(db,_0x5bb186);let _0x485ddb=[orderBy(_0x599b69(0x15b),'desc')];if(_0x6ffc88){const _0x536b70=new Date(_0x6ffc88);_0x536b70['setHours'](0x0,0x0,0x0,0x0),_0x485ddb['push'](where('timestamp','>=',_0x536b70));}if(_0x565e16){const _0xe2892=new Date(_0x565e16);_0xe2892['setHours'](0x17,0x3b,0x3b,0x3e7),_0x485ddb['push'](where('timestamp','<=',_0xe2892));}_0x5f30bf&&_0x5f30bf!=='all'&&_0x485ddb['push'](where('type','==',_0x5f30bf));_0x485ddb[_0x599b69(0x2f0)](limit(PAGE_SIZE));const _0x4dba79=query(_0x4a46be,..._0x485ddb),_0x4e5e43=await getDocs(_0x4dba79);!_0x4e5e43['empty']&&(eloHistoryPagination[_0x58530b]['firstVisible']=_0x4e5e43['docs'][0x0],eloHistoryPagination[_0x58530b][_0x599b69(0x279)]=_0x4e5e43[_0x599b69(0x15a)][_0x4e5e43['docs']['length']-0x1]);_0x43fa16[_0x599b69(0x177)]='';if(_0x4e5e43[_0x599b69(0x248)]){_0x43fa16['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x4e5e43[_0x599b69(0xb7)](_0x4a3c0f=>{const _0x3ee9f6=_0x599b69,_0x266b85=_0x4a3c0f[_0x3ee9f6(0x26d)](),_0x1be66d=document[_0x3ee9f6(0x1b0)]('tr'),_0x2c87ab=_0x266b85['timestamp']?new Date(_0x266b85['timestamp']['seconds']*0x3e8)['toLocaleString']():_0x3ee9f6(0x26e),_0x371d4b=_0x266b85['newElo']-_0x266b85['previousElo'],_0x5e6ec0=_0x371d4b>0x0?_0x3ee9f6(0x13b):_0x371d4b<0x0?'negative-change':'',_0x1fb8df=_0x371d4b>0x0?'+':'',_0x2bceaf=_0x266b85[_0x3ee9f6(0x2e2)]||_0x266b85['username']||_0x266b85['userId']||'N/A';_0x1be66d[_0x3ee9f6(0x177)]=_0x3ee9f6(0x1a5)+_0x2c87ab+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x2bceaf+_0x3ee9f6(0x2b5)+(_0x266b85[_0x3ee9f6(0x269)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x266b85['newElo']||'N/A')+_0x3ee9f6(0x136)+_0x5e6ec0+'\x22>'+_0x1fb8df+_0x371d4b+_0x3ee9f6(0x139)+formatHistoryType(_0x266b85['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x266b85['modifiedBy']||_0x266b85['promotedBy']||_0x266b85['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x43fa16['appendChild'](_0x1be66d);}),document[_0x599b69(0x143)](_0x58530b+_0x599b69(0x126))[_0x599b69(0xc1)]='Page\x201';}catch(_0x11d7cd){console['error']('Error\x20applying\x20filters:',_0x11d7cd),_0x43fa16['innerHTML']=_0x599b69(0x2d8)+_0x11d7cd[_0x599b69(0x1e9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x235b2d=a4_0x3f31;document['getElementById'](_0x235b2d(0x16f))['value']='',document[_0x235b2d(0x143)]('history-end-date')['value']='',document['getElementById']('history-type-filter')[_0x235b2d(0x16d)]='all',document['getElementById']('elo-history-search')['value']='';const _0x490c4f=currentLadder['toLowerCase']();eloHistoryPagination[_0x490c4f]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x4196cc=a4_0x3f31,_0x542b18=document[_0x4196cc(0x143)]('promote-player-btn'),_0x5278cd=document['getElementById'](_0x4196cc(0x2f3)),_0x3d62a0=document[_0x4196cc(0x143)](_0x4196cc(0x29d));_0x542b18&&_0x5278cd&&_0x3d62a0&&(_0x542b18['addEventListener']('click',()=>{const _0x404ebe=_0x4196cc;_0x5278cd[_0x404ebe(0x1d8)]['add'](_0x404ebe(0x283));}),_0x5278cd['addEventListener']('click',_0x561060=>{_0x561060['target']===_0x5278cd&&_0x5278cd['classList']['remove']('active');}),_0x3d62a0['addEventListener']('submit',async _0x364722=>{const _0x181abb=_0x4196cc;_0x364722['preventDefault']();const _0x585e74=document['getElementById']('promote-username'),_0x4a2608=document[_0x181abb(0x143)]('promote-ladder'),_0x2854ac=_0x585e74['value']['trim'](),_0x30dfd7=_0x4a2608['value'];if(!_0x2854ac){showNotification('Please\x20enter\x20a\x20username',_0x181abb(0x18e));return;}try{await promotePlayer(_0x2854ac,_0x30dfd7),_0x5278cd['classList']['remove'](_0x181abb(0x283)),_0x585e74[_0x181abb(0x16d)]='';}catch(_0x597738){showNotification(_0x597738['message'],'error');}}),document[_0x4196cc(0x143)]('cancel-promote-btn')[_0x4196cc(0x299)]('click',()=>{const _0x1f761c=_0x4196cc;_0x5278cd['classList'][_0x1f761c(0x1fb)](_0x1f761c(0x283));}));const _0x1d351d=document['getElementById']('demote-player-btn'),_0x4cf883=document['getElementById'](_0x4196cc(0x137)),_0xa2ecad=document['getElementById']('demote-form');_0x1d351d&&_0x4cf883&&_0xa2ecad&&(_0x1d351d['addEventListener']('click',()=>{const _0x1716f0=_0x4196cc;_0x4cf883['classList']['add'](_0x1716f0(0x283));}),_0x4cf883['addEventListener']('click',_0x537dc3=>{const _0x30c307=_0x4196cc;_0x537dc3['target']===_0x4cf883&&_0x4cf883['classList']['remove'](_0x30c307(0x283));}),_0xa2ecad[_0x4196cc(0x299)](_0x4196cc(0x211),async _0x547bbe=>{const _0x3ec0f1=_0x4196cc;_0x547bbe['preventDefault']();const _0x36b611=document['getElementById']('demote-username'),_0x25b81d=document['getElementById']('demote-ladder'),_0x4c2cd8=_0x36b611['value']['trim'](),_0x401f7d=_0x25b81d['value'];if(!_0x4c2cd8){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x4c2cd8,_0x401f7d),document['getElementById'](_0x3ec0f1(0x137))['classList']['remove']('active'),document['getElementById']('demote-username')[_0x3ec0f1(0x16d)]='';}catch(_0xaf8adc){console['error']('Error\x20in\x20demotion:',_0xaf8adc);}}));const _0x3cd36e=document[_0x4196cc(0x143)]('set-elo-btn'),_0x1e603a=document['getElementById']('set-elo-modal'),_0x45f027=document['getElementById'](_0x4196cc(0x1a7));_0x3cd36e&&_0x1e603a&&_0x45f027&&(_0x3cd36e[_0x4196cc(0x299)]('click',()=>{const _0x30331b=_0x4196cc;_0x1e603a['classList']['add'](_0x30331b(0x283));}),_0x1e603a[_0x4196cc(0x299)]('click',_0x38dbcd=>{const _0x20f357=_0x4196cc;_0x38dbcd['target']===_0x1e603a&&_0x1e603a[_0x20f357(0x1d8)][_0x20f357(0x1fb)](_0x20f357(0x283));}),_0x45f027['addEventListener'](_0x4196cc(0x211),async _0x44e70f=>{const _0x515ea2=_0x4196cc;_0x44e70f['preventDefault']();const _0x386a10=document['getElementById']('set-elo-username'),_0x4196c1=document['getElementById']('set-elo-value');let _0x3c4305;const _0x569fa0=document['getElementById']('set-elo-ladder'),_0x5aeced=document['querySelector'](_0x515ea2(0xe6));if(_0x569fa0)_0x3c4305=_0x569fa0['value'];else _0x5aeced?_0x3c4305=_0x5aeced['value']:_0x3c4305='D1';if(!_0x386a10||!_0x4196c1){showNotification(_0x515ea2(0x120),'error');return;}const _0xc4e6c8=_0x386a10['value']['trim'](),_0x153e65=parseInt(_0x4196c1[_0x515ea2(0x16d)]);if(!_0xc4e6c8||isNaN(_0x153e65)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0xc4e6c8,_0x153e65,_0x3c4305),_0x1e603a['classList']['remove']('active'),_0x386a10['value']='',_0x4196c1['value']='';}catch(_0x4badfc){showNotification(_0x4badfc['message'],_0x515ea2(0x18e));}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{const _0x7edee5=_0x4196cc;_0x1e603a['classList'][_0x7edee5(0x1fb)]('active');}));const _0x4e6158=document['getElementById'](_0x4196cc(0x1b8)),_0x1a3948=document['getElementById']('set-role-form');if(_0x4e6158&&_0x1a3948){_0x4e6158[_0x4196cc(0x299)]('click',_0x48d89e=>{_0x48d89e['target']===_0x4e6158&&closeModalHandler();}),_0x1a3948['addEventListener'](_0x4196cc(0x211),async _0x543d0d=>{const _0x2376b4=_0x4196cc;_0x543d0d['preventDefault']();const _0x36f8ab=document[_0x2376b4(0x143)]('role-username'),_0x5a5060=document['getElementById']('role-name'),_0x25927a=document['getElementById']('role-color'),_0x25dba7=_0x36f8ab['value']['trim'](),_0x533890=_0x5a5060[_0x2376b4(0x16d)]['trim'](),_0x3fd980=_0x25927a['value'];if(!_0x25dba7){showNotification('Username\x20is\x20missing',_0x2376b4(0x18e));return;}try{await setUserRole(_0x25dba7,_0x533890,_0x3fd980),closeModalHandler(),loadUsersWithRoles();}catch(_0x1dc524){}});const _0x440615=document['getElementById'](_0x4196cc(0x1a1));_0x440615&&(_0x440615['removeEventListener'](_0x4196cc(0x233),closeModalHandler),_0x440615['addEventListener'](_0x4196cc(0x233),closeModalHandler));}}async function promotePlayer(_0x312c25,_0x5c5457){const _0x10e297=a4_0x3f31;try{console[_0x10e297(0x116)]('Attempting\x20to\x20promote\x20'+_0x312c25+'\x20in\x20'+_0x5c5457+'\x20ladder');const _0x5ef412=auth['currentUser'];if(!_0x5ef412)throw new Error(_0x10e297(0x171));const _0x378370=_0x5c5457==='D2'?'playersD2':_0x10e297(0x270),_0x2fc3f8=_0x5c5457==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x378370);const _0x3b7acb=collection(db,_0x378370),_0x2c22e2=query(_0x3b7acb,where('username','==',_0x312c25)),_0x2ddea5=await getDocs(_0x2c22e2);if(_0x2ddea5['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x5c5457+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x5c5457+'\x20ladder');}const _0x3b5d30=_0x2ddea5['docs'][0x0],_0x46923f=_0x3b5d30['data'](),_0x14f9ee=_0x46923f['eloRating']||0x4b0,_0x3c2bd3=_0x3b5d30['id'];console['log'](_0x10e297(0x1b5)+_0x14f9ee);const _0x1cde64=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':_0x10e297(0x1ff),'elo':0x7d0}];let _0x543ae8=_0x1cde64['find'](_0x5d5b01=>_0x5d5b01['elo']>_0x14f9ee);if(!_0x543ae8){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x5c5457+_0x10e297(0xfa));throw new Error(_0x10e297(0x157)+_0x5c5457+_0x10e297(0xfa));}console['log']('Promoting\x20player\x20to\x20'+_0x543ae8['name']+'\x20('+_0x543ae8['elo']+')'),await updateDoc(doc(db,_0x378370,_0x3b5d30['id']),{'eloRating':_0x543ae8['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x5ef412['email']||'admin'}),await addDoc(collection(db,_0x2fc3f8),{'player':_0x312c25,'previousElo':_0x14f9ee,'newElo':_0x543ae8['elo'],'timestamp':serverTimestamp(),'type':_0x10e297(0x21e),'rankAchieved':_0x543ae8[_0x10e297(0x2a4)],'promotedBy':_0x5ef412['email']||'admin','gameMode':_0x5c5457});try{const {promotionManager:_0x32814c}=await import('./promotions.js'),_0x2a804c=_0x32814c[_0x10e297(0x21d)](_0x14f9ee),_0xd67d4=_0x543ae8[_0x10e297(0x2a4)];await _0x32814c[_0x10e297(0x10b)](_0x3c2bd3,_0x312c25,_0x14f9ee,_0x543ae8[_0x10e297(0xde)],_0x2a804c,_0xd67d4,'promotion',{'displayName':_0x312c25,'source':_0x10e297(0x1df),'adminUser':_0x5ef412['email'],'ladder':_0x5c5457}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x825724){console['error'](_0x10e297(0x2bc),_0x825724);}return alert(_0x10e297(0x285)+_0x312c25+_0x10e297(0x208)+_0x543ae8[_0x10e297(0x2a4)]+'\x20('+_0x543ae8['elo']+')'),currentLadder===_0x5c5457&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x243d17){console['error']('Error\x20promoting\x20player:',_0x243d17),alert('Error\x20promoting\x20player:\x20'+_0x243d17['message']);throw _0x243d17;}}document[a4_0x48ba8e(0x299)](a4_0x48ba8e(0x1d2),()=>{const _0x363048=document['getElementById']('promote-form');_0x363048&&_0x363048['addEventListener']('submit',async _0x50525b=>{const _0x1fe483=a4_0x3f31;_0x50525b['preventDefault']();const _0x4e6f98=document['getElementById'](_0x1fe483(0x272))['value']['trim'](),_0x3d718b=document['querySelector'](_0x1fe483(0x273))[_0x1fe483(0x16d)];if(!_0x4e6f98){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x4e6f98,_0x3d718b),document['getElementById']('promote-modal')['classList']['remove'](_0x1fe483(0x283)),document[_0x1fe483(0x143)]('promote-username')['value']='';}catch(_0xae402f){console['error'](_0x1fe483(0x2f4),_0xae402f);}});});async function demotePlayer(_0x18ec85,_0x200159){const _0x539612=a4_0x48ba8e;try{console[_0x539612(0x116)]('Attempting\x20to\x20demote\x20'+_0x18ec85+_0x539612(0x2df)+_0x200159+_0x539612(0xfa));const _0x882bd2=auth[_0x539612(0x280)];if(!_0x882bd2)throw new Error(_0x539612(0x171));const _0x1d4715=_0x200159==='D2'?_0x539612(0x203):'players',_0x571088=_0x200159==='D2'?_0x539612(0x21f):'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x1d4715);const _0xd71911=collection(db,_0x1d4715),_0x567325=query(_0xd71911,where(_0x539612(0x2ee),'==',_0x18ec85)),_0x242e4e=await getDocs(_0x567325);if(_0x242e4e['empty']){alert(_0x539612(0x28b)+_0x200159+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x200159+_0x539612(0xfa));}const _0x15ccfb=_0x242e4e[_0x539612(0x15a)][0x0],_0x47a05d=_0x15ccfb[_0x539612(0x26d)](),_0x20b6bc=_0x47a05d['eloRating']||0x4b0;console['log'](_0x539612(0x1b5)+_0x20b6bc);const _0x48e1db=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x171811=_0x48e1db['find'](_0x74cfbe=>_0x74cfbe['elo']<_0x20b6bc);if(!_0x171811){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x200159+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x200159+_0x539612(0xfa));}console['log']('Demoting\x20player\x20to\x20'+_0x171811['name']+'\x20('+_0x171811['elo']+')'),await updateDoc(doc(db,_0x1d4715,_0x15ccfb['id']),{'eloRating':_0x171811['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x882bd2['email']||_0x539612(0x1df)}),await addDoc(collection(db,_0x571088),{'player':_0x18ec85,'previousElo':_0x20b6bc,'newElo':_0x171811['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x171811['name'],'demotedBy':_0x882bd2['email']||'admin','gameMode':_0x200159});try{const {promotionManager:_0x1447ba}=await import('./promotions.js'),_0x1f79df=_0x1447ba['getRankName'](_0x20b6bc),_0x3c515e=_0x171811['name'];await _0x1447ba['sendPromotionNotification'](_0x15ccfb['id'],_0x18ec85,_0x20b6bc,_0x171811['elo'],_0x1f79df,_0x3c515e,'demotion',{'displayName':_0x18ec85,'source':'admin','adminUser':_0x882bd2['email'],'ladder':_0x200159}),console[_0x539612(0x116)]('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x4c7e4e){console[_0x539612(0x18e)](_0x539612(0x2bc),_0x4c7e4e);}return alert(_0x539612(0x1b2)+_0x18ec85+_0x539612(0x208)+_0x171811['name']+'\x20('+_0x171811['elo']+')'),currentLadder===_0x200159&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0xbc0885){console['error']('Error\x20demoting\x20player:',_0xbc0885),alert('Error\x20demoting\x20player:\x20'+_0xbc0885['message']);throw _0xbc0885;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x45bfbe=a4_0x48ba8e,_0x1ce5d0=document['getElementById']('demote-form');_0x1ce5d0&&_0x1ce5d0['addEventListener'](_0x45bfbe(0x211),async _0x30538c=>{const _0x5b580b=_0x45bfbe;_0x30538c['preventDefault']();const _0x2dc651=document['getElementById']('demote-username')[_0x5b580b(0x16d)]['trim'](),_0x578528=document['querySelector'](_0x5b580b(0xd8))['value'];if(!_0x2dc651){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x2dc651,_0x578528),document['getElementById'](_0x5b580b(0x137))['classList']['remove'](_0x5b580b(0x283)),document['getElementById'](_0x5b580b(0x175))['value']='';}catch(_0x12ab5e){console['error']('Error\x20in\x20demotion:',_0x12ab5e);}});});async function setCustomElo(_0x1a6382,_0x185656,_0x1739c3){const _0x2dda49=a4_0x48ba8e;try{const _0xcaad3e=auth['currentUser'];if(!_0xcaad3e||!isAdmin(_0xcaad3e['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x2eacbf=_0x1739c3==='D2'?'playersD2':'players',_0x11ce29=_0x1739c3==='D2'?'eloHistoryD2':'eloHistory',_0x1d47cb=collection(db,_0x2eacbf),_0x4d2c21=query(_0x1d47cb,where('username','==',_0x1a6382)),_0x20c3c1=await getDocs(_0x4d2c21);if(_0x20c3c1['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x1739c3+'\x20ladder');const _0x1ecdf8=_0x20c3c1['docs'][0x0],_0x161e41=_0x1ecdf8['data'](),_0x30a84c=_0x161e41['eloRating']||0x4b0,_0x3105b1=writeBatch(db);_0x3105b1['update'](doc(db,_0x2eacbf,_0x1ecdf8['id']),{'eloRating':_0x185656,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xcaad3e['email']});const _0xcf0c48=doc(collection(db,_0x11ce29));return _0x3105b1['set'](_0xcf0c48,{'player':_0x1a6382,'previousElo':_0x30a84c,'newElo':_0x185656,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0xcaad3e['email'],'gameMode':_0x1739c3}),await _0x3105b1['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x1a6382+'\x20was\x20updated\x20from\x20'+_0x30a84c+'\x20to\x20'+_0x185656,_0x2dda49(0x2c5)),currentLadder===_0x1739c3&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x1f2ac9){console['error']('Error\x20setting\x20custom\x20ELO:',_0x1f2ac9);throw _0x1f2ac9;}}async function setUserRole(_0x22201b,_0x5a6f8d,_0xfff428){const _0x55ccfa=a4_0x48ba8e;try{const _0x3f14e7=auth[_0x55ccfa(0x280)];if(!_0x3f14e7||!isAdmin(_0x3f14e7['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x44c07a=_0x5a6f8d?_0x5a6f8d['trim']():null,_0x306ec2=_0x44c07a?_0xfff428||'#808080':null,[_0x46b34b,_0x4bb612]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x55ccfa(0x2ee),'==',_0x22201b))),getDocs(query(collection(db,'playersD2'),where(_0x55ccfa(0x2ee),'==',_0x22201b)))]),_0xa33faa=[];if(!_0x46b34b[_0x55ccfa(0x248)])_0xa33faa['push']({'ref':_0x46b34b['docs'][0x0]['ref'],'source':'D1'});if(!_0x4bb612['empty'])_0xa33faa['push']({'ref':_0x4bb612['docs'][0x0]['ref'],'source':'D2'});if(_0xa33faa['length']===0x0){const [_0xca253c,_0x4273b0]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x22201b))),getDocs(query(collection(db,_0x55ccfa(0x262)),where('username','==',_0x22201b)))]);if(!_0xca253c['empty'])_0xa33faa[_0x55ccfa(0x2f0)]({'ref':_0xca253c[_0x55ccfa(0x15a)][0x0][_0x55ccfa(0x22b)],'source':_0x55ccfa(0xc6)});if(!_0x4273b0[_0x55ccfa(0x248)])_0xa33faa['push']({'ref':_0x4273b0['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0xa33faa['length']===0x0)throw new Error('User\x20\x22'+_0x22201b+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x13de63=writeBatch(db);_0xa33faa['forEach'](_0x4f0be1=>{const _0xb2e15a=_0x55ccfa;console['log'](_0xb2e15a(0x127)+_0x22201b+_0xb2e15a(0x2df)+_0x4f0be1[_0xb2e15a(0x13a)]),!_0x44c07a?_0x13de63['update'](_0x4f0be1['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x13de63['update'](_0x4f0be1['ref'],{'roleName':_0x44c07a,'roleColor':_0x306ec2,'roleAssignedBy':_0x3f14e7['email'],'roleAssignedAt':serverTimestamp()});}),await _0x13de63['commit']();const _0x2a127a=_0x44c07a?'Role\x20\x22'+_0x44c07a+_0x55ccfa(0x159):'Role\x20removed';return showNotification(_0x2a127a+'\x20for\x20user\x20\x22'+_0x22201b+'\x22',_0x55ccfa(0x2c5)),!![];}catch(_0x192d81){console['error']('Error\x20setting\x20user\x20role:',_0x192d81),showNotification(_0x55ccfa(0x2d1)+_0x192d81[_0x55ccfa(0x1e9)],'error');throw _0x192d81;}}function showNotification(_0x9a2fb,_0x4a9aa3='info'){const _0x5d9173=a4_0x48ba8e,_0x479167=document['createElement']('div');_0x479167['className']='notification\x20'+_0x4a9aa3,_0x479167['innerHTML']=_0x5d9173(0x18b)+getNotificationIcon(_0x4a9aa3)+_0x5d9173(0xcf)+_0x9a2fb+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document['body'][_0x5d9173(0x140)](_0x479167),setTimeout(()=>{const _0x702051=_0x5d9173;_0x479167['classList']['add'](_0x702051(0x283));},0xa);const _0x596021=setTimeout(()=>{closeNotification(_0x479167);},0x1388);_0x479167['querySelector']('.close-notification')[_0x5d9173(0x299)]('click',()=>{clearTimeout(_0x596021),closeNotification(_0x479167);});}function getNotificationIcon(_0xb32a35){const _0x3692bc=a4_0x48ba8e;switch(_0xb32a35){case _0x3692bc(0x2c5):return'fa-check-circle';case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case _0x3692bc(0x2d7):default:return _0x3692bc(0x109);}}function closeNotification(_0x19c586){const _0x2ab82f=a4_0x48ba8e;_0x19c586[_0x2ab82f(0x1d8)]['remove']('active'),setTimeout(()=>{const _0x187761=_0x2ab82f;_0x19c586[_0x187761(0x1fb)]();},0x12c);}function setupUserRolesSection(){const _0x4bb0f8=a4_0x48ba8e,_0x39265f=document['getElementById'](_0x4bb0f8(0x1ef));_0x39265f&&_0x39265f[_0x4bb0f8(0x299)]('click',function(){const _0x1bf553=_0x4bb0f8;this['classList']['add']('loading'),this[_0x1bf553(0x177)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x3f7189=>{const _0x1e81ca=_0x1bf553;console['error'](_0x1e81ca(0x2ea),_0x3f7189),this['classList']['remove'](_0x1e81ca(0xb9)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x46aed5=document[_0x4bb0f8(0x143)]('add-new-role-btn');_0x46aed5&&_0x46aed5['addEventListener']('click',()=>{const _0x1210a5=_0x4bb0f8,_0x21f4d0=document['getElementById']('set-role-modal');_0x21f4d0&&_0x21f4d0['classList']['add'](_0x1210a5(0x283));});const _0x3dd05e=document['getElementById'](_0x4bb0f8(0x1a9));_0x3dd05e&&_0x3dd05e['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x539e7f=document['getElementById']('role-filter');_0x539e7f&&_0x539e7f[_0x4bb0f8(0x299)]('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x41e32e=a4_0x48ba8e,_0x1773c7=document['getElementById'](_0x41e32e(0x11c));if(!_0x1773c7)return;_0x1773c7['innerHTML']=_0x41e32e(0x256);try{const [_0x3fe5d4,_0x5d315c,_0x45aa4d,_0x1577dd]=await Promise['all']([getDocs(collection(db,_0x41e32e(0x270))),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x543b4d=new Map();function _0x4e6a87(_0x4dce75,_0x19354d){_0x4dce75['forEach'](_0x4939f5=>{const _0x1b00be=a4_0x3f31,_0x47bf78=_0x4939f5['data']();if(!_0x47bf78['username'])return;if(!_0x543b4d['has'](_0x47bf78[_0x1b00be(0x2ee)]))_0x543b4d[_0x1b00be(0x222)](_0x47bf78['username'],{'username':_0x47bf78['username'],'roleName':_0x47bf78['roleName']||null,'roleColor':_0x47bf78[_0x1b00be(0x25f)]||null,'roleAssignedBy':_0x47bf78['roleAssignedBy']||null,'roleAssignedAt':_0x47bf78['roleAssignedAt']||null,'sources':[_0x19354d]});else{const _0x2fb117=_0x543b4d[_0x1b00be(0x219)](_0x47bf78['username']);_0x47bf78['roleName']&&(!_0x2fb117[_0x1b00be(0x2da)]||_0x19354d==='D1'||_0x19354d==='D2')&&(_0x2fb117[_0x1b00be(0x2da)]=_0x47bf78['roleName'],_0x2fb117['roleColor']=_0x47bf78['roleColor'],_0x2fb117['roleAssignedBy']=_0x47bf78[_0x1b00be(0x17d)],_0x2fb117['roleAssignedAt']=_0x47bf78['roleAssignedAt']),!_0x2fb117['sources'][_0x1b00be(0x1d0)](_0x19354d)&&_0x2fb117[_0x1b00be(0x172)]['push'](_0x19354d);}});}_0x4e6a87(_0x3fe5d4,'D1'),_0x4e6a87(_0x5d315c,'D2'),_0x4e6a87(_0x45aa4d,'Non-Participant'),_0x4e6a87(_0x1577dd,'Profile');const _0x5e2378=Array['from'](_0x543b4d[_0x41e32e(0x168)]())['sort']((_0x2cd5a3,_0x60a0bd)=>_0x2cd5a3['username']['localeCompare'](_0x60a0bd['username']));if(_0x5e2378[_0x41e32e(0x2e4)]===0x0){_0x1773c7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x1773c7[_0x41e32e(0x177)]='',_0x5e2378['forEach'](_0x551e99=>{const _0x424cb1=_0x41e32e,_0x440a4b=document['createElement']('tr');_0x440a4b['dataset']['username']=_0x551e99['username'],_0x440a4b['dataset']['roleName']=_0x551e99['roleName']||'',_0x440a4b['dataset'][_0x424cb1(0x25f)]=_0x551e99[_0x424cb1(0x25f)]||'#808080';const _0x368e01=_0x551e99['roleAssignedAt']?new Date(_0x551e99['roleAssignedAt']['seconds']*0x3e8)[_0x424cb1(0x14e)]():_0x424cb1(0x26e),_0x4b1032=_0x551e99['roleName']?_0x424cb1(0x2ae)+_0x551e99['roleColor']+_0x424cb1(0xd5)+getContrastColor(_0x551e99[_0x424cb1(0x25f)])+';\x22>'+_0x551e99[_0x424cb1(0x2da)]+'</span>':'<span\x20class=\x22no-role\x22>None</span>';_0x440a4b[_0x424cb1(0x177)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x551e99['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x551e99['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4b1032+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x551e99['roleAssignedBy']||'N/A')+_0x424cb1(0x2a6)+_0x368e01+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x551e99[_0x424cb1(0x2ee)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x551e99[_0x424cb1(0x2da)]?_0x424cb1(0x29c)+_0x551e99['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x424cb1(0x2f1),_0x1773c7['appendChild'](_0x440a4b);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x3dfede=>{_0x3dfede['addEventListener']('click',()=>{const _0x46c555=_0x3dfede['dataset']['username'];openRoleEditModal(_0x46c555);});}),document['querySelectorAll']('.remove-role-btn')[_0x41e32e(0xb7)](_0x21a00b=>{_0x21a00b['addEventListener']('click',()=>{const _0x5e1aec=a4_0x3f31,_0x2a4153=_0x21a00b['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x2a4153+'?')&&setUserRole(_0x2a4153,null,null)[_0x5e1aec(0x28c)](()=>loadUsersWithRoles())['catch'](_0x184948=>console['error'](_0x5e1aec(0xce),_0x184948));});});}catch(_0x3cf408){console['error'](_0x41e32e(0x2ea),_0x3cf408),_0x1773c7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x10d66a){const _0x3fcacc=a4_0x48ba8e;console[_0x3fcacc(0x116)]('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x10d66a);const _0xd520e7=document['getElementById']('set-role-modal'),_0x218fce=document[_0x3fcacc(0x143)](_0x3fcacc(0x198)),_0x365e08=document['getElementById']('user-role');if(!_0xd520e7){console[_0x3fcacc(0x18e)]('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert(_0x3fcacc(0x230));return;}console['log']('Modal\x20element\x20found:',_0xd520e7);_0x218fce?(_0x218fce['value']=_0x10d66a,console['log'](_0x3fcacc(0x286)+_0x10d66a)):console[_0x3fcacc(0x1b4)]('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x482325=document[_0x3fcacc(0x207)]('#users-table-body\x20tr[data-username=\x22'+_0x10d66a+'\x22]');if(_0x482325&&_0x365e08){const _0x15b6ef=_0x482325['dataset']['role'];_0x365e08['value']=_0x15b6ef===_0x3fcacc(0xe4)?'':_0x15b6ef,console['log'](_0x3fcacc(0x21a)+_0x365e08[_0x3fcacc(0x16d)]+'\x20(based\x20on\x20data-role:\x20'+_0x15b6ef+')');}else{if(!_0x482325)console['warn']('Table\x20row\x20for\x20user\x20'+_0x10d66a+'\x20not\x20found.');if(!_0x365e08)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x365e08)_0x365e08[_0x3fcacc(0x16d)]='';}console[_0x3fcacc(0x116)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0xd520e7['classList'][_0x3fcacc(0xd3)](_0x3fcacc(0x283));const _0xef1be6=document['getElementById'](_0x3fcacc(0x1a1));_0xef1be6?(console['log'](_0x3fcacc(0x1e2)),_0xef1be6[_0x3fcacc(0x1c9)]('click',closeModalHandler),_0xef1be6[_0x3fcacc(0x299)]('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log'](_0x3fcacc(0x20b)),_0xd520e7['removeEventListener']('click',closeModalBackgroundHandler),_0xd520e7['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x386275){_0x386275['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x2a9987=a4_0x48ba8e,_0x5d4d2d=document['getElementById']('set-role-modal');_0x5d4d2d&&(_0x5d4d2d['classList']['remove']('active'),_0x5d4d2d[_0x2a9987(0x1c9)]('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x420aed=a4_0x48ba8e,_0x34585d=document['getElementById']('user-search')?.[_0x420aed(0x16d)]['toLowerCase']()||'',_0xacf632=document[_0x420aed(0x143)]('role-filter')?.[_0x420aed(0x16d)]||'all',_0xa0534b=document['querySelectorAll']('#users-table-body\x20tr');let _0x494609=0x0;_0xa0534b['forEach'](_0x1b4290=>{const _0x4043a0=_0x420aed;if(_0x1b4290[_0x4043a0(0x207)]('.loading-cell')||_0x1b4290[_0x4043a0(0x207)](_0x4043a0(0xd4))||_0x1b4290[_0x4043a0(0x207)]('.error-state'))return;const _0x4e7989=_0x1b4290['dataset']['username']?.['toLowerCase']()||'',_0x15f442=_0x1b4290['dataset']['role']||_0x4043a0(0xe4),_0x13b071=_0x4e7989['includes'](_0x34585d),_0x1c8282=_0xacf632==='all'||_0x15f442===_0xacf632;_0x13b071&&_0x1c8282?(_0x1b4290['style']['display']='',_0x494609++):_0x1b4290[_0x4043a0(0x253)][_0x4043a0(0x2be)]=_0x4043a0(0xe4);});if(_0x494609===0x0&&_0xa0534b['length']>0x0){const _0x49d9f2=document['getElementById'](_0x420aed(0x11c));if(_0x49d9f2){if(!_0x49d9f2['querySelector']('.no-results')){const _0x45061c=document['createElement']('tr');_0x45061c['classList']['add'](_0x420aed(0xd6)),_0x45061c['innerHTML']=_0x420aed(0x27b),_0x49d9f2['appendChild'](_0x45061c);}}}else{const _0x27d682=document['querySelector']('.no-results');_0x27d682&&_0x27d682[_0x420aed(0x1fb)]();}}function setupManageArticlesSection(){const _0xc47cee=a4_0x48ba8e,_0x52c143=document[_0xc47cee(0x143)](_0xc47cee(0x1f0));_0x52c143&&_0x52c143[_0xc47cee(0x299)]('click',function(){const _0x10192d=_0xc47cee;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x1e120f=a4_0x3f31;this['classList'][_0x1e120f(0x1fb)](_0x1e120f(0xb9)),this[_0x1e120f(0x177)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})[_0x10192d(0x18d)](_0x1d8af9=>{const _0x206475=_0x10192d;console[_0x206475(0x18e)](_0x206475(0x1ce),_0x1d8af9),this['classList'][_0x206475(0x1fb)]('loading'),this['innerHTML']=_0x206475(0xe5),setTimeout(()=>{const _0x4b74b6=_0x206475;this[_0x4b74b6(0x177)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0xbe7cc1=document['getElementById']('create-new-article-btn');_0xbe7cc1?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0xbe7cc1['style']['display']='block',_0xbe7cc1['addEventListener']('click',()=>{openArticleModal();})):console[_0xc47cee(0x18e)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0xa4ba3a=document['getElementById'](_0xc47cee(0x1f7));_0xa4ba3a&&_0xa4ba3a['addEventListener']('submit',_0xabf2e2=>{_0xabf2e2['preventDefault'](),saveArticle();});const _0x377ece=document['getElementById']('cancel-article-btn');_0x377ece&&_0x377ece['addEventListener']('click',()=>{closeArticleModal();});const _0x41dd2c=document['querySelector']('#article-modal\x20.close-btn');_0x41dd2c&&_0x41dd2c[_0xc47cee(0x299)]('click',()=>{closeArticleModal();});const _0x12ab1b=document['getElementById']('article-modal');_0x12ab1b&&_0x12ab1b['addEventListener']('click',_0x3d1a66=>{_0x3d1a66['target']===_0x12ab1b&&closeArticleModal();});}async function loadArticles(){const _0x3918f3=a4_0x48ba8e,_0x1bce7d=document['getElementById'](_0x3918f3(0x221));if(!_0x1bce7d)return;_0x1bce7d['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x5ef989=collection(db,'articles'),_0x5c978a=query(_0x5ef989,orderBy('createdAt',_0x3918f3(0x1f5))),_0x217328=await getDocs(_0x5c978a);if(_0x217328['empty']){_0x1bce7d[_0x3918f3(0x177)]='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x1bce7d['innerHTML']='',_0x217328['forEach'](_0x15126e=>{const _0x56b33e=_0x3918f3,_0x4c8f41=_0x15126e['data'](),_0x55ceda=document[_0x56b33e(0x1b0)]('tr'),_0x67d54a=_0x4c8f41['createdAt']?new Date(_0x4c8f41[_0x56b33e(0x1e8)]['seconds']*0x3e8)['toLocaleString']():'N/A';_0x55ceda['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4c8f41[_0x56b33e(0x15d)]||_0x56b33e(0x242))+_0x56b33e(0x2a6)+(_0x4c8f41['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x67d54a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x15126e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x15126e['id']+_0x56b33e(0x2bd),_0x1bce7d['appendChild'](_0x55ceda);}),setupArticleActionButtons();}catch(_0x3e5a54){console['error']('Error\x20loading\x20articles:',_0x3e5a54),_0x1bce7d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x3e5a54[_0x3918f3(0x1e9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x1ad7ff=a4_0x48ba8e;document['querySelectorAll']('.edit-article-btn')[_0x1ad7ff(0xb7)](_0x354f31=>{_0x354f31['addEventListener']('click',async _0x49f269=>{const _0x37663d=_0x49f269['currentTarget']['dataset']['id'];openArticleModal(_0x37663d);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x262ee3=>{const _0x3286f2=_0x1ad7ff;_0x262ee3[_0x3286f2(0x299)]('click',async _0x4a5ce3=>{const _0x3691d1=_0x4a5ce3['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x3691d1);});});}function openArticleModal(_0x50b17d=null){const _0x299036=a4_0x48ba8e,_0x4df234=document['getElementById'](_0x299036(0x169)),_0x57a9=document['getElementById'](_0x299036(0x141)),_0x5f0ea9=document[_0x299036(0x143)]('article-form'),_0x8b6ebb=document[_0x299036(0x143)]('article-id');_0x5f0ea9[_0x299036(0x1af)](),_0x8b6ebb['value']='';if(_0x50b17d)_0x57a9[_0x299036(0xc1)]='Edit\x20Article',_0x8b6ebb['value']=_0x50b17d,loadArticleData(_0x50b17d);else{_0x57a9['textContent']='Create\x20Article';const _0x5d8ab8=auth['currentUser'];if(_0x5d8ab8){const _0x4edb42=document['getElementById']('article-author');if(_0x4edb42&&_0x5d8ab8[_0x299036(0x122)])_0x4edb42['value']=_0x5d8ab8['displayName'];else _0x4edb42&&(_0x4edb42['value']=_0x5d8ab8['email']);}}_0x4df234[_0x299036(0x1d8)]['add']('active');}async function loadArticleData(_0x8def6e){const _0x449e01=a4_0x48ba8e;try{const _0x559220=doc(db,'articles',_0x8def6e),_0x594b2c=await getDoc(_0x559220);if(!_0x594b2c['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x3d2c5c=_0x594b2c['data']();document[_0x449e01(0x143)]('article-title')[_0x449e01(0x16d)]=_0x3d2c5c[_0x449e01(0x15d)]||'',document[_0x449e01(0x143)](_0x449e01(0x2d6))['value']=_0x3d2c5c[_0x449e01(0x13f)]||'',document['getElementById']('article-image-url')[_0x449e01(0x16d)]=_0x3d2c5c['imageUrl']||'',document['getElementById']('article-content')['value']=_0x3d2c5c['content']||'';}catch(_0x36a7e4){console[_0x449e01(0x18e)](_0x449e01(0x2b6),_0x36a7e4),showNotification(_0x449e01(0x27a),'error');}}async function saveArticle(){const _0x33216b=a4_0x48ba8e;try{const _0x248b5b=document[_0x33216b(0x143)](_0x33216b(0x147))['value'],_0x6eed5f=document[_0x33216b(0x143)](_0x33216b(0x108))[_0x33216b(0x16d)][_0x33216b(0x2ca)](),_0x46eea=document[_0x33216b(0x143)](_0x33216b(0x2d6))['value']['trim'](),_0x1e3729=document['getElementById']('article-image-url')[_0x33216b(0x16d)]['trim'](),_0x45ef63=document['getElementById']('article-content')['value']['trim']();if(!_0x6eed5f||!_0x45ef63){showNotification('Title\x20and\x20content\x20are\x20required',_0x33216b(0x18e));return;}const _0x415608=auth[_0x33216b(0x280)];if(!_0x415608){showNotification(_0x33216b(0x2f5),'error');return;}const _0x319c24={'title':_0x6eed5f,'author':_0x46eea,'imageUrl':_0x1e3729||null,'content':_0x45ef63,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x415608['email']};!_0x248b5b?(_0x319c24[_0x33216b(0x1e8)]=serverTimestamp(),_0x319c24[_0x33216b(0x245)]=_0x415608[_0x33216b(0x1e7)],await addDoc(collection(db,'articles'),_0x319c24),showNotification('Article\x20created\x20successfully',_0x33216b(0x2c5))):(await updateDoc(doc(db,'articles',_0x248b5b),_0x319c24),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x17da22){console['error']('Error\x20saving\x20article:',_0x17da22),showNotification(_0x33216b(0x267)+_0x17da22['message'],'error');}}function closeArticleModal(){const _0x2ae16c=a4_0x48ba8e,_0x22c8c6=document[_0x2ae16c(0x143)]('article-modal');_0x22c8c6&&_0x22c8c6['classList']['remove']('active');}async function confirmDeleteArticle(_0x5bacf7){const _0x2c55ba=a4_0x48ba8e;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x5bacf7)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x2c55ba(0x2c5));}catch(_0x17abe5){console[_0x2c55ba(0x18e)]('Error\x20deleting\x20article:',_0x17abe5),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x17abe5['message'],_0x2c55ba(0x18e));}}function setupTrophyManagementSection(){const _0x27d207=a4_0x48ba8e,_0x4390a7=document[_0x27d207(0x143)]('load-trophies-data');_0x4390a7&&_0x4390a7['addEventListener']('click',function(){const _0x68d3b9=_0x27d207;this[_0x68d3b9(0x1d8)][_0x68d3b9(0xd3)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x580ca0=document['getElementById'](_0x68d3b9(0x149));_0x580ca0&&(_0x580ca0['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x3ed0af=_0x68d3b9;this[_0x3ed0af(0x1d8)][_0x3ed0af(0x1fb)]('loading'),this[_0x3ed0af(0x177)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x49a12b=>{const _0x222020=_0x68d3b9;console['error']('Error\x20loading\x20trophies:',_0x49a12b),this['classList']['remove'](_0x222020(0xb9)),this[_0x222020(0x177)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x10dcd4=_0x222020;this['innerHTML']=_0x10dcd4(0x28d);},0xbb8);});});const _0x4a0645=document['getElementById']('create-new-trophy-btn');_0x4a0645&&_0x4a0645['addEventListener']('click',()=>{openTrophyModal();});const _0x346716=document['getElementById']('trophy-form');_0x346716&&_0x346716['addEventListener'](_0x27d207(0x211),_0x16ef9d=>{_0x16ef9d['preventDefault'](),saveTrophyDefinition();});const _0x818351=document[_0x27d207(0x143)]('cancel-trophy-btn');_0x818351&&_0x818351[_0x27d207(0x299)]('click',()=>{closeTrophyModal();});document['querySelectorAll'](_0x27d207(0x1ae))['forEach'](_0x10cd14=>{const _0x5a8c4e=_0x27d207;_0x10cd14['addEventListener'](_0x5a8c4e(0x233),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x26ce65=document['getElementById']('trophy-modal');_0x26ce65&&_0x26ce65[_0x27d207(0x299)]('click',_0x44dcf0=>{_0x44dcf0['target']===_0x26ce65&&closeTrophyModal();});const _0x505bb4=document['getElementById']('assign-trophy-modal');_0x505bb4&&_0x505bb4['addEventListener']('click',_0x28bb1e=>{_0x28bb1e['target']===_0x505bb4&&closeAssignTrophyModal();});const _0x24e934=document['getElementById'](_0x27d207(0x1e0));_0x24e934&&_0x24e934['addEventListener'](_0x27d207(0x211),_0x44f426=>{const _0x54c970=_0x27d207;_0x44f426[_0x54c970(0x217)](),assignTrophyToPlayer();});const _0x18024a=document[_0x27d207(0x143)]('cancel-assign-btn');_0x18024a&&_0x18024a[_0x27d207(0x299)]('click',()=>{closeAssignTrophyModal();});const _0x420434=document[_0x27d207(0x143)]('trophy-image-url');_0x420434&&(_0x420434['addEventListener']('input',updateTrophyImagePreview),_0x420434['addEventListener'](_0x27d207(0xe8),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x58d73a=a4_0x48ba8e,_0xc2d922=document[_0x58d73a(0x143)]('trophy-image-url')['value'][_0x58d73a(0x2ca)](),_0x233da1=document['getElementById'](_0x58d73a(0x1e3));if(!_0x233da1){const _0x1e9283=document['getElementById']('trophy-image-url')['closest'](_0x58d73a(0x196)),_0x339261=document['createElement'](_0x58d73a(0x148));_0x339261['id']=_0x58d73a(0x1e3),_0x339261['className']='trophy-preview-container',_0x1e9283['appendChild'](_0x339261);const _0x4593d3=document['createElement']('img');_0x4593d3['id']='trophy-preview-img',_0x4593d3['alt']='Trophy\x20Preview',_0x4593d3[_0x58d73a(0xe0)]=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x339261['appendChild'](_0x4593d3);}const _0x44fd8e=document['getElementById']('trophy-preview-img');_0xc2d922?(_0x44fd8e['src']=_0xc2d922,_0x44fd8e['style']['display']='block',_0x44fd8e['classList']['remove']('error')):(_0x44fd8e['src']=DEFAULT_TROPHY_IMAGE,_0x44fd8e['style']['display']='block');}async function loadTrophyDefinitions(){const _0x215eaf=a4_0x48ba8e,_0x288e0b=document['getElementById']('trophies-table-body');if(!_0x288e0b)return;_0x288e0b[_0x215eaf(0x177)]=_0x215eaf(0x1d4);try{const _0x59c604=collection(db,'trophyDefinitions'),_0x4bbd68=query(_0x59c604,orderBy('createdAt','desc')),_0xb46072=await getDocs(_0x4bbd68);if(_0xb46072['empty']){_0x288e0b['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x288e0b['innerHTML']='',_0xb46072['forEach'](_0x14085c=>{const _0x589847=_0x215eaf,_0x2ae0f8=_0x14085c['data'](),_0x340126=document[_0x589847(0x1b0)]('tr'),_0x555a90=_0x2ae0f8['createdAt']?new Date(_0x2ae0f8['createdAt']['seconds']*0x3e8)['toLocaleString']():_0x589847(0x26e);_0x340126['innerHTML']=_0x589847(0x138)+(_0x2ae0f8['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x2ae0f8['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x2ae0f8[_0x589847(0x2a4)]||_0x589847(0x165))+_0x589847(0x239)+(_0x2ae0f8['rarity']||'common')+'\x22>'+(_0x2ae0f8['rarity']||'common')+_0x589847(0x14c)+_0x555a90+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x14085c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x14085c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x14085c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x288e0b['appendChild'](_0x340126);}),setupTrophyActionButtons();}catch(_0x23c3c0){console[_0x215eaf(0x18e)]('Error\x20loading\x20trophy\x20definitions:',_0x23c3c0),_0x288e0b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x23c3c0['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x25cf34=a4_0x48ba8e;document[_0x25cf34(0xcc)](_0x25cf34(0x103))['forEach'](_0x1e67d0=>{const _0x18f382=_0x25cf34;_0x1e67d0['addEventListener'](_0x18f382(0x233),_0x26fa33=>{const _0xdc9498=_0x26fa33['currentTarget']['dataset']['id'];openTrophyModal(_0xdc9498);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x5ecb9f=>{const _0x4da003=_0x25cf34;_0x5ecb9f[_0x4da003(0x299)]('click',_0x157d34=>{const _0x4c68e9=_0x157d34['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x4c68e9);});}),document['querySelectorAll'](_0x25cf34(0x162))['forEach'](_0x3db836=>{const _0x36b49c=_0x25cf34;_0x3db836[_0x36b49c(0x299)]('click',_0x5cca3c=>{const _0x21be71=_0x5cca3c['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x21be71);});});}function openTrophyModal(_0x3a7830=null){const _0x2ac4b6=a4_0x48ba8e,_0x22b787=document[_0x2ac4b6(0x143)]('trophy-modal'),_0x333d6f=document['getElementById']('trophy-modal-title'),_0x17170a=document['getElementById']('trophy-form'),_0x109701=document[_0x2ac4b6(0x143)]('trophy-id');_0x17170a['reset'](),_0x109701['value']='';const _0x21185e=document['getElementById']('trophy-preview-img');_0x21185e&&(_0x21185e['src']=DEFAULT_TROPHY_IMAGE,_0x21185e['classList'][_0x2ac4b6(0x1fb)]('error')),_0x3a7830?(_0x333d6f['textContent']='Edit\x20Trophy',_0x109701[_0x2ac4b6(0x16d)]=_0x3a7830,loadTrophyData(_0x3a7830)):_0x333d6f[_0x2ac4b6(0xc1)]=_0x2ac4b6(0x29f),_0x22b787['classList']['add'](_0x2ac4b6(0x283));}async function loadTrophyData(_0x5e1fba){const _0x414dfb=a4_0x48ba8e;try{const _0x5d0a01=doc(db,_0x414dfb(0xbf),_0x5e1fba),_0x4ced9b=await getDoc(_0x5d0a01);if(!_0x4ced9b['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x3d1e8b=_0x4ced9b[_0x414dfb(0x26d)]();document[_0x414dfb(0x143)]('trophy-name')['value']=_0x3d1e8b['name']||'',document['getElementById']('trophy-description')['value']=_0x3d1e8b['description']||'',document['getElementById']('trophy-image-url')[_0x414dfb(0x16d)]=_0x3d1e8b[_0x414dfb(0x2e9)]||'',document[_0x414dfb(0x143)]('trophy-rarity')['value']=_0x3d1e8b['rarity']||_0x414dfb(0x231),updateTrophyImagePreview();}catch(_0x202443){console[_0x414dfb(0x18e)](_0x414dfb(0xdc),_0x202443),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x1906fc=a4_0x48ba8e;try{const _0x427fd1=document[_0x1906fc(0x143)](_0x1906fc(0xba))['value'],_0x6e2ebe=document['getElementById']('trophy-name')[_0x1906fc(0x16d)]['trim'](),_0x2ae66d=document['getElementById'](_0x1906fc(0x1cd))[_0x1906fc(0x16d)]['trim'](),_0x5a2158=document['getElementById']('trophy-image-url')['value']['trim'](),_0x41c26d=document['getElementById']('trophy-rarity')['value'];if(!_0x6e2ebe||!_0x2ae66d||!_0x5a2158){showNotification('All\x20fields\x20are\x20required',_0x1906fc(0x18e));return;}const _0x421992=auth['currentUser'];if(!_0x421992){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x3cd923={'name':_0x6e2ebe,'description':_0x2ae66d,'image':_0x5a2158,'rarity':_0x41c26d,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x421992[_0x1906fc(0x1e7)]};!_0x427fd1?(_0x3cd923['createdAt']=serverTimestamp(),_0x3cd923[_0x1906fc(0x245)]=_0x421992['email'],await addDoc(collection(db,'trophyDefinitions'),_0x3cd923),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,_0x1906fc(0xbf),_0x427fd1),_0x3cd923),showNotification(_0x1906fc(0x2a1),'success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x5729bf){console['error']('Error\x20saving\x20trophy:',_0x5729bf),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x5729bf['message'],'error');}}function closeTrophyModal(){const _0x4e2849=a4_0x48ba8e,_0x4883e1=document['getElementById']('trophy-modal');_0x4883e1&&_0x4883e1['classList'][_0x4e2849(0x1fb)]('active');}async function confirmDeleteTrophy(_0x5e5adb){const _0x4f4296=a4_0x48ba8e;if(!_0x5e5adb){console['error'](_0x4f4296(0x121));return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x221f36=auth['currentUser'];if(!_0x221f36){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x5e5adb),await deleteDoc(doc(db,_0x4f4296(0xbf),_0x5e5adb)),showNotification(_0x4f4296(0x200),_0x4f4296(0x2c5)),loadTrophyDefinitions();}catch(_0x2c3dd2){console[_0x4f4296(0x18e)]('Error\x20deleting\x20trophy\x20definition:',_0x2c3dd2),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x2c3dd2[_0x4f4296(0x1e9)],'error');}}async function openAssignTrophyModal(_0x1bbb08){const _0x524ca2=a4_0x48ba8e;try{const _0x3681c6=doc(db,'trophyDefinitions',_0x1bbb08),_0x402509=await getDoc(_0x3681c6);if(!_0x402509['exists']()){showNotification(_0x524ca2(0x1ed),'error');return;}const _0xf1b566=_0x402509['data']();document[_0x524ca2(0x143)]('assign-trophy-id')[_0x524ca2(0x16d)]=_0x1bbb08,document['getElementById']('assign-trophy-name')['value']=_0xf1b566['name'],document[_0x524ca2(0x143)](_0x524ca2(0x149))['src']=_0xf1b566[_0x524ca2(0x2e9)]||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0xf1b566['name']||_0x524ca2(0xd7),document[_0x524ca2(0x143)](_0x524ca2(0x111))['textContent']=_0xf1b566['description']||_0x524ca2(0xf6);const _0x5bf502=document['getElementById'](_0x524ca2(0x179));_0x5bf502['textContent']=_0xf1b566[_0x524ca2(0x1fa)]||'common',_0x5bf502['className']='trophy-rarity\x20'+(_0xf1b566['rarity']||'common');const _0x265b8a=document['getElementById']('assign-trophy-modal');_0x265b8a[_0x524ca2(0x1d8)][_0x524ca2(0xd3)]('active');}catch(_0x5dfa20){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x5dfa20),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x494126=a4_0x48ba8e,_0x1ea1bd=document['getElementById']('assign-trophy-modal');_0x1ea1bd&&_0x1ea1bd[_0x494126(0x1d8)]['remove']('active');}async function assignTrophyToPlayer(){const _0x404267=a4_0x48ba8e;try{const _0x16b441=document['getElementById'](_0x404267(0x15e))['value'],_0x1ad5f8=document['getElementById'](_0x404267(0x223))['value'],_0xa534a2=document['getElementById']('assign-player-username')['value']['trim'](),_0x2bb1db=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x16b441||!_0xa534a2){showNotification(_0x404267(0x186),'error');return;}const _0x17d4b4=auth[_0x404267(0x280)];if(!_0x17d4b4){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies',_0x404267(0x18e));return;}let _0x14f26e=null,_0x29d5b1=null,_0x3ec8c1=null;if(_0x2bb1db==='non-participant'){const _0x2b552f=collection(db,_0x404267(0xdd)),_0x240721=query(_0x2b552f,where(_0x404267(0x2ee),'==',_0xa534a2)),_0x48a09f=await getDocs(_0x240721);!_0x48a09f['empty']&&(_0x14f26e=_0x48a09f[_0x404267(0x15a)][0x0],_0x29d5b1=_0x14f26e['id'],_0x3ec8c1=_0x14f26e['data']());}else{const _0x5f0af7=_0x2bb1db==='D1'?_0x404267(0x270):_0x2bb1db==='D2'?'playersD2':'playersD3',_0xe03695=collection(db,_0x5f0af7),_0x169a44=query(_0xe03695,where(_0x404267(0x2ee),'==',_0xa534a2)),_0x21eb13=await getDocs(_0x169a44);!_0x21eb13[_0x404267(0x248)]&&(_0x14f26e=_0x21eb13['docs'][0x0],_0x29d5b1=_0x14f26e['id'],_0x3ec8c1=_0x14f26e[_0x404267(0x26d)]());}if(!_0x14f26e){showNotification('Player\x20\x22'+_0xa534a2+'\x22\x20not\x20found\x20in\x20'+(_0x2bb1db==='non-participant'?'non-participants':_0x2bb1db+'\x20ladder'),_0x404267(0x18e));return;}const _0x47ba9e=collection(db,'userTrophies'),_0x10455c=query(_0x47ba9e,where('userId','==',_0x29d5b1),where('trophyId','==',_0x16b441)),_0x4c9b0d=await getDocs(_0x10455c);if(!_0x4c9b0d['empty']){showNotification(_0x404267(0x1e5)+_0xa534a2+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x29d5b1,'playerUsername':_0xa534a2,'trophyId':_0x16b441,'awardedAt':serverTimestamp(),'awardedBy':_0x17d4b4['email'],'ladder':_0x2bb1db}),showNotification(_0x404267(0x1ea)+_0x1ad5f8+_0x404267(0x2c6)+_0xa534a2,'success'),closeAssignTrophyModal();}catch(_0x322a28){console['error']('Error\x20assigning\x20trophy:',_0x322a28),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x322a28['message'],'error');}}function setupInactivePlayersSection(){const _0xb6ac08=a4_0x48ba8e,_0x598175=document['getElementById']('inactive-days-filter');_0x598175&&_0x598175[_0xb6ac08(0x299)]('change',function(){const _0x16673d=_0xb6ac08,_0x3cbc9f=document[_0x16673d(0x143)]('load-inactive-players-data');if(_0x3cbc9f)_0x3cbc9f['click']();});const _0x28b408=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0xfcedff=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x28b408&&_0xfcedff&&(_0x28b408[_0xb6ac08(0x299)]('change',function(){const _0xba1d86=_0xb6ac08;if(this[_0xba1d86(0x1b6)]){currentLadder='D1';if(document[_0xba1d86(0x143)]('inactive-players')['style']['display']!=='none'){const _0x44f156=document['getElementById']('load-inactive-players-data');if(_0x44f156)_0x44f156['click']();}}}),_0xfcedff['addEventListener']('change',function(){const _0x3531cc=_0xb6ac08;if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')[_0x3531cc(0x253)]['display']!=='none'){const _0x561a7e=document['getElementById'](_0x3531cc(0x278));if(_0x561a7e)_0x561a7e[_0x3531cc(0x233)]();}}}));const _0x279f21=document['getElementById']('inactive-players-search');_0x279f21&&_0x279f21[_0xb6ac08(0x299)](_0xb6ac08(0x260),debounce(function(){const _0x15188d=_0x279f21['value']['toLowerCase'](),_0x4ed336=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x4ed336['forEach'](_0x47fabe=>{const _0x1dabc3=a4_0x3f31;if(_0x47fabe['querySelector']('.loading-cell')||_0x47fabe[_0x1dabc3(0x207)]('.empty-state')||_0x47fabe['querySelector'](_0x1dabc3(0x174)))return;const _0x18d942=_0x47fabe['cells'][0x0]?.['textContent'][_0x1dabc3(0x215)]()||'',_0x330843=_0x47fabe[_0x1dabc3(0x16c)][0x5]?.['textContent']['toLowerCase']()||'';_0x18d942['includes'](_0x15188d)||_0x330843['includes'](_0x15188d)?_0x47fabe['style']['display']='':_0x47fabe['style']['display']=_0x1dabc3(0xe4);});},0x12c)),document['addEventListener']('click',function(_0x53b9bb){const _0x442b5b=_0xb6ac08;if(_0x53b9bb['target']['closest']('.view-player-btn')){const _0x845605=_0x53b9bb['target']['closest']('.view-player-btn'),_0x755a94=_0x845605[_0x442b5b(0x276)]['username'];_0x755a94&&alert('View\x20player\x20details\x20for\x20'+_0x755a94+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x5831a0=a4_0x48ba8e,_0x1f2431=document['getElementById'](_0x5831a0(0x1bb));if(!_0x1f2431)return;_0x1f2431['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0xd91eb9=document['getElementById'](_0x5831a0(0xdb)),_0x2b36a1=_0xd91eb9?parseInt(_0xd91eb9['value'])||0x0:0x0,_0x55d256=collection(db,currentLadder==='D1'?_0x5831a0(0x270):'playersD2'),_0x3d0b3c=await getDocs(_0x55d256);if(_0x3d0b3c[_0x5831a0(0x248)]){_0x1f2431['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x2a26de=[];_0x3d0b3c['forEach'](_0x51944c=>{const _0x197f66=_0x5831a0,_0x398d6a=_0x51944c['data']();_0x2a26de[_0x197f66(0x2f0)]({..._0x398d6a,'id':_0x51944c['id'],'username':_0x398d6a['username']||'Unknown\x20Player'});}),console['log'](_0x5831a0(0x23c)+_0x2a26de[_0x5831a0(0x2e4)]+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x548679=currentLadder==='D1'?_0x5831a0(0x2ec):'approvedMatchesD2',_0x47cebc=_0x2a26de['map'](async _0x318c09=>{const _0x352464=_0x5831a0;try{const _0x21fc38=collection(db,_0x548679),_0x51bc8b=query(_0x21fc38,or(where('winnerUsername','==',_0x318c09['username']),where('loserUsername','==',_0x318c09['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0xe162b9=await getDocs(_0x51bc8b);if(!_0xe162b9[_0x352464(0x248)]){const _0x56660e=_0xe162b9['docs'][0x0]['data'](),_0x60136c=_0x56660e['approvedAt']?new Date(_0x56660e['approvedAt']['seconds']*0x3e8):null,_0x43d6be=new Date(),_0x408873=_0x60136c?Math['floor']((_0x43d6be-_0x60136c)/(0x3e8*0x3c*0x3c*0x18)):null,_0x250238=_0x56660e['winnerUsername']===_0x318c09[_0x352464(0x2ee)]?_0x56660e[_0x352464(0x1fe)]:_0x56660e['winnerUsername'],_0x3c8e51=_0x56660e[_0x352464(0x2a9)]===_0x318c09['username']?'Won':'Lost';return{..._0x318c09,'lastMatch':{'date':_0x60136c?_0x60136c['toLocaleDateString']():'N/A','opponent':_0x250238||'Unknown','result':_0x3c8e51,'timestamp':_0x60136c||new Date(0x0),'daysSinceMatch':_0x408873||Number['MAX_SAFE_INTEGER']}};}else return{..._0x318c09,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x30349d){return console['error'](_0x352464(0x1ab)+_0x318c09[_0x352464(0x2ee)]+':',_0x30349d),{..._0x318c09,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x203aa1=await Promise['all'](_0x47cebc);_0x203aa1['sort']((_0x571306,_0x476fd4)=>_0x476fd4['lastMatch']['daysSinceMatch']-_0x571306['lastMatch'][_0x5831a0(0x24f)]);_0x2b36a1>0x0&&(_0x203aa1=_0x203aa1[_0x5831a0(0xe3)](_0x16d816=>_0x16d816['lastMatch']['daysSinceMatch']>=_0x2b36a1));_0x1f2431['innerHTML']='';if(_0x203aa1[_0x5831a0(0x2e4)]===0x0){_0x1f2431['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x203aa1[_0x5831a0(0xb7)](_0x3691ce=>{const _0x537bc9=_0x5831a0,_0x3181ff=document['createElement']('tr'),_0x4f22cc=_0x3691ce['lastMatch'][_0x537bc9(0x24f)]>0x1e?'highly-inactive':_0x3691ce['lastMatch'][_0x537bc9(0x24f)]>0xe?'moderately-inactive':'';_0x3181ff['className']=_0x4f22cc,_0x3181ff['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3691ce['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3691ce['eloRating']||0x4b0)+_0x537bc9(0x2a6)+_0x3691ce[_0x537bc9(0x28e)][_0x537bc9(0x16b)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3691ce['lastMatch']['daysSinceMatch']===Number[_0x537bc9(0x250)]?_0x537bc9(0x26e):_0x3691ce[_0x537bc9(0x28e)][_0x537bc9(0x24f)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3691ce['lastMatch']['date']===_0x537bc9(0x2dd)?'No\x20matches\x20found':_0x3691ce[_0x537bc9(0x28e)]['result']+'\x20vs\x20'+_0x3691ce[_0x537bc9(0x28e)][_0x537bc9(0x1b9)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x3691ce['username']+_0x537bc9(0x188),_0x1f2431['appendChild'](_0x3181ff);}),console['log']('Displaying\x20'+_0x203aa1[_0x5831a0(0x2e4)]+'\x20inactive\x20players');}catch(_0x205fc6){console['error']('Error\x20loading\x20inactive\x20players:',_0x205fc6),_0x1f2431[_0x5831a0(0x177)]=_0x5831a0(0x2a2)+_0x205fc6['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x265c33=a4_0x48ba8e;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x195c31=document['getElementById']('create-match-highlight-btn');_0x195c31&&_0x195c31[_0x265c33(0x299)]('click',function(){const _0x1c62bf=_0x265c33;console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal(_0x1c62bf(0x164));});const _0x1be8d0=document['getElementById']('create-creator-highlight-btn');_0x1be8d0&&_0x1be8d0['addEventListener'](_0x265c33(0x233),function(){const _0x2eb184=_0x265c33;console[_0x2eb184(0x116)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x4f18a4=document[_0x265c33(0x143)]('create-achievement-highlight-btn');_0x4f18a4&&_0x4f18a4['addEventListener'](_0x265c33(0x233),function(){const _0x228fe8=_0x265c33;console['log'](_0x228fe8(0x106)),openHighlightModal('achievement');});}function openHighlightModal(_0x276348=a4_0x48ba8e(0x164)){const _0xff430d=a4_0x48ba8e;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x276348);const _0x1dba9f=document[_0xff430d(0x143)]('highlight-modal'),_0x198e79=document[_0xff430d(0x143)]('highlight-form'),_0x5a4e64=document['getElementById'](_0xff430d(0x1d7)),_0x436aaa=document['getElementById']('highlight-id');if(!_0x1dba9f||!_0x198e79||!_0x5a4e64){console[_0xff430d(0x18e)]('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x198e79['reset'](),_0x436aaa[_0xff430d(0x16d)]='';const _0x591ff1=['match',_0xff430d(0x1ac),'achievement'],_0x4493ef=!_0x591ff1['includes'](_0x276348);if(_0x4493ef){const _0x349a49=_0x276348;_0x436aaa['value']=_0x349a49,_0x5a4e64[_0xff430d(0xc1)]='Loading...',loadHighlightDataAdmin(_0x349a49);}else{const _0x4af646=_0x276348;document['getElementById']('highlight-type')['value']=_0x4af646,_0x5a4e64['textContent']=_0xff430d(0x1fd)+getHighlightTypeName(_0x4af646),toggleHighlightFields(_0x4af646);const _0x2d240b=auth['currentUser'];_0x2d240b&&document[_0xff430d(0x143)]('highlight-submitted-by')&&(document[_0xff430d(0x143)](_0xff430d(0x26c))[_0xff430d(0x16d)]=_0x2d240b[_0xff430d(0x122)]||_0x2d240b['email']);}_0x1dba9f[_0xff430d(0x1d8)]['add'](_0xff430d(0x283));}function toggleHighlightFields(_0x5da927){const _0x3def83=a4_0x48ba8e;console[_0x3def83(0x116)]('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x5da927);const _0x5760b4=document['getElementById']('highlight-form');if(!_0x5760b4)return;const _0x52939d=_0x5760b4['querySelectorAll']('.form-group,\x20.form-row');_0x52939d[_0x3def83(0xb7)](_0x806a32=>_0x806a32['style'][_0x3def83(0x2be)]=_0x3def83(0xe4));const _0x234996=document['getElementById']('highlight-video-preview-container');if(_0x234996)_0x234996['style'][_0x3def83(0x2be)]=_0x3def83(0xe4);const _0x5df71b=['highlight-title-container',_0x3def83(0x257),'highlight-submitted-by-container'];_0x5df71b[_0x3def83(0xb7)](_0x337ae3=>{const _0x22b409=_0x3def83,_0xec8f4d=document[_0x22b409(0x143)](_0x337ae3);if(_0xec8f4d)_0xec8f4d[_0x22b409(0x253)]['display']='block';});if(_0x5da927==='match'){const _0x4fffc7=[_0x3def83(0x284),_0x3def83(0x27d),_0x3def83(0x13c),'highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x4fffc7[_0x3def83(0xb7)](_0x1c7b8a=>{const _0x1b8834=_0x3def83,_0x1a12ea=document['getElementById'](_0x1c7b8a);_0x1a12ea&&(_0x1c7b8a==='highlight-players-container'?_0x1a12ea['style'][_0x1b8834(0x2be)]='flex':_0x1a12ea['style'][_0x1b8834(0x2be)]='block');});const _0x29f4f1=document['getElementById']('highlight-video-id');if(_0x29f4f1){_0x29f4f1[_0x3def83(0x113)]=!![];const _0x5696c5=_0x29f4f1['previousElementSibling'];if(_0x5696c5)_0x5696c5[_0x3def83(0x177)]='YouTube\x20Video\x20ID*';}if(_0x234996)_0x234996['style'][_0x3def83(0x2be)]='block';updateHighlightVideoPreview();}else{if(_0x5da927==='creator'){const _0x1b6044=[_0x3def83(0x13c),'highlight-map-creator-container','highlight-map-version-container',_0x3def83(0x24e),'highlight-video-container'];_0x1b6044['forEach'](_0x18fcaa=>{const _0x407fc7=_0x3def83,_0x328aaf=document['getElementById'](_0x18fcaa);if(_0x328aaf)_0x328aaf['style']['display']=_0x407fc7(0x1db);});const _0x25f39c=document[_0x3def83(0x143)]('highlight-video-id');if(_0x25f39c){_0x25f39c['required']=![];const _0x1b1551=_0x25f39c[_0x3def83(0x2d3)];if(_0x1b1551)_0x1b1551[_0x3def83(0x177)]='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x5da927===_0x3def83(0x115)){const _0x18143e=['highlight-achievement-player-container','highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0x18143e[_0x3def83(0xb7)](_0x324f66=>{const _0x390474=_0x3def83,_0x51543b=document[_0x390474(0x143)](_0x324f66);if(_0x51543b)_0x51543b[_0x390474(0x253)]['display']=_0x390474(0x1db);});const _0x1b4ec4=document['getElementById']('highlight-video-id');if(_0x1b4ec4){_0x1b4ec4['required']=![];const _0x5b6cec=_0x1b4ec4['previousElementSibling'];if(_0x5b6cec)_0x5b6cec['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x531923){const _0x22a050=a4_0x48ba8e;try{const _0x1942a0=doc(db,'highlights',_0x531923),_0x4758dd=await getDoc(_0x1942a0);if(!_0x4758dd[_0x22a050(0x100)]()){showNotification('Highlight\x20not\x20found','error');return;}const _0x20306c=_0x4758dd['data'](),_0x44da54=_0x20306c['type']||'match';document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x44da54),document[_0x22a050(0x143)]('highlight-type')[_0x22a050(0x16d)]=_0x44da54,toggleHighlightFields(_0x44da54),document['getElementById']('highlight-title')['value']=_0x20306c['title']||'',document[_0x22a050(0x143)](_0x22a050(0x17c))['value']=_0x20306c['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x20306c['submittedBy']||'';_0x20306c['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x20306c['videoId'],updateHighlightVideoPreview());if(_0x44da54==='match'){document[_0x22a050(0x143)]('highlight-match-info')['value']=_0x20306c[_0x22a050(0x180)]||'',document[_0x22a050(0x143)]('highlight-map')['value']=_0x20306c['map']||'';if(_0x20306c['matchDate']){const _0x57ee77=new Date(_0x20306c['matchDate'][_0x22a050(0x183)]*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x57ee77['toISOString']()[_0x22a050(0x199)]('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x20306c[_0x22a050(0xf3)]||'',document['getElementById'](_0x22a050(0x25d))['value']=_0x20306c['winnerScore']||'',document['getElementById'](_0x22a050(0x2b3))[_0x22a050(0x16d)]=_0x20306c[_0x22a050(0x105)]||'',document['getElementById']('highlight-loser-score')['value']=_0x20306c['loserScore']||'',document['getElementById']('highlight-match-link')['value']=_0x20306c['matchLink']||'';}else{if(_0x44da54===_0x22a050(0x1ac))document['getElementById']('highlight-map')[_0x22a050(0x16d)]=_0x20306c[_0x22a050(0x151)]||'',document['getElementById']('highlight-map-creator')['value']=_0x20306c['mapCreator']||'',document[_0x22a050(0x143)]('highlight-map-version')['value']=_0x20306c['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x20306c[_0x22a050(0x2af)]||'';else _0x44da54==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0x20306c['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x20306c['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x20306c['achievementDetails']||'',document['getElementById'](_0x22a050(0x1a4))['value']=_0x20306c[_0x22a050(0x12e)]||'',document['getElementById'](_0x22a050(0x287))[_0x22a050(0x16d)]=_0x20306c['achievementImageUrl']||'');}}catch(_0x57d9bb){console['error']('Error\x20loading\x20highlight:',_0x57d9bb),showNotification('Error\x20loading\x20highlight:\x20'+_0x57d9bb['message'],_0x22a050(0x18e));}}async function saveHighlight(){const _0x31b76f=a4_0x48ba8e;try{const _0x56717e=document['getElementById'](_0x31b76f(0x1d3))?.[_0x31b76f(0x16d)]||'',_0x2b5b11=document['getElementById']('highlight-type')?.['value']||'match',_0x4d9533={'title':document['getElementById'](_0x31b76f(0x10f))?.['value']?.[_0x31b76f(0x2ca)]()||'','description':document['getElementById'](_0x31b76f(0x17c))?.['value']?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.[_0x31b76f(0x16d)]?.[_0x31b76f(0x2ca)]()||'','videoId':document[_0x31b76f(0x143)](_0x31b76f(0xea))?.[_0x31b76f(0x16d)]?.['trim']()||null,'type':_0x2b5b11};if(!_0x4d9533[_0x31b76f(0x15d)]){showNotification(_0x31b76f(0x27e),'error');return;}if(_0x2b5b11==='match'){_0x4d9533[_0x31b76f(0x180)]=document[_0x31b76f(0x143)]('highlight-match-info')?.['value']?.[_0x31b76f(0x2ca)]()||'',_0x4d9533['map']=document['getElementById'](_0x31b76f(0x249))?.['value']?.['trim']()||'';const _0x1fe5b5=document[_0x31b76f(0x143)]('highlight-match-date'),_0x28b3d6=_0x1fe5b5?.['value']||'';_0x4d9533[_0x31b76f(0x2b4)]=_0x28b3d6?Timestamp['fromDate'](new Date(_0x28b3d6)):null,_0x4d9533[_0x31b76f(0xf3)]=document['getElementById'](_0x31b76f(0x1f1))?.['value']?.[_0x31b76f(0x2ca)]()||'',_0x4d9533[_0x31b76f(0x12c)]=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x4d9533['loserName']=document[_0x31b76f(0x143)](_0x31b76f(0x2b3))?.['value']?.['trim']()||'',_0x4d9533['loserScore']=document['getElementById']('highlight-loser-score')?.['value']?.[_0x31b76f(0x2ca)]()||'',_0x4d9533['matchLink']=document['getElementById'](_0x31b76f(0xcb))?.[_0x31b76f(0x16d)]?.['trim']()||'';if(!_0x4d9533['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x2b5b11==='creator'){_0x4d9533[_0x31b76f(0x151)]=document[_0x31b76f(0x143)]('highlight-map')?.[_0x31b76f(0x16d)]?.[_0x31b76f(0x2ca)]()||'',_0x4d9533['mapCreator']=document['getElementById']('highlight-map-creator')?.['value']?.[_0x31b76f(0x2ca)]()||'',_0x4d9533['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x4d9533[_0x31b76f(0x2af)]=document['getElementById']('highlight-creator-image')?.['value']?.[_0x31b76f(0x2ca)]()||'';if(!_0x4d9533['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x2b5b11==='achievement'){_0x4d9533['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.['value']?.['trim']()||'',_0x4d9533['achievementType']=document['getElementById'](_0x31b76f(0x10a))?.[_0x31b76f(0x16d)]?.['trim']()||'',_0x4d9533['achievementDetails']=document['getElementById'](_0x31b76f(0xc7))?.['value']?.['trim']()||'',_0x4d9533['playerProfileUrl']=document[_0x31b76f(0x143)]('highlight-player-profile')?.['value']?.['trim']()||'',_0x4d9533['achievementImageUrl']=document['getElementById'](_0x31b76f(0x287))?.['value']?.['trim']()||'';if(!_0x4d9533['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required',_0x31b76f(0x18e));return;}}}}_0x56717e?(_0x4d9533['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x56717e),_0x4d9533),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x4d9533[_0x31b76f(0x1e8)]=serverTimestamp(),await addDoc(collection(db,_0x31b76f(0xf8)),_0x4d9533),showNotification('Highlight\x20created\x20successfully!',_0x31b76f(0x2c5))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x2d2e40){console[_0x31b76f(0x18e)](_0x31b76f(0x24a),_0x2d2e40),showNotification('Error\x20saving\x20highlight:\x20'+_0x2d2e40['message'],_0x31b76f(0x18e));}}function closeHighlightModal(){const _0x54f1d4=a4_0x48ba8e,_0x423ab1=document['getElementById']('highlight-modal');if(_0x423ab1)_0x423ab1[_0x54f1d4(0x1d8)]['remove'](_0x54f1d4(0x283));}function getHighlightTypeName(_0x237546){const _0x2afdc1=a4_0x48ba8e;switch(_0x237546){case'match':return'Match\x20Highlight';case _0x2afdc1(0x1ac):return _0x2afdc1(0x224);case _0x2afdc1(0x115):return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x99e745=a4_0x48ba8e,_0x3f79db=document['getElementById']('highlight-video-id'),_0x79739a=document[_0x99e745(0x143)]('highlight-video-preview-container'),_0x19439c=document['getElementById'](_0x99e745(0x12f));if(!_0x3f79db||!_0x19439c||!_0x79739a)return;const _0x2cb461=_0x3f79db[_0x99e745(0x16d)]['trim']();_0x2cb461&&/^[a-zA-Z0-9_-]{11}$/[_0x99e745(0x2c2)](_0x2cb461)?(_0x19439c[_0x99e745(0x14d)]='https://www.youtube.com/embed/'+_0x2cb461,_0x79739a['style'][_0x99e745(0x2be)]='block'):(_0x19439c['src']='',_0x79739a['style']['display']='none');}async function loadHighlightsAdmin(){const _0x30e1c1=a4_0x48ba8e,_0x327947=document['getElementById'](_0x30e1c1(0x1e6));if(!_0x327947)return;_0x327947['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x2a7861=query(collection(db,'highlights'),orderBy(_0x30e1c1(0x1e8),_0x30e1c1(0x1f5))),_0x3ca287=await getDocs(_0x2a7861);if(_0x3ca287['empty']){_0x327947[_0x30e1c1(0x177)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x327947['innerHTML']='',_0x3ca287['forEach'](_0x231ddb=>{const _0x51c54f=_0x30e1c1,_0x3b9271=_0x231ddb['data'](),_0xf1ac55=document['createElement']('tr'),_0x44860b=_0x3b9271[_0x51c54f(0x1e8)]?new Date(_0x3b9271['createdAt'][_0x51c54f(0x183)]*0x3e8)['toLocaleDateString']():'N/A';let _0x5eb18f=_0x51c54f(0xda),_0x227b14='';switch(_0x3b9271['type']){case'match':_0x5eb18f='Match',_0x227b14=_0x51c54f(0x292);break;case'creator':_0x5eb18f='Creator',_0x227b14='creator-type';break;case'achievement':_0x5eb18f=_0x51c54f(0x288),_0x227b14='achievement-type';break;}_0xf1ac55['innerHTML']=_0x51c54f(0x163)+(_0x3b9271[_0x51c54f(0x15d)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x227b14+'\x22>'+_0x5eb18f+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x44860b+_0x51c54f(0x2a6)+(_0x3b9271['submittedBy']||_0x51c54f(0xda))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3b9271[_0x51c54f(0x213)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x231ddb['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x231ddb['id']+_0x51c54f(0x1fc),_0x327947['appendChild'](_0xf1ac55);}),document['querySelectorAll'](_0x30e1c1(0x268))['forEach'](_0x1f56fc=>{_0x1f56fc['addEventListener']('click',_0x4ce452=>{const _0x369aa5=a4_0x3f31;openHighlightModal(_0x4ce452[_0x369aa5(0x1cf)]['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')[_0x30e1c1(0xb7)](_0x24088d=>{_0x24088d['addEventListener']('click',_0x59186d=>{const _0x480809=a4_0x3f31;confirmDeleteHighlight(_0x59186d[_0x480809(0x1cf)]['dataset']['id']);});});}catch(_0x254dc5){console['error'](_0x30e1c1(0x1c3),_0x254dc5),_0x327947[_0x30e1c1(0x177)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x254dc5['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x35a706){const _0x58beb8=a4_0x48ba8e;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x35a706)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x5b300f){console[_0x58beb8(0x18e)](_0x58beb8(0x24b),_0x5b300f),showNotification(_0x58beb8(0x263)+_0x5b300f['message'],'error');}}function setupCreateTestMatchModal(){const _0x4cdfd1=a4_0x48ba8e;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x49fdaf=document['getElementById']('create-test-match-modal'),_0x10872f=document['getElementById']('create-test-match-form');if(!_0x49fdaf){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x10872f){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x1f5440=_0x49fdaf['cloneNode'](!![]);_0x49fdaf['parentNode']['replaceChild'](_0x1f5440,_0x49fdaf);const _0x5239d5=_0x1f5440['querySelector']('#create-test-match-form');_0x1f5440[_0x4cdfd1(0x299)]('click',function(_0x4f128f){_0x4f128f['target']===_0x1f5440&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x1fec85=_0x1f5440['querySelector'](_0x4cdfd1(0x1bf));_0x1fec85&&_0x1fec85['addEventListener']('click',function(_0x195d20){const _0x2bbb95=_0x4cdfd1;_0x195d20['preventDefault'](),_0x195d20[_0x2bbb95(0x271)](),console[_0x2bbb95(0x116)]('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x425b6d=_0x1f5440['querySelector']('#cancel-create-test-match-btn');_0x425b6d&&_0x425b6d['addEventListener']('click',function(_0x54073b){_0x54073b['preventDefault'](),_0x54073b['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x5239d5){_0x5239d5['addEventListener']('submit',function(_0x576111){_0x576111['preventDefault'](),_0x576111['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x5abc66=_0x5239d5['querySelector']('button[type=\x22submit\x22]');_0x5abc66&&_0x5abc66['addEventListener']('click',function(_0xe4391d){const _0x5a0e32=_0x4cdfd1;_0xe4391d[_0x5a0e32(0x217)](),_0xe4391d['stopPropagation'](),console['log'](_0x5a0e32(0x14a)),createTestMatch();});}console[_0x4cdfd1(0x116)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x379638=a4_0x48ba8e;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x451112=document[_0x379638(0x143)]('highlight-form');_0x451112&&_0x451112['addEventListener'](_0x379638(0x211),_0x2a1527=>{_0x2a1527['preventDefault'](),saveHighlight();});const _0x22199e=document[_0x379638(0x143)](_0x379638(0x1c1));_0x22199e&&_0x22199e[_0x379638(0x299)]('click',closeHighlightModal);const _0x59eb2c=document['querySelector']('#highlight-modal\x20.close-btn');_0x59eb2c&&_0x59eb2c['addEventListener']('click',closeHighlightModal);const _0x3fd11c=document['getElementById']('highlight-modal');_0x3fd11c&&_0x3fd11c['addEventListener'](_0x379638(0x233),_0x1a37ed=>{_0x1a37ed['target']===_0x3fd11c&&closeHighlightModal();});const _0x2027b1=document[_0x379638(0x143)]('highlight-video-id');_0x2027b1&&_0x2027b1['addEventListener'](_0x379638(0x260),()=>{updateHighlightVideoPreview();}),console[_0x379638(0x116)]('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x1dea14=a4_0x48ba8e;console[_0x1dea14(0x116)](_0x1dea14(0x232));const _0x3e2d94=document['getElementById']('matches-prev-page'),_0x5833e8=document['getElementById']('matches-next-page');_0x3e2d94&&_0x3e2d94['addEventListener']('click',()=>{const _0x72bf4c=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x72bf4c]['page']-0x1);});_0x5833e8&&_0x5833e8[_0x1dea14(0x299)](_0x1dea14(0x233),()=>{const _0x24678c=_0x1dea14,_0x5bf15a=currentLadder[_0x24678c(0x215)]();loadMatchesData(matchesPagination[_0x5bf15a]['page']+0x1);});const _0x32f6c6=document[_0x1dea14(0x143)]('apply-matches-filters'),_0x87ef47=document[_0x1dea14(0x143)]('reset-matches-filters');_0x32f6c6&&_0x32f6c6['addEventListener']('click',applyMatchesFilters);_0x87ef47&&_0x87ef47['addEventListener'](_0x1dea14(0x233),resetMatchesFilters);const _0x25c69c=document[_0x1dea14(0x143)](_0x1dea14(0x258));_0x25c69c&&_0x25c69c['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x26dba7=document['getElementById'](_0x1dea14(0x254));_0x26dba7&&_0x26dba7['addEventListener'](_0x1dea14(0x233),openResimulateModal);const _0x2b0f85=document['getElementById']('resimulate-modal');if(_0x2b0f85){const _0xb619d1=_0x2b0f85['querySelector']('.close');_0xb619d1&&_0xb619d1['addEventListener']('click',closeResimulateModal),_0x2b0f85['addEventListener'](_0x1dea14(0x233),_0x2b2819=>{_0x2b2819['target']===_0x2b0f85&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x4c6ae4=a4_0x48ba8e;console[_0x4c6ae4(0x116)]('Opening\x20create\x20test\x20match\x20modal');const _0x44d0b5=document['getElementById']('create-test-match-modal'),_0x3e3c99=document['getElementById']('create-test-match-form');if(!_0x44d0b5){console['error'](_0x4c6ae4(0x2e0)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found',_0x4c6ae4(0x18e));return;}if(!_0x3e3c99){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification(_0x4c6ae4(0x2c3),'error');return;}_0x3e3c99[_0x4c6ae4(0x1af)]();const _0x104706=document['querySelectorAll'](_0x4c6ae4(0x1bd));let _0x1ccaa3=![];_0x104706[_0x4c6ae4(0xb7)](_0x1f202f=>{const _0xfaadd4=_0x4c6ae4;console['log']('Found\x20radio\x20with\x20value:',_0x1f202f['value']),_0x1f202f[_0xfaadd4(0x16d)]===currentLadder&&(_0x1f202f[_0xfaadd4(0x1b6)]=!![],_0x1ccaa3=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x1ccaa3){console['warn'](_0x4c6ae4(0xd0),currentLadder);const _0x192001=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x192001&&(_0x192001['checked']=!![],console[_0x4c6ae4(0x116)]('Defaulted\x20to\x20D1\x20ladder'));}const _0x4c6803=document['getElementById'](_0x4c6ae4(0x152));if(_0x4c6803){const _0xe38436=new Date()['toISOString']()['split']('T')[0x0];_0x4c6803[_0x4c6ae4(0x16d)]=_0xe38436;}_0x44d0b5['style']['display']='flex',_0x44d0b5['style'][_0x4c6ae4(0x21c)]='visible',_0x44d0b5['style']['opacity']='1',_0x44d0b5['classList'][_0x4c6ae4(0xd3)](_0x4c6ae4(0x283)),console[_0x4c6ae4(0x116)]('Modal\x20should\x20now\x20be\x20visible');const _0x3de861=document['getElementById']('test-match-winner-username');_0x3de861&&setTimeout(()=>{_0x3de861['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x4121bd=a4_0x48ba8e;console[_0x4121bd(0x116)]('Closing\x20create\x20test\x20match\x20modal');const _0x18ff75=document[_0x4121bd(0x143)]('create-test-match-modal');if(!_0x18ff75){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x18ff75['classList']['remove']('active'),_0x18ff75['style']['opacity']='0',_0x18ff75['style']['visibility']=_0x4121bd(0x26f),setTimeout(()=>{const _0x3e9320=_0x4121bd;!_0x18ff75['classList']['contains']('active')&&(_0x18ff75['style'][_0x3e9320(0x2be)]='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x57b820=a4_0x48ba8e;console['log'](_0x57b820(0x1ad));try{const _0xbb3bb0=auth['currentUser'];if(!_0xbb3bb0){showNotification(_0x57b820(0x28a),'error');return;}const _0x3afe27='D1',_0x474654='approvedMatches',_0x3dfe07={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x57b820(0x25b),'winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x57b820(0x25b),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp[_0x57b820(0x1be)](new Date()),'approvedBy':_0xbb3bb0['email'],'createdAt':serverTimestamp(),'createdBy':_0xbb3bb0['email'],'isTestMatch':!![],'ladder':_0x3afe27,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0xbb3bb0['email']};console[_0x57b820(0x116)]('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x474654),_0x3dfe07),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x185455){console[_0x57b820(0x18e)]('Error\x20creating\x20simple\x20test\x20match:',_0x185455),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x185455['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x38944a=a4_0x48ba8e;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console[_0x38944a(0x116)](_0x38944a(0x1f6),db),console['log']('Current\x20user:',auth[_0x38944a(0x280)]);const _0x437b7f=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x437b7f);const _0x538118=query(_0x437b7f,where('username','==',_0x38944a(0xc3)));console['log']('Query\x20created:',_0x538118);const _0xa2606a=await getDocs(_0x538118);console[_0x38944a(0x116)]('Query\x20executed.\x20Empty:',_0xa2606a['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x1b9058){console[_0x38944a(0x18e)]('Firebase\x20connection\x20test\x20failed:',_0x1b9058);}};function setupCreateTestMatchButton(){const _0x1c4051=a4_0x48ba8e,_0x59291e=document[_0x1c4051(0x143)]('create-test-match-btn');if(!_0x59291e){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x5cbb10=_0x59291e[_0x1c4051(0x202)](!![]);_0x59291e['parentNode']['replaceChild'](_0x5cbb10,_0x59291e),_0x5cbb10['addEventListener']('click',function(_0x7da348){_0x7da348['preventDefault'](),_0x7da348['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0x1c4051(0x116)](_0x1c4051(0x29b));}async function loadMatchesData(_0x4442ef=0x1){const _0x34c41f=a4_0x48ba8e,_0x27a676=document['getElementById']('matches-table-body');if(!_0x27a676)return;_0x27a676[_0x34c41f(0x177)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x467bfa=currentLadder['toLowerCase'](),_0x35958d=matchesPagination[_0x467bfa],_0x4e4c0d=currentLadder==='D1'?_0x34c41f(0x2ec):currentLadder==='D2'?_0x34c41f(0x187):'approvedMatchesD3',_0x26191f=collection(db,_0x4e4c0d);_0x4442ef<=0x1?(_0x35958d['page']=0x1,_0x35958d['firstVisible']=null,_0x35958d['lastVisible']=null):_0x35958d[_0x34c41f(0x246)]=_0x4442ef;const _0x364cc3=getMatchesFilters();let _0x33b913=_0x26191f;if(_0x364cc3['startDate']||_0x364cc3['endDate']||_0x364cc3['searchTerm']){let _0x581ed4=[];_0x364cc3['startDate']&&_0x364cc3['endDate']?(_0x581ed4['push'](where('approvedAt','>=',_0x364cc3[_0x34c41f(0x1ba)]),where('approvedAt','<=',_0x364cc3[_0x34c41f(0x251)])),_0x33b913=query(_0x26191f,..._0x581ed4)):_0x33b913=query(_0x26191f,orderBy(_0x34c41f(0x2db),_0x34c41f(0x1f5)));}else _0x33b913=query(_0x26191f,orderBy('approvedAt','desc'));_0x4442ef>0x1&&_0x35958d[_0x34c41f(0x279)]?_0x33b913=query(_0x33b913,startAfter(_0x35958d[_0x34c41f(0x279)]),limit(PAGE_SIZE)):_0x33b913=query(_0x33b913,limit(PAGE_SIZE));const _0x30fb61=await getDocs(_0x33b913);!_0x30fb61[_0x34c41f(0x248)]&&(_0x35958d['firstVisible']=_0x30fb61['docs'][0x0],_0x35958d['lastVisible']=_0x30fb61['docs'][_0x30fb61[_0x34c41f(0x15a)]['length']-0x1]);let _0x46d38a=![];if(!_0x30fb61['empty']){const _0x23c16c=query(_0x33b913,startAfter(_0x35958d['lastVisible']),limit(0x1)),_0x18fb7a=await getDocs(_0x23c16c);_0x46d38a=!_0x18fb7a['empty'];}const _0x2abd37=document['getElementById'](_0x34c41f(0x19b)),_0x329192=document['getElementById'](_0x34c41f(0x190)),_0x3d2739=document['getElementById']('matches-page-indicator');if(_0x2abd37)_0x2abd37['disabled']=_0x35958d['page']<=0x1;if(_0x329192)_0x329192['disabled']=!_0x46d38a;if(_0x3d2739)_0x3d2739['textContent']=_0x34c41f(0x297)+_0x35958d['page'];if(_0x30fb61['empty']){_0x27a676['innerHTML']=_0x34c41f(0x218);return;}_0x27a676[_0x34c41f(0x177)]='',_0x30fb61[_0x34c41f(0xb7)](_0x123d0b=>{const _0x36462c=_0x34c41f,_0x451267=_0x123d0b['data'](),_0x39fc2a=document[_0x36462c(0x1b0)]('tr'),_0x4e40a5=_0x451267[_0x36462c(0x2db)]?new Date(_0x451267['approvedAt'][_0x36462c(0x183)]*0x3e8)['toLocaleDateString']():'N/A';_0x39fc2a['setAttribute']('data-id',_0x123d0b['id']),_0x39fc2a['setAttribute'](_0x36462c(0x2a5),currentLadder),_0x39fc2a[_0x36462c(0x1d8)]['add']('match-row'),_0x39fc2a[_0x36462c(0x177)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4e40a5+_0x36462c(0x252)+(_0x451267['winnerUsername']||'Unknown')+_0x36462c(0x114)+(_0x451267['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x451267['winnerScore']||0x0)+'\x20-\x20'+(_0x451267['loserScore']||0x0)+_0x36462c(0x255)+(_0x451267[_0x36462c(0x135)]||_0x36462c(0x26e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x123d0b['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x123d0b['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x27a676[_0x36462c(0x140)](_0x39fc2a);}),setupMatchesActionButtons(),_0x364cc3['searchTerm']&&filterMatchesTable(),console['log'](_0x34c41f(0x11b)+_0x30fb61['size']+'\x20matches\x20for\x20'+currentLadder+_0x34c41f(0x131)+_0x35958d['page']);}catch(_0x158ed5){console['error']('Error\x20loading\x20matches:',_0x158ed5),_0x27a676['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x158ed5['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0xd31743,_0x526c8a){const _0x587aea=a4_0x48ba8e;try{console['log']('Deleting\x20match\x20'+_0xd31743+'\x20from\x20'+_0x526c8a+'\x20ladder');const _0x2fee72=auth['currentUser'];if(!_0x2fee72){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x50e0cd=_0x526c8a==='D1'?'approvedMatches':_0x526c8a==='D2'?'approvedMatchesD2':_0x587aea(0x2b7);console[_0x587aea(0x116)]('Using\x20collection:\x20'+_0x50e0cd),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x50e0cd,_0xd31743)),console[_0x587aea(0x116)](_0x587aea(0x1a3)),showNotification('Match\x20deleted\x20successfully',_0x587aea(0x2c5));const _0x5ec471=_0x526c8a[_0x587aea(0x215)]();loadMatchesData(matchesPagination[_0x5ec471]['page']);}catch(_0x428c3c){console['error']('Error\x20deleting\x20match:',_0x428c3c),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x428c3c['message'],'error');}}function setupMatchesActionButtons(){const _0x4f0103=a4_0x48ba8e;console[_0x4f0103(0x116)]('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll'](_0x4f0103(0x192))['forEach'](_0x59eebd=>{const _0x32c782=_0x4f0103;_0x59eebd['addEventListener'](_0x32c782(0x233),_0x236c04=>{_0x236c04['preventDefault'](),_0x236c04['stopPropagation']();const _0x1607e6=_0x236c04['currentTarget']['dataset']['id'],_0x4b49ba=_0x236c04['currentTarget']['closest']('tr'),_0x1731f1=_0x4b49ba['dataset']['ladder'];console['log']('Edit\x20match\x20clicked:',_0x1607e6,_0x1731f1),openEditMatchModal(_0x1607e6,_0x1731f1);});}),document['querySelectorAll'](_0x4f0103(0x22e))[_0x4f0103(0xb7)](_0x454e3c=>{_0x454e3c['addEventListener']('click',_0x3c1c61=>{const _0x558c68=a4_0x3f31;_0x3c1c61['preventDefault'](),_0x3c1c61[_0x558c68(0x271)]();const _0x5c0d14=_0x3c1c61['currentTarget']['dataset']['id'],_0x14179e=_0x3c1c61[_0x558c68(0x1cf)]['closest']('tr'),_0x5e890d=_0x14179e['dataset']['ladder']||currentLadder;console[_0x558c68(0x116)]('Delete\x20match\x20clicked:',_0x5c0d14,_0x5e890d),confirm(_0x558c68(0x1bc))&&deleteMatch(_0x5c0d14,_0x5e890d);});}),console['log'](_0x4f0103(0xb5));}function filterMatchesTable(){const _0x46bfdc=a4_0x48ba8e,_0x52c96e=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x46629d=document['querySelectorAll']('#matches-table-body\x20tr');let _0x15d136=0x0;_0x46629d[_0x46bfdc(0xb7)](_0x280341=>{const _0x47051a=_0x46bfdc;if(_0x280341['classList']['contains']('loading-cell')||_0x280341[_0x47051a(0x1d8)]['contains']('empty-state')||_0x280341['classList']['contains']('error-state'))return;const _0x2284e0=_0x280341[_0x47051a(0x16c)][0x1]['textContent']['toLowerCase'](),_0x4fd175=_0x280341[_0x47051a(0x16c)][0x2]['textContent']['toLowerCase'](),_0x261c13=_0x280341['cells'][0x4]['textContent'][_0x47051a(0x215)]();_0x2284e0['includes'](_0x52c96e)||_0x4fd175['includes'](_0x52c96e)||_0x261c13['includes'](_0x52c96e)?(_0x280341[_0x47051a(0x253)]['display']='',_0x15d136++):_0x280341['style']['display']='none';});if(_0x15d136===0x0&&_0x46629d['length']>0x0){const _0x5e08b6=document['getElementById']('matches-table-body'),_0x33c864=_0x5e08b6[_0x46bfdc(0x207)]('.no-results');if(!_0x33c864){const _0x359d92=document['createElement']('tr');_0x359d92[_0x46bfdc(0xfd)]='no-results',_0x359d92['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x52c96e+'\x27</td>',_0x5e08b6['appendChild'](_0x359d92);}}else{const _0x53baa7=document[_0x46bfdc(0x207)]('.no-results');_0x53baa7&&_0x53baa7['remove']();}}function getMatchesFilters(){const _0xbc1347=a4_0x48ba8e,_0x276e3e=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x441f25=document[_0xbc1347(0x143)](_0xbc1347(0xbb))[_0xbc1347(0x16d)],_0xc351de=document['getElementById'](_0xbc1347(0x12d))['value'];let _0x1684d9=null,_0x3d77af=null;return _0x441f25&&(_0x1684d9=new Date(_0x441f25),_0x1684d9['setHours'](0x0,0x0,0x0,0x0),_0x1684d9=Timestamp['fromDate'](_0x1684d9)),_0xc351de&&(_0x3d77af=new Date(_0xc351de),_0x3d77af['setHours'](0x17,0x3b,0x3b,0x3e7),_0x3d77af=Timestamp[_0xbc1347(0x1be)](_0x3d77af)),{'searchTerm':_0x276e3e,'startDate':_0x1684d9,'endDate':_0x3d77af};}function a4_0x3f31(_0x409cb9,_0x51dedd){const _0x2a3aae=a4_0x513f();return a4_0x3f31=function(_0x1f1174,_0x31bc4d){_0x1f1174=_0x1f1174-0xb4;let _0x513fda=_0x2a3aae[_0x1f1174];return _0x513fda;},a4_0x3f31(_0x409cb9,_0x51dedd);}async function applyMatchesFilters(){const _0x487c82=currentLadder['toLowerCase']();matchesPagination[_0x487c82]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x406089=a4_0x48ba8e;document[_0x406089(0x143)]('matches-start-date')['value']='',document[_0x406089(0x143)]('matches-end-date')['value']='',document['getElementById']('matches-search')['value']='';const _0x1ac03f=currentLadder['toLowerCase']();matchesPagination[_0x1ac03f]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x46630b,_0x3a1a50){const _0x49be8f=a4_0x48ba8e,_0x1c6472=document['getElementById']('edit-match-modal');if(!_0x1c6472)return;try{const _0x4d4b85=_0x3a1a50==='D1'?_0x49be8f(0x2ec):_0x3a1a50==='D2'?_0x49be8f(0x187):_0x49be8f(0x2b7),_0x4d9f1a=doc(db,_0x4d4b85,_0x46630b),_0x2c6603=await getDoc(_0x4d9f1a);if(!_0x2c6603['exists']()){showNotification('Match\x20not\x20found',_0x49be8f(0x18e));return;}const _0x2fabe3=_0x2c6603[_0x49be8f(0x26d)]();document['getElementById']('edit-match-id')[_0x49be8f(0x16d)]=_0x46630b,document['getElementById']('edit-match-ladder')[_0x49be8f(0x16d)]=_0x3a1a50,document['getElementById']('edit-match-winner')['value']=_0x2fabe3['winnerUsername']||'',document['getElementById']('edit-match-winner-score')['value']=_0x2fabe3['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0x2fabe3['winnerSuicides']||0x0,document['getElementById'](_0x49be8f(0x107))[_0x49be8f(0x16d)]=_0x2fabe3[_0x49be8f(0x20a)]||'',document['getElementById']('edit-match-loser')['value']=_0x2fabe3['loserUsername']||'',document['getElementById'](_0x49be8f(0x170))['value']=_0x2fabe3['loserScore']||0x0,document['getElementById'](_0x49be8f(0x1a2))[_0x49be8f(0x16d)]=_0x2fabe3[_0x49be8f(0x18c)]||0x0,document['getElementById']('edit-match-loser-comment')[_0x49be8f(0x16d)]=_0x2fabe3['loserComment']||'',document[_0x49be8f(0x143)]('edit-match-map')['value']=_0x2fabe3['mapPlayed']||'',document[_0x49be8f(0x143)](_0x49be8f(0xee))['value']=_0x2fabe3['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0x2fabe3['loserDemoLink']||_0x2fabe3['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x2fabe3['winnerUsername']+'\x20vs\x20'+_0x2fabe3['loserUsername'],_0x1c6472[_0x49be8f(0x1d8)]['add']('active');}catch(_0x302a9a){console['error']('Error\x20loading\x20match\x20data:',_0x302a9a),showNotification('Failed\x20to\x20load\x20match\x20data',_0x49be8f(0x18e));}}function closeEditMatchModal(){const _0x423c23=a4_0x48ba8e,_0x5be3fa=document['getElementById']('edit-match-modal');_0x5be3fa&&_0x5be3fa['classList']['remove'](_0x423c23(0x283));}async function saveEditedMatch(){const _0x2f467f=a4_0x48ba8e;try{const _0x327dca=document[_0x2f467f(0x143)]('edit-match-id')[_0x2f467f(0x16d)],_0x30fb24=document['getElementById'](_0x2f467f(0x150))['value'];if(!_0x327dca||!_0x30fb24){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x2725a0=_0x30fb24==='D1'?'approvedMatches':_0x30fb24==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1b4edb=document['getElementById']('edit-match-winner')['value']['trim'](),_0x63b63e=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x439d3b=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x5e97ae=document[_0x2f467f(0x143)](_0x2f467f(0x107))['value']['trim'](),_0x2f4379=document['getElementById']('edit-match-loser')['value']['trim'](),_0x5391ec=parseInt(document[_0x2f467f(0x143)]('edit-match-loser-score')['value']),_0x503cbb=parseInt(document['getElementById']('edit-match-loser-suicides')[_0x2f467f(0x16d)]),_0x5a48d9=document['getElementById'](_0x2f467f(0x1aa))['value']['trim'](),_0x3da2d1=document['getElementById']('edit-match-map')['value'][_0x2f467f(0x2ca)](),_0x44131d=document[_0x2f467f(0x143)]('edit-match-winner-demo')['value']['trim'](),_0xa24f0b=document['getElementById']('edit-match-loser-demo')['value'][_0x2f467f(0x2ca)]();if(!_0x1b4edb||!_0x2f4379){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x2725a0,_0x327dca),{'winnerUsername':_0x1b4edb,'winnerScore':_0x63b63e,'winnerSuicides':_0x439d3b,'winnerComment':_0x5e97ae,'loserUsername':_0x2f4379,'loserScore':_0x5391ec,'loserSuicides':_0x503cbb,'loserComment':_0x5a48d9,'mapPlayed':_0x3da2d1,'winnerDemoLink':_0x44131d||null,'loserDemoLink':_0xa24f0b||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x2f467f(0x280)][_0x2f467f(0x1e7)],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x30fb24['toLowerCase']()]['page']);}catch(_0x3b1441){console['error'](_0x2f467f(0x2b8),_0x3b1441),showNotification(_0x2f467f(0x19f)+_0x3b1441['message'],_0x2f467f(0x18e));}}async function openDeleteMatchModal(_0x3b9ee3,_0x5c41a6){const _0x3f5704=a4_0x48ba8e;try{const _0x426b57=_0x5c41a6==='D1'?'approvedMatches':_0x5c41a6==='D2'?_0x3f5704(0x187):'approvedMatchesD3',_0x74b80b=doc(db,_0x426b57,_0x3b9ee3),_0xd0e3cc=await getDoc(_0x74b80b);if(!_0xd0e3cc[_0x3f5704(0x100)]()){showNotification(_0x3f5704(0x22f),'error');return;}const _0x59c085=_0xd0e3cc['data'](),_0x53592b=document['getElementById'](_0x3f5704(0x2c0));_0x53592b['dataset'][_0x3f5704(0x14f)]=_0x3b9ee3,_0x53592b['dataset'][_0x3f5704(0x27c)]=_0x5c41a6;const _0x36dcaf=_0x59c085[_0x3f5704(0x2db)]?new Date(_0x59c085[_0x3f5704(0x2db)][_0x3f5704(0x183)]*0x3e8)['toLocaleDateString']():'N/A',_0x25a494=document[_0x3f5704(0x143)]('delete-match-summary');_0x25a494[_0x3f5704(0x177)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x36dcaf+_0x3f5704(0x2f2)+_0x59c085[_0x3f5704(0x2a9)]+_0x3f5704(0x1d9)+_0x59c085['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x59c085['winnerScore']||0x0)+'\x20-\x20'+(_0x59c085[_0x3f5704(0x1eb)]||0x0)+_0x3f5704(0x1a6)+(_0x59c085['mapPlayed']||_0x3f5704(0x26e))+_0x3f5704(0x12a)+_0x5c41a6+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x53592b['classList'][_0x3f5704(0xd3)]('active');}catch(_0x211a50){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x211a50),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x276aee=a4_0x48ba8e,_0x2d70d5=document['getElementById'](_0x276aee(0x2c0));_0x2d70d5&&(_0x2d70d5['classList'][_0x276aee(0x1fb)]('active'),_0x2d70d5[_0x276aee(0x210)](_0x276aee(0x2d5)),_0x2d70d5['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x4261ca=a4_0x48ba8e,_0x568db3=document['getElementById'](_0x4261ca(0x2c0)),_0x6d763a=_0x568db3['dataset']['matchId'],_0x2ff94b=_0x568db3['dataset']['ladder'];if(!_0x6d763a||!_0x2ff94b){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x300dd5=_0x2ff94b==='D1'?'approvedMatches':_0x2ff94b==='D2'?_0x4261ca(0x187):'approvedMatchesD3';await deleteDoc(doc(db,_0x300dd5,_0x6d763a)),showNotification(_0x4261ca(0x1a3),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x2ff94b['toLowerCase']()]['page']);}catch(_0x43f13b){console['error'](_0x4261ca(0xe2),_0x43f13b),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x43f13b['message'],'error');}}async function saveHighlightChanges(){const _0x2644bc=a4_0x48ba8e,_0x16239c=document['getElementById']('edit-highlight-id')['value'],_0x469a83=document[_0x2644bc(0x143)]('edit-highlight-type-select')['value'];let _0x284f77={'title':document['getElementById']('edit-highlight-title-input')['value'][_0x2644bc(0x2ca)](),'type':_0x469a83,'description':document['getElementById'](_0x2644bc(0x25c))[_0x2644bc(0x16d)]['trim'](),'videoId':document['getElementById'](_0x2644bc(0x2b9))['value'][_0x2644bc(0x2ca)](),'submittedBy':auth['currentUser']['email']};if(_0x469a83==='match'){_0x284f77['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')['value'][_0x2644bc(0x2ca)](),_0x284f77['map']=document['getElementById']('edit-highlight-map-input')['value'][_0x2644bc(0x2ca)]();const _0x4d62ef=document[_0x2644bc(0x143)](_0x2644bc(0x2a3))['value'];_0x284f77['matchDate']=_0x4d62ef?Timestamp[_0x2644bc(0x1be)](new Date(_0x4d62ef)):null,_0x284f77['winnerName']=document[_0x2644bc(0x143)](_0x2644bc(0x1d1))['value']['trim'](),_0x284f77[_0x2644bc(0x12c)]=document['getElementById'](_0x2644bc(0x1d5))[_0x2644bc(0x16d)]['trim'](),_0x284f77['loserName']=document[_0x2644bc(0x143)]('edit-highlight-loserName-input')['value']['trim'](),_0x284f77[_0x2644bc(0x1eb)]=document['getElementById']('edit-highlight-loserScore-input')['value'][_0x2644bc(0x2ca)](),_0x284f77['matchLink']=document[_0x2644bc(0x143)](_0x2644bc(0x184))['value']['trim'](),_0x284f77['mapCreator']=null,_0x284f77['mapVersion']=null,_0x284f77['creatorImageUrl']=null,_0x284f77['achievementPlayer']=null,_0x284f77[_0x2644bc(0x240)]=null,_0x284f77['achievementDetails']=null,_0x284f77[_0x2644bc(0x12e)]=null;}else{if(_0x469a83==='creator')_0x284f77['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x284f77['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x284f77['mapVersion']=document['getElementById'](_0x2644bc(0x23f))['value']['trim'](),_0x284f77[_0x2644bc(0x2af)]=document[_0x2644bc(0x143)]('edit-highlight-creatorImageUrl-input')['value'][_0x2644bc(0x2ca)](),_0x284f77[_0x2644bc(0x180)]=null,_0x284f77['matchDate']=null,_0x284f77['winnerName']=null,_0x284f77['winnerScore']=null,_0x284f77[_0x2644bc(0x105)]=null,_0x284f77['loserScore']=null,_0x284f77['matchLink']=null,_0x284f77['achievementPlayer']=null,_0x284f77[_0x2644bc(0x240)]=null,_0x284f77['achievementDetails']=null,_0x284f77['playerProfileUrl']=null;else _0x469a83==='achievement'&&(_0x284f77[_0x2644bc(0xeb)]=document['getElementById']('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x284f77['achievementType']=document['getElementById']('edit-highlight-achievementType-input')[_0x2644bc(0x16d)]['trim'](),_0x284f77[_0x2644bc(0x1f9)]=document[_0x2644bc(0x143)]('edit-highlight-achievementDetails-input')[_0x2644bc(0x16d)]['trim'](),_0x284f77['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x284f77['matchInfo']=null,_0x284f77['map']=null,_0x284f77['matchDate']=null,_0x284f77['winnerName']=null,_0x284f77[_0x2644bc(0x12c)]=null,_0x284f77['loserName']=null,_0x284f77['loserScore']=null,_0x284f77['matchLink']=null,_0x284f77['mapCreator']=null,_0x284f77[_0x2644bc(0x1e1)]=null,_0x284f77['creatorImageUrl']=null);}try{if(_0x16239c){_0x284f77[_0x2644bc(0x1f8)]=serverTimestamp();const _0x211ef2=doc(db,'highlights',_0x16239c);await updateDoc(_0x211ef2,_0x284f77),showNotification(_0x2644bc(0x26b),_0x2644bc(0x2c5));}else _0x284f77['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x284f77),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x29f83d){console['error']('Error\x20saving\x20highlight:',_0x29f83d),showNotification(_0x2644bc(0x2e6)+_0x29f83d['message'],_0x2644bc(0x18e));}}async function resimulateMatch(){const _0x2735e4=a4_0x48ba8e;try{const _0x110187=document[_0x2735e4(0x143)](_0x2735e4(0x2a0))['value'];if(!_0x110187){showNotification('Match\x20ID\x20is\x20required',_0x2735e4(0x18e));return;}const _0x5db057=auth['currentUser'];if(!_0x5db057){showNotification(_0x2735e4(0x2cb),'error');return;}const _0x1423dd=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x2735e4(0x2b7),_0x5c4c0e=doc(db,_0x1423dd,_0x110187),_0x57068f=await getDoc(_0x5c4c0e);if(!_0x57068f['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x2735e4(0x18e));return;}const _0x36fb7b=_0x57068f['data'](),_0x1f82ce=_0x36fb7b[_0x2735e4(0x2db)]?_0x36fb7b['approvedAt'][_0x2735e4(0x123)]()['toLocaleString']():_0x36fb7b['matchDate']?_0x36fb7b[_0x2735e4(0x2b4)][_0x2735e4(0x123)]?_0x36fb7b[_0x2735e4(0x2b4)][_0x2735e4(0x123)]()['toLocaleString']():new Date(_0x36fb7b[_0x2735e4(0x2b4)])['toLocaleString']():'Unknown',_0x2d903d='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x36fb7b['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x36fb7b['loserUsername']+_0x2735e4(0x243)+_0x36fb7b['winnerScore']+'-'+_0x36fb7b[_0x2735e4(0x1eb)]+_0x2735e4(0x19a)+(_0x36fb7b[_0x2735e4(0x135)]||_0x36fb7b['mapName']||_0x2735e4(0xda))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x1f82ce+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x110187+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')['innerHTML']=_0x2d903d,document[_0x2735e4(0x143)](_0x2735e4(0x17f))['style']['display']=_0x2735e4(0x1db),document['getElementById']('confirm-resimulate-btn')[_0x2735e4(0x253)]['display']='block',window[_0x2735e4(0x1f3)]={'matchId':_0x110187,'matchData':_0x36fb7b,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x44d4ca){console[_0x2735e4(0x18e)]('Error\x20finding\x20match:',_0x44d4ca),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x44d4ca['message'],'error');}}async function confirmResimulateMatch(){const _0x562456=a4_0x48ba8e;try{const {matchId:_0x3c5a72,matchData:_0x3c533d,ladder:_0x5db6c3}=window['pendingResimulateData'];if(!_0x3c5a72||!_0x3c533d){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0x562456(0x18e));return;}const _0x187064=_0x5db6c3==='D1'?_0x562456(0x270):_0x5db6c3==='D2'?'playersD2':'playersD3',_0x48bb2c=_0x5db6c3==='D1'?'eloHistory':_0x5db6c3==='D2'?'eloHistoryD2':_0x562456(0x2c9),[_0xd404fd,_0x1ac95f]=await Promise['all']([getDocs(query(collection(db,_0x187064),where('username','==',_0x3c533d['winnerUsername']))),getDocs(query(collection(db,_0x187064),where('username','==',_0x3c533d['loserUsername'])))]);if(_0xd404fd[_0x562456(0x248)]||_0x1ac95f[_0x562456(0x248)]){showNotification(_0x562456(0xb8),'error');return;}const _0x20180b=_0xd404fd['docs'][0x0]['id'],_0xc866a9=_0x1ac95f['docs'][0x0]['id'],_0x29289c=_0xd404fd[_0x562456(0x15a)][0x0]['data'](),_0x551c40=_0x1ac95f['docs'][0x0][_0x562456(0x26d)](),[_0x1aae98,_0x10d589]=await Promise['all']([getDocs(query(collection(db,_0x48bb2c),where('playerId','==',_0x20180b),where('matchId','==',_0x3c5a72))),getDocs(query(collection(db,_0x48bb2c),where('playerId','==',_0xc866a9),where(_0x562456(0x14f),'==',_0x3c5a72)))]),_0x1bb2a6=!_0x1aae98['empty'],_0x1835bc=!_0x10d589['empty'],_0x141506=_0x562456(0x17a)+(_0x1bb2a6?_0x562456(0x1c8):'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x1835bc?'\x20Exists':'\x20Missing')+_0x562456(0x16e)+(_0x29289c['eloRating']||'Unknown')+_0x562456(0x161)+(_0x551c40['eloRating']||_0x562456(0xda))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x29289c['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x551c40['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x562456(0x1c6))['innerHTML']=_0x141506,document[_0x562456(0x143)](_0x562456(0x1c6))[_0x562456(0x253)][_0x562456(0x2be)]='block';if(_0x1bb2a6&&_0x1835bc){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.',_0x562456(0x293));return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x45ac44=_0x3c533d['approvedAt']||_0x3c533d['matchDate']||serverTimestamp(),[_0x108680,_0x511990]=await Promise['all']([getPlayerEloAtTime(_0x20180b,_0x45ac44,_0x48bb2c),getPlayerEloAtTime(_0xc866a9,_0x45ac44,_0x48bb2c)]),{calculateElo:_0x3fec8f}=await import(_0x562456(0x216)),{newWinnerRating:_0x86bc40,newLoserRating:_0x2d4d4d}=_0x3fec8f(_0x108680,_0x511990),_0x2d0e09=_0x29289c['position']||Number['MAX_SAFE_INTEGER'],_0x4f9362=_0x551c40[_0x562456(0xc8)]||Number['MAX_SAFE_INTEGER'];let _0x351eed=_0x2d0e09,_0x33d288=_0x4f9362;_0x2d0e09>_0x4f9362&&(_0x351eed=_0x4f9362,_0x33d288=_0x4f9362+0x1);const _0x44abb6=writeBatch(db),_0x564f40=doc(db,_0x187064,_0x20180b);_0x44abb6['update'](_0x564f40,{'eloRating':_0x86bc40,'position':_0x351eed,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x562456(0x280)]['uid']});const _0x2ccfc7=doc(db,_0x187064,_0xc866a9);_0x44abb6[_0x562456(0x2d2)](_0x2ccfc7,{'eloRating':_0x2d4d4d,'position':_0x33d288,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x562456(0x280)]['uid']});if(_0x2d0e09>_0x4f9362){const _0xa2807=await getDocs(query(collection(db,_0x187064),where('position','>',_0x4f9362),where(_0x562456(0xc8),'<',_0x2d0e09)));_0xa2807['forEach'](_0x1b72ed=>{const _0x174ccf=doc(db,_0x187064,_0x1b72ed['id']),_0x4710c0=_0x1b72ed['data']()['position'];_0x44abb6['update'](_0x174ccf,{'position':_0x4710c0+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x1bb2a6){const _0x25b5f1=doc(collection(db,_0x48bb2c));_0x44abb6['set'](_0x25b5f1,{'playerId':_0x20180b,'player':_0x3c533d['winnerUsername'],'previousElo':_0x108680,'newElo':_0x86bc40,'eloChange':_0x86bc40-_0x108680,'opponentId':_0xc866a9,'opponent':_0x3c533d[_0x562456(0x1fe)],'matchResult':'win','previousPosition':_0x2d0e09,'newPosition':_0x351eed,'positionChange':_0x351eed-_0x2d0e09,'matchId':_0x3c5a72,'timestamp':_0x45ac44,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x562456(0x11f)],'gameMode':_0x5db6c3,'matchScore':_0x3c533d[_0x562456(0x12c)]+'-'+_0x3c533d[_0x562456(0x1eb)],'mapPlayed':_0x3c533d[_0x562456(0x135)]||_0x3c533d['mapName']||_0x562456(0xda),'note':_0x562456(0x17b)});}if(!_0x1835bc){const _0x1fd55b=doc(collection(db,_0x48bb2c));_0x44abb6[_0x562456(0x222)](_0x1fd55b,{'playerId':_0xc866a9,'player':_0x3c533d['loserUsername'],'previousElo':_0x511990,'newElo':_0x2d4d4d,'eloChange':_0x2d4d4d-_0x511990,'opponentId':_0x20180b,'opponent':_0x3c533d['winnerUsername'],'matchResult':'loss','previousPosition':_0x4f9362,'newPosition':_0x33d288,'positionChange':_0x33d288-_0x4f9362,'matchId':_0x3c5a72,'timestamp':_0x45ac44,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x562456(0x11f)],'gameMode':_0x5db6c3,'matchScore':_0x3c533d[_0x562456(0x12c)]+'-'+_0x3c533d['loserScore'],'mapPlayed':_0x3c533d['mapPlayed']||_0x3c533d['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x414e84=_0x5db6c3==='D1'?_0x562456(0x2ec):_0x5db6c3==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x46ae39=doc(db,_0x414e84,_0x3c5a72);_0x44abb6['update'](_0x46ae39,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x29289c['eloRating'],'originalLoserElo':_0x551c40['eloRating'],'originalWinnerPosition':_0x2d0e09,'originalLoserPosition':_0x4f9362,'resimulatedWinnerElo':_0x86bc40,'resimulatedLoserElo':_0x2d4d4d,'resimulatedWinnerPosition':_0x351eed,'resimulatedLoserPosition':_0x33d288}),await _0x44abb6[_0x562456(0x20e)]();const _0x120a67=(!_0x1bb2a6?0x1:0x0)+(!_0x1835bc?0x1:0x0),_0xa6f095=_0x2d0e09!==_0x351eed||_0x4f9362!==_0x33d288;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x120a67+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x108680+''+_0x86bc40+'\x20(+'+(_0x86bc40-_0x108680)+'),\x20')+('Loser\x20'+_0x511990+''+_0x2d4d4d+'\x20('+(_0x2d4d4d-_0x511990)+_0x562456(0x182))+(''+(_0xa6f095?'Positions\x20updated:\x20Winner\x20'+_0x2d0e09+''+_0x351eed+_0x562456(0x228)+_0x4f9362+''+_0x33d288:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector'](_0x562456(0x2ed))&&loadPlayersData();}catch(_0x49f2e0){console['error']('Error\x20resimulating\x20match:',_0x49f2e0),showNotification(_0x562456(0x1dc)+_0x49f2e0['message'],_0x562456(0x18e));}}async function getPlayerEloAtTime(_0x2cbbac,_0x59b4bc,_0x4110cc){const _0x365dbf=a4_0x48ba8e;try{const _0x50ecb7=_0x59b4bc[_0x365dbf(0x123)]?_0x59b4bc[_0x365dbf(0x123)]():new Date(_0x59b4bc),_0x326a24=query(collection(db,_0x4110cc),where('playerId','==',_0x2cbbac),where('timestamp','<',_0x59b4bc),orderBy('timestamp','desc'),limit(0x1)),_0x16eb6a=await getDocs(_0x326a24);if(!_0x16eb6a[_0x365dbf(0x248)]){const _0x88e625=_0x16eb6a['docs'][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x2cbbac+'\x20before\x20match:\x20'+_0x88e625['newElo']),_0x88e625[_0x365dbf(0x178)];}else return console[_0x365dbf(0x116)]('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x2cbbac+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x18e247){return console['error'](_0x365dbf(0x1ec)+_0x2cbbac+':',_0x18e247),0x4b0;}}function openResimulateModal(){const _0x505006=a4_0x48ba8e;console['log'](_0x505006(0x176));const _0x909296=document['getElementById'](_0x505006(0x19d));console['log']('Modal\x20element\x20found:',_0x909296);if(!_0x909296){console['error']('Modal\x20element\x20not\x20found!');return;}_0x909296['style'][_0x505006(0x2be)]='block',_0x909296['style'][_0x505006(0x21c)]='visible',_0x909296['style']['opacity']='1',_0x909296['classList']['add']('active'),console['log'](_0x505006(0x1dd)),console['log'](_0x505006(0x15f),window[_0x505006(0x142)](_0x909296)['display']);const _0x1886f0=document['getElementById']('match-details-container'),_0x501c5f=document['getElementById'](_0x505006(0x1c6)),_0x4c287b=document['getElementById']('confirm-resimulate-btn'),_0x100e5e=document[_0x505006(0x143)]('resimulate-match-id');if(_0x1886f0)_0x1886f0['innerHTML']='';if(_0x501c5f)_0x501c5f['innerHTML']='';if(_0x4c287b)_0x4c287b['style']['display']=_0x505006(0xe4);if(_0x100e5e)_0x100e5e[_0x505006(0x16d)]='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x260968=a4_0x48ba8e;document[_0x260968(0x143)]('resimulate-modal')[_0x260968(0x253)]['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x8c5094=a4_0x48ba8e;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x8c5094(0xc0),'success');}catch(_0x3208a1){console['error']('Error\x20loading\x20points\x20data:',_0x3208a1),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x3208a1[_0x8c5094(0x1e9)],'error');}}function renderPointsOverview(_0x169411){const _0x401207=document['getElementById']('points-overview-table-body');if(!_0x401207)return;if(_0x169411['length']===0x0){_0x401207['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x401207['innerHTML']='',_0x169411['forEach'](_0x5e4d5f=>{const _0x320387=a4_0x3f31,_0x219194=document['createElement']('tr'),_0x314e8d=_0x5e4d5f['displayName']||_0x5e4d5f['username']||_0x320387(0x16a),_0x270e88=_0x5e4d5f[_0x320387(0x1e7)]||'No\x20email',_0x50b266=_0x5e4d5f['points']||0x0,_0x317d00=_0x5e4d5f['lastPointsModified']?new Date(_0x5e4d5f['lastPointsModified']['seconds']*0x3e8)[_0x320387(0x14e)]():'Never';_0x219194[_0x320387(0x177)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x314e8d+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x270e88+_0x320387(0x145)+(_0x50b266>0x3e8?'high-points':_0x50b266>0x1f4?_0x320387(0x238):'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x50b266['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x317d00+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x5e4d5f['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x5e4d5f['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x401207[_0x320387(0x140)](_0x219194);}),setupPointsActionButtons();}function a4_0x513f(){const _0x30937d=['No\x20player\x20selected','Matches\x20action\x20buttons\x20setup\x20complete','player-count','forEach','Could\x20not\x20find\x20player\x20documents','loading','trophy-id','matches-start-date','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20by\x20UID:','points-management-forms','trophyDefinitions','Points\x20data\x20loaded\x20successfully','textContent','edit-username','nonexistent','rankDistribution','toLocaleString','NonParticipant','highlight-achievement-details','position','points-sort-order','playerId','highlight-match-link','querySelectorAll','Load\x20trophies\x20data\x20clicked','Error\x20removing\x20role:','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','Quick\x20edit\x20form\x20not\x20found!','add','.empty-state',';\x20color:\x20','no-results','Unnamed\x20Trophy','input[name=\x22demote-ladder\x22]:checked','toString','Unknown','inactive-days-filter','Error\x20loading\x20trophy\x20data:','nonParticipants','elo','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','onerror','allUsersPoints','Error\x20deleting\x20match:','filter','none','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','input[name=\x22set-elo-ladder\x22]:checked','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','paste','ribbon-target-user','highlight-video-id','achievementPlayer','opacity','Sidebar\x20navigation\x20initialized\x20with\x20permissions','edit-match-winner-demo','5px','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','User\x20data\x20loaded:','Error\x20loading\x20trophies:','winnerName','Error\x20loading\x20user\x20points\x20history:','cancel-quick-edit','No\x20description','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','highlights','Processing\x20points\x20edit:','\x20ladder','change','playerRibbonsD2','className','href','Error\x20adding\x20ribbon:','exists','search-ribbon-user-btn','no-results-message','.edit-trophy-btn','Player\x20not\x20found','loserName','Achievement\x20highlight\x20button\x20clicked','edit-match-winner-comment','article-title','fa-info-circle','highlight-achievement-type','sendPromotionNotification','empty-state','history-type-filter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','highlight-title','\x20with\x20email\x20','assign-trophy-description','Silver','required','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','achievement','log','getAttribute','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','manage-points','d2-prev-page','Loaded\x20','users-table-body','#000000','bind','uid','Form\x20elements\x20are\x20missing','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','displayName','toDate','\x20users...','Please\x20enter\x20valid\x20username\x20and\x20ELO','-page-indicator','Updating\x20role\x20for\x20','edit-elo','pendingMatches','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','Error\x20updating\x20points:','winnerScore','matches-end-date','playerProfileUrl','highlight-video-preview','activity','\x20ladder,\x20page\x20','Friday','prototype','Error\x20loading\x20players:','mapPlayed','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','demote-modal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','source','positive-change','highlight-map-container','match-count','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','author','appendChild','article-modal-title','getComputedStyle','getElementById','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','size','article-id','div','assign-trophy-image','Submit\x20button\x20clicked\x20directly','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','src','toLocaleDateString','matchId','edit-match-ladder','map','test-match-date','destroy','edit-wins','Error\x20searching\x20users:','constructor','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','\x20from\x20','\x22\x20set','docs','timestamp','\x20already\x20exists\x20in\x20','title','assign-trophy-id','Modal\x20computed\x20styles:','Admin\x20Adjustment','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','.delete-trophy-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','match','Untitled\x20Trophy','awardedAt','No\x20users\x20needed\x20points\x20field\x20initialization','values','article-modal','Unknown\x20User','date','cells','value','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','history-start-date','edit-match-loser-score','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','sources','add-player-form','.error-state','demote-username','openResimulateModal\x20called!','innerHTML','newElo','assign-trophy-rarity','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','highlight-description','roleAssignedBy','search-result-item','match-details-container','matchInfo','d3-prev-page',').\x20','seconds','edit-highlight-matchLink-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','Trophy\x20ID\x20and\x20username\x20are\x20required','approvedMatchesD2','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ribbons','\x20points','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','loserSuicides','catch','error','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>','matches-next-page','quick-edit-user-id','.edit-match-btn','Error\x20loading\x20dashboard:','User\x20Profiles','all','.form-group','.edit-btn','role-username','split','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','matches-prev-page','d3-next-page','resimulate-modal','elo-history','Failed\x20to\x20save\x20match:\x20','Committing\x20batch\x20update\x20for\x20','cancel-role-btn','edit-match-loser-suicides','Match\x20deleted\x20successfully','highlight-player-profile','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','set-elo-form',',\x20giving\x20default\x20access','user-search','edit-match-loser-comment','Error\x20fetching\x20matches\x20for\x20','creator','Creating\x20test\x20match\x20without\x20player\x20validation...','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','reset','createElement','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','Successfully\x20demoted\x20','keys','warn','Found\x20player\x20with\x20current\x20ELO:\x20','checked','disabled','set-role-modal','opponent','startDate','inactive-players-table-body','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','input[name=\x22test-match-ladder\x22]','fromDate','.close-btn','Bronze','cancel-highlight-btn','points-overview-search','Error\x20loading\x20highlights:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','Failed\x20to\x20delete\x20player:\x20','validation-results-container','No\x20reason\x20provided','\x20Exists','removeEventListener','edit-losses','Error\x20checking\x20','\x20Successfully\x20initialized\x20points\x20field\x20for\x20','trophy-description','Error\x20loading\x20articles:','currentTarget','includes','edit-highlight-winnerName-input','DOMContentLoaded','highlight-id','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','edit-highlight-winnerScore-input','#ffffff','highlight-modal-title','classList','\x20(winner)\x20vs\x20','eloHistory','block','Failed\x20to\x20resimulate\x20match:\x20','Modal\x20should\x20now\x20be\x20visible','setDate','admin','assign-trophy-form','mapVersion','Attaching\x20cancel\x20button\x20listener.','trophy-image-preview','Quick\x20edit\x20clicked\x20for\x20user:','Player\x20\x22','highlights-table-body','email','createdAt','message','Trophy\x20\x22','loserScore','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','Trophy\x20not\x20found','replace','load-users-data','load-articles-data','highlight-winner-name','Error\x20searching\x20user:','pendingResimulateData','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','desc','DB:','article-form','updatedAt','achievementDetails','rarity','remove','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Create\x20New\x20','loserUsername','Emerald','Trophy\x20definition\x20deleted\x20successfully','rgba(25,\x20118,\x20210,\x200.7)','cloneNode','playersD2','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','\x20not\x20found\x20in\x20any\x20ladder','input[name=\x22quick-action\x22]:checked','querySelector','\x20to\x20','{}.constructor(\x22return\x20this\x22)(\x20)','winnerComment','Attaching\x20background\x20click\x20listener.','flex','load-dashboard-data','commit','inactive-players','removeAttribute','submit','dashboard','videoId','quick-edit-points-modal','toLowerCase','./ladderalgorithm.js','preventDefault','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','get','Role\x20select\x20set\x20to:\x20','manage-trophies','visibility','getRankName','promotion','eloHistoryD2','rank-distribution-chart','articles-table-body','set','assign-trophy-name','Featured\x20Creator','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','System','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20',',\x20Loser\x20','No\x20email','newPoints','ref','Error\x20updating\x20player:','Error\x20searching\x20for\x20user','.delete-match-btn','Match\x20not\x20found','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','common','Setting\x20up\x20Manage\x20Matches\x20section','click','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','Page\x201','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','medium-points','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','#elo-history-table-body\x20tr','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','Found\x20','#C0C0C0','Unranked','edit-highlight-mapVersion-input','achievementType','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','Untitled','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','user-ribbon-management','createdBy','page','Error\x20modifying\x20points:','empty','highlight-map','Error\x20saving\x20highlight:','Error\x20deleting\x20highlight:','\x20points\x20history\x20entries','amount','highlight-creator-image-container','daysSinceMatch','MAX_SAFE_INTEGER','endDate','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','style','resimulate-match-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','highlight-description-container','matches-search','manage-levels-ribbons','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','Test\x20match','edit-highlight-description-input','highlight-winner-score','points','roleColor','input','trace','userProfiles','Error\x20deleting\x20highlight:\x20','#FFD700','\x20for\x20points\x20initialization','D2\x20Players','Failed\x20to\x20save\x20article:\x20','.edit-highlight-btn','previousElo','unknown','Highlight\x20updated\x20successfully!','highlight-submitted-by','data','N/A','hidden','players','stopPropagation','promote-username','input[name=\x22promote-ladder\x22]:checked','\x20Rank\x20Distribution','Error\x20initializing\x20admin\x20dashboard:','dataset','.sidebar-nav\x20.nav-item','load-inactive-players-data','lastVisible','Failed\x20to\x20load\x20article\x20data','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','ladder','highlight-match-info-container','Title\x20is\x20required','color','currentUser','Error\x20loading\x20matches:','getDate','active','highlight-video-container','Successfully\x20promoted\x20','Username\x20input\x20set\x20to:\x20','highlight-achievement-image','Achievement','entries','You\x20must\x20be\x20logged\x20in','Player\x20not\x20found\x20in\x20','then','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','lastMatch','#CD7F32','error-state','\x20in\x20all\x20collections...','match-type','warning','pendingMatchesD2','sort','Error\x20loading\x20history:','Page\x20','.sidebar-nav\x20.nav-item[data-section=\x22','addEventListener','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','Create\x20test\x20match\x20button\x20setup\x20complete','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','promote-form','backgroundColor','Create\x20New\x20Trophy','resimulate-match-id','Trophy\x20updated\x20successfully','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','edit-highlight-matchDate-input','name','data-ladder','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Using\x20collections\x20for\x20','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','winnerUsername','\x20view\x20history\x20buttons','role','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','creatorImageUrl','Please\x20enter\x20a\x20username','lastUpdated','Error\x20loading\x20points\x20overview:','highlight-loser-name','matchDate','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','Error\x20loading\x20article\x20data:','approvedMatchesD3','Error\x20saving\x20match:','edit-highlight-videoId-input','Role\x20\x27','store-item-select','Failed\x20to\x20send\x20Discord\x20notification:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','display','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','delete-match-confirm-modal','reduce','test','Create\x20test\x20match\x20form\x20not\x20found','d2-next-page','success','\x22\x20awarded\x20to\x20','match_result','Setting\x20permissions\x20based\x20on\x20role:\x20','eloHistoryD3','trim','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Modal\x20opened\x20successfully','</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22','#e0e0e0','Error\x20creating\x20rank\x20distribution\x20chart:','Error:\x20','update','previousElementSibling','<div\x20class=\x22loading\x22>Searching...</div>','data-match-id','article-author','info','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','manage-matches','roleName','approvedAt','manage-ranks','Never\x20played','User\x20not\x20found','\x20in\x20','Create\x20test\x20match\x20modal\x20not\x20found','ribbon-user-search','player','Error\x20deleting\x20player:','length','manage-players','Error\x20saving\x20highlight:\x20','user-roles-section','Points\x20modified\x20successfully','image','Error\x20loading\x20users:','rgba(255,\x20255,\x20255,\x200.1)','approvedMatches','#players.content-section.active','username','selected-user-id','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','promote-modal','Error\x20in\x20promotion:','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles'];a4_0x513f=function(){return _0x30937d;};return a4_0x513f();}function setupPointsActionButtons(){const _0x5d9ac8=a4_0x48ba8e;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x3e8467=document['querySelectorAll']('.quick-edit-btn');console['log'](_0x5d9ac8(0x23c)+_0x3e8467['length']+'\x20quick\x20edit\x20buttons'),_0x3e8467['forEach'](_0x15f701=>{const _0x3dff78=_0x15f701['cloneNode'](!![]);_0x15f701['parentNode']['replaceChild'](_0x3dff78,_0x15f701);});const _0x440405=document['querySelectorAll']('.view-history-btn');console[_0x5d9ac8(0x116)]('Found\x20'+_0x440405['length']+_0x5d9ac8(0x2aa)),_0x440405[_0x5d9ac8(0xb7)](_0x2f4adb=>{const _0x1df477=_0x5d9ac8,_0x21b336=_0x2f4adb[_0x1df477(0x202)](!![]);_0x2f4adb['parentNode']['replaceChild'](_0x21b336,_0x2f4adb);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x4ae8fe=>{_0x4ae8fe['addEventListener']('click',function(_0x3af3aa){const _0x4da43a=a4_0x3f31;_0x3af3aa[_0x4da43a(0x217)](),_0x3af3aa['stopPropagation']();const _0x1de12b=this['dataset']['userId'];console[_0x4da43a(0x116)](_0x4da43a(0x1e4),_0x1de12b);if(!_0x1de12b){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{const _0x16f1a3=_0x4da43a;this[_0x16f1a3(0x253)][_0x16f1a3(0xec)]='1';},0xc8),openQuickEditModal(_0x1de12b);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x57dece=>{const _0x4caf4f=_0x5d9ac8;_0x57dece[_0x4caf4f(0x299)]('click',function(_0x4ed0be){const _0x2d2478=_0x4caf4f;_0x4ed0be[_0x2d2478(0x217)](),_0x4ed0be['stopPropagation']();const _0x12e56e=this['dataset']['userId'];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x12e56e);if(!_0x12e56e){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{const _0x41ca7d=_0x2d2478;this[_0x41ca7d(0x253)]['opacity']='1';},0xc8),loadUserPointsHistory(_0x12e56e);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x1cf276){const _0x4442e3=a4_0x48ba8e;console[_0x4442e3(0x116)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x1cf276);const _0x174a91=document['getElementById']('quick-edit-points-modal');if(!_0x174a91){console[_0x4442e3(0x18e)]('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...',_0x4442e3(0x2d7));const _0xedcefd=doc(db,'userProfiles',_0x1cf276),_0x4bb372=await getDoc(_0xedcefd);if(!_0x4bb372['exists']()){showNotification('User\x20not\x20found','error');return;}const _0x4786c0=_0x4bb372['data']();console['log'](_0x4442e3(0xf1),_0x4786c0);const _0x558cd4=document[_0x4442e3(0x143)](_0x4442e3(0x191)),_0x1aa54d=document['getElementById']('quick-edit-display-name'),_0x271302=document['getElementById']('quick-edit-email'),_0x278252=document[_0x4442e3(0x143)]('quick-edit-current-points'),_0x22a046=document['getElementById']('quick-edit-points-form');if(!_0x558cd4||!_0x1aa54d||!_0x271302||!_0x278252||!_0x22a046){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x4442e3(0x1f4),'error');return;}_0x558cd4[_0x4442e3(0x16d)]=_0x1cf276,_0x1aa54d['textContent']=_0x4786c0[_0x4442e3(0x122)]||_0x4786c0['username']||_0x4442e3(0x16a),_0x271302[_0x4442e3(0xc1)]=_0x4786c0['email']||'No\x20email',_0x278252['textContent']=(_0x4786c0[_0x4442e3(0x25e)]||0x0)['toLocaleString'](),_0x22a046['reset']();const _0x5700aa=document[_0x4442e3(0x143)]('quick-add');_0x5700aa&&(_0x5700aa['checked']=!![]);_0x174a91[_0x4442e3(0x1d8)]['add']('active'),console['log'](_0x4442e3(0x2cd));const _0x42b44a=document[_0x4442e3(0x143)]('quick-points-amount');_0x42b44a&&setTimeout(()=>_0x42b44a['focus'](),0x64);}catch(_0xa3985){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0xa3985),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0xa3985[_0x4442e3(0x1e9)],'error');}}function closeQuickEditModal(){const _0xd59bc0=document['getElementById']('quick-edit-points-modal');_0xd59bc0&&_0xd59bc0['classList']['remove']('active');}async function handleQuickEditPoints(_0xa2bc66){const _0x21a295=a4_0x48ba8e;_0xa2bc66[_0x21a295(0x217)]();const _0x41aa42=document['getElementById'](_0x21a295(0x191))['value'],_0x37be99=document[_0x21a295(0x207)](_0x21a295(0x206))['value'],_0x5f0210=parseInt(document[_0x21a295(0x143)]('quick-points-amount')['value']),_0x3a8db6=document[_0x21a295(0x143)]('quick-points-reason')['value']['trim']();console['log'](_0x21a295(0xf9),{'userId':_0x41aa42,'action':_0x37be99,'amount':_0x5f0210,'reason':_0x3a8db6});if(!_0x41aa42||!_0x5f0210||_0x5f0210<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x41aa42,_0x37be99,_0x5f0210,_0x3a8db6),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x41aa42);}catch(_0xcd7238){console['error'](_0x21a295(0x12b),_0xcd7238),showNotification('Failed\x20to\x20update\x20points:\x20'+_0xcd7238['message'],'error');}}async function searchUsersForPoints(){const _0x4e28d1=a4_0x48ba8e,_0x1f846a=document['getElementById']('points-user-search')['value'][_0x4e28d1(0x2ca)]()[_0x4e28d1(0x215)](),_0x8ebb46=document['getElementById']('user-search-results');if(!_0x1f846a||_0x1f846a[_0x4e28d1(0x2e4)]<0x2){_0x8ebb46['innerHTML']='';return;}_0x8ebb46[_0x4e28d1(0x177)]=_0x4e28d1(0x2d4);try{const _0x4fcc79=collection(db,'userProfiles'),_0x74f3fa=await getDocs(_0x4fcc79),_0x56e7e6=[];_0x74f3fa['forEach'](_0x244561=>{const _0xb493f0=_0x4e28d1,_0x26a64f=_0x244561['data'](),_0x4a7e4e=(_0x26a64f['displayName']||_0x26a64f[_0xb493f0(0x2ee)]||'')['toLowerCase'](),_0x65c72=(_0x26a64f[_0xb493f0(0x1e7)]||'')['toLowerCase']();(_0x4a7e4e['includes'](_0x1f846a)||_0x65c72['includes'](_0x1f846a))&&_0x56e7e6[_0xb493f0(0x2f0)]({'id':_0x244561['id'],..._0x26a64f});});if(_0x56e7e6['length']===0x0){_0x8ebb46['innerHTML']=_0x4e28d1(0x237);return;}_0x8ebb46['innerHTML']='',_0x56e7e6['forEach'](_0x18094a=>{const _0xc95147=_0x4e28d1,_0x31430e=document['createElement']('div');_0x31430e['className']=_0xc95147(0x17e),_0x31430e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x18094a[_0xc95147(0x122)]||_0x18094a['username']||_0xc95147(0xda))+_0xc95147(0x236)+(_0x18094a[_0xc95147(0x1e7)]||_0xc95147(0x229))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x18094a['points']||0x0)[_0xc95147(0xc5)]()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x31430e['addEventListener']('click',()=>selectUserForPoints(_0x18094a)),_0x8ebb46[_0xc95147(0x140)](_0x31430e);});}catch(_0x157854){console['error'](_0x4e28d1(0x155),_0x157854),_0x8ebb46[_0x4e28d1(0x177)]='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x4b90ab){const _0x428d75=a4_0x48ba8e;document[_0x428d75(0x143)]('selected-user-name')['textContent']=_0x4b90ab[_0x428d75(0x122)]||_0x4b90ab['username']||'Unknown\x20User',document['getElementById']('selected-user-points')['textContent']=(_0x4b90ab['points']||0x0)[_0x428d75(0xc5)](),document[_0x428d75(0x143)]('selected-user-id')['value']=_0x4b90ab['id'],document['getElementById']('selected-user-info')[_0x428d75(0x253)]['display']='block',document[_0x428d75(0x143)](_0x428d75(0xbe))['style']['display']='block',document[_0x428d75(0x143)]('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x10781f){const _0x30f20a=a4_0x48ba8e;_0x10781f['preventDefault']();const _0x4b728b=document['getElementById'](_0x30f20a(0x2ef))['value'],_0x4bfe9c=document[_0x30f20a(0x143)]('points-action')[_0x30f20a(0x16d)],_0x5927d7=parseInt(document[_0x30f20a(0x143)]('points-amount')['value']),_0x5000f3=document['getElementById']('points-reason')['value']['trim']();if(!_0x4b728b||!_0x5927d7||_0x5927d7<0x0){showNotification(_0x30f20a(0x144),'error');return;}try{await modifyUserPoints(_0x4b728b,_0x4bfe9c,_0x5927d7,_0x5000f3),document['getElementById']('modify-points-form')[_0x30f20a(0x1af)]();const _0x36f39c=doc(db,'userProfiles',_0x4b728b),_0x430ff8=await getDoc(_0x36f39c);if(_0x430ff8[_0x30f20a(0x100)]()){const _0x5ef282=_0x430ff8[_0x30f20a(0x26d)]();document[_0x30f20a(0x143)]('selected-user-points')[_0x30f20a(0xc1)]=(_0x5ef282[_0x30f20a(0x25e)]||0x0)['toLocaleString']();}showNotification(_0x30f20a(0x2e8),_0x30f20a(0x2c5)),loadPointsHistory();}catch(_0xa53a93){console['error'](_0x30f20a(0x247),_0xa53a93),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0xa53a93['message'],'error');}}async function loadPointsHistory(){const _0x59672c=a4_0x48ba8e,_0x376dd0=document['getElementById']('points-history-table-body');if(!_0x376dd0)return;_0x376dd0[_0x59672c(0x177)]=_0x59672c(0x29a);try{const _0x4470dd=collection(db,'pointsHistory'),_0x4d8e0c=query(_0x4470dd,orderBy('timestamp','desc'),limit(0x32)),_0x18d870=await getDocs(_0x4d8e0c);if(_0x18d870[_0x59672c(0x248)]){_0x376dd0[_0x59672c(0x177)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x376dd0['innerHTML']='',_0x18d870['forEach'](_0x1a12d1=>{const _0x2ba543=_0x59672c,_0x56406c=_0x1a12d1['data'](),_0xa68d59=document['createElement']('tr'),_0x5f6834=_0x56406c['timestamp']?new Date(_0x56406c['timestamp'][_0x2ba543(0x183)]*0x3e8)['toLocaleString']():'Unknown';let _0x4f2026='';switch(_0x56406c['action']){case _0x2ba543(0xd3):_0x4f2026='Added\x20'+_0x56406c['amount']+'\x20points';break;case'subtract':_0x4f2026='Subtracted\x20'+_0x56406c['amount']+'\x20points';break;case'set':_0x4f2026='Set\x20to\x20'+_0x56406c[_0x2ba543(0x24d)]+_0x2ba543(0x18a);break;default:_0x4f2026=_0x56406c['action']+'\x20'+_0x56406c[_0x2ba543(0x24d)]+'\x20points';}_0xa68d59['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5f6834+_0x2ba543(0x2a6)+(_0x56406c[_0x2ba543(0x122)]||_0x2ba543(0x16a))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4f2026+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x56406c['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x56406c['previousPoints']||0x0)+'\x20\x20'+(_0x56406c[_0x2ba543(0x22a)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x56406c['reason']||_0x2ba543(0x1c7))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x56406c['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x376dd0['appendChild'](_0xa68d59);});}catch(_0x2288c1){console['error']('Error\x20loading\x20points\x20history:',_0x2288c1),_0x376dd0['innerHTML']=_0x59672c(0x225)+_0x2288c1['message']+'</td></tr>';}}function filterPointsOverview(){const _0x24eba0=a4_0x48ba8e,_0x417ad1=document['getElementById'](_0x24eba0(0x1c2))['value'][_0x24eba0(0x215)]();if(!window['allUsersPoints'])return;const _0x1af0c3=window['allUsersPoints']['filter'](_0x1c53ec=>{const _0x3d46e5=_0x24eba0,_0xd63627=(_0x1c53ec['displayName']||_0x1c53ec['username']||'')['toLowerCase'](),_0x97cd23=(_0x1c53ec['email']||'')['toLowerCase']();return _0xd63627[_0x3d46e5(0x1d0)](_0x417ad1)||_0x97cd23['includes'](_0x417ad1);});renderPointsOverview(_0x1af0c3);}function sortPointsOverview(){const _0x5dd5bf=a4_0x48ba8e,_0xed475b=document[_0x5dd5bf(0x143)]('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x3866c6=[...window[_0x5dd5bf(0xe1)]];switch(_0xed475b){case'points-desc':_0x3866c6['sort']((_0x24bb58,_0x374c3d)=>(_0x374c3d[_0x5dd5bf(0x25e)]||0x0)-(_0x24bb58[_0x5dd5bf(0x25e)]||0x0));break;case'points-asc':_0x3866c6['sort']((_0x489f14,_0x1b41b5)=>(_0x489f14[_0x5dd5bf(0x25e)]||0x0)-(_0x1b41b5['points']||0x0));break;case'name-asc':_0x3866c6['sort']((_0x38a791,_0x10440b)=>{const _0x3b074f=_0x5dd5bf,_0x3387ee=(_0x38a791[_0x3b074f(0x122)]||_0x38a791['username']||'')[_0x3b074f(0x215)](),_0x26bc5e=(_0x10440b['displayName']||_0x10440b['username']||'')['toLowerCase']();return _0x3387ee['localeCompare'](_0x26bc5e);});break;case'name-desc':_0x3866c6[_0x5dd5bf(0x295)]((_0x10a9e1,_0x51a067)=>{const _0x538fdb=_0x5dd5bf,_0x232891=(_0x10a9e1['displayName']||_0x10a9e1[_0x538fdb(0x2ee)]||'')[_0x538fdb(0x215)](),_0x3f9453=(_0x51a067[_0x538fdb(0x122)]||_0x51a067['username']||'')['toLowerCase']();return _0x3f9453['localeCompare'](_0x232891);});break;}renderPointsOverview(_0x3866c6);}async function handleAwardItem(_0x14ab33){const _0x5ec5f8=a4_0x48ba8e;_0x14ab33['preventDefault']();const _0x54fec7=document['getElementById']('selected-user-id')['value'],_0x499088=document['getElementById'](_0x5ec5f8(0x2bb))['value'],_0x45f0d1=document['getElementById']('award-reason')['value']['trim']();if(!_0x54fec7||!_0x499088){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x5ec5f8(0x18e));return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')['reset']();}catch(_0xccb1ce){console['error']('Error\x20awarding\x20item:',_0xccb1ce),showNotification('Failed\x20to\x20award\x20item:\x20'+_0xccb1ce['message'],_0x5ec5f8(0x18e));}}async function loadUserPointsHistory(_0x2b9ff2){const _0x38b84c=a4_0x48ba8e;try{const _0x1c4955=collection(db,'pointsHistory'),_0x4708ab=query(_0x1c4955,where('userId','==',_0x2b9ff2),orderBy('timestamp','desc')),_0x273a6a=await getDocs(_0x4708ab);console['log']('Found\x20'+_0x273a6a['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x2b9ff2),showNotification('User\x20has\x20'+_0x273a6a['size']+_0x38b84c(0x24c),_0x38b84c(0x2d7));}catch(_0x2077ea){console['error'](_0x38b84c(0xf4),_0x2077ea),showNotification('Failed\x20to\x20load\x20user\x20history',_0x38b84c(0x18e));}}async function initializeUserPointsField(){const _0x48724b=a4_0x48ba8e;try{console[_0x48724b(0x116)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0xf9eeea=collection(db,'userProfiles'),_0x1ed8e6=await getDocs(_0xf9eeea);if(_0x1ed8e6[_0x48724b(0x248)]){console[_0x48724b(0x116)]('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x32090a=0x0,_0x143cad=0x0;const _0x295aa0=writeBatch(db);let _0x5c05d5=0x0;return console['log']('Found\x20'+_0x1ed8e6[_0x48724b(0x146)]+'\x20users\x20to\x20check...'),_0x1ed8e6[_0x48724b(0xb7)](_0x1af11f=>{const _0x3cf9eb=_0x48724b,_0x124cd5=_0x1af11f[_0x3cf9eb(0x26d)]();_0x124cd5['points']===undefined||_0x124cd5['points']===null?(_0x295aa0['update'](_0x1af11f['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x32090a++,_0x5c05d5++,console['log']('Queued\x20'+(_0x124cd5[_0x3cf9eb(0x122)]||_0x124cd5['username']||_0x124cd5[_0x3cf9eb(0x1e7)]||'Unknown')+_0x3cf9eb(0x265))):(_0x143cad++,console[_0x3cf9eb(0x116)]((_0x124cd5['displayName']||_0x124cd5['username']||_0x124cd5['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x124cd5[_0x3cf9eb(0x25e)])),_0x5c05d5>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x32090a>0x0?(console['log'](_0x48724b(0x1a0)+_0x32090a+_0x48724b(0x124)),await _0x295aa0[_0x48724b(0x20e)](),console['log'](_0x48724b(0x1cc)+_0x32090a+'\x20users')):console['log'](_0x48724b(0x167)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x1ed8e6['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x32090a+_0x48724b(0x185)+_0x143cad),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x32090a+'\x20users.\x20'+_0x143cad+'\x20users\x20already\x20had\x20points.','success'),window[_0x48724b(0xe1)]&&loadPointsOverview(),{'totalUsers':_0x1ed8e6[_0x48724b(0x146)],'usersUpdated':_0x32090a,'usersAlreadyHadPoints':_0x143cad};}catch(_0x5456c9){console['error']('Error\x20initializing\x20points\x20field:',_0x5456c9),showNotification('Error\x20initializing\x20points:\x20'+_0x5456c9['message'],'error');throw _0x5456c9;}}function addPointsMigrationButton(){const _0x1fc468=a4_0x48ba8e,_0x5e7c47=document['getElementById']('manage-points');if(!_0x5e7c47)return;if(document[_0x1fc468(0x143)]('migrate-points-btn'))return;const _0x365f31=document['createElement'](_0x1fc468(0x148));_0x365f31['className']='migration-section',_0x365f31['style']['marginBottom']='20px',_0x365f31['style']['padding']='15px',_0x365f31['style'][_0x1fc468(0x29e)]='rgba(255,\x20193,\x207,\x200.1)',_0x365f31['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x365f31['style']['borderRadius']=_0x1fc468(0xef),_0x365f31['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x1975e0=_0x5e7c47['querySelector']('.section-header');_0x1975e0&&_0x1975e0['insertAdjacentElement']('afterend',_0x365f31),document['getElementById']('migrate-points-btn')[_0x1fc468(0x299)]('click',async function(){const _0x559ee1=_0x1fc468;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x559ee1(0x177)]=_0x559ee1(0xf7),this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x5ea559=_0x559ee1;_0x365f31[_0x5ea559(0x253)][_0x5ea559(0x2be)]='none';},0xbb8);}catch(_0xab4280){this[_0x559ee1(0x177)]=_0x559ee1(0x234),this[_0x559ee1(0x1b7)]=![];}}});}function setupManagePointsSection(){const _0x584e47=a4_0x48ba8e;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x49c0ef=document[_0x584e47(0x143)]('points-user-search');_0x49c0ef&&_0x49c0ef['addEventListener'](_0x584e47(0x260),debounce(searchUsersForPoints,0x12c));const _0x76717a=document['getElementById']('modify-points-form');_0x76717a&&_0x76717a['addEventListener'](_0x584e47(0x211),handleModifyPoints);const _0x4dc750=document[_0x584e47(0x143)]('award-item-form');_0x4dc750&&_0x4dc750[_0x584e47(0x299)]('submit',handleAwardItem);const _0x490486=document['getElementById']('points-overview-search');_0x490486&&_0x490486[_0x584e47(0x299)](_0x584e47(0x260),debounce(filterPointsOverview,0x12c));const _0x550439=document['getElementById'](_0x584e47(0xc9));_0x550439&&_0x550439['addEventListener']('change',sortPointsOverview);const _0x14605d=document['getElementById']('refresh-points-overview');_0x14605d&&_0x14605d['addEventListener']('click',loadPointsOverview);const _0x5f0ac2=document['getElementById'](_0x584e47(0x214));if(_0x5f0ac2){console[_0x584e47(0x116)](_0x584e47(0x14b));const _0x399f5c=_0x5f0ac2['querySelector']('.close-btn');_0x399f5c?_0x399f5c['addEventListener']('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x490423=document['getElementById'](_0x584e47(0xf5));_0x490423?_0x490423['addEventListener']('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x11e9c9=document[_0x584e47(0x143)]('quick-edit-points-form');_0x11e9c9?_0x11e9c9[_0x584e47(0x299)]('submit',function(_0x13a9c8){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x13a9c8);}):console['error'](_0x584e47(0xd2)),_0x5f0ac2[_0x584e47(0x299)]('click',function(_0x414e76){const _0x44651b=_0x584e47;_0x414e76['target']===_0x5f0ac2&&(console[_0x44651b(0x116)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x6569dc=a4_0x48ba8e;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x332621=document['getElementById']('ribbon-user-search');_0x332621&&_0x332621[_0x6569dc(0x299)]('input',debounce(searchRibbonUser,0x12c));const _0x1d3c6e=document['getElementById'](_0x6569dc(0x101));_0x1d3c6e&&_0x1d3c6e['addEventListener'](_0x6569dc(0x233),searchRibbonUser);const _0x11969d=document['getElementById']('add-ribbon-form');_0x11969d&&_0x11969d['addEventListener']('submit',addRibbon),_0x332621&&_0x332621['addEventListener']('keypress',function(_0x330408){_0x330408['key']==='Enter'&&(_0x330408['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x2e9928,_0x2c9c82,_0x91b383,_0x1524f4=''){const _0x2ab89d=a4_0x48ba8e,_0x2eb4dd=doc(db,_0x2ab89d(0x262),_0x2e9928),_0x42777f=await getDoc(_0x2eb4dd);if(!_0x42777f['exists']())throw new Error(_0x2ab89d(0x2de));const _0x1fa4ee=_0x42777f[_0x2ab89d(0x26d)](),_0x491494=_0x1fa4ee[_0x2ab89d(0x25e)]!==undefined?_0x1fa4ee['points']:0x0;_0x1fa4ee['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x1fa4ee['displayName']||_0x1fa4ee['email']||'Unknown')),await updateDoc(_0x2eb4dd,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x4b49f1=_0x491494;switch(_0x2c9c82){case _0x2ab89d(0xd3):_0x4b49f1=_0x491494+_0x91b383;break;case'subtract':_0x4b49f1=Math['max'](0x0,_0x491494-_0x91b383);break;case'set':_0x4b49f1=_0x91b383;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x2eb4dd,{'points':_0x4b49f1,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x2e9928,'userEmail':_0x1fa4ee['email']||_0x2ab89d(0x26a),'displayName':_0x1fa4ee['displayName']||_0x1fa4ee['username']||'Unknown\x20User','action':_0x2c9c82,'amount':_0x91b383,'previousPoints':_0x491494,'newPoints':_0x4b49f1,'reason':_0x1524f4,'adminEmail':auth['currentUser'][_0x2ab89d(0x1e7)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0xd55775=a4_0x48ba8e,_0x667a74=document[_0xd55775(0x143)]('points-overview-table-body');if(!_0x667a74)return;_0x667a74['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x2473f1=collection(db,'userProfiles'),_0x4712ec=await getDocs(_0x2473f1);if(_0x4712ec[_0xd55775(0x248)]){_0x667a74[_0xd55775(0x177)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x7b7ee7=[];let _0x4deca1=0x0;_0x4712ec['forEach'](_0x205980=>{const _0x208000=_0xd55775,_0x1c4f5d=_0x205980[_0x208000(0x26d)](),_0xd4e1df=_0x1c4f5d['points']!==undefined?_0x1c4f5d['points']:0x0;_0x1c4f5d['points']===undefined&&_0x4deca1++,_0x7b7ee7['push']({'id':_0x205980['id'],..._0x1c4f5d,'points':_0xd4e1df});}),_0x4deca1>0x0&&(console['log']('Found\x20'+_0x4deca1+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x4deca1+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x7b7ee7[_0xd55775(0x295)]((_0xd1a151,_0x5080fb)=>(_0x5080fb['points']||0x0)-(_0xd1a151['points']||0x0)),window['allUsersPoints']=_0x7b7ee7,renderPointsOverview(_0x7b7ee7);}catch(_0x40df94){console['error'](_0xd55775(0x2b2),_0x40df94),_0x667a74['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x40df94['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x236b61=a4_0x48ba8e,_0x18e3d9=document['getElementById']('ribbons-overview-table-body');if(!_0x18e3d9)return;_0x18e3d9[_0x236b61(0x177)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x273118,_0x5b81d8,_0x2827c4]=await Promise[_0x236b61(0x195)]([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x236b61(0xfc))),getDocs(collection(db,'playerRibbonsD3'))]);_0x18e3d9[_0x236b61(0x177)]='';const _0xd440bc=(_0x19afe0,_0x1f4863)=>{_0x19afe0['forEach'](_0x34ee4a=>{const _0x2f7b3c=a4_0x3f31,_0x4e90ad=_0x34ee4a['data'](),_0x46d3a1=_0x4e90ad['ribbons']||{},_0x18932a=Object[_0x2f7b3c(0x1b3)](_0x46d3a1)[_0x2f7b3c(0x2e4)],_0x468ba4=document['createElement']('tr');_0x468ba4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4e90ad['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x1f4863[_0x2f7b3c(0x215)]()+'\x22>'+_0x1f4863+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x18932a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4e90ad['lastUpdated']?new Date(_0x4e90ad[_0x2f7b3c(0x2b1)]['seconds']*0x3e8)[_0x2f7b3c(0x14e)]():_0x2f7b3c(0xda))+_0x2f7b3c(0x204)+_0x4e90ad['username']+'\x22\x20data-ladder=\x22'+_0x1f4863+_0x2f7b3c(0xbc),_0x18e3d9[_0x2f7b3c(0x140)](_0x468ba4);});};_0xd440bc(_0x273118,'D1'),_0xd440bc(_0x5b81d8,'D2'),_0xd440bc(_0x2827c4,'D3'),document['querySelectorAll']('.edit-ribbons-btn')[_0x236b61(0xb7)](_0x12e221=>{_0x12e221['addEventListener']('click',function(){const _0x1951ac=a4_0x3f31,_0x1c540e=this['dataset']['username'],_0x4f5559=this['dataset'][_0x1951ac(0x27c)];editUserRibbons(_0x1c540e,_0x4f5559);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully',_0x236b61(0x2c5));}catch(_0x440040){console[_0x236b61(0x18e)]('Error\x20loading\x20ribbons:',_0x440040),_0x18e3d9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x5c7982=a4_0x48ba8e,_0xcd8dab=document['getElementById'](_0x5c7982(0x2e1))[_0x5c7982(0x16d)]['trim']();if(!_0xcd8dab){showNotification(_0x5c7982(0x2b0),'error');return;}try{const [_0x419b82,_0x52e222,_0x43784]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0xcd8dab)),getDoc(doc(db,_0x5c7982(0xfc),_0xcd8dab)),getDoc(doc(db,'playerRibbonsD3',_0xcd8dab))]);let _0x5eb12d=null,_0x42ed5d=null;if(_0x419b82[_0x5c7982(0x100)]())_0x5eb12d='D1',_0x42ed5d=_0x419b82['data']();else{if(_0x52e222['exists']())_0x5eb12d='D2',_0x42ed5d=_0x52e222['data']();else _0x43784[_0x5c7982(0x100)]()&&(_0x5eb12d='D3',_0x42ed5d=_0x43784['data']());}_0x5eb12d?(document['getElementById']('current-ribbon-user')['textContent']=_0xcd8dab,document['getElementById'](_0x5c7982(0xe9))[_0x5c7982(0x16d)]=_0xcd8dab,document[_0x5c7982(0x143)]('ribbon-target-ladder')['value']=_0x5eb12d,document[_0x5c7982(0x143)](_0x5c7982(0x244))['style']['display']='block',displayCurrentRibbons(_0x42ed5d['ribbons']||{}),showNotification('Found\x20'+_0xcd8dab+_0x5c7982(0x2df)+_0x5eb12d+_0x5c7982(0xfa),'success')):showNotification('User\x20'+_0xcd8dab+_0x5c7982(0x205),_0x5c7982(0x18e));}catch(_0x226f05){console['error'](_0x5c7982(0x1f2),_0x226f05),showNotification(_0x5c7982(0x22d),'error');}}function displayCurrentRibbons(_0x1b2c9d){const _0x5d20ab=a4_0x48ba8e,_0x10708a=document[_0x5d20ab(0x143)]('current-ribbons-list');if(!_0x10708a)return;_0x10708a[_0x5d20ab(0x177)]='';if(Object[_0x5d20ab(0x1b3)](_0x1b2c9d)['length']===0x0){_0x10708a[_0x5d20ab(0x177)]='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object[_0x5d20ab(0x289)](_0x1b2c9d)[_0x5d20ab(0xb7)](([_0x4ec947,_0x3b0a8a])=>{const _0x1e6487=_0x5d20ab,_0x5c5e54=document['createElement']('div');_0x5c5e54['className']='ribbon-item',_0x5c5e54[_0x1e6487(0x177)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x4ec947+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x3b0a8a['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x3b0a8a[_0x1e6487(0x166)]?new Date(_0x3b0a8a['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+_0x1e6487(0x2ce)+_0x4ec947+_0x1e6487(0xe7),_0x10708a[_0x1e6487(0x140)](_0x5c5e54);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x278fba=>{const _0x4e6c1e=_0x5d20ab;_0x278fba['addEventListener'](_0x4e6c1e(0x233),function(){const _0x199e83=this['dataset']['ribbon'];removeRibbon(_0x199e83);});});}async function addRibbon(_0xfc8681){const _0x54dfef=a4_0x48ba8e;_0xfc8681['preventDefault']();const _0x18d0ba=document[_0x54dfef(0x143)]('ribbon-target-user')[_0x54dfef(0x16d)],_0x3e27fd=document['getElementById']('ribbon-target-ladder')[_0x54dfef(0x16d)],_0x2e653c=document['getElementById']('ribbon-type-select')['value'],_0x543425=parseInt(document['getElementById']('ribbon-level')[_0x54dfef(0x16d)]);if(!_0x18d0ba||!_0x3e27fd||!_0x2e653c||!_0x543425){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x17775e='playerRibbons'+(_0x3e27fd==='D1'?'':_0x3e27fd),_0x46faa8=doc(db,_0x17775e,_0x18d0ba),_0x41f9ce=await getDoc(_0x46faa8),_0x3e1730=_0x41f9ce[_0x54dfef(0x100)]()?_0x41f9ce['data']()[_0x54dfef(0x189)]||{}:{};_0x3e1730[_0x2e653c]={'level':_0x543425,'awardedAt':serverTimestamp()},await setDoc(_0x46faa8,{'username':_0x18d0ba,'ladder':_0x3e27fd,'ribbons':_0x3e1730,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x2e653c+'\x20Level\x20'+_0x543425+'\x20to\x20'+_0x18d0ba,'success'),displayCurrentRibbons(_0x3e1730),document['getElementById']('ribbon-type-select')['value']='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x59ba9a){console[_0x54dfef(0x18e)](_0x54dfef(0xff),_0x59ba9a),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x3a0447){const _0x297eb6=a4_0x48ba8e,_0x683e67=document[_0x297eb6(0x143)]('ribbon-target-user')[_0x297eb6(0x16d)],_0x5ed65e=document['getElementById']('ribbon-target-ladder')[_0x297eb6(0x16d)];if(!confirm('Remove\x20'+_0x3a0447+_0x297eb6(0x158)+_0x683e67+'?'))return;try{const _0x296912='playerRibbons'+(_0x5ed65e==='D1'?'':_0x5ed65e),_0xf11f12=doc(db,_0x296912,_0x683e67),_0x29b487=await getDoc(_0xf11f12),_0x1df0dd=_0x29b487['exists']()?_0x29b487['data']()['ribbons']||{}:{};delete _0x1df0dd[_0x3a0447],await setDoc(_0xf11f12,{'username':_0x683e67,'ladder':_0x5ed65e,'ribbons':_0x1df0dd,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x3a0447+_0x297eb6(0x158)+_0x683e67,'success'),displayCurrentRibbons(_0x1df0dd);}catch(_0x13bdc0){console['error']('Error\x20removing\x20ribbon:',_0x13bdc0),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x3adecb,_0x105a52){document['getElementById']('ribbon-user-search')['value']=_0x3adecb,searchRibbonUser();}