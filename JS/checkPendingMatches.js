const a8_0x19d021=(function(){let _0x39455a=!![];return function(_0x28b0a9,_0x48f563){const _0x4d18d6=_0x39455a?function(){if(_0x48f563){const _0x3a2a52=_0x48f563['apply'](_0x28b0a9,arguments);return _0x48f563=null,_0x3a2a52;}}:function(){};return _0x39455a=![],_0x4d18d6;};}()),a8_0x2fb78b=a8_0x19d021(this,function(){const _0x458e06=a8_0x2fcf,_0x49e551=function(){let _0x3ed326;try{_0x3ed326=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5e82d1){_0x3ed326=window;}return _0x3ed326;},_0x3e17ff=_0x49e551(),_0x2b8b53=_0x3e17ff['console']=_0x3e17ff['console']||{},_0x573622=['log','warn',_0x458e06(0x1aa),'error','exception',_0x458e06(0x1b7),'trace'];for(let _0x4707e9=0x0;_0x4707e9<_0x573622['length'];_0x4707e9++){const _0x46f965=a8_0x19d021[_0x458e06(0x1b2)][_0x458e06(0x1bd)]['bind'](a8_0x19d021),_0x2703ca=_0x573622[_0x4707e9],_0x1852cb=_0x2b8b53[_0x2703ca]||_0x46f965;_0x46f965['__proto__']=a8_0x19d021[_0x458e06(0x1b1)](a8_0x19d021),_0x46f965[_0x458e06(0x1b3)]=_0x1852cb['toString']['bind'](_0x1852cb),_0x2b8b53[_0x2703ca]=_0x46f965;}});a8_0x2fb78b();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;function a8_0x4bb4(){const _0x131f92=['approved','parse','winnerUsername','display','absolute','empty','currentUsername','pendingMatchesD2','uid','info','setItem','playersD2','position','winnerEmail','Error\x20checking\x20pending\x20matches:','pendingMatchesD3','bind','constructor','toString','pendingMatches','top','data','table','999','stringify','username','removeItem','docs','prototype','players'];a8_0x4bb4=function(){return _0x131f92;};return a8_0x4bb4();}export async function checkPendingMatches(_0x5ad463=![]){const _0xf20436=a8_0x2fcf,_0x5f1ace=Date['now'](),_0x270ff9=checkNotificationCache();if(_0x270ff9!==null&&!_0x5ad463){updateNotificationDot(_0x270ff9);if(_0x5f1ace-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x5f1ace;const _0x2fe552=auth['currentUser'];if(!_0x2fe552){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x2f427f,_0x14655e,_0x19843f]=await Promise['all']([checkForPendingMatchesInCollection(_0x2fe552,_0xf20436(0x1b4)),checkForPendingMatchesInCollection(_0x2fe552,_0xf20436(0x1a8)),checkForPendingMatchesInCollection(_0x2fe552,_0xf20436(0x1b0))]),_0xad40cd=_0x2f427f||_0x14655e||_0x19843f;updateNotificationDot(_0xad40cd),updateNotificationCache(_0xad40cd);}catch(_0x534e32){console['error'](_0xf20436(0x1af),_0x534e32);}}function a8_0x2fcf(_0x40ec85,_0x9385c3){const _0x2fb78b=a8_0x4bb4();return a8_0x2fcf=function(_0x19d021,_0x47870a){_0x19d021=_0x19d021-0x1a1;let _0x4bb454=_0x2fb78b[_0x19d021];return _0x4bb454;},a8_0x2fcf(_0x40ec85,_0x9385c3);}async function checkForPendingMatchesInCollection(_0x11025f,_0x144d41){const _0x41004e=a8_0x2fcf,_0x58f5ef=_0x11025f['uid'],_0x5aaa2d=_0x11025f['email'],_0x50f853=query(collection(db,_0x144d41),where('winnerId','==',_0x58f5ef),where(_0x41004e(0x1a1),'==',![])),_0x31db22=await getDocs(_0x50f853);if(!_0x31db22[_0x41004e(0x1a6)])return!![];if(_0x5aaa2d){const _0x5d1f21=query(collection(db,_0x144d41),where(_0x41004e(0x1ae),'==',_0x5aaa2d),where(_0x41004e(0x1a1),'==',![])),_0x43871a=await getDocs(_0x5d1f21);if(!_0x43871a[_0x41004e(0x1a6)])return!![];}let _0x4e8d2b=await getUsernameFromAllSources(_0x11025f);if(_0x4e8d2b){const _0x515faa=query(collection(db,_0x144d41),where(_0x41004e(0x1a3),'==',_0x4e8d2b),where('approved','==',![])),_0x22fdb3=await getDocs(_0x515faa);if(!_0x22fdb3['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x2d40ad){const _0x14d869=a8_0x2fcf,_0x3aa152=localStorage['getItem'](_0x14d869(0x1a7));if(_0x3aa152)return _0x3aa152;try{const [_0x4e65b0,_0x232f31,_0x11b370]=await Promise['all']([getDocs(query(collection(db,_0x14d869(0x1be)),where('userId','==',_0x2d40ad['uid']))),getDocs(query(collection(db,_0x14d869(0x1ac)),where('userId','==',_0x2d40ad[_0x14d869(0x1a9)]))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x2d40ad['uid'])))]);if(!_0x4e65b0['empty']){const _0x21164f=_0x4e65b0[_0x14d869(0x1bc)][0x0]['data']()['username'];return localStorage['setItem'](_0x14d869(0x1a7),_0x21164f),_0x21164f;}if(!_0x232f31['empty']){const _0x37f5eb=_0x232f31['docs'][0x0][_0x14d869(0x1b6)]()['username'];return localStorage['setItem']('currentUsername',_0x37f5eb),_0x37f5eb;}if(!_0x11b370['empty']){const _0x4de390=_0x11b370['docs'][0x0]['data']()[_0x14d869(0x1ba)];return localStorage['setItem'](_0x14d869(0x1a7),_0x4de390),_0x4de390;}const _0x2def1a=await getDoc(doc(db,'users',_0x2d40ad[_0x14d869(0x1a9)]));if(_0x2def1a['exists']()&&_0x2def1a['data']()[_0x14d869(0x1ba)]){const _0x27321b=_0x2def1a['data']()['username'];return localStorage['setItem']('currentUsername',_0x27321b),_0x27321b;}}catch(_0x5a360c){console['error']('Error\x20fetching\x20username:',_0x5a360c);}if(_0x2d40ad['email'])return _0x2d40ad['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x10481b){const _0x5a7cf0=a8_0x2fcf,_0x1d9892={'status':_0x10481b,'timestamp':Date['now']()};localStorage[_0x5a7cf0(0x1ab)](NOTIFICATION_CACHE_KEY,JSON[_0x5a7cf0(0x1b9)](_0x1d9892));}function checkNotificationCache(){const _0x17dd17=a8_0x2fcf,_0x25ebbc=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x25ebbc)return null;try{const {status:_0x46fbb4,timestamp:_0x3d47f7}=JSON[_0x17dd17(0x1a2)](_0x25ebbc),_0x4cfcf2=Date['now']();if(_0x4cfcf2-_0x3d47f7<CACHE_EXPIRY)return _0x46fbb4;}catch(_0x3e84bc){}return null;}export function updateNotificationDot(_0x3af132){const _0x5bef1f=new MutationObserver((_0x17f2dd,_0x2d536e)=>{const _0x5e3d10=document['getElementById']('report-match-notification');_0x5e3d10&&(updateDotStyle(_0x5e3d10,_0x3af132),_0x2d536e['disconnect']());});_0x5bef1f['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x5029d3=document['getElementById']('report-match-notification');_0x5029d3&&(updateDotStyle(_0x5029d3,_0x3af132),_0x5bef1f['disconnect']()),setTimeout(()=>_0x5bef1f['disconnect'](),0x1388);}function updateDotStyle(_0x40f46e,_0xe54dfe){const _0x70f666=a8_0x2fcf;_0xe54dfe?(_0x40f46e['style']['display']='block',_0x40f46e['style']['backgroundColor']='#ff3b30',_0x40f46e['style']['width']='10px',_0x40f46e['style']['height']='10px',_0x40f46e['style'][_0x70f666(0x1ad)]=_0x70f666(0x1a5),_0x40f46e['style'][_0x70f666(0x1b5)]='-5px',_0x40f46e['style']['right']='-8px',_0x40f46e['style']['borderRadius']='50%',_0x40f46e['style']['border']='2px\x20solid\x20white',_0x40f46e['style']['zIndex']=_0x70f666(0x1b8)):_0x40f46e['style'][_0x70f666(0x1a4)]='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x335e86=a8_0x2fcf;localStorage[_0x335e86(0x1bb)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});