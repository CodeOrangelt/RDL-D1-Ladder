function a17_0x2cc4(){const _0x4cd5a1=['[FirebaseIdle]\x20All\x20listeners\x20suspended','unavailable','[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:','console','[FirebaseIdle]\x20Suspension\x20test\x20complete','pendingTimeout','unsubscribe','resumeAllListeners','function','forEach','pendingOperations','safeOperation','suspendSession','activeListeners','warn','system','delete','resumeSession','operationType','trace','getElementById','code','Error\x20executing\x20pending\x20operation:','textContent','[FirebaseIdle]\x20Successfully\x20suspended\x20listener:','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error','toString','remove','[FirebaseIdle]\x20Listeners\x20resumed','get','apply','[FirebaseIdle]\x20Suspending\x20listener:','[FirebaseIdle]\x20Error\x20suspending\x20listener:','RDL_SESSION_SUSPENDED','debug','blockedOperations','deleteDocument','log','[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:','all','addDocument','firebase-suspend-indicator','createElement','_suspendedListeners','set','[FirebaseIdle]\x20Debug\x20mode\x20','prototype','bind','now','size','[FirebaseIdle]\x20Blocked\x20','message','[FirebaseIdle]\x20No\x20listeners\x20to\x20resume','enabled'];a17_0x2cc4=function(){return _0x4cd5a1;};return a17_0x2cc4();}const a17_0x4e0f61=a17_0x292f,a17_0x30fcc2=(function(){let _0x35f02b=!![];return function(_0x3420c5,_0x147d69){const _0xe55376=_0x35f02b?function(){const _0x158d4b=a17_0x292f;if(_0x147d69){const _0x43a1d4=_0x147d69[_0x158d4b(0x89)](_0x3420c5,arguments);return _0x147d69=null,_0x43a1d4;}}:function(){};return _0x35f02b=![],_0xe55376;};}()),a17_0x3012c1=a17_0x30fcc2(this,function(){const _0xcc62f2=a17_0x292f,_0x2a103e=function(){let _0x4fc31e;try{_0x4fc31e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x197cb0){_0x4fc31e=window;}return _0x4fc31e;},_0x1a9830=_0x2a103e(),_0x16b3f4=_0x1a9830['console']=_0x1a9830[_0xcc62f2(0x6e)]||{},_0x6d9767=['log',_0xcc62f2(0x79),'info','error','exception','table',_0xcc62f2(0x7e)];for(let _0x2708b3=0x0;_0x2708b3<_0x6d9767['length'];_0x2708b3++){const _0x354370=a17_0x30fcc2['constructor'][_0xcc62f2(0x99)]['bind'](a17_0x30fcc2),_0xc506ab=_0x6d9767[_0x2708b3],_0x43d1b8=_0x16b3f4[_0xc506ab]||_0x354370;_0x354370['__proto__']=a17_0x30fcc2['bind'](a17_0x30fcc2),_0x354370[_0xcc62f2(0x85)]=_0x43d1b8['toString'][_0xcc62f2(0x9a)](_0x43d1b8),_0x16b3f4[_0xc506ab]=_0x354370;}});function a17_0x292f(_0x5f27ee,_0x174f34){const _0x3012c1=a17_0x2cc4();return a17_0x292f=function(_0x30fcc2,_0x5855bb){_0x30fcc2=_0x30fcc2-0x6b;let _0x2cc4a3=_0x3012c1[_0x30fcc2];return _0x2cc4a3;},a17_0x292f(_0x5f27ee,_0x174f34);}a17_0x3012c1();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x2a31f9=a17_0x292f;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this[_0x2a31f9(0x8e)]=0x0,this['debug']=![];}['checkSessionActive'](){const _0x37c4a0=a17_0x292f;if(window[_0x37c4a0(0x8c)]===!![])return console[_0x37c4a0(0x90)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0x37c4a0(0x9d)+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log'](_0x37c4a0(0x84)),![];return!![];}async['safeOperation'](_0x5a9a62,_0x477596,..._0x47b894){const _0x16936f=a17_0x292f;if(!this['checkSessionActive']()){const _0x2f4540=_0x477596+'-'+Date['now']()+'-'+Math['random']()[_0x16936f(0x85)](0x24)['substring'](0x2,0x9);return this[_0x16936f(0x75)][_0x16936f(0x97)](_0x2f4540,{'operation':_0x5a9a62,'operationType':_0x477596,'args':_0x47b894}),!this[_0x16936f(0x70)]&&(this[_0x16936f(0x70)]=setTimeout(()=>{this['pendingOperations']['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x5a9a62(..._0x47b894);}catch(_0x1c98ad){if(_0x1c98ad['code']===_0x16936f(0x6c)||_0x1c98ad[_0x16936f(0x80)]==='resource-exhausted'||_0x1c98ad[_0x16936f(0x9e)]&&_0x1c98ad['message']['includes']('network'))return handleNetworkError(),null;throw _0x1c98ad;}}async['getDocument'](_0x33d95a){const _0x23f568=a17_0x292f;return this['safeOperation'](getDoc,_0x23f568(0x88),_0x33d95a);}async['getDocuments'](_0x474a7b){return this['safeOperation'](getDocs,'query',_0x474a7b);}async[a17_0x4e0f61(0x93)](_0x181a3c,_0x16ee71){return this['safeOperation'](addDoc,'add',_0x181a3c,_0x16ee71);}async['setDocument'](_0xf6cff3,_0x19a0f0,_0x5dd026={}){return this['safeOperation'](setDoc,'set',_0xf6cff3,_0x19a0f0,_0x5dd026);}async['updateDocument'](_0x4b95d9,_0x390f3b){return this['safeOperation'](updateDoc,'update',_0x4b95d9,_0x390f3b);}async[a17_0x4e0f61(0x8f)](_0x362e37){const _0x53828e=a17_0x4e0f61;return this[_0x53828e(0x76)](deleteDoc,'delete',_0x362e37);}['suspendAllListeners'](){const _0x5f3fde=a17_0x4e0f61;console['log'](_0x5f3fde(0x6d),this[_0x5f3fde(0x78)]['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this['activeListeners']['forEach']((_0x5a438a,_0x35e33b)=>{const _0x3c5485=_0x5f3fde;console[_0x3c5485(0x90)](_0x3c5485(0x8a),_0x35e33b);if(typeof _0x5a438a==='function')try{_0x5a438a(),console['log'](_0x3c5485(0x83),_0x35e33b);}catch(_0x2b733d){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x35e33b,_0x2b733d);}else{if(_0x5a438a&&typeof _0x5a438a[_0x3c5485(0x71)]==='function')try{_0x5a438a['unsubscribe'](),console[_0x3c5485(0x90)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x35e33b);}catch(_0x40f9ea){console['error'](_0x3c5485(0x8b),_0x35e33b,_0x40f9ea);}}}),this[_0x5f3fde(0x78)]['clear']();if(this[_0x5f3fde(0x8d)]){const _0x2cc48c=document[_0x5f3fde(0x95)]('div');_0x2cc48c['id']='firebase-suspend-indicator',_0x2cc48c['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2cc48c[_0x5f3fde(0x82)]='Firebase:\x20Suspended',document['body']['appendChild'](_0x2cc48c);}console['log'](_0x5f3fde(0x6b));}[a17_0x4e0f61(0x72)](){const _0x2f8f83=a17_0x4e0f61;if(!this[_0x2f8f83(0x96)]||this['_suspendedListeners']['size']===0x0){console['log'](_0x2f8f83(0x9f));return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners'][_0x2f8f83(0x9c)]),this['_suspendedListeners'][_0x2f8f83(0x74)]((_0x779640,_0x2d46d6)=>{const _0x226325=_0x2f8f83;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x2d46d6);try{if(typeof _0x779640===_0x226325(0x73)){console[_0x226325(0x79)](_0x226325(0x91),_0x2d46d6);return;}const {query:_0x5f0df2,callback:_0x3965bc,options:_0x5e7881}=_0x779640;if(_0x5f0df2&&_0x3965bc){const _0x3a7f38=onSnapshot(_0x5f0df2,_0x3965bc,_0x5e7881||{});this['activeListeners']['set'](_0x2d46d6,_0x3a7f38),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x2d46d6);}}catch(_0x42323f){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x2d46d6,_0x42323f);}}),this['_suspendedListeners']['clear']();const _0x2d2677=document[_0x2f8f83(0x7f)](_0x2f8f83(0x94));_0x2d2677&&_0x2d2677[_0x2f8f83(0x86)](),console['log'](_0x2f8f83(0x87));}['createListener'](_0x418afb,_0x4e5583,_0x3e24cd={},_0x125c82=null){const _0x4c74db=a17_0x4e0f61,_0x12ed04=_0x125c82||'listener_'+Date[_0x4c74db(0x9b)]()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x12ed04);if(!this['checkSessionActive']())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x12ed04),()=>{};try{const _0x22328f=onSnapshot(_0x418afb,_0x4e5583,_0x3e24cd);return this[_0x4c74db(0x78)]['set'](_0x12ed04,{'unsubscribe':_0x22328f,'query':_0x418afb,'callback':_0x4e5583,'options':_0x3e24cd}),this[_0x4c74db(0x8d)]&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x12ed04),console[_0x4c74db(0x90)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this[_0x4c74db(0x78)]['size'])),()=>{const _0x24d3e2=_0x4c74db;this[_0x24d3e2(0x8d)]&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x12ed04);try{_0x22328f(),this[_0x24d3e2(0x78)][_0x24d3e2(0x7b)](_0x12ed04),this[_0x24d3e2(0x8d)]&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x12ed04),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x5d9d39){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x12ed04+':',_0x5d9d39);}};}catch(_0x5b9a7e){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x12ed04+':',_0x5b9a7e),()=>{};}}['executePendingOperations'](_0x1338a3=a17_0x4e0f61(0x92)){const _0x18d180=a17_0x4e0f61;console[_0x18d180(0x90)]('Executing\x20pending\x20'+_0x1338a3+'\x20operations:\x20'+this['pendingOperations']['size']+'\x20total\x20operations');const _0xd1e241=new Map(this['pendingOperations']);this['pendingOperations']['clear'](),_0xd1e241[_0x18d180(0x74)]((_0x40ffe2,_0x34c457)=>{const _0x2f99ba=_0x18d180;_0x1338a3==='all'||_0x40ffe2['operationType']===_0x1338a3?(console['log']('Executing\x20delayed\x20'+_0x40ffe2[_0x2f99ba(0x7d)]+'\x20operation'),this[_0x2f99ba(0x76)](_0x40ffe2['operation'],_0x40ffe2['operationType'],..._0x40ffe2['args'])['catch'](_0x322c3a=>console['error'](_0x2f99ba(0x81),_0x322c3a))):this['pendingOperations']['set'](_0x34c457,_0x40ffe2);});}['enableDebug'](_0x538a4d=!![]){const _0x4437d3=a17_0x4e0f61;this['debug']=_0x538a4d,console['log'](_0x4437d3(0x98)+(_0x538a4d?_0x4437d3(0xa0):'disabled'));if(_0x538a4d){const _0x43beed=window['RDL_SESSION_SUSPENDED'];window[_0x4437d3(0x8c)]=!![],console[_0x4437d3(0x90)]('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,_0x4437d3(0x7a),'test'))['then'](_0x211241=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x211241);})['catch'](_0x5a538c=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x5a538c);})['finally'](()=>{const _0x136621=_0x4437d3;console['log'](_0x136621(0x6f)),window['RDL_SESSION_SUSPENDED']=_0x43beed;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x313aa2=a17_0x4e0f61,_0x43ff2d=window[_0x313aa2(0x77)]||function(){},_0x118913=window[_0x313aa2(0x7c)]||function(){};window['suspendSession']=function(){_0x43ff2d(),firebaseIdle['suspendAllListeners']();},window[_0x313aa2(0x7c)]=function(){const _0x291740=_0x313aa2;_0x118913(),firebaseIdle[_0x291740(0x72)]();};}export default firebaseIdle;