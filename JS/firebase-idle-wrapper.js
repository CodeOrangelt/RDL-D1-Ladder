const a19_0x135133=a19_0x2292,a19_0x2670ba=(function(){let _0x24f0a9=!![];return function(_0x3e1c53,_0x23f857){const _0x26821c=_0x24f0a9?function(){const _0x10ff82=a19_0x2292;if(_0x23f857){const _0x465ed5=_0x23f857[_0x10ff82(0x17f)](_0x3e1c53,arguments);return _0x23f857=null,_0x465ed5;}}:function(){};return _0x24f0a9=![],_0x26821c;};}()),a19_0x11c399=a19_0x2670ba(this,function(){const _0xf2fc5a=a19_0x2292,_0xf4c391=function(){let _0x49a736;try{_0x49a736=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4a42d4){_0x49a736=window;}return _0x49a736;},_0x10d61c=_0xf4c391(),_0x73ccd4=_0x10d61c[_0xf2fc5a(0x19d)]=_0x10d61c[_0xf2fc5a(0x19d)]||{},_0x394bae=['log',_0xf2fc5a(0x183),'info','error','exception','table',_0xf2fc5a(0x190)];for(let _0x37a7e0=0x0;_0x37a7e0<_0x394bae[_0xf2fc5a(0x18c)];_0x37a7e0++){const _0xe0ca84=a19_0x2670ba['constructor']['prototype'][_0xf2fc5a(0x188)](a19_0x2670ba),_0x16486c=_0x394bae[_0x37a7e0],_0x313e62=_0x73ccd4[_0x16486c]||_0xe0ca84;_0xe0ca84['__proto__']=a19_0x2670ba['bind'](a19_0x2670ba),_0xe0ca84[_0xf2fc5a(0x199)]=_0x313e62[_0xf2fc5a(0x199)][_0xf2fc5a(0x188)](_0x313e62),_0x73ccd4[_0x16486c]=_0xe0ca84;}});function a19_0x2292(_0x358dc6,_0x4c34e4){const _0x11c399=a19_0x26e1();return a19_0x2292=function(_0x2670ba,_0x44cc77){_0x2670ba=_0x2670ba-0x17e;let _0x26e138=_0x11c399[_0x2670ba];return _0x26e138;},a19_0x2292(_0x358dc6,_0x4c34e4);}a19_0x11c399();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x3cf0d2=a19_0x2292;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this[_0x3cf0d2(0x18e)]=![];}['checkSessionActive'](){if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn']('[FirebaseIdle]\x20Blocked\x20'+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x6e7631,_0x24deb9,..._0x20645e){const _0x312dbe=a19_0x2292;if(!this['checkSessionActive']()){const _0x25ca81=_0x24deb9+'-'+Date[_0x312dbe(0x1a8)]()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x25ca81,{'operation':_0x6e7631,'operationType':_0x24deb9,'args':_0x20645e}),!this[_0x312dbe(0x196)]&&(this['pendingTimeout']=setTimeout(()=>{this['pendingOperations']['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x6e7631(..._0x20645e);}catch(_0x19a129){if(_0x19a129['code']===_0x312dbe(0x193)||_0x19a129[_0x312dbe(0x18a)]==='resource-exhausted'||_0x19a129['message']&&_0x19a129['message']['includes']('network'))return handleNetworkError(),null;throw _0x19a129;}}async['getDocument'](_0x5be748){const _0x1418fb=a19_0x2292;return this[_0x1418fb(0x1a6)](getDoc,'get',_0x5be748);}async['getDocuments'](_0x58e7c0){const _0x9020b5=a19_0x2292;return this[_0x9020b5(0x1a6)](getDocs,'query',_0x58e7c0);}async['addDocument'](_0x27103d,_0x2d6e71){const _0xf838fa=a19_0x2292;return this['safeOperation'](addDoc,_0xf838fa(0x1a2),_0x27103d,_0x2d6e71);}async['setDocument'](_0x6abdaa,_0x3de08e,_0x3c3d92={}){const _0x31bc7c=a19_0x2292;return this[_0x31bc7c(0x1a6)](setDoc,_0x31bc7c(0x1a1),_0x6abdaa,_0x3de08e,_0x3c3d92);}async['updateDocument'](_0x86fe51,_0x1420e1){return this['safeOperation'](updateDoc,'update',_0x86fe51,_0x1420e1);}async['deleteDocument'](_0x5b3063){const _0x5be20a=a19_0x2292;return this['safeOperation'](deleteDoc,_0x5be20a(0x1aa),_0x5b3063);}[a19_0x135133(0x181)](){const _0x1cc184=a19_0x135133;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this[_0x1cc184(0x1a9)]['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this['activeListeners'][_0x1cc184(0x189)]((_0x1b3889,_0x49dc1d)=>{const _0x25bb1b=_0x1cc184;console['log'](_0x25bb1b(0x1a0),_0x49dc1d);if(typeof _0x1b3889==='function')try{_0x1b3889(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x49dc1d);}catch(_0x4b6017){console[_0x25bb1b(0x18b)]('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x49dc1d,_0x4b6017);}}),this['activeListeners']['clear']();if(this['debug']){const _0x115526=document['createElement']('div');_0x115526['id']='firebase-suspend-indicator',_0x115526['style']['cssText']=_0x1cc184(0x185),_0x115526['textContent']='Firebase:\x20Suspended',document['body']['appendChild'](_0x115526);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}[a19_0x135133(0x1a4)](){const _0x9cdacc=a19_0x135133;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console['log'](_0x9cdacc(0x1a7));return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners']['size']),this['_suspendedListeners']['forEach']((_0x1313a6,_0x4f79be)=>{const _0x19fbc6=_0x9cdacc;console['log'](_0x19fbc6(0x187),_0x4f79be);try{if(typeof _0x1313a6==='function'){console['warn'](_0x19fbc6(0x182),_0x4f79be);return;}const {query:_0x200e97,callback:_0x4b64ad,options:_0x128f97}=_0x1313a6;if(_0x200e97&&_0x4b64ad){const _0x998696=onSnapshot(_0x200e97,_0x4b64ad,_0x128f97||{});this['activeListeners'][_0x19fbc6(0x1a1)](_0x4f79be,_0x998696),console[_0x19fbc6(0x19f)](_0x19fbc6(0x1a3),_0x4f79be);}}catch(_0xe2f2ff){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x4f79be,_0xe2f2ff);}}),this[_0x9cdacc(0x198)]['clear']();const _0x294794=document['getElementById'](_0x9cdacc(0x180));_0x294794&&_0x294794['remove'](),console[_0x9cdacc(0x19f)]('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x3fc016,_0x1684b6,_0x4c69c4={},_0x17e79d=null){const _0x582eb0=a19_0x135133,_0x50a946=_0x17e79d||'listener_'+Date['now']()+'_'+Math[_0x582eb0(0x17e)]()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x50a946);if(!this['checkSessionActive']())return console[_0x582eb0(0x19f)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x50a946),()=>{};try{const _0x3f394a=onSnapshot(_0x3fc016,_0x1684b6,_0x4c69c4);return this['activeListeners']['set'](_0x50a946,{'unsubscribe':_0x3f394a,'query':_0x3fc016,'callback':_0x1684b6,'options':_0x4c69c4}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x50a946),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this[_0x582eb0(0x1a9)][_0x582eb0(0x19b)])),()=>{const _0x2e83d0=_0x582eb0;this['debug']&&console[_0x2e83d0(0x19f)]('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x50a946);try{_0x3f394a(),this['activeListeners']['delete'](_0x50a946),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x50a946),console['log'](_0x2e83d0(0x184)+this['activeListeners'][_0x2e83d0(0x19b)]));}catch(_0x1b95a0){console['error'](_0x2e83d0(0x18d)+_0x50a946+':',_0x1b95a0);}};}catch(_0x3252d2){return console['error'](_0x582eb0(0x1a5)+_0x50a946+':',_0x3252d2),()=>{};}}['executePendingOperations'](_0x3739ce='all'){const _0xcae478=a19_0x135133;console['log']('Executing\x20pending\x20'+_0x3739ce+_0xcae478(0x197)+this['pendingOperations']['size']+'\x20total\x20operations');const _0x563c86=new Map(this['pendingOperations']);this[_0xcae478(0x19c)]['clear'](),_0x563c86[_0xcae478(0x189)]((_0x4956ed,_0x22f95b)=>{const _0x5192ac=_0xcae478;_0x3739ce==='all'||_0x4956ed['operationType']===_0x3739ce?(console[_0x5192ac(0x19f)]('Executing\x20delayed\x20'+_0x4956ed['operationType']+'\x20operation'),this['safeOperation'](_0x4956ed[_0x5192ac(0x192)],_0x4956ed[_0x5192ac(0x186)],..._0x4956ed['args'])['catch'](_0x4e4792=>console['error']('Error\x20executing\x20pending\x20operation:',_0x4e4792))):this['pendingOperations']['set'](_0x22f95b,_0x4956ed);});}['enableDebug'](_0x23b448=!![]){const _0x52e113=a19_0x135133;this['debug']=_0x23b448,console['log'](_0x52e113(0x19a)+(_0x23b448?'enabled':'disabled'));if(_0x23b448){const _0x6c4098=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console[_0x52e113(0x19f)]('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,'system','test'))[_0x52e113(0x18f)](_0x40bb65=>{const _0x17e19d=_0x52e113;console['log'](_0x17e19d(0x194),_0x40bb65);})['catch'](_0x3e8a69=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x3e8a69);})['finally'](()=>{const _0x1587f9=_0x52e113;console['log'](_0x1587f9(0x191)),window['RDL_SESSION_SUSPENDED']=_0x6c4098;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x43a918=a19_0x135133,_0x2f2620=window[_0x43a918(0x19e)]||function(){},_0x5792a6=window[_0x43a918(0x195)]||function(){};window['suspendSession']=function(){_0x2f2620(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){_0x5792a6(),firebaseIdle['resumeAllListeners']();};}function a19_0x26e1(){const _0x397d55=['random','apply','firebase-suspend-indicator','suspendAllListeners','[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:','warn','[FirebaseIdle]\x20Active\x20listeners:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','operationType','[FirebaseIdle]\x20Resuming\x20listener:','bind','forEach','code','error','length','[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20','debug','then','trace','[FirebaseIdle]\x20Suspension\x20test\x20complete','operation','unavailable','[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension','resumeSession','pendingTimeout','\x20operations:\x20','_suspendedListeners','toString','[FirebaseIdle]\x20Debug\x20mode\x20','size','pendingOperations','console','suspendSession','log','[FirebaseIdle]\x20Suspending\x20listener:','set','add','[FirebaseIdle]\x20Successfully\x20resumed\x20listener:','resumeAllListeners','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','safeOperation','[FirebaseIdle]\x20No\x20listeners\x20to\x20resume','now','activeListeners','delete'];a19_0x26e1=function(){return _0x397d55;};return a19_0x26e1();}export default firebaseIdle;