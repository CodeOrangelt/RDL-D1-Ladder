const a0_0x3a1a13=a0_0x5c0a;function a0_0x282f(){const _0x3e771a=['2UTGdEr','readyPlayers','Unknown\x20Player','unload','username','isReady','4271310irtefz','3412367isFqGN','floor','prototype','3817569YNaaNg','7796832NaejJI','779040tqRbWD','5068696iqerCv','Error\x20in\x20queue\x20listener:','none','innerHTML','toString','error','Just\x20now','6RLiIYC','1289667MLNOlp','apply','lastUpdated','data'];a0_0x282f=function(){return _0x3e771a;};return a0_0x282f();}(function(_0x4c3467,_0x122e6b){const _0x5087c6=a0_0x5c0a,_0x18ec17=_0x4c3467();while(!![]){try{const _0x526079=-parseInt(_0x5087c6(0x10c))/0x1*(parseInt(_0x5087c6(0x110))/0x2)+parseInt(_0x5087c6(0x101))/0x3+parseInt(_0x5087c6(0x104))/0x4+-parseInt(_0x5087c6(0xfd))/0x5+-parseInt(_0x5087c6(0x10b))/0x6*(parseInt(_0x5087c6(0xfe))/0x7)+parseInt(_0x5087c6(0x102))/0x8+-parseInt(_0x5087c6(0x103))/0x9;if(_0x526079===_0x122e6b)break;else _0x18ec17['push'](_0x18ec17['shift']());}catch(_0x1b3a6f){_0x18ec17['push'](_0x18ec17['shift']());}}}(a0_0x282f,0xc26ab));const a0_0x207a4b=(function(){let _0x47e2de=!![];return function(_0x4f5e37,_0x5182fd){const _0x20ef7b=_0x47e2de?function(){const _0x331d24=a0_0x5c0a;if(_0x5182fd){const _0x411e82=_0x5182fd[_0x331d24(0x10d)](_0x4f5e37,arguments);return _0x5182fd=null,_0x411e82;}}:function(){};return _0x47e2de=![],_0x20ef7b;};}()),a0_0x56437c=a0_0x207a4b(this,function(){const _0x4b92d8=a0_0x5c0a,_0x3a484b=function(){let _0xea8e46;try{_0xea8e46=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2886f6){_0xea8e46=window;}return _0xea8e46;},_0x2197c2=_0x3a484b(),_0x4ff55a=_0x2197c2['console']=_0x2197c2['console']||{},_0x4e29aa=['log','warn','info','error','exception','table','trace'];for(let _0x59d178=0x0;_0x59d178<_0x4e29aa['length'];_0x59d178++){const _0x35ec66=a0_0x207a4b['constructor'][_0x4b92d8(0x100)]['bind'](a0_0x207a4b),_0x95a01=_0x4e29aa[_0x59d178],_0x5043f5=_0x4ff55a[_0x95a01]||_0x35ec66;_0x35ec66['__proto__']=a0_0x207a4b['bind'](a0_0x207a4b),_0x35ec66[_0x4b92d8(0x108)]=_0x5043f5['toString']['bind'](_0x5043f5),_0x4ff55a[_0x95a01]=_0x35ec66;}});a0_0x56437c();function a0_0x5c0a(_0x4d9a0f,_0x27e58c){const _0x4c13c9=a0_0x282f();return a0_0x5c0a=function(_0x56437c,_0x207a4b){_0x56437c=_0x56437c-0xfd;let _0x540207=_0x4c13c9[_0x56437c];return _0x540207;},a0_0x5c0a(_0x4d9a0f,_0x27e58c);}import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a0_0x3a1a13(0x111)),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x4b8c0d){const _0x518f95=a0_0x3a1a13,_0x44670c=document['getElementById']('queue-container');if(!_0x44670c)return;if(_0x4b8c0d['length']===0x0){_0x44670c['style']['display']=_0x518f95(0x106);return;}_0x44670c['style']['display']='block';let _0x5cccdb='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x4b8c0d['forEach'](_0x2503f2=>{const _0x46c407=_0x518f95;_0x5cccdb+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x2503f2[_0x46c407(0x114)]||_0x46c407(0x112))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x2503f2[_0x46c407(0x10e)])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x5cccdb+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x44670c[_0x518f95(0x107)]=_0x5cccdb;}function formatQueueTime(_0x1f08a4){const _0x513f3a=a0_0x3a1a13;if(!_0x1f08a4)return'Just\x20now';const _0x3e164=_0x1f08a4['toDate']?_0x1f08a4['toDate']():new Date(_0x1f08a4),_0x3d5d80=new Date(),_0x41cf34=Math[_0x513f3a(0xff)]((_0x3d5d80-_0x3e164)/0xea60);if(_0x41cf34<0x1)return _0x513f3a(0x10a);return _0x41cf34+'m\x20in\x20queue';}async function checkQueueTimeout(_0x1bab66){const _0x2befc4=a0_0x3a1a13;if(!_0x1bab66[_0x2befc4(0x10e)])return;const _0x54e1aa=_0x1bab66['lastUpdated']['toDate']?_0x1bab66[_0x2befc4(0x10e)]['toDate']():new Date(_0x1bab66['lastUpdated']),_0x27de4d=new Date(),_0x547b89=Math[_0x2befc4(0xff)]((_0x27de4d-_0x54e1aa)/0xea60);if(_0x547b89>=0x1e)try{const _0x274aa4=doc(db,'readyPlayers',_0x1bab66['id']);await updateDoc(_0x274aa4,{'isReady':![]});}catch(_0x2ef38d){console[_0x2befc4(0x109)]('Error\x20removing\x20player\x20from\x20queue:',_0x2ef38d);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x34b784=>{const _0x31ac32=[];_0x34b784['forEach'](_0x14e0e5=>{const _0xe64d0d=a0_0x5c0a,_0x2c13da=_0x14e0e5[_0xe64d0d(0x10f)]();if(_0x2c13da[_0xe64d0d(0x115)]===!![]){const _0x5c42ed={'id':_0x14e0e5['id'],'username':_0x2c13da[_0xe64d0d(0x114)],'lastUpdated':_0x2c13da['lastUpdated']||new Date()};_0x31ac32['push'](_0x5c42ed),checkQueueTimeout(_0x5c42ed);}}),updateQueueDisplay(_0x31ac32);},_0x4e2dd4=>{const _0xdab0f6=a0_0x3a1a13;console[_0xdab0f6(0x109)](_0xdab0f6(0x105),_0x4e2dd4);});window['addEventListener'](a0_0x3a1a13(0x113),()=>{unsubscribe();});