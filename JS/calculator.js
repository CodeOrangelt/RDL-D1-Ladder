const a9j=a9b;function a9b(a,b){const c=a9a();return a9b=function(d,e){d=d-0x165;let f=c[d];if(a9b['Tyuqfm']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a9b['IzvqkH']=g,a=arguments,a9b['Tyuqfm']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a9b['IzvqkH'](f),a[i]=f):f=j,f;},a9b(a,b);}(function(a,b){const h=a9b,c=a();while(!![]){try{const d=-parseInt(h(0x166))/0x1*(parseInt(h(0x1ab))/0x2)+parseInt(h(0x191))/0x3+parseInt(h(0x1a0))/0x4+parseInt(h(0x18d))/0x5*(parseInt(h(0x1b2))/0x6)+parseInt(h(0x19a))/0x7+-parseInt(h(0x193))/0x8*(-parseInt(h(0x190))/0x9)+-parseInt(h(0x1a3))/0xa;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a9a,0x813b4));import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a9a(){const z=['mJy5mtKYn1vRENzRvG','zgLZCgXHEq','mtuXnZy4ohfnuMHLyq','zw1LCMfSza','Bg9ZzxiTzwXVlwnOyw5Nzq','CM91BMq','ywrKrxzLBNrmAxn0zw5LCG','ihbSyxLLCNmGzNjVBsa','C2L6zq','mJaYndeYmgTvswLxrq','C2fUzgjVEa','Bg9ZzxiTC2vSzwn0','zgLZCgXHEunHBgn1Bgf0Aw9Urgv0ywLSCW','y2HHBMDL','C3r5Bgu','mZa5mJC5mKP1CKfYBW','y2fSy3vSyxrLruXp','D2LUBMvYlwvSBY1JAgfUz2u','mJqWnty4mJb4yK1zvLO','BMv3tg9ZzxjsyxrPBMC','tg9HzgvKia','Aw5Uzxjive1m','zwXV','BM9Uzq','Bg9ZzxiTBMv3lwvSBW','z2v0ruXpuMfUA0nSyxnZ','mMrtCuH0yG','y2XPy2S','cIaG','zgf0yxnLDa','z2v0','y3vYCMvUDeXHzgrLCG','z3jPza','mJuYtLzsD2fp','z2v0ruXpq29SB3i','iIbKyxrHlwvSBZ0I','DMfSDwvZ','CgXHEwvYCW','zgLZCgXHEu1HDgnOuMvZDwX0','ievmtYKkicaGicaGicaGicaGpc9VChrPB24+','CMvMCMvZAc1WBgf5zxjZ','zxHWzwn0zwrty29YzuXVC2vY','mta4nJi4v2HsC3LW','CgXHEwvYC0qZ','Aw5PDa','z2v0rwXLBwvUDej5swq','DxbKyxrLrhjVCgrVD25Z','DxnLCM5HBwu','y2fSy3vSyxrLtwf0y2G','C2v0','yMXVy2S','CgXHEwvYC0qY','ywrK','z29Sza','zwXVuMf0Aw5N','ywn0AxzL','DgfYz2v0','D2LUBMvYlwn1CNjLBNqTzwXV','icSG','C2v0DxbfDMvUDeXPC3rLBMvYCW','cIaGcKv4CgvJDgvKifnJB3jLCZOkica','y2XHC3nmAxn0','i0mWqZbdma','rxjYB3iGBg9HzgLUzYbWBgf5zxjZoG','q3vYCMvUDcbfte86ia','Bg9ZzxjdAgfUz2u','y29SB3i','Dgv4DenVBNrLBNq','Dg9gAxHLza','D2LUBMvYq2HHBMDL','y2fSy3vSyxrPB24Tzgv0ywLSCW','Cg9ZAxrPB24','Bg9HzfbSyxLLCNm','zgf0yq','CxvLCNLtzwXLy3rVCKfSBa','zM9YrwfJAa','D2LUBMvYlw5HBwu','Cg93','iZuWqZG3oa','tMv3ievmtZOG','DMfSDwu','mta2ndyWqwHvCNzz','CMvTB3zL','D2LUBMvYlw5LDY1LBg8','ovPVqLvUua'];a9a=function(){return z;};return a9a();}class ELOCalculator{constructor(){const i=a9b;this[i(0x1b0)]='D1',this['players']=new Map(),this['init']();}[a9j(0x168)](){const k=a9j;this[k(0x177)](),this[k(0x184)]();}['setupEventListeners'](){const l=a9j;document[l(0x186)]('.ladder-btn')['forEach'](a=>{a['addEventListener']('click',b=>{const m=a9b;document[m(0x186)]('.ladder-btn')[m(0x187)](c=>c[m(0x179)][m(0x18e)](m(0x173))),b[m(0x174)]['classList'][m(0x170)]('active'),this['currentLadder']=b['target'][m(0x1ae)]['ladder'],this[m(0x184)]();});}),document['getElementById'](l(0x1b9))[l(0x197)](l(0x1ac),()=>{const n=l;this[n(0x184)]();}),document['getElementById']('winner-select')['addEventListener'](l(0x19e),()=>this[l(0x16c)]()),document['getElementById'](l(0x19c))[l(0x197)](l(0x19e),()=>this[l(0x16c)]());}async[a9j(0x184)](){const o=a9j;try{this[o(0x16a)]('<option\x20value=\x22\x22>Loading\x20players...</option>');const a=this[o(0x1b0)]==='D1'?o(0x1b6):this[o(0x1b0)]==='D2'?o(0x16f):o(0x167),b=collection(db,a),c=query(b,orderBy(o(0x172),'desc')),d=await getDocs(c);this[o(0x1b6)]['clear'](),d['forEach'](e=>{const p=o,f=e[p(0x185)]();f['username']&&this['players'][p(0x16d)](f['username'],{'id':e['id'],'username':f[p(0x16b)],'elo':parseInt(f['eloRating'])||0x4b0,'position':f[p(0x183)]||0x3e7});}),this[o(0x16a)](),console['log'](o(0x1a5)+this['players'][o(0x199)]+o(0x198)+this[o(0x1b0)]+'\x20ladder');}catch(e){console['error'](o(0x17b),e),this[o(0x16a)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}['updateDropdowns'](a=null){const q=a9j,b=document[q(0x169)]('winner-select'),c=document['getElementById']('loser-select');if(a){b['innerHTML']=a,c['innerHTML']=a;return;}let d='<option\x20value=\x22\x22>Select\x20a\x20player...</option>';const e=Array['from'](this[q(0x1b6)][q(0x1b5)]())['sort']((f,g)=>g[q(0x1a7)]-f[q(0x1a7)]);e['forEach'](f=>{const r=q,g=this[r(0x1aa)](f[r(0x1a7)]);d+='<option\x20value=\x22'+f['username']+r(0x1b4)+f[r(0x1a7)]+'\x22\x20class=\x22'+g+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+f[r(0x16b)]+'\x20('+f[r(0x1a7)]+r(0x1b8);}),b['innerHTML']=d,c[q(0x1a6)]=d;}[a9j(0x16c)](){const s=a9j,a=document['getElementById']('winner-select'),b=document['getElementById'](s(0x19c)),c=a[s(0x18c)],d=b['value'];if(!c||!d){document['getElementById']('match-result')['style']['display']=s(0x1a8),document[s(0x169)](s(0x182))[s(0x19f)]['display']=s(0x1a8);return;}if(c===d){alert('Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser');return;}const e=this['players'][s(0x1af)](c),f=this[s(0x1b6)]['get'](d);if(!e||!f){console['error']('Player\x20not\x20found');return;}const g=this[s(0x1a1)](e['elo'],f['elo']);this[s(0x1b7)](e,f,g),this[s(0x19d)](e,f,g);}['calculateELO'](a,b,c=0x20){const t=a9j,d=0x1/(0x1+Math['pow'](0xa,(b-a)/0x190)),e=0x1/(0x1+Math[t(0x189)](0xa,(a-b)/0x190)),f=a+c*(0x1-d),g=b+c*(0x0-e);return{'winnerChange':Math['round'](f-a),'loserChange':Math['round'](g-b),'newWinnerRating':Math[t(0x196)](f),'newLoserRating':Math[t(0x196)](g),'expectedScoreWinner':d,'expectedScoreLoser':e};}['displayMatchResult'](a,b,c){const u=a9j;document[u(0x169)](u(0x188))[u(0x17f)]=a[u(0x16b)],document[u(0x169)](u(0x175))['textContent']=u(0x17c)+a['elo'],document[u(0x169)](u(0x1a2))[u(0x17f)]='+'+c['winnerChange'],document['getElementById'](u(0x18f))['textContent']=u(0x18b)+c['newWinnerRating'],document['getElementById']('loser-name')[u(0x17f)]=b['username'],document[u(0x169)]('loser-current-elo')[u(0x17f)]='Current\x20ELO:\x20'+b['elo'],document[u(0x169)](u(0x195))[u(0x17f)]=''+c['loserChange'],document['getElementById'](u(0x1a9))[u(0x17f)]='New\x20ELO:\x20'+c['newLoserRating'];const d=this[u(0x1b3)](a['elo']),e=this[u(0x1b3)](b['elo']);document[u(0x169)](u(0x188))['style'][u(0x17e)]=d,document['getElementById']('loser-name')[u(0x19f)][u(0x17e)]=e,document[u(0x169)]('match-result')[u(0x19f)][u(0x192)]=u(0x1b1);}[a9j(0x19d)](a,b,c){const v=a9j,d='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+a[v(0x16b)]+':\x20'+a['elo']+v(0x1ad)+b[v(0x16b)]+':\x20'+b['elo']+v(0x178)+a[v(0x16b)]+':\x20'+c['expectedScoreWinner']['toFixed'](0x3)+'\x20('+(c['expectedScoreWinner']*0x64)['toFixed'](0x1)+'%\x20chance\x20to\x20win)\x0a\x20\x20'+b[v(0x16b)]+':\x20'+c['expectedScoreLoser']['toFixed'](0x3)+'\x20('+(c[v(0x165)]*0x64)[v(0x180)](0x1)+'%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'+a['username']+':\x20'+a[v(0x1a7)]+'\x20+\x20'+c[v(0x181)]+'\x20=\x20'+c['newWinnerRating']+'\x0a\x20\x20'+b['username']+':\x20'+b[v(0x1a7)]+v(0x176)+c[v(0x17d)]+'\x20=\x20'+c[v(0x1a4)]+'\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a'+(c[v(0x181)]>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(c[v(0x181)]<0x5?'Low\x20ELO\x20gain.':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('calculation-text')[v(0x17f)]=d,document['getElementById']('calculation-details')['style']['display']=v(0x16e);}[a9j(0x1b3)](a){const w=a9j;if(a>=0x7d0)return w(0x18a);else{if(a>=0x708)return'#FFD700';else{if(a>=0x640)return w(0x17a);else{if(a>=0x578)return'#CD7F32';else return'#808080';}}}}[a9j(0x1aa)](a){const x=a9j;if(a>=0x7d0)return x(0x194);else{if(a>=0x708)return x(0x171);else{if(a>=0x640)return'silver';else{if(a>=0x578)return'bronze';else return'unranked';}}}}}document[a9j(0x197)]('DOMContentLoaded',()=>{const y=a9j;document['getElementById'](y(0x19b))&&new ELOCalculator();});