const a49_0x5b1c2d=a49_0x298c,a49_0x189b64=(function(){let _0x44a4e2=!![];return function(_0x25683,_0x460dea){const _0x56ad83=_0x44a4e2?function(){if(_0x460dea){const _0x2e06b5=_0x460dea['apply'](_0x25683,arguments);return _0x460dea=null,_0x2e06b5;}}:function(){};return _0x44a4e2=![],_0x56ad83;};}()),a49_0x4620b7=a49_0x189b64(this,function(){const _0x27e7cd=a49_0x298c;let _0x488831;try{const _0x53cd71=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x488831=_0x53cd71();}catch(_0x5fe6f6){_0x488831=window;}const _0x5ba6e4=_0x488831['console']=_0x488831['console']||{},_0x596ea9=['log','warn',_0x27e7cd(0xe5),'error','exception',_0x27e7cd(0xe3),'trace'];for(let _0x213985=0x0;_0x213985<_0x596ea9['length'];_0x213985++){const _0x1a1933=a49_0x189b64[_0x27e7cd(0xd4)]['prototype']['bind'](a49_0x189b64),_0x297990=_0x596ea9[_0x213985],_0x4f5908=_0x5ba6e4[_0x297990]||_0x1a1933;_0x1a1933['__proto__']=a49_0x189b64['bind'](a49_0x189b64),_0x1a1933['toString']=_0x4f5908['toString']['bind'](_0x4f5908),_0x5ba6e4[_0x297990]=_0x1a1933;}});a49_0x4620b7();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':'Purple','description':a49_0x5b1c2d(0xae)},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':a49_0x5b1c2d(0xea)},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':a49_0x5b1c2d(0xed),'description':'Only\x20the\x20best\x20get\x20this\x20one'},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':a49_0x5b1c2d(0xd7)},'ocean':{'price':0x12c,'name':'Blue','description':a49_0x5b1c2d(0xc8)},'volcanic':{'price':0x1f4,'name':a49_0x5b1c2d(0xaa),'description':a49_0x5b1c2d(0xaf)}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document[a49_0x5b1c2d(0xad)](a49_0x5b1c2d(0xd9),()=>{const _0x42f395=a49_0x5b1c2d;console['log']('🏪\x20Redeem\x20store\x20initializing...'),storeContainer=document[_0x42f395(0xdf)]('store-content'),pointsDisplay=document['getElementById']('user-points'),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x213e5f=>{const _0x4e3c77=a49_0x298c;if(_0x213e5f){console['log']('✅\x20User\x20authenticated:',_0x213e5f[_0x4e3c77(0xb6)]||_0x213e5f[_0x4e3c77(0xd5)]);if(authWarning)authWarning[_0x4e3c77(0xc0)][_0x4e3c77(0xb3)]='none';if(storeContainer)storeContainer[_0x4e3c77(0xc0)]['display']=_0x4e3c77(0xcc);await loadUserData(_0x213e5f),updateThemeButtons();}else{console['log'](_0x4e3c77(0xbd));if(authWarning)authWarning['style']['display']='block';if(storeContainer)storeContainer[_0x4e3c77(0xc0)][_0x4e3c77(0xb3)]='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x4e3c77(0xe0)]=![];}});}function a49_0x298c(_0x140806,_0x118b82){const _0x4620b7=a49_0x4f45();return a49_0x298c=function(_0x189b64,_0x1ea83d){_0x189b64=_0x189b64-0xa9;let _0x4f4554=_0x4620b7[_0x189b64];return _0x4f4554;},a49_0x298c(_0x140806,_0x118b82);}async function loadUserData(_0x15d7a8){const _0x117b68=a49_0x5b1c2d;try{const _0x116ea7=doc(db,'userProfiles',_0x15d7a8['uid']),_0x11da05=await getDoc(_0x116ea7);if(_0x11da05['exists']()){const _0x1a5e2f=_0x11da05['data']();userData={'points':_0x1a5e2f['points']||0x0,'inventory':_0x1a5e2f['inventory']||[],'isAdmin':_0x1a5e2f[_0x117b68(0xb8)]||![]},pointsDisplay&&(pointsDisplay['textContent']=userData[_0x117b68(0xc7)]['toLocaleString']()),window[_0x117b68(0xe0)]=userData['isAdmin'],userData['isAdmin']&&(console[_0x117b68(0xcb)]('👑\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log'](_0x117b68(0xc9)+userData['points']+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items');}else await setDoc(_0x116ea7,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x15d7a8[_0x117b68(0xb6)]||_0x15d7a8['email']?.[_0x117b68(0xd8)]('@')[0x0]||_0x117b68(0xc6)}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window[_0x117b68(0xe0)]=![],console[_0x117b68(0xcb)](_0x117b68(0xe4));}catch(_0x13c49e){console[_0x117b68(0xe6)]('Error\x20loading\x20user\x20data:',_0x13c49e);}}function userOwnsTheme(_0x356437){const _0x3f8e19=a49_0x5b1c2d;if(THEMES[_0x356437]?.[_0x3f8e19(0xc2)]===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x356437);}async function purchaseTheme(_0x57ba75){const _0x37917b=a49_0x5b1c2d,_0x20a85e=auth['currentUser'];if(!_0x20a85e)return showMessage(_0x37917b(0xdb),'error'),![];const _0x214e34=THEMES[_0x57ba75];if(!_0x214e34)return console['error'](_0x37917b(0xb7)+_0x57ba75+'\x20not\x20found'),![];if(userData['points']<_0x214e34['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x214e34['price']-userData[_0x37917b(0xc7)])+_0x37917b(0xbe),'error'),![];if(userOwnsTheme(_0x57ba75))return showMessage(_0x37917b(0xe2)+_0x214e34['name']+_0x37917b(0xda),_0x37917b(0xe5)),![];try{const _0x4126eb=doc(db,'userProfiles',_0x20a85e[_0x37917b(0xb9)]),_0x3a297b=await getDoc(_0x4126eb);if(!_0x3a297b['exists']())return showMessage('User\x20profile\x20not\x20found',_0x37917b(0xe6)),![];const _0x1d857f=_0x3a297b[_0x37917b(0xe7)](),_0x5974aa=_0x1d857f['points']||0x0,_0x34d2b9=_0x1d857f['inventory']||[];if(_0x5974aa<_0x214e34['price'])return showMessage(_0x37917b(0xd1),'error'),![];if(_0x34d2b9[_0x37917b(0xbc)](_0x37917b(0xba)+_0x57ba75))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0x6bbba5=_0x5974aa-_0x214e34['price'],_0x4a9f9f=[..._0x34d2b9,'theme_'+_0x57ba75];return await updateDoc(_0x4126eb,{'points':_0x6bbba5,'inventory':_0x4a9f9f,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,'transactions'),{'userId':_0x20a85e['uid'],'userEmail':_0x20a85e[_0x37917b(0xd5)],'itemId':'theme_'+_0x57ba75,'itemTitle':_0x214e34['name']+'\x20Theme','price':_0x214e34['price'],'type':'purchase','category':'theme','timestamp':serverTimestamp()}),userData['points']=_0x6bbba5,userData['inventory']=_0x4a9f9f,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x37917b(0xc7)]['toLocaleString']()),console[_0x37917b(0xcb)]('✅\x20Purchased\x20'+_0x214e34['name']+'\x20theme\x20for\x20'+_0x214e34['price']+_0x37917b(0xbb)),!![];}catch(_0x22e4ca){return console['error'](_0x37917b(0xcd),_0x22e4ca),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}function applyTheme(_0x5aecf6){const _0x37d84c=a49_0x5b1c2d;if(!userOwnsTheme(_0x5aecf6))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window['ThemeSystem']?(window[_0x37d84c(0xb0)]['switchTheme'](_0x5aecf6),showMessage((THEMES[_0x5aecf6]?.[_0x37d84c(0xee)]||_0x5aecf6)+'\x20theme\x20applied!','success'),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0x349e3a=a49_0x5b1c2d,_0x4fc3f7=document[_0x349e3a(0xa9)]('.themes-grid');if(!_0x4fc3f7){console['error']('Themes\x20container\x20not\x20found');return;}_0x4fc3f7['innerHTML']='',Object['entries'](THEMES)['forEach'](([_0x1a2047,_0x5e3caf])=>{const _0x130949=_0x349e3a,_0x3fbc4a=document['createElement'](_0x130949(0xe1));_0x3fbc4a[_0x130949(0xc1)]='store-item',_0x3fbc4a['dataset'][_0x130949(0xb2)]=_0x1a2047,_0x3fbc4a['dataset']['itemId']='theme_'+_0x1a2047,_0x3fbc4a['dataset'][_0x130949(0xc2)]=_0x5e3caf['price'],_0x3fbc4a['innerHTML']=_0x130949(0xde)+_0x1a2047+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x5e3caf['price']===0x0?'FREE':_0x5e3caf[_0x130949(0xc2)]+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x5e3caf[_0x130949(0xee)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x5e3caf['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4fc3f7['appendChild'](_0x3fbc4a);}),setupThemeButtons();}function setupThemeButtons(){const _0x59ac6c=a49_0x5b1c2d,_0x201141=document[_0x59ac6c(0xab)]('.theme-select-btn');_0x201141['forEach'](_0x3ebb04=>{_0x3ebb04['addEventListener']('click',async _0x5d2629=>{const _0x4bfe65=a49_0x298c;_0x5d2629['preventDefault']();const _0x206022=auth['currentUser'];if(!_0x206022){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes',_0x4bfe65(0xe6));return;}const _0x43c3bf=_0x3ebb04['closest'](_0x4bfe65(0xe8)),_0x102a69=_0x43c3bf['dataset']['theme'],_0x44bbd3=THEMES[_0x102a69];if(!_0x44bbd3){console[_0x4bfe65(0xe6)](_0x4bfe65(0xb7)+_0x102a69+'\x20not\x20found');return;}console[_0x4bfe65(0xcb)]('Theme\x20clicked:\x20'+_0x44bbd3[_0x4bfe65(0xee)]+'\x20('+_0x102a69+')');if(_0x3ebb04['disabled']){_0x44bbd3['price']>0x0&&showMessage(_0x4bfe65(0xeb)+_0x44bbd3['price']+'\x20points\x20to\x20purchase\x20this\x20theme',_0x4bfe65(0xe6));return;}if(_0x3ebb04[_0x4bfe65(0xc4)]==='Current\x20Theme'){showMessage(_0x44bbd3['name']+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x3ebb04['textContent']==='Apply\x20Theme'){applyTheme(_0x102a69),updateThemeButtons();return;}if(_0x3ebb04['textContent']['includes'](_0x4bfe65(0xdc))){const _0x14fe35=window['confirm']('Purchase\x20'+_0x44bbd3['name']+_0x4bfe65(0xb1)+_0x44bbd3[_0x4bfe65(0xc2)]+'\x20points?');if(!_0x14fe35)return;const _0x1d9a1b=await purchaseTheme(_0x102a69);_0x1d9a1b&&(showMessage(_0x44bbd3['name']+'\x20theme\x20purchased!',_0x4bfe65(0xd2)),applyTheme(_0x102a69),updateThemeButtons());return;}userOwnsTheme(_0x102a69)?applyTheme(_0x102a69):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x53c7a7=a49_0x5b1c2d,_0x51683a=window[_0x53c7a7(0xb0)]?window['ThemeSystem'][_0x53c7a7(0xbf)]():'default',_0x27a70c=auth[_0x53c7a7(0xc3)];document[_0x53c7a7(0xab)](_0x53c7a7(0xcf))[_0x53c7a7(0xe9)](_0x5c63c1=>{const _0x118106=_0x53c7a7,_0x5baf56=_0x5c63c1[_0x118106(0xec)]('[data-theme]'),_0x2d994a=_0x5baf56['dataset']['theme'],_0x308c93=THEMES[_0x2d994a];if(!_0x308c93)return;_0x5c63c1['disabled']=![],_0x5c63c1['style']['opacity']='',_0x5c63c1['style']['cursor']='pointer',_0x5c63c1[_0x118106(0xd0)]['remove']('current-theme','apply-theme',_0x118106(0xdd),'cannot-afford','sign-in-free',_0x118106(0xb5));if(!_0x27a70c){_0x308c93['price']===0x0?(_0x5c63c1['textContent']='Sign\x20in\x20to\x20Apply',_0x5c63c1[_0x118106(0xd0)]['add']('sign-in-free')):(_0x5c63c1['textContent']='Sign\x20in\x20to\x20Purchase',_0x5c63c1['disabled']=!![],_0x5c63c1['style'][_0x118106(0xd6)]='0.7',_0x5c63c1['classList']['add'](_0x118106(0xb5)));return;}if(_0x2d994a===_0x51683a){_0x5c63c1[_0x118106(0xc4)]=_0x118106(0xce),_0x5c63c1[_0x118106(0xd0)][_0x118106(0xca)]('current-theme'),_0x5c63c1['disabled']=!![],_0x5c63c1['style']['cursor']=_0x118106(0xac);return;}if(userOwnsTheme(_0x2d994a)){_0x5c63c1['textContent']='Apply\x20Theme',_0x5c63c1['classList']['add']('apply-theme');return;}if(userData['points']>=_0x308c93[_0x118106(0xc2)]){_0x5c63c1['textContent']='Buy\x20for\x20'+_0x308c93['price']+'\x20Points',_0x5c63c1[_0x118106(0xd0)][_0x118106(0xca)]('can-afford');return;}_0x5c63c1['textContent']=_0x118106(0xc5)+_0x308c93['price']+'\x20Points',_0x5c63c1[_0x118106(0xd0)]['add']('cannot-afford'),_0x5c63c1[_0x118106(0xc0)][_0x118106(0xd6)]='0.5',_0x5c63c1['disabled']=!![],_0x5c63c1['style']['cursor']='not-allowed';});}function showMessage(_0x3491e8,_0xec6b3e='info'){const _0x2a6e2d=a49_0x5b1c2d,_0x59117a=document['getElementById']('store-message');_0x59117a&&_0x59117a['remove']();const _0x1b350b=document['createElement']('div');_0x1b350b['id']='store-message',_0x1b350b['className']='store-message\x20store-message-'+_0xec6b3e,_0x1b350b['textContent']=_0x3491e8,document[_0x2a6e2d(0xb4)]['appendChild'](_0x1b350b),requestAnimationFrame(()=>{const _0x352465=_0x2a6e2d;_0x1b350b[_0x352465(0xd0)]['add']('visible');}),setTimeout(()=>{_0x1b350b['classList']['remove']('visible'),setTimeout(()=>{_0x1b350b['parentNode']&&_0x1b350b['remove']();},0x12c);},0xfa0);}function a49_0x4f45(){const _0x256fec=['querySelector','Red','querySelectorAll','default','addEventListener','Can\x27t\x20get\x20enough','For\x20the\x20angry\x20type.','ThemeSystem','\x20theme\x20for\x20','theme','display','body','sign-in-paid','displayName','Theme\x20','isAdmin','uid','theme_','\x20points','includes','❌\x20User\x20not\x20authenticated','\x20more\x20points.','getCurrentTheme','style','className','price','currentUser','textContent','Need\x20','User','points','This\x20one\x20is\x20really\x20pretty','User\x20data\x20loaded\x20-\x20Points:\x20','add','log','block','Purchase\x20failed:','Current\x20Theme','.theme-select-btn','classList','Insufficient\x20points','success','RedeemStore','constructor','email','opacity','You\x20can\x20see\x20better!','split','DOMContentLoaded','\x20theme','Please\x20sign\x20in\x20to\x20purchase\x20themes','Buy','can-afford','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-','getElementById','isUserAdmin','div','You\x20already\x20own\x20the\x20','table','New\x20user\x20profile\x20created','info','error','data','[data-theme]','forEach','This\x20theme\x20makes\x20me\x20happy','You\x20need\x20','closest','Gold','name'];a49_0x4f45=function(){return _0x256fec;};return a49_0x4f45();}window[a49_0x5b1c2d(0xd3)]={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console[a49_0x5b1c2d(0xcb)]('🏪\x20Redeem\x20store\x20loaded');