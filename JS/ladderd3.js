const a33_0x1bb017=a33_0x3b47,a33_0x4658c0=(function(){let _0x500d3a=!![];return function(_0xb99f31,_0x3edb60){const _0x364da0=_0x500d3a?function(){if(_0x3edb60){const _0x2c9345=_0x3edb60['apply'](_0xb99f31,arguments);return _0x3edb60=null,_0x2c9345;}}:function(){};return _0x500d3a=![],_0x364da0;};}()),a33_0x39608b=a33_0x4658c0(this,function(){const _0x41909d=a33_0x3b47;let _0x5f29b3;try{const _0x3e2296=Function('return\x20(function()\x20'+_0x41909d(0x10f)+');');_0x5f29b3=_0x3e2296();}catch(_0x9a1c8){_0x5f29b3=window;}const _0x30e787=_0x5f29b3[_0x41909d(0xcc)]=_0x5f29b3['console']||{},_0xfb4c4=['log',_0x41909d(0xcd),'info',_0x41909d(0xc7),'exception',_0x41909d(0xce),'trace'];for(let _0x148229=0x0;_0x148229<_0xfb4c4['length'];_0x148229++){const _0x43787c=a33_0x4658c0['constructor']['prototype'][_0x41909d(0xf9)](a33_0x4658c0),_0x365749=_0xfb4c4[_0x148229],_0x1be74d=_0x30e787[_0x365749]||_0x43787c;_0x43787c[_0x41909d(0xd6)]=a33_0x4658c0['bind'](a33_0x4658c0),_0x43787c[_0x41909d(0xeb)]=_0x1be74d[_0x41909d(0xeb)]['bind'](_0x1be74d),_0x30e787[_0x365749]=_0x43787c;}});a33_0x39608b();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a33_0x3b47(_0xea44dc,_0x596ed3){const _0x39608b=a33_0x1a41();return a33_0x3b47=function(_0x4658c0,_0x106589){_0x4658c0=_0x4658c0-0xc2;let _0x1a41ad=_0x39608b[_0x4658c0];return _0x1a41ad;},a33_0x3b47(_0xea44dc,_0x596ed3);}import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x4f686e from'./firebase-idle-wrapper.js';const styleEl=document[a33_0x1bb017(0xd7)]('style');styleEl[a33_0x1bb017(0xd8)]='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x56c31a=![]){const _0x14ba9a=a33_0x1bb017,_0x221f8c=document[_0x14ba9a(0xfe)]('#ladder-d3\x20tbody');if(!_0x221f8c){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x221f8c['innerHTML']=_0x14ba9a(0xf6);try{const _0x14a4a6=Date['now']();if(!_0x56c31a&&playerCacheD3[_0x14ba9a(0x108)]&&_0x14a4a6-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3[_0x14ba9a(0x108)]);return;}const _0x5c7a86=collection(db,'playersD3'),_0x4b9c99=await getDocs(_0x5c7a86),_0x459721=[];_0x4b9c99['forEach'](_0x3369bd=>{const _0x1083dd=_0x14ba9a,_0x15a128=_0x3369bd['data']();_0x15a128['username']&&_0x459721[_0x1083dd(0x101)]({..._0x15a128,'id':_0x3369bd['id'],'elo':_0x15a128[_0x1083dd(0xfd)]||0x0,'position':_0x15a128['position']||Number['MAX_SAFE_INTEGER']});});const _0x5bd572=collection(db,'userProfiles'),_0x3facc7=await getDocs(_0x5bd572),_0x78c3b1=new Map();_0x3facc7['forEach'](_0x50ceaf=>{const _0x3a80da=_0x14ba9a,_0xfebd2=_0x50ceaf['data']();_0xfebd2['username']&&_0x78c3b1['set'](_0xfebd2['username'][_0x3a80da(0x106)](),_0xfebd2);});for(const _0x48dec9 of _0x459721){const _0x325c26=_0x48dec9['username']['toLowerCase']();if(_0x78c3b1['has'](_0x325c26)){const _0x524ab6=_0x78c3b1['get'](_0x325c26);_0x524ab6['country']&&(_0x48dec9[_0x14ba9a(0xda)]=_0x524ab6['country'][_0x14ba9a(0x106)]());}}const _0x19d378=_0x459721['map'](_0x1fbd9c=>_0x1fbd9c['username']),_0x63ac47=await fetchBatchMatchStatsD3(_0x19d378);_0x459721['sort']((_0x3f21bf,_0x27f94f)=>{const _0x993fc5=_0x14ba9a,_0x4498ce=_0x63ac47['get'](_0x3f21bf[_0x993fc5(0xe6)])?.['totalMatches']||0x0,_0x5609dd=_0x63ac47['get'](_0x27f94f['username'])?.['totalMatches']||0x0;if(_0x4498ce===0x0!==(_0x5609dd===0x0))return _0x4498ce===0x0?0x1:-0x1;return(_0x3f21bf[_0x993fc5(0x105)]||0x3e7)-(_0x27f94f['position']||0x3e7);}),_0x459721['forEach']((_0x351582,_0x30a05f)=>{_0x351582['position']=_0x30a05f+0x1;}),playerCacheD3[_0x14ba9a(0x108)]=_0x459721,playerCacheD3['timestamp']=_0x14a4a6,updateLadderDisplayD3(_0x459721);}catch(_0x3b0c1a){console[_0x14ba9a(0xc7)](_0x14ba9a(0xdd),_0x3b0c1a),_0x221f8c['innerHTML']=_0x14ba9a(0x111)+_0x3b0c1a['message']+_0x14ba9a(0xef);}}function calculateStreakDays(_0x23ca5e){const _0x2d30f6=a33_0x1bb017;if(!_0x23ca5e)return 0x0;const _0x4fd311=_0x23ca5e[_0x2d30f6(0x103)](),_0x62d986=new Date(),_0x31c9a9=Math['abs'](_0x62d986-_0x4fd311);return Math[_0x2d30f6(0x10c)](_0x31c9a9/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x40ec82,_0x380b2e){const _0x35e50c=a33_0x1bb017;try{const _0x293e75=collection(db,_0x35e50c(0xe4)),_0x4c093a=await getDocs(_0x293e75),_0x2c4ef9=[];_0x4c093a['forEach'](_0x1c1ef0=>{_0x2c4ef9['push']({'id':_0x1c1ef0['id'],..._0x1c1ef0['data']()});});const _0x3c51a1=_0x2c4ef9['find'](_0x44d17c=>_0x44d17c[_0x35e50c(0xe6)]===_0x40ec82),_0x39efa0=_0x2c4ef9['find'](_0x57267d=>_0x57267d['username']===_0x380b2e);if(!_0x3c51a1||!_0x39efa0){console['error'](_0x35e50c(0xe7));return;}if(_0x3c51a1['position']>_0x39efa0['position']){const _0xa64e46=_0x39efa0['position'];for(const _0x9a0a27 of _0x2c4ef9){_0x9a0a27[_0x35e50c(0x105)]>=_0x39efa0['position']&&_0x9a0a27[_0x35e50c(0x105)]<_0x3c51a1['position']&&_0x9a0a27['username']!==_0x40ec82&&await updateDoc(doc(db,'playersD3',_0x9a0a27['id']),{'position':_0x9a0a27[_0x35e50c(0x105)]+0x1});}await updateDoc(doc(db,'playersD3',_0x3c51a1['id']),{'position':_0xa64e46});if(_0xa64e46===0x1){const _0x48e64e=doc(db,_0x35e50c(0xe4),_0x3c51a1['id']),_0x4e2695=await getDoc(_0x48e64e);!_0x4e2695[_0x35e50c(0x108)]()['firstPlaceDate']&&await updateDoc(_0x48e64e,{'firstPlaceDate':Timestamp[_0x35e50c(0x100)]()});}if(_0x39efa0[_0x35e50c(0x105)]===0x1){const _0x3d759a=doc(db,'playersD3',_0x39efa0['id']);await updateDoc(_0x3d759a,{'firstPlaceDate':null});}}}catch(_0x26038c){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x26038c);}}async function updateLadderDisplayD3(_0x48cb61){const _0x218077=a33_0x1bb017;_0x48cb61[_0x218077(0x104)]((_0x14ef0c,_0x2ca75b)=>_0x14ef0c['position']-_0x2ca75b['position']);const _0x38b209=document['querySelector']('#ladder-d3\x20tbody');if(!_0x38b209)return;_0x38b209['innerHTML']='';const _0x5f0275=_0x48cb61[_0x218077(0xed)](_0x1ae2db=>_0x1ae2db['username']),_0x56299b=await fetchBatchMatchStatsD3(_0x5f0275),_0x1562f8=document['querySelector'](_0x218077(0xec));_0x1562f8[_0x218077(0xc6)]=_0x218077(0xd0);const _0x57defd=_0x48cb61[_0x218077(0xed)](_0x5827c6=>{const _0x1b1d56=_0x218077,_0x51c5b4=_0x56299b['get'](_0x5827c6[_0x1b1d56(0xe6)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x5827c6,_0x51c5b4);})['join']('');_0x38b209[_0x218077(0xc6)]=_0x57defd,getPlayersLastEloChangesD3(_0x5f0275)[_0x218077(0xe5)](_0x11bdc0=>{const _0x14c154=_0x218077,_0x50a000=new Map();_0x38b209['querySelectorAll']('tr')['forEach']((_0x33fc78,_0x435546)=>{_0x435546<_0x5f0275['length']&&_0x50a000['set'](_0x5f0275[_0x435546],_0x33fc78);}),_0x11bdc0[_0x14c154(0xf2)]((_0x31ab6d,_0x2f6684)=>{const _0x186f5b=_0x14c154,_0x2f112c=_0x50a000[_0x186f5b(0xc8)](_0x2f6684);if(_0x2f112c&&_0x31ab6d!==0x0){const _0x240a38=_0x2f112c[_0x186f5b(0xfe)]('td:nth-child(3)');if(_0x240a38){const _0x527394=_0x31ab6d>0x0?'+'+_0x31ab6d:''+_0x31ab6d,_0x100f57=_0x240a38[_0x186f5b(0xfe)](_0x186f5b(0xf3));_0x100f57&&(_0x100f57['textContent']=_0x527394,_0x100f57['style']['color']=_0x31ab6d>0x0?'#4CAF50':'#F44336',_0x100f57['style']['fontWeight']='bold',_0x100f57['style']['fontSize']='0.85em',_0x100f57[_0x186f5b(0xcb)][_0x186f5b(0xf1)]='inline',_0x100f57[_0x186f5b(0xcb)][_0x186f5b(0x109)]='visible',_0x100f57['style']['opacity']='1');}}});})['catch'](_0x23ae60=>console[_0x218077(0xc7)]('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x23ae60));}async function fetchBatchMatchStatsD3(_0x1062cb){const _0x4060be=a33_0x1bb017,_0x30ac10=new Map();try{const _0x4cb5aa=collection(db,'approvedMatchesD3'),_0x272bf1=await getDocs(_0x4cb5aa);_0x272bf1[_0x4060be(0xf2)](_0x419878=>{const _0x23062c=_0x4060be,_0x4bad42=_0x419878['data']();if(_0x1062cb['includes'](_0x4bad42[_0x23062c(0xe1)])){const _0x1029f0=_0x4bad42['winnerUsername'];!_0x30ac10['has'](_0x1029f0)&&_0x30ac10['set'](_0x1029f0,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x2add3b=_0x30ac10['get'](_0x1029f0);_0x2add3b[_0x23062c(0x110)]++,_0x2add3b['totalMatches']++,_0x2add3b['totalKills']+=parseInt(_0x4bad42[_0x23062c(0xd5)])||0x0,_0x2add3b[_0x23062c(0xd4)]+=parseInt(_0x4bad42[_0x23062c(0xf4)])||0x0;}if(_0x1062cb['includes'](_0x4bad42['loserUsername'])){const _0x4ba690=_0x4bad42['loserUsername'];!_0x30ac10['has'](_0x4ba690)&&_0x30ac10[_0x23062c(0xd9)](_0x4ba690,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x395773=_0x30ac10['get'](_0x4ba690);_0x395773['losses']++,_0x395773['totalMatches']++,_0x395773['totalKills']+=parseInt(_0x4bad42['loserScore'])||0x0,_0x395773[_0x23062c(0xd4)]+=parseInt(_0x4bad42['winnerScore'])||0x0;}}),_0x30ac10['forEach'](_0x5cf380=>{const _0x4b35a3=_0x4060be;_0x5cf380[_0x4b35a3(0xf5)]=_0x5cf380[_0x4b35a3(0xd4)]>0x0?(_0x5cf380['totalKills']/_0x5cf380['totalDeaths'])['toFixed'](0x2):_0x5cf380['totalKills'],_0x5cf380['winRate']=_0x5cf380[_0x4b35a3(0x10d)]>0x0?(_0x5cf380['wins']/_0x5cf380['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x5c4a5f){console['error']('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x5c4a5f);}return _0x30ac10;}function a33_0x1a41(){const _0x18547b=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','desc','entries','innerHTML','error','get','D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...','change','style','console','warn','table','log','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20','filter','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','\x20fallback\x20entries','totalDeaths','winnerScore','__proto__','createElement','textContent','set','country','D3:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20loading\x20D3\x20ladder:','has','length','size','winnerUsername','\x20fallback\x20ELO\x20change:\x20','pilot','playersD3','then','username','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','#C0C0C0','\x20entries\x20in\x20eloHistoryD3','toString','#ladder-d3\x20thead\x20tr','map','D3:\x20Error\x20fetching\x20ELO\x20history:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','playerUsername','display','forEach','.trend-indicator','loserScore','kda','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>','player','timestamp','bind','find','playerId','gray','eloRating','querySelector','newElo','now','push','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','toDate','sort','position','toLowerCase','previousElo','data','visibility','D3:\x20Final\x20ELO\x20changes:','from','ceil','totalMatches','string','{}.constructor(\x22return\x20this\x22)(\x20)','wins','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20','D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:','D3:\x20Player\x20ID\x20mappings:'];a33_0x1a41=function(){return _0x18547b;};return a33_0x1a41();}function createPlayerRowD3(_0x3a7886,_0x364372){const _0x4e3213=a33_0x1bb017,_0x117603=parseFloat(_0x3a7886['elo'])||0x0;let _0xd9f51c=_0x4e3213(0xfc);if(_0x117603>=0x7d0)_0xd9f51c='#50C878';else{if(_0x117603>=0x708)_0xd9f51c='#FFD700';else{if(_0x117603>=0x640)_0xd9f51c=_0x4e3213(0xe9);else _0x117603>=0x578&&(_0xd9f51c='#CD7F32');}}let _0x49c421='';return _0x3a7886[_0x4e3213(0xda)]&&(_0x49c421='<img\x20src=\x22../images/flags/'+_0x3a7886['country']['toLowerCase']()+_0x4e3213(0xe8)+_0x3a7886['country']+_0x4e3213(0x102)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3a7886[_0x4e3213(0x105)]+_0x4e3213(0xd2)+encodeURIComponent(_0x3a7886[_0x4e3213(0xe6)])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0xd9f51c+_0x4e3213(0xc3)+_0x3a7886['username']+_0x4e3213(0xc2)+_0x49c421+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0xd9f51c+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x117603+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x364372['totalMatches']+_0x4e3213(0xdc)+_0x364372['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x364372['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x364372[_0x4e3213(0xf5)]+_0x4e3213(0xdc)+_0x364372['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD3(_0x5e568a){const _0x2352fb=a33_0x1bb017,_0x3f7216=new Map();_0x5e568a['forEach'](_0x15d544=>_0x3f7216['set'](_0x15d544,0x0));try{console[_0x2352fb(0xcf)](_0x2352fb(0x112),_0x5e568a);const _0x567b90=new Map(),_0x2c980d=await getDocs(collection(db,_0x2352fb(0xe4)));_0x2c980d[_0x2352fb(0xf2)](_0x407d6d=>{const _0x4cc2ee=_0x407d6d['data']();_0x4cc2ee['username']&&_0x567b90['set'](_0x407d6d['id'],_0x4cc2ee['username']);}),console['log'](_0x2352fb(0x113),Array[_0x2352fb(0x10b)](_0x567b90['entries']()));const _0x2c1739=collection(db,'eloHistoryD3'),_0x29374d=query(_0x2c1739,orderBy(_0x2352fb(0xf8),'desc'),limit(0x64)),_0x40dfce=await getDocs(_0x29374d);_0x40dfce['empty']?console[_0x2352fb(0xcf)]('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console['log']('D3:\x20Found\x20'+_0x40dfce['size']+_0x2352fb(0xea));const _0x748da2=new Map();_0x40dfce[_0x2352fb(0xf2)](_0x11faf5=>{const _0x2b94ae=_0x2352fb,_0x2bf8a1=_0x11faf5['data']();let _0x3bd521=null;if(_0x2bf8a1[_0x2b94ae(0xe6)])_0x3bd521=_0x2bf8a1[_0x2b94ae(0xe6)];else{if(_0x2bf8a1['playerUsername'])_0x3bd521=_0x2bf8a1[_0x2b94ae(0xf0)];else{if(_0x2bf8a1[_0x2b94ae(0xf7)]&&typeof _0x2bf8a1['player']===_0x2b94ae(0x10e))_0x3bd521=_0x2bf8a1['player'];else{if(_0x2bf8a1[_0x2b94ae(0xf7)]&&_0x567b90[_0x2b94ae(0xde)](_0x2bf8a1['player']))_0x3bd521=_0x567b90['get'](_0x2bf8a1['player']);else _0x2bf8a1['playerId']&&_0x567b90['has'](_0x2bf8a1[_0x2b94ae(0xfb)])&&(_0x3bd521=_0x567b90['get'](_0x2bf8a1['playerId']));}}}(_0x2bf8a1['username']===_0x2b94ae(0xe3)||_0x2bf8a1['playerUsername']==='pilot'||_0x2bf8a1[_0x2b94ae(0xf7)]&&_0x567b90[_0x2b94ae(0xc8)](_0x2bf8a1['player'])==='pilot')&&console[_0x2b94ae(0xcf)]('D3:\x20Found\x20pilot\x20entry:',_0x2bf8a1),_0x3bd521&&_0x5e568a['includes'](_0x3bd521)&&(!_0x748da2[_0x2b94ae(0xde)](_0x3bd521)&&_0x748da2['set'](_0x3bd521,[]),_0x748da2['get'](_0x3bd521)[_0x2b94ae(0x101)]({..._0x2bf8a1,'timestamp':_0x2bf8a1['timestamp']?.['seconds']||0x0}));}),console['log']('D3:\x20Found\x20entries\x20for\x20'+_0x748da2[_0x2352fb(0xe0)]+'\x20players'),_0x748da2['forEach']((_0x1373f5,_0x4b916f)=>{const _0x460d2d=_0x2352fb;if(_0x1373f5[_0x460d2d(0xdf)]>0x0){_0x1373f5['sort']((_0x1f73ee,_0x4d7bf1)=>_0x4d7bf1['timestamp']-_0x1f73ee['timestamp']);const _0x5f0339=_0x1373f5[_0x460d2d(0xfa)](_0x24002d=>_0x24002d['change']!==undefined||_0x24002d[_0x460d2d(0xff)]!==undefined&&_0x24002d['previousElo']!==undefined);if(_0x5f0339){let _0x384899;if(_0x5f0339['change']!==undefined)_0x384899=_0x5f0339[_0x460d2d(0xca)];else _0x5f0339['newElo']!==undefined&&_0x5f0339['previousElo']!==undefined&&(_0x384899=_0x5f0339['newElo']-_0x5f0339[_0x460d2d(0x107)]);_0x384899!==undefined&&(_0x3f7216['set'](_0x4b916f,_0x384899),console['log'](_0x460d2d(0xdb)+_0x4b916f+'\x20ELO\x20change:\x20'+_0x384899));}}});if(_0x748da2[_0x2352fb(0xe0)]===0x0){console[_0x2352fb(0xcf)](_0x2352fb(0xc9));const _0xcf115a=collection(db,'eloHistory'),_0x2f008e=query(_0xcf115a,where('gameMode','==','D3'),orderBy('timestamp',_0x2352fb(0xc4)),limit(0x32));try{const _0x4afd61=await getDocs(_0x2f008e);console['log']('D3:\x20Found\x20'+_0x4afd61[_0x2352fb(0xe0)]+_0x2352fb(0xd3)),_0x4afd61['forEach'](_0x579752=>{const _0x437bcc=_0x2352fb,_0x38cb7f=_0x579752['data']();let _0x2c5d3f=_0x38cb7f['username']||_0x38cb7f[_0x437bcc(0xf0)];!_0x2c5d3f&&_0x38cb7f['player']&&_0x567b90['has'](_0x38cb7f['player'])&&(_0x2c5d3f=_0x567b90[_0x437bcc(0xc8)](_0x38cb7f['player']));if(_0x2c5d3f&&_0x5e568a['includes'](_0x2c5d3f)){const _0x4a5944=_0x38cb7f['change']||(_0x38cb7f['newElo']!==undefined&&_0x38cb7f[_0x437bcc(0x107)]!==undefined?_0x38cb7f['newElo']-_0x38cb7f[_0x437bcc(0x107)]:0x0);_0x4a5944!==0x0&&(_0x3f7216['set'](_0x2c5d3f,_0x4a5944),console['log']('D3:\x20'+_0x2c5d3f+_0x437bcc(0xe2)+_0x4a5944));}});}catch(_0x1a530f){console['log']('D3:\x20Fallback\x20query\x20failed:',_0x1a530f);}}const _0x575d1d=Array['from'](_0x3f7216[_0x2352fb(0xc5)]())[_0x2352fb(0xd1)](([_0x4365b7,_0x4c5e0c])=>_0x4c5e0c!==0x0);console['log'](_0x2352fb(0x10a),_0x575d1d);}catch(_0x204acf){console[_0x2352fb(0xc7)](_0x2352fb(0xee),_0x204acf);}return _0x3f7216;}export{displayLadderD3,updatePlayerPositions};