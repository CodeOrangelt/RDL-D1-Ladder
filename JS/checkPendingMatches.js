function a10_0x50f9(){const _0x39faa0=['playersD3','now','block','body','999','top','apply','currentUser','disconnect','position','getItem','length','exception','border','toString','docs','currentUsername','prototype','addEventListener','playersD2','data','#ff3b30','report-match-notification','zIndex','console','style','bind','users','borderRadius','username','uid','pendingMatchesD2','approved','empty','userId','info'];a10_0x50f9=function(){return _0x39faa0;};return a10_0x50f9();}const a10_0x43fc15=a10_0x5894,a10_0x2a3269=(function(){let _0xcc63a0=!![];return function(_0xc8a270,_0x18cfe5){const _0x5cb972=_0xcc63a0?function(){const _0x5d605e=a10_0x5894;if(_0x18cfe5){const _0x151988=_0x18cfe5[_0x5d605e(0x1d8)](_0xc8a270,arguments);return _0x18cfe5=null,_0x151988;}}:function(){};return _0xcc63a0=![],_0x5cb972;};}()),a10_0x3b50ff=a10_0x2a3269(this,function(){const _0x37cfe4=a10_0x5894;let _0x50d6ad;try{const _0x2b1ce5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x50d6ad=_0x2b1ce5();}catch(_0x432821){_0x50d6ad=window;}const _0x528072=_0x50d6ad[_0x37cfe4(0x1ea)]=_0x50d6ad['console']||{},_0x5f0fd8=['log','warn',_0x37cfe4(0x1f5),'error',_0x37cfe4(0x1de),'table','trace'];for(let _0x2b1d3e=0x0;_0x2b1d3e<_0x5f0fd8[_0x37cfe4(0x1dd)];_0x2b1d3e++){const _0x557d5b=a10_0x2a3269['constructor'][_0x37cfe4(0x1e3)]['bind'](a10_0x2a3269),_0x4183b1=_0x5f0fd8[_0x2b1d3e],_0x17f06c=_0x528072[_0x4183b1]||_0x557d5b;_0x557d5b['__proto__']=a10_0x2a3269[_0x37cfe4(0x1ec)](a10_0x2a3269),_0x557d5b['toString']=_0x17f06c[_0x37cfe4(0x1e0)]['bind'](_0x17f06c),_0x528072[_0x4183b1]=_0x557d5b;}});a10_0x3b50ff();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x4b4752=![]){const _0x561c40=a10_0x5894,_0x2c66c7=Date['now'](),_0x4d5068=checkNotificationCache();if(_0x4d5068!==null&&!_0x4b4752){updateNotificationDot(_0x4d5068);if(_0x2c66c7-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x2c66c7;const _0x12d257=auth[_0x561c40(0x1d9)];if(!_0x12d257){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x1e88bc,_0x12d4e1,_0x4db85c]=await Promise['all']([checkForPendingMatchesInCollection(_0x12d257,'pendingMatches'),checkForPendingMatchesInCollection(_0x12d257,_0x561c40(0x1f1)),checkForPendingMatchesInCollection(_0x12d257,'pendingMatchesD3')]),_0x328a9e=_0x1e88bc||_0x12d4e1||_0x4db85c;updateNotificationDot(_0x328a9e),updateNotificationCache(_0x328a9e);}catch(_0x51e447){console['error']('Error\x20checking\x20pending\x20matches:',_0x51e447);}}async function checkForPendingMatchesInCollection(_0x9f2adc,_0x4d4588){const _0xcd163e=a10_0x5894,_0x2f25b6=_0x9f2adc[_0xcd163e(0x1f0)],_0x1f8aa8=_0x9f2adc['email'],_0x9b0be7=query(collection(db,_0x4d4588),where('winnerId','==',_0x2f25b6),where('approved','==',![])),_0x5b87db=await getDocs(_0x9b0be7);if(!_0x5b87db[_0xcd163e(0x1f3)])return!![];if(_0x1f8aa8){const _0x38377c=query(collection(db,_0x4d4588),where('winnerEmail','==',_0x1f8aa8),where(_0xcd163e(0x1f2),'==',![])),_0x1662d4=await getDocs(_0x38377c);if(!_0x1662d4['empty'])return!![];}let _0x10d47b=await getUsernameFromAllSources(_0x9f2adc);if(_0x10d47b){const _0x1dc966=query(collection(db,_0x4d4588),where('winnerUsername','==',_0x10d47b),where('approved','==',![])),_0x5d6193=await getDocs(_0x1dc966);if(!_0x5d6193['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0xab7011){const _0x3a8069=a10_0x5894,_0xf7e2de=localStorage['getItem']('currentUsername');if(_0xf7e2de)return _0xf7e2de;try{const [_0x5adff9,_0x33422a,_0x4db2d7]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x3a8069(0x1f4),'==',_0xab7011['uid']))),getDocs(query(collection(db,_0x3a8069(0x1e5)),where(_0x3a8069(0x1f4),'==',_0xab7011['uid']))),getDocs(query(collection(db,_0x3a8069(0x1d2)),where(_0x3a8069(0x1f4),'==',_0xab7011[_0x3a8069(0x1f0)])))]);if(!_0x5adff9['empty']){const _0x3b4d7f=_0x5adff9['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x3b4d7f),_0x3b4d7f;}if(!_0x33422a[_0x3a8069(0x1f3)]){const _0x131b6e=_0x33422a['docs'][0x0][_0x3a8069(0x1e6)]()[_0x3a8069(0x1ef)];return localStorage['setItem'](_0x3a8069(0x1e2),_0x131b6e),_0x131b6e;}if(!_0x4db2d7[_0x3a8069(0x1f3)]){const _0x4c2284=_0x4db2d7[_0x3a8069(0x1e1)][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x4c2284),_0x4c2284;}const _0x111e96=await getDoc(doc(db,_0x3a8069(0x1ed),_0xab7011[_0x3a8069(0x1f0)]));if(_0x111e96['exists']()&&_0x111e96[_0x3a8069(0x1e6)]()['username']){const _0x31d7e7=_0x111e96['data']()[_0x3a8069(0x1ef)];return localStorage['setItem'](_0x3a8069(0x1e2),_0x31d7e7),_0x31d7e7;}}catch(_0xb64d51){console['error']('Error\x20fetching\x20username:',_0xb64d51);}if(_0xab7011['email'])return _0xab7011['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x47476e){const _0x1c1ed0=a10_0x5894,_0x378eb1={'status':_0x47476e,'timestamp':Date[_0x1c1ed0(0x1d3)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x378eb1));}function checkNotificationCache(){const _0x248943=a10_0x5894,_0x2a1271=localStorage[_0x248943(0x1dc)](NOTIFICATION_CACHE_KEY);if(!_0x2a1271)return null;try{const {status:_0x2d5963,timestamp:_0x310f30}=JSON['parse'](_0x2a1271),_0x4d7ec3=Date['now']();if(_0x4d7ec3-_0x310f30<CACHE_EXPIRY)return _0x2d5963;}catch(_0x237616){}return null;}export function updateNotificationDot(_0xb6030b){const _0x3936dd=a10_0x5894,_0x137948=new MutationObserver((_0x31b8b1,_0x1d7985)=>{const _0x26e40a=a10_0x5894,_0x25ca36=document['getElementById'](_0x26e40a(0x1e8));_0x25ca36&&(updateDotStyle(_0x25ca36,_0xb6030b),_0x1d7985['disconnect']());});_0x137948['observe'](document[_0x3936dd(0x1d5)],{'childList':!![],'subtree':!![]});const _0x8a1976=document['getElementById']('report-match-notification');_0x8a1976&&(updateDotStyle(_0x8a1976,_0xb6030b),_0x137948[_0x3936dd(0x1da)]()),setTimeout(()=>_0x137948['disconnect'](),0x1388);}function updateDotStyle(_0x45e69d,_0x4ed3c9){const _0x54fdee=a10_0x5894;_0x4ed3c9?(_0x45e69d[_0x54fdee(0x1eb)]['display']=_0x54fdee(0x1d4),_0x45e69d['style']['backgroundColor']=_0x54fdee(0x1e7),_0x45e69d['style']['width']='10px',_0x45e69d['style']['height']='10px',_0x45e69d[_0x54fdee(0x1eb)][_0x54fdee(0x1db)]='absolute',_0x45e69d[_0x54fdee(0x1eb)][_0x54fdee(0x1d7)]='-5px',_0x45e69d['style']['right']='-8px',_0x45e69d[_0x54fdee(0x1eb)][_0x54fdee(0x1ee)]='50%',_0x45e69d[_0x54fdee(0x1eb)][_0x54fdee(0x1df)]='2px\x20solid\x20white',_0x45e69d['style'][_0x54fdee(0x1e9)]=_0x54fdee(0x1d6)):_0x45e69d['style']['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}function a10_0x5894(_0x7f2723,_0x5a6512){const _0x3b50ff=a10_0x50f9();return a10_0x5894=function(_0x2a3269,_0x178e2f){_0x2a3269=_0x2a3269-0x1d2;let _0x50f9d3=_0x3b50ff[_0x2a3269];return _0x50f9d3;},a10_0x5894(_0x7f2723,_0x5a6512);}document[a10_0x43fc15(0x1e4)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});