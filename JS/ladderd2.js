(function(_0x135f01,_0x470d4d){const _0x126b3b=a32_0x5201,_0x35599a=_0x135f01();while(!![]){try{const _0x5db916=parseInt(_0x126b3b(0x1c7))/0x1+parseInt(_0x126b3b(0x1d2))/0x2*(parseInt(_0x126b3b(0x1d7))/0x3)+-parseInt(_0x126b3b(0x220))/0x4+parseInt(_0x126b3b(0x1fb))/0x5*(-parseInt(_0x126b3b(0x203))/0x6)+parseInt(_0x126b3b(0x224))/0x7*(-parseInt(_0x126b3b(0x1de))/0x8)+parseInt(_0x126b3b(0x1ec))/0x9+-parseInt(_0x126b3b(0x1f9))/0xa*(-parseInt(_0x126b3b(0x226))/0xb);if(_0x5db916===_0x470d4d)break;else _0x35599a['push'](_0x35599a['shift']());}catch(_0x8a8953){_0x35599a['push'](_0x35599a['shift']());}}}(a32_0x5c62,0xb2a4e));const a32_0x2cb3d5=(function(){let _0x1416ae=!![];return function(_0x45fd72,_0x3a196e){const _0x4456f0=_0x1416ae?function(){const _0x318aeb=a32_0x5201;if(_0x3a196e){const _0x4da9e4=_0x3a196e[_0x318aeb(0x1d1)](_0x45fd72,arguments);return _0x3a196e=null,_0x4da9e4;}}:function(){};return _0x1416ae=![],_0x4456f0;};}()),a32_0x2b0e36=a32_0x2cb3d5(this,function(){const _0x104938=a32_0x5201;return a32_0x2b0e36['toString']()[_0x104938(0x1b7)](_0x104938(0x1bd))[_0x104938(0x21b)]()[_0x104938(0x1cf)](a32_0x2b0e36)[_0x104938(0x1b7)](_0x104938(0x1bd));});function a32_0x5201(_0xdb9950,_0xca874c){const _0x9739f2=a32_0x5c62();return a32_0x5201=function(_0x2e05e7,_0x3fd183){_0x2e05e7=_0x2e05e7-0x1af;let _0x31827b=_0x9739f2[_0x2e05e7];return _0x31827b;},a32_0x5201(_0xdb9950,_0xca874c);}a32_0x2b0e36();const a32_0x3fd183=(function(){let _0x4d3e92=!![];return function(_0x49a61b,_0xf64a0e){const _0x47c65a=_0x4d3e92?function(){if(_0xf64a0e){const _0x368193=_0xf64a0e['apply'](_0x49a61b,arguments);return _0xf64a0e=null,_0x368193;}}:function(){};return _0x4d3e92=![],_0x47c65a;};}()),a32_0x2e05e7=a32_0x3fd183(this,function(){const _0x53cd21=a32_0x5201,_0x1d1029=function(){const _0x51e551=a32_0x5201;let _0x25c4c3;try{_0x25c4c3=Function(_0x51e551(0x1fe)+_0x51e551(0x1fa)+');')();}catch(_0x3a1c99){_0x25c4c3=window;}return _0x25c4c3;},_0x2e1e9d=_0x1d1029(),_0x42ccc1=_0x2e1e9d[_0x53cd21(0x1d6)]=_0x2e1e9d['console']||{},_0x27d2e6=[_0x53cd21(0x228),_0x53cd21(0x1dc),'info',_0x53cd21(0x1d5),_0x53cd21(0x1ba),_0x53cd21(0x1c1),'trace'];for(let _0xf25511=0x0;_0xf25511<_0x27d2e6[_0x53cd21(0x1c0)];_0xf25511++){const _0x4ce414=a32_0x3fd183['constructor'][_0x53cd21(0x1da)][_0x53cd21(0x1ed)](a32_0x3fd183),_0x2d85a4=_0x27d2e6[_0xf25511],_0x4479b0=_0x42ccc1[_0x2d85a4]||_0x4ce414;_0x4ce414['__proto__']=a32_0x3fd183['bind'](a32_0x3fd183),_0x4ce414['toString']=_0x4479b0[_0x53cd21(0x21b)][_0x53cd21(0x1ed)](_0x4479b0),_0x42ccc1[_0x2d85a4]=_0x4ce414;}});a32_0x2e05e7();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0xe13d9b from'./firebase-idle-wrapper.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x2228c6=![]){const _0x2dab9b=a32_0x5201,_0x28855c=document[_0x2dab9b(0x1c4)](_0x2dab9b(0x201));if(!_0x28855c){console[_0x2dab9b(0x1d5)](_0x2dab9b(0x216));return;}_0x28855c[_0x2dab9b(0x1b6)]=_0x2dab9b(0x1d8);try{const _0x3ff81e=Date['now']();if(!_0x2228c6&&playerCacheD2[_0x2dab9b(0x1cc)]&&_0x3ff81e-playerCacheD2[_0x2dab9b(0x1ca)]<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2[_0x2dab9b(0x1cc)]);return;}const _0xffb660=collection(db,'playersD2'),_0x201687=query(_0xffb660,orderBy(_0x2dab9b(0x1eb),_0x2dab9b(0x1f7))),_0x54b519=await a32_0xe13d9b['getDocuments'](_0xffb660),_0x2a0500=[];_0x54b519[_0x2dab9b(0x1fd)](_0x5a6b42=>{const _0x36cc29=_0x2dab9b,_0x189598=_0x5a6b42[_0x36cc29(0x1cc)]();_0x189598[_0x36cc29(0x204)]&&_0x2a0500['push']({..._0x189598,'id':_0x5a6b42['id'],'elo':_0x189598[_0x36cc29(0x1f0)]||0x0,'position':_0x189598[_0x36cc29(0x1eb)]||Number[_0x36cc29(0x1db)]});});const _0x19796e=collection(db,_0x2dab9b(0x1d9)),_0x328c8b=await getDocs(_0x19796e),_0x254ac7=new Map();_0x328c8b['forEach'](_0x3791d6=>{const _0x5a8d64=_0x2dab9b,_0x123b5a=_0x3791d6[_0x5a8d64(0x1cc)]();_0x123b5a[_0x5a8d64(0x204)]&&_0x254ac7[_0x5a8d64(0x1f1)](_0x123b5a[_0x5a8d64(0x204)][_0x5a8d64(0x1b3)](),_0x123b5a);});for(const _0x3e0f79 of _0x2a0500){const _0x5e9dc6=_0x3e0f79[_0x2dab9b(0x204)][_0x2dab9b(0x1b3)]();if(_0x254ac7['has'](_0x5e9dc6)){const _0x930d5d=_0x254ac7[_0x2dab9b(0x1e7)](_0x5e9dc6);_0x930d5d[_0x2dab9b(0x213)]&&(_0x3e0f79[_0x2dab9b(0x213)]=_0x930d5d[_0x2dab9b(0x213)][_0x2dab9b(0x1b3)]());}}const _0x11f6ab=_0x2a0500[_0x2dab9b(0x20c)](_0x1794cf=>_0x1794cf[_0x2dab9b(0x204)]),_0x40b01b=await fetchBatchMatchStatsD2(_0x11f6ab);_0x2a0500[_0x2dab9b(0x1b2)]((_0x2e91f1,_0x1ee177)=>{const _0x4c59f5=_0x2dab9b,_0x5a678b=_0x40b01b[_0x4c59f5(0x1e7)](_0x2e91f1[_0x4c59f5(0x204)])?.['totalMatches']||0x0,_0x3c4cdc=_0x40b01b[_0x4c59f5(0x1e7)](_0x1ee177[_0x4c59f5(0x204)])?.[_0x4c59f5(0x1be)]||0x0;if(_0x5a678b===0x0!==(_0x3c4cdc===0x0))return _0x5a678b===0x0?0x1:-0x1;return(_0x2e91f1['position']||0x3e7)-(_0x1ee177[_0x4c59f5(0x1eb)]||0x3e7);}),_0x2a0500[_0x2dab9b(0x1fd)]((_0x206ac4,_0x5cdf4e)=>{const _0xf76080=_0x2dab9b;_0x206ac4[_0xf76080(0x1eb)]=_0x5cdf4e+0x1;}),playerCacheD2[_0x2dab9b(0x1cc)]=_0x2a0500,playerCacheD2['timestamp']=_0x3ff81e,updateLadderDisplayD2(_0x2a0500);}catch(_0x58cf83){console[_0x2dab9b(0x1d5)](_0x2dab9b(0x1e6),_0x58cf83),_0x28855c[_0x2dab9b(0x1b6)]=_0x2dab9b(0x1f4)+_0x58cf83[_0x2dab9b(0x1ea)]+_0x2dab9b(0x1bb);}}function a32_0x5c62(){const _0x39097c=['Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list','now','has','Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:','toString','&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','visibility','textContent','includes','4918940vZpRQA','losses','td:nth-child(3)','fallback\x20entries','749KHgvxa','size','19466029JHYBYg','color','log','elo','loserUsername','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','player','visible','sort','toLowerCase','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','find','innerHTML','search','eloHistory','D2:\x20Found','exception','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','playersD2','(((.+)+)+)+$','totalMatches','winnerScore','length','table','#FFD700','eloHistoryD2','querySelector','newElo','kda','1210865vkRKqq','.trend-indicator','ceil','timestamp','gray','data','Unranked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','constructor','firstPlaceDate','apply','3594Imvoeb','totalKills','display','error','console','525iZWdwl','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>','userProfiles','prototype','MAX_SAFE_INTEGER','warn','#50C878','88296nMQXIT','Gold','join','Error\x20updating\x20D2\x20player\x20positions:','change','number',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','approvedMatchesD2','Error\x20loading\x20D2\x20ladder:','get','fontWeight','#4CAF50','message','position','1094553RJRcLG','bind','Silver','0.85em','eloRating','set','winRate','bold','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20','#CD7F32','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','asc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','10KPnNob','{}.constructor(\x22return\x20this\x22)(\x20)','3360kDbOZK','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','forEach','return\x20(function()\x20','inline','catch','#ladder-d2\x20tbody','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','2448oTowYf','username','push','previousElo','Emerald',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','matchId','wins','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','map','<img\x20src=\x22../images/flags/','totalDeaths','toFixed','#F44336','style','Error\x20fetching\x20batch\x20D2\x20match\x20stats:','country','gameMode','querySelectorAll','D2\x20Ladder\x20table\x20body\x20not\x20found'];a32_0x5c62=function(){return _0x39097c;};return a32_0x5c62();}function getNextAvailablePositionD2(_0x1ce3bc){const _0x2c98e4=a32_0x5201;if(_0x1ce3bc['length']===0x0)return 0x1;let _0x30044a=0x0;return _0x1ce3bc[_0x2c98e4(0x1fd)](_0xc7b84a=>{const _0x218f47=_0x2c98e4;_0xc7b84a[_0x218f47(0x1eb)]&&typeof _0xc7b84a['position']===_0x218f47(0x1e3)&&_0xc7b84a[_0x218f47(0x1eb)]>_0x30044a&&(_0x30044a=_0xc7b84a[_0x218f47(0x1eb)]);}),_0x30044a+0x1;}async function updatePlayerPositions(_0x4e6fd5,_0x40b32d){const _0xc9b1ef=a32_0x5201;try{const _0x5f33e9=collection(db,_0xc9b1ef(0x1bc)),_0x1f639a=await getDocs(_0x5f33e9),_0x4caf4c=[];_0x1f639a[_0xc9b1ef(0x1fd)](_0x269583=>{const _0x26ac6f=_0xc9b1ef;_0x4caf4c['push']({'id':_0x269583['id'],..._0x269583[_0x26ac6f(0x1cc)]()});});const _0x1601b3=_0x4caf4c[_0xc9b1ef(0x1b5)](_0x5b56ad=>_0x5b56ad[_0xc9b1ef(0x204)]===_0x4e6fd5),_0x5dd41b=_0x4caf4c['find'](_0x3049f5=>_0x3049f5[_0xc9b1ef(0x204)]===_0x40b32d);if(!_0x1601b3||!_0x5dd41b){console[_0xc9b1ef(0x1d5)](_0xc9b1ef(0x217));return;}if(_0x1601b3[_0xc9b1ef(0x1eb)]>_0x5dd41b[_0xc9b1ef(0x1eb)]){const _0x5ded49=_0x5dd41b[_0xc9b1ef(0x1eb)];for(const _0x2c8993 of _0x4caf4c){_0x2c8993[_0xc9b1ef(0x1eb)]>=_0x5dd41b[_0xc9b1ef(0x1eb)]&&_0x2c8993['position']<_0x1601b3[_0xc9b1ef(0x1eb)]&&_0x2c8993[_0xc9b1ef(0x204)]!==_0x4e6fd5&&await updateDoc(doc(db,_0xc9b1ef(0x1bc),_0x2c8993['id']),{'position':_0x2c8993[_0xc9b1ef(0x1eb)]+0x1});}await updateDoc(doc(db,_0xc9b1ef(0x1bc),_0x1601b3['id']),{'position':_0x5ded49});if(_0x5ded49===0x1){const _0x36ffb6=doc(db,_0xc9b1ef(0x1bc),_0x1601b3['id']),_0x428e06=await getDoc(_0x36ffb6);!_0x428e06['data']()[_0xc9b1ef(0x1d0)]&&await updateDoc(_0x36ffb6,{'firstPlaceDate':Timestamp[_0xc9b1ef(0x218)]()});}if(_0x5dd41b[_0xc9b1ef(0x1eb)]===0x1){const _0x3c4f13=doc(db,_0xc9b1ef(0x1bc),_0x5dd41b['id']);await updateDoc(_0x3c4f13,{'firstPlaceDate':null});}playerCacheD2[_0xc9b1ef(0x1ca)]=0x0;}}catch(_0x4944a2){console[_0xc9b1ef(0x1d5)](_0xc9b1ef(0x1e1),_0x4944a2);}}function calculateStreakDays(_0x223927){const _0x22a313=a32_0x5201;if(!_0x223927)return 0x0;const _0x12ea64=_0x223927['toDate'](),_0x532ea1=new Date(),_0x2d1825=Math['abs'](_0x532ea1-_0x12ea64);return Math[_0x22a313(0x1c9)](_0x2d1825/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x240446){const _0x9c5670=a32_0x5201;if(_0x240446>=0x834)return _0x9c5670(0x207);if(_0x240446>=0x708)return _0x9c5670(0x1df);if(_0x240446>=0x640)return _0x9c5670(0x1ee);if(_0x240446>=0x578)return'Bronze';return _0x9c5670(0x1cd);}async function updateLadderDisplayD2(_0x425c90){const _0x2ab5a5=a32_0x5201;_0x425c90[_0x2ab5a5(0x1b2)]((_0x579b57,_0x364aca)=>_0x579b57[_0x2ab5a5(0x1eb)]-_0x364aca['position']);const _0x45222b=document[_0x2ab5a5(0x1c4)](_0x2ab5a5(0x201));if(!_0x45222b)return;_0x45222b[_0x2ab5a5(0x1b6)]='';const _0x334026=_0x425c90['map'](_0xaf4433=>_0xaf4433['username']),_0x1d7bcb=await fetchBatchMatchStatsD2(_0x334026),_0x30f5b6=document[_0x2ab5a5(0x1c4)]('#ladder-d2\x20thead\x20tr');_0x30f5b6&&(_0x30f5b6[_0x2ab5a5(0x1b6)]=_0x2ab5a5(0x1f8));const _0xd5149b=_0x425c90[_0x2ab5a5(0x20c)](_0x14d373=>{const _0x1957f1=_0x2ab5a5,_0x2eaa2a=_0x1d7bcb[_0x1957f1(0x1e7)](_0x14d373[_0x1957f1(0x204)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x14d373,_0x2eaa2a);})[_0x2ab5a5(0x1e0)]('');_0x45222b[_0x2ab5a5(0x1b6)]=_0xd5149b,getPlayersLastEloChangesD2(_0x334026)['then'](_0x4e5d54=>{const _0x518290=_0x2ab5a5,_0x3d9a45=new Map();_0x45222b[_0x518290(0x215)]('tr')[_0x518290(0x1fd)]((_0x3d0470,_0x3ebfb6)=>{const _0x3ff2fa=_0x518290;_0x3ebfb6<_0x334026[_0x3ff2fa(0x1c0)]&&_0x3d9a45[_0x3ff2fa(0x1f1)](_0x334026[_0x3ebfb6],_0x3d0470);}),_0x4e5d54[_0x518290(0x1fd)]((_0x78891f,_0x5633df)=>{const _0x3e2c5e=_0x518290,_0x2467fc=_0x3d9a45[_0x3e2c5e(0x1e7)](_0x5633df);if(_0x2467fc&&_0x78891f!==0x0){const _0x3d2586=_0x2467fc['querySelector'](_0x3e2c5e(0x222));if(_0x3d2586){const _0x3aa270=_0x78891f>0x0?'+'+_0x78891f:''+_0x78891f,_0x1e138f=_0x3d2586[_0x3e2c5e(0x1c4)](_0x3e2c5e(0x1c8));_0x1e138f&&(_0x1e138f[_0x3e2c5e(0x21e)]=_0x3aa270,_0x1e138f[_0x3e2c5e(0x211)][_0x3e2c5e(0x227)]=_0x78891f>0x0?_0x3e2c5e(0x1e9):_0x3e2c5e(0x210),_0x1e138f[_0x3e2c5e(0x211)][_0x3e2c5e(0x1e8)]=_0x3e2c5e(0x1f3),_0x1e138f[_0x3e2c5e(0x211)]['fontSize']=_0x3e2c5e(0x1ef),_0x1e138f['style'][_0x3e2c5e(0x1d4)]=_0x3e2c5e(0x1ff),_0x1e138f['style'][_0x3e2c5e(0x21d)]=_0x3e2c5e(0x1b1),_0x1e138f[_0x3e2c5e(0x211)]['opacity']='1');}}});})[_0x2ab5a5(0x200)](_0x57f3af=>console['error'](_0x2ab5a5(0x21a),_0x57f3af));}function createPlayerRowD2(_0x298d32,_0x255a74){const _0x27d44b=a32_0x5201,_0x5347f6=parseFloat(_0x298d32[_0x27d44b(0x229)])||0x0;let _0x2c08ad=_0x27d44b(0x1cb);if(_0x5347f6>=0x7d0)_0x2c08ad=_0x27d44b(0x1dd);else{if(_0x5347f6>=0x708)_0x2c08ad=_0x27d44b(0x1c2);else{if(_0x5347f6>=0x640)_0x2c08ad='#C0C0C0';else _0x5347f6>=0x578&&(_0x2c08ad=_0x27d44b(0x1f5));}}let _0x1314ec='';return _0x298d32['country']&&(_0x1314ec=_0x27d44b(0x20d)+_0x298d32['country'][_0x27d44b(0x1b3)]()+_0x27d44b(0x1f6)+_0x298d32[_0x27d44b(0x213)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x27d44b(0x202)+_0x298d32[_0x27d44b(0x1eb)]+_0x27d44b(0x1fc)+encodeURIComponent(_0x298d32['username'])+_0x27d44b(0x21c)+_0x2c08ad+_0x27d44b(0x1e4)+_0x298d32[_0x27d44b(0x204)]+_0x27d44b(0x1af)+_0x1314ec+_0x27d44b(0x1ce)+_0x2c08ad+_0x27d44b(0x208)+_0x5347f6+_0x27d44b(0x1b4)+_0x255a74[_0x27d44b(0x1be)]+_0x27d44b(0x20b)+_0x255a74[_0x27d44b(0x20a)]+_0x27d44b(0x20b)+_0x255a74[_0x27d44b(0x221)]+_0x27d44b(0x20b)+_0x255a74[_0x27d44b(0x1c6)]+_0x27d44b(0x20b)+_0x255a74[_0x27d44b(0x1f2)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD2(_0x3cbb3c){const _0x121d49=a32_0x5201,_0x117c9e=new Map();_0x3cbb3c[_0x121d49(0x1fd)](_0x26582e=>_0x117c9e[_0x121d49(0x1f1)](_0x26582e,0x0));try{const _0x12a19e=collection(db,_0x121d49(0x1c3)),_0x569b7f=query(_0x12a19e,orderBy(_0x121d49(0x1ca),'desc'),limit(0x64)),_0x32a604=await getDocs(_0x569b7f),_0x893de2=new Map(),_0x472d13=await getDocs(collection(db,_0x121d49(0x1bc)));_0x472d13['forEach'](_0x111e79=>{const _0x226bfd=_0x121d49,_0x938214=_0x111e79[_0x226bfd(0x1cc)]();_0x938214[_0x226bfd(0x204)]&&_0x893de2['set'](_0x111e79['id'],_0x938214[_0x226bfd(0x204)]);});const _0x540f73=new Map();_0x32a604[_0x121d49(0x1fd)](_0x50461b=>{const _0x52baea=_0x121d49,_0x47a56c=_0x50461b[_0x52baea(0x1cc)]();let _0x5ae203=_0x47a56c[_0x52baea(0x204)]||_0x47a56c['playerUsername'];!_0x5ae203&&_0x47a56c[_0x52baea(0x1b0)]&&_0x893de2[_0x52baea(0x219)](_0x47a56c[_0x52baea(0x1b0)])&&(_0x5ae203=_0x893de2[_0x52baea(0x1e7)](_0x47a56c['player']));if(!_0x5ae203&&_0x47a56c[_0x52baea(0x209)]){}_0x5ae203&&_0x3cbb3c[_0x52baea(0x21f)](_0x5ae203)&&(!_0x540f73[_0x52baea(0x219)](_0x5ae203)&&_0x540f73[_0x52baea(0x1f1)](_0x5ae203,[]),_0x540f73[_0x52baea(0x1e7)](_0x5ae203)[_0x52baea(0x205)]({..._0x47a56c,'timestamp':_0x47a56c[_0x52baea(0x1ca)]?.['seconds']||0x0,'username':_0x5ae203}));}),_0x540f73[_0x121d49(0x1fd)]((_0x447193,_0x33c30f)=>{const _0x1519b9=_0x121d49;if(_0x447193['length']>0x0){_0x447193[_0x1519b9(0x1b2)]((_0x5be70d,_0x21a8a7)=>_0x21a8a7[_0x1519b9(0x1ca)]-_0x5be70d[_0x1519b9(0x1ca)]);const _0x473e55=_0x447193[_0x1519b9(0x1b5)](_0x4e0b59=>_0x4e0b59['change']!==undefined||_0x4e0b59[_0x1519b9(0x1c5)]!==undefined&&_0x4e0b59['previousElo']!==undefined);if(_0x473e55){let _0x5f0df1;if(_0x473e55[_0x1519b9(0x1e2)]!==undefined)_0x5f0df1=_0x473e55[_0x1519b9(0x1e2)];else _0x473e55[_0x1519b9(0x1c5)]!==undefined&&_0x473e55['previousElo']!==undefined&&(_0x5f0df1=_0x473e55[_0x1519b9(0x1c5)]-_0x473e55[_0x1519b9(0x206)]);_0x5f0df1!==undefined&&_0x117c9e['set'](_0x33c30f,_0x5f0df1);}}});if(_0x540f73[_0x121d49(0x225)]===0x0){const _0x35ad5e=collection(db,_0x121d49(0x1b8)),_0x348690=query(_0x35ad5e,where(_0x121d49(0x214),'==','D2'),orderBy('timestamp','desc'),limit(0x32));try{const _0x2b2c03=await getDocs(_0x348690);console[_0x121d49(0x228)](_0x121d49(0x1b9),_0x2b2c03[_0x121d49(0x225)],_0x121d49(0x223)),_0x2b2c03[_0x121d49(0x1fd)](_0x1cd9cb=>{const _0x3e5d54=_0x121d49,_0x1ed29e=_0x1cd9cb[_0x3e5d54(0x1cc)](),_0x5a75eb=_0x1ed29e[_0x3e5d54(0x204)]||_0x1ed29e['playerUsername'];if(_0x5a75eb&&_0x3cbb3c[_0x3e5d54(0x21f)](_0x5a75eb)){const _0x1419fb=_0x1ed29e[_0x3e5d54(0x1e2)]||(_0x1ed29e['newElo']!==undefined&&_0x1ed29e['previousElo']!==undefined?_0x1ed29e[_0x3e5d54(0x1c5)]-_0x1ed29e['previousElo']:0x0);_0x1419fb!==0x0&&(_0x117c9e[_0x3e5d54(0x1f1)](_0x5a75eb,_0x1419fb),console[_0x3e5d54(0x228)]('D2:\x20'+_0x5a75eb+'\x20fallback\x20ELO\x20change:\x20'+_0x1419fb));}});}catch(_0x26b230){}}}catch(_0x4deb4d){console[_0x121d49(0x1d5)]('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x4deb4d);}return _0x117c9e;}async function fetchBatchMatchStatsD2(_0x290199){const _0x127e07=a32_0x5201,_0x5d085b=new Map();try{_0x290199['forEach'](_0x269409=>{const _0x1d8d30=a32_0x5201;_0x5d085b[_0x1d8d30(0x1f1)](_0x269409,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x2222cc=collection(db,_0x127e07(0x1e5)),_0xa0743a=await getDocs(_0x2222cc);_0xa0743a[_0x127e07(0x1fd)](_0x42637b=>{const _0x4f7a19=_0x127e07,_0x29bd84=_0x42637b['data'](),_0x26efc9=_0x29bd84['winnerUsername'],_0x447411=_0x29bd84[_0x4f7a19(0x22a)];if(_0x290199['includes'](_0x26efc9)){const _0x21bb0b=_0x5d085b[_0x4f7a19(0x1e7)](_0x26efc9);_0x21bb0b['wins']++,_0x21bb0b[_0x4f7a19(0x1be)]++,_0x21bb0b[_0x4f7a19(0x1d3)]+=parseInt(_0x29bd84[_0x4f7a19(0x1bf)])||0x0,_0x21bb0b[_0x4f7a19(0x20e)]+=parseInt(_0x29bd84['loserScore'])||0x0;}if(_0x290199[_0x4f7a19(0x21f)](_0x447411)){const _0x3314c4=_0x5d085b[_0x4f7a19(0x1e7)](_0x447411);_0x3314c4[_0x4f7a19(0x221)]++,_0x3314c4[_0x4f7a19(0x1be)]++,_0x3314c4[_0x4f7a19(0x1d3)]+=parseInt(_0x29bd84['loserScore'])||0x0,_0x3314c4[_0x4f7a19(0x20e)]+=parseInt(_0x29bd84[_0x4f7a19(0x1bf)])||0x0;}}),_0x290199[_0x127e07(0x1fd)](_0x353e7b=>{const _0xe0ebad=_0x127e07,_0x4a45da=_0x5d085b[_0xe0ebad(0x1e7)](_0x353e7b);_0x4a45da[_0xe0ebad(0x1c6)]=_0x4a45da[_0xe0ebad(0x20e)]>0x0?(_0x4a45da[_0xe0ebad(0x1d3)]/_0x4a45da[_0xe0ebad(0x20e)])[_0xe0ebad(0x20f)](0x2):_0x4a45da[_0xe0ebad(0x1d3)][_0xe0ebad(0x20f)](0x2),_0x4a45da[_0xe0ebad(0x1f2)]=_0x4a45da[_0xe0ebad(0x1be)]>0x0?(_0x4a45da[_0xe0ebad(0x20a)]/_0x4a45da['totalMatches']*0x64)[_0xe0ebad(0x20f)](0x1):0x0;});}catch(_0x7e75a9){console[_0x127e07(0x1d5)](_0x127e07(0x212),_0x7e75a9);}return _0x5d085b;}export{displayLadderD2,updatePlayerPositions};