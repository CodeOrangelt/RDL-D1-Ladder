const a33_0x37942f=a33_0x2129;(function(_0x3cedc0,_0x34d858){const _0xfae7da=a33_0x2129,_0x4d7456=_0x3cedc0();while(!![]){try{const _0x54f067=-parseInt(_0xfae7da(0x14b))/0x1+parseInt(_0xfae7da(0x129))/0x2*(-parseInt(_0xfae7da(0x103))/0x3)+parseInt(_0xfae7da(0x147))/0x4*(parseInt(_0xfae7da(0xfb))/0x5)+-parseInt(_0xfae7da(0x143))/0x6+parseInt(_0xfae7da(0x12d))/0x7*(parseInt(_0xfae7da(0x15c))/0x8)+-parseInt(_0xfae7da(0x16c))/0x9*(-parseInt(_0xfae7da(0x108))/0xa)+parseInt(_0xfae7da(0x123))/0xb;if(_0x54f067===_0x34d858)break;else _0x4d7456['push'](_0x4d7456['shift']());}catch(_0x34b8c3){_0x4d7456['push'](_0x4d7456['shift']());}}}(a33_0x4658,0xc5c34));const a33_0x3109a3=(function(){let _0x239c6e=!![];return function(_0x2182ef,_0x25e3ec){const _0x48954c=_0x239c6e?function(){const _0x4657b5=a33_0x2129;if(_0x25e3ec){const _0x40be11=_0x25e3ec[_0x4657b5(0x168)](_0x2182ef,arguments);return _0x25e3ec=null,_0x40be11;}}:function(){};return _0x239c6e=![],_0x48954c;};}()),a33_0x55f414=a33_0x3109a3(this,function(){const _0x2e3c08=a33_0x2129;return a33_0x55f414['toString']()[_0x2e3c08(0x177)](_0x2e3c08(0x102))[_0x2e3c08(0x14c)]()[_0x2e3c08(0xf6)](a33_0x55f414)[_0x2e3c08(0x177)](_0x2e3c08(0x102));});a33_0x55f414();const a33_0x10c8df=(function(){let _0x159f5b=!![];return function(_0x4e7bb8,_0x4c0025){const _0x4022c3=_0x159f5b?function(){const _0x33191a=a33_0x2129;if(_0x4c0025){const _0x327901=_0x4c0025[_0x33191a(0x168)](_0x4e7bb8,arguments);return _0x4c0025=null,_0x327901;}}:function(){};return _0x159f5b=![],_0x4022c3;};}()),a33_0x3a2d9a=a33_0x10c8df(this,function(){const _0x269863=a33_0x2129,_0x1e0af1=function(){let _0x314112;try{_0x314112=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2a4c0c){_0x314112=window;}return _0x314112;},_0x3f8fae=_0x1e0af1(),_0x142828=_0x3f8fae['console']=_0x3f8fae[_0x269863(0x15d)]||{},_0x1a3627=['log',_0x269863(0xeb),_0x269863(0x12e),_0x269863(0x115),_0x269863(0x13e),_0x269863(0x10d),_0x269863(0x100)];for(let _0x46fcfb=0x0;_0x46fcfb<_0x1a3627['length'];_0x46fcfb++){const _0x7f31ef=a33_0x10c8df[_0x269863(0xf6)][_0x269863(0x107)]['bind'](a33_0x10c8df),_0x503933=_0x1a3627[_0x46fcfb],_0x4e11d6=_0x142828[_0x503933]||_0x7f31ef;_0x7f31ef[_0x269863(0x119)]=a33_0x10c8df[_0x269863(0x16e)](a33_0x10c8df),_0x7f31ef[_0x269863(0x14c)]=_0x4e11d6[_0x269863(0x14c)][_0x269863(0x16e)](_0x4e11d6),_0x142828[_0x503933]=_0x7f31ef;}});a33_0x3a2d9a();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x570458 from'./firebase-idle-wrapper.js';const styleEl=document[a33_0x37942f(0x166)](a33_0x37942f(0x13a));styleEl[a33_0x37942f(0x12b)]=a33_0x37942f(0x12f),document[a33_0x37942f(0x135)][a33_0x37942f(0x139)](styleEl);function a33_0x4658(){const _0x442fe3=['console','D3:\x20Player\x20ID\x20mappings:','querySelector','firstPlaceDate','visible','find','map','filter','approvedMatchesD3','createElement','change','apply','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','timestamp','set','473409BuBSlm','eloHistory','bind','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20','<img\x20src=\x22../images/flags/','position','\x20entries\x20in\x20eloHistoryD3','entries','D3:\x20Fallback\x20query\x20failed:','inline','#CD7F32','search','%</td>\x0a\x20\x20\x20\x20</tr>','0.85em','winRate','seconds','opacity','warn','newElo','then','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','D3:\x20Error\x20fetching\x20ELO\x20history:','wins','bold','playerUsername','D3\x20Ladder\x20table\x20body\x20not\x20found','kda','constructor','\x20fallback\x20ELO\x20change:\x20','gameMode','winnerScore','toFixed','5Zraqhc','toLowerCase','ceil','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','message','trace','Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:','(((.+)+)+)+$','381663jXAYwi','td:nth-child(3)','\x20players','D3:\x20Found\x20','prototype','10eVbiZk','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','fontSize','table','D3:\x20','pilot','playerId','winnerUsername','length','querySelectorAll','now','error','Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:','.trend-indicator','userProfiles','__proto__','has','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20','color','D3:\x20Found\x20pilot\x20entry:','player','\x20ELO\x20change:\x20','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','from','25416622KFByQw','username','catch','totalDeaths','#ladder-d3\x20tbody','gray','6FLxgvP','#ladder-d3\x20thead\x20tr','textContent','includes','41069SWXqnE','info','\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a','totalMatches','push','totalKills','D3:\x20Final\x20ELO\x20changes:','D3:\x20Found\x20entries\x20for\x20','head','forEach','toDate','Error\x20loading\x20D3\x20ladder:','appendChild','style','desc','data','log','exception','fontWeight','losses','D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:','join','7023258EILFao','D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...','get','playersD3','425552rUqoMn','country','loserUsername','\x20fallback\x20entries','911128sSWtSe','toString','sort','display','size','loserScore','innerHTML','elo','previousElo','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','#4CAF50','#FFD700','eloHistoryD3','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','empty','#C0C0C0','1096NyeImG'];a33_0x4658=function(){return _0x442fe3;};return a33_0x4658();}const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x1de174=![]){const _0x400bc4=a33_0x37942f,_0x39ca91=document[_0x400bc4(0x15f)](_0x400bc4(0x127));if(!_0x39ca91){console[_0x400bc4(0x115)](_0x400bc4(0xf4));return;}_0x39ca91[_0x400bc4(0x151)]='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x4fcbbd=Date[_0x400bc4(0x114)]();if(!_0x1de174&&playerCacheD3[_0x400bc4(0x13c)]&&_0x4fcbbd-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3[_0x400bc4(0x13c)]);return;}const _0x12dc6d=collection(db,_0x400bc4(0x146)),_0x1bd048=await getDocs(_0x12dc6d),_0x553f89=[];_0x1bd048[_0x400bc4(0x136)](_0xd0692b=>{const _0x290e10=_0x400bc4,_0x312100=_0xd0692b[_0x290e10(0x13c)]();_0x312100[_0x290e10(0x124)]&&_0x553f89[_0x290e10(0x131)]({..._0x312100,'id':_0xd0692b['id'],'elo':_0x312100['eloRating']||0x0,'position':_0x312100['position']||Number['MAX_SAFE_INTEGER']});});const _0x2f9968=collection(db,_0x400bc4(0x118)),_0x492906=await getDocs(_0x2f9968),_0x13c651=new Map();_0x492906[_0x400bc4(0x136)](_0x84205a=>{const _0x47f447=_0x400bc4,_0x12b0b3=_0x84205a[_0x47f447(0x13c)]();_0x12b0b3[_0x47f447(0x124)]&&_0x13c651['set'](_0x12b0b3[_0x47f447(0x124)][_0x47f447(0xfc)](),_0x12b0b3);});for(const _0x322b75 of _0x553f89){const _0x3a064c=_0x322b75[_0x400bc4(0x124)][_0x400bc4(0xfc)]();if(_0x13c651[_0x400bc4(0x11a)](_0x3a064c)){const _0x1773de=_0x13c651[_0x400bc4(0x145)](_0x3a064c);_0x1773de[_0x400bc4(0x148)]&&(_0x322b75[_0x400bc4(0x148)]=_0x1773de['country'][_0x400bc4(0xfc)]());}}const _0x59e6f7=_0x553f89[_0x400bc4(0x163)](_0x50a174=>_0x50a174['username']),_0xfad882=await fetchBatchMatchStatsD3(_0x59e6f7);_0x553f89[_0x400bc4(0x14d)]((_0xe1c702,_0x39398b)=>{const _0x2b81f7=_0x400bc4,_0x21fa4e=_0xfad882['get'](_0xe1c702['username'])?.[_0x2b81f7(0x130)]||0x0,_0x558d95=_0xfad882[_0x2b81f7(0x145)](_0x39398b['username'])?.[_0x2b81f7(0x130)]||0x0;if(_0x21fa4e===0x0!==(_0x558d95===0x0))return _0x21fa4e===0x0?0x1:-0x1;return(_0xe1c702[_0x2b81f7(0x171)]||0x3e7)-(_0x39398b[_0x2b81f7(0x171)]||0x3e7);}),_0x553f89['forEach']((_0xffb412,_0x5c23be)=>{_0xffb412['position']=_0x5c23be+0x1;}),playerCacheD3[_0x400bc4(0x13c)]=_0x553f89,playerCacheD3[_0x400bc4(0x16a)]=_0x4fcbbd,updateLadderDisplayD3(_0x553f89);}catch(_0x18640f){console[_0x400bc4(0x115)](_0x400bc4(0x138),_0x18640f),_0x39ca91[_0x400bc4(0x151)]=_0x400bc4(0x16f)+_0x18640f[_0x400bc4(0xff)]+_0x400bc4(0x109);}}function calculateStreakDays(_0x32db28){const _0xce0e2f=a33_0x37942f;if(!_0x32db28)return 0x0;const _0x4e6fb5=_0x32db28[_0xce0e2f(0x137)](),_0x22e0e2=new Date(),_0x40d7d9=Math['abs'](_0x22e0e2-_0x4e6fb5);return Math[_0xce0e2f(0xfd)](_0x40d7d9/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x3a31c1,_0x10af4b){const _0x3507f9=a33_0x37942f;try{const _0x4fc23c=collection(db,_0x3507f9(0x146)),_0x381a5a=await getDocs(_0x4fc23c),_0x13e88a=[];_0x381a5a[_0x3507f9(0x136)](_0x8b1a30=>{const _0x592ec9=_0x3507f9;_0x13e88a[_0x592ec9(0x131)]({'id':_0x8b1a30['id'],..._0x8b1a30[_0x592ec9(0x13c)]()});});const _0x2af46b=_0x13e88a[_0x3507f9(0x162)](_0x59dc75=>_0x59dc75[_0x3507f9(0x124)]===_0x3a31c1),_0x46b53c=_0x13e88a[_0x3507f9(0x162)](_0x302b51=>_0x302b51[_0x3507f9(0x124)]===_0x10af4b);if(!_0x2af46b||!_0x46b53c){console[_0x3507f9(0x115)](_0x3507f9(0x11b));return;}if(_0x2af46b[_0x3507f9(0x171)]>_0x46b53c[_0x3507f9(0x171)]){const _0x5cc8f2=_0x46b53c[_0x3507f9(0x171)];for(const _0x161128 of _0x13e88a){_0x161128[_0x3507f9(0x171)]>=_0x46b53c['position']&&_0x161128['position']<_0x2af46b['position']&&_0x161128['username']!==_0x3a31c1&&await updateDoc(doc(db,_0x3507f9(0x146),_0x161128['id']),{'position':_0x161128['position']+0x1});}await updateDoc(doc(db,_0x3507f9(0x146),_0x2af46b['id']),{'position':_0x5cc8f2});if(_0x5cc8f2===0x1){const _0x8f42e8=doc(db,_0x3507f9(0x146),_0x2af46b['id']),_0x341f47=await getDoc(_0x8f42e8);!_0x341f47[_0x3507f9(0x13c)]()[_0x3507f9(0x160)]&&await updateDoc(_0x8f42e8,{'firstPlaceDate':Timestamp[_0x3507f9(0x114)]()});}if(_0x46b53c[_0x3507f9(0x171)]===0x1){const _0x3b5185=doc(db,_0x3507f9(0x146),_0x46b53c['id']);await updateDoc(_0x3b5185,{'firstPlaceDate':null});}}}catch(_0x5a333d){console[_0x3507f9(0x115)]('Error\x20updating\x20D3\x20player\x20positions:',_0x5a333d);}}async function updateLadderDisplayD3(_0x16fe00){const _0x2d8f26=a33_0x37942f;_0x16fe00[_0x2d8f26(0x14d)]((_0x8cd468,_0x5495da)=>_0x8cd468['position']-_0x5495da['position']);const _0x18cd39=document[_0x2d8f26(0x15f)]('#ladder-d3\x20tbody');if(!_0x18cd39)return;_0x18cd39['innerHTML']='';const _0x17fccd=_0x16fe00[_0x2d8f26(0x163)](_0x4eef0f=>_0x4eef0f[_0x2d8f26(0x124)]),_0x1b0641=await fetchBatchMatchStatsD3(_0x17fccd),_0x1fed42=document[_0x2d8f26(0x15f)](_0x2d8f26(0x12a));_0x1fed42[_0x2d8f26(0x151)]=_0x2d8f26(0x11c);const _0x2c19fd=_0x16fe00[_0x2d8f26(0x163)](_0x5effbc=>{const _0x1ab0b4=_0x2d8f26,_0x5eadd3=_0x1b0641[_0x1ab0b4(0x145)](_0x5effbc['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x5effbc,_0x5eadd3);})[_0x2d8f26(0x142)]('');_0x18cd39[_0x2d8f26(0x151)]=_0x2c19fd,getPlayersLastEloChangesD3(_0x17fccd)[_0x2d8f26(0xed)](_0x48c3c2=>{const _0xdab011=_0x2d8f26,_0x41b7bb=new Map();_0x18cd39[_0xdab011(0x113)]('tr')[_0xdab011(0x136)]((_0x2ed81e,_0x137572)=>{const _0x1d482a=_0xdab011;_0x137572<_0x17fccd[_0x1d482a(0x112)]&&_0x41b7bb[_0x1d482a(0x16b)](_0x17fccd[_0x137572],_0x2ed81e);}),_0x48c3c2[_0xdab011(0x136)]((_0x4f545a,_0x5f303e)=>{const _0x227053=_0xdab011,_0x291dd2=_0x41b7bb[_0x227053(0x145)](_0x5f303e);if(_0x291dd2&&_0x4f545a!==0x0){const _0x34f5f9=_0x291dd2[_0x227053(0x15f)](_0x227053(0x104));if(_0x34f5f9){const _0x3b590d=_0x4f545a>0x0?'+'+_0x4f545a:''+_0x4f545a,_0x5f07e6=_0x34f5f9[_0x227053(0x15f)](_0x227053(0x117));_0x5f07e6&&(_0x5f07e6[_0x227053(0x12b)]=_0x3b590d,_0x5f07e6[_0x227053(0x13a)][_0x227053(0x11d)]=_0x4f545a>0x0?_0x227053(0x155):'#F44336',_0x5f07e6[_0x227053(0x13a)][_0x227053(0x13f)]=_0x227053(0xf2),_0x5f07e6[_0x227053(0x13a)][_0x227053(0x10c)]=_0x227053(0x179),_0x5f07e6['style'][_0x227053(0x14e)]=_0x227053(0x175),_0x5f07e6[_0x227053(0x13a)]['visibility']=_0x227053(0x161),_0x5f07e6[_0x227053(0x13a)][_0x227053(0xea)]='1');}}});})[_0x2d8f26(0x125)](_0x3176f8=>console[_0x2d8f26(0x115)](_0x2d8f26(0x116),_0x3176f8));}function a33_0x2129(_0x5b2a66,_0x4281d0){const _0x18ea28=a33_0x4658();return a33_0x2129=function(_0x3a2d9a,_0x10c8df){_0x3a2d9a=_0x3a2d9a-0xe9;let _0x3ff85a=_0x18ea28[_0x3a2d9a];return _0x3ff85a;},a33_0x2129(_0x5b2a66,_0x4281d0);}async function fetchBatchMatchStatsD3(_0x2d7bbe){const _0x408457=a33_0x37942f,_0xfc4d60=new Map();try{const _0x2c0f5d=collection(db,_0x408457(0x165)),_0x2832c6=await getDocs(_0x2c0f5d);_0x2832c6['forEach'](_0x1b3dd4=>{const _0x53546f=_0x408457,_0x1b3723=_0x1b3dd4[_0x53546f(0x13c)]();if(_0x2d7bbe[_0x53546f(0x12c)](_0x1b3723[_0x53546f(0x111)])){const _0x137a3a=_0x1b3723[_0x53546f(0x111)];!_0xfc4d60['has'](_0x137a3a)&&_0xfc4d60[_0x53546f(0x16b)](_0x137a3a,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x2a317f=_0xfc4d60[_0x53546f(0x145)](_0x137a3a);_0x2a317f[_0x53546f(0xf1)]++,_0x2a317f[_0x53546f(0x130)]++,_0x2a317f[_0x53546f(0x132)]+=parseInt(_0x1b3723[_0x53546f(0xf9)])||0x0,_0x2a317f[_0x53546f(0x126)]+=parseInt(_0x1b3723[_0x53546f(0x150)])||0x0;}if(_0x2d7bbe[_0x53546f(0x12c)](_0x1b3723[_0x53546f(0x149)])){const _0x2ef640=_0x1b3723[_0x53546f(0x149)];!_0xfc4d60['has'](_0x2ef640)&&_0xfc4d60[_0x53546f(0x16b)](_0x2ef640,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x86ea2=_0xfc4d60[_0x53546f(0x145)](_0x2ef640);_0x86ea2[_0x53546f(0x140)]++,_0x86ea2[_0x53546f(0x130)]++,_0x86ea2[_0x53546f(0x132)]+=parseInt(_0x1b3723[_0x53546f(0x150)])||0x0,_0x86ea2[_0x53546f(0x126)]+=parseInt(_0x1b3723[_0x53546f(0xf9)])||0x0;}}),_0xfc4d60[_0x408457(0x136)](_0x4b625c=>{const _0x38c852=_0x408457;_0x4b625c[_0x38c852(0xf5)]=_0x4b625c[_0x38c852(0x126)]>0x0?(_0x4b625c['totalKills']/_0x4b625c[_0x38c852(0x126)])['toFixed'](0x2):_0x4b625c[_0x38c852(0x132)],_0x4b625c['winRate']=_0x4b625c[_0x38c852(0x130)]>0x0?(_0x4b625c[_0x38c852(0xf1)]/_0x4b625c[_0x38c852(0x130)]*0x64)[_0x38c852(0xfa)](0x1):0x0;});}catch(_0x3ccc4b){console['error'](_0x408457(0x101),_0x3ccc4b);}return _0xfc4d60;}function createPlayerRowD3(_0x10ad6b,_0x37c5c8){const _0x231fd8=a33_0x37942f,_0x4cf456=parseFloat(_0x10ad6b[_0x231fd8(0x152)])||0x0;let _0x11e31b=_0x231fd8(0x128);if(_0x4cf456>=0x7d0)_0x11e31b='#50C878';else{if(_0x4cf456>=0x708)_0x11e31b=_0x231fd8(0x156);else{if(_0x4cf456>=0x640)_0x11e31b=_0x231fd8(0x15b);else _0x4cf456>=0x578&&(_0x11e31b=_0x231fd8(0x176));}}let _0x45a911='';return _0x10ad6b['country']&&(_0x45a911=_0x231fd8(0x170)+_0x10ad6b[_0x231fd8(0x148)][_0x231fd8(0xfc)]()+_0x231fd8(0x154)+_0x10ad6b[_0x231fd8(0x148)]+_0x231fd8(0xfe)),_0x231fd8(0x121)+_0x10ad6b[_0x231fd8(0x171)]+_0x231fd8(0xef)+encodeURIComponent(_0x10ad6b[_0x231fd8(0x124)])+_0x231fd8(0x158)+_0x11e31b+_0x231fd8(0x159)+_0x10ad6b[_0x231fd8(0x124)]+_0x231fd8(0xee)+_0x45a911+_0x231fd8(0x169)+_0x11e31b+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x4cf456+_0x231fd8(0x10b)+_0x37c5c8[_0x231fd8(0x130)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x37c5c8[_0x231fd8(0xf1)]+_0x231fd8(0x10a)+_0x37c5c8[_0x231fd8(0x140)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x37c5c8['kda']+_0x231fd8(0x10a)+_0x37c5c8[_0x231fd8(0x17a)]+_0x231fd8(0x178);}async function getPlayersLastEloChangesD3(_0x3e0e96){const _0x28489e=a33_0x37942f,_0x4348fb=new Map();_0x3e0e96[_0x28489e(0x136)](_0x3df587=>_0x4348fb[_0x28489e(0x16b)](_0x3df587,0x0));try{console[_0x28489e(0x13d)](_0x28489e(0x141),_0x3e0e96);const _0x104610=new Map(),_0x53419a=await getDocs(collection(db,_0x28489e(0x146)));_0x53419a[_0x28489e(0x136)](_0x43b5d2=>{const _0x285187=_0x28489e,_0x55356f=_0x43b5d2[_0x285187(0x13c)]();_0x55356f[_0x285187(0x124)]&&_0x104610['set'](_0x43b5d2['id'],_0x55356f[_0x285187(0x124)]);}),console[_0x28489e(0x13d)](_0x28489e(0x15e),Array['from'](_0x104610['entries']()));const _0x4b4448=collection(db,_0x28489e(0x157)),_0xb4c63=query(_0x4b4448,orderBy(_0x28489e(0x16a),_0x28489e(0x13b)),limit(0x64)),_0x24adc3=await getDocs(_0xb4c63);_0x24adc3[_0x28489e(0x15a)]?console['log']('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console[_0x28489e(0x13d)](_0x28489e(0x106)+_0x24adc3[_0x28489e(0x14f)]+_0x28489e(0x172));const _0x509c5f=new Map();_0x24adc3[_0x28489e(0x136)](_0x5507a5=>{const _0x53382d=_0x28489e,_0x14363c=_0x5507a5[_0x53382d(0x13c)]();let _0x2cf27d=null;if(_0x14363c[_0x53382d(0x124)])_0x2cf27d=_0x14363c[_0x53382d(0x124)];else{if(_0x14363c[_0x53382d(0xf3)])_0x2cf27d=_0x14363c[_0x53382d(0xf3)];else{if(_0x14363c['player']&&typeof _0x14363c['player']==='string')_0x2cf27d=_0x14363c['player'];else{if(_0x14363c[_0x53382d(0x11f)]&&_0x104610[_0x53382d(0x11a)](_0x14363c[_0x53382d(0x11f)]))_0x2cf27d=_0x104610[_0x53382d(0x145)](_0x14363c[_0x53382d(0x11f)]);else _0x14363c[_0x53382d(0x110)]&&_0x104610[_0x53382d(0x11a)](_0x14363c[_0x53382d(0x110)])&&(_0x2cf27d=_0x104610['get'](_0x14363c[_0x53382d(0x110)]));}}}(_0x14363c[_0x53382d(0x124)]===_0x53382d(0x10f)||_0x14363c[_0x53382d(0xf3)]===_0x53382d(0x10f)||_0x14363c['player']&&_0x104610[_0x53382d(0x145)](_0x14363c[_0x53382d(0x11f)])==='pilot')&&console[_0x53382d(0x13d)](_0x53382d(0x11e),_0x14363c),_0x2cf27d&&_0x3e0e96[_0x53382d(0x12c)](_0x2cf27d)&&(!_0x509c5f[_0x53382d(0x11a)](_0x2cf27d)&&_0x509c5f[_0x53382d(0x16b)](_0x2cf27d,[]),_0x509c5f[_0x53382d(0x145)](_0x2cf27d)[_0x53382d(0x131)]({..._0x14363c,'timestamp':_0x14363c[_0x53382d(0x16a)]?.[_0x53382d(0xe9)]||0x0}));}),console[_0x28489e(0x13d)](_0x28489e(0x134)+_0x509c5f[_0x28489e(0x14f)]+_0x28489e(0x105)),_0x509c5f[_0x28489e(0x136)]((_0x20016f,_0xafc9d2)=>{const _0x218f16=_0x28489e;if(_0x20016f[_0x218f16(0x112)]>0x0){_0x20016f[_0x218f16(0x14d)]((_0x23b82f,_0x406df)=>_0x406df[_0x218f16(0x16a)]-_0x23b82f['timestamp']);const _0x4e3c9a=_0x20016f[_0x218f16(0x162)](_0x328fea=>_0x328fea['change']!==undefined||_0x328fea[_0x218f16(0xec)]!==undefined&&_0x328fea[_0x218f16(0x153)]!==undefined);if(_0x4e3c9a){let _0x13f92f;if(_0x4e3c9a[_0x218f16(0x167)]!==undefined)_0x13f92f=_0x4e3c9a[_0x218f16(0x167)];else _0x4e3c9a['newElo']!==undefined&&_0x4e3c9a[_0x218f16(0x153)]!==undefined&&(_0x13f92f=_0x4e3c9a[_0x218f16(0xec)]-_0x4e3c9a['previousElo']);_0x13f92f!==undefined&&(_0x4348fb[_0x218f16(0x16b)](_0xafc9d2,_0x13f92f),console[_0x218f16(0x13d)]('D3:\x20'+_0xafc9d2+_0x218f16(0x120)+_0x13f92f));}}});if(_0x509c5f[_0x28489e(0x14f)]===0x0){console[_0x28489e(0x13d)](_0x28489e(0x144));const _0x1de043=collection(db,_0x28489e(0x16d)),_0x597c16=query(_0x1de043,where(_0x28489e(0xf8),'==','D3'),orderBy(_0x28489e(0x16a),_0x28489e(0x13b)),limit(0x32));try{const _0x47f493=await getDocs(_0x597c16);console[_0x28489e(0x13d)]('D3:\x20Found\x20'+_0x47f493[_0x28489e(0x14f)]+_0x28489e(0x14a)),_0x47f493['forEach'](_0x3d93d8=>{const _0xa5e4bb=_0x28489e,_0x51e726=_0x3d93d8[_0xa5e4bb(0x13c)]();let _0x230a30=_0x51e726[_0xa5e4bb(0x124)]||_0x51e726[_0xa5e4bb(0xf3)];!_0x230a30&&_0x51e726[_0xa5e4bb(0x11f)]&&_0x104610[_0xa5e4bb(0x11a)](_0x51e726[_0xa5e4bb(0x11f)])&&(_0x230a30=_0x104610['get'](_0x51e726[_0xa5e4bb(0x11f)]));if(_0x230a30&&_0x3e0e96[_0xa5e4bb(0x12c)](_0x230a30)){const _0x4886af=_0x51e726[_0xa5e4bb(0x167)]||(_0x51e726[_0xa5e4bb(0xec)]!==undefined&&_0x51e726[_0xa5e4bb(0x153)]!==undefined?_0x51e726[_0xa5e4bb(0xec)]-_0x51e726['previousElo']:0x0);_0x4886af!==0x0&&(_0x4348fb[_0xa5e4bb(0x16b)](_0x230a30,_0x4886af),console[_0xa5e4bb(0x13d)](_0xa5e4bb(0x10e)+_0x230a30+_0xa5e4bb(0xf7)+_0x4886af));}});}catch(_0x58af22){console[_0x28489e(0x13d)](_0x28489e(0x174),_0x58af22);}}const _0x21cd91=Array[_0x28489e(0x122)](_0x4348fb[_0x28489e(0x173)]())[_0x28489e(0x164)](([_0x38764f,_0x52d3ae])=>_0x52d3ae!==0x0);console['log'](_0x28489e(0x133),_0x21cd91);}catch(_0x51bea6){console[_0x28489e(0x115)](_0x28489e(0xf0),_0x51bea6);}return _0x4348fb;}export{displayLadderD3,updatePlayerPositions};