const a24_0x5d7992=a24_0x5b33,a24_0x451d75=(function(){let _0x42d496=!![];return function(_0x2dd793,_0x1ec4c2){const _0x489ed9=_0x42d496?function(){if(_0x1ec4c2){const _0x30eb9c=_0x1ec4c2['apply'](_0x2dd793,arguments);return _0x1ec4c2=null,_0x30eb9c;}}:function(){};return _0x42d496=![],_0x489ed9;};}()),a24_0x28001b=a24_0x451d75(this,function(){const _0x5d9baf=a24_0x5b33,_0x56d33d=function(){const _0x5e0893=a24_0x5b33;let _0x13cb88;try{_0x13cb88=Function(_0x5e0893(0x1c8)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3f030d){_0x13cb88=window;}return _0x13cb88;},_0x5968ac=_0x56d33d(),_0xae6e24=_0x5968ac[_0x5d9baf(0x1ff)]=_0x5968ac['console']||{},_0x4d5e3b=['log',_0x5d9baf(0x1e3),'info','error','exception',_0x5d9baf(0x1e9),'trace'];for(let _0x521def=0x0;_0x521def<_0x4d5e3b[_0x5d9baf(0x1f2)];_0x521def++){const _0x56bbd4=a24_0x451d75['constructor'][_0x5d9baf(0x1cc)]['bind'](a24_0x451d75),_0x21c132=_0x4d5e3b[_0x521def],_0x317612=_0xae6e24[_0x21c132]||_0x56bbd4;_0x56bbd4[_0x5d9baf(0x1e0)]=a24_0x451d75['bind'](a24_0x451d75),_0x56bbd4[_0x5d9baf(0x1e5)]=_0x317612[_0x5d9baf(0x1e5)]['bind'](_0x317612),_0xae6e24[_0x21c132]=_0x56bbd4;}});function a24_0x5b33(_0x23309d,_0x5c112a){const _0x28001b=a24_0x27b4();return a24_0x5b33=function(_0x451d75,_0x519b7f){_0x451d75=_0x451d75-0x1bb;let _0x27b4b3=_0x28001b[_0x451d75];return _0x27b4b3;},a24_0x5b33(_0x23309d,_0x5c112a);}function a24_0x27b4(){const _0x236a79=['When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.','all','accepted','getTimeAgo','\x22\x20data-invitation-id=\x22','modal-styles','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','disabled','sort','sentUnsubscribe','div','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','pageSize','return\x20(function()\x20','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>','addEventListener','currentFilter','prototype','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','appendChild','sent-invitation','<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>','classList','updateInvitationStatus','error','createdAt','add','init','createTeamFromInvitation','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','teamColor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelectorAll','onAuthStateChanged','remove','getElementById','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','__proto__','setupActionListeners','pending','warn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','toString','setupEventListeners','proposedTeamName','filter','table','To:\x20','active','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22','.filter-btn','className','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','value','DOMContentLoaded','length','Just\x20now','find',';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','outbox','data','toDate','head','docs','map','invitations','Error\x20performing\x20','renderInvitations','console','none','status','unsubscribe'];a24_0x27b4=function(){return _0x236a79;};return a24_0x27b4();}a24_0x28001b();import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class InboxManager{constructor(){const _0x34d51d=a24_0x5b33;this[_0x34d51d(0x1cb)]='pending',this['invitations']=[],this['sentInvitations']=[],this[_0x34d51d(0x202)]=null,this['sentUnsubscribe']=null,this[_0x34d51d(0x1c7)]=0x14,this['lastDoc']=null,this['hasMore']=!![],this[_0x34d51d(0x1d6)]();}async['init'](){const _0xffb4e9=a24_0x5b33;auth[_0xffb4e9(0x1dc)](_0x5a0635=>{const _0x4a3b11=_0xffb4e9;_0x5a0635?(this['loadInvitations'](_0x5a0635['uid']),this[_0x4a3b11(0x1e6)]()):window['location']['href']='./login.html';});}['setupEventListeners'](){document['querySelectorAll']('.filter-btn')['forEach'](_0x49ca9c=>{const _0x5eaa91=a24_0x5b33;_0x49ca9c[_0x5eaa91(0x1ca)]('click',()=>{const _0xd0b478=_0x5eaa91;document[_0xd0b478(0x1db)](_0xd0b478(0x1ed))['forEach'](_0xad3741=>_0xad3741['classList']['remove'](_0xd0b478(0x1eb))),_0x49ca9c[_0xd0b478(0x1d1)][_0xd0b478(0x1d5)]('active'),this[_0xd0b478(0x1cb)]=_0x49ca9c['dataset']['filter'],this['renderInvitations']();});});}['loadInvitations'](_0x27a012){const _0x35f754=a24_0x5b33,_0x14278f=collection(db,'gameInvitations');let _0x207777=query(_0x14278f,where('toUserId','==',_0x27a012),orderBy(_0x35f754(0x1d4),'desc'),limit(this['pageSize']));this[_0x35f754(0x202)]=onSnapshot(_0x207777,_0x3c22b7=>{const _0x14be62=_0x35f754;this[_0x14be62(0x1fc)]=_0x3c22b7[_0x14be62(0x1fa)]['map'](_0x14be18=>({'id':_0x14be18['id'],..._0x14be18[_0x14be62(0x1f7)]()})),this['renderInvitations'](),this['updateNotificationCount']();});let _0x1084fb=query(_0x14278f,where('fromUserId','==',_0x27a012),orderBy('createdAt','desc'),limit(this[_0x35f754(0x1c7)]));this[_0x35f754(0x1c4)]=onSnapshot(_0x1084fb,_0x4f159f=>{const _0x2c3420=_0x35f754;this['sentInvitations']=_0x4f159f[_0x2c3420(0x1fa)][_0x2c3420(0x1fb)](_0x3d9381=>({'id':_0x3d9381['id'],..._0x3d9381['data'](),'isSent':!![]})),this['renderInvitations']();});}[a24_0x5d7992(0x1fe)](){const _0x142611=a24_0x5d7992,_0x33fc35=document['getElementById']('inbox-content');if(!_0x33fc35)return;let _0x425d5b=[];if(this['currentFilter']==='outbox')_0x425d5b=this['sentInvitations'];else this['currentFilter']===_0x142611(0x1bc)?_0x425d5b=[...this['invitations'],...this['sentInvitations']][_0x142611(0x1c3)]((_0x4315bd,_0x422ec6)=>{const _0x13a721=_0x142611,_0x5b534e=_0x4315bd[_0x13a721(0x1d4)]?.['toDate']?_0x4315bd['createdAt'][_0x13a721(0x1f8)]():new Date(_0x4315bd['createdAt']),_0x1ba726=_0x422ec6['createdAt']?.[_0x13a721(0x1f8)]?_0x422ec6['createdAt'][_0x13a721(0x1f8)]():new Date(_0x422ec6[_0x13a721(0x1d4)]);return _0x1ba726-_0x5b534e;}):_0x425d5b=this[_0x142611(0x1fc)]['filter'](_0xc80645=>_0xc80645['status']===this[_0x142611(0x1cb)]);if(_0x425d5b[_0x142611(0x1f2)]===0x0){const _0x11e1e4=this['currentFilter']===_0x142611(0x1f6)?'sent':this['currentFilter']==='all'?'':this['currentFilter'];_0x33fc35['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x11e1e4+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this[_0x142611(0x1cb)]==='outbox'?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':_0x142611(0x1bb))+_0x142611(0x1cd);return;}_0x33fc35['innerHTML']=_0x425d5b['map'](_0x2cf963=>this['createInvitationCard'](_0x2cf963))['join'](''),this['setupActionListeners']();}['createInvitationCard'](_0x2721ab){const _0x2a9e0a=a24_0x5d7992,_0xb6b7aa=_0x2721ab['createdAt']?.['toDate']?_0x2721ab['createdAt']['toDate']():new Date(_0x2721ab[_0x2a9e0a(0x1d4)]),_0x4fdb38=this[_0x2a9e0a(0x1be)](_0xb6b7aa),_0x23c7fc=_0x2721ab['isSent']||![];let _0xee8111='';return _0x2721ab['type']==='team_invite'?_0xee8111=_0x2a9e0a(0x1e4)+_0x2721ab['message']+_0x2a9e0a(0x1df)+_0x2721ab['teamData'][_0x2a9e0a(0x1d9)]+_0x2a9e0a(0x1f5)+_0x2721ab['teamData']['proposedTeamName']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20â€¢\x20Color:\x20'+_0x2721ab['teamData']['teamColor']+_0x2a9e0a(0x1c6):_0xee8111=_0x2a9e0a(0x1e4)+_0x2721ab['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20'+_0x2721ab[_0x2a9e0a(0x201)]+'\x20'+(_0x23c7fc?_0x2a9e0a(0x1cf):'')+_0x2a9e0a(0x1bf)+_0x2721ab['id']+_0x2a9e0a(0x1ef)+(_0x23c7fc?_0x2a9e0a(0x1ea)+_0x2721ab['toUsername']:_0x2721ab['fromUsername'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x23c7fc?_0x2a9e0a(0x1d0):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x4fdb38+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x2721ab[_0x2a9e0a(0x201)]+'\x22>'+_0x2721ab['status']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xee8111+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(!_0x23c7fc&&_0x2721ab['status']===_0x2a9e0a(0x1e2)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x2721ab['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x2721ab['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2721ab['type']!=='team_invite'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x2721ab['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x2a9e0a(0x1da)+(_0x23c7fc&&_0x2721ab['status']==='pending'?_0x2a9e0a(0x1ec)+_0x2721ab['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x2a9e0a(0x1d8);}[a24_0x5d7992(0x1e1)](){document['querySelectorAll']('.action-btn')['forEach'](_0x1c461a=>{_0x1c461a['addEventListener']('click',async _0x18f1d4=>{const _0x16e317=a24_0x5b33,_0xd5c2e8=_0x1c461a['dataset']['action'],_0x239a55=_0x1c461a['dataset']['invitationId'];_0x1c461a[_0x16e317(0x1c2)]=!![];const _0x5b95ac=_0x1c461a['innerHTML'];_0x1c461a['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0xd5c2e8){case'accept':await this[_0x16e317(0x1d2)](_0x239a55,_0x16e317(0x1bd));break;case'decline':await this['updateInvitationStatus'](_0x239a55,'declined');break;case'cancel':await this['updateInvitationStatus'](_0x239a55,'cancelled');break;case'respond':this['openResponseModal'](_0x239a55);break;}}catch(_0x57c149){console['error'](_0x16e317(0x1fd)+_0xd5c2e8+':',_0x57c149),alert('Failed\x20to\x20'+_0xd5c2e8+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x1c461a['disabled']=![],_0x1c461a['innerHTML']=_0x5b95ac;}});});}async['updateInvitationStatus'](_0x330bf9,_0xeb3541){const _0x3771c1=a24_0x5d7992;try{const _0x2e737a=this['invitations']['find'](_0x18ec78=>_0x18ec78['id']===_0x330bf9);_0x2e737a&&_0x2e737a['type']==='team_invite'&&_0xeb3541===_0x3771c1(0x1bd)&&await this['createTeamFromInvitation'](_0x2e737a);const _0x4de3d7=doc(db,'gameInvitations',_0x330bf9);await updateDoc(_0x4de3d7,{'status':_0xeb3541,'respondedAt':new Date()}),_0x2e737a&&(_0x2e737a['status']=_0xeb3541,_0x2e737a['respondedAt']=new Date(),this['renderInvitations']());}catch(_0x1c5a13){console['error']('Error\x20updating\x20invitation\x20status:',_0x1c5a13);throw _0x1c5a13;}}['openResponseModal'](_0x31130f){const _0x562f2d=a24_0x5d7992,_0x163f2e=this['invitations'][_0x562f2d(0x1f4)](_0x499ec4=>_0x499ec4['id']===_0x31130f);if(!_0x163f2e)return;const _0x2f420b=document['createElement'](_0x562f2d(0x1c5));_0x2f420b[_0x562f2d(0x1ee)]='modal-overlay',_0x2f420b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x163f2e['fromUsername']+_0x562f2d(0x1c9)+_0x163f2e['value']+'</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';if(!document['getElementById'](_0x562f2d(0x1c0))){const _0x561c53=document['createElement']('style');_0x561c53['id']='modal-styles',_0x561c53['textContent']=_0x562f2d(0x1c1),document[_0x562f2d(0x1f9)][_0x562f2d(0x1ce)](_0x561c53);}document['body']['appendChild'](_0x2f420b),_0x2f420b['querySelector']('.modal-close')[_0x562f2d(0x1ca)]('click',()=>_0x2f420b[_0x562f2d(0x1dd)]()),_0x2f420b['querySelector']('#cancel-response')['addEventListener']('click',()=>_0x2f420b['remove']()),_0x2f420b[_0x562f2d(0x1ca)]('click',_0x51732a=>{if(_0x51732a['target']===_0x2f420b)_0x2f420b['remove']();}),_0x2f420b['querySelector']('#send-response')[_0x562f2d(0x1ca)]('click',()=>{const _0x5adfec=_0x562f2d,_0x1a2dca=document['getElementById']('response-message')[_0x5adfec(0x1f0)]['trim']();_0x1a2dca&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x2f420b['remove']());});}async[a24_0x5d7992(0x1d7)](_0xb17bbf){const _0x20dcf1=a24_0x5d7992;try{const {createTeam:_0x76b011}=await import('./ladderduos.js'),_0x1d9a4e=await _0x76b011(_0xb17bbf['fromUsername'],_0xb17bbf['toUsername'],_0xb17bbf['teamData'][_0x20dcf1(0x1e7)],_0xb17bbf['teamData'][_0x20dcf1(0x1d9)]);if(!_0x1d9a4e['success'])throw new Error(_0x1d9a4e[_0x20dcf1(0x1d3)]);alert('Team\x20\x22'+_0xb17bbf['teamData']['proposedTeamName']+'\x22\x20created\x20successfully!');}catch(_0x104b0d){console[_0x20dcf1(0x1d3)]('Error\x20creating\x20team:',_0x104b0d);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0x104b0d['message']);}}['updateNotificationCount'](){const _0x3dd2e1=a24_0x5d7992,_0xaa343c=this['invitations'][_0x3dd2e1(0x1e8)](_0xe0cb69=>_0xe0cb69['status']===_0x3dd2e1(0x1e2))['length'],_0x5adff4=document[_0x3dd2e1(0x1de)]('inbox-notification');_0x5adff4&&(_0xaa343c>0x0?(_0x5adff4['style']['display']='inline-block',_0x5adff4['textContent']=_0xaa343c>0x9?'9+':_0xaa343c):_0x5adff4['style']['display']=_0x3dd2e1(0x200));}['getTimeAgo'](_0x509858){const _0x146ce5=a24_0x5d7992,_0x439590=new Date(),_0x112778=_0x439590-_0x509858,_0x28b8f4=Math['floor'](_0x112778/(0x3e8*0x3c)),_0x5077e7=Math['floor'](_0x112778/(0x3e8*0x3c*0x3c)),_0x52c1be=Math['floor'](_0x112778/(0x3e8*0x3c*0x3c*0x18));if(_0x28b8f4<0x1)return _0x146ce5(0x1f3);if(_0x28b8f4<0x3c)return _0x28b8f4+'m\x20ago';if(_0x5077e7<0x18)return _0x5077e7+'h\x20ago';if(_0x52c1be<0x7)return _0x52c1be+'d\x20ago';return _0x509858['toLocaleDateString']();}['destroy'](){const _0x462cfc=a24_0x5d7992;this[_0x462cfc(0x202)]&&this['unsubscribe'](),this['sentUnsubscribe']&&this['sentUnsubscribe']();}}document['addEventListener'](a24_0x5d7992(0x1f1),()=>{new InboxManager();});