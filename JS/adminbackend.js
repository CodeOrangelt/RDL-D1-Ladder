const a4_0x589c4c=a4_0x22fa,a4_0x292f70=(function(){let _0x44dd10=!![];return function(_0x10e8a9,_0x342152){const _0x1c0e31=_0x44dd10?function(){if(_0x342152){const _0x4ba85f=_0x342152['apply'](_0x10e8a9,arguments);return _0x342152=null,_0x4ba85f;}}:function(){};return _0x44dd10=![],_0x1c0e31;};}()),a4_0x502c36=a4_0x292f70(this,function(){const _0x115442=a4_0x22fa;let _0xfafb74;try{const _0x4f098e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xfafb74=_0x4f098e();}catch(_0x4157c3){_0xfafb74=window;}const _0x185295=_0xfafb74['console']=_0xfafb74['console']||{},_0x1653ab=['log','warn',_0x115442(0x170),'error',_0x115442(0x35b),'table','trace'];for(let _0x16abb3=0x0;_0x16abb3<_0x1653ab['length'];_0x16abb3++){const _0x193e57=a4_0x292f70['constructor']['prototype']['bind'](a4_0x292f70),_0xf29409=_0x1653ab[_0x16abb3],_0x3c827e=_0x185295[_0xf29409]||_0x193e57;_0x193e57['__proto__']=a4_0x292f70['bind'](a4_0x292f70),_0x193e57['toString']=_0x3c827e[_0x115442(0x361)]['bind'](_0x3c827e),_0x185295[_0xf29409]=_0x193e57;}});a4_0x502c36();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x3d1f46){const _0xfda290=a4_0x22fa;if(!_0x3d1f46)return'#ffffff';_0x3d1f46=_0x3d1f46['replace']('#','');_0x3d1f46['length']===0x3&&(_0x3d1f46=_0x3d1f46['split']('')['map'](_0x1e3176=>_0x1e3176+_0x1e3176)['join'](''));if(_0x3d1f46['length']!==0x6)return'#ffffff';const _0xf1f638=parseInt(_0x3d1f46['substring'](0x0,0x2),0x10),_0x26cdf6=parseInt(_0x3d1f46['substring'](0x2,0x4),0x10),_0x376c6b=parseInt(_0x3d1f46['substring'](0x4,0x6),0x10),_0x58d690=(_0xf1f638*0x12b+_0x26cdf6*0x24b+_0x376c6b*0x72)/0x3e8;return _0x58d690>=0x80?_0xfda290(0x336):'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x4dce50=>{if(!_0x4dce50){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x426835){console['error']('Error\x20initializing\x20dashboard:',_0x426835),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x3b0d99){const _0x56f034=a4_0x22fa;if(!_0x3b0d99)return[_0x56f034(0x1b7)];console[_0x56f034(0x1b5)]('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x3b0d99+'\x20in\x20all\x20collections...');const _0x2193e2=[{'name':_0x56f034(0x320),'displayName':_0x56f034(0x2cc)},{'name':'players','displayName':'D1\x20Players'},{'name':_0x56f034(0x2db),'displayName':_0x56f034(0x295)},{'name':_0x56f034(0x204),'displayName':_0x56f034(0x1a0)},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x3aa71a=auth['currentUser'];let _0x32029d=null,_0x7f58f7=null;for(const _0xf04069 of _0x2193e2){try{if(_0x3aa71a){const _0x52c6d0=doc(db,_0xf04069[_0x56f034(0x14d)],_0x3aa71a['uid']),_0x239cc5=await getDoc(_0x52c6d0);if(_0x239cc5['exists']()){const _0x2871c6=_0x239cc5[_0x56f034(0x1d9)]();console['log']('Found\x20user\x20in\x20'+_0xf04069[_0x56f034(0x2c3)]+'\x20by\x20UID:',_0x2871c6);const _0x3e9b5d=(_0x2871c6['roleName']||_0x2871c6['role']||'')[_0x56f034(0x398)]();if(_0x3e9b5d&&_0x3e9b5d!==_0x56f034(0x257)){_0x32029d=_0x3e9b5d,_0x7f58f7=_0xf04069['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x32029d+'\x20in\x20'+_0x7f58f7);break;}}}if(!_0x32029d){const _0x3ddd40=collection(db,_0xf04069['name']),_0xdd32df=query(_0x3ddd40,where('email','==',_0x3b0d99)),_0xbfa199=await getDocs(_0xdd32df);if(!_0xbfa199['empty']){const _0x57ab6a=_0xbfa199['docs'][0x0][_0x56f034(0x1d9)]();console['log'](_0x56f034(0x20d)+_0xf04069['displayName']+_0x56f034(0x231)+_0x3b0d99+':',_0x57ab6a);const _0x588607=(_0x57ab6a[_0x56f034(0x14c)]||_0x57ab6a['role']||'')['toLowerCase']();if(_0x588607&&_0x588607!=='none'){_0x32029d=_0x588607,_0x7f58f7=_0xf04069['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x32029d+'\x20in\x20'+_0x7f58f7);break;}}}}catch(_0x238514){console['error']('Error\x20checking\x20'+_0xf04069['displayName']+':',_0x238514);}}if(_0x32029d){console[_0x56f034(0x1b5)]('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x32029d+'\x20(from\x20'+_0x7f58f7+')');const _0x3205f6={'admin':['dashboard',_0x56f034(0x383),'manage-matches','manage-articles',_0x56f034(0x163),_0x56f034(0x160),'inactive-players','settings','manage-trophies','elo-history','manage-highlights',_0x56f034(0x1ab),'manage-matches',_0x56f034(0x174),'manage-levels-ribbons',_0x56f034(0x2a6)],'owner':['dashboard','manage-players',_0x56f034(0x284),'manage-articles','manage-trophies','manage-ranks',_0x56f034(0x177),'settings',_0x56f034(0x163),'elo-history','manage-highlights',_0x56f034(0x1ab),'manage-matches',_0x56f034(0x174),'manage-levels-ribbons','manage-ribbons'],'council':['dashboard','manage-players',_0x56f034(0x284)],'creative\x20lead':['dashboard','manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x3205f6[_0x32029d])return console[_0x56f034(0x1b5)]('Role\x20\x27'+_0x32029d+'\x27\x20has\x20permissions:',_0x3205f6[_0x32029d]),_0x3205f6[_0x32029d];}return console['log'](_0x56f034(0x1a6)+_0x3b0d99+_0x56f034(0x218)),[_0x56f034(0x1b7)];}function setupSidebarNavigation(_0x16e960=[]){const _0x2cc6dd=a4_0x22fa,_0x551d43=document[_0x2cc6dd(0x263)]('.sidebar-nav\x20.nav-item'),_0x58b3a6=document['querySelectorAll'](_0x2cc6dd(0x265));(!_0x16e960||_0x16e960['length']===0x0)&&(_0x16e960=['dashboard']);_0x551d43['forEach'](_0x5d9273=>{const _0x3546dd=_0x2cc6dd,_0x49bf63=_0x5d9273['getAttribute']('data-section');_0x16e960['includes'](_0x49bf63)?_0x5d9273['style']['display']=_0x3546dd(0x34b):_0x5d9273['style']['display']='none',_0x5d9273['addEventListener']('click',()=>{const _0x1eae53=_0x3546dd,_0x5c844b=_0x5d9273[_0x1eae53(0x1fe)]('data-section');if(!_0x16e960[_0x1eae53(0x23e)](_0x5c844b)){showNotification(_0x1eae53(0x26d),_0x1eae53(0x2fb));return;}_0x551d43['forEach'](_0x305cb6=>_0x305cb6['classList'][_0x1eae53(0x307)]('active')),_0x5d9273[_0x1eae53(0x373)]['add'](_0x1eae53(0x365)),_0x58b3a6[_0x1eae53(0x15b)](_0x39b13c=>{const _0x2363bc=_0x1eae53;_0x39b13c[_0x2363bc(0x1ce)]['display']='none';});const _0x9a2774=document[_0x1eae53(0x168)](_0x5c844b);_0x9a2774&&(_0x9a2774['style']['display']=_0x1eae53(0x362),console['log']('Switched\x20to\x20'+_0x5c844b+'\x20section'));});});const _0x5e6919=document['querySelector'](_0x2cc6dd(0x313)+_0x16e960[0x0]+'\x22]');_0x5e6919&&_0x5e6919['click'](),console[_0x2cc6dd(0x1b5)]('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0xd2021c=document['querySelectorAll']('.nav-item');let _0x4bdee1=null,_0x383fb0=new Set();_0xd2021c['forEach'](_0x3a0df1=>{const _0x573b51=a4_0x22fa;_0x3a0df1[_0x573b51(0x264)]('click',function(){const _0x50c81c=_0x573b51,_0x4d733c=this['getAttribute']('data-section');if(_0x4d733c===_0x4bdee1)return;_0x4bdee1&&(document[_0x50c81c(0x168)](_0x4bdee1)['style']['display']='none',_0xd2021c['forEach'](_0x13e7fc=>_0x13e7fc[_0x50c81c(0x373)]['remove'](_0x50c81c(0x365)))),document['getElementById'](_0x4d733c)['style']['display']='block',this['classList']['add']('active'),_0x4bdee1=_0x4d733c;});});}function loadSectionData(_0x2bf484){return;}async function initializeAdminDashboard(){const _0x3e497d=a4_0x22fa;try{const _0x372515=auth['currentUser'],_0x6b125a=await getUserTabPermissions(_0x372515['email']);console[_0x3e497d(0x1b5)]('User\x20'+_0x372515['email']+_0x3e497d(0x304),_0x6b125a),window[_0x3e497d(0x2e1)]=_0x6b125a,setupSidebarNavigation(_0x6b125a),setupLadderSelector(),setupDashboardSection(),_0x6b125a['includes']('manage-players')&&setupManagePlayersSection(),_0x6b125a['includes']('elo-history')&&setupEloHistorySection(),_0x6b125a['includes']('manage-ranks')&&setupRankControls(),_0x6b125a['includes']('manage-articles')&&setupManageArticlesSection(),_0x6b125a[_0x3e497d(0x23e)]('user-roles-section')&&setupUserRolesSection(),_0x6b125a['includes'](_0x3e497d(0x163))&&setupTrophyManagementSection(),_0x6b125a['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x6b125a['includes'](_0x3e497d(0x177))&&setupInactivePlayersSection(),_0x6b125a['includes']('manage-matches')&&setupManageMatchesSection(),_0x6b125a['includes']('manage-points')&&setupManagePointsSection(),_0x6b125a[_0x3e497d(0x23e)]('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x6b125a);}catch(_0x23d330){console[_0x3e497d(0x2fb)]('Error\x20initializing\x20admin\x20dashboard:',_0x23d330);}}function setupDataLoadButtons(_0x33d265=[]){const _0x2a0d89=a4_0x22fa;(!_0x33d265||_0x33d265['length']===0x0)&&(_0x33d265=[_0x2a0d89(0x1b7)]);const _0x37d61c=document['getElementById']('load-dashboard-data');_0x37d61c&&_0x37d61c['addEventListener'](_0x2a0d89(0x37a),function(){const _0x3f5446=_0x2a0d89;this['classList']['add']('loading'),this[_0x3f5446(0x30b)]=_0x3f5446(0x188),loadDashboardOverview()['then'](()=>{const _0x613976=_0x3f5446;this['classList'][_0x613976(0x307)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x1c0abb=>{const _0x527972=_0x3f5446;console['error']('Error\x20loading\x20dashboard:',_0x1c0abb),this['classList']['remove'](_0x527972(0x1b1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2b8edc=_0x527972;this['innerHTML']=_0x2b8edc(0x23d);},0xbb8);});});if(_0x33d265['includes']('manage-trophies')){const _0x4e1648=document['getElementById'](_0x2a0d89(0x180));_0x4e1648&&_0x4e1648['addEventListener']('click',function(){const _0x455b9e=_0x2a0d89;console[_0x455b9e(0x1b5)]('Load\x20trophies\x20data\x20clicked'),this['classList']['add'](_0x455b9e(0x1b1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0x455b9e(0x1cb)](()=>{const _0x1de492=_0x455b9e;this['classList']['remove'](_0x1de492(0x1b1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x18a60c=>{const _0x20caf3=_0x455b9e;console['error']('Error\x20loading\x20trophies:',_0x18a60c),this['classList'][_0x20caf3(0x307)](_0x20caf3(0x1b1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5016d6=_0x20caf3;this['innerHTML']=_0x5016d6(0x1a7);},0xbb8);});});}if(_0x33d265['includes']('manage-players')){const _0x119712=document['getElementById']('load-players-data');_0x119712&&_0x119712['addEventListener']('click',function(){console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x28373f=a4_0x22fa;this['classList'][_0x28373f(0x307)](_0x28373f(0x1b1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x1f75a4=>{const _0x3196a9=a4_0x22fa;console['error'](_0x3196a9(0x262),_0x1f75a4),this[_0x3196a9(0x373)]['remove']('loading'),this['innerHTML']=_0x3196a9(0x156),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x33d265['includes']('elo-history')){const _0x385ca3=document[_0x2a0d89(0x168)](_0x2a0d89(0x18d));_0x385ca3&&_0x385ca3[_0x2a0d89(0x264)]('click',function(){const _0x1ce7d0=_0x2a0d89;console[_0x1ce7d0(0x1b5)](_0x1ce7d0(0x27d)),this[_0x1ce7d0(0x373)]['add'](_0x1ce7d0(0x1b1)),this[_0x1ce7d0(0x30b)]=_0x1ce7d0(0x188),loadEloHistory(0x1)['then'](()=>{const _0x42c2f0=_0x1ce7d0;this['classList'][_0x42c2f0(0x307)](_0x42c2f0(0x1b1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x1ce7d0(0x189)](_0x2dcb93=>{const _0x1a8419=_0x1ce7d0;console[_0x1a8419(0x2fb)]('Error\x20loading\x20history:',_0x2dcb93),this[_0x1a8419(0x373)]['remove']('loading'),this[_0x1a8419(0x30b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1f36b9=_0x1a8419;this['innerHTML']=_0x1f36b9(0x2ab);},0xbb8);});});}if(_0x33d265['includes']('manage-articles')){const _0x18089a=document['getElementById'](_0x2a0d89(0x2d9));_0x18089a&&_0x18089a[_0x2a0d89(0x264)]('click',function(){const _0x2dd135=_0x2a0d89;console['log'](_0x2dd135(0x209)),this['classList']['add']('loading'),this[_0x2dd135(0x30b)]=_0x2dd135(0x188),loadArticles()['then'](()=>{const _0x3d49b0=_0x2dd135;this['classList'][_0x3d49b0(0x307)](_0x3d49b0(0x1b1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x3d03b5=>{const _0x59efb3=_0x2dd135;console[_0x59efb3(0x2fb)]('Error\x20loading\x20articles:',_0x3d03b5),this['classList']['remove']('loading'),this['innerHTML']=_0x59efb3(0x156),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x33d265['includes']('user-roles-section')){const _0x336ce7=document['getElementById']('load-users-data');_0x336ce7&&_0x336ce7['addEventListener'](_0x2a0d89(0x37a),function(){const _0x45ca57=_0x2a0d89;console['log'](_0x45ca57(0x18a)),this['classList']['add']('loading'),this[_0x45ca57(0x30b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x2aa4b6=_0x45ca57;this[_0x2aa4b6(0x373)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x45ca57(0x189)](_0x15edf2=>{const _0x477602=_0x45ca57;console['error'](_0x477602(0x154),_0x15edf2),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x33d265['includes']('inactive-players')){const _0x35724a=document[_0x2a0d89(0x168)]('load-inactive-players-data');_0x35724a&&_0x35724a['addEventListener']('click',function(){const _0x385f35=_0x2a0d89;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x385f35(0x188),loadInactivePlayersData()['then'](()=>{const _0x2e82e9=_0x385f35;this['classList'][_0x2e82e9(0x307)](_0x2e82e9(0x1b1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x231de3=>{const _0x286910=_0x385f35;console['error'](_0x286910(0x1ba),_0x231de3),this['classList'][_0x286910(0x307)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x206edb=_0x286910;this[_0x206edb(0x30b)]=_0x206edb(0x1dc);},0xbb8);});});}if(_0x33d265[_0x2a0d89(0x23e)](_0x2a0d89(0x1c9))){const _0xc7d13a=document['getElementById']('load-highlights-data');_0xc7d13a&&_0xc7d13a['addEventListener']('click',function(){const _0x59dc18=_0x2a0d89;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x59dc18(0x1cb)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x159942=>{const _0x5d38a8=_0x59dc18;console[_0x5d38a8(0x2fb)](_0x5d38a8(0x19e),_0x159942),this['classList'][_0x5d38a8(0x307)]('loading'),this['innerHTML']=_0x5d38a8(0x156),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x33d265['includes']('manage-matches')){const _0x5b742c=document[_0x2a0d89(0x168)]('load-matches-data');_0x5b742c&&_0x5b742c[_0x2a0d89(0x264)]('click',function(){const _0x5ebb86=_0x2a0d89;console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x5ebb86(0x188),loadMatchesData(0x1)['then'](()=>{const _0xadca66=_0x5ebb86;this[_0xadca66(0x373)][_0xadca66(0x307)]('loading'),this['innerHTML']=_0xadca66(0x278);})['catch'](_0x5b2c01=>{console['error']('Error\x20loading\x20matches:',_0x5b2c01),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1f8261=a4_0x22fa;this[_0x1f8261(0x30b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x33d265['includes']('manage-ribbons')){const _0x49e013=document[_0x2a0d89(0x168)]('load-ribbons-data');_0x49e013&&_0x49e013[_0x2a0d89(0x264)]('click',function(){const _0x25c5e7=_0x2a0d89;console[_0x25c5e7(0x1b5)]('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x25c5e7(0x30b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x4d3a38=>{const _0x3cb7bb=_0x25c5e7;console['error'](_0x3cb7bb(0x19b),_0x4d3a38),this[_0x3cb7bb(0x373)][_0x3cb7bb(0x307)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x5f3d72=a4_0x22fa;document['getElementById'](_0x5f3d72(0x303))['textContent']='-',document[_0x5f3d72(0x168)](_0x5f3d72(0x311))['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x5f3d72(0x168)](_0x5f3d72(0x30d))['textContent']='-';}function setupLadderSelector(){const _0x193e83=a4_0x22fa,_0x4c760d=document['querySelectorAll'](_0x193e83(0x364));_0x4c760d['forEach'](_0x3958c9=>{_0x3958c9['addEventListener']('change',()=>{const _0x283142=a4_0x22fa;currentLadder=_0x3958c9[_0x283142(0x240)],document['body']['setAttribute'](_0x283142(0x36b),currentLadder);const _0x2053f8=document['getElementById']('current-ladder-display');_0x2053f8&&(_0x2053f8['textContent']=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x283142(0x311))[_0x283142(0x1ed)]='-',document[_0x283142(0x168)]('pending-count')[_0x283142(0x1ed)]='-',document['getElementById']('rejected-count')['textContent']='-',charts[_0x283142(0x1f5)]&&(charts['rankDistribution'][_0x283142(0x39a)](),charts['rankDistribution']=null),charts['activity']&&(charts[_0x283142(0x169)]['destroy'](),charts[_0x283142(0x169)]=null),showNotification('Switched\x20to\x20'+currentLadder+_0x283142(0x300),_0x283142(0x170));});});const _0x1ba91d=document[_0x193e83(0x168)]('current-ladder-display');_0x1ba91d&&(_0x1ba91d['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x3799d8=a4_0x22fa;try{console['log'](_0x3799d8(0x245)),document['getElementById']('player-count')['textContent']='-',document[_0x3799d8(0x168)]('match-count')['textContent']='-',document['getElementById']('pending-count')[_0x3799d8(0x1ed)]='-',document['getElementById']('rejected-count')['textContent']='-';const _0x4a9dea=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x54229c=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x3799d8(0x16a):'approvedMatchesD3',_0x27d316=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?_0x3799d8(0x2b3):'pendingMatchesD3',_0x4b3755=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0x3799d8(0x25b):'RejectedD3';console[_0x3799d8(0x1b5)](_0x3799d8(0x24d)+currentLadder+':\x20'+_0x4a9dea+',\x20'+_0x54229c);const _0x47477e=await getDocs(collection(db,_0x4a9dea)),_0x543de9=_0x47477e['size'],_0x39b3ee=await getDocs(collection(db,_0x54229c)),_0x23cf57=_0x39b3ee['size'],_0x3b9e21=await getDocs(collection(db,_0x27d316)),_0x545764=_0x3b9e21['size'],_0x3de464=await getDocs(collection(db,_0x4b3755)),_0x4ed4e3=_0x3de464['size'];return document[_0x3799d8(0x168)](_0x3799d8(0x303))[_0x3799d8(0x1ed)]=_0x543de9,document['getElementById']('match-count')['textContent']=_0x23cf57,document['getElementById'](_0x3799d8(0x36d))['textContent']=_0x545764,document['getElementById']('rejected-count')['textContent']=_0x4ed4e3,await createRankDistributionChart(),await createActivityChart(),console[_0x3799d8(0x1b5)]('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x2eb09b){console['error']('Error\x20loading\x20dashboard\x20data:',_0x2eb09b);throw _0x2eb09b;}}async function createRankDistributionChart(){const _0xd5c84d=a4_0x22fa;try{const _0x7b506e=collection(db,currentLadder==='D1'?_0xd5c84d(0x229):'playersD2'),_0x104016=await getDocs(_0x7b506e),_0x439a13={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x104016['forEach'](_0x35149=>{const _0x1b35e7=_0xd5c84d,_0x183a64=_0x35149['data'](),_0x446042=_0x183a64['eloRating']||0x4b0;if(_0x446042>=0x7d0)_0x439a13['Emerald']++;else{if(_0x446042>=0x708)_0x439a13[_0x1b35e7(0x2b4)]++;else{if(_0x446042>=0x640)_0x439a13[_0x1b35e7(0x2a4)]++;else{if(_0x446042>=0x578)_0x439a13[_0x1b35e7(0x164)]++;else _0x439a13[_0x1b35e7(0x2b9)]++;}}}});const _0x34bbb6=document[_0xd5c84d(0x168)]('rank-distribution-chart');charts[_0xd5c84d(0x1f5)]&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0x34bbb6,{'type':'doughnut','data':{'labels':Object['keys'](_0x439a13),'datasets':[{'data':Object[_0xd5c84d(0x2e6)](_0x439a13),'backgroundColor':[_0xd5c84d(0x22f),'#CD7F32','#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0xd5c84d(0x227),'color':_0xd5c84d(0x389),'font':{'size':0x10}}}}});}catch(_0x165502){console['error'](_0xd5c84d(0x2b5),_0x165502),document['getElementById'](_0xd5c84d(0x201))['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x467790=a4_0x22fa;try{const _0x336da1=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x352b6e=collection(db,_0x336da1),_0x31a92a=new Date();_0x31a92a['setDate'](_0x31a92a['getDate']()-0x7);const _0x24f2c7=query(_0x352b6e,where('approvedAt','>=',_0x31a92a),orderBy('approvedAt','asc')),_0x3e196b=await getDocs(_0x24f2c7),_0x12a5b0=['Sunday','Monday','Tuesday','Wednesday',_0x467790(0x24a),'Friday','Saturday'],_0x1c9f9f=_0x12a5b0[_0x467790(0x38d)]((_0x3183c4,_0x986c7d)=>({..._0x3183c4,[_0x986c7d]:0x0}),{});_0x3e196b['forEach'](_0x2ab771=>{const _0x1113f3=_0x467790,_0x3c5e61=_0x2ab771['data']();if(_0x3c5e61[_0x1113f3(0x32d)]){const _0x101f5b=_0x12a5b0[new Date(_0x3c5e61['approvedAt']['seconds']*0x3e8)['getDay']()];_0x1c9f9f[_0x101f5b]++;}});const _0x588a6f=document['getElementById']('activity-chart');charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x588a6f,{'type':_0x467790(0x166),'data':{'labels':_0x12a5b0,'datasets':[{'label':_0x467790(0x2f2),'data':_0x12a5b0[_0x467790(0x198)](_0x1f20d6=>_0x1c9f9f[_0x1f20d6]),'backgroundColor':currentLadder==='D1'?_0x467790(0x20e):_0x467790(0x2e0),'borderColor':currentLadder==='D1'?'#d32f2f':_0x467790(0x1a2),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x467790(0x389)},'grid':{'color':_0x467790(0x176)}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':_0x467790(0x389)}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':_0x467790(0x389),'font':{'size':0x10}}}}});}catch(_0x18b840){console['error']('Error\x20creating\x20activity\x20chart:',_0x18b840),document[_0x467790(0x168)]('activity-chart')[_0x467790(0x30b)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x4dce4b=a4_0x22fa,_0x2c5362=document['getElementById']('players-table-body');if(!_0x2c5362)return;_0x2c5362['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x11e40d='players';if(currentLadder==='D2')_0x11e40d='playersD2';else currentLadder==='D3'&&(_0x11e40d='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x11e40d+'\x20collection...');const _0x9eb356=collection(db,_0x11e40d),_0x21a94f=query(_0x9eb356,orderBy('eloRating',_0x4dce4b(0x217))),_0x33e363=await getDocs(_0x21a94f);if(_0x33e363['empty']){_0x2c5362['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x2c5362['innerHTML']='';let _0x50f4bf=0x1;_0x33e363[_0x4dce4b(0x15b)](_0x5558b3=>{const _0x2f54f3=_0x4dce4b,_0x3abf00=_0x5558b3[_0x2f54f3(0x1d9)](),_0xeb375d=getRankFromElo(_0x3abf00['eloRating']||0x4b0),_0x1eceb3=getRankStyle(_0x3abf00['eloRating']||0x4b0),_0x4a34d1=document['createElement']('tr');_0x4a34d1[_0x2f54f3(0x30b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x50f4bf+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x1eceb3[_0x2f54f3(0x272)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3abf00[_0x2f54f3(0x285)]||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x3abf00['eloRating']||0x4b0)+_0x2f54f3(0x1f1)+_0x1eceb3['color']+_0x2f54f3(0x359)+_0xeb375d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3abf00['wins']||0x0)+'W\x20/\x20'+(_0x3abf00['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x5558b3['id']+_0x2f54f3(0x26c)+_0x5558b3['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2c5362['appendChild'](_0x4a34d1),_0x50f4bf++;}),setupPlayerActionButtons();}catch(_0x262d8c){console['error']('Error\x20loading\x20players:',_0x262d8c),_0x2c5362[_0x4dce4b(0x30b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x262d8c['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0xae0ff5){const _0x446ff1=a4_0x22fa;if(_0xae0ff5>=0x7d0)return'Emerald';if(_0xae0ff5>=0x708)return'Gold';if(_0xae0ff5>=0x640)return _0x446ff1(0x2a4);if(_0xae0ff5>=0x578)return'Bronze';return'Unranked';}function a4_0x22fa(_0x47d642,_0x4e8c64){const _0x502c36=a4_0x1ef1();return a4_0x22fa=function(_0x292f70,_0x2599ac){_0x292f70=_0x292f70-0x13c;let _0x1ef116=_0x502c36[_0x292f70];return _0x1ef116;},a4_0x22fa(_0x47d642,_0x4e8c64);}function setupPlayerActionButtons(){const _0x22e0fe=a4_0x22fa;document[_0x22e0fe(0x263)](_0x22e0fe(0x147))['forEach'](_0x108a11=>{_0x108a11['addEventListener']('click',async _0x44d290=>{const _0x48a97e=a4_0x22fa,_0x1a427e=_0x44d290['currentTarget'][_0x48a97e(0x1ff)]['id'];openEditPlayerModal(_0x1a427e);});}),document['querySelectorAll']('.delete-btn')['forEach'](_0x52081d=>{_0x52081d['addEventListener']('click',async _0x273dea=>{const _0x88a3e7=_0x273dea['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x88a3e7);});});}async function openEditPlayerModal(_0x47d6d9){const _0x20ff58=a4_0x22fa;try{const _0x5c36c4=currentLadder==='D1'?'players':'playersD2',_0x44ceed=doc(db,_0x5c36c4,_0x47d6d9),_0x1080cc=await getDoc(_0x44ceed);if(!_0x1080cc['exists']()){showNotification(_0x20ff58(0x158),'error');return;}const _0x5cd50d=_0x1080cc['data'](),_0x438e79=document['getElementById'](_0x20ff58(0x1e5)),_0x3e0336=document['getElementById']('edit-username'),_0x655a64=document['getElementById']('edit-elo'),_0xbff689=document['getElementById']('edit-wins'),_0x537eac=document['getElementById']('edit-losses');_0x3e0336[_0x20ff58(0x240)]=_0x5cd50d['username']||'',_0x655a64['value']=_0x5cd50d['eloRating']||0x4b0,_0xbff689['value']=_0x5cd50d[_0x20ff58(0x277)]||0x0,_0x537eac['value']=_0x5cd50d['losses']||0x0,_0x438e79['dataset']['playerId']=_0x47d6d9,_0x438e79['classList'][_0x20ff58(0x1b3)]('active');}catch(_0x4fb796){console['error']('Error\x20opening\x20edit\x20modal:',_0x4fb796),showNotification(_0x20ff58(0x21d),'error');}}async function saveEditedPlayer(){const _0x4b5450=a4_0x22fa;try{const _0xcc18a1=document[_0x4b5450(0x168)]('edit-player-modal'),_0x34c04d=_0xcc18a1['dataset']['playerId'];if(!_0x34c04d){showNotification('No\x20player\x20selected','error');return;}const _0x40ac9f=document[_0x4b5450(0x168)]('edit-username'),_0xeb8e27=document['getElementById']('edit-elo'),_0x1dad38=document['getElementById'](_0x4b5450(0x1da)),_0x571dfc=document['getElementById']('edit-losses'),_0x5490ed=_0x40ac9f[_0x4b5450(0x240)]['trim'](),_0x213c9f=parseInt(_0xeb8e27['value']),_0x1255cb=parseInt(_0x1dad38[_0x4b5450(0x240)]),_0xd8b475=parseInt(_0x571dfc['value']);if(!_0x5490ed||isNaN(_0x213c9f)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x279072=currentLadder==='D1'?'players':'playersD2',_0x3da201=doc(db,_0x279072,_0x34c04d),_0x4ccf54=await getDoc(_0x3da201),_0x556b49=_0x4ccf54[_0x4b5450(0x242)]()?_0x4ccf54['data']():{},_0x5b92db=_0x556b49[_0x4b5450(0x27b)]||0x4b0;await updateDoc(_0x3da201,{'username':_0x5490ed,'eloRating':_0x213c9f,'wins':_0x1255cb||0x0,'losses':_0xd8b475||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x213c9f!==_0x5b92db){const _0x53463e=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x53463e),{'player':_0x5490ed,'previousElo':_0x5b92db,'newElo':_0x213c9f,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x4b5450(0x2c9)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x48ca33){console['error'](_0x4b5450(0x22d),_0x48ca33),showNotification(_0x4b5450(0x1e0)+_0x48ca33[_0x4b5450(0x1cf)],'error');}}function closeEditPlayerModal(){const _0xcc50c9=a4_0x22fa,_0x1de341=document['getElementById'](_0xcc50c9(0x1e5));_0x1de341['classList']['remove'](_0xcc50c9(0x365)),_0x1de341['dataset']['playerId']='';}async function confirmDeletePlayer(_0x4f452){const _0x309a9c=a4_0x22fa;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x2a1904=currentLadder==='D1'?'players':_0x309a9c(0x2db);await deleteDoc(doc(db,_0x2a1904,_0x4f452)),loadPlayersData(),showNotification(_0x309a9c(0x2a5),'success');}catch(_0x35e6c3){console['error']('Error\x20deleting\x20player:',_0x35e6c3),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x35e6c3['message'],'error');}}async function setupManagePlayersSection(){const _0x36ea84=a4_0x22fa,_0x230584=document['getElementById']('add-player-form');_0x230584&&_0x230584['addEventListener'](_0x36ea84(0x331),async _0x5a9b53=>{_0x5a9b53['preventDefault'](),await addNewPlayer();});const _0x5156e9=document[_0x36ea84(0x168)]('player-search');_0x5156e9&&_0x5156e9[_0x36ea84(0x264)]('input',debounce(filterPlayerTable,0x12c));const _0x35c76a=document['getElementById'](_0x36ea84(0x250));_0x35c76a&&_0x35c76a['addEventListener'](_0x36ea84(0x37a),saveEditedPlayer);const _0x25ee2c=document['getElementById']('cancel-edit-btn');_0x25ee2c&&_0x25ee2c['addEventListener']('click',closeEditPlayerModal);const _0x1c4c5c=document[_0x36ea84(0x168)]('edit-player-modal');_0x1c4c5c&&_0x1c4c5c[_0x36ea84(0x264)](_0x36ea84(0x37a),_0x548649=>{const _0x5a6a84=_0x36ea84;_0x548649[_0x5a6a84(0x145)]===_0x1c4c5c&&closeEditPlayerModal();});const _0x20c08c=document['getElementById']('players-ladder-selector');_0x20c08c&&_0x20c08c[_0x36ea84(0x264)]('change',()=>{currentLadder=_0x20c08c['value'],loadPlayersData();});}async function addNewPlayer(){const _0xe64cab=a4_0x22fa;try{const _0x16e89a=document[_0xe64cab(0x168)](_0xe64cab(0x38e)),_0x1ad3de=document['getElementById']('new-player-elo'),_0x1b3672=_0x16e89a['value']['trim'](),_0x41c29e=parseInt(_0x1ad3de[_0xe64cab(0x240)])||0x4b0;if(!_0x1b3672){alert('Please\x20enter\x20a\x20valid\x20username');return;}console[_0xe64cab(0x1b5)](_0xe64cab(0x215)+_0x1b3672+_0xe64cab(0x228)+_0x41c29e+'\x20to\x20'+currentLadder+'\x20ladder');let _0x6fa41=_0xe64cab(0x229),_0x4c94a7='eloHistory';if(currentLadder==='D2')_0x6fa41='playersD2',_0x4c94a7='eloHistoryD2';else currentLadder==='D3'&&(_0x6fa41='playersD3',_0x4c94a7='eloHistoryD3');const _0x592d69=query(collection(db,_0x6fa41),where('username','==',_0x1b3672)),_0x460e23=await getDocs(_0x592d69);if(!_0x460e23['empty']){alert('Username\x20'+_0x1b3672+_0xe64cab(0x356)+currentLadder+'\x20ladder');return;}const _0x5bfa61=auth['currentUser'],_0x25593d={'username':_0x1b3672,'eloRating':_0x41c29e,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x5bfa61?_0x5bfa61['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x6fa41),_0x25593d),await addDoc(collection(db,_0x4c94a7),{'player':_0x1b3672,'previousElo':0x4b0,'newElo':_0x41c29e,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x5bfa61?_0x5bfa61['email']:'admin','gameMode':currentLadder}),_0x16e89a[_0xe64cab(0x240)]='',_0x1ad3de[_0xe64cab(0x240)]='1200',alert('Player\x20'+_0x1b3672+_0xe64cab(0x13f)+currentLadder+_0xe64cab(0x299)),loadPlayersData();}catch(_0x10d570){console['error'](_0xe64cab(0x15c),_0x10d570),alert('Error\x20adding\x20player:\x20'+_0x10d570['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0xb8f7f0=a4_0x22fa,_0x1a3e3d=document['getElementById'](_0xb8f7f0(0x318));_0x1a3e3d&&_0x1a3e3d['addEventListener'](_0xb8f7f0(0x331),_0x2c4bf5=>{_0x2c4bf5['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x196154=a4_0x22fa,_0x455178=document['getElementById'](_0x196154(0x322))[_0x196154(0x240)]['toLowerCase'](),_0x26957f=document[_0x196154(0x263)]('#players-table-body\x20tr');let _0x1378a9=0x0;_0x26957f['forEach'](_0x3dc064=>{const _0x2fd5fd=_0x196154,_0x4720b7=_0x3dc064['querySelector']('.username')?.['textContent'][_0x2fd5fd(0x398)]()||'';_0x4720b7['includes'](_0x455178)?(_0x3dc064['style'][_0x2fd5fd(0x224)]='',_0x1378a9++):_0x3dc064['style']['display']=_0x2fd5fd(0x257);});const _0x188178=document['getElementById']('no-results-message');_0x188178&&(_0x1378a9===0x0&&_0x455178!==''?_0x188178['style']['display']='block':_0x188178['style']['display']='none');}function debounce(_0x11a022,_0x33ed5b){let _0x4c9edd;return function(..._0x40819b){clearTimeout(_0x4c9edd),_0x4c9edd=setTimeout(()=>_0x11a022['apply'](this,_0x40819b),_0x33ed5b);};}async function loadEloHistory(_0x30d713=0x1){const _0xf82e06=a4_0x22fa,_0x346189=document[_0xf82e06(0x168)]('elo-history-table-body'),_0x300e93=currentLadder[_0xf82e06(0x398)]();if(!_0x346189)return;_0x346189['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x18803b=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x5115ae=collection(db,_0x18803b);let _0x26b8e8;if(_0x30d713>eloHistoryPagination[_0x300e93]['page']&&eloHistoryPagination[_0x300e93]['lastVisible'])_0x26b8e8=query(_0x5115ae,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x300e93]['lastVisible']),limit(PAGE_SIZE));else _0x30d713<eloHistoryPagination[_0x300e93]['page']&&eloHistoryPagination[_0x300e93]['firstVisible']?_0x26b8e8=query(_0x5115ae,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x300e93]['firstVisible']),limitToLast(PAGE_SIZE)):_0x26b8e8=query(_0x5115ae,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x3d7708=await getDocs(_0x26b8e8);if(_0x3d7708['empty']){_0x346189['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x300e93+'-page-indicator')['textContent']=_0xf82e06(0x2ea);return;}eloHistoryPagination[_0x300e93]['page']=_0x30d713,eloHistoryPagination[_0x300e93][_0xf82e06(0x171)]=_0x3d7708['docs'][0x0],eloHistoryPagination[_0x300e93]['lastVisible']=_0x3d7708[_0xf82e06(0x330)][_0x3d7708['docs']['length']-0x1];const _0x24ffa4=new Map();_0x346189['innerHTML']='';const _0x40d809=async _0x1a460f=>{const _0x542f06=_0xf82e06;if(typeof _0x1a460f!=='string'||_0x1a460f['length']<0x14||/[^a-zA-Z0-9-_]/[_0x542f06(0x1e9)](_0x1a460f))return _0x1a460f;if(_0x24ffa4[_0x542f06(0x1c8)](_0x1a460f))return _0x24ffa4[_0x542f06(0x214)](_0x1a460f);try{for(const _0x5f4fcd of['players',_0x542f06(0x2db),'playersD3','nonParticipants']){const _0x161c5b=await getDoc(doc(db,_0x5f4fcd,_0x1a460f));if(_0x161c5b['exists']()&&_0x161c5b['data']()[_0x542f06(0x285)]){const _0x1e892a=_0x161c5b['data']()['username'];return _0x24ffa4['set'](_0x1a460f,_0x1e892a),_0x1e892a;}}return _0x1a460f;}catch(_0x4095c0){return console[_0x542f06(0x375)]('Error\x20resolving\x20username\x20for\x20'+_0x1a460f+':',_0x4095c0),_0x1a460f;}};for(const _0x1f5ab4 of _0x3d7708['docs']){const _0x3df13c=_0x1f5ab4['data'](),_0x4eaaf8=document[_0xf82e06(0x2f8)]('tr'),_0x23d9cb=_0x3df13c[_0xf82e06(0x15e)]?new Date(_0x3df13c['timestamp'][_0xf82e06(0x21f)]*0x3e8)[_0xf82e06(0x17f)]():'N/A',_0x2e8e21=_0x3df13c[_0xf82e06(0x146)]-_0x3df13c[_0xf82e06(0x151)],_0x5187a5=_0x2e8e21>0x0?'positive-change':_0x2e8e21<0x0?'negative-change':'',_0x76529b=_0x2e8e21>0x0?'+':'',_0x1692fb=_0x3df13c['player']||_0x3df13c['username']||_0x3df13c['userId']||'N/A',_0x4ebee4=await _0x40d809(_0x1692fb);_0x4eaaf8[_0xf82e06(0x30b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x23d9cb+_0xf82e06(0x386)+_0x4ebee4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x3df13c['previousElo']||_0xf82e06(0x397))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x3df13c[_0xf82e06(0x146)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x5187a5+'\x22>'+_0x76529b+_0x2e8e21+_0xf82e06(0x190)+formatHistoryType(_0x3df13c[_0xf82e06(0x1c4)])+_0xf82e06(0x394)+(_0x3df13c[_0xf82e06(0x2a9)]||_0x3df13c['promotedBy']||_0x3df13c[_0xf82e06(0x342)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x346189[_0xf82e06(0x219)](_0x4eaaf8);}document['getElementById'](_0x300e93+'-page-indicator')['textContent']='Page\x20'+_0x30d713;const _0xd361fc=document['getElementById'](_0x300e93+'-prev-page'),_0x46b8c6=document[_0xf82e06(0x168)](_0x300e93+'-next-page');if(_0xd361fc)_0xd361fc[_0xf82e06(0x29b)]=_0x30d713<=0x1;const _0x23737e=query(_0x5115ae,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x300e93][_0xf82e06(0x32e)]),limit(0x1)),_0x27978b=await getDocs(_0x23737e);if(_0x46b8c6)_0x46b8c6['disabled']=_0x27978b['empty'];}catch(_0x25febe){console[_0xf82e06(0x2fb)]('Error\x20loading\x20ELO\x20history:',_0x25febe),_0x346189['innerHTML']=_0xf82e06(0x155)+_0x25febe['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x1f661a){const _0x34a0fe=a4_0x22fa;switch(_0x1f661a){case'match_result':return'Match\x20Result';case _0x34a0fe(0x30f):return'Promotion';case'demotion':return'Demotion';case _0x34a0fe(0x148):return'Admin\x20Adjustment';case _0x34a0fe(0x321):return _0x34a0fe(0x1f4);default:return _0x1f661a||'Unknown';}}function setupEloHistorySection(){const _0x2ebae3=a4_0x22fa;document['getElementById'](_0x2ebae3(0x399))[_0x2ebae3(0x264)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')[_0x2ebae3(0x264)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')[_0x2ebae3(0x264)](_0x2ebae3(0x37a),()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x2ebae3(0x168)]('d2-next-page')['addEventListener'](_0x2ebae3(0x37a),()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x570cd8=document[_0x2ebae3(0x168)]('d3-prev-page'),_0x1a6578=document['getElementById'](_0x2ebae3(0x2ba));_0x570cd8&&_0x570cd8['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x1a6578&&_0x1a6578['addEventListener']('click',()=>{const _0x33226e=_0x2ebae3;loadEloHistory(eloHistoryPagination['d3'][_0x33226e(0x14a)]+0x1);});const _0xbbb532=document['getElementById']('elo-history-search');_0xbbb532&&_0xbbb532['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x5749f6=document['getElementById'](_0x2ebae3(0x2f0));_0x5749f6&&_0x5749f6['addEventListener']('change',applyEloHistoryFilters);const _0x34f93b=document['getElementById']('reset-history-filters');_0x34f93b&&_0x34f93b['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x35568d=a4_0x22fa,_0x3622b2=document['getElementById']('elo-history-search')[_0x35568d(0x240)][_0x35568d(0x398)](),_0x9d3a6a=document[_0x35568d(0x263)](_0x35568d(0x2ad));let _0x489fb0=0x0;_0x9d3a6a['forEach'](_0x2fac90=>{const _0xf9a86c=_0x35568d;if(_0x2fac90['classList']['contains']('loading-cell')||_0x2fac90[_0xf9a86c(0x373)][_0xf9a86c(0x25e)]('empty-state')||_0x2fac90['classList']['contains']('error-state'))return;const _0x43dfa3=_0x2fac90['querySelector']('.player')?.['textContent']['toLowerCase']()||'',_0xfdf54=_0x2fac90[_0xf9a86c(0x33c)]('.type')?.['textContent']['toLowerCase']()||'',_0x42a301=_0x2fac90['querySelector']('.admin-action')?.[_0xf9a86c(0x1ed)]['toLowerCase']()||'';_0x43dfa3['includes'](_0x3622b2)||_0xfdf54['includes'](_0x3622b2)||_0x42a301[_0xf9a86c(0x23e)](_0x3622b2)?(_0x2fac90['style']['display']='',_0x489fb0++):_0x2fac90['style'][_0xf9a86c(0x224)]='none';});}async function applyEloHistoryFilters(){const _0x379a91=a4_0x22fa,_0x55396f=document['getElementById']('history-start-date')[_0x379a91(0x240)],_0xafd4f9=document['getElementById'](_0x379a91(0x1c6))[_0x379a91(0x240)],_0x2a0e35=document['getElementById'](_0x379a91(0x2f0))['value'],_0x15434b=currentLadder['toLowerCase']();eloHistoryPagination[_0x15434b]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x10b230=document['getElementById']('elo-history-table-body');_0x10b230[_0x379a91(0x30b)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x153f22=currentLadder==='D1'?'eloHistory':_0x379a91(0x19a),_0x2bcf6f=collection(db,_0x153f22);let _0x46923e=[orderBy('timestamp','desc')];if(_0x55396f){const _0x6f7118=new Date(_0x55396f);_0x6f7118['setHours'](0x0,0x0,0x0,0x0),_0x46923e[_0x379a91(0x1d4)](where('timestamp','>=',_0x6f7118));}if(_0xafd4f9){const _0x4695d2=new Date(_0xafd4f9);_0x4695d2['setHours'](0x17,0x3b,0x3b,0x3e7),_0x46923e['push'](where(_0x379a91(0x15e),'<=',_0x4695d2));}_0x2a0e35&&_0x2a0e35!=='all'&&_0x46923e[_0x379a91(0x1d4)](where('type','==',_0x2a0e35));_0x46923e['push'](limit(PAGE_SIZE));const _0x587991=query(_0x2bcf6f,..._0x46923e),_0x43f580=await getDocs(_0x587991);!_0x43f580['empty']&&(eloHistoryPagination[_0x15434b]['firstVisible']=_0x43f580['docs'][0x0],eloHistoryPagination[_0x15434b][_0x379a91(0x32e)]=_0x43f580[_0x379a91(0x330)][_0x43f580['docs'][_0x379a91(0x237)]-0x1]);_0x10b230['innerHTML']='';if(_0x43f580['empty']){_0x10b230['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x43f580['forEach'](_0x2a6e84=>{const _0x6a1ac0=_0x379a91,_0x475b88=_0x2a6e84[_0x6a1ac0(0x1d9)](),_0x24a1f1=document[_0x6a1ac0(0x2f8)]('tr'),_0x51207c=_0x475b88['timestamp']?new Date(_0x475b88[_0x6a1ac0(0x15e)]['seconds']*0x3e8)['toLocaleString']():'N/A',_0x4db8f4=_0x475b88['newElo']-_0x475b88['previousElo'],_0x316d33=_0x4db8f4>0x0?_0x6a1ac0(0x382):_0x4db8f4<0x0?'negative-change':'',_0x2e37b9=_0x4db8f4>0x0?'+':'',_0x3eeff0=_0x475b88[_0x6a1ac0(0x1ef)]||_0x475b88['username']||_0x475b88[_0x6a1ac0(0x243)]||'N/A';_0x24a1f1['innerHTML']=_0x6a1ac0(0x2fc)+_0x51207c+_0x6a1ac0(0x386)+_0x3eeff0+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x475b88['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x475b88[_0x6a1ac0(0x146)]||'N/A')+_0x6a1ac0(0x15a)+_0x316d33+'\x22>'+_0x2e37b9+_0x4db8f4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x475b88['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x475b88['modifiedBy']||_0x475b88['promotedBy']||_0x475b88['demotedBy']||'System')+_0x6a1ac0(0x1e8),_0x10b230['appendChild'](_0x24a1f1);}),document['getElementById'](_0x15434b+'-page-indicator')['textContent']=_0x379a91(0x2ea);}catch(_0x4865f7){console['error'](_0x379a91(0x1a9),_0x4865f7),_0x10b230['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x4865f7['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x43a07c=a4_0x22fa;document['getElementById']('history-start-date')['value']='',document['getElementById']('history-end-date')['value']='',document[_0x43a07c(0x168)](_0x43a07c(0x2f0))[_0x43a07c(0x240)]='all',document['getElementById'](_0x43a07c(0x24b))['value']='';const _0x25efbb=currentLadder[_0x43a07c(0x398)]();eloHistoryPagination[_0x25efbb]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x4d414d=a4_0x22fa,_0x4cafa6=document['getElementById']('promote-player-btn'),_0x1f7cdb=document['getElementById']('promote-modal'),_0x2ce6d1=document[_0x4d414d(0x168)]('promote-form');_0x4cafa6&&_0x1f7cdb&&_0x2ce6d1&&(_0x4cafa6[_0x4d414d(0x264)](_0x4d414d(0x37a),()=>{const _0x44a6d1=_0x4d414d;_0x1f7cdb['classList']['add'](_0x44a6d1(0x365));}),_0x1f7cdb['addEventListener']('click',_0x534c32=>{const _0xbfd37d=_0x4d414d;_0x534c32[_0xbfd37d(0x145)]===_0x1f7cdb&&_0x1f7cdb['classList']['remove']('active');}),_0x2ce6d1['addEventListener']('submit',async _0x51f858=>{const _0x2ba646=_0x4d414d;_0x51f858['preventDefault']();const _0x413400=document['getElementById']('promote-username'),_0x42e7d2=document['getElementById'](_0x2ba646(0x244)),_0x364141=_0x413400[_0x2ba646(0x240)]['trim'](),_0x3d4dbc=_0x42e7d2[_0x2ba646(0x240)];if(!_0x364141){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x364141,_0x3d4dbc),_0x1f7cdb['classList']['remove']('active'),_0x413400[_0x2ba646(0x240)]='';}catch(_0x5b7f57){showNotification(_0x5b7f57[_0x2ba646(0x1cf)],'error');}}),document['getElementById']('cancel-promote-btn')[_0x4d414d(0x264)](_0x4d414d(0x37a),()=>{const _0x4b5648=_0x4d414d;_0x1f7cdb[_0x4b5648(0x373)]['remove']('active');}));const _0x4346ea=document['getElementById'](_0x4d414d(0x29a)),_0x31cb6f=document['getElementById']('demote-modal'),_0x2f3eac=document['getElementById']('demote-form');_0x4346ea&&_0x31cb6f&&_0x2f3eac&&(_0x4346ea['addEventListener']('click',()=>{const _0x5170d8=_0x4d414d;_0x31cb6f[_0x5170d8(0x373)][_0x5170d8(0x1b3)]('active');}),_0x31cb6f['addEventListener']('click',_0x4af54a=>{const _0x383c24=_0x4d414d;_0x4af54a['target']===_0x31cb6f&&_0x31cb6f[_0x383c24(0x373)][_0x383c24(0x307)](_0x383c24(0x365));}),_0x2f3eac[_0x4d414d(0x264)](_0x4d414d(0x331),async _0x5e1534=>{const _0x527e9b=_0x4d414d;_0x5e1534['preventDefault']();const _0x1d64f3=document['getElementById']('demote-username'),_0x4fe259=document['getElementById'](_0x527e9b(0x387)),_0xa76857=_0x1d64f3['value']['trim'](),_0x44cf7c=_0x4fe259[_0x527e9b(0x240)];if(!_0xa76857){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0xa76857,_0x44cf7c),document['getElementById']('demote-modal')['classList'][_0x527e9b(0x307)]('active'),document['getElementById']('demote-username')['value']='';}catch(_0x1dea5d){console['error']('Error\x20in\x20demotion:',_0x1dea5d);}}));const _0x14f36f=document['getElementById']('set-elo-btn'),_0x5ce243=document[_0x4d414d(0x168)]('set-elo-modal'),_0x2db586=document['getElementById'](_0x4d414d(0x1d6));_0x14f36f&&_0x5ce243&&_0x2db586&&(_0x14f36f['addEventListener']('click',()=>{const _0x43056d=_0x4d414d;_0x5ce243[_0x43056d(0x373)]['add'](_0x43056d(0x365));}),_0x5ce243[_0x4d414d(0x264)](_0x4d414d(0x37a),_0x426a99=>{const _0x1d096a=_0x4d414d;_0x426a99[_0x1d096a(0x145)]===_0x5ce243&&_0x5ce243['classList']['remove']('active');}),_0x2db586['addEventListener']('submit',async _0x50d849=>{const _0x31db04=_0x4d414d;_0x50d849['preventDefault']();const _0x55a119=document['getElementById']('set-elo-username'),_0x396d28=document['getElementById'](_0x31db04(0x1b8));let _0x4752c2;const _0x1063f2=document['getElementById'](_0x31db04(0x348)),_0x4f62c1=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x1063f2)_0x4752c2=_0x1063f2['value'];else _0x4f62c1?_0x4752c2=_0x4f62c1[_0x31db04(0x240)]:_0x4752c2='D1';if(!_0x55a119||!_0x396d28){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x38818d=_0x55a119[_0x31db04(0x240)][_0x31db04(0x1fd)](),_0x2a83cc=parseInt(_0x396d28[_0x31db04(0x240)]);if(!_0x38818d||isNaN(_0x2a83cc)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x38818d,_0x2a83cc,_0x4752c2),_0x5ce243['classList'][_0x31db04(0x307)]('active'),_0x55a119['value']='',_0x396d28[_0x31db04(0x240)]='';}catch(_0x18d931){showNotification(_0x18d931['message'],_0x31db04(0x2fb));}}),document[_0x4d414d(0x168)]('cancel-set-elo-btn')['addEventListener']('click',()=>{_0x5ce243['classList']['remove']('active');}));const _0x49f78f=document[_0x4d414d(0x168)]('set-role-modal'),_0x1cb126=document['getElementById']('set-role-form');if(_0x49f78f&&_0x1cb126){_0x49f78f['addEventListener'](_0x4d414d(0x37a),_0x452dcb=>{_0x452dcb['target']===_0x49f78f&&closeModalHandler();}),_0x1cb126[_0x4d414d(0x264)]('submit',async _0x158e24=>{const _0x193518=_0x4d414d;_0x158e24['preventDefault']();const _0x366650=document['getElementById']('role-username'),_0x1e818e=document[_0x193518(0x168)]('role-name'),_0x1aad9f=document['getElementById']('role-color'),_0x19f3d3=_0x366650['value']['trim'](),_0xa93735=_0x1e818e['value']['trim'](),_0x599136=_0x1aad9f['value'];if(!_0x19f3d3){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x19f3d3,_0xa93735,_0x599136),closeModalHandler(),loadUsersWithRoles();}catch(_0x7071d0){}});const _0x48a97f=document['getElementById'](_0x4d414d(0x31f));_0x48a97f&&(_0x48a97f['removeEventListener']('click',closeModalHandler),_0x48a97f['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x5aaaf2,_0x2c1ebd){const _0x1e7f20=a4_0x22fa;try{console['log'](_0x1e7f20(0x2a3)+_0x5aaaf2+'\x20in\x20'+_0x2c1ebd+'\x20ladder');const _0x3b9fec=auth['currentUser'];if(!_0x3b9fec)throw new Error(_0x1e7f20(0x28f));const _0x9098ea=_0x2c1ebd==='D2'?'playersD2':'players',_0x441b44=_0x2c1ebd==='D2'?_0x1e7f20(0x19a):_0x1e7f20(0x181);console['log'](_0x1e7f20(0x20a)+_0x9098ea);const _0x1ccb54=collection(db,_0x9098ea),_0x489bf7=query(_0x1ccb54,where('username','==',_0x5aaaf2)),_0x227705=await getDocs(_0x489bf7);if(_0x227705['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x2c1ebd+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x2c1ebd+'\x20ladder');}const _0x3d692b=_0x227705['docs'][0x0],_0x174ec5=_0x3d692b['data'](),_0x1ff851=_0x174ec5[_0x1e7f20(0x27b)]||0x4b0,_0x248d8a=_0x3d692b['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x1ff851);const _0x175d53=[{'name':_0x1e7f20(0x164),'elo':0x578},{'name':_0x1e7f20(0x2a4),'elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x40da12=_0x175d53['find'](_0x350a2d=>_0x350a2d['elo']>_0x1ff851);if(!_0x40da12){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x2c1ebd+_0x1e7f20(0x1b2));throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x2c1ebd+'\x20ladder');}console[_0x1e7f20(0x1b5)]('Promoting\x20player\x20to\x20'+_0x40da12['name']+'\x20('+_0x40da12[_0x1e7f20(0x21e)]+')'),await updateDoc(doc(db,_0x9098ea,_0x3d692b['id']),{'eloRating':_0x40da12[_0x1e7f20(0x21e)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x3b9fec['email']||'admin'}),await addDoc(collection(db,_0x441b44),{'player':_0x5aaaf2,'previousElo':_0x1ff851,'newElo':_0x40da12['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x40da12['name'],'promotedBy':_0x3b9fec[_0x1e7f20(0x2ca)]||'admin','gameMode':_0x2c1ebd});try{const {promotionManager:_0x3683a4}=await import('./promotions.js'),_0x4b8584=_0x3683a4['getRankName'](_0x1ff851),_0x6616d2=_0x40da12['name'];await _0x3683a4['sendPromotionNotification'](_0x248d8a,_0x5aaaf2,_0x1ff851,_0x40da12['elo'],_0x4b8584,_0x6616d2,'promotion',{'displayName':_0x5aaaf2,'source':_0x1e7f20(0x2aa),'adminUser':_0x3b9fec['email'],'ladder':_0x2c1ebd}),console[_0x1e7f20(0x1b5)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x189e24){console['error'](_0x1e7f20(0x37d),_0x189e24);}return alert('Successfully\x20promoted\x20'+_0x5aaaf2+'\x20to\x20'+_0x40da12['name']+'\x20('+_0x40da12[_0x1e7f20(0x21e)]+')'),currentLadder===_0x2c1ebd&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x27776e){console['error']('Error\x20promoting\x20player:',_0x27776e),alert(_0x1e7f20(0x312)+_0x27776e['message']);throw _0x27776e;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x5e804b=a4_0x22fa,_0x4d5f6d=document['getElementById']('promote-form');_0x4d5f6d&&_0x4d5f6d[_0x5e804b(0x264)]('submit',async _0x252215=>{const _0xade9d3=_0x5e804b;_0x252215[_0xade9d3(0x157)]();const _0x24d629=document['getElementById'](_0xade9d3(0x1f7))['value'][_0xade9d3(0x1fd)](),_0x130432=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x24d629){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x24d629,_0x130432),document['getElementById']('promote-modal')['classList']['remove']('active'),document['getElementById']('promote-username')['value']='';}catch(_0x2692c5){console['error'](_0xade9d3(0x2c7),_0x2692c5);}});});async function demotePlayer(_0x314223,_0xdbdb7e){const _0x4cbfff=a4_0x22fa;try{console['log'](_0x4cbfff(0x2a7)+_0x314223+'\x20in\x20'+_0xdbdb7e+_0x4cbfff(0x1b2));const _0x5f305d=auth['currentUser'];if(!_0x5f305d)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x4ccd5d=_0xdbdb7e==='D2'?_0x4cbfff(0x2db):'players',_0x42adb2=_0xdbdb7e==='D2'?_0x4cbfff(0x19a):'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x4ccd5d);const _0x3c0cc1=collection(db,_0x4ccd5d),_0x35f705=query(_0x3c0cc1,where('username','==',_0x314223)),_0x55254f=await getDocs(_0x35f705);if(_0x55254f[_0x4cbfff(0x2ec)]){alert('Player\x20not\x20found\x20in\x20'+_0xdbdb7e+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0xdbdb7e+'\x20ladder');}const _0x3a8110=_0x55254f['docs'][0x0],_0x57cbe4=_0x3a8110['data'](),_0x4afd0=_0x57cbe4['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x4afd0);const _0x1442ed=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x4cbfff(0x164),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x3378ad=_0x1442ed['find'](_0x3189b8=>_0x3189b8['elo']<_0x4afd0);if(!_0x3378ad){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0xdbdb7e+_0x4cbfff(0x1b2));throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0xdbdb7e+'\x20ladder');}console['log']('Demoting\x20player\x20to\x20'+_0x3378ad['name']+'\x20('+_0x3378ad['elo']+')'),await updateDoc(doc(db,_0x4ccd5d,_0x3a8110['id']),{'eloRating':_0x3378ad[_0x4cbfff(0x21e)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x5f305d[_0x4cbfff(0x2ca)]||'admin'}),await addDoc(collection(db,_0x42adb2),{'player':_0x314223,'previousElo':_0x4afd0,'newElo':_0x3378ad[_0x4cbfff(0x21e)],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x3378ad[_0x4cbfff(0x14d)],'demotedBy':_0x5f305d['email']||_0x4cbfff(0x2aa),'gameMode':_0xdbdb7e});try{const {promotionManager:_0x5c123d}=await import(_0x4cbfff(0x37e)),_0x3b332e=_0x5c123d['getRankName'](_0x4afd0),_0x4ac324=_0x3378ad['name'];await _0x5c123d['sendPromotionNotification'](_0x3a8110['id'],_0x314223,_0x4afd0,_0x3378ad['elo'],_0x3b332e,_0x4ac324,_0x4cbfff(0x2e9),{'displayName':_0x314223,'source':_0x4cbfff(0x2aa),'adminUser':_0x5f305d['email'],'ladder':_0xdbdb7e}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x3066a2){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x3066a2);}return alert('Successfully\x20demoted\x20'+_0x314223+_0x4cbfff(0x1ad)+_0x3378ad[_0x4cbfff(0x14d)]+'\x20('+_0x3378ad[_0x4cbfff(0x21e)]+')'),currentLadder===_0xdbdb7e&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0xa2f0a){console['error']('Error\x20demoting\x20player:',_0xa2f0a),alert('Error\x20demoting\x20player:\x20'+_0xa2f0a[_0x4cbfff(0x1cf)]);throw _0xa2f0a;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x5e5cb6=a4_0x22fa,_0x24ee99=document[_0x5e5cb6(0x168)](_0x5e5cb6(0x36c));_0x24ee99&&_0x24ee99['addEventListener']('submit',async _0x3155d7=>{const _0x9dd260=_0x5e5cb6;_0x3155d7['preventDefault']();const _0x1d905d=document['getElementById']('demote-username')['value']['trim'](),_0x520da1=document[_0x9dd260(0x33c)]('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x1d905d){alert(_0x9dd260(0x2f9));return;}try{await demotePlayer(_0x1d905d,_0x520da1),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x30bb92){console['error']('Error\x20in\x20demotion:',_0x30bb92);}});});async function setCustomElo(_0x1ed5d1,_0x4a731b,_0x514674){const _0x550ae9=a4_0x22fa;try{const _0x263213=auth['currentUser'];if(!_0x263213||!isAdmin(_0x263213['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0xd8cc7b=_0x514674==='D2'?'playersD2':'players',_0x523514=_0x514674==='D2'?'eloHistoryD2':'eloHistory',_0x2f1d8f=collection(db,_0xd8cc7b),_0x19c1d3=query(_0x2f1d8f,where('username','==',_0x1ed5d1)),_0x4018fc=await getDocs(_0x19c1d3);if(_0x4018fc[_0x550ae9(0x2ec)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x514674+'\x20ladder');const _0x4da791=_0x4018fc['docs'][0x0],_0x123f99=_0x4da791[_0x550ae9(0x1d9)](),_0x22441b=_0x123f99['eloRating']||0x4b0,_0x2cca3a=writeBatch(db);_0x2cca3a['update'](doc(db,_0xd8cc7b,_0x4da791['id']),{'eloRating':_0x4a731b,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x263213['email']});const _0x36a7ba=doc(collection(db,_0x523514));return _0x2cca3a['set'](_0x36a7ba,{'player':_0x1ed5d1,'previousElo':_0x22441b,'newElo':_0x4a731b,'timestamp':serverTimestamp(),'type':_0x550ae9(0x148),'modifiedBy':_0x263213['email'],'gameMode':_0x514674}),await _0x2cca3a[_0x550ae9(0x27c)](),showNotification(_0x550ae9(0x213)+_0x1ed5d1+'\x20was\x20updated\x20from\x20'+_0x22441b+_0x550ae9(0x1ad)+_0x4a731b,'success'),currentLadder===_0x514674&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x5de204){console['error']('Error\x20setting\x20custom\x20ELO:',_0x5de204);throw _0x5de204;}}async function setUserRole(_0xe6c9b4,_0x4843c9,_0x1e70ae){const _0x4a6551=a4_0x22fa;try{const _0x351fdd=auth[_0x4a6551(0x2c9)];if(!_0x351fdd||!isAdmin(_0x351fdd[_0x4a6551(0x2ca)]))throw new Error(_0x4a6551(0x26b));const _0x5924ec=_0x4843c9?_0x4843c9['trim']():null,_0x48afe8=_0x5924ec?_0x1e70ae||_0x4a6551(0x22f):null,[_0x30183f,_0x4e708a]=await Promise[_0x4a6551(0x223)]([getDocs(query(collection(db,_0x4a6551(0x229)),where('username','==',_0xe6c9b4))),getDocs(query(collection(db,_0x4a6551(0x2db)),where('username','==',_0xe6c9b4)))]),_0x549c35=[];if(!_0x30183f[_0x4a6551(0x2ec)])_0x549c35['push']({'ref':_0x30183f[_0x4a6551(0x330)][0x0]['ref'],'source':'D1'});if(!_0x4e708a[_0x4a6551(0x2ec)])_0x549c35['push']({'ref':_0x4e708a['docs'][0x0]['ref'],'source':'D2'});if(_0x549c35['length']===0x0){const [_0x26e7b6,_0x540f52]=await Promise[_0x4a6551(0x223)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0xe6c9b4))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0xe6c9b4)))]);if(!_0x26e7b6[_0x4a6551(0x2ec)])_0x549c35[_0x4a6551(0x1d4)]({'ref':_0x26e7b6['docs'][0x0]['ref'],'source':'NonParticipant'});if(!_0x540f52['empty'])_0x549c35['push']({'ref':_0x540f52[_0x4a6551(0x330)][0x0][_0x4a6551(0x234)],'source':'UserProfile'});}if(_0x549c35['length']===0x0)throw new Error(_0x4a6551(0x1b0)+_0xe6c9b4+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x57e7fc=writeBatch(db);_0x549c35['forEach'](_0x20f382=>{const _0x384694=_0x4a6551;console[_0x384694(0x1b5)](_0x384694(0x282)+_0xe6c9b4+'\x20in\x20'+_0x20f382['source']),!_0x5924ec?_0x57e7fc['update'](_0x20f382['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x57e7fc[_0x384694(0x2d5)](_0x20f382[_0x384694(0x234)],{'roleName':_0x5924ec,'roleColor':_0x48afe8,'roleAssignedBy':_0x351fdd['email'],'roleAssignedAt':serverTimestamp()});}),await _0x57e7fc['commit']();const _0x181e62=_0x5924ec?_0x4a6551(0x34a)+_0x5924ec+'\x22\x20set':_0x4a6551(0x26e);return showNotification(_0x181e62+_0x4a6551(0x17a)+_0xe6c9b4+'\x22',_0x4a6551(0x2ff)),!![];}catch(_0x17d40c){console[_0x4a6551(0x2fb)]('Error\x20setting\x20user\x20role:',_0x17d40c),showNotification('Error:\x20'+_0x17d40c['message'],'error');throw _0x17d40c;}}function showNotification(_0x2cffa8,_0x22688c=a4_0x589c4c(0x170)){const _0x48008a=a4_0x589c4c,_0x3925db=document['createElement']('div');_0x3925db['className']='notification\x20'+_0x22688c,_0x3925db['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x22688c)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x2cffa8+_0x48008a(0x235),document['body']['appendChild'](_0x3925db),setTimeout(()=>{_0x3925db['classList']['add']('active');},0xa);const _0x2e11a7=setTimeout(()=>{closeNotification(_0x3925db);},0x1388);_0x3925db['querySelector'](_0x48008a(0x1a5))['addEventListener']('click',()=>{clearTimeout(_0x2e11a7),closeNotification(_0x3925db);});}function getNotificationIcon(_0x283a71){const _0x2e1cb5=a4_0x589c4c;switch(_0x283a71){case'success':return _0x2e1cb5(0x248);case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case'info':default:return _0x2e1cb5(0x206);}}function closeNotification(_0x1527ab){_0x1527ab['classList']['remove']('active'),setTimeout(()=>{_0x1527ab['remove']();},0x12c);}function setupUserRolesSection(){const _0x48e1b2=a4_0x589c4c,_0x470368=document['getElementById'](_0x48e1b2(0x1bb));_0x470368&&_0x470368['addEventListener']('click',function(){const _0x321695=_0x48e1b2;this[_0x321695(0x373)]['add']('loading'),this['innerHTML']=_0x321695(0x188),loadUsersWithRoles()['then'](()=>{const _0x414fa5=_0x321695;this['classList']['remove'](_0x414fa5(0x1b1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x1e97b2=>{const _0x6cbd51=_0x321695;console['error'](_0x6cbd51(0x154),_0x1e97b2),this['classList'][_0x6cbd51(0x307)]('loading'),this['innerHTML']=_0x6cbd51(0x156),setTimeout(()=>{const _0x55be74=_0x6cbd51;this[_0x55be74(0x30b)]=_0x55be74(0x20c);},0xbb8);});});const _0x93b627=document['getElementById']('add-new-role-btn');_0x93b627&&_0x93b627['addEventListener']('click',()=>{const _0x1953f6=_0x48e1b2,_0x559278=document[_0x1953f6(0x168)](_0x1953f6(0x1e6));_0x559278&&_0x559278['classList'][_0x1953f6(0x1b3)](_0x1953f6(0x365));});const _0x53beea=document['getElementById']('user-search');_0x53beea&&_0x53beea['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x2d3425=document['getElementById']('role-filter');_0x2d3425&&_0x2d3425['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x1d7d6c=a4_0x589c4c,_0x54a2b2=document[_0x1d7d6c(0x168)]('users-table-body');if(!_0x54a2b2)return;_0x54a2b2[_0x1d7d6c(0x30b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x5626eb,_0x541655,_0x4a7ee4,_0x14724e]=await Promise['all']([getDocs(collection(db,_0x1d7d6c(0x229))),getDocs(collection(db,_0x1d7d6c(0x2db))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x5a2987=new Map();function _0x1339be(_0x3c51cc,_0x36ad7c){_0x3c51cc['forEach'](_0x3d1f7d=>{const _0x3e6b84=a4_0x22fa,_0x1831c5=_0x3d1f7d['data']();if(!_0x1831c5[_0x3e6b84(0x285)])return;if(!_0x5a2987['has'](_0x1831c5['username']))_0x5a2987['set'](_0x1831c5[_0x3e6b84(0x285)],{'username':_0x1831c5['username'],'roleName':_0x1831c5['roleName']||null,'roleColor':_0x1831c5['roleColor']||null,'roleAssignedBy':_0x1831c5['roleAssignedBy']||null,'roleAssignedAt':_0x1831c5['roleAssignedAt']||null,'sources':[_0x36ad7c]});else{const _0x3e00ff=_0x5a2987[_0x3e6b84(0x214)](_0x1831c5[_0x3e6b84(0x285)]);_0x1831c5[_0x3e6b84(0x14c)]&&(!_0x3e00ff['roleName']||_0x36ad7c==='D1'||_0x36ad7c==='D2')&&(_0x3e00ff[_0x3e6b84(0x14c)]=_0x1831c5['roleName'],_0x3e00ff['roleColor']=_0x1831c5['roleColor'],_0x3e00ff['roleAssignedBy']=_0x1831c5['roleAssignedBy'],_0x3e00ff[_0x3e6b84(0x247)]=_0x1831c5[_0x3e6b84(0x247)]),!_0x3e00ff['sources'][_0x3e6b84(0x23e)](_0x36ad7c)&&_0x3e00ff['sources']['push'](_0x36ad7c);}});}_0x1339be(_0x5626eb,'D1'),_0x1339be(_0x541655,'D2'),_0x1339be(_0x4a7ee4,_0x1d7d6c(0x238)),_0x1339be(_0x14724e,'Profile');const _0x2267cf=Array['from'](_0x5a2987[_0x1d7d6c(0x2e6)]())[_0x1d7d6c(0x33a)]((_0x25ba99,_0x429527)=>_0x25ba99['username']['localeCompare'](_0x429527[_0x1d7d6c(0x285)]));if(_0x2267cf[_0x1d7d6c(0x237)]===0x0){_0x54a2b2[_0x1d7d6c(0x30b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x54a2b2['innerHTML']='',_0x2267cf['forEach'](_0x3c2097=>{const _0x242b8e=_0x1d7d6c,_0x17fa7e=document['createElement']('tr');_0x17fa7e[_0x242b8e(0x1ff)]['username']=_0x3c2097['username'],_0x17fa7e[_0x242b8e(0x1ff)]['roleName']=_0x3c2097[_0x242b8e(0x14c)]||'',_0x17fa7e['dataset']['roleColor']=_0x3c2097['roleColor']||'#808080';const _0xa17fd8=_0x3c2097['roleAssignedAt']?new Date(_0x3c2097['roleAssignedAt']['seconds']*0x3e8)[_0x242b8e(0x1f9)]():'N/A',_0x361855=_0x3c2097[_0x242b8e(0x14c)]?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x3c2097['roleColor']+';\x20color:\x20'+getContrastColor(_0x3c2097['roleColor'])+_0x242b8e(0x338)+_0x3c2097[_0x242b8e(0x14c)]+_0x242b8e(0x225):'<span\x20class=\x22no-role\x22>None</span>';_0x17fa7e[_0x242b8e(0x30b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c2097['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x3c2097['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x361855+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3c2097['roleAssignedBy']||_0x242b8e(0x397))+_0x242b8e(0x1d1)+_0xa17fd8+_0x242b8e(0x2af)+_0x3c2097['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3c2097['roleName']?_0x242b8e(0x2c1)+_0x3c2097['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x54a2b2['appendChild'](_0x17fa7e);}),document['querySelectorAll']('.edit-role-btn')[_0x1d7d6c(0x15b)](_0x435747=>{_0x435747['addEventListener']('click',()=>{const _0x3eeaed=_0x435747['dataset']['username'];openRoleEditModal(_0x3eeaed);});}),document[_0x1d7d6c(0x263)](_0x1d7d6c(0x291))[_0x1d7d6c(0x15b)](_0x107892=>{_0x107892['addEventListener']('click',()=>{const _0x539850=a4_0x22fa,_0x35209c=_0x107892['dataset']['username'];confirm(_0x539850(0x143)+_0x35209c+'?')&&setUserRole(_0x35209c,null,null)['then'](()=>loadUsersWithRoles())[_0x539850(0x189)](_0x2a77fe=>console['error']('Error\x20removing\x20role:',_0x2a77fe));});});}catch(_0x584331){console[_0x1d7d6c(0x2fb)](_0x1d7d6c(0x154),_0x584331),_0x54a2b2[_0x1d7d6c(0x30b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x1709b9){const _0x4ace5f=a4_0x589c4c;console['log'](_0x4ace5f(0x1a8),_0x1709b9);const _0x514efd=document['getElementById'](_0x4ace5f(0x1e6)),_0x3be9a9=document['getElementById']('role-username'),_0x4bf925=document['getElementById']('user-role');if(!_0x514efd){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console[_0x4ace5f(0x1b5)](_0x4ace5f(0x23a),_0x514efd);_0x3be9a9?(_0x3be9a9['value']=_0x1709b9,console[_0x4ace5f(0x1b5)]('Username\x20input\x20set\x20to:\x20'+_0x1709b9)):console['warn'](_0x4ace5f(0x37c));const _0x111ad1=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x1709b9+'\x22]');if(_0x111ad1&&_0x4bf925){const _0x4a0fde=_0x111ad1[_0x4ace5f(0x1ff)][_0x4ace5f(0x314)];_0x4bf925[_0x4ace5f(0x240)]=_0x4a0fde==='none'?'':_0x4a0fde,console[_0x4ace5f(0x1b5)]('Role\x20select\x20set\x20to:\x20'+_0x4bf925['value']+'\x20(based\x20on\x20data-role:\x20'+_0x4a0fde+')');}else{if(!_0x111ad1)console['warn']('Table\x20row\x20for\x20user\x20'+_0x1709b9+'\x20not\x20found.');if(!_0x4bf925)console[_0x4ace5f(0x375)]('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x4bf925)_0x4bf925['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x514efd['classList'][_0x4ace5f(0x1b3)]('active');const _0x2ee6fc=document[_0x4ace5f(0x168)]('cancel-role-btn');_0x2ee6fc?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x2ee6fc[_0x4ace5f(0x17c)]('click',closeModalHandler),_0x2ee6fc['addEventListener']('click',closeModalHandler)):console['warn'](_0x4ace5f(0x2e2)),console['log']('Attaching\x20background\x20click\x20listener.'),_0x514efd['removeEventListener']('click',closeModalBackgroundHandler),_0x514efd['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x53a724){_0x53a724['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x29929b=a4_0x589c4c,_0x2aeae9=document['getElementById'](_0x29929b(0x1e6));_0x2aeae9&&(_0x2aeae9['classList']['remove'](_0x29929b(0x365)),_0x2aeae9['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x1dece9=a4_0x589c4c,_0x51a69a=document[_0x1dece9(0x168)](_0x1dece9(0x2d4))?.['value']['toLowerCase']()||'',_0x5b64db=document['getElementById'](_0x1dece9(0x2fa))?.['value']||'all',_0x34ce99=document[_0x1dece9(0x263)](_0x1dece9(0x220));let _0x3a31a7=0x0;_0x34ce99[_0x1dece9(0x15b)](_0x4d119c=>{const _0x268e6e=_0x1dece9;if(_0x4d119c['querySelector']('.loading-cell')||_0x4d119c['querySelector'](_0x268e6e(0x21b))||_0x4d119c[_0x268e6e(0x33c)](_0x268e6e(0x187)))return;const _0x338537=_0x4d119c['dataset'][_0x268e6e(0x285)]?.[_0x268e6e(0x398)]()||'',_0x5a973b=_0x4d119c['dataset']['role']||'none',_0x100f44=_0x338537['includes'](_0x51a69a),_0x1517a4=_0x5b64db==='all'||_0x5a973b===_0x5b64db;_0x100f44&&_0x1517a4?(_0x4d119c[_0x268e6e(0x1ce)]['display']='',_0x3a31a7++):_0x4d119c['style']['display']=_0x268e6e(0x257);});if(_0x3a31a7===0x0&&_0x34ce99['length']>0x0){const _0x4abc78=document[_0x1dece9(0x168)]('users-table-body');if(_0x4abc78){if(!_0x4abc78[_0x1dece9(0x33c)]('.no-results')){const _0x460e30=document['createElement']('tr');_0x460e30['classList']['add'](_0x1dece9(0x2b0)),_0x460e30[_0x1dece9(0x30b)]='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x4abc78['appendChild'](_0x460e30);}}}else{const _0x34defc=document['querySelector'](_0x1dece9(0x38a));_0x34defc&&_0x34defc['remove']();}}function setupManageArticlesSection(){const _0x4319ad=a4_0x589c4c,_0x218154=document['getElementById']('load-articles-data');_0x218154&&_0x218154['addEventListener']('click',function(){const _0x32b8c5=a4_0x22fa;this['classList']['add']('loading'),this['innerHTML']=_0x32b8c5(0x188),loadArticles()['then'](()=>{const _0x96b431=_0x32b8c5;this['classList']['remove']('loading'),this[_0x96b431(0x30b)]=_0x96b431(0x256);})[_0x32b8c5(0x189)](_0x13e3fa=>{const _0x30c34e=_0x32b8c5;console['error']('Error\x20loading\x20articles:',_0x13e3fa),this['classList'][_0x30c34e(0x307)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x14ed69=_0x30c34e;this['innerHTML']=_0x14ed69(0x256);},0xbb8);});});const _0x7dd73e=document[_0x4319ad(0x168)]('create-new-article-btn');_0x7dd73e?(console['log'](_0x4319ad(0x301)),_0x7dd73e['style']['display']='block',_0x7dd73e['addEventListener']('click',()=>{openArticleModal();})):console['error'](_0x4319ad(0x1af));const _0x11c38e=document[_0x4319ad(0x168)]('article-form');_0x11c38e&&_0x11c38e['addEventListener']('submit',_0x630b82=>{_0x630b82['preventDefault'](),saveArticle();});const _0x2b8168=document['getElementById']('cancel-article-btn');_0x2b8168&&_0x2b8168['addEventListener']('click',()=>{closeArticleModal();});const _0x3152ba=document['querySelector']('#article-modal\x20.close-btn');_0x3152ba&&_0x3152ba['addEventListener']('click',()=>{closeArticleModal();});const _0x1f0532=document['getElementById']('article-modal');_0x1f0532&&_0x1f0532['addEventListener'](_0x4319ad(0x37a),_0x1f507d=>{const _0x3aa48d=_0x4319ad;_0x1f507d[_0x3aa48d(0x145)]===_0x1f0532&&closeArticleModal();});}async function loadArticles(){const _0xb83386=a4_0x589c4c,_0x988166=document['getElementById'](_0xb83386(0x1d7));if(!_0x988166)return;_0x988166['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x3a461b=collection(db,_0xb83386(0x30c)),_0x7b2d72=query(_0x3a461b,orderBy('createdAt','desc')),_0x29a801=await getDocs(_0x7b2d72);if(_0x29a801['empty']){_0x988166['innerHTML']=_0xb83386(0x1f8);return;}_0x988166['innerHTML']='',_0x29a801['forEach'](_0x3ec319=>{const _0x379890=_0xb83386,_0x5183f3=_0x3ec319[_0x379890(0x1d9)](),_0x6fe650=document['createElement']('tr'),_0x1d665e=_0x5183f3['createdAt']?new Date(_0x5183f3['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x6fe650['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5183f3['title']||_0x379890(0x26a))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5183f3['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d665e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x3ec319['id']+_0x379890(0x2fd)+_0x3ec319['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x988166['appendChild'](_0x6fe650);}),setupArticleActionButtons();}catch(_0x5db979){console[_0xb83386(0x2fb)]('Error\x20loading\x20articles:',_0x5db979),_0x988166[_0xb83386(0x30b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x5db979['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){document['querySelectorAll']('.edit-article-btn')['forEach'](_0xe2de66=>{_0xe2de66['addEventListener']('click',async _0xf8621e=>{const _0x2682e8=a4_0x22fa,_0xe4f3c7=_0xf8621e[_0x2682e8(0x18e)][_0x2682e8(0x1ff)]['id'];openArticleModal(_0xe4f3c7);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x7c43cf=>{const _0x372ab8=a4_0x22fa;_0x7c43cf[_0x372ab8(0x264)]('click',async _0x43ebae=>{const _0xfc14f=_0x372ab8,_0x2b2f5d=_0x43ebae[_0xfc14f(0x18e)]['dataset']['id'];confirmDeleteArticle(_0x2b2f5d);});});}function openArticleModal(_0x34183a=null){const _0x5e8765=a4_0x589c4c,_0x3652a6=document[_0x5e8765(0x168)]('article-modal'),_0x387250=document['getElementById'](_0x5e8765(0x2dd)),_0x486d35=document['getElementById']('article-form'),_0x1feeea=document['getElementById'](_0x5e8765(0x2b1));_0x486d35[_0x5e8765(0x258)](),_0x1feeea['value']='';if(_0x34183a)_0x387250[_0x5e8765(0x1ed)]=_0x5e8765(0x141),_0x1feeea['value']=_0x34183a,loadArticleData(_0x34183a);else{_0x387250['textContent']='Create\x20Article';const _0x3710ea=auth['currentUser'];if(_0x3710ea){const _0xb4bbff=document[_0x5e8765(0x168)]('article-author');if(_0xb4bbff&&_0x3710ea['displayName'])_0xb4bbff['value']=_0x3710ea['displayName'];else _0xb4bbff&&(_0xb4bbff['value']=_0x3710ea[_0x5e8765(0x2ca)]);}}_0x3652a6['classList'][_0x5e8765(0x1b3)](_0x5e8765(0x365));}async function loadArticleData(_0x20c9ac){const _0x1cbddb=a4_0x589c4c;try{const _0x24994d=doc(db,'articles',_0x20c9ac),_0x5d3dde=await getDoc(_0x24994d);if(!_0x5d3dde['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x56395b=_0x5d3dde[_0x1cbddb(0x1d9)]();document['getElementById']('article-title')['value']=_0x56395b[_0x1cbddb(0x191)]||'',document['getElementById'](_0x1cbddb(0x329))['value']=_0x56395b[_0x1cbddb(0x32f)]||'',document['getElementById'](_0x1cbddb(0x182))['value']=_0x56395b[_0x1cbddb(0x2c4)]||'',document['getElementById']('article-content')[_0x1cbddb(0x240)]=_0x56395b['content']||'';}catch(_0xe7f968){console['error']('Error\x20loading\x20article\x20data:',_0xe7f968),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x3a9d60=a4_0x589c4c;try{const _0x1e425d=document[_0x3a9d60(0x168)](_0x3a9d60(0x2b1))['value'],_0x401334=document['getElementById']('article-title')[_0x3a9d60(0x240)][_0x3a9d60(0x1fd)](),_0x26388e=document['getElementById']('article-author')['value']['trim'](),_0x3a25da=document['getElementById']('article-image-url')['value']['trim'](),_0x559a9c=document[_0x3a9d60(0x168)]('article-content')['value']['trim']();if(!_0x401334||!_0x559a9c){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x5235bf=auth['currentUser'];if(!_0x5235bf){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x40cbd2={'title':_0x401334,'author':_0x26388e,'imageUrl':_0x3a25da||null,'content':_0x559a9c,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5235bf[_0x3a9d60(0x2ca)]};!_0x1e425d?(_0x40cbd2[_0x3a9d60(0x175)]=serverTimestamp(),_0x40cbd2[_0x3a9d60(0x31e)]=_0x5235bf[_0x3a9d60(0x2ca)],await addDoc(collection(db,'articles'),_0x40cbd2),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,_0x3a9d60(0x30c),_0x1e425d),_0x40cbd2),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x30cdb2){console['error']('Error\x20saving\x20article:',_0x30cdb2),showNotification(_0x3a9d60(0x1eb)+_0x30cdb2['message'],'error');}}function closeArticleModal(){const _0xd354aa=a4_0x589c4c,_0xf88e1=document[_0xd354aa(0x168)]('article-modal');_0xf88e1&&_0xf88e1['classList']['remove'](_0xd354aa(0x365));}async function confirmDeleteArticle(_0x3fc6a2){const _0x5c6ab7=a4_0x589c4c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x3fc6a2)),loadArticles(),showNotification(_0x5c6ab7(0x184),'success');}catch(_0x2d8fe7){console['error']('Error\x20deleting\x20article:',_0x2d8fe7),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x2d8fe7[_0x5c6ab7(0x1cf)],_0x5c6ab7(0x2fb));}}function setupTrophyManagementSection(){const _0x587b67=a4_0x589c4c,_0x5046b1=document['getElementById']('load-trophies-data');_0x5046b1&&_0x5046b1['addEventListener']('click',function(){const _0x43fe85=a4_0x22fa;this['classList']['add']('loading'),this[_0x43fe85(0x30b)]=_0x43fe85(0x188);const _0x5afe9c=document[_0x43fe85(0x168)](_0x43fe85(0x327));_0x5afe9c&&(_0x5afe9c['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()[_0x43fe85(0x1cb)](()=>{const _0x251ef6=_0x43fe85;this[_0x251ef6(0x373)]['remove'](_0x251ef6(0x1b1)),this[_0x251ef6(0x30b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x148e64=>{const _0x4bce25=_0x43fe85;console[_0x4bce25(0x2fb)]('Error\x20loading\x20trophies:',_0x148e64),this[_0x4bce25(0x373)]['remove']('loading'),this['innerHTML']=_0x4bce25(0x156),setTimeout(()=>{const _0x3bf4cc=_0x4bce25;this['innerHTML']=_0x3bf4cc(0x317);},0xbb8);});});const _0x35ffc2=document[_0x587b67(0x168)]('create-new-trophy-btn');_0x35ffc2&&_0x35ffc2['addEventListener']('click',()=>{openTrophyModal();});const _0x54ed6d=document['getElementById'](_0x587b67(0x20f));_0x54ed6d&&_0x54ed6d['addEventListener']('submit',_0x164d66=>{_0x164d66['preventDefault'](),saveTrophyDefinition();});const _0x18a81a=document[_0x587b67(0x168)]('cancel-trophy-btn');_0x18a81a&&_0x18a81a[_0x587b67(0x264)]('click',()=>{closeTrophyModal();});document['querySelectorAll'](_0x587b67(0x367))['forEach'](_0x233a8c=>{const _0x266572=_0x587b67;_0x233a8c['addEventListener'](_0x266572(0x37a),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x15c672=document['getElementById']('trophy-modal');_0x15c672&&_0x15c672[_0x587b67(0x264)]('click',_0x587879=>{_0x587879['target']===_0x15c672&&closeTrophyModal();});const _0x3535a3=document['getElementById']('assign-trophy-modal');_0x3535a3&&_0x3535a3[_0x587b67(0x264)](_0x587b67(0x37a),_0x3fba1c=>{_0x3fba1c['target']===_0x3535a3&&closeAssignTrophyModal();});const _0x304bac=document['getElementById']('assign-trophy-form');_0x304bac&&_0x304bac[_0x587b67(0x264)]('submit',_0x4c9ca8=>{_0x4c9ca8['preventDefault'](),assignTrophyToPlayer();});const _0x36e72d=document['getElementById']('cancel-assign-btn');_0x36e72d&&_0x36e72d[_0x587b67(0x264)](_0x587b67(0x37a),()=>{closeAssignTrophyModal();});const _0x3bea86=document[_0x587b67(0x168)](_0x587b67(0x25a));_0x3bea86&&(_0x3bea86['addEventListener']('input',updateTrophyImagePreview),_0x3bea86['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x45c653=a4_0x589c4c,_0x3863d4=document['getElementById']('trophy-image-url')['value']['trim'](),_0xdc0436=document[_0x45c653(0x168)]('trophy-image-preview');if(!_0xdc0436){const _0x4c827b=document['getElementById']('trophy-image-url')['closest'](_0x45c653(0x381)),_0x5deda0=document[_0x45c653(0x2f8)]('div');_0x5deda0['id']='trophy-image-preview',_0x5deda0['className']='trophy-preview-container',_0x4c827b['appendChild'](_0x5deda0);const _0x5e6f0d=document['createElement']('img');_0x5e6f0d['id']='trophy-preview-img',_0x5e6f0d['alt']='Trophy\x20Preview',_0x5e6f0d['onerror']=function(){const _0x5d9ff1=_0x45c653;this['src']=DEFAULT_TROPHY_IMAGE,this[_0x5d9ff1(0x373)]['add'](_0x5d9ff1(0x2fb));},_0x5deda0[_0x45c653(0x219)](_0x5e6f0d);}const _0x482a94=document['getElementById']('trophy-preview-img');_0x3863d4?(_0x482a94['src']=_0x3863d4,_0x482a94[_0x45c653(0x1ce)][_0x45c653(0x224)]=_0x45c653(0x362),_0x482a94['classList']['remove'](_0x45c653(0x2fb))):(_0x482a94['src']=DEFAULT_TROPHY_IMAGE,_0x482a94['style']['display']=_0x45c653(0x362));}async function loadTrophyDefinitions(){const _0x2aecec=a4_0x589c4c,_0x2b4c34=document[_0x2aecec(0x168)]('trophies-table-body');if(!_0x2b4c34)return;_0x2b4c34['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x2958dc=collection(db,_0x2aecec(0x13c)),_0x2f097f=query(_0x2958dc,orderBy('createdAt','desc')),_0x259237=await getDocs(_0x2f097f);if(_0x259237['empty']){_0x2b4c34['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x2b4c34['innerHTML']='',_0x259237['forEach'](_0xd18e5c=>{const _0x371289=_0x2aecec,_0x5352e5=_0xd18e5c['data'](),_0x241dba=document['createElement']('tr'),_0x340e92=_0x5352e5['createdAt']?new Date(_0x5352e5['createdAt']['seconds']*0x3e8)[_0x371289(0x17f)]():_0x371289(0x397);_0x241dba[_0x371289(0x30b)]=_0x371289(0x388)+(_0x5352e5['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5352e5['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x5352e5['name']||'Untitled\x20Trophy')+_0x371289(0x32a)+(_0x5352e5[_0x371289(0x2b7)]||'common')+'\x22>'+(_0x5352e5['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x340e92+_0x371289(0x29f)+_0xd18e5c['id']+_0x371289(0x298)+_0xd18e5c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0xd18e5c['id']+_0x371289(0x271),_0x2b4c34['appendChild'](_0x241dba);}),setupTrophyActionButtons();}catch(_0x1c21fb){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x1c21fb),_0x2b4c34[_0x2aecec(0x30b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x1c21fb['message']+_0x2aecec(0x2ce);}}function setupTrophyActionButtons(){document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x43babd=>{_0x43babd['addEventListener']('click',_0x1731b9=>{const _0x208a39=_0x1731b9['currentTarget']['dataset']['id'];openTrophyModal(_0x208a39);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x429a9f=>{_0x429a9f['addEventListener']('click',_0x28e9ee=>{const _0x584389=a4_0x22fa,_0x7646cc=_0x28e9ee[_0x584389(0x18e)]['dataset']['id'];openAssignTrophyModal(_0x7646cc);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x40acde=>{_0x40acde['addEventListener']('click',_0x232695=>{const _0x5fb95d=a4_0x22fa,_0x46ccb2=_0x232695[_0x5fb95d(0x18e)]['dataset']['id'];confirmDeleteTrophy(_0x46ccb2);});});}function openTrophyModal(_0x10fc7e=null){const _0x5681cf=a4_0x589c4c,_0x23399f=document[_0x5681cf(0x168)](_0x5681cf(0x1d8)),_0x315d7e=document[_0x5681cf(0x168)](_0x5681cf(0x349)),_0x48582a=document['getElementById']('trophy-form'),_0x5c096f=document['getElementById']('trophy-id');_0x48582a['reset'](),_0x5c096f['value']='';const _0x1d9a86=document['getElementById']('trophy-preview-img');_0x1d9a86&&(_0x1d9a86['src']=DEFAULT_TROPHY_IMAGE,_0x1d9a86['classList'][_0x5681cf(0x307)](_0x5681cf(0x2fb))),_0x10fc7e?(_0x315d7e[_0x5681cf(0x1ed)]=_0x5681cf(0x290),_0x5c096f['value']=_0x10fc7e,loadTrophyData(_0x10fc7e)):_0x315d7e['textContent']=_0x5681cf(0x17b),_0x23399f[_0x5681cf(0x373)]['add']('active');}async function loadTrophyData(_0x103035){const _0x554c1a=a4_0x589c4c;try{const _0x59ff91=doc(db,_0x554c1a(0x13c),_0x103035),_0x17b8a7=await getDoc(_0x59ff91);if(!_0x17b8a7[_0x554c1a(0x242)]()){showNotification(_0x554c1a(0x196),'error');return;}const _0x46e185=_0x17b8a7[_0x554c1a(0x1d9)]();document[_0x554c1a(0x168)]('trophy-name')['value']=_0x46e185['name']||'',document['getElementById']('trophy-description')['value']=_0x46e185['description']||'',document['getElementById'](_0x554c1a(0x25a))['value']=_0x46e185['image']||'',document['getElementById'](_0x554c1a(0x29e))[_0x554c1a(0x240)]=_0x46e185['rarity']||_0x554c1a(0x1ae),updateTrophyImagePreview();}catch(_0x10f16b){console['error'](_0x554c1a(0x2f5),_0x10f16b),showNotification(_0x554c1a(0x16b),'error');}}async function saveTrophyDefinition(){const _0x316dac=a4_0x589c4c;try{const _0x29253a=document['getElementById']('trophy-id')['value'],_0x58a369=document[_0x316dac(0x168)]('trophy-name')['value']['trim'](),_0x56670=document['getElementById'](_0x316dac(0x179))['value'][_0x316dac(0x1fd)](),_0x4d50d6=document[_0x316dac(0x168)]('trophy-image-url')['value']['trim'](),_0x1299a9=document['getElementById']('trophy-rarity')['value'];if(!_0x58a369||!_0x56670||!_0x4d50d6){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x2b0c0c=auth['currentUser'];if(!_0x2b0c0c){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x527ec7={'name':_0x58a369,'description':_0x56670,'image':_0x4d50d6,'rarity':_0x1299a9,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x2b0c0c['email']};!_0x29253a?(_0x527ec7['createdAt']=serverTimestamp(),_0x527ec7['createdBy']=_0x2b0c0c[_0x316dac(0x2ca)],await addDoc(collection(db,'trophyDefinitions'),_0x527ec7),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x29253a),_0x527ec7),showNotification('Trophy\x20updated\x20successfully',_0x316dac(0x2ff))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x339f99){console['error']('Error\x20saving\x20trophy:',_0x339f99),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x339f99[_0x316dac(0x1cf)],_0x316dac(0x2fb));}}function closeTrophyModal(){const _0x4de4dd=a4_0x589c4c,_0x37cb63=document[_0x4de4dd(0x168)]('trophy-modal');_0x37cb63&&_0x37cb63['classList']['remove']('active');}async function confirmDeleteTrophy(_0x510a57){const _0x1bd14f=a4_0x589c4c;if(!_0x510a57){console[_0x1bd14f(0x2fb)]('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x31c2c2=auth['currentUser'];if(!_0x31c2c2){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console[_0x1bd14f(0x1b5)](_0x1bd14f(0x274)+_0x510a57),await deleteDoc(doc(db,_0x1bd14f(0x13c),_0x510a57)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x305a20){console['error'](_0x1bd14f(0x24f),_0x305a20),showNotification(_0x1bd14f(0x232)+_0x305a20[_0x1bd14f(0x1cf)],_0x1bd14f(0x2fb));}}async function openAssignTrophyModal(_0x3cb25){const _0xe7033e=a4_0x589c4c;try{const _0x5d9fc9=doc(db,'trophyDefinitions',_0x3cb25),_0x4e824c=await getDoc(_0x5d9fc9);if(!_0x4e824c['exists']()){showNotification(_0xe7033e(0x196),_0xe7033e(0x2fb));return;}const _0x16a947=_0x4e824c['data']();document[_0xe7033e(0x168)]('assign-trophy-id')['value']=_0x3cb25,document['getElementById']('assign-trophy-name')['value']=_0x16a947['name'],document[_0xe7033e(0x168)]('assign-trophy-image')[_0xe7033e(0x35d)]=_0x16a947['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')[_0xe7033e(0x1ed)]=_0x16a947['name']||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x16a947['description']||'No\x20description';const _0x25d70e=document['getElementById'](_0xe7033e(0x1d2));_0x25d70e['textContent']=_0x16a947['rarity']||'common',_0x25d70e['className']='trophy-rarity\x20'+(_0x16a947['rarity']||'common');const _0x1592d9=document[_0xe7033e(0x168)]('assign-trophy-modal');_0x1592d9['classList']['add']('active');}catch(_0x49c778){console[_0xe7033e(0x2fb)]('Error\x20opening\x20assign\x20trophy\x20modal:',_0x49c778),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x2a3402=a4_0x589c4c,_0x5d02be=document[_0x2a3402(0x168)]('assign-trophy-modal');_0x5d02be&&_0x5d02be['classList'][_0x2a3402(0x307)]('active');}async function assignTrophyToPlayer(){const _0x494175=a4_0x589c4c;try{const _0x335344=document['getElementById']('assign-trophy-id')['value'],_0xc4dca=document['getElementById']('assign-trophy-name')[_0x494175(0x240)],_0x5d2446=document['getElementById']('assign-player-username')['value']['trim'](),_0x244376=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x335344||!_0x5d2446){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x4c3f95=auth[_0x494175(0x2c9)];if(!_0x4c3f95){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x1b8469=null,_0x27366f=null,_0x2f93fb=null;if(_0x244376===_0x494175(0x38c)){const _0x47b05e=collection(db,'nonParticipants'),_0x225794=query(_0x47b05e,where(_0x494175(0x285),'==',_0x5d2446)),_0x7cd9fb=await getDocs(_0x225794);!_0x7cd9fb['empty']&&(_0x1b8469=_0x7cd9fb['docs'][0x0],_0x27366f=_0x1b8469['id'],_0x2f93fb=_0x1b8469['data']());}else{const _0x13d26a=_0x244376==='D1'?'players':_0x244376==='D2'?'playersD2':_0x494175(0x204),_0x2f372a=collection(db,_0x13d26a),_0x193506=query(_0x2f372a,where('username','==',_0x5d2446)),_0x2ac843=await getDocs(_0x193506);!_0x2ac843['empty']&&(_0x1b8469=_0x2ac843[_0x494175(0x330)][0x0],_0x27366f=_0x1b8469['id'],_0x2f93fb=_0x1b8469['data']());}if(!_0x1b8469){showNotification('Player\x20\x22'+_0x5d2446+'\x22\x20not\x20found\x20in\x20'+(_0x244376==='non-participant'?_0x494175(0x249):_0x244376+_0x494175(0x1b2)),'error');return;}const _0x3c0dc6=collection(db,_0x494175(0x345)),_0x11648a=query(_0x3c0dc6,where('userId','==',_0x27366f),where('trophyId','==',_0x335344)),_0x4c29c3=await getDocs(_0x11648a);if(!_0x4c29c3['empty']){showNotification('Player\x20\x22'+_0x5d2446+_0x494175(0x195),'warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x27366f,'playerUsername':_0x5d2446,'trophyId':_0x335344,'awardedAt':serverTimestamp(),'awardedBy':_0x4c3f95['email'],'ladder':_0x244376}),showNotification(_0x494175(0x2d2)+_0xc4dca+_0x494175(0x340)+_0x5d2446,'success'),closeAssignTrophyModal();}catch(_0x404216){console['error']('Error\x20assigning\x20trophy:',_0x404216),showNotification(_0x494175(0x310)+_0x404216['message'],'error');}}function setupInactivePlayersSection(){const _0x19103c=a4_0x589c4c,_0x604995=document['getElementById']('inactive-days-filter');_0x604995&&_0x604995['addEventListener'](_0x19103c(0x38f),function(){const _0xb8c26f=document['getElementById']('load-inactive-players-data');if(_0xb8c26f)_0xb8c26f['click']();});const _0x473301=document['querySelector'](_0x19103c(0x246)),_0x4dbec5=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x473301&&_0x4dbec5&&(_0x473301['addEventListener']('change',function(){const _0x1b229b=_0x19103c;if(this['checked']){currentLadder='D1';if(document[_0x1b229b(0x168)]('inactive-players')['style']['display']!==_0x1b229b(0x257)){const _0x1ba407=document['getElementById']('load-inactive-players-data');if(_0x1ba407)_0x1ba407['click']();}}}),_0x4dbec5['addEventListener']('change',function(){const _0x94df49=_0x19103c;if(this['checked']){currentLadder='D2';if(document[_0x94df49(0x168)]('inactive-players')['style']['display']!==_0x94df49(0x257)){const _0x4dc9c1=document[_0x94df49(0x168)]('load-inactive-players-data');if(_0x4dc9c1)_0x4dc9c1['click']();}}}));const _0x509e36=document['getElementById']('inactive-players-search');_0x509e36&&_0x509e36['addEventListener'](_0x19103c(0x393),debounce(function(){const _0x4a0691=_0x19103c,_0x3c3a5a=_0x509e36['value']['toLowerCase'](),_0x211967=document['querySelectorAll'](_0x4a0691(0x203));_0x211967['forEach'](_0xfa255f=>{const _0x36ae1b=_0x4a0691;if(_0xfa255f[_0x36ae1b(0x33c)]('.loading-cell')||_0xfa255f['querySelector']('.empty-state')||_0xfa255f['querySelector'](_0x36ae1b(0x187)))return;const _0x18eff5=_0xfa255f['cells'][0x0]?.[_0x36ae1b(0x1ed)][_0x36ae1b(0x398)]()||'',_0x34ff17=_0xfa255f['cells'][0x5]?.[_0x36ae1b(0x1ed)][_0x36ae1b(0x398)]()||'';_0x18eff5[_0x36ae1b(0x23e)](_0x3c3a5a)||_0x34ff17['includes'](_0x3c3a5a)?_0xfa255f['style']['display']='':_0xfa255f[_0x36ae1b(0x1ce)][_0x36ae1b(0x224)]='none';});},0x12c)),document['addEventListener']('click',function(_0x6e0c34){const _0x31c2e3=_0x19103c;if(_0x6e0c34[_0x31c2e3(0x145)][_0x31c2e3(0x28e)](_0x31c2e3(0x2bc))){const _0x4893df=_0x6e0c34['target']['closest']('.view-player-btn'),_0x19a2f4=_0x4893df['dataset']['username'];_0x19a2f4&&alert('View\x20player\x20details\x20for\x20'+_0x19a2f4+'\x20-\x20Feature\x20coming\x20soon');}}),console['log'](_0x19103c(0x283));}async function loadInactivePlayersData(){const _0x17a163=a4_0x589c4c,_0x2fcf67=document['getElementById']('inactive-players-table-body');if(!_0x2fcf67)return;_0x2fcf67['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x4df114=document['getElementById']('inactive-days-filter'),_0x48eee4=_0x4df114?parseInt(_0x4df114['value'])||0x0:0x0,_0x50156c=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x595ebd=await getDocs(_0x50156c);if(_0x595ebd['empty']){_0x2fcf67['innerHTML']=_0x17a163(0x384);return;}const _0x43cf5e=[];_0x595ebd['forEach'](_0x399f1c=>{const _0x535ef5=_0x399f1c['data']();_0x43cf5e['push']({..._0x535ef5,'id':_0x399f1c['id'],'username':_0x535ef5['username']||'Unknown\x20Player'});}),console['log'](_0x17a163(0x153)+_0x43cf5e['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0xf7b80a=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x4bf8e5=_0x43cf5e['map'](async _0x2b2e12=>{const _0x166727=_0x17a163;try{const _0x375998=collection(db,_0xf7b80a),_0x582bd8=query(_0x375998,or(where(_0x166727(0x355),'==',_0x2b2e12['username']),where('loserUsername','==',_0x2b2e12['username'])),orderBy('approvedAt',_0x166727(0x217)),limit(0x1)),_0x498ce7=await getDocs(_0x582bd8);if(!_0x498ce7['empty']){const _0x3bb00b=_0x498ce7['docs'][0x0]['data'](),_0x4ba731=_0x3bb00b['approvedAt']?new Date(_0x3bb00b['approvedAt']['seconds']*0x3e8):null,_0x32abd6=new Date(),_0xbd8f15=_0x4ba731?Math['floor']((_0x32abd6-_0x4ba731)/(0x3e8*0x3c*0x3c*0x18)):null,_0x472b47=_0x3bb00b['winnerUsername']===_0x2b2e12['username']?_0x3bb00b['loserUsername']:_0x3bb00b['winnerUsername'],_0x3ff621=_0x3bb00b[_0x166727(0x355)]===_0x2b2e12[_0x166727(0x285)]?'Won':'Lost';return{..._0x2b2e12,'lastMatch':{'date':_0x4ba731?_0x4ba731['toLocaleDateString']():'N/A','opponent':_0x472b47||'Unknown','result':_0x3ff621,'timestamp':_0x4ba731||new Date(0x0),'daysSinceMatch':_0xbd8f15||Number['MAX_SAFE_INTEGER']}};}else return{..._0x2b2e12,'lastMatch':{'date':_0x166727(0x16f),'opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x2e265b){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x2b2e12['username']+':',_0x2e265b),{..._0x2b2e12,'lastMatch':{'date':'Error','opponent':_0x166727(0x341),'result':_0x166727(0x341),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x1893ea=await Promise['all'](_0x4bf8e5);_0x1893ea[_0x17a163(0x33a)]((_0x1f0136,_0x2f8468)=>_0x2f8468['lastMatch']['daysSinceMatch']-_0x1f0136['lastMatch']['daysSinceMatch']);_0x48eee4>0x0&&(_0x1893ea=_0x1893ea['filter'](_0x12e568=>_0x12e568['lastMatch'][_0x17a163(0x172)]>=_0x48eee4));_0x2fcf67['innerHTML']='';if(_0x1893ea[_0x17a163(0x237)]===0x0){_0x2fcf67['innerHTML']=_0x17a163(0x33b);return;}_0x1893ea['forEach'](_0x29aa6d=>{const _0x121243=_0x17a163,_0x1bdc6b=document['createElement']('tr'),_0x148fb8=_0x29aa6d['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x29aa6d['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x1bdc6b[_0x121243(0x1fa)]=_0x148fb8,_0x1bdc6b['innerHTML']=_0x121243(0x350)+_0x29aa6d['username']+_0x121243(0x1d1)+(_0x29aa6d[_0x121243(0x27b)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x29aa6d[_0x121243(0x210)]['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x29aa6d[_0x121243(0x210)]['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x29aa6d['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x29aa6d['lastMatch']['date']==='Never\x20played'?'No\x20matches\x20found':_0x29aa6d['lastMatch'][_0x121243(0x1db)]+'\x20vs\x20'+_0x29aa6d['lastMatch'][_0x121243(0x368)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x29aa6d['username']+_0x121243(0x288),_0x2fcf67[_0x121243(0x219)](_0x1bdc6b);}),console[_0x17a163(0x1b5)]('Displaying\x20'+_0x1893ea['length']+'\x20inactive\x20players');}catch(_0x489cbe){console['error']('Error\x20loading\x20inactive\x20players:',_0x489cbe),_0x2fcf67['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x489cbe['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x3cff96=a4_0x589c4c;console[_0x3cff96(0x1b5)]('Setting\x20up\x20highlight\x20buttons');const _0x4ca83d=document[_0x3cff96(0x168)]('create-match-highlight-btn');_0x4ca83d&&_0x4ca83d[_0x3cff96(0x264)]('click',function(){const _0x3aaed1=_0x3cff96;console[_0x3aaed1(0x1b5)]('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x242f51=document[_0x3cff96(0x168)](_0x3cff96(0x352));_0x242f51&&_0x242f51['addEventListener']('click',function(){console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x480677=document['getElementById']('create-achievement-highlight-btn');_0x480677&&_0x480677['addEventListener']('click',function(){const _0x3230e8=_0x3cff96;console[_0x3230e8(0x1b5)]('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x12d739='match'){const _0x83647=a4_0x589c4c;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x12d739);const _0x1517ac=document[_0x83647(0x168)]('highlight-modal'),_0x4d0a1f=document['getElementById']('highlight-form'),_0x41b509=document['getElementById']('highlight-modal-title'),_0xdd33bf=document['getElementById']('highlight-id');if(!_0x1517ac||!_0x4d0a1f||!_0x41b509){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x4d0a1f['reset'](),_0xdd33bf['value']='';const _0x325e8e=['match','creator','achievement'],_0x1768f2=!_0x325e8e['includes'](_0x12d739);if(_0x1768f2){const _0x4a9e4b=_0x12d739;_0xdd33bf['value']=_0x4a9e4b,_0x41b509[_0x83647(0x1ed)]='Loading...',loadHighlightDataAdmin(_0x4a9e4b);}else{const _0x1d3ba5=_0x12d739;document[_0x83647(0x168)]('highlight-type')['value']=_0x1d3ba5,_0x41b509['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x1d3ba5),toggleHighlightFields(_0x1d3ba5);const _0x23fcfc=auth[_0x83647(0x2c9)];_0x23fcfc&&document['getElementById']('highlight-submitted-by')&&(document['getElementById'](_0x83647(0x1e1))['value']=_0x23fcfc['displayName']||_0x23fcfc[_0x83647(0x2ca)]);}_0x1517ac['classList'][_0x83647(0x1b3)](_0x83647(0x365));}function toggleHighlightFields(_0x225428){const _0x55c018=a4_0x589c4c;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x225428);const _0xd06f68=document['getElementById']('highlight-form');if(!_0xd06f68)return;const _0x31fd3c=_0xd06f68['querySelectorAll']('.form-group,\x20.form-row');_0x31fd3c[_0x55c018(0x15b)](_0x2c781f=>_0x2c781f['style']['display']=_0x55c018(0x257));const _0x5b51c0=document['getElementById'](_0x55c018(0x354));if(_0x5b51c0)_0x5b51c0['style'][_0x55c018(0x224)]='none';const _0xda4dac=['highlight-title-container',_0x55c018(0x252),'highlight-submitted-by-container'];_0xda4dac['forEach'](_0xf3865d=>{const _0x1e450d=_0x55c018,_0x5cf21d=document[_0x1e450d(0x168)](_0xf3865d);if(_0x5cf21d)_0x5cf21d[_0x1e450d(0x1ce)]['display']='block';});if(_0x225428===_0x55c018(0x1f3)){const _0x32282a=['highlight-video-container','highlight-match-info-container',_0x55c018(0x1f2),_0x55c018(0x197),'highlight-players-container','highlight-match-link-container'];_0x32282a[_0x55c018(0x15b)](_0x13e9a1=>{const _0x4e2d32=_0x55c018,_0x1f3d34=document['getElementById'](_0x13e9a1);_0x1f3d34&&(_0x13e9a1==='highlight-players-container'?_0x1f3d34[_0x4e2d32(0x1ce)]['display']='flex':_0x1f3d34[_0x4e2d32(0x1ce)]['display']=_0x4e2d32(0x362));});const _0x38307d=document['getElementById']('highlight-video-id');if(_0x38307d){_0x38307d[_0x55c018(0x378)]=!![];const _0x3bf239=_0x38307d[_0x55c018(0x221)];if(_0x3bf239)_0x3bf239['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x5b51c0)_0x5b51c0[_0x55c018(0x1ce)]['display']=_0x55c018(0x362);updateHighlightVideoPreview();}else{if(_0x225428===_0x55c018(0x17e)){const _0x3a2c3e=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container',_0x55c018(0x16d),'highlight-video-container'];_0x3a2c3e['forEach'](_0x30fa99=>{const _0x485c62=document['getElementById'](_0x30fa99);if(_0x485c62)_0x485c62['style']['display']='block';});const _0x5c1585=document['getElementById']('highlight-video-id');if(_0x5c1585){_0x5c1585['required']=![];const _0x537a23=_0x5c1585[_0x55c018(0x221)];if(_0x537a23)_0x537a23['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x225428==='achievement'){const _0x4947f6=['highlight-achievement-player-container',_0x55c018(0x32c),'highlight-achievement-details-container','highlight-player-profile-container',_0x55c018(0x326),_0x55c018(0x347)];_0x4947f6['forEach'](_0x58f4cd=>{const _0x23b613=_0x55c018,_0x333429=document['getElementById'](_0x58f4cd);if(_0x333429)_0x333429[_0x23b613(0x1ce)]['display']='block';});const _0x4d1549=document['getElementById']('highlight-video-id');if(_0x4d1549){_0x4d1549[_0x55c018(0x378)]=![];const _0x54b52f=_0x4d1549['previousElementSibling'];if(_0x54b52f)_0x54b52f['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x3dd99b){const _0x5e9d44=a4_0x589c4c;try{const _0xd70f98=doc(db,'highlights',_0x3dd99b),_0x564f52=await getDoc(_0xd70f98);if(!_0x564f52['exists']()){showNotification(_0x5e9d44(0x2bb),'error');return;}const _0x231679=_0x564f52['data'](),_0x47ab15=_0x231679['type']||'match';document[_0x5e9d44(0x168)]('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x47ab15),document['getElementById'](_0x5e9d44(0x173))['value']=_0x47ab15,toggleHighlightFields(_0x47ab15),document['getElementById']('highlight-title')[_0x5e9d44(0x240)]=_0x231679[_0x5e9d44(0x191)]||'',document['getElementById']('highlight-description')[_0x5e9d44(0x240)]=_0x231679['description']||'',document[_0x5e9d44(0x168)]('highlight-submitted-by')['value']=_0x231679['submittedBy']||'';_0x231679[_0x5e9d44(0x39f)]&&(document[_0x5e9d44(0x168)](_0x5e9d44(0x2f6))['value']=_0x231679['videoId'],updateHighlightVideoPreview());if(_0x47ab15===_0x5e9d44(0x1f3)){document['getElementById'](_0x5e9d44(0x337))['value']=_0x231679['matchInfo']||'',document[_0x5e9d44(0x168)](_0x5e9d44(0x2f3))['value']=_0x231679[_0x5e9d44(0x198)]||'';if(_0x231679[_0x5e9d44(0x19c)]){const _0x5373b7=new Date(_0x231679['matchDate']['seconds']*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x5373b7['toISOString']()['split']('T')[0x0];}document['getElementById'](_0x5e9d44(0x1fc))['value']=_0x231679['winnerName']||'',document[_0x5e9d44(0x168)]('highlight-winner-score')[_0x5e9d44(0x240)]=_0x231679['winnerScore']||'',document['getElementById'](_0x5e9d44(0x2dc))['value']=_0x231679['loserName']||'',document['getElementById']('highlight-loser-score')['value']=_0x231679['loserScore']||'',document['getElementById'](_0x5e9d44(0x2c0))[_0x5e9d44(0x240)]=_0x231679['matchLink']||'';}else{if(_0x47ab15==='creator')document[_0x5e9d44(0x168)]('highlight-map')[_0x5e9d44(0x240)]=_0x231679[_0x5e9d44(0x198)]||'',document['getElementById']('highlight-map-creator')['value']=_0x231679['mapCreator']||'',document[_0x5e9d44(0x168)]('highlight-map-version')['value']=_0x231679[_0x5e9d44(0x23b)]||'',document['getElementById']('highlight-creator-image')['value']=_0x231679[_0x5e9d44(0x351)]||'';else _0x47ab15==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0x231679[_0x5e9d44(0x22b)]||'',document['getElementById']('highlight-achievement-type')['value']=_0x231679['achievementType']||'',document[_0x5e9d44(0x168)](_0x5e9d44(0x1a3))['value']=_0x231679['achievementDetails']||'',document[_0x5e9d44(0x168)]('highlight-player-profile')[_0x5e9d44(0x240)]=_0x231679['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')[_0x5e9d44(0x240)]=_0x231679['achievementImageUrl']||'');}}catch(_0x552f12){console['error']('Error\x20loading\x20highlight:',_0x552f12),showNotification('Error\x20loading\x20highlight:\x20'+_0x552f12['message'],'error');}}async function saveHighlight(){const _0x1661ae=a4_0x589c4c;try{const _0x2c5d7e=document['getElementById'](_0x1661ae(0x1de))?.['value']||'',_0x182eb0=document[_0x1661ae(0x168)]('highlight-type')?.['value']||'match',_0x4b46b1={'title':document['getElementById'](_0x1661ae(0x273))?.['value']?.[_0x1661ae(0x1fd)]()||'','description':document[_0x1661ae(0x168)]('highlight-description')?.['value']?.[_0x1661ae(0x1fd)]()||'','submittedBy':document['getElementById'](_0x1661ae(0x1e1))?.['value']?.['trim']()||'','videoId':document[_0x1661ae(0x168)](_0x1661ae(0x2f6))?.['value']?.['trim']()||null,'type':_0x182eb0};if(!_0x4b46b1['title']){showNotification(_0x1661ae(0x2d8),'error');return;}if(_0x182eb0==='match'){_0x4b46b1['matchInfo']=document['getElementById']('highlight-match-info')?.['value']?.['trim']()||'',_0x4b46b1[_0x1661ae(0x198)]=document['getElementById'](_0x1661ae(0x2f3))?.['value']?.[_0x1661ae(0x1fd)]()||'';const _0x1db0a1=document['getElementById']('highlight-match-date'),_0x4b3c3f=_0x1db0a1?.['value']||'';_0x4b46b1[_0x1661ae(0x19c)]=_0x4b3c3f?Timestamp['fromDate'](new Date(_0x4b3c3f)):null,_0x4b46b1[_0x1661ae(0x2cd)]=document[_0x1661ae(0x168)](_0x1661ae(0x1fc))?.['value']?.['trim']()||'',_0x4b46b1['winnerScore']=document[_0x1661ae(0x168)](_0x1661ae(0x346))?.['value']?.[_0x1661ae(0x1fd)]()||'',_0x4b46b1[_0x1661ae(0x316)]=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x4b46b1['loserScore']=document[_0x1661ae(0x168)](_0x1661ae(0x26f))?.['value']?.[_0x1661ae(0x1fd)]()||'',_0x4b46b1['matchLink']=document[_0x1661ae(0x168)]('highlight-match-link')?.[_0x1661ae(0x240)]?.['trim']()||'';if(!_0x4b46b1[_0x1661ae(0x39f)]){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights',_0x1661ae(0x2fb));return;}}else{if(_0x182eb0==='creator'){_0x4b46b1[_0x1661ae(0x198)]=document[_0x1661ae(0x168)]('highlight-map')?.['value']?.['trim']()||'',_0x4b46b1['mapCreator']=document['getElementById'](_0x1661ae(0x241))?.['value']?.[_0x1661ae(0x1fd)]()||'',_0x4b46b1['mapVersion']=document['getElementById'](_0x1661ae(0x35f))?.[_0x1661ae(0x240)]?.['trim']()||'',_0x4b46b1[_0x1661ae(0x351)]=document['getElementById'](_0x1661ae(0x29d))?.['value']?.['trim']()||'';if(!_0x4b46b1['mapCreator']){showNotification(_0x1661ae(0x270),_0x1661ae(0x2fb));return;}}else{if(_0x182eb0==='achievement'){_0x4b46b1['achievementPlayer']=document[_0x1661ae(0x168)]('highlight-achievement-player')?.['value']?.[_0x1661ae(0x1fd)]()||'',_0x4b46b1[_0x1661ae(0x385)]=document['getElementById']('highlight-achievement-type')?.[_0x1661ae(0x240)]?.['trim']()||'',_0x4b46b1['achievementDetails']=document[_0x1661ae(0x168)]('highlight-achievement-details')?.['value']?.[_0x1661ae(0x1fd)]()||'',_0x4b46b1[_0x1661ae(0x35c)]=document['getElementById']('highlight-player-profile')?.[_0x1661ae(0x240)]?.[_0x1661ae(0x1fd)]()||'',_0x4b46b1[_0x1661ae(0x296)]=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x4b46b1[_0x1661ae(0x22b)]){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x2c5d7e?(_0x4b46b1['updatedAt']=serverTimestamp(),await updateDoc(doc(db,_0x1661ae(0x276),_0x2c5d7e),_0x4b46b1),showNotification('Highlight\x20updated\x20successfully!',_0x1661ae(0x2ff))):(_0x4b46b1['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x4b46b1),showNotification(_0x1661ae(0x294),_0x1661ae(0x2ff))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x1de34c){console[_0x1661ae(0x2fb)](_0x1661ae(0x2c6),_0x1de34c),showNotification('Error\x20saving\x20highlight:\x20'+_0x1de34c['message'],'error');}}function closeHighlightModal(){const _0x394afa=a4_0x589c4c,_0x46d4f2=document['getElementById']('highlight-modal');if(_0x46d4f2)_0x46d4f2['classList'][_0x394afa(0x307)]('active');}function getHighlightTypeName(_0x4a1f8a){const _0x5701b3=a4_0x589c4c;switch(_0x4a1f8a){case'match':return'Match\x20Highlight';case _0x5701b3(0x17e):return _0x5701b3(0x1f6);case'achievement':return _0x5701b3(0x236);default:return _0x5701b3(0x2ae);}}function updateHighlightVideoPreview(){const _0x1c95e0=a4_0x589c4c,_0x10464c=document['getElementById']('highlight-video-id'),_0x2049f8=document['getElementById']('highlight-video-preview-container'),_0x78180d=document['getElementById']('highlight-video-preview');if(!_0x10464c||!_0x78180d||!_0x2049f8)return;const _0x20c099=_0x10464c[_0x1c95e0(0x240)][_0x1c95e0(0x1fd)]();_0x20c099&&/^[a-zA-Z0-9_-]{11}$/[_0x1c95e0(0x1e9)](_0x20c099)?(_0x78180d[_0x1c95e0(0x35d)]='https://www.youtube.com/embed/'+_0x20c099,_0x2049f8[_0x1c95e0(0x1ce)]['display']=_0x1c95e0(0x362)):(_0x78180d['src']='',_0x2049f8[_0x1c95e0(0x1ce)]['display']='none');}async function loadHighlightsAdmin(){const _0x49127b=a4_0x589c4c,_0x2b6efc=document[_0x49127b(0x168)](_0x49127b(0x208));if(!_0x2b6efc)return;_0x2b6efc['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x15b244=query(collection(db,_0x49127b(0x276)),orderBy(_0x49127b(0x175),_0x49127b(0x217))),_0x1b49b6=await getDocs(_0x15b244);if(_0x1b49b6[_0x49127b(0x2ec)]){_0x2b6efc['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x2b6efc['innerHTML']='',_0x1b49b6[_0x49127b(0x15b)](_0xe1f94a=>{const _0x51668d=_0x49127b,_0x4ce95e=_0xe1f94a[_0x51668d(0x1d9)](),_0x4b7e8c=document[_0x51668d(0x2f8)]('tr'),_0x29f1c8=_0x4ce95e['createdAt']?new Date(_0x4ce95e['createdAt']['seconds']*0x3e8)[_0x51668d(0x1f9)]():'N/A';let _0x46d49b='Unknown',_0x3eb3a8='';switch(_0x4ce95e['type']){case'match':_0x46d49b='Match',_0x3eb3a8='match-type';break;case'creator':_0x46d49b='Creator',_0x3eb3a8='creator-type';break;case'achievement':_0x46d49b=_0x51668d(0x205),_0x3eb3a8=_0x51668d(0x281);break;}_0x4b7e8c[_0x51668d(0x30b)]=_0x51668d(0x350)+(_0x4ce95e['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x3eb3a8+'\x22>'+_0x46d49b+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x29f1c8+_0x51668d(0x1d1)+(_0x4ce95e[_0x51668d(0x306)]||_0x51668d(0x13e))+_0x51668d(0x1d1)+(_0x4ce95e['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x51668d(0x33e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0xe1f94a['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0xe1f94a['id']+_0x51668d(0x332),_0x2b6efc[_0x51668d(0x219)](_0x4b7e8c);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x412a2b=>{_0x412a2b['addEventListener']('click',_0x11fb0e=>{const _0x2c8f39=a4_0x22fa;openHighlightModal(_0x11fb0e[_0x2c8f39(0x18e)]['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x5e1770=>{const _0x12f8ee=_0x49127b;_0x5e1770[_0x12f8ee(0x264)]('click',_0x53a267=>{const _0x4e1e36=_0x12f8ee;confirmDeleteHighlight(_0x53a267['currentTarget'][_0x4e1e36(0x1ff)]['id']);});});}catch(_0x4e8a46){console['error']('Error\x20loading\x20highlights:',_0x4e8a46),_0x2b6efc['innerHTML']=_0x49127b(0x2ef)+_0x4e8a46[_0x49127b(0x1cf)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x1bedd8){const _0x5fd47a=a4_0x589c4c;if(confirm(_0x5fd47a(0x2de)))try{await deleteDoc(doc(db,_0x5fd47a(0x276),_0x1bedd8)),showNotification('Highlight\x20deleted\x20successfully',_0x5fd47a(0x2ff)),loadHighlightsAdmin();}catch(_0x1447ee){console['error']('Error\x20deleting\x20highlight:',_0x1447ee),showNotification(_0x5fd47a(0x1cd)+_0x1447ee['message'],_0x5fd47a(0x2fb));}}function setupCreateTestMatchModal(){const _0x346c7e=a4_0x589c4c;console[_0x346c7e(0x1b5)](_0x346c7e(0x27a));const _0x35b814=document['getElementById']('create-test-match-modal'),_0x4b0383=document[_0x346c7e(0x168)]('create-test-match-form');if(!_0x35b814){console[_0x346c7e(0x2fb)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x4b0383){console[_0x346c7e(0x2fb)]('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x1d1dec=_0x35b814[_0x346c7e(0x3a5)](!![]);_0x35b814[_0x346c7e(0x16e)]['replaceChild'](_0x1d1dec,_0x35b814);const _0x5c3bba=_0x1d1dec[_0x346c7e(0x33c)]('#create-test-match-form');_0x1d1dec['addEventListener']('click',function(_0x53ed84){const _0x2923b9=_0x346c7e;_0x53ed84['target']===_0x1d1dec&&(console['log'](_0x2923b9(0x2c5)),closeCreateTestMatchModal());});const _0x1e84da=_0x1d1dec['querySelector'](_0x346c7e(0x2ac));_0x1e84da&&_0x1e84da['addEventListener']('click',function(_0x3b353a){const _0x1b1a23=_0x346c7e;_0x3b353a[_0x1b1a23(0x157)](),_0x3b353a['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x32b553=_0x1d1dec[_0x346c7e(0x33c)](_0x346c7e(0x1d5));_0x32b553&&_0x32b553['addEventListener']('click',function(_0xf620bb){const _0x256bcb=_0x346c7e;_0xf620bb[_0x256bcb(0x157)](),_0xf620bb[_0x256bcb(0x29c)](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x5c3bba){_0x5c3bba['addEventListener']('submit',function(_0x4d5784){_0x4d5784['preventDefault'](),_0x4d5784['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x646ec6=_0x5c3bba['querySelector']('button[type=\x22submit\x22]');_0x646ec6&&_0x646ec6['addEventListener']('click',function(_0x54e8af){const _0x2d0fa6=_0x346c7e;_0x54e8af[_0x2d0fa6(0x157)](),_0x54e8af[_0x2d0fa6(0x29c)](),console['log'](_0x2d0fa6(0x379)),createTestMatch();});}console['log'](_0x346c7e(0x3a4));}function setupManageHighlightsSection(){const _0x20c4e1=a4_0x589c4c;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x743624=document['getElementById']('highlight-form');_0x743624&&_0x743624[_0x20c4e1(0x264)]('submit',_0x247eef=>{const _0x166b36=_0x20c4e1;_0x247eef[_0x166b36(0x157)](),saveHighlight();});const _0x4903a9=document[_0x20c4e1(0x168)](_0x20c4e1(0x34c));_0x4903a9&&_0x4903a9['addEventListener']('click',closeHighlightModal);const _0x595b1c=document['querySelector']('#highlight-modal\x20.close-btn');_0x595b1c&&_0x595b1c['addEventListener']('click',closeHighlightModal);const _0x54beee=document['getElementById']('highlight-modal');_0x54beee&&_0x54beee[_0x20c4e1(0x264)]('click',_0x9e56d0=>{_0x9e56d0['target']===_0x54beee&&closeHighlightModal();});const _0x49c951=document['getElementById']('highlight-video-id');_0x49c951&&_0x49c951['addEventListener'](_0x20c4e1(0x393),()=>{updateHighlightVideoPreview();}),console[_0x20c4e1(0x1b5)]('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x139754=a4_0x589c4c;console[_0x139754(0x1b5)]('Setting\x20up\x20Manage\x20Matches\x20section');const _0x55ba49=document['getElementById']('matches-prev-page'),_0x356956=document['getElementById'](_0x139754(0x2f1));_0x55ba49&&_0x55ba49[_0x139754(0x264)]('click',()=>{const _0x190046=_0x139754,_0x5b360e=currentLadder[_0x190046(0x398)]();loadMatchesData(matchesPagination[_0x5b360e]['page']-0x1);});_0x356956&&_0x356956['addEventListener']('click',()=>{const _0x3634d3=_0x139754,_0x70ab25=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x70ab25][_0x3634d3(0x14a)]+0x1);});const _0x41e7bf=document['getElementById'](_0x139754(0x150)),_0x573834=document['getElementById']('reset-matches-filters');_0x41e7bf&&_0x41e7bf['addEventListener'](_0x139754(0x37a),applyMatchesFilters);_0x573834&&_0x573834['addEventListener']('click',resetMatchesFilters);const _0x547461=document[_0x139754(0x168)]('matches-search');_0x547461&&_0x547461['addEventListener'](_0x139754(0x393),debounce(filterMatchesTable,0x12c));const _0xee75f5=document['getElementById']('resimulate-match-btn');_0xee75f5&&_0xee75f5['addEventListener']('click',openResimulateModal);const _0x4eea3e=document[_0x139754(0x168)]('resimulate-modal');if(_0x4eea3e){const _0x3da0fc=_0x4eea3e['querySelector']('.close');_0x3da0fc&&_0x3da0fc[_0x139754(0x264)](_0x139754(0x37a),closeResimulateModal),_0x4eea3e['addEventListener']('click',_0x4bfab5=>{_0x4bfab5['target']===_0x4eea3e&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x5adf7b=a4_0x589c4c;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x3584cc=document['getElementById']('create-test-match-modal'),_0x5d7139=document['getElementById']('create-test-match-form');if(!_0x3584cc){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x5d7139){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found',_0x5adf7b(0x2fb));return;}_0x5d7139[_0x5adf7b(0x258)]();const _0x4f0a95=document['querySelectorAll'](_0x5adf7b(0x343));let _0x28c841=![];_0x4f0a95[_0x5adf7b(0x15b)](_0x3cf55d=>{const _0x9039f2=_0x5adf7b;console['log']('Found\x20radio\x20with\x20value:',_0x3cf55d['value']),_0x3cf55d['value']===currentLadder&&(_0x3cf55d['checked']=!![],_0x28c841=!![],console[_0x9039f2(0x1b5)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x28c841){console[_0x5adf7b(0x375)]('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0xce435c=document[_0x5adf7b(0x33c)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0xce435c&&(_0xce435c[_0x5adf7b(0x1d3)]=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x3d301c=document['getElementById'](_0x5adf7b(0x289));if(_0x3d301c){const _0x47fa34=new Date()['toISOString']()['split']('T')[0x0];_0x3d301c[_0x5adf7b(0x240)]=_0x47fa34;}_0x3584cc[_0x5adf7b(0x1ce)]['display']='flex',_0x3584cc['style'][_0x5adf7b(0x21a)]='visible',_0x3584cc['style']['opacity']='1',_0x3584cc['classList']['add'](_0x5adf7b(0x365)),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x2f7a8b=document[_0x5adf7b(0x168)]('test-match-winner-username');_0x2f7a8b&&setTimeout(()=>{_0x2f7a8b['focus']();},0x64);}function closeCreateTestMatchModal(){const _0xfb4d7c=a4_0x589c4c;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x120a0f=document['getElementById']('create-test-match-modal');if(!_0x120a0f){console[_0xfb4d7c(0x2fb)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x120a0f[_0xfb4d7c(0x373)][_0xfb4d7c(0x307)](_0xfb4d7c(0x365)),_0x120a0f['style']['opacity']='0',_0x120a0f['style']['visibility']='hidden',setTimeout(()=>{const _0x5f37e0=_0xfb4d7c;!_0x120a0f['classList']['contains'](_0x5f37e0(0x365))&&(_0x120a0f[_0x5f37e0(0x1ce)][_0x5f37e0(0x224)]='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x492fda=a4_0x589c4c;console['log'](_0x492fda(0x297));try{const _0x2346ff=auth['currentUser'];if(!_0x2346ff){showNotification(_0x492fda(0x39b),_0x492fda(0x2fb));return;}const _0x341000='D1',_0x16a97c='approvedMatches',_0x3502be={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x492fda(0x315),'winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x492fda(0x315),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp[_0x492fda(0x23f)](new Date()),'approvedBy':_0x2346ff['email'],'createdAt':serverTimestamp(),'createdBy':_0x2346ff['email'],'isTestMatch':!![],'ladder':_0x341000,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x2346ff[_0x492fda(0x2ca)]};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x16a97c),_0x3502be),showNotification(_0x492fda(0x178),_0x492fda(0x2ff)),closeCreateTestMatchModal();}catch(_0x5637ee){console[_0x492fda(0x2fb)]('Error\x20creating\x20simple\x20test\x20match:',_0x5637ee),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x5637ee['message'],_0x492fda(0x2fb));}}window[a4_0x589c4c(0x31a)]=async function(){const _0x21e56e=a4_0x589c4c;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console['log'](_0x21e56e(0x2bf),db),console['log']('Current\x20user:',auth[_0x21e56e(0x2c9)]);const _0xb70bd3=collection(db,'players');console['log'](_0x21e56e(0x31c),_0xb70bd3);const _0x44f613=query(_0xb70bd3,where(_0x21e56e(0x285),'==',_0x21e56e(0x193)));console['log']('Query\x20created:',_0x44f613);const _0x857e12=await getDocs(_0x44f613);console['log'](_0x21e56e(0x392),_0x857e12[_0x21e56e(0x2ec)]),console[_0x21e56e(0x1b5)]('Firebase\x20connection\x20test\x20successful!');}catch(_0x479fa8){console['error']('Firebase\x20connection\x20test\x20failed:',_0x479fa8);}};function setupCreateTestMatchButton(){const _0x3b8d4c=a4_0x589c4c,_0x7094cc=document['getElementById'](_0x3b8d4c(0x2cb));if(!_0x7094cc){console[_0x3b8d4c(0x2fb)]('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console[_0x3b8d4c(0x1b5)]('Setting\x20up\x20create\x20test\x20match\x20button');const _0x1dcc6e=_0x7094cc['cloneNode'](!![]);_0x7094cc['parentNode'][_0x3b8d4c(0x37f)](_0x1dcc6e,_0x7094cc),_0x1dcc6e['addEventListener']('click',function(_0x546987){_0x546987['preventDefault'](),_0x546987['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x4bb39d=0x1){const _0x1acd76=a4_0x589c4c,_0x215ac4=document[_0x1acd76(0x168)]('matches-table-body');if(!_0x215ac4)return;_0x215ac4['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x11f784=currentLadder['toLowerCase'](),_0x3cc4c4=matchesPagination[_0x11f784],_0x14cab3=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x279961=collection(db,_0x14cab3);_0x4bb39d<=0x1?(_0x3cc4c4[_0x1acd76(0x14a)]=0x1,_0x3cc4c4['firstVisible']=null,_0x3cc4c4[_0x1acd76(0x32e)]=null):_0x3cc4c4['page']=_0x4bb39d;const _0x176a41=getMatchesFilters();let _0x2e12e9=_0x279961;if(_0x176a41[_0x1acd76(0x323)]||_0x176a41['endDate']||_0x176a41['searchTerm']){let _0x52b8b6=[];_0x176a41['startDate']&&_0x176a41['endDate']?(_0x52b8b6['push'](where(_0x1acd76(0x32d),'>=',_0x176a41['startDate']),where('approvedAt','<=',_0x176a41[_0x1acd76(0x2d3)])),_0x2e12e9=query(_0x279961,..._0x52b8b6)):_0x2e12e9=query(_0x279961,orderBy('approvedAt','desc'));}else _0x2e12e9=query(_0x279961,orderBy('approvedAt',_0x1acd76(0x217)));_0x4bb39d>0x1&&_0x3cc4c4[_0x1acd76(0x32e)]?_0x2e12e9=query(_0x2e12e9,startAfter(_0x3cc4c4['lastVisible']),limit(PAGE_SIZE)):_0x2e12e9=query(_0x2e12e9,limit(PAGE_SIZE));const _0x5591e2=await getDocs(_0x2e12e9);!_0x5591e2['empty']&&(_0x3cc4c4[_0x1acd76(0x171)]=_0x5591e2[_0x1acd76(0x330)][0x0],_0x3cc4c4['lastVisible']=_0x5591e2[_0x1acd76(0x330)][_0x5591e2['docs'][_0x1acd76(0x237)]-0x1]);let _0x473e9e=![];if(!_0x5591e2['empty']){const _0x599b32=query(_0x2e12e9,startAfter(_0x3cc4c4['lastVisible']),limit(0x1)),_0x533968=await getDocs(_0x599b32);_0x473e9e=!_0x533968[_0x1acd76(0x2ec)];}const _0x131f0b=document[_0x1acd76(0x168)]('matches-prev-page'),_0x152aa8=document['getElementById']('matches-next-page'),_0x2da012=document['getElementById']('matches-page-indicator');if(_0x131f0b)_0x131f0b['disabled']=_0x3cc4c4['page']<=0x1;if(_0x152aa8)_0x152aa8[_0x1acd76(0x29b)]=!_0x473e9e;if(_0x2da012)_0x2da012['textContent']=_0x1acd76(0x167)+_0x3cc4c4['page'];if(_0x5591e2[_0x1acd76(0x2ec)]){_0x215ac4['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x215ac4['innerHTML']='',_0x5591e2['forEach'](_0x4bacd8=>{const _0x482f11=_0x1acd76,_0x542f08=_0x4bacd8[_0x482f11(0x1d9)](),_0x20bbf8=document['createElement']('tr'),_0x438a9f=_0x542f08['approvedAt']?new Date(_0x542f08['approvedAt'][_0x482f11(0x21f)]*0x3e8)['toLocaleDateString']():'N/A';_0x20bbf8['setAttribute']('data-id',_0x4bacd8['id']),_0x20bbf8[_0x482f11(0x165)]('data-ladder',currentLadder),_0x20bbf8['classList'][_0x482f11(0x1b3)]('match-row'),_0x20bbf8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x438a9f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x542f08['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x542f08[_0x482f11(0x325)]||_0x482f11(0x13e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x542f08['winnerScore']||0x0)+_0x482f11(0x1c2)+(_0x542f08['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x542f08['mapPlayed']||_0x482f11(0x397))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x4bacd8['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x4bacd8['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x215ac4['appendChild'](_0x20bbf8);}),setupMatchesActionButtons(),_0x176a41['searchTerm']&&filterMatchesTable(),console['log'](_0x1acd76(0x1c3)+_0x5591e2['size']+'\x20matches\x20for\x20'+currentLadder+_0x1acd76(0x31d)+_0x3cc4c4[_0x1acd76(0x14a)]);}catch(_0x41e9bf){console['error']('Error\x20loading\x20matches:',_0x41e9bf),_0x215ac4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x41e9bf['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x119d33,_0x3ae0eb){const _0x154ecb=a4_0x589c4c;try{console[_0x154ecb(0x1b5)](_0x154ecb(0x1a4)+_0x119d33+_0x154ecb(0x1e7)+_0x3ae0eb+'\x20ladder');const _0x1a6577=auth['currentUser'];if(!_0x1a6577){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x1214b5=_0x3ae0eb==='D1'?'approvedMatches':_0x3ae0eb==='D2'?_0x154ecb(0x16a):'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0x1214b5),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x1214b5,_0x119d33)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x5aed75=_0x3ae0eb[_0x154ecb(0x398)]();loadMatchesData(matchesPagination[_0x5aed75]['page']);}catch(_0x3e9cc2){console['error']('Error\x20deleting\x20match:',_0x3e9cc2),showNotification(_0x154ecb(0x344)+_0x3e9cc2[_0x154ecb(0x1cf)],'error');}}function a4_0x1ef1(){const _0x2c6287=['trophyDefinitions','edit-match-loser','Unknown','\x20added\x20successfully\x20to\x20','Loser\x20','Edit\x20Article','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','playerId','target','newElo','.edit-btn','admin_modification','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','page','\x20D1\x20pilots,\x20','roleName','name','\x20in\x20','Error\x20in\x20award\x20points\x20to\x20all\x20pilots:','apply-matches-filters','previousElo','achievementDetails','Found\x20','Error\x20loading\x20users:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','preventDefault','Player\x20not\x20found','add-ribbon-form','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','forEach','Error\x20adding\x20player:','Failed\x20to\x20award\x20item:\x20','timestamp','edit-match-winner-score','manage-ranks','User\x20data\x20loaded:','\x20D3\x20pilots','manage-trophies','Bronze','setAttribute','bar','Page\x20','getElementById','activity','approvedMatchesD2','Failed\x20to\x20load\x20trophy\x20data','\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded','highlight-creator-image-container','parentNode','Never\x20played','info','firstVisible','daysSinceMatch','highlight-type','manage-points','createdAt','rgba(255,\x20255,\x20255,\x200.1)','inactive-players','Simple\x20test\x20match\x20created\x20successfully','trophy-description','\x20for\x20user\x20\x22','Create\x20New\x20Trophy','removeEventListener','edit-highlight-winnerScore-input','creator','toLocaleString','load-trophies-data','eloHistory','article-image-url','resimulateMatch','Article\x20deleted\x20successfully','mapPlayed','\x20users.\x20','.error-state','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','catch','Load\x20users\x20data\x20clicked','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','opacity','load-elo-history-data','currentTarget','key','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','title','Ribbons\x20data\x20loaded\x20successfully','nonexistent','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','\x22\x20already\x20has\x20this\x20trophy','Trophy\x20not\x20found','highlight-match-date-container','map','lastUpdated','eloHistoryD2','Error\x20loading\x20ribbons:','matchDate','\x20points.\x20Skipped\x20','Error\x20loading\x20highlights:','newPoints','D3\x20Players','name-asc','#1976d2','highlight-achievement-details','Deleting\x20match\x20','.close-notification','No\x20specific\x20permissions\x20for\x20user\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','Error\x20applying\x20filters:','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','user-roles-section','amount','\x20to\x20','common','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','User\x20\x22','loading','\x20ladder','add','matches-start-date','log','ladder','dashboard','set-elo-value','edit-match-loser-comment','Error\x20loading\x20inactive\x20players:','load-users-data','Error\x20updating\x20points:','No\x20user\x20ID\x20found\x20on\x20button','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','\x20users\x20already\x20had\x20points.','points-overview-table-body','quick-add','\x20-\x20','Loaded\x20','type','</td></tr>','history-end-date','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','has','manage-highlights','Points\x20data\x20loaded\x20successfully','then','Error\x20in\x20bulk\x20award\x20points:','Error\x20deleting\x20highlight:\x20','style','message','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','assign-trophy-rarity','checked','push','#cancel-create-test-match-btn','set-elo-form','articles-table-body','trophy-modal','data','edit-wins','result','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','Error\x20processing\x20pilot\x20','highlight-id','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','Failed\x20to\x20update\x20player:\x20','highlight-submitted-by','points','empty-state','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','edit-player-modal','set-role-modal','\x20from\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','test','\x20pilots...','Failed\x20to\x20save\x20article:\x20','edit-highlight-matchDate-input','textContent','playerRibbonsD2','player','winnerScore','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','highlight-map-container','match','Initial\x20Placement','rankDistribution','Featured\x20Creator','promote-username','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','toLocaleDateString','className','Error\x20in\x20bulk\x20award\x20process:\x20','highlight-winner-name','trim','getAttribute','dataset','User\x20','rank-distribution-chart','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','#inactive-players-table-body\x20tr','playersD3','Achievement','fa-info-circle','matchInfo','highlights-table-body','Load\x20articles\x20data\x20clicked','Searching\x20for\x20player\x20in\x20','\x20match\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','Found\x20user\x20in\x20','rgba(211,\x2047,\x2047,\x200.7)','trophy-form','lastMatch','cells','User\x20has\x20','ELO\x20rating\x20for\x20','get','Adding\x20player\x20','\x20Exists','desc',',\x20giving\x20default\x20access','appendChild','visibility','.empty-state','Error\x20searching\x20for\x20user','Failed\x20to\x20load\x20player\x20data','elo','seconds','#users-table-body\x20tr','previousElementSibling','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','all','display','</span>','cancel-quick-edit','\x20Rank\x20Distribution','\x20with\x20ELO\x20','players','pointsHistory','achievementPlayer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','Error\x20updating\x20player:','\x20D3\x20matches.\x20','#808080','match-details-container','\x20with\x20email\x20','Failed\x20to\x20delete\x20trophy:\x20','Loading\x20user\x20data...','ref','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20','Player\x20Achievement','length','Non-Participant','Error\x20finding\x20match:','Modal\x20element\x20found:','mapVersion','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','includes','fromDate','value','highlight-map-creator','exists','userId','promote-ladder','Loading\x20dashboard\x20overview\x20data...','.ladder-switch\x20input[value=\x22D1\x22]','roleAssignedAt','fa-check-circle','non-participants','Thursday','elo-history-search','closeResimulateModal','Using\x20collections\x20for\x20','current-ribbon-user','Error\x20deleting\x20trophy\x20definition:','save-player-btn','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','highlight-description-container','position','playerRibbons','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','none','reset','subtract','trophy-image-url','RejectedD2','ribbon-target-user','resimulate-modal','contains','action','Error\x20adding\x20ribbon:','approvedMatches','Error\x20loading\x20players:','querySelectorAll','addEventListener','.admin-section','\x27</td>','Manage\x20Ribbons\x20section\x20initialized','migrate-points-btn','validation-results-container','Untitled','Unauthorized:\x20Admin\x20access\x20required','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','Role\x20removed','highlight-loser-score','Map\x20Creator\x20is\x20required','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','color','highlight-title','Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','highlights','wins','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','set','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','eloRating','commit','Load\x20history\x20data\x20clicked','loading-cell','size','\x20vs\x20','achievement-type','Updating\x20role\x20for\x20','Inactive\x20players\x20section\x20initialized','manage-matches','username','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','edit-match-map','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','test-match-date','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','loserComment','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','closest','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','Edit\x20Trophy','.remove-role-btn','approvedMatchesD3','matchId','Highlight\x20created\x20successfully!','D2\x20Players','achievementImageUrl','Creating\x20test\x20match\x20without\x20player\x20validation...','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22','\x20ladder!','demote-player-btn','disabled','stopPropagation','highlight-creator-image','trophy-rarity','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','Could\x20not\x20find\x20player\x20documents','edit-highlight-type-select','edit-match-winner','Attempting\x20to\x20promote\x20','Silver','Player\x20deleted\x20successfully','manage-ribbons','Attempting\x20to\x20demote\x20','edit-match-winner-demo','modifiedBy','admin','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','.close-btn','#elo-history-table-body\x20tr','Highlight','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','no-results','article-id','Invalid\x20action','pendingMatchesD2','Gold','Error\x20creating\x20rank\x20distribution\x20chart:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','rarity','quick-edit-display-name','Unranked','d3-next-page','Highlight\x20not\x20found','.view-player-btn','Loading\x20points\x20data...','Highlight\x20added\x20successfully!','DB:','highlight-match-link','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','lastPointsModified','displayName','imageUrl','Modal\x20background\x20clicked','Error\x20saving\x20highlight:','Error\x20in\x20promotion:','edit-match-modal','currentUser','email','create-test-match-btn','User\x20Profiles','winnerName','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Quick\x20edit\x20clicked\x20for\x20user:','unknown','Subtracted\x20','Trophy\x20\x22','endDate','user-search','update','points-action','Points\x20updated\x20successfully\x20for\x20user:','Title\x20is\x20required','load-articles-data','rgba(255,\x20193,\x207,\x200.1)','playersD2','highlight-loser-name','article-modal-title','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','matchLink','rgba(25,\x20118,\x20210,\x200.7)','userAllowedTabs','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','Error\x20loading\x20points\x20data:','Error\x20loading\x20match\x20data:','warning','values','ribbon-target-ladder','matches-search','demotion','Page\x201','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','empty','Winner\x20and\x20loser\x20usernames\x20are\x20required','allUsersPoints','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','history-type-filter','matches-next-page','Matches\x20Played','highlight-map','#players.content-section.active','Error\x20loading\x20trophy\x20data:','highlight-video-id','MAX_SAFE_INTEGER','createElement','Please\x20enter\x20a\x20username','role-filter','error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','20px','success','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','Match\x20updated\x20successfully','player-count','\x20allowed\x20tabs:','focus','submittedBy','remove','points-reason','level','\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20','innerHTML','articles','rejected-count','No\x20email','promotion','Failed\x20to\x20assign\x20trophy:\x20','match-count','Error\x20promoting\x20player:\x20','.sidebar-nav\x20.nav-item[data-section=\x22','role','Test\x20match','loserName','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','add-player-form','localeCompare','testFirebaseConnection','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','Collection\x20reference\x20created:','\x20ladder,\x20page\x20','createdBy','cancel-role-btn','userProfiles','initial_placement','player-search','startDate','user-ribbon-management','loserUsername','highlight-achievement-image-container','assign-trophy-image','No\x20reason\x20provided','article-author','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','edit-match-title','highlight-achievement-type-container','approvedAt','lastVisible','author','docs','submit','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-match-loser-score','edit-match-loser-suicides','loserScore','#000000','highlight-match-info',';\x22>','edit-highlight-description-input','sort','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','querySelector','edit-highlight-mapVersion-input','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','\x22\x20awarded\x20to\x20','Error','demotedBy','input[name=\x22test-match-ladder\x22]','Failed\x20to\x20delete\x20match:\x20','userTrophies','highlight-winner-score','highlight-video-container','set-elo-ladder','trophy-modal-title','Role\x20\x22','flex','cancel-highlight-btn','confirm-resimulate-btn','Unknown\x20User','openResimulateModal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','creatorImageUrl','create-creator-highlight-btn','uid','highlight-video-preview-container','winnerUsername','\x20already\x20exists\x20in\x20','\x22\x20data-ladder=\x22','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?','exception','playerProfileUrl','src','loserId','highlight-map-version','edit-match-ladder','toString','block','\x20points','.ladder-switch\x20input','active','points-user-search','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','opponent','Modal\x20setup\x20complete','matches-end-date','data-ladder','demote-form','pending-count','div','\x20unique\x20pilots\x20across\x20all\x20ladders','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','mapName','winnerId','classList','ribbon-item','warn','Starting\x20points\x20award\x20process...','Error\x20loading\x20match\x20for\x20deletion:','required','Submit\x20button\x20clicked\x20directly','click','Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','Failed\x20to\x20send\x20Discord\x20notification:','./promotions.js','replaceChild','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','.form-group','positive-change','manage-players','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','achievementType','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','demote-ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','#e0e0e0','.no-results','points-history-table-body','non-participant','reduce','new-player-username','change','\x20already\x20has\x20points:\x20','keys','Query\x20executed.\x20Empty:','input','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','No\x20users\x20needed\x20points\x20field\x20initialization','N/A','toLowerCase','d1-prev-page','destroy','You\x20must\x20be\x20logged\x20in','edit-match-winner-comment','quick-points-amount','Matches\x20action\x20buttons\x20setup\x20complete','videoId','.edit-match-btn','Error\x20opening\x20quick\x20edit\x20modal:','toDate','pendingResimulateData','Create\x20test\x20match\x20modal\x20setup\x20complete','cloneNode'];a4_0x1ef1=function(){return _0x2c6287;};return a4_0x1ef1();}function setupMatchesActionButtons(){const _0x1833c9=a4_0x589c4c;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll'](_0x1833c9(0x3a0))['forEach'](_0x24daef=>{const _0x2ea231=_0x1833c9;_0x24daef[_0x2ea231(0x264)]('click',_0x306d6f=>{const _0x3067ad=_0x2ea231;_0x306d6f[_0x3067ad(0x157)](),_0x306d6f['stopPropagation']();const _0x3db15e=_0x306d6f['currentTarget']['dataset']['id'],_0x57310f=_0x306d6f[_0x3067ad(0x18e)][_0x3067ad(0x28e)]('tr'),_0x2ca7cf=_0x57310f['dataset'][_0x3067ad(0x1b6)];console[_0x3067ad(0x1b5)]('Edit\x20match\x20clicked:',_0x3db15e,_0x2ca7cf),openEditMatchModal(_0x3db15e,_0x2ca7cf);});}),document[_0x1833c9(0x263)]('.delete-match-btn')['forEach'](_0xb27070=>{const _0xded67b=_0x1833c9;_0xb27070['addEventListener'](_0xded67b(0x37a),_0x57a308=>{const _0x1cdf95=_0xded67b;_0x57a308['preventDefault'](),_0x57a308['stopPropagation']();const _0xd63528=_0x57a308[_0x1cdf95(0x18e)]['dataset']['id'],_0x2de978=_0x57a308['currentTarget'][_0x1cdf95(0x28e)]('tr'),_0x28d705=_0x2de978['dataset']['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0xd63528,_0x28d705),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0xd63528,_0x28d705);});}),console['log'](_0x1833c9(0x39e));}function filterMatchesTable(){const _0x412437=a4_0x589c4c,_0x560a1c=document['getElementById'](_0x412437(0x2e8))['value']['toLowerCase'](),_0x233f52=document[_0x412437(0x263)]('#matches-table-body\x20tr');let _0x2e7235=0x0;_0x233f52['forEach'](_0x42eb74=>{const _0x473271=_0x412437;if(_0x42eb74[_0x473271(0x373)][_0x473271(0x25e)](_0x473271(0x27e))||_0x42eb74['classList'][_0x473271(0x25e)](_0x473271(0x1e3))||_0x42eb74['classList']['contains']('error-state'))return;const _0x59c0b6=_0x42eb74['cells'][0x1][_0x473271(0x1ed)]['toLowerCase'](),_0x46368c=_0x42eb74[_0x473271(0x211)][0x2]['textContent']['toLowerCase'](),_0x1f98dd=_0x42eb74['cells'][0x4][_0x473271(0x1ed)]['toLowerCase']();_0x59c0b6['includes'](_0x560a1c)||_0x46368c['includes'](_0x560a1c)||_0x1f98dd[_0x473271(0x23e)](_0x560a1c)?(_0x42eb74['style'][_0x473271(0x224)]='',_0x2e7235++):_0x42eb74['style']['display']='none';});if(_0x2e7235===0x0&&_0x233f52['length']>0x0){const _0x5684c1=document[_0x412437(0x168)]('matches-table-body'),_0x19d1d8=_0x5684c1[_0x412437(0x33c)]('.no-results');if(!_0x19d1d8){const _0x18ebea=document[_0x412437(0x2f8)]('tr');_0x18ebea['className']=_0x412437(0x2b0),_0x18ebea['innerHTML']=_0x412437(0x358)+_0x560a1c+_0x412437(0x266),_0x5684c1[_0x412437(0x219)](_0x18ebea);}}else{const _0x2c9ec5=document[_0x412437(0x33c)]('.no-results');_0x2c9ec5&&_0x2c9ec5[_0x412437(0x307)]();}}function getMatchesFilters(){const _0xe17e28=a4_0x589c4c,_0x31636e=document[_0xe17e28(0x168)]('matches-search')['value']['toLowerCase'](),_0x183ca=document['getElementById'](_0xe17e28(0x1b4))['value'],_0xfcc61e=document['getElementById'](_0xe17e28(0x36a))['value'];let _0x456f09=null,_0x23824b=null;return _0x183ca&&(_0x456f09=new Date(_0x183ca),_0x456f09['setHours'](0x0,0x0,0x0,0x0),_0x456f09=Timestamp['fromDate'](_0x456f09)),_0xfcc61e&&(_0x23824b=new Date(_0xfcc61e),_0x23824b['setHours'](0x17,0x3b,0x3b,0x3e7),_0x23824b=Timestamp[_0xe17e28(0x23f)](_0x23824b)),{'searchTerm':_0x31636e,'startDate':_0x456f09,'endDate':_0x23824b};}async function applyMatchesFilters(){const _0x25dc5f=currentLadder['toLowerCase']();matchesPagination[_0x25dc5f]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x4b14bf=a4_0x589c4c;document[_0x4b14bf(0x168)](_0x4b14bf(0x1b4))['value']='',document['getElementById']('matches-end-date')['value']='',document['getElementById']('matches-search')['value']='';const _0x500650=currentLadder['toLowerCase']();matchesPagination[_0x500650]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x35b01f,_0x30a3dd){const _0x344033=a4_0x589c4c,_0x2c8fc7=document['getElementById'](_0x344033(0x2c8));if(!_0x2c8fc7)return;try{const _0x4e8dff=_0x30a3dd==='D1'?_0x344033(0x261):_0x30a3dd==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x229440=doc(db,_0x4e8dff,_0x35b01f),_0x2d6efb=await getDoc(_0x229440);if(!_0x2d6efb['exists']()){showNotification('Match\x20not\x20found',_0x344033(0x2fb));return;}const _0x3097f3=_0x2d6efb[_0x344033(0x1d9)]();document[_0x344033(0x168)]('edit-match-id')['value']=_0x35b01f,document[_0x344033(0x168)]('edit-match-ladder')['value']=_0x30a3dd,document[_0x344033(0x168)](_0x344033(0x2a2))['value']=_0x3097f3[_0x344033(0x355)]||'',document[_0x344033(0x168)](_0x344033(0x15f))[_0x344033(0x240)]=_0x3097f3[_0x344033(0x1f0)]||0x0,document[_0x344033(0x168)]('edit-match-winner-suicides')['value']=_0x3097f3['winnerSuicides']||0x0,document[_0x344033(0x168)]('edit-match-winner-comment')[_0x344033(0x240)]=_0x3097f3['winnerComment']||'',document[_0x344033(0x168)](_0x344033(0x13d))['value']=_0x3097f3[_0x344033(0x325)]||'',document[_0x344033(0x168)]('edit-match-loser-score')['value']=_0x3097f3['loserScore']||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0x3097f3['loserSuicides']||0x0,document['getElementById'](_0x344033(0x1b9))['value']=_0x3097f3[_0x344033(0x28b)]||'',document['getElementById']('edit-match-map')[_0x344033(0x240)]=_0x3097f3['mapPlayed']||'',document[_0x344033(0x168)]('edit-match-winner-demo')[_0x344033(0x240)]=_0x3097f3['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0x3097f3['loserDemoLink']||_0x3097f3['demoLink']||'',document['getElementById'](_0x344033(0x32b))['textContent']='Edit\x20Match:\x20'+_0x3097f3[_0x344033(0x355)]+_0x344033(0x280)+_0x3097f3[_0x344033(0x325)],_0x2c8fc7[_0x344033(0x373)][_0x344033(0x1b3)]('active');}catch(_0x4f528b){console['error'](_0x344033(0x2e4),_0x4f528b),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x44ef71=document['getElementById']('edit-match-modal');_0x44ef71&&_0x44ef71['classList']['remove']('active');}async function saveEditedMatch(){const _0x450c1f=a4_0x589c4c;try{const _0x1e4793=document['getElementById']('edit-match-id')['value'],_0x31e809=document['getElementById'](_0x450c1f(0x360))[_0x450c1f(0x240)];if(!_0x1e4793||!_0x31e809){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x548d1=_0x31e809==='D1'?'approvedMatches':_0x31e809==='D2'?_0x450c1f(0x16a):'approvedMatchesD3',_0x38e525=document[_0x450c1f(0x168)](_0x450c1f(0x2a2))['value'][_0x450c1f(0x1fd)](),_0x2760a8=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x37e326=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x323d76=document['getElementById'](_0x450c1f(0x39c))['value']['trim'](),_0x226e0f=document['getElementById']('edit-match-loser')[_0x450c1f(0x240)][_0x450c1f(0x1fd)](),_0x5a26fa=parseInt(document['getElementById'](_0x450c1f(0x333))[_0x450c1f(0x240)]),_0x165ce9=parseInt(document[_0x450c1f(0x168)](_0x450c1f(0x334))['value']),_0x59481a=document['getElementById'](_0x450c1f(0x1b9))['value']['trim'](),_0x33731f=document['getElementById'](_0x450c1f(0x287))['value'][_0x450c1f(0x1fd)](),_0x5ab9ac=document['getElementById'](_0x450c1f(0x2a8))['value']['trim'](),_0x37bab0=document[_0x450c1f(0x168)]('edit-match-loser-demo')['value']['trim']();if(!_0x38e525||!_0x226e0f){showNotification(_0x450c1f(0x2ed),'error');return;}await updateDoc(doc(db,_0x548d1,_0x1e4793),{'winnerUsername':_0x38e525,'winnerScore':_0x2760a8,'winnerSuicides':_0x37e326,'winnerComment':_0x323d76,'loserUsername':_0x226e0f,'loserScore':_0x5a26fa,'loserSuicides':_0x165ce9,'loserComment':_0x59481a,'mapPlayed':_0x33731f,'winnerDemoLink':_0x5ab9ac||null,'loserDemoLink':_0x37bab0||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x450c1f(0x2ca)],'isEdited':!![]}),showNotification(_0x450c1f(0x302),'success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x31e809[_0x450c1f(0x398)]()]['page']);}catch(_0x1cbe0a){console['error']('Error\x20saving\x20match:',_0x1cbe0a),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x1cbe0a['message'],'error');}}async function openDeleteMatchModal(_0x1ca98e,_0xc34cb8){const _0x1a934f=a4_0x589c4c;try{const _0xc9e50d=_0xc34cb8==='D1'?'approvedMatches':_0xc34cb8==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x22a644=doc(db,_0xc9e50d,_0x1ca98e),_0x326d04=await getDoc(_0x22a644);if(!_0x326d04[_0x1a934f(0x242)]()){showNotification('Match\x20not\x20found','error');return;}const _0x18124f=_0x326d04[_0x1a934f(0x1d9)](),_0x22770f=document[_0x1a934f(0x168)]('delete-match-confirm-modal');_0x22770f[_0x1a934f(0x1ff)][_0x1a934f(0x293)]=_0x1ca98e,_0x22770f[_0x1a934f(0x1ff)][_0x1a934f(0x1b6)]=_0xc34cb8;const _0x2e04b9=_0x18124f['approvedAt']?new Date(_0x18124f[_0x1a934f(0x32d)]['seconds']*0x3e8)[_0x1a934f(0x1f9)]():'N/A',_0x5cad50=document['getElementById']('delete-match-summary');_0x5cad50['innerHTML']=_0x1a934f(0x1e4)+_0x2e04b9+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x18124f['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x18124f[_0x1a934f(0x325)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x18124f[_0x1a934f(0x1f0)]||0x0)+'\x20-\x20'+(_0x18124f['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x18124f[_0x1a934f(0x185)]||'N/A')+_0x1a934f(0x1be)+_0xc34cb8+_0x1a934f(0x1d0),_0x22770f['classList']['add']('active');}catch(_0x4ce6fa){console['error'](_0x1a934f(0x377),_0x4ce6fa),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x2ec546=a4_0x589c4c,_0x2b35a1=document['getElementById']('delete-match-confirm-modal');_0x2b35a1&&(_0x2b35a1[_0x2ec546(0x373)]['remove']('active'),_0x2b35a1['removeAttribute']('data-match-id'),_0x2b35a1['removeAttribute'](_0x2ec546(0x36b)));}async function confirmDeleteMatch(){const _0x10bac0=a4_0x589c4c,_0x325716=document['getElementById']('delete-match-confirm-modal'),_0x140034=_0x325716[_0x10bac0(0x1ff)]['matchId'],_0x532c46=_0x325716[_0x10bac0(0x1ff)]['ladder'];if(!_0x140034||!_0x532c46){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x1d5b67=_0x532c46==='D1'?'approvedMatches':_0x532c46==='D2'?'approvedMatchesD2':_0x10bac0(0x292);await deleteDoc(doc(db,_0x1d5b67,_0x140034)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x532c46[_0x10bac0(0x398)]()][_0x10bac0(0x14a)]);}catch(_0x162017){console[_0x10bac0(0x2fb)]('Error\x20deleting\x20match:',_0x162017),showNotification(_0x10bac0(0x344)+_0x162017['message'],'error');}}async function saveHighlightChanges(){const _0x52fc5f=a4_0x589c4c,_0x4e5f7b=document[_0x52fc5f(0x168)]('edit-highlight-id')[_0x52fc5f(0x240)],_0x332929=document[_0x52fc5f(0x168)](_0x52fc5f(0x2a1))['value'];let _0x48ec4d={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x332929,'description':document[_0x52fc5f(0x168)](_0x52fc5f(0x339))['value']['trim'](),'videoId':document[_0x52fc5f(0x168)]('edit-highlight-videoId-input')['value'][_0x52fc5f(0x1fd)](),'submittedBy':auth['currentUser'][_0x52fc5f(0x2ca)]};if(_0x332929==='match'){_0x48ec4d[_0x52fc5f(0x207)]=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x48ec4d['map']=document['getElementById']('edit-highlight-map-input')['value']['trim']();const _0x7c3d1c=document['getElementById'](_0x52fc5f(0x1ec))['value'];_0x48ec4d['matchDate']=_0x7c3d1c?Timestamp['fromDate'](new Date(_0x7c3d1c)):null,_0x48ec4d['winnerName']=document[_0x52fc5f(0x168)]('edit-highlight-winnerName-input')['value']['trim'](),_0x48ec4d[_0x52fc5f(0x1f0)]=document['getElementById'](_0x52fc5f(0x17d))['value']['trim'](),_0x48ec4d[_0x52fc5f(0x316)]=document['getElementById']('edit-highlight-loserName-input')['value'][_0x52fc5f(0x1fd)](),_0x48ec4d[_0x52fc5f(0x335)]=document['getElementById']('edit-highlight-loserScore-input')['value'][_0x52fc5f(0x1fd)](),_0x48ec4d['matchLink']=document[_0x52fc5f(0x168)]('edit-highlight-matchLink-input')['value']['trim'](),_0x48ec4d['mapCreator']=null,_0x48ec4d['mapVersion']=null,_0x48ec4d['creatorImageUrl']=null,_0x48ec4d['achievementPlayer']=null,_0x48ec4d[_0x52fc5f(0x385)]=null,_0x48ec4d['achievementDetails']=null,_0x48ec4d[_0x52fc5f(0x35c)]=null;}else{if(_0x332929===_0x52fc5f(0x17e))_0x48ec4d['map']=document['getElementById']('edit-highlight-map-input')[_0x52fc5f(0x240)]['trim'](),_0x48ec4d['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x48ec4d['mapVersion']=document['getElementById'](_0x52fc5f(0x33d))['value']['trim'](),_0x48ec4d['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')[_0x52fc5f(0x240)]['trim'](),_0x48ec4d['matchInfo']=null,_0x48ec4d['matchDate']=null,_0x48ec4d[_0x52fc5f(0x2cd)]=null,_0x48ec4d[_0x52fc5f(0x1f0)]=null,_0x48ec4d['loserName']=null,_0x48ec4d['loserScore']=null,_0x48ec4d[_0x52fc5f(0x2df)]=null,_0x48ec4d[_0x52fc5f(0x22b)]=null,_0x48ec4d['achievementType']=null,_0x48ec4d['achievementDetails']=null,_0x48ec4d['playerProfileUrl']=null;else _0x332929==='achievement'&&(_0x48ec4d['achievementPlayer']=document[_0x52fc5f(0x168)]('edit-highlight-achievementPlayer-input')['value'][_0x52fc5f(0x1fd)](),_0x48ec4d['achievementType']=document['getElementById']('edit-highlight-achievementType-input')['value']['trim'](),_0x48ec4d[_0x52fc5f(0x152)]=document[_0x52fc5f(0x168)]('edit-highlight-achievementDetails-input')['value']['trim'](),_0x48ec4d['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value'][_0x52fc5f(0x1fd)](),_0x48ec4d['matchInfo']=null,_0x48ec4d['map']=null,_0x48ec4d[_0x52fc5f(0x19c)]=null,_0x48ec4d['winnerName']=null,_0x48ec4d['winnerScore']=null,_0x48ec4d[_0x52fc5f(0x316)]=null,_0x48ec4d['loserScore']=null,_0x48ec4d['matchLink']=null,_0x48ec4d['mapCreator']=null,_0x48ec4d['mapVersion']=null,_0x48ec4d[_0x52fc5f(0x351)]=null);}try{if(_0x4e5f7b){_0x48ec4d['updatedAt']=serverTimestamp();const _0x4e45ed=doc(db,'highlights',_0x4e5f7b);await updateDoc(_0x4e45ed,_0x48ec4d),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x48ec4d['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x48ec4d),showNotification(_0x52fc5f(0x2be),'success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x1055d2){console[_0x52fc5f(0x2fb)]('Error\x20saving\x20highlight:',_0x1055d2),showNotification('Error\x20saving\x20highlight:\x20'+_0x1055d2['message'],_0x52fc5f(0x2fb));}}async function resimulateMatch(){const _0xfa6c10=a4_0x589c4c;try{const _0x253ea5=document['getElementById']('resimulate-match-id')[_0xfa6c10(0x240)];if(!_0x253ea5){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x272140=auth[_0xfa6c10(0x2c9)];if(!_0x272140){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x482e9f=currentLadder==='D1'?_0xfa6c10(0x261):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x149fb1=doc(db,_0x482e9f,_0x253ea5),_0x17b9a8=await getDoc(_0x149fb1);if(!_0x17b9a8['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x3f34d0=_0x17b9a8[_0xfa6c10(0x1d9)](),_0x1bcfda=_0x3f34d0[_0xfa6c10(0x32d)]?_0x3f34d0['approvedAt']['toDate']()['toLocaleString']():_0x3f34d0[_0xfa6c10(0x19c)]?_0x3f34d0['matchDate'][_0xfa6c10(0x3a2)]?_0x3f34d0[_0xfa6c10(0x19c)][_0xfa6c10(0x3a2)]()['toLocaleString']():new Date(_0x3f34d0['matchDate'])[_0xfa6c10(0x17f)]():_0xfa6c10(0x13e),_0x31f735=_0xfa6c10(0x222)+_0x3f34d0[_0xfa6c10(0x355)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x3f34d0['loserUsername']+_0xfa6c10(0x31b)+_0x3f34d0['winnerScore']+'-'+_0x3f34d0['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x3f34d0['mapPlayed']||_0x3f34d0[_0xfa6c10(0x371)]||'Unknown')+_0xfa6c10(0x275)+_0x1bcfda+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x253ea5+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+_0xfa6c10(0x2eb);document['getElementById']('match-details-container')['innerHTML']=_0x31f735,document['getElementById']('match-details-container')[_0xfa6c10(0x1ce)]['display']='block',document[_0xfa6c10(0x168)](_0xfa6c10(0x34d))['style']['display']='block',window[_0xfa6c10(0x3a3)]={'matchId':_0x253ea5,'matchData':_0x3f34d0,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation',_0xfa6c10(0x170));}catch(_0x4fa8fc){console['error'](_0xfa6c10(0x239),_0x4fa8fc),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x4fa8fc['message'],'error');}}async function confirmResimulateMatch(){const _0x151ee3=a4_0x589c4c;try{const {matchId:_0x2d3139,matchData:_0x325fd9,ladder:_0x4d31c0}=window['pendingResimulateData'];if(!_0x2d3139||!_0x325fd9){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x563c8f=_0x4d31c0==='D1'?'players':_0x4d31c0==='D2'?_0x151ee3(0x2db):'playersD3',_0x238db4=_0x4d31c0==='D1'?'eloHistory':_0x4d31c0==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x353dec,_0x26771e]=await Promise['all']([getDocs(query(collection(db,_0x563c8f),where('username','==',_0x325fd9[_0x151ee3(0x355)]))),getDocs(query(collection(db,_0x563c8f),where('username','==',_0x325fd9['loserUsername'])))]);if(_0x353dec['empty']||_0x26771e['empty']){showNotification(_0x151ee3(0x2a0),_0x151ee3(0x2fb));return;}const _0xc4cbe0=_0x353dec[_0x151ee3(0x330)][0x0]['id'],_0x50a069=_0x26771e[_0x151ee3(0x330)][0x0]['id'],_0x42c41c=_0x353dec['docs'][0x0][_0x151ee3(0x1d9)](),_0x140f4b=_0x26771e['docs'][0x0]['data'](),[_0x5861b0,_0x18be49]=await Promise['all']([getDocs(query(collection(db,_0x238db4),where(_0x151ee3(0x144),'==',_0xc4cbe0),where(_0x151ee3(0x293),'==',_0x2d3139))),getDocs(query(collection(db,_0x238db4),where(_0x151ee3(0x144),'==',_0x50a069),where('matchId','==',_0x2d3139)))]),_0x9fbb17=!_0x5861b0['empty'],_0x4addca=!_0x18be49['empty'],_0x5a4224='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x9fbb17?_0x151ee3(0x216):'\x20Missing')+_0x151ee3(0x286)+(_0x4addca?'\x20Exists':'\x20Missing')+_0x151ee3(0x23c)+(_0x42c41c[_0x151ee3(0x27b)]||_0x151ee3(0x13e))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x140f4b['eloRating']||'Unknown')+_0x151ee3(0x1df)+(_0x42c41c['position']||_0x151ee3(0x13e))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x140f4b[_0x151ee3(0x253)]||'Unknown')+_0x151ee3(0x380);document['getElementById']('validation-results-container')[_0x151ee3(0x30b)]=_0x5a4224,document[_0x151ee3(0x168)](_0x151ee3(0x269))['style']['display']=_0x151ee3(0x362);if(_0x9fbb17&&_0x4addca){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.',_0x151ee3(0x2e5));return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x25acd2=_0x325fd9['approvedAt']||_0x325fd9[_0x151ee3(0x19c)]||serverTimestamp(),[_0x2d7d39,_0x41803c]=await Promise['all']([getPlayerEloAtTime(_0xc4cbe0,_0x25acd2,_0x238db4),getPlayerEloAtTime(_0x50a069,_0x25acd2,_0x238db4)]),{calculateElo:_0x5a8d32}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x58392c,newLoserRating:_0x30b6a7}=_0x5a8d32(_0x2d7d39,_0x41803c),_0xe4f6d3=_0x42c41c['position']||Number['MAX_SAFE_INTEGER'],_0x44b8fb=_0x140f4b[_0x151ee3(0x253)]||Number[_0x151ee3(0x2f7)];let _0x46fe13=_0xe4f6d3,_0x915930=_0x44b8fb;_0xe4f6d3>_0x44b8fb&&(_0x46fe13=_0x44b8fb,_0x915930=_0x44b8fb+0x1);const _0x41dbbe=writeBatch(db),_0x4e4f1f=doc(db,_0x563c8f,_0xc4cbe0);_0x41dbbe['update'](_0x4e4f1f,{'eloRating':_0x58392c,'position':_0x46fe13,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x3fa482=doc(db,_0x563c8f,_0x50a069);_0x41dbbe['update'](_0x3fa482,{'eloRating':_0x30b6a7,'position':_0x915930,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x151ee3(0x2c9)]['uid']});if(_0xe4f6d3>_0x44b8fb){const _0x3746b8=await getDocs(query(collection(db,_0x563c8f),where('position','>',_0x44b8fb),where('position','<',_0xe4f6d3)));_0x3746b8[_0x151ee3(0x15b)](_0x4fa0a6=>{const _0x57b2a7=doc(db,_0x563c8f,_0x4fa0a6['id']),_0x4993b4=_0x4fa0a6['data']()['position'];_0x41dbbe['update'](_0x57b2a7,{'position':_0x4993b4+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x9fbb17){const _0x23451c=doc(collection(db,_0x238db4));_0x41dbbe[_0x151ee3(0x279)](_0x23451c,{'playerId':_0xc4cbe0,'player':_0x325fd9['winnerUsername'],'previousElo':_0x2d7d39,'newElo':_0x58392c,'eloChange':_0x58392c-_0x2d7d39,'opponentId':_0x50a069,'opponent':_0x325fd9[_0x151ee3(0x325)],'matchResult':'win','previousPosition':_0xe4f6d3,'newPosition':_0x46fe13,'positionChange':_0x46fe13-_0xe4f6d3,'matchId':_0x2d3139,'timestamp':_0x25acd2,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x151ee3(0x2c9)]['uid'],'gameMode':_0x4d31c0,'matchScore':_0x325fd9['winnerScore']+'-'+_0x325fd9['loserScore'],'mapPlayed':_0x325fd9['mapPlayed']||_0x325fd9[_0x151ee3(0x371)]||'Unknown','note':_0x151ee3(0x28a)});}if(!_0x4addca){const _0x3b375f=doc(collection(db,_0x238db4));_0x41dbbe['set'](_0x3b375f,{'playerId':_0x50a069,'player':_0x325fd9['loserUsername'],'previousElo':_0x41803c,'newElo':_0x30b6a7,'eloChange':_0x30b6a7-_0x41803c,'opponentId':_0xc4cbe0,'opponent':_0x325fd9['winnerUsername'],'matchResult':'loss','previousPosition':_0x44b8fb,'newPosition':_0x915930,'positionChange':_0x915930-_0x44b8fb,'matchId':_0x2d3139,'timestamp':_0x25acd2,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x4d31c0,'matchScore':_0x325fd9[_0x151ee3(0x1f0)]+'-'+_0x325fd9['loserScore'],'mapPlayed':_0x325fd9[_0x151ee3(0x185)]||_0x325fd9[_0x151ee3(0x371)]||'Unknown','note':_0x151ee3(0x28a)});}const _0x329206=_0x4d31c0==='D1'?_0x151ee3(0x261):_0x4d31c0==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x23d892=doc(db,_0x329206,_0x2d3139);_0x41dbbe['update'](_0x23d892,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x151ee3(0x353)],'resimulatedReason':_0x151ee3(0x251),'originalWinnerElo':_0x42c41c[_0x151ee3(0x27b)],'originalLoserElo':_0x140f4b[_0x151ee3(0x27b)],'originalWinnerPosition':_0xe4f6d3,'originalLoserPosition':_0x44b8fb,'resimulatedWinnerElo':_0x58392c,'resimulatedLoserElo':_0x30b6a7,'resimulatedWinnerPosition':_0x46fe13,'resimulatedLoserPosition':_0x915930}),await _0x41dbbe['commit']();const _0x2c3df5=(!_0x9fbb17?0x1:0x0)+(!_0x4addca?0x1:0x0),_0x15bf73=_0xe4f6d3!==_0x46fe13||_0x44b8fb!==_0x915930;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x2c3df5+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x2d7d39+''+_0x58392c+'\x20(+'+(_0x58392c-_0x2d7d39)+'),\x20')+(_0x151ee3(0x140)+_0x41803c+''+_0x30b6a7+'\x20('+(_0x30b6a7-_0x41803c)+').\x20')+(''+(_0x15bf73?'Positions\x20updated:\x20Winner\x20'+_0xe4f6d3+''+_0x46fe13+',\x20Loser\x20'+_0x44b8fb+''+_0x915930:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document[_0x151ee3(0x33c)](_0x151ee3(0x2f4))&&loadPlayersData();}catch(_0x21c642){console['error']('Error\x20resimulating\x20match:',_0x21c642),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x21c642[_0x151ee3(0x1cf)],'error');}}async function getPlayerEloAtTime(_0x3348ce,_0x5e409b,_0x52cd0f){const _0x3d030d=a4_0x589c4c;try{const _0x2011ac=_0x5e409b['toDate']?_0x5e409b[_0x3d030d(0x3a2)]():new Date(_0x5e409b),_0x1ef246=query(collection(db,_0x52cd0f),where('playerId','==',_0x3348ce),where('timestamp','<',_0x5e409b),orderBy('timestamp','desc'),limit(0x1)),_0x475046=await getDocs(_0x1ef246);if(!_0x475046['empty']){const _0x4a8a42=_0x475046[_0x3d030d(0x330)][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x3348ce+'\x20before\x20match:\x20'+_0x4a8a42['newElo']),_0x4a8a42['newElo'];}else return console[_0x3d030d(0x1b5)]('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x3348ce+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x434380){return console[_0x3d030d(0x2fb)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x3348ce+':',_0x434380),0x4b0;}}function openResimulateModal(){const _0x3d62a0=a4_0x589c4c;console['log']('openResimulateModal\x20called!');const _0x5b77ca=document['getElementById']('resimulate-modal');console[_0x3d62a0(0x1b5)]('Modal\x20element\x20found:',_0x5b77ca);if(!_0x5b77ca){console[_0x3d62a0(0x2fb)]('Modal\x20element\x20not\x20found!');return;}_0x5b77ca['style'][_0x3d62a0(0x224)]='block',_0x5b77ca['style'][_0x3d62a0(0x21a)]='visible',_0x5b77ca[_0x3d62a0(0x1ce)][_0x3d62a0(0x18c)]='1',_0x5b77ca[_0x3d62a0(0x373)][_0x3d62a0(0x1b3)](_0x3d62a0(0x365)),console['log']('Modal\x20should\x20now\x20be\x20visible'),console[_0x3d62a0(0x1b5)]('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x5b77ca)['display']);const _0x4b747e=document['getElementById'](_0x3d62a0(0x230)),_0x2ca1b3=document['getElementById'](_0x3d62a0(0x269)),_0x45e4a7=document['getElementById']('confirm-resimulate-btn'),_0x209c50=document['getElementById']('resimulate-match-id');if(_0x4b747e)_0x4b747e['innerHTML']='';if(_0x2ca1b3)_0x2ca1b3['innerHTML']='';if(_0x45e4a7)_0x45e4a7['style']['display']=_0x3d62a0(0x257);if(_0x209c50)_0x209c50[_0x3d62a0(0x240)]='';console['log'](_0x3d62a0(0x369));}function closeResimulateModal(){const _0x286f49=a4_0x589c4c;document['getElementById'](_0x286f49(0x25d))[_0x286f49(0x1ce)]['display']='none',window['pendingResimulateData']=null;}window[a4_0x589c4c(0x183)]=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window[a4_0x589c4c(0x34f)]=openResimulateModal,window[a4_0x589c4c(0x24c)]=closeResimulateModal;async function loadPointsData(){const _0x21b9ef=a4_0x589c4c;console['log'](_0x21b9ef(0x2bd));try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x21b9ef(0x1ca),_0x21b9ef(0x2ff));}catch(_0x21c533){console['error'](_0x21b9ef(0x2e3),_0x21c533),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x21c533[_0x21b9ef(0x1cf)],'error');}}function renderPointsOverview(_0x6f232b){const _0x1faf85=a4_0x589c4c,_0x29abf3=document[_0x1faf85(0x168)]('points-overview-table-body');if(!_0x29abf3)return;if(_0x6f232b['length']===0x0){_0x29abf3['innerHTML']=_0x1faf85(0x194);return;}_0x29abf3[_0x1faf85(0x30b)]='',_0x6f232b['forEach'](_0x574943=>{const _0x380a9d=_0x1faf85,_0x2b51e3=document['createElement']('tr'),_0x33eb74=_0x574943[_0x380a9d(0x2c3)]||_0x574943['username']||'Unknown\x20User',_0x3cd326=_0x574943['email']||'No\x20email',_0x5abfef=_0x574943['points']||0x0,_0xd666c5=_0x574943[_0x380a9d(0x2c2)]?new Date(_0x574943['lastPointsModified']['seconds']*0x3e8)[_0x380a9d(0x1f9)]():'Never';_0x2b51e3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x33eb74+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3cd326+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x5abfef>0x3e8?'high-points':_0x5abfef>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x5abfef['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xd666c5+_0x380a9d(0x2b6)+_0x574943['id']+_0x380a9d(0x370)+_0x574943['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x29abf3['appendChild'](_0x2b51e3);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x42b7be=a4_0x589c4c;console[_0x42b7be(0x1b5)]('Setting\x20up\x20points\x20action\x20buttons...');const _0x36be05=document['querySelectorAll']('.quick-edit-btn');console['log'](_0x42b7be(0x153)+_0x36be05['length']+'\x20quick\x20edit\x20buttons'),_0x36be05['forEach'](_0x12c8b7=>{const _0x1e10fe=_0x12c8b7['cloneNode'](!![]);_0x12c8b7['parentNode']['replaceChild'](_0x1e10fe,_0x12c8b7);});const _0x17974c=document['querySelectorAll']('.view-history-btn');console[_0x42b7be(0x1b5)]('Found\x20'+_0x17974c['length']+'\x20view\x20history\x20buttons'),_0x17974c['forEach'](_0x358b75=>{const _0x3e1daa=_0x42b7be,_0x54b7c6=_0x358b75[_0x3e1daa(0x3a5)](!![]);_0x358b75['parentNode']['replaceChild'](_0x54b7c6,_0x358b75);}),document[_0x42b7be(0x263)]('.quick-edit-btn')['forEach'](_0x482a07=>{const _0xb8165b=_0x42b7be;_0x482a07[_0xb8165b(0x264)]('click',function(_0x1bc077){const _0x76525f=_0xb8165b;_0x1bc077['preventDefault'](),_0x1bc077[_0x76525f(0x29c)]();const _0x4aad43=this['dataset']['userId'];console['log'](_0x76525f(0x2cf),_0x4aad43);if(!_0x4aad43){console[_0x76525f(0x2fb)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style'][_0x76525f(0x18c)]='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x4aad43);});}),document[_0x42b7be(0x263)]('.view-history-btn')['forEach'](_0x11849b=>{const _0x367108=_0x42b7be;_0x11849b['addEventListener'](_0x367108(0x37a),function(_0x4599f5){const _0x4aa164=_0x367108;_0x4599f5['preventDefault'](),_0x4599f5['stopPropagation']();const _0x173a8a=this['dataset']['userId'];console[_0x4aa164(0x1b5)]('View\x20history\x20clicked\x20for\x20user:',_0x173a8a);if(!_0x173a8a){console[_0x4aa164(0x2fb)](_0x4aa164(0x1bd));return;}this[_0x4aa164(0x1ce)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x173a8a);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x5c6e34){const _0x406d55=a4_0x589c4c;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x5c6e34);const _0x56ad2a=document['getElementById']('quick-edit-points-modal');if(!_0x56ad2a){console['error'](_0x406d55(0x1aa)),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification(_0x406d55(0x233),'info');const _0x34a907=doc(db,_0x406d55(0x320),_0x5c6e34),_0x1cc28b=await getDoc(_0x34a907);if(!_0x1cc28b[_0x406d55(0x242)]()){showNotification('User\x20not\x20found','error');return;}const _0x391ee2=_0x1cc28b[_0x406d55(0x1d9)]();console[_0x406d55(0x1b5)](_0x406d55(0x161),_0x391ee2);const _0x1a356f=document[_0x406d55(0x168)]('quick-edit-user-id'),_0x136a58=document['getElementById'](_0x406d55(0x2b8)),_0x116c95=document['getElementById']('quick-edit-email'),_0x2de702=document[_0x406d55(0x168)]('quick-edit-current-points'),_0x3b12a9=document[_0x406d55(0x168)]('quick-edit-points-form');if(!_0x1a356f||!_0x136a58||!_0x116c95||!_0x2de702||!_0x3b12a9){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x406d55(0x33f),_0x406d55(0x2fb));return;}_0x1a356f['value']=_0x5c6e34,_0x136a58['textContent']=_0x391ee2[_0x406d55(0x2c3)]||_0x391ee2[_0x406d55(0x285)]||'Unknown\x20User',_0x116c95[_0x406d55(0x1ed)]=_0x391ee2['email']||'No\x20email',_0x2de702['textContent']=(_0x391ee2['points']||0x0)[_0x406d55(0x17f)](),_0x3b12a9[_0x406d55(0x258)]();const _0x1d4149=document[_0x406d55(0x168)](_0x406d55(0x1c1));_0x1d4149&&(_0x1d4149['checked']=!![]);_0x56ad2a['classList']['add']('active'),console['log']('Modal\x20opened\x20successfully');const _0x3b0855=document['getElementById']('quick-points-amount');_0x3b0855&&setTimeout(()=>_0x3b0855[_0x406d55(0x305)](),0x64);}catch(_0x30b03b){console['error'](_0x406d55(0x3a1),_0x30b03b),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x30b03b['message'],_0x406d55(0x2fb));}}function closeQuickEditModal(){const _0x4e7a5b=a4_0x589c4c,_0x59a325=document[_0x4e7a5b(0x168)]('quick-edit-points-modal');_0x59a325&&_0x59a325[_0x4e7a5b(0x373)][_0x4e7a5b(0x307)]('active');}async function handleQuickEditPoints(_0x4d345e){const _0x322abc=a4_0x589c4c;_0x4d345e['preventDefault']();const _0x208af0=document['getElementById']('quick-edit-user-id')['value'],_0x3e014c=document[_0x322abc(0x33c)]('input[name=\x22quick-action\x22]:checked')[_0x322abc(0x240)],_0x325fe0=parseInt(document['getElementById'](_0x322abc(0x39d))['value']),_0x496013=document['getElementById']('quick-points-reason')[_0x322abc(0x240)]['trim']();console['log']('Processing\x20points\x20edit:',{'userId':_0x208af0,'action':_0x3e014c,'amount':_0x325fe0,'reason':_0x496013});if(!_0x208af0||!_0x325fe0||_0x325fe0<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x208af0,_0x3e014c,_0x325fe0,_0x496013),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully',_0x322abc(0x2ff)),console['log'](_0x322abc(0x2d7),_0x208af0);}catch(_0x15862c){console['error'](_0x322abc(0x1bc),_0x15862c),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x15862c['message'],'error');}}async function searchUsersForPoints(){const _0x20086a=a4_0x589c4c,_0x45c240=document[_0x20086a(0x168)]('points-user-search')['value']['trim']()['toLowerCase'](),_0x3cbc1c=document['getElementById']('user-search-results');if(!_0x45c240||_0x45c240['length']<0x2){_0x3cbc1c[_0x20086a(0x30b)]='';return;}_0x3cbc1c['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x2ba7ed=collection(db,_0x20086a(0x320)),_0x53a99f=await getDocs(_0x2ba7ed),_0x4f4d4f=[];_0x53a99f[_0x20086a(0x15b)](_0x21a002=>{const _0x37252f=_0x20086a,_0x469f95=_0x21a002['data'](),_0x268491=(_0x469f95['displayName']||_0x469f95[_0x37252f(0x285)]||'')[_0x37252f(0x398)](),_0x5b069e=(_0x469f95['email']||'')['toLowerCase']();(_0x268491[_0x37252f(0x23e)](_0x45c240)||_0x5b069e[_0x37252f(0x23e)](_0x45c240))&&_0x4f4d4f['push']({'id':_0x21a002['id'],..._0x469f95});});if(_0x4f4d4f['length']===0x0){_0x3cbc1c['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x3cbc1c['innerHTML']='',_0x4f4d4f['forEach'](_0x3b0130=>{const _0x1ca64f=_0x20086a,_0x17465a=document['createElement'](_0x1ca64f(0x36e));_0x17465a[_0x1ca64f(0x1fa)]='search-result-item',_0x17465a['innerHTML']=_0x1ca64f(0x395)+(_0x3b0130[_0x1ca64f(0x2c3)]||_0x3b0130['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x3b0130['email']||_0x1ca64f(0x30e))+_0x1ca64f(0x28c)+(_0x3b0130['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x17465a[_0x1ca64f(0x264)]('click',()=>selectUserForPoints(_0x3b0130)),_0x3cbc1c['appendChild'](_0x17465a);});}catch(_0x122b37){console[_0x20086a(0x2fb)]('Error\x20searching\x20users:',_0x122b37),_0x3cbc1c['innerHTML']=_0x20086a(0x202);}}function selectUserForPoints(_0xb8efc1){const _0x31b942=a4_0x589c4c;document['getElementById']('selected-user-name')['textContent']=_0xb8efc1['displayName']||_0xb8efc1[_0x31b942(0x285)]||_0x31b942(0x34e),document[_0x31b942(0x168)]('selected-user-points')['textContent']=(_0xb8efc1['points']||0x0)['toLocaleString'](),document[_0x31b942(0x168)]('selected-user-id')['value']=_0xb8efc1['id'],document['getElementById']('selected-user-info')[_0x31b942(0x1ce)]['display']=_0x31b942(0x362),document['getElementById']('points-management-forms')['style']['display']='block',document[_0x31b942(0x168)]('user-search-results')['innerHTML']='',document['getElementById'](_0x31b942(0x366))[_0x31b942(0x240)]='';}async function handleModifyPoints(_0x24ad41){const _0x2d7e4f=a4_0x589c4c;_0x24ad41[_0x2d7e4f(0x157)]();const _0x48f66e=document['getElementById']('selected-user-id')['value'],_0xba0259=document['getElementById'](_0x2d7e4f(0x2d6))['value'],_0xd75c00=parseInt(document[_0x2d7e4f(0x168)]('points-amount')['value']),_0x30fd7c=document[_0x2d7e4f(0x168)](_0x2d7e4f(0x308))['value']['trim']();if(!_0x48f66e||!_0xd75c00||_0xd75c00<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x48f66e,_0xba0259,_0xd75c00,_0x30fd7c),document['getElementById']('modify-points-form')['reset']();const _0x5f3ade=doc(db,'userProfiles',_0x48f66e),_0x2ceafa=await getDoc(_0x5f3ade);if(_0x2ceafa[_0x2d7e4f(0x242)]()){const _0x30adef=_0x2ceafa['data']();document['getElementById']('selected-user-points')['textContent']=(_0x30adef['points']||0x0)[_0x2d7e4f(0x17f)]();}showNotification('Points\x20modified\x20successfully',_0x2d7e4f(0x2ff)),loadPointsHistory();}catch(_0x5f128e){console[_0x2d7e4f(0x2fb)]('Error\x20modifying\x20points:',_0x5f128e),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x5f128e[_0x2d7e4f(0x1cf)],'error');}}async function loadPointsHistory(){const _0x4085fb=a4_0x589c4c,_0x5642a5=document['getElementById'](_0x4085fb(0x38b));if(!_0x5642a5)return;_0x5642a5['innerHTML']=_0x4085fb(0x1c7);try{const _0x1d755b=collection(db,'pointsHistory'),_0x529f82=query(_0x1d755b,orderBy('timestamp','desc'),limit(0x32)),_0x25504d=await getDocs(_0x529f82);if(_0x25504d['empty']){_0x5642a5['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x5642a5[_0x4085fb(0x30b)]='',_0x25504d['forEach'](_0x585770=>{const _0x2844ae=_0x4085fb,_0x17ecad=_0x585770['data'](),_0x21defd=document['createElement']('tr'),_0x31fca6=_0x17ecad['timestamp']?new Date(_0x17ecad['timestamp']['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x56e68b='';switch(_0x17ecad[_0x2844ae(0x25f)]){case'add':_0x56e68b='Added\x20'+_0x17ecad['amount']+'\x20points';break;case _0x2844ae(0x259):_0x56e68b=_0x2844ae(0x2d1)+_0x17ecad[_0x2844ae(0x1ac)]+'\x20points';break;case _0x2844ae(0x279):_0x56e68b='Set\x20to\x20'+_0x17ecad['amount']+_0x2844ae(0x363);break;default:_0x56e68b=_0x17ecad['action']+'\x20'+_0x17ecad['amount']+'\x20points';}_0x21defd[_0x2844ae(0x30b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x31fca6+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x17ecad[_0x2844ae(0x2c3)]||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x56e68b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x17ecad['action']+_0x2844ae(0x359)+(_0x17ecad['previousPoints']||0x0)+'\x20\x20'+(_0x17ecad[_0x2844ae(0x19f)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x17ecad['reason']||_0x2844ae(0x328))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x17ecad['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5642a5[_0x2844ae(0x219)](_0x21defd);});}catch(_0x70e006){console['error']('Error\x20loading\x20points\x20history:',_0x70e006),_0x5642a5[_0x4085fb(0x30b)]='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x70e006['message']+'</td></tr>';}}function filterPointsOverview(){const _0x6e520f=document['getElementById']('points-overview-search')['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0xa780ff=window['allUsersPoints']['filter'](_0x5cc251=>{const _0x33d40b=a4_0x22fa,_0x29b7fb=(_0x5cc251[_0x33d40b(0x2c3)]||_0x5cc251[_0x33d40b(0x285)]||'')[_0x33d40b(0x398)](),_0x2ad9bf=(_0x5cc251['email']||'')['toLowerCase']();return _0x29b7fb['includes'](_0x6e520f)||_0x2ad9bf['includes'](_0x6e520f);});renderPointsOverview(_0xa780ff);}function sortPointsOverview(){const _0x3ec8aa=a4_0x589c4c,_0x1dfbad=document['getElementById']('points-sort-order')['value'];if(!window[_0x3ec8aa(0x2ee)])return;const _0x35f237=[...window['allUsersPoints']];switch(_0x1dfbad){case'points-desc':_0x35f237['sort']((_0x21a685,_0x230318)=>(_0x230318['points']||0x0)-(_0x21a685['points']||0x0));break;case'points-asc':_0x35f237['sort']((_0xc1bd26,_0x105b0e)=>(_0xc1bd26[_0x3ec8aa(0x1e2)]||0x0)-(_0x105b0e['points']||0x0));break;case _0x3ec8aa(0x1a1):_0x35f237['sort']((_0x3619b7,_0x383e8b)=>{const _0x3477e4=_0x3ec8aa,_0x267227=(_0x3619b7[_0x3477e4(0x2c3)]||_0x3619b7['username']||'')['toLowerCase'](),_0x1020db=(_0x383e8b['displayName']||_0x383e8b['username']||'')['toLowerCase']();return _0x267227['localeCompare'](_0x1020db);});break;case'name-desc':_0x35f237['sort']((_0x200feb,_0x1f2f6b)=>{const _0x1639ce=_0x3ec8aa,_0x281954=(_0x200feb['displayName']||_0x200feb['username']||'')['toLowerCase'](),_0x298f2e=(_0x1f2f6b['displayName']||_0x1f2f6b['username']||'')['toLowerCase']();return _0x298f2e[_0x1639ce(0x319)](_0x281954);});break;}renderPointsOverview(_0x35f237);}async function handleAwardItem(_0x3dd20d){const _0x54a0c0=a4_0x589c4c;_0x3dd20d['preventDefault']();const _0x393229=document[_0x54a0c0(0x168)]('selected-user-id')['value'],_0x419776=document['getElementById']('store-item-select')['value'],_0x1f5802=document[_0x54a0c0(0x168)]('award-reason')['value'][_0x54a0c0(0x1fd)]();if(!_0x393229||!_0x419776){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')[_0x54a0c0(0x258)]();}catch(_0x1b619b){console['error']('Error\x20awarding\x20item:',_0x1b619b),showNotification(_0x54a0c0(0x15d)+_0x1b619b['message'],'error');}}async function loadUserPointsHistory(_0x4b0d5c){const _0x12b7d9=a4_0x589c4c;try{const _0x38e720=collection(db,'pointsHistory'),_0x111a9b=query(_0x38e720,where('userId','==',_0x4b0d5c),orderBy('timestamp','desc')),_0x12ef13=await getDocs(_0x111a9b);console['log']('Found\x20'+_0x12ef13[_0x12b7d9(0x27f)]+'\x20history\x20entries\x20for\x20user\x20'+_0x4b0d5c),showNotification(_0x12b7d9(0x212)+_0x12ef13['size']+'\x20points\x20history\x20entries','info');}catch(_0x474092){console[_0x12b7d9(0x2fb)]('Error\x20loading\x20user\x20points\x20history:',_0x474092),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x2a2e9a=a4_0x589c4c;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x16e60e=collection(db,'userProfiles'),_0x4acca3=await getDocs(_0x16e60e);if(_0x4acca3['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x272908=0x0,_0x25479c=0x0;const _0x28b412=writeBatch(db);let _0x5199c5=0x0;return console[_0x2a2e9a(0x1b5)]('Found\x20'+_0x4acca3[_0x2a2e9a(0x27f)]+'\x20users\x20to\x20check...'),_0x4acca3[_0x2a2e9a(0x15b)](_0x1675a5=>{const _0x152ddf=_0x2a2e9a,_0x24fe0a=_0x1675a5[_0x152ddf(0x1d9)]();_0x24fe0a['points']===undefined||_0x24fe0a['points']===null?(_0x28b412['update'](_0x1675a5[_0x152ddf(0x234)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x272908++,_0x5199c5++,console[_0x152ddf(0x1b5)]('Queued\x20'+(_0x24fe0a['displayName']||_0x24fe0a['username']||_0x24fe0a['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x25479c++,console['log']((_0x24fe0a[_0x152ddf(0x2c3)]||_0x24fe0a['username']||_0x24fe0a[_0x152ddf(0x2ca)]||_0x152ddf(0x13e))+_0x152ddf(0x390)+_0x24fe0a['points'])),_0x5199c5>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x272908>0x0?(console[_0x2a2e9a(0x1b5)]('Committing\x20batch\x20update\x20for\x20'+_0x272908+'\x20users...'),await _0x28b412[_0x2a2e9a(0x27c)](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x272908+'\x20users')):console[_0x2a2e9a(0x1b5)](_0x2a2e9a(0x396)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x4acca3['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x272908+_0x2a2e9a(0x22c)+_0x25479c),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x272908+_0x2a2e9a(0x186)+_0x25479c+_0x2a2e9a(0x1bf),'success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x4acca3['size'],'usersUpdated':_0x272908,'usersAlreadyHadPoints':_0x25479c};}catch(_0x2c4b12){console['error']('Error\x20initializing\x20points\x20field:',_0x2c4b12),showNotification('Error\x20initializing\x20points:\x20'+_0x2c4b12['message'],'error');throw _0x2c4b12;}}function addPointsMigrationButton(){const _0x571dff=a4_0x589c4c,_0x410e74=document[_0x571dff(0x168)]('manage-points');if(!_0x410e74)return;if(document[_0x571dff(0x168)](_0x571dff(0x268)))return;const _0x3dfd28=document['createElement']('div');_0x3dfd28['className']='migration-section',_0x3dfd28['style']['marginBottom']=_0x571dff(0x2fe),_0x3dfd28['style']['padding']='15px',_0x3dfd28['style']['backgroundColor']=_0x571dff(0x2da),_0x3dfd28['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x3dfd28[_0x571dff(0x1ce)]['borderRadius']='5px',_0x3dfd28['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x220e64=_0x410e74[_0x571dff(0x33c)]('.section-header');_0x220e64&&_0x220e64['insertAdjacentElement']('afterend',_0x3dfd28),document['getElementById'](_0x571dff(0x268))['addEventListener']('click',async function(){if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{_0x3dfd28['style']['display']='none';},0xbb8);}catch(_0x466d83){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x397a38=a4_0x589c4c;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x35c80f=document['getElementById']('points-user-search');_0x35c80f&&_0x35c80f['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x3b1edd=document[_0x397a38(0x168)]('modify-points-form');_0x3b1edd&&_0x3b1edd['addEventListener'](_0x397a38(0x331),handleModifyPoints);const _0x5f2d56=document['getElementById']('award-item-form');_0x5f2d56&&_0x5f2d56['addEventListener'](_0x397a38(0x331),handleAwardItem);const _0x50a71c=document['getElementById']('points-overview-search');_0x50a71c&&_0x50a71c['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x29c03e=document[_0x397a38(0x168)]('points-sort-order');_0x29c03e&&_0x29c03e['addEventListener'](_0x397a38(0x38f),sortPointsOverview);const _0x749e19=document[_0x397a38(0x168)]('refresh-points-overview');_0x749e19&&_0x749e19['addEventListener']('click',loadPointsOverview);const _0x1f4542=document[_0x397a38(0x168)]('bulk-award-points-btn');_0x1f4542&&_0x1f4542['addEventListener'](_0x397a38(0x37a),async()=>{const _0x3779b4=_0x397a38;confirm(_0x3779b4(0x35a))&&(_0x1f4542['disabled']=!![],_0x1f4542['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x451cfc(),_0x1f4542['disabled']=![],_0x1f4542['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x152117=document[_0x397a38(0x168)]('award-all-pilots-btn');_0x152117&&_0x152117['addEventListener']('click',awardPointsToAllPilots);async function _0x451cfc(){const _0x19a6fe=_0x397a38;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x37d89a={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x25a042=0x0,_0x456f36=0x0,_0x2f7405=0x0,_0x6c17fb=0x0,_0x9fec87=0x0,_0x5f215b=0x0;const _0x2e65cd=new Set(),_0x271bf4=collection(db,'pointsHistory'),_0x2661ae=query(_0x271bf4,where('reason','>=','Bulk\x20award:'),where('reason','<=','Bulk\x20award:')),_0x3dc9f3=await getDocs(_0x2661ae);_0x3dc9f3['forEach'](_0x225cba=>{const _0x2ad960=a4_0x22fa,_0x3b8a60=_0x225cba['data'](),_0x421f9e=_0x3b8a60['reason']||'',_0x4ea670=_0x421f9e['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x4ea670&&_0x4ea670[0x1]&&_0x2e65cd[_0x2ad960(0x1b3)](_0x4ea670[0x1]);}),console['log']('Found\x20'+_0x2e65cd['size']+_0x19a6fe(0x16c));const [_0x1841c1,_0x4eda41,_0x2856d5]=await Promise['all']([getDocs(collection(db,_0x19a6fe(0x261))),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0xb80d6=_0x1841c1['size']+_0x4eda41['size']+_0x2856d5['size'];showNotification(_0x19a6fe(0x153)+_0xb80d6+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x45f54a=async(_0x210c73,_0x47a32c)=>{const _0x1aa277=_0x19a6fe;let _0x479041=writeBatch(db);const _0x5800a5=[];let _0x2bb8de=0x0;for(const _0x37f874 of _0x210c73['docs']){try{if(_0x2e65cd['has'](_0x37f874['id'])){if(_0x47a32c==='D1')_0x5f215b++;if(_0x47a32c==='D2')_0x5f215b++;if(_0x47a32c==='D3')_0x5f215b++;continue;}const _0x100534=_0x37f874[_0x1aa277(0x1d9)](),_0x1a02b1=_0x100534['subgameType']||'Standard',_0x4dc03c=_0x37d89a[_0x1a02b1]||0xa;let _0x546df4=_0x100534[_0x1aa277(0x372)];if(!_0x546df4&&_0x100534['winnerUsername']){const [_0x2fe7ee,_0x111215,_0x230428]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x1aa277(0x285),'==',_0x100534['winnerUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x100534['winnerUsername']))),getDocs(query(collection(db,'playersD3'),where(_0x1aa277(0x285),'==',_0x100534[_0x1aa277(0x355)])))]);if(!_0x2fe7ee['empty'])_0x546df4=_0x2fe7ee[_0x1aa277(0x330)][0x0]['id'];else{if(!_0x111215['empty'])_0x546df4=_0x111215['docs'][0x0]['id'];else{if(!_0x230428[_0x1aa277(0x2ec)])_0x546df4=_0x230428['docs'][0x0]['id'];}}}let _0x19951d=_0x100534[_0x1aa277(0x35e)];if(!_0x19951d&&_0x100534['loserUsername']){const [_0x7cf722,_0x5d8b4e,_0x1409da]=await Promise[_0x1aa277(0x223)]([getDocs(query(collection(db,_0x1aa277(0x229)),where('username','==',_0x100534['loserUsername']))),getDocs(query(collection(db,_0x1aa277(0x2db)),where('username','==',_0x100534['loserUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x100534[_0x1aa277(0x325)])))]);if(!_0x7cf722['empty'])_0x19951d=_0x7cf722['docs'][0x0]['id'];else{if(!_0x5d8b4e[_0x1aa277(0x2ec)])_0x19951d=_0x5d8b4e['docs'][0x0]['id'];else{if(!_0x1409da['empty'])_0x19951d=_0x1409da['docs'][0x0]['id'];}}}if(_0x546df4&&_0x19951d){const _0x261f55=doc(db,'userProfiles',_0x546df4),_0x4213eb=doc(db,'userProfiles',_0x19951d),[_0x3ce509,_0x35558a]=await Promise['all']([getDoc(_0x261f55),getDoc(_0x4213eb)]);if(_0x3ce509['exists']()){const _0x5ca554=_0x3ce509['data'](),_0x29a1ec=_0x5ca554[_0x1aa277(0x1e2)]||0x0;_0x479041['update'](_0x261f55,{'points':_0x29a1ec+_0x4dc03c,'lastPointsModified':serverTimestamp()}),_0x5800a5['push']({'userId':_0x546df4,'userEmail':_0x5ca554['email']||'unknown','displayName':_0x5ca554[_0x1aa277(0x2c3)]||_0x100534['winnerUsername']||'Unknown\x20User','action':_0x1aa277(0x1b3),'amount':_0x4dc03c,'previousPoints':_0x29a1ec,'newPoints':_0x29a1ec+_0x4dc03c,'reason':'Bulk\x20award:\x20'+_0x1a02b1+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x37f874['id']+'\x20-\x20'+_0x47a32c,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}if(_0x35558a['exists']()){const _0x3ea8d8=_0x35558a['data'](),_0x4ec05b=_0x3ea8d8['points']||0x0;_0x479041['update'](_0x4213eb,{'points':_0x4ec05b+_0x4dc03c,'lastPointsModified':serverTimestamp()}),_0x5800a5['push']({'userId':_0x19951d,'userEmail':_0x3ea8d8[_0x1aa277(0x2ca)]||_0x1aa277(0x2d0),'displayName':_0x3ea8d8[_0x1aa277(0x2c3)]||_0x100534[_0x1aa277(0x325)]||_0x1aa277(0x34e),'action':_0x1aa277(0x1b3),'amount':_0x4dc03c,'previousPoints':_0x4ec05b,'newPoints':_0x4ec05b+_0x4dc03c,'reason':'Bulk\x20award:\x20'+_0x1a02b1+_0x1aa277(0x30a)+_0x37f874['id']+'\x20-\x20'+_0x47a32c,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x6c17fb+=_0x4dc03c*0x2,_0x2bb8de+=0x2,_0x2e65cd['add'](_0x37f874['id']);if(_0x2bb8de>=0x190){await _0x479041['commit']();for(const _0x80115d of _0x5800a5){await addDoc(collection(db,_0x1aa277(0x22a)),_0x80115d);}_0x479041=writeBatch(db),_0x2bb8de=0x0,_0x5800a5['length']=0x0;}}}catch(_0x1137f1){console['error']('Error\x20processing\x20'+_0x47a32c+_0x1aa277(0x20b)+_0x37f874['id']+':',_0x1137f1),_0x9fec87++;}}if(_0x2bb8de>0x0){await _0x479041['commit']();for(const _0x26ec54 of _0x5800a5){await addDoc(collection(db,'pointsHistory'),_0x26ec54);}}return{'processed':_0x47a32c==='D1'?_0x25a042:_0x47a32c==='D2'?_0x456f36:_0x2f7405};};await _0x45f54a(_0x1841c1,'D1'),await _0x45f54a(_0x4eda41,'D2'),await _0x45f54a(_0x2856d5,'D3'),showNotification('Completed!\x20Processed\x20'+_0x25a042+'\x20D1\x20matches,\x20'+_0x456f36+'\x20D2\x20matches,\x20'+_0x2f7405+_0x19a6fe(0x22e)+('Awarded\x20'+_0x6c17fb+_0x19a6fe(0x19d)+_0x5f215b+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x9fec87),'success'),document['getElementById'](_0x19a6fe(0x1c0))&&loadPointsOverview();}catch(_0x36e42f){console['error'](_0x19a6fe(0x1cc),_0x36e42f),showNotification(_0x19a6fe(0x1fb)+_0x36e42f['message'],'error');}}const _0x7b3079=document['getElementById']('quick-edit-points-modal');if(_0x7b3079){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x4242eb=_0x7b3079['querySelector']('.close-btn');_0x4242eb?_0x4242eb['addEventListener'](_0x397a38(0x37a),function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x397a38(0x18b));const _0x18ae63=document['getElementById'](_0x397a38(0x226));_0x18ae63?_0x18ae63[_0x397a38(0x264)](_0x397a38(0x37a),function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x2f3131=document['getElementById']('quick-edit-points-form');_0x2f3131?_0x2f3131[_0x397a38(0x264)]('submit',function(_0x112014){const _0x223942=_0x397a38;console[_0x223942(0x1b5)]('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x112014);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x7b3079['addEventListener'](_0x397a38(0x37a),function(_0x9af168){const _0x5038e8=_0x397a38;_0x9af168[_0x5038e8(0x145)]===_0x7b3079&&(console['log'](_0x5038e8(0x2c5)),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x33cb05=a4_0x589c4c;try{const _0x49a995=parseInt(prompt(_0x33cb05(0x37b),'10'));if(!_0x49a995||isNaN(_0x49a995)){showNotification('Invalid\x20points\x20amount','error');return;}if(!confirm('This\x20will\x20award\x20'+_0x49a995+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification(_0x33cb05(0x376),_0x33cb05(0x170));const [_0x4a871f,_0x3e61a8,_0x47c383]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'playersD3'))]);console['log']('Found\x20'+_0x4a871f['size']+_0x33cb05(0x14b)+_0x3e61a8['size']+'\x20D2\x20pilots,\x20'+_0x47c383[_0x33cb05(0x27f)]+_0x33cb05(0x162));const _0x92fc3b=_0x4a871f['size']+_0x3e61a8['size']+_0x47c383['size'],_0x4001c5=new Map();_0x4a871f['forEach'](_0x31462b=>{const _0x3b80fe=_0x31462b['data']();_0x4001c5['set'](_0x31462b['id'],{'username':_0x3b80fe['username'],'ladder':'D1'});}),_0x3e61a8['forEach'](_0x153532=>{const _0x464a27=_0x153532['data']();_0x4001c5['set'](_0x153532['id'],{'username':_0x464a27['username'],'ladder':'D2'});}),_0x47c383[_0x33cb05(0x15b)](_0x1ecb23=>{const _0x12c106=_0x33cb05,_0x1eb2a9=_0x1ecb23['data']();_0x4001c5['set'](_0x1ecb23['id'],{'username':_0x1eb2a9[_0x12c106(0x285)],'ladder':'D3'});}),console['log']('Found\x20'+_0x4001c5['size']+_0x33cb05(0x36f));let _0x3970e1=0x0,_0x556ee1=0x0,_0x15f5ee=0x0;const _0xc1a56d=Array['from'](_0x4001c5[_0x33cb05(0x391)]()),_0x5e3ea0=0x190;for(let _0x49b08a=0x0;_0x49b08a<_0xc1a56d['length'];_0x49b08a+=_0x5e3ea0){const _0x2c3aa7=writeBatch(db),_0x371fe2=[],_0xde1eb5=_0xc1a56d['slice'](_0x49b08a,_0x49b08a+_0x5e3ea0),_0x3456c6=await Promise['all'](_0xde1eb5['map'](_0x26f8b9=>getDoc(doc(db,'userProfiles',_0x26f8b9))));for(let _0x4525c8=0x0;_0x4525c8<_0xde1eb5['length'];_0x4525c8++){try{const _0x16bbaf=_0xde1eb5[_0x4525c8],_0x5098d5=_0x4001c5['get'](_0x16bbaf),_0x46477d=_0x3456c6[_0x4525c8];if(_0x46477d['exists']()){const _0xe4393c=_0x46477d['data'](),_0x12113f=_0xe4393c['points']||0x0,_0xebcfa6=_0x12113f+_0x49a995;_0x2c3aa7[_0x33cb05(0x2d5)](doc(db,_0x33cb05(0x320),_0x16bbaf),{'points':_0xebcfa6,'lastPointsModified':serverTimestamp()}),_0x371fe2['push']({'userId':_0x16bbaf,'userEmail':_0xe4393c['email']||'unknown','displayName':_0xe4393c[_0x33cb05(0x2c3)]||_0x5098d5[_0x33cb05(0x285)]||'Unknown\x20User','action':'add','amount':_0x49a995,'previousPoints':_0x12113f,'newPoints':_0xebcfa6,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x5098d5['ladder']+')','adminEmail':auth[_0x33cb05(0x2c9)]['email'],'timestamp':serverTimestamp()}),_0x556ee1+=_0x49a995,_0x3970e1++;}else _0x15f5ee++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x5098d5['username']+'\x20('+_0x16bbaf+')');}catch(_0x5ca06c){_0x15f5ee++,console[_0x33cb05(0x2fb)](_0x33cb05(0x1dd)+pilotInfo?.['username']+':',_0x5ca06c);}}await _0x2c3aa7['commit']();for(const _0xfeda7c of _0x371fe2){await addDoc(collection(db,'pointsHistory'),_0xfeda7c);}showNotification('Processed\x20'+_0x3970e1+'/'+_0x92fc3b+_0x33cb05(0x1ea),_0x33cb05(0x170));}showNotification('Complete!\x20Awarded\x20'+_0x556ee1+'\x20points\x20to\x20'+_0x3970e1+'\x20pilots.\x20Errors:\x20'+_0x15f5ee,_0x33cb05(0x2ff)),document['getElementById'](_0x33cb05(0x1c0))&&loadPointsOverview();}catch(_0x23b730){console['error'](_0x33cb05(0x14f),_0x23b730),showNotification('Error:\x20'+_0x23b730['message'],'error');}}function setupManageRibbonsSection(){const _0x2ddee1=a4_0x589c4c;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x1db215=document[_0x2ddee1(0x168)]('ribbon-user-search');_0x1db215&&_0x1db215[_0x2ddee1(0x264)](_0x2ddee1(0x393),debounce(searchRibbonUser,0x12c));const _0x5b45a5=document['getElementById']('search-ribbon-user-btn');_0x5b45a5&&_0x5b45a5[_0x2ddee1(0x264)]('click',searchRibbonUser);const _0x4b9698=document[_0x2ddee1(0x168)](_0x2ddee1(0x159));_0x4b9698&&_0x4b9698[_0x2ddee1(0x264)]('submit',addRibbon),_0x1db215&&_0x1db215[_0x2ddee1(0x264)]('keypress',function(_0x329484){const _0x1f3e07=_0x2ddee1;_0x329484[_0x1f3e07(0x18f)]==='Enter'&&(_0x329484[_0x1f3e07(0x157)](),searchRibbonUser());}),console['log'](_0x2ddee1(0x267));}async function modifyUserPoints(_0x42cdbe,_0x13a64c,_0x472992,_0xa30e7e=''){const _0x3cb0b8=a4_0x589c4c,_0x198b1e=doc(db,'userProfiles',_0x42cdbe),_0xd551ad=await getDoc(_0x198b1e);if(!_0xd551ad['exists']())throw new Error('User\x20not\x20found');const _0x5493b7=_0xd551ad['data'](),_0x16a1a8=_0x5493b7['points']!==undefined?_0x5493b7[_0x3cb0b8(0x1e2)]:0x0;_0x5493b7['points']===undefined&&(console[_0x3cb0b8(0x1b5)]('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x5493b7['displayName']||_0x5493b7['email']||'Unknown')),await updateDoc(_0x198b1e,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x241fde=_0x16a1a8;switch(_0x13a64c){case _0x3cb0b8(0x1b3):_0x241fde=_0x16a1a8+_0x472992;break;case _0x3cb0b8(0x259):_0x241fde=Math['max'](0x0,_0x16a1a8-_0x472992);break;case'set':_0x241fde=_0x472992;break;default:throw new Error(_0x3cb0b8(0x2b2));}await updateDoc(_0x198b1e,{'points':_0x241fde,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x42cdbe,'userEmail':_0x5493b7['email']||'unknown','displayName':_0x5493b7[_0x3cb0b8(0x2c3)]||_0x5493b7['username']||_0x3cb0b8(0x34e),'action':_0x13a64c,'amount':_0x472992,'previousPoints':_0x16a1a8,'newPoints':_0x241fde,'reason':_0xa30e7e,'adminEmail':auth['currentUser'][_0x3cb0b8(0x2ca)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x520349=a4_0x589c4c,_0x249633=document[_0x520349(0x168)]('points-overview-table-body');if(!_0x249633)return;_0x249633[_0x520349(0x30b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x15a618=collection(db,_0x520349(0x320)),_0xa92193=await getDocs(_0x15a618);if(_0xa92193['empty']){_0x249633['innerHTML']=_0x520349(0x194);return;}const _0x26d08b=[];let _0x1f5422=0x0;_0xa92193['forEach'](_0x392e7b=>{const _0x51f82d=_0x520349,_0x1b0184=_0x392e7b['data'](),_0x5aaa05=_0x1b0184[_0x51f82d(0x1e2)]!==undefined?_0x1b0184['points']:0x0;_0x1b0184['points']===undefined&&_0x1f5422++,_0x26d08b['push']({'id':_0x392e7b['id'],..._0x1b0184,'points':_0x5aaa05});}),_0x1f5422>0x0&&(console['log']('Found\x20'+_0x1f5422+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x1f5422+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x26d08b[_0x520349(0x33a)]((_0x6d9c98,_0x4c982e)=>(_0x4c982e['points']||0x0)-(_0x6d9c98['points']||0x0)),window[_0x520349(0x2ee)]=_0x26d08b,renderPointsOverview(_0x26d08b);}catch(_0x28154a){console[_0x520349(0x2fb)]('Error\x20loading\x20points\x20overview:',_0x28154a),_0x249633[_0x520349(0x30b)]=_0x520349(0x149)+_0x28154a['message']+_0x520349(0x1c5);}}async function loadRibbonsData(){const _0x47a938=a4_0x589c4c,_0x30d01f=document['getElementById']('ribbons-overview-table-body');if(!_0x30d01f)return;_0x30d01f[_0x47a938(0x30b)]=_0x47a938(0x28d);try{const [_0x56df65,_0x478b1c,_0x6862a2]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x30d01f['innerHTML']='';const _0x302f70=(_0x3fd241,_0x5381c7)=>{_0x3fd241['forEach'](_0x4567a3=>{const _0x36e477=a4_0x22fa,_0x47b19e=_0x4567a3['data'](),_0x422cf1=_0x47b19e['ribbons']||{},_0x37b0eb=Object['keys'](_0x422cf1)[_0x36e477(0x237)],_0x42198b=document['createElement']('tr');_0x42198b[_0x36e477(0x30b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x47b19e['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x5381c7[_0x36e477(0x398)]()+'\x22>'+_0x5381c7+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x37b0eb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x47b19e['lastUpdated']?new Date(_0x47b19e[_0x36e477(0x199)]['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+_0x36e477(0x142)+_0x47b19e['username']+_0x36e477(0x357)+_0x5381c7+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x30d01f['appendChild'](_0x42198b);});};_0x302f70(_0x56df65,'D1'),_0x302f70(_0x478b1c,'D2'),_0x302f70(_0x6862a2,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x52afe8=>{const _0x24dec6=_0x47a938;_0x52afe8['addEventListener'](_0x24dec6(0x37a),function(){const _0x284f84=_0x24dec6,_0x2b401c=this[_0x284f84(0x1ff)]['username'],_0x555129=this['dataset'][_0x284f84(0x1b6)];editUserRibbons(_0x2b401c,_0x555129);});}),showNotification(_0x47a938(0x192),'success');}catch(_0x519dd8){console['error'](_0x47a938(0x19b),_0x519dd8),_0x30d01f['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data',_0x47a938(0x2fb));}}async function searchRibbonUser(){const _0x1e360c=a4_0x589c4c,_0x56e8d0=document['getElementById']('ribbon-user-search')[_0x1e360c(0x240)][_0x1e360c(0x1fd)]();if(!_0x56e8d0){showNotification(_0x1e360c(0x2f9),'error');return;}try{const [_0xd9aa3,_0x204a53,_0x213634]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x56e8d0)),getDoc(doc(db,_0x1e360c(0x1ee),_0x56e8d0)),getDoc(doc(db,'playerRibbonsD3',_0x56e8d0))]);let _0xad06f8=null,_0x460d6e=null;if(_0xd9aa3['exists']())_0xad06f8='D1',_0x460d6e=_0xd9aa3['data']();else{if(_0x204a53[_0x1e360c(0x242)]())_0xad06f8='D2',_0x460d6e=_0x204a53['data']();else _0x213634[_0x1e360c(0x242)]()&&(_0xad06f8='D3',_0x460d6e=_0x213634['data']());}_0xad06f8?(document['getElementById'](_0x1e360c(0x24e))['textContent']=_0x56e8d0,document['getElementById'](_0x1e360c(0x25c))['value']=_0x56e8d0,document[_0x1e360c(0x168)](_0x1e360c(0x2e7))['value']=_0xad06f8,document['getElementById'](_0x1e360c(0x324))[_0x1e360c(0x1ce)]['display']=_0x1e360c(0x362),displayCurrentRibbons(_0x460d6e['ribbons']||{}),showNotification(_0x1e360c(0x153)+_0x56e8d0+_0x1e360c(0x14e)+_0xad06f8+_0x1e360c(0x1b2),'success')):showNotification(_0x1e360c(0x200)+_0x56e8d0+'\x20not\x20found\x20in\x20any\x20ladder',_0x1e360c(0x2fb));}catch(_0x4487a5){console[_0x1e360c(0x2fb)]('Error\x20searching\x20user:',_0x4487a5),showNotification(_0x1e360c(0x21c),_0x1e360c(0x2fb));}}function displayCurrentRibbons(_0x269e41){const _0x5b111e=a4_0x589c4c,_0x59966a=document[_0x5b111e(0x168)]('current-ribbons-list');if(!_0x59966a)return;_0x59966a[_0x5b111e(0x30b)]='';if(Object['keys'](_0x269e41)[_0x5b111e(0x237)]===0x0){_0x59966a['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0x269e41)['forEach'](([_0x48cef8,_0x12e964])=>{const _0x5d8eb8=_0x5b111e,_0x480d34=document['createElement'](_0x5d8eb8(0x36e));_0x480d34['className']=_0x5d8eb8(0x374),_0x480d34['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x48cef8+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x12e964[_0x5d8eb8(0x309)]||0x1)+_0x5d8eb8(0x255)+(_0x12e964['awardedAt']?new Date(_0x12e964['awardedAt']['seconds']*0x3e8)[_0x5d8eb8(0x1f9)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x48cef8+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x59966a['appendChild'](_0x480d34);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x3bfb67=>{const _0x3f6d77=_0x5b111e;_0x3bfb67[_0x3f6d77(0x264)]('click',function(){const _0x5e1bf7=_0x3f6d77,_0x139044=this[_0x5e1bf7(0x1ff)]['ribbon'];removeRibbon(_0x139044);});});}async function addRibbon(_0x2a919f){const _0x5bb0b2=a4_0x589c4c;_0x2a919f['preventDefault']();const _0x548830=document['getElementById']('ribbon-target-user')[_0x5bb0b2(0x240)],_0x5acd9a=document[_0x5bb0b2(0x168)]('ribbon-target-ladder')['value'],_0xa88672=document['getElementById']('ribbon-type-select')[_0x5bb0b2(0x240)],_0x2e5bce=parseInt(document[_0x5bb0b2(0x168)]('ribbon-level')['value']);if(!_0x548830||!_0x5acd9a||!_0xa88672||!_0x2e5bce){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0xeaf9a0='playerRibbons'+(_0x5acd9a==='D1'?'':_0x5acd9a),_0x14233f=doc(db,_0xeaf9a0,_0x548830),_0x4dd459=await getDoc(_0x14233f),_0xdb6261=_0x4dd459['exists']()?_0x4dd459['data']()['ribbons']||{}:{};_0xdb6261[_0xa88672]={'level':_0x2e5bce,'awardedAt':serverTimestamp()},await setDoc(_0x14233f,{'username':_0x548830,'ladder':_0x5acd9a,'ribbons':_0xdb6261,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0xa88672+'\x20Level\x20'+_0x2e5bce+'\x20to\x20'+_0x548830,'success'),displayCurrentRibbons(_0xdb6261),document['getElementById']('ribbon-type-select')[_0x5bb0b2(0x240)]='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x402972){console[_0x5bb0b2(0x2fb)](_0x5bb0b2(0x260),_0x402972),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x4ead65){const _0xed5742=a4_0x589c4c,_0x306ebb=document['getElementById']('ribbon-target-user')['value'],_0x5c9cca=document[_0xed5742(0x168)]('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x4ead65+'\x20from\x20'+_0x306ebb+'?'))return;try{const _0x5ca3d1=_0xed5742(0x254)+(_0x5c9cca==='D1'?'':_0x5c9cca),_0x22b6c1=doc(db,_0x5ca3d1,_0x306ebb),_0x10f975=await getDoc(_0x22b6c1),_0x50e737=_0x10f975['exists']()?_0x10f975['data']()['ribbons']||{}:{};delete _0x50e737[_0x4ead65],await setDoc(_0x22b6c1,{'username':_0x306ebb,'ladder':_0x5c9cca,'ribbons':_0x50e737,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x4ead65+'\x20from\x20'+_0x306ebb,'success'),displayCurrentRibbons(_0x50e737);}catch(_0x1f613b){console['error']('Error\x20removing\x20ribbon:',_0x1f613b),showNotification('Error\x20removing\x20ribbon',_0xed5742(0x2fb));}}function editUserRibbons(_0x3022b2,_0x1806d9){const _0x2d6683=a4_0x589c4c;document['getElementById']('ribbon-user-search')[_0x2d6683(0x240)]=_0x3022b2,searchRibbonUser();}