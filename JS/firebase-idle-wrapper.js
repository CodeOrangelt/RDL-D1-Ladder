const a19_0x15938a=a19_0x118a,a19_0x9c6d6a=(function(){let _0x5b4fa9=!![];return function(_0x2b8dde,_0x2148b6){const _0x21b7db=_0x5b4fa9?function(){if(_0x2148b6){const _0x4a2039=_0x2148b6['apply'](_0x2b8dde,arguments);return _0x2148b6=null,_0x4a2039;}}:function(){};return _0x5b4fa9=![],_0x21b7db;};}()),a19_0x121e41=a19_0x9c6d6a(this,function(){const _0x264cc3=a19_0x118a,_0x22fd3b=function(){let _0x4c01c3;try{_0x4c01c3=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x201097){_0x4c01c3=window;}return _0x4c01c3;},_0x45743b=_0x22fd3b(),_0x5a71ef=_0x45743b[_0x264cc3(0x1d0)]=_0x45743b[_0x264cc3(0x1d0)]||{},_0x346e5e=[_0x264cc3(0x1ed),_0x264cc3(0x1cd),'info',_0x264cc3(0x1e1),_0x264cc3(0x1d5),_0x264cc3(0x1e3),'trace'];for(let _0x568281=0x0;_0x568281<_0x346e5e['length'];_0x568281++){const _0x57752e=a19_0x9c6d6a[_0x264cc3(0x1e5)]['prototype']['bind'](a19_0x9c6d6a),_0x1db4a6=_0x346e5e[_0x568281],_0x3a3e43=_0x5a71ef[_0x1db4a6]||_0x57752e;_0x57752e['__proto__']=a19_0x9c6d6a['bind'](a19_0x9c6d6a),_0x57752e[_0x264cc3(0x1ea)]=_0x3a3e43['toString']['bind'](_0x3a3e43),_0x5a71ef[_0x1db4a6]=_0x57752e;}});a19_0x121e41();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';function a19_0x118a(_0x2bbfdb,_0x742f87){const _0x121e41=a19_0x32fd();return a19_0x118a=function(_0x9c6d6a,_0x3cfd92){_0x9c6d6a=_0x9c6d6a-0x1c9;let _0x32fde5=_0x121e41[_0x9c6d6a];return _0x32fde5;},a19_0x118a(_0x2bbfdb,_0x742f87);}import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x4ac4ff=a19_0x118a;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this[_0x4ac4ff(0x1f8)]=![];}[a19_0x15938a(0x1df)](){const _0x2f45e0=a19_0x15938a;if(window['RDL_SESSION_SUSPENDED']===!![])return console[_0x2f45e0(0x1ed)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn']('[FirebaseIdle]\x20Blocked\x20'+this[_0x2f45e0(0x1ec)]+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log'](_0x2f45e0(0x1dc)),![];return!![];}async['safeOperation'](_0x35dad1,_0x1e42d2,..._0x4c9e8f){const _0x12dbb1=a19_0x15938a;if(!this['checkSessionActive']()){const _0x26d03d=_0x1e42d2+'-'+Date[_0x12dbb1(0x1f7)]()+'-'+Math['random']()['toString'](0x24)[_0x12dbb1(0x1e2)](0x2,0x9);return this['pendingOperations'][_0x12dbb1(0x1cf)](_0x26d03d,{'operation':_0x35dad1,'operationType':_0x1e42d2,'args':_0x4c9e8f}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{const _0x25c2c4=_0x12dbb1;this[_0x25c2c4(0x1ce)][_0x25c2c4(0x1cb)](),this[_0x25c2c4(0x1d6)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x35dad1(..._0x4c9e8f);}catch(_0xb9f9c){if(_0xb9f9c[_0x12dbb1(0x1f6)]==='unavailable'||_0xb9f9c['code']==='resource-exhausted'||_0xb9f9c[_0x12dbb1(0x1f2)]&&_0xb9f9c['message'][_0x12dbb1(0x1d1)](_0x12dbb1(0x1f1)))return handleNetworkError(),null;throw _0xb9f9c;}}async[a19_0x15938a(0x1d2)](_0x507aca){const _0x62fe13=a19_0x15938a;return this[_0x62fe13(0x1eb)](getDoc,'get',_0x507aca);}async[a19_0x15938a(0x1db)](_0x1e9162){const _0x14802a=a19_0x15938a;return this[_0x14802a(0x1eb)](getDocs,'query',_0x1e9162);}async['addDocument'](_0x4fe6be,_0x17dfb3){const _0x2dbb6e=a19_0x15938a;return this[_0x2dbb6e(0x1eb)](addDoc,_0x2dbb6e(0x1e9),_0x4fe6be,_0x17dfb3);}async['setDocument'](_0x51f20a,_0x455850,_0x2dd7d9={}){const _0x5a0433=a19_0x15938a;return this['safeOperation'](setDoc,_0x5a0433(0x1cf),_0x51f20a,_0x455850,_0x2dd7d9);}async['updateDocument'](_0x56050a,_0x3394f6){return this['safeOperation'](updateDoc,'update',_0x56050a,_0x3394f6);}async['deleteDocument'](_0x538587){return this['safeOperation'](deleteDoc,'delete',_0x538587);}[a19_0x15938a(0x1dd)](){const _0x118dc8=a19_0x15938a;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners'][_0x118dc8(0x1cc)]),this['_suspendedListeners']=new Map(this['activeListeners']),this[_0x118dc8(0x1da)][_0x118dc8(0x1ee)]((_0x50f630,_0x52433d)=>{console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x52433d);if(typeof _0x50f630==='function')try{_0x50f630(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x52433d);}catch(_0x40c881){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x52433d,_0x40c881);}}),this['activeListeners'][_0x118dc8(0x1cb)]();if(this[_0x118dc8(0x1f8)]){const _0x102a40=document['createElement']('div');_0x102a40['id']='firebase-suspend-indicator',_0x102a40['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x102a40[_0x118dc8(0x1e4)]=_0x118dc8(0x1e0),document['body']['appendChild'](_0x102a40);}console['log'](_0x118dc8(0x1d8));}[a19_0x15938a(0x1ef)](){const _0x2a53ef=a19_0x15938a;if(!this[_0x2a53ef(0x1e6)]||this['_suspendedListeners'][_0x2a53ef(0x1cc)]===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log'](_0x2a53ef(0x1f3),this['_suspendedListeners'][_0x2a53ef(0x1cc)]),this['_suspendedListeners']['forEach']((_0x1537ee,_0xf8dca0)=>{const _0x57ac23=_0x2a53ef;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0xf8dca0);try{if(typeof _0x1537ee==='function'){console[_0x57ac23(0x1cd)]('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0xf8dca0);return;}const {query:_0x33b295,callback:_0x3d3cd9,options:_0x4bafb6}=_0x1537ee;if(_0x33b295&&_0x3d3cd9){const _0x44a22c=onSnapshot(_0x33b295,_0x3d3cd9,_0x4bafb6||{});this['activeListeners'][_0x57ac23(0x1cf)](_0xf8dca0,_0x44a22c),console[_0x57ac23(0x1ed)]('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0xf8dca0);}}catch(_0xc1b876){console[_0x57ac23(0x1e1)]('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0xf8dca0,_0xc1b876);}}),this['_suspendedListeners']['clear']();const _0x4a2370=document['getElementById']('firebase-suspend-indicator');_0x4a2370&&_0x4a2370['remove'](),console[_0x2a53ef(0x1ed)]('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x5d37f9,_0x4cccd7,_0x2ca1dc={},_0x4f0755=null){const _0x43e98b=a19_0x15938a,_0x1546d6=_0x4f0755||_0x43e98b(0x1f0)+Date['now']()+'_'+Math['random']()[_0x43e98b(0x1ea)](0x24)['substr'](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x1546d6);if(!this['checkSessionActive']())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x1546d6),()=>{};try{const _0x525c2f=onSnapshot(_0x5d37f9,_0x4cccd7,_0x2ca1dc);return this['activeListeners']['set'](_0x1546d6,{'unsubscribe':_0x525c2f,'query':_0x5d37f9,'callback':_0x4cccd7,'options':_0x2ca1dc}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x1546d6),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size'])),()=>{const _0x2f6a5b=_0x43e98b;this['debug']&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x1546d6);try{_0x525c2f(),this['activeListeners'][_0x2f6a5b(0x1d9)](_0x1546d6),this[_0x2f6a5b(0x1f8)]&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x1546d6),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x3c0705){console[_0x2f6a5b(0x1e1)]('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x1546d6+':',_0x3c0705);}};}catch(_0x31db14){return console['error'](_0x43e98b(0x1de)+_0x1546d6+':',_0x31db14),()=>{};}}['executePendingOperations'](_0x392ec7='all'){const _0x3c7af9=a19_0x15938a;console['log'](_0x3c7af9(0x1e7)+_0x392ec7+'\x20operations:\x20'+this['pendingOperations']['size']+'\x20total\x20operations');const _0x299b34=new Map(this['pendingOperations']);this[_0x3c7af9(0x1ce)]['clear'](),_0x299b34['forEach']((_0x1e2334,_0x5d4852)=>{const _0x1a8269=_0x3c7af9;_0x392ec7===_0x1a8269(0x1f5)||_0x1e2334['operationType']===_0x392ec7?(console[_0x1a8269(0x1ed)]('Executing\x20delayed\x20'+_0x1e2334['operationType']+_0x1a8269(0x1d4)),this['safeOperation'](_0x1e2334['operation'],_0x1e2334['operationType'],..._0x1e2334['args'])[_0x1a8269(0x1e8)](_0x59742a=>console['error']('Error\x20executing\x20pending\x20operation:',_0x59742a))):this['pendingOperations']['set'](_0x5d4852,_0x1e2334);});}['enableDebug'](_0x456de7=!![]){const _0x3d8fc3=a19_0x15938a;this[_0x3d8fc3(0x1f8)]=_0x456de7,console['log'](_0x3d8fc3(0x1d3)+(_0x456de7?_0x3d8fc3(0x1c9):'disabled'));if(_0x456de7){const _0x4bfde9=window['RDL_SESSION_SUSPENDED'];window[_0x3d8fc3(0x1d7)]=!![],console['log'](_0x3d8fc3(0x1f4)),this['getDocument'](doc(db,'system','test'))[_0x3d8fc3(0x1ca)](_0x5595fb=>{const _0x14fc95=_0x3d8fc3;console[_0x14fc95(0x1ed)]('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x5595fb);})[_0x3d8fc3(0x1e8)](_0x5f0cf8=>{const _0xabb0be=_0x3d8fc3;console[_0xabb0be(0x1ed)]('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x5f0cf8);})['finally'](()=>{const _0x824a98=_0x3d8fc3;console[_0x824a98(0x1ed)]('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window[_0x824a98(0x1d7)]=_0x4bfde9;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x3157f6=window['suspendSession']||function(){},_0x778cb1=window['resumeSession']||function(){};window['suspendSession']=function(){const _0x43f99d=a19_0x118a;_0x3157f6(),firebaseIdle[_0x43f99d(0x1dd)]();},window['resumeSession']=function(){_0x778cb1(),firebaseIdle['resumeAllListeners']();};}function a19_0x32fd(){const _0x39dec8=['enabled','then','clear','size','warn','pendingOperations','set','console','includes','getDocument','[FirebaseIdle]\x20Debug\x20mode\x20','\x20operation','exception','pendingTimeout','RDL_SESSION_SUSPENDED','[FirebaseIdle]\x20All\x20listeners\x20suspended','delete','activeListeners','getDocuments','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error','suspendAllListeners','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','checkSessionActive','Firebase:\x20Suspended','error','substring','table','textContent','constructor','_suspendedListeners','Executing\x20pending\x20','catch','add','toString','safeOperation','blockedOperations','log','forEach','resumeAllListeners','listener_','network','message','[FirebaseIdle]\x20Resuming\x20listeners:','[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...','all','code','now','debug'];a19_0x32fd=function(){return _0x39dec8;};return a19_0x32fd();}export default firebaseIdle;