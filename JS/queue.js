const a43_0x136b30=a43_0x3d7f,a43_0x5a44fa=(function(){let _0x3c20bf=!![];return function(_0x2837d3,_0x47c82e){const _0x448410=_0x3c20bf?function(){const _0x4e537f=a43_0x3d7f;if(_0x47c82e){const _0x438f6e=_0x47c82e[_0x4e537f(0xb7)](_0x2837d3,arguments);return _0x47c82e=null,_0x438f6e;}}:function(){};return _0x3c20bf=![],_0x448410;};}()),a43_0x195431=a43_0x5a44fa(this,function(){const _0x328825=a43_0x3d7f,_0x141afd=function(){let _0x1d0a76;try{_0x1d0a76=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3b6ad3){_0x1d0a76=window;}return _0x1d0a76;},_0x4086b4=_0x141afd(),_0x2142b4=_0x4086b4['console']=_0x4086b4['console']||{},_0x344279=[_0x328825(0xb1),_0x328825(0xaa),'info','error','exception',_0x328825(0xac),'trace'];for(let _0x3c6948=0x0;_0x3c6948<_0x344279[_0x328825(0xb2)];_0x3c6948++){const _0x87bdca=a43_0x5a44fa[_0x328825(0xb9)]['prototype'][_0x328825(0xaf)](a43_0x5a44fa),_0x28e0e6=_0x344279[_0x3c6948],_0x5f1765=_0x2142b4[_0x28e0e6]||_0x87bdca;_0x87bdca['__proto__']=a43_0x5a44fa[_0x328825(0xaf)](a43_0x5a44fa),_0x87bdca[_0x328825(0xa9)]=_0x5f1765['toString']['bind'](_0x5f1765),_0x2142b4[_0x28e0e6]=_0x87bdca;}});a43_0x195431();function a43_0x3d7f(_0x25708d,_0x2d6cb7){const _0x195431=a43_0xfa9c();return a43_0x3d7f=function(_0x5a44fa,_0x5456ab){_0x5a44fa=_0x5a44fa-0xa9;let _0xfa9c77=_0x195431[_0x5a44fa];return _0xfa9c77;},a43_0x3d7f(_0x25708d,_0x2d6cb7);}import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a43_0xfa9c(){const _0xb4f447=['toString','warn','getElementById','table','toDate','unload','bind','addEventListener','log','length','forEach','Just\x20now','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','isReady','apply','lastUpdated','constructor'];a43_0xfa9c=function(){return _0xb4f447;};return a43_0xfa9c();}const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where(a43_0x136b30(0xb6),'==',!![]));function updateQueueDisplay(_0x511c7a){const _0x41c100=a43_0x136b30,_0x449e67=document[_0x41c100(0xab)]('queue-container');if(!_0x449e67)return;if(_0x511c7a[_0x41c100(0xb2)]===0x0){_0x449e67['style']['display']='none';return;}_0x449e67['style']['display']='block';let _0x198878='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x511c7a['forEach'](_0x2181bc=>{_0x198878+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x2181bc['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x2181bc['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x198878+=_0x41c100(0xb5),_0x449e67['innerHTML']=_0x198878;}function formatQueueTime(_0x41fc31){const _0x9fba0a=a43_0x136b30;if(!_0x41fc31)return'Just\x20now';const _0x567b8f=_0x41fc31[_0x9fba0a(0xad)]?_0x41fc31['toDate']():new Date(_0x41fc31),_0x33de6d=new Date(),_0x423b72=Math['floor']((_0x33de6d-_0x567b8f)/0xea60);if(_0x423b72<0x1)return _0x9fba0a(0xb4);return _0x423b72+'m\x20in\x20queue';}async function checkQueueTimeout(_0x30a127){if(!_0x30a127['lastUpdated'])return;const _0x3f3b6e=_0x30a127['lastUpdated']['toDate']?_0x30a127['lastUpdated']['toDate']():new Date(_0x30a127['lastUpdated']),_0x4214b3=new Date(),_0x173f21=Math['floor']((_0x4214b3-_0x3f3b6e)/0xea60);if(_0x173f21>=0x1e)try{const _0x5b6890=doc(db,'readyPlayers',_0x30a127['id']);await updateDoc(_0x5b6890,{'isReady':![]});}catch(_0x5da67c){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x5da67c);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x3fb971=>{const _0x5ab388=a43_0x136b30,_0x35d301=[];_0x3fb971[_0x5ab388(0xb3)](_0x22867c=>{const _0x36217c=_0x5ab388,_0x194f12=_0x22867c['data']();if(_0x194f12['isReady']===!![]){const _0x1734a5={'id':_0x22867c['id'],'username':_0x194f12['username'],'lastUpdated':_0x194f12[_0x36217c(0xb8)]||new Date()};_0x35d301['push'](_0x1734a5),checkQueueTimeout(_0x1734a5);}}),updateQueueDisplay(_0x35d301);},_0x165113=>{console['error']('Error\x20in\x20queue\x20listener:',_0x165113);});window[a43_0x136b30(0xb0)](a43_0x136b30(0xae),()=>{unsubscribe();});