const a32_0xdb80bd=(function(){let _0x2cb291=!![];return function(_0x388794,_0x3bb527){const _0x3ec6b5=_0x2cb291?function(){if(_0x3bb527){const _0x39fe85=_0x3bb527['apply'](_0x388794,arguments);return _0x3bb527=null,_0x39fe85;}}:function(){};return _0x2cb291=![],_0x3ec6b5;};}()),a32_0xdb8f67=a32_0xdb80bd(this,function(){const _0x42eef7=a32_0x220e,_0x1be1a8=function(){let _0x469171;try{_0x469171=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3450f1){_0x469171=window;}return _0x469171;},_0x2da2c8=_0x1be1a8(),_0xb29d0d=_0x2da2c8[_0x42eef7(0x1ff)]=_0x2da2c8['console']||{},_0x5e72e7=['log','warn','info','error','exception','table','trace'];for(let _0x1989be=0x0;_0x1989be<_0x5e72e7[_0x42eef7(0x1f4)];_0x1989be++){const _0x34caaf=a32_0xdb80bd['constructor'][_0x42eef7(0x20b)]['bind'](a32_0xdb80bd),_0xb4fa64=_0x5e72e7[_0x1989be],_0x38c1a1=_0xb29d0d[_0xb4fa64]||_0x34caaf;_0x34caaf[_0x42eef7(0x1da)]=a32_0xdb80bd['bind'](a32_0xdb80bd),_0x34caaf['toString']=_0x38c1a1[_0x42eef7(0x204)]['bind'](_0x38c1a1),_0xb29d0d[_0xb4fa64]=_0x34caaf;}});a32_0xdb8f67();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a32_0x38e8(){const _0x3c03d5=['error','style','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','log','textContent','#4CAF50','number','__proto__','username','player','winnerUsername','forEach','timestamp','set','join','now','D2\x20Ladder\x20table\x20body\x20not\x20found','elo','data','newElo','find','opacity','toFixed','previousElo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:','Error\x20loading\x20D2\x20ladder:','position','#C0C0C0','querySelector','userProfiles','D2:\x20','length','playersD2','visible','push','losses','desc','fontWeight','fallback\x20entries','get','kda','toDate','console','wins','winRate','color','totalKills','toString','map','Gold','totalDeaths','visibility','eloRating','fontSize','prototype','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','D2:\x20Error\x20fetching\x20ELO\x20history:','asc'];a32_0x38e8=function(){return _0x3c03d5;};return a32_0x38e8();}import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0x95c0b3 from'./firebase-idle-wrapper.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x310f26=![]){const _0x48568b=a32_0x220e,_0xdcdbb0=document[_0x48568b(0x1f1)]('#ladder-d2\x20tbody');if(!_0xdcdbb0){console[_0x48568b(0x1d2)](_0x48568b(0x1e3));return;}_0xdcdbb0['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x4a361e=Date['now']();if(!_0x310f26&&playerCacheD2['data']&&_0x4a361e-playerCacheD2['timestamp']<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0x5afda5=collection(db,'playersD2'),_0x6a00a0=query(_0x5afda5,orderBy(_0x48568b(0x1ef),_0x48568b(0x20e))),_0x48543f=await a32_0x95c0b3['getDocuments'](_0x5afda5),_0x2e5cf2=[];_0x48543f[_0x48568b(0x1de)](_0x2edcae=>{const _0x1f6785=_0x48568b,_0x4ce84d=_0x2edcae[_0x1f6785(0x1e5)]();_0x4ce84d[_0x1f6785(0x1db)]&&_0x2e5cf2[_0x1f6785(0x1f7)]({..._0x4ce84d,'id':_0x2edcae['id'],'elo':_0x4ce84d[_0x1f6785(0x209)]||0x0,'position':_0x4ce84d['position']||Number['MAX_SAFE_INTEGER']});});const _0x2798e=collection(db,_0x48568b(0x1f2)),_0x526832=await getDocs(_0x2798e),_0x1c9d8c=new Map();_0x526832['forEach'](_0x1c9c07=>{const _0x2dab08=_0x1c9c07['data']();_0x2dab08['username']&&_0x1c9d8c['set'](_0x2dab08['username']['toLowerCase'](),_0x2dab08);});for(const _0x39a29f of _0x2e5cf2){const _0xb0fe5e=_0x39a29f['username']['toLowerCase']();if(_0x1c9d8c['has'](_0xb0fe5e)){const _0x59110c=_0x1c9d8c['get'](_0xb0fe5e);_0x59110c['country']&&(_0x39a29f['country']=_0x59110c['country']['toLowerCase']());}}const _0x4ee603=_0x2e5cf2[_0x48568b(0x205)](_0x25e3a3=>_0x25e3a3['username']),_0x15f062=await fetchBatchMatchStatsD2(_0x4ee603);_0x2e5cf2['sort']((_0x3e8141,_0x43361c)=>{const _0x5a8162=_0x48568b,_0x4ff324=_0x15f062[_0x5a8162(0x1fc)](_0x3e8141['username'])?.['totalMatches']||0x0,_0x26f6ee=_0x15f062['get'](_0x43361c['username'])?.['totalMatches']||0x0;if(_0x4ff324===0x0!==(_0x26f6ee===0x0))return _0x4ff324===0x0?0x1:-0x1;return(_0x3e8141[_0x5a8162(0x1ef)]||0x3e7)-(_0x43361c['position']||0x3e7);}),_0x2e5cf2[_0x48568b(0x1de)]((_0x3fc7da,_0x52e4b5)=>{_0x3fc7da['position']=_0x52e4b5+0x1;}),playerCacheD2['data']=_0x2e5cf2,playerCacheD2['timestamp']=_0x4a361e,updateLadderDisplayD2(_0x2e5cf2);}catch(_0x537eb0){console[_0x48568b(0x1d2)](_0x48568b(0x1ee),_0x537eb0),_0xdcdbb0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x537eb0['message']+_0x48568b(0x1eb);}}function getNextAvailablePositionD2(_0xae095e){const _0x3481ab=a32_0x220e;if(_0xae095e[_0x3481ab(0x1f4)]===0x0)return 0x1;let _0x26c275=0x0;return _0xae095e[_0x3481ab(0x1de)](_0x3ba28e=>{const _0x13e3f2=_0x3481ab;_0x3ba28e['position']&&typeof _0x3ba28e[_0x13e3f2(0x1ef)]===_0x13e3f2(0x1d9)&&_0x3ba28e['position']>_0x26c275&&(_0x26c275=_0x3ba28e['position']);}),_0x26c275+0x1;}async function updatePlayerPositions(_0x330779,_0x38e666){const _0x225c4e=a32_0x220e;try{const _0x41742a=collection(db,'playersD2'),_0x4e191d=await getDocs(_0x41742a),_0x319c74=[];_0x4e191d['forEach'](_0x25fe45=>{const _0x5c3f55=a32_0x220e;_0x319c74[_0x5c3f55(0x1f7)]({'id':_0x25fe45['id'],..._0x25fe45[_0x5c3f55(0x1e5)]()});});const _0x3ec2d0=_0x319c74['find'](_0x292324=>_0x292324['username']===_0x330779),_0xe443db=_0x319c74[_0x225c4e(0x1e7)](_0x21b776=>_0x21b776['username']===_0x38e666);if(!_0x3ec2d0||!_0xe443db){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x3ec2d0['position']>_0xe443db['position']){const _0x216521=_0xe443db[_0x225c4e(0x1ef)];for(const _0x3809f4 of _0x319c74){_0x3809f4[_0x225c4e(0x1ef)]>=_0xe443db['position']&&_0x3809f4['position']<_0x3ec2d0['position']&&_0x3809f4['username']!==_0x330779&&await updateDoc(doc(db,_0x225c4e(0x1f5),_0x3809f4['id']),{'position':_0x3809f4[_0x225c4e(0x1ef)]+0x1});}await updateDoc(doc(db,_0x225c4e(0x1f5),_0x3ec2d0['id']),{'position':_0x216521});if(_0x216521===0x1){const _0x2d586e=doc(db,'playersD2',_0x3ec2d0['id']),_0x2b2688=await getDoc(_0x2d586e);!_0x2b2688[_0x225c4e(0x1e5)]()['firstPlaceDate']&&await updateDoc(_0x2d586e,{'firstPlaceDate':Timestamp[_0x225c4e(0x1e2)]()});}if(_0xe443db[_0x225c4e(0x1ef)]===0x1){const _0x5423a0=doc(db,'playersD2',_0xe443db['id']);await updateDoc(_0x5423a0,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0x2ce65d){console['error']('Error\x20updating\x20D2\x20player\x20positions:',_0x2ce65d);}}function calculateStreakDays(_0x347f7b){const _0x3303a1=a32_0x220e;if(!_0x347f7b)return 0x0;const _0x3a068a=_0x347f7b[_0x3303a1(0x1fe)](),_0x520374=new Date(),_0x5d4eec=Math['abs'](_0x520374-_0x3a068a);return Math['ceil'](_0x5d4eec/(0x3e8*0x3c*0x3c*0x18));}function a32_0x220e(_0x137ae1,_0x42f64e){const _0xdb8f67=a32_0x38e8();return a32_0x220e=function(_0xdb80bd,_0x485ee3){_0xdb80bd=_0xdb80bd-0x1d2;let _0x38e8cc=_0xdb8f67[_0xdb80bd];return _0x38e8cc;},a32_0x220e(_0x137ae1,_0x42f64e);}function getPlayerRankNameD2(_0x2695fb){const _0x102df4=a32_0x220e;if(_0x2695fb>=0x834)return'Emerald';if(_0x2695fb>=0x708)return _0x102df4(0x206);if(_0x2695fb>=0x640)return'Silver';if(_0x2695fb>=0x578)return'Bronze';return'Unranked';}async function updateLadderDisplayD2(_0x2a8403){const _0x545b68=a32_0x220e;_0x2a8403['sort']((_0x35e745,_0xffabae)=>_0x35e745['position']-_0xffabae[_0x545b68(0x1ef)]);const _0x5b4159=document[_0x545b68(0x1f1)]('#ladder-d2\x20tbody');if(!_0x5b4159)return;_0x5b4159['innerHTML']='';const _0x30ef3b=_0x2a8403['map'](_0x1fbe9e=>_0x1fbe9e['username']),_0x5dbb80=await fetchBatchMatchStatsD2(_0x30ef3b),_0x3f2d27=document['querySelector']('#ladder-d2\x20thead\x20tr');_0x3f2d27&&(_0x3f2d27['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x350c81=_0x2a8403['map'](_0x3c29f4=>{const _0x4d5f77=_0x545b68,_0x4bab84=_0x5dbb80['get'](_0x3c29f4[_0x4d5f77(0x1db)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x3c29f4,_0x4bab84);})[_0x545b68(0x1e1)]('');_0x5b4159['innerHTML']=_0x350c81,getPlayersLastEloChangesD2(_0x30ef3b)['then'](_0xe21992=>{const _0x562679=_0x545b68,_0x289b57=new Map();_0x5b4159['querySelectorAll']('tr')['forEach']((_0x75ec5b,_0x5a30a4)=>{const _0x31fee8=a32_0x220e;_0x5a30a4<_0x30ef3b['length']&&_0x289b57[_0x31fee8(0x1e0)](_0x30ef3b[_0x5a30a4],_0x75ec5b);}),_0xe21992[_0x562679(0x1de)]((_0x3b7bf3,_0x4aaa95)=>{const _0x3d150a=_0x562679,_0x14fd90=_0x289b57['get'](_0x4aaa95);if(_0x14fd90&&_0x3b7bf3!==0x0){const _0x440b34=_0x14fd90['querySelector']('td:nth-child(3)');if(_0x440b34){const _0x33f99d=_0x3b7bf3>0x0?'+'+_0x3b7bf3:''+_0x3b7bf3,_0x28a85d=_0x440b34[_0x3d150a(0x1f1)]('.trend-indicator');_0x28a85d&&(_0x28a85d[_0x3d150a(0x1d7)]=_0x33f99d,_0x28a85d[_0x3d150a(0x1d3)][_0x3d150a(0x202)]=_0x3b7bf3>0x0?_0x3d150a(0x1d8):'#F44336',_0x28a85d['style'][_0x3d150a(0x1fa)]='bold',_0x28a85d[_0x3d150a(0x1d3)][_0x3d150a(0x20a)]='0.85em',_0x28a85d[_0x3d150a(0x1d3)]['display']='inline',_0x28a85d[_0x3d150a(0x1d3)][_0x3d150a(0x208)]=_0x3d150a(0x1f6),_0x28a85d['style'][_0x3d150a(0x1e8)]='1');}}});})['catch'](_0x4eed29=>console['error'](_0x545b68(0x1ed),_0x4eed29));}function createPlayerRowD2(_0x2cd082,_0x149769){const _0x3fa4c5=a32_0x220e,_0x4a4d87=parseFloat(_0x2cd082[_0x3fa4c5(0x1e4)])||0x0;let _0xd582f9='gray';if(_0x4a4d87>=0x7d0)_0xd582f9='#50C878';else{if(_0x4a4d87>=0x708)_0xd582f9='#FFD700';else{if(_0x4a4d87>=0x640)_0xd582f9=_0x3fa4c5(0x1f0);else _0x4a4d87>=0x578&&(_0xd582f9='#CD7F32');}}let _0x411c4a='';return _0x2cd082['country']&&(_0x411c4a='<img\x20src=\x22../images/flags/'+_0x2cd082['country']['toLowerCase']()+_0x3fa4c5(0x1ec)+_0x2cd082['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2cd082['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x2cd082['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0xd582f9+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2cd082['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x411c4a+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0xd582f9+_0x3fa4c5(0x1d5)+_0x4a4d87+_0x3fa4c5(0x20c)+_0x149769['totalMatches']+_0x3fa4c5(0x1d4)+_0x149769['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x149769[_0x3fa4c5(0x1f8)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x149769['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x149769[_0x3fa4c5(0x201)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD2(_0x54bebd){const _0x119f83=a32_0x220e,_0x204552=new Map();_0x54bebd['forEach'](_0x5ccb0f=>_0x204552['set'](_0x5ccb0f,0x0));try{const _0x274dca=collection(db,'eloHistoryD2'),_0x4f125c=query(_0x274dca,orderBy('timestamp',_0x119f83(0x1f9)),limit(0x64)),_0x4af61b=await getDocs(_0x4f125c),_0x436972=new Map(),_0x5db957=await getDocs(collection(db,_0x119f83(0x1f5)));_0x5db957['forEach'](_0x37dc94=>{const _0x3c4bb6=_0x119f83,_0x31f1cd=_0x37dc94[_0x3c4bb6(0x1e5)]();_0x31f1cd['username']&&_0x436972[_0x3c4bb6(0x1e0)](_0x37dc94['id'],_0x31f1cd[_0x3c4bb6(0x1db)]);});const _0x99e25e=new Map();_0x4af61b['forEach'](_0x48b2ee=>{const _0x5b0098=_0x119f83,_0x5defe5=_0x48b2ee['data']();let _0x5ee86c=_0x5defe5['username']||_0x5defe5['playerUsername'];!_0x5ee86c&&_0x5defe5[_0x5b0098(0x1dc)]&&_0x436972['has'](_0x5defe5['player'])&&(_0x5ee86c=_0x436972['get'](_0x5defe5['player']));if(!_0x5ee86c&&_0x5defe5['matchId']){}_0x5ee86c&&_0x54bebd['includes'](_0x5ee86c)&&(!_0x99e25e['has'](_0x5ee86c)&&_0x99e25e['set'](_0x5ee86c,[]),_0x99e25e['get'](_0x5ee86c)[_0x5b0098(0x1f7)]({..._0x5defe5,'timestamp':_0x5defe5[_0x5b0098(0x1df)]?.['seconds']||0x0,'username':_0x5ee86c}));}),_0x99e25e['forEach']((_0x3b98c1,_0x2da1c8)=>{const _0x8cbc88=_0x119f83;if(_0x3b98c1['length']>0x0){_0x3b98c1['sort']((_0x10105f,_0x397890)=>_0x397890['timestamp']-_0x10105f['timestamp']);const _0x397865=_0x3b98c1[_0x8cbc88(0x1e7)](_0x2a25cf=>_0x2a25cf['change']!==undefined||_0x2a25cf[_0x8cbc88(0x1e6)]!==undefined&&_0x2a25cf[_0x8cbc88(0x1ea)]!==undefined);if(_0x397865){let _0x4686c4;if(_0x397865['change']!==undefined)_0x4686c4=_0x397865['change'];else _0x397865['newElo']!==undefined&&_0x397865['previousElo']!==undefined&&(_0x4686c4=_0x397865['newElo']-_0x397865[_0x8cbc88(0x1ea)]);_0x4686c4!==undefined&&_0x204552['set'](_0x2da1c8,_0x4686c4);}}});if(_0x99e25e['size']===0x0){const _0x47340a=collection(db,'eloHistory'),_0x505ff6=query(_0x47340a,where('gameMode','==','D2'),orderBy('timestamp',_0x119f83(0x1f9)),limit(0x32));try{const _0x4fe0fa=await getDocs(_0x505ff6);console[_0x119f83(0x1d6)]('D2:\x20Found',_0x4fe0fa['size'],_0x119f83(0x1fb)),_0x4fe0fa['forEach'](_0x52df83=>{const _0x489759=_0x119f83,_0x50b0de=_0x52df83['data'](),_0xacf8ba=_0x50b0de['username']||_0x50b0de['playerUsername'];if(_0xacf8ba&&_0x54bebd['includes'](_0xacf8ba)){const _0x1fed47=_0x50b0de['change']||(_0x50b0de[_0x489759(0x1e6)]!==undefined&&_0x50b0de[_0x489759(0x1ea)]!==undefined?_0x50b0de['newElo']-_0x50b0de['previousElo']:0x0);_0x1fed47!==0x0&&(_0x204552['set'](_0xacf8ba,_0x1fed47),console['log'](_0x489759(0x1f3)+_0xacf8ba+'\x20fallback\x20ELO\x20change:\x20'+_0x1fed47));}});}catch(_0x1858d5){}}}catch(_0x157fc2){console['error'](_0x119f83(0x20d),_0x157fc2);}return _0x204552;}async function fetchBatchMatchStatsD2(_0x4196cd){const _0x277ca7=new Map();try{_0x4196cd['forEach'](_0x149fab=>{_0x277ca7['set'](_0x149fab,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x406476=collection(db,'approvedMatchesD2'),_0x36b8d8=await getDocs(_0x406476);_0x36b8d8['forEach'](_0x45134b=>{const _0x56a989=a32_0x220e,_0x1c5780=_0x45134b[_0x56a989(0x1e5)](),_0x3e77a0=_0x1c5780[_0x56a989(0x1dd)],_0x1db9f0=_0x1c5780['loserUsername'];if(_0x4196cd['includes'](_0x3e77a0)){const _0x2a3560=_0x277ca7['get'](_0x3e77a0);_0x2a3560['wins']++,_0x2a3560['totalMatches']++,_0x2a3560['totalKills']+=parseInt(_0x1c5780['winnerScore'])||0x0,_0x2a3560[_0x56a989(0x207)]+=parseInt(_0x1c5780['loserScore'])||0x0;}if(_0x4196cd['includes'](_0x1db9f0)){const _0xe182db=_0x277ca7[_0x56a989(0x1fc)](_0x1db9f0);_0xe182db['losses']++,_0xe182db['totalMatches']++,_0xe182db['totalKills']+=parseInt(_0x1c5780['loserScore'])||0x0,_0xe182db['totalDeaths']+=parseInt(_0x1c5780['winnerScore'])||0x0;}}),_0x4196cd['forEach'](_0x58632e=>{const _0x4c909a=a32_0x220e,_0x37618b=_0x277ca7['get'](_0x58632e);_0x37618b[_0x4c909a(0x1fd)]=_0x37618b['totalDeaths']>0x0?(_0x37618b[_0x4c909a(0x203)]/_0x37618b['totalDeaths'])['toFixed'](0x2):_0x37618b['totalKills'][_0x4c909a(0x1e9)](0x2),_0x37618b['winRate']=_0x37618b['totalMatches']>0x0?(_0x37618b[_0x4c909a(0x200)]/_0x37618b['totalMatches']*0x64)[_0x4c909a(0x1e9)](0x1):0x0;});}catch(_0x58ed7b){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x58ed7b);}return _0x277ca7;}export{displayLadderD2,updatePlayerPositions};