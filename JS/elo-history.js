function a16_0x43c6(_0xf52c7e,_0x46e95d){const _0x577e24=a16_0x9078();return a16_0x43c6=function(_0x5e58ac,_0x5c46e0){_0x5e58ac=_0x5e58ac-0x82;let _0x5d761d=_0x577e24[_0x5e58ac];return _0x5d761d;},a16_0x43c6(_0xf52c7e,_0x46e95d);}const a16_0xcef2e4=a16_0x43c6;(function(_0x548659,_0x538ac6){const _0x54a6c3=a16_0x43c6,_0x279e8a=_0x548659();while(!![]){try{const _0xf5a8af=-parseInt(_0x54a6c3(0xa6))/0x1+-parseInt(_0x54a6c3(0xa4))/0x2*(parseInt(_0x54a6c3(0x8d))/0x3)+parseInt(_0x54a6c3(0x90))/0x4*(-parseInt(_0x54a6c3(0xa8))/0x5)+-parseInt(_0x54a6c3(0x93))/0x6+parseInt(_0x54a6c3(0x85))/0x7+-parseInt(_0x54a6c3(0x9d))/0x8+parseInt(_0x54a6c3(0xad))/0x9;if(_0xf5a8af===_0x538ac6)break;else _0x279e8a['push'](_0x279e8a['shift']());}catch(_0x497cf1){_0x279e8a['push'](_0x279e8a['shift']());}}}(a16_0x9078,0x76d59));const a16_0x169fea=(function(){let _0x5c2838=!![];return function(_0x403ab7,_0x49194b){const _0x19e05e=_0x5c2838?function(){const _0x2e89e4=a16_0x43c6;if(_0x49194b){const _0x10fc2c=_0x49194b[_0x2e89e4(0x8c)](_0x403ab7,arguments);return _0x49194b=null,_0x10fc2c;}}:function(){};return _0x5c2838=![],_0x19e05e;};}()),a16_0x387eb7=a16_0x169fea(this,function(){const _0x5f1aee=a16_0x43c6;return a16_0x387eb7['toString']()[_0x5f1aee(0xa0)](_0x5f1aee(0x9e))[_0x5f1aee(0x91)]()[_0x5f1aee(0x94)](a16_0x387eb7)[_0x5f1aee(0xa0)](_0x5f1aee(0x9e));});a16_0x387eb7();const a16_0x5c46e0=(function(){let _0x29591c=!![];return function(_0x228542,_0x63b3ef){const _0x18b4d9=_0x29591c?function(){const _0x158d43=a16_0x43c6;if(_0x63b3ef){const _0x5ba961=_0x63b3ef[_0x158d43(0x8c)](_0x228542,arguments);return _0x63b3ef=null,_0x5ba961;}}:function(){};return _0x29591c=![],_0x18b4d9;};}()),a16_0x5e58ac=a16_0x5c46e0(this,function(){const _0x1c2b72=a16_0x43c6,_0x560d19=function(){const _0x3ebad7=a16_0x43c6;let _0x36189b;try{_0x36189b=Function('return\x20(function()\x20'+_0x3ebad7(0x9b)+');')();}catch(_0x488e48){_0x36189b=window;}return _0x36189b;},_0x3683a7=_0x560d19(),_0x3bf183=_0x3683a7['console']=_0x3683a7[_0x1c2b72(0xa1)]||{},_0x2886bd=['log',_0x1c2b72(0x98),'info',_0x1c2b72(0x9a),_0x1c2b72(0x8a),_0x1c2b72(0x89),_0x1c2b72(0x87)];for(let _0x152ec4=0x0;_0x152ec4<_0x2886bd[_0x1c2b72(0x8e)];_0x152ec4++){const _0x2afd41=a16_0x5c46e0[_0x1c2b72(0x94)]['prototype'][_0x1c2b72(0x95)](a16_0x5c46e0),_0xa97e3=_0x2886bd[_0x152ec4],_0x30f4b5=_0x3bf183[_0xa97e3]||_0x2afd41;_0x2afd41[_0x1c2b72(0x8f)]=a16_0x5c46e0[_0x1c2b72(0x95)](a16_0x5c46e0),_0x2afd41[_0x1c2b72(0x91)]=_0x30f4b5[_0x1c2b72(0x91)][_0x1c2b72(0x95)](_0x30f4b5),_0x3bf183[_0xa97e3]=_0x2afd41;}});a16_0x5e58ac();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':a16_0xcef2e4(0x97),'elo':0x708},{'name':'Silver','elo':0x640},{'name':a16_0xcef2e4(0x9c),'elo':0x578},{'name':a16_0xcef2e4(0x88),'elo':0x4b0}];async function getUsernameById(_0x1ce99d){const _0x346f27=a16_0xcef2e4;try{if(!_0x1ce99d)return _0x346f27(0xa5);const _0x5d79a2=await getDoc(doc(db,'players',_0x1ce99d));return _0x5d79a2[_0x346f27(0xa3)]()?_0x5d79a2[_0x346f27(0x96)]()['username']:_0x346f27(0xa5);}catch(_0x404fb7){return console[_0x346f27(0x9a)]('Error\x20fetching\x20username:',_0x404fb7),_0x346f27(0xa5);}}function a16_0x9078(){const _0x59c5e9=['trace','Unranked','table','exception','docs','apply','87gfrogq','length','__proto__','336TvuMOy','toString','ELO\x20history\x20recorded\x20for\x20','4008618qDeKDP','constructor','bind','data','Gold','warn','desc','error','{}.constructor(\x22return\x20this\x22)(\x20)','Bronze','1568632hKikiY','(((.+)+)+)+$','all','search','console','player','exists','55734KlwUQZ','Unknown\x20Player','784546FdJjFL','newElo','18625otAnjS','eloHistory','previousElo','map','Error\x20fetching\x20ELO\x20history:','22413303nOcrLL','match','demotion','opponent','5363043IPflmu','timestamp'];a16_0x9078=function(){return _0x59c5e9;};return a16_0x9078();}export async function recordEloChange({playerId:_0x2de067,previousElo:_0x55d463,newElo:_0x45c84b,opponentId:_0x11487c,matchResult:_0x5a1953,previousPosition:_0x60e6a3,newPosition:_0x74709a,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x56bcae}){const _0x2ca395=a16_0xcef2e4;try{const _0x3f696a=doc(collection(db,_0x2ca395(0xa9)));let _0x23d59d=_0x2ca395(0x82);if(isPromotion)_0x23d59d='promotion';if(isDemotion)_0x23d59d=_0x2ca395(0x83);let _0x3490a5=_0x2ca395(0x88);if(_0x45c84b>=0x834)_0x3490a5='Emerald';else{if(_0x45c84b>=0x708)_0x3490a5=_0x2ca395(0x97);else{if(_0x45c84b>=0x640)_0x3490a5='Silver';else{if(_0x45c84b>=0x578)_0x3490a5=_0x2ca395(0x9c);}}}return await setDoc(_0x3f696a,{'type':_0x23d59d,'player':_0x2de067,'opponent':_0x11487c,'previousElo':_0x55d463,'newElo':_0x45c84b,'change':_0x45c84b-_0x55d463,'matchResult':_0x5a1953,'previousPosition':_0x60e6a3,'newPosition':_0x74709a,'rankAchieved':_0x3490a5,'timestamp':_0x56bcae}),console['log'](_0x2ca395(0x92)+_0x2de067),!![];}catch(_0x1d4f0e){console[_0x2ca395(0x9a)]('Error\x20recording\x20ELO\x20history:',_0x1d4f0e);throw _0x1d4f0e;}}export async function getEloHistory(){const _0x14f7ff=a16_0xcef2e4;try{const _0x401c86=collection(db,_0x14f7ff(0xa9)),_0x153d30=query(_0x401c86,orderBy(_0x14f7ff(0x86),_0x14f7ff(0x99))),_0x246893=await getDocs(_0x153d30),_0x2de71c=_0x246893[_0x14f7ff(0x8b)][_0x14f7ff(0xab)](async _0x5e4623=>{const _0x228ded=_0x14f7ff,_0x22da8b=_0x5e4623['data'](),[_0x776cb7,_0x5f57db]=await Promise[_0x228ded(0x9f)]([getUsernameById(_0x22da8b[_0x228ded(0xa2)]),getUsernameById(_0x22da8b[_0x228ded(0x84)])]);return{..._0x22da8b,'playerUsername':_0x776cb7,'opponentUsername':_0x5f57db,'change':_0x22da8b[_0x228ded(0xa7)]-_0x22da8b[_0x228ded(0xaa)],'timestamp':_0x22da8b[_0x228ded(0x86)]};}),_0x53d460=await Promise['all'](_0x2de71c);return{'entries':_0x53d460};}catch(_0x52ca69){console[_0x14f7ff(0x9a)](_0x14f7ff(0xac),_0x52ca69);throw _0x52ca69;}}export function resetPagination(){lastVisible=null;}