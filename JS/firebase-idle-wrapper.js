const a19_0x585698=a19_0x8af3,a19_0xa550c2=(function(){let _0xf0d6d1=!![];return function(_0x3a6776,_0xcf2fd8){const _0x159e60=_0xf0d6d1?function(){if(_0xcf2fd8){const _0x32511d=_0xcf2fd8['apply'](_0x3a6776,arguments);return _0xcf2fd8=null,_0x32511d;}}:function(){};return _0xf0d6d1=![],_0x159e60;};}()),a19_0x445042=a19_0xa550c2(this,function(){const _0x2c194f=a19_0x8af3;let _0x454b97;try{const _0x459bd7=Function('return\x20(function()\x20'+_0x2c194f(0xda)+');');_0x454b97=_0x459bd7();}catch(_0x12fa75){_0x454b97=window;}const _0x2fabce=_0x454b97['console']=_0x454b97['console']||{},_0xcb37b1=[_0x2c194f(0x10a),_0x2c194f(0xea),_0x2c194f(0xfe),'error','exception','table',_0x2c194f(0xe3)];for(let _0x385922=0x0;_0x385922<_0xcb37b1[_0x2c194f(0xfc)];_0x385922++){const _0xa4b025=a19_0xa550c2['constructor'][_0x2c194f(0xe7)]['bind'](a19_0xa550c2),_0x5ebd48=_0xcb37b1[_0x385922],_0xa9d6f4=_0x2fabce[_0x5ebd48]||_0xa4b025;_0xa4b025[_0x2c194f(0xf2)]=a19_0xa550c2['bind'](a19_0xa550c2),_0xa4b025['toString']=_0xa9d6f4[_0x2c194f(0xfb)][_0x2c194f(0x107)](_0xa9d6f4),_0x2fabce[_0x5ebd48]=_0xa4b025;}});a19_0x445042();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x229ec4=a19_0x8af3;this[_0x229ec4(0xee)]=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this[_0x229ec4(0x108)]=0x0,this['debug']=![];}['checkSessionActive'](){const _0x4c24ed=a19_0x8af3;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this[_0x4c24ed(0x108)]%0xa===0x0&&console['warn'](_0x4c24ed(0xf4)+this['blockedOperations']+_0x4c24ed(0x106)),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x1f0384,_0x4727fc,..._0x33c547){const _0x584cae=a19_0x8af3;if(!this['checkSessionActive']()){const _0x383127=_0x4727fc+'-'+Date[_0x584cae(0xf6)]()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations'][_0x584cae(0xd6)](_0x383127,{'operation':_0x1f0384,'operationType':_0x4727fc,'args':_0x33c547}),!this[_0x584cae(0x109)]&&(this['pendingTimeout']=setTimeout(()=>{const _0xdacd97=_0x584cae;this['pendingOperations']['clear'](),this[_0xdacd97(0x109)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x1f0384(..._0x33c547);}catch(_0x13be6e){if(_0x13be6e['code']==='unavailable'||_0x13be6e['code']==='resource-exhausted'||_0x13be6e['message']&&_0x13be6e['message'][_0x584cae(0xf8)]('network'))return handleNetworkError(),null;throw _0x13be6e;}}async['getDocument'](_0x5cd14d){return this['safeOperation'](getDoc,'get',_0x5cd14d);}async[a19_0x585698(0xe2)](_0x50ae5c){return this['safeOperation'](getDocs,'query',_0x50ae5c);}async['addDocument'](_0x283970,_0x453f66){return this['safeOperation'](addDoc,'add',_0x283970,_0x453f66);}async['setDocument'](_0x415a86,_0x401e92,_0x3bae78={}){const _0x5841c9=a19_0x585698;return this[_0x5841c9(0xe0)](setDoc,'set',_0x415a86,_0x401e92,_0x3bae78);}async['updateDocument'](_0x287af4,_0x3d77aa){const _0x40cfe6=a19_0x585698;return this[_0x40cfe6(0xe0)](updateDoc,_0x40cfe6(0xf5),_0x287af4,_0x3d77aa);}async[a19_0x585698(0xd9)](_0x3e0979){return this['safeOperation'](deleteDoc,'delete',_0x3e0979);}['suspendAllListeners'](){const _0x1e3a68=a19_0x585698;console[_0x1e3a68(0x10a)]('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners']['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this['activeListeners']['forEach']((_0x4f8c08,_0x227ead)=>{const _0x3e95b3=_0x1e3a68;console[_0x3e95b3(0x10a)](_0x3e95b3(0xe1),_0x227ead);if(typeof _0x4f8c08==='function')try{_0x4f8c08(),console[_0x3e95b3(0x10a)](_0x3e95b3(0xff),_0x227ead);}catch(_0x17077d){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x227ead,_0x17077d);}}),this[_0x1e3a68(0xee)]['clear']();if(this['debug']){const _0x2907a6=document['createElement'](_0x1e3a68(0xe9));_0x2907a6['id']=_0x1e3a68(0x105),_0x2907a6[_0x1e3a68(0xde)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2907a6['textContent']='Firebase:\x20Suspended',document['body']['appendChild'](_0x2907a6);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x35a81e=a19_0x585698;if(!this['_suspendedListeners']||this['_suspendedListeners'][_0x35a81e(0xe6)]===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log'](_0x35a81e(0xe8),this['_suspendedListeners']['size']),this[_0x35a81e(0x101)]['forEach']((_0x170cfc,_0xf8f2a5)=>{const _0x4f4457=_0x35a81e;console[_0x4f4457(0x10a)]('[FirebaseIdle]\x20Resuming\x20listener:',_0xf8f2a5);try{if(typeof _0x170cfc==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0xf8f2a5);return;}const {query:_0x548489,callback:_0xcfcba9,options:_0x24bbaa}=_0x170cfc;if(_0x548489&&_0xcfcba9){const _0x40ca98=onSnapshot(_0x548489,_0xcfcba9,_0x24bbaa||{});this['activeListeners'][_0x4f4457(0xd6)](_0xf8f2a5,_0x40ca98),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0xf8f2a5);}}catch(_0x1ee491){console[_0x4f4457(0x102)]('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0xf8f2a5,_0x1ee491);}}),this[_0x35a81e(0x101)][_0x35a81e(0xf1)]();const _0x561a75=document['getElementById'](_0x35a81e(0x105));_0x561a75&&_0x561a75[_0x35a81e(0xec)](),console['log'](_0x35a81e(0x10b));}['createListener'](_0x2a495e,_0x224e6f,_0x4a7047={},_0x2097dd=null){const _0x3a250a=a19_0x585698,_0x97dec4=_0x2097dd||_0x3a250a(0xfd)+Date['now']()+'_'+Math[_0x3a250a(0xeb)]()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x97dec4);if(!this['checkSessionActive']())return console[_0x3a250a(0x10a)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x97dec4),()=>{};try{const _0x2e7280=onSnapshot(_0x2a495e,_0x224e6f,_0x4a7047);return this['activeListeners']['set'](_0x97dec4,{'unsubscribe':_0x2e7280,'query':_0x2a495e,'callback':_0x224e6f,'options':_0x4a7047}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x97dec4),console['log'](_0x3a250a(0xfa)+this['activeListeners']['size'])),()=>{const _0x1ccbca=_0x3a250a;this['debug']&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x97dec4);try{_0x2e7280(),this['activeListeners']['delete'](_0x97dec4),this[_0x1ccbca(0xd8)]&&(console[_0x1ccbca(0x10a)]('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x97dec4),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x8ccc54){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x97dec4+':',_0x8ccc54);}};}catch(_0x3db688){return console['error'](_0x3a250a(0xed)+_0x97dec4+':',_0x3db688),()=>{};}}[a19_0x585698(0xf0)](_0x37c282='all'){const _0x271691=a19_0x585698;console[_0x271691(0x10a)](_0x271691(0xef)+_0x37c282+_0x271691(0xf9)+this[_0x271691(0xdd)][_0x271691(0xe6)]+'\x20total\x20operations');const _0x41f16e=new Map(this[_0x271691(0xdd)]);this[_0x271691(0xdd)][_0x271691(0xf1)](),_0x41f16e['forEach']((_0x295226,_0x41cedb)=>{const _0x3adb6e=_0x271691;_0x37c282===_0x3adb6e(0xdc)||_0x295226['operationType']===_0x37c282?(console['log']('Executing\x20delayed\x20'+_0x295226['operationType']+_0x3adb6e(0x103)),this['safeOperation'](_0x295226[_0x3adb6e(0xf3)],_0x295226['operationType'],..._0x295226[_0x3adb6e(0x104)])[_0x3adb6e(0xd7)](_0x5a6bca=>console[_0x3adb6e(0x102)]('Error\x20executing\x20pending\x20operation:',_0x5a6bca))):this['pendingOperations']['set'](_0x41cedb,_0x295226);});}['enableDebug'](_0x307238=!![]){const _0xc95c45=a19_0x585698;this['debug']=_0x307238,console[_0xc95c45(0x10a)]('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x307238?'enabled':'disabled'));if(_0x307238){const _0xb4dc36=window[_0xc95c45(0x100)];window[_0xc95c45(0x100)]=!![],console['log'](_0xc95c45(0xf7)),this[_0xc95c45(0xdb)](doc(db,_0xc95c45(0xe5),'test'))[_0xc95c45(0xdf)](_0x214462=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x214462);})['catch'](_0xda4d5b=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0xda4d5b);})['finally'](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0xb4dc36;});}}}const firebaseIdle=new FirebaseIdleWrapper();function a19_0x8af3(_0x44d59e,_0xad435f){const _0x445042=a19_0x4e64();return a19_0x8af3=function(_0xa550c2,_0xc61856){_0xa550c2=_0xa550c2-0xd6;let _0x4e64ae=_0x445042[_0xa550c2];return _0x4e64ae;},a19_0x8af3(_0x44d59e,_0xad435f);}export function enhanceIdleTimeout(){const _0x5b31a2=window['suspendSession']||function(){},_0x33092e=window['resumeSession']||function(){};window['suspendSession']=function(){_0x5b31a2(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){const _0x561f31=a19_0x8af3;_0x33092e(),firebaseIdle[_0x561f31(0xe4)]();};}function a19_0x4e64(){const _0x4be035=['set','catch','debug','deleteDocument','{}.constructor(\x22return\x20this\x22)(\x20)','getDocument','all','pendingOperations','style','then','safeOperation','[FirebaseIdle]\x20Suspending\x20listener:','getDocuments','trace','resumeAllListeners','system','size','prototype','[FirebaseIdle]\x20Resuming\x20listeners:','div','warn','random','remove','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','activeListeners','Executing\x20pending\x20','executePendingOperations','clear','__proto__','operation','[FirebaseIdle]\x20Blocked\x20','update','now','[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...','includes','\x20operations:\x20','[FirebaseIdle]\x20Active\x20listeners:\x20','toString','length','listener_','info','[FirebaseIdle]\x20Successfully\x20suspended\x20listener:','RDL_SESSION_SUSPENDED','_suspendedListeners','error','\x20operation','args','firebase-suspend-indicator','\x20operations\x20during\x20idle\x20state','bind','blockedOperations','pendingTimeout','log','[FirebaseIdle]\x20Listeners\x20resumed'];a19_0x4e64=function(){return _0x4be035;};return a19_0x4e64();}export default firebaseIdle;