const a48_0x350f08=a48_0x475d,a48_0x5c097f=(function(){let _0x1c3e80=!![];return function(_0x5bdb58,_0x43dbe8){const _0x43e60c=_0x1c3e80?function(){const _0x1274a7=a48_0x475d;if(_0x43dbe8){const _0x5f4bf5=_0x43dbe8[_0x1274a7(0x191)](_0x5bdb58,arguments);return _0x43dbe8=null,_0x5f4bf5;}}:function(){};return _0x1c3e80=![],_0x43e60c;};}()),a48_0x1aa605=a48_0x5c097f(this,function(){const _0x4aa15c=a48_0x475d;let _0x4a3625;try{const _0x341216=Function('return\x20(function()\x20'+_0x4aa15c(0x19a)+');');_0x4a3625=_0x341216();}catch(_0x4bd4eb){_0x4a3625=window;}const _0x12d1fb=_0x4a3625[_0x4aa15c(0x1a7)]=_0x4a3625['console']||{},_0x230419=['log','warn',_0x4aa15c(0x197),'error','exception','table','trace'];for(let _0x107844=0x0;_0x107844<_0x230419['length'];_0x107844++){const _0x5f2369=a48_0x5c097f[_0x4aa15c(0x181)][_0x4aa15c(0x177)]['bind'](a48_0x5c097f),_0x1fd301=_0x230419[_0x107844],_0x5d2030=_0x12d1fb[_0x1fd301]||_0x5f2369;_0x5f2369['__proto__']=a48_0x5c097f['bind'](a48_0x5c097f),_0x5f2369[_0x4aa15c(0x184)]=_0x5d2030['toString']['bind'](_0x5d2030),_0x12d1fb[_0x1fd301]=_0x5f2369;}});a48_0x1aa605();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':a48_0x350f08(0x1b9),'description':a48_0x350f08(0x1a0)},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':a48_0x350f08(0x1a8),'description':'Only\x20the\x20best\x20get\x20this\x20one'},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':'You\x20can\x20see\x20better!'},'ocean':{'price':0x12c,'name':'Blue','description':a48_0x350f08(0x18a)},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'}};function a48_0x475d(_0x2fedd2,_0x5118b7){const _0x1aa605=a48_0x4858();return a48_0x475d=function(_0x5c097f,_0x25700c){_0x5c097f=_0x5c097f-0x177;let _0x485848=_0x1aa605[_0x5c097f];return _0x485848;},a48_0x475d(_0x2fedd2,_0x5118b7);}let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x412efb=a48_0x350f08;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document[_0x412efb(0x18d)]('store-content'),pointsDisplay=document['getElementById'](_0x412efb(0x188)),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function a48_0x4858(){const _0x85b97b=['prototype','Apply\x20Theme','0.7','\x20theme\x20applied!','entries','[data-theme]','createElement','switchTheme','apply-theme','\x20theme\x20for\x20','constructor','\x20points?','New\x20user\x20profile\x20created','toString','.theme-select-btn','transactions','\x20Theme','user-points','0.5','This\x20one\x20is\x20really\x20pretty','price','User\x20profile\x20not\x20found','getElementById','getCurrentTheme','isUserAdmin','‚úÖ\x20Purchased\x20','apply','itemId','You\x20already\x20own\x20the\x20','div','Sign\x20in\x20to\x20Apply','style','info','innerHTML','remove','{}.constructor(\x22return\x20this\x22)(\x20)','dataset','\x20Points','adminStatusChanged','Theme\x20clicked:\x20','currentUser','Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer',',\x20Inventory:\x20','opacity','\x20is\x20already\x20your\x20current\x20theme','includes','error','block','console','Gold','visible','inventory','\x20not\x20found','className','ThemeSystem','classList','length','default','name','confirm','none','forEach','theme','theme_','Buy','disabled','Classic\x20RDL','add','querySelector','appendChild'];a48_0x4858=function(){return _0x85b97b;};return a48_0x4858();}function initAuthListener(){onAuthStateChanged(auth,async _0x2f5c36=>{const _0x28984c=a48_0x475d;if(_0x2f5c36){console['log']('‚úÖ\x20User\x20authenticated:',_0x2f5c36['displayName']||_0x2f5c36['email']);if(authWarning)authWarning['style']['display']=_0x28984c(0x1b3);if(storeContainer)storeContainer['style']['display']=_0x28984c(0x1a6);await loadUserData(_0x2f5c36),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning[_0x28984c(0x196)]['display']='block';if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x28984c(0x18f)]=![];}});}async function loadUserData(_0x393cba){const _0x46527c=a48_0x350f08;try{const _0x4f7e5f=doc(db,'userProfiles',_0x393cba['uid']),_0x5521f8=await getDoc(_0x4f7e5f);if(_0x5521f8['exists']()){const _0x555753=_0x5521f8['data']();userData={'points':_0x555753['points']||0x0,'inventory':_0x555753['inventory']||[],'isAdmin':_0x555753['isAdmin']||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent(_0x46527c(0x19d),{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+_0x46527c(0x1a1)+userData['inventory'][_0x46527c(0x1af)]+'\x20items');}else await setDoc(_0x4f7e5f,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x393cba['displayName']||_0x393cba['email']?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window[_0x46527c(0x18f)]=![],console['log'](_0x46527c(0x183));}catch(_0x51c4c5){console[_0x46527c(0x1a5)]('Error\x20loading\x20user\x20data:',_0x51c4c5);}}function userOwnsTheme(_0x46cc8e){const _0x16be31=a48_0x350f08;if(THEMES[_0x46cc8e]?.['price']===0x0)return!![];return userData[_0x16be31(0x1aa)][_0x16be31(0x1a4)](_0x16be31(0x1b6)+_0x46cc8e);}async function purchaseTheme(_0x295d1f){const _0x339428=a48_0x350f08,_0x41f6d8=auth[_0x339428(0x19f)];if(!_0x41f6d8)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x200a83=THEMES[_0x295d1f];if(!_0x200a83)return console['error']('Theme\x20'+_0x295d1f+_0x339428(0x1ab)),![];if(userData['points']<_0x200a83['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x200a83['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x295d1f))return showMessage(_0x339428(0x193)+_0x200a83['name']+'\x20theme','info'),![];try{const _0xbfe2f9=doc(db,'userProfiles',_0x41f6d8['uid']),_0x477e29=await getDoc(_0xbfe2f9);if(!_0x477e29['exists']())return showMessage(_0x339428(0x18c),'error'),![];const _0x2a223c=_0x477e29['data'](),_0x5fa3e6=_0x2a223c['points']||0x0,_0x49f5b8=_0x2a223c['inventory']||[];if(_0x5fa3e6<_0x200a83[_0x339428(0x18b)])return showMessage('Insufficient\x20points',_0x339428(0x1a5)),![];if(_0x49f5b8[_0x339428(0x1a4)]('theme_'+_0x295d1f))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0x13fad1=_0x5fa3e6-_0x200a83['price'],_0x56b28b=[..._0x49f5b8,'theme_'+_0x295d1f];return await updateDoc(_0xbfe2f9,{'points':_0x13fad1,'inventory':_0x56b28b,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,_0x339428(0x186)),{'userId':_0x41f6d8['uid'],'userEmail':_0x41f6d8['email'],'itemId':'theme_'+_0x295d1f,'itemTitle':_0x200a83[_0x339428(0x1b1)]+_0x339428(0x187),'price':_0x200a83['price'],'type':'purchase','category':'theme','timestamp':serverTimestamp()}),userData['points']=_0x13fad1,userData['inventory']=_0x56b28b,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),console['log'](_0x339428(0x190)+_0x200a83['name']+_0x339428(0x180)+_0x200a83['price']+'\x20points'),!![];}catch(_0x42c4d4){return console['error']('Purchase\x20failed:',_0x42c4d4),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}function applyTheme(_0x5f2ad5){const _0x1dbf30=a48_0x350f08;if(!userOwnsTheme(_0x5f2ad5))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window['ThemeSystem']?(window[_0x1dbf30(0x1ad)][_0x1dbf30(0x17e)](_0x5f2ad5),showMessage((THEMES[_0x5f2ad5]?.['name']||_0x5f2ad5)+_0x1dbf30(0x17a),'success'),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0x221400=a48_0x350f08,_0x5d1fab=document[_0x221400(0x1bb)]('.themes-grid');if(!_0x5d1fab){console[_0x221400(0x1a5)]('Themes\x20container\x20not\x20found');return;}_0x5d1fab['innerHTML']='',Object[_0x221400(0x17b)](THEMES)['forEach'](([_0x54b687,_0x5d43a5])=>{const _0x62a6e8=_0x221400,_0x70f9dc=document['createElement']('div');_0x70f9dc['className']='store-item',_0x70f9dc['dataset']['theme']=_0x54b687,_0x70f9dc['dataset'][_0x62a6e8(0x192)]='theme_'+_0x54b687,_0x70f9dc['dataset']['price']=_0x5d43a5['price'],_0x70f9dc[_0x62a6e8(0x198)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x54b687+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x5d43a5['price']===0x0?'FREE':_0x5d43a5['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x5d43a5['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x5d43a5['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x5d1fab['appendChild'](_0x70f9dc);}),setupThemeButtons();}function setupThemeButtons(){const _0x19e027=a48_0x350f08,_0x2ce7d8=document['querySelectorAll'](_0x19e027(0x185));_0x2ce7d8[_0x19e027(0x1b4)](_0x1f2af3=>{_0x1f2af3['addEventListener']('click',async _0x28f854=>{const _0xa0409e=a48_0x475d;_0x28f854['preventDefault']();const _0x5b7375=auth[_0xa0409e(0x19f)];if(!_0x5b7375){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x2722c7=_0x1f2af3['closest']('[data-theme]'),_0x43a8e9=_0x2722c7[_0xa0409e(0x19b)][_0xa0409e(0x1b5)],_0x3feff7=THEMES[_0x43a8e9];if(!_0x3feff7){console[_0xa0409e(0x1a5)]('Theme\x20'+_0x43a8e9+'\x20not\x20found');return;}console['log'](_0xa0409e(0x19e)+_0x3feff7[_0xa0409e(0x1b1)]+'\x20('+_0x43a8e9+')');if(_0x1f2af3['disabled']){_0x3feff7['price']>0x0&&showMessage('You\x20need\x20'+_0x3feff7['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x1f2af3['textContent']==='Current\x20Theme'){showMessage(_0x3feff7['name']+_0xa0409e(0x1a3),_0xa0409e(0x197));return;}if(_0x1f2af3['textContent']===_0xa0409e(0x178)){applyTheme(_0x43a8e9),updateThemeButtons();return;}if(_0x1f2af3['textContent']['includes'](_0xa0409e(0x1b7))){const _0x49e955=window[_0xa0409e(0x1b2)]('Purchase\x20'+_0x3feff7[_0xa0409e(0x1b1)]+'\x20theme\x20for\x20'+_0x3feff7['price']+_0xa0409e(0x182));if(!_0x49e955)return;const _0x58959c=await purchaseTheme(_0x43a8e9);_0x58959c&&(showMessage(_0x3feff7['name']+'\x20theme\x20purchased!','success'),applyTheme(_0x43a8e9),updateThemeButtons());return;}userOwnsTheme(_0x43a8e9)?applyTheme(_0x43a8e9):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0xa0409e(0x1a5));});}),updateThemeButtons();}function updateThemeButtons(){const _0x1f5777=a48_0x350f08,_0xe46471=window[_0x1f5777(0x1ad)]?window['ThemeSystem'][_0x1f5777(0x18e)]():'default',_0x50da05=auth[_0x1f5777(0x19f)];document['querySelectorAll'](_0x1f5777(0x185))['forEach'](_0x2d25d1=>{const _0x1c1f32=_0x1f5777,_0x1789d2=_0x2d25d1['closest'](_0x1c1f32(0x17c)),_0x3e00ce=_0x1789d2[_0x1c1f32(0x19b)]['theme'],_0x987c00=THEMES[_0x3e00ce];if(!_0x987c00)return;_0x2d25d1['disabled']=![],_0x2d25d1['style'][_0x1c1f32(0x1a2)]='',_0x2d25d1['style']['cursor']='pointer',_0x2d25d1['classList'][_0x1c1f32(0x199)]('current-theme',_0x1c1f32(0x17f),'can-afford','cannot-afford','sign-in-free','sign-in-paid');if(!_0x50da05){_0x987c00['price']===0x0?(_0x2d25d1['textContent']=_0x1c1f32(0x195),_0x2d25d1['classList'][_0x1c1f32(0x1ba)]('sign-in-free')):(_0x2d25d1['textContent']='Sign\x20in\x20to\x20Purchase',_0x2d25d1['disabled']=!![],_0x2d25d1['style']['opacity']=_0x1c1f32(0x179),_0x2d25d1['classList']['add']('sign-in-paid'));return;}if(_0x3e00ce===_0xe46471){_0x2d25d1['textContent']='Current\x20Theme',_0x2d25d1['classList'][_0x1c1f32(0x1ba)]('current-theme'),_0x2d25d1['disabled']=!![],_0x2d25d1[_0x1c1f32(0x196)]['cursor']=_0x1c1f32(0x1b0);return;}if(userOwnsTheme(_0x3e00ce)){_0x2d25d1['textContent']='Apply\x20Theme',_0x2d25d1['classList']['add']('apply-theme');return;}if(userData['points']>=_0x987c00['price']){_0x2d25d1['textContent']='Buy\x20for\x20'+_0x987c00['price']+_0x1c1f32(0x19c),_0x2d25d1['classList'][_0x1c1f32(0x1ba)]('can-afford');return;}_0x2d25d1['textContent']='Need\x20'+_0x987c00['price']+_0x1c1f32(0x19c),_0x2d25d1[_0x1c1f32(0x1ae)][_0x1c1f32(0x1ba)]('cannot-afford'),_0x2d25d1[_0x1c1f32(0x196)][_0x1c1f32(0x1a2)]=_0x1c1f32(0x189),_0x2d25d1[_0x1c1f32(0x1b8)]=!![],_0x2d25d1['style']['cursor']='not-allowed';});}function showMessage(_0x499df7,_0x322df6='info'){const _0x2cb165=a48_0x350f08,_0x23420e=document['getElementById']('store-message');_0x23420e&&_0x23420e['remove']();const _0x3b009f=document[_0x2cb165(0x17d)](_0x2cb165(0x194));_0x3b009f['id']='store-message',_0x3b009f[_0x2cb165(0x1ac)]='store-message\x20store-message-'+_0x322df6,_0x3b009f['textContent']=_0x499df7,document['body'][_0x2cb165(0x1bc)](_0x3b009f),requestAnimationFrame(()=>{const _0x4dbe7e=_0x2cb165;_0x3b009f['classList']['add'](_0x4dbe7e(0x1a9));}),setTimeout(()=>{const _0x536f5d=_0x2cb165;_0x3b009f[_0x536f5d(0x1ae)]['remove'](_0x536f5d(0x1a9)),setTimeout(()=>{_0x3b009f['parentNode']&&_0x3b009f['remove']();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log']('üè™\x20Redeem\x20store\x20loaded');