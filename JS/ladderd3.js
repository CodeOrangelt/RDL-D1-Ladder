const a35_0x1bc72d=a35_0x3772,a35_0x279de4=(function(){let _0x5da33d=!![];return function(_0x23e68e,_0x489da2){const _0x4f2dd1=_0x5da33d?function(){const _0x270902=a35_0x3772;if(_0x489da2){const _0x499e65=_0x489da2[_0x270902(0x233)](_0x23e68e,arguments);return _0x489da2=null,_0x499e65;}}:function(){};return _0x5da33d=![],_0x4f2dd1;};}()),a35_0x4fba36=a35_0x279de4(this,function(){const _0x4baabb=a35_0x3772,_0x593337=function(){const _0xf2ac90=a35_0x3772;let _0x16c1c4;try{_0x16c1c4=Function(_0xf2ac90(0x22e)+_0xf2ac90(0x1dd)+');')();}catch(_0x3b31b2){_0x16c1c4=window;}return _0x16c1c4;},_0x5d6460=_0x593337(),_0x57b27c=_0x5d6460[_0x4baabb(0x1c7)]=_0x5d6460[_0x4baabb(0x1c7)]||{},_0x49ab2d=[_0x4baabb(0x201),_0x4baabb(0x1d1),_0x4baabb(0x23a),_0x4baabb(0x1d4),_0x4baabb(0x20b),_0x4baabb(0x1d0),_0x4baabb(0x1f1)];for(let _0x4d8dca=0x0;_0x4d8dca<_0x49ab2d[_0x4baabb(0x1d6)];_0x4d8dca++){const _0x4a4aef=a35_0x279de4[_0x4baabb(0x240)][_0x4baabb(0x1bf)][_0x4baabb(0x23c)](a35_0x279de4),_0x392857=_0x49ab2d[_0x4d8dca],_0x2c3a50=_0x57b27c[_0x392857]||_0x4a4aef;_0x4a4aef[_0x4baabb(0x251)]=a35_0x279de4[_0x4baabb(0x23c)](a35_0x279de4),_0x4a4aef[_0x4baabb(0x1fb)]=_0x2c3a50[_0x4baabb(0x1fb)][_0x4baabb(0x23c)](_0x2c3a50),_0x57b27c[_0x392857]=_0x4a4aef;}});a35_0x4fba36();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a35_0x182b18 from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const styleEl=document[a35_0x1bc72d(0x220)](a35_0x1bc72d(0x1d7));styleEl[a35_0x1bc72d(0x1ef)]=a35_0x1bc72d(0x228),document[a35_0x1bc72d(0x1e5)][a35_0x1bc72d(0x237)](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},profileCacheD3={'data':null,'timestamp':0x0},matchStatsCacheD3={'data':null,'timestamp':0x0},eloHistoryCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x5*0x3c*0x3e8,PROFILE_CACHE_DURATION=0xa*0x3c*0x3e8,MATCH_STATS_CACHE_DURATION=0x3*0x3c*0x3e8,ELO_HISTORY_CACHE_DURATION=0x2*0x3c*0x3e8;async function loadLadderDataOptimizedD3(_0xf601af=![]){const _0x49ed57=a35_0x1bc72d,_0x455d8d=Date[_0x49ed57(0x22c)]();if(!_0xf601af&&playerCacheD3[_0x49ed57(0x250)]&&_0x455d8d-playerCacheD3[_0x49ed57(0x217)]<CACHE_DURATION){console[_0x49ed57(0x201)](_0x49ed57(0x1d2));const _0x418c22=playerCacheD3[_0x49ed57(0x250)][_0x49ed57(0x224)](_0x5f4614=>_0x5f4614[_0x49ed57(0x1e0)]),_0x5d8b47=await fetchBatchMatchStatsD3(_0x418c22);return{'players':playerCacheD3[_0x49ed57(0x250)],'matchStatsBatch':_0x5d8b47};}const [_0xfcf29f,_0x4870db]=await Promise[_0x49ed57(0x202)]([getDocs(collection(db,_0x49ed57(0x1ff))),getDocs(collection(db,_0x49ed57(0x1c6)))]),_0x1cbde6=[];_0xfcf29f[_0x49ed57(0x1eb)](_0x4267fa=>{const _0xa05d38=_0x49ed57,_0x4fd42a=_0x4267fa[_0xa05d38(0x250)]();_0x4fd42a[_0xa05d38(0x1e0)]&&_0x1cbde6[_0xa05d38(0x21d)]({..._0x4fd42a,'id':_0x4267fa['id'],'elo':_0x4fd42a[_0xa05d38(0x1d8)]||0x0,'position':_0x4fd42a[_0xa05d38(0x1e4)]||Number[_0xa05d38(0x1c3)]});});const _0x1d0867=new Map();_0x4870db[_0x49ed57(0x1eb)](_0x317104=>{const _0x122d88=_0x49ed57,_0x25140b=_0x317104[_0x122d88(0x250)]();_0x25140b[_0x122d88(0x1e0)]&&_0x1d0867[_0x122d88(0x1f8)](_0x25140b[_0x122d88(0x1e0)][_0x122d88(0x1ec)](),_0x25140b);});for(const _0x37b04d of _0x1cbde6){const _0x42165a=_0x37b04d[_0x49ed57(0x1e0)][_0x49ed57(0x1ec)]();if(_0x1d0867[_0x49ed57(0x1e6)](_0x42165a)){const _0x45fbe5=_0x1d0867[_0x49ed57(0x24b)](_0x42165a);_0x45fbe5[_0x49ed57(0x20e)]&&(_0x37b04d[_0x49ed57(0x20e)]=_0x45fbe5[_0x49ed57(0x20e)][_0x49ed57(0x1ec)]()),_0x37b04d[_0x49ed57(0x1f4)]=_0x45fbe5[_0x49ed57(0x1f4)]||0x0;}else _0x37b04d[_0x49ed57(0x1f4)]=0x0;}const _0x45cbb7=_0x1cbde6[_0x49ed57(0x224)](_0x390b34=>_0x390b34[_0x49ed57(0x1e0)]),_0x186f56=await fetchBatchMatchStatsD3(_0x45cbb7);return _0x1cbde6[_0x49ed57(0x23e)]((_0x1a224f,_0x1d5cd6)=>{const _0x4c16f6=_0x49ed57,_0x4c537d=_0x186f56[_0x4c16f6(0x24b)](_0x1a224f[_0x4c16f6(0x1e0)])?.[_0x4c16f6(0x1dc)]||0x0,_0x2fb230=_0x186f56[_0x4c16f6(0x24b)](_0x1d5cd6[_0x4c16f6(0x1e0)])?.[_0x4c16f6(0x1dc)]||0x0;if(_0x4c537d===0x0!==(_0x2fb230===0x0))return _0x4c537d===0x0?0x1:-0x1;return(_0x1a224f[_0x4c16f6(0x1e4)]||0x3e7)-(_0x1d5cd6[_0x4c16f6(0x1e4)]||0x3e7);}),_0x1cbde6[_0x49ed57(0x1eb)]((_0x166da2,_0x13f31b)=>{const _0x17eacb=_0x49ed57;_0x166da2[_0x17eacb(0x1e4)]=_0x13f31b+0x1;}),playerCacheD3[_0x49ed57(0x250)]=_0x1cbde6,playerCacheD3[_0x49ed57(0x217)]=_0x455d8d,{'players':_0x1cbde6,'matchStatsBatch':_0x186f56};}async function displayLadderD3(_0x5da062=![]){const _0x347f3f=a35_0x1bc72d,_0x470189=document[_0x347f3f(0x205)](_0x347f3f(0x204));if(!_0x470189){console[_0x347f3f(0x1d4)](_0x347f3f(0x1c5));return;}_0x470189[_0x347f3f(0x213)]=_0x347f3f(0x245);try{const {players:_0x3dae71,matchStatsBatch:_0x42c483}=await loadLadderDataOptimizedD3(_0x5da062);await updateLadderDisplayD3(_0x3dae71,_0x42c483);}catch(_0x2ad20d){console[_0x347f3f(0x1d4)](_0x347f3f(0x22d),_0x2ad20d),_0x470189[_0x347f3f(0x213)]=_0x347f3f(0x1e9)+_0x2ad20d[_0x347f3f(0x215)]+_0x347f3f(0x1cf);}}function calculateStreakDays(_0x3a25b2){const _0x12ae3d=a35_0x1bc72d;if(!_0x3a25b2)return 0x0;const _0x407f9a=_0x3a25b2[_0x12ae3d(0x229)](),_0x4854da=new Date(),_0x3b2294=Math[_0x12ae3d(0x236)](_0x4854da-_0x407f9a);return Math[_0x12ae3d(0x206)](_0x3b2294/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x5b2334,_0xefd30e){const _0x43319b=a35_0x1bc72d;try{const _0x500ea8=collection(db,_0x43319b(0x1ff)),_0x6ed8b6=await getDocs(_0x500ea8),_0x10bda5=[];_0x6ed8b6[_0x43319b(0x1eb)](_0x4b5862=>{const _0xd1e5e9=_0x43319b;_0x10bda5[_0xd1e5e9(0x21d)]({'id':_0x4b5862['id'],..._0x4b5862[_0xd1e5e9(0x250)]()});});const _0x80006=_0x10bda5[_0x43319b(0x244)](_0xfcea2a=>_0xfcea2a[_0x43319b(0x1e0)]===_0x5b2334),_0x3bb4d5=_0x10bda5[_0x43319b(0x244)](_0x328f0d=>_0x328f0d[_0x43319b(0x1e0)]===_0xefd30e);if(!_0x80006||!_0x3bb4d5){console[_0x43319b(0x1d4)](_0x43319b(0x1c8));return;}if(_0x80006[_0x43319b(0x1e4)]>_0x3bb4d5[_0x43319b(0x1e4)]){const _0x2fcb52=_0x3bb4d5[_0x43319b(0x1e4)];for(const _0x2b8614 of _0x10bda5){_0x2b8614[_0x43319b(0x1e4)]>=_0x3bb4d5[_0x43319b(0x1e4)]&&_0x2b8614[_0x43319b(0x1e4)]<_0x80006[_0x43319b(0x1e4)]&&_0x2b8614[_0x43319b(0x1e0)]!==_0x5b2334&&await updateDoc(doc(db,_0x43319b(0x1ff),_0x2b8614['id']),{'position':_0x2b8614[_0x43319b(0x1e4)]+0x1});}await updateDoc(doc(db,_0x43319b(0x1ff),_0x80006['id']),{'position':_0x2fcb52});if(_0x2fcb52===0x1){const _0x30969d=doc(db,_0x43319b(0x1ff),_0x80006['id']),_0x4de9be=await getDoc(_0x30969d);!_0x4de9be[_0x43319b(0x250)]()[_0x43319b(0x1df)]&&await updateDoc(_0x30969d,{'firstPlaceDate':Timestamp[_0x43319b(0x22c)]()});}if(_0x3bb4d5[_0x43319b(0x1e4)]===0x1){const _0x5aef3f=doc(db,_0x43319b(0x1ff),_0x3bb4d5['id']);await updateDoc(_0x5aef3f,{'firstPlaceDate':null});}playerCacheD3[_0x43319b(0x217)]=0x0;}}catch(_0x2a2f84){console[_0x43319b(0x1d4)](_0x43319b(0x243),_0x2a2f84);}}async function updateLadderDisplayD3(_0x52f25d,_0x3483db=null){const _0x2fd83f=a35_0x1bc72d,_0x5507ba=document[_0x2fd83f(0x205)](_0x2fd83f(0x204));if(!_0x5507ba){console[_0x2fd83f(0x1d4)](_0x2fd83f(0x1c5));return;}const _0x13d49a=document[_0x2fd83f(0x205)](_0x2fd83f(0x20f));_0x13d49a&&!_0x13d49a[_0x2fd83f(0x203)][_0x2fd83f(0x210)]&&(_0x13d49a[_0x2fd83f(0x213)]=_0x2fd83f(0x239),_0x13d49a[_0x2fd83f(0x203)][_0x2fd83f(0x210)]=_0x2fd83f(0x24e));_0x52f25d[_0x2fd83f(0x23e)]((_0x16f7a5,_0x5a9edc)=>_0x16f7a5[_0x2fd83f(0x1e4)]-_0x5a9edc[_0x2fd83f(0x1e4)]);if(!_0x3483db){const _0x5158e9=_0x52f25d[_0x2fd83f(0x224)](_0x1036a5=>_0x1036a5[_0x2fd83f(0x1e0)]);_0x3483db=await fetchBatchMatchStatsD3(_0x5158e9);}const _0x4a79b9=document[_0x2fd83f(0x24c)]();_0x52f25d[_0x2fd83f(0x1eb)](_0xe74c82=>{const _0x225e43=_0x2fd83f,_0x267cb3=_0x3483db[_0x225e43(0x24b)](_0xe74c82[_0x225e43(0x1e0)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0},_0x290670=document[_0x225e43(0x220)]('tr');_0x290670[_0x225e43(0x213)]=createPlayerRowD3(_0xe74c82,_0x267cb3,null),_0x4a79b9[_0x225e43(0x237)](_0x290670);});const _0x153bfa=document[_0x2fd83f(0x220)]('tr');_0x153bfa[_0x2fd83f(0x1d7)][_0x2fd83f(0x1cb)]=_0x2fd83f(0x222),_0x153bfa[_0x2fd83f(0x213)]=_0x2fd83f(0x226),_0x4a79b9[_0x2fd83f(0x237)](_0x153bfa),_0x5507ba[_0x2fd83f(0x213)]='',_0x5507ba[_0x2fd83f(0x237)](_0x4a79b9);const _0x520cbc=_0x52f25d[_0x2fd83f(0x224)](_0x5d49b3=>_0x5d49b3[_0x2fd83f(0x1e0)]);loadTokensAsyncD3(_0x5507ba,_0x52f25d,_0x3483db,_0x520cbc),loadEloChangesAsyncD3(_0x5507ba,_0x520cbc);}function a35_0x3716(){const _0x2a9371=['inline','prototype','gameMode','desc','string','MAX_SAFE_INTEGER','then','D3\x20Ladder\x20table\x20body\x20not\x20found','userProfiles','console','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list','change','winRate','height','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','table','warn','Using\x20cached\x20D3\x20ladder\x20data','includes','error','indexOf','length','style','eloRating','elo','.flag-placeholder','totalDeaths','totalMatches','{}.constructor(\x22return\x20this\x22)(\x20)','kda','firstPlaceDate','username','approvedMatchesD3','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22flag-placeholder\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22token-placeholder\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','eloHistory','position','head','has','.token-placeholder','#b9f1fc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x229\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20','#DC143C','forEach','toLowerCase','color','eloHistoryD3','textContent','catch','trace','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','equipped','points','td:nth-child(3)','tokenImage','toFixed','set','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','Error\x20loading\x20D3\x20tokens:','toString','loserScore','winnerUsername','#50C878','playersD3','wins','log','all','dataset','#ladder-d3\x20tbody','querySelector','ceil','D3:\x20Fallback\x20query\x20failed:','0.85em','bold','displayLadderD3\x20function\x20not\x20available','exception','seconds','fontWeight','country','#ladder-d3\x20thead\x20tr','initialized','tokenName','Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:','innerHTML','refreshLadderDisplayD3','message','.trend-indicator','timestamp','D3:\x20Error\x20fetching\x20ELO\x20history:','newElo','#FFD700','playerUsername','fontSize','push','winnerScore','</td>\x0a\x20\x20\x20\x20</tr>','createElement','<img\x20src=\x22../images/flags/','60px','losses','map','playerId','<td\x20colspan=\x229\x22></td>','<img\x20src=\x22','\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a','toDate','loserUsername','display','now','Error\x20loading\x20D3\x20ladder:','return\x20(function()\x20','size','totalKills','previousElo','#CD7F32','apply','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','abs','appendChild',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','info','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','bind','player','sort','(Equipped)','constructor','\x22\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','querySelectorAll','Error\x20updating\x20D3\x20player\x20positions:','find','<tr><td\x20colspan=\x229\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>','#4CAF50','\x22\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22','Error\x20updating\x20D3\x20ELO\x20changes:','function',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','get','createDocumentFragment','#F44336','true','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','data','__proto__'];a35_0x3716=function(){return _0x2a9371;};return a35_0x3716();}async function loadTokensAsyncD3(_0x383024,_0x4a95de,_0x475510,_0x28abc6){const _0x260c2b=a35_0x1bc72d;try{const _0x3b4b7c=await getTokensByUsernames(_0x28abc6);enhanceLadderWithTokensD3(_0x383024,_0x4a95de,_0x475510,_0x3b4b7c);}catch(_0x1851c){return console[_0x260c2b(0x1d4)](_0x260c2b(0x1fa),_0x1851c),new Map();}}function enhanceLadderWithTokensD3(_0x3fdb17,_0x25801a,_0x5537db,_0x410a6f){const _0x38af37=a35_0x1bc72d,_0x2d55ac=_0x3fdb17[_0x38af37(0x242)]('tr');_0x25801a[_0x38af37(0x1eb)]((_0x2d0f76,_0x390533)=>{const _0x408923=_0x38af37;if(_0x390533>=_0x2d55ac[_0x408923(0x1d6)])return;const _0x4a49c4=_0x2d55ac[_0x390533],_0x3691bd=_0x4a49c4[_0x408923(0x205)](_0x408923(0x1da)),_0x2549e9=_0x4a49c4[_0x408923(0x205)](_0x408923(0x1e7));_0x2d0f76[_0x408923(0x20e)]&&_0x3691bd&&(_0x3691bd[_0x408923(0x213)]=_0x408923(0x221)+_0x2d0f76[_0x408923(0x20e)][_0x408923(0x1ec)]()+_0x408923(0x24f)+_0x2d0f76[_0x408923(0x20e)]+_0x408923(0x241));const _0x1c3f16=_0x410a6f[_0x408923(0x24b)](_0x2d0f76[_0x408923(0x1e0)])||[],_0x1ad768=getPrimaryDisplayToken(_0x1c3f16);_0x1ad768&&_0x2549e9&&(_0x2549e9[_0x408923(0x213)]=_0x408923(0x227)+_0x1ad768[_0x408923(0x1f6)]+_0x408923(0x235)+_0x1ad768[_0x408923(0x211)]+_0x408923(0x247)+_0x1ad768[_0x408923(0x211)]+'\x20'+(_0x1ad768[_0x408923(0x1f3)]?_0x408923(0x23f):'')+_0x408923(0x1ce));});}function loadEloChangesAsyncD3(_0x4617b8,_0x25357b){const _0x572279=a35_0x1bc72d;getPlayersLastEloChangesD3(_0x25357b)[_0x572279(0x1c4)](_0x401fff=>{const _0x2fe26a=_0x572279,_0x1733a9=_0x4617b8[_0x2fe26a(0x242)]('tr');_0x401fff[_0x2fe26a(0x1eb)]((_0x36fb86,_0x23dc64)=>{const _0x208031=_0x2fe26a,_0xc87e92=_0x25357b[_0x208031(0x1d5)](_0x23dc64);if(_0xc87e92!==-0x1&&_0xc87e92<_0x1733a9[_0x208031(0x1d6)]&&_0x36fb86!==0x0){const _0x48153f=_0x1733a9[_0xc87e92],_0x1322cb=_0x48153f[_0x208031(0x205)](_0x208031(0x1f5));if(_0x1322cb){const _0x5d2d4b=_0x1322cb[_0x208031(0x205)](_0x208031(0x216));if(_0x5d2d4b){const _0x12f546=_0x36fb86>0x0?'+'+_0x36fb86:''+_0x36fb86;_0x5d2d4b[_0x208031(0x1ef)]=_0x12f546,_0x5d2d4b[_0x208031(0x1d7)][_0x208031(0x1ed)]=_0x36fb86>0x0?_0x208031(0x246):_0x208031(0x24d),_0x5d2d4b[_0x208031(0x1d7)][_0x208031(0x20d)]=_0x208031(0x209),_0x5d2d4b[_0x208031(0x1d7)][_0x208031(0x21c)]=_0x208031(0x208),_0x5d2d4b[_0x208031(0x1d7)][_0x208031(0x22b)]=_0x208031(0x1be);}}}});})[_0x572279(0x1f0)](_0x46e5fe=>console[_0x572279(0x1d4)](_0x572279(0x248),_0x46e5fe));}async function fetchBatchMatchStatsD3(_0x237155){const _0x456ede=a35_0x1bc72d,_0x5b038b=Date[_0x456ede(0x22c)]();if(matchStatsCacheD3[_0x456ede(0x250)]&&_0x5b038b-matchStatsCacheD3[_0x456ede(0x217)]<MATCH_STATS_CACHE_DURATION){const _0x4326fd=new Map();return _0x237155[_0x456ede(0x1eb)](_0x30ce71=>{const _0x15335e=_0x456ede;matchStatsCacheD3[_0x15335e(0x250)][_0x15335e(0x1e6)](_0x30ce71)?_0x4326fd[_0x15335e(0x1f8)](_0x30ce71,matchStatsCacheD3[_0x15335e(0x250)][_0x15335e(0x24b)](_0x30ce71)):_0x4326fd[_0x15335e(0x1f8)](_0x30ce71,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});}),_0x4326fd;}const _0x39355f=new Map();try{_0x237155[_0x456ede(0x1eb)](_0x35773c=>{const _0x494171=_0x456ede;_0x39355f[_0x494171(0x1f8)](_0x35773c,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x52f235=collection(db,_0x456ede(0x1e1)),_0x24abaa=await getDocs(_0x52f235);_0x24abaa[_0x456ede(0x1eb)](_0x2ae4ad=>{const _0xaafd3b=_0x456ede,_0x1fe95f=_0x2ae4ad[_0xaafd3b(0x250)](),_0x31d97e=_0x1fe95f[_0xaafd3b(0x1fd)],_0x42349d=_0x1fe95f[_0xaafd3b(0x22a)];if(_0x237155[_0xaafd3b(0x1d3)](_0x31d97e)){const _0x301120=_0x39355f[_0xaafd3b(0x24b)](_0x31d97e);_0x301120[_0xaafd3b(0x200)]++,_0x301120[_0xaafd3b(0x1dc)]++,_0x301120[_0xaafd3b(0x230)]+=parseInt(_0x1fe95f[_0xaafd3b(0x21e)])||0x0,_0x301120[_0xaafd3b(0x1db)]+=parseInt(_0x1fe95f[_0xaafd3b(0x1fc)])||0x0;}if(_0x237155[_0xaafd3b(0x1d3)](_0x42349d)){const _0x5862af=_0x39355f[_0xaafd3b(0x24b)](_0x42349d);_0x5862af[_0xaafd3b(0x223)]++,_0x5862af[_0xaafd3b(0x1dc)]++,_0x5862af[_0xaafd3b(0x230)]+=parseInt(_0x1fe95f[_0xaafd3b(0x1fc)])||0x0,_0x5862af[_0xaafd3b(0x1db)]+=parseInt(_0x1fe95f[_0xaafd3b(0x21e)])||0x0;}}),_0x237155[_0x456ede(0x1eb)](_0x409920=>{const _0x482670=_0x456ede,_0x3f855c=_0x39355f[_0x482670(0x24b)](_0x409920);_0x3f855c[_0x482670(0x1de)]=_0x3f855c[_0x482670(0x1db)]>0x0?(_0x3f855c[_0x482670(0x230)]/_0x3f855c[_0x482670(0x1db)])[_0x482670(0x1f7)](0x2):_0x3f855c[_0x482670(0x230)],_0x3f855c[_0x482670(0x1ca)]=_0x3f855c[_0x482670(0x1dc)]>0x0?(_0x3f855c[_0x482670(0x200)]/_0x3f855c[_0x482670(0x1dc)]*0x64)[_0x482670(0x1f7)](0x1):0x0;}),matchStatsCacheD3[_0x456ede(0x250)]=_0x39355f,matchStatsCacheD3[_0x456ede(0x217)]=_0x5b038b;}catch(_0x19f493){console[_0x456ede(0x1d4)](_0x456ede(0x212),_0x19f493);}return _0x39355f;}function createPlayerRowD3(_0xa0d1ba,_0x26869e,_0x274e8a){const _0x1c003e=a35_0x1bc72d,_0x12c1d9=parseFloat(_0xa0d1ba[_0x1c003e(0x1d9)])||0x0;let _0x16b8f2=_0x1c003e(0x1ea);if(_0x26869e[_0x1c003e(0x1dc)]===0x0)_0x16b8f2=_0x1c003e(0x1ea);else{if(_0x26869e[_0x1c003e(0x1dc)]>=0x5&&_0x12c1d9<0xc8)_0x16b8f2=_0x1c003e(0x232);else{if(_0x12c1d9>=0x3e8&&_0x26869e[_0x1c003e(0x1ca)]>=0x50&&_0x26869e[_0x1c003e(0x1dc)]>=0x14)_0x16b8f2=_0x1c003e(0x1fe);else{if(_0x12c1d9>=0x2bc)_0x16b8f2=_0x1c003e(0x21a);else{if(_0x12c1d9>=0x1f4)_0x16b8f2=_0x1c003e(0x1e8);else _0x12c1d9>=0xc8&&(_0x16b8f2=_0x1c003e(0x232));}}}}return _0x1c003e(0x1cc)+_0xa0d1ba[_0x1c003e(0x1e4)]+_0x1c003e(0x23b)+encodeURIComponent(_0xa0d1ba[_0x1c003e(0x1e0)])+_0x1c003e(0x1f9)+_0x16b8f2+_0x1c003e(0x238)+_0xa0d1ba[_0x1c003e(0x1e0)]+_0x1c003e(0x1e2)+_0x16b8f2+_0x1c003e(0x24a)+_0x12c1d9+_0x1c003e(0x1cd)+_0x26869e[_0x1c003e(0x1dc)]+_0x1c003e(0x234)+_0x26869e[_0x1c003e(0x200)]+_0x1c003e(0x234)+_0x26869e[_0x1c003e(0x223)]+_0x1c003e(0x234)+_0x26869e[_0x1c003e(0x1de)]+_0x1c003e(0x234)+_0x26869e[_0x1c003e(0x1ca)]+_0x1c003e(0x1f2)+(_0xa0d1ba[_0x1c003e(0x1f4)]||0x0)+_0x1c003e(0x21f);}async function getPlayersLastEloChangesD3(_0x54483f){const _0x5d1163=a35_0x1bc72d,_0x732d40=new Map();_0x54483f[_0x5d1163(0x1eb)](_0x50bebf=>_0x732d40[_0x5d1163(0x1f8)](_0x50bebf,0x0));try{const _0x2c85fc=new Map(),_0x2c4229=await getDocs(collection(db,_0x5d1163(0x1ff)));_0x2c4229[_0x5d1163(0x1eb)](_0x43e0eb=>{const _0xbcd71a=_0x5d1163,_0x553239=_0x43e0eb[_0xbcd71a(0x250)]();_0x553239[_0xbcd71a(0x1e0)]&&_0x2c85fc[_0xbcd71a(0x1f8)](_0x43e0eb['id'],_0x553239[_0xbcd71a(0x1e0)]);});const _0x2fb7ae=collection(db,_0x5d1163(0x1ee)),_0x57ec42=query(_0x2fb7ae,orderBy(_0x5d1163(0x217),_0x5d1163(0x1c1)),limit(0x64)),_0x4c2ef6=await getDocs(_0x57ec42),_0x4072a9=new Map();_0x4c2ef6[_0x5d1163(0x1eb)](_0xd874f5=>{const _0x2dea2f=_0x5d1163,_0x3b5d5c=_0xd874f5[_0x2dea2f(0x250)]();let _0x3238ed=null;if(_0x3b5d5c[_0x2dea2f(0x1e0)])_0x3238ed=_0x3b5d5c[_0x2dea2f(0x1e0)];else{if(_0x3b5d5c[_0x2dea2f(0x21b)])_0x3238ed=_0x3b5d5c[_0x2dea2f(0x21b)];else{if(_0x3b5d5c[_0x2dea2f(0x23d)]&&typeof _0x3b5d5c[_0x2dea2f(0x23d)]===_0x2dea2f(0x1c2))_0x3238ed=_0x3b5d5c[_0x2dea2f(0x23d)];else{if(_0x3b5d5c[_0x2dea2f(0x23d)]&&_0x2c85fc[_0x2dea2f(0x1e6)](_0x3b5d5c[_0x2dea2f(0x23d)]))_0x3238ed=_0x2c85fc[_0x2dea2f(0x24b)](_0x3b5d5c[_0x2dea2f(0x23d)]);else _0x3b5d5c[_0x2dea2f(0x225)]&&_0x2c85fc[_0x2dea2f(0x1e6)](_0x3b5d5c[_0x2dea2f(0x225)])&&(_0x3238ed=_0x2c85fc[_0x2dea2f(0x24b)](_0x3b5d5c[_0x2dea2f(0x225)]));}}}_0x3238ed&&_0x54483f[_0x2dea2f(0x1d3)](_0x3238ed)&&(!_0x4072a9[_0x2dea2f(0x1e6)](_0x3238ed)&&_0x4072a9[_0x2dea2f(0x1f8)](_0x3238ed,[]),_0x4072a9[_0x2dea2f(0x24b)](_0x3238ed)[_0x2dea2f(0x21d)]({..._0x3b5d5c,'timestamp':_0x3b5d5c[_0x2dea2f(0x217)]?.[_0x2dea2f(0x20c)]||0x0}));}),_0x4072a9[_0x5d1163(0x1eb)]((_0x5d5d48,_0x2d8dcd)=>{const _0x4981b1=_0x5d1163;if(_0x5d5d48[_0x4981b1(0x1d6)]>0x0){_0x5d5d48[_0x4981b1(0x23e)]((_0x426b43,_0x311fcd)=>_0x311fcd[_0x4981b1(0x217)]-_0x426b43[_0x4981b1(0x217)]);const _0x54760e=_0x5d5d48[_0x4981b1(0x244)](_0x29776f=>_0x29776f[_0x4981b1(0x1c9)]!==undefined||_0x29776f[_0x4981b1(0x219)]!==undefined&&_0x29776f[_0x4981b1(0x231)]!==undefined);if(_0x54760e){let _0x2a8fc8;if(_0x54760e[_0x4981b1(0x1c9)]!==undefined)_0x2a8fc8=_0x54760e[_0x4981b1(0x1c9)];else _0x54760e[_0x4981b1(0x219)]!==undefined&&_0x54760e[_0x4981b1(0x231)]!==undefined&&(_0x2a8fc8=_0x54760e[_0x4981b1(0x219)]-_0x54760e[_0x4981b1(0x231)]);_0x2a8fc8!==undefined&&_0x732d40[_0x4981b1(0x1f8)](_0x2d8dcd,_0x2a8fc8);}}});if(_0x4072a9[_0x5d1163(0x22f)]===0x0){const _0x528948=collection(db,_0x5d1163(0x1e3)),_0x430175=query(_0x528948,where(_0x5d1163(0x1c0),'==','D3'),orderBy(_0x5d1163(0x217),_0x5d1163(0x1c1)),limit(0x32));try{const _0x4a44f9=await getDocs(_0x430175);_0x4a44f9[_0x5d1163(0x1eb)](_0x46acf6=>{const _0x295767=_0x5d1163,_0x5f5519=_0x46acf6[_0x295767(0x250)]();let _0x150345=_0x5f5519[_0x295767(0x1e0)]||_0x5f5519[_0x295767(0x21b)];!_0x150345&&_0x5f5519[_0x295767(0x23d)]&&_0x2c85fc[_0x295767(0x1e6)](_0x5f5519[_0x295767(0x23d)])&&(_0x150345=_0x2c85fc[_0x295767(0x24b)](_0x5f5519[_0x295767(0x23d)]));if(_0x150345&&_0x54483f[_0x295767(0x1d3)](_0x150345)){const _0x4a1a46=_0x5f5519[_0x295767(0x1c9)]||(_0x5f5519[_0x295767(0x219)]!==undefined&&_0x5f5519[_0x295767(0x231)]!==undefined?_0x5f5519[_0x295767(0x219)]-_0x5f5519[_0x295767(0x231)]:0x0);_0x4a1a46!==0x0&&_0x732d40[_0x295767(0x1f8)](_0x150345,_0x4a1a46);}});}catch(_0x484072){console[_0x5d1163(0x1d4)](_0x5d1163(0x207),_0x484072);}}}catch(_0xbd4235){console[_0x5d1163(0x1d4)](_0x5d1163(0x218),_0xbd4235);}return _0x732d40;}function a35_0x3772(_0x31481a,_0x2d1680){_0x31481a=_0x31481a-0x1be;const _0x4fba36=a35_0x3716();let _0x279de4=_0x4fba36[_0x31481a];return _0x279de4;}window[a35_0x1bc72d(0x214)]=function(_0x1862c4=!![]){const _0x55c02d=a35_0x1bc72d;typeof displayLadderD3===_0x55c02d(0x249)?displayLadderD3(_0x1862c4):console[_0x55c02d(0x1d1)](_0x55c02d(0x20a));};export{displayLadderD3,updatePlayerPositions};