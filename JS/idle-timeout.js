function a22_0x25d5(_0x1817da,_0x5f594f){const _0x40bd61=a22_0x56d1();return a22_0x25d5=function(_0x5047b6,_0x3ec1ee){_0x5047b6=_0x5047b6-0x111;let _0x56d1ad=_0x40bd61[_0x5047b6];return _0x56d1ad;},a22_0x25d5(_0x1817da,_0x5f594f);}const a22_0x512537=a22_0x25d5;import a22_0x4517c8,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x6535ab=a22_0x25d5;if(document['getElementById']('idle-overlay'))return;const _0x4140b8=document['createElement']('div');_0x4140b8['id']=_0x6535ab(0x114),_0x4140b8[_0x6535ab(0x125)][_0x6535ab(0x138)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x17fc00=document[_0x6535ab(0x118)]('div');_0x17fc00['style']['cssText']=_0x6535ab(0x112);const _0x2ed15b=document['createElement']('h2');_0x2ed15b['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x2ed15b['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x9a506c=document['createElement']('p');_0x9a506c[_0x6535ab(0x139)]='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x9a506c['style'][_0x6535ab(0x138)]=_0x6535ab(0x126);const _0xa71eca=document[_0x6535ab(0x118)]('button');_0xa71eca['id']=_0x6535ab(0x116),_0xa71eca[_0x6535ab(0x139)]=_0x6535ab(0x146),_0xa71eca['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0xa71eca[_0x6535ab(0x12c)]=function(){const _0x347f75=_0x6535ab;this[_0x347f75(0x125)]['backgroundColor']='#3da05f';},_0xa71eca[_0x6535ab(0x11d)]=function(){this['style']['backgroundColor']='#50C878';},_0x17fc00['appendChild'](_0x2ed15b),_0x17fc00[_0x6535ab(0x147)](_0x9a506c),_0x17fc00['appendChild'](_0xa71eca),_0x4140b8['appendChild'](_0x17fc00),document[_0x6535ab(0x141)]['appendChild'](_0x4140b8),_0xa71eca['addEventListener'](_0x6535ab(0x13f),resumeSession),createNetworkErrorOverlay();}function a22_0x56d1(){const _0x59ac5e=['flex','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','length','idle-overlay','exception','resume-session-btn','size','createElement','Session\x20resumed','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','{}.constructor(\x22return\x20this\x22)(\x20)','includes','onmouseout','Session\x20suspended:','querySelector','RDL_LAST_ACTIVITY','network-error-overlay','prototype','mousedown','message','style','color:\x20#fff;\x20margin-bottom:\x2030px;','addEventListener','retry-connection-btn','blockedOperations','log','display','onmouseover','now','warn','color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','reload','Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.','#network-error-overlay\x20p','Failed\x20to\x20test\x20connection:','collection','info','code','Retrying\x20connection...','cssText','textContent','RDL_SESSION_SUSPENDED','loading','0.5','return\x20(function()\x20','not-allowed','click','resumeAllListeners','body','from','forceIdleTimeout','error','trace','Return\x20to\x20Website','appendChild','RDL_NETWORK_ERROR'];a22_0x56d1=function(){return _0x59ac5e;};return a22_0x56d1();}function createNetworkErrorOverlay(){const _0x182f1c=a22_0x25d5;if(document['getElementById']('network-error-overlay'))return;const _0x1c137b=document['createElement']('div');_0x1c137b['id']='network-error-overlay',_0x1c137b[_0x182f1c(0x125)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x329898=document[_0x182f1c(0x118)]('div');_0x329898['style']['cssText']=_0x182f1c(0x112);const _0x535489=document['createElement']('h2');_0x535489['textContent']='Connection\x20Error',_0x535489['style'][_0x182f1c(0x138)]=_0x182f1c(0x12f);const _0x24df06=document['createElement']('p');_0x24df06['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x24df06['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x20f7fc=document['createElement']('button');_0x20f7fc['id']='retry-connection-btn',_0x20f7fc['textContent']='Retry\x20Connection',_0x20f7fc[_0x182f1c(0x125)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x5df3cf=document['createElement']('button');_0x5df3cf['id']='reload-page-btn',_0x5df3cf['textContent']='Reload\x20Page',_0x5df3cf['style']['cssText']=_0x182f1c(0x11a);const _0x44dcb1=document[_0x182f1c(0x118)]('div');_0x44dcb1['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x44dcb1['appendChild'](_0x20f7fc),_0x44dcb1['appendChild'](_0x5df3cf),_0x329898['appendChild'](_0x535489),_0x329898['appendChild'](_0x24df06),_0x329898[_0x182f1c(0x147)](_0x44dcb1),_0x1c137b['appendChild'](_0x329898),document['body']['appendChild'](_0x1c137b),_0x20f7fc['addEventListener'](_0x182f1c(0x13f),retryConnection),_0x5df3cf['addEventListener']('click',()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x570bbb=a22_0x25d5;clearTimeout(idleTimer);const _0x46ea3e=document['getElementById'](_0x570bbb(0x121));_0x46ea3e&&(_0x46ea3e['style']['display']=_0x570bbb(0x111)),window[_0x570bbb(0x148)]=!![],console[_0x570bbb(0x12a)]('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x4517c8['suspendAllListeners']();}function retryConnection(){const _0x45552f=a22_0x25d5;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x68cbf=document[_0x45552f(0x11f)](_0x45552f(0x132));_0x68cbf&&(_0x68cbf['textContent']=_0x45552f(0x131));const _0x1d36a2=document['getElementById'](_0x45552f(0x128));_0x1d36a2&&(_0x1d36a2['disabled']=!![],_0x1d36a2['style']['opacity']=_0x45552f(0x13c),_0x1d36a2[_0x45552f(0x125)]['cursor']=_0x45552f(0x13e));return;}const _0x1b69b7=document['getElementById']('network-error-overlay');_0x1b69b7&&(_0x1b69b7[_0x45552f(0x125)][_0x45552f(0x12b)]='none');window[_0x45552f(0x148)]=![],resetIdleTimer(),console['log'](_0x45552f(0x137));try{const {rdlFirestore:_0x2aa14c}=window;if(_0x2aa14c){const _0x4149f7=_0x2aa14c[_0x45552f(0x134)]('system');_0x2aa14c['getDocs'](_0x4149f7)['catch'](_0x1eacde=>{const _0x359d25=_0x45552f;console[_0x359d25(0x144)]('Connection\x20test\x20failed:',_0x1eacde),handleNetworkError();});}}catch(_0xa0e8af){console['error'](_0x45552f(0x133),_0xa0e8af),handleNetworkError();}a22_0x4517c8[_0x45552f(0x140)]();}function suspendSession(){const _0x12296d=a22_0x25d5;isSessionSuspended=!![];const _0x59731e=document['getElementById']('idle-overlay');_0x59731e&&(_0x59731e['style']['display']='flex'),console[_0x12296d(0x12a)]('Session\x20suspended\x20due\x20to\x20inactivity'),window[_0x12296d(0x13a)]=!![],a22_0x4517c8['suspendAllListeners']();}function resumeSession(){const _0x50ed3d=a22_0x25d5;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x37a81a=document['getElementById']('idle-overlay');_0x37a81a&&(_0x37a81a[_0x50ed3d(0x125)][_0x50ed3d(0x12b)]='none'),console['log'](_0x50ed3d(0x119)),resetIdleTimer(),a22_0x4517c8[_0x50ed3d(0x140)](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location'][_0x50ed3d(0x130)]());}function initIdleTimeout(){const _0x4dc907=a22_0x25d5,_0x2447dc=(function(){let _0x90594a=!![];return function(_0x40f495,_0x22af48){const _0x282d1c=_0x90594a?function(){if(_0x22af48){const _0xda6719=_0x22af48['apply'](_0x40f495,arguments);return _0x22af48=null,_0xda6719;}}:function(){};return _0x90594a=![],_0x282d1c;};}()),_0x10dc7f=_0x2447dc(this,function(){const _0x43a21d=a22_0x25d5,_0x181b4c=function(){const _0x3711a3=a22_0x25d5;let _0x109433;try{_0x109433=Function(_0x3711a3(0x13d)+_0x3711a3(0x11b)+');')();}catch(_0x11f5fd){_0x109433=window;}return _0x109433;},_0x12f21d=_0x181b4c(),_0x1cd561=_0x12f21d['console']=_0x12f21d['console']||{},_0x35a754=['log',_0x43a21d(0x12e),_0x43a21d(0x135),'error',_0x43a21d(0x115),'table',_0x43a21d(0x145)];for(let _0x102977=0x0;_0x102977<_0x35a754[_0x43a21d(0x113)];_0x102977++){const _0x48226=_0x2447dc['constructor'][_0x43a21d(0x122)]['bind'](_0x2447dc),_0x2e9b30=_0x35a754[_0x102977],_0x46f03e=_0x1cd561[_0x2e9b30]||_0x48226;_0x48226['__proto__']=_0x2447dc['bind'](_0x2447dc),_0x48226['toString']=_0x46f03e['toString']['bind'](_0x46f03e),_0x1cd561[_0x2e9b30]=_0x48226;}});_0x10dc7f(),createIdleOverlay();const _0x48fe85=[_0x4dc907(0x123),'mousemove','keypress','scroll','touchstart',_0x4dc907(0x13f)];_0x48fe85['forEach'](_0x5cab5a=>{const _0x5d5fac=_0x4dc907;document[_0x5d5fac(0x127)](_0x5cab5a,()=>{const _0x5b6118=_0x5d5fac;window[_0x5b6118(0x120)]=Date[_0x5b6118(0x12d)](),resetIdleTimer();},!![]);}),window[_0x4dc907(0x127)]('error',function(_0x43bc5f){const _0x3b0413=_0x4dc907;_0x43bc5f['error']&&(_0x43bc5f['error']['message']&&_0x43bc5f[_0x3b0413(0x144)][_0x3b0413(0x124)]['includes']('network')||_0x43bc5f['error']['code']&&(_0x43bc5f[_0x3b0413(0x144)][_0x3b0413(0x136)]==='unavailable'||_0x43bc5f[_0x3b0413(0x144)]['code']==='resource-exhausted'||_0x43bc5f[_0x3b0413(0x144)][_0x3b0413(0x136)][_0x3b0413(0x11c)]('network')))&&(handleNetworkError(),_0x43bc5f['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x29b25a=_0x4dc907;return console['log'](_0x29b25a(0x11e),window['RDL_SESSION_SUSPENDED']),console['log']('Network\x20error:',window[_0x29b25a(0x148)]),console['log']('Active\x20listeners:',a22_0x4517c8['activeListeners']['size']),console[_0x29b25a(0x12a)]('Pending\x20operations:',a22_0x4517c8['pendingOperations'][_0x29b25a(0x117)]),console['log']('Blocked\x20operations:',a22_0x4517c8[_0x29b25a(0x129)]||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window[_0x29b25a(0x148)],'activeListeners':Array['from'](a22_0x4517c8['activeListeners']['keys']()),'pendingOperations':Array[_0x29b25a(0x142)](a22_0x4517c8['pendingOperations']['keys']()),'blockedCount':a22_0x4517c8['blockedOperations']||0x0};},window[_0x4dc907(0x143)]=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']===a22_0x512537(0x13b)?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();