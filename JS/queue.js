const a45_0x25e483=a45_0x2d9a,a45_0x4618f3=(function(){let _0x207a92=!![];return function(_0x3357a5,_0x14022a){const _0x2fcece=_0x207a92?function(){const _0x35d6d9=a45_0x2d9a;if(_0x14022a){const _0x295d2c=_0x14022a[_0x35d6d9(0xa1)](_0x3357a5,arguments);return _0x14022a=null,_0x295d2c;}}:function(){};return _0x207a92=![],_0x2fcece;};}()),a45_0x4bb8ea=a45_0x4618f3(this,function(){const _0x432d6c=a45_0x2d9a,_0x220870=function(){let _0x108d87;try{_0x108d87=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5990ca){_0x108d87=window;}return _0x108d87;},_0x360894=_0x220870(),_0x3e7d83=_0x360894['console']=_0x360894[_0x432d6c(0xa7)]||{},_0x27e04c=['log','warn','info','error','exception','table',_0x432d6c(0x99)];for(let _0x178b26=0x0;_0x178b26<_0x27e04c['length'];_0x178b26++){const _0x5b18e9=a45_0x4618f3[_0x432d6c(0x9e)]['prototype']['bind'](a45_0x4618f3),_0x23a4a3=_0x27e04c[_0x178b26],_0x177788=_0x3e7d83[_0x23a4a3]||_0x5b18e9;_0x5b18e9['__proto__']=a45_0x4618f3['bind'](a45_0x4618f3),_0x5b18e9['toString']=_0x177788['toString'][_0x432d6c(0xa6)](_0x177788),_0x3e7d83[_0x23a4a3]=_0x5b18e9;}});a45_0x4bb8ea();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a45_0x25e483(0xa3)),activePlayersQuery=query(readyPlayersRef,where(a45_0x25e483(0xa9),'==',!![]));function updateQueueDisplay(_0x16e508){const _0x40ff1b=a45_0x25e483,_0x2ce04f=document[_0x40ff1b(0xa5)]('queue-container');if(!_0x2ce04f)return;if(_0x16e508[_0x40ff1b(0xa8)]===0x0){_0x2ce04f['style']['display']='none';return;}_0x2ce04f['style']['display']='block';let _0x54747e=_0x40ff1b(0xa2);_0x16e508['forEach'](_0x454a2a=>{const _0x2c6a11=_0x40ff1b;_0x54747e+=_0x2c6a11(0x97)+(_0x454a2a[_0x2c6a11(0xa4)]||'Unknown\x20Player')+_0x2c6a11(0x9d)+formatQueueTime(_0x454a2a['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x54747e+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2ce04f['innerHTML']=_0x54747e;}function a45_0x2d9a(_0x70cfa5,_0x4e64ca){const _0x4bb8ea=a45_0x304b();return a45_0x2d9a=function(_0x4618f3,_0x400c84){_0x4618f3=_0x4618f3-0x97;let _0x304b2e=_0x4bb8ea[_0x4618f3];return _0x304b2e;},a45_0x2d9a(_0x70cfa5,_0x4e64ca);}function formatQueueTime(_0x529309){const _0x45fddf=a45_0x25e483;if(!_0x529309)return'Just\x20now';const _0x19a5e0=_0x529309[_0x45fddf(0xa0)]?_0x529309['toDate']():new Date(_0x529309),_0x5f59fe=new Date(),_0x171bd3=Math[_0x45fddf(0x9a)]((_0x5f59fe-_0x19a5e0)/0xea60);if(_0x171bd3<0x1)return'Just\x20now';return _0x171bd3+_0x45fddf(0x98);}async function checkQueueTimeout(_0x44b305){const _0x111bb9=a45_0x25e483;if(!_0x44b305[_0x111bb9(0x9b)])return;const _0x376891=_0x44b305['lastUpdated']['toDate']?_0x44b305['lastUpdated']['toDate']():new Date(_0x44b305['lastUpdated']),_0x3d8193=new Date(),_0x39f57b=Math['floor']((_0x3d8193-_0x376891)/0xea60);if(_0x39f57b>=0x1e)try{const _0x3e28b7=doc(db,'readyPlayers',_0x44b305['id']);await updateDoc(_0x3e28b7,{'isReady':![]});}catch(_0x3986bb){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x3986bb);}}function a45_0x304b(){const _0x5f1245=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','m\x20in\x20queue','trace','floor','lastUpdated','forEach','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>','constructor','Error\x20in\x20queue\x20listener:','toDate','apply','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','readyPlayers','username','getElementById','bind','console','length','isReady'];a45_0x304b=function(){return _0x5f1245;};return a45_0x304b();}const unsubscribe=onSnapshot(readyPlayersRef,_0x3bc6d8=>{const _0x1397fa=a45_0x25e483,_0x1de2df=[];_0x3bc6d8[_0x1397fa(0x9c)](_0x4c01ce=>{const _0x4d3fc6=_0x1397fa,_0x4b390b=_0x4c01ce['data']();if(_0x4b390b['isReady']===!![]){const _0x2c9274={'id':_0x4c01ce['id'],'username':_0x4b390b[_0x4d3fc6(0xa4)],'lastUpdated':_0x4b390b['lastUpdated']||new Date()};_0x1de2df['push'](_0x2c9274),checkQueueTimeout(_0x2c9274);}}),updateQueueDisplay(_0x1de2df);},_0x39b76a=>{const _0x7eb6b=a45_0x25e483;console['error'](_0x7eb6b(0x9f),_0x39b76a);});window['addEventListener']('unload',()=>{unsubscribe();});