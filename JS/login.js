const a36J=a36b;(function(a,b){const v=a36b,c=a();while(!![]){try{const d=-parseInt(v(0x1e9))/0x1*(parseInt(v(0x1d2))/0x2)+-parseInt(v(0x1f8))/0x3*(parseInt(v(0x1e2))/0x4)+-parseInt(v(0x1ed))/0x5*(-parseInt(v(0x1e3))/0x6)+parseInt(v(0x1c3))/0x7+parseInt(v(0x20b))/0x8+-parseInt(v(0x1d8))/0x9+parseInt(v(0x1ca))/0xa;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a36a,0xba375));import{createUserWithEmailAndPassword,signInWithEmailAndPassword,sendEmailVerification,signOut}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{doc,setDoc,collection,getDocs,query,where,getDoc,updateDoc,deleteDoc,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';function setupVerificationListener(a,b){const w=a36b;console[w(0x1d6)](w(0x1dd),a);const c=setInterval(async()=>{const x=w;try{console['log']('Checking\x20if\x20email\x20has\x20been\x20verified...');const d=await signInWithEmailAndPassword(auth,a,b),e=d['user'];await e[x(0x20d)](!![]),e[x(0x1e4)]?(console['log'](x(0x1ef)),clearInterval(c),document[x(0x1f1)](x(0x1ea))[x(0x1db)]=x(0x1eb),await signOut(auth),setTimeout(()=>{const y=x;document[y(0x1f1)](y(0x1fd))['style'][y(0x20c)]='none',document[y(0x1f1)]('login-container')[y(0x1ce)][y(0x20c)]='block',document['getElementById'](y(0x1e0))[y(0x202)]=a,document[y(0x1f1)](y(0x1f6))['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Your\x20account\x20has\x20been\x20verified!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';},0x7d0)):(console[x(0x1d6)]('Email\x20not\x20yet\x20verified,\x20waiting...'),await signOut(auth));}catch(f){console[x(0x1cf)](x(0x1be),f),clearInterval(c);}},0x1388);window[w(0x1c9)]=c,setTimeout(()=>{const z=w;window[z(0x1c9)]&&(clearInterval(window['verificationCheckInterval']),window[z(0x1c9)]=null,console['log']('Stopped\x20checking\x20for\x20email\x20verification\x20(timeout\x20reached)'));},0x5*0x3c*0x3e8);}async function isUsernameAvailable(a){const A=a36b;if(!a||typeof a!=='string'||a[A(0x1ec)]()['length']<0x3)return document[A(0x1f1)]('register-error')['textContent']=A(0x1d7),![];const b=a['trim']();try{const c=/^[a-zA-Z0-9_-]{3,20}$/;if(!c['test'](b))return document[A(0x1f1)]('register-error')['textContent']='Username\x20can\x20only\x20contain\x20letters,\x20numbers,\x20underscores\x20and\x20hyphens',![];const [d,e,f]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',b))),getDocs(query(collection(db,'pendingRegistrations'),where(A(0x1de),'==',b))),getDocs(query(collection(db,'nonParticipants'),where(A(0x1de),'==',b)))]);if(!d['empty']||!e[A(0x1c2)]||!f['empty'])return document['getElementById']('register-error')[A(0x1fc)]='Username\x20is\x20already\x20taken',![];return!![];}catch(g){return console['error'](A(0x1dc),g),document['getElementById'](A(0x1ea))[A(0x1fc)]='Unable\x20to\x20verify\x20username\x20availability.\x20Please\x20try\x20again\x20later.',![];}}function a36b(a,b){const c=a36a();return a36b=function(d,e){d=d-0x1b9;let f=c[d];if(a36b['EcyxhU']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a36b['AMUOaS']=g,a=arguments,a36b['EcyxhU']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a36b['AMUOaS'](f),a[i]=f):f=j,f;},a36b(a,b);}async function handleRegister(a){const B=a36b;a['preventDefault']();const b=document[B(0x1f1)]('register-error');b[B(0x1fc)]='';const c=document[B(0x1f1)]('register-email')[B(0x202)],d=document[B(0x1f1)]('register-password')[B(0x202)],f=document[B(0x1f1)](B(0x1da))['value'],g=document['getElementById']('verification-answer')['value']['toLowerCase'](),h=document[B(0x1f1)](B(0x1e1))[B(0x202)],i=document[B(0x1f1)](B(0x1c0))?.[B(0x1e7)]||![];if(i&&h!==''){b['textContent']=B(0x201);return;}if(!i&&h===''){b['textContent']='Please\x20select\x20a\x20game\x20mode\x20or\x20check\x20Non-Participant.';return;}try{const j=[B(0x1f3),B(0x1cd)];if(!j['includes'](g)){b['textContent']=B(0x1f7);return;}const k=await isUsernameAvailable(f);if(!k)return;const l=await createUserWithEmailAndPassword(auth,c,d),m=l['user'];await sendEmailVerification(m),await setDoc(doc(db,'pendingRegistrations',m[B(0x1bf)]),{'username':f[B(0x1ec)](),'email':c,'gameMode':h,'nonParticipant':i,'createdAt':new Date(),'verified':![]}),b[B(0x1db)]=B(0x1fe)+c+B(0x1d3),await signOut(auth),setupVerificationListener(c,d);}catch(n){console['error']('Registration\x20error:',n),b['textContent']=n['code']==='auth/email-already-in-use'?'Email\x20address\x20is\x20already\x20registered':B(0x1e5);}}async function handleLogin(a){const C=a36b;a[C(0x1cc)]();const b=document['getElementById']('login-email')['value'],c=document[C(0x1f1)](C(0x1b9))[C(0x202)],d=document[C(0x1f1)](C(0x1f6));console[C(0x1d6)]('Login\x20attempt\x20started\x20for:',b),d[C(0x1fc)]='';try{console[C(0x1d6)](C(0x200));const f=await signInWithEmailAndPassword(auth,b,c),g=f[C(0x203)];console[C(0x1d6)](C(0x1bd),g[C(0x1bf)]);const h=['players','playersD2','playersD3',C(0x1ba),'playersCTF','nonParticipants'];console['log'](C(0x208));let j=![],k=await Promise[C(0x1df)](h['map'](l=>getDoc(doc(db,l,g['uid']))));for(let l=0x0;l<k['length'];l++){if(k[l]['exists']()){j=!![],console['log'](C(0x1d9)+h[l]+'\x20collection');break;}}if(!j){console[C(0x1d6)](C(0x1c4));const m=doc(db,'pendingRegistrations',g[C(0x1bf)]),n=await getDoc(m);if(n[C(0x1cb)]()){const o=n[C(0x1e8)]();console[C(0x1d6)]('Found\x20pending\x20registration:',o);if(g['emailVerified']){console[C(0x1d6)]('Email\x20is\x20verified,\x20processing\x20registration'),d[C(0x1db)]=C(0x1bc);if(o['nonParticipant'])console[C(0x1d6)](C(0x1f4)),await setDoc(doc(db,'nonParticipants',g['uid']),{'username':o['username'],'email':g[C(0x205)],'createdAt':serverTimestamp(),'isNonParticipant':!![]}),console['log'](C(0x1c5)+o['username']+C(0x1bb));else{let p;switch(o['gameMode']){case'D1':p='players';break;case'D2':p='playersD2';break;case'D3':p=C(0x206);break;case'Duos':p=C(0x1ba);break;case'CTF':p='playersCTF';break;default:p='players';}console[C(0x1d6)](C(0x1fa)+o['gameMode']+'\x20player\x20registration\x20to\x20'+p);const q=collection(db,p),r=query(q,orderBy('position',C(0x1f2)),limit(0x1)),s=await getDocs(r),t=s['empty']?0x1:s['docs'][0x0]['data']()['position']+0x1;await setDoc(doc(db,p,g['uid']),{'username':o[C(0x1de)],'email':g['email'],'eloRating':0x4b0,'position':t,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':o[C(0x204)]}),console[C(0x1d6)](C(0x1d1)+o['username']+C(0x1d4)+p+'\x20at\x20position\x20'+t);}await deleteDoc(m),setTimeout(()=>{const D=C;window['location']['href']=D(0x1c1);},0x7d0);return;}else{d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22warning-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20verify\x20your\x20email\x20to\x20complete\x20your\x20registration.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20id=\x22resend-button\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',document[C(0x1f1)]('resend-button')[C(0x209)](C(0x1f9),()=>{resendVerificationEmail(b);}),await signOut(auth);return;}}}window[C(0x1c7)]['href']=C(0x1c1);}catch(u){console['error'](C(0x1f0),u),d['textContent']='Login\x20failed:\x20'+u['message'];}}function loginFormHandler(a){const E=a36b;a['preventDefault']();const b=document[E(0x1f1)]('login-email')[E(0x202)][E(0x1ec)](),c=document[E(0x1f1)]('login-password')['value'],d=document[E(0x1f1)](E(0x1f6));signInWithEmailAndPassword(auth,b,c)[E(0x1d5)](e=>{const F=E;console[F(0x1d6)](F(0x1bd),e['user']),window[F(0x1c7)][F(0x1e6)]=F(0x1c1);})['catch'](e=>{const G=E;console[G(0x1cf)]('Login\x20error:',e),d['textContent']=G(0x1ff)+e[G(0x20e)],d[G(0x1ce)][G(0x20c)]=G(0x1ee);});}async function resendVerificationEmail(a){const H=a36b;console[H(0x1d6)]('Attempting\x20to\x20resend\x20verification\x20email\x20to:',a);try{const b=document['getElementById'](H(0x1b9))?.[H(0x202)];if(!b){console[H(0x1cf)]('Password\x20not\x20available\x20for\x20resending\x20verification'),document[H(0x1f1)]('login-error')['textContent']='Please\x20enter\x20your\x20password\x20to\x20resend\x20verification\x20email';return;}const c=await signInWithEmailAndPassword(auth,a,b),d=c[H(0x203)];console['log']('User\x20signed\x20in\x20for\x20verification\x20email:',d['uid']),await sendEmailVerification(d),console['log']('Verification\x20email\x20sent'),document['getElementById']('login-error')['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Verification\x20email\x20has\x20been\x20resent\x20to\x20'+a+'.\x20Please\x20check\x20your\x20inbox.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth);}catch(e){console[H(0x1cf)](H(0x1d0),e),document[H(0x1f1)]('login-error')[H(0x1fc)]='Error\x20sending\x20verification\x20email:\x20'+e['message'];}}function a36a(){const O=['v2LUzg93lNjLC2vUzfzLCMLMAwnHDgLVBKvTywLSignHBgXLzcb3AxrOoG','mtqYotGYng93zMLfuq','zgLZCgXHEq','z2v0swruB2TLBG','BwvZC2fNzq','Bg9NAw4TCgfZC3DVCMq','CgXHEwvYC0r1B3m','igfKzgvKihrVig5VBLbHCNrPy2LWyw50CYbJB2XSzwn0Aw9U','cIaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicbtzxr0Aw5NihvWihLVDxiGywnJB3vUDc4UlGOGicaGicaGicaGicaGicaGicaGicaGica8l2rPDJ4','vxnLCIbZAwDUzwqGAw46','rxjYB3iGy2HLy2TPBMCGDMvYAwzPy2f0Aw9Uihn0yxr1CZO','DwLK','BM9UlxbHCNrPy2LWyw50','lI4VAw5KzxGUAhrTBa','zw1WDhK','odq4otaXouXiBKXfvW','vxnLCIbUB3qGzM91BMqGAw4Gyw55ignVBgXLy3rPB24SignOzwnRAw5NihbLBMrPBMCGCMvNAxn0CMf0Aw9U','vxnLCIa','Bg9NAw4Ty29UDgfPBMvY','Bg9JyxrPB24','C3vIBwL0','DMvYAwzPy2f0Aw9Uq2HLy2TjBNrLCNzHBa','mtiYnZqWndbOtwjluvG','zxHPC3rZ','ChjLDMvUDerLzMf1Bhq','BwfNzw50yq','C3r5Bgu','zxjYB3i','rxjYB3iGCMvZzw5KAw5NihzLCMLMAwnHDgLVBIbLBwfPBdO','tMv3ihbSyxLLCIa','mNvIy3nhuG','jYKIignSyxnZpsjYzxnLBMqTyNv0Dg9UiJ4kicaGicaGicaGicaGicaGicaGicbszxnLBMqGvMvYAwzPy2f0Aw9UievTywLScIaGicaGicaGicaGicaGica8l2j1DhrVBJ4kicaGicaGicaGicaGpc9KAxy+','igfKzgvKihrVia','DgHLBG','Bg9N','vxnLCM5HBwuGBxvZDcbIzsbHDcbSzwfZDcaZignOyxjHy3rLCNmGBg9UzW','ntmWmtCZofvHzxvorq','vxnLCIbMB3vUzcbPBIa','CMvNAxn0zxiTDxnLCM5HBwu','Aw5Uzxjive1m','rxjYB3iGy2HLy2TPBMCGDxnLCM5HBwu6','u2v0DgLUzYb1CcbLBwfPBcb2zxjPzMLJyxrPB24GBgLZDgvUzxiGzM9YoG','DxnLCM5HBwu','ywXS','Bg9NAw4Tzw1HAwW','CMvNAxn0zxiTBw9Kzq','nhbHCuLotq','mJu2mKrez3jYCG','zw1HAwXwzxjPzMLLza','uMvNAxn0CMf0Aw9UigzHAwXLzc4GugXLyxnLihrYEsbHz2fPBIbSyxrLCI4','AhjLzG','y2HLy2TLza','zgf0yq','nJeWoti4whDruxn5','CMvNAxn0zxiTzxjYB3i','cIaGicaGicaGicaGicaGicaGicaGpgrPDIbJBgfZCZ0IC3vJy2vZCY1TzxnZywDLiJ4kicaGicaGicaGicaGicaGicaGicaGicaGrw1HAwWGDMvYAwzPzwqGC3vJy2vZC2z1BgX5isbzB3uGy2fUig5VDYbSB2CGAw4UcIaGicaGicaGicaGicaGicaGicaGpc9KAxy+','DhjPBq','mtG2nxfbquXxtG','yMXVy2S','rw1HAwWGAgfZigjLzw4GDMvYAwzPzwqHifjLzgLYzwn0Aw5NihrVigXVz2LUihbHz2uUlI4','tg9NAw4GzxjYB3i6','z2v0rwXLBwvUDej5swq','zgvZyW','ChvYCgXL','uhjVy2vZC2LUzYbUB24TCgfYDgLJAxbHBNqGCMvNAxn0CMf0Aw9U','zgLZywjSzwq','Bg9NAw4TzxjYB3i','sw5JB3jYzwn0igfUC3DLCIb0BYb2zxjPzMLJyxrPB24GCxvLC3rPB24','mJq0nJeWn1PLAMrysG','y2XPy2S','uhjVy2vZC2LUzYa','Bg9NAw4TzM9YBq','Dgv4DenVBNrLBNq','CMvNAxn0zxiTy29UDgfPBMvY','cIaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicbszwDPC3rYyxrPB24GCgvUzgLUzYeGugXLyxnLignOzwnRihLVDxiGzw1HAwWGDg8GDMvYAwz5ihLVDxiGywnJB3vUDc4kicaGicaGicaGicaGicaGidXICJ48yNi+cIaGicaGicaGicaGicaGica8yNv0Dg9Uig9Uy2XPy2S9iNjLC2vUzfzLCMLMAwnHDgLVBKvTywLSkcC','tg9NAw4GzxjYB3i6ia','qxr0zw1WDgLUzYbgAxjLyMfZzsbZAwDUsw5xAxrOrw1HAwXbBMrqyxnZD29Yzc4UlG','ugXLyxnLihvUC2vSzwn0igeGz2fTzsbTB2rLigLMihLVDsbJAg9VC2uGtM9UlvbHCNrPy2LWyw50lG','DMfSDwu','DxnLCG','z2fTzu1Vzgu','zw1HAwW','CgXHEwvYC0qZ','C2HVDY1YzwDPC3rLCG','q2HLy2TPBMCGAwyGDxnLCIbLEgLZDhmGAw4Gyw55ignVBgXLy3rPB24UlI4','ywrKrxzLBNrmAxn0zw5LCG'];a36a=function(){return O;};return a36a();}window['resendVerificationEmail']=function(a){const I=a36b;console[I(0x1d6)](I(0x20a),a),resendVerificationEmail(a);},document[a36J(0x209)]('DOMContentLoaded',()=>{const K=a36J,a=document['getElementById']('non-participant'),b=document['getElementById']('register-mode');a&&b&&a[K(0x209)]('change',function(){const L=K;this[L(0x1e7)]?(b['value']='',b[L(0x1f5)]=!![]):b['disabled']=![];});const c=document['getElementById']('register-form'),d=document['getElementById'](K(0x1fb));c&&c[K(0x209)](K(0x1c8),handleRegister);d&&d['addEventListener']('submit',handleLogin);const e=document[K(0x1f1)](K(0x207)),f=document['getElementById']('show-login');e&&e['addEventListener']('click',g=>{const M=K;g[M(0x1cc)](),document['getElementById'](M(0x1c6))[M(0x1ce)]['display']='none',document['getElementById'](M(0x1fd))['style'][M(0x20c)]='block';}),f&&f['addEventListener'](K(0x1f9),g=>{const N=K;g['preventDefault'](),document['getElementById'](N(0x1fd))['style']['display']='none',document[N(0x1f1)]('login-container')['style'][N(0x20c)]=N(0x1ee);});});