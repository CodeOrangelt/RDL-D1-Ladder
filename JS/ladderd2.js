const a32_0x1c3eb6=(function(){let _0x2c5e20=!![];return function(_0x611c43,_0x3715fd){const _0x283866=_0x2c5e20?function(){const _0x5ef9d0=a32_0x23a6;if(_0x3715fd){const _0xf11476=_0x3715fd[_0x5ef9d0(0x221)](_0x611c43,arguments);return _0x3715fd=null,_0xf11476;}}:function(){};return _0x2c5e20=![],_0x283866;};}()),a32_0x36e960=a32_0x1c3eb6(this,function(){const _0x2d22e9=a32_0x23a6,_0xe4c6e9=function(){const _0x1549cb=a32_0x23a6;let _0xb82115;try{_0xb82115=Function(_0x1549cb(0x1ef)+_0x1549cb(0x204)+');')();}catch(_0x5259c1){_0xb82115=window;}return _0xb82115;},_0x5f2882=_0xe4c6e9(),_0x26dd4b=_0x5f2882[_0x2d22e9(0x208)]=_0x5f2882['console']||{},_0x188190=['log','warn','info',_0x2d22e9(0x21f),'exception','table','trace'];for(let _0x513742=0x0;_0x513742<_0x188190['length'];_0x513742++){const _0xabd11a=a32_0x1c3eb6[_0x2d22e9(0x205)][_0x2d22e9(0x1f7)]['bind'](a32_0x1c3eb6),_0x111fe6=_0x188190[_0x513742],_0x2a4a7c=_0x26dd4b[_0x111fe6]||_0xabd11a;_0xabd11a[_0x2d22e9(0x202)]=a32_0x1c3eb6[_0x2d22e9(0x217)](a32_0x1c3eb6),_0xabd11a['toString']=_0x2a4a7c['toString']['bind'](_0x2a4a7c),_0x26dd4b[_0x111fe6]=_0xabd11a;}});a32_0x36e960();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0x433f45 from'./firebase-idle-wrapper.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x129ddc=![]){const _0x57598d=a32_0x23a6,_0x37ca53=document['querySelector']('#ladder-d2\x20tbody');if(!_0x37ca53){console['error'](_0x57598d(0x209));return;}_0x37ca53['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x29aea1=Date['now']();if(!_0x129ddc&&playerCacheD2['data']&&_0x29aea1-playerCacheD2[_0x57598d(0x1f6)]<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0xe515e1=collection(db,_0x57598d(0x20a)),_0x5bdc23=query(_0xe515e1,orderBy(_0x57598d(0x220),_0x57598d(0x1fb))),_0x20897b=await a32_0x433f45['getDocuments'](_0xe515e1),_0xc04587=[];_0x20897b[_0x57598d(0x1ec)](_0x4922c9=>{const _0x422b09=_0x4922c9['data']();_0x422b09['username']&&_0xc04587['push']({..._0x422b09,'id':_0x4922c9['id'],'elo':_0x422b09['eloRating']||0x0,'position':_0x422b09['position']||Number['MAX_SAFE_INTEGER']});});const _0x4d29ea=collection(db,'userProfiles'),_0x1ed0ab=await getDocs(_0x4d29ea),_0x487fe4=new Map();_0x1ed0ab['forEach'](_0x55ea10=>{const _0x37fcd6=_0x57598d,_0x29f4a5=_0x55ea10['data']();_0x29f4a5[_0x37fcd6(0x216)]&&_0x487fe4['set'](_0x29f4a5['username']['toLowerCase'](),_0x29f4a5);});for(const _0x2a73a7 of _0xc04587){const _0x108cae=_0x2a73a7[_0x57598d(0x216)]['toLowerCase']();if(_0x487fe4['has'](_0x108cae)){const _0x3c48cd=_0x487fe4['get'](_0x108cae);_0x3c48cd['country']&&(_0x2a73a7['country']=_0x3c48cd['country']['toLowerCase']());}}const _0x38f4e7=_0xc04587['map'](_0x1ec82e=>_0x1ec82e['username']),_0x74a91b=await fetchBatchMatchStatsD2(_0x38f4e7);_0xc04587['sort']((_0x250ea9,_0x459099)=>{const _0x4724e6=_0x57598d,_0x2aee5f=_0x74a91b['get'](_0x250ea9['username'])?.['totalMatches']||0x0,_0x1e363c=_0x74a91b['get'](_0x459099['username'])?.[_0x4724e6(0x21e)]||0x0;if(_0x2aee5f===0x0!==(_0x1e363c===0x0))return _0x2aee5f===0x0?0x1:-0x1;return(_0x250ea9[_0x4724e6(0x220)]||0x3e7)-(_0x459099[_0x4724e6(0x220)]||0x3e7);}),_0xc04587[_0x57598d(0x1ec)]((_0x274fe5,_0x3f011b)=>{_0x274fe5['position']=_0x3f011b+0x1;}),playerCacheD2[_0x57598d(0x211)]=_0xc04587,playerCacheD2[_0x57598d(0x1f6)]=_0x29aea1,updateLadderDisplayD2(_0xc04587);}catch(_0x4b5d31){console[_0x57598d(0x21f)]('Error\x20loading\x20D2\x20ladder:',_0x4b5d31),_0x37ca53[_0x57598d(0x20d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x4b5d31['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getNextAvailablePositionD2(_0x33916a){const _0x3350c3=a32_0x23a6;if(_0x33916a[_0x3350c3(0x21d)]===0x0)return 0x1;let _0x5a25f3=0x0;return _0x33916a['forEach'](_0x1eef4f=>{const _0x40fb6f=_0x3350c3;_0x1eef4f['position']&&typeof _0x1eef4f['position']===_0x40fb6f(0x213)&&_0x1eef4f[_0x40fb6f(0x220)]>_0x5a25f3&&(_0x5a25f3=_0x1eef4f['position']);}),_0x5a25f3+0x1;}function a32_0x5ada(){const _0x56bb36=['gray','style','forEach','set','matchId','return\x20(function()\x20','fontSize','fallback\x20entries','color','Silver','newElo','#F44336','timestamp','prototype','querySelector','find','includes','asc','wins','catch','fontWeight','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','size','totalKills','__proto__','player','{}.constructor(\x22return\x20this\x22)(\x20)','constructor','losses','loserScore','console','D2\x20Ladder\x20table\x20body\x20not\x20found','playersD2','&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','firstPlaceDate','innerHTML','\x20fallback\x20ELO\x20change:\x20','Unranked','totalDeaths','data','#C0C0C0','number','toFixed','has','username','bind',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','winRate','opacity','get','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','length','totalMatches','error','position','apply','Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:','desc','bold'];a32_0x5ada=function(){return _0x56bb36;};return a32_0x5ada();}async function updatePlayerPositions(_0x4d786a,_0x70c1ed){const _0xb3a8cf=a32_0x23a6;try{const _0x688888=collection(db,_0xb3a8cf(0x20a)),_0x39bc14=await getDocs(_0x688888),_0x4e36df=[];_0x39bc14['forEach'](_0x49f230=>{const _0x2dd75e=_0xb3a8cf;_0x4e36df['push']({'id':_0x49f230['id'],..._0x49f230[_0x2dd75e(0x211)]()});});const _0x40e196=_0x4e36df['find'](_0x130366=>_0x130366['username']===_0x4d786a),_0x198b3d=_0x4e36df[_0xb3a8cf(0x1f9)](_0x20c738=>_0x20c738['username']===_0x70c1ed);if(!_0x40e196||!_0x198b3d){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x40e196['position']>_0x198b3d['position']){const _0x311b1d=_0x198b3d['position'];for(const _0x1b3df0 of _0x4e36df){_0x1b3df0['position']>=_0x198b3d['position']&&_0x1b3df0['position']<_0x40e196[_0xb3a8cf(0x220)]&&_0x1b3df0['username']!==_0x4d786a&&await updateDoc(doc(db,'playersD2',_0x1b3df0['id']),{'position':_0x1b3df0['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x40e196['id']),{'position':_0x311b1d});if(_0x311b1d===0x1){const _0x4930e3=doc(db,'playersD2',_0x40e196['id']),_0x95181=await getDoc(_0x4930e3);!_0x95181['data']()[_0xb3a8cf(0x20c)]&&await updateDoc(_0x4930e3,{'firstPlaceDate':Timestamp['now']()});}if(_0x198b3d['position']===0x1){const _0x4834e3=doc(db,'playersD2',_0x198b3d['id']);await updateDoc(_0x4834e3,{'firstPlaceDate':null});}playerCacheD2[_0xb3a8cf(0x1f6)]=0x0;}}catch(_0x1d3cac){console[_0xb3a8cf(0x21f)]('Error\x20updating\x20D2\x20player\x20positions:',_0x1d3cac);}}function calculateStreakDays(_0x342d52){if(!_0x342d52)return 0x0;const _0x59e50a=_0x342d52['toDate'](),_0x44fea3=new Date(),_0x3c00fd=Math['abs'](_0x44fea3-_0x59e50a);return Math['ceil'](_0x3c00fd/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x22b9f3){const _0x406f6f=a32_0x23a6;if(_0x22b9f3>=0x834)return'Emerald';if(_0x22b9f3>=0x708)return'Gold';if(_0x22b9f3>=0x640)return _0x406f6f(0x1f3);if(_0x22b9f3>=0x578)return'Bronze';return _0x406f6f(0x20f);}async function updateLadderDisplayD2(_0x2b9aa8){const _0x270017=a32_0x23a6;_0x2b9aa8['sort']((_0x39d0a3,_0x199df1)=>_0x39d0a3['position']-_0x199df1[_0x270017(0x220)]);const _0x338bd4=document['querySelector']('#ladder-d2\x20tbody');if(!_0x338bd4)return;_0x338bd4['innerHTML']='';const _0x2a210b=_0x2b9aa8['map'](_0x68242f=>_0x68242f['username']),_0x99f252=await fetchBatchMatchStatsD2(_0x2a210b),_0x2f6ccf=document[_0x270017(0x1f8)]('#ladder-d2\x20thead\x20tr');_0x2f6ccf&&(_0x2f6ccf['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x128dae=_0x2b9aa8['map'](_0x3c9d18=>{const _0x68bb19=_0x270017,_0x1ea6c6=_0x99f252[_0x68bb19(0x21b)](_0x3c9d18['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x3c9d18,_0x1ea6c6);})['join']('');_0x338bd4['innerHTML']=_0x128dae,getPlayersLastEloChangesD2(_0x2a210b)['then'](_0x557c56=>{const _0x237ee4=new Map();_0x338bd4['querySelectorAll']('tr')['forEach']((_0x9641ed,_0x5e7e60)=>{_0x5e7e60<_0x2a210b['length']&&_0x237ee4['set'](_0x2a210b[_0x5e7e60],_0x9641ed);}),_0x557c56['forEach']((_0x4f8144,_0x1daf3e)=>{const _0xd6d38f=a32_0x23a6,_0x52e551=_0x237ee4['get'](_0x1daf3e);if(_0x52e551&&_0x4f8144!==0x0){const _0x2d388f=_0x52e551[_0xd6d38f(0x1f8)]('td:nth-child(3)');if(_0x2d388f){const _0x324dfc=_0x4f8144>0x0?'+'+_0x4f8144:''+_0x4f8144,_0x4e901b=_0x2d388f['querySelector']('.trend-indicator');_0x4e901b&&(_0x4e901b['textContent']=_0x324dfc,_0x4e901b['style'][_0xd6d38f(0x1f2)]=_0x4f8144>0x0?'#4CAF50':_0xd6d38f(0x1f5),_0x4e901b['style'][_0xd6d38f(0x1fe)]=_0xd6d38f(0x224),_0x4e901b[_0xd6d38f(0x1eb)][_0xd6d38f(0x1f0)]='0.85em',_0x4e901b[_0xd6d38f(0x1eb)]['display']='inline',_0x4e901b['style']['visibility']='visible',_0x4e901b['style'][_0xd6d38f(0x21a)]='1');}}});})[_0x270017(0x1fd)](_0x40b771=>console['error'](_0x270017(0x222),_0x40b771));}function createPlayerRowD2(_0x3e52dc,_0xcf7612){const _0x5c0db9=a32_0x23a6,_0x1eeeab=parseFloat(_0x3e52dc['elo'])||0x0;let _0x56381f=_0x5c0db9(0x1ea);if(_0x1eeeab>=0x7d0)_0x56381f='#50C878';else{if(_0x1eeeab>=0x708)_0x56381f='#FFD700';else{if(_0x1eeeab>=0x640)_0x56381f=_0x5c0db9(0x212);else _0x1eeeab>=0x578&&(_0x56381f='#CD7F32');}}let _0x2184e8='';return _0x3e52dc['country']&&(_0x2184e8='<img\x20src=\x22../images/flags/'+_0x3e52dc['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3e52dc['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x5c0db9(0x1ff)+_0x3e52dc[_0x5c0db9(0x220)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x3e52dc['username'])+_0x5c0db9(0x20b)+_0x56381f+_0x5c0db9(0x218)+_0x3e52dc['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2184e8+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x56381f+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x1eeeab+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xcf7612['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xcf7612[_0x5c0db9(0x1fc)]+_0x5c0db9(0x21c)+_0xcf7612['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xcf7612['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xcf7612['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function a32_0x23a6(_0x1ab194,_0x9dca12){const _0x36e960=a32_0x5ada();return a32_0x23a6=function(_0x1c3eb6,_0x3e68a3){_0x1c3eb6=_0x1c3eb6-0x1ea;let _0x5ada14=_0x36e960[_0x1c3eb6];return _0x5ada14;},a32_0x23a6(_0x1ab194,_0x9dca12);}async function getPlayersLastEloChangesD2(_0x3c9efc){const _0x5ece7e=a32_0x23a6,_0x55ba03=new Map();_0x3c9efc[_0x5ece7e(0x1ec)](_0x4d79d0=>_0x55ba03[_0x5ece7e(0x1ed)](_0x4d79d0,0x0));try{const _0x15ebc2=collection(db,'eloHistoryD2'),_0x7643f4=query(_0x15ebc2,orderBy('timestamp',_0x5ece7e(0x223)),limit(0x64)),_0x66a3ec=await getDocs(_0x7643f4),_0x4ac308=new Map(),_0x1c90c9=await getDocs(collection(db,'playersD2'));_0x1c90c9['forEach'](_0x4817ce=>{const _0x398ec0=_0x5ece7e,_0x4527d6=_0x4817ce[_0x398ec0(0x211)]();_0x4527d6['username']&&_0x4ac308['set'](_0x4817ce['id'],_0x4527d6['username']);});const _0x43ccf8=new Map();_0x66a3ec['forEach'](_0x51e76d=>{const _0x511699=_0x5ece7e,_0x30277a=_0x51e76d[_0x511699(0x211)]();let _0x22dec9=_0x30277a['username']||_0x30277a['playerUsername'];!_0x22dec9&&_0x30277a[_0x511699(0x203)]&&_0x4ac308[_0x511699(0x215)](_0x30277a['player'])&&(_0x22dec9=_0x4ac308[_0x511699(0x21b)](_0x30277a['player']));if(!_0x22dec9&&_0x30277a[_0x511699(0x1ee)]){}_0x22dec9&&_0x3c9efc['includes'](_0x22dec9)&&(!_0x43ccf8['has'](_0x22dec9)&&_0x43ccf8['set'](_0x22dec9,[]),_0x43ccf8['get'](_0x22dec9)['push']({..._0x30277a,'timestamp':_0x30277a['timestamp']?.['seconds']||0x0,'username':_0x22dec9}));}),_0x43ccf8['forEach']((_0x2e5ddd,_0x394c10)=>{const _0x5af72b=_0x5ece7e;if(_0x2e5ddd['length']>0x0){_0x2e5ddd['sort']((_0x5693e4,_0x4654de)=>_0x4654de[_0x5af72b(0x1f6)]-_0x5693e4['timestamp']);const _0x5c5712=_0x2e5ddd['find'](_0x4769f6=>_0x4769f6['change']!==undefined||_0x4769f6['newElo']!==undefined&&_0x4769f6['previousElo']!==undefined);if(_0x5c5712){let _0x30ce59;if(_0x5c5712['change']!==undefined)_0x30ce59=_0x5c5712['change'];else _0x5c5712[_0x5af72b(0x1f4)]!==undefined&&_0x5c5712['previousElo']!==undefined&&(_0x30ce59=_0x5c5712['newElo']-_0x5c5712['previousElo']);_0x30ce59!==undefined&&_0x55ba03[_0x5af72b(0x1ed)](_0x394c10,_0x30ce59);}}});if(_0x43ccf8[_0x5ece7e(0x200)]===0x0){const _0x383639=collection(db,'eloHistory'),_0x53a010=query(_0x383639,where('gameMode','==','D2'),orderBy('timestamp','desc'),limit(0x32));try{const _0x348ded=await getDocs(_0x53a010);console['log']('D2:\x20Found',_0x348ded[_0x5ece7e(0x200)],_0x5ece7e(0x1f1)),_0x348ded['forEach'](_0x3db544=>{const _0x326f10=_0x5ece7e,_0x36e4d0=_0x3db544['data'](),_0x177fc7=_0x36e4d0['username']||_0x36e4d0['playerUsername'];if(_0x177fc7&&_0x3c9efc[_0x326f10(0x1fa)](_0x177fc7)){const _0x3e88fa=_0x36e4d0['change']||(_0x36e4d0['newElo']!==undefined&&_0x36e4d0['previousElo']!==undefined?_0x36e4d0['newElo']-_0x36e4d0['previousElo']:0x0);_0x3e88fa!==0x0&&(_0x55ba03['set'](_0x177fc7,_0x3e88fa),console['log']('D2:\x20'+_0x177fc7+_0x326f10(0x20e)+_0x3e88fa));}});}catch(_0xeed4b9){}}}catch(_0x4e7cfd){console['error']('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x4e7cfd);}return _0x55ba03;}async function fetchBatchMatchStatsD2(_0x17ac39){const _0x328851=new Map();try{_0x17ac39['forEach'](_0x19c649=>{const _0x4a614f=a32_0x23a6;_0x328851[_0x4a614f(0x1ed)](_0x19c649,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x167d88=collection(db,'approvedMatchesD2'),_0x5586dd=await getDocs(_0x167d88);_0x5586dd['forEach'](_0x33b2b0=>{const _0x5870ee=a32_0x23a6,_0x1556da=_0x33b2b0['data'](),_0x103d16=_0x1556da['winnerUsername'],_0x4112c8=_0x1556da['loserUsername'];if(_0x17ac39['includes'](_0x103d16)){const _0xbada=_0x328851['get'](_0x103d16);_0xbada['wins']++,_0xbada['totalMatches']++,_0xbada[_0x5870ee(0x201)]+=parseInt(_0x1556da['winnerScore'])||0x0,_0xbada['totalDeaths']+=parseInt(_0x1556da[_0x5870ee(0x207)])||0x0;}if(_0x17ac39[_0x5870ee(0x1fa)](_0x4112c8)){const _0x3c5ed9=_0x328851[_0x5870ee(0x21b)](_0x4112c8);_0x3c5ed9[_0x5870ee(0x206)]++,_0x3c5ed9[_0x5870ee(0x21e)]++,_0x3c5ed9['totalKills']+=parseInt(_0x1556da['loserScore'])||0x0,_0x3c5ed9[_0x5870ee(0x210)]+=parseInt(_0x1556da['winnerScore'])||0x0;}}),_0x17ac39['forEach'](_0x2ca555=>{const _0x30005d=a32_0x23a6,_0x1a92d1=_0x328851['get'](_0x2ca555);_0x1a92d1['kda']=_0x1a92d1['totalDeaths']>0x0?(_0x1a92d1['totalKills']/_0x1a92d1[_0x30005d(0x210)])[_0x30005d(0x214)](0x2):_0x1a92d1['totalKills']['toFixed'](0x2),_0x1a92d1[_0x30005d(0x219)]=_0x1a92d1['totalMatches']>0x0?(_0x1a92d1['wins']/_0x1a92d1[_0x30005d(0x21e)]*0x64)[_0x30005d(0x214)](0x1):0x0;});}catch(_0x2216d8){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x2216d8);}return _0x328851;}export{displayLadderD2,updatePlayerPositions};