function a38_0x53db(){const _0x3607ca=['profileImageUrl','Unknown','Error\x20rebuilding\x20members\x20list:','{collection}/{docId}','prototype','userId','bind','error','Error\x20rebuilding\x20members\x20list','players','emerald','9612BUkBBu','828dGwdtY','onWrite','collection','(((.+)+)+)+$','table','firebase-admin','exception','154595KKMlcM','https','silver','favoriteWeapon','isNonParticipant','updateMembersList','serverTimestamp','doc','__proto__','12GtNqXN','forEach','params','info','slice','elo','get','push','2254010JArGIB','apply','gold','set','console','eloRating','has','username','bronze','docId','commit','toString','24PueGJE','208YZVlsb','firestore','favoriteMap','playersD3','all','log','search','includes','batch','userProfiles','Successfully\x20updated\x20aggregated\x20members\x20list','length','send','rebuildMembersListManual','aggregatedMembers','153hkWEJc','trace','331428ncRSNr','unranked','FieldValue','country','334061sWCxmc','284quMKpq','motto','nonParticipants','48930UcVIZh','status','ref','warn','initializeApp','ladders','return\x20(function()\x20','data','Error\x20updating\x20members\x20list:','ladder','constructor'];a38_0x53db=function(){return _0x3607ca;};return a38_0x53db();}const a38_0x13da92=a38_0x2d47;(function(_0x1a5008,_0x5d1cc3){const _0x3ed06f=a38_0x2d47,_0x86883e=_0x1a5008();while(!![]){try{const _0x408033=-parseInt(_0x3ed06f(0x1ee))/0x1*(-parseInt(_0x3ed06f(0x213))/0x2)+parseInt(_0x3ed06f(0x1ed))/0x3*(parseInt(_0x3ed06f(0x1d4))/0x4)+-parseInt(_0x3ed06f(0x1f5))/0x5*(parseInt(_0x3ed06f(0x1fe))/0x6)+parseInt(_0x3ed06f(0x1d3))/0x7*(-parseInt(_0x3ed06f(0x212))/0x8)+parseInt(_0x3ed06f(0x222))/0x9*(-parseInt(_0x3ed06f(0x1d7))/0xa)+parseInt(_0x3ed06f(0x206))/0xb+-parseInt(_0x3ed06f(0x1cf))/0xc;if(_0x408033===_0x5d1cc3)break;else _0x86883e['push'](_0x86883e['shift']());}catch(_0x434eb6){_0x86883e['push'](_0x86883e['shift']());}}}(a38_0x53db,0x317cb));function a38_0x2d47(_0x161432,_0x38b5f8){const _0x210502=a38_0x53db();return a38_0x2d47=function(_0x547481,_0x3ce81d){_0x547481=_0x547481-0x1cf;let _0x22fdd7=_0x210502[_0x547481];return _0x22fdd7;},a38_0x2d47(_0x161432,_0x38b5f8);}const a38_0x3ab38e=(function(){let _0x32c48b=!![];return function(_0x1873fb,_0x583ce5){const _0x5a70c1=_0x32c48b?function(){const _0x1547bc=a38_0x2d47;if(_0x583ce5){const _0x4f5ef5=_0x583ce5[_0x1547bc(0x207)](_0x1873fb,arguments);return _0x583ce5=null,_0x4f5ef5;}}:function(){};return _0x32c48b=![],_0x5a70c1;};}()),a38_0x229ae5=a38_0x3ab38e(this,function(){const _0x1edebd=a38_0x2d47;return a38_0x229ae5[_0x1edebd(0x211)]()[_0x1edebd(0x219)](_0x1edebd(0x1f1))[_0x1edebd(0x211)]()[_0x1edebd(0x1e1)](a38_0x229ae5)['search']('(((.+)+)+)+$');});a38_0x229ae5();const a38_0x3ce81d=(function(){let _0x27c194=!![];return function(_0x139b7d,_0xb814af){const _0x63735a=_0x27c194?function(){const _0x154036=a38_0x2d47;if(_0xb814af){const _0x4aee15=_0xb814af[_0x154036(0x207)](_0x139b7d,arguments);return _0xb814af=null,_0x4aee15;}}:function(){};return _0x27c194=![],_0x63735a;};}()),a38_0x547481=a38_0x3ce81d(this,function(){const _0x201f35=a38_0x2d47;let _0x4056ea;try{const _0x467732=Function(_0x201f35(0x1dd)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4056ea=_0x467732();}catch(_0xa89c32){_0x4056ea=window;}const _0x1ea1f9=_0x4056ea[_0x201f35(0x20a)]=_0x4056ea[_0x201f35(0x20a)]||{},_0xc804fe=['log',_0x201f35(0x1da),_0x201f35(0x201),'error',_0x201f35(0x1f4),_0x201f35(0x1f2),_0x201f35(0x223)];for(let _0x22cedc=0x0;_0x22cedc<_0xc804fe[_0x201f35(0x21e)];_0x22cedc++){const _0x2f9fd4=a38_0x3ce81d[_0x201f35(0x1e1)][_0x201f35(0x1e6)][_0x201f35(0x1e8)](a38_0x3ce81d),_0x277622=_0xc804fe[_0x22cedc],_0x3e9b06=_0x1ea1f9[_0x277622]||_0x2f9fd4;_0x2f9fd4[_0x201f35(0x1fd)]=a38_0x3ce81d[_0x201f35(0x1e8)](a38_0x3ce81d),_0x2f9fd4[_0x201f35(0x211)]=_0x3e9b06['toString'][_0x201f35(0x1e8)](_0x3e9b06),_0x1ea1f9[_0x277622]=_0x2f9fd4;}});a38_0x547481();const functions=require('firebase-functions'),admin=require(a38_0x13da92(0x1f3));admin[a38_0x13da92(0x1db)]();const db=admin[a38_0x13da92(0x214)]();exports[a38_0x13da92(0x1fa)]=functions[a38_0x13da92(0x214)]['document'](a38_0x13da92(0x1e5))[a38_0x13da92(0x1ef)](async(_0x109180,_0x5df384)=>{const _0x28f01=a38_0x13da92,_0x151d4c=_0x5df384[_0x28f01(0x200)][_0x28f01(0x1f0)],_0xd18b4=_0x5df384[_0x28f01(0x200)][_0x28f01(0x20f)];if(![_0x28f01(0x1eb),'playersD2',_0x28f01(0x216),_0x28f01(0x21c),_0x28f01(0x1d6)][_0x28f01(0x21a)](_0x151d4c))return null;try{await rebuildMembersList(),console[_0x28f01(0x218)](_0x28f01(0x21d));}catch(_0x137559){console[_0x28f01(0x1e9)](_0x28f01(0x1df),_0x137559);}});async function rebuildMembersList(){const _0x363abd=a38_0x13da92,_0x259396=db[_0x363abd(0x21b)](),[_0x158d56,_0x50df39,_0x4469c1,_0x25684b,_0x20a9b7]=await Promise[_0x363abd(0x217)]([db[_0x363abd(0x1f0)](_0x363abd(0x21c))[_0x363abd(0x204)](),db[_0x363abd(0x1f0)]('players')['get'](),db['collection']('playersD2')[_0x363abd(0x204)](),db['collection'](_0x363abd(0x216))[_0x363abd(0x204)](),db['collection'](_0x363abd(0x1d6))[_0x363abd(0x204)]()]),_0xb0d405=new Map();_0x158d56[_0x363abd(0x1ff)](_0x5e6c48=>{const _0x80e5c2=_0x363abd;_0xb0d405[_0x80e5c2(0x209)](_0x5e6c48['id'],_0x5e6c48[_0x80e5c2(0x1de)]());});const _0x5e6526=new Map(),_0x2547b8=(_0x3416e6,_0x43f813)=>{const _0x342c50=_0x363abd;_0x3416e6[_0x342c50(0x1ff)](_0x20d6c5=>{const _0x3f5745=_0x342c50,_0x298802=_0x20d6c5[_0x3f5745(0x1de)](),_0x4095c6=_0x20d6c5['id'];!_0x5e6526[_0x3f5745(0x20c)](_0x4095c6)&&_0x5e6526[_0x3f5745(0x209)](_0x4095c6,{'userId':_0x4095c6,'username':_0x298802[_0x3f5745(0x20d)]||_0x3f5745(0x1e3),'ladders':[],'isNonParticipant':![]});const _0x179aa7=_0x5e6526[_0x3f5745(0x204)](_0x4095c6);_0x179aa7[_0x3f5745(0x1dc)][_0x3f5745(0x205)]({'ladder':_0x43f813,'elo':_0x298802[_0x3f5745(0x20b)]||0x4b0,'active':_0x298802['active']!==![]});});};_0x2547b8(_0x50df39,'D1'),_0x2547b8(_0x4469c1,'D2'),_0x2547b8(_0x25684b,'D3'),_0x20a9b7[_0x363abd(0x1ff)](_0x356923=>{const _0x363ea1=_0x363abd,_0xb82a81=_0x356923['data'](),_0x52ae6e=_0x356923['id'];!_0x5e6526['has'](_0x52ae6e)&&_0xb82a81['username']&&_0x5e6526[_0x363ea1(0x209)](_0x52ae6e,{'userId':_0x52ae6e,'username':_0xb82a81[_0x363ea1(0x20d)],'ladders':[],'isNonParticipant':!![]});});const _0x361380=[];_0x5e6526['forEach']((_0x14960a,_0x25ae05)=>{const _0x39f482=_0x363abd,_0x217d25=_0xb0d405[_0x39f482(0x204)](_0x25ae05)||{};let _0xeae635=0x0,_0x14d872=null;if(_0x14960a[_0x39f482(0x1dc)][_0x39f482(0x21e)]>0x0){const _0x29f9c2=_0x14960a['ladders']['sort']((_0x4a9072,_0x1eb130)=>_0x1eb130['elo']-_0x4a9072[_0x39f482(0x203)]);_0xeae635=_0x29f9c2[0x0][_0x39f482(0x203)],_0x14d872=_0x29f9c2[0x0][_0x39f482(0x1e0)];}const _0x5b9c4b={'userId':_0x25ae05,'username':_0x14960a['username'],'profileImageUrl':_0x217d25[_0x39f482(0x1e2)]||null,'country':_0x217d25[_0x39f482(0x1d2)]||null,'motto':_0x217d25[_0x39f482(0x1d5)]||null,'favoriteMap':_0x217d25[_0x39f482(0x215)]||null,'favoriteWeapon':_0x217d25[_0x39f482(0x1f8)]||null,'isNonParticipant':_0x14960a[_0x39f482(0x1f9)],'ladders':_0x14960a[_0x39f482(0x1dc)],'primaryLadder':_0x14d872,'highestElo':_0xeae635,'rank':getPlayerRank(_0xeae635),'lastUpdated':admin[_0x39f482(0x214)][_0x39f482(0x1d1)][_0x39f482(0x1fb)]()};_0x361380[_0x39f482(0x205)](_0x5b9c4b);});const _0x222d70=db[_0x363abd(0x1f0)](_0x363abd(0x221)),_0x2aac63=await _0x222d70[_0x363abd(0x204)](),_0xab8d86=[];_0x2aac63[_0x363abd(0x1ff)](_0x5a0c26=>{const _0x2c237f=_0x363abd;_0xab8d86[_0x2c237f(0x205)](_0x5a0c26[_0x2c237f(0x1d9)]['delete']());}),await Promise['all'](_0xab8d86);const _0x567257=0x1f4,_0x1d245f=[];for(let _0x5cd833=0x0;_0x5cd833<_0x361380['length'];_0x5cd833+=_0x567257){const _0x4ef93c=db[_0x363abd(0x21b)](),_0x1f8dd5=_0x361380[_0x363abd(0x202)](_0x5cd833,_0x5cd833+_0x567257);_0x1f8dd5['forEach'](_0x37f7f6=>{const _0x9249e2=_0x363abd,_0x1ae4a7=_0x222d70[_0x9249e2(0x1fc)](_0x37f7f6[_0x9249e2(0x1e7)]);_0x4ef93c[_0x9249e2(0x209)](_0x1ae4a7,_0x37f7f6);}),_0x1d245f['push'](_0x4ef93c[_0x363abd(0x210)]());}await Promise[_0x363abd(0x217)](_0x1d245f);}function getPlayerRank(_0x43b83a){const _0xcd220f=a38_0x13da92;if(_0x43b83a>=0x7d0)return _0xcd220f(0x1ec);if(_0x43b83a>=0x708)return _0xcd220f(0x208);if(_0x43b83a>=0x640)return _0xcd220f(0x1f7);if(_0x43b83a>=0x578)return _0xcd220f(0x20e);return _0xcd220f(0x1d0);}exports[a38_0x13da92(0x220)]=functions[a38_0x13da92(0x1f6)]['onRequest'](async(_0x51be28,_0x4f4980)=>{const _0x15d2c=a38_0x13da92;try{await rebuildMembersList(),_0x4f4980[_0x15d2c(0x1d8)](0xc8)[_0x15d2c(0x21f)]('Members\x20list\x20rebuilt\x20successfully');}catch(_0x57e88e){console[_0x15d2c(0x1e9)](_0x15d2c(0x1e4),_0x57e88e),_0x4f4980[_0x15d2c(0x1d8)](0x1f4)[_0x15d2c(0x21f)](_0x15d2c(0x1ea));}});