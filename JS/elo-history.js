const a16_0x2ec055=a16_0x814a;(function(_0x245f42,_0x2bf3e7){const _0xdf4fca=a16_0x814a,_0x892bae=_0x245f42();while(!![]){try{const _0x4f7545=-parseInt(_0xdf4fca(0x110))/0x1*(-parseInt(_0xdf4fca(0x121))/0x2)+parseInt(_0xdf4fca(0x106))/0x3+-parseInt(_0xdf4fca(0x12d))/0x4*(-parseInt(_0xdf4fca(0x11e))/0x5)+-parseInt(_0xdf4fca(0x122))/0x6+-parseInt(_0xdf4fca(0x11c))/0x7*(-parseInt(_0xdf4fca(0x11f))/0x8)+-parseInt(_0xdf4fca(0x11b))/0x9+-parseInt(_0xdf4fca(0x12b))/0xa*(parseInt(_0xdf4fca(0x131))/0xb);if(_0x4f7545===_0x2bf3e7)break;else _0x892bae['push'](_0x892bae['shift']());}catch(_0x5d2675){_0x892bae['push'](_0x892bae['shift']());}}}(a16_0x1cd3,0xd9ad6));const a16_0x5ae522=(function(){let _0x2c3fec=!![];return function(_0x15a44b,_0x188027){const _0x3ca971=_0x2c3fec?function(){if(_0x188027){const _0x45e287=_0x188027['apply'](_0x15a44b,arguments);return _0x188027=null,_0x45e287;}}:function(){};return _0x2c3fec=![],_0x3ca971;};}()),a16_0x325cc0=a16_0x5ae522(this,function(){const _0x1743db=a16_0x814a;return a16_0x325cc0[_0x1743db(0x12c)]()[_0x1743db(0x109)](_0x1743db(0x125))[_0x1743db(0x12c)]()[_0x1743db(0x12e)](a16_0x325cc0)[_0x1743db(0x109)](_0x1743db(0x125));});a16_0x325cc0();const a16_0x30689e=(function(){let _0x12ae91=!![];return function(_0x1a48a6,_0xb8e316){const _0x31ab94=_0x12ae91?function(){if(_0xb8e316){const _0xbe23e6=_0xb8e316['apply'](_0x1a48a6,arguments);return _0xb8e316=null,_0xbe23e6;}}:function(){};return _0x12ae91=![],_0x31ab94;};}()),a16_0x47daaf=a16_0x30689e(this,function(){const _0x3d452a=a16_0x814a;let _0x13683c;try{const _0x1b9ea9=Function(_0x3d452a(0x10e)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x13683c=_0x1b9ea9();}catch(_0x45564c){_0x13683c=window;}const _0x48cd24=_0x13683c[_0x3d452a(0x11d)]=_0x13683c['console']||{},_0x4f90f0=[_0x3d452a(0x133),_0x3d452a(0x107),_0x3d452a(0x116),_0x3d452a(0x120),_0x3d452a(0x10b),'table',_0x3d452a(0x10c)];for(let _0x2f3830=0x0;_0x2f3830<_0x4f90f0[_0x3d452a(0x113)];_0x2f3830++){const _0x3139dd=a16_0x30689e[_0x3d452a(0x12e)][_0x3d452a(0x127)][_0x3d452a(0x11a)](a16_0x30689e),_0x574586=_0x4f90f0[_0x2f3830],_0x332297=_0x48cd24[_0x574586]||_0x3139dd;_0x3139dd[_0x3d452a(0x12a)]=a16_0x30689e[_0x3d452a(0x11a)](a16_0x30689e),_0x3139dd[_0x3d452a(0x12c)]=_0x332297[_0x3d452a(0x12c)][_0x3d452a(0x11a)](_0x332297),_0x48cd24[_0x574586]=_0x3139dd;}});function a16_0x1cd3(){const _0x15e3af=['docs','eloHistory','data','desc','3799647XGNpde','warn','Unknown\x20Player','search','timestamp','exception','trace','Error\x20recording\x20ELO\x20history:','return\x20(function()\x20','Gold','752996EFzkIu','Unranked','all','length','demotion','match','info','username','Bronze','player','bind','12775617iHgaiA','526407nkILRF','console','203525dPlPth','8UVPDFm','error','2fPnidc','1857336YPxVfg','ELO\x20history\x20recorded\x20for\x20','exists','(((.+)+)+)+$','Silver','prototype','promotion','Error\x20fetching\x20ELO\x20history:','__proto__','10aQRpIP','toString','144GOvxYz','constructor','Emerald','map','10333961jTmDyV','players','log'];a16_0x1cd3=function(){return _0x15e3af;};return a16_0x1cd3();}a16_0x47daaf();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':a16_0x2ec055(0x10f),'elo':0x708},{'name':a16_0x2ec055(0x126),'elo':0x640},{'name':a16_0x2ec055(0x118),'elo':0x578},{'name':a16_0x2ec055(0x111),'elo':0x4b0}];async function getUsernameById(_0x461e52){const _0x5e8336=a16_0x2ec055;try{if(!_0x461e52)return _0x5e8336(0x108);const _0x310849=await getDoc(doc(db,_0x5e8336(0x132),_0x461e52));return _0x310849[_0x5e8336(0x124)]()?_0x310849[_0x5e8336(0x104)]()[_0x5e8336(0x117)]:_0x5e8336(0x108);}catch(_0x33ce7b){return console[_0x5e8336(0x120)]('Error\x20fetching\x20username:',_0x33ce7b),_0x5e8336(0x108);}}export async function recordEloChange({playerId:_0x25c22e,previousElo:_0x2cc005,newElo:_0x400678,opponentId:_0x3e7ec8,matchResult:_0x482389,previousPosition:_0x1b4bbc,newPosition:_0x28b507,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x2872c2}){const _0x4a25d7=a16_0x2ec055;try{const _0x3562b2=doc(collection(db,_0x4a25d7(0x103)));let _0x7b786=_0x4a25d7(0x115);if(isPromotion)_0x7b786=_0x4a25d7(0x128);if(isDemotion)_0x7b786=_0x4a25d7(0x114);let _0xcfafe2=_0x4a25d7(0x111);if(_0x400678>=0x834)_0xcfafe2=_0x4a25d7(0x12f);else{if(_0x400678>=0x708)_0xcfafe2=_0x4a25d7(0x10f);else{if(_0x400678>=0x640)_0xcfafe2=_0x4a25d7(0x126);else{if(_0x400678>=0x578)_0xcfafe2=_0x4a25d7(0x118);}}}return await setDoc(_0x3562b2,{'type':_0x7b786,'player':_0x25c22e,'opponent':_0x3e7ec8,'previousElo':_0x2cc005,'newElo':_0x400678,'change':_0x400678-_0x2cc005,'matchResult':_0x482389,'previousPosition':_0x1b4bbc,'newPosition':_0x28b507,'rankAchieved':_0xcfafe2,'timestamp':_0x2872c2}),console[_0x4a25d7(0x133)](_0x4a25d7(0x123)+_0x25c22e),!![];}catch(_0x1e0554){console[_0x4a25d7(0x120)](_0x4a25d7(0x10d),_0x1e0554);throw _0x1e0554;}}export async function getEloHistory(){const _0x148e87=a16_0x2ec055;try{const _0x4096b8=collection(db,'eloHistory'),_0x5de25e=query(_0x4096b8,orderBy(_0x148e87(0x10a),_0x148e87(0x105))),_0x35d151=await getDocs(_0x5de25e),_0x3172a1=_0x35d151[_0x148e87(0x134)][_0x148e87(0x130)](async _0x2d0fc2=>{const _0x19235d=_0x148e87,_0x191dd7=_0x2d0fc2['data'](),[_0x2598d9,_0x11c419]=await Promise[_0x19235d(0x112)]([getUsernameById(_0x191dd7[_0x19235d(0x119)]),getUsernameById(_0x191dd7['opponent'])]);return{..._0x191dd7,'playerUsername':_0x2598d9,'opponentUsername':_0x11c419,'change':_0x191dd7['newElo']-_0x191dd7['previousElo'],'timestamp':_0x191dd7[_0x19235d(0x10a)]};}),_0x834dfa=await Promise[_0x148e87(0x112)](_0x3172a1);return{'entries':_0x834dfa};}catch(_0x141b44){console[_0x148e87(0x120)](_0x148e87(0x129),_0x141b44);throw _0x141b44;}}function a16_0x814a(_0x32f5bc,_0x209ad7){const _0x37ab0b=a16_0x1cd3();return a16_0x814a=function(_0x47daaf,_0x30689e){_0x47daaf=_0x47daaf-0x103;let _0x1fef37=_0x37ab0b[_0x47daaf];return _0x1fef37;},a16_0x814a(_0x32f5bc,_0x209ad7);}export function resetPagination(){lastVisible=null;}