const a33_0x4afd5a=a33_0xd82d;(function(_0x2fb3cf,_0x4f0912){const _0x33ab41=a33_0xd82d,_0x3206a2=_0x2fb3cf();while(!![]){try{const _0x1b156f=parseInt(_0x33ab41(0x237))/0x1*(parseInt(_0x33ab41(0x207))/0x2)+-parseInt(_0x33ab41(0x222))/0x3*(parseInt(_0x33ab41(0x244))/0x4)+parseInt(_0x33ab41(0x21d))/0x5*(parseInt(_0x33ab41(0x247))/0x6)+-parseInt(_0x33ab41(0x21c))/0x7+parseInt(_0x33ab41(0x219))/0x8+-parseInt(_0x33ab41(0x202))/0x9*(parseInt(_0x33ab41(0x208))/0xa)+parseInt(_0x33ab41(0x231))/0xb;if(_0x1b156f===_0x4f0912)break;else _0x3206a2['push'](_0x3206a2['shift']());}catch(_0x15aa58){_0x3206a2['push'](_0x3206a2['shift']());}}}(a33_0x5661,0x8c9b5));const a33_0x2058a8=(function(){let _0x2d8089=!![];return function(_0x1a0a31,_0x580fa5){const _0x35d17b=_0x2d8089?function(){const _0x4633d8=a33_0xd82d;if(_0x580fa5){const _0x2531d3=_0x580fa5[_0x4633d8(0x249)](_0x1a0a31,arguments);return _0x580fa5=null,_0x2531d3;}}:function(){};return _0x2d8089=![],_0x35d17b;};}()),a33_0x772071=a33_0x2058a8(this,function(){const _0x3c97b3=a33_0xd82d;return a33_0x772071['toString']()[_0x3c97b3(0x20c)]('(((.+)+)+)+$')[_0x3c97b3(0x212)]()[_0x3c97b3(0x25f)](a33_0x772071)[_0x3c97b3(0x20c)](_0x3c97b3(0x1fa));});a33_0x772071();const a33_0x1e7767=(function(){let _0x197d2e=!![];return function(_0x1b5489,_0x36ecf6){const _0xc326af=_0x197d2e?function(){const _0x439b24=a33_0xd82d;if(_0x36ecf6){const _0x2d1b6c=_0x36ecf6[_0x439b24(0x249)](_0x1b5489,arguments);return _0x36ecf6=null,_0x2d1b6c;}}:function(){};return _0x197d2e=![],_0xc326af;};}()),a33_0x2a517a=a33_0x1e7767(this,function(){const _0x16ac30=a33_0xd82d,_0x5b0ee5=function(){const _0x5b5db6=a33_0xd82d;let _0x152965;try{_0x152965=Function(_0x5b5db6(0x22e)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x40358f){_0x152965=window;}return _0x152965;},_0x5c30f8=_0x5b0ee5(),_0x4368bd=_0x5c30f8[_0x16ac30(0x268)]=_0x5c30f8[_0x16ac30(0x268)]||{},_0x27d385=[_0x16ac30(0x1f6),_0x16ac30(0x236),_0x16ac30(0x242),_0x16ac30(0x259),'exception','table',_0x16ac30(0x220)];for(let _0x56386b=0x0;_0x56386b<_0x27d385['length'];_0x56386b++){const _0x320d67=a33_0x1e7767[_0x16ac30(0x25f)][_0x16ac30(0x20f)]['bind'](a33_0x1e7767),_0x26a773=_0x27d385[_0x56386b],_0x432ab1=_0x4368bd[_0x26a773]||_0x320d67;_0x320d67['__proto__']=a33_0x1e7767[_0x16ac30(0x24d)](a33_0x1e7767),_0x320d67[_0x16ac30(0x212)]=_0x432ab1[_0x16ac30(0x212)][_0x16ac30(0x24d)](_0x432ab1),_0x4368bd[_0x26a773]=_0x320d67;}});a33_0x2a517a();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x435057 from'./firebase-idle-wrapper.js';const styleEl=document[a33_0x4afd5a(0x22f)](a33_0x4afd5a(0x24c));styleEl[a33_0x4afd5a(0x25e)]='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document[a33_0x4afd5a(0x256)][a33_0x4afd5a(0x251)](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;function a33_0x5661(){const _0x204e84=['map','find','prototype','change','D3\x20Ladder\x20table\x20body\x20not\x20found','toString','set','\x20players','0.85em','#FFD700','push','D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:','7486000MMgaaL','D3:\x20Final\x20ELO\x20changes:','wins','5751347sFHvKY','1030CMTzGy','player','playerId','trace','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>','1119Cvpxnb','visible','approvedMatchesD3','username','includes','desc','D3:\x20','loserUsername','winRate','newElo','\x20fallback\x20ELO\x20change:\x20','Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:','return\x20(function()\x20','createElement','previousElo','13087789pNIyhb','#ladder-d3\x20tbody',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20','totalMatches','warn','1jirfZW','losses','opacity','#50C878','innerHTML','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','length','country','forEach','bold','data','info','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','8428JHQDmD','empty','get','9888MHYnSL','querySelectorAll','apply','gameMode','D3:\x20Found\x20','style','bind','Error\x20loading\x20D3\x20ladder:','position','entries','appendChild','td:nth-child(3)','inline','seconds','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','head','sort','.trend-indicator','error','size','timestamp','message','toFixed','textContent','constructor','visibility','display','querySelector','string','has','totalDeaths','fontWeight','<img\x20src=\x22../images/flags/','console','loserScore',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','playerUsername','D3:\x20Fallback\x20query\x20failed:','Error\x20updating\x20D3\x20player\x20positions:','ceil','totalKills','playersD3','%</td>\x0a\x20\x20\x20\x20</tr>','from','winnerScore','#4CAF50','eloHistory','then','log','pilot','toDate','gray','(((.+)+)+)+$','now','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','userProfiles','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20','kda','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','4313583wkRNQK','Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:','#F44336','fontSize','toLowerCase','1353988whjyhE','20suNGXR','D3:\x20Player\x20ID\x20mappings:','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','search'];a33_0x5661=function(){return _0x204e84;};return a33_0x5661();}async function displayLadderD3(_0x3a6f45=![]){const _0x1aa3f7=a33_0x4afd5a,_0xe238d3=document[_0x1aa3f7(0x262)](_0x1aa3f7(0x232));if(!_0xe238d3){console[_0x1aa3f7(0x259)](_0x1aa3f7(0x211));return;}_0xe238d3[_0x1aa3f7(0x23b)]=_0x1aa3f7(0x221);try{const _0x4df8c8=Date['now']();if(!_0x3a6f45&&playerCacheD3['data']&&_0x4df8c8-playerCacheD3[_0x1aa3f7(0x25b)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3[_0x1aa3f7(0x241)]);return;}const _0x2ff940=collection(db,_0x1aa3f7(0x270)),_0x3dabf5=await getDocs(_0x2ff940),_0x57e531=[];_0x3dabf5['forEach'](_0x1ac08b=>{const _0x4ee204=_0x1aa3f7,_0x4f4c33=_0x1ac08b[_0x4ee204(0x241)]();_0x4f4c33['username']&&_0x57e531[_0x4ee204(0x217)]({..._0x4f4c33,'id':_0x1ac08b['id'],'elo':_0x4f4c33['eloRating']||0x0,'position':_0x4f4c33[_0x4ee204(0x24f)]||Number['MAX_SAFE_INTEGER']});});const _0x2728b2=collection(db,_0x1aa3f7(0x1fd)),_0x321364=await getDocs(_0x2728b2),_0x243833=new Map();_0x321364['forEach'](_0x5256e4=>{const _0x5354f6=_0x1aa3f7,_0x59c180=_0x5256e4[_0x5354f6(0x241)]();_0x59c180[_0x5354f6(0x225)]&&_0x243833[_0x5354f6(0x213)](_0x59c180[_0x5354f6(0x225)][_0x5354f6(0x206)](),_0x59c180);});for(const _0x1c0d82 of _0x57e531){const _0x159cf3=_0x1c0d82[_0x1aa3f7(0x225)][_0x1aa3f7(0x206)]();if(_0x243833[_0x1aa3f7(0x264)](_0x159cf3)){const _0x1b2cc2=_0x243833['get'](_0x159cf3);_0x1b2cc2[_0x1aa3f7(0x23e)]&&(_0x1c0d82['country']=_0x1b2cc2['country'][_0x1aa3f7(0x206)]());}}const _0x2d06aa=_0x57e531[_0x1aa3f7(0x20d)](_0x5d981e=>_0x5d981e[_0x1aa3f7(0x225)]),_0x737d6d=await fetchBatchMatchStatsD3(_0x2d06aa);_0x57e531[_0x1aa3f7(0x257)]((_0x3b1577,_0x5b4f93)=>{const _0x546d60=_0x1aa3f7,_0x9ed47f=_0x737d6d['get'](_0x3b1577['username'])?.[_0x546d60(0x235)]||0x0,_0x15e754=_0x737d6d[_0x546d60(0x246)](_0x5b4f93['username'])?.[_0x546d60(0x235)]||0x0;if(_0x9ed47f===0x0!==(_0x15e754===0x0))return _0x9ed47f===0x0?0x1:-0x1;return(_0x3b1577[_0x546d60(0x24f)]||0x3e7)-(_0x5b4f93[_0x546d60(0x24f)]||0x3e7);}),_0x57e531[_0x1aa3f7(0x23f)]((_0x3e5a11,_0x1aed32)=>{const _0x574348=_0x1aa3f7;_0x3e5a11[_0x574348(0x24f)]=_0x1aed32+0x1;}),playerCacheD3[_0x1aa3f7(0x241)]=_0x57e531,playerCacheD3[_0x1aa3f7(0x25b)]=_0x4df8c8,updateLadderDisplayD3(_0x57e531);}catch(_0x386b91){console[_0x1aa3f7(0x259)](_0x1aa3f7(0x24e),_0x386b91),_0xe238d3[_0x1aa3f7(0x23b)]=_0x1aa3f7(0x234)+_0x386b91[_0x1aa3f7(0x25c)]+_0x1aa3f7(0x1fe);}}function calculateStreakDays(_0x4398f0){const _0x399f2f=a33_0x4afd5a;if(!_0x4398f0)return 0x0;const _0x2d938c=_0x4398f0[_0x399f2f(0x1f8)](),_0x33a2f7=new Date(),_0x3a1a88=Math['abs'](_0x33a2f7-_0x2d938c);return Math[_0x399f2f(0x26e)](_0x3a1a88/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x333c33,_0x2e9a40){const _0x5b6cca=a33_0x4afd5a;try{const _0xff3d93=collection(db,_0x5b6cca(0x270)),_0x2feff8=await getDocs(_0xff3d93),_0x397c5c=[];_0x2feff8[_0x5b6cca(0x23f)](_0x28d280=>{const _0x4302bf=_0x5b6cca;_0x397c5c['push']({'id':_0x28d280['id'],..._0x28d280[_0x4302bf(0x241)]()});});const _0x563092=_0x397c5c['find'](_0x174fdc=>_0x174fdc['username']===_0x333c33),_0x4a4f55=_0x397c5c[_0x5b6cca(0x20e)](_0x86e167=>_0x86e167[_0x5b6cca(0x225)]===_0x2e9a40);if(!_0x563092||!_0x4a4f55){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x563092[_0x5b6cca(0x24f)]>_0x4a4f55['position']){const _0x2a5350=_0x4a4f55[_0x5b6cca(0x24f)];for(const _0x432a41 of _0x397c5c){_0x432a41[_0x5b6cca(0x24f)]>=_0x4a4f55[_0x5b6cca(0x24f)]&&_0x432a41[_0x5b6cca(0x24f)]<_0x563092[_0x5b6cca(0x24f)]&&_0x432a41['username']!==_0x333c33&&await updateDoc(doc(db,_0x5b6cca(0x270),_0x432a41['id']),{'position':_0x432a41[_0x5b6cca(0x24f)]+0x1});}await updateDoc(doc(db,_0x5b6cca(0x270),_0x563092['id']),{'position':_0x2a5350});if(_0x2a5350===0x1){const _0x338049=doc(db,_0x5b6cca(0x270),_0x563092['id']),_0x3ad2d8=await getDoc(_0x338049);!_0x3ad2d8['data']()['firstPlaceDate']&&await updateDoc(_0x338049,{'firstPlaceDate':Timestamp[_0x5b6cca(0x1fb)]()});}if(_0x4a4f55['position']===0x1){const _0xea2e7d=doc(db,_0x5b6cca(0x270),_0x4a4f55['id']);await updateDoc(_0xea2e7d,{'firstPlaceDate':null});}}}catch(_0x40088f){console[_0x5b6cca(0x259)](_0x5b6cca(0x26d),_0x40088f);}}async function updateLadderDisplayD3(_0x5cf82f){const _0x3f01d0=a33_0x4afd5a;_0x5cf82f[_0x3f01d0(0x257)]((_0x482f78,_0x387ab3)=>_0x482f78[_0x3f01d0(0x24f)]-_0x387ab3[_0x3f01d0(0x24f)]);const _0xf08828=document[_0x3f01d0(0x262)](_0x3f01d0(0x232));if(!_0xf08828)return;_0xf08828['innerHTML']='';const _0x3c0336=_0x5cf82f['map'](_0x346d8c=>_0x346d8c[_0x3f01d0(0x225)]),_0x4a87a3=await fetchBatchMatchStatsD3(_0x3c0336),_0x4133b9=document[_0x3f01d0(0x262)]('#ladder-d3\x20thead\x20tr');_0x4133b9['innerHTML']=_0x3f01d0(0x1ff);const _0x5a4b44=_0x5cf82f[_0x3f01d0(0x20d)](_0x340a75=>{const _0x6ed95d=_0x3f01d0,_0x18ad99=_0x4a87a3[_0x6ed95d(0x246)](_0x340a75[_0x6ed95d(0x225)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x340a75,_0x18ad99);})['join']('');_0xf08828['innerHTML']=_0x5a4b44,getPlayersLastEloChangesD3(_0x3c0336)[_0x3f01d0(0x1f5)](_0x513013=>{const _0x375941=_0x3f01d0,_0x119dbd=new Map();_0xf08828[_0x375941(0x248)]('tr')['forEach']((_0x2be711,_0x3efad1)=>{const _0x30717a=_0x375941;_0x3efad1<_0x3c0336['length']&&_0x119dbd[_0x30717a(0x213)](_0x3c0336[_0x3efad1],_0x2be711);}),_0x513013[_0x375941(0x23f)]((_0x239bde,_0x594f6f)=>{const _0x44293f=_0x375941,_0x3057dc=_0x119dbd[_0x44293f(0x246)](_0x594f6f);if(_0x3057dc&&_0x239bde!==0x0){const _0x20095a=_0x3057dc[_0x44293f(0x262)](_0x44293f(0x252));if(_0x20095a){const _0x930ca8=_0x239bde>0x0?'+'+_0x239bde:''+_0x239bde,_0x8ac2fe=_0x20095a[_0x44293f(0x262)](_0x44293f(0x258));_0x8ac2fe&&(_0x8ac2fe[_0x44293f(0x25e)]=_0x930ca8,_0x8ac2fe[_0x44293f(0x24c)]['color']=_0x239bde>0x0?_0x44293f(0x1f3):_0x44293f(0x204),_0x8ac2fe[_0x44293f(0x24c)][_0x44293f(0x266)]=_0x44293f(0x240),_0x8ac2fe[_0x44293f(0x24c)][_0x44293f(0x205)]=_0x44293f(0x215),_0x8ac2fe[_0x44293f(0x24c)][_0x44293f(0x261)]=_0x44293f(0x253),_0x8ac2fe[_0x44293f(0x24c)][_0x44293f(0x260)]=_0x44293f(0x223),_0x8ac2fe['style'][_0x44293f(0x239)]='1');}}});})['catch'](_0x20752d=>console[_0x3f01d0(0x259)](_0x3f01d0(0x203),_0x20752d));}async function fetchBatchMatchStatsD3(_0x37663a){const _0x4ac1b4=a33_0x4afd5a,_0x1f2763=new Map();try{const _0x1a99b6=collection(db,_0x4ac1b4(0x224)),_0xee607=await getDocs(_0x1a99b6);_0xee607[_0x4ac1b4(0x23f)](_0x52ba22=>{const _0x37b384=_0x4ac1b4,_0x448587=_0x52ba22[_0x37b384(0x241)]();if(_0x37663a[_0x37b384(0x226)](_0x448587['winnerUsername'])){const _0x4cc00d=_0x448587['winnerUsername'];!_0x1f2763[_0x37b384(0x264)](_0x4cc00d)&&_0x1f2763[_0x37b384(0x213)](_0x4cc00d,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x4e2d30=_0x1f2763[_0x37b384(0x246)](_0x4cc00d);_0x4e2d30[_0x37b384(0x21b)]++,_0x4e2d30[_0x37b384(0x235)]++,_0x4e2d30['totalKills']+=parseInt(_0x448587[_0x37b384(0x1f2)])||0x0,_0x4e2d30['totalDeaths']+=parseInt(_0x448587[_0x37b384(0x269)])||0x0;}if(_0x37663a[_0x37b384(0x226)](_0x448587[_0x37b384(0x229)])){const _0x15f5f8=_0x448587[_0x37b384(0x229)];!_0x1f2763['has'](_0x15f5f8)&&_0x1f2763[_0x37b384(0x213)](_0x15f5f8,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x37b282=_0x1f2763[_0x37b384(0x246)](_0x15f5f8);_0x37b282[_0x37b384(0x238)]++,_0x37b282[_0x37b384(0x235)]++,_0x37b282[_0x37b384(0x26f)]+=parseInt(_0x448587[_0x37b384(0x269)])||0x0,_0x37b282[_0x37b384(0x265)]+=parseInt(_0x448587[_0x37b384(0x1f2)])||0x0;}}),_0x1f2763['forEach'](_0x575164=>{const _0x33160f=_0x4ac1b4;_0x575164[_0x33160f(0x200)]=_0x575164[_0x33160f(0x265)]>0x0?(_0x575164[_0x33160f(0x26f)]/_0x575164[_0x33160f(0x265)])[_0x33160f(0x25d)](0x2):_0x575164[_0x33160f(0x26f)],_0x575164[_0x33160f(0x22a)]=_0x575164['totalMatches']>0x0?(_0x575164[_0x33160f(0x21b)]/_0x575164[_0x33160f(0x235)]*0x64)[_0x33160f(0x25d)](0x1):0x0;});}catch(_0x28367e){console[_0x4ac1b4(0x259)](_0x4ac1b4(0x22d),_0x28367e);}return _0x1f2763;}function a33_0xd82d(_0x11065f,_0x8f7018){const _0xc1d095=a33_0x5661();return a33_0xd82d=function(_0x2a517a,_0x1e7767){_0x2a517a=_0x2a517a-0x1f1;let _0x44f0db=_0xc1d095[_0x2a517a];return _0x44f0db;},a33_0xd82d(_0x11065f,_0x8f7018);}function createPlayerRowD3(_0x55b0e1,_0x3550a0){const _0xfac3f2=a33_0x4afd5a,_0x393320=parseFloat(_0x55b0e1['elo'])||0x0;let _0x29bdc=_0xfac3f2(0x1f9);if(_0x393320>=0x7d0)_0x29bdc=_0xfac3f2(0x23a);else{if(_0x393320>=0x708)_0x29bdc=_0xfac3f2(0x216);else{if(_0x393320>=0x640)_0x29bdc='#C0C0C0';else _0x393320>=0x578&&(_0x29bdc='#CD7F32');}}let _0x285d16='';return _0x55b0e1[_0xfac3f2(0x23e)]&&(_0x285d16=_0xfac3f2(0x267)+_0x55b0e1[_0xfac3f2(0x23e)][_0xfac3f2(0x206)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x55b0e1[_0xfac3f2(0x23e)]+_0xfac3f2(0x1fc)),_0xfac3f2(0x23c)+_0x55b0e1['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x55b0e1['username'])+_0xfac3f2(0x20a)+_0x29bdc+_0xfac3f2(0x233)+_0x55b0e1[_0xfac3f2(0x225)]+_0xfac3f2(0x243)+_0x285d16+_0xfac3f2(0x20b)+_0x29bdc+_0xfac3f2(0x26a)+_0x393320+_0xfac3f2(0x255)+_0x3550a0[_0xfac3f2(0x235)]+_0xfac3f2(0x201)+_0x3550a0[_0xfac3f2(0x21b)]+_0xfac3f2(0x201)+_0x3550a0[_0xfac3f2(0x238)]+_0xfac3f2(0x201)+_0x3550a0['kda']+_0xfac3f2(0x201)+_0x3550a0[_0xfac3f2(0x22a)]+_0xfac3f2(0x271);}async function getPlayersLastEloChangesD3(_0xf06a22){const _0x4fbd62=a33_0x4afd5a,_0x3d8892=new Map();_0xf06a22[_0x4fbd62(0x23f)](_0x592303=>_0x3d8892[_0x4fbd62(0x213)](_0x592303,0x0));try{console[_0x4fbd62(0x1f6)](_0x4fbd62(0x218),_0xf06a22);const _0x36c81f=new Map(),_0x452b60=await getDocs(collection(db,_0x4fbd62(0x270)));_0x452b60[_0x4fbd62(0x23f)](_0x1e11c5=>{const _0x5a03a2=_0x4fbd62,_0x5b201c=_0x1e11c5[_0x5a03a2(0x241)]();_0x5b201c[_0x5a03a2(0x225)]&&_0x36c81f[_0x5a03a2(0x213)](_0x1e11c5['id'],_0x5b201c[_0x5a03a2(0x225)]);}),console[_0x4fbd62(0x1f6)](_0x4fbd62(0x209),Array[_0x4fbd62(0x1f1)](_0x36c81f[_0x4fbd62(0x250)]()));const _0xcd2779=collection(db,'eloHistoryD3'),_0x15b8d0=query(_0xcd2779,orderBy(_0x4fbd62(0x25b),_0x4fbd62(0x227)),limit(0x64)),_0x5f30b1=await getDocs(_0x15b8d0);_0x5f30b1[_0x4fbd62(0x245)]?console['log']('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console['log']('D3:\x20Found\x20'+_0x5f30b1[_0x4fbd62(0x25a)]+'\x20entries\x20in\x20eloHistoryD3');const _0x15b470=new Map();_0x5f30b1[_0x4fbd62(0x23f)](_0x5aa6b8=>{const _0x76d469=_0x4fbd62,_0x2ef0e7=_0x5aa6b8[_0x76d469(0x241)]();let _0x833aa6=null;if(_0x2ef0e7['username'])_0x833aa6=_0x2ef0e7[_0x76d469(0x225)];else{if(_0x2ef0e7[_0x76d469(0x26b)])_0x833aa6=_0x2ef0e7[_0x76d469(0x26b)];else{if(_0x2ef0e7[_0x76d469(0x21e)]&&typeof _0x2ef0e7[_0x76d469(0x21e)]===_0x76d469(0x263))_0x833aa6=_0x2ef0e7[_0x76d469(0x21e)];else{if(_0x2ef0e7[_0x76d469(0x21e)]&&_0x36c81f[_0x76d469(0x264)](_0x2ef0e7['player']))_0x833aa6=_0x36c81f[_0x76d469(0x246)](_0x2ef0e7[_0x76d469(0x21e)]);else _0x2ef0e7[_0x76d469(0x21f)]&&_0x36c81f[_0x76d469(0x264)](_0x2ef0e7[_0x76d469(0x21f)])&&(_0x833aa6=_0x36c81f['get'](_0x2ef0e7[_0x76d469(0x21f)]));}}}(_0x2ef0e7['username']===_0x76d469(0x1f7)||_0x2ef0e7[_0x76d469(0x26b)]==='pilot'||_0x2ef0e7[_0x76d469(0x21e)]&&_0x36c81f['get'](_0x2ef0e7['player'])==='pilot')&&console[_0x76d469(0x1f6)]('D3:\x20Found\x20pilot\x20entry:',_0x2ef0e7),_0x833aa6&&_0xf06a22[_0x76d469(0x226)](_0x833aa6)&&(!_0x15b470[_0x76d469(0x264)](_0x833aa6)&&_0x15b470[_0x76d469(0x213)](_0x833aa6,[]),_0x15b470['get'](_0x833aa6)[_0x76d469(0x217)]({..._0x2ef0e7,'timestamp':_0x2ef0e7['timestamp']?.[_0x76d469(0x254)]||0x0}));}),console[_0x4fbd62(0x1f6)]('D3:\x20Found\x20entries\x20for\x20'+_0x15b470['size']+_0x4fbd62(0x214)),_0x15b470['forEach']((_0x194415,_0x18366f)=>{const _0x521db9=_0x4fbd62;if(_0x194415[_0x521db9(0x23d)]>0x0){_0x194415[_0x521db9(0x257)]((_0x3b0c3a,_0xac6bf1)=>_0xac6bf1[_0x521db9(0x25b)]-_0x3b0c3a[_0x521db9(0x25b)]);const _0x270937=_0x194415[_0x521db9(0x20e)](_0x4a09da=>_0x4a09da[_0x521db9(0x210)]!==undefined||_0x4a09da[_0x521db9(0x22b)]!==undefined&&_0x4a09da['previousElo']!==undefined);if(_0x270937){let _0x3a913e;if(_0x270937['change']!==undefined)_0x3a913e=_0x270937[_0x521db9(0x210)];else _0x270937[_0x521db9(0x22b)]!==undefined&&_0x270937[_0x521db9(0x230)]!==undefined&&(_0x3a913e=_0x270937[_0x521db9(0x22b)]-_0x270937['previousElo']);_0x3a913e!==undefined&&(_0x3d8892[_0x521db9(0x213)](_0x18366f,_0x3a913e),console['log'](_0x521db9(0x228)+_0x18366f+'\x20ELO\x20change:\x20'+_0x3a913e));}}});if(_0x15b470['size']===0x0){console['log']('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x5dcd37=collection(db,_0x4fbd62(0x1f4)),_0x2fe331=query(_0x5dcd37,where(_0x4fbd62(0x24a),'==','D3'),orderBy(_0x4fbd62(0x25b),_0x4fbd62(0x227)),limit(0x32));try{const _0x25263d=await getDocs(_0x2fe331);console[_0x4fbd62(0x1f6)](_0x4fbd62(0x24b)+_0x25263d['size']+'\x20fallback\x20entries'),_0x25263d['forEach'](_0x13eaf4=>{const _0x29788c=_0x4fbd62,_0x58f6b9=_0x13eaf4[_0x29788c(0x241)]();let _0x1f9e1d=_0x58f6b9['username']||_0x58f6b9['playerUsername'];!_0x1f9e1d&&_0x58f6b9[_0x29788c(0x21e)]&&_0x36c81f[_0x29788c(0x264)](_0x58f6b9[_0x29788c(0x21e)])&&(_0x1f9e1d=_0x36c81f[_0x29788c(0x246)](_0x58f6b9[_0x29788c(0x21e)]));if(_0x1f9e1d&&_0xf06a22[_0x29788c(0x226)](_0x1f9e1d)){const _0x4df5aa=_0x58f6b9[_0x29788c(0x210)]||(_0x58f6b9['newElo']!==undefined&&_0x58f6b9[_0x29788c(0x230)]!==undefined?_0x58f6b9[_0x29788c(0x22b)]-_0x58f6b9[_0x29788c(0x230)]:0x0);_0x4df5aa!==0x0&&(_0x3d8892[_0x29788c(0x213)](_0x1f9e1d,_0x4df5aa),console[_0x29788c(0x1f6)](_0x29788c(0x228)+_0x1f9e1d+_0x29788c(0x22c)+_0x4df5aa));}});}catch(_0x732fd){console[_0x4fbd62(0x1f6)](_0x4fbd62(0x26c),_0x732fd);}}const _0x409430=Array['from'](_0x3d8892['entries']())['filter'](([_0x15fbcb,_0x353e15])=>_0x353e15!==0x0);console['log'](_0x4fbd62(0x21a),_0x409430);}catch(_0x5671fa){console[_0x4fbd62(0x259)]('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x5671fa);}return _0x3d8892;}export{displayLadderD3,updatePlayerPositions};