const a0_0x35282b=a0_0x3d8d;(function(_0x33196c,_0x2fe414){const _0x18cb0b=a0_0x3d8d,_0x2c22db=_0x33196c();while(!![]){try{const _0x30e5d8=parseInt(_0x18cb0b(0x16f))/0x1*(-parseInt(_0x18cb0b(0x185))/0x2)+-parseInt(_0x18cb0b(0x198))/0x3*(parseInt(_0x18cb0b(0x19a))/0x4)+parseInt(_0x18cb0b(0x191))/0x5+-parseInt(_0x18cb0b(0x1b8))/0x6+-parseInt(_0x18cb0b(0x16c))/0x7*(parseInt(_0x18cb0b(0x161))/0x8)+-parseInt(_0x18cb0b(0x177))/0x9+-parseInt(_0x18cb0b(0x1c4))/0xa*(-parseInt(_0x18cb0b(0x15c))/0xb);if(_0x30e5d8===_0x2fe414)break;else _0x2c22db['push'](_0x2c22db['shift']());}catch(_0x4616fd){_0x2c22db['push'](_0x2c22db['shift']());}}}(a0_0xccfc,0xf3bb4));const a0_0x575623=(function(){let _0x19ad03=!![];return function(_0x1b9a2a,_0x483f70){const _0xa8c4a6=_0x19ad03?function(){if(_0x483f70){const _0x5b78e=_0x483f70['apply'](_0x1b9a2a,arguments);return _0x483f70=null,_0x5b78e;}}:function(){};return _0x19ad03=![],_0xa8c4a6;};}()),a0_0x5d94de=a0_0x575623(this,function(){const _0x582b3b=a0_0x3d8d,_0x2f03b7=function(){let _0x78c9e9;try{_0x78c9e9=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5cf4ec){_0x78c9e9=window;}return _0x78c9e9;},_0x267360=_0x2f03b7(),_0x26b37a=_0x267360['console']=_0x267360['console']||{},_0x59ab9a=[_0x582b3b(0x15d),'warn',_0x582b3b(0x175),'error','exception','table','trace'];for(let _0x2f6109=0x0;_0x2f6109<_0x59ab9a['length'];_0x2f6109++){const _0x4c7453=a0_0x575623['constructor'][_0x582b3b(0x1cf)][_0x582b3b(0x1b5)](a0_0x575623),_0x196ba5=_0x59ab9a[_0x2f6109],_0x873c7e=_0x26b37a[_0x196ba5]||_0x4c7453;_0x4c7453['__proto__']=a0_0x575623['bind'](a0_0x575623),_0x4c7453['toString']=_0x873c7e['toString'][_0x582b3b(0x1b5)](_0x873c7e),_0x26b37a[_0x196ba5]=_0x4c7453;}});a0_0x5d94de();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';function a0_0xccfc(){const _0x5e17b8=['innerHTML','date','querySelector','duos-ladder-container','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','Duos\x20ladder\x20is\x20currently\x20admin-only','exists','d1-ladder-container','addEventListener','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','7sFtldJ','label[for=\x22duos-switch\x22]','</td>\x0a\x20\x20\x20\x20</tr>','15395QLmybm','innerText','No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!','Error\x20updating\x20ELO\x20trend\x20indicators:','Error\x20finding\x20recommended\x20opponent','pointer','info','hasTeam','9516267GGPDqf','docs','newElo','has','elo-recommendation-text-d2','none','D2\x20toggle\x20clicked','Error\x20loading\x20ladder\x20data:','map','add','roleName','toFixed','ELO\x20history\x20collection\x20is\x20empty','matches','226XnAFhD','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','inactive','get','setDate','email','loading-indicator','push','winnerScore','d1-switch','Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents','losses','3581290QQFDOA','position','max','Error\x20finding\x20best\x20opponent:','classList','elo-recommendation-text-d1','sort','3PuaFqN','textContent','4602676jzYuMy','getDate','previousElo','elo-recommendation-text-d3','playersD3','appendChild','player',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','forEach','#C0C0C0','display','Ladder\x20table\x20body\x20not\x20found','playersD','totalDeaths','visible','country','totalMatches','matchesD','set','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','slice','recentActivity','td:nth-child(3)',';\x22>','bind','timestamp','0.85em','6283278UXzILb','target','d3-ladder-container','\x20ladder','duos-switch','click','playersD2','(Equipped)','getElementById','cssText','\x20has\x20equipped:\x20','toLowerCase','9204070fZcusL','DOMContentLoaded','Silver','kda','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20','newEloRating','playerUsername','d3-switch','block','active','remove','prototype','length','empty','wins','Error\x20checking\x20','players','#4CAF50','username','checked','seconds','#b9f1fc','<img\x20src=\x22../images/flags/','gray','error','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>','owner','oldEloRating','onAuthStateChanged','#F44336','style','createElement','data','#50C878','parentNode','totalKills','change','points','elo-recommendation-text-duos','color','77xTHqME','log','elo','opacity','desc','9327224XkyzBh'];a0_0xccfc=function(){return _0x5e17b8;};return a0_0xccfc();}import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x338543=0x1){const _0x366bed=a0_0x3d8d;try{document['getElementById'](_0x366bed(0x18b))['style'][_0x366bed(0x1a4)]='block';const _0x216676=await getLadderData(_0x338543);_0x216676[_0x366bed(0x197)]((_0x5b02b4,_0x317026)=>_0x317026['elo']-_0x5b02b4['elo']);const _0x390c0e=_0x216676[_0x366bed(0x17f)](_0x19a9cb=>_0x19a9cb['id']),_0x110068=await getEloHistoryBatch(_0x390c0e,_0x338543),_0x42d064=_0x216676['map']((_0x5ac4fa,_0x60a7de)=>{const _0x470556=_0x366bed,_0x294593=_0x110068[_0x5ac4fa['id']]||[],_0x45e5b3=_0x294593['sort']((_0x7556a5,_0x5d0c9c)=>new Date(_0x5d0c9c['date'])-new Date(_0x7556a5['date']))[_0x470556(0x1b1)](0x0,0x5);return{..._0x5ac4fa,'rank':_0x60a7de+0x1,'lastMatches':_0x45e5b3,'recentActivity':_0x45e5b3[_0x470556(0x1d0)]>0x0};});renderLadder(_0x42d064),setupRealTimeUpdates(_0x338543);}catch(_0xb096ab){console[_0x366bed(0x1dc)](_0x366bed(0x17e),_0xb096ab),document['getElementById']('error-message')[_0x366bed(0x170)]=_0x366bed(0x1b0);}finally{document[_0x366bed(0x1c0)](_0x366bed(0x18b))['style']['display']='none';}}function setupRealTimeUpdates(_0x4e9b76=0x1){const _0x1258a5=a0_0x3d8d;activeListeners[_0x1258a5(0x1a2)](_0x2f7453=>_0x2f7453()),activeListeners=[];const _0x2c78b4=_0x4e9b76===0x1?'players':_0x1258a5(0x1a6)+_0x4e9b76,_0x478c2f=_0x4e9b76===0x1?_0x1258a5(0x184):_0x1258a5(0x1ab)+_0x4e9b76,_0x40ba5b=new Date();_0x40ba5b[_0x1258a5(0x189)](_0x40ba5b[_0x1258a5(0x19b)]()-0x1);const _0x45c1f3=setupEfficientListener(_0x478c2f,[where('date','>=',_0x40ba5b['toISOString']()),limit(0xa),orderBy(_0x1258a5(0x163),'desc')],async _0x2bd1c8=>{_0x2bd1c8['length']>0x0&&await loadLadderData(_0x4e9b76);});activeListeners['push'](_0x45c1f3);}export function cleanupListeners(){activeListeners['forEach'](_0x2b6058=>_0x2b6058()),activeListeners=[];}function renderLadder(_0x5973b9){const _0x20106b=a0_0x3d8d,_0x549e7c=document[_0x20106b(0x1c0)]('ladder-container');_0x549e7c['innerHTML']='',_0x5973b9['forEach'](_0x979292=>{const _0x429246=_0x20106b,_0x5838ca=document['createElement']('div');_0x5838ca['className']='ladder-player',_0x5838ca[_0x429246(0x162)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x979292['rank']+_0x429246(0x1ad)+(_0x979292['username']||_0x979292['id'])+_0x429246(0x1dd)+_0x979292['elo']+_0x429246(0x1c8)+(_0x979292[_0x429246(0x1b2)]?'active':_0x429246(0x187))+_0x429246(0x16b)+(_0x979292['recentActivity']?'Active':'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x549e7c['appendChild'](_0x5838ca);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;function a0_0x3d8d(_0x1c4ae3,_0x465739){const _0x577f0e=a0_0xccfc();return a0_0x3d8d=function(_0x5d94de,_0x575623){_0x5d94de=_0x5d94de-0x15a;let _0x4ebc94=_0x577f0e[_0x5d94de];return _0x4ebc94;},a0_0x3d8d(_0x1c4ae3,_0x465739);}async function displayLadder(_0x53cf1d=![]){const _0x597117=a0_0x3d8d,_0x2de3e8=document[_0x597117(0x164)]('#ladder\x20tbody');if(!_0x2de3e8){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x2de3e8['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x5cead2=Date['now']();if(!_0x53cf1d&&playerCache['data']&&_0x5cead2-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x55e395=collection(db,'players'),_0x36e50c=await getDocs(_0x55e395),_0x49cbed=[];_0x36e50c['forEach'](_0x127bd0=>{const _0x5b969f=_0x127bd0['data']();_0x49cbed['push']({..._0x5b969f,'id':_0x127bd0['id'],'elo':_0x5b969f['eloRating']||0x0,'position':_0x5b969f['position']||Number['MAX_SAFE_INTEGER']});});const _0x147fc7=collection(db,'userProfiles'),_0x5d6737=await getDocs(_0x147fc7),_0x526b49=new Map();_0x5d6737[_0x597117(0x1a2)](_0x59cae2=>{const _0xd9ab55=_0x597117,_0x5480a0=_0x59cae2[_0xd9ab55(0x1e4)]();_0x5480a0['username']&&_0x526b49['set'](_0x5480a0['username']['toLowerCase'](),_0x5480a0);}),_0x49cbed['forEach'](_0x66dfe7=>{const _0x1ecfeb=_0x597117,_0x1af9d=_0x66dfe7['username']?.[_0x1ecfeb(0x1c3)]();if(_0x1af9d&&_0x526b49['has'](_0x1af9d)){const _0x424c39=_0x526b49['get'](_0x1af9d);_0x424c39[_0x1ecfeb(0x1a9)]&&(_0x66dfe7['country']=_0x424c39['country']['toLowerCase']()),_0x66dfe7[_0x1ecfeb(0x1e9)]=_0x424c39['points']||0x0;}else _0x66dfe7['points']=0x0;});const _0xdc12e9=_0x49cbed['map'](_0x53b1a4=>_0x53b1a4[_0x597117(0x1d6)]),_0xfb7b51=await fetchBatchMatchStats(_0xdc12e9);_0x49cbed['sort']((_0x540663,_0x9c006e)=>{const _0x3e15a4=_0x597117,_0xce72a6=_0xfb7b51['get'](_0x540663['username'])?.['totalMatches']||0x0,_0x149cfe=_0xfb7b51['get'](_0x9c006e['username'])?.['totalMatches']||0x0;if(_0xce72a6===0x0!==(_0x149cfe===0x0))return _0xce72a6===0x0?0x1:-0x1;return(_0x540663[_0x3e15a4(0x192)]||0x3e7)-(_0x9c006e['position']||0x3e7);}),_0x49cbed['forEach']((_0x45ee0c,_0x41d8e6)=>{_0x45ee0c['position']=_0x41d8e6+0x1;}),playerCache['data']=_0x49cbed,playerCache['timestamp']=_0x5cead2,updateLadderDisplay(_0x49cbed,_0xfb7b51);}catch(_0x464dbc){console[_0x597117(0x1dc)]('Error\x20loading\x20ladder:',_0x464dbc),_0x2de3e8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x464dbc['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x536adb){const _0x2e2651=new Map();try{_0x536adb['forEach'](_0x23fb34=>{const _0x2e9847=a0_0x3d8d;_0x2e2651[_0x2e9847(0x1ac)](_0x23fb34,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});});const _0x1621ee=collection(db,'approvedMatches'),_0x1e38b4=await getDocs(_0x1621ee);_0x1e38b4['forEach'](_0x4e8474=>{const _0x11066e=a0_0x3d8d,_0x2c2dc0=_0x4e8474['data'](),_0x16f765=_0x2c2dc0['winnerUsername'],_0x19203=_0x2c2dc0['loserUsername'];if(_0x536adb['includes'](_0x16f765)){const _0x21fda6=_0x2e2651[_0x11066e(0x188)](_0x16f765);_0x21fda6['wins']++,_0x21fda6[_0x11066e(0x1aa)]++,_0x21fda6[_0x11066e(0x1e7)]+=parseInt(_0x2c2dc0['winnerScore'])||0x0,_0x21fda6['totalDeaths']+=parseInt(_0x2c2dc0['loserScore'])||0x0;}if(_0x536adb['includes'](_0x19203)){const _0x469319=_0x2e2651['get'](_0x19203);_0x469319['losses']++,_0x469319['totalMatches']++,_0x469319['totalKills']+=parseInt(_0x2c2dc0['loserScore'])||0x0,_0x469319[_0x11066e(0x1a7)]+=parseInt(_0x2c2dc0[_0x11066e(0x18d)])||0x0;}}),_0x536adb['forEach'](_0x14355e=>{const _0x6463d6=a0_0x3d8d,_0x367ccc=_0x2e2651['get'](_0x14355e);_0x367ccc['kda']=_0x367ccc[_0x6463d6(0x1a7)]>0x0?(_0x367ccc['totalKills']/_0x367ccc['totalDeaths'])['toFixed'](0x2):_0x367ccc['totalKills'][_0x6463d6(0x182)](0x2),_0x367ccc['winRate']=_0x367ccc[_0x6463d6(0x1aa)]>0x0?(_0x367ccc[_0x6463d6(0x1d2)]/_0x367ccc[_0x6463d6(0x1aa)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x33f0f9){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x33f0f9);}return _0x2e2651;}function createPlayerRow(_0x526252,_0x2a2583){const _0x21eb37=a0_0x3d8d,_0x19c7dd=parseFloat(_0x526252['elo'])||0x0;let _0x3dc2e0='#DC143C';if(_0x2a2583['totalMatches']===0x0)_0x3dc2e0='#DC143C';else{if(_0x2a2583['winRate']>=0x50&&_0x2a2583[_0x21eb37(0x1aa)]>=0x14)_0x3dc2e0='#50C878';else{if(_0x19c7dd>=0x2bc)_0x3dc2e0='#FFD700';else{if(_0x19c7dd>=0x1f4)_0x3dc2e0=_0x21eb37(0x1a3);else _0x19c7dd>=0xc8&&(_0x3dc2e0='#CD7F32');}}}let _0x1b50a0='';return _0x526252['country']&&(_0x1b50a0=_0x21eb37(0x1da)+_0x526252['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x526252['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x526252['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x526252['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x3dc2e0+_0x21eb37(0x1a1)+_0x526252['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1b50a0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x3dc2e0+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x19c7dd+_0x21eb37(0x166)+_0x2a2583['totalMatches']+_0x21eb37(0x1af)+_0x2a2583['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a2583['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a2583[_0x21eb37(0x1c7)]+_0x21eb37(0x1af)+_0x2a2583['winRate']+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a2583['points']+_0x21eb37(0x16e);}function getPlayerRankName(_0x13cdd1,_0x1cc90a=0x0,_0x4bf331=0x0){const _0xd621d8=a0_0x3d8d;if(_0x1cc90a===0x0)return'Unranked';if(_0x13cdd1>=0x3e8&&_0x4bf331>=0x50&&_0x1cc90a>=0x14)return'Emerald';if(_0x13cdd1>=0x2bc)return'Gold';if(_0x13cdd1>=0x1f4)return _0xd621d8(0x1c6);if(_0x13cdd1>=0xc8)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x5905ec){const _0x59b945=a0_0x3d8d,_0x597408=new Map();_0x5905ec['forEach'](_0x195fb8=>{_0x597408['set'](_0x195fb8,0x0);});try{const _0x10fd9d=collection(db,_0x59b945(0x1d4)),_0x5a6093=await getDocs(_0x10fd9d),_0x28ef9f=new Map(),_0x1ec157=new Map();_0x5a6093['forEach'](_0x453d6f=>{const _0x188292=_0x59b945,_0x4beb9b=_0x453d6f[_0x188292(0x1e4)]();_0x4beb9b[_0x188292(0x1d6)]&&(_0x28ef9f['set'](_0x453d6f['id'],_0x4beb9b[_0x188292(0x1d6)]),_0x1ec157['set'](_0x4beb9b['username']['toLowerCase'](),_0x453d6f['id']));});const _0xfaa24e=collection(db,'eloHistory'),_0x484f12=query(_0xfaa24e,orderBy('timestamp',_0x59b945(0x160)),limit(0x12c)),_0x23ab98=await getDocs(_0x484f12);if(_0x23ab98[_0x59b945(0x1d1)])return console['log'](_0x59b945(0x183)),_0x597408;if(_0x23ab98[_0x59b945(0x178)]['length']>0x0){const _0x28d4c5=_0x23ab98['docs'][0x0]['data']();if(_0x28d4c5['player']&&_0x28ef9f['has'](_0x28d4c5['player'])){}}const _0x2ecc17=new Map();let _0xdcda8f=0x0;_0x23ab98[_0x59b945(0x1a2)](_0x568523=>{const _0x5550fc=_0x59b945,_0x52f039=_0x568523[_0x5550fc(0x1e4)]();let _0x1424b6=null;if(_0x52f039[_0x5550fc(0x1a0)]&&_0x28ef9f['has'](_0x52f039['player']))_0x1424b6=_0x28ef9f[_0x5550fc(0x188)](_0x52f039['player']);else{if(_0x52f039[_0x5550fc(0x1d6)]&&_0x1ec157['has'](_0x52f039['username']['toLowerCase']()))_0x1424b6=_0x52f039['username'];else _0x52f039[_0x5550fc(0x1ca)]&&_0x1ec157[_0x5550fc(0x17a)](_0x52f039[_0x5550fc(0x1ca)][_0x5550fc(0x1c3)]())&&(_0x1424b6=_0x52f039['playerUsername']);}_0x1424b6&&_0x5905ec['includes'](_0x1424b6)&&(_0xdcda8f++,!_0x2ecc17['has'](_0x1424b6)&&_0x2ecc17[_0x5550fc(0x1ac)](_0x1424b6,[]),_0x2ecc17['get'](_0x1424b6)[_0x5550fc(0x18c)]({..._0x52f039,'timestamp':_0x52f039['timestamp']?.[_0x5550fc(0x1d8)]||0x0}));}),_0x2ecc17['forEach']((_0x16575a,_0x91da18)=>{const _0x25fee3=_0x59b945;if(_0x16575a[_0x25fee3(0x1d0)]>0x0){_0x16575a[_0x25fee3(0x197)]((_0x52fe79,_0x3447de)=>_0x3447de[_0x25fee3(0x1b6)]-_0x52fe79['timestamp']);const _0x214296=_0x16575a['find'](_0x304e22=>_0x304e22['change']!==undefined||_0x304e22[_0x25fee3(0x179)]!==undefined&&_0x304e22[_0x25fee3(0x19c)]!==undefined||_0x304e22[_0x25fee3(0x1c9)]!==undefined&&_0x304e22[_0x25fee3(0x1df)]!==undefined);if(_0x214296){let _0x4325bb;if(_0x214296['change']!==undefined)_0x4325bb=parseInt(_0x214296[_0x25fee3(0x1e8)]);else{if(_0x214296['newElo']!==undefined&&entry[_0x25fee3(0x19c)]!==undefined)_0x4325bb=parseInt(_0x214296['newElo'])-parseInt(_0x214296[_0x25fee3(0x19c)]);else _0x214296['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x4325bb=parseInt(_0x214296['newEloRating'])-parseInt(_0x214296['oldEloRating']));}!isNaN(_0x4325bb)&&_0x4325bb!==0x0&&_0x597408['set'](_0x91da18,_0x4325bb);}}});}catch(_0x27370d){console[_0x59b945(0x1dc)]('Error\x20fetching\x20ELO\x20history:',_0x27370d);}return _0x597408;}function createPlayerRowWithToken(_0x36eb4f,_0x310a85,_0x4764ce){const _0x5d60dd=a0_0x3d8d,_0x11d016=parseFloat(_0x36eb4f[_0x5d60dd(0x15e)])||0x0;let _0x3bb58c='#DC143C';if(_0x310a85[_0x5d60dd(0x1aa)]===0x0)_0x3bb58c='#DC143C';else{if(_0x310a85['winRate']>=0x50&&_0x310a85['totalMatches']>=0x14)_0x3bb58c=_0x5d60dd(0x1e5);else{if(_0x11d016>=0x2bc)_0x3bb58c='#FFD700';else{if(_0x11d016>=0x1f4)_0x3bb58c=_0x5d60dd(0x1a3);else _0x11d016>=0xc8&&(_0x3bb58c='#CD7F32');}}}let _0x8cd099='';_0x36eb4f['country']&&(_0x8cd099='<img\x20src=\x22../images/flags/'+_0x36eb4f[_0x5d60dd(0x1a9)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x36eb4f['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x289b0e='';return _0x4764ce&&(_0x289b0e='<img\x20src=\x22'+_0x4764ce['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4764ce['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x4764ce['tokenName']+'\x20'+(_0x4764ce['equipped']?_0x5d60dd(0x1bf):'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x36eb4f['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x36eb4f['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x3bb58c+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x36eb4f['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x8cd099+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x289b0e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x3bb58c+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x11d016+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x310a85[_0x5d60dd(0x1aa)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x310a85['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x310a85[_0x5d60dd(0x190)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x310a85['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x310a85['winRate']+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>'+(_0x36eb4f['points']||0x0)+_0x5d60dd(0x16e);}async function updateLadderDisplay(_0x1b2dcc,_0x47adba=null){const _0x13430b=a0_0x3d8d,_0x590d97=document['querySelector']('#ladder\x20tbody');if(!_0x590d97){console['error'](_0x13430b(0x1a5));return;}const _0x39e183=document['querySelector']('#ladder\x20thead\x20tr');_0x39e183&&(_0x39e183['innerHTML']=_0x13430b(0x186));const _0x1b0710=_0x1b2dcc['map'](_0x3cdce3=>_0x3cdce3['username']);!_0x47adba&&(_0x47adba=await fetchBatchMatchStats(_0x1b0710));let _0x31661e=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x31661e=await getTokensByUsernames(_0x1b0710),console['log']('🪙\x20Loaded\x20fresh\x20tokens\x20for',_0x31661e['size'],_0x13430b(0x1d4)),_0x31661e['forEach']((_0x388e07,_0x40a3b4)=>{const _0x5d1710=_0x13430b,_0x512dc3=_0x388e07['find'](_0x4511e1=>_0x4511e1['equipped']);_0x512dc3&&console['log']('🎯\x20'+_0x40a3b4+_0x5d1710(0x1c2)+_0x512dc3['tokenName']);});}catch(_0x3b5235){console['error']('Error\x20fetching\x20tokens:',_0x3b5235);}const _0x1c42e0=_0x1b2dcc['map'](_0x161049=>{const _0x613347=_0x13430b,_0x219f0b=_0x47adba['get'](_0x161049['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x4de378=_0x31661e['get'](_0x161049[_0x613347(0x1d6)])||[],_0x3caa52=getPrimaryDisplayToken(_0x4de378);return _0x3caa52&&console['log']('🎨\x20'+_0x161049[_0x613347(0x1d6)]+'\x20displaying\x20token:\x20'+_0x3caa52['tokenName']+'\x20(equipped:\x20'+_0x3caa52['equipped']+')'),createPlayerRowWithToken(_0x161049,_0x219f0b,_0x3caa52);})['join']('');_0x590d97['innerHTML']=_0x1c42e0,getPlayersLastEloChanges(_0x1b0710)['then'](_0x168c4b=>{const _0x590924=_0x13430b,_0x23bc96=new Map();_0x590d97['querySelectorAll']('tr')[_0x590924(0x1a2)]((_0x2adeda,_0x35d528)=>{const _0x40935f=_0x590924;_0x35d528<_0x1b0710[_0x40935f(0x1d0)]&&_0x23bc96['set'](_0x1b0710[_0x35d528],_0x2adeda);}),_0x168c4b['forEach']((_0x5a97a3,_0x196041)=>{const _0x358d1f=_0x590924,_0x426b02=_0x23bc96['get'](_0x196041);if(_0x426b02&&_0x5a97a3!==0x0){const _0x29979f=_0x426b02['querySelector'](_0x358d1f(0x1b3));if(_0x29979f){const _0x10b200=_0x5a97a3>0x0?'+'+_0x5a97a3:''+_0x5a97a3,_0x52f00a=_0x29979f['querySelector']('.trend-indicator');_0x52f00a&&(_0x52f00a['textContent']=_0x10b200,_0x52f00a['style'][_0x358d1f(0x15b)]=_0x5a97a3>0x0?_0x358d1f(0x1d5):_0x358d1f(0x1e1),_0x52f00a[_0x358d1f(0x1e2)]['fontWeight']='bold',_0x52f00a[_0x358d1f(0x1e2)]['fontSize']=_0x358d1f(0x1b7),_0x52f00a[_0x358d1f(0x1e2)][_0x358d1f(0x1a4)]='inline',_0x52f00a[_0x358d1f(0x1e2)]['visibility']=_0x358d1f(0x1a8),_0x52f00a['style'][_0x358d1f(0x15f)]='1');}}});})['catch'](_0x18735e=>console['error'](_0x13430b(0x172),_0x18735e));}function initLadderToggles(){const _0x35a2ea=a0_0x3d8d,_0x117a30=document['getElementById'](_0x35a2ea(0x18e)),_0x433fe8=document[_0x35a2ea(0x1c0)]('d2-switch'),_0xef79b8=document['getElementById'](_0x35a2ea(0x1cb)),_0x5b325e=document['getElementById']('duos-switch'),_0x4cdc32=document['getElementById']('d1-ladder-container'),_0x4e0e07=document['getElementById']('d2-ladder-container'),_0x3f85be=document['getElementById']('d3-ladder-container'),_0x1783ce=document[_0x35a2ea(0x1c0)]('duos-ladder-container');function _0x3ea232(){const _0x251311=_0x35a2ea;if(_0x4cdc32)_0x4cdc32['classList']['remove'](_0x251311(0x1cd));if(_0x4e0e07)_0x4e0e07[_0x251311(0x195)][_0x251311(0x1ce)](_0x251311(0x1cd));if(_0x3f85be)_0x3f85be[_0x251311(0x195)]['remove']('active');if(_0x1783ce)_0x1783ce['style']['display']=_0x251311(0x17c);if(_0x4cdc32)_0x4cdc32['style'][_0x251311(0x1a4)]='none';if(_0x4e0e07)_0x4e0e07['style']['display']=_0x251311(0x17c);if(_0x3f85be)_0x3f85be['style']['display']='none';}_0x117a30&&_0x117a30[_0x35a2ea(0x16a)](_0x35a2ea(0x1bd),()=>{const _0x59ad2f=_0x35a2ea;console['log']('D1\x20toggle\x20clicked'),_0x3ea232();_0x4cdc32&&(_0x4cdc32['classList']['add']('active'),_0x4cdc32['style']['display']='block');document['getElementById'](_0x59ad2f(0x196))['style']['display']='block',document['getElementById']('elo-recommendation-text-d2')['style'][_0x59ad2f(0x1a4)]='none',document[_0x59ad2f(0x1c0)](_0x59ad2f(0x19d))[_0x59ad2f(0x1e2)][_0x59ad2f(0x1a4)]='none';if(_0x117a30)_0x117a30['classList'][_0x59ad2f(0x180)](_0x59ad2f(0x1cd));if(_0x433fe8)_0x433fe8['classList']['remove'](_0x59ad2f(0x1cd));if(_0xef79b8)_0xef79b8[_0x59ad2f(0x195)]['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x433fe8&&_0x433fe8['addEventListener']('click',()=>{const _0x2e8282=_0x35a2ea;console[_0x2e8282(0x15d)](_0x2e8282(0x17d)),_0x3ea232();_0x4e0e07&&(_0x4e0e07[_0x2e8282(0x195)]['add']('active'),_0x4e0e07['style']['display']=_0x2e8282(0x1cc));document['getElementById']('elo-recommendation-text-d1')[_0x2e8282(0x1e2)]['display']=_0x2e8282(0x17c),document['getElementById']('elo-recommendation-text-d2')[_0x2e8282(0x1e2)]['display']='block',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x433fe8)_0x433fe8['classList']['add'](_0x2e8282(0x1cd));if(_0x117a30)_0x117a30['classList'][_0x2e8282(0x1ce)](_0x2e8282(0x1cd));if(_0xef79b8)_0xef79b8['classList']['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0xef79b8&&_0xef79b8['addEventListener']('click',()=>{const _0x154e08=_0x35a2ea;console['log']('D3\x20toggle\x20clicked'),_0x3ea232();_0x3f85be&&(_0x3f85be['classList']['add']('active'),_0x3f85be['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0x154e08(0x17b))['style']['display']='none',document['getElementById'](_0x154e08(0x19d))[_0x154e08(0x1e2)][_0x154e08(0x1a4)]='block';if(_0xef79b8)_0xef79b8['classList']['add']('active');if(_0x117a30)_0x117a30['classList'][_0x154e08(0x1ce)]('active');if(_0x433fe8)_0x433fe8[_0x154e08(0x195)]['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x5b325e&&_0x5b325e['addEventListener'](_0x35a2ea(0x1bd),()=>{const _0x13e2a5=_0x35a2ea;_0x3ea232();if(_0x1783ce)_0x1783ce['style']['display']=_0x13e2a5(0x1cc);displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById'](_0x13e2a5(0x15a))['style']['display']='block'),document[_0x13e2a5(0x1c0)](_0x13e2a5(0x196))['style'][_0x13e2a5(0x1a4)]=_0x13e2a5(0x17c),document[_0x13e2a5(0x1c0)]('elo-recommendation-text-d2')[_0x13e2a5(0x1e2)]['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']=_0x13e2a5(0x17c);});}document['addEventListener'](a0_0x35282b(0x1c5),()=>{const _0x33e096=a0_0x35282b;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document[_0x33e096(0x1c0)]('elo-recommendation-text-d1')['style']['display']='block';});export{displayLadder};async function findBestOpponent(_0x7c0be9='d1'){const _0x174d57=a0_0x35282b,_0x170e4b='elo-recommendation-text-'+_0x7c0be9,_0x50ba0d=document['getElementById'](_0x170e4b);if(!_0x50ba0d){console['error']('Recommendation\x20element\x20for\x20'+_0x7c0be9+'\x20not\x20found');return;}const _0x3a045d=auth['currentUser'];if(!_0x3a045d){_0x50ba0d['textContent']='';return;}try{const _0x5e61bd=doc(db,'userProfiles',_0x3a045d['uid']),_0x298bf8=await getDoc(_0x5e61bd);if(!_0x298bf8[_0x174d57(0x168)]()){console['log']('No\x20user\x20profile\x20found'),_0x50ba0d[_0x174d57(0x199)]='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x3817aa=_0x298bf8['data'](),_0x123599=_0x3817aa['username'];if(!_0x123599){_0x50ba0d['textContent']=_0x174d57(0x18f);return;}let _0x1ac81b;switch(_0x7c0be9){case'd1':_0x1ac81b='players';break;case'd2':_0x1ac81b='playersD2';break;case'd3':_0x1ac81b=_0x174d57(0x19e);break;case'duos':_0x1ac81b='playersDuos';break;default:_0x1ac81b='players';}if(_0x7c0be9==='duos'){const _0x5c02cc=collection(db,_0x1ac81b),_0x2ea70b=query(_0x5c02cc,where('username','==',_0x123599)),_0x165ccc=await getDocs(_0x2ea70b);if(_0x165ccc['empty']){_0x50ba0d[_0x174d57(0x199)]='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x4dad69=_0x165ccc[_0x174d57(0x178)][0x0]['data'](),_0xa2b88f=parseInt(_0x4dad69['eloRating'])||0x4b0;if(_0x4dad69[_0x174d57(0x176)]&&_0x4dad69['teammate']){_0x50ba0d['innerHTML']='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x4dad69['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x15643e=await getDocs(_0x5c02cc);let _0x575ff2=null,_0x138ec9=-0x1;_0x15643e['forEach'](_0x206299=>{const _0x3c8b2e=_0x206299['data']();if(_0x3c8b2e['username']===_0x123599)return;if(_0x3c8b2e['hasTeam'])return;const _0x81eb59=parseInt(_0x3c8b2e['eloRating'])||0x4b0,_0x25f9d4=Math['abs'](_0x81eb59-_0xa2b88f),_0x30c0f8=Math['max'](0x0,0xc8-_0x25f9d4);_0x30c0f8>_0x138ec9&&(_0x575ff2=_0x3c8b2e,_0x138ec9=_0x30c0f8);});if(_0x575ff2){const _0x4d989e=parseInt(_0x575ff2['eloRating'])||0x4b0;let _0x32a530=_0x174d57(0x1db);if(_0x4d989e>=0x7d0)_0x32a530='#50C878';else{if(_0x4d989e>=0x708)_0x32a530='#FFD700';else{if(_0x4d989e>=0x640)_0x32a530='#C0C0C0';else _0x4d989e>=0x578&&(_0x32a530='#CD7F32');}}_0x50ba0d[_0x174d57(0x162)]='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x32a530+';\x22>'+_0x575ff2[_0x174d57(0x1d6)]+'</span>\x20(ELO:\x20'+_0x4d989e+')';}else _0x50ba0d['textContent']=_0x174d57(0x171);return;}const _0x33e993=collection(db,_0x1ac81b),_0x21187e=query(_0x33e993,where(_0x174d57(0x1d6),'==',_0x123599)),_0x4306c9=await getDocs(_0x21187e);if(_0x4306c9['empty']){_0x50ba0d[_0x174d57(0x199)]='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x7c0be9['toUpperCase']()+_0x174d57(0x1bb);return;}const _0x20e539=_0x4306c9[_0x174d57(0x178)][0x0]['data'](),_0x42df02=parseInt(_0x20e539['eloRating'])||0x5dc,_0x26ffa1=await getDocs(_0x33e993);let _0x1c65b2=null,_0x51a0a0=-0x1;const _0x286f59=getPlayerRankName(_0x42df02);_0x26ffa1['forEach'](_0x1bb79d=>{const _0x391aa1=_0x174d57,_0x7d951b=_0x1bb79d['data']();if(_0x7d951b[_0x391aa1(0x1d6)]===_0x123599)return;const _0x5bc896=parseInt(_0x7d951b['eloRating'])||0x5dc,_0x53e9bf=getPlayerRankName(_0x5bc896),_0x5ae7f1=Math['abs'](_0x5bc896-_0x42df02),_0x488943=0x20,_0x374635=0x1/(0x1+Math['pow'](0xa,(_0x5bc896-_0x42df02)/0x190)),_0x5324f9=Math['round'](_0x488943*(0x1-_0x374635));if(_0x5324f9<=0x0)return;let _0x621399=0x0;const _0x472b6e=Math[_0x391aa1(0x193)](0x0,0x64-_0x5ae7f1*0.5),_0x581ed2=_0x5324f9>=0x3&&_0x5324f9<=0x8?0x32:_0x5324f9>0x0&&_0x5324f9<0xf?0x1e:0xa,_0x2743fd=_0x286f59===_0x53e9bf?0x28:0x0;_0x621399=_0x472b6e+_0x581ed2+_0x2743fd,_0x621399>_0x51a0a0&&(_0x1c65b2=_0x7d951b,_0x51a0a0=_0x621399);});if(_0x1c65b2){const _0x5bae6b=parseInt(_0x1c65b2['eloRating'])||0x5dc;let _0x5cc297='gray';if(_0x5bae6b>=0x7d0)_0x5cc297='#50C878';else{if(_0x5bae6b>=0x708)_0x5cc297='#FFD700';else{if(_0x5bae6b>=0x640)_0x5cc297=_0x174d57(0x1d9);else _0x5bae6b>=0x578&&(_0x5cc297='#CD7F32');}}_0x50ba0d['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x42df02+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x5cc297+_0x174d57(0x1b4)+_0x1c65b2[_0x174d57(0x1d6)]+'</span>';}else _0x50ba0d['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x42df02+')';}catch(_0x33b1ec){console['error'](_0x174d57(0x194),_0x33b1ec),_0x50ba0d['textContent']=_0x174d57(0x173);}}auth['onAuthStateChanged'](_0xeba0bb=>{const _0x4d5b1d=a0_0x35282b,_0x41a160=document['getElementById'](_0x4d5b1d(0x169))&&document['getElementById'](_0x4d5b1d(0x169))['style']['display']!=='none',_0x5e2625=document['getElementById']('d2-ladder-container')&&document['getElementById']('d2-ladder-container')['style'][_0x4d5b1d(0x1a4)]!=='none',_0x44f436=document['getElementById'](_0x4d5b1d(0x1ba))&&document['getElementById'](_0x4d5b1d(0x1ba))['style']['display']!=='none',_0x197465=document[_0x4d5b1d(0x1c0)]('duos-ladder-container')&&document['getElementById'](_0x4d5b1d(0x165))['style']['display']!=='none',_0x365f7b=_0x41a160?'d1':_0x5e2625?'d2':_0x44f436?'d3':_0x197465?'duos':'d1';findBestOpponent(_0x365f7b);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x566776=a0_0x35282b,_0x135167=document[_0x566776(0x1c0)](_0x566776(0x1bc)),_0x372e82=document['querySelector'](_0x566776(0x16d));_0x135167&&_0x372e82&&(_0x135167[_0x566776(0x16a)]('change',async _0x1ddd7a=>{const _0x43310d=_0x566776;if(_0x1ddd7a[_0x43310d(0x1b9)]['checked']){const _0x3b1ca0=auth?.['currentUser'],_0x5bbed8=await checkIfUserIsAdmin(_0x3b1ca0);if(!_0x5bbed8){_0x1ddd7a['preventDefault']();const _0x2b7a0d=document['getElementById']('d1-switch');return _0x2b7a0d&&(_0x2b7a0d[_0x43310d(0x1d7)]=!![],_0x2b7a0d['dispatchEvent'](new Event(_0x43310d(0x1e8)))),showAdminOnlyMessage(),![];}}}),auth[_0x566776(0x1e0)](async _0x3666a8=>{const _0x3113de=_0x566776,_0x196366=await checkIfUserIsAdmin(_0x3666a8);!_0x196366?(_0x135167['disabled']=!![],_0x372e82['style']['opacity']='0.5',_0x372e82['style']['cursor']='not-allowed',_0x372e82['title']=_0x3113de(0x167)):(_0x135167['disabled']=![],_0x372e82['style']['opacity']='1',_0x372e82[_0x3113de(0x1e2)]['cursor']=_0x3113de(0x174),_0x372e82['title']='');}));});async function checkIfUserIsAdmin(_0x19216a){const _0x20fd59=a0_0x35282b;if(!_0x19216a)return![];try{const _0x257204=['admin@ladder.com','brian2af@outlook.com'];if(_0x19216a[_0x20fd59(0x18a)]&&_0x257204['includes'](_0x19216a[_0x20fd59(0x18a)]['toLowerCase']()))return!![];const _0x448825=['userProfiles','players',_0x20fd59(0x1be),'playersD3'],_0x2c67da=['admin',_0x20fd59(0x1de),'council','creative\x20lead'];for(const _0x10f205 of _0x448825){try{const _0xe1e4c8=doc(db,_0x10f205,_0x19216a['uid']),_0x5ca79d=await getDoc(_0xe1e4c8);if(_0x5ca79d['exists']()){const _0x4fef9d=_0x5ca79d['data'](),_0x3758d1=(_0x4fef9d[_0x20fd59(0x181)]||_0x4fef9d['role']||'')['toLowerCase']();if(_0x3758d1&&_0x2c67da['includes'](_0x3758d1))return!![];}}catch(_0xb3e83e){console['warn'](_0x20fd59(0x1d3)+_0x10f205+':',_0xb3e83e);}}return![];}catch(_0x145005){return console['error']('Error\x20checking\x20admin\x20status:',_0x145005),![];}}function showAdminOnlyMessage(){const _0x440ec6=a0_0x35282b,_0x520321=document['getElementById']('admin-only-message');_0x520321&&_0x520321['remove']();const _0x352a8a=document[_0x440ec6(0x1e3)]('div');_0x352a8a['id']='admin-only-message',_0x352a8a['style'][_0x440ec6(0x1c1)]=_0x440ec6(0x1ae),_0x352a8a[_0x440ec6(0x162)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>🔒\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body'][_0x440ec6(0x19f)](_0x352a8a),setTimeout(()=>{const _0x1195b7=_0x440ec6;_0x352a8a[_0x1195b7(0x1e6)]&&_0x352a8a['remove']();},0xbb8);}