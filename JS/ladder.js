const a27_0x4b6044=a27_0x1a09,a27_0x4b4d9b=(function(){let _0x3afd48=!![];return function(_0x139a5e,_0x175de4){const _0x2c7729=_0x3afd48?function(){if(_0x175de4){const _0x3ed3df=_0x175de4['apply'](_0x139a5e,arguments);return _0x175de4=null,_0x3ed3df;}}:function(){};return _0x3afd48=![],_0x2c7729;};}()),a27_0x1a2815=a27_0x4b4d9b(this,function(){const _0x6957f6=a27_0x1a09,_0xa85592=function(){let _0x2f3365;try{_0x2f3365=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1245a2){_0x2f3365=window;}return _0x2f3365;},_0x4af18e=_0xa85592(),_0xf36548=_0x4af18e['console']=_0x4af18e[_0x6957f6(0x117)]||{},_0x596309=['log','warn','info','error',_0x6957f6(0x113),_0x6957f6(0xda),'trace'];for(let _0x36b3bf=0x0;_0x36b3bf<_0x596309[_0x6957f6(0xe3)];_0x36b3bf++){const _0x3d7f11=a27_0x4b4d9b['constructor']['prototype'][_0x6957f6(0xde)](a27_0x4b4d9b),_0x3568e1=_0x596309[_0x36b3bf],_0x2085af=_0xf36548[_0x3568e1]||_0x3d7f11;_0x3d7f11[_0x6957f6(0xfe)]=a27_0x4b4d9b[_0x6957f6(0xde)](a27_0x4b4d9b),_0x3d7f11[_0x6957f6(0xb0)]=_0x2085af[_0x6957f6(0xb0)]['bind'](_0x2085af),_0xf36548[_0x3568e1]=_0x3d7f11;}});a27_0x1a2815();import{db}from'./firebase-config.js';function a27_0x1a09(_0xf00d30,_0x10a825){const _0x1a2815=a27_0x32a5();return a27_0x1a09=function(_0x4b4d9b,_0x4f40b0){_0x4b4d9b=_0x4b4d9b-0x9e;let _0x32a525=_0x1a2815[_0x4b4d9b];return _0x32a525;},a27_0x1a09(_0xf00d30,_0x10a825);}import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x34b171=0x1){const _0x1778fe=a27_0x1a09;try{document['getElementById'](_0x1778fe(0xa7))['style']['display']='block';const _0x587a66=await getLadderData(_0x34b171);_0x587a66['sort']((_0x3d70a3,_0x444e1e)=>_0x444e1e['elo']-_0x3d70a3['elo']);const _0x2a6d6=_0x587a66[_0x1778fe(0xd7)](_0xe1402a=>_0xe1402a['id']),_0x3e1f17=await getEloHistoryBatch(_0x2a6d6,_0x34b171),_0x4cd601=_0x587a66[_0x1778fe(0xd7)]((_0x19b645,_0x12499c)=>{const _0x2f70b6=_0x1778fe,_0x5b48fb=_0x3e1f17[_0x19b645['id']]||[],_0x22b34f=_0x5b48fb['sort']((_0x324058,_0x3c2726)=>new Date(_0x3c2726['date'])-new Date(_0x324058['date']))['slice'](0x0,0x5);return{..._0x19b645,'rank':_0x12499c+0x1,'lastMatches':_0x22b34f,'recentActivity':_0x22b34f[_0x2f70b6(0xe3)]>0x0};});renderLadder(_0x4cd601),setupRealTimeUpdates(_0x34b171);}catch(_0x10773f){console['error'](_0x1778fe(0x104),_0x10773f),document['getElementById'](_0x1778fe(0xd6))['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById']('loading-indicator')['style'][_0x1778fe(0xa0)]='none';}}function setupRealTimeUpdates(_0x46c73b=0x1){const _0x1699ba=a27_0x1a09;activeListeners[_0x1699ba(0xe9)](_0x2c06b4=>_0x2c06b4()),activeListeners=[];const _0x5cb248=_0x46c73b===0x1?'players':_0x1699ba(0xa8)+_0x46c73b,_0x36cc89=_0x46c73b===0x1?_0x1699ba(0xc3):'matchesD'+_0x46c73b,_0x3479ea=new Date();_0x3479ea[_0x1699ba(0x101)](_0x3479ea[_0x1699ba(0xb2)]()-0x1);const _0x1819f5=setupEfficientListener(_0x36cc89,[where('date','>=',_0x3479ea['toISOString']()),limit(0xa),orderBy('date','desc')],async _0x1a32d7=>{_0x1a32d7['length']>0x0&&await loadLadderData(_0x46c73b);});activeListeners['push'](_0x1819f5);}export function cleanupListeners(){activeListeners['forEach'](_0x1971af=>_0x1971af()),activeListeners=[];}function renderLadder(_0x34e56a){const _0x2b7d65=document['getElementById']('ladder-container');_0x2b7d65['innerHTML']='',_0x34e56a['forEach'](_0x2114d4=>{const _0xeab249=a27_0x1a09,_0x1479fb=document[_0xeab249(0xe1)]('div');_0x1479fb['className']='ladder-player',_0x1479fb['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x2114d4[_0xeab249(0xae)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x2114d4['username']||_0x2114d4['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x2114d4['elo']+_0xeab249(0xd0)+(_0x2114d4[_0xeab249(0x105)]?'active':'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2114d4['recentActivity']?_0xeab249(0xd2):_0xeab249(0xeb))+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2b7d65['appendChild'](_0x1479fb);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x585805=![]){const _0x23f98f=a27_0x1a09,_0x20763e=document['querySelector'](_0x23f98f(0xe8));if(!_0x20763e){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x20763e['innerHTML']=_0x23f98f(0xa9);try{const _0x793c80=Date['now']();if(!_0x585805&&playerCache[_0x23f98f(0x114)]&&_0x793c80-playerCache[_0x23f98f(0xf8)]<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache[_0x23f98f(0x114)]);return;}const _0x239c7c=collection(db,'players'),_0x534c61=await getDocs(_0x239c7c),_0xd17af6=[];_0x534c61['forEach'](_0x4f9db6=>{const _0x5e55ec=_0x23f98f,_0x4ee4f0=_0x4f9db6['data']();_0xd17af6['push']({..._0x4ee4f0,'id':_0x4f9db6['id'],'elo':_0x4ee4f0['eloRating']||0x0,'position':_0x4ee4f0[_0x5e55ec(0xc7)]||Number['MAX_SAFE_INTEGER']});});const _0x586461=collection(db,_0x23f98f(0xbb)),_0xd55751=await getDocs(_0x586461),_0xd3753c=new Map();_0xd55751['forEach'](_0x14ee5b=>{const _0x4d7e1b=_0x23f98f,_0x21bcc8=_0x14ee5b[_0x4d7e1b(0x114)]();_0x21bcc8['username']&&_0xd3753c['set'](_0x21bcc8[_0x4d7e1b(0xd4)][_0x4d7e1b(0x112)](),_0x21bcc8);}),_0xd17af6['forEach'](_0x1907b6=>{const _0x38de39=_0x23f98f,_0x1aa27b=_0x1907b6[_0x38de39(0xd4)]?.['toLowerCase']();if(_0x1aa27b&&_0xd3753c[_0x38de39(0xb3)](_0x1aa27b)){const _0x56ca35=_0xd3753c['get'](_0x1aa27b);_0x56ca35[_0x38de39(0xc8)]&&(_0x1907b6['country']=_0x56ca35['country'][_0x38de39(0x112)]());}});const _0x4a7df7=_0xd17af6['map'](_0x2a97d2=>_0x2a97d2['username']),_0x1c6c95=await fetchBatchMatchStats(_0x4a7df7);_0xd17af6['sort']((_0x5230fb,_0x5a9008)=>{const _0x4b4692=_0x23f98f,_0x437b59=_0x1c6c95['get'](_0x5230fb[_0x4b4692(0xd4)])?.['totalMatches']||0x0,_0xa7a260=_0x1c6c95['get'](_0x5a9008[_0x4b4692(0xd4)])?.['totalMatches']||0x0;if(_0x437b59===0x0!==(_0xa7a260===0x0))return _0x437b59===0x0?0x1:-0x1;return(_0x5230fb[_0x4b4692(0xc7)]||0x3e7)-(_0x5a9008[_0x4b4692(0xc7)]||0x3e7);}),_0xd17af6[_0x23f98f(0xe9)]((_0x37794b,_0x121c06)=>{const _0x54dfbd=_0x23f98f;_0x37794b[_0x54dfbd(0xc7)]=_0x121c06+0x1;}),playerCache[_0x23f98f(0x114)]=_0xd17af6,playerCache['timestamp']=_0x793c80,updateLadderDisplay(_0xd17af6,_0x1c6c95);}catch(_0x2ff499){console[_0x23f98f(0xa3)]('Error\x20loading\x20ladder:',_0x2ff499),_0x20763e[_0x23f98f(0xb1)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x2ff499[_0x23f98f(0xe6)]+_0x23f98f(0xd8);}}async function fetchBatchMatchStats(_0x2c29bf){const _0x55e070=a27_0x1a09,_0x47a583=new Map();try{_0x2c29bf['forEach'](_0x3dc86a=>{_0x47a583['set'](_0x3dc86a,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x2d45ba=collection(db,_0x55e070(0xe7)),_0x8fc30e=await getDocs(_0x2d45ba);_0x8fc30e['forEach'](_0x56dfb7=>{const _0x3a69b6=_0x55e070,_0x812647=_0x56dfb7['data'](),_0x3393b0=_0x812647['winnerUsername'],_0x33a49d=_0x812647[_0x3a69b6(0xa6)];if(_0x2c29bf['includes'](_0x3393b0)){const _0x3414b3=_0x47a583[_0x3a69b6(0x10e)](_0x3393b0);_0x3414b3['wins']++,_0x3414b3['totalMatches']++,_0x3414b3[_0x3a69b6(0xbe)]+=parseInt(_0x812647['winnerScore'])||0x0,_0x3414b3['totalDeaths']+=parseInt(_0x812647['loserScore'])||0x0;}if(_0x2c29bf['includes'](_0x33a49d)){const _0x49774b=_0x47a583['get'](_0x33a49d);_0x49774b['losses']++,_0x49774b['totalMatches']++,_0x49774b['totalKills']+=parseInt(_0x812647[_0x3a69b6(0xf5)])||0x0,_0x49774b['totalDeaths']+=parseInt(_0x812647['winnerScore'])||0x0;}}),_0x2c29bf['forEach'](_0x1a3824=>{const _0x5bcbae=_0x55e070,_0x466fec=_0x47a583['get'](_0x1a3824);_0x466fec['kda']=_0x466fec[_0x5bcbae(0xea)]>0x0?(_0x466fec[_0x5bcbae(0xbe)]/_0x466fec[_0x5bcbae(0xea)])['toFixed'](0x2):_0x466fec[_0x5bcbae(0xbe)][_0x5bcbae(0xa5)](0x2),_0x466fec['winRate']=_0x466fec['totalMatches']>0x0?(_0x466fec['wins']/_0x466fec['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x30e3fc){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x30e3fc);}return _0x47a583;}function createPlayerRow(_0x34865e,_0x46d92e){const _0xc05c79=a27_0x1a09,_0x5adb1a=parseFloat(_0x34865e['elo'])||0x0;let _0x4fcdbe='gray';if(_0x5adb1a>=0x7d0)_0x4fcdbe='#50C878';else{if(_0x5adb1a>=0x708)_0x4fcdbe='#FFD700';else{if(_0x5adb1a>=0x640)_0x4fcdbe='#b9f1fc';else _0x5adb1a>=0x578&&(_0x4fcdbe='#CD7F32');}}let _0x2a5e47='';return _0x34865e['country']&&(_0x2a5e47=_0xc05c79(0xdc)+_0x34865e[_0xc05c79(0xc8)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x34865e['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x34865e[_0xc05c79(0xc7)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x34865e['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x4fcdbe+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x34865e[_0xc05c79(0xd4)]+_0xc05c79(0xf2)+_0x2a5e47+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x4fcdbe+_0xc05c79(0xac)+_0x5adb1a+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x46d92e[_0xc05c79(0xbf)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x46d92e['wins']+_0xc05c79(0xaa)+_0x46d92e['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x46d92e['kda']+_0xc05c79(0xaa)+_0x46d92e[_0xc05c79(0xaf)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x1cd6e9){const _0x19c5a0=a27_0x1a09;if(_0x1cd6e9>=0x7d0)return'Emerald';if(_0x1cd6e9>=0x708)return'Gold';if(_0x1cd6e9>=0x640)return _0x19c5a0(0x10a);if(_0x1cd6e9>=0x578)return'Bronze';return _0x19c5a0(0xa4);}async function getPlayersLastEloChanges(_0x53f774){const _0x487086=a27_0x1a09,_0x4de681=new Map();_0x53f774['forEach'](_0x1a6a6c=>{_0x4de681['set'](_0x1a6a6c,0x0);});try{const _0x42894f=collection(db,'players'),_0x4741bc=await getDocs(_0x42894f),_0x55c0b0=new Map(),_0x9a1e3e=new Map();_0x4741bc['forEach'](_0x123030=>{const _0x914b8=a27_0x1a09,_0x254772=_0x123030[_0x914b8(0x114)]();_0x254772['username']&&(_0x55c0b0[_0x914b8(0xf7)](_0x123030['id'],_0x254772[_0x914b8(0xd4)]),_0x9a1e3e['set'](_0x254772['username']['toLowerCase'](),_0x123030['id']));});const _0x612519=collection(db,_0x487086(0xfa)),_0x2e0a08=query(_0x612519,orderBy('timestamp',_0x487086(0xf0)),limit(0x12c)),_0x1ebb49=await getDocs(_0x2e0a08);if(_0x1ebb49['empty'])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x4de681;if(_0x1ebb49['docs']['length']>0x0){const _0x4950fe=_0x1ebb49['docs'][0x0]['data']();if(_0x4950fe['player']&&_0x55c0b0['has'](_0x4950fe['player'])){}}const _0x1b2e3a=new Map();let _0x5f212c=0x0;_0x1ebb49['forEach'](_0x15b3bb=>{const _0x1dcc4b=_0x487086,_0x350f06=_0x15b3bb['data']();let _0x5eb0dd=null;if(_0x350f06['player']&&_0x55c0b0[_0x1dcc4b(0xb3)](_0x350f06['player']))_0x5eb0dd=_0x55c0b0[_0x1dcc4b(0x10e)](_0x350f06[_0x1dcc4b(0xc5)]);else{if(_0x350f06['username']&&_0x9a1e3e['has'](_0x350f06['username'][_0x1dcc4b(0x112)]()))_0x5eb0dd=_0x350f06['username'];else _0x350f06[_0x1dcc4b(0x110)]&&_0x9a1e3e['has'](_0x350f06[_0x1dcc4b(0x110)]['toLowerCase']())&&(_0x5eb0dd=_0x350f06['playerUsername']);}_0x5eb0dd&&_0x53f774['includes'](_0x5eb0dd)&&(_0x5f212c++,!_0x1b2e3a['has'](_0x5eb0dd)&&_0x1b2e3a['set'](_0x5eb0dd,[]),_0x1b2e3a[_0x1dcc4b(0x10e)](_0x5eb0dd)[_0x1dcc4b(0xf1)]({..._0x350f06,'timestamp':_0x350f06['timestamp']?.['seconds']||0x0}));}),_0x1b2e3a[_0x487086(0xe9)]((_0xe705d5,_0x47d8ab)=>{const _0x1779b5=_0x487086;if(_0xe705d5['length']>0x0){_0xe705d5[_0x1779b5(0x9e)]((_0x3b63e6,_0x55b639)=>_0x55b639['timestamp']-_0x3b63e6['timestamp']);const _0x5d45ea=_0xe705d5['find'](_0x4b4ca0=>_0x4b4ca0['change']!==undefined||_0x4b4ca0[_0x1779b5(0xf9)]!==undefined&&_0x4b4ca0[_0x1779b5(0xcb)]!==undefined||_0x4b4ca0['newEloRating']!==undefined&&_0x4b4ca0['oldEloRating']!==undefined);if(_0x5d45ea){let _0x64ec64;if(_0x5d45ea['change']!==undefined)_0x64ec64=parseInt(_0x5d45ea['change']);else{if(_0x5d45ea['newElo']!==undefined&&entry[_0x1779b5(0xcb)]!==undefined)_0x64ec64=parseInt(_0x5d45ea[_0x1779b5(0xf9)])-parseInt(_0x5d45ea['previousElo']);else _0x5d45ea['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x64ec64=parseInt(_0x5d45ea['newEloRating'])-parseInt(_0x5d45ea['oldEloRating']));}!isNaN(_0x64ec64)&&_0x64ec64!==0x0&&_0x4de681['set'](_0x47d8ab,_0x64ec64);}}});}catch(_0x1495ad){console[_0x487086(0xa3)]('Error\x20fetching\x20ELO\x20history:',_0x1495ad);}return _0x4de681;}function a27_0x32a5(){const _0x37d509=['sort','admin@ladder.com','display','elo-recommendation-text-d1','playersDuos','error','Unranked','toFixed','loserUsername','loading-indicator','playersD','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','log',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','players','rank','winRate','toString','innerHTML','getDate','has','d2-ladder-container','visibility','email','getElementById','none','remove','elo-recommendation-text-d3','userProfiles','block','.trend-indicator','totalKills','totalMatches','active','toUpperCase','hasTeam','matches','gray','player','pointer','position','country','empty','d1-switch','previousElo','0.5','d3-ladder-container','#50C878','),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20','textContent','Active','docs','username','querySelector','error-message','map','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','then','table','duos','<img\x20src=\x22../images/flags/','color','bind','teammate','style','createElement','Based\x20on\x20your\x20ELO\x20(','length',';\x22>','warn','message','approvedMatches','#ladder\x20tbody','forEach','totalDeaths','Inactive','add','</span>.\x20Challenge\x20other\x20teams!','classList','playersD2','desc','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','pow','duos-ladder-container','loserScore','admin-only-message','set','timestamp','newElo','eloHistory','You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder','title','includes','__proto__','d1-ladder-container','eloRating','setDate','addEventListener','duos-switch','Error\x20loading\x20ladder\x20data:','recentActivity','d3-switch','uid','#FFD700','appendChild','Silver','</span>','elo-recommendation-text-d2','click','get','roleName','playerUsername','abs','toLowerCase','exception','data','fontWeight','opacity','console','change'];a27_0x32a5=function(){return _0x37d509;};return a27_0x32a5();}async function updateLadderDisplay(_0x3be009,_0x552eba=null){const _0x5e82cb=a27_0x1a09,_0x25b030=document['querySelector']('#ladder\x20tbody');if(!_0x25b030){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x19cb5b=document['querySelector']('#ladder\x20thead\x20tr');_0x19cb5b&&(_0x19cb5b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x4501bf=_0x3be009['map'](_0x16772c=>_0x16772c[_0x5e82cb(0xd4)]);!_0x552eba&&(_0x552eba=await fetchBatchMatchStats(_0x4501bf));const _0x262944=_0x3be009['map'](_0x2409b0=>{const _0x786b03=_0x552eba['get'](_0x2409b0['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRow(_0x2409b0,_0x786b03);})['join']('');_0x25b030['innerHTML']=_0x262944,getPlayersLastEloChanges(_0x4501bf)[_0x5e82cb(0xd9)](_0x3712a1=>{const _0x52b1c6=_0x5e82cb,_0x52c685=new Map();_0x25b030['querySelectorAll']('tr')[_0x52b1c6(0xe9)]((_0x48a7a7,_0xef332f)=>{const _0x562e44=_0x52b1c6;_0xef332f<_0x4501bf[_0x562e44(0xe3)]&&_0x52c685['set'](_0x4501bf[_0xef332f],_0x48a7a7);}),_0x3712a1[_0x52b1c6(0xe9)]((_0x5e765f,_0x34a179)=>{const _0x511e07=_0x52b1c6,_0x4704b4=_0x52c685['get'](_0x34a179);if(_0x4704b4&&_0x5e765f!==0x0){const _0x2ae36d=_0x4704b4['querySelector']('td:nth-child(3)');if(_0x2ae36d){const _0x198484=_0x5e765f>0x0?'+'+_0x5e765f:''+_0x5e765f,_0x2e8522=_0x2ae36d[_0x511e07(0xd5)](_0x511e07(0xbd));if(_0x2e8522)_0x2e8522['textContent']=_0x198484,_0x2e8522[_0x511e07(0xe0)][_0x511e07(0xdd)]=_0x5e765f>0x0?'#4CAF50':'#F44336',_0x2e8522['style'][_0x511e07(0x115)]='bold',_0x2e8522['style']['fontSize']='0.85em',_0x2e8522[_0x511e07(0xe0)]['display']='inline',_0x2e8522['style'][_0x511e07(0xb5)]='visible',_0x2e8522[_0x511e07(0xe0)][_0x511e07(0x116)]='1';else{}}}});})['catch'](_0x7f9011=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x7f9011));}function initLadderToggles(){const _0x25d535=a27_0x1a09,_0x10ecad=document['getElementById'](_0x25d535(0xca)),_0x3a8e6c=document['getElementById']('d2-switch'),_0xd6af8d=document['getElementById'](_0x25d535(0x106)),_0x13a043=document[_0x25d535(0xb7)](_0x25d535(0x103)),_0x4a2805=document['getElementById']('d1-ladder-container'),_0x4dabd5=document['getElementById']('d2-ladder-container'),_0x4f317=document['getElementById']('d3-ladder-container'),_0x29b519=document['getElementById'](_0x25d535(0xf4));function _0x50e923(){const _0xe0eaca=_0x25d535;if(_0x4a2805)_0x4a2805[_0xe0eaca(0xee)]['remove']('active');if(_0x4dabd5)_0x4dabd5['classList']['remove'](_0xe0eaca(0xc0));if(_0x4f317)_0x4f317['classList']['remove']('active');if(_0x29b519)_0x29b519['style'][_0xe0eaca(0xa0)]='none';if(_0x4a2805)_0x4a2805['style']['display']='none';if(_0x4dabd5)_0x4dabd5['style'][_0xe0eaca(0xa0)]=_0xe0eaca(0xb8);if(_0x4f317)_0x4f317[_0xe0eaca(0xe0)][_0xe0eaca(0xa0)]=_0xe0eaca(0xb8);}_0x10ecad&&_0x10ecad['addEventListener']('click',()=>{const _0x55bbce=_0x25d535;console['log']('D1\x20toggle\x20clicked'),_0x50e923();_0x4a2805&&(_0x4a2805['classList']['add']('active'),_0x4a2805[_0x55bbce(0xe0)][_0x55bbce(0xa0)]='block');document['getElementById']('elo-recommendation-text-d1')['style'][_0x55bbce(0xa0)]='block',document['getElementById']('elo-recommendation-text-d2')['style'][_0x55bbce(0xa0)]='none',document['getElementById'](_0x55bbce(0xba))['style'][_0x55bbce(0xa0)]='none';if(_0x10ecad)_0x10ecad['classList']['add']('active');if(_0x3a8e6c)_0x3a8e6c['classList'][_0x55bbce(0xb9)]('active');if(_0xd6af8d)_0xd6af8d[_0x55bbce(0xee)]['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x3a8e6c&&_0x3a8e6c['addEventListener']('click',()=>{const _0x54c565=_0x25d535;console[_0x54c565(0xab)]('D2\x20toggle\x20clicked'),_0x50e923();_0x4dabd5&&(_0x4dabd5['classList'][_0x54c565(0xec)]('active'),_0x4dabd5['style'][_0x54c565(0xa0)]=_0x54c565(0xbc));document['getElementById'](_0x54c565(0xa1))['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')['style'][_0x54c565(0xa0)]='block',document[_0x54c565(0xb7)](_0x54c565(0xba))[_0x54c565(0xe0)]['display']=_0x54c565(0xb8);if(_0x3a8e6c)_0x3a8e6c['classList']['add']('active');if(_0x10ecad)_0x10ecad[_0x54c565(0xee)][_0x54c565(0xb9)]('active');if(_0xd6af8d)_0xd6af8d['classList']['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0xd6af8d&&_0xd6af8d['addEventListener']('click',()=>{const _0x4b51ef=_0x25d535;console['log']('D3\x20toggle\x20clicked'),_0x50e923();_0x4f317&&(_0x4f317['classList']['add']('active'),_0x4f317[_0x4b51ef(0xe0)]['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document[_0x4b51ef(0xb7)](_0x4b51ef(0x10c))['style']['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']='block';if(_0xd6af8d)_0xd6af8d['classList'][_0x4b51ef(0xec)](_0x4b51ef(0xc0));if(_0x10ecad)_0x10ecad['classList']['remove']('active');if(_0x3a8e6c)_0x3a8e6c['classList'][_0x4b51ef(0xb9)]('active');displayLadderD3(),findBestOpponent('d3');}),_0x13a043&&_0x13a043[_0x25d535(0x102)](_0x25d535(0x10d),()=>{const _0x18ceae=_0x25d535;_0x50e923();if(_0x29b519)_0x29b519['style']['display']=_0x18ceae(0xbc);displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0x18ceae(0x10c))['style'][_0x18ceae(0xa0)]='none',document['getElementById']('elo-recommendation-text-d3')['style'][_0x18ceae(0xa0)]='none';});}document['addEventListener']('DOMContentLoaded',()=>{const _0x4eec59=a27_0x1a09;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById'](_0x4eec59(0xa1))['style']['display']=_0x4eec59(0xbc);});export{displayLadder};async function findBestOpponent(_0x95e7a5='d1'){const _0x4c6414=a27_0x1a09,_0x1764d5='elo-recommendation-text-'+_0x95e7a5,_0x5cedd4=document['getElementById'](_0x1764d5);if(!_0x5cedd4){console[_0x4c6414(0xa3)]('Recommendation\x20element\x20for\x20'+_0x95e7a5+'\x20not\x20found');return;}const _0x5c9854=auth['currentUser'];if(!_0x5c9854){_0x5cedd4['textContent']='';return;}try{const _0xc24cc7=doc(db,'userProfiles',_0x5c9854[_0x4c6414(0x107)]),_0x14935d=await getDoc(_0xc24cc7);if(!_0x14935d['exists']()){console['log']('No\x20user\x20profile\x20found'),_0x5cedd4['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x26e4cb=_0x14935d[_0x4c6414(0x114)](),_0x34adf1=_0x26e4cb['username'];if(!_0x34adf1){_0x5cedd4[_0x4c6414(0xd1)]='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x208e53;switch(_0x95e7a5){case'd1':_0x208e53=_0x4c6414(0xad);break;case'd2':_0x208e53=_0x4c6414(0xef);break;case'd3':_0x208e53='playersD3';break;case'duos':_0x208e53=_0x4c6414(0xa2);break;default:_0x208e53=_0x4c6414(0xad);}if(_0x95e7a5==='duos'){const _0x5dba5c=collection(db,_0x208e53),_0xbf2674=query(_0x5dba5c,where('username','==',_0x34adf1)),_0x2a4ba2=await getDocs(_0xbf2674);if(_0x2a4ba2[_0x4c6414(0xc9)]){_0x5cedd4[_0x4c6414(0xd1)]=_0x4c6414(0xfb);return;}const _0x219194=_0x2a4ba2[_0x4c6414(0xd3)][0x0]['data'](),_0x114fe7=parseInt(_0x219194['eloRating'])||0x4b0;if(_0x219194[_0x4c6414(0xc2)]&&_0x219194['teammate']){_0x5cedd4[_0x4c6414(0xb1)]='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x219194[_0x4c6414(0xdf)]+_0x4c6414(0xed);return;}const _0xe2acc4=await getDocs(_0x5dba5c);let _0x467920=null,_0x4f3a34=-0x1;_0xe2acc4[_0x4c6414(0xe9)](_0x1c55c4=>{const _0x37911e=_0x4c6414,_0x26f7e6=_0x1c55c4['data']();if(_0x26f7e6[_0x37911e(0xd4)]===_0x34adf1)return;if(_0x26f7e6['hasTeam'])return;const _0xac4861=parseInt(_0x26f7e6[_0x37911e(0x100)])||0x4b0,_0x43c3a2=Math[_0x37911e(0x111)](_0xac4861-_0x114fe7),_0x438ce6=Math['max'](0x0,0xc8-_0x43c3a2);_0x438ce6>_0x4f3a34&&(_0x467920=_0x26f7e6,_0x4f3a34=_0x438ce6);});if(_0x467920){const _0x3996cf=parseInt(_0x467920[_0x4c6414(0x100)])||0x4b0;let _0x39efa4='gray';if(_0x3996cf>=0x7d0)_0x39efa4=_0x4c6414(0xce);else{if(_0x3996cf>=0x708)_0x39efa4=_0x4c6414(0x108);else{if(_0x3996cf>=0x640)_0x39efa4='#C0C0C0';else _0x3996cf>=0x578&&(_0x39efa4='#CD7F32');}}_0x5cedd4['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x39efa4+_0x4c6414(0xe4)+_0x467920['username']+'</span>\x20(ELO:\x20'+_0x3996cf+')';}else _0x5cedd4['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x330e06=collection(db,_0x208e53),_0x18f7d1=query(_0x330e06,where('username','==',_0x34adf1)),_0x249f55=await getDocs(_0x18f7d1);if(_0x249f55['empty']){_0x5cedd4[_0x4c6414(0xd1)]='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x95e7a5[_0x4c6414(0xc1)]()+'\x20ladder';return;}const _0x3f430f=_0x249f55['docs'][0x0][_0x4c6414(0x114)](),_0x33a0b7=parseInt(_0x3f430f[_0x4c6414(0x100)])||0x5dc,_0x2c1bfc=await getDocs(_0x330e06);let _0x197a1d=null,_0x2147ff=-0x1;const _0x52b030=getPlayerRankName(_0x33a0b7);_0x2c1bfc[_0x4c6414(0xe9)](_0x5f4f0c=>{const _0x507d82=_0x4c6414,_0x594bc3=_0x5f4f0c['data']();if(_0x594bc3[_0x507d82(0xd4)]===_0x34adf1)return;const _0x573e99=parseInt(_0x594bc3[_0x507d82(0x100)])||0x5dc,_0xb5fc14=getPlayerRankName(_0x573e99),_0x5acd7b=Math[_0x507d82(0x111)](_0x573e99-_0x33a0b7),_0x22bce6=0x20,_0x3093f0=0x1/(0x1+Math[_0x507d82(0xf3)](0xa,(_0x573e99-_0x33a0b7)/0x190)),_0x86c27=Math['round'](_0x22bce6*(0x1-_0x3093f0));if(_0x86c27<=0x0)return;let _0x182e89=0x0;const _0x8dab0e=Math['max'](0x0,0x64-_0x5acd7b*0.5),_0x7e386b=_0x86c27>=0x3&&_0x86c27<=0x8?0x32:_0x86c27>0x0&&_0x86c27<0xf?0x1e:0xa,_0x4d3f28=_0x52b030===_0xb5fc14?0x28:0x0;_0x182e89=_0x8dab0e+_0x7e386b+_0x4d3f28,_0x182e89>_0x2147ff&&(_0x197a1d=_0x594bc3,_0x2147ff=_0x182e89);});if(_0x197a1d){const _0x1aa314=parseInt(_0x197a1d['eloRating'])||0x5dc;let _0x3ee650=_0x4c6414(0xc4);if(_0x1aa314>=0x7d0)_0x3ee650=_0x4c6414(0xce);else{if(_0x1aa314>=0x708)_0x3ee650='#FFD700';else{if(_0x1aa314>=0x640)_0x3ee650='#b9f1fc';else _0x1aa314>=0x578&&(_0x3ee650='#CD7F32');}}_0x5cedd4['innerHTML']=_0x4c6414(0xe2)+_0x33a0b7+_0x4c6414(0xcf)+_0x3ee650+';\x22>'+_0x197a1d[_0x4c6414(0xd4)]+_0x4c6414(0x10b);}else _0x5cedd4['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x33a0b7+')';}catch(_0x155a88){console[_0x4c6414(0xa3)]('Error\x20finding\x20best\x20opponent:',_0x155a88),_0x5cedd4['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x309885=>{const _0x4eb3bb=a27_0x1a09,_0x1c0765=document['getElementById']('d1-ladder-container')&&document['getElementById'](_0x4eb3bb(0xff))[_0x4eb3bb(0xe0)]['display']!=='none',_0x2da2ca=document['getElementById']('d2-ladder-container')&&document['getElementById'](_0x4eb3bb(0xb4))['style']['display']!==_0x4eb3bb(0xb8),_0xf9bdf7=document[_0x4eb3bb(0xb7)]('d3-ladder-container')&&document[_0x4eb3bb(0xb7)](_0x4eb3bb(0xcd))['style'][_0x4eb3bb(0xa0)]!=='none',_0x5d9b95=document['getElementById']('duos-ladder-container')&&document['getElementById']('duos-ladder-container')[_0x4eb3bb(0xe0)]['display']!=='none',_0x38e41c=_0x1c0765?'d1':_0x2da2ca?'d2':_0xf9bdf7?'d3':_0x5d9b95?_0x4eb3bb(0xdb):'d1';findBestOpponent(_0x38e41c);}),document[a27_0x4b6044(0x102)]('DOMContentLoaded',()=>{const _0x4ff1a1=a27_0x4b6044,_0x139a25=document['getElementById'](_0x4ff1a1(0x103)),_0x36ca1c=document['querySelector']('label[for=\x22duos-switch\x22]');_0x139a25&&_0x36ca1c&&(_0x139a25['addEventListener']('change',async _0x41d859=>{const _0xbdf093=_0x4ff1a1;if(_0x41d859['target']['checked']){const _0x1f9c01=auth?.['currentUser'],_0x152730=await checkIfUserIsAdmin(_0x1f9c01);if(!_0x152730){_0x41d859['preventDefault']();const _0x5e8b84=document['getElementById']('d1-switch');return _0x5e8b84&&(_0x5e8b84['checked']=!![],_0x5e8b84['dispatchEvent'](new Event(_0xbdf093(0x118)))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x3be3db=>{const _0x4c545b=_0x4ff1a1,_0x175b2b=await checkIfUserIsAdmin(_0x3be3db);!_0x175b2b?(_0x139a25['disabled']=!![],_0x36ca1c['style'][_0x4c545b(0x116)]=_0x4c545b(0xcc),_0x36ca1c['style']['cursor']='not-allowed',_0x36ca1c[_0x4c545b(0xfc)]='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x139a25['disabled']=![],_0x36ca1c[_0x4c545b(0xe0)][_0x4c545b(0x116)]='1',_0x36ca1c['style']['cursor']=_0x4c545b(0xc6),_0x36ca1c[_0x4c545b(0xfc)]='');}));});async function checkIfUserIsAdmin(_0x47bfee){const _0x3ed2a0=a27_0x4b6044;if(!_0x47bfee)return![];try{const _0x2a7189=[_0x3ed2a0(0x9f),'brian2af@outlook.com'];if(_0x47bfee[_0x3ed2a0(0xb6)]&&_0x2a7189[_0x3ed2a0(0xfd)](_0x47bfee['email']['toLowerCase']()))return!![];const _0x12d5d9=['userProfiles','players','playersD2','playersD3'],_0x4f689d=['admin','owner','council','creative\x20lead'];for(const _0x4a0b2c of _0x12d5d9){try{const _0x598fc4=doc(db,_0x4a0b2c,_0x47bfee['uid']),_0x23471c=await getDoc(_0x598fc4);if(_0x23471c['exists']()){const _0x510a08=_0x23471c['data'](),_0x2ee832=(_0x510a08[_0x3ed2a0(0x10f)]||_0x510a08['role']||'')['toLowerCase']();if(_0x2ee832&&_0x4f689d[_0x3ed2a0(0xfd)](_0x2ee832))return!![];}}catch(_0x132c1f){console[_0x3ed2a0(0xe5)]('Error\x20checking\x20'+_0x4a0b2c+':',_0x132c1f);}}return![];}catch(_0x1db6e3){return console[_0x3ed2a0(0xa3)]('Error\x20checking\x20admin\x20status:',_0x1db6e3),![];}}function showAdminOnlyMessage(){const _0x46d811=a27_0x4b6044,_0x5d7fd0=document['getElementById'](_0x46d811(0xf6));_0x5d7fd0&&_0x5d7fd0[_0x46d811(0xb9)]();const _0xf49767=document['createElement']('div');_0xf49767['id']=_0x46d811(0xf6),_0xf49767['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0xf49767['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body'][_0x46d811(0x109)](_0xf49767),setTimeout(()=>{const _0x46c6ab=_0x46d811;_0xf49767['parentNode']&&_0xf49767[_0x46c6ab(0xb9)]();},0xbb8);}