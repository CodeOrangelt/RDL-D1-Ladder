const a33_0x587095=a33_0x5a0a,a33_0x236bf0=(function(){let _0x96bf21=!![];return function(_0x26f12a,_0x51bf5a){const _0x49ee29=_0x96bf21?function(){if(_0x51bf5a){const _0x50585a=_0x51bf5a['apply'](_0x26f12a,arguments);return _0x51bf5a=null,_0x50585a;}}:function(){};return _0x96bf21=![],_0x49ee29;};}()),a33_0x504b47=a33_0x236bf0(this,function(){const _0x2e6f4a=a33_0x5a0a;let _0x36d30c;try{const _0x111cfe=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x36d30c=_0x111cfe();}catch(_0x4d2cbe){_0x36d30c=window;}const _0x36e652=_0x36d30c['console']=_0x36d30c[_0x2e6f4a(0x106)]||{},_0x341563=['log','warn','info','error','exception','table',_0x2e6f4a(0x108)];for(let _0x8f5b9b=0x0;_0x8f5b9b<_0x341563['length'];_0x8f5b9b++){const _0x13ce19=a33_0x236bf0[_0x2e6f4a(0x112)][_0x2e6f4a(0xf3)]['bind'](a33_0x236bf0),_0x501c9d=_0x341563[_0x8f5b9b],_0x549f73=_0x36e652[_0x501c9d]||_0x13ce19;_0x13ce19[_0x2e6f4a(0x113)]=a33_0x236bf0['bind'](a33_0x236bf0),_0x13ce19[_0x2e6f4a(0xf8)]=_0x549f73['toString']['bind'](_0x549f73),_0x36e652[_0x501c9d]=_0x13ce19;}});a33_0x504b47();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a33_0x5ed7(){const _0x3ead20=['elo','player','loserScore','D3:\x20','#C0C0C0','data','totalKills','username','winnerUsername','toDate','timestamp','Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:','change','message','prototype','playerUsername','innerHTML','createElement','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list','toString','sort','map','playerId','\x20fallback\x20ELO\x20change:\x20','seconds','toLowerCase','eloHistory','forEach','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','querySelector','wins','has','from','console','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20','trace','gameMode','get','D3:\x20Error\x20fetching\x20ELO\x20history:','playersD3','#50C878','#F44336','now','error','gray','constructor','__proto__','size','length','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','style','totalMatches','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','set','country',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','desc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','MAX_SAFE_INTEGER','#ladder-d3\x20tbody','log','winRate'];a33_0x5ed7=function(){return _0x3ead20;};return a33_0x5ed7();}import{getRankStyle}from'./ranks.js';import a33_0x560eac from'./firebase-idle-wrapper.js';const styleEl=document[a33_0x587095(0xf6)](a33_0x587095(0x117));styleEl['textContent']='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x480a0e=![]){const _0x7076ed=a33_0x587095,_0x5efb50=document['querySelector'](_0x7076ed(0x120));if(!_0x5efb50){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x5efb50['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x4e6cfa=Date['now']();if(!_0x480a0e&&playerCacheD3['data']&&_0x4e6cfa-playerCacheD3[_0x7076ed(0xef)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x5b40ee=collection(db,'playersD3'),_0x73b910=await getDocs(_0x5b40ee),_0x225747=[];_0x73b910[_0x7076ed(0x100)](_0x2c9345=>{const _0x1994d2=_0x7076ed,_0xecb1b8=_0x2c9345[_0x1994d2(0xea)]();_0xecb1b8['username']&&_0x225747['push']({..._0xecb1b8,'id':_0x2c9345['id'],'elo':_0xecb1b8['eloRating']||0x0,'position':_0xecb1b8['position']||Number[_0x1994d2(0x11f)]});});const _0x38b416=collection(db,'userProfiles'),_0xe8385f=await getDocs(_0x38b416),_0x429182=new Map();_0xe8385f[_0x7076ed(0x100)](_0x5c3d93=>{const _0x54a6ad=_0x7076ed,_0x3279cc=_0x5c3d93[_0x54a6ad(0xea)]();_0x3279cc['username']&&_0x429182['set'](_0x3279cc[_0x54a6ad(0xec)][_0x54a6ad(0xfe)](),_0x3279cc);});for(const _0x19ffb1 of _0x225747){const _0x38772d=_0x19ffb1['username'][_0x7076ed(0xfe)]();if(_0x429182[_0x7076ed(0x104)](_0x38772d)){const _0x9fa17f=_0x429182[_0x7076ed(0x10a)](_0x38772d);_0x9fa17f[_0x7076ed(0x11b)]&&(_0x19ffb1[_0x7076ed(0x11b)]=_0x9fa17f[_0x7076ed(0x11b)][_0x7076ed(0xfe)]());}}const _0x1387e4=_0x225747[_0x7076ed(0xfa)](_0x53d8a2=>_0x53d8a2['username']),_0x702629=await fetchBatchMatchStatsD3(_0x1387e4);_0x225747['sort']((_0x1152fe,_0x434fe7)=>{const _0x25fbe1=_0x7076ed,_0x521fe4=_0x702629['get'](_0x1152fe[_0x25fbe1(0xec)])?.['totalMatches']||0x0,_0x4922b1=_0x702629['get'](_0x434fe7[_0x25fbe1(0xec)])?.['totalMatches']||0x0;if(_0x521fe4===0x0!==(_0x4922b1===0x0))return _0x521fe4===0x0?0x1:-0x1;return(_0x1152fe['position']||0x3e7)-(_0x434fe7['position']||0x3e7);}),_0x225747['forEach']((_0xeb3a6f,_0x46255f)=>{_0xeb3a6f['position']=_0x46255f+0x1;}),playerCacheD3[_0x7076ed(0xea)]=_0x225747,playerCacheD3['timestamp']=_0x4e6cfa,updateLadderDisplayD3(_0x225747);}catch(_0x4af2a6){console['error']('Error\x20loading\x20D3\x20ladder:',_0x4af2a6),_0x5efb50['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x4af2a6[_0x7076ed(0xf2)]+_0x7076ed(0x11e);}}function a33_0x5a0a(_0xfbd7aa,_0x37488c){const _0x504b47=a33_0x5ed7();return a33_0x5a0a=function(_0x236bf0,_0x25f1ec){_0x236bf0=_0x236bf0-0xe5;let _0x5ed70e=_0x504b47[_0x236bf0];return _0x5ed70e;},a33_0x5a0a(_0xfbd7aa,_0x37488c);}function calculateStreakDays(_0x127a62){const _0x5d5004=a33_0x587095;if(!_0x127a62)return 0x0;const _0x5c80d0=_0x127a62[_0x5d5004(0xee)](),_0x11c945=new Date(),_0x80d64f=Math['abs'](_0x11c945-_0x5c80d0);return Math['ceil'](_0x80d64f/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x221c4b,_0x2316a8){const _0x219097=a33_0x587095;try{const _0x4793d2=collection(db,'playersD3'),_0x1d66d0=await getDocs(_0x4793d2),_0xff929=[];_0x1d66d0['forEach'](_0x2495ff=>{_0xff929['push']({'id':_0x2495ff['id'],..._0x2495ff['data']()});});const _0x3ff86e=_0xff929['find'](_0x1f9917=>_0x1f9917['username']===_0x221c4b),_0x37a0d4=_0xff929['find'](_0x44d381=>_0x44d381[_0x219097(0xec)]===_0x2316a8);if(!_0x3ff86e||!_0x37a0d4){console['error'](_0x219097(0xf7));return;}if(_0x3ff86e['position']>_0x37a0d4['position']){const _0x25f4eb=_0x37a0d4['position'];for(const _0x58e226 of _0xff929){_0x58e226['position']>=_0x37a0d4['position']&&_0x58e226['position']<_0x3ff86e['position']&&_0x58e226['username']!==_0x221c4b&&await updateDoc(doc(db,'playersD3',_0x58e226['id']),{'position':_0x58e226['position']+0x1});}await updateDoc(doc(db,_0x219097(0x10c),_0x3ff86e['id']),{'position':_0x25f4eb});if(_0x25f4eb===0x1){const _0x8a5917=doc(db,'playersD3',_0x3ff86e['id']),_0x3593dd=await getDoc(_0x8a5917);!_0x3593dd['data']()['firstPlaceDate']&&await updateDoc(_0x8a5917,{'firstPlaceDate':Timestamp[_0x219097(0x10f)]()});}if(_0x37a0d4['position']===0x1){const _0x10a08d=doc(db,_0x219097(0x10c),_0x37a0d4['id']);await updateDoc(_0x10a08d,{'firstPlaceDate':null});}}}catch(_0x4b6704){console[_0x219097(0x110)]('Error\x20updating\x20D3\x20player\x20positions:',_0x4b6704);}}async function updateLadderDisplayD3(_0x58f324){const _0x431a75=a33_0x587095;_0x58f324[_0x431a75(0xf9)]((_0xe54566,_0x180577)=>_0xe54566['position']-_0x180577['position']);const _0x8d7eb6=document[_0x431a75(0x102)]('#ladder-d3\x20tbody');if(!_0x8d7eb6)return;_0x8d7eb6['innerHTML']='';const _0x310a2d=_0x58f324[_0x431a75(0xfa)](_0x59152a=>_0x59152a[_0x431a75(0xec)]),_0x4151f1=await fetchBatchMatchStatsD3(_0x310a2d),_0x59c99e=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x59c99e[_0x431a75(0xf5)]=_0x431a75(0x107);const _0x2aefd5=_0x58f324['map'](_0x1bad9c=>{const _0x54c2e4=_0x4151f1['get'](_0x1bad9c['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x1bad9c,_0x54c2e4);})['join']('');_0x8d7eb6[_0x431a75(0xf5)]=_0x2aefd5,getPlayersLastEloChangesD3(_0x310a2d)['then'](_0x2bbef3=>{const _0x56e268=new Map();_0x8d7eb6['querySelectorAll']('tr')['forEach']((_0x3d4132,_0x4ed19e)=>{const _0x29fdd4=a33_0x5a0a;_0x4ed19e<_0x310a2d[_0x29fdd4(0x115)]&&_0x56e268[_0x29fdd4(0x11a)](_0x310a2d[_0x4ed19e],_0x3d4132);}),_0x2bbef3['forEach']((_0x486544,_0x17b352)=>{const _0x587cd5=a33_0x5a0a,_0x4b0b7e=_0x56e268['get'](_0x17b352);if(_0x4b0b7e&&_0x486544!==0x0){const _0x19ba3f=_0x4b0b7e[_0x587cd5(0x102)]('td:nth-child(3)');if(_0x19ba3f){const _0x242b81=_0x486544>0x0?'+'+_0x486544:''+_0x486544,_0x578cb5=_0x19ba3f['querySelector']('.trend-indicator');_0x578cb5&&(_0x578cb5['textContent']=_0x242b81,_0x578cb5['style']['color']=_0x486544>0x0?'#4CAF50':_0x587cd5(0x10e),_0x578cb5['style']['fontWeight']='bold',_0x578cb5['style']['fontSize']='0.85em',_0x578cb5[_0x587cd5(0x117)]['display']='inline',_0x578cb5['style']['visibility']='visible',_0x578cb5['style']['opacity']='1');}}});})['catch'](_0x5bb9ad=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x5bb9ad));}async function fetchBatchMatchStatsD3(_0x2c89bd){const _0x19ca68=a33_0x587095,_0x3fcca8=new Map();try{const _0x2fb5f1=collection(db,'approvedMatchesD3'),_0x372e0f=await getDocs(_0x2fb5f1);_0x372e0f[_0x19ca68(0x100)](_0x29ee7f=>{const _0x22b6dd=_0x19ca68,_0x520f2c=_0x29ee7f[_0x22b6dd(0xea)]();if(_0x2c89bd['includes'](_0x520f2c[_0x22b6dd(0xed)])){const _0x57e423=_0x520f2c['winnerUsername'];!_0x3fcca8['has'](_0x57e423)&&_0x3fcca8['set'](_0x57e423,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x40660e=_0x3fcca8['get'](_0x57e423);_0x40660e[_0x22b6dd(0x103)]++,_0x40660e['totalMatches']++,_0x40660e['totalKills']+=parseInt(_0x520f2c['winnerScore'])||0x0,_0x40660e['totalDeaths']+=parseInt(_0x520f2c[_0x22b6dd(0xe7)])||0x0;}if(_0x2c89bd['includes'](_0x520f2c['loserUsername'])){const _0x3d3df8=_0x520f2c['loserUsername'];!_0x3fcca8['has'](_0x3d3df8)&&_0x3fcca8[_0x22b6dd(0x11a)](_0x3d3df8,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x4af9fc=_0x3fcca8[_0x22b6dd(0x10a)](_0x3d3df8);_0x4af9fc['losses']++,_0x4af9fc[_0x22b6dd(0x118)]++,_0x4af9fc['totalKills']+=parseInt(_0x520f2c['loserScore'])||0x0,_0x4af9fc['totalDeaths']+=parseInt(_0x520f2c['winnerScore'])||0x0;}}),_0x3fcca8['forEach'](_0xd23599=>{const _0x4da7c5=_0x19ca68;_0xd23599['kda']=_0xd23599['totalDeaths']>0x0?(_0xd23599['totalKills']/_0xd23599['totalDeaths'])['toFixed'](0x2):_0xd23599[_0x4da7c5(0xeb)],_0xd23599['winRate']=_0xd23599['totalMatches']>0x0?(_0xd23599['wins']/_0xd23599['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x1d5983){console['error'](_0x19ca68(0xf0),_0x1d5983);}return _0x3fcca8;}function createPlayerRowD3(_0xd3a289,_0x56fc1b){const _0x34cfb5=a33_0x587095,_0x3c795e=parseFloat(_0xd3a289[_0x34cfb5(0xe5)])||0x0;let _0x2688ea=_0x34cfb5(0x111);if(_0x3c795e>=0x7d0)_0x2688ea=_0x34cfb5(0x10d);else{if(_0x3c795e>=0x708)_0x2688ea='#FFD700';else{if(_0x3c795e>=0x640)_0x2688ea=_0x34cfb5(0xe9);else _0x3c795e>=0x578&&(_0x2688ea='#CD7F32');}}let _0x12ce8c='';return _0xd3a289['country']&&(_0x12ce8c='<img\x20src=\x22../images/flags/'+_0xd3a289['country']['toLowerCase']()+_0x34cfb5(0x101)+_0xd3a289['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xd3a289['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0xd3a289['username'])+_0x34cfb5(0x119)+_0x2688ea+_0x34cfb5(0x11c)+_0xd3a289['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x12ce8c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x2688ea+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3c795e+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x56fc1b['totalMatches']+_0x34cfb5(0x116)+_0x56fc1b[_0x34cfb5(0x103)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x56fc1b['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x56fc1b['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x56fc1b[_0x34cfb5(0x122)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD3(_0x4b3299){const _0x5a5304=a33_0x587095,_0x3a68e6=new Map();_0x4b3299['forEach'](_0x4ac1c0=>_0x3a68e6[_0x5a5304(0x11a)](_0x4ac1c0,0x0));try{console['log']('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x4b3299);const _0x1afedb=new Map(),_0x49d1d2=await getDocs(collection(db,_0x5a5304(0x10c)));_0x49d1d2[_0x5a5304(0x100)](_0x19d5c0=>{const _0xa8ed8=_0x5a5304,_0x279a02=_0x19d5c0[_0xa8ed8(0xea)]();_0x279a02['username']&&_0x1afedb['set'](_0x19d5c0['id'],_0x279a02['username']);}),console[_0x5a5304(0x121)]('D3:\x20Player\x20ID\x20mappings:',Array[_0x5a5304(0x105)](_0x1afedb['entries']()));const _0x5acf8c=collection(db,'eloHistoryD3'),_0x3c181d=query(_0x5acf8c,orderBy('timestamp','desc'),limit(0x64)),_0x1c6fdc=await getDocs(_0x3c181d);_0x1c6fdc['empty']?console['log']('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console['log']('D3:\x20Found\x20'+_0x1c6fdc[_0x5a5304(0x114)]+'\x20entries\x20in\x20eloHistoryD3');const _0x2a43cc=new Map();_0x1c6fdc['forEach'](_0x505249=>{const _0x25ae38=_0x5a5304,_0x4d7a02=_0x505249['data']();let _0x49264=null;if(_0x4d7a02['username'])_0x49264=_0x4d7a02['username'];else{if(_0x4d7a02['playerUsername'])_0x49264=_0x4d7a02['playerUsername'];else{if(_0x4d7a02['player']&&typeof _0x4d7a02['player']==='string')_0x49264=_0x4d7a02[_0x25ae38(0xe6)];else{if(_0x4d7a02['player']&&_0x1afedb['has'](_0x4d7a02['player']))_0x49264=_0x1afedb['get'](_0x4d7a02['player']);else _0x4d7a02['playerId']&&_0x1afedb['has'](_0x4d7a02['playerId'])&&(_0x49264=_0x1afedb['get'](_0x4d7a02[_0x25ae38(0xfb)]));}}}(_0x4d7a02['username']==='pilot'||_0x4d7a02[_0x25ae38(0xf4)]==='pilot'||_0x4d7a02[_0x25ae38(0xe6)]&&_0x1afedb['get'](_0x4d7a02[_0x25ae38(0xe6)])==='pilot')&&console['log']('D3:\x20Found\x20pilot\x20entry:',_0x4d7a02),_0x49264&&_0x4b3299['includes'](_0x49264)&&(!_0x2a43cc[_0x25ae38(0x104)](_0x49264)&&_0x2a43cc[_0x25ae38(0x11a)](_0x49264,[]),_0x2a43cc['get'](_0x49264)['push']({..._0x4d7a02,'timestamp':_0x4d7a02[_0x25ae38(0xef)]?.[_0x25ae38(0xfd)]||0x0}));}),console['log']('D3:\x20Found\x20entries\x20for\x20'+_0x2a43cc['size']+'\x20players'),_0x2a43cc[_0x5a5304(0x100)]((_0x37f8cb,_0x1b5a75)=>{const _0x2e3935=_0x5a5304;if(_0x37f8cb[_0x2e3935(0x115)]>0x0){_0x37f8cb['sort']((_0x41ea4e,_0x2f7892)=>_0x2f7892['timestamp']-_0x41ea4e['timestamp']);const _0x4838fd=_0x37f8cb['find'](_0x30bbf3=>_0x30bbf3['change']!==undefined||_0x30bbf3['newElo']!==undefined&&_0x30bbf3['previousElo']!==undefined);if(_0x4838fd){let _0x3d5072;if(_0x4838fd[_0x2e3935(0xf1)]!==undefined)_0x3d5072=_0x4838fd['change'];else _0x4838fd['newElo']!==undefined&&_0x4838fd['previousElo']!==undefined&&(_0x3d5072=_0x4838fd['newElo']-_0x4838fd['previousElo']);_0x3d5072!==undefined&&(_0x3a68e6['set'](_0x1b5a75,_0x3d5072),console['log'](_0x2e3935(0xe8)+_0x1b5a75+'\x20ELO\x20change:\x20'+_0x3d5072));}}});if(_0x2a43cc['size']===0x0){console['log']('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x5b84ca=collection(db,_0x5a5304(0xff)),_0x454960=query(_0x5b84ca,where(_0x5a5304(0x109),'==','D3'),orderBy(_0x5a5304(0xef),_0x5a5304(0x11d)),limit(0x32));try{const _0x58fe69=await getDocs(_0x454960);console['log']('D3:\x20Found\x20'+_0x58fe69['size']+'\x20fallback\x20entries'),_0x58fe69['forEach'](_0x1ba8c6=>{const _0x5b6061=_0x5a5304,_0x1b1192=_0x1ba8c6[_0x5b6061(0xea)]();let _0x13c30c=_0x1b1192['username']||_0x1b1192['playerUsername'];!_0x13c30c&&_0x1b1192['player']&&_0x1afedb['has'](_0x1b1192['player'])&&(_0x13c30c=_0x1afedb['get'](_0x1b1192['player']));if(_0x13c30c&&_0x4b3299['includes'](_0x13c30c)){const _0x245b99=_0x1b1192[_0x5b6061(0xf1)]||(_0x1b1192['newElo']!==undefined&&_0x1b1192['previousElo']!==undefined?_0x1b1192['newElo']-_0x1b1192['previousElo']:0x0);_0x245b99!==0x0&&(_0x3a68e6['set'](_0x13c30c,_0x245b99),console[_0x5b6061(0x121)](_0x5b6061(0xe8)+_0x13c30c+_0x5b6061(0xfc)+_0x245b99));}});}catch(_0x288f71){console['log']('D3:\x20Fallback\x20query\x20failed:',_0x288f71);}}const _0x24752d=Array['from'](_0x3a68e6['entries']())['filter'](([_0x53d9d6,_0x50dedb])=>_0x50dedb!==0x0);console[_0x5a5304(0x121)]('D3:\x20Final\x20ELO\x20changes:',_0x24752d);}catch(_0x3927d7){console['error'](_0x5a5304(0x10b),_0x3927d7);}return _0x3a68e6;}export{displayLadderD3,updatePlayerPositions};