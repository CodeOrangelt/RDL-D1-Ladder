const a25_0xa543a1=a25_0x3cf0,a25_0x153988=(function(){let _0x307966=!![];return function(_0x2b6d6f,_0x2089fb){const _0x2c081b=_0x307966?function(){if(_0x2089fb){const _0xfe064b=_0x2089fb['apply'](_0x2b6d6f,arguments);return _0x2089fb=null,_0xfe064b;}}:function(){};return _0x307966=![],_0x2c081b;};}()),a25_0x5bd2b1=a25_0x153988(this,function(){const _0x4f9b0d=a25_0x3cf0;let _0x5aeea2;try{const _0x1d17a1=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5aeea2=_0x1d17a1();}catch(_0x103d6f){_0x5aeea2=window;}const _0x43133c=_0x5aeea2['console']=_0x5aeea2['console']||{},_0xe34b6f=['log','warn',_0x4f9b0d(0x1b2),_0x4f9b0d(0x1e5),_0x4f9b0d(0x1f0),'table','trace'];for(let _0x8b0131=0x0;_0x8b0131<_0xe34b6f[_0x4f9b0d(0x204)];_0x8b0131++){const _0x43f9ea=a25_0x153988['constructor']['prototype'][_0x4f9b0d(0x1d0)](a25_0x153988),_0x2faf77=_0xe34b6f[_0x8b0131],_0x29b569=_0x43133c[_0x2faf77]||_0x43f9ea;_0x43f9ea['__proto__']=a25_0x153988['bind'](a25_0x153988),_0x43f9ea['toString']=_0x29b569['toString']['bind'](_0x29b569),_0x43133c[_0x2faf77]=_0x43f9ea;}});a25_0x5bd2b1();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';function a25_0x3cf0(_0x10be44,_0x39276a){const _0x5bd2b1=a25_0xd9ef();return a25_0x3cf0=function(_0x153988,_0x25970d){_0x153988=_0x153988-0x199;let _0xd9efb2=_0x5bd2b1[_0x153988];return _0xd9efb2;},a25_0x3cf0(_0x10be44,_0x39276a);}import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x8b1841=0x1){const _0x7cf989=a25_0x3cf0;try{document['getElementById'](_0x7cf989(0x1a5))['style']['display']='block';const _0x2074cf=await getLadderData(_0x8b1841);_0x2074cf[_0x7cf989(0x1be)]((_0x2a9e1c,_0x4ccf3c)=>_0x4ccf3c['elo']-_0x2a9e1c[_0x7cf989(0x1b3)]);const _0x4fca98=_0x2074cf[_0x7cf989(0x1fb)](_0x37232d=>_0x37232d['id']),_0x4f3970=await getEloHistoryBatch(_0x4fca98,_0x8b1841),_0x430376=_0x2074cf['map']((_0x477877,_0x3cc3d2)=>{const _0x18f848=_0x7cf989,_0x1f8217=_0x4f3970[_0x477877['id']]||[],_0x7f6359=_0x1f8217['sort']((_0x553b2c,_0x1c9115)=>new Date(_0x1c9115['date'])-new Date(_0x553b2c[_0x18f848(0x20a)]))['slice'](0x0,0x5);return{..._0x477877,'rank':_0x3cc3d2+0x1,'lastMatches':_0x7f6359,'recentActivity':_0x7f6359[_0x18f848(0x204)]>0x0};});renderLadder(_0x430376),setupRealTimeUpdates(_0x8b1841);}catch(_0x54804e){console['error'](_0x7cf989(0x1f1),_0x54804e),document['getElementById']('error-message')['innerText']=_0x7cf989(0x19f);}finally{document['getElementById']('loading-indicator')['style'][_0x7cf989(0x1c8)]='none';}}function setupRealTimeUpdates(_0x1d9238=0x1){const _0x38a2ab=a25_0x3cf0;activeListeners['forEach'](_0x1ccc91=>_0x1ccc91()),activeListeners=[];const _0x1fc00b=_0x1d9238===0x1?'players':_0x38a2ab(0x1e9)+_0x1d9238,_0x4f7f18=_0x1d9238===0x1?'matches':'matchesD'+_0x1d9238,_0x136398=new Date();_0x136398['setDate'](_0x136398[_0x38a2ab(0x1f2)]()-0x1);const _0x197626=setupEfficientListener(_0x4f7f18,[where('date','>=',_0x136398['toISOString']()),limit(0xa),orderBy('date','desc')],async _0x2fe802=>{const _0x40a98a=_0x38a2ab;_0x2fe802[_0x40a98a(0x204)]>0x0&&await loadLadderData(_0x1d9238);});activeListeners['push'](_0x197626);}export function cleanupListeners(){activeListeners['forEach'](_0x878388=>_0x878388()),activeListeners=[];}function renderLadder(_0x46a2a2){const _0x187ce2=document['getElementById']('ladder-container');_0x187ce2['innerHTML']='',_0x46a2a2['forEach'](_0x10cdb6=>{const _0xf654ff=a25_0x3cf0,_0x1dc76a=document['createElement'](_0xf654ff(0x1bd));_0x1dc76a[_0xf654ff(0x1c9)]='ladder-player',_0x1dc76a[_0xf654ff(0x1f7)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x10cdb6['rank']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x10cdb6['username']||_0x10cdb6['id'])+_0xf654ff(0x1a1)+_0x10cdb6['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x10cdb6['recentActivity']?'active':_0xf654ff(0x1fd))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x10cdb6[_0xf654ff(0x1ea)]?'Active':'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x187ce2[_0xf654ff(0x1e0)](_0x1dc76a);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x11f96e=![]){const _0x598dc8=a25_0x3cf0,_0x5b4823=document['querySelector'](_0x598dc8(0x1e8));if(!_0x5b4823){console['error'](_0x598dc8(0x1bb));return;}_0x5b4823['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x152b5c=Date['now']();if(!_0x11f96e&&playerCache[_0x598dc8(0x1c1)]&&_0x152b5c-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x3d22a6=collection(db,'players'),_0x4c1391=await getDocs(_0x3d22a6),_0x48664b=[];_0x4c1391['forEach'](_0x4f8a87=>{const _0x225f59=_0x598dc8,_0x346605=_0x4f8a87['data']();_0x48664b['push']({..._0x346605,'id':_0x4f8a87['id'],'elo':_0x346605[_0x225f59(0x1cc)]||0x0,'position':_0x346605[_0x225f59(0x1ec)]||Number['MAX_SAFE_INTEGER']});});const _0x4f701f=collection(db,'userProfiles'),_0x3bc975=await getDocs(_0x4f701f),_0x2df01e=new Map();_0x3bc975[_0x598dc8(0x1ef)](_0x1103b4=>{const _0x131e88=_0x598dc8,_0x33d24c=_0x1103b4['data']();_0x33d24c[_0x131e88(0x1d2)]&&_0x2df01e['set'](_0x33d24c[_0x131e88(0x1d2)]['toLowerCase'](),_0x33d24c);}),_0x48664b[_0x598dc8(0x1ef)](_0x5a069f=>{const _0x30ca71=_0x598dc8,_0x32e4ea=_0x5a069f[_0x30ca71(0x1d2)]?.['toLowerCase']();if(_0x32e4ea&&_0x2df01e['has'](_0x32e4ea)){const _0x53737b=_0x2df01e['get'](_0x32e4ea);_0x53737b[_0x30ca71(0x1c0)]&&(_0x5a069f['country']=_0x53737b['country'][_0x30ca71(0x1f5)]()),_0x5a069f['points']=_0x53737b['points']||0x0;}else _0x5a069f[_0x30ca71(0x1da)]=0x0;});const _0x10dbee=_0x48664b['map'](_0x127125=>_0x127125['username']),_0x4ef556=await fetchBatchMatchStats(_0x10dbee);_0x48664b['sort']((_0x432e3b,_0x30e37d)=>{const _0x468824=_0x598dc8,_0x1527cf=_0x4ef556[_0x468824(0x1c7)](_0x432e3b[_0x468824(0x1d2)])?.[_0x468824(0x1d6)]||0x0,_0x32e1ea=_0x4ef556['get'](_0x30e37d['username'])?.['totalMatches']||0x0;if(_0x1527cf===0x0!==(_0x32e1ea===0x0))return _0x1527cf===0x0?0x1:-0x1;return(_0x432e3b['position']||0x3e7)-(_0x30e37d[_0x468824(0x1ec)]||0x3e7);}),_0x48664b[_0x598dc8(0x1ef)]((_0x2029d3,_0x3d1d02)=>{const _0x405888=_0x598dc8;_0x2029d3[_0x405888(0x1ec)]=_0x3d1d02+0x1;}),playerCache[_0x598dc8(0x1c1)]=_0x48664b,playerCache['timestamp']=_0x152b5c,updateLadderDisplay(_0x48664b,_0x4ef556);}catch(_0x3a77a0){console['error']('Error\x20loading\x20ladder:',_0x3a77a0),_0x5b4823['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x3a77a0['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x47c317){const _0x6627c0=new Map();try{_0x47c317['forEach'](_0x4f9cd0=>{_0x6627c0['set'](_0x4f9cd0,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});});const _0xa9bf5e=collection(db,'approvedMatches'),_0xd98d25=await getDocs(_0xa9bf5e);_0xd98d25['forEach'](_0x59c80d=>{const _0x443112=a25_0x3cf0,_0x3c00d7=_0x59c80d[_0x443112(0x1c1)](),_0x20fe70=_0x3c00d7['winnerUsername'],_0x4a2439=_0x3c00d7['loserUsername'];if(_0x47c317['includes'](_0x20fe70)){const _0x117db2=_0x6627c0[_0x443112(0x1c7)](_0x20fe70);_0x117db2['wins']++,_0x117db2['totalMatches']++,_0x117db2[_0x443112(0x205)]+=parseInt(_0x3c00d7['winnerScore'])||0x0,_0x117db2['totalDeaths']+=parseInt(_0x3c00d7['loserScore'])||0x0;}if(_0x47c317[_0x443112(0x1c2)](_0x4a2439)){const _0x3c64b5=_0x6627c0[_0x443112(0x1c7)](_0x4a2439);_0x3c64b5[_0x443112(0x1b7)]++,_0x3c64b5['totalMatches']++,_0x3c64b5[_0x443112(0x205)]+=parseInt(_0x3c00d7['loserScore'])||0x0,_0x3c64b5['totalDeaths']+=parseInt(_0x3c00d7['winnerScore'])||0x0;}}),_0x47c317['forEach'](_0xf76f1a=>{const _0x5d12f8=a25_0x3cf0,_0x380559=_0x6627c0['get'](_0xf76f1a);_0x380559[_0x5d12f8(0x203)]=_0x380559['totalDeaths']>0x0?(_0x380559['totalKills']/_0x380559['totalDeaths'])['toFixed'](0x2):_0x380559['totalKills'][_0x5d12f8(0x19c)](0x2),_0x380559['winRate']=_0x380559['totalMatches']>0x0?(_0x380559['wins']/_0x380559['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x4a0f7a){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x4a0f7a);}return _0x6627c0;}function createPlayerRow(_0x211043,_0x2a2160){const _0x42265f=a25_0x3cf0,_0x7cbe80=parseFloat(_0x211043['elo'])||0x0;let _0x33e357=_0x42265f(0x19a);if(_0x7cbe80>=0x7d0)_0x33e357=_0x42265f(0x1e1);else{if(_0x7cbe80>=0x708)_0x33e357=_0x42265f(0x1b9);else{if(_0x7cbe80>=0x640)_0x33e357=_0x42265f(0x208);else _0x7cbe80>=0x578&&(_0x33e357='#CD7F32');}}let _0x2b4340='';return _0x211043['country']&&(_0x2b4340='<img\x20src=\x22../images/flags/'+_0x211043['country'][_0x42265f(0x1f5)]()+_0x42265f(0x1f8)+_0x211043[_0x42265f(0x1c0)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x211043['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x211043['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x33e357+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x211043['username']+_0x42265f(0x1ba)+_0x2b4340+_0x42265f(0x1cb)+_0x33e357+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x7cbe80+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a2160['totalMatches']+_0x42265f(0x1d7)+_0x2a2160[_0x42265f(0x1cd)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a2160['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a2160[_0x42265f(0x203)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a2160[_0x42265f(0x1cf)]+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a2160['points']+'</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x2920a4){const _0x181802=a25_0x3cf0;if(_0x2920a4>=0x7d0)return _0x181802(0x19e);if(_0x2920a4>=0x708)return _0x181802(0x199);if(_0x2920a4>=0x640)return'Silver';if(_0x2920a4>=0x578)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x29401c){const _0x34698b=a25_0x3cf0,_0x410f92=new Map();_0x29401c['forEach'](_0x1fc48b=>{_0x410f92['set'](_0x1fc48b,0x0);});try{const _0x1818b2=collection(db,'players'),_0x231707=await getDocs(_0x1818b2),_0x568483=new Map(),_0x277faf=new Map();_0x231707['forEach'](_0x15c23c=>{const _0x538886=a25_0x3cf0,_0x2d02ff=_0x15c23c[_0x538886(0x1c1)]();_0x2d02ff['username']&&(_0x568483['set'](_0x15c23c['id'],_0x2d02ff['username']),_0x277faf[_0x538886(0x1dd)](_0x2d02ff['username']['toLowerCase'](),_0x15c23c['id']));});const _0x4de1e6=collection(db,'eloHistory'),_0x5df821=query(_0x4de1e6,orderBy('timestamp',_0x34698b(0x1d5)),limit(0x12c)),_0x109216=await getDocs(_0x5df821);if(_0x109216['empty'])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x410f92;if(_0x109216['docs']['length']>0x0){const _0x32fb1c=_0x109216[_0x34698b(0x1df)][0x0]['data']();if(_0x32fb1c['player']&&_0x568483[_0x34698b(0x209)](_0x32fb1c['player'])){}}const _0x28e65e=new Map();let _0xa27dd4=0x0;_0x109216['forEach'](_0x3b1345=>{const _0x4614ac=_0x34698b,_0x11564a=_0x3b1345[_0x4614ac(0x1c1)]();let _0x136cb2=null;if(_0x11564a['player']&&_0x568483['has'](_0x11564a[_0x4614ac(0x1f4)]))_0x136cb2=_0x568483['get'](_0x11564a['player']);else{if(_0x11564a[_0x4614ac(0x1d2)]&&_0x277faf['has'](_0x11564a['username']['toLowerCase']()))_0x136cb2=_0x11564a[_0x4614ac(0x1d2)];else _0x11564a['playerUsername']&&_0x277faf['has'](_0x11564a['playerUsername']['toLowerCase']())&&(_0x136cb2=_0x11564a['playerUsername']);}_0x136cb2&&_0x29401c['includes'](_0x136cb2)&&(_0xa27dd4++,!_0x28e65e['has'](_0x136cb2)&&_0x28e65e['set'](_0x136cb2,[]),_0x28e65e['get'](_0x136cb2)['push']({..._0x11564a,'timestamp':_0x11564a['timestamp']?.['seconds']||0x0}));}),_0x28e65e[_0x34698b(0x1ef)]((_0x1c709b,_0x3d9da2)=>{const _0x214a23=_0x34698b;if(_0x1c709b[_0x214a23(0x204)]>0x0){_0x1c709b['sort']((_0x5e2b3d,_0x555b6d)=>_0x555b6d['timestamp']-_0x5e2b3d['timestamp']);const _0x3761a8=_0x1c709b[_0x214a23(0x1fe)](_0x2e3fb9=>_0x2e3fb9[_0x214a23(0x19d)]!==undefined||_0x2e3fb9['newElo']!==undefined&&_0x2e3fb9['previousElo']!==undefined||_0x2e3fb9[_0x214a23(0x206)]!==undefined&&_0x2e3fb9['oldEloRating']!==undefined);if(_0x3761a8){let _0x295b37;if(_0x3761a8['change']!==undefined)_0x295b37=parseInt(_0x3761a8['change']);else{if(_0x3761a8['newElo']!==undefined&&entry['previousElo']!==undefined)_0x295b37=parseInt(_0x3761a8['newElo'])-parseInt(_0x3761a8[_0x214a23(0x1a4)]);else _0x3761a8['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x295b37=parseInt(_0x3761a8[_0x214a23(0x206)])-parseInt(_0x3761a8['oldEloRating']));}!isNaN(_0x295b37)&&_0x295b37!==0x0&&_0x410f92['set'](_0x3d9da2,_0x295b37);}}});}catch(_0x17921c){console[_0x34698b(0x1e5)]('Error\x20fetching\x20ELO\x20history:',_0x17921c);}return _0x410f92;}function a25_0xd9ef(){const _0x558c67=['Gold','gray','🪙\x20Loaded\x20fresh\x20tokens\x20for','toFixed','change','Emerald','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','body','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>','classList','empty','previousElo','loading-indicator','D3\x20toggle\x20clicked','textContent','log','addEventListener','style','d1-switch','Error\x20checking\x20admin\x20status:','getElementById','querySelector','Error\x20finding\x20best\x20opponent:','brian2af@outlook.com','d2-switch','info','elo','title','checked','disabled','losses','abs','#FFD700','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Ladder\x20table\x20body\x20not\x20found','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','div','sort','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','country','data','includes','pointer','elo-recommendation-text-d1','playersDuos','#CD7F32','get','display','className','elo-recommendation-text-d3','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','eloRating','wins','onAuthStateChanged','winRate','bind','DOMContentLoaded','username','.trend-indicator','toUpperCase','desc','totalMatches','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','#ladder\x20thead\x20tr','#F44336','points','Error\x20fetching\x20tokens:','currentUser','set','teammate','docs','appendChild','#50C878',';\x22>','hasTeam','block','error','Error\x20updating\x20ELO\x20trend\x20indicators:','d2-ladder-container','#ladder\x20tbody','playersD','recentActivity','dispatchEvent','position','none','Error\x20checking\x20','forEach','exception','Error\x20loading\x20ladder\x20data:','getDate','querySelectorAll','player','toLowerCase','admin-only-message','innerHTML','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','d1-ladder-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>🔒\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20','map','color','inactive','find','active','click','d3-switch','remove','kda','length','totalKills','newEloRating','No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!','#b9f1fc','has','date'];a25_0xd9ef=function(){return _0x558c67;};return a25_0xd9ef();}function createPlayerRowWithToken(_0x48ff3d,_0x3a9b14,_0x3b9fa5){const _0x276784=a25_0x3cf0,_0x15c5cc=parseFloat(_0x48ff3d[_0x276784(0x1b3)])||0x0;let _0x2a660f='gray';if(_0x15c5cc>=0x7d0)_0x2a660f=_0x276784(0x1e1);else{if(_0x15c5cc>=0x708)_0x2a660f=_0x276784(0x1b9);else{if(_0x15c5cc>=0x640)_0x2a660f='#b9f1fc';else _0x15c5cc>=0x578&&(_0x2a660f=_0x276784(0x1c6));}}let _0x4e2cae='';_0x48ff3d['country']&&(_0x4e2cae='<img\x20src=\x22../images/flags/'+_0x48ff3d['country'][_0x276784(0x1f5)]()+_0x276784(0x1f8)+_0x48ff3d[_0x276784(0x1c0)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x4138df='';return _0x3b9fa5&&(_0x4138df='<img\x20src=\x22'+_0x3b9fa5['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3b9fa5['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x3b9fa5['tokenName']+'\x20'+(_0x3b9fa5['equipped']?'(Equipped)':'')+_0x276784(0x1bf)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x48ff3d['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x48ff3d['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x2a660f+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x48ff3d['username']+_0x276784(0x1ba)+_0x4e2cae+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4138df+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x2a660f+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x15c5cc+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3a9b14['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3a9b14[_0x276784(0x1cd)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3a9b14['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3a9b14['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3a9b14['winRate']+_0x276784(0x1bc)+(_0x48ff3d['points']||0x0)+'</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x43be1c,_0x353da1=null){const _0x295723=a25_0x3cf0,_0x4f7311=document[_0x295723(0x1ae)]('#ladder\x20tbody');if(!_0x4f7311){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x1b3115=document[_0x295723(0x1ae)](_0x295723(0x1d8));_0x1b3115&&(_0x1b3115[_0x295723(0x1f7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x48e0a3=_0x43be1c['map'](_0x1483f4=>_0x1483f4['username']);!_0x353da1&&(_0x353da1=await fetchBatchMatchStats(_0x48e0a3));let _0x2914aa=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x2914aa=await getTokensByUsernames(_0x48e0a3),console['log'](_0x295723(0x19b),_0x2914aa['size'],'players'),_0x2914aa[_0x295723(0x1ef)]((_0x4e025a,_0x273cb2)=>{const _0x3e72aa=_0x295723,_0xa52d11=_0x4e025a[_0x3e72aa(0x1fe)](_0x1c8429=>_0x1c8429['equipped']);_0xa52d11&&console['log']('🎯\x20'+_0x273cb2+'\x20has\x20equipped:\x20'+_0xa52d11['tokenName']);});}catch(_0x5d244f){console['error'](_0x295723(0x1db),_0x5d244f);}const _0x52dc05=_0x43be1c[_0x295723(0x1fb)](_0x4b4396=>{const _0x5db170=_0x295723,_0x368fa7=_0x353da1['get'](_0x4b4396[_0x5db170(0x1d2)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x5618b6=_0x2914aa['get'](_0x4b4396['username'])||[],_0x5a53fb=getPrimaryDisplayToken(_0x5618b6);return _0x5a53fb&&console['log']('🎨\x20'+_0x4b4396[_0x5db170(0x1d2)]+'\x20displaying\x20token:\x20'+_0x5a53fb['tokenName']+'\x20(equipped:\x20'+_0x5a53fb['equipped']+')'),createPlayerRowWithToken(_0x4b4396,_0x368fa7,_0x5a53fb);})['join']('');_0x4f7311[_0x295723(0x1f7)]=_0x52dc05,getPlayersLastEloChanges(_0x48e0a3)['then'](_0x1f69cd=>{const _0x40792d=_0x295723,_0x4a067b=new Map();_0x4f7311[_0x40792d(0x1f3)]('tr')['forEach']((_0x24d904,_0x948a0a)=>{_0x948a0a<_0x48e0a3['length']&&_0x4a067b['set'](_0x48e0a3[_0x948a0a],_0x24d904);}),_0x1f69cd['forEach']((_0x5ec4dd,_0x136ebc)=>{const _0xa77118=_0x40792d,_0x5a7c70=_0x4a067b[_0xa77118(0x1c7)](_0x136ebc);if(_0x5a7c70&&_0x5ec4dd!==0x0){const _0x34939e=_0x5a7c70[_0xa77118(0x1ae)]('td:nth-child(3)');if(_0x34939e){const _0x2483f7=_0x5ec4dd>0x0?'+'+_0x5ec4dd:''+_0x5ec4dd,_0x45cfb8=_0x34939e['querySelector'](_0xa77118(0x1d3));_0x45cfb8&&(_0x45cfb8['textContent']=_0x2483f7,_0x45cfb8[_0xa77118(0x1aa)][_0xa77118(0x1fc)]=_0x5ec4dd>0x0?'#4CAF50':_0xa77118(0x1d9),_0x45cfb8['style']['fontWeight']='bold',_0x45cfb8['style']['fontSize']='0.85em',_0x45cfb8['style']['display']='inline',_0x45cfb8[_0xa77118(0x1aa)]['visibility']='visible',_0x45cfb8[_0xa77118(0x1aa)]['opacity']='1');}}});})['catch'](_0x576fa3=>console['error'](_0x295723(0x1e6),_0x576fa3));}function initLadderToggles(){const _0x3adc7e=a25_0x3cf0,_0x1dafa0=document['getElementById']('d1-switch'),_0x562e82=document[_0x3adc7e(0x1ad)](_0x3adc7e(0x1b1)),_0x5d1657=document[_0x3adc7e(0x1ad)](_0x3adc7e(0x201)),_0x5e3815=document['getElementById']('duos-switch'),_0x49a4fe=document['getElementById'](_0x3adc7e(0x1f9)),_0x30d41b=document['getElementById']('d2-ladder-container'),_0x10ab36=document[_0x3adc7e(0x1ad)]('d3-ladder-container'),_0x17603a=document['getElementById']('duos-ladder-container');function _0x32fc5e(){const _0x252e7c=_0x3adc7e;if(_0x49a4fe)_0x49a4fe['classList']['remove']('active');if(_0x30d41b)_0x30d41b[_0x252e7c(0x1a2)]['remove'](_0x252e7c(0x1ff));if(_0x10ab36)_0x10ab36['classList']['remove']('active');if(_0x17603a)_0x17603a[_0x252e7c(0x1aa)]['display']='none';if(_0x49a4fe)_0x49a4fe['style']['display']=_0x252e7c(0x1ed);if(_0x30d41b)_0x30d41b['style']['display']=_0x252e7c(0x1ed);if(_0x10ab36)_0x10ab36['style'][_0x252e7c(0x1c8)]=_0x252e7c(0x1ed);}_0x1dafa0&&_0x1dafa0['addEventListener']('click',()=>{const _0x540342=_0x3adc7e;console[_0x540342(0x1a8)]('D1\x20toggle\x20clicked'),_0x32fc5e();_0x49a4fe&&(_0x49a4fe[_0x540342(0x1a2)]['add']('active'),_0x49a4fe['style'][_0x540342(0x1c8)]='block');document['getElementById'](_0x540342(0x1c4))[_0x540342(0x1aa)]['display']='block',document[_0x540342(0x1ad)]('elo-recommendation-text-d2')['style']['display']='none',document[_0x540342(0x1ad)]('elo-recommendation-text-d3')[_0x540342(0x1aa)]['display']='none';if(_0x1dafa0)_0x1dafa0['classList']['add'](_0x540342(0x1ff));if(_0x562e82)_0x562e82['classList']['remove']('active');if(_0x5d1657)_0x5d1657['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x562e82&&_0x562e82[_0x3adc7e(0x1a9)]('click',()=>{const _0x15c00e=_0x3adc7e;console[_0x15c00e(0x1a8)]('D2\x20toggle\x20clicked'),_0x32fc5e();_0x30d41b&&(_0x30d41b['classList']['add']('active'),_0x30d41b['style']['display']='block');document[_0x15c00e(0x1ad)]('elo-recommendation-text-d1')[_0x15c00e(0x1aa)][_0x15c00e(0x1c8)]='none',document['getElementById']('elo-recommendation-text-d2')['style'][_0x15c00e(0x1c8)]='block',document[_0x15c00e(0x1ad)]('elo-recommendation-text-d3')['style'][_0x15c00e(0x1c8)]='none';if(_0x562e82)_0x562e82['classList']['add']('active');if(_0x1dafa0)_0x1dafa0[_0x15c00e(0x1a2)]['remove']('active');if(_0x5d1657)_0x5d1657['classList']['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0x5d1657&&_0x5d1657['addEventListener'](_0x3adc7e(0x200),()=>{const _0x1c294f=_0x3adc7e;console['log'](_0x1c294f(0x1a6)),_0x32fc5e();_0x10ab36&&(_0x10ab36['classList']['add']('active'),_0x10ab36[_0x1c294f(0x1aa)][_0x1c294f(0x1c8)]=_0x1c294f(0x1e4));document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')[_0x1c294f(0x1aa)][_0x1c294f(0x1c8)]=_0x1c294f(0x1ed),document['getElementById'](_0x1c294f(0x1ca))['style'][_0x1c294f(0x1c8)]='block';if(_0x5d1657)_0x5d1657['classList']['add']('active');if(_0x1dafa0)_0x1dafa0['classList']['remove']('active');if(_0x562e82)_0x562e82[_0x1c294f(0x1a2)]['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x5e3815&&_0x5e3815[_0x3adc7e(0x1a9)]('click',()=>{const _0x56f01a=_0x3adc7e;_0x32fc5e();if(_0x17603a)_0x17603a['style']['display']='block';displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']='block'),document['getElementById']('elo-recommendation-text-d1')[_0x56f01a(0x1aa)]['display']='none',document['getElementById']('elo-recommendation-text-d2')[_0x56f01a(0x1aa)]['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';});}document['addEventListener'](a25_0xa543a1(0x1d1),()=>{const _0x1425be=a25_0xa543a1;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById'](_0x1425be(0x1c4))['style'][_0x1425be(0x1c8)]='block';});export{displayLadder};async function findBestOpponent(_0x1c8da8='d1'){const _0x25b032=a25_0xa543a1,_0xe7c5db='elo-recommendation-text-'+_0x1c8da8,_0x53d04b=document[_0x25b032(0x1ad)](_0xe7c5db);if(!_0x53d04b){console['error']('Recommendation\x20element\x20for\x20'+_0x1c8da8+'\x20not\x20found');return;}const _0x20c06b=auth[_0x25b032(0x1dc)];if(!_0x20c06b){_0x53d04b[_0x25b032(0x1a7)]='';return;}try{const _0x309419=doc(db,'userProfiles',_0x20c06b['uid']),_0x4258f0=await getDoc(_0x309419);if(!_0x4258f0['exists']()){console['log']('No\x20user\x20profile\x20found'),_0x53d04b[_0x25b032(0x1a7)]='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x1d8ce5=_0x4258f0['data'](),_0x273722=_0x1d8ce5['username'];if(!_0x273722){_0x53d04b['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x7fec82;switch(_0x1c8da8){case'd1':_0x7fec82='players';break;case'd2':_0x7fec82='playersD2';break;case'd3':_0x7fec82='playersD3';break;case'duos':_0x7fec82=_0x25b032(0x1c5);break;default:_0x7fec82='players';}if(_0x1c8da8==='duos'){const _0x550189=collection(db,_0x7fec82),_0x2ae498=query(_0x550189,where('username','==',_0x273722)),_0x11161f=await getDocs(_0x2ae498);if(_0x11161f['empty']){_0x53d04b['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x41869d=_0x11161f['docs'][0x0][_0x25b032(0x1c1)](),_0x4d490a=parseInt(_0x41869d['eloRating'])||0x4b0;if(_0x41869d[_0x25b032(0x1e3)]&&_0x41869d[_0x25b032(0x1de)]){_0x53d04b[_0x25b032(0x1f7)]='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x41869d['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x265fbe=await getDocs(_0x550189);let _0x23ae6a=null,_0x5c7e76=-0x1;_0x265fbe['forEach'](_0x4ef19a=>{const _0x4df7ce=_0x25b032,_0x2a10ef=_0x4ef19a['data']();if(_0x2a10ef[_0x4df7ce(0x1d2)]===_0x273722)return;if(_0x2a10ef[_0x4df7ce(0x1e3)])return;const _0x5042ec=parseInt(_0x2a10ef['eloRating'])||0x4b0,_0x2c43ea=Math['abs'](_0x5042ec-_0x4d490a),_0x250f05=Math['max'](0x0,0xc8-_0x2c43ea);_0x250f05>_0x5c7e76&&(_0x23ae6a=_0x2a10ef,_0x5c7e76=_0x250f05);});if(_0x23ae6a){const _0x252677=parseInt(_0x23ae6a[_0x25b032(0x1cc)])||0x4b0;let _0x3b5035=_0x25b032(0x19a);if(_0x252677>=0x7d0)_0x3b5035='#50C878';else{if(_0x252677>=0x708)_0x3b5035='#FFD700';else{if(_0x252677>=0x640)_0x3b5035='#C0C0C0';else _0x252677>=0x578&&(_0x3b5035='#CD7F32');}}_0x53d04b['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x3b5035+';\x22>'+_0x23ae6a['username']+'</span>\x20(ELO:\x20'+_0x252677+')';}else _0x53d04b[_0x25b032(0x1a7)]=_0x25b032(0x207);return;}const _0x51857c=collection(db,_0x7fec82),_0x3cac25=query(_0x51857c,where('username','==',_0x273722)),_0x2f0f4c=await getDocs(_0x3cac25);if(_0x2f0f4c[_0x25b032(0x1a3)]){_0x53d04b['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x1c8da8[_0x25b032(0x1d4)]()+'\x20ladder';return;}const _0x30f0c2=_0x2f0f4c['docs'][0x0]['data'](),_0x4f673e=parseInt(_0x30f0c2[_0x25b032(0x1cc)])||0x5dc,_0x5cb73f=await getDocs(_0x51857c);let _0x292ec7=null,_0x403477=-0x1;const _0xf752eb=getPlayerRankName(_0x4f673e);_0x5cb73f['forEach'](_0x1cfbca=>{const _0x472d47=_0x25b032,_0x1590bd=_0x1cfbca['data']();if(_0x1590bd['username']===_0x273722)return;const _0x3021ee=parseInt(_0x1590bd['eloRating'])||0x5dc,_0x550c7d=getPlayerRankName(_0x3021ee),_0x1b6412=Math[_0x472d47(0x1b8)](_0x3021ee-_0x4f673e),_0x1c786a=0x20,_0x15cee1=0x1/(0x1+Math['pow'](0xa,(_0x3021ee-_0x4f673e)/0x190)),_0x312427=Math['round'](_0x1c786a*(0x1-_0x15cee1));if(_0x312427<=0x0)return;let _0x3e2a60=0x0;const _0x34b419=Math['max'](0x0,0x64-_0x1b6412*0.5),_0x110bae=_0x312427>=0x3&&_0x312427<=0x8?0x32:_0x312427>0x0&&_0x312427<0xf?0x1e:0xa,_0x4b31e8=_0xf752eb===_0x550c7d?0x28:0x0;_0x3e2a60=_0x34b419+_0x110bae+_0x4b31e8,_0x3e2a60>_0x403477&&(_0x292ec7=_0x1590bd,_0x403477=_0x3e2a60);});if(_0x292ec7){const _0x429bdb=parseInt(_0x292ec7['eloRating'])||0x5dc;let _0x435ad1=_0x25b032(0x19a);if(_0x429bdb>=0x7d0)_0x435ad1='#50C878';else{if(_0x429bdb>=0x708)_0x435ad1='#FFD700';else{if(_0x429bdb>=0x640)_0x435ad1='#b9f1fc';else _0x429bdb>=0x578&&(_0x435ad1='#CD7F32');}}_0x53d04b['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x4f673e+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x435ad1+_0x25b032(0x1e2)+_0x292ec7[_0x25b032(0x1d2)]+'</span>';}else _0x53d04b['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x4f673e+')';}catch(_0x463b3e){console['error'](_0x25b032(0x1af),_0x463b3e),_0x53d04b['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x320b01=>{const _0x4590d7=a25_0xa543a1,_0x28e8b9=document[_0x4590d7(0x1ad)]('d1-ladder-container')&&document[_0x4590d7(0x1ad)]('d1-ladder-container')[_0x4590d7(0x1aa)]['display']!=='none',_0x480284=document['getElementById'](_0x4590d7(0x1e7))&&document[_0x4590d7(0x1ad)](_0x4590d7(0x1e7))[_0x4590d7(0x1aa)]['display']!==_0x4590d7(0x1ed),_0x153b0f=document['getElementById']('d3-ladder-container')&&document[_0x4590d7(0x1ad)]('d3-ladder-container')['style']['display']!==_0x4590d7(0x1ed),_0x33a58b=document['getElementById']('duos-ladder-container')&&document[_0x4590d7(0x1ad)]('duos-ladder-container')['style']['display']!==_0x4590d7(0x1ed),_0x2cd3da=_0x28e8b9?'d1':_0x480284?'d2':_0x153b0f?'d3':_0x33a58b?'duos':'d1';findBestOpponent(_0x2cd3da);}),document['addEventListener'](a25_0xa543a1(0x1d1),()=>{const _0x276b53=a25_0xa543a1,_0x256b80=document[_0x276b53(0x1ad)]('duos-switch'),_0x813908=document['querySelector']('label[for=\x22duos-switch\x22]');_0x256b80&&_0x813908&&(_0x256b80[_0x276b53(0x1a9)]('change',async _0x121fd5=>{const _0x50caa4=_0x276b53;if(_0x121fd5['target']['checked']){const _0x5b5fd4=auth?.['currentUser'],_0x904511=await checkIfUserIsAdmin(_0x5b5fd4);if(!_0x904511){_0x121fd5['preventDefault']();const _0x493507=document['getElementById'](_0x50caa4(0x1ab));return _0x493507&&(_0x493507[_0x50caa4(0x1b5)]=!![],_0x493507[_0x50caa4(0x1eb)](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth[_0x276b53(0x1ce)](async _0x417221=>{const _0x55a9a3=_0x276b53,_0x27688e=await checkIfUserIsAdmin(_0x417221);!_0x27688e?(_0x256b80[_0x55a9a3(0x1b6)]=!![],_0x813908[_0x55a9a3(0x1aa)]['opacity']='0.5',_0x813908['style']['cursor']='not-allowed',_0x813908['title']='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x256b80['disabled']=![],_0x813908['style']['opacity']='1',_0x813908['style']['cursor']=_0x55a9a3(0x1c3),_0x813908[_0x55a9a3(0x1b4)]='');}));});async function checkIfUserIsAdmin(_0x5aa13f){const _0x5918ab=a25_0xa543a1;if(!_0x5aa13f)return![];try{const _0x2a95e7=['admin@ladder.com',_0x5918ab(0x1b0)];if(_0x5aa13f['email']&&_0x2a95e7[_0x5918ab(0x1c2)](_0x5aa13f['email']['toLowerCase']()))return!![];const _0x236d48=['userProfiles','players','playersD2','playersD3'],_0x4f8e74=['admin','owner','council','creative\x20lead'];for(const _0x1cb3ee of _0x236d48){try{const _0x425837=doc(db,_0x1cb3ee,_0x5aa13f['uid']),_0x23c0dc=await getDoc(_0x425837);if(_0x23c0dc['exists']()){const _0x1a05df=_0x23c0dc[_0x5918ab(0x1c1)](),_0x731e9=(_0x1a05df['roleName']||_0x1a05df['role']||'')['toLowerCase']();if(_0x731e9&&_0x4f8e74['includes'](_0x731e9))return!![];}}catch(_0x109410){console['warn'](_0x5918ab(0x1ee)+_0x1cb3ee+':',_0x109410);}}return![];}catch(_0x4780f3){return console[_0x5918ab(0x1e5)](_0x5918ab(0x1ac),_0x4780f3),![];}}function showAdminOnlyMessage(){const _0x6b40ad=a25_0xa543a1,_0x4d399c=document['getElementById'](_0x6b40ad(0x1f6));_0x4d399c&&_0x4d399c['remove']();const _0x14b913=document['createElement'](_0x6b40ad(0x1bd));_0x14b913['id']='admin-only-message',_0x14b913['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x14b913['innerHTML']=_0x6b40ad(0x1fa),document[_0x6b40ad(0x1a0)][_0x6b40ad(0x1e0)](_0x14b913),setTimeout(()=>{const _0x69c980=_0x6b40ad;_0x14b913['parentNode']&&_0x14b913[_0x69c980(0x202)]();},0xbb8);}