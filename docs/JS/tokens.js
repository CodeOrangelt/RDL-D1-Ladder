(function(_0x3c515a,_0x354f06){const _0x288504=a0_0x121b,_0x53ed3e=_0x3c515a();while(!![]){try{const _0xf0037a=-parseInt(_0x288504(0x154))/0x1+parseInt(_0x288504(0x14d))/0x2*(parseInt(_0x288504(0x153))/0x3)+parseInt(_0x288504(0x168))/0x4+parseInt(_0x288504(0x15c))/0x5*(-parseInt(_0x288504(0x16d))/0x6)+parseInt(_0x288504(0x169))/0x7*(-parseInt(_0x288504(0x15a))/0x8)+-parseInt(_0x288504(0x151))/0x9+-parseInt(_0x288504(0x158))/0xa*(-parseInt(_0x288504(0x165))/0xb);if(_0xf0037a===_0x354f06)break;else _0x53ed3e['push'](_0x53ed3e['shift']());}catch(_0x57b558){_0x53ed3e['push'](_0x53ed3e['shift']());}}}(a0_0x296e,0x801cb));const a0_0x6f890=(function(){let _0x5710b6=!![];return function(_0x2a18b9,_0x5ad55d){const _0x429677=_0x5710b6?function(){const _0x1bece6=a0_0x121b;if(_0x5ad55d){const _0x227c9d=_0x5ad55d[_0x1bece6(0x167)](_0x2a18b9,arguments);return _0x5ad55d=null,_0x227c9d;}}:function(){};return _0x5710b6=![],_0x429677;};}()),a0_0x441a3e=a0_0x6f890(this,function(){const _0x56108c=a0_0x121b;let _0x1da586;try{const _0x17fb26=Function('return\x20(function()\x20'+_0x56108c(0x164)+');');_0x1da586=_0x17fb26();}catch(_0x4cfad9){_0x1da586=window;}const _0x34cd2c=_0x1da586[_0x56108c(0x162)]=_0x1da586['console']||{},_0xb0982e=['log','warn','info','error','exception','table',_0x56108c(0x15f)];for(let _0x2879d1=0x0;_0x2879d1<_0xb0982e[_0x56108c(0x160)];_0x2879d1++){const _0x105e26=a0_0x6f890['constructor']['prototype']['bind'](a0_0x6f890),_0x90271c=_0xb0982e[_0x2879d1],_0x54ddc1=_0x34cd2c[_0x90271c]||_0x105e26;_0x105e26['__proto__']=a0_0x6f890['bind'](a0_0x6f890),_0x105e26['toString']=_0x54ddc1['toString'][_0x56108c(0x16c)](_0x54ddc1),_0x34cd2c[_0x90271c]=_0x105e26;}});a0_0x441a3e();import{doc,getDoc,getDocs,collection}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const tokenCache=new Map(),CACHE_DURATION=0x5*0x3c*0x3e8;function a0_0x296e(){const _0x2a9e2d=['string','console','sort','{}.constructor(\x22return\x20this\x22)(\x20)','15131567DMjQzE','userTokens','apply','1130392SqdSAS','4681551XLzxQs','Error\x20fetching\x20user\x20tokens:','tokens_','bind','1513056xrBhdW','tokens','699306cPIMPW','purchasedAt','now','set','853389OkvAkz','userProfiles','3XHTYuN','215135fYgpfI','getTime','username','equipped','10ZWRgjt','ðŸ—‘ï¸\x20Cleared\x20all\x20token\x20cache','8nYGRhm','get','10IoNWnB','error','seconds','trace','length'];a0_0x296e=function(){return _0x2a9e2d;};return a0_0x296e();}export async function getUserTokens(_0x4d20dd){const _0x1f8055=a0_0x121b,_0x11da43=_0x1f8055(0x16b)+_0x4d20dd,_0x27b9f5=tokenCache['get'](_0x11da43);if(_0x27b9f5&&Date['now']()-_0x27b9f5['timestamp']<CACHE_DURATION)return _0x27b9f5[_0x1f8055(0x16e)];try{const _0x251b7d=doc(db,_0x1f8055(0x166),_0x4d20dd),_0x1946a4=await getDoc(_0x251b7d);let _0x274392=[];return _0x1946a4['exists']()&&(_0x274392=_0x1946a4['data']()[_0x1f8055(0x16e)]||[]),tokenCache['set'](_0x11da43,{'tokens':_0x274392,'timestamp':Date['now']()}),_0x274392;}catch(_0x4e76cb){return console['error'](_0x1f8055(0x16a),_0x4e76cb),[];}}export async function getBulkUserTokens(_0x3dd3b2){const _0x2e0789=a0_0x121b,_0x39fea0=new Map(),_0x3da579=[];_0x3dd3b2['forEach'](_0x4c75bb=>{const _0x3b4ac4=a0_0x121b,_0x29154c='tokens_'+_0x4c75bb,_0x31a229=tokenCache['get'](_0x29154c);_0x31a229&&Date[_0x3b4ac4(0x14f)]()-_0x31a229['timestamp']<CACHE_DURATION?_0x39fea0[_0x3b4ac4(0x150)](_0x4c75bb,_0x31a229[_0x3b4ac4(0x16e)]):_0x3da579['push'](_0x4c75bb);});if(_0x3da579['length']>0x0)try{const _0x13496a=_0x3da579['map'](async _0x30e39c=>{const _0xf9598f=a0_0x121b,_0x22045d=doc(db,_0xf9598f(0x166),_0x30e39c),_0x2bad2f=await getDoc(_0x22045d);let _0x547172=[];_0x2bad2f['exists']()&&(_0x547172=_0x2bad2f['data']()['tokens']||[]);const _0x58acb3='tokens_'+_0x30e39c;return tokenCache[_0xf9598f(0x150)](_0x58acb3,{'tokens':_0x547172,'timestamp':Date['now']()}),[_0x30e39c,_0x547172];}),_0x5c274e=await Promise['all'](_0x13496a);_0x5c274e['forEach'](([_0x2dc972,_0x2987ce])=>{const _0xbdedf8=a0_0x121b;_0x39fea0[_0xbdedf8(0x150)](_0x2dc972,_0x2987ce);});}catch(_0x54e820){console[_0x2e0789(0x15d)]('Error\x20fetching\x20bulk\x20user\x20tokens:',_0x54e820);}return _0x39fea0;}export async function getTokensByUsernames(_0x5359c1){const _0x590163=a0_0x121b,_0xbe4753=new Map();try{const _0x3da254=collection(db,_0x590163(0x152)),_0x1a7403=await getDocs(_0x3da254),_0x387532=new Map();_0x1a7403['forEach'](_0x5eba6a=>{const _0x2fb71e=_0x590163,_0x5aecce=_0x5eba6a['data']();_0x5aecce['username']&&_0x5359c1['includes'](_0x5aecce['username'])&&_0x387532['set'](_0x5aecce[_0x2fb71e(0x156)],_0x5eba6a['id']);});const _0x281390=Array['from'](_0x387532['values']());if(_0x281390['length']>0x0){const _0x5e9b5d=await getBulkUserTokens(_0x281390);_0x387532['forEach']((_0x166924,_0x52e1ec)=>{const _0x593afb=_0x590163,_0x36f9fc=_0x5e9b5d[_0x593afb(0x15b)](_0x166924)||[];_0xbe4753['set'](_0x52e1ec,_0x36f9fc);});}}catch(_0xe5e756){console['error']('Error\x20fetching\x20tokens\x20by\x20usernames:',_0xe5e756);}return _0xbe4753;}function a0_0x121b(_0x5eecb5,_0x30e7b5){const _0x3dbf57=a0_0x296e();return a0_0x121b=function(_0x441a3e,_0x6f890){_0x441a3e=_0x441a3e-0x14d;let _0x18e902=_0x3dbf57[_0x441a3e];return _0x18e902;},a0_0x121b(_0x5eecb5,_0x30e7b5);}export function clearTokenCache(_0x224266=null){const _0x2935c9=a0_0x121b;if(_0x224266){const _0x406c09='tokens_'+_0x224266;tokenCache['delete'](_0x406c09),console['log']('ðŸ—‘ï¸\x20Cleared\x20token\x20cache\x20for\x20user:\x20'+_0x224266);}else tokenCache['clear'](),console['log'](_0x2935c9(0x159));}export async function forceRefreshUserTokens(_0x16f4b5){return clearTokenCache(_0x16f4b5),await getUserTokens(_0x16f4b5);}export function getPrimaryDisplayToken(_0x561f07){const _0x20cd46=a0_0x121b;if(!_0x561f07||_0x561f07[_0x20cd46(0x160)]===0x0)return null;const _0x542a19=_0x561f07['find'](_0x32c373=>_0x32c373[_0x20cd46(0x157)]===!![]);if(_0x542a19)return _0x542a19;const _0x15c205=[..._0x561f07][_0x20cd46(0x163)]((_0x43b876,_0x51325e)=>{const _0x504957=_0x20cd46;let _0x4e544d,_0x4aa9f3;if(_0x43b876[_0x504957(0x14e)]){if(_0x43b876['purchasedAt'][_0x504957(0x15e)])_0x4e544d=_0x43b876['purchasedAt']['seconds'];else{if(_0x43b876[_0x504957(0x14e)]instanceof Date)_0x4e544d=_0x43b876['purchasedAt']['getTime']()/0x3e8;else typeof _0x43b876['purchasedAt']==='string'?_0x4e544d=new Date(_0x43b876['purchasedAt'])['getTime']()/0x3e8:_0x4e544d=0x0;}}else _0x4e544d=0x0;if(_0x51325e['purchasedAt']){if(_0x51325e['purchasedAt'][_0x504957(0x15e)])_0x4aa9f3=_0x51325e['purchasedAt']['seconds'];else{if(_0x51325e['purchasedAt']instanceof Date)_0x4aa9f3=_0x51325e['purchasedAt'][_0x504957(0x155)]()/0x3e8;else typeof _0x51325e[_0x504957(0x14e)]===_0x504957(0x161)?_0x4aa9f3=new Date(_0x51325e['purchasedAt'])['getTime']()/0x3e8:_0x4aa9f3=0x0;}}else _0x4aa9f3=0x0;return _0x4aa9f3-_0x4e544d;});return _0x15c205[0x0];}