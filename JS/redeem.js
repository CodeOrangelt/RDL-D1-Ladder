const a47_0x37b460=a47_0x23b3,a47_0x552336=(function(){let _0x585828=!![];return function(_0xd0079f,_0x4945da){const _0x1671c8=_0x585828?function(){if(_0x4945da){const _0x2697a4=_0x4945da['apply'](_0xd0079f,arguments);return _0x4945da=null,_0x2697a4;}}:function(){};return _0x585828=![],_0x1671c8;};}()),a47_0x19b872=a47_0x552336(this,function(){const _0x2e2a4f=a47_0x23b3;let _0x52c588;try{const _0x56eafb=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x52c588=_0x56eafb();}catch(_0x5cd595){_0x52c588=window;}const _0x43dbbe=_0x52c588[_0x2e2a4f(0xab)]=_0x52c588['console']||{},_0x3f372c=['log',_0x2e2a4f(0xdc),'info',_0x2e2a4f(0xa9),'exception','table',_0x2e2a4f(0xde)];for(let _0x59d98a=0x0;_0x59d98a<_0x3f372c[_0x2e2a4f(0xc7)];_0x59d98a++){const _0x384e64=a47_0x552336['constructor'][_0x2e2a4f(0xdf)][_0x2e2a4f(0xd8)](a47_0x552336),_0x4063ad=_0x3f372c[_0x59d98a],_0x5423dd=_0x43dbbe[_0x4063ad]||_0x384e64;_0x384e64['__proto__']=a47_0x552336['bind'](a47_0x552336),_0x384e64['toString']=_0x5423dd['toString']['bind'](_0x5423dd),_0x43dbbe[_0x4063ad]=_0x384e64;}});function a47_0xa46c(){const _0x5773c6=['üè™\x20Redeem\x20store\x20initializing...','div','disabled','isUserAdmin','name','log','textContent','dispatchEvent','price','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','This\x20theme\x20makes\x20me\x20happy','0.5','You\x20must\x20purchase\x20this\x20theme\x20first','isAdmin','parentNode','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>','ThemeSystem','error','store-item','console','theme','Buy\x20for\x20','success','cursor','toLocaleString','Can\x27t\x20get\x20enough','\x20more\x20points.','info','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','email','points','can-afford','.theme-select-btn','currentUser','add','innerHTML','0.7','body','displayName','auth-warning','not-allowed','remove','adminStatusChanged','store-message','Only\x20the\x20best\x20get\x20this\x20one','sign-in-free','You\x20can\x20see\x20better!','length','[data-theme]','Need\x20','\x20Points','Not\x20enough\x20points.\x20You\x20need\x20','theme_','Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer','block','Please\x20sign\x20in\x20to\x20select\x20themes','Red','click','Error\x20loading\x20user\x20data:','style','userProfiles','\x20theme\x20for\x20','description','\x20theme','bind','inventory','querySelectorAll','Apply\x20Theme','warn','getElementById','trace','prototype','Theme\x20','visible','createElement','\x20Theme','dataset','display','classList'];a47_0xa46c=function(){return _0x5773c6;};return a47_0xa46c();}a47_0x19b872();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':a47_0x37b460(0xcd)},'purple':{'price':0x96,'name':'Purple','description':a47_0x37b460(0xb1)},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':a47_0x37b460(0xa2)},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':'Gold','description':a47_0x37b460(0xc4)},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':a47_0x37b460(0xc6)},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'volcanic':{'price':0x1f4,'name':a47_0x37b460(0xd0),'description':'For\x20the\x20angry\x20type.'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x2ee7d4=a47_0x37b460;console['log'](_0x2ee7d4(0x98)),storeContainer=document['getElementById']('store-content'),pointsDisplay=document['getElementById']('user-points'),authWarning=document[_0x2ee7d4(0xdd)](_0x2ee7d4(0xbf)),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x3fd3e7=>{const _0x46195e=a47_0x23b3;if(_0x3fd3e7){console['log']('‚úÖ\x20User\x20authenticated:',_0x3fd3e7[_0x46195e(0xbe)]||_0x3fd3e7['email']);if(authWarning)authWarning[_0x46195e(0xd3)]['display']='none';if(storeContainer)storeContainer['style']['display']=_0x46195e(0xce);await loadUserData(_0x3fd3e7),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style'][_0x46195e(0xe5)]='block';if(storeContainer)storeContainer[_0x46195e(0xd3)][_0x46195e(0xe5)]='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x46195e(0x9b)]=![];}});}function a47_0x23b3(_0x2310eb,_0x56b96d){const _0x19b872=a47_0xa46c();return a47_0x23b3=function(_0x552336,_0x7633ad){_0x552336=_0x552336-0x98;let _0xa46c66=_0x19b872[_0x552336];return _0xa46c66;},a47_0x23b3(_0x2310eb,_0x56b96d);}async function loadUserData(_0x486889){const _0x2f42f2=a47_0x37b460;try{const _0x1a55f9=doc(db,_0x2f42f2(0xd4),_0x486889['uid']),_0x4548c8=await getDoc(_0x1a55f9);if(_0x4548c8['exists']()){const _0x45773b=_0x4548c8['data']();userData={'points':_0x45773b['points']||0x0,'inventory':_0x45773b['inventory']||[],'isAdmin':_0x45773b[_0x2f42f2(0xa5)]||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x2f42f2(0xb0)]()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window[_0x2f42f2(0x9f)](new CustomEvent(_0x2f42f2(0xc2),{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+',\x20Inventory:\x20'+userData[_0x2f42f2(0xd9)][_0x2f42f2(0xc7)]+'\x20items');}else await setDoc(_0x1a55f9,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x486889[_0x2f42f2(0xbe)]||_0x486889['email']?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window[_0x2f42f2(0x9b)]=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x563676){console[_0x2f42f2(0xa9)](_0x2f42f2(0xd2),_0x563676);}}function userOwnsTheme(_0x40ba9d){const _0xcc1ccf=a47_0x37b460;if(THEMES[_0x40ba9d]?.[_0xcc1ccf(0xa0)]===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x40ba9d);}async function purchaseTheme(_0x8df000){const _0x496db9=a47_0x37b460,_0x578060=auth[_0x496db9(0xb9)];if(!_0x578060)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x4b0400=THEMES[_0x8df000];if(!_0x4b0400)return console['error'](_0x496db9(0xe0)+_0x8df000+'\x20not\x20found'),![];if(userData[_0x496db9(0xb6)]<_0x4b0400[_0x496db9(0xa0)])return showMessage(_0x496db9(0xcb)+(_0x4b0400[_0x496db9(0xa0)]-userData['points'])+_0x496db9(0xb2),'error'),![];if(userOwnsTheme(_0x8df000))return showMessage('You\x20already\x20own\x20the\x20'+_0x4b0400[_0x496db9(0x9c)]+_0x496db9(0xd7),'info'),![];try{const _0x4bfd73=doc(db,_0x496db9(0xd4),_0x578060['uid']),_0x60ccfd=await getDoc(_0x4bfd73);if(!_0x60ccfd['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x1b7eab=_0x60ccfd['data'](),_0x176c8f=_0x1b7eab['points']||0x0,_0xcad8a1=_0x1b7eab['inventory']||[];if(_0x176c8f<_0x4b0400['price'])return showMessage('Insufficient\x20points','error'),![];if(_0xcad8a1['includes']('theme_'+_0x8df000))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0x4f4934=_0x176c8f-_0x4b0400['price'],_0x20042f=[..._0xcad8a1,_0x496db9(0xcc)+_0x8df000];return await updateDoc(_0x4bfd73,{'points':_0x4f4934,'inventory':_0x20042f,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,'transactions'),{'userId':_0x578060['uid'],'userEmail':_0x578060[_0x496db9(0xb5)],'itemId':_0x496db9(0xcc)+_0x8df000,'itemTitle':_0x4b0400['name']+_0x496db9(0xe3),'price':_0x4b0400[_0x496db9(0xa0)],'type':'purchase','category':_0x496db9(0xac),'timestamp':serverTimestamp()}),userData['points']=_0x4f4934,userData['inventory']=_0x20042f,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),console['log']('‚úÖ\x20Purchased\x20'+_0x4b0400['name']+'\x20theme\x20for\x20'+_0x4b0400[_0x496db9(0xa0)]+'\x20points'),!![];}catch(_0xe70c3b){return console[_0x496db9(0xa9)]('Purchase\x20failed:',_0xe70c3b),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x496db9(0xa9)),![];}}function applyTheme(_0x5aad85){const _0x16cb84=a47_0x37b460;if(!userOwnsTheme(_0x5aad85))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window['ThemeSystem']?(window[_0x16cb84(0xa8)]['switchTheme'](_0x5aad85),showMessage((THEMES[_0x5aad85]?.['name']||_0x5aad85)+'\x20theme\x20applied!',_0x16cb84(0xae)),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0x266b82=a47_0x37b460,_0x45bf39=document['querySelector']('.themes-grid');if(!_0x45bf39){console['error']('Themes\x20container\x20not\x20found');return;}_0x45bf39[_0x266b82(0xbb)]='',Object['entries'](THEMES)['forEach'](([_0x29b159,_0xfffe85])=>{const _0x827101=_0x266b82,_0x20f97f=document[_0x827101(0xe2)]('div');_0x20f97f['className']=_0x827101(0xaa),_0x20f97f[_0x827101(0xe4)]['theme']=_0x29b159,_0x20f97f[_0x827101(0xe4)]['itemId']=_0x827101(0xcc)+_0x29b159,_0x20f97f['dataset'][_0x827101(0xa0)]=_0xfffe85['price'],_0x20f97f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x29b159+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0xfffe85['price']===0x0?'FREE':_0xfffe85['price']+_0x827101(0xca))+_0x827101(0xa7)+_0xfffe85[_0x827101(0x9c)]+_0x827101(0xb4)+_0xfffe85[_0x827101(0xd6)]+_0x827101(0xa1),_0x45bf39['appendChild'](_0x20f97f);}),setupThemeButtons();}function setupThemeButtons(){const _0x57b8a2=a47_0x37b460,_0x2b4d49=document['querySelectorAll'](_0x57b8a2(0xb8));_0x2b4d49['forEach'](_0x4a0830=>{const _0xfd0ae4=_0x57b8a2;_0x4a0830['addEventListener'](_0xfd0ae4(0xd1),async _0x5e2a96=>{const _0x39e301=_0xfd0ae4;_0x5e2a96['preventDefault']();const _0x51c712=auth['currentUser'];if(!_0x51c712){showMessage(_0x39e301(0xcf),'error');return;}const _0x4298d1=_0x4a0830['closest']('[data-theme]'),_0x59aeef=_0x4298d1[_0x39e301(0xe4)]['theme'],_0x4ada06=THEMES[_0x59aeef];if(!_0x4ada06){console['error']('Theme\x20'+_0x59aeef+'\x20not\x20found');return;}console[_0x39e301(0x9d)]('Theme\x20clicked:\x20'+_0x4ada06[_0x39e301(0x9c)]+'\x20('+_0x59aeef+')');if(_0x4a0830['disabled']){_0x4ada06['price']>0x0&&showMessage('You\x20need\x20'+_0x4ada06['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x4a0830[_0x39e301(0x9e)]==='Current\x20Theme'){showMessage(_0x4ada06[_0x39e301(0x9c)]+'\x20is\x20already\x20your\x20current\x20theme',_0x39e301(0xb3));return;}if(_0x4a0830['textContent']===_0x39e301(0xdb)){applyTheme(_0x59aeef),updateThemeButtons();return;}if(_0x4a0830['textContent']['includes']('Buy')){const _0x2070ee=window['confirm']('Purchase\x20'+_0x4ada06['name']+_0x39e301(0xd5)+_0x4ada06['price']+'\x20points?');if(!_0x2070ee)return;const _0x211ece=await purchaseTheme(_0x59aeef);_0x211ece&&(showMessage(_0x4ada06['name']+'\x20theme\x20purchased!',_0x39e301(0xae)),applyTheme(_0x59aeef),updateThemeButtons());return;}userOwnsTheme(_0x59aeef)?applyTheme(_0x59aeef):showMessage(_0x39e301(0xa4),'error');});}),updateThemeButtons();}function updateThemeButtons(){const _0xb5080=a47_0x37b460,_0x50a655=window[_0xb5080(0xa8)]?window['ThemeSystem']['getCurrentTheme']():'default',_0x35c27d=auth['currentUser'];document[_0xb5080(0xda)](_0xb5080(0xb8))['forEach'](_0x5f53b5=>{const _0x320f92=_0xb5080,_0x38e3ad=_0x5f53b5['closest'](_0x320f92(0xc8)),_0x5da5ae=_0x38e3ad[_0x320f92(0xe4)]['theme'],_0x1dd123=THEMES[_0x5da5ae];if(!_0x1dd123)return;_0x5f53b5[_0x320f92(0x9a)]=![],_0x5f53b5['style']['opacity']='',_0x5f53b5[_0x320f92(0xd3)][_0x320f92(0xaf)]='pointer',_0x5f53b5['classList']['remove']('current-theme','apply-theme','can-afford','cannot-afford',_0x320f92(0xc5),'sign-in-paid');if(!_0x35c27d){_0x1dd123['price']===0x0?(_0x5f53b5['textContent']='Sign\x20in\x20to\x20Apply',_0x5f53b5[_0x320f92(0xe6)]['add']('sign-in-free')):(_0x5f53b5[_0x320f92(0x9e)]='Sign\x20in\x20to\x20Purchase',_0x5f53b5['disabled']=!![],_0x5f53b5[_0x320f92(0xd3)]['opacity']=_0x320f92(0xbc),_0x5f53b5['classList']['add']('sign-in-paid'));return;}if(_0x5da5ae===_0x50a655){_0x5f53b5['textContent']='Current\x20Theme',_0x5f53b5['classList']['add']('current-theme'),_0x5f53b5[_0x320f92(0x9a)]=!![],_0x5f53b5[_0x320f92(0xd3)]['cursor']='default';return;}if(userOwnsTheme(_0x5da5ae)){_0x5f53b5['textContent']=_0x320f92(0xdb),_0x5f53b5['classList'][_0x320f92(0xba)]('apply-theme');return;}if(userData['points']>=_0x1dd123['price']){_0x5f53b5[_0x320f92(0x9e)]=_0x320f92(0xad)+_0x1dd123['price']+'\x20Points',_0x5f53b5['classList']['add'](_0x320f92(0xb7));return;}_0x5f53b5[_0x320f92(0x9e)]=_0x320f92(0xc9)+_0x1dd123['price']+'\x20Points',_0x5f53b5['classList']['add']('cannot-afford'),_0x5f53b5['style']['opacity']=_0x320f92(0xa3),_0x5f53b5['disabled']=!![],_0x5f53b5['style']['cursor']=_0x320f92(0xc0);});}function showMessage(_0x21de15,_0x169c3d='info'){const _0x54e401=a47_0x37b460,_0x2d7202=document['getElementById']('store-message');_0x2d7202&&_0x2d7202[_0x54e401(0xc1)]();const _0x1c23e5=document['createElement'](_0x54e401(0x99));_0x1c23e5['id']=_0x54e401(0xc3),_0x1c23e5['className']='store-message\x20store-message-'+_0x169c3d,_0x1c23e5['textContent']=_0x21de15,document[_0x54e401(0xbd)]['appendChild'](_0x1c23e5),requestAnimationFrame(()=>{const _0x3fe46f=_0x54e401;_0x1c23e5[_0x3fe46f(0xe6)]['add'](_0x3fe46f(0xe1));}),setTimeout(()=>{const _0x1fbc4c=_0x54e401;_0x1c23e5[_0x1fbc4c(0xe6)]['remove'](_0x1fbc4c(0xe1)),setTimeout(()=>{const _0x4d945b=_0x1fbc4c;_0x1c23e5[_0x4d945b(0xa6)]&&_0x1c23e5['remove']();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log']('üè™\x20Redeem\x20store\x20loaded');