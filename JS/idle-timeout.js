const a20_0x47554e=a20_0x3492;import a20_0x28d384,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x400568=a20_0x3492;if(document[_0x400568(0x1ff)]('idle-overlay'))return;const _0x590f36=document[_0x400568(0x203)](_0x400568(0x1f7));_0x590f36['id']='idle-overlay',_0x590f36['style'][_0x400568(0x219)]=_0x400568(0x202);const _0x294952=document['createElement'](_0x400568(0x1f7));_0x294952['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x3e9b8c=document['createElement']('h2');_0x3e9b8c['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x3e9b8c[_0x400568(0x206)]['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x519b83=document['createElement']('p');_0x519b83['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x519b83[_0x400568(0x206)][_0x400568(0x219)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x2bbac6=document['createElement']('button');_0x2bbac6['id']='resume-session-btn',_0x2bbac6['textContent']=_0x400568(0x214),_0x2bbac6['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x2bbac6['onmouseover']=function(){const _0xec223c=_0x400568;this[_0xec223c(0x206)]['backgroundColor']='#3da05f';},_0x2bbac6['onmouseout']=function(){this['style']['backgroundColor']='#50C878';},_0x294952[_0x400568(0x208)](_0x3e9b8c),_0x294952['appendChild'](_0x519b83),_0x294952['appendChild'](_0x2bbac6),_0x590f36['appendChild'](_0x294952),document[_0x400568(0x21a)][_0x400568(0x208)](_0x590f36),_0x2bbac6['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x1dfac5=a20_0x3492;if(document['getElementById'](_0x1dfac5(0x201)))return;const _0x4a7f22=document[_0x1dfac5(0x203)](_0x1dfac5(0x1f7));_0x4a7f22['id']='network-error-overlay',_0x4a7f22[_0x1dfac5(0x206)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x189c20=document['createElement']('div');_0x189c20['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x435f65=document[_0x1dfac5(0x203)]('h2');_0x435f65[_0x1dfac5(0x1f9)]=_0x1dfac5(0x1ec),_0x435f65['style']['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x327709=document['createElement']('p');_0x327709['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x327709['style'][_0x1dfac5(0x219)]=_0x1dfac5(0x20b);const _0x5651d3=document['createElement']('button');_0x5651d3['id']='retry-connection-btn',_0x5651d3['textContent']='Retry\x20Connection',_0x5651d3['style']['cssText']=_0x1dfac5(0x1f3);const _0x200a55=document['createElement'](_0x1dfac5(0x1fe));_0x200a55['id']='reload-page-btn',_0x200a55[_0x1dfac5(0x1f9)]='Reload\x20Page',_0x200a55['style'][_0x1dfac5(0x219)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x349746=document['createElement'](_0x1dfac5(0x1f7));_0x349746['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x349746['appendChild'](_0x5651d3),_0x349746['appendChild'](_0x200a55),_0x189c20[_0x1dfac5(0x208)](_0x435f65),_0x189c20['appendChild'](_0x327709),_0x189c20['appendChild'](_0x349746),_0x4a7f22['appendChild'](_0x189c20),document['body'][_0x1dfac5(0x208)](_0x4a7f22),_0x5651d3['addEventListener']('click',retryConnection),_0x200a55[_0x1dfac5(0x216)](_0x1dfac5(0x1ed),()=>window[_0x1dfac5(0x213)]['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x4d3370=a20_0x3492;clearTimeout(idleTimer);const _0x48a03e=document[_0x4d3370(0x1ff)]('network-error-overlay');_0x48a03e&&(_0x48a03e['style']['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a20_0x28d384['suspendAllListeners']();}function retryConnection(){const _0x48e36c=a20_0x3492;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0xd66e17=document[_0x48e36c(0x1f4)](_0x48e36c(0x1ef));_0xd66e17&&(_0xd66e17['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0xbdd0d=document[_0x48e36c(0x1ff)]('retry-connection-btn');_0xbdd0d&&(_0xbdd0d[_0x48e36c(0x1f6)]=!![],_0xbdd0d['style']['opacity']='0.5',_0xbdd0d['style']['cursor']=_0x48e36c(0x215));return;}const _0xdc9d5b=document['getElementById']('network-error-overlay');_0xdc9d5b&&(_0xdc9d5b[_0x48e36c(0x206)][_0x48e36c(0x1fa)]='none');window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x9badde}=window;if(_0x9badde){const _0x36767b=_0x9badde[_0x48e36c(0x1ee)]('system');_0x9badde[_0x48e36c(0x1f0)](_0x36767b)['catch'](_0x4481f4=>{const _0x17c671=_0x48e36c;console[_0x17c671(0x205)]('Connection\x20test\x20failed:',_0x4481f4),handleNetworkError();});}}catch(_0x20de6e){console['error'](_0x48e36c(0x200),_0x20de6e),handleNetworkError();}a20_0x28d384['resumeAllListeners']();}function a20_0xa7fa(){const _0x512f81=['Connection\x20Error','click','collection','#network-error-overlay\x20p','getDocs','activeListeners','DOMContentLoaded','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20','querySelector','table','disabled','div','log','textContent','display','trace','toString','size','button','getElementById','Failed\x20to\x20test\x20connection:','network-error-overlay','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20','createElement','unavailable','error','style','{}.constructor(\x22return\x20this\x22)(\x20)','appendChild','Idle\x20timeout\x20initialized:','keys','color:\x20#fff;\x20margin-bottom:\x2030px;','code','RDL_SESSION_SUSPENDED','warn','forceIdleTimeout','Session\x20resumed','none','resource-exhausted','location','Return\x20to\x20Website','not-allowed','addEventListener','Pending\x20operations:','RDL_NETWORK_ERROR','cssText','body'];a20_0xa7fa=function(){return _0x512f81;};return a20_0xa7fa();}function suspendSession(){isSessionSuspended=!![];const _0x5be389=document['getElementById']('idle-overlay');_0x5be389&&(_0x5be389['style']['display']='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a20_0x28d384['suspendAllListeners']();}function a20_0x3492(_0x90d3c6,_0x1b0167){const _0x388a7d=a20_0xa7fa();return a20_0x3492=function(_0x43749f,_0x5ae389){_0x43749f=_0x43749f-0x1ec;let _0xa7fa0c=_0x388a7d[_0x43749f];return _0xa7fa0c;},a20_0x3492(_0x90d3c6,_0x1b0167);}function resumeSession(){const _0x2fad0c=a20_0x3492;isSessionSuspended=![],window[_0x2fad0c(0x20d)]=![];const _0x54faab=document[_0x2fad0c(0x1ff)]('idle-overlay');_0x54faab&&(_0x54faab['style']['display']=_0x2fad0c(0x211)),console['log'](_0x2fad0c(0x210)),resetIdleTimer(),a20_0x28d384['resumeAllListeners'](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location']['reload']());}function initIdleTimeout(){const _0xfe43ef=a20_0x3492,_0x4e26de=(function(){let _0x46e736=!![];return function(_0x378ee5,_0xc3ec58){const _0x34e344=_0x46e736?function(){if(_0xc3ec58){const _0x46cad9=_0xc3ec58['apply'](_0x378ee5,arguments);return _0xc3ec58=null,_0x46cad9;}}:function(){};return _0x46e736=![],_0x34e344;};}()),_0x192441=_0x4e26de(this,function(){const _0x2535b7=a20_0x3492,_0xe695be=function(){const _0x4367a8=a20_0x3492;let _0x5f2001;try{_0x5f2001=Function('return\x20(function()\x20'+_0x4367a8(0x207)+');')();}catch(_0x29dd2a){_0x5f2001=window;}return _0x5f2001;},_0x1f998d=_0xe695be(),_0x4ac7dd=_0x1f998d['console']=_0x1f998d['console']||{},_0x474762=['log',_0x2535b7(0x20e),'info','error','exception',_0x2535b7(0x1f5),_0x2535b7(0x1fb)];for(let _0x4f4a22=0x0;_0x4f4a22<_0x474762['length'];_0x4f4a22++){const _0x1e784e=_0x4e26de['constructor']['prototype']['bind'](_0x4e26de),_0x332d57=_0x474762[_0x4f4a22],_0x1dd014=_0x4ac7dd[_0x332d57]||_0x1e784e;_0x1e784e['__proto__']=_0x4e26de['bind'](_0x4e26de),_0x1e784e['toString']=_0x1dd014[_0x2535b7(0x1fc)]['bind'](_0x1dd014),_0x4ac7dd[_0x332d57]=_0x1e784e;}});_0x192441(),createIdleOverlay();const _0x1c4081=['mousedown','mousemove','keypress','scroll','touchstart','click'];_0x1c4081['forEach'](_0x20ccb7=>{document['addEventListener'](_0x20ccb7,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x119411){const _0x5f90bd=a20_0x3492;_0x119411['error']&&(_0x119411['error']['message']&&_0x119411['error']['message']['includes']('network')||_0x119411['error']['code']&&(_0x119411['error']['code']===_0x5f90bd(0x204)||_0x119411['error'][_0x5f90bd(0x20c)]===_0x5f90bd(0x212)||_0x119411['error'][_0x5f90bd(0x20c)]['includes']('network')))&&(handleNetworkError(),_0x119411['preventDefault']());}),resetIdleTimer(),console[_0xfe43ef(0x1f8)](_0xfe43ef(0x209),IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x2460bc=_0xfe43ef;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console[_0x2460bc(0x1f8)]('Network\x20error:',window['RDL_NETWORK_ERROR']),console['log']('Active\x20listeners:',a20_0x28d384[_0x2460bc(0x1f1)]['size']),console[_0x2460bc(0x1f8)](_0x2460bc(0x217),a20_0x28d384['pendingOperations'][_0x2460bc(0x1fd)]),console['log']('Blocked\x20operations:',a20_0x28d384['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window[_0x2460bc(0x218)],'activeListeners':Array['from'](a20_0x28d384['activeListeners']['keys']()),'pendingOperations':Array['from'](a20_0x28d384['pendingOperations'][_0x2460bc(0x20a)]()),'blockedCount':a20_0x28d384['blockedOperations']||0x0};},window[_0xfe43ef(0x20f)]=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document['addEventListener'](a20_0x47554e(0x1f2),initIdleTimeout):initIdleTimeout();