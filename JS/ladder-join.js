const a25_0x366a8d=a25_0x1ad1,a25_0x4a0fa0=(function(){let _0xa63be=!![];return function(_0x11b505,_0x3457ea){const _0x635ad9=_0xa63be?function(){if(_0x3457ea){const _0x5b1e4d=_0x3457ea['apply'](_0x11b505,arguments);return _0x3457ea=null,_0x5b1e4d;}}:function(){};return _0xa63be=![],_0x635ad9;};}()),a25_0x2956b3=a25_0x4a0fa0(this,function(){const _0x18c8a2=a25_0x1ad1;let _0x2f7166;try{const _0x232e4f=Function('return\x20(function()\x20'+_0x18c8a2(0x159)+');');_0x2f7166=_0x232e4f();}catch(_0x288e34){_0x2f7166=window;}const _0x2c62f2=_0x2f7166['console']=_0x2f7166['console']||{},_0x28c381=['log','warn','info','error',_0x18c8a2(0x166),'table','trace'];for(let _0x41f503=0x0;_0x41f503<_0x28c381[_0x18c8a2(0x15f)];_0x41f503++){const _0x575948=a25_0x4a0fa0['constructor']['prototype']['bind'](a25_0x4a0fa0),_0x3806e2=_0x28c381[_0x41f503],_0x24b981=_0x2c62f2[_0x3806e2]||_0x575948;_0x575948['__proto__']=a25_0x4a0fa0['bind'](a25_0x4a0fa0),_0x575948['toString']=_0x24b981['toString']['bind'](_0x24b981),_0x2c62f2[_0x3806e2]=_0x575948;}});a25_0x2956b3();function a25_0x41ee(){const _0x293d26=['error','ladder-join-status\x20success','email','className','{}.constructor(\x22return\x20this\x22)(\x20)','textContent','display','disabled','value','getIdToken','length','empty','addEventListener','Authentication\x20verification\x20failed:','log','split',',\x20defaulting\x20to\x20D1','exception','style','trim','exists','CTF','ladder-join-status','input[name=\x22ladder\x22]','target','desc','You\x20are\x20already\x20part\x20of\x20the\x20','data','block','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','uid','tiny-join-button','getElementById','Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...','none','join-username-input','currentUser','playersD2'];a25_0x41ee=function(){return _0x293d26;};return a25_0x41ee();}import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document[a25_0x366a8d(0x161)]('DOMContentLoaded',()=>{const _0x2f3ac2=a25_0x366a8d,_0x4324ad=document['getElementById']('d1-switch'),_0x5f5c1e=document['getElementById']('d2-switch');console[_0x2f3ac2(0x163)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x4324ad),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x5f5c1e);function _0xa4aa14(){const _0x3c1942=_0x2f3ac2;document['querySelectorAll'](_0x3c1942(0x16c))['forEach'](_0xa1ff40=>{_0xa1ff40['addEventListener']('change',_0x4e3790=>{const _0x58249d=a25_0x1ad1;_0x4e3790[_0x58249d(0x16d)]['checked']&&(currentLadder=_0x4e3790['target']['value'],console[_0x58249d(0x163)]('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0xa4aa14();const _0x493263=document['getElementById']('join-ladder-button');_0x493263&&_0x493263['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x2d5da4=>{const _0x5d0634=_0x2f3ac2;if(_0x2d5da4)checkUserLadderStatus();else{const _0x4e13be=document['getElementById']('ladder-join-prompt');_0x4e13be&&(_0x4e13be['style'][_0x5d0634(0x15b)]=_0x5d0634(0x177));}});});function getCollectionName(_0x4d7f32){const _0x28f936=a25_0x366a8d;switch(_0x4d7f32?.['toUpperCase']()){case'D1':return'players';case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case'DUO':return'playersDuos';case _0x28f936(0x16a):return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x4d7f32+_0x28f936(0x165));return'players';}}function a25_0x1ad1(_0x523578,_0x2950ac){const _0x2956b3=a25_0x41ee();return a25_0x1ad1=function(_0x4a0fa0,_0x299fb4){_0x4a0fa0=_0x4a0fa0-0x155;let _0x41ee93=_0x2956b3[_0x4a0fa0];return _0x41ee93;},a25_0x1ad1(_0x523578,_0x2950ac);}async function checkUserLadderStatus(){const _0x55e4ce=a25_0x366a8d;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0xfdb1d3=auth[_0x55e4ce(0x179)],_0x1c45ae=document['getElementById']('ladder-join-prompt'),_0x3291f3=document['getElementById']('join-ladder-type'),_0x473807=document[_0x55e4ce(0x175)](_0x55e4ce(0x174));if(!_0xfdb1d3||!_0xfdb1d3[_0x55e4ce(0x173)]||!_0x1c45ae||!_0x3291f3||!_0x473807){if(_0x1c45ae)_0x1c45ae[_0x55e4ce(0x167)]['display']='none';if(_0x473807)_0x473807[_0x55e4ce(0x167)][_0x55e4ce(0x15b)]='none';return;}try{try{await _0xfdb1d3['getIdToken'](![]);}catch(_0x4b2344){console['error'](_0x55e4ce(0x162),_0x4b2344),_0x1c45ae[_0x55e4ce(0x167)]['display']='none',_0x473807[_0x55e4ce(0x167)]['display']='none';return;}const _0x5a9e32=getCollectionName(currentLadder),_0x15b815=doc(db,_0x5a9e32,_0xfdb1d3['uid']),_0x370183=await getDoc(_0x15b815);if(_0x370183[_0x55e4ce(0x169)]())_0x1c45ae['style']['display']='none',_0x473807[_0x55e4ce(0x167)]['display']='none';else{_0x1c45ae[_0x55e4ce(0x167)]['display']='none',_0x473807['style']['display']='block',_0x3291f3[_0x55e4ce(0x15a)]=currentLadder,_0x473807['onclick']=()=>{const _0x224614=_0x55e4ce;_0x1c45ae['style']['display']===_0x224614(0x171)?_0x1c45ae[_0x224614(0x167)]['display']='none':_0x1c45ae['style']['display']='block';};const _0x70e1cd=document['getElementById'](_0x55e4ce(0x178)),_0x557876=document['getElementById'](_0x55e4ce(0x16b));if(_0x70e1cd)_0x70e1cd['value']='';_0x557876&&(_0x557876['textContent']='',_0x557876['className']='ladder-join-status');}}catch(_0x10a8ee){console['error']('Error\x20checking\x20ladder\x20status:',_0x10a8ee),_0x1c45ae['style']['display']='none',_0x473807[_0x55e4ce(0x167)][_0x55e4ce(0x15b)]='none';}}async function handleJoinLadder(){const _0x3c9687=a25_0x366a8d,_0x56c86e=auth[_0x3c9687(0x179)],_0x1d6bf3=document['getElementById']('join-ladder-button'),_0x35f163=document['getElementById']('ladder-join-status'),_0x276be1=document['getElementById']('join-username-input');if(!_0x56c86e||!_0x56c86e[_0x3c9687(0x173)]){_0x35f163[_0x3c9687(0x15a)]='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x35f163['className']='ladder-join-status\x20error';return;}try{await _0x56c86e[_0x3c9687(0x15e)](!![]);}catch(_0x21b274){console[_0x3c9687(0x155)]('Authentication\x20error:',_0x21b274),_0x35f163['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x35f163['className']='ladder-join-status\x20error';return;}if(!_0x276be1||!_0x276be1[_0x3c9687(0x15d)]['trim']()){_0x35f163[_0x3c9687(0x15a)]='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x35f163[_0x3c9687(0x158)]='ladder-join-status\x20error';return;}try{_0x1d6bf3[_0x3c9687(0x15c)]=!![],_0x35f163['textContent']='Verifying\x20username...',_0x35f163['className']='ladder-join-status\x20loading';let _0x4ff62f='',_0x1db744=null;const _0x4858e7=['players',_0x3c9687(0x17a),'playersD3','playersDuos','playersCTF','nonParticipants'];for(const _0x1c3b9b of _0x4858e7){try{const _0x3b3ef5=doc(db,_0x1c3b9b,_0x56c86e['uid']),_0x1e365b=await getDoc(_0x3b3ef5);if(_0x1e365b['exists']()){_0x1db744=_0x1e365b[_0x3c9687(0x170)]();if(_0x1db744['username']){_0x4ff62f=_0x1db744['username'];break;}}}catch(_0x1c2039){console['error']('Error\x20checking\x20'+_0x1c3b9b+':',_0x1c2039);}}!_0x4ff62f&&_0x56c86e['email']&&(_0x4ff62f=_0x56c86e['email'][_0x3c9687(0x164)]('@')[0x0]);if(!_0x4ff62f){_0x35f163['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x35f163['className']='ladder-join-status\x20error',_0x1d6bf3['disabled']=![];return;}const _0xcdd9bc=_0x276be1[_0x3c9687(0x15d)][_0x3c9687(0x168)]();if(_0x4ff62f&&_0xcdd9bc['toLowerCase']()!==_0x4ff62f['toLowerCase']()){_0x35f163['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x4ff62f+'\x22\x20to\x20confirm.',_0x35f163[_0x3c9687(0x158)]='ladder-join-status\x20error',_0x1d6bf3['disabled']=![];return;}_0x35f163['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x5dad97=getCollectionName(currentLadder),_0x18da3e=doc(db,_0x5dad97,_0x56c86e['uid']),_0x2443b7=await getDoc(_0x18da3e);if(_0x2443b7[_0x3c9687(0x169)]()){_0x35f163['textContent']=_0x3c9687(0x16f)+currentLadder+'\x20ladder.',_0x35f163['className']='ladder-join-status\x20error',_0x1d6bf3['disabled']=![];return;}try{await _0x56c86e['getIdToken'](!![]);}catch(_0x2637a6){_0x35f163[_0x3c9687(0x15a)]=_0x3c9687(0x172),_0x35f163['className']='ladder-join-status\x20error',_0x1d6bf3['disabled']=![];return;}const _0x436b8a=_0x4ff62f,_0x5404c4=collection(db,_0x5dad97),_0x988d0b=query(_0x5404c4,orderBy('position',_0x3c9687(0x16e)),limit(0x1)),_0x48cd60=await getDocs(_0x988d0b);let _0x456259=0x1;if(!_0x48cd60[_0x3c9687(0x160)]){const _0x266980=_0x48cd60['docs'][0x0]['data']();_0x456259=(_0x266980['position']||0x0)+0x1;}const _0x5c7e3f={'username':_0x436b8a,'email':_0x56c86e[_0x3c9687(0x157)],'eloRating':0x4b0,'position':_0x456259,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x18da3e,_0x5c7e3f),currentLadder==='DUOS'?_0x35f163[_0x3c9687(0x15a)]=_0x3c9687(0x176):_0x35f163['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x35f163['className']=_0x3c9687(0x156),setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x4261d3){console['error']('Error\x20joining\x20ladder:',_0x4261d3),_0x35f163['textContent']='Error\x20joining\x20ladder:\x20'+_0x4261d3['message'],_0x35f163['className']='ladder-join-status\x20error',_0x1d6bf3['disabled']=![];}}