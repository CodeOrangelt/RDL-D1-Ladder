function a6c(){const aO=['Dgv4Da','ywXS','lM1HDgnOlw1HCa','zMLSDgvY','zMXLEa','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiJ5mB2fKAw5NihjLy2vUDcbTyxrJAgvZlI4Upc9KAxy+','qw5VBNLTB3vZ','cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpgeGAhjLzJ0I','y2XLyxjgAwX0zxjcDg4','D2LUBMvYq29TBwvUDa','ANvTCa','zgf0yq','Bwf0y2GTy2fYzc10zw1WBgf0zq','zgvZy3jPChrPB24','q29TBwvUDhmGC2vJDgLVBIbUB3qGzM91BMqGAw4GDgvTCgXHDgu','y3vYCMvUDa','BM9Uzq','C3vIz2fTzvr5Cgu','rxjYB3iGC3vIBwL0DgLUzZO','ChjLDMvUDerLzMf1Bhq','BwfW','DMfSDwu','C2vJB25KCW','BwLZC2LSzxmTnNbSDxm','ywrKq29TBwvUDezVCM0','Dg9Nz2XL','DwLK','rMfPBgvKihrVigfKzcbJB21Tzw50oIa','lNbSyxLLCI53Aw5UzxiGlNbSyxLLCI1Uyw1L','igrHExmGywDV','nte5odG5nNDNDMPNDW','CMvTyxrJAa','y29TBwvUDe1HDgnOswq','Dg9tDhjPBMC','BMv4Da','yMfJA2DYB3vUzenVBg9Y','Bg9ZzxjpBgrfBg8','n0L5ugLgAq','y3vYCMvUDfvZzxi','AxnmB2fKAw5N','lNbVChvWlwfJDgLVBNm','z2v0rwXLBwvUDej5swq','zgvTB1DVCMrdB3vUDa','rgvSzxrLigrLBw8','D2fYBG','zgLZCgXHEq','y29TBwvUDfbVChvWuhjLDMLLDW','DgLTzxn0yw1W','BgfZDfzPC2LIBgu','txv0zwqU','qw5VBNLTB3vZifvZzxi','rxjYB3iGCMvWB3j0Aw5NignVBw1LBNq6','Bg9Zzxjezw1VtgLUAW','zNvZAw9Ulw1HDgnO','C2v0qxr0CMLIDxrL','y29UDgvUDa','rMfPBgvKihrVihn1yM1PDdOG','Bg9ZzxjtDwLJAwrLCW','y29TBwvUDefKze92zxjSyxK','AhjLzG','zgf0yxnLDa','i2zMndq0na','y2XLyxiTzw5Oyw5JzwqTzMLSDgvYCW','D2LUBMvYvxnLCM5HBwu','yxbWzw5Kq2HPBgq','lMrLBgv0zs1JB21Tzw50lwj0BG','CMvTB3zLqxr0CMLIDxrL','rMfPBgvKihrVignHy2HLigrHDge6','BgvUz3rO','zgLZCgXHEu5HBwu','qxjLihLVDsbZDxjLihLVDsb3yw50ihrVigrLBgv0zsb0AgLZignVBw1LBNq/','yxbWBhK','Bwf0y2Hjza','ChjVDg90ExbL','iZGWoda4ma','zMLYC3rdAgLSza','Dg9mB3DLCKnHC2u','Aw5JBhvKzxm','C3r5Bgu','y2XVC2vbzgrdB21Tzw50ug9WDxa','y2XVC2vdB21Tzw50ug9WDxbqCMv2Awv3','lMXVC2vYlwrLBw8TBgLUAW','yxbWBhLgAwX0zxjcDg4','CMvJzw50lw1HDgnOzxmTChjLDMLLDW','y2XHC3nmAxn0','yxv0Aa','DxnLCKLK','pc9KAxy+','Bwf0y2HLC1bLCLbHz2u','y3vYCMvUDfbHz2u','u3vIBwL0','zxjYB3i','zgvTB0XPBMS','ChjLDG','zgvTBW','vgHHBMSGEw91lIbuAguGy29TBwvUDcbOyxmGyMvLBIbYzxbVCNrLzcbHBMqGD2LSBcbIzsbYzxzPzxDLzc4','DgfIBgu','y2XVBMvoB2rL','z29Sza','lM1HDgnOzxmTBg9HzgLUz1TZDhLSzsO9iMnVBg9YoIbYzwqIxq','zgvMyxvSDa','lM9WDgLVBI10ywi','mta2nJuWDefsvKng','vg9KyxK','ywn0AxzL','yxbWCM92zwrnyxrJAgvZ','wwvZDgvYzgf5','C3vIBwL0q29TBwvUDa','D2vHCg9UlwLTyMfSyw5Jzq','nZKWmtaXuhbPyvDc','Bwf0y2HdB21Tzw50CW','mJaYns0WnY0WmG','lNbSyxLLCI5SB3nLCIaUCgXHEwvYlw5HBwu','C3rYAw5NAwz5','Aw5Zzxj0qMvMB3jL','zxHJzxb0Aw9U','y29TBwvUDefKzfbVChvW','ngDWwgzwCW','y29TBwvUDfvZzxi','i2zMzG','C2HVD0fKzenVBw1LBNrqB3b1Ca','Dg9mB2nHBgveyxrLu3rYAw5N','ANvTCc10BY1WywDL','j3mGrgvTBW','q2fJAgvKigLUDgvYBwvKAwfYEsbWywDLia','mtvWEa','zgvTB0rLC2nYAxb0Aw9U','y3vYC29Y','zgL2','ChjLDMLLDY1KmI1IDxr0B24','DhjPBq','Bg9ZzxjvC2vYBMfTzq','zMXVB3i','ww91ig5LzwqGDg8GyMuGC2LNBMvKigLUihrVigXLyxzLigeGy29TBwvUDcbVCIbHzgqGysbKzw1V','yxbWCM92zwrnyxrJAgvZrdi','Dw5Yyw5Rzwq','y3vYCMvUDe1Vzgu','q2fJAguGBwLZCYbMB3iGCgfNzsa','ywrK','i2fHyq','y29TBwvUDc1VDMvYBgf5','ChjLDMLLD05LEhrqywDL','vw5RBM93BIbnyxa','kZeW','mJa4ngzYt0vTEq','CMvTB3zLsxrLBq','DhjHy2u','tM8GDMfSAwqGy3vYC29YlcbMzxrJAgLUzYbMCM9TigjLz2LUBMLUzYbHBMqGC2TPChbPBMCGCgfNzxm','rMLYzwjHC2uGBM90igLUAxrPywXPEMvK','CMvTB3zL','rxjYB3iGzMv0y2HPBMCGy29TBwvUDhm6','vw5HyMXLihrVihn1yM1PDcbJB21Tzw50ic0GC3LZDgvTig5VDcbYzwfKEq','ChvZAa','rMfPBgvKihrVigrLBgv0zsbJB21Tzw50oIa','C2XPy2u','ywX0zxjLzc1WB3DLCNvWCW','Bg9N','pc9WpJXZBwfSBcbZDhLSzt0Iy29SB3i6i2fHytSGzgLZCgXHEtPIBg9JAZSGDgv4Dc1HBgLNBJPYAwDODdSGBwfYz2LUlxrVCdOXmhb4oYi+ug9ZDgvKig9Uia','A2v5ChjLC3m','BwfWugXHEwvK','B25JBgLJAW','yMXVy2S','q29TBwvUDcbUB3qGzM91BMqUieL0ig1HEsbOyxzLigfSCMvHzhKGyMvLBIbKzwXLDgvKlG','Dg9mB2nHBgvtDhjPBMC','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiJ5oBYbTyxrJAgvZigzVDw5Kig1HDgnOAw5NigzPBhrLCJOGiG','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiJ5oBYbYzwnLBNqGBwf0y2HLCYbMB3vUza','CMvTB3zLq2HPBgq','D2LUBMvYrgvTB0XPBMS','ChjLDMLLD0nHy2HLxW','y29TBwvUDfrLEhq','yNv0Dg9U','lcbMzxrJAgLUzYbMCM9TiezPCMvZDg9Yzq','nJyXnta4murAueDJtG','ywrKrxzLBNrmAxn0zw5LCG','y2XHC3noyw1L','C3vIBwL0','z2v0vgLTzq','iJWVzgL2pG','A2v5CW','C3bSAxq','Bxv0zuzYB21eyxrL','lMnVBw1LBNqUD2LUBMvYlwnVBw1LBNq','y3jLyxrLrwXLBwvUDa','zgvSzxrLlwnVBw1LBNqTyNrU','Aw5MBW','zw1WDhK','y29UC3rYDwn0B3i','rxjYB3iGzgvSzxrPBMCGy29TBwvUDdO','Bgv2zwXZ','A2v5','y29TBwvUDfbVChvWq29UDgvUDfbYzxzPzxC','AM9PBG','iZuWqZG3oa','lM5VlwnVBw1LBNrZlw1LC3nHz2u','CxvLCNLtzwXLy3rVCG','ntaXmJKZnhDKBKPSBG','q2XLyxjPBMCGy2fJAguGzM9YihjLzNjLC2GVCMvZzxq','mZuYt01LqLvu','ChjLDMLLDY1Kms1IDxr0B24','Cg9WDxaTywn0Aw9UCW','ChjLDMLLD1bYzxzqywDL','mtbNwMnJvvq','D2LUBMvYt2XKrwXV','Aw5Uzxjive1m','q29TBwvUDcbMCM9Tia','zMLYC3rwAxnPyMXL','lM1HDgnOlwnHCMq','Dgv4DenVBNrLBNq','i0nen0yZmG','y2XPy2S','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiIbZDhLSzt0Iy29SB3i6ihjLzdSIpKvYCM9YigXVywrPBMCGBwf0y2HLCZOG','zMLSDgvYvxnLCM5HBwu','C3vIz2fTzxm','lNbSyxLLCI53Aw5UzxiGlNbSyxLLCI1Zy29Yzq','y29UC29Szq','ww91ig5LzwqGDg8GyMuGC2LNBMvKigLUihrVigrLBgv0zsbJB21Tzw50CW','uZOG','zxHPC3rZ','zgvZyW','CgfYzw50tM9Kzq','mtKZoduWmu12twHOCq','zw5Oyw5JzwrgAwX0zxjZ','C2LSDMvY','C3rVCfbYB3bHz2f0Aw9U','tM8GzgvZy3jPChrPB24GChjVDMLKzwq','x19WCM90B19F','oJWVC3rYB25NpIaI','C2vSzwn0zwrpChrPB25Z','Aw5WDxq','y29TBwvUDe92zxjSyxLqCMv2Awv3','yxbWCM92zwrnyxrJAgvZrdm','q29TBwvUDhmGyxjLigXPBwL0zwqGDg8GmtuGD29YzhmGBwf4Aw11Bs4GugXLyxnLihnOB3j0zw4GEw91CIbJB21Tzw50lG','rgvTBZOG','D29YzenVDw50','qxjLihLVDsbZDxjLihLVDsb3yw50ihrVihjLCg9YDcb0AgLZignVBw1LBNqGyxmGAw5HChbYB3bYAwf0zt8','u3vIBwL0DgLUzY4UlG','pc9KAxy+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iMrLBw8TzgvZy3jPChrPB24IpG','uMvWB3j0','CMvXDwLYzwq','zgvTBY1SAw5R','zM9YrwfJAa','C2vSzwn0zwq','DxnLCM5HBwu','y29SB3i','lNbSyxLLCI5SB3nLCIaUCgXHEwvYlxn1AwnPzgvZ','CgLSB3rZ','lNDPBM5LCI1Kzw1VlwXPBMS','yxbWCM92zwrbDa','Bg9ZzxjdB21Tzw50','lJWVzgL2pG','zg9JCW','zgLZywjSzwq','vw5HyMXLihrVihn1yM1PDcaTihn5C3rLBsbUB3qGCMvHzhK','CMvWB3j0q29TBwvUDej1DhrVBG'];a6c=function(){return aO;};return a6c();}const a6a0=a6d;(function(a,b){const X=a6d,c=a();while(!![]){try{const d=parseInt(X(0x16a))/0x1*(-parseInt(X(0x135))/0x2)+parseInt(X(0x210))/0x3+parseInt(X(0x218))/0x4*(parseInt(X(0x209))/0x5)+parseInt(X(0x168))/0x6+parseInt(X(0x1c8))/0x7*(-parseInt(X(0x1c1))/0x8)+-parseInt(X(0x181))/0x9*(parseInt(X(0x16e))/0xa)+parseInt(X(0x151))/0xb;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a6c,0x77832));const a6b=(function(){let a=!![];return function(b,c){const d=a?function(){const Y=a6d;if(c){const e=c[Y(0x1ea)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a6a=a6b(this,function(){const Z=a6d,a=function(){let f;try{f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(g){f=window;}return f;},b=a(),c=b['console']=b[Z(0x17b)]||{},d=[Z(0x141),'warn',Z(0x15d),'error',Z(0x216),Z(0x203),Z(0x137)];for(let e=0x0;e<d[Z(0x1e7)];e++){const f=a6b[Z(0x15f)][Z(0x1ec)]['bind'](a6b),g=d[e],h=c[g]||f;f[Z(0x186)]=a6b['bind'](a6b),f[Z(0x1c4)]=h[Z(0x1c4)]['bind'](h),c[g]=f;}});a6a();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date(a6a0(0x212))[a6a0(0x155)]()}];function isUsernameMuted(a,b){const a1=a6a0;if(!a)return![];const c=mutedUsers['find'](e=>e[a1(0x197)]===a);if(!c)return![];if(!b)return!![];const d=b instanceof Date?b[a1(0x155)]():b['seconds']?b[a1(0x1b9)]*0x3e8:Date['now']();return d>=c[a1(0x159)];}function filterComment(a,b,c){if(!a)return'-';if(isUsernameMuted(b,c))return'Muted.';return a;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(a,b,c){const d='u:'+(c['filterUsername']||'');return'previewCache_'+a+'_p'+b+'_'+d;}function getCachedPage(a){const b=sessionStorage['getItem'](a);if(b)try{return JSON['parse'](b);}catch(c){return console['error']('Failed\x20to\x20parse\x20cache:',c),sessionStorage['removeItem'](a),null;}return null;}function cachePage(a,b){const a2=a6a0;try{sessionStorage['setItem'](a,JSON[a2(0x214)](b));}catch(c){console[a2(0x1fe)](a2(0x1e6),c);}}function getEloColor(a){const a3=a6a0,b=Number(a);if(b>=0x7d0)return a3(0x165);else{if(b>=0x708)return'#FFD700';else{if(b>=0x640)return'#b9f1fc';else{if(b>=0x578)return a3(0x175);else return a3(0x1ed);}}}}function formatDate(a,b=![]){const a4=a6a0;if(!a||!a[a4(0x1b9)])return'N/A';const c=new Date(a['seconds']*0x3e8);return b?c['toLocaleString']():c[a4(0x21c)]();}function truncateComment(a,b=0x1e){const a5=a6a0;if(!a)return'-';if(a[a5(0x1e7)]<=b)return a;return a['substring'](0x0,b)+'...';}function formatCommentDate(a){const a6=a6a0;if(!a||!a[a6(0x1b9)])return'';const b=new Date(a[a6(0x1b9)]*0x3e8),c=new Date(),d=Math['abs'](c-b),e=Math[a6(0x227)](d/(0x3e8*0x3c*0x3c*0x18));if(e===0x0)return a6(0x20a);else{if(e===0x1)return a6(0x20d);else return e<0x7?e+a6(0x1c0):b[a6(0x21c)]();}}function setLoadingIndicator(a){const a7=a6a0,b=document[a7(0x1cc)]('loading-indicator');if(b)b[a7(0x1f1)]['display']=a?a7(0x146):a7(0x1b3);}export function updatePreviewLadderModeUI(){const a8=a6a0,a=document['getElementById']('preview-ladder-mode'),b=document['getElementById'](a8(0x16b)),c=document[a8(0x1cc)](a8(0x224)),d=document[a8(0x1cc)]('preview-d3-button');if(a)a['textContent']=previewState['currentMode'];if(b)b['classList'][a8(0x1bc)]('active',previewState['currentMode']==='D1');if(c)c[a8(0x1f7)][a8(0x1bc)](a8(0x20b),previewState[a8(0x12d)]==='D2');if(d)d['classList']['toggle']('active',previewState[a8(0x12d)]==='D3');}function updatePreviewPaginationControls(a){const a9=a6a0,b=document['getElementById'](a9(0x16d)),c=document['getElementById'](a9(0x132)),d=document['getElementById']('previewPageInfo');if(!b||!c||!d)return;d[a9(0x174)]='Page\x20'+previewState[a9(0x1fc)],b['disabled']=previewState[a9(0x1fc)]<=0x1,c[a9(0x1a0)]=!a;}function setPreviewLoadingState(a){const aa=a6a0;previewState[aa(0x1ca)]=a,setLoadingIndicator(a);const b=document['getElementById']('recent-matches-preview'),c=b?b['querySelector']('.matches-loading'):null,d=document[aa(0x1cc)](aa(0x16d)),e=document[aa(0x1cc)](aa(0x132)),f=document[aa(0x1cc)]('preview-d1-button'),g=document['getElementById']('preview-d2-button'),h=document[aa(0x1cc)](aa(0x1f5)),i=document[aa(0x1cc)](aa(0x1ab));if(c&&!a)c[aa(0x1f1)][aa(0x1d0)]=aa(0x1b3);else c&&a&&(c[aa(0x1f1)][aa(0x1d0)]='block');!a&&b&&!b[aa(0x167)]('.match-card')&&!b[aa(0x167)]('.matches-loading[style*=\x22color:\x20red\x22]')&&(b['innerHTML']=aa(0x14a)+(previewState[aa(0x178)]?'\x20matching\x20filters':'')+aa(0x19e));if(d)d['disabled']=a||previewState[aa(0x1fc)]<=0x1;if(e)e['disabled']=a;if(f)f['disabled']=a;if(g)g[aa(0x1a0)]=a;if(h)h['disabled']=a;if(i)i[aa(0x1a0)]=a;}function applyClientFilters(a){const ab=a6a0;if(!previewState['filterUsername'])return a;const b=previewState[ab(0x178)]['toLowerCase']();return a['filter'](c=>{const ac=ab,d=(c['winnerUsername']||'')['toLowerCase'](),e=(c[ac(0x226)]||'')['toLowerCase']();return d['includes'](b)||e['includes'](b);});}function applyEnhancedClientFilters(a){if(!hasEnhancedFilters())return a;return a['filter'](b=>{const ad=a6d;if(previewState['enhancedFilters']['pilots']){const c=previewState['enhancedFilters']['pilots'][ad(0x1ef)](),d=(b['winnerUsername']||'')[ad(0x1ef)](),e=(b[ad(0x226)]||'')['toLowerCase']();if(!d['includes'](c)&&!e['includes'](c))return![];}if(previewState['enhancedFilters']['levels']){const f=previewState['enhancedFilters']['levels']['toLowerCase'](),g=(b[ad(0x144)]||'')[ad(0x1ef)]();if(!g[ad(0x1f0)](f))return![];}if(previewState['enhancedFilters'][ad(0x179)]['length']>0x0){const h=b['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames']['includes'](h))return![];}return!![];});}function hasEnhancedFilters(){const ae=a6a0;return previewState[ae(0x182)]['pilots']||previewState[ae(0x182)]['levels']||previewState[ae(0x182)]['subgames'][ae(0x1e7)]>0x0;}function clearEnhancedFilters(){const af=a6a0;previewState[af(0x182)]={'pilots':'','levels':'','subgames':[]},document[af(0x1cc)]('filter-pilots')['value']='',document[af(0x1cc)]('filter-levels')[af(0x1b8)]='';const a=document[af(0x1cc)]('filter-subgames');for(let b of a['options']){b[af(0x196)]=![];}}function jumpToPage(a){const ag=a6a0,b=document['getElementById']('jump-to-page'),c=previewState['currentPage'];let d=c;switch(a){case'start':d=0x1;break;case'end':d=Math['max'](c+0xa,previewState['totalPages']||c+0xa);break;case'+1':d=c+0x1;break;case'+5':d=c+0x5;break;case ag(0x134):d=c+0xa;break;case'-1':d=Math['max'](0x1,c-0x1);break;case'-5':d=Math['max'](0x1,c-0x5);break;case'-10':d=Math['max'](0x1,c-0xa);break;case'input':const e=parseInt(b['value']);e&&e>0x0&&(d=e,b[ag(0x1b8)]='');break;}d!==c&&d>0x0&&(previewState['currentPage']=d,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(a=a6a0(0x1b2)){const ah=a6a0,b=document[ah(0x1cc)]('recent-matches-preview'),c=document['getElementById'](ah(0x1af));if(previewState['isLoading']||!b||!c)return;a==='current'&&(console[ah(0x141)](ah(0x169)),Object[ah(0x157)](sessionStorage)[ah(0x195)](k=>{const ai=ah;k[ai(0x1f0)](ai(0x14d)+previewState['currentMode'])&&sessionStorage[ai(0x136)](k);}));let d=previewState['currentPage'];if(a==='next')d++;else{if(a===ah(0x200))d--;else a==='current'&&(d=0x1,previewState[ah(0x172)]=null,previewState['lastVisible']=null);}if(d<0x1)d=0x1;const e=previewState['currentPage'];previewState['currentPage']=d,updatePreviewPaginationControls(!![]);const f={'filterUsername':previewState['filterUsername']},g=getCacheKey(previewState[ah(0x12d)],d,f),h=a!==ah(0x1b2)?getCachedPage(g):null;if(h){console[ah(0x141)]('Rendering\x20page\x20'+d+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(h['docsData']),updatePreviewPaginationControls(h['hasNextPage']),setPreviewLoadingState(![]);return;}console['log'](ah(0x12e)+d+ah(0x150)),setPreviewLoadingState(!![]),b['innerHTML']=ah(0x1a8);const i=previewState[ah(0x12d)]==='D1'?ah(0x20c):previewState[ah(0x12d)]==='D2'?ah(0x229):ah(0x18b),j=previewState[ah(0x12d)]==='D1'?'createdAt':'approvedAt';try{const k=collection(window['db'],i);let l=[orderBy(j,ah(0x17f))];if(d===0x1)console['log']('Loading\x20first\x20page\x20from\x20Firestore'),l[ah(0x13d)](limit(previewState[ah(0x1fb)]));else{if(a==='next'&&previewState['lastVisible'])console['log']('Loading\x20next\x20page\x20using\x20cursor'),l[ah(0x13d)](startAfter(previewState[ah(0x1d3)])),l[ah(0x13d)](limit(previewState['matchesPerPage']));else{console[ah(0x141)](ah(0x138));const v=d*previewState['matchesPerPage'];l[ah(0x13d)](limit(v));}}const m=query(k,...l),n=await getDocs(m);let o=n[ah(0x19f)];if(d>0x1&&a!==ah(0x1c5)){const w=(d-0x1)*previewState['matchesPerPage'];o=o['slice'](w,w+previewState['matchesPerPage']);}if(o['length']===0x0){console['log']('No\x20results\x20found\x20for\x20this\x20page');a===ah(0x1c5)&&(previewState[ah(0x1fc)]=e,updatePreviewPaginationControls(![]));b['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState[ah(0x178)]?'\x20matching\x20filters':'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=o[0x0],previewState['lastVisible']=o[o[ah(0x1e7)]-0x1];const r=o[ah(0x1b7)](x=>({'id':x['id'],...x['data']()}));let s=![];if(o['length']===previewState[ah(0x1fb)]){const x=query(k,orderBy(j,'desc'),startAfter(previewState[ah(0x1d3)]),limit(0x1)),y=await getDocs(x);s=!y[ah(0x15e)];}const t=applyClientFilters(r),u={'docsData':r,'hasNextPage':s};cachePage(getCacheKey(previewState[ah(0x12d)],previewState['currentPage'],f),u);if(d>0x1&&a!==ah(0x1c5))for(let z=0x1;z<d;z++){const A=(z-0x1)*previewState[ah(0x1fb)],B=A+previewState[ah(0x1fb)],C=n['docs']['slice'](A,B);if(C['length']>0x0){const D=C[ah(0x1b7)](F=>({'id':F['id'],...F['data']()})),E=!![];cachePage(getCacheKey(previewState['currentMode'],z,f),{'docsData':D,'hasNextPage':E}),console['log'](ah(0x21f)+z);}}t[ah(0x1e7)]===0x0&&previewState['filterUsername']?b[ah(0x170)]=ah(0x149)+previewState[ah(0x178)]+ah(0x156):renderMatchCards(t),updatePreviewPaginationControls(s);}catch(F){console[ah(0x1fe)]('Error\x20fetching\x20'+previewState[ah(0x12d)]+'\x20matches:',F),b['innerHTML']=ah(0x177)+F['message']+ah(0x1fa),updatePreviewPaginationControls(![]),previewState[ah(0x1fc)]=e;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(a){const aj=a6a0,b=document['getElementById'](aj(0x1f6)),c=document[aj(0x1cc)](aj(0x1af));if(!b||!c)return;!b['querySelector'](aj(0x206))&&(b[aj(0x170)]='');if(!a||a['length']===0x0){if(!b[aj(0x167)](aj(0x206))){const h=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?'\x20matching\x20filters':'';b['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+h+'.</div>';}return;}const d=applyEnhancedClientFilters(a);if(d[aj(0x1e7)]===0x0){b[aj(0x170)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const e=d['map'](i=>getAllCommentsForMatch(i['id']));let f=[];try{f=await Promise[aj(0x1a4)](e);}catch(i){console[aj(0x1fe)]('Error\x20fetching\x20comments\x20batch:',i),f=d['map'](()=>[]);}const g={};f[aj(0x195)]((j,k)=>{g[d[k]['id']]=j||[];}),d[aj(0x195)](j=>{const ak=aj,k=c[ak(0x1da)][ak(0x204)](!![]),l=k['querySelector']('.match-display-wrapper'),m=k[ak(0x167)](ak(0x173)),n=getEloRankClass(j['winnerOldElo']);m['classList'][ak(0x12f)]('winner-'+n),m['querySelector'](ak(0x1a5))['textContent']=j[ak(0x144)]||ak(0x133),m['querySelector']('.match-date')[ak(0x174)]=formatDate(j[ak(0x19c)]||j['createdAt']);const o=m['querySelector'](ak(0x1bf));o['textContent']=j['winnerUsername']||'Unknown',o[ak(0x1f1)][ak(0x198)]=getEloColor(j['winnerOldElo']),m['querySelector'](ak(0x17a))['textContent']=j['winnerScore']??0x0;const p=m[ak(0x167)]('.player.winner\x20.player-suicides'),q=j['winnerSuicides']||0x0;p['textContent']=ak(0x17d)+q;const r=m['querySelector'](ak(0x213));r[ak(0x174)]=j['loserUsername']||'Unknown',r[ak(0x1f1)][ak(0x198)]=getEloColor(j[ak(0x1c7)]),m[ak(0x167)]('.player.loser\x20.player-score')['textContent']=j['loserScore']??0x0;const s=m['querySelector'](ak(0x199)),t=j[ak(0x1dc)]||0x0;s['textContent']='S:\x20'+t;const u=m[ak(0x167)]('.match-subgame');if(u){if(j[ak(0x1b4)]&&j['subgameType'][ak(0x225)]()!==''){u['textContent']=j['subgameType'],u['style']['display']='block';const E=getSubgameClass(j['subgameType']);E&&u['classList'][ak(0x12f)](E);}else u['textContent']='Standard\x20Match',u['style']['display']=ak(0x146),u[ak(0x1f1)]['opacity']='0.6';}const v=m[ak(0x167)](ak(0x15a)),w=m['querySelector']('.comment.loser-comment'),x=j[ak(0x1ac)]||'',y=j[ak(0x19d)]||'',z=j[ak(0x19c)]||j['createdAt'],A=filterComment(x,j['winnerUsername'],z),B=filterComment(y,j['loserUsername'],z);v[ak(0x174)]='\x22'+truncateComment(x)+'\x22',w['textContent']='\x22'+truncateComment(y)+'\x22';x&&!isUsernameMuted(j['winnerUsername'],z)?v[ak(0x145)]=()=>showPreviewCommentPopup(A,j[ak(0x1e2)]||'Winner',getEloColor(j[ak(0x16f)])):(v['textContent']=A==='Muted.'?'Muted.':'-',v[ak(0x1f1)][ak(0x222)]=ak(0x207),v[ak(0x145)]=null);y&&!isUsernameMuted(j['loserUsername'])?w[ak(0x145)]=()=>showPreviewCommentPopup(B,j[ak(0x226)]||'Loser',getEloColor(j['loserOldElo'])):(w[ak(0x174)]=B===ak(0x1d4)?'Muted.':'-',w['style'][ak(0x222)]=ak(0x207),w['onclick']=null);const C=l?.['querySelector']('.community-comments-section');if(!C)console['warn'](ak(0x1b1));else{const F=C[ak(0x167)]('.comments-container'),G=F?.[ak(0x167)](ak(0x166)),H=C['querySelector']('.add-comment-btn');if(F){while(F['firstChild']&&F['firstChild']!==G){F[ak(0x14b)](F[ak(0x1ee)]);}H&&H[ak(0x152)]('click',()=>{showAddCommentPopup(j['id']);});const I=g[j['id']]||[];if(I[ak(0x1e7)]>0x0){if(G)G['style'][ak(0x1d0)]=ak(0x1b3);const J=(K,L)=>{const al=ak,M=K[al(0x158)]('\x20');if(M['length']<=L)return K;return M[al(0x13f)](0x0,L)[al(0x164)]('\x20')+'...';};I[ak(0x195)](K=>{const am=ak,L=document['createElement']('div');if(K['type']==='demo'){L[am(0x153)]=am(0x194),L['innerHTML']=am(0x1aa)+K['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+K[am(0x197)]+am(0x191)+(K[am(0x1b0)]||am(0x185))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const M=window['auth']['currentUser'],N=M&&K['userId']===M['uid'];if(N){const O=document['createElement'](am(0x14f));O[am(0x153)]=am(0x15c),O[am(0x170)]='×',O[am(0x1d9)]('aria-label',am(0x1ce)),O['addEventListener'](am(0x176),P=>{const an=am;P[an(0x1b6)](),P[an(0x184)](),deleteComment(K['id'],L);}),L[am(0x1e3)](O);}}else{L[am(0x153)]='comment-item';const P=isUsernameMuted(K[am(0x197)],K[am(0x1d2)]),Q=P?'Muted.':J(K['text']||'',0xf),R=K[am(0x197)]||'Anonymous',S=window['auth']['currentUser'],T=S&&K[am(0x1f9)]===S['uid'];let U='';T&&(U='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');L['innerHTML']=U+'<strong>'+R+am(0x187)+Q+'\x22';if(T){const V=L[am(0x167)](am(0x1e4));V&&V['addEventListener'](am(0x176),W=>{W['stopPropagation'](),deleteComment(K['id'],L);});}!P?L[am(0x152)]('click',()=>{showFullCommentLightbox(K);}):L['style']['cursor']=am(0x207);}F[am(0x215)](L,F[am(0x1ee)]);});}else{if(G)G[ak(0x1f1)]['display']=ak(0x146);}}}const D=m['querySelector']('.match-demo-links');if(D){const K=m[ak(0x167)](ak(0x19b)),L=m['querySelector'](ak(0x1f4)),M=j[ak(0x14c)]||null,N=j[ak(0x1d7)]||j[ak(0x1ff)]||null;console[ak(0x141)]('Match\x20'+j['id']+'\x20demo\x20links:',{'winner':M,'loser':N}),K&&(M?(K['href']=M,K['style'][ak(0x1d0)]='flex',K['title']=j[ak(0x1e2)]+ak(0x21e)):K['style'][ak(0x1d0)]='none'),L&&(N?(L[ak(0x1de)]=N,L['style']['display']=ak(0x1a7),L['title']=j['loserUsername']+ak(0x21e)):L[ak(0x1f1)]['display']='none'),M&&K||N&&L?D['style']['display']='flex':D[ak(0x1f1)]['display']='none';}b[ak(0x1e3)](k);});}function getSubgameClass(a){const ao=a6a0,b={'Fusion\x20Match':ao(0x1d8),'≥6\x20Missiles':ao(0x1ba),'≥6\x20missiles':ao(0x1ba),'Weapon\x20Imbalance':ao(0x20f),'Blind\x20Match':'blind-match','Rematch':ao(0x1c2),'Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':ao(0x140),'Mega\x20Match':'mega-match','Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return b[a]||'';}async function deleteComment(a,b){const ap=a6a0,c=window[ap(0x1f8)][ap(0x1c9)];if(!c){alert(ap(0x17c));return;}if(!confirm(ap(0x1e9)))return;try{const d=doc(window['db'],'matchComments',a),e=await getDoc(d);if(!e['exists']()){alert(ap(0x147));return;}const f=e['data']();if(f[ap(0x1f9)]!==c[ap(0x1bd)]){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(d);if(b&&b['parentNode']){b[ap(0x180)]['removeChild'](b);const g=b['closest']('.comments-container');if(g&&!g[ap(0x167)]('.comment-item')){const h=g[ap(0x167)]('.no-comments-message');if(h)h[ap(0x1f1)]['display']=ap(0x146);}}console['log']('Comment\x20deleted\x20successfully');}catch(i){console[ap(0x1fe)](ap(0x160),i),alert(ap(0x13e)+i['message']);}}async function getAllCommentsForMatch(a){const aq=a6a0;if(!a)return[];try{const b=collection(window['db'],'matchComments'),c=query(b,where('matchId','==',a),orderBy('timestamp',aq(0x17f))),d=await getDocs(c);if(d['empty'])return[];return d['docs'][aq(0x1b7)](e=>({'id':e['id'],...e[aq(0x1ae)]()}));}catch(e){return console['error'](aq(0x13b),e),[];}}async function submitComment(a){const ar=a6a0;a[ar(0x1b6)]();if(!window[ar(0x1f8)]||!window['db']){console[ar(0x1fe)](ar(0x139)),alert(ar(0x13c));return;}const b=window[ar(0x1f8)][ar(0x1c9)];if(!b){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const c=document['getElementById'](ar(0x1c3))?.[ar(0x1b8)],d=document['getElementById'](ar(0x14e))?.[ar(0x1b8)]?.[ar(0x225)]();if(!c||!d){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const e=d['split'](/\s+/)['filter'](g=>g['length']>0x0)['length'];if(e>0xf){alert(ar(0x18c));return;}const f=document['querySelector']('.submit-comment-btn');f&&(f['disabled']=!![],f[ar(0x174)]='Submitting...');try{let g=ar(0x1a9);try{const j=doc(window['db'],'userProfiles',b['uid']),k=await getDoc(j);if(k[ar(0x17e)]()){const l=k[ar(0x1ae)]();l['username']&&(g=l['username']);}g==='Anonymous'&&b['displayName']&&(g=b[ar(0x1e8)]);}catch(m){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',m),b[ar(0x1e8)]&&(g=b['displayName']);}const h={'matchId':c,'userId':b[ar(0x1bd)],'username':g,'text':d,'timestamp':serverTimestamp()};console['log']('Submitting\x20comment\x20as:',g);const i=collection(window['db'],ar(0x211));await addDoc(i,h),console['log']('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(n){console[ar(0x1fe)]('Error\x20submitting\x20comment:',n),alert(ar(0x1be)+n['message']),f&&(f[ar(0x1a0)]=![],f['textContent']='Submit');}}function closeAddCommentPopup(){const as=a6a0,a=document[as(0x1cc)](as(0x217)),b=document['getElementById'](as(0x1dd));if(a)a['style']['display']=as(0x1b3);if(b)b['style'][as(0x1d0)]='none';}function showAddCommentPopup(a){const at=a6a0,b=window[at(0x1f8)]['currentUser'];if(!b){alert(at(0x228));return;}let c=document[at(0x1cc)](at(0x217)),d=document['getElementById']('commentAddOverlay');!c&&(c=document[at(0x15b)](at(0x223)),c['id']='commentAddPopup',c['className']='comment-popup',document['body']['appendChild'](c));!d&&(d=document['createElement'](at(0x223)),d['id']=at(0x1dd),d['className']=at(0x131),document['body'][at(0x1e3)](d));c[at(0x170)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+a+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',c['style']['display']='block',d[at(0x1f1)]['display']=at(0x146),document['getElementById']('closeAddCommentPopup')['addEventListener'](at(0x176),closeAddCommentPopup),d['addEventListener']('click',closeAddCommentPopup);const e=c['querySelectorAll'](at(0x208));e['forEach'](f=>{const au=at;f['addEventListener'](au(0x176),function(){const av=au;e['forEach'](h=>h['classList'][av(0x13a)](av(0x20b))),document['querySelectorAll']('.option-content')['forEach'](h=>h['style']['display']=av(0x1b3)),this['classList'][av(0x12f)]('active');const g=this['dataset']['option'];document['getElementById'](g+'Option')[av(0x1f1)][av(0x1d0)]='block',g==='demo'?(document[av(0x1cc)]('demoLink')['setAttribute']('required',''),document['getElementById'](av(0x14e))[av(0x1e5)]('required')):(document[av(0x1cc)](av(0x1ff))['removeAttribute']('required'),document['getElementById'](av(0x14e))[av(0x1d9)](av(0x193),''));});}),document['getElementById']('commentText')[at(0x1d9)]('required',''),document[at(0x1cc)]('demoLink')['removeAttribute']('required'),setupWordCounter(at(0x14e),'wordCount',0xf),setupWordCounter('demoDescription',at(0x1cd),0x14),document[at(0x1cc)](at(0x1bb))[at(0x152)](at(0x154),submitCommentOrDemo);}function setupWordCounter(a,b,c){const aw=a6a0,d=document['getElementById'](a),e=document['getElementById'](b);if(!d||!e)return;f(),d['addEventListener'](aw(0x189),f);function f(){const ax=aw,g=d['value']['trim'](),h=g?g['split'](/\s+/)['filter'](i=>i[ax(0x1e7)]>0x0)[ax(0x1e7)]:0x0;e[ax(0x174)]=h,h>c?e['style'][ax(0x198)]=ax(0x1e0):e[ax(0x1f1)]['color']=ax(0x130);}}async function submitCommentOrDemo(a){const ay=a6a0;a['preventDefault']();if(!window['auth']||!window['db']){console[ay(0x1fe)]('Firebase\x20not\x20initialized'),alert(ay(0x1a1));return;}const b=window[ay(0x1f8)]['currentUser'];if(!b){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const c=document['getElementById'](ay(0x1c3))['value'],d=document['querySelector']('.option-tab.active')[ay(0x1df)]['option'];let f=ay(0x1a9);try{const h=doc(window['db'],'userProfiles',b['uid']),i=await getDoc(h);if(i['exists']()){const j=i[ay(0x1ae)]();j['username']&&(f=j['username']);}f==='Anonymous'&&b[ay(0x1e8)]&&(f=b['displayName']);}catch(k){console[ay(0x1cf)]('Failed\x20to\x20fetch\x20username:',k),b['displayName']&&(f=b[ay(0x1e8)]);}const g=document[ay(0x167)]('.submit-comment-btn');g&&(g[ay(0x1a0)]=!![],g[ay(0x174)]=ay(0x190));try{if(d==='comment'){const l=document[ay(0x1cc)](ay(0x14e))['value']['trim']();if(!l){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),g[ay(0x1a0)]=![],g[ay(0x174)]='Submit';return;}const m=l['split'](/\s+/)[ay(0x1a6)](p=>p[ay(0x1e7)]>0x0)[ay(0x1e7)];if(m>0xf){alert(ay(0x18c)),g[ay(0x1a0)]=![],g['textContent']=ay(0x1fd);return;}const n={'matchId':c,'userId':b['uid'],'username':f,'text':l,'type':'comment','timestamp':serverTimestamp()},o=collection(window['db'],'matchComments');await addDoc(o,n);}else{const p=document[ay(0x1cc)]('demoLink')[ay(0x1b8)][ay(0x225)](),q=document['getElementById'](ay(0x221))['value'][ay(0x225)]()||'Demo\x20link';if(!p){alert('Please\x20enter\x20a\x20demo\x20link'),g['disabled']=![],g['textContent']='Submit';return;}try{new URL(p);}catch(u){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),g['disabled']=![],g['textContent']='Submit';return;}const r=q['split'](/\s+/)[ay(0x1a6)](v=>v[ay(0x1e7)]>0x0)['length'];if(r>0x14){alert('Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.'),g['disabled']=![],g['textContent']='Submit';return;}const s={'matchId':c,'userId':b[ay(0x1bd)],'username':f,'demoLink':p,'description':q,'type':ay(0x201),'text':ay(0x18d)+q,'timestamp':serverTimestamp()},t=collection(window['db'],'matchComments');await addDoc(t,s);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(v){console[ay(0x1fe)](ay(0x1b5),v),alert(ay(0x1db)+v['message']),g&&(g['disabled']=![],g['textContent']=ay(0x1fd));}}function getEloRankClass(a){const az=a6a0,b=Number(a);if(b>=0x7d0)return'emerald';else{if(b>=0x708)return az(0x205);else{if(b>=0x640)return az(0x183);else{if(b>=0x578)return'bronze';else return az(0x22a);}}}}function showPreviewCommentPopup(a,b,c=a6a0(0x21a)){const aA=a6a0,d=document[aA(0x1cc)](aA(0x1d1)),e=document[aA(0x1cc)](aA(0x18a)),f=document[aA(0x1cc)]('commentPopupTitlePreview'),g=document[aA(0x1cc)](aA(0x163)),h=document['getElementById'](aA(0x1a2));if(!d||!e||!f||!g||!h)return;d['dataset']['commentText']=a,d['dataset']['commentUser']=b,f[aA(0x1f1)][aA(0x198)]=c,f['textContent']='Comment\x20from\x20'+b,g['textContent']=a,h['onclick']=reportComment,d[aA(0x1f1)]['display']=aA(0x146),e[aA(0x1f1)]['display']=aA(0x146);}function a6d(a,b){const c=a6c();return a6d=function(d,e){d=d-0x12d;let f=c[d];if(a6d['ypbGGv']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a6d['PmqpZA']=g,a=arguments,a6d['ypbGGv']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a6d['PmqpZA'](f),a[i]=f):f=j,f;},a6d(a,b);}function closePreviewCommentPopup(){const aB=a6a0,a=document[aB(0x1cc)](aB(0x1d1)),b=document['getElementById']('commentOverlayPreview');if(a)a['style']['display']='none';if(b)b[aB(0x1f1)][aB(0x1d0)]=aB(0x1b3);}async function reportComment(){const aC=a6a0,a=window['auth']['currentUser'];if(!a){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm(aC(0x18f)))return;try{const b=document[aC(0x1cc)](aC(0x1d1)),c={'commentAuthor':b['dataset'][aC(0x219)]||'Unknown\x20User','commentText':b['dataset']['commentText']||'','matchId':previewState['currentMatchId']||'','reportedBy':a[aC(0x1bd)],'reporterUsername':a[aC(0x1e8)]||aC(0x1d5),'reportedAt':serverTimestamp()},d=collection(window['db'],'badComments');await addDoc(d,c),alert(aC(0x202)),closePreviewCommentPopup();}catch(e){console[aC(0x1fe)](aC(0x1d6),e),alert('Failed\x20to\x20report\x20comment:\x20'+e['message']);}}function showFullCommentLightbox(a){const aD=a6a0;if(isUsernameMuted(a[aD(0x197)]))return;const b=document[aD(0x1cc)](aD(0x1d1)),c=document[aD(0x1cc)](aD(0x18a)),d=document[aD(0x1cc)]('commentPopupTitlePreview'),e=document['getElementById'](aD(0x163));if(!b||!c||!d||!e)return;d[aD(0x1f1)]['color']=aD(0x21a),d[aD(0x174)]=aD(0x171)+a[aD(0x197)];if(a['timestamp']){const i=new Date(a['timestamp']['seconds']*0x3e8),j=i[aD(0x148)]();e[aD(0x170)]='<p>'+a['text']+aD(0x142)+j+'</small>';}else e[aD(0x174)]=a['text'];b['dataset']['commentId']=a['id']||'',b[aD(0x1df)]['commentUser']=a['username']||'',b[aD(0x1df)]['commentText']=a[aD(0x1a3)]||'',b[aD(0x1df)]['matchId']=a[aD(0x1eb)]||'';const f=b['querySelector'](aD(0x1cb))||document['createElement'](aD(0x223));!b['querySelector'](aD(0x1cb))?(f[aD(0x153)]=aD(0x16c),f['style']['display']='flex',f['style']['justifyContent']='center',f['style']['gap']='10px',f['style']['marginTop']=aD(0x220),b['appendChild'](f)):f['innerHTML']='';const g=document['createElement']('button');g[aD(0x174)]='Close',g[aD(0x153)]='popup-btn\x20close-btn',g['id']=aD(0x1f3),g['addEventListener'](aD(0x176),closePreviewCommentPopup);const h=document[aD(0x15b)](aD(0x14f));h[aD(0x174)]=aD(0x192),h[aD(0x153)]='popup-btn\x20report-btn',h['style'][aD(0x1c6)]='#d32f2f',h[aD(0x152)]('click',reportComment),f[aD(0x1e3)](g),f[aD(0x1e3)](h),b['style'][aD(0x1d0)]=aD(0x146),c['style']['display']=aD(0x146);}export function setupPreviewEventListeners(){const aE=a6a0,a=document['getElementById'](aE(0x16d)),b=document[aE(0x1cc)]('previewNextPage'),c=document['getElementById'](aE(0x16b)),d=document[aE(0x1cc)](aE(0x224)),e=document[aE(0x1cc)]('preview-d3-button'),f=document[aE(0x1cc)]('filter-toggle-button'),g=document[aE(0x1cc)]('enhanced-filter-section');if(!a||!b||!c||!d||!e||!f||!g){console['warn']('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}a[aE(0x152)]('click',()=>{const aF=aE;if(!a['disabled'])loadRecentMatchesPreview(aF(0x200));}),b[aE(0x152)](aE(0x176),()=>{const aG=aE;if(!b[aG(0x1a0)])loadRecentMatchesPreview(aG(0x1c5));}),c['addEventListener'](aE(0x176),()=>{const aH=aE;previewState[aH(0x12d)]!=='D1'&&!previewState[aH(0x1ca)]&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),d['addEventListener'](aE(0x176),()=>{const aI=aE;previewState[aI(0x12d)]!=='D2'&&!previewState[aI(0x1ca)]&&(previewState[aI(0x12d)]='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview(aI(0x1b2)));}),e[aE(0x152)]('click',()=>{const aJ=aE;previewState['currentMode']!=='D3'&&!previewState[aJ(0x1ca)]&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview(aJ(0x1b2)));});f&&g&&f['addEventListener']('click',()=>{const aK=aE,r=g[aK(0x1f1)]['display']!=='none';g[aK(0x1f1)]['display']=r?aK(0x1b3):'block',f['classList'][aK(0x1bc)](aK(0x20b),!r);});const h=document[aE(0x1cc)]('apply-enhanced-filters'),i=document['getElementById'](aE(0x1e1));h&&h[aE(0x152)](aE(0x176),()=>{const aL=aE;previewState[aL(0x182)][aL(0x19a)]=document[aL(0x1cc)]('filter-pilots')[aL(0x1b8)]['trim'](),previewState[aL(0x182)][aL(0x161)]=document[aL(0x1cc)]('filter-levels')[aL(0x1b8)][aL(0x225)]();const r=document[aL(0x1cc)]('filter-subgames');previewState[aL(0x182)][aL(0x179)]=Array['from'](r[aL(0x188)])[aL(0x1b7)](s=>s['value'])[aL(0x1a6)](s=>s!==''),loadRecentMatchesPreview(aL(0x1b2));});i&&i[aE(0x152)](aE(0x176),()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document['querySelectorAll']('.jump-btn')['forEach'](r=>{r['addEventListener']('click',()=>{const aM=a6d,s=r['dataset'][aM(0x1ad)];jumpToPage(s);});});const j=document[aE(0x1cc)](aE(0x21d));j&&j['addEventListener'](aE(0x143),r=>{const aN=aE;r[aN(0x162)]==='Enter'&&jumpToPage(aN(0x189));});const k=document['getElementById']('closeCommentPopupPreview'),l=document[aE(0x1cc)]('commentOverlayPreview');if(k)k[aE(0x152)](aE(0x176),closePreviewCommentPopup);if(l)l['addEventListener'](aE(0x176),closePreviewCommentPopup);const m=document[aE(0x1cc)](aE(0x1f2)),n=document[aE(0x1cc)]('commentAddOverlay'),o=document['getElementById'](aE(0x1bb));if(m)m['addEventListener'](aE(0x176),closeAddCommentPopup);if(n)n['addEventListener'](aE(0x176),closeAddCommentPopup);if(o)o[aE(0x152)]('submit',submitComment);const p=document['getElementById'](aE(0x14e)),q=document['getElementById'](aE(0x18e));p&&q&&setupWordCounter(aE(0x14e),'wordCount',0xf);}window[a6a0(0x21b)]=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window[a6a0(0x20e)]=submitComment;