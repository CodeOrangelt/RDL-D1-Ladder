const a10u=a10b;(function(a,b){const l=a10b,c=a();while(!![]){try{const d=-parseInt(l(0x1e3))/0x1*(parseInt(l(0x1df))/0x2)+parseInt(l(0x1e0))/0x3*(parseInt(l(0x1e7))/0x4)+-parseInt(l(0x1ef))/0x5+-parseInt(l(0x1e8))/0x6*(-parseInt(l(0x1fc))/0x7)+-parseInt(l(0x1e2))/0x8+parseInt(l(0x1db))/0x9+-parseInt(l(0x20b))/0xa*(parseInt(l(0x1dd))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a10a,0x1da03));import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';function a10b(a,b){const c=a10a();return a10b=function(d,e){d=d-0x1da;let f=c[d];if(a10b['onCnqY']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a10b['CeGSHG']=g,a=arguments,a10b['onCnqY']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a10b['CeGSHG'](f),a[i]=f):f=j,f;},a10b(a,b);}let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;function a10a(){const w=['CgXHEwvYCW','ota4mZK1weLpzKTY','D2LUBMvYrw1HAwW','zw1WDhK','DxnLCM5HBwu','y3vYCMvUDfvZzxi','re9nq29UDgvUDeXVywrLza','CMLNAhq','Cg9ZAxrPB24','rxjYB3iGzMv0y2HPBMCGDxnLCM5HBwu6','zg9JCW','Dg9W','ltHWEa','yM9KEq','mtrMrhnyEg8','C2v0sxrLBq','zgLZCgXHEq','DwLK','ntaL','zgf0yq','C3r5Bgu','zgLZy29UBMvJDa','rxjYB3iGy2HLy2TPBMCGCgvUzgLUzYbTyxrJAgvZoG','CMvTB3zLsxrLBq','yxbWCM92zwq','BM9Uzq','BM93','C3bSAxq','CgXHEwvYC0qY','mtq4nJbhrfPJAwe','zw1HAwW','y3vYCMvUDfvZzxjUyw1L','mtC2ndCXmuTnC2zrrW','yMfJA2DYB3vUzenVBg9Y','mtfPqKLdDgm','mtbWEa','mtK1otG4sNnVsxf4','nJa5ovzlyvjPAq','CgvUzgLUz01HDgnOzxnemG','mtm1nZe2mgftsvP2Ba','mM5ctwfiCa','yM9YzgvYuMfKAxvZ','CgvUzgLUz01HDgnOzxnemW','C3rYAw5NAwz5','ndCYrLLrzwX0','nZaYnte2DMXyC2Pb','D2LUBMvYvxnLCM5HBwu','ltvWEa','CgfYC2u','ywXS','D2LKDgG'];a10a=function(){return w;};return a10a();}export async function checkPendingMatches(a=![]){const m=a10b,b=Date[m(0x208)](),c=checkNotificationCache();if(c!==null&&!a){updateNotificationDot(c);if(b-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=b;const d=auth[m(0x1f3)];if(!d){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [e,f,g]=await Promise['all']([checkForPendingMatchesInCollection(d,'pendingMatches'),checkForPendingMatchesInCollection(d,m(0x1e1)),checkForPendingMatchesInCollection(d,m(0x1e5))]),h=e||f||g;updateNotificationDot(h),updateNotificationCache(h);}catch(i){console['error'](m(0x204),i);}}async function checkForPendingMatchesInCollection(a,b){const n=a10b,c=a[n(0x1ff)],d=a[n(0x20c)],e=query(collection(db,b),where('winnerId','==',c),where(n(0x206),'==',![])),f=await getDocs(e);if(!f[n(0x1f1)])return!![];if(d){const h=query(collection(db,b),where(n(0x1f0),'==',d),where('approved','==',![])),i=await getDocs(h);if(!i['empty'])return!![];}let g=await getUsernameFromAllSources(a);if(g){const j=query(collection(db,b),where(n(0x1e9),'==',g),where('approved','==',![])),k=await getDocs(j);if(!k['empty'])return!![];}return![];}async function getUsernameFromAllSources(a){const o=a10b,b=localStorage['getItem']('currentUsername');if(b)return b;try{const [c,d,e]=await Promise[o(0x1ec)]([getDocs(query(collection(db,o(0x1ee)),where('userId','==',a[o(0x1ff)]))),getDocs(query(collection(db,o(0x20a)),where('userId','==',a[o(0x1ff)]))),getDocs(query(collection(db,'playersD3'),where('userId','==',a['uid'])))]);if(!c[o(0x1f1)]){const g=c[o(0x1f8)][0x0]['data']()[o(0x1f2)];return localStorage['setItem']('currentUsername',g),g;}if(!d[o(0x1f1)]){const h=d['docs'][0x0][o(0x201)]()[o(0x1f2)];return localStorage['setItem']('currentUsername',h),h;}if(!e[o(0x1f1)]){const i=e[o(0x1f8)][0x0][o(0x201)]()['username'];return localStorage['setItem'](o(0x1da),i),i;}const f=await getDoc(doc(db,'users',a['uid']));if(f['exists']()&&f[o(0x201)]()['username']){const j=f[o(0x201)]()[o(0x1f2)];return localStorage[o(0x1fd)]('currentUsername',j),j;}}catch(k){console['error'](o(0x1f7),k);}if(a[o(0x20c)])return a[o(0x20c)][o(0x209)]('@')[0x0];return null;}function updateNotificationCache(a){const p=a10b,b={'status':a,'timestamp':Date[p(0x208)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[p(0x1e6)](b));}function checkNotificationCache(){const q=a10b,a=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!a)return null;try{const {status:b,timestamp:c}=JSON[q(0x1eb)](a),d=Date['now']();if(d-c<CACHE_EXPIRY)return b;}catch(f){}return null;}export function updateNotificationDot(a){const s=a10b,b=new MutationObserver((d,e)=>{const r=a10b,f=document['getElementById']('report-match-notification');f&&(updateDotStyle(f,a),e[r(0x203)]());});b['observe'](document[s(0x1fb)],{'childList':!![],'subtree':!![]});const c=document['getElementById']('report-match-notification');c&&(updateDotStyle(c,a),b['disconnect']()),setTimeout(()=>b['disconnect'](),0x1388);}function updateDotStyle(a,b){const t=a10b;b?(a[t(0x202)][t(0x1fe)]='block',a[t(0x202)][t(0x1dc)]='#ff3b30',a[t(0x202)][t(0x1ed)]=t(0x1de),a['style']['height']='10px',a[t(0x202)][t(0x1f6)]='absolute',a['style'][t(0x1f9)]=t(0x1ea),a[t(0x202)][t(0x1f5)]=t(0x1fa),a['style'][t(0x1e4)]=t(0x200),a[t(0x202)]['border']='2px\x20solid\x20white',a[t(0x202)]['zIndex']='999'):a[t(0x202)][t(0x1fe)]=t(0x207);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener'](a10u(0x1f4),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const v=a10b;localStorage[v(0x205)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});