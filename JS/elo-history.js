const a14_0x117e29=(function(){let _0xa8ef2=!![];return function(_0x554b7b,_0x5433e8){const _0x48461a=_0xa8ef2?function(){if(_0x5433e8){const _0x25d639=_0x5433e8['apply'](_0x554b7b,arguments);return _0x5433e8=null,_0x25d639;}}:function(){};return _0xa8ef2=![],_0x48461a;};}()),a14_0x95062f=a14_0x117e29(this,function(){const _0x3fbffe=a14_0x1a40,_0x2dedc2=function(){const _0x1f072e=a14_0x1a40;let _0x4d3b7e;try{_0x4d3b7e=Function('return\x20(function()\x20'+_0x1f072e(0xda)+');')();}catch(_0x3cc8b7){_0x4d3b7e=window;}return _0x4d3b7e;},_0x531650=_0x2dedc2(),_0xfa9062=_0x531650[_0x3fbffe(0xd3)]=_0x531650['console']||{},_0x5decd3=['log',_0x3fbffe(0xe1),_0x3fbffe(0xd7),_0x3fbffe(0xd5),_0x3fbffe(0xe0),'table',_0x3fbffe(0xd2)];for(let _0x574d34=0x0;_0x574d34<_0x5decd3['length'];_0x574d34++){const _0x447990=a14_0x117e29['constructor'][_0x3fbffe(0xd1)][_0x3fbffe(0xde)](a14_0x117e29),_0x44192e=_0x5decd3[_0x574d34],_0x30dbe8=_0xfa9062[_0x44192e]||_0x447990;_0x447990['__proto__']=a14_0x117e29['bind'](a14_0x117e29),_0x447990[_0x3fbffe(0xd0)]=_0x30dbe8['toString']['bind'](_0x30dbe8),_0xfa9062[_0x44192e]=_0x447990;}});a14_0x95062f();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];function a14_0x1a40(_0x3f5562,_0x1da4ed){const _0x95062f=a14_0x3e82();return a14_0x1a40=function(_0x117e29,_0x3b373b){_0x117e29=_0x117e29-0xcc;let _0x3e822b=_0x95062f[_0x117e29];return _0x3e822b;},a14_0x1a40(_0x3f5562,_0x1da4ed);}async function getUsernameById(_0x57f25d){const _0x23061f=a14_0x1a40;try{if(!_0x57f25d)return'Unknown\x20Player';const _0x14a82c=await getDoc(doc(db,_0x23061f(0xd6),_0x57f25d));return _0x14a82c['exists']()?_0x14a82c[_0x23061f(0xce)]()['username']:'Unknown\x20Player';}catch(_0x3fc702){return console[_0x23061f(0xd5)]('Error\x20fetching\x20username:',_0x3fc702),_0x23061f(0xd8);}}export async function recordEloChange({playerId:_0x26e3a8,previousElo:_0x178bee,newElo:_0x1b1fef,opponentId:_0x26e023,matchResult:_0x402d95,previousPosition:_0x301163,newPosition:_0x1d362e,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x23aa7d}){const _0x538198=a14_0x1a40;try{const _0x574161=doc(collection(db,'eloHistory'));let _0x540d56='match';if(isPromotion)_0x540d56=_0x538198(0xcf);if(isDemotion)_0x540d56='demotion';let _0x317dee='Unranked';if(_0x1b1fef>=0x834)_0x317dee='Emerald';else{if(_0x1b1fef>=0x708)_0x317dee=_0x538198(0xd9);else{if(_0x1b1fef>=0x640)_0x317dee='Silver';else{if(_0x1b1fef>=0x578)_0x317dee='Bronze';}}}return await setDoc(_0x574161,{'type':_0x540d56,'player':_0x26e3a8,'opponent':_0x26e023,'previousElo':_0x178bee,'newElo':_0x1b1fef,'change':_0x1b1fef-_0x178bee,'matchResult':_0x402d95,'previousPosition':_0x301163,'newPosition':_0x1d362e,'rankAchieved':_0x317dee,'timestamp':_0x23aa7d}),console[_0x538198(0xdf)](_0x538198(0xdb)+_0x26e3a8),!![];}catch(_0x344752){console['error']('Error\x20recording\x20ELO\x20history:',_0x344752);throw _0x344752;}}export async function getEloHistory(){const _0x51cf49=a14_0x1a40;try{const _0x344945=collection(db,'eloHistory'),_0x5b1c62=query(_0x344945,orderBy(_0x51cf49(0xcd),'desc')),_0x35108a=await getDocs(_0x5b1c62),_0x2e3a1b=_0x35108a[_0x51cf49(0xcc)]['map'](async _0x3d27fd=>{const _0x5b04d6=_0x51cf49,_0x4cd2c7=_0x3d27fd['data'](),[_0x1ddee6,_0x1f4531]=await Promise['all']([getUsernameById(_0x4cd2c7['player']),getUsernameById(_0x4cd2c7[_0x5b04d6(0xd4)])]);return{..._0x4cd2c7,'playerUsername':_0x1ddee6,'opponentUsername':_0x1f4531,'change':_0x4cd2c7['newElo']-_0x4cd2c7[_0x5b04d6(0xdd)],'timestamp':_0x4cd2c7['timestamp']};}),_0x137cfb=await Promise[_0x51cf49(0xe2)](_0x2e3a1b);return{'entries':_0x137cfb};}catch(_0x41affb){console['error'](_0x51cf49(0xdc),_0x41affb);throw _0x41affb;}}function a14_0x3e82(){const _0x19f300=['docs','timestamp','data','promotion','toString','prototype','trace','console','opponent','error','players','info','Unknown\x20Player','Gold','{}.constructor(\x22return\x20this\x22)(\x20)','ELO\x20history\x20recorded\x20for\x20','Error\x20fetching\x20ELO\x20history:','previousElo','bind','log','exception','warn','all'];a14_0x3e82=function(){return _0x19f300;};return a14_0x3e82();}export function resetPagination(){lastVisible=null;}