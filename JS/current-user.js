const a12_0x26310a=a12_0x1892;(function(_0x3af2ec,_0xc7833b){const _0xaf9df4=a12_0x1892,_0x104427=_0x3af2ec();while(!![]){try{const _0x51860b=-parseInt(_0xaf9df4(0xe6))/0x1+-parseInt(_0xaf9df4(0x11e))/0x2*(-parseInt(_0xaf9df4(0xfd))/0x3)+-parseInt(_0xaf9df4(0xcf))/0x4+-parseInt(_0xaf9df4(0x119))/0x5*(-parseInt(_0xaf9df4(0x129))/0x6)+-parseInt(_0xaf9df4(0x125))/0x7*(-parseInt(_0xaf9df4(0xf2))/0x8)+-parseInt(_0xaf9df4(0xda))/0x9+parseInt(_0xaf9df4(0x112))/0xa*(parseInt(_0xaf9df4(0x121))/0xb);if(_0x51860b===_0xc7833b)break;else _0x104427['push'](_0x104427['shift']());}catch(_0x261349){_0x104427['push'](_0x104427['shift']());}}}(a12_0x3c84,0xac515));function a12_0x3c84(){const _0x1c6156=['No\x20admin\x20roles\x20found\x20for\x20user','data','pending','none','council','nonParticipants','(((.+)+)+)+$','warn','a[href]','playersCTF','console','empty','email','lastChecked','error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22nav-dropdown\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22nav-username\x22>','2751536dpTQaK','map','__proto__','slice','{}.constructor(\x22return\x20this\x22)(\x20)','innerHTML','catch','getElementById','pendingCount','split','checkInterval','5722119gXECgD','toLowerCase','\x20by\x20email:','constructor','then','length','\x20(Admin)','all','creative\x20lead','User','\x22>Profile</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./inbox.html\x22\x20class=\x22nav-notification\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Inbox\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22inbox-notification\x22\x20class=\x22notification-dot\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22members.html\x22>Members</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./redeem.html\x22><i\x20class=\x22fas\x20fa-gift\x22></i>\x20Redeem</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20id=\x22logout-link\x22>Sign\x20Out</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','playersDuos','504073IqIEXx','addEventListener','gameInvitations','return\x20(function()\x20','<a\x20href=\x22login.html\x22\x20class=\x22login-link\x22>Login</a>','role','currentUser','inline-block','hasCheckedCollections','querySelectorAll','style','table','2678480ckDuDA','info','visibilitychange','Error\x20in\x20full\x20auth\x20update:','Error\x20checking\x20','</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22nav-dropdown-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','\x20by\x20UID:','Error\x20in\x20checkAdminRoles:','logout-link','filter','isAdmin','3mVJBwi','forEach','.admin-only','now','\x20in\x20','click','exception','closest','admin@ladder.com','roleName','trace','signOut','target','docs','owner','uid','join','prototype','inbox-notification','exists','includes','10XPqdJG','hidden','admin','playersD3','Found\x20admin\x20role:\x20','apply','toUpperCase','1061530VbTjOU','display','userProfiles','username','status','1527506usdsqm','Checking\x20roles\x20for\x20user:\x20','Found\x20user\x20in\x20','2400882pYVnbw','bind','log','toString','28RTDcIi','players','charAt','search','6XLFeOm','textContent'];a12_0x3c84=function(){return _0x1c6156;};return a12_0x3c84();}const a12_0x3627e6=(function(){let _0x40899e=!![];return function(_0x520e6b,_0x162526){const _0x25ffde=_0x40899e?function(){const _0x12173b=a12_0x1892;if(_0x162526){const _0x3e9faf=_0x162526[_0x12173b(0x117)](_0x520e6b,arguments);return _0x162526=null,_0x3e9faf;}}:function(){};return _0x40899e=![],_0x25ffde;};}()),a12_0xaaa9f5=a12_0x3627e6(this,function(){const _0xd421b7=a12_0x1892;return a12_0xaaa9f5[_0xd421b7(0x124)]()[_0xd421b7(0x128)](_0xd421b7(0xc5))[_0xd421b7(0x124)]()[_0xd421b7(0xdd)](a12_0xaaa9f5)['search'](_0xd421b7(0xc5));});a12_0xaaa9f5();const a12_0x51fb7a=(function(){let _0x51ab57=!![];return function(_0x205392,_0x1ff7c5){const _0x3d2ef8=_0x51ab57?function(){const _0x102b51=a12_0x1892;if(_0x1ff7c5){const _0x27aec7=_0x1ff7c5[_0x102b51(0x117)](_0x205392,arguments);return _0x1ff7c5=null,_0x27aec7;}}:function(){};return _0x51ab57=![],_0x3d2ef8;};}()),a12_0xefca9a=a12_0x51fb7a(this,function(){const _0x56134e=a12_0x1892;let _0x34397f;try{const _0x57e310=Function(_0x56134e(0xe9)+_0x56134e(0xd3)+');');_0x34397f=_0x57e310();}catch(_0x529d52){_0x34397f=window;}const _0x2fad46=_0x34397f[_0x56134e(0xc9)]=_0x34397f['console']||{},_0x39873b=['log',_0x56134e(0xc6),_0x56134e(0xf3),_0x56134e(0xcd),_0x56134e(0x103),_0x56134e(0xf1),_0x56134e(0x107)];for(let _0x4021eb=0x0;_0x4021eb<_0x39873b[_0x56134e(0xdf)];_0x4021eb++){const _0x7016f1=a12_0x51fb7a[_0x56134e(0xdd)][_0x56134e(0x10e)][_0x56134e(0x122)](a12_0x51fb7a),_0x837ea0=_0x39873b[_0x4021eb],_0x5b1d74=_0x2fad46[_0x837ea0]||_0x7016f1;_0x7016f1[_0x56134e(0xd1)]=a12_0x51fb7a[_0x56134e(0x122)](a12_0x51fb7a),_0x7016f1[_0x56134e(0x124)]=_0x5b1d74[_0x56134e(0x124)][_0x56134e(0x122)](_0x5b1d74),_0x2fad46[_0x837ea0]=_0x7016f1;}});a12_0xefca9a();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{doc,getDoc,collection,query,where,getDocs,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a12_0x1892(_0x358a8b,_0x4a469c){const _0x1ef095=a12_0x3c84();return a12_0x1892=function(_0xefca9a,_0x51fb7a){_0xefca9a=_0xefca9a-0xc4;let _0x2d770b=_0x1ef095[_0xefca9a];return _0x2d770b;},a12_0x1892(_0x358a8b,_0x4a469c);}import{isAdmin}from'./admin-check.js';const ADMIN_EMAILS=[a12_0x26310a(0x105),'Brian2af@outlook.com'],userCache={'uid':null,'username':null,'isAdmin':![],'hasCheckedCollections':![],'lastChecked':0x0,'role':null},invitationCache={'lastCheck':0x0,'pendingCount':0x0,'checkInterval':0x493e0};function updateInboxNotification(_0x1419d5){const _0x445450=a12_0x26310a,_0x1c759c=document[_0x445450(0xd6)](_0x445450(0x10f));_0x1c759c&&(_0x1419d5>0x0?(_0x1c759c[_0x445450(0xf0)][_0x445450(0x11a)]=_0x445450(0xed),_0x1c759c[_0x445450(0x12a)]=_0x1419d5>0x9?'9+':_0x1419d5):_0x1c759c[_0x445450(0xf0)][_0x445450(0x11a)]=_0x445450(0x12e));}async function checkPendingInvitationsForCurrentUser(_0x1454d6){const _0x378dbd=a12_0x26310a;try{const _0x19432b=Date[_0x378dbd(0x100)]();if(_0x19432b-invitationCache['lastCheck']<invitationCache[_0x378dbd(0xd9)])return updateInboxNotification(invitationCache[_0x378dbd(0xd7)]),invitationCache['pendingCount'];invitationCache['lastCheck']=_0x19432b;const _0x216506=collection(db,_0x378dbd(0xe8)),_0x235926=query(_0x216506,where('toUserId','==',_0x1454d6),where(_0x378dbd(0x11d),'==',_0x378dbd(0x12d)),limit(0x5)),_0x4ed5e7=await getDocs(_0x235926),_0x54080c=_0x4ed5e7['size'];return invitationCache[_0x378dbd(0xd7)]=_0x54080c,updateInboxNotification(_0x54080c),_0x54080c;}catch(_0x39cd7c){return console[_0x378dbd(0xc6)]('Could\x20not\x20check\x20pending\x20invitations\x20for\x20current\x20user:',_0x39cd7c),0x0;}}function updateAuthSectionImmediate(_0xff4b0,_0x537a01=![]){const _0x146bc3=a12_0x26310a,_0x554e2e=document[_0x146bc3(0xd6)]('auth-section');if(!_0x554e2e)return;if(_0xff4b0&&_0x537a01)document[_0x146bc3(0xef)](_0x146bc3(0xff))['forEach'](_0x5e6ed2=>{const _0x2dcbd5=_0x146bc3;_0x5e6ed2[_0x2dcbd5(0xf0)][_0x2dcbd5(0x11a)]='block';});else!_0xff4b0&&document['querySelectorAll'](_0x146bc3(0xff))[_0x146bc3(0xfe)](_0x3aa92d=>{const _0x1d8d77=_0x146bc3;_0x3aa92d['style'][_0x1d8d77(0x11a)]=_0x1d8d77(0x12e);});if(_0xff4b0){const _0x768ed1=userCache['username']||(_0xff4b0[_0x146bc3(0xcb)]?_0xff4b0[_0x146bc3(0xcb)]['split']('@')[0x0]:_0x146bc3(0xe3)),_0xe5b971=userCache[_0x146bc3(0xeb)]?'\x20('+userCache['role']+')':_0x537a01?_0x146bc3(0xe0):'';_0x554e2e[_0x146bc3(0xd4)]=_0x146bc3(0xce)+_0x768ed1+_0xe5b971+_0x146bc3(0xf7)+encodeURIComponent(_0x768ed1)+_0x146bc3(0xe4);const _0x2ada35=document['getElementById'](_0x146bc3(0xfa));_0x2ada35&&_0x2ada35[_0x146bc3(0xe7)](_0x146bc3(0x102),_0xd1d0a0=>{const _0x131fed=_0x146bc3;_0xd1d0a0['preventDefault']();const _0x553e79=getAuth();updateAuthSectionImmediate(null),_0x553e79[_0x131fed(0x108)]()['catch'](_0x232333=>{const _0x4d0873=_0x131fed;console[_0x4d0873(0xcd)]('Error\x20signing\x20out:',_0x232333);});}),_0xff4b0['uid']&&setTimeout(()=>{checkPendingInvitationsForCurrentUser(_0xff4b0['uid']);},0x3e8);}else _0x554e2e[_0x146bc3(0xd4)]=_0x146bc3(0xea);}async function checkAdminRoles(_0x5270d8){const _0x2c34f3=a12_0x26310a;if(!_0x5270d8||!_0x5270d8[_0x2c34f3(0xcb)])return{'isAdmin':![],'role':null};try{console[_0x2c34f3(0x123)](_0x2c34f3(0x11f)+_0x5270d8[_0x2c34f3(0xcb)]);const _0x25b973=[_0x2c34f3(0x126),'playersD2',_0x2c34f3(0x115),_0x2c34f3(0xc4),_0x2c34f3(0x11b)],_0x23b68a=[_0x2c34f3(0x12f),_0x2c34f3(0xe2),_0x2c34f3(0x10b),_0x2c34f3(0x114)];for(const _0x5d48db of _0x25b973){try{const _0xeae24f=doc(db,_0x5d48db,_0x5270d8[_0x2c34f3(0x10c)]),_0x18aec7=await getDoc(_0xeae24f);if(_0x18aec7[_0x2c34f3(0x110)]()){const _0x5bfa42=_0x18aec7['data']();console['log'](_0x2c34f3(0x120)+_0x5d48db+_0x2c34f3(0xf8),_0x5bfa42);let _0x49f338=(_0x5bfa42[_0x2c34f3(0x106)]||_0x5bfa42[_0x2c34f3(0xeb)]||'')['toLowerCase'](),_0x1adc78=_0x5bfa42[_0x2c34f3(0x106)]||_0x5bfa42['role']||'';if(_0x49f338&&_0x23b68a[_0x2c34f3(0x111)](_0x49f338)){console[_0x2c34f3(0x123)](_0x2c34f3(0x116)+_0x49f338+_0x2c34f3(0x101)+_0x5d48db);const _0x30cf01=_0x1adc78[_0x2c34f3(0xd8)]('\x20')[_0x2c34f3(0xd0)](_0x1d9376=>_0x1d9376[_0x2c34f3(0x127)](0x0)[_0x2c34f3(0x118)]()+_0x1d9376['slice'](0x1)['toLowerCase']())['join']('\x20');return{'isAdmin':!![],'role':_0x30cf01};}}}catch(_0x2b2550){console[_0x2c34f3(0xcd)](_0x2c34f3(0xf6)+_0x5d48db+'\x20by\x20UID:',_0x2b2550);}}for(const _0xe3c910 of _0x25b973){try{const _0x38a555=collection(db,_0xe3c910);let _0x4e4590=query(_0x38a555,where(_0x2c34f3(0xcb),'==',_0x5270d8[_0x2c34f3(0xcb)])),_0x45f57d=await getDocs(_0x4e4590);_0x45f57d[_0x2c34f3(0xca)]&&(_0x4e4590=query(_0x38a555,where(_0x2c34f3(0xcb),'==',_0x5270d8[_0x2c34f3(0xcb)][_0x2c34f3(0xdb)]())),_0x45f57d=await getDocs(_0x4e4590));if(!_0x45f57d['empty']){const _0x33595f=_0x45f57d[_0x2c34f3(0x10a)][0x0]['data']();console[_0x2c34f3(0x123)]('Found\x20user\x20in\x20'+_0xe3c910+_0x2c34f3(0xdc),_0x33595f);let _0x11f3a6=(_0x33595f[_0x2c34f3(0x106)]||_0x33595f['role']||'')['toLowerCase'](),_0xffccd1=_0x33595f[_0x2c34f3(0x106)]||_0x33595f[_0x2c34f3(0xeb)]||'';if(_0x11f3a6&&_0x23b68a[_0x2c34f3(0x111)](_0x11f3a6)){console[_0x2c34f3(0x123)](_0x2c34f3(0x116)+_0x11f3a6+_0x2c34f3(0x101)+_0xe3c910);const _0x59e537=_0xffccd1[_0x2c34f3(0xd8)]('\x20')[_0x2c34f3(0xd0)](_0x2f3aed=>_0x2f3aed[_0x2c34f3(0x127)](0x0)[_0x2c34f3(0x118)]()+_0x2f3aed[_0x2c34f3(0xd2)](0x1)[_0x2c34f3(0xdb)]())[_0x2c34f3(0x10d)]('\x20');return{'isAdmin':!![],'role':_0x59e537};}}}catch(_0x1e9546){console[_0x2c34f3(0xcd)]('Error\x20checking\x20'+_0xe3c910+'\x20by\x20email:',_0x1e9546);}}return console['log'](_0x2c34f3(0x12b)),{'isAdmin':![],'role':null};}catch(_0x273476){return console['error'](_0x2c34f3(0xf9),_0x273476),{'isAdmin':![],'role':null};}}async function updateAuthSection(_0x42ced0){const _0x127ad5=a12_0x26310a,_0x114da2=_0x42ced0&&isAdmin(_0x42ced0[_0x127ad5(0xcb)]);updateAuthSectionImmediate(_0x42ced0,_0x114da2);if(!_0x42ced0){userCache['uid']=null,userCache[_0x127ad5(0x11c)]=null,userCache['isAdmin']=![],userCache[_0x127ad5(0xee)]=![],userCache[_0x127ad5(0xeb)]=null;return;}const _0x545cb8=Date[_0x127ad5(0x100)]();if(_0x42ced0['uid']===userCache[_0x127ad5(0x10c)]&&userCache[_0x127ad5(0xee)]&&_0x545cb8-userCache[_0x127ad5(0xcc)]<0x493e0)return;try{userCache[_0x127ad5(0x10c)]=_0x42ced0[_0x127ad5(0x10c)],userCache[_0x127ad5(0xcc)]=_0x545cb8;const _0x582cbf=isAdmin(_0x42ced0[_0x127ad5(0xcb)]);userCache[_0x127ad5(0xfc)]=_0x582cbf;if(!_0x582cbf){const {isAdmin:_0x52ce4a,role:_0x28f1be}=await checkAdminRoles(_0x42ced0);userCache[_0x127ad5(0xfc)]=_0x52ce4a,userCache[_0x127ad5(0xeb)]=_0x28f1be,_0x52ce4a&&(document[_0x127ad5(0xef)](_0x127ad5(0xff))[_0x127ad5(0xfe)](_0x1c0eba=>{const _0x322b9d=_0x127ad5;_0x1c0eba[_0x322b9d(0xf0)][_0x322b9d(0x11a)]='block';}),updateAuthSectionImmediate(_0x42ced0,!![]));}const _0x41c74c=[_0x127ad5(0x126),'playersD2',_0x127ad5(0x115),_0x127ad5(0xe5),_0x127ad5(0xc8),_0x127ad5(0xc4),'userProfiles'],_0x45d6aa=_0x41c74c[_0x127ad5(0xd0)](_0x588331=>getDoc(doc(db,_0x588331,_0x42ced0['uid']))[_0x127ad5(0xde)](_0x6f707f=>_0x6f707f[_0x127ad5(0x110)]()?{'collection':_0x588331,'data':_0x6f707f[_0x127ad5(0x12c)]()}:null)[_0x127ad5(0xd5)](()=>null)),_0x3d9de0=await Promise[_0x127ad5(0xe1)](_0x45d6aa),_0x49a1dc=_0x3d9de0[_0x127ad5(0xfb)](_0x2fe5c9=>_0x2fe5c9!==null);let _0x2dde61=null;for(const _0x21024b of _0x49a1dc){if(_0x21024b[_0x127ad5(0x12c)][_0x127ad5(0x11c)]){_0x2dde61=_0x21024b[_0x127ad5(0x12c)][_0x127ad5(0x11c)];break;}}userCache[_0x127ad5(0x11c)]=_0x2dde61||(_0x42ced0[_0x127ad5(0xcb)]?_0x42ced0[_0x127ad5(0xcb)]['split']('@')[0x0]:_0x127ad5(0xe3)),userCache[_0x127ad5(0xee)]=!![],updateAuthSectionImmediate(_0x42ced0,userCache[_0x127ad5(0xfc)]),setTimeout(()=>{const _0x43f7cf=_0x127ad5;checkPendingInvitationsForCurrentUser(_0x42ced0[_0x43f7cf(0x10c)]);},0x1f4);}catch(_0xfae00c){console[_0x127ad5(0xcd)](_0x127ad5(0xf5),_0xfae00c);}}document[a12_0x26310a(0xe7)]('DOMContentLoaded',()=>{const _0x335bce=a12_0x26310a,_0x3cd26d=getAuth();onAuthStateChanged(_0x3cd26d,async _0x4214de=>{const _0x2e15d8=a12_0x1892;await updateAuthSection(_0x4214de),_0x4214de&&checkPendingInvitationsForCurrentUser(_0x4214de[_0x2e15d8(0x10c)]);}),document[_0x335bce(0xe7)](_0x335bce(0xf4),()=>{const _0x45ccd9=_0x335bce;!document[_0x45ccd9(0x113)]&&_0x3cd26d[_0x45ccd9(0xec)]&&checkPendingInvitationsForCurrentUser(_0x3cd26d[_0x45ccd9(0xec)]['uid']);}),document[_0x335bce(0xe7)](_0x335bce(0x102),_0x2f18bd=>{const _0x593cbe=_0x335bce;_0x2f18bd[_0x593cbe(0x109)][_0x593cbe(0x104)](_0x593cbe(0xc7))&&_0x3cd26d[_0x593cbe(0xec)]&&checkPendingInvitationsForCurrentUser(_0x3cd26d['currentUser'][_0x593cbe(0x10c)]);});});export{updateAuthSection};