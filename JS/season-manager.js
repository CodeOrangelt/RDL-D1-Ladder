function a52_0x5f49(_0x17ee7e,_0xa54e81){const _0x5943a7=a52_0x2295();return a52_0x5f49=function(_0x120144,_0x2ed9ea){_0x120144=_0x120144-0x13c;let _0x2295b1=_0x5943a7[_0x120144];return _0x2295b1;},a52_0x5f49(_0x17ee7e,_0xa54e81);}const a52_0x120144=(function(){let _0x177115=!![];return function(_0xaf2df0,_0x5304b9){const _0x1ee90a=_0x177115?function(){const _0x33c0ee=a52_0x5f49;if(_0x5304b9){const _0x2907f8=_0x5304b9[_0x33c0ee(0x142)](_0xaf2df0,arguments);return _0x5304b9=null,_0x2907f8;}}:function(){};return _0x177115=![],_0x1ee90a;};}()),a52_0x5943a7=a52_0x120144(this,function(){const _0x237b85=a52_0x5f49;let _0x5891b9;try{const _0xf8dbfd=Function(_0x237b85(0x143)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5891b9=_0xf8dbfd();}catch(_0x30d877){_0x5891b9=window;}const _0x13f1b6=_0x5891b9[_0x237b85(0x13e)]=_0x5891b9[_0x237b85(0x13e)]||{},_0x16d0a6=['log','warn','info','error',_0x237b85(0x148),_0x237b85(0x146),'trace'];for(let _0x446e67=0x0;_0x446e67<_0x16d0a6[_0x237b85(0x145)];_0x446e67++){const _0x160a65=a52_0x120144['constructor'][_0x237b85(0x13c)]['bind'](a52_0x120144),_0x4019c6=_0x16d0a6[_0x446e67],_0x20ab6e=_0x13f1b6[_0x4019c6]||_0x160a65;_0x160a65['__proto__']=a52_0x120144['bind'](a52_0x120144),_0x160a65['toString']=_0x20ab6e['toString']['bind'](_0x20ab6e),_0x13f1b6[_0x4019c6]=_0x160a65;}});a52_0x5943a7();function a52_0x2295(){const _0x4ca755=['prototype','reset-confirmation','console','Error\x20resetting\x20season:','reset-password','none','apply','return\x20(function()\x20','position','length','table','getElementById','exception','\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.','reload','click','currentUser','display','Season\x20'];a52_0x2295=function(){return _0x4ca755;};return a52_0x2295();}import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){this['setupEventListeners']();}['setupEventListeners'](){const _0xb45827=a52_0x5f49,_0x346d58=document[_0xb45827(0x147)]('reset-season'),_0x32df11=document['getElementById']('confirm-reset'),_0x5e74a6=document[_0xb45827(0x147)]('cancel-reset');_0x346d58?.['addEventListener']('click',()=>{const _0x2b8964=_0xb45827;document['getElementById'](_0x2b8964(0x13d))['style'][_0x2b8964(0x14d)]='block';}),_0x32df11?.['addEventListener'](_0xb45827(0x14b),async()=>{const _0x1acf30=_0xb45827,_0x4a85d8=document[_0x1acf30(0x147)](_0x1acf30(0x140)),_0x44d6c6=auth[_0x1acf30(0x14c)];if(!_0x44d6c6||!_0x4a85d8['value']){alert('Please\x20enter\x20your\x20password');return;}try{const _0x10fde9=EmailAuthProvider['credential'](_0x44d6c6['email'],_0x4a85d8['value']);await reauthenticateWithCredential(_0x44d6c6,_0x10fde9),await this['resetSeason'](),_0x4a85d8['value']='',document[_0x1acf30(0x147)]('reset-confirmation')['style'][_0x1acf30(0x14d)]=_0x1acf30(0x141);}catch(_0x190ee6){alert('Invalid\x20password\x20or\x20authentication\x20failed'),console['error']('Authentication\x20error:',_0x190ee6);}}),_0x5e74a6?.['addEventListener']('click',()=>{const _0x4d1d9c=_0xb45827,_0x1eb124=document[_0x4d1d9c(0x147)]('reset-password');_0x1eb124['value']='',document['getElementById']('reset-confirmation')['style']['display']='none';});}async['resetSeason'](){const _0x56aedc=a52_0x5f49;try{const _0x57e8fd=await getDoc(doc(db,'metadata','seasonCount'));let _0x3288b8=0x1;_0x57e8fd['exists']()&&(_0x3288b8=_0x57e8fd['data']()['count']+0x1);const _0x4abe5e=await getDocs(collection(db,'players')),_0x55fc01={'players':[],'date':new Date(),'seasonNumber':_0x3288b8};for(const _0x2fe324 of _0x4abe5e['docs']){const _0x2892e5=_0x2fe324['data']();_0x55fc01['players']['push']({'username':_0x2892e5['username'],'position':_0x2892e5[_0x56aedc(0x144)],'eloRating':_0x2892e5['eloRating']||0x4b0}),await setDoc(doc(db,'players',_0x2fe324['id']),{..._0x2892e5,'eloRating':0x4b0,'position':_0x2892e5[_0x56aedc(0x144)]});}await setDoc(doc(db,'seasons','season'+_0x3288b8),_0x55fc01),await setDoc(doc(db,'metadata','seasonCount'),{'count':_0x3288b8}),alert(_0x56aedc(0x14e)+_0x3288b8+_0x56aedc(0x149)),location[_0x56aedc(0x14a)]();}catch(_0x1ede88){console['error'](_0x56aedc(0x13f),_0x1ede88),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}export const seasonManager=new SeasonManager();