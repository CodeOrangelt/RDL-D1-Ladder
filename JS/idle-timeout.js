const a22_0x1f17e0=a22_0x2110;import a22_0x50ff66,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x3ac370=a22_0x2110;if(document['getElementById']('idle-overlay'))return;const _0x16fcc7=document[_0x3ac370(0x1e3)]('div');_0x16fcc7['id']=_0x3ac370(0x1f7),_0x16fcc7['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x4c557a=document['createElement'](_0x3ac370(0x1e2));_0x4c557a[_0x3ac370(0x1ec)][_0x3ac370(0x1ee)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x16a91b=document['createElement']('h2');_0x16a91b[_0x3ac370(0x1fb)]=_0x3ac370(0x1f8),_0x16a91b['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x3dc221=document['createElement']('p');_0x3dc221['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x3dc221['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x31af6d=document['createElement'](_0x3ac370(0x1e8));_0x31af6d['id']='resume-session-btn',_0x31af6d[_0x3ac370(0x1fb)]=_0x3ac370(0x1dd),_0x31af6d['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x31af6d['onmouseover']=function(){const _0x595138=_0x3ac370;this['style']['backgroundColor']=_0x595138(0x1e9);},_0x31af6d['onmouseout']=function(){const _0x5101ca=_0x3ac370;this[_0x5101ca(0x1ec)]['backgroundColor']='#50C878';},_0x4c557a['appendChild'](_0x16a91b),_0x4c557a['appendChild'](_0x3dc221),_0x4c557a[_0x3ac370(0x1dc)](_0x31af6d),_0x16fcc7['appendChild'](_0x4c557a),document['body']['appendChild'](_0x16fcc7),_0x31af6d[_0x3ac370(0x202)]('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x152863=a22_0x2110;if(document['getElementById']('network-error-overlay'))return;const _0x4d13c4=document['createElement']('div');_0x4d13c4['id']=_0x152863(0x1da),_0x4d13c4[_0x152863(0x1ec)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x58d33b=document['createElement']('div');_0x58d33b['style']['cssText']=_0x152863(0x1d8);const _0x5c8bd0=document['createElement']('h2');_0x5c8bd0['textContent']='Connection\x20Error',_0x5c8bd0['style'][_0x152863(0x1ee)]=_0x152863(0x1db);const _0x5a8582=document[_0x152863(0x1e3)]('p');_0x5a8582['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x5a8582['style']['cssText']=_0x152863(0x1ef);const _0x132ebc=document['createElement']('button');_0x132ebc['id']='retry-connection-btn',_0x132ebc[_0x152863(0x1fb)]='Retry\x20Connection',_0x132ebc['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x2c2fe3=document[_0x152863(0x1e3)]('button');_0x2c2fe3['id']='reload-page-btn',_0x2c2fe3[_0x152863(0x1fb)]=_0x152863(0x1d6),_0x2c2fe3['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x155003=document['createElement']('div');_0x155003[_0x152863(0x1ec)]['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x155003['appendChild'](_0x132ebc),_0x155003['appendChild'](_0x2c2fe3),_0x58d33b['appendChild'](_0x5c8bd0),_0x58d33b[_0x152863(0x1dc)](_0x5a8582),_0x58d33b['appendChild'](_0x155003),_0x4d13c4['appendChild'](_0x58d33b),document['body']['appendChild'](_0x4d13c4),_0x132ebc['addEventListener']('click',retryConnection),_0x2c2fe3['addEventListener'](_0x152863(0x1f6),()=>window['location']['reload']());}function a22_0x2110(_0x56036d,_0x58575f){const _0x1663e5=a22_0x18f1();return a22_0x2110=function(_0x388ee9,_0xfa69b9){_0x388ee9=_0x388ee9-0x1d6;let _0x18f115=_0x1663e5[_0x388ee9];return _0x18f115;},a22_0x2110(_0x56036d,_0x58575f);}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x3aacac=a22_0x2110;clearTimeout(idleTimer);const _0x2ec1d4=document['getElementById']('network-error-overlay');_0x2ec1d4&&(_0x2ec1d4['style']['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console['log'](_0x3aacac(0x1df)),a22_0x50ff66[_0x3aacac(0x1f4)]();}function retryConnection(){const _0x9df4bb=a22_0x2110;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0xafe472=document[_0x9df4bb(0x1e0)](_0x9df4bb(0x1ed));_0xafe472&&(_0xafe472['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x214cf6=document['getElementById']('retry-connection-btn');_0x214cf6&&(_0x214cf6['disabled']=!![],_0x214cf6['style'][_0x9df4bb(0x1d9)]='0.5',_0x214cf6['style']['cursor']='not-allowed');return;}const _0x6b7017=document['getElementById']('network-error-overlay');_0x6b7017&&(_0x6b7017['style']['display']=_0x9df4bb(0x1f2));window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0xc12e69}=window;if(_0xc12e69){const _0x2d3043=_0xc12e69['collection'](_0x9df4bb(0x1e5));_0xc12e69['getDocs'](_0x2d3043)['catch'](_0x55e0c3=>{const _0x257950=_0x9df4bb;console[_0x257950(0x1f3)]('Connection\x20test\x20failed:',_0x55e0c3),handleNetworkError();});}}catch(_0x3e527f){console['error']('Failed\x20to\x20test\x20connection:',_0x3e527f),handleNetworkError();}a22_0x50ff66['resumeAllListeners']();}function suspendSession(){const _0x44dffe=a22_0x2110;isSessionSuspended=!![];const _0x3afc08=document['getElementById']('idle-overlay');_0x3afc08&&(_0x3afc08['style'][_0x44dffe(0x1e1)]='flex'),console[_0x44dffe(0x1e6)]('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a22_0x50ff66['suspendAllListeners']();}function resumeSession(){const _0x2c347f=a22_0x2110;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x2ecef6=document['getElementById']('idle-overlay');_0x2ecef6&&(_0x2ecef6[_0x2c347f(0x1ec)]['display']=_0x2c347f(0x1f2)),console['log']('Session\x20resumed'),resetIdleTimer(),a22_0x50ff66['resumeAllListeners'](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console[_0x2c347f(0x1e6)]('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location'][_0x2c347f(0x1e4)]());}function initIdleTimeout(){const _0x42875d=a22_0x2110,_0x37d958=(function(){let _0x4dd259=!![];return function(_0x3e9b5b,_0x2213e5){const _0x4a9811=_0x4dd259?function(){if(_0x2213e5){const _0x4eb9e1=_0x2213e5['apply'](_0x3e9b5b,arguments);return _0x2213e5=null,_0x4eb9e1;}}:function(){};return _0x4dd259=![],_0x4a9811;};}()),_0x18f116=_0x37d958(this,function(){const _0x467c95=a22_0x2110;let _0x65d700;try{const _0x30ddbc=Function('return\x20(function()\x20'+_0x467c95(0x1fc)+');');_0x65d700=_0x30ddbc();}catch(_0xf7b8a4){_0x65d700=window;}const _0x3e4926=_0x65d700[_0x467c95(0x1fe)]=_0x65d700['console']||{},_0x43c2f2=['log','warn',_0x467c95(0x1fa),'error','exception',_0x467c95(0x1f9),'trace'];for(let _0x3a110c=0x0;_0x3a110c<_0x43c2f2[_0x467c95(0x201)];_0x3a110c++){const _0x5001ce=_0x37d958['constructor']['prototype']['bind'](_0x37d958),_0x2b1550=_0x43c2f2[_0x3a110c],_0x388514=_0x3e4926[_0x2b1550]||_0x5001ce;_0x5001ce['__proto__']=_0x37d958['bind'](_0x37d958),_0x5001ce['toString']=_0x388514['toString']['bind'](_0x388514),_0x3e4926[_0x2b1550]=_0x5001ce;}});_0x18f116(),createIdleOverlay();const _0x5841f2=['mousedown',_0x42875d(0x1f0),_0x42875d(0x1f1),_0x42875d(0x1d7),_0x42875d(0x1fd),'click'];_0x5841f2['forEach'](_0x316e0a=>{document['addEventListener'](_0x316e0a,()=>{const _0x1715ae=a22_0x2110;window[_0x1715ae(0x1de)]=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x34591b){const _0x95f34f=_0x42875d;_0x34591b[_0x95f34f(0x1f3)]&&(_0x34591b['error']['message']&&_0x34591b['error'][_0x95f34f(0x1ff)]['includes']('network')||_0x34591b[_0x95f34f(0x1f3)]['code']&&(_0x34591b['error']['code']==='unavailable'||_0x34591b[_0x95f34f(0x1f3)]['code']==='resource-exhausted'||_0x34591b['error'][_0x95f34f(0x1ea)]['includes']('network')))&&(handleNetworkError(),_0x34591b['preventDefault']());}),resetIdleTimer(),console[_0x42875d(0x1e6)]('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window[_0x42875d(0x1eb)]=function(){const _0x2dabf2=_0x42875d;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console[_0x2dabf2(0x1e6)]('Network\x20error:',window['RDL_NETWORK_ERROR']),console[_0x2dabf2(0x1e6)]('Active\x20listeners:',a22_0x50ff66[_0x2dabf2(0x1e7)]['size']),console['log']('Pending\x20operations:',a22_0x50ff66[_0x2dabf2(0x1f5)]['size']),console['log']('Blocked\x20operations:',a22_0x50ff66['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a22_0x50ff66['activeListeners']['keys']()),'pendingOperations':Array['from'](a22_0x50ff66[_0x2dabf2(0x1f5)]['keys']()),'blockedCount':a22_0x50ff66['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};function a22_0x18f1(){const _0x4c9ef4=['Reload\x20Page','scroll','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','opacity','network-error-overlay','color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','appendChild','Return\x20to\x20Website','RDL_LAST_ACTIVITY','Network\x20error\x20detected,\x20showing\x20error\x20overlay','querySelector','display','div','createElement','reload','system','log','activeListeners','button','#3da05f','code','checkFirebaseIdleStatus','style','#network-error-overlay\x20p','cssText','color:\x20#fff;\x20margin-bottom:\x2030px;','mousemove','keypress','none','error','suspendAllListeners','pendingOperations','click','idle-overlay','Session\x20Suspended\x20Due\x20to\x20Inactivity','table','info','textContent','{}.constructor(\x22return\x20this\x22)(\x20)','touchstart','console','message','readyState','length','addEventListener'];a22_0x18f1=function(){return _0x4c9ef4;};return a22_0x18f1();}document[a22_0x1f17e0(0x200)]==='loading'?document[a22_0x1f17e0(0x202)]('DOMContentLoaded',initIdleTimeout):initIdleTimeout();