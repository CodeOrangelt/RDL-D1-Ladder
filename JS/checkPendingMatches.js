const a8_0x5d76d4=a8_0x4cb2,a8_0x234e7f=(function(){let _0x221bae=!![];return function(_0x21c52b,_0x230aba){const _0x3f4f38=_0x221bae?function(){const _0x22399a=a8_0x4cb2;if(_0x230aba){const _0x1f719c=_0x230aba[_0x22399a(0xbf)](_0x21c52b,arguments);return _0x230aba=null,_0x1f719c;}}:function(){};return _0x221bae=![],_0x3f4f38;};}()),a8_0x5519b5=a8_0x234e7f(this,function(){const _0x26448b=a8_0x4cb2;let _0x4cf8dd;try{const _0x3c3400=Function('return\x20(function()\x20'+_0x26448b(0xbc)+');');_0x4cf8dd=_0x3c3400();}catch(_0x5d27d8){_0x4cf8dd=window;}const _0x91c70a=_0x4cf8dd['console']=_0x4cf8dd[_0x26448b(0xac)]||{},_0x47ca8d=[_0x26448b(0xa9),_0x26448b(0xaf),'info','error','exception',_0x26448b(0xc4),'trace'];for(let _0x567c26=0x0;_0x567c26<_0x47ca8d[_0x26448b(0xb9)];_0x567c26++){const _0x402198=a8_0x234e7f['constructor']['prototype']['bind'](a8_0x234e7f),_0x56289a=_0x47ca8d[_0x567c26],_0x51859f=_0x91c70a[_0x56289a]||_0x402198;_0x402198['__proto__']=a8_0x234e7f['bind'](a8_0x234e7f),_0x402198['toString']=_0x51859f['toString']['bind'](_0x51859f),_0x91c70a[_0x56289a]=_0x402198;}});a8_0x5519b5();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x58b1d3=![]){const _0x21e05f=Date['now'](),_0x123ecb=checkNotificationCache();if(_0x123ecb!==null&&!_0x58b1d3){updateNotificationDot(_0x123ecb);if(_0x21e05f-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x21e05f;const _0x5588f2=auth['currentUser'];if(!_0x5588f2){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x3ae66d,_0x2dcb9f,_0x21f04e]=await Promise['all']([checkForPendingMatchesInCollection(_0x5588f2,'pendingMatches'),checkForPendingMatchesInCollection(_0x5588f2,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x5588f2,'pendingMatchesD3')]),_0x461bd0=_0x3ae66d||_0x2dcb9f||_0x21f04e;updateNotificationDot(_0x461bd0),updateNotificationCache(_0x461bd0);}catch(_0x32d01e){console['error']('Error\x20checking\x20pending\x20matches:',_0x32d01e);}}async function checkForPendingMatchesInCollection(_0x5b8b3a,_0x9dfab0){const _0x95fc4c=a8_0x4cb2,_0x21a4f6=_0x5b8b3a['uid'],_0x4cd2c1=_0x5b8b3a[_0x95fc4c(0xb5)],_0x1da30f=query(collection(db,_0x9dfab0),where('winnerId','==',_0x21a4f6),where('approved','==',![])),_0x5b3278=await getDocs(_0x1da30f);if(!_0x5b3278['empty'])return!![];if(_0x4cd2c1){const _0x23b96b=query(collection(db,_0x9dfab0),where('winnerEmail','==',_0x4cd2c1),where(_0x95fc4c(0xad),'==',![])),_0x4b872e=await getDocs(_0x23b96b);if(!_0x4b872e[_0x95fc4c(0xaa)])return!![];}let _0x3d2438=await getUsernameFromAllSources(_0x5b8b3a);if(_0x3d2438){const _0x517587=query(collection(db,_0x9dfab0),where('winnerUsername','==',_0x3d2438),where('approved','==',![])),_0x41b35a=await getDocs(_0x517587);if(!_0x41b35a['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x419c67){const _0x428f9e=a8_0x4cb2,_0x3bebd3=localStorage['getItem']('currentUsername');if(_0x3bebd3)return _0x3bebd3;try{const [_0x9b418d,_0x1ce52a,_0x49cf35]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x419c67['uid']))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x419c67['uid']))),getDocs(query(collection(db,'playersD3'),where(_0x428f9e(0xae),'==',_0x419c67['uid'])))]);if(!_0x9b418d['empty']){const _0x3c4eae=_0x9b418d['docs'][0x0]['data']()[_0x428f9e(0xba)];return localStorage['setItem']('currentUsername',_0x3c4eae),_0x3c4eae;}if(!_0x1ce52a[_0x428f9e(0xaa)]){const _0x5edb46=_0x1ce52a['docs'][0x0]['data']()[_0x428f9e(0xba)];return localStorage['setItem'](_0x428f9e(0xb2),_0x5edb46),_0x5edb46;}if(!_0x49cf35[_0x428f9e(0xaa)]){const _0x4c0158=_0x49cf35['docs'][0x0]['data']()[_0x428f9e(0xba)];return localStorage['setItem']('currentUsername',_0x4c0158),_0x4c0158;}const _0x3e830c=await getDoc(doc(db,'users',_0x419c67['uid']));if(_0x3e830c['exists']()&&_0x3e830c['data']()[_0x428f9e(0xba)]){const _0xced653=_0x3e830c['data']()[_0x428f9e(0xba)];return localStorage['setItem'](_0x428f9e(0xb2),_0xced653),_0xced653;}}catch(_0x37abf7){console['error']('Error\x20fetching\x20username:',_0x37abf7);}if(_0x419c67[_0x428f9e(0xb5)])return _0x419c67['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0xb446b3){const _0x48bd6b=a8_0x4cb2,_0x1e2ee0={'status':_0xb446b3,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[_0x48bd6b(0xb8)](_0x1e2ee0));}function checkNotificationCache(){const _0x41cc7e=a8_0x4cb2,_0x2ff860=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x2ff860)return null;try{const {status:_0x5ade62,timestamp:_0x470623}=JSON[_0x41cc7e(0xb1)](_0x2ff860),_0x5cd82c=Date[_0x41cc7e(0xb0)]();if(_0x5cd82c-_0x470623<CACHE_EXPIRY)return _0x5ade62;}catch(_0x2287b1){}return null;}export function updateNotificationDot(_0x5aa186){const _0x1a494c=a8_0x4cb2,_0x15f1af=new MutationObserver((_0x5e0f3b,_0x113e95)=>{const _0x1ae22d=a8_0x4cb2,_0xa9eace=document['getElementById'](_0x1ae22d(0xc0));_0xa9eace&&(updateDotStyle(_0xa9eace,_0x5aa186),_0x113e95['disconnect']());});_0x15f1af['observe'](document[_0x1a494c(0xab)],{'childList':!![],'subtree':!![]});const _0x3ba0b3=document['getElementById'](_0x1a494c(0xc0));_0x3ba0b3&&(updateDotStyle(_0x3ba0b3,_0x5aa186),_0x15f1af['disconnect']()),setTimeout(()=>_0x15f1af[_0x1a494c(0xc3)](),0x1388);}function updateDotStyle(_0x254c41,_0x4bb7c3){const _0xafac8a=a8_0x4cb2;_0x4bb7c3?(_0x254c41[_0xafac8a(0xb4)][_0xafac8a(0xb7)]=_0xafac8a(0xbb),_0x254c41[_0xafac8a(0xb4)]['backgroundColor']=_0xafac8a(0xc1),_0x254c41[_0xafac8a(0xb4)]['width']=_0xafac8a(0xbe),_0x254c41['style']['height']=_0xafac8a(0xbe),_0x254c41['style']['position']='absolute',_0x254c41['style']['top']=_0xafac8a(0xb3),_0x254c41['style']['right']='-8px',_0x254c41['style']['borderRadius']='50%',_0x254c41['style']['border']=_0xafac8a(0xc5),_0x254c41[_0xafac8a(0xb4)]['zIndex']=_0xafac8a(0xbd)):_0x254c41['style']['display']='none';}function a8_0x16e0(){const _0x239c6b=['log','empty','body','console','approved','userId','warn','now','parse','currentUsername','-5px','style','email','addEventListener','display','stringify','length','username','block','{}.constructor(\x22return\x20this\x22)(\x20)','999','10px','apply','report-match-notification','#ff3b30','removeItem','disconnect','table','2px\x20solid\x20white'];a8_0x16e0=function(){return _0x239c6b;};return a8_0x16e0();}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}function a8_0x4cb2(_0x35a01a,_0x4e657e){const _0x5519b5=a8_0x16e0();return a8_0x4cb2=function(_0x234e7f,_0x1e65fd){_0x234e7f=_0x234e7f-0xa9;let _0x16e054=_0x5519b5[_0x234e7f];return _0x16e054;},a8_0x4cb2(_0x35a01a,_0x4e657e);}document[a8_0x5d76d4(0xb6)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x499c72=a8_0x4cb2;localStorage[_0x499c72(0xc2)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});