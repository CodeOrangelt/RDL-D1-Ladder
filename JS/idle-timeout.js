const a22_0x33d997=a22_0x2d16;import a22_0x14836c,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x130eaf=a22_0x2d16;if(document['getElementById']('idle-overlay'))return;const _0x14afab=document[_0x130eaf(0x183)]('div');_0x14afab['id']='idle-overlay',_0x14afab[_0x130eaf(0x18b)][_0x130eaf(0x187)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x305f40=document['createElement'](_0x130eaf(0x168));_0x305f40[_0x130eaf(0x18b)]['cssText']=_0x130eaf(0x189);const _0xcb4f07=document[_0x130eaf(0x183)]('h2');_0xcb4f07['textContent']=_0x130eaf(0x184),_0xcb4f07[_0x130eaf(0x18b)][_0x130eaf(0x187)]=_0x130eaf(0x16a);const _0xd66a9b=document['createElement']('p');_0xd66a9b['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0xd66a9b[_0x130eaf(0x18b)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x2ec0d3=document['createElement']('button');_0x2ec0d3['id']=_0x130eaf(0x18d),_0x2ec0d3['textContent']='Return\x20to\x20Website',_0x2ec0d3['style'][_0x130eaf(0x187)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x2ec0d3['onmouseover']=function(){const _0x5af657=_0x130eaf;this[_0x5af657(0x18b)]['backgroundColor']='#3da05f';},_0x2ec0d3['onmouseout']=function(){const _0x2b7b49=_0x130eaf;this['style'][_0x2b7b49(0x176)]='#50C878';},_0x305f40['appendChild'](_0xcb4f07),_0x305f40[_0x130eaf(0x188)](_0xd66a9b),_0x305f40['appendChild'](_0x2ec0d3),_0x14afab[_0x130eaf(0x188)](_0x305f40),document['body']['appendChild'](_0x14afab),_0x2ec0d3['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x15438f=a22_0x2d16;if(document['getElementById']('network-error-overlay'))return;const _0x5e6929=document['createElement']('div');_0x5e6929['id']='network-error-overlay',_0x5e6929['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x13568e=document['createElement']('div');_0x13568e['style'][_0x15438f(0x187)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x335701=document[_0x15438f(0x183)]('h2');_0x335701[_0x15438f(0x16d)]='Connection\x20Error',_0x335701['style'][_0x15438f(0x187)]=_0x15438f(0x172);const _0x131425=document[_0x15438f(0x183)]('p');_0x131425['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x131425[_0x15438f(0x18b)][_0x15438f(0x187)]=_0x15438f(0x181);const _0x4f76c8=document['createElement']('button');_0x4f76c8['id']='retry-connection-btn',_0x4f76c8[_0x15438f(0x16d)]='Retry\x20Connection',_0x4f76c8['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x397ea7=document['createElement']('button');_0x397ea7['id']='reload-page-btn',_0x397ea7[_0x15438f(0x16d)]='Reload\x20Page',_0x397ea7['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x42a67c=document['createElement']('div');_0x42a67c['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x42a67c[_0x15438f(0x188)](_0x4f76c8),_0x42a67c['appendChild'](_0x397ea7),_0x13568e['appendChild'](_0x335701),_0x13568e['appendChild'](_0x131425),_0x13568e['appendChild'](_0x42a67c),_0x5e6929['appendChild'](_0x13568e),document[_0x15438f(0x17e)][_0x15438f(0x188)](_0x5e6929),_0x4f76c8['addEventListener']('click',retryConnection),_0x397ea7['addEventListener']('click',()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0xd94112=a22_0x2d16;clearTimeout(idleTimer);const _0x2703c1=document['getElementById']('network-error-overlay');_0x2703c1&&(_0x2703c1['style'][_0xd94112(0x186)]=_0xd94112(0x169)),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x14836c['suspendAllListeners']();}function retryConnection(){const _0x58adbd=a22_0x2d16;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x400137=document['querySelector']('#network-error-overlay\x20p');_0x400137&&(_0x400137['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x36103c=document['getElementById']('retry-connection-btn');_0x36103c&&(_0x36103c['disabled']=!![],_0x36103c['style'][_0x58adbd(0x18a)]=_0x58adbd(0x180),_0x36103c['style'][_0x58adbd(0x16f)]='not-allowed');return;}const _0x3bb17f=document['getElementById']('network-error-overlay');_0x3bb17f&&(_0x3bb17f['style']['display']=_0x58adbd(0x167));window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x240e1a}=window;if(_0x240e1a){const _0x19f919=_0x240e1a['collection']('system');_0x240e1a['getDocs'](_0x19f919)['catch'](_0x240bb9=>{const _0x1808c3=_0x58adbd;console[_0x1808c3(0x173)]('Connection\x20test\x20failed:',_0x240bb9),handleNetworkError();});}}catch(_0x415b8e){console[_0x58adbd(0x173)]('Failed\x20to\x20test\x20connection:',_0x415b8e),handleNetworkError();}a22_0x14836c['resumeAllListeners']();}function suspendSession(){const _0x558810=a22_0x2d16;isSessionSuspended=!![];const _0x171a6b=document['getElementById']('idle-overlay');_0x171a6b&&(_0x171a6b['style'][_0x558810(0x186)]='flex'),console['log'](_0x558810(0x170)),window[_0x558810(0x17d)]=!![],a22_0x14836c['suspendAllListeners']();}function resumeSession(){const _0x17b4df=a22_0x2d16;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x392839=document['getElementById'](_0x17b4df(0x174));_0x392839&&(_0x392839[_0x17b4df(0x18b)][_0x17b4df(0x186)]='none'),console[_0x17b4df(0x16c)]('Session\x20resumed'),resetIdleTimer(),a22_0x14836c['resumeAllListeners'](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window[_0x17b4df(0x16e)][_0x17b4df(0x17c)]());}function a22_0x29ec(){const _0x34aa7d=['Pending\x20operations:','keys','readyState','none','div','flex','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','Blocked\x20operations:','log','textContent','location','cursor','Session\x20suspended\x20due\x20to\x20inactivity','click','color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','error','idle-overlay','__proto__','backgroundColor','network','RDL_NETWORK_ERROR','exception','activeListeners','Forcing\x20idle\x20timeout...','reload','RDL_SESSION_SUSPENDED','body','constructor','0.5','color:\x20#fff;\x20margin-bottom:\x2030px;','resumeSession','createElement','Session\x20Suspended\x20Due\x20to\x20Inactivity','from','display','cssText','appendChild','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','opacity','style','code','resume-session-btn'];a22_0x29ec=function(){return _0x34aa7d;};return a22_0x29ec();}function initIdleTimeout(){const _0x2cf551=a22_0x2d16,_0x366025=(function(){let _0xbd6533=!![];return function(_0x15ab4a,_0x5d2525){const _0x1e5f8e=_0xbd6533?function(){if(_0x5d2525){const _0x88ba56=_0x5d2525['apply'](_0x15ab4a,arguments);return _0x5d2525=null,_0x88ba56;}}:function(){};return _0xbd6533=![],_0x1e5f8e;};}()),_0x2f1eb6=_0x366025(this,function(){const _0x25daec=a22_0x2d16;let _0x1c30f4;try{const _0x2e9205=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1c30f4=_0x2e9205();}catch(_0x2eb7e9){_0x1c30f4=window;}const _0x49da20=_0x1c30f4['console']=_0x1c30f4['console']||{},_0x5667e3=[_0x25daec(0x16c),'warn','info','error',_0x25daec(0x179),'table','trace'];for(let _0x50fd66=0x0;_0x50fd66<_0x5667e3['length'];_0x50fd66++){const _0x38a937=_0x366025[_0x25daec(0x17f)]['prototype']['bind'](_0x366025),_0x245097=_0x5667e3[_0x50fd66],_0x4347fd=_0x49da20[_0x245097]||_0x38a937;_0x38a937[_0x25daec(0x175)]=_0x366025['bind'](_0x366025),_0x38a937['toString']=_0x4347fd['toString']['bind'](_0x4347fd),_0x49da20[_0x245097]=_0x38a937;}});_0x2f1eb6(),createIdleOverlay();const _0x55b89a=['mousedown','mousemove','keypress','scroll','touchstart',_0x2cf551(0x171)];_0x55b89a['forEach'](_0x20ab23=>{document['addEventListener'](_0x20ab23,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x108a13){const _0x2daf10=_0x2cf551;_0x108a13['error']&&(_0x108a13['error']['message']&&_0x108a13['error']['message']['includes'](_0x2daf10(0x177))||_0x108a13[_0x2daf10(0x173)][_0x2daf10(0x18c)]&&(_0x108a13['error']['code']==='unavailable'||_0x108a13[_0x2daf10(0x173)]['code']==='resource-exhausted'||_0x108a13['error'][_0x2daf10(0x18c)]['includes']('network')))&&(handleNetworkError(),_0x108a13['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window[_0x2cf551(0x182)]=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x173d03=_0x2cf551;return console[_0x173d03(0x16c)]('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log']('Network\x20error:',window[_0x173d03(0x178)]),console['log']('Active\x20listeners:',a22_0x14836c['activeListeners']['size']),console['log'](_0x173d03(0x164),a22_0x14836c['pendingOperations']['size']),console[_0x173d03(0x16c)](_0x173d03(0x16b),a22_0x14836c['blockedOperations']||0x0),{'suspended':window[_0x173d03(0x17d)],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a22_0x14836c[_0x173d03(0x17a)][_0x173d03(0x165)]()),'pendingOperations':Array[_0x173d03(0x185)](a22_0x14836c['pendingOperations'][_0x173d03(0x165)]()),'blockedCount':a22_0x14836c['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){const _0x4b4b4d=_0x2cf551;console['log'](_0x4b4b4d(0x17b)),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};function a22_0x2d16(_0x35fdc2,_0x26e08e){const _0x485848=a22_0x29ec();return a22_0x2d16=function(_0x3cf0a8,_0x14f0e8){_0x3cf0a8=_0x3cf0a8-0x164;let _0x29ecf9=_0x485848[_0x3cf0a8];return _0x29ecf9;},a22_0x2d16(_0x35fdc2,_0x26e08e);}document[a22_0x33d997(0x166)]==='loading'?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();