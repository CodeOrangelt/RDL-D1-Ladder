const a0_0x64556c=a0_0x17a3;(function(_0x19a480,_0x4af808){const _0x53bc5d=a0_0x17a3,_0x8f4e2e=_0x19a480();while(!![]){try{const _0xd30c8b=-parseInt(_0x53bc5d(0x1d4))/0x1*(parseInt(_0x53bc5d(0x1de))/0x2)+parseInt(_0x53bc5d(0x1c6))/0x3*(parseInt(_0x53bc5d(0x21c))/0x4)+-parseInt(_0x53bc5d(0x1f8))/0x5*(parseInt(_0x53bc5d(0x21f))/0x6)+parseInt(_0x53bc5d(0x20c))/0x7+-parseInt(_0x53bc5d(0x1f6))/0x8+-parseInt(_0x53bc5d(0x1d9))/0x9*(-parseInt(_0x53bc5d(0x1e1))/0xa)+parseInt(_0x53bc5d(0x1ea))/0xb;if(_0xd30c8b===_0x4af808)break;else _0x8f4e2e['push'](_0x8f4e2e['shift']());}catch(_0x50ccb9){_0x8f4e2e['push'](_0x8f4e2e['shift']());}}}(a0_0x539a,0x850cc));const a0_0x3fc6cf=(function(){let _0x466dec=!![];return function(_0x456813,_0x1f77c1){const _0x3d4682=_0x466dec?function(){if(_0x1f77c1){const _0x21cb80=_0x1f77c1['apply'](_0x456813,arguments);return _0x1f77c1=null,_0x21cb80;}}:function(){};return _0x466dec=![],_0x3d4682;};}()),a0_0xdb95e0=a0_0x3fc6cf(this,function(){const _0x1d7fb7=a0_0x17a3;let _0x38e2d7;try{const _0x25b90e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x38e2d7=_0x25b90e();}catch(_0x146df7){_0x38e2d7=window;}const _0x37337c=_0x38e2d7['console']=_0x38e2d7['console']||{},_0x2351c3=['log',_0x1d7fb7(0x1f9),'info',_0x1d7fb7(0x1ce),_0x1d7fb7(0x22f),'table',_0x1d7fb7(0x221)];for(let _0xc88abe=0x0;_0xc88abe<_0x2351c3['length'];_0xc88abe++){const _0x726ed2=a0_0x3fc6cf['constructor']['prototype']['bind'](a0_0x3fc6cf),_0x425dc9=_0x2351c3[_0xc88abe],_0xc29e36=_0x37337c[_0x425dc9]||_0x726ed2;_0x726ed2['__proto__']=a0_0x3fc6cf['bind'](a0_0x3fc6cf),_0x726ed2['toString']=_0xc29e36['toString'][_0x1d7fb7(0x229)](_0xc29e36),_0x37337c[_0x425dc9]=_0x726ed2;}});a0_0xdb95e0();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';function a0_0x539a(){const _0x29bd60=['warn','message','country','Duos\x20ladder\x20is\x20currently\x20admin-only','ELO\x20history\x20collection\x20is\x20empty','click','#DC143C','D3\x20toggle\x20clicked','desc','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','rank','eloRating','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','onAuthStateChanged','max','d2-ladder-container','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','<img\x20src=\x22../images/flags/','matchesD','3496857oIETVf','disabled','data','style','label[for=\x22duos-switch\x22]','Error\x20checking\x20','Error\x20finding\x20recommended\x20opponent','roleName','forEach','Active','loading-indicator','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','createElement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toISOString','0.5','2281516twfKUJ','set','inline','29394QYoQNc','elo-recommendation-text-duos','trace','get',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','admin-only-message','appendChild','dispatchEvent','function','length','bind','Error\x20fetching\x20batch\x20match\x20stats:','points',';\x22>','losses','addEventListener','exception','),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','sort','block','playerUsername','wins','loserScore','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','previousElo','email','none','slice','display','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','#CD7F32','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','timestamp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','date','classList','abs','equipped','position','winRate','elo-recommendation-text-d2','#50C878','Error\x20updating\x20ELO\x20trend\x20indicators:','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','winnerScore','duos','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','kda','Using\x20cached\x20D1\x20ladder\x20data','has','3KAEiLV','players','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','Unranked','active','approvedMatches','#C0C0C0','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>','error','eloHistory','remove','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','bold','DOMContentLoaded','30690sOIgCW','innerHTML','toLowerCase','username','change','1829160bzdFBE','#ladder\x20tbody','duos-switch','uid','totalMatches','20xdXrVw','Gold','log','40MjHYJe','inactive','parentNode','exists','council','Recommendation\x20element\x20for\x20','includes','getElementById','elo','4196236nrQORR','recentActivity','elo-recommendation-text-d1','cssText','empty','#ladder\x20thead\x20tr','newElo','<img\x20src=\x22','docs','preventDefault','Error\x20checking\x20admin\x20status:','totalDeaths','7263176rpbEdV','player','515OkXOGu'];a0_0x539a=function(){return _0x29bd60;};return a0_0x539a();}import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x52262d=0x1){const _0x59b5c9=a0_0x17a3;try{document[_0x59b5c9(0x1e8)]('loading-indicator')['style']['display']='block';const _0x41c579=await getLadderData(_0x52262d);_0x41c579['sort']((_0x2bf662,_0x278428)=>_0x278428['elo']-_0x2bf662['elo']);const _0x3e3ebf=_0x41c579['map'](_0x18fccc=>_0x18fccc['id']),_0x4e15ac=await getEloHistoryBatch(_0x3e3ebf,_0x52262d),_0x53875b=_0x41c579['map']((_0x17660b,_0x5a1a04)=>{const _0x605111=_0x59b5c9,_0x997bd0=_0x4e15ac[_0x17660b['id']]||[],_0x1af36e=_0x997bd0[_0x605111(0x231)]((_0x4d4452,_0x3af321)=>new Date(_0x3af321['date'])-new Date(_0x4d4452[_0x605111(0x241)]))[_0x605111(0x23a)](0x0,0x5);return{..._0x17660b,'rank':_0x5a1a04+0x1,'lastMatches':_0x1af36e,'recentActivity':_0x1af36e['length']>0x0};});renderLadder(_0x53875b),setupRealTimeUpdates(_0x52262d);}catch(_0x5adf16){console['error']('Error\x20loading\x20ladder\x20data:',_0x5adf16),document['getElementById']('error-message')['innerText']=_0x59b5c9(0x1d1);}finally{document['getElementById'](_0x59b5c9(0x216))[_0x59b5c9(0x20f)][_0x59b5c9(0x23b)]='none';}}function setupRealTimeUpdates(_0x52bb54=0x1){const _0x1614e3=a0_0x17a3;activeListeners['forEach'](_0x204f15=>_0x204f15()),activeListeners=[];const _0x9c9ebf=_0x52bb54===0x1?'players':'playersD'+_0x52bb54,_0x32fb5d=_0x52bb54===0x1?'matches':_0x1614e3(0x20b)+_0x52bb54,_0x413dcd=new Date();_0x413dcd['setDate'](_0x413dcd['getDate']()-0x1);const _0x100652=setupEfficientListener(_0x32fb5d,[where('date','>=',_0x413dcd[_0x1614e3(0x21a)]()),limit(0xa),orderBy('date',_0x1614e3(0x201))],async _0x43bcdb=>{_0x43bcdb['length']>0x0&&await loadLadderData(_0x52bb54);});activeListeners['push'](_0x100652);}export function cleanupListeners(){activeListeners['forEach'](_0x5e5af5=>_0x5e5af5()),activeListeners=[];}function renderLadder(_0x58a3a8){const _0x57a5b5=a0_0x17a3,_0x5e357b=document['getElementById']('ladder-container');_0x5e357b[_0x57a5b5(0x1d5)]='',_0x58a3a8['forEach'](_0x158cb2=>{const _0x10706e=_0x57a5b5,_0x3fda09=document[_0x10706e(0x218)]('div');_0x3fda09['className']='ladder-player',_0x3fda09[_0x10706e(0x1d5)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x158cb2[_0x10706e(0x203)]+_0x10706e(0x205)+(_0x158cb2['username']||_0x158cb2['id'])+_0x10706e(0x1cd)+_0x158cb2['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x158cb2[_0x10706e(0x1eb)]?'active':_0x10706e(0x1e2))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x158cb2[_0x10706e(0x1eb)]?_0x10706e(0x215):'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x5e357b['appendChild'](_0x3fda09);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x51c7d6=![]){const _0x26a1e9=a0_0x17a3,_0x1c02b6=document['querySelector']('#ladder\x20tbody');if(!_0x1c02b6){console[_0x26a1e9(0x1ce)]('Ladder\x20table\x20body\x20not\x20found');return;}_0x1c02b6['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0xf40754=Date['now']();if(!_0x51c7d6&&playerCache['data']&&_0xf40754-playerCache[_0x26a1e9(0x23f)]<CACHE_DURATION){console['log'](_0x26a1e9(0x1c4)),updateLadderDisplay(playerCache[_0x26a1e9(0x20e)]);return;}const _0x300834=collection(db,'players'),_0x41b6cd=await getDocs(_0x300834),_0x185e98=[];_0x41b6cd['forEach'](_0x50d74c=>{const _0x4989f9=_0x50d74c['data']();_0x185e98['push']({..._0x4989f9,'id':_0x50d74c['id'],'elo':_0x4989f9['eloRating']||0x0,'position':_0x4989f9['position']||Number['MAX_SAFE_INTEGER']});});const _0xfab1f2=collection(db,'userProfiles'),_0x51f541=await getDocs(_0xfab1f2),_0x5d859f=new Map();_0x51f541[_0x26a1e9(0x214)](_0x1c5455=>{const _0x3063c1=_0x26a1e9,_0x55433c=_0x1c5455[_0x3063c1(0x20e)]();_0x55433c[_0x3063c1(0x1d7)]&&_0x5d859f['set'](_0x55433c[_0x3063c1(0x1d7)][_0x3063c1(0x1d6)](),_0x55433c);}),_0x185e98['forEach'](_0x1e6c43=>{const _0x40acb2=_0x26a1e9,_0x22cd75=_0x1e6c43['username']?.['toLowerCase']();if(_0x22cd75&&_0x5d859f['has'](_0x22cd75)){const _0x9b8077=_0x5d859f['get'](_0x22cd75);_0x9b8077['country']&&(_0x1e6c43['country']=_0x9b8077['country']['toLowerCase']()),_0x1e6c43['points']=_0x9b8077[_0x40acb2(0x22b)]||0x0;}else _0x1e6c43['points']=0x0;});const _0xadb3dd=_0x185e98['map'](_0x2983b0=>_0x2983b0[_0x26a1e9(0x1d7)]),_0x30bb58=await fetchBatchMatchStats(_0xadb3dd);_0x185e98['sort']((_0x19f7aa,_0x59a98e)=>{const _0x54975a=_0x26a1e9,_0x531156=_0x30bb58['get'](_0x19f7aa[_0x54975a(0x1d7)])?.[_0x54975a(0x1dd)]||0x0,_0x2a425d=_0x30bb58['get'](_0x59a98e[_0x54975a(0x1d7)])?.['totalMatches']||0x0;if(_0x531156===0x0!==(_0x2a425d===0x0))return _0x531156===0x0?0x1:-0x1;return(_0x19f7aa['position']||0x3e7)-(_0x59a98e[_0x54975a(0x245)]||0x3e7);}),_0x185e98['forEach']((_0x3c05ed,_0x1f62ba)=>{_0x3c05ed['position']=_0x1f62ba+0x1;}),playerCache[_0x26a1e9(0x20e)]=_0x185e98,playerCache[_0x26a1e9(0x23f)]=_0xf40754,updateLadderDisplay(_0x185e98,_0x30bb58);}catch(_0x334070){console[_0x26a1e9(0x1ce)]('Error\x20loading\x20ladder:',_0x334070),_0x1c02b6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x334070[_0x26a1e9(0x1fa)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x396513){const _0x428c9a=a0_0x17a3,_0x381fef=new Map();try{_0x396513[_0x428c9a(0x214)](_0x3fb906=>{_0x381fef['set'](_0x3fb906,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});});const _0x1538c6=collection(db,_0x428c9a(0x1cb)),_0x3ac61d=await getDocs(_0x1538c6);_0x3ac61d[_0x428c9a(0x214)](_0x4d312e=>{const _0x384254=_0x428c9a,_0x57eab7=_0x4d312e['data'](),_0x918d5e=_0x57eab7['winnerUsername'],_0x83974d=_0x57eab7['loserUsername'];if(_0x396513[_0x384254(0x1e7)](_0x918d5e)){const _0x258c00=_0x381fef['get'](_0x918d5e);_0x258c00['wins']++,_0x258c00['totalMatches']++,_0x258c00['totalKills']+=parseInt(_0x57eab7[_0x384254(0x24b)])||0x0,_0x258c00['totalDeaths']+=parseInt(_0x57eab7[_0x384254(0x235)])||0x0;}if(_0x396513[_0x384254(0x1e7)](_0x83974d)){const _0x44611a=_0x381fef[_0x384254(0x222)](_0x83974d);_0x44611a['losses']++,_0x44611a['totalMatches']++,_0x44611a['totalKills']+=parseInt(_0x57eab7['loserScore'])||0x0,_0x44611a[_0x384254(0x1f5)]+=parseInt(_0x57eab7['winnerScore'])||0x0;}}),_0x396513[_0x428c9a(0x214)](_0x169d6e=>{const _0x55ed96=_0x428c9a,_0x4cc113=_0x381fef['get'](_0x169d6e);_0x4cc113['kda']=_0x4cc113['totalDeaths']>0x0?(_0x4cc113['totalKills']/_0x4cc113['totalDeaths'])['toFixed'](0x2):_0x4cc113['totalKills']['toFixed'](0x2),_0x4cc113[_0x55ed96(0x246)]=_0x4cc113['totalMatches']>0x0?(_0x4cc113['wins']/_0x4cc113['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x29d217){console['error'](_0x428c9a(0x22a),_0x29d217);}return _0x381fef;}function createPlayerRow(_0x361f48,_0x43a211){const _0x2d895a=a0_0x17a3,_0x112199=parseFloat(_0x361f48[_0x2d895a(0x1e9)])||0x0;let _0x28c1dd=_0x2d895a(0x1ff);if(_0x43a211[_0x2d895a(0x1dd)]===0x0)_0x28c1dd=_0x2d895a(0x1ff);else{if(_0x43a211[_0x2d895a(0x246)]>=0x50&&_0x43a211[_0x2d895a(0x1dd)]>=0x14)_0x28c1dd=_0x2d895a(0x248);else{if(_0x112199>=0x2bc)_0x28c1dd='#FFD700';else{if(_0x112199>=0x1f4)_0x28c1dd='#C0C0C0';else _0x112199>=0xc8&&(_0x28c1dd=_0x2d895a(0x23d));}}}let _0x2002ed='';return _0x361f48['country']&&(_0x2002ed=_0x2d895a(0x20a)+_0x361f48['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x361f48['country']+_0x2d895a(0x1c2)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x361f48[_0x2d895a(0x245)]+_0x2d895a(0x202)+encodeURIComponent(_0x361f48['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x28c1dd+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x361f48['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2002ed+_0x2d895a(0x240)+_0x28c1dd+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x112199+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x43a211['totalMatches']+_0x2d895a(0x23e)+_0x43a211[_0x2d895a(0x234)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x43a211[_0x2d895a(0x22d)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x43a211['kda']+_0x2d895a(0x23e)+_0x43a211['winRate']+_0x2d895a(0x1c8)+_0x43a211['points']+'</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x57147d,_0x4837a5=0x0,_0x50372d=0x0){const _0x251897=a0_0x17a3;if(_0x4837a5===0x0)return'Unranked';if(_0x57147d>=0x3e8&&_0x50372d>=0x50&&_0x4837a5>=0x14)return'Emerald';if(_0x57147d>=0x2bc)return _0x251897(0x1df);if(_0x57147d>=0x1f4)return'Silver';if(_0x57147d>=0xc8)return'Bronze';return _0x251897(0x1c9);}async function getPlayersLastEloChanges(_0x54c9fa){const _0x4077c9=a0_0x17a3,_0x2909cb=new Map();_0x54c9fa['forEach'](_0xae0041=>{_0x2909cb['set'](_0xae0041,0x0);});try{const _0x16b645=collection(db,'players'),_0x280d0e=await getDocs(_0x16b645),_0x9d469a=new Map(),_0x21f8a9=new Map();_0x280d0e[_0x4077c9(0x214)](_0x40d321=>{const _0x51f675=_0x4077c9,_0x43a3ac=_0x40d321['data']();_0x43a3ac['username']&&(_0x9d469a[_0x51f675(0x21d)](_0x40d321['id'],_0x43a3ac['username']),_0x21f8a9[_0x51f675(0x21d)](_0x43a3ac['username']['toLowerCase'](),_0x40d321['id']));});const _0x2e284c=collection(db,_0x4077c9(0x1cf)),_0x907d7b=query(_0x2e284c,orderBy(_0x4077c9(0x23f),'desc'),limit(0x12c)),_0x5690ac=await getDocs(_0x907d7b);if(_0x5690ac['empty'])return console['log'](_0x4077c9(0x1fd)),_0x2909cb;if(_0x5690ac[_0x4077c9(0x1f2)][_0x4077c9(0x228)]>0x0){const _0x1a3cc3=_0x5690ac['docs'][0x0]['data']();if(_0x1a3cc3[_0x4077c9(0x1f7)]&&_0x9d469a['has'](_0x1a3cc3['player'])){}}const _0x196ad6=new Map();let _0x55c441=0x0;_0x5690ac[_0x4077c9(0x214)](_0x5df0c3=>{const _0x3cd2f6=_0x4077c9,_0x218362=_0x5df0c3['data']();let _0x11295f=null;if(_0x218362[_0x3cd2f6(0x1f7)]&&_0x9d469a['has'](_0x218362['player']))_0x11295f=_0x9d469a['get'](_0x218362['player']);else{if(_0x218362['username']&&_0x21f8a9['has'](_0x218362[_0x3cd2f6(0x1d7)]['toLowerCase']()))_0x11295f=_0x218362[_0x3cd2f6(0x1d7)];else _0x218362['playerUsername']&&_0x21f8a9['has'](_0x218362['playerUsername'][_0x3cd2f6(0x1d6)]())&&(_0x11295f=_0x218362[_0x3cd2f6(0x233)]);}_0x11295f&&_0x54c9fa[_0x3cd2f6(0x1e7)](_0x11295f)&&(_0x55c441++,!_0x196ad6[_0x3cd2f6(0x1c5)](_0x11295f)&&_0x196ad6['set'](_0x11295f,[]),_0x196ad6[_0x3cd2f6(0x222)](_0x11295f)['push']({..._0x218362,'timestamp':_0x218362[_0x3cd2f6(0x23f)]?.['seconds']||0x0}));}),_0x196ad6['forEach']((_0x1ed1a2,_0x3125ed)=>{const _0x15c55d=_0x4077c9;if(_0x1ed1a2['length']>0x0){_0x1ed1a2[_0x15c55d(0x231)]((_0x3284e0,_0x23fd90)=>_0x23fd90['timestamp']-_0x3284e0['timestamp']);const _0x1672ad=_0x1ed1a2['find'](_0xb42f6f=>_0xb42f6f[_0x15c55d(0x1d8)]!==undefined||_0xb42f6f['newElo']!==undefined&&_0xb42f6f['previousElo']!==undefined||_0xb42f6f['newEloRating']!==undefined&&_0xb42f6f['oldEloRating']!==undefined);if(_0x1672ad){let _0x46d4df;if(_0x1672ad[_0x15c55d(0x1d8)]!==undefined)_0x46d4df=parseInt(_0x1672ad[_0x15c55d(0x1d8)]);else{if(_0x1672ad[_0x15c55d(0x1f0)]!==undefined&&entry[_0x15c55d(0x237)]!==undefined)_0x46d4df=parseInt(_0x1672ad['newElo'])-parseInt(_0x1672ad['previousElo']);else _0x1672ad['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x46d4df=parseInt(_0x1672ad['newEloRating'])-parseInt(_0x1672ad['oldEloRating']));}!isNaN(_0x46d4df)&&_0x46d4df!==0x0&&_0x2909cb['set'](_0x3125ed,_0x46d4df);}}});}catch(_0x154d45){console['error']('Error\x20fetching\x20ELO\x20history:',_0x154d45);}return _0x2909cb;}function createPlayerRowWithToken(_0x15425f,_0x245388,_0x3dfff9){const _0x5ba873=a0_0x17a3,_0x50cc26=parseFloat(_0x15425f['elo'])||0x0;let _0x208039='#DC143C';if(_0x245388['totalMatches']===0x0)_0x208039='#DC143C';else{if(_0x245388['winRate']>=0x50&&_0x245388[_0x5ba873(0x1dd)]>=0x14)_0x208039=_0x5ba873(0x248);else{if(_0x50cc26>=0x2bc)_0x208039='#FFD700';else{if(_0x50cc26>=0x1f4)_0x208039=_0x5ba873(0x1cc);else _0x50cc26>=0xc8&&(_0x208039='#CD7F32');}}}let _0x651ec8='';_0x15425f['country']&&(_0x651ec8='<img\x20src=\x22../images/flags/'+_0x15425f['country'][_0x5ba873(0x1d6)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x15425f[_0x5ba873(0x1fb)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x279d02='';return _0x3dfff9&&(_0x279d02=_0x5ba873(0x1f1)+_0x3dfff9['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3dfff9['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x3dfff9['tokenName']+'\x20'+(_0x3dfff9[_0x5ba873(0x244)]?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x5ba873(0x24a)+_0x15425f[_0x5ba873(0x245)]+_0x5ba873(0x202)+encodeURIComponent(_0x15425f['username'])+_0x5ba873(0x209)+_0x208039+_0x5ba873(0x223)+_0x15425f['username']+_0x5ba873(0x217)+_0x651ec8+_0x5ba873(0x219)+_0x279d02+_0x5ba873(0x240)+_0x208039+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x50cc26+_0x5ba873(0x23c)+_0x245388['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x245388['wins']+_0x5ba873(0x23e)+_0x245388['losses']+_0x5ba873(0x23e)+_0x245388[_0x5ba873(0x1c3)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x245388['winRate']+_0x5ba873(0x236)+(_0x15425f['points']||0x0)+'</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x56cb49,_0x712de4=null){const _0x31bc8d=a0_0x17a3,_0x1a96e0=document['querySelector'](_0x31bc8d(0x1da));if(!_0x1a96e0){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x2c5f4b=document['querySelector'](_0x31bc8d(0x1ef));_0x2c5f4b&&(_0x2c5f4b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x4200ac=_0x56cb49['map'](_0x180fd1=>_0x180fd1[_0x31bc8d(0x1d7)]);!_0x712de4&&(_0x712de4=await fetchBatchMatchStats(_0x4200ac));let _0x3eda52=new Map();try{typeof clearTokenCache===_0x31bc8d(0x227)&&clearTokenCache(),_0x3eda52=await getTokensByUsernames(_0x4200ac),console[_0x31bc8d(0x1e0)]('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x3eda52['size'],'players'),_0x3eda52['forEach']((_0x27fbe6,_0x172e63)=>{const _0x567db1=_0x27fbe6['find'](_0x53c6d7=>_0x53c6d7['equipped']);_0x567db1&&console['log']('ðŸŽ¯\x20'+_0x172e63+'\x20has\x20equipped:\x20'+_0x567db1['tokenName']);});}catch(_0x4aac19){console['error']('Error\x20fetching\x20tokens:',_0x4aac19);}const _0x27a46a=_0x56cb49['map'](_0x1dfbde=>{const _0x1995b5=_0x712de4['get'](_0x1dfbde['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x349230=_0x3eda52['get'](_0x1dfbde['username'])||[],_0x6cf3bc=getPrimaryDisplayToken(_0x349230);return _0x6cf3bc&&console['log']('ðŸŽ¨\x20'+_0x1dfbde['username']+'\x20displaying\x20token:\x20'+_0x6cf3bc['tokenName']+'\x20(equipped:\x20'+_0x6cf3bc['equipped']+')'),createPlayerRowWithToken(_0x1dfbde,_0x1995b5,_0x6cf3bc);})['join']('');_0x1a96e0['innerHTML']=_0x27a46a,getPlayersLastEloChanges(_0x4200ac)['then'](_0x4199f1=>{const _0x2b6416=new Map();_0x1a96e0['querySelectorAll']('tr')['forEach']((_0x1ad408,_0x3ca072)=>{const _0x5a1bcd=a0_0x17a3;_0x3ca072<_0x4200ac[_0x5a1bcd(0x228)]&&_0x2b6416['set'](_0x4200ac[_0x3ca072],_0x1ad408);}),_0x4199f1['forEach']((_0x4ebda3,_0x3654fc)=>{const _0x810283=a0_0x17a3,_0xcdf0cb=_0x2b6416['get'](_0x3654fc);if(_0xcdf0cb&&_0x4ebda3!==0x0){const _0x5193cb=_0xcdf0cb['querySelector']('td:nth-child(3)');if(_0x5193cb){const _0x475bc6=_0x4ebda3>0x0?'+'+_0x4ebda3:''+_0x4ebda3,_0xe5ed09=_0x5193cb['querySelector']('.trend-indicator');_0xe5ed09&&(_0xe5ed09['textContent']=_0x475bc6,_0xe5ed09['style']['color']=_0x4ebda3>0x0?'#4CAF50':'#F44336',_0xe5ed09['style']['fontWeight']=_0x810283(0x1d2),_0xe5ed09['style']['fontSize']='0.85em',_0xe5ed09['style']['display']=_0x810283(0x21e),_0xe5ed09['style']['visibility']='visible',_0xe5ed09[_0x810283(0x20f)]['opacity']='1');}}});})['catch'](_0x2b2768=>console[_0x31bc8d(0x1ce)](_0x31bc8d(0x249),_0x2b2768));}function initLadderToggles(){const _0x2f720d=a0_0x17a3,_0x535113=document['getElementById']('d1-switch'),_0x1e9a3a=document['getElementById']('d2-switch'),_0x4de6a3=document['getElementById']('d3-switch'),_0x4f68d9=document[_0x2f720d(0x1e8)]('duos-switch'),_0x6b02b9=document[_0x2f720d(0x1e8)]('d1-ladder-container'),_0x1de14b=document[_0x2f720d(0x1e8)]('d2-ladder-container'),_0x405aff=document['getElementById']('d3-ladder-container'),_0x25e5bf=document[_0x2f720d(0x1e8)]('duos-ladder-container');function _0x2b1214(){const _0xc38f68=_0x2f720d;if(_0x6b02b9)_0x6b02b9['classList']['remove']('active');if(_0x1de14b)_0x1de14b['classList'][_0xc38f68(0x1d0)](_0xc38f68(0x1ca));if(_0x405aff)_0x405aff['classList']['remove'](_0xc38f68(0x1ca));if(_0x25e5bf)_0x25e5bf['style']['display']='none';if(_0x6b02b9)_0x6b02b9[_0xc38f68(0x20f)]['display']='none';if(_0x1de14b)_0x1de14b[_0xc38f68(0x20f)]['display']='none';if(_0x405aff)_0x405aff['style']['display']='none';}_0x535113&&_0x535113[_0x2f720d(0x22e)]('click',()=>{const _0x2255f1=_0x2f720d;console['log']('D1\x20toggle\x20clicked'),_0x2b1214();_0x6b02b9&&(_0x6b02b9[_0x2255f1(0x242)]['add']('active'),_0x6b02b9['style']['display']='block');document[_0x2255f1(0x1e8)]('elo-recommendation-text-d1')['style'][_0x2255f1(0x23b)]='block',document[_0x2255f1(0x1e8)]('elo-recommendation-text-d2')['style']['display']='none',document['getElementById']('elo-recommendation-text-d3')[_0x2255f1(0x20f)]['display']='none';if(_0x535113)_0x535113['classList']['add']('active');if(_0x1e9a3a)_0x1e9a3a[_0x2255f1(0x242)][_0x2255f1(0x1d0)]('active');if(_0x4de6a3)_0x4de6a3[_0x2255f1(0x242)][_0x2255f1(0x1d0)]('active');displayLadder(),findBestOpponent('d1');}),_0x1e9a3a&&_0x1e9a3a['addEventListener']('click',()=>{const _0x3e2ae8=_0x2f720d;console['log']('D2\x20toggle\x20clicked'),_0x2b1214();_0x1de14b&&(_0x1de14b['classList']['add'](_0x3e2ae8(0x1ca)),_0x1de14b[_0x3e2ae8(0x20f)]['display']=_0x3e2ae8(0x232));document[_0x3e2ae8(0x1e8)](_0x3e2ae8(0x1ec))[_0x3e2ae8(0x20f)]['display']='none',document[_0x3e2ae8(0x1e8)](_0x3e2ae8(0x247))[_0x3e2ae8(0x20f)]['display']='block',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x1e9a3a)_0x1e9a3a['classList']['add']('active');if(_0x535113)_0x535113['classList']['remove'](_0x3e2ae8(0x1ca));if(_0x4de6a3)_0x4de6a3['classList']['remove'](_0x3e2ae8(0x1ca));displayLadderD2(),findBestOpponent('d2');}),_0x4de6a3&&_0x4de6a3['addEventListener']('click',()=>{const _0x1c9022=_0x2f720d;console[_0x1c9022(0x1e0)](_0x1c9022(0x200)),_0x2b1214();_0x405aff&&(_0x405aff[_0x1c9022(0x242)]['add']('active'),_0x405aff['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document[_0x1c9022(0x1e8)](_0x1c9022(0x247))['style'][_0x1c9022(0x23b)]=_0x1c9022(0x239),document[_0x1c9022(0x1e8)]('elo-recommendation-text-d3')[_0x1c9022(0x20f)]['display']=_0x1c9022(0x232);if(_0x4de6a3)_0x4de6a3['classList']['add']('active');if(_0x535113)_0x535113[_0x1c9022(0x242)]['remove']('active');if(_0x1e9a3a)_0x1e9a3a['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x4f68d9&&_0x4f68d9[_0x2f720d(0x22e)](_0x2f720d(0x1fe),()=>{const _0x2b69ea=_0x2f720d;_0x2b1214();if(_0x25e5bf)_0x25e5bf[_0x2b69ea(0x20f)]['display']=_0x2b69ea(0x232);displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document[_0x2b69ea(0x1e8)](_0x2b69ea(0x220))['style']['display']='block'),document[_0x2b69ea(0x1e8)]('elo-recommendation-text-d1')[_0x2b69ea(0x20f)]['display']='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x2b69ea(0x239),document['getElementById']('elo-recommendation-text-d3')['style'][_0x2b69ea(0x23b)]=_0x2b69ea(0x239);});}document['addEventListener'](a0_0x64556c(0x1d3),()=>{const _0x47275f=a0_0x64556c;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')['style'][_0x47275f(0x23b)]='block';});export{displayLadder};async function findBestOpponent(_0x3be29a='d1'){const _0x16738a=a0_0x64556c,_0x3f6c00='elo-recommendation-text-'+_0x3be29a,_0x53b208=document['getElementById'](_0x3f6c00);if(!_0x53b208){console['error'](_0x16738a(0x1e6)+_0x3be29a+'\x20not\x20found');return;}const _0x5dc358=auth['currentUser'];if(!_0x5dc358){_0x53b208['textContent']='';return;}try{const _0x508442=doc(db,'userProfiles',_0x5dc358[_0x16738a(0x1dc)]),_0xd16ae3=await getDoc(_0x508442);if(!_0xd16ae3[_0x16738a(0x1e4)]()){console['log']('No\x20user\x20profile\x20found'),_0x53b208['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x4b91e1=_0xd16ae3[_0x16738a(0x20e)](),_0x210606=_0x4b91e1[_0x16738a(0x1d7)];if(!_0x210606){_0x53b208['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x186d68;switch(_0x3be29a){case'd1':_0x186d68='players';break;case'd2':_0x186d68='playersD2';break;case'd3':_0x186d68='playersD3';break;case _0x16738a(0x24c):_0x186d68='playersDuos';break;default:_0x186d68=_0x16738a(0x1c7);}if(_0x3be29a===_0x16738a(0x24c)){const _0x3ce036=collection(db,_0x186d68),_0x2d1da6=query(_0x3ce036,where('username','==',_0x210606)),_0x52a92d=await getDocs(_0x2d1da6);if(_0x52a92d[_0x16738a(0x1ee)]){_0x53b208['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0xbeebb9=_0x52a92d[_0x16738a(0x1f2)][0x0]['data'](),_0x29e381=parseInt(_0xbeebb9[_0x16738a(0x204)])||0x4b0;if(_0xbeebb9['hasTeam']&&_0xbeebb9['teammate']){_0x53b208['innerHTML']='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0xbeebb9['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x200316=await getDocs(_0x3ce036);let _0xa4b936=null,_0x3b9495=-0x1;_0x200316['forEach'](_0x45ee35=>{const _0x1f6ddd=_0x16738a,_0x371e51=_0x45ee35['data']();if(_0x371e51[_0x1f6ddd(0x1d7)]===_0x210606)return;if(_0x371e51['hasTeam'])return;const _0xd098c4=parseInt(_0x371e51['eloRating'])||0x4b0,_0x3d6191=Math[_0x1f6ddd(0x243)](_0xd098c4-_0x29e381),_0x463827=Math[_0x1f6ddd(0x207)](0x0,0xc8-_0x3d6191);_0x463827>_0x3b9495&&(_0xa4b936=_0x371e51,_0x3b9495=_0x463827);});if(_0xa4b936){const _0x43464b=parseInt(_0xa4b936['eloRating'])||0x4b0;let _0x19aaec='gray';if(_0x43464b>=0x7d0)_0x19aaec='#50C878';else{if(_0x43464b>=0x708)_0x19aaec='#FFD700';else{if(_0x43464b>=0x640)_0x19aaec='#C0C0C0';else _0x43464b>=0x578&&(_0x19aaec='#CD7F32');}}_0x53b208['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x19aaec+';\x22>'+_0xa4b936['username']+'</span>\x20(ELO:\x20'+_0x43464b+')';}else _0x53b208['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x58a872=collection(db,_0x186d68),_0x26c526=query(_0x58a872,where('username','==',_0x210606)),_0x59c90a=await getDocs(_0x26c526);if(_0x59c90a['empty']){_0x53b208['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x3be29a['toUpperCase']()+'\x20ladder';return;}const _0xfd6774=_0x59c90a['docs'][0x0][_0x16738a(0x20e)](),_0x52b809=parseInt(_0xfd6774['eloRating'])||0x5dc,_0x5a1403=await getDocs(_0x58a872);let _0x3e07be=null,_0x55c565=-0x1;const _0xd02636=getPlayerRankName(_0x52b809);_0x5a1403[_0x16738a(0x214)](_0x43f766=>{const _0x3f9f45=_0x16738a,_0x5a72ab=_0x43f766[_0x3f9f45(0x20e)]();if(_0x5a72ab['username']===_0x210606)return;const _0x4e23a5=parseInt(_0x5a72ab['eloRating'])||0x5dc,_0x338b18=getPlayerRankName(_0x4e23a5),_0x3bafb0=Math['abs'](_0x4e23a5-_0x52b809),_0x3ff3b9=0x20,_0x2217c7=0x1/(0x1+Math['pow'](0xa,(_0x4e23a5-_0x52b809)/0x190)),_0x528ae5=Math['round'](_0x3ff3b9*(0x1-_0x2217c7));if(_0x528ae5<=0x0)return;let _0x3cb6cb=0x0;const _0x1c2c1f=Math['max'](0x0,0x64-_0x3bafb0*0.5),_0xd43483=_0x528ae5>=0x3&&_0x528ae5<=0x8?0x32:_0x528ae5>0x0&&_0x528ae5<0xf?0x1e:0xa,_0x4636ad=_0xd02636===_0x338b18?0x28:0x0;_0x3cb6cb=_0x1c2c1f+_0xd43483+_0x4636ad,_0x3cb6cb>_0x55c565&&(_0x3e07be=_0x5a72ab,_0x55c565=_0x3cb6cb);});if(_0x3e07be){const _0x589771=parseInt(_0x3e07be[_0x16738a(0x204)])||0x5dc;let _0x8bcc35='gray';if(_0x589771>=0x7d0)_0x8bcc35=_0x16738a(0x248);else{if(_0x589771>=0x708)_0x8bcc35='#FFD700';else{if(_0x589771>=0x640)_0x8bcc35='#b9f1fc';else _0x589771>=0x578&&(_0x8bcc35='#CD7F32');}}_0x53b208['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x52b809+_0x16738a(0x230)+_0x8bcc35+_0x16738a(0x22c)+_0x3e07be['username']+'</span>';}else _0x53b208[_0x16738a(0x1d5)]='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x52b809+')';}catch(_0x31ecd0){console['error']('Error\x20finding\x20best\x20opponent:',_0x31ecd0),_0x53b208['textContent']=_0x16738a(0x212);}}auth['onAuthStateChanged'](_0x216aed=>{const _0x281b1c=a0_0x64556c,_0x347120=document['getElementById']('d1-ladder-container')&&document[_0x281b1c(0x1e8)]('d1-ladder-container')['style']['display']!=='none',_0x2a8468=document['getElementById']('d2-ladder-container')&&document['getElementById'](_0x281b1c(0x208))['style'][_0x281b1c(0x23b)]!=='none',_0xcb14c7=document['getElementById']('d3-ladder-container')&&document['getElementById']('d3-ladder-container')['style']['display']!==_0x281b1c(0x239),_0x4d4851=document[_0x281b1c(0x1e8)]('duos-ladder-container')&&document['getElementById']('duos-ladder-container')['style']['display']!=='none',_0x77f397=_0x347120?'d1':_0x2a8468?'d2':_0xcb14c7?'d3':_0x4d4851?'duos':'d1';findBestOpponent(_0x77f397);}),document['addEventListener'](a0_0x64556c(0x1d3),()=>{const _0x41c6e4=a0_0x64556c,_0x476b6d=document[_0x41c6e4(0x1e8)](_0x41c6e4(0x1db)),_0x226b9d=document['querySelector'](_0x41c6e4(0x210));_0x476b6d&&_0x226b9d&&(_0x476b6d['addEventListener'](_0x41c6e4(0x1d8),async _0x53daef=>{const _0x351f03=_0x41c6e4;if(_0x53daef['target']['checked']){const _0x5c6f60=auth?.['currentUser'],_0x79844d=await checkIfUserIsAdmin(_0x5c6f60);if(!_0x79844d){_0x53daef[_0x351f03(0x1f3)]();const _0x47680c=document['getElementById']('d1-switch');return _0x47680c&&(_0x47680c['checked']=!![],_0x47680c[_0x351f03(0x226)](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth[_0x41c6e4(0x206)](async _0x5414a9=>{const _0x1bf389=_0x41c6e4,_0x47ec81=await checkIfUserIsAdmin(_0x5414a9);!_0x47ec81?(_0x476b6d[_0x1bf389(0x20d)]=!![],_0x226b9d[_0x1bf389(0x20f)]['opacity']=_0x1bf389(0x21b),_0x226b9d['style']['cursor']='not-allowed',_0x226b9d['title']=_0x1bf389(0x1fc)):(_0x476b6d['disabled']=![],_0x226b9d['style']['opacity']='1',_0x226b9d[_0x1bf389(0x20f)]['cursor']='pointer',_0x226b9d['title']='');}));});function a0_0x17a3(_0x1a523c,_0x14d562){const _0x591f50=a0_0x539a();return a0_0x17a3=function(_0xdb95e0,_0x3fc6cf){_0xdb95e0=_0xdb95e0-0x1c2;let _0xccbfe2=_0x591f50[_0xdb95e0];return _0xccbfe2;},a0_0x17a3(_0x1a523c,_0x14d562);}async function checkIfUserIsAdmin(_0x4310ac){const _0x13c829=a0_0x64556c;if(!_0x4310ac)return![];try{const _0x34e95f=['admin@ladder.com','brian2af@outlook.com'];if(_0x4310ac['email']&&_0x34e95f[_0x13c829(0x1e7)](_0x4310ac[_0x13c829(0x238)]['toLowerCase']()))return!![];const _0x21b9e0=['userProfiles',_0x13c829(0x1c7),'playersD2','playersD3'],_0x5437fa=['admin','owner',_0x13c829(0x1e5),'creative\x20lead'];for(const _0x3b763e of _0x21b9e0){try{const _0x17c57f=doc(db,_0x3b763e,_0x4310ac['uid']),_0x31e482=await getDoc(_0x17c57f);if(_0x31e482['exists']()){const _0x227c19=_0x31e482[_0x13c829(0x20e)](),_0x55c467=(_0x227c19[_0x13c829(0x213)]||_0x227c19['role']||'')['toLowerCase']();if(_0x55c467&&_0x5437fa[_0x13c829(0x1e7)](_0x55c467))return!![];}}catch(_0x5dd1ea){console['warn'](_0x13c829(0x211)+_0x3b763e+':',_0x5dd1ea);}}return![];}catch(_0xc16668){return console[_0x13c829(0x1ce)](_0x13c829(0x1f4),_0xc16668),![];}}function showAdminOnlyMessage(){const _0x38470f=a0_0x64556c,_0xd3478b=document['getElementById']('admin-only-message');_0xd3478b&&_0xd3478b['remove']();const _0x590463=document[_0x38470f(0x218)]('div');_0x590463['id']=_0x38470f(0x224),_0x590463['style'][_0x38470f(0x1ed)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x590463['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body'][_0x38470f(0x225)](_0x590463),setTimeout(()=>{const _0x10e6a0=_0x38470f;_0x590463[_0x10e6a0(0x1e3)]&&_0x590463['remove']();},0xbb8);}