const a22_0x3c13d3=a22_0x1e87;import a22_0x3f46e1,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;function a22_0x1387(){const _0x2da587=['return\x20(function()\x20','readyState','disabled','textContent','reload-page-btn','Connection\x20test\x20failed:','error','click','addEventListener','body','now','apply','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','getDocs','Return\x20to\x20Website','RDL_LAST_ACTIVITY','appendChild','style','RDL_SESSION_SUSPENDED','idle-overlay','warn','bind','loading','onmouseover','preventDefault','Active\x20listeners:','blockedOperations','div','log','activeListeners','code','mousemove','color:\x20#fff;\x20margin-bottom:\x2030px;','Blocked\x20operations:','touchstart','backgroundColor','Retry\x20Connection','flex','onmouseout','getElementById','createElement','reload','Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.','network','querySelector','{}.constructor(\x22return\x20this\x22)(\x20)','network-error-overlay','toString'];a22_0x1387=function(){return _0x2da587;};return a22_0x1387();}const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x3eb2be=a22_0x1e87;if(document['getElementById']('idle-overlay'))return;const _0x280b3f=document['createElement'](_0x3eb2be(0x1a6));_0x280b3f['id']='idle-overlay',_0x280b3f['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x585e96=document[_0x3eb2be(0x1b3)]('div');_0x585e96['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x5b9fb9=document['createElement']('h2');_0x5b9fb9[_0x3eb2be(0x18d)]='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x5b9fb9['style']['cssText']=_0x3eb2be(0x196);const _0x10ba36=document['createElement']('p');_0x10ba36['textContent']=_0x3eb2be(0x1b5),_0x10ba36['style']['cssText']=_0x3eb2be(0x1ab);const _0x33b5f6=document['createElement']('button');_0x33b5f6['id']='resume-session-btn',_0x33b5f6['textContent']=_0x3eb2be(0x199),_0x33b5f6[_0x3eb2be(0x19c)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x33b5f6[_0x3eb2be(0x1a2)]=function(){const _0x484392=_0x3eb2be;this[_0x484392(0x19c)][_0x484392(0x1ae)]='#3da05f';},_0x33b5f6[_0x3eb2be(0x1b1)]=function(){this['style']['backgroundColor']='#50C878';},_0x585e96[_0x3eb2be(0x19b)](_0x5b9fb9),_0x585e96[_0x3eb2be(0x19b)](_0x10ba36),_0x585e96['appendChild'](_0x33b5f6),_0x280b3f['appendChild'](_0x585e96),document[_0x3eb2be(0x193)][_0x3eb2be(0x19b)](_0x280b3f),_0x33b5f6[_0x3eb2be(0x192)]('click',resumeSession),createNetworkErrorOverlay();}function a22_0x1e87(_0x1b9026,_0x19463a){const _0x4e441d=a22_0x1387();return a22_0x1e87=function(_0x832da9,_0x5738cb){_0x832da9=_0x832da9-0x18a;let _0x13874a=_0x4e441d[_0x832da9];return _0x13874a;},a22_0x1e87(_0x1b9026,_0x19463a);}function createNetworkErrorOverlay(){const _0x646d9f=a22_0x1e87;if(document[_0x646d9f(0x1b2)]('network-error-overlay'))return;const _0x33c5bc=document['createElement']('div');_0x33c5bc['id']=_0x646d9f(0x1b9),_0x33c5bc['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x1ae935=document[_0x646d9f(0x1b3)]('div');_0x1ae935[_0x646d9f(0x19c)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0xb1db12=document['createElement']('h2');_0xb1db12[_0x646d9f(0x18d)]='Connection\x20Error',_0xb1db12['style']['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x28fed7=document['createElement']('p');_0x28fed7['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x28fed7['style']['cssText']=_0x646d9f(0x1ab);const _0x5ecee4=document[_0x646d9f(0x1b3)]('button');_0x5ecee4['id']='retry-connection-btn',_0x5ecee4['textContent']=_0x646d9f(0x1af),_0x5ecee4[_0x646d9f(0x19c)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0xeeb66=document['createElement']('button');_0xeeb66['id']=_0x646d9f(0x18e),_0xeeb66['textContent']='Reload\x20Page',_0xeeb66['style']['cssText']=_0x646d9f(0x197);const _0x593f37=document['createElement']('div');_0x593f37['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x593f37[_0x646d9f(0x19b)](_0x5ecee4),_0x593f37['appendChild'](_0xeeb66),_0x1ae935['appendChild'](_0xb1db12),_0x1ae935['appendChild'](_0x28fed7),_0x1ae935['appendChild'](_0x593f37),_0x33c5bc['appendChild'](_0x1ae935),document[_0x646d9f(0x193)]['appendChild'](_0x33c5bc),_0x5ecee4['addEventListener'](_0x646d9f(0x191),retryConnection),_0xeeb66['addEventListener']('click',()=>window['location'][_0x646d9f(0x1b4)]());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x2d8a5d=a22_0x1e87;clearTimeout(idleTimer);const _0x29a1e0=document['getElementById']('network-error-overlay');_0x29a1e0&&(_0x29a1e0['style']['display']=_0x2d8a5d(0x1b0)),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x3f46e1['suspendAllListeners']();}function retryConnection(){const _0x958c42=a22_0x1e87;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x4a0b27=document[_0x958c42(0x1b7)]('#network-error-overlay\x20p');_0x4a0b27&&(_0x4a0b27['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x1add48=document['getElementById']('retry-connection-btn');_0x1add48&&(_0x1add48[_0x958c42(0x18c)]=!![],_0x1add48[_0x958c42(0x19c)]['opacity']='0.5',_0x1add48[_0x958c42(0x19c)]['cursor']='not-allowed');return;}const _0x5dddff=document['getElementById'](_0x958c42(0x1b9));_0x5dddff&&(_0x5dddff[_0x958c42(0x19c)]['display']='none');window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console[_0x958c42(0x1a7)]('Retrying\x20connection...');try{const {rdlFirestore:_0x3bfc55}=window;if(_0x3bfc55){const _0x3f0db3=_0x3bfc55['collection']('system');_0x3bfc55[_0x958c42(0x198)](_0x3f0db3)['catch'](_0x444a80=>{const _0x52aa64=_0x958c42;console[_0x52aa64(0x190)](_0x52aa64(0x18f),_0x444a80),handleNetworkError();});}}catch(_0x304eb2){console['error']('Failed\x20to\x20test\x20connection:',_0x304eb2),handleNetworkError();}a22_0x3f46e1['resumeAllListeners']();}function suspendSession(){const _0x11b59b=a22_0x1e87;isSessionSuspended=!![];const _0x2b38bd=document['getElementById'](_0x11b59b(0x19e));_0x2b38bd&&(_0x2b38bd[_0x11b59b(0x19c)]['display']='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window[_0x11b59b(0x19d)]=!![],a22_0x3f46e1['suspendAllListeners']();}function resumeSession(){const _0x2b2d4c=a22_0x1e87;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x2a0bc3=document[_0x2b2d4c(0x1b2)]('idle-overlay');_0x2a0bc3&&(_0x2a0bc3['style']['display']='none'),console['log']('Session\x20resumed'),resetIdleTimer(),a22_0x3f46e1['resumeAllListeners'](),idleTimer&&Date[_0x2b2d4c(0x194)]()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console[_0x2b2d4c(0x1a7)]('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location']['reload']());}function initIdleTimeout(){const _0x555e46=a22_0x1e87,_0x4568ae=(function(){let _0x692571=!![];return function(_0x5a5caa,_0x10adeb){const _0x3583c0=_0x692571?function(){const _0x24e52e=a22_0x1e87;if(_0x10adeb){const _0x1c0096=_0x10adeb[_0x24e52e(0x195)](_0x5a5caa,arguments);return _0x10adeb=null,_0x1c0096;}}:function(){};return _0x692571=![],_0x3583c0;};}()),_0x215a1d=_0x4568ae(this,function(){const _0x438515=a22_0x1e87,_0x40f099=function(){const _0x42da0c=a22_0x1e87;let _0x44aa46;try{_0x44aa46=Function(_0x42da0c(0x18a)+_0x42da0c(0x1b8)+');')();}catch(_0x78945){_0x44aa46=window;}return _0x44aa46;},_0x1063c2=_0x40f099(),_0x47180b=_0x1063c2['console']=_0x1063c2['console']||{},_0x52295f=['log',_0x438515(0x19f),'info',_0x438515(0x190),'exception','table','trace'];for(let _0x1ffee0=0x0;_0x1ffee0<_0x52295f['length'];_0x1ffee0++){const _0x4295d8=_0x4568ae['constructor']['prototype']['bind'](_0x4568ae),_0x38a8a5=_0x52295f[_0x1ffee0],_0x4c1a1=_0x47180b[_0x38a8a5]||_0x4295d8;_0x4295d8['__proto__']=_0x4568ae[_0x438515(0x1a0)](_0x4568ae),_0x4295d8['toString']=_0x4c1a1[_0x438515(0x1ba)][_0x438515(0x1a0)](_0x4c1a1),_0x47180b[_0x38a8a5]=_0x4295d8;}});_0x215a1d(),createIdleOverlay();const _0x2f32cb=['mousedown',_0x555e46(0x1aa),'keypress','scroll',_0x555e46(0x1ad),'click'];_0x2f32cb['forEach'](_0x44732f=>{document['addEventListener'](_0x44732f,()=>{const _0x1578bc=a22_0x1e87;window[_0x1578bc(0x19a)]=Date['now'](),resetIdleTimer();},!![]);}),window[_0x555e46(0x192)](_0x555e46(0x190),function(_0x2ea3f8){const _0xb7ec0b=_0x555e46;_0x2ea3f8['error']&&(_0x2ea3f8[_0xb7ec0b(0x190)]['message']&&_0x2ea3f8[_0xb7ec0b(0x190)]['message']['includes'](_0xb7ec0b(0x1b6))||_0x2ea3f8['error'][_0xb7ec0b(0x1a9)]&&(_0x2ea3f8['error']['code']==='unavailable'||_0x2ea3f8['error']['code']==='resource-exhausted'||_0x2ea3f8[_0xb7ec0b(0x190)]['code']['includes'](_0xb7ec0b(0x1b6))))&&(handleNetworkError(),_0x2ea3f8[_0xb7ec0b(0x1a3)]());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x1e7689=_0x555e46;return console[_0x1e7689(0x1a7)]('Session\x20suspended:',window[_0x1e7689(0x19d)]),console['log']('Network\x20error:',window['RDL_NETWORK_ERROR']),console[_0x1e7689(0x1a7)](_0x1e7689(0x1a4),a22_0x3f46e1['activeListeners']['size']),console['log']('Pending\x20operations:',a22_0x3f46e1['pendingOperations']['size']),console[_0x1e7689(0x1a7)](_0x1e7689(0x1ac),a22_0x3f46e1['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a22_0x3f46e1[_0x1e7689(0x1a8)]['keys']()),'pendingOperations':Array['from'](a22_0x3f46e1['pendingOperations']['keys']()),'blockedCount':a22_0x3f46e1[_0x1e7689(0x1a5)]||0x0};},window['forceIdleTimeout']=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document[a22_0x3c13d3(0x18b)]===a22_0x3c13d3(0x1a1)?document[a22_0x3c13d3(0x192)]('DOMContentLoaded',initIdleTimeout):initIdleTimeout();