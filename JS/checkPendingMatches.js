function a8_0x121f(){const _0x15a374=['now','top','setItem','empty','userId','docs','height','addEventListener','10px','DOMContentLoaded','apply','all','getItem','uid','exception','style','none','currentUsername','display','onAuthStateChanged','error','data','trace','Error\x20checking\x20pending\x20matches:','zIndex','bind','getElementById','playersD2','winnerId','players','warn','playersD3','table','Error\x20fetching\x20username:','-5px','border','pendingMatchesCache','users'];a8_0x121f=function(){return _0x15a374;};return a8_0x121f();}const a8_0x2bfb6d=a8_0x5ace,a8_0x1744bb=(function(){let _0x5a44a=!![];return function(_0x462e71,_0x5dd09b){const _0xfba433=_0x5a44a?function(){const _0x3a6e83=a8_0x5ace;if(_0x5dd09b){const _0x119248=_0x5dd09b[_0x3a6e83(0x1a5)](_0x462e71,arguments);return _0x5dd09b=null,_0x119248;}}:function(){};return _0x5a44a=![],_0xfba433;};}()),a8_0x1567e0=a8_0x1744bb(this,function(){const _0x1c6f01=a8_0x5ace,_0x2f85eb=function(){let _0x213ba8;try{_0x213ba8=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x343690){_0x213ba8=window;}return _0x213ba8;},_0x3c0204=_0x2f85eb(),_0x75bc35=_0x3c0204['console']=_0x3c0204['console']||{},_0x44d734=['log',_0x1c6f01(0x1b9),'info',_0x1c6f01(0x1af),_0x1c6f01(0x1a9),_0x1c6f01(0x1bb),_0x1c6f01(0x1b1)];for(let _0x22c7ba=0x0;_0x22c7ba<_0x44d734['length'];_0x22c7ba++){const _0x3c05ca=a8_0x1744bb['constructor']['prototype'][_0x1c6f01(0x1b4)](a8_0x1744bb),_0x4214a6=_0x44d734[_0x22c7ba],_0x46ce7b=_0x75bc35[_0x4214a6]||_0x3c05ca;_0x3c05ca['__proto__']=a8_0x1744bb[_0x1c6f01(0x1b4)](a8_0x1744bb),_0x3c05ca['toString']=_0x46ce7b['toString'][_0x1c6f01(0x1b4)](_0x46ce7b),_0x75bc35[_0x4214a6]=_0x3c05ca;}});a8_0x1567e0();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a8_0x2bfb6d(0x1bf),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x280cc7=![]){const _0x4b64eb=a8_0x2bfb6d,_0x4c8ff8=Date['now'](),_0x47514b=checkNotificationCache();if(_0x47514b!==null&&!_0x280cc7){updateNotificationDot(_0x47514b);if(_0x4c8ff8-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x4c8ff8;const _0x4ad50f=auth['currentUser'];if(!_0x4ad50f){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x2ebd11,_0x37b102,_0x281e11]=await Promise['all']([checkForPendingMatchesInCollection(_0x4ad50f,'pendingMatches'),checkForPendingMatchesInCollection(_0x4ad50f,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x4ad50f,'pendingMatchesD3')]),_0x45ac3d=_0x2ebd11||_0x37b102||_0x281e11;updateNotificationDot(_0x45ac3d),updateNotificationCache(_0x45ac3d);}catch(_0x1bdaff){console[_0x4b64eb(0x1af)](_0x4b64eb(0x1b2),_0x1bdaff);}}async function checkForPendingMatchesInCollection(_0x544d91,_0xb8f29c){const _0x2f9898=a8_0x2bfb6d,_0x541de0=_0x544d91['uid'],_0x204d3f=_0x544d91['email'],_0x6e4af3=query(collection(db,_0xb8f29c),where(_0x2f9898(0x1b7),'==',_0x541de0),where('approved','==',![])),_0x2547b7=await getDocs(_0x6e4af3);if(!_0x2547b7[_0x2f9898(0x19e)])return!![];if(_0x204d3f){const _0x23b24a=query(collection(db,_0xb8f29c),where('winnerEmail','==',_0x204d3f),where('approved','==',![])),_0x53ea48=await getDocs(_0x23b24a);if(!_0x53ea48[_0x2f9898(0x19e)])return!![];}let _0x215bef=await getUsernameFromAllSources(_0x544d91);if(_0x215bef){const _0x589330=query(collection(db,_0xb8f29c),where('winnerUsername','==',_0x215bef),where('approved','==',![])),_0x35dd49=await getDocs(_0x589330);if(!_0x35dd49[_0x2f9898(0x19e)])return!![];}return![];}function a8_0x5ace(_0x3c8b95,_0x1597fc){const _0x1567e0=a8_0x121f();return a8_0x5ace=function(_0x1744bb,_0x412773){_0x1744bb=_0x1744bb-0x19b;let _0x121fcd=_0x1567e0[_0x1744bb];return _0x121fcd;},a8_0x5ace(_0x3c8b95,_0x1597fc);}async function getUsernameFromAllSources(_0x368b5e){const _0x57dc1b=a8_0x2bfb6d,_0x377a41=localStorage['getItem'](_0x57dc1b(0x1ac));if(_0x377a41)return _0x377a41;try{const [_0x268e9a,_0x30ec4e,_0xb97fa0]=await Promise[_0x57dc1b(0x1a6)]([getDocs(query(collection(db,_0x57dc1b(0x1b8)),where('userId','==',_0x368b5e[_0x57dc1b(0x1a8)]))),getDocs(query(collection(db,_0x57dc1b(0x1b6)),where('userId','==',_0x368b5e['uid']))),getDocs(query(collection(db,_0x57dc1b(0x1ba)),where(_0x57dc1b(0x19f),'==',_0x368b5e['uid'])))]);if(!_0x268e9a[_0x57dc1b(0x19e)]){const _0x538fba=_0x268e9a[_0x57dc1b(0x1a0)][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x538fba),_0x538fba;}if(!_0x30ec4e[_0x57dc1b(0x19e)]){const _0x38e46a=_0x30ec4e[_0x57dc1b(0x1a0)][0x0][_0x57dc1b(0x1b0)]()['username'];return localStorage['setItem'](_0x57dc1b(0x1ac),_0x38e46a),_0x38e46a;}if(!_0xb97fa0[_0x57dc1b(0x19e)]){const _0x5a640d=_0xb97fa0['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x5a640d),_0x5a640d;}const _0x2a16d5=await getDoc(doc(db,_0x57dc1b(0x1c0),_0x368b5e['uid']));if(_0x2a16d5['exists']()&&_0x2a16d5['data']()['username']){const _0x6a99b3=_0x2a16d5['data']()['username'];return localStorage[_0x57dc1b(0x19d)](_0x57dc1b(0x1ac),_0x6a99b3),_0x6a99b3;}}catch(_0x117b45){console['error'](_0x57dc1b(0x1bc),_0x117b45);}if(_0x368b5e['email'])return _0x368b5e['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x5997e2){const _0x3a97d8=a8_0x2bfb6d,_0x4da5ec={'status':_0x5997e2,'timestamp':Date[_0x3a97d8(0x19b)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x4da5ec));}function checkNotificationCache(){const _0x3f2922=a8_0x2bfb6d,_0x653672=localStorage[_0x3f2922(0x1a7)](NOTIFICATION_CACHE_KEY);if(!_0x653672)return null;try{const {status:_0x27dff6,timestamp:_0xb3dab3}=JSON['parse'](_0x653672),_0x59a0e4=Date['now']();if(_0x59a0e4-_0xb3dab3<CACHE_EXPIRY)return _0x27dff6;}catch(_0x51c10c){}return null;}export function updateNotificationDot(_0x61ef74){const _0x303924=new MutationObserver((_0x3821ff,_0x57a765)=>{const _0x32b683=a8_0x5ace,_0x3ece2d=document[_0x32b683(0x1b5)]('report-match-notification');_0x3ece2d&&(updateDotStyle(_0x3ece2d,_0x61ef74),_0x57a765['disconnect']());});_0x303924['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x29dbad=document['getElementById']('report-match-notification');_0x29dbad&&(updateDotStyle(_0x29dbad,_0x61ef74),_0x303924['disconnect']()),setTimeout(()=>_0x303924['disconnect'](),0x1388);}function updateDotStyle(_0x863bf2,_0x5e3364){const _0x4851b9=a8_0x2bfb6d;_0x5e3364?(_0x863bf2['style'][_0x4851b9(0x1ad)]='block',_0x863bf2['style']['backgroundColor']='#ff3b30',_0x863bf2['style']['width']=_0x4851b9(0x1a3),_0x863bf2[_0x4851b9(0x1aa)][_0x4851b9(0x1a1)]='10px',_0x863bf2['style']['position']='absolute',_0x863bf2['style'][_0x4851b9(0x19c)]=_0x4851b9(0x1bd),_0x863bf2['style']['right']='-8px',_0x863bf2['style']['borderRadius']='50%',_0x863bf2['style'][_0x4851b9(0x1be)]='2px\x20solid\x20white',_0x863bf2['style'][_0x4851b9(0x1b3)]='999'):_0x863bf2['style']['display']=_0x4851b9(0x1ab);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a8_0x2bfb6d(0x1a2)](a8_0x2bfb6d(0x1a4),()=>{const _0x5f4cb4=a8_0x2bfb6d;setTimeout(()=>checkPendingMatches(),0x1f4),auth[_0x5f4cb4(0x1ae)](()=>{const _0xa7a948=_0x5f4cb4;localStorage['removeItem'](_0xa7a948(0x1ac)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});