const a52_0x5c985f=a52_0x325b;function a52_0x325b(_0x676bec,_0x411eaa){const _0x571e88=a52_0xc1f1();return a52_0x325b=function(_0x47108d,_0x54ca55){_0x47108d=_0x47108d-0x66;let _0x3afe8b=_0x571e88[_0x47108d];return _0x3afe8b;},a52_0x325b(_0x676bec,_0x411eaa);}(function(_0x3acb5b,_0x36e618){const _0x584f3a=a52_0x325b,_0x2f9e4d=_0x3acb5b();while(!![]){try{const _0x5ac6c9=-parseInt(_0x584f3a(0x6c))/0x1*(parseInt(_0x584f3a(0x74))/0x2)+parseInt(_0x584f3a(0x94))/0x3+parseInt(_0x584f3a(0x83))/0x4+parseInt(_0x584f3a(0x81))/0x5*(parseInt(_0x584f3a(0x9e))/0x6)+parseInt(_0x584f3a(0x7a))/0x7*(parseInt(_0x584f3a(0x76))/0x8)+-parseInt(_0x584f3a(0x8c))/0x9*(parseInt(_0x584f3a(0x86))/0xa)+-parseInt(_0x584f3a(0x8a))/0xb;if(_0x5ac6c9===_0x36e618)break;else _0x2f9e4d['push'](_0x2f9e4d['shift']());}catch(_0x1a655d){_0x2f9e4d['push'](_0x2f9e4d['shift']());}}}(a52_0xc1f1,0x2accd));const a52_0x1c5140=(function(){let _0xb58510=!![];return function(_0x307ef1,_0x3d4b55){const _0x3e4f10=_0xb58510?function(){if(_0x3d4b55){const _0x2f1431=_0x3d4b55['apply'](_0x307ef1,arguments);return _0x3d4b55=null,_0x2f1431;}}:function(){};return _0xb58510=![],_0x3e4f10;};}()),a52_0x392589=a52_0x1c5140(this,function(){const _0x4b5cab=a52_0x325b;return a52_0x392589[_0x4b5cab(0x90)]()[_0x4b5cab(0x9c)](_0x4b5cab(0xa0))['toString']()[_0x4b5cab(0x8e)](a52_0x392589)[_0x4b5cab(0x9c)]('(((.+)+)+)+$');});a52_0x392589();const a52_0x54ca55=(function(){let _0x4ea0e8=!![];return function(_0xe3ca59,_0xc98549){const _0x42570=_0x4ea0e8?function(){const _0xfa9b18=a52_0x325b;if(_0xc98549){const _0x56a07c=_0xc98549[_0xfa9b18(0x99)](_0xe3ca59,arguments);return _0xc98549=null,_0x56a07c;}}:function(){};return _0x4ea0e8=![],_0x42570;};}()),a52_0x47108d=a52_0x54ca55(this,function(){const _0xbb2a50=a52_0x325b,_0x25697f=function(){const _0x4de04c=a52_0x325b;let _0x21a1ba;try{_0x21a1ba=Function(_0x4de04c(0x82)+_0x4de04c(0x84)+');')();}catch(_0x1372fa){_0x21a1ba=window;}return _0x21a1ba;},_0xaac73e=_0x25697f(),_0x3134cd=_0xaac73e[_0xbb2a50(0x96)]=_0xaac73e[_0xbb2a50(0x96)]||{},_0x382d7c=[_0xbb2a50(0x67),_0xbb2a50(0x95),_0xbb2a50(0x7f),'error',_0xbb2a50(0x68),_0xbb2a50(0x8d),_0xbb2a50(0x8b)];for(let _0x286b3a=0x0;_0x286b3a<_0x382d7c[_0xbb2a50(0x80)];_0x286b3a++){const _0x3d9822=a52_0x54ca55['constructor'][_0xbb2a50(0x98)]['bind'](a52_0x54ca55),_0x583a36=_0x382d7c[_0x286b3a],_0x2c461f=_0x3134cd[_0x583a36]||_0x3d9822;_0x3d9822[_0xbb2a50(0x7b)]=a52_0x54ca55['bind'](a52_0x54ca55),_0x3d9822[_0xbb2a50(0x90)]=_0x2c461f['toString'][_0xbb2a50(0x97)](_0x2c461f),_0x3134cd[_0x583a36]=_0x3d9822;}});a52_0x47108d();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a52_0xc1f1(){const _0x4890c5=['console','bind','prototype','apply','error','getElementById','search','cancel-reset','120ZwyJgj','seasons','(((.+)+)+)+$','Invalid\x20password\x20or\x20authentication\x20failed','docs','click','log','exception','metadata','season','eloRating','1240RNrcnF','Authentication\x20error:','none','push','Please\x20enter\x20your\x20password','resetSeason','currentUser','position','56SaExlZ','data','56YGFpnR','reset-password','credential','block','207333jhoEjh','__proto__','display','Error\x20resetting\x20season.\x20Please\x20try\x20again.','value','info','length','52675zjoehU','return\x20(function()\x20','235784zSlTCB','{}.constructor(\x22return\x20this\x22)(\x20)','style','150ySkUGC','email','players','addEventListener','5970580IsSozo','trace','513GBIKFC','table','constructor','seasonCount','toString','reset-confirmation','reload','Season\x20','830055VfJpzP','warn'];a52_0xc1f1=function(){return _0x4890c5;};return a52_0xc1f1();}class SeasonManager{constructor(){this['setupEventListeners']();}['setupEventListeners'](){const _0x279925=a52_0x325b,_0x2bffa5=document[_0x279925(0x9b)]('reset-season'),_0x4d9504=document['getElementById']('confirm-reset'),_0x3a1d55=document[_0x279925(0x9b)](_0x279925(0x9d));_0x2bffa5?.[_0x279925(0x89)]('click',()=>{const _0x38d796=_0x279925;document[_0x38d796(0x9b)]('reset-confirmation')[_0x38d796(0x85)][_0x38d796(0x7c)]=_0x38d796(0x79);}),_0x4d9504?.[_0x279925(0x89)](_0x279925(0x66),async()=>{const _0x1f8c36=_0x279925,_0x13df74=document[_0x1f8c36(0x9b)](_0x1f8c36(0x77)),_0x5c29e9=auth[_0x1f8c36(0x72)];if(!_0x5c29e9||!_0x13df74['value']){alert(_0x1f8c36(0x70));return;}try{const _0x405f6a=EmailAuthProvider[_0x1f8c36(0x78)](_0x5c29e9[_0x1f8c36(0x87)],_0x13df74[_0x1f8c36(0x7e)]);await reauthenticateWithCredential(_0x5c29e9,_0x405f6a),await this[_0x1f8c36(0x71)](),_0x13df74[_0x1f8c36(0x7e)]='',document[_0x1f8c36(0x9b)](_0x1f8c36(0x91))[_0x1f8c36(0x85)][_0x1f8c36(0x7c)]=_0x1f8c36(0x6e);}catch(_0x2f462e){alert(_0x1f8c36(0xa1)),console[_0x1f8c36(0x9a)](_0x1f8c36(0x6d),_0x2f462e);}}),_0x3a1d55?.[_0x279925(0x89)]('click',()=>{const _0x54e8ec=_0x279925,_0xf61888=document['getElementById'](_0x54e8ec(0x77));_0xf61888[_0x54e8ec(0x7e)]='',document['getElementById']('reset-confirmation')[_0x54e8ec(0x85)][_0x54e8ec(0x7c)]=_0x54e8ec(0x6e);});}async[a52_0x5c985f(0x71)](){const _0xa12a7f=a52_0x5c985f;try{const _0x5eb7a6=await getDoc(doc(db,_0xa12a7f(0x69),'seasonCount'));let _0x4db9d1=0x1;_0x5eb7a6['exists']()&&(_0x4db9d1=_0x5eb7a6[_0xa12a7f(0x75)]()['count']+0x1);const _0x4cc4bf=await getDocs(collection(db,_0xa12a7f(0x88))),_0x288696={'players':[],'date':new Date(),'seasonNumber':_0x4db9d1};for(const _0x4dd6ad of _0x4cc4bf[_0xa12a7f(0xa2)]){const _0x387cb1=_0x4dd6ad[_0xa12a7f(0x75)]();_0x288696[_0xa12a7f(0x88)][_0xa12a7f(0x6f)]({'username':_0x387cb1['username'],'position':_0x387cb1['position'],'eloRating':_0x387cb1[_0xa12a7f(0x6b)]||0x4b0}),await setDoc(doc(db,_0xa12a7f(0x88),_0x4dd6ad['id']),{..._0x387cb1,'eloRating':0x4b0,'position':_0x387cb1[_0xa12a7f(0x73)]});}await setDoc(doc(db,_0xa12a7f(0x9f),_0xa12a7f(0x6a)+_0x4db9d1),_0x288696),await setDoc(doc(db,_0xa12a7f(0x69),_0xa12a7f(0x8f)),{'count':_0x4db9d1}),alert(_0xa12a7f(0x93)+_0x4db9d1+'\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.'),location[_0xa12a7f(0x92)]();}catch(_0x351fec){console[_0xa12a7f(0x9a)]('Error\x20resetting\x20season:',_0x351fec),alert(_0xa12a7f(0x7d));}}}export const seasonManager=new SeasonManager();