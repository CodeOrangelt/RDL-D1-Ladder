function a48_0x3d81(_0x2cdb24,_0x370702){const _0xbe6e73=a48_0x39db();return a48_0x3d81=function(_0x21e797,_0x7584df){_0x21e797=_0x21e797-0x194;let _0x12fe41=_0xbe6e73[_0x21e797];return _0x12fe41;},a48_0x3d81(_0x2cdb24,_0x370702);}const a48_0x4d375a=a48_0x3d81;(function(_0x56fd06,_0x1642d3){const _0xc1c709=a48_0x3d81,_0x4fd186=_0x56fd06();while(!![]){try{const _0xaf922=parseInt(_0xc1c709(0x263))/0x1*(parseInt(_0xc1c709(0x287))/0x2)+parseInt(_0xc1c709(0x288))/0x3*(-parseInt(_0xc1c709(0x22c))/0x4)+-parseInt(_0xc1c709(0x200))/0x5*(parseInt(_0xc1c709(0x1ed))/0x6)+parseInt(_0xc1c709(0x26d))/0x7+-parseInt(_0xc1c709(0x1cc))/0x8+-parseInt(_0xc1c709(0x1e8))/0x9*(-parseInt(_0xc1c709(0x1e1))/0xa)+-parseInt(_0xc1c709(0x26f))/0xb;if(_0xaf922===_0x1642d3)break;else _0x4fd186['push'](_0x4fd186['shift']());}catch(_0x260cda){_0x4fd186['push'](_0x4fd186['shift']());}}}(a48_0x39db,0x1e165));const a48_0x5e3961=(function(){let _0x10feff=!![];return function(_0x5469ec,_0x26ac0a){const _0x59bf27=_0x10feff?function(){const _0x53eed3=a48_0x3d81;if(_0x26ac0a){const _0x1ec23a=_0x26ac0a[_0x53eed3(0x1bf)](_0x5469ec,arguments);return _0x26ac0a=null,_0x1ec23a;}}:function(){};return _0x10feff=![],_0x59bf27;};}()),a48_0x181090=a48_0x5e3961(this,function(){const _0xe2f17e=a48_0x3d81;return a48_0x181090['toString']()[_0xe2f17e(0x1ce)]('(((.+)+)+)+$')[_0xe2f17e(0x294)]()[_0xe2f17e(0x239)](a48_0x181090)[_0xe2f17e(0x1ce)](_0xe2f17e(0x1bd));});a48_0x181090();const a48_0x7584df=(function(){let _0x2e3ee5=!![];return function(_0xd776ac,_0x350ac7){const _0x5a4fd3=_0x2e3ee5?function(){const _0x259ccb=a48_0x3d81;if(_0x350ac7){const _0xd45a10=_0x350ac7[_0x259ccb(0x1bf)](_0xd776ac,arguments);return _0x350ac7=null,_0xd45a10;}}:function(){};return _0x2e3ee5=![],_0x5a4fd3;};}()),a48_0x21e797=a48_0x7584df(this,function(){const _0x55dfa4=a48_0x3d81;let _0x325b5f;try{const _0x3d773e=Function(_0x55dfa4(0x252)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x325b5f=_0x3d773e();}catch(_0x3ea1ea){_0x325b5f=window;}const _0x5ed2bc=_0x325b5f[_0x55dfa4(0x1fa)]=_0x325b5f[_0x55dfa4(0x1fa)]||{},_0x223ef7=['log',_0x55dfa4(0x255),_0x55dfa4(0x27f),_0x55dfa4(0x1f8),_0x55dfa4(0x2b0),_0x55dfa4(0x2a9),'trace'];for(let _0x2ecc8a=0x0;_0x2ecc8a<_0x223ef7[_0x55dfa4(0x264)];_0x2ecc8a++){const _0x5e0c2b=a48_0x7584df[_0x55dfa4(0x239)][_0x55dfa4(0x1f2)][_0x55dfa4(0x20d)](a48_0x7584df),_0xa3965c=_0x223ef7[_0x2ecc8a],_0x510739=_0x5ed2bc[_0xa3965c]||_0x5e0c2b;_0x5e0c2b[_0x55dfa4(0x29f)]=a48_0x7584df['bind'](a48_0x7584df),_0x5e0c2b['toString']=_0x510739['toString']['bind'](_0x510739),_0x5ed2bc[_0xa3965c]=_0x5e0c2b;}});a48_0x21e797();import{approveReport}from'./ladderalgorithm.js';import{approveReportD2}from'./ladderalgorithm-d2.js';import{approveReportD3}from'./ladderalgorithm-d3.js';import{checkPendingMatches,updatePendingMatchNotification,updateNotificationDot}from'./checkPendingMatches.js';import{collection,getDocs,query,where,orderBy,serverTimestamp,doc,setDoc,getDoc,addDoc,updateDoc,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentUserEmail=null,confirmationNotification=null,outstandingReportData=null,currentGameMode='D1',outstandingMatches=[];document[a48_0x4d375a(0x1af)]('DOMContentLoaded',async()=>{const _0x4c973d=a48_0x4d375a,_0x5721ce={'authWarning':document[_0x4c973d(0x1a1)](_0x4c973d(0x215)),'reportForm':document[_0x4c973d(0x1a1)](_0x4c973d(0x2ab)),'winnerUsername':document[_0x4c973d(0x1a1)](_0x4c973d(0x232)),'loserUsername':document[_0x4c973d(0x1a1)](_0x4c973d(0x20e)),'loserScore':document[_0x4c973d(0x1a1)](_0x4c973d(0x2a8)),'suicides':document[_0x4c973d(0x1a1)](_0x4c973d(0x1cd)),'mapPlayed':document[_0x4c973d(0x1a1)](_0x4c973d(0x229)),'loserComment':document[_0x4c973d(0x1a1)](_0x4c973d(0x221)),'reportError':document[_0x4c973d(0x1a1)](_0x4c973d(0x278)),'reportLightbox':document[_0x4c973d(0x1a1)](_0x4c973d(0x284))};Object[_0x4c973d(0x1fe)](_0x5721ce)[_0x4c973d(0x201)](([_0x41d3f9,_0x4729d7])=>{const _0x5122ad=_0x4c973d;!_0x4729d7&&console[_0x5122ad(0x255)]('Element\x20\x27'+_0x41d3f9+_0x5122ad(0x194));});const _0xdf7c6a=document[_0x4c973d(0x1a1)](_0x4c973d(0x285)),_0x448e9b=document[_0x4c973d(0x1a1)](_0x4c973d(0x295)),_0x4d4687=document[_0x4c973d(0x1a1)](_0x4c973d(0x21d));_0xdf7c6a[_0x4c973d(0x1af)](_0x4c973d(0x23e),()=>{const _0x2d1f5e=_0x4c973d;_0x42a31b('D1'),_0xdf7c6a[_0x2d1f5e(0x21c)][_0x2d1f5e(0x205)](_0x2d1f5e(0x1d2)),_0x448e9b[_0x2d1f5e(0x21c)][_0x2d1f5e(0x2ac)]('active'),_0x4d4687[_0x2d1f5e(0x21c)]['remove'](_0x2d1f5e(0x1d2));}),_0x448e9b[_0x4c973d(0x1af)](_0x4c973d(0x23e),()=>{const _0x5b356f=_0x4c973d;_0x42a31b('D2'),_0x448e9b[_0x5b356f(0x21c)][_0x5b356f(0x205)](_0x5b356f(0x1d2)),_0xdf7c6a['classList']['remove'](_0x5b356f(0x1d2)),_0x4d4687[_0x5b356f(0x21c)][_0x5b356f(0x2ac)]('active');}),_0x4d4687['addEventListener'](_0x4c973d(0x23e),()=>{const _0x569c78=_0x4c973d;_0x42a31b('D3'),_0x4d4687[_0x569c78(0x21c)][_0x569c78(0x205)](_0x569c78(0x1d2)),_0xdf7c6a[_0x569c78(0x21c)][_0x569c78(0x2ac)](_0x569c78(0x1d2)),_0x448e9b[_0x569c78(0x21c)][_0x569c78(0x2ac)](_0x569c78(0x1d2));});function _0x42a31b(_0x288844){const _0x2b8aeb=_0x4c973d;currentGameMode=_0x288844,console['log'](_0x2b8aeb(0x277)+currentGameMode),auth[_0x2b8aeb(0x198)]&&checkUserInLadderAndLoadOpponents(auth[_0x2b8aeb(0x198)][_0x2b8aeb(0x1c5)]);}setupAuthStateListener(_0x5721ce),setupReportForm(_0x5721ce),auth[_0x4c973d(0x198)]?(console[_0x4c973d(0x27b)]('User\x20already\x20logged\x20in,\x20checking\x20D1\x20ladder\x20status'),checkUserInLadderAndLoadOpponents(auth[_0x4c973d(0x198)][_0x4c973d(0x1c5)])):console['log']('No\x20user\x20logged\x20in\x20yet,\x20waiting\x20for\x20auth\x20state\x20change');});function setupAuthStateListener(_0x43ed9f){onAuthStateChanged(auth,async _0x2faa1a=>{_0x2faa1a?handleUserSignedIn(_0x2faa1a,_0x43ed9f):handleUserSignedOut(_0x43ed9f);});}async function handleUserSignedIn(_0x28c195,_0x229a4a){const _0x1271af=a48_0x4d375a;if(!_0x229a4a){console['error'](_0x1271af(0x292));return;}currentUserEmail=_0x28c195[_0x1271af(0x26b)]||null;const _0x4abfe9=_0x28c195[_0x1271af(0x1c5)];try{const _0x10d4c7=doc(db,'nonParticipants',_0x4abfe9);try{const _0x2f61cd=await getDoc(_0x10d4c7);console[_0x1271af(0x27b)]('Non-participant\x20check:',{'exists':_0x2f61cd[_0x1271af(0x271)](),'data':_0x2f61cd[_0x1271af(0x271)]()?_0x2f61cd[_0x1271af(0x230)]():null});if(_0x2f61cd[_0x1271af(0x271)]()&&_0x2f61cd[_0x1271af(0x230)]()[_0x1271af(0x19f)]===!![]){_0x229a4a['authWarning']&&(_0x229a4a[_0x1271af(0x2a5)][_0x1271af(0x250)][_0x1271af(0x266)]='block',_0x229a4a[_0x1271af(0x2a5)]['textContent']='Non-participants\x20cannot\x20report\x20games.');_0x229a4a[_0x1271af(0x236)]&&(_0x229a4a[_0x1271af(0x236)][_0x1271af(0x250)][_0x1271af(0x266)]=_0x1271af(0x291));return;}}catch(_0x47a453){console[_0x1271af(0x255)](_0x1271af(0x226),_0x47a453);}const _0x14992d=[_0x1271af(0x1ca),_0x1271af(0x260),_0x1271af(0x196),'playersDuos',_0x1271af(0x251)];let _0x2aad32=![],_0x3f52a5='';for(const _0x33eb8e of _0x14992d){try{const _0x17ef7a=doc(db,_0x33eb8e,_0x4abfe9),_0x119d50=await getDoc(_0x17ef7a);if(_0x119d50[_0x1271af(0x271)]()){_0x2aad32=!![],_0x3f52a5=_0x119d50[_0x1271af(0x230)]()['username'],console[_0x1271af(0x27b)](_0x1271af(0x238)+_0x33eb8e+_0x1271af(0x206)+_0x3f52a5);if(_0x33eb8e===_0x1271af(0x1ca)&&currentGameMode!=='D1'){currentGameMode='D1';const _0x538981=document[_0x1271af(0x1a1)](_0x1271af(0x285)),_0x1b6496=document[_0x1271af(0x1a1)]('d2-mode'),_0xcc2a92=document['getElementById'](_0x1271af(0x21d));_0x538981[_0x1271af(0x21c)][_0x1271af(0x205)](_0x1271af(0x1d2)),_0x1b6496['classList'][_0x1271af(0x2ac)]('active'),_0xcc2a92[_0x1271af(0x21c)][_0x1271af(0x2ac)](_0x1271af(0x1d2));}else{if(_0x33eb8e===_0x1271af(0x260)&&currentGameMode!=='D2'){currentGameMode='D2';const _0x2ebd0e=document[_0x1271af(0x1a1)](_0x1271af(0x285)),_0x35b434=document['getElementById'](_0x1271af(0x295)),_0x578751=document[_0x1271af(0x1a1)](_0x1271af(0x21d));_0x35b434[_0x1271af(0x21c)][_0x1271af(0x205)](_0x1271af(0x1d2)),_0x2ebd0e[_0x1271af(0x21c)][_0x1271af(0x2ac)](_0x1271af(0x1d2)),_0x578751['classList'][_0x1271af(0x2ac)]('active');}}break;}}catch(_0x5e9dd0){console[_0x1271af(0x255)]('Error\x20checking\x20'+_0x33eb8e+_0x1271af(0x234),_0x5e9dd0);}}if(!_0x2aad32){_0x229a4a[_0x1271af(0x2a5)]&&(_0x229a4a['authWarning'][_0x1271af(0x250)][_0x1271af(0x266)]='block',_0x229a4a['authWarning']['textContent']='You\x20are\x20not\x20registered\x20in\x20any\x20ladder.');_0x229a4a[_0x1271af(0x236)]&&(_0x229a4a[_0x1271af(0x236)][_0x1271af(0x250)][_0x1271af(0x266)]=_0x1271af(0x291));return;}const _0x35d148=await checkUserInLadderAndLoadOpponents(_0x4abfe9);if(!_0x35d148){console[_0x1271af(0x255)](_0x1271af(0x220)+currentGameMode+_0x1271af(0x19d));for(const _0x19fa96 of[_0x1271af(0x1ca),_0x1271af(0x260),_0x1271af(0x196)]){if(_0x19fa96===(currentGameMode==='D1'?_0x1271af(0x1ca):currentGameMode==='D2'?_0x1271af(0x260):'playersD3'))continue;const _0x22eabf=doc(db,_0x19fa96,_0x4abfe9);try{const _0x5caabf=await getDoc(_0x22eabf);if(_0x5caabf['exists']()){const _0x280841=_0x19fa96===_0x1271af(0x1ca)?'D1':_0x19fa96==='playersD2'?'D2':'D3';console[_0x1271af(0x27b)](_0x1271af(0x1e9)+_0x19fa96+_0x1271af(0x1d3)+_0x280841+_0x1271af(0x1e6));const _0x4d4907=document[_0x1271af(0x1a1)](_0x1271af(0x285)),_0x428629=document[_0x1271af(0x1a1)](_0x1271af(0x295)),_0x5bdac1=document[_0x1271af(0x1a1)](_0x1271af(0x21d));if(_0x280841==='D1')_0x4d4907['classList'][_0x1271af(0x205)](_0x1271af(0x1d2)),_0x428629[_0x1271af(0x21c)][_0x1271af(0x2ac)](_0x1271af(0x1d2)),_0x5bdac1[_0x1271af(0x21c)][_0x1271af(0x2ac)](_0x1271af(0x1d2));else _0x280841==='D2'?(_0x428629[_0x1271af(0x21c)][_0x1271af(0x205)]('active'),_0x4d4907[_0x1271af(0x21c)][_0x1271af(0x2ac)](_0x1271af(0x1d2)),_0x5bdac1[_0x1271af(0x21c)]['remove'](_0x1271af(0x1d2))):(_0x5bdac1[_0x1271af(0x21c)][_0x1271af(0x205)](_0x1271af(0x1d2)),_0x4d4907[_0x1271af(0x21c)][_0x1271af(0x2ac)](_0x1271af(0x1d2)),_0x428629[_0x1271af(0x21c)][_0x1271af(0x2ac)](_0x1271af(0x1d2)));currentGameMode=_0x280841,await checkUserInLadderAndLoadOpponents(_0x4abfe9);break;}}catch(_0x3e99ce){console[_0x1271af(0x255)](_0x1271af(0x1b6)+_0x19fa96+':',_0x3e99ce);}}}}catch(_0x3514ad){console['error'](_0x1271af(0x1a4),_0x3514ad);}}function handleUserSignedOut(_0x304887){const _0xa48d13=a48_0x4d375a;_0x304887[_0xa48d13(0x2a5)][_0xa48d13(0x250)][_0xa48d13(0x266)]=_0xa48d13(0x1b1),_0x304887[_0xa48d13(0x236)][_0xa48d13(0x250)][_0xa48d13(0x266)]=_0xa48d13(0x291),currentUserEmail=null;}async function updateUserDisplay(_0x4f3f07,_0x4cdaf3){const _0xf5f689=a48_0x4d375a,_0x2c877d=collection(db,_0xf5f689(0x1ca)),_0x1ee765=query(_0x2c877d,where(_0xf5f689(0x26b),'==',_0x4f3f07)),_0xa86c49=await getDocs(_0x1ee765);if(!_0xa86c49[_0xf5f689(0x24f)]){const _0x7f51dd=_0xa86c49[_0xf5f689(0x235)][0x0][_0xf5f689(0x230)]()['username'];_0x4cdaf3['loserUsername'][_0xf5f689(0x290)]=_0x7f51dd;}}async function populateWinnerDropdown(_0x158730){const _0x2d42f0=a48_0x4d375a;try{const _0x3f0be6=collection(db,_0x2d42f0(0x1ca)),_0x2353c8=await getDocs(_0x3f0be6);_0x158730['innerHTML']='<option\x20value=\x22\x22>Select\x20Winner</option>',!_0x2353c8['empty']&&_0x2353c8[_0x2d42f0(0x201)](_0x533826=>{const _0x2288cf=_0x2d42f0,_0x233f46=_0x533826['data']();if(_0x233f46['email']!==currentUserEmail){const _0x46e04d=document[_0x2288cf(0x270)]('option');_0x46e04d[_0x2288cf(0x244)]=_0x233f46[_0x2288cf(0x26b)],_0x46e04d[_0x2288cf(0x290)]=_0x233f46['username'],_0x158730['appendChild'](_0x46e04d);}});}catch(_0x1c1f46){console[_0x2d42f0(0x1f8)](_0x2d42f0(0x1a5),_0x1c1f46);throw _0x1c1f46;}}function setupReportForm(_0xf26f56){const _0x549666=a48_0x4d375a;if(!_0xf26f56[_0x549666(0x236)])return;_0xf26f56['reportForm']['addEventListener'](_0x549666(0x28b),async _0x44a753=>{const _0x60104d=_0x549666;_0x44a753[_0x60104d(0x204)]();try{await submitReport(_0xf26f56),_0xf26f56[_0x60104d(0x236)][_0x60104d(0x24c)](),alert(_0x60104d(0x1ac));}catch(_0x4b1192){console[_0x60104d(0x1f8)]('Error\x20submitting\x20report:',_0x4b1192),_0xf26f56[_0x60104d(0x212)]['textContent']=_0x60104d(0x1c1);}});}async function submitReport(_0x514f9a){const _0x5ce942=a48_0x4d375a,_0x1810ab=currentGameMode==='D1'?_0x5ce942(0x245):currentGameMode==='D2'?'pendingMatchesD2':_0x5ce942(0x28f),_0x328861=collection(db,_0x1810ab),_0x18726a=doc(_0x328861);try{const _0x5a2d90=auth['currentUser'];if(!_0x5a2d90)throw new Error(_0x5ce942(0x1cb));const _0x36477f=_0x5a2d90['uid'],_0x583d95=currentGameMode==='D1'?'players':currentGameMode==='D2'?'playersD2':'playersD3',_0x545df5=await getDoc(doc(db,_0x583d95,_0x36477f));if(!_0x545df5['exists']())throw new Error(_0x5ce942(0x27a));const _0x476f25=document['getElementById']('subgame-type'),_0x335d6c=_0x514f9a[_0x5ce942(0x269)]['value'];if(!_0x335d6c)throw new Error(_0x5ce942(0x26c));const _0x147bd3=query(collection(db,_0x583d95),where('username','==',_0x335d6c)),_0x48fb7b=await getDocs(_0x147bd3);if(_0x48fb7b[_0x5ce942(0x24f)])throw new Error(_0x5ce942(0x253));const _0x43ce5c=_0x48fb7b[_0x5ce942(0x235)][0x0][_0x5ce942(0x230)](),_0x5865a2=_0x48fb7b[_0x5ce942(0x235)][0x0]['id'],_0x2258ce={'matchId':_0x18726a['id'],'loserUsername':_0x545df5['data']()[_0x5ce942(0x1eb)],'loserId':_0x36477f,'winnerUsername':_0x43ce5c[_0x5ce942(0x1eb)],'winnerId':_0x5865a2,'loserScore':_0x514f9a[_0x5ce942(0x261)][_0x5ce942(0x244)],'loserSuicides':_0x514f9a[_0x5ce942(0x1cd)][_0x5ce942(0x244)],'mapPlayed':_0x514f9a[_0x5ce942(0x243)]['value'],'loserComment':_0x514f9a['loserComment']['value'],'subgameType':_0x476f25?_0x476f25[_0x5ce942(0x244)]:'','gameMode':currentGameMode,'approved':![],'createdAt':serverTimestamp(),'winnerOldElo':_0x43ce5c[_0x5ce942(0x293)]||null,'losersOldElo':_0x545df5[_0x5ce942(0x230)]()[_0x5ce942(0x293)]||null};await setDoc(_0x18726a,_0x2258ce),console['log']('Match\x20reported\x20in\x20'+_0x1810ab+_0x5ce942(0x1de)+_0x18726a['id']),_0x514f9a['reportError'][_0x5ce942(0x290)]='Game\x20reported\x20successfully!',_0x514f9a[_0x5ce942(0x212)][_0x5ce942(0x250)]['color']='green',updatePendingMatchNotification();}catch(_0x561ad5){console['error'](_0x5ce942(0x1cf),_0x561ad5),_0x514f9a[_0x5ce942(0x212)][_0x5ce942(0x290)]=_0x5ce942(0x273)+_0x561ad5[_0x5ce942(0x1f1)],_0x514f9a[_0x5ce942(0x212)][_0x5ce942(0x250)]['color']=_0x5ce942(0x1a0);throw _0x561ad5;}}function a48_0x39db(){const _0x24ec55=['function','options','\x20for\x20game\x20mode:\x20','\x20ladder.\x20Checking\x20other\x20ladders.','cursor','isNonParticipant','red','getElementById','\x20moved\x20to\x20position\x20','RejectedD1','Error\x20during\x20sign-in\x20handling:','Error\x20populating\x20winner\x20dropdown:','No\x20matches\x20found\x20by\x20email\x20either,\x20trying\x20winnerUsername','No\x20reason\x20provided','loserId','showMatchLightbox','color','Lightbox\x20element\x20not\x20found','Game\x20reported\x20successfully.','Error\x20rescinding\x20report:','Error\x20loading\x20opponents\x20list:','addEventListener','padding','block','Not\x20registered\x20in\x20this\x20ladder','backgroundColor','toDate','lightbox-map','Error\x20checking\x20','.edit-report-btn','winner-score','Checking\x20if\x20you\x20are\x20registered\x20in\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>','No\x20loser\x20found\x20for\x20this\x20match','from','(((.+)+)+)+$','Error\x20rejecting\x20report:','apply','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20view-detail-btn\x22\x20data-id=\x22','Error\x20reporting\x20game.\x20Please\x20try\x20again.','\x20rejected\x20successfully','Showing\x20lightbox','Found\x20buttons\x20container:','uid','\x22>Rescind\x20Report</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#d32f2f','borderRadius','default\x20collection','players','User\x20not\x20authenticated','488176vrbaPu','suicides','search','Error\x20submitting\x20report:','winnerId','querySelector','active',',\x20switching\x20to\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20ladder.','removeAttribute','catch','button','view-outstanding-container','Error\x20checking\x20ladder\x20membership.\x20Please\x20try\x20again\x20later.','innerHTML','onAuthStateChanged','Loser','\x20with\x20ID:\x20','Using\x20collection:\x20','approve-button','20APzMyw','rgba(255,\x20255,\x20255,\x200.05)','\x20matches\x20found','Query\x20by\x20winnerUsername\x20results:\x20','scrollIntoView','\x20mode','Error\x20fetching\x20player\x20data.\x20Please\x20try\x20again.','1060947lSDKIl','User\x20found\x20in\x20','Error\x20rejecting\x20match:\x20','username','Found\x20pending\x20match:','355962mCtNaP','Error\x20processing\x20player\x20data:','editReport','Winner','message','prototype','onsubmit','position','lightbox-loser','No\x20authenticated\x20user\x20found','Error\x20approving\x20report:','error','replaceChild','console','\x20(ELO:\x20','toLocaleDateString','gameMode','entries','No\x20opponents\x20available','5LAWYsH','forEach','parentNode','Using\x20players\x20collection:\x20','preventDefault','add','\x20with\x20username:\x20','cancel-button','type','admin@ladder.com','rescindReport','Error:\x20Loser\x20data\x20not\x20found.','smooth','bind','loser-username','view-outstanding-btn','<option\x20value=\x22\x22>Select\x20Opponent</option>','sort','reportError','setAttribute','reload','auth-warning','\x22>Edit\x20Report</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20danger-button\x20rescind-report-btn\x22\x20data-id=\x22','all','\x20vs\x20','You\x20are\x20not\x20registered\x20in\x20the\x20','pointer','loserComment','classList','d3-mode','No\x20matches\x20found\x20by\x20winnerId,\x20trying\x20winnerEmail','subgame-type','User\x20is\x20not\x20in\x20the\x20','loser-comment','readOnly','Winner\x20','Cancel\x20Edit','No\x20position\x20change\x20needed;\x20winner\x20is\x20already\x20above\x20the\x20loser.','Error\x20checking\x20non-participant\x20status:','Update\x20Report','fontWeight','map-played','Unknown\x20date','undefined','17656HwAwEv','lightbox-comment','approved','getAttribute','data','Unknown','winner-username','disabled','\x20collection:','docs','reportForm','Are\x20you\x20sure\x20you\x20want\x20to\x20rescind\x20this\x20match\x20report\x20against\x20','User\x20found\x20in\x20collection\x20','constructor','insertBefore','find','lightbox-loser-score','Error\x20rejecting\x20match:','click','winner-suicides','No\x20winner\x20found\x20for\x20this\x20match','You\x20(','Loading\x20opponents\x20from\x20collection:\x20','mapPlayed','value','pendingMatches','cloneNode','selected','then','No\x20pending\x20matches\x20found\x20for\x20this\x20user','createdAt','lightbox-subgame','reset','Error\x20loading\x20opponents.\x20Please\x20try\x20again\x20later.','Report\x20has\x20been\x20successfully\x20rescinded.','empty','style','playersCTF','return\x20(function()\x20','Selected\x20opponent\x20not\x20found','outstanding-modal','warn','target','call','Checking\x20reports\x20for\x20user:\x20','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Map:\x20','Failed\x20to\x20update\x20report.\x20Please\x20try\x20again.','No\x20comment','winnerEmail','close-outstanding-btn','btn','show','playersD2','loserScore','marginRight','87827wpSVhn','length','lightbox-suicides','display','opponent','querySelectorAll','winnerUsername','<p>No\x20outstanding\x20matches\x20found\x20in\x20the\x20current\x20game\x20mode.</p>','email','Please\x20select\x20an\x20opponent','82040VinqtU','Standard\x20Match','669119NyOunL','createElement','exists','You\x20must\x20be\x20logged\x20in\x20to\x20reject\x20a\x20match','Error:\x20','subgameType','.lightbox-buttons','#6a1b9a','Game\x20mode\x20set\x20to:\x20','report-error','prepend','Your\x20player\x20profile\x20not\x20found','log','size','Report\x20Game','data-edit-id','info','outstanding-matches-list','button[type=\x22submit\x22]','DOMContentLoaded','lightbox-winner','report-lightbox','d1-mode','pendingMatchesD2','2HprbNB','21nxeRml','8px\x2016px','cancel-edit-btn','submit','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Score:\x20?\x20-\x20','.rescind-report-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-item\x22\x20data-id=\x22','pendingMatchesD3','textContent','none','Elements\x20object\x20is\x20null\x20or\x20undefined','eloRating','toString','d2-mode','fetchOutstandingMatches','Winner:\x20','Checking\x20if\x20user\x20exists\x20in\x20collection:\x20','Match\x20report\x20rejected\x20successfully','loserEmail','reject-button','loserSuicides','white','Query\x20by\x20winnerEmail\x20results:\x20','__proto__','Error\x20checking\x20outstanding\x20reports:','className','Report\x20Data\x20in\x20autoFillReportForm:','Not\x20specified','Match\x20','authWarning','winnerOldElo','Rejecting\x20match\x20','loser-score','table','push','report-form','remove','Match\x20approved\x20successfully','4px','option','exception','loserUsername','\x27\x20not\x20found\x20in\x20the\x20DOM','button\x20danger-button','playersD3','brian2af@outlook.com','currentUser','RejectedD2'];a48_0x39db=function(){return _0x24ec55;};return a48_0x39db();}async function checkForOutstandingReports(_0x44dc9f,_0x55a3d4,_0x5562cb=null){const _0xbda977=a48_0x4d375a;console[_0xbda977(0x27b)](_0xbda977(0x258)+_0x44dc9f+'\x20in\x20'+(_0x5562cb||_0xbda977(0x1c9)));const _0x591d9b=_0x5562cb||(currentGameMode==='D1'?_0xbda977(0x245):currentGameMode==='D2'?_0xbda977(0x286):_0xbda977(0x28f));console[_0xbda977(0x27b)](_0xbda977(0x1df)+_0x591d9b);try{const _0x54fda7=auth[_0xbda977(0x198)];if(!_0x54fda7){console['log'](_0xbda977(0x1f6));return;}const _0x371f01=_0x54fda7[_0xbda977(0x1c5)],_0x516f22=collection(db,_0x591d9b),_0x692e6=query(_0x516f22,where(_0xbda977(0x1d0),'==',_0x371f01),where(_0xbda977(0x22e),'==',![]));let _0x275010=await getDocs(_0x692e6);console[_0xbda977(0x27b)]('Query\x20by\x20winnerId\x20results:\x20'+_0x275010[_0xbda977(0x27c)]+_0xbda977(0x1e3));if(_0x275010[_0xbda977(0x24f)]&&_0x54fda7[_0xbda977(0x26b)]){console[_0xbda977(0x27b)](_0xbda977(0x21e));const _0x3b60ae=query(_0x516f22,where('winnerEmail','==',_0x54fda7['email']),where(_0xbda977(0x22e),'==',![]));_0x275010=await getDocs(_0x3b60ae),console[_0xbda977(0x27b)](_0xbda977(0x29e)+_0x275010[_0xbda977(0x27c)]+_0xbda977(0x1e3));}if(_0x275010[_0xbda977(0x24f)]){console[_0xbda977(0x27b)](_0xbda977(0x1a6));const _0x8ddef7=currentGameMode==='D1'?'players':'playersD2',_0x2a506c=await getDoc(doc(db,_0x8ddef7,_0x371f01));if(_0x2a506c[_0xbda977(0x271)]()&&_0x2a506c[_0xbda977(0x230)]()['username']){const _0x2ae1ff=_0x2a506c[_0xbda977(0x230)]()[_0xbda977(0x1eb)],_0x14c62d=query(_0x516f22,where(_0xbda977(0x269),'==',_0x2ae1ff),where(_0xbda977(0x22e),'==',![]));_0x275010=await getDocs(_0x14c62d),console['log'](_0xbda977(0x1e4)+_0x275010[_0xbda977(0x27c)]+_0xbda977(0x1e3));}}if(!_0x275010[_0xbda977(0x24f)]){const _0x1d4796=_0x275010['docs'][0x0][_0xbda977(0x230)]();return console[_0xbda977(0x27b)](_0xbda977(0x1ec),_0x1d4796),_0x1d4796['id']=_0x275010[_0xbda977(0x235)][0x0]['id'],autoFillReportForm(_0x1d4796),updateNotificationDot(!![]),!![];}else return console[_0xbda977(0x27b)](_0xbda977(0x249)),updateNotificationDot(![]),![];}catch(_0x566013){console[_0xbda977(0x1f8)](_0xbda977(0x2a0),_0x566013);}}function autoFillReportForm(_0x344aad){const _0x199d36=a48_0x4d375a;console[_0x199d36(0x27b)](_0x199d36(0x2a2),_0x344aad);if(_0x344aad){const _0x34deba=parseInt(_0x344aad['loserScore']||'0'),_0x519681=_0x34deba<0x12?0x14:_0x34deba+0x2,_0x307fc9=_0x344aad[_0x199d36(0x1fd)]||currentGameMode,_0x590431=_0x307fc9==='D1'?'players':_0x307fc9==='D2'?_0x199d36(0x260):'playersD3';console[_0x199d36(0x27b)](_0x199d36(0x203)+_0x590431+_0x199d36(0x19c)+_0x307fc9);let _0x1277c2;_0x344aad[_0x199d36(0x1d0)]?_0x1277c2=getDoc(doc(db,_0x590431,_0x344aad['winnerId']))[_0x199d36(0x248)](_0x1074ac=>_0x1074ac['exists']()?{'id':_0x1074ac['id'],'data':_0x1074ac[_0x199d36(0x230)]()}:null):_0x1277c2=getDocs(query(collection(db,_0x590431),where(_0x199d36(0x1eb),'==',_0x344aad[_0x199d36(0x269)])))[_0x199d36(0x248)](_0x4818c4=>!_0x4818c4[_0x199d36(0x24f)]?{'id':_0x4818c4[_0x199d36(0x235)][0x0]['id'],'data':_0x4818c4[_0x199d36(0x235)][0x0][_0x199d36(0x230)]()}:null);let _0x3cb662;_0x344aad[_0x199d36(0x1a8)]?_0x3cb662=getDoc(doc(db,_0x590431,_0x344aad[_0x199d36(0x1a8)]))['then'](_0x23773e=>_0x23773e[_0x199d36(0x271)]()?{'id':_0x23773e['id'],'data':_0x23773e[_0x199d36(0x230)]()}:null):_0x3cb662=getDocs(query(collection(db,_0x590431),where(_0x199d36(0x1eb),'==',_0x344aad['loserUsername'])))[_0x199d36(0x248)](_0x574732=>!_0x574732[_0x199d36(0x24f)]?{'id':_0x574732[_0x199d36(0x235)][0x0]['id'],'data':_0x574732[_0x199d36(0x235)][0x0]['data']()}:null),Promise[_0x199d36(0x217)]([_0x1277c2,_0x3cb662])[_0x199d36(0x248)](([_0x5dafdb,_0x20590d])=>{const _0x192a54=_0x199d36;if(!_0x5dafdb){console[_0x192a54(0x1f8)](_0x192a54(0x240)),alert('Error:\x20Winner\x20data\x20not\x20found.');return;}if(!_0x20590d){console[_0x192a54(0x1f8)](_0x192a54(0x1bb)),alert(_0x192a54(0x20b));return;}const _0x3d6318=_0x344aad[_0x192a54(0x2a6)]!=null?_0x344aad[_0x192a54(0x2a6)]:_0x5dafdb['data'][_0x192a54(0x293)],_0x293db0=_0x344aad['losersOldElo']!=null?_0x344aad['losersOldElo']:_0x20590d[_0x192a54(0x230)][_0x192a54(0x293)],_0xf22c2a=_0x5dafdb['data']['username'],_0x1316e4=_0x20590d[_0x192a54(0x230)][_0x192a54(0x1eb)];console[_0x192a54(0x27b)](_0x192a54(0x297)+_0xf22c2a+_0x192a54(0x1fb)+_0x3d6318+'),\x20Loser:\x20'+_0x1316e4+_0x192a54(0x1fb)+_0x293db0+')');const _0x482819=document['getElementById'](_0x192a54(0x284));if(!_0x482819){console['error'](_0x192a54(0x1ab));return;}document['getElementById']('lightbox-winner')[_0x192a54(0x290)]=_0xf22c2a,document[_0x192a54(0x1a1)](_0x192a54(0x1f5))['textContent']=_0x1316e4,document[_0x192a54(0x1a1)]('lightbox-loser-score')[_0x192a54(0x290)]=_0x344aad[_0x192a54(0x261)]||'0',document['getElementById'](_0x192a54(0x265))[_0x192a54(0x290)]=_0x344aad['loserSuicides']||'0',document['getElementById'](_0x192a54(0x1b5))[_0x192a54(0x290)]=_0x344aad[_0x192a54(0x243)]||_0x192a54(0x2a3),document[_0x192a54(0x1a1)](_0x192a54(0x22d))['textContent']=_0x344aad[_0x192a54(0x21b)]||_0x192a54(0x25b),document[_0x192a54(0x1a1)](_0x192a54(0x24b))[_0x192a54(0x290)]=_0x344aad['subgameType']||'Standard\x20Match';const _0x125f46=document[_0x192a54(0x1a1)](_0x192a54(0x1b8));_0x125f46&&(_0x125f46[_0x192a54(0x244)]=_0x519681,_0x125f46[_0x192a54(0x222)]=!![],_0x125f46[_0x192a54(0x250)]['backgroundColor']=_0x192a54(0x1e2));showLightbox();const _0x110ef7=document[_0x192a54(0x1d1)](_0x192a54(0x275));if(_0x110ef7){console['log'](_0x192a54(0x1c4),_0x110ef7);const _0x4a66d8=document[_0x192a54(0x1a1)](_0x192a54(0x29b));_0x4a66d8&&_0x4a66d8[_0x192a54(0x2ac)]();const _0x5f539f=document[_0x192a54(0x270)](_0x192a54(0x1d8));_0x5f539f['id']='reject-button',_0x5f539f[_0x192a54(0x2a1)]=_0x192a54(0x195),_0x5f539f[_0x192a54(0x290)]='Reject\x20Match',_0x5f539f[_0x192a54(0x250)][_0x192a54(0x1b3)]=_0x192a54(0x1c7),_0x5f539f[_0x192a54(0x250)][_0x192a54(0x1aa)]='white',_0x5f539f[_0x192a54(0x250)]['marginRight']='10px',_0x5f539f['style'][_0x192a54(0x1b0)]=_0x192a54(0x289),_0x5f539f['style']['border']=_0x192a54(0x291),_0x5f539f[_0x192a54(0x250)][_0x192a54(0x1c8)]=_0x192a54(0x2ae),_0x5f539f['style'][_0x192a54(0x19e)]=_0x192a54(0x21a),_0x5f539f['style'][_0x192a54(0x228)]='bold',_0x110ef7[_0x192a54(0x279)](_0x5f539f),console['log']('Reject\x20button\x20added:',_0x5f539f);}const _0x466f35=document[_0x192a54(0x1a1)](_0x192a54(0x1e0)),_0x1774b1=document[_0x192a54(0x1a1)](_0x192a54(0x29b)),_0x291486=document['getElementById'](_0x192a54(0x207));if(_0x466f35){const _0x865fbf=_0x466f35[_0x192a54(0x246)](!![]);_0x466f35[_0x192a54(0x202)][_0x192a54(0x1f9)](_0x865fbf,_0x466f35),_0x865fbf['addEventListener'](_0x192a54(0x23e),async function(){const _0x52c981=_0x192a54;try{const _0x162dcf=document[_0x52c981(0x1a1)](_0x52c981(0x1b8))[_0x52c981(0x244)],_0x1639ab=document[_0x52c981(0x1a1)](_0x52c981(0x23f))[_0x52c981(0x244)]||'0',_0xf8038b=document['getElementById']('winner-comment')[_0x52c981(0x244)]||'';console[_0x52c981(0x27b)]('Current\x20user\x20info:',{'uid':auth[_0x52c981(0x198)]?.[_0x52c981(0x1c5)],'email':auth[_0x52c981(0x198)]?.[_0x52c981(0x26b)],'isAdmin':auth[_0x52c981(0x198)]?.[_0x52c981(0x26b)]===_0x52c981(0x209)||auth[_0x52c981(0x198)]?.[_0x52c981(0x26b)]===_0x52c981(0x197)});const _0x30a89f=_0x344aad[_0x52c981(0x1fd)]||currentGameMode;if(_0x30a89f==='D3')await approveReportD3(_0x344aad['id'],_0x162dcf,_0x1639ab,_0xf8038b);else _0x30a89f==='D2'?await approveReportD2(_0x344aad['id'],_0x162dcf,_0x1639ab,_0xf8038b):await approveReport(_0x344aad['id'],_0x162dcf,_0x1639ab,_0xf8038b);document[_0x52c981(0x1a1)](_0x52c981(0x284))[_0x52c981(0x250)][_0x52c981(0x266)]=_0x52c981(0x291),alert(_0x52c981(0x2ad)),updatePendingMatchNotification(),location[_0x52c981(0x214)]();const _0x47c04d=_0x30a89f==='D1'?_0x52c981(0x1ca):_0x52c981(0x260),_0x3f3815=doc(db,_0x47c04d,_0x5dafdb['id']),_0x1880da=doc(db,_0x47c04d,_0x20590d['id']),[_0x4e3718,_0x4e4111]=await Promise[_0x52c981(0x217)]([getDoc(_0x3f3815),getDoc(_0x1880da)]);if(_0x4e3718['exists']()&&_0x4e4111[_0x52c981(0x271)]()){const _0x34aa01=_0x4e3718['data'](),_0x4f2c48=_0x4e4111[_0x52c981(0x230)]();_0x34aa01[_0x52c981(0x1f4)]>_0x4f2c48['position']?(await updateDoc(_0x3f3815,{'position':_0x4f2c48[_0x52c981(0x1f4)]}),console[_0x52c981(0x27b)](_0x52c981(0x223)+_0x34aa01[_0x52c981(0x1eb)]+_0x52c981(0x1a2)+_0x4f2c48[_0x52c981(0x1f4)])):console['log'](_0x52c981(0x225));}}catch(_0x5c44d7){console[_0x52c981(0x1f8)](_0x52c981(0x1f7),_0x5c44d7),alert('Error\x20approving\x20match:\x20'+_0x5c44d7[_0x52c981(0x1f1)]);}});}if(_0x1774b1){const _0x2aacc7=_0x1774b1[_0x192a54(0x246)](!![]);_0x1774b1['parentNode'][_0x192a54(0x1f9)](_0x2aacc7,_0x1774b1),_0x2aacc7[_0x192a54(0x1af)]('click',async function(){const _0x2f0aa1=_0x192a54;try{const _0x5d6b6b=prompt('Please\x20provide\x20a\x20reason\x20for\x20rejecting\x20this\x20match\x20report:','');if(_0x5d6b6b===null)return;await rejectReport(_0x344aad['id'],_0x5d6b6b),hideLightbox(),alert(_0x2f0aa1(0x299)),updatePendingMatchNotification(),location[_0x2f0aa1(0x214)]();}catch(_0x450556){console['error'](_0x2f0aa1(0x1be),_0x450556),alert(_0x2f0aa1(0x1ea)+_0x450556[_0x2f0aa1(0x1f1)]);}});}if(_0x291486){const _0x5c095c=_0x291486[_0x192a54(0x246)](!![]);_0x291486[_0x192a54(0x202)][_0x192a54(0x1f9)](_0x5c095c,_0x291486),_0x5c095c[_0x192a54(0x1af)](_0x192a54(0x23e),hideLightbox);}})[_0x199d36(0x1d7)](_0x208cf6=>{const _0x5dbb99=_0x199d36;console['error'](_0x5dbb99(0x1ee),_0x208cf6),alert(_0x5dbb99(0x1e7));});}}function showLightbox(){const _0x319375=a48_0x4d375a;console[_0x319375(0x27b)](_0x319375(0x1c3));const _0x2202d3=document[_0x319375(0x1a1)](_0x319375(0x284));if(!_0x2202d3){console[_0x319375(0x1f8)](_0x319375(0x1ab));return;}_0x2202d3[_0x319375(0x21c)][_0x319375(0x205)]('show');}function hideLightbox(){const _0x5e2d4d=a48_0x4d375a,_0x2d37e1=document[_0x5e2d4d(0x1a1)](_0x5e2d4d(0x284));_0x2d37e1[_0x5e2d4d(0x21c)][_0x5e2d4d(0x2ac)](_0x5e2d4d(0x25f));}async function rejectReport(_0x119a86,_0x43c745){const _0x170b84=a48_0x4d375a;try{const _0x42d405=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':_0x170b84(0x28f),_0x55ca46=currentGameMode==='D1'?_0x170b84(0x1a3):currentGameMode==='D2'?_0x170b84(0x199):'RejectedD3';console[_0x170b84(0x27b)](_0x170b84(0x2a7)+_0x119a86+'\x20from\x20'+_0x42d405+'\x20to\x20'+_0x55ca46);const _0x62c556=auth[_0x170b84(0x198)];if(!_0x62c556)throw new Error(_0x170b84(0x272));const _0x3a7bbb=doc(db,_0x42d405,_0x119a86),_0x209c79=await getDoc(_0x3a7bbb);if(!_0x209c79[_0x170b84(0x271)]())throw new Error('Match\x20report\x20not\x20found');const _0x227785=_0x209c79[_0x170b84(0x230)](),_0x1fb894=_0x227785[_0x170b84(0x1d0)]&&_0x227785[_0x170b84(0x1d0)]===_0x62c556['uid']||_0x227785[_0x170b84(0x25c)]&&_0x227785[_0x170b84(0x25c)]===_0x62c556[_0x170b84(0x26b)]||_0x227785[_0x170b84(0x269)]&&_0x227785[_0x170b84(0x269)]===await getUsernameFromId(_0x62c556[_0x170b84(0x1c5)]);if(!_0x1fb894)throw new Error('Only\x20the\x20winner\x20of\x20the\x20match\x20can\x20reject\x20it');const _0x49db6a={..._0x227785,'rejectedAt':serverTimestamp(),'rejectedBy':_0x62c556[_0x170b84(0x1c5)],'rejectionReason':_0x43c745||_0x170b84(0x1a7),'originalDocumentId':_0x119a86},_0xbbd7f=doc(collection(db,_0x55ca46));return await setDoc(_0xbbd7f,_0x49db6a),await deleteDoc(_0x3a7bbb),console[_0x170b84(0x27b)](_0x170b84(0x2a4)+_0x119a86+_0x170b84(0x1c2)),updatePendingMatchNotification(),!![];}catch(_0x34b36c){console[_0x170b84(0x1f8)](_0x170b84(0x23d),_0x34b36c);throw _0x34b36c;}}async function getUsernameFromId(_0xc1a745){const _0xf08f4e=a48_0x4d375a,_0x399da6=await getDoc(doc(db,'players',_0xc1a745));if(_0x399da6[_0xf08f4e(0x271)]())return _0x399da6['data']()['username'];const _0x993b20=await getDoc(doc(db,_0xf08f4e(0x260),_0xc1a745));if(_0x993b20[_0xf08f4e(0x271)]())return _0x993b20['data']()[_0xf08f4e(0x1eb)];return null;}async function loadOpponentsList(_0x4d0a65){const _0x13880b=a48_0x4d375a;try{const _0x32260a=document['getElementById']('report-error'),_0xe8987d=document[_0x13880b(0x1a1)]('loser-username'),_0x4aebd5=document[_0x13880b(0x1a1)](_0x13880b(0x232));if(!_0x32260a||!_0xe8987d||!_0x4aebd5){console['error']('Required\x20elements\x20not\x20found\x20for\x20loadOpponentsList');return;}const _0x5dc6a5=currentGameMode==='D1'?_0x13880b(0x1ca):currentGameMode==='D2'?'playersD2':_0x13880b(0x196);console['log'](_0x13880b(0x242)+_0x5dc6a5);const _0x4bee45=await getDoc(doc(db,_0x5dc6a5,_0x4d0a65));if(!_0x4bee45['exists']()){_0x32260a['textContent']=_0x13880b(0x219)+currentGameMode+_0x13880b(0x1d5),_0x32260a['style'][_0x13880b(0x1aa)]=_0x13880b(0x1a0),_0xe8987d[_0x13880b(0x290)]=_0x13880b(0x1b2),_0x4aebd5['disabled']=!![];return;}const _0x1eb5eb=_0x4bee45[_0x13880b(0x230)](),_0x4810eb=_0x1eb5eb[_0x13880b(0x1eb)];_0xe8987d['textContent']=_0x13880b(0x241)+_0x4810eb+')',_0x32260a['textContent']='',_0x4aebd5[_0x13880b(0x233)]=![];const _0x2d61fd=collection(db,_0x5dc6a5),_0xc134a6=await getDocs(_0x2d61fd);if(_0xc134a6[_0x13880b(0x24f)]){console[_0x13880b(0x27b)](_0x13880b(0x1ff));return;}_0x4aebd5['innerHTML']='<option\x20value=\x22\x22>Select\x20Opponent</option>',_0xc134a6[_0x13880b(0x201)](_0xccb8a=>{const _0x6ec2c0=_0x13880b,_0x105317=_0xccb8a[_0x6ec2c0(0x230)]();if(_0xccb8a['id']!==_0x4d0a65){const _0x4aac96=document['createElement'](_0x6ec2c0(0x2af));_0x4aac96['value']=_0x105317['username'],_0x4aac96[_0x6ec2c0(0x290)]=_0x105317['username'],_0x4aac96['dataset'][_0x6ec2c0(0x1c5)]=_0xccb8a['id'],_0x4aebd5['appendChild'](_0x4aac96);}});}catch(_0x57616f){console[_0x13880b(0x1f8)](_0x13880b(0x1ae),_0x57616f),document[_0x13880b(0x1a1)](_0x13880b(0x278))[_0x13880b(0x290)]=_0x13880b(0x24d),document[_0x13880b(0x1a1)](_0x13880b(0x278))[_0x13880b(0x250)][_0x13880b(0x1aa)]=_0x13880b(0x1a0);}}async function checkUserInLadderAndLoadOpponents(_0xd1d0f4){const _0x59f189=a48_0x4d375a;try{const _0x9c582a=document['getElementById']('report-error'),_0x1c44c4=document[_0x59f189(0x1a1)](_0x59f189(0x20e)),_0x23041f=document[_0x59f189(0x1a1)]('winner-username'),_0x1e5446=document[_0x59f189(0x1a1)]('report-form'),_0x26f313=document['getElementById']('auth-warning');_0x9c582a[_0x59f189(0x290)]=_0x59f189(0x1b9)+currentGameMode+'\x20ladder...',_0x9c582a[_0x59f189(0x250)]['color']=_0x59f189(0x29d);const _0x55d4d0=currentGameMode==='D1'?_0x59f189(0x1ca):currentGameMode==='D2'?_0x59f189(0x260):_0x59f189(0x196);console[_0x59f189(0x27b)](_0x59f189(0x298)+_0x55d4d0);const _0x4a7e55=await getDoc(doc(db,_0x55d4d0,_0xd1d0f4));if(!_0x4a7e55[_0x59f189(0x271)]())return _0x9c582a[_0x59f189(0x290)]=_0x59f189(0x219)+currentGameMode+'\x20ladder.',_0x9c582a['style'][_0x59f189(0x1aa)]=_0x59f189(0x1a0),_0x1c44c4[_0x59f189(0x290)]=_0x59f189(0x1b2),_0x23041f[_0x59f189(0x233)]=!![],_0x23041f[_0x59f189(0x1db)]=_0x59f189(0x210),_0x26f313[_0x59f189(0x250)][_0x59f189(0x266)]=_0x59f189(0x1b1),_0x26f313[_0x59f189(0x290)]=_0x59f189(0x219)+currentGameMode+_0x59f189(0x1d5),![];_0x9c582a[_0x59f189(0x290)]='',_0x26f313[_0x59f189(0x250)][_0x59f189(0x266)]=_0x59f189(0x291);const _0x1226ca=_0x4a7e55[_0x59f189(0x230)](),_0x19daef=_0x1226ca['username'];_0x1c44c4['textContent']=_0x59f189(0x241)+_0x19daef+')',_0x23041f[_0x59f189(0x233)]=![],_0x1e5446[_0x59f189(0x250)][_0x59f189(0x266)]='block',await loadOpponentsList(_0xd1d0f4);const _0x20e825=currentGameMode==='D1'?_0x59f189(0x245):currentGameMode==='D2'?_0x59f189(0x286):_0x59f189(0x28f);return await checkForOutstandingReports(_0x1226ca[_0x59f189(0x26b)],null,_0x20e825),!![];}catch(_0x5b54d5){return console[_0x59f189(0x1f8)]('Error\x20checking\x20if\x20user\x20is\x20in\x20ladder:',_0x5b54d5),document[_0x59f189(0x1a1)](_0x59f189(0x278))[_0x59f189(0x290)]=_0x59f189(0x1da),document['getElementById'](_0x59f189(0x278))['style'][_0x59f189(0x1aa)]=_0x59f189(0x1a0),![];}}export async function fetchOutstandingMatches(){const _0x29352f=a48_0x4d375a,_0x336430=auth['currentUser'];if(!_0x336430)return[];try{const _0x225f38=[],_0x3585ca=currentGameMode==='D1'?_0x29352f(0x245):currentGameMode==='D2'?_0x29352f(0x286):'pendingMatchesD3',_0x226548=collection(db,_0x3585ca),_0x43ab10=[query(_0x226548,where(_0x29352f(0x1a8),'==',_0x336430[_0x29352f(0x1c5)]),where(_0x29352f(0x22e),'==',![])),query(_0x226548,where(_0x29352f(0x29a),'==',_0x336430[_0x29352f(0x26b)]),where(_0x29352f(0x22e),'==',![])),query(_0x226548,where(_0x29352f(0x1d0),'==',_0x336430[_0x29352f(0x1c5)]),where('approved','==',![])),query(_0x226548,where('winnerEmail','==',_0x336430[_0x29352f(0x26b)]),where(_0x29352f(0x22e),'==',![]))],_0x483e28=currentGameMode==='D1'?_0x29352f(0x1ca):currentGameMode==='D2'?'playersD2':'playersD3',_0x388014=await getDocs(query(collection(db,_0x483e28),where('email','==',_0x336430[_0x29352f(0x26b)])));let _0x2d556c=null;!_0x388014[_0x29352f(0x24f)]&&(_0x2d556c=_0x388014[_0x29352f(0x235)][0x0][_0x29352f(0x230)]()[_0x29352f(0x1eb)],_0x2d556c&&_0x43ab10[_0x29352f(0x2aa)](query(_0x226548,where(_0x29352f(0x2b1),'==',_0x2d556c),where(_0x29352f(0x22e),'==',![])),query(_0x226548,where(_0x29352f(0x269),'==',_0x2d556c),where('approved','==',![]))));for(const _0x272d90 of _0x43ab10){const _0x123942=await getDocs(_0x272d90);!_0x123942[_0x29352f(0x24f)]&&_0x123942[_0x29352f(0x201)](_0x336f4a=>{const _0x508cc6=_0x29352f;!_0x225f38['some'](_0x1bf60e=>_0x1bf60e['id']===_0x336f4a['id'])&&_0x225f38[_0x508cc6(0x2aa)]({'id':_0x336f4a['id'],..._0x336f4a['data']()});});}return _0x225f38[_0x29352f(0x211)]((_0x1cba08,_0xff512d)=>{const _0x29c716=_0x29352f,_0x1a463b=_0x1cba08[_0x29c716(0x24a)]?.[_0x29c716(0x1b4)]()||new Date(0x0),_0x43c2d1=_0xff512d[_0x29c716(0x24a)]?.['toDate']()||new Date(0x0);return _0x43c2d1-_0x1a463b;}),outstandingMatches=_0x225f38,_0x225f38;}catch(_0x47013e){return console[_0x29352f(0x1f8)]('Error\x20fetching\x20outstanding\x20matches:',_0x47013e),[];}}export function renderOutstandingMatches(){const _0x36864e=a48_0x4d375a,_0x5ec5ca=document[_0x36864e(0x1a1)](_0x36864e(0x280));if(outstandingMatches['length']===0x0){_0x5ec5ca[_0x36864e(0x1db)]=_0x36864e(0x26a);return;}let _0x280709='';const _0x557493=auth[_0x36864e(0x198)];if(!_0x557493)return;outstandingMatches[_0x36864e(0x201)](_0x5add29=>{const _0x1bc106=_0x36864e,_0xc1ffed=_0x5add29[_0x1bc106(0x24a)]?.[_0x1bc106(0x1b4)]()?_0x5add29[_0x1bc106(0x24a)][_0x1bc106(0x1b4)]()[_0x1bc106(0x1fc)]():_0x1bc106(0x22a),_0x4cae72=_0x5add29[_0x1bc106(0x29a)]===_0x557493[_0x1bc106(0x26b)]||_0x5add29['loserId']===_0x557493[_0x1bc106(0x1c5)];_0x280709+=_0x1bc106(0x28e)+_0x5add29['id']+_0x1bc106(0x1ba)+(_0x5add29[_0x1bc106(0x269)]||_0x1bc106(0x1f0))+_0x1bc106(0x218)+(_0x5add29[_0x1bc106(0x2b1)]||_0x1bc106(0x1dd))+_0x1bc106(0x259)+(_0x5add29[_0x1bc106(0x243)]||_0x1bc106(0x231))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Date:\x20'+_0xc1ffed+_0x1bc106(0x28c)+(_0x5add29[_0x1bc106(0x261)]||'0')+_0x1bc106(0x1c0)+_0x5add29['id']+'\x22>View\x20Details</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4cae72?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20edit-report-btn\x22\x20data-id=\x22'+_0x5add29['id']+_0x1bc106(0x216)+_0x5add29['id']+_0x1bc106(0x1c6):'')+_0x1bc106(0x1d4);}),_0x5ec5ca[_0x36864e(0x1db)]=_0x280709,document[_0x36864e(0x268)]('.view-detail-btn')['forEach'](_0x6dc4b3=>{const _0x375355=_0x36864e;_0x6dc4b3['addEventListener'](_0x375355(0x23e),function(){const _0x550ff7=_0x375355,_0x51c216=this['getAttribute']('data-id'),_0x458ad2=outstandingMatches[_0x550ff7(0x23b)](_0x3b87bb=>_0x3b87bb['id']===_0x51c216);document[_0x550ff7(0x1a1)](_0x550ff7(0x254))[_0x550ff7(0x21c)][_0x550ff7(0x2ac)](_0x550ff7(0x25f)),showMatchLightbox(_0x458ad2);});}),document['querySelectorAll'](_0x36864e(0x1b7))['forEach'](_0x196bc1=>{const _0x25afda=_0x36864e;_0x196bc1[_0x25afda(0x1af)]('click',function(){const _0x2a7b8b=_0x25afda,_0x3ee98f=this[_0x2a7b8b(0x22f)]('data-id'),_0x61d56e=outstandingMatches['find'](_0x182d07=>_0x182d07['id']===_0x3ee98f);document['getElementById'](_0x2a7b8b(0x254))[_0x2a7b8b(0x21c)]['remove'](_0x2a7b8b(0x25f)),editReport(_0x61d56e);});}),document['querySelectorAll'](_0x36864e(0x28d))[_0x36864e(0x201)](_0x298edc=>{const _0xa8f65e=_0x36864e;_0x298edc[_0xa8f65e(0x1af)]('click',function(){const _0x39cb33=_0xa8f65e,_0x1ef1e5=this[_0x39cb33(0x22f)]('data-id'),_0x5e1f22=outstandingMatches[_0x39cb33(0x23b)](_0x2212f5=>_0x2212f5['id']===_0x1ef1e5);confirm(_0x39cb33(0x237)+(_0x5e1f22[_0x39cb33(0x269)]||_0x39cb33(0x267))+'?')&&rescindReport(_0x5e1f22);});});}export async function rescindReport(_0x1454e0){const _0x12d096=a48_0x4d375a;try{const _0xf4a050=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?_0x12d096(0x286):_0x12d096(0x28f),_0x2feb41=doc(db,_0xf4a050,_0x1454e0['id']);await deleteDoc(_0x2feb41),alert(_0x12d096(0x24e)),await fetchOutstandingMatches(),renderOutstandingMatches();}catch(_0x5098b0){console[_0x12d096(0x1f8)](_0x12d096(0x1ad),_0x5098b0),alert('Failed\x20to\x20rescind\x20report.\x20Please\x20try\x20again.');}}export function editReport(_0x1876f6){const _0xe0c62=a48_0x4d375a,_0x2970a2=document['getElementById'](_0xe0c62(0x2ab)),_0x4905fd=document[_0xe0c62(0x1a1)]('loser-score'),_0x170574=document[_0xe0c62(0x1a1)]('suicides'),_0x1a6161=document[_0xe0c62(0x1a1)](_0xe0c62(0x229)),_0xde525a=document['getElementById']('loser-comment');_0x2970a2['style'][_0xe0c62(0x266)]=_0xe0c62(0x1b1),document[_0xe0c62(0x1a1)](_0xe0c62(0x215))['style'][_0xe0c62(0x266)]='none';if(_0x1876f6[_0xe0c62(0x261)])_0x4905fd[_0xe0c62(0x244)]=_0x1876f6['loserScore'];if(_0x1876f6['loserSuicides'])_0x170574[_0xe0c62(0x244)]=_0x1876f6[_0xe0c62(0x29c)];if(_0x1876f6[_0xe0c62(0x243)])_0x1a6161['value']=_0x1876f6[_0xe0c62(0x243)];if(_0x1876f6[_0xe0c62(0x21b)])_0xde525a['value']=_0x1876f6[_0xe0c62(0x21b)];const _0x1bc869=document['getElementById'](_0xe0c62(0x232));_0x1bc869&&_0x1876f6['winnerUsername']&&Array[_0xe0c62(0x1bc)](_0x1bc869[_0xe0c62(0x19b)])['forEach'](_0xa3f192=>{const _0xe85a61=_0xe0c62;_0xa3f192['text']===_0x1876f6[_0xe85a61(0x269)]&&(_0xa3f192[_0xe85a61(0x247)]=!![]);});const _0x486593=document[_0xe0c62(0x1a1)](_0xe0c62(0x21f));_0x486593&&_0x1876f6['subgameType']&&(_0x486593[_0xe0c62(0x244)]=_0x1876f6[_0xe0c62(0x274)]);_0x2970a2[_0xe0c62(0x213)]('data-edit-id',_0x1876f6['id']);const _0xafc21d=_0x2970a2[_0xe0c62(0x1d1)](_0xe0c62(0x281));_0xafc21d[_0xe0c62(0x290)]=_0xe0c62(0x227);if(!document['getElementById']('cancel-edit-btn')){const _0x368677=document[_0xe0c62(0x270)]('button');_0x368677['id']=_0xe0c62(0x28a),_0x368677['className']=_0xe0c62(0x25e),_0x368677[_0xe0c62(0x250)][_0xe0c62(0x1b3)]=_0xe0c62(0x276),_0x368677[_0xe0c62(0x250)][_0xe0c62(0x262)]='10px',_0x368677[_0xe0c62(0x290)]=_0xe0c62(0x224),_0x368677[_0xe0c62(0x208)]=_0xe0c62(0x1d8),_0xafc21d[_0xe0c62(0x202)][_0xe0c62(0x23a)](_0x368677,_0xafc21d),_0x368677[_0xe0c62(0x1af)](_0xe0c62(0x23e),function(_0x47dc54){const _0xd1d4b2=_0xe0c62;_0x47dc54[_0xd1d4b2(0x204)](),_0x2970a2[_0xd1d4b2(0x24c)](),_0x2970a2[_0xd1d4b2(0x1d6)](_0xd1d4b2(0x27e)),_0xafc21d[_0xd1d4b2(0x290)]=_0xd1d4b2(0x27d),this[_0xd1d4b2(0x2ac)](),initReportForm();});}_0x2970a2[_0xe0c62(0x1e5)]({'behavior':_0xe0c62(0x20c)});}function initReportForm(){const _0x2e591c=a48_0x4d375a;console[_0x2e591c(0x27b)]('Report\x20form\x20reset');}export function showMatchLightbox(_0x311b20){const _0x4d63e7=a48_0x4d375a,_0x20fe7b=document[_0x4d63e7(0x1a1)](_0x4d63e7(0x284));document[_0x4d63e7(0x1a1)]('lightbox-game-mode')[_0x4d63e7(0x290)]=currentGameMode,document['getElementById'](_0x4d63e7(0x283))['textContent']=_0x311b20[_0x4d63e7(0x269)]||_0x4d63e7(0x231),document[_0x4d63e7(0x1a1)]('lightbox-loser')[_0x4d63e7(0x290)]=_0x311b20['loserUsername']||_0x4d63e7(0x231),document[_0x4d63e7(0x1a1)](_0x4d63e7(0x23c))[_0x4d63e7(0x290)]=_0x311b20[_0x4d63e7(0x261)]||'0',document[_0x4d63e7(0x1a1)]('lightbox-suicides')[_0x4d63e7(0x290)]=_0x311b20[_0x4d63e7(0x29c)]||'0',document[_0x4d63e7(0x1a1)](_0x4d63e7(0x1b5))[_0x4d63e7(0x290)]=_0x311b20['mapPlayed']||_0x4d63e7(0x231),document[_0x4d63e7(0x1a1)](_0x4d63e7(0x22d))[_0x4d63e7(0x290)]=_0x311b20[_0x4d63e7(0x21b)]||_0x4d63e7(0x25b),document[_0x4d63e7(0x1a1)](_0x4d63e7(0x24b))[_0x4d63e7(0x290)]=_0x311b20[_0x4d63e7(0x274)]||_0x4d63e7(0x26e),_0x20fe7b[_0x4d63e7(0x21c)][_0x4d63e7(0x205)](_0x4d63e7(0x25f));}export function setCurrentGameMode(_0x4181bc){currentGameMode=_0x4181bc;}export function initOutstandingMatches(){const _0x303bf0=a48_0x4d375a;document[_0x303bf0(0x1af)](_0x303bf0(0x282),()=>{const _0x130326=_0x303bf0,_0x4a904c=document['getElementById'](_0x130326(0x20f)),_0x4a5be0=document['getElementById'](_0x130326(0x1d9)),_0x56aaf8=document[_0x130326(0x1a1)](_0x130326(0x254)),_0x4e28b0=document['getElementById'](_0x130326(0x25d)),_0x139f27=document['getElementById'](_0x130326(0x207)),_0x42d1d4=document[_0x130326(0x1a1)](_0x130326(0x285)),_0xe97fb7=document[_0x130326(0x1a1)](_0x130326(0x295)),_0x32f08f=document['getElementById'](_0x130326(0x21d));if(_0x42d1d4)_0x42d1d4[_0x130326(0x1af)](_0x130326(0x23e),()=>{setCurrentGameMode('D1');});if(_0xe97fb7)_0xe97fb7[_0x130326(0x1af)](_0x130326(0x23e),()=>{setCurrentGameMode('D2');});if(_0x32f08f)_0x32f08f[_0x130326(0x1af)]('click',()=>{setCurrentGameMode('D3');});auth[_0x130326(0x1dc)](_0x115b54=>{const _0x5a8571=_0x130326;_0x115b54?_0x4a5be0[_0x5a8571(0x250)][_0x5a8571(0x266)]=_0x5a8571(0x1b1):_0x4a5be0[_0x5a8571(0x250)][_0x5a8571(0x266)]=_0x5a8571(0x291);});_0x4a904c&&_0x4a904c['addEventListener'](_0x130326(0x23e),async()=>{const _0x4c154e=_0x130326;_0x56aaf8[_0x4c154e(0x21c)]['add']('show'),document[_0x4c154e(0x1a1)]('outstanding-matches-list')['innerHTML']='<div\x20class=\x22loading\x22>Loading\x20your\x20matches...</div>',await fetchOutstandingMatches(),renderOutstandingMatches();});_0x4e28b0&&_0x4e28b0[_0x130326(0x1af)](_0x130326(0x23e),()=>{const _0x7b65c=_0x130326;_0x56aaf8['classList'][_0x7b65c(0x2ac)]('show');});_0x139f27&&_0x139f27[_0x130326(0x1af)](_0x130326(0x23e),()=>{const _0xc167d4=_0x130326;document[_0xc167d4(0x1a1)](_0xc167d4(0x284))[_0xc167d4(0x21c)][_0xc167d4(0x2ac)]('show');});_0x56aaf8&&_0x56aaf8['addEventListener']('click',_0x490585=>{const _0x3c147c=_0x130326;_0x490585[_0x3c147c(0x256)]===_0x56aaf8&&_0x56aaf8[_0x3c147c(0x21c)][_0x3c147c(0x2ac)](_0x3c147c(0x25f));});const _0x119ad0=document[_0x130326(0x1a1)](_0x130326(0x284));_0x119ad0&&_0x119ad0[_0x130326(0x1af)]('click',_0x10a0b5=>{const _0x549623=_0x130326;_0x10a0b5[_0x549623(0x256)]===_0x119ad0&&_0x119ad0['classList'][_0x549623(0x2ac)]('show');});const _0x1b39e4=document['getElementById'](_0x130326(0x2ab));if(_0x1b39e4){const _0xc011ea=_0x1b39e4[_0x130326(0x1f3)];_0x1b39e4['onsubmit']=async function(_0x35f053){const _0x34d00c=_0x130326;_0x35f053['preventDefault']();const _0x10d3e4=this[_0x34d00c(0x22f)](_0x34d00c(0x27e));if(_0x10d3e4)try{const _0x12e82f=document[_0x34d00c(0x1a1)](_0x34d00c(0x2a8))['value'],_0x559e5b=document[_0x34d00c(0x1a1)](_0x34d00c(0x1cd))['value'],_0xab37e6=document[_0x34d00c(0x1a1)]('map-played')[_0x34d00c(0x244)],_0x340d4e=document[_0x34d00c(0x1a1)](_0x34d00c(0x221))[_0x34d00c(0x244)],_0x46dbc3=currentGameMode==='D1'?_0x34d00c(0x245):currentGameMode==='D2'?_0x34d00c(0x286):_0x34d00c(0x28f),_0x185203=doc(db,_0x46dbc3,_0x10d3e4);await updateDoc(_0x185203,{'loserScore':Number(_0x12e82f),'loserSuicides':Number(_0x559e5b),'mapPlayed':_0xab37e6,'loserComment':_0x340d4e,'subgameType':document[_0x34d00c(0x1a1)]('subgame-type')[_0x34d00c(0x244)],'updatedAt':new Date()}),alert('Report\x20has\x20been\x20successfully\x20updated.'),this['reset'](),this[_0x34d00c(0x1d6)](_0x34d00c(0x27e));const _0x5c6225=this[_0x34d00c(0x1d1)]('button[type=\x22submit\x22]');_0x5c6225[_0x34d00c(0x290)]=_0x34d00c(0x27d);const _0x5b4144=document[_0x34d00c(0x1a1)]('cancel-edit-btn');if(_0x5b4144)_0x5b4144['remove']();}catch(_0x1e47cb){console['error']('Error\x20updating\x20report:',_0x1e47cb),document[_0x34d00c(0x1a1)]('report-error')[_0x34d00c(0x290)]=_0x34d00c(0x25a);}else typeof _0xc011ea===_0x34d00c(0x19a)&&_0xc011ea[_0x34d00c(0x257)](this,_0x35f053);};}});}typeof window!==a48_0x4d375a(0x22b)&&(window[a48_0x4d375a(0x1a9)]=showMatchLightbox,window[a48_0x4d375a(0x1ef)]=editReport,window[a48_0x4d375a(0x20a)]=rescindReport,window[a48_0x4d375a(0x296)]=fetchOutstandingMatches,window['renderOutstandingMatches']=renderOutstandingMatches);initOutstandingMatches();