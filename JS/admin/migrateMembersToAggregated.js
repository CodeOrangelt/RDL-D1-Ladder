(function(_0x38fc16,_0x2370f2){const _0x502b63=a1_0x4f4a,_0x54c85c=_0x38fc16();while(!![]){try{const _0x23bfb6=-parseInt(_0x502b63(0xa2))/0x1*(parseInt(_0x502b63(0x79))/0x2)+parseInt(_0x502b63(0xa9))/0x3+-parseInt(_0x502b63(0x8e))/0x4+parseInt(_0x502b63(0x9f))/0x5+parseInt(_0x502b63(0x7d))/0x6+-parseInt(_0x502b63(0x90))/0x7*(parseInt(_0x502b63(0xb2))/0x8)+parseInt(_0x502b63(0xb8))/0x9;if(_0x23bfb6===_0x2370f2)break;else _0x54c85c['push'](_0x54c85c['shift']());}catch(_0x3c3d94){_0x54c85c['push'](_0x54c85c['shift']());}}}(a1_0x58b6,0x45e8a));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);async function migrateToAggregatedMembers(){const _0x43a662=a1_0x4f4a,_0x345919=(function(){let _0x1944d3=!![];return function(_0xe39fa2,_0x2f0a85){const _0xb176ed=_0x1944d3?function(){if(_0x2f0a85){const _0x2b5f9c=_0x2f0a85['apply'](_0xe39fa2,arguments);return _0x2f0a85=null,_0x2b5f9c;}}:function(){};return _0x1944d3=![],_0xb176ed;};}()),_0x2a342b=_0x345919(this,function(){const _0x196328=a1_0x4f4a;return _0x2a342b['toString']()['search']('(((.+)+)+)+$')[_0x196328(0x86)]()[_0x196328(0xae)](_0x2a342b)['search'](_0x196328(0xb9));});_0x2a342b();const _0xe797b5=(function(){let _0x4a40e1=!![];return function(_0x554bbc,_0x2dd612){const _0x565c1d=_0x4a40e1?function(){const _0x1bb0c0=a1_0x4f4a;if(_0x2dd612){const _0x17d8ca=_0x2dd612[_0x1bb0c0(0x7e)](_0x554bbc,arguments);return _0x2dd612=null,_0x17d8ca;}}:function(){};return _0x4a40e1=![],_0x565c1d;};}()),_0x19d487=_0xe797b5(this,function(){const _0x2cf416=a1_0x4f4a,_0x180426=function(){const _0x5d7c03=a1_0x4f4a;let _0x221c71;try{_0x221c71=Function(_0x5d7c03(0x74)+_0x5d7c03(0xa6)+');')();}catch(_0xf96c1a){_0x221c71=window;}return _0x221c71;},_0x49a06c=_0x180426(),_0x3d006e=_0x49a06c[_0x2cf416(0x75)]=_0x49a06c[_0x2cf416(0x75)]||{},_0x4740e1=[_0x2cf416(0x85),_0x2cf416(0xac),'info','error',_0x2cf416(0x87),'table','trace'];for(let _0x48eb59=0x0;_0x48eb59<_0x4740e1[_0x2cf416(0xa5)];_0x48eb59++){const _0x363d02=_0xe797b5['constructor']['prototype']['bind'](_0xe797b5),_0x251ea7=_0x4740e1[_0x48eb59],_0x363f05=_0x3d006e[_0x251ea7]||_0x363d02;_0x363d02[_0x2cf416(0x84)]=_0xe797b5[_0x2cf416(0x76)](_0xe797b5),_0x363d02['toString']=_0x363f05[_0x2cf416(0x86)]['bind'](_0x363f05),_0x3d006e[_0x251ea7]=_0x363d02;}});_0x19d487(),console[_0x43a662(0x85)]('🔄\x20Starting\x20migration\x20to\x20aggregated\x20members...');try{console['log']('📥\x20Fetching\x20all\x20collections...');const [_0x416f40,_0x3809dd,_0x5b15a9,_0x459446,_0x2dcf94]=await Promise['all']([getDocs(collection(db,_0x43a662(0x8f))),getDocs(collection(db,_0x43a662(0xb5))),getDocs(collection(db,_0x43a662(0x9d))),getDocs(collection(db,_0x43a662(0xb3))),getDocs(collection(db,_0x43a662(0x80)))]);console[_0x43a662(0x85)](_0x43a662(0x9c)+_0x416f40[_0x43a662(0xb7)]+'\x20profiles,\x20'+_0x3809dd[_0x43a662(0xb7)]+_0x43a662(0xaa)+_0x5b15a9['size']+_0x43a662(0x8b)+_0x459446[_0x43a662(0xb7)]+_0x43a662(0xb0)+_0x2dcf94[_0x43a662(0xb7)]+'\x20non-participants');const _0x17e52a=new Map();_0x416f40[_0x43a662(0x8d)](_0x16ec1a=>{const _0x98d11d=_0x43a662;_0x17e52a[_0x98d11d(0x82)](_0x16ec1a['id'],_0x16ec1a[_0x98d11d(0x9e)]());});const _0x5cd557=new Map(),_0x24916c=(_0x37bb8b,_0x5bfa3b)=>{const _0x22afa8=_0x43a662;_0x37bb8b[_0x22afa8(0x8d)](_0x4f421b=>{const _0x1f1a7d=_0x22afa8,_0x4bdaf6=_0x4f421b[_0x1f1a7d(0x9e)](),_0x295ca9=_0x4f421b['id'];!_0x5cd557[_0x1f1a7d(0xa3)](_0x295ca9)&&_0x5cd557['set'](_0x295ca9,{'userId':_0x295ca9,'username':_0x4bdaf6[_0x1f1a7d(0x88)]||_0x4bdaf6[_0x1f1a7d(0x7a)]||_0x1f1a7d(0x7f),'ladders':[],'isNonParticipant':![]});const _0x4bb673=_0x5cd557[_0x1f1a7d(0x83)](_0x295ca9);_0x4bb673[_0x1f1a7d(0x97)][_0x1f1a7d(0x96)]({'ladder':_0x5bfa3b,'elo':_0x4bdaf6['eloRating']||_0x4bdaf6['elo']||0x4b0,'active':_0x4bdaf6[_0x1f1a7d(0xab)]!==![]});});};_0x24916c(_0x3809dd,'D1'),_0x24916c(_0x5b15a9,'D2'),_0x24916c(_0x459446,'D3'),_0x2dcf94[_0x43a662(0x8d)](_0x3e97fb=>{const _0x45b8e8=_0x43a662,_0x395b09=_0x3e97fb['data'](),_0x5651bb=_0x3e97fb['id'];!_0x5cd557[_0x45b8e8(0xa3)](_0x5651bb)&&(_0x395b09[_0x45b8e8(0x88)]||_0x395b09['name'])&&_0x5cd557[_0x45b8e8(0x82)](_0x5651bb,{'userId':_0x5651bb,'username':_0x395b09[_0x45b8e8(0x88)]||_0x395b09[_0x45b8e8(0x7a)],'ladders':[],'isNonParticipant':!![]});}),console[_0x43a662(0x85)](_0x43a662(0xb4)+_0x5cd557[_0x43a662(0xb7)]+_0x43a662(0x8c)),console[_0x43a662(0x85)](_0x43a662(0xa1));const _0x26def5=[];let _0x877616=writeBatch(db),_0x16a685=0x0,_0x333f1d=0x0;_0x5cd557['forEach']((_0x19d47,_0x139cf2)=>{const _0xb7e9cf=_0x43a662,_0x16f1e2=_0x17e52a['get'](_0x139cf2)||{};let _0x33887b=0x0,_0x3fbeb7=null;if(_0x19d47[_0xb7e9cf(0x97)][_0xb7e9cf(0xa5)]>0x0){const _0x5a808e=_0x19d47[_0xb7e9cf(0x97)][_0xb7e9cf(0xa8)]((_0x5e036a,_0x5823cc)=>_0x5823cc[_0xb7e9cf(0x94)]-_0x5e036a[_0xb7e9cf(0x94)]);_0x33887b=_0x5a808e[0x0][_0xb7e9cf(0x94)],_0x3fbeb7=_0x5a808e[0x0][_0xb7e9cf(0xaf)];}const _0x5404b0={'userId':_0x139cf2,'username':_0x19d47[_0xb7e9cf(0x88)],'profileImageUrl':_0x16f1e2[_0xb7e9cf(0x7c)]||null,'country':_0x16f1e2[_0xb7e9cf(0xb1)]||null,'motto':_0x16f1e2[_0xb7e9cf(0x91)]||null,'favoriteMap':_0x16f1e2[_0xb7e9cf(0x7b)]||null,'favoriteWeapon':_0x16f1e2['favoriteWeapon']||null,'isNonParticipant':_0x19d47[_0xb7e9cf(0x93)],'ladders':_0x19d47[_0xb7e9cf(0x97)],'primaryLadder':_0x3fbeb7,'highestElo':_0x33887b,'rank':getPlayerRank(_0x33887b),'lastUpdated':new Date(),'migrationTimestamp':new Date()['toISOString']()},_0x168586=doc(collection(db,_0xb7e9cf(0x98)),_0x139cf2);_0x877616[_0xb7e9cf(0x82)](_0x168586,_0x5404b0),_0x16a685++,_0x333f1d++,_0x16a685>=0x1c2&&(_0x26def5[_0xb7e9cf(0x96)](_0x877616['commit']()),_0x877616=writeBatch(db),_0x16a685=0x0,console['log'](_0xb7e9cf(0x92)+_0x26def5[_0xb7e9cf(0xa5)]+'\x20('+_0x333f1d+_0xb7e9cf(0x81)));}),_0x16a685>0x0&&_0x26def5[_0x43a662(0x96)](_0x877616[_0x43a662(0xad)]()),console['log'](_0x43a662(0xa0)+_0x26def5[_0x43a662(0xa5)]+'\x20batches...'),await Promise[_0x43a662(0x77)](_0x26def5),console[_0x43a662(0x85)]('🎉\x20Successfully\x20migrated\x20'+_0x5cd557[_0x43a662(0xb7)]+_0x43a662(0x95)),console[_0x43a662(0x85)](_0x43a662(0x9a));}catch(_0x2cf7c6){console[_0x43a662(0x9b)](_0x43a662(0x89),_0x2cf7c6),_0x2cf7c6['code']===_0x43a662(0xa7)&&console[_0x43a662(0x9b)](_0x43a662(0xb6));}}function a1_0x58b6(){const _0x189130=['isNonParticipant','elo','\x20members\x20to\x20aggregated\x20collection!','push','ladders','aggregatedMembers','silver','💡\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!','error','✅\x20Data\x20fetched:\x20','playersD2','data','66470ohRmyU','🚀\x20Executing\x20','💾\x20Writing\x20aggregated\x20data...','691tinbng','has','bronze','length','{}.constructor(\x22return\x20this\x22)(\x20)','permission-denied','sort','1527018METiyB','\x20D1,\x20','active','warn','commit','constructor','ladder','\x20D3,\x20','country','32OxooqG','playersD3','⚙️\x20Processed\x20','players','🔒\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.','size','142533EWfugg','(((.+)+)+)+$','unranked','return\x20(function()\x20','console','bind','all','emerald','876qLHumZ','name','favoriteMap','profileImageUrl','3047160xlBYHD','apply','Unknown','nonParticipants','\x20members\x20processed)','set','get','__proto__','log','toString','exception','username','❌\x20Migration\x20failed:','gold','\x20D2,\x20','\x20unique\x20members','forEach','1114036PuiaFi','userProfiles','312347osdKLD','motto','📦\x20Prepared\x20batch\x20'];a1_0x58b6=function(){return _0x189130;};return a1_0x58b6();}function a1_0x4f4a(_0x3c99be,_0x13f332){const _0x3a3784=a1_0x58b6();return a1_0x4f4a=function(_0xd0939a,_0x4b7f12){_0xd0939a=_0xd0939a-0x73;let _0x3f4722=_0x3a3784[_0xd0939a];return _0x3f4722;},a1_0x4f4a(_0x3c99be,_0x13f332);}function getPlayerRank(_0xc87896){const _0x1c58a8=a1_0x4f4a;if(_0xc87896>=0x7d0)return _0x1c58a8(0x78);if(_0xc87896>=0x708)return _0x1c58a8(0x8a);if(_0xc87896>=0x640)return _0x1c58a8(0x99);if(_0xc87896>=0x578)return _0x1c58a8(0xa4);return _0x1c58a8(0x73);}migrateToAggregatedMembers();