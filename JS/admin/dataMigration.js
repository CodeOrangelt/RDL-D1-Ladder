(function(_0xfb8416,_0x18e73d){const _0x2f1f68=a0_0x101f,_0x1095a1=_0xfb8416();while(!![]){try{const _0x2af695=parseInt(_0x2f1f68(0xbd))/0x1+-parseInt(_0x2f1f68(0xb4))/0x2*(parseInt(_0x2f1f68(0xd2))/0x3)+-parseInt(_0x2f1f68(0xcf))/0x4*(-parseInt(_0x2f1f68(0xce))/0x5)+parseInt(_0x2f1f68(0xdf))/0x6+-parseInt(_0x2f1f68(0xde))/0x7+-parseInt(_0x2f1f68(0xbc))/0x8+-parseInt(_0x2f1f68(0xcc))/0x9;if(_0x2af695===_0x18e73d)break;else _0x1095a1['push'](_0x1095a1['shift']());}catch(_0x18e887){_0x1095a1['push'](_0x1095a1['shift']());}}}(a0_0x35e2,0x1bb99));function a0_0x35e2(){const _0x5f342d=['email','apply','4qwcVDI','elo','get','matches','userProfiles','return\x20(function()\x20','forEach','active','69952UcOMxs','13197gSHBFz','toISOString','every','discord','set','commit','info','(((.+)+)+)+$','name','trace','toString','size','update','length','error','683910fjWpVs','has','555455UXHIZn','4fXLBnw','players','nonParticipants','14988HxkLbB','docs','bind','push','log','createdAt','prototype','playersD3','data','divisions','search','__proto__','322840WXayWa','780714frkfhH','username'];a0_0x35e2=function(){return _0x5f342d;};return a0_0x35e2();}const a0_0x5cd88e=(function(){let _0x571c27=!![];return function(_0x187d91,_0x1fc94f){const _0x514d50=_0x571c27?function(){const _0x1b0ca6=a0_0x101f;if(_0x1fc94f){const _0x4e22a9=_0x1fc94f[_0x1b0ca6(0xb3)](_0x187d91,arguments);return _0x1fc94f=null,_0x4e22a9;}}:function(){};return _0x571c27=![],_0x514d50;};}()),a0_0x2fa434=a0_0x5cd88e(this,function(){const _0x3e9647=a0_0x101f;return a0_0x2fa434['toString']()['search'](_0x3e9647(0xc4))[_0x3e9647(0xc7)]()['constructor'](a0_0x2fa434)[_0x3e9647(0xdc)](_0x3e9647(0xc4));});a0_0x2fa434();const a0_0x136dfe=(function(){let _0x2c2441=!![];return function(_0x1ca99b,_0x9e39d8){const _0x14e908=_0x2c2441?function(){const _0x4cb797=a0_0x101f;if(_0x9e39d8){const _0x4a6138=_0x9e39d8[_0x4cb797(0xb3)](_0x1ca99b,arguments);return _0x9e39d8=null,_0x4a6138;}}:function(){};return _0x2c2441=![],_0x14e908;};}()),a0_0x288c57=a0_0x136dfe(this,function(){const _0x156c1d=a0_0x101f;let _0x5027f5;try{const _0x515972=Function(_0x156c1d(0xb9)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5027f5=_0x515972();}catch(_0x412169){_0x5027f5=window;}const _0x5cb7c2=_0x5027f5['console']=_0x5027f5['console']||{},_0xa0b2cb=[_0x156c1d(0xd6),'warn',_0x156c1d(0xc3),_0x156c1d(0xcb),'exception','table',_0x156c1d(0xc6)];for(let _0x44b1f9=0x0;_0x44b1f9<_0xa0b2cb['length'];_0x44b1f9++){const _0x5dcc45=a0_0x136dfe['constructor'][_0x156c1d(0xd8)][_0x156c1d(0xd4)](a0_0x136dfe),_0x55c529=_0xa0b2cb[_0x44b1f9],_0x56dbaf=_0x5cb7c2[_0x55c529]||_0x5dcc45;_0x5dcc45[_0x156c1d(0xdd)]=a0_0x136dfe[_0x156c1d(0xd4)](a0_0x136dfe),_0x5dcc45[_0x156c1d(0xc7)]=_0x56dbaf['toString']['bind'](_0x56dbaf),_0x5cb7c2[_0x55c529]=_0x5dcc45;}});a0_0x288c57();import{db}from'../firebase-config.js';import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';export async function migrateUserData(){const _0x14b10d=a0_0x101f,_0x1a15cc=[_0x14b10d(0xd0),'playersD2',_0x14b10d(0xd9),_0x14b10d(0xd1),_0x14b10d(0xb8)],_0x398541=[];let _0x3aabb3=writeBatch(db),_0x192489=0x0;const _0x396cc6=collection(db,_0x14b10d(0xb8)),_0x525b46=new Map(),_0x26ea81=(_0x5bd8d5,_0x2f7798)=>{const _0x3f9479=_0x14b10d;_0x192489>=0x1f4&&(_0x398541[_0x3f9479(0xd5)](_0x3aabb3),_0x3aabb3=writeBatch(db),_0x192489=0x0);const _0x32ff0c=doc(_0x396cc6,_0x5bd8d5);_0x3aabb3[_0x3f9479(0xc1)](_0x32ff0c,_0x2f7798),_0x192489++;};for(const _0x4c6887 of _0x1a15cc){const _0x3e12cc=collection(db,_0x4c6887),_0xc17d53=await getDocs(_0x3e12cc);_0xc17d53[_0x14b10d(0xd3)][_0x14b10d(0xba)](_0x578ce3=>{const _0x43a4c8=_0x14b10d,_0x5dda49=_0x578ce3['id'],_0x392743=_0x578ce3[_0x43a4c8(0xda)]();!_0x525b46[_0x43a4c8(0xcd)](_0x5dda49)&&_0x525b46[_0x43a4c8(0xc1)](_0x5dda49,{'username':_0x392743[_0x43a4c8(0xe0)]||_0x392743[_0x43a4c8(0xc5)]||_0x5dda49,'email':_0x392743[_0x43a4c8(0xb2)]||null,'discord':_0x392743[_0x43a4c8(0xc0)]||null,'createdAt':_0x392743[_0x43a4c8(0xd7)]||new Date()[_0x43a4c8(0xbe)](),'divisions':[]});const _0x140e0a=_0x525b46[_0x43a4c8(0xb6)](_0x5dda49);if(_0x4c6887===_0x43a4c8(0xd0))_0x140e0a['divisions'][_0x43a4c8(0xd5)]({'id':0x1,'elo':_0x392743[_0x43a4c8(0xb5)]||0x5dc,'isActive':_0x392743[_0x43a4c8(0xbb)]!==![]});else{if(_0x4c6887==='playersD2')_0x140e0a[_0x43a4c8(0xdb)][_0x43a4c8(0xd5)]({'id':0x2,'elo':_0x392743['elo']||0x5dc,'isActive':_0x392743['active']!==![]});else _0x4c6887===_0x43a4c8(0xd9)&&_0x140e0a[_0x43a4c8(0xdb)][_0x43a4c8(0xd5)]({'id':0x3,'elo':_0x392743[_0x43a4c8(0xb5)]||0x5dc,'isActive':_0x392743[_0x43a4c8(0xbb)]!==![]});}});}for(const [_0x5d7398,_0x2f47b7]of _0x525b46['entries']()){_0x26ea81(_0x5d7398,_0x2f47b7);}_0x192489>0x0&&_0x398541[_0x14b10d(0xd5)](_0x3aabb3);const _0x5ec3bd=[];for(const _0x5eccd1 of _0x398541){try{await _0x5eccd1[_0x14b10d(0xc2)](),_0x5ec3bd[_0x14b10d(0xd5)]({'success':!![]});}catch(_0x11aa25){_0x5ec3bd[_0x14b10d(0xd5)]({'success':![],'error':_0x11aa25});}}return{'usersProcessed':_0x525b46[_0x14b10d(0xc8)],'batchesExecuted':_0x5ec3bd[_0x14b10d(0xca)],'success':_0x5ec3bd[_0x14b10d(0xbf)](_0x570186=>_0x570186['success'])};}function a0_0x101f(_0x340228,_0x41ccdb){const _0x534ba8=a0_0x35e2();return a0_0x101f=function(_0x288c57,_0x136dfe){_0x288c57=_0x288c57-0xb2;let _0x17cc21=_0x534ba8[_0x288c57];return _0x17cc21;},a0_0x101f(_0x340228,_0x41ccdb);}export async function updateMatchReferences(){const _0x4a17c5=a0_0x101f,_0x28be4c=[_0x4a17c5(0xb7),'matchesD2','matchesD3'];let _0x330355=0x0;for(const _0x4f3b1d of _0x28be4c){const _0x3e3b73=collection(db,_0x4f3b1d),_0x37b801=await getDocs(_0x3e3b73),_0xdbd1e2=0x1f4;let _0x3cb1f3=writeBatch(db),_0x3a1968=0x0;for(const _0x5565cb of _0x37b801[_0x4a17c5(0xd3)]){const _0x443f62=_0x5565cb[_0x4a17c5(0xda)](),_0x2508c0=doc(db,_0x4f3b1d,_0x5565cb['id']);_0x3cb1f3[_0x4a17c5(0xc9)](_0x2508c0,{'isMigrated':!![],'lastModified':new Date()[_0x4a17c5(0xbe)]()}),_0x3a1968++,_0x330355++,_0x3a1968>=_0xdbd1e2&&(await _0x3cb1f3[_0x4a17c5(0xc2)](),_0x3cb1f3=writeBatch(db),_0x3a1968=0x0);}_0x3a1968>0x0&&await _0x3cb1f3[_0x4a17c5(0xc2)]();}return{'updatedCount':_0x330355};}