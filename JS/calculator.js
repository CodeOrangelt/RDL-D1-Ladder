const a9_0x518961=a9_0x31a3;(function(_0x447362,_0x1a08e3){const _0x48893b=a9_0x31a3,_0x3ef8f2=_0x447362();while(!![]){try{const _0x3ea2d1=parseInt(_0x48893b(0x152))/0x1+-parseInt(_0x48893b(0x16f))/0x2*(-parseInt(_0x48893b(0x147))/0x3)+parseInt(_0x48893b(0x156))/0x4*(parseInt(_0x48893b(0x12d))/0x5)+-parseInt(_0x48893b(0x139))/0x6*(-parseInt(_0x48893b(0x181))/0x7)+-parseInt(_0x48893b(0x178))/0x8*(-parseInt(_0x48893b(0x12a))/0x9)+-parseInt(_0x48893b(0x164))/0xa*(-parseInt(_0x48893b(0x16a))/0xb)+-parseInt(_0x48893b(0x13a))/0xc;if(_0x3ea2d1===_0x1a08e3)break;else _0x3ef8f2['push'](_0x3ef8f2['shift']());}catch(_0x3fbf32){_0x3ef8f2['push'](_0x3ef8f2['shift']());}}}(a9_0x2950,0x41289));const a9_0x994696=(function(){let _0x567221=!![];return function(_0x1d18be,_0x2d6de2){const _0x580350=_0x567221?function(){const _0xb34c13=a9_0x31a3;if(_0x2d6de2){const _0x530668=_0x2d6de2[_0xb34c13(0x140)](_0x1d18be,arguments);return _0x2d6de2=null,_0x530668;}}:function(){};return _0x567221=![],_0x580350;};}()),a9_0x88bf41=a9_0x994696(this,function(){const _0x699d0e=a9_0x31a3;return a9_0x88bf41['toString']()[_0x699d0e(0x16c)](_0x699d0e(0x183))[_0x699d0e(0x182)]()['constructor'](a9_0x88bf41)[_0x699d0e(0x16c)](_0x699d0e(0x183));});a9_0x88bf41();function a9_0x2950(){const _0x5438ea=['\x20players\x20from\x20','{}.constructor(\x22return\x20this\x22)(\x20)','unranked','1716oxFdqK','19757304iSlEfK','Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser','expectedScoreLoser','remove','click','forEach','apply','log','\x20ladder','bronze','change','loser-new-elo','position','165750vUWQuQ','displayCalculationDetails','#808080','getELOColor','classList','length','desc','pow','calculation-text','playersD3','init','310704UVkRrL','#C0C0C0','console','data','4iQOkYz','textContent','ladder','target','calculateELO','%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20','username','emerald','dataset','updateDropdowns','warn','display','Current\x20ELO:\x20','addEventListener','4075990VwUPby','expectedScoreWinner','value','toFixed','round','currentLadder','11JgFRZg','loserChange','search','\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>','\x22\x20class=\x22','16ojNCrr','getELORankClass','loadPlayers','active','refresh-players','set','setupEventListeners','block','__proto__','17144kplUUo','innerHTML','querySelectorAll','get','winner-name','clear','gold','size','grid','8897nitnVj','toString','(((.+)+)+)+$','calculateMatch','Loaded\x20','Player\x20not\x20found','newWinnerRating','winnerChange','match-result','style','\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a','none','displayMatchResult','return\x20(function()\x20','.ladder-btn','winner-select','loser-select','loser-elo-change','\x20=\x20','\x20High\x20ELO\x20gain','trace','DOMContentLoaded','elo','\x0a\x0aInitial\x20Ratings:\x0a\x20\x20','getElementById','#CD7F32','add','bind','Error\x20loading\x20players:','sort','winner-elo-change','New\x20ELO:\x20','newLoserRating','loser-name','333KoPLTF','eloRating','\x20+\x20','1551155YtKmYj','info','players','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','constructor','calculation-details','from','exception','Low\x20ELO\x20gain.'];a9_0x2950=function(){return _0x5438ea;};return a9_0x2950();}const a9_0x4e635b=(function(){let _0x196ece=!![];return function(_0x1b911,_0x59568d){const _0x1d8546=_0x196ece?function(){if(_0x59568d){const _0x548985=_0x59568d['apply'](_0x1b911,arguments);return _0x59568d=null,_0x548985;}}:function(){};return _0x196ece=![],_0x1d8546;};}()),a9_0x1f2407=a9_0x4e635b(this,function(){const _0x4e09b7=a9_0x31a3,_0x2ea5ec=function(){const _0x27963d=a9_0x31a3;let _0x4d963e;try{_0x4d963e=Function(_0x27963d(0x18e)+_0x27963d(0x137)+');')();}catch(_0x2704cb){_0x4d963e=window;}return _0x4d963e;},_0x4a9feb=_0x2ea5ec(),_0x25a9a3=_0x4a9feb[_0x4e09b7(0x154)]=_0x4a9feb[_0x4e09b7(0x154)]||{},_0x2585e3=['log',_0x4e09b7(0x160),_0x4e09b7(0x12e),'error',_0x4e09b7(0x134),'table',_0x4e09b7(0x11c)];for(let _0x3486ef=0x0;_0x3486ef<_0x2585e3[_0x4e09b7(0x14c)];_0x3486ef++){const _0x50e478=a9_0x4e635b[_0x4e09b7(0x131)]['prototype'][_0x4e09b7(0x123)](a9_0x4e635b),_0x11bc65=_0x2585e3[_0x3486ef],_0xfef33c=_0x25a9a3[_0x11bc65]||_0x50e478;_0x50e478[_0x4e09b7(0x177)]=a9_0x4e635b[_0x4e09b7(0x123)](a9_0x4e635b),_0x50e478[_0x4e09b7(0x182)]=_0xfef33c['toString'][_0x4e09b7(0x123)](_0xfef33c),_0x25a9a3[_0x11bc65]=_0x50e478;}});a9_0x1f2407();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a9_0x31a3(_0x31d6d1,_0x244ab7){const _0x6d1e8e=a9_0x2950();return a9_0x31a3=function(_0x1f2407,_0x4e635b){_0x1f2407=_0x1f2407-0x118;let _0x588474=_0x6d1e8e[_0x1f2407];return _0x588474;},a9_0x31a3(_0x31d6d1,_0x244ab7);}class ELOCalculator{constructor(){const _0x32a3d3=a9_0x31a3;this['currentLadder']='D1',this[_0x32a3d3(0x12f)]=new Map(),this[_0x32a3d3(0x151)]();}['init'](){const _0x28f711=a9_0x31a3;this[_0x28f711(0x175)](),this['loadPlayers']();}[a9_0x518961(0x175)](){const _0x139288=a9_0x518961;document[_0x139288(0x17a)]('.ladder-btn')['forEach'](_0x380115=>{const _0x2ae3fb=_0x139288;_0x380115[_0x2ae3fb(0x163)](_0x2ae3fb(0x13e),_0x38ace0=>{const _0x1ee49e=_0x2ae3fb;document['querySelectorAll'](_0x1ee49e(0x18f))[_0x1ee49e(0x13f)](_0x1e5c1b=>_0x1e5c1b['classList'][_0x1ee49e(0x13d)]('active')),_0x38ace0[_0x1ee49e(0x159)][_0x1ee49e(0x14b)][_0x1ee49e(0x122)](_0x1ee49e(0x172)),this[_0x1ee49e(0x169)]=_0x38ace0['target'][_0x1ee49e(0x15e)][_0x1ee49e(0x158)],this[_0x1ee49e(0x171)]();});}),document[_0x139288(0x120)](_0x139288(0x173))[_0x139288(0x163)]('click',()=>{const _0x1068d3=_0x139288;this[_0x1068d3(0x171)]();}),document['getElementById'](_0x139288(0x190))[_0x139288(0x163)](_0x139288(0x144),()=>this[_0x139288(0x184)]()),document[_0x139288(0x120)](_0x139288(0x118))[_0x139288(0x163)](_0x139288(0x144),()=>this[_0x139288(0x184)]());}async[a9_0x518961(0x171)](){const _0x7d493b=a9_0x518961;try{this['updateDropdowns']('<option\x20value=\x22\x22>Loading\x20players...</option>');const _0x287505=this[_0x7d493b(0x169)]==='D1'?_0x7d493b(0x12f):this['currentLadder']==='D2'?'playersD2':_0x7d493b(0x150),_0x226d59=collection(db,_0x287505),_0xe3ca88=query(_0x226d59,orderBy(_0x7d493b(0x12b),_0x7d493b(0x14d))),_0x283ac2=await getDocs(_0xe3ca88);this[_0x7d493b(0x12f)][_0x7d493b(0x17d)](),_0x283ac2['forEach'](_0x5d4da0=>{const _0x34bdde=_0x7d493b,_0x4da91f=_0x5d4da0[_0x34bdde(0x155)]();_0x4da91f[_0x34bdde(0x15c)]&&this['players'][_0x34bdde(0x174)](_0x4da91f[_0x34bdde(0x15c)],{'id':_0x5d4da0['id'],'username':_0x4da91f[_0x34bdde(0x15c)],'elo':parseInt(_0x4da91f[_0x34bdde(0x12b)])||0x4b0,'position':_0x4da91f[_0x34bdde(0x146)]||0x3e7});}),this[_0x7d493b(0x15f)](),console[_0x7d493b(0x141)](_0x7d493b(0x185)+this[_0x7d493b(0x12f)][_0x7d493b(0x17f)]+_0x7d493b(0x136)+this[_0x7d493b(0x169)]+_0x7d493b(0x142));}catch(_0x52a928){console['error'](_0x7d493b(0x124),_0x52a928),this[_0x7d493b(0x15f)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}[a9_0x518961(0x15f)](_0x37a1f3=null){const _0x444eed=a9_0x518961,_0x4fd71d=document[_0x444eed(0x120)]('winner-select'),_0x51c479=document[_0x444eed(0x120)]('loser-select');if(_0x37a1f3){_0x4fd71d[_0x444eed(0x179)]=_0x37a1f3,_0x51c479[_0x444eed(0x179)]=_0x37a1f3;return;}let _0xb2a04='<option\x20value=\x22\x22>Select\x20a\x20player...</option>';const _0x5bf861=Array[_0x444eed(0x133)](this[_0x444eed(0x12f)]['values']())[_0x444eed(0x125)]((_0x5d981e,_0x5318bc)=>_0x5318bc[_0x444eed(0x11e)]-_0x5d981e[_0x444eed(0x11e)]);_0x5bf861[_0x444eed(0x13f)](_0x3e175b=>{const _0x2da6b4=_0x444eed,_0x4e36aa=this['getELORankClass'](_0x3e175b[_0x2da6b4(0x11e)]);_0xb2a04+='<option\x20value=\x22'+_0x3e175b[_0x2da6b4(0x15c)]+'\x22\x20data-elo=\x22'+_0x3e175b[_0x2da6b4(0x11e)]+_0x2da6b4(0x16e)+_0x4e36aa+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3e175b[_0x2da6b4(0x15c)]+'\x20('+_0x3e175b[_0x2da6b4(0x11e)]+_0x2da6b4(0x16d);}),_0x4fd71d['innerHTML']=_0xb2a04,_0x51c479[_0x444eed(0x179)]=_0xb2a04;}[a9_0x518961(0x184)](){const _0x48fe18=a9_0x518961,_0x175e05=document[_0x48fe18(0x120)](_0x48fe18(0x190)),_0x118ed6=document[_0x48fe18(0x120)](_0x48fe18(0x118)),_0x5110a2=_0x175e05['value'],_0x611b47=_0x118ed6[_0x48fe18(0x166)];if(!_0x5110a2||!_0x611b47){document['getElementById'](_0x48fe18(0x189))['style'][_0x48fe18(0x161)]='none',document['getElementById'](_0x48fe18(0x132))[_0x48fe18(0x18a)][_0x48fe18(0x161)]=_0x48fe18(0x18c);return;}if(_0x5110a2===_0x611b47){alert(_0x48fe18(0x13b));return;}const _0x1b0342=this[_0x48fe18(0x12f)][_0x48fe18(0x17b)](_0x5110a2),_0x15746a=this['players']['get'](_0x611b47);if(!_0x1b0342||!_0x15746a){console['error'](_0x48fe18(0x186));return;}const _0x37c3ab=this[_0x48fe18(0x15a)](_0x1b0342[_0x48fe18(0x11e)],_0x15746a[_0x48fe18(0x11e)]);this['displayMatchResult'](_0x1b0342,_0x15746a,_0x37c3ab),this[_0x48fe18(0x148)](_0x1b0342,_0x15746a,_0x37c3ab);}[a9_0x518961(0x15a)](_0x4c3198,_0x1d54cd,_0x5a9683=0x20){const _0x5d1983=a9_0x518961,_0x364bfe=0x1/(0x1+Math[_0x5d1983(0x14e)](0xa,(_0x1d54cd-_0x4c3198)/0x190)),_0x54f0da=0x1/(0x1+Math[_0x5d1983(0x14e)](0xa,(_0x4c3198-_0x1d54cd)/0x190)),_0x2bb9a5=_0x4c3198+_0x5a9683*(0x1-_0x364bfe),_0x5cc08c=_0x1d54cd+_0x5a9683*(0x0-_0x54f0da);return{'winnerChange':Math[_0x5d1983(0x168)](_0x2bb9a5-_0x4c3198),'loserChange':Math['round'](_0x5cc08c-_0x1d54cd),'newWinnerRating':Math[_0x5d1983(0x168)](_0x2bb9a5),'newLoserRating':Math[_0x5d1983(0x168)](_0x5cc08c),'expectedScoreWinner':_0x364bfe,'expectedScoreLoser':_0x54f0da};}[a9_0x518961(0x18d)](_0x14a738,_0x283f07,_0x4cf6cd){const _0x222607=a9_0x518961;document[_0x222607(0x120)](_0x222607(0x17c))[_0x222607(0x157)]=_0x14a738[_0x222607(0x15c)],document[_0x222607(0x120)]('winner-current-elo')[_0x222607(0x157)]='Current\x20ELO:\x20'+_0x14a738['elo'],document[_0x222607(0x120)](_0x222607(0x126))[_0x222607(0x157)]='+'+_0x4cf6cd[_0x222607(0x188)],document[_0x222607(0x120)]('winner-new-elo')['textContent']='New\x20ELO:\x20'+_0x4cf6cd['newWinnerRating'],document['getElementById'](_0x222607(0x129))['textContent']=_0x283f07[_0x222607(0x15c)],document[_0x222607(0x120)]('loser-current-elo')[_0x222607(0x157)]=_0x222607(0x162)+_0x283f07[_0x222607(0x11e)],document[_0x222607(0x120)](_0x222607(0x119))[_0x222607(0x157)]=''+_0x4cf6cd[_0x222607(0x16b)],document['getElementById'](_0x222607(0x145))[_0x222607(0x157)]=_0x222607(0x127)+_0x4cf6cd[_0x222607(0x128)];const _0x3ebacb=this['getELOColor'](_0x14a738['elo']),_0xe2c9b2=this[_0x222607(0x14a)](_0x283f07[_0x222607(0x11e)]);document[_0x222607(0x120)](_0x222607(0x17c))[_0x222607(0x18a)]['color']=_0x3ebacb,document[_0x222607(0x120)](_0x222607(0x129))[_0x222607(0x18a)]['color']=_0xe2c9b2,document[_0x222607(0x120)](_0x222607(0x189))[_0x222607(0x18a)][_0x222607(0x161)]=_0x222607(0x180);}[a9_0x518961(0x148)](_0x19ce91,_0x36fbb5,_0x523144){const _0xb9cacc=a9_0x518961,_0x2301d9=_0xb9cacc(0x11f)+_0x19ce91['username']+':\x20'+_0x19ce91[_0xb9cacc(0x11e)]+'\x0a\x20\x20'+_0x36fbb5[_0xb9cacc(0x15c)]+':\x20'+_0x36fbb5[_0xb9cacc(0x11e)]+'\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20'+_0x19ce91['username']+':\x20'+_0x523144[_0xb9cacc(0x165)][_0xb9cacc(0x167)](0x3)+'\x20('+(_0x523144[_0xb9cacc(0x165)]*0x64)[_0xb9cacc(0x167)](0x1)+'%\x20chance\x20to\x20win)\x0a\x20\x20'+_0x36fbb5[_0xb9cacc(0x15c)]+':\x20'+_0x523144[_0xb9cacc(0x13c)]['toFixed'](0x3)+'\x20('+(_0x523144[_0xb9cacc(0x13c)]*0x64)['toFixed'](0x1)+_0xb9cacc(0x15b)+_0x19ce91[_0xb9cacc(0x15c)]+':\x20'+_0x19ce91[_0xb9cacc(0x11e)]+_0xb9cacc(0x12c)+_0x523144[_0xb9cacc(0x188)]+_0xb9cacc(0x11a)+_0x523144[_0xb9cacc(0x187)]+'\x0a\x20\x20'+_0x36fbb5['username']+':\x20'+_0x36fbb5[_0xb9cacc(0x11e)]+'\x20+\x20'+_0x523144['loserChange']+_0xb9cacc(0x11a)+_0x523144[_0xb9cacc(0x128)]+_0xb9cacc(0x18b)+(_0x523144[_0xb9cacc(0x188)]>0x14?_0xb9cacc(0x11b):'')+'\x0a'+(_0x523144[_0xb9cacc(0x188)]<0x5?_0xb9cacc(0x135):'')+_0xb9cacc(0x130);document[_0xb9cacc(0x120)](_0xb9cacc(0x14f))[_0xb9cacc(0x157)]=_0x2301d9,document[_0xb9cacc(0x120)](_0xb9cacc(0x132))['style'][_0xb9cacc(0x161)]=_0xb9cacc(0x176);}['getELOColor'](_0x239125){const _0x1566c9=a9_0x518961;if(_0x239125>=0x7d0)return'#50C878';else{if(_0x239125>=0x708)return'#FFD700';else{if(_0x239125>=0x640)return _0x1566c9(0x153);else{if(_0x239125>=0x578)return _0x1566c9(0x121);else return _0x1566c9(0x149);}}}}[a9_0x518961(0x170)](_0x425ae1){const _0x53fe4f=a9_0x518961;if(_0x425ae1>=0x7d0)return _0x53fe4f(0x15d);else{if(_0x425ae1>=0x708)return _0x53fe4f(0x17e);else{if(_0x425ae1>=0x640)return'silver';else{if(_0x425ae1>=0x578)return _0x53fe4f(0x143);else return _0x53fe4f(0x138);}}}}}document['addEventListener'](a9_0x518961(0x11d),()=>{const _0x5b291d=a9_0x518961;document[_0x5b291d(0x120)]('sandbox')&&new ELOCalculator();});