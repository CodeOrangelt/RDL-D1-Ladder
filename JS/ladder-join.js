const a25_0x5159c4=(function(){let _0x2df354=!![];return function(_0x4335f8,_0x387136){const _0x406550=_0x2df354?function(){const _0x25e79b=a25_0x1e74;if(_0x387136){const _0x828227=_0x387136[_0x25e79b(0x105)](_0x4335f8,arguments);return _0x387136=null,_0x828227;}}:function(){};return _0x2df354=![],_0x406550;};}()),a25_0x3c14e4=a25_0x5159c4(this,function(){const _0x41bedd=a25_0x1e74,_0x533e7b=function(){const _0x17e972=a25_0x1e74;let _0x4dc150;try{_0x4dc150=Function(_0x17e972(0x10d)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x21ac31){_0x4dc150=window;}return _0x4dc150;},_0x20edc5=_0x533e7b(),_0x3ab41b=_0x20edc5['console']=_0x20edc5[_0x41bedd(0x102)]||{},_0x342427=['log','warn','info','error',_0x41bedd(0x10a),_0x41bedd(0xf3),'trace'];for(let _0x4119c0=0x0;_0x4119c0<_0x342427['length'];_0x4119c0++){const _0x2316e9=a25_0x5159c4[_0x41bedd(0xec)]['prototype'][_0x41bedd(0x103)](a25_0x5159c4),_0x15e799=_0x342427[_0x4119c0],_0x12a6ae=_0x3ab41b[_0x15e799]||_0x2316e9;_0x2316e9['__proto__']=a25_0x5159c4['bind'](a25_0x5159c4),_0x2316e9[_0x41bedd(0xe2)]=_0x12a6ae['toString']['bind'](_0x12a6ae),_0x3ab41b[_0x15e799]=_0x2316e9;}});a25_0x3c14e4();function a25_0x1e74(_0x13b588,_0x56ac0a){const _0x3c14e4=a25_0xc485();return a25_0x1e74=function(_0x5159c4,_0x34f118){_0x5159c4=_0x5159c4-0xe0;let _0xc4859a=_0x3c14e4[_0x5159c4];return _0xc4859a;},a25_0x1e74(_0x13b588,_0x56ac0a);}import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a25_0xc485(){const _0x534151=['docs','Checking\x20user\x20status\x20for\x20ladder:','toString','disabled','Ladder\x20join:\x20D1\x20radio\x20found:','join-ladder-type','display','getElementById','getIdToken','\x22\x20to\x20confirm.','uid','playersD3','constructor','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','Error\x20checking\x20ladder\x20status:','position','forEach','input[name=\x22ladder\x22]','block','table','ladder-join-status\x20error','ladder-join-status','playersCTF','Ladder\x20changed\x20to:\x20','join-ladder-button','email','desc','error','none','data','currentUser','location','You\x20are\x20already\x20part\x20of\x20the\x20',',\x20defaulting\x20to\x20D1','console','bind','ladder-join-prompt','apply','toLowerCase','style','playersD2','Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.','exception','DUO','textContent','return\x20(function()\x20','className','trim'];a25_0xc485=function(){return _0x534151;};return a25_0xc485();}import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x5ba9b3=a25_0x1e74,_0xdd1b27=document[_0x5ba9b3(0xe7)]('d1-switch'),_0x4b7846=document['getElementById']('d2-switch');console['log'](_0x5ba9b3(0xe4),!!_0xdd1b27),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x4b7846);function _0x447dd4(){const _0x18bd47=_0x5ba9b3;document['querySelectorAll'](_0x18bd47(0xf1))[_0x18bd47(0xf0)](_0x3988c9=>{_0x3988c9['addEventListener']('change',_0x19a645=>{const _0x2182c7=a25_0x1e74;_0x19a645['target']['checked']&&(currentLadder=_0x19a645['target']['value'],console['log'](_0x2182c7(0xf7)+currentLadder),checkUserLadderStatus());});});}_0x447dd4();const _0x3f55f5=document['getElementById'](_0x5ba9b3(0xf8));_0x3f55f5&&_0x3f55f5['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x35cfe8=>{const _0x4bdf0a=_0x5ba9b3;if(_0x35cfe8)checkUserLadderStatus();else{const _0x43cace=document['getElementById'](_0x4bdf0a(0x104));_0x43cace&&(_0x43cace['style']['display']='none');}});});function getCollectionName(_0x35a08a){const _0x39eca7=a25_0x1e74;switch(_0x35a08a?.['toUpperCase']()){case'D1':return'players';case'D2':return _0x39eca7(0x108);case'D3':return'playersD3';case'DUOS':case _0x39eca7(0x10b):return'playersDuos';case'CTF':return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x35a08a+_0x39eca7(0x101));return'players';}}async function checkUserLadderStatus(){const _0xd56460=a25_0x1e74;console['log'](_0xd56460(0xe1),currentLadder);const _0x187398=auth[_0xd56460(0xfe)],_0x5a1465=document['getElementById'](_0xd56460(0x104)),_0xc804fd=document[_0xd56460(0xe7)](_0xd56460(0xe5)),_0x565449=document['getElementById']('tiny-join-button');if(!_0x187398||!_0x187398['uid']||!_0x5a1465||!_0xc804fd||!_0x565449){if(_0x5a1465)_0x5a1465['style'][_0xd56460(0xe6)]='none';if(_0x565449)_0x565449[_0xd56460(0x107)]['display']=_0xd56460(0xfc);return;}try{try{await _0x187398[_0xd56460(0xe8)](![]);}catch(_0x292a75){console[_0xd56460(0xfb)]('Authentication\x20verification\x20failed:',_0x292a75),_0x5a1465[_0xd56460(0x107)]['display']='none',_0x565449[_0xd56460(0x107)]['display']='none';return;}const _0x480b47=getCollectionName(currentLadder),_0x5ae838=doc(db,_0x480b47,_0x187398['uid']),_0x39a74f=await getDoc(_0x5ae838);if(_0x39a74f['exists']())_0x5a1465['style'][_0xd56460(0xe6)]='none',_0x565449['style']['display']='none';else{_0x5a1465['style'][_0xd56460(0xe6)]='none',_0x565449['style']['display']=_0xd56460(0xf2),_0xc804fd['textContent']=currentLadder,_0x565449['onclick']=()=>{const _0x2ba2a9=_0xd56460;_0x5a1465['style'][_0x2ba2a9(0xe6)]==='block'?_0x5a1465['style']['display']=_0x2ba2a9(0xfc):_0x5a1465['style'][_0x2ba2a9(0xe6)]='block';};const _0x5e163e=document['getElementById']('join-username-input'),_0x2f2d41=document['getElementById']('ladder-join-status');if(_0x5e163e)_0x5e163e['value']='';_0x2f2d41&&(_0x2f2d41['textContent']='',_0x2f2d41['className']=_0xd56460(0xf5));}}catch(_0x4f7f1a){console[_0xd56460(0xfb)](_0xd56460(0xee),_0x4f7f1a),_0x5a1465['style'][_0xd56460(0xe6)]='none',_0x565449['style']['display']=_0xd56460(0xfc);}}async function handleJoinLadder(){const _0xea6691=a25_0x1e74,_0xdace11=auth['currentUser'],_0x4f12fe=document['getElementById']('join-ladder-button'),_0x4771d6=document[_0xea6691(0xe7)]('ladder-join-status'),_0x500adf=document['getElementById']('join-username-input');if(!_0xdace11||!_0xdace11['uid']){_0x4771d6[_0xea6691(0x10c)]='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x4771d6['className']='ladder-join-status\x20error';return;}try{await _0xdace11['getIdToken'](!![]);}catch(_0x35206e){console[_0xea6691(0xfb)]('Authentication\x20error:',_0x35206e),_0x4771d6['textContent']=_0xea6691(0xed),_0x4771d6['className']=_0xea6691(0xf4);return;}if(!_0x500adf||!_0x500adf['value'][_0xea6691(0x10f)]()){_0x4771d6[_0xea6691(0x10c)]='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x4771d6['className']='ladder-join-status\x20error';return;}try{_0x4f12fe[_0xea6691(0xe3)]=!![],_0x4771d6[_0xea6691(0x10c)]='Verifying\x20username...',_0x4771d6['className']='ladder-join-status\x20loading';let _0x2448f7='',_0x15ad47=null;const _0x43d8cf=['players','playersD2',_0xea6691(0xeb),'playersDuos',_0xea6691(0xf6),'nonParticipants'];for(const _0x22938d of _0x43d8cf){try{const _0x43eaf2=doc(db,_0x22938d,_0xdace11[_0xea6691(0xea)]),_0x235bd2=await getDoc(_0x43eaf2);if(_0x235bd2['exists']()){_0x15ad47=_0x235bd2[_0xea6691(0xfd)]();if(_0x15ad47['username']){_0x2448f7=_0x15ad47['username'];break;}}}catch(_0x53e787){console['error']('Error\x20checking\x20'+_0x22938d+':',_0x53e787);}}!_0x2448f7&&_0xdace11[_0xea6691(0xf9)]&&(_0x2448f7=_0xdace11[_0xea6691(0xf9)]['split']('@')[0x0]);if(!_0x2448f7){_0x4771d6['textContent']=_0xea6691(0x109),_0x4771d6['className']='ladder-join-status\x20error',_0x4f12fe['disabled']=![];return;}const _0x2d25aa=_0x500adf['value']['trim']();if(_0x2448f7&&_0x2d25aa['toLowerCase']()!==_0x2448f7[_0xea6691(0x106)]()){_0x4771d6[_0xea6691(0x10c)]='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x2448f7+_0xea6691(0xe9),_0x4771d6['className']='ladder-join-status\x20error',_0x4f12fe['disabled']=![];return;}_0x4771d6['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x1753fd=getCollectionName(currentLadder),_0x5a297c=doc(db,_0x1753fd,_0xdace11['uid']),_0x3dc2e5=await getDoc(_0x5a297c);if(_0x3dc2e5['exists']()){_0x4771d6[_0xea6691(0x10c)]=_0xea6691(0x100)+currentLadder+'\x20ladder.',_0x4771d6[_0xea6691(0x10e)]=_0xea6691(0xf4),_0x4f12fe['disabled']=![];return;}try{await _0xdace11[_0xea6691(0xe8)](!![]);}catch(_0x232362){_0x4771d6['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x4771d6[_0xea6691(0x10e)]='ladder-join-status\x20error',_0x4f12fe[_0xea6691(0xe3)]=![];return;}const _0x1b319c=_0x2448f7,_0x316b80=collection(db,_0x1753fd),_0x1331c2=query(_0x316b80,orderBy(_0xea6691(0xef),_0xea6691(0xfa)),limit(0x1)),_0x5f462f=await getDocs(_0x1331c2);let _0x4983b8=0x1;if(!_0x5f462f['empty']){const _0xe3e27d=_0x5f462f[_0xea6691(0xe0)][0x0]['data']();_0x4983b8=(_0xe3e27d['position']||0x0)+0x1;}const _0x3cc0c4={'username':_0x1b319c,'email':_0xdace11['email'],'eloRating':0x4b0,'position':_0x4983b8,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x5a297c,_0x3cc0c4),currentLadder==='DUOS'?_0x4771d6[_0xea6691(0x10c)]='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x4771d6['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x4771d6[_0xea6691(0x10e)]='ladder-join-status\x20success',setTimeout(()=>{const _0x341f72=_0xea6691;window[_0x341f72(0xff)]['reload']();},0x7d0);}catch(_0x65e2dd){console['error']('Error\x20joining\x20ladder:',_0x65e2dd),_0x4771d6['textContent']='Error\x20joining\x20ladder:\x20'+_0x65e2dd['message'],_0x4771d6['className']='ladder-join-status\x20error',_0x4f12fe['disabled']=![];}}