function a16_0x12b5(_0x13484a,_0x3bf0ca){const _0x2c93e3=a16_0x49a6();return a16_0x12b5=function(_0xd20b0a,_0x8552c5){_0xd20b0a=_0xd20b0a-0x15a;let _0x49a6f5=_0x2c93e3[_0xd20b0a];return _0x49a6f5;},a16_0x12b5(_0x13484a,_0x3bf0ca);}const a16_0x4bb8bc=a16_0x12b5,a16_0xd20b0a=(function(){let _0xc5b0dc=!![];return function(_0x1d94bc,_0x805510){const _0x4c5c44=_0xc5b0dc?function(){const _0x27fc52=a16_0x12b5;if(_0x805510){const _0x21bfc1=_0x805510[_0x27fc52(0x16a)](_0x1d94bc,arguments);return _0x805510=null,_0x21bfc1;}}:function(){};return _0xc5b0dc=![],_0x4c5c44;};}()),a16_0x2c93e3=a16_0xd20b0a(this,function(){const _0x264b2b=a16_0x12b5;let _0x565404;try{const _0x1b5dbf=Function(_0x264b2b(0x169)+_0x264b2b(0x160)+');');_0x565404=_0x1b5dbf();}catch(_0xc029e0){_0x565404=window;}const _0x22758b=_0x565404[_0x264b2b(0x164)]=_0x565404['console']||{},_0x2c316e=[_0x264b2b(0x15d),'warn',_0x264b2b(0x161),'error','exception',_0x264b2b(0x167),'trace'];for(let _0x4f768c=0x0;_0x4f768c<_0x2c316e[_0x264b2b(0x15b)];_0x4f768c++){const _0x1baeb5=a16_0xd20b0a['constructor']['prototype'][_0x264b2b(0x163)](a16_0xd20b0a),_0x5617d7=_0x2c316e[_0x4f768c],_0x634c6d=_0x22758b[_0x5617d7]||_0x1baeb5;_0x1baeb5['__proto__']=a16_0xd20b0a[_0x264b2b(0x163)](a16_0xd20b0a),_0x1baeb5['toString']=_0x634c6d['toString']['bind'](_0x634c6d),_0x22758b[_0x5617d7]=_0x1baeb5;}});function a16_0x49a6(){const _0x5058d1=['username','length','Bronze','log','all','data','{}.constructor(\x22return\x20this\x22)(\x20)','info','Silver','bind','console','Unknown\x20Player','eloHistory','table','exists','return\x20(function()\x20','apply','previousElo','opponent','Error\x20fetching\x20username:','promotion'];a16_0x49a6=function(){return _0x5058d1;};return a16_0x49a6();}a16_0x2c93e3();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':a16_0x4bb8bc(0x162),'elo':0x640},{'name':a16_0x4bb8bc(0x15c),'elo':0x578},{'name':'Unranked','elo':0x4b0}];async function getUsernameById(_0x249faa){const _0x1ee653=a16_0x4bb8bc;try{if(!_0x249faa)return'Unknown\x20Player';const _0x52cf7e=await getDoc(doc(db,'players',_0x249faa));return _0x52cf7e[_0x1ee653(0x168)]()?_0x52cf7e[_0x1ee653(0x15f)]()[_0x1ee653(0x15a)]:_0x1ee653(0x165);}catch(_0x3ecc13){return console['error'](_0x1ee653(0x16d),_0x3ecc13),'Unknown\x20Player';}}export async function recordEloChange({playerId:_0x4be838,previousElo:_0x2db9e2,newElo:_0xcab484,opponentId:_0x53643b,matchResult:_0x43fc08,previousPosition:_0x4ac5ab,newPosition:_0x305a06,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x4773cc}){const _0x3354b8=a16_0x4bb8bc;try{const _0x11c4fe=doc(collection(db,'eloHistory'));let _0x19f069='match';if(isPromotion)_0x19f069=_0x3354b8(0x16e);if(isDemotion)_0x19f069='demotion';let _0x426dca='Unranked';if(_0xcab484>=0x834)_0x426dca='Emerald';else{if(_0xcab484>=0x708)_0x426dca='Gold';else{if(_0xcab484>=0x640)_0x426dca='Silver';else{if(_0xcab484>=0x578)_0x426dca='Bronze';}}}return await setDoc(_0x11c4fe,{'type':_0x19f069,'player':_0x4be838,'opponent':_0x53643b,'previousElo':_0x2db9e2,'newElo':_0xcab484,'change':_0xcab484-_0x2db9e2,'matchResult':_0x43fc08,'previousPosition':_0x4ac5ab,'newPosition':_0x305a06,'rankAchieved':_0x426dca,'timestamp':_0x4773cc}),console['log']('ELO\x20history\x20recorded\x20for\x20'+_0x4be838),!![];}catch(_0x17f608){console['error']('Error\x20recording\x20ELO\x20history:',_0x17f608);throw _0x17f608;}}export async function getEloHistory(){const _0x557073=a16_0x4bb8bc;try{const _0x156bea=collection(db,_0x557073(0x166)),_0x3eff17=query(_0x156bea,orderBy('timestamp','desc')),_0x5324a8=await getDocs(_0x3eff17),_0xc596b8=_0x5324a8['docs']['map'](async _0x713fc1=>{const _0x444f54=_0x557073,_0xd49914=_0x713fc1[_0x444f54(0x15f)](),[_0x2e5243,_0x54617c]=await Promise[_0x444f54(0x15e)]([getUsernameById(_0xd49914['player']),getUsernameById(_0xd49914[_0x444f54(0x16c)])]);return{..._0xd49914,'playerUsername':_0x2e5243,'opponentUsername':_0x54617c,'change':_0xd49914['newElo']-_0xd49914[_0x444f54(0x16b)],'timestamp':_0xd49914['timestamp']};}),_0x4873a3=await Promise[_0x557073(0x15e)](_0xc596b8);return{'entries':_0x4873a3};}catch(_0x5bfaa9){console['error']('Error\x20fetching\x20ELO\x20history:',_0x5bfaa9);throw _0x5bfaa9;}}export function resetPagination(){lastVisible=null;}