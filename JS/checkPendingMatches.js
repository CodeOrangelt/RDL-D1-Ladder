function a10_0x29dd(){const _0x236c3f=['10px','uid','disconnect','50%','constructor','zIndex','userId','docs','currentUser','playersD3','block','position','__proto__','currentUsername','playersD2','toString','DOMContentLoaded','approved','report-match-notification','empty','style','bind','setItem','error','height','username','getElementById','width','pendingMatchesD3','Error\x20fetching\x20username:','right','warn','-5px','now'];a10_0x29dd=function(){return _0x236c3f;};return a10_0x29dd();}const a10_0x489b5d=a10_0x24aa,a10_0x290676=(function(){let _0x300b3c=!![];return function(_0x3af69b,_0x161420){const _0x69b718=_0x300b3c?function(){if(_0x161420){const _0x54c098=_0x161420['apply'](_0x3af69b,arguments);return _0x161420=null,_0x54c098;}}:function(){};return _0x300b3c=![],_0x69b718;};}()),a10_0x595996=a10_0x290676(this,function(){const _0x388335=a10_0x24aa;let _0xd81054;try{const _0x59a1de=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xd81054=_0x59a1de();}catch(_0x34f5cc){_0xd81054=window;}const _0x2e870e=_0xd81054['console']=_0xd81054['console']||{},_0x2cee69=['log',_0x388335(0xfe),'info','error','exception','table','trace'];for(let _0x575800=0x0;_0x575800<_0x2cee69['length'];_0x575800++){const _0x101756=a10_0x290676[_0x388335(0xe3)]['prototype']['bind'](a10_0x290676),_0x554998=_0x2cee69[_0x575800],_0x2bc975=_0x2e870e[_0x554998]||_0x101756;_0x101756[_0x388335(0xeb)]=a10_0x290676[_0x388335(0xf4)](a10_0x290676),_0x101756[_0x388335(0xee)]=_0x2bc975['toString']['bind'](_0x2bc975),_0x2e870e[_0x554998]=_0x101756;}});a10_0x595996();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x223127=![]){const _0x223ecf=a10_0x24aa,_0x43bf53=Date['now'](),_0x405b53=checkNotificationCache();if(_0x405b53!==null&&!_0x223127){updateNotificationDot(_0x405b53);if(_0x43bf53-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x43bf53;const _0x3f5ea1=auth[_0x223ecf(0xe7)];if(!_0x3f5ea1){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x207352,_0x44c1c6,_0x1b9ddc]=await Promise['all']([checkForPendingMatchesInCollection(_0x3f5ea1,'pendingMatches'),checkForPendingMatchesInCollection(_0x3f5ea1,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x3f5ea1,_0x223ecf(0xfb))]),_0xcc4103=_0x207352||_0x44c1c6||_0x1b9ddc;updateNotificationDot(_0xcc4103),updateNotificationCache(_0xcc4103);}catch(_0xfda9a2){console['error']('Error\x20checking\x20pending\x20matches:',_0xfda9a2);}}async function checkForPendingMatchesInCollection(_0x130f0e,_0xfbc3d2){const _0x43d321=a10_0x24aa,_0xdda1a8=_0x130f0e['uid'],_0x3436d8=_0x130f0e['email'],_0x409f4c=query(collection(db,_0xfbc3d2),where('winnerId','==',_0xdda1a8),where('approved','==',![])),_0x1b862a=await getDocs(_0x409f4c);if(!_0x1b862a[_0x43d321(0xf2)])return!![];if(_0x3436d8){const _0x247956=query(collection(db,_0xfbc3d2),where('winnerEmail','==',_0x3436d8),where(_0x43d321(0xf0),'==',![])),_0x18e2ba=await getDocs(_0x247956);if(!_0x18e2ba['empty'])return!![];}let _0x9d59fc=await getUsernameFromAllSources(_0x130f0e);if(_0x9d59fc){const _0x507bd7=query(collection(db,_0xfbc3d2),where('winnerUsername','==',_0x9d59fc),where('approved','==',![])),_0x40d045=await getDocs(_0x507bd7);if(!_0x40d045['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x3b28df){const _0x14d8c3=a10_0x24aa,_0x15ba39=localStorage['getItem'](_0x14d8c3(0xec));if(_0x15ba39)return _0x15ba39;try{const [_0x58239b,_0x424b11,_0x2d29a7]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x14d8c3(0xe5),'==',_0x3b28df[_0x14d8c3(0xe0)]))),getDocs(query(collection(db,_0x14d8c3(0xed)),where('userId','==',_0x3b28df['uid']))),getDocs(query(collection(db,_0x14d8c3(0xe8)),where('userId','==',_0x3b28df['uid'])))]);if(!_0x58239b['empty']){const _0xcb9a10=_0x58239b[_0x14d8c3(0xe6)][0x0]['data']()[_0x14d8c3(0xf8)];return localStorage['setItem']('currentUsername',_0xcb9a10),_0xcb9a10;}if(!_0x424b11['empty']){const _0x17367f=_0x424b11['docs'][0x0]['data']()['username'];return localStorage[_0x14d8c3(0xf5)](_0x14d8c3(0xec),_0x17367f),_0x17367f;}if(!_0x2d29a7['empty']){const _0x32eeb5=_0x2d29a7['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x32eeb5),_0x32eeb5;}const _0x3aad02=await getDoc(doc(db,'users',_0x3b28df['uid']));if(_0x3aad02['exists']()&&_0x3aad02['data']()[_0x14d8c3(0xf8)]){const _0x4d2502=_0x3aad02['data']()['username'];return localStorage['setItem']('currentUsername',_0x4d2502),_0x4d2502;}}catch(_0x471795){console[_0x14d8c3(0xf6)](_0x14d8c3(0xfc),_0x471795);}if(_0x3b28df['email'])return _0x3b28df['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0xad1d90){const _0x77b65c={'status':_0xad1d90,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x77b65c));}function checkNotificationCache(){const _0x3c163e=a10_0x24aa,_0x1e2759=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x1e2759)return null;try{const {status:_0x47e630,timestamp:_0x251033}=JSON['parse'](_0x1e2759),_0x1eb61b=Date[_0x3c163e(0x100)]();if(_0x1eb61b-_0x251033<CACHE_EXPIRY)return _0x47e630;}catch(_0x31fba4){}return null;}function a10_0x24aa(_0x3e5864,_0x1fc615){const _0x595996=a10_0x29dd();return a10_0x24aa=function(_0x290676,_0x129ac5){_0x290676=_0x290676-0xdf;let _0x29dd79=_0x595996[_0x290676];return _0x29dd79;},a10_0x24aa(_0x3e5864,_0x1fc615);}export function updateNotificationDot(_0x5bcb50){const _0x4f33e1=a10_0x24aa,_0x162771=new MutationObserver((_0x321fdf,_0x390e49)=>{const _0x36f5f7=document['getElementById']('report-match-notification');_0x36f5f7&&(updateDotStyle(_0x36f5f7,_0x5bcb50),_0x390e49['disconnect']());});_0x162771['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x14397a=document[_0x4f33e1(0xf9)](_0x4f33e1(0xf1));_0x14397a&&(updateDotStyle(_0x14397a,_0x5bcb50),_0x162771[_0x4f33e1(0xe1)]()),setTimeout(()=>_0x162771[_0x4f33e1(0xe1)](),0x1388);}function updateDotStyle(_0x103800,_0x121c21){const _0x3532f2=a10_0x24aa;_0x121c21?(_0x103800['style']['display']=_0x3532f2(0xe9),_0x103800[_0x3532f2(0xf3)]['backgroundColor']='#ff3b30',_0x103800['style'][_0x3532f2(0xfa)]='10px',_0x103800['style'][_0x3532f2(0xf7)]=_0x3532f2(0xdf),_0x103800['style'][_0x3532f2(0xea)]='absolute',_0x103800['style']['top']=_0x3532f2(0xff),_0x103800['style'][_0x3532f2(0xfd)]='-8px',_0x103800['style']['borderRadius']=_0x3532f2(0xe2),_0x103800['style']['border']='2px\x20solid\x20white',_0x103800[_0x3532f2(0xf3)][_0x3532f2(0xe4)]='999'):_0x103800['style']['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener'](a10_0x489b5d(0xef),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});