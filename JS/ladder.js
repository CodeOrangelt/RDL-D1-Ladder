const a25_0x424d75=a25_0x314d,a25_0x4a22cc=(function(){let _0x58249f=!![];return function(_0x126a4c,_0x1fd448){const _0x186539=_0x58249f?function(){if(_0x1fd448){const _0x3b02f2=_0x1fd448['apply'](_0x126a4c,arguments);return _0x1fd448=null,_0x3b02f2;}}:function(){};return _0x58249f=![],_0x186539;};}()),a25_0x3bf729=a25_0x4a22cc(this,function(){const _0x5cfa5b=a25_0x314d;let _0x295802;try{const _0x4221d7=Function(_0x5cfa5b(0x17b)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x295802=_0x4221d7();}catch(_0x12177f){_0x295802=window;}const _0x29556b=_0x295802[_0x5cfa5b(0x14d)]=_0x295802['console']||{},_0xd8c6e=['log',_0x5cfa5b(0x16f),'info','error','exception','table','trace'];for(let _0x5e9c6b=0x0;_0x5e9c6b<_0xd8c6e['length'];_0x5e9c6b++){const _0x58f4ce=a25_0x4a22cc['constructor']['prototype']['bind'](a25_0x4a22cc),_0x47b212=_0xd8c6e[_0x5e9c6b],_0x3ccf1c=_0x29556b[_0x47b212]||_0x58f4ce;_0x58f4ce['__proto__']=a25_0x4a22cc['bind'](a25_0x4a22cc),_0x58f4ce['toString']=_0x3ccf1c[_0x5cfa5b(0x192)][_0x5cfa5b(0x1a9)](_0x3ccf1c),_0x29556b[_0x47b212]=_0x58f4ce;}});a25_0x3bf729();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x5a1b6b=0x1){const _0x26f2a3=a25_0x314d;try{document[_0x26f2a3(0x130)]('loading-indicator')['style']['display']='block';const _0x2548a7=await getLadderData(_0x5a1b6b);_0x2548a7[_0x26f2a3(0x1a3)]((_0x2b3f2a,_0x4b33e9)=>_0x4b33e9['elo']-_0x2b3f2a[_0x26f2a3(0x17f)]);const _0x52031b=_0x2548a7['map'](_0xe53ad5=>_0xe53ad5['id']),_0x2e188c=await getEloHistoryBatch(_0x52031b,_0x5a1b6b),_0x5d16f0=_0x2548a7['map']((_0x54362,_0x232002)=>{const _0x5e9891=_0x26f2a3,_0x5828fd=_0x2e188c[_0x54362['id']]||[],_0x3c31af=_0x5828fd['sort']((_0x44fae8,_0x1f5f0a)=>new Date(_0x1f5f0a['date'])-new Date(_0x44fae8[_0x5e9891(0x181)]))[_0x5e9891(0x169)](0x0,0x5);return{..._0x54362,'rank':_0x232002+0x1,'lastMatches':_0x3c31af,'recentActivity':_0x3c31af['length']>0x0};});renderLadder(_0x5d16f0),setupRealTimeUpdates(_0x5a1b6b);}catch(_0x892efa){console['error']('Error\x20loading\x20ladder\x20data:',_0x892efa),document['getElementById']('error-message')['innerText']=_0x26f2a3(0x12c);}finally{document['getElementById'](_0x26f2a3(0x13a))['style']['display']='none';}}function setupRealTimeUpdates(_0x20d7d2=0x1){const _0x11caa5=a25_0x314d;activeListeners[_0x11caa5(0x15e)](_0x5a8415=>_0x5a8415()),activeListeners=[];const _0x3001a3=_0x20d7d2===0x1?'players':'playersD'+_0x20d7d2,_0x5e9456=_0x20d7d2===0x1?'matches':'matchesD'+_0x20d7d2,_0x51eacb=new Date();_0x51eacb['setDate'](_0x51eacb['getDate']()-0x1);const _0x44fcbc=setupEfficientListener(_0x5e9456,[where('date','>=',_0x51eacb['toISOString']()),limit(0xa),orderBy(_0x11caa5(0x181),'desc')],async _0x3a894b=>{_0x3a894b['length']>0x0&&await loadLadderData(_0x20d7d2);});activeListeners[_0x11caa5(0x1aa)](_0x44fcbc);}export function cleanupListeners(){activeListeners['forEach'](_0x1399cf=>_0x1399cf()),activeListeners=[];}function a25_0x314d(_0x5e6c91,_0x3b9d40){const _0x3bf729=a25_0x2939();return a25_0x314d=function(_0x4a22cc,_0x10d665){_0x4a22cc=_0x4a22cc-0x128;let _0x29399c=_0x3bf729[_0x4a22cc];return _0x29399c;},a25_0x314d(_0x5e6c91,_0x3b9d40);}function a25_0x2939(){const _0x373d60=['map','admin@ladder.com','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','hasTeam','Ladder\x20table\x20body\x20not\x20found','winnerUsername','getElementById','#50C878','playersD3','cursor','wins','set','D2\x20toggle\x20clicked','\x20displaying\x20token:\x20','title','kda','loading-indicator','add','error','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','data','elo-recommendation-text-d1','position','block',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','active','ðŸŽ¨\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.trend-indicator','appendChild','No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','innerHTML','change','equipped','console','querySelector','remove','#ladder\x20tbody','bold','losses','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','elo-recommendation-text-','#DC143C','length','teammate','empty','You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>','log','elo-recommendation-text-duos','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','none','forEach','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>',';\x22>','newEloRating','totalMatches','</span>\x20(ELO:\x20','classList','totalKills','<img\x20src=\x22../images/flags/','abs','d1-ladder-container','slice','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','Emerald','#C0C0C0','duos','warn','currentUser','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Gold','No\x20user\x20profile\x20found','disabled','newElo','Active','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','opacity','has','docs','return\x20(function()\x20','ðŸŽ¯\x20','Error\x20checking\x20','</td>\x0a\x20\x20\x20\x20</tr>','elo','click','date','eloRating','toLowerCase','get','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','visibility','winRate','timestamp','You\x27re\x20not\x20registered\x20on\x20the\x20','textContent','display','includes','catch','checked','username','Error\x20updating\x20ELO\x20trend\x20indicators:','loserScore','toString','label[for=\x22duos-switch\x22]','</span>.\x20Challenge\x20other\x20teams!','owner','toFixed','round','),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','fontWeight','players','ðŸª™\x20Loaded\x20fresh\x20tokens\x20for','d3-ladder-container','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','addEventListener','style','points','DOMContentLoaded','player','sort','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>','admin-only-message','#4CAF50','D3\x20toggle\x20clicked','winnerScore','bind','push','council','Error\x20checking\x20admin\x20status:','loserUsername','duos-ladder-container','max','elo-recommendation-text-d2'];a25_0x2939=function(){return _0x373d60;};return a25_0x2939();}function renderLadder(_0xddb3bb){const _0x538a9d=a25_0x314d,_0x26635b=document['getElementById']('ladder-container');_0x26635b[_0x538a9d(0x14a)]='',_0xddb3bb['forEach'](_0x19280a=>{const _0x1ca355=_0x538a9d,_0x46a09e=document['createElement']('div');_0x46a09e['className']='ladder-player',_0x46a09e['innerHTML']=_0x1ca355(0x12b)+_0x19280a['rank']+_0x1ca355(0x15c)+(_0x19280a['username']||_0x19280a['id'])+_0x1ca355(0x1a4)+_0x19280a['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x19280a['recentActivity']?_0x1ca355(0x143):'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x19280a['recentActivity']?_0x1ca355(0x176):'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x26635b[_0x1ca355(0x147)](_0x46a09e);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0xe82fd8=![]){const _0x8b99ab=a25_0x314d,_0x45bdcd=document['querySelector'](_0x8b99ab(0x150));if(!_0x45bdcd){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x45bdcd['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x691977=Date['now']();if(!_0xe82fd8&&playerCache['data']&&_0x691977-playerCache['timestamp']<CACHE_DURATION){console[_0x8b99ab(0x15a)]('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache[_0x8b99ab(0x13e)]);return;}const _0x5f225a=collection(db,_0x8b99ab(0x19a)),_0x57947c=await getDocs(_0x5f225a),_0x5e46e6=[];_0x57947c['forEach'](_0x21c2ec=>{const _0x2b1028=_0x8b99ab,_0x42fe2c=_0x21c2ec['data']();_0x5e46e6['push']({..._0x42fe2c,'id':_0x21c2ec['id'],'elo':_0x42fe2c['eloRating']||0x0,'position':_0x42fe2c[_0x2b1028(0x140)]||Number['MAX_SAFE_INTEGER']});});const _0x166855=collection(db,'userProfiles'),_0x1701c9=await getDocs(_0x166855),_0x4c922f=new Map();_0x1701c9['forEach'](_0x3a176d=>{const _0x3cda99=_0x8b99ab,_0x19b145=_0x3a176d['data']();_0x19b145['username']&&_0x4c922f['set'](_0x19b145[_0x3cda99(0x18f)]['toLowerCase'](),_0x19b145);}),_0x5e46e6['forEach'](_0x2b30ea=>{const _0x4c16fe=_0x8b99ab,_0x3f0e72=_0x2b30ea['username']?.['toLowerCase']();if(_0x3f0e72&&_0x4c922f['has'](_0x3f0e72)){const _0x21b600=_0x4c922f[_0x4c16fe(0x184)](_0x3f0e72);_0x21b600['country']&&(_0x2b30ea['country']=_0x21b600['country']['toLowerCase']()),_0x2b30ea[_0x4c16fe(0x1a0)]=_0x21b600['points']||0x0;}else _0x2b30ea['points']=0x0;});const _0x2b79e9=_0x5e46e6[_0x8b99ab(0x128)](_0x46f30f=>_0x46f30f[_0x8b99ab(0x18f)]),_0xb8bdaa=await fetchBatchMatchStats(_0x2b79e9);_0x5e46e6[_0x8b99ab(0x1a3)]((_0x4cc382,_0x5486b5)=>{const _0x2fa62e=_0x8b99ab,_0x45d57e=_0xb8bdaa['get'](_0x4cc382[_0x2fa62e(0x18f)])?.['totalMatches']||0x0,_0x4324ca=_0xb8bdaa['get'](_0x5486b5['username'])?.['totalMatches']||0x0;if(_0x45d57e===0x0!==(_0x4324ca===0x0))return _0x45d57e===0x0?0x1:-0x1;return(_0x4cc382[_0x2fa62e(0x140)]||0x3e7)-(_0x5486b5[_0x2fa62e(0x140)]||0x3e7);}),_0x5e46e6['forEach']((_0x3cbb8f,_0x1d8fa9)=>{_0x3cbb8f['position']=_0x1d8fa9+0x1;}),playerCache[_0x8b99ab(0x13e)]=_0x5e46e6,playerCache['timestamp']=_0x691977,updateLadderDisplay(_0x5e46e6,_0xb8bdaa);}catch(_0x596322){console[_0x8b99ab(0x13c)]('Error\x20loading\x20ladder:',_0x596322),_0x45bdcd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x596322['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x2f9ec7){const _0x5e486e=a25_0x314d,_0x36e057=new Map();try{_0x2f9ec7['forEach'](_0x196138=>{_0x36e057['set'](_0x196138,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});});const _0x1d85ce=collection(db,'approvedMatches'),_0x387808=await getDocs(_0x1d85ce);_0x387808[_0x5e486e(0x15e)](_0x5e48ed=>{const _0x1d0317=_0x5e486e,_0x5dad16=_0x5e48ed['data'](),_0x542dee=_0x5dad16[_0x1d0317(0x12f)],_0x5bf503=_0x5dad16[_0x1d0317(0x1ad)];if(_0x2f9ec7[_0x1d0317(0x18c)](_0x542dee)){const _0x226598=_0x36e057[_0x1d0317(0x184)](_0x542dee);_0x226598[_0x1d0317(0x134)]++,_0x226598['totalMatches']++,_0x226598[_0x1d0317(0x165)]+=parseInt(_0x5dad16[_0x1d0317(0x1a8)])||0x0,_0x226598['totalDeaths']+=parseInt(_0x5dad16[_0x1d0317(0x191)])||0x0;}if(_0x2f9ec7['includes'](_0x5bf503)){const _0x1dce62=_0x36e057['get'](_0x5bf503);_0x1dce62['losses']++,_0x1dce62[_0x1d0317(0x162)]++,_0x1dce62['totalKills']+=parseInt(_0x5dad16['loserScore'])||0x0,_0x1dce62['totalDeaths']+=parseInt(_0x5dad16['winnerScore'])||0x0;}}),_0x2f9ec7[_0x5e486e(0x15e)](_0x676166=>{const _0x194daa=_0x5e486e,_0x182caf=_0x36e057[_0x194daa(0x184)](_0x676166);_0x182caf[_0x194daa(0x139)]=_0x182caf['totalDeaths']>0x0?(_0x182caf['totalKills']/_0x182caf['totalDeaths'])['toFixed'](0x2):_0x182caf['totalKills'][_0x194daa(0x196)](0x2),_0x182caf[_0x194daa(0x187)]=_0x182caf['totalMatches']>0x0?(_0x182caf[_0x194daa(0x134)]/_0x182caf['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x1d4d30){console[_0x5e486e(0x13c)]('Error\x20fetching\x20batch\x20match\x20stats:',_0x1d4d30);}return _0x36e057;}function createPlayerRow(_0x3026c0,_0x3b07c0){const _0x33cf48=a25_0x314d,_0x17c618=parseFloat(_0x3026c0['elo'])||0x0;let _0x58ea57=_0x33cf48(0x155);if(_0x3b07c0['totalMatches']===0x0)_0x58ea57=_0x33cf48(0x155);else{if(_0x3b07c0['winRate']>=0x50&&_0x3b07c0['totalMatches']>=0x14)_0x58ea57='#50C878';else{if(_0x17c618>=0x2bc)_0x58ea57='#FFD700';else{if(_0x17c618>=0x1f4)_0x58ea57=_0x33cf48(0x16d);else _0x17c618>=0xc8&&(_0x58ea57='#CD7F32');}}}let _0x57dbb9='';return _0x3026c0['country']&&(_0x57dbb9='<img\x20src=\x22../images/flags/'+_0x3026c0['country'][_0x33cf48(0x183)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3026c0['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x33cf48(0x13d)+_0x3026c0['position']+_0x33cf48(0x12a)+encodeURIComponent(_0x3026c0['username'])+_0x33cf48(0x153)+_0x58ea57+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3026c0[_0x33cf48(0x18f)]+_0x33cf48(0x145)+_0x57dbb9+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x58ea57+_0x33cf48(0x142)+_0x17c618+_0x33cf48(0x16b)+_0x3b07c0['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b07c0['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b07c0[_0x33cf48(0x152)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b07c0[_0x33cf48(0x139)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b07c0['winRate']+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b07c0['points']+'</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x57c558,_0x46ea1e=0x0,_0x1c4cf8=0x0){const _0x44ceef=a25_0x314d;if(_0x46ea1e===0x0)return'Unranked';if(_0x57c558>=0x3e8&&_0x1c4cf8>=0x50&&_0x46ea1e>=0x14)return _0x44ceef(0x16c);if(_0x57c558>=0x2bc)return _0x44ceef(0x172);if(_0x57c558>=0x1f4)return'Silver';if(_0x57c558>=0xc8)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x295b19){const _0x2815a9=a25_0x314d,_0x5cd432=new Map();_0x295b19['forEach'](_0x5c8dac=>{_0x5cd432['set'](_0x5c8dac,0x0);});try{const _0x4370be=collection(db,'players'),_0x2cae3a=await getDocs(_0x4370be),_0x45f4e8=new Map(),_0x317b70=new Map();_0x2cae3a['forEach'](_0x10689d=>{const _0x449a72=a25_0x314d,_0x45ead0=_0x10689d['data']();_0x45ead0[_0x449a72(0x18f)]&&(_0x45f4e8[_0x449a72(0x135)](_0x10689d['id'],_0x45ead0['username']),_0x317b70[_0x449a72(0x135)](_0x45ead0[_0x449a72(0x18f)]['toLowerCase'](),_0x10689d['id']));});const _0x4ac3df=collection(db,'eloHistory'),_0x35776d=query(_0x4ac3df,orderBy('timestamp','desc'),limit(0x12c)),_0x5e86ca=await getDocs(_0x35776d);if(_0x5e86ca[_0x2815a9(0x158)])return console[_0x2815a9(0x15a)]('ELO\x20history\x20collection\x20is\x20empty'),_0x5cd432;if(_0x5e86ca['docs'][_0x2815a9(0x156)]>0x0){const _0x2f321e=_0x5e86ca['docs'][0x0]['data']();if(_0x2f321e[_0x2815a9(0x1a2)]&&_0x45f4e8['has'](_0x2f321e[_0x2815a9(0x1a2)])){}}const _0x96792=new Map();let _0xd2a7cc=0x0;_0x5e86ca['forEach'](_0x589d2e=>{const _0x7a7f1e=_0x2815a9,_0x510b19=_0x589d2e['data']();let _0x43a813=null;if(_0x510b19['player']&&_0x45f4e8[_0x7a7f1e(0x179)](_0x510b19['player']))_0x43a813=_0x45f4e8[_0x7a7f1e(0x184)](_0x510b19[_0x7a7f1e(0x1a2)]);else{if(_0x510b19['username']&&_0x317b70['has'](_0x510b19[_0x7a7f1e(0x18f)][_0x7a7f1e(0x183)]()))_0x43a813=_0x510b19['username'];else _0x510b19['playerUsername']&&_0x317b70['has'](_0x510b19['playerUsername']['toLowerCase']())&&(_0x43a813=_0x510b19['playerUsername']);}_0x43a813&&_0x295b19['includes'](_0x43a813)&&(_0xd2a7cc++,!_0x96792['has'](_0x43a813)&&_0x96792['set'](_0x43a813,[]),_0x96792[_0x7a7f1e(0x184)](_0x43a813)['push']({..._0x510b19,'timestamp':_0x510b19[_0x7a7f1e(0x188)]?.['seconds']||0x0}));}),_0x96792[_0x2815a9(0x15e)]((_0x15f75e,_0x2f37bc)=>{const _0xb7b6b6=_0x2815a9;if(_0x15f75e[_0xb7b6b6(0x156)]>0x0){_0x15f75e['sort']((_0x76fac9,_0x41bb6e)=>_0x41bb6e['timestamp']-_0x76fac9['timestamp']);const _0x3c43c5=_0x15f75e['find'](_0x300342=>_0x300342[_0xb7b6b6(0x14b)]!==undefined||_0x300342[_0xb7b6b6(0x175)]!==undefined&&_0x300342['previousElo']!==undefined||_0x300342['newEloRating']!==undefined&&_0x300342['oldEloRating']!==undefined);if(_0x3c43c5){let _0x5ba01e;if(_0x3c43c5[_0xb7b6b6(0x14b)]!==undefined)_0x5ba01e=parseInt(_0x3c43c5['change']);else{if(_0x3c43c5[_0xb7b6b6(0x175)]!==undefined&&entry['previousElo']!==undefined)_0x5ba01e=parseInt(_0x3c43c5[_0xb7b6b6(0x175)])-parseInt(_0x3c43c5['previousElo']);else _0x3c43c5[_0xb7b6b6(0x161)]!==undefined&&entry['oldEloRating']!==undefined&&(_0x5ba01e=parseInt(_0x3c43c5[_0xb7b6b6(0x161)])-parseInt(_0x3c43c5['oldEloRating']));}!isNaN(_0x5ba01e)&&_0x5ba01e!==0x0&&_0x5cd432['set'](_0x2f37bc,_0x5ba01e);}}});}catch(_0x127f57){console['error']('Error\x20fetching\x20ELO\x20history:',_0x127f57);}return _0x5cd432;}function createPlayerRowWithToken(_0x1cee12,_0x571c09,_0x3f9c86){const _0x593435=a25_0x314d,_0x475970=parseFloat(_0x1cee12[_0x593435(0x17f)])||0x0;let _0x3bf080='#DC143C';if(_0x571c09['totalMatches']===0x0)_0x3bf080='#DC143C';else{if(_0x571c09['winRate']>=0x50&&_0x571c09[_0x593435(0x162)]>=0x14)_0x3bf080=_0x593435(0x131);else{if(_0x475970>=0x2bc)_0x3bf080='#FFD700';else{if(_0x475970>=0x1f4)_0x3bf080='#C0C0C0';else _0x475970>=0xc8&&(_0x3bf080='#CD7F32');}}}let _0x4ca436='';_0x1cee12['country']&&(_0x4ca436=_0x593435(0x166)+_0x1cee12['country']['toLowerCase']()+_0x593435(0x149)+_0x1cee12['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x1b17c1='';return _0x3f9c86&&(_0x1b17c1='<img\x20src=\x22'+_0x3f9c86['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3f9c86['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x3f9c86['tokenName']+'\x20'+(_0x3f9c86['equipped']?'(Equipped)':'')+_0x593435(0x177)),_0x593435(0x13d)+_0x1cee12[_0x593435(0x140)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x1cee12['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x3bf080+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1cee12[_0x593435(0x18f)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4ca436+_0x593435(0x171)+_0x1b17c1+_0x593435(0x16a)+_0x3bf080+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x475970+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x571c09[_0x593435(0x162)]+_0x593435(0x15f)+_0x571c09['wins']+_0x593435(0x15f)+_0x571c09['losses']+_0x593435(0x15f)+_0x571c09[_0x593435(0x139)]+_0x593435(0x15f)+_0x571c09['winRate']+_0x593435(0x19d)+(_0x1cee12['points']||0x0)+_0x593435(0x17e);}async function updateLadderDisplay(_0xc45bc3,_0x1690d1=null){const _0x3ede4c=a25_0x314d,_0x19f872=document['querySelector'](_0x3ede4c(0x150));if(!_0x19f872){console['error'](_0x3ede4c(0x12e));return;}const _0x17ed45=document[_0x3ede4c(0x14e)]('#ladder\x20thead\x20tr');_0x17ed45&&(_0x17ed45[_0x3ede4c(0x14a)]=_0x3ede4c(0x185));const _0x53f8cd=_0xc45bc3['map'](_0x6f49b1=>_0x6f49b1['username']);!_0x1690d1&&(_0x1690d1=await fetchBatchMatchStats(_0x53f8cd));let _0x4354d6=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x4354d6=await getTokensByUsernames(_0x53f8cd),console['log'](_0x3ede4c(0x19b),_0x4354d6['size'],'players'),_0x4354d6['forEach']((_0x4644f3,_0xb077e5)=>{const _0x334bf5=_0x3ede4c,_0x317373=_0x4644f3['find'](_0x492d3d=>_0x492d3d[_0x334bf5(0x14c)]);_0x317373&&console['log'](_0x334bf5(0x17c)+_0xb077e5+'\x20has\x20equipped:\x20'+_0x317373['tokenName']);});}catch(_0x331def){console['error']('Error\x20fetching\x20tokens:',_0x331def);}const _0x391dc8=_0xc45bc3['map'](_0x4803d5=>{const _0x2729af=_0x3ede4c,_0x56e3db=_0x1690d1['get'](_0x4803d5['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x248e7a=_0x4354d6['get'](_0x4803d5['username'])||[],_0x38feb7=getPrimaryDisplayToken(_0x248e7a);return _0x38feb7&&console[_0x2729af(0x15a)](_0x2729af(0x144)+_0x4803d5[_0x2729af(0x18f)]+_0x2729af(0x137)+_0x38feb7['tokenName']+'\x20(equipped:\x20'+_0x38feb7['equipped']+')'),createPlayerRowWithToken(_0x4803d5,_0x56e3db,_0x38feb7);})['join']('');_0x19f872[_0x3ede4c(0x14a)]=_0x391dc8,getPlayersLastEloChanges(_0x53f8cd)['then'](_0x237073=>{const _0x297bb4=new Map();_0x19f872['querySelectorAll']('tr')['forEach']((_0x497f74,_0x3b45b0)=>{const _0x5295df=a25_0x314d;_0x3b45b0<_0x53f8cd[_0x5295df(0x156)]&&_0x297bb4['set'](_0x53f8cd[_0x3b45b0],_0x497f74);}),_0x237073['forEach']((_0x5cd9f0,_0x2c8ed9)=>{const _0x1dc353=a25_0x314d,_0x57cb9b=_0x297bb4['get'](_0x2c8ed9);if(_0x57cb9b&&_0x5cd9f0!==0x0){const _0x1b816a=_0x57cb9b['querySelector']('td:nth-child(3)');if(_0x1b816a){const _0x4a3323=_0x5cd9f0>0x0?'+'+_0x5cd9f0:''+_0x5cd9f0,_0x2d4635=_0x1b816a[_0x1dc353(0x14e)](_0x1dc353(0x146));_0x2d4635&&(_0x2d4635['textContent']=_0x4a3323,_0x2d4635['style']['color']=_0x5cd9f0>0x0?_0x1dc353(0x1a6):'#F44336',_0x2d4635[_0x1dc353(0x19f)][_0x1dc353(0x199)]=_0x1dc353(0x151),_0x2d4635[_0x1dc353(0x19f)]['fontSize']='0.85em',_0x2d4635[_0x1dc353(0x19f)][_0x1dc353(0x18b)]='inline',_0x2d4635['style'][_0x1dc353(0x186)]='visible',_0x2d4635['style'][_0x1dc353(0x178)]='1');}}});})[_0x3ede4c(0x18d)](_0x186bec=>console['error'](_0x3ede4c(0x190),_0x186bec));}function initLadderToggles(){const _0x393f5f=a25_0x314d,_0x5fb4fc=document['getElementById']('d1-switch'),_0x136fed=document['getElementById']('d2-switch'),_0x23ef9a=document['getElementById']('d3-switch'),_0x42842f=document['getElementById']('duos-switch'),_0x4a0463=document['getElementById'](_0x393f5f(0x168)),_0x2760ee=document['getElementById']('d2-ladder-container'),_0x54683d=document['getElementById']('d3-ladder-container'),_0x4221b1=document['getElementById'](_0x393f5f(0x1ae));function _0x391c7b(){const _0x263611=_0x393f5f;if(_0x4a0463)_0x4a0463[_0x263611(0x164)]['remove']('active');if(_0x2760ee)_0x2760ee['classList'][_0x263611(0x14f)]('active');if(_0x54683d)_0x54683d['classList']['remove']('active');if(_0x4221b1)_0x4221b1['style'][_0x263611(0x18b)]='none';if(_0x4a0463)_0x4a0463['style']['display']='none';if(_0x2760ee)_0x2760ee[_0x263611(0x19f)]['display']=_0x263611(0x15d);if(_0x54683d)_0x54683d['style']['display']='none';}_0x5fb4fc&&_0x5fb4fc[_0x393f5f(0x19e)]('click',()=>{const _0x5bf2f9=_0x393f5f;console[_0x5bf2f9(0x15a)]('D1\x20toggle\x20clicked'),_0x391c7b();_0x4a0463&&(_0x4a0463[_0x5bf2f9(0x164)]['add'](_0x5bf2f9(0x143)),_0x4a0463['style']['display']='block');document[_0x5bf2f9(0x130)]('elo-recommendation-text-d1')['style']['display']=_0x5bf2f9(0x141),document['getElementById']('elo-recommendation-text-d2')[_0x5bf2f9(0x19f)][_0x5bf2f9(0x18b)]='none',document[_0x5bf2f9(0x130)]('elo-recommendation-text-d3')['style']['display']=_0x5bf2f9(0x15d);if(_0x5fb4fc)_0x5fb4fc['classList'][_0x5bf2f9(0x13b)](_0x5bf2f9(0x143));if(_0x136fed)_0x136fed['classList']['remove']('active');if(_0x23ef9a)_0x23ef9a['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x136fed&&_0x136fed['addEventListener'](_0x393f5f(0x180),()=>{const _0x21f57e=_0x393f5f;console['log'](_0x21f57e(0x136)),_0x391c7b();_0x2760ee&&(_0x2760ee['classList']['add']('active'),_0x2760ee['style']['display']='block');document['getElementById'](_0x21f57e(0x13f))['style']['display']='none',document[_0x21f57e(0x130)](_0x21f57e(0x1b0))[_0x21f57e(0x19f)][_0x21f57e(0x18b)]=_0x21f57e(0x141),document['getElementById']('elo-recommendation-text-d3')['style'][_0x21f57e(0x18b)]='none';if(_0x136fed)_0x136fed['classList']['add']('active');if(_0x5fb4fc)_0x5fb4fc[_0x21f57e(0x164)][_0x21f57e(0x14f)](_0x21f57e(0x143));if(_0x23ef9a)_0x23ef9a['classList']['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0x23ef9a&&_0x23ef9a['addEventListener'](_0x393f5f(0x180),()=>{const _0x1cb6ca=_0x393f5f;console['log'](_0x1cb6ca(0x1a7)),_0x391c7b();_0x54683d&&(_0x54683d['classList']['add'](_0x1cb6ca(0x143)),_0x54683d['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style'][_0x1cb6ca(0x18b)]='none',document['getElementById']('elo-recommendation-text-d2')['style'][_0x1cb6ca(0x18b)]='none',document['getElementById']('elo-recommendation-text-d3')[_0x1cb6ca(0x19f)]['display']='block';if(_0x23ef9a)_0x23ef9a['classList'][_0x1cb6ca(0x13b)](_0x1cb6ca(0x143));if(_0x5fb4fc)_0x5fb4fc['classList']['remove']('active');if(_0x136fed)_0x136fed[_0x1cb6ca(0x164)]['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x42842f&&_0x42842f['addEventListener']('click',()=>{const _0x303be6=_0x393f5f;_0x391c7b();if(_0x4221b1)_0x4221b1['style'][_0x303be6(0x18b)]='block';displayLadderDuos(),findBestOpponent('duos'),document[_0x303be6(0x130)]('elo-recommendation-text-duos')&&(document[_0x303be6(0x130)](_0x303be6(0x15b))['style'][_0x303be6(0x18b)]=_0x303be6(0x141)),document[_0x303be6(0x130)]('elo-recommendation-text-d1')['style'][_0x303be6(0x18b)]='none',document[_0x303be6(0x130)]('elo-recommendation-text-d2')['style']['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']=_0x303be6(0x15d);});}document['addEventListener']('DOMContentLoaded',()=>{const _0x2d38a5=a25_0x314d;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')['style'][_0x2d38a5(0x18b)]='block';});export{displayLadder};async function findBestOpponent(_0x21e995='d1'){const _0x2ebcdb=a25_0x314d,_0x1db1c4=_0x2ebcdb(0x154)+_0x21e995,_0x34ead5=document['getElementById'](_0x1db1c4);if(!_0x34ead5){console[_0x2ebcdb(0x13c)]('Recommendation\x20element\x20for\x20'+_0x21e995+'\x20not\x20found');return;}const _0x5c91e3=auth[_0x2ebcdb(0x170)];if(!_0x5c91e3){_0x34ead5['textContent']='';return;}try{const _0x3ec378=doc(db,'userProfiles',_0x5c91e3['uid']),_0x48d532=await getDoc(_0x3ec378);if(!_0x48d532['exists']()){console['log'](_0x2ebcdb(0x173)),_0x34ead5['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x31d3fe=_0x48d532[_0x2ebcdb(0x13e)](),_0x34d85c=_0x31d3fe[_0x2ebcdb(0x18f)];if(!_0x34d85c){_0x34ead5['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x4073a1;switch(_0x21e995){case'd1':_0x4073a1='players';break;case'd2':_0x4073a1='playersD2';break;case'd3':_0x4073a1=_0x2ebcdb(0x132);break;case _0x2ebcdb(0x16e):_0x4073a1='playersDuos';break;default:_0x4073a1='players';}if(_0x21e995===_0x2ebcdb(0x16e)){const _0x20f7c2=collection(db,_0x4073a1),_0x553692=query(_0x20f7c2,where(_0x2ebcdb(0x18f),'==',_0x34d85c)),_0x52c9d5=await getDocs(_0x553692);if(_0x52c9d5['empty']){_0x34ead5['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x10946c=_0x52c9d5['docs'][0x0]['data'](),_0x3decbb=parseInt(_0x10946c['eloRating'])||0x4b0;if(_0x10946c[_0x2ebcdb(0x12d)]&&_0x10946c['teammate']){_0x34ead5['innerHTML']=_0x2ebcdb(0x159)+_0x10946c[_0x2ebcdb(0x157)]+_0x2ebcdb(0x194);return;}const _0xd1ed0=await getDocs(_0x20f7c2);let _0x59ef01=null,_0x38bffe=-0x1;_0xd1ed0['forEach'](_0x2a89e6=>{const _0x189d03=_0x2ebcdb,_0x3e3845=_0x2a89e6[_0x189d03(0x13e)]();if(_0x3e3845[_0x189d03(0x18f)]===_0x34d85c)return;if(_0x3e3845['hasTeam'])return;const _0x18b6cd=parseInt(_0x3e3845['eloRating'])||0x4b0,_0x112ea8=Math[_0x189d03(0x167)](_0x18b6cd-_0x3decbb),_0x19a846=Math['max'](0x0,0xc8-_0x112ea8);_0x19a846>_0x38bffe&&(_0x59ef01=_0x3e3845,_0x38bffe=_0x19a846);});if(_0x59ef01){const _0x3dcb18=parseInt(_0x59ef01[_0x2ebcdb(0x182)])||0x4b0;let _0x2d353e='gray';if(_0x3dcb18>=0x7d0)_0x2d353e='#50C878';else{if(_0x3dcb18>=0x708)_0x2d353e='#FFD700';else{if(_0x3dcb18>=0x640)_0x2d353e=_0x2ebcdb(0x16d);else _0x3dcb18>=0x578&&(_0x2d353e='#CD7F32');}}_0x34ead5['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x2d353e+_0x2ebcdb(0x160)+_0x59ef01['username']+_0x2ebcdb(0x163)+_0x3dcb18+')';}else _0x34ead5[_0x2ebcdb(0x18a)]=_0x2ebcdb(0x148);return;}const _0x11b9a9=collection(db,_0x4073a1),_0x345f81=query(_0x11b9a9,where(_0x2ebcdb(0x18f),'==',_0x34d85c)),_0x2efef8=await getDocs(_0x345f81);if(_0x2efef8['empty']){_0x34ead5['textContent']=_0x2ebcdb(0x189)+_0x21e995['toUpperCase']()+'\x20ladder';return;}const _0x51b583=_0x2efef8[_0x2ebcdb(0x17a)][0x0]['data'](),_0x38da4e=parseInt(_0x51b583['eloRating'])||0x5dc,_0x5e7974=await getDocs(_0x11b9a9);let _0x319b2b=null,_0x5ddf26=-0x1;const _0x3522ec=getPlayerRankName(_0x38da4e);_0x5e7974[_0x2ebcdb(0x15e)](_0x2339e6=>{const _0x45170f=_0x2ebcdb,_0x55a47b=_0x2339e6['data']();if(_0x55a47b['username']===_0x34d85c)return;const _0xf2fd44=parseInt(_0x55a47b['eloRating'])||0x5dc,_0x3cb294=getPlayerRankName(_0xf2fd44),_0x58cb10=Math['abs'](_0xf2fd44-_0x38da4e),_0x49de1f=0x20,_0x430bab=0x1/(0x1+Math['pow'](0xa,(_0xf2fd44-_0x38da4e)/0x190)),_0x374f24=Math[_0x45170f(0x197)](_0x49de1f*(0x1-_0x430bab));if(_0x374f24<=0x0)return;let _0x4b3044=0x0;const _0x31a1c8=Math[_0x45170f(0x1af)](0x0,0x64-_0x58cb10*0.5),_0x1df6f6=_0x374f24>=0x3&&_0x374f24<=0x8?0x32:_0x374f24>0x0&&_0x374f24<0xf?0x1e:0xa,_0xd1d6f0=_0x3522ec===_0x3cb294?0x28:0x0;_0x4b3044=_0x31a1c8+_0x1df6f6+_0xd1d6f0,_0x4b3044>_0x5ddf26&&(_0x319b2b=_0x55a47b,_0x5ddf26=_0x4b3044);});if(_0x319b2b){const _0x325afb=parseInt(_0x319b2b[_0x2ebcdb(0x182)])||0x5dc;let _0x5c8b29='gray';if(_0x325afb>=0x7d0)_0x5c8b29='#50C878';else{if(_0x325afb>=0x708)_0x5c8b29='#FFD700';else{if(_0x325afb>=0x640)_0x5c8b29='#b9f1fc';else _0x325afb>=0x578&&(_0x5c8b29='#CD7F32');}}_0x34ead5['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x38da4e+_0x2ebcdb(0x198)+_0x5c8b29+';\x22>'+_0x319b2b['username']+'</span>';}else _0x34ead5['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x38da4e+')';}catch(_0x15dcdb){console[_0x2ebcdb(0x13c)]('Error\x20finding\x20best\x20opponent:',_0x15dcdb),_0x34ead5[_0x2ebcdb(0x18a)]='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x10444d=>{const _0x5b89c0=a25_0x314d,_0x475e5a=document['getElementById'](_0x5b89c0(0x168))&&document[_0x5b89c0(0x130)]('d1-ladder-container')['style']['display']!=='none',_0x380d94=document['getElementById']('d2-ladder-container')&&document[_0x5b89c0(0x130)]('d2-ladder-container')['style']['display']!==_0x5b89c0(0x15d),_0x399e67=document[_0x5b89c0(0x130)]('d3-ladder-container')&&document['getElementById'](_0x5b89c0(0x19c))['style']['display']!==_0x5b89c0(0x15d),_0x1804db=document[_0x5b89c0(0x130)]('duos-ladder-container')&&document['getElementById']('duos-ladder-container')['style'][_0x5b89c0(0x18b)]!=='none',_0xc79640=_0x475e5a?'d1':_0x380d94?'d2':_0x399e67?'d3':_0x1804db?'duos':'d1';findBestOpponent(_0xc79640);}),document['addEventListener'](a25_0x424d75(0x1a1),()=>{const _0x37d679=a25_0x424d75,_0x59511d=document[_0x37d679(0x130)]('duos-switch'),_0x5967c0=document['querySelector'](_0x37d679(0x193));_0x59511d&&_0x5967c0&&(_0x59511d['addEventListener']('change',async _0x4e47e1=>{const _0x49953b=_0x37d679;if(_0x4e47e1['target']['checked']){const _0x3673d5=auth?.['currentUser'],_0x37632e=await checkIfUserIsAdmin(_0x3673d5);if(!_0x37632e){_0x4e47e1['preventDefault']();const _0x5bb48a=document[_0x49953b(0x130)]('d1-switch');return _0x5bb48a&&(_0x5bb48a[_0x49953b(0x18e)]=!![],_0x5bb48a['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x415f1f=>{const _0x45a778=_0x37d679,_0x48e409=await checkIfUserIsAdmin(_0x415f1f);!_0x48e409?(_0x59511d[_0x45a778(0x174)]=!![],_0x5967c0['style']['opacity']='0.5',_0x5967c0['style']['cursor']='not-allowed',_0x5967c0[_0x45a778(0x138)]='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x59511d['disabled']=![],_0x5967c0['style']['opacity']='1',_0x5967c0['style'][_0x45a778(0x133)]='pointer',_0x5967c0['title']='');}));});async function checkIfUserIsAdmin(_0x53cd6f){const _0x46431d=a25_0x424d75;if(!_0x53cd6f)return![];try{const _0x3da9f1=[_0x46431d(0x129),'brian2af@outlook.com'];if(_0x53cd6f['email']&&_0x3da9f1['includes'](_0x53cd6f['email'][_0x46431d(0x183)]()))return!![];const _0x3dc828=['userProfiles','players','playersD2','playersD3'],_0x216a8c=['admin',_0x46431d(0x195),_0x46431d(0x1ab),'creative\x20lead'];for(const _0x11f805 of _0x3dc828){try{const _0x1b76af=doc(db,_0x11f805,_0x53cd6f['uid']),_0x19a217=await getDoc(_0x1b76af);if(_0x19a217['exists']()){const _0x4f59be=_0x19a217[_0x46431d(0x13e)](),_0xd15a82=(_0x4f59be['roleName']||_0x4f59be['role']||'')[_0x46431d(0x183)]();if(_0xd15a82&&_0x216a8c['includes'](_0xd15a82))return!![];}}catch(_0x2e60c7){console[_0x46431d(0x16f)](_0x46431d(0x17d)+_0x11f805+':',_0x2e60c7);}}return![];}catch(_0x434f69){return console[_0x46431d(0x13c)](_0x46431d(0x1ac),_0x434f69),![];}}function showAdminOnlyMessage(){const _0x1dc802=a25_0x424d75,_0x14a0f4=document['getElementById']('admin-only-message');_0x14a0f4&&_0x14a0f4[_0x1dc802(0x14f)]();const _0x5682ac=document['createElement']('div');_0x5682ac['id']=_0x1dc802(0x1a5),_0x5682ac['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x5682ac['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x5682ac),setTimeout(()=>{_0x5682ac['parentNode']&&_0x5682ac['remove']();},0xbb8);}