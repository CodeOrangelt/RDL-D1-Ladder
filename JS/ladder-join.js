const a25A=a25b;(function(a,b){const z=a25b,c=a();while(!![]){try{const d=-parseInt(z(0xd2))/0x1*(-parseInt(z(0xee))/0x2)+-parseInt(z(0x109))/0x3*(-parseInt(z(0x107))/0x4)+parseInt(z(0xcd))/0x5+-parseInt(z(0xf1))/0x6*(-parseInt(z(0xfc))/0x7)+-parseInt(z(0xe3))/0x8+-parseInt(z(0xea))/0x9*(-parseInt(z(0xdd))/0xa)+parseInt(z(0xd4))/0xb*(-parseInt(z(0xf9))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a25a,0xa6716));import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a25b(a,b){const c=a25a();return a25b=function(d,e){d=d-0xc0;let f=c[d];if(a25b['JWMYVs']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a25b['gSFXGy']=g,a=arguments,a25b['JWMYVs']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a25b['gSFXGy'](f),a[i]=f):f=j,f;},a25b(a,b);}import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';function a25a(){const L=['BgfKzgvYlwPVAw4TChjVBxb0','y2XHC3noyw1L','zgf0yq','qxv0AgvUDgLJyxrPB24GzxjYB3i6','zgLZywjSzwq','igXHzgrLCI4UlG','mty3nZK2rffACLDA','D2fYBG','igXHzgrLCIeGvgHLihbHz2uGD2LSBcbYzwzYzxnOlI4U','otK2ntqXEMj2ANv4','zw1HAwW','ww91igfYzsbHBhjLywr5ihbHCNqGB2yGDgHLia','q291BgqGBM90ihzLCMLMEsb5B3vYigfJy291BNqUifbSzwfZzsbJB250ywn0igfUigfKBwLUAxn0CMf0B3iU','CgXHEwvYCW','tgfKzgvYignOyw5NzwqGDg86ia','AM9PBI1SywrKzxiTDhLWzq','zg9JCW','zw1WDhK','u3vJy2vZC2z1BgX5igPVAw5Lzcb0AguGrhvVCYbSywrKzxiHifLVDsbJyw4GBM93igzVCM0GDgvHBxmGD2L0AcbVDgHLCIbWBgf5zxjZlIbuAguGCgfNzsb3AwXSihjLzNjLC2GUlI4','yMXVy2S','ofjbB0vWyq','rfvpuW','oti0otaZz0zcChft','C3r5Bgu','z2v0rwXLBwvUDej5swq','ww91ig11C3qGyMuGC2LNBMvKigLUihrVigPVAw4GysbSywrKzxiU','DMfSDwu','zgvZyW','CxvLCNLtzwXLy3rVCKfSBa','lcbKzwzHDwX0Aw5NihrVieqX','BgfKzgvYlwPVAw4TC3rHDhvZigXVywrPBMC','Aw5WDxrBBMfTzt0IBgfKzgvYiL0','AM9PBI11C2vYBMfTzs1PBNb1Da','DwLK','qxv0AgvUDgLJyxrPB24GDMvYAwzPy2f0Aw9UigzHAwXLzdO','q2HLy2TPBMCGDxnLCIbZDgf0DxmGzM9YigXHzgrLCJO','Bg9JyxrPB24','re9nq29UDgvUDeXVywrLza','vMvYAwz5Aw5NihvZzxjUyw1LlI4U','nda1otm3nxnXzgrSva','BM9UugfYDgLJAxbHBNrZ','CgXHEwvYC0nurG','Cg9ZAxrPB24','q1rg','mKj4BvnMsW','CgXHEwvYC0r1B3m','mty4m1bssg9nuq','ywrKrxzLBNrmAxn0zw5LCG','zM9YrwfJAa','DxnLCM5HBwu','Dgv4DenVBNrLBNq','tgfKzgvYigPVAw46ieqYihjHzgLVigzVDw5KoG','qxv0AgvUDgLJyxrPB24GzMfPBgvKlIbqBgvHC2uGC2LNBIbPBIbHz2fPBI4','ugXLyxnLigvUDgvYihLVDxiGDxnLCM5HBwuGDg8Gy29UzMLYBs4','BgfKzgvYlwPVAw4TC3rHDhvZigvYCM9Y','mZbNBgzqrNG','y2HLy2TLza','BwvZC2fNzq','rxjYB3iGAM9PBMLUzYbSywrKzxi6ia','CgXHEwvYC0qY','Dg9mB3DLCKnHC2u','nteYota4og9VCK5owa','DhjPBq','CMvSB2fK','zxjYB3i','rxjYB3iGy2HLy2TPBMCG','Bg9N','vw5RBM93BIbSywrKzxiGDhLWztOG','mZmYoty0ow9cANHsza','BgfKzgvYlwPVAw4TC3rHDhvZ','z2v0swruB2TLBG','zgLZCgXHEq','nZGXntyYtuDWDejL','zxHPC3rZ','BM9Uzq','nKLyA1vWsW','C3bSAxq'];a25a=function(){return L;};return a25a();}let currentLadder='D1';document['addEventListener'](a25A(0xcb),()=>{const B=a25A,a=document['getElementById']('d1-switch'),b=document[B(0x10b)]('d2-switch');console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!a),console['log'](B(0xd9),!!b);function c(){const C=B;document[C(0xc2)](C(0xc5))[C(0xd6)](e=>{const D=C;e[D(0xd5)]('change',f=>{const E=D;f['target'][E(0xde)]&&(currentLadder=f['target'][E(0xc0)],console['log'](E(0x101)+currentLadder),checkUserLadderStatus());});});}c();const d=document['getElementById']('join-ladder-button');d&&d['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,e=>{const F=B;if(e)checkUserLadderStatus();else{const f=document['getElementById']('ladder-join-prompt');f&&(f['style'][F(0xed)]='none');}});});function getCollectionName(a){const G=a25A;switch(a?.['toUpperCase']()){case'D1':return G(0x100);case'D2':return G(0xe1);case'D3':return'playersD3';case'DUOS':case'DUO':return G(0xd3);case G(0xd1):return G(0xcf);default:console[G(0xfa)](G(0xe9)+a+G(0xc3));return G(0x100);}}async function checkUserLadderStatus(){const H=a25A;console[H(0xe8)](H(0xc9),currentLadder);const a=auth['currentUser'],b=document[H(0x10b)](H(0xf3)),c=document[H(0x10b)](H(0x102)),d=document[H(0x10b)]('tiny-join-button');if(!a||!a[H(0xc7)]||!b||!c||!d){if(b)b[H(0x10a)][H(0xed)]=H(0xf0);if(d)d[H(0x10a)]['display']='none';return;}try{try{await a[H(0xec)](![]);}catch(h){console['error'](H(0xc8),h),b[H(0x10a)]['display']=H(0xf0),d[H(0x10a)]['display']='none';return;}const e=getCollectionName(currentLadder),f=doc(db,e,a[H(0xc7)]),g=await getDoc(f);if(g[H(0xef)]())b['style']['display']='none',d['style']['display']='none';else{b['style'][H(0xed)]='none',d[H(0x10a)]['display']='block',c[H(0xd8)]=currentLadder,d['onclick']=()=>{const I=H;b[I(0x10a)]['display']===I(0x106)?b['style'][I(0xed)]=I(0xf0):b[I(0x10a)]['display']='block';};const i=document['getElementById'](H(0xc6)),j=document['getElementById'](H(0xeb));if(i)i['value']='';j&&(j['textContent']='',j[H(0xf4)]='ladder-join-status');}}catch(k){console['error']('Error\x20checking\x20ladder\x20status:',k),b['style'][H(0xed)]='none',d['style']['display']=H(0xf0);}}async function handleJoinLadder(){const J=a25A,a=auth['currentUser'],b=document[J(0x10b)]('join-ladder-button'),c=document[J(0x10b)](J(0xeb)),d=document['getElementById']('join-username-input');if(!a||!a['uid']){c['textContent']=J(0x10c),c[J(0xf4)]=J(0xdc);return;}try{await a[J(0xec)](!![]);}catch(e){console[J(0xe6)](J(0xf6),e),c[J(0xd8)]=J(0xda),c['className']=J(0xdc);return;}if(!d||!d['value'][J(0xe4)]()){c[J(0xd8)]=J(0xdb),c[J(0xf4)]=J(0xdc);return;}try{b[J(0xf7)]=!![],c['textContent']=J(0xcc),c[J(0xf4)]=J(0xc4);let f='',g=null;const h=[J(0x100),J(0xe1),'playersD3',J(0xd3),J(0xcf),J(0xce)];for(const s of h){try{const t=doc(db,s,a[J(0xc7)]),u=await getDoc(t);if(u[J(0xef)]()){g=u[J(0xf5)]();if(g[J(0xd7)]){f=g['username'];break;}}}catch(v){console['error'](J(0xe7)+s+':',v);}}!f&&a['email']&&(f=a[J(0xfd)][J(0xf2)]('@')[0x0]);if(!f){c[J(0xd8)]=J(0xff),c['className']='ladder-join-status\x20error',b[J(0xf7)]=![];return;}const i=d[J(0xc0)][J(0xe4)]();if(f&&i['toLowerCase']()!==f[J(0xe2)]()){c['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+f+'\x22\x20to\x20confirm.',c['className']=J(0xdc),b['disabled']=![];return;}c[J(0xd8)]='Joining\x20'+currentLadder+J(0xf8);const j=getCollectionName(currentLadder),k=doc(db,j,a[J(0xc7)]),l=await getDoc(k);if(l[J(0xef)]()){c[J(0xd8)]=J(0xfe)+currentLadder+'\x20ladder.',c[J(0xf4)]=J(0xdc),b[J(0xf7)]=![];return;}try{await a[J(0xec)](!![]);}catch(w){c[J(0xd8)]=J(0xda),c[J(0xf4)]=J(0xdc),b['disabled']=![];return;}const m=f,n=collection(db,j),o=query(n,orderBy('position',J(0xc1)),limit(0x1)),p=await getDocs(o);let q=0x1;if(!p[J(0x104)]){const x=p[J(0x103)][0x0][J(0xf5)]();q=(x[J(0xd0)]||0x0)+0x1;}const r={'username':m,'email':a[J(0xfd)],'eloRating':0x4b0,'position':q,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder===J(0x108)&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(k,r),currentLadder===J(0x108)?c[J(0xd8)]=J(0x105):c['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+J(0xfb),c['className']='ladder-join-status\x20success',setTimeout(()=>{const K=J;window[K(0xca)][K(0xe5)]();},0x7d0);}catch(y){console[J(0xe6)]('Error\x20joining\x20ladder:',y),c['textContent']=J(0xe0)+y[J(0xdf)],c[J(0xf4)]=J(0xdc),b['disabled']=![];}}